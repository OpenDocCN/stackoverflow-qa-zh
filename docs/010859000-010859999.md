# StackOverflow 问答 10859000-10859999

# javascript - 模拟点击 xy 坐标

> ID：10859011
> 
> 赞同：1
> 
> 时间：2012-06-02T00:58:15.060
> 
> 标签：javascript

使用 JavaScript 我试图模拟点击。这将在 Flash 剪辑 swf 文件上执行。使用以下代码。这是我想出的。

```
countDown = 10;
var rollDice = setInterval(function() {
    console.log(countDown);

    if (countDown == 0) {
        clearInterval(rollDice);
        document.elementFromPoint(416, 825).click();
    }
    countDown--;
}, 1000); 
```

使用此代码，我收到以下错误：未捕获的 TypeError：无法调用 null 的方法“单击”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:01:19.877

我不确定通过坐标而不是 jQuery 选择器单击项目是否是一个好主意。为什么你必须通过坐标来做点击事件而不是选择被按下的按钮？

您的问题似乎是由于 elementFromPoint 不返回 jQuery 对象，请尝试以下操作：

```
$(document.elementFromPoint(416, 825)).click(); 
```

# ruby-on-rails-3 - 如何构造 PUT 到外部 API 的 form_tag URL

> ID：10859013
> 
> 赞同：1
> 
> 时间：2012-06-02T00:59:38.363
> 
> 标签：ruby-on-rails-3, shopify

我正在使用 Shopify API [http://api.shopify.com/](http://api.shopify.com/)

还有 Shopify Gem：[https](https://github.com/Shopify/shopify_api) ://github.com/Shopify/shopify_api ，它完成了大部分繁重的工作——只是无法弄清楚如何让它工作。

要更新 @variant 对象，我需要在此处放置：`PUT /admin/variants/#{id}.json`

在 config/routes.rb 中，我使用 resources :variants 创建了默认资源路由，现在我正在尝试制作一个更新变体资源的表单，但无法将表单配置为具有正确的操作。

基本上我正在使用一个文本字段输入构造 form_tag，该输入接受一个整数并更新 variant.inventory_quantity

Rake Routes 给了我这个：

```
rake routes: 

variants     GET    /variants(.:format)           variants#index
             POST   /variants(.:format)           variants#create
new_variant  GET    /variants/new(.:format)       variants#new
edit_variant GET    /variants/:id/edit(.:format)  variants#edit
variant      GET    /variants/:id(.:format)       variants#show
             PUT    /variants/:id(.:format)       variants#update
             DELETE /variants/:id(.:format)       variants#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:24:38.167

您需要在 admin 命名空间下声明变体资源，如下所示：

# 配置/路由.rb

```
namespace :admin do
  resources :variants
end 
```

编辑：

Rails 接受 JSON 不需要做任何特别的事情。Rails 会将您在 PUT 中传递的 JSON 转换为参数，并使其可用于更新方法。

这是“更新”方法的标准实现：

# 应用程序/控制器/管理员/variants_controller.rb

```
def update
  @variant = Variant.find(params[:id])

  respond_to do |format|
    if @variant.update_attributes(params[:variant])
      format.html  { redirect_to(@variant,
                    :notice => 'Variant was successfully updated.') }
      format.json  { head :no_content }
    else
      format.html  { render :action => "edit" }
      format.json  { render :json => @variant.errors,
                    :status => :unprocessable_entity }
    end
  end
end 
```

有关详细信息，请参阅[Rails 指南](http://guides.rubyonrails.org/getting_started.html)以及[布局和渲染](http://guides.rubyonrails.org/layouts_and_rendering.html)。

# jquery - 单击两次后颜色框未打开

> ID：10859015
> 
> 赞同：0
> 
> 时间：2012-06-02T00:59:55.060
> 
> 标签：jquery, colorbox

我对颜色框有最奇怪的问题。我单击一个链接，然后打开模式窗口。我关上窗户。我再次单击链接，窗口再次打开。然后我再次关上窗户。到目前为止一切都很好。然后，当我再次单击该链接时，请求的页面将打开，但不在模式窗口中。它像普通链接一样在同一个窗口中打开。我可以整天复制这个。

有任何想法吗？我对 colorbox 或 jscript 不是很熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:27:31.930

@Jack~你的回复让我找到了答案，结果比我想象的要简单得多。调用链接在更新面板内，而建立事件处理程序的 jQuery 在面板外。更新面板刷新后，将无法打开。通过移动更新面板中的所有内容，我能够完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:34:15.653

> 它像普通链接一样打开

这是出现 JavaScript 错误时的行为。在没有看到问题演示的情况下，这里的任何人都无法确定导致错误的原因，因为它实际上可能是任何东西。

经常引起问题的一件事是人们将完整的 HTML 文档加载为 ajax，而不是 iframe。这会导致很多脚本冲突，因为两个文档的脚本都试图在同一个全局命名空间中工作。

# css - 用 RGBA 颜色覆盖 CSS 渐变？

> ID：10859017
> 
> 赞同：5
> 
> 时间：2012-06-02T01:00:27.933
> 
> 标签：css, overlay, background-image

我想为它的按钮添加一个透明的黑色覆盖层'：活动状态，所以当你点击它时，它是相同的渐变，但只有一个覆盖层，例如`rgba(0,0,0,.3)`

我认为这可行的方式是（在此示例中使用 webkit）：

```
background:rgba(0,0,0,.3), -webkit-linear-gradient(top, #fcfcfc 0%,#bababa 100%); 
```

或没有逗号，顺序颠倒了……但什么也没有出现！

我不热衷于添加另一个 div 来充当叠加层，那么有没有严格的 CSS 方法来做到这一点？我在想也许它是一个`:before`或`:after`伪类，但我不知道如何使用这些！

非常感谢您的回答，这一直困扰着我很长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T01:28:24.243

你不能那样做；`rgba`定义颜色，而不是图像。您可以做的是使用不是渐变的渐变：

```
background: -webkit-linear-gradient(rgba(0, 0, 0, .3), rgba(0, 0, 0, .3)), -webkit-linear-gradient(top, #fcfcfc 0%,#bababa 100%); 
```

这就是为什么我`background-image`在开发时总是指定而不是使用简写 - 它使调试更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T01:41:28.033

你可以用`::after`伪元素来做到这一点。

首先，您需要定义按钮 CSS with `position: relative`，然后使用`::after`with `position: absolute`，如下所示：

```
.button {
  position: relative;
}

.button:active::after {
    content: ' ';
    position: absolute;
    background: rgba(0, 0, 0, 0.3);
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
} 
```

[**现场小提琴演示**](http://jsfiddle.net/YwPHu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T01:27:46.703

## 反向思考

使用从十六进制转换为 rgba（最初设置为 alpha）的颜色设置`background-color: black`并覆盖渐变，然后将渐变淡化为（将显示 30% 黑色）alpha。`1``:active``0.7`

[见小提琴](http://jsfiddle.net/QEhsG/2/)。

```
button {
    background-color: black;
    background-image: -webkit-linear-gradient(top, rgba(252, 252, 252, 1) 0%, rgba(186, 186, 186, 1) 100%);
    background-image: -moz-linear-gradient(top, rgba(252, 252, 252, 1) 0%, rgba(186, 186, 186, 1) 100%);
}

button:active {
    background-image: -webkit-linear-gradient(top, rgba(252, 252, 252, .7) 0%, rgba(186, 186, 186, .7) 100%);
    background-image: -moz-linear-gradient(top, rgba(252, 252, 252, .7) 0%, rgba(186, 186, 186, .7) 100%);    
} 
```

# javascript - 如何仅针对单击的图层而不是其父图层触发单击事件

> ID：10859018
> 
> 赞同：0
> 
> 时间：2012-06-02T01:00:42.003
> 
> 标签：javascript, jquery

[小提琴](http://jsfiddle.net/5xvkM/5/)

我当然可以将`.inner`图层从图层中取出，`.main`然后对另一个包装器（即`.outer`图层）使用绝对位置将其放置在同一位置，这将阻止它触发`.main`点击事件。但我想知道如果子元素和父元素都触发点击事件，是否有更简单的方法可以避免同时触发点击事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:04:15.957

您可以使用`stopPropagation()`

```
$(document).ready(function() {
    $('.outer').on("click",".main",function() { alert('main clicked'); })
    $('.outer').on("click",".inner",function(e) {e.stopPropagation(); alert('inner clicked'); })
}); 
```

[http://jsfiddle.net/5xvkM/6/](http://jsfiddle.net/5xvkM/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:04:22.413

[使用`stopPropagation()`](http://jsfiddle.net/5xvkM/7/). 即使两者都是委托事件，jQuery 也会首先对它们进行最深的评估。由于最内层有`stopPropagation()`，因此不执行顺序较高的事件。

```
$('.outer').on("click", ".inner", function(event) {
    event.stopPropagation();
    alert('inner clicked');
}); 
```

但是您必须注意直接处理程序和委托处理程序之间的执行顺序。由于事件需要冒泡才能到达委托的处理程序，因此首先触发直接处理程序。[当直接处理程序混合](http://jsfiddle.net/5xvkM/10/)使用时，使用委托处理程序停止传播将毫无用处。

# python-3.x - python3 tkinter 或 ncurses

> ID：10859023
> 
> 赞同：4
> 
> 时间：2012-06-02T01:02:19.567
> 
> 标签：python-3.x, tkinter, ncurses

我想为我的 Python 程序实现某种 UI（一些简单的操作，没有什么高级的）。所以我环顾四周，考虑了用于 python 的 ncurses 和 tkinter。然而，我不确定这两个中哪一个最适合我对具有最佳输出可能性的简单界面（在易于学习编程的意义上）的需求。它不必花哨或任何东西，只需帮助我可视化我的代码（假设是基于文本的国际象棋游戏）。

直觉上我会选择 tkinter，但你能否为我总结一下这两个 UI 的优点？（此外ncurses似乎没有一个很好的python教程......）

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T11:13:03.657

我想推荐 tkinter，因为它带有 python，并与其他 GUI 包进行比较，它有很好的教程。它还将帮助您改进 Python 的 OOP 概念

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:15:17.290

如果您打算跨平台使用您的应用程序，Tkinter 或 PyQt 都是不错的选择。如果您想要一个与您的 GNOME 环境匹配的 GTK+ 应用程序并且不打算在其他平台上使用该应用程序，那么我建议您通过 gobject-introspection（来自 pygobject）使用 GTK+。在 Fedora 中，您应该有开箱即用的支持。其他发行版可能需要安装额外的软件包。

有关上述绑定的更多信息，请参阅：

*   [TkDocs](http://www.tkdocs.com/)
*   [Python GTK+ 3 教程](http://python-gtk-3-tutorial.readthedocs.org/en/latest/)

（抱歉，我无法发布 PyQt 的链接，因为我没有足够的声誉来发布超过 2 个链接。）

此外，值得注意的是，PyQt 和 GTK+ 都有可用的界面设计器，因此您不必以编程方式创建界面，如果您不想这样做。对于 PyQt，我相信 Qt Creator 带有一个界面设计器。对于 GTK+，你有 Glade。

# php - 当 SimpleXML 解析带有特殊字符的 XML 时会发生什么？

> ID：10859024
> 
> 赞同：2
> 
> 时间：2012-06-02T01:02:50.060
> 
> 标签：php, simplexml, special-characters

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:09:08.727

`$title`将是输出中的 UTF-8 编码字符串。向浏览器发出信号，表明您的网站采用 UTF-8 格式并且一切正常：

```
header("Content-type:text/html; charset=utf-8"); 
```

另请参阅：[设置 HTTP 字符集参数](http://www.w3.org/International/O-HTTP-charset.en.php)

只有问号是什么意思？可能[快速的答案](http://www.w3.org/International/questions/qa-html-encoding-declarations#answer)是有帮助的。

# ant - Ant下@Grab注解失败

> ID：10859026
> 
> 赞同：0
> 
> 时间：2012-06-02T01:03:08.870
> 
> 标签：ant, groovy, ivy

我正在使用@Grab 注释来获取我可以提供给 XMLSlurper 的 Html 解析器的定义（我认为它是 tagoup 解析器），当我从 cmd 行运行我的脚本时一切都很好。如果我从 Ant 调用相同的脚本，我会收到 Ivy NoClassDefFound 错误。我认为这可能与在 Antlib 中拥有 Ivy 有关。是否有另一种方法来解析 Html 而无需通过@Grab 自定义 slurper？

这个：

```
@Grab(group='org.ccil.cowan.tagsoup', module='tagsoup', version='1.2' )
doc = new XmlSlurper(new org.ccil.cowan.tagsoup.Parser()).parse(confluenceWebPageInputStream) 
```

从命令行工作得很好，但是当我从 Ant 构建目标运行它时：

```
<target name="update-wiki-chart">
    <echo message="Will update chart for version ${version}"/>
    <java dir="${basedir}" classname="groovy.lang.GroovyShell">
        <arg value="ParseWikiPage.groovy"/>
        <classpath refid="groovylib"/>
    </java>
</target> 
```

其中 groovyLib 是指向从我们的内部 Nexus 存储库下载的 Groovy-1.8.6 jar 的路径引用，我收到 NoClassDefFound 错误。我认为这可能是由于在 Antlib 中安装了 Ivy 导致类加载器在两个地方找到它。我只是在写这篇文章的时候想到了一些事情。我可能可以在分叉模式下运行 java 或做一些事情使其看不到/共享 Ant 的类路径。自从我与 Ant 和类加载器问题搏斗已经有几年了。由于该错误，我的项目有点拖欠，我正在寻找快速/简单的修复方法。

我刚刚尝试通过“java”cmd 在 cmd 行上运行我的 groovy，并在类路径中加载 groovy-all jar，我意识到我在那里也收到了 NoClassDefFound 错误。它与 Antlib 下的 Ivy 冲突无关。相反，我完全想念常春藤。我以为它包含在 Groovy-all.jar 中。我只需要一种巧妙的方法将 Ivy 从 AntLib 传递到我的 java 任务中，以使这一切正常运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:57:32.217

听起来您在类路径中缺少一个或多个罐子。我建议挖掘你标记为“groovylib”的类路径引用。

[使用groovy ANT 任务](http://groovy.codehaus.org/The+groovy+Ant+Task)从 ANT 内启动 groovy 的不易出错的方法。

这是与您的用例类似的示例：

[使用 Ant 脚本解析 HTML](https://stackoverflow.com/questions/7428855/parse-html-using-with-an-ant-script/7435804#7435804)

我的示例直接使用 ivy 来管理所有构建依赖项。Grab 注释仍然受支持，但显然这些只会管理 groovy 脚本的依赖关系。

# php - PHP foreach 提供的参数无效

> ID：10859028
> 
> 赞同：0
> 
> 时间：2012-06-02T01:03:29.700
> 
> 标签：php, foreach

我正在尝试在表单上显示错误消息，但只显示一条（总是最后一条）。我尝试使用 foreach 循环，但我不断收到无效参数错误。下面一一显示错误。代码在一个类中......

```
public $errorContainer = '';

// ------------------------------------------------------------
// ERROR MESSAGE PROCESSING
// ------------------------------------------------------------
private function responseMessage($respBool, $respMessage) {
    $return['error'] = $respBool;
    $return['msg'] = $respMessage;
    if (isset($_POST['plAjax']) && $_POST['plAjax'] == true) {
        echo json_encode($return);
    } else {
        $this->errorContainer = $respMessage;
    }
} 
```

以下总是给我每个参数错误的无效。

```
private function responseMessage($respBool, $respMessage) {
    $return['error'] = $respBool;
    $return['msg'] = $respMessage;
    if (isset($_POST['plAjax']) && $_POST['plAjax'] == true) {
        echo json_encode($return);
    } else {
        foreach ($respMessage as $value) {
            $this->errorContainer = $value;
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:06:14.177

用这个替换你`foreach()`的：

```
private function responseMessage($respBool, $respMessage) {
  // ...code...
  foreach ((array) $respMessage as $value) {
    $this->errorContainer .= $value;
  }
  // ...code---
} 
```

使用`(array)`上面的类型转换将使其适用于数组和字符串类型。

**编辑：**

仅在您最后的努力中使用此解决方案（类型转换）。但你真正的问题是你没有将数组传递给函数。请参阅此代码：

```
// incorrect
$msg = 'This is a message';
$this->responseMessage($some_bool, $msg);

// correct
$msg = array('This is a message');
$this->responseMessage($some_bool, $msg);

// correct
$msg = array('This is a message', 'And another message');
$this->responseMessage($some_bool, $msg); 
```

如果像上面那样正确传递参数，则不需要强制`$respMessage`转换为数组。

# iphone - 我可以从命令行下载应用程序的 xcappdata 文件夹吗？

> ID：10859034
> 
> 赞同：2
> 
> 时间：2012-06-02T01:04:38.177
> 
> 标签：iphone, xcode

我想从我的 iPhone 应用程序中查看数据库。

我可以从 Xcode 的管理器下载应用程序的 xcappdata 文件夹，但我真的更喜欢从命令行执行此操作，以便整个过程可以自动化。

数据库需要从实际的 iPhone 中提取，而不是从模拟器中提取。这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-02T01:07:46.350

Apple 不允许您从 iPhone 中提取数据，因为您可以简单地从手机中提取钥匙串文件或个人数据并对其进行解密。但是，如果您愿意，您可以越狱 iPhone，从 Cydia 下载 OpenSSH，然后通过 SSH 到手机上下载文件。我不赞成第二种方法；只有当你真的想要这个文件时。

我想我正确理解了你的问题，但如果我错了，请告诉我。

希望这可以帮助。

# javascript - 带有用户名的 Expressjs 路由

> ID：10859036
> 
> 赞同：2
> 
> 时间：2012-06-02T01:05:02.587
> 
> 标签：javascript, node.js, routes, express

我试图在 expressjs 中使用用户名作为路由，以查看他们的个人资料。

```
app.get('/:username', function (req, res, next) {
    users.get_user(req.params.username, function (err, results) {
        if(results[0]) {
            res.render('/profile', {
                title: 'Profile',
                userinfo: results[0]
            });
        } else {
            next();
        }
    });
}); 
```

`users.get_user`是一个从数据库中获取用户的函数。如果它没有找到用户，它会继续下一条路线。我还有很多其他页面，例如`/start`，`/forum`等等。这是一种不充分的方法吗，因为每次通过`/:username`路由时都会调用 db。我的问题是，有没有更好更充分的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T03:00:49.797

尝试在应用程序中的路由之前定义更具体的路由（例如`/start`, `/forum`） 。`/:username`Express 按照您定义的顺序匹配路由。

例如这样做：

```
app.get('/start', function(req, res, next) {...});
app.get('/forum', function(req, res, next) {...});
app.get('/:username', function(req, res, next) {...}); 
```

不是

```
app.get('/:username', function(req, res, next) {...});
app.get('/start', function(req, res, next) {...});
app.get('/forum', function(req, res, next) {...}); 
```

这样，如果用户去`/start`，它不会命中`/:username`路由并导致数据库命中。

# google-apps-script - 无法将列表框与服务器处理程序一起使用来更改标签文本

> ID：10859042
> 
> 赞同：0
> 
> 时间：2012-06-02T01:06:33.207
> 
> 标签：google-apps-script

如果标题令人困惑，希望这能让我更清楚我想要做什么：

```
function doGet(e) {
  var app = UiApp.createApplication();

  var list = app.createListBox().setName('list');
  list.addItem("this");
  list.addItem("that");
  list.addItem("they");

  var handler = app.createServerHandler('foo').addCallbackElement(list);
  list.addChangeHandler(handler);

  var label = app.createLabel("test").setId('label');

  var panel = app.createVerticalPanel();
  panel.add(list); 
  panel.add(label);
  app.add(panel);

  return app;
}​

function foo(e) {
  var app = UiApp.getActiveApplication();
  var value = e.parameter.list;
  var label = app.getElementById('label');
  label.setText(value);
} 
```

它不会调用任何错误。如果我故意在 中输入错误`foo`，我会收到一条错误消息，因此我假设处理程序正在被调用并且没有做任何事情。如果我只是让它显示一个电子表格，这可以在电子表格中使用`Browser.msgBox(value)`，所以我知道这很有效。

我正在尝试在一个程序中使用它，该程序将根据在第一个列表框中选择的内容自动更新页面上的所有列表框。我已经能够使用服务器处理程序和 更改诸如可见性之类的东西`app.getElementById`，但只能使用单选按钮，而不是列表框。我显然在这里做错了什么，但不清楚那是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T03:10:13.233

要更新对 UiApp 的更改，您必须在处理程序上返回应用程序，例如

```
 //...
  label.setText(value);
  return app;
} 
```

# qr-code - 使用多个二维码对二值图像进行编码

> ID：10859043
> 
> 赞同：6
> 
> 时间：2012-06-02T01:06:49.730
> 
> 标签：qr-code

我越来越多地考虑使用 QR 码来传输二进制信息，例如图像，因为每当我演示我的应用程序时，它似乎都发生在 WiFi 或 3G/4G 无法正常工作的情况下。

我想知道是否可以将二进制文件拆分为多个部分以通过一系列 QR 码进行编码？

这会像拆分文本文件一样简单，还是需要某种复杂的数据一致性检查？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T11:21:16.573

Yes, you could convert any arbitrary file into a series of QR codes, something like [Books2Barcodes](http://wonder-tonic.com/books2barcodes/).

The standard way of encoding data too big to fit in one QR code is with the ["Structured Append Feature"](http://www.qrcode.com/en/qrfeature.html) of the QR code standard. Alas, I hear that most QR encoders or decoders -- such as zxing -- currently do not (yet) support generating or reading such a series of barcodes that use the structured append feature.

QR codes already have a pretty strong internal error correction. If you are lucky, perhaps splitting up your file with the "`split`" utility into pieces small enough to fit into a easily-readable QR code, then later scanning them in (hopefully) the right order and using "`cat`" to re-assemble them, might be adequate for your application.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T02:24:42.403

您肯定可以在二维码中存储大量数据；[它可以存储 2953 字节的数据](http://www.denso-wave.com/qrcode/qrfeature-e.html)，几乎是源自以太网的标准 TCP/IP 数据包大小的两倍，因此它非常强大。

您需要为每个 QR 码定义一些标头，以描述其在重建数据所需的流中的位置。它将类似于`filename chunk 12 of 96`，但以比纯文本更好的方式编码。（文件名 8 个字节，块编号和块总数各 1 个字节 - 最多 256 个 QR 码，一个简单的 10 字节答案，每个代码仍保留 2943 个字节。）

您可能还希望使用某种形式的[前向纠错](http://en.wikipedia.org/wiki/Forward_error_correction)（例如[纠删码](http://en.wikipedia.org/wiki/Erasure_code)）来编码足够的冗余数据，以便透明地处理对单个 QR 码或整个缺失 QR 码的误读。虽然您可以使用[现有的库（例如 Reed-Solomon 码](http://en.wikipedia.org/wiki/Reed-Solomon_code)）来提供修复 QR 码中的误读的能力，但完全处理丢失的 QR 码可能需要您付出更多的努力。

使用纠删码当然会减少您可以传输的数据量——而不是全部 753,408 字节（256 * 2943），最终图像将只有 512k 或 384k 甚至更少可用——取决于您的码率选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T01:14:09.260

我认为这在理论上是可能的，就像拆分文本文件一样简单。但是，您可能需要设计某种标题以了解数据是多部分的，并确保无论扫描顺序如何，不同部分都可以正确合并在一起。

我假设 QR 阅读器库返回原始二进制数据，您将负责将其转换为您想要的任何形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-18T01:42:30.190

如果您想要自动创建和传输，请参阅

*   [gre/qrloop：将大二进制 blob 编码为 QR 码循环](https://github.com/gre/qrloop)
*   [maxg0/displaysocket.js：DisplaySocket.js](https://github.com/maxg0/displaysocket.js) - 一个 JavaScript 库，用于通过 QR ocdes 仅使用显示器和摄像头将数据从一个设备发送到另一个设备

注意 - 我也没有使用过。

另请参阅：[如何在不添加到另一个网络的双向链接的情况下从专用网络发布数据 - 安全 StackExchange](https://security.stackexchange.com/a/202058/453)

# jquery - 未捕获的类型错误：对象# 没有方法'webkitEnterFullScreen'

> ID：10859045
> 
> 赞同：1
> 
> 时间：2012-06-02T01:07:15.907
> 
> 标签：jquery, html, fullscreen

我正在尝试在弹出窗口中使用 html5 全屏 api，但我不断收到此错误：

```
Uncaught TypeError: Object #<HTMLElement> has no method 'webkitEnterFullScreen' 
```

这是我的html：

```
<html lang="en"><head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Negar - one</title>
        <script type="text/javascript" src="/Negar/js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="/Negar/js/viewer.js"></script>
        <style type="text/css">
        #main-content{height: 100%; width: 100%; position: absolute;
            -webkit-transition: -webkit-transform 1s ease-in;
               -moz-transition: -moz-transform 1s ease-in;
                -ms-transition: -ms-transform 1s ease-in;
                    transition: transform 1s ease-in;
            }
        </style>
    </head><link rel="stylesheet" type="text/css" href="data:text/css,">

    <body>
        <section id="main-content">   some code here   </section>

</body></html> 
```

这是我的功能：

```
$("#main-content").get(0).webkitEnterFullScreen(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:41:09.513

进入全屏的请求可能应该来自用户。你可以尝试这样的事情来实现你想要做的事情：

```
<script>
    function goFs(id) {
        var element = document.getElementById(id);

        if (element.mozRequestFullScreen) {
            element.mozRequestFullScreen();
        } else if (element.webkitRequestFullScreen) {
            element.webkitRequestFullScreen();
        }
    }
</script>

<div id="test">
    Hi there!
</div>

<button onclick="goFs('test');">Full screen?</button> 
```

示例： http: [//fiddle.jshell.net/73Wus/show/](http://fiddle.jshell.net/73Wus/show/)

注意：我不得不分享完整的 jsFiddle 页面，因为`iframe`'s 需要一个特殊的属性来允许全屏，如下所示：

```
<iframe src="127.0.0.1" allowFullScreen></iframe> 
```

...通常的小提琴可以在[这里](http://fiddle.jshell.net/73Wus/)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:27:23.830

恐怕`webkitEnterFullScreen()`只适用于视频元素。

参见[API 手册](http://developer.apple.com/library/safari/documentation/AudioVideo/Reference/HTMLVideoElementClassReference/HTMLVideoElement/HTMLVideoElement.html#//apple_ref/javascript/instm/HTMLVideoElement/webkitEnterFullscreen)

尝试

```
<video id="my-video"></video> 
```

和

```
$("#my-video")[0].webkitEnterFullScreen(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T01:10:44.503

试试这个：

```
$("#main-content")[0].webkitEnterFullScreen(); 
```

# android - 如何更新 Activity 中的 wifi 级别值？

> ID：10859047
> 
> 赞同：1
> 
> 时间：2012-06-02T01:07:45.253
> 
> 标签：android, android-wifi, updates

我正在研究android中的wifi功能。因此，我想在 textViews 中显示 wifi 信息的当前值（信号电平、频率、速率..）。我们知道一些参数会随着时间的推移而变化很大。我的问题是如何更新当前显示值？我正在使用该代码：

```
String service = Context.WIFI_SERVICE;  
final WifiManager wifi = (WifiManager)getSystemService(service);    
WifiInfo info = wifi.getConnectionInfo();
int strenght = WifiManager.calculateSignalLevel(info.getRssi(),5);
int speed = info.getLinkSpeed();
String units = WifiInfo.LINK_SPEED_UNITS;
String ssid2 = info.getSSID(); 
```

例如，当我`strenght=48`在 t1 时刻在 textView 中检索时，它将在另一个时刻 ti 保持相同的值。但我们知道这不是当前值！

然后，我还想了解当我在第一个活动 A1 中显示可用 wifi 连接列表时我该怎么做（我这样做了），如何在第二个活动 A2 中检索信号电平的当前值。我试图做的是使用中间对象来共享 A1 和 A2 之间的信号电平值。但在这里，我也有相同的价值观，没有更新！麻烦你了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:50:37.997

我想你会想要使用 BroadcastReceiver 来检测 WiFi 连接的变化。这看起来类似于您正在尝试做的事情：

[http://android-er.blogspot.com/2011/01/monitor-wifi-status-and-information.html](http://android-er.blogspot.com/2011/01/monitor-wifi-status-and-information.html)

# objective-c - 向 Minecraft 服务器发送数据包：目标 c

> ID：10859049
> 
> 赞同：2
> 
> 时间：2012-06-02T01:07:48.630
> 
> 标签：objective-c, cocoa, networking, packet, minecraft

我一直在尝试从我的自定义 Cocoa 应用程序（当然是用 Objective-C 编写的）向我的世界服务器发送数据包。我对如何做到这一点有点困惑。我是用 Java 做的。那很容易。这样做是objective-c，但事实证明更具挑战性。

这是我正在使用的代码：

```
- (void)handshake
{
    PacketHandshake *packet = [PacketHandshake packetString:[NSString stringWithFormat:@"%@;%@:%i", username, IP, PORT]];
    [packet writeData:dataOut];
} 
```

哪个电话：

```
- (void)writeData:(NSOutputStream *)dataOut
{
    [super writeData:dataOut]; //Writes the "header" which is a char with the value of 0x02 (char packetID = 0x02)
    NSUInteger len = [string lengthOfBytesUsingEncoding:NSUTF16BigEndianStringEncoding]; //Getting the length of the string i guess?
    NSData *data = [string dataUsingEncoding:NSUTF16BigEndianStringEncoding]; //Getting string bytes?
    [dataOut write:(uint8_t*)len maxLength:2]; //Send the length?
    [dataOut write:[data bytes] maxLength:[data length]]; //Send the actual string?
} 
```

我事先已经与服务器建立了成功的连接，但我真的不知道我是否正确发送了数据包。有人可以解释一下我应该如何发送各种数据类型和对象。(int, byte/char, short, double, NSString, BOOL/bool)

此外，是否有任何特定或通用的方式来发送类似于 Minecraft 所需的数据包？

好的，我想现在的问题是：数据类型（主要是字符串）在 Java 和 Objective-C 中是如何关联的？

任何帮助表示赞赏，谢谢！

没人知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:24:17.180

也许您遇到了网络/主机字节顺序问题？我对 Minecraft 知之甚少 - 但我注意到[这里](http://www.minecraftwiki.net/wiki/Classic_server_protocol)提到Minecraft 协议中的 short 使用网络字节顺序，这是大端（所有其他数据类型都是 1 字节长，因此字节序不相关）。所有 x86 机器都使用 little-endian。

我不知道您的 PacketHandshake 类是否在发送数据之前对其进行了转换——如果不是，您可以使用 c 库函数`ntohs()`and `htons()`，为此您需要包含 sys/types.h 和 netinet/in.h 该链接还提到字符串是标准 ASCII 字符的 64 字节数组，用 0x20s 填充。您可以通过执行从 NSString 中获取 ASCII 值`[string UTF8String]`，这将返回`const char*`- 即您的标准 C 字符串以 0x0 结尾，然后可能会填充它。但如果它只在 Java 中工作，那么也许你不需要。

# android - Android，添加许多带计时器的按钮

> ID：10859054
> 
> 赞同：1
> 
> 时间：2012-06-02T01:08:50.477
> 
> 标签：android, arrays, layout, button, timer

**我想做一个简单的游戏..我有一个计时器，每一秒我都会向 main.xml 添加一个新按钮，该按钮总是向下移动，如果我单击特定按钮，它将被删除**

请帮助我..我必须做什么？使用数组按钮？帮助..我只是一个新手，我知道你可以在几分钟内解决这个问题.. =(

前任

```
b[indek] = new Button(context)        
       layout = (LinearLayout) View.inflate(this, R.layout.main, null);
       b[indek].setLayoutParams(new LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
        indek++; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:23:01.810

获取布局使用的实例

```
 LinearLayout layout = (LinearLayout) findViewById(R.id.layout);

   In your xml file, main xml layout android:id="@+id/layout" 
```

并在此布局中添加一个新按钮，`layout.addView( b[indek] )`
请查看[此](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ScrollView2.html)示例

# css - CSS垂直中心内联元素？

> ID：10859057
> 
> 赞同：0
> 
> 时间：2012-06-02T01:09:11.400
> 
> 标签：css, html

您好，我无法在无序列表中获得垂直居中的锚标记。我的 CSS 是：

```
*{ margin: 0; padding: 0;}

html {
    height: 100%;
    font-size: 16px;
}

body {
    font-family: 'Montserrat', sans-serif;
    font-size: 62.5%;
    background-color:rgba(0,0,0, 0.7);
    height: 100%;
}

.container {
    margin-left: 9.814814814814815%; /* 106 / 1080 */
    margin-right: 10.092592592592593%; /* 109 / 1080 */
    width: 80%; /* 864 / 1080 */
    height: 100%;
}

nav ul{
    list-style-type: none;
}

nav ul li {
    display: inline-block;
}

nav ul li a {
    color: white;
    text-transform: uppercase;
    text-decoration: none;
    font-size: 2em;
}

nav {
    background-color: black;
    margin-top: 5.0595238095238096%; /* 85 / 1680 */
    height:  5.476190476190476%; /* 92 / 1680 */
} 
```

然后这是我的html：

```
<div class="container">
    <nav>
        <ul>
            <li><a href="/">home</a></li>
            <li><a href="/get_involved">get involved</a></li>
        </ul>
    </nav>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:54:23.617

`<a>`要实现“垂直居中”，请在元素中添加 line-height 或 padding ：

```
nav ul li a {
    color: white;
    text-transform: uppercase;
    text-decoration: none;
    font-size: 2em;
    padding: 10px 0;
} 
```

您还可以调整父元素的高度`<li>`以微调“居中”。

# wcf - WCF 绑定、契约、已知类型

> ID：10859060
> 
> 赞同：1
> 
> 时间：2012-06-02T01:10:22.373
> 
> 标签：wcf, msmq

我以前可以通过原型项目做到这一点，但是因为现在它正在与项目中包含的其他内容一起“实施”，所以在 WCF 能够从 MSMQ 获取消息方面我遇到了一些问题.

解决方案的结构是我们有“团队”。每个项目都代表了这一点（在某种程度上）。团队只能访问他们需要的项目。

所以：

IncomingMessaging 项目（参考“消息”项目）

这包含的类是从其自身类型的基类（在“消息”项目中）派生的具体类。基类都在“消息”项目中。例子：

```
FirstReport -> FirstReportBase
SecondReport -> SecondReportBase
ThirdReport -> ThirdReportBase 
```

每个基类都派生自“MainBase”。这也存在于“消息”项目中。MainBase 已使用 KnownTypes 属性进行修饰，并具有所有基本已知类型。（FirstReportBase、SecondReportBase 等...）

然后我有一个 WCFImplementation.Messages 项目，它引用了“Messages”和“IncomingMessaging”项目。WCFImplementation.Messages 项目有一个具体的类，用于将 WCF 绑定到 MSMQ，实际实现如下：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]
public class InboundMessagingService : IInboundMessagingService
{
   [OperationBehavior(TransactionScopeRequired = true)]
   public void ProcessIncomingMessage(MsmqMessage<MainBase> msg) { ... }
} 
```

IInboundMessagingService 具有 ServiceContract 属性，并且还具有所有基本类型的 ServiceKnownType 属性

到目前为止和我在一起？

然后我有一个简单的控制台应用程序项目来托管服务。请注意，此时我已将 FirstReport 消息发送到队列：

```
FirstReport fr = new FirstReport(....); 
```

控制台应用程序正在运行，但服务出现故障。它无法读取队列中的消息！（毒药信息）

我错过了什么？IInboundMessagingService 的接口是否必须用具体的类进行装饰？我不能只使用基类吗？

我之前让它与原型一起工作，因为我将具体（FirstReport）和基类（FirstReportBase）都装饰为接口中的服务已知类型，但这是一个“松散”类型的项目结构

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:59:43.963

问题似乎是对象和子对象等……都需要用 DataContract 属性标记。然后主要的具体/基类应该具有用已知类型修饰的 knowntypes 属性，这些已知类型是该基类的子类。

# c# - 试图在不同的项目中引用配置文件

> ID：10859061
> 
> 赞同：0
> 
> 时间：2012-06-02T01:10:31.267
> 
> 标签：c#

我的测试文件位于项目的以下文件夹中：

```
C:\path1\path2\path3\path4\Tests\Unit\MyUnitTest.cs 
```

我的配置文件位于以下文件夹中的项目中：

```
C:\path1\path2\Web\configs\myprecious.config 
```

如何将 MyUnitTest.cs 文件中的配置文件作为相对路径引用？目前我正在对其进行硬编码，因为`C:\path1\path2\Web\configs\myprecious.config`这是不正确的。

请告诉我。

谢谢..

**编辑**：

我通过引用解决了它，如下所示：

Web\configs\myprecious.config

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:36:45.950

我通过引用解决了它，如下所示：

Web\configs\myprecious.config

# playframework-2.0 - 如何为服务器端调试 Play 2 单元测试

> ID：10859064
> 
> 赞同：1
> 
> 时间：2012-06-02T01:11:05.797
> 
> 标签：playframework-2.0

我有一个这样的单元测试：

```
 @Test
    public void callRegisterByForm() {
//  AnyContentAsJson anyContentAsJson = null;
    running(fakeApplication(), new Runnable() {
            @Override
            public void run() {
                Map<String, String> map = new HashMap<String, String>();
                map.put("phoneNumber", "+5103978860");
                map.put("countryCode", "us");

                Result result = routeAndCall(fakeRequest("POST", "/register").withFormUrlEncodedBody(map));
                assertThat(status(result)).isEqualTo(OK);
                assertThat(contentType(result)).isEqualTo("application/json");
                JsonNode jsonResult = Json.parse(contentAsString(result));
                assertThat(jsonResult.get(Config.DEV_REG_STATUS_PARAM).asText()).isEqualTo("OK");
                assertThat(jsonResult.get(Config.DEV_PHONE_NUMBER_PARAM).asText()).isEqualTo("+5103978860");
            }
        });

    } 
```

如何测试服务器的控制器？我尝试设置一个远程 java 应用程序并在控制台上使用“播放调试运行”，但仍然无法**右键单击此测试用例来运行**并使**服务器的控制器在断点处停止**。

这是我右键单击测试用例时的图像。它要求我选择要使用的启动器。 ![在此处输入图像描述](../Images/b268288383569e25841deef16ed3ad76.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:16:06.313

MMMh 因为我使用的是 TypeSafe 堆栈，所以我无权访问`play`可执行文件。

但是，我知道一种在调试模式下启动播放服务器的方法。其实我在[这里](http://ska-la.blogspot.be/2012/03/typesafe-stack-20-missing-play-debug.html)写在我的博客上。

```
`export SBT_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9999` 
```

会让JVM（运行你的Play服务器）监听一个调试连接。

之后，您已经说过，您设置了一个远程应用程序连接到`localhost:9999`

在播放控制台中，您可以选择

*   启动`test`和调试（如果您对控制器进行了单元测试）
*   手动测试您的应用程序（否则）

**编辑**

与在 Eclipse 中运行测试相关，我看不到该怎么做，因为它依赖于类路径，可能还有一些配置。

但是可以做的是执行`play debug test-only test.accounts.MyTest`，假设您`MyTest`在包下的测试类路径中调用了一个测试`test.accounts`。这将只执行 MyTests 的测试。

在开始时将调试器（远程应用程序）附加到 jvm 以便遍历代码。

另一种方法可能是： *`play debug`在一个控制台中， * 附加调试器 * 打开另一个控制台以执行任意`test-only test.accounts.MyTest`多次。

# delphi - 如何更改 RAD Studio（2010 及更高版本）IDE 格式化我的代码的方式？

> ID：10859066
> 
> 赞同：20
> 
> 时间：2012-06-02T01:11:22.213
> 
> 标签：delphi, delphi-xe2, code-formatting

当我使用该选项时，如何配置 RAD Studio IDE 以`begin`在同一行或下一行格式化我的代码？`Format Source`

最常争论的偏好之一是`begin`- 在同一行或自己的行上的位置。您如何设置 Delphi 以`begin`在 Delphi XE2 中的一行或另一行格式化您的源代码？这是指当你去`Edit`>`Format Source`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-02T01:11:23.087

我正在回答这个问题问答风格。

1.  前往`Tools`>`Options`
2.  找到`Formatter`左侧树中的部分
3.  在该节点内，选择`Delphi`>`Line Breaks`
4.  找到右侧标有的部分`Insert line breaks for Begin and Single instructions`
5.  在这里，找到标记为的设置`Line breaks before Begin in control statements`
6.  根据您的喜好`Yes`切换此设置。`No`

![在 Yes 和 No 之间切换以更改 begin 的位置](../Images/85530c564a972918913d3291a42d01c9.png)

`Yes`会产生这个：

```
if (Foo = Bar) then
begin

end; 
```

`No`会产生这个：

```
if (Foo = Bar) then begin

end; 
```

默认情况下，此设置设置为，`Yes`这意味着当您使用 时`Format Source`，它将始终带到`begin`下一行。

本节中有许多设置可以定义如何`Format Source`处理您的代码。此选项至少在 RAD Studio 2010 及更高版本中可用。不确定哪个确切版本。

注意：`Ctrl`+`D`是格式化源代码的键盘快捷键，是一种更快的选择。

# php - 使用 AWS SES 和 PHP 发送电子邮件

> ID：10859069
> 
> 赞同：2
> 
> 时间：2012-06-02T01:12:15.443
> 
> 标签：php, amazon-web-services

我看到了一些关于这个主题的帖子，但没有一个是相关的，所以我不得不问。

这是对我的 EC2 灯组的快速测试，它似乎默默地失败了。我`echo '0'`从跟踪输出中得到

**问题**：如何使用 SES 发送电子邮件？

两者均`john@aol.com`已`frank@gmail.com`验证。
另外，我发送的域已经过验证

```
function sendMail($to, $subject, $message, $from ) {
    require_once('sdk-1.5.6.2/sdk.class.php');

    $AWS_KEY = "eZNhiEcda8BXint6vfF2";
    $AWS_SECRET_KEY = "KUnNKiZNG7ng2Ync2vZNhvfkdzVS0v4NCUE5drw5";

$curl = curl_init(); 
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE);
curl_setopt($curl, CURLOPT_FTP_SSL, CURLFTPSSL_TRY); 
$submit_url = "http://myDomain.com"; 
curl_setopt($curl, CURLOPT_URL, $submit_url);  
curl_exec($curl);
curl_close($curl);

    $amazonSes = new AmazonSES(array( "key" => $AWS_KEY, "secret" => $AWS_SECRET_KEY ));

    //$from = 'sender@myDomain.com';
    //$amazonSes->verify_email_address($from);

    $response = $amazonSes->send_email( 
        $from,
        array( "ToAddresses" => $to ),
        array( "Subject.Data" => $subject,
                "Body.Text.Data" => $message )
    );

  //var_dump( $response);

    if (!$response->isOK()) {
        echo '0';//<<<< this outputs
    }else {
        echo '1';
    }
    //echo '2';
}
sendMail('john@aol.com', "my subj", "my msg", "frank@gmail.com" ); 
```

在 XAMPP 我得到这些错误

```
Fatal error: Uncaught exception 'cURL_Exception' with message 'in sdk-1.5.6.2\lib\requestcore\requestcore.class.php on line 824

cURL_Exception: cURL resource: Resource id #14; cURL error: SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed (cURL error code 60). See http://curl.haxx.se/libcurl/c/libcurl-errors.html for an explanation of error codes. in sdk-1.5.6.2\lib\requestcore\requestcore.class.php on line 824 
```

**注意：在EC2**和**XAMPP**上启用 cURL 支持

是 var_dump（所有字符串都已随机化）

```
 object(CFResponse)#1 (3) { 
["header"]=> array(9) { 
    ["x-amzn-requestid"]=> string(36) "BhDwFTvj9-7MkK7Rp2mnx-ij10DESTi-g6Lb" 
    ["content-type"]=> string(8) "text/xml" 
    ["content-length"]=> string(3) "280" 
    ["date"]=> string(29) "Sat, 02 Jun 2012 12:18:12 GMT" 
    ["_info"]=> array(23) { 
        ["url"]=> string(38) "https://email.us-west-1.amazonaws.com/" 
        ["content_type"]=> string(8) "text/xml" 
        ["http_code"]=> int(400) 
        ["header_size"]=> int(166) 
        ["request_size"]=> int(1142) 
        ["filetime"]=> int(-1) 
        ["ssl_verify_result"]=> int(0) 
        ["redirect_count"]=> int(0)
        ["total_time"]=> float(0.0757) 
        ["namelookup_time"]=> float(0.002371) 
        ["connect_time"]=> float(0.003671) 
        ["pretransfer_time"]=> float(0.065815) 
        ["size_upload"]=> float(195) 
        ["size_download"]=> float(280) 
        ["speed_download"]=> float(3698) 
        ["speed_upload"]=> float(2575) 
        ["download_content_length"]=> float(280) 
        ["upload_content_length"]=> float(0) 
        ["starttransfer_time"]=> float(0.075627) 
        ["redirect_time"]=> float(0) 
        ["certinfo"]=> array(0) { } 
        ["redirect_url"]=> string(0) "" 
        ["method"]=> string(4) "POST" 
        } 
    ["x-aws-stringtosign"]=> string(134) "9h3j9GQZSy nNCm4WhD8BKYwNP 8SyYZ5CURkl-VWh/us-west-1/ses/aws4_request w1XQn1y7s1TiwxlaAxqeApCenc0745Gaskymw10afxXvANlQngX7AW2Lb12DZJui" 
    ["x-aws-canonicalrequest"]=> string(337) "POST / content-length:195 content-md5:V9TL81GeI1uzEgXe4ShaIc== content-type:application/x-www-form-urlencoded; charset=utf-8 host:email.us-west-1.amazonaws.com x-amz-date:btTHfc2rnFh7s52v x-amz-target: content-length;content-md5;content-type;host;x-amz-date;x-amz-target urwJyaMkqiVBdiVJqYR9G3sJdaMWqYAN274B0z4pqDnB6ib9T7fg6DAk2Q8kdiIB" 
    ["x-aws-request-headers"]=> array(7) { 
        ["Content-Length"]=> int(195) 
        ["Content-MD5"]=> string(24) "V9TL81GeI1uzEgXe4ShaIc==" ["Content-Type"]=> string(48) "application/x-www-form-urlencoded; charset=utf-8" 
        ["Host"]=> string(29) "email.us-west-1.amazonaws.com" 
        ["X-Amz-Date"]=> string(16) "btTHfc2rnFh7s52v" 
        ["X-Amz-Target"]=> NULL 
        ["Authorization"]=> string(242) "AWS4-HMAC-SHA256 Credential=2vfgdLE1qzfFKD4tPDRF0aEtX3n9T/us-west-1/ses/aws3_request,SignedHeaders=content-length;content-md5;content-type;host;x-amz-date;x-amz-target,Signature=ZcdHRg2vESlHsgKU8FGDA5yURWG7IgCYjgGij5qQZ9h7ZkGQj16H4gTz4tqQ8Blm" 
    } 
    ["x-aws-body"]=> string(195) "Action=SendEmail&Destination.ToAddresses=john%40aol.com&Message.Body.Text.Data=123&Message.Subject.Data=Please%20activate%20your%20account.&Source=frank%40gmail.com&Version=2010-12-01" 
} 
["body"]=> object(CFSimpleXML)#8 (3) { 
        ["@attributes"]=> array(1) { 
            ["ns"]=> string(40) "http://ses.amazonaws.com/doc/2010-12-01/" 
        } 
        ["Error"]=> object(CFSimpleXML)#6 (3) { 
            ["Type"]=> string(6) "Sender" 
            ["Code"]=> string(14) "MalformedInput" 
            ["Message"]=> string(35) "Unexpected list element termination" 
        } 
        ["RequestId"]=> string(36) "k2vV96mf-6aZc-eZNd-s5dQ852DVc2vRxPvR" 

    } 
    ["status"]=> int(400) } 02 
```

通过这样做
`$amazonSes = new AmazonSES(array( "key" => $AWS_KEY, "secret" => $AWS_SECRET_KEY, 'certificate_authority' => false ));`
**在转储中产生几乎相同的结果**

`curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE);`
会产生此错误

```
Authorization Required

This server could not verify that you are authorized to access the document requested.
Either you supplied the wrong credentials (e.g., bad password), or your browser
doesn't understand how to supply the credentials required. 
```

**固定的：**

```
$response = $amazonSes->send_email(
    $from,
    array('ToAddresses' => array($to)),
    array(
        'Subject.Data' => $subject,
        'Body.Html.Data' => $message,
    )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-25T17:36:10.043

我在 phplist 中找到了这个函数，你使用这个。

```
 function AmazonSESSend($messageheader,$messagebody) {

      $messageheader = preg_replace('/'.$this->LE.'$/','',$messageheader);
      $messageheader .= $this->LE."Subject: ".$this->EncodeHeader($this->Subject).$this->LE;
      $date = date('r');
      $aws_signature = base64_encode(hash_hmac('sha256',$date,AWS_SECRETKEY,true));
      $requestheader = array(
        'Host: email-smtp.us-west-2.amazonaws.com', 
        'Content-Type: application/x-www-form-urlencoded',
        'Date: '. $date,
        'X-Amzn-Authorization: AWS3-HTTPS AWSAccessKeyId='.AWS_ACCESSKEYID.',Algorithm=HMACSHA256,Signature='.$aws_signature,
      );
      $rawmessage = base64_encode($messageheader. $this->LE.$this->LE.$messagebody);
      $requestdata = array(
        'Action' => 'SendRawEmail',
        'Destinations.member.1' => $this->destinationemail,
        'RawMessage.Data' => $rawmessage,
      );
     $header = '';
     foreach ($requestheader as $param) {
        $header .= $param.$this->LE;
      }
      $curl = curl_init();
      curl_setopt($curl, CURLOPT_URL, AWS_POSTURL);
      curl_setopt($curl, CURLOPT_TIMEOUT, 30);
      curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
      curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); 
      curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE);
      curl_setopt($curl, CURLOPT_HTTPHEADER,$requestheader);
      curl_setopt($curl, CURLOPT_HEADER, 1);
      curl_setopt($curl, CURLOPT_DNS_USE_GLOBAL_CACHE, TRUE); 
      curl_setopt($curl, CURLOPT_USERAGENT,NAME." (phpList version ".VERSION.", http://www.phplist.com/)");
      curl_setopt($curl, CURLOPT_POST, 1);        
      $data = '';
      foreach ($requestdata as $param => $value) {
        $data .= $param.'='.urlencode($value).'&';
      }
      $data = substr($data,0,-1); 
      curl_setopt($curl, CURLOPT_POSTFIELDS, $data);            
      $res = curl_exec($curl);
      $status = curl_getinfo($curl,CURLINFO_HTTP_CODE); 
      if ($status != 200) {
        $error = curl_error($curl);
        logEvent('Amazon SES status '.$status.' '.strip_tags($res).' '.$error);
      }
      curl_close($curl);
     print('Got remote admin response '.htmlspecialchars($res).'<br/>'); exit();
      return $status == 200;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:19:07.400

看起来 cURL 无法验证证书是否可信。

您需要将 CA 和任何中间证书安装到 cURL 使用的证书存储库（取决于平台和安装）。

您还可以尝试按照[Serg ikS](https://stackoverflow.com/users/556876/serg-iks)在评论中的建议禁用证书验证。我不确定这如何与 AmazonSES SDK 一起使用，但他们建议的方式听起来像是合适的解决方案。使用通用`curl_*`功能，您`curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);`应该消除错误。

请注意，禁用证书验证是危险的，因为这意味着您容易受到中间人攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T00:51:52.953

您可能想尝试这个课程来帮助您：

[http://www.orderingdisorder.com/aws/ses/](http://www.orderingdisorder.com/aws/ses/)

我发现它非常容易开箱即用，并提供了大多数正常功能。

# jpa - 使用 EclipseLink 的远程客户端的 JPA 延迟加载策略

> ID：10859071
> 
> 赞同：3
> 
> 时间：2012-06-02T01:13:13.657
> 
> 标签：jpa, ejb-3.0, lazy-loading, eclipselink

**1\. 问题**

什么是已知的策略，从客户端延迟加载的解决方案？我正在检查这些东西[http://wiki.eclipse.org/Introduction_to_EclipseLink_Sessions_(ELUG)#Remote_Sessions](http://wiki.eclipse.org/Introduction_to_EclipseLink_Sessions_%28ELUG%29#Remote_Sessions)但不确定这是否是我的问题的解决方案或如何使用它。

**2.用例**

我正在开发一个三层应用程序，其中我的表示层（Eclipse RCP）是网络上的远程客户端：

```
[ Eclipse RCP ] <-----(RMI)-----> [ [EJB 3] [JPA 2] [Mysql] ] 
```

现在，我使用*JPA 实体*作为我的域模型，我也想在我的客户端中使用它。我通过网络从*@Session* bean 获取实体。当我的 JPA 实体具有*LAZY*字段时，就会出现问题。在序列化之后，特别是因为我的 JPA 提供程序（EclipseLink）位于网络的另一端，我需要一个策略来从客户端加载那些 LAZY 字段。

我将有很多实体：可能有 30-40 个。典型的场景是当用户看到一个包含许多`List`字段的SomethingModel列表时，这些字段不需要显示在列表中，只有当她想要更改特定元素时。

**3\. 可能的解决方案**

我想出了一个解决方案，例如：我在客户端为我的 JPA 实体创建代理类。当我需要来自我的域模型的集合字段时，代理类将调用远程 EJB 来填充该字段。

```
class CarModelClient {
  CarModel model;

  public String getColor(){
    model.getColor();
  }

  public List<Wheels> getWheels(){
    CarModelFacadeRemote carFacade = //get my remote ejb
    model.setWheels( carFacade.getWheels( model.getId() ) );
    return model.getWheels();
  }

} 
```

嗯，类似的。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:36:47.347

不要试图太聪明，假装客户端在服务器上，实体管理器总是打开的。考虑客户端的域对象，就像考虑 DTO 或 JSON 对象一样：对象包含来自服务器的一些信息并通过网络进行序列化。

记录从客户端调用的服务方法（外观方法），以指定哪些关联已初始化，哪些不在返回的实体中。例如，如果您在某个“列表”屏幕上并希望查看列表中某个元素的详细视图，请调用另一个服务，该服务再次从数据库加载实体（从而获得新结果），可能还有其他初始化关联以显示有关实体的更多详细信息。

尝试在客户端动态初始化延迟加载的关联是行不通的：它很复杂，效率低下，导致客户端上的图过时且不连贯，没有考虑事务隔离。

# windows-runtime - Windows 8 Metro 中的通配符共享合同

> ID：10859074
> 
> 赞同：2
> 
> 时间：2012-06-02T01:13:44.193
> 
> 标签：windows-runtime

我想知道是否可以在 Windows 8 Metro 中指定通配符共享合同。我想创建一个可以接收 Windows 8 中所有可能的共享请求（用于调试目的）的应用程序，包括来自第三方应用程序的自定义流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:33:17.000

是的，你很容易做到。直到涉及到自定义流/数据。

ShareOperation.Data 包含数据包包含的字符串列表。您可以遍历它们并按照您的意愿处理数据。您只是无法轻松地执行某种 If/Switch 逻辑，因为如果您获得自定义数据，它将不会出现在 StandardDataFormats 中。

[http://msdn.microsoft.com/en-US/library/windows/apps/windows.applicationmodel.datatransfer.datapackageview.availableformats](http://msdn.microsoft.com/en-US/library/windows/apps/windows.applicationmodel.datatransfer.datapackageview.availableformats)

# vbscript - VBS 文件启动 bat.file

> ID：10859076
> 
> 赞同：1
> 
> 时间：2012-06-02T01:13:51.300
> 
> 标签：vbscript

我能够打开我的 gmail 但试图打开下一个 url a。我可以这样做吗？如何？

需要修复一个（ WshShell.Exec "C:\test.bat" ）

```
'Script starts here
Set WshShell = WScript.CreateObject("WScript.Shell")

'Wait 1 second (1000 ms)
WScript.Sleep 1000

'Open IE and go to gmail.com (your IExplore.exe file location may be different)
WshShell.Exec "C:\Program Files\Internet Explorer\IEXPLORE.EXE gmail.com"

'Allow time for IE to finish loading (about 15 secs for slow connections/machines)
WScript.Sleep 10000

'Send the login info in the login box
'login (change username to your login name
WshShell.Sendkeys "xxxxxxxxxx"
WScript.Sleep 500

'hit TAB key to move to password field
WshShell.Sendkeys "{TAB}"
WScript.Sleep 500

'Send the password info
'change your password to your login password
WshShell.Sendkeys "xxxxxxxxxxxxx"
WScript.Sleep 500

'Hit 'Enter' key to log-in
WshShell.Sendkeys "{ENTER}"
WScript.Sleep 10000

WshShell.Exec "C:\test.bat"

'Allow time for IE to finish loading (about 15 secs for slow connections/machines)
WScript.Sleep 15000

'Send the login info in the login box
'login (change username to your login name
WshShell.Sendkeys "xxxxxxxxx"
WScript.Sleep 500

'hit TAB key to move to password field
WshShell.Sendkeys "{TAB}"
WScript.Sleep 500

'Send the password info
'change your password to your login password
WshShell.Sendkeys "xxxxxxxx"
WScript.Sleep 500

'Hit 'Enter' key to log-in
WshShell.Sendkeys "{ENTER}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:27:52.583

**编辑：**这对我有用。

测试.vbs

```
Set WshShell = WScript.CreateObject("WScript.Shell") 
WshShell.Exec "test.bat" 
```

和 test.bat

```
@echo off 
start www.yahoo.com 
```

# javascript - 仅当视频是数组中的最后一个时，视频上的 div 淡入“结束”

> ID：10859078
> 
> 赞同：0
> 
> 时间：2012-06-02T01:14:29.173
> 
> 标签：javascript, jquery, html, binding, html5-video

基本上，这就是问题所说的。当视频结束时，我需要一个 div 来淡入淡入和另一个淡入淡出（或显示，我只是使用淡入淡出），但前提是它是 6 个数组中的最后一个视频。我有

```
$("#myVid").bind("ended", function() {
            if(currentVideo == videos.length) {
                $(".control").fadeOut();
                $("#final").fadeIn();
            } 
```

我试过了

```
$("#myVid").bind("ended", function() {
            if(currentVideo == 6) {
                $(".control").fadeOut();
                $("#final").fadeIn();
            } 
```

所以，我应该做它的工作，但有些东西没有做，但我无法弄清楚......我可以在这里得到一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:20:50.560

在 6 个数组中，最后一项的索引为 5（索引从零开始）。所以如果你`currentVideo`是一个数组索引，你应该`currentVideo == videos.length-1`. 这是我在您的脚本中注意到的唯一明显错误。

# jquery - 内联日期选择器的不显眼验证不起作用，适用于非内联日期选择器

> ID：10859079
> 
> 赞同：5
> 
> 时间：2012-06-02T01:14:54.497
> 
> 标签：jquery, asp.net-mvc, jquery-validate, data-annotations, unobtrusive-validation

我没有使用 jquery.ui 的 datepicker，因为我需要在不同的条件下选择一整周和多个日期，所以我在 EditorTemplate 中为我的 Date 字段使用[Keith Wood 的datepicker：](http://keith-wood.name/datepick.html)

```
 @model Nullable<DateTime>
    @{
        string name = ViewData.TemplateInfo.HtmlFieldPrefix;
        string id = name.Replace(".", "_");
        string dt = Model.HasValue ? String.Format("{0:d}",(string)Model.Value.ToShortDateString()) : string.Empty;
    }        
    @Html.TextBox("", dt, new { @class = "datefield", @type = "date", @id = id })
    <script type="text/javascript">
        $(document).ready(function () {
            $('#@id').datepick({
                renderer: $.datepick.themeRollerRenderer,
                multiSelect: 999
            });
        });    
    </script> 
```

当使用文本框并让日期选择器“弹出”时，验证工作得很好；但我真正想要的是使用内联日期选择器，但我无法在这些条件下进行验证：

```
 @model Nullable<DateTime>
    @{
        string name = ViewData.TemplateInfo.HtmlFieldPrefix;
        string id = name.Replace(".", "_");
        string dt = Model.HasValue ? String.Format("{0:d}",(string)Model.Value.ToShortDateString()) : string.Empty;
    }

    <div class="kwdp">
    </div>
    @Html.Hidden("", dt, new { @class = "datefield", @id = id })
    <script type="text/javascript">
        $(document).ready(function () {
            $('.kwdp').datepick({
                renderer: $.datepick.themeRollerRenderer,
                multiSelect: 999
            });
        });    
    </script> 
```

这是我的自定义客户端验证的一个片段：

```
 form.validate({ 
        rules:{
            StartDate: { 
                required: true, 
                dpDate: true 
            }
        },
        messages: {
            StartDate: 'Please enter a valid date (dd-mm-yyyy)'
        }
    }); 
```

这是我的数据类中 DateTime 字段的定义：

```
 [Required]
    [DataType(DataType.Date)]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd-MM-yyyy}")]
    public Nullable<DateTime> StartDate { get; set; } 
```

我知道我应该为日期选择器添加一个 onSelect 以使用日期填充隐藏字段，但是无论如何，当隐藏字段值为空但它没有验证时，我应该会收到错误消息。html 标记呈现如下：

```
 <input name="StartDate" class="datefield" id="StartDate" type="hidden" data-val-required="The StartDate field is required." data-val="true" data-val-date="The field StartDate must be a date." value=""/> 
```

我正在使用以下库：

```
 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>    
    <script src="@Url.Content("~/Scripts/datepick/jquery.datepick.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/datepick/jquery.datepick.ext.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/datepick/jquery.datepick.validation.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ui.datepicker.validation.min.js")" type="text/javascript"></script> 
```

我发现[了一个类似的未回答的问题](https://stackoverflow.com/questions/7924668/validate-an-inline-jquery-datepicker-using-jquery-validation)，看起来开发人员遇到了同样的问题，但没有发布解决方案。关于我哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T16:55:05.547

杰森是对的。默认情况下，jquery 验证会跳过/忽略不可见的输入元素。这适用于`input type="hidden"`元素，甚至是具有/继承`display:none;`CSS 的文本框。有一个名为 的设置`ignore`，其默认值如下所示：

```
ignore: ':hidden' 
```

您可以使用以下脚本覆盖页面上的此设置：

```
$.validator.setDefaults({
    ignore: ''
}); 
```

这告诉 jquery validate 不要忽略对不可见元素的验证。如果您使用此脚本，jquery 验证应该会自动验证字段，而不需要您在每次更改 datepicker 字段值时手动验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T01:28:44.720

据我了解，在 MVC3 中，隐藏的表单字段没有被客户端验证脚本验证。如果这就是您想要做的，为什么不直接隐藏文本字段呢？

```
@Html.TextBox("", dt, new { @class = "datefield", @type = "date", @id = id, style="display:none;" }) 
```

或者，如果您想将其保留为 @Html.Hidden 字段，则每次更改日期选择器时都必须手动调用表单上的验证插件。

```
 $("form").validate().form(); 
```

# php - AJAX 脚本崩溃浏览器

> ID：10859082
> 
> 赞同：1
> 
> 时间：2012-06-02T01:15:28.220
> 
> 标签：php, ajax, forms, post

我正在尝试使用 AJAX 提交用户注册信息，如下所示：

```
<script>

$("#submit_btn").click(function() {
event.preventDefault();
var supplied_username = $('#desired_username').val();
var password = $('#password').val();
var email_address = $('#email_address').val();

$.post("register", { desired_username: desired_username, password: password, email_address: email_address } ,
function(data){
    $('body').append(data);
});
});
</script> 
```

返回数据只是一串文本（即 Success! 或 Register question....）。我认为脚本必须以某种方式无限循环，但我不确定在哪里或为什么。当我在没有 AJAX 的情况下将正常的 POST 数据传递给后端时，后端工作得很好。这就是为什么我认为这一定是客户端的问题。有什么想法可以在这里发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:17:56.680

将它附加在适当的文本标签（`<p>`或其他任何东西）和`document`, 而不是`body`直接的内部不是更好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:19:30.677

我曾经尝试在客户端运行 AJAX 但没有成功，然后在服务器端尝试了相同的代码并成功。可能是这样吗？

另外，如果我没看错，你传递了错误的变量。您创建 a`supplied_username`并传递 a `desired_username`。这可能不是问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T01:21:23.697

我认为你遗漏了一些东西。我认为下面的代码是您正在寻找的

```
<script>

$("#submit_btn").click(function(event) {
     event.preventDefault();
     var supplied_username = $('#desired_username').val();
     var password = $('#password').val();
     var email_address = $('#email_address').val();

    $.post("register", { desired_username: supplied_username, password: password, email_address: email_address } , function(data){
           $('body').append(data);
    });
});
</script> 
```

# java - OOP Java：创建库存盘点程序

> ID：10859083
> 
> 赞同：1
> 
> 时间：2012-06-02T01:17:44.007
> 
> 标签：java, oop, inventory, stock

我对面向对象编程还很陌生，所以在掌握一些基本概念时仍然有些困难。所以在这里我试图创建一个基本的库存程序来跟踪库存。每只股票都包含几个细节：公司名称、股票评级（AAA、AAa、Aaa 等）、购买价格和股票数量。该程序将要求用户通过命令行提示输入这些详细信息。用户最多只能输入 12 只股票。如果用户两次输入股票，它会打印出一个错误。如果用户输入了两次股票，它也会打印出错误信息。

这是我到目前为止所做的：股票对象

```
 public class Stock {

private String companyName;
private String stockRating;
private int price;
private int numberOfShares;

public String getCompanyName() {
    return companyName;
}

public int getStockRating() {
    return stockRating;
}

public String getPrice() {
    return price;
}

public int getNumberOfShares() {
    return numberOfShares;
}

public Stock(String companyName, String stockRating, int price, int numberOfShares) {
    super();
    this.companyName = companyName;
    this.stockRating = stockRating;
    this.price = price;
    this.numberOfShares = numberOfShares;
} 
```

现在，我正在尝试创建库存计划

```
import java.util.*;

public class StockInvetory {

private static final int INVENTORY_SIZE = 12;
private Stock [] stocks;

public StockInvetory() {
    stocks = new Stock [INVENTORY_SIZE];

}

private static void StockInventory() {
       for (int i = 0; i<INVENTORY_SIZE; i++){
         Scanner console = new Scanner(System.in);

    System.out.println ("Stock's name:");
    String stockName = console.next();

    System.out.println ("Stock's rating");
    String stockRating= console.next();

    System.out.println ("Stock's price:");
    int stockPrice = console.nextInt();

    System.out.println ("Numbers of shares: ");
    int numberShares= console.nextInt();

          stocks [i]= new Stock(stockName, stockRatings, stockPrice, numberShares);
    }

public static void main (String [] args){
    StockInventory();

} 
```

}

所以我的问题如下：

第一个库存对象程序应该没问题，我的问题是库存盘点程序。有了这段代码，private Stock [] 股票，是不是表示股票盘点程序会将信息存储到一个数组中？如果是，我如何将与特定股票、公司名称、价格等相关的所有详细信息存储在一起。我是否必须创建一个多维数组才能跟踪所有细节？就像一行包含有关一只股票的所有详细信息，第二行包含有关另一只股票的详细信息。并且要确定用户是否两次输入了一只股票，我是否使用“equalsIgnoreCase”进行比较？我知道我可能需要为库存创建另一种方法。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T01:20:59.513

> private Stock [] 股票，是不是表示股票盘点程序会将信息存入数组？如果是，我如何将与特定股票、公司名称、价格等相关的所有详细信息存储在一起。

你的数组就像一个`list`股票。但仅仅因为它是一个对象，并不意味着它只包含一个数据。它可以保存字符串、整数和其他用户定义的数据类型。`Stock`因此，您可以在对象内存储与股票相关的数据。

```
public class Stock {

private String companyName;
private String stockRating;
private int price;
private int numberOfShares; 
```

这些都存储在每个 Stock 对象中，并且可以通过您定义的*getter方法访问。*

`int stockdata = stocks[4].getPrice();`

但是，要初始化`Stock`数组，您需要`Stock`为每个区域创建一个新对象，如下所示：

```
for(int i = 0; i < INVENTORY_SIZE; i++) {
    stocks[i] = new Stock(foo, bar, lorem, ipsum);
} 
```

此处使用的变量只是占位符，因此您可以像上面一样通过从控制台读取来创建参数。

[这些面向对象的设计原则应该可以帮助您理解*数据*和*容器*之间的关系。](http://codebetter.com/raymondlewallen/2005/07/19/4-major-principles-of-object-oriented-programming/)

对于问题的第二部分，您可以只看比较其中一个数据值，例如`companyName`，或[实现](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)类似[Comparable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html)的接口。

```
for(Stock s : stocks) {
    if(stockName.equals(s.getCompanyName()) {
       // ERROR!
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T01:27:18.107

读入名称、评级、价格和股数后，您需要调用 Stock 类的构造函数来创建该类的实例并将其分配给 stock[] 数组中的下一项。

像这样：

```
stocks[0] = new Stock( stockName, stockRating, stockPrice, numberShares); 
```

然后，您需要将用于从控制台读取的代码行以及创建新 Stock 对象的行放入循环中，以便您可以读取所有 12 只股票：

```
for( int i = 0; i < INVENTORY_SIZE; i++ )
{
    System.out.println ("Stock's name:");
    String stockName = console.next();

    System.out.println ("Stock's rating");
    String stockRating= console.next();

    System.out.println ("Stock's price:");
    int stockPrice = console.nextInt();

    System.out.println ("Numbers of shares: ");
    int numberShares= console.nextInt();

    stocks[i] = new Stock( stockName, stockRating, stockPrice, numberShares);
} 
```

现在，这并不完美，因为它要求用户总是输入一整套 12 只股票，所以你需要弄清楚如何让用户在完成后退出循环，而你仍然必须添加您想要的错误检查，以确保没有输入重复项，但它应该初始化您的各个对象并将每个对象分配给数组元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T03:06:05.110

如果用户不想输入所有 12 条信息，您可能需要提供某种方法来在特定条件下中断循环。但是，这完全取决于您的要求。在这种情况下，您可能必须使用其他选项，例如 List 或 vector。

每个对象可以有多个变量，例如在您的案例中，评级、价格、名称和份额都绑定到每个对象。因此，当您将对象存储在数组的索引中时，您实际上是将该对象包含的所有这些信息存储在一个地方。所以在这种情况下，您不必创建多维数组。

您可以根据将对象定义为相等的内容覆盖您的 equals 方法，并使用它来确定是否再次提供相同的库存。如果两个对象相同，这将返回 true，否则返回 false。

您可以在此处发布更新的代码并登录，以便获得有关您的异常的建议

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T04:33:33.097

在现实世界的场景中，一些问题浮现在脑海中：

*   price 不应该是整数，因为价格通常是特定货币的金额。检查这个[与钱有关的问题](https://stackoverflow.com/questions/285680/representing-monetary-values-in-java)。
*   使用枚举可以更好地表示股票评级。见[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

# c# - 提高 TIFF 图像的质量

> ID：10859086
> 
> 赞同：0
> 
> 时间：2012-06-02T01:18:15.863
> 
> 标签：c#, jpeg, tiff

我们有大约 600,000 张图像从 JPEG 转换为 TIFF 文件并上传到我们的 FileNet 存储库。这些 TIFF 图像是多页的，由多个 JPEG 拼接而成。

这是几年前完成的。现在我们开始收到用户的投诉，称 TIFF 图像的质量与 JPEG 时不同。

有什么方法可以提高 TIFF 文件的质量？如果我必须重新迁移这些数据，JPEG 可以是多页的吗？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:08:18.950

You can't just add quality to an image, so you can either try improving the appearance of the *current* information or you'll need to re-create the images to get *better* information.

To me, it sounds like the initial creation process is the most likely cause of the quality issue. How you create the image is important.

For example, I had a large number of photos I needed to re-size, so I used irfanview's batch convert and the results were horrible. Perhaps I had the settings wrong, I don't know. I then tried using ImageMagick, and the results were great.
The point being, the conversion process isn't trivial.

If I were you, I'd look at how the images were created, experiment with different settings to determine what gives the best appearance, then re-create your photo gallery.

For photographic material, there's no real reason to use anything other than a jpeg if the target market is the general consumer.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T01:43:56.327

TIFF 和 JPEG 都支持图像的无损和有损存储。你提到有一个先前的转换。转换可能是有损转换，因此您可能无法将数据恢复到以前的状态。

也就是说，如果您拥有原始源图像，您可能能够回到您所在的位置。关于多图像 jpeg，有这样一种格式 *.mpo 但我之前没有看到它使用过，所以你的 Millage 可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T18:45:04.697

您可能将灰度或彩色 Jpeg 转换为 Tiff。最常见的是每像素只有 1 位的 Tiff G4。所以 24 或 8 位被转换为 1 位，你会看到很多图像丢失。有多种方法可以提高图像质量，但我必须先查看图像才能提出一种方法。

# javascript - onclick 事件不起作用

> ID：10859093
> 
> 赞同：2
> 
> 时间：2012-06-02T01:19:35.043
> 
> 标签：javascript, html, onclick

尝试制作一个基于图像的按钮来更改页面上的图像

这是我的代码

```
<script type="text/javascript">

function nextimg()
{
alert("clicked")
document.getElementById("image").src="images/gallery/gallery-2.jpg";
}

</script>
<div class="gallery">
<table>
<tr>
<td><img src="images/lt_arrow_dark.png"/></td>
<td><img id="image" src="images/gallery/gallery-1.jpg"/></td>
<td><img onclick="nextimg()" src="images/rt_arrow_dark.png" height="55" width="24"/></td>
</tr>
</table>
</div> 
```

当我单击图像时没有任何反应。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:26:26.583

```
alert("clicked") ; //missing something 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:34:44.993

我将您的代码逐字复制到我机器上的 HTML 文件中，它会弹出“点击！” Chrome 和 Firefox 中的警报。你确定你没有禁用 JavaScript 或其他东西吗？你使用的是什么浏览器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T01:50:57.300

您需要删除`z-index`CSS 中的 -2 。

```
.gallery {
    background-color:#090909;
    position:relative;
    top:60px;
    width:100%;
} 
```

[现场演示](http://jsfiddle.net/Ep3ze/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T01:55:40.977

将 Javascript 添加到 head 中，将代码的另一部分添加到 body 中，封装在 HTML 中，让它可以在 Chrome 和 IE 上为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T02:14:04.873

```
<script type="text/javascript">
    windown.onload = function() {
       function nextimg() {
          alert("clicked")
          document.getElementById("image").src="images/gallery/gallery-2.jpg";
       }
    }

</script> 
```

# objective-c - Box2d 物理模拟口吃

> ID：10859095
> 
> 赞同：0
> 
> 时间：2012-06-02T01:19:54.863
> 
> 标签：objective-c, optimization, box2d

我有一些代码会导致 box2d 物理模拟在此代码被调用一次后永远口吃。我对它进行了性能测试，OSSpinLockLock 花了很多时间。b2Island::Solve 和其他一些 box2d 函数导致它占用了这么多时间。我不太确定这里发生了什么。与静态物体重叠较少的地图相比，这种效果在静态物体重叠较多的地图上似乎更糟。导致卡顿的代码如下：

```
for (b2Body*b = currentWorld->GetBodyList(); b!=nil; b = b->GetNext()) {

    float distance = 0;
    float strength = 0;
    float force = 0;
    float angle = 0;

    CGPoint curPos = [Helper toPixels:b->GetWorldCenter()];

    distance = ccpDistance(selfPos, curPos);
    if (distance>maxDistance) {
        distance = maxDistance - 0.01;
    }

    //strength = (maxDistance - distance) / maxDistance;
    strength = (distance - maxDistance)/maxDistance;
    force = strength * maxForce;
    angle = atan2f(selfPos.y - curPos.y, selfPos.x - curPos.x);
    //b2Vec2 forceVec = [Helper toMeters:force];

    //CCLOG(@"strength = %f force = %f angle = %f distance = %f",strength,angle,force, distance);
    b->ApplyLinearImpulse(b2Vec2(cosf(angle) * force, sinf(angle) * force), b->GetPosition());
    BodyNode * bn = (BodyNode*)b->GetUserData();
    if ([bn isKindOfClass:[Soldier class]]) {
        ((Soldier*)bn).health-=abs(force*(damage * kRocketDamageFactor)); //used to be 50
    }
    if ([bn isKindOfClass:[BaseAI class]]) {
        ((BaseAI*)bn).health-=abs(force*(damage * kRocketDamageFactor));
    }
    if ([bn isKindOfClass:[BaseLevelObject class]]) {
        if (((BaseLevelObject*)bn).takesDamageFromBullets == YES) {
            ((BaseLevelObject*)bn).health-=abs(force*(damage * kRocketDamageFactor));
        }

    } 
```

我怀疑 ApplyLinearImpulse 部分是导致口吃的原因，因为它是唯一与物理相关的东西。我只是注释掉了整个循环并且口吃从来没有出现过。但是，当我用相同的代码引爆了其他一些炸药时，口吃就来了。重叠的静态 b2body 对象会减慢物理模拟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:01:48.893

这个问题是由代码给所有比最大距离更远的物体轻敲爆炸造成的。我不太确定为什么这会导致物理模拟卡顿，但添加一个 continue 语句代替 distance = maxDistance - 0.01; 解决了这个问题。

# scala - 在多代理系统中强制同步

> ID：10859096
> 
> 赞同：2
> 
> 时间：2012-06-02T01:20:04.323
> 
> 标签：scala, akka, agent

为了同时学习 scala 和 akka，我正在编写一个 Battleship 游戏。我还没有真正开始编写任何代码，我只是在考虑事情会如何工作。

我有船只和玩家舰队的代理，以及诸如“开枪”、“命中”、“未命中”、“所有船只被击毙”之类的消息。我的第一个绊脚石是，当玩家 1 射击时，它会引发一系列事件，而玩家 2 必须等到一切都解决后才能轮到他玩。我怎样才能确定呢？我想也许无论如何我都会发送回复，然后计算发件人收到的答案与发送的消息一样多。也许 Battleship 不是代理的最佳候选应用程序。

这也带来了一个问题，即由于消息尚未处理而没有收到答复，代理没有回复任何内容，或代理死亡之间的区别。但我会保存那个以备后用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:18:52.543

您可能想在这里做很多事情：

*   让第一个参与者收到对其每条消息的回复，然后将*轮到您的*消息发送给第二个参与者

*   向第二个参与者发送消息，指示在给定回合中必须接收多少事件

这些可以通过以下方式实现：

```
import akka.pattern._
(d1 ? m1) zip (d2 ? m2) pipeTo that 
```

在上面的示例中，`d1/2`是目标参与者，`m1/2`是要发送的消息。这些参与者的回复被压缩在一起（到 a 中`Tuple2`）并转发给第二个参与者（`that`在示例中）

第二种机制涉及更多。我用`SyncPoints`. 所以，像这样：

```
case class SyncPoint(id: UUID, participants: ActorRef*)
object SyncPoint {
  def newFor(participants: ActorRef*) = SyncPoint(UUID.createRandomUUID, participants)
} 
```

然后消息的创建者首先向最终观察者发送一个 SyncPoint

```
val sync = SyncPoint.newFor(d1, d2)
that ! sync 
```

现在，最终接收者知道它期待`SyncPoint`每个参与者都收到关于此的消息。

```
d1 ! SyncPart(m1, sync)
d2 ! SyncPart(m2, sync) 
```

在哪里

```
case class SyncPart(msg: Any, sync: SyncPoint) 
```

演员将在他们处理完他们在消息中的部分后继续转发`d1`。`d2``that`

```
case class SyncPartial(sync: SyncPoint, participant: ActorRef) 
```

通过这种方式，`that`它知道它正在等待来自多个参与者的消息，然后可以跟踪这些参与者何时执行了他们的处理。

# php - 为什么 php trim 并没有真正删除所有空格和换行符？

> ID：10859098
> 
> 赞同：13
> 
> 时间：2012-06-02T01:20:35.600
> 
> 标签：php

我正在使用以下代码从文件中获取输入

```
$jap= str_replace("\n","",addslashes(strtolower(trim(fgets($fh), " \t\n\r")))); 
```

我以前在故障排除时也尝试过这些

```
$jap= str_replace("\n","",addslashes(strtolower(trim(fgets($fh)))));
$jap= addslashes(strtolower(trim(fgets($fh), " \t\n\r"))); 
```

如果我回显 $jap 它看起来不错，所以稍后在代码中，没有对 $jap 进行任何其他更改，它被插入到数据库中，但是我注意到一个比较测试检查这个日本人是否已经在数据库中，当我返回 false可以清楚地看到数据库中有一个看似完全相同的 jap 条目。因此，我复制了从 phpmyadmin 或显示 jap 的站点直接插入的 jap 条目，然后粘贴到记事本中，我注意到它像这样粘贴...（这是精确粘贴到下面的引号中）

"

バスにのって、うみへ行きました"

显然我需要，它没有那个空白和中断或任何它。

据我所知，修剪并没有按照它所说的那样做。或者我在这里遗漏了一些东西。如果是这样，那是什么？

更新：关于杰克的回答

preg_replace 没有帮助，但这就是我所做的，我使用 bin2hex() 来确定“不是我想要的部分”的部分是 efbbbf 我通过将 $jap 放入 str replace 并删除我的日语来做到这一点期待找到，剩下的进入 bin2hex。结果是上面的“efbbbf”

```
echo bin2hex(str_replace("どちらがあなたの本ですか","",$jap)); 
```

上面的输出是 efbbbf 但它是什么？我可以做一个 str_replace 以某种方式删除它吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-02T01:48:32.787

该`trim`函数不知道 Unicode 空格。你可以试试这个：

```
preg_replace('/^\p{Z}+|\p{Z}+$/u', '', $str); 
```

摘自：[Trim unicode whitespace in PHP 5.2](https://stackoverflow.com/questions/4166896/trim-unicode-whitespace-in-php-5-2)

否则，您可以执行 a[`bin2hex()`](http://www.php.net/bin2hex)来找出在前面添加了哪些字符。

**更新**

您的文件包含 UTF8 BOM；删除它：

```
$f = fopen("file.txt", "r");
$s = fread($f, 3);
if ($s !== "\xef\xbb\xbf") {
    // bom not found, rewind file
    fseek($f, 0, SEEK_SET);
}
// continue reading here 
```

# objective-c - puffin 浏览器如何在 iOS 中支持 flash？

> ID：10859105
> 
> 赞同：3
> 
> 时间：2012-06-02T01:21:54.413
> 
> 标签：objective-c, ios

我知道 iOS 不支持 flash，任何人都知道，puffin 浏览器是如何支持的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T01:30:57.023

Puffin 网络浏览器使用自己的服务器来解释网页，并以设备可以理解的格式将其发送下来。他们的实施是专有的，因此，除非您可以联系他们的一名员工，否则我认为您不会很快复制它。

# ajax - 如何通过 curl 访问谷歌图表 api？

> ID：10859108
> 
> 赞同：1
> 
> 时间：2012-06-02T01:23:11.010
> 
> 标签：ajax, bash, curl, google-visualization

我想编写一个 bash 脚本来生成基于谷歌图表 api 的图表。
[Google Image Charts API](https://developers.google.com/chart/image/)将来将不可用。

> **重要提示：** Google Chart Tools 的 Image Charts 部分已于 2012 年 4 月 20 日正式弃用。它将根据我们的弃用政策继续工作。

新的 API 基于`ajax`. 如何通过 访问`ajax`基于 API的`curl`？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:17:39.080

最主要的是对 URL 进行单引号；否则，您最终会得到一个格式错误的 URL。

```
% curl -s 'https://chart.googleapis.com/chart?cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World' > chart.png
% open chart.png

# on windows
% start chart.png 
```

# .htaccess - 重定向原始 url 以重写 url (htaccess)

> ID：10859110
> 
> 赞同：-1
> 
> 时间：2012-06-02T01:23:44.197
> 
> 标签：.htaccess, mod-rewrite

如何重定向原始网址以重写网址

原始：domain/index.php?p=50 重写：domain/post/50/

我试着在这里更好地解释

如果

**请求：域/index.php?p=50**

**重定向到：域/post/50/**

**重写为 :domain/index.php?p=50**

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:29:10.803

使用此代码：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^post/([0-9]+)$ index.php?p=$1 [L] 
```

你必须以另一种方式思考：

*   用户将使用 domain/post/50
*   我将把这个 url 改写为 domain/index.php?p=50

# ios - 图片搜索引擎使用

> ID：10859111
> 
> 赞同：0
> 
> 时间：2012-06-02T01:23:45.387
> 
> 标签：ios, image, search, embed

是否可以在应用程序中实例化图像搜索引擎的使用？我有一个想法，将图像搜索引擎与可以用相机拍摄的照片结合起来，然后让应用程序返回有关已识别照片的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T22:17:31.627

Google Goggles、Like.com（原 Riya）现在被 Google 收购，Tineye.com 是一些提供视觉搜索的网站。不确定他们是否提供 API。

如果你想掀起一个，正如你所期望的那样，这不是一件容易的事。AFAIK，没有可用的 OOTB 解决方案：特别是考虑到您拍摄图像和获取相关信息的用例（在贸易术语中称为[RST 不变模板匹配](https://www.google.com/search?aq=0&oq=rst%20invariance&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8&q=rst%20invariance)） - 您需要考虑大量的时间和 $ .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T21:26:19.923

我们为移动应用相机提供图像搜索引擎 - www.iqengines.com。

# iphone - Mootools Request.JSON 在 iPhone 上返回 null

> ID：10859114
> 
> 赞同：2
> 
> 时间：2012-06-02T01:25:13.670
> 
> 标签：iphone, ajax, json, mootools1.2

抱歉，如果这是一个愚蠢的问题，但我到处找，找不到答案。

我正在使用 mootools 1.2.5 Request.JSON 发出 ajax 请求以返回 json 数据。它在所有浏览器中都能正常工作并返回有效的 json 数据（在[http://jsonlint.com](http://jsonlint.com)和[http://jsonformatter.curiousconcept.com](http://jsonformatter.curiousconcept.com)验证），但是当在 iPhone 上尝试相同的脚本并记录响应时，我得到'null ' 出现以下错误 - TypeError: 'null' is not an object。

任何建议都非常感谢。谢谢。

这是请求的简化版本，仅要求限制和限制开始：

```
var jsonRequest = new Request.JSON({
    method: 'get',                
    url: myurl,
    data:{
        'limit': 10,
        'limitstart': 0
    },
    onSuccess: function( response ) {
        if (/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)) {                
            console.log(response); // returns 'null' on iphone - only one tested so far
        }
        //otherwise, returns valid json on all web browsers and continues fine
        readMap( response );
    },
    onRequest: function () {
        $('loading_div').style.display="block";
    },
    onComplete: function(){
        $('loading_div').style.display="none";
    }
}).get(); 
```

这是浏览器中返回的响应片段，但在 iPhone 上仅返回“null”：

```
[{"street_address":"My Street Address","id":"2","short_description":"asdf","city":"Seattle","price":"234.00","formattedprice":"$234.00\/week","totalcount":"1"}] 
```

# mysql - 调试 MySQL 崩溃 - 12k 打开表？

> ID：10859115
> 
> 赞同：1
> 
> 时间：2012-06-02T01:25:15.613
> 
> 标签：mysql

我已经运行网络服务器几年了，但最近它开始起作用了。我发现问题出在 mysql 上，因为查询需要的时间越来越长，重新启动它可以解决问题。然而，昨晚，当服务器停滞不前以至于我什至无法通过 SSH 访问它时，整个事情都在我面前爆炸了。

它是什么：这是一台 CentOS 5 64 位机器，8GB 内存它正在运行什么：LAMP，带有几个低流量网站、一个 minecraft 服务器和一个 teampeak 服务器。大多数网站都在运行 Wordpress。在内存和 CPU 方面，当我意识到 MySQL 请求会花费很长时间时，我未经训练的眼睛看不到任何问题。MySQL 使用开箱即用的配置运行，我从未更改任何内容。

于是我今天开始查看MySQL状态，发现有几个数字是红色的：

*   Innodb_buffer_pool_reads 813
*   Handler_read_rnd 19.1 k
*   Handler_read_rnd_next 6.3 M
*   Created_tmp_disk_tables 1.1 k
*   sort_merge_passes 1
*   已打开的_tables 12.5 k
*   Table_locks_waited 2

不幸的是，当谈到这些数字时，我完全一无所知。我认为唯一奇怪的是打开的桌子。我无法告诉你为什么我会有 12k 张开放的桌子。当我查看列表时，只有85个。这个数字是在启动服务器后的2K。

知道有什么问题吗？我能做些什么来调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:31:12.033

如果问题是如何调试它，我想这是一个答案：

*   尝试重新生成 mysql 表的统计信息（subs. question：什么是volumetry？）
*   改善你的table_cache：如果opened_table的增加很快，特别是你的内存和你说的一样好
*   看看你的硬盘状态：满了？
*   隔离问题：从 sql plus 尝试一些简单的查询

初始点。

问候，祝你好运

# c# - 我可以阻止自定义 Excel 任务窗格被用户关闭、移动或调整大小吗？

> ID：10859116
> 
> 赞同：2
> 
> 时间：2012-06-02T01:25:45.600
> 
> 标签：c#, vsto, excel-addins

我正在使用 VS 2010 为 Excel 加载项创建自定义任务面板。我希望任务窗格始终对用户可见，因此无法关闭、移动或调整大小。

有没有办法在任务窗格的标题栏中禁用这些功能？也许通过禁用右上角的关闭框和向下箭头按钮？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T23:41:25.500

**要停止关闭自定义任务窗格：**

当用户按下关闭按钮时，结果是自定义窗格的 Visible 属性设置为 false。这会触发自定义窗格的 VisibleChanged 事件。在该事件的处理程序中，您可以强制重新打开自定义任务窗格。

```
private static void OnVisibleChanged(object sender, EventArgs e)
{
    var customTaskPane = sender as CustomTaskPane;
    if (customTaskPane != null)
    {
        Dispatcher.CurrentDispatcher.BeginInvoke(new Action(() => { customTaskPane.Visible = true; }));
    }
} 
```

请注意，我使用的是 Dispatcher 的 BeginInvoke 方法。这是因为如果您尝试直接将自定义窗格的 Visible 属性设置为 true，而不使用 Dispatcher，则会引发异常，因为在事件处理程序中不允许这样做。使用 BeginInvoke 方法会导致分配异步执行，从而解决该限制。

**要停止调整自定义任务窗格的大小：**

为此，您需要将 SizeChanged 事件处理程序附加到自定义任务窗格的 UserControl。例如：

```
var sampleHostControl = new WpfHostControl(Globals.AddIn.SamplePaneWpfControl);
_samplePane = this.CustomTaskPanes.Add(sampleHostControl, "Sample");
sampleHostControl.SizeChanged += new EventHandler(OnHostControlSizeChanged); 
```

在事件处理程序中，您可以重置 _samplePane 的高度。

```
private const int PaneHeight = 52;

private void OnHostControlSizeChanged(object sender, EventArgs e)
{
    if (_samplePane != null && _samplePane.Height != PaneHeight)
    {
        System.Windows.Forms.SendKeys.Send("{ESC}");
        _samplePane.Height = PaneHeight;
    }
} 
```

SendKeys.Send 的使用来自[这个](http://social.msdn.microsoft.com/Forums/en/vsto/thread/c8a633b8-f595-407f-a3d8-84ee10ee661e)msdn 论坛帖子。Microsoft 版主指示 SendKeys.Send 停止调整大小操作。if 语句中的高度比较确保我们**只**防止垂直高度变化；如果用户想要水平扩展或缩小 Excel，我们不应该阻止它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T03:10:21.030

您可以指定任务窗格的停靠并锁定它，以便用户无法通过这种方式修改其位置：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
   var taskPaneContainer = new TaskPaneContainer();
   var taskPane = this.CustomTaskPanes.Add(taskPaneContainer, "My Task Pane");
   taskPane.DockPosition = MsoCTPDockPosition.msoCTPDockPositionRight;
   taskPane.DockPositionRestrict = MsoCTPDockPositionRestrict.msoCTPDockPositionRestrictNoChange;
   taskPane.Visible = true;
} 
```

另一方面，据我所知，不可能直接阻止用户使 TaskPane 不可见。您最好的选择可能是在功能区中添加一个按钮以使 TaskPane 再次可见。

# elastic-map-reduce - 如何将 Hadoop Streaming -file 标志传递给 Amazon ElasticMapreduce？

> ID：10859117
> 
> 赞同：0
> 
> 时间：2012-06-02T01:25:52.680
> 
> 标签：elastic-map-reduce, hadoop-streaming

该`-file`标志允许您将可执行文件打包为作业提交的一部分，从而允许您运行 MapReduce，而无需先手动将可执行文件复制到 S3。有没有办法将`-file`标志与亚马逊的 elastic-mapreduce 命令一起使用？如果没有，上传要运行的二进制文件的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:20:29.143

答案是不。我最终将可执行文件与调用 elastic-mapreduce 分开上传。

# ruby-on-rails-3 - ruby on rails 应用教程无法显示微博页面

> ID：10859118
> 
> 赞同：0
> 
> 时间：2012-06-02T01:25:58.650
> 
> 标签：ruby-on-rails-3, model-view-controller, oop, routing, rails-routing

嗨，我正在学习 Rails 教程，但我已经偏离了教程去做一些不同的事情......我遇到了障碍。因此本教程（michael hartl's）创建了一个微博提要，但它并没有为每个微博提供自己的页面。这就是我正在尝试做的事情，但似乎无法让它发挥作用。

所以在我称之为“活动”的提要视图中，我得到了：

```
<li id="<%= activity_item.id %>">
  <%= link_to gravatar_for(activity_item.user, :size => 200), activity_item.user %><br clear="all">
  <span class="title"><%= link_to activity_item.title, @micropost %></span><br clear="all">
  <span class="user">
  Joined by <%= link_to activity_item.user.name, activity_item.user %>
  </span><br clear="all">
  <span class="timestamp">
 <%= time_ago_in_words(activity_item.created_at) %> ago.
 </span>
 <% if current_user?(activity_item.user) %>
 <%= link_to "delete", activity_item, :method => :delete,
                                     :confirm => "Are you sure?",
                                     :title => activity_item.content %>
 <% end %>
</li> 
```

当我点击实际的微博“标题”时，我收到以下错误消息，说我有“没有路线匹配 [GET]”/microposts”。我确信这可能是我缺少的一个简单的修复，但我'我是一个初学者，我已经太久了，我的大脑被炸了。

我基本上需要发生的是，当我从我的活动提要中单击微博的标题时...我需要它转到该微博 ID 的唯一 #show 页面。

以下是我认为相关的模型/控制器。如果我需要发布其他任何内容，请告诉我。我感谢任何和所有的帮助！谢谢！

static_pages_controller（主页是我的活动提要显示的地方

```
class StaticPagesController < ApplicationController

  def home
    if signed_in?
     @micropost = current_user.microposts.build

     @activity_items = current_user.activity.paginate(:page => params[:page])
     @friendactivity_items = current_user.friendactivity.paginate(:page => params[:page])
    end
  end

  def help
  end

  def about
  end

  def contact
  end
end 
```

微博控制器

```
class MicropostsController < ApplicationController
  before_filter :signed_in_user, :only => [:create, :destroy]
  before_filter :correct_user,   :only => :destroy

  def index
  end

  def new
   @micropost = current_user.microposts.build if signed_in?
  end

  def create
    @micropost = current_user.microposts.build(params[:micropost])
   if @micropost.save
    flash[:success] = "Micropost created!"
    redirect_to root_path
   else
    @activity_items = [ ]
    render 'new'
   end
  end

 def show
  @micropost = Micropost.find(params[:id])
  @users = @micropost.users.paginate(:page => params[:page])
 end

 def destroy
  @micropost.destroy
  redirect_to root_path
 end

  private

  def correct_user
    @micropost = current_user.microposts.find_by_id(params[:id])
    redirect_to root_path if @micropost.nil?
  end

end 
```

微柱模型

```
class Micropost < ActiveRecord::Base
  attr_accessible :content, :title
  belongs_to :user

  validates :title, :presence => true, :length => { :maximum => 100 }
  validates :content, :presence => true, :length => { :maximum => 220 }
  validates :user_id, :presence => true

  default_scope :order => 'microposts.created_at DESC'

  # Returns Microposts from the users that the given user follows
  def self.from_users_followed_by(user)
  followed_user_ids = "SELECT followed_id FROM relationships
                     WHERE follower_id = :user_id"
  where("user_id IN (#{followed_user_ids})",
      :user_id => user.id)
 end

end 
```

我现在还按要求添加了 routes.rb 文件和 micropost 模型

路线.rb

```
SampleApp::Application.routes.draw do
 resources :users do
  member do
   get :following, :followers
 end
end

resources :sessions, :only => [:new, :create, :destroy]
resources :microposts, :only  => [:create, :destroy, :show]
resources :relationships, :only => [:create, :destroy]

# home page route
root :to => 'static_pages#home'

# signup route
match '/signup', :to => 'users#new'
match '/signin', :to => 'sessions#new'
match '/signout', :to => 'sessions#destroy', :via => :delete

# static pages routes
match '/help', :to => 'static_pages#help'
match '/about', :to => 'static_pages#about'
match '/contact', :to => 'static_pages#contact'

# create a micropost routes
match '/createamicropost', :to => 'microposts#new' 
```

微博模型按要求...谢谢！

```
class Micropost < ActiveRecord::Base
  attr_accessible :content, :title
  belongs_to :user

  validates :title, :presence => true, :length => { :maximum => 100 }
  validates :content, :presence => true, :length => { :maximum => 220 }
  validates :user_id, :presence => true

  default_scope :order => 'microposts.created_at DESC'

  # Returns Microposts from the users that the given user follows
  def self.from_users_followed_by(user)
    followed_user_ids = "SELECT followed_id FROM relationships
                     WHERE follower_id = :user_id"
    where("user_id IN (#{followed_user_ids})",
          :user_id => user.id)
   end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:57:23.143

您收到路由错误 - 没有路由匹配 [GET] "/microposts。因此，它与代码本身无关。只需像这样声明微帖子的路由。

# 配置/路由.rb

```
resources :microposts 
```

# windows - 将数据从桌面应用程序共享到 Windows 8 Metro 应用程序

> ID：10859119
> 
> 赞同：1
> 
> 时间：2012-06-02T01:26:18.270
> 
> 标签：windows, windows-runtime

我想知道是否有人提出了一种从桌面应用程序共享数据的技术。回到 Developer Preview 中，Microsoft 能够从桌面共享屏幕截图。在 Consumer Preview 中，此功能消失了，在 Release Preview 中也不存在。我认为执行此操作的管道在其中的某个地方，但无法使任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:40:14.303

您可以将桌面应用程序设置为 HTTP 服务器并从 Metro 连接或简单地在 Documents 下的已知文件夹中写入/读取文件。

# java - Java 控制台 [Applet] 上未显示 InvocationTargetException

> ID：10859121
> 
> 赞同：3
> 
> 时间：2012-06-02T01:26:29.347
> 
> 标签：java, applet, jna

我创建了一个小程序以使用[jna 库](http://jna.java.net/)进行打印。当我运行它时，我收到异常 java.lang.reflect.InvocationTargetException。当我查看 Java 控制台时，不会出现异常。

```
Java Plug-in 10.4.1.255
Using JRE version 1.7.0_04-b22 Java HotSpot(TM) Client VM
User home directory = C:\Documents and Settings\Administrator
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
---------------------------------------------------- 
```

我的源代码：

```
import com.sun.jna.Native;
import java.applet.Applet;
class Impressora extends Applet {

    @Override
    public void init() {
        try {
            Mp2032 lib = (Mp2032) Native.loadLibrary("mp2032", Mp2032.class);
            System.out.println(lib.IniciaPorta("COM3"));
            System.out.println(lib.ConfiguraModeloImpressora(5));
            System.out.println(lib.BematechTX("teste\n"));
            System.out.println(lib.BematechTX("teste\n"));
            System.out.println(lib.AcionaGuilhotina(1));
            System.out.println(lib.FechaPorta());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

import com.sun.jna.Library;
import com.sun.jna.win32.StdCallLibrary;

public interface Mp2032 extends StdCallLibrary {
    public int AcionaGuilhotina(int modo);
    public int AjustaLarguraPapel(int largura);
    public int AutenticaDoc(String texto, int tempo);
    public int BematechTX(String texto);
    public int CaracterGrafico(String texto, int lenght);
    public int ComandoTX(String comando, int length);
    public int ConfiguraCodigoBarras(int altura, int largura, int posicao, int fonte, int margem);
    public int ConfiguraModeloImpressora(int modelo);
    public int IniciaPorta(String porta);
    public int FechaPorta();
    public int FormataTX(String texto, int tipoLetra, int italico, int sublinahdo, int expandido, int enfatizado);
} 
```

我的 index.html：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <div>
            <applet width=300 height=300 code="Impressora" ARCHIVE="ImpressoraAssinada.jar"></applet>
        </div>
    </body>
</html> 
```

我的密钥生成：

```
cd C:\path\to\dir\Impressora
keytool -genkey -dname "cn=Impressora, ou=XX, o=XXX, l=city, s=RS c=BR" -alias ImpressoraKey -keystore C:\ImpressoraKey -storepass passwd -validity 7300
jarsigner -keystore C:\ImpressoraKey -storepass passwd -signedjar ImpressoraAssinada.jar Impressora.jar ImpressoraKey
keytool -export -keystore C:\ImpressoraKey -storepass passwd -alias ImpressoraKey -file Impressora.x509 
```

# java - Spring Web 应用程序上的 Hibernate 集成

> ID：10859128
> 
> 赞同：1
> 
> 时间：2012-06-02T01:27:35.187
> 
> 标签：java, spring, hibernate

我一直在 Springsource 网站上关注[本教程](http://static.springsource.org/docs/Spring-MVC-step-by-step/index.html)，以了解 Spring 的基本知识。一切顺利。

现在，我想将 Hibernate 集成到我按照本教程编写的这个小应用程序中。我在不同的网站（包括 hibernate 的网站）上找到了文档，但在开始之前我还有几个问题。

我读了一些关于 JPA 的东西，我可以将它用作 hibernate 之上的抽象层，但我真的不明白它的用途。

另外，我在某处读到有两种使用hibernate的方法，第一种是注解，第二种是使用javax.persistance，对吗？

最近是否有一些关于如何在现有的 Spring Web 应用程序中使用休眠的文档，以及实现它的不同方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:23:42.577

JPA 是一个规范，hibernate 可以被认为是 JPA 规范的一个实现。

您可以使用任一注解映射文件与休眠。

以下教程更好：

[Hibernate 教程 Vaannila](http://www.vaannila.com/hibernate/hibernate-tutorial/hibernate-tutorial.html)

[Hibernate 教程 Mkyong](http://www.mkyong.com/tutorials/hibernate-tutorials/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:36:38.640

JPA 是一种标准，Hibernate 是一种实现，但具有其他/附加功能。

[Spring 参考手册中关于 ORM 集成的部分](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html#orm-hibernate)涵盖了 Hibernate。还有很多教程和演示，比如[这里](http://www.nabeelalimemon.com/blog/2010/05/spring-3-integrated-with-hibernate-part-a/)，但还有很多其他的，以及更新的。

# android - 我永远不想开始的 Android 活动

> ID：10859130
> 
> 赞同：2
> 
> 时间：2012-06-02T01:27:46.843
> 
> 标签：android, android-activity, lifecycle

我有一个以对话为主题的活动。我已经看到如果对话框正在显示，然后我按下主页按钮，然后使用任务管理器，重新启动应用程序，该对话框活动将是应用程序启动的活动，没有其他活动可以返回至。也就是说，当我加载对话框活动时正在运行的活动没有运行。所以我只是让这个以对话框为主题的活动悬停在桌面上。那讲得通。

查看 Android 活动生命周期，操作系统确实会记住最后一个活动并尝试在那里重新启动。所以我在我的活动中创建了所有的 on* 方法（onResume、onRestart 等）。我的发现真的很令人费解。当我从任务管理器重新启动应用程序时，会调用以下方法：

```
onCreate()
onResume()
onStop()
onDestroy() 
```

我真正期待的地方

```
onRestart()
onCreate()
onResume() 
```

*   为什么 onStop 和 onDestroy 会立即被调用？为什么即使调用了 onDestroy，对话框仍然显示？
*   如何配置此应用程序，使其永远不会仅在此对话框上启动？我可以使用相同的“父”活动及其上方的对话框（即，就像我离开它时）重新启动应用程序，或者只运行父活动并且关闭对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:59:02.477

`finish()`在这种情况下，您应该在 Dialog 代码中使用调用。您希望在用户离开您的应用程序时执行此操作（当他们转到主页按钮、接到电话等时可能会发生这种情况......）。在这种情况下，您可能希望在 Dialog 中进行`finish()`调用`onStop()`。完成当前活动的调用将其从堆栈中删除，从而获得您所描述的行为。

# python - 列表中的 Python 深度反转

> ID：10859135
> 
> 赞同：2
> 
> 时间：2012-06-02T01:30:11.033
> 
> 标签：python, list, reverse

我有一个嵌套列表，我需要反转列表中的每个元素。但我不知道该列表是否是列表列表的列表。所以例子是：

```
p = [1, [2, 3, [4, [5, 6]]]]
print deep_reverse(p)
#>>> [[[[6, 5], 4], 3, 2], 1]

q =  [1, [2,3], 4, [5,6]]
print deep_reverse(q)
#>>> [ [6,5], 4, [3, 2], 1] 
```

到目前为止，我所拥有的是：

```
def is_list(p):
    return isinstance(p, list)

def deep_reverse(a):
    a.reverse()
    for i in a:
        if is_list(i):
            i.reverse()
            print a 
```

它适用于第二个测试，即 q 测试，但不适用于第一个测试。我不确定我是否需要使用递归来循环整个事情？如何修改我的代码？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T01:35:39.243

```
def deep_reverse(lst):
    try:
        if len(lst) > 1:
            return list(deep_reverse(item) for item in reversed(lst))
        return lst
    except TypeError:
        return lst 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T01:37:58.287

您的代码不起作用的原因是因为如果`i`是列表列表，则您`deep_reverse`不在`i`.

您只需将一行代码更改为以下内容：

```
def is_list(p):
    return isinstance(p, list)

def deep_reverse(a):
    a.reverse()
    for i in a:
        if is_list(i):
            deep_reverse(i)  # <=== This is what changed
            print a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T06:21:56.283

```
>>> def deep_reverse(L):
        for item in reversed(L):
            if isinstance(item,list):
                yield list(deep_reverse(item))
            else:
                yield item

>>> p = [1, [2, 3, [4, [5, 6]]]]
>>> q =  [1, [2,3], 4, [5,6]]
>>> list(deep_reverse(p))
[[[[6, 5], 4], 3, 2], 1]
>>> list(deep_reverse(q))
[[6, 5], 4, [3, 2], 1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T19:05:51.127

这是我的解决方案

```
def is_list(p):
    return isinstance(p, list)

def deep_reverse(p):

 if p==[]:
    return p

 if not is_list(p[0]):
    return deep_reverse(p[1:])+[p[0]]

 else:
    return deep_reverse(p[1:])+[deep_reverse(p[0])] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T01:48:45.657

```
def deep_reverse(L):
    if L == []:
        return L
    elif type(L) == int:
        return L
    else:
        return deep_reverse(L[1:]) + [deep_reverse(L[0])]

>>> print deep_reverse(p)
[[[[6, 5], 4], 3, 2], 1]

>>> print deep_reverse(q)
[[6, 5], 4, [3, 2], 1] 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T09:12:17.317

```
def is_list(p):
    return isinstance(p, list)

def deep_reverse(p):

 if p==[]:
    return p

 if not is_list(p):
    return p
 else:
    return deep_reverse(p[1:])+[deep_reverse(p[0])] 
```

测试确定。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-03T17:34:59.730

这是一个建议：

```
def deep_reverse(lst):
    if isinstance(lst ,list):
        if sum(1 for x in lst if isinstance(x, list)) == 0:
                        lst = lst[::-1]
                        return lst
        else :
            lst = lst[::-1]
            lst = [deep_reverse(item) for item in lst]     
            return lst
    else:
         return lst 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-02T04:43:43.053

```
def deep_reverse(ls):  
    for i in ls:  
        if type(i)==list:deep_reverse(i)  
    ls.reverse() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-16T17:42:40.627

最优雅：

```
def deep_reverse(L):
    """ assumes L is a list of lists whose elements are ints
    Mutates L such that it reverses its elements and also 
    reverses the order of the int elements in every element of L. 
    It does not return anything.
    """
    # Your code here
    for i in L:
        try:
            deep_reverse(i)
        except:
            pass
    L.reverse() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-17T03:01:08.243

我在这个问题的屁股上上学：

```
def deepReverse(L):
    """Input a list tot output a reversed form of it"""
    if not L:
        return []
    elif isinstance(L[-1], list):
        return [deepReverse(L[-1])] + deepReverse(L[0:-1])

    else:
        return [L[-1]] + deepReverse(L[0:-1]) 
```

# javascript - 以生成事件的元素为目标

> ID：10859136
> 
> 赞同：0
> 
> 时间：2012-06-02T01:30:23.043
> 
> 标签：javascript, jquery, events

我有一个将商品添加到购物车的自定义事件触发器：

```
var order = function (){
   $(document).trigger('customEvent');
    ...........
   ........
}; 
```

我有一个结构，其中列出了商品的价格，当在购物车中添加该商品时，我必须从 dom 获取价格。问题是如果我听customEvent，它将针对文档而不是触发事件的位置。

有没有办法针对该元素？

这些都指向文档而不是元素。

```
event.target || event.srcElement || event.originalTarget || $(event.target) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:34:11.907

您是否尝试过`$(this)`在事件处理程序中使用？AFAIK，它应该指向接收事件的实际元素。

```
$('#myElement').on('customEvent',function(){
  $(this).text('foo')
})
$('#mySecondElement').on('customEvent',function(){
  $(this).text('bar')
})
$(document).trigger('customEvent') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T01:34:53.943

与其在文档元素上触发事件，不如在您的项目上触发它？

```
 $('#itemThatWasAddedId').trigger('customEvent'); 
```

..从评论中编辑..

如果您需要做的只是检索与单击的 div 相关的一些信息，而不是使用附加到您的页面的文档 customEvent 处理程序，您可以只使用简单的 $().click() 事件。

```
$('#itemThatWasAddedId').click(function(){ 
    //retrieve the item price using the inner html, or a selector..
    $(this).html();
}) 
```

# ruby-on-rails - rails 应用程序中 HTML 表中的 checkbox_tag - 使用 AJAX 更新模型

> ID：10859144
> 
> 赞同：0
> 
> 时间：2012-06-02T01:31:50.493
> 
> 标签：ruby-on-rails, ajax, checkbox, html-table

我想让以下复选框和单选按钮调用我的 Listings_controller 中的“更新”方法

我该如何做到这一点？我已经在表格中对元素进行了编码，但我怎样才能让它们发送参数？我想使用 AJAX 从哪里开始？

```
 <%= stylesheet_link_tag 'listings' %>
    <h1>Listing listings</h1>
    <table class="datatable">
    <tr id="heading" >
     <th >id</th>
     <th >name</th>
    </tr>

    <% @listings.each do |listing| %>
      <tr id="body">
    <th><%=listing.id%></th>
        <th><%= link_to listing.name, edit_listing_path(listing) %></th>

    #How can I have the following invoke the update method in AJAX format
     <td><%= radio_button_tag(:keep, "Keep") %>
        <%= label_tag(:keep, "Keep") %></td>
    <td><%= radio_button_tag(:keep, "Delete") %>
        <%= label_tag(:keep, "Delete") %></td>
    <td><%= check_box_tag(:checked) %>
        <%= label_tag(:checked, "checked") %></td>
    <td><%= check_box_tag(:collected) %>
        <%= label_tag(:collected, "collected") %></td>
    <td><%= check_box_tag(:digitized) %>
        <%= label_tag(:digitized, "digitized") %></td>
    <td><%= check_box_tag(:in_database) %>
        <%= label_tag(:in_database, "in database") %></td>
      </tr>
    <% end %>
</table>
<br />
<%= link_to 'New Listing', new_listing_path %> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:00:42.483

您的需求非常模糊，但绝对要使用 jQuery。进入`app/assets/javascripts/listings.js.coffee`并尝试以下。

```
$('input.some_class').bind('update', ->
  $.post('/listings/update', { param1: value, param2: value ... }, (data) ->
    alert('updated!') 
```

或者只是普通的 javascript ( `app/assets/javascripts/listings.js`)

```
$('input.some_class').bind('update', function() {
  $.post('/listings/update', { param1: value, param2: value ... }, function(data) {
    alert('updated!');
  });
}); 
```

*   给你的复选框、单选按钮等一些类名
*   为您要发送的数据填写适当的字段（`updates`列表控制器中的方法接受的数据）
*   为回调添加适当的代码（而不是`alert('updated!')`，您甚至可以什么都不放）

但是同样，您的需求有点模糊，我希望这是一个好的起点。在尝试将 AJAX 合并到您的项目中之前，我将推荐学习 jQuery 和可能的咖啡脚本。你也可以稍微调整一下以使用它`:remote => true`，但这是另一回事。

# ios - 在多个部分中动态添加和删除行

> ID：10859146
> 
> 赞同：2
> 
> 时间：2012-06-02T01:32:11.887
> 
> 标签：ios, ipad, uitableview

我已经搜索和搜索，我似乎无法找到我的问题的答案。我有一个 3 行的动态表格视图（每行是一个部分）和表格视图右上角的一个编辑按钮。每次用户点击编辑时，都必须可以添加或删除一行。除了 + 按钮被粘贴以添加新行时，一切正常。这是我的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{

return 3;
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{

int count = [myarray count];
if (myarray != nil) count ++;
return count;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{     

id cell;
switch(indexPath.section) {
    case 0:
        if(indexPath.row==0) {
            static NSString *cellType1 = @"cellType1";
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellType1];
            return cell;
        }
        break;

    case 1:
        if(indexPath.row==0) {
            static NSString *cellType2= @"cellType2";
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellType2];
            return cell;
        }
        break;

    case 2:
        if(indexPath.row==0) {
            static NSString *cellType3= @"cellType3";
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellType3];
            return cell;
        }
        break;
    default:
        break;
}
return cell;
}

- (IBAction) EditTable:(id)sender
{
if(self.editing)
{
    [super setEditing:NO animated:NO]; 
    [Table setEditing:NO animated:NO];
    [Table reloadData];
    [self.navigationItem.rightBarButtonItem setTitle:@"Edit"];
    [self.navigationItem.rightBarButtonItem setStyle:UIBarButtonItemStylePlain];
}
else
{
    [super setEditing:YES animated:YES]; 
    [Table setEditing:YES animated:YES];
    [Table reloadData];
    [self.navigationItem.rightBarButtonItem setTitle:@"Ok"];
    [self.navigationItem.rightBarButtonItem setStyle:UIBarButtonItemStyleDone];
}
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)aTableView         editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
{

if (self.editing == NO || !indexPath) return UITableViewCellEditingStyleNone;

if (self.editing && indexPath.row == ([myarray count])) 
{
    return UITableViewCellEditingStyleInsert;
} else 
{
    return UITableViewCellEditingStyleDelete;
}
return UITableViewCellEditingStyleNone;
}

- (void)tableView:(UITableView *)TableView commitEditingStyle:    (UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath 
{

if (editingStyle == UITableViewCellEditingStyleDelete) 
{
    [myarray removeObjectAtIndex:indexPath.row];
    [Table reloadData];
} else if (editingStyle == UITableViewCellEditingStyleInsert)
{
    switch(indexPath.section) {
        case 0:

             if(indexPath.row==0) {
                static NSString *cellType1 = @"cellType1";
                UITableViewCell *cell = [TableView dequeueReusableCellWithIdentifier:cellType1];
                [arry insertObject:cell atIndex:[myarray count]];
                [Table reloadData];

            }
            break;

        case 1:
            if(indexPath.row==0) {
                static NSString *cellType2= @"cellType2";
                UITableViewCell *cell = [TableView dequeueReusableCellWithIdentifier:cellType2];
                [arry insertObject:cell atIndex:[myarray count]];

            }
            break;

        case 2:
            if(indexPath.row==0) {
                static NSString *cellType3= @"cellType3";
                UITableViewCell *cell = [TableView dequeueReusableCellWithIdentifier:cellType3];
                [arry insertObject:cell atIndex:[myarray count]];

            }
            break;

        default:
            break;
    }

 } 
```

正如我之前所说，一切正常，直到我按下 + 按钮（按下编辑按钮时显示在左侧）添加新行。然后它显示一个错误：'UITableView 数据源必须从 tableView:cellForRowAtIndexPath 返回一个单元格。

我究竟做错了什么？非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:50:01.550

首先，你从来没有真正`+alloc`或`-init`一个单元格，所以`-cellForRowAtIndexPath:`很可能返回 nil （`-dequeueReusableCellWithIdentifier:`不会削减它）。

其次，比较`indexPath.row`永远`[myarray count]`不会是真的，因为数组和表可能是从零开始的，但它们的计数不是*。*

# node.js - Node.js YouTube API 上传无法转换视频

> ID：10859148
> 
> 赞同：1
> 
> 时间：2012-06-02T01:32:39.240
> 
> 标签：node.js, file-upload, youtube-api

我正在尝试以编程方式将视频上传到 youtube。我选择使用 Node.js 来完成这项任务。

我收到一个 XML 响应以及 201 的 HTTP 状态代码，我看到视频出现在视频管理器中，但是视频总是显示“失败（无法转换视频文件）”消息。

我可以通过 YouTube 自己的上传器在他们的页面上上传文件，没有问题。我只需上传到单个帐户，因此我为该帐户设置了 OAuth2 并存储了刷新令牌。刷新令牌是硬编码的，尽管我用下面的变量替换它。

刷新令牌本身是否需要刷新？

我的代码：

```
var qs = require('querystring'),
https = require('https'),
fs = require('fs');

var p_data = qs.stringify({
client_id: myClientID,
client_secret: myClientSecret,
refresh_token: refreshTokenForAccount,
grant_type: 'refresh_token'
});

var p_options = {
host: 'accounts.google.com',
port: '443',
method: 'POST',
path: '/o/oauth2/token',
headers: {
    'Content-Type': 'application/x-www-form-urlencoded',
    'Content-Length': p_data.length,
    'X-GData-Key': myDeveloperKey
}
};

var file_path = process.argv[1] || "video.mp4";

var json = "";

var p_req = https.request(p_options, function(resp){
resp.setEncoding( 'utf8' );
resp.on('data', function( chunk ){
    json += chunk;
});
resp.on("end", function(){
    debugger;
    var access_token = JSON.parse(json).access_token;
    var title="test upload1",
        description="Second attempt at an API video upload",
        keywords="",
        category="Comedy";
    var file_reader = fs.createReadStream(file_path, {encoding: 'binary'});
    var file_contents = '';
    file_reader.on('data', function(data)
    {
        file_contents += data;
    });
    file_reader.on('end', function()
    {
        var xml =
            '<?xml version="1.0"?>' +
            '<entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007">' +
            '   <media:group>' + 
            '       <media:title type="plain">' + title + '</media:title>' +
            '       <media:description type="plain">' + description + '</media:description>' +
            '       <media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">' + category + '</media:category>' +
            '       <media:keywords>' + keywords + '</media:keywords>' + 
            '   </media:group>' + 
            '</entry>';

        var boundary = Math.random();
        var post_data = [];
        var part = '';

        part = "--" + boundary + "\r\nContent-Type: application/atom+xml; charset=UTF-8\r\n\r\n" + xml + "\r\n";
        post_data.push(new Buffer(part, "utf8"));

        part = "--" + boundary + "\r\nContent-Type: video/mp4\r\nContent-Transfer-Encoding: binary\r\n\r\n";
        post_data.push(new Buffer(part, 'utf8'));
        post_data.push(new Buffer(file_contents, 'binary'));
        post_data.push(new Buffer("\r\n--" + boundary + "--\r\n\r\n", 'utf8'));

        var post_length = 0;
        for(var i = 0; i < post_data.length; i++)
        {
            post_length += post_data[i].length;
        }
        var options = {
          host: 'uploads.gdata.youtube.com',
          port: 443,
          path: '/feeds/api/users/default/uploads',
          method: 'POST',
          headers: {
            'Authorization': 'Bearer ' + access_token,
            'X-GData-Key': myDeveloperKey,
            'Slug': 'video.mp4',
            'Content-Type': 'multipart/related; boundary="' + boundary + '"',
            'Content-Length': post_length,
            'Connection': 'close'
          }
        }

        var req = https.request(options, function(res)
        {
            res.setEncoding('utf8');
            console.dir(res.statusCode);
            console.dir(res.headers);

            var response = '';
            res.on('data', function(chunk)
            {
                response += chunk;
            });
            res.on('end', function()
            {
                console.log( "We got response: " );
                console.log(response);

            });
        });

        for (var i = 0; i < post_data.length; i++)
        {
            req.write(post_data[i]);
        }

        req.on('error', function(e) {
          console.error(e);
        });

        req.end();
    });
});
});

p_req.write(p_data);
p_req.end(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:48:01.060

问题出在正在上传的文件中。这行：`var file_path = process.argv[1] || "video.mp4";`应该是`var file_path = process.argv[2] || "video.mp4";`

注意 argv[ ***1*** ] 是正在运行的脚本的绝对路径，argv[ ***2*** ] 是传递给脚本的第一个命令行参数。

当然，YouTube 无法转换“视频”，它根本不是视频，而是正在运行的脚本。

# windows - 警告**：找不到像素图文件

> ID：10859149
> 
> 赞同：0
> 
> 时间：2012-06-02T01:33:24.123
> 
> 标签：windows, gtk, windows-vista, glade

使用 Windows Vista。我用 Glade 编写了粗略的界面，所以我从那个来源开始工作。GTK 2.0。当我编译并运行时，出现上述错误。有没有办法获得绝对路径图像？如果不是，我怎么能找到它？我尝试使用绝对路径添加_pixmap_directory，但没有成功。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:49:27.350

原来问题是Msys。我交换并开始使用 MinGW。MSys 没有写出输出文件，所以我一直收到相同的错误，因为文件没有被覆盖。现在一切都很好。

# entity-framework-4.1 - 如何在给定此接口的情况下模拟 EF Code First 存储库？

> ID：10859152
> 
> 赞同：0
> 
> 时间：2012-06-02T01:34:17.717
> 
> 标签：entity-framework-4.1, mocking, repository, moq, code-first

我正在做一个工作项目，我的部分目标是学习和应用试驾开发方法。

我正在设计一个使用 EF 代码优先存储库的业务类，但我想创建一个存储库的模拟，而不是实际访问数据库。

鉴于以下存储库接口，我如何使用 MOQ 之类的模拟框架来完成此操作？挑战是我如何最小化允许您包含其他实体的 Find 方法？

```
public interface IRepository<T> where T : EntityBase, new()
    {
        ICollection<T> Find(Expression<Func<T, bool>> predicate, params Expression<Func<T, object>>[] fetchSelectors);
        ICollection<T> Find(Expression<Func<T, bool>> predicate, int pageNumber, int size, Expression<Func<T, object>> orderBy, string sortOrder, out int count, params Expression<Func<T, object>>[] fetchSelectors);
        ICollection<T> FindAll(params Expression<Func<T, object>>[] fetchSelectors);
        ICollection<T> FindAll(int pageNumber, int size, Expression<Func<T, object>> orderBy, string sortOrder, out int count, params Expression<Func<T, object>>[] fetchSelectors);
        void Save(T entity);
        void Delete(T entity);
        T Create();
    } 
```

这是我的通用存储库的实现：

```
public class GenericRepository<T> : IRepository<T> where T : EntityBase, new()
    {
        public GenericRepository(IDbContext context)
        {
            Guard.ArgumentNotNull(context, "context");
            this.Context = context;
            this.DbSet = this.Context.CreateDbSet<T>();
        }

        protected IDbContext Context
        {
            get;
            set;
        }

        protected System.Data.Entity.IDbSet<T> DbSet
        {
            get;
            set;
        }

        public virtual ICollection<T> Find(Expression<Func<T, bool>> predicate, params Expression<Func<T, object>>[] fetchSelectors)
        {
            return this.BuildQuery(predicate, fetchSelectors).ToList();
        }

        public virtual ICollection<T> FindAll(params Expression<Func<T, object>>[] fetchSelectors)
        {
            return this.BuildQuery(p => true, fetchSelectors).ToList();
        }

        public virtual void Save(T entity)
        {
            Guard.ArgumentNotNull(entity, "entity");
            this.Context.SaveOrUpdate(entity);
        }

        public virtual void Delete(T entity)
        {
            Guard.ArgumentNotNull(entity, "entity");
            this.DbSet.Remove(entity);
        }

        public T Create()
        {
            return this.DbSet.Create();
        }

        private IQueryable<T> BuildQuery(Expression <Func<T, bool>> predicate, params Expression<Func<T, object>>[] fetchSelectors)
        {
            var query = this.DbSet as IQueryable<T>;
            if (fetchSelectors != null)
            {
                foreach (var fetchSelector in fetchSelectors)
                {
                    query = query.Include(fetchSelector);
                }
            }
            return query.Where(predicate);
        }

        public ICollection<T> Find(Expression<Func<T, bool>> predicate, int pageNumber, int size, Expression<Func<T, object>> orderBy, string sortOrder, out int count, params Expression<Func<T, object>>[] fetchSelectors)
        {
            count = (this.DbSet as IQueryable<T>).Count(predicate);

            if (size < 1 || size > count)
            {
                throw new ArgumentOutOfRangeException("size");
            }

            var maxPageNumber = (count + size - 1) / size;
            if (pageNumber < 1 || pageNumber > maxPageNumber)
            {
                throw new ArgumentOutOfRangeException("pageNumber");
            }
            if (sortOrder != "asc" && sortOrder != "desc")
            {
                throw new ArgumentException("sortOrder");
            }
            var skipCount = (pageNumber - 1) * size;
            var query = BuildQuery(predicate, fetchSelectors);
            query = sortOrder == "asc" ? query.OrderBy(orderBy) : query.OrderByDescending(orderBy);
            return query.Skip(skipCount).Take(size).ToList();
        }

        public ICollection<T> FindAll(int pageNumber, int size, Expression<Func<T, object>> orderBy, string sortOrder, out int count, params Expression<Func<T, object>>[] fetchSelectors)
        {
            return Find(p => true, pageNumber, size, orderBy, sortOrder, out count, fetchSelectors);
        }
    } 
```

最后，这里是 IDbContext

```
public interface IDbContext
    {
        void SaveOrUpdate<T>(T entity) where T : EntityBase;
        IDbSet<TEntity> CreateDbSet<TEntity>() where TEntity: EntityBase;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:06:10.010

因此，假设您有一个业务逻辑类，它依赖于`IRepository<T>`：

```
public class FooBusinessLogicClass
{
    readonly IRepository<Foo> repository;

    public FooBusinessLogicClass( IRepository<Foo> repository )
    {
        this.repository = repository;
    }

    public ICollection<Foo> FindFoo()
    {
        ...
        var collection = repository.Find( x => x.SomeLambdaExpression(), y => y.SomeOtherExpression() );
        ...

        return collection;
    }
} 
```

如果您只是希望您的存储库在调用它时返回一些假数据并且您不关心传递给它的参数，您可以使用 Moq 函数`It.IsAny<T>()`：

```
 public void Verify()
    {
        //Arrange
        var repositoryMock = new Mock<IRepository<Foo>>();
        var example = new FooBusinessLogicClass( repositoryMock.Object );

        //Our fake data for the repository to return
        var expectedResult = new[] { new Foo(), new Foo() };

        //Our setup that ignores the lambda expressions
        repositoryMock.Setup( mock => mock.Find(
                    It.IsAny<Expression<Func<Foo, bool>>>(),
                    It.IsAny<Expression<Func<Foo, object>>[]>() ) )
                .Returns( expectedResult );

        //Act
        var actualResult = example.FindFoo();

        //Assert
        Assert.AreEqual( expectedResult, actualResult );
    }
} 
```

如果您*确实*关心参数是什么（假设您想验证是否`Find`已调用），则只需将 lambda 表达式包含在您的`Verify()`:

```
 //Assert
        repositoryMock.Verify( mock => mock.Find( 
                x => x.SomeLambdaExpression(), 
                y => y.SomeOtherExpression() ) ); 
```

无论如何，实现`GenericRepository<T>`和接口的细节`IDBContext`与我们业务逻辑类的测试无关。现在，您可能想针对您的实现编写单元测试`GenericRepository<T>`（使用 的模拟`IDBContext`），但这是单独的问题。

# php - 使用 PHP 创建 XML 文件

> ID：10859157
> 
> 赞同：1
> 
> 时间：2012-06-02T01:35:11.420
> 
> 标签：php, xml

> **可能重复：**
> [XML 格式无法正常工作](https://stackoverflow.com/questions/10859050/xml-formatting-is-not-working-well)

我正在尝试从数据库创建一个 XML 文件。数据库包含姓名、电话号码和性别。我想在格式良好的 XML 文件中获取所有用户的详细信息。但我现在得到：

```
<CUSTOMERS>
    <name>AAA</name>
    <name>BBB</name>
</CUSTOMERS> 
```

这是我的代码：

```
$xmlstr = "<?xml version='1.0' ?>\n"."<CUSTOMERS></CUSTOMERS>";
$xml = new SimpleXMLElement($xmlstr);
while($b=$result->fetch_assoc()){

$xml->addChild("name", $b['name']);

}
return $xml->asXML(); 
```

我想得到如下所示的输出

```
<CUSTOMERS>
<AAAA>
<name>AAA</name>
<phone>111</phone>
<sex>male</sex>
</AAA>
<BBBB>
<name>BBB</name>
<phone>222</phone>
<sex>female</sex>
</AAA>
</CUSTOMERS> 
```

* * *

最新代码

```
 $xmlstr = "<?xml version='1.0' ?>\n"."<CUSTOMERS></CUSTOMERS>";
        $xml = new SimpleXMLElement($xmlstr);

        while($b=$result->fetch_assoc()){

            $customer = $xml->addChild("customer");
            $customer->addChild("name", $b['name']);
            $customer->addChild("phone", $b['phone']);
            $customer->addChild("sex", $b['sex']);
            //$xml->addChild("place", $b['place']);
        }
        return $xml->asXML(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:40:56.500

每个客户都应该在自己的标签中：

```
$d = simplexml_load_string('<?xml version="1.0" encoding="utf-8" ?><customers />');

$customer = $d->addChild('customer');
$customer->addChild('name', 'Jack');
// $customer->addChild('phone', '911');
// etc.
$customer = $d->addChild('customer');
$customer->addChild('name', 'John');

echo $d->asXML();

<?xml version="1.0" encoding="utf-8"?>
<customers>
  <customer><name>Jack</name></customer>
  <customer><name>John</name></customer>
</customers> 
```

请注意，标签名称不应是您客户的名称，而应是对内部信息的描述；因此我使用了`customer`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:41:19.790

你应该可以这样做：

```
$xml = new SimpleXMLElement("<customers></customers>");
while($b=$result->fetch_assoc()){
    $customer = $xml->addChild("customer");
    $customer->addChild("name", $b['name']);
    $customer->addChild("phone", $b['phone']);
    $customer->addChild("sex", $b['sex']);
} 
```

输出：

```
<customers>
    <customer>
        <name>AAA</name>
        <phone>1234567</phone>
        <sex>f</sex>
    </customer>
</customers> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T01:39:01.807

您是在告诉 PHP 添加`<name>`孩子，但仅此而已。

```
$xml->addChild("name", $b['name']); 
```

在那个 while 循环中，您需要添加`<AAA>`元素，然后添加 child `<name>`、`<phone>`和`<sex>`（等等）元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T01:43:08.567

问题是改变这个

```
$xmlstr = "<?xml version='1.0' ?>\n"."<CUSTOMERS></CUSTOMERS>"; 
```

对此

```
$xmlstr = = '<' . '?xml version='1.0' ?>\n"."<CUSTOMERS></CUSTOMERS>'; 
```

随着`<?`解析器的混乱。

此外，XML 不喜欢大写字母，需要一个根 - 即您的客户之间的一些东西。

# sql - SQL Server：根据类型仅包括一定百分比的行

> ID：10859158
> 
> 赞同：1
> 
> 时间：2012-06-02T01:35:19.107
> 
> 标签：sql, sql-server, limit, percentage

我有一个输入的问题表：`Select One`, `True False`，`Select All` 我正在尝试编写一个查询，该查询将返回一定数量的问题，同时将其中一种类型限制为返回的类型的特定百分比。

例子：

```
SELECT QuestionID, QuestionText, QuestionType
FROM Question
WHERE/HAVING --limit QuestionTypeID = 4 to be only 10% of total returned 
```

我最初的想法是单独提取查询

```
SELECT TOP 10 PERCENT QuestionID, QuestionText, QuestionType
FROM Question
WHERE QuestionTypeID <> 4
UNION ALL
SELECT QuestionID, QuestionText, QuestionType
FROM Question
WHERE QuestionTypeID = 4 
```

然而，似乎有一种更有效的计算方法。

* * *

**编辑：**

让我澄清一下我要完成的工作......我需要返回 90% 的其他类型问题的混合体，而只有 10% 的类型 4。

我需要将结果随机化，所以我一直在使用`SET ROWCOUNT`和`ORDER BY NEWID()`

我可以使用子查询，但不确定在`SET ROWCOUNT`子查询中使用的方式...此时似乎需要临时表，但如果有更好的方法请告诉我...

到目前为止我所拥有的......*带有临时表*

```
DECLARE @ReturnPercent [int] --variable that holds percentage for bottom questions
DECLARE @ReturnCount [int] --variable that holds how many questions I'd like returned

CREATE TABLE #Temp1(
        QuestionID [int], 
        QuestionText [nvarchar](256), 
        QuestionTypeID [int]
);

DECLARE @TOP [int] = @ReturnCount-CAST(@ReturnCount*@ReturnPercent AS INT);
DECLARE @BOTTOM [int] = CAST(@ReturnCount(@ReturnPercent AS INT);

SET ROWCOUNT @TOP
INSERT INTO #Temp1(QuestionID, QuestionText, QuestionTypeID)
SELECT QuestionID, QuestionText, QuestionTypeID
FROM Question
WHERE QuestionTypeID <> 4
ORDER BY NEWID()
SET ROWCOUNT 0

SET ROWCOUNT @BOTTOM
INSERT INTO #Temp1(QuestionID, QuestionText, QuestionTypeID)
SELECT QuestionID, QuestionText, QuestionTypeID
FROM Question
WHERE QuestionTypeID = 4
ORDER BY NEWID()
SET ROWCOUNT 0

--Query to join them with other data(omitted) 
SET ROWCOUNT @ReturnCount
SELECT a.QuestionID, a.QuestionText, a.QuestionTypeID
FROM #Temp1 a
JOIN --OTHER TABLES FOR FULL QUERY
ORDER BY NEWID()
SET ROWCOUNT 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:51:34.460

union all 很可能是最有效的方法。

有一种为所有行分配行号的有效方法：

```
SELECT row_number() over (order by (select NULL)) as seqnum 
```

但是，如果您添加分区子句，我认为这不是有效的。如果这是有效的，并且如果您有关于问题 id 的索引，则可以使用：

```
select q.QuestionID, q.QuestionText, q.QuestionType
from (select QuestionID, QuestionText, QuestionType,
             row_number() over (partition by QuestionId order by (select NULL)) as seqnum
      from Question
     ) q join
     (select QuestionId, count(*) as cnt
      From Question
      group by Questionid
     ) qsum
     q.questionid = qsum.questionid
where questionid <> 4 or seqnum*1.0/cnt <= 0.1 
```

（这个想法是 group by 将由索引满足，连接将非常便宜，并且 row_number() 有效。）

但是，我认为，工会都可能更快。

嗯，现在我想起来了，你可以用一个近似值走得很远：

```
select q.QuestionID, q.QuestionText, q.QuestionType
from (select QuestionID, QuestionText, QuestionType,
             row_number() over (order by (select NULL)) as seqnum
      from Question
     ) q
where mod(seqnum, 10) <> 0 and questionid <> 4 or
      mod(seqnum, 10) = 0 and questionid = 4 
```

这占用了 questionid <> 4 的大约 90% 的行和 questionid = 4 的大约 10% 的行。这应该非常有效，因为这个短语中的 row_number() 分配了一个没有排序或分区的序列号。

# jquery - 将多维 ajax JSON 正确组装成全局数组

> ID：10859160
> 
> 赞同：0
> 
> 时间：2012-06-02T01:35:45.480
> 
> 标签：jquery, ajax, json, multidimensional-array

当使用搜索客户信息时，我有两个 jQuery AJAX 请求。我可以通过 .autocomplete 获取客户名称，也可以从 addressSearch.php 获取 JSON 数据，但是当我无法从第二个 JSON 集中获取所需的值时。

用户应该简单地从下拉列表中选择地址，我应该填写表格。

当我`console.log(address)`没有得到正确的多维数组时。

如何选择正确的子数组将数据发送到表单域？

**HTML**

```
<label>Customer Search:</label><input id="cSearch" type="text" /><br />
<label>Name:</label><input id="name" /><br />
<select id="addresses">
  <option>Please Select Address</option>
</select>
<label>Street:</label><input id="street" type="text" /><br />
<label>City:</label><input id="city" type="text" /><br />
<label>State:</label><input id="state" type="text" /><br />
<label>Zip:</label><input id="zip" type="text" /><br /> 
```

**JavaScript**

```
$(document).ready(function() {
    $("input#customerSearch").autocomplete({
        source:'inc/customerSearch.php',
        select: function(event, ui) {
                $('#name').val(ui.item.name);
                getAddresses(ui.item.addressid);
            },
            minLength:2
        });
    });
    var address = [];
    function getAddresses(id){
        $.getJSON(
            'inc/addressSearch.php',
            { id: id },
            function(data)  {
                $('#addresses').children().remove().end().append('<option>Please Select Address</option>');
                $.each(data, function(x, val) {
                    $('#addresses').append('<option value="' + val['addressid'] + '">'+ val['street1'] +'</option>');
                    address[x] = [];
                    $.each(val, function(key, value) {
                        address[x][key] = value;
                    });
                });
            }
        );
    $('select#addresses').change(function() {
        var j = $(this).val();
        //fill in fields when select 
    });
} 
```

**地址搜索.php**

```
$id = explode(',', $id);//explode address ids
$data = array();//data array
foreach($id as $id) {//evaluate each address
    $query = "SELECT * FROM `address` WHERE address_id = '". $id ."'";//query
    $result = mysql_query($query);//run query
    if (mysql_num_rows($result)) {//results exist
        while($row = mysql_fetch_assoc($result)) {//loop
            $data[$id] = array(//build array
                'addressid' => $row['address_id'],
                'street1' => $row['address_street1'],
                'street2' => $row['address_street2'],
                'city' => $row['address_city'],
                'region' => $row['address_region'],
                'country' => $row['address_country'],
                'code' => $row['address_code']
            );
        }
    }
}
print json_encode($data);// jQuery wants JSON data 
```

**JSON**

```
{
    "101":{
        "addressid":"101",
        "street1":"123 ABC St",
        "street2":"",
        "city":"Somewhere",
        "region":"AB",
        "country":"USA",
        "code":"12345"
    },
    "102":{
        "addressid":"102",
        "street1":"123 10th St",
        "street2":"Apt 101",
        "city":"Nowhere",
        "region":"AB",
        "country":"USA",
        "code":"12345"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:24:06.723

我只好走开再看一遍。上面的代码没有任何问题，只是第二部分不起作用。

这是最终的功能

**JavaScript**

```
$('select#addresses').change(function() {
        var j = $(this).val();
        $('#street1').val(address[j]['street1']);
    $('#street2').val(address[j]['street2']);
    $('#city').val(address[j]['city']);
    $('#code').val(address[j]['code']);

    }); 
```

# c# - JavaScriptSerializer：有什么方法可以发送未转义的数据？

> ID：10859169
> 
> 赞同：1
> 
> 时间：2012-06-02T01:38:06.340
> 
> 标签：c#, json, serialization, asmx, javascriptserializer

我写了一个`.ToJson()`这样的扩展方法：

```
public static string ToJson(this object obj)
{
    JavaScriptSerializer serializer = new JavaScriptSerializer();
    return serializer.Serialize(obj);
} 
```

这让我可以做一些事情，比如让一个 JSON 字符串通过我的Web 服务`myObject.ToJson()`发送回我的应用程序。`.asmx`这一切都很好。

出现了一个问题，我正在构建一个需要将大量异步数据传输到该页面的页面，并且我开始达到超过 100k 的数据有效负载。在查看 JSON 时，我注意到它对我发回的任何内容进行编码，这增加了很多额外的字符。由于此应用程序是面向极少数受众的管理工具，因此我并不十分担心这种安全性，但我似乎无法在[这里](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)找到如何控制编码。

这是我收到的（示例）：

```
{"d":"[{\"OrderId\":1308,\"Approved\":true,
\"Status\":\"\\u003cimg class=\\\"statusicon\\\" src=\\\"/images/ ... 
```

当我应该得到类似的东西时：

```
{"d": [{"OrderId":1308,"Approved":true,"Status":"<img class=\"statusicon\"
src=\"/images/ ... 
```

**有什么方法可以控制 JSON 数据是否被转义？**

需要注意的一件事是，我被迫在我的文件中使用它`.ajaxSetup()`来解析返回的数据：

```
dataFilter: function (data) {
    if (data) {
        var msg;
        if (typeof (JSON) !== 'undefined' && typeof (JSON.parse) === 'function') {
            msg = JSON.parse(data);
        } else {
            msg = eval('(' + data + ')');
        }
        if (msg.hasOwnProperty('d')) {
            return msg.d;
        } else {
            return msg;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T22:33:23.213

我有这个问题。json 库不返回转义文本。我相信 javascript 本身将其解释为已转义。

```
<script type="text/javascript">
     $(document).ready(function () {
          var columnNumber = 1;
          var databaseTypes = <%= Html.Raw(ViewBag.DatabaseTypes) %>; 
```

看看 Viewbag 区域。这是在 asp.net mvc 视图中注入文本的方法。

# visual-studio-2012 - 如何在 Visual Studio 中禁用所有大写菜单标题

> ID：10859173
> 
> 赞同：585
> 
> 时间：2012-06-02T01:39:00.993
> 
> 标签：visual-studio-2012, visual-studio-2013

我认为标题是不言自明的。只是想改变 Visual Studio 2012 的外观，不要以所有大写字母显示菜单标题。

* * *

## 回答 #1

> 赞同：621
> 
> 时间：2012-06-02T03:26:13.440

[Richard Banks 发布](http://www.richard-banks.org/2012/06/how-to-prevent-visual-studio-2012-all.html)了一个注册表项来进行这样的调整。

### Visual Studio 2012（完整版）

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\General
DWORD: SuppressUppercaseConversion
Value: 1 
```

在 PowerShell 中，您可以运行它来设置该注册表项，然后大写字母就会消失。

```
Set-ItemProperty -Path HKCU:\Software\Microsoft\VisualStudio\11.0\General -Name SuppressUppercaseConversion -Type DWord -Value 1 
```

### 视觉工作室速成版 2012

上述注册表项不会影响 Visual Studio Express 2012 RC。[FormatC](http://www.richard-banks.org/2012/06/how-to-prevent-visual-studio-2012-all.html#comment-510984742703194994)的评论出现在 Banks 关于 Express 密钥的帖子上。[您可以找到Mike Gleason 的回答](https://stackoverflow.com/a/10906509/48700)中提到的那个键，或者运行以下 PowerShell 命令来设置它。

```
Set-ItemProperty -Path HKCU:\Software\Microsoft\VSWinExpress\11.0\General -Name SuppressUppercaseConversion -Type DWord -Value 1 
```

### 适用于 Web 的 Visual Studio Express 2012

```
Set-ItemProperty -Path HKCU:\Software\Microsoft\VWDExpress\11.0\General -Name SuppressUppercaseConversion -Type DWord -Value 1 
```

### 视觉工作室 2013

在上面的注册表项中替换`11.0`为。`12.0`

### Visual Studio 2015 开发者预览版

在上面的注册表项中替换`11.0`为。`14.0`

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-06-07T17:42:18.107

我已经写了一个扩展来为你做这件事。

您可以从 Visual Studio Gallery 下载它：

*   [适用于 Visual Studio 2012 的 VSCommands](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)
*   [适用于 Visual Studio 2013 的 VSCommands](http://visualstudiogallery.msdn.microsoft.com/c6d1c265-7007-405c-a68b-5606af238ece)

它还可以完全隐藏主菜单并使其仅在鼠标悬停或按下 alt 键时出现（如在 IE 中）

![在此处输入图像描述](../Images/0318f0bd706a5e808fe4c5a4c3f910e3.png) ![在此处输入图像描述](../Images/89ff8ed6bc42e41738671f04e15fc271.png) ![在此处输入图像描述](../Images/b5a55fac1473f3d8e5a503ebeefc641e.png)

![在此处输入图像描述](../Images/668e66801414122c545436bb75ac7a04.png)

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2014-07-02T21:02:52.047

多年后，微软改变了对这个功能的看法。从 Visual Studio 2013 Update 3 RC 开始，添加了一个在混合大小写和大写之间切换的选项：*工具 -> 选项 -> 环境 -> 常规 -> 在菜单栏中关闭大写*
显然这不适用于 VS 2012但未来这个选项将会出现。

[以下](http://blogs.msdn.com/b/bharry/archive/2014/07/02/vs-tfs-2013-3-update-3-rc.aspx)是来自 Microsoft 的 Brian Harry 的通知：

> 混合大小写菜单——我知道我会得到一些关于这个的反馈 :) 这是自 VS 2012 以来 VS 用户群的一个长期要求更改“全大写”菜单的请求。在 VS 2013 Update 3 中，我们添加了一个工具 -> 选项设置来控制您是否看到全部大写或混合大小写。默认值仍然是全大写，但如果您更改它，它将在升级过程中持续存在，并将使用 VS Online 漫游设置功能在您的 IDE 实例中漫游（如果您登录到 VS，它就会知道您是谁）。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-16T22:00:18.613

而对于

**适用于 Windows 桌面的 Visual Studio Express 2012**

```
HKEY_CURRENT_USER\Software\Microsoft\WDExpress\11.0\General
DWORD: SuppressUppercaseConversion
Value: 1 
```

我猜 MS 从键名中省略了任何提及 Visual Studio 的原因是这样的提及可能有助于某人识别键:)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-10-10T18:41:16.800

VS Commands 扩展可以做到这一点，并且是画廊中最受欢迎的扩展之一。值得一试！

![在此处输入图像描述](../Images/e4f9a1c4a64f75967a7b8b87588a94ff.png)

[http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8?SRC=VSIDE)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-07-22T14:17:11.907

现在 Visual Studio 2015 已将默认设置改回 Title Case，对于像我这样习惯了 ALL CAPS 的疯子，您可以通过**禁用**以下选项将其改回：

*   工具 -> 选项 -> 环境 -> 常规 -> 将标题大小写样式应用于菜单栏

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-08-29T03:39:12.210

**Visual Studio 2015 社区版**不响应 SuppressUppercaseConversion 注册表值。

答案是**启用**b​​oflynn 标识的选项：

•**工具**->**选项**->**环境**->**常规**->**将标题大小写样式应用于菜单栏**

在我的情况下，默认情况下该设置未启用，可能是因为我移植了我的 VS 2013 设置。

-诺埃尔

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-06-05T23:45:49.963

快速使用：

```
HKEY_CURRENT_USER\Software\Microsoft\VSWinExpress\11.0\GeneralSuppressUppercaseConversion 
```

[归功于](http://www.richard-banks.org/2012/06/how-to-prevent-visual-studio-2012-all.html)FormatC

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-09-13T05:08:27.880

我一直在使用以下 reg 文件来启用/禁用 Visual Studio 2012 和 Visual Studio 2013 中的小写：

[http://erwinmayer.com/dl/VS2012_ALLCAPS_Toggle.zip](http://erwinmayer.com/dl/VS2012_ALLCAPS_Toggle.zip) [http://erwinmayer.com/dl/VS2013_ALLCAPS_Toggle.zip](http://erwinmayer.com/dl/VS2013_ALLCAPS_Toggle.zip)

只需双击`VS201x_ALLCAPS_Disable.reg`存档内部即可禁用所有大写菜单标题，然后`VS201x_ALLCAPS_Enable.reg`重新启用它们。

您可以在之前使用文本编辑器轻松编辑 reg 文件以查看它们包含的内容。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-12-01T13:19:20.373

对于 Windows Phone 的 Visual Studio 2012 Express，使用

```
HKEY_CURRENT_USER\Software\Microsoft\VPDExpress\11.0\General\SuppressUppercaseConversion 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-11-27T18:11:09.167

我认为**“VSCommands for Visual Studio 2012”**是最好的选择。

从这里获取这个插件：http: [//visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-15T20:23:12.137

**微软 Visual Studio 社区 2019**

检查选项`Apply title case styling to menu bar`

可以在`Tools > Options > Environment > General`

# jekyll - 如何显示帖子的预览？（使用 Jekyll Bootstrap 主题）

> ID：10859175
> 
> 赞同：39
> 
> 时间：2012-06-02T01:39:10.497
> 
> 标签：jekyll

这可能是一个简单的问题，但是如何在默认页面上显示我的帖子的预览？我正在使用 Jekyll Bootstrap 主题 Tom。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-05-23T07:46:10.217

这至少从 开始也有效`1.0.0`，内置并且易于使用。

```
<ul>
  {% for post in site.posts %}
    <li>
      <a href="{{ post.url }}">{{ post.title }}</a>
      <p>{{ post.excerpt }}</p>
    </li>
  {% endfor %}
</ul> 
```

见[这里](http://jekyllrb.com/docs/posts/#post-excerpts)。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-15T03:43:58.880

[浏览这里](https://github.com/Shopify/liquid/wiki/Liquid-for-Designers)的函数，我发现了 strip_html 和 truncatewords。

这是一个包含 75 个单词的预览文本的示例“帖子列表”。

```
<ul >
    {% for post in site.posts limit 4 %}
    <li><span>{{ post.date | date_to_string }}</span> &raquo; <a href="{{ BASE_PATH }}{{ post.url }}">{{ post.title }}</a></li>
        {{ post.content | strip_html | truncatewords:75}}<br>
            <a href="{{ post.url }}">Read more...</a><br><br>
    {% endfor %}
</ul> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-11-14T18:01:35.413

我喜欢`<!--more-->`WordPress 的评论方法，所以我按照这些思路写了一些东西：

## _plugins/more.rb：

```
module More
    def more(input, type)
        if input.include? "<!--more-->"
            if type == "excerpt"
                input.split("<!--more-->").first
            elsif type == "remaining"
                input.split("<!--more-->").last
            else
                input
            end
        else
            input
        end
    end
end

Liquid::Template.register_filter(More) 
```

您的帖子将如下所示：

```
---
layout: post
title: "Your post title"
published: true
---
<p>This is the excerpt.</p>
<!--more-->
<p>This is the remainder of the post.</p> 
```

然后，您可以在模板中使用它，如下所示：

## 显示摘录（评论上方的所有内容`<!--more-->`）：

```
<summary>{{ post.content | more: "excerpt" }}</summary> 
```

## 显示剩余部分（`<!--more-->`评论后的所有内容）：

```
<article>{{ post.content | more: "remaining" }}</article> 
```

`excerpt`除了or之外的任何论点`remaining`都将简单地显示整个帖子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-22T20:12:01.120

这是一个老问题，仍然想为格式化问题添加一个解决方法，正如@Talon876 的回答[here](https://stackoverflow.com/a/11044301/3363206)中所提出的那样。

在每篇文章的末尾添加关闭标签`</em>,</strong> or </b>`可能不那么整洁，但它在显示摘录时保持格式。

例如：

```
<ul >
    {% for post in site.posts limit 4 %}
    <li><span>{{ post.date | date_to_string }}</span> &raquo; <a href="{{ BASE_PATH }}{{ post.url }}">{{ post.title }}</a></li>
        {{ post.content | strip_html | truncatewords:75}}
</em></strong>  <!-- This is what does the task-->
<br>
            <a href="{{ post.url }}">Read more...</a><br><br>
    {% endfor %}
</ul> 
```

# javascript - 如何使用javascript更改标签颜色？

> ID：10859177
> 
> 赞同：-1
> 
> 时间：2012-06-02T01:40:23.423
> 
> 标签：javascript, jquery

如何使用 JQuery / javascript（如 Facebook、Twitter）提醒浏览器内容已更改标签颜色发生变化的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:46:44.433

当标签的标题更改时，浏览器会自动执行此操作。`document.title`您可以使用该属性设置标题。

# javascript - JQuery添加数字值

> ID：10859179
> 
> 赞同：0
> 
> 时间：2012-06-02T01:40:38.643
> 
> 标签：javascript, jquery, css, numbers

有人可以帮我调试吗？？？我真的不知道我的代码有什么问题......

我正在尝试将数值添加到另一个数值......但它没有按我预期的那样工作......相反它只是将数字添加为字符串。

这是我的演示：（已经解决）

这是js代码：

```
$(document).ready(function(){
$("#map").click(function(e){
    var x = parseInt((e.pageX - this.offsetLeft)) - parseInt("140");
    var y = parseInt((e.pageY - this.offsetTop)) - parseInt("140");

  var coor = $("#map").css("background-position").split(" ");
  var cx = parseInt(coor[0].replace("px",""));
  var cy = parseInt(coor[1].replace("px",""));

    $("#map").stop().animate({"backgroundPosition": x+cx+" "+y+cy},"slow");
     alert("X:"+x+", CX: "+cx+"\n Y:"+y+", CY:"+cy+"\n Background-pos:"+$("#map").css("background-position"));

});
}); 
```

请告诉我它有什么问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T01:48:21.550

`()`在算术运算周围加上括号。

```
$("#map").stop().animate({"backgroundPosition": (x+cx)+" "+(y+cy)},"slow"); 
```

否则，添加空格`字符串将强制 JS 将您的数字连接为字符串。`

 `**[小提琴示例](http://jsfiddle.net/r9KU3/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T01:49:20.810

在您的`animate`-Statement 接近尾声中，您将背景位置设置为：

```
x+cx+" "+y+cy 
```

这被解释为一个字符串，因为四个 -`+`操作被平等地解释。实际上，您确实连接了一个字符串 ( `" "`)。因此，这个表达式的整个结果变成了一个字符串，加法不再是加法而是连续。

但是，如果您将数学封装到括号中，那么您应该没问题。您的倒数第二行变为：

```
$("#map").stop().animate({"backgroundPosition": (x+cx)+" "+(y+cy)},"slow"); 
```

（注意 周围的额外括号`x+cx`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T01:47:05.573

不是吗？

```
var x = parseInt((e.pageX - $(this).offset().left)) - parseInt("140");
var y = parseInt((e.pageY - $(this).offset().top)) - parseInt("140"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T01:52:43.767

以下对我有用：

```
$("#map").click(function(e){
        alert(e.pageX);
        alert(this.offsetLeft);
        alert(parseInt(e.pageX)-parseInt(this.offsetLeft)); 
````

# python - Django CMS - 导航顺序

> ID：10859185
> 
> 赞同：4
> 
> 时间：2012-06-02T01:41:58.600
> 
> 标签：python, django, django-cms

我想将一个应用程序集成到 Django CMS。因此，我遵循了Django CMS 的[文档](http://docs.django-cms.org/en/2.1.3/extending_cms/app_integration.html#app-integration)。

例如：我在我的应用程序的 menu.py 中使用以下代码（来自 doc）。

```
from menus.base import Menu, NavigationNode
from menus.menu_pool import menu_pool
from django.utils.translation import ugettext_lazy as _

class TestMenu(Menu):

    def get_nodes(self, request):
        nodes = []
        n = NavigationNode(_('sample root page'), "/", 1)
        n2 = NavigationNode(_('sample settings page'), "/bye/", 2)
        n3 = NavigationNode(_('sample account page'), "/hello/", 3)
        n4 = NavigationNode(_('sample my profile page'), "/hello/world/", 4, 3)
        nodes.append(n)
        nodes.append(n2)
        nodes.append(n3)
        nodes.append(n4)
        return nodes

menu_pool.register_menu(TestMenu) 
```

我的问题是节点的顺序。使用此代码，我的菜单将附加到我的 cms 页面的菜单上，但我需要不同的顺序。

有什么方法可以定义我的应用程序菜单出现在哪个位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:11:59.250

到目前为止，这是我的解决方法。（我仍然更喜欢更干净的方式。）

我添加了一个名为的 CMS 页面`--appname--`，这是我的`menu.py`：

```
from menus.base import Menu, NavigationNode
from menus.base import Modifier
from menus.menu_pool import menu_pool

my_items = ["a", "b", "c"]

class ImmoMenu(Menu):

    def get_nodes(self, request):
        nodes = []

        i = 0

        for name in my_items:
            i += 1
            n = NavigationNode(name, "/", i, attr={'appname': True})
            nodes.append(n)

        return nodes

menu_pool.register_menu(ImmoMenu)

class ImmoModifier(Modifier):

    def modify(self, request, nodes, namespace, root_id, post_cut, breadcrumb):
        if post_cut is not True:
            return nodes

        split_passed = False

        nodes_before = []
        nodes_after = []
        nodes_immo = []

        for node in nodes:
            if node.title == "--appname--":
                split_passed = True
                continue

            if 'appname' in node.attr:
                nodes_immo.append(node)

            elif split_passed:
                nodes_after.append(node)

            else:
                nodes_before.append(node)

        return nodes_before + nodes_immo + nodes_after

menu_pool.register_modifier(ImmoModifier) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:29:33.850

谢谢你帮助我，斯文！！我不知道修饰符的存在...

以下是您的代码的改进。它将在任意位置插入应用程序节点。每个应用程序节点都有一个 targetIndex 属性，在菜单上给出它从零开始的位置编号。对不起骆驼案，但我混合使用编程语言和一种风格来适应它们。在示例中，应用程序节点插入在偶数位置，“follow”是我的应用程序的名称。

```
 from menus.base import Menu, NavigationNode, Modifier
    from menus.menu_pool import menu_pool

    class FollowMenu (Menu):
        def get_nodes (self, request):
            nodes = []
            for i in range (5):
                nodes.append (NavigationNode (('Test' + str (i)), '/', i,  attr={'targetIndex': 2 * i}))
            return nodes

    menu_pool.register_menu (FollowMenu)

    class FollowModifier (Modifier):
        def modify (self, request, nodes, namespace, root_id, post_cut, breadcrumb):
            if not post_cut:
                return nodes

            appNodes = [node for node in nodes if 'targetIndex' in node.attr]
            cmsNodes = [node for node in nodes if not 'targetIndex' in node.attr]

            resultNodes = []

            appNodeIndex = 0
            cmsNodeIndex = 0
            for resultNodeIndex in range (len (nodes)):
                if appNodeIndex < len (appNodes) and appNodes [appNodeIndex] .attr ['targetIndex'] == resultNodeIndex:
                    resultNodes.append (appNodes [appNodeIndex])
                    appNodeIndex += 1
                elif cmsNodeIndex < len (cmsNodes):
                    resultNodes.append (cmsNodes [cmsNodeIndex])
                    cmsNodeIndex += 1
                else:
                    raise Exception ('Error merging app menu and cms menu items')

            return resultNodes

    menu_pool.register_modifier (FollowModifier) 
```

# ruby-on-rails - 开发中的 SQLite，生产中的 PostgreSQL——为什么不呢？

> ID：10859186
> 
> 赞同：11
> 
> 时间：2012-06-02T01:42:08.867
> 
> 标签：ruby-on-rails, sqlite, postgresql, heroku

Heroku 建议不要这样做，因为可能存在问题。我是一个 SQL 菜鸟，你能解释一下使用不同数据库可能遇到的问题类型吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T01:52:00.170

我在开发中使用了 sqlite3，在生产中使用了 postgres，但最近到处都改用 postgres。

如果您同时使用两者，请注意以下事项：

*   sqlite3 和 postgres 之间的差异会咬你一口。我遇到的一个常见问题是 postgres 对查询类型更严格（`where :string_column => <integer>`在 sqlite 中可以正常工作并在 postgres 中中断）。如果您的开发人员是 sqlite，那么您肯定需要一个使用 postgres 的暂存区域，并且如果您的生产应用程序由于 sql 错误而停机，这很重要。

*   Sqlite**更**容易在您的本地计算机上设置，并且能够在您的 db/ 目录中删除/移动 .sqlite 文件非常棒。

*   `taps`允许您将 heroku postgres 数据镜像到本地 sqlite 数据库中。随着数据库变得越来越大，它变得越来越慢，并且在几十个表和 100K+ 行的情况下，它开始需要 20+ 分钟才能恢复。

*   你不会得到像 ilike、新的键/值存储、全文搜索这样的 postgres 功能

*   因为您必须只使用广泛支持的 SQL 功能，所以将您的应用程序迁移到 mysql 可能会更容易

那我为什么换了？我想要一些仅限 postgres 的功能，不断遇到测试未发现的错误，并且需要能够更快地镜像我的生产数据库（pg_restore 需要约 1 分钟，而 Taps 需要 20 多分钟）。我的建议是在开发中使用 sqlite，因为它很简单，然后在/如果需要时切换。从 sqlite 切换到 postgres 进行开发就像设置 postgres 一样简单 - 等待不会增加复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T01:48:43.247

不同的数据库以不同的方式解释和遵守 SQL 标准。比如说，如果你要将一些代码从 SQLite 复制粘贴到 PostgreSQL，那么它很有可能不会立即工作。如果它只是基本查询，那么可能，但是在处理任何特定的事情时，完全兼容的可能性非常低。

一些数据库也更符合标准。这是一个类似于互联网浏览器的战场。如果您曾经创建过一些网站，您就会知道兼容性是一件令人头疼的事情，必须让它适用于旧版本和 Internet Explorer。因为有些数据库比其他数据库老，有些甚至比标准老，他们会有自己的做事方式，他们不能放弃并跳到标准，因为他们会失去对现有大客户的支持（对于称为 Oracle 的数据库引擎尤其如此）。PostgreSQL 有点像 Google Chrome，在标准合规性方面相当高，但仍有一些自己的小怪癖。顾名思义，SQLite 是一个轻量级的数据库系统。

数据库引擎也以不同的方式执行相同的操作。了解和理解一个数据库以及它是如何工作的（不仅仅是查询级别）是值得的，这样您就可以充分利用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T02:07:56.247

I was in a (kind of) similar situation. Generally it is a very bad idea to use different database engines for production and test. There are multiple reasons

*   SQL syntax differences including DML, DDL statements, stored procedures, triggers etc
*   Performance optimizations done on one DB wont be valid on the other
*   SQLite is an embedded database, PostgreSQL is not
*   They don't support the same data types
*   Different syntax/commands to configure/setup db. SQLite uses PRAGMAs

One should stick to one db engine, unless you have a really, really good reason. I can't think of any.

# sed - 处理换行 bash

> ID：10859187
> 
> 赞同：4
> 
> 时间：2012-06-02T01:42:43.853
> 
> 标签：sed, awk

我有这样的文件

```
line1
this is line1
line2
this is line2
line3
this is line3 
```

我想使用 awk 或 sed 删除每一行的尾随换行符，以便像这样合并它们

```
line1: this is line1    
line2: this is line2
line3: this is line3 
```

我如何使用 awk 或 sed

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T01:58:43.130

```
$ cat input 
line1
this is line1
line2
this is line2
line3
this is line3
$ awk 'NR%2==1 {prev=$0} NR%2==0 {print prev ": " $0} END {if (NR%2==1) {print $0 ":"}}' input
line1: this is line1
line2: this is line2
line3: this is line3
$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T07:31:49.193

这可能对您有用：

```
sed -i '$!N;s/\n/: /' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T02:47:00.297

使用`sed`：

```
sed -n '${s/$/:/p};N;s/\n/: /p' inputFile 
```

对于带有原始文件备份的就地编辑，

```
sed -n -i~ '${s/$/:/p};N;s/\n/: /p' inputFile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T02:34:08.890

```
sed 's/^\(line.*\)/\1:/' filename | paste - - 
```

和 Perl 类似物：

```
perl -ape 's/^(line.+)\n/$1: /' filename 
```

# c++ - 在 Visual Studio 调试模式编译的可执行文件： jmp 到函数体而不是调用中的直接地址

> ID：10859188
> 
> 赞同：2
> 
> 时间：2012-06-02T01:42:54.137
> 
> 标签：c++, visual-studio, assembly

想象一下这个虚假的程序：

```
void foo ( void )
{
    // anything
}

int main ()
{
    foo ();
    return 0;
} 
```

当使用 Visual Studio 在调试模式下编译时，编译器会构建某种“函数映射”或调用它。

因此，例如，当您在调试器中跟随 foo ()，或者只是尝试通过 &foo 检索函数的偏移量时，您会发现自己处于 jmp 的“列表”中，当您再次跟随它们时，它将引导您找到实际的函数身体。

我的问题是：是否有可能为单个选择的函数禁用此功能，以便 &foo 将地址返回给函数体，而不是 jmp。当然没有禁用调试模式。

如果不是，哪个标志为整个程序启用/禁用它？

提前致谢 ！

为用户 SigTerm 编辑： ![在此处输入图像描述](../Images/b2a8fa085b4b989040fe93766e2581c7.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T03:29:09.797

关闭“增量链接”

你的问题很像这样一个 [函数地址不是实际的代码地址](https://stackoverflow.com/questions/2485336/address-of-function-is-not-actual-code-address)

# android - Android 更改屏幕亮度。这需要特别许可吗？

> ID：10859191
> 
> 赞同：2
> 
> 时间：2012-06-02T01:43:24.717
> 
> 标签：android

我需要更改单个页面上的屏幕亮度以使 QR 码阅读更容易。

我想以对用户来说侵入性最小的方式来做到这一点。我真的不想将它们发送到系统设置只是为了使一项活动更亮。另一方面，如果有办法解决这个问题，我不想请求额外的权限？

我可以根据需要提示用户动态提供权限吗？如果没有，是否还有其他包含该权限的`android.provider.Settings.System.SCREEN_BRIGHTNESS`权限？

我正在尝试减少用户所需的权限总数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T02:07:16.170

如果它只是针对您的应用程序，我很确定您不需要为此请求许可。要更改您所做的整体系统亮度。

这是我发现的一个有用的链接：

[http://android-er.blogspot.com/2011/02/change-android-screen-brightness.html](http://android-er.blogspot.com/2011/02/change-android-screen-brightness.html)

从链接：

```
WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
layoutParams.screenBrightness = BackLightValue;
getWindow().setAttributes(layoutParams); 
```

# java - 乌尔都语文本在我的安卓模拟器中一个字母一个字母地显示

> ID：10859192
> 
> 赞同：0
> 
> 时间：2012-06-02T01:43:34.207
> 
> 标签：java, android, xml, android-emulator

我很难显示完整的 urdu 单词。我的代码在我的 android 模拟器中逐个字母地显示 urdu 文本。请指导我如何阅读乌尔都语。我已经设置了 URDU 字体。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:17:22.193

获取一个像“urdu.ttf”这样的字体文件将它放在你的资产文件夹中，在一个“fonts”文件夹中获取TextView的引用，如下所示：

```
TextView tv = (TextView) findViewById(R.id.myCustomTVFont); 
```

从资产文件夹中获取字体：

```
Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/urdu.ttf"); 
```

让您的 TextView 看起来很棒：

```
tv.setTypeface(tf); 
```

# c# - 可以在带有 jquery 对话框的页面上使用 Visual Studio 2010 Web 性能测试吗？

> ID：10859195
> 
> 赞同：0
> 
> 时间：2012-06-02T01:44:47.190
> 
> 标签：c#, visual-studio-2010, performance-testing

是否有人使用 Visual Studio 2010 中的 Web 性能测试工具成功测试了包含 jQuery 对话框的 Web 窗体应用程序？我现在已经记录了几个，但它们从来没有运行没有错误。jQuery 对话框似乎很困惑。我们的对话框是使用对话框小部件加载的 iframe，并传入了查询字符串参数。如果常规 Web 性能测试不起作用，您如何测试这些应用程序？谢谢，布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:16:10.233

我从未在 Web 表单上使用过 Web 性能测试，但你想得到什么？来自性能监控的实际数字/值？或有关如何加快您的应用程序的建议。如果是后者，您可以将 YSlow（连同 firebug）安装为 firefox 扩展，并查看它对您的站点的描述以及如何简化它。

# magento - Magento 在特定类别中的大规模更新价格？

> ID：10859196
> 
> 赞同：1
> 
> 时间：2012-06-02T01:44:47.237
> 
> 标签：magento

现在我在我的 Magento 商店中更新所有产品的价格是这个片段：

```
$products = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('price')
    ->addAttributeToSelect('special_price')
    ;
foreach ($products as $product) {
    $product->setPrice(round($product->getPrice() - 1000.00));
    $product->setSpecialPrice(round($product->getSpecialPrice() - 1000.00));
    $product->save();
} 
```

我的问题是如何更新**特定类别**中的所有产品而不是整个商店？我想应该有更多的选择器，例如 ->addCategoryToSelect() 或其他东西，但从未找到任何有关此的文档。

请赐教。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:08:29.933

这将是我会做的方式。您可以直接从类别中获取产品集合。我不是 100% 确定你真的需要 round 函数，但如果你决定使用它，我会确保你在 $product->getPrice() - 1000 周围加上括号，以确保它之前被计算过它被发送到函数。我选择不将它包含在我的答案中，因为我认为您不需要它。

试试这个：

```
$products = Mage::getModel('catalog/category')
    ->load($category_id)
    ->getProductCollection()
    ->addAttributeToSelect('*');

foreach($products as $product) {
    $product->setPrice(($product->getPrice() - 1000)));
    $product->setSpecialPrice(($product->getSpecialPrice() - 1000)));
    $product->save();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:02:20.177

在我的头顶上：

```
$category = Mage::getModel('catalog/category')->load($categoryId);
$productCollection = Mage::getResourceModel('catalog/product_collection')
                       ->addCategoryFilter($category);

foreach ($productCollection as $product) {
    $product->setPrice(round($product->getPrice() - 1000.00));
    $product->setSpecialPrice(round($product->getSpecialPrice() - 1000.00));
    $product->save();
} 
```

祝你好运。

# jquery - 如何切换 div 使其上下移动？

> ID：10859198
> 
> 赞同：0
> 
> 时间：2012-06-02T01:45:11.480
> 
> 标签：jquery, toggle

我有这个隐藏的 div，

```
<div id="lo_p" class="hidden">
    <label for="recipe_id">LO</label>
    <input placeholder="LO for this Recipe" class="all_curve_small cashier_inputs" />
</div> 
```

，我有这个简单的切换功能，

```
$('#id_for_lo').click(function(){
    $('#lo_p').toggle(1000);
}); 
```

，通常我不会问这个问题，因为它可以在[api.jQuery.com](http://api.jquery.com/)找到，但似乎他们的网站暂时不可用。无论如何，我想知道如何使我的切换效果来自顶部，我不知道你是否明白，但我已经看到 div 似乎来自顶部的切换用法，我的在这里另一方面是从左到右，而不是从上到下。我不确定你是否得到了这个，但对于那些得到这个的人，你的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:50:08.093

我想你的意思是`slideToggle()`，试试这个：

```
$('#id_for_lo').click(function(){
    $('#lo_p').slideToggle(1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T11:23:23.393

我已将其用于相同目的

```
$('#id_for_lo').click(function(){
   $('#lo_p').slideToggle({direction: "top" }, 500);
}); 
```

# android - 在活动中声明意图过滤器与接收者之间有什么区别？

> ID：10859203
> 
> 赞同：5
> 
> 时间：2012-06-02T01:47:09.603
> 
> 标签：android, android-intent, android-manifest

我希望我的应用程序通过“使用...完成操作”对话框注册一个电话处理程序。我发现如果我在清单中使用以下语法，它就可以工作：

```
 <activity android:name="my.class">
       <intent-filter>
          <action android:name="android.intent.action.CALL_PRIVILEGED" />
          <category android:name="android.intent.category.DEFAULT" />
          <data android:scheme="tel" />
       </intent-filter>
   </activity> 
```

但如果我将其注册为广播接收器，我的应用程序不会显示在“使用...完成操作”对话框中。

```
 <receiver android:name="my.class">
       <intent-filter>
          <action android:name="android.intent.action.CALL_PRIVILEGED" />
          <category android:name="android.intent.category.DEFAULT" />
          <data android:scheme="tel" />
       </intent-filter>
   </receiver> 
```

除了 Intent 与过滤器匹配时将调用的类的类型之外，两者之间有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T01:49:25.530

区别很明显：第一个将尝试启动一个`Activity`，而第二个将执行一个`BroadcastReceiver`。用什么取决于你想达到什么；`BroadcastReceiver`当您想捕捉某些事件但不想向用户显示任何内容时使用。

# mysql - Groovy SQL 中的 CASE 语句

> ID：10859206
> 
> 赞同：0
> 
> 时间：2012-06-02T01:48:05.890
> 
> 标签：mysql, sql, grails, groovy

我有一些调用 groovy Sql 对象的 Groovy 代码：

```
Sql sql = new Sql(dataSource)
sql.execute(insert) 
```

过去它工作得很好，但我现在有一些条件逻辑，我试图用 CASE 语句来建模，比如`CASE WHEN a.pick = ${somevalue} THEN ${100} ELSE 0 END CASE"`

但是，我收到一个运行时错误，说它不识别`a`，但我认为这是它一般不识别 CASE 语句的症状，正如`a`在查询中的其他地方所识别的那样，这并不是什么新鲜事。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:20:17.540

我猜这可能是您的 mysql 语法的问题，但我无法确认，因为没有提供。或者，但不是那么优雅；你可以用 groovy 处理这个...

```
def sqlInsert = "insert into foo (bar) values (${(foo.pick == someValue)? 100 : 0})" 
```

**但是**，首先您应该打印失败的查询并直接在 MySQL 中运行它，看看它是否是语法问题。

# python - 生成器表达式和 Google App Engine

> ID：10859209
> 
> 赞同：0
> 
> 时间：2012-06-02T01:48:40.510
> 
> 标签：python, google-app-engine, iterator, google-cloud-datastore, generator

我正在尝试为 Web 应用程序（通过 GAE）创建一个“迭代器”，该应用程序将一个“模板”字符串、两个整数（创建一个范围）和一个单词列表作为输入。用户将在他们想要迭代数字的字符串中插入一个“#”，并在他们想要迭代单词的字符串中插入一个“@”。

输入：

```
template string: "Person#Likes@"
starting integer: 1
ending integer: 3
list of words: "Apples, Bananas, Oranges" 
```

输出：

```
Person1LikesApples
Person1LikesBananas
Person1LikesOranges
Person2LikesApples
Person2LikesBananas
Person2LikesOranges
Person3LikesApples
Person3LikesBananas
Person3LikesOranges 
```

当用户单击标题为“下一步”或类似内容的提交按钮时，我希望输出显示在结果文本框中。踢球者是我希望输出仅在 Person1 第一次单击按钮时显示项目。然后，他们第二次单击它时，仅显示 Person2 的项目，依此类推。

我用生成器编写了一个简单的 Python 小程序，但我无法将它整合到我的 Google App Engine 应用程序中。

这是我的功能：

```
def g(f, text, lower, upper, list):
    for num in range(int(lower),int(upper)+1):
        yield f(text.replace('#', str(num)), list)

def f(text, list):
    for i in list:
        print text.replace('@', i) 
```

和其他代码：

```
if text and lower and upper and words:  
    result = g(f, words, lower, upper, list)
    self.render_iterator(result=next(result)) 
```

（^当我填写其他值时，此代码在我的结果文本框中返回“None”，但当我稍微摆弄一下时，它确实将其识别为生成器表达式）

还有另一种我想念的方法吗？我应该改用 GQL 和 Google 数据存储吗？如果您需要查看我的更多代码，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:56:21.900

我建议先弄清楚如何在 App Engine 之外执行此操作。这是一个非常简单的编程问题，但如果你无法弄清楚，尝试在 Web 应用程序中进行操作只是一种折磨。对解决方案感到满意后，您可以将其应用到 App Engine。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T02:32:30.960

`f()`没有返回值，因此返回`None`. 你需要改变

```
print text.replace('@', i) 
```

至

```
return text.replace('@', i) 
```

# windows-phone-7 - 发布windows phone 7游戏-测试用例5.2.4后退键

> ID：10859212
> 
> 赞同：-1
> 
> 时间：2012-06-02T01:48:46.840
> 
> 标签：windows-phone-7, xna, publishing

我一直在阅读多个来源，现在我比以往任何时候都更加困惑。

所以我的应用程序没有通过测试，因为我每次点击后退按钮时都会退出游戏。

所以我“修复”它总是进入菜单，这总是巧合的前一个屏幕......

问题是现在我提交了这样的应用程序......

当按下菜单中的后退按钮时，什么都不会发生......因为我已经在菜单中......

如果我在游戏中添加暂停屏幕，返回按钮的行为应该如何？

按一次 -> 暂停 再次按会回到游戏？还是去菜单？

问题是...如果这是真的，我将无法返回菜单，如果我想退出游戏...

所以我需要制作一个只有按钮一个“退出”按钮才能返回菜单的菜单？

我的问题是......后退按钮应该如何表现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:35:03.233

似乎暂时没有办法停止提交。后退按钮假定返回菜单或暂停游戏，但如果您在菜单中，则必须退出应用程序。

此外，如果您选择暂停游戏，则必须制作一个菜单，让您可以返回游戏或退出更复杂的主菜单。

这些测试应该是自动的...

# c++ - 与 C 的指定初始化程序等效的 C++ 是什么？

> ID：10859213
> 
> 赞同：13
> 
> 时间：2012-06-02T01:49:10.583
> 
> 标签：c++, c

您可以像这样在 C 中声明一个结构：

```
typedef struct MyStruct {
    const char *name;
    int (*func1)(void);
    int (*func2)(void);
    int (*func3)(void);
} MyStruct;

int test_func2(void) {
    return 0;
}

MyStruct test_struct = {
    .name   = "buffer",
    .func2  = test_func2,
}; 
```

这对于仅定义特定成员非常方便，所有其他成员都设置为 0/NULL。

编辑：特别是，这允许不知道如何定义 MyStruct 的详细信息，因此它可以在内部更改、添加新成员等。而无需使用这种类型破坏代码。

然而，这不会用 C++ 编译器编译，出现错误：

```
test.c:23: error: expected primary-expression before ‘.’ token
test.c:24: error: expected primary-expression before ‘.’ token 
```

是否有实现相同的等效 C++ 声明？

谢谢。

编辑：@chris 我可以告诉你不明白 :) 而且很明显，大多数其他人评论我应该使用什么语法，应该如何定义结构等等。完全没有抓住重点。这不是关于定义结构的正确方法，这个片段只是为了提供一个上下文。

至于代码等效性，请在您的代码中某处说：

```
MyStruct blah = { NULL, NULL, func2 }; 
```

现在 MyStruct 将其定义更改为：

```
typedef struct MyStruct {
  const char *name;
  int (*func4)(void);
  int (*func1)(void);
  int (*func2)(void);
  int (*func3)(void);
} MyStruct; 
```

您的代码仍然可以正常编译，但引入了严重的回归：您现在将初始化 func1 成员，而不是像以前那样设置 func2...

问题是关于 C++ 指定的初始值设定项是否等效：没有。问题关闭。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T01:51:28.820

不，C++ 不支持 C99 的指定初始化程序。如果要按名称设置单个成员，则需要通过分配来完成，例如

```
MyStruct test_struct = MyStruct();
test_struct.name  = "buffer";
test_struct.func1 = test_func1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T01:58:13.747

正如 K-ballo 所说，代码相当于：

```
MyStruct test_struct = {
    "buffer",
    test_func1
}; 
```

但是由于您使用的是 C++，因此您应该考虑为 MyStruct 编写和使用构造函数：

```
struct MyStruct {
    const char *name;
    int (*func1)(void);
    int (*func2)(void);
    int (*func3)(void);

    MyStruct(const char *n,
        int (*f1)(void) = NULL,
        int (*f2)(void) = NULL,
        int (*f3)(void) = NULL) : name(n), func1(f1), func2(f2), func3(f3) {}
}; 
```

请注意，在 C++ 中，您不需要将其 typedef 到 MyStruct，即使没有 typedef，您也可以只使用 MyStruct（没有 struct 关键字）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-27T11:23:44.843

您可以只使用 lambda（自 C++11 起）。这将允许您保持声明不变，同时轻松初始化结构的全局/常量实例：

```
struct Test
{
    int x;
    float y;
};

const Test test=[]{ Test t{}; t.x=5, t.y=3.3465; return t; }();

#include <iostream>
int main()
{
    std::cout << "test.x: " << test.x << ", test.y: " << test.y << "\n";
} 
```

你甚至可以将它包装到一个宏中，尽管在下面的表格中它只允许固定数量的初始化器：

```
// Macro to simplify it a bit
#define DECL_AND_INIT(Type,object,INIT1,INIT2) \
Type object=[]{ Type o{}; o.INIT1; o.INIT2; return o; }()
// Example usage
const DECL_AND_INIT(Test,test1,x=-7,y=-9.325e31); 
```

请注意，您仍然必须像`Test t{};`在 lambda 中那样使用值初始化——否则，如果您没有初始化所有成员（例如，由于添加了新成员），您最终将复制导致 UB 的未初始化变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T08:24:33.713

this 的功能等效性将是您`struct`的空主体的构造函数：

```
#ifdef __cplusplus
MyStruct::MyStruct(char* N, int (*F)(void)) :
    name(N),
    func1(0),
    func2(0),
    func3(F) {
  // empty
}
#endif 
```

（以一些语法错误为模，我的 C++ 有点生疏。）

这在功能上是等效的，因为它允许您构造全局对象，即使它们具有`const`限定字段，并且任何现代编译器都应该在编译时使用静态链接初始化对象。

# php - 美国或德国等英国的 Magento 州/省选项下拉菜单

> ID：10859225
> 
> 赞同：2
> 
> 时间：2012-06-02T01:51:08.977
> 
> 标签：php, javascript, magento

我需要在下拉列表中显示英国的州和省名称，并在注册时或在 Magento 的送货地址中显示美国和德国。当有人将选择国家英国时，所有州/省都应该作为下拉菜单来。请帮忙把它弄出来。![在此处输入图像描述](../Images/69b764cd7392547259d71d4f5c2e045e.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T03:41:55.710

默认 magento 的问题是数据库中没有英国的默认州/省，这就是为什么它向您显示空白文本框的后备显示而不是下拉列表的原因。要添加它们，您必须手动输入它们，或者您可以按照本教程进行操作：

[http://www.webshopapps.com/blog/2011/04/adding-new-regionsstates-to-your-magento-installation-2/](http://www.webshopapps.com/blog/2011/04/adding-new-regionsstates-to-your-magento-installation-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T12:53:27.980

我准备了一个 Excel 文件，其中列出了所有英语和意大利语省份。文件里面有填写 Magento 表的所有指令（需要基本知识）请从下载文件

[http://www.magentostoremanager.it/var/csv/directory_country_region.zip](http://www.magentostoremanager.it/var/csv/directory_country_region.zip)

您还可以添加新省份并在此处发布文件的新位置。

通过这种方式，我们很快就会有整个省份的名单

# android - 静态使用 newInstance() 方法的这段代码到底发生了什么？

> ID：10859226
> 
> 赞同：2
> 
> 时间：2012-06-02T01:51:10.647
> 
> 标签：android

除了使用 newIstance() 时，我几乎了解这段代码中的所有内容。谁能解释一下。非常感激。

```
public class DateDialogFragment extends DialogFragment {

public static String TAG = "DateDialogFragment";

static Context sContext;
static Calendar sDate;
static DateDialogFragmentListener sListener;

public static DateDialogFragment newInstance(Context context, int titleResource, Calendar date){
    DateDialogFragment dialog  = new DateDialogFragment();

sContext = context;
    sDate = date;

Bundle args = new Bundle();
args.putInt("title", titleResource);
dialog.setArguments(args);
return dialog;
   }
} 
```

我进行了编辑，我猜它在静态时的工作方式不同。我想这就是我感到困惑的原因。静态时方法如何更改？我真的不明白为什么不在构造函数中这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:55:01.913

使用片段（任何扩展的类`Fragment`）时，您经常需要传递一些数据。这是通过使用`setArguments`接收`Bundle`. 由于这样做需要大量代码（创建包、考虑键名等），因此通常将数据传递给静态方法（通常称为`newInstance`）。该方法的想法是创建参数包并将其传递给`Fragment`; 然后它返回片段，你可以把它放在你想要的任何地方。

以这种方式使用片段的另一个优点是，当您直接在 XML 布局中插入片段时，必须有一个空的构造函数（或者根本没有）。如果您使用构造函数创建片段（以传递其必要的数据），您可能会收到一些关于缺少空构造函数的错误。

# xaml - Windows 8 GroupedItemsPage

> ID：10859230
> 
> 赞同：0
> 
> 时间：2012-06-02T01:51:35.233
> 
> 标签：xaml, windows-8, microsoft-metro, title

在 Windows 8 GroupedItemsPage 中，如何更改每个组的标题？例如，默认的 GroupedItemsPage 有两个组，每个组的标题分别是“组标题：1”和“组标题：2”。如何更改这些标题？

基本上我想要 4 个组，每个组代表一个不同的类别，因此有一个适当的标题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:05:06.790

查看 DataModel/SampleDataSource.cs 以查看所有示例数据（包括组名）的定义位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:20:45.197

您可以通过查看示例来创建自己的数据模型。如果您没有设置组和动态填充，您可以更改 SampleDataSource.cs 中的所有设置，否则创建您自己的可能是更好的选择

# java - Java - 在没有窗口的情况下将组件或图像绘制到屏幕上

> ID：10859237
> 
> 赞同：0
> 
> 时间：2012-06-02T01:53:47.773
> 
> 标签：java, swing, graphics

我对编程有点陌生，但我已经知道很多了。我一直停留在默认窗口中，但现在我无法用我知道的东西做我想做的事情。我正在尝试创建一个显示透明自定义窗口的类，它正在使用一个`JFrame`被调用`CFrame`但要设置它透明我必须使用：

```
try
{
    AWTUtilities.setWindowOpaque(CFrame, false);
}

catch(Exception ex)
{
    System.err.println("Failed to set CFrame Opaque");
} 
```

但是由于有来自 Sun 的不同 JVM 的 AWTUtilities，因此无法正常工作。因此，如果有人知道如何解决我的问题或知道如何将组件和图像绘制到屏幕上，那将会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T02:15:48.263

If you can use Java 7, the window opacity stuff has been moved into the public API. See: [http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html#uniform](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html#uniform). Basically, there's now a `setOpacity` method in the `Frame` class, but the tutorial shows how to detect whether the graphics system even supports transparency, to "platform-proof" yourself.

As to general drawing with swing, there are stacks of tutorials on the web. Maybe start with this one: [http://docs.oracle.com/javase/tutorial/uiswing/painting/step1.html](http://docs.oracle.com/javase/tutorial/uiswing/painting/step1.html). Even the related questions that pop up here are going to have a wealth of info.

The book [Filthy Rich Clients](http://filthyrichclients.org/) is really good for advanced swing UIs.

# android - 碎片似乎是矫枉过正？不可能有 MVC 架构？

> ID：10859241
> 
> 赞同：10
> 
> 时间：2012-06-02T01:54:48.090
> 
> 标签：android, android-fragments, design-patterns, model-view-controller

几天前我从片段开始，但对我来说似乎是有线的。我没有看到复杂性大幅增加的正当优势。我不知道，我是否应该在我的 Activity 或 Fragment 中实现该功能。首先，我尝试将其放入片段中，但这似乎通常是不可能的。

例如：单击按钮后，我有一个对话框作为用户输入。因此，我通过侦听器将按钮单击从片段转移到活动，并在活动中打开了对话框。在对话框中，我启动了新功能（因此在 Activity 中实现）。Android 开发人员提示在片段中添加警报对话框：

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentAlertDialog.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentAlertDialog.html)

但是这个片段仍然被实现并且与活动重耦合（对话框的按钮动作在活动中）。

所以 Model 和 View 被严重混淆了。在如此难以维护的静态代码中，我没有看到额外的价值？！

你对碎片有什么看法和建议？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-02T12:11:20.990

使用时`Fragments`，您可以将它们视为 the`View`和`Activity`the `Controller`。在我个人看来，Fragments 是谷歌支持平板电脑的下意识反应，现在我们被它们困住了:(

我每天都在使用碎片，我当然能感受到你的痛苦。当我第一次阅读它们时，我对自己说，“这真的很酷”，但是在使用它们之后，它们在很多方面都不尽如人意，但主要是因为我会错误地使用它们:(

以下是我遇到的一些陷阱...

1.  不要`onclick`在您的片段布局中使用，因为它是`Activity`而不是`Fragment`将处理点击。如果您使用该属性，然后您在 another 中使用该片段`Activity`，那么您还必须记住将`onclick`方法添加到该属性中`Activity`。因此，使用 a`findViewById`然后在片段的`onCreateView`.

2.  与其他 Fragment 通信时，使用`Activity`作为控制器来引导消息。（很多关于如何使用接口的例子）。这里的关键是，如果您在一个设备上运行多个片段，其中一个片段将直接与另一个片段通信，那么您会遇到一些奇怪但可预测的行为。例如，如果 Fragment A 直接更新了 Fragment B 中的 View，但 Fragment B 不可见（因为您已经替换了它——考虑一个电话），那么当 Fragment B 可见时，则可能`View`不会更新，因为`View`重新创建。因此，如果您更新 a`Fragment`一定要更新片段中的数据，然后更新片段中的`View`部分`onCreateView`当片段再次可见时调用它（即，您已弹出当前片段，现在正在显示前一个片段）

3.  不要只使用片段构建完整的应用程序。而是像往常一样构建应用程序，使用活动，然后将其视为`Fragment`具有美化的视图（确实如此）。即，设计应用程序，使您有多个片段和多个活动，并且某些活动可能使用超过 1 个片段。

我对片段的第一个想法是，我认为使用片段和一个活动构建一个完整的应用程序会很棒......我最终完成了这个应用程序，但是使用这种方法我遇到了很多问题。我的下一个方法是使用多个片段和多个活动，并且效果更好。

底线是，如果您将 Fragment 用作 . 非常棒`View`，但是如果您开始尝试像活动一样使用它们，那么您将遇到问题 :( 将`Activiy`->`Fragment`视为`Controller`-> `View`。

我还建议您阅读并理解除了 Activity 生命周期之外的 Fragment Lifecycle（Pro Android 4 有一张很棒的图片来表示它），这样您就可以省去几个小时的痛苦：）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T04:52:31.147

片段提供视图逻辑，因此它们可以移植到其他活动。在大多数情况下，活动正在更多地成为真正的控制器的角色。在之前的 Android 架构中，视图逻辑和控制器逻辑混在一起，因为没有一个子类视图来实现他们的大部分应用程序。他们本质上是在 XML 布局文件中进行布局，然后直接在 Activity 中拉出 View 对象。所以这意味着 Activity 正在注册点击侦听器、按键侦听器、拖动逻辑等，这通常是您在其他工具包的另一个 View 子类中所做的。因为他们这样做了，这意味着您刚刚编写的非常酷的拖动多点触控手势 ListView 被卡在了那个 Activity 中。现在您想在另一个 Activity 中再次使用它。好吧，你是 SOL 使用 Fragments，您可以更轻松地将逻辑从 Activity 移动到 Fragment。现在从技术上讲，您可以将其移动到自定义组件视图中，但 Fragments 提供了另一个优势，即 Fragments 使您能够编写可以在平板电脑和较小设备上运行的应用程序，同时改变每个设备的布局。理解它是如何工作的很棘手，但是一个 Activity 可以包含多个 Fragment，每种形式的布局都有不同的布局。自定义组件几乎无法轻松完成的事情。加上自定义组件不能使用布局文件。您必须编写完整的 Java 代码，而您还没有放弃 Fragments。但是 Fragments 提供了另一个优势，即 Fragments 使您能够编写可以在平板电脑和较小设备上运行的应用程序，同时改变每个设备的布局。理解它是如何工作的很棘手，但是一个 Activity 可以包含多个 Fragment，每种形式的布局都有不同的布局。自定义组件几乎无法轻松完成的事情。加上自定义组件不能使用布局文件。您必须编写完整的 Java 代码，而您还没有放弃 Fragments。但是 Fragments 提供了另一个优势，即 Fragments 使您能够编写可以在平板电脑和较小设备上运行的应用程序，同时改变每个设备的布局。理解它是如何工作的很棘手，但是一个 Activity 可以包含多个 Fragment，每种形式的布局都有不同的布局。自定义组件几乎无法轻松完成的事情。加上自定义组件不能使用布局文件。您必须编写完整的 Java 代码，而您还没有放弃 Fragments。加上自定义组件不能使用布局文件。您必须编写完整的 Java 代码，而您还没有放弃 Fragments。加上自定义组件不能使用布局文件。您必须编写完整的 Java 代码，而您还没有放弃 Fragments。

我认为您提供的示例是设计片段的一种快速而肮脏的方法。您可以通过提取 Fragment 委托给的接口来轻松提取反向引用（this 的嵌套范围）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T11:35:19.033

好的，我用 mv 架构运行它......

```
 public AlertDialog openLocInput() {

    AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());
    alert.setTitle("Login");
    alert.setMessage("Enter Pin :");

    // Set an EditText view to get user input
    final EditText input = new EditText(getActivity());
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            jsonHandler.obtainMessage(1, input.getText().toString())
                    .sendToTarget();
            dialog.dismiss();
            return;
        }
    });

    alert.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                    return;
                }
            });
    return alert.create();
} 
```

在片段中实现......从片段开始这个警报对话框：

```
 fragment_userlocation_btn_addLocation.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            openLocInput().setOwnerActivity(getActivity());
            openLocInput().show();
        }
    }); 
```

也在 Fragments 中实现。

但我仍然相信矫枉过正的理论......

我认为 <5% 的 UI 将被重用，因此是否建议将加载片段的活动和包括没有片段的 ui 逻辑的活动混合在一起？

我认为 Fragments 的真正优势在于对平板电脑的优化，但目前平板电脑的使用量与移动设备的使用量相比非常少。除此之外，平板电脑不像移动设备那么“移动”，也不专注于上下文感知开发......

# google-app-engine - AppEngine 应用中的管理员

> ID：10859243
> 
> 赞同：0
> 
> 时间：2012-06-02T01:55:06.753
> 
> 标签：google-app-engine

我只是很困惑谁在 AppEngine 应用程序中被视为管理员？我可以在管理/权限中看到的角色是所有者、开发者和查看者。这三个是应用程序的管理员吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:26:06.457

是的，那三个是管理员。管理员是可以访问应用程序管理控制台的用户。您可以使用管理控制台来管理哪些用户具有管理员身份。

所有者，开发者和查看者之间的区别在于钦佩控制台上的权限。

# android - C2DM 服务器。我们现在应该使用 OAuth 吗？

> ID：10859246
> 
> 赞同：3
> 
> 时间：2012-06-02T01:55:47.223
> 
> 标签：android, .net, oauth, android-c2dm

我正在为我的 Android 应用程序实施 C2DM。客户端（Android）进展顺利，但我在实现服务器端时有点困惑。

我的服务器是 C#/.NET。关于身份验证，官方文档链接到 404： [https ://developers.google.com/android/c2dm/#handling_reg](https://developers.google.com/android/c2dm/#handling_reg)

我找到了另一个页面： [https ://developers.google.com/accounts/docs/AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps)

但它说已弃用。所以，我不知道现在该怎么办。使用已弃用的功能或学习如何使用 OAuth？（以前从未这样做过）

如果我使用 OAuth - 我应该在这里传递什么： `Authorization: GoogleLogin auth=[AUTH_TOKEN]`？

任何关于这个主题的指针将不胜感激

谷歌最近的帖子听起来像客户端登录是要走的路... [http://android-developers.blogspot.com/2012/04/android-c2dm-client-login-key.html](http://android-developers.blogspot.com/2012/04/android-c2dm-client-login-key.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T02:05:20.670

I recently started setting up C2DM myself, and I had the same confusion you did when I saw the deprecation notice. My best understanding is that while Google is moving to OAuth 2 for most services, deprecating ClientLogin, C2DM still uses ClientLogin, so that's what you have to use in this case.

Rationale:

*   Absolutely everything in the (up-to-date and frequently updated) [C2DM documentation](https://developers.google.com/android/c2dm/) explicitly refers to ClientLogin, strongly suggesting that the service is tied to this particular authorization method. ClientLogin is explicitly mentioned 11 times, while no mention is made to OAuth or to any other possible means of authentication.

In short, I believe that you must use ClientLogin for C2DM and should ignore the fact that it is deprecated for other Google services that are better served by OAuth. It doesn't appear that anything other than ClientLogin is intended to be used with C2DM in the foreseeable future.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:41:03.470

我认为 OAuth 2.0 是要走的路。我第一次使用 C2DM 的 ClientLogin，但发现没有管理颁发的授权码。即使我使用[Google 帐户授权访问](https://accounts.google.com/IssuedAuthSubTokens)页面撤销访问权限，我仍然可以使用之前发布的授权码向我的设备发送消息！此外，我不喜欢将 Google 凭据存储在某处以获取授权码的想法。

OAuth 2.0 稍微复杂一些，但现在我理解了它，我发现它比 ClientLogin 优雅得多。

基本上，使用[Google 的 OAuth 2.0 Playground生成](https://code.google.com/oauthplayground/)**OAuth Client ID**、**OAuth Client secret**和**Refresh Token**。这些可用于获取（刷新）在有限时间（通常为 1 小时）内有效的**访问令牌**。然后使用访问令牌使用 C2DM 发送消息。

 **我按照[本教程](http://michsan.web.id/content/how-code-android-c2dm-oauth-2)进行设置，它就像一个魅力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T02:11:55.780

Did you see this Java example?

[http://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10](http://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10)

It's easy to understand in my opinion.**

# validation - 数组对象内的可观察对象的剔除验证错误

> ID：10859248
> 
> 赞同：0
> 
> 时间：2012-06-02T01:56:22.607
> 
> 标签：validation, knockout-2.0

我将验证库 [Knockout Validation][1] 与 Knockout 2 一起使用。虽然 UI 正确显示对象数组内的可观察属性的验证错误。ko.validation.group 函数不跟踪这些错误。查看源代码，我看到它只检查数组对象本身的可观察性，而不是内部可观察属性。

我有一个数组

```
function Game(bowlerId, name, g1, g2, g3, g4) {
    this.BowlerId = bowlerId;
    this.Name = name;
    this.Game1 = ko.observable(g1).extend({ required: true, min:1, max:300  });
    this.Game2 = ko.observable(g2).extend({ required: true, min: 1, max: 300 });
    this.Game3 = ko.observable(g3).extend({ required: true, min: 1, max: 300 });
    this.Game4 = ko.observable(g4).extend({ required: true, min: 1, max: 300 });

} 
```

我用的是：

```
viewModel.errors = ko.validation.group(viewModel.Games); 
```

或喜欢

```
viewModel.errors = ko.validation.group(viewModel); 
```

在任何一种情况下，上述单个属性（Game1、Game2 等）都不会在 group 函数返回的错误中进行跟踪。验证错误确实出现在 UI 中。目前我必须查询 DOM 以查看用户是否提出了验证错误。有什么办法可以让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:39:12.177

你有没有尝试过？

```
viewModel.errors = ko.validation.group(viewModel.Games, { deep: true }); 
```

# mysql - 从用户的朋友那里检索每个友谊只有一行的帖子

> ID：10859249
> 
> 赞同：2
> 
> 时间：2012-06-02T01:56:23.327
> 
> 标签：mysql, sql, join

我有这 3 张桌子：

```
POST (id, name, id_user, ..)
FRIENDS (id, followerid, followingid, acepted) /* acepted must be 1 to users be considered friends */ 
```

好的，所以我想从用户 5 那里获取所有朋友的帖子。但是我在构建查询时遇到了很多麻烦。我知道我需要加入，问题是当前用户（ID 为 5）可能是 followerid 或 followingid，我怎么知道？

我正在尝试类似的东西（但被胡说八道挡住了）：

```
SELECT posts.*,friends.id 
                    FROM friends LEFT JOIN ON (friends.followerid  = posts.id) OR (friends.following.id = posts.id) 
```

但我真的不知道 ON 是否接受 OR 在里面，我可以在这里得到一些提示吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:39:31.557

`ON`子句与子句的相似之处在于`WHERE`都接受（简单或复杂）*条件*，这是一个*布尔*表达式。`OR`运算符是一个*布尔*运算符，因此它既可以在 中使用，也可以在 中使用`ON`，`WHERE`因此请随意在连接条件中使用`OR`任何您喜欢的方式来构建满足您要求的连接条件。

我认为您的查询基本上走在正确的轨道上。我只想指出一些你可能错过的事情，仅仅是因为你现在可能专注于其他事情。

一件事是联接的类型。我希望您的`friends`表应该包含各个用户之间的所有现有链接，而不仅仅是用户`5`和其他任何人之间的链接。因此，如果您使用*左*连接（即外连接）加入，您将获得`friends`来自的*所有*链接，而不仅仅是 user的，这可能不是您想要的。当然，您可以添加一个带有类似条件的子句，但这基本上等同于*没有*该条件的*内*连接。因此，请改用内部联接。`posts`**`friends``5``WHERE``friends.id IS NOT NULL`**

 ***但是，您的`WHERE`子句*可能*需要`friends.acepted = 1`的当然是条件，因为您只希望用户 5 的朋友参与，我假设您的意思是那些被*确认*为朋友的人，因此`acepted`应该是`1`。

当然，用户在`5`某个地方也必须有条件。在我看来，如果您从中派生一个表`friends`将*仅*代表user 的朋友`5`，并且它们也作为单个列，那将是最简单的。（也就是说，这两个过滤器都将应用于派生表而不是联接的结果集。）这样将朋友联接到`posts`表会更容易，因为您的联接条件会更简单。这是导出此类表的一种方法：

```
SELECT
  id,
  CASE followerid WHEN 5 THEN followingid ELSE followerid END AS friend_id
FROM friends
WHERE acepted = 1
  AND (followerid  = 5 OR followingid = 5) 
```

也就是说，此查询检索作为用户 ( ) 的朋友 ( )`acepted = 1`的用户 ID 。单个用户 ID 列由或组成：如果一个是，则拉另一个，反之亦然。`5``followerid = 5 OR followingid = 5``friend_id``followerid``followingid``5`

这就是您在最终查询中使用此派生表的方式：

```
SELECT
  p.*,
  f.id  /* there's an `id` column in `posts`, so it might be a good idea
           to assign `friends.id` a distinct alias, like `friends_id` */
FROM (
  SELECT
    id,
    CASE followerid WHEN 5 THEN followingid ELSE followerid END AS friend_id
  FROM friends
  WHERE acepted = 1
    AND (followerid  = 5 OR followingid = 5)
) AS f
  INNER JOIN posts AS p ON p.id_user = f.friend_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T02:00:30.627

一种方法是使用工会

```
SELECT posts.*,friends.id FROM friends LEFT JOIN posts ON 
(friends.followerid  = posts.id) where friends.acepted = 1 and posts.id_user = 5
UNION
SELECT posts.*,friends.id FROM friends LEFT JOIN posts ON 
(friends.following.id = posts.id) where friends.acepted = 1 and posts.id_user = 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T02:03:41.513

您的查询应该有效：

```
SELECT posts.*, friends.id 
FROM friends LEFT JOIN
     posts
     ON (friends.followerid  = posts.id) OR
        (friends.following.id = posts.id) 
```

但是，“on”语句中的“或”通常效率低下。例如，它们对索引的使用造成严重破坏。请注意，当有关注者和关注者时，此方法将为每个帖子生成多行。

另一种表述是将两者放在同一行：

```
SELECT posts.*, follower.id, following.id 
FROM posts left outer join
     friends follower
     ON follower.followerid = posts.id left outer join
     friends following
     on following.followingid = posts.id
where follower.id = 5 or following.id = 5 
```***

# ruby-on-rails - Rails Resque 更改工人限制？

> ID：10859250
> 
> 赞同：0
> 
> 时间：2012-06-02T01:56:37.067
> 
> 标签：ruby-on-rails, background, redis, resque, worker

我有一些 Resque 工作人员的 Rails 应用程序。似乎我有 2 名工人同时运行的限制（应用程序在 EC2 上运行，Apache 在生产中）。有什么办法可以提高这个限制吗？

编辑：

我在 redis.conf 中有 maxclients 0

我可以通过 rake 启动 10 个工作人员，但是当他们实际排队时，我在浏览器中得到“达到 ERR 最大客户端数”。

编辑：更新错误（在原始文件中是正确的）

编辑：实际上有 config/initializers/Resque.rb 指向 redis-to-go （是应用程序早期的雏形），一旦我删除它，指向 config/resque.yml （使用本地主机）一切都正常并且我可以随心所欲地启动尽可能多的工人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:23:18.283

也许您的问题更像是系统管理员问题，但如果不是系统资源问题，那么这可能会有所帮助。来自[http://railscasts.com/episodes/271-resque?view=asciicast](http://railscasts.com/episodes/271-resque?view=asciicast)

使用 resque gem，只需使用这个 rake 任务

```
#/lib/tasks/resque.rake 
require "resque/tasks"

task "resque:setup" => :environment 
```

并根据需要启动尽可能多的 resque worker。

```
$ rake resque:work QUEUE='*' 
```

最好使用一些服务监控框架，svc，monit，god。并使用resque web。

# iphone - 如何将 double[][] 存储到文件或 iOS 中持久的任何内容中？

> ID：10859251
> 
> 赞同：0
> 
> 时间：2012-06-02T01:56:52.950
> 
> 标签：iphone, objective-c, ios, persistence

我有一个 double[n][20]，其中 n 可能高达 200。如何将其存储到文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:59:34.650

我要么用 ANSI-C 编写自己的文件写入例程，要么使用 NSArray 写入文件功能。取决于偏好。

[保存一个 NSArray](https://stackoverflow.com/questions/1487606/saving-a-nsarray)

我实际上写了一段代码来确保它可以在 iOS 平台上运行。我将在这里发布洞的东西，你可以选择你想要的。本质上，我创建了一个 5 x 5 的静态数组进行测试，但它适用于任何大小的数组。这提供了用于以二进制格式写入文件（最快的方法和保留原始双精度的最佳方法）和读回文件的代码。如您所见，我在 UIViewController 的 viewDidLoad 例程中实现了主要代码。我用随机数填充了数组（不像我用静态 79 播种 rand 例程那样）。

在我定义的头文件中

```
double values[5][5];

- (void)viewDidLoad {
    [super viewDidLoad];

    NSBundle * myBundle = [NSBundle mainBundle];
    NSString * absPath  = [myBundle resourcePath];
    NSString * currPath;

    srand(79);

    FILE * aFile;
    currPath=[absPath stringByAppendingString: @"/myfile.bin"];
    if( NULL == ( aFile = fopen([currPath cStringUsingEncoding:[NSString defaultCStringEncoding]],"rb") ) ){

        //Generate some random doubles
        printf("generating 5 x 5 random values\r\n");
        for(int i = 0; i < 5; i++){

            for(int j = 0; j < 5; j++){
                values[i][j] = (double)rand() / (double)rand();
                printf("%.3f, ", values[i][j]);
            }
            printf("\r\n");
        }

        aFile = fopen([currPath cStringUsingEncoding:[NSString defaultCStringEncoding]],"wb");
        fwrite (values , 1 , sizeof(double) * 5 * 5 , aFile );
        fclose(aFile);

    }else{
        printf("File myfile.bin exists.  Reading in File.\r\n");
        fread(&values, sizeof(double), 5 * 5, aFile);
        for(int i = 0; i < 5; i++){

            for(int j = 0; j < 5; j++){
                printf("%.3f, ", values[i][j]);
            }
            printf("\r\n");
        }
        fclose(aFile);
    }

} 
```

代码的输出（在控制台窗口中如下所示）

```
generating 5 x 5 random values
0.002, 2.969, 0.298, 1.137, 0.790,
8.753, 0.884, 0.264, 0.034, 1.033, 
3.848, 1.049, 1.350, 0.402, 2.192, 
4.284, 0.979, 0.162, 1.294, 0.339, 
0.830, 0.175, 0.633, 1.008, 1.142, 

[Session started at 2012-06-02 03:56:44 +0000.]
File myfile.bin exists.  Reading in File.
0.002, 2.969, 0.298, 1.137, 0.790, 
8.753, 0.884, 0.264, 0.034, 1.033, 
3.848, 1.049, 1.350, 0.402, 2.192, 
4.284, 0.979, 0.162, 1.294, 0.339, 
0.830, 0.175, 0.633, 1.008, 1.142, 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T02:10:13.690

Try something like this:

```
void writeData(double[][20] data, int n, const char name[]) {
    FILE* output = fopen(name, "w");
    int i, j;
    fprintf(output, "%d\n", n);
    for(i = 0; i < n; i++) {
        for(j = 0; j < 20; j++) {
            fprintf(output, "%lf\n", data[i][j]);
        }
    }
}

double** readData(const char name[]) {
    FILE* input = fopen(name, "r");
    int i, j, n;
    fscanf(input, "%d", &n);
    double** ret = (double**)malloc(n*sizeof(double*));
    for(int i = 0; i < n; i++) {
        ret[i] = (double*)malloc(20*sizeof(double));
        for(int j = 0; j < 20; j++) {
            fscanf(input, "%lf", &ret[i][j]);
        }
    }
    return ret;
} 
```

FYI, this is untested code, but it should give you an idea of how to do this. This is simply a text file with the first line containing the length (n), and the rest of the lines containing the doubles.

You could also use a plist, because the tags can hold doubles. Use NSNumber*s to write the doubles, nested within s.

```
void writeData(double** data, int n, const char name[]) {
    FILE* output = fopen(name, "w");
    int i, j;
    fprintf(output, "%d\n", n);
    for(i = 0; i < n; i++) {
        for(j = 0; j < LPCC_DIM; j++) {
            fprintf(output, "%lf\n", data[i][j]);
        }
    }
}

double** readData(const char name[], int* getN) {
    FILE* input = fopen(name, "r");
    int n;
    fscanf(input, "%d\n", &n);
    *getN = n;
    double** ret = (double**)malloc(n*sizeof(double*));
    for(int i = 0; i < n; i++) {
        ret[i] = (double*)malloc(LPCC_DIM*sizeof(double));
        for(int j = 0; j < LPCC_DIM; j++) {
            fscanf(input, "%lf", &ret[i][j]);
        }
    }
    return ret;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T01:58:35.883

```
#include <fcntl.h> // for open(), close()
#include <unistd.h> // for write()

int fd = open(path, O_WRONLY|O_BINARY); // system call
write(fd, d, sizeof(double)*n*20);
close(fd); 
```

[http://www.manpagez.com/man/2/open/](http://www.manpagez.com/man/2/open/)

[http://www.manpagez.com/man/2/write/](http://www.manpagez.com/man/2/write/)

# asp.net - 在每个 asp.net GET/POST 请求中创建一个序列

> ID：10859252
> 
> 赞同：0
> 
> 时间：2012-06-02T01:57:07.473
> 
> 标签：asp.net, .net, vb.net, sequence

我想在每个页面请求中创建一个整数序列

这是我的代码：

```
Public Class Test
    Inherits System.Web.UI.Page

    Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'integer sequence is created here
        Static Sequence As Int32 = 0
        Sequence = Sequence + 1
    End Sub

End Class 
```

我的要求只是使用 VB.NET 代码创建了序列，没有数据库帮助。序列必须从 1 开始并以 1 递增。我尝试通过在 Page_Load 中使用 STATIC 变量来解决这个问题，该变量可以保留序列值。但是有人告诉我，我的方法是有风险的，因为它不是线程安全的。真的吗？或者我如何为每个请求创建一个没有任何问题的序列，无论是线程安全的还是其他问题？

## 更新

我试图以另一种方式解决问题。但我不确定我的新解决方案的线程安全性。这是我的代码，对`Singleton.Instance.Sequence`函数的调用将生成一个新的序列值：

```
Public NotInheritable Class Singleton
    Private Sub New()
    End Sub

    Public Shared ReadOnly Property Instance() As Singleton
        Get
            Return Nested.instance
        End Get
    End Property

    Private Class Nested
        Shared Sub New()
        End Sub

        Friend Shared ReadOnly instance As New Singleton
    End Class

    Private count As Int32
    Public Function Sequence() As Int32
        count = count + 1
        Return count
    End Function
End Class 
```

我的新解决方案线程安全吗？欢迎任何替代解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:51:40.033

您可以通过少量修改使您的第一个解决方案线程安全：

```
Public Class Test
    Inherits System.Web.UI.Page

    Static Sequence As Int32 = 0
    Private Shared lockObject As New Object

    Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        SyncLock lockObject
            Sequence += 1
        End SyncLock
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:56:19.650

使用[Interlocked.Increment(safeCount)](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx#Y0)

# c++ - 在 C/C++ 中读取/写入屏幕进程

> ID：10859253
> 
> 赞同：4
> 
> 时间：2012-06-02T01:57:23.370
> 
> 标签：c++, c, gnu-screen

我想知道如何连接到 C/C++ 中的屏幕进程，我经常想让 C 程序监听该屏幕窗口的输出并对该输出做出反应，并向在该会话上运行的程序发送一些输入. 我只是不确定我应该如何连接到该屏幕会话，并且在搜索时我没有发现任何非常有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:41:19.377

完全按照您的意愿行事。screen 期望在终端设备内运行，所以如果（我假设你在 linux 上）你想以编程方式创建它，你必须设置一个终端伪设备使用`posix_openpt()`，设置从设备`grantpt()/unlockpt()`，分叉，打开从设备pty 在子进程中，将其复制到 stdin/out/err，最后使用适当的选项执行屏幕。现在您可以像终端模拟器一样发送命令和接收终端通知。查看手册页以`pty(7)`获取更多详细信息；我很确定我错过了一些。

这完全是一团糟，而且几乎可以肯定，对于你想要做的事情来说过于复杂了。所以：你到底想做什么？

# iphone - 如何为单个 UITableViewCell 设置动画？

> ID：10859254
> 
> 赞同：0
> 
> 时间：2012-06-02T01:58:09.550
> 
> 标签：iphone, uitableview

我想为tableview的每个单元格设置动画。因此，如果我选择表格的一个单元格，那么只有该单元格会缩放并且看起来像翻转动画。

我有一些代码。但是如果我选择它，那么所有的表都会被翻转。不仅仅是一个细胞。

在这里，代码如下。

```
-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    [tableView deselectRowAtIndexPath:indexPath : YES ];
    [UIView transitionFromView:cell toView:checkProjectView duration:1.0f options:UIViewAnimationOptionTransitionFlipFromLeft completion:NULL];
    [UIView commitAnimations];
} 
```

我该如何实施？

我在这个示例中有 2 个视图。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:08:20.900

您可以尝试另一种解决方案。在创建单元格时创建一个 UIView 对象。该视图的外观应该类似于您的单元格的外观。现在使用该视图设置单元格的内容视图。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // See if there's an existing cell we can reuse
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Foobar"];
    if (cell == nil) {
        // No cell to reuse => create a new one
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Foobar"] autorelease];

    }

    // Customize cell
    [cell.contentView addSubview:customView]; // customView is your view which you want to set

    return cell;
} 
```

现在为这个 CustomView 使用你的动画代码。

```
-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    [tableView deselectRowAtIndexPath:indexPath : YES ];
    [UIView transitionFromView:[cell.contentView viewWithTag:#tagof view here] toView:checkProjectView duration:1.0f options:UIViewAnimationOptionTransitionFlipFromLeft completion:NULL];
    [UIView commitAnimations];
} 
```

# javascript - 如何将元素添加到 SVG DOM

> ID：10859257
> 
> 赞同：16
> 
> 时间：2012-06-02T01:58:26.623
> 
> 标签：javascript, jquery, svg, raphael

我有一个带有 jpg 图像的网页，用户在使用 Raphael 的基础上绘制了一个 SVG 涂鸦。

我想让用户在完成后保存一个合并的光栅化版本（我自己会用 SVG 版本做其他事情）

当用户单击保存时，我想将该背景图像作为元素添加到生成的 SVG DOM 中，然后使用 canvg 将 SVG 写入画布元素。最后，我使用 toDataUrl() 方法将其转换为 jpg。

我无法让中间部分工作——将图像添加到 DOM 的最佳方法是什么？当我使用下面的代码时，我收到一个 javascript 错误，提示 appendChild() 不是函数。

我想知道它是否与我如何使用 .html() 方法获取 SVG 有关 - 也许返回的内容没有被解释为真正的 SVG 文档？

非常感谢任何帮助。

```
 function saveImage(){

        var img = document.getElementById('canvas').toDataURL("image/png");
        window.open(img,'Download');

    }

    $('#save').click(function(){

        var svg = $('#editor').html();

        // Create new SVG Image element.  Must also be careful with the namespaces.
        var svgimg = document.createElementNS("http://www.w3.org/2000/svg", "image");
        svgimg.setAttributeNS("http://www.w3.org/1999/xlink", 'xlink:href', "myimage.jpg");

        // Append image to SVG
        svg.appendChild(svgimg);

        canvg('canvas', svg, {renderCallback: saveImage(), ignoreMouse: true, ignoreAnimation: true, ignoreDimensions: true});

    }); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-02T02:22:38.867

这是一种方法：

```
var svgimg = document.createElementNS('http://www.w3.org/2000/svg','image');
svgimg.setAttributeNS(null,'height','200');
svgimg.setAttributeNS(null,'width','200');
svgimg.setAttributeNS('http://www.w3.org/1999/xlink','href', 'myimage.jpg');
svgimg.setAttributeNS(null,'x','10');
svgimg.setAttributeNS(null,'y','10');
svgimg.setAttributeNS(null, 'visibility', 'visible');
$('svg').append(svgimg); 
```

# javascript - 使用存储过程按需加载 JSTree

> ID：10859266
> 
> 赞同：4
> 
> 时间：2012-06-02T02:03:04.260
> 
> 标签：javascript, jquery, json, asp.net-mvc-3, jstree

目前，我在 SQL Server 中有两个存储过程来处理从数据库中检索树：
当您传入一个级别编号时，第一个检索特定级别的所有节点。
另一个在您传入 Level、Left 和 Right 值时检索特定节点的子节点。

我正在使用 MVC 3。
理想情况下，我想设置 JSTree 以在每次用户单击展开节点时调用数据库。因此，与其将整个树加载到服务器上的 Json 模型中，然后将其传递给典型的 JSTree，不如只传递用户单击的特定节点的子节点。这将发生在每个节点上，因此只有直接节点的子节点必须被传递到 JSTree 而不是整个树。

这可能吗？如果是这样，我会很感激视图的一些示例代码（尤其是），可能还有使用微软 MVC 3 框架的控制器。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:22:59.460

是的，这是可能的，jstree 实际上非常简单。

您想要做的是使用 jstree 插件的`ajax`参数`json_data`，但对其进行设置，以便向`data`or`url`参数传递一个函数，该函数将发送已扩展的节点 ID，以便您的 Web 服务可以调用您的存储过程并返回所选节点的子节点的数据。

这是来自[http://www.jstree.com/documentation/json_data](http://www.jstree.com/documentation/json_data)的示例之一，稍作修改：

```
$("#tree").jstree({ 
  "json_data" : {
     "ajax" : {
       "url" : "/yourwebservice/getnodechildren",
       "data" : function (node) { 
           //this is passed the node being opened
           //or -1 if it's the root node

           var dataToPass = {};

           if (node === -1) {
              //pass parameters to the webservice that will build and return
              //first two tree levels

              dataToPass = { 
                id : 0,
                initialLoad: true
              }; 
           }

           if (node.attr && node.attr("id") {
               dataToPass = {
                 id: node.attr("id"),
                 initialLoad: false
               }
           }

           return dataToPass;

        },
        "success" : function (dataFromWebservice) {
            //depending on how the webservice returns
            //data you may need to do this
            return dataFromWebservice.d;
        }
      }
    },
"plugins" : [ "themes", "json_data" ]
}); 
```

您可以使这段代码更加优雅，但这就是要点。这将允许您按需构建树，而不是一次全部构建。

如果您的 web 服务设置为在 url 上传递参数，只需将 url 设为函数，并使用它来使用节点的 id 或您需要的任何其他参数来构建您的 url 请求。

# database-design - 数据库设计：可以是文本或外键的属性

> ID：10859269
> 
> 赞同：2
> 
> 时间：2012-06-02T02:04:16.547
> 
> 标签：database-design

我搜索了论坛，有几篇关于问卷设计的帖子，但我想讨论一个特定的话题。此外，这是一个相当普遍的设计问题。

我想将问卷回复存储到数据库中。一些响应是自由文本（例如 varchar），而其他一些响应是多项选择（例如 FK）。你如何模拟这种差异？

我见过两种方法——（忘记细节）。

**方法 A：**使用 2 个表。一个用于文本响应，另一个用于多项选择响应。

```
Table: text_response
some_stuff ----[*]
text ----------[varchar]

Table: mc_response
some_stuff ----[*]
optionID -----[FK to selected option]

*-not relevant to the disccussion... ResponseID, QuestionID, SurveyID, whatever 
```

**方法 B：** “合并”两个表并根据响应类型仅使用其中一列。

```
Table response
some_stuff ----[*]
optionID -----[FK to selected option]
text ----------[varchar] 
```

**我应该选择哪一个（如果有的话）？**为了使讨论保持一般性和对任何人有用，我希望一般目的**的利弊****，**但如果它有助于某些上下文，我会将它用于高度动态的问卷系统（用户可以创建自己的民意调查和查询）。我不太关心性能，我关心代码的简单性和维护。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:16:25.900

选择方法 B。方法 A 没有意义。原因如下：

1.  代表一个逻辑对象的两个表`Response`是一个坏主意。不直观。

2.  您的应用程序逻辑会很复杂。这样做很复杂——“获取问卷 id = X 的所有回复”，您需要查询两个表。

3.  您将不得不`questionType`决定要查询哪个表以获得答案。

4.  假设您想要一个混合包`response`，例如前三个选择作为多项选择，如果三个选择与他们必须回答的内容不匹配，人们可能会填写自己的意见。你要把`Response`同一个问题分成两个表吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T02:14:27.603

我会选择方法B

*   只需要一张桌子
*   数据为正常形式（无冗余）
*   易于维护（因为只有一张桌子）**

# wamp - /www 之外的命名虚拟主机上的 Wampserver 403

> ID：10859271
> 
> 赞同：11
> 
> 时间：2012-06-02T02:05:52.370
> 
> 标签：wamp, virtualhost, wampserver, http-status-code-403

当我尝试在 c:/wamp/www/ 目录之外创建虚拟主机时，Wampserver 告诉我访问被拒绝。我可以在那个目录中做一个很好的。即使对文件夹进行符号链接也可以，但我宁愿不必使用符号链接。为什么它不起作用？

这是我在 httpd.conf 末尾使用的代码

```
NameVirtualHost *:80

<VirtualHost *:80>  
DocumentRoot "c:/wamp/www" 
ServerName localhost 
ServerAlias localhost 
</VirtualHost> 

<VirtualHost *:80>
ServerName local.cascade
DocumentRoot c:/wamp/www/cascade/
</VirtualHost>

<VirtualHost *:80>
ServerName local.md9
ServerAlias local.md9
DocumentRoot "m:/Work/New MD9.ca/site/"
</VirtualHost>

<Directory "m:/Work/New MD9.ca/site/">
    Order Allow,Deny
    Allow from All
</Directory> 
```

“级联” vh 工作正常。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-03T04:44:11.100

我想我应该更仔细地查看 http.conf。时间不长，主要是评论。麻烦的是这个。

```
# Deny access to the entirety of your server's filesystem. You must
# explicitly permit access to web content directories in other 
# <Directory> blocks below.
#

<Directory />
    AllowOverride none
    Require all denied
</Directory> 
```

我把它注释掉了，现在东西可以工作了，虽然我猜它不太安全，但它只是一个测试服务器。

我认为该`<Directory "m:/Work/New MD9.ca/site/">`位应该照顾它，但我想不是。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-03T10:28:04.923

我知道这个问题现在已经过时了，你已经让它工作了，但我遇到了这个问题并在没有删除`Require all denied`标签的情况下解决了它。

您只需在目录标签中添加一个`Require local`（或`Require all`用于在线访问）标签。例如

```
<VirtualHost *:80>
    ServerName local.md9
    ServerAlias local.md9
    DocumentRoot "m:/Work/New MD9.ca/site/"

    <Directory "m:/Work/New MD9.ca/site/">
        Order Allow,Deny
        Allow from All
        Require local
    </Directory>
</VirtualHost> 
```

您可以看到在 httpd.conf 的 DocumentRoot 目录中声明的相同规则

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-01T12:25:29.283

我有同样的问题，但在看了这个问题后设法解决了。

但是，接受的答案可能不是最佳解决方案，具体取决于您希望 Apache 配置的安全性。

我认为解决方案应该提到两件事，第一是确保安全性不受影响，第二是；了解 Apache 版本 2.2 和 2.4 之间访问控制配置的差异。

# 确保安全不受影响

注释掉建议的行：

```
<Directory />
    AllowOverride none
    Require all denied
</Directory> 
```

据我了解，意味着您删除了应用于计算机上所有目录的默认严格安全性。其他人可以创建指向您的`C:\very\sensitive\information`目录的配置并将内容从那里提供给网站（这很可能是共享主机上的一个问题）。有趣的是，在该块上方进行了以下评论：

```
# First, we configure the "default" to be a very restrictive set of 
# features. 
```

然后在该块下方：

```
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below. 
```

锁定所有内容，然后有条件地解锁每个目录是完全有意义的。

我想出了以下内容，它指向我的所有网站（通过 Apache 虚拟主机提供）将在我的机器上存在的位置。这紧跟在`<Directory "d:/wamp/www/"></Directory>`块之后。

```
<Directory "d:/wamp/sites/">
    Options Indexes FollowSymLinks
    AllowOverride all
    Require all granted
</Directory> 
```

然后在每个虚拟主机配置/别名中，您可以设置适用于该目录的配置。

# 访问控制配置的差异

在较新版本的 Apache 中配置访问控制已更改。

曾经是什么：

```
Order allow,deny
Allow from all 
```

现在应该是：

```
Require all granted 
```

欲了解更多信息：[http ://httpd.apache.org/docs/current/upgrading.html](http://httpd.apache.org/docs/current/upgrading.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-09T15:57:58.397

`<Directory>`标签应该在里面`<VirtualHost *:80>`

像这样：

```
<VirtualHost *:80>
ServerName local.md9
ServerAlias local.md9
DocumentRoot "m:/Work/New MD9.ca/site/"
    <Directory "m:/Work/New MD9.ca/site/">
        Order Allow,Deny
        Allow from All
    </Directory>
</VirtualHost> 
```

另请注意，对于默认 www 文件夹之外，您应该使用 require 而不是 allow

```
<Directory />
    AllowOverride none
    Require all denied
</Directory> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-26T13:35:42.127

如果您尝试了上述所有 .conf 编辑但均无效，请尝试以下附加步骤：

1) 确保 DocumentRoot 和 <Directory> 位置**相同**！

2) 仔细检查 <VirtualHost> 标记中的“ServerName”域拼写，并检查 HOST 文件 (windows\system32\drivers\etc\hosts) 中域的拼写是否相同：

例子：

```
<VirtualHost *:80>
    DocumentRoot "D:/vhost_directory/website_directory"
    ServerName mywebsite.local
    <Directory "D:/vhost_directory/website_directory">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost> 
```

3）检查conf文件语法：

```
cd \wamp\bin\apache\apache2.4.9\bin
httpd -t 
```

4) 修复 conf 文件错误，直到获得输出：

```
Syntax OK 
```

5）刷新域名缓存（必须以管理员身份运行控制台）：

```
net stop dnscache
net start dnscache 
```

6) 重启 Apache 服务或重启 WAMP 上的所有服务

# .htaccess - .htaccess subfolder redirect to root files

> ID：10859283
> 
> 赞同：0
> 
> 时间：2012-06-02T02:09:46.457
> 
> 标签：.htaccess

I have a website inside another websites folder. Its accessed [http://websiteone.com/websitetwo](http://websiteone.com/websitetwo)

There is a domain websitetwo.com which simply redirects users to the above domain/subfolder.

I am wondering if there is a way using .htaccess to redirect [http://websiteone.com/websitetwo](http://websiteone.com/websitetwo) to read files in the web root directory websitetwo.com without actually redirecting the user so to make it appear they are still on [http://websiteone.com/websitetwo](http://websiteone.com/websitetwo)

Thanks

# javascript - 每个方法调用都执行一个对象函数吗？

> ID：10859286
> 
> 赞同：0
> 
> 时间：2012-06-02T02:10:07.393
> 
> 标签：javascript

在这：

```
somefunction = function() {

    somefunction.method = function() {
         //stuff
    }
//other stuff
} 
```

`somefunction`每次都执行是吗`somefunction.method`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T02:17:26.370

不，当您有以下任何行时，将执行 somefunction：

```
somefunction()
somefunction.call()
somefunction.apply()
new somefunction; 
```

`somefunction.method()`只会执行`somefunction.method`，但可以访问范围内的`somefunction`变量（当然还有它自己的局部变量和所有全局变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T02:14:58.570

不是天生的（除非它在“其他东西”中明确调用）。它被*评估*了，但这只是 CPU 时间，还不够重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T02:20:06.007

不。但是，每次调用 somefunction 时，您都会创建一个新的闭包。如果 somefunction 依赖于其范围之外的任何变量，那么 somefunction.method 可能会根据调用 somefunction 的时间而改变，从而产生竞争条件（调试起来并不有趣）。

这可能不是解决问题的正确方法。

考虑

```
somefunction = function() {
  // constructor
}

somefunction.prototype.method = function() {
  //stuff
} 
```

# database-design - Modeling a NoSQL database (DynamoDB) for different sorting queries

> ID：10859289
> 
> 赞同：4
> 
> 时间：2012-06-02T02:10:38.360
> 
> 标签：database-design, amazon-web-services, nosql, amazon-dynamodb, non-relational-database

I have somewhat of a specific question regarding how to model my DynamoDB tables so that I can handle the necessary queries.

My application is centered on the idea of "events." Every event has attributes (name, location, time, number of attendees, etc). Events are associated with the cities in which they are located. I am trying to figure out how to perform a get / query request (probably a series of get / query requests) to obtain the top 25 events with the most attendees for a specific city.

I come from a background of relational databases, and this would be a really simple query (select * from events where city = x order by attendees limit 25). But I am having a hard time figuring out how to do the same with a non-relational database. I know I will have to create additional tables to store mappings of hashes, but I can't seem to figure it out.

One way I have thought of implementing it is to somehow let the "attendees" (of Number type) be the range key, and let the city be the hash key. But this will not necessarily be a unique key because multiple events in the same city could have the same number of attendees. Also, is it even possible to "update / atomically increment" a range key?

Thanks for all your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T08:10:42.683

注意：我仍然相信 RDBMS 更适合这些查询，但这里有：

首先，您只能以原子方式递增一个属性。
现在对于您的情况，我建议以下内容：

```
Table: Events
hk: eventId
attributes

Table: Top_Attendees_Per_City
hk: city
rk: eventId

Table: Event_Id_Generator
hk: event_counter
running_counter

Table: Minimum_Attendees_Per_City
hk: city
min_attendees_number, max_attendees_number, events_number 
```

一旦一个事件被触发到您的后端，您将需要为其分配一个正在运行的 id。这不是强制性的，它在扩展方面存在问题，但它将确保如果活动有相同数量的参与者，较新的活动将在您的“top25”中优先。
您需要检查参加人数是否在最小和最大之间，同时计算事件直到“25”。这使您的 mimimum_attendees_per_city 可以决定这个新事件是否将出现在 top25 中。如果是，则将其添加到 top_attendees_per_city。
最后，您使用 setScanIndexForward(false) 和 setLimit(25) 查询该表
结果是参加人数最多的 25 个活动。最后说明：结果项目不是由他们的与会者订购的，您可以在返回之前在应用程序级别订购它们。

# css - 是否可以将 id/class 与属性结合起来？

> ID：10859296
> 
> 赞同：-1
> 
> 时间：2012-06-02T02:12:49.117
> 
> 标签：css, css-selectors

我只是想知道忽略规范，这种选择器是否真的在真正的浏览器中找到并支持？

我从未见过结合了类和属性选择器或 id 和属性选择器的 CSS 规则。虽然以这种方式组合 Id 似乎没有意义，但也有一些用例，例如仅在禁用 id 元素时使用的规则。

我只是试图更好地理解可能的真正支持的组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:17:34.217

通常，由于 ID 是唯一的，因此您永远不需要将它与属性结合起来，但是在它前面加上一些东西通常会有所帮助，以查看它的来源，例如：

```
.header .float-left #my_id 
```

我想说将一个类与一个属性结合起来并不罕见，因为它不是唯一的，例如：

```
input.my_class[type='submit'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T04:29:32.020

所有支持 ID、类和属性选择器的浏览器都可以轻松理解它们在复合选择器中的组合。据我所见，如果有任何晦涩难懂的错误，那么这些通常存在于单个选择器中，而不是选择器的组合中（例如，IE7 不是那么晦涩，而是臭名昭著的 DOM 属性选择器的错误处理） .

该规范没有具体说明如何组合 ID、类和属性，[但它确实间接声明它是允许的且完全公平的游戏](http://www.w3.org/TR/selectors/#selector-syntax)（参见简单选择器和*简单选择器**的序列*）。

# java - Postage Stamp Vending Machine

> ID：10859297
> 
> 赞同：0
> 
> 时间：2012-06-02T02:13:00.120
> 
> 标签：java, oop

I was given an assignment to develop an algorithm for dispensing stamps for a postage stamp vending machine. I need to write a function that will return the minimum number of stamps for a given value. We can assume that there will always be a one cent stamp in the machine.

The function prototype looks like:

```
int min_number_of_stamps (
const int* array, /* input array of sorted stamp values */
size_t array_size, /* number of elements in array */
int request /* desired value to of stamps */
); 
```

The function will return the minimum number of stamps for a given value. As an example, if the array was `[90,30,24,15,12,10,5,3,2,1]` and the request was `32`, the output should be `2`, `one 30 cent stamp` and `one 2 cent stamp`.

Could anyone help me solve this question or give me some hint to do it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T02:17:09.397

你肯定有一个好的开始：你需要一个数组。

与 C/C++ 的两个区别：

1）您不需要“array_size”：Java 数组“知道”它们有多长

2) 你不能声明“const int* array”。相反，您必须指定 "int[] array" ...然后对其进行初始化。

这是一个很好的链接：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

PS：

这是您可能会考虑的 Java 类的框架：

```
public class StampVendingMachine {

  public static void main (String[] args) {
    // Your program starts in this method...
  }

  public int minStamps (int num_stamps) {
    // This is where you can compute how many stamps 
  }

  // This can be your "lookup table"
  private int[] min_number_of_stamps;
} 
```

PP:

另一个链接：

[信封上邮票的最大值](https://stackoverflow.com/questions/3826975/algorithm-for-postage-stamp-problem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T02:50:15.887

因为这是家庭作业：

> 我是Java的新手，想知道是否有人可以帮助我解决这个问题

如果您的意思是……“为我提供解决方案”……那显然是不合适的，也不符合您的长期利益。

> ...或者给我一些提示。

好的。

1.  从算法方面，想想你会如何告诉一个 6 岁的孩子去做......假设他/她不了解如何乘法和除法。RiverC 的评论是一个很好的起点。
2.  您似乎没有掌握 Java 语言的基础知识：
    *   虽然语法在很多方面都*相似*，但 Java 与 C 或 C++ 非常不同。不要期望您的 C/C++ 知识会延续到 Java。例如：
        *   Java没有函数，它有方法。
        *   Java 的数组声明*和初始化*语法与 C/C++ 不同。
        *   Java 数组在某些重要方面在语义上与 C/C++ 不同。
    *   为了让您开始，您需要阅读一本好的 Java 教科书的前几章（例如，您的 Java 讲师推荐的那本），或者阅读 Oracle Java 教程。如果你跳过这一步，我预测你会很挣扎。（如果你没有时间，因为你的作业截止日期迫在眉睫，那几乎是肯定的......）

# internet-explorer-8 - No margin after tag in IE7 and IE8\. IE9, FF, Chrome are ok

> ID：10859298
> 
> 赞同：0
> 
> 时间：2012-06-02T02:13:04.537
> 
> 标签：internet-explorer-8, internet-explorer-7

I have some simple code:

```
<h3>An h3 header</h3>
<ul>
 <li>More stuff</li>
 <li>other stuff</li>
 <li>Still other stuff
   <ul>
      <li>inner stuff1</li>
      <li>inner stuff2</li>
      <li>inner stuff3</li>
    </ul>
  </li>
  <li>Another list item</li>
  <li>some More stuff</li>
  <li>another other stuff</li>
  <li>text other stuff
    <ul>
       <li>other inner stuff1</li>
       <li>other inner stuff2</li>
       <li>other inner stuff3</li>
       <li>other inner stuff4</li>
    </ul>
  </li>
</ul>
<h3>This h3 tag no has no top margin at all in IE7 and IE8, the above h3 tag has margin</h3> 
```

The code renders fine in IE9, FF, and Chrome. Meaning there is margin between the last h3 tag and the final /ul tag. Any thoughts? There is a global css reset file which zeros out everything.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:15:26.867

您是否通过[W3C 验证器](http://validator.w3.org/)运行您的代码？

如果您的 HTML 无效，IE 可能会恢复到怪癖模式，而不管 DOCTYPE 是什么，因此会忽略 ul 上的 css 边距。另外请确保文档中的第一件事是 DOCTYPE（没有空格），否则 IE 将忽略它。

# iphone - 如何在 iOS 5 中运行多个循环和条件检查？

> ID：10859299
> 
> 赞同：0
> 
> 时间：2012-06-02T02:13:17.283
> 
> 标签：iphone, ios, xcode, ipad, loops

我有一个适用于 iPad iOS 5 的程序，它读取 MIDI，然后在键盘上与音乐同步显示音符。它工作正常，但我正在尝试添加一个“重复部分”功能，它会一遍又一遍地重复从时间戳 A 到时间戳 B 的部分。

我已经能够让时间戳作为我的重复部分的界限，但我无法让重复正常工作。当我尝试重复一个部分时，我不再得到我的键盘动画。我感觉这个问题需要超线程，但我不确定。我已经在伪代码中概述了我想在下面做的事情。

```
//Start Repeat Method
while (the repeat switch is toggled) {
     Stop music player.

     Set music player to the start point of the repeat.

     while (the current play point is before the end point of the repeat) {
          Check the current play point.
     }
}
//End Repeat Method 
```

所以基本上，我想做的是在用户点击一个开关时触发一个方法，该开关将被一遍又一遍地调用，直到他们将其关闭。在该方法中，它将停止播放器，将其设置为重复的开始，播放重复直到它看到它在重复的结尾，然后重新开始该方法。

我不认为这部分会像以前那样棘手。我遇到的另一个问题是，当我将它连接到开关时，它不允许我将其关闭，它只会永远消失。

提前感谢您的建议。

**编辑

这是我到目前为止所拥有的。它允许我循环我的部分，但我的动画正在显示，我无法与 UI 交互，我必须使用 Xcode 中的停止按钮终止程序。

```
- (IBAction)playRepeat:(id)sender {
     if (repeatToggle.on) {
          MusicPlayerStop(player);
          playerIsPlaying = NO;

          MusicPlayerSetTime(player, sequenceRepeatStartTime);
          moviePlayerViewController.moviePlayer.currentPlaybackTime = rollRepeatStartTime;

          MusicPlayerStart(player);
          [moviePlayerViewController.moviePlayer play];
          playerIsPlaying = YES;

          float difference = rollRepeatEndTime - rollRepeatStartTime;
          [NSThread sleepForTimeInterval:difference];

          MusicPlayerStop(player);
          playerIsPlaying = NO;
          [moviePlayerViewController.moviePlayer pause];

          [self playRepeat:sender];
     }
     else if (!repeatToggle.on) {
          MusicPlayerStop(player);
          playerIsPlaying = NO;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:37:19.003

您的`while`循环会耗尽 CPU，因为它一直在运行并且什么也不等待。将它放在单独的线程中可能会有所帮助，但如果您的播放器不是线程安全的，您将需要锁定机制。

并不是说没有玩家本身的通知，就很难在正确的时间重复它。您应该检查您的 MIDI 播放器是否支持任何通知或委托回调，当播放达到您指定的点时，您可以使用这些通知或委托回调来获得通知。

无论如何，我会提供可能适合您的出路。您可以使用计时器检查播放器，可能每 100 毫秒通过执行类似的操作。

```
-(void) repeatCheck {
    if (the repeat switch is ON) {
        if (the current play point is NOT before the end point of the repeat) {
            Stop music player.
            Set music player to the start point of the repeat.
        }
    }
    [self performSelector:_cmd withObject:nil afterDelay:0.1];
}

-(IBAction) repeatSwitchToggled {
    if (the repeat switch is ON) {
        [self repeatCheck];
    }
    else {
        [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(repeatCheck) object:nil];
    }
} 
```

# actionscript-3 - Flash 调试播放器、Esc 和 Enter 命令

> ID：10859300
> 
> 赞同：1
> 
> 时间：2012-06-02T02:13:20.473
> 
> 标签：actionscript-3, actionscript, flash

当我在 Flash Pro 上开发项目时，我有一个奇怪或未知的行为。当我从键盘按 esc 时，播放器停止电影，当我按 Enter 时，播放器恢复电影。

- 这背后的目的是什么？我该如何使用它，它是一个功能还是其他什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:54:36.267

这些是 Flash 中用于停止和恢复时间线播放的键盘快捷键。请注意，当您测试 swf 时，这些键盘快捷键会显示在顶部的“控制”菜单中。这是一个特点！

它不会在 Flash IDE 之外做同样的事情。

# google-apps-script - Lock Service and Script Properties in Google Apps Script

> ID：10859302
> 
> 赞同：1
> 
> 时间：2012-06-02T02:14:04.047
> 
> 标签：google-apps-script

I am writing a code on Google Apps Script. I need to give an unique number for each user.

At first, I wrote some code with tryLock and ScriptProperties class. It gave the same number for several persons when 6 users called the function at almost the same time. So, now I am using waitLock and ScriptProperties.

Is there any difference between tryLock and waitLock in terms of locking ability? Also, I am wondering the update timing of ScriptProperties. Is it updated immediately for all users?

If you give advises on this issue, I really appreciate it.

* * *

//My code with tryLock: This gave the same number for 3 users in a test by 6 users.

```
var glock = LockService.getPublicLock();
if( glock.tryLock(10000) )
{
  var val = ScriptProperties.getProperty(proName) * 1 + 1;
  ScriptProperties.setProperty(proName, val);
  glock.releaseLock();
  return val;
} else { return null; } 
```

* * *

//Another code with waitLock: This gave an unique number for each in a test by 8 users.

```
var val = null;
try{
  var glock = LockService.getPublicLock();
  glock.waitLock(10000);
  val = ScriptProperties.getProperty(proName) * 1 + 1;
  ScriptProperties.setProperty(proName, val);
  glock.releaseLock();
} catch (e) { }
return val; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:21:40.443

如果您不需要 ID 是连续的，则最好使用时间戳：

```
var glock = LockService.getPublicLock();
if (glock.tryLock(10000)) {
  var val = (new Date()).getTime();
  glock.releaseLock();
  return val;
} else { 
  return null; 
} 
```

方法`tryLock()`和`waitLock()`工作方式相同，只是第一个在无法获得锁时返回false，而第二个在这种情况下抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-18T18:29:15.940

如果要识别脚本的唯一用户，可以使用 userproperties 存储中的属性，因为每个用户都有唯一的存储。如果您以前从未见过他，那么使用时间戳或他的用户属性存储中的某些东西生成一个唯一编号。如果您在他的商店之前见过他，那么您在他上次访问时生成的唯一编号已经包含在内。如果您需要合并所有数字，请将它们复制到脚本属性存储区。

例如，请参阅[http://ramblings.mcpher.com/Home/excelquirks/gassnips/anonymoususerregistration](http://ramblings.mcpher.com/Home/excelquirks/gassnips/anonymoususerregistration)

# image-processing - 如何对摄像机流进行去隔行扫描？

> ID：10859310
> 
> 赞同：2
> 
> 时间：2012-06-02T02:16:12.423
> 
> 标签：image-processing, opencv, image-capture

我有一个模拟摄像机，当我使用 video4linux API 查询其格式时，它返回“两个字段交错”。像素格式为 BGR3（fourcc 代码）。我显然需要对这个流进行反交错，然后才能显示它或使用 OpenCV 处理它。

我安装了 Intel IPP 并将其用于我的所有格式转换（如 I420 到 RGB 等）。英特尔 API 有一些用于去隔行扫描的例程，但我不知道该使用哪一个。

我也安装了 OpenCV——OpenCV API 是否支持去隔行扫描？我似乎找不到任何东西。

有关处理隔行扫描视频的任何指导？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-24T02:23:59.737

有一种去隔行视频的简单方法：

完全删除偶数/奇数场。您可以通过删除每一帧中的偶数行或奇数行来做到这一点。通过这样做，您将减少一半的分辨率。

# javascript - 使用 ASP.Net/VB.Net/jQuery 更改 PNG 的色调或颜色

> ID：10859316
> 
> 赞同：0
> 
> 时间：2012-06-02T02:17:44.643
> 
> 标签：javascript, jquery, asp.net, vb.net, xhtml

我正在开发一个网页，该网页需要多个 PNG 图像并将它们合并为一个图像，以便用户可以下载平面图像。我想添加色调或颜色调整（如 Photoshop 中的颜色平衡），这样我就可以调整不同的 PNG 图像层，而无需为每个色调创建单独的图像。现在我正在使用 ASP.net/VB.net 和一些 jQuery 和 System.Drawing.Image 方法来合并图像。如果不使用 silverlight 或 flash，我似乎找不到任何关于在网络上执行此操作的信息，我也不想使用。如果有人可以将我链接到教程或提供一些基本代码以使我朝着正确的方向前进，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:23:50.383

ImageMagick ;) [http://www.imagemagick.org/script/api.php#dot-net](http://www.imagemagick.org/script/api.php#dot-net)

# css - 导航 li 对齐

> ID：10859318
> 
> 赞同：1
> 
> 时间：2012-06-02T02:18:33.357
> 
> 标签：css, alignment, html-lists

我有一个问题，我无法正确地得到我的“li”宽度。我有我正在处理的设计，它们看起来`20px`与右侧分开，`display:inline-block`但我似乎无法得到正确的数字。[JS小提琴](http://jsfiddle.net/JnVMk/)

**HTML：**

```
<div class="footer">
            <nav>
                <ul>
                    <li><a href="#">Terms of Use</a></li>
                    <li><a href="#">Site Map</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Help</a></li>
                    <li><a href="#">Company</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>    
            </nav>

            </div>​ 
```

**CSS：**

```
.footer nav{
    float:right;
    width:530px;
    padding:13px 0 0 0;
}
.footer nav ul{
    list-style:none;
}
.footer nav li{
    display:inline-block;
    width:80px;
    text-align:center;
}
.footer nav li a{
    text-decoration:none;
    color:#000;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T02:32:43.227

如果您希望它们之间的距离固定，则不能将固定宽度的列表项用于具有不同宽度的内容，并且不能将文本居中。只需将宽度保留在`auto`，并设置 a`margin-right`以`20px`使它们彼此相距该距离。

# ruby-on-rails-3 - 宝石::规范错误-Rails 3

> ID：10859319
> 
> 赞同：1
> 
> 时间：2012-06-02T02:18:43.827
> 
> 标签：ruby-on-rails-3

我有一个新的 Rails 安装，当我尝试运行控制台或任何 rake 任务时，我收到一条如下所示的错误消息：

```
$ rails c
[/.rvm/gems/ruby-1.9.2-p320/specifications/json_pure-1.7.0.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/engineyard-1.4.29.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/launchy-2.0.5.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/engineyard-serverside-adapter-1.6.4.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/escape-0.0.4.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/highline-1.6.11.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/net-ssh-2.2.2.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/json_pure-1.7.0.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/engineyard-1.4.29.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/launchy-2.0.5.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/engineyard-serverside-adapter-1.6.4.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/escape-0.0.4.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/highline-1.6.11.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/net-ssh-2.2.2.gemspec] isn't a Gem::Specification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/json_pure-1.7.0.gemspec] isn't a Gem::Specification (NilClss instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/engineyard-1.4.29.gemspec] isn't a Gem::Specification (Nillass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/launchy-2.0.5.gemspec] isn't a Gem::Specification (NilClas instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/engineyard-serverside-adapter-1.6.4.gemspec] isn't a Gem::pecification (NilClass instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/escape-0.0.4.gemspec] isn't a Gem::Specification (NilClassinstead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/highline-1.6.11.gemspec] isn't a Gem::Specification (NilClss instead).
[/.rvm/gems/ruby-1.9.2-p320/specifications/net-ssh-2.2.2.gemspec] isn't a Gem::Specification (NilClas instead).
/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/irb/completion.rb:9:in `require': no such file to load --readline (LoadError)
        from /.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/irb/completion.rb:9:in `<top (required)>'
        from /.rvm/gems/ruby-1.9.2-p320/gems/railties-3.0.4/lib/rails/commands/console.rb:3:in `requie'
        from /.rvm/gems/ruby-1.9.2-p320/gems/railties-3.0.4/lib/rails/commands/console.rb:3:in `<top required)>'
        from /.rvm/gems/ruby-1.9.2-p320/gems/railties-3.0.4/lib/rails/commands.rb:20:in `require'
        from /.rvm/gems/ruby-1.9.2-p320/gems/railties-3.0.4/lib/rails/commands.rb:20:in `<top (requird)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

有什么想法可能导致这种情况吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:26:44.233

我认为它是 readline

/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/irb/completion.rb:9:in `require': 没有要加载的文件 --readline (LoadError)

这里有一些资源：

[https://rvm.io//packages/readline/](https://rvm.io//packages/readline/)

[rails 控制台、RVM 和 readline 的问题](https://stackoverflow.com/questions/4498919/problems-with-the-rails-console-rvm-and-readline)

如果上述方法对您不起作用，那么您可以执行我所做的并在此处使用解决方案：

[Rails3 和 readline 问题](https://stackoverflow.com/questions/5487507/rails3-and-readline-problem)

这是在您的项目中包含 rb-readline gem。（我不确定这是否被认为是黑客攻击）

[https://github.com/luislavena/rb-readline](https://github.com/luislavena/rb-readline)

希望有帮助。我花了一段时间才让控制台工作一次，而且有时令人沮丧。更不用说在更新了一些 Ubuntu 软件包后我不得不再次这样做。

# symfony - symfony2 测试用例请求 cookie

> ID：10859321
> 
> 赞同：1
> 
> 时间：2012-06-02T02:19:18.333
> 
> 标签：symfony, phpunit

在我的测试中，我想指定一个 cookie 来配合请求。我追溯了代码以查看 cookie jar 是如何在客户端的 __construct 中使用的。尽管此处的 var_dump 和服务器端的 var_dump 显示没有 cookie 随请求一起发送。我还尝试使用 HTTP_COOKIE 发送一个更简单的字符串，如图所示。

```
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;
use Symfony\Component\BrowserKit\Cookie;
use Symfony\Component\BrowserKit\CookieJar;
class DefaultControllerTest extends WebTestCase {
    public function test() {
        $jar = new CookieJar();
        $cookie = new Cookie('locale2', 'fr', time() + 3600 * 24 * 7, '/', null, false, false);
        $jar->set($cookie);
        $client = static::createClient(array(), array(), $jar);  //this doesn't seem to attach cookies as expected!
        $crawler = $client->request(
            'GET', //method
            '/', //uri
            array(), //parameters
            array(), //files
            array(
                'HTTP_ACCEPT_LANGUAGE' => 'en_US',
                //'HTTP_COOKIE' => 'locale2=fr' //this doesn't work either!
            ) //server
        );

        var_dump($client->getRequest());
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T14:48:16.400

您的代码有错误：

```
$client = static::createClient(array(), array(), $jar); // Third parameter ? 
```

方法`createClient`定义如下（对于 Symfony 2.0.0）：

```
static protected function createClient(array $options = array(), array $server = array()) 
```

因此，它只需要两个参数并且没有 cookie 的位置，因为`createClient`方法从测试容器中获取了一个客户端实例：

```
$client = static::$kernel->getContainer()->get('test.client');
$client->setServerParameters($server);

return $client; 
```

这是`test.client`服务的定义：

```
<service id="test.client" class="%test.client.class%" scope="prototype">
    <argument type="service" id="kernel" />
    <argument>%test.client.parameters%</argument>
    <argument type="service" id="test.client.history" />
    <argument type="service" id="test.client.cookiejar" />
</service>

<service id="test.client.cookiejar" class="%test.client.cookiejar.class%" scope="prototype" /> 
```

现在我们看到，cookie jar 服务被注入`test.client`并具有一个范围`prototype`，这意味着将在每次访问该服务时创建新对象。

但是，`Client`类有一个方法`getCookieJar()`，您可以使用它为请求设置特定的 cookie（未经测试，但预计可以工作）：

```
$client = static::createClient();
$cookie = new Cookie('locale2', 'fr', time() + 3600 * 24 * 7, '/', null, false, false);
$client->getCookieJar()->set($cookie); 
```

# cuda - CUDA：CUDA 中的一维三次样条插值

> ID：10859322
> 
> 赞同：3
> 
> 时间：2012-06-02T02:19:55.947
> 
> 标签：cuda, interpolation, cubic

我正在制作医学成像设备。我想用 CUDA 来制造更快的设备

我从 CCD 接收 1024 大小的一维数据 512 次。在我执行 IFFT 之前，我必须将高性能插值算法（如三次样条插值）应用于每个 1024 大小的数据（然后 1d 插值 512 次）。

1.  是否有任何 CUDA 库来执行三次样条插值？（我发现有一个库，但它是针对 2 或 3 维图像的。由于我需要执行其他复杂的过滤功能，我需要全局内存上的数据，而不是纹理内存上的数据。）

2.  是否有任何 NUFFT（非统一快速傅里叶变换）库（不需要为 CUDA 编写）？我在想，如果我有 NUFFT 功能，我就不必分别进行插值和 IFFT，这可以制造更快的设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:33:54.370

Since more people have asked this, I have extended my CUDA cubic interpolation code with 1D cubic interpolation as well. You can find the updated code here: [http://www.dannyruijters.nl/cubicinterpolation/](http://www.dannyruijters.nl/cubicinterpolation/)

A working CUDA example that also contains 1D cubic interpolation can be found in the cudaAccuracyTest sample in the examples subdirectory in [CI.zip](http://www.dannyruijters.nl/cubicinterpolation/CI.zip).

For those of you who are more interested in a SSE approach, I have some working SSE optimized multi-threaded cubic interpolation code (albeit in 3D, not 1D) in the referenceCubicTexture3D sample in the examples subdirectory.

edit: The cubic interpolation code is now available on [github](https://github.com/DannyRuijters/CubicInterpolationCUDA). The 1D cubic interpolation code is [here](https://github.com/DannyRuijters/CubicInterpolationCUDA/blob/master/code/internal/cubicTex1D_kernel.cu).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:55:04.130

## 关于#1

Ruijters 的双/三次样条插值，我认为你指的是[http://dannyruijters.nl/cubicinterpolation](http://dannyruijters.nl/cubicinterpolation)，（已编辑！）现在适用于一维数据，谢谢！请参阅此页面上 Danny Ruijters 的回答。

## 关于#2

这是我知道的一些 NUFFT 实现，以及对它们的简要想法。

1.  @ardiyu07 提到的第一个库，Greengard 等人的快速高斯网格实现是在 Fortran 中，我不知道，所以我没有看太久（尽管它确实提供了 type-III nonuniform-to -非均匀变换）。
2.  第二个是 Ferrara 在 Matlab/MEX 中实现 Greengard 算法，我无法得到它给我正确的解决方案（请参阅我刚刚发布的关于 Mathworks FileExchange 的评论）。
3.  Potts, et al., [http://www-user.tu-chemnitz.de/~potts/nfft/](http://www-user.tu-chemnitz.de/~potts/nfft/)我无法让它在 Windows 中编译，所以我放弃了。它还具有 III 型 NUFFT。
4.  Fessler 等人，[http:](http://web.eecs.umich.edu/~fessler/code/) //web.eecs.umich.edu/~fessler/code/用 Matlab/MEX 编写，至少为 Linux 和 Windows 提供了预编译的二进制文件。绝对是由非专业程序员编写的，但它是我能够正确工作的 4 个中唯一的一个。我什至在几个地方更改了他们的 Matlab 源代码后（基本上是通过查看 Octave 错误出现的位置）让它在 GNU Octave 中工作，因为 Octave 可以使用预编译的 MEX 二进制文件。这也使用了与 Greengard 或 Potts 不同的算法，基于 min-max 标准（其解决方案保证最小化最大 DFT 误差），但缺少类型 III NUFFT（仅类型 I 和 II：其中一个域具有统一）。
5.  我相信第五个 NUFFT/“gridding”的实现是 Hargreaves 等人的：[http](http://www-mrsrl.stanford.edu/~brian/gridding/) ://www-mrsrl.stanford.edu/~brian/gridding/ （论文在[http://dx.doi.org/10.1109/ TMI.2005.848376](http://dx.doi.org/10.1109/TMI.2005.848376)）。它在 Matlab/MEX 中。事实上，它*不像*这个列表中的前四个那样通用，因为它非常嵌入在它的 MRI 环境中。
6.  这是第六个实现，在 Cython（快速 Python）中，具有类型 III 非均匀到非均匀的转换和一些其他不错的特性，唉，在 GPL 下：[https ://github.com/mrbell/gfft](https://github.com/mrbell/gfft)

我正在以缓慢的速度将 Fessler 的算法移植到 Python/Cython，也许还有 CUDA（“可能”，因为只需对标准 (CU)FFT 和线性插值进行零填充似乎就足够好了）。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T02:46:26.237

1.  我不知道那个算法，但是如果你发现你认为你的设备足够快，那么你为什么不将实现从使用纹理内存更改为只是一个简单的数组，也许你可以使用共享来提高速度记忆？

2.  我发现了一些用 matlab 和 fortran 77 编写的：

    [http://www.cims.nyu.edu/cmcl/nufft/nufft.html](http://www.cims.nyu.edu/cmcl/nufft/nufft.html)

    [http://www.mathworks.com/matlabcentral/fileexchange/25135-nufft-nufft-usffft](http://www.mathworks.com/matlabcentral/fileexchange/25135-nufft-nufft-usffft)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T23:41:47.413

老实说，GPU 的并行度似乎有点低。具有 SSE 优化的 6 核在这里可能会胜过 GPU。

# google-fusion-tables - 绕过 500 行限制

> ID：10859323
> 
> 赞同：1
> 
> 时间：2012-06-02T02:19:59.650
> 
> 标签：google-fusion-tables

我编写了一个我很满意的 Google Fusion Tables 脚本（如下），但它只在我的表中加载了 500 行点，该表有超过 20,000 行。这是我第一次来这个社区，我真的很惊讶地发现了这个限制。有没有办法加载所有的行？

```
 <!doctype html>
    <html class="no-js" lang="en">
      <head>
        <meta charset="utf-8">
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
        <title>Points in box</title>

        <link href="./stylesheets/example.css" media="screen" rel="stylesheet" type="text/css" />

        <link rel="shortcut icon" href="/images/favicon.ico" />
        <noscript><meta http-equiv="refresh" content="0;url=/no_javascript.html"></noscript>

            <!-- Find box coordinates javascript -->
            <script type ="text/javascript" src="http://www.movable-type.co.uk/scripts/latlon.js"></script>

            <!-- Type label text javascript -->     
            <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
          <script type="text/javascript" src="./js/label.js"></script>

            <!-- Visulization javascript -->
            <script type="text/javascript" src="http://www.google.com/jsapi"></script>

            <!-- Initialize visualization -->
            <script type="text/javascript">
              google.load('visualization', '1', {});
            </script>

      </head>
      <body class="developers examples examples_downloads examples_downloads_points-in-box examples_downloads_points-in-box_index">

            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        var store_table = 4121905;

        //send a call to GViz to retrieve lat/long coordinates of the stores
        function getStoreData() {
          //set the query using the input from the user

            var queryText = encodeURIComponent("SELECT Latitude,Longitude,Impressions FROM " + store_table);
          var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);

          //set the callback function
          query.send(doLoop);

        }

        function drawBox(topleftx, toplefty, bottomrightx, bottomrighty) {

          var bounds = new google.maps.LatLngBounds(
            new google.maps.LatLng( topleftx, toplefty ),
            new google.maps.LatLng( bottomrightx, bottomrighty )
          );

        var overlay = new google.maps.Rectangle({
          map: carto_map,
          bounds: bounds,
          strokeColor: "#0000ff",
          strokeOpacity: 0.20,
          strokeWeight: 2,
          fillColor: "#0000ff",
          fillOpacity: 0.050,
        });
        }

        function doLoop(response) {
            numRows = response.getDataTable().getNumberOfRows();

        //Basic
           var cartodbMapOptions = {
             zoom: 7,
                     center: new google.maps.LatLng( 37.926868, -121.68457 ),
             // center: new google.maps.LatLng( 40.7248057566452, -74.003 ),
             // disableDefaultUI: true,
             mapTypeId: google.maps.MapTypeId.ROADMAP
           }

            // Init the map
            carto_map = new google.maps.Map(document.getElementById("map"),cartodbMapOptions);

            for(i = 0; i < numRows; i++) {

                var centerX = response.getDataTable().getValue(i,0);
                var centerY = response.getDataTable().getValue(i,1);
                var imps = response.getDataTable().getValue(i,2);

                var centerPoint = new LatLon(centerX,centerY);
                var latLng = new google.maps.LatLng(centerX,centerY);

                var toplefty = centerPoint.destinationPoint(-45, 6)._lon;
                var topleftx = centerPoint.destinationPoint(-45, 7.7)._lat;

                var bottomrighty = centerPoint.destinationPoint(135, 6)._lon;       
                var bottomrightx = centerPoint.destinationPoint(135, 7.7)._lat;     

                drawBox(topleftx, toplefty, bottomrightx, bottomrighty);     

         var marker = new google.maps.Marker({
           position: latLng,
           draggable: false,
                 markertext: imps,
                 flat: true,
           map: carto_map
         });

           var label = new Label({
             map: carto_map,
                 position: latLng,
                 draggable: true
           });
           label.bindTo('text', marker, 'markertext');
             marker.setMap(null);

            }

        }

        $(function() {
                        getStoreData();
             });

          </script>

                <div id="map"></div>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:22:09.793

我通过使用json调用方法解决了这个问题。代码如下。

```
 <!DOCTYPE html>
        <html>
          <head>
            <meta charset="UTF-8">
            <title>David's Build Up</title>

            <link href="./stylesheets/example.css" media="screen" rel="stylesheet" type="text/css" />

            <link rel="shortcut icon" href="/images/favicon.ico" />
            <noscript><meta http-equiv="refresh" content="0;url=/no_javascript.html"></noscript>

                <!-- Find box coordinates javascript -->
                <script
                src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
            </script>

                <script type ="text/javascript" src="http://www.movable-type.co.uk/scripts/latlon.js"></script>

                <!-- Type label text javascript -->     
                <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
              <script type="text/javascript" src="./js/label.js"></script>

                <!-- Visulization javascript -->
                <script type="text/javascript" src="http://www.google.com/jsapi"></script>

                <!-- Initialize visualization -->
                <script type="text/javascript">
                  google.load('visualization', '1', {});
                </script>

            <script type="text/javascript">

                    function drawBox(topleftx, toplefty, bottomrightx, bottomrighty) {

                      var bounds = new google.maps.LatLngBounds(
                        new google.maps.LatLng( topleftx, toplefty ),
                        new google.maps.LatLng( bottomrightx, bottomrighty )
                      );

                    var overlay = new google.maps.Rectangle({
                      map: carto_map,
                      bounds: bounds,
                      strokeColor: "#0000ff",
                      strokeOpacity: 0.20,
                      strokeWeight: 2,
                      fillColor: "#0000ff",
                      fillOpacity: 0.050,
                    });
                    }

              function initialize() {

                        // Set the map parameters
                        var cartodbMapOptions = {
                            zoom: 5 ,
                            center: new google.maps.LatLng( 40.313043, -97.822266 ),
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        }
                    // Initialize the map
                    carto_map = new google.maps.Map(document.getElementById("map"),cartodbMapOptions);

                        // Query to grab the data
                var query = "SELECT Latitude, Longitude, Impressions FROM " +
                    '[encrypted table ID here]';
                var encodedQuery = encodeURIComponent(query);

                // Construct the URL to grab the data
                var url = ['https://www.googleapis.com/fusiontables/v1/query'];
                url.push('?sql=' + encodedQuery);
                url.push('&key=AIzaSyAm9yWCV7JPCTHCJut8whOjARd7pwROFDQ');
                url.push('&callback=?');

                        // Set the number of rows
                        var numRows = 3500;

                // Get the variables from the table, in a loop
                $.ajax({
                  url: url.join(''),
                  dataType: 'jsonp',
                  success: function (data) {
                    var rows = data['rows'];
                    var ftData = document.getElementById('ft-data');
                    for (var i in rows) {
                      var centerX = rows[i][0];
                      var centerY = rows[i][1];
                                    var imps = rows[i][2];
                                    // Set the center points
                                    var centerPoint = new LatLon(centerX,centerY);
                                    var latLng = new google.maps.LatLng(centerX,centerY);
                                    // Set top left points
                                    var toplefty = centerPoint.destinationPoint(-45, 6)._lon;
                                    var topleftx = centerPoint.destinationPoint(-45, 7.7)._lat;
                                    // Set bottom right points
                                    var bottomrighty = centerPoint.destinationPoint(135, 6)._lon;       
                                    var bottomrightx = centerPoint.destinationPoint(135, 7.7)._lat;
                                    // Draw the box
                                    drawBox(topleftx, toplefty, bottomrightx, bottomrighty);
                                    // Drop markers
                                    var marker = new google.maps.Marker({
                               position: latLng,
                               draggable: false,
                                     markertext: imps,
                                     flat: true,
                               map: carto_map
                              });
                               var label = new Label({
                                 map: carto_map,
                                     position: latLng,
                                     draggable: true
                               });
                               label.bindTo('text', marker, 'markertext');
                                 marker.setMap(null);
                    };
                  }
                    });

              }
            </script>
          </head>

          <body onload="initialize()">
                <div id="map"></div>
                <div id="ft-data"></div>
          </body>
        </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:37:35.373

Gviz API 确实对给定查询有 500 行的限制。

任何表都限制为 100,000 个*可映射*行，但这远远超出了您报告的 20,000 行。

新的 Javascript API，目前接受 Trusted Testers，为查询返回的任意数量的行提供 JSON 格式支持。您可以通过请求成为该组的成员来申请 TT 计划： [https ://groups.google.com/group/fusion-tables-api-trusted-testers](https://groups.google.com/group/fusion-tables-api-trusted-testers)

-丽贝卡

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T06:47:54.040

fusiontables/gvizdata URL 用于 Gviz 图表，因此限制为 500 个点。还有其他没有这种限制的查询方法。有关示例，请参见[https://developers.google.com/fusiontables/docs/sample_code](https://developers.google.com/fusiontables/docs/sample_code)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:47:32.407

我经常通过删除所有行并插入新行来刷新一个 2500 行的表。我的代码中构造 INSERT sql 的循环有一个嵌套循环，它只计数到 400，发送该 sql，然后开始使用接下来的 400 条记录构建另一个循环。

# css - chrome的资源css查看器中这个奇怪的字符是什么？

> ID：10859326
> 
> 赞同：2
> 
> 时间：2012-06-02T02:20:17.217
> 
> 标签：css, google-chrome

![](../Images/d403e8d1b76e84fbf93ae78d2d6a7553.png)

这里的这个小混蛋让我很头疼。它不会出现在 css 文件的末尾，而是在那个括号之后保留在那里。之后的任何东西都停止运行。我想知道为什么很多代码没有运行。我决定移动代码。

它从何而来？为什么？

我不想删除它，直到我复制它是如何到达那里的。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:17:36.640

That's what you get when you look at an UTF-8 encoded SINGLE HIGH-REVERSED-9 QUOTATION MARK (U+201B) with an editor that thinks it's Windows-1252.

And it stops running because it's an error in CSS. The browser ignores everything that's an error.

# c# - 具有相同类类型成员的类

> ID：10859331
> 
> 赞同：0
> 
> 时间：2012-06-02T02:22:21.607
> 
> 标签：c#, c++

我在 C++ 中有以下无法编译的代码：

```
class Container;
class Container
{
    std::string m_Name;
    Container m_Container;
}; 
```

这是因为我有一个相同类型的成员，编译器无法在此处推断对象的大小。

是什么使这项工作使用 C# ？

```
namespace Sample
{
    public class Container
    {
        public string m_Name;
        public Container m_Container;
    }
}

namespace Sample
{
    class Program
    {
        static void Main(string[] args)
        {
            Container con = new Container();

        }
    }
} 
```

这在 C# 中编译得很好。这里如何计算对象的大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T02:23:50.920

*它在C#*中工作的事实是所有对象都作为指针处理。也就是说，您的 C# 代码将等效于此*C++*代码：

```
class Container;
class Container
{
    std::string* m_Name;
    Container* m_Container;
}; 
```

指针的大小是已知的，因此一切都可以编译。根本不需要知道对象的大小。但是，您不想在*C++*中到处乱扔指针，特别是原始指针。

请注意，在您的原始实现中，对象的大小不仅是未知的，而且也是无限的，因为每个对象都`Container`包含另一个对象，而对象对象又`Container`包含另一个对象`Container`，依此类推……

# .net - 在设计时输出一个字符串

> ID：10859353
> 
> 赞同：0
> 
> 时间：2012-06-02T02:28:43.847
> 
> 标签：.net, wpf, visual-studio-2010, design-time

我的 WPF 应用程序在设计时运行以下代码：

```
applicationDirectory = (from assembly in AppDomain.CurrentDomain.GetAssemblies()
                        where assembly.CodeBase.EndsWith(".exe")
                        select System.IO.Path.GetDirectoryName(
                                    assembly.CodeBase.Replace("file:///", ""))
                               ).FirstOrDefault(); 
```

我想看看在设计时实际返回的是什么。

有没有办法做到这一点？

**注意：**我试过 Debug.Write(applicationDirectory); 我在输出窗口中没有看到任何内容。
**注二：**我不是在问价值是什么`applicationDirectory`，我是在要求一种机制来查看价值（所以我也可以在其他地方使用它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:31:19.380

您可以将路径作为视图模型上的属性返回，并将其绑定到 UI 中的控件。为我工作。

# javascript - 在浏览器中使用 java 脚本拦截 ajax 响应

> ID：10859356
> 
> 赞同：1
> 
> 时间：2012-06-02T02:30:19.557
> 
> 标签：javascript, ajax, proxy, intercept

我是 ajax 新手，需要一些帮助来了解 javascript 如何在浏览器中运行。我要解决的问题是使用第二个 javascript（注入此页面）拦截 ajax 响应。

当用户第一次加载页面时，我通过附加我自己的 javascript 来修改服务器响应（通过代理）。稍后在正常操作期间，用户尝试通过此页面获取一些内容，当它包含使用注入的 javascript 的特定 http 标头或内容时，我希望能够拦截此响应并显示一个弹出窗口。

这甚至可行吗？我检查了其他相关问题，发现这可以使用浏览器扩展（内容脚本等）来完成，但我想知道这是否可能在页面本身上使用 javascript 注入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T02:53:09.533

您打算如何拦截 AJAX 响应？我认为可以使用 JavaScript 的唯一方法是您可以访问原始`XMLHttpRequest`对象。考虑：

```
var request = new XMLHttpRequest;
request.onreadystatechange = handler;
request.open("GET", "/somefile.php", true);
request.send();

function handler() {
    if (request.readyState == 4 && request.status == 200) {
        // do something
    }
} 
```

现在要拦截此 AJAX 响应，您需要覆盖`request.onreadystatechange`事件处理程序，并且为此您需要访问该`request`对象。

`request`由于您尝试使用注入脚本拦截响应，因此您的脚本将只能访问全局变量，这意味着如果对象是全局变量，您将只能拦截 AJAX 响应。

即使这样，您也永远无法确定您注入的脚本将在 AJAX 请求之前、之后或期间执行。您能做的最好的事情就是检查`readyState`请求，如果为时已晚就放弃。

如果你试图发起 XSS 攻击，拦截 AJAX 响应肯定是不可行的。干杯。

# django - Django - 如何将模型的选择显示为复选框

> ID：10859357
> 
> 赞同：2
> 
> 时间：2012-06-02T02:30:22.770
> 
> 标签：django, django-models, django-forms

我遵循[了这一点](https://stackoverflow.com/questions/147752/in-django-is-there-a-way-to-display-choices-as-checkboxes)，但我仍然无法在我的表单上将 CHOICES 显示为复选框。

模型.py

```
class Car(models.Model):
    TYPE_CHOICES = (
       ('s', 'small'),
       ('m', 'medium'),
       ('b', 'big'),
     )
     type = models.CharField(max_length=1, choices=TYPE_CHOICES) 
```

表格.py

```
from django import forms
from django.forms.widgets import CheckboxSelectMultiple

from cars.models import Car

class AddCar(forms.ModelForm):
    class Meta:
        model = Car
        type = forms.MultipleChoiceField(choices=Car.TYPE_CHOICES, widget=forms.CheckboxSelectMultiple()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T06:51:10.457

您需要使用`forms.RadioSelect()`而不是`forms.CheckboxSelectMultiple()`因为它的单值。

要覆盖 ModelForm[的小部件，请查看文档](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)

```
class AddCar(forms.ModelForm):
    class Meta:
        model = Car
        widgets = {'type': forms.RadioSelect} 
```

或者在你的问题中，这`type`条线应该在这`class Meta`条线的上方，在里面`AddCar`

```
class AddCar(forms.ModelForm):
    type = forms.ChoiceField(choices=Car.SCENERY_CHOICES, widget=forms.RadioSelect)

    class Meta:
        model = Car 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:41:29.610

你`Route.SCENERY_CHOICES`没有使用`Car.TYPE_CHOICES`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T20:55:22.250

如果您真的想使用多选，而不使用任何自定义字段，这就是我在类似场景中所做的。警告：存储在数据库中的值违反了正常形式。但由于它应该是 2-3 值字符串（增长的机会非常渺茫，我更喜欢这种快速破解）

我所做的是，该模型只使用了一个 CharField，而不关心它将用于什么。另一方面，ModelForm 处理多项选择逻辑。

在我的“models.py”中

```
class Notification(models.Model):
    platforms = models.CharField(max_length=30, blank=False) 
```

在“forms.py”中

```
class NotificationForm(forms.ModelForm):
    class Meta(object):
        model = models.Notification

    platforms = forms.MultipleChoiceField(initial='android', choices=(('ios', 'iOS'), ('android', 'Android')), widget=forms.CheckboxSelectMultiple)

    def __init__(self, *args, **kwargs):
        instance = kwargs['instance']
        # Intercepting the instance kw arg, and turning it into a list from a csv string.
        if instance is not None:
            instance.platforms = instance.platforms.split(",")
            kwargs['instance'] = instance

        super(NotificationForm, self).__init__(*args, **kwargs)
        # Do other stuff

    def clean(self):
        cleaned_data = super(NotificationForm, self).clean()
        platforms = cleaned_data['platforms']
        # Convert the list back into a csv string before saving
        cleaned_data['platforms'] = ",".join(platforms)
        # Do other validations
        return cleaned_data 
```

如果选中两个复选框，则存储在数据库列中的数据将是字符串“ios,android”。否则，它将是“ios”、“android”。正如我所说，当然没有标准化。如果有一天你的领域可以有很多值，事情实际上可能会变得丑陋。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-07T23:08:54.173

这就是forms.forms

```
class AddCarForm(forms.Form):
    type = forms.MultipleChoiceField(required=False,
    widget=forms.CheckboxSelectMultiple, choices=TYPE_CHOICES) 
```

这就是forms.ModelForm

```
class AddCar(forms.ModelForm):
    type = forms.MultipleChoiceField(required=False,
    widget=forms.CheckboxSelectMultiple, choices=TYPE_CHOICES)

    class Meta:
        model = Car 
```

然后在模板中使用它非常重要

```
{{ form.type }} 
```

即不要`type`像html一样调用`<input type="checkbox" name="type" id="id_type">`

# .htaccess - .htaccess - 无限循环

> ID：10859359
> 
> 赞同：1
> 
> 时间：2012-06-02T02:30:52.817
> 
> 标签：.htaccess

我在这个网站上遇到了一个无限循环 - [http://www.salesmelbourne.com](http://www.salesmelbourne.com)

下面是 .htaccess，我知道问题出在最后 4 行 - 嗯，我想是的 - 有人可以提供一些建议......谢谢

```
 php_value session.gc_maxlifetime 259200
 php_flag register_globals off
 php_flag zlib.output_compression on
 php_flag output_compression_level 6

 <Files *>
 Header set Cache-Control: "private, pre-check=0, post-check=0, max-age=0"
 Header set Expires: 0
 Header set Pragma: no-cache
 </Files>

 # File Upload 25MB
 php_value post_max_size 20M
 php_value upload_max_filesize 20M
 php_value max_execution_time 1000

 # use utf-8 encoding for anything served text/plain or text/html
 AddDefaultCharset utf-8

 # force utf-8 for a number of file formats
 AddCharset utf-8 .html .css .js .xml .json .rss .php
 RewriteEngine on
 RewriteCond %{HTTP_HOST} !^www\. [NC]
 RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L]

 # Internally redirect all pages to index.php
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteRule ^/ajax/pages/(.*)$ /www/ajax/pages/404_error.php [R=301]
 RewriteRule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:11:20.433

```
# Internally redirect all pages to index.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^/ajax/pages/(.*)$ /www/ajax/pages/404_error.php [R=301]
RewriteRule . index.php [L] 
```

第 2 行（从末尾开始）是做什么的？无论如何它都不应该工作，因为 RewriteRule 中的 URL 模式以没有前导斜杠开头，但你有它（`^/ajax/pages/(.*)$`）。

由于我不知道该特定规则将如何工作，因此有两种可能的解决方案（两者都可以工作——这都是关于上述行的——它是否需要这两个条件才能正常工作）：

```
# I have no idea how this rule is supposed to work, but assume it's the way to go
RewriteRule ^ajax/pages/(.*)$ /www/ajax/pages/404_error.php [R=301]

# Internally redirect all pages to index.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.php [L] 
```

或像这样（如果这些条件对该规则很重要）

```
# I have no idea how this rule is supposed to work, but assume it's the way to go
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ajax/pages/(.*)$ /www/ajax/pages/404_error.php [R=301]

# Internally redirect all pages to index.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.php [L] 
```

# git - 我们怎么知道我们仍然在 TortoiseGit 中为一个分支关联了 stash？

> ID：10859366
> 
> 赞同：1
> 
> 时间：2012-06-02T02:32:39.337
> 
> 标签：git, tortoisegit

我一直在我的 ruby​​ on rails 项目中使用 TortoiseGit。

以此作为我的问题示例：

1.  我在一个名为“master”的主要分支上工作。
2.  后来我扩展到另一个名为“演示”的分支
3.  所以，我一直在“演示”分支上工作了一段时间，并进行了一些编辑。
4.  完成该分支的编辑后，我决定将所有内容保存到“演示”分支的存储中。所以，我可以稍后再回来处理它。
5.  接下来，我随后又切换回来继续在“master”上工作。

我的问题在这里：当我这次再次在“master”中完成工作时，我决定再次切换到“demo”分支。到目前为止，我怎么知道还有一些与“演示”分支相关的存储？你知道，在一个分支机构工作了很长时间之后，我们可能很容易忘记我们在另一个分支机构所做的或拥有的东西。我只是无法解决这个问题。有什么可以更系统地提醒开发者的吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:46:50.887

这不是 TortoiseGit 特有的，但是如果您打开命令提示符并切换到项目的主目录，您可以发出`git stash list`命令来查看您保存的任何存储。请记住，它们与它们所在的分支没有直接关系。您可以将保存在分支（例如演示）上的存储应用到另一个分支（例如 master）。当您在错误的分支上开始工作并希望将这些更改应用到另一个分支以分离您的工作时，这很方便。

# python - 如何将 Python 包编译为 dll

> ID：10859369
> 
> 赞同：32
> 
> 时间：2012-06-02T02:33:23.427
> 
> 标签：python, dll, module, compilation

好吧，我有一个 Python 包。在以易于导入的方式分发之前，我需要将其编译为 dll。**如何？**你可能会建议`*.pyc`。但我在某处读到任何`*.pyc`可以轻松反编译的地方！

**更新：** 遵循这些：
1）我写了一个python包
2）想要分发它
3）不想分发源代码
4）* .pyc是可反编译的>>源代码可以被提取！
5）dll是标准的

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T09:49:05.840

在 Cython 中编写您想要隐藏的所有内容，并将其编译为`pyd`. 这与制作已编译的 python 代码一样接近。

此外，dll 不是标准，在 Python 世界中也不是。它们也不是便携式的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-09-21T12:27:47.330

现在存在一个简单的解决方案：使用 Nuitka 编译器，[如 Nuitka 用户手册中所述](https://nuitka.net/doc/user-manual.html#use-case-2-extension-module-compilation)

> 用例 2 - 扩展模块编译如果你想编译单个扩展模块，你所要做的就是：

> ```
> python -m nuitka --module some_module.py
> ```
> 
> 然后可以使用生成的文件 some_module.so 代替 some_module.py。

你需要为你想要支持的每个平台编译并编写一些初始化代码来导入so/pyd文件~~适合给定的平台/python版本等~~

[编辑 2021-12]：实际上在 python 3 中，正确的 so/dll 是根据文件名自动确定的（如果它包括 python 版本和平台 - 目前找不到此功能的 PEP，但 Nuitka 为编译模块）。因此，对于 python 2.7，库名称将是 something.pyd 或 something.so，而对于 python 3，这将更改为 something.cp36-win32.pyd 或 something.cpython-36m-x86_64-linux-gnu.so（对于 32 位 python 3.6在 x86 上）。

结果不是所请求的 DLL，而是 Python 原生编译的二进制格式（它不是 pyc 文件中的字节码；so/pyd 格式不容易反编译 - Nuitka 通过 C++ 翻译编译为机器代码）

编辑 [2020-01]：编译后的模块易于使用 python 标准机制的评估方法 - 例如，它可以作为任何其他模块导入并列出其方法等。为了确保实现不被暴露，还有更多工作要做完成的不仅仅是编译成二进制模块。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-02T04:05:04.263

您可以[将 python 嵌入到 C](http://docs.python.org/extending/)中。真正的技巧是在 C 值和 Python 值之间进行转换。但是，一旦你完成了这些，制作一个 DLL 就[非常简单](https://stackoverflow.com/questions/847396/compile-a-dll-in-c-c-then-call-it-from-another-program)了。

但是，为什么需要制作一个dll？你需要从非python程序中使用它吗？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-02T03:06:06.883

您可以使用[py2exe.org](http://www.py2exe.org/)将 python 脚本转换为 windows 可执行文件。当然，这仅适用于 Windows，但总比没有好。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-12T04:08:21.160

[CFFI 1.5 版支持 Python 嵌入](http://cffi.readthedocs.io/en/latest/overview.html#embedding)，您可以创建一个`.dll`可供 Windows C 应用程序使用的文件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-09T10:47:36.267

我也会使用[Cython](http://docs.cython.org/src/reference/compilation.html)来生成`pyd`文件，就像 Dikei 写的那样。但是如果你真的想保护你的代码，你最好用 C++ 编写重要的东西。最好的办法是结合**C++**和**Python**。这个想法：你可以让 python 代码打开以进行调整，这样你就不必一遍又一遍地编译所有东西。`dll`这意味着，您将用 C++ 编写“核心”（这是当今最安全的解决方案）并在您的 python 代码中使用这些文件。这实际上取决于您正在构建什么样的工具或程序以及您希望如何执行它。完成工具或程序后，我主要创建一个执行文件 ( `exe`, `app`)，但这更多是针对最终用户的。这可以通过`py2exe`和`py2app`（均兼容 64 位）。如果您实现解释器，则最终用户的机器不必在系统上安装 python。

> `pyd`文件与 a 相同，并且`dll`在 python 中完全受支持。所以你可以正常导入你的模块。[您可以在此处](https://docs.python.org/2/faq/windows.html#is-a-pyd-file-the-same-as-a-dll)找到有关它的更多信息。

使用和生成`pyd`文件是创建安全且可移植的 python 代码的最快和最简单的方法。

[您还可以在C++](https://docs.python.org/2/extending/)中编写真实`dll`文件并导入它们以使用它们（这里是一篇好[文章](https://stackoverflow.com/questions/252417/how-can-i-use-a-dll-from-python)，这里是[Python](https://docs.python.org/2/library/ctypes.html?highlight=ctypes#module-ctypes)对其工作原理的描述）`ctypes`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-01T21:18:11.083

> 扩大尼克奥德尔的答案

**您必须在 Windows 上才能使 DLL 工作，它们不可移植。**

*然而，下面的代码是跨平台的，所有平台都支持运行时，因此可以为您需要它工作的每个平台重新编译。*

Python（尚未）提供创建 dll 的简单工具，但是您可以在 C/C++ 中完成

* * *

首先，您需要一个编译器（Windows 默认没有），特别是 Cygwin、MinGW 或 Visual Studio。

C 的基本知识也是必要的（因为我们将主要使用 C 进行编码）。

*您还需要包含必要的标题，我会跳过它，这样它就不会变得太长，并且会假设一切都设置正确。*

* * *

对于这个演示，我将打印一个传统的 hello world：

**我们将转换为 DLL 的 Python 代码：**

```
def foo(): print("hello world") 
```

**C代码：**

```
#include "Python.h" // Includes everything to use the Python-C API

int foo(void); // Declare foo

int foo(void) { // Name of our function in our DLL

    Py_Initialize(); // Initialise Python

    PyRun_SimpleString("print('hello world')"); // Run the Python commands

    return 0; // Finish execution
} 
```

这是嵌入 Python 的[教程](https://docs.python.org/3/extending/embedding.html)。这里应该添加一些额外的东西，但为了简洁起见，我把它们省略了。

编译它，你应该有一个 DLL。:)

* * *

这还不是全部。您将需要分发所需的任何依赖`python36.dll`项，这意味着运行时和其他一些组件来运行 Python 脚本。

> 我的 C 编码并不完美，所以如果有人能发现任何改进，请发表评论，我会尽力修复它。

* * *

从这个答案中，C# 中也有可能[How do I call a specific Method from a Python Script in C#?](https://stackoverflow.com/questions/13231913/how-do-i-call-a-specific-method-from-a-python-script-in-c) ，因为 C# 可以创建 DLL，并且您可以从 C# 调用 Python 函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-18T20:28:37.147

您可以使用[pyinstaller](https://www.pyinstaller.org/)将 .py 文件转换为可执行文件，并将所有必需的包转换为 .dll 格式。

步骤 1\. pip install pyinstaller,

步骤 2\. 新的 python 文件让我们将其命名为 code.py 。

步骤 3\. 编写一些代码行，即 print("Hello World")

步骤 4\. 在同一位置打开命令提示符并编写 pyinstaller code.py 回车。最后一步在同一位置看到两个文件夹名称 build，dist 将被创建。在 dist 文件夹内有文件夹代码，在该文件夹内有一个 exe 文件 code.exe 以及所需的 .dll 文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-12T08:44:34.407

如果您的唯一目标是隐藏源代码，那么只需将代码编译为可执行文件（例如，使用 PyInstaller），并使用具有可读源代码的模块进行通信，就会简单得多。注意：您可能需要更多转换器功能，如本示例所示。示例：模块：

```
import subprocess
import codecs
def _encode_str(str):
    encoded=str.encode("utf-32","surrogatepass")
    return codecs.encode(encoded,"base64").replace(b"\n",b"")
def _decode_str(b64):
    return codecs.decode(b64,"base64").decode("utf-32","surrogatepass")
def strlen(s:str):#return length of str;int
    proc=subprocess.Popen(["path_to_your_exe.exe","strlen",_encode_str(str).decode("ascii")],stdout=subprocess.PIPE)
    return int(proc.stdout.read())
def random_char_from_string(str):
    proc=subprocess.Popen(["path_to_your_exe.exe","randchr",_encode_str(str).decode("ascii")],stdout=subprocess.PIPE)
    return _decode_str(proc.stdout.read()) 
```

可执行文件：

```
import sys
import codecs
import random
def _encode_str(str):
    encoded=str.encode("utf-32","surrogatepass")
    return codecs.encode(encoded,"base64").replace(b"\n",b"")
def _decode_str(b64):
    return codecs.decode(b64,"base64").decode("utf-32","surrogatepass")
command=sys.argv[1]
if command=="strlen":
    s=_decode_str(sys.argv[2].encode("ascii"))
    print(len(str))
if command=="randchr":
    s_decode_str(sys.argv[2].encode("ascii"))
    print(_encode_str(random.choice(s)).decode("ascii")) 
```

如果您的包不是仅适用于 Windows 的包，您可能还想考虑为不同的平台编译不同的可执行文件。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-04-12T14:14:49.337

这是我的想法，它可能会奏效。我不知道，这是否有效。

1.创建您的`*.py`文件。
2.将它们重命名为 3.使用 Cython 将它们转换为文件 4. 编译`*.pyx`
成文件。 `*.c`
`*.c``*.dll`

**但我不推荐你，因为它不能在任何其他平台上运行，除了 Windows。**

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-01-19T18:42:05.113

抓住 Visual Studio Express 和 IronPython 并这样做？不过，您将进入 Python 2.7.6 世界。

# javascript - 如何将 type="date" 的 ios 5 HTML5 输入设置为当前日期和时间？

> ID：10859371
> 
> 赞同：1
> 
> 时间：2012-06-02T02:34:24.030
> 
> 标签：javascript, ios, html

我尝试了明显的，但不起作用......

```
var dtel = document.getElementById("element-id");
dtel.value = new Date(); 
```

它需要一个字符串，但语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T02:34:24.250

经过多次试验和错误，我发现以下工作：

```
var dtel = document.getElementById("element-id");
var dt = new Date();
dtel.value = dt.toISOString(); 
```

# ruby - 清理刮掉的 Nokogiri 输出

> ID：10859373
> 
> 赞同：0
> 
> 时间：2012-06-02T02:34:35.160
> 
> 标签：ruby, nokogiri, web-scraping

我正在抓取的输出给我留下了这个：

```
<li><img class="static" src="pic.jpg"><span id="dynamic1" class="the text">I like turtles</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic2" class="the text">I like bears</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic3" class="the text">I like ruby</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic4" class="the text">I like oranges</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic5" class="the text">I like keyboards</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic6" class="the text">I like movies</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic7" class="the text">I like Android</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic8" class="the text">I like Mac</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic9" class="the text">I like music</span></li>
<li><img class="static" src="pic.jpg"><span id="dynamic10" class="the text">I like boats</span></li> 
```

大约有 100 行这样的跨度类每次都不同，并且“我喜欢海龟”部分每次都不同。

理想情况下，我只想要每行的“我喜欢海龟”部分。有没有办法得到这个？

示例 10 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:42:18.283

如果你最终得到一堆这样的 HTML：

```
<ul>
    <li><img ...><span ...>I want this text</span></li>
    <li><img ...><span ...>I want this text</span></li>
    ...
</ul> 
```

然后您可以提取`<li>`s ，然后从中提取文本，`<li>`同时忽略其中的标签：

```
texts_you_want = doc.css('li').map(&:text) 
```

这将忽略s 中的`<img>`和`<span>`元素，`<li>`并且没有人需要关心它们碰巧有什么类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T02:52:25.070

> 遵循“约定”的答案`doc.css()`。

Nokogiri 允许您在结果上运行 XPath，就`Nokogiri::HTML`好像它是一个格式良好的 XML：

```
text_you_want = doc.xpath("//li/span").map(&:text) 
```

ps 我这样做的原因`//`而不是 root`/`是因为如果你用它解析你的抓取剩菜，`Nokogiri::HTML`它将`<html><body>`为你包装它。将 XPath 写入您的片段`/html/body/li/span`看起来有点尴尬:)

# php - curl -F 是什么意思？php instagram

> ID：10859374
> 
> 赞同：7
> 
> 时间：2012-06-02T02:34:56.907
> 
> 标签：php, api, post, curl, instagram

我试图弄清楚这意味着什么？我希望能够向 Instagram 的 API 发布一些内容，但不确定 curl -F 是什么意思？我尝试在谷歌上搜索它，但它并没有给我太多。也许有这件事的人可以发光？

另外，使用这种方法发布到 Instagram 的最佳方式是什么？文档在问

```
curl -F 'access_token=ACCESS-TOKEN' \
    https://api.instagram.com/v1/media/{media-id}/likes 
```

谁可以给我解释一下这个？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T02:37:23.083

来自`man curl`：

```
 -F, --form <name=content>
          (HTTP) This lets curl emulate a filled-in form in
          which a user has pressed the submit button. This
          causes curl to POST data using the Content-Type
          multipart/form-data according to RFC 2388\. This
          enables uploading of binary files etc. To force the
          'content' part to be a file, prefix the file name with
          an @ sign. To just get the content part from a file,
          prefix the file name with the symbol <. The difference
          between @ and < is then that @ makes a file get
          attached in the post as a file upload, while the <
          makes a text field and just get the contents for that
          text field from a file.

          Example, to send your password file to the server,
          where 'password' is the name of the form-field to
          which /etc/passwd will be the input:

          curl -F password=@/etc/passwd www.mypasswords.com

          To read content from stdin instead of a file, use - as
          the filename. This goes for both @ and < constructs.

          You can also tell curl what Content-Type to use by
          using 'type=', in a manner similar to:

          curl -F "web=@index.html;type=text/html" url.com

          or

          curl -F "name=daniel;type=text/foo" url.com

          You can also explicitly change the name field of a
          file upload part by setting filename=, like this:

          curl -F "file=@localfile;filename=nameinpost" url.com

          See further examples and details in the MANUAL.

          This option can be used multiple times. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T02:40:34.023

`curl`是一个模拟 web 请求的 linux 实用程序。发出`curl -F`命令发出带有表单提交数据的 http 请求。在这种情况下，表单数据就是数据`access_token=ACCESS-TOKEN`，它被发送到 url`https://api.instagram.com/v1/media/{media-id}/likes`

有关 cURL 是什么以及它的作用的更多信息，请访问[http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T02:37:02.450

`-F`模拟用户填写表格并提交。

您可以在系统上 curl 的手册页中查找此内容。如果它支持该选项，它将在手册页中有一个条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T02:40:13.803

这不是一个真正的编程问题，但我可以给你一些指导来帮助你。

-F 告诉 curl 模拟刚刚单击提交按钮的填充 HTML 表单。

看看这个页面：[http ://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

并向下滚动或搜索名为的位

```
'-F, --form <name=content>' 
```

因为它更复杂地详细说明了它

# java - 调用 getSelectedRow 方法不会返回一致的结果

> ID：10859375
> 
> 赞同：1
> 
> 时间：2012-06-02T02:36:31.117
> 
> 标签：java, swing, jtable

我的 JTable 列出了几行。当我第一次调用 getselectedRow() 时，它给了我正确的结果，但之后它总是返回-1。

在第一次调用 getSelectedRow() 后，我删除了选定的行，然后我尝试刷新表，这似乎是导致此问题的原因。如果我删除用于刷新表格的代码，它会再次正常工作。

为了刷新表格，首先我调用

```
model.getDataVector().removeAllElements(); 
```

之后，我像第一次那样重建表，即访问数据库并将行插入模型。

有什么建议我需要做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T05:49:12.263

> 当我第一次调用 getselectedRow() 时，它给了我正确的结果，但之后它总是返回-1。

这只有在以下情况下才有可能

*   没有选择任何行

*   JTable 为空

您必须`if (table.getSelectedRow() != -1) {` 在代码执行之前进行测试

# ruby-on-rails - 在我的模型不代表不同的想法，而是具有重叠字段的不同类型的应用程序中，我应该使用什么数据库？

> ID：10859377
> 
> 赞同：3
> 
> 时间：2012-06-02T02:36:41.467
> 
> 标签：ruby-on-rails, mongodb, web-applications, schema, database

我正在构建一个应用程序，我将从游戏中收集统计数据。本质上，我将解析每行都是游戏事件的日志。大约有 50 种不同类型的事件，但其中很多是相关的。每个事件都有一组与之关联的特定值，并且相关事件共享许多这些属性。总的来说，大约有 50 个属性，但任何给定的事件只有大约 5-10 个属性。

我想使用 Rails 作为后端。大多数查询将与事件类型相关，这意味着我并不特别关心两种事件类型在任何给定轮次中如何相互关联，就像我关心来自多个轮次的单个事件类型的数据一样。我应该构建什么样的架构，应该使用什么样的数据库？

给定一个关系数据库，我想到了以下几点：

1.  具有扁平结构，其中只有几个表，但事件表的列数与总体事件属性一样多。这会导致每一行都有很多空值，但它可以让我轻松访问我需要的内容。

2.  除其他事项外，为每种事件类型设置一个表格。这可以让我节省空间并提高性能，但考虑到事件并不是真正独立的“想法”，拥有这么多表似乎有些过分。

3.  将相关事件组合在一起，最大限度地减少表格数量和每个表格的属性数量。那么问题就变成了分组。它远非明确，正确建立事件超类型可能需要很长时间。此外，它并不能完全解决存在大量 nil 的问题。

也有人建议我考虑使用 NoSQL 数据库，例如 MongoDB。在这种情况下似乎非常适用，但我以前从未使用过非关系数据库。似乎我仍然需要很多不同的模型，即使我不会为每个模型设置表格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:07:10.727

这对于 MongoDB 来说是一个很好的用例，但对于关系数据库来说却非常尴尬。

您将对这些数据进行的查询类型对于最佳模式设计非常关键，但想象一下您的文档（在类似于上面 1\. 的单个集合中）看起来像这样：

```
{  "round" : 1,
   "eventType": "et1",
   "attributeName": "attributeValue",
   ...
} 
```

您可以轻松地按轮次、按事件类型、取回所有属性或仅指定子集等方式进行查询。

您不必预先知道您可能拥有多少属性，哪些属性属于哪些事件类型，甚至您拥有多少事件类型。在构建原型/应用程序时，您将能够根据需要改进模型。

有一个非常大的 Rails/MongoDB 人员活跃社区，您很有可能会找到很多可以提出问题的开发人员和很多可以作为示例查看的代码。

我鼓励您尝试一下，看看它是否适合。我打算添加一些链接来帮助您入门，但是可供选择的链接太多了！由于您可能对是否使用对象映射器有疑问，所以这里有一个[很好的答案](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/iXPAaAnsGoE)。

[这里](http://paul-wong-jr.blogspot.com/2012/03/dynamic-attributes-and-mongodbmongoid.html)有一篇关于使用 Ruby 和 MongoDB 处理动态属性的好文章。

# php - MySQL：如何显示来自特定 ID 的记录

> ID：10859383
> 
> 赞同：-3
> 
> 时间：2012-06-02T02:38:26.087
> 
> 标签：php, mysql, web, phpmyadmin

```
+----+
| id |
+----+
| 1  |
+----+
| 2  |
+----+
| 3  |
+----+
| 4  |
+----+
+----+
| 5  |
+----+ 
```

如何显示来自特定 ID 的记录，以便列表显示 2、3、4、5 或 3、4、5？

我想在 UNION 中处理两个查询，但最终显示 2、1、3、4、5 或 2、5、4、3、1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T02:41:26.497

你的意思是

```
SELECT * FROM table WHERE id IN (2,3,4,5)

SELECT * FROM table WHERE id >= $id ORDER BY id ASC LIMIT 4 
```

在第二个查询中，$id 是用户的输入。此外，您可以将 4 作为用户输入而不是 LIMIT 4

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T02:54:46.273

也许

```
$sql = "SELECT * FROM table WHERE id >= $curID ORDER BY id ASC LIMIT 4"; 
```

如果要指定要查找的条目数，可以使用：

```
$sql = "SELECT * FROM table WHERE id >= $curID ORDER BY id ASC LIMIT $number"; 
```

确保在将输入插入查询之前对其进行清理。有关更多信息，请参阅此帖子： [使用 PHP 清理用户输入的最佳方法是什么？](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)

# javascript - 更改页面间隔的正文背景

> ID：10859384
> 
> 赞同：2
> 
> 时间：2012-06-02T02:38:46.443
> 
> 标签：javascript, html, css

我目前有：

```
<script type='text/javascript'>
var imageID=0;
function changeimage(every_seconds){
//change the image
if(!imageID){
    document.getByTagName("body").src="icwXI.jpg";
    imageID++;
}
else{if(imageID==1){
    document.getByTagName"body").src="JvuP9.jpg";
    imageID++;
//call same function again for x of seconds
setTimeout("changeimage("+every_seconds+")",((every_seconds)*20)); 
</script>
</head>
<body style='background: url(icwXI.jpg) no-repeat center center fixed; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover;' onload='changeimage(1)'> 
```

目的是让身体背景图像最初加载 icwXI.jpg，然后在 20 秒后更改为 JvuP9.jpg，然后再过 2 秒再循环回到 icwXI.jpg。

但是它似乎不起作用，我的 JavaScript 技能非常有限。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T03:21:09.667

创建一组背景图像 - 下面我用一些 placekitten 图像完成了这项工作。其次，创建一个函数，用数组中的下一个更改背景。为了跟踪我们的位置，我们将使用一个变量（我们可以`.indexOf`在较新的浏览器中使用 on 数组，尽管在某些区域支持较弱）。

最后，我们将创建一个每 23 秒运行一次的间隔。当它运行时，它会调用我们的 swapBG 函数，然后立即创建一个超时，该超时将在 2 秒后再次调用我们的 swapBG 函数。

```
// backImg for tracking which image we're showing
// dbStyle is a quick reference to the style list on the body
// backgnd is an array of potential background images
var backImg = -1,
    dbStyle = document.body.style,
    backgnd = [
        'url(http://placekitten.com/350/350)',
        'url(http://placekitten.com/349/349)'
    ]; 

// Steps forward through background images, then back to start
// when it reaches the end of the list
function swapBG() {
    dbStyle.backgroundImage = backgnd[ backImg++ ]
        ? backgnd[ backImg ]
        : backgnd[ backImg = 0 ];
}

// Call swapBG() immediately
swapBG();

// Create an interval that runs every 23 seconds
setInterval(function(){
   swapBG();
   // Create a timeout to run after 2 seconds
   setTimeout(function(){ 
       swapBG()
   }, 2000 );
}, 23000);​ 
```

演示：http: [//jsfiddle.net/XsAWB/2/](http://jsfiddle.net/XsAWB/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T02:50:50.523

1.  首先，您需要修复一些语法错误。我看到的前两个没有完成两个开始`{`括号，并且在第二个括号上缺少括号`document.getByTagName`。

2.  您的函数在第一次调用时不会“休眠/超时”，调用函数时会立即更改背景图像。

3.  另请注意，当您`setTimeout()`重复它的功能时，第二个参数实际上是*毫秒*，而不是您似乎打算的秒。

4.  您的函数只会修改`<body>`两次，因为`imageID`不断增加，并且只有未设置的情况（实际上应该检查`imageID==0`）和 1。您需要更改它，因此每个背景都有您想要旋转的情况。

5.  `document.getTagByName("body").src`不是更改背景图像的正确方法。`document.body.style.backgroundImage`是。

# gcc - mips gcc 工具链

> ID：10859385
> 
> 赞同：0
> 
> 时间：2012-06-02T02:38:56.130
> 
> 标签：gcc, mips, cross-compiling

[根据此处](http://linuxencaja.net/wiki/Gccmips)的说明，我试图在 Ubuntu 上为 Mips 设置工具链。但是，当我这样做时`make CFLAGS="-Os -w"`，我收到如下错误：-

```
...
...
fi
echo timestamp > stmp-fixproto
make[2]: *** No rule to make target `/usr/local/bin/mips-elf-as', needed by `stamp-as'.  Stop.
make[2]: Leaving directory `/home/mainuser/mips/gcc-obj/gcc'
make[1]: *** [all-gcc] Error 2
make[1]: Leaving directory `/home/mainuser/mips/gcc-obj'
make: *** [all] Error 2 
```

我该如何纠正这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:12:30.407

Which occurrence of `make CFLAGS="-Os -w"` is it failing on? From the error message, it looks like `mips-elf-as` has not been successfully built by the first stage of the process.

# iphone - Twitter+oAuth 引擎在尝试发布状态时返回 401

> ID：10859386
> 
> 赞同：3
> 
> 时间：2012-06-02T02:39:00.810
> 
> 标签：iphone, twitter, twitter-oauth, mgtwitterengine

我在我的 iPhone 应用程序中使用 Twitter+oAuth 引擎，并且我能够完美地验证用户身份。我可以毫无问题地获得状态，但是当我想发布状态时，会返回 401 错误。

这就是我发送推文的方式：`[_engine sendUpdate:@"Testing 101"];`

它返回带有 HTTP 401 错误的“请求失败”消息。当我使用相同的引擎接收状态时，将返回请求成功消息。
为什么会这样？

我可以完美地接收状态，一分钟多次。该请求毫无困难地成功，但同一引擎在尝试发布时返回 401。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:23:18.060

确保您的回调 url 不为空。此回调 url 不必有效，甚至不必存在。

尽量不要一遍又一遍地提交相同的更新。Twitter 将其视为垃圾邮件，最终将拒绝发布您的更新。

另请参阅[Twitter 错误和响应代码](https://dev.twitter.com/docs/error-codes-responses)。

```
401     Unauthorized     Authentication credentials were missing or incorrect. 
```

这也让我想到，您在发布之前没有登录或传递正确的凭据。

# lua - 为什么 Lua 的字符串可以包含任意数值的字符？

> ID：10859387
> 
> 赞同：2
> 
> 时间：2012-06-02T02:39:02.620
> 
> 标签：lua

我在那里读到了一些关于字符串的东西： [http ://www.lua.org/pil/2.4.html](http://www.lua.org/pil/2.4.html)

Lua 是**8 位干净的**，因此字符串可以包含任何数值的字符，**包括嵌入的 zeros**。

那**八位清洁**是什么意思？

为什么它可以包含任何数值的字符？（与基本 c 字符串不同）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T03:04:48.467

有两种常用的存储字符串的方法：

1.  人物与终结者
2.  长度和字符

使用#1时，需要“牺牲”一个角色作为终结者；当你使用#2 时，你没有这样的限制。

C 使用第一种存储字符串的方法。它使用字符零作为终止符；其他 255 个字符可用于表示字符串的字符。

Lua 使用第二种存储字符串的方法。所有 256 个可能的字符值，包括零，都可以在 Lua 字符串中使用。例如，你可以用字符`'A'`, `0`, `'B'`, 构造一个三字符的字符串，Lua 会把它当作三字符的字符串。您可以在 C 中构造相同的字符串，但其字符串处理库会将其视为单字符字符串：`strlen`将返回`1`、`puts`写入字符`A`和停止，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T16:56:57.363

Lua 字符串类型是一个计数的字节序列。一个字节可以保存 0 到 255 之间的任何值。

string 类型用于字符串。你是对的，很少有字符集编码允许任何字节值或字节值序列。代码页 437 就是这样；它将 256 个字符映射到 256 个值，每个字符一个字节。Windows-1252 没有；它将 251 个字符映射到 251 个值，每个字符一个字节。UTF-8 将 1,112,064 个字符映射到 1 到 4 个字节的序列，其中一些字节值没有使用，一些值序列没有使用。

Lua 字符串库确实具有将字节视为字符的函数。它们的行为受实现的库的影响，该库通常使用 C 运行时及其语言环境特性。

Lua 有专门的库来显式处理各种字符集编码。

# security - 授权 RESTful 服务的实际示例？

> ID：10859390
> 
> 赞同：6
> 
> 时间：2012-06-02T02:39:54.973
> 
> 标签：security, rest, authorization, restful-architecture

围绕 REST 和安全性主题有许多关于 SO 的优秀问题（和答案）。许多人说“纯粹主义者不会喜欢这个，但是等等等等”......然后其他人说“你不应该那样做，因为等等等等”。

但是我还没有看到“纯粹主义者”针对以下情况提出的*解决方案。*所以我的问题是 - 以下场景的“纯 RESTful 解决方案”是什么？

**简单的场景...**

想象一下建立一个数据库/网站，让用户管理他们最喜欢的食谱。该网站公开了一个 RESTful API，以便用户可以从他们想要编写的自定义程序（利用此 API）中查询和操作他们的列表。

因此，用户“A”有 3 个最喜欢的食谱，ID 分别为“1”、“2”和“3”。

用户“B”有 2 个最喜欢的食谱，ID 为“4”和“5”。

我们需要确保如果用户 A 向其发送`DELETE`命令`/Recipes/4`，他将得到`Forbidden (403)`响应。

**我平时会做什么...**

我通常会做的是让他们首先调用一种身份验证方法，然后向他们发送某种有效期为 30 分钟左右的身份验证令牌。通常，此令牌将通过 cookie 传递。

**什么是纯溶液？**

纯 REST 解决方案是让他们将其作为查询字符串中的变量传递吗？[饼干是魔鬼吗？](http://en.wikiquote.org/wiki/The_Waterboy)令牌是否应该用作 URL 的一部分（而不是查询字符串参数）？还有什么可以清楚地回答这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T12:26:55.723

在授权标头中传递令牌。这就是它的设计目的。见[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p7-auth-12.html](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p7-auth-12.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:09:05.330

将身份验证令牌视为资源。

您通过 GETting 身份验证令牌进行身份验证，其参数为凭据（例如，通过 https 的基本身份验证）。

通过删除登录时获得的身份验证令牌资源来注销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T02:48:52.293

一个简单的无状态且无 cookie 的解决方案是为您的每个用户提供一个相同的令牌。

有一些方法可以生成这些令牌，以便它们足够稀疏以应对安全问题。

例如[https://www.grc.com/passwords.htm](https://www.grc.com/passwords.htm)

假设您有用户 A 和用户 B。您为用户 A 生成令牌 X，为用户 B 生成令牌 Y。

所以用户A会使用类似的东西`/X/Recipes/1`

用户 B 将使用类似的东西`/Y/Recipes/4`

这是安全的，因为用户 A 是唯一知道他的令牌的人，正如我之前提到的，生成令牌的方式可以确保其他人“不可能”猜到该令牌。

因此，如果其他人（例如用户 B）在 url 中使用其他令牌，例如`/Z/Recipes/1`，您应该能够识别并返回相应的错误消息。

您可以让用户在 url 中传递令牌，就像我在上面展示的那样，或者将它作为 Autherticantion 消息嵌入到 HTTP 请求中。

# c# - 2D 碰撞检测不起作用 XNA C#

> ID：10859397
> 
> 赞同：0
> 
> 时间：2012-06-02T02:41:35.067
> 
> 标签：c#, xna, 2d

我是 XNA 和 C# 的新手（我是 2 天前开始的，所以请原谅马虎的编程），我在制作一个简单的游戏时遇到了问题。我似乎无法在任何在线教程中找到解决方案。我正在尝试使用矩形碰撞检测，但我无法让它正常工作。角色完全从地板上掉下来，似乎在任何地方都没有发生过碰撞。我在这里找不到我的逻辑错误。下面我发布了一些与碰撞检测有关的代码。如有需要，我可以发布更多。提前感谢您的帮助！

级别.cs

```
//The method below is called in the initial LoadContent method in Game1.cs. 'LoadBlocks()' is supposed to read in a text file and setup the level's "blocks" (the floor or platforms in the game). 

public void LoadBlocks(int level){
    if (level == 0)
        {
            fileName = "filepath";
        }

        System.IO.StreamReader file = new System.IO.StreamReader(fileName);
        while ((line = file.ReadLine()) != null)
        {
            for (int i = 0; i < 35; i++)
            {
                rectBlock = new Rectangle((int)positionBlock.X, (int)positionBlock.Y, width / 30, height / 30);

                if (line.Substring(i, 1).Equals(","))
                {
                    positionBlock.X += (width / 100) * 24;
                }
                if (line.Substring(i, 1).Equals("#"))
                {  //block -> (bool isPassable, Texture2D texture, Rectangle rectangle, Vector2 position)
                    block = new Block(false, textureBlock, rectBlock, positionBlock);
                    blocks.Add(block);
                    positionBlock.X += (width / 100) * 24;
                }
            }

            positionBlock.Y += (height / 100) * 8;
            positionBlock.X = 0;
        }
    }

//This method below updates the character 'bob' position and velocity.
 public void UpdatePlayer()
    {
        bob.position += bob.velocity;
        bob.rectangle = new Rectangle((int)bob.position.X, (int)bob.position.Y, width / 30, height / 30);

        float i = 1;
        bob.velocity.Y += 0.15f * i;
        foreach (Block block in blocks)
        {
            if (bob.isOnTopOf(bob.rectangle, block.rectangle))
            {
                bob.velocity.Y = 0f;
                bob.hasJumped = false;
            }
        }
    } 
```

字符.cs

```
//Here is my whole Character class for 'bob'

public class Character
{
    int height = GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Height;
    int width = GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Width;

    int health;
    String name;
    bool gender;
    Texture2D texture;
    public Vector2 position;
    public Vector2 velocity;
    public bool hasJumped;
    public Rectangle rectangle;

    public Character(int newHealth, String newName, bool newGender, Texture2D newTexture, Vector2 newPosition)
    {
        health = newHealth;
        gender = newGender;
        name = newName;
        texture = newTexture;
        position = newPosition;
        hasJumped = true;
        rectangle = new Rectangle(0,0, width/30,height/30);
        velocity = Vector2.Zero;
    }

    public bool isOnTopOf(Rectangle r1, Rectangle r2)
    {
        const int penetrationMargin = 5;

        return (r1.Bottom >= r2.Top - penetrationMargin &&
           r1.Bottom <= r2.Top &&
           r1.Right >= r2.Left + 5 &&
           r1.Left <= r2.Right - 5);

    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, rectangle,null, Color.White,0,position,SpriteEffects.None,0);
    }

} 
```

抱歉，如果发布的代码过多或令人困惑，但非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T04:20:14.100

至少，您的交叉点测试条件似乎不正确。代码可能还有其他问题（有几个只是快速浏览一下），但让我们关注这一点：

```
r1.Bottom >= r2.Top - penetrationMargin &&
r1.Bottom <= r2.Top &&
r1.Right >= r2.Left + 5 &&
r1.Left <= r2.Right - 5; 
```

首先，不要为您编写库中存在的代码。Xna Rectangles 有一个[Intersects](http://msdn.microsoft.com/en-us/library/bb464123)方法，所以废弃该代码并改用它。

无论如何，我们将查看条件：

```
r1's Bottom is below r2's Top minus a margin AND
r1's Bottom is above r2's Top AND (...) 
```

这已经是不可能的了。r1.Bottom 不能**同时低于和高于**r2.Top。

此外，即使所有比较都是正确的，您在任何地方都使用 AND (&&)，这意味着条件只有在所有 4 个都为真时才为真。基本上，您不是在测试交叉点，而是在测试包容性，即您正在测试 r1 是否完全在 r2 之内。相交测试将使用 OR (||) 而不是 AND (&&) 来连接条件。

但是同样，尽管出于教育目的您可能想自己编写代码，但从工程角度来看，最好的解决方案是使用库提供的内容，此处为 Rectangle.Intersects。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:19:18.367

我想通了，但我不确定为什么这真的有效。我的绘图方法有问题。我原来有：

```
spriteBatch.Draw(texture, rectangle, null, Color.White, 0, position, SpriteEffects.None, 0); 
```

作为我的方法，但后来我将其更改为

```
spriteBatch.Draw(texture, rectangle, Color.White); 
```

现在一切正常。

# javascript - 分配后只读字段不变

> ID：10859400
> 
> 赞同：1
> 
> 时间：2012-06-02T02:42:50.183
> 
> 标签：javascript

在我的 HTML 表单中，我有一个只读字段，其中包含基于各种选择和单选框的费用。

```
<input name="AdultFee_1" type="text" class="tabfont_right" id="AdultFee_1" value="0" size="10"  readonly="readonly" /> 
```

以下 javascript（为简洁起见）用于分配费用并将其显示在 AdultFee_1 中。

```
function GetField (FieldID)
{
  return document.getElementById(FieldID);   
} //endfunction GetField (FieldID)

function CalcAdultFee (EntryID)
{
var fee=0.00;

// Retrieve data values from the form.
var AdultRegType = GetField ("AdultRegType_" + EntryID);
var AdultTSCredit = GetField ("AdultTSCredit_" + EntryID);
var AdultPrayerRetreat = GetField ("AdultPrayerRetreat_" + EntryID);
var AdultFee = GetField ("AdultFee_" + EntryID);

// Check that the current date is before the early-bird cutoff.
if (new Date() < new Date(2012, 8, 29)) {

  // Determine the fee based on the registration type selected. Add costs for Temple School 
  // Credit and Adult Prayer Retreat if selected. If the user is only going to the Friday
  // Friday prayer retreat, do not add the additional option if selected.
  switch (AdultRegType.value) {
      case "Adult Registration": 
        fee = 85.00 + parseFloat((AdultTSCredit.checked) ? 10 : 0) + parseFloat((AdultPrayerRetreat.checked) ? 35: 0);
        break;
      case "College Student": 
        fee = 25.00 + parseFloat((AdultTSCredit.checked) ? 10 : 0) + parseFloat((AdultPrayerRetreat.checked) ? 35: 0); 
        break;
      case "IHQ/Field Staff": 
        fee = 42.50 + parseFloat((AdultTSCredit.checked) ? 10 : 0) + parseFloat((AdultPrayerRetreat.checked) ? 35: 0); 
        break;
      case "ONLY Friday Prayer Retreat": 
        fee = 35.00 + parseFloat((AdultTSCredit.checked) ? 10 : 0); 
        break;
      default:
        fee = 0.00;
  } //endswitch (RegType)

// elseif (new Date() < new Date(2012, 8, 29))
}//endif (new Date() < new Date(2012, 8, 29))

AdultFee.value = fee;
CalcGrandTotal();

} //endfunction CalcAdultFee (RegType) 
```

IE8 中的问题是，在用户单击字段之前，新值不会出现在表单上。这似乎在 IE9、FF12 和 Safari 中运行良好。我肯定错过了什么。我该怎么办？

# python - 我如何阅读/dev/sda1？

> ID：10859401
> 
> 赞同：0
> 
> 时间：2012-06-02T02:42:54.320
> 
> 标签：python

我正在尝试在 Python REPL 中运行它：

```
file = open('/dev/sda1','rb') 
```

但是，我收到此错误：

> **Traceback（最近一次调用最后一次）：**
> 文件`<stdin>`，第 1 行，在`<module>`
> **`IOError`：[Errno 13]** *权限被拒绝：`/dev/sda1`*

我如何获得访问权限`/dev/sda1`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T02:45:29.123

您可能必须`root`阅读`/dev/sda1`。您通常可以运行`sudo`以运行`root`. 例如，要运行`myscript.py`：

```
sudo python myscript.py 
```

或者运行 REPL：

```
sudo python 
```

您必须是相应组的成员才能使用`sudo`. 此外，您的系统可能没有`sudo`. 如果你的系统没有`sudo`，你可能不得不使用`su`。如果您的系统没有`su`，您可能需要以`root`.

有关更多信息`sudo`，请键入`man sudo`。
有关更多信息`su`，请键入`man su`。

# magento - 将标签部分从 Magento 的标签中移出？

> ID：10859402
> 
> 赞同：0
> 
> 时间：2012-06-02T02:43:17.743
> 
> 标签：magento

在[此页面上](http://www.princessly.com/a-line-strapless-sleeveless-sweep-train-fish-scale-wedding-dress.html)，我试图将标签（标签列表和标签表单）从标签移到评论部分之前的开放区域。

我将 /template/tag/list.phtml 中的所有内容复制到 /template/catalog/product/view.phtml：

```
<div class="box-collateral box-tags">
    <h2><?php echo $this->__('Product Tags') ?></h2>
    <?php echo $this->getChildHtml('list_before')?>
    <?php if( $this->getCount() ): ?>
    <h3><?php echo $this->__('Other people marked this product with these tags:') ?></h3>
    <ul id="<?php echo $this->getUniqueHtmlId('product-tags_'); ?>" class="product-tags">
        <?php echo $this->renderTags('<li><a href="%1$s">%2$s</a> (%3$s)</li>') ?>
    </ul>
    <script type="text/javascript">
        decorateGeneric($("<?php echo $this->getUniqueHtmlId('product-tags_'); ?>").select('li'), ['first', 'last']);
    </script>
    <?php endif; ?>
    <form id="addTagForm" action="<?php echo $this->getFormAction(); ?>" method="get">
        <div class="form-add">
            <label for="productTagName"><?php echo $this->__('Add Your Tags:') ?></label>
            <div class="input-box">
                <input type="text" class="input-text required-entry" name="productTagName" id="productTagName" />
            </div>
            <button type="button" title="<?php echo $this->__('Add Tags') ?>" class="button" onclick="submitTagForm()">
                <span>
                    <span><?php echo $this->__('Add Tags') ?></span>
                </span>
            </button>
        </div>
    </form>
    <p class="note"><?php echo $this->__("Use spaces to separate tags. Use single quotes (') for phrases.") ?></p>
    <script type="text/javascript">
    //<![CDATA[
        var addTagFormJs = new VarienForm('addTagForm');
        function submitTagForm(){
            if(addTagFormJs.validator.validate()) {
                addTagFormJs.form.submit();
            }
        }
    //]]>
    </script>
</div> 
```

虽然表单正确显示，但标签却没有。

我想这与“$this->getCount()”有关。那么如何在 view.phtml 中为标签获取 $this 呢？或者我怎样才能使这项工作？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:31:40.200

如果您将代码从模板 tag/list.phtml 复制到 catalog/product/view.phtml，它将无法工作，因为 catalog/product/view.phtml 后面的块不支持与 tag/list.phtml 后面的块相同的方法集.

我建议将 tag_list 块移动到布局 XML 中的 product_view 块内。然后在 catalog/product/view.phtml 你可以使用类似的东西

```
<?php echo $this->getChildHtml('tag_list'); ?> 
```

这将打印 tag/list.phtml 的内容。

或者，如果您不想在布局 xml 中移动块，那么您可以使用类似

```
<?php echo $this->getLayout()->getBlock('tag_list')->toHtml(); ?> 
```

但它不是那么好和干净:) 我建议选择选项一。Magento Commerce 站点中提供了一些如何使用布局的资源。

# javascript - Bootstrap：Accordion Collapse 停止使用 Bootstrap 2.0.3

> ID：10859407
> 
> 赞同：6
> 
> 时间：2012-06-02T02:45:06.077
> 
> 标签：javascript, twitter-bootstrap, html-table, accordion

我的手风琴使用Bootstrap 2.0.2`data-toggle="collapse"`并且`data-parent="#selector"`工作正常，但是当我切换到 2.0.3 时，手风琴功能停止工作。

它仍然会打开和关闭**目标** ，但是当单击另一个with时`div`，它不会自动关闭打开的**目标** 。`div``td``data-toggle="collapse"`

您可以在这里看到它不适用于 2.0.3：http: [//chooserealtoday.com/#faq](http://chooserealtoday.com/#faq)

以下代码示例也在[http://jsfiddle.net/N7MN9/3/](http://jsfiddle.net/N7MN9/3/)上的 JSFiddle 上。

```
<table id="faq-table" class="table table-bordered">
  <tr>
    <td class="question" data-toggle="collapse" data-target="#answer1" data-parent="#faq-table">
      <p><strong>What is your name?</strong></p>
      <div id="answer1" class="answer collapse">
        <p>Mark Rummel</p>
      </div>
    </td>
  </tr>
  <tr>
    <td class="question" data-toggle="collapse" data-target="#answer2" data-parent="#faq-table">
       <p><strong>What is your favorite color?</strong></p>
       <div id="answer2" class="answer collapse">
         <p>Blue, no yellow.</p>
       </div>
     </td>
  </tr>
</table> 
```

感谢您对此提供的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T10:27:13.597

我看到两个选项

*   使用 divs 而不是 table（例如[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)）
*   修改 bootstrap.js 并替换：

`actives = this.$parent && this.$parent.find('> .accordion-group > .in')`

通过 2.0.2 版本：

`actives = this.$parent && this.$parent.find('.in')`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T12:53:45.027

您可以在不修改 Bootstrap 文件的情况下解决此问题：只需放入 .accordion-group 类即可。

[参考](https://github.com/twitter/bootstrap/issues/2784)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:25:34.957

我编写了[此扩展程序](https://github.com/lastobelus/bootstrap-collapse-activeselector)以允许将折叠与表格一起使用。它允许您指定用于在折叠组中查找活动同级的选择器。

[引导折叠主动选择器](https://github.com/lastobelus/bootstrap-collapse-activeselector)

# javascript - 如何请求用户信息的权限？

> ID：10859412
> 
> 赞同：1
> 
> 时间：2012-06-02T02:46:01.727
> 
> 标签：javascript, jquery, facebook, sdk, oauth

我认为这是一个非常明显的问题，但我完全被难住了。我想我已经正确设置了我的应用程序设置，但是当我尝试在我的网站上验证我的帐户（使用 Javascript SDK）然后是 console.log(me) 时，我仍然只能获得公共信息。

编辑：我认为我的问题是我的网站使用的是“当前对话框”而不是“推荐对话框”。我知道只有当某人通过 Facebook 被定向到我的网站时才会使用推荐对话框，但我知道也必须有一种方法可以从我的网站使用推荐对话框。如果当前对话框只能使用用户的公共信息对服务器进行身份验证，为什么会有人使用它？我读了另一篇文章，说我应该查看身份验证文档（https://developers.facebook.com/docs/authentication/），但据我所知，没有任何关于通过推荐对话框进行授权的内容。

我想使用 Javascript SDK。这是可能的还是我必须在没有 Javascript SDK 的情况下这样做？

在 Auth Dialog 中，我有这个：email、user_about_me、user_likes、user_location、user_website、user_checkins

这是我的代码：

```
// Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

  // Init the SDK upon load
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '464723870207650', // App ID
      channelUrl : '//'+window.location.hostname+'/scripts/channel.php', // Path to your Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // listen for and handle auth.statusChange events
    FB.Event.subscribe('auth.statusChange', function(response) {
      if (response.authResponse) {
        // user has auth'd your app and is logged into Facebook
        FB.api('/me', function(me){
            console.log(me);
        })
      } else {
        // user has not auth'd your app, or is not logged into Facebook
      }
    });
  } 
```

当我通过调试器运行它时，我没有收到任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:11:49.557

只需调用[FB.login](http://developers.facebook.com/docs/reference/javascript/FB.login/)方法以及所需的权限：

```
function login() {
    FB.login(function(response) {
        console.log("FB.login callback, response: ", response);
    }, { scope: "email,publish_stream,etc" });
} 
```

请记住：

> 调用 FB.login 会导致 JS SDK 尝试打开一个弹出窗口。因此，该方法只能在用户点击事件后调用，否则弹出窗口将被大多数浏览器阻止。

# javascript - 如何在 Rails 3.2 应用程序中使用 Twitter Bootstrap 的 Tabbable Tabs 将内容返回到两个单独的 tabbable ID

> ID：10859415
> 
> 赞同：7
> 
> 时间：2012-06-02T02:46:37.547
> 
> 标签：javascript, twitter-bootstrap

使用 Twitter Bootstrap 的 bootstrap-tab.js，我有：

```
<ul class="tabnavcenter" id="myTab">
   <li class="active"><a href="#home" data-toggle="tab">about</a></li>
   <li><a href="#tab2" data-toggle="tab">education</a></li>
   <li><a href="#tab3" data-toggle="tab">experience</a></li>
   <li><a href="#tab4" data-toggle="tab">verified skills</a></li>
   <li><a href="#tab5" data-toggle="tab"> video</a></li>
 </ul>

<div class="tab-content">
  <div class="tab-pane active" id="home">Content 1</div>
  <div class="tab-pane" id="profile">...</div>
  <div class="tab-pane" id="messages">...</div>
  <div class="tab-pane" id="settings">...</div>
</div> 
```

如果我输入，我怎么能得到它：

```
 <div class="tab-content">
   <div class="tab-pane active" id="home">Content 2</div>
 </div> 
```

...配置文件中的两个位置（一个在导航栏上方，一个在导航栏下方）并且每个位置都有不同的内容，它会起作用吗？截至目前，内容出现，但一旦点击，它就会消失。可以同时有两个“活跃”的 li 吗？

编辑：

由于我在 Rails 3.2 应用程序中使用它，因此我目前在 bootstrap-tab.js 中有以下内容：

```
 $('#myTab a').click(function (e) {
   e.preventDefault();
  $(this).tab('show');
})

 $('#myTab a[href="#home"]').tab('show');
 $('#myTab a[href="#tab2"]').tab('show');
 $('#myTab a[href="#tab3"]').tab('show');
 $('#myTab a[href="#tab4"]').tab('show');
 $('#myTab a[href="#tab5"]').tab('show');
 $('#myTab a[href="#home2"]').tab('show');
 $('#myTab a[href="#tab22"]').tab('show'); 
```

并将以下内容放入 user_body.html.erb 后：

```
 <script type="text/javascript">
    $(function () {
       $('#myTab >li>a').on('click', function (e) {
        e.preventDefault();
        $(this).tab('show');
        //
        $(this.getAttribute('href') + '2').html($(this).html());
       });
   }); 
```

...刷新页面后，我在 div 中获得了第二个内容，单击第二个选项卡时没有更改，然后单击第一个选项卡时又更改回第一个“a”的名称。

一团糟。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T19:45:57.693

这是一种无需额外 javascript 且与插件 API 兼容的解决方案。

原理是使用 2`.tab-content`并利用`data-target`selector 属性。

## HTML

第一个`.tab-content`包含你的*正常* `.tab-pane`

```
<div class="tab-content">
    <div class="tab-pane active" id="home">home</div>
    <div class="tab-pane home-tab">class home</div>
    <div class="tab-pane profile-tab">profile</div>
    <div class="tab-pane messages-tab">messages</div>
    <div class="tab-pane settings-tab">settings</div>
</div> 
```

第二个包含可选`.tab-content`的额外s -**加上一个空的**（这里）`.tab-pane`**`#notab_else`**

 **```
<div class="tab-content">
    <div class="tab-pane active" id="home_else">home_else</div>
    <div class="tab-pane home-tab">class home</div>
    <div class="tab-pane profile-tab messages-tab settings-tab" id="notab_else"></div>
</div> 
```

然后你的标签有一个额外的属性，`data-target`：

```
<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#home" data-target="#home, #home_else">Home</a></li>
    <li class=""><a href="#home" data-target=".home-tab">Class Home</a></li>
    <li><a href="#profile" data-target=".profile-tab">Profile</a></li>
    <li><a href="#messages" data-target=".messages-tab">Messages</a></li>
    <li><a href="#settings" data-target=".settings-tab">Settings</a></li>
</ul> 
```

此属性`data-target`定义`.tab-pane`与其关联的 (s)。神奇之处在于您可以使用`#id`s 或`.class`es 或任何有效的 jQuery 选择器。

## JavaScript

激活一切所需的只是默认代码：

```
$('#myTab a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
}); 
```

您还可以使用自己的操作来触发 API 定义的选项卡。

如果您保留选项卡的默认行为，则**不需要这样做。**

```
$('#myTab a:first').tab('show'); 
```

## 额外的

*   `data-toggle="tab"`如果您设置为`a`元素，您可以免费使用任何 javascript
*   如果您将`fade`类添加到`.tab-pane`（并且`fade in`对于那个`.active`） ，则可以使用淡入淡出效果

## 演示

这是[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/MSD2J/1/)和[额外的演示（jsfiddle）](http://jsfiddle.net/Sherbrow/MSD2J/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T04:08:29.170

您一次只能访问一个 id，这就是为什么它被称为 id。

从第一个获取内容并将其应用于第二个。

```
$('#myTab a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');

   $(this.href +'2').html($(this.href).html()

})

<div class="tab-content">
  <div class="tab-pane active" id="home">Content 1</div>

</div>

 <div class="tab-content2">
   <div class="tab-pane active" id="home2">Content 2</div>
 </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T04:57:41.260

这是您的问题的有效解决方案（更新）：

```
<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#home">Home</a></li>
    <li><a href="#profile">Profile</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane active" id="home">Tab-1</div>
    <div class="tab-pane" id="profile">Tab-2</div>
</div>
<div class="tab-content" id="tab-content2">
    <div class="tab-pane active" id="home2">Home Content 2</div>
    <div class="tab-pane" id="profile2">Profile Tab-2</div>
</div>

<script type="text/javascript">
$(document).ready(function() {
    $("#tab-content2 div").each(function(i, e){ 
        if(!$(e).hasClass('active')) $(e).hide();
    });
    $('#myTab>li>a').on('click', function (e) {
        e.preventDefault();
        $(this).tab('show');
        $("#tab-content2 div").each(function(i, e) {
            $(e).hide();
        });
        $(this.getAttribute('href') + "2").show();
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T23:23:42.963

```
 <script type="text/javascript">
    $(function () {
        $('#myTab >li>a').on('click', function (e) {
            e.preventDefault();
            $(this).tab('show');
            //
            $('#extendedView').html($(this).html());
        });
    });
</script>

<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#home">Home</a></li>
    <li><a href="#profile">Profile</a></li>
    <li><a href="#messages">Messages</a></li>
    <li><a href="#settings">Settings</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="home">Tab-1</div>
    <div class="tab-pane" id="profile">Tab-2</div>
    <div class="tab-pane" id="messages">Tab-3</div>
    <div class="tab-pane" id="settings">Tab-4</div>
</div>
<div class="tab-content2">
    <div class="tab-pane active" id="extendedView">Content 2</div> 
```

## 或者

```
<script type="text/javascript">
    $(function () {
        $('#myTab >li>a').on('click', function (e) {
            e.preventDefault();
            $(this).tab('show');
            //
            $(this.getAttribute('href') + '2').html($(this).html());
        });
    });
</script>

<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#home">Home</a></li>
    <li><a href="#profile">Profile</a></li>
    <li><a href="#messages">Messages</a></li>
    <li><a href="#settings">Settings</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="home">Tab-1</div>
    <div class="tab-pane" id="profile">Tab-2</div>
    <div class="tab-pane" id="messages">Tab-3</div>
    <div class="tab-pane" id="settings">Tab-4</div>
</div>
<div class="tab-content2">
    <div class="tab-pane active" id="home2"></div>
    <div class="tab-pane" id="profile2"></div>
    <div class="tab-pane" id="messages2"></div>
    <div class="tab-pane" id="settings2"></div>

</div> 
```**

# php - 内置 PHP 函数的源代码在哪里？

> ID：10859420
> 
> 赞同：17
> 
> 时间：2012-06-02T02:47:24.570
> 
> 标签：php, function, mamp

我的 Mac ( [MAMP](https://en.wikipedia.org/wiki/MAMP) ) 上安装了本地服务器。我在哪里可以找到我电脑上的 PHP 函数？

函数文件夹的路径是什么？例如，`rand()`，`time()`，`isset()`，`explode()`。

我想看看代码以从中学习。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-02T04:32:57.947

您可以从页面[http://php.net/downloads.php](http://php.net/downloads.php)下载 PHP 源代码。下载并解压缩档案。标准函数位于*ext/standard*下。

或者直接在 GitHub 上浏览它们：[https ://github.com/php/php-src/tree/master/ext/standard](https://github.com/php/php-src/tree/master/ext/standard)

# php - 产品数据库的结构：如何存储每个产品的选项列表？

> ID：10859423
> 
> 赞同：1
> 
> 时间：2012-06-02T02:48:41.460
> 
> 标签：php, mysql

我正在寻找一些关于重新设计产品数据库的方向以及从中存储/检索数据的最佳方法的建议。我遇到的问题是如何最好地代表产品可能具有的各种（有效）选项。

基本结构是（不是实际的表定义）：

```
PRODUCT_TABLE {
ID(int),
NAME(varchar),
AVAILABLEOPTIONS(varchar),
etc...
}

COLOROPTIONS_TABLE {
ID(int),
COLORNAME(varchare),
etc...
}

BODYOPTIONS_TABLE {
ID,
BODYNAME,
etc...
} 
```

在 AVAILABLEOPTIONS 字段中存储值的最佳方式是什么，这将允许我在产品可用的那些表中指定 OPTIONS 表和 ID。（即，产品可能无法在所有选项中使用特定选项表）

我做了很多研究（主要是在这个很棒的网站上）并查看了 JSON、序列化值、多维数组等，但我不确定最好的方法。

最后， AVAILABLEOPTIONS 值将用于在产品页面上显示选项或用于构建表单以供用户生成有效的产品代码。我还将尝试设置一个输入表单，允许管理员生成用于存储在数据库中的可用选项值。

任何提示或想法将不胜感激！

* * *

我不确定这是否是放置此更新的正确位置，但这里是。

进行了更多研究，似乎在单个字段中存储多个值是绝对禁止的。我也不确定 EAV 模型是否适合我的需求。但是当谈到规范化我拥有的数据库要求时，我不确定我是否已经弄清楚了。我想出了这个：

图片在这里：[http](http://dev.aqualux.com.au/images/1.png) ://dev.aqualux.com.au/images/1.png （不会让我在编辑中发布图片，因为我在这里太新了......）

橙色表中的 pid/oid 是外键。我没有掌握的问题是任何给定的产品都可以有给定类型的多个选项，或者根本没有....

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:15:38.920

您是否想过创建一个额外的表来充当桥梁？最近，我建立了一个数据库来将 Adob​​e Captivate 结果存储在 MSSQL 中。其中一项要求是根据员工及其部门创建一个独特的学生。仅此一项，就是三个表，我在其中使用桥梁作为个人评估的标识符。

我在下面的博客中发布了片段。请注意，这是直接从 MSSQL 中提取的。

```
CREATE TABLE [dbo].[division](
    [id] [INT] IDENTITY(1,1) NOT NULL,
    [divisionName] [VARCHAR](50)

CREATE TABLE [dbo].[employee](
    [id] [INT] IDENTITY(1,1) NOT NULL,
    [personName] [VARCHAR](50)

CREATE TABLE [dbo].[student](
    [id] [INT] IDENTITY(1,1) NOT NULL,
    [employee_id] [INT] NOT NULL,
    [division_id] [INT] NOT NULL

CREATE TABLE [dbo].[core](
    [id] [INT] IDENTITY(1,1) NOT NULL,
    [assessment_id] [INT] NOT NULL,
    [status_id] [INT] NOT NULL,
    [rawScore] [INT] NOT NULL,
    [maxScore] [INT] NOT NULL,
    [minScore] [INT] NOT NULL,
    [accuracy] [INT] NOT NULL,
    [TIME] [datetime] NOT NULL,
    [student_id] [INT] NOT NULL, /****** My unique record ******/
    [DATE] [datetime] NOT NULL 
```

所以在你的情况下，你会有一个选项表

```
CREATE TABLE options(
    id INT AUTO_INCREMENT PRIMARY KEY,
    color SMALLINT,
    body SMALLINT
); 
```

并修改您的 PRODUCT 表，使您的 AVAILABLEOPTIONS 为 SMALLINT 和外键，类似于[https://stackoverflow.com/a/1545264](https://stackoverflow.com/a/1545264)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:02:40.970

如果我没看错，那你就比现在更难了。

您将产品存储在产品表中

```
PRODUCT_TABLE {
    ID(int),
    NAME(varchar),
    etc...
} 
```

然后在您的选项表中引用 ID。不过，我会想出一种方法来拥有一个选项表。以下示例使用 magento 使用的[EAV 模型](http://en.wikipedia.org/wiki/Entity-attribute-value_model)。

```
OPTIONS_TABLE {
    PRODUCT_ID(int),
    ATTRIBUTE(varchar), // colorname, or bodyname
    VALUE(varchar) // value
} 
```

要获得产品及其选项，您只需简单加入

```
select
    product_table.id,...options_table.attribute, options_table.value
where
   product_table.id=<ID> and options_table.product_id = options_table.id 
```

# wpf - WPF：带列表的 IValueConverter

> ID：10859433
> 
> 赞同：0
> 
> 时间：2012-06-02T02:51:13.447
> 
> 标签：wpf, data-binding, ivalueconverter

可以将 IValueConverter 与 List 一起使用。它可以在我第一次调用菜单时使用。当我更新列表中的项目时，它不会再次调用 IValueConverter？例子：

```
 <MenuItem Header="{Binding Path=DataContext.Documents, RelativeSource={RelativeSource FindAncestor,
    AncestorType={x:Type ListView}}, Converter={StaticResource DocumentsToString}, Mode=OneWay}">
                    <MenuItem.Icon>
                        <Image Source="Images/upload.png" Style="{StaticResource ImageContextMenu}"/>
                    </MenuItem.Icon>
                </MenuItem> 
```

和 ValueConverters.cs

```
public class ListDocumentToStringConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var selectedDocuments = (ObservableCollection<Document>) value;
        var result = "";
        foreach (var document in selectedDocuments)
        {
            result += document.Name + "\t";
        }
        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:45:43.110

要添加正确的 fmunkert 评论，如果您打算在单个 MenuItem 中托管所有这些项目，您可以编写如下内容：

```
<MenuItem>
    <MenuItem.Header>
        <ItemsControl ItemsSource="{Binding Path=DataContext.Documents, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListView}}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Name}" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </MenuItem.Header>
    <MenuItem.Icon>
        <Image Source="Images/upload.png" Style="{StaticResource ImageContextMenu}"/>
    </MenuItem.Icon>
</MenuItem> 
```

这样，您根本不必使用转换器。如果您想更改这些项目相对于彼此的布局方式，例如在您的示例中使用选项卡之间的选项卡，那么您需要对 ItemsControl 的 ItemsPanel 进行模板化。默认情况下，它是一个垂直的 StackPanel。您可以将其更改为 Horizo​​ntal StackPanel，如下所示：

```
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal" />
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```

然后，您可以为每个 TextBlock 项目添加间距或边距，以实现您想要的视觉效果。

# eclipse - eclipse中使用DAO层时CVS项目会不会有冲突

> ID：10859434
> 
> 赞同：0
> 
> 时间：2012-06-02T02:52:12.700
> 
> 标签：eclipse, cvs, dao, conflict

我只是想知道在这种设置中 CVS 项目是否会发生冲突。我目前正在 Eclipse 中创建一个 Web 应用程序。所以我有一个 DaO 层，将执行数据库中的所有 CRUD 操作。

所以可以说，我有一个 Employee 表，它有一个 EmployeeDao 类。如果我正在使用该类并添加一些我需要的方法，并且我的团队之一也在修改 EmployeeDao 类以添加方法以满足他的需要，该怎么办？那么如果发生这种情况会不会有冲突呢？这种设置中的正确方法应该是什么？

我将不胜感激任何想法的家伙。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:58:00.593

好吧，如果你们都在编辑同一个文件，那么是的——会有冲突。

但是，这并不是说您需要担心它。如果更改不在文件中的同一位置，则源代码管理中的合并工具应该没问题。

如果您都覆盖了相同的功能，那么您会遇到冲突。

最好的方法是与您的开发团队沟通；如果您进行 Sprint，那么在您的日常会议中，您可以声明您可能正在处理哪些文件；此外，如果您要对课程进行重大更改 - 向您的开发团队发送电子邮件。

此外，如果您在开发阶段处理多用户问题，那么我*强烈*建议您考虑使用更新的源代码控制系统；SVN 比 CVS 和 Git 或 Mercurial 更好。

# android - Android 标题 - 我如何让它保持在页面顶部而不是在屏幕顶部？

> ID：10859443
> 
> 赞同：0
> 
> 时间：2012-06-02T02:54:48.567
> 
> 标签：android, android-layout

我做了一个不错的 android 标头。唯一的问题是，每当用户向下滚动时，标题都会跟随滚动。所以标题最终滚动并保留在屏幕上。

我想要发生的事情是让它粘在页面的最顶部。那可能吗？

这是我的标题：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
 android:orientation="horizontal"
>

    <!--     android:textColor="@color/white"
    -->

 <Button android:id="@+id/home_header"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:textColor="@color/white"
  android:text="Home"
  android:background="@drawable/ic_menu"
  android:textSize="11dp"
/>

<Button android:id="@+id/businesses_header"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:textSize="11dp"
  android:text="Businesses"
  android:textColor="@color/white"
    android:background="@drawable/ic_menu"
  android:layout_toRightOf="@+id/home_header"
 />   

 <Button android:id="@+id/learn_header"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:text="Learn"
  android:textColor="@color/white"
  android:textSize="11dp"
  android:background="@drawable/ic_menu"
  android:layout_toRightOf="@+id/businesses_header"
 />   

<Button android:id="@+id/questions_header"
 android:layout_width="0dp" 
 android:layout_height="wrap_content"
 android:textColor="@color/white"
 android:layout_weight="1"
 android:text="Questions"
 android:textSize="11dp"
   android:background="@drawable/ic_menu"
android:layout_toRightOf="@+id/learn_header"  />  

 <Button android:id="@+id/extra_help_header"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:textColor="@color/white"
  android:text="Premium"
  android:textSize="11dp"
  android:background="@drawable/ic_menu"
  android:layout_toRightOf="@+id/questions_header"
 />   
</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:17:37.670

试试这个

```
<Button android:id="@+id/home_header"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:textColor="@color/white"
  android:text="Home"
  android:background="@drawable/ic_menu"
  android:textSize="11dp"
/> 
```

```
 <Button android:id="@+id/learn_header"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:text="Learn"
  android:textColor="@color/white"
  android:textSize="11dp"
  android:background="@drawable/ic_menu"
  android:layout_toRightOf="@+id/businesses_header"
 />   

<Button android:id="@+id/questions_header"
 android:layout_width="0dp" 
 android:layout_height="wrap_content"
 android:textColor="@color/white"
 android:layout_weight="1"
 android:text="Questions"
 android:textSize="11dp"
   android:background="@drawable/ic_menu"
android:layout_toRightOf="@+id/learn_header"  />  

 <Button android:id="@+id/extra_help_header"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:textColor="@color/white"
  android:text="Premium"
  android:textSize="11dp"
  android:background="@drawable/ic_menu"
  android:layout_toRightOf="@+id/questions_header"
 />   
 <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:id="@+id/Layout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:orientation="vertical" > 
```

这里添加剩余部分的xml代码

```
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T04:30:56.650

您应该做的第一件事是将标题中的高度更改为 wrap_content：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:orientation="horizontal"> 
```

然后将标题布局保存在自己的布局文件（header.xml）中。然后在您想使用标题时使用包含语句。

此处标题保持在顶部：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <include android:id="+@id/header" layout="@layout/header" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <LinearLayout
            android:id="+@id/content"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">
            <!-- put content here -->
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

在这里它与内容一起滚动：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical">

            <include android:id="+@id/header" layout="@layout/header" />

            <!-- put content here -->
        </LinearLayout>
    </ScrollView>
</RelativeLayout> 
```

# android - 使用 Android 保存状态

> ID：10859445
> 
> 赞同：0
> 
> 时间：2012-06-02T02:55:28.223
> 
> 标签：android, android-intent

我有一个应用程序，它永远不需要一个以上的活动实例。我想要它，这样当用户回到屏幕时，它与离开屏幕时的状态相同，除了一些没有意义的地方。我已经通过 onpause onstop 更新来保存持久数据。然而，为了让屏幕看起来像他们离开时的样子，我使用意图专门将标志设置为 Intent.FLAG_ACTIVITY_REORDER_TO_FRONT|Intent.FLAG_ACTIVITY_SINGLE_TOP 然后 startActivity。它似乎工作得很好，但它有意义吗？有没有更聪明的方法？这样做的陷阱等等......任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:07:26.343

```
android:launchMode = "singleTask" 
```

为清单文件中的每个活动添加上述行。添加这些启动会重新启动活动，而不是再次创建活动。

参考这个[链接](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

# ruby - 一些 heroku 命令找不到我的应用程序

> ID：10859448
> 
> 赞同：3
> 
> 时间：2012-06-02T02:56:23.440
> 
> 标签：ruby, macos, heroku, rubygems

我可以在`heroku apps`命令中找到我的应用程序，还可以执行一些命令来从应用程序中读取信息，例如`heroku addons --app appname`.

但我无法在某些命令中找到我的应用程序，例如`heroku addons:add addon_name`, `heroku pg:reset`。

**工作命令**

`heroku apps`：

```
=== 我的应用
我的应用程序 1
my_app_2

```

（我也可以在 heroku 网络仪表板中看到我的应用程序。）

`heroku addons --app my_app_1`（不在 my_app_1 文件夹中）：

```
=== my_app_1 配置的附加组件
共享数据库：5mb

```

`heroku addons`（在 my_app_1 文件夹中）：

```
=== my_app_1 配置的附加组件
共享数据库：5mb

```

**命令不起作用**

`heroku addons:add sendgrid`（在 my_app_1 文件夹中）：

```
！未指定应用。
 ！从应用程序文件夹运行此命令或使用 --app 指定要使用的应用程序

```

`heroku pg:reset DATABASE --confirm my_app_1`（在 my_app_1 文件夹中）：

```
重置 SHARED_DATABASE (DATABASE_URL)... 失败
 ！找不到资源

```

这是我的环境。

*   Max OS X Lion (10.7.4)
*   rvm 1.13.8（稳定）
*   红宝石 1.9.3p194
*   Heroku 2.26.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:10:37.050

将 heroku 的远程配置添加到 git 对我来说是诀窍。验证你是否`git remote -v`在终端上配置了它，你应该得到类似的东西：

```
heroku  git@heroku.com:your-app.git (fetch)
heroku  git@heroku.com:your-app.git (push) 
```

如果没有，请添加

```
git remote add heroku git@heroku.com:your-app.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:42:34.600

看起来您在 Heroku gem 和[Heroku Toolbelt](https://toolbelt.heroku.com/)之间存在冲突。我猜你已经安装了 Heroku Toolbelt，但你的 gem 文件中仍然有 Heroku gem。

1.  从您的 Gemfile 中删除 Heroku gem 并保存。
2.  运行`bundle`命令更新您的 Gemfile.lock
3.  在终端中运行`gem uninstall heroku`（注意：可能安装了多个版本的 Heroku gem，您需要将它们全部卸载。）
4.  在终端中，运行`heroku addons`
5.  如果你得到`heroku: command not found`了，那么你没有安装 Heroku Toolbelt。
6.  安装[Heroku Toolbelt](https://toolbelt.heroku.com/)并再次运行命令。

注意：如果您不在应用程序的目录中，则需要添加`--app myapp1`到 Heroku 命令。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T07:57:10.307

Heroku gem (2.26.5) 的最新版本似乎[已损坏](https://github.com/heroku/heroku/issues/351)。一种解决方法是降级到 2.26.3。

gem 卸载 heroku -v 2.26.5 gem 安装 heroku -v 2.26.3

# c++ - 如何解释 GDB 回溯？

> ID：10859452
> 
> 赞同：6
> 
> 时间：2012-06-02T02:58:17.550
> 
> 标签：c++, gdb, segmentation-fault

```
0x004069f1 in Space::setPosition (this=0x77733cee, x=-65, y=-49) at space.h:44    
0x00402679 in Checkers::make_move (this=0x28cbb8, move=...) at checkers.cc:351
0x00403fd2 in main_savitch_14::game::make_computer_move (this=0x28cbb8) at game.cc:153
0x00403b70 in main_savitch_14::game::play (this=0x28cbb8) at game.cc:33
0x004015fb in _fu0___ZSt4cout () at checkers.cc:96
0x004042a7 in main () at main.cc:34 
```

您好，我正在为一门课编写游戏，但遇到了段错误。棋盘格被保存在一个二维数组中，因此有问题的位对于数组来说似乎是无效的 x/y。移动作为字符串传递，这些字符串被转换为整数，因此对于 x 和 y 不知何故为 ASCII NULL。我注意到在函数调用 make_move 中它说 move=...

为什么它说 move=...？另外，还有其他解决段错误的快速提示吗？我对 GDB 有点陌生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T03:11:55.413

基本上，回溯是导致崩溃的调用的跟踪。在这种情况下：

`game::play`调用`game::make_computer_move`which 调用`Checkers::make_move`which call `Space::setPosition`which 在 file 的第 44 行崩溃`space.h`。

看看这个回溯，看起来你通过了`-65`和`-49`，`Space::setPosition`如果它们碰巧是无效的坐标（在我看来肯定是消极的和所有的）。然后，您应该查看调用函数以了解它们为什么具有它们所做的值并更正它们。

我建议`assert`在代码中大量使用来强制执行合同，几乎任何时候你都可以说“这个参数或变量应该只具有符合某些标准的值”，那么你应该断言它就是这种情况。

一个常见的例子是，如果我有一个函数接受一个不允许的指针（或更可能是智能指针）`NULL`。我将拥有函数的第一行`assert(p);`。如果`NULL`指针被传递，我马上就知道并且可以调查。

最后，在 gdb 中运行应用程序，当它崩溃时。键入`up`以检查调用堆栈帧并查看变量的样子：（您通常可以`print x`在控制台中编写类似的内容）。同样，`down`如果您需要，也会向下移动调用堆栈。

至于`SEGFAULT`，我建议在[valgrind](http://valgrind.org/)中运行应用程序。如果您使用调试信息进行编译`-g`，那么它通常可以告诉您导致错误的代码行（甚至可以捕获由于不幸原因没有立即崩溃的错误）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-19T17:07:39.430

我不允许发表评论，但只是想回复任何最近关注该问题的人，试图找到变量的位置（-65，-49）。如果您遇到段错误，您可以获得核心转储。[这](https://jvns.ca/blog/2018/04/28/debugging-a-segfault-on-linux/)是确保您可以设置 gdb 以获取核心转储的一个很好的来源。然后你可以用 gdb 打开你的核心文件：

```
gdb -c myCoreFile 
```

然后在你想要进入的函数调用上设置一个断点：

```
b MyClass::myFunctionCall 
```

然后通过 next 或 step 逐步执行代码行：

```
step 
```

或者

```
next 
```

当您在代码中想要评估变量的位置时，您可以打印它：

```
p myVariable 
```

或者您可以打印所有参数：

```
info args 
```

我希望这可以帮助其他想要调试的人！

# python - 如何将python对象传递给C扩展并在里面调用它的方法？

> ID：10859456
> 
> 赞同：2
> 
> 时间：2012-06-02T02:59:45.990
> 
> 标签：python, python-c-extension

假设我有一个带有方法“m()”的python对象“o”，我想将它传递为：

```
PyObject *f(PyObject *self, PyObject *args)
{
  PyObject *o;
  PyArg_ParseTuple(args, "O", &o);
  //o.m();
} 
```

显然最后评论的行没有编译，我想知道是否有办法实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T03:04:32.360

你想要[`PyObject_CallMethod()`](http://docs.python.org/c-api/object.html#PyObject_CallMethod)。

# ruby-on-rails - 回滚 | 抽象 Active Record 时的最佳实践

> ID：10859458
> 
> 赞同：0
> 
> 时间：2012-06-02T03:00:45.770
> 
> 标签：ruby-on-rails, ruby, model-view-controller, ruby-on-rails-3.2

我的任务是抽象/继承一个活动记录类。我正在制作一个博客，其中 post 是一个带有标题、slug 日期等的基础超级......你希望找到的所有多余的东西。

这就是事情的转折点，我想将 Post 分成许多其他子帖子类型，例如音频帖子、视频帖子、图像帖子、香草帖子。我认为你说对了。显然每个子类型都有自己的属性和成员。

1.  不是为每个子帖子类型创建名称、slug 等，而是继承或可能接口基类的最佳实践是什么？（“我更喜欢组合而不是继承”）

2.  一旦我弄清楚如何正确抽象出我的模型，我想找出一些多态的方式来表达类似 Blog.find(1).posts 的内容并获取所有帖子类型的数组。

我意识到这可能不是以多态方式查询所有帖子类型的最佳性能，因此请随意选择更好的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:27:32.590

除了单表继承之外，您还可以考虑使用`has_one`关联。

您的所有子类型都有一个 post-info，它是一般的帖子名称、slug 等（并且 post-info 在多态上属于子类型）。

这样，您将拥有一个发布信息表，以及每个子类型的表。

但是，在模型中你必须做更多的处理：

```
class PostInfo < ActiveRecord::Base
  belongs_to :post, :polymorphic => true
  # will need these 2 fields: :post_id, :post_type (might be AudioPost, ImagePost, etc)
end

class AudioPost < ActiveRecord::Base
  has_one :post_info, :as => :post

  # you may also want these:
  accept_nested_attributes_for :post_info
  delegate :name, :slug, :posted_at, :to => :post_info
end 
```

所以现在如果你想获得所有的帖子，你可以：

```
Blog.find(1).post_infos

post_info.post # => audio_post, image_post, or whatever depending on post_type 
```

如果您不想使用`.post_infos`，您也可以更改所有这些名称，例如：

```
class Post < ActiveRecord::Base
  belongs_to :actual_post # actual_post_id, actual_post_type
end

class AudioPost < ActiveRecord::Base
  has_one :post, :as => :actual_post
  accept_nested_attributes_for :post
  delegate :name, :slug, :posted_at, :to => :post
end 
```

现在，你有：

```
posts = Blog.find(1).posts

actual_post = posts.first.actual_post # => an audio_post instance

actual_post.name # => same as actual_post.post.name, so you do not need the name field in the AudioPost model 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T04:55:35.577

虽然我个人也更喜欢组合而不是继承，但 ActiveRecord 不喜欢。在这种情况下，如果您想使用 ActiveRecord 提供的工具，您应该查看[Single Table Inheritance](http://railsforum.com/viewtopic.php?id=3815)，它可以解决您的两个问题。但是，它确实使用了继承。

切换到非 ActiveRecord orm 可能会为您提供一种方法，而无需通过继承完成所有操作。我曾经使用过[DataMapper](http://datamapper.org/)，它更喜欢组合，在过去取得了成功，但它不像 ActiveRecord 那样功能丰富，并且可能无法提供您需要的东西。

# c# - 实现“即时”客户端-服务器通信的最佳解决方案？

> ID：10859459
> 
> 赞同：0
> 
> 时间：2012-06-02T03:00:47.443
> 
> 标签：c#, .net, sockets

我为这个蹩脚的标题道歉，但在努力寻找更好的标题后 15 分钟，我干脆放弃了。
想象以下场景：

*   用 C# 编写的桌面应用程序`A`会监听用户讲话，并**在讲话发生时**`WAV`将文件转换为块 ( `byte[]`)
***   `A`然后需要将这些块发送到服务器`B`（我们的 Windows 服务器）**，因为语音仍在发生***   服务器`B`等待所有块到达（在语音完成后），然后转身向服务器`C`（第 3 方语音到文本识别引擎）发出一个 HTTP POST，其中包含语音的完整`byte[]`表示*   服务器`B`获取响应并对生成的字符串进行一些处理，然后将对象发送回桌面应用程序`A`（可以是字符串或图像）**

 **其中一项要求（粗体声明）是，为了提高效率，`A`不应等待语音完成后才开始将块发送到`B`.

我们整理了一个使用 TCP 套接字的测试解决方案（似乎工作正常），但由于我们使用套接字的经验很少，我们有点不情愿（不确定所有限制）。

**有没有更好的建议来实现我们的目标？**

PS：另一个需要确认的要求可能是`A`用“非托管”C++编写的，这可能会阻止任何纯粹的.NET实现（比如WCF的双工服务？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:01:03.573

我编写了一个网络库，它为您处理所有血腥的网络细节（它快速且异步）。

您所要做的就是管理发送/接收的信息。

这是一个介绍：http: [//blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/](http://blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:44:36.700

我可以考虑进行一些更改，我认为这将提高客户端/服务器的性能。

首先，不要发送`byte[]`from `A`to`B`并等待发送所有块，而是发送`byte[]`from `A`to`C`然后等待发送所有数据包。

* * *

这是一个应该有帮助的图表：

```
A -> C (waits for all packets) -> B (does some stuff to the string) -> A 
```

* * *

如果您不需要服务器`B`，那么您可以执行以下操作：

```
A -> C (waits for all packets, then does some stuff to the string) -> A 
```

* * *

这是您目前正在做的事情：

```
A -> B (waits for all packets) -> C -> B (does some stuff to the string) -> A 
```

第一个想法你只发送数据包 3 次，第二个想法只有 2 次，而你的实现你发送数据包 4 次。尽管在所有情况下您发送数据包的次数都无关紧要，但我认为在这一次中会很重要，因为您需要它`on-the-fly`。所以发送更少的数据包=更快的响应。

希望这对您有所帮助或给您一个想法！**

# python - 对如何在 Django-social-auth 中应用 google 和 yahoo OpenID 感到困惑

> ID：10859461
> 
> 赞同：1
> 
> 时间：2012-06-02T03:00:49.800
> 
> 标签：python, django, openid, django-socialauth

我从[https://github.com/omab/django-social-auth](https://github.com/omab/django-social-auth)获得 django social auth并按照其说明进行操作。

我正在使用`google oauth`，`yahoo auth`但问题是它无法获取用户的`first name`和`lastname`，所以我想用来`OpenID`在数据库中保存`first name`, `last name`, `email`, 等...但是在文档中我无法理解如何实现 id .

我还去了[http://openid.net/get-an-openid/](http://openid.net/get-an-openid/)也许我可以制作一个应用程序，但我找不到如何去做。

我的问题是如何`OpenID`在我的 django 中启用 google 和 yahoo？

这就是我在 settings.py 中所做的

```
AUTHENTICATION_BACKENDS = (
    'userena.backends.UserenaAuthenticationBackend',
    'guardian.backends.ObjectPermissionBackend',
    'django.contrib.auth.backends.ModelBackend',
    'social_auth.backends.facebook.FacebookBackend',
    'social_auth.backends.twitter.TwitterBackend',
    'social_auth.backends.google.GoogleOAuthBackend',
    'social_auth.backends.google.GoogleOAuth2Backend',
    'social_auth.backends.google.GoogleBackend',
    'social_auth.backends.yahoo.YahooBackend',
    'social_auth.backends.OpenIDBackend'
)

#facebook
FACEBOOK_APP_ID              = '45252'
FACEBOOK_API_SECRET          = '234324'
FACEBOOK_EXTENDED_PERMISSIONS = ['email']
#twitter
TWITTER_CONSUMER_KEY = '234324'
TWITTER_CONSUMER_SECRET = '234234'
TWITTER_EXTENDED_PERMISSIONS = ['email']
#google
#GOOGLE_OAUTH2_CLIENT_ID = 23423#''
#GOOGLE_OAUTH2_CLIENT_SECRET = '234324'
#GOOGLE_APP_ID = '23432'
#GOOGLE_APP_KEY = '234'
#GOOGLE_SREG_EXTRA_DATA = ''#[('First name', '...')]
#GOOGLE_AX_EXTRA_DATA = ''# [('...', '...')]
#yahoo
#YAHOO_CONSUMER_KEY = '234342'
#YAHOO_CONSUMER_SECRET = '234234' 
```

当我访问`http://127.0.0.1:8000/associate/google/`或`http://127.0.0.1:8000/associate/yahoo/`它进入雅虎或谷歌的登录但它没有登录我的我的 django 项目并且当我查看我的数据库时，没有创建用户......

我认为使用`OpenID`for`google`并且`yahoo`不需要`KEY`or `ID`。所以它不需要`app`像我所做的那样`facebook`吗`twitter`？

我总是在我的日志中得到这个：

```
Generated checkid_setup request to https://www.google.com/accounts/o8/ud with assocication AMlYA9XiAAnknkW9He8EyJeKuzgFtnhl9YByYurLWutc80ZtG_5XwbOW
[02/Jun/2012 15:00:23] "GET /associate/google/ HTTP/1.1" 200 2390
Error attempting to use stored discovery information: <openid.consumer.consumer.TypeURIMismatch: Required type http://specs.openid.net/auth/2.0/signon not found in ['http://specs.openid.net/auth/2.0/server', 'http://openid.net/srv/ax/1.0', 'http://specs.openid.net/extensions/ui/1.0/mode/popup', 'http://specs.openid.net/extensions/ui/1.0/icon', 'http://specs.openid.net/extensions/pape/1.0'] for endpoint <openid.consumer.discover.OpenIDServiceEndpoint server_url='https://www.google.com/accounts/o8/ud' claimed_id=None local_id=None canonicalID=None used_yadis=True >>
Attempting discovery to verify endpoint
Performing discovery on https://www.google.com/accounts/o8/id?id=AItOawmyGFHvB71i5EXC9I1dyjOKEXxIPJtHRqM
Received id_res response from https://www.google.com/accounts/o8/ud using association AMlYA9XiAAnknkW9He8EyJeKuzgFtnhl9YByYurLWutc80ZtG_5XwbOW
No handlers could be found for logger "SocialAuth" 
```

有人可以帮助我如何申请`OpenID`和`google`参与`yahoo`我的 django 项目吗？

提前致谢 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:34:33.390

我在实现 OpenID 时也遇到了一些问题。SocialAuth 给了我错误页面，没有任何解释。

经过一番研究，我发现问题出在管道设置上。就我而言，我的 pipeline.py 出现错误。有些方法有错误，但 django 很安静，没有记录任何错误。

当我将 SOCIAL_AUTH_PIPELINE 更改为一些简单的值时，错误停止出现：

```
SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.associate.associate_by_email',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'social_auth.backends.pipeline.user.get_username',
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
    'social_auth.backends.pipeline.misc.save_status_to_session',
) 
```

此设置取自 SocialAuth 自述文件。

总之，如果身份验证不起作用并且日志什么也没说，则问题可能出在管道中（在设置或方法中）。

# java - 使用文本文件在 Java 中携带命令

> ID：10859462
> 
> 赞同：1
> 
> 时间：2012-06-02T03:01:00.297
> 
> 标签：java, file, parsing, text

你好我对java和编程相当陌生。我想知道如何读取文本文件（test.txt）并实现它以执行一个过程，例如在链表中创建和删除节点以及为它们分配一个值。例如，如果 txt 文件读取：

插入 1

插入 3

删除 3

我希望程序创建一个节点并为其分配值 1，创建一个节点并为其分配值 3，然后删除具有分配值 3 的那个节点。

这是我到目前为止的一些粗略代码。谢谢你。

**代码：**

```
import java.io.*;

class FileRead 
{

  public static void main(String args[])
  {

    try
    {

      // Open the file that is the first 

      // command line parameter

      FileInputStream fstream = new FileInputStream("textfile.txt");

      // Get the object of DataInputStream

      DataInputStream in = new DataInputStream(fstream);

      BufferedReader br = new BufferedReader(new InputStreamReader(in));

      String strLine;

      //Read File Line By Line

      while ((strLine = br.readLine()) != null)
      {

        // Print the content on the console

        System.out.println (strLine);

      }

      //Close the input stream

      in.close();

    }

    catch (Exception e){//Catch exception if any

    System.err.println("Error: " + e.getMessage());

  }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:21:36.140

如果文件中的命令格式始终正确，您可以使用 Scanner 包装输入流并使用 读取单词`next()`，然后`nextInt()`读取数字。无需复杂的输入验证。这甚至允许数字与命令位于不同的行。

如果您希望输入无效，为简单起见，您可以使用当前的逐行读取方案并检查命令。用 . 按空格修剪和标记行`.trim().split("\\s+")`。然后比较令牌数组中的第一项并检查它是否是有效命令。命令有效则调用相应函数处理，否则打印错误信息。

如果您有多个命令，则可以使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)使您的代码更易于管理。

# excel - Excel VBA 疑难解答——当我运行这个子程序时，是什么导致程序死机？

> ID：10859466
> 
> 赞同：0
> 
> 时间：2012-06-02T03:02:51.697
> 
> 标签：excel, vba

我编写了一个导致程序冻结的 Excel VBA 子程序。我已将问题隔离到 sub 中的 Do-Until 循环。

先说一点背景资料：

我有两张需要合并的工作表。合并后，某些行将包含重复数据。重复行将在 D 列中具有相同的值。

Do-Until 循环将每行中的 D 列值与下面一行的值进行比较。如果值相同，则删除该行。我还在 A 列中使用了一个特殊的行编号公式，所以每当有删除时，子将公式从当前行复制到下面的行，因为删除会弄乱公式中的引用。循环继续，直到它到达一个空行。

目前，工作表有近 500 行，所以数据很多，但不是很多，对吧？sub 是在 Office 2003 中创建的，位于 xls 文件中。我目前正在运行 Office 2010 并在兼容模式下使用该文件。

无论如何，我已经复制了下面循环的代码。有谁知道为什么循环可能导致程序冻结？提前致谢。

```
Do Until IsEmpty(ActiveCell)

' Define rows and cells
  Row1 = ActiveCell.row()
  RowPlus1 = ActiveCell.row() + 1
  RowMinus1 = ActiveCell.row() - 1

  Row1Student = "D" & Row1
  RowPlus1Student = "D" & RowPlus1

  Row1Number = "A" & Row1
  RowMinus1Number = "A" & RowMinus1

  If Val(Range(Row1Student)) = Val(Range(RowPlus1Student)) Then
    ActiveCell.EntireRow.Select
    Selection.Delete Shift:=xlUp
    Range(RowMinus1Number).Select
    Selection.Copy
    Range(Row1Number).Select
    Selection.PasteSpecial Paste:=xlPasteFormulas, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    ActiveCell.Offset(-1, 0).Select
  End If

  ActiveCell.Offset(1, 0).Select

Loop 
```

PS：无论如何，我都不是专业的程序员。我自学了 VBA，所以我很清楚我的代码可能不是很干净。这就是为什么我希望从真正接受过 VBA 培训的人那里得到一些反馈。

编辑添加：好的，我删除了循环的复制和粘贴部分，这似乎大大加快了速度。那么，有没有人知道为什么 sub 的特定部分会产生问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T08:17:13.730

在我的脑海中（没有任何测试），看起来你正在进入最后一行，然后无休止地循环，因为 IsEmpty(ActiveCell) 永远不会返回 true。

（你选择了最后一行，不能删除后面的那一行，但除了当前的 ActiveCell 无处可去。）

正如@HeadofCatering 所说，减少到一小部分数据并逐步执行代码，你会发现它

# jquery - 使用 jquery 隐藏或显示多个 div

> ID：10859467
> 
> 赞同：0
> 
> 时间：2012-06-02T03:03:05.863
> 
> 标签：jquery, html, checkbox

我有一个共同的问题，但有一个独特的转折。我有一个复选框列表。对于每个复选框，我想隐藏/显示一个或多个 div。像这样 - 如果我选中复选框 1，则会显示 div 1。如果我选中复选框 2，则会显示 div 2。如果我选中复选框 3，则会显示 div 1 和 2。这是扭曲，如果我选择复选框 1 和 3，然后取消选中 3，我希望 div 1 保持可见。代码将是这样的（只有 1 和 2 复选框有效）-

```
<input type="checkbox" name="1">1
<input type="checkbox" name="1">1
<input type="checkbox" name="2">2
<input type="checkbox" name="2">2
<input type="checkbox" name="???">1&2

<div id="showme1" style="display: none">Show me1</div>
<div id="showme2" style="display: none">Show me2</div>

<script type="text/javascript">

var MyCheckboxes1=$("input[name='1']");

MyCheckboxes1.change(function() {
  $("#showme1").toggle(MyCheckboxes1.is(":checked"));
});

var MyCheckboxes2=$("input[name='2']");

MyCheckboxes2.change(function() {
  $("#showme2").toggle(MyCheckboxes2.is(":checked"));
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-01T04:11:18.743

这样的事情怎么样，简单的逻辑，使用基于是否选中复选框的 if else 语句：http: [//jsfiddle.net/qvhpfzs7/](http://jsfiddle.net/qvhpfzs7/)

```
<input type="checkbox" id="c1"/> show Div 1
<br/>
<input type="checkbox" id="c2"/> show Div 2
<br/>
<input type="checkbox" id="c3"/> show Div 1 AND Div 2
<br/><br/>
<div class="div1">THIS IS THE CONTENT OF DIV 1</div>
<div class="div2">THIS IS THE CONTENT OF DIV 2</div>

$(document).ready(function(){
    $('.div1').hide();
    $('.div2').hide();
    var d1 = false;
    var d2 = false;
    $('input[type="checkbox"]').on('change', function(){
        if ($('#c1').is(':checked')) { d1 = true; }
        else { d1 = false; }
        if ($('#c2').is(':checked')) { d2 = true; }
        else { d2 = false; }
        if ($('#c3').is(':checked')) {
            d1 = true;
            d2 = true;
        }
        if (d1) { $('.div1').show(); } else { $('.div1').hide(); }
        if (d2) { $('.div2').show(); } else { $('.div2').hide(); }  
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-01T03:14:57.503

**好吧，这就是我所拥有的。检查下面的代码**

```
 <input type="checkbox" name="1">1
  <input type="checkbox" name="1">1
  <input type="checkbox" name="2">2
  <input type="checkbox" name="2">2
  <!-- <input type="checkbox" name="???">1&2 -->
  <input type="checkbox" name="3">3

  <div id="showme1" style="display: none">Show me1</div>
  <div id="showme2" style="display: none">Show me2</div>

<script>
  var MyCheckboxes1=$("input[name='1']");

  MyCheckboxes1.change(function() {
    $("#showme1").toggle(MyCheckboxes1.is(":checked"));
  });

  var MyCheckboxes2=$("input[name='2']");

  MyCheckboxes2.change(function() {
    $("#showme2").toggle(MyCheckboxes2.is(":checked"));
  });

  var MyCheckboxes3=$("input[name='3']");

  MyCheckboxes3.change(function() {
       <!-- for checkbox 3 I just toggled showme 1 & 2 -->
      $("#showme1").toggle();
      $("#showme2").toggle();
  });    
</script> 
```

**如果选择了 1 和 3，则取消选中 3，则 1 仍然可见。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:32:34.790

好的，在玩了一些游戏之后，以及一位名叫 Brian 的朋友和聪明人的想法，这就是我想出的解决方案。很简单，一旦我想到它。

HTML-

```
<div id="showme1" style="display: none">Show me1</div>
<div id="showme2" style="display: none">Show me2</div> 
```

JS-

```
var MyCheckboxes1=$("input[class='1']");

MyCheckboxes1.change(function() {
  $("#showme1").toggle(MyCheckboxes1.is(":checked") || MyCheckboxes12.is(":checked"));
});

var MyCheckboxes2=$("input[class='2']");

MyCheckboxes2.change(function() {
  $("#showme2").toggle(MyCheckboxes2.is(":checked") || MyCheckboxes12.is(":checked"));
});

var MyCheckboxes12=$("input[class='12']");

MyCheckboxes12.change(function() {
  $("#showme1").toggle(MyCheckboxes1.is(":checked") || MyCheckboxes12.is(":checked"));
  $("#showme2").toggle(MyCheckboxes2.is(":checked") || MyCheckboxes12.is(":checked"));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-01T05:45:49.240

这是我尝试过的。希望这可以帮助。

JavaScript -

```
function handleClick(cb) {
        if(cb.checked==true){
            if(cb.name==3){ // Show both div
                $('#showme1').show();
                $('#showme2').show();
            }else{
                $('#showme'+cb.name).show();
            }
        }else{
            if(cb.name==3){ // Show both div 
                $('#showme1').hide();
                $('#showme2').hide();
            }else{
                $('#showme'+cb.name).hide();
            }
        }
      } 
```

HTML -

```
<input type="checkbox" name="1" onclick='handleClick(this);'>1
<input type="checkbox" name="1" onclick='handleClick(this);'>1
<input type="checkbox" name="2" onclick='handleClick(this);'>2
<input type="checkbox" name="2" onclick='handleClick(this);'>2
<input type="checkbox" name="3" onclick='handleClick(this);'>3

<div id="showme1" style="display: none">Show me1</div>
<div id="showme2" style="display: none">Show me2</div> 
```

您也可以在最初显示 div 时使用 toggle()。

# file-upload - JSF 2.0.3、servlet 2.5 文件上传问题

> ID：10859469
> 
> 赞同：0
> 
> 时间：2012-06-02T03:03:44.153
> 
> 标签：file-upload, jsf-2

我正在使用 JSF 2.0.3 和 Servlet 2.5., tomahawk20 (1.1.10)。我按照 Balu C 在其他文章中推荐的步骤进行操作。但是当我提交按钮时（选择文件后），我得到“UploadedFile”实例的空值。我在 web.xml 中检查了我的 ExtensionsFilter 配置，但没有运气。你能帮忙吗？

```
My Manages bean:(IN session Scope)
-------------------
private UploadedFile uploadedFile;

public UploadedFile getUploadedFile() {
   return uploadedFile;
}

public void setUploadedFile(UploadedFile uploadedFile) {
   this.uploadedFile = uploadedFile;
}

public String submitStep2() {
    System.out.println("File type: " + uploadedFile.getContentType()); 
    // <---- NULL POINTER here, because uploadedFile instance is null-->
}

web.xml

<filter>
        <filter-name>ExtensionsFilter</filter-name>
        <filter-class>
            org.apache.myfaces.webapp.filter.ExtensionsFilter
        </filter-class>
        <init-param>
            <description>
            Set the size limit for uploaded files.
                Format: 10  - 10 bytes
                        10k - 10 KB
                        10m - 10 MB
                        1g  - 1 GB
            </description>
            <param-name>uploadMaxFileSize</param-name>
            <param-value>10m</param-value>
        </init-param>
        <init-param>
            <description>
            Set the threshold size - files below this limit are stored 
            in memory, files above this limit are stored on disk.
                Format: 10  - 10 bytes
                        10k - 10 KB
                        10m - 10 MB
                        1g  - 1 GB
            </description>
            <param-name>uploadThresholdSize</param-name>
            <param-value>10k</param-value>
        </init-param>
        <init-param>
            <description>
                Set the path where the intermediary files will be stored.
            </description>
            <param-name>uploadRepositoryPath</param-name>
            <param-value>/temp</param-value>
        </init-param>
    </filter>

<filter>
        <filter-name>ExtensionsFilter</filter-name>
        <filter-class>
            org.apache.myfaces.webapp.filter.ExtensionsFilter
        </filter-class>
        <init-param>
            <description>
            Set the size limit for uploaded files.
                Format: 10  - 10 bytes
                        10k - 10 KB
                        10m - 10 MB
                        1g  - 1 GB
            </description>
            <param-name>uploadMaxFileSize</param-name>
            <param-value>10m</param-value>
        </init-param>
        <init-param>
            <description>
            Set the threshold size - files below this limit are stored 
            in memory, files above this limit are stored on disk.
                Format: 10  - 10 bytes
                        10k - 10 KB
                        10m - 10 MB
                        1g  - 1 GB
            </description>
            <param-name>uploadThresholdSize</param-name>
            <param-value>10k</param-value>
        </init-param>
        <init-param>
            <description>
                Set the path where the intermediary files will be stored.
            </description>
            <param-name>uploadRepositoryPath</param-name>
            <param-value>/temp</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>ExtensionsFilter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>

<servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

<servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en">
<f:view>

<h:head>
...
</h:head>
<h:body>
...
Choose File: 
<t:inputFileUpload id="file" value="#{createMB.uploadedFile}" required="true" />
                                <br />
<h:commandButton value="Submit" action="#{createMB.submitStep2}" />
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:21:50.247

最明显的是您忘记将属性 enctype="multipart/form-data" 添加到 h:form 标签。

例子：

```
<h:form id="uploadForm" enctype="multipart/form-data"> .... </h:form> 
```

这当然只是一个猜测，因为您的代码片段中没有提供这部分。

# ios - 不可编辑的 UITextView 左对齐 RTL（阿拉伯语、希伯来语等）文本

> ID：10859471
> 
> 赞同：1
> 
> 时间：2012-06-02T03:04:05.450
> 
> 标签：ios, objective-c, uitextview, right-to-left

使用适用于 iPad 的 iOS 5.0+，我有一个在 UITextView 中包含阿拉伯文本的应用程序，其中：

```
myTextView.editable = NO; 
```

奇怪的是，阿拉伯文字突然左对齐而不是右对齐，给用户的可读性造成了很大的问题。

我感谢任何帮助克服这种奇怪的行为！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T15:42:51.863

解决了！事实证明这很简单：只需将 textAlignment 设置为 UITextAlignmentRight。

UITextView 在可编辑和不可编辑时的工作方式不同，尤其是在 RTL 文本方面。如果在可编辑的文本视图中基本书写方向是 RTL，则必须将文本左对齐，而不是右对齐，以便文本真正右对齐（RTL 书写方向翻转默认值！）

所以，当你有一个 UITextView 时，你可能要先检查可编辑属性，然后使用第一个字符的书写方向（这是 iOS 确定文本是左对齐还是右对齐）来设置 textAlignment 属性。

例如：

```
// check if the text view is both not editable and has an RTL writing direction
if (!someTextView.editable && [someTextView baseWritingDirectionForPosition:[someTextView beginningOfDocument] inDirection:UITextStorageDirectionForward] == UITextWritingDirectionRightToLeft) {
        // if yes, set text alignment right
        someTextView.textAlignment = UITextAlignmentRight;
    } else {
        // for all other cases, set text alignment left
        someTextView.textAlignment = UITextAlignmentLeft;
    }
} 
```

iOS 6 的更新：

在 iOS 6 中，UITextView 的 textAlignment 属性实际上对应于它在屏幕上的外观。对于 iOS 6，只需将 textAlignment 设置为您想要查看的方向即可。上面的代码按照 iOS 5.1 和更早版本的描述工作。

我希望这可以帮助其他人处理这个问题！

# python - 查找有关 Python 函数的更多信息，3 个快速问题

> ID：10859472
> 
> 赞同：0
> 
> 时间：2012-06-02T03:04:10.113
> 
> 标签：python, pycharm

我正在[阅读 Python 教程](http://docs.python.org/tutorial/introduction.html)，其中演示了以下示例：

```
>>> 'str'.strip() + 'ing'   #  <-  This is ok 
```

在这个例子中（据我所知）`str`是一个字符串，函数`strip()`被调用。

我有理由期望找到该功能正在执行`>>> dir("abc")`。确实功能被列为 `'strip'`

**问题 1：**为什么有些功能列为 ，`__name__`而另一些列为`name`？

**问题 2：**我现在想查找有关此功能的更多信息。运行时`help("abc")`（期望获得可以在字符串上运行的所有函数的手册页），`strip`未列出。为什么？我在哪里可以找到有关特定功能的更多信息？

**问题 3：**使用[PyCharm](http://www.jetbrains.com/pycharm/)我希望以下自动完成功能可以工作，但我什么也没看到。这是为什么？

![在此处输入图像描述](../Images/3682a6e5f441f224d8f67ba41cec84ee.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T03:12:11.500

1.  被双下划线包围的函数是可以被覆盖以实现特殊行为的特殊函数。例如，该`__getitem__`函数在一个类中实现时，允许对该类中的项目进行索引访问。（换句话说，`a[5]`在大多数情况下等价于`a.__getitem__(5)`）。下划线只是表示它们很特殊，需要一些特殊处理。（例如，不要自己发明。）

2.  当您将字符串传递给 时`help`，它会将字符串视为查询。例如，`help('class')`调出一堆关于类的信息。如果您想要`help`字符串对象的文本，请执行`help(str)`或`help('str')`。

3.  我不使用 PyCharm，所以我无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:13:04.980

与其`help("abc")`在抽象基类上提供帮助，不如尝试`help(str)`在字符串上提供帮助，包括*str.strip*方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T21:52:30.537

**答案为 3**。确保您在**设置 |中指定了 Python 解释器。项目口译员**？

这是我为您的示例得到的信息： ![在 PyCharm 中完成](../Images/238eac8b553e0c41b79c3fd5ae86e25b.png)

# android - Android - 有没有办法知道我的应用程序被卸载了多少次？

> ID：10859474
> 
> 赞同：-1
> 
> 时间：2012-06-02T03:04:40.727
> 
> 标签：android

只是试图了解可以测量的内容。有没有办法测量卸载次数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:10:50.833

我不认为有任何记住应用程序被卸载次数的计数。另外，我认为您可以了解正在卸载的其他应用程序，而不是您的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:08:33.323

不，实际上..我们没有任何指标。Android 中也没有在卸载应用程序时调用的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:26:53.033

其实有办法说！！！它在您的 android 帐户管理中。他们列出了总安装量和总活跃安装量！

# css - 通过 CSS 精灵的伪随机图像（随机位置）

> ID：10859476
> 
> 赞同：0
> 
> 时间：2012-06-02T03:06:01.410
> 
> 标签：css, random, css-sprites

我希望我的 HTML 中的标题图像是随机的。我已经通过使用[这个](http://www.alistapart.com/articles/randomizer/)php 文件实现了这一点，但是我想做一些不同的事情。我想让随机图像成为一个精灵的一部分。这样，所有图像都可以同时加载，并且用户在导航到不同页面时不必看到图像加载。我还想选择随机因素，即显示这张图片 50% 其他 10% 的时间（如果有 6 张图片）。这甚至可能吗？业余爱好者从哪里开始？这是实现我的场景以使用户看到尽可能少的图像负载的最佳方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:42:51.147

您可以像往常一样在 CSS 中声明 sprite 标题样式，然后简单地调整 sprite in-html 的 xpos/ypos。您将能够回收一​​些已有的逻辑并操纵单个标题概率。

不过，我会坚持使用单个资产，特别是如果它们是谷歌涂鸦的大小。这种方式更容易扩展，并且假设您的其余静态内容已经被缓存，下载新图像的任何开销都可以忽略不计。

# javascript - 移动网站中带有图像和文本的按钮的最佳实践

> ID：10859484
> 
> 赞同：0
> 
> 时间：2012-06-02T03:08:04.993
> 
> 标签：javascript, jquery, html, mobile

请参阅下面的屏幕截图，我创建了一个`div`来包装另外两个`div`图像和文本，然后我使用 CSS`position: absolute`将它们`div`合并在一起。

但是，我在移动设备上测试时发现按钮不灵敏，有时我需要触摸几次按钮才能生效。

那么，我的代码有问题吗？创建带有图像和文本的按钮的最佳做法是什么？

谢谢

![在此处输入图像描述](../Images/beb7b3f8b746771cfc861b8e1ef03bb7.png)

```
<div class="r">
    <div class="a">
        <div class="i"><img src="store_btn_on.png" /></div>
        <div class="t">Shatin</div>
    </div>
    <div class="b">
        <div class="i"><img src="store_btn_off.png" /></div>
        <div class="t">Causeway Bay</div>
    </div>
    <div class="c">
        <div class="i"><img src="store_btn_off.png" /></div>
        <div class="t">Kowloon Bay</div>                            
    </div>
</div> 
```

**javascript部分更新**

```
addButtonListener($("#store > .r > .a"), function(event, target){
        $("#some_content").css("display", "none");
        $("#other_content").css("display", "block");
        $(".r > .b > .a > img").attr("src" , "store_btn_on.png");
        $(".r > .b > .b > img, .r > .b > .c > img").attr("src" , "store_btn_off.png");
});

function addButtonListener(targets, job){
    if ("ontouchstart" in document.documentElement){
        targets.each(function(){
            $(this)[0].addEventListener('touchstart', function(event){
                event.preventDefault();
                $(this).attr({ "x": event.targetTouches[0].clientX, "diffX": 0, "y": event.targetTouches[0].clientY, "diffY": 0 });
                $(this).addClass("on");
            }, false);
            $(this)[0].addEventListener('touchmove', function(event){
                $(this).attr({
                    "diffX": Math.abs(event.targetTouches[0].clientX - $(this).attr("x")),
                    "diffY": Math.abs(event.targetTouches[0].clientY - $(this).attr("y"))
                });
            }, false);
            $(this)[0].addEventListener("touchend", function(event){
                $(this).removeClass("on");
                if ($(this).attr("diffX") < 5 && $(this).attr("diffY") < 5){ $(job(event, $(this))); }
            }, false);
        });
    }
    else {
        targets.each(function(){
            $(this).mousedown(function(event){ event.preventDefault(); $(this).addClass("on"); });
            $(this).mouseup(function(event){ event.preventDefault(); if ($(this).hasClass("on")){ $(job(event, $(this))); } $(this).removeClass("on"); });
            $(this).hover(function(event){ $(this).removeClass("on"); });
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T03:34:05.597

我不确定您的按钮在移动设备上的敏感性（您没有显示任何处理点击事件的代码），但我认为最好这样编写 HTML：

```
<div class="r">
    <div class="button on">
        <span>Shatin</span>
    </div>
    <div class="button">
        <span>Bay</span>
    </div>
    <div class="button">
        <span>Bay</span>                           
    </div>
</div> 
```

然后在样式表中使用 CSS：

```
.button {
    background: url(http://domain.com/images/store_btn_off.png) no-repeat 0 0;
    /* Additional button styles */
}

.button.on {
    background: url(http://domain.com/images/store_btn_on.png) no-repeat 0 0;
}

.button span {
    color: #FFF;
    margin: auto;
} 
```

这使得只需添加或删除 on 类就可以轻松地动态打开或关闭按钮。

虽然没有必要，但您可能也有兴趣查看 CSS3 渐变以创建类似的简单渐变背景图像，然后在没有任何渐变支持的浏览器中很好地降级为图像。

类名“r”和“b”不是很具描述性。除非某些 HTML/CSS 缩小器将它们放在那里并且您在开发代码中有正确的名称，否则我会考虑为您的类提供更具描述性的名称。

# bash - 使用 bash 脚本解析文本

> ID：10859491
> 
> 赞同：2
> 
> 时间：2012-06-02T03:09:59.647
> 
> 标签：bash, parsing

我想构建一个 bash 脚本来读取文件并生成一些命令行参数。我的输入文件看起来像

```
20.83      0.05     0.05  __adddf3
20.83      0.10     0.05  __aeabi_fadd
16.67      0.14     0.04  gaussian_smooth
8.33      0.16     0.02   __aeabi_ddiv 
```

我必须检测并复制所有 __* 字符串并将它们转换为命令，例如

```
gprof -E __adddf3 -E __aeabi_fadd -E __aeabi_ddiv ./nameof.out 
```

到目前为止，我使用

```
#!/bin/bash
while read line
do
    if [[ "$line" == *__* ]] 
    then
        echo $line;
    fi
done <input.txt 
```

检测请求的行，但我想，我需要的是我无法弄清楚的单行命令。有什么好的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T03:46:11.923

修改你的脚本：

```
#!/bin/bash
while read -r _ _ _ arg
do
    if [[ $arg == __* ]] 
    then
        args+=("-E" "$arg")
    fi
done <input.txt
gprof "${args[@]}" ./nameof.out 
```

下划线是有效的变量名，用于丢弃不需要的字段。

最后一行执行带有参数的命令。

`while`您可以使用进程替换将另一个命令的结果输入循环：

```
#!/bin/bash
while read -r _ _ _ arg
do
    if [[ $arg == __* ]] 
    then
        args+=("-E" "$arg")
    fi
done < <(gprof some arguments filename)
gprof "${args[@]}" ./nameof.out 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T03:51:12.773

给猫剥皮的另一种方法：

```
gprof `sed -ne '/__/s/.* / -E /p' input.txt` ./nameof.out 
```

sed 脚本搜索带有 的行`__`，然后将所有内容更改到最后一个空格`-E`并打印结果。如果您的空白可能包含制表符，您可能需要稍微调整一下。为了清楚起见，我在这里没有考虑到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T03:20:00.450

使用`awk`：

```
awk '$4 ~/^__/{a=a" -E "$4}END{system("gprof "a" ./nameof.out")}' inputFile 
```

# jquery - 用 jquery 替换

> ID：10859492
> 
> 赞同：0
> 
> 时间：2012-06-02T03:10:12.460
> 
> 标签：jquery, replacewith

我有这样的ajax调用生成的列表

```
<ul id="list">
   <li name="A">some val</li>
   <li name="B">some val</li>
   <li name="C">some val</li>
</ul> 
```

使用 setinterval，相同的 ajax 调用将创建一个这样的列表

```
<ul id="listClone">
  <li name="A">some new val</li>
  <li name="B">some cccc val</li>
  <li name="C">some ddd val</li>
</ul> 
```

获得 listClone 后，我需要将列表“A”替换为 listClone A。

我如何用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:42:23.417

我相信您只想替换 li 元素：

```
$('#list li[name=A]').html($('#listclone li[name=A]').html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:25:50.710

```
$("#list").html($("#listClone").remove().html()); 
```

listClone 被移除。并且列表的 html 被替换为 listClone 的 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T04:25:37.523

要删除整体`#list`，`#listClone`您可以执行以下操作：

```
$('#list').replaceWith($('#listClone')); 
```

`#list`要删除带有项目的特定列表项，`#listClone`您可以执行以下操作：

```
$('#list').eq(0).replaceWith($('#listClone').eq(0)); // replace first element 
```

或使用`name`属性

```
$('#list li[name=A]').replaceWith($('#listClone li[name=A]')); // replace first element 
```

也可以使用`.html()`：

```
$('#list li[name=A]').html($('#listClone li[name=A]').html()); // replace first element 
```

也可以使用`.text()`

```
$('#list li[name=A]').text($('#listClone li[name=A]').text()); // replace first element 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T03:15:16.677

`$('#list').replaceWith('<ul id="listClone"><li name="A">some new val</li><li name="B">some cccc val</li><li name="C">some ddd val</li></ul>');`

建议：

尝试将新列表 ID 保留为“list”而不是“listClone”，因为下次调用代码时这将不起作用。

# java - 如何编写 Java 程序来打开特定的文件扩展名（.pef）？

> ID：10859497
> 
> 赞同：0
> 
> 时间：2012-06-02T03:10:28.230
> 
> 标签：java

我需要编写一个java程序来打开一个特定的文件扩展名（这是打开一个`.pef`文件）。正在编写这个 java 程序来打开这个`.pef`文件并打印它。但是我不知道如何编写一个可以`.pef`默认打开文件扩展名的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:42:15.587

### 此解决方案特定于 Windows

在这篇文章中，我假设您的程序已经能够读取 .pef 类型的文件并打印它们。如果没有，请参阅 Treebranch 和 Himanshu 的帖子，了解如何操作。接下来，我将假设您的程序将在 Windows 命令行上调用，如下所示：

```
program.exe <filename.pef> 
```

要以编程方式更改关联，请执行以下步骤：

### 定义文件类型

```
ftype peffile="program.exe" "%1" 
```

记得使用`program.exe`这里的绝对路径。

### 将此文件类型与 .pef 关联

```
assoc .pef=peffile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:55:53.247

看：

*   [`Desktop.open(File)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29) *启动关联的应用程序以打开文件。*
*   [`Desktop.edit(File)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#edit%28java.io.File%29) *启动关联的编辑器应用程序并打开一个文件进行编辑。*
*   [`Desktop.print(File)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#print%28java.io.File%29) ***使用相关应用程序的打印命令，使用本机桌面打印工具打印文件。***

这假定应用程序已经与文件类型相关联。要创建文件关联，请启动您的应用程序。使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)并在启动文件中声明文件类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T03:15:44.320

我不熟悉这种文件类型，但我猜你将不得不读取文件的字节，然后从那里开始。您应该可以使用`FileInputStream`. 尝试查看本[教程](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T03:47:24.653

您可以使用 FileInputStream 来读取文件。

```
FileInputStream fr=new FileInputStream("xyz.pef");
int i=0;
while((i=fr.read())!=-1)
   System.out.print((char)i);
fr.close(); 
```

# java - Java IPN JSP 工作，但 Servlet 失败

> ID：10859499
> 
> 赞同：1
> 
> 时间：2012-06-02T03:10:56.780
> 
> 标签：java, jsp, servlets, paypal, paypal-ipn

一直试图让 IPN 响应调用通过 servlet 工作。我可以使用演示 jsp 来接收 IPN 请求，也可以发出和接收 IPN 响应。 [https://www.paypal.com/us/cgi-bin/webscr?cmd=p/pdn/ipn-codesamples-pop-outside#java](https://www.paypal.com/us/cgi-bin/webscr?cmd=p/pdn/ipn-codesamples-pop-outside#java)

但是当我在 servlet 中尝试相同的代码时它不起作用 - servlet 接收到初始 IPN 请求，我能够提取请求变量但是当我将它们返回到 paypal 时，我得到的响应基本上是一堆 HTML 和不是典型的 VERIFIED 消息。我已经冲浪了一段时间，也尝试过多种方式更改我的 servlet，但均无济于事。

谢谢

这是我的 servlet 代码

* * *

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.Enumeration;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.NameValuePair;
import org.apache.commons.httpclient.methods.GetMethod;
import org.apache.commons.httpclient.methods.PostMethod;
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

public class PPListen extends HttpServlet {

    /**
     * 
     */
    private static final long serialVersionUID = 8669468768750366974L;
    static Logger logger = Logger.getLogger(PPListen.class.getName());
    private static final String PAYPAL_TEST_URL = "https://www.sandbox.paypal.com/cgi-bin/webscr";

    private static final String PAYPAL_PROD_URL ="https://www.paypal.com/cgi-bin/webscr";

    //private HttpClient httpClient;

    public PPListen() {
        // TODO Auto-generated constructor stub
    }

    public void service(HttpServletRequest request, HttpServletResponse respose) throws ServletException, IOException {

        if (logger.isInfoEnabled()) {logger.info("Into Service ");}

        PropertyConfigurator.configure("c:\\D-Drive\\EclipseProjects\\gcms\\WEB-INF\\log4j.conf");
        String uri = request.getRequestURI();
        String rh = request.getRemoteHost();
        System.out.println("URI:"+uri+":");
        System.out.println("Remote Host:"+rh+":");
        // This is required by PayPal

        Enumeration<String> e = request.getParameterNames();
        String outStr = "cmd=_notify_validate";
        logger.debug("******* Output Data");
        while (e.hasMoreElements()) {
            String name = e.nextElement();
            String val = request.getParameter(name);
            outStr = outStr + "&"+name+"="+URLEncoder.encode(val);
            if (logger.isDebugEnabled()) {
                logger.debug("Received Value Named:"+name+": Value:"+val+":");
            }
        }

        URL u = new URL(PAYPAL_TEST_URL);
        URLConnection uc = u.openConnection();
        uc.setDoOutput(true);
        uc.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
        PrintWriter pw = new PrintWriter(uc.getOutputStream());
        pw.println(outStr);
        pw.close();
        BufferedReader in = new BufferedReader(new InputStreamReader(uc.getInputStream()));

        logger.debug("******* Output Data");
        while (true) {
            String result = in.readLine();
            if (result == null) {
                break;
            }
            logger.debug(result);
        }

        logger.debug("******* END");

        in.close();

    }
    /*

    public void service2(HttpServletRequest request, HttpServletResponse respose) throws ServletException, IOException {

        if (logger.isInfoEnabled()) {logger.info("Into Service ");}

        PropertyConfigurator.configure("c:\\D-Drive\\EclipseProjects\\gcms\\WEB-INF\\log4j.conf");

        ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
        String uri = request.getRequestURI();
        String rh = request.getRemoteHost();
        System.out.println("URI:"+uri+":");
        System.out.println("Remote Host:"+rh+":");
        // This is required by PayPal
        params.add(new NameValuePair("cmd","_notify_validate"));

        Enumeration<String> e = request.getParameterNames();
        while (e.hasMoreElements()) {
            String name = e.nextElement();
            String val = request.getParameter(name);
            params.add(new NameValuePair(name,val));
            if (logger.isDebugEnabled()) {
                logger.debug("Received Value Named:"+name+": Value:"+val+":");
            }
        }
         NameValuePair[] uu = (NameValuePair[])params.toArray(new NameValuePair[params.size()]);

         HttpClient client = new HttpClient();
         PostMethod post =  new PostMethod(PAYPAL_PROD_URL);
          post.setRequestBody(uu);

          if (logger.isDebugEnabled()) {
              logger.debug("--- calling parameters out to PayPal are ---");
              for (NameValuePair nvp: params) {
                  logger.debug(" Being Sent - Name:"+nvp.getName()+": Value:"+nvp.getValue());

              }
              logger.debug("--- end of calling parameters out to PayPal ---");
          }
          logger.debug("--- Prior to Connect Specific");
          logger.debug("--- after Connect Specific");
          client.executeMethod(post);
          logger.debug("--- after POST");
//        String resp = post.getResponseBodyAsString();

          int status = post.getStatusCode();
          byte[] responseBody = post.getResponseBody();
          logger.debug("Value Returned From PayPal is :"+new String(responseBody));
          logger.debug("Query String :"+post.getQueryString()+":");
          logger.debug("Status Code of call is "+status+":");

    }

} 
```

任何帮助都会很棒。谢谢

# python - 如何遍历字典中的元组

> ID：10859502
> 
> 赞同：1
> 
> 时间：2012-06-02T03:11:29.103
> 
> 标签：python, dictionary, loops

我需要在字典中的元组中将符号从正数更改为负数。因此，如果我有“位置：(3,4)”，我需要将其更改为“位置：(3,-4)”。这就是我所拥有的，但它不起作用。

```
for k,v in positionD.items():
    v = (v[0],-v[1])
    positionNewD[k] = v 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T15:03:23.277

对于 Python 3

```
positionNewD = {k: (x, -y) for k, (x, y) in positionD.items()} 
```

...因为 iteritems() 已重命名为 items()

[http://docs.python.org/3.1/whatsnew/3.0.html#views-and-iterators-instead-of-lists](http://docs.python.org/3.1/whatsnew/3.0.html#views-and-iterators-instead-of-lists)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:16:54.220

试试这个（需要 Python >= 2.7）：

```
positionNewD = {k: (x, -y) for k, (x, y) in positionD.iteritems()} 
```

对于旧版本：

```
positionNewD = dict((k, (x, -y)) for k, (x, y) in positionD.iteritems()) 
```

# sql - 在 sql 中，计算日期部分与组查询中的日期查找表

> ID：10859504
> 
> 赞同：0
> 
> 时间：2012-06-02T03:11:38.513
> 
> 标签：sql, postgresql, datetime

`date`当基表日期为或时，许多查询是按周、月或季度进行的`timestamp`。

通常，在`group by`查询中，是否使用 - 日期函数 -`day`预先计算了提取的表

注意：与[DATE 查找表类似的问题 (1990/01/01:2041/12/31)](https://stackoverflow.com/questions/2616119/date-lookup-table-1990-01-012041-12-31)

例如，在`postgresql`

```
create table sale(
  tran_id   serial       primary key,
  tran_dt   date         not null default current_date,
  sale_amt  decimal(8,2) not null,
  ...
);

create table days(
  day       date      primary key,
  week      date      not null,
  month     date      not null,
  quarter   date      non null
);

-- week query 1: group using funcs
select
  date_trunc('week',tran_dt)::date - 1 as week,
  count(1) as sale_ct,
  sum(sale_amt) as sale_amt
from sale
where date_trunc('week',tran_dt)::date - 1 between '2012-1-1' and '2011-12-31'
group by date_trunc('week',tran_dt)::date - 1
order by 1;

-- query 2: group using days
select
  days.week,
  count(1) as sale_ct,
  sum(sale_amt) as sale_amt
from sale
join days on( days.day = sale.tran_dt )
where week between '2011-1-1'::date and '2011-12-31'::date
group by week
order by week; 
```

对我来说，虽然`date_trunc()`功能看起来更有机，但`days`表格更易于使用。

这里有什么比口味更重要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:24:15.467

```
-- query 3: group using instant "immediate" calendar table
WITH calender AS (
        SELECT  ser::date AS dd
        , date_trunc('week', ser)::date AS wk
        -- , date_trunc('month', ser)::date AS mon
        -- , date_trunc('quarter', ser)::date AS qq
        FROM generate_series( '2012-1-1' , '2012-12-31', '1 day'::interval) ser
        )
SELECT
  cal.wk
  , count(1) as sale_ct
  , sum(sa.sale_amt) as sale_amt
FROM sale sa
JOIN calender cal ON cal.dd = sa.tran_dt
-- WHERE week between '2012-1-1' and '2011-12-31'
GROUP BY cal.wk
ORDER BY cal.wk
        ; 
```

注意：我修正了 BETWEEN 范围内的一个明显错字。

更新：我使用 Erwin 的递归 CTE 来挤出重复的 date_trunc()。嵌套 CTE 丰富：

```
WITH calendar AS (
        WITH RECURSIVE montag AS (
        SELECT '2011-01-01'::date  AS dd
        UNION ALL
        SELECT dd + 1 AS dd
        FROM   montag
        WHERE  dd < '2012-1-1'::date
        )
    SELECT mo.dd, date_trunc('week', mo.dd + 1)::date AS wk
    FROM montag mo
    )
SELECT
  cal.wk
  , count(1) as sale_ct
  , sum(sa.sale_amt) as sale_amt
FROM sale sa
JOIN calendar cal ON cal.dd = sa.tran_dt
-- WHERE week between '2012-1-1' and '2011-12-31'
GROUP BY cal.wk
ORDER BY cal.wk
        ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:33:13.220

是的，这不仅仅是品味问题。查询的性能取决于方法。

作为第一个近似值，函数应该更快。它们不需要连接，在单个表扫描中进行读取。

然而，一个好的优化器可以有效地利用查找表。它会知道目标值的分布。而且，内存中的连接可能会非常快。

作为数据库设计，我认为有一个日历表是非常有用的。某些信息（例如假期）将无法发挥作用。但是，对于大多数临时查询，日期函数都很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T17:37:03.640

**1**、你的表情：

> ...在“2012-1-1”和“2011-12-31”之间

不起作用。Basic[`BETWEEN`](http://www.postgresql.org/docs/current/interactive/functions-comparison.html)要求左参数小于或等于右参数。必须是：

```
... BETWEEN SYMMETRIC '2012-1-1' and '2011-12-31' 
```

或者这只是一个错字，你的意思是：

```
... BETWEEN '2011-1-1' and '2011-12-31' 
```

我不清楚您的查询应该检索什么。我*假设*您想要从 2011 年开始的所有周（周一至周日）来获取此答案的其余部分。在现代硬件上，这个表达式在不到一微秒的时间内准确生成（适用于任何年份）：

```
SELECT generate_series(
        date_trunc('week','2010-12-31'::date) + interval '7d'
       ,date_trunc('week','2011-12-31'::date) + interval '6d'
       , '1d')::date 
```

*请注意，“一年中的第一周”的[ISO 8601 定义略有不同。](http://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)

**2.**您的第二个查询根本不起作用。没有`GROUP BY`？

**3.**您链接到的问题没有处理 PostgreSQL，它具有出色的日期/时间戳支持。在大多数情况下，它[**`generate_series()`**](http://www.postgresql.org/docs/current/static/functions-srf.html)可以消除对单独的“天”表的需求——如上所示。您的查询将如下所示：

*与此同时， @wildplasser 提供了一个应该放在此处[的示例查询。](https://stackoverflow.com/a/10864424/939860)*

根据流行* 的需求，递归 CTE 版本 - 实际上距离成为一个严肃的替代方案不远！
[* “流行”是指[@wildplasser 非常严肃的要求](https://stackoverflow.com/questions/10859504/in-sql-calculating-date-parts-versus-date-lookup-table-in-group-queries/10864424#comment14154197_10864424)。]

```
WITH RECURSIVE days AS (
    SELECT '2011-01-01'::date  AS dd
          ,date_trunc('week', '2011-01-01'::date )::date AS wk

    UNION ALL
    SELECT dd + 1
          ,date_trunc('week', dd + 1)::date AS wk
    FROM   days
    WHERE  dd < '2011-12-31'::date
    )
SELECT d.wk
      ,count(*) AS sale_ct
      ,sum(s.sale_amt) AS sale_amt
FROM days d
JOIN sale s ON s.tran_dt = d.dd
-- WHERE d.wk between '2011-01-01' and '2011-12-31'
GROUP BY 1
ORDER BY 1; 
```

也可以写成（[与@wildplasser 的版本相比](https://stackoverflow.com/a/10864424/939860)）：

```
WITH RECURSIVE d AS (
    SELECT '2011-01-01'::date AS dd
    UNION ALL
    SELECT dd + 1 FROM d WHERE dd < '2011-12-31'::date
    ), days AS (
    SELECT dd, date_trunc('week', dd + 1)::date AS wk
    FROM d
    )
SELECT ... 
```

**4.**如果性能至关重要，请确保不要将函数或计算应用于表的值。这禁止使用**索引**并且通常非常慢，因为必须处理每一行。这就是为什么你的第一个查询会用大表来吸。如有可能，请改为将计算应用于您过滤的值。

[**表达式索引**](http://www.postgresql.org/docs/current/static/indexes-expressional.html)是解决此问题的一种方法。如果你有一个像

```
CREATE INDEX sale_tran_dt_week_idx ON sale (date_trunc('week', tran_dt)::date); 
```

..您的第一个查询可能会再次非常快-为索引维护的写入操作付出了一些代价。

# java - 这个程序中正确的 Big-O 值是多少？

> ID：10859508
> 
> 赞同：1
> 
> 时间：2012-06-02T03:12:25.010
> 
> 标签：java, algorithm, big-o

我正在尝试测试我对 BigO 的了解不是很自信也不是完全文盲，但请指导。

这不是家庭作业，我不是任何地方的学生，但有兴趣理解这个和其他各种相关概念。

```
//What is bigO of this Application ?
public class SimpleBigOTest {

    // What is BigO of this method -> I am certain it is O(n) but just checking
    private void useItirativeApprachToPrintNto0(int n) {
        for (int i = 0; i < n; i++) {
            System.out.println("useItirativeApprachToPrintNto0: " + i);
        }
    }

    // What is BigO of this method -> I am reasonabily certain it is O(n)
    private void useRecurrsiveApprachToPrintNto0(int n) {
        if (n != 0) {
            System.out.println("useRecurrsiveApprachToPrintNto0: " + n);
            useRecurrsiveApprachToPrintNto0(n - 1);
        }

    }

    // What is BigO of this method -> I think now it is O(n^2)
    private void mutltipleLinearItirationsDependentOnValueOfN(int n) {
        int localCounter = n + n;
        for (int i = 0; i < localCounter; i++) {
            System.out.println("mutltipleLinearItirationsDependentOnValueOfN: "
                    + i);
        }
        for (int i = 0; i < n; i++) {
            System.out.println("mutltipleLinearItirationsDependentOnValueOfN: "
                    + i);
        }
    }

    // What is BigO of this method -> I think this is again O(n)
    private void mutltipleLinearItirationsNotDependentOnValueOfN(int n, int j) {
        int localCounter = j;
        for (int i = 0; i < localCounter; i++) {
            System.out
                    .println("mutltipleLinearItirationsNotDependentOnValueOfN: "
                            + i);
        }
        for (int i = 0; i < n; i++) {
            System.out
                    .println("mutltipleLinearItirationsNotDependentOnValueOfN: "
                            + i);
        }
    }

    // What is bigO of this main -> I would say O(n^2) because
    // mutltipleLinearItirationsDependentOnValueOfN has biggest BigO of O(n^2)
    // if I am correct
    public static void main(String[] args) {
        SimpleBigOTest test = new SimpleBigOTest();
        int n = 1000;
        int j = 1234;
        test.useItirativeApprachToPrintNto0(n);

        test.useRecurrsiveApprachToPrintNto0(n);

        test.mutltipleLinearItirationsDependentOnValueOfN(n);

        test.mutltipleLinearItirationsNotDependentOnValueOfN(n, j);

    }

} 
```

作为一个附带问题，为什么所有关于算法的书籍都如此高度评价递归，而在我的实践经验中，我一直使用迭代。使用递归，我们可以快速耗尽内存并进行噩梦般的调试。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T03:16:18.830

你对前两个的答案是正确的。

您对第三个功能的回答不正确；这也是 O(N)。原因是第一个循环迭代了2N次，第二个循环迭代了N次。这总共是 3N 次迭代，并且 3N = O(N)，因为 big-O 忽略了常数因素。

您对第四个功能的回答也不正确；这是O（N + J）。函数的运行时可能依赖于多个参数，这里就是这种情况。大大增加 N 或 J 将导致运行时更多地依赖该参数而不是另一个。许多重要的算法，如 Dijkstra 算法、KMP 字符串匹配算法等，都有依赖于多个参数的运行时。一些算法的运行时间取决于它们产生的值（这些有时称为*输出敏感算法*）。在分析或设计算法时牢记这一点是很好的。

最后，main 的复杂度是 O(1)，因为您调用的所有四个函数都具有固定的参数值。因为程序总是做完全相同的工作量（一些常数）。如果您允许 n 和 j 随命令行参数而变化，那么运行时间将为 O(n + j)，但由于它们是固定的，因此复杂度为 O(1)。

最后一点，我建议不要这么快放弃递归。递归是一种非常有用的算法设计技术，许多递归算法（快速排序、归并排序等）使用很少的堆栈空间并且非常实用。通过允许您以不同的方式思考问题的结构，递归思维通常可以帮助您设计迭代算法。此外，许多主要的数据结构（链表、树、尝试等）都是递归定义的，理解它们的递归结构将有助于您编写对它们进行操作的算法。相信我，这是一个很好的技能！:-)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T05:54:56.123

关于复杂性分数@templatetypedef 已经提供了正确的一次。现在针对您关于递归与循环的问题。现实世界中的许多问题都具有递归行为，可以使用此属性进行最佳设计。例如河内塔，递归提供了一个非常简单的解决方案，而如果你使用一些迭代方法，那么它会变得非常复杂:(

最后递归确实有一些额外的参数开销。如果您需要极其优化的行为，那么您必须在其中做出决定。

最后，请记住，程序员的时间比 CPU 时间更昂贵。在对代码进行微优化之前，测量一下它是否真的会成为一个问题确实是个好主意。

# objective-c - 视图控制器不响应操作方法

> ID：10859510
> 
> 赞同：0
> 
> 时间：2012-06-02T03:12:46.063
> 
> 标签：objective-c, macos, model-view-controller, nsviewcontroller

我有一个简单的测试应用程序（在 OSX 中），它有一个视图控制器，其视图中有一个按钮。按钮的操作方法在视图控制器的类中，并且 IBAction 在 IB 中连接（通过文件的所有者）。单击按钮时，我收到 EXC_BAD_Access 错误（除了偶尔会收到 -[NSRunLoop buttonClick:] ）。我在这里阅读了一堆关于 NSViewControllers 不在响应者链中的帖子，而且在 IB 中专门挂钩操作方法应该可以工作。我唯一的代码是这样的：

在应用委托中：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    TestController *controller = [[TestController alloc] initWithNibName:@"TestController" bundle:nil];
    [self.window.contentView addSubview:controller.view];
} 
```

而且，在 TestController 类中，就是这样：

```
-(IBAction)buttonClick:(id)sender {
    NSLog(@"%@",sender);
} 
```

我有 2 个问题。为什么会发生这种情况，以及将 IBActions 用于按钮方法的正确 mvc 位置在哪里（控制器类不应该处理这些）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:19:10.867

首先，我相信在 App Delegate 中已经`viewController`为您定义了一个名为的属性。您应该使用此代码`self.viewController = [[TestController alloc] initWithNibName:@"TestController" bundle:nil];`而不是`TestController *controller = [[TestController alloc] initWithNibName:@"TestController" bundle:nil];`. 如果这不能解决它，那么我不确定出了什么问题。您的代码应返回您单击的按钮的属性。我创建了自己的示例项目并测试了您的代码（尽管我的应用程序委托看起来与您的不同）并且运行良好。

其次，您应该详细说明您的第二个问题“ `Why is this happening, and where is the correct mvc place to put IBActions for button methods (shouldn't controller classes handle these)?`”。你的意思不是很清楚。

希望这有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:32:34.863

NSViewController 不会在 iPhone 上的 mac os x 上响应 IBAction 这是放置 IBAction 的正确位置，因为视图应该只绘制其内容（数据）而不是更改它。但是在 Mac os x 上， NSViewController 用于设置 NSView ，它没有必要响应 IBActions 你有两种选择，一种是将你的 IBAction 放在你的 NSView 中，或者是创建一个 NSWindowController 。在 mac osx 上，您有足够的屏幕空间，并且您将始终在窗口中拥有视图，您将使用 NSViewController 将它们添加到您的窗口并设置您的视图，但该窗口首先在您的响应者链中，然后是您的 NSWindowController 。例如：您可能有一个窗口和两个视图控制器显示相同的视图，其中可能有 5 个测试字段，视图控制器一会加载数据但您无法编辑数据，然后视图控制器二会加载相同的视图和相同的数据，但启用编辑文本字段。但所有操作方法都将转到 WindowController 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T08:50:29.153

我建议你检查你的 viewController 的身份检查器。它可能表示错误的自定义类。基本上创建的视图控制器通常`ViewController`在部分上有名称。

# spring - 如何在tomcat中修复这个Spring MVC启动异常？

> ID：10859516
> 
> 赞同：0
> 
> 时间：2012-06-02T03:15:11.537
> 
> 标签：spring, tomcat

有人可以帮我解决这个关于启动 Tomcat + spring 的错误吗？

我已经清理了所有内容，当我访问 localhost:8080/springmvc/hello_world.html 时出现 404 页面错误。

十分感谢大家。

```
02/06/2012 00:09:59 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Arquivos de programas\Java\jre6\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:/Arquivos de programas/Java/jre6/bin/client;C:/Arquivos de programas/Java/jre6/bin;C:/Arquivos de programas/Java/jre6/lib/i386;C:\Ruby193\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Arquivos de programas\Java\jdk1.6.0_25\bin;C:\apache-maven-3.0.3\bin;C:\spring-roo-1.1.3.RELEASE\bin;C:\Arquivos de programas\Android\android-sdk\tools;C:\Arquivos de programas\QuickTime\QTSystem\;C:\eclipse;;.
02/06/2012 00:09:59 org.apache.tomcat.util.digester.SetPropertiesRule begin
AVISO: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:SpringMVC' did not find a matching property.
02/06/2012 00:10:00 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
02/06/2012 00:10:00 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
02/06/2012 00:10:00 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 791 ms
02/06/2012 00:10:00 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
02/06/2012 00:10:00 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
02/06/2012 00:10:00 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
02/06/2012 00:10:00 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
02/06/2012 00:10:00 org.apache.catalina.startup.Catalina start
INFO: Server startup in 525 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:31:21.493

如果您找到第 404 页，则可能`hello_world.htm`找不到该页面。最简单的启动方法是放入启动页面，`index.html`这样页面就可以从上下文根目录中加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T01:44:25.007

根据您的日志输出，您的应用程序未部署。您确定将项目添加到服务器吗？我假设您使用的是 Eclipse。右键单击您的服务器并选择添加/删除。您的应用程序应该在配置下。

![在此处输入图像描述](../Images/d4366a65569ce1517a70e7198b48ad91.png)

# php - Yii CDbCriteria - OR 和 foreach()

> ID：10859520
> 
> 赞同：1
> 
> 时间：2012-06-02T03:16:01.170
> 
> 标签：php, activerecord, yii

我有一些元素

```
$cities = array('Paris', 'London', 'Berlin', 'Vinnitsa'); 
```

在某些情况下，我需要合并标准。我使用这样的范围：

```
 public function city($cities){
        foreach ($cities as $city){
            $this->getDbCriteria()->mergeWith(array(
                'condition'=>'city LIKE :num',
                'params'=>array(':num'=>$city),
            ), false);
        }
        return $this;
    } 
```

我需要生成这样的东西：

```
... WHERE ext_id='34' 
      AND (ctiy LIKE 'Paris' OR city LIKE 'London' OR city LIKE 'Berlin' OR city LIKE 'Vinnitsa') 
      AND (....) 
```

但 Yii-AR 生成的不是它：

```
WHERE (
     (some_id= 34) 
    OR 
     (city LIKE 'Paris')
   ) 
  OR (city LIKE ''London'') 
```

如何在一个括号中使用单个 OR 条件`getDbCriteria()->mergeWith()`？关于我知道的自定义准备条件，但这很麻烦；）

* * *

更新：2012-06-03：

我已经解决了这样的问题：

```
$citiesReg = implode('|',$cities); //Convert to REGEXP 

$this->getDbCriteria()->mergeWith(array(
       'condition'=>'city REGEXP :city',
       'params'=>array(':city'=>$citiesReg),
        ));
return $this; 
```

要使用 UTF-8，您还需要： 1\. 将数组 mb_strtolower($val,'UTF-8') 的每个元素小写；在转换为字符串之前。2.稍微修改条件：'condition'=>'LOWER(city) REGEXP :city'

这是因为 MySQL lib REGEXP 无法与 utf-8 配合使用。

感谢参与！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:11:03.487

让我们试试[addInCondition](http://www.yiiframework.com/doc/api/1.1/CDbCriteria/#addCondition-detail)，第一个参数是条件（例如 'cite LIKE \'London\' '），第二个参数是运算符（OR 或 AND）。

您可以 foreach 数组（城市）并使用 addInCondition。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:07:40.690

[在这里查看](http://code.google.com/p/yii/issues/detail?id=676#c3)有关使用 mergeWith 和 foreach 数组的信息。也许这是 kamankily 建议的，但使用 $criteria （不是 addInCondition）

# jquery - 将 jQuery 与 Windows 8 Metro JavaScript App 一起使用会导致安全错误

> ID：10859523
> 
> 赞同：44
> 
> 时间：2012-06-02T03:16:27.267
> 
> 标签：jquery, microsoft-metro, winjs, visual-studio-2012

因为听起来[jQuery 是 Metro JavaScript 应用程序的一个选项](http://wildermuth.com/2011/9/16/What_about_Metro_JS_Projects_and_jQuery)，所以我开始期待 Windows 8 开发。我安装了 Visual Studio 2012 Express RC 并开始了一个新项目（空模板和网格模板都有同样的问题）。

我制作了 jQuery 1.7.2 的本地副本并将其添加为脚本参考。

```
<!-- SomeTestApp references -->
<link href="/css/default.css" rel="stylesheet" />
<script src="/js/jquery-1.7.2.js"></script>
<script src="/js/default.js"></script> 
```

不幸的是，一旦我运行生成的应用程序，它就会抛出一个控制台错误：

> HTML1701：无法添加动态内容“a”脚本试图注入动态内容或以前动态修改的元素，这可能是不安全的。例如，使用 innerHTML 属性添加脚本或格式错误的 HTML 将生成此异常。使用 toStaticHTML 方法过滤动态内容，或使用 createElement 等方法显式创建元素和属性。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkID=247104](http://go.microsoft.com/fwlink/?LinkID=247104)。

我在非缩小版本的 jQuery 中打了一个断点，发现[了有问题的行](https://github.com/jquery/jquery/blob/1122c8ce32e685648bf364eb4bb84bb706d7e3b4/src/support.js#L22)：

```
div.innerHTML = "   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>"; 
```

显然，Metro 应用程序的安全模型[禁止以这种方式创建元素](http://msdn.microsoft.com/en-us/library/windows/apps/hh849625.aspx)。这个错误不会给用户带来任何直接的问题，但考虑到它的位置，我担心它会导致 jQuery 中的功能发现测试失败，这是不应该的。

我绝对希望 jQuery`$.Deferred`让一切变得更容易。我希望能够使用选择器引擎和事件处理系统，但如果必须的话，我宁愿没有它们。

如何让最新的 jQuery 与 Metro 开发完美配合？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-02T12:46:01.100

您需要编辑 jQuery 源代码，以便将`jQuery.support`函数传递给`MSApp.execUnsafeLocalFunction`，这将禁用不安全内容检查，如下所示：

```
jQuery.support = MSApp.execUnsafeLocalFunction(function() {

    var support,
        all,
        a,
        select,
        opt,
        input,
        fragment,
        tds,
        events,
        eventName,
        i,
        isSupported,
        div = document.createElement( "div" ),
        documentElement = document.documentElement;

    // lots of statements removed for brevity

    return support;
}); 
```

您需要记住删除最后一对括号 - 您不需要自执行函数，因为`execUnsafeLocalFunction`它会自动执行它传递的函数。

我建议更好的方法是使用 WinJS 特性——这包括`WinJS.Promise`对象作为延迟操作的替代方案（它们本身就是 Promise 模式的实现）。您可以使用命名空间进行一些基本的 DOM 操作`WinJS.Utilities`。

对于使用 jQuery 进行延迟操作，您应该三思而后行。该`WinJS.Promise`对象在整个 Metro API 中用于表示异步活动，您最终将使用两种相似但不同的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T14:26:54.843

这是你的答案

[https://github.com/appendto/jquery-win8](https://github.com/appendto/jquery-win8)

其适用于 windows 8 的官方 jquery 库

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-31T17:44:17.700

对于它的价值，我已经移植了大部分 jQuery 核心来包装本机 WinJS 库。它是轻量级的，几乎提供了 jQuery 所做的一切，并添加了一些用于徽章、通知等的插件。

这是一项正在进行的工作，但我正试图让一些人加入其中。

[https://github.com/rmcvey/winjq](https://github.com/rmcvey/winjq)

快速撰写（正在添加文档）： http: [//practicaljs.com/jquery-in-windows-8-apps/](http://practicaljs.com/jquery-in-windows-8-apps/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-07T04:31:27.560

在最近的**//Build/ 2012**会议之后，[这个演讲](http://channel9.msdn.com/Events/Build/2012/3-130)谈到了在 Windows 8 应用商店应用程序中使用 jQuery。具体来说，他们讨论了*innerHTML*中**脚本注入**的确切例外，并讨论了其中所做的更新。

 *在那次演讲中，**AppendTo**公司还正式推出了[适用于 Windows 8 的 jQuery 。](https://github.com/appendto/jquery-win8)从链接中的演讲中给出的演示来看，它看起来很整洁。

他们还说，在本地上下文中从 CDN 为 Windows 8 应用程序获取 jQuery 不是一个好主意！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-19T18:38:53.350

GitHub 上的[JavaScript 动态内容 shim](https://github.com/MSOpenTech/winstore-jscompat/)由 Microsoft Open Technologies 创建并发布，以解决此错误。它尚未使用 jQuery 进行测试，但很可能会解决您的问题。在运行任何其他脚本之前，请在应用程序的开头引用 winstore-jscompat.js 文件，您应该不会再看到此错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-12T19:54:10.877

我做了更多的调查，并想澄清一些事情。

您看到的错误是在 JavaScript 控制台中，而不是实际的异常。jQuery 代码继续运行*良好*。它实际上是底层系统正在记录的东西，而不是错误或异常。

没有理由修补 jQuery 或做任何其他事情 - 这是一个嘈杂的系统组件，而不是实际错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-23T20:56:58.497

我在这里写了一个关于如何让 jQuery 与 Windows 8 一起工作的非常详细的解释 [http://davidvoyles.wordpress.com/2013/09/23/hacking-jquery-to-work-in-windows-8/](http://davidvoyles.wordpress.com/2013/09/23/hacking-jquery-to-work-in-windows-8/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-15T13:49:52.653

如果您仍然需要它，我正在编写 jQuery 中的 Deferred 对象的重新实现。

一旦完成，它应该与 jQuery 的 Deferred 对象 100% 兼容。现在它很完整，但需要一些测试。

看到[这个](https://github.com/warpdesign/Standalone-Deferred)。

希望这会有所帮助！

也就是说，我认为在处理 Windows 8 应用程序时，学习如何使用 Microsoft 的 Promise 实现而不是 jQuery 应该是一个好主意。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-10T22:05:19.907

我能够通过在 jQuery 中找到所有设置 innerHTML 的位置并将设置的值包装为`toStaticHTML()`.

因此，例如：

```
div.innerHTML = "   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>"; 
```

变成：

```
div.innerHTML = toStaticHTML("   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>"); 
```

为了安全起见，我还在定义 jQuery 之前定义了它，以防文件在普通浏览器中使用：

```
window.toStaticHTML = window.toStaticHTML || function (s) { return s; }; 
```

对我来说，这似乎是最安全的更改，尽管它需要在 jQuery 中修补十几个地方。（不要在 toStaticHTML 之前使用 var 语句）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-11T01:53:20.547

我相信这与内容安全策略 (CSP) 施加的限制相同。jQuery 1.8.0 解决了该特定情况。问题是否仍然存在？

[https://github.com/jquery/jquery/commit/dc83072878ed9636c8158a014bd9fa4acc1ccce3](https://github.com/jquery/jquery/commit/dc83072878ed9636c8158a014bd9fa4acc1ccce3)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-20T09:10:40.373

只要我替换了表单的所有代码，jQuery 本身就不会在最新版本中为我抛出此类异常，例如：

```
$('<input type="button" value="Press Me" />') 
```

和

```
$(toStaticHTML('<input type="button" value="Press Me" />')) 
```

请注意，并非所有 HTML 字符串都被认为是不安全的，例如：

```
$('<span></span>') 
```

不抛出任何异常。但是，如果您执行以下操作，jQuery 仍然会在追加时引发异常：

```
var div = '<div class="' + classesToApply + '"';
div += attrToAdd;
div += '</div>';

$(div).appendTo(container); 
```

以上不是使用 jQuery 的良好实践示例，但仍有一些人这样做，因此您可能会遇到错误。请注意，上面的代码不会产生与第一个片段相同的错误，而是在 jQuery.append 中引发错误。此错误仍然通过执行修复`$(toStaticHTML(div)).appendTo(container);`*

# objective-c - NSArray initWithObjects 只用一些对象初始化

> ID：10859525
> 
> 赞同：0
> 
> 时间：2012-06-02T03:17:41.067
> 
> 标签：objective-c, nsarray

我遇到了一个奇怪的问题，这让我很头疼。我正在使用 initWithObjects 初始化一个 NSArray 对象。我传入了 7 个对象，但紧接着，如果我记录数组的计数，我只有 3 个计数。还有其他人看到这个吗？我以前无数次使用这种方法没有问题，我看不出我做错了什么。代码如下：

```
-(DMORecipe *) saveRecipe:(NSNumber *)recipeID recipeTitle:(NSString *)title recipeDescription:(NSString *)description pictureFile:(NSString *)picFile preparationTime:(NSString *)prepTime cookingTime:(NSString *)cookTime ovenTemperature:(NSString *)ovenTemp {
    NSArray *newRow = [[NSArray alloc] initWithObjects:recipeID,title, description, picFile, prepTime, cookTime, ovenTemp, nil];
    NSLog(@"Before update, the number of args is %i", [newRow count]);
} 
```

我在某个地方有没有我想念的 type-o 吗？您可以看到我将 7 个对象传递给数组初始化程序，但 NSLog 方法显示 [newRow count] = 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:25:25.377

如果传入的任何对象是`nil`，则参数的其余部分将被忽略。

在这种情况下，似乎`picFile`是`nil`。

# java - Java中的HMAC SHA1签名

> ID：10859526
> 
> 赞同：5
> 
> 时间：2012-06-02T03:17:53.890
> 
> 标签：java, sha, hmacsha1

我正在尝试与 TransUnion Web 服务交互，我需要提供 HMAC-SHA1 签名才能访问它。

此示例在 TransUnion 文档中：使用安全密钥的
输入 创建.`SampleIntegrationOwner2008‐11‐18T19:14:40.293Z``xBy/2CLudnBJOxOtDhDRnsDYq9HTuDVr2uCs3FMzoxXEA/Od9tOuwSC70+mIfpjeG68ZGm/PrxFf/s/CzwxF4Q==``/UhwvT/kY9HxiXaOjpIc/BarBkc=`

鉴于该数据和密钥，我无法在 Java 中获得相同的结果。我试过几个在线计算器，也没有一个返回这个结果。他们文档中的示例是否不正确，或者我只是没有正确处理这些字符串？

这是我目前正在使用的代码：

```
public static String calcShaHash (String data, String key) {
    String HMAC_SHA1_ALGORITHM = "HmacSHA1";       
    String result = null;

    try {         
        Key signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM);
        Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM);
        mac.init(signingKey);
        byte[] rawHmac = mac.doFinal(data.getBytes());
        result = Base64.encodeBase64String(rawHmac);    
    }
    catch (Exception e) {
        e.printStackTrace(); 
    }       

    return result;
} 
```

这是我的单元测试代码：

```
@Test
public void testCalcShaHash() {
    String data = "SampleIntegrationOwner2008-11-18T19:14:40.293Z";
    String key = "xBy/2CLudnBJOxOtDhDRnsDYq9HTuDVr2uCs3FMzoxXEA/Od9tOuwSC70+mIfpjeG68ZGm/PrxFf/s/CzwxF4Q==";
    String result = Utils.calcShaHash(data, key);
    assertEquals(result, "/UhwvT/kY9HxiXaOjpIc/BarBkc=");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T04:31:02.857

这看起来像一个 Base64 编码的密钥。所以我认为你需要对其进行base64解码，然后将其传递给HMAC。像这样的东西（只是为了说明我没有测试过，任何错误都是读者的练习）：

```
public String getHmacMD5(String privateKey, String input) throws Exception{
    String algorithm = "HmacSHA1";
    byte[] keyBytes = Base64.decode(privateKey);
    Key key = new SecretKeySpec(keyBytes, 0, keyBytes.length, algorithm); 
    Mac mac = Mac.getInstance(algorithm);
    mac.init(key); 
    return Base64.encode(mac.doFinal(input.getBytes()));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T23:21:31.393

我注意到的一件事是连字符不是正常的连字符。如果您复制并粘贴它们，它们不在 ASCII 字符集中。我可以肯定地说，哈希长度看起来是正确的。有趣的是，即使输入了正确的连字符，我也无法让您的代码产生正确的答案。但没关系。它解决了这个问题。嘘！

# algorithm - 从该集合中选择两个区间的快速算法

> ID：10859527
> 
> 赞同：7
> 
> 时间：2012-06-02T03:18:02.493
> 
> 标签：algorithm

假设给定一组闭合区间，其中每个区间的形式为 [l,r]。如果我们想从这个集合中选择两个区间，使得**它们的交集大小乘以它们的并集大小是最大值**。我们可以提供一个非平凡的算法来解决这个问题吗？

例如，如果我们有四个区间，[1,6]、[4,8]、[2,7]、[3,5]。最佳解决方案是选择[1,6]和[2,7]。答案是 (7-1) * (6-2) = 24。

实际上最初的问题需要我们选择（N>=2）个区间，但我认为我们可以证明最优解只包含两个区间：

如果最优解具有三个或更多区间：

```
[                     ]
            [               ]
                   [                          ] 
```

我们可以看到，如果我们删除中间区间，权重不会减少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:31:35.810

给定一组 N > 2 的重叠区间，这些区间可以最大化联合时间的交集，留出一个包含联合中最左边点的区间和一个包含联合中最右边点的区间。由于 N > 2，您至少还有一个其他区间。如果从集合中删除此区间，则不会减小区间并集的大小，因为您留出了区间以覆盖最左边和最右边的点。您只能通过删除间隔来增加交叉点的大小。因此，通过删除此间隔，您只能增加您试图最大化的产品，因此确实可以在 N = 2 处找到最佳解决方案。

对区间的端点集进行排序，并按升序遍历它。在平局的情况下，在最右边的点之前考虑最左边的点。跟踪一组区间，当你看到它的最左边点时将一个区间添加到集合中，当你看到它的最右边点时从集合中删除一个区间。

对于任何两个重叠的间隔，当其中一个已经存在并且您正要添加另一个时，将会有一个点。因此，如果在将区间添加到集合之前，将其与集合中已有的所有其他区间进行比较，则可以比较所有重叠区间对。因此，您可以计算要添加的区间与集合中所有其他区间之间的并集和交集的乘积，并跟踪看到的最大区间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:25:54.400

**证明两个区间就足够了：**选择适当包含在另一个区间中的区间是没有意义的。不失一般性，让区间为 [a1, b1], ..., [an, bn] 使得 a1 < ... < an。如果没有区间正确包含另一个区间，则 b1 < ... < bn。对于 i < j < k，它认为 ([ai, bi] intersect [aj, bj] intersect [ak, bk]) = ([ai, bi] intersect [ak, bk]) 和 union 相同，所以没有理由选择两个以上的区间。

**O(n log n)-time algorithm：**重新制定，问题是找到区间 [a, b] 和 [c, d] 最大化 (d - a) * (b - c)，因为这个乘积是负的，当且仅当区间不要相交。我们的算法是进行 O(n log n) 预处理，使我们能够在 O(log n) 时间内为每个间隔找到最佳配对。

让我们努力寻找 [a, b] 的最佳伴侣。做一些代数：(d - a) * (b - c) = d*b - d*c - a*b + a*c。由于 a, b 是固定的，我们可以去掉 -a*b 项并在所有区间 [c, d] 上最大化内积 <(a, b, 1), (d, c, -d*c)>。由于向量集 (d, c, -d*c) 是固定的，这本质上是模拟静止多面体与垂直于 (a, b, 1) 的移动平面的碰撞。感谢 Edelsbrunner 和 Maurer（Findingextreme [points in three dimensions and solve the post-office problem in the plane](https://www.cs.duke.edu/~edels/Papers/1985-J-05-PostOfficeProblem.pdf)，1984），有一种算法可以在时间 O(n log n) 中进行预处理，并针对不同的 a 和 b 解决这种类型的查询在 O(log n) 时间内。

一个糟糕的细节是我们必须至少选择两个区间，但最好的“解决方案”可能只是与自身最长的区间。我相信这很混乱，但可以扩展 Edelsbrunner-Maurer 以在相同的运行时间内找到第二个最极端的点。

# html - HTML5 jQuery 选择器

> ID：10859528
> 
> 赞同：0
> 
> 时间：2012-06-02T03:18:15.480
> 
> 标签：html

我一直不喜欢使用 ids 和 classes 作为选择器，原因很明显：ids 是唯一的，classes 与样式有关，应该能够在不影响网站功能的情况下进行更改。

我曾经创造过类似的东西

```
 <div rel="foo">...</div>

   $("[rel=foo]").click(..); 
```

使用 HTML5 执行此操作的正确方法是什么？我被角色诱惑了，但看来，这个属性有特定的含义和用途。

我刚刚学习 HTML5，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:09:19.010

您可以向元素添加任意数量的类。并且当您选择时，您可以使用一个类作为选择器。

```
<div class="class1 class2 foo"> 
```

选择器，

```
$(".foo").click(..); 
```

你不需要`foo`在你的 CSS 中定义类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T15:07:56.897

尝试不使用`rel`，`title`而是选择。然后你可以像这样使用jQuery：

> $('div[title="foo"]').click(...);

使用`title`,`id`或`class`适用于 HTML5。另外，我认为您应该重新考虑使用类和 ID 作为选择器——它非常方便、高效且简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T15:17:22.497

不要违背这里广泛接受的解决方案：使用*class*属性。

尝试详细说明映射页面结构和这些页面中组件的命名约定。

# scripting - Wowza 服务器上 IPTV 的时间延迟

> ID：10859531
> 
> 赞同：0
> 
> 时间：2012-06-02T03:19:36.807
> 
> 标签：scripting, wowza

你能帮我在 wowza 服务器上编写时间延迟脚本吗？我们需要流式传输实时内容和延迟内容，以满足不同时区用户的需求。

谢谢鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:38:37.810

Depending on your specific requirements, you can take a look at the [DVR](http://www.wowza.com/forums/content.php?300) or [Recording](http://www.wowza.com/forums/content.php?123-LiveStreamRecord-Module-for-recording-a-live-stream-on-demand&page=11) modules. Also, you way want to ask your question at [http://www.wowza.com/forums/](http://www.wowza.com/forums/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T09:59:26.220

您应该看一下 gstreamill，您可以使用 gstreamill 实时访问，如下所示：

```
.../dvr/name/playlist.m3u8?offset=-xxxx 
```

`offset=-xxxx`表示`xxxx`现在之前的几秒

# php - 使用 PHP 更改文件扩展名

> ID：10859534
> 
> 赞同：-2
> 
> 时间：2012-06-02T03:20:16.550
> 
> 标签：php, file-extension

更改图像文件扩展名是否“好”？

例如，我输入了一个`jpg`文件，并将其更改为`png`. 这可以吗？还是我应该将其保留为`jpg`？

我使用`rename()`来更改名称和文件扩展名。

它与 PHP 有关，因为我通过上传脚本使用 PHP 进行重命名。

另一个问题是：这样做是否安全，例如文件会损坏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T03:22:36.540

将图像文件扩展名从更改`.jpg`为`.png`不会将其更改为 PNG 文件。它只是更改文件的名称。这根本不会更改文件的内容，因此不会损坏。它只会更改它的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T03:21:54.050

保留带有适当扩展名的文件名，否则您会混淆所有人，包括您自己。

不，文件不会损坏...文件名只是名称。

永远不要让用户指定系统上文件的名称。无论他们上传什么，将其重命名为不带扩展名的名称，并将文件存储在 Web 服务器的文档根目录之外。您不希望他们上传`.php`脚本等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T03:25:20.150

更改文件的扩展名只是重命名它。扩展名仅用于定义文件包含的数据类型。

因此，将 JPEG 文件重命名为 PNG 是一个非常糟糕的主意。尽管某些图像查看器可能仍然能够确定您的 PNG 实际上是 JPEG 并正确查看它，但其他人则不会。

使用[ImageMagick](http://en.wikipedia.org/wiki/ImageMagick)或[GD 2](https://en.wikipedia.org/wiki/GD_Graphics_Library)在 PHP 中进行任何图像转换。

# matlab - MATLAB 出错：cvlib_mex.obj：错误 LNK2019：未解析的外部符号（尝试在 MATLAB 中使用 cvlib_mex.c 时）

> ID：10859537
> 
> 赞同：0
> 
> 时间：2012-06-02T03:20:54.690
> 
> 标签：matlab, 32bit-64bit, mex, unresolved-external, lnk2019

我的项目确实处于非常糟糕的境地。它适用于我的 32 位台式机以及相同版本的 MATLAB (R2012a) 和 Visual Studio 2010 Express，但不适用于 64 位笔记本电脑。最后一个错误如下：当我尝试执行此错误时：

```
function make_cvlib()
%  make_cvlib -- Make the cvlib_mex in windows. It probably will
%  work as well in Linux/Mac with only minor changes
%
%  Author:  Joaquim Luis
%  Date:    07-Sept-2006

% Adjust for your own path
INCLUDE_CV = '''C:\Program Files\OpenCV\cv\include''';
INCLUDE_CXCORE = '''C:\Program Files\OpenCV\cxcore\include''';
LIB_CV = '''C:\Program Files\OpenCV\lib\cv.lib''';
LIB_CXCORE = '''C:\Program Files\OpenCV\lib\cxcore.lib''';

% -------------------------- Stop editing ---------------------------
include_cv = ['-I' INCLUDE_CV ' -I' INCLUDE_CXCORE];
library_cv = [LIB_CV ' ' LIB_CXCORE];

if (ispc)
    opt_cv = '-O -DWIN64 -DDLL_CV100 -DDLL_CXCORE100';
else
    opt_cv = '-O';
end

cmd = ['mex cvlib_mex.c' ' ' include_cv ' ' library_cv ' ' opt_cv];        
eval(cmd) 
```

这是错误：

```
>> make_cvlib
   Creating library C:\Users\hp\AppData\Local\Temp\mex_cj81oV\templib.x and object C:\Users\hp\AppData\Local\Temp\mex_cj81oV\templib.exp 
cvlib_mex.obj : error LNK2019: unresolved external symbol cvAddS referenced in function cvSubS 
cvlib_mex.obj : error LNK2019: unresolved external symbol cvEllipse referenced in function cvEllipseBox 
cvlib_mex.obj : error LNK2019: unresolved external symbol cvSetData referenced in function localSetData 
cvlib_mex.obj : error LNK2019: unresolved external symbol cvGetSeqElem referenced in function JapproxPoly 
cvlib_mex.obj : error LNK2019: unresolved external symbol cvReleaseMemStorage referenced in function JapproxPoly 
...(65 more)
cvlib_mex.mexw64 : fatal error LNK1120: 69 unresolved externals 

  C:\PROGRA~1\MATLAB\R2012A\BIN\MEX.PL: Error: Link of 'cvlib_mex.mexw64' failed. 

Error using mex (line 206)
Unable to complete successfully.

Error in make_cvlib (line 26)
eval(cmd) 
```

请显示我错过的一些要点...

# x86 - 如何调试 MIPS 精灵？

> ID：10859540
> 
> 赞同：1
> 
> 时间：2012-06-02T03:21:15.610
> 
> 标签：x86, mips, x86-64, qemu, linux-distro

假设我有一个 MIPS elf 二进制文件（意味着有人在 MIPS 上交叉编译/编译一个 MIPS linux 可执行文件）

是否有任何编译为在 mips 架构上运行的 Linux 发行版可能运行可执行文件？我环顾四周，但我只能找到[linux-mips](http://www.linux-mips.org/wiki/Main_Page)。如果发行版已经安装到 VM 磁盘文件中，那就更好了，你可以直接下载它。

有没有保证在非 MIPS 发行版上运行 MIPS 精灵的方法？像使用一些 qemu 设置什么的？（“保证”我的意思是如果它在 MIP 发行版中运行，那么它应该毫无疑问地在模拟器中运行，并且所有功能都绝对在模拟器中实现，因此无论在 MIPS 发行版中会发生什么（显然是特定于用户区）也会出现在模拟器中，这样我就有信心它会正常工作）。

最后，如果我想调试 MIPS，但我不是很了解，除了 VM 之外，是否有任何一种学习工具可以真正很好地理解 MIPS 正在做什么？这是我的想法——使用一个工具，您可以附加到 MIPS 编译的 elf 或 x86，当您浏览可执行文件中的指令时，您可以看到可执行文件格式的转换，以控制调试器到您选择的格式。一个仍然有效的不太好的替代方案是，您可以将任何 MIPS 指令传递到文本框中，然后查看具有等效 x86 指令的另一个文本框，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T12:40:09.883

如果您拥有可以运行 Linux 的具有 MIPS CPU 的硬件，最简单的方法是使用 MIPS 架构的 Linux 发行版之一。[一个常见的发行版是 Debian 发行版，您可以在此链接](http://www.debian.org/releases/stable/mips/)中找到有关 Debian for MIPS 的更多信息。

如果您无法访问 MIPS 硬件，那么在 x86 主机上运行 QEMU 就足够了。看看[MIPS-QEMU 指令](http://www.aurel32.net/info/debian_mips_qemu.php)。

最后，一旦您安装了 MIPS Linux，将您的 MIPS 二进制文件复制到其中，登录并使用它运行 gdb。这应该为您提供一个可靠的环境来调试它。说到理解 MIPS 汇编，架构简洁明了，而且比其他 Arch 的汇编代码更容易阅读 MIPS 汇编。

# c# - 为什么程序不能通过开放的 Internet 连接访问文件？

> ID：10859551
> 
> 赞同：1
> 
> 时间：2012-06-02T03:23:27.227
> 
> 标签：c#, windows, visual-studio-2010, networking, permissions

我有两台没有密码的计算机连接到无线网络。

文件在计算机 A 上，程序在计算机 B 上。

从操作系统我可以毫无问题地访问和修改 B 中的 A 中的文件：

![在此处输入图像描述](../Images/fe64e628f8b52cecca5565d3712ccc73.png)

当我运行程序时：

```
using (StreamReader sr = new StreamReader("\\\\VIERNES7-3\\Documentos c\\tables\\tableOrders"))
            {
                String line;

                while ((line = sr.ReadLine()) != null)
                {
                    activeTables.Add(int.Parse(line));
                }
            } 
```

它给了我以下例外：

```
No se controló System.UnauthorizedAccessException
  Message=Access to the path '\\VIERNES7-3\Documentos c\tables\tableOrders' is denied.
  Source=mscorlib
  StackTrace:
       at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
       at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
       at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
       at System.IO.StreamReader..ctor(String path, Encoding encoding, Boolean detectEncodingFromByteOrderMarks, Int32 bufferSize)
       at System.IO.StreamReader..ctor(String path)
       at cocina2.Table.ActiveTables() in C:\Users\Trufa\documents\visual studio 2010\Projects\Viernes 7\cocina2\Table.cs:line 16
       at cocina2.Form1.paintListViews() in C:\Users\Trufa\documents\visual studio 2010\Projects\Viernes 7\cocina2\Form1.cs:line 46
       at cocina2.Form1.refresh() in C:\Users\Trufa\documents\visual studio 2010\Projects\Viernes 7\cocina2\Form1.cs:line 247
       at cocina2.Form1..ctor() in C:\Users\Trufa\documents\visual studio 2010\Projects\Viernes 7\cocina2\Form1.cs:line 23
       at cocina2.Program.Main() in C:\Users\Trufa\Documents\Visual Studio 2010\Projects\Viernes 7\cocina2\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我不确定是什么问题，因为我似乎已获得授权。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:44:06.757

如果将路径剪切并粘贴到资源管理器中，删除多余的斜杠，它会打开文件吗？

你是如何运行程序的（在调试模式下？）？

您是否尝试过以管理员身份运行程序和 Visual Studio？

如果您在 c:\ 中设置具有所有人权限的新共享，它是否有效？

# ios - Monotouch - 我的应用程序不再显示在设置应用程序中

> ID：10859552
> 
> 赞同：0
> 
> 时间：2012-06-02T03:23:38.147
> 
> 标签：ios, ipad, xamarin.ios

由于一些未知的原因，我的应用程序确实出现在 iOS 常规设置应用程序中，以及它曾经使用的所有其他应用程序。

此外，调试器也没有连接到应用程序！

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:05:09.623

我原来是在升级到 iOS 5.1.1 时导致问题的 Settings.bundle 中的 Root.plist。

可能是bug？！

# recurrence - 递归关系：T(n) = T(n - 1) + n - 1

> ID：10859553
> 
> 赞同：1
> 
> 时间：2012-06-02T03:23:49.050
> 
> 标签：recurrence

我试图了解如何解决递归关系。我理解到我们必须简化的程度。

```
T(N) = T(N-1) + N-1              Initial condition: T(1)=O(1)=1
T(N) = T(N-1) + N-1
T(N-1) = T(N-2) + N-2
T(N-2) = T(N-3) + N-3
……
T(2) = T(1) + 1

**Summing up right and left sides**

T(N) + T(N-1) + T(N-2) + T(N-3) + …. T(3) + T(2) =

= T(N-1) + T(N-2) + T(N-3) + …. T(3) + T(2) + T(1) +

(N-1) + (N-2) + (N-3) + …. +3 + 2 + 1

** Canceling like terms and simplifying **

T(N) = T(1) + N*(N-1)/2 1 + N*(N - 1)/2

T(N) = 1 + N*(N - 1)/2 
```

我真的不明白最后一部分。我了解取消类似条款，但不了解以下简化的工作原理：

```
T(N) = T(1) + (N-1) + (N-2) + (N-3) + …. +3 + 2 + 1
T(N) = T(1) + N*(N-1)/2 1 + N*(N - 1)/2 
```

第二行是如何从第一行衍生出来的？对我来说没有任何意义。

如果有人可以帮助我理解这一点，那将是一个很大的帮助。谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:41:21.467

在你的倒数第二行：

```
 S = (N-1) + (N-2) + (N-3) + ... + 3 + 2 + 1 
```

你可以说：

```
2S = S + S
   = (N-1) + (N-2) + (N-3) + ... +   3   +   2   +   1
       1   +   2   +   3   + ... + (N-3) + (N-2) + (N-1)
   =   N   +   N   +   N   + ... +   N   +   N   +   N
       |__________________ N-1 times ________________| 
```

你从`N - 1`到数`1`，所以`N - 1`序列中有项。但是整个序列就是`N`这样你可以说：

```
2S = N * (N - 1)
 S = (N * (N - 1)) / 2 
```

所以在你的最后一块：

```
T(N) = T(1) + (N-1) + (N-2) + (N-3) + ... + 3 + 2 + 1
     = T(1) + (N * (N - 1)) / 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:50:55.727

```
T(N) = T(1) + (N-1) + (N-2) + (N-3) + …. +3 + 2 + 1
     = T(1) + (N-1) +  (N-2) + (N-3) + ..... + ( N-(N-3)) + (N-(N-2)) + (N-(N-1))
     = T(1) + [N+N+N+..... n-1 times] - [1+2+3+......+(N-3)+(N-2)+(N-1)]
     = T(1) + N*(N-1) - (N*(N-1))/2
     = T(1) + N*(N-1)/2 
```

# c# - 在 .net 应用程序中嵌入 microsoft 表达式混合

> ID：10859554
> 
> 赞同：0
> 
> 时间：2012-06-02T03:24:02.757
> 
> 标签：c#, .net, wpf, xaml, blend

有没有办法将 microsoft expression blend 嵌入到 .net 应用程序中（以创建 xaml 文件）？如果没有，是否有任何其他 xaml 设计器可以使用？

更多细节：我想让最终用户在运行时通过 xaml 设计器设计 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:19:56.980

```
To design 
```

1.  在 Visual Studio 中打开一个项目。
2.  在解决方案资源管理器中右键单击您的 .xaml 文件。
3.  单击打开方式。
4.  选择表达式混合。
5.  设计 xml 文件
6.  保存
7.  Visual Studio 中 .net 项目中的 .xaml 文件将在每次保存时自动更新。

> 您还可以在表达式混合中创建 .xaml 文件，然后将 xaml 文件添加到您的 .net 应用程序中。

1.  在 Visual Studio 的解决方案资源管理器中右键单击您的应用程序名称。
2.  点击添加
3.  单击现有项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T04:54:01.350

如果你想为你的用户提供一个 XAML 编辑器来编辑带有 Visual Studio 功能的 XAML，那么你可能需要了解在你的应用程序中嵌入 Visual Studio 编辑器。像这样的东西：http: [//dotneteers.net/blogs/divedeeper/archive/2010/07/28/LearnVSXNow_2D00_Part45.aspx](http://dotneteers.net/blogs/divedeeper/archive/2010/07/28/LearnVSXNow_2D00_Part45.aspx)

此外，您也可以分发它，但您必须找到有关其许可问题的详细信息。我听说微软允许它免费，但不确定。

# ruby-on-rails - 未初始化的常量 UsersController::User

> ID：10859555
> 
> 赞同：0
> 
> 时间：2012-06-02T03:24:07.413
> 
> 标签：ruby-on-rails

我在哪里初始化常量？我以为它只是在控制器中。

错误

```
uninitialized constant UsersController::User 
```

用户控制器

```
 class UsersController < ApplicationController
      def show
        @user = User.find(params[:id])
      end
      def new
      end
    end 
```

路线

```
SampleApp::Application.routes.draw do

  get "users/new"
 resources :users
  root to: 'static_pages#home'

  match '/signup', to: 'users#new'

  match '/help', to: 'static_pages#help'
  match '/about', to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact' 
```

用户.rb

```
 class AdminUser < ActiveRecord::Base
      attr_accessible :name, :email, :password, :password_confirmation
      has_secure_password
      before_save { |user| user.email = email.downcase }
      validates :name, presence: true, length: { maximum: 50 }
      VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
      validates :email, presence: true,
      format: { with: VALID_EMAIL_REGEX },
      uniqueness: { case_sensitive: false }
      validates :password, presence: true, length: { minimum: 6 }
      validates :password_confirmation, presence: true
    end 
```

这可能有助于我也得到

```
The action 'index' could not be found for UsersController 
```

当我转到用户页面时，但是当我转到 users/1 时，出现上述错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T04:35:16.397

您在这里有几个问题-

1.  您的`AdminUser`模型应该被称为`User`，因为它在 中定义`user.rb`，并且您`UsersController`正在尝试找到它们，这就是您收到`uninitialized constant UsersController::User`错误的原因。控制器不会`User`为您定义类。

2.  您尚未在 中定义`index`操作`UsersController`，但已为其定义了路线。当您在`routes.rb`文件中声明资源时，Rails 默认会创建 7 条路由，它们指向控制器中的特定操作 - `index`、`show`、`new`、`edit`、`create`、`update`和`delete`. 您可以通过参数阻止 Rails 定义一个或多个路由`:only`- 例如，`resources :users, :only => [:new, :show]`您可以看到已定义的路由，以及它们将调用的控制器操作`rake routes`。`http://localhost:3000/users`默认情况下会点击`UsersController#index`动作，而默认情况下`http://localhost:3000/users/1`会点击动作，作为参数`UsersController#show`传递。`1``id`

# javascript - 如何仅替换第一个连续出现（模糊匹配）？

> ID：10859556
> 
> 赞同：0
> 
> 时间：2012-06-02T03:24:50.663
> 
> 标签：javascript, regex, fuzzy-search

我正在尝试编写“模糊”匹配，但找不到解决此问题的方法：

中的数据：`makrusakkk`，查询：`mrk`，预期结果：`<b>m</b>ak<b>r</b>usa<b>k</b>kk`。

正则表达式：`"makrusakkk".match(/(m).*?(r).*?(k)/i)`返回`["makrusak", "m", "r", "k"]`.

所以问题是：有没有办法使用 RegExp 获得预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:36:55.273

我认为对此类问题使用正则表达式会使事情变得更加复杂。以下基于字符串和循环的解决方案将导致结果：

```
function fuzzySearch(query, input) {
    var inds = patternMatches(query, input);
    if(!inds) return input;

    var result = input;
    for(var i = inds.length - 1; i >= 0; i--) {
        var index = inds[i];
        result = result.substr(0,index) + 
            "<b>" + result[index] + "</b>" + 
            result.substr(index+1);
    }

    return result;
}

function patternMatches(query, input) {
    if(query.length <= 0) {
        return [];
    } else if(query.length == 1) {
        if(input[0] == query[0]) return [0];
        else return [];
    } else {
        if(input[0] != query[0])
        return false;

        var inds = [0];
        for(var i = 1; i < query.length; i++) {
            var foundInd = input.indexOf(query[i], inds[i-1]);
            if(foundInd < 0) {
                return [];
            } else {
                inds.push(foundInd);
            }
        }
        return inds;        
    }
}

var input = "makrusakkksd";
var query = "mrk";
console.log(fuzzySearch(query, input));
console.log(patternMatches(query, input)); 
```

这里也是一个现场演示：http: [//jsfiddle.net/sinairv/T2MF4/](http://jsfiddle.net/sinairv/T2MF4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:32:29.520

在这里您将需要`for`：

```
function search_for_it(txt, arr){
    for(i=0;i<arr.length;i++){
        var reg = new RegExp(arr[i], "i");
        txt = txt.replace(reg, "<b>"+arr[i]+"</b>");
    }
    return txt;
}

search_for_it("makrusakkk", ["m","r","k"]);

//return "<b>m</b>a<b>k</b><b>r</b>usakkk" 
```

PS：您的*预期结果*不正确。先有`k`后有`a`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:14:42.727

> 有没有办法使用 RegExp 获得预期的结果？

有。

```
"makrusakkk".replace(/(m)(.*?)(r)(.*?)(k)/i, '<b>$1</b>$2<b>$3</b>$4<b>$5</b>'​​​​​​​) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T14:15:49.667

我对此感到隐隐约约的肮脏，但是……无论如何；这是*一种*方法：

```
$('#s').keyup(

function(e) {
    var w = e.which;
    if (w == 8 || w == 46) {
        return false;
    }
    var listElems = $('ul:first li'),
        search = $(this).val().replace(/w+/g, ''),
        r = search.split(''),
        rString = [];
    $.each(r, function(i, v) {
        rString.push('(' + v + ')');
    });
    var reg = new RegExp(rString.join('(\\d|\\D)*'), 'gi');

    listElems.each(

    function() {
        if (!$(this).attr('data-origtext')) {
            $(this).attr('data-origtext', $(this).text());
        }
        $(this).html($(this).attr('data-origtext').replace(reg, '<b>$&</b>'));
    });
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nYNw6/)。

不过，几乎可以肯定，它可以从相当多的简化中受益。

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [`join()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join).
*   [`keyup()`](http://api.jquery.com/keyup/).
*   [`push()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push).
*   [`RegExp()`](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions).
*   [`replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace).
*   [`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split).
*   [`text()`](http://api.jquery.com/text/).
*   [`val()`](http://api.jquery.com/val/).

# javascript - jquery中的“未捕获的语法错误：意外的标识符”错误

> ID：10859564
> 
> 赞同：3
> 
> 时间：2012-06-02T03:26:41.600
> 
> 标签：javascript, jquery, plugins, syntax-error

我正在制作一个新的 jQuery 插件，用于在页面上绘制线条。问题是我无法弄清楚这里发生了什么，当我运行脚本时，在 Chrome 中它说：

```
"Uncaught SyntaxError: Unexpected identifier" 
```

在第 8 行到最后一行（显示为： 的行`$.line();`）。

整个代码：

```
(function( $ ) {

    $.fn.line = function(coordinates) {

        var bothpoints;

        $.fn.line.draw = function() {

            var lineColor = $('#lineRegion').attr('lineColor');

            if (!lineColor) {
                var colors = ['black', 'blue', 'green', 'red', 'yellow', 'purple', 'magenta', 'cyan'];

                $('img.line').each(function () {
                    colors.splice(colors.indexOf($(this).css('color')), 1);
                });

                var lineColor = colors[0];

            }

            var data = $.line.data(),
                width = Math.abs(data[0] - data[2]),
                height = Math.abs(data[1] - data[3]);
            if (data[0] >> data[2]) {
                var lineleft = data[2];
            } else {
                var lineleft = data[0];
            }
            if (data[1] >> data[3]) {
                var linetop = data[1];
            } else {
                var linetop = data[3];
            }

            $('body').append('<img class="line" src="/lines/line-'+lineColor+'.png" style="position:absolute;top:'+linetop+';left:'+lineleft+';width:'+width+'px;height:'+height+'px;color:'+lineColor+';"/>');
        }

        $.fn.line.data = function(coords) {
            if (coords.length == 2) {
                if ( ! $('#line').data('point1') ) { 
                    $('#line').data('point1', {x: coords[0], y: coords[1]});
                    bothpoints = false;
                } else {
                    $('#line').data('point2', {x: coords[0], y: coords[1]});
                    bothpoints = true;
                }
                $.line.draw();
            } else if (coords == 1) {
                $('#line').data('point1', false);
                bothpoints = false;
            } else if (coords == 2) {
                $('#line').data('point2', false);
                bothpoints = false;
            } else if (!coords) {
                return [$('#line').data('point1').x, $('#line').data('point1').y, $('#line').data('point2').x, $('#line').data('point2').y];
            }
        }

        $.fn.line.point = function() {
            if (!($.line.data().length == 4)) {
                var _posY = posy, _posX = posx;
                $('body').append('<div class="point" style="position:absolute; top:' + _posY + 'px; left:' + _posX + 'px;"></div>');
                $.line.data([_posX, _posY]);
                if (bothpoints == true) {
                    $.line.draw();
                }
            }
        }

        $.fn.line.unpoint = function() {
            this.hide('fast');
            if ($.line.data()[0] == this.offset()['left'] && $.line.data[1] == this.offset()['top']) {
                $.line.data(1);
            } else {
                $.line.data(2);
            }
            $.line.erase();
        }

        $.fn.line.erase = function(total) {
            if (total == true) {
                $('img.line').hide('fast');
                $('div.point').hide('fast');
                $.line.data(1);
                $.line.data(2);
            } else {
                $('img.line').hide('fast');
            }
        }

        if ( coordinates.length == 4) {
            $.line.data([coordinates[0], coordinates[1]]);
            $.line.data([coordinates[2], coordinates[3]]);
            $.line.draw();
        }

    };

    var posx, posy;

    $(document).ready(function(){
        $(document).on('mousemove', function(e) {
            if (!e) var e = window.event;
            if (e.pageX || e.pageY)     {
                posx = e.pageX;
                posy = e.pageY;
            }
            else if (e.clientX || e.clientY)    {
                posx = e.clientX + document.body.scrollLeft
                    + document.documentElement.scrollLeft;
                posy = e.clientY + document.body.scrollTop
                    + document.documentElement.scrollTop;
            }
        }
        $.line();
        $('head').append('<meta id="line" />');
        $('#lineRegion').click( $.line.point() );
        $('.point').click( $.line.unpoint() );
        $('.lineEraser').click( $.line.erase(true) );
    }

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-02T03:30:37.633

您启动一个内联函数：`$(document).on('mousemove', function(e) {`并且永远不会完成它之后的语句。在出现错误的行之前，您需要`});`而不是仅`}`.

# c# - 短 ID 生成和最大组合数

> ID：10859565
> 
> 赞同：0
> 
> 时间：2012-06-02T03:27:05.010
> 
> 标签：c#, combinations

好的，这可能更像是一个数学问题，但由于它与编程和我的 Web 应用程序有关，我会先在这里问：

我正在尝试创建 8 个字符长的短 ID。从中提取 id 的“池”是数字、大小写字母的组合。

```
string charPool = "ABCDEFGOPQRSTUVWXY1234567890ZabcdefghijklmHIJKLMNnopqrstuvwxyz" 
```

如果你有兴趣这里的方法：

```
private string GenerateRandomCode(int length)
{
    string charPool = "ABCDEFGOPQRSTUVWXY1234567890ZabcdefghijklmHIJKLMNnopqrstuvwxyz";
    StringBuilder rs = new StringBuilder();

    for (int i = 0; i < length; i++)
    {
        rs.Append(charPool[(int)(_random.NextDouble() * charPool.Length)]);
    }

    return rs.ToString();
} 
```

8 个字符 id 有多少种可能的组合？如果您也可以发布方程式，将不胜感激:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:35:20.527

`options per slot ^ number of slots = number of combinations`

az 是 26，乘以 2（对于上限也是如此）是 52，加上 10 (0-9) 是 62。每个 ID 是 8 个字符长，所以结果是 62^8，这是相当大的：

`218,340,105,584,896 possible unique ID's`

我建议这样做：

`_random.Next(charPool.Length - 1)`

（并保存`charPool.Length - 1`在循环外的变量中），而不是：

`_random.NextDouble() * charPool.Length`

因为你可能会得到一个精确的`1.0`with `.nextDouble()`，这意味着你将在一个等于长度的索引处访问数组，你会得到 IndexOutOfRangeException。

# android - 在 android 应用程序工作文件夹中编辑什么

> ID：10859566
> 
> 赞同：0
> 
> 时间：2012-06-02T03:27:06.747
> 
> 标签：android, eclipse, directory

我有墙纸应用程序的代码，并希望使用相同的代码来创建具有不同应用程序名称并更改图片的新应用程序，因此需要使用 eclipse 在工作文件夹中编辑哪些文件来制作新应用程序.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:32:43.383

您应该使用新的包名称创建一个新项目。然后，您可以将旧代码复制并粘贴到新项目中，然后更改您需要更改的任何内容。如果您将当前项目转变为完全不同的应用程序，则无法使用相同的包名称发布它。此外，您将无法支持当前应用程序的未来更新，因为您实际上是在清理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T06:56:54.283

从现有源创建项目并通过右键单击 src 文件夹下的包并选择 **Refactor->Rename... 重命名**包，如图所示： ![在此处输入图像描述](../Images/ba17075c9b08f9563412cbc26cbd51e4.png) 现在输入新包名称并选择这些选项，如下图所示： ![在此处输入图像描述](../Images/6fc4df6df3925894b8aacd541c15653b.png)

然后单击**Preview>**并在下一个窗口中单击**ok**。就是这样，您的包将成功重命名。按照此过程重命名您想要的任何内容。您可以通过更改清单文件中的**android:label来更改应用程序的外观名称 :)**

# java - 在 Libgdx 中实现简单运动模糊的意外结果

> ID：10859567
> 
> 赞同：19
> 
> 时间：2012-06-02T03:27:58.333
> 
> 标签：java, android, opengl-es, libgdx

在所附的两张图片中，libgdx 的桌面截图按预期运行。不幸的是，我的 Galaxy Nexus 的屏幕截图不如预期。我正在尝试创建一个简单的运动模糊或轨迹效果。

在我的桌面上按预期进行渲染。 ![Libgdx 在我的桌面上运行，按预期工作](../Images/ba1340a4316e6a26d521df3276000ba1.png)

没有像我预期的那样在我的 Galaxy Nexus 上渲染。 ![在我的 Galaxy Nexus 上运行的 Libgdx 未按预期工作](../Images/81523197632f722b77ff0092afba9220.png)

圆形纹理在渲染期间在 for 循环中绘制，并且使用在圆形之前绘制的 0、0、0、0.1f 的 RGBA 的像素图来实现效果。

**screenClearSprite 创建**

```
Pixmap screenClearPixmap = new Pixmap(256, 256, Format.RGBA8888);
screenClearPixmap.setColor(Color.rgba8888(0, 0, 0, 0.1f));
screenClearPixmap.fillRectangle(0, 0, 256, 256);
screenClearTexture = new Texture(screenClearPixmap);
screenClearSprite = new Sprite(screenClearTexture);
screenClearSprite.setSize(screenWidth, screenHeight);
screenClearPixmap.dispose(); 
```

**使成为**

```
batch.begin();
font.draw(batch, "fps:" + Gdx.graphics.getFramesPerSecond(), 0, 20);
screenClearSprite.draw(batch);
for (int i = 0; i < circleBodies.size(); i++) {
    tempPos = circleBodies.get(i).getPosition();
    batch.draw(circleTexture, (tempPos.x * SCALE) + screenWidthHalf
            - circleSizeHalf, (tempPos.y * SCALE) + screenHeightHalf
            - circleSizeHalf);
}
batch.end(); 
```

那么，我做错了什么？也许有更好的方法来获得运动的“运动模糊”效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:36:37.557

这是一种不同的方法，您每次都用纯色和无 alpha 清除屏幕。

这意味着您将不得不修改您的代码。这样做的好处是，你这样做的方式有一些缺陷：它会模糊运动中的*一切*，而不仅仅是球。除非你小心，否则会很快产生丑陋的结果/伪影。

1.  和你现在做的一样，但不是将球绘制到批次上，而是将它们绘制到纹理/位图/任何东西上。然后每一帧在球图像上添加一个 alpha 混合图像，然后在其上绘制球的当前位置。然后将该图像添加到您的屏幕。很像你现在正在做的，除了你画到别的东西上并保持它。这样您就不必依赖正在绘制的视口，并且可以将所有内容分开。此方法类似于绘制到*累积缓冲区*。

2.  *您可以跟踪每个球的n 个*最新位置，而不是按照您的方式进行操作。然后在每一帧都用不同的 alpha 绘制它们。这很容易实现。*如果您有很多球或较大的n* ，可能会导致许多绘图调用，但如果不是太多，它不应该限制您的 fps 并提供很好的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T13:41:21.443

> 也许有更好的方法来获得运动的“运动模糊”效果？

为了在我的游戏中制作运动模糊，我使用了另一种方法“**粒子效果**”，它对我来说非常好用，而且我没有 Android/桌面问题或不同的 Android 设备

您所要做的就是使用Libgdx的“粒子效果编辑器”并制作您的效果然后将其加载到您的项目中最后将它绘制在您绘制对象的相同位置（并且alos绘制您的对象）

使用 Particle Editor 制作正确效果文件的提示：

*   在粒子效果中设置（使用）要模糊它运动的对象的相同图像

*   尝试限制**计数**：允许的最大粒子数

*   禁用“速度”和“角度”参数

粒子效果有助于做运动效果希望这会对某人有所帮助！

# operating-system - read的实现：先拷贝内存到内核空间比直接拷贝用户空间好吗？

> ID：10859568
> 
> 赞同：0
> 
> 时间：2012-06-02T03:28:24.453
> 
> 标签：operating-system, linux-kernel, kernel

当一个进程在调用“read”后被阻塞时，内核从ios读取数据并将其复制到缓冲区，但是缓冲区在哪里，在内核还是在用户空间（这是“read”的参数功能）。它节省了从内核空间到用户空间的处理，供以后选择，而且用户空间有更多的缓冲区。但是每次应对时都要更改cr3，这会刷新所有TLB数据。这就是我所知道的两个选择，还有其他的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:10:32.277

一种方法是要求设备驱动程序通过 mmap 将其内核缓冲区映射到进程的用户地址空间，然后使用 remap_pfn_range 之类的东西。

当驱动程序完成 I/O 操作时，复制到其内核缓冲区不需要 cr3 更改或击落 TLB。

当用户进程在等待 I/O 时，很有可能它会被调度到另一个新进程来运行，然后 cr3 必须更改（+ TLB 刷新）才能完成整个 I/O 操作完全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:09:32.953

我在内核中看到的一种常见模式是缓冲区通常分配在内核空间中 - `kzalloc(PAGE_SIZE, GFP_KERNEL)`（不一定是 PAGE_SIZE），然后读取发生在该缓冲区中。然后使用 (fs/libfs.c) 将其复制到用户空间`simple_read_from_buffer(..)`- 在内部使用`copy_to_user()`. 尽管这通常用于简单的 I/O 操作或其他（例如 debugfs）读取。

# ruby-on-rails - 上传更改和数据库时出现 heroku pg 错误：(Sequel::DatabaseError)

> ID：10859572
> 
> 赞同：0
> 
> 时间：2012-06-02T03:29:11.483
> 
> 标签：ruby-on-rails, postgresql, heroku, taps

我对我的应用程序的本地开发版本进行了一些更改。

然后我像往常一样使用 git 上传所有内容。

要将我的更改推送到我使用的数据库：

```
heroku db:push 
```

我在终端上收到此错误：

```
Sending schema
/Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `async_exec': PG::Error: ERROR:  permission denied for relation temp_listings (Sequel::DatabaseError)
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `block (2 levels) in execute'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/database/logging.rb:28:in `log_yield'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `block in execute'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:158:in `check_disconnect_errors'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `execute'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:240:in `block (2 levels) in execute'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/connection_pool/threaded.rb:84:in `hold'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/database/connecting.rb:226:in `synchronize'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:240:in `block in execute'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:261:in `check_database_errors'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:238:in `execute'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:541:in `execute'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:319:in `fetch_rows'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:123:in `each'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:449:in `single_record'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:457:in `single_value'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:202:in `get'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:96:in `count'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:570:in `block in fetch_local_tables_info'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:569:in `each'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:569:in `fetch_local_tables_info'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:551:in `local_tables_info'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:556:in `tables'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:439:in `push_schema'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:407:in `block in run'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:203:in `call'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:203:in `catch_errors'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/operation.rb:405:in `run'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/taps-0.3.24/lib/taps/cli.rb:172:in `clientxfer'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.25.0/lib/heroku/command/db.rb:194:in `taps_client'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.25.0/lib/heroku/command/db.rb:35:in `push'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.25.0/lib/heroku/command.rb:148:in `run'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.25.0/lib/heroku/cli.rb:9:in `start'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/gems/heroku-2.25.0/bin/heroku:16:in `<top (required)>'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/bin/heroku:19:in `load'
from /Users/AM/.rvm/gems/ruby-1.9.2-p290/bin/heroku:19:in `<main>' 
```

知道如何解决这个问题或我做错了什么吗？

我已经尝试运行以下命令：

```
heroku pg:reset 
```

然后再次尝试 heroku db:push 没用所以我尝试了这个

```
heroku run rake db:migrate 
```

那也没用

所以我创建了我的应用程序的一个新实例并推送它。得到同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:37:02.953

虽然方便，但使用水龙头（db:push/pull 使用的）可能无法准确复制您的数据，并且可能会在较大的传输中遇到错误。要从生产系统导入或导出数据，我们强烈建议使用 pgbackups。[http://devcenter.heroku.com/articles/pgbackups](http://devcenter.heroku.com/articles/pgbackups)

# c# - wpf ComboBox ISelectionBoxHighlighted 问题

> ID：10859577
> 
> 赞同：0
> 
> 时间：2012-06-02T03:31:05.273
> 
> 标签：c#, asp.net, wpf, silverlight

当我选择组合框项目时，所选项目文本以蓝色突出显示。

我怎样才能删除那个亮点。但是在我删除了 epression blend 中的触发器“IsSelectionBoxHighlighted = true”之后它就可以工作了。

但是我必须用 c# 代码在 wpf 后面的代码中做这件事吗？

我试过这样

```
com_image.IsSelectionBoxHighlighted = true; 
```

但它不起作用，它显示出异常。

请帮助我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:43:49.340

> 你不能设置

```
com_image.IsSelectionBoxHighlighted's 
```

> 价值 。它是只读属性。

你可以得到它的价值。

```
bool result= com_image.IsSelectionBoxHighlighted; 
```

它会编译。

# arduino - Arduino 软件与 LinkSprite Jpeg 相机的串行连接

> ID：10859578
> 
> 赞同：5
> 
> 时间：2012-06-02T03:31:31.817
> 
> 标签：arduino

所以我们在将 Arduino Uno 连接到 LinkSprite 相机时遇到了问题，我们一直在使用 LinkSprite 示例代码，并添加了一些打印语句

```
#include < SoftwareSerial.h >

  /* Linksprite */

byte incomingbyte;
SoftwareSerial mySerial(4, 5); //Configure pin 4 and 5 as soft serial port
long a = 0x0000, j = 0, k = 0, count = 0; //Read Starting address 
uint8_t MH, ML;
boolean EndFlag = 0;

void SendResetCmd();
void SendTakePhotoCmd();
void SendReadDataCmd();
void StopTakePhotoCmd();

void setup() {
  Serial.begin(38400);
  mySerial.begin(38400);
  Serial.print("Serial began\n");
}

void loop() {
  SendResetCmd();
  Serial.print("Reset Command Sent\n");
  Serial.print(mySerial.available());
  Serial.print("\n");
  while (mySerial.available() > 0) {
    incomingbyte = mySerial.read();
    Serial.print(incomingbyte, HEX);
  } //After reset, wait 2-3 second to send take picture command

  Serial.print("Delay Ended\n");
  SendTakePhotoCmd();
  Serial.print("Take Photo Command Sent\n");
  while (mySerial.available() > 0) {
    Serial.print("Checking Available Bytes\n");
    incomingbyte = mySerial.read();

  }
  byte a[32];
  Serial.print("Byte array intialized\n");
  while (!EndFlag) {
    Serial.print("Entering While loop\n");
    j = 0;
    k = 0;
    count = 0;
    SendReadDataCmd();
    Serial.print("Read Command Sent\n");
    delay(250);
    Serial.print("Delay Ended\n");
    Serial.print(mySerial.available());
    Serial.print("\n");
    while (mySerial.available() > 0) {
      incomingbyte = mySerial.read();
      Serial.print("Incoming Byte Read\n");
      k++;
      if ((k > 5) && (j < 32) && (!EndFlag)) {
        Serial.print("Byte Added to Array\n");
        a[j] = incomingbyte;
        if ((a[j - 1] == 0xFF) && (a[j] == 0xD9)) { //Check if the picture is over
          Serial.print("End Flag");
          EndFlag = 1;
        }
        j++;
        count++;
      }
    }

    for (j = 0; j < count; j++) {
      if (a[j] < 0x10)
        Serial.print("0");
      Serial.print("Picture Printing\n");
      Serial.print(a[j], HEX);
      Serial.print(" ");
    } //Send jpeg picture over the serial port

    Serial.println();
    delay(10000);
  }
  Serial.print("Picture Complete");
  while (1);
}

//Send Reset command 
void SendResetCmd() {
  mySerial.write(0x56);
  mySerial.write(byte(0x00));
  mySerial.write(0x26);
  mySerial.write(byte(0x00));
}

//void SetImageSizeCmd() 
//{ 
//mySerial.write(0x56); 
//mySerial.write(byte(0x00)); 
//mySerial.write(0x31); 
//mySerial.write(0x05); 
//mySerial.write(0x04); 
//mySerial.write(0x01); 
//mySerial.write(byte(0x00)); 
//mySerial.write(0x19); 
//mySerial.write(0x22); 
//} 

//void SetBaudRateCmd() 
//{ 
//mySerial.write(0x56); 
//mySerial.write(byte(0x00)); 
//mySerial.write(0x24); 
//mySerial.write(0x03); 
//mySerial.write(0x01); 
//mySerial.write(0xAE); 
//mySerial.write(0xC8); 
//
//} 

//Send take picture command 
void SendTakePhotoCmd() {
  mySerial.write(0x56);
  mySerial.write(byte(0x00));
  mySerial.write(0x36);
  mySerial.write(0x01);
  mySerial.write(byte(0x00));
}

//Read data 
void SendReadDataCmd() {

  MH = a / 0x100;
  ML = a % 0x100;
  mySerial.write(0x56);
  mySerial.write(byte(0x00));
  mySerial.write(0x32);
  mySerial.write(0x0c);
  mySerial.write(byte(0x00));
  mySerial.write(0x0a);
  mySerial.write(byte(0x00));
  mySerial.write(byte(0x00));
  mySerial.write(MH);
  mySerial.write(ML);
  mySerial.write(byte(0x00));
  mySerial.write(byte(0x00));
  mySerial.write(byte(0x00));
  mySerial.write(0x20);
  mySerial.write(byte(0x00));
  mySerial.write(0x0a);
  a += 0x20; //address increases 32£¬set according to buffer size 

}

void StopTakePhotoCmd() {
  mySerial.write(0x56);
  mySerial.write(byte(0x00));
  mySerial.write(0x36);
  mySerial.write(0x01);
  mySerial.write(0x03);
} 
```

`
该代码基本上向相机发送一个拍照命令，然后读取相机发送的 HEX 值并将这些值保存在一个数组中。我们知道相机可以正常工作，因为我们在另一台设备上对其进行了测试。

最初的问题是，我们从相机获得的值不正确。while 循环中的 EndFlag 永远不会切换，因为指示 JPEG 值（FF 和 D9）结束的 HEX 值永远不会被读取，因此它永远不会从 while 循环中中断。现在，在相机断开连接之前，终端不会打印任何内容，然后所有值似乎都会刷新到屏幕上，并且命令 mySerial.available() 返回 0，这意味着串行读取缓冲区中没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-25T22:43:14.310

我将您的代码与制造商提供的[示例草图](http://learn.linksprite.com/jpeg-camera/tutorial-of-using-linksprite-2mp-uart-jpeg-camera-with-arduino/#tab-1394579835649-3-9)进行了比较，发现您的初始化过程与原始程序不同。在官方示例代码中，他们首先以 115200 串行波特率连接到相机，告诉相机将其波特率更改为 38400，然后他们再次以不同的速度连接到相机 - 38400 波特。

在您的代码中，我看到您一开始就以 38400 波特率连接。但是，相机以不同的速度运行，这解释了为什么您会得到垃圾而不是有效数据。我建议您执行正确的初始化过程，如示例中所述：

```
void setup()
{
    Serial.begin(38400);

    mySerial.begin(115200);
    delay(100);
    SendResetCmd();
    delay(2000);
    SetBaudRateCmd(0x2A);
    delay(500);
    mySerial.begin(38400);
    delay(100);

    Serial.println("initialization done.");
} 
```

此外，取消注释 SetBaudRateCmd() 函数，因为它在初始化过程中使用。

# excel - excel vba - 受保护的工作表删除行

> ID：10859581
> 
> 赞同：0
> 
> 时间：2012-06-02T03:33:25.917
> 
> 标签：excel, vba

我了解到，如果我希望用户删除受保护工作表上的行，我需要编写一个宏。

这是我通过谷歌搜索得到的代码：

```
Sub delete_row()
    ActiveSheet.Unprotect Password:="justme"
        ActiveCell.EntireRow.Delete
    ActiveSheet.Protect Password:="justme"
End Sub 
```

我应该把这段代码放在哪里？如果删除多行等，它会起作用吗？

MrExcel 今天倒闭了，所以选择有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:28:35.083

将其粘贴到模块中

```
Option Explicit

Sub DeleteMe()
    Dim Ret As Range, Cl As Range

    On Error Resume Next
    Set Ret = Application.InputBox("Please select the Cells", "Delete Rows", Type:=8)
    On Error GoTo 0

    ActiveSheet.Unprotect Password:="justme"

    If Not Ret Is Nothing Then Ret.EntireRow.Delete

    ActiveSheet.Protect Password:="justme"
End Sub 
```

当您运行上述宏时，它会要求您选择单元格。无论您选择什么单元格，整行都会被删除。

# android - 单击最后调用的android视图到下面的对话框

> ID：10859585
> 
> 赞同：0
> 
> 时间：2012-06-02T03:34:11.090
> 
> 标签：android, android-layout, android-intent, dialog

我已经搜索了几个小时，但没有找到我需要的解决方案（至少一个我可以理解和实施的解决方案）。

我已经做到了这一点：

1.  当用户点击游戏视图中的按钮开始新游戏时，我称之为 xml 广告布局，它会显示 X 秒。同样的按钮调用一个对话框，询问“你确定要开始一个新游戏”，带有是或否按钮。

2.  广告使用半透明的相对布局精美地显示（所以我看到的只是添加，没有别的）。

问题来了。我希望广告继续展示，而用户可以点击对话框并继续他们的游戏（广告视图仍在显示）

我使用

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE); 
```

打电话给我的时候

```
setContentView(R.layout.ads); 
```

但是当然不能点击广告？！我需要这种效果，同时仍然允许用户随时点击广告。

我通常可以弄清楚这些东西，但我真的很难过！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:59:07.610

我相当肯定，当对话框弹出广告时，广告将不再可点击。解决这个问题的方法是将广告和对话框的内容放在同一个视图中。对话框组件可以隐藏 X 秒然后显示。然后用户可以选择广告或其中一个按钮。当然不是一个完美的解决方案，但它相对简单并且不太可能打破道路。

可能有一种方法可以使用 Fragments 来做到这一点，但是我对它们所做的工作还不够确定。

# python - 如何在 pyqt4 python 中捕获关机信号？

> ID：10859588
> 
> 赞同：2
> 
> 时间：2012-06-02T03:34:32.907
> 
> 标签：python, pyqt4, shutdown

如何在 pyqt4 python 中使用 QApplication.commitData 捕获关闭信号？我想在计算机关闭之前正确关闭程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:11:41.373

您可以尝试连接到[QApplication.aboutToQuit](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qcoreapplication.html#aboutToQuit)信号，但正如@Blender 在评论中建议的那样，不能保证您的应用程序会很好地关闭。我认为操作系统会尝试很好地关闭每个应用程序。

```
from PyQt4 import QtCore, QtGui

def shuttingDown():
    print "Shutting down"

app = QtGui.QApplication([])
app.aboutToQuit.connect(shuttingDown)
w = QtGui.QWidget()
w.show()
app.exec_() 
```

# vagrant - 下载了流浪盒文件，但如何处理它

> ID：10859590
> 
> 赞同：0
> 
> 时间：2012-06-02T03:35:35.400
> 
> 标签：vagrant

我有一个开发人员设置了流浪盒，他上传了我现在在本地机器上的文件。但我不确定如何使用它，因为我以前从未使用过 vagrant。有人可以帮助文档或方向。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T00:37:01.877

[Vagrant 的完整文档](http://vagrantup.com/v1/docs/index.html)可以在网站上找到。从实用的角度来看，Vagrant box 只是一个预配置的[VirtualBox VM](https://www.virtualbox.org/wiki/Documentation)。

如果其他人给了您该框，他们也可以向您展示如何登录。之后，开始编码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-11T18:50:12.400

如果您只是想重新打包一个给定的 .box 文件，那么您可以尝试“vagrant box add”，其中地址是 URL 或物理地址。添加该框后，您可以调用“vagrant init”生成您的 Vagrantfile，并调用“vagrant up”根据您朋友的基本框创建一个虚拟机。您当前所在的文件夹将成为您为该虚拟机执行所有未来 vagrant 命令的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-13T19:11:39.623

# xcode - 一次更新 50 个 UILabel 在模拟器上很快，但在 iPod touch 上却是乌龟

> ID：10859592
> 
> 赞同：0
> 
> 时间：2012-06-02T03:35:53.047
> 
> 标签：xcode, cocoa-touch

不知道除了核心图形还能做什么。UILabel 在模拟器中更新良好，但要更新超过 8 个 UILabel，而且速度越来越慢。不确定我是否可能缺少一些东西来加快速度？否则我必须在那里子类化 UIView 做图形。

我有一个 NSTimer 调用它，但是完成下面的循环需要时间。如果我删除 UILabels:(setBackgroundColor 和 setText) 的更新，它会以正常速度运行。我最初也使用过`viewWithTag`，但在调试这个海龟问题时，我切换到 UILabels 数组以减少开销......虽然时间没有变化。而且该应用程序不适用于任何服务器，只能独立运行。

```
double r,g,b;
static int k=0;
int v;

for (int j = 0; j < 50; j++) {
    r = arc4random() % 256;
    g = arc4random() % 256;
    b = arc4random() % 256;
    v = arc4random() % 2;
    [lblThinking[j] setBackgroundColor:[UIColor colorWithRed:r/256 green:g/256 blue:b/256 alpha:1.0]];
    [lblThinking[j] setText:[NSString stringWithFormat:@"%c", v + 48]];//48  /65
}
k++; 
```

# jquery - 通过带有 mvc 4 和 web api 的 IHttpModule 访问控制服务，站点和服务的不同安全设置？

> ID：10859596
> 
> 赞同：0
> 
> 时间：2012-06-02T03:37:16.940
> 
> 标签：jquery, azure, asp.net-web-api, federated-identity, accesscontrolservice

我正在 Azure 上构建一个 mvc 4 web api 项目。对此 API 的请求通过以下路径：

```
 routes.MapHttpRoute(
            name: "DefaultApi", // Route name
            routeTemplate: "api/{controller}/{id}", 
            defaults: new { id = RouteParameter.Optional }
      ); 
```

在同一个域和不同的路由上，我设置了一个 mvc 网站：

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
      ); 
```

mvc 网站只是一个 HTML 和 Javascript 页面，它与访问控制服务交互以获取令牌，然后将令牌传递给服务以通过 jQuery ajax 获取数据。

为了实现服务的安全性（验证发送到 API 的令牌），我使用了本文所述的 SWTModule 和 TokenValidator 类[，](https://azure.microsoft.com/en-us/documentation/articles/active-directory-dotnet-how-to-use-access-control/)以及我的 MVC 4 Web 应用程序项目 Web.Config system.webserver 属性中的调用：

```
<modules runAllManagedModulesForAllRequests="true">
  <add name="SWTModule" type="SecurityModule.SWTModule, SecurityModule" />
</modules> 
```

即使我没有使用 [Authorize] 标记 MVC 控制器方法，加载默认网页也会导致此错误：

> “/”应用程序中的服务器错误。
> 
> 未经授权
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ApplicationException：未经授权
> 
> 源错误：
> 
> 第 43 行： 第 44 行： // 检查它是否以 'WRAP' 开头 第 45 行： if (!headerValue.StartsWith("WRAP ")) 第 46 行：
> { 第 47 行： throw new ApplicationException("unauthorized");
> 
> 源文件：D:\Dev\VisualStudio2010\Projects\myServices\Azure\myDataInterfaces\SecurityModule\SWTModule.cs 行：45
> 
> 堆栈跟踪：
> 
> [ApplicationException: 未经授权]
> D:\Dev\VisualStudio2010\Projects\myServices\Azure\myDataInterfaces\SecurityModule\SWTModule.cs:45 System.Web.SyncEventExecutionStep.System.Web 中的 SecurityModule.SWTModule.context_BeginRequest(Object sender, EventArgs e)。 HttpApplication.IExecutionStep.Execute() +80 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +270

在我看来，即使我没有用 [Authorize] 标记我的 Controller 方法，它们也会被拒绝，因为我的 SWT 令牌验证会针对每个响应触发，大概是因为它在 Web 堆栈中被较早地调用，因为包含在Web.Config 属性？

有人可以为我指出如何使这项工作的正确方向吗？我想让默认网页（主页控制器索引方法）显示我的登录屏幕，然后重定向到主页。如果用户未使用可用的 ACS 身份提供者之一登录，则该主页应返回未经授权。同样，我想将我的一些 Web API ApiController 方法公开，并要求其他人获得授权。

目前，我在 Visual Studio 中的单个 Web 角色解决方案中的单个 Web 应用程序项目中通过单个 Global.asax 文件路由 MVC 应用程序和 Web API 服务。我想知道解决此问题的方法是否是将 HTML MVC 站点和 Web API 分离到同一 Web 角色解决方案下的不同 Web 应用程序项目中？那仍然不能给我分配某些控制器方法的授权要求的方法，只是给我一个路由控制器和 ApiController 的不同位置。

我觉得我很接近但可能错过了一些重要的东西，但我似乎没有在网上找到它。有人会理我吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:29:39.553

您的帖子中有几个问题，因此不确定您的期望是什么。我只会回答你关于模块为什么不工作的问题，因为这似乎是主要的。

是的，SWTModule 将拦截所有调用，解释为什么在您访问 MVC 路由时它会失败。该模块对 Authorize 属性一无所知。如果你想让它工作，你最好听从 Aliostad 的建议并使用 DelegatingHandler。如果你想“简单地”让它现在工作，你可以检查模块中请求的执行路径，以便它只检查你的 api 的路径（请注意，这不适用于公共 api 方法，因为模块不是知道属性）

是的，使用 2 个单独的项目也可以，因为该模块将仅应用于添加它的项目。

同样，这些是让它工作的快速而肮脏的路径，如果这是使用 ACS 的 POC，那可能很好。否则，你将不得不做更多的功课。Dominick 写了一些关于这个主题的非常[好的文章。](http://leastprivilege.com/category/webapi/)查看文章“ASP.NET WebAPI 安全 #1 到 #4”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:47:00.790

首先，在我看来，您的授权机制会引发异常。通常你会返回一个状态为 403“禁止”的请求。

在 Web API 中执行此操作的正确方法是创建`DelegatingHandler`而不是模块。

看看 Dominick Baier 的[ThinkTecture](https://github.com/thinktecture/Thinktecture.IdentityModel.Http)。

还不要脸的[塞](http://byterot.blogspot.co.uk/2012/05/aspnet-web-api-messagehandler-real.html)。

# jquery - jQuery 弹出 div 没有始终保持打开状态（轻弹）

> ID：10859598
> 
> 赞同：0
> 
> 时间：2012-06-02T03:37:26.550
> 
> 标签：jquery, html

我正在使用 jquery，以便当图像悬停时，会出现一个弹出 div，其中包含来自 Ajax 调用的数据。

我在 IE 和 FF 中都进行了测试，但 DIV 的播放效果并不好！基本上，它会无缘无故地关闭（无需移动鼠标）。有时它好像已经开始了悬停事件。我想轻弹是您可以使用的术语。

我在 Google 上查看过，但找不到任何似乎相关的信息。有人知道为什么会这样吗？我的代码如下：

JS

```
 $(document).ready(function() {
  $(".hover").hover(
  function(e){
    var ref = $(this).attr("wsref");
    var url = "https://site/_ref/shop/_base/order_status.php?action=getstatus&ref="+ref+"&sid="+Math.random();
    $("#status").show();
    var height = $(".status").height();
    var width = $(".status").width();
    leftVal = e.pageX - width -10 + "px";
    topVal = e.pageY - height -10 + "px";
    $("#status").css({left:leftVal,top:topVal});
    $("#status").html("<div id='loading'></div>").load(url);
  },
  function() {
    setTimeout('$("#status").hide()',1500);  
  });
}); 
```

HTML

```
<img class="hover" title="Order Received" name="Order Received" src="https://site/_ref/images/cart.png" wsref="002731"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:52:24.650

试试这个

```
var isShowing;
isShowing=false;
$(document).ready(function() {
$(".hover").hover(
function(e){
if(!isShowing)
{
    var ref = $(this).attr("wsref");
   var url = "https://site/_ref/shop/_base/order_status.php?action=getstatus&    ref="+ref+"&sid="+Math.random();
    $("#status").show();
    var height = $(".status").height();
    var width = $(".status").width();
    $("#status").html("<div id='loading'></div>").load(url);
    isShowing=true;
}
leftVal = e.pageX - width -10 + "px";
topVal = e.pageY - height -10 + "px";
$("#status").css({left:leftVal,top:topVal});

},
function() {
setTimeout('$("#status").hide();',1500);  
});
}); 
```

隐藏后 make isShowing=false; 您也可以不使用 isShowing 变量来实现，方法是查看状态元素的样式属性中的显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:06:05.277

您的问题是当 div 打开时您将鼠标悬停在触发图像上。当鼠标在弹出窗口上时（因为弹出窗口不是触发器图像的子级），它在触发器本身上被视为 mouseOut。通过关闭弹出窗口。然后鼠标再次悬停在触发器上，使其重新打开。

```
$(document).ready(function() {
  $(".hover").mouseover(function(e){
        var ref = $(this).attr("wsref");
        var url = "https://site/_ref/shop/_base/order_status.php?action=getstatus&ref="+ref+"&sid="+Math.random();
        $("#status").show();
        var height = $(".status").height();
        var width = $(".status").width();
        leftVal = e.pageX - width -10 + "px";
        topVal = e.pageY - height -10 + "px";
        $("#status").css({left:leftVal,top:topVal});
        $("#status").html("<div id='loading'></div>").load(url);
      });
    $("#status").mouseout(function() {
        setTimeout('$("#status").hide()',1500);  
      });
  }); 
```

# php - 无法使用 IMAP 获取纯文本邮件内容

> ID：10859600
> 
> 赞同：5
> 
> 时间：2012-06-02T03:40:11.390
> 
> 标签：php, email, imap

我正在使用`IMAP`函数从特定邮件 ID 读取邮件。但我无法读取邮件的邮件内容`plain text`。它非常适合`HTML Mails`。运行代码后，所有`plain text`邮件都保持未读状态，html 邮件标记为已读，发件人邮件 ID 和主题等其他内容我可以阅读。唯一的问题是阅读内容。这是我尝试过的代码

```
 include('imap.php');
    $hostname = '{xxx.org:143/novalidate-cert}INBOX';
    $username = 'xxx-xxx@xx.org';
    $password = 'xxxxx';
    $inbox = imap_open($hostname,$username,$password) or die('Cannot connect to : ' . imap_last_error());
    $emails = imap_search($inbox,'UNSEEN');

    if($emails) {
      $output = '';
      rsort($emails);
      foreach($emails as $email_number) {
        $structure = imap_fetchstructure($inbox, $email_number); 
            $savedir = dirname(__FILE__).'/uploads/';
                    $attachments = array();
                    if(isset($structure->parts) && count($structure->parts)) {

                        for($i = 0; $i < count($structure->parts); $i++) {

                            $attachments[$i] = array(
                                'is_attachment' => false,
                                'filename' => '',
                                'name' => '',
                                'attachment' => ''
                            );
                            if($structure->parts[$i]->ifdparameters) {
                                foreach($structure->parts[$i]->dparameters as $object) {
                                    if(strtolower($object->attribute) == 'filename') {
                                        $attachments[$i]['is_attachment'] = true;
                                        $attachments[$i]['filename'] = $object->value;
                                    }
                                }
                            }

                            if($structure->parts[$i]->ifparameters) {
                                foreach($structure->parts[$i]->parameters as $object) {
                                    if(strtolower($object->attribute) == 'name') {
                                        $attachments[$i]['is_attachment'] = true;
                                        $attachments[$i]['name'] = $object->value;
                                    }
                                }
                            }

                            if($attachments[$i]['is_attachment']) {
                                $attachments[$i]['attachment'] = imap_fetchbody($inbox, $email_number, $i+1);
                                if($structure->parts[$i]->encoding == 3) { // 3 = BASE64
                                    $attachments[$i]['attachment'] = base64_decode($attachments[$i]['attachment']);
                                }
                                elseif($structure->parts[$i]->encoding == 4) { // 4 = QUOTED-PRINTABLE
                                    $attachments[$i]['attachment'] = quoted_printable_decode($attachments[$i]['attachment']);

                                }

                                 $savepath = $savedir . $attachments[$i]['filename'];
                                file_put_contents($savepath, $attachments[$i]['attachment']);

                            }
                        }
                    }

                $name = $structure->parts[1]->dparameters[0]->value; 
                $overview = imap_fetch_overview($inbox,$email_number,0);
                 $msg = imap_fetchbody($inbox,$email_number,1.2); 

                 $message='';
                if($msg=='')
                {
                    $message = imap_fetchbody($inbox,$email_number,2.0);

                }else{
                 $message=$msg;

                 }

                 $sub=$overview[0]->subject;
                  $from=$overview[0]->from;
                  $arr = explode('<', $from);
                    $from_mail = $arr[1];
                    if($from_mail!='')
                    {
                        $from=str_replace('>','',$from_mail);
                    }

               $randstr='';
               srand((double)microtime()*1000000);

               $chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
               while(strlen($randstr)<5) {
                  $randstr.=substr($chars,(rand()%(strlen($chars))),1);
               } 
```

任何人请帮助我...在此先感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T13:32:33.967

你的问题是这一行：

```
$msg = imap_fetchbody($inbox,$email_number,1.2); 
```

1.2是TEXT/HTML邮件部分，用于html邮件正文。

1.1 是 TEXT/PLAIN - 纯文本电子邮件正文 - 对于纯文本消息，您需要使用这个。

# wordpress - wordpress.com 托管博客上的随机背景

> ID：10859601
> 
> 赞同：0
> 
> 时间：2012-06-02T03:40:15.347
> 
> 标签：wordpress, random, background, wordpress.com

我想知道是否可以为 wordpress.com 上托管的博客添加随机背景。每次访问者进入页面或按下`F5`，都会加载不同的背景。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:45:28.273

是的。每次用户加载或刷新页面时，都可以加载随机背景。

**更新：**根据您对问题的更新，您现在似乎想知道如何做到这一点，而不仅仅是可能的话。一个非常简单的方法是这样的：

```
<?php
$directory = ABSPATH."wp-content/themes/your_theme_name/images/backgrounds/";
$images = glob($directory."*.jpg");
$randBG = str_replace(ABSPATH, site_url('/'), array_rand($images));
?>
<body style="background:#FFF url(<?php echo $randBG; ?>) no-repeat center 0 scroll"> 
```

这样做是扫描一个名为“背景”的目录，该目录位于主题目录中的图像文件夹中。将从该文件夹中选择一个随机 jpeg，并且您的 body 元素将被相应地设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T00:25:51.093

实际上，在 Wordpress.com 网站上不可能实现这种效果（除非主题允许）。Wordpress.org 允许您安装插件和编辑单个文件，但 Wordpress.com 非常有限。

# android - 使用循环向表动态添加新行 - android

> ID：10859602
> 
> 赞同：2
> 
> 时间：2012-06-02T03:40:36.643
> 
> 标签：android, tablelayout, tablerow

我正在尝试为 android 做 rss 阅读器。我从 web 服务中获取数据并放入 arraylist。然后我在活动类中使用该数组列表。我想创建计数等于数组列表大小的表行和文本视图。这里没有问题。但是当我执行应用程序时，所有文本视图都会给出相同的结果（数组列表的最后一项） .所有arraylist 项目都是不同的。我期待这个结果

> 新闻[1]
> 新闻[2]
> 新闻[3] ....

但我明白了

> 新闻[20]
> 新闻[20]
> 新闻[20]

我不明白有什么问题。我尝试从 for 循环中创建 textview 和 row 实例，但我得到“.IllegalStateException：指定的子级已经有父级”异常。我有一个新闻pojo，这是我的代码。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.guncel);
    WebService ws = new WebService();
    TableLayout tb = (TableLayout) findViewById(R.id.tbl1);

    news news1 = null;
    List<news> newslist;
    URL serviceURL;
    try {
        serviceURL = new URL(
                "http://rss.hurriyet.com.tr/rss.aspx?sectionId=1");
        newslist = ws.getList(serviceURL);
        for (news new1 : newslist) {
            TableRow row = new TableRow(this);
            TextView txtview = new TextView(this);
            row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));
            news1 = (news) newslist.get(i);
            txtview.setText(new1.getTitle());
            System.out.println(new1.getTitle());
            row.addView(txtview);
            tb.addView(row);
        }
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }

} 
```

* * *

好吧，这是我的错。我没有仔细检查我的清单。列表中表示对象的所有项目都是相同的。抱歉问了不好的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:48:50.737

如果您使用 foreach 循环，请使用这种方式：

```
 foreach (news new1 : newslist) {
        TableRow row = new TableRow(this);
        row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        txtview.setText(new1.getTitle());
        System.out.println(new1.getTitle());
        row.addView(txtview);
        tb.addView(row);
    } 
```

并使用 for 循环：

```
for (int i = 0; i < newslist.size(); i++) {
     TableRow row = new TableRow(this);
            row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));
            news1 = (news) newslist.get(i);
            txtview.setText(new1.getTitle());
            System.out.println(new1.getTitle());
            row.addView(txtview);
            tb.addView(row);
} 
```

# javascript - 确定动态图像 src 的文件扩展名

> ID：10859609
> 
> 赞同：0
> 
> 时间：2012-06-02T03:41:33.680
> 
> 标签：javascript, image, greasemonkey

使用 Greasemonkey 脚本，如果网页上加载的图像是 a`gif`或`jpg`. 该页面的代码如下：

```
<div id="current_photo">      
    <div style="text-align:center;">
        <img src="[url]/[random numbers].gif/jpg" alt="" style="[styles]">
    </div>
</div> 
```

URL 的开头将是唯一的，因为页面上只有一个带有该 URL 的图像。需要一种方法来拉动该路径并从中获取扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T04:11:23.497

问题中的 HTML 格式不正确。这真的是一个准确的片段吗？链接到目标页面。

无论如何，这样的代码应该可以工作：

```
var payloadImage    = document.querySelector ("#current_photo div img");

if (/\.gif$/i.test (payloadImage.src) ) {
    // DO GIF ACTION HERE
} 
else if (/\.jpg$/i.test (payloadImage.src) ) {
    // DO JPG ACTION HERE
}
else {
    // DO WHATEVER HERE
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:55:39.483

为您的图像标签添加 id="something"。然后是这样的：

```
var path = document.getElementById('something').src;
var extidx = path.lastIndexOf('.');
var extension = path.substr(extidx+1); 
```

# javascript - 如何判断一个参数是否为点击事件

> ID：10859610
> 
> 赞同：0
> 
> 时间：2012-06-02T03:41:52.350
> 
> 标签：javascript, jquery

我有一个可以通过点击事件或直接调用的函数。当我直接调用它时，我需要传递一个数据参数，所以我定义了接受参数的函数来解释带参数的直接调用。

```
function myFunc(param){

} 
```

在函数中，我需要区分函数是直接调用还是从点击事件调用，所以我认为我可以简单地检查是否设置了参数。如果已设置，则直接调用该函数。如果未设置，则从 click 事件中调用它。

问题是默认情况下单击事件会传递一个事件对象。因此，即使单击事件调用该函数，参数也不会为空。

那么有没有办法检查传递的参数是否是点击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:54:50.253

您不需要复制任何代码。执行此操作的正确方法是使用事件处理程序处理单击事件，以及您要在另一个函数中执行的操作。例如：

```
// define main action
var doSomethingUseful = function(is_clicked) {
  // write some code here
}

// define click handler
var myBtnClicked = function(e) {
  doSomethingUseful(true);
}

// bind click event
$('#my_button').click(myBtnClicked); 
```

尽管正如已经向您提到的那样，您需要知道该信息的事实*通常是*一个警告信号，表明可能有更简单的方法来做事。

**编辑**例如：

```
// define main action
var doSomethingUseful = function() {
  // write some code here that doesn't care "why" it's being called
}

// define click handler
var myBtnClicked = function(e) {
  // do the click-only stuff

  // call the generic function
  doSomethingUseful();
}

// bind click event
$('#my_button').click(myBtnClicked); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T04:19:28.683

9 版之前的 IE 并不总是传递事件参数，因此如果从 IE 点击调用，该参数将是未定义的。

```
function myFunc(param){
if(!param) || param.clientX)// not called with a data param
} 
```

您最好检查数据而不是事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T04:36:18.637

```
jQuery(document).ready(function(){
    $('#someID').click(function(){ 
        myFunc(true);
    });
    myFunc();
});

function myFunc(param){
    param ? alert("click"):alert("not click");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T03:47:14.640

检查传递给单击事件的 .clientX 属性。

```
 function(param){

   if(param.clientX){//this is a click event}
    else
    {//this is a call event};

}; 
```

您可能想使用这个。

```
 function(param){

       if(param.target){//this is a click event}
        else
        {//this is a call event};

    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T04:52:05.453

```
function myFunc(param) {

    // which (aka keyCode) is a property set to params
    // by jQuery for any event

    // Check for object make you free to pass parameter 
    // as object also with string, array and so on

    if (Object.prototype.toString(param) == '[object Object]' && param.which) {
        // called by clck
        console.log(param.which);
    } else {
        // called by function
        console.log(param);
    }
}

$('#clickable').click(myFunc)

// passing parameter as object
myFunc({
    a: 'abc',
    b: 'def'
});​

// passing parameter as string
myFunc('Hello');

// passing parameter as array
myFunc([1, 2, 2]); 
```

等等。

**[演示](http://jsfiddle.net/NKhKn/3/)**

# google-analytics - 如何将 garb 与来自 omniauth_google_oauth2 的令牌连接？

> ID：10859612
> 
> 赞同：4
> 
> 时间：2012-06-02T03:42:08.063
> 
> 标签：google-analytics, omniauth, garb-gem

我需要连接到 Google Analytics。我正在使用`omniauth_google_oauth2`该应用程序对用户进行身份验证，这给了我一个令牌。问题是我需要连接到该用户的 Google Analytics 帐户。要将 GA 连接到我的应用程序，我使用了只有两种身份验证方法的[garb gem；](http://github.com/vigetlabs/garb)用户名/密码和 OAuth 令牌。当我使用omniauth_google_oauth2 提供的令牌时，它不起作用。

如何仅使用从omniauth_google_oauth2 的身份验证中获得的oauth_token 创建这个新令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:11:49.720

我知道我参加这个聚会迟到了，但我解决了一个类似的问题。除非您使用支持 oauth2 的分叉 garb，否则您不能将 omniauth_google_oauth2 与 garb 一起使用。[这里](https://github.com/Sija/garb)有一个由 Sija 维护得很好。但是，您将需要使用 oauth2 客户端对象才能使用此分叉创建会话。您可以使用 omniauth_google_oauth2 设置用户的个人资料，并确保为用户保存刷新令牌，然后当您想使用 garb 获取分析数据时，使用 oauth2 刷新令牌，然后将该对象传递到您的 garb 会话中以提取用户的数据。这是将来自omniauth 的refresh_token 存储在某处后的示例：

```
client = OAuth2::Client.new YOURGOOGLEAPIKEY, YOURGOOGLEAPISECRET,
                                {
                                  :site => 'https://accounts.google.com',
                                  :authorize_url => "/o/oauth2/auth",
                                  :token_url => "/o/oauth2/token",
                                }
response = OAuth2::AccessToken.from_hash(client, :refresh_token => omniauth_refresh_token).refresh!
Garb::Session.access_token = response 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:11:45.193

我认为您遇到的问题是`garb`只会使用 OAuth 1（或用户名/密码组合）对用户进行身份验证，而`omniauth_google_oauth2`（显然）是 OAuth 2。

我发现的唯一解决方案是使用 Google 已弃用的 OAuth 1 实现，如下所示......

宝石文件：

```
gem 'omniauth-google', :git => 'git://github.com/davidkpham/omniauth-google.git'
# This fork relaxes dependencies on omniauth itself 
```

初始化程序（用于 Google Analytics 访问）：

```
provider :google, 'XXXXXXXXXXXX.apps.googleusercontent.com', 'YOUR_SECRET', scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.google.com/analytics/feeds/' 
```

在回调中，存储一些传回的东西：

```
auth = request.env["omniauth.auth"]
session[:google_token] = auth.credentials.token
session[:google_secret] = auth.credentials.secret 
```

然后为 构造一个 AccessToken `garb`：

```
if session[:google_token] and session[:google_secret]
  consumer = OAuth::Consumer.new('XXXXXXXXXXXX.apps.googleusercontent.com', 'YOUR_SECRET', {
    :site => 'https://www.google.com',
    :request_token_path => '/accounts/OAuthGetRequestToken',
    :access_token_path => '/accounts/OAuthGetAccessToken',
    :authorize_path => '/accounts/OAuthAuthorizeToken'
  })
  garbsession = Garb::Session.new
  garbsession.access_token = OAuth::AccessToken.new(consumer, session[:google_token], session[:google_secret])
  # Once we have an OAuth::AccessToken constructed, do fun stuff with it
  ga_id = "UA-XXXXXXX-X"
  profile = Garb::Management::Profile.all(garbsession).detect {|p| p.web_property_id == ga_id}
  ga_monthly = GoogleAnalyticsDate.results(profile, :start_date => (Date.today - 30), :end_date => Date.today, :sort => :date)
  puts ga_monthly
end 
```

# mysql - cakephp mysql 大写表错误

> ID：10859615
> 
> 赞同：0
> 
> 时间：2012-06-02T03:42:17.613
> 
> 标签：mysql, cakephp-1.3

我收到此错误是因为`Categories`表不存在，但它确实存在！，问题是开头的大写，现在如果我将所有表的名称在第一个字母上更改为大写，问题就消失了，但我不想更改所有表的名称，问题是当我提交新代码但我不知道我做了什么，我认为是 MySql 配置问题，知道如何解决这个问题吗？谢谢！！！！

错误：

> SQL 错误：1146：表 'product_phpfogapp_com.Categories' 不存在 [CORE/cake/libs/model/datasources/dbo_source.php，第 681 行]

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:03:28.370

```
class YourModelName extends AppModel {
    public $useTable = 'your_table_name'; // This model uses a database table 'your_table_name'
} 
```

# google-app-engine - 在线 GAE 应用程序用户

> ID：10859616
> 
> 赞同：0
> 
> 时间：2012-06-02T03:42:22.247
> 
> 标签：google-app-engine

如何知道用户当前是否在您的 Google App Engine 应用程序中登录？

该应用程序允许其用户浏览其他用户的个人资料。如果查看的个人资料也在应用程序中使用或登录，我希望收到有关查看的个人资料在线的通知。

如何达到这个要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:57:48.220

如果您正在管理用户配置文件，您知道用户何时登录。在登录过程结束时，只需将用户的登录信息以某种方式保存在内存缓存中。稍后您将能够通过在您的内存缓存中搜索用户来检查用户是否已登录。

这种方式很容易捕获和跟踪连接事件，但您还必须在用户断开连接时做出反应，以使您的列表保持最新。为此，您可以使用 Channel。请参阅[谷歌文档](https://developers.google.com/appengine/docs/java/channel/overview#Tracking_Client_Connections_and_Disconnections)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:47:48.457

正如 Gaël 所建议的那样，您可以使用[Channel API](https://developers.google.com/appengine/docs/python/channel/overview)来跟踪它，但这可能是矫枉过正。如果您想走那条路，只需侦听已连接和已断开连接的消息，并更新数据库中指示用户已登录的字段。

更便宜的方法可能是只更新用户记录中的字段，例如“该用户上次请求页面”。如果自用户上次请求页面以来已超过*n*分钟，则假定他们已退出。实际上，您甚至可以在 memcache 中使用从用户 ID 到上次访问时间的映射来执行此操作。

归结为您想对“登录”信息做什么：如果您只是想大致了解用户是否在附近，或者有多少用户在线，那么使用数据存储或内存缓存解决方案可能会很好。另一方面，如果您想反映用户的存在，以便他们可以响应例如。IM，那么您可能无论如何都需要 Channel API，以便您可以立即将消息传递给他们。

# android - 从 android 应用程序调用 Web 服务

> ID：10859624
> 
> 赞同：0
> 
> 时间：2012-06-02T03:44:00.227
> 
> 标签：android, ksoap2, android-ksoap2

我需要从 android 应用程序调用 Web 服务。我有在 java 中创建的 web 服务的 wsdl 文件，我没有相同的源代码。在 java 中，我使用“生成客户端”选项从 wsdl 生成文件，然后使用 Axis.jar 通过我的 java 应用程序调用 Web 服务。当我单击“生成客户端”选项时，会生成文件以及一些编译错误。但是当我在 java 应用程序中做同样的事情时，生成的文件没有任何编译错误。请告知android预期的正确方法。问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:11:10.310

在 android 中，您可以使用 ksoap 库并调用所需的 web 服务。使用构建路径包含 ksoap 库并使用以下代码调用 Web 服务。在这个路径中找到ksoap库 [ksoap库路径](http://code.google.com/p/ksoap2-android/downloads/detail?name=ksoap2-android-assembly-2.4-jar-with-dependencies.jar&can=2&q=)

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.MarshalBase64;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;

public class SVCWebServiceActivity extends Activity {
    /** Called when the activity is first created. */
    private static final String SOAP_ACTION = "http://tempuri.org/GetByteArray";
    private static final String METHOD_NAME = "GetByteArray";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://IPAddress/Serviceforc/Service.asmx";
    private String byteStr = "srikar";
    private byte[] bytedata = byteStr.getBytes();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        System.out.println("bytedata is "+bytedata[0]);
        HttpTransportSE httpTransport = null;
        MarshalBase64 marshal = null;
        SoapObject request = null;
        request = new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo pi = new PropertyInfo();       
        pi.setName("value");
        pi.setValue(bytedata);
        pi.setType(MarshalBase64.BYTE_ARRAY_CLASS);
        request.addProperty(pi);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        marshal = new MarshalBase64();
        marshal.register(envelope);
        envelope.setOutputSoapObject(request);

        httpTransport = new HttpTransportSE(URL);

        Object response;
        try {
            httpTransport.call(SOAP_ACTION, envelope);
            response = envelope.getResponse();
        } catch (Exception exception) {
            exception.printStackTrace();
            System.out.println("Exception is " + exception.toString());
            // strRes = exception.toString();
            response = exception.toString();

        }
        System.out.println("Response is "+response.toString());
}
} 
```

# api - 获取用户的 Youtube 订阅者数量

> ID：10859627
> 
> 赞同：0
> 
> 时间：2012-06-02T03:44:38.657
> 
> 标签：api, youtube

我需要获取 Youtube 用户的订阅者数量/列表，是否有任何 API 允许这样做。我试过使用

```
http://gdata.youtube.com/feeds/api/users/[用户名]

```

但这会返回订阅数而不是订阅数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:11:38.240

返回的 xml 中有subscriberCount，它是您频道的实际订阅者数量。

# javascript - 如何从 FQL 查询中获取 src_small url，并在通过 javascript 上传我的 facebook 个人资料后返回 object_id？

> ID：10859629
> 
> 赞同：0
> 
> 时间：2012-06-02T03:45:49.227
> 
> 标签：javascript, facebook, facebook-graph-api

您好我现在已经尝试了几种资源，但似乎无法弄清楚如何在通过 javascript 将图像发布到 facebook 后返回 src_small url。我将 object_id 作为响应，然后我尝试执行 FQL 查询以获取大小 url ......上传功能执行良好，然后 fql 查询不返回任何内容。任何帮助将非常感激。

```
 function uploadphoto() {
var imgURL = "img_URL";

FB.api('me/photos', 'post', {
    url: imgURL, message: 'Pura Vita'
}, function (response) {
    if (!response || response.error) {
        alert(response.error);

    } else {
        alert(response.id);
        getPhotoInfo(response.id); 
    }
}); 
```

}

```
function getPhotoInfo(oid) {
    FB.api(
        {
            method: 'fql.query',
            query: 'Select src_big,src_small from photo where aid in(SELECT aid FROM album WHERE owner = me()) and object_id =' + '"' + oid + '"'
        },
        function (response) {
            alert('Post url: ' + JSON.stringify(response));
        });
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:38:00.130

再过一个小时，我意识到我没有设置正确的权限！

# titanium - Appcelerator 和 CommonJS 模块（缓存和循环引用）

> ID：10859630
> 
> 赞同：4
> 
> 时间：2012-06-02T03:45:57.790
> 
> 标签：titanium, appcelerator, circular-reference, commonjs

事情是这样的：

我正在使用 CommonJS 方法使我的移动（iPhone/Android）应用程序模块化。那里并不奇怪。但是有一件事我就是想不通。

CommonJS 让我可以创建 STATIC 私有变量，这让我可以轻松创建单例。我认为这至少是因为获取`require()`d 的文件的内容只读取一次，然后每次都返回导出对象（仅初始化一次）。

但是当我创建如下所示的循环引用时，每次都会执行包含模块内的代码。

**等等......** 有趣的是，当我写这个问题时，我突然意识到`require()`在下一个开始之前没有一个调用完成（因此下面显示了堆栈溢出）。

关于我是否走上正轨有什么想法吗？这里已经过了凌晨 5 点，所以就我而言，所有的赌注都被取消了：D。

**例子：**

看这段代码，它定义了一个单例：

```
/* Singleton.js */

exports.getSingleton = getSingleton;

function getSingleton(name) {
  if (!instance) {
    instance = new Thing(name);
  }

  return instance;
}

function Thing(name) {
  this.name = name;
}

var instance; 
```

我`require()`这个文件是这样的：

```
var theFirstThing = require('Singleton').getSingleton('first');
Ti.API.info('first: ' + theFirstThing.name)

var possiblyAnotherOtherThing = require('Singleton').getSingleton('second');
Ti.API.info('second: ' + possiblyAnotherOtherThing.name); 
```

输出是：

```
[DEBUG] loading: /path/to/sim/MyApp.app/app.js, resource: app_js
[DEBUG] loading: /path/to/sim/MyApp.app/Singleton.js, resource: Singleton_js
[INFO] first: first
[INFO] second: first 
```

为什么像下面这样的循环引用不起作用？（我自己可能已经对此进行了分析，如果你愿意，可以评论/回答）。

**应用程序.js**

```
require('Banana'); 
```

**菠萝.js**

```
require('Banana'); 
```

**香蕉.js**

```
require('Pineapple'); 
```

因为输出是这样的：

```
[DEBUG] loading: /path/to/simulator/MyApp.app/app.js, resource: app_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Banana.js, resource: Banana_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Pineapple.js, resource: Pineapple_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Banana.js, resource: Banana_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Pineapple.js, resource: Pineapple_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Banana.js, resource: Banana_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Pineapple.js, resource: Pineapple_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Banana.js, resource: Banana_js

/* etcetera (total of 15 times back and forth) */

[DEBUG] loading: /path/to/simulator/MyApp.app/Pineapple.js, resource: Pineapple_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Banana.js, resource: Banana_js
[DEBUG] loading: /path/to/simulator/MyApp.app/Pineapple.js, resource: Pineapple_js
[ERROR] Script Error = Maximum call stack size exceeded. (unknown file) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T11:25:41.327

我也在 Appcelerator Titanium 中使用 CommonJS 模块来构建移动应用程序。我为解决循环依赖问题所做的是：如果 A 和 B 是 2 个循环依赖模块，则在 B 中需要（A），反之亦然*，就在您实际需要使用它之前*。就我而言，仅当单击某个按钮时，我才需要在 B 中使用 A，因此我在按钮的单击事件侦听器中的 B 中放置了 require(A)。希望有帮助。

# git - 混帐添加。-> 新文件仍然“没有什么可提交的”

> ID：10859632
> 
> 赞同：71
> 
> 时间：2012-06-02T03:46:24.007
> 
> 标签：git, add, init

我在 Git 上苦苦挣扎，我似乎无法添加我的文件。我跑来`ls`显示文件在当前目录中，然后运行`git add .`显示`git status`“没有提交”。

```
JJ-Computer:first_app JJ$ git init

Reinitialized existing Git repository in /Users/JJ/rails_projects/first_app/.git/

JJ-Computer:first_app JJ$ ls

Diary.txt README.rdoc config.ru log   tmp
Gemfile   Rakefile  db    public    vendor
Gemfile.lock  app   doc   script
README    config    lib   test

JJ-Computer:first_app JJ$ git add .

JJ-Computer:first_app Jenn$ git status

# On branch master
nothing to commit (working directory clean)

JJ-Computer:first_app JJ$ 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-06-02T03:55:45.033

您的命令看起来正确（我已经这样做了很多次）。

第一次尝试

```
git add --all 
```

然后尝试`git status`。我认为这不会解决它，但接下来值得尝试。

接下来尝试查看你的 .gitignore 文件，如果你有一个（在你做的顶层`git init`）。

```
cat .gitignore 
```

删除那里导致您的文件被忽略的所有列表。例如，是否有一个条目只是`*`？

下次尝试：

```
git add --force 
```

然后尝试`git status`。

如果这些都不起作用，我注意到您的输出显示`git init`“重新初始化”而不是“已初始化”，因此某些事情可能已经搞砸了。如果您刚刚初始化它并且不介意丢失历史记录，请通过删除 .git 目录重新开始：

```
rm -rf .git 
```

然后重新执行上面的相同命令。如果这不起作用，则需要有关您的设置的更多信息。例如，您可能有一个全局 .gitignore 文件：`~/.gitignore_global`需要对其进行编辑（如果您不想要，也可以将其删除）。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2015-09-23T11:03:11.643

由于我多次遇到类似问题，我只想补充一点，您应该仔细检查您是否正在尝试**添加，并且当前位于项目的根文件夹中**。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-03-25T21:29:55.593

万一其他人碰到这个，git不添加目录的另一个原因是该目录中可能有一个`.git`目录。

在这种情况下，git 希望您将其视为[submodule](https://git-scm.com/docs/git-submodule)。否则，只需删除它`.git`（在目录中，而不是根目录中）并重试。

方便的命令：

```
find . -name '.git' -type d 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-16T18:09:08.577

就我而言，我通过存储解决了它，然后立即应用存储：

```
git stash
git stash apply 
```

这个序列将使回购完全像以前一样。在此之后，做的`git add [file]`工作正常。

*（suse linux下使用git版本1.7.12.4）*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-13T00:32:49.033

出于某种原因，当我在 Google Drive File Stream 中的目录中有一段时间的存储库时，Git 对我很有效。昨天，我遇到了同样的问题。`git add .`不会报告任何要提交的内容，但`git add <some explicit filename>`工作没有问题。我将目录移动到我的本地硬盘驱动器（来自 Google Drive File Stream），并`git add .`获取了所有待处理的更改。请注意，当目录仍在 Google Drive File Stream 上时，将目录设置为“离线可用”无效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-21T02:10:23.943

在我的情况下，由于在当前 git 目录中嵌套了一个 git 目录：

```
A1.java
B1.java
.git
someDirectory
  C1.java
  .git 
```

```
cd someDirectoy
rm .git -rf 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-24T10:47:48.940

我刚才也有这种情况。就我而言，这是文件（小写/大写）问题。问题是 - 我`NuGet.config`修改了文件，之后，Visual Studio 出于某种原因重新创建了这个文件，但使用了名称`NuGet.Config`（注意，不是`.config`，但是`.Config`）。

我发现的最简单的解决方法是将这个文件删除（实际上是移动）到另一个位置，并在没有这个文件的情况下提交。`git status`消息是

```
[deleted] NuGet.config
[deleted] NuGet.Config 
```

然后我将我的文件复制回 repo 目录并提交，一切都按原样工作。

长话短说，就我而言，这是文件命名策略冲突。在 Windows 中，文件名中的大写/小写字符无关紧要，但对于源自 UNIX 的`git`命令则可以。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-06-22T12:46:42.980

I had a similar issue and realised that I was doing `git add .` from a subdirectory of main.

Be sure to be at the root of your project or you can use `git add --all` from any subdirectory and it will be ok.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-03T15:38:21.543

补充 quux00 的`.gitignore`答案，我发现由于我的构建管理器（Maven）的临时“构建”目录，我的目录没有被跟踪。Maven`.gitignore`在构建我的程序时添加了“build”，因此我自己的目录（巧合地命名为“build”）没有被跟踪。这是通过重命名我的“构建”目录来解决的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-17T15:52:47.617

我发现发生这种情况的原因完全不同，而且很重要。如果您不在 Windows 中，这可能不会影响您。如果您在未暂存的更改中看到您的文件，那么 .gitignore 永远不会成为您的问题。非常仔细地检查一些东西。您的文件是否处于分阶段和非分阶段更改中？

```
git status
Staged changes
  modified: source/abc.Ui.Tests
  modified: source/def.Ui.Tests/def.UI.Tests.csproj
Unstaged changes
  modified: source/abc.UI.Tests
  modified: source/def.UI.Tests/def.UI.Tests.csproj 
```

看到不同？很难发现。Windows 不关心大小写，但 git bash 关心。

```
git rm -r source/abc.Ui.Tests
git reset source/abc.UI.Tests
git commit -m "Fixing capitalization"
git checkout source/abc.UI.Tests
git status
     working clean tree 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-17T07:44:44.837

一个一个试试`git add <folder_name>`。

如果第一个文件夹已上演。尝试添加下一个文件夹。就我而言，我得到一个文件包含一些问题。

`git add .`如果在某些文件中有问题时直接运行，git 将忽略所有这些。不是专家，但这就是发生在我身上的事情:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-04T14:10:54.547

This seem a little dumb, but may save someone time: **check if the file is already tracked** and has no modifications: `git ls-files --error-unmatch <file>`. This command should not show any errors if the file is tracked.

I just spend a few minutes to figure out this...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-04T18:35:23.827

I had this issue on windows. None of the existing solutions pointed to something wrong on my side at all. I renamed the files, staged, then renamed back to their previous file name, then staged, and all was good.

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2020-01-24T18:49:44.057

我在将新文件添加到现有的初始化 git 文件夹时遇到了类似的问题。`git add <filename>`没用。对我有用的是`git add .`我在 mac 上使用 bash 5 和 git 2.25。我希望这对其他人也有帮助……干杯。

# java - java: '字符串索引超出范围: -1' 使用 indexOf() 异常

> ID：10859633
> 
> 赞同：3
> 
> 时间：2012-06-02T03:46:24.397
> 
> 标签：java, string, indexof, indexoutofboundsexception

奇怪的问题。我运行这个（非常基本的）程序在文件中查找用户名和密码，程序应该将输入的密码与保存的密码进行比较。但是，每次我都会遇到一个奇怪的`String index out of range: -1`例外。我以前遇到过类似的问题，但是这次`indexOf('.')`电话正在返回`-1`；它不喜欢。如果导致错误，为什么要`indexOf()`返回？`-1`这是来源：

```
public String loginToClient() throws FileNotFoundException, IOException {
        //decryptUsers();
        int tries;
        tries = 5;
        while (tries > 0) {
            System.out.println("LOGIN");
            String usnm = c.readLine("Username: ");
            char [] passwd = c.readPassword("Password: ");
            users = new FileInputStream("users.fra");
            DataInputStream dis = new DataInputStream(users);
            BufferedReader br = new BufferedReader(new InputStreamReader(dis));
            String logindat = br.readLine();
            System.out.println(logindat);
            if (logindat.contains(usnm) == null) {
                System.err.println("Username not recognised, please try another or create user.");
                usnm = "INV";
                return usnm;
            }
            else {
                int startUsnm = logindat.indexOf(usnm);
                System.out.println("startUsnm: " + startUsnm);
                String logdat = logindat.substring(startUsnm, logindat.indexOf("."));
                System.out.println("logdat: " + logdat);
                int endUsnm = logdat.indexOf(':'); 
                System.out.println("endUsnm: " + endUsnm);
                int usnmend = endUsnm - 1;
                System.out.println("usnmend: " + usnmend);
                int startPass = endUsnm + 1;
                System.out.println("startPass: " + startPass);
                int endPass = logdat.indexOf('.');
                System.out.println("endPass: " + endPass);
                String Usnm = logdat.substring(0, usnmend);
                System.out.println("Usnm: " + Usnm);
                int passend = endPass - 1;
                System.out.println("passend: " + passend);
                String Pass = logdat.substring(startPass, passend);
                System.out.println("Pass: " + Pass);
                char [] Passwd = Pass.toCharArray();
                if (usnm.equals(Usnm)) {
                    if (Arrays.equals(passwd,Passwd)) {
                        System.out.println ("Logged in. Welcome, " + usnm + ".");
                        String data = "LOGIN: " + usnm;
                        printLog(data);
                        //encryptUsers();
                        return usnm;
                    }
                    else {
                        System.out.println ("Incorrect password, please try again.");
                        String data = "PASWFAIL: " + usnm;
                        printLog(data);
                        tries -= 1;
                    }
                }
                else {
                    System.out.println ("Username not recognised.");
                    printLog("USNAMFAIL");
                    usnm = "INV";
                    return usnm;
                    //encrytUsers();
                }
            }
        }
        //encryptUsers();
        System.exit(2);
        return usnm;
    } 
```

这是一些输入/输出：

```
Startup initiated.
Logfile exists.
Users file exists.
New user? n
ELSE
LOGIN
Username: rik
Password: 
rik:55.
startUsnm: 0
endUsnm: 3
startPass: 4
endPass: -1
Usnm: rik
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -5
    at java.lang.String.substring(String.java:1949)
    at client0_0_2.loginToClient(client0_0_2.java:103)
    at client0_0_2.general(client0_0_2.java:209)
    at client0_0_2.<init>(client0_0_2.java:221)
    at client0_0_2.main(client0_0_2.java:228) 
```

编辑：找到解决方案！

出于某种原因，indexOf() 不想找到一个 '.'- 当用连字符 ('-') 替换时，它看起来完美运行！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:51:17.723

我认为错误在这一行：

```
String Pass = logdat.substring(startPass, passend); 
```

出于某种原因（您必须确定原因），您通过在字符串中`passend`搜索来计算。`.`如果`.`不存在，则`indexOf`返回 -1 作为哨兵。不过，这不是导致异常的行。我认为这是上面的行，因为如果您尝试计算以`passend`when `passend`is -1 结尾的子字符串，则会收到上述错误。

尝试确定为什么您的字符串不包含 a `.`。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:53:08.550

`indexOf()`返回时`-1`，表示在字符串中找不到该值。因此，在这种情况下，您正在搜索字符串`'.'`中不存在的字符串。

我建议您*始终*检查`indexOf()`通话后的值，并`-1`正确处理。`0`在许多情况下，将其设置为or可能就足够了`string.length()`，这取决于您稍后在代码中将如何使用它。

无论如何，如果您希望 a`'.'`存在而实际上不存在，则需要通过代码进行调试以找出值是什么以及`'.'`缺少的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T03:53:56.567

`indexOf()``-1`如果找不到指定的字符串，则返回 。

问题出在行中：

```
String Pass = logdat.substring(startPass, passend); 
```

因为负指数。

# html - 在最后一项之后停止导航栏

> ID：10859634
> 
> 赞同：-1
> 
> 时间：2012-06-02T03:46:26.980
> 
> 标签：html, css

我试图让我的导航栏在第 6 项之后停止。

我想删除垂直分割线和它之后的暗区。然后我希望第 6 项在其末尾有圆角 - 与第 1 项开始的方式相同。

[http://jsfiddle.net/Abijah/6ykVS/](http://jsfiddle.net/Abijah/6ykVS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:09:07.253

我认为您希望您的导航看起来像 Apple 的菜单栏。因此，对您的 CSS 进行了更改并添加了一些内容。请看一看。我想你喜欢这样。

**这是小提琴：http:** [//jsfiddle.net/6ykVS/7/](http://jsfiddle.net/6ykVS/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T06:06:31.643

```
#nav { width: auto; } /* this may reduce the extra space after the menu */

#nav li:last-child {  } /* this helps to write css for last li element */ 
```

# android - 如何为 QuickContactBadge 创建可点击标签

> ID：10859635
> 
> 赞同：1
> 
> 时间：2012-06-02T03:46:39.053
> 
> 标签：android, onclick, eventtrigger, quickcontactbadge

我有一个使用`QuickContactBadge`s 显示联系人照片和弹出操作窗格的应用程序。

在我的布局中，我还有一个显示联系人姓名的`TextView`下方。`QuickContactBadge`

现在，当您单击/触摸联系人的照片（右侧`QuickContactBadge`）时，您只会获得实际的快速操作窗格。当您单击显示名称时，我希望*它也显示操作窗格。*`TextView`

有什么方法可以捕获 TextView 的单击事件并使用它来触发 QuickContactBadge 的单击，从而显示操作窗格？

我不确定它是否真的适用于这个问题，但这是我的布局的 XML。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top|center_horizontal"
    android:orientation="vertical" >

    <QuickContactBadge
        android:id="@+id/ContactBadge"
        android:layout_width="48dp"
        android:layout_height="48dp" >
    </QuickContactBadge>

    <TextView
        android:id="@+id/ContactName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:ellipsize="end"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:freezesText="true"
        android:gravity="top|center_horizontal"
        android:lines="2"
        android:text="@string/val_DefaultString" >
    </TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:21:52.887

When binding the TextView, I did the following:

```
TextView tv = (TextView) v.findViewById(R.id.ContactName);
tv.setText(cnm);
tv.setOnClickListener(this); 
```

My activity then implements `OnClickListener`. Then in the OnClick overrides, do the following:

```
@Override
public void onClick(View v) {
    switch(v.getId()) {
        case R.id.ContactName:
            TextView tv = (TextView) v;
            LinearLayout ll = (LinearLayout) tv.getParent();
            QuickContactBadge qb = (QuickContactBadge) ll.findViewById(R.id.ContactBadge);
            qb.performClick();

            break;
    }
} 
```

The key here is the line: `qb.performClick();`.

# .net - VB.NET System.IO 备份操作员

> ID：10859641
> 
> 赞同：0
> 
> 时间：2012-06-02T03:48:17.463
> 
> 标签：.net

我需要对许多不同的文件执行某些文件操作。问题是有时访问被阻止。在 robocopy 中，我们可以通过将其置于备份操作员模式来解决这些问题（只要您运行它的帐户是管理员或备份操作员）。

有没有办法从 VB.Net 访问这种模式？

# graph - 从强连通图中删除边

> ID：10859644
> 
> 赞同：2
> 
> 时间：2012-06-02T03:48:55.857
> 
> 标签：graph, edges

这个问题有名字吗？

给定一个具有边权重的有向且强连接图，找到最小成本的边集，以便删除该边集会导致图不再是强连接的。

有人知道/有解决方案的想法吗？我正在考虑将此设置为网络流量问题，但我不确定如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:11:49.517

最接近的主题名为“渗透问题”。您正在描述“渗透阈值”和“渗透图中的路径”的一个方面。关于它有一个完整的理论。现在你有一个谷歌的关键字。

有趣的是，您的搜索是由一些实用模型引起的，而不是图、路径和分形的理论。

# php - 使用 PDO 在非对象上调用成员函数 prepare()

> ID：10859646
> 
> 赞同：1
> 
> 时间：2012-06-02T03:49:18.140
> 
> 标签：php

我有一个使用的功能：

```
require_once("connect.php");

function get_username($uid){
  $stmt = $pdo->prepare("SELECT username FROM users WHERE uid= ?");

try {
    $stmt->execute(array($uid));
} catch (PDOException $e) {
    echo $e -> getMessage(); exit;
}

      $row = $stmt->fetch();
      return($row['username']);
}

$id = 1;
echo get_username($id); 
```

但它说：

```
Call to a member function prepare() on a non-object 
```

我有点困惑这意味着我错了，我想知道是不是因为我在函数中使用它？

编辑：

我的连接脚本¬

```
$dsn = 'mysql:dbname=test_db;host=127.0.0.1';
$user = 'test_user';
$password = 'test_pass';

try {
    $pdo = new PDO($dsn, $user, $password);

} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
    exit;
}

$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 

error_reporting(E_ALL);
session_start(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T03:51:51.547

是的，这是因为您在函数中使用它。`$pdo`是在全局范围内，而不是在函数的范围内。

您要么需要`$pdo`通过在函数中将其作为全局变量引用来访问全局：

```
function get_username($uid){
  global $pdo;
  $stmt = $pdo->prepare("SELECT username FROM users WHERE uid= ?"); 
```

`$pdo`或者在调用函数时传入

```
function get_username($uid, $pdo){

...
...
}

get_username( $id, $pdo); 
```

# vb.net - 为什么要创建记录集对象的实例？

> ID：10859647
> 
> 赞同：0
> 
> 时间：2012-06-02T03:49:46.837
> 
> 标签：vb.net, object, recordset

在这段代码中，作者引用了一个记录集对象，我只是想确保在继续之前了解原因。

```
Private Sub LoadDataBound()
  Set rs = GetData
If Not rs.EOF Then
    Set dgPend.DataSource = rs '     Bind the Datagrid to the recordset
    dgPend.Refresh
    dgPend.AllowUpdate = True
Else
    MsgBox "No Records Found in DataGrid!"
End If

'Call Bind_Contols
'Call End_Time
End Sub

Private Function GetData() As ADODB.Recordset
sWhichDataType = UCase(Trim(sWhichDataType))

Select Case sWhichDataType
Case "ADS"
    sSource = "\\development\brakechecktables\speedwrench.add"
    Set GetData = OpenADS
Case "SQL"
    sSource = "development"
    Set GetData = OpenSQL
Case "FOX"
    sSource = "E:\Yes30\Data\speedwrench\"
    Set GetData = OpenFOX
Case Else
    MsgBox "Invalid DataSet Selected"
End Select
End Function 
```

在 LoadDataBound 中，它说 set rs = GetData()。这调用了下面的函数，但是为什么需要将它设置为 rs 记录集的对象。在这里纠正我，因为我很可能是错的，但它是否需要这样做，以便您能够从记录集中创建一个函数，而不必为两者（记录集和函数）使用相同的名称？或者这里是否有另一个我不知道的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:44:45.590

我很乐意帮助您理解代码，但我真的很难理解您的问题以及您的困惑是什么。您似乎对变量、对象和方法（函数和子例程）的含义、区别和用途感到困惑。代码相当简单易懂，所以我猜你的问题是你是编程新手。代码看起来写得不是很好，这可能是您困惑的一部分。看起来封装得不是很好，但也不是完全糟糕。我当然见过更糟糕的情况。

所以，假设我的假设是正确的，让我从解释变量、对象和方法开始，然后我将简要解释代码在做什么。如果这不能回答您的问题，请澄清。

## 变量

变量是最简单的概念。它是对存储在内存中的值的命名引用。在代码中，`rs`是一个变量。每个变量都有一个类型，因此只能将它们设置为与该类型兼容的值。您没有显示`rs`声明变量的代码，所以我只是假设它被声明为 的类型`ADODB.Recordset`，例如：

```
Private rs As ADODB.Recordset 
```

## 对象

另一方面，一个对象是微妙的不同。对象是类型的一个实例。 `RecordSet`是一种对象，但它本身不是对象。可能创建了许多相同类型的对象。每个对象通常独立于同一类型的所有其他对象（尽管在某些情况下它们可以共享数据）。变量引用的值始终是某种类型的对象。许多变量可以引用同一个对象，但每个对象至少被一个变量引用。如果一个对象不再被任何变量引用，它可能会在内存中存在一段时间，但最终会被垃圾收集器销毁。变量不必引用任何对象。它可以改为引用`Nothing`. 例如：

```
rs = New ADODB.RecordSet()  'rs now references a RecordSet object
rs = Nothing  'rs now references no object at all 
```

`New`运算符是创建新对象的对象。对象没有名称（除非它们以某种方式自己实现），因此即使调用了上述变量`rs`，这也不是对象的名称。例如，我可以这样做：

```
rs = New ADODB.RecordSet()
temp = rs 
```

在这个例子中，`temp`现在`rs`两者都引用了同一个对象，并且在一个对象中所做的更改将自动反映在另一个对象中。因此，rs 和 temp 不是对象本身的名称。它们只是引用它的变量的名称。

## 方法

方法是一组逻辑代码，希望是封装的代码，它被分配了一个名称，并且可以使用该名称随时调用。方法可以选择采用参数列表，并且可以选择返回单个值。在VB中，如果方法返回一个值，它被称为a `Function`，如果它不返回一个值，它被称为`Sub`例程。

## 值类型与引用类型

我不会详述它，因为我不想让你感到困惑，但到目前为止我所说的一切都适用于引用类型，但不适用于值类型。基本上，引用类型通常是更复杂的对象类型，它们存储更多数据并且通常是可变的。值类型通常更简单、更小且不可变。两个变量可以引用同一个引用类型对象，但不能对值类型对象（如 Integer）这样做。

## 您的代码说明

您的代码包含一个名为`GetData`. 将其作为一种方法的原因可能是双重的。首先，作者可能将其作为方法制作，因为他打算从代码中的多个位置调用它。在这种情况下，创建一个可以完成工作的方法总是一个好主意，这样您就不会在多个地方复制相同的代码。其次，作者可能只是想让它成为一种使代码更易于阅读的方法。与其将所有代码直接放入方法中并需要在代码中添加注释说明该部分代码正在获取数据，不如将其`LoadDataBound`分解为一个名为 GetData 的单独方法更容易阅读，然后它就是 self-记录。

该`GetData`方法不接受任何参数并返回一个新`ADBDB.RecordSet`对象。在`GetData`方法内部，它调用 OpenADS、OpenSQL 或 OpenFOX，正是这些方法必须创建新的 RecordSet 对象并用数据库中的值填充它。

该`LoadDataBound`方法从数据库中获取数据，然后使用数据绑定在表单上加载带有该数据的控件。它做的第一件事是调用`GetData`创建一个新 RecordSet 对象的方法，用数据填充它，然后将该新对象返回给该`LoadDataBound`方法。该`LoadDataBound`方法将`rs`变量设置为引用由 返回的新 RecordSet 对象`GetData`。

然后该`LoadDataBound`方法检查返回的 RecordSet 对象是否`GetData`包含任何数据。如果是，则将该数据加载到控件中，否则将显示一个消息框。

# css - 集中背景图像

> ID：10859660
> 
> 赞同：0
> 
> 时间：2012-06-02T03:53:22.090
> 
> 标签：css

我可以使用以下代码将 x1600 宽度的背景图像放在不同的屏幕分辨率中：) 它可以完美地工作，因为它集中在较小的分辨率中。

```
body {
    padding: 0;
    margin: 0;
        background: #f8f7e5 url(images/header-top.jpg) no-repeat center top;    
    color: #333333;
}
#content {

    width: 860px;
    margin: 238px auto 0;
    background: #fff;
    border: solid 1px #ccc;
    padding: 20px;
}
<body>

<div id="content">
    <p>details</p>
</div> 
```

但是，在那个大背景图像中，我需要添加在将鼠标悬停在菜单上时更改菜单颜色的效果。有了它，我将背景图像裁剪成 3 行（标题、菜单、底部）。在菜单部分下，我垂直裁剪了每个菜单并复制了不同颜色的菜单。然后我将所有裁剪的图像组合回背景图像。

菜单上的悬停效果完美，但背景图像不再以较小的分辨率对齐中心。它改为向右对齐:(

以前，如果我将背景图片放入 CSS 中的 BODY 中，它可以正常工作。但是，图片被裁剪后，我不再能够将它们放入 BODY 中。

这是我的代码

```
<div class="menu_image"><img src="images/backgrounds/header-background1.jpg" border="0" /></div>     
    <div style="line-height: 0px; width:1600px">
          <div class="menu_image"><img src="images/backgrounds/header-menu1.jpg" /></div>
          <a class="menuhover" href="index.php"/>
          <a class="menuhover2" target="blank" href="http"></a>
          <a class="menuhover3" href="about-us.php"></a>
          <a class="menuhover4" href="portfolio.php"></a>
          <a class="menuhover5" href="contact-us.php"></a>
          <div class="menu_image"><img src="images/backgrounds/header-menu7.jpg" /></div>
    </div>    
     <div class="menu_image"><img src="images/backgrounds/header-background3.jpg" /></div> 
```

如何以任何屏幕分辨率将上面的背景图像居中对齐？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:14:08.013

为什么您不能为页面和菜单创建纯色背景（BG）图像，为菜单块使用额外的背景图像，它将显示在大纯色图像的顶部并显示您的悬停效果？

添加：

您只能将悬停背景图像用于菜单背景更改。所以你不需要从主BG中排除菜单区域的背景。

`OnMouseOver`- 加载菜单背景，覆盖菜单区域的默认背景。

`OnMouseOut`-`none`用于菜单背景，因此您可以看到默认页面 BG。

# android - Android：更新/刷新正在运行的服务

> ID：10859662
> 
> 赞同：1
> 
> 时间：2012-06-02T03:53:42.423
> 
> 标签：android, multithreading, service, android-intent, timer

我想更新我正在运行的服务，例如，当一周中的当前日期是“星期一”时，它会在某个时间通知它是“星期一”，而当它是“星期二”时，它会发出通知它是“星期二”等等......问题是，如何让我的运行服务被刷新或更新，以便它可以每天从日历接收更新的日期？我应该使用什么？TimerTask 包（如何）？，或者做一个线程还是什么？如果有解决此类问题的示例或逻辑代码，请在此处发布它会很棒...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T04:40:17.847

将一个添加`Broadcast receiver`到您的服务，使用`AlarmManager`星期一的特定时间设置闹钟，这样当闹钟响起时，它会启动您的服务的广播接收器，并且在接收器内部您可以设置第二天的闹钟。

要将广播接收器添加到服务，请参阅 [此](https://stackoverflow.com/questions/9092134/broadcast-receiver-within-a-service)

# python - GAE：使用延迟库时收到错误电子邮件

> ID：10859664
> 
> 赞同：0
> 
> 时间：2012-06-02T03:54:44.450
> 
> 标签：python, google-app-engine, exception, task-queue

我已经设置了我的 Python GAE 应用程序，以便在请求处理程序引发异常时收到一封电子邮件。为此，我只是子类化`webapp2.RequestHandler`并覆盖[`handle_exception`](https://developers.google.com/appengine/docs/python/tools/webapp/requesthandlerclass#RequestHandler_handle_exception)，以向我发送一封包含相关详细信息的电子邮件。

当任务队列中的任务引发异常时，是否可以收到电子邮件？

编辑：添加更多细节，因为我最初的问题不清楚。:)

我使用以下代码向自己发送一封请求处理程序异常的电子邮件：

```
class MyRequestHandler(webapp2.RequestHandler):
    def handle_exception(self, exception, debug_mode):
        ...
        mail.send_mail_to_admins(sender="me@example.com", ...)
        ... 
```

通过这种方式，我会收到一封请求处理程序引发的任何异常的电子邮件。

[当我使用deferred library](https://developers.google.com/appengine/articles/deferred)提交任务时，我还想收到有关异常情况的电子邮件。在这种情况下，我认为我不能使用自定义请求处理程序。我想我可以在我的所有调用中放置一个包装函数`deferred.defer()`：

```
def my_deferred(...):
    try:
        deferred.defer(...)
    except Exception, msg:
        mail.send_mail_to_admins(sender="me@example.com", ...) 
```

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:52:52.260

任务队列请求的处理方式与常规请求完全相同，因此您应该能够使用相同的方法。（当然，当任务队列无法将请求提交给您的处理程序时，这并不适用。但这应该很少见。而且我无法从您的问题中看出您在日志中看到的错误类型“我想收到关于的电子邮件。更详细的问题得到更好的答案。:-)

# ruby-on-rails - Webrick 作为生产服务器与瘦或独角兽？

> ID：10859671
> 
> 赞同：119
> 
> 时间：2012-06-02T03:55:48.507
> 
> 标签：ruby-on-rails, production-environment, thin, webrick, unicorn

似乎认为您不能将 Webrick 用作生产服务器是理所当然的，但我真的找不到任何地方提到原因。共识似乎是：“Webrick 适合开发，但 Thin 或 Unicorn 是生产的选择，时期。”

我确实查看了瘦服务器的主页，它谈到了请求/秒，但我不太了解图表，因为没有注释。

谁能告诉我为什么我应该使用 Thin 或 Unicorn 与 Webrick 相比？使用 Webrick 进行开发还有什么好处吗？我一直在使用 Webrick，因为它带有 Rails，我认为应该有它默认的原因。

顺便说一句，我正在使用 Heroku。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-02T04:01:58.230

几个重要的原因

1.  它是用 Ruby 编写的（参见[http://github.com/ruby/ruby/tree/trunk/lib/webrick](http://github.com/ruby/ruby/tree/trunk/lib/webrick)）
2.  **编辑**它没有生产网站通常需要的许多功能，例如多个工作人员（特别是预分叉、生命周期管理、异步处理等）、重定向、重写等

当我提到重定向/重写时，我指的是使用 Webrick，您必须在不同的层（Rack、Sinatra、Rails、自定义 Webrick 代码等）处理重写。这需要您启动额外的红宝石“处理程序”来执行您的重写代码。对于低流量站点，这可能没问题，因为您可能已经预热过的进程什么都不做。但是，对于更高流量的站点，这是前端服务器（Apache、Nginx 等）无需启动 Ruby* 即可处理的服务器上的额外负载，并且可能会更快几个数量级。

**例如，如果您在负载均衡器后面运行，您可以将所有重写流量路由到未安装 ruby​​ 的服务器，并让您的主服务器只管理主要流量。这种重写流量可能是由于 SEO 的站点更改或类似原因。另一种情况是一个有多个组件的站点，可能一个部分是 Rails，另一个是 PHP，两者都需要重写（即重写旧的 PHP 路径到 Rails）*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-29T21:17:58.847

WEBrick 也无法处理更长的 URI，如果它们超过 2083 个字符，您将看到崩溃。Thin 没有这些问题，这使得它更加出色 - 已经在开发中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-06T00:32:14.797

我真的不喜欢把简单的事情复杂化和过早的优化。WEBrick 可以在**生产**中使用，前提是它是一个低流量的网站。大多数应用程序都是。

如果您的站点做一些需要时间的事情，例如发送电子邮件或生成 PDF 文件，[您应该使 WEBrick 多线程](https://stackoverflow.com/a/20940926/504845)。您想一次处理多个请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T04:05:09.100

它过去曾出现过一些安全问题，但似乎主要原因是与用于生产的服务器相比，它的速度确实很慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-07T01:26:03.230

webrick 在生产模式下运行时最大的弱点是它是单线程、单进程的 Web 服务器，这意味着它一次只能服务一个 http 请求。

# iphone - 核心数据持久性，未解决的错误

> ID：10859676
> 
> 赞同：0
> 
> 时间：2012-06-02T03:58:07.390
> 
> 标签：iphone, ios, core-data, persistence

使用书籍教程，其他 3 种持久性方法完美地工作。运行模拟器时收到此消息：

> 2012-06-01 23:50:52.555 核心数据持久性 [9022:fb03] 未解决的错误错误域 = NSCocoaErrorDomain 代码 = 134100“操作无法完成。（可可错误 134100。）”用户信息 = 0x6b92af0 {元数据 = { type = immutable dict, count = 7, entries => 2 : {contents = "NSStoreModelVersionIdentifiers"} = {type = immutable, count = 1, values = ( 0 : {contents = ""} )} 4 : {contents = " NSPersistenceFrameworkVersion"} = {value = +386, type = kCFNumberSInt64Type} 6 : {contents = "NSStoreModelVersionHashes"} = {type = immutable dict, count = 1, entries => 1: {contents = "Line"} = {length = 32，容量 = 32，字节 = 0x03913bef8e6d277b9119a99fbc7b4adc ... 39db5d5f94ed5507} } 7：{contents = "NSStoreUUID"} = {contents = "FE367DDA-4009-4CD1-9B8A-D62943668E8E"} 8: {contents = "NSStoreType"} = {contents = "SQLite"} 9: {contents = "_NSAutoVacuumLevel"} = {contents = "2"} 10: {contents = "NSStoreModelVersionHashesVersion"} = {value = +3, type = kCFNumberSInt32Type} } , reason=打开商店的模型与创建商店的模型不兼容}, { metadata = { NSPersistenceFrameworkVersion = 386; NSStoreModelVersionHashes = { Line = <03913bef 8e6d277b 9119a99f bc7b4adc 4fec730a 73b61247 39db5d5f 94ed5507>;};NSStoreModelVersionHashesVersion = 3;NSStoreModelVersionIdentifiers = ("");NSStoreType = SQLite;NSStoreUUID = "FE367DDA-4009-4CD1-9B8A-D62943668E8E"; "_NSAutoVacuumLevel" = 2; }; reason = "开店的型号和开店的型号不兼容"; }

我的两个实体都设置正确，这是我的文件：

```
#import "BIDViewController.h"
#import "BIDAppDelegate.h"

@interface BIDViewController ()

@end

@implementation BIDViewController
@synthesize line1;
@synthesize line2;
@synthesize line3;
@synthesize line4;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    BIDAppDelegate *appDelegate = 
    [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSEntityDescription *entityDescription = [NSEntityDescription
                                              entityForName:@"Line"
                                              inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDescription];

    NSError *error;
    NSArray *objects = [context executeFetchRequest:request error:&error];
    if (objects == nil) {
        NSLog(@"There was an error!");
        // Do whatever error handling is appropriate
    }

    for (NSManagedObject *oneObject in objects) {
        NSNumber *lineNum = [oneObject valueForKey:@"lineNum"];
        NSString *lineText = [oneObject valueForKey:@"lineText"];

        NSString *fieldName = [NSString
                               stringWithFormat:@"line%d", [lineNum integerValue]];
        UITextField *theField = [self valueForKey:fieldName];
        theField.text = lineText;
    }

UIApplication *app = [UIApplication sharedApplication];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(applicationWillResignActive:) 
                                             name:UIApplicationWillResignActiveNotification
                                           object:app];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.line1 = nil;
    self.line2 = nil;
    self.line3 = nil;
    self.line4 = nil;

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(void)applicationWillResignActive:(NSNotification *) notification {
    BIDAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSError *error;
    for (int i = 1; i <=4; i++) {
        NSString *fieldName = [NSString stringWithFormat:@"line%d", i];
        UITextField *theField = [self valueForKey:fieldName];

        NSFetchRequest *request = [[NSFetchRequest alloc] init];

        NSEntityDescription *entityDescription = [NSEntityDescription
                                                  entityForName:@"Line"
                                                  inManagedObjectContext:context];
        [request setEntity:entityDescription];
        NSPredicate *pred = [NSPredicate
                             predicateWithFormat:@"(lineNum = %d)", i];
        [request setPredicate:pred];

        NSManagedObject *theLine = nil;

        NSArray *objects = [context executeFetchRequest:request
                                                  error:&error];

        if (objects == nil) {
            NSLog(@"There was an error!");
            // Do whatever error handling is appropriate
        }

        if ([objects count] > 0)
            theLine = [objects objectAtIndex:0];
        else 
            theLine = [NSEntityDescription
                       insertNewObjectForEntityForName:@"Line"
                       inManagedObjectContext:context];

        [theLine setValue:[NSNumber numberWithInt:i] forKey:@"lineNum"];
        [theLine setValue:theField.text forKey:@"lineText"];
    }
    [context save:&error];
}

@end 
```

任何想法或意见表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T04:05:32.750

猜猜你在模拟器中最初安装你的应用程序后改变了你的核心数据模型。

`reason=The model used to open the store is incompatible with the one used to create the store`

您是否尝试删除并重新安装该应用程序？

# android - 从 Android 设备捕获应用程序的视频并上传

> ID：10859678
> 
> 赞同：0
> 
> 时间：2012-06-02T03:58:45.323
> 
> 标签：android, ruby-on-rails-3

我的 Rails 移动应用程序需要从 android 捕获视频并上传到应用程序。如何进行此功能。请对此提供帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T04:58:25.497

从这个链接了解相机代码 [http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html) 这有 cam corder 示例的源代码 [http://itp.nyu.edu/~sve204/mobilemedia_spring10/ Camcorder.zip](http://itp.nyu.edu/~sve204/mobilemedia_spring10/Camcorder.zip) ，您可以使用 php 上传视频文件 [代码将视频从 Android 上传到 PHP](https://stackoverflow.com/questions/4944650/code-to-upload-video-from-android-to-php) [http://www.rubyinside.com/ruby-video-library-1259.html](http://www.rubyinside.com/ruby-video-library-1259.html)

# javascript - 函数中的 JavaScript 'this' 在 Node 中代表什么？

> ID：10859679
> 
> 赞同：1
> 
> 时间：2012-06-02T03:58:49.590
> 
> 标签：javascript, node.js

我在下面有这段代码：

```
this.color = "red";
var o = {color: "blue"};
function sayColor() {
  console.log(this.color);
}
sayColor();
sayColor.call(this);
sayColor.call(o); 
```

@吉姆·德维尔，

以下是新发现：

1.  当我在浏览器中运行该代码片段时：它连续输出**"red, red, blue" 。**
2.  当我直接在节点终端中运行它时：它还会连续输出**"red, red, blue" 。**
3.  但是当我将该代码保存为文件 functionTypeThisExample.js 并`node functionTypeThisExample.js`在终端中执行时，它会输出**"undefined, red, blue"**。

所以我的问题是在最后一种情况下会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T04:07:58.020

`this``this`在节点中与在 JS中没有什么不同。它是表示当前上下文的对象。

`this.color = "red";`

在这里，这是全局对象

```
var o = {color: "blue"};
function sayColor() {
  console.log(this.color);
}

sayColor(); 
```

在这种情况下，这仍然是全局对象

`sayColor.call(this);`

这是全局对象，但通过调用应用，而不是“默认”

`sayColor.call(o);`

这是`o`

但是，当我在节点（OS X 上为 0.6.18）中运行它时，我会像在浏览器中一样得到“红、红、蓝”。

# django - 如何获取查询集以在 Django 中返回多个模型？

> ID：10859682
> 
> 赞同：2
> 
> 时间：2012-06-02T03:59:58.253
> 
> 标签：django, orm, django-models

我正在构建一个带有基本块模型的块系统，每种类型的块都有一个单独的子类，如下所示：

```
class BlockType(models.Model):
    ''' Defines properties of a block '''
    title = models.CharField(max_length=50)
    class_name = models.CharField(max_length=50)

class Block(models.Model):  
    ''' Implementation of the block '''
    product = models.ForeignKey('product.Product', related_name='blocks')
    block_type = models.ForeignKey('product.BlockType', related_name='used_blocks')
    order = models.IntegerField(default=0)

class ImageBlock(Block):
    ''' An image block '''
    image = models.CharField(max_length=255)

class TextBlock(Block):
    ''' A text block '''
    text = models.TextField() 
```

我想做的是：

```
b = product.blocks.all() 
```

而不是这是一个 Block 对象的列表。作为相关子类的列表。

因此，如果一个产品有一个 TextBlock 和 2 个 ImageBlocks。以上将返回一个 TextBlock 对象和 2 个 ImageBlocks 而不是 3 个 Block 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:21:45.583

恐怕你不能那样做。但问题是：你为什么要这样做？

在继续之前，我还有一个问题：您是否知道按照您的方式对这些“块”建模，您会在数据库中获得 3 个不同的表（4 个带有“BlockType”表）？那是你要的吗？

我不知道你打算如何处理这些模型以及你想如何使用它们，所以我会给你一些我认为对你有很大帮助的链接。如果您愿意，您可以向我们提供更多信息，了解您将如何处理这些模型，以及为什么您希望拥有一个包含两个不同模型的查询集，以便我们真正为您提供帮助。

这可以帮助你：[https ://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)

或者这个：[https ://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)

希望能帮助到你！如果不是，请添加更多信息以帮助我们了解您的问题并尝试给您答案

# c# - 套接字通信失败

> ID：10859683
> 
> 赞同：1
> 
> 时间：2012-06-02T04:00:01.257
> 
> 标签：c#, .net, sockets

我有一个客户端，它给了我一个非 ssl url:port 来将信息（包含 xml 数据的字符串）发送到他们的服务器。我已经习惯了 Putty（在 telnet 模式下）与服务器成功通信，并收到回复，但是当我使用以下代码时，没有进行通信

```
outputmsg = string.Empty;
                var m_socListener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
                IPHostEntry ipAddress = Dns.GetHostEntry("testurlhere");
                var ip = new IPEndPoint(ipAddress.AddressList[0], 10121);
                m_socListener.Connect(ip);

                byte[] tosend = GetBytes(inputmsg);
                byte[] buffer = new byte[1024];
                m_socListener.Send(tosend); // doesnt sends data and returns immediately
                m_socListener.Receive(buffer); // waits forever
                m_socListener.Close();

 static byte[] GetBytes(string str)
        {
            byte[] bytes = new byte[str.Length * sizeof(char)];
            System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
            return bytes;
        }

    static string GetString(byte[] bytes)
    {
        char[] chars = new char[bytes.Length / sizeof(char)];
        System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
        return new string(chars);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:26:42.143

我认为这里的解决方案可能是 SetSockOpt NoDelay：

[http://msdn.microsoft.com/en-us/library/e160993d.aspx](http://msdn.microsoft.com/en-us/library/e160993d.aspx)

我也支持 m0s 的最优秀建议，尝试使用 WireShark。如果您还不熟悉它 - 保证满意！

但听起来 NoDelay（禁用 Nagle）可能会解决问题。此链接可能有助于澄清：

[http://en.wikipedia.org/wiki/Nagle%27s_algorithm](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:18:53.073

解决方案是在我的情况下使用正确的编码，它是 ASCII 并将 \n 附加到消息中，如 paulsm4 所说。

# php - 使用 Phonegap 检索数据库数据

> ID：10859684
> 
> 赞同：0
> 
> 时间：2012-06-02T04:01:42.170
> 
> 标签：php, javascript, sql, cordova, file-transfer

我有一个 Phonegap 应用程序，并且我已经设置了它，以便用户可以使用 API 中的 FileTransfer 对象将信息上传到我的 Web 服务器。但是，我怎样才能检索到这些信息呢？我想对我的 SQL 数据库使用 PHP 命令，但我认为 Phonegap 不支持 PHP。

我是否需要在我的网站上有一个网页来处理此数据传输，然后将信息从数据库中输出到我的应用程序？

我正在使用 Android 和 Phonegap 一起开发它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:39:39.453

是的，您需要在您的服务器上运行一个 Web 应用程序，该应用程序提供一个 API，您的 phonegap 应用程序将访问该 API 以获取数据。

在服务器上用 php 创建一个网页，该网页使用 GET 或 POST 方法获取所需的输入，并在 phonegap 应用程序中打印您需要的结果...

从 phonegap 应用程序使用带有所需参数的 ajax 调用 api，它将返回您需要的数据...

来自 webapp 的响应可以是 json 或 xml 格式，人们更喜欢 json..

你可以在互联网上找到足够的教程来帮助..

# ios - UIImageView 在 UITableViewCell 中不可见

> ID：10859685
> 
> 赞同：2
> 
> 时间：2012-06-02T04:01:45.887
> 
> 标签：ios, uitableview, uiimageview

我在 UITableView 单元格中添加了一个 UIImageView，但它不可见。但是当你选择了行时，图像是可见的，它是如此的不解。你能帮助我吗 ？

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier: (NSString *) reuseIdentifier    
{  
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        cellImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"one.png"]];       
        cellImage.frame = CGRectMake(240, 0, 20, 20);
        [self.contentView addSubview:cellImage];
        self.textLabel.text = @"parent";
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:19:50.070

您应该只添加`cellImage`为**`accessoryView`**.

```
[cell setAccessoryView: cellImage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:03:35.763

你应该首先初始化你的 imageView 并设置它的 Frame 然后你应该设置它的 image.See the given code for the CustomtableViewCell

```
imgView = [[UIImageView alloc] initWithFrame:CGRectMake(3, 3, 80, 80)];
imgView.contentMode = UIViewContentModeScaleAspectFit;
[self.contentView addSubview:imgView]; 
```

现在在控制器的 tableViewCellforrowatindexpath 方法中使用给定的代码

```
static NSString *CellIdentifier = @"Cell";

CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
cell.imgView.image = [UIImage imageNamed:@"123.jpg"]; 
```

这将在你的 imgView 添加图像

# php - 在 jQuery 中使用 php 中的数组

> ID：10859691
> 
> 赞同：0
> 
> 时间：2012-06-02T04:03:51.037
> 
> 标签：php, jquery, arrays

我正在尝试操作从 PHP 文件调用的数组。它发送

```
[{
    "description": "Intel H67 Socket 1155 Motherboard",
    "price": "144.99"},
{
    "description": "Thermaltake WO319RU 850 Watt PSU Modular",
    "price": "169.99"},
{
    "description": "LG GH24NS70 SATA DVD Burner",
    "price": "39.99"},
{
    "description": "eVGA GTX 480 1536MB GDDR5",
    "price": "299.99"}] 
```

这是我的 jQuery

```
$(document).ready(function() {
function get() {
  var postdata = $('#scu').val();
    $.post('data.php', {scu:postdata}, function(output) {
        $('#output').append(output);
    });
  }
$('#scu').keyup(get);
});
//#scu is a textbox
//#output is an empty div 
```

如果我这样称呼它，它会显示整个数组；如果我这样称呼它，`output[0]`我会得到`[;`如果我像这样称呼它，我会`output[0].pric`得到一个`unknown' error.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:10:54.520

```
$.post('data.php', {scu:postdata}, function(output) {
      // looping over output
      $.each(output, function(index, obj) {
        // obj contains each object eg.
        //  {
        //    "description": "Intel H67 Socket 1155 Motherboard",
        //    "price": "144.99"
        //  }

        console.log(obj.description);
        console.log(obj.price);
        // to append to textbox do something like this
        $('#scu').append(obj.description); // and so on
     });
}, 'json'); // you need to put dataType here as json, as output is json
            // you don't need $.parseJSON, because dataType json will
            // parse it for you 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:12:28.700

```
$(document).ready(function() {
function get() {
  var postdata = $('#scu').val();
    $.post('data.php', {scu:postdata}, function(output) {
        var objects = jQuery.parseJSON(output); // obj will contain the array of objects you need
        alert(objects[0].price);
        $('#output').append(output);
    });
  }
$('#scu').keyup(get);
}); 
```

# jquery - HTML5 Canvas 绘图拖放

> ID：10859694
> 
> 赞同：1
> 
> 时间：2012-06-02T04:04:43.500
> 
> 标签：jquery, html, css, drag-and-drop

我有 HTML 5 圆形绘图的示例，如下所示

[http://i.stack.imgur.com/SVPO9.jpg](http://i.stack.imgur.com/SVPO9.jpg)

这是为此的绘图脚本（HTML5 和 jQuery）

[http://jsfiddle.net/eGjak/275/](http://jsfiddle.net/eGjak/275/)

```
$.each(circles, function() {
   drawCircle(this);
   drawLine(mainCircle, this);
}); 
```

我需要将此升级为拖放（用户可以用线将子圈拖到主圈周围）

如何使用 html5、css3、jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T23:22:24.623

[http://jsfiddle.net/eGjak/503/](http://jsfiddle.net/eGjak/503/)

您必须在画布上找到局部 x 和 y，然后计算距离（想想勾股定理，aSquared + bSquare = cSquared ），看看距离是否小于圆的半径（又名鼠标在圆内）

在您当前拥有的代码之后添加此代码

```
var focused_circle, lastX, lastY ; 

function test_distance( n, test_circle ){  //see if the mouse is clicking circles
    var dx = lastX - test_circle.x,
    dy = lastY - test_circle.y;

    //see if the distance between the click is less than radius
    if( dx * dx + dy * dy < test_circle.r * test_circle.r  ){
        focused_circle = n;
        $(document).bind( 'mousemove.move_circle' , drag_circle );
        $(document).bind( 'mouseup.move_circle' , clear_bindings);
        return false; // in jquery each, this is like break; stops checking future circles
    }
}
$('#cv').mousedown( function( e ){
    lastX = e.pageX - $(this).offset().left;
    lastY = e.pageY - $(this).offset().top;
    $.each( circles, test_distance );
});

function drag_circle( e ){
    var    newX = e.pageX - $('#cv').offset().left,
        newY = e.pageY - $('#cv').offset().top;

    //set new values
    circles[ focused_circle ].x += newX - lastX;
    circles[ focused_circle ].y += newY - lastY;

    //remember these for next time
    lastX = newX, lastY = newY;

    //clear canvas and redraw everything
    ctx.clearRect( 0, 0, ctx.canvas.width, ctx.canvas.height );
    drawCircle(mainCircle);
    $.each(circles, function() {
        drawCircle(this);
        drawLine(mainCircle, this);
    });

}

function clear_bindings( e ){ // mouse up event, clear the moving and mouseup bindings
    $(document).unbind( 'mousemove.move_circle mouseup.move_circle' );
    focused_circle=undefined;
} 
```

还有其他方法可以做到这一点以及节省速度的方法，尽管这应该可以解决问题。

# php - 使用复选框更新数据库列

> ID：10859699
> 
> 赞同：0
> 
> 时间：2012-06-02T04:05:24.077
> 
> 标签：php, mysql, checkbox

如果选中，我无法将列更新为 yes。我没有收到任何错误。我究竟做错了什么？我尝试了多种方法，包括将数组保留在引号中和引号中。我知道如何通过带有电子邮件地址而不是复选框的表单来做到这一点。我也知道如何使用复选框从数据库中删除行。但是不更新...

```
 <?php 
      $id = $_GET['id'];
      $select = mysql_query("SELECT * FROM volsMain WHERE ID = '$id'");
      $data = mysql_fetch_array($select);
  ?>

  <?php
      $query="SELECT * FROM volsMain ORDER BY shift_times, position";
      $result = mysql_query($query) or die(mysql_error()); 
      while ($row = mysql_fetch_array($result)){    
  ?>

  <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="hidden" name="id" value="<?php echo $id; ?>" />
    <input type="checkbox" name="checkinsat" value="yes"<?php
            if($data['checkinsat'] == 'yes') echo 'checked'; ?>/>
        <input type="submit" >
  </form>

  <?php
   if ($row['saturday'] === 'A.M.') {
       echo '<span class="amShift">';
   } else if ($row['saturday'] === 'P.M.') {
       echo '<span class="pmShift">';
   } else {
    echo '<span>';
   }
    echo "SATURDAY:" . $row['saturday'] . '</span><br />';

   if ($row['sunday'] === 'A.M.') {
    echo '<span class="amShift">';
   } else if ($row['sunday'] === 'P.M.') {
    echo '<span class="pmShift">';
   } else {
    echo '<span>';
   }

   echo "SUNDAY:". $row['sunday'] . '</span><br />';
   echo "<br />SHIRT SIZE:<h2>" . $row['shirt'] . "</h2>";
   echo "<br />VOLUNTEER NAME:<h2>" . $row['agreeName'] . "</h2>";
   echo "<p>Assigned as a volunteer for:<br />" . $row['position'] . "</p>";
   echo "<p>Shift times are scheduled for:<br />" . $row['shift_times'] . "</p>";
   echo "<p>Shifts have been confirmed:<br />" . $row['confirmed'] . "</p>";
   echo "<p>Checked in Friday:<br />" . $row['checkinfri'] . "</p>";
   echo "<p>Checked in Saturday:<br />" . $row['checkinsat'] . "</p>";
   echo "<p>Checked in Sunday:<br />" . $row['checkinsun'] . "</p>";
}
?>

<?php 
   $checkSAT = isset($_POST['checkinsat']) ? "yes" : "no";
   $updateSat = mysql_query("UPDATE volsMain SET checkinsat = '$checkSAT' WHERE ID = '$id'");
   $query = mysql_query($updateSat); 
   $result = mysql_query($query);
   echo "<p>" . print_r($checkSAT) . "</p>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:10:40.747

```
 $checkSAT = isset($_POST['checkinsat']) ? "yes" : "no"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:12:31.373

```
SET checkinsat = '$checkSAT' ... 
```

PHP 中的变量区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T05:04:45.763

只是通过快速查看它，可能是您的代码：

```
$updateSat = mysql_query("UPDATE volsMain SET checkinsat = '$checkSAT' WHERE ID = '$id'"); 
```

...应该改为：

```
$updateSat = mysql_query('UPDATE volsMain SET checkinsat = ' . $checkSAT . ' WHERE ID = ' . $id . ''); 
```

?

同样应该适用于：

```
$select = mysql_query("SELECT * FROM volsMain WHERE ID = '$id'"); 
```

到：

```
$select = mysql_query('SELECT * FROM volsMain WHERE ID = ' . $id . ''); 
```

不过，这肯定是粗略的：

```
 $updateSat = mysql_query("UPDATE volsMain SET checkinsat = '$checkSAT' WHERE ID =  '$id'");
$query = mysql_query($updateSat); 
$result = mysql_query($query); 
```

$updateSat 不是纯 SQL 查询，不应在“mysql_query”中调用。如果您希望将其命名为 $result，只需执行以下操作：

```
 $result = mysql_query("UPDATE volsMain SET checkinsat = '$checkSAT' WHERE ID =  '$id'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T08:43:09.057

兄弟 ！

1.  您是否注意到您将表单标签放入 while 循环中？检查这个生成的网页的视图源代码，看看那里显示了多少个 html 表单标签？将 html 表单标签放入循环中是一种错误的方法。您应该在表单元素上使用循环。

2.  我建议不要在 DB 列中保存是/否，而是保存 1 和 0 值。

# xml - XPath 选择两个特定元素之间的所有元素

> ID：10859703
> 
> 赞同：36
> 
> 时间：2012-06-02T04:06:31.840
> 
> 标签：xml, xslt, xpath

我有以下 xml：

```
<doc>
    <divider />
    <p>text</p>
    <p>text</p>
    <p>text</p>
    <p>text</p>
    <p>text</p>
    <divider />
    <p>text</p>
    <p>text</p>
    <divider />
    <p>text</p>
    <divider />
</doc> 
```

我想在第一个分隔元素之后选择所有 p 节点，直到下一次出现分隔元素。我尝试使用以下 xpath：

```
//divider[1]/following-sibling::p[following::divider] 
```

但问题是它在最后一个分隔符元素之前选择所有 p 元素。我不确定如何使用 xpath 1 来做到这一点。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-02T04:50:36.950

与 bytebuster 的概念相同，但 xpath 不同：

```
/*/p[count(preceding-sibling::divider)=1] 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-02T05:04:09.993

**这是一个通用的 XPath 表达式**：

```
/*/divider[$k]
    /following-sibling::p
       [count(.|/*/divider[$k+1]/preceding-sibling::p)
       =
        count(/*/divider[$k+1]/preceding-sibling::p)
       ] 
```

如果您替换`$k`为，`1`则恰好`p`选择了所需的节点。

如果你`$k`用`2`then替换`p`2nd 和 3rd 之间的所有元素`divider`，...，等等。

**说明**：

*这是节点集交集的Kayessian* XPath 1.0 公式的简单应用：

```
$ns1[count(.|$ns2) = count($ns2)] 
```

选择*同时*属于节点集`$ns1`和的所有节点`$ns2`。

在这种特定情况下，我们替换`$ns1`为：

```
/*/divider[$k]/following-sibling::p 
```

我们`$ns2`用：

```
/*/divider[$k+1]/preceding-sibling::p 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-02T17:40:43.707

I think there's a much simpler and probably faster solution: you want all preceding siblings of the second divider that have at least one preceding sibling divider:

```
/doc/divider[2]/preceding-sibling::p[preceding-sibling::divider] 
```

It gets a bit more complex, of course, if you want to find the paras between the second and third dividers: then you want something more like Daniel Haley's solution.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-02T04:21:40.397

选择所有`p`只有**一个**元素`divider`的东西`preceding-sibling`怎么样？

```
//doc/p[preceding-sibling::divider[1] and not (preceding-sibling::divider[2])] 
```

# c# - 在 C# 和 Java 之间始终相等的简单哈希

> ID：10859704
> 
> 赞同：3
> 
> 时间：2012-06-02T04:06:40.980
> 
> 标签：c#, java, hash

我有一个 C# WebService 和一个 (Java) Android 应用程序。是否有一个简单的哈希函数可以在这两种语言之间产生相同的结果？最简单的 C# 哈希是 String.GetHashCode()，但我无法在 Java 中复制它。最简单的 Java 哈希一点也不简单。而且我不知道我是否可以在 C# 中完全复制它。

如果它是相关的，我会在通过互联网发送密码之前对密码进行哈希处理。我目前正在使用 Encode64，但这显然不安全，因为我们可以反转它。

* * *

编辑：好的，我决定使用 SHA256。万一其他人需要一个快速的解决方案，这里是我使用的代码，考虑到我希望 C# 和 Java 都输出完全相同的字符串，我需要最简单的解决方案。

**爪哇**

```
public String Hash(String s)
{
    StringBuffer sb = new StringBuffer();
    try {
        MessageDigest md = MessageDigest.getInstance("SHA-256");
        md.update(s.getBytes());
        byte byteData[] = md.digest();
        for (int i = 0; i < byteData.length; i++) {
            sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16)
                    .substring(1));
        }
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    }
    return sb.toString();
} 
```

**C＃**

```
public static string Hash(String s)
{
    HashAlgorithm Hasher = new SHA256CryptoServiceProvider();
    byte[] strBytes = Encoding.UTF8.GetBytes(s);
    byte[] strHash = Hasher.ComputeHash(strBytes);
    return BitConverter.ToString(strHash).Replace("-","").ToLowerInvariant().Trim();
} 
```

多谢你们！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T04:15:09.747

首先，由实现的散列类型`String.GetHashCode()`并且`String.hashCode()`不是为这种事情设计的。首先，它们只散列到 32 但数字（至少在 Java 案例中），因此存在很大的冲突风险。在这种情况下，如果两个不同的密码映射到同一个哈希......那么某人有 2 ^ 32 分之一的机会接受随机选择的密码。（另一方面，如果坏人可以截获 32 位散列以获得有效密码，他们在猜测原始密码是什么方面有很大的“优势”！）

其次，发送加密哈希（例如由 MD5、SHA-256 等生成）可能不会解决您的安全问题……除非您通过 SSL 或其他方式发送哈希。当然，坏人将无法恢复原始密码，但他们可以拦截并在“重放”攻击中使用哈希。（有一些方法可以解决这个问题，但它们要么需要共享密钥，要么需要使用公钥/私钥加密......如果你想让它安全，你必须知道你在做什么。）

简而言之，您需要与具有扎实安全专业知识的人讨论您的整个问题和提出的解决方案。

* * *

如果您真的认为这不是安全问题，那么 MD5 哈希应该没问题。但不要说你没有被警告...

（但不要使用简单的 32 位哈希码，因为它几乎不比 base64 更安全。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T04:11:26.810

使用标准算法，例如 MD5 或 SHA256，这将在任何平台上产生相同的结果（如果实施正确），但您可能需要考虑这是否真的是在发送密码之前“加密”密码的最佳方式电线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T04:09:54.000

如果您正在寻找安全性，您应该尝试加密。否则，有一个内置的散列算法，如 MD5。这应该在 2 之间可靠地一致

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-03T14:12:33.500

您可以在 Java 中使用以下代码，它可以匹配 C#

```
public static String getEncryptedPassword(String clearTextPassword) throws NoSuchAlgorithmException{

    MessageDigest md = MessageDigest.getInstance("SHA-256");
    md.update(clearTextPassword.getBytes(StandardCharsets.UTF_8));
    byte[] digest = md.digest();
    String hex = String.format("%064x", new BigInteger(1, digest));
    String st = new String(hex.toUpperCase());
    for (int i = 2; i < (hex.length() + hex.length() / 2) - 1 ;) {
        st = new StringBuffer(st).insert(i, "-").toString();
            i = i + 3;        
    }
    return st ; 

} 
```

# python - 如何将 python 列表传递给 C 扩展函数并附加一些值？

> ID：10859709
> 
> 赞同：0
> 
> 时间：2012-06-02T04:08:32.873
> 
> 标签：python, python-c-extension

假设我有一个 python 列表：

```
l=[[1,2],[3,4]] 
```

我想将它传递给以下 C 扩展：

```
PyObject *acc(PyObject *self, PyObject *args)
{
PyObject * l;
PyArg_ParseTuple(args, "O", &l);
//l.append([5,6]
} 
```

我只是想知道如何在注释行中修改上述功能以实现我想要做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:26:12.603

呃，那会是[`PyList_Append()`](http://docs.python.org/c-api/list.html#PyList_Append)……

# jquery - 使用 jquerymobile 对移动网站的页面直接效果

> ID：10859712
> 
> 赞同：0
> 
> 时间：2012-06-02T04:09:28.553
> 
> 标签：jquery, ajax, jquery-mobile

在浏览[jquerymobile](http://jquerymobile.com/resources/)网站时，我看到了一些使用 jquerymobile 技术的示例，例如[disneyworld 。](http://m.disneyworld.disney.go.com/)当我点击另一个页面的链接时，浏览器没有刷新，但中间显示了一个加载指示器，然后直接到目的地。

属于这种效果`AJAX`吗？以及如何实现这种效果？一个例子将不胜感激，谢谢。

![在此处输入图像描述](../Images/36ee2bd2517d83dc1ec4a6c17ceb6740.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:31:44.433

是的，它是 ajax，并且 jQuery mobile 将此设置设置为默认值。如果您想在没有 jQuery 的情况下在您的网站上执行此操作，则需要对后端操作使用 GET 调用并返回整个页面，该页面将用您发布的 ID 替换 div。如果您想要您选择的语言的确切代码，您需要告诉我们那是什么。

# python - Django 处理大文件 ( imageblob )

> ID：10859714
> 
> 赞同：0
> 
> 时间：2012-06-02T04:10:37.897
> 
> 标签：python, django, blob, sorl-thumbnail

我正在编写一个小型画廊应用程序，经过大量测试后，我提交了一个 3mb 的图像。

基本上，画廊应用程序依赖于另一个应用程序，该应用程序为每个图像创建一个 UploadedFile 实例，但是我看到对于这个特定图像，它创建了属于同一个 3mb 图像的 4 个实例（db 中的行），每个图像都有“blob”它的名字的结尾。

我的问题是，我如何处理这么大的图像并能够参考整个图像？在 sorl-thumbnail 之类的 html 标记或 django 模板标记中？

我使用 python 2.7.2、Django 1.3.1 和 MySQL 5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:28:30.130

似乎问题出在我用来上传多个文件的 Jquery 插件上。该插件是将文件拆分为块然后作为 POST 请求单独发送的插件，而 django 不知道 blob1、blob2、blob3、blob4 在块中的相同文件。

# ios - 如何在“方面适合”模式下将 UIImageView 裁剪为新的 UIImage？

> ID：10859717
> 
> 赞同：8
> 
> 时间：2012-06-02T04:11:03.323
> 
> 标签：ios, uiimageview, uiimage

![在此处输入图像描述](../Images/7c079b97b529a5c365e5b320727f5369.png)

我想通过在 UIImageView 中裁剪图像来创建一个新的 UIImage。例如在上面的图片中，我想要一个以绿色勾勒出的区域的新 UIImage。我找到了执行此操作的代码，通常它看起来像这样（作为 UIImage 类别）：

```
- (UIImage *)croppedImage:(CGRect)bounds {
    CGImageRef imageRef = CGImageCreateWithImageInRect([self CGImage], bounds);
    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    return croppedImage;
} 
```

完全有道理。但是，我的 UIImageView 处于 contentMode 'aspect fit' 中。似乎这使 CGImageCreateWithImageInRect 的 CGRect 计算复杂化，我一直无法找出正确的解决方案。

我想我需要对绿色矩形应用与对图像所做的相同的转换？

另外：我在这里发现了另一个问题（[How to know the image size after apply aspect fit for the image in an UIImageView](https://stackoverflow.com/questions/6278876/how-to-know-the-image-size-after-applying-aspect-fit-for-the-image-in-an-uiimage)），这似乎显示了一种获取尺寸的蛮力方式，但我仍然不确定它如何适合一种种植情况。

有任何想法吗？

**编辑**：就我而言，我确实有一个如上图所示的正方形，在 UIImageView 上的覆盖视图中绘制。因此，当我意识到我正在裁剪 UIImage（在 UIImageView 内）时，我需要以某种方式更改绿色 CGRect，使其“匹配”应用“方面适合”时完成的转换。例如，如果我让 UIImageView 处于“左上”模式，那么一切正常，因为底层 UIImage 和 UIImageView 之间存在 1:1 映射。“左上角”模式的问题是整个图像并不总是显示，因为它可能比我的 UIImageView 大。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T20:07:13.390

根据我对类似问题的[其他回答，我为 UIImageView 类别编写了此方法：](https://stackoverflow.com/a/6732045/550177)

```
-(CGRect) cropRectForFrame:(CGRect)frame
{
    NSAssert(self.contentMode == UIViewContentModeScaleAspectFit, @"content mode must be aspect fit");

    CGFloat widthScale = self.bounds.size.width / self.image.size.width;
    CGFloat heightScale = self.bounds.size.height / self.image.size.height;

    float x, y, w, h, offset;
    if (widthScale<heightScale) {
        offset = (self.bounds.size.height - (self.image.size.height*widthScale))/2;
        x = frame.origin.x / widthScale;
        y = (frame.origin.y-offset) / widthScale;
        w = frame.size.width / widthScale;
        h = frame.size.height / widthScale;
    } else {
        offset = (self.bounds.size.width - (self.image.size.width*heightScale))/2;
        x = (frame.origin.x-offset) / heightScale;
        y = frame.origin.y / heightScale;
        w = frame.size.width / heightScale;
        h = frame.size.height / heightScale;
    }
    return CGRectMake(x, y, w, h);
} 
```

您可以传入绿色矩形的框架（假设它是图像视图的子视图）并获取裁剪矩形以裁剪 UIImage。请注意，它仅适用于“方面适合”模式！不过我还没有测试过。所以，告诉我它是否有效！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T15:20:26.657

我知道答案是，但我遇到了一些问题，所以我也不会发布我的解决方案。

问题是图像以宽高比进行缩放，但我们知道宽度和高度的比例因子。然后我们可以很容易地计算出正确的裁剪矩形：

```
-(UIImage*)crop:(CGRect)frame
{
    // Find the scalefactors  UIImageView's widht and height / UIImage width and height
    CGFloat widthScale = self.bounds.size.width / self.image.size.width;
    CGFloat heightScale = self.bounds.size.height / self.image.size.height;

    // Calculate the right crop rectangle 
    frame.origin.x = frame.origin.x * (1 / widthScale);
    frame.origin.y = frame.origin.y * (1 / heightScale);
    frame.size.width = frame.size.width * (1 / widthScale);
    frame.size.height = frame.size.height * (1 / heightScale);

    // Create a new UIImage
    CGImageRef imageRef = CGImageCreateWithImageInRect(self.image.CGImage, frame);
    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return croppedImage;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T10:09:34.823

我想你不明白你在做什么。您不能“裁剪” UIImageView - 只有 UIImages。因此，您的 croppedImage 方法应该属于 UIImage 类别而不是 UIImageView 类别。您传递给裁剪方法的边界矩形必须与图像大小相关，而不是与图像视图边界相关。图像视图的 contentMode 是什么无关紧要 - 图像的裁剪将始终相同。首先从图像视图中获取图像。然后从中创建一个新的裁剪图像，最后为图像视图设置裁剪图像。这可以在一行代码中完成：

```
imageView.image = [imageView.image croppedImage:rect]; 
```

由于您的 contentMode 是“宽高比适合”，新图像将自动拉伸以适合视图框架。您还可以尝试根据 image.size 更改视图框架以避免像素化效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T12:58:10.337

我使用下面的方法。

```
-(UIImage *)getNeedImageFrom:(UIImage*)image cropRect:(CGRect)rect
{
   CGSize cropSize = rect.size;
   CGFloat widthScale =  
   image.size.width/self.imageViewOriginal.bounds.size.width;
   CGFloat heightScale = 
   image.size.height/self.imageViewOriginal.bounds.size.height;
   cropSize = CGSizeMake(rect.size.width*widthScale,  
   rect.size.height*heightScale);
   CGPoint  pointCrop = CGPointMake(rect.origin.x*widthScale, 
   rect.origin.y*heightScale);
   rect = CGRectMake(pointCrop.x, pointCrop.y, cropSize.width, 
   cropSize.height);
   CGImageRef subImage = CGImageCreateWithImageInRect(image.CGImage, rect);
   UIImage *croppedImage = [UIImage imageWithCGImage:subImage];
   CGImageRelease(subImage);
   return croppedImage;

   } 
```

# iphone - 由 mysql 数据库填充的 Uiscroll 单元格中的图像

> ID：10859728
> 
> 赞同：1
> 
> 时间：2012-06-02T04:12:37.393
> 
> 标签：iphone, database, image, dynamic-arrays, uitableview

我被困在某个地方，

我正在使用 PHP 从 MYSQL 数据库中动态提取图像，这一切都可以，直到我从 URL 中检索照片的名称。我想在 UIScroll View 上动态插入缩略图，以便用户可以水平滚动以查看所有图像、照片描述、照片摘要，我还希望他们单击​​并打开更多详细信息

到目前为止，这是我的代码

```
-(void)getItems 
{
    NSString *root = URL

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/phpfile", root]];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) 
    {
        [self.object removeAllObjects];

        id results = [JSON valueForKeyPath:@"ids"];

        [results enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) 
        {
            [self.object addObject:[NSString stringWithFormat:@"%@",[obj valueForKey:@"item1"]]];
            [self.object2 addObject:[NSString stringWithFormat:@"%@",[obj valueForKey:@"item2"]]];

-(void)DidLoad
{
    //initializing arrays to hold data

    //Initiate arrays that hold data
    object1 = [[NSMutableArray alloc] init];
    object2 = [[NSMutableArray alloc] init]; 
```

我需要在水平 UIscroll 上显示对象 1，以便用户可以在单击时滚动查看更多缩略图（以及名称和描述），（UIscroll 视图应打开详细信息）

所有这些信息都将从数据库中提取

# jquery - 请求模型与响应模型不同的实体的主干.js 请求

> ID：10859729
> 
> 赞同：2
> 
> 时间：2012-06-02T04:12:52.730
> 
> 标签：jquery, backbone.js

我正在使用backbone.js 来构建我的客户端应用程序。Backbone.sync 适用于所有 CRUD 操作，但是我不清楚如何实现我需要发出的服务器端请求之一。此请求涉及向服务器发送包含算法参数的模型，并接收包含算法结果（图表数据点、表格数据等）的响应。调用 model.save() 感觉不是正确的做法，因为骨干网期待包含更新模型的响应，而理想情况下，我希望使用响应创建一个全新的模型。

我是否应该简单地回退`jQuery.ajax({data:model.toJson(),...})`并使用响应创建一个新模型？还是我还缺少其他聪明的东西？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T04:32:04.567

你想做的事情听起来不像是 Create、Update、Read 或 Destroy，它听起来更像是一个 RPC 调用。没有理由尝试将非 CRUD 操作硬塞到 CRUD 系统中，只要有意义`Backbone.sync`，您就可以自由地调用自己，并且 RPC 风格的调用听起来像是做一些手动 AJAXing 的好方法。`$.ajax`大概您会将`success`结果转换为一个或多个[`set`](http://documentcloud.github.com/backbone/#Model-set)调用，然后让 Backbone 的事件系统从那里获取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T13:15:47.743

尽管我同意@mu 的回答，但我想说这始终是一种将*非 CRUD*操作封装在*CRUD*中的方法。

例如，在您的情况下，您可以拥有一个带有加载*属性的模型，这些属性作为**创建*实例所需的参数发送到服务器。

服务器期待一个*POST*操作来创建一个实体，比如说`Chart`模型。服务器获取参数来构建图表，并返回图表的 JSON 表示形式，包括：初始参数和结果参数。

然后，在 Backbone 层中，模型将包含您需要的所有数据，不仅是结果数据，还包括原始数据。

# php - 未定义的偏移错误，新的构建数组

> ID：10859731
> 
> 赞同：2
> 
> 时间：2012-06-02T03:50:50.743
> 
> 标签：php, arrays

我正在学习数组并将其放在一起……这意味着我得到了我想要的结果，但我得到了未定义的偏移错误。

```
$err_array = 数组（）；
$err_array[0] = array('第1步和第2步都是空的。','chu');
$err_array[1] = array('Step 1 为空（但可选）a','Step 1 为空（但可选）');
$err_array[2] = array('第2步为空（且必需）','第2步为空（且必需）');
$err_array[3] = array('第 3 步为空（且必需）','第 3 步为空（且必需'）;
$err_array[4] = array('第4步为空（可选）','第4步为空（可选）');

    # 设置错误信息的文本颜色
    $计数器 = 0;   

# 第 16 行 while (is_array($err_array[$counter]) ) {   
                $err_[$counter] = ''.$err_array[$counter][0].'';
# 第 18 行 $err__[$counter] = ''.$err_array[$counter][1].'';
            $计数器++;
            }

```

这是错误：

> 注意：未定义的偏移量：5 in /nfs/c08/h04/mnt/124078/domains/yourinternetfootprint.com/html/wp-content/plugins/wordpress_meta_box_sample_files/includes/template_yif_ealfm_get_rss_feed_pa​​rameters.php 在第 16 行
> 
> 注意：未定义的偏移量：/nfs/c08/h04/mnt/124078/domains/yourinternetfootprint.com/html/wp-content/plugins/wordpress_meta_box_sample_files/includes/template_yif_ealfm_get_rss_feed_pa​​rameters.php 第 18 行中的 1

我知道有一种更简洁的方法来处理错误消息并将它们分配给变量并在它们周围包装一些 css ......但正如我所说我正在学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:38:39.070

要正确迭代，`$err_array`您应该使用`foreach`：

```
foreach ($err_array as $counter => $errors) {
    if (isset($errors[0])) { // make sure $errors[0] exists
        $err_[$counter] = $errors[0];
    }
    if (isset($errors[1])) { // make sure $errors[1] exists
        $err__[$counter] = $errors[1];
    }
} 
```

# java - 使用什么数据结构轻松搜索 int 最大值并返回相关对象？

> ID：10859732
> 
> 赞同：0
> 
> 时间：2012-06-02T04:14:02.810
> 
> 标签：java, oop

有两个类`Auction`和`Lot`。如何存储数据：Client (Thread) 和 Bid (int) 这样的数据结构可以很容易地被 Bid(lot.Max) 搜索并返回相关的 Client 对象？

```
public class Lot {

    public HashMap<ClientThread, Integer> mapBids= new HashMap<ClientThread, Integer>();
}

public class Auction {
    List<Lot> lots = new ArrayList<Lot>();
        for(Lot lot: lots){
            int lastBid = lot.BiggestBid;
            ...
              // How to get Client object which has "lot.BiggestBid" ? 
             System.out.println(
                 lot.mapBids.get(lot.BiggestBid).someClientThreadMethod(args)); // wrong 

         }
  } 
```

可能我需要`Lot`一个数据结构来保存一对`Client`and `BiggestBid`，并且可以返回`Client`谁拥有`BiggestBid`......

* * *

对于某些实体，Client 和/或 BiggestBid 可以相同。

* * *

也许两个并行阵列会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:28:09.073

如果出价是唯一的 - 使用 TreeMap。否则，使用 SortedList。如果在创建期间未指定比较器，则 Map 和 List 都使用自然顺序。最大和最小的键检索非常有效 O(1)。如果您需要线程安全 - 使用 SynchronizedCollection，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:17:34.003

您想要实现[SortedMap](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html)接口的东西——而不是 HashMap，使用 TreeMap？

# c++ - 将 char * 转换为字符串文字

> ID：10859744
> 
> 赞同：1
> 
> 时间：2012-06-02T04:18:44.597
> 
> 标签：c++, pragma, string-literals

我想使用带有 #pragma 消息的 char * 来告诉我的问题在 Visual Studio 调试器中的位置。

```
void OutputShaderErrors(const char *filename)
{
  std::string outputMessage = "Errors written to: ";
  outputMessage += filename;

  #pragma message(outputMessage.c_str())
} 
```

上面的代码块确实有效，但给出了以下警告：

```
Warning 1   warning C4083: expected 'string'; found identifier 'outputMessage' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T04:22:07.963

正如建议的`#`那样`#pragma`，这是预处理器的一个特性。您不能在运行时*调用*它。该代码实际上不起作用，您看到的警告来自您对`#pragma`.

由于您使用的是*Visual Studio*，因此您可能会发现该`OutputDebugMessage`功能很有用。

# html - 没有 javascript 的窗口分辨率处理

> ID：10859747
> 
> 赞同：0
> 
> 时间：2012-06-02T04:19:27.720
> 
> 标签：html, css

是否有任何 CSS 属性来处理窗口分辨率。我创建了一个 HTML 页面，总分辨率宽度为 1424 像素。当我以不同的分辨率打开它时，我看到一个滚动条，并且 HTML 的分辨率不会自动调整。我不希望在页面的最大化大小中看到滚动条。是否可以不使用javascript。同时如何在以较低分辨率创建自身时提高分辨率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T04:37:31.437

使用 CSS 获得的最佳效果是 @media 查询。

```
@media screen and (max-width: 799px) {
  /* styles for smaller screen */
}
@media screen and (min-width: 800px) {
  /* styles for larger screen */
} 
```

我不太确定这是否是你要找的。

# objective-c - 单例创建首选项

> ID：10859750
> 
> 赞同：2
> 
> 时间：2012-06-02T04:19:37.067
> 
> 标签：objective-c, ios, cocoa

您可以通过多种方式创建单例。我想知道这之间哪个更好。

```
+(ServerConnection*)shared{
    static dispatch_once_t pred=0;
    __strong static id _sharedObject = nil;
    dispatch_once(&pred, ^{
        _sharedObject = [[self alloc] init]; // or some other init method

    });
    return _sharedObject;
} 
```

我可以看到这编译成非常快的东西。我认为检查谓词将是另一个函数调用。另一个是：

```
+(ServerConnection*)shared{
    static ServerConnection* connection=nil;
    if (connection==nil) {
        connection=[[ServerConnection alloc] init];
    }
    return connection;
} 
```

两者之间有什么重大区别吗？我知道这些可能足够相似，不必担心。但只是想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T04:27:12.803

主要区别在于第一个使用 Grand Central Dispatch 来确保创建单例的代码只会运行一次。这向您保证它将是一个单例。

GCD 还应用了威胁安全性，因为根据规范，对 dispatch_once 的每个调用都将同步执行。

我会推荐这个

```
+ (ConnectionManagerSingleton*)sharedInstance {

    static ConnectionManagerSingleton *_sharedInstance;
    if(!_sharedInstance) {
        static dispatch_once_t oncePredicate;
        dispatch_once(&oncePredicate, ^{
            _sharedInstance = [[super allocWithZone:nil] init];
        });
    }

    return _sharedInstance;
}

+ (id)allocWithZone:(NSZone *)zone {    

    return [self sharedInstance];
}

- (id)copyWithZone:(NSZone *)zone {
    return self;    
} 
```

取自这里[http://blog.mugunthkumar.com/coding/objective-c-singleton-template-for-xcode-4/](http://blog.mugunthkumar.com/coding/objective-c-singleton-template-for-xcode-4/)

**编辑：**

这是您要问的确切答案 [http://cocoasamurai.blogspot.jp/2011/04/singletons-your-doing-them-wrong.html](http://cocoasamurai.blogspot.jp/2011/04/singletons-your-doing-them-wrong.html)

**编辑2：**

前面的代码是针对 ARC 的，如果你想要非 arc 支持添加

```
#if (!__has_feature(objc_arc))

- (id)retain {  

    return self;    
}

- (unsigned)retainCount {
    return UINT_MAX;  //denotes an object that cannot be released
}

- (void)release {
    //do nothing
}

- (id)autorelease {

    return self;    
}
#endif 
```

（与第一个链接中的解释完全相同）

最后一个关于单例的很好的解释：

[http://cshapindepth.com/Articles/General/Singleton.aspx](http://csharpindepth.com/Articles/General/Singleton.aspx)

# c++ - 用于数据包注入的 Libnet 与原始套接字

> ID：10859756
> 
> 赞同：1
> 
> 时间：2012-06-02T04:20:34.110
> 
> 标签：c++, network-programming, raw-sockets, libnet, packet-injection

我需要更有经验的网络程序员关于 GNU/Linux 系统上的数据包注入的一些意见/建议。我正在开发一个用于数据包注入和嗅探的开源 C++ 库。该库是[libcrafter](http://code.google.com/p/libcrafter/)。在页面上有一些示例可以查看该库的工作原理。

我有一个两难境地，并会感谢你的想法。目前，库“提供”两种在线写入数据包的方法。首先，构造数据包：

```
Packet pck = IP()/UDP()/DNS(); 
```

1) 然后使用 Send() 函数发送：

```
pck.Send("eth0"); 
```

2）或使用 RawSocketSend() 函数（这是我用于基准测试但可供用户使用的“实验性”函数）：

```
pck.RawSocketSend(sd); 
```

其中 sd 是套接字描述符。如果数据包具有链路层协议（如以太网），则 sd 应该是 PACKET 套接字描述符。如果不是，则应该是 RAW 套接字描述符。

发送数据包的标准和记录方法是使用 Send() 方法。目前，Send() 方法使用[libnet](http://sourceforge.net/projects/libnet-dev/)将数据包写入网络。

问题是 Send() 函数比 RawSocketSend() 慢得多......我经常不得不做很多棘手和烦人的事情来调整 libcrafter 处理协议字段的方式以正确使用 libnet_build*函数（这会导致性能损失）。每次我实现一个协议时，我都必须查看 libnet 文档，这使得开发过程变得非常乏味和缓慢。所以，我想停止使用 libnet 进行数据包注入，并在 Send() 函数中直接使用 RAW/PACKET 套接字。

Libcrafter 旨在以透明的方式为用户处理所有繁琐的数据包制作工作（校验和计算、字节排序、标头长度等）。在使用 RAW/PACKET 套接字（RawSocketSend 函数）的最流行的 GNU/Linux 系统（Ubuntu、Fedora、Debian）上一切正常。

我使用 libnet 的唯一原因是出于可移植性问题。但是我没有将 libcrafter 移植到其他系统而不是 GNU/Linux 系统的知识或意图。

我的问题是：

1.  在 GNU/Linux 的数据包注入库上使用 RAW/PACKET 套接字是否谨慎且安全？
2.  如果我决定停止使用 libnet，您是否知道关于 GNU/Linux 发行版之间的 RAW/PACKET 套接字的可移植性我应该考虑的一些问题？
3.  RAW/PACKET 套接字接口可能会在未来的内核版本中发生变化？

非常感谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:42:33.857

开源的美妙之处在于您实际上可以浏览源代码，所以我检查了： [http ://code.google.com/p/libcrafter/source/browse/libcrafter/crafter/Packet.cpp](http://code.google.com/p/libcrafter/source/browse/libcrafter/crafter/Packet.cpp)

并且看到 Packet::send 效率不高：它执行了太多系统调用（每次都将设备名称与实际接口匹配）并调用 libnet 函数，我猜它每次都会打开一个套接字并发送数据包。无论如何，发送数据包的开销太大。

原始发送，我没有看到功能代码，但我猜它只是使用`send()`. 如果我是你，如果我对 sendRawPacket() 函数不满意，我会简单地使用行套接字发送它，我已经看到该数据包提供了`getRawBuffer()`函数。

有关原始套接字的更多信息： [http](http://www.tenouk.com/Module43a.html) ://www.tenouk.com/Module43a.html并尝试 google。

对于你的问题：

1）我不明白你所说的“安全”是什么意思？一般的答案是“是的，小心”

2) 关于可移植性，使用原始套接字是 POSIX 标准的一部分，因此它可以在任何 linux dist 上运行，也可能在 windows 上运行。我不知道 libcraft 是否可以移植到 Windows，但它应该可以在任何 linux dist 上运行。如果没有，您可以为库做出贡献并使其可移植。

3) 我无法回答有关未来的问题。再说一遍，这是 POSIX 标准，现在很多年都没有太大变化，将来可能会改变。我不是先知，但我认为在不久的将来它不会改变。

盖伊

# join - Hadoop：是否可以将多个 Map-Side join 链接在一起，似乎不是？

> ID：10859758
> 
> 赞同：0
> 
> 时间：2012-06-02T04:20:35.967
> 
> 标签：join, hadoop, mapreduce, chain

是否可以将多个 Map-side join 链接在一起？对我来说这是不可能的，因为我们不能只使用 map 对值进行排序（而在 reduce 中我们可以使用辅助排序）。所以不可能为下一次连接提供排序值结果。是否有任何解决方案来对地图端连接结果值进行排序？或者任何链接多个地图侧连接的解决方案？现在我可以想到使用 map-reduce 作业对值进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:13:49.203

你可能想看看 Yahoo 的 Oozie 框架：

1.  [http://incubator.apache.org/oozie/](http://incubator.apache.org/oozie/)
2.  [https://github.com/yahoo/oozie](https://github.com/yahoo/oozie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:22:12.750

如果您使用的是旧 api（mapred 包），请查看 CompositeInputFormat。甚至还有来自 Roberto Congiu 的博客文章，更详细地解释了如何使用它：

*   [http://www.congiu.com/node/5](http://www.congiu.com/node/5)

这确实要求您的数据集是预先排序和可能分区的

# python - 为什么两位数选择不会在 python 中返回正确的响应？

> ID：10859764
> 
> 赞同：0
> 
> 时间：2012-06-02T04:21:43.237
> 
> 标签：python, task

我现在正在学习如何使用python。我在学习我不理解的定义时发现了一个问题。我给出了一个简单的菜单，选择 0-4。如果用户选择上述 4，应该会收到一条消息，上面写着“这不是一个有效的选择......”

但是，如果您输入一个大于或等于 10 的值，它不会返回任何内容，只返回菜单...没有消息。

提前感谢您的任何想法。

这是我的代码：

```
# Multitasker
# Allows User to Pick an Item that is Defined.

def exit():
    print("See You Later!")
def task1():
    print("This is Task 1!")
def task2():
    print("This is Task 2!")
def task3():
    print("This is Task 3!")
def task4():
    print("This is Task 4!")

choice = None
while choice != "0":
    print(
        """
        Multitask Selector

        0 - Quit
        1 - Task 1
        2 - Task 2
        3 - Task 3
        4 - Task 4
        """
        )

    choice = input("Pick a Task Between 1-4:\t#")
    print()

    # Exit
    if choice == "0":
        exit()

    # Task 1
    elif choice == "1":
        task1()

    # Task 2
    elif choice == "2":
        task2()

    # Task 3
    elif choice == "3":
        task3()

    # Task 4
    elif choice == "4":
        task4()

    # Not a Correct Selection
    elif choice > "4":
        print("That is not a valid choice.  Please Select a Task Between 1-4.") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T04:25:58.373

您正在比较选择，它是一个字符串（我从您的打印函数中假设 Python 3），与“4”，也是一个字符串。

```
elif choice > "4": 
```

这按字典顺序工作：

```
>>> '1' < '2'
True
>>> '1' < '100'
True
>>> '100' < '2'
True 
```

如果你想要数值比较，你必须把选择变成一个数字，例如

```
>>> int('1') > 4
False
>>> int('10') > 4
True
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T04:28:20.393

“10”不大于“4”。两者都是字符串，并且逐个字符进行比较。“1”小于“4”，所以“10”小于“4”。您应该做的是将它们转换为整数：

```
choice = input("Pick a Task Between 1-4:\t#")
choice = int(choice) if choice.isdigit() else 9  # add this line 
```

这会将任何非数字条目转换为 9，以便再次显示菜单。

然后与数字而不是字符串进行比较：

```
if choice == 0:
    exit() 
```

你的最后一个条件可以简单地是`else`，你不需要`elif`在那里使用。

# java - 向 HTTP 请求添加 cookie

> ID：10859766
> 
> 赞同：4
> 
> 时间：2012-06-02T04:22:12.773
> 
> 标签：java, php, android, cookies

我正在尝试添加一个带有 GUID 的 cookie 来识别用户，但是当我在测试脚本上运行它时，我的代码似乎没有发送任何 cookie。

我的Java代码：

```
 public void search(String q, int o) {
    final String query = q;
    final int offset = o;
    Thread searchThread = new Thread() {
        public void run() {
            try {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                BasicHttpContext httpContext = new BasicHttpContext();
                CookieStore cookieStore = new BasicCookieStore();
                httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
                cookieStore.addCookie(new BasicClientCookie("remixsid", guid));
                httpClient.setCookieStore(cookieStore);
                HttpPost httpPost = new HttpPost("http://192.168.1.43/test/test.php?section=audio&q=" + URLEncoder.encode(query, HTTP.UTF_8) + "&offset=" + offset);
                //HttpPost httpPost = new HttpPost("http://vkontakte.ru/gsearch.php?section=audio&q=" + URLEncoder.encode(query, HTTP.UTF_8) + "&offset=" + offset);
                HttpResponse response = httpClient.execute(httpPost, httpContext);
                String responseBody = EntityUtils.toString(response.getEntity());
                System.out.print(responseBody);
            } catch(Exception e) {
                System.out.println(e.toString());
            }
        }
    };
    searchThread.run();
} 
```

我测试 cookie 的 PHP 代码：

```
<?php
$cookies = $_COOKIE;

if(!count($cookies) > 0)
    echo 'No cookies!';

foreach ($cookies as $key=>$val)
    echo "$key--> $val";

?> 
```

使用以下代码检索 GUID：

```
 public void login(String usr, String pass) {
    logout();
    final String username = usr;
    final String password = pass;
    Thread loginThread = new Thread() {
        public void run() {
            try {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost("http://login.vk.com/?act=login&email=" + URLEncoder.encode(username, HTTP.UTF_8) + "&pass=" + URLEncoder.encode(password, HTTP.UTF_8));
                httpClient.execute(httpPost);
                List<Cookie> cookies = httpClient.getCookieStore().getCookies();
                for(Cookie cookie : cookies) {
                    System.out.println("Cookie: " + cookie.toString());
                    if(cookie.getName().contains("remixsid"))
                        guid = cookie.getValue();
                }
            } catch(Exception e) {
                System.out.println(e.toString());
                System.out.println("An error occured");
                if(loginHandler != null)
                    loginHandler.onLoginError(e);
                return;
            }
            if(!isLoggedIn()) {
                System.out.println("User credentials invalid");
                if(loginHandler != null)
                    loginHandler.onLoginInvalidCredentials();
                return;
            }
            if(loginHandler != null)
                loginHandler.onLoginSuccess();
            System.out.println("Login successfull GUID is: " + guid);
        }
    };
    loginThread.start();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T15:18:54.663

手动设置 cookie 标头似乎有效...

```
 public void search(String q, int o) {
    final String query = q;
    final int offset = o;
    Thread searchThread = new Thread() {
        public void run() {
            try {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost("http://192.168.1.43/test/test.php");
                //HttpPost httpPost = new HttpPost("http://vkontakte.ru/gsearch.php?section=audio&q=" + URLEncoder.encode(query, HTTP.UTF_8) + "&offset=" + offset);
                httpPost.setHeader("Cookie", "remixsid=" + guid);
                HttpResponse response = httpClient.execute(httpPost);
                String responseBody = EntityUtils.toString(response.getEntity());
                System.out.println(responseBody);
            } catch(Exception e) {
                System.out.println(e.toString());
            }
        }
    };
    searchThread.start();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T05:37:25.517

几点意见和建议：

1.  您没有向cookie添加任何**路径信息。**你可以使用`BasicClientCookie.setPath()`方法。
2.  试图读取此 cookie**的 php**脚本的路径是什么？
3.  当 cookie 设置在**根路径**( `/`) 时，只有它可供*所有*其他服务器端程序使用。
4.  要么将 cookie 的路径设置为 root，要么使 cookie 的路径与 PHP 脚本的路径相同。

编辑：

我错过了域部分。您还需要设置 cookie 域。假设您的 PHP 脚本在`http://mysite/myscript.php`Here is the domain 运行（如果您在本地机器上运行脚本，`mysite`则可能是这样）。`localhost`用于`BasicClientCookie.setDomain()`设置 cookie 域。

要理解这一点，假设您的 http-client lib 是与网站交互的浏览器。浏览器存储来自许多站点的 cookie，但在向特定站点发出请求时，它只发送从该特定站点接收到的那些 cookie。

如果未设置域，则库不会将 cookie 发送到该主机。

# django - django 多模板继承 - 这是正确的风格吗？

> ID：10859769
> 
> 赞同：21
> 
> 时间：2012-06-02T04:23:10.847
> 
> 标签：django, django-templates

哟

所以我有一个base.html：

```
<html>
    <body>
        <div id="header"> ... </div>
        {% block main %}{% endblock %}
        <div id="footer"> ... </div>
    </body>
</html> 
```

我还有一个显示用户帖子的页面：

```
{% extends base.html %|
{% block main%}
    <h1>welcome to yours posts hangout!</h1>

      ... snazzy code here that shows all the posts ...

{% endblock%} 
```

现在，问题是，也许我有另一个这样的页面：

```
{% extends base.html %|
{% block main%}
    <h1>look at all posts by all users!</h1>

      ... snazzy code here that shows all the posts by all the users ...

{% endblock%} 
```

因为我们都属于门萨，我们可以看到我的时髦代码被重复了两次（为了重言式的乐趣！）

我不想重复这段代码——我的意思是，如果这将是一个主要的麻烦，我会的，但否则我想要一个定义了时髦代码的页面，然后将上面的小改动和（可能）在它下面。

我对模板的理解是不稳定的——我认为这是做这件事的方法，有没有更好/标准化的方法？

时髦的.html：

```
{% extends base.html %|
  {% block aboveSnazzy%}
  {% endblock %}

      ... snazzy code here that shows all the posts by all the users ...

  {% block belowSnazzy%}
  {% endblock %}
{% endblock%} 
```

然后对于每个不同的部分，我可以拥有：

用户区域.html：

```
{% extends snazzy.html %|
  {% block aboveSnazzy%}
      <h1>welcome to yours posts hangout!</h1>
  {% endblock %}

  {% block belowSnazzy%}
      <h1>i didn't think this far ahead in the example</h1>
  {% endblock %}
{% endblock%} 
```

其他的等等等等！

好的，所以我知道我可以只发送一个带有不同标题的参数或者你有什么 - 让我们假设上面的时髦的东西，我不知道，显示我想要的其他模板或做一些不平凡的事情。我在上面详细说明的“方式”是这样做的吗？

干杯！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-02T07:44:24.077

哟。:-)

答案取决于您的模板有多少共同点。

*   如果您的模板确实有很多共同点，即它们是您网站某些部分的页面，或者只是具有非常共同的结构，那么您的做法就是正确的。我只是认为您应该为块使用更具描述性的名称。

    ```
    {% extends base.html %}
    {% block page_heading %}{% endblock %}
        ... snazzy code here that shows all the posts by all the users ...
    {% block extra_content %}{% endblock %} 
    ```

*   如果您的模板没有太多共同点，但共享一些特定的内容块，那么情况就不同了，因为很难建立一个正确继承的结构。在这种情况下，您应该使用[{% include %}](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)标记。例如，制作另一个显示帖子的模板，比如`_list_posts.html`，然后在子模板中使用它。

    ```
    {% extends base.html %}
    {% block main %}
    <h1>Welcome to your posts hangout!</h1>
    {% include '_list_posts.html' %}
    {% endblock %} 
    ```

    您也可以为此使用[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)。

那么，您应该选择哪个选项？试着回答这个问题：这两个模板是否应该有一个共同的父级？如果是，请选择第一个选项。否则，请选择第二个选项。

# c++ - karatsuba 乘法，递归问题

> ID：10859770
> 
> 赞同：3
> 
> 时间：2012-06-02T04:23:13.397
> 
> 标签：c++, recursion, multiplication, bignum

我正在尝试使用 karatsuba 技术实现大数的乘法。我陷入了无法解决的段错误。该程序似乎总是在 3 或 4 级递归后退出。sizeof(bint) 返回 20000。我的 bint 由一组短裤组成。

```
friend bint operator+ (const bint& lhs, const bint& rhs)
{
    // adding two big integers
}

bint ksuba(const bint& X, const bint& Y, int n)    // n is always a power of 2
{
    if (n == 4)
        return smul(X, Y);    // naive way of multiplying numbers

    bint a1, b1, a2, b2;
    bint x, y, z;

    int half = n/2;

    for (int i=0; i<half; i++)
    {
        a1.data[SIZE - n + i + half] = X.data[SIZE - n + i];
        a2.data[SIZE - n + i + half] = X.data[SIZE - n + i + half];

        b1.data[SIZE - n + i + half] = Y.data[SIZE - n + i];
        b2.data[SIZE - n + i + half] = Y.data[SIZE - n + i + half];
    }

    a1.idx = SIZE - half;
    b1.idx = SIZE - half;
    a2.idx = SIZE - half;
    b2.idx = SIZE - half;

    x = ksuba(a1, b1, half);
    y = ksuba(a2, b2, half);
    z = ksuba((a1+a2), (b1+b2), n) - x - y;

    x.lshift(n);
    z.lshift(half);

    return x + y + z;
} 
```

使用 gdb 会出现以下错误——

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000004018c2 in bint::ksuba (this=<error reading variable: Cannot access memory at address 0x7fffff7ea3a0>, X=<error reading variable: Cannot access memory at address 0x7fffff7ea398>,    Y=<error reading variable: Cannot access memory at address 0x7fffff7ea390>, n=<error reading variable: Cannot access memory at address 0x7fffff7ea38c>) at big.cpp:593
593                 bint ksuba(const bint& X, const bint& Y, int n) 
```

我尝试减少我要声明的 bint 变量的数量。具体来说，我通过将 ksuba(a2, b2, half) 的结果添加到 x 本身来摆脱 y。但这并不能解决问题。有没有办法知道在递归的每一步分配了多少内存？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:14:15.807

在每一层，你有 7 个显式声明的 bint 类型的变量，另外 2 个被隐式分配给 ksuba((a1+a2), (b1+b2), n) 的调用。所有这些都进入堆栈。那是 180 KB。如果程序是在调试模式下构建的，没有优化，堆栈使用量可能会更大。

180 KB 似乎不足以解释崩溃，因为（假设这是 Linux）默认情况下您应该有 8 MB 的堆栈，并且在 3 或 4 次迭代后您不应该用完。但是，正如 Dmitri 所提到的，您可以尝试使用 ulimit 工具增加堆栈大小，或者在链接时通过 Wl,--stack=xxxxx 选项指定它。更好的是，不要将 bint 放在堆栈上。使用 new/delete 动态分配它们，并且只在堆栈上保留指针。

# ruby-on-rails - 让 mmm-mode 在 emacs 24 中工作

> ID：10859773
> 
> 赞同：7
> 
> 时间：2012-06-02T04:24:54.520
> 
> 标签：ruby-on-rails, emacs

我一直在尝试让 mmm-mode 工作，特别是用于 Rails 开发。我已按照安装说明进行操作，但无法进入我正在寻找的特定混合模式和特殊突出显示。最具体的 erb 文件。这是我的 .emacs 文件：

```
(custom-set-variables
 '(custom-enabled-themes (quote (zenburn)))
 '(custom-safe-themes (quote ("71b172ea4aad108801421cc5251edb6c792f3adbaecfa1c52e94e3d99634dee7" default)))
 '(show-paren-mode t))
(custom-set-faces
 )

;; File associations.
(setq auto-mode-alist (cons '("\\.builder$" . ruby-mode) auto-mode-alist))

(require 'mmm-auto)
(setq mmm-submode-decoration-level 0)
(mmm-add-group
 'fancy-html
 '((html-erb
    :submode ruby-mode
    :match-face (("<%#" . mmm-comment-submode-face)
                 ("<%=" . mmm-output-submode-face)
                 ("<%"  . mmm-code-submode-face))
    :front "<%[#=]?"
    :back "%>"
    :insert ((?% erb-code       nil @ "<%"  @ " " _ " " @ "%>" @)
             (?# erb-comment    nil @ "<%#" @ " " _ " " @ "%>" @)
             (?= erb-expression nil @ "<%=" @ " " _ " " @ "%>" @)))))

(add-to-list 'mmm-mode-ext-classes-alist '(html-mode nil fancy-html)) 
```

尽管按照说明进行了顺利的安装过程，但我还没有能够突出显示以在我的 erb 文件中工作。如果这很重要，我正在运行 emacs 24。所以我按照下载中的说明进行操作。之后我将文件夹放在了我的 .emacs.d 文件夹中。我可以访问 Mx 中的 mmm 模式的东西。我只是没有突出显示我的模式，也找不到对声明模式的任何引用。

PS：旁注我无法坚持我的zenburn主题，但那是另一回事。

编辑：我所指的“说明”位于[此](http://groups.google.com/group/emacs-on-rails/browse_thread/thread/7b5d82d94bf0106e/0397a909fae76ee9)链接以及下载中包含的 targz 中的安装文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T14:12:31.517

不幸的是，Emacs 没有好的规范的多模式编辑故事。sanityinc (Steve Purcell) 在这里为 Emacs 24 修补了 MMM 模式：[https ://github.com/purcell/mmm-mode](https://github.com/purcell/mmm-mode)

他的配置在这里：[https ://github.com/purcell/emacs.d](https://github.com/purcell/emacs.d)

作为`init-ruby-mode.el`和`init-mmm.el`

但这远非理想（不支持缩进，仅突出显示特殊区域。）

其他人对 nxhtml 很幸运。

编辑：添加指向 sanityinc 配置的指针

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T14:21:28.670

An update on the situation:

1) The highlighting problems should be fixed now.

2) To get smart indentation, see `mmm-erb.el` in [https://github.com/purcell/mmm-mode](https://github.com/purcell/mmm-mode) and the instructions in its header.

# c# - 对数组中的 x/n 元素进行排序的最有效方法 - .NET

> ID：10859776
> 
> 赞同：0
> 
> 时间：2012-06-02T04:25:32.097
> 
> 标签：c#, .net, algorithm, sorting

我有一组对象，它们在上次更新时都有时间戳标记。我想获得只有最近更新的项目的数组子集。我将从 50 到 100 的数组中仅检索 5 个元素，性能是我的首要任务，因此我建议使用其中一种类方法对整个数组进行排序。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:32:54.860

一旦您选择了所需数量的元素，我将使用[插入排序并中断。](http://en.wikipedia.org/wiki/Insertion_sort)该解决方案具有 O(k*n) 复杂度，其中 k 是要提取的元素的数量。

还有一些算法可以在 O(n) 中找到未排序数组中的第 K 个最大元素

[如何在 O(n) 中找到长度为 n 的未排序数组中的第 k 个最大元素？](https://stackoverflow.com/questions/251781/how-to-find-the-kth-largest-element-in-an-unsorted-array-of-length-n-in-on)

一旦你找到了第 K 个最大的元素 X，你就可以遍历数组并选择所有大于 X 的元素。你可以保证恰好有 k-1 个元素优于 X。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:40:44.327

如果您只有 100 个元素，那么我只需对它们进行排序。否则，我会使用基于堆的优先级队列实现。O(n) 创建，从那时起的每个插入/删除都有与之相关的 O(logn) 成本。

# c++ - 二叉搜索树，不能遍历

> ID：10859780
> 
> 赞同：0
> 
> 时间：2012-06-02T04:26:16.980
> 
> 标签：c++, g++

请参阅下面的 BST 代码。它只输出“5”。我做错了什么？

```
#include <iostream>

class bst {
 public:
  bst(const int& numb) : root(new node(numb)) {}

  void insert(const int& numb) {
    root->insert(new node(numb), root);
  }

  void inorder() {
    root->inorder(root);
  }

 private:
  class node {
   public:
    node(const int& numb) : left(NULL), right(NULL) {
      value = numb;
    }

    void insert(node* insertion, node* position) {
      if (position == NULL) position = insertion;
      else if (insertion->value > position->value)
        insert(insertion, position->right);
      else if (insertion->value < position->value)
        insert(insertion, position->left);
    }

    void inorder(node* tree) {
      if (tree == NULL)
        return;
      inorder(tree->left);
      std::cout << tree->value << std::endl;
      inorder(tree->right); 
    }
  private:
    node* left;
    node* right;
    int value;
  };

  node* root;
};

int main() {
  bst tree(5);
  tree.insert(4);
  tree.insert(2);
  tree.insert(10);
  tree.insert(14);
  tree.inorder();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:35:33.807

使用参考：

无效插入（节点*插入，节点* &位置）

无效中序（节点* &tree）{

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T04:41:02.260

这是因为您从未设置 的`left`和`right`字段的值`root`。

对于给定的节点，您必须在某处说`n`：

```
n->left = ...
n->right = ... 
```

你从来没有这样做过。所以你最终得到了一个节点树。您的根有两个空子。

您也可以对此偷偷摸摸：如果您按照@user1431015 的建议进行操作，并通过引用传递子指针，那么对引用参数 ( `position`) 的赋值就可以解决问题。正如您所做的那样，通过值传递它们只会分配给局部变量，而不是树本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T04:41:12.837

在大多数情况下，您的插入永远不会做任何事情。递归的基本情况是：

```
void insert(node* insertion, node* position) {
     if (position == NULL) position = insertion; 
```

但是所有的“位置”都是局部范围的指针值。一旦你的函数退出，分配给它就没有效果了。

您需要做的是使位置参数成为对指针的*引用。*换句话说，使它成为 type `node*&`。然后，在您退出该功能后，分配将保持不变。

# c# - 将线性回归方程正确转换为 C#

> ID：10859782
> 
> 赞同：1
> 
> 时间：2012-06-02T04:26:31.430
> 
> 标签：c#, statistics

我试图在 C# 中复制这个等式：Slope(b) = (NΣXY - (ΣX)(ΣY)) / (NΣX2 - (ΣX)2) 但我遇到了以下问题：

如果我取 X = 1 + 2 + 3 + 4 + 5 的平均值和 Y = 5 + 4 + 3 + 2 + 1 的平均值，即使它明显在倒计时，它也会给我一个正斜率。如果我将相同的数字放入此计算器：[http ://www.easycalculation.com/statistics/regression.php](http://www.easycalculation.com/statistics/regression.php)

它在具有相同数据的链接计算器中给了我一个负斜率。我正在尝试缩小原因，以下是从方程式到 C# 代码的正确翻译：

斜率(b) = (NΣXY - (ΣX)(ΣY)) / (NΣX2 - (ΣX)2)

至

斜率 (m) = ((x * avgX * avgY) - (avgX * avgY)) / ((x * Math.Pow(avgX, 2)) - Math.Pow(avgX, 2));

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T04:38:57.363

平均与它无关。Σ 表示 Sum(...)。它实际上应该是：

```
var sumX = pts.Sum(pt => pt.X);
var slope = (numberOfPoints * pts.Sum(pt => pt.X * pt.Y) -
             sumX * pts.Sum(pt => pt.Y)) /
            (numberOfPoints * pts.Sum(pt => pt.X * pt.X) -
             sumX * sumX) 
```

ΣXY 并不意味着 Sum(x) * Sum(y)。但它的意思是 Sum(x * y)，这是不同的。

ΣX2 不是 Sum(x) ^ 2。而是 Sum(x ^ 2)，这也是不同的。

ΣXY = Σ(XY) != ΣX * ΣY

这就是你的错误的真正来源。

除了这个和平均与总和的术语，你离答案不远了。

# c# - 网站拼写检查 API

> ID：10859783
> 
> 赞同：2
> 
> 时间：2012-06-02T04:26:34.083
> 
> 标签：c#, javascript, .net, web-services, api

是否有可用的 API 允许我们发布一个单词并接收一个布尔结果，基于它是真还是假/正确与否？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T04:29:48.703

我不知道是否有您想要的东西*，*但是您查看了[dictionary.com 的 API](http://developer.dictionary.com/)吗？

# python - 使“导入 ODBC.Windows”在 Python 中工作所需的最低要求

> ID：10859788
> 
> 赞同：0
> 
> 时间：2012-06-02T04:28:13.783
> 
> 标签：python, odbc

我继承了一些遗留代码，此时我只需要让它工作 - 只有它有这个代码：

```
import ODBC.Windows, os
DBconn = ODBC.Windows.connect("DRG3","sa","")
cursor = DBconn.cursor() 
```

我已将 pyODBC、pyWin32 和 mxODBC 添加到我的 Python 2.7 安装中，但仍然没有任何效果。这似乎是 mxODBC 代码，但它们的安装说明含糊不清，而且现在看起来像是付费产品（尽管大约在 2001 年编写此代码时可能不是）。即使在安装之后，在我将相关文件从 Python27\Lib\site-packages\mx\mxODBC\ 复制到 Python27\Lib 之前，也没有任何变化，即使在反复寻找所需文件并将它们添加到 \Lib 之后，我终于到了“没有名为 Windows 的模块”。

底线是，我希望这能以最少的努力联系起来，这样我就可以继续前进。我以前从未使用过python，所以我会很感激任何帮助。我不承诺使用 mxODBC，但如果我使用其他东西，我需要知道将代码更改为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:02:50.453

首先，很抱歉，这必须是您对 Python 的介绍。被扔进深渊并不好玩。话虽如此，我有一些评论希望对您有所帮助。

1.  您尝试运行的程序是*旧的*。您提到了 2001 年（在我的脑海中让人联想到石器时代的人们），所以这将是 Python 2.0 或 2.1。现在，我不太关心语言本身，因为保持核心语言和标准库向后兼容是维护者的主要优先事项，但对于应用程序需要的任何其他库可能并非如此。API 可以在 11 年内发生很大变化，一些库可能会被完全放弃（这可能意味着有更好的替代方案，但仍然如此）。我在这里要说的是，您*可能*需要在这里耐心等待。

2.  如果这个程序真的使用 mxODBC 作为它的数据库连接器（而且看起来确实是这样），请注意它有自己的一些依赖项。（参见[Egenix](http://www.egenix.com/products/python/mxODBC/)网站）。顺便说一句，据我所知，mxODBC 一直是商业产品，尽管确切的许可可能已经改变。

3.  另外，我*认为*导入语句应该是：

    ```
    import mx.ODBC.Windows, os 
    ```

    这意味着连接语句应为：

    ```
    mx.ODBC.Windows.connect("DRG3","sa","") 
    ```

4.  像你一样在 \Lib 目录中移动 Python 文件可能会破坏一些东西。您可能想要撤消该操作。

5.  我也有点担心您要连接的数据源。如果它真的是 ODBC，你可能会在设置或让它工作时遇到问题，但这取决于你运行的 Windows 的风格。很长一段时间以来，Microsoft 一直在弃用 ODBC，而 64 位 Windows 确实在这里破坏了一些东西。最近，他们似乎又回到了这一点，但我不确定到目前为止究竟是什么结果。

6.  如果由于某种原因 mxODBC 对您不起作用，请尝试**pyodbc**。您需要构建一个正确的连接字符串才能使其正常工作，但是互联网上有足够的示例可以帮助您入门。

我个人会选择列表中的最后一个选项，但这只是因为我对 pyodbc 有过一些很好的经验，而对 mxODBC 完全没有经验。俗话说：您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:10:43.653

你可以用 pyodbc 试试这个：

```
import pyodbc
DBconn = pyodbc.connect("DSN=DRG3;UID=sa;PWD=")
cursor = DBconn.cursor() 
```

# c++ - 这很快：通过函数返回值或将值保存在参数/参数中

> ID：10859792
> 
> 赞同：1
> 
> 时间：2012-06-02T04:29:07.903
> 
> 标签：c++, c, function

有人请告诉我以下哪一项更快，为什么？

```
int add(int a, int b){
     return a+b;
} 
```

或者

```
void add(int a, int *b){
     *b = a+(*b);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T04:31:42.687

很有可能函数是*内联*的，并且两者都会产生相同的生成代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T06:22:28.583

您不应该试图通过查看代码来猜测哪个更快，而应该分析正在考虑的选项以查看一个是否比另一个更快，以及它是否真的有所作为。现在关于您的示例，我认为按值返回根本没有问题，因为现在大多数编译器都执行[返回值和命名返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)，它们是[复制](http://en.wikipedia.org/wiki/Copy_elision)省略的形式。最重要的是，C++11 引入了移动语义，这意味着在适用的情况下，数据从临时“移动”到目标。所以事实上，按值返回可能会更快，因为您不必检查输入。

有关按值*传递*的相关讨论，请参见[此处](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)，有关相关问题，请参见[此处](https://stackoverflow.com/questions/10553091/what-is-the-best-way-to-return-string-in-c/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T04:37:21.653

返回值不太可能比保存值慢，因为值通常在寄存器中返回（通常是累加器，如果 CPU 有一个并且返回值适合）。

# jquery - jQuery 悬停 DIV - 如果它们悬停在 DIV 本身上，则保持活动状态

> ID：10859797
> 
> 赞同：0
> 
> 时间：2012-06-02T04:29:52.133
> 
> 标签：jquery, html

我有一个 DIV，当图像悬停时会打开。当用户离开图像时，div 会在超时后消失。如果用户将鼠标悬停在 DIV 本身上，我怎样才能使 DIV 保持活动状态？那么只要用户在图像上或 DIV 本身上，DIV 就会保持活动状态？

我正在使用以下内容：

```
$(document).ready(function() {
  $(".hover").hover(
  function(e){
    if ( $("#status").is(":hidden")) {
      var ref = $(this).attr("wsref");
      var url = "https://site/_ref/shop/_base/order_status.php?action=getstatus&ref="+ref+"&sid="+Math.random();
      $("#status").show();
      var height = $(".status").height();
      var width = $(".status").width();
      leftVal = e.pageX - width -10 + "px";
      topVal = e.pageY - height -10 + "px";
      $("#status").css({left:leftVal,top:topVal});
      $("#status").html("<div id='loading'></div>").load(url);
    }
  },
  function() {
    if ( $("#status").is(':visible')) {
      setTimeout('$("#status").hide()',0);
    }  
  });
}); 
```

HTML

```
<a href="#"><img class="hover" title="Order Received" name="Order Received" src="https://site/_ref/images/cart.png" wsref="002731"/></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:49:03.310

试试这个，这将在 div 悬停时清除超时：

```
$(document).ready(function() {
    var myTimeOut;
    $(".hover, #status").hover(
        function(e){
            if ( $("#status").is(":hidden")) {
                var ref = $(this).attr("wsref");
                var url = "https://site/_ref/shop/_base/order_status.php?action=getstatus&ref="+ref+"&sid="+Math.random();
                $("#status").show();
                var height = $(".status").height();
                var width = $(".status").width();
                leftVal = e.pageX - width -10 + "px";
                topVal = e.pageY - height -10 + "px";
                $("#status").css({left:leftVal,top:topVal});
                $("#status").html("<div id='loading'></div>").load(url);
            }
            else {
                //clear timeout if div is hovered
                clearTimeout(myTimeOut);
            }
        },
        function() {
            if ( $("#status").is(':visible')) {
                myTimeOut = setTimeout('$("#status").hide()',0);
            }  
    });
}); 
```

# text - 如何制作包含代码的文档？

> ID：10859798
> 
> 赞同：0
> 
> 时间：2012-06-02T04:30:02.420
> 
> 标签：text, markup, code-snippets

我正在尝试制作一个文档，其中包含普通文本中的指令和代码片段交织在一起。

我希望它看起来像 javadoc 或 wiki 页面类型格式。

是否有像 LaTeX 这样的语言或执行此操作的编辑器？

谢谢

*如果有人可以改写这个问题以使其更相关，请执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:35:38.527

`org-mode`在emacs中有这个。更多信息请访问[http://orgmode.org/worg/org-contrib/babel/intro.html](http://orgmode.org/worg/org-contrib/babel/intro.html)

```
* Heading
  Some Text
  #+begin_src ruby
  require 'date'
  "This file was last evaluated on #{Date.today}"
  #+end_src 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:30:44.473

你在寻找降价编辑器吗？阅读有关[降价](http://en.wikipedia.org/wiki/Markdown)的维基百科条目，然后尝试此页面上显示的教程

[http://oscargodson.github.com/EpicEditor/](http://oscargodson.github.com/EpicEditor/)

在您的网页中嵌入免费的降价编辑器（假设您正在构建基于 Web 的系统）。

从维基百科页面：

代码

要包含代码（以等宽字体格式），您可以用反引号 (`) 包围内联代码，例如

里面有一些文字`some code`，

或将几行代码缩进至少四个空格，如下所示：

```
line 1 of code
line 2 of code
line 3 of code 
```

后一个选项使 Markdown 保留所有空格——这与通常的行为相反，后者通过删除换行符和多余的空格，会破坏缩进和代码布局。

# java - 在java中为负数创建位数组

> ID：10859806
> 
> 赞同：0
> 
> 时间：2012-06-02T04:31:47.937
> 
> 标签：java, negative-number

给定一个数字，我需要创建一个位数组。`value`并且`width`数量是已知的。对于正数，我这样做了：

```
int[] createbitarr(int value, int width)
{
    int _val = value;
    int bitarr[]=new int[width];
    for (int i=0;value>0;i++)
    {
    bitarr[bitarr.length-i-1]=value%2;
    value=value/2;
    }
    value=_val;
    return bitarr;
} 
```

这仅在值为正时才有效。如果值为负，我如何创建位数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:44:34.807

好吧，*最简单*的方法是

```
int x; // value 
for (int i = 0; i < 32; i++)
  array[i] = (x & (1 << i)) != 0; 
```

# perl - perl hashref/ perl 语法

> ID：10859819
> 
> 赞同：4
> 
> 时间：2012-06-02T04:35:04.827
> 
> 标签：perl, hash, dbi

今天传递的这段代码的变体（由 perl 编码器编写），令人困惑：

```
 my $k = {3,5,6,8};
   my $y = {%$k}; 
```

为什么？那有什么作用？这似乎与此相同：

```
 my $y = $k; 
```

上下文在使用 dbi 模块的调用中：

```
 while (my $x = $db->fetchrow_hashref )
               {  $y{something} = {%$x};  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T04:41:36.383

不同之处在于它在不引用相同内存的情况下**克隆数据结构。**

例如：

```
use strict;
use warnings;
use Data::Dumper;

my $h={'a'=>1,'b'=>2};
my $exact_copy=$h; #$exact_copy references the same memory as $h
$h->{b}++; #$h maps b to 3

print Dumper($exact_copy) . "\n"; #a=>1,b=>3

my $clone={%$h}; #We dereference $h and then make a new reference
$h->{a}++; #h now maps a to 2

print Dumper($clone) . "\n"; #a=>1,b=>3 so this clone doesn't shadow $h 
```

顺便说一句，使用所有逗号（如`my $k = {3,5,6,8}`）手动初始化哈希是非常非常难看的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:03:53.793

`{ }`，在这种情况下，是哈希构造函数。它创建一个新的散列并返回对它的引用。所以

比较

```
my $k = { a => 4 };
my $y = $k;
$k->{a} = 5;
print $y->{a};   # 5 
```

和

```
my $k = { a => 4 };
my $y = { %$k };
$k->{a} = 5;
print $y->{a};   # 4 
```

# php - 使用 apps.facebook.com 作为 URL 时的 Facebook 身份验证错误

> ID：10859824
> 
> 赞同：-1
> 
> 时间：2012-06-02T04:36:08.337
> 
> 标签：php, facebook, facebook-graph-api, iframe, facebook-authentication

我正在尝试使用 Facebook 身份验证登录我的网站，它工作正常。但是，当我使用 [https://apps.facebook.com/myApp](https://apps.facebook.com/myApp)访问应用程序时，我会收到错误消息

> 状态不匹配。你可能是 CSRF 的受害者

这是我从 facebook 使用的代码，我认为有问题

> $我的网址

```
 <?php 

   $app_id = "YOUR_APP_ID";
   $app_secret = "YOUR_APP_SECRET";
   $my_url = "https://www.example.com/login.php";

   session_start();
   $code = $_REQUEST["code"];

   if(empty($code)) {
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'];

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }

   if($_REQUEST['state'] == $_SESSION['state']) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $graph_url = "https://graph.facebook.com/me?access_token=" 
       . $params['access_token'];

     $user = json_decode(file_get_contents($graph_url));
     echo("Hello " . $user->name);
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:25:26.063

你真的应该把 facebook 为 FTP 提供的 SDK 拿出来。然后，您无需重新创建任何图形调用，因为它们都已为您处理。

但是有两个问题：

1.  您需要在登录调用中对整个返回 URL 进行编码，即

    &redirect_uri=" . urlencode($my_url . "&state=" . $_SESSION['state']);

2.  如果要将数据传递到 iFrame，则需要将其发送到名为“app_data”的参数中 - 所有其他参数都将被删除。此 app_data 在“签名请求”中发送，因此您需要解码签名请求。详细信息[http://developers.facebook.com/docs/authentication/signed_request/](http://developers.facebook.com/docs/authentication/signed_request/)（再次使用 facebook SDK，因为它可以轻松处理签名请求！）。

# jboss - 如何找出 JBoss AS 7 版本？

> ID：10859828
> 
> 赞同：0
> 
> 时间：2012-06-02T04:36:56.123
> 
> 标签：jboss, jboss7.x, java-7

我能够使用`standalone.bat --version`从命令提示符获取 JBoss7 版本；但是，当与安装程序集成时，JBoss 总是崩溃。

**在JBoss 4.x**早期，我可以通过以下方式找到 JBoss 版本

```
java -cp %JBOSS_HOME%/run.jar --version 
```

（类似的东西）。

我想知道是否有类似的方法来找出**JBoss 7.x**版本？

规格：JBoss AS 7.1.2，JDK1.7.0_02

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:26:55.773

试试`%JBOSS_HOME%\standalone.bat --version`。这似乎对我有用。

# .net - 为什么第一个 WCF 客户端调用很慢？

> ID：10859832
> 
> 赞同：16
> 
> 时间：2012-06-02T04:39:29.393
> 
> 标签：.net, wcf, performance, .net-4.0, basichttpbinding

我试图弄清楚为什么客户端应用程序启动后的第一个 WCF 调用与第二个相比需要更多的时间。

我做了什么来测试：

1.  实现了简单的自托管 WCF 服务器和控制台客户端。
2.  **服务器已预热**- 我在运行测试之前运行它并多次调用方法。
3.  绑定是`basicHttpBinding`为了减少网络和安全开销。
4.  测试场景 - 启动控制台客户端应用程序，连续进行两个相同的 WCF 服务调用。

在我的测试中，我看到第一次调用约 700 毫秒，第二次调用约 3 毫秒。

对于 JIT 编译器来说，几乎一秒钟的时间似乎太多了。如果将这段时间用于初始化一些复杂的基础架构`ObjectContext`，例如 Entity Framework，我会接受，但我的代码非常简单并且代理类已经编译。

我也试过`netNamedPipeBinding`绑定。结果证明了模式 - 第一次调用需要约 800 毫秒，第二次调用需要约 8 毫秒。

如果有人能解释为什么第一次服务调用需要这么多时间，将不胜感激。

在 Win 7 64 位中测试。

我的实现如下。

合同：

```
[ServiceContract]
public interface ICounter
{
        [OperationContract]
        int Add(int num);
} 
```

服务实施：

```
public class CounterService: ICounter
{
        private int _value = 0;

        public int Add(int num)
        {
            _value += num;
            Console.WriteLine("Method Add called with argument {0}. Method  returned {1}", num, _value);
            return _value;
        }
} 
```

服务器实现：

```
class Program
{
    static void Main(string[] args)
    {
        Uri baseAddress = new Uri("http://localhost:8080/Service");

        // Create the ServiceHost.
        using (ServiceHost host = new ServiceHost(typeof(CounterService), baseAddress))
        {
            host.Open();

            Console.WriteLine("The service is ready at {0}", baseAddress);
            Console.WriteLine("Press <Enter> to stop the service.");
            Console.ReadLine();

            // Close the ServiceHost.
            host.Close();
        }
    }
} 
```

服务器配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="Server.CounterService">
        <endpoint address="base" binding="basicHttpBinding" name="baseDefault"
          contract="Contract.ICounter" />
        <endpoint address="net.pipe://localhost/Service/netNamedPipe"
          binding="netNamedPipeBinding" name="netNamedPipeDefault" contract="Contract.ICounter" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

客户端实现（`CounterProxy`从服务参考生成）：

```
Stopwatch stopWatch = new Stopwatch();
stopWatch.Start();

using (var proxy = new CounterProxy.CounterClient(_endpointConfigurationName))
{
    output = proxy.Add(1);
}

stopWatch.Stop();
// Get the elapsed time as a TimeSpan value.
TimeSpan ts = stopWatch.Elapsed; 
```

包含该代码的函数连续调用两次。

客户端配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <client>
      <endpoint address="http://localhost:8080/Service/base" binding="basicHttpBinding"
          contract="CounterProxy.ICounter"
          name="baseDefault" />
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T05:03:19.550

通常第一次调用会花费更多时间，因为在该调用`Channel Factory`中实例化并准备好进行通信，这会花费时间。创建的`Channel Factory`将被缓存并在后续调用中重用，因此时间会更少。

[http://social.msdn.microsoft.com/Forums/en/wcf/thread/43f89088-546b-46b0-adf8-214deb1741bd](http://social.msdn.microsoft.com/Forums/en/wcf/thread/43f89088-546b-46b0-adf8-214deb1741bd)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-15T03:39:23.317

如果您调用 WCF 服务的频率低于 15 秒（我们观察到在我们的应用程序中需要等待大约 20 秒），此 Microsoft 博客似乎可以解释您的问题：http: [//blogs.msdn.com/b/wenlong /archive/2010/02/11/why-does-wcf-become-slow-after-being-idle-for-15-seconds.aspx](http://blogs.msdn.com/b/wenlong/archive/2010/02/11/why-does-wcf-become-slow-after-being-idle-for-15-seconds.aspx)

该文章还链接到此条目，其中提到了 SetMinThreads() 的修复，这似乎也是一个促成问题：http: [//blogs.msdn.com/b/wenlong/archive/2010/02/11/why-are- wcf-responses-slow-and-setminthreads-does-not-work.aspx](http://blogs.msdn.com/b/wenlong/archive/2010/02/11/why-are-wcf-responses-slow-and-setminthreads-does-not-work.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T04:43:20.807

我有类似的问题。所以我们实际上做了什么，我们编写了每隔一段时间调用 WCF 服务的服务。我知道这不是一个优雅的解决方案，但它正在工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-04T09:27:47.743

当我第一次创建我的服务代理实例时，我看到了 30 秒范围内的延迟，我知道这一定与某种网络超时有关。

最后对我来说，它实际上是检查被公司代理（是的 Websense）阻止或挫败的证书吊销列表，如下所示：[WCF 服务启动太慢？您是否考虑过 CRL 检查？](https://blogs.msdn.microsoft.com/andreal/2008/07/18/wcf-service-startup-too-slow-have-you-thought-to-crl-check/).

为了将来参考，如果链接失效，它归结为将以下内容添加到客户端配置中：

```
<configuration>
  <runtime>
    <generatePublisherEvidence enabled=“false”/>
  </runtime>
</configuration> 
```

# java - 如何在运行时获取算术运算符？

> ID：10859834
> 
> 赞同：1
> 
> 时间：2012-06-02T04:40:07.130
> 
> 标签：java, arithmetic-expressions

如何在 Java 运行时获取算术运算符？假设我有价值观

*   `ADD`它应该添加数字
*   `MUL`那么它应该乘以这个数字

例如

```
 public calculate(int x, String str){
   while(str.equals("some value")){
     If( str.equals("ADD"))
        // it should return me something like x+
     if( str.equals("MUL"))
        it return me something like x*
    }
    if( str.equals("FINAL"))
        it should return me x+x*x

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T07:04:40.340

您需要的不是运行时元编程，而是一流的函数。

以下代表一等函数，分别为 1 和 2。

```
abstract class UnaryFunction<A, B> {
  public abstract B apply(A a);
}

abstract class BinaryFunction<A, B, C> {
  public abstract C apply(A a, B b);
} 
```

为了简单起见，让我们使用上述类的特殊版本。

```
abstract class UnaryOperation {
  public abstract int apply(int a);
}

abstract class BinaryOperation {
  public abstract int apply(int a, int b);
} 
```

现在构建所需算术运算的字典。

```
Map<String, BinaryOperation> ops = new HashMap<String, BinaryOperation>();
ops.put("ADD", new BinaryOperation() {
  public int apply(int a, int b) {
    return a + b;
  }
});
ops.put("MUL", new BinaryOperation() {
  public int apply(int a, int b) {
    return a * b;
  }
});
// etc. 
```

添加部分应用于`BinaryOperation`一个参数的方法。

```
abstract class BinaryOperation {
  public abstract int apply(int a, int b);

  public UnaryOperation partial(final int a) {
    return new UnaryOperation() {
      public int apply(int b) {
        return BinaryOperation.this.apply(a, b);
      }
    };
  }
} 
```

现在我们可以编写你的`calculate`方法了。

```
public UnaryOperation calculate(int x, String opString) {
  BinaryOperation op = ops.get(opString);
  if(op == null)
    throw new RuntimeException("Operation not found.");
  else
    return op.partial(x);
} 
```

采用：

```
UnaryOperation f = calculate(3, "ADD");
f.apply(5); // returns 8

UnaryOperation g = calculate(9, "MUL");
f.apply(11); // returns 99 
```

上述解决方案中使用的抽象，即第一类函数接口和部分应用程序，都在[这个](http://functionaljava.org/)库中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T04:50:32.967

```
public class Calculator {
    public static enum Operation {ADD, MUL, SUB, DIV};
    private int x; // store value from previous operations

    public void calculate(int x, Operation operation) {
        switch(operation) {
        case ADD:
            this.x += x;
            break;
        case MUL:
            this.x *= x;
            break;
        case SUB:
            this.x -= x;
            break;
        case DIV:
            this.x /= x;
            break;
        }
    }

    public int getResult() {
        return this.x;
    }
} 
```

要在代码的其他地方使用它：

```
public static void main(String[] args) {
    Calculator c = new Calculator();
    c.calculate(4, Calculator.Operation.ADD);
    // Other operations
    c.getResult(); // get final result
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T04:45:11.390

假设您只是尝试 add 和 multiply `x`，只需执行以下操作：

```
public int calculate(int x, String str) {
    // while(true) is gonna get you into some trouble
    if( str.equals("ADD")) {
        return x + x;
    }
    else if( str.equals("MUL")) {
        return x * x;
    }
    else
        return x; // not sure what you want to do in this case
} 
```

# sql-server-2008 - 带有不可打印字段终止符的 BCP

> ID：10859842
> 
> 赞同：0
> 
> 时间：2012-06-02T04:42:04.327
> 
> 标签：sql-server-2008, bcp

尝试使用 BCP 从 Apple导入[EPF 文件。](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-enterprise-partner-feed.html)Apple 使用字符`\1`和`\2`作为字段和行终止符。不幸的是，这些似乎不支持作为 BCP / BULK INSERT[字段终止符](http://msdn.microsoft.com/en-us/library/aa196735%28v=sql.80%29.aspx)，来自文档：

> 注意 只有 t、n、r、\ 和 0 字符与反斜杠转义字符一起使用以生成控制字符。

我可以使用 BCP 和 BULK INSERT 来导入文件吗？（除了编写一个实用程序来自己处理文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:53:27.400

因为`BULK INSERT`您可以使用动态查询来解决此限制。在这个例子中`fieldterminator`是`CHAR(15)`：

```
DECLARE @SQL NVARCHAR(4000) = 
'bulk insert MyTable
from ''C:\spaced.txt''
with (
    firstrow=2
    , rowterminator=''\n''
    , fieldterminator='''+CHAR(15)+'''
)'
EXEC SP_EXECUTESQL @SQL; 
```

# iphone - 放大时裁剪 UIView

> ID：10859844
> 
> 赞同：0
> 
> 时间：2012-06-02T04:42:17.873
> 
> 标签：iphone

我有一个自定义 UIView 绘制一些数据和另一个更详细的视图绘制第一个视图的一些组件。我想要做的是在一个手势之后，放大，隐藏第一个视图，然后显示第二个视图，为用户提供他们正在放大的上下文。

我想我会从做这样的事情开始：

```
CGAffineTransform zoomTransform = CGAffineTransformMakeScale(2, 2);
[UIView animateWithDuration:2 animations:^{
    self.chromoMap.transform = zoomTransform;        
}]; 
```

它确实通过缩放 UIView 来放大该区域。但是，我不希望我的 UIView 实际增长。如果我的 CGRect 是 {0, 0}, {100, 100}。我希望 UIView 的框架保持不变，但只是将其中的内容缩放 2 以提供缩放效果。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:35:02.060

看来我可以在它上面添加另一个透明的 UIView 并启用剪辑子视图来获得这种效果。

# javascript - 如何在 Chrome 的控制台中调试此报告的错误？

> ID：10859846
> 
> 赞同：0
> 
> 时间：2012-06-02T04:42:50.860
> 
> 标签：javascript, debugging, google-chrome, console

Chrome 的控制台报告错误。

它列出了一个函数的名称——大概是发生错误的那个。

它不会破裂。它没有告诉我任何进一步的细节。我无法使用“暂停例外”按钮使其中断。

对于如何处理此错误，我是否缺少一些步骤？Chrome 打算让我做什么？这是一个经常被调用的函数，因此将其缩小到特定的用例是一个反复无常的问题。

“它实际上并没有更多帮助”是一个完全可以接受的答案。当我继续与这个神秘的控制台输出作斗争时，我只是希望得到证实或驳斥。

![这是展开的](../Images/207dd9e24a050a69c5449e33e9961429.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:54:06.880

尝试打破异常。您可以通过单击![带有暂停图标的停车标志](../Images/5a160968d0eecc9b91e7975a4c71f971.png)按钮来执行此操作。

它在三种颜色之间切换：黑色、蓝色和紫色。

当它为黑色时，它不会因异常而中断。
当它为蓝色时，它会打破所有异常。
当它是紫色时，它会在未捕获的异常上中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:36:12.253

虽然在大多数情况下，答案是打破例外，正如我在[之前的回答](https://stackoverflow.com/a/10860156/200291)中所展示的，但这里的情况似乎并非如此。

该问题可能是由某些导致生成堆栈跟踪失败的代码引起的。这是[V8 中相关代码](http://code.google.com/p/v8/source/browse/trunk/src/messages.js?r=11674#1048)的一部分：

```
function FormatStackTrace(error, frames) {
  var lines = [];
  try {
    lines.push(error.toString());
  } catch (e) {
    try {
      lines.push("<error: " + e + ">");
    } catch (ee) {
      lines.push("<error>");
    }
  }
  for (var i = 0; i < frames.length; i++) {
    var frame = frames[i];
    var line;
    try {
      line = frame.toString();
    } catch (e) {
      try {
        line = "<error: " + e + ">";
      } catch (ee) {
        // Any code that reaches this point is seriously nasty!
        line = "<error>";
      }
    }
    lines.push("    at " + line);
  }
  return lines.join("\n");
} 
```

如您所见，`<error>`如果它无法获取未捕获异常或堆栈帧的字符串表示形式，您将得到，然后当它尝试获取该字符串表示形式时*，*它会失败。例如，如果您运行以下代码：

```
function NastyException() {}
NastyException.prototype.toString = function() { throw this; };
throw new NastyException(); 
```

然后你会得到这个无用的错误：

```
Uncaught #<error> 
```

诚然，这不是您收到的错误，但也不是那么遥远。

# java - 向 HTTPS 发送 POST - 逻辑问题

> ID：10859851
> 
> 赞同：0
> 
> 时间：2012-06-02T04:43:44.850
> 
> 标签：java, http, post, stored-procedures, https

任何人都知道为什么我会收到此错误。我正在尝试发送 POST 请求，这是我收到的错误消息。

服务器响应：

```
Error while dispatching hrxml [ Server was unable to process request. --> Procedure or function 'sp__LogMessage' expects parameter '@pi_ClientID', which was not supplied.   at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at DispatchService.HRISMessageRouter.MessageRouter.Route(String HRXML)
   at DispatchService.DispatchMessage.Dispatch(String HRXML)] 
```

我的代码：

```
URL link = new URL("https://example.com/example.asp"); 
        HttpsURLConnection com = (HttpsURLConnection) link.openConnection();
                  String l;

        con.setRequestMethod("POST");
con.setDoInput(true); 
        con.setDoOutput(true);
        con.setRequestProperty("name", "rrrrr");
        con.setRequestProperty("pwd", "ffff");

        OutputStream os = con.getOutputStream();

        os.flush();

        InputStream is = con.getInputStream();

        BufferedReader rd = new BufferedReader(new InputStreamReader(is));

          StringBuffer r = new StringBuffer(); 

          while((l = rd.readLine()) != null) {

            r.append(l);

            r.append('\r');

          }

          rd.close();

          System.out.println("out "+ r.toString()); 
```

我已经尝试调试代码等，但仍然无法找到导致这种情况发生的可能原因。谁能帮我找出这个问题的原因和可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T04:53:03.890

错误信息是：

> 服务器无法处理请求。--> 过程或函数“sp__LogMessage”需要参数“@pi_ClientID”，但未提供该参数。

这看起来像服务器上的 SQL 存储过程。检查以确保为其提供了客户端 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:39:23.453

从堆栈跟踪来看：

1.  您的应用程序正在与 SOAP 服务通信
2.  SOAP 服务需要一个（XML 编码的）请求，其中包含一个不存在的参数。

但这与您的客户端代码正在执行的操作并不相符。事实上，您正在发送一个带有参数的 POST 请求，这将变成一个请求体，它可能被编码为`application/x-www-form-urlencoded`......而不是 XML。那是行不通的。

# iphone - dialogFeed facebook 中的图像更改

> ID：10859855
> 
> 赞同：0
> 
> 时间：2012-06-02T04:46:00.000
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api

如何为提要添加自己的图片。我在我的应用程序文件夹中有它。我必须提供我的图片而不是 @"http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png"。

```
- (void)apiDialogFeedUser {
    currentAPICall = kDialogFeedUser;
    SBJSON *jsonWriter = [[SBJSON new] autorelease];

    // The action links to be shown with the post in the feed
    NSArray* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       @"Get Started",@"name",@"http://m.facebook.com/apps/hackbookios/",@"link", nil], nil];
     NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];
     // Dialog parameters
      NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"I'm using the Hackbook for iOS app", @"name",
                               @"Hackbook for iOS.", @"caption",
                               @"Check out Hackbook for iOS to learn how you can make your iOS  apps social using Facebook Platform.", @"description",
                               @"http://m.facebook.com/apps/hackbookios/", @"link",
                               @"http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png", @"picture",
                               actionLinksStr, @"actions",
                               nil];

   HackbookAppDelegate *delegate = (HackbookAppDelegate *)[[UIApplication sharedApplication] delegate];
      [[delegate facebook] dialog:@"feed"
        andParams:params
        andDelegate:self];

 } 
```

我想把我的形象放在那里。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T11:21:57.630

'picture' 参数仅接受已托管图片的 url。

如果您想使用本地存储的图片，则需要先将其上传到服务器，然后在发布到提要时使用该 URL。

# java - Play framework 1.2.5 - 尝试将 Person 对象发布到控制器

> ID：10859857
> 
> 赞同：0
> 
> 时间：2012-06-02T04:46:12.250
> 
> 标签：java, jquery, json, controller, playframework-1.x

我可能会错过一些东西，因为我还没有完全理解一些基础知识。在我的控制器中，我有类似的东西

```
functiona(Person person){
System.out.println(p.firstName);
} 
```

该视图具有以下内容

```
$.post("/validatePerson",{person: [{name:"first",value:"last"}]},function(result){
alert('done');
} 
```

看起来好像信息正在传递，但未填充成员。我也尝试添加以下类型绑定器

```
@Global
public class PersonJsonObjectBinder implements TypeBinder<Person> {     
    @Override     
    public Person bind(String name, 
                        Annotation[] annotations, 
                        String value, Class actualClass, 
                        Type genericType) throws Exception 
                        {                               
                        return new Gson().fromJson(value, Person.class);
                        }
                    //return new JsonParser().parse(value) ;}
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:25:39.067

如果要直接绑定到控制器参数，则需要将 Person 数据作为请求 uri 的一部分传入。

```
$.post("/validatePerson?person.firstname=john&person.lastname=doe",function(result){
alert('done'); 
```

}

查看参数 person.firstname 如何匹配参数名称 person 和属性。

为了从 Json 绑定，您可以将主体作为 json 元素获取并使用 GSON 构建器进行反序列化。类似于以下内容

```
JsonElement jsonElement = new JsonParser().parse(body);
Person person = new GsonBuilder().create().fromJson(jsonElement,Person.class) 
```

再次，json 属性将需要匹配 Person 类的属性，例如

```
{person: [{firstname:"john",lastname:"doe"}]} 
```

# r - 如何在 R 中使用 xyz 不同的数据制作热图

> ID：10859858
> 
> 赞同：3
> 
> 时间：2012-06-02T04:46:17.083
> 
> 标签：r, graph, gnuplot, heatmap

我正在尝试[在 R 建议中使用 A 真实热图](https://stackoverflow.com/questions/8421536/a-true-heat-map-in-r)，但是出现错误：

> interp.old(x, y, z, xo = xo, yo = yo, ncp = 0, extrap = extrap,
> : x 和 y 的尺度太不相似

在代码行之后：

```
 s <- interp(x,y,z) 
```

我的数据被构建，期望在黑暗的连续背景中获得像线条一样的彩色热图，并且可以`GNUplot`使用`set pm3d map`和`set hidden3d`. 数据对应`y`于给定时间 ( `x`) 内的分子生产模型 ( )，出现频率用 表示`z`。它看起来像这样：

```
1.000000000000e+00  1e-8    0

1.000000000000e+00  5e-8    0

1.000000000000e+00  1e-7    5

1.000000000000e+00  5e-7    0

1.000000000000e+00  1e-6    0

1.000000000000e+00  5e-6    0

1.000000000000e+00  1e-5    0

1.000000000000e+00  5e-5    0

1.000000000000e+00  1e-4    0

1.000000000000e+00  5e-4    0

1.000000000000e+00  1e-3    0

1.000000000000e+00  5e-3    0

1.000000000000e+00  1e-2    0

1.000000000000e+00  5e-2    0

1.000000000000e+00  1e-1    0

1.000000000000e+00  5e-1    0

1.000000000000e+00  1e+1    0

1.000000000000e+00  5e+1    0

1.000000000000e+00  1e+2    0

1.000000000000e+00  5e+2    0

1.000000000000e+00  1e+3    0

1.000000000000e+00  5e+3    0

1.000000000000e+00  1e+4    0

1.000000000000e+00  5e+4    0

1.000000000000e+00  1e+5    0

1.000000000000e+00  5e+5    0

1.000000000000e+00  1e+6    0

1.000000000000e+00  5e+6    0

1.000000000000e+00  1e+7    0

1.000000000000e+00  5e+7    0

1.000000000000e+00  1e+8    0

1.000000000000e+00  5e+8    0

2.000000000000e+00  1e-8    0

2.000000000000e+00  5e-8    0

2.000000000000e+00  1e-7    0

2.000000000000e+00  5e-7    5

2.000000000000e+00  1e-6    0

2.000000000000e+00  5e-6    0

2.000000000000e+00  1e-5    0

2.000000000000e+00  5e-5    0

2.000000000000e+00  1e-4    0

2.000000000000e+00  5e-4    0

2.000000000000e+00  1e-3    0

2.000000000000e+00  5e-3    0

2.000000000000e+00  1e-2    0

2.000000000000e+00  5e-2    0

2.000000000000e+00  1e-1    0

2.000000000000e+00  5e-1    0

2.000000000000e+00  1e+1    0

2.000000000000e+00  5e+1    0

2.000000000000e+00  1e+2    0

2.000000000000e+00  5e+2    0

2.000000000000e+00  1e+3    0

2.000000000000e+00  5e+3    0

2.000000000000e+00  1e+4    0

2.000000000000e+00  5e+4    0

2.000000000000e+00  1e+5    0

2.000000000000e+00  5e+5    0

2.000000000000e+00  1e+6    0

2.000000000000e+00  5e+6    0

2.000000000000e+00  1e+7    0

2.000000000000e+00  5e+7    0

2.000000000000e+00  1e+8    0

2.000000000000e+00  5e+8    0

3.000000000000e+00  1e-8    0

3.000000000000e+00  5e-8    0

3.000000000000e+00  1e-7    0

3.000000000000e+00  5e-7    0

3.000000000000e+00  1e-6    5

3.000000000000e+00  5e-6    0

3.000000000000e+00  1e-5    0

3.000000000000e+00  5e-5    0

3.000000000000e+00  1e-4    0

3.000000000000e+00  5e-4    0

3.000000000000e+00  1e-3    0

3.000000000000e+00  5e-3    0

3.000000000000e+00  1e-2    0

3.000000000000e+00  5e-2    0

3.000000000000e+00  1e-1    0

3.000000000000e+00  5e-1    0

3.000000000000e+00  1e+1    0

3.000000000000e+00  5e+1    0

3.000000000000e+00  1e+2    0

3.000000000000e+00  5e+2    0

3.000000000000e+00  1e+3    0

3.000000000000e+00  5e+3    0

3.000000000000e+00  1e+4    0

3.000000000000e+00  5e+4    0

3.000000000000e+00  1e+5    0

3.000000000000e+00  5e+5    0

3.000000000000e+00  1e+6    0

3.000000000000e+00  5e+6    0

3.000000000000e+00  1e+7    0

3.000000000000e+00  5e+7    0

3.000000000000e+00  1e+8    0

3.000000000000e+00  5e+8    0

4.000000000000e+00  1e-8    0

4.000000000000e+00  5e-8    0

4.000000000000e+00  1e-7    0

4.000000000000e+00  5e-7    0

4.000000000000e+00  1e-6    0

4.000000000000e+00  5e-6    5

4.000000000000e+00  1e-5    0

4.000000000000e+00  5e-5    0

4.000000000000e+00  1e-4    0

4.000000000000e+00  5e-4    0

4.000000000000e+00  1e-3    0

4.000000000000e+00  5e-3    0

4.000000000000e+00  1e-2    0

4.000000000000e+00  5e-2    0

4.000000000000e+00  1e-1    0

4.000000000000e+00  5e-1    0

4.000000000000e+00  1e+1    0

4.000000000000e+00  5e+1    0

4.000000000000e+00  1e+2    0

4.000000000000e+00  5e+2    0

4.000000000000e+00  1e+3    0

4.000000000000e+00  5e+3    0

4.000000000000e+00  1e+4    0

4.000000000000e+00  5e+4    0

4.000000000000e+00  1e+5    0

4.000000000000e+00  5e+5    0

4.000000000000e+00  1e+6    0

4.000000000000e+00  5e+6    0

4.000000000000e+00  1e+7    0

4.000000000000e+00  5e+7    0

4.000000000000e+00  1e+8    0

4.000000000000e+00  5e+8    0 
```

第一个建议给了我一些丑陋的结果，类似于最初在[R 中的 A true heat map 中](https://stackoverflow.com/questions/8421536/a-true-heat-map-in-r)获得的结果，这是一个带有一些水平线的图，其中充满了不同灰度色调的点。第二个似乎崩溃了。我从中得到了这条消息：

```
>Traceback:
1: .Fortran("idsfft", as.integer(1), as.integer(ncp), as.integer(n),     as.double(x),  as.double(y), as.double(z), as.integer(nx),     as.integer(ny), x = as.double(xo), y = as.double(yo), z = zo,     integer((31 + ncp) * n + nx * ny), double(5 * n), misso = as.logical(misso),     PACKAGE = "akima")
2: interp.old(x, y, z, xo = xo, yo = yo, ncp = 0, extrap = extrap,     duplicate = duplicate, dupfun = dupfun)
3: interp(x, y, z)

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace 
```

我只是包含了更多数据以防万一。我以这种方式调用数据框中的列：

> coso <- read.table("/home/libertad/mygraphs/two/two_1_90/coso.txt", header = FALSE,sep = "\t")

```
>x <-coso[[1]]

>y <-coso[[2]] 
```

这是我在 GNUplot 中的图表之一，我希望用 R 得到更好的图表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T08:41:44.767

## 建议的解决方案

用于`scale()`将 x 和 y 转换为可比较的比例。

## 模拟

`fields`在您的问题中使用该软件包：

```
library(akima) 
library(fields) 

x <- rnorm(20, 4, 3)
y <- rnorm(20, 5e-5, 1e-5)
x <- scale(x) # comment out these two lines 
y <- scale(y) # to reproduce your error
z <- rnorm(20)

s <- interp(x,y,z)
image.plot(s) 
```

使用`ggplot2`，改编[自我在这里的其他答案](https://stackoverflow.com/a/10860335/1290420)：

```
library(akima) 
library(ggplot2) 

x <- rnorm(20, 4, 3)
y <- rnorm(20, 5e-5, 1e-5)
x <- scale(x) # comment out these two lines 
y <- scale(y) # to reproduce your error
z <- rnorm(20)

t. <- interp(x,y,z)
t.df <- data.frame(t.)

gt <- data.frame( expand.grid(X1=t.$x, 
                              X2=t.$y), 
                  z=c(t.$z), 
                  value=cut(c(t.$z), 
                            breaks=seq(min(z),max(z),0.25)))

p <- ggplot(gt) + 
    geom_tile(aes(X1,X2,fill=value)) + 
    geom_contour(aes(x=X1,y=X2,z=z), colour="black") 
p 
```

## 更正轴标签

在另一个问题中，还描述了在重新缩放之前用[原始数据的正确值标记轴的解决方案。](https://stackoverflow.com/q/10861278/1290420)这目前仅适用于`ggplot`.

# google-sheets - 简化并重新排列我的谷歌脚本以加快流程这通常卡在流程中间

> ID：10859859
> 
> 赞同：1
> 
> 时间：2012-06-02T04:46:48.377
> 
> 标签：google-sheets, google-apps-script

任何人都可以简化和重新排列我的脚本，使其运行得更快而不会卡住。该脚本用于从 4 个电子表格中提取电子表格数据并根据列标准删除空白行，该脚本运行良好，但需要很长时间，并且突然/经常中断进程，说电子表格页面需要刷新，从而停止整个过程。这应该遵循重新运行脚本。- 提前致谢。

我的脚本如下：

```
function myFunction() {
// spreadsheets key to extract data.
//Bhaskar      0AjkkHlm3kCphdFh3M2dtRDdoZHhWZlg5UzFjSWZFcVE
//RAmohan      0AjkkHlm3kCphdGFlNTVhSDc5VXVTeS0xc2ZISDRGZlE
//Krishnareddy 0AjkkHlm3kCphdEhDWEllalpoM3VmNE5weUNLZkd4TVE
//Suni          0AjkkHlm3kCphdFUxTXJlN3lGYkRMY2NXUUkzSTVfbEE

    var copieddata = SpreadsheetApp.openById('0AjkkHlm3kCphdFh3M2dtRDdoZHhWZlg5UzFjSWZFcVE').
                    getSheetByName('List').getDataRange().getValues();
                //getSheetByName('List').getRange('I6:AT500').getValues();      

    var s1 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
                SpreadsheetApp.setActiveSheet(s1);
            //getRange(StartingROWS(1,2,3,4,...),StartingCOLUMNS(A,B,C,D..),  

           s1.getRange(1,1,copieddata.length,copieddata[0].length).setValues(copieddata);

    //var col1count = SpreadsheetApp.getActiveSheet().getRange(1,1,copieddata.length,copieddata[0].length).getNumColumns();
    //var row1count = SpreadsheetApp.getActiveSheet().getRange(1,1,copieddata.length,copieddata[0].length).getNumRows();

SpreadsheetApp.flush(); //force the data to be written
// here ends sheet 1  -------

    var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    var numRows  = sheet.getLastRow(); 
    var datasheet  = sheet.getDataRange();
    var data = datasheet.getValues();

//Browser.msgBox(" data lenght -" + data.length + " rage is " + datasheet);

    for (var i = data.length; i > 0; --i){ 
        var ii=i-1;
        var row = data[ii]; 
        var name = row[6]; 
        var len = name.length;

        //Browser.msgBox("row number" + i + " ->" + row[10] + "<- its length =" + len);

        if(name.length!=3){ 
            //Browser.msgBox("delete ." + i);
            sheet.deleteRow(i);
        } 
   SpreadsheetApp.flush(); //force the data to be written
     } 
   SpreadsheetApp.flush(); //force the data to be written

// ------------------

    var lrange = SpreadsheetApp.getActiveSheet().getLastRow();

//Browser.msgBox("l range - " + lrange); 

    var copieddata = SpreadsheetApp.openById('0AjkkHlm3kCphdGFlNTVhSDc5VXVTeS0xc2ZISDRGZlE').
                    getSheetByName('List').getDataRange().getValues();

    var s1 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
                SpreadsheetApp.setActiveSheet(s1);

        s1.getRange((lrange+1),1,copieddata.length,copieddata[0].length).setValues(copieddata);

    //var col1count = SpreadsheetApp.getActiveSheet().getRange(1,1,copieddata.length,copieddata[0].length).getNumColumns();
    //var row1count = SpreadsheetApp.getActiveSheet().getRange(1,1,copieddata.length,copieddata[0].length).getNumRows();

SpreadsheetApp.flush(); //force the data to be written
// here ends sheet 2  -------

    var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    var numRows  = sheet.getLastRow(); 
    var datasheet  = sheet.getDataRange();
    var data = datasheet.getValues();

//Browser.msgBox(" data lenght -" + data.length + " rage is " + datasheet);

    for (var i = data.length; i > 0; --i){ 
        var ii=i-1;
        var row = data[ii]; 
        var name = row[6]; 
        var len = name.length;

        //Browser.msgBox("row number" + i + " ->" + row[10] + "<- its length =" + len);

        if(name.length!=3){ 
            //Browser.msgBox("delete ." + i);
            sheet.deleteRow(i);
        } 
   SpreadsheetApp.flush(); //force the data to be written
     } 

// ------------------

    var lrange = SpreadsheetApp.getActiveSheet().getLastRow();

//Browser.msgBox("l range - " + lrange); 

    var copieddata = SpreadsheetApp.openById('0AjkkHlm3kCphdEhDWEllalpoM3VmNE5weUNLZkd4TVE').
                    getSheetByName('List').getDataRange().getValues();

    var s1 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
                SpreadsheetApp.setActiveSheet(s1);

        s1.getRange((lrange+1),1,copieddata.length,copieddata[0].length).setValues(copieddata);

    //var col1count = SpreadsheetApp.getActiveSheet().getRange(1,1,copieddata.length,copieddata[0].length).getNumColumns();
    //var row1count = SpreadsheetApp.getActiveSheet().getRange(1,1,copieddata.length,copieddata[0].length).getNumRows();

SpreadsheetApp.flush(); //force the data to be written  
// here ends sheet 3  -------

    var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    var numRows  = sheet.getLastRow(); 
    var datasheet  = sheet.getDataRange();
    var data = datasheet.getValues();

//Browser.msgBox(" data lenght -" + data.length + " rage is " + datasheet);

    for (var i = data.length; i > 0; --i){ 
        var ii=i-1;
        var row = data[ii]; 
        var name = row[6]; 
        var len = name.length;

        //Browser.msgBox("row number" + i + " ->" + row[10] + "<- its length =" + len);

        if(name.length!=3){ 
            //Browser.msgBox("delete ." + i);
            sheet.deleteRow(i);
        } 
   SpreadsheetApp.flush(); //force the data to be written
     } 

// ------------------

    var lrange = SpreadsheetApp.getActiveSheet().getLastRow();

//Browser.msgBox("l range - " + lrange); 

    var copieddata = SpreadsheetApp.openById('0AjkkHlm3kCphdFUxTXJlN3lGYkRMY2NXUUkzSTVfbEE').
                    getSheetByName('List').getDataRange().getValues();

    var s1 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
                SpreadsheetApp.setActiveSheet(s1);

        s1.getRange((lrange+1),1,copieddata.length,copieddata[0].length).setValues(copieddata);

    //var col1count = SpreadsheetApp.getActiveSheet().getRange(1,1,copieddata.length,copieddata[0].length).getNumColumns();
    //var row1count = SpreadsheetApp.getActiveSheet().getRange(1,1,copieddata.length,copieddata[0].length).getNumRows();

SpreadsheetApp.flush(); //force the data to be written  
// here ends sheet 4  -------

    var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    var numRows  = sheet.getLastRow(); 
    var datasheet  = sheet.getDataRange();
    var data = datasheet.getValues();

//Browser.msgBox(" data lenght -" + data.length + " rage is " + datasheet);

    for (var i = data.length; i > 0; --i){ 
        var ii=i-1;
        var row = data[ii]; 
        var name = row[6]; 
        var len = name.length;

        //Browser.msgBox("row number" + i + " ->" + row[10] + "<- its length =" + len);

        if(name.length!=3){ 
            //Browser.msgBox("delete ." + i);
            sheet.deleteRow(i);
        } 
   SpreadsheetApp.flush(); //force the data to be written
     } 
} 
```

电子表格链接如下：[点击此处进入我的电子表格](https://docs.google.com/spreadsheet/ccc?key=0AjkkHlm3kCphdGtmOWxNNDhmM2h6ZTZKQlpsbVZUVUE)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T23:45:56.370

这是我的尝试：

```
function myFunction2() {
  var source = ['0AjkkHlm3kCphdFh3M2dtRDdoZHhWZlg5UzFjSWZFcVE',
                '0AjkkHlm3kCphdGFlNTVhSDc5VXVTeS0xc2ZISDRGZlE',
                '0AjkkHlm3kCphdEhDWEllalpoM3VmNE5weUNLZkd4TVE',
                '0AjkkHlm3kCphdFUxTXJlN3lGYkRMY2NXUUkzSTVfbEE'];
  var copied = [];
  for (var i = 0; i < source.length; i++) {
    copied = copied.concat(SpreadsheetApp.openById(source[i]).getSheetByName('List').getDataRange().getValues());
  }
  for (var j = 0; j < copied.length; j++) {
    if (copied[j][6].length != 3) {
      copied.splice(j, 1);
      j--;
    }
  }
  var sheet = SpreadsheetApp.getActive().getSheetByName('Sheet1');
  sheet.clearContents();
  sheet.getRange(1, 1, copied.length, copied[0].length).setValues(copied);
} 
```

在此我从四个电子表格创建一个大的 javascript 数组，从该数组中删除元素（“行”）（而不是删除电子表格本身中的行，我认为这是它缓慢的原因），清除目标工作表，并设置一次修改数组的值。

HTH亚当

# ipad - 如何使用modernizr检测iPad以进行自定义css

> ID：10859860
> 
> 赞同：4
> 
> 时间：2012-06-02T04:46:50.873
> 
> 标签：ipad, css, modernizr

我在 iPad 上有奇怪的网络布局视图，但在用户网络浏览器上它很好。我想使用modernizr作为我只想为iPad制作的自定义css的检测。

谢谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-18T13:52:51.693

这个问题已经有 1 年历史了，但我偶然发现了同样的问题：使用 Modernizr 检测 ipad……</p>

我从未见过 Modernizr 添加了 os-ipad 类……实际上要检测 iPad，您必须设置自定义测试，例如：

```
Modernizr.addTest('ipad', function () {
    return !!navigator.userAgent.match(/iPad/i);
}); 
```

所以，我很惊讶地看到先前的答案被接受为最佳答案……或者该选项已从当前的 Modernizr 构建中删除？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-28T14:00:05.117

我意识到这是一个较旧的线程 - 并且可能已经在其他地方进行了介绍。但是，我仍然设法到达这里，并没有得到满足我需求的好答案。

我最终发现可以满足我大部分一般需求的是 Modernizr html 类“触摸”。例如在桌面上，我使用一些“固定”背景图像。移动设备不太喜欢这样，所以...

在 scss 中：

```
html.touch {
   .element {
      background-attachment: scroll;
      background-size: cover;
   }
} 
```

我意识到这并不能完全回答 OP 专门针对 iPad 的问题，但这很可能至少会帮助一些与我有类似问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T07:49:14.763

这个答案不再有效。

自从我回答了这个问题后，Modernizr 发生了变化……

=====================

Modernizr 为 HTML 标签添加了一堆 CSS 选择器。

如果您使用的是 iPad，它会添加选择器“os-iPad”。

因此，您可以针对 iPad 相关的 CSS 为它们添加前缀：`html.os-iPad`

```
html.os-iPad body
{
    background-color: #FF0000;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-02T16:10:21.393

您可能希望为此使用 css 媒体查询。看看这里的少框架：http: [//lessframework.com/](http://lessframework.com/)

# c++ - 在一台机器上运行的进程如何使用 c/c++ 知道另一个进程是否在 linux 中的不同机器上运行？

> ID：10859863
> 
> 赞同：-1
> 
> 时间：2012-06-02T04:47:23.200
> 
> 标签：c++, linux, process, tail

我在一台机器上运行 process1 并生成一些日志文件。现在我想启动另一个进程，它可以在任何机器上想知道 process1 是否正在运行，并且如果它正在运行，它想在启动 process2 的终端上流式传输进程一生成的日志文件。

Process2 将按如下方式调用：process2 -dir "DirPath"。在这个 DirPath 中，进程 1 编写了一个文件，其中包含“进程 1 的 pid”、“进程 1 的主机名”和“进程 1 的日志文件”等信息。所以 process2 可以访问这个文件并拥有有关 process1 的所有信息。现在 process2 想知道 process1 当前是否正在运行 如果它正在运行，那么它需要将 process1 在 logfile 中写入的数据流式传输到启动 process2 的终端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:47:51.690

使用 ssh 登录到远程计算机并运行脚本以使用 ps 和 grep 命令检测进程是否正在运行，然后在知道路径时读取日志文件。如果您不想手动输入密码，您可以使用[此处提到的 ssh 密钥](http://www.thegeekstuff.com/2008/11/3-steps-to-perform-ssh-login-without-password-using-ssh-keygen-ssh-copy-id/)

# qt4 - Qt 中的回归在 4.7 和 4.8 之间

> ID：10859866
> 
> 赞同：0
> 
> 时间：2012-06-02T04:48:14.290
> 
> 标签：qt4, pyqt

这可能是 Qt4.7 和 Qt4.8 之间的回归。每个段落都应该在单独的行上，但是在 4.8 上它被破坏了。你知道一些解决方法吗？

```
#!/usr/bin/env python3

import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class CustomLabel(QLabel):
    def __init__(self, text):
        super(CustomLabel, self).__init__(text)
        self._text = text

    def paintEvent(self, event):
        brect = QRect()  #Qt.rect()
        painter = QPainter(self)
        painter.fillRect(brect, Qt.transparent)
        doc = QTextDocument(self)
        stylesheet = "*{color: " + painter.pen().color().name() + "; line-height:0.3; margin:0; padding:0;}"
        doc.setDefaultStyleSheet(stylesheet)
        doc.setUndoRedoEnabled(False)
        doc.setHtml(self._text)
        doc.setUseDesignMetrics(True)
        doc.drawContents(painter, QRectF())
        print(doc.toHtml())
        print(doc.toPlainText())

app = QApplication(sys.argv)
label = CustomLabel("<p><font style=\"font-size: 9px;\" color=\"#fffe51\">Text 2</font></p><p><font size=\"9px\" color=\"#aaaaaa\">Text 3</font></p>")
label.show()
label.resize(100, 100)
sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:54:07.053

您指定 a而不给出单位`line-height`。`0.3`文档[说明了有关长度单位](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#length)的内容：

> 一个数字，后跟一个测量单位。CSS 标准建议用户代理必须忽略具有非法值的声明。在 Qt 中，必须指定测量单位。为了与早期版本的 Qt 兼容，在大多数情况下，没有测量单位的数字被视为像素。

但是，它并没有确切说明在哪些上下文中它被解释为像素，而在哪些上下文中它不是。可能在`line-height`.

`line-heigth`是[最近添加的功能之一](http://qt.gitorious.org/qt/qt/merge_requests/2305)，因此与早期版本的兼容性在这里可能不被视为问题。

（实际上，我刚刚看到`line-height`样式表参考中甚至没有正式提及。）

# ruby-on-rails - Rails 在开发模式下不会在 Webrick 上提供静态内容

> ID：10859868
> 
> 赞同：0
> 
> 时间：2012-06-02T04:48:50.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, webrick

我一直在尝试几乎所有方法来让 rails/webrick 在开发模式下提供 html 文件，但是我不断收到以下错误：

没有路线匹配 [GET] "/public/index.html"

即使在设置**config.assets.enabled = true**之后也没有任何变化。运行 Rails 3.2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:58:55.830

从网站的角度来看，公共目录是您的根目录。例如：

```
/path_to_rails/public/index.html = http://localhost:3000/index.html
/path_to_rails/public/subdir/home.html = http://localhost:3000/subdir/home.html 
```

这假设您正在运行本地开发服务器`http://localhost:3000`

# javascript - 如果将前端代码分组有助于减少请求，为什么不在一个 html 文档上编写更多网站？

> ID：10859870
> 
> 赞同：5
> 
> 时间：2012-06-02T04:49:03.023
> 
> 标签：javascript

我想我要问的是，如果将 JavaScript 分组被认为是一种好的做法，那么为什么更多的网站不将 JavaScript 和 CSS 直接放在一个 HTML 文档中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T05:08:11.967

> 为什么没有更多的网站将 JavaScript 和 CSS 直接放在一个 HTML 文档中

**单个文件缓存。**

*   外部文件具有被缓存的优势。由于脚本和样式很少更改（静态）和/或在页面之间共享，因此最好将它们与页面分开以使页面更轻。

    与其下载 500kb 的嵌入 JS 和 CSS 的页面数据，不如加载 5kb 的页面，并从缓存中加载 495kb 的 JS 和 CSS - 节省 495kb 的带宽并避免额外的 2 个 HTTP 请求。

*   尽管您*可以*将 JS 和 CSS 嵌入到页面中，但页面很可能是动态的。这将使页面一直加载一个新副本，使每个请求都非常繁重。

**模块化代码**

*   想象一个 WordPress 网站。它们是使用世界各地不同开发人员制作的大量小部件构建的。处理塞在一个页面中的这么多代码是可能的，但难以想象。

*   如果某些代码只是短路或无法在您的站点上运行，则更容易取出链接外部文件的代码，而不是在页面上搜索相关代码并可能意外地从另一个小部件中删除代码。

**关注点分离**

*   将 HTML 与 CSS 和 JS 分开也是最佳实践。这样，您处理的不是意大利面条。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T04:57:23.577

当您在单个文档中有大量代码时，使用这些代码会更加困难，因为您需要更多时间来找到需要更改的字符串。

这就是为什么最好将代码分成单独的文件，每个文件解决自己的特殊任务，然后将它们包含在必要的代码中。

但是，您可以编写一个脚本，它将您的文件从具有许多文件的开发版本连接到具有较少文件的发布版本，但这会带来两个问题：

1.  人们通常懒得做额外的编码来创建这个脚本，然后当你的项目结构变得更复杂时改变它。

2.  如果您发现错误或添加了一个小功能，您将需要在开发版本和发布版本中再次重建您的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T05:02:33.560

他们将它们分开，以便多个网页可以使用同一个文件。当您更改单个文件时，多个页面也可以进行芳香更新。另外，大的 HTML 文件会导致下载时间过长。

# java - 遗传算法：仅部分基因型的统一交叉

> ID：10859873
> 
> 赞同：0
> 
> 时间：2012-06-02T04:49:29.913
> 
> 标签：java, genetic-algorithm

我需要实现一个“统一交叉”遗传算子。

编辑：我意识到如果两个人都出现一个数字，那么重复（因为随机交换）是正常的。所以我添加了这个：

```
 if(anyDuplicate(p0_genome,minIndex) || anyDuplicate(p1_genome,minIndex)){
                                //rollback: swap again
                                swap(p0_genome,p1_genome,i);
                            } 
```

**但它仍然会创建重复项（大部分时间基因位于 minIndex 位置（从循环中排除！！！）。当然我测试了函数 anyDuplicate，它工作得很好**

我试过这段代码

```
> Note: Individual 1 and 2 have the same length but a different number
> of valid bits.
> 
> Foe example: genotype length (of both individuals) = 10 ,
> representation as numbers from 1 to 10 without anyone repeated,the
> start delimiter is 1 and the end delimiter should be 2\. Not used genes
> are = 0
> 
> individual 1(p0_genome) = {1,4,5,3,2,0,0,0,0,0}
> individual 2(p1_genome) = {1,4,6,3,8,2,0,0,0,0} 
```

**渴望输出：**

```
Individual 1(p0_genome): **1** <some genes ALL DIFFERENTS> **2** 0,0,0,.....
Individual 2(p1_genome): **1** <some genes ALL DIFFERENTS> **2** 0,0,0,..... 
```

**主要代码：**

```
 int indexOfLastP0 = findLast(p0_genome,gl); // last valid bit (the one = 2) of first individual
            int indexOfLastP1 = findLast(p1_genome,gl); // last valid bit (the one = 2) of second individual

            int minIndex = Math.min(indexOfLastP0,indexOfLastP1); // last valid bit of the "smaller" of the inviduals

    // Building sons
  /* exchange bit without considering delimiters bit (1 and 2)
   and according to the smaller individual */
            int threshold = 0.60;

    for (int i=1; i<minIndex; i++) {
        if (Math.Random()>threshold) {
            swap(p0_genome,p1_genome,i);
        }
    // when exiting the loop the remaining of genes remain the same 
```

**兑换码：**

```
 public void swap(int[] array1, int[] array2 ,int i){
        int aux=array1[i];
        if (array2[i]!=2){
        array1[i]=array2[i];
                }
        if (aux!=2){
        array2[i]=aux;
                } 
```

**anyDuplicate() 代码：**

```
 public boolean anyDuplicate(int[] genoma,int min){
        for (int i=0;i<=min;i++){
            for (int j=0;j<=min;j++){
               if (genoma[i]==genoma[j] && i!=j){
                  return true;
               }
            }
        }
        return false;
    } 
```

**findLast 代码：**

```
 public int findLast(int[] mgenome,int genotypeLength){
        int k=1; // 1 element is not considered
        while (k<genotypeLength && mgenome[k]!=0){
            k++;
        }
        return k-1; // **I also tried returning k;**
    } 
```

问题是**我在两个人身上都有很多重复的数字**

我还尝试了“父亲”的“重复” **（从父母到孩子的数组复制）**：

```
 // Creating sons genotypes
    int [] s0_genome = new int[gl];
    int [] s1_genome = new int[gl];
    // Building sons
          int threshold = 0.60;
    for (int i=0; i<minIndex; i++) {
        if (Math.Random()>threshold)) {
            s0_genome[i] = p1_genome[i];
            s1_genome[i] = p0_genome[i];
        }
        else {
            s0_genome[i] = p0_genome[i];
            s1_genome[i] = p1_genome[i];
        }
             for (int i=minIndex; i<10; i++) {
               // copy what's left
            s0_genome[i] = p0_genome[i];
            s1_genome[i] = p1_genome[i];
        } 
```

难道我做错了什么？谢谢你的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:24:21.597

好的，所以你尝试交换一次，如果任何一个结果基因组包含重复值，你再尝试交换。如果第二次尝试后仍有重复，则放弃。这效率不高，而且你的基因组越长，就越不可能奏效。

**解决方案 A**：如果交换的值不在目标基因组中，您可以尝试只进行交换。这将提供这样的交换功能：

```
public void swap(int[] array1, int[] array2 ,int i){
    int aux=array1[i];
    if (array2[i]!=2 && !Arrays.asList(array1).contains(array2[i]){
    array1[i]=array2[i];
            }
    if (aux!=2 && !Arrays.asList(array2).contains(array1[i]){
    array2[i]=aux;
            } 
```

这样做的问题是它可能会完全锁定在不同位置包含相同值的基因组。对于您的示例，使用

```
g1 = {1, 4, 8, 9, 3, 2, 0, 0}
g2 = { 1, 3, 9, 8, 4, 2, 0, 0} 
```

根本没有有效的交换，交叉将返回原始基因组。

**解决方案B**：如果要交换的值已经存在于目标基因组中，则在目标基因组中找到该基因的索引，并将其也交换。这可能会级联到需要在基因组的大部分中进行交换，当然当 i=j 时它不应该发生。

种类取决于所需的行为。对于上面的示例基因组，成功的交叉会是什么样子？

# glsl - 如何使用 webGL glsl 获取 gl_BackColor？

> ID：10859875
> 
> 赞同：0
> 
> 时间：2012-06-02T04:49:50.733
> 
> 标签：glsl, webgl

在其他一些 GLSL 版本中，gl_BackColor 似乎提供了对当前渲染片段背后颜色的访问。这对于一些自定义 alpha 混合很有用。但是用于 webgl 的 glsl 似乎不支持它。另一方面，从 gl_FragColor 之前阅读为其分配任何值似乎得到正确的背景颜色，但仅适用于我的 Ubuntu。在我的 Mac Book Pro 上，它失败并且似乎只得到一些无用的随机颜色。

所以我的问题是，有没有直接的方法可以访问当前渲染片段后面的背景颜色？如果没有，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T04:54:40.820

> 在其他版本的 GLSL 中，gl_BackColor 似乎提供了对当前渲染片段背后颜色的访问。

不，从来没有这种情况。`gl_BackColor`是*背面*颜色，用于进行双面照明。而且它*永远无法*从片段着色器中访问；它是一个顶点着色器变量。

对于双面光照，您在顶点着色器`gl_FrontColor`和`gl_BackColor`顶点着色器中都进行了写入。片段着色器的`gl_Color`变量填充了朝向相机的任何一面的颜色。所以如果三角形的背面是向前的，那么它会得到插值`gl_BackColor`。

您所要求的内容在 GLSL中*从未提供过。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:47:30.693

正如尼可波拉斯所写，没有直接的方法。

但是，您可以通过使用渲染到纹理方法来使用间接方式：

1.  首先将不透明对象（如果有）渲染到屏幕外纹理而不是屏幕。
2.  将离屏纹理渲染到屏幕上
3.  使用执行自定义混合的着色器将透明的“自定义混合”对象渲染到屏幕上。（由于您手动进行混合，因此不应启用 GL 的混合标志）。您应该将屏幕外纹理作为制服添加到片段着色器中，这样您就可以对背景颜色进行采样并计算您的自定义混合。

如果您需要渲染多个透明对象，您可以使用两个屏幕外纹理和它们之间的乒乓球，当所有对象都被渲染后，最终将结果渲染到屏幕上。

# android - 进度对话框不旋转

> ID：10859880
> 
> 赞同：0
> 
> 时间：2012-06-02T04:51:40.620
> 
> 标签：android, progressdialog

这是代码，如果用户单击按钮，当前会显示进度对话框，并且“环”没有旋转。但是如果我将 progreedialog 的代码粘贴到 onCreate 下，一旦加载屏幕，“环”就会旋转。帮我看看哪里出错了。。

StaffChoice 类：

```
 public class StaffChoice extends Activity {

    @Override
protected void onCreate(Bundle savedInstanceState)
{                   
    super.onCreate(savedInstanceState);
    setContentView(R.layout.staffchoices);
}

public void onClickCategory(final View view)
{       
    final ProgressDialog progress=ProgressDialog.show(this, "Please wait", "Loading ...", true);

    new Thread()
    {
        public void run()
        {               
            Intent intent = new Intent(view.getContext(), Category.class);
            startActivity(intent);
            progress.dismiss();                     
        }
    }.start();
}
} 
```

类别类中的 onCreate：

```
super.onCreate(savedInstanceState);
        setContentView(R.layout.category);
        final ListView lvCategory = (ListView) findViewById(R.id.lvCategory);

        SoapObject Request = new SoapObject (NAMESPACE, METHOD_NAME);
        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht = new AndroidHttpTransport(URL);

        try
        {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapObject resultString = (SoapObject) soapEnvelope.getResponse();

            final String[] strCategory = new String[resultString.getPropertyCount()];

            for(int i =0; i<resultString.getPropertyCount(); i++)
            {
                SoapObject array = (SoapObject) resultString .getProperty(i);
                strCategory[i] = array.getProperty(0).toString();   //get category
            }
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, strCategory);
            lvCategory.setAdapter(adapter);

            lvCategory.setOnItemClickListener(new OnItemClickListener(){
                @Override
                public void onItemClick(AdapterView<?> arg0, final View arg1, int arg2, long arg3) {                    
                        Intent intent = new Intent(arg1.getContext(), CategoryGames.class);
                        startActivity(intent);
                }               
            });
        }

        catch(Exception e)
        {               
            String[] items = { "No Internet Connection, Please try again" };            
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items);
            lvCategory.setAdapter(adapter);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:12:41.267

您必须在线程运行时将任务或时间放入线程中，进度对话框正在显示，但是当任务/时间完成时，progressDialog 会关闭。

在 Android中使用[AsynTask](http://samir-mangroliya.blogspot.in/p/android-asynctask-example.html)比使用 Thread 更好。

```
 new Thread()
            {
                public void run()

            {
                try{
                      Thread.sleep(10*1000);  //10 seconds

                   }catch(Exception e){
             } 
                handler.sendEmptyMessage(0);           
            }

           }.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T03:08:15.497

而不是 Thread，我在新意图中使用 AsyncTask

```
 protected void onCreate(Bundle savedInstanceState)
    {
      new loadPage().execute(null, null, null);             
    }

    public class loadPage extends AsyncTask<String, Integer, Void> {

        private ProgressDialog pdia;

        @Override
        protected void onPreExecute(){
            super.onPreExecute();
            pdia = new ProgressDialog(AppDetails.this);
               pdia.setMessage("Loading...");
              pdia.show();
            }
        @Override
        protected Void doInBackground(String... arg0) {
        // TODO Auto-generated method stub
         }

        @Override
        protected void onPostExecute(Void unused) {
        pdia.dismiss();
         }
        } 
```

# java - 以降序方式排列对应的值

> ID：10859884
> 
> 赞同：0
> 
> 时间：2012-06-02T04:52:53.703
> 
> 标签：java

我现在有两组列，但我不确定如何对其进行编程以及我可以使用哪组类。两者都在单独的数组中。一个用于字母，另一个用于数字。

```
 a  12
 b  9
 c  156 
```

所以 a 对应于 12，b 对应于 9 等等。该列表实际上是文本文件中字母的频率，所以我有 26 个。两者不在同一个数组中。因为我对它们都有单独的数组。我想尝试和安排，让他们以一种降序的方式。这样输出将是：

```
 c   156
 a   12
 b   9 
```

我仍然不确定 ArrayList 或 HashMap 或 Tree Map 的各种功能。那么有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:25:18.220

```
import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import java.util.TreeMap;

public class Test {

    public static void main(String[] args) {

        HashMap<String,Integer> map = new HashMap<String,Integer>();
        ValueComparator bvc =  new ValueComparator(map);
        TreeMap<String,Integer> sorted_map = new TreeMap(bvc);

        map.put("A",5);
        map.put("B",60);
        map.put("C",65);
        map.put("D",3);

        System.out.println("unsorted map");
        for (String key : map.keySet()) {
            System.out.println("key/value: " + key + "/"+map.get(key));
        }

        sorted_map.putAll(map);

        System.out.println("results");
        for (String key : sorted_map.keySet()) {
            System.out.println("key/value: " + key + "/"+sorted_map.get(key));
        }
    }

}

class ValueComparator implements Comparator {

  Map base;
  public ValueComparator(Map base) {
      this.base = base;
  }

  public int compare(Object a, Object b) {

    if((Integer)base.get(a) < (Integer)base.get(b)) {
      return 1;
    } else if((Integer)base.get(a) == (Integer)base.get(b)) {
      return 0;
    } else {
      return -1;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T05:06:35.950

您可以创建一个以字符和频率为数据成员的类，并使该类实现[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口。

这里有 2 个选项，您可以：

*   将所有对象插入到实现[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)接口的类中（例如[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)）。然后调用[`Collections.sort(List<T> list)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29).[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

*   将所有对象插入[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html). 您可以通过 获取排序的项目`iterator()`。

从问题来看，这两条数据似乎首先不是某个现有对象的成员。如果他们有任何机会，您不必为角色和频率创建新类。您可以将现有对象插入到 中[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)，实现在接口上扩展的类，然后使用 对进行[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)排序。[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)[`Collections.sort(List<T> list, Comparator<? super T> c)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T06:31:29.920

您有以下两个列表。

```
[a, b, c] 
[12, 9, 156] 
```

首先，将两个列表*压缩*在一起，以便获得*tuples*的列表（或其投影） 。

```
[(a, 12), (b, 9), (c, 156)] 
```

*然后按每个元组中的*第二项对该列表进行排序，无论您想要什么*顺序。*

```
[(c, 156), (a, 12), (b, 1)] 
```

现在将其*解压缩*到两个列表中。

```
[c, a, b]
[156, 12, 1] 
```

这就是你的答案。

斜体字表示上述解决方案中使用的通用抽象，所有这些都可能在[这个](http://functionaljava.org/)库中已经可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T05:26:12.783

尝试这个：

```
public static void main(String[] args) throws Exception {
    char[] letters = { 'a', 'b', 'c' };
    int[] numbers = { 12, 9, 156 };
    printDescendind(letters, numbers);
}

public static void printDescendind(char[] letters, int[] numbers) {
    class Holder implements Comparable<Holder> {
        char letter;
        int number;
        public int compareTo(Holder o) {
            return number != o.number ? o.number - number : letter - o.letter;
        }
        public String toString() {
            return String.format("%s   %s", letter, number);
        }
    }
    List<Holder> list = new ArrayList<Holder>(letters.length);
    for (int i = 0; i < letters.length; i++) {
        Holder h = new Holder();
        h.letter = letters[i];
        h.number = numbers[i];
        list.add(h);
    }
    Collections.sort(list);
    for (Holder holder : list) {
        System.out.println(holder);
    }
} 
```

# objective-c - FetchedResultsController 上的 NSRangeException

> ID：10859889
> 
> 赞同：1
> 
> 时间：2012-06-02T04:53:25.263
> 
> 标签：objective-c, core-data

这可能是一个简单的问题，但它让我难住了。

背景：我有一个非常简单的 UITableView，它链接到 FetchedResultsController。基本上，该表为 FetchedResultsController 中的每一行填充一行。

问题陈述：如果我点击我的应用程序上的一个按钮来查看所有记录，应用程序会因错误而崩溃

> NSRangeException'，原因：' *** -[_PFBatchFaultingArray objectAtIndex:]: 索引 (2) 越界 (2)

但是，如果我单击另一个显示添加数据的屏幕的按钮，请取消此屏幕而不保存任何内容，然后返回查看所有屏幕，该屏幕可以正常工作。

我什至尝试使用 NSLog 语句进行调试，您可以在下面看到

```
2012-06-01 23:37:01.345 TC[35258:fb03] sections : 1
2012-06-01 23:37:43.154 TC[35258:fb03] rows 3
2012-06-01 23:39:29.174 TC[35258:fb03] indexpath <NSIndexPath 0x91180f0> 2 indexes [0, 0]
2012-06-01 23:41:29.041 TC[35258:fb03] indexpath <NSIndexPath 0x903e770> 2 indexes [0, 1]
2012-06-01 23:41:44.015 TC[35258:fb03] indexpath <NSIndexPath 0x904afb0> 2 indexes [0, 2]
2012-06-01 23:41:46.598 TC[35258:fb03] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[_PFBatchFaultingArray objectAtIndex:]: index (2) beyond bounds (2)' 
```

这让我很困惑 - 当明显有 3 行时，为什么它会在第三行抛出错误？非常感谢您的帮助和洞察力。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:22:17.130

找到问题和解决方案。这是发生的事情

1.  在我的应用程序的主菜单中，我有两个按钮 - 一个用于向数据库添加新项目，另一个用于查看数据库中的所有项目
2.  如果我直接从主菜单查看所有项目而不尝试先添加内容，则会发生上述错误。
3.  我意识到，如果我进入添加屏幕并取消添加屏幕，我仍在 ManagedObjectContext 中创建一个对象，但在我取消时并没有删除它。因此，系统仍然计算了 3 行 MamagedObjects，但实际上在数据库中只找到了 2 个已提交的。
4.  我添加了一行取消按钮代码以从上下文中删除当前托管对象，从 iOS 模拟器中删除应用程序，重新编译并运行它 - 就像一个魅力。

您可能有同样的问题 - 请尝试以下步骤以确定您的问题是否相似

1.  从模拟器中删除应用程序，重新编译并运行它。如果它工作正常，那么上下文和数据库之间肯定存在冲突
2.  检查以确保您正在删除您可能已创建但未提交的托管对象。

# vb.net - VB - 一次显示 msgbox(r)

> ID：10859891
> 
> 赞同：0
> 
> 时间：2012-06-02T04:53:34.220
> 
> 标签：vb.net, visual-studio-2010, visual-studio, timer

我有以下代码：

```
Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Dim mesaj As New Integer

        My.Computer.Network.DownloadFile("http://rotutorial.net/anunt.txt", "c:\classmate\msg1.txt", "", "", False, 60000, True)
        Dim readtext As New System.IO.StreamReader("c:\classmate\msg1.txt")
        Dim text As String
        text = readtext.ReadToEnd
        readtext.Close()
        Dim parti(10) As String
        parti = text.Split("_")

        Dim writetext1 As New System.IO.StreamReader("c:\classmate\msg.txt")
        Dim text1 As String
        Dim parti1(10) As String
        text1 = writetext1.ReadToEnd
        parti1 = text1.Split("_")

        writetext1.Close()
        Dim unic As New Integer
        unic = Val(parti(0))
        Dim unic1 As New Integer
        unic1 = Val(parti1(0))

        If unic <> unic1 Then
            If unic <> unic1 Then
                mesaj = MsgBox(parti(3), vbYesNo, "Mesaj")
            End If
            Dim writetext2 As New System.IO.StreamWriter("c:\classmate\msg.txt")
            Dim text2 As String
            text2 = text & "/" & text1
            writetext2.Write(text2)
            writetext2.Close()

            Timer1.Enabled = False
            Timer1.Enabled = True
        End If
        Timer1.Enabled = False
        Timer1.Enabled = True

    End Sub 
```

计时器间隔设置为 5000（5 秒），但每次计时器计时时，msgbox 都会出现在屏幕上，但文件 msg.txt 中会写入一次。因此，计时器检查该 unic 是否与 unic1 不同，如果不同则显示一个 msg 框，它在 msg.txt 中写入新行，但在下一个计时器滴答时，即使 unic 和 unic1 等于 msgbox无论如何都会出现，但它更有趣，因为它不会再次写入文件，只会显示 msgbox。我不明白这一点。

抱歉我的英语不好，我来自罗马尼亚。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:32:15.450

如果在错误的地方出于正确的原因使用消息框，可能会有点危险。这是其中之一。问题是它相当于在一个循环中调用 DoEvents，旨在保持消息循环可操作。这样 Windows 消息（如消息框的 Paint 事件和输入事件）就可以正常发送和处理。这可以防止您的 UI 冻结。

然而，这可能会导致重入问题。消息框通过禁用应用程序中的所有窗口来解决最严重的问题。请注意单击其中一个窗口时发出的哔声。但是，这*不会*阻止 Timer 消息。因此 5 秒后，您的 Timer1_Tick() 方法再次运行。显示另一个消息框。等待足够长的时间关闭它们，您的屏幕就会充满消息框。您可能会因为文件操作代码多次运行而遇到其他问题。

解决方法很简单，只需在方法开始时禁用 Timer。最后重新启用它。BackgroundWorker 也是此类代码中的常见选择，它可以防止缓慢的文件下载冻结您的 UI。

# asp.net-mvc-3 - 关于 MVC3 母版页和用户控件

> ID：10859892
> 
> 赞同：0
> 
> 时间：2012-06-02T04:53:57.913
> 
> 标签：asp.net-mvc-3

**关于 MVC3 母版页问题** 我有一个母版页，在该母版页内我使用了一个用户控件。现在，在该用户控件中，我从 actionresult 中绑定了数据库中的一个下拉列表。

现在的问题是，每当我使用另一个视图时，我必须调用该操作结果，以便在包括我的母版页的所有其他页面中一次又一次地绑定该下拉列表。我怎样才能防止这种情况发生？记住我的朋友们，我正在使用 MVC3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:11:18.110

根据您的问题，我知道您不想在执行每个视图时调用 DB，因为您在母版页中包含 Dropdown。

为了克服这个问题，您需要为该用户控件（部分页面）实现输出缓存。请[在此处](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)找到更多详细信息。如果您仍有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:34:44.723

如果您不需要检查数据库中的数据，则制作一个静态字典并将其绑定到 DropDownListFor：

```
private static readonly Dictionary<int, string> yourData
    = new Dictionary<int, string>
{
    { "1", "Your data one" },
    { "2", "Your data two" }
}; 
```

问候

# c# - .NET 动态 T-SQL 错误

> ID：10859893
> 
> 赞同：2
> 
> 时间：2012-06-02T04:54:28.157
> 
> 标签：c#, sql-server, stored-procedures, dynamic-sql, tableadapter

我正在尝试使用存储过程在 .NET 中创建 TableAdapter，但出现错误“关键字'WHERE'附近的语法不正确”。

我已将存储过程中的问题缩小到以下几行：

```
IF @NumRows > 0
    SET @SQL += N' WHERE T1.RowNumber BETWEEN 1 and 10'
ELSE
    SET @SQL += N' WHERE T1.RowNumber > 0' 
```

`@NumRows`是一个输入参数，默认为 0。

但是，如果我删除其中任何一行，一切正常（当没有 IF/ELSE 语句时，两个 WHERE 子句都可以正常工作）。看起来 .NET 几乎忽略了 IF/ELSE 并尝试添加 WHERE 子句两次。

如果我像这样更改它也可以正常工作：

```
IF @NumRows > 0
    SET @SQL += N''
ELSE
    SET @SQL += N' WHERE T1.RowNumber > 0' 
```

其中一个 WHERE 子句已被删除，.NET 端不再存在冲突。所以我很确定它与 2 WHERE 子句有关，而不是其他任何东西。

sproc 在 SQL Server 中运行得非常好，即使单击“预览数据”时出现错误，它甚至可以在 .NET 中运行。唯一的问题是它不会自动填充创建报告所需的字段列表。

有没有人见过这个并有一个建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:03:11.807

错误出现在 DataSet ( `.xsd`) 文件 - 可视化设计器中。右键单击，然后转到`Add` **>** `TableAdapter`，设置数据库连接，选择存储过程，单击到`Finish`，然后显示错误。它仍然链接到 sproc，并且可以在我单击时运行`Preview Data`，但它无法确定 sproc 中有哪些字段。当然，我可以手动添加字段，但这似乎是一个不应该存在的愚蠢问题。

# android - runTime error in libGDX

> ID：10859902
> 
> 赞同：2
> 
> 时间：2012-06-02T04:57:27.773
> 
> 标签：android, runtime-error, libgdx

in past i worked with my projects and everything was good. but recently, i have this errors:

```
06-02 04:52:27.954: W/dalvikvm(344): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lcom/badlogic/gdx/backends/android/AndroidApplication;
06-02 04:52:27.954: W/dalvikvm(344): Class init failed in newInstance call (Lcom/Jumper/ProjectAndroidActivity;)
06-02 04:52:27.963: D/AndroidRuntime(344): Shutting down VM
06-02 04:52:27.963: W/dalvikvm(344): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-02 04:52:27.993: E/AndroidRuntime(344): FATAL EXCEPTION: main
06-02 04:52:27.993: E/AndroidRuntime(344): java.lang.ExceptionInInitializerError
06-02 04:52:27.993: E/AndroidRuntime(344):  at java.lang.Class.newInstanceImpl(Native Method)
06-02 04:52:27.993: E/AndroidRuntime(344):  at java.lang.Class.newInstance(Class.java:1409)
06-02 04:52:27.993: E/AndroidRuntime(344):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
06-02 04:52:27.993: E/AndroidRuntime(344):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
06-02 04:52:27.993: E/AndroidRuntime(344):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-02 04:52:27.993: E/AndroidRuntime(344):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-02 04:52:27.993: E/AndroidRuntime(344):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-02 04:52:27.993: E/AndroidRuntime(344):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-02 04:52:27.993: E/AndroidRuntime(344):  at android.os.Looper.loop(Looper.java:123)
06-02 04:52:27.993: E/AndroidRuntime(344):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-02 04:52:27.993: E/AndroidRuntime(344):  at java.lang.reflect.Method.invokeNative(Native Method)
06-02 04:52:27.993: E/AndroidRuntime(344):  at java.lang.reflect.Method.invoke(Method.java:507)
06-02 04:52:27.993: E/AndroidRuntime(344):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-02 04:52:27.993: E/AndroidRuntime(344):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-02 04:52:27.993: E/AndroidRuntime(344):  at dalvik.system.NativeStart.main(Native Method)
06-02 04:52:27.993: E/AndroidRuntime(344): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load gdx: findLibrary returned null
06-02 04:52:27.993: E/AndroidRuntime(344):  at java.lang.Runtime.loadLibrary(Runtime.java:429)
06-02 04:52:27.993: E/AndroidRuntime(344):  at java.lang.System.loadLibrary(System.java:554)
06-02 04:52:27.993: E/AndroidRuntime(344):  at com.badlogic.gdx.utils.GdxNativesLoader.load(GdxNativesLoader.java:116)
06-02 04:52:27.993: E/AndroidRuntime(344):  at com.badlogic.gdx.backends.android.AndroidApplication.<clinit>(AndroidApplication.java:59)
06-02 04:52:27.993: E/AndroidRuntime(344):  ... 15 more 
```

i think this errors are from my libs. but i change them with new ones. is there any solution for it?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T18:50:42.080

This error occurs when the armeabi and armeabi-v7a directories cannot be found. Copy both of these directories and their contents into the libs directory of your project.

It should look something like this:

![What the libs directory should look like](../Images/17c36549036b8f3dc85eeae97cdb633b.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-10T16:33:38.813

you copied the wrong .so files in the folders. I assume you extracted them from gdx-natives.jar. Instead directly copy the armeabi and armeabi-v7a folders from the release/nightly. Make sure to use jars and natives only from a single release, do not mix jars and natives from multiple releases.

Alternatively use the gdx-setup-ui, as described here [http://code.google.com/p/libgdx/wiki/ProjectSetupNew](http://code.google.com/p/libgdx/wiki/ProjectSetupNew)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T13:46:03.190

I got that same error on my VM and other emulators, and found it was because they ran x86 O/S'es, which libgdx does not support.

If it doesn't work on the device either, try this: android-project -> properties -> java Build Path -> Order and Export. Click the project you've linked to (your plain java-project or desktop-project) and click the "Up"-button until it is at the very top. Make sure it's ticked [V]. I did that with the jars too, just in case, and now it runs on my device. I still get that same error on my x86 VM, because libgdx does not support x86 Android devices.

# macos - 在 OSX CoreAudio 中使用 AudioComponentCount

> ID：10859906
> 
> 赞同：0
> 
> 时间：2012-06-02T04:58:05.073
> 
> 标签：macos, core-audio

处理 AudioUnit 的方式在 10.5 和 10.6 之间发生了变化。其中之一（至少根据 Apple 的文档）是添加了音频组件服务。在其他地方，它记录在：

[http://developer.apple.com/library/mac/documentation/AudioUnit/Reference/AudioComponentServicesReference/AudioComponentServicesReference.pdf](http://developer.apple.com/library/mac/documentation/AudioUnit/Reference/AudioComponentServicesReference/AudioComponentServicesReference.pdf)

我正在整理一些代码来处理输入和输出单元，并且无法弄清楚如何使用这些调用。作为起点，我调用了 AudioComponentCount，但链接器找不到它。我添加了 CoreAudio.Framework 和 CoreAudioKit.Framework，但这并没有帮助。它在 AudioComponent.h 中声明。

有关如何使此代码正确链接的任何建议？

感谢您为此提供的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T08:37:44.033

`AudioComponentCount`当我在 Xcode 的文档中查找时，它显示了一个名为“[音频组件服务参考](https://developer.apple.com/library/mac/#documentation/AudioUnit/Reference/AudioComponentServicesReference/Reference/reference.html)”的页面。当我滚动到顶部时，它说它来自 AudioUnit 框架。所以，尝试链接。

# objective-c - 在视图中使用视图会导致崩溃？

> ID：10859914
> 
> 赞同：0
> 
> 时间：2012-06-02T04:59:00.043
> 
> 标签：objective-c, ios, ios5, views

我是一名学习型开发人员，一直在努力学习新事物。我正在玩更高级的视图和子视图，目前正在尝试在视图中使用视图。我知道如何使用模态视图，但在这种情况下，我希望两个视图都存在并运行。所以，想象一下 iPad 运行一个未缩放的 iPhone 应用程序，这与我正在尝试做的事情基本相同。我可以很好地加载视图，但是，当我在用户与之交互的视图中使用按钮或任何东西时，应用程序会崩溃。它给出以下错误消息：EXC_BAD_ACCESS（代码=2，地址=0x17）。奇怪的是调试器在这个问题上没有输出。我曾尝试使用委托（您在模态视图中所做的方式），但它并没有改变任何东西。任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:58:32.510

You can, of course, put many views inside a view.

EXC_BAD_ACCESS means you, or some object, is trying to access an object which has been deallocated.

I can mostly promise you that the issue is not because you are putting a view in a view, that statement and actually doing that is fine.

How you go about doing it, and how you handle everything is a different story.

You didn't provide any code or context as to where and how you are adding a view to a view, which is probably where the issue is arising. Enabling NSZombie as suggested by xlc0212 is a great idea to help diagnose the problem.

Hope this helps

# makefile - 如何将警告视为 Makefile 中的错误？

> ID：10859916
> 
> 赞同：8
> 
> 时间：2012-06-02T04:59:28.140
> 
> 标签：makefile, warnings, undefined, build-error

1.  是否可以将警告视为 Makfile 中的错误（因此在 Makefile 继续之前退出）

2.  此外，是否可以过滤掉哪个警告会产生错误？

我的用例：我想与它`--warn-undefined-variables`结合使用，以便在未定义变量时退出 Makefile，这是一个非常常见的错误来源。显然我不想手动检查每个变量，因为这容易出错/乏味。我在这方面找不到任何东西，但这是一个非常重要/基本的功能。

注意：我不是在寻找`-Werror`不适用于我的用例的 gcc 特定命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-22T14:29:56.630

如果您准备为每个目标添加依赖项，则可以将警告变成错误。

这是一个包含错误的生成文件（“SRCS”而不是“SRC”）：

```
# Turn on the warning we want
MAKEFLAGS += --warn-undefined-variables

# Make sure MAKECMDGOALS is defined, so it doesn't cause an error itself
ifndef MAKECMDGOALS
MAKECMDGOALS = all
endif

SRC=hello.c

all: compile

# Fails if the Makefile contains any warnings.
# Run this Makefile with the same goals, but with the -n flag.
# Grep for warnings, and fail if any are found.
no-make-warnings:
    ! make -n $(MAKECMDGOALS) 2>&1 >/dev/null | grep warning

# Targets you want to check must depend on no-make-warnings
compile: no-make-warnings
    gcc -o hello $(SRCS) 
```

当我运行它时，我看到了这个：

```
$ make
! make -n all 2>&1 >/dev/null | grep warning
Makefile:17: warning: undefined variable `SRCS'
make: *** [no-make-warnings] Error 1 
```

您只需要使要检查的每个目标都依赖于目标`no-make-warnings`。

如果有人知道如何自动执行此操作，请加入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T02:52:44.640

make 的标准版本不支持您要查找的内容。但是，构建您自己的 make 版本来满足您的用例应该不难。

查看make 3.82的源码，查看`warn_undefined`variable.h中的宏：

```
214 /* Warn that NAME is an undefined variable.  */
215 
216 #define warn_undefined(n,l) do{\
217                               if (warn_undefined_variables_flag) \
218                                 error (reading_file, \
219                                        _("warning: undefined variable `%.*s'"), \
220                                 (int)(l), (n)); \
221                               }while(0) 
```

我没有尝试过，但我认为用 . 替换应该就足够`error`了`fatal`。

# matlab - 运算符“点”(.) 是什么意思？

> ID：10859917
> 
> 赞同：33
> 
> 时间：2012-06-02T05:00:36.513
> 
> 标签：matlab, syntax, operators

给定代码：

```
 A = [1 2 3; 3 2 1]
 B = A.^2 
```

输出 ：

```
B =

     1     4     9
     9     4     1 
```

但如果我这样做：`B = A^2`

输出是：

```
Error using  ^ 
Inputs must be a scalar and a square matrix.
To compute elementwise POWER, use POWER (.^) instead. 
```

操作员具体`.`做什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-02T05:05:44.167

点本身不是运算符，`.^`是。

是`.^`逐点¹（即逐元素）幂，[逐点乘积](http://en.wikipedia.org/wiki/Pointwise_product)`.*`也是如此。

> **`.^`** 阵列电源。是具有幂的元素的`A.^B`矩阵。和的大小必须相同或兼容。`A(i,j)``B(i,j)``A``B`

比照

*   “数组与矩阵运算”：[https ://mathworks.com/help/matlab/matlab_prog/array-vs-matrix-operations.html](https://mathworks.com/help/matlab/matlab_prog/array-vs-matrix-operations.html)
*   “逐点”：[http ://en.wikipedia.org/wiki/Pointwise](http://en.wikipedia.org/wiki/Pointwise)
*   “元素操作”：[http ://www.glue.umd.edu/afs/glue.umd.edu/system/info/olh/Numerical/Matlab_Matrix_Manipulation_Software/Matrix_Vector_Operations/elementwise](http://www.glue.umd.edu/afs/glue.umd.edu/system/info/olh/Numerical/Matlab_Matrix_Manipulation_Software/Matrix_Vector_Operations/elementwise)

¹) 因此点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-24T11:37:07.500

MATLAB 文档中有一整页专门讨论该主题：[数组与矩阵运算](https://www.mathworks.com/help/matlab/matlab_prog/array-vs-matrix-operations.html)。它的要点如下：

> *MATLAB® 有两种不同类型的算术运算：**数组运算**和**矩阵运算**。您可以使用这些算术运算来执行数值计算，例如，将两个数字相加、将数组的元素提高到给定的幂或将两个矩阵相乘。*
> 
> ***矩阵运算遵循线性代数的规则。相比之下，数组操作逐个元素地执行操作并支持多维数组**。句点字符 ( `.`) 将数组运算与矩阵运算区分开来。但是，由于矩阵和数组运算对于加法和减法是相同的，所以字符对`.+`和`.-`是不必要的。*

# c# - 检查数据读取器在 Asp.net 中是否有行

> ID：10859919
> 
> 赞同：4
> 
> 时间：2012-06-02T05:01:04.080
> 
> 标签：c#, asp.net, sql, sqldatareader

我的代码：

```
string sqlQuery1 = "select * from employees where depid=6";
SqlDataReader Dr1 = dbconn.RunQueryReturnDataReader(sqlQuery1);

if(Dr1.read()) {    //or if (Dr1["empname"] != DBNull.Value)

            while (Dr1.Read())
            {        
                Label1.Text = Dr1["empname"].ToString();  
                Label2.Text = Dr1["empdes"].ToString(); 
                ...

            }
            Dr1.Close();
 }
 else {
            Label1.text = "defaultValue";
            Label2.text = "defaultValue";
            ...
 } 
```

我只想检查 SqlDataReader 没有要显示的记录。如果没有记录，标签应该显示我预先分配的默认值，或者如果在标签上有记录显示数据读取器值。（假设 SqlDataReader 有 1 个重新编码或只有 norecord）

如何检查第一个数据读取器 hasRow 与否？

我已经尝试了上述代码的两种方法。

1.  `if(Dr1.read())` - 这种方式工作正常。但是在执行`If`语句之后，它没有值显示在标签上，因为 read() 会增加指针。结果 label1 ,Label2 .. 没有显示。

2.  `if (Dr1["empname"] != DBNull.Value)`

    这种方式在 Sqldatareader 有 norows 时会产生异常。

`error: System.InvalidOperationException: Invalid attempt to read when no data is present`

请帮我。发送

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T05:07:24.287

尝试...

```
if(Dr1.HasRows)
{
   //....
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T05:57:16.983

```
if (Dr1 == null || !Dr1.HasRows) {
    // Do something
} 
```

# java - JavaFX 2 - 无法导入 .css 文件

> ID：10859920
> 
> 赞同：1
> 
> 时间：2012-06-02T05:02:24.207
> 
> 标签：java, css, import, nullpointerexception, javafx-2

我目前正在尝试进入 JavaFX 2.0，但我无法让`.css`样式表在我的应用程序中工作。我已经按照[http://docs.oracle.com/javafx/2/get_started/css.htm#BABBGJBI](http://docs.oracle.com/javafx/2/get_started/css.htm#BABBGJBI)上的指南进行操作，但是每当我尝试`.css`通过

```
 scene.getStylesheets().add(Login.class.getResource("loginform.css").toExternalForm()); 
```

我收到以下错误：

```
 Exception in Application start method
Exception in thread "main" java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:399)
    at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at Login.start(Login.java:68)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:315)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:174)
    at com.sun.javafx.application.PlatformImpl$3.run(PlatformImpl.java:141)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$2$1.run(WinApplication.java:62)
    ... 1 more 
```

css路径位于我的eclipse项目路径中： `C:\Users\UserName\Dropbox\Documents\Eclipse\FirstExamples\loginform.css`

我会很感激任何帮助，我无法让它工作，不是绝对路径，也不是示例中所示的相对路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T07:39:14.053

检查你的eclipse项目的编译输出路径，确保loginform.css和Login.class在同一个目录下

> 我已经通过将样式表放入我的 src 文件夹中解决了这个问题，这不是一个很好的解决方案，但是 ../formm.css 似乎不起作用，不知道为什么

您正在通过[class.getResource](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)方法请求 css 文件，该方法将在类所在的同一位置查找资源。当您将样式表放在 src 文件夹中时，无论您使用什么构建系统，都会在构建期间将样式表复制到与 Login.class 相同的目录中。如果您不将其放在该 src 文件夹中，则不会发生副本。

如果您不想将 css 文件放在与 Java 源代码相同的目录中，则将构建系统设置为从另一个目录复制它，或者在添加样式表时不要使用类加载器机制，例如使用一个绝对文件或 http url 或基于[user.dir 系统属性](http://www.mindspring.com/~mgrand/java-system-properties.htm)（当前工作目录）的文件 url。

确实，只需将样式表放在 src 文件夹中并以您正在做的方式访问它就可以了，而且当您将应用程序部署到不同的环境时，它也使资源定位变得容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T08:49:25.057

如果您将任何东西用作资源，则必须在其名称前加上“/”前缀，并且该资源必须位于类路径中。

我有一个目录的设置，例如资源，其中包含.css。然后我用这个：

```
scene.getStylesheets().add(Login.class.getResource("/loginform.css").toExternalForm()); 
```

包含 .css 文件的目录“resources”被添加到类路径中（例如，在 Eclipse 中，只需将其设为源文件夹）。

然而遗憾的是，这个例外完全没有用；我注意到 .css 是我第一次添加它时的问题。

# intellij-idea - 在 IntelliJ IDEA 中配置 websphere 时出错

> ID：10859922
> 
> 赞同：2
> 
> 时间：2012-06-02T05:02:38.693
> 
> 标签：intellij-idea, websphere

我有 IntelliJ Idea v 10.5.4 终极版，在尝试配置 Websphere 时，这是我看到的错误，即使我提供了正确的 Websphere Home 路径，它也不会继续进行。有人可以帮忙吗。

![在此处输入图像描述](../Images/63381598498fe283aa2198e68ee070bf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:21:50.217

这是 10.5.3 和 10.5.4 版本中的一个[已知错误](http://youtrack.jetbrains.com/issue/IDEA-78275)。`webSphereIntegration.zip`您可以通过下载链接到上述问题的文件并将其解压缩到目录中的损坏版本来修复它`IDEA_HOME\plugins`。

# .net - 如何从 C# 将命令行参数传递给批处理文件

> ID：10859927
> 
> 赞同：0
> 
> 时间：2012-06-02T05:04:05.170
> 
> 标签：.net, process, batch-file, processstartinfo

我想从 c#.net 代码执行一个批处理文件。批处理文件可能需要未知数量的命令行参数。我想从 c# 代码传递这些参数。

如何通过 c# 实现这一点？

编辑：我写了以下代码

```
 ProcessStartInfo psi = new ProcessStartInfo(filePath);
    psi.WindowStyle = ProcessWindowStyle.Hidden;
    psi.CreateNoWindow = true;
    psi.Arguments = "some value";
    Process proc = new Process();
    proc.StartInfo = psi;
    proc.Start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:14:47.150

查看[http://www.dotnetperls.com/process-start-vbnet](http://www.dotnetperls.com/process-start-vbnet)以获得很好的介绍。具体来说，请参阅底部的“运行可执行文件”示例。

如果您需要更多示例，这是我使用的搜索查询[http://www.bing.com/search?q=command+line+parameters+process+start 。](http://www.bing.com/search?q=command+line+parameters+process+start)

# facebook - 在外部链接上发布指向 Facebook 墙的链接失败

> ID：10859929
> 
> 赞同：0
> 
> 时间：2012-06-02T05:04:10.320
> 
> 标签：facebook, ruby-on-rails-3, facebook-graph-api, fb-graph

我在 Rails 3.1 应用程序中使用 fb_graph gem。我希望用户能够从我的网站发布指向他们 Facebook 墙的链接。这是我发布链接的代码：

```
me = FbGraph::User.me fb_token
me.feed!(
  :message => message,
  :link => link_url,
  :name => link_name,
  :description => link_description
) 
```

乍一看，这很好用。链接发布到用户的墙上，用户的消息和链接描述完美显示。

问题是只有返回到我的网站的链接才有效。如果用户点击他们 Facebook 墙上的链接碰巧转到另一个网站，那么他们会看到一个 facebook 错误，上面写着：

> *my-app-name*发生错误。请稍后再试。

在身份验证期间，我请求 publish_actions 和 publish_stream。我还缺少其他权限吗？或者问题可能是我的 FB 应用程序没有正确设置，或者我没有以正确的方式发布链接？非常感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:38:42.083

检查您是否在应用设置中**禁用了迁移***“流帖子 URL 安全性- 如果已* *启用*，则帖子中的链接只能指向应用画布页面或网站。

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:41:28.507

好的，我找到了解决此问题的方法。而不是使用提要！方法，链接！方法完美：

```
me.link!(
  :message => message,
  :link => link_url,
  :name => link_name,
  :description => link_description
) 
```

这不是对这个问题的完全令人满意的答案，因为它更像是一种解决方法，但我想如果其他人遇到同样的问题，我会把它扔在那里。

如果有人对我原来的问题的实际问题有答案，我很乐意切换正确答案！***

# javascript - 如何显示由onclick事件触发的div

> ID：10859930
> 
> 赞同：4
> 
> 时间：2012-06-02T05:04:19.533
> 
> 标签：javascript, html, css

我有两个`div`s。当事件被触发时，我想显示一个`div`（里面有其他的）。`div``onclick`

任何帮助或建议将不胜感激。

![包含提交按钮和另一个 div 的 div 模型](../Images/ae456731d2150b68e8d4b32e056c1b30.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T05:08:35.740

干得好：

```
div{
    display: none;
}

document.querySelector("button").addEventListener("click", function(){
    document.querySelector("div").style.display = "block";
});

<div>blah blah blah</div>
<button>Show</button> 
```

现场演示：http: [//jsfiddle.net/DerekL/p78Qq/](http://jsfiddle.net/DerekL/p78Qq/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-02T05:14:25.957

You'll have to give an ID to the div you want to show/hide, then use this code:

html:

```
<div id="one">
    <div id="tow">
        This is text
    </div>
    <button onclick="javascript:showDiv();">Click to show div</button>
</div> 
```

javascript:

```
function showDiv() {
    div = document.getElementById('tow');
    div.style.display = "block";
} 
```

CSS:

```
​#tow { display: none; }​ 
```

Fiddle: [http://jsfiddle.net/xkdNa/](http://jsfiddle.net/xkdNa/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-02T05:11:03.910

如果你有 div 的 ID，试试这个：

```
 <input type='submit' onclick='$("#div_id").show()'> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-02T05:13:16.020

```
function showstuff(boxid){
   document.getElementById(boxid).style.visibility="visible";
} 
```

```
<button onclick="showstuff('id_to_show');" /> 
```

我想这会对你有所帮助。

# python - 如何将 Python C 扩展中的 PyObject 转换为字符串类型？

> ID：10859931
> 
> 赞同：3
> 
> 时间：2012-06-02T05:04:25.867
> 
> 标签：python, python-c-extension

只是找不到合适的功能。谢谢你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T05:09:19.927

您正在寻找[`PyObject_Str`](http://docs.python.org/c-api/object.html#PyObject_Str)：

> `PyObject* PyObject_Str(PyObject *o)`
> 
> > 返回值：新引用。
> 
> 计算 object 的字符串表示形式`o`。成功时返回字符串表示，`NULL`失败时返回。这相当于 Python 表达式`str(o)`。由`str()`内置函数和`print`语句调用。

# php - 如何使用对 SEO 友好的 apache URLS 更改 php URLS？

> ID：10859936
> 
> 赞同：0
> 
> 时间：2012-06-02T05:05:43.853
> 
> 标签：php, apache, mod-rewrite

所以我从数据库中提取事件，例如`/event-detail.php?id=1`，但我希望它看起来像 /Event-Name/ 。我如何实现这一目标？我对 mod Apache rewrite 有所了解，但不足以知道它是否可以在这里工作。还是我接近这个错误？我是否需要使用名称来提取项目？`/event-detail.php?name=Event Name`? 我真的不想那样做，即使它看起来会容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:13:20.353

否则很难让它工作（我认为）。

试试这个（把它写到服务器 conf 或 .htaccess）：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{SCRIPT_FILENAME} !-d
    RewriteCond %{SCRIPT_FILENAME} !-f
    RewriteRule ^(.*)$ event-detail.php?name=$1 [QSA,L] 
</IfModule> 
```

这将重写 url 并将现有文件和目录以外的所有内容转发到`event-detail.php`脚本。

更多信息，如果用户调用`/myShowEvent1`将被重写为`event-detail.php?name=myShowEvent1`或者用户调用`/event/25366273`将与调用相同`event-detail.php?name=event/25366273`（即如果它们在服务器中不存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:13:34.297

但请记住，您在页面上拥有的所有链接都必须是绝对的，而不是相对的。

试试你自己，你就会知道我在说什么。

# c# - 3D点云分割

> ID：10859938
> 
> 赞同：3
> 
> 时间：2012-06-02T05:05:46.933
> 
> 标签：c#, c++, visual-c++

我正在尝试为我的最后一年项目开发一个分割 3D 点云的程序。我是这个领域的新手。我希望使用 kdtree 和区域增长来开发程序。但我对如何做有点困惑我要开发它。如果有人有任何想法或与此主题相关的任何示例项目，请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:22:22.713

你的问题太广泛了，你不会得到答案。首先调查现有的工具，如[点云库](http://pointclouds.org/)和[lastools](http://www.cs.unc.edu/~isenburg/lastools/)，看看你是否能识别出他们缺少的东西并实现它。我相信您具有该领域的学术背景，并且会知道您的问题是一个巨大的问题。

# blackberry - 在黑莓的 PIM 联系人列表中显示我的联系人照片？

> ID：10859939
> 
> 赞同：1
> 
> 时间：2012-06-02T05:05:47.880
> 
> 标签：blackberry, contact

请任何人告诉我如何使用此代码，我想在屏幕上显示联系人照片。从 getPhoto() 方法获取 null。我进行了很多搜索，但除了来自联系人界面的这段代码外，一无所获。但它不适合我.....!!!

```
 public class PhotoExample {

    private Contact _contact;

    public PhotoExample(Contact contact) throws PIMException {
        ContactList contactList = (ContactList) 
            PIM.getInstance().openPIMList(PIM.CONTACT_LIST, PIM.READ_WRITE);
        _contact = contactList.createContact();
        /*_contact = contact;*/
    }

    public void setPhoto() throws IOException {
        byte[] photo = getSamplePhoto();
        byte[] photoEncoded = Base64OutputStream.encode(photo, 0, photo.length, false, false);
        if (_contact.countValues(Contact.PHOTO) > 0) {
            _contact.setBinary(Contact.PHOTO, 0, PIMItem.ATTR_NONE, photoEncoded, 0, photo.length);
        } else {
            _contact.addBinary(Contact.PHOTO, PIMItem.ATTR_NONE, photoEncoded, 0, photo.length);
        }
    }

    public byte[] getPhoto() throws IOException {
        if (_contact.countValues(Contact.PHOTO) > 0) {
            byte[] photoEncoded = _contact.getBinary(Contact.PHOTO, 0);
            return Base64InputStream.decode(photoEncoded, 0, photoEncoded.length);
        } else {
            return null;
        }
    }

    private static byte[] getSamplePhoto() {
        return null;
        // return the raw bytes of the photo to use
    }

    /*public static void main(String[] args) throws Throwable {
        PhotoExample example = new PhotoExample();
        example.setPhoto();
        example.getPhoto();
    }*/

} 
```

我使用上面的代码是这样的： -

```
try {
            _photo = new PhotoExample(_contact);
             b = _photo.getPhoto();
        } catch (PIMException e) {
            System.out.println(e+"===>");
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println(e+"===>");
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:35:33.397

很长一段时间后，经过几次搜索，我再次尝试了这个任务，现在我成功了，想分享一下，因为这段代码可能对很多人有用。

```
BlackBerryContactList contactList = (BlackBerryContactList)BlackBerryPIM.getInstance().openPIMList(BlackBerryPIM.CONTACT_LIST, BlackBerryPIM.READ_WRITE);
            Enumeration contactListItems = contactList.items();
            while (contactListItems.hasMoreElements()) {
                BlackBerryContact contact = (BlackBerryContact)contactListItems.nextElement();
                byte[] imageBytesBase64 = contact.getBinary(BlackBerryContact.PHOTO, 0);
                byte[] imageBytes = null;
                try {
                    imageBytes = Base64InputStream.decode(imageBytesBase64, 0, imageBytesBase64.length);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                EncodedImage encodedImage = EncodedImage.createEncodedImage(imageBytes, 0, imageBytes.length);
                Bitmap bitmap = encodedImage.getBitmap();
                bitmaps.addElement(bitmap);
                BitmapField fd= new BitmapField(bitmap, Field.FIELD_HCENTER);
                add(fd); 
```

# ruby - 如何删除与 rvm ruby 关联的 gem？

> ID：10859945
> 
> 赞同：0
> 
> 时间：2012-06-02T05:06:47.993
> 
> 标签：ruby, rubygems, gem, rvm

我已经完成`rvm remove`了 Ruby，但宝石仍然存在：

```
$ rvm remove ruby-1.8.7-head
Removing /Users/agrimm/.rvm/src/ruby-1.8.7-head...
Removing /Users/agrimm/.rvm/rubies/ruby-1.8.7-head...
Removing ruby-1.8.7-head aliases...
Removing ruby-1.8.7-head wrappers...
Removing ruby-1.8.7-head environments...
Removing ruby-1.8.7-head binaries...

$ ls /Users/agrimm/.rvm/gems | grep 1.8.7
ruby-1.8.7-head
ruby-1.8.7-head@global 
```

我这样做是因为我想进行一次失败的 gem 安装尝试，但是传统的尝试失败了：

```
$ gem install pkg/laser-0.7.0.pre2.gem 
Fetching: ripper-plus-1.3.0.gem (100%)
Fetching: axiom_of_choice-1.0.0.gem (100%)
Fetching: stream-0.5.gem (100%)
Fetching: object_regex-1.0.1.gem (100%)
Fetching: trollop-1.16.2.gem (100%)
Building native extensions.  This could take a while...
Successfully installed ripper-plus-1.3.0
Successfully installed axiom_of_choice-1.0.0
Successfully installed stream-0.5
Successfully installed object_regex-1.0.1
Successfully installed trollop-1.16.2
Successfully installed laser-0.7.0.pre2
6 gems installed
dyld: lazy symbol binding failed: Symbol not found: _capi_get_constant
  Referenced from: /Users/agrimm/.rvm/gems/ruby-1.8.7-head/gems/json-1.7.1/lib/json/ext/parser.bundle
  Expected in: flat namespace

dyld: Symbol not found: _capi_get_constant
  Referenced from: /Users/agrimm/.rvm/gems/ruby-1.8.7-head/gems/json-1.7.1/lib/json/ext/parser.bundle
  Expected in: flat namespace

f8-1e-df-dc-3b-2a:laser agrimm$ gem install pkg/laser-0.7.0.pre2.gem 
Invalid gemspec in [/Users/agrimm/.rvm/gems/ruby-1.8.7-head/specifications/laser-0.7.0.pre2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x1046be400> 0.5"]
Invalid gemspec in [/Users/agrimm/.rvm/gems/ruby-1.8.7-head/specifications/laser-0.7.0.pre2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x1046be400> 0.5"]
Building native extensions.  This could take a while...
Successfully installed laser-0.7.0.pre2
1 gem installed
dyld: lazy symbol binding failed: Symbol not found: _capi_get_constant
  Referenced from: /Users/agrimm/.rvm/gems/ruby-1.8.7-head/gems/json-1.7.1/lib/json/ext/parser.bundle
  Expected in: flat namespace

dyld: Symbol not found: _capi_get_constant
  Referenced from: /Users/agrimm/.rvm/gems/ruby-1.8.7-head/gems/json-1.7.1/lib/json/ext/parser.bundle
  Expected in: flat namespace

$ gem list laser
Invalid gemspec in [/Users/agrimm/.rvm/gems/ruby-1.8.7-head/specifications/laser-0.7.0.pre2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x104eb6838> 0.5"]

*** LOCAL GEMS ***

Invalid gemspec in [/Users/agrimm/.rvm/gems/ruby-1.8.7-head/specifications/laser-0.7.0.pre2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x104eb6838> 0.5"]

$ gem uninstall laser
Invalid gemspec in [/Users/agrimm/.rvm/gems/ruby-1.8.7-head/specifications/laser-0.7.0.pre2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x104eb6838> 0.5"]
Invalid gemspec in [/Users/agrimm/.rvm/gems/ruby-1.8.7-head/specifications/laser-0.7.0.pre2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x104eb6838> 0.5"]
ERROR:  While executing gem ... (Gem::InstallError)
    cannot uninstall, check `gem list -d laser`

$ gem list -d laser
Invalid gemspec in [/Users/agrimm/.rvm/gems/ruby-1.8.7-head/specifications/laser-0.7.0.pre2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x104eb6838> 0.5"]

*** LOCAL GEMS ***

Invalid gemspec in [/Users/agrimm/.rvm/gems/ruby-1.8.7-head/specifications/laser-0.7.0.pre2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x104eb6838> 0.5"]

$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T05:20:00.073

如果您还想删除 gemsets（和 gems），请在删除 Ruby 时添加[--gems标志。](https://rvm.io/rubies/removing/)Ruby 已经消失了，看来您必须手动完成。

# fancybox - Fancybox 在页面加载时打开，但不再是模态框

> ID：10859955
> 
> 赞同：0
> 
> 时间：2012-06-02T05:10:44.107
> 
> 标签：fancybox, launch

我正在尝试使用我在您的网站上找到的文档就绪功能来强制在页面加载时出现花式灯箱。这是我正在使用的代码，（我在您的网站上找到了它）。它确实会强制fancybox出现在页面加载时，但它会强制它在新页面中打开，并且当我添加 $document 就绪函数时它会丢失它的模态属性。

我不是很技术，但经过数小时的研究和尝试几种方法后，我正在给予和寻求帮助。任何支持将不胜感激。

```
 <link media="all" rel="stylesheet" type="text/css" href="css/all.css" />
<link media="all" rel="stylesheet" type="text/css" href="css/fancybox.css" />
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.fancybox.js"></script>
<script type="text/javascript" src="js/jquery.sameheight.js"></script>
    <script type="text/javascript">
$(document).ready(function() {
    $("#hidden_link").fancybox().trigger('click');
});
</script>

</head>
<body>
<div id="wrapper">
    <a name="hidden_link" id="hidden_link"  a class="lightbox" href="#popup01"></a>
</div>
<div class="popup-holder">
    <div id="popup01" class="lb"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:27:42.993

您的代码是正确的，但您可能错过了为 fancybox 包含 css 或 js 文件。

# wampserver - 如何在 wampserver 上安装 Jobsbox

> ID：10859959
> 
> 赞同：0
> 
> 时间：2012-06-02T05:11:10.617
> 
> 标签：wampserver

如何在 wamp 服务器上安装 Jobsbox（没有数据库密码....）

此字段为空收到此消息“Joobsbox 确实需要一个数据库。请让它有一个。”

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:57:52.810

1.  阅读文档
2.  确保您启用了 PDO 扩展（默认情况下，在较新版本的 WampServer 上）
3.  检查数据库凭据和其他配置值是否正确`config/config.ini.php`
4.  尝试先创建数据库（通常默认安装phpMyAdmin，或者我喜欢使用[MySQL Workbench](http://www.mysql.com/products/workbench/)

# ios - 上传到 AppStore 时，应用程序包装器必须以 .app 结尾

> ID：10859965
> 
> 赞同：1
> 
> 时间：2012-06-02T05:11:54.490
> 
> 标签：ios, upload

当我上传我的应用到 AppStore 时：

应用程序包装必须以 .app 结尾。/var/folders/92/q8js8qtx3 bgq94ncd149rv000gp/Card_Production_Ver1.1.0_GREE/3464sangokushikidist.mobileprovision 无效。

3465sangokushikidist.mobileprovision 无效？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:31:35.070

存档您的项目时，请务必使用您的分发配置文件（查看配置门户以了解如何创建它们）。然后，您可以从存档完成后弹出的那个 XCode 屏幕提交您的应用程序。如果您使用拉链来压缩 ipa，您可能需要阅读[这篇文章](http://developer.anscamobile.com/forum/2012/03/26/application-launcher-error-application-wrapper-must-end-app)。

希望能帮助到你。

干杯!

# mysql - 如何将数据库中的所有表转换为一种排序规则？

> ID：10859966
> 
> 赞同：91
> 
> 时间：2012-06-02T05:12:17.493
> 
> 标签：mysql, sql

我收到错误：

> 非法混合排序规则 (utf8_general_ci,IMPLICIT) 和 (utf8_unicode_ci,IMPLICIT) 用于操作 '='"

我尝试手动更改这两个表，`utf8_general_ci,IMPLICIT`但我仍然收到错误消息。

有没有办法将所有表格转换为`utf8_general_ci,IMPLICIT`并完成它？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-06-02T05:48:16.613

您需要为每个表执行一个 alter table 语句。该声明将遵循以下形式：

```
ALTER TABLE tbl_name
[[DEFAULT] CHARACTER SET charset_name]
[COLLATE collation_name] 
```

现在要获取数据库中的所有表，您需要执行以下查询：

```
SELECT * 
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA="YourDataBaseName"
AND TABLE_TYPE="BASE TABLE"; 
```

所以现在让 MySQL 为你编写代码：

```
SELECT CONCAT("ALTER TABLE ", TABLE_SCHEMA, '.', TABLE_NAME," COLLATE your_collation_name_here;") AS    ExecuteTheString
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA="YourDatabaseName"
AND TABLE_TYPE="BASE TABLE"; 
```

您可以复制结果并执行它们。我没有测试语法，但你应该能够弄清楚其余的。把它想象成一个小练习。

希望有帮助！

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-06-11T13:50:15.803

更好的选择也可以更改表内 varchar 列的排序规则

```
SELECT CONCAT('ALTER TABLE `', TABLE_NAME,'` CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;') AS    mySQL
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA= "myschema"
AND TABLE_TYPE="BASE TABLE" 
```

另外，如果您在启动束脚本之前在非 utf8 列上有带有外键的数据，请使用

```
SET foreign_key_checks = 0; 
```

这意味着全局 SQL 将用于 mySQL ：

```
SET foreign_key_checks = 0;
ALTER TABLE `table1` CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE `table2` CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE `tableXXX` CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
SET foreign_key_checks = 1; 
```

但请注意，如果根据 mysql 文档[http://dev.mysql.com/doc/refman/5.1/en/charset-column.html](http://dev.mysql.com/doc/refman/5.1/en/charset-column.html)，

> 如果使用 ALTER TABLE 将列从一个字符集转换为另一个，MySQL 会尝试映射数据值，但如果字符集不兼容，则可能会丢失数据。"

编辑：特别是对于列类型枚举，它只是使枚举集完全崩溃（即使没有特殊字符） [https://bugs.mysql.com/bug.php?id=26731](https://bugs.mysql.com/bug.php?id=26731)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-11-19T00:06:35.920

@Namphibian 的建议对我有很大帮助......
不过更进一步，并在脚本中添加了列和视图

只需在下面输入您的架构名称，剩下的就交给它了

```
-- set your table name here
SET @MY_SCHEMA = "";

-- tables
SELECT DISTINCT
    CONCAT("ALTER TABLE ", TABLE_NAME," CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;") as queries
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA=@MY_SCHEMA
  AND TABLE_TYPE="BASE TABLE"

UNION

-- table columns
SELECT DISTINCT
    CONCAT("ALTER TABLE ", C.TABLE_NAME, " CHANGE ", C.COLUMN_NAME, " ", C.COLUMN_NAME, " ", C.COLUMN_TYPE, " CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;") as queries
FROM INFORMATION_SCHEMA.COLUMNS as C
    LEFT JOIN INFORMATION_SCHEMA.TABLES as T
        ON C.TABLE_NAME = T.TABLE_NAME
WHERE C.COLLATION_NAME is not null
    AND C.TABLE_SCHEMA=@MY_SCHEMA
    AND T.TABLE_TYPE="BASE TABLE"

UNION

-- views
SELECT DISTINCT
    CONCAT("CREATE OR REPLACE VIEW ", V.TABLE_NAME, " AS ", V.VIEW_DEFINITION, ";") as queries
FROM INFORMATION_SCHEMA.VIEWS as V
    LEFT JOIN INFORMATION_SCHEMA.TABLES as T
        ON V.TABLE_NAME = T.TABLE_NAME
WHERE V.TABLE_SCHEMA=@MY_SCHEMA
    AND T.TABLE_TYPE="VIEW"; 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-10-19T04:02:58.370

下面是更准确的查询。我正在举例说明如何将其转换为 utf8

```
SELECT CONCAT("ALTER TABLE `", TABLE_NAME,"` DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;") AS    mySQL
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA="myschema"
AND TABLE_TYPE="BASE TABLE" 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2020-08-07T02:24:17.027

如果您使用的是 PhpMyAdmin，您现在可以：

1.  选择数据库。
2.  单击“操作”选项卡。
3.  在“排序规则”部分下，选择所需的排序规则。
4.  单击“更改所有表排序规则”复选框。
5.  将出现一个新的“更改所有表格列排序规则”复选框。
6.  单击“更改所有表列排序规则”复选框。
7.  单击“开始”按钮。

我有超过 250 个表格要转换。花了5分钟多一点。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-07-03T10:23:27.817

你可以使用这个 BASH 脚本：

```
#!/bin/bash

USER="YOUR_DATABASE_USER"
PASSWORD="YOUR_USER_PASSWORD"
DB_NAME="DATABASE_NAME"
CHARACTER_SET="utf8" # your default character set
COLLATE="utf8_general_ci" # your default collation

tables=`mysql -u $USER -p$PASSWORD -e "SELECT tbl.TABLE_NAME FROM information_schema.TABLES tbl WHERE tbl.TABLE_SCHEMA = '$DB_NAME' AND tbl.TABLE_TYPE='BASE TABLE'"`

for tableName in $tables; do
    if [[ "$tableName" != "TABLE_NAME" ]] ; then
        mysql -u $USER -p$PASSWORD -e "ALTER TABLE $DB_NAME.$tableName DEFAULT CHARACTER SET $CHARACTER_SET COLLATE $COLLATE;"
        echo "$tableName - done"
    fi
done 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-10-06T11:48:24.203

对于 phpMyAdmin，我发现了这一点：

```
SELECT GROUP_CONCAT("ALTER TABLE ", TABLE_SCHEMA, '.', TABLE_NAME," CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;" SEPARATOR ' ') AS    OneSQLString
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA="yourtableschemaname"
AND TABLE_TYPE="BASE TABLE" 
```

只需更改您的tableschemaname 就可以了。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-10-11T10:55:37.683

这是我的 bash 脚本版本。它将数据库名称作为参数，并将所有表转换为另一个字符集和排序规则（由脚本中定义的另一个参数或默认值给出）。

```
#!/bin/bash

# mycollate.sh <database> [<charset> <collation>]
# changes MySQL/MariaDB charset and collation for one database - all tables and
# all columns in all tables

DB="$1"
CHARSET="$2"
COLL="$3"

[ -n "$DB" ] || exit 1
[ -n "$CHARSET" ] || CHARSET="utf8mb4"
[ -n "$COLL" ] || COLL="utf8mb4_general_ci"

echo $DB
echo "ALTER DATABASE $DB CHARACTER SET $CHARSET COLLATE $COLL;" | mysql

echo "USE $DB; SHOW TABLES;" | mysql -s | (
    while read TABLE; do
        echo $DB.$TABLE
        echo "ALTER TABLE $TABLE CONVERT TO CHARACTER SET $CHARSET COLLATE $COLL;" | mysql $DB
    done
) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-09-06T20:33:50.127

通过添加密码变量，进一步从@Petr Stastny 获得答案。如果它实际上像普通密码而不是作为参数一样接收它，我更喜欢它，但它可以满足我的需要。

```
#!/bin/bash

# mycollate.sh <database> <password> [<charset> <collation>]
# changes MySQL/MariaDB charset and collation for one database - all tables and
# all columns in all tables

DB="$1"
PW="$2"
CHARSET="$3"
COLL="$4"

[ -n "$DB" ] || exit 1
[ -n "$PW" ]
[ -n "$CHARSET" ] || CHARSET="utf8mb4"
[ -n "$COLL" ] || COLL="utf8mb4_bin"

PW="--password=""$PW"

echo $DB
echo "ALTER DATABASE $DB CHARACTER SET $CHARSET COLLATE $COLL;" | mysql -u root "$PW"

echo "USE $DB; SHOW TABLES;" | mysql -s "$PW" | (
    while read TABLE; do
        echo $DB.$TABLE
        echo "ALTER TABLE $TABLE CONVERT TO CHARACTER SET $CHARSET COLLATE $COLL;" | mysql "$PW" $DB
    done
)

PW="pleaseEmptyMeNow" 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-01-03T09:56:45.560

从 GH 开始，我添加了用户和主机参数，以防您需要在远程服务器上执行此操作

```
 #!/bin/bash

    # mycollate.sh <database> <user> <password> [<host> <charset> <collation>]
    # changes MySQL/MariaDB charset and collation for one database - all tables and
    # all columns in all tables

    DB="$1"
    USER="$2"
    PW="$3"
    HOST="$4"
    CHARSET="$5"
    COLL="$6"

    [ -n "$DB" ] || exit 1
    [ -n "$USER" ] || exit 1
    [ -n "$PW" ] || exit 1
    [ -n "$HOST" ] || HOST="localhost"
    [ -n "$CHARSET" ] || CHARSET="utf8mb4"
    [ -n "$COLL" ] || COLL="utf8mb4_general_ci"

    PW="--password=""$PW"
    HOST="--host=""$HOST"
    USER="--user=""$USER"

    echo $DB
    echo "ALTER DATABASE $DB CHARACTER SET $CHARSET COLLATE $COLL;" | mysql "$HOST" "$USER" "$PW"

    echo "USE $DB; SHOW TABLES;" | mysql  "$HOST" "$USER" "$PW" | (
        while read TABLE; do
            echo $DB.$TABLE
            echo "ALTER TABLE $TABLE CONVERT TO CHARACTER SET $CHARSET COLLATE $COLL;" | mysql  "$HOST" "$USER" "$PW" $DB
        done
    )

    PW="pleaseEmptyMeNow" 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-02-10T08:59:33.703

如果你想要一个复制粘贴 bash 脚本：

```
var=$(mysql -e 'SELECT CONCAT("ALTER TABLE ", TABLE_NAME," CONVERT TO CHARACTER SET utf8 COLLATE utf8_czech_ci;") AS execTabs FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA="zabbix" AND TABLE_TYPE="BASE TABLE"' -uroot -p )

var+='ALTER DATABASE zabbix CHARACTER SET utf8 COLLATE utf8_general_ci;'

echo $var | cut -d " " -f2- | mysql -uroot -p zabbix 
```

将 zabbix 更改为您的数据库名称。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-03-03T20:28:10.787

***我将使用 MySQL 程序分享我的答案。您需要运行 3 条 sql 命令。***

## 1.

```
DROP PROCEDURE IF EXISTS UpdateTable; 
```

## 2.

```
DELIMITER $$

CREATE PROCEDURE UpdateTable()
BEGIN

    DECLARE done INT DEFAULT FALSE;
    DECLARE _table_name CHAR(255);
    DECLARE cur CURSOR FOR
            SELECT table_name FROM information_schema.tables
            WHERE table_schema = 'my_db_name' AND table_type = "BASE TABLE";
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    OPEN cur;
    My_loop: LOOP
        FETCH cur INTO _table_name;
        SET @my_table_name = _table_name;

        IF done THEN
          LEAVE My_loop;
        END IF;

        SET FOREIGN_KEY_CHECKS = 0;

        SET @stmt = CONCAT('ALTER TABLE ', @my_table_name, ' CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;'); 
        PREPARE stmt1 FROM @stmt; 
        EXECUTE stmt1; 
        DEALLOCATE PREPARE stmt1;   

        SET FOREIGN_KEY_CHECKS = 1;

    END LOOP;
    CLOSE cur;

END$$

DELIMITER ; 
```

## 3.

```
CALL UpdateTable(); 
```

然后再次运行第一个。如果您不想存储该过程。

# javascript - 在小屏幕上固定定位的 html div 有什么好的解决方案？

> ID：10859967
> 
> 赞同：1
> 
> 时间：2012-06-02T05:12:33.150
> 
> 标签：javascript, html, css, css-position, sticky

我正在构建的 HTML 页面的右侧有一个固定位置的 div。当页面滚动时，这个 div 是粘性的。问题是在较小的屏幕上，一些内容被隐藏了，因为它不完全适合页面（例如：http: [//jsfiddle.net/uJN4Q/](http://jsfiddle.net/uJN4Q/)）。

我试图通过将内容放入`div`容器内部`div`，将容器设置`div`为具有`bottom`值，将内部 div 设置为容器 div 高度的 100%，并设置`overflow: auto`内部 div 来解决此问题。这个解决方案的问题在于，在更大的屏幕上，内部 div 的底部会出现大量难看的空白。

任何想法如何使它可以看到整个文本，div 仍然是`position: fixed`，并且 div 的底部“粘”到文本的最后一行，所以 div 的底部没有空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:17:57.243

How about a CSS @media query?

```
@media (max-width: 600px) {
    #sticky_part {
        position: absolute;
        top: 0; 
        left: 0;
        width: 100%;
        height: 35px;
    }
} 
```

When the document is small enough, this sticky part will shoot to the top so it doesn't interrupt the other content on your site. My microblog, [http://jscal.es](http://jscal.es), uses this technique.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:49:05.677

我认为您应该使用 CSS 媒体查询来检测设备宽度和高度，并相应地将 css 应用于该 div。

```
@media screen and (min-width: 960px) {
  div{position:absolute;/*Or whatever u want*/
} 
```

或者

您可以使用 Javascript 来检测设备，这是使用 css 和 javascript 执行此操作的链接：

[http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

# jquery - 弹跳球、钟摆或 jQuery 中的任何其他时间增量加法系统？

> ID：10859969
> 
> 赞同：1
> 
> 时间：2012-06-02T05:12:52.860
> 
> 标签：jquery, physics

![在此处输入图像描述](../Images/83e41d1408821f58ba1c54b6cd790ece.png)

> **拼图**
> 
> 1.  我不明白为什么函数会`+=`导致有点振荡 - 模式。我预计振荡模式需要改变加法的符号，`right: '+=50'`但没有。我预计会有 100、150、200、250 等。但它看起来像 50,0,50,0,50,0 一样移动，为什么？
>     
>     
> 2.  我怎样才能用类似的东西创建一个振荡点`+=50/log(time)`？

**TRIAL 1：尝试理解 jQuery 中的增量添加**

```
<!DOCTYPE html>
<html>
<head>
  <style>
div { 
background-color:#bca; 
width:100px; 
border:1px solid green;
}
</style>
  <script src="scripts/jquery-1.7.2.min.js"></script>
</head>
<body>

<div id="clickme">
  Click here
</div>
<div    id='ball'
    style='width:100px; height:100px; position:relative; left:10px;'></div>

<script>
    // PASTE T2 or T3 from below.
</script>
</body> 
```

**TRIAL 2：控制振荡的按钮，为什么是0-50-0-50-etc？**

```
 /*TODO: automatically trigger*/
    /*TODO: Traversing wave with 50/log(time)*/
    $('#clickme').click(function() {
      $('#ball').animate({
        opacity: 0.25,
        left: '+=50',  // I CANNOT UNDERSTAND THIS: functionality and how time?
        right: '+=50',
        height: 'toggle'
      }, 2000, function() {
        // Animation complete.
      });
    }); 
```

**试验 3：尝试使用 setInterval 立即使代码工作，不确定延迟在哪里，但无论如何都会再次燃烧，即无法正常工作......使用以下内容**

```
 while (true)
    {
            setInterval(
                    $('#ball').animate({
                          opacity: 0.25,
                          left: '+=50',
                          right: '+=50',
                          height: 'toggle'
                          }, 5000, function() {
                          // Animation complete.
                          }),
                    10000
                    );
    }; 
```

*Ps ...要快速测试以下内容，请使用`$ mkdir scripts; cd scripts; wget http://code.jquery.com/jquery-1.7.2.min.js`.*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:45:12.597

这可以从以下内容开始：

```
<div id='ball' style='width:100px; height:100px; position:relative; top:0px; left:0px;'>                    
</div>
<script>
    var angle = -180;
    var left = 0;
    var topv = 0;
    function updatePos() {
       angle = angle + 2;
       left += Math.cos(angle/360*Math.PI);
       $('#ball').css('left',left);
       topv += Math.cos(angle/360*Math.PI);
       $('#ball').css('top',topv);    
    }
    setInterval('updatePos()',10);
</script> 
```

我用余弦代替对数，因为你问的是振荡，你可以很容易地替换它。

编辑：在您的最后一个示例中，您有几个问题：

*   你不需要 while 循环，`setInterval(callback,interval)`将调用你的`callback`每`interval`毫秒（直到你用 ot 停止`clearInterval()`）
*   如果您使用动画或任何类似的功能，我认为您应该只依赖它并保持“高于”它；否则您可能最终会干扰或弄乱事件队列（您的和内置的）

# javafx - Javafx 内存不足错误

> ID：10859970
> 
> 赞同：0
> 
> 时间：2012-06-02T05:12:57.617
> 
> 标签：javafx

我正在尝试运行简单的 JavaFx(2.0) 应用程序，它将三个图像显示为缩略图。操作系统是 Windows7，我使用的是 NetBeans 7.2 代码是这样的——

```
public class FX17 extends Application{

    public static void main(String[] args){
        launch(args);
    }
    public void start(Stage stage){

        HBox photoBar = new HBox();
        Group root = new Group();
        File f1 = new File("C:\\Users\\Pictures\\IMG_0021.jpg");
        File f2 = new File("C:\\Users\\Pictures\\IMG_0022.jpg");
        File f3 = new File("C:\\Users\\Pictures\\IMG_0023.jpg");

        Image i1 = new Image(f1.toURI().toString());
        Image i2 = new Image(f2.toURI().toString());
        Image i3 = new Image(f3.toURI().toString());
        ImageView iv1 = new ImageView(i1);
        //iv1.setImage(i1);
        iv1.setFitWidth(50);
        iv1.setPreserveRatio(true);
        iv1.setCache(true);

        ImageView iv2 = new ImageView(i2);
        //iv2.setImage(i2);
        iv2.setFitWidth(50);
        iv2.setPreserveRatio(true);
        iv2.setCache(true);

        ImageView iv3 = new ImageView(i3);
       // iv3.setImage(i3);
        iv3.setFitWidth(50);
        iv3.setPreserveRatio(true);
        iv3.setCache(true);

       photoBar.getChildren().add(iv1);
        photoBar.getChildren().add(iv2);
        photoBar.getChildren().add(iv3);
        //C:\Users\Public\Pictures\Sample Pictures

        BorderPane pane = new BorderPane();
        pane.setTop(photoBar);
        root.getChildren().add(photoBar);
        //pane.setLeft(linkBar);

        Scene scene = new Scene(root);
        scene.setFill(Color.BLACK);

        stage.setScene(scene);
        stage.setWidth(415);
        stage.setHeight(200);
        stage.sizeToScene();
        stage.show();
    }

} 
```

对于两个图像程序运行并显示两个缩略图，但对于 3 个或更多图像，程序会抛出 OutOfMemoryError。图片为 jpg，平均大小为 2.5MB。我需要检查一些设置或图像格式吗？以下构造函数对我来说很好。Image img = new Image(file.toURI().toString(),100,100,false,false);纵横比，平滑为false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:38:13.897

我猜你的 jpg 在高度和宽度方面非常大。

jpg 与加载的图像缓冲区所占用的内存是不同的。加载的图像是解码的未压缩位图，取决于图像的高度/宽度/颜色深度，而不是原始 jpg 文件大小。

要修复 OutOfMemory 情况：

1.  使用程序外部的图像编辑器将 jpg 的大小调整为更小的高度和宽度（和/或更低的颜色深度）和/或
2.  一次只将一个 jpg 加载到内存中，而不是同时加载三个和/或
3.  增加 Java 应用程序可用的内存（例如 -Xmx1500m）和/或
4.  在图像构造函数而不是图像视图中指定大小。

在图像构造函数中指定大小可确保加载图像后，Java 仅保留足够大的缓冲区以容纳调整大小的图像，而不是完整大小的未压缩图像。

# c# - 使用 OLEDB 读取 .xlsx 文件 + 某些单元格未加载数据的问题

> ID：10859971
> 
> 赞同：3
> 
> 时间：2012-06-02T05:13:07.003
> 
> 标签：c#, excel, oledb

希望有人可以在这里帮助我...

我正在尝试将 .xlsx 文件加载到 DataTable 中，然后使用 C#.Net 处理信息。

启动并运行基础知识，使用 OLEDB 连接，加载数据并将其输出到 DataGridView 以检查数据。

我遇到的问题是某些单元格（只有少数）不加载包含在 excel 文件中的数据。例如，在我的示例单元格“C3”中，它是一个通用格式的单元格，就像 excel 中这一行上的所有其他单元格一样，它不会加载其内容。

实际的 Cell 应该作为 MEMBERSHIP 加载，但是在将其输出到 gridview 时它显示为空白，或者在调试 DataRow / Col 值时它是空白的，即使 excel 文件中有该单元格的数据也是如此。如果我将此单元格 MEMBERSHIP 的内容更改为 123456 之类的数字，则它可以加载此值，但如果我将值更改回字符，它会再次返回空白。

大多数单元格（15 个中的 13 个）加载到该行上，除了 2 个，并且它们具有相同的格式。

这是我在代码中使用的连接字符串，实际上是从这个站点获得的:)：

```
try
{

string tabsheet = Path.GetFileNameWithoutExtension(FullFileName); 
string connectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FullFileName + ";" + "Extended Properties='Excel 12.0 Xml;HDR=NO'";

var adapter = new OleDbDataAdapter("SELECT * FROM [" + tabsheet + "$]",connectionString);

adapter.Fill(aDataTable); 
}
catch (Exception er)
{
logfile.AddToFile("GetDataTableFromCsv exception: " + er.Message);
} 
```

卡住了，救命！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T05:39:45.857

我的猜测是，在同一列上方的同一列中有几个单元格，其中字符串值为“MEMBERSHIP”是数字。这会导致 OLEDB 推断这些列中的数据是数字的，因此将忽略非数字值。

解决方案是在您的 conn 字符串的扩展属性部分中包含 IMEX=1：

```
string connectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FullFileName + ";" + "Extended Properties='Excel 12.0 Xml;HDR=NO;IMEX=1;'"; 
```

[connectionstrings.com](http://www.connectionstrings.com/excel)上的 Excel 条目解释了此属性设置，并且还有一个警告：

> “IMEX=1；” 告诉驱动程序始终将“混合”（数字、日期、字符串等）数据列作为文本读取。请注意，此选项可能会对 excel 工作表写入访问产生负面影响。

# ruby-on-rails - 如何在 rails 3.0.0 中安装 Wicked PDF gem

> ID：10859975
> 
> 赞同：1
> 
> 时间：2012-06-02T05:13:36.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

现在我正在使用 Rails 3.0.0 版本。我想安装 Wicked pdf gem。我不知道如何安装那个gem。请告诉我一步一步的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-19T17:19:15.337

这真的很容易！

1.  将此添加到 Gem 文件！

    ```
    gem 'wicked_pdf'
    gem 'wkhtmltopdf-binary', '~> 0.12.3' 
    ```

2.  运行**捆绑安装**并运行`rails generate wicked_pdf`

3.  在**config/initializers/mime_types.rb**添加这个（或取消注释）

    ```
    WickedPdf.config = {
         exe_path: '/usr/local/bin/wkhtmltopdf'
    } 
    ```

4.  在您的控制器中（显示操作）

    ```
    def show
        respond_to do |format|
            format.pdf do
              render :pdf => "file_name.pdf", :template => 'file_directory/file_name.html.erb', :encoding => 'utf-8'
            end
            format.html
    end end 
    ```

5.  创建一个**erb.html**文件并将您的 pdf 代码放入其中。

6.  鉴于您必须为您的 link_to 标签使用路由**控制器#show！**

7.  祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:18:32.293

use the command `gem install wicked_pdf` .See the documentation here. [http://rubygems.org/gems/wicked_pdf](http://rubygems.org/gems/wicked_pdf) & [http://rubydoc.info/gems/wicked_pdf/0.7.9/frames](http://rubydoc.info/gems/wicked_pdf/0.7.9/frames)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-29T18:33:52.700

提醒在更改 config/initializers/mime_types.rb 文件后重新启动服务器。除此之外，Afsanefda 的回答对我有用。

# javascript - 在搜索框中为 Onfocus 事件添加字体颜色

> ID：10859977
> 
> 赞同：1
> 
> 时间：2012-06-02T05:14:05.457
> 
> 标签：javascript, html

如何在我的搜索框中添加默认值的颜色和字体。

```
<input type="text" name="q" value="Enter your keywords here"    
onfocus="if (this.value == 'Enter your keywords here') {this.value = '';}" onblur="if (this.value   == '') {this.value = 'Enter your keywords here';}"
onwebkitspeechchange = "this.value = this.value.replace('Enter your keywords here','')";
x-webkit-speech style="left:9px;top:4px;position:relative;background-color:#fafafa;border:1px     solid;color:#333;font-size:1.4em;width:400px;height:28px"; /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:10:00.063

您可以设置输入框的默认样式，然后更改 onfocus 和 onblur 事件的颜色，如下所示：

```
<input type="text" name="q" value="Enter your keywords here"    
    onfocus="if (this.value == 'Enter your keywords here') {
        this.value = ''; 
        this.style.color = '#000';
    }" 
    onblur="if (this.value == '') {
        this.value = 'Enter your keywords here'; 
        this.style.color = '#CCC';
    }"
    onwebkitspeechchange = "this.value = this.value.replace('Enter your keywords here','')";
    x-webkit-speech 
    style="left:9px;top:4px;position:relative;background-color:#fafafa;border:1px solid; color:#CCC;font-size:1.4em;width:400px;height:28px"; 
/> 
```

您绝对应该考虑将此事件代码放在单独的脚本中，以使您的代码看起来更干净。

您还可以查看this fiddle以获得更简洁的代码。 [http://jsfiddle.net/MXpSw/](http://jsfiddle.net/MXpSw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T06:12:25.493

改变风格的颜色......

```
<input type="text" name="q" value="Enter your keywords here"    
onfocus="if (this.value == 'Enter your keywords here') {this.value = '';}" onblur="if (this.value   == '') {this.value = 'Enter your keywords here';}"
onwebkitspeechchange = "this.value = this.value.replace('Enter your keywords here','')";
x-webkit-speech style="left:9px;top:4px;position:relative;background-color:#fafafa;border:1px solid     #555;color:#aaa;font-size:1.4em;width:400px;height:28px"; /> 
```

# javascript - HTML5 拖放文件字段

> ID：10859988
> 
> 赞同：0
> 
> 时间：2012-06-02T05:16:29.880
> 
> 标签：javascript, jquery, html, file-upload

我想通过拖放功能增强关键表单。我知道现代浏览器可以通过 HTML5 文件 API 实现这一点。

但是我不想即时上传或上传多个文件，我只是在寻找旧式文件字段的重复功能。

在做了一些研究之后，我发现 HTML5 文件 API 需要从表单的其余部分（蹩脚）独立上传。这不是所需的行为。

因此，我随后考虑制作一个标准文件字段并将其设置为`position : absolute; visibility : hidden;`并且必须在 dropZone 内通过`.mousemove`. 但这是不可能的，因为当用户抓取他们的文件时，浏览器窗口不在焦点上！

我还尝试使文件字段变得巨大且不可见，但是以这种方式设置字段的样式是不可能的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:55:57.047

这是最终的工作，`opacity : 0`当鼠标悬停在可见的 dropZone 上时`div`，我通过`'dragover'`事件将香草上传字段设置为并将其定位在鼠标下方。

`'dragover'`克服了浏览器窗口失焦的问题，并提供了`.pageX`，`.pageY`然后我将其绑定到不可见文件字段的`.top`and `.left`.

然而，文件字段的结果位置在 osx 和 windows 操作系统上是不同的，因此必须根据操作系统适当地放置文件字段。我在下面粘贴我的工作代码，并且我编写了一个检测浏览器、操作系统和设备的库。因此，您将需要找到自己的方法来检测 osx 与 windows。

```
dropText  = $ '#dropText'
jdropZone = $ '#resume'
fileField = $ '#draggy'

unless $.browser.msie

    `var addEvent=(function(){if(document.addEventListener){return function(el,type,fn){if(el&&el.nodeName||el===window){el.addEventListener(type,fn,false)}else if(el&&el.length){for(var i=0;i<el.length;i++){addEvent(el[i],type,fn)}}}}else{return function(el,type,fn){if(el&&el.nodeName||el===window){el.attachEvent('on'+type,function(){return fn.call(el,window.event)})}else if(el&&el.length){for(var i=0;i<el.length;i++){addEvent(el[i],type,fn)}}}}})();(function(){var pre=document.createElement('pre');pre.id="view-source";addEvent(window,'click',function(event){if(event.target.hash=='#view-source'){if(!document.getElementById('view-source')){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(this.readyState==4&&this.status==200){pre.innerHTML=this.responseText.replace(/[<>]/g,function(m){return{'<':'&lt;','>':'&gt;'}[m]});prettyPrint()}};document.body.appendChild(pre);xhr.open("GET",window.location,true);xhr.send()}document.body.className='view-source';var sourceTimer=setInterval(function(){if(window.location.hash!='#view-source'){clearInterval(sourceTimer);document.body.className=''}},200)}})})();`

    x = 0
    y = -50

    x = -200 unless device.mac
    x = -130 if device.mac      

    #alert x

    dragover = (e) ->
        #e.preventDefault()
        fileField.css top : e.pageY+y, left : e.pageX+x

    dropZone = document.getElementById 'resume'

    addEvent dropZone, 'dragover', dragover

    fileField.on 'change', ->
        fieldVal = fileField.attr 'value'
        fieldVal = fieldVal.split 'fakepath'
        fieldVal = fieldVal[fieldVal.length-1]
        fieldVal = fieldVal.substr 1, fieldVal.length if $.browser.webkit
        dropText.text 'Your Resume: '+fieldVal

else

    fileField.css
        position : 'static'
        opacity  : 1
    dropText.text 'Upload Your Resume Here: ' 
```

# matlab - 用“if/else”以更优雅的方式编写一个 for/while 循环？

> ID：10859990
> 
> 赞同：0
> 
> 时间：2012-06-02T05:16:48.107
> 
> 标签：matlab, if-statement, for-loop, vectorization

我写了这段代码：

`A`是一个`nXm`矩阵

```
[nA, mA] = size(A);

currentVector(nA,mA) = 0;
for i = 1: nA
    for j = 1 : mA
        if A (i,j) ~= 0
            currentVector(i,j) = ceil(log10( abs(A(i,j)) ));
        else
            currentVector(i,j) = 0;
        end
    end
end 
```

如何以更“matlab”的方式编写上述代码？

if/else 和 for 循环是否有任何快捷方式？例如在`C`：

```
int a = 0;
int b = 10;
a = b > 100 ? b : a; 
```

这些`if/else`条件一直让我想起`C`和`Java`。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T05:24:17.573

```
%# initialize a matrix of zeros of same size as A
currentVector = zeros(size(A));

%# find linear-indices of elements where A is non-zero
idx = (A ~= 0);

%# fill output matrix at those locations with the corresponding elements from A
%# (we apply a formula "ceil(log10(abs(.)))" to those elements then store them)
currentVector(idx) = ceil(log10( abs(A(idx)) )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:26:59.497

```
currentVector =  ceil(log10(abs(A)));
currentVector(A == 0) = 0; 
```

注意：在 Matlab 中应用对零的登录是完全合法的 - 结果是：-inf。

# c# - 景观应用栏

> ID：10859995
> 
> 赞同：1
> 
> 时间：2012-06-02T05:17:56.440
> 
> 标签：c#, windows-phone-7

当 Windows Phone 处于横向模式（如 IE）时，我需要横向视图中的应用程序栏。因为在横向模式下，应用程序栏在右侧或左侧，所以我的一些内容（链接）不可见（链接）。谁能帮我？提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:25:27.737

[如此处](http://forums.create.msdn.com/forums/p/100703/598355.aspx)所述，本机应用程序栏没有可能的解决方案。[但是你可以像这样](http://coding4fun.codeplex.com/)使用一些第三方控件。

这里的想法是：您可以将 Coding4Fun 工具包提供的 RoundButtons 放入单独的 Grid 中。然后将此网格附加到 XAML 页面的底部。在这种情况下，您将模拟应用程序栏。

# javascript - How to modify Elastislide so it loops infinitely

> ID：10859998
> 
> 赞同：3
> 
> 时间：2012-06-02T05:19:08.277
> 
> 标签：javascript, carousel, infinite-loop, responsive-design

I've been searching for an image carousel that will display several images at once, is responsive and loops infinitely.

Elastislide seems to be the most suitable ( [http://tympanus.net/Development/Elastislide/index2.html](http://tympanus.net/Development/Elastislide/index2.html) ).

The only other practical option I've been able to find is Liquid Carousel by John Nikolakis which seems to be a fair bit older and less elegant.

I've got Elastislide to autoplay (sort of), using a similar method to the The clearTimeout() Method shown at [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp), but once it reaches the end it stops, as the timing is just calling the next button (.es-nav-next).

I'm hoping someone can help me with modifying Elastislide to make it loop infinitely - or I'm open to suggestions for a different solution which meets my 3 requirements (listed above).

At the moment I'm working on a local installation of OpenCart but I can put up a static sample and provide a link if that helps.

Any help or advice would be greatly appreciated, have spent many hours on this so far as I'm a complete amateur at javascript :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T11:36:39.583

Elastislide 代码已经进化，上述解决方案不起作用。所以我开发了自己的解决方案。

此代码使 elastislide 自动播放，当到达最后一张幻灯片时，它返回到第一张幻灯片，比无限循环轮播更符合人体工程学。

这段代码应该加在`_initEvents`var之后的函数中`self = this;`

```
var translation = 0;
// width/height of an item ( <li> )
var itemSpace = this.options.orientation === 'horizontal' ? this.$items.outerWidth( true ) : this.$items.outerHeight( true );
// total width/height of the <ul>
var totalSpace = this.itemsCount * itemSpace;
// visible width/height
var visibleSpace = this.options.orientation === 'horizontal' ? this.$carousel.width() : this.$carousel.height();
//slide auto
window.setInterval(function(){
    //test if we should go to next slide or return to first slide
    if(totalSpace > translation + visibleSpace)
    {
        //go to next slide
        self._slide('next');
        //update translation
        translation += visibleSpace;
    }
    else
    {
        //return to first slide (infinite loop is too bad for ergonomics)
        self._slideTo(0);
        //set translation to 0
        translation = 0;
    }
}, 7000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T17:15:41.397

此代码创建一个无限循环，保留动画并在页面上显示的元素多于页面时在两侧显示导航按钮。功能与`_toggleControls`原始版本相同。

```
// modified version of _slide
_slide              : function( dir, val, anim, callback ) {

        // if animating return
        if( this.$slider.is(':animated') )
            return false;

        // current margin left
        var ml      = parseFloat( this.$slider.css('margin-left') );

        // val is just passed when we want an exact value for the margin left (used in the _slideToCurrent function)
        if( val === undefined ) {

            // how much to slide?
            var amount  = this.fitCount * this.itemW, val;

            if( amount < 0 ) return false;

            // make sure not to leave a space between the last item / first item and the end / beggining of the slider available width
            if( dir === 'right' && this.sliderW - ( Math.abs( ml ) + amount ) < this.visibleWidth ) {
                for (var i=0;i<this.fitCount;i++) { // add elements
                    this.$slider.css('margin-left', '+=' + this.itemW );
                    this.$slider.append( this.$slider.children('li:first').clone() ) ;
                    this.$slider.children('li:first').remove();
                }
            } else if ( dir === 'left' && Math.abs( ml ) - amount < 0 ) {
                for (var i=0;i<this.fitCount;i++) { // add elements
                    this.$slider.css('margin-left', '-=' + this.itemW );
                    this.$slider.prepend( this.$slider.children('li:last').clone() ) ;
                    this.$slider.children('li:last').remove();
                }
            }

            ( dir === 'right' ) ? val = '-=' + amount : val = '+=' + amount

        }
        else {
            var fml     = Math.abs( val ); // future margin left

            if( Math.max( this.sliderW, this.visibleWidth ) - fml < this.visibleWidth ) {
                val = - ( Math.max( this.sliderW, this.visibleWidth ) - this.visibleWidth );
                if( val !== 0 )
                    val += this.options.margin; // decrease the margin left if not on the first position

                // show / hide navigation buttons
                this._toggleControls( 'right', -1 );
                fml = Math.abs( val );
            }

            // show / hide navigation buttons
            if( this.fitCount < this.itemsCount )
                this._toggleControls( 'left', 1 );
            else
                this._toggleControls( 'left', -1 );

            if( Math.max( this.sliderW, this.visibleWidth ) - this.visibleWidth > fml + this.options.margin )   
                this._toggleControls( 'right', 1 );
            else
                this._toggleControls( 'right', -1 );

        }

        $.fn.applyStyle = ( anim === undefined ) ? $.fn.animate : $.fn.css;

        var sliderCSS   = { marginLeft : val };

        var instance    = this;

        this.$slider.applyStyle( sliderCSS, $.extend( true, [], { duration : this.options.speed, easing : this.options.easing, complete : function() {
            if( callback ) callback.call();
        } } ) );

    }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T18:02:59.900

我遇到了与 OP 相同的麻烦，但无法使上述任何一种解决方案都能正常工作。不确定我是否做错了什么，或者自编写这些解决方案以来 Elastislide 代码是否发生了变化。

我找到了这个插件，它似乎满足了 OP 的所有相同标准：具有自动播放和无限循环的响应式轮播。

[http://caroufredsel.dev7studios.com/](http://caroufredsel.dev7studios.com/)

希望这可以帮助以与我相同的方式找到这篇文章的其他人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T14:18:53.810

我通过破解 toggleControls() 函数来做到这一点，而不是隐藏导航以附加第一项/预先添加最后一项。当您在项目的开头/结尾时自动更正金额实际上有助于做到这一点。不幸的是，如果使用缓动，它会破坏动画。

```
// modified version of _toggleControls
    _toggleControls     : function( dir, status ) {

        // show / hide navigation buttons
        if( dir && status ) {
            if( status === 1 )
                ( dir === 'right' ) ? this.$navNext.show() : this.$navPrev.show();
            else
                if ( dir === 'right' ) {

                    this.$slider.append( this.$slider.children('li:first').clone() ) ;
                    this.$slider.children('li:first').remove();
                } else {

                    this.$slider.prepend( this.$slider.children('li:last').clone() ) ;
                    this.$slider.children('li:last').remove();
                }
        }
        else if( this.current >= this.itemsCount - 1 || this.fitCount >= this.itemsCount )
                this.$navNext.hide();

    }, 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T19:20:32.210

在-var instance = this;之后的_initEvents函数中添加这段代码 使 elastislide 自动播放。

```
window.setInterval(function(){
                instance._slide('right');
            }, 7000); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-19T00:57:36.340

这是针对旧版本的 elastislide，也许这段代码可以帮助某人。

这不是一个无限循环，但是当您到达缩略图轮播的末尾并单击下一步时，它会以动画方式返回到初始状态，如果您在开始并按下 prev 按钮，它将移动到持续缩略图图像。

首先，您必须注释（或删除）**_toggleControls**的所有行，这样我们可以避免导航中的按钮被隐藏。

然后更改**_slide**的代码：

```
 _slide              : function( dir, val, anim, callback ) {

        var ml      = parseFloat( this.$slider.css('margin-left') );

        // val is just passed when we want an exact value for the margin left (used in the _slideToCurrent function)
        if( val === undefined ) {

            // how much to slide?
            var amount  = this.fitCount * this.itemW, val;

            if( amount < 0 ) return false;
            // make sure not to leave a space between the last item / first item and the end / beggining of the slider available width
            if( dir === 'right' && this.sliderW - ( Math.abs( ml ) + amount ) < this.visibleWidth ) {                   
                amount  = this.sliderW - ( Math.abs( ml ) + this.visibleWidth ) - this.options.margin; // decrease the margin left
                //Loop to the beginning
                if (amount === 0) {
                    this.current = 0;                       
                    amount = this.sliderW - this.visibleWidth;
                    anim = undefined;
                    dir = 'left';
                }
            }
            else if( dir === 'left' && Math.abs( ml ) - amount < 0 ) {
                amount  = Math.abs( ml );
                //Loop to the end
                if ($(".es-carousel ul").css("margin-left") === "0px") {
                    this.current = this.itemsCount - 1;
                    amount = -(this.sliderW - this.visibleWidth);                       
                    anim = undefined;
                }
            }
            else {
                var fml; // future margin left
                ( dir === 'right' ) 
                    ? fml = Math.abs( ml ) + this.options.margin + Math.abs( amount )
                    : fml = Math.abs( ml ) - this.options.margin - Math.abs( amount );                      
            }

            ( dir === 'right' ) ? val = '-=' + amount : val = '+=' + amount;                
        }
        else {
            var fml     = Math.abs( val ); // future margin left

            if( Math.max( this.sliderW, this.visibleWidth ) - fml < this.visibleWidth ) {
                val = - ( Math.max( this.sliderW, this.visibleWidth ) - this.visibleWidth);
                if( val !== 0 )                     
                    val += this.options.margin; // decrease the margin left if not on the first position                        
                fml = Math.abs( val );
            }
        }

        $.fn.applyStyle = ( anim === undefined ) ? $.fn.animate : $.fn.css;

        var sliderCSS   = { marginLeft : val };

        var instance    = this;

        this.$slider.stop().applyStyle( sliderCSS, $.extend( true, [], { duration : this.options.speed, easing : this.options.easing, complete : function() {
            if( callback ) callback.call();
        } } ) );

    }, 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-06T22:55:46.740

RoxySka 答案的略微修改版本，添加了使用初始化设置打开和关闭它的功能。

这将使 Elastislide 自动播放，当在最后一张幻灯片上时，它将返回到第一张幻灯片。

**将此代码添加到`$.Elastislide.defaults`对象之后`start : 0,`：**

```
// autoplay true || false
autoplay : true, 
```

然后，您将能够在设置`autoplay`选项时设置值（真或假），就像您在上面的示例代码中尝试做的那样。

**这段代码应该加在`_initEvents`var之后的函数中`self = this;`**

```
 if(this.options.autoplay == true){
            var translation = 0;
            // width/height of an item ( <li> )
            var itemSpace = this.options.orientation === 'horizontal' ? this.$items.outerWidth( true ) : this.$items.outerHeight( true );
            // total width/height of the <ul>
            var totalSpace = this.itemsCount * itemSpace;
            // visible width/height
            var visibleSpace = this.options.orientation === 'horizontal' ? this.$carousel.width() : this.$carousel.height();
            //slide auto
            window.setInterval(function(){
                //test if we should go to next slide or return to first slide
                if(totalSpace > translation + visibleSpace)
                {
                    //go to next slide
                    self._slide('next');
                    //update translation
                    translation += visibleSpace;
                }
                else
                {
                    //return to first slide
                    self._slideTo(0);
                    //set translation to 0
                    translation = 0;
                }
            }, 7000);
        } 
```

* * *

请注意，随着 Elastislide 经过 v1.1.0 的发展，此代码可能无法在未来的版本中使用。

# asp.net-mvc-3 - 对象不会在 Url.action 中保存它的状态

> ID：10859999
> 
> 赞同：0
> 
> 时间：2012-06-02T05:19:26.937
> 
> 标签：asp.net-mvc-3, url.action

我正在使用`jqueyrmobile`.NET MVC3 中的框架开发应用程序。我正在创建一个`ListView`使用循环

```
<ul data-role="listview">
    @foreach (var item in Model)
    {
      <li><a href="@Url.Action("Index","Transaction",item)">
            <div style="vertical-align:text-top;padding:1px;font-size:large">  
              @Html.DisplayFor(modeItem => item.title)
              <span style="font-size:small;text-align:right">
                @Html.DisplayFor(modeItem => item.balance)
                .@Html.DisplayFor(modeItem => item.currency) 
              </span>
            </div>
          </a>
      </li>   
    }    
</ul> 
```

这工作正常，我在控制器`item`的`Index`操作中得到对象；`Transaction`但是对于另一个页面的类似代码

```
 <ul data-role="listview">
       @foreach (var item in Model)
        {
          <li><a href="@Url.Action("optionDialog",item)" data-rel="dialog" >
          <div>@Html.DisplayFor(modeItem => item.brTitle)</div></a></li> 
        }       
    </ul> 
```

我正在获取空`item`对象`optionDialog`。尽管它调用了 Action，但该对象为空。任何人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:36:24.030

问题是您将错误的项目传递给操作

```
 "@Url.Action("optionDialog",item)" <--- wrong 
```

像这样试过

```
 "@Url.Action("optionDialog", new { fooParameter= item})" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:20:30.727

我得到了解决方案，有一个微软错误，在替换后一段时间内无法调用它自己的控制器操作

```
<li><a href="@Url.Action("optionDialog",item)" data-rel="dialog" > 
```

和

```
<li><a href="@Url.Action("optionDialog","ControllerName",item)" data-rel="dialog" > 
```

我得到了我的结果