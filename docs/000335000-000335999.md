# StackOverflow 问答 000335000-000335999

# sql - 创建自定义 ODBC 驱动程序

> ID：335008
> 
> 赞同：43
> 
> 时间：2008-12-02T18:45:01.640
> 
> 标签：sql, database, sdk, odbc, odbc-bridge

在我目前的工作中，我们希望实现自己的 odbc 驱动程序，以允许许多不同的应用程序能够连接到我们自己的应用程序作为数据源。现在我们正在尝试权衡开发我们自己的驱动程序与实现规范的选择，这是大量的，*或者*使用允许程序员“填充”数据特定部分并允许更高级别抽象的 SDK。

有没有其他人实现了自定义 odbc 驱动程序？你遇到了什么陷阱？你从自己身上看到了什么好处？你估计需要多少工时？您是否使用了 SDK，如果是，您从该方法中看到了哪些好处/缺点？

任何意见和答案将不胜感激。谢谢！

**编辑：**我们正在尝试使用用 C 编写的代码来保持可移植性。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-03T14:32:28.350

另一种选择：不创建 ODBC 驱动程序，而是实现一个后端，该后端与另一个数据库（例如 Postgresql 或 MySQL）使用的有线协议进行通信。

然后，您的用户可以下载并使用例如 Postgresql ODBC 驱动程序。

您选择模拟的确切后端数据库可能主要取决于线路协议格式的记录情况。

[Postgres](https://www.postgresql.org/docs/current/protocol.html)和[MySQL](http://dev.mysql.com/doc/internals/en/client-server-protocol.html)都为其客户端-服务器协议提供了不错的文档。

下面是一个简单的 Python 2.7 服务器后端示例，它了解 Postgresql 有线协议的部分内容。示例脚本创建了一个侦听端口 9876 的服务器。我可以使用该命令`psql -h localhost -p 9876`连接到该服务器。执行的任何查询都将返回一个结果集，其中包含列 abc 和 def 以及两行，所有值均为 NULL。

阅读 Postgresql 文档并使用诸如 wireshark 之类的东西来检查真实的协议流量将使实现与 Postgresql 兼容的后端变得非常简单。

```
import SocketServer
import struct

def char_to_hex(char):
    retval = hex(ord(char))
    if len(retval) == 4:
        return retval[-2:]
    else:
        assert len(retval) == 3
        return "0" + retval[-1]

def str_to_hex(inputstr):
    return " ".join(char_to_hex(char) for char in inputstr)

class Handler(SocketServer.BaseRequestHandler):
    def handle(self):
        print "handle()"
        self.read_SSLRequest()
        self.send_to_socket("N")

        self.read_StartupMessage()
        self.send_AuthenticationClearText()
        self.read_PasswordMessage()
        self.send_AuthenticationOK()
        self.send_ReadyForQuery()
        self.read_Query()
        self.send_queryresult()

    def send_queryresult(self):
        fieldnames = ['abc', 'def']
        HEADERFORMAT = "!cih"
        fields = ''.join(self.fieldname_msg(name) for name in fieldnames)
        rdheader = struct.pack(HEADERFORMAT, 'T', struct.calcsize(HEADERFORMAT) - 1 + len(fields), len(fieldnames))
        self.send_to_socket(rdheader + fields)

        rows = [[1, 2], [3, 4]]
        DRHEADER = "!cih"
        for row in rows:
            dr_data = struct.pack("!ii", -1, -1)
            dr_header = struct.pack(DRHEADER, 'D', struct.calcsize(DRHEADER) - 1 + len(dr_data), 2)
            self.send_to_socket(dr_header + dr_data)

        self.send_CommandComplete()
        self.send_ReadyForQuery()

    def send_CommandComplete(self):
        HFMT = "!ci"
        msg = "SELECT 2\x00"
        self.send_to_socket(struct.pack(HFMT, "C", struct.calcsize(HFMT) - 1 + len(msg)) + msg)

    def fieldname_msg(self, name):
        tableid = 0
        columnid = 0
        datatypeid = 23
        datatypesize = 4
        typemodifier = -1
        format_code = 0 # 0=text 1=binary
        return name + "\x00" + struct.pack("!ihihih", tableid, columnid, datatypeid, datatypesize, typemodifier, format_code)

    def read_socket(self):
        print "Trying recv..."
        data = self.request.recv(1024)
        print "Received {} bytes: {}".format(len(data), repr(data))
        print "Hex: {}".format(str_to_hex(data))
        return data

    def send_to_socket(self, data):
        print "Sending {} bytes: {}".format(len(data), repr(data))
        print "Hex: {}".format(str_to_hex(data))
        return self.request.sendall(data)

    def read_Query(self):
        data = self.read_socket()
        msgident, msglen = struct.unpack("!ci", data[0:5])
        assert msgident == "Q"
        print data[5:]

    def send_ReadyForQuery(self):
        self.send_to_socket(struct.pack("!cic", 'Z', 5, 'I'))

    def read_PasswordMessage(self):
        data = self.read_socket()
        b, msglen = struct.unpack("!ci", data[0:5])
        assert b == "p"
        print "Password: {}".format(data[5:])

    def read_SSLRequest(self):
        data = self.read_socket()
        msglen, sslcode = struct.unpack("!ii", data)
        assert msglen == 8
        assert sslcode == 80877103

    def read_StartupMessage(self):
        data = self.read_socket()
        msglen, protoversion = struct.unpack("!ii", data[0:8])
        print "msglen: {}, protoversion: {}".format(msglen, protoversion)
        assert msglen == len(data)
        parameters_string = data[8:]
        print parameters_string.split('\x00')

    def send_AuthenticationOK(self):
        self.send_to_socket(struct.pack("!cii", 'R', 8, 0))

    def send_AuthenticationClearText(self):
        self.send_to_socket(struct.pack("!cii", 'R', 8, 3))

if __name__ == "__main__":
    server = SocketServer.TCPServer(("localhost", 9876), Handler)
    try:
        server.serve_forever()
    except:
        server.shutdown() 
```

命令行 psql 会话示例：

```
[~]
$ psql -h localhost -p 9876
Password:
psql (9.1.6, server 0.0.0)
WARNING: psql version 9.1, server version 0.0.
         Some psql features might not work.
Type "help" for help.

codeape=> Select;
 abc | def
-----+-----
     |
     |
(2 rows)

codeape=> 
```

使用 Postgresql 协议的 ODBC 驱动程序也应该可以工作（但我还没有尝试过）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-02T19:38:21.343

ODBC 驱动程序非常复杂 - 编写驱动程序的决定不应掉以轻心。查看现有的开源驱动程序是一个很好的示例方法，但大多数都有你可能不想模仿的缺点:) 无论操作系统平台如何，API 都是相同的。用于 MSSQL/Sybase 的 FreeTDS 具有我见过的更好的开源 ODBC 驱动程序实现之一。

如果您控制应用程序，您可以在合理的时间内实现可能只是规范的一个非常小的子集。要在通用环境中使用可能需要更多的努力才能做到正确。除了简单地实现几十个包装器调用之外，我还必须实现：

*   元数据访问函数
*   ODBC 特定查询语法解析
*   SQLSTATE 错误消息映射
*   多字节/字符集编组
*   ODBC 版本 2,3 支持 - 错误消息/函数映射
*   光标
*   用于管理数据源的 DM 配置 UI

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-02T18:59:04.870

我没有，但我曾经在一家正是这样做的公司面试过。他们制作了一个名为 AMPS 的 4GL/DBMS 产品，其架构与 MUMPS 相同——一种集成了 4GL 的分层数据库（此类系统的整个类型在 1970 年代出现）。他们有相当多的遗留代码库，客户希望使用 MS Access 连接到它。

采访我的首席开发人员分享了一些关于这方面的战争故事。显然这是非常痛苦的，不应该掉以轻心。然而，他们确实成功地实施了它。

这样做的一种替代方法是提供一个数据集市/BI 产品（沿着 SAP BW 的线），它将您的应用程序数据显示在外部数据库中，并将其按摩成更友好的格式，例如星形或雪花模式。

这将受到不支持实时访问的影响，但可能比 ODBC 驱动程序更容易实现（更重要的是维护）。如果您的实时访问要求是可合理预测且有限的，您可能会公开一个 Web 服务 API 来支持这些要求。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-02T18:57:36.090

我没有实现 ODBC 驱动程序，只是想提供一个建议，您可以从开源实现开始并添加您自己的定制。这可能会让您更快地开始。

至少有两种选择：

*   [unixODBC](http://www.unixodbc.org/)在 LGPL 下获得许可，这意味着如果您修改代码，您必须使您的修改开源。

*   [iODBC](http://www.iodbc.org/)根据您的选择在 LGPL 或新 BSD 下获得许可。新的 BSD 允许您进行修改*，而无需*将您的修改开源。

但是，尚不清楚这些包是否在 Windows 上运行，而不是在 UNIX/Linux 上运行，其客户端 API 与标准 ODBC 一致。您没有说明您使用的是哪个平台，所以我不知道这是否与您有关。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-05T16:58:47.077

这篇文章现在有点老了，但值得一提的是，如果你需要一个 ODBC 驱动程序，你可以使用这样的 SDK：[http](http://www.simba.com/drivers/simba-engine-sdk/) ://www.simba.com/drivers/simba-engine-sdk/它需要注意其他答案中提出的大多数观点，并为您提供了一个非常简化的界面来实现。

我碰巧为 Simba 工作，所以我有点偏见，但是使用 SDK 确实可以很容易地为您尝试做的任何事情创建 ODBC 驱动程序。如果你对编码有点精通，你可以在 5 天内完成一些事情。

其他帖子之一建议将 unixODBC 或 iODBC 作为起点，但这不起作用。了解驱动程序管理器（unixODBC、iODBC 等）和驱动程序之间的区别很重要。Driver Manager 充当应用程序和驱动程序之间的中间人，无需直接链接到驱动程序。

您可以从 Postgres 或 MySQL 驱动程序作为起点，然后将它们分叉以使用您自己的数据库，但这不太可能是一项微不足道的任务。从头开始创建驱动程序更加困难，并且可能会持续（并且高于预期）维护成本。只要您了解这种方法的成本，它也是可行的。

# javascript - 使用 Javascript 检测 Vista IE7 保护模式

> ID：335019
> 
> 赞同：7
> 
> 时间：2008-12-02T18:48:44.160
> 
> 标签：javascript, windows-vista, internet-explorer-7, protected, mode

我希望能够在使用 javascript 的页面中检测 Vista IE7 保护模式，最好是。我的想法是执行一个违反保护模式的操作，从而暴露它。目标是向 IE7 Vista 用户提供适当的站点帮助消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T20:36:54.703

对于受保护的用户，您要完成哪些工作？我已经看到了一些窗口弹出问题，但除此之外，干净的 JavaScript 往往受到的影响较小。如果您发现代码块无法执行，为什么不在尝试执行后检查文档是否是您期望的状态，如果不是，则发出警报。

如果是使用 ActiveX，MS 有一个保护模式 API：http: [//msdn.microsoft.com/en-us/library/ms537316.aspx](http://msdn.microsoft.com/en-us/library/ms537316.aspx)

保护模式是可定制的，因此您实际上并没有可靠的方法来根据操作违规检测它。而且许多用户禁用了 UAC，因此通过版本检测也不起作用（更不用说您可能对 IE 8 有同样的头痛。总是最好测试某些东西是否有效，而不是按版本假设。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T22:11:28.850

Adobe Flash 在 Vista IE7 保护模式下的行为可能不同（或与预期不同）。目的是向用户提供此反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T17:46:52.490

我从[6t7m4查看了](https://stackoverflow.com/users/42608/meyahoocoma6t7m4awxtoekdfhpitmg2nk224sinfwk3st)[保护模式 API](http://msdn.microsoft.com/en-us/library/ms537316)的 MSDN 文档，如果我可以从 javascript 调用 ieframe.dll，例如：

```
var axo = new ActiveXObject("ieframe.dll"); 
```

我将能够访问该`IEIsProtectedModeProcess()`功能，但我相信由于安全原因它无法访问。

# vb.net - 问题：关于声明变量的 VB.net 编码标准

> ID：335030
> 
> 赞同：2
> 
> 时间：2008-12-02T18:54:33.803
> 
> 标签：vb.net

我在 VB.net 中看到过一些变量声明，例如：

```
print("dim _Foo as string"); 
```

和 print("dim m_Foo as string"); 和 print("dim foo as string");

我想知道 VB.net 编码的标准是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T19:00:49.143

这完全取决于范围。如果是：

```
Private Dim m_Foo As String 
```

这意味着 m_Foo 是一个类的成员。这也意味着同样的事情：

```
Private Dim _Foo As String 
```

这是一个偏好问题。

另一方面，是这样的：

```
Dim Foo As String 
```

可能引用给定方法的局部变量。有些人甚至可能在它前面加上一个“l_”：

```
Dim l_Foo As String 
```

像这些示例一样声明有助于确定扫描代码时的范围。总而言之，这是一个示例类，显示了一个众所周知的命名约定（但不是唯一的）：

```
Public Class Bar
    Private m_firstName As String

    Public Sub New(ByVal firstName As String)
        m_firstName = firstName
    End Sub

    Public Function SayGreeting() As String
        Dim l_Greeting As String
        l_Greeting = String.Format("{0}, {1}!", "Hello", m_firstName)
        Return l_Greeting
    End Function
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T08:07:04.233

对成员变量使用“m_Name”在 VB 中是标准的。我几乎从来没有遇到过不那样做的人。

许多（但不是全部）使用“s_Name”作为共享变量。这清楚地表明了如何使用变量。

对于局部变量，我使用“名称”。为什么？那么参数本质上是一个局部变量，它使用该模式（根据 .NET 指南），那么为什么不让所有局部变量看起来都这样呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-08T14:18:31.730

我不同意，我见过很多为类变量添加前缀的方法，包括“m”、“m_”和_。

我有一种完全不同的方法，对我很有帮助。我创建了一个名为 backingStore 的结构，其中包含我的类变量，然后我有一个名为 Local 的私有变量作为新的 backingStore。

这使我可以为属性和类变量使用相同的名称，并且在引用它时，很清楚我在说哪一个。前任。

Local.FirstName = "弗雷德"

在此处查看完整示例

[设计疯狂：m_#$*^ 中的痛苦](http://designlunacy.blogspot.com/2009/01/private-class-variables.html#links)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-08T14:28:13.800

这实际上取决于您的工作环境中约定的命名约定。肯定有可用的指南：[.NET / C# 项目的命名约定](http://www.akadia.com/services/naming_conventions.html)- 这基本上是我们遵循的。

例如：

```
_member //Class member - Camel Case
intLocalVariable //note use of Hungarian notation - Camel Case
pMethodParameter //Camel Case
MyProperty //Pascal Case 
```

# asp.net - 有没有一种简单的方法可以在数据库行中缩放“视图”或“下载”计数器？

> ID：335031
> 
> 赞同：2
> 
> 时间：2008-12-02T18:54:40.823
> 
> 标签：asp.net, sql-server-2005, performance, scalability

我正在开发一个小型 Web 项目，该项目需要为`NumViews`数据库表中的每个对象/行保留一个计数器。我担心对行的所有更新都会开始真正降低性能，无论是表的对象数增加还是站点的使用量都会增加。

如果重要的话，我将 .NET 3.5 与 MSSQL 2K5 一起使用。

有什么建议么？

提前致谢！

——乔尔

* * *

我们目前对 DB 使用情况的猜测持续达到每秒约 66 次读取。

我喜欢将计数器拆分为单独的表的想法。您是否知道任何支持它的文章或白页，或者它是每个人都会做的事情之一？:-P

此外，在更新时，数据库是锁定整个表还是锁定特定行？我会假设只是一排，但不确定。

谢谢，

--j

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T18:59:14.263

我建议：

1.  将行 -> 计数数据放在另一个表中（具有固定大小的列），这样您就不会为了保持计数而不断写入主表

2.  抽象对它的访问，以便随着应用程序的增长，您可以用一些更有效的结构替换数据库表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T19:24:15.303

Consider using a "Views" event table, write-only, that stores each view with a timestamp. No locking problems, no sweat, full audit trail at the most granular level. Little tiny records, ~ 5MM records a day?

Someone will probably want it later, and it's simple to add it now and use it. If someone wants to do analysis/mining on it, this will be useful. At that volume, I can't imagine much else to use it for.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T19:03:53.003

我认为这可能是一个严重的问题。读取是 100% 可扩展的，但写入需要锁定，因此您在每次读取时隐式地施加锁定开销，从而将它们序列化。你知道你必须保持的读取率是多少吗？您是否查看过作为 RDBMS 的一部分可用的审计选项？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-10T21:51:58.637

I'd consider doing one of the following:

*   Use a buffer within the application and batch write a set of views every time buffers gets full
*   Using a local logging file and aggregate its results in a batch load once in a while
*   Use an event system (Pub/Sub) to fire events from your application which will later be dealt with by another application (subscriber) asynchronously. Take a look at [the following project](http://www.codeplex.com/pubsub/)

# wpf - 从 Windows 窗体加载 WPF 窗口时出现 System.ExecutionEngineException 问题

> ID：335032
> 
> 赞同：5
> 
> 时间：2008-12-02T18:54:58.607
> 
> 标签：wpf, winforms, integration

我发现了一些相当奇怪的行为......

以下是如何复制问题：

1.  创建 WPF 应用程序项目。
2.  从 App.xaml 文件中删除 StartupUri。
3.  将启动事件处理程序添加到带有签名“ `private void Application_Startup(object sender, StartupEventArgs e)`”的应用程序
4.  现在，向项目添加一个表单（右键单击并选择添加新项目）。
5.  在 Application_Startup 方法中，创建表单对象并将其显示为`Form1 f1 = new Form1(); f1.ShowDialog();`
6.  在实际的 Form1 上，向设计器添加一个按钮，并向该按钮添加一个单击事件处理程序。
7.  将一个新的 WPF 窗口添加到您的项目 Window1。
8.  在步骤 6 中创建的 Form1 的按钮单击事件处理程序中，添加创建显示 WPF 窗口的代码行：`Window1 w1 = new Window1(); w1.Show();`
9.  运行项目并单击 winform 上的按钮以显示 WPF 窗口...到目前为止工作正常。
    10.  关闭 WPF 窗口并再次单击 winform 的按钮。这次你应该得到异常。

所以，基本上我所做的是创建一个显示 winform 的 WPF 应用程序。然后，winform 显示一个 WPF 窗口。

第一次显示 WPF 窗口时，一切正常。如果它被关闭，然后重新打开，我得到异常！我还可以通过多次单击该按钮来打开多个 WPF 窗口。但是，一旦最后一个关闭了，我就再也不能再打开另一个了...

我还尝试了[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/442782b1-00a1-4e2e-9cc6-ae99b6699126/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/442782b1-00a1-4e2e-9cc6-ae99b6699126/)建议的各种技巧，但这些都没有帮助。

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-06T16:33:06.657

默认的 Wpf 应用程序关闭行为（在 VS 的项目属性中的“应用程序”选项卡上指定或使用 Application.Xaml 中的 ShutdownMode 属性指定）是“在最后一个窗口关闭时”。这意味着当您关闭您创建的 Wpf 窗口时，Wpf 会关闭应用程序框架，因此任何后续窗口创建都会引发异常。

您可以通过将关闭模式设置为“显式关闭”（Xaml 中的“OnExplicitShutdown”）来避免此问题。然后，当您希望应用程序终止时（例如，当 winforms 表单关闭时），您将需要显式手动调用 Application.Current.Shutdown。

# svn - 如何使用 SVN 只为某些开发人员显示一些文件夹

> ID：335039
> 
> 赞同：4
> 
> 时间：2008-12-02T18:56:43.673
> 
> 标签：svn, visualsvn, visualsvn-server

我有一个包含一堆文件夹的存储库，我希望某些开发人员在对存储库进行结帐时只获得其中两个或三个文件夹。如何使文件夹默认不显示，然后仅在我想授予访问权限时添加它们。

我将 VisualSVN 用于 SVN 服务器，我所做的是授予对顶层的读取访问权限，然后拒绝访问每个子文件夹，然后将拒绝更改为对我希望每个开发人员访问的文件夹进行读/写。这很痛苦，因为每当我添加一个新文件夹时，我都必须进入并拒绝对其进行访问。

我尝试仅授予对子文件夹的读/写权限，但是当他们尝试在父文件夹上结帐时，它会给他们一个错误。我只希望开发人员必须对顶级文件夹进行结帐。

这就是我想要的：

```
RepoFolder       (dev1 checks out this)
  - References   (this shows to dev1)
  - Project1     (this shows to dev1)
  - Project2     (this does not show to dev1)
  - Project3     (this does not show to dev1)
  - Project4     (this does not show to dev1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-03T05:41:37.337

我认为不可能完全按照您的意愿去做，那就是让每个人都查看[http://example.com/svn/repos/](http://example.com/svn/repos/)并根据您的身份看到不同的东西。

通过拒绝访问文件夹，您走在了正确的轨道上。您可以做的是为某些开发人员创建一个“视图”文件夹。假设你所有的项目看起来像

```
http://example.com/svn/repos/projects/
   +- References
   +- Project1
   +- Project2 
```

添加另一个称为视图的文件夹结构。

```
http://example.com/svn/repos/
   + projects/       
       +- References
       +- Project1
       +- Project2
   + views/
       +- View1 
```

两者`views`都`View1`只是普通文件夹。技巧是将文件夹上的[`svn:externals`](http://svnbook.red-bean.com/en/1.0/ch07s03.html)属性设置为[http://example.com/svn/repos/projects/References](http://example.com/svn/repos/projects/References)和[http://example.com/svn/repos/projects/Project1](http://example.com/svn/repos/projects/Project1)。当有人结帐时，它也会结帐并在其下。我希望这有帮助。`View1``View1``References``Project1`

# ide - Visual Studio 2008 的代码助手/附加组件

> ID：335042
> 
> 赞同：0
> 
> 时间：2008-12-02T18:58:14.327
> 
> 标签：ide, visual-studio-addins

我想知道公众对 Resharper vs Devxpress CodeRush vs Visual AssitX 的看法。

我的一些同事是 CodeRush 的粉丝。我喜欢 Resharper ......如果有人可以为我们完成辩论会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T19:09:15.723

我不认为有人可以说一个比另一个更好。这取决于偏好。

就个人而言，我使用 Resharper 的原因如下：

1.  它的键盘快捷键让我可以更快地编写代码，并立即执行大量重构
2.  实时模板很棒，创建自己的模板很容易
3.  内置单元测试运行器是必须的。我现在不能没有它

较新版本的性能有所下降，但总的来说，它是迄今为止最好的 VS 插件。

# javascript - 编辑 Vista 按钮的 Javascript

> ID：335045
> 
> 赞同：0
> 
> 时间：2008-12-02T18:58:47.023
> 
> 标签：javascript, html, windows-vista, menu

我在 Vista Buttons 中为我的网站生成了下拉菜单。当它导出按钮时，它们与图形文件和 .css 一起位于一个 .js 文件中，以控制所有内容。

我对 .css 进行了一些广泛的编辑，然后决定将菜单指向的链接的所有 .html 扩展名更改为 .php，因为我现在对每个页面上的菜单都使用“包含”地点。

我进入 .js 文件将所有目标更改为 .php，全部更改，当我加载我的网站时，他们仍然说 .HTML ！！！

怎么可能？任何相关的文件都没有 .html 在它们的任何地方！！！

是的，我引用了正确的文件！

惊人的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T19:02:18.670

浏览器缓存？尝试 ctrl + F5 强制重新加载。

# tfs - 有没有人能够使用 TFS Team Web Access 并成功地将其公开给客户？

> ID：335049
> 
> 赞同：3
> 
> 时间：2008-12-02T18:59:27.193
> 
> 标签：tfs, clearquest

我们最近为我们的 .NET 组从 Rational 堆栈（ClearQuest/ClearCase 等）切换到 TFS 2008，我们看到的挑战之一是 Team System Web Access 的一些限制，就什么工作而言客户可以查看的项目。有没有人能够使用 TSWA 并成功地将其暴露给客户，同时控制他们能够查看什么样的工作项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T01:09:01.830

以前称为团队系统[工作项 Web 访问](http://blogs.msdn.com/hakane/archive/2008/04/09/what-is-work-item-web-access-wiwa.aspx)(WIWA) 是您的答案，现在称为“[仅工作项视图](http://www.microsoft.com/downloads/details.aspx?FamilyId=3ECD00BA-972B-4120-A8D5-3D38311893DE&displaylang=en)”。它是 Team System Web Access (TSWA) 的扩展。

下载并安装[Visual Studio Team System Web Access 2008 SP 1](http://www.microsoft.com/downloads/details.aspx?FamilyId=3ECD00BA-972B-4120-A8D5-3D38311893DE&displaylang=en)包，您将获得 TSWA 和 WIWA - 它们将在不同的 url 上可用 - 安装的最终窗口将为您提供这些 URL。

如果您已经安装了它，我相信“Wrk Item Only View”位于根 TSWA url 的“WIWA”子目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T00:07:41.127

根据微软的限制，您可能可以使用“仅工作项视图”：

“Team System Web Access 提供了一个仅限工作项的视图，该视图限制了功能，因此您只能创建和查看自己的工作项。”

更多信息在：

[http://msdn.microsoft.com/en-us/library/cc668124.aspx](http://msdn.microsoft.com/en-us/library/cc668124.aspx)

[http://visualstudiomagazine.com/columns/article.aspx?editorialsid=2832](http://visualstudiomagazine.com/columns/article.aspx?editorialsid=2832)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-14T11:46:50.297

仅供参考，我最近遇到了这个问题，以及 IS tfs 的安全问题。

我想出了如何轻松做到这一点，并写了一篇博客文章以使其他人更清楚。我使用的是 TFS 2010，但大多数情况同样适用于 2008。

帖子在：

[http://www.diaryofaninja.com/blog/2010/07/14/quick-and-easy-setup-for-ldquowork-item-only-viewrdquo-web-users-in-tfs-2010](http://www.diaryofaninja.com/blog/2010/07/14/quick-and-easy-setup-for-ldquowork-item-only-viewrdquo-web-users-in-tfs-2010)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T20:30:23.173

您是在谈论客户只能在每个客户的基础上查看和创建自己的工作项目，还是更像是公共与私人场景？

如果是后者，您可以创建一个团队项目，其唯一目的是充当客户报告和创建的问题的分类中心。虽然，我承认这不是最干净的解决方案。我提出该选项的唯一原因是我们正在考虑为我们的客户服务部门使用类似的方法。

我有兴趣从更有经验的 TFS 用户那里看到其他选择。我们也是派对新手，并且知道我们可以用它做些什么才刚刚触及表面。

# visual-studio - 适用于 Visual Studio 开发人员的 Xcode 快速入门

> ID：335052
> 
> 赞同：11
> 
> 时间：2008-12-02T19:00:33.933
> 
> 标签：visual-studio, xcode, macos

我想使用 Apple 的 Xcode IDE 在 OS X 上开发应用程序，但我发现 UI 非常混乱，因为我非常习惯在 Windows 上使用 Visual Studio 进行开发。

有谁知道 Visual Studio 开发人员的任何 Xcode 快速入门指南，它们将常见任务和功能从一个映射到另一个？

例如，我什至不知道如何启动在新的 shell 窗口 (Terminal.app) 中编写的 C/C++ 命令行工具，即如果在 Visual Studio 中按 F5 会发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-08T10:46:56.623

Xcode 3 的书很好，我同意。专门用于学习 Xcode 环境。

但是，它的目标是与 Mac OS X 10.4 兼容，因此没有使用垃圾收集或属性等。

作为一种学习工具 - 您可以享受重构代码以使用新操作系统的功能的乐趣。

你会更好（在我看来）获得[Hillegass Cocoa Programming](http://www.amazon.co.uk/Cocoa-Programming-Mac-OS-X/dp/0321503619/)这本书并从那里开始，而不是试图在 Mac 上复制你的 VS 工作流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-08-06T01:52:43.753

我和你的情况类似——我在工作中使用 Visual Studio，在家里使用 XCode，所以这些差异可能会让人非常沮丧。

您可能会感兴趣的一个工具，尤其是如果您使用 Resharper，是新的 Jetbrains“AppCode”项目 - 请参阅[http://www.infoq.com/news/2011/04/jetbrains-appCode](http://www.infoq.com/news/2011/04/jetbrains-appCode)

它是一个代码编辑 IDE，提供了极大改进的代码分析、修复、导航和重构功能。它不是 XCode 的完全替代品——笔尖编辑仍然需要在那里完成——但 IMO 值得忍受在两者之间进行一些切换，以获得它带来的优势。

作为 Visual Studio 用户，您会立即感到宾至如归，因为 UI 更接近 VS 而不是 XCode。

目前他们的早期访问计划是开放的，因此您可以下载 alpha 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T19:06:03.937

用于在命令行应用程序时查看 shell，这是在控制台窗口中完成的，而不是在终端窗口中。这允许与 gdb 进行完全交互。要打开控制台窗口，请按 Shift-Command-R 以查看程序的输出。

如果您希望 Xcode 在启动应用程序时显示控制台窗口，请进入首选项。在 Debugger 选项卡中，有一个标有“On Start:”的下拉列表，选择“Show Console”或“Show Console and Debugger”，当您点击运行时它们将打开。

至于快速入门或教程，我不确定是否有任何特定的在线教程，但您可能需要查看Fritz Anderson的[Xcode 3 Unleashed一书。](https://rads.stackoverflow.com/amzn/click/com/0321552636)

# c# - 使用 ASP.NET CHART CONTROL，c# 添加动态图表

> ID：335061
> 
> 赞同：5
> 
> 时间：2008-12-02T19:03:21.040
> 
> 标签：c#, asp.net

我想在网页中添加动态图表。事情是这样的……

我从用户那里获得开始和结束日期，并为开始和结束日期之间的每个日期绘制单独的图表。

我从 sql 数据库中获取数据并将其与图表绑定，如下所示：

```
 SqlConnection UsageLogConn = new   
          SqlConnection(ConfigurationManager.ConnectionStrings["UsageConn"].ConnectionString);
                UsageLogConn.Open();//open connection

                string sql = "SELECT v.interval,dateadd(mi,(v.interval-1)*2,'" + startdate + " 00:00:00') as 'intervaltime',COUNT(Datediff(minute,'" + startdate + " 00:00:00',d.DateTime)/2) AS Total  FROM usage_internet_intervals v left outer join (select * from Usage_Internet where " + name + "  LIKE ('%" + value + "%') and DateTime BETWEEN '" + startdate + " 00:00:00' AND '" + enddate + " 23:59:59') d on v.interval = Datediff(minute,'" + startdate + " 00:00:00',d.DateTime)/2 GROUP BY v.interval,Datediff(minute,'" + startdate + " 00:00:00',d.DateTime)/2 ORDER BY Interval";

                SqlCommand cmd = new SqlCommand(sql, UsageLogConn);
                SqlDataAdapter mySQLadapter = new SqlDataAdapter(cmd);

                Chart1.DataSource = cmd;

                // set series members names for the X and Y values 
                Chart1.Series["Series 1"].XValueMember = "intervaltime";
                Chart1.Series["Series 1"].YValueMembers = "Total";
                UsageLogConn.Close();
                // data bind to the selected data source
                Chart1.DataBind();

                cmd.Dispose(); 
```

上面的代码只为一个日期添加了一个图表，我在设计视图中添加了“chart1”，并且它不是动态创建的。但我想在运行时向网页添加更多动态图表。

谁能帮我这个？

我正在使用 VS 2008，ASP.NET 3.5，图表库是： using System.Web.UI.DataVisualization.Charting;

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T20:38:44.560

好的，所以我可能做得过火了，但我试图让它变得非常动态。是的，列表名称有点奇怪，但我使用了我的另一个示例来构建它。

```
 protected void Page_Load(object sender, EventArgs e)
 {
   Bench[] benchList;
   FoodIntake[] foodIntakeList;
   Panel panelChartHolder;

   panelChartHolder = new Panel();
   Controls.Add(panelChartHolder);

   benchList = Bench.GetAll();
   AddNewCharts(benchList, panelChartHolder, 
     GetBenchXValue, GetBenchYValue);

   foodIntakeList = FoodIntake.GetAll();
   AddNewCharts(foodIntakeList, panelChartHolder, 
     GetFoodIntakeXValue, GetFoodIntakeYValue);
  } 
```

好的，所以这第一部分很简单。创建一个面板来保存您正在添加的图表，获取您希望由图表表示的列表（对于这个示例，它们恰好与 Linq to Sql 一起使用）并调用该方法来创建图表。

```
 private void AddNewCharts<T>(T[] listToAdd, Panel panelToAddTo, 
     Func<T, DateTime> xMethod, Func<T, Int32> yMethod)
  {

    ChartArea mainArea;
    Chart mainChart;
    Series mainSeries;

    mainChart = new Chart();
    mainSeries = new Series("MainSeries");

    for (Int32 loopCounter = 0; loopCounter < listToAdd.Length; loopCounter++)
    {
      mainSeries.Points.AddXY(xMethod(listToAdd[loopCounter]), 
        yMethod(listToAdd[loopCounter]));
    }

    mainChart.Series.Add(mainSeries);
    mainArea = new ChartArea("MainArea");
    mainChart.ChartAreas.Add(mainArea);

    panelToAddTo.Controls.Add(mainChart);
  } 
```

如您所见，我刚刚创建了一个新图表，向其中添加了一个系列，并向其中添加了一个 ChartArea。下一部分几乎只是遍历集合并将其中的每个项目添加到列表本身。它使用传入的委托方法 (Func) 来获取 X 和 Y 值。

最后一部分包含负责从两个列表中获取 X 和 Y 值的四种方法。基本上我这样做是为了让图表创建方法尽可能通用。可能是矫枉过正。

```
 private DateTime GetBenchXValue(Bench currentBench)
  {
    return currentBench.DateLifted;
  }

  private Int32 GetBenchYValue(Bench currentBench)
  {
    return currentBench.BenchAmount;
  }

  private DateTime GetFoodIntakeXValue(FoodIntake currentIntake)
  {
    return currentIntake.DateEaten;
  }

  private Int32 GetFoodIntakeYValue(FoodIntake currentIntake)
  {
    return currentIntake.Calories;
  } 
```

所以当你运行它时，你会得到两个并排的图表。请注意，它们将非常简单，因为可以设置数百万种不同的属性来改善外观。希望这是你所要求的。

```
 using System;
  using System.Web.UI.DataVisualization.Charting;
  using System.Web.UI.WebControls; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-08-19T09:28:56.450

```
protected void Page_Load(object sender, EventArgs e)
    {
        MySqlConnection UsageLogConn = new MySqlConnection("Server=localhost;UID=root;Password=;database=productactivation");
        UsageLogConn.Open();//open connection

        string sql = "select * from sales";
        DataSet ds = new DataSet();
        MySqlCommand cmd = new MySqlCommand(sql, UsageLogConn);
        MySqlDataAdapter mySQLadapter = new MySqlDataAdapter(cmd);
        mySQLadapter.Fill(ds);
        Chart1.DataSource = ds;

        // set series members names for the X and Y values 
        Chart1.Series["Series1"].XValueMember = "title_id";
        Chart1.Series["Series1"].YValueMembers = "qty";
        Chart1.Series["Series2"].XValueMember = "title_id";
        Chart1.Series["Series2"].YValueMembers = "qty";
        UsageLogConn.Close();
        // data bind to the selected data source
        Chart1.DataBind();

        cmd.Dispose();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-26T18:20:20.233

我已经更新了 .NET 4.0 的 MS 图表示例并添加了两个额外的项目——ChartsWithMVC 和 ChartsWithoutWebForms。您可能会发现我的示例代码很有帮助，因为我使用 asp.net 图表控件实现了一个非常基本的动态图表系统：

[http://develocity.blogspot.com/2010/04/aspnet-chart-controls-without-web-forms.html](http://develocity.blogspot.com/2010/04/aspnet-chart-controls-without-web-forms.html)

希望能帮助到你。

# apache-flex - 从数组集合中获取值数组的最简单/最佳方法是什么？

> ID：335073
> 
> 赞同：1
> 
> 时间：2008-12-02T19:09:06.333
> 
> 标签：apache-flex, arrays, actionscript, collections

我有一个包含任意数量对象的数组集合。我知道每个对象都有一个给定的属性。是否有一种简单的（又名“内置”）方法来获取集合中该属性的所有值的数组？

例如，假设我有以下集合：

```
var myArrayCollection:ArrayCollection = new ArrayCollection(
    {id: 1, name: "a"}
    {id: 2, name: "b"}
    {id: 3, name: "c"}
    {id: 4, name: "d"}
    ....
); 
```

我想得到数组“1,2,3,4....”。现在，我必须遍历集合并将每个值推送到一个数组。由于我的 Collection 可能会变大，因此我想避免循环。

```
var myArray:Array /* of int */ = [];

for each (var item:Object in myArrayCollection)
{
    myArray.push(item.id);
} 
```

有没有人有什么建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T19:32:59.857

根据[文档](http://livedocs.adobe.com/flex/2/langref/mx/collections/ArrayCollection.html)，ArrayCollection 不会将键与值分开。它们作为对象存储在底层数组中。我认为没有任何方法可以避免遍历它们以仅提取键，因为您需要查看底层数组中的每个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T05:36:05.567

从using属性中获取基础`Array`对象后，您可以使用.`ArrayCollection``source`[`map`](http://livedocs.adobe.com/flex/2/langref/Array.html#map())`Array`

您的代码将如下所示：

```
private function getElementIdArray():Array
{
    var arr:Array = myArrayCollection.source;
    var ids:Array = arr.map(getElementId);
    return ids;
}

private function getElementId(element:*, index:int, arr:Array):int 
{
    return element.id;
} 
```

# python - 从python获取文件夹大小和里面所有文件的最佳方法是什么？

> ID：335078
> 
> 赞同：6
> 
> 时间：2008-12-02T19:09:50.373
> 
> 标签：python

如果会有少量文件，那么使用递归函数应该很容易通过所有文件并添加大小但是如果有很多文件怎么办，而且我真的是指很多文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-02T19:17:59.560

你的意思是这样的？

```
import os
for path, dirs, files in os.walk( root ):
    for f in files:
        print path, f, os.path.getsize( os.path.join( path, f ) ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-02T19:18:28.747

除了递归调用 stat 之外，没有其他方法可以计算大小。这与 Python 无关；操作系统只是没有提供其他方法。

该算法不必是递归的；你可以使用 os.walk。

可能有两个例外可以提高效率：

1.  如果您要测量的所有文件都填满了一个分区，并且该分区没有其他文件，那么您可以查看该分区的磁盘使用情况。
2.  如果您可以持续监控所有文件，或者自己负责创建所有文件，则可以生成增量磁盘使用量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T20:33:00.517

Python Cookbook (O'Reilly) 中有一个解决这个问题的方法。您可以通过在线示例阅读完整的解决方案：

[http://safari.oreilly.com/0596001673/pythoncook-CHP-4-SECT-24](http://safari.oreilly.com/0596001673/pythoncook-CHP-4-SECT-24)

或在这里：

[http://books.google.com/books?id=yhfdQgq8JF4C&pg=PA152&dq=du+command+in+python](http://books.google.com/books?id=yhfdQgq8JF4C&pg=PA152&dq=du+command+in+python)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-24T22:58:50.960

如果您在提供 du 的 posix 系统上，您应该能够使用`pexpect.run`或`subprocess`执行`du <path to folder>`来获取文件夹和子文件的大小。请记住，它将输出一个字符串，其中列出了每个文件和每个文件夹的总数。（查看 du 联机帮助页，了解您可以做些什么来限制它）。

# c++ - 托管 CLR - 参数错误

> ID：335085
> 
> 赞同：3
> 
> 时间：2008-12-02T19:11:48.043
> 
> 标签：c++, clr, clr-hosting

我正在尝试在我的 C++ 应用程序中托管 CLR，但在调用托管应用程序的入口点时遇到问题。入口点像往常一样定义：

```
static void Main(string[] args) 
```

这是实际的 C++ 代码：

```
CComPtr<_MethodInfo> entryPoint;
hr = assembly->get_EntryPoint(&entryPoint); // this works just fine

if (FAILED(hr))
    return hr;

SAFEARRAY *args = 
    SafeArrayCreateVector(VT_VARIANT, 1, 1); // create an array of the length of 1 ( Main(string[]) )

int     argc;
LPWSTR  cmdLine     = GetCommandLineW();
LPWSTR  *argv       = CommandLineToArgvW(cmdLine, &argc); // get an array of arguments to this function

VARIANT vtPsa;
vtPsa.vt         = (VT_ARRAY | VT_BSTR);
vtPsa.parray     = SafeArrayCreateVector(VT_BSTR, 1, argc); // create an array of strings

for (long i = 0; i < argc; i++)
{      
  SafeArrayPutElement(vtPsa.parray, &i, SysAllocString(argv[i])); // insert the string from argv[i] into the safearray
}   

long idx[1] = {0};
SafeArrayPutElement(args, idx, &vtPsa); // insert an array of BSTR into the VT_VARIANT args array

VARIANT obj, result;
VariantInit(&obj);
VariantInit(&result);

try
{
    hr = entryPoint->Invoke_3(obj, args, &result); // call the entry point
}
catch(_com_error ex)
{
    MessageBox(NULL, ex.ErrorMessage(), "Error", 0);
}

if(FAILED(hr))
{
    hr = hr; // added just so I can set a breakpoint
} 
```

我得到的错误代码是-2146233032，根据corerror.h对应于：

> 对于十进制 -2146233032 / 十六进制 0x80131538：
> COR_E_SAFEARRAYRANKMISMATCH
> 数组的运行时排名与元数据中记录的排名之间发生不匹配。

任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T01:10:32.427

在这两种情况下，SafeArrayCreateVector 的第二个参数不应该是 0 吗？MSDN 将该值列为“数组的下限。可以是负数。”

# java - 从 forEach 循环内的代码访问 JSTL 标记

> ID：335095
> 
> 赞同：5
> 
> 时间：2008-12-02T19:14:20.673
> 
> 标签：java, jsp, jstl

是否可以通过循环内的代码访问 JSTL 的 forEach 变量？

```
<c:forEach items="${elements}" var="element">
    <% element.someMethod(); %>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T19:33:11.260

好吧，我相信“元素”存储在页面上下文中。

```
<c:forEach items="${elements}" var="element">
    <% ((Element) pageContext.getAttribute("elements")).someMethod(); %>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-12-02T19:31:38.580

按照示例的更正进行编辑：

是的，可以访问`var`内部`c:forEach`

这是一个例子：

```
<c:forEach items="${elements}" var="element">
    ${((Element)element).someMethod()}
</c:forEach> 
```

请参阅JSTL 文档中的[c:forEach](http://java.sun.com/products/jsp/jstl/1.1/docs/tlddocs/c/forEach.html)。

# c++ - C++ 中的列表迭代器不可递增错误消息

> ID：335096
> 
> 赞同：4
> 
> 时间：2008-12-02T19:14:56.540
> 
> 标签：c++, list, iterator

作为一个新手，我正在尝试使用列表类在 C++ 中实现排序功能。但是，运行代码时，我得到列表迭代器不可递增的错误......但是这似乎不太可能，因为它应该是可递增的！

代码：

```
void shuffle (list<int> &list1)
{
    list<int> smaller;
    list<int> larger;

    if (list1.size() > 1)
    {
        list<int>::iterator it;
        //int it;

        int x = list1.front();

        for (it = list1.begin(); it != list1.end(); it++)
        {                                       
            if(*it <= x)
            {
                smaller.push_front(*it);
                list1.pop_front();

            }
            else
            {
                larger.push_back(*it);
                list1.pop_front();
            }
            shuffle (smaller);
            shuffle (larger);
        }
    }
    else
    {
        print(smaller);
        print(larger);

        //cout << "No sorting needed! The list still looks like: ";
        //print(list1);
    }
    print(smaller);     
    print(larger);
} 
```

我只是在 de CPP 文件中实现了这个功能，在 main.js 文件下。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-02T19:34:15.737

您对 list1.pop_front() 的调用会删除迭代器最初指向的元素，使其无效。并且无效的迭代器不能递增。:)

用调试器花了几分钟才找到。在您逐步完成程序时，请注意“它”的价值。我不知道您是否知道如何使用调试器，但如果不知道，请帮自己一个忙并学习它。这是一个非常宝贵的工具。

（顺便说一句，将来请明确错误是在编译时发生还是在运行程序时发生。您的问题是在“编译程序”时发生错误。我刚刚为您编辑了问题，希望您不介意。但这是一个重要的区别，并且更难准确回答您的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T19:30:57.507

在我注释掉对 print() 的调用并将以下内容添加到开头之后，我还能够使用 VS2008 编译发布的代码：

```
#include <list>
using namespace std; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T19:33:55.423

这是我的主要内容：

```
> int _tmain(int argc, _TCHAR* argv[])
{
//DEFINE LIST
list <int> list1;
//FILL LIST
list1.push_front(5);
list1.push_front(2);
list1.push_front(1);
list1.push_front(9);
list1.push_front(12);
list1.push_front(3);
list1.push_front(4);
//PRINT LIST BEFORE SORTING
print(list1);
//SORT LIST

shuffle(list1);

//PRINT AFTER SORTING

system("pause");

return 0; 
```

并且错误消息只是 1，即如果我调试它（​​在 VC++ 2008 中按 F5），我会弹出一个列表迭代器不可递增的弹出窗口

# sql-server - 如何限制 SSIS 包中要处理的记录数？

> ID：335100
> 
> 赞同：2
> 
> 时间：2008-12-02T19:15:46.303
> 
> 标签：sql-server, ssis

我有一个包含 700 万条记录的表，我想将其缩减到 10k 以供开发人员使用。我尝试删除，但整个世界几乎被事务日志大小压倒，所以我截断了表。

现在我希望将原始表中的 10k 条记录插入到我的开发表中，但它有一个标识列和许多其他列，所以我想我会尝试 SSIS（通过向导），它处理身份很好，但我没有地方编辑查询。于是我赶紧做了一个带top子句的视图，把源的RowSet属性改成了视图。现在一切都失败了，因为什么都看不到视图，尽管我从我的 create view 语句中复制并粘贴了视图名称，但第二次失败了，因为视图确实存在。

SSIS 是否定义了在创建包时使用哪些 DB 对象，这将排除新视图，如果是，我该如何刷新它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-31T04:47:35.960

确实没有必要使用 SSIS 来执行此操作。您应该能够使用 SQL 插入记录。首先，您需要将 IDENTITY_INSERT 设置为 on。然后，您应该能够执行以下操作：

SET IDENTITY_INSERT db.schema.dev_table ON

插入到 dev_table SELECT TOP (10000) * FROM prod_table

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-01T11:52:49.813

Ed 是正确的，SSIS 对这项任务来说太过分了——尤其是当您只插入 10K 记录时。

假设 DEV 表的模式与生产模式相同，Ed 显示的脚本就可以正常工作。

如果架构不同，您可以专门指定列 - 包括标识列（记住之后将标识插入设置为 OFF）。例如：

```
SET IDENTITY_INSERT dbo.dev_table ON
INSERT INTO dev_table (Id, Col1,Col2,Col3,Col4)
SELECT TOP 10000 Id, Col1, Col2, Col3, Col4 FROM prod_table
SET IDENTITY_INSERT dbo.dev_table OFF 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-08-01T14:10:41.287

您还可以使用行采样控件从整体数据中提取随机数量的记录，而不仅仅是获取前 10000 行。这将为开发/测试提供更好的采样，因为您不会仅针对 10000 个最旧的（如果您的分布与我见过的大多数表一样）记录进行开发，而是从整个文件中进行采样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T20:21:45.343

您是否尝试关闭并重新打开包裹？我不希望你必须这样做。我的第一个想法是这是一个安全问题 - 你没有授予自己选择它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-26T22:32:37.013

您是否使用视图的完全限定名称？坐席的所有者与默认所有者不同吗？打开数据源并预览数据以确保所有数据都已连接。

# windows - Devel::Cover 在 Windows 的 Perl 5.10 上的 mod_perl2 下是否工作？

> ID：335102
> 
> 赞同：0
> 
> 时间：2008-12-02T19:16:39.703
> 
> 标签：windows, perl, code-coverage, mod-perl2

mod_perl2 和 Perl 5.10 两者配合得很好，但我似乎找不到任何关于在 Win32 下使用 mod_perl2 的[Devel::Cover的正面信息。](http://search.cpan.org/dist/Devel-Cover)我目前正在使用 ActiveState 的 Perl 5.10，但如果这意味着这种组合可以工作，我愿意切换到 Strawberry Perl。

此外，来自 ActiveState、Bribes、UWinnipeg 或 Trouchelle 的 Perl 5.10 似乎无法使用 Devel::Cover PPD，因此，如果您能够使其工作，那么您通过哪些步骤来运行成功的 make ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-23T15:15:37.633

似乎[最近的构建现在应该可以在 Windows 上](http://cpansearch.perl.org/src/PJCJ/Devel-Cover-0.65/CHANGES)运行，并且可以从 Perl 5.10 的主要存储库中获得。

但实际上，当您使用它时，Apache 在加载后立即关闭，并将其写入错误日志：

```
Unfortunately, Devel::Cover does not yet work with threads.  I have done
some work in this area, but there is still more to be done. 
```

# delphi - 有反编译Delphi的程序吗？

> ID：335104
> 
> 赞同：28
> 
> 时间：2008-12-02T19:17:42.557
> 
> 标签：delphi, reverse-engineering, decompiling

有人刚刚给我发了一个反编译成 C 的程序。这是一个非常好的反编译，产生了很好的、大部分是可读的 C 代码（如果你忽略了没有一个变量或函数有一个人类可读的名称的事实），大部分看起来像它实际上会编译。

不过，有一个大问题。我正好知道他反编译的程序是用Delphi写的，里面充满了C语言很难翻译的概念。但是反编译器的输出给我留下了深刻的印象，让我感到好奇。有什么可以为德尔福做的吗？

我见过的最好的 Delphi 反编译工具是 DeDe。它可以做很多事情，但它甚至不会尝试生成 Object Pascal 代码作为其输出，并且自 Delphi 6 以来它还没有更新。还有什么更好的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-02T19:24:08.173

我认为没有任何机器代码反编译器可以生成 Pascal 代码。大多数“Delphi 反编译器”解析表单和 RTTI 数据，但实际上并不反编译机器代码。我只能推荐使用 DeDe（或[类似软件](http://delphi.about.com/od/devutilities/a/decompiling_3.htm)）之类的东西结合 C 反编译器来提取符号信息，然后将反编译的 C 代码转换为 Delphi（那里有很多源代码转换器）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-08T09:57:07.933

你可以使用[IDR](https://github.com/crypto2011/IDR)它是一个很好的反编译 Delphi 的程序，它已更新到当前的 Delphi 版本，它有很多功能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-03T07:16:32.557

这是一个列表：[http](http://delphi.about.com/od/devutilities/a/decompiling_3.htm) ://delphi.about.com/od/devutilities/a/decompiling_3.htm （这个页面提到了更多： http: [//www.program-transformation.org/Transform/DelphiDecompilers](http://www.program-transformation.org/Transform/DelphiDecompilers)）

我偶尔使用过 DeDe，但它并没有那么强大，而且它与当前的 Delphi 版本不是最新的（我相信它支持的最新版本是 Delphi 7）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-03T07:55:45.397

Delphi、C 和 C++ 等语言编译为处理器本机机器代码，并且输出的可执行文件中几乎没有元数据或没有元数据。这与 Java 或 .Net 不同，后者编译为面向对象的独立于平台的字节码，保留方法的名称、方法参数、类和命名空间以及其他元数据。

因此，可以在 Delphi 或 C 代码上进行的反编译很少有用。但是，Delphi 通常为项目中的任何表单嵌入表单数据（由 $R *.dfm 行生成），并且它还具有所有已发布属性的元数据，因此特定于 Delphi 的工具能够提取此信息。

# gcc - 从 LD 隐藏共享对象中的符号

> ID：335108
> 
> 赞同：8
> 
> 时间：2008-12-02T19:19:19.900
> 
> 标签：gcc, linker, solaris, shared-libraries, ld

我有两个第三方库偶尔会导出相同的符号名称。加载可执行文件时，*ld*通常会选择错误的文件，结果导致我崩溃。我不能对这些库的内容做太多，所以可能有一种方法可以指导*ld*如何找到正确的实施方式？

操作系统 - Solaris 10，我的程序是由 autoconf/autotools/gcc 构建的，冲突的库是*libclntsh*（Oracle 驱动程序的一部分）和 OpenLDAP。不幸的是，我不能使用 Oracle 的 LDAP 客户端实现——它缺少 OpenLDAP 的许多功能。

编辑：链接如下：libclntsh.so->A.so->MAIN<-B.so<-libldap_r.so

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-02T19:39:52.590

如果您不需要在编译时链接两个共享库（从您的问题中不清楚），您可以使用`-Bdirect`共享库。这将记录共享库中找到它们的所有符号；如果在运行时出现符号的第二个定义（来自另一个共享库），它将被忽略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-02T20:09:31.047

一种解决方案是将`LD_PRELOAD`环境变量设置为符号应优先的库。（如果该库具有自己的共享库依赖项，您可能需要预加载其所有依赖项；只需设置`LD_PRELOAD`为依赖库列表，以空格分隔即可。）

# c# - 取消 WPF 文本框更改事件

> ID：335129
> 
> 赞同：5
> 
> 时间：2008-12-02T19:27:11.740
> 
> 标签：c#, .net, wpf, textbox

我正在学习来自 WinForms 开发的 WPF。

我有一个 TextChanged 事件分配给我的 WPF 应用程序中的一个 TextBox。如果用户输入无效数据，我希望能够恢复到以前的文本值。

在旧形式的日子里，我会用 OldValue 替换 NewValue，但 WPF 的工作方式似乎不同。

关于我能做到这一点的任何想法？我只是还没有考虑 WPF 吗？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-02T22:48:45.967

您可以通过以下两种方式执行此操作：

1.  监听`PreviewTextInput`事件并设置`e.Handled = true`为停止 TextChanged 事件。

2.  使用 WPF 验证。[Paul Stovell 在 Codeproject 上有一篇很棒的文章，](http://www.codeproject.com/KB/WPF/wpfvalidation.aspx)最近在[他的博客上](http://paulstovell.com/blog/wpf-validation)也有一篇文章。

这些文章将帮助您入门。我第一次进行验证时遇到的一件事是验证规则仅在绑定更新源时运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-02T23:08:39.343

我会使用 PreviewTextInput，WPF 中的大多数事件都有一个 Preview 兄弟。如果您设置 e.Handled = true 它将阻止事件进一步冒泡/隧道。

我不确定您是否知道，但据说预览事件是隧道，即。它们从最外面的容器开始，并发布在每个容器中，直到它到达具有焦点的控件。非预览事件被称为冒泡，即。它们从具有焦点的控件开始，并发布到每个父控件。

如果您在最外层网格的 PreviewTextChanged 事件上设置 e.Handled = true ，您将取消包括 TextChanged 在内的所有其他事件。首先，所有预览事件都从最外层触发到具有焦点的控件，然后所有非预览事件都从具有焦点的控件触发到最外层的父控件。

# perl - 为什么 Perl 压缩我的数组？

> ID：335133
> 
> 赞同：6
> 
> 时间：2008-12-02T19:30:32.593
> 
> 标签：perl

这是一个简短的测试程序：

```
sub foo($;@) {
  my $sql = shift;
  my @params = @_;

  print "sql: $sql\n";
  print "params: " . join(",", @params);
}

sub bar($;@) {
  foo(@_);
}

bar("select * from blah where x = ? and y = ?",2,3);
print "\n"; 
```

为什么输出是这样的：

```
sql: 3
params: 
```

而不是这个？

```
sql: select * from blah where x = ? and y = ?
params: 2,3 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-02T19:35:33.580

这是因为当您调用 时`foo(@_)`，for 的原型`foo()`会强制将第一个参数（即数组）转换为标量（即 中的元素数`@_`）。

请参阅我之前的问题“[为什么 Perl 函数原型不好](https://stackoverflow.com/questions/297034/why-are-perl-function-prototypes-bad)”的答案？

FWIW，如果您这样更改，您可以保留原型`bar`：

```
sub bar($;@) {
    foo(shift, @_);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-02T19:35:28.230

您误解了 Perl 原型。删除它们，它会正常工作。

请参阅：[为什么 Perl 5 的函数原型不好？](https://stackoverflow.com/questions/297034/why-are-perl-function-prototypes-bad)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-02T19:35:25.000

`($;@)`在你的函数名称之后摆脱它，它工作正常。

# c# - 从 XElement 创建带有名称空间和模式的 XML

> ID：335135
> 
> 赞同：12
> 
> 时间：2008-12-02T19:30:54.277
> 
> 标签：c#, schema, namespaces, xelement

一个冗长的问题 - 请耐心等待！

我想以编程方式创建一个带有命名空间和模式的 XML 文档。就像是

```
<myroot 
    xmlns="http://www.someurl.com/ns/myroot" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.someurl.com/ns/myroot http://www.someurl.com/xml/schemas/myschema.xsd">

    <sometag>somecontent</sometag>

</myroot> 
```

我正在使用相当出色的新 LINQ 东西（这对我来说是新的），并希望使用 XElement 来完成上述工作。

我的对象上有一个 ToXElement() 方法：

```
 public XElement ToXElement()
  {
     XNamespace xnsp = "http://www.someurl.com/ns/myroot";

     XElement xe = new XElement(
        xnsp + "myroot",
           new XElement(xnsp + "sometag", "somecontent")
        );

     return xe;
  } 
```

这给了我正确的命名空间，因此：

```
<myroot xmlns="http://www.someurl.com/ns/myroot">
   <sometag>somecontent</sometag>
</myroot> 
```

我的问题：如何添加模式 xmlns:xsi 和 xsi:schemaLocation 属性？

（顺便说一句，我不能使用简单的 XAtttributes，因为在属性名称中使用冒号“：”时出现错误......）

还是我需要使用 XDocument 或其他一些 LINQ 类？

谢谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-02T19:50:33.910

从这篇[文章](http://msdn.microsoft.com/en-us/library/bb387075.aspx)看来，您新建了多个 XNamespace，在根目录中添加了一个属性，然后带着这两个 XNamespace 进入城镇。

```
// The http://www.adventure-works.com namespace is forced to be the default namespace.
XNamespace aw = "http://www.adventure-works.com";
XNamespace fc = "www.fourthcoffee.com";
XElement root = new XElement(aw + "Root",
    new XAttribute("xmlns", "http://www.adventure-works.com"),
///////////  I say, check out this line.
    new XAttribute(XNamespace.Xmlns + "fc", "www.fourthcoffee.com"),
///////////
    new XElement(fc + "Child",
        new XElement(aw + "DifferentChild", "other content")
    ),
    new XElement(aw + "Child2", "c2 content"),
    new XElement(fc + "Child3", "c3 content")
);
Console.WriteLine(root); 
```

这是一个[论坛帖子](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=4197150&SiteID=1)，展示了如何进行模式定位。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-03T15:09:07.410

感谢 David B - 我不太确定我是否理解所有这些，但这段代码让我得到了我需要的东西......

```
 public XElement ToXElement()
  {
     const string ns = "http://www.someurl.com/ns/myroot";
     const string w3 = "http://wwww.w3.org/2001/XMLSchema-instance";
     const string schema_location = "http://www.someurl.com/ns/myroot http://www.someurl.com/xml/schemas/myschema.xsd";

     XNamespace xnsp = ns;
     XNamespace w3nsp = w3;

     XElement xe = new XElement(xnsp + "myroot",
           new XAttribute(XNamespace.Xmlns + "xsi", w3),
           new XAttribute(w3nsp + "schemaLocation", schema_location),
           new XElement(xnsp + "sometag", "somecontent")
        );

     return xe;
  } 
```

似乎连接一个命名空间加上一个字符串，例如

```
w3nsp + "schemaLocation"
```

给出一个名为

```
xsi:schemaLocation
```

在生成的 XML 中，这是我需要的。

# asp.net - ASP.NET 中的 Session 中真正存储了什么？

> ID：335137
> 
> 赞同：8
> 
> 时间：2008-12-02T19:30:59.987
> 
> 标签：asp.net, session, persistence, postback

我们正在尝试决定如何处理跨回发的对象持久性，以避免在每个请求中从数据库中获取数据，并且我倾向于使用 Session（它是一个 Intranet 应用程序，不会有成千上万的用户），但是这是因为我怀疑只有对真实对象的引用存储在那里......

如果这是真的，有人知道事实吗？

我一直被教导不要过度使用会话对象，但如果它以这种方式工作，那真的不是一个大问题......

真正存储在会话中的内容：

```
Session["myKey"] = myObject; 
```

实际的序列化对象，还是它的引用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-02T20:05:20.510

我试过这个：

我已经创建了一个类并将它的一个实例存储在会话中（会话状态模式：InProc）。实例位于 aspnet_wp.exe proc 中。

然后，我将会话状态更改为 SQL Server（仍然没有 [Serializable] 属性），然后出现以下错误。

**无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。**

因此，inProc 会话状态没有序列化。

干杯...马丁

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-02T19:39:31.280

ASP.NET 默认创建一个存储在 cookie 中的 GUID（但您可以指定使用查询字符串）来识别用户。默认情况下，与该 cookie 关联的对象存储在 IIS 进程内的服务器上。

您还可以创建自定义会话对象存储（会话状态存储提供程序），例如，如果您想将会话对象保持在进程之外。

更多信息在这里：

[http://msdn.microsoft.com/en-us/library/ms178587.aspx](http://msdn.microsoft.com/en-us/library/ms178587.aspx)

但要真正回答你的问题......

开箱即用，假设会话存储仅存储对对象的引用是正确的。

虽然，我相信您可以在 web.config 中指定会话功能的存储行为，以实现序列化。3种模式：

*   InProc - 会话作为活动对象保存在 Web 服务器 (aspnet_wp.exe) 中。在 web.config 中使用“cookieless”配置将 sessionId “mung”到 URL 上（也解决了 cookie/domain/path RFC 问题！）
*   StateServer - 会话序列化并存储在内存中的单独进程 (aspnet_state.exe) 中。状态服务器可以在另一台机器上运行
*   SQLServer - 会话序列化并存储在 SQL Server 中

以上来自：[http ://www.eggheadcafe.com/articles/20021016.asp](http://www.eggheadcafe.com/articles/20021016.asp)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-02T19:42:38.840

这取决于您使用的会话，如果您使用 inproc 会话，您确实在会话中存储了引用，但是在引用它时它只是一个指向对象的链接，它将整个对象保留在进程内存中，所以当你设计你的应用程序时非常希望知道每个用户将拥有多少数据以及每小时将拥有多少活跃用户。如果在 proc session 中使用，则 proccess 内存中的对象不会被序列化，但如果在 out of proc session 中使用，它会被序列化，它可能会对性能产生影响。

我认为在这里您可以找到非常好的[会话和缓存概述](http://www.west-wind.com/Weblog/posts/1214.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-02T20:08:43.200

有大量文章和博客文章哀叹在会话变量中存储复杂对象（技术上存储对所述对象的引用）的使用。一般来说，我认为会话变量是魔鬼的工作，并尽我所能避免它们。

也就是说，对于一个部署在 Intranet 的应用程序，开发人员完全了解 Juan Manuel 所描述的过度使用会话会话的可伸缩性影响，我已经这样做了很多次并且取得了巨大的成功。是的，会话可以回收，但这是一个不寻常的边缘情况——这种情况发生的频率不足以影响具有合理会话超时的浏览器应用程序。

我会说按照您建议的方式构建应用程序，Juan Manuel，至少一开始是这样。但是将您保存和从会话中获取对象的地方（可能使用包装器类）松鼠，这样如果应用程序需要，以后很容易更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T19:51:51.520

重要的是要记住，In-Proc Session 数据相当脆弱……这意味着当您最需要它时它可能不存在。如果工作进程因任何原因回收，它就*消失*了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-02T19:56:19.153

我知道您现在没有太多性能问题，会话可能会正常工作；但是，还有其他方法可以在回发中维护状态或携带数据。

如果您尝试在同一页面的回发中保留数据，那么我建议您改用 ViewState。请注意，存储在 ViewState 中的数据是序列化的，您想要持久化的任何对象都必须实现 ISerializable。

# java - 哪种模式更适合代码生成、XMLBeans 或 JAXB？

> ID：335156
> 
> 赞同：4
> 
> 时间：2008-12-02T19:35:51.380
> 
> 标签：java, xml, xsd

想要使用 XML 模式库来生成代码，并想知道人们是否偏好 XMLBeans 和 JAXB。性能、架构验证能力、内存使用情况……任何指标都会有所帮助……

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-02T20:37:22.987

我个人的偏好是 JAXB。它采用更现代的方法使用注解和许多 Java 5 特性。另一方面，XMLBeans 仍然与 Java 1.4 兼容——如果您需要的话。其他一些没有特别的想法是：

*   从 Java 6 开始，JAXB 与 JDK 捆绑在一起 - 所以它是开箱即用的。
*   JAXB 与带注释的 Java（类似 POJO）类一起工作 - XMLBeans 生成接口并且没有类
*   JAXB 允许注释 Java 类以使用它们进行编组和解组，或者您可以从 XML Schema 开始，生成 Java 类，然后进入 un-/marshalling
*   XMLBeans 只允许从 XML Schema 开始，生成接口，然后将其用于 un-/marshalling

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-08T17:04:07.953

JAXB 的另一个好处是，由于您使用的是 POJO，因此您可以将它们用作**一流的域对象**，并在整个应用程序堆栈中使用它们。

想将它们用作 DAO 层的值对象吗？作为 UI 层中的模型怎么样？去吧。

这样，您的映射层和 DTO 就更少了，这意味着要编写、测试和维护的代码更少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T22:57:07.463

对于 Joachim 的回答 +1，并添加我最喜欢的功能之一，JAXB 2.0 从受限的简单类型创建 Java 枚举。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-11T18:25:34.973

XmlObjects 也是一流的域和 DTO 对象以及视图对象，可轻松访问 xml 信息集以进行高效解析。通常，业务对象的粒度太粗，所以无论如何都必须使用 DTO 组装器或映射框架为 XmlBeans 和 JAXB 实现一些映射。JAXB 提供编组时间验证，并且更好地与基础设施集成，但我认为 XmlBeans 的优势比 JAXB 的优势强

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-26T17:01:06.553

我更喜欢 XMLBeans，因为它带有一个名为“inst2xsd”的方便工具，它允许您从 XML 文档生成模式。JAXB 只能编译模式，不能生成它们。

# php - 执行多个 URL 的 PHP 脚本？

> ID：335158
> 
> 赞同：1
> 
> 时间：2008-12-02T19:36:42.517
> 
> 标签：php, url, e-commerce

是否有一种 php 脚本可以运行一系列 URL，然后将用户引导到最终目的地？其用途是：在没有强大的“愿望清单”功能的网站上创建结帐购物车。

该脚本运行一系列“将项目添加到购物车”网址，然后最终目的地将用户带到他们为他们挑选的产品的购物车。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-02T19:42:03.943

是的，你可以用 ajax 做到这一点。

使用[jQuery](http://jquery.com)执行您的 ajax 请求。

例如

```
$.get("http://mywebsite.com/json/cart_add.php?pid=25");
$.get("http://mywebsite.com/json/cart_add.php?pid=27"); 
```

如果您使用会话，那么它将被添加到当前会话中，前提是它位于同一域中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-02T19:41:07.563

见[http://php.net/curl](http://php.net/curl)

**编辑：**至于通过 cURL 管理远程会话，这取决于远程站点如何跟踪会话。有些使用 cookie（cURL 支持），有些生成一个 sessionid 令牌，您必须在后续请求中将其作为参数或在 http 标头中传回。

PHP 的 cURL API 的文档非常少，因此您可能需要寻找更完整的教程。我通过谷歌搜索“curl cookie 教程”找到了以下内容：

[http://coderscult.com/php/php-curl/2008/05/20/php-curl-cookies-example/](http://coderscult.com/php/php-curl/2008/05/20/php-curl-cookies-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T19:43:25.217

这实际上取决于您网站的具体情况。

如果是oo，您也许可以依次调用相关方法将项目添加到篮子中？或者你可以用包含来做到这一点？

或者可能是该站点有一些您可以使用的包含文件？

或者它可能有一种机制来在将项目添加到您可以利用的购物篮后重定向用户？

或者如果没有，在我写作时出现了其他答案，这些答案提出了使用 javascript 或 curl 实现此目的的有效方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T20:27:04.023

ok i'm going to try the ajax suggestion but i'm not sure how the code is formatted with get and post. this is what i've started and it doesn't fetch the url(i swapped in generic urls for demonstration);

```
 <html>   
 <head>                                        
 <script type="text/javascript" src="jquery-1.2.6.min.js"></script>          
 <script type="text/javascript">      
 $(document).ready(function() {    
 $("a").click(function(){    
 $.get("http://www.store.com/item4");    
 $.get("http://www.store.com/item5");
 alert("Items Added, Now Redirecting");           
 });    
 });                                                         
 </script>                                                         
 </head>  
 <body>
 <a href="">Link</a>                                                                                               
 </body>                                                                        
 </html> 
```

# vba - 使用 VBA 和“保护文档”功能的 Microsoft Word 保护样式

> ID：335188
> 
> 赞同：1
> 
> 时间：2008-12-02T19:46:09.207
> 
> 标签：vba, ms-word

我试图限制用户可以在 Word 2003 文档中使用的样式。我通过使用“保护文档”功能来做到这一点。对于我的情况，我可能需要使用 VBA，但我不确定。

保护文档后，我不能再将样式应用于单个单词而不更改整个段落的样式。

例如，如果我试图在下面的句子中将“house”这个词改成新的风格......

**山上有一座房子。**

那么整个句子就会变成那种风格，而不仅仅是房子这个词。有谁知道如何使用 VBA 解决这个问题或知道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T14:02:36.577

在样式和格式窗格中，查看旁边有字母“a”的样式（而不是段落标记¶）。这些是字符样式。例如，Emphasis 样式应用斜体，Strong 样式应用粗体。您可以为自己的模板定义其他字符样式；只需将“新样式”对话框中的“样式类型”下拉菜单从段落更改为字符。

在“保护文档”窗格中，选中“限制格式”框后，单击其下方的“设置”链接，然后选择要允许的样式。您可以在那里选择字符样式以及段落样式。用户可以应用任何一种样式，只要它是您允许的列表中的样式。

# apache-flex - 展示 Flex - Tour de Flex

> ID：335190
> 
> 赞同：2
> 
> 时间：2008-12-02T19:46:42.030
> 
> 标签：apache-flex, actionscript, spam

几天前我遇到了[环法自行车赛。](http://flex.org/tour)这是一个展示所有 Flex 控件的演示，其中包含对源和参考的交叉引用。这是了解可用资源以及如何使用它们的好方法。

不是一个问题，而是一个有用的资源，因为我在这里看到了许多 Flex/Actionscript 问题。

（请注意，我已经预先标记了我能想到的所有无信用标签。如果你能想到的话，可以添加更多。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-08T21:23:25.120

问：什么时候问题不是问题？

* * *

- 答：当它是修辞。

它认为最好让这个问题可以回答，而不是试图避免获得荣誉。例如，我会问类似的问题：

> 有哪些了解 Flex 控件的好资源？

这将使您的“问题”的主体成为可接受的答案。

此外，您可能会发现其他人会贡献他们发现的其他资源。就目前而言，这个问题不会邀请进一步的答案，并且具有垃圾邮件的外观。只是让你知道。

# asp.net - 从 asp.net 更新 Oracle 时是否需要“提交”？

> ID：335192
> 
> 赞同：2
> 
> 时间：2008-12-02T19:47:10.703
> 
> 标签：asp.net, oracle

我有这个代码

```
 protected void btnUpdateAddress_Click(object sender, EventArgs e)
    {
        sdsAddressComparison.Update();
    } 
```

我用来更新 oracle 数据库的。当我在 SQL Navigator 中运行更新 sql 代码时，我必须输入“提交”或点击提交按钮。

我是否必须在 ASP.NET 的某个地方编写“提交”代码？如果是这样，我该怎么做以及在哪里做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T19:50:13.550

通常，不，您不需要提交。

但是，您可以编写代码来使用事务，并且在事务完成时您可以调用 commit。

**EG（常规）：**

```
try {
        // Open connection
        dbConn.Open();
        //DB Update Code Here
    }
    catch (Exception ex) {
        throw;
    }
    finally {
        // Close database connection
        dbConn.Close();
    } 
```

**EG（作为交易）：**

```
try {
        // Open connection & begin transaction
        dbConn.Open();
        dbTran = dbConn.BeginTransaction();

        //DB Update Code Here
        // Commit transaction
        dbTran.Commit();
    }
    catch (Exception ex) {
        // Rollback transaction
        dbTran.Rollback();
        throw;
    }
    finally {
        // Close database connection
        dbConn.Close();
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-02T20:21:30.960

默认情况下，您的 ASP.Net 代码和大多数其他数据库客户端 API（ODBC、OLE DB、JDBC 等）以自动提交模式运行。也就是说，只要一条语句成功执行，就会提交结果。如果您在这种默认模式下运行，则无需显式提交更新。

另一方面，将您的更新放在显式事务中通常有很多话要说——如果您必须发出多个更新以进行一个逻辑业务更改，那么默认的自动提交模式非常糟糕一。这里的经典示例是，如果您更新账户 A 以提取 50 美元，然后更新账户 B 以存入 50 美元，由于启用了自动提交，您最终有两个不同的交易，那么第一笔交易可能会成功，而另一笔交易可能会成功。交易失败，系统丢失 50 美元。

因此，您通常希望编写类似于 Brian 演示的使用事务并发出显式提交的代码。但默认情况下，您不必这样做，您的更新将自动提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T13:29:35.410

自动提交在 SQL*Plus 中也可用。

```
SET AUTOCOMMIT ON
SET AUTOCOMMIT OFF 
```

或者

```
SET AUTOCOMMIT 100 
```

使用 SHOW AUTOCOMMIT 查看当前设置。

但是……我讨厌这个设置。你在一个有意义的工作单元结束时提交，而不是部分完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T22:22:22.807

您在 SQL Navigator 中看到的行为可能是由选项设置决定的。

我没有使用[SQL Navigator](http://www.quest.com/sql-navigator/)，但我确实使用了 Quest Software 的[TOAD 。](http://www.quest.com/toad-for-oracle/)在选项对话框中，它位于 View->Toad Options... 下，然后是 Oracle->Transactions 节点。

有以下相关设置：

*   [ ] 在每条语句之后提交（复选框）

*   关闭连接时：（无线电选择）

    *   （ ） 犯罪
    *   ( ) 回滚
    *   ( ) 当检测到更改或由于 dmbs_transaction 缺乏权限而无法检测时提示提交/回滚。

因此，您可以更改设置，这样您就不需要点击提交按钮（或键入“commit”），但这通常是一种不好的做法，因为提交是您应该明确执行（或明确回滚）的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T19:57:30.043

只是为了澄清......我不是在谈论 SQL Server 事务......我在谈论 Oracle 更新，当我使用 SQL navigator 或 SQL Plus 时，通常需要提交命令

我发布这个的原因是因为我可以在 SQL Navigator 中更新这些数据，但是当我使用 ASP.NET 时它不会更新。

# msbuild - MSBuild：如何强制 ProjectReference 在其他地方搜索程序集？

> ID：335193
> 
> 赞同：4
> 
> 时间：2008-12-02T19:47:18.160
> 
> 标签：msbuild, build-automation, tfsbuild

我们有大量包含相同共享 15 个项目的 Visual Studio 解决方案，并且大多数解决方案仅在 Web 应用程序上有所不同。

我正在尝试将所有内容整合到一个仅构建一次共享项目的单一构建中，然后让 Web 应用程序项目引用输出共享程序集。

我发现，由于 web 项目通过 <ProjectReference> 元素指向共享项目，我不能告诉它在我的自定义构建项目中的其他地方寻找程序集。我想使用类似的东西：

<MSBuild Projects="@(Solutions)" Targets="Rebuild" Properties="ReferencePath=$(MyReferencePathFolder)">

但这仅在 Web 项目通过 <Reference> 元素引用共享程序集的 dll 时才有效。似乎如果在 <ProjectReference> 中找不到指向的内容，它不会尝试查看任何 ReferencePath 文件夹。它只是放弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T22:46:23.977

您可能需要考虑从众所周知的位置引用 15 个共享程序集。

您可以创建一个包含 15 个项目的解决方案并将输出复制到特定文件夹。然后，您可以更改您的 Web 应用程序项目以引用程序集，而不是共享项目。

使用这种方法失去的是从 Web 应用程序解决方案自动重建共享项目的能力。如果您想在处理其中一个 Web 应用解决方案时自动重新构建 15 个程序集，您可以在您的 Web 应用解决方案中添加预构建步骤来构建新的共享项目解决方案。

# asp.net-ajax - 尝试将 RoundedCornerExtender 应用于 Table 会使 Table 闪烁并消失

> ID：335199
> 
> 赞同：1
> 
> 时间：2008-12-02T19:49:03.507
> 
> 标签：asp.net-ajax

我负责为一个网站设计原型，该网站除其他外还有一个“每日新闻”部分，这是用户可编辑的内容。

我正在使用母版页，该网站的默认页面有一些 div，用于显示他们想要显示的各种“首页”内容。在“newstoday” div 中，我有一个表格，其中一个单元格中嵌入了 ListView，以显示数据库中的所有有效条目，并且效果很好。

他们希望面板上的东西看起来更漂亮，并建议使用圆角，就像您在 iGoogle 中看到的那样。所以我发现 AJAX 有内置的东西，然后开始安装和更新东西。

但是，当我将“RoundedCornersExtender”应用于表格时（就像我在网上看到的示例一样），表格的内容会在屏幕上短暂闪烁然后消失 - 或者更准确地说，之后隐藏在 div 的内容后面（页脚，安全信息等）。

我补充的是：

> ```
> <cc1:RoundedCornersExtender ID="tblNews_RoundedCornersExtender" runat="server" Radius="5"
>     TargetControlID="tblNews" Enabled="True" Color="Navy">
> </cc1:RoundedCornersExtender> 
> ```

在其他尝试中，我将表格放在面板中并且部分工作 - 给了我圆形的顶部和底部边框，但两侧没有 - 我怀疑是因为面板占用了 div 的整个宽度而不是按表格调整大小内部（不同的问题，但我稍后会处理）。

因此，如果我将 RCE 定位到面板上，它可以工作一半，但如果我将它放在桌子上，它就不起作用并将桌子变成“闪光器”。我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-03T04:06:49.163

我有几个使用 RoundedCornerExtender 的项目，我记得它在 Panel 以外的任何东西上都很挑剔。这可能只是我的设置，但如果我没有将面板上的 BackColor 设置设置为适当的颜色，它就无法正确绘制（它不喜欢我通过 CSS 设置背景颜色）。

话虽如此，我不需要做任何其他特别的事情来让它在面板上工作，所以我可能会继续调整面板大小，看看是否能解决问题。

# php - PHP $string{0} 与 $string[0];

> ID：335205
> 
> 赞同：36
> 
> 时间：2008-12-02T19:50:45.017
> 
> 标签：php, string

在 PHP 中，您可以通过几种不同的方式访问字符串的字符，其中之一是 substr()。您还可以使用大括号或方括号访问字符串中的第 N 个字符，如下所示：

```
$string = 'hello';

echo $string{0}; // h
echo $string[0]; // h 
```

我的问题是，一个比另一个有好处吗？{} 和 [] 有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2008-12-02T19:54:12.327

使用`$string[0]`，另一种方法（大括号）在 PHP6（[src](http://php.net/string)）中被弃用

> 注意：也可以使用大括号访问字符串，如 $str{42}，用于相同目的。但是，从 PHP 6 开始不推荐使用此语法。请改用方括号。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-11-07T18:47:04.877

[**没有区别。**](https://stackoverflow.com/a/26809707/632951)欧文的回答已经过时，最新版本的 PHP 手册不再声明它已被弃用[§](http://php.net/manual/en/language.types.string.php#language.types.string.substr)：

> 字符串中的字符可以通过使用方数组括号指定字符串后所需字符的从零开始的偏移量来访问和修改，如`$str[42]`. **为此，将字符串视为字符数组**。[...]
> 
> 注意：也可以使用大括号访问字符串，如 中`$str{42}`，**出于相同的目的**。

然而，似乎更多的人/项目使用`[]`，而且很多人甚至不知道`{}`是可能的。**如果您**需要公开或与不了解花括号语法的人共享您的代码，使用`[]`.

`{}`更新：不推荐使用访问字符串字符，请`[]`改用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-13T03:10:01.337

是的，没有区别。这种语言怪癖有一些历史......

最初，花括号语法旨在替换将被弃用的方括号语法：

[http://web.archive.org/web/20010614144731/http://www.php.net/manual/en/language.types.string.php#language.types.string.substr](http://web.archive.org/web/20010614144731/http://www.php.net/manual/en/language.types.string.php#language.types.string.substr)。

后来该政策被逆转，而首选方括号语法：

[http://web.archive.org/web/20060702080821/http://php.net/manual/en/language.types.string.php#language.types.string.substr](http://web.archive.org/web/20060702080821/http://php.net/manual/en/language.types.string.php#language.types.string.substr)

甚至后来，花括号之一将被弃用：

[http://web.archive.org/web/20080612153808/http://www.php.net/manual/en/language.types.string.php#language.types.string.substr](http://web.archive.org/web/20080612153808/http://www.php.net/manual/en/language.types.string.php#language.types.string.substr)

在撰写本文时，似乎弃用也已被撤回，它们仅被视为两种替代语法：

[http://web.archive.org/web/20160607224929/http://php.net/manual/en/language.types.string.php#language.types.string.substr](http://web.archive.org/web/20160607224929/http://php.net/manual/en/language.types.string.php#language.types.string.substr)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-01T15:59:44.587

大括号访问在 PHP 7.4 中已弃用

> 使用花括号访问数组和字符串偏移量¶
> 
> 不推荐使用大括号的数组和字符串偏移访问语法。使用 $var[$idx] 而不是 $var{$idx}。

[PHP 7.4 弃用的功能，PHP 核心](https://www.php.net/manual/en/migration74.deprecated.php#migration74.deprecated.core.array-string-access-curly-brace)

# f# - 为什么“-1”不能减去1？

> ID：335211
> 
> 赞同：3
> 
> 时间：2008-12-02T19:53:40.207
> 
> 标签：f#, pdc2008

我试图与[PDC2008 Intro to F# video](http://channel9.msdn.com/pdc2008/TL11/)一起编写代码。我在下面显示的代码片段的最后一行出现错误（演示者没有得到）“错误 1 ​​此值不是函数，无法应用”。我在 Visual Studio 2008 shell 上运行 Fsharp-1.9.6.2。最后一行中的`startPrice`符号带有红色下划线，鼠标悬停时出现相同的错误。提前致谢！

```
type StockAnalyzer (lprices, days) = 
    let prices =
        lprices
        |> Seq.map snd
        |> Seq.take days
    static member GetAnalyzers (tickers,days) = 
        tickers
        |> Seq.map loadPrices
        |> Seq.map (fun prices -> new  StockAnalyzer (prices, days))
    member s.Return = 
        let  lastPrice = prices |> Seq.nth 0
        let  startPrice = prices |> Seq.nth (days - 1)
        lastPrice / startPrice  -1. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-02T19:56:39.043

尝试在“-”和“1”之间放置一个空格。F# 编译器将 -1 解释为负值 1 而不是减 1。

# c# - 如何从 aspx.cs 页面切换确认消息框

> ID：335229
> 
> 赞同：0
> 
> 时间：2008-12-02T20:00:15.870
> 
> 标签：c#, .net, asp.net, javascript, html

我有一个搜索程序，它将从数据库中查看数据库。如果日期范围超过 3 周，我想提醒他们数据库中的所有数据可能需要一段时间。我在 JavaScript 函数中有一个确认消息框。我想检查 aspx.cs 页面中的日期范围。如何根据该条件触发消息框？这是我在 html 上的一些代码的副本。我不知道如何接近检查点。

```
function warning() {            
   var answer = confirm("The date range you have selected will return a substantial amount of data and will take some time to process.\n\nAre you sure you want to continue?");
   if (answer)
      return true;
   else
      return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T20:23:37.727

一个确认框继续，点击按钮时弹出

```
SearchButton.Attributes.Add("onclick", "javascript:return " + "confirm('" + 
"The date range you have selected will return a substantial amount of data and will take some time to process.\n\nAre you sure you want to continue?')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T20:04:27.780

为什么要检查服务器端的日期范围？如果您在客户端有日期范围，则工作量要少得多。

否则，您将需要 postpack（或部分发布），然后检查日期范围，然后将警告 javascript 渲染回页面...

是时候重新考虑你的方法了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T20:19:49.373

在调用回发之前，您最好在客户端检查您的日期范围并通过 JS 触发消息框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T20:32:55.790

如果按钮是提交按钮，则将其添加到 onclick() 中。true 返回值将允许页面继续提交，而 false 将停止回发（提交）。

编辑：在你说它不对之前尝试一下。它看起来很复杂，但其实很简单。获取第一个日期，获取第二个日期，比较它们。如果差异小于 3 周，则返回 true 并允许页面回发（提交），否则提醒用户并返回他们的答案。

功能...

```
function warning() {            

    var ele;
    var startDate;
    var endDate;
    var threeWeeksInMilliseconds = 1814400000; //1000 ms * 60 sec * 60 min * 24 hr * 21 days

    //get starting value
    ele = document.getElementById('txtStartDate');
    if (ele == 'undefined'){
        return false; //no start element
    }
    else {
        try{
            startDate = new Date(ele.value);
        }
        catch (e) {
            return false;
        }
    }

    //get the ending value
    ele = document.getElementById('txtEndDate');
    if (ele == 'undefined'){
        return false; //no start element
    }
    else {
        try{
            endDate = new Date(ele.value);
        }
        catch (e) {
            return false;
        }
    }

    //getTime() returns milliseconds
    if ((endDate.getTime() - startDate.getTime()) < threeWeeksInMilliseconds) {
        return true;
    }
    //else present the message for confirmation.

    var msg = "The date range you have selected will return a substantial " + "" +
            "amount of data and will take some time to process.\n\n" + 
            "Are you sure you want to continue?";
    var answer;

    answer = confirm(msg);

    if (answer) {
        return true;
    }
    else {
        return false;
    }

    //default return condition - nothing should get here so this indicates an error.
    //Use true if you want to allow this to process. 
    return false;
} 
```

# django - 在 Django 中，是否可以从自定义标签中访问当前用户会话？

> ID：335231
> 
> 赞同：23
> 
> 时间：2008-12-02T20:01:52.733
> 
> 标签：django, django-templates

我正在 Django 中编写一个自定义标记，它应该输出存储在用户会话中的值，但是我找不到从自定义标记函数中访问会话对象的方法。有没有办法做到这一点，而无需手动将会话对象分配给上下文变量？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-02T23:33:15.597

您应该能够在 settings.py 文件中添加请求上下文处理器：

```
TEMPLATE_CONTEXT_PROCESSORS = ("django.core.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
'django.core.context_processors.request',) 
```

这将与当前答案执行相同的操作，而无需添加自定义文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-08T03:04:13.373

Sebastian 无意冒犯，因为这似乎是一个有用的 hack，但奇怪的是，在 12 月 24 日，在一篇关于在 Admin 中访问用户数据的博客文章中，Django 的发布经理 James Bennett[谈到了使用 threadlocal黑客](http://www.b-list.org/weblog/2008/dec/24/admin/)：

> 一个很大的免责声明：这些类型的功能有很多潜在的用途。他们中的许多人都是错误的和愚蠢的，你不应该尝试它们。...此外，您偶尔会看到有人建议可以通过所谓的“threadlocal hack”获得这些功能；这基本上涉及将 request.user 粘贴到一种神奇的全局可用变量中，如果您不知道自己在做什么，那么使用它是一件非常糟糕的事情。即使您确实知道自己在做什么，这通常也是一件非常糟糕的事情，因为您可能只是因为懒惰并且不想确保正确传递信息而这样做。因此，如果您看到有人建议您使用“threadlocal”执行此操作，请忽略该人。

并不是说您应该忽略 Sebastian，但可能值得追求其他途径而不是使用不被认为是最佳实践的 threadlocal。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-02T20:33:00.220

您可以使用自定义上下文处理器来执行此操作（请参阅[http://docs.djangoproject.com/en/dev/ref/templates/api/](http://docs.djangoproject.com/en/dev/ref/templates/api/?from=olddocs#writing-your-own-context-processors)）

在这种情况下，您将在 settings.py 文件的同一级别创建一个名为 context_processors.py 的新文件，其中包含：

```
def add_session(request):
    return {'session': request.session} 
```

然后，在您的 settings.py 文件中，添加：

```
TEMPLATE_CONTEXT_PROCESSORS = ("django.core.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
'context_processors.add_session',) 
```

您现在可以在自定义标签中引用 context['session']。

请注意，这仅适用于分配了 RequestContext 呈现的模板，如以下代码所示：

```
def test(request):
    return render_to_response('test.html',{}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-01T21:06:37.620

我发现这很有用：[http ://code.djangoproject.com/wiki/CookBookThreadlocalsAndUser](http://code.djangoproject.com/wiki/CookBookThreadlocalsAndUser)

您可以使用中间件获取用户信息并将其存储在本地线程中，然后将其与您的标签定义一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-25T12:19:15.410

使用[django-annoying](http://bitbucket.org/offline/django-annoying)中的 render_to 装饰器似乎是最好的选择（如[另一个关于 stackoverflow](https://stackoverflow.com/questions/1052317/why-on-earth-do-i-have-to-pass-requestcontext-in-all-of-my-responses)的问题中所见）

# screen-scraping - 获取列表的最快方法 values from all pages on localhost website</h1> <div id="body"><p>I essentially want to spider my local site and create a list of all the titles and URLs as in:</p> <pre> http://localhost/mySite/Default.aspx

> ID：335232
> 
> 赞同：4
> 
> 时间：2008-12-02T20:01:53.073
> 
> 标签：screen-scraping, web-crawler

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-02T20:29:37.090

一个快速而肮脏的 Cygwin Bash 脚本可以完成这项工作：

```
#!/bin/bash
for file in $(find $WWWROOT -iname \*.aspx); do
  echo -en $file '\t'
  cat $file | tr '\n' ' ' | sed -i 's/.*<title>\([^<]*\)<\/title>.*/\1/'
done 
```

说明：这会找到根目录 $WWWROOT 下的每个 .aspx 文件，将所有换行符替换为空格，以便`<title>`and之间没有换行符`</title>`，然后抓取这些标记之间的文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-02T20:37:07.043

我认为类似于[Adam Rosenfield 建议](https://stackoverflow.com/questions/335232/quickest-way-to-get-list-of-title-values-from-all-pages-on-localhost-website#335324)的脚本是您想要的，但如果您想要实际的 URL，请尝试使用`wget`. 使用一些适当的选项，它会打印出您网站上所有页面的列表（加上下载它们，也许您可​​以使用 取消`--spider`）。该`wget`程序可通过正常的 Cygwin 安装程序获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T21:58:44.290

我会使用上面详述的 wget 。确保您的网站上没有任何[蜘蛛陷阱](http://en.wikipedia.org/wiki/Spider_trap)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-02T03:34:05.987

你应该考虑使用scrapy shell

查看

[http://doc.scrapy.org/intro/tutorial.html](http://doc.scrapy.org/intro/tutorial.html)

在控制台中放这样的东西：

hxs.x('/html/head/title/text()').extract()

如果你想要所有的标题，你应该做一个蜘蛛......这真的很容易。

还可以考虑迁移到 linux :P

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T20:23:37.757

Ok, I'm not familiar with Windows, but to get you in the right direction: use a XSLT transformation with

<xsl:value-of select="/head/title" /> in there to get the title back or if you can, use the XPath '/head/title' to get the title back.

# .net - 客户端上的 InfoPath 表单与 Forms Server / MOSS 中托管的表单

> ID：335238
> 
> 赞同：0
> 
> 时间：2008-12-02T20:04:02.260
> 
> 标签：.net, sharepoint, moss, infopath

客户端`InfoPath`中的表单与通过 Forms Server 托管的表单之间是否存在明确的功能差异列表？`InfoPath``InfoPath`

与以前使用过并部署过该技术的人交谈时，他们无法告诉我任何具体的信息，除了在 Forms Server 中托管更复杂的表单时不可能。

但是找不到任何文档，想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-05T07:17:02.133

这是启用浏览器的表单限制的官方文档：

[http://office.microsoft.com/en-us/infopath/HA102040851033.aspx](http://office.microsoft.com/en-us/infopath/HA102040851033.aspx)

# iphone - iPhone 设计模式支持

> ID：335240
> 
> 赞同：3
> 
> 时间：2008-12-02T20:04:59.980
> 
> 标签：iphone, iframe, safari, ipod-touch, designmode

任何人都知道 iPhone 和 iPod touch 上的 Safari 在设计模式下是否支持 iFrame，如果支持，我该如何启用它？我尝试了以下方法，但都不起作用（但它适用于我的电脑）：

```
theIframe.contentWindow.document.body.contentEditable = true;

theIframe.contentWindow.document.designMode = 'on';

theIframe.contentDocument.designMode = "on"; 
```

谢谢！

# jquery - Why does Chrome ignore local jQuery cookies?

> ID：335244
> 
> 赞同：85
> 
> 时间：2008-12-02T20:06:11.023
> 
> 标签：jquery, cookies, google-chrome

I am using the jQuery Cookie plugin ([download](http://plugins.jquery.com/project/cookie) and [demo](http://stilbuero.de/jquery/cookie/) and [source code with comments](http://plugins.jquery.com/files/jquery.cookie.js.txt)) to set and read a cookie. I'm developing the page on my **local machine**.

The following code will successfully set a cookie in FireFox 3, IE 7, and Safari (PC). But **if the browser is Google Chrome AND the page is a local file**, it does not work.

```
$.cookie("nameofcookie", cookievalue, {path: "/", expires: 30}); 
```

**What I know**:

*   The plugin's [demo](http://stilbuero.de/jquery/cookie/) works with Chrome.
*   If I put my code on a web server (address starting with http://), it works with Chrome.

So the cookie fails only **for Google Chrome on local files**.

**Possible causes**:

*   Google Chrome doesn't accept cookies from web pages on the hard drive (paths like file:///C:/websites/foo.html)
*   Something in the plugin implentation causes Chrome to reject such cookies

Can anyone confirm this and identify the root cause?

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2008-12-07T20:00:56.833

Chrome doesn't support cookies for local files (or, like Peter Lyons mentioned, localhost*) unless you start it with the --enable-file-cookies flag. You can read a discussion about it at [http://code.google.com/p/chromium/issues/detail?id=535](http://code.google.com/p/chromium/issues/detail?id=535).

*Chrome *does* support cookies if you use the local IP address (127.0.0.1) directly. so in the localhost case, that could be an easier workaround.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-03-20T16:15:07.347

For local applications use localStorage in Chrome instead: [http://people.w3.org/mike/localstorage.html](http://people.w3.org/mike/localstorage.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-10-07T09:39:38.520

i had some problem and solved it this terrible solution. using store and cookie plugin together.

```
<script src="js/jquery.cookies.2.2.0.js" type="text/javascript"></script>
<script src="js/jquery.Storage.js" type="text/javascript"></script>

var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;

//get cookies
var helpFlag=(is_chrome)?$.Storage.get("helpFlag"):$.cookies.get("helpFlag");

//set cookies
if(is_chrome)$.Storage.set("helpFlag", "1");else $.cookies.set("helpFlag", "1"); 
```

I know that this isnt perfect solution but works for me

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-16T08:28:32.253

This did the job for me:

[![enter image description here](https://i.stack.imgur.com/y4n1c.jpg)](https://i.stack.imgur.com/y4n1c.jpg)

Right click on your Chrome Icon and select Properties, Shortcut tab and add --enable-file-cookies at the last of the target path.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-06-24T13:25:07.217

I had the same issue, please try using the IP address of localhost instead. For e.g "http://127.0.0.1/yoursite/"

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-09-21T04:07:04.480

please check out [Cookies & Google Analytics](http://code.google.com/apis/analytics/docs/concepts/gaConceptsCookies.html).

```
$.cookie("nameofcookie", cookievalue, {path: "/", expires: 30}); 
```

change this line to

```
$.cookie("nameofcookie", cookievalue, {*Path:* "/", expires: 30}); 
```

this project working is fine.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-02T20:09:47.553

Another possible cause is the `path: "/"`, since you're not using a normal web URL, `/` probably doesn't mean much - try without setting the path at all.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-13T16:29:46.287

If you use chrominum this is the command to enable local cookies

> chromium-browser --enable-file-cookies

It's the same thing for chrome

Hope this help you !

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-30T14:45:16.660

As workaround you can use Tampermonkey with access to local files ( [How to include Local htm pages in a Tampermonkey script?](https://stackoverflow.com/questions/34437050/how-to-include-local-htm-pages-in-a-tampermonkey-script) ) By that way you will use Tampermonkey's storage, and will be able to set and get your data by functions GM_getValue(data) and GM_setValue(data). I used that for my local HTML page, which i used as customizable alternative to Windows Explorer

But actually [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) from [Yuri's answer](https://stackoverflow.com/a/2483762/9130324) works perfect.

# java - 在 Java 中使用 REGEX 解析 XML

> ID：335250
> 
> 赞同：3
> 
> 时间：2008-12-02T20:07:52.127
> 
> 标签：java, xml, regex

鉴于以下 XML 片段，我需要获取 DataElements 下每个子项的名称/值对列表。由于我无法控制的原因，无法使用 XPath 或 XML 解析器，所以我使用的是正则表达式。

```
<?xml version="1.0"?>
<StandardDataObject xmlns="myns">
  <DataElements>
    <EmpStatus>2.0</EmpStatus>
    <Expenditure>95465.00</Expenditure>
    <StaffType>11.A</StaffType>
    <Industry>13</Industry>
  </DataElements>
  <InteractionElements>
    <TargetCenter>92f4-MPA</TargetCenter>
    <Trace>7.19879</Trace>
  </InteractionElements>
</StandardDataObject> 
```

我需要的输出是：[{EmpStatus:2.0}, {Expenditure:95465.00}, {StaffType:11.A}, {Industry:13}]

DataElements 下的标记名称是动态的，因此不能在正则表达式中按字面意思表示。标签名称 TargetCenter 和 Trace 是静态的，可以在正则表达式中，但如果有办法避免硬编码，那就更好了。

```
"<([A-Za-z0-9]+?)>([A-Za-z0-9.]*?)</" 
```

这是我构建的正则表达式，它的问题是它错误地将 {Trace:719879} 包含在结果中。依赖 XML 中的换行符或任何其他明显的格式都不是一种选择。

下面是我正在使用的 Java 代码的近似值：

```
private static final Pattern PATTERN_1 = Pattern.compile(..REGEX..);
private List<DataElement> listDataElements(CharSequence cs) {
    List<DataElement> list = new ArrayList<DataElement>();
    Matcher matcher = PATTERN_1.matcher(cs);
    while (matcher.find()) {
        list.add(new DataElement(matcher.group(1), matcher.group(2)));
    }
    return list;
} 
```

如何将我的正则表达式更改为仅包含数据元素而忽略其余部分？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-12-02T21:05:36.050

XML 不是常规语言。您**无法**使用正则表达式对其进行解析。当您获得嵌套标记时，您认为可以工作的表达式会中断，然后当您修复它时，它将在 XML 注释、CDATA 部分、处理器指令、名称空间等上中断，......它不能工作，使用 XML 解析器。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-03T08:05:34.987

如果您可以假设在 DataElements 标记之间，一切都具有表单值，那么这应该在 Java 中有效。即没有属性，也没有嵌套元素。

```
Pattern regex = Pattern.compile("<DataElements>(.*?)</DataElements>", Pattern.DOTALL);
Matcher matcher = regex.matcher(subjectString);
Pattern regex2 = Pattern.compile("<([^<>]+)>([^<>]+)</\\1>");
if (matcher.find()) {
    String DataElements = matcher.group(1);
    Matcher matcher2 = regex2.matcher(DataElements);
    while (matcher2.find()) {
        list.add(new DataElement(matcher2.group(1), matcher2.group(2)));
    } 
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-02T20:12:05.223

请改用 XPath！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-02T20:12:24.113

您确实应该为此使用 XML 库。

如果必须使用 RE，为什么不分两个阶段进行呢？ `DataElements>.*?</DataElements` 那么你现在所拥有的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-02T20:10:04.760

您是否有任何理由不使用正确的 XML 解析器而不是正则表达式？对于正确的库，这将是微不足道的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-02T21:04:46.303

很抱歉给你另一个“不要使用正则表达式”的答案，但很认真。请使用[Commons-Digester](http://commons.apache.org/digester/)、[JAXP](https://jaxp.dev.java.net/)（与 Java 5+ 捆绑在一起）或[JAXB](http://jaxb.java.net/)（与 Java 6+ 捆绑在一起），因为它可以让您免受大量伤害。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-02T21:48:15.857

你应该听每个人的。轻量级解析器是个坏主意。

但是，如果您真的那么顽固，您应该能够调整您的代码以排除 DataElements 标记之外的标记。

```
private static final Pattern PATTERN_1 = Pattern.compile(..REGEX..);
private static final String START_TAG = "<DataElements>";
private static final String END_TAG = "</DataElements>";
private List<DataElement> listDataElements(String input) {
    String cs = input.substring(input.indexOf(START_TAG) + START_TAG.length(), input.indexOf(END_TAG);
    List<DataElement> list = new ArrayList<DataElement>();
    Matcher matcher = PATTERN_1.matcher(cs);
    while (matcher.find()) {
        list.add(new DataElement(matcher.group(1), matcher.group(2)));
    }
    return list;
} 
```

如果数据元素标签不存在，这将非常失败。

再一次，这是一个坏主意，您可能会在未来某个时间以错误报告的形式重新访问这段代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-06T07:20:51.320

尝试通过属性文件解析 Reg Ex，然后创建模式对象。我解决了通过 xml bean 注入 Reg Ex 时遇到的相同问题。

例如：- 我需要解析 Reg Ex '(.)(D[0-9]{7}.D[0-9]{9}.D[AZ]{3}[0-9]{4} )(.)' 通过在 Spring 中注入。但它没有用。一旦尝试在 Java 类中使用硬编码的相同 Reg Ex，它就可以工作。

模式模式 = Pattern.compile("(.)(D[0-9]{7}.D[0-9]{9}.D[AZ]{2}[0-9]{4})(. )"); 匹配器 matcher = pattern.matcher(file.getName().trim());

```
Next I tried to load that Reg Ex via property file while injecting it. It worked fine.

  p:remoteDirectory="${rawDailyReport.remote.download.dir}"
  p:localDirectory="${rawDailyReport.local.valid.dir}"
  p:redEx="${rawDailyReport.download.regex}" 
```

在属性文件中，属性定义如下。

rawDailyReport.download.regex=(. *)(D[0-9]{7}\.D[0-9]{9}\.D[AZ]{2}[0-9]{4})(.* )

这是因为带有占位符的值是通过 org.springframework.beans.factory.config.PropertyPlaceholderConfigurer 加载的，它在内部处理这些 xml 敏感字符。

谢谢， 阿米特

# dll - 在哪里初始化托管 C++/CLI DLL？

> ID：335256
> 
> 赞同：4
> 
> 时间：2008-12-02T20:10:28.220
> 
> 标签：dll, c++-cli

使用 C++/CLI 创建 DLL 时，或者我应该问，是否存在与 DllMain 等效的东西？

这个初始化代码不能调用什么有什么限制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T19:45:49.460

Dan：关于加载器锁、C++/CLI 对 CLR 的延迟加载和混合模式二进制文件的正确初始化，我昨天刚刚在[此处发布了有关该主题的信息](https://stackoverflow.com/questions/647310/c-to-c-cli-to-c-dll-system-io-filenotfoundexception/881110#881110)。

或多或少，如果你有一个混合模式的二进制文件，当你在`DllMain()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-02-06T18:43:00.640

从 .NET 2.0 开始，您就有了一个“模块初始化程序”。[有关如何解决加载程序锁定问题的更多信息，](http://msdn.microsoft.com/en-us/library/aa290048(VS.71).aspx)请参见此处，也请参见[此处](http://msdn.microsoft.com/en-us/library/ms173266.aspx)

为了直接回答您的问题，[本页引用了以下标准](http://blogs.msdn.com/junfeng/archive/2005/11/19/494914.aspx)：“模块初始化程序中允许的代码没有限制。模块初始化程序允许运行和调用托管代码和非托管代码。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T06:03:00.813

如果您在另一个托管项目（例如 ac# 应用程序）中使用 dll，则无需执行任何操作...只要您尝试访问的类是`ref`类，您就可以从任何其他托管项目中访问它们应用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T06:29:13.020

.Net dll 的一大优势是它们避免了加载程序锁定。一个副作用是没有 DllMain。

# php - 在 URL 正则表达式中匹配破折号

> ID：335260
> 
> 赞同：2
> 
> 时间：2008-12-02T20:11:59.840
> 
> 标签：php, regex

我使用以下正则表达式从文本（例如`"this is text http://url.com/blabla possibly some more text"`）中获取网址。

```
'@(https?://([-\w\.]+)+(:\d+)?(/([\w/_\.]*(\?\S+)?)?)?)@' 
```

这适用于所有 URL，但我刚刚发现它不适用于缩短的 URL，例如：匹配后`"blabla bla http://ff.im/-bEnA blabla"`变为。`http://ff.im/`

我怀疑它与`-`斜线后的破折号有关`/`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-02T20:17:38.940

简短的回答：`[\w/_\.]`不匹配`-`所以让它`[-\w/_\.]`

长答案：

```
@              - delimiter
(              - start of group
    https?://  - http:// or https://
    ([-\w.]+)+ - capture 1 or more hyphens, word characters or dots, 1 or more times.. this seems odd - don't know what the second + is for
    (:\d+)?    - optionally capture a : and some numbers (the port)
    (          - start of group
        /            - leading slash
        (            - start of group
            [\w/_\.] - any word character, underscore or dot - you need to add hyphen to this list or just make it [^?\S] - any char except ? or whitespace (the path + filename)
            (\?\S+)? - optionally capture a ? followed by anything except whitespace (the querystring)
        )?     - close group, make it optional
    )?         - close group, make it optional
)              - close group
@ 
```

# xaml - 无法获得我想要的文本换行行为

> ID：335265
> 
> 赞同：6
> 
> 时间：2008-12-02T20:13:58.450
> 
> 标签：xaml, silverlight, text, silverlight-2.0

我无法让 Silverlight 2.0 完全按照我想要的方式布置文本。我想要带有换行符和嵌入链接的文本，以及换行，例如网页中的 HTML 文本。

这是我最接近的：

```
<UserControl x:Class="FlowPanelTest.Page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:Controls="clr-namespace:Microsoft.Windows.Controls;assembly=Microsoft.Windows.Controls" 
    Width="250" Height="300">
    <Border BorderBrush="Black" BorderThickness="2" >
      <Controls:WrapPanel> 
      <TextBlock x:Name="tb1" TextWrapping="Wrap">Short text. </TextBlock>
      <TextBlock x:Name="tb2" TextWrapping="Wrap">A bit of text. </TextBlock>
      <TextBlock x:Name="tb3" TextWrapping="Wrap">About half of a line of text.</TextBlock>
      <TextBlock x:Name="tb4" TextWrapping="Wrap">More than half a line of longer text.</TextBlock>
      <TextBlock x:Name="tb5" TextWrapping="Wrap">More than one line of text, so it will wrap onto the  following line.</TextBlock>
      </Controls:WrapPanel>
      </Border>
</UserControl> 
```

但问题是，尽管文本块 tb1 和 tb2 将进入同一行，因为它们完全有足够的空间，但 tb3 之后的文本块不会与前一个块在同一行开始，即使它会换行到下一行。

我希望每个文本块从前一个文本块的结尾处开始，在同一行。我想在某些文本上放置单击事件处理程序。我也想要分段。本质上，我正在尝试解决 Silverlight 2.0 的 XAML 子集中缺少 FlowDocument 和 Hyperlink 控件的问题。

* * *

要回答答案中提出的问题：

**为什么不对不可点击的文本使用运行？**如果我只在可点击的文本上使用单独的 TextBlocks，那么这些文本位仍然会受到上述换行问题的影响。链接之前的 TextBlock 和之后的 TextBlock。基本上都是。看起来我没有很多机会在同一个 TextBlock 中进行多次运行。

用正则表达式和循环将链接与其他文本分开根本不是问题，问题在于显示布局。

**为什么不将每个单词放在 WrapPanel 中的单个 TextBlock 中**除了是一个丑陋的 hack 之外，这与换行符根本不兼容 - 布局不正确。

它还会使链接文本的下划线样式变为虚线。

这是一个示例，每个单词都在其自己的 TextBlock 中。尝试运行它，请注意，换行符根本没有显示在正确的位置。

```
<UserControl x:Class="SilverlightApplication2.Page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
   xmlns:Controls="clr-namespace:Microsoft.Windows.Controls;assembly=Microsoft.Windows.Controls" 
    Width="300" Height="300">
    <Controls:WrapPanel>
        <TextBlock  TextWrapping="Wrap">Short1 </TextBlock>
        <TextBlock  TextWrapping="Wrap">Longer1 </TextBlock>
        <TextBlock  TextWrapping="Wrap">Longerest1 </TextBlock>
        <TextBlock  TextWrapping="Wrap">
                <Run>Break</Run>
                <LineBreak></LineBreak>
        </TextBlock>
        <TextBlock  TextWrapping="Wrap">Short2</TextBlock>
        <TextBlock  TextWrapping="Wrap">Longer2</TextBlock>
        <TextBlock  TextWrapping="Wrap">Longerest2</TextBlock>
        <TextBlock  TextWrapping="Wrap">Short3</TextBlock>
        <TextBlock  TextWrapping="Wrap">Longer3</TextBlock>
        <TextBlock  TextWrapping="Wrap">Longerest3</TextBlock>
    </Controls:WrapPanel>
</UserControl> 
```

**LinkLabelControl**与[这里](http://www.silverlightshow.net/items/Silverlight-LinkLabel-control.aspx)和[这里](http://www.codeplex.com/SilverlightLinkLabel)一样怎么样。它与上述方法具有相同的问题，因为它几乎相同。尝试运行示例，并使链接文本越来越长，直到它换行。请注意，链接从新行开始，它不应该。使链接文本更长，使链接文本比一行长。请注意，它根本不包裹，它会切断。此控件也不处理换行符和分段符。

**为什么不将文本全部放在运行中，检测对包含 TextBlock 的点击并确定单击了哪个运行** 运行没有鼠标事件，但包含 TextBlock 有。我找不到检查跑步是否在鼠标下方（Silverlight 中不存在 IsMouseOver）或查找跑步的边界几何（无剪辑属性）的方法。

有**VisualTreeHelper.FindElementsInHostCoordinates()**

下面的代码使用VisualTreeHelper.FindElementsInHostCoordinates来获取点击下的控件。输出列出了 TextBlock，但没有列出 Run，因为 Run 不是 UiElement。

```
private void theText_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    // get the elements under the click
    UIElement uiElementSender = sender as UIElement;
    Point clickPos = e.GetPosition(uiElementSender);
    var UiElementsUnderClick = VisualTreeHelper.FindElementsInHostCoordinates(clickPos, uiElementSender);

    // show the controls
    string outputText = "";
    foreach (var uiElement in UiElementsUnderClick)
    {
        outputText += uiElement.GetType().ToString() + "\n";
    }
    this.outText.Text = outputText;
} 
```

**使用带有边距的空文本块将后面的内容隔开到下一行**

我还在想这个。您如何计算换行块的正确宽度以将以下内容强制到下一行？太短了，下面的内容仍然会在同一行，在右边。太长，“换行符”将在下一行，后面有内容。调整控件大小时，您必须调整中断的大小。

一些代码是：

```
 TextBlock lineBreak = new TextBlock();
    lineBreak.TextWrapping = TextWrapping.Wrap;
    lineBreak.Text = " ";
    // need adaptive width 
    lineBreak.Margin = new Thickness(0, 0, 200, 0); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-12-04T23:28:54.200

为什么不能使用跑步？

使用运行来连接所有不会有事件的值，然后那些有事件的值会分解到他们自己的文本块中，冲洗泡沫重复。

在我看来，您应该能够使用 RegEx 和一些循环来做到这一点。查看 Jesse Liberty 在 wrap panel 上的帖子，看看这是否会激发任何想法。 [http://silverlight.net/blogs/jesseliberty/archive/2008/12/03/the-wrap-panel.aspx](http://silverlight.net/blogs/jesseliberty/archive/2008/12/03/the-wrap-panel.aspx)

hth

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-02T12:27:54.347

I'm going to put in some answers to my own question, based on what I have found:

**1)** you can do this easily in the full-fat **desktop WPF with a flow document** full of paragraph, hyperlink, run and related objects.

This is what I am doing now, I am not trying to solve this problem in Silverlight any more.

**2) Use Silverlight 4** You can't do this in Silverlight 2 or 3\. However Silverlight 4 has a RichTextArea Control which, when readonly, supports this kind of display of flow layout with inline hyperlinks, and so acts like a cut-down version of FlowDocument and related classes from WPF. Silverlight 4 also allows Embedded Web browser control to display HTML content, if you can make it look that same across Windows versions (i.e. IE versions) and on Mac and potentially other platforms.

**3)** You can probably do something like this in Silverlight (any version) by building up a string of **HTML and injecting it into the DOM** to show it in the part of the page that's outside the Silverlight control. It sounds entirely workable, but in my opinion, too clever by half.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-10T16:49:12.740

这行得通吗？ [http://www.silverlightshow.net/items/Silverlight-LinkLabel-control.aspx](http://www.silverlightshow.net/items/Silverlight-LinkLabel-control.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-05T13:50:36.393

您可以尝试在 TextBlock 内使用 ONLY Runs，并对整个 TextBlock 使用单击处理程序。然后，处理程序可以使用 click 事件的坐标定位源 Run，找出它是否是一个链接（作为链接的每个 Run 可以有一个特定的 x:Name，或者您甚至可以派生自己的 Run）并调用正确的功能那个链接。

我从未尝试过，但这是我尝试解决问题的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-06T18:00:56.670

虽然没有 IsMouseOver 类型属性，但您可以查看使用 VisualTreeHelper.FindElementsInHostCoordinates()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-05T18:12:49.173

我认为最好的方法是让每个单词成为一个文本块，然后将这些单词附加到特定部分所需的正确事件处理程序。这将为您提供所需的换行，并且对于第一个单词的缩进，您可以设置它的左边距。

有关使用文本和换行面板完成类似操作的示例，请参阅本文。 [http://jesseliberty.com/2008/12/03/the-wrap-panel/](http://jesseliberty.com/2008/12/03/the-wrap-panel/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-11T00:02:24.690

试试这个：http: [//blogs.msdn.com/delay/archive/2007/09/10/bringing-a-bit-of-html-to-silverlight-htmltextblock-makes-rich-text-display-easy.aspx](http://blogs.msdn.com/delay/archive/2007/09/10/bringing-a-bit-of-html-to-silverlight-htmltextblock-makes-rich-text-display-easy.aspx)

Silverlight 的 HtmlTextBlock。这并不是一个真正完成的概念，但它可能是一个很好的起点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-03T18:32:58.183

一个非常有趣的问题。您可能需要创建自己的自定义控件来处理这种类型的布局。您可以使用 Runs，但在每次运行的顶部覆盖一个透明画布，以便您可以处理与该运行相关的点击事件。根本不是一个简单的解决方案，但我认为这是可能的。

请让我知道你带来了什么。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-08T14:32:36.840

我不确定您是否正在检查您的评论中的评论，因为您没有解决我在您的评论中所说的一些事情。使用 VisualTreeHelper.FindElementsInHostCoordinates() 找不到运行的原因是它只返回 UIElement，而运行不是 UIElement。如果您将此方法与不使用任何运行的建议相结合，那么您应该没问题吧？

作为文本块的每个单词都不是真正的“hack”，您可以通过将换行符分隔到它们自己的文本块中并为这些文本块分配等于宽度的宽度或边距来解决换行符的问题包裹面板，这将迫使他们坐在自己的线上。绝对不是最理想的解决方案，但我还没有看到任何其他显示任何承诺的东西。

# c# - DataGridView 自定义排序不在 DataMember（数据绑定网格）上

> ID：335267
> 
> 赞同：0
> 
> 时间：2008-12-02T20:14:47.433
> 
> 标签：c#, vb.net, winforms

我有一个自定义 DataGridView 列，它使用一个嵌入式控件，该控件会弹出一个搜索窗口来查找该列的值。重要的是数据绑定列是数字 ID，但自定义列单元格显示文本描述。

如何让列按文本描述而不是数字 ID 进行排序？

我看不到一种方法可以覆盖列以按 FormattedValue 而不是 Value 进行排序。我可以确保描述在我的数据表中显示为单独的列，但我看不到任何方式说“使用列 VALUE_ID 作为 DataMember，但列 VALUE_DESCRIPITON 作为 'SortMember'”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T21:09:03.907

您可以使用以下文章[列排序模式中描述的技术](http://msdn.microsoft.com/en-us/library/95scxcdy.aspx)

```
private bool ascending;
private int sortColumn;
private void dgv_ColumnHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
    List<SomeObject> list = (List<SomeObject>)someBindingSource.DataSource;
    if (e.ColumnIndex != sortColumn) ascending = false;

    int 1 = e.ColumnIndex;
    if (i == DescriptionColumn.Index)
        list.Sort(new Comparison<SomeObject>((x,y) => x.ID.CompareTo(y.ID)));

    sortColumn = e.ColumnIndex;
    ascending = !ascending;
    if (!ascending) list.Reverse():

    someBindingSource.ResetBindings(false);
    // you may also have to call dgv.Invalidate();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T20:39:22.453

您使用什么作为数据源？一个`DataTable`？排序通常由列表本身提供，因此您实际上可以使用自己的特定排序行为编写自定义列表。最简单的方法（尽管仍然很重要）是继承自`BindingList<T>`, 并覆盖`ApplySortCore`, `RemoveSortCore`, `SupportsSortingCore`, `IsSortedCore`,`SortPropertyCore`和`SortDirectionCore`(phew!)。特别是，`ApplySortCore`必须检测特定的`PropertyDescriptor`，并执行定制搜索。

我并不是说它是微不足道的（恰恰相反）——但它可以在标准绑定机制内完成。

另一种想法可能是使 id 成为其他东西，它实际上不是一个 int，而是一个自定义类/结构。它需要实现`IComparable`/ `IComparable<T>`，并有一个`ToString()`显示所需文本的。然后你可能（未经测试）直接绑定到该列。

然而！！！如果您还不熟悉`System.ComponentModel`，我建议避免这种复杂性。如果上述内容有意义，那很好 - 如果没有，我不确定我是否会尝试在您第一次进入该区域时尝试它......

# c# - 将 VB.NET Winforms 应用程序移植到 C#

> ID：335270
> 
> 赞同：9
> 
> 时间：2008-12-02T20:16:19.270
> 
> 标签：c#, .net, vb.net, winforms

是否有任何“好”资源可用于将 VB.NET winforms 应用程序移植到 C#？我确信有些软件可以只翻译代码，但我希望同时重构代码。将其保持在当前形式是有问题的，因为它使用了 VB.NET 允许的一些“糟糕的设计”实践，并且会使未来的维护变得更加复杂。这里有没有人经历过这个过程，你是怎么做的？您是否使用了翻译/重构方法？您是否只是使用最终产品重新创建功能而没有查看当前代码库的大部分内容？你会（集体）推荐什么？

**更新**：

正如我告诉 Grauenwolf 的那样，将其保留在当前语言会带来以下问题：

*   无法轻松添加功能。VB.NET 不是我一门坚如磐石的语言。我很欣赏学习该语言以将其移植过来的讽刺——但未来的维护将需要考虑到不了解 VB.NET 的人。
*   应用程序的其余部分已移植到 C#（实际上是很久以前）；我们想要添加的所有功能都取决于对应用程序的解耦（现在它的耦合非常紧密）。我的选择是要么用我不太熟悉的语言重构它，要么用我理解的语言重构它。

对于投票否决该问题的任何人，我不确定您*为什么*这样做；问题不在于我是否应该将它留在 VB.NET 中；问题是现在不移植它的未来成本是多少。如果我要花大价钱来修复它，为什么不采取额外的步骤，让未来的程序员可以维护它呢？

**作者注**：我很久没有看过这个问题了，最近有一个回复，所以我将我的“答案”移到了问题中并删除了“答案”（因为它不是真正的答案）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-02T20:44:02.087

根据我处理混合 VB 和 C# 项目的大型应用程序的经验，我建议将其保留在 VB.NET 中。如果设计有问题，然后修复它们，但是将整个东西转换为 C# 听起来像是一个混乱的、不必要的分心我。

两种语言之间的非风格差异非常小，因此很难看到会强制转换的功能需求。（Visual Studio 2003 中有一个老错误，它排除了某些项目引用链，这些项目引用以特定方式混合 C# 和 VB 项目，但这是我遇到的唯一一个实际障碍。）

个人开发人员当然倾向于偏爱其中一个或另一个的风格偏好，但是要完全转换需要做很多工作才能达到对不同风格的语法糖的品味。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-02T20:31:10.927

如果你使用 Reflector 或 Anakrino 之类的东西，它的输出是基于 IL 而不是原始源。它是否产生更好的代码还有待商榷……但无论如何你都可以尝试一下。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-03T07:42:19.883

> 将其保持在当前形式是有问题的，因为它使用了 VB.NET 允许的一些“糟糕的设计”实践，并且会使未来的维护变得更加复杂。

你认为 C# 不允许糟糕的设计吗？

问题不在于VB，问题在于编写它的人和拒绝修复它的人。所以退后一步，深呼吸，然后开始修复代码。谁知道呢，你可能会发现其中一些“糟糕的设计实践”实际上很有意义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-02T21:39:08.807

在我的工作中，我们使用了[developerfusion](http://www.developerfusion.com/tools/convert/vb-to-csharp/)的翻译器，但没有任何自动化（只需翻译一段代码或类，然后手动将结果粘贴到 c# 项目中）。

Reflector 是一个很棒的工具，但是你在阅读 lambda 函数时会发现一些问题。

对于重构，我们尝试过的最好的工具是[Refactor Pro](http://devexpress.com/Products/Visual_Studio_Add-in/Refactoring/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-02T21:09:37.103

我已经使用[C-Sharpener](http://www.elegancetech.com/csvb/csvb.aspx)对我们的一些应用程序进行了转换，但它远非完美。它转换了大约 95% 的代码，我最终在手动修复剩余的 5% 时进行了重构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-09T04:47:41.603

我有 2 年左右的 VB.NET 经验，但现在我在日常开发中只使用 C#。在我尝试使用[VB.Net to C#](http://www.vbconversions.net/)将我的 VB.NET 代码转换为 C# 之前，我从它和书中学到了东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-11T11:08:07.400

哇哇！我是最后一个抓住这些东西的人。我在 WinForms 中有一个非常大的 VB.NET 代码，并被分配将其移植到**C#**和**WinForms**。我对**VB**的了解为 0，但必须完成任务。我使用**Telerik Online Code Converter**将所有 VB 业务逻辑转换为 C#。转换器是一个愚蠢的转换器，我遇到了大约 5000 个错误，主要是混淆了**[]**和**()**，还有 ref 参数和线程问题以及其他问题。编译器**（VS 2013）甚至无法在单个****构建**中找出所有错误**. 我不得不花费 2 个月的时间来修复这些错误并一次又一次地构建项目。我将 WinForms UI 复制到 C# Winforms UI - 这不是什么大问题，现在我一直在同时调试这两个代码以查看输出。**

 **我想告诉大家，现在已经 4 个月了，但我仍在完成这个项目。我对封面的经历非常痛苦，不想推荐任何人。

# c++-cli - 在 C++/CLI 中使用 PIMPL 习惯用法时的 MSVC++ 链接器警告

> ID：335271
> 
> 赞同：2
> 
> 时间：2008-12-02T20:16:37.367
> 
> 标签：c++-cli, linker-errors, pimpl-idiom

我正在使用 C++/CLI（9.0 版）编写一个 .NET 程序集，并且我想使用 PIMPL 习惯用法来避免在我的公共标头中放置不必要的东西。不幸的是，当我尝试转发声明一个类，然后对其使用跟踪句柄时，我收到链接器警告 4248：

> 警告 LNK4248：“MyNamespace.PrivateClass”的未解析 typeref 令牌 (0100000E)；图像可能无法运行

无论我对实现类使用 CLI 类还是本机类，这似乎都是这种情况。

示例代码如下所示：

```
namespace MyNamespace
{
    ref class PrivateClass; // forward dec

    ref class MyPublicClass
    {
    private:
        PrivateClass^ m_Imp;
    };
} 
```

不幸的是，微软对警告的解释并没有提供太多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T21:37:20.197

我认为您使用的两种技术并不能很好地结合在一起：

pimpl 的自然应用是避免必须一直更改头文件，从而导致大型 C++ 项目的大量重新编译。

C++/cli 的自然应用是编写精简的小互操作块，VS 在这些项目上的默认行为是将所有代码放入标头中，这与您可以得到的反 pimpl 差不多。

如果您正在编写足够大的内容以保证 pimpl，我不会推荐 C++/cli。如果您正在编写足够小的东西以使 C++/cli 适合，我不会为 pimpl 烦恼。

当然是YMMV，但那是我的看法......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T21:12:19.140

在进一步挖掘和反思后，我发现在某些方面 .NET 并不需要像 C++ 那样支持 PIMPL，因为您可以将类标记为程序集私有 - 这在某些方面基本上具有相同的效果。然而，PIMPL 习惯用法通常用于隐藏您不希望客户端必须编译的标头。但是，.NET 程序集当然不像 C++ 的头文件那样“包含”——所以我想那里也确实不存在问题。

# c++ - 如何从 HBITMAP 创建 Gdiplus::Bitmap，保留 alpha 通道信息？

> ID：335273
> 
> 赞同：8
> 
> 时间：2008-12-02T20:16:54.510
> 
> 标签：c++, gdi+, bitmap, gdi

当我使用 Bitmap::FromHBITMAP 函数创建一个新的 Gdiplus::Bitmap 时，生成的位图是不透明的 - 原始 HBITMAP 的部分透明度没有被保留。

有没有办法从 HBITMAP 创建一个 Gdiplus::Bitmap ，它带来了 alpha 通道数据？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2011-05-02T17:09:10.083

我认为工作代码比指令更有用，所以：

```
#include <GdiPlus.h>
#include <memory>

Gdiplus::Status HBitmapToBitmap( HBITMAP source, Gdiplus::PixelFormat pixel_format, Gdiplus::Bitmap** result_out )
{
  BITMAP source_info = { 0 };
  if( !::GetObject( source, sizeof( source_info ), &source_info ) )
    return Gdiplus::GenericError;

  Gdiplus::Status s;

  std::auto_ptr< Gdiplus::Bitmap > target( new Gdiplus::Bitmap( source_info.bmWidth, source_info.bmHeight, pixel_format ) );
  if( !target.get() )
    return Gdiplus::OutOfMemory;
  if( ( s = target->GetLastStatus() ) != Gdiplus::Ok )
    return s;

  Gdiplus::BitmapData target_info;
  Gdiplus::Rect rect( 0, 0, source_info.bmWidth, source_info.bmHeight );

  s = target->LockBits( &rect, Gdiplus::ImageLockModeWrite, pixel_format, &target_info );
  if( s != Gdiplus::Ok )
    return s;

  if( target_info.Stride != source_info.bmWidthBytes )
    return Gdiplus::InvalidParameter; // pixel_format is wrong!

  CopyMemory( target_info.Scan0, source_info.bmBits, source_info.bmWidthBytes * source_info.bmHeight );

  s = target->UnlockBits( &target_info );
  if( s != Gdiplus::Ok )
    return s;

  *result_out = target.release();

  return Gdiplus::Ok;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-04T21:49:10.360

事实证明，当从 HBITMAP 创建位图时，GDI+ 永远不会跨越 alpha 通道。

答案是：

*   使用 GetObject 传入 BITMAP 和 HBITMAP，以获取输入 HBITMAP 的宽度和高度（如果输入位图是 DIB，则为像素数据）。
*   使用 32 位 PARGB 像素格式创建正确大小的位图。
*   使用 LockBits 获取新位图的 pixelData 内存。
*   如果您从 GetObject 获取像素，请使用 memcpy 复制 ARGB 值。
*   在新位图上调用 UnlockBits。

就我而言，输入 HBITMAP 的格式对于从输入位图像素数据到新位图像素数据的直接 memcpy 是正确的。

如果您没有从 GetObject 获取输入像素数据，请使用 GetDIBits 以正确格式获取副本。

# .net - 从 ASMX Web 服务设置 HTTP 响应状态码

> ID：335274
> 
> 赞同：3
> 
> 时间：2008-12-02T20:17:32.653
> 
> 标签：.net, web-services, http-status-codes

我知道 ASP.NET 有一个全局处理程序 Application_EndRequest 处理程序，我可以在其中更改 Context.Response.StatusCode，并将其设置为 200，这是我的愿望。

现在有了 asmx Web 服务，我不确定我应该把这个逻辑放在哪里。我知道我绝对对编写 ISAPI 过滤器不感兴趣，而且我并没有真正在 ASP.NET 环境中运行，所以 HTTPModule可能对我也没用。

有什么建议么。在 WCF 中运行它会为我在 Web 服务上设置它提供一个更简单的机制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T20:50:14.927

虽然我无法想象你为什么需要这个:)，但你可以尝试使用 WebService.HttpContext.Response 并在那里设置状态码。

另外，我不确定，但 Global.asax 事件处理程序即使有 Web 服务请求也会执行，因此您仍然可以在那里使用您想要的东西。

# asp.net - 使用 ASP.NET 返回响应后，如何继续在服务器上工作？（WebForms 和 MVC）

> ID：335276
> 
> 赞同：9
> 
> 时间：2008-12-02T20:18:03.200
> 
> 标签：asp.net, asp.net-mvc

我有一个应用程序，我需要用户上传照片。照片上传到服务器后，应该不会花很长时间，用户应该得到一个普通的 HTML 页面的响应，上面写着“谢谢...bla bla bla...”
现在，在发送响应之后回到客户端，他继续他的快乐方式，我希望服务器继续处理这张照片。它需要做一些很重并且需要很长时间的事情。但这没关系，因为用户不需要等待任何东西。他可能在不同的页面上。
所以我的问题是，我如何使用 ASP.NET 做到这一点。我正在编写的应用程序是在 ASP.NET MVC 中，所以我想像

```
//save the photo on the server
//and send viewdata saying "thanks..."
return View();
//keep doing heavy processing on the photo 
```

但我想这并不是真正的做法。此外，由于有时我使用 ASP.NET WebForms，所以如何使用 WebForms 来完成。
谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-02T20:58:26.877

我们为轻量级日志记录情况这样做：

```
Action<object> d = delegate(object val)
{
    // in this anonymous delegate, write code that you want to run
    ProcessDataAndLog();
};

d.BeginInvoke(null, null, null); // this spins off the method asynchronously. 
```

它绝不是健壮的。如果您需要保证被处理，您应该考虑使用消息队列。这样，您还可以将处理卸载到单独的机器上，而不会让您的 Web 服务器陷入困境。

编辑：

下面的方法也有效，对你的程序员同事来说可能更明显。它本质上是相同的，但显然更快，您不必担心调用 EndInvoke()。

```
System.Threading.ThreadPool.QueueUserWorkItem(
    delegate(object state)
    {
        // in this anonymous delegate, write code that you want to run
        ProcessDataAndLog();
    }); 
```

进一步阅读：[线程池和异步方法](http://www.yoda.arachsys.com/csharp/threads/threadpool.shtml)以及[异步委托与线程池和线程](http://www.devnewsgroups.net/group/microsoft.public.dotnet.framework/topic61277.aspx)以及[不调用 EndInvoke*真的*会导致内存泄漏吗？](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/b18b0a27-e2fd-445a-bcb3-22a315cd6f0d/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T20:21:56.590

在我看来，您似乎需要分拆另一个流程来完成您需要做的事情。您甚至可能想构建一个 Windows 服务来处理图像。它可能是一个等待文件出现在某处的应用程序，当它完成时，它可以开始工作，离开 asp.net 线程去处理它的业务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T20:37:39.180

我过去做过的一种方法，它与 web 模型配合得很好，是有一个“私有”页面/web 服务，负责启动处理并监听对它的调用。让一个页面与另一个页面异步对话然后继续用户正在做的任何事情是很容易的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T20:22:35.357

我不是 ASP.NET 程序员，但您通常执行此操作的方式是在服务器上启动另一个线程，它会在原始线程返回视图并退出时为您执行此后台处理。

如果你搜索“ASP.NET start Thread”，看看你是否能找到一些东西

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T20:28:33.600

看起来您需要有一个第二个过程来处理额外的处理。您可以让原始页面启动该过程，也可以拥有一个独立的应用程序来轮询文件夹并在照片到达时对其进行处理。这样，您还可以防止对 Web 服务器和工作进程征税。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T13:29:59.840

我可能会创建一个在服务器上运行的 Windows 服务并使用填充队列来处理照片。所以会改变你的

```
//save the photo on the server
//Add referance in queue (possibly in database to http post that the windows service monitors with details of path to the file, output path, transformation etc.)
//and send viewdata saying "thanks..."
return View(); 
```

这样做，对照片的实际处理与网站完全分开，并且可以节省您在整个地方的旋转线程。

科林·G

# .net - Windows/.NET 监控/调试串口的方式？

> ID：335279
> 
> 赞同：5
> 
> 时间：2008-12-02T20:19:14.927
> 
> 标签：.net, windows, serial-port, lockup

我有一个在 Windows XP Professional 上运行的 .NET 2.0 应用程序。此应用程序使用串行端口与一些自定义设备进行通信。

出于某种原因，我们的一些定制 PC 的串行端口存在问题，使用几周后它将停止运行。除了自动重启（在我的场景中不起作用）之外，是否有任何实用程序可以调试/诊断串行端口？是否有任何.NET 库可以帮助解决这个问题（我可以编写自己的实用程序来调试端口）？

另外，有没有人对以下库有任何经验： [Sax CommStudio](http://www.sax.net/commstudio)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T21:36:38.780

我过去使用过 Sax CommStudio，但现在我只使用 System.IO.Ports.SerialPort。

您是否有机会使用 USB 串行端口？我遇到了那些去BSOD之类的问题。如果是这种情况，您的问题是驱动程序问题，而不是软件问题。

如果您想在您的应用程序之外进行一些故障排除，您可以查看[HHD 的串行监视器](http://www.hhdsoftware.com/Products/home/serial-monitor.html)。我认为他们有免费试用版，但如果你正在做任何认真的 RS232 开发，它真的值得购买。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T14:36:51.297

portmon - [http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx)

我想说这是最接近 Windows 上监控串行端口的“标准”工具。但是如果你需要在两周后使用这种工具尝试追踪某些东西，天堂会帮助你......

我怀疑是驱动程序问题 - 它是带有传统 UART 的“正确”串行端口，还是某种 USB 串行转换器或类似的？

2017 年更新：Portmon 在 2008 年是一个相当有用的建议，但从未更新为适用于 64 位版本的 Windows，所以现在不要费心在现代机器上尝试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T14:31:06.767

我使用了 HDD Software Free Serial Port Monitor。它将记录所有流量并在串行端口上打开/关闭。这样你就有了数据和串口操作的日志。

[免费串口监视器](http://www.serial-port-monitor.com/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-08T13:28:06.177

您提到您在 Windows XP 和 .NET 2.0 上运行，.NET 很可能是您的问题，因为在大多数 .NET 版本中存在影响串行端口的错误。我建议使用串行端口的最低版本是 .NET 3.5 SP1。

另见： [http ://blog.zachsaw.com/2010/07/net-serialport-woes.html](http://blog.zachsaw.com/2010/07/net-serialport-woes.html)

# asp.net - ASP.NET 从复选框控件 OnCheckChanged 事件显式发布到服务器

> ID：335280
> 
> 赞同：0
> 
> 时间：2008-12-02T20:19:32.073
> 
> 标签：asp.net, checkbox, asp.net-2.0

我有一个 asp:checkbox 控件，我想在选中或取消选中标签时更改它的可见性。为此，我尝试使用 OnCheckChanged 事件，该事件显然仅在发布到服务器后才会触发。这意味着我的标签的可见性不会立即改变。如何发布到服务器（并保留表单的状态），以便在单击复选框时立即切换标签的可见性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-02T20:25:40.797

那么，您需要复选框控件在单击时发布到服务器吗？

如果答案是否定的，那么您可以使用 html 输入控件并使用 javascript 来处理 onclick 事件。这样，操作将立即生效，您可以将帖子保存回服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T20:26:35.833

为复选框设置 AutoPostBack = true。

# c# - 在 C# 中调用重写的构造函数和基构造函数

> ID：335286
> 
> 赞同：51
> 
> 时间：2008-12-02T20:21:36.297
> 
> 标签：c#, constructor

我有两个类，Foo 和 Bar，它们有这样的构造函数：

```
class Foo
{
    Foo()
    {
      // do some stuff
    }

    Foo(int arg)
    {
      // do some other stuff
    }
}

class Bar : Foo
{
    Bar() : base()
    {
      // some third thing
    }
} 
```

现在我想为 Bar 引入一个采用 int 的构造函数，但我希望 Bar() 中发生的内容与 Foo(int) 中的内容一样*运行。*像这样的东西：

```
Bar(int arg) : Bar(), base(arg)
{
  // some fourth thing
} 
```

有没有办法在 C# 中做到这一点？到目前为止，我最好的方法是将 Bar() 完成的工作放入一个函数中，该函数也由 Bar(int) 调用，但这很不优雅。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-12-02T20:29:44.440

我会重新链接构造函数，所以它们被称为

```
Bar() : this(0) 
Bar(int) : Foo(int) initializes Bar
Foo(int) initializes Foo
Foo() : this(0) 
```

如果无参数构造函数为其他构造函数的 int 参数假设某种默认值，则这是合适的。如果构造函数不相关，则您的类型可能做错了，或者我们需要更多关于您要实现的目标的信息。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-12-02T20:29:00.900

不，这是不可能的。如果您使用 Reflector 检查为每个构造函数生成的 IL，您就会明白原因——您最终会为基类调用两个构造函数。理论上，编译器可以构造隐藏的方法来完成你想要的，但实际上并没有比你明确地做同样的事情有任何优势。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-12-02T20:33:22.763

我建议将您的构造函数链更改为从最不具体到最具体。

```
class Foo
{
    Foo()
    {
      // do some stuff
    }

    Foo(int arg): this()
    {
      // do some other stuff
    }
}

class Bar : Foo
{
    Bar() : Bar(0)
    {
      // some third thing
    }

    Bar(int arg): base(arg)
    {
      // something
    }
} 
```

Bar 对象的任何创建现在都将调用所有 4 个构造函数。构造函数链应该为更具体的构造函数提供默认值，而不是相反。你真的应该看看你想要完成的事情，并确保你所做的事情是有意义的。Curt 是对的，有技术原因你不能这样做，但也有逻辑原因你不应该这样做。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-02T20:32:48.723

这是我唯一能想到的...

```
 public class Foo
{
    public Foo()
    {
    }
    public Foo(int? arg): this()
    {
    }

}
public class Bar : Foo
{
    private int x;
    public Bar(): this(new int?()) // edited to fix type ambiguity
    {
        // stuff that only runs for paramerless ctor
    }
    public Bar(int? arg)
        : base(arg)
    {
        if (arg.HasValue)
        {
            // Do stuff for both parameterless and parameterized ctor
        }
        // Do other stuff for only parameterized ctor
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-02T20:27:59.420

难道你不能让接受 int 的 Bar 构造函数调用无参数构造函数吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-02T20:29:15.437

你能把来自 Bar() 的东西放在 Bar(int) 中，然后用默认值的 Bar() 调用 Bar(int) 吗？然后 Bar(int) 可以调用基本构造函数。

```
class Bar : Foo
{
    Bar() : this(0)
    {
    }

    Bar(int arg) : base(arg)
    {
    }
} 
```

这并不能完全回答您的问题，但根据您的情况可能是一个可行的解决方案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-02T20:38:29.600

您可以获取 Bar() 的初始化代码并使其成为方法并从两个构造函数中调用它，并让新的构造函数只调用 base(arg) 吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-30T02:45:41.113

您可以使用以下代码：

```
public Foo
{
    public Foo()
    {
        this.InitializeObject();
    }

    public Foo(int arg) : this()
    {
        // do something with Foo's arg
    }

    protected virtual void InitializeObject()
    {
        // initialize object Foo
    }
}

public Bar : Foo
{
    public Bar : base() { }

    public Bar(int arg) : base(arg)
    {
       // do something with Bar's arg
    }

    protected override void InitializeObject()
    {
       // initialize object Bar

       base.InitializeObject();
    }
} 
```

只需像上面的代码一样覆盖该`InitializeObject()`方法，然后将您想要放入的所有代码放入无参数构造函数中。`base.InitializeObject()`最后在代码末尾调用。

希望这是有用的。

# macos - 修复损坏的 Macports

> ID：335291
> 
> 赞同：13
> 
> 时间：2008-12-02T20:22:16.387
> 
> 标签：macos, osx-leopard, macports

我刚刚尝试过（第一次，我可能会添加）

> 已安装端口升级

在 Macports 中，恐怕我会后悔：很多错误——特别是关于 X11 和 Python。

这是关于 python 的典型错误消息：

> ---> 激活 python24 2.4.5_4+darwin_9 错误：激活 python24 2.4.5_4 失败：图像错误：/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4 已经存在并且不存在属于注册港口。无法激活端口 python24。

我的问题：我应该期待一些麻烦吗？并且：关于修复这些错误的任何提示？

在升级之前我确实做了“同步”和“自我更新”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-02T20:27:57.577

通常，当我的 macports 安装开始变得异常时（通常是因为我搞砸了），我会删除 /opt 文件夹并重新安装。我只是懒惰，我猜。从它的外观来看，您正在尝试在旧/现有文件夹上重新安装新端口。

你试过[波蒂克斯](http://porticus.alittledrop.com/)吗？它会很好地告诉您哪些端口已安装并处于活动状态。也许如果你停用了当前的 python 端口，并安装了新的，那可以让你再次移动。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-02T21:25:26.637

如果如错误消息所示，该文件存在于 /opt 目录中并且不属于已注册的端口，那么您必须想知道它是如何到达那里的。可能是以前的安装遗留下来的，可能是拙劣的安装？

无论哪种方式，我都没有看到仅仅删除有问题的文件的危害（而且，从它的外观来看，可能是整个 /opt/local/Library/Frameworks/Python.framework/Versions/2.4 目录）

一般来说，要解决此类问题，您应该联系端口维护人员，或者在 macports 邮件列表中询问。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-03-02T01:27:21.360

我最近也收到此错误消息

```
[...] already exists and does not belong to a registered port 
```

在我的情况下，因为我试图使用 Macports 来安装`Putty`（支持`FireFTP`）。无论如何，在过去的一年里，我一直在使用“fink”和`apt-get`Leopard，因为我更熟悉 Debian/Ubuntu。所以，足够的背景。

问题是，我通过 macports 安装了一个库（expat）`apt-get`，想要升级。但它是使用完全不同的竞争包管理器注册的。这就是这条信息对我的意义。说得通。升级 via`apt-get`没有让我升级到足够高的版本，所以我们改为使用 FORCE 来完成升级。

对我来说，**`sudo port -d -f install expat`**推动升级，改写 apt 版本，让我进步。

希望这样做不会损坏 Debian 结帐中的其他内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-25T13:42:21.747

在雪豹上清理 /opt/local 并重新安装 macports 对我来说效果很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T00:50:21.883

我打破了注册表问题。我只是尝试了“sudo port -d -f 卸载程序”。程序是指注册表损坏的程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-02T20:30:36.450

Mac OS X 10.4.11 附带 Python 2.4（不确定 Leopard）。它的路径是/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4，所以你可能根本不需要安装。

# user-interface - 人因设计（满足UI设计中的心理需求）

> ID：335293
> 
> 赞同：28
> 
> 时间：2008-12-02T20:22:53.110
> 
> 标签：user-interface

在阅读[G.729 编解码器时，我发现了这个关于“](http://en.wikipedia.org/wiki/G.729)[舒适噪声](http://en.wikipedia.org/wiki/Comfort_noise)”的有趣花絮：

> 还设置了舒适噪声发生器（CNG），因为在通信信道中，如果传输停止，并且链路由于没有语音而变得安静，那么接收方可能会认为链路已被切断。通过插入舒适噪声，在静音期间播放旧的模拟嘶嘶声，以确保接收器链路处于活动状态且可操作。

例如，这是一个优秀的程序员在设计 VOIP 软件之前需要了解的事情。

今天早些时候，我还了解了[扫视抑制](http://scienceweek.com/2004/sc040709-4.htm)：

> 人类通过暂时减弱从视网膜流入大脑的数据来避免眼球运动期间的视网膜模糊。展示这种现象的一个有趣的方法是在镜子里看你的脸。保持头部稳定，看着一只眼睛，然后看着另一只眼睛，迅速在两只眼睛之间转移视线。图像稳定，您看不到自己的眼球运动，但另一个注视您的人会清楚地看到您的眼球运动。

这在视频游戏和其他视觉和图形开发中具有应用。

有很多关于用户界面设计的书籍，但我还没有看到一本参考书列举了我们在设计软件时*应该了解的**大部分*人类设计因素。我希望很多软件工程师能从他们的裤子座位上学到这一点——他们设计它，发现一些奇怪和/或烦人的东西，然后玩它直到感觉舒服为止。然而答案已经存在，研究已经完成，*有人*不仅知道如何解决我们的问题，而且知道为什么它是一个问题。

 ***   **如果没有获得十几个不同专业的 BS/BA，我会在哪里寻找这类信息？**
*   **我是否注定会在日常上网时偶然发现它**（许多公司/经理对此不屑一顾）**？**
*   **还有哪些人为因素会影响编程**（请链接参考资料、资源，或者至少给出一个可在谷歌上搜索的技术名称——或者用标签“人为因素”发布一个关于它的新问题）**？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-28T16:21:01.340

我认为您需要了解的内容取决于您尝试开发的应用程序类型以及它将所处的用户环境。

从庞大的公司/产品的角度来看 - 拥有一份 HMI/UI 样式指南是明智的，该指南阐明了开发人员应该使用他们的界面设计来实现其软件的特定目标的基本规则。在许多情况下，保持一致与正确同样重要，因此为大型产品或产品套件提供单一指南非常重要。它还使软件专家不必成为用户专家。如果只有一个来源，我会说内部风格指南就是它。理想情况下，它们应该被编写（和更新）以完全按照您的要求进行 - 成为设计时要考虑的所有事情的参考点。

我不确定您是否会找到一个适用于所有来源的用户界面设计*各个*方面的单一指南。不同类型的技术需要不同的技术——例如，上述两种设计理念可用于两种截然不同的应用（语音传输和视频游戏）。两者都对 Web 应用程序没有特别的帮助。更糟糕的是，随着给定技术的广泛采用，用户需求也会发生变化——例如，Web 2.0 GUI 使用的一些布局和设计概念违反了早期的早期 Web UI 设计实践。

我发现对我在网络应用程序世界中的工作有用的一般原则：

*   始终将用户尝试做的事情作为第一要务
*   考虑用户已经熟悉的其他系统，并尽可能复制它们*
*   将注意力集中在最重要的决定/信息上（见第一个项目符号）——根据技术，可以通过多种方式集中注意力——大小、运动、位置、颜色、声音或任何其他感官输入。
*   考虑用户 - 年龄、残疾/能力、使用该技术的先前经验，以及您能想到的几乎所有其他内容。然后在设计时考虑到用户的关键方面。
*   考虑用户的环境——硬件、网络、物理环境
*   让用户做尽可能少的活动来完成他们的目标——即鼠标点击、击键、语音命令

可悲的是，里程可能会有所不同 - 我一直在人们必须使用的应用程序世界中工作，但如果他们不需要做他们的工作，他们永远不会愿意使用 - 希望该工具使工作更容易，但它仍然有效。像电子游戏这样的东西——人们愿意为使用它们而付费——是完全不同的球类游戏。在这些情况下，你可能不会试图让一切*变得简单*——但你试图以一种令人愉快的方式增加挑战。

*（编辑 - 添加） - 在可能的情况下*以及*有意义的情况下。当你有更好的想法时，不要害怕重新发明轮子，只要你有充分的理由证明它真的会更好。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-02T20:26:49.280

你可以阅读《[The Inmates are Running the Asylum](http://www.amazon.ca/Inmates-Are-Running-Asylum-Products/dp/0672326140/ref=pd_bbs_sr_1?ie=UTF8&s=books&qid=1228249562&sr=8-1) 》或[《The Design of Everyday Things》](http://www.amazon.ca/Design-Everyday-Things-Don-Norman/dp/0465067107/ref=sr_1_2?ie=UTF8&s=books&qid=1228249562&sr=8-2)这本书讨论这些问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-28T16:49:45.103

您要问的是关于心理学特别是认知的一个非常复杂的主题。我会开始阅读这本书[Mind Hacks](https://rads.stackoverflow.com/amzn/click/com/0596007795)。我也会开始查看[Cognitive Daily](http://scienceblogs.com/cognitivedaily/)和[Scientific American Mind](http://www.sciam.com/sciammind)网站。这是一个巨大的主题，您将不得不浏览许多可能与您真正想知道的内容无关的文章。您将要查看有关动物（我包括人类）如何被训练做事以及在其他情况下如何影响它们的行为学习。老实说，您也应该阅读其他人提到的设计书籍。他们将为您提供物超所值的服务。

您将遇到的主要问题是，您正在寻找关于大脑如何工作以及如何为其定制 UI 设计的简单直接的答案。有一些，不要误会我的意思，但认知不像编程。没有证据证明大脑是如何工作的。（曾经听过心理学家使用证明或知道这个词......我不这么认为。我们总是推断或我们认为或可能是）。

在多次运行的实验中需要考虑数百个变量，并且总是存在相互竞争的理论，但大多数时候它们都不是 100% 正确的（好吧，有人会正确地确定一个理论的概率非零头部）。这方面的一个例子是语言发展。人们的整个职业生涯都在试图弄清楚为什么有聋哑父母的聋人的孩子与没有聋哑父母的聋人的孩子签名不同。

查找有关 Cognition 的书籍的另一种选择是去当地的大学或在线查找一本，看看这些课程需要哪些课本。如果幸运的话，您也许还可以在线为课堂笔记评分。这将帮助您了解您阅读的有关心理学的其他内容以及它们如何结合在一起。

您可能还想搜索主题可用性工程（Jakob Nielson、Edward Tufte）并阅读有关如何运行可用性实验的信息。即使你试图在你的应用程序中应用一个理论，并不意味着你成功了。

我只是想到了另一个地方可以看看。我会看看[Ted Talks](http://www.ted.com/)。并非所有这些都与心理学有关，但有一些。他们很好地概述了人们所发现的东西，而没有得到真正的详细信息。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-28T16:28:16.630

所有这些主题都属于[心理物理学](http://en.wikipedia.org/wiki/Psychophysics)（用于视觉、感知、感知等）或[认知科学](http://en.wikipedia.org/wiki/Cognitive_science)（例如记忆和认知负荷）的一般主题。

我还建议阅读[The Humane Interface](http://en.wikipedia.org/wiki/The_Humane_Interface)以深入了解认知如何直接影响用户界面设计，它真的很重要，应该遵循“心灵的人体工程学”，就像硬件人体工程学一样。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-28T21:50:55.893

Raskin 的[The Humane Interface](https://rads.stackoverflow.com/amzn/click/com/0201379376)也值得一读。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-03T14:45:38.483

[不要让我思考！](https://rads.stackoverflow.com/amzn/click/com/0789723107)作者 Steve Krug 是一个很好的可用性资源。它侧重于 Web 方面的设计，但可以很容易地转移到其他类型的界面。他关注的一件事是让“用户”参与进来，以确定哪些因素构成了良好的可用性。你可以整天实现可用性，但最终如果真人对它不满意，那么你的可用性就毫无用处。

另一件事是关注学术出版中的[HCI主题。](http://en.wikipedia.org/wiki/Human-computer_interaction)[ACM](http://www.acm.org/)或[ACM 门户](http://portal.acm.org/portal.cfm)之类的网站将为您的主题（以及许多其他主题）提供大量学术论文。

进行一些快速搜索后，我发现了一个包含 1500 个结果的[HCI 链接页面。](http://www.hcibib.org/hci-sites/?searchterm=hci)材料（就像你说的那样）肯定在那里（[事实](http://en.wikipedia.org/wiki/X-Files)也是如此，但那是另一天的事了。）

还要记住的是[Apple/Google/Your_Company](http://stuffthathappens.com/blog/wp-content/uploads/2008/03/simplicity.png)漫画，它是完全真实的，尽管它是基本的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-03T14:56:06.433

您只需要阅读一本书，那就是《设计界面》，这确实是一本很棒的书。--> [http://oreilly.com/catalog/9780596008031/](http://oreilly.com/catalog/9780596008031/)

它只是......很好！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-28T17:22:47.660

阅读[Apple 人机界面指南](http://www.docstoc.com/docs/1039915/Apple-human-interface-guidelines)。它不仅是一个带有模式的指南，而且是基于用户注意力的心理。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-28T17:23:33.260

您可能已经也可能没有遇到过经常受到诟病但仍然有用的[UCD](http://en.wikipedia.org/wiki/User-centered_design)（以用户为中心的设计）（[进一步](http://www.webcredible.co.uk/user-friendly-resources/web-usability/user-centered-design.shtml)。[链接](http://www.usabilityprofessionals.org/usability_resources/about_usability/what_is_ucd.html)。），它在历史上对更多......单片应用程序有用，与人类 1:1 作用。也就是说，UCD 是迭代的，因此可以很好地映射到敏捷方法。

在社交网络时代，起源于社会主义的[活动理论](http://en.wikipedia.org/wiki/Activity_theory)——松散地说，所有人类行为都可以在社会行为的背景下被理解，对弗洛伊德和荣格的内心世界的拒绝——因为它的明显翻译而正在普及。去年 FOWA 的一个很好的介绍在[这里](http://events.carsonified.com/fowa/2008/london/videos/gavin-bell)，关于这个主题的文字在[这里](http://books.google.com/books?id=JeqcgPlS2UAC&dq=isbn:0262140586)。

我认为这将继续取得进展，因为显然互联网现在正在定义软件的未来，而互联网是一种社交媒体。重要的是概念化组内的关系和用户操作，而不是文字业务对象。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-29T00:49:12.093

我一直在使用两本书在这方面提供帮助——[视觉智能：我们如何创造我们所看到](http://www.amazon.co.uk/Visual-Intelligence-How-Create-What/dp/0393319679/ref=sr_1_1?ie=UTF8&s=books&qid=1233189660&sr=8-1)的和[眼睛和大脑：观看的心理学](http://www.amazon.co.uk/Eye-Brain-Psychology-Richard-Gregory/dp/0198524129/ref=sr_1_1?ie=UTF8&s=books&qid=1233189720&sr=1-1)。它们都处理我们的视觉感知。我发现亚马逊的推荐是一种捷径，可以在某个领域获得“开创性工作”——如果专家/读者同意这是一本值得一读的书，我会接受它。

总之

1）你在哪里看，亚马逊遵循别人的推荐，然后在谷歌中反向查找，看看还有什么引用你的特定区域

2) 每天上网对大脑有好处，如果管理层想要编码机器人，也许这就是他们会得到的？

3) 我多年来一直在关注“信息图形”——这涵盖了地铁地图的设计和良好的标牌等内容。尝试[infoesthetics](http://infosthetics.com/)精彩的博客网站和维基百科上的[信息图形](http://en.wikipedia.org/wiki/Information_graphics)

最后虽然读了爱德华·塔夫特。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-31T05:02:22.157

[Bret Victor 的Magic Ink](http://worrydream.com/MagicInk/)是一篇关于**信息软件和图形界面**的精彩论文。我真的会向任何从事 UI 设计的人推荐它。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-01-31T05:22:28.793

不知道这在多大程度上适用，但“Nudge：改进关于健康、财富和幸福的决策”​​可能会帮助您了解具有多种功能选择的真正大型应用程序（我猜有点像功能区）。没读过，但认为这个想法绝对适用。

[http://www.amazon.com/Nudge-Improving-Decisions-Health-Happiness/dp/0300122233](https://rads.stackoverflow.com/amzn/click/com/0300122233)

# java - 静态和非静态初始化代码块有什么区别

> ID：335311
> 
> 赞同：373
> 
> 时间：2008-12-02T20:27:36.923
> 
> 标签：java, static, static-initializer

我的问题是关于静态关键字的一种特殊用法。可以使用`static`关键字来覆盖类中不属于任何函数的代码块。例如下面的代码编译：

```
public class Test {
    private static final int a;    
    static {
        a = 5;
        doSomething(a);
    }
    private static int doSomething(int x) {
        return (x+5);
    }
} 
```

如果您删除`static`关键字，它会抱怨，因为变量`a`是`final`. 但是，可以同时删除`final`和`static`关键字并使其编译。

这两种方式都让我感到困惑。我应该如何拥有一个不属于任何方法的代码部分？怎么可能调用它？一般来说，这种用法的目的是什么？或者更好的是，我在哪里可以找到有关此的文档？

* * *

## 回答 #1

> 赞同：423
> 
> 时间：2008-12-02T20:35:47.500

带有 static 修饰符的代码块表示一个*类*初始化器；如果没有 static 修饰符，代码块就是一个*实例*初始化器。

当类被加载时（实际上，当它被解析时，但这是技术性的），类初始化器按照它们定义的顺序执行（自上而下，就像简单的变量初始化器一样）。

实例初始化程序按照类被实例化时定义的顺序执行，紧接在执行构造函数代码之前，紧接在调用超级构造函数之后。

如果从 中删除`static`，`int a`它将成为一个实例变量，您无法从静态初始化程序块访问它。这将无法编译，并出现错误“无法从静态上下文引用非静态变量 a”。

如果您还`static`从初始化程序块中删除，它就会成为实例初始化程序，因此`int a`在构造时被初始化。

* * *

## 回答 #2

> 赞同：183
> 
> 时间：2015-03-24T05:10:18.890

**呜！什么是静态初始化器？**

静态初始化器是`static {}`java 类中的一段代码，在调用构造函数或 main 方法之前只运行一次。

**好的！告诉我更多...**

*   是`static { ... }`任何 java 类中的代码块。并在调用类时由虚拟机执行。
*   不支持任何`return`语句。
*   不支持任何参数。
*   不支持`this`或`super`支持。

**嗯，我在哪里可以使用它？**

可以在任何你觉得不错的地方使用 :) 就这么简单。但我看到它大部分时间都用于进行数据库连接、API 初始化、日志记录等。

**不要只是吠叫！例子在哪里？**

```
package com.example.learnjava;

import java.util.ArrayList;

public class Fruit {

    static {
        System.out.println("Inside Static Initializer.");

        // fruits array
        ArrayList<String> fruits = new ArrayList<>();
        fruits.add("Apple");
        fruits.add("Orange");
        fruits.add("Pear");

        // print fruits
        for (String fruit : fruits) {
            System.out.println(fruit);
        }
        System.out.println("End Static Initializer.\n");
    }

    public static void main(String[] args) {
        System.out.println("Inside Main Method.");
    }
} 
```

**输出？？？**

> 内部静态初始化器。
> 
> 苹果
> 
> 橙子
> 
> 梨
> 
> 结束静态初始化器。
> 
> 内部主要方法。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2008-12-02T20:33:34.320

该`static`块是一个“静态初始化器”。

它在加载类时自动调用，并且没有其他方法可以调用它（甚至通过反射也不行）。

我个人只在编写 JNI 代码时使用过它：

```
class JNIGlue {
    static {
        System.loadLibrary("foo");
    }
} 
```

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2015-05-22T05:27:00.863

这直接来自[http://www.programcreek.com/2011/10/java-class-instance-initializers/](http://www.programcreek.com/2011/10/java-class-instance-initializers/)

### 1\. 执行顺序

看看下面这个类，你知道哪个是最先执行的吗？

```
public class Foo {

    //instance variable initializer
    String s = "abc";

    //constructor
    public Foo() {
        System.out.println("constructor called");
    }

    //static initializer
    static {
        System.out.println("static initializer called");
    }

    //instance initializer
    {
        System.out.println("instance initializer called");
    }

    public static void main(String[] args) {
        new Foo();
        new Foo();
    }
} 
```

输出：

> 称为静态初始化程序
> 
> 实例初始化程序调用
> 
> 构造函数调用
> 
> 实例初始化程序调用
> 
> 构造函数调用

### 2\. Java 实例初始化器是如何工作的？

上面的实例初始化程序包含一个 println 语句。要了解它是如何工作的，我们可以将其视为变量赋值语句，例如`b = 0`. 这可以使它更容易理解。

代替

`int b = 0`，你可以写

```
int b;
b = 0; 
```

因此，实例初始化器和实例变量初始化器几乎相同。

### 3\. 实例初始化器什么时候有用？

实例初始化器的使用很少见，但在以下情况下，它仍然可以作为实例变量初始化器的有用替代方案：

1.  初始化代码必须处理异常
2.  执行无法用实例变量初始化程序表达的计算。

当然，这样的代码可以写在构造函数中。但是如果一个类有多个构造函数，你将不得不在每个构造函数中重复代码。

使用实例初始化器，您只需编写一次代码，无论使用什么构造函数创建对象，它都会执行。（我猜这只是一个概念，并不经常使用。）

实例初始化器有用的另一种情况是匿名内部类，它根本不能声明任何构造函数。（这会是放置日志功能的好地方吗？）

感谢德海因。

另请注意，实现接口 [1] 的匿名类没有构造函数。因此，在构造时需要实例初始化器来执行任何类型的表达式。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-12-02T20:36:31.103

“final”保证必须在对象初始化程序代码结束之前初始化变量。同样，“静态最终”保证变量将在类初始化代码结束时被初始化。从初始化代码中省略“静态”会将其转换为对象初始化代码；因此您的变量不再满足其保证。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-12-02T20:35:20.387

您不会将代码写入需要在程序中的任何位置调用的静态块中。如果要调用代码的目的，则必须将其放在方法中。

您可以编写静态初始化程序块来在加载类时初始化静态变量，但此代码可能更复杂..

静态初始化程序块看起来像一个没有名称、没有参数和没有返回类型的方法。由于您从不调用它，因此不需要名称。唯一一次调用它是在虚拟机加载类时。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-04-11T18:52:17.580

当开发人员使用初始化程序块时，Java 编译器将初始化程序复制到当前类的每个构造函数中。

例子：

以下代码：

```
class MyClass {

    private int myField = 3;
    {
        myField = myField + 2;
        //myField is worth 5 for all instance
    }

    public MyClass() {
        myField = myField * 4;
        //myField is worth 20 for all instance initialized with this construtor
    }

    public MyClass(int _myParam) {
        if (_myParam > 0) {
            myField = myField * 4;
            //myField is worth 20 for all instance initialized with this construtor
            //if _myParam is greater than 0
        } else {
            myField = myField + 5;
            //myField is worth 10 for all instance initialized with this construtor
            //if _myParam is lower than 0 or if _myParam is worth 0
        }
    }

    public void setMyField(int _myField) {
        myField = _myField;
    }

    public int getMyField() {
        return myField;
    }
}

public class MainClass{

    public static void main(String[] args) {
        MyClass myFirstInstance_ = new MyClass();
        System.out.println(myFirstInstance_.getMyField());//20
        MyClass mySecondInstance_ = new MyClass(1);
        System.out.println(mySecondInstance_.getMyField());//20
        MyClass myThirdInstance_ = new MyClass(-1);
        System.out.println(myThirdInstance_.getMyField());//10
    }
} 
```

相当于：

```
class MyClass {

    private int myField = 3;

    public MyClass() {
        myField = myField + 2;
        myField = myField * 4;
        //myField is worth 20 for all instance initialized with this construtor
    }

    public MyClass(int _myParam) {
        myField = myField + 2;
        if (_myParam > 0) {
            myField = myField * 4;
            //myField is worth 20 for all instance initialized with this construtor
            //if _myParam is greater than 0
        } else {
            myField = myField + 5;
            //myField is worth 10 for all instance initialized with this construtor
            //if _myParam is lower than 0 or if _myParam is worth 0
        }
    }

    public void setMyField(int _myField) {
        myField = _myField;
    }

    public int getMyField() {
        return myField;
    }
}

public class MainClass{

    public static void main(String[] args) {
        MyClass myFirstInstance_ = new MyClass();
        System.out.println(myFirstInstance_.getMyField());//20
        MyClass mySecondInstance_ = new MyClass(1);
        System.out.println(mySecondInstance_.getMyField());//20
        MyClass myThirdInstance_ = new MyClass(-1);
        System.out.println(myThirdInstance_.getMyField());//10
    }
} 
```

我希望我的例子能被开发者理解。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-12-02T20:34:43.260

静态代码块可用于实例化或初始化类变量（与对象变量相反）。所以声明“a”静态意味着所有Test对象只共享一个，并且静态代码块只初始化“a”一次，当Test类第一次加载时，无论创建多少Test对象。

# opengl-es - 使用 OpenGL 的 2D 游戏中的 3D 效果

> ID：335317
> 
> 赞同：4
> 
> 时间：2008-12-02T20:28:44.910
> 
> 标签：opengl-es, 2d, projection

我正在使用 OpenGL ES 开发 2D 游戏。我正在使用正交投影，因为它使 2D 的东西变得容易。现在我想创建一个简单的 3D 效果，比如围绕 Y 轴旋转一个精灵（类似于封面流）。如果我理解正确，这不能在正射投影中完成。是否可以在不弄乱其余代码的情况下做到这一点？就像在帧中间切换投影，把当前帧图像当作背景，在背景之上绘制3D的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-02T20:33:05.773

是的，这是可能的：只需保存旧的投影矩阵，加载一个新的，完成后恢复旧的。

```
void DrawScene()
{
  Draw2DStuff();

  glMatrixMode(GL_PROJECTION);
  glPushMatrix();  // Save old projection matrix
  gluPerspective(...);  // Load new projection matrix

  Draw3DStuff();

  glMatrixMode(GL_PROJECTION);
  glPopMatrix();  // Restore old projection matrix
} 
```

请注意深度缓冲区 - 在 2D 和 3D 渲染之间切换时，您可能需要使用深度缓冲区设置才能正确绘制。

# c++ - 在库的公共接口中使用 boost::shared_ptr

> ID：335330
> 
> 赞同：11
> 
> 时间：2008-12-02T20:31:27.243
> 
> 标签：c++, api, boost, shared-ptr

我们有一个 C++ 库，我们提供给几个不同的客户。最近，我们从在公共接口中使用原始指针切换到使用 boost::sharedptr。正如您可能猜到的那样，这提供了巨大的好处，因为现在客户不再需要担心谁需要删除什么以及何时删除。当我们进行转换时，我认为这是正确的做法，但让我感到困扰的是，我们必须在我们的公共界面中包含来自第三方库的东西——通常，如果可以的话，你会避免这种事情。我合理化了 boost 现在实际上是 C++ 语言的一部分，我们的用例要求客户端代码和库都保存指向对象的指针。然而最近我们的一位客户问我们是否可以切换到在界面中使用中性智能指针类，因为我们的库本质上是在强迫他们使用特定版本的 boost——我当然理解和欣赏这一点。所以现在我想知道最好的行动方案是什么。我已经考虑了一点，并想知道创建一个简单的智能指针类，它只包含一个真正的 boost 智能指针。但是随后客户可能会立即将其中一个塞入他们的 boost::sharedptr 风格中，然后我们将深入三个共享指针——这可能是一个问题，也可能不是。无论如何，我很想听听社区关于解决这个问题的最佳方法的一些意见。我已经考虑了一点，并想知道创建一个简单的智能指针类，它只包含一个真正的 boost 智能指针。但是随后客户可能会立即将其中一个塞入他们的 boost::sharedptr 风格中，然后我们将深入三个共享指针——这可能是一个问题，也可能不是。无论如何，我很想听听社区关于解决这个问题的最佳方法的一些意见。我已经考虑了一点，并想知道创建一个简单的智能指针类，它只包含一个真正的 boost 智能指针。但是随后客户可能会立即将其中一个塞入他们的 boost::sharedptr 风格中，然后我们将深入三个共享指针——这可能是一个问题，也可能不是。无论如何，我很想听听社区关于解决这个问题的最佳方法的一些意见。

编辑：我最初说的是所有权转移，但我应该指定API边界两边的代码都需要持有一个指向对象的指针。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-02T21:07:08.310

一种可能的解决方案是将 boost::shared_ptr 与您的项目一起发布。由于它全部由标头组成，这将使您的客户不必手动安装 boost 库。您可以使用[bcp](http://www.boost.org/doc/libs/1_37_0/tools/bcp/bcp.html)获取特定 boost 库所需的所有文件，包括库本身。当我当时在一家公司工作并且需要时，我就这样做了，`boost::shared_ptr`而且实际上效果很好。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-02T20:46:19.630

shared_ptr<>*是*该语言的一部分，自 TR1 发布以来。见：[（TR1）](http://msdn.microsoft.com/en-us/library/bb982729.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-02T20:40:37.023

如果语义真的*是所有权转移*，为什么不使用 auto_ptr，因为它是标准 C++？在内部，您仍然可以从 auto_ptr 构造您的 shared_ptr，然后在需要时拥有共享所有权。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-12-02T22:13:09.457

首先，如果您将库作为源代码而不是作为编译库分发，则可以忽略此答案。还有一些特定于 Windows 的问题可能与其他平台无关。

我个人认为你应该避免在你的库的公共接口中使用太多时髦的 c++，因为它会给客户端带来很多问题。

我不确定这对您的特定示例有多适用，但我个人遇到了问题，当我升级到新版本时，我使用的 stl 库中的符号与第三方库中的符号冲突。这意味着我们在陌生的地方发生了崩溃，我不得不做很多技巧来避免这个问题。最后，因为这个，我留在了旧版本的库中。

您可能会遇到的另一个问题是，不同的 c++ 编译器可能会以不同的方式处理相同的符号，这意味着您可能需要为要支持的每个编译器提供单独的库，即使它们使用相同的 Boost 版本。查看“Imperfect C++”一书以了解有关此问题的讨论。

在当前不同 C++ 编译器和环境的世界中，我认为可悲的事实是，您应该避免在界面中使用除 C 之外的任何内容，并确保动态链接库（以避免在链接客户时发生冲突）链接您的库、Windows 运行时库在这里可能是一个真正的痛苦）。您仍然可以根据需要在库内部使用 boost 和尽可能多的花哨的 c++，因为您的所有符号都将与 dll 中的客户环境隔离。

如果你真的想在你的库接口中拥有智能指针和其他不错的 C++ 功能，请构建一个便利层，你可以为其分发源代码。这将确保它始终在客户环境中编译。然后，此接口以巧妙的方式调用您公开的 C 函数。我认为在该层中使用 boost 也不是一个好主意，因为它会迫使您的客户采用它，即使他们不想要，但是很容易替换它或找到另一个解决方案，因为该层是作为源分发的代码。

另一个不错的特性是，如果你想将你的库暴露给 C/C++ 以外的其他语言，在 dll 中调用 C 函数通常比使用奇怪名称修饰的 C++ 函数更容易。

这种方法肯定会让你的生活在很多方面变得更加复杂，但它是一种减少人们避开你的库的可能性，因为它不可能与他们自己的代码成功链接。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-02T20:36:57.623

这是 C++。你知道，你可以在共​​享指针实现上模板化接口类。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-02T21:06:03.990

您可以使用[boost 复制](http://www.boost.org/doc/libs/1_37_0/tools/bcp/bcp.html)实用程序来构建只有智能指针类的自定义版本的 boost。由于智能指针类是一个只有头文件的库，这应该会产生一些可以包含在库中的头文件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-02T21:43:11.200

这是一个有趣的问题，我已经有一段时间了。您是强迫用户使用您提供的任何库，还是让他们决定在他们的项目中什么是最好的？与往常一样，问题是您提供什么以及您对用户的要求。

如果使用原始指针，则允许各种可能性。用户代码可以使用原始指针，将其存储到 std::auto_ptr、shared_ptr（无论是 boost 还是 TR1）或他们自制的智能指针版本。但是，如果用户忘记释放内存，这也可能会给用户带来麻烦，并且如果他们只想为方法调用创建一个临时的（如果您提供原始指针，他们将不得不存储非临时[可能是智能]指针变量中的指针）。

现在，如果您使用智能指针，您将把您的解决方案强加给用户。如果他们计划使用他们自己版本的智能指针（例如您使用 boost::shared_ptr 并且他们想要 std::tr1::shared_ptr），如果他们与您的界面一起使用，他们将不再被允许使用它。无论您决定使用哪种智能指针（除了特殊的 std::auto_ptr 之外），您不仅在强制解决方案，而且还强制解决它所存在的问题。

如果您的用户有一个多线程应用程序，并且您的解决方案不是线程安全的，那么用户将被绑定到一个不安全的解决方案。另一方面，如果智能指针是线程安全的，但会产生锁定成本，那么即使他们在多线程应用程序中工作，这些成本也会被推给您的用户。如果你编译你的库（不是一个只有头文件的库），那么你不仅要强制使用一种智能指针，还要强制它的特定版本，因为智能指针库中的任何更改都会破坏代码的兼容性。

作为旁注，boost::shared_ptr（boost 1.33+）在大多数情况下是[线程安全](http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/shared_ptr.htm#ThreadSafety)的，并且在许多平台上使用无锁实现。无论如何，这应该让您对应该考虑的事情有所了解。

最后，您必须考虑您不仅将用户绑定到使用您的智能指针类型，而且还绑定了相同版本的智能指针。如果您针对特定版本的 boost 编译您的库，则用户将绑定到该特定实现

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-02T20:40:25.743

[boost::intrusive_ptr](http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/intrusive_ptr.html)也许？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-07-22T02:27:29.057

引入 boost::shared_ptr 会强制您的客户端使用 boost。对某些人来说，这是一个小问题。

如果您的 lib 作为已编译的二进制文件分发，它还会强制您的客户端使用与您的 lib 相同的编译器。或者，如果您的库以源代码形式分发，则客户端必须坚持自己选择的用于编译您的库的编译器。对于任何规模相当大的项目来说，这都不是小问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-07-22T02:36:06.837

使用`auto_ptr`或坚持使用 C 接口。强制 C++ 库进入你的界面总是丑陋的，扼杀了跨平台的任何机会，并为具有不同“下游”配置的客户带来维护噩梦。

一旦 C++0x 对您的客户来说足够主流，就切换到`std::shared_ptr`.

# javascript - 如何在重定向后获取 URL 路径 - 使用 Javascript？

> ID：335337
> 
> 赞同：1
> 
> 时间：2008-12-02T20:33:11.763
> 
> 标签：javascript, dom

这可能有点离题，但一位朋友问我这件事，这让我很困扰。如果服务器将所有请求重定向到默认文件（例如 index.html），您如何确定地址栏中的当前路径。

假设您输入了：

```
www.example.com/ 
```

并且您的服务器配置会自动将此请求重定向到

```
www.example.com/index.html 
```

但是您的网址栏中的地址不会改变！那么如何使用 Javascript 确定此 url 上的路径是 index.html？

我查看了 location.pathname 但这只是给我/。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T20:39:46.417

如果重定向发生在服务器上，则浏览器不知道它，您无法访问 javascript 中的实际资源。例如，一个 servlet 可能“转发”到服务器上的另一个资源。

如果服务器向浏览器发送重定向命令并且浏览器请求新的 url，那么浏览器确实知道它并且您可以获得它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-02T20:41:53.603

问题是它实际上不是重定向。当您`'www.example.com'`在 Web 浏览器中键入内容时，浏览器会生成如下 HTTP 请求：

```
GET / HTTP/1.1
User-Agent: curl/7.16.3 (i686-pc-cygwin) libcurl/7.16.3 OpenSSL/
0.9.8h zlib/1.2.3 libssh2/0.15-CVS
Host: www.example.com
Accept: */* 
```

请注意，它正在请求一个名为 literal 的文档`/`。服务器有两种可能的响应：

```
HTTP/1.1 200 OK
(more headers)

Content... 
```

和

```
HTTP/1.1 301 Moved Permanently
Location: (location of redirect)
(more headers)

(Optional content) 
```

In Case #2, you can get the redirect location since it's actually a redirect. But in Case #1, the *server* is doing the redirection: it sees a request for `/` and instead serves up the content for whatever its index page is (e.g. `index.html`, `index.php`, `default.aspx`, etc.). As far as your browser is concerned, that's just the content for the document `/`. It doesn't know it's been redirected.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T20:40:41.513

没有办法做到这一点，除非以某种方式将网络服务器的文件名嵌入到文档中。就浏览器而言，没有`index.html`，页面只是`/`。

# eclipse - 什么是调试工作集 (Eclipse)？

> ID：335340
> 
> 赞同：7
> 
> 时间：2008-12-02T20:33:42.403
> 
> 标签：eclipse, debugging, working-set

我正在使用 Eclipse IDE，并注意到 Breakpoints 视图中的 Debug 透视图中的一个选项，它允许我选择/创建一个工作集。我在网上找到了各种帮助，告诉我如何制作工作集或选择工作集，但没有解释什么是工作集或我为什么要使用工作集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-02T21:13:27.533

工作集是其他对象的子集。您可以创建仅包含部分断点的断点工作集，也可以创建仅包含部分项目的项目工作集，依此类推。您将使用工作集让您轻松地在项目或工作区的不同部分之间来回切换。

# sql-server - 使用 SQL Server 作为映像存储

> ID：335342
> 
> 赞同：20
> 
> 时间：2008-12-02T20:34:20.577
> 
> 标签：sql-server, image, store

SQL Server 2008 是用作电子商务网站图像存储的好选择吗？它将用于存储各种尺寸和角度的产品图像。Web 服务器将输出这些图像，通过集群 ID 读取表格。总图像大小约为 10 GB，但需要扩展。我看到使用文件系统有很多好处，但我担心没有 O(1) 查找的 SQL 服务器不是最佳解决方案，因为该站点有大量流量。这甚至会成为瓶颈吗？有什么想法或其他选择？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-12-02T20:43:04.957

10 Gb 的数据量不是很大，因此您可能可以使用数据库来存储它并且没有什么大问题，但是使用文件系统当然是最好的性能明智的，并且在安全管理方面最好使用数据库（备份和一致性）。

令人高兴的是，Sql Server 2008 允许您吃蛋糕和吃蛋糕，其中：

[FILESTREAM 属性](http://www.microsoft.com/sqlserver/2008/en/us/wp-sql-2008-manage-unstructured.aspx)

在 SQL Server 2008 中，您可以将 FILESTREAM 属性应用于 varbinary 列，然后 SQL Server 将该列的数据存储在本地 NTFS 文件系统上。将数据存储在文件系统上带来两个主要好处：

*   性能与文件系统的流性能相匹配。
*   BLOB 大小仅受文件系统卷大小的限制。

但是，该列可以像 SQL Server 中的任何其他 BLOB 列一样进行管理，因此管理员可以使用 SQL Server 的可管理性和安全功能将 BLOB 数据管理与关系数据库中的其余数据集成在一起，而无需管理文件系统数据分开。

在 SQL Server 中将数据定义为 FILESTREAM 列还可以确保数据库中的关系数据与物理存储在文件系统上的非结构化数据之间的数据级一致性。FILESTREAM 列的行为与 BLOB 列完全相同，这意味着备份和还原等维护操作的完全集成、与 SQL Server 安全模型的完全集成以及完整的事务支持。

应用程序开发人员可以通过两种编程模型之一处理 FILESTREAM 数据；他们可以像标准 BLOB 列一样使用 Transact-SQL 访问和操作数据，或者他们可以使用带有 Transact-SQL 事务语义的 Win32 流式 API 来确保一致性，这意味着他们可以使用标准 Win32 读/写调用 FILESTREAM BLOB 就像与文件系统上的文件进行交互一样。

在 SQL Server 2008 中，FILESTREAM 列只能将数据存储在本地磁盘卷上，并且 FILESTREAM 列不支持透明加密和表值参数等某些功能。此外，您不能在数据库快照或数据库镜像会话中使用包含 FILESTREAM 列的表，尽管支持日志传送。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-02T20:46:37.617

查看 MS Research 的这份白皮书 ( [http://research.microsoft.com/research/pubs/view.aspx?msr_tr_id=MSR-TR-2006-45](http://research.microsoft.com/research/pubs/view.aspx?msr_tr_id=MSR-TR-2006-45) )

他们详细说明了您正在寻找的内容。简短的版本是，与将数据保存在文件系统上相比，任何超过 1 MB 的文件都会开始降低性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T20:46:41.160

我怀疑`O(log n)`查找会是一个问题。你说你有 10GB 的图像。假设平均图像大小为 50KB，即 200,000 张图像。在表中对 200K 行进行索引查找不是问题。与实际从磁盘读取图像并将其通过您的应用程序传输到客户端所需的时间相比，它会很小。

仍然值得考虑将图像存储在数据库中与将路径存储在数据库中到文件系统上的文件的通常优缺点。例如：

*   数据库中的图片遵循事务隔离，删除行时自动删除等。
*   具有 10GB 图像的数据库当然比仅存储图像文件路径名的数据库要大。备份速度和其他因素是相关的。
*   当您通过应用程序从数据库提供图像时，您需要在响应中设置 MIME 标头。
*   文件系统上的图像更容易被 Web 服务器（例如 Apache mod_mmap）缓存，或者可以由更精简的 Web 服务器（如 lighttpd）提供服务。这实际上是一个相当大的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T20:41:38.940

对于电子商务网站之类的东西，我很可能会将图像存储在数据库上的 blob 存储中。虽然您不想进行过早的优化，但让我的图像与我的数据一起轻松组织以及非常便携的好处是电子商务之类的自动好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T20:41:55.490

如果图像被索引，那么查找将不是一个大问题。我不确定，但我认为文件系统的查找不是 O(1)，更像是 O(n)（我认为文件没有被文件系统索引）。

在这个设置中让我担心的是数据库的大小，但如果管理得当，这不会是一个大问题，一个很大的优势是你只有一件事要备份（数据库）而不用担心磁盘上的文件.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-02T20:43:32.290

通常，一个好的解决方案是将图像本身存储在文件系统中，并将元数据（文件名、尺寸、上次更新时间、您需要的任何其他内容）存储在数据库中。

话虽如此，对此没有“正确”的解决方案。

# mysql - AS3 与 MySQL 服务器之间的通信

> ID：335343
> 
> 赞同：1
> 
> 时间：2008-12-02T20:34:35.380
> 
> 标签：mysql, actionscript-3

我正在开发一个用 Flash AS3 编码的游戏，需要将信息读/写到 SQL 服务器。目前，出于测试目的，我使用非常简单且健壮的[ASQL](http://asql.mooska.pl/) ，但它需要从客户端计算机直接连接到 SQL 服务器（端口 3306 开放并允许使用密码从任何地方连接通配符用户名），更糟糕的是， .swf 格式本身没有加密，所有反编译器都会让您提取 AS3 代码，这意味着密码存储在代码中。

我收集了一些选项，但它们都缺乏安全措施：

1.  AS3 代码向连接到 MySQL 服务器的 PHP 页面发送 POST 请求
2.  使用[amfphp](http://www.amfphp.org/)，但 AMF 协议仍然可以嗅探
3.  保持当前方法并强制用户打开传出端口 3306，这可能会使客户感到困惑。

帮助/提示/讨论将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T22:18:40.710

您可以使用 HTTP(S) 进行身份验证，例如 PHP。不要让脚本成为 SQL 连接的包装器，因为这会破坏脚本的要点（本质上）；将自定义命令作为协议（例如添加/更新高分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-23T14:45:23.167

根据所需命令的数量，我认为您应该选择选项 1（只有一个或几个命令）或选项 2（如果您有更多和复杂的命令要发送）。不要在公共互联网上打开您的数据库。

您要解决/保护的问题是什么？如果您的所有应用程序（游戏）逻辑都在客户端，则您无法阻止人们伪造结果。客户端永远不会被信任，并且线路安全（https 或任何其他通信加密）不会对此有所帮助——这只会阻止其他人窃听。

如果您试图确保发布高分或游戏状态 - 据我所知，您可以使其难以伪造，但除非您将至少一些游戏逻辑移至服务器，否则无法使其成为不可能。

# asp.net - ASP.NET 网站，聘请外部设计公司和标准

> ID：335360
> 
> 赞同：1
> 
> 时间：2008-12-02T20:38:39.583
> 
> 标签：asp.net, css, standards, web-standards

嘿。我们正在构建一个大型 ASP.NET 网站，并聘请了一家外部公司进行设计（CSS + 原型页面）。在使设计适合页面时，我们发现了许多问题，表明从未考虑过 ASP.NET 的工作原理。我的问题是 - 是否有设计公司使用的通用标准（应该）用于创建将成为 ASP.NET 网站的内容？

我们发现了类似的东西：

*   在 HTML 元素上使用 ID 以供 CSS/JS 查找，这不适用于生成 ID 的服务器标签。
*   带有连字符的 ID
*   ValidatorSummary 示例以与 ASP.NET 完全不同的样式构建。
*   假设所有按钮都是 <input> 标签
*   <div> 上的边距样式，干扰了我们对面板的使用

第一个例子是个问题。其余的都是令人不快的误解。像往常一样，时间紧迫，所以在这个*“我们会修复它/让我们的设计师查看它/解决它”的*海洋中，我主要希望有一些基本的构建块可以阻止大部分这些问题的发生。

这家设计公司很大，背后有大量的大型现场工作，所以可悲的是，在这种情况下，“不要雇佣一个人的商店”的智慧不是票......

**[更新]**

如果您正处于聘请外部网页设计公司的职位，并且拥有早期合作的奢侈并希望帮助弥合满足 ASP.NET 要求的差距，这里是我们当前的指南列表。如果您觉得有什么需要补充的，请在下方评论：

*   请将每个页面封装在一个<form>标签中（即直接放在<body>标签之后），`<form>`页面上不要使用其他标签
*   要显示页面验证错误的摘要，请提供以下格式示例：

    `<div class="error_class">`
    `<h3>`请查看以下字段`</h3>`
    `<ul>`
    `<li>`家庭电话号码`</li>`
    `<li>`姓氏`</li>`
    `</ul>`
    `</div>`

*   请避免驾驶风格离开 ID 或 name 属性。
*   如果有 HTML 组件需要打开和关闭，这些组件应该封装在一个`<div>`元素中，这样 div 的可见性可以设置为 'false'。
*   如果样式按钮，请同时满足`<input>`标签和`<a ... class="example_class">` `<span>`按钮文本`</span>``格式。
*   避免在无类`<div>`和`<span>`标签上设置属性。
*   感谢您对我们的包容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T20:46:12.643

每当我与设计公司合作构建 asp.net 页面时，我总是让他们设计它应该是什么样子。与标记或CSS无关。这给开发人员留下了很多工作要做，但避免了你刚才提到的所有错误。我总是让设计师提供一个 PSD 文件，然后我自己把它切碎。

如果这不能满足您的需求，您可以随时尝试 ASP.NET MVC。它使您可以更好地控制放置在页面上的标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-02T20:59:23.707

与我合作过的大多数设计公司都需要掌握他们在为 ASP.Net 应用程序设计方面能做什么和不能做什么。你打了所有的大问题，身份证是最大的问题。

就构建模块而言，早期的协作通常对我们有用。一旦我们确定了我们需要如何实现设计以便在 ASP.Net 上下文中轻松工作，事情就顺利进行了。当然，另一端的设计师越好，它就越容易。

我不是一个让开发人员砍掉 PSD 文件的人。有了合适的设计师或公司，您应该能够节省时间和金钱，并从一开始就做好。我认识的大多数开发人员都可以调整和扩展 CSS 和标记，但从 PSD 或从头开始时效率要低得多。

HTH。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-02T21:39:41.567

一般来说，以设计师为生的人对 ASP.Net 的了解不够充分，无法避免它的怪癖。期望他们生成考虑到 ASP.Net 规则的 HTML 和 CSS 是不合理的。[标准](https://stackoverflow.com/questions/22084/aspnet-aspxxx-controls-versus-standard-html)实际上是在这一方面的设计师方面。

对于未来的集成，您可能希望与拥有自己的 .Net 开发人员并与他们的设计师合作的公司合作，或者，如果您可以选择 .Net 3.5，您可以与拥有[MS Expressions Web](http://designer-info.com/web/expression-web/expression-web-2-review.html)的设计商店合作处理。

# c++ - 查找 C++ 静态初始化顺序问题

> ID：335369
> 
> 赞同：68
> 
> 时间：2008-12-02T20:40:00.597
> 
> 标签：c++, initialization, static-order-fiasco

我们在[静态初始化命令 fiasco](http://www.parashift.com/c++-faq-lite/static-init-order.html)中遇到了一些问题，我正在寻找方法来梳理大量代码以查找可能出现的情况。关于如何有效地做到这一点的任何建议？

编辑：关于如何解决静态初始化顺序问题，我得到了一些很好的答案，但这不是我的问题。我想知道如何查找受此问题影响的对象。在这方面，埃文的回答似乎是迄今为止最好的；我不认为我们可以使用 valgrind，但我们可能有可以执行类似功能的内存分析工具。这只会在给定构建的初始化顺序错误的情况下发现问题，并且顺序可以随着每次构建而改变。也许有一个静态分析工具可以捕捉到这一点。我们的平台是在 AIX 上运行的 IBM XLC/C++ 编译器。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2008-12-02T22:51:35.993

# 解决初始化顺序：

首先，这只是一个临时的解决方法，因为你有全局变量，你试图摆脱但还没有时间（你最终会摆脱它们不是吗？:-)

```
class A
{
    public:
        // Get the global instance abc
        static A& getInstance_abc()  // return a reference
        {
            static A instance_abc;
            return instance_abc;
        }
}; 
```

这将保证它在首次使用时被初始化并在应用程序终止时被销毁。

### 多线程问题：

C++11*确实*保证这是线程安全的：

> **§6.7 [stmt.dcl] p4**
> 如果在初始化变量时控制同时进入声明，则并发执行应等待初始化完成。

但是，C++03 并*没有*官方保证静态函数对象的构造是线程安全的。因此，从技术上讲，该`getInstance_XXX()`方法必须使用临界区加以保护。从好的方面来说，gcc 有一个显式补丁作为编译器的一部分，它保证每个静态函数对象即使在存在线程的情况下也只会被初始化一次。

请注意：*不要*使用[双重检查锁定模式](https://en.wikipedia.org/wiki/Double-checked_locking)来尝试避免锁定成本。这在 C++03 中不起作用。

### 创建问题：

在创建时，没有问题，因为我们保证它是在使用之前创建的。

### 破坏问题：

在对象被销毁后访问对象存在潜在问题。仅当您从另一个全局变量的析构函数访问对象时才会发生这种情况（全局，我指的是任何非局部静态变量）。

解决方案是确保您强制执行破坏顺序。
请记住，破坏顺序与构造顺序完全相反。所以如果你在你的析构函数中访问对象，你必须保证这个对象没有被销毁。为此，您必须保证在构造调用对象之前完全构造对象。

```
class B
{
    public:
        static B& getInstance_Bglob;
        {
            static B instance_Bglob;
            return instance_Bglob;;
        }

        ~B()
        {
             A::getInstance_abc().doSomthing();
             // The object abc is accessed from the destructor.
             // Potential problem.
             // You must guarantee that abc is destroyed after this object.
             // To guarantee this you must make sure it is constructed first.
             // To do this just access the object from the constructor.
        }

        B()
        {
            A::getInstance_abc();
            // abc is now fully constructed.
            // This means it was constructed before this object.
            // This means it will be destroyed after this object.
            // This means it is safe to use from the destructor.
        }
}; 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2010-08-04T02:42:47.533

我只是写了一些代码来追踪这个问题。我们有一个大小合适的代码库（1000 多个文件），在 Windows/VC++ 2005 上运行良好，但在 Solaris/gcc 上启动时崩溃。我写了以下 .h 文件：

```
#ifndef FIASCO_H
#define FIASCO_H

/////////////////////////////////////////////////////////////////////////////////////////////////////
// [WS 2010-07-30] Detect the infamous "Static initialization order fiasco"
// email warrenstevens --> [initials]@[firstnamelastname].com 
// read --> http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.12 if you haven't suffered
// To enable this feature --> define E-N-A-B-L-E-_-F-I-A-S-C-O-_-F-I-N-D-E-R, rebuild, and run
#define ENABLE_FIASCO_FINDER
/////////////////////////////////////////////////////////////////////////////////////////////////////

#ifdef ENABLE_FIASCO_FINDER

#include <iostream>
#include <fstream>

inline bool WriteFiasco(const std::string& fileName)
{
    static int counter = 0;
    ++counter;

    std::ofstream file;
    file.open("FiascoFinder.txt", std::ios::out | std::ios::app);
    file << "Starting to initialize file - number: [" << counter << "] filename: [" << fileName.c_str() << "]" << std::endl;
    file.flush();
    file.close();
    return true;
}

// [WS 2010-07-30] If you get a name collision on the following line, your usage is likely incorrect
#define FIASCO_FINDER static const bool g_psuedoUniqueName = WriteFiasco(__FILE__);

#else // ENABLE_FIASCO_FINDER
// do nothing
#define FIASCO_FINDER

#endif // ENABLE_FIASCO_FINDER

#endif //FIASCO_H 
```

在解决方案中的**每个**.cpp 文件中，我添加了以下内容：

```
#include "PreCompiledHeader.h" // (which #include's the above file)
FIASCO_FINDER
#include "RegularIncludeOne.h"
#include "RegularIncludeTwo.h" 
```

当你运行你的应用程序时，你会得到一个像这样的输出文件：

```
Starting to initialize file - number: [1] filename: [p:\\OneFile.cpp]
Starting to initialize file - number: [2] filename: [p:\\SecondFile.cpp]
Starting to initialize file - number: [3] filename: [p:\\ThirdFile.cpp] 
```

如果您遇到崩溃，罪魁祸首应该在最后列出的 .cpp 文件中。至少，这会给你一个设置断点的好地方，因为这段代码应该是你要执行的代码的**绝对第一个**（之后你可以单步执行你的代码并查看所有正在初始化的全局变量） .

**笔记：**

*   将“FIASCO_FINDER”宏放在尽可能靠近文件顶部的位置很重要。如果您将它放在其他一些#includes 之下，则在识别您所在的文件之前，您可能会面临崩溃的风险。

*   如果您使用的是 Visual Studio 和预编译头文件，则可以使用“查找和替换”对话框快速将这个额外的宏行添加到**所有**.cpp 文件中，将现有的 #include "precompiledheader.h" 替换为相同的文本加上 FIASCO_FINDER 行（如果勾选“正则表达式，可以使用“\n”插入多行替换文本）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-12-02T21:57:16.307

根据您的编译器，您可以在构造函数初始化代码处放置断点。在 Visual C++ 中，这是`_initterm`函数，它被赋予了要调用的函数列表的开始和结束指针。

然后进入每个函数以获取文件和函数名称（假设您已使用调试信息进行编译）。获得名称后，退出函数（返回到`_initterm`）并继续直到`_initterm`退出。

这为您提供了***所有***静态初始化程序，而不仅仅是代码中的初始化程序 - 这是获取详尽列表的最简单方法。您可以过滤掉您无法控制的那些（例如第三方库中的那些）。

该理论适用于其他编译器，但函数的名称和调试器的功能可能会改变。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-02T20:51:35.563

也许使用 valgrind 来查找未初始化内存的使用情况。“静态初始化顺序失败”的最佳解决方案是使用静态函数，该函数返回对象的实例，如下所示：

```
class A {
public:
    static X &getStatic() { static X my_static; return my_static; }
}; 
```

这种访问静态对象的方法是调用 getStatic，这将保证它在第一次使用时被初始化。

如果您需要担心反初始化的顺序，请返回一个新的对象而不是静态分配的对象。

编辑：删除了多余的静态对象，我不知道为什么，但我在原始示例中混合并匹配了两种具有静态的方法。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-01-11T15:01:16.067

有一些代码基本上“初始化”了编译器生成的 C++。当时找到此代码/调用堆栈的一种简单方法是创建一个静态对象，该对象在构造函数中取消引用 NULL - 在调试器中中断并进行一些探索。MSVC 编译器设置了一个函数指针表，该表被迭代以进行静态初始化。您应该能够访问此表并确定程序中发生的所有静态初始化。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-05T22:23:19.337

> *我们在* *静态初始化顺序惨败中遇到了一些问题，* *我正在寻找方法来梳理* *大量代码以查找* *可能出现的情况。* *关于如何有效地做到这一点的**任何建议？*

 *这不是一个微不足道的问题，但如果您的代码具有易于解析的中间格式表示，那么至少可以按照相当简单的步骤完成。

1) 找到所有具有非平凡构造函数的全局变量并将它们放在一个列表中。

2) 对于这些非平凡构造的对象中的每一个，生成由它们的构造函数调用的整个势函数树。

3) 遍历非平凡构造函数树，如果代码引用了任何其他非平凡构造的全局变量（在您在第一步生成的列表中非常方便），您就有潜在的早期静态初始化顺序问题。

4) 重复第 2 步和第 3 步，直到用完第 1 步中生成的列表。

注意：如果您有单个类的多个全局变量，您可以通过每个对象类只访问潜在功能树一次而不是每个全局实例一次来优化这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-02T20:52:16.640

将所有全局对象替换为全局函数，这些函数返回对函数中声明为静态的对象的引用。这不是线程安全的，因此如果您的应用程序是多线程的，您可能需要一些技巧，例如 pthread_once 或全局锁。这将确保一切都在使用之前进行初始化。

现在，要么你的程序工作（哇！），要么它处于无限循环中，因为你有一个循环依赖（需要重新设计），或者你继续下一个错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-02T20:53:14.437

您需要做的第一件事是列出所有具有重要构造函数的静态对象。

鉴于此，您要么需要一次插入一个，要么只需将它们全部替换为单例模式对象。

单例模式受到很多批评，但懒惰的“按需”构造是解决现在和将来大多数问题的相当简单的方法。

老的...

```
MyObject myObject 
```

新的...

```
MyObject &myObject()
{
  static MyObject myActualObject;
  return myActualObject;
} 
```

当然，如果您的应用程序是多线程的，这可能会给您带来比一开始更多的问题......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-05T22:34:19.607

Gimpel Software (www.gimpel.com) 声称他们的 PC-Lint/FlexeLint 静态分析工具将检测到此类问题。

我对他们的工具有很好的经验，但在这个特定问题上没有，所以我不能保证他们会提供多少帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-24T12:39:46.637

其中一些答案现在已经过时了。为了像我这样来自搜索引擎的人：

在 Linux 和其他地方，可以通过 Google 的[AddressSanitizer](https://github.com/google/sanitizers/wiki)找到这个问题的实例。

> AddressSanitizer 从 3.1 版开始是 LLVM 的一部分，从 4.8 版开始是 GCC 的一部分

然后，您将执行以下操作：

```
$ g++ -fsanitize=address -g staticA.C staticB.C staticC.C -o static 
$ ASAN_OPTIONS=check_initialization_order=true:strict_init_order=true ./static 
=================================================================
==32208==ERROR: AddressSanitizer: initialization-order-fiasco on address ... at ...
    #0 0x400f96 in firstClass::getValue() staticC.C:13
    #1 0x400de1 in secondClass::secondClass() staticB.C:7
    ... 
```

有关更多详细信息，请参见此处： [https ://github.com/google/sanitizers/wiki/AddressSanitizerInitializationOrderFiasco](https://github.com/google/sanitizers/wiki/AddressSanitizerInitializationOrderFiasco)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-07-22T02:32:53.537

如果您的项目在 Visual Studio 中（我已经在 VC++ Express 2005 和 Visual Studio 2008 Pro 中尝试过）：

1.  打开班级视图（主菜单->视图->班级视图）
2.  展开解决方案中的每个项目，然后单击“全局函数和变量”

这应该会为您提供一份体面的列表，列出所有受*惨败*影响的全局变量。

最后，更好的方法是尝试从项目中删除这些对象（有时说起来容易做起来难）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-06-28T09:24:03.687

其他答案是正确的，我只是想补充一点，对象的 getter 应该在 .cpp 文件中实现，它不应该是静态的。如果您在头文件中实现它，则该对象将在您从中调用它的每个库/框架中创建......

# java - 在 Java 中将 XML 文件（使用 XStream）写入文件系统

> ID：335374
> 
> 赞同：5
> 
> 时间：2008-12-02T20:41:05.600
> 
> 标签：java, xml, serialization

我需要能够序列化字符串，然后将其保存在 .txt 或 .xml 文件中。我从未使用该实现来读/写文件，请记住我是一个相对初学者。另外，我需要知道如何将要在终端中打印的字符串反序列化为普通字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T09:50:05.993

XStream 具有读取和写入文件的功能，请参阅本文中的简单示例（Writer.java 和 Reader.java [）](https://web.archive.org/web/20090206084754/http://ibm.com/developerworks/library/x-xstream/index.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-02T22:10:00.010

如果您可以将其序列化为 txt 文件，只需打开一个 ObjectOutputStream 并让它为您使用 String 自己的序列化功能。

```
String str = "serialize me";
    String file = "file.txt";
    try{
        ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(file));
        out.writeObject(str);
        out.close();

        ObjectInputStream in = new ObjectInputStream(new FileInputStream(file));
        String newString = (String) in.readObject();
        assert str.equals(newString);
        System.out.println("Strings are equal");
    }catch(IOException ex){
        ex.printStackTrace();
    }catch(ClassNotFoundException ex){
        ex.printStackTrace();
    } 
```

您也可以只打开一个 PrintStream 并以这种方式将其吸出，然后使用 BufferedReader 和 readLine()。如果您真的想要花哨（因为这毕竟是一个硬件分配），您可以使用 for 循环并单独打印每个字符。使用 XML 比序列化 String 更复杂，使用外部库只是矫枉过正。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-27T05:38:01.157

如果您刚开始使用 Java，那么请花一些时间浏览一下 Apache Commons 项目。java有很多基本的扩展，你会使用很多次。

我假设您只想保留一个字符串，以便稍后再读回它 - 在这种情况下，它不一定需要是 XML。

要将字符串写入文件，请参阅 org.apache.commons.io.FileUtils：

`FileUtils.writeStringToFile(File file,String data)`

读回来：

`FileUtils.readFileToString(File file)`

参考：

[http://commons.apache.org/](http://commons.apache.org/)

[http://commons.apache.org/io](http://commons.apache.org/io)

[http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)

确保您还查看[commons-lang](http://commons.apache.org/lang/)以获得许多好的基本内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-05T23:56:42.287

如果您需要创建一个包含表示对象内容的 XML 的文本文件（并使其成为双向），只需使用 JSON-lib：

```
class MyBean{  
   private String name = "json";  
   private int pojoId = 1;  
   private char[] options = new char[]{'a','f'};  
   private String func1 = "function(i){ return this.options[i]; }";  
   private JSONFunction func2 = new JSONFunction(new String[]{"i"},"return this.options[i];");  

   // getters & setters  
   ...  
}  

JSONObject jsonObject = JSONObject.fromObject( new MyBean() );
String xmlText = XMLSerializer.write( jsonObject ); 
```

从那里刚刚将字符串写入您的文件。比所有这些 XML API 都简单得多。但是，现在，如果您需要符合 DTD 或 XSD，这是一种不好的方法，因为它的格式更加自由，并且只符合对象布局。

[http://json-lib.sourceforge.net/usage.html](http://json-lib.sourceforge.net/usage.html)

皮科

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T20:52:15.673

使用 XStream 有什么特别的理由吗？如果您所做的只是尝试序列化一两个字符串，那么使用[JDOM](http://www.jdom.org/)之类的东西将非常容易做到这一点。

即，类似于： Document doc = new Document();

```
Element rootEl = new Element("root");
rootEl.setText("my string");
doc.appendChild(rootEl);
XMLOutputter outputter = new XMLOutputter();
outputter.output(doc); 
```

上面的一些细节可能是错误的，但这是基本流程。也许您应该问一个更具体的问题，以便我们能够准确了解您遇到的问题是什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-29T11:39:21.810

尝试这样的事情：

```
 FileOutputStream fos = null;
    try {
        new File(FILE_LOCATION_DIRECTORY).mkdirs();
        File fileLocation = new File(FILE_LOCATION_DIRECTORY + "/" + fileName);
        fos = new FileOutputStream(fileLocation);
        stream.toXML(userAlertSubscription, fos);                
    } catch (IOException e) {
        Log.error(this, "Error %s in file %s", e.getMessage(), fileName);
    } finally {
        IOUtils.closeQuietly(fos);
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-02T21:37:33.757

From [http://www.xml.com/pub/a/2004/08/18/xstream.html](http://www.xml.com/pub/a/2004/08/18/xstream.html):

```
import com.thoughtworks.xstream.XStream;

class Date {
    int year;
    int month;
    int day;
}

public class Serialize {
    public static void main(String[] args) {

        XStream xstream = new XStream();

        Date date = new Date();
        date.year = 2004;
        date.month = 8;
        date.day = 15;

        xstream.alias("date", Date.class);

        String decl = "\n";

        String xml = xstream.toXML(date);

        System.out.print(decl + xml);
    }
}

public class Deserialize {

    public static void main(String[] args) {

        XStream xstream = new XStream();

        Date date = new Date();

        xstream.alias("date", Date.class);

        String xml = xstream.toXML(date);

        System.out.print(xml);

        Date newdate = (Date)xstream.fromXML(xml);
        newdate.month = 12;
        newdate.day = 2;

        String newxml = xstream.toXML(newdate);

        System.out.print("\n\n" + newxml);
    }
} 
```

You can then take the xml string and write it to a file.

# c# - 你如何标记代码，以便以后可以回来处理它？

> ID：335378
> 
> 赞同：68
> 
> 时间：2008-12-02T20:42:51.043
> 
> 标签：c#, c++, comments

在 C# 中，我使用`#warning`and`#error`指令，

```
#warning This is dirty code...
#error Fix this before everything explodes! 
```

这样，编译器会让我知道我还有工作要做。你用什么技术来标记代码，这样你就不会忘记它？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2008-12-02T20:44:18.387

用 或其他注释标记标记它们`// TODO`，这些`// HACK`标记将显示在 Visual Studio 的任务窗格中。

请参阅[使用任务列表](https://msdn.microsoft.com/en-us/library/txtwdysk.aspx)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-12-02T20:48:43.793

待办事项评论也是如此。

我们还添加了一个特殊的关键字 NOCHECKIN，我们在源代码控制系统中添加了一个提交挂钩（至少使用 cvs 或 svn 很容易做到），它会扫描所有文件并拒绝签入文件，如果它找到任何地方的文本 NOCHECKIN。

如果您只是想测试一些东西并确保它不会被意外签入（在提交到源代码控制的所有内容的差异期间通过监视的眼睛），这将非常有用。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-12-02T20:48:49.017

`//TODO:` `//HACK:`我在我的方法上使用和的组合`throw new NotImplementedException();`来表示未完成的工作。此外，我在 Visual Studio 中为不完整的行添加了书签。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-12-02T20:46:06.137

//TODO: 人名 - 请解决这个问题。

这是在 Java 中，然后您可以查看 Eclipse 中的任务，这些任务将找到对该标记的所有引用，并且可以按人对它们进行分组，以便您可以将 TODO 分配给其他人，或者只查看您自己的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-12-02T20:48:32.140

如果我必须在更改过程中放弃所有内容，那么

```
#error finish this 
```

如果这是我以后应该做的事情，它会进入我的错误跟踪器（用于所有任务）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-02T20:48:32.997

“待办事项”评论在理论上很好，但在实践中却不是很好，至少在我的经验中是这样。如果您要被拉走足够长的时间以需要它们，那么它们往往会被遗忘。

我赞成 Jon T 的一般策略，但我通常只是暂时简单地破坏代码来做到这一点——我经常插入一个故意未定义的方法引用，让编译器提醒我需要返回的内容：

```
PutTheUpdateCodeHere(); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-12-02T20:53:23.267

我非常喜欢的一种方法是“Hack Bombing”，正如 Oren Eini[在这里](http://ayende.com/Blog/archive/2007/02/04/Hack-bombing.aspx)所展示的那样。

```
try
{
   //do stuff
   return true;
}
catch // no idea how to prevent an exception here at the moment, this make it work for now...
{
  if (DateTime.Today > new DateTime(2007, 2, 7))
    throw new InvalidOperationException("fix me already!! no catching exceptions like this!");
  return false;
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-12-02T20:46:34.763

添加一个处于禁用状态的测试。它们出现在所有构建报告中。

如果这不起作用，我会提交一个错误。

特别是，我还没有看到 TODO 评论的数量以任何有意义的方式减少。如果我写评论时没有时间做，我不知道为什么我以后会有时间。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-12-02T23:09:20.483

```
//TODO: Finish this 
```

如果您使用 VS，您可以在工具>选项>环境>任务列表下设置自己的任务标签

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-12-02T20:48:03.230

gvim 用黄色突出显示“// XXX”和“// TODO”，当我第一次用这种方式标记一些代码以提醒自己回到它时，这让我很惊讶。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2010-06-22T04:58:00.453

我是一名 C++ 程序员，但我想我的技术可以很容易地用 C# 或任何其他语言实现：

我有一个`ToDo(msg)`宏，可以扩展为在本地范围内构造一个静态对象，其构造函数输出一条日志消息。这样，当我第一次执行未完成的代码时，我会在日志输出中收到一条提醒，告诉我不能再推迟任务。

它看起来像这样：

```
class ToDo_helper
{
  public:
     ToDo_helper(const std::string& msg, const char* file, int line)
     {
       std::string header(79, '*');
       Log(LOG_WARNING) << header << '\n'
                        << "  TO DO:\n"
                        << "    Task:  " << msg << '\n'
                        << "    File:  " << file << '\n'
                        << "    Line:  " << line << '\n'
                        << header;
     }
};

#define TODO_HELPER_2(X, file, line) \
  static Error::ToDo_helper tdh##line(X, file, line)

#define TODO_HELPER_1(X, file, line) TODO_HELPER_2(X, file, line)
#define ToDo(X) TODO_HELPER_1(X, __FILE__, __LINE__) 
```

...你像这样使用它：

```
 void some_unfinished_business() {
   ToDo("Take care of unfinished business");
 } 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2010-06-22T05:07:33.333

这不是一个完美的世界，我们并不总是有无限的时间来重构或思考代码。

`//REVIEW`如果我想稍后再回来，我有时会输入代码。即代码正在工作，但也许不相信这是最好的方法。

```
// REVIEW - RP - Is this the best way to achieve x? Could we use algorithm y? 
```

同样适用`//REFACTOR`

```
// REFACTOR - should pull this method up and remove near-dupe code in XYZ.cs 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-12-02T21:27:00.033

我使用// TODO: 或// HACK: 来提醒某些事情未完成，并附上解释原因的注释。由于时间限制，我经常（读“很少”）回去完成这些事情。但是，当我查看代码时，我记录了未完成的内容，更重要的是为什么。

我经常在一天或一周结束时使用的另一条评论：

// 从这里开始 克里斯

^^^^^^^^^^^^^^^^^^^^ 告诉我我在哪里停下来，这样我就可以在星期一早上尽量减少我的引导时间。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-12-03T05:45:37.297

我将 //FIXME: xxx 用于损坏的代码，将 //CHGME: xxx 用于需要注意但有效的代码（可能仅在有限的上下文中）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-12-02T20:44:36.717

待办评论。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-12-02T21:38:30.120

```
// TODO: <explanation> 
```

如果这是我还没有开始实施并且不想忘记的事情。

```
// FIXME: <explanation> 
```

如果它是我认为不合适的东西，并且想稍后再回来或让其他人看到它。

从未想过#error/#warning 选项。这些也可以派上用场。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-12-03T15:07:20.533

这是我发现有助于标记需要解决的问题的三种不同方法。

1.  在需要查看的代码旁边放置一个注释标志。大多数编译器可以识别常见的标志并以有组织的方式显示它们。通常你的 IDE 有一个专门为这些标志设计的监视窗口。最常见的注释标志是： //TODO 你将如何使用它：

    //TODO：在发布之前修复它。这会导致访问冲突，因为它正在使用尚未创建的内存。

2.  在发布之前标记需要解决的问题的一种方法是创建一个无用的变量。如果您有未使用的变量，大多数编译器都会警告您。以下是如何使用此技术：

    int This_Is_An_Access_Violation = 0;

3.  IDE 书签。大多数产品都会提供一种在您的代码中放置书签以供将来参考的方法。这是一个好主意，只是它只能被您看到。当您共享代码时，大多数 IDE 不会共享您的书签。您可以查看 IDE 的帮助文件系统，了解如何使用它的书签功能。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-01-07T18:12:09.940

我也使用 TODO：评论。我理解他们很少真正得到修复的批评，并且最好将它们报告为错误。但是，我认为这忽略了几点：

*   当我不断重构和重新设计事物时，我最常使用它们。所以我一直在看着他们。在这种情况下，他们中的大多数实际上确实得到了解决。另外，搜索 TODO 很容易：确保我没有遗漏任何内容。

*   对于阅读您的代码的人来说，了解您认为写得不好或被破解的地方非常有帮助。如果我正在阅读不熟悉的代码，我倾向于寻找组织模式、命名约定、一致的逻辑等。如果为了权宜之计不得不违反这种一致性一两次，我宁愿看到一个说明。这样我就不会浪费时间去寻找没有逻辑的地方。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2010-06-22T04:44:37.850

如果是一些[长期的技术债务](http://blogs.construx.com/blogs/stevemcc/archive/2007/11/01/technical-debt-2.aspx)，你可以这样评论：

`// TODO: This code loan causes an annual interest rate of 7.5% developer/hour. Upfront fee as stated by the current implementation. This contract is subject of prior authorization from the DCB (Developer's Code Bank), and tariff may change without warning.`

... 呃。我想 TODO 会做到这一点，只要你不简单地忽略它们。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-02-10T14:04:58.687

正如大多数程序员在这里所做的那样，我使用 TODO 注释。此外，我使用 Eclipse 的任务界面[Mylyn](http://www.eclipse.org/mylyn/)。当任务处于活动状态时，Mylyn 会记住我打开的所有资源。这样我可以追踪

1.  在文件中我必须做某事（以及什么），
2.  我必须在哪些文件中执行此操作，以及
3.  它们与什么任务相关。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-02-10T16:55:24.017

除了关闭“TODO:”注释之外，许多 IDE 还关闭了“TASK:”注释。一些 IDE 甚至允许您配置自己的特殊标识符。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-12-18T14:55:24.217

这是我使用的临时评论标签列表：

```
//+TODO  Usual meaning.
//+H     Where I was working last time.
//+T     Temporary/test code.
//+B     Bug.
//+P     Performance issue. 
```

表示不同的优先级，例如：`//+B vs //+B+++`

好处：

*   易于从代码中搜索/删除（查找`//+`）。
*   易于按优先级过滤，例如：搜索`//+B`以找到所有错误，搜索`//+B+++`以仅获得高优先级的错误。

可用于 C++、C#、Java、...

为什么是`//+`符号？因为`+`符号看起来有点像`t`，为*暂时*的。

注意：这不是标准推荐，只是个人推荐。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-07-24T01:28:07.287

在你的代码库中散布信息量不足的 TODO 可能不是一个好主意，特别是如果你有多个贡献者随着时间的推移。这对于新手来说可能会很困惑。然而，在我看来，在实践中运作良好的是说明作者和 TODO 的编写时间，带有标题（最多 50 个字符）和更长的正文。

无论您在 TODO 评论中包含什么内容，我都建议您系统地跟踪它们。例如，有一项服务可以根据`git blame`( [http://www.tickgit.com](http://www.tickgit.com) ) 检查存储库中的 TODO 注释。

我开发了自己的命令行工具，以使用此处答案（[https://github.com/mristin/opinionated-csharp-todos](https://github.com/mristin/opinionated-csharp-todos)）中的想法来强制执行 TODO 注释的一致风格。将它集成到持续集成中相当容易，因此每次推送到主服务器时都会重新生成任务列表。

*当您在与其他人的会议中讨论TODO*时，当您想通过电子邮件共享它时，将任务列表与您的 IDE 分开也是有意义的。

# database-design - 在数据库中存储每月数据的最佳方法？

> ID：335381
> 
> 赞同：5
> 
> 时间：2008-12-02T20:43:35.503
> 
> 标签：database-design

我有一个正在更新的旧版应用程序。数据库中的几个表保存月度信息。这些表基本上每年有一行，每个月有 12 个字段。我想知道这是否是存储每月数据的最佳方式。每个月都有记录会更好吗？虽然我认为从年份的角度来看会有更多的重复，并且每个月都会附加 id，但这可能可以忽略不计。对于单一记录方法，编码似乎更容易。并不是说它有很大的不同，但我使用的是 PHP/MYSQL。

对此有最佳做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T21:15:53.097

当您考虑创建和使用数据时，每月记录更有意义。

你会宁愿：

每个月插入一行

或者

更新一行并编写代码以确定要设置的列？

你会宁愿：

SELECT sum(TotalSold) WHERE MonthColumn 介于 5 和 7 之间

或者

...我没有那么多时间... ;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-02T20:47:35.480

我认为这取决于你想对数据做什么。

如果您总是想提取一整年的数据，那么每月一个字段是有意义的。

如果您想加入月度数据（例如 SELECT total_sales *monthly.tax），那么每月一行是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-02T20:51:39.917

您是否要回答诸如“我们在 2006 年 5 月到 2008 年 11 月之间销售了多少个小工具？在这种情况下，月度记录（假设您存储月份和年份）要容易得多得多查询，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-02T20:53:37.447

我认为您应该以更规范的方式存储数据——每月一条记录。对数据的要求可能会发生变化，但您始终能够通过 SQL 语句获取必要的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T16:08:14.683

我*总是*会采用标准化的每月每行设计，除了......

有一些应用程序适合进行非规范化，特别是在关系数据集市中。如果企业对执行许多计算有浓厚的兴趣，例如“查找 1 月销售额超过 2 月销售额 10% 以上的项目”，那么非规范化数据集市将是合适的。

您可以避免这种情况，因为数据集市不是维护数据完整性的主要方法，并且不受事务更新的影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-02T20:50:19.250

更好（更规范化）将有两个表，一个用于年度数据，每年一行，一个用于每月数据，每个月一行，以及一年的列......

# actionscript-3 - 在 ActionScript (3.0) 中干净地合并两个数组？

> ID：335387
> 
> 赞同：17
> 
> 时间：2008-12-02T20:44:51.817
> 
> 标签：actionscript-3, arrays, actionscript, merge

在 ActionScript（特别是 ActionScript 3.0）中合并两个排序数组的好方法是什么？结果数组应该被排序并且没有重复。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-12-03T00:49:39.297

要合并（连接）数组，请使用`.concat()`.

下面是两个示例，说明如何连接数组并同时删除重复项。

更方便的方法：（你可以`ArrayUtil.createUniqueCopy()`从[as3corelib](http://code.google.com/p/as3corelib/)使用）

```
// from as3corelib:
import com.adobe.utils.ArrayUtil;

var a1:Array = ["a", "b", "c"];
var a2:Array = ["c", "b", "x", "y"];

var c:Array = ArrayUtil.createUniqueCopy(a1.concat(a2)); // result: ["a", "b", "c", "x", "y"] 
```

稍微快一点的方法：（您可以自己循环遍历数组并用于[`Array.indexOf()`](http://livedocs.adobe.com/flex/3/langref/Array.html#indexOf())检查重复项）

```
var a1:Array = ["a", "b", "c"];
var a2:Array = ["c", "b", "x", "y"];
var a3:Array = ["a", "x", "x", "y", "z"];

var c:Array = arrConcatUnique(a1, a2, a3); // result: ["a", "b", "c", "x", "y", "z"]

private function arrConcatUnique(...args):Array
{
    var retArr:Array = new Array();
    for each (var arg:* in args)
    {
        if (arg is Array)
        {
            for each (var value:* in arg)
            {
                if (retArr.indexOf(value) == -1)
                    retArr.push(value);
            }
        }
    }
    return retArr;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-10T19:25:45.170

This is kind of an simple algorithm to write. I would be surprised if there were a more direct way to do this in Actionscript.

```
function merge(a1:Array, a2:Array):Array {
    var result:Array = [];
    var i1:int = 0, i2:int = 0;

    while (i1 < a1.length && i2 < a2.length) {
        if (a1[i1] < a2[i2]) {
            result.push(a1[i1]);
            i1++;
        } else if (a2[i2] < a1[i1]) {
            result.push(a2[i2]);
            i2++;
        } else {
            result.push(a1[i1]);
            i1++;
            i2++;
        }
    }

    while (i1 < a1.length) result.push(a1[i1++]);
    while (i2 < a2.length) result.push(a2[i2++]);

    return result;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-05-21T09:33:18.637

如果您有一个包含大量元素的 List，使用 Array.indexOf 检测重复项将会非常缓慢；删除重复项的一种更快的方法是在连接它们之后将 Array 的内容放入[Set中。](http://en.wikipedia.org/wiki/Set_%28computer_science%29)

```
// Combine the two Arrays.
const combined : Array = a.concat(b);

// Convert them to a Set; this will knock out all duplicates.
const set : Object = {};  // use a Dictionary if combined contains complex types.

const len : uint = combined.length;
for (var i : uint = 0; i < len; i++) {
    set[combined[i]] = true;
}

// Extract all values from the Set to produce the final result.
const result : Array = [];
for (var prop : * in set) {
    result.push[prop];
} 
```

如果您的程序大量使用 Collections，那么可能谨慎使用众多 AS3 Collections 框架之一，这些框架为操作数据提供了一个简单的接口，并且在实现时始终采用最佳方法。

*   [AS3Commons 集合](https://github.com/AS3Commons/as3commons-collections)
*   [多边形 DS](http://code.google.com/p/polygonal/wiki/DataStructures)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-12-21T13:30:29.363

```
function remDuplicates(_array:Array):void{
    for (var i:int = 0; i < _array.length;++i) {
        var index:int = _array.indexOf(_array[i]);
        if (index != -1 && index != i) {
            _array.splice(i--, 1);
        }
    }
} 
```

然后对于“合并”使用 concat。例子：

```
var testArray:Array = [1, 1, 1, 5, 4, 5, 5, 4, 7, 2, 3, 3, 6, 5, 8, 5, 4, 2, 4, 5, 1, 2, 3, 65, 5, 5, 5, 5, 8, 4, 7];
var testArray2:Array = [1, 1, 1, 5, 4, 5, 5, 4, 7, 2, 3, 3, 6, 5, 8, 5, 4, 2, 4, 5, 1, 2, 3, 65, 5, 5, 5, 5, 8, 4, 7];

testArray.concat(testArray2);
trace(testArray);
remDuplicates(testArray);
trace(testArray); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-11-28T05:33:03.717

请按照以下步骤获取答案：

1.  使用“Concat”方法连接两个数组。
2.  使用作为 API 提供在 Array 类中的“Sort”方法的新数组（连接）排序
3.  制作用户定义的函数以删除重复项（参见下面的函数）
4.  > 函数 removeDuplicates(p_arr:Array):Array {

    > ```
    >  var ansArr:Array = new Array();
    >  var len:uint = p_arr.length;
    >  var i:uint = 0;
    >  var j:uint = 0;
    >  ansArr[j] = p_arr[i];
    >  i++;
    >  j++;
    >  while(i<len)
    >  {
    >     if(ansArr[j] != p_arr[i])
    >     { 
    >       ansArr[j] = p_arr[i];
    >       j++;
    >     }
    >     i++;
    >  }
    >  return ansArr; 
    > ```
    > 
    > }

返回的“ansArr”将被排序并且没有重复的两个数组的合并数组。

# python - 检测是否在 App Engine 环境中导入了模块

> ID：335399
> 
> 赞同：4
> 
> 时间：2008-12-02T20:48:08.643
> 
> 标签：python, google-app-engine

我想要做的是修补一个现有的 Python 模块，该模块使用 urllib2 在 App Engine 上运行，但我不想破坏它，以便它可以在其他地方使用。所以我正在寻找一个快速的解决方案来测试模块是否在 App Engine 环境中导入。在 urllib2 上捕获 ImportError 可能不是最好的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-02T21:13:13.867

您可以简单地使用 sys.modules 来测试是否已导入模块（我以 unicodedata 为例）：

```
>>> import sys
>>> 'unicodedata' in sys.modules
False
>>> import unicodedata
>>> 'unicodedata' in sys.modules
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T18:25:29.497

您可以对关键环境变量进行简单检查。不过，没有确切地说这可能有多可靠。

```
import os, logging
try:
  os.environ['APPENGINE_RUNTIME']
except KeyError:
  logging.warn('We are not in App Engine environment')
else:
  logging.info('We are in the App Engine environment') 
```

您还可以[在 App Engine 配置文件中定义自己的自定义环境变量，](https://developers.google.com/appengine/docs/python/config/appconfig#Defining_Environment_Variables)并且可以从`os.environ`任何模块中查看。所以，在你的 app.yaml 文件中输入类似这样的内容：

```
env_variables:
  MY_APP_ENGINE_ENVIRONMENT: '982844ed9cbd6ce42318d2804386be29cbc7c35a' 
```

...将为您提供一个明确的 ID 以供参考。

从开发服务器，这里是我得到的环境变量：

```
{'USER_EMAIL': '',
 'DATACENTER': 'us1',
 'wsgi.version': (1, 0),
 'REQUEST_ID_HASH': 'E2C19D51',
 'SERVER_NAME': 'mydesktop',
 'QUERY_STRING': '',
 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
 'APPENGINE_RUNTIME': 'python27',
 'wsgi.input': <cStringIO.StringI object at 0x2f145d0>,
 'SERVER_PROTOCOL': 'HTTP/1.1',
 'HTTPS': 'off',
 'USER_IS_ADMIN': '0',
 'TZ': 'UTC',
 'REMOTE_ADDR': '192.168.0.2',
 'HTTP_X_APPENGINE_COUNTRY': 'ZZ',
 'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.110 Safari/537.36',
 'SERVER_SOFTWARE': 'Development/2.0',
 'HTTP_CACHE_CONTROL': 'max-age=0',
 'DEFAULT_VERSION_HOSTNAME': 'mydesktop:8080',
 'SERVER_PORT': '8080',
 'wsgi.run_once': False,
 'REQUEST_METHOD': 'GET',
 'USER_ID': '',
 'AUTH_DOMAIN': 'gmail.com',
 'USER_NICKNAME': '',
 'USER_ORGANIZATION': '',
 'wsgi.multiprocess': True,
 'INSTANCE_ID': '8a8e02e6efa8d195346ae0c90cfeafce8aa2',
 'PATH_INFO': '/',
 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',
 'HTTP_HOST': 'mydesktop:8080',
 'wsgi.errors': <google.appengine.api.logservice.logservice.LogsBuffer object at 0x2f09c30>,
 'APPLICATION_ID': 'dev~myapp',
 'wsgi.multithread': True,
 'CURRENT_VERSION_ID': 'version-1',
 'SCRIPT_NAME': '',
 'REQUEST_LOG_ID': '4eafbc91ca4ebd5fee53f19eeab2eb26d243d9ddc92b6b9bc0a063eabdc84cfff',
 'wsgi.url_scheme': 'http'} 
```

希望有帮助。

# web-applications - 如何从 Java EE Web 应用程序枚举 HTTP 侦听器

> ID：335407
> 
> 赞同：0
> 
> 时间：2008-12-02T20:49:04.930
> 
> 标签：web-applications, ssl, jakarta-ee, https

我有一个带有基于 Web 的配置 UI 的 Web 应用程序。如果用户通过 HTTP 访问，我想提醒用户他们应该真正使用 HTTPS，并给他们一个链接以单击以访问以 HTTPS 为前缀的 URL。

现在，如果我们使用默认端口，这非常简单，但通常情况下，我们不是——例如，HTTP 可能在 8080 上，HTTPS 在 8181 上。我可以有一些启发式方法来确定要使用哪个端口，例如 80->443、8080->8181，但是有没有办法从 web 容器中获取端口和协议列表？理想情况下是 Java EE 标准，但即使是特定于容器的也将是一个开始......

编辑 - 一个澄清 - 这是一个“现成的”应用程序（[OpenSSO](http://opensso.org/)），所以我真的希望能够（a）让用户选择继续使用不安全的端口，如果他们*真的*想要（例如，他们在笔记本电脑上部署在没有安全端口的某个容器上）并且 (b) 不让用户编辑 server.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T01:41:54.543

您可以仅使用配置将它们自动传输到 https。

在您的 web.xml 中：

```
<user-data-constraint>
  <transport-guarantee>
    CONFIDENTIAL
  </transport-guarantee>
</user-data-constraint> 
```

在 HTTPConnector 中的 server.xml 中：

```
redirectPort="YOUR_SSL_PORT" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T12:01:35.633

如果您有负载均衡器，通常可以将其配置为自动执行这种重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T12:15:12.877

如果我正确阅读了您的问题，您可以查询[ServletRequest getProtocol](http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletRequest.html#getProtocol())以查看连接是以 HTTP 还是 HTTPS 以及什么版本进入的。作为奖励，您可以获得哪个端口。

做出决定并重定向（或转发）到应用程序指定的端口。

为了进一步澄清回答; [启用 HTTPS 通信支持](http://searchsoftwarequality.techtarget.com/expert/KnowledgebaseAnswer/0,289625,sid92_gci1236977,00.html)

# c++ - Visual Studio 在哪里寻找 C++ 头文件？

> ID：335408
> 
> 赞同：105
> 
> 时间：2008-12-02T20:49:58.827
> 
> 标签：c++, visual-studio, header

我从 SourceForge（HoboCopy，如果你好奇的话）检查了一个 C++ 应用程序的副本并尝试编译它。

Visual Studio 告诉我它找不到特定的头文件。我在源码树中找到了这个文件，但是我需要把它放在哪里，这样编译的时候才能找到呢？

有专门的目录吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2008-12-02T20:55:13.980

Visual Studio 按以下顺序查找标头：

*   在当前源目录中。
*   在项目属性的 Additional Include Directories 中（*Project* -> *[project name] Properties*，在 C/C++ | General 下）。
*   *在Tools* → *Options* → *Projects and Solutions* → *VC++ Directories*下的 Visual Studio C++ *Include 目录*中。
****   在 Visual Studio (2015+) 的新版本中，上述选项已弃用，默认包含目录列表可在*项目属性*→*配置*→ *VC++ 目录中找到****

 **在您的情况下，将标题所在的目录添加到项目属性（*Project Properties* → *Configuration* → *C/C++* → *General* → *Additional Include Directories*）。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2018-10-03T14:49:57.583

实际上，在我的带有 Visual Studio 2017 社区的 Windows 10 上，C++ 标头路径是：

1.  `C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.15.26726\include`

2.  `C:\Program Files (x86)\Windows Kits\10\Include\10.0.17134.0\ucrt`

第一个包含标准 C++ 头文件，例如`<iostream>`, `<algorithm>`. 第二个包含旧的 C 标头，例如`<stdio.h>`, `<string.h>`。版本号可能因您的软件而异。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-02T20:54:11.190

如果项目附带 Visual Studio 项目文件，那么应该已经配置为为您查找标头。如果没有，您必须将包含文件目录添加到项目设置中，方法是右键单击项目并选择属性，单击“C/C++”，然后将包含包含文件的目录添加到“附加包含目录”编辑框。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-02-25T22:48:32.917

Visual Studio 2015 社区中似乎存在一个错误。对于 64 位项目，找不到包含文件夹，除非它位于 win32 位配置的*附加包含文件夹*列表中。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-02-23T10:16:22.740

试图将此作为评论添加到[Rob Prouse](https://stackoverflow.com/users/30827/rob-prouse)的帖子中，但缺少格式使其难以理解。

在 Visual Studio 2010 中，“工具 | 选项 | 项目和解决方案 | VC++ 目录”对话框报告“工具 > 选项中的 VC++ 目录编辑已被弃用”，建议您使用相当违反直觉的属性管理器。

如果您真的非常想更新默认的 $(IncludePath)，则必须修改 XML 文件之一中的相应条目：

> \Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\PlatformToolsets\v100\Microsoft.Cpp.Win32.v100.props

或者

> \Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\PlatformToolsets\v100\Microsoft.Cpp.X64.v100.props

（可能不是微软推荐的。）

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-02-24T01:52:52.257

有一个较新的问题是什么更好地解决了这个问题，询问[包含路径在 Visual Studio 中如何工作？](https://stackoverflow.com/q/2676417/5918623)

在较新版本的 VisualStudio 中揭示了执行此操作的方法

*   **仅在当前项目中**（因为这里也设置了问题）以及
*   **默认为每个新项目**

第二个是上面史蒂夫威尔金森的答案所解释的，正如他自己认为的那样，不是微软推荐的。

在这里说捷径：做，但在用户目录中做

> C:\Users\UserName\AppData\Local\Microsoft\MSBuild\v4.0

在 XML 文件中

> Microsoft.Cpp.Win32.user.props

和/或

> Microsoft.Cpp.x64.user.props

而不是在 C:\program files - 目录中，Microsoft 未修改的 Factory-File 预计将驻留在该目录中。

然后你按照 VisualStudio 的方式进行操作，一切都很正常。

有关为什么要这样做的更多信息，请参阅我的[回答](https://stackoverflow.com/a/35591563/5918623)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-31T02:50:23.800

它在选项“cwd”中提到的目录中查找文件，您可以将所有子目录包含在一个路径下，如下所示。

*   它将创建一个输出文件。
*   它将在**cwd中指定的目录中编译所有文件**

项目结构：

模块测试

```
-header_files
    - util.h
-source_files
    - util.c
    - main.c 
```

[![在此处输入图像描述](https://i.stack.imgur.com/wbalU.png)](https://i.stack.imgur.com/wbalU.png)

# javascript - jQuery .getJSON Firefox 3 语法错误未定义

> ID：335409
> 
> 赞同：10
> 
> 时间：2008-12-02T20:50:13.727
> 
> 标签：javascript, jquery, html, json, firefox

运行此代码时，我在 Firefox 3 中遇到语法错误（未定义的第 1 行 test.js）。警报正常工作（它显示“工作”），但我不知道为什么会收到语法错误。

jQuery代码：

```
$.getJSON("json/test.js", function(data) {
    alert(data[0].test);
}); 
```

测试.js：

```
[{"test": "work"}] 
```

有任何想法吗？我正在处理一个更大的 .js 文件，但我已将其缩小到此代码。疯狂的是，如果我用远程路径替换本地文件，则没有语法错误（这是一个示例）：

[http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?](http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-11T01:48:33.570

我找到了解决该错误的方法

```
$.ajaxSetup({'beforeSend': function(xhr){
    if (xhr.overrideMimeType)
        xhr.overrideMimeType("text/plain");
    }
}); 
```

现在解释一下：在 firefox 3（我假设只有 firefox 3）中，每个 mime 类型为“text/xml”的文件都会被解析和语法检查。如果您以“[”开头的 JSON 将引发语法错误，如果以“{”开头，则会引发“格式错误”（我对“nicht wohlgeformt”的翻译）。如果我从本地脚本访问我的 json 文件-此进度中不包含任何服务器-我必须覆盖 mime-type ...也许您为该文件设置了错误的 MIME-Type ...

但是，添加这段小代码将使您免于出现错误消息

**编辑：**在 jquery 1.5.1 或更高版本中，您可以使用 mimeType 选项来实现相同的效果。要将其设置为所有请求的默认值，请使用

```
$.ajaxSetup({ mimeType: "text/plain" }); 
```

您也可以直接将它与 $.ajax 一起使用，即您的调用转换为

```
$.ajax({
    url: "json/test.js",
    dataType: "json",
    mimeType: "textPlain",
    success: function(data){
        alert(data[0].test);
    } }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-03-05T20:04:03.140

getJSON 可能坚持至少一个名称：值对。
直接数组`["item0","item1","Item2"]`是有效的 JSON，但在 getJSON 的回调函数中没有任何内容可以引用它。

在这个邮政编码的小数组中：

```
{"result":[["43001","ALEXANDRIA"],["43002","AMLIN"],["43003","ASHLEY"],["43004","BLACKLICK"],["43005","BLADENSBURG"],["43006","BRINKHAVEN"]]} 
```

...我被卡住了，直到我添加了 {"result": 标签。之后我可以参考它：

```
<script>
       $.getJSON("temp_test_json.php","",
        function(data) {
            $.each(data.result, function(i, item) {
                alert(item[0]+ " " + i);
                if (i > 4 ) return false;
              });
        });
</script> 
```

...我还发现使用 $.each() 更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-10T21:27:53.347

这听起来可能真的很愚蠢，但是将 test.js 的文件扩展名从 .js 更改为 .txt。我有同样的事情发生在完全有效的 JSON 数据文件中，除了 .txt 之外的任何扩展名（例如：.json、.i18n）。由于我更改了扩展名，因此我得到了数据并很好地使用它。

就像我说的，这听起来可能很愚蠢，但它对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-07T05:00:33.737

你好

在我的本地 PC 上测试网页时，我遇到了同样的错误，但是一旦它在托管服务器上启动，错误就不再发生。抱歉 - 我不知道原因，但认为这可能有助于其他人追查原因

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T21:02:37.243

尝试将“test.js”重命名为“test.json”，这是[Wikipedia](http://en.wikipedia.org/wiki/JSON)所说的 JSON 文件的官方扩展名。也许它在某个时候被作为 Javascript 处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T10:31:46.517

您是否尝试过禁用所有 Firefox 扩展？

我通常会在 Firebug 控制台中遇到一些由扩展引起的错误，而不是由正在访问的网站引起的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-09T01:24:04.160

检查是否有`;`结尾`test.js`。jQuery 执行`eval("(" + data + ")")`和分号会阻止 Firefox 找到右括号。并且可能还有其他一些看不见的字符阻止它这样做。

我可以告诉你为什么这个远程位置可以工作，因为它以完全不同的方式执行。由于它`jsoncallback=?`作为查询参数的一部分，jQuery 将其视为 JSONP，并实际上将其插入到`<script>`标签内的 DOM 中。尝试`"json/test.js?callback=?"`用作目标，它也可能有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-09T01:26:36.557

你在什么样的网络服务器上运行它？我曾经在 IIS 上读取 JSON 文件时遇到问题，因为它没有被定义为有效的 MIME 类型。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-09-25T20:11:45.040

尝试配置 .js 文件的内容类型。显然，Firefox 期望它是文本/纯文本。您可以像上面的 Peter Hoffmann 那样执行此操作，也可以设置内容类型标头服务器端。

这可能意味着服务器端配置更改（如 apache 的 mime.types 文件），或者如果 json 是从脚本提供的，则在脚本中设置 content-type 标头。

或者至少这似乎让我的错误消失了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-12-03T19:21:39.247

我有一个类似的问题，但正在循环一个 for 循环。我认为问题可能是索引超出范围。

*   基恩

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-16T13:06:17.370

对于不使用jQuery的人，需要[`overrideMimeType`](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#overrideMimeType%28%29)在发送请求之前调用该方法：

```
var r = new XMLHttpRequest();
r.open("GET", filepath, true);
r.overrideMimeType("text/plain"); 
```

# sharepoint - Sharepoint 计算字段函数参考

> ID：335412
> 
> 赞同：9
> 
> 时间：2008-12-02T20:51:19.277
> 
> 标签：sharepoint

是否有可用于 Sharepoint 计算字段的所有函数的明确列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-15T22:55:41.337

干得好：

[http://office.microsoft.com/en-us/sharepointtechnology/CH011711171033.aspx](http://office.microsoft.com/en-us/sharepointtechnology/CH011711171033.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T20:58:44.473

我发现的最接近的是：

数学和比较： http://office.microsoft.com/en-us/sharepointtechnology/HA011608661033.aspx?pid= [CH011711541033](http://office.microsoft.com/en-us/sharepointtechnology/HA011608661033.aspx?pid=CH011711541033)

和

公式： http://office.microsoft.com/en-us/sharepointtechnology/HA011609471033.aspx?pid= [CH011711541033](http://office.microsoft.com/en-us/sharepointtechnology/HA011609471033.aspx?pid=CH011711541033)

# tfs - 如何将 TFS 2008 CI Build 限制到项目中的特定路径

> ID：335419
> 
> 赞同：1
> 
> 时间：2008-12-02T20:52:19.010
> 
> 标签：tfs

如果您遵循 MS 推荐的一些分支策略，您可以很容易地得到一个项目结构，例如：

```
$PROJECT\
    DEV\
        MyProject
    STAGE\
        MyProject
    PROD\
        MyProject 
```

现在假设我有三个不同的构建定义。DEV、STAGE 和 PROD 各一个。考虑到构建定义将定义要构建的确切解决方案，这应该很常见。

如果我为每个人打开 CI，即使签入发生在 DEV 中，也会构建 STAGE ......

现在我的问题。如何将构建定义限制为仅在作为构建定义的一部分的路径或解决方案中发生签入时执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T22:31:04.273

定义工作文件夹配置屏幕时 - 仅从您要构建的分支的根目录开始。

例如，您的 DEV 分支将被配置为将 $/TEAMPROJECT/DEV/MyProject 映射到 $(SourceDir)，而不是仅设置为 $/TEAMROJECT 的默认映射。

仅供参考 - 就我个人而言，我只有开发分支上的 CI 构建和排队手动构建以推送到 QA。我通常也不为生产重新构建，而只是推送经过 QA 的构建二进制文件。我还保留了分支内的构建配置文件夹，即 $/TEAMPROJECT/DEV/TeamBuild 而不是默认的 $/TEAMPROJECT/TeamBuildTypes，因此对构建配置的更改也通过分支向上推送。也就是说，如果您希望构建配置对 VS2005 客户端可见，则必须坚持使用默认值。

希望有帮助，

马丁。

# c# - 关于 ASP.net 中数据源对象的问题

> ID：335420
> 
> 赞同：3
> 
> 时间：2008-12-02T20:52:31.880
> 
> 标签：c#, asp.net, gridview, datasource

在 ASP.net 应用程序中使用 DataSources 时，只有在使用 DataSet、DataTable、DataViews 时，分页和排序以及 GridView 才能开箱即用，如果您使用其他任何需要实现执行分页的方法以及从数据源。我不知道现在有多少设计可以跨层传递数据集。我是 POCO 的忠实粉丝，我特别喜欢在 WCF 中使用 DataContracts 时保持简单。

我是否遗漏了某些东西，或者期待分页和排序开箱即用，还是 MS 的人认为这不重要？DataPager 控制答案吗？

另外，如果有人能给我一个功能齐全的[gridview-对象数据源-分页和排序]教程/链接，我将不胜感激。我在网上看到的那些让我觉得你需要破解你的方式才能让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T21:13:39.170

您可能已经遇到过它们，但我发现 Scott Mitchell 的[数据访问教程](http://www.asp.net/learn/data-access)在过去非常有用。教程 #24-27 涵盖了分页和排序，他使用了 ObjectDataSource。

# c# - 何时使用 FOR-CASE（C# 中的 Foreach/switch）？

> ID：335427
> 
> 赞同：1
> 
> 时间：2008-12-02T20:55:54.713
> 
> 标签：c#, foreach, switch-statement

在我正在从事的项目中，我发现了与[FOR-CASE](http://thedailywtf.com/Articles/The_FOR-CASE_paradigm.aspx)结构类似的 C#结构：

```
foreach (string param in params.Split(';'))
{
    string[] parts = param.Split('=');
    string key = parts[0].Trim().ToLower();
    string value = parts[1].Trim();
    switch (key)
    {
        case "param1": this.param1 = value; break;
        case "param2": this.param2 = value; break;
        case "param3": this.param3 = value; break;
        case "param4": this.param4 = value; break;
        default: break;
    }
} 
```

（变量名称已更改以保护有罪者。）

您将如何实现此代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-02T21:03:01.593

我认为您问题中的代码与您链接到的代码不同。...

如果我编写命令行工具，问题中的代码看起来像是我可能会做的事情。

我因为没有看到问题中的代码有什么问题而愚蠢吗？

另一种方法是使用反射来填充参数值变量。我有时也这样做过。

顺便说一句：我曾经用一种脚本语言编写了一个程序，该程序将 switch 作为唯一的流控制机制，并且没有 gosub/return。我程序中的代码的结构有点像你链接的那个。一种指令指针变量上的大规模开关，在每种情况下都会重新分配，并且开关周围几乎是无限循环。它完成了工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-02T21:12:31.530

我看到你在你的类中已经有多个字段用于保存变量。在这种情况下，你正在做的很好。

否则，您可以使用 1 个 HashTable（也许添加到[C# 索引器](http://www.csharp-station.com/Tutorials/Lesson11.aspx)中作为一个转折点）来保存所有这些，并且您的循环将像这样结束：

```
foreach (string param in params.Split(';'))
{
    string[] parts = param.Split('=');
    string key = parts[0].Trim().ToLower();
    string value = parts[1].Trim();
    MyHashTable[key] = value;
} 
```

这种方法的问题是你应该只有一种类型的值。例如，如果您的参数列表可以同时包含 string 和 int 类型，它会使代码更加混乱，尤其是您需要执行错误检查和验证等。

我个人会坚持你已经拥有的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-02T22:00:30.637

您可以为此使用反射：

```
Type t = this.GetType();
foreach (string param in params.Split(';'))
{    
    string[] parts = param.Split('=');    
    string key = parts[0].Trim().ToLower();    
    string value = parts[1].Trim();    

    t.GetProperty(key).SetValue(this, value, null);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-02T22:11:56.603

值得一提的是，WTF 文章是 WTF，因为它的外部循环完全没有用，正如文章中所指出的 - 直接设置索引变量比循环和测试它更容易，更直接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-02T21:15:23.723

不知道我是否也明白，但听起来你让自己复杂化了。不要重新发明轮子，尽可能多地使用 BCL 类，这些类被证明可以有效地工作并为您节省大量时间。听起来您可以使用某种 Dictionary<,> 以及 Guge 建议的 Reflection 来实现它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-12T16:13:43.003

我实际上认为OP的代码很好。它并不完美——可能有更简单或更简洁的方法来做到这一点，但它有效地允许成员/属性名称和输入参数名称之间的可读映射。它使您的属性成为强类型（与 hashmap/dictionary 解决方案不同，除非您的类的所有属性只有一种类型......）并为您提供一个相当明显的位置来修复或添加映射。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2008-12-02T22:04:10.537

或正则表达式：

```
string parms = "param1=1;param2=2;param3=3";
string[] parmArr = parms.Split(';');        

string parm1 = Regex.Replace(parmArr[0], "param1=", "");
string parm2 = Regex.Replace(parmArr[1], "param2=", "");
string parm3 = Regex.Replace(parmArr[2], "param3=", ""); 
```

# apache - 如何在 Apache 2.0 中以毫秒精度为请求日志添加时间戳

> ID：335433
> 
> 赞同：4
> 
> 时间：2008-12-02T20:58:58.920
> 
> 标签：apache, timing

如何配置 Apache 2.0 的日志格式，以便它以毫秒（或微秒）精度为每个请求日志添加时间戳？[文档](http://httpd.apache.org/docs/2.0/logs.html)说时间戳以 strftime 格式指定，而strftime 似乎无法处理小于秒的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T21:26:31.813

我认为这是不可能的（至少不重写 APR）。Apache 使用[apr_strftime](https://apr.apache.org/docs/apr/2.0/group__apr__time.html#ga3f5e1aa45e735f3bcf8c13fb718c214f)。在 Unix 上，这调用 C 库的 strftime，但甚至不将毫秒填充到 struct tm 中（不足为奇，因为这个结构通常首先不支持毫秒）。Windows 版本差别不大。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-10-21T11:27:15.370

使用 %D 选项获得微秒精度

# c - 控制台应用程序离开 cmd.exe 设置大小

> ID：335448
> 
> 赞同：0
> 
> 时间：2008-12-02T21:06:30.387
> 
> 标签：c, console, cmd

我编写了一个控制台应用程序来设置控制台和输出缓冲区的大小。我的问题是程序结束后我无法像以前那样调整 cmd.exe 窗口的大小。在程序设置窗口大小后，无论我之后做什么，它都会保留该大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T21:45:41.930

它在 C# 中对我有用。

```
namespace CSharpTest
{
    class Program
    {
        static void Main(string[] args)
        {
            System.Console.WindowHeight = 50;
            System.Console.WindowWidth = 100;
            System.Console.BufferHeight = 6000;
            System.Console.BufferWidth = 100;
        }
    }
} 
```

运行程序后，我可以改变窗口的高度并使其变窄，就像以前一样。我不能让它更宽，但我以前也不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T23:58:01.820

目前尚不清楚您的意思。但是，当您更改大小时，您是否为所有 Cmd 控制台设置了默认值 - 这也会使新的 cmd 控制台也具有该大小。

我们能否提供更多关于您的意思的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:58:26.927

我相信问题是他从 cmd.exe 启动程序然后控制台的大小发生了变化。一旦退出，控制台的大小将保持程序中的设置。我建议尝试保存原始设置并在退出程序之前恢复它们。

# .net - 使以 .NET 语言编写的应用程序可以在旧机器上运行

> ID：335450
> 
> 赞同：1
> 
> 时间：2008-12-02T21:07:55.687
> 
> 标签：.net, compatibility

想知道是否有人知道如何查看需要安装 .NET 框架的哪些部分才能使某些功能在旧机器上运行。有没有一种方法可以在不安装整个 .NET 框架的情况下将它们与我的应用程序一起安装？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T21:25:44.763

You could use [Mono](http://mono-project.com), the open source implementation of the .NET framework. The Mono installer is smaller than the .NET installer. Also, Mono works with Windows versions older than XP.

With Mono you can use the [Linker](http://www.mono-project.com/Linker) to bundle only a small subset of the .NET framework, the one you need, with your application.

The downside is that Mono doesn't implement the entire .NET framework, at the moment is only compatible with the version 2.0 and parts of the 3.0\. Anyway, there is a tool called [MoMa](http://www.mono-project.com/MoMA) which tell you how compatible with Mono is your application.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T21:16:17.217

这些旧机器有多旧？看起来 .NET 2.0 可以安装在 Win98 机器上，请参阅[http://msdn.microsoft.com/en-us/library/aa480241.aspx](http://msdn.microsoft.com/en-us/library/aa480241.aspx)上的系统要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T22:53:29.953

如果有足够的时间和/或金钱，您可以从 C# 生成本机代码。我从来不需要深入研究这些，但是[Xenocode](http://www.xenocode.com/Products/Postbuild-for-NET/)和[Salamander](http://www.remotesoft.com/linker/)都可以生成本机代码，和/或将框架程序集静态链接到您的代码，以便在没有安装 FX 的情况下运行。

不过，我认为我不会轻率地承担这一点……任何不能至少运行 Windows 98 的机器都不是我想要为其编写托管代码的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-02T21:17:38.040

Well, [VMWare ThinApp](http://www.vmware.com/products/thinapp/features.html) (previously called Thinstall) *may* help you - but I've not used it myself, and I'd be somewhat wary of running .NET apps on anything other than a real .NET installation.

If you're only using part of the framework, you might be interested in the [.NET 3.5 client profile](http://download.microsoft.com/download/5/a/a/5aa86d6c-969b-42d8-bc6b-30e02bfeccf0/NETFXClientProfile_DeploymentGuide.htm) which is at least somewhat smaller than the full framework - but of course, it may not contain everything you need...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T21:11:37.973

据我所知，这是不可能的，您必须完全安装 .NET 框架运行时才能使其工作。无论如何，在我看来，试图把它拼凑起来根本不是一个好主意。

# ruby-on-rails - Ruby 独立脚本中的 RoR 环境

> ID：335451
> 
> 赞同：6
> 
> 时间：2008-12-02T21:08:29.993
> 
> 标签：ruby-on-rails, ruby, environment

我想运行一个独立的 ruby​​ 脚本，我需要在其中使用我的 RoR 环境。具体来说，我需要我的模型扩展 ActionMailer 和 ActiveRecord。我还需要从我的 database.yml 中读取数据库配置。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-02T21:18:58.303

最简单的方法是将脚本的 shebang 从：

```
#!/usr/bin/ruby 
```

到

```
#!/path/to/your/rails/script/runner 
```

等等，您的脚本将在加载完整的 rails 环境的情况下运行。您还可以运行脚本`./my_script -e production`以使其与生产数据库一起运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T06:55:25.800

查看此线程： [如何运行使用我的 Rails 模型的 Ruby 任务？](https://stackoverflow.com/questions/293302/how-do-i-run-ruby-tasks-that-use-my-rails-models)

从本质上讲，它归结为：

```
require "#{ENV['RAILS_ROOT']}/config/environment.rb" 
```

玩得开心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T15:48:29.653

我认为最好的方法是让它成为一个 rake 任务。

```
 # lib/tasks/mystuff.rake
   desc 'do my stuff'
   task :my_stuff => [:environment] do
     # do my stuff
   end 
```

[:environment] 节加载 rails 环境。

# wpf - WPF 的 MVC 框架

> ID：335455
> 
> 赞同：7
> 
> 时间：2008-12-02T21:09:39.523
> 
> 标签：wpf, model-view-controller

[除了Caliburn](http://www.codeplex.com/caliburn/)之外，还有任何可用于 WPF 的 MVC 框架（顺便说一句，看起来很棒）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-03T22:05:11.127

Caliburn 和 PRISM 都非常好。但是，如果您沿着 MVC 的道路前进，您将错过强大的 2 路绑定。考虑一下 MVVM，它是一种非常干净实用的 WPF 方法。这是 Microsoft 用于他们的表情混合的模式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-11-11T10:32:50.597

还有[Magellan](http://www.paulstovell.com/magellan)，一个用于 WPF 的 ASP.NET MVC 的端口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-02T23:31:00.063

Microsoft Pattern & Practices 有 Composite WPF aka PRISM。

[http://www.codeplex.com/CompositeWPF](http://www.codeplex.com/CompositeWPF)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-23T11:03:21.837

另一种可能性是 pureMVC (www.puremvc.org)

*   它似乎经过充分验证，具有[良好的简短文档/UML](http://puremvc.org/component/option,com_wrapper/Itemid,35/)，并且项目响应迅速，并且已移植到 .NET - 存在 WPF 演示，它将很快发布，但您也可以联系项目所有者。

问候，保罗

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-31T11:44:43.693

Gateway Programming School 的 SimpleMVC 是一个与 .net 技术（WebForms、WinForms、WPF、Xamarin Forms）一起工作的新 MVC 框架。此[链接](https://www.codeproject.com/Articles/1197973/Demystifying-and-Simplifying-MVC-Frameworks)提供概述和示例用法。

一个简短的示例是从具有您的业务逻辑的 SimpleControllerBase 创建一个控制器。这将取决于您提供的 SimpleModelBase 实现。ISimpleView 的实现是通过 WPF 页面和控件处理的。派生控制器仅适用于扩展 ISimpleView 的接口，以便抽象出 WPF 部分。然后，您可以使用视图上的属性进行双向数据绑定，就像 MVVM 一样，但具有适当的分层架构。

# ruby-on-rails - .NET MVC 是不是一定要学技术？

> ID：335460
> 
> 赞同：8
> 
> 时间：2008-12-02T21:11:46.630
> 
> 标签：ruby-on-rails, asp.net-mvc

它会继续存在，还是作为“我也是”的产品迅速推出，以响应 Rails 社区？

是否有必要通过学习曲线，框架是否会转向仅以这种方式工作，没有 Page behind 模型？

如果是这样，在哪里获取 .NET 的 MVC 必需品的最佳位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-02T21:58:23.917

我个人更喜欢 MVC，它结构更好，让我成为一个快乐的小伙子！我必须在工作中的项目中使用 MVC，因为它必须快速完成，而且我相信即使我不知道 MVC，我也可以比使用 WebForms 更快地学习并完成项目，而且我是正确的！学习了 MVC，一周完成了项目，在 Stack Overflow 的帮助下！

写完还得回去维护一些WebForms项目，扩展它们，我现在只想回到MVC！

我的个人经历。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-02T21:17:14.407

您不会被迫使用 MVC，Webforms 不会消失。但学习它仍然是一个好主意，因为它会让你更有市场；一旦您在 .Net 方面学习了 MVC，学习 Ruby on Rails 或 Spring 或 CakePHP 或其他众多[MVC 框架](http://en.wikipedia.org/wiki/Model-view-controller)中的任何一个都会容易得多。

虽然 Webforms 可能很容易学习，但 MVC 无处不在，仅出于这个原因，了解它就很有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-02T21:18:45.027

除非有人拿枪指着你，否则你不必学习 .Net MVC。但是你至少不给 MVC 一个机会，这对你自己来说是一种专业的失礼。考虑：

1.  我在 .Net MVC 上只看到好评
2.  它似乎越来越受欢迎。

我认为值得你花时间试一试。有时流行的东西流行是有原因的。:-)

对于它的价值，微软已经明确表示 .Net MVC*不会*取代网络表单。因此，您仍然需要处理网络表单。但我建议至少给 MVC 一个机会。你永远不知道，你喜欢它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-02T22:41:22.487

是的，如果您打算在 10 年后仍然开发具有竞争力的、复杂的 Web 应用程序，那么 MVC 模式是“必须学习的”。

您不一定需要了解微软对该模式的具体实现。例如，您可以使用具有相似或更好结果的[Castle Monorail 。](http://www.castleproject.org/MonoRail/)

但是，通用模式将在所有平台和语言的现代框架中普遍存在。即使您不打算立即使用 ASP.NET MVC，今天随便学习它也将有助于支付您明天使用的 The Next Big Thing(tm) 所带来的最终学习曲线。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-02T21:18:39.487

对于最后一个问题，这里[SO1已经回答了，您可以在这里](https://stackoverflow.com/questions/88763/what-is-aspnet-mvc)[SO2](https://stackoverflow.com/questions/4745/aspnet-mvc-is-it-worth-it-yet)对此进行其他解释。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-02T21:19:34.197

我不认为 MVC 是一种 .NET 技术，事实上，它不是！它已经存在了一段时间，并且有第三方提供商为 asp.net 提供了便利。微软刚刚加入了这场游戏。您应该将 MVC 作为一种良好的实践/新工具来学习，然后您可以决定在哪里以及如何将它应用到您的设计中。您当然不必按照 MVC 模式编写所有的 asp.net 应用程序（就像您不会使用单例模式编写所有类一样）。适合工作的正确工具，并且唯一可以通过查看基础知识并了解它如何满足您的需求来决定是否值得学习的人是您。

学习它的最佳方式是 Scott Guthrie 的博客：[http ://weblogs.asp.net/scottgu/](http://weblogs.asp.net/scottgu/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-02T21:55:07.480

如果您进行 WebForms 开发并且您完全可以这样做，那么您可能不会喜欢 ASP.NET MVC。

但是，如果当您知道应该对代码进行更多的 TDD 时，有时会感到痛苦，或者您觉得应该有某种方法来分离横切关注点，支持重用，将 Web 视为一个平台，只是在开发更好的代码，那么你应该看看 MVC！

在我看来，MVC 模型是一个更好的 Web 开发模型。

哦，是的，你应该看看[Stephen Walther 的博客](http://weblogs.asp.net/StephenWalther/)——太棒了！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-02T21:59:52.337

好吧，我认为这个站点是使用 MVC 开发的。所以如果这是真的，我认为这个站点证明了 MVC 是一项出色的技术。它并不适用于所有项目，但值得将其视为替代方案。我认为如果你对 SEO 和测试驱动开发很认真，你应该尝试 MVC。它处于早期阶段，但在最新版本中包含 jquery 库和其他非常简洁的功能，这表明它正在成熟。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-02T22:03:39.867

如果你不能忍受 Webforms 的工作方式，像我一样：p 去 MVC。它很棒，可以让您回到前端的基础 html 和 javascript，同时仍然拥有 .net 的强大功能。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-02T21:35:55.553

我最近遇到了很多讨厌 MVC 并且永远不会使用它的长期 Microsoft 开发人员。

一旦有关于该主题的好书，我将更多地使用它，但它绝对不是“必须使用”的技术。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-02T22:04:49.007

如果使用 ASP.NET，是的，它绝对值得。如果不是，请选择 Rails，ASP.NET MVC 对我来说仍然像 Rails'06，但它变得非常快。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-02T22:45:47.940

就像其他人说的那样，它不是一个“必须学习”的框架，但学习它并没有什么坏处。我建议尝试一下，特别是因为 MVC 框架也与 Ruby、Python 和 PHP 一起使用。

我正在学习 asp.net MVC 并且喜欢它。但是，我仍然喜欢网络表单。我认为他们都有优点和缺点。对我来说，网络表单很好，因为它们处理网页中的状态。它们还遵循在 Windows 窗体中使用的类似事件驱动模型。缺点是 HTML 输出不干净，有时难以控制并使您的页面大小大于应有的大小。MVC 很好，因为输出很干净，并且您可以完全控制 html。到目前为止，我看到的缺点是创建一个 MVC 应用程序非常容易，它会在你的视图中变成一堆 HTML 和服务器端标签意大利面条。

www.asp.net 站点有一个很好的学习asp.net mvc 的起点。

# http - Which HTTP status codes do you actually use when developing web applications?

> ID：335466
> 
> 赞同：10
> 
> 时间：2008-12-02T21:13:35.927
> 
> 标签：http, rest

The HTTP/1.1 specification ([RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)) defines a number of status codes that can be returned by HTTP server to signal certain conditions. Some of those codes can be utilized by web applications (and frameworks). Which of those codes are the most useful in practice in both classic and asynchronous (XHR) responses, in what situations you use each of them?

Which codes should be avoided, eg. should applications mess with the 5xx code range at all? What are your conventions when returning HTTP codes in REST web services? Do you ever use redirects other than 302?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-02T21:52:02.057

The ones I'm using (that I could find with a quick `grep 'Status:'` anyway):

*   **200** Successfully retrieved a resource without affecting it
*   **201** Sent whenever a form submission puts something significant into the database (forum post, user account, etc.), creating a new resource
*   **204** Sent with empty body, for example after a DELETE
*   **304** HTTP caching. I've found this one is *very* hard to get right since it has to account for users changing display settings and so on. The best idea I've come up with for that is using a hash of the user's preferences as the ETag. It doesn't help that most browsers have unpredictable and inconsistent behaviour here...
*   **400** Used for bad form submissions that fail some validation check.
*   **403** Used whenever someone is somewhere they shouldn't be (though I try to avoid that by not displaying links to stuff the users shouldn't access).
*   **404** Apart from the normal webserver ones I use these when the URL contains invalid ID numbers. I suppose it'd be a good idea to check in this case whether a higher valid ID exists and send a 410 instead...
*   **429** When user's requests are too frequents
*   **500**: I tend to put these in catch{ } blocks where the only option is to give up, to make sure something meaningful is sent to the browser.

I realise I could get away with simply letting the server send "200" for everything, but they save a lot of pain when users are seeing (or causing) errors and not telling you about them. I've already got functions to display access-denied messages and so on, so it's not much work to add these anyway.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-03T22:47:38.743

418: I'm a teapot

From [http://www.ietf.org/rfc/rfc2324.txt](http://www.ietf.org/rfc/rfc2324.txt) Hyper Text Coffee Pot Control Protocol (HTCPCP/1.0)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-29T15:24:08.537

Don't forget about 503 - Service Unavailable. This one is essential for site downtime. Especially where Search Engines are concerned.

Say you're taking the site down for a few hours for maintenance or upgrade work. By directing all requests to a friendly page that returns a 503 code, it tells spiders to "try again later".

If you simply display a "Temporarily Down" page but still return 200 OK, the spider may index your error pages or, worse, replace existing indexing with this "new" content.

This could seriously impact your SEO rankings, especially if your a large, popular site.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-02T22:08:15.300

[303 See Other](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4) is a must for [PRG](http://en.wikipedia.org/wiki/Post/Redirect/Get), which you should be using *now* if you aren't already.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-02T21:28:42.010

Here are the most common response codes, from my experience:

The response codes in the 1xx-2xx range are typically handled automatically by the underlying webserver (i.e. Apache, IIS), so you don't need to worry about those.

Codes 301 and 302 are typically used for redirects, and 304 is used a lot when the client or proxy already contains a valid copy of the data and does not need a new version from the server (see the RFC for details on exactly how this works).

Code 400 is typically used to indicate that the client sent bad or unexpected data that caused a problem in the server.

Code 403 is for performing authentication, which is again usually handled somewhat automatically by the server configuration.

Code 404 is the error code for a page not found.

Code 500 indicates an error condition in the server that is not necessarily caused by data sent from the client. For example, database connection failures, programming errors, or other unhandled exceptions.

Code 502 is typically seen if you are proxying from a webserver (such as Apache) to an app server (such as Tomcat) in the backend, and the connection cannot be made to the app server.

For asynchronous calls (i.e. AJAX/JSON responses) it's usually safest to always return a 200 response. Even if there was an error in the server while processing the request, it's best to include the error in the JSON object and let the client deal with it that way. The reason being that not all web browsers allow access to the response body for non-200 response codes.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-02T22:00:22.383

I tend to use *405 Method Not Allowed* when somebody tries to GET an URL that can only be POSTed. Anyone else does it the same way?

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-02T21:43:34.493

In [Aida/Web](http://www.aidaweb.si) framework we use just

*   200 Ok
*   302 Redirect
*   404 Not Found
*   500 Internal Server Error

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-21T19:30:01.677

I basically use all of them, where appropriate. The spec itself defines each code and the circumstances in which they should be used.

When building a RESTful web application, I don't recommend picking-and-choosing status codes, and restrict oneself to a subset of the full range. That is, unless one's building a web application for a specific HTTP client - in which case one isn't really building a web application, one's building an application for that specific client.

At my firm, we have some Flex clients. They can't properly handle status codes other than 200, so we have them send a special parameter with their requests, which tells our servers to always send a 200, even when it's not the proper response.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-02T21:59:44.570

I've had nightmares about the number 500.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-02T22:11:22.800

500 Internal Server Error is returned in Aida/Web when your web application raise an exception. Because this is a Smalltalk application, an exception window is raised on the server (if you run it headfull) while the user got 500 and a short stack.

On the server you can then open a full debugger and try to solve the problem, while the server is continuing running of course. Another nice thing is that exception window with full stack is waiting for you until you come around.

Conclusion: 500 is a blessing, not a nightmare!

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-03T16:19:29.510

I'm using 409 instead of 400 for bad user data (i.e. form submission).

The specs for 409 go on about version conflicts but it mentions that information on how to fix the issue should be sent in the response. Perfect for malformed email or wrong password messages.

400 only addresses syntax issues which to me sounds like the request just doesn't make sense at all rather then failing some regex .

* * *

## 回答 #12

> 赞同：-5
> 
> 时间：2012-12-01T15:24:02.297

I use webmachine, which automagically generates proper error codes. But there are cases when I need to supply my own. I have found it helpful for development and debugging to return 666 in those cases, so I can easily tell which ones come from my code, and which from webmachine. Besides, I get a chuckle out of it when it comes up. You do have to remember to change this before deployment for real.

# numbers - 关于 BIRT 的多个问题

> ID：335472
> 
> 赞同：3
> 
> 时间：2008-12-02T21:14:32.820
> 
> 标签：numbers, birt, page-break

我是 BIRT 的新手。

1.  我需要根据数据库值打印标题。我怎么做？
2.  如何在我报告的某个字段中出现中断时留下空白行？
3.  在页脚中，我需要说“第 X 页，共 Y”，其中 Y 是总页数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-27T14:25:38.023

1.  创建数据源后，切换到“母版页”并将有问题的字段拖到标题中。

2.  不知道。

3.  有几个可用的计算字段（称为“自动文本”）。其中之一将自身呈现为总页数。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2009-04-09T23:11:31.713

由于您是 BIRT 的新手，因此最好从[教程](http://www.eclipse.org/birt/phoenix/tutorial/)开始。阅读[常见问题解答](http://wiki.eclipse.org/BIRT/FAQ)通常也很有启发性。请务必查看[BIRT 社区资源](http://www.eclipse.org/birt/phoenix/community.php)，例如邮件列表档案等。

# c# - C# Winforms：如何获取对 Form1 设计时的引用

> ID：335481
> 
> 赞同：0
> 
> 时间：2008-12-02T21:16:57.790
> 
> 标签：c#, winforms

我有一个具有公共属性的表单

```
public bool cancelSearch = false; 
```

我还有一个类位于我的 bll（业务逻辑层）中，在这个类中我有一个方法，在这个方法中我有一个循环。我想知道如何获得识别表单的方法（这个自定义类和 form1 在同一个命名空间中）。

我只尝试过Form1。但智能感知无法识别该属性。我也尝试使用 Form f1 = winSearch.Form1.ActiveForm; 实例化表单；但这也无济于事

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-02T21:22:22.007

当您调用需要知道信息的业务逻辑时，将表单的引用传递给方法。

就像是。

```
public class MyBLClass
{
    public void DoSomething(Form1 theForm)
    {
        //You can use theForm.cancelSearch to get the value
    }
} 
```

然后从 Form1 实例调用它时

```
MyBlClass myClassInstance = new MyBlClass;
myClassInstance.DoSomething(this); 
```

**然而**

真的你不应该这样做，因为它紧密耦合数据，只需在你的 BL 类上创建一个接受参数并以这种方式使用它的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T21:22:18.403

你的问题真的不清楚。您可能想要编辑它。

## 建议

该表单不应传递给您的业务逻辑层...

# 解决您的问题

但是如果你真的想要（但它真的不是什么可做的），你需要传递参考。您可以通过在类的构造函数中传递引用或通过属性来实现。

## 带有构造函数的方法

```
public class YourClass
{
    private Form1 youFormRef;

    public YourClass(Form1 youFormRef)
    {
        this.youFormRef = youFormRef;
    }
    public void ExecuteWithCancel()
    {
        //You while loop here
            //this.youFormRef.cancelSearch...
    }
} 
```

## 具有属性的方法

```
public class YourClass
{
    private Form1 youFormRef;

    public int FormRef
    {
        set
        {
            this.youFormRef = value;
        }

        get
        {
            return this.youFormRef;
        }
    }

    public void ExecuteWithCancel()
    {
        //You while loop here
            //this.youFormRef.cancelSearch
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T21:23:48.870

我认为您应该看看如何停止工作线程。

我有一种强烈的感觉，你有一个运行业务逻辑的 Button.Click 事件处理程序和另一个设置你的 cancelSearch 变量的 Button.Click。这行不通。将运行您的业务逻辑的 GUI 线程不会看到另一个按钮被单击。如果我是对的，您应该非常使用工作线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-02T21:29:54.427

正如其他（非常快速的）响应所表明的那样，您需要有一个实例变量才能让您的智能向您展示您的需求。

默认情况下，您的应用程序没有对主表单实例的引用，如果您查看您的 program.cs 文件，您会看到表单是这样构造的......

```
Application.Run(new Form1()); 
```

所以你有几个选择，你可以创建一个全局变量 (yuck) 并编辑你的 program.cs 文件来使用它。

```
Form1 myForm =  new Form1();
Application.Run(myForm); 
```

像其他人建议的那样，从您的运行表单中传递对业务对象的引用

myBusinessObj.DoThisThing(this);

或在 Application.OpenForms 集合中找到您的表单并使用它。

# windows - 以编程方式设置 Emacs 帧大小

> ID：335487
> 
> 赞同：28
> 
> 时间：2008-12-02T21:18:50.750
> 
> 标签：windows, emacs, dot-emacs

我的 emacs（在 Windows 上）总是以设定的大小启动，这个大小相当小，如果我调整它的大小，下次启动时它不会“记住”。

我一直在玩以下游戏：

```
(set-frame-position (selected-frame) 200 2) ; pixels x y from upper left
(set-frame-size (selected-frame) 110 58) ; rows and columns w h 
```

当我在暂存缓冲区中执行它时，它完全有效。我把它放在我的 .emacs 中，虽然现在当我启动程序时，我可以看到框架临时设置为该大小，但在`*scratch*`加载时，它会再次重置为小的默认值。

谁能帮我修复上面的代码，以便它在启动时“粘住”？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-12-02T21:30:27.187

这是我在我的`~/.emacs`：

```
(add-to-list 'default-frame-alist '(left . 0))
(add-to-list 'default-frame-alist '(top . 0))
(add-to-list 'default-frame-alist '(height . 50))
(add-to-list 'default-frame-alist '(width . 155)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T10:34:33.460

```
(setq initial-frame-alist '(
            (top . 40) (left . 10)
            (width . 128) (height . 68)
            )
  ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-02T21:27:51.123

你试过这个吗：emacs -geometry 110x58+200+2 &

发现于：

[http://web.mit.edu/answers/emacs/emacs_window_size.64R.html](http://web.mit.edu/answers/emacs/emacs_window_size.64R.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-11-19T14:20:42.403

之前发布的解决方案都无法解决我的大小调整问题，所以我想我会分享一个额外的解决方案：在启动时，Emacs 23 使用某种字体，然后切换到用户定义的字体；因此，如果这个字体很大，Emacs 也会*减小窗口大小*以适应屏幕。然后，应用用户字体，窗口可能看起来比用户想要的要小。因此，在我的 ~/.Xresource 中添加以下内容解决了这个问题：

```
Emacs.font: -*-fixed-*-*-*-*-8-*-*-*-*-*-*-*
Emacs.pane.menubar.*.fontList: 8x16
Emacs.menu*.fontList:         -*-fixed-*-*-*-*-8-*-*-*-*-*-*-*
Emacs.dialog*.fontList:        -*-fixed-*-*-*-*-8-*-*-*-*-*-*-* 
```

这使得 Emacs 在启动时使用小字体，这样它的窗口就不会太大，也不会被截断。当然，您可能想在此处或在 Emacs 初始化文件中自定义您想要的字体。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-08-18T19:09:55.583

在 Emacs 19 和 21 之间，我曾经有一个完美运行的 .emacs，通过区分默认帧和初始帧，它完全符合您的要求：

```
 (setq default-frame-alist '((foreground-color . "LightGray")
                  (background-color . "Black")
                  (cursor-color . "Medium Sea Green")
                  (width . 80)
                  (height . 36)
                  (menu-bar-lines . 1)
                  (vertical-scroll-bars . right))) 
```

和

```
 (setq initial-frame-alist
                (cons '(width . 96)
                      (cons '(height . 72)
                        (cons '(menu-bar-lines . 1)
                          initial-frame-alist)))) 
```

唉，当我“升级”到 Emacs 23.2 时，上述内容不再完全。Emacs 不是我的职业。我将它用作工具，所以我不能花太多时间去研究为什么。所以我只是通过添加到 Emacs Windows XP 快捷方式“-geometry 96x72”来解决这个问题。所以快捷方式目标现在看起来：

```
C:\emacs-23.2\bin\runemacs.exe -geometry 96x72 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-02T21:39:20.320

对于windows上的emacs，我一般是放在注册表中的。

```
HKCU\Software\GNU\Emacs\
    Emacs.Geometry REG_SZ "245x74" 
```

（这将机器本地设置保留在我与许多其他机器共享的 .emacs 文件之外......）

# c++ - 您如何找到程序中优化程度最低的部分？

> ID：335494
> 
> 赞同：3
> 
> 时间：2008-12-02T21:20:38.237
> 
> 标签：c++, visual-studio, optimization, profiler

是否有任何工具可以给出程序大部分执行时间花费在哪里的某种直方图？

这是针对在 Visual Studio 2008 中使用 C++ 的项目。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-02T21:24:22.863

你所追求的名字是**profiler**。尝试[使用 Visual Studio Profiler 查找应用程序瓶颈](http://msdn.microsoft.com/en-gb/magazine/cc337887.aspx?pr=blog)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-02T21:28:39.233

你需要一个[分析器](http://en.wikipedia.org/wiki/Profiler_(computer_science))。

Visual Studio Team 版本包括一个分析器（这是您正在寻找的），但您可能只能访问 Professional 或 Express 版本。看看这些线程的替代方案：

[你最喜欢的分析工具是什么（用于 C++）](https://stackoverflow.com/questions/26663/whats-your-favorite-profiling-tool-for-c) [Windows 上的原生 C++ 有哪些好的分析器？](https://stackoverflow.com/questions/153559/what-are-some-good-profilers-for-native-c-on-windows)

你真的不应该优化应用程序的任何部分，直到你测量了它们需要多长时间才能运行。否则，你可能会把努力导向错误的地方，你可能会让事情变得更糟，而不是更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T15:17:48.373

我使用了一个名为“AQ Time”的分析器，它提供了你想知道的关于代码性能的每一个细节。虽然不是免费的。。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-19T20:20:11.540

你可以得到程序计数器的直方图，但它实际上是没有用的，除非你在做一些愚蠢的事情，比如花时间在一个大整数或双精度数组的气泡中。

如果您对字符串数组进行冒泡排序这样简单的操作，PC 直方图只会告诉您在字符串比较例程中有一个热点。这没什么帮助，是吗？

我知道你不会做这样的冒泡排序，但只是为了好玩，让我们假设你做了，它占用了你 90% 的时间。（即，如果你修复它，它可能会快 10 倍。）

这实际上是一件很容易找到的事情，因为如果您只是在调试器中点击暂停按钮，您几乎肯定会看到它在字符串比较例程中停止。然后，如果您将堆栈查找一层，您将直接查看冒泡排序循环，这是您的错误。如果你不确定你是否真的发现了问题，只需暂停几次。你看到这个问题的次数告诉你它的代价有多大。

*在多次*暂停时出现在调用堆栈上的任何代码行都是在请求您修复它。有些你不能，比如“call _main”，但如果可以的话，你会得到很好的加速，保证。

[然后再做一次，一次又一次。](https://stackoverflow.com/questions/926266/performance-optimization-strategies-of-last-resort/927773#927773)

当你用完了你可以修复的东西时，你就真的在程序的生命周期内调整了程序。

就是这么简单。

* * *

您还可以在 Visual Studio 中使用探查器。这是一个不错的工具，但请注意以下缺点：

*   将您与“专属时间”混淆，如果您专注于行级信息，那几乎是没有意义的。

*   如果您的程序正在浪费时间进行 I/O，它不会看到这一点，因为当它停止执行 I/O 时，样本会停止，除非您使用插装。

*   但是，如果您使用仪器，您将不会获得行级信息，而只会获得功能级信息。如果您的功能都很小，那没关系。

*   让您与“调用树”混淆。对于一行代码来说，重要的是它有多少堆栈样本。如果它位于调用树的许多分支中，调用树不会显示它的实际成本。

*   如果它告诉你一条线路很昂贵，它不能告诉你为什么。为此，您希望根据需要查看每个样本的尽可能多的状态信息，而不仅仅是摘要。

*   很难说你什么时候想做样品，什么时候不想做。您希望它在您等待应用程序时进行采样，而不是在它等待您时进行采样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T15:32:01.247

所以现在你知道你需要一个分析器，你可能没有 Visual Studio 一个，所以[非常昏昏欲睡](http://www.codersnotes.com/sleepy/)可能会有所帮助。

# .net - 是否有将 CIL 编译为二进制文件的工具？

> ID：335499
> 
> 赞同：3
> 
> 时间：2008-12-02T21:21:43.367
> 
> 标签：.net, binary, cil

在看到之前的一篇文章“[让使用 .NET 语言编写的应用程序在旧机器上运行](https://stackoverflow.com/questions/335450/making-applications-programmed-in-net-languages-work-on-older-machines)”之后，我不得不怀疑；

是否有将 CIL 编译为二进制文件的工具？

如果是这样，如果您不希望用户需要 .NET 框架，您可以将 CIL 文件转换为本机 Windows 应用程序吗？甚至从 .NET 瞄准 linux 平台！那将是真棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T00:23:05.340

MS 提供了一个名为[NGEN](http://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx)的免费实用程序，它可以从您的 .NET 程序集创建本机 Windows 可执行文件。

但请注意，CLR 仍要求您的程序集可用于在本机映像失效的情况下进行回退，这可能由于多种原因而发生。而且 NGEN 并没有消除您的最终用户安装 .NET Framework 的必要性。最后，NGEN 可以改变应用程序的性能配置文件，但并不总是变得更好。

[VMWare ThinApp](http://www.vmware.com/products/thinapp/) （以前称为 Thinstall）等实用程序将创建包含您的应用程序和 .NET Framework 相关部分的本机二进制文件。这可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T21:29:48.810

看看这个：http: [//msdn.microsoft.com/en-us/library/6t9t5wcf.aspx](http://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx)

这个：[http ://www.xenocode.com/Products/Postbuild-for-NET/?AdGroup=Linking&gclid=CNGCo-7zopcCFSYMDQod0giG_A](http://www.xenocode.com/Products/Postbuild-for-NET/?AdGroup=Linking&gclid=CNGCo-7zopcCFSYMDQod0giG_A)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T21:28:12.870

[Lego.NET](http://www.dcl.hpi.uni-potsdam.de/research/lego.NET/release.htm)可以创建本机二进制文件，但仍然相当有限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T22:25:56.107

有一些工具可以做到这一点，但它们基本上将整个 .NET 框架与您的二进制文件打包在一起，正如您可以想象的那样，这会导致相当大的膨胀。

如今，要求人们安装 .NET 已经不是什么大问题了。MS 甚至提供了一个 MSI 包，您可以将其包含在您自己的安装程序中，以便在他们安装您的程序时选择它。

# powershell - exchange powershell : finding the active directory office property

> ID：335514
> 
> 赞同：0
> 
> 时间：2008-12-02T21:26:33.950
> 
> 标签：powershell, active-directory, exchange-server-2007

I wrote this small script to pull the office property from get-user by piping the exchange mailbox object.

```
$server = "tms08"
$arrUser = get-mailbox -Server $server |Get-MailboxStatistics |select identity
foreach ( $id in $arrUuser)
{
    $office = get-user -Identity $id.Identity |select office
    $out += $id.Identity 
}
$out 
```

I don't get any output or red errors. just the warning:

> WARNING:There is no data to return for the specifed mailbox 'Globe/MobileElect Usertemplate', because it has not been logged on to. WARNING:By default only the first 1000 items are returned. To change the number of items returned, specify the parameter "-ResultSize". To return all items specify "-ResultSize Unilimited" (Note: REturning all items maytake a long time and consume a large amount of memory depending on the actual number of items). It is not recommended to store the results in a variable; instead pipe the results to another task or script to perform batch changes.

Any ideas on what might be causing this?

My goal is to develop a script which executes once a day via scheduled task which compiles all mailbox names, mailbox sizes, totalitems, totaldeleted items, along with their office and description fields (from active directory).

I'm guessing the get-qaduser is part of the quest powershell addon. I'll install it locally and give it a try..

the identiy property seems to give a number similar to the guid which looks like 1234as01-4f54-1234-b1df-f1df1df12d2d

I tried running

```
get-user -identity 1234as01-4f54-1234-b1df-f1df1df12d2d 
```

and it found a name (joey blasio) and recipient type (usermailbox)

then i ran

```
get-user -Identity 1234as01-4f54-1234-b1df-f1df1df12d2d | select displayname, distinguistedname 
```

> Displayname (Joey Blasio ) and DistinguishedName (CN=Joey Blasio,OU=EWE,DC=BLA-1,DC=net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-02T22:28:53.340

我认为问题在于您正在访问一个从未正常访问过的邮箱。您可以使用您知道所有者已打开并使用过的邮箱尝试此操作吗？还是已经是这样了？

另外，由于我目前无法访问我的 Exchange 机器，您能否告诉我 Identity 属性包含的内容？我绝对肯定在 Exchange 中使用类似`Get-QADUser`vs.的 cmdlet`Get-User`最终会给您带来更多的满足感。我们只需要将正确的属性与可以消费`Get-MailboxStatistics`的东西进行网格化`Get-QADUser`，这样它就可以为您提供正确的用户。

了解你的最终目标可能也有点帮助——可能有一种完全不同的方法可以让你到达你想去的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T00:25:59.827

它是由`DisplayName`

```
$exchangeservers = Get-MailboxServer
$AllUsers = @()
$AllUsersEmail = @()

foreach ($server in $exchangeservers)
{
    $AllUsers += Get-Mailbox -Server $server |Get-MailboxStatistics |select servername,displayname,itemcount,totalitemsize
}

foreach ($user in $AllUsers)
{
    $obj = new-object psObject
    $mailinfo = get-mailbox -identity $user.displayname |select PrimarySMTPAddress,Office, DistinguishedName
    $tmp = [adsi]("LDAP://" +  $mailinfo.DistinguishedName)

    $obj |Add-Member -MemberType noteproperty -Name "Server Name" -Value $user.ServerName
    $obj |Add-Member -MemberType noteproperty -Name "Display Name" -Value $user.DisplayName
    $obj |Add-Member -MemberType noteproperty -Name "Item Count" -Value $user.ItemCount
    $obj |Add-Member -MemberType noteproperty -Name "Total Item Size" -Value $user.TotalItemSize
    $obj |Add-Member -MemberType noteproperty -Name "Email Address" -Value $mailinfo.PrimarySMTPAddress
    $obj |Add-Member -MemberType noteproperty -Name "Office" -Value $mailinfo.Office
    $obj |Add-Member -MemberType noteproperty -Name "Description" -Value $tmp.description

    $AllUsersEmail += $obj
}

$AllUsersEmail |Export-Csv c:\test.csv -NoTypeInformation 
```

# javascript - 简单的 JavaScript 问题：onClick 确认不阻止默认操作

> ID：335516
> 
> 赞同：50
> 
> 时间：2008-12-02T21:27:16.070
> 
> 标签：javascript, html

我正在制作一个带有 onClick 事件的简单删除链接，该事件会弹出一个确认对话框。我想确认用户想要删除一个条目。但是，似乎当在对话框中单击“取消”时，默认操作（即 href 链接）仍在发生，因此该条目仍然被删除。不知道我在这里做错了什么......任何输入将不胜感激。

编辑：实际上，现在的代码方式，页面甚至没有进行函数调用......所以，根本没有对话框出现。我确实有 onClick 代码：

```
onClick="confirm('Delete entry?')" 
```

这确实带来了一个对话框，但仍将转到取消链接。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core_rt"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt_rt"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

<script type="text/javascript">

function delete() {
    return confirm('Delete entry?')
}

</script>

...

<tr>
 <c:if test="${userIDRO}">
    <td>
        <a href="showSkill.htm?row=<c:out value="${skill.employeeSkillId}"/>" />
        <img src="images/edit.GIF" ALT="Edit this skill." border="1"/></a>
    </td>
    <td>
        <a href="showSkill.htm?row=<c:out value="${skill.employeeSkillId}&remove=1"/>" onClick="return delete()"/>
        <img src="images/remove.GIF" ALT="Remove this skill." border="1"/></a>
    </td>
 </c:if>
</tr> 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2008-12-02T21:40:29.397

您的代码中有错字（标签**a**关闭得太早）。您可以使用：

```
<a href="whatever" onclick="return confirm('are you sure?')"><img ...></a> 
```

注意**返回（确认）**：内部事件中脚本返回的值决定是否运行默认浏览器操作；如果您需要运行一大段代码，您当然可以调用另一个函数：

```
<script type="text/javascript">
function confirm_delete() {
  return confirm('are you sure?');
}
</script>
...
<a href="whatever" onclick="return confirm_delete()"><img ...></a> 
```

（注意 delete 是一个关键字）

为了完整性：现代浏览器还支持 DOM 事件，允许您为每个对象上的同一事件注册多个处理程序、访问事件的详细信息、停止传播等等；请参阅[DOM 事件](http://en.wikipedia.org/wiki/DOM_Events)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-03-03T16:42:30.087

好吧，我曾经遇到过同样的问题，在确认之前添加“ **return ”这个词就解决了这个问题：**

```
onclick="return confirm('Delete entry?')" 
```

我希望这对你有帮助..

祝你好运！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-02T21:37:02.913

我用这个，就像一个魅力。无需任何功能，只需内联您的链接

```
onclick="javascript:return confirm('Are you sure you want to delete this comment?')" 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-02-08T13:42:39.173

我有类似的问题（点击按钮，但在取消点击后它仍然删除我的对象），所以以这种方式制作，希望它对未来的人有所帮助：

```
 $('.deleteObject').click(function () {
    var url = this.href;
    var confirmText = "Are you sure you want to delete this object?";
    if(confirm(confirmText)) {
        $.ajax({
            type:"POST",
            url:url,
            success:function () {
            // Here goes something...
            },
        });
    }
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-12-02T21:37:47.907

对我来说，对删除记录等操作使用简单的链接看起来很危险：如果爬虫试图索引您的页面怎么办？它会忽略任何 javascript 并跟踪每个链接，这可能不是一件好事。

您最好使用带有method="POST" 的表单。

然后你将有一个事件“OnSubmit”来做你想做的事......

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-12-02T21:37:38.950

首先，**delete**是 javascript 中的[保留字](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Reserved_Words)，我很惊讶这甚至会为你执行（当我在 Firefox 中测试它时，我得到一个语法错误）

其次，您的 HTML 看起来很奇怪 - 您是否有理由关闭打开的锚标记`/>`而不是 just `>`？

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-10-17T16:32:06.767

```
<img src="images/delete.png" onclick="return confirm_delete('Are you sure?')"> 

<script type="text/javascript">
function confirm_delete(question) {

  if(confirm(question)){

     alert("Action to delete");

  }else{
    return false;  
  }

}
</script> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-10-31T13:16:43.147

如果你想在 onclick 标记中使用小的内联命令，你可以使用这样的东西。

`<button id="" class="delete" onclick="javascript:if(confirm('Are you sure you want to delete this entry?')){jQuery(this).parent().remove(); return false;}" type="button"> Delete </button>`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-17T15:25:34.533

试试这个：

```
OnClientClick='return (confirm("Are you sure you want to delete this comment?"));' 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-12-02T21:38:29.277

我之前遇到过 IE7 的问题并返回 false。

在这里查看我对另一个问题的回答：[Javascript not running on IE](https://stackoverflow.com/questions/257085/javascript-not-running-on-ie#257097)

# c# - 字典 API（词法）

> ID：335517
> 
> 赞同：18
> 
> 时间：2008-12-02T21:27:30.577
> 
> 标签：c#, .net, api

有谁知道一个好的 .NET 字典 API？我对含义不感兴趣，而是需要能够以多种不同方式查询单词——返回 x 长度的单词、返回部分匹配等等......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-02T21:39:33.673

从像 ASpell ( [http://aspell.net/](http://aspell.net/) ) 这样的开源拼写检查器中获取平面文本文件，并将其加载到列表或您喜欢的任何结构中。

例如，

```
List<string> words = System.IO.File.ReadAllText("MyWords.txt").Split(new string[]{Environment.NewLine}).ToList();

// C# 3.0 (LINQ) example:

    // get all words of length 5:
    from word in words where word.length==5 select word

    // get partial matches on "foo"
    from word in words where word.Contains("foo") select word

// C# 2.0 example:

    // get all words of length 5:
    words.FindAll(delegate(string s) { return s.Length == 5; });

    // get partial matches on "foo"
    words.FindAll(delegate(string s) { return s.Contains("foo"); }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-02T21:35:15.617

您可能想寻找一个[Trie](http://en.wikipedia.org/wiki/Trie)实现。这肯定有助于“以 XYZ 开头的单词”以及完全匹配。您可能希望将所有数据存储在多个数据结构中，每个数据结构都针对特定任务进行了调整 - 例如，一个用于字谜，一个用于“按长度”等。如今，自然语言词典与 RAM 相比相对较小，所以如果你真的想要快速查找，这可能是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-02T22:32:50.273

根据您的查询涉及的程度，可能值得研究[WordNet](http://wordnet.princeton.edu/)，它基本上是一个语义词典。它包括词性、同义词和单词之间的其他类型的关系。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-03T04:49:27.410

NetSpell ( [http://www.loresoft.com/netspell/](http://www.loresoft.com/netspell/) ) 是一个用 .NET 编写的拼写检查器，它有多种语言的单词列表供您使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-03T14:20:30.440

我和[Barry Fandango](https://stackoverflow.com/questions/335517/a-dictionary-api-for-c#335563)一起讨论这个问题，但你可以在没有 LINQ 的情况下做到这一点。.NET 2.0 在 List(T) 类型上有一些不错的过滤方法。我建议的一个是

```
List(T).FindAll(Predicate(T)) : List(T) 
```

此方法将通过谓词方法将列表中的每个元素放入列表中，并返回返回“true”的单词列表。因此，按照开源词典的建议将您的单词加载到 List(String) 中。要查找所有长度为 5 的单词...

```
List(String) words = LoadFromDictionary();
List(String) fiveLetterWords = words.FindAll(delegate(String word)
    {
        return word.Length == 5;
    }); 
```

或者对于所有以'abc'开头的单词......

```
List(String) words = LoadFromDictionary();
List(String) abcWords = words.FindAll(delegate(String word)
    {
        return word.StartsWith('abc');
    }); 
```

# .net - 在 SQL Server 2005 存储过程中使用 .NET Framework 3.5

> ID：335524
> 
> 赞同：3
> 
> 时间：2008-12-02T21:28:50.870
> 
> 标签：.net, sql-server-2005, .net-3.5, stored-procedures, clr

我有一个 SQL Server 2005 服务器，我想在它上面运行一个 .Net CLR 存储过程。但是，我想使用 .NET Framework 3.5。

如果我现在尝试这个，我会收到这个错误：

```
Error: Assembly 'system.core, version=3.5.0.0, culture=neutral, publickeytoken=b77a5c561934e089.' was not found in the SQL catalog. 
```

我听说这在 SQL Server 2008 中是可能的，因为 SQL Server 2008 附带 .NET Framework 3.5。但是，我想知道是否有办法将 .NET Framework 3.5 添加到我的 SQL Server 2005 安装中，以便我可以在其上运行 .NET 3.5 存储过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T21:34:54.900

这可能是一个愚蠢的问题，但是...如果找不到 system.core，您是否在数据库服务器上安装了框架 3.5？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-24T18:37:42.380

google + 试错的结果

```
EXEC dbo.sp_changedbowner @loginame = N'sa', @map = true
GO
sp_configure 'clr enabled', 1
GO
RECONFIGURE
GO
ALTER DATABASE [MyDB] SET TRUSTWORTHY ON
GO
CREATE ASSEMBLY [System.Core]
AUTHORIZATION [dbo]
FROM 
'C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Core.dll'
WITH PERMISSION_SET = UNSAFE
GO 
```

**网站**：

*   [使用 sql server clr 集成部分 iv 部署到 sql server 2005](http://weblogs.asp.net/paulomorgado/archive/2009/06/13/playing-with-sql-server-clr-integration-part-iv-deploying-to-sql-server-2005.aspx)
*   [The-database-owner-SID-recorded-in-the-master-database-differs-from-the-database-owner-SID-recorded-in-database-DatabaseName](http://blog.scoftware.com/post/2009/06/05/The-database-owner-SID-recorded-in-the-master-database-differs-from-the-database-owner-SID-recorded-in-database-DatabaseName.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T00:32:38.660

[这个线程](http://forums.microsoft.com/technet/showpost.aspx?postid=2639225&siteid=17)可能对你有帮助。

# lookup - Lookup table size reduction

> ID：335525
> 
> 赞同：2
> 
> 时间：2008-12-02T21:29:04.740
> 
> 标签：lookup, reduction

I have an application in which I have to store a couple of millions of integers, I have to store them in a Look up table, obviously I cannot store such amount of data in memory and in my requirements I am very limited I have to store the data in an embebedded system so I am very limited in the space, so I would like to ask you about recommended methods that I can use for the reduction of the look up table. I cannot use function approximation such as neural networks, the values needs to be in a table. The range of the integers is not known at the moment. When I say integers I mean a 32 bit value.

Basically the idea is use some copmpression method to reduce the amount of memory but without losing many precision. This thing needs to run in hardware so the computation overhead cannot be very high.

In my algorithm I have to access to one value of the table do some operations with it and after update the value. In the end what I should have is a function which I pass an index to it and then I get a value, and after I have to use another function to write a value in the table.

I found one called tile coding [http://www.cs.ualberta.ca/~sutton/book/8/node6.html](http://www.cs.ualberta.ca/~sutton/book/8/node6.html), this one is based on several look up tables, does anyone know any other method?.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T22:08:08.453

我会查看您需要存储的数字类型，并提取其中许多常见的信息。例如，如果它们紧密聚集，您可以取平均值、存储它并存储偏移量。偏移量的位数将少于原始数字。或者，如果它们或多或少均匀分布，您可以存储第一个数字，然后将偏移量存储到下一个数字。

知道查找数字的关键是什么会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T22:05:41.530

我需要更多关于这个问题的细节。如果您不能存储整数的实际值而是一个近似值，这意味着您将减少（丢弃）一些数据（细节），对吗？我认为您正在寻找哈希，它本身就是一种艺术形式。例如，假设您有 32 位值，一个哈希是取 4 个字节并将它们异或在一起，这将产生一个 8 位值，将您的存储量减少 4 倍，但也减少了原始数据的实际值. 通常你可以/会走得更远，也许只使用这 8 位中的几个，比如较低的 4 位，并进一步降低该值。

我认为我真正的问题是要么你需要数据，要么你不需要，如果你需要数据，你需要压缩它或找到更多的内存来存储它。如果你不这样做，那么使用某种散列来减少位数，直到你达到你有存储的内存量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T22:23:04.040

阅读[http://www.cs.ualberta.ca/~sutton/RL-FAQ.html](http://www.cs.ualberta.ca/~sutton/RL-FAQ.html)

> “函数逼近”是指使用参数化函数形式来表示价值函数（和/或策略），而不是简单的表格。”

也许这适用。此外，用其他事实更新您的问题——不要仅仅在评论中回答。

* * *

编辑。

位数组可以轻松地为数百万个数字中的每一个存储一个位。假设您的数字在 1 到 800 万之间。在单个兆字节的存储空间中，您的集合中的每个数字都可以有一个位，而您集合中的每个数字都可以有一个 0。

如果您的数字在 1 到 3200 万之间，则需要 4Mb 的内存来存储所有 32M 不同数字的大表。

[看到我对Python 中现代、高性能布隆过滤器的](https://stackoverflow.com/questions/311202/modern-high-performance-bloom-filter-in-python#311360)回答了吗？用于无限大小的位数组的 Python 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T22:40:47.577

如果您只是在寻找存在问题的数字[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)，可能就是您正在寻找的东西。老实说，尽管您的问题相当模糊和令人困惑。这将有助于解释 Q 值是什么，以及在表格中找到它们后如何处理它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-16T02:45:01.243

如果您的整数集是同质的，那么您可以尝试使用哈希表，因为在您的情况下，您可以使用一个技巧将存储的整数的大小减半。假设整数 n，因为它的集合是齐次的，所以可以是散列。假设您有 0x10000 (16k) 个存储桶。每个桶的索引，iBucket = n&FFFF。桶中的每个项目只需要存储 16 位，因为前 16 位是桶索引。为了保持数据较小，您必须做的另一件事是将项目计数放入存储桶中，并使用数组来保存存储桶中的项目。使用链表会太大而且太慢。当您迭代数组以寻找匹配项时，请记住您只需要比较存储的 16 位。

所以假设一个桶是一个指向数组的指针和一个计数。在 32 位系统上，最大为 64 位。如果整数的数量足够小，我们也许可以做一些花哨的事情并使用 32 位作为存储桶。16k * 8 字节 = 524k，200 万条短片 = 4mb。因此，这为您提供了一种查找整数和大约 40% 压缩率的方法。

# delphi - 在 Delphi 中滚动时查看 DBGrid 中的位置

> ID：335526
> 
> 赞同：1
> 
> 时间：2008-12-02T21:29:04.943
> 
> 标签：delphi, scroll, dbgrid

我在表单上有一个 DBGrid。DBGrid 有很多列，因此会显示一个水平滚动条。我向右滚动 DBGrid 视图以查看更多列。如果我选择一行，DBGrid 视图会自动重置以查看第一列（就像我滚动回最左边的位置一样）。

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-03T07:17:31.930

我假设您在网格选项中有*goRowSelect 。*这会强制选定的列成为第一个非固定列，因此每当行更改代码以将选定单元格滚动到视图中时，都会强制第一个非固定列可见。

由于*goRowSelect*还有效地禁用了使用键盘的水平滚动，因此我尝试在没有它的情况下生活。您可以使用网格单元格的自定义绘图来显示当前行的所有单元格，并为选定的单元格显示正确的颜色，即使只有一个单元格被真正选中。我也使用它来根据网格是否聚焦来显示不同的颜色，类似于标准树控件的作用。但是，要使其正常工作，您不仅需要处理网格单元格导航事件，还需要处理一些其他事件，例如网格的*OnEnter*和*OnExit 、应用程序的**OnActivate*和*OnDeactivate*等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T01:30:59.573

您也许可以询问滚动条的位置

```
GetScrollInfo(Self.Handle, SB_VERT, SIOld); 
```

并用于`SetScrollInfo( )`将其放回原处。可能有更好的方法。`SelectedField`是另一种方式（根据需要获取/设置它）。

# ruby - 您如何检测到 Ruby 中发生了猴子补丁？

> ID：335530
> 
> 赞同：8
> 
> 时间：2008-12-02T21:30:44.613
> 
> 标签：ruby, metaprogramming

您如何检查是否已对 Ruby 中的特定类进行了猴子修补？如果可能的话，是否也可以获得已修补的属性的先前实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-02T23:14:22.967

有钩子`method_added`和`method_undefined`。Garry Dolley 编写了一个 I[不可变模块](http://scie.nti.st/2008/9/17/making-methods-immutable-in-ruby)来防止猴子修补。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T05:40:21.207

我发现这篇博客文章涉及如何使用 method_add 来跟踪猴子补丁。扩展它以跟踪已修补的方法并不难。

[http://hedonismbot.wordpress.com/2008/11/27/monkey-business-2/](http://hedonismbot.wordpress.com/2008/11/27/monkey-business-2/)：

> 通过使用开放类，我们可以为 Class 的实例重新定义 method_add ，并在每次为任何类定义方法时做一些自定义的事情。在此示例中，我们重新定义了 method_add 以便它跟踪上次定义该方法的位置。
> 
> ```
> #!/usr/bin/env ruby                                                                                                                                                           
> 
> class Class
>     @@method_history = {}
> 
>     def self.method_history
>         return @@method_history
>     end
> 
>    def method_added(method_name)
>        puts "#{method_name} added to #{self}"
>        @@method_history[self] ||= {}
>        @@method_history[self][method_name] = caller
>    end
> 
>    def method_defined_in(method_name)
>        return @@method_history[self][method_name]
>    end
> end 
> ```

# javascript - if statement inside a variable

> ID：335531
> 
> 赞同：5
> 
> 时间：2008-12-02T21:31:03.193
> 
> 标签：javascript, variables, navigation

I am building a conditional navigation menu that has 3 levels (the 3rd level added today by business, no worries its not like I launch next week. Oh wait I do:)). I have a javascript var that contains the html for my first conditional level. I am now trying to insert another level inside of the first.

```
var myVar = '<ul class="linksUnit">';
var myVar += '<li>Link 1</li>';
var myVar += if (myVar2 != false) {document.write("Link 2")};
var myVar += '</ul>'; 
```

Any help would be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-02T21:36:03.977

You should write that this way (knowing little javascript myself, but i think this is right):

```
var myVar  = '<ul class="linksUnit">';
myVar     += '<li>Link 1';
if (myVar2) { // note != false means true
    // insert a nested unordered list
    myVar += '<ul>';
    myVar += '<li>Link 2</li>';
    myVar += '</ul>';
}
myVar     += '</li>'; 
myVar     += '</ul>'; 
```

`var` is only needed the first time you declare the variable.

### W3C DOM

If you build up the string that you append / insert into your document like that, it will soon become quite confusing. For example, if you want to change something, you have to fiddle with the strings. Better you use the `W3C DOM` API, which is standardized and provides a clean way to build up a element tree which can be appended to any child element into the document tree. Here you will find a nice introduction into the matter: [W3C DOM Introduction](http://www.quirksmode.org/dom/intro.html). After you read this, you can start looking at the methods of W3C DOM. Here is a good reference: [DOM2 Reference](http://www.zvon.org/xxl/DOM2reference/Output/index.html). Start with `document.createElement` and work your way through.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-02T21:36:50.747

`var myVar += (myVar2 != false ? "Link 2" : "");`

Ternary conditional operator etc.

# c# - 在 NHibernate 中规范化 EnumStringType

> ID：335533
> 
> 赞同：3
> 
> 时间：2008-12-02T21:31:18.107
> 
> 标签：c#, nhibernate, nhibernate-mapping

我目前在映射如下的 NHibernate 中使用枚举..

```
public enum UploadMethod
{
    Java, Silverlight, Gears, Flash
}

class UploadMethodType : EnumStringType
{
    public UploadMethodType() : base(typeof(UploadMethod), 255) { }
}

public class Person
{
    /* Bunch of non interesting properties... */
    public UploadMethod PreferredUploadMethod { get; set; }
}

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
 <class name="Person" lazy="false" table="[dbo].[People]">
  <!-- Bunch of non interesting properties... -->
  <property name="PreferredUploadMethod" type="UploadMethodType" />
 </class>
</hibernate-mapping> 
```

除了数据库远未标准化之外，它工作得很好，People 表中的每一行都有一个包含四个文本字符串之一的列。我现在已经把它分成了一个新表，但我不确定如何在 NHibernate 中创建映射。我的第一直觉只是，`<many-to-one>`但我不希望这个枚举成为它自己的实体，我基本上只需要 NHibernate 做一个简单的连接来附加额外的列。

作为权宜之计，我刚刚创建了一个工作正常的视图，但我宁愿抽象层位于我的 NHibernate 映射中，而不是模式中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-22T22:41:45.920

如果我理解正确，那么您的数据库已完美规范化。您告诉 NHibernate 将 Enum 存储为字符串，这是一件好事。枚举不是实体。它的定义不应该存储在数据库中，因为它是在 C# 中定义的。

如果删除 EnumStringType 并将枚举映射为 Int32，则将其作为数字获取。这对您来说可能看起来更“规范化”，但是当您更改枚举并且必须处理遗留数据库时，这是一个潜在的问题。

# svn - TFS shell 集成 TortoiseTFS？

> ID：335534
> 
> 赞同：21
> 
> 时间：2008-12-02T21:31:26.187
> 
> 标签：svn, tfs, tortoisesvn

我喜欢 TortoiseSVN，我相信很多人都喜欢。

我们最近在工作中搬到了 TFS，我发现自己想要 Tortoise 用于 TFS。

我尝试了 TFS Power Toys（我在 Windows Server 2003 下运行），但没有出现任何图标）。

它只是一个远景吗？

有没有办法让 TFS 像 codeplex 一样公开 SVN url？...我已经尝试过 svnbridge，但它似乎并不总是对我有用。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-02T22:31:42.820

在最新的 TFS 电动工具中，有 shell 集成，但它需要以下内容：

*   安装期间的自定义选择（它不是标准安装的一部分）
*   您必须使用用于连接到 TFS 实例的相同帐户凭据登录到 Windows 机器

仅当您在 TFS 中将工作区正确映射到您的文件夹时，文件夹图标才会看起来不同

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-02T21:37:35.160

您说 SVNBridge 不适合您，但我建议您再看看它并尝试找出什么不起作用。我在这里使用它，除了浏览存储库很慢之外没有什么大问题。

以下是我为我们的办公室编写的关于启动和运行的文档的片段。它可能有点过时了。

*   运行 SVNBridge
*   离开港口 8081
*   点击确定。如果出现 Windows 防火墙对话框，请允许它。SVNBridge 应该出现在您的系统托盘中。
*   打开 Windows 资源管理器，右键单击要签出文件的目录，选择 TortoiseSVN | 来自上下文菜单的 Repo-Browser。
*   从 TortoiseSVN浏览到存储库[http://localhost:8081/yourserver/yourrepository/](http://localhost:8081/yourserver/yourrepository/)（这可能很慢）
*   右键单击要从服务器获取的目录并检查它。

# design-patterns - Matlab GUI 应用程序中的软件工程和模式？

> ID：335535
> 
> 赞同：10
> 
> 时间：2008-12-02T21:32:28.040
> 
> 标签：design-patterns, matlab

我被要求使用 Matlab 和 GUIDE 开发一个简单的 GUI 应用程序，它将与一个单独的后端引擎（也是 Matlab）进行交互。我来自 Java 和 .Net 背景。

Matlab 文档在技术上如何做到这一点上很强大，但对“工程”过程几乎没有提及，特别是：

*   如何打包/命名空间函数，或创建库？

*   如何最好地在文件系统上布局文件？

*   如何实现典型的 GUI 模式，例如：MVC、观察者？

*   这些问题在 Matlab 开发中是否有意义？

*   还有其他常见的成语/陷阱吗？

直接建议或指向良好参考材料的指针将非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-08T21:42:35.770

这是一个完全合理的问题，只要稍加注意，就可以编写易于维护的 GUI 代码。一些建议：

*   将 GUI 布局代码和“业务逻辑”放在不同的 m 文件中。（有关示例代码，请参阅[此 FileExchange 提交](http://www.mathworks.com/matlabcentral/fileexchange/16403)）。相关地，使用嵌套函数来维护 GUI 状态，而不是使用 setappdata 和 getappdata 传递或传递结构。

*   通常，使用[嵌套](http://www.mathworks.com/help/matlab/matlab_prog/nested-functions.html)和[匿名函数](http://www.mathworks.com/help/matlab/matlab_prog/anonymous-functions.html)进行回调。嵌套函数类似于 Java 中的内部类，匿名函数实现词法闭包（如 Ruby 中的块）。

*   使用[异常](http://www.mathworks.com/help/matlab/matlab_prog/error-reporting-in-a-matlab-application.html)优雅地处理错误。

*   给每个 GUI 对象（例如，滑块、轴）一个唯一且有意义的标签。例如，“frequencySlider”或“dataAxes”。这有助于加强 GUI 布局和逻辑之间的分离。

*   GUIDE 提供的 gui 控件是相当低级的，但您可以通过为各种控件选择系统标签名称来实现可重用的高级组件（例如，滑块的“frequencySlider”和关联文本标签的“frequencyLabel”） . 组件初始化例程可以使用 findobj 来查找组件的各个部分并对其进行初始化。例如

```
    功能我的组件（无花果，基本名称）
       sliderHandle = findobj(fig, 'tag', [basename 'Slider']);
       textHandle = findobj(fig, 'tag', [basename 'Label']);
       % 初始化...
       设置（sliderHandle，'回调'，@sliderCallback）；

       % 用于回调的嵌套函数；注意使用sliderHandle
        函数滑块回调（h，e）
            fprintf('当前值为 %g\n, get(sliderHandle,'Value'));
        结尾

      结尾

```

*   如果您使用的是 R2008a 或更高版本，则对 OO 开发有很多额外的支持：
    *   支持[包/命名空间](http://www.mathworks.com/help/matlab/matlab_oop/scoping-classes-with-packages.html)
    *   使用[类](http://www.mathworks.com/help/matlab/object-oriented-programming.html)来实现各种 OO 范例。
    *   对观察者模式的内置支持（参见[“listeners”的帮助](http://www.mathworks.com/help/matlab/matlab_oop/events-and-listeners--concepts.html)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T11:40:54.630

我假设您（Dan Vinton）在软件工程和设计模式方面有一些知识，并且您正在寻找 MatLab 世界中的常见做法。为此，我将查看 MatLab 工具箱的 GUI 包，例如优化、曲线拟合等。所有这些工具箱的 GUI 都带有它们的源代码（它们是常规的 MatLab 脚本）。[您还可以查看它或MatLab Central](http://www.mathworks.com/matlabcentral/fileexchange)中几个高级 GUI 包的源代码。这些将为您提供 MatLab 中常见实践的良好表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T11:40:03.930

我没有在 matlab 中创建 GUI 的经验，但如果您的公司愿意在它上面花钱，matlab for .net 可能是一个更快的选择。它将允许您编写 matlab 代码，该代码将在可以从 .net 调用的 com 组件中进行敲击，这意味着您可以用任何您想要的 .net 语言编写 GUI。它的链接如下。 [http://www.mathworks.com/products/netbuilder/](http://www.mathworks.com/products/netbuilder/)

# optimization - 8051 汇编语言中内存优化的技术有哪些？

> ID：335540
> 
> 赞同：6
> 
> 时间：2008-12-02T21:35:54.820
> 
> 标签：optimization, assembly, embedded, intel, 8051

我需要优化代码为一些新代码腾出空间。我没有空间进行所有更改。我不能使用代码库切换（80c31 和 64k）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-02T22:02:54.703

您在这里并没有真正做太多事情，但是您可以考虑两个主要级别的优化：

**微优化：** 例如。XOR A 而不是 MOV A,0 Adam 之前已经很好地介绍了其中的一些。

**宏观优化：** 查看程序的结构、使用的数据结构和算法、执行的任务，并认真思考如何重新安排甚至删除这些。是否存在实际上没有使用的整块代码？您的代码是否充满了用户从未见过的调试输出语句？是否有特定于单个客户的功能可以在一般版本中省略？

为了很好地处理这个问题，你需要弄清楚你的内存在哪里被用完。Linker map 是一个很好的起点。宏观优化是大获全胜的地方。

顺便说一句，您可以 - 认真地 - 尝试使用一个良好的优化 C 编译器重写部分代码。您可能会惊讶于代码的紧凑程度。一个真正的汇编能手可能会改进它，但它很容易比大多数编码器更好。大约 20 年前，我使用了[IAR ，它让我大吃一惊。](http://www.iar.com/website1/1.0.1.0/244/1/index.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-02T21:50:04.683

使用汇编语言，您必须手动进行优化。这里有一些技巧：

*注意：IANA8051P（我不是 8501 程序员，但我在其他 8 位芯片上做了很多组装）。*

通过代码寻找任何重复的位，无论多么小，并使它们起作用。

学习一些更不寻常的指令，看看你是否可以使用它们来优化，例如。一个很好的技巧是使用 XOR A 来清除累加器而不是 MOV A,0 - 它节省了一个字节。

另一个巧妙的技巧是，如果您在返回之前调用一个函数，只需跳转到它，例如，而不是：

```
CALL otherfunc
RET 
```

做就是了：

```
JMP otherfunc 
```

始终确保尽可能进行相对跳转和分支，它们比绝对跳转使用更少的内存。

这就是我暂时能想到的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-27T22:00:05.847

对不起，我来晚了，但我曾经遇到过完全相同的问题，它变成了一个反复出现的问题，不断地回到我身边。就我而言，该项目是一部电话，在 8051 系列处理器上，我已经完全用尽了 ROM（代码）内存。它不断地回到我身边，因为管理层不断要求新功能，所以每个新功能都变成了一个两步过程。1）优化旧东西腾出空间 2）实现新功能，用完我刚刚腾出的房间。

有两种优化方法。战术和战略。战术优化使用微优化思想一次节省几个字节。我认为您需要进行战略优化，这涉及对您的做事方式进行更彻底的重新思考。

我记得的东西对我有用，也可以为你工作；

看看你的代码必须做什么的本质，并尝试提炼出一些非常强大的灵活的原始操作。然后重建您的顶级代码，以便它除了调用原语之外根本不做任何低级代码。理想情况下使用基于表格的方法，您的表格包含以下内容；输入状态、事件、输出状态、原语.... 换句话说，当事件发生时，在表中查找当前状态下该事件的单元格。该单元格告诉您要更改为（可选）什么新状态以及要执行什么原语（如果有）。对于不同的层/子系统，您可能需要多组状态/事件/表/基元。

这种方法的许多好处之一是您可以将其视为为您的特定问题构建自定义语言，您可以通过修改表非常有效地（即使用最少的额外代码）创建新功能。

对不起，我迟到了几个月，你可能没有时间做这么激进的事情。据我所知，您已经在使用类似的方法！但我的回答有一天可能会帮助其他知道的人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-09T19:32:42.177

在被淘汰的部门中，您还可以考虑压缩部分代码，只保留在任何特定时间点被积极使用的部分解压缩。我很难相信压缩/解压缩系统所需的代码在 8051 的微小内存中足够小，足以让这变得有价值，但在稍大的系统上却创造了奇迹。

另一种方法是转向字节码格式或某些状态机工具输出的表格驱动代码——让机器了解您的应用程序正在做什么并生成一个完全难以理解的实现可能是一种很好的保存方式房间 ：）

最后，如果代码确实是用 C 编译的，我建议使用一系列不同的选项进行编译，看看会发生什么。此外，[我在 2001 年为 ESC 写了一篇关于紧凑型 C 编码的文章，该文章仍然很流行。](http://www.engbloms.se/publications/engblom-esc-sf-2001.pdf)有关小型机器的其他技巧，请参阅该文本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-02T22:03:49.053

1) 尽可能将变量保存在 Idata 而不是 xdata
2) 查看您的 Jmp 语句 – 使用 SJmp 和 AJmp

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-03T19:33:00.433

我假设您知道它不适合，因为您编写/遵守并得到“内存不足”错误。:) 看来答案非常准确地解决了您的问题；缺少代码示例。

然而，我会推荐一些额外的想法；

1.  确保所有代码都*真正* 被使用——代码覆盖测试？一个未使用的子是一个巨大的胜利——这是一个艰难的步骤——如果你是原作者，它可能更容易——（嗯，也许）:)
2.  确保“验证”和初始化的水平——有时我们倾向于过分热心地确保我们已经初始化了变量/内存，而且确实如此，我们被它咬了多少次。不是说不要初始化（duh），但是如果我们正在执行内存移动，则*不需要*首先将目标归零——这与

    # 1 --

3.  评估新功能——是否可以增强现有的子功能以涵盖这两个功能或替换现有功能？
4.  如果一段大代码可以节省*创建*新的小代码，则分解大代码。

或者现在桌面上可能存在硬件版本 2.0 的争论...... :)

问候

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-04T05:56:51.533

除了已经提到的（或多或少）明显的优化之外，还有一个非常奇怪（几乎不可能实现）的优化：代码重用。对于代码重用，我并不是指正常的重用，而是a）将您的代码重用为数据或b）将您的代码重用为其他代码。也许您可以创建一个 lut（或任何静态数据），它可以由 asm 十六进制操作码表示（在这里您必须查看哈佛与冯诺依曼架构）。

另一个将通过在您处理不同的代码时赋予代码不同的含义来重用代码。这里有一个例子来说明我的意思。如果代码的字节如下所示：地址 X 处的 AABCCCDDEEFFGGHH，其中每个字母代表一个操作码，假设您现在将跳转到 X+1。也许你会得到一个完全不同的功能，现在由空格分隔的字节形成新的操作码：ABC CCD DE EF GH。

但请注意：这不仅难以实现（也许不可能），而且难以维持。因此，如果您不是演示代码（或类似的外来代码），我建议您使用已经提到的其他方法来保存 mem。

# html - Even column heights without using a TABLE

> ID：335546
> 
> 赞同：2
> 
> 时间：2008-12-02T21:36:43.570
> 
> 标签：html, css, html-table, stylesheet

Is there a way to have two columns, that match each other in height, without using table cells, fixed heights or Javascript?

**Using a TABLE**

```
<table>
    <tr>
        <td style="background:#F00;">
            This is a column
        </td>
        <td style="background:#FF0;">
            This is a column<br />
            That isn't the same<br />
            height at the other<br />
            yet the background<br />
            still works
        </td>
    </tr>
</table> 
```

**Using DIVs**

```
<div style="float:left;background:#F00" >
    This is a column
</div>
<div style="float:left;background:#FF0" >
    This is a column<br />
    That isn't the same<br />
    height at the other<br />
    yet the background<br />
    still works
</div>
<div style="clear:both;" ></div> 
```

The goal is to make both backgrounds extend the full height regardless of which side is taller.

Nesting one in the other wouldn't work because it doesn't guarantee both side are the correct height.

**Unfortunately, the preview showed the working HTML, but the actual post stripped it out. You should be able to paste this into an HTML file and see what I mean.**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T21:53:52.257

[http://www.xs4all.nl/~peterned/examples/csslayout1.html](http://www.xs4all.nl/~peterned/examples/csslayout1.html)

这就是你想要的那种东西，给它们一个 100% 的高度（使用这个 css 技巧），它们会伸展到包含 div 的高度！

编辑：忘了提，把它们放在一个容器 div 中！

编辑：

```
<html>
<head>
    <style>
        html, body
        {
            margin: 0;
            padding: 0;
            height: 100%; /* needed for container min-height */
        }
        #container
        {
            background-color: #333333;
            width: 500px;
            height: auto !important; /* real browsers */
            height: 100%; /* IE6: treaded as min-height*/
            min-height: 100%; /* real browsers */
        }
        #colOne, #colTwo
        {
            width: 250px;
            float: left;
            height: auto !important; /* real browsers */
            height: 100%; /* IE6: treaded as min-height*/
            min-height: 100%; /* real browsers */
        }
        #colOne
        {
            background-color: #cccccc;
        }
        #colTwo
        {
            background-color: #f4f5f3;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="colOne">
            this is something</div>
        <div id="colTwo">
            this is also something</div>
        <div style="clear: both;">
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T04:01:51.267

只是因为没有人这么说，很多时候人们只是*假装*偶数列的存在，通过将背景图像一直平铺到外部容器的底部。

这给出了内容在两个相等的列中的外观，即使一个在另一列之前结束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-26T01:42:07.573

使用[**Faux Column**](http://www.alistapart.com/articles/fauxcolumns/) **CSS 技术**来解决这个问题。

鉴于以下情况：

```
<div class="contentSidebarPair">
    <div class="sidebar"></div>
    <div class="content"></div>
</div> 
```

您可以使用以下样式：

```
/* sidebar.gif is simply a 200x1px image with the bgcolor of your sidebar.
   #FFF is the bgcolor of your content */
div.contentSidebarPair {
    background: #FFF url('sidebar.gif') repeat-y top left;
    width: 800px;
    margin: 0 auto; /* center */
    zoom: 1; /* For IE */
}

/* IE6 will not parse this but it doesn't need to */
div.contentSidebarPair:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}

div.sidebar {
    float: left;
    width: 200px;
}

div.content {
    float: left;
    width: 600px;
} 
```

那里！简单有效。绝对零涉及 JavaScript。如果你想创建更复杂的布局（流式布局），你可以使用 background-position 来调整这种技术。此处提供了[教程](http://www.addedbytes.com/css/faux-columns-for-liquid-layouts/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T23:57:51.600

```
display:inline-block 
```

有了一个技巧，它甚至可以在 IE 中工作：

```
<div><span>
    col1
</span></div>
<div><span>
    col2
</span></div>

div {display:inline;}
span {display:inline-block;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-07T08:19:09.907

是的，这是可能的——纯 CSS，没有 hacks——[等高列](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)。

检查这篇这篇文章 - 它写得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-07-11T14:29:37.627

如果您正在处理支持 CSS2.1（IE8 及更高版本，所有其他主要浏览器）的浏览器，这很简单。如果这是您的标记：

```
<div>
    This is a column
</div>
<div>
    This is a column<br />
    That isn't the same<br />
    height at the other<br />
    yet the background<br />
    still works
</div> 
```

这将是您的 CSS：

```
div { display: table-cell; } 
```

如果您在布局中需要多行，则必须在其中添加一些包装器元素，否则[这将直接起作用](http://jsfiddle.net/robertc/AMyWS/)。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2008-12-02T23:32:11.497

有一种简单的方法可以通过巧妙的 HTML 和 CSS 实现这一目标。

首先是 HTML：

```
<div id="container">
    <div id="col1">
        this is column 1
    </div>
    <div id="col2">
        this is column 2<br />
        it is obviously longer than the first column <br />
        YEP!
    </div>
</div> 
```

请注意缺少 clear:both 无语义的 div。

现在的CSS：

```
#container { background:#f0f; overflow:hidden; width:400px; }
#col1, #col2 { float:left; width:50%; }
#col2 { background:#ff0; } 
```

隐藏在容器规则中的溢出确保容器扩展为包含的浮动 div 的大小（并摆脱了每个人都非常喜欢的非语义清除 div）。

容器的背景适用于第一列。col2 div 的背景仅适用于第二个 div。这就是让我们产生两个 div 始终高度相同的错觉。

3 行 CSS 中的简单语义解决方案。享受

**编辑：请评论投反对票的原因，否则我不得不猜测为什么我的答案是错误的。在这种情况下，我忘记将 width 属性添加到容器中，以便它与 IE6/7 配合得很好。请检查上面修改后的 CSS。**

# sql - How can I determine if SQL Server Management Studio Express (2005) is installed?

> ID：335558
> 
> 赞同：2
> 
> 时间：2008-12-02T21:39:02.770
> 
> 标签：sql, sql-server-2005, installation

I need a way to determine from Wise Install Script if SQL Server Management Studio Express 2005 is installed on computer. Does someone know a Registry entry or something that will be present when SSMSE is installed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T07:40:10.077

最可靠的检测方法是使用 MSI 数据库检测 SQL Server Management Studio 的状态。

有一个 COM 对象可用于查询 MSI 数据库：

> [http://msdn.microsoft.com/en-us/library/aa369432.aspx](http://msdn.microsoft.com/en-us/library/aa369432.aspx)

Installer.Products 属性可以告诉您安装了哪些产品/包。Installer.ProductState 可以告诉您产品/包的状态。

大多数安装程序系统也可以执行相同的检查 - 使用 API、Orca 或类似的 MSI 工具来查找产品 SQL Mgmt Studio 包/产品 ID。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-12-03T07:09:30.543

你可以试试这个：

```
HKEY_LOCAL_MACHINE\Software\MSSQLServer\MSSQLServer\CurrentVersion 
```

获取 CurrentVersion 键的值并将其与 SQL Server Management Studio Express 2005 的版本进行比较。

# regex - AS3 RegExp 中的“未定义”匹配项？嗯？

> ID：335562
> 
> 赞同：0
> 
> 时间：2008-12-02T21:39:32.143
> 
> 标签：regex, actionscript-3

我在 AS3 / Flex 中有一个很长的正则表达式，它可以找到几十个单词中的一个。正则表达式看起来像： `word|wordup|wordly|wordster`

当我做 "wordup wordster!".match(regex) 我得到未定义的匹配！返回的匹配数组具有匹配项：

```
[0]   'wordup'
[1]   undefined
array length: 2 
```

AS3 的分组比赛中是否存在已知错误？是什么让某些单词出现在返回的匹配数组中，而其他单词则返回未定义？

我在我的正则表达式中寻找了杂散的不正确字符，并多次检查了正则表达式。

如果我只是搜索“wordup”，那么我会得到一个长度为 1 的匹配数组，其中包含正确的内容。如果我只搜索“wordster”，那么我会得到一个长度为 1 的数组，其中 match[0] 再次未定义。

## 更新：

经过大量的实验......我的正则表达式对于 AS3 来说太长了我的实际正则表达式使用了分组，并且有可选的括号：

`(?:\(?(\bword\b)\)?|\(?(\bwordup\b)\)?|`... 以此类推，共 51 个单词。

简化为：
`(?:\bword\b|\bwordup\b|`

不知何故，匹配组工作得很好，即使我没有任何通常需要定义组的括号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T12:39:28.863

当您处理“神秘”问题时，您应该始终展示您的实际代码，而不是您认为等效的代码。word|wordup|wordly|wordster 不会给你任何“未定义”的匹配。

不要使用 (?:\bword\b|\bword2\b)，而是使用：\b(?:word|word2)\b

正则表达式 word|(word2)?|word3 将为您提供零长度匹配，因为正则表达式中的第二个选项是可选的。它将匹配字符串中无法匹配“word”的每个位置的零长度字符串。

# ejb-3.0 - How to use WS-Security with EJB3?

> ID：335567
> 
> 赞同：1
> 
> 时间：2008-12-02T21:41:32.500
> 
> 标签：ejb-3.0, ws-security

For one of our projects, I should be able to call a webservice that uses WS-Security, i.e. the SOAP request should be signed with an X.509 certificate. I've been doing some tests to call the webservice through the use of the WebServiceRef annotation and I'm able to call the webservice without WS-Security.

So my question is: how can I activate and/or configure WS-Security when using the WebServiceRef annotation ?

Regards, Stefan Lecho.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-10T13:53:23.667

如果它仍然相关，请查看[WSIT](https://wsit.dev.java.net/)，尤其是[此处](https://xwss.dev.java.net/overview.html)描述的 WS-Security 实现。基本上，您只需像往常一样使用@WebServiceRef，提供一个wsit-client.xml，并指定正确的<Policy> 节点。

您可能会发现这些很有用：

*   [使用基于 Metro 的 Web 服务的公钥证书实现 WS-Security](http://www.jroller.com/gmazza/entry/implementing_ws_security_with_pki)
*   [配置密钥库和信任库](http://java.sun.com/webservices/reference/tutorials/wsit/doc/WSIT_Security6.html)

# asp.net - ASP.NET (3.5) 的简单可破解 URL 实现

> ID：335575
> 
> 赞同：2
> 
> 时间：2008-12-02T21:43:43.913
> 
> 标签：asp.net, url, url-rewriting

我正在寻找一个好的示例项目或网站参考，它提供了一个简单易懂的 URL 重写和制作可破解 URL 的概述。

我已经阅读了大量关于这个概念的内容，但我特别想为程序员寻找一个好的实现示例来开始使用。

这是专门针对 .NET 3.5 的，所以其中的示例非常完美！

编辑：现在 ASP.NET 4.0 已经发布，这个问题没有实际意义，因为 URL 路由机制非常棒。我在所有 ASP.NET 应用程序中都使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T02:22:26.270

很确定您是指网络表单，如果是这样，请查看 phil haack 的这篇文章 [http://haacked.com/archive/2008/03/11/using-routing-with-webforms.aspx](http://haacked.com/archive/2008/03/11/using-routing-with-webforms.aspx)

如果您的意思是 asp.net MVC，请查看[http://www.asp.net/learn/mvc-videos/video-399.aspx](http://www.asp.net/learn/mvc-videos/video-399.aspx)或 www.asp.net/mvc 上的任何视频

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T20:02:29.577

ASP.net 路由（不重写）是要走的路。两个关于初学者主题的好帖子：

[http://blogs.msdn.com/mikeormond/archive/2008/05/14/using-asp-net-routing-independent-of-mvc.aspx](http://blogs.msdn.com/mikeormond/archive/2008/05/14/using-asp-net-routing-independent-of-mvc.aspx)
[http://chriscavanagh.wordpress.com/2008/03/11 /aspnet-routing-goodbye-url 重写/](http://chriscavanagh.wordpress.com/2008/03/11/aspnet-routing-goodbye-url-rewriting/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-14T23:34:30.597

在阅读了这些非常有用的回复，并花费了大量时间研究这个主题，并使用框架 3.5 sp1 编写代码示例之后，我发现自己成功了。

对我来说，最好的方法是首先实现这个超级简单的例子，然后使用它：

[http://blogs.msdn.com/mikeormond/archive/2008/05/14/using-asp-net-routing-independent-of-mvc.aspx](http://blogs.msdn.com/mikeormond/archive/2008/05/14/using-asp-net-routing-independent-of-mvc.aspx)

接下来我发现了这个优秀而简单的例子，它扩展了第一个例子，并且增加了对参数的支持。这个例子简单而优秀：

[http://bbits.co.uk/blog/archive/2008/05/19/using-asp.net-routing-independent-of-mvc---passing-parameters-to.aspx](http://bbits.co.uk/blog/archive/2008/05/19/using-asp.net-routing-independent-of-mvc---passing-parameters-to.aspx)

我希望这可以帮助其他关注这个话题的人；似乎对此有相当大的兴趣，即使对于不打算使用 MVC 的开发人员也是如此。

# python - Python：用于生产邮件接收的 smtpd（或替代方法）？

> ID：335582
> 
> 赞同：3
> 
> 时间：2008-12-02T21:46:16.233
> 
> 标签：python, smtp, smtpd

我正在寻找对电子邮件进行各种处理 - 例如。检查标头，如果它们符合某些标准（看起来像垃圾邮件），则断开连接，或检查收件人列表并执行特殊过滤。

看起来 Python 的 smtpd 库为处理收到的电子邮件提供了一个漂亮而简单的界面。

要在邮件完全处理之前处理邮件（例如，在邮件头看起来像垃圾邮件的情况下删除邮件），我应该使用 handle_connect 吗？内部 API（除了 process_message）是否记录在某处？任何地方的示例代码？

另外，有人在生产中使用过 smtpd 吗？对可靠性等有什么想法吗？

关于 Twisted：我已经尝试过多次使用 Twisted，并且非常喜欢延迟模型，但它对于我目前的口味来说有点太复杂了。我再看一下，但现在我对非 Twisted 实现更感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-02T22:07:10.373

您可能希望查看[扭曲](http://twistedmatrix.com/trac/)的实现，因为这将使您能够访问与客户端的全方位交互。我相信（尽管我从未在生产中使用过）twisted 在生产环境中是可以信任的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T12:57:12.307

另一种方法：使用[Postfix](http://www.postfix.org)接收电子邮件并用 Python 编写[策略](http://www.postfix.org/SMTPD_POLICY_README.html)脚本。

# iis - 从 VMWare 中的来宾操作系统访问主机 IIS

> ID：335585
> 
> 赞同：7
> 
> 时间：2008-12-02T21:47:18.680
> 
> 标签：iis, vmware

如何从 VMWare (Fedora 10) 中的来宾操作系统访问主机上在 IIS 7 中配置的站点。我已将 VM 配置为使用“NAT”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T22:02:36.140

取决于您使用的 vmware 产品的网络配置（播放器、服务器、工作站）。如果它设置为桥接模式，那么您可以像任何其他机器一样 - 通过主机的 IP。如果它是“仅主机”或 NAT 模式 - 检查来宾的网关 IP (/sbin/route) 是什么，并尝试使用它：

```
# /sbin/route
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface

default         10.x.y.z        0.0.0.0         UG    0      0        0 eth0 
```

在这种情况下，10.xyz 是主机的 ip。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T07:46:44.027

相当容易...

步骤 1 如果您想使用“url”，请在主机操作系统上配置 IIS 以包含绑定。例如 mySite.com

步骤 2\. 在来宾中打开主机文件 c:\windows\system32\drivers\etc\hosts。

添加条目

[hostip address] [host iis bining url]

例子

192.168.0.1 mySite.com

在来宾中重新启动浏览器，您应该一切顺利。

# nhibernate - 使用 NHibernate 2.0.1 实现类似于lazy="extra" 的功能的最佳方法

> ID：335597
> 
> 赞同：5
> 
> 时间：2008-12-02T21:52:19.203
> 
> 标签：nhibernate

我有一个多对一的关系，其中子表可以有数十万条记录。在这种情况下，调用 Parent.ChildCollection.Count 会强制对子集合进行延迟初始化，这非常昂贵。

在 Hibernate 3.0 中有一个特性 lazy="extra" 允许您检查集合属性的子集，而无需延迟加载整个内容。

不幸的是，直到 NHibernate 2.1 才可用，它仍处于 Alpha 阶段。 [http://jira.nhibernate.org/browse/NH-855](http://jira.nhibernate.org/browse/NH-855)

我怎样才能用 NHibernate 2.0.1 做到这一点？

我曾经有这样的特殊属性

```
<property name="ChildCollectionCount" type="int" formula="(select count(*) from ChildTable child where child.parentID = parentID "/> 
```

但我不能再使用这些了，因为我现在正在共享这个库，它对其他用户来说是一个性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-23T08:31:45.153

当您说这是其他用户的性能问题时，您的意思是他们也想访问该集合，但对他们来说太大了。还是代码片段/ChildCollectionCount 对他们来说太慢了？

如果是第一种情况，那么也许您需要为他们做一个类似的解决方案 - 准确地确定他们需要什么并提供提供该功能的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-11T10:46:43.970

很晚了，但您可以对集合应用过滤器

```
IQuery q = nhSession.CreateFilter(Parent.ChildCollection, "select count(*)");
long countResult = q.UniqueResult<long>(); 
```

这不会强制初始化集合，而是对数据库执行单个查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-16T17:55:31.350

我会推荐一个单独的查询，而不是域关系。然后你可以使用各种优化。

# html - html - scrollbar jump by itself

> ID：335598
> 
> 赞同：0
> 
> 时间：2008-12-02T21:52:53.787
> 
> 标签：html, scrollbar

I'm experiencing this weird problem which my scrollbar jumps by itself to somewhere that I don't want it to.

I have a table with scrollbar inside this page, if the user have a smaller screen, the page automatically adds a scrollbar. If I scroll down to the bottom of the table and click on it, the scrollbar of the page jumps up so I can no longer see the thing I clicked. Any ideas?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T22:00:11.837

There are a number of things that can be causing this.

*   You clicked on a hyperlink with a href of "#", which will cause most browsers to scroll to the top of the page,
*   There's possibly a CSS `:focus` or `:active` rule somewhere being triggered that causes the height of the page to change
*   There's a javascript onclick event firing and changing the page
*   ...or possibly something else entirely.

Have you tried in different browsers? It could be a bug in the browser itself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-25T11:26:53.247

Are you sure the object causing the problem is not an `<a href='#'><div onclick='yourJavaScriptFunction()'>...</div></a>` or something similar?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-25T11:30:28.387

Perhaps you have a meta refresh tag

```
<meta http-equiv="refresh" content="600"> 
```

I have seen these cause similar issues on safari, post a link to the page and you will find getting a solution much easier.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-12-02T22:07:31.370

My scrollbar jumps when I hit Page Up or Page Down. Also, my laptop trackpad can cause odd mouse behavior if I bounce my thumb against it.

And when I poured a large Latte into my keyboard, I had problems, then. But then the whole computer stopped working about an hour later.

# java - Java中两个图像之间的碰撞检测

> ID：335600
> 
> 赞同：15
> 
> 时间：2008-12-02T21:53:15.393
> 
> 标签：java, collision-detection

我正在编写的游戏中显示了两个角色，玩家和敌人。定义为：

```
public void player(Graphics g) {
    g.drawImage(plimg, x, y, this);
}

public void enemy(Graphics g) {
    g.drawImage(enemy, 200, 200, this);
} 
```

然后调用：

```
player(g);
enemy(g); 
```

我可以用键盘移动 player()，但是在尝试检测两者之间的碰撞时我不知所措。很多人都说要使用矩形，但作为一个初学者，我看不出如何将它链接到我现有的代码中。谁能给我一些建议？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-02T23:35:25.547

我认为你的问题是你没有为你的玩家和敌人使用好的 OO 设计。创建两个类：

```
public class Player
{
    int X;
    int Y;
    int Width;
    int Height;

    // Getters and Setters
}

public class Enemy
{
    int X;
    int Y;
    int Width;
    int Height;

    // Getters and Setters
} 
```

您的 Player 应该有 X、Y、Width 和 Height 变量。

你的敌人也应该如此。

在您的游戏循环中，执行以下操作（C#）：

```
foreach (Enemy e in EnemyCollection)
{
    Rectangle r = new Rectangle(e.X,e.Y,e.Width,e.Height);
    Rectangle p = new Rectangle(player.X,player.Y,player.Width,player.Height);

    // Assuming there is an intersect method, otherwise just handcompare the values
    if (r.Intersects(p))
    {
       // A Collision!
       // we know which enemy (e), so we can call e.DoCollision();
       e.DoCollision();
    }
} 
```

为了加快速度，不要费心检查敌人的坐标是否在屏幕外。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-03T09:28:11.060

[首先，使用Jonathan Holland](https://stackoverflow.com/questions/335600/collision-detection-between-two-images-in-java#335632)描述的边界框来确定是否可能发生碰撞。

从（多色）精灵中，创建黑白版本。如果您的精灵是透明的，您可能已经拥有这些（即边界框内有一些地方，但您仍然可以看到背景）。这些是“面具”。

在蒙版上使用`Image.getRGB()`以获取像素。对于每个不透明的像素，在整数数组（`playerArray`及`enemyArray`以下）中设置一个位。数组的大小是像素，`height`否则。下面的代码是针对.`width <= 32``(width+31)/32*height``width <= 32`

如果边界框发生碰撞，请执行以下操作：

```
// Find the first line where the two sprites might overlap
int linePlayer, lineEnemy;
if (player.y <= enemy.y) {
    linePlayer = enemy.y - player.y;
    lineEnemy = 0;
} else {
    linePlayer = 0;
    lineEnemy = player.y - enemy.y;
}
int line = Math.max(linePlayer, lineEnemy);

// Get the shift between the two
x = player.x - enemy.x;
int maxLines = Math.max(player.height, enemy.height);
for ( line < maxLines; line ++) {
    // if width > 32, then you need a second loop here
    long playerMask = playerArray[linePlayer];
    long enemyMask = enemyArray[lineEnemy];
    // Reproduce the shift between the two sprites
    if (x < 0) playerMask << (-x);
    else enemyMask << x;
    // If the two masks have common bits, binary AND will return != 0
    if ((playerMask & enemyMask) != 0) {
        // Contact!
    }

} 
```

链接：[JGame](http://www.13thmonkey.org/~boris/jgame/) ,[小型 Java 游戏框架](http://vredungmand.dk/programming/sjg/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-02T22:26:16.387

您不希望在绘画代码中包含碰撞检查代码。绘画需要快速。碰撞可以进入游戏循环。因此，您需要独立于其精灵的对象的内部表示。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-06-02T01:11:57.333

这是我的碰撞检测程序的主要课程。
您可以在以下位置看到它运行：[http ://www.youtube.com/watch?v=JIXhCvXgjsQ](http://www.youtube.com/watch?v=JIXhCvXgjsQ)

```
/**
 *
 * @author Tyler Griffin
 */
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.GraphicsDevice.*;
import java.util.ArrayList;
import java.awt.Graphics;
import java.awt.geom.Line2D;

public class collision extends JFrame implements KeyListener, MouseMotionListener, MouseListener
{
    ArrayList everything=new ArrayList<tile>();

    int time=0, x, y, width, height, up=0, down=0, left=0, right=0, mouse1=0, mouse2=0;
    int mouseX, mouseY;

    GraphicsEnvironment environment = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice screen = environment.getDefaultScreenDevice();
    DisplayMode displayMode = screen.getDisplayMode();

    //private BufferStrategy strategy;

    JLayeredPane pane = new JLayeredPane();

     tile Tile;
     circle Circle;
     rectangle Rectangle;

         textPane text;

    public collision()
    {
        setUndecorated(screen.isFullScreenSupported());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
        setLayout(null);
        setResizable(false);
        screen.setFullScreenWindow(this);

        width=displayMode.getWidth();
        height=displayMode.getHeight();

          Circle=new circle(-(int)Math.round((double)height/7*2),-(int)Math.round((double)height/7*2),(int)Math.round((double)height/7*.85),this);
          Rectangle=new rectangle(-(int)Math.round((double)height/7*1.5),-(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),this);
          Tile=Circle;
          Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);
                  text=new textPane(0,0,width,height,this);

          everything.add(new circle((int)Math.round((double)width/100*75),(int)Math.round((double)height/100*15),(int)Math.round((double)width/100*10),this));
                  everything.add(new rectangle((int)Math.round((double)width/100*70),(int)Math.round((double)height/100*60),(int)Math.round((double)width/100*20),(int)Math.round((double)height/100*20),this));
                  //everything.add(new line(750,250,750,750,this));
                  /*everything.add(new line(width/700*419,height/700*68,width/700*495,height/700*345,this));
                  everything.add(new line(width/700*495,height/700*345,width/700*749,height/700*350,this));
                  everything.add(new line(width/700*749,height/700*350,width/700*549,height/700*519,this));
                  everything.add(new line(width/700*549,height/700*519,width/700*624,height/700*800,this));
                  everything.add(new line(width/700*624,height/700*800,width/700*419,height/700*638,this));
                  everything.add(new line(width/700*419,height/700*638,width/700*203,height/700*800,this));
                  everything.add(new line(width/700*203,height/700*800,width/700*279,height/700*519,this));
                  everything.add(new line(width/700*279,height/700*519,width/700*76,height/700*350,this));
                  everything.add(new line(width/700*76,height/700*350,width/700*333,height/700*345,this));
                  everything.add(new line(width/700*333,height/700*345,width/700*419,height/700*68,this));

                  everything.add(new line(width/950*419,height/700*68,width/950*624,height/700*800,this));
                  everything.add(new line(width/950*419,height/700*68,width/950*203,height/700*800,this));
                  everything.add(new line(width/950*76,height/700*350,width/950*624,height/700*800,this));
                  everything.add(new line(width/950*203,height/700*800,width/950*749,height/700*350,this));
                  everything.add(new rectangle(width/950*76,height/700*350,width/950*673,1,this));*/

                  everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));
                  everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),this));
                  everything.add(new line((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));
                  everything.add(new line((int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),(int)Math.round((double)width/1350*749),(int)Math.round((double)height/1000*350),this));
                  everything.add(new rectangle((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*673),1,this));

        addKeyListener(this);
        addMouseMotionListener(this);
        addMouseListener(this);
    }

    public void keyReleased(KeyEvent e)
    {
        Object source=e.getSource();

        int released=e.getKeyCode();

        if (released==KeyEvent.VK_A){left=0;}
        if (released==KeyEvent.VK_W){up=0;}
        if (released==KeyEvent.VK_D){right=0;}
        if (released==KeyEvent.VK_S){down=0;}
    }//end keyReleased

    public void keyPressed(KeyEvent e)
    {
        Object source=e.getSource();

        int pressed=e.getKeyCode();

        if (pressed==KeyEvent.VK_A){left=1;}
        if (pressed==KeyEvent.VK_W){up=1;}
        if (pressed==KeyEvent.VK_D){right=1;}
        if (pressed==KeyEvent.VK_S){down=1;}

        if (pressed==KeyEvent.VK_PAUSE&&pressed==KeyEvent.VK_P)
        {
            //if (paused==0){paused=1;}
            //else paused=0;
        }
    }//end keyPressed

    public void keyTyped(KeyEvent e){}

//***********************************************************************************************

    public void mouseDragged(MouseEvent e)
    {
        mouseX=(e.getX());
        mouseY=(e.getY());

          //run();
    }

    public void mouseMoved(MouseEvent e)
    {
        mouseX=(e.getX());
        mouseY=(e.getY());

          //run();
    }

//***********************************************************************************************

    public void mousePressed(MouseEvent e)
    {
        if(e.getX()==0 && e.getY()==0){System.exit(0);}

    mouseX=(e.getX()+x);
        mouseY=(e.getY()+y);

        if(Tile instanceof circle)
        {
                Circle.move(0-Circle.width, 0-Circle.height);
                Circle.setBounds(Circle.x, Circle.y, Circle.width, Circle.height);
                Tile=Rectangle;
        }
        else
        {
                Rectangle.move(0-Rectangle.width, 0-Rectangle.height);
                Rectangle.setBounds(Rectangle.x, Rectangle.y, Rectangle.width, Rectangle.height);
                Tile=Circle;
        }

        Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);
    }

    public void mouseReleased(MouseEvent e)
    {
         //run();
    }

    public void mouseEntered(MouseEvent e){}
    public void mouseExited(MouseEvent e){}

    public void mouseClicked(MouseEvent e){}

//***********************************************************************************************

    public void run()//run collision detection
    {
        while (this == this)
        {
            Tile.move(Tile.x + ((mouseX - (Tile.x + (Tile.width / 2))) / 10), Tile.y + ((mouseY - (Tile.y + (Tile.height / 2))) / 10));
            //Tile.move((mouseX - Tile.width / 2), mouseY - (Tile.height / 2));

            for (int i = 0; i < everything.size(); i++)
            {
                tile Temp = (tile) everything.get(i);

                if (Temp.x < (Tile.x + Tile.width) && (Temp.x + Temp.width) > Tile.x && Temp.y < (Tile.y + Tile.height) && (Temp.y + Temp.height) > Tile.y)//rectangles collided
                {
                    if (Temp instanceof rectangle)
                    {
                        if (Tile instanceof rectangle){rectangleRectangle(Temp);}
                        else {circleRectangle(Temp);}//Tile instanceof circle
                    }
                    else
                    {
                        if (Temp instanceof circle)
                        {
                            if (Tile instanceof rectangle) {rectangleCircle(Temp);}
                            else {circleCircle(Temp);}
                        }
                        else//line
                        {
                            if (Tile instanceof rectangle){rectangleLine(Temp);}
                            else{circleLine(Temp);}
                        }
                    }
                }//end if
            }//end for

            try {Thread.sleep(16L);}
            catch (Exception e) {}

            Tile.setBounds(Tile.x, Tile.y, Tile.width, Tile.height);
            //Rectangle.setBounds(x, y, width, height);
            //Circle.setBounds(x, y, width, height);
            repaint();

            text.out=" ";
        }//end while loop
    }//end run

//***************************************special collision detection/handling functions************************************************

    void rectangleRectangle(tile Temp)
    {
        int lapTop, lapBot, lapLeft, lapRight, small, scootX=0, scootY=0;

        lapTop=(Temp.y+Temp.height)-Tile.y;
        lapBot=(Tile.y+Tile.height)-Temp.y;
        lapLeft=(Temp.x+Temp.width)-Tile.x;
        lapRight=(Tile.x+Tile.width)-Temp.x;

        small=999999999;

        if (lapTop<small){small=lapTop; scootX=0; scootY=lapTop;}
        if (lapBot<small){small=lapBot; scootX=0; scootY=lapBot*-1;}
                if (lapLeft<small){small=lapLeft; scootX=lapLeft; scootY=0;}
                if (lapRight<small){small=lapRight; scootX=lapRight*-1; scootY=0;}

        Tile.move(Tile.x+scootX, Tile.y+scootY);text.out="collision detected!";
    }

    void circleRectangle(tile Temp)
    {
        if((Tile.x+Tile.width/2<=Temp.x+Temp.width && Tile.x+Tile.width/2>=Temp.x)||(Tile.y+Tile.height/2>=Temp.y && Tile.y+Tile.height/2<=Temp.y+Temp.height))
        {
            rectangleRectangle(Temp);
        }
        else//push from nearest corner
        {
            int x,y;
            if(Tile.x+Tile.width/2>Temp.x+Temp.width && Tile.y+Tile.height/2<Temp.y){x=Temp.x+Temp.width; y=Temp.y;}
            else if(Tile.x+Tile.width/2<Temp.x && Tile.y+Tile.height/2<Temp.y){x=Temp.x; y=Temp.y;}
            else if(Tile.x+Tile.width/2>Temp.x+Temp.width && Tile.y+Tile.height/2>Temp.y+Temp.height){x=Temp.x+Temp.width; y=Temp.y+Temp.height;}
            else {x=Temp.x; y=Temp.y+Temp.height;}

            double distance = Math.sqrt(Math.pow(Tile.x+(Tile.width/2) - x, 2) + Math.pow(Tile.y+(Tile.height/2) - y, 2));

            if((int)Math.round(distance)<Tile.height/2)
            {
                             double normY = ((Tile.y+(Tile.height/2) - y) / distance);
                             double normX = ((Tile.x+(Tile.width/2) - x) / distance);

                            Tile.move(x-Tile.width/2+(int)Math.round(normX*((Tile.width/2))) , y-Tile.height/2+(int)Math.round(normY*((Tile.height/2))));text.out="collision detected!";
            }
        }
    }

    void rectangleCircle(tile Temp)
    {
        if((Temp.x+Temp.width/2<=Tile.x+Tile.width && Temp.x+Temp.width/2>=Tile.x)||(Temp.y+Temp.height/2>=Tile.y && Temp.y+Temp.height/2<=Tile.y+Tile.height))
        {
            rectangleRectangle(Temp);
        }
        else//push from nearest corner
        {
            int x,y;
            if(Temp.x+Temp.width/2>Tile.x+Tile.width && Temp.y+Temp.height/2<Tile.y){x=Tile.x+Tile.width; y=Tile.y;}
            else if(Temp.x+Temp.width/2<Tile.x && Temp.y+Temp.height/2<Tile.y){x=Tile.x; y=Tile.y;}
            else if(Temp.x+Temp.width/2>Tile.x+Tile.width && Temp.y+Temp.height/2>Tile.y+Tile.height){x=Tile.x+Tile.width; y=Tile.y+Tile.height;}
            else {x=Tile.x; y=Tile.y+Tile.height;}

            double distance = Math.sqrt(Math.pow(Temp.x+(Temp.width/2) - x, 2) + Math.pow(Temp.y+(Temp.height/2) - y, 2));

            if((int)Math.round(distance)<Temp.height/2)
            {
             double normY = ((Temp.y+(Temp.height/2) - y) / distance);
             double normX = ((Temp.x+(Temp.width/2) - x) / distance);

             if(Temp.x+Temp.width/2>Tile.x+Tile.width && Temp.y+Temp.height/2<Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out="collision detected!";}
                else if(Temp.x+Temp.width/2<Tile.x && Temp.y+Temp.height/2<Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out="collision detected!";}
                else if(Temp.x+Temp.width/2>Tile.x+Tile.width && Temp.y+Temp.height/2>Tile.y+Tile.height){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out="collision detected!";}
                else {Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out="collision detected!";}
            }
        }
    }

    void circleCircle(tile Temp)
    {
        double distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2)),2) + Math.pow((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2)), 2));

        if((int)distance<(Tile.width/2+Temp.width/2))
        {
                        double normX = ((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2))) / distance;
                        double normY = ((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2))) / distance;

            Tile.move((Temp.x+(Temp.width/2))+(int)Math.round(normX*(Tile.width/2+Temp.width/2))-(Tile.width/2) , (Temp.y+(Temp.height/2))+(int)Math.round(normY*(Tile.height/2+Temp.height/2))-(Tile.height/2));text.out="collision detected!";
        }
    }

    void circleLine(tile Temp)
    {
            line Line=(line)Temp;

            if (Line.x1 < (Tile.x + Tile.width) && (Line.x1) > Tile.x && Line.y1 < (Tile.y + Tile.height) && Line.y1 > Tile.y)//circle may be hitting one of the end points
            {
                rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);
                circleRectangle(rec);
                remove(rec);
            }

            if (Line.x2 < (Tile.x + Tile.width) && (Line.x2) > Tile.x && Line.y2 < (Tile.y + Tile.height) && Line.y2 > Tile.y)//circle may be hitting one of the end points
            {
                rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);
                circleRectangle(rec);
                remove(rec);
            }

            int x1=0, y1=0, x2=Tile.x+(Tile.width/2), y2=Tile.y+(Tile.height/2);

            x1=Tile.x+(Tile.width/2)-Line.height;//(int)Math.round(Line.xNorm*1000);
            x2=Tile.x+(Tile.width/2)+Line.height;
            if(Line.posSlope)
            {
                y1=Tile.y+(Tile.height/2)-Line.width;
                y2=Tile.y+(Tile.height/2)+Line.width;
            }
            else
            {
                y1=Tile.y+(Tile.height/2)+Line.width;
                y2=Tile.y+(Tile.height/2)-Line.width;
            }

            Point point=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection

            if (point.x < (Line.x + Line.width) && point.x > Line.x && point.y < (Line.y + Line.height) && point.y > Line.y)//line intersects within line segment
            {
                //if(point!=null){System.out.println(point.x+","+point.y);}
                double distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - point.x,2) + Math.pow((Tile.y+(Tile.width/2)) - point.y, 2));

                if((int)distance<Tile.width/2)
                {
                    //System.out.println("hit");
                    double normX = ((Tile.x+(Tile.width/2)) - point.x) / distance;
                    double normY = ((Tile.y+(Tile.height/2)) - point.y) / distance;

                    Tile.move((point.x)+(int)Math.round(normX*(Tile.width/2))-(Tile.width/2) , (point.y)+(int)Math.round(normY*(Tile.height/2))-(Tile.height/2));text.out="collision detected!";
                    //System.out.println(point.x+","+point.y);
                }
            }

            //new bullet(this, (int)Math.round(tryX), (int)Math.round(tryY));
    }

        void rectangleLine(tile Temp)
    {
            line Line=(line)Temp;
            if(new Line2D.Double(Line.x1,Line.y1,Line.x2,Line.y2).intersects(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height)))
            {
                if (Line.x1 < (Tile.x + Tile.width) && (Line.x1) > Tile.x && Line.y1 < (Tile.y + Tile.height) && Line.y1 > Tile.y)//circle may be hitting one of the end points
                {
                    rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);
                    rectangleRectangle(rec);
                    remove(rec);
                }

                if (Line.x2 < (Tile.x + Tile.width) && (Line.x2) > Tile.x && Line.y2 < (Tile.y + Tile.height) && Line.y2 > Tile.y)//circle may be hitting one of the end points
                {
                    rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);
                    rectangleRectangle(rec);
                    remove(rec);
                }

                if(Line.posSlope)//positive sloped line
                {
                    //first we'll do the top left corner
                    int x1=Tile.x-Line.height;
                    int x2=Tile.x+Line.height;
                    int y1=Tile.y-Line.width;
                    int y2=Tile.y+Line.width;
                    Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);
                    double topDistance=0, botDistance=0;

                    topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection

                    topDistance = Math.sqrt(Math.pow(Tile.x - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));

                    //new let's do the bottom right corner
                    x1=Tile.x+Tile.width-Line.height;
                    x2=Tile.x+Tile.width+Line.height;
                    y1=Tile.y+Tile.height-Line.width;
                    y2=Tile.y+Tile.height+Line.width;

                    botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection

                    botDistance = Math.sqrt(Math.pow((Tile.x+Tile.width) - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));

                    if(topDistance<botDistance)
                    {
                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) && new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))
                        {
                            Tile.move(topPoint.x,topPoint.y);text.out="collision detected!";
                        }
                    }
                    else
                    {
                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) && new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))
                        {
                            Tile.move(botPoint.x-Tile.width,botPoint.y-Tile.height);text.out="collision detected!";
                        }
                    }
                }
                else//negative sloped lne
                {
                    //first we'll do the top right corner
                    int x1=Tile.x+Tile.width-Line.height;
                    int x2=Tile.x+Tile.width+Line.height;
                    int y1=Tile.y+Line.width;
                    int y2=Tile.y-Line.width;
                    Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);
                    double topDistance=0, botDistance=0;

                    topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection

                    topDistance = Math.sqrt(Math.pow(Tile.x + Tile.width - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));

                    //new let's do the bottom left corner
                    x1=Tile.x-Line.height;
                    x2=Tile.x+Line.height;
                    y1=Tile.y+Tile.height+Line.width;
                    y2=Tile.y+Tile.height-Line.width;

                    botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection

                    botDistance = Math.sqrt(Math.pow(Tile.x - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));

                    if(topDistance<botDistance)
                    {
                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) && new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))
                        {
                            Tile.move(topPoint.x-Tile.width,topPoint.y);text.out="collision detected!";
                        }
                    }
                    else
                    {
                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) && new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))
                        {
                            Tile.move(botPoint.x,botPoint.y-Tile.height);text.out="collision detected!";
                        }
                    }
                }
            }
    }

       public Point intersection(double x1, double y1, double x2, double y2,double x3, double y3, double x4, double y4)//I didn't write this. got it from http://www.ahristov.com/tutorial/geometry-games/intersection-lines.html (I altered it)
       {
            double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);

            double xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;
            double yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;

            int x=(int)Math.round(xi);
            int y=(int)Math.round(yi);

            return new Point(x, y);
        }

//***************************************************************************************

    public static void main(String[] args)
    {
        final collision Collision=new collision();
          Collision.run();
    }//end main
}//end class 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-02T22:57:35.873

由于 Java 没有相交函数（真的！？），您可以通过简单地比较每个可能发生碰撞的对象的边界框（矩形）的 X 和 Y、宽度和高度值来进行碰撞检测。

所以...在每个碰撞对象的基础对象中...即，如果您的玩家和敌人有一个共同的基础，您可以放置​​一个简单的矩形对象，称为 BoundingBox。如果公共基础是内置 Java 类，那么您需要创建一个扩展内置类的类，并让玩家和敌人对象扩展您的新类或者是该类的实例。

在创建时（以及每次滴答或更新），您需要为您的玩家和敌人设置 BoundingBox 参数。我面前没有 Rectangle 类，但它很可能是 X、Y、Width 和最后的 Height。X 和 Y 是游戏世界中的对象位置。我认为宽度和高度是不言自明的。它们很可能会从玩家位置的右侧出现，因此，如果 X 和 Y 都为 0 并且您的宽度和高度都为 256，您将看不到任何东西，因为角色将位于左上角屏幕之外。

无论如何...要检测碰撞，您需要比较玩家和敌人边界框的属性。所以像这样的事情......

```
 if( Player.BoundingBox.X = Enemy.BoundingBox.X && If( Player.BoundingBox.Y = Enemy.BoundingBox.Y )
 {
      //Oh noes!  The enemy and player are on top of eachother.
 } 
```

逻辑可能会有点复杂，但您需要比较每个 BoundingBox 之间的距离并比较位置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-02T23:28:12.923

这是一个使用大量碰撞的开源游戏的有用之处：[http ://robocode.sourceforge.net/](http://robocode.sourceforge.net/)

您可以查看代码并补充此处编写的答案。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-27T12:04:17.573

是否有问题：

```
Rectangle box1 = new Rectangle(100,100,100,100);
Rectangle box2 = new Rectangle(200,200,100,100);

// what this means is if any pixel in box2 enters (hits) box1
if (box1.contains(box2)) 
{
     // collision occurred
}

// your code for moving the boxes 
```

这也可以应用于圆圈：

```
Ellipse2D.Double ball1 = new Ellipse2D.Double(100,100,200,200);
Ellipse2D.Double ball2 = new Ellipse2D.Double(400,100,200,200);

// what this means is if any pixel on the circumference in ball2 touches (hits)
// ball1
    if (ball1.contains(ball2)) 
    {
         // collision occurred
    }

    // your code for moving the balls 
```

要检查您是否碰到了屏幕边缘，您可以使用以下命令：

```
Rectangle screenBounds = jpanel.getBounds();
Ellipse2D.Double ball = new Ellipse2D.Double(100,100,200,200);  // diameter 200
Rectangle ballBounds = ball.getBounds();

if (!screenBounds.contains(ballBounds))
{
// the ball touched the edge of the screen
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-02T22:04:07.477

使用一个矩形来包围每个玩家和敌人，矩形的高度和宽度应该与你周围的对象相对应，想象它在一个足够大的盒子里。

现在，您像移动对象一样移动这些矩形，所以它们有一个“边界框”

我不确定Java是否有这个，但它可能在矩形对象上有一个名为 .intersects() 的方法，所以你会做 if(rectangle1.intersectS(rectangle2) 来检查一个对象是否与另一个对象发生碰撞。

否则，您可以获得框的 x 和 y 坐标，并使用它们的高度/宽度来检测它们是否与您自己相交。

无论如何，您可以使用它在交叉路口执行事件（使一个爆炸或其他）或阻止绘制运动。（恢复到以前的坐标）

编辑：我们走

布尔值

> intersects(Rectangle r) 确定此 Rectangle 是否与指定的 Rectangle 相交。

所以我会做（并且不要粘贴这段代码，它很可能不会工作，很长时间没有做过java并且我在使用它时没有做图形。）

```
Rectangle rect1 = new Rectangle(player.x, player.y, player.width, player.height);

Rectangle rect2 = new Rectangle(enemy.x, enemy.y, enemy.width, enemy.height);

//detects when the two rectangles hit
if(rect1.intersects(rect2))
{

System.out.println("game over, g");
} 
```

显然你需要把它放在某个地方。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-27T12:16:34.037

无需使用矩形...不断比较 2 个玩家的坐标。

喜欢 `if(x1===x&&y1==y)` **在比较时记得增加 x 的范围。**

如果你的矩形宽度为 30 则取为`if (x1>x&&x2>x+30)`..likely y

# asp.net - 如何在母版页cs文件中实例化用户控件

> ID：335601
> 
> 赞同：3
> 
> 时间：2008-12-02T21:53:41.447
> 
> 标签：asp.net, .net-3.5, master-pages, user-controls

我在母版页的 contentplace 持有者中添加了 uc，但是如何在母版页 .cs 文件中实例化用户控件以使其在母版页加载时可见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T22:03:54.577

如果您将其添加到 ContentPlaceHolder，并且子页面将内容添加到该 ContentPlaceHolder - 您的用户控件将不再出现。IOW，您添加的控件只是*默认*的。

如果您希望它始终可见，只需将其添加到 ContentPlaceHolder 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T22:12:31.097

我不肯定，但我认为您需要使用 Page.LoadControl() 在运行时将用户控件正式加载到页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T01:48:48.430

如果我没看错，您在母版页中有一个控件，需要从子页中引用它来更改它的可见性？还是我把事情搞错了？

无论如何，这就是我在 VB .Net 中通常的做法，移植应该不会太难 ;-)

在 aspx 页面中：

```
<%@ Reference Control="~/path/to/my/customControl.ascx" %> 
```

在代码隐藏中：

```
Dim customControl As ASP.customcontrol_ascx = Master.FindControl("customControl")
If customControl IsNot Nothing Then
    ...
End If 
```

# gwt - GWT 中的最佳分页表实现

> ID：335602
> 
> 赞同：18
> 
> 时间：2008-12-02T21:53:51.867
> 
> 标签：gwt

我需要向我的 GWT 应用程序添加一个分页、可排序的表。

我看到很多这样的，所以我正在寻找你的经验，通过选择最好的来节省我的时间。

到目前为止，我正在看...

[http://code.google.com/p/gwt-advanced-table/](http://code.google.com/p/gwt-advanced-table/)
[http://code.google.com/p/google-web-toolkit-incubator/wiki/PagingScrollTableOld](http://code.google.com/p/google-web-toolkit-incubator/wiki/PagingScrollTableOld)

我最喜欢第二个。有什么故事要讲吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-06-25T01:17:15.800

有一个支持分页的新 CellTable。它现在在 GWT 主干中，如果运气好的话，它会在今年晚些时候发布 2.1 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-12T16:54:14.563

我同意 GXT 是最好的解决方案，但是，正如我之前所说，它具有商业许可证，因此任何非开源项目都必须为此付费！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T21:58:52.543

[这里](https://stackoverflow.com/questions/231407/gwt-paging-widget)已经回答了

不幸的是，没有令人满意的实现。我发现的最佳方法是[GWT 小部件库](http://gwt-widget.sourceforge.net/)。我用它来创建我自己的分页解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T22:00:52.447

我完全不同意没有合适的解决方案。你真的需要检查 GXT。我在我的组织中使用 Paging Grid 实施取得了巨大成功。

[http://extjs.com/products/gxt/](http://extjs.com/products/gxt/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T13:58:35.913

我一直在使用 gwtlib [ [http://code.google.com/p/gwtlib/]](http://code.google.com/p/gwtlib/])，它是一个很好的消耗性解决方案，它使用了控制器模式，我一直在一些个人项目中使用它。

# compact-framework - NETCF DateTimePicker 控件在硬件上运行的问题

> ID：335604
> 
> 赞同：1
> 
> 时间：2008-12-02T21:54:09.103
> 
> 标签：compact-framework, datetimepicker

我一直在模拟器上开发一个紧凑的框架应用程序，其中一些表单使用了 DateTimePickers。这些在模拟器中工作正常，但在硬件上运行时，它们会导致表单在选择日期时关闭。没有抛出异常......表单只是意外关闭。有没有人经历过这个或知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T23:18:08.437

在您的设备和模拟器上，转到：

开始 | 设置 [系统] | 区域设置 [日期]

并查看两者是否具有相同的短日期、日期分隔符和长日期设置。这只是一个猜测，但它是模拟器和至少与日期选择器相关的设备之间的一个可能差异。如果它们不同，请尝试将设备设置为与模拟器相同，看看是否仍有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T18:03:02.020

感谢您的建议...但是模拟器和设备上的区域设置相同。

我对此的解决方案是将 DateTimePicker 控件的“ShowUpDown”属性设置为 true，以便禁用弹出日历并使用户能够滚动浏览值。这提供了没有错误的相同功能，但没有弹出日历的视觉吸引力。如果有人对我有任何其他想法可以尝试让我知道，否则这是可行的解决方案。

# networking - 如何为特定网络接口创建传出套接字？

> ID：335607
> 
> 赞同：24
> 
> 时间：2008-12-02T21:57:12.203
> 
> 标签：networking, language-agnostic, ip

我的服务器有两个不同的网络接口，每个接口都有不同的 IP 地址。如何创建一个套接字，以便它会输出一个特定的 IP 地址？

我更喜欢 python 示例，但问题与语言无关，所以赶紧走开。

编辑：请不要给我“你不能”作为答案。我的意思是，它是一台计算机。例如，我可以做任何我喜欢的事情 - 我可以通过编程方式即时禁用我不想要的一个界面。我正在寻找更漂亮的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-02T22:17:07.187

您当然可以将套接字绑定到特定设备。

我不知道如何在 python 中做到这一点，但是使用 berkeley socket api（在 C 中）你需要调用`setsockopt()`，使用选项`SO_BINDTODEVICE`.

您传入一个类型为 的接口描述符`struct ifreq`。理想情况下，您可以使用`ioctl()`, 并请求获取接口描述符的内容`SIOCGIFINDEX`- 将接口名称（例如 eth0）作为参数传递。

* * *

编辑：刚刚做了一个快速搜索，发现了python中套接字方法的[这个](http://pydoc.org/2.4.1/socket.html)文档。`setsockopt()`是其中之一。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-20T10:18:53.423

只是一点点 - 我真正需要的是绑定到特定的 IP，为了完整起见，解决方案是在创建后绑定套接字。python中的源代码：

```
import socket
s = socket.socket()
s.bind(("127.0.0.1", 0))
s.connect(("321.12.131.432", 80)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T15:51:14.440

```
import socket
s = socket.socket()
s.bind((get_ip_address('eth0'), 0)) 
```

来自[知乎](http://www.quora.com/Which-Python-library-allows-us-to-specify-network-interface-to-connect-to-the-Internet)

# java - 发送 JMS 消息的单元测试代码

> ID：335621
> 
> 赞同：6
> 
> 时间：2008-12-02T22:01:54.893
> 
> 标签：java, unit-testing, spring, jms, jmstemplate

我有一个类，它在做了一些事情之后，会发送一条 JMS 消息。我想对“东西”进行单元测试，但不一定是发送消息。

当我运行我的测试时，“东西”绿色条，但在发送消息时失败（它应该，应用程序服务器没有运行）。最好的方法是什么，是模拟消息队列，如果是，那是如何完成的。

我正在使用 Spring，并且“jmsTemplate”与“queue”一起被注入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-02T22:10:08.683

我会使用的最简单的答案是删除消息发送功能。例如，如果你有这个：

```
public class SomeClass {
    public void doit() {
        //do some stuff
        sendMessage( /*some parameters*/);
    }

    public void sendMessage( /*some parameters*/ ) { 
        //jms stuff
    }
} 
```

然后我会编写一个测试来掩盖 sendMessage 行为。例如：

```
@Test
public void testRealWorkWithoutSendingMessage() {
    SomeClass thing = new SomeClass() {
        @Override
        public void sendMessage( /*some parameters*/ ) { /*do nothing*/ }
    }

    thing.doit();
    assertThat( "Good stuff happened", x, is( y ) );
} 
```

如果被存根或隐藏的代码量很大，我不会使用*匿名*内部类，而只是使用“普通”内部类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-02T22:09:20.557

您可以注入一个模拟的 jmsTemplate。

假设easymock，类似

```
JmsTemplate mockTemplate = createMock(JmsTemplate.class) 
```

这样就行了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T08:56:11.687

另一个选择是[MockRunner](http://mockrunner.github.io/)，它为 JDBC、JMS、JSP、JCA 和 EJB 提供模拟环境。这使您可以像在“真实”情况下一样定义队列/主题并简单地发送消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-30T15:34:14.887

关于如何在更大的应用程序中组织所有这些测试存根/模拟......

我们构建和维护一个更大的企业应用程序，它是用 Spring 配置的。真正的 App 在 JBoss Appserver 上作为 EAR 运行。我们用 beanRefFactory.xml 定义了 Spring 上下文

```
<bean id="TheMegaContext"
          class="org.springframework.context.support.ClassPathXmlApplicationContext">
    <constructor-arg>
        <list>
            <value>BasicServices.xml</value>
            <value>DataAccessBeans.xml</value>
            <value>LoginBeans.xml</value>
            <value>BussinessServices.xml</value>
            ....
        </list>
    </constructor-arg>
</bean> 
```

为了运行单元测试，我们只使用不同的 beanRefFactory.xml，它交换 BasicServices 以使用测试版本。在该测试版本中，我们可以使用与生产版本中相同的名称定义 bean，但使用模拟/存根或任何实现（例如，数据库使用本地 Apache DPCP 池数据源，而生产版本使用来自 Appserver 的数据源）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-01-17T07:22:41.563

这是使用 jMock 单元测试的理想选择，因为您的服务器没有运行，但您将使用 jMock 来模拟与服务器的交互。

# actionscript-3 - 您可以在 AS3 函数中使用“ByRef”参数吗？

> ID：335624
> 
> 赞同：5
> 
> 时间：2008-12-02T22:02:48.603
> 
> 标签：actionscript-3, byref, args

知道如何从 ActionScript 3 中的函数**返回多个变量吗？**

像 VB.NET 这样您可以修改**输入参数的变量**（ByRef 参数）吗？

```
Sub do (ByRef inout As Integer)
 inout *= 5;
End Sub

Dim num As Integer = 10
Debug.WriteLine (num)        '10
do (num)
Debug.WriteLine (num)        '50 
```

* * *

**除了**返回**关联数组**之外还有什么？

```
return {a:"string 1", b:"string 2"} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-03T19:49:45.830

引用谷歌来源：

> > 在 ActionScript 3.0 中，所有参数都通过引用传递，因为所有值都存储为对象。但是，属于基本数据类型（包括 Boolean、Number、int、uint 和 String）的对象具有特殊的运算符，使它们的行为就像按值传递一样。

这导致我查找[规范来源](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f56.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-03T09:57:36.337

似乎**字符串、整数、单位、布尔值是按值传递的。** 我在 Flash 中尝试了这个小片段，结果是否定的：

```
function func(a:String){
    a="newVal";
}

var b:String = "old";

trace(b)    //  old
func(b);
trace(b)    //  old 
```

* * *

那么...... String 也是列入黑名单的数据类型吗？布尔也是？我的意思是**，有什么方法可以确定**哪些类型是通过引用传递的？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-02T22:28:46.103

除了 [u]ints，AS3 中的所有内容都是引用。概括地说，继承的所有内容都`Object`将通过引用提供给函数。

话虽如此，我相信你能做到的唯一方法是使用容器类，如 an`Array`或 a `String`（“5”并进行转换+数学）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-26T08:55:33.213

错误错误错误和错误..每个参数都是按值传递的！！！您可以更改传递的对象内部的属性这一事实并不意味着您可以更改对象本身。试试下面的代码

```
function Test(a:Object, b:Object):void {
   a = b;
}

function Test2():void {
   var s1:Sprite = null;
   var s2:Sprite = new Sprite;

   Test(s1,s2);
   Trace(s1);
   Trace(s2);
} 
```

这是跟踪结果：

```
null
[object Sprite] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-07-12T22:25:12.810

这都是值，如果您了解 C 编程，您将熟悉指针的概念。

将指针视为指向内存中的某些内容，并且所有变量名称“bob from (bob = new person();)”本质上都是您使用的指针。

现在，当你声明一个函数时，因为它们都是 By Value

```
function Test(a:Object, b:Object):void {
   a = b;
} 
```

您可以认为“a”和“b”都是新指针，因此只有在“Test”函数中“a”和“b”才存在并指向内存中的某些内容。

所以让我们使用它

```
var s1:Sprite = null;
var s2:Sprite = new Sprite;
Test(s1,s2); 
```

因此 s1 和 s2 指针将始终分别指向“null”和“内存中的新 Sprite”，除非它们在“Scope”内被修改为 s1 和 s2 <-在尝试解决之前请确保您了解变量范围这。

在函数中，我们现在有两个新指针“a”指向“null”，“b”指向“内存中与 s2 相同的精灵”。所以由于对象和数组本质上是指针的集合，并且函数只创建了两个新指针以供使用“a”和“b”任何属性/公开变量“指向内存中数据的指针”“a”或“b”仍然与“s1”和“s2”的指针完全相同，并且是完全相同的指针。

所以在函数中，当“a”被设置为“b”时，实际上所发生的只是“a”指针现在指向与“b”相同的东西。但是“s1”和“s2”仍然指向它们之前指向的东西。

！！！！如果这是通过引用，您将无法将“a”和“b”视为新指针，它们实际上将是“s1”和“s2”本身，除非您将它们写为“a”和“b” .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-07T06:29:58.987

请注意 DarthZorG 的示例与 Flash 文档中的示例之间的细微差别：

```
function passByRef(objParam:Object):void 
{ 
    objParam.x++; 
    objParam.y++; 
    trace(objParam.x, objParam.y); 
} 
var objVar:Object = {x:10, y:15}; 
trace(objVar.x, objVar.y); // 10 15 
passByRef(objVar); // 11 16 
trace(objVar.x, objVar.y); // 11 16 
```

要点： **您无法更改引用所指向的内容，但您可以更改引用所指向的数据，只要该引用是对象/数组即可。**

# .net - 如何为 XAML 实现设计时验证，从而导致编译错误？

> ID：335645
> 
> 赞同：0
> 
> 时间：2008-12-02T22:09:33.253
> 
> 标签：.net, wpf, data-binding, xaml, expression

如何强制在 Visual Studio 中编写 XAML 的开发人员应遵循某些标准，并且需要运行验证以及是否引发了无效的编译时错误。

例如，确保在设计期间按照我希望实现的“自定义验证”正确编写所有数据绑定表达式（有些很长）。像，

```
<TextBox Text="{Binding Source={StaticResource CALCULATED}, Converter={StaticResource XPathConverter}, ConverterParameter=@FIRSTNAME_STRING, XPath=@FIRSTNAME}"/> 
```

在上面的示例中，如果**Text 属性中的绑定表达式不是该格式**，则应该存在**编译错误**。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T08:07:26.167

没有内置的方法可以做到这一点。获得此结果的最佳方法是在输入上运行自定义工具。这将需要您做大量的工作，因为这将涉及自己解析文件，但您应该能够让这个场景工作。

创建自定义生成器的示例站点

[http://www.drewnoakes.com/snippets/WritingACustomCodeGeneratorToolForVisualStudio/](http://www.drewnoakes.com/snippets/WritingACustomCodeGeneratorToolForVisualStudio/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T23:07:37.687

抱歉，XAML 语言服务也不能以这种方式扩展。今天最好的方法是编写一个构建任务。我认为您可以将其挂接到 MarkupCompilePass1DependsOn 目标中，并且在用户保存或更改 XAML 文件时会自动调用它。您仍然需要从我们这里冗余地扫描文件，但您不必等待实际构建来完成这项工作。这是目前正在从事 WPF 设计的 Microsoft 架构师之一的直接引用。

# windows - 合并多个 Google 日历供稿以在我的桌面上显示

> ID：335648
> 
> 赞同：0
> 
> 时间：2008-12-02T22:10:46.763
> 
> 标签：windows, google-calendar-api

我有几个 Google 日历，我想使用[Samurize](http://www.samurize.com/)合并并放置在我的 Windows 桌面上。我试过使用 Samurize 的 Page Scraper 插件，但它似乎不能胜任这项任务。

我可以让 Samurize 运行脚本并将其输出放在桌面上，但我不确定执行此操作的最佳工具是什么。

我拥有的所有网址都是以下形式：

```
http://www.google.com/calendar/feeds/example%40gmail.com/private-REMOVED/basic?futureevents=true&orderby=starttime&sortorder=ascending&singleevents=true 
```

所以我可以使用 curl 获取它们，但是我需要过滤它们。

我想要的东西看起来像：

```
2009 12 02  Event from calendar 1's description 
2009 12 03  Event from calendar 2's description 
2009 12 04  Event from calendar 1's description 
2009 12 05  Event from calendar 3's description 
2009 12 06  Event from calendar 1's description 
```

但是，日历提要中的日期格式如下：

```
<title type='html'>Event from calendar 1's description</title><summary type='html'>When: Fri 5 Dec 2008&lt;br&gt; 
```

**那么如何过滤掉日期和描述，并转换日期呢？**

（我已经安装了 cygwin，所以使用 perl 或 sed/awk 的东西会很完美，因为我对它们足够熟悉，所以我有信心在未来改变它们，但我愿意接受建议。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T22:47:38.980

我正在学习 perl，所以请不要笑得太厉害，但这里有一些东西可能会让你大部分时间解析：

```
#!C:\Perl\bin -w
use strict;

my %months = ("Jan", "01", "Feb", "02", "Mar", "03", ... etc. etc. ... "Dec", "12");

$_ = "<title type='html'>Event from calendar 1's description</title><summary type='html'>When: Fri 5 Dec 2008<br>";

if (/<title type='html'>([\d\D]*)<\/title><summary type='html'>When: (\S+) (\S+) (\S+) (\S+)<br>/)
{
    print "$5 $months{$4} $3 $1\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T00:24:03.653

基于 John W 的脚本，这就是我正在使用的

```
#!c:\cygwin\bin\perl.exe -w
use strict;
use LWP::Simple qw(get);

my %calendars = ( "Sam Hasler", "http://www.google.com/calendar/feeds/blah/blah/basic"
                , "Family    ", "http://www.google.com/calendar/feeds/blah/blah/basic"
                , "Work      ", "http://www.google.com/calendar/feeds/blah/blah/basic"
                );

my $params = "?futureevents=true&orderby=starttime&sortorder=ascending&singleevents=true";

my %months = ( "Jan", "01", "Feb", "02", "Mar", "03", "Apr", "04"
             , "May", "05", "Jun", "06", "Jul", "07", "Aug", "08"
             , "Sep", "09", "Oct", "10", "Nov", "11", "Dec", "12");

my $calendar_name;
my $calendar_url;
my @lines;

while (($calendar_name, $calendar_url) = each(%calendars)){
    my $calendar_data = get "$calendar_url$params";
    @lines = split(/\n/, $calendar_data);

    foreach (@lines) {
        if (/<title type='html'>([\d\D]*)<\/title><summary type='html'>When: (\S+) (\S+) (\S+) (\S+)&lt;br&gt;/)
        {
            my $day = "$3";
            if ($3 < 10 ) {
                $day = "0$3";
            }

            print "$5 $months{$4} $day\t$calendar_name\t$1\n";
        }
    }

} 
```

我只是通过管道输出`sort`以按日期顺序获取它。

**更新：**我已将我的脚本转换为插件并将其提交到 Samurize 网站：[Merge Google Calendar feeds](http://www.samurize.com/modules/mydownloads/singlefile.php?cid=7&lid=2287)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-23T14:07:25.990

两个想法。

您可以使用 Yahoo Pipes（请参阅[这篇文章](http://ouseful.wordpress.com/2008/12/06/merging-several-calendar-ical-feeds-with-yahoo-pipes/)。）

或者，如果您不想等待 Yahoo 刷新其数据，[这里](http://code.google.com/p/merge-ics/)有一个正在开发的用于合并 ICAL 文件的 python 脚本。

# asp-classic - 如何从 ASP Classic 中的变量调用方法？

> ID：335659
> 
> 赞同：2
> 
> 时间：2008-12-02T22:14:05.367
> 
> 标签：asp-classic, vbscript, late-binding

例如，我如何在下面运行 me.test？

```
myvar = 'test'
me.myvar 
```

ASP 寻找方法“myvar”但没有找到。在 PHP 中我可以简单地说 $me->$myvar 但 ASP 的语法不区分变量和方法。建议？

与此密切相关的是，ASP Classic 中是否有 method_exists 函数？

提前致谢！

**编辑：**我正在编写一个验证类，并想通过管道分隔的字符串调用方法列表。

例如，要验证名称字段，我会调用：

```
validate("required|min_length(3)|max_length(100)|alphanumeric") 
```

我喜欢用一行来显示给定字段的所有验证方式的想法。字符串的每个管道分隔部分都是方法的名称。

如果您有更好的设置建议，我会全力以赴！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-05T17:54:37.773

您可以使用以下`GetRef`函数在 VBScript 中实现此目的：-

```
Function Test(val)
  Test = val & " has been tested"
End Function

Dim myvar : myvar = "Test"
Dim x : Set x = GetRef(myvar)
Response.Write x("Thing") 
```

将“事物已被测试”发送给客户端。

所以这是您使用 GetRef 的验证要求：-

```
validate("Hello World", "min_length(3)|max_length(10)|alphanumeric")

Function required(val)
    required = val <> Empty
End Function

Function min_length(val, params)
    min_length = Len(val) >= CInt(params(0))
End Function

Function max_length(val, params)
    max_length = Len(val) <= CInt(params(0))
End Function

Function alphanumeric(val)
    Dim rgx : Set rgx = New RegExp
    rgx.Pattern = "^[A-Za-z0-9]+$"
    alphanumeric = rgx.Test(val)
End Function

Function validate(val, criterion)

    Dim arrCriterion : arrCriterion = Split(criterion, "|")
    Dim criteria

    validate = True

    For Each criteria in arrCriterion

        Dim paramListPos : paramListPos = InStr(criteria, "(")

        If paramListPos = 0 Then
            validate = GetRef(criteria)(val)
        Else
            Dim paramList
            paramList = Split(Mid(criteria, paramListPos + 1, Len(criteria) - paramListPos - 1), ",")
            criteria = Left(criteria, paramListPos - 1)
            validate = GetRef(criteria)(val, paramList)
        End If
        If Not validate Then Exit For
    Next

End Function 
```

在提供了这个之后，我不得不说，如果你熟悉 PHP，那么 JScript 将是服务器上的更好选择。在 Javascript 中，您可以调用这样的方法：-

```
function test(val) { return val + " has been tested"; )
var myvar = "test"
Response.Write(this[myvar]("Thing")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-02T22:21:27.553

如果您谈论的是 VBScript，它没有那种功能。（至少据我所知）我可能会这样尝试：

```
Select myvar
   case "test":
      test

   case "anotherSub":
      anotherSub

   else
      defaultSub

end select 
```

我写 VBScript 已经有一段时间了（谢天谢地），所以我不确定我的语法有多好。

编辑-另一种策略

就个人而言，出于安全原因，我会执行上述操作。但是，如果您绝对不喜欢它，那么您可能想尝试在您的页面上使用不同的语言。我过去在我的经典 ASP 页面（服务器端）上同时使用了 Javascript 和 VBScript，并且能够从我当前的语言调用以另一种语言声明的函数。当我想用正则表达式做一些事情但在 VBScript 中时，这特别方便。

你可以尝试类似的东西

```
<script language="vbscript" runat="server">
    MyJavascriptEval myvar
</script>
<script language="javascript" runat="server">
    function MyJavascriptEval( myExpression)
    {
        eval(myExpression);
    }

    /* OR
    function MyJavascriptEval( myExpression)
    {
        var f = new Function(myExpression);
        f();
    }
    */
</script> 
```

我没有在经典的 ASP 页面中对此进行测试，但我认为它已经足够接近，只需稍加调整即可使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-06T13:30:58.337

在 ASP/VBScript 中使用“执行”语句。

```
Execute "Response.Write ""hello world""" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-02T22:27:05.357

PHP 动态调用或创建函数的能力是导致不良编程实践的技巧。您需要解释您要完成的工作（而不是如何完成）并学习正确的编码方式。

仅仅因为你可以做某事，并不能使它正确或一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T22:20:43.530

ASP 不支持这种方式的后期绑定。从更大的意义上说，你想做什么？解释一下，有人可以告诉你如何在asp中完成它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-05T18:14:25.440

此外，您可能会考虑“客观化”验证功能。在 VB 脚本中创建类是可能的（尽管没有广泛使用）。

```
<%
Class User
' declare private class variable
Private m_userName

' declare the property
Public Property Get UserName
  UserName = m_userName
End Property
Public Property Let UserName (strUserName)
  m_userName = strUserName
End Property

' declare and define the method
Sub DisplayUserName
  Response.Write UserName
End Sub

End Class
%> 
```

# scaling - 非轴对齐缩放

> ID：335660
> 
> 赞同：1
> 
> 时间：2008-12-02T22:14:33.697
> 
> 标签：scaling, vectormath

找到一个好的方法来做到这一点让我有一段时间感到困惑：假设我有一个包含一组点的选择框。通过拖动角，您可以缩放框中的点（之间的距离）。现在对于轴对齐的盒子，这很容易。取一个角作为锚点（从每个点中减去这个角，对其进行缩放，然后再次将其添加到该点）并将每个点 x 和 y 乘以框变大的因子。

但是现在取一个不与 x 和 y 轴对齐的框。当你拖动它的角时，你如何缩放这个框内的点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T22:21:01.640

任何盒子都包含在一个圆圈内。
你找到绑定盒子的圆，找到它的中心，然后做与轴对齐盒子完全相同的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T22:28:36.210

您选择矩形的一个角作为原点。连接到它的两条边将是基础（`u`和`v`，应该相互垂直）。您需要先将它们标准化。

`u`从坐标中减去原点，并使用缩放向量 ( ) 和另一个向量 ( )计算点积`v`。这会给你多少`u`和`v`对坐标的贡献。

然后你缩放你想要的组件。要获得最终坐标，只需将（现在缩放的）分量与它们各自的向量相乘，然后将它们相加。

例如：

```
Points: p1 = (3,5) and p2 = (6,4)

Selection corners: (0,2),(8,0),(9,4),(1,6)
selected origin = (8,0)

u = ((0,2)-(8,0))/|(0,2)-(8,0)| = <-0.970, 0.242>
v = <-0.242, -0.970> 
```

（`v`是`u`，但坐标翻转，其中一个被否定）

```
p1´ = p1 - origin = (-5, 5)
p2´ = p2 - origin = (-2, 4)

p1_u = p1´ . u = -0.970 * (-5) + 0.242 * 5 = 6.063
p1_v = p1´ . v = -0.242 * (-5) - 0.970 * 5 = -3.638

Scale p1_u by 0.5: 3.038

p1_u * u + p1_v * v + origin = <5.941, 4.265>

Same for p2: <7.412, 3.647> 
```

正如您可能看到的那样，它们已经移向线`(8,0)`- `(9,4)`，因为我们按 0.5 缩放，并`(0,8)`以原点为原点。

**编辑：**事实证明，这比我预期的要难以解释。

在 python 代码中，它可能看起来像这样：

```
def scale(points, origin, u, scale):
    # normalize
    len_u = (u[0]**2 + u[1]**2) ** 0.5
    u = (u[0]/len_u, u[1]/len_u)
    # create v
    v = (-u[1],u[0])
    ret = []
    for x,y in points:
        # subtract origin
        x, y = x - origin[0], y - origin[1]
        # calculate dot product
        pu = x * u[0] + y * u[1]
        pv = x * v[0] + y * v[1]
        # scale
        pu = pu * scale
        # transform back to normal space
        x = pu * u[0] + pv * v[0] + origin[0]
        y = pu * u[1] + pv * v[1] + origin[1]
        ret.append((x,y))
    return ret

>>> scale([(3,5),(6,4)],(8,0),(-8,2),0.5)
[(5.9411764705882355, 4.2647058823529411), (7.4117647058823533, 3.6470588235294117)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T23:57:39.527

假设盒子被定义为一组四个点（P1、P2、P3 和 P4）。为简单起见，我们假设您正在拖动 P1，而 P3 是对角（您用作锚点的那个）。

让我们将鼠标位置标记为 M，将要计算的新点标记为 N1、N2 和 N4。当然，P3 将保持不变。

您可以使用矢量减法和矢量点积简单地计算您的比例因子：

```
scale = ((M - P3) dot (P1 - P3)) / ((P1 - P3) dot (P1 - P3))
```

并且可以使用标量乘法和向量加法找到三个新点：

```
N1 = scale*P1 + (1 - scale)*P3
N2 = scale*P2 + (1 - scale)*P3
N4 = scale*P4 + (1 - scale)*P3
```

**编辑：**我看到[MizardX](https://stackoverflow.com/users/22364/mizardx)已经回答了这个问题，所以我的回答是为了帮助解决这个困难的解释。我希望它有帮助！

**编辑：**这是非比例缩放的算法。在这种情况下，N1 等于 M（被拖动的点跟随鼠标），所以唯一的兴趣点是 N2 和 N4：

```
N2 = ((M - P3) dot (P2 - P3)) / ((P2 - P3) dot (P2 - P3)) * (P2 - P3) + P3
N4 = ((M - P3) dot (P4 - P3)) / ((P4 - P3) dot (P4 - P3)) * (P4 - P3) + P3
```

其中 * 表示标量乘法

**编辑：**这是一些回答问题的 C++ 代码。我敢肯定这个问题现在早已不复存在，但这是一个有趣的问题，我在编写代码时玩得很开心。

```
#include <vector>

class Point
{
    public:
        float x;
        float y;
        Point() { x = y = 0; }
        Point(float nx, float ny) { x = nx; y = ny; }
};

Point& operator-(Point& A, Point& B) { return Point(A.x-B.x, A.y-B.y); }
Point& operator+(Point& A, Point& B) { return Point(A.x+B.x, A.y+B.y); }
Point& operator*(float sc, Point& P) { return Point(sc*P.x, sc*P.y); }

float dot_product(Point A, Point B) { return A.x*B.x + A.y*B.y; }

struct Rect { Point point[4]; };

void scale_points(Rect box, int anchor, Point mouse, vector<Point> points)
{
    Point& P3 = box.point[anchor];
    Point& P2 = box.point[(anchor + 1)%4];
    Point& P1 = box.point[(anchor + 2)%4];
    Point& P4 = box.point[(anchor + 3)%4];

    Point A = P4 - P3;
    Point aFactor = dot_product(mouse - P3, A) / dot_product(A, A) * A;

    Point B = P2 - P3;
    Point bFactor = dot_product(mouse - P3, B) / dot_product(B, B) * B;

    for (int i = 0; i < points.size(); i++)
    {
        Point P = points[i] - P3;
        points[i] = P3 + dot_product(P, aFactor) + dot_product(P, bFactor);
    }
}
```

# c# - 使用 SQL 2000 和 ASP.NET C# 创建搜索引擎

> ID：335670
> 
> 赞同：1
> 
> 时间：2008-12-02T22:20:21.157
> 
> 标签：c#, asp.net, sql-server, search

我希望创建一个基于 SQL 2000 DB 中的 5 列的搜索引擎。我查看了 Lucene.NET 并阅读了它的文档，但想知道是否有人以前有这方面的经验？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T16:45:12.833

恕我直言，这不是关于性能，而是关于可维护性。为了使用 Lucene.NET 索引您的内容，您必须创建一些机制（触发服务），该机制将从 Lucene 索引中添加新行（并删除已删除的行）。

从初学者的角度来看，我认为使用 SQL Server 内置的全文搜索引擎可能更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T13:09:34.763

我还没有处理过 Lucene，但我的一个朋友处理过，他说 lucene 的性能比全文索引好 4 到 5 倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T16:55:16.993

性能更好？我认为这在很大程度上取决于数量以及您期望数据如何扩展。

在我看来，SQL Server Full Text 要好得多。要使其与 lucene 一起使用，您将需要一个通过从 SQL 数据库中提取数据来维护索引的过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-20T16:22:54.003

您可以使用 Lucene 索引或 SQL FTS 索引。从简单的角度来看，我个人倾向于 Lucene。它也不是一个黑匣子。哪种解决方案会起作用（它们都可能起作用）取决于查询负载、数据大小和数据更新频率。Lucene 确实为为网站构建非常可扩展的搜索解决方案提供了一条陈旧的路径。将来请提供有关您的问题的更多信息。

# perl - 是否有处理 SQL 限制和事务的 DBI 代理？

> ID：335677
> 
> 赞同：5
> 
> 时间：2008-12-02T22:22:45.070
> 
> 标签：perl, security, proxy, dbi, dbd-proxy

我正在寻找一个同时支持 SQL 限制和事务的 DBI（或类似）代理。我知道的两个是：

*   `DBD::Proxy`
*   `DBD::Gofer`

# DBD::代理

我发现的问题`DBD::Proxy`是它的服务器，`DBI::ProxyServer`不仅限制通过网络进入的查询（我想要的），而且还限制了数据库驱动程序*内部生成的查询。*因此，例如， with `DBD::Oracle`、 ping 以及它自己发出的许多其他查询不再起作用。

我不能只允许他们，因为：

*   那是相当多的 DBD::Oracle 内部知识，而且非常脆弱。
*   白名单是`query_name => 'sql'`，`query_name`传递给的第一个词在哪里`prepare`。DBD::Oracle 有很多内部查询，其中很多的第一个词是`select`(duh)。

所以，我似乎无法使用`DBD::Proxy`

# DBD::Gofer

我没有尝试过 DBD::Gofer，因为文档似乎告诉我我不能通过它使用事务：

> ## 约束
> 
> ...
> 
> **您不能使用交易**
> 
> 仅自动提交。不支持交易。

那么，在我编写自己的应用程序特定代理（使用`RPC::PLServer`？）之前，是否有代码可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-05T00:12:00.373

这个问题最好在 DBI 用户邮件列表中提出，`dbi-users@perl.org`. 在[http://dbi.perl.org/上注册](http://dbi.perl.org/)

我不确定您对 DBD::Proxy 限制查询的意思。在我使用它的唯一场合，它根本没有修改查询。

# asp.net-mvc - MVC 示例使用 var

> ID：335682
> 
> 赞同：7
> 
> 时间：2008-12-02T22:24:03.583
> 
> 标签：asp.net-mvc, var

也许我生活在一个泡沫中，或者我太新了，但我想知道是否有人注意到在 Microsoft 的许多 MVC 示例中大量使用“var”来声明变量而不是特定类型？这样做是有目的的，还是现在要做的“in”事情，或者只是个人风格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T22:36:37.473

[Jared Parsons 在他的博客](http://blogs.msdn.com/jaredpar/archive/2008/09/09/when-to-use-type-inference.aspx)中谈到了这一点，我不同意他的结论（正如我在那里的评论所表明的那样），但这篇文章应该解释**为什么**它被如此使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T23:10:15.237

所有 MVC 视频都是快速制作的（也不总是使用单元测试或将业务逻辑放在控制器中）。这不是因为他们是糟糕的程序员，或者“var”很酷，而是因为他们想快速展示一些很酷的新功能，两次输入全名并不是他们想要展示的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-12-02T23:46:30.547

我在下面给出的答案（斜体）是不正确的，但我认为这是一个假设，很多人会让我把它留在里面。关于为什么它是错误的解释，请阅读：

[var 不是对象](http://www.interact-sw.co.uk/iangblog/2005/09/23/varisntobject)

***错误答案：****我个人认为 var 的名字不好，因为它在 Visual Basic 和 Excel Basic 等语言中使用不佳。归根结底，.NET 中的所有内容都派生自对象，这与将某些内容声明为 var 基本相同。*

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2008-12-02T22:33:03.253

上述所有的。

# .net - 从 .NET 3.5 到 PHP Web 服务的 SOAP 附件

> ID：335688
> 
> 赞同：3
> 
> 时间：2008-12-02T22:27:08.210
> 
> 标签：.net, php, .net-3.5, soap

我们有一个 PHP Web 服务，我们需要从 .NET 3.5 Web 应用程序发送一个文件。

PHP 团队已经声明我们需要以 SOAP 附件的形式提供文件，但是我们找不到在 .NET 中可以做到这一点的方法。

我们能够遇到的所有参考示例都指的是使用 DIME，但 .NET 3.5/VS 2008 不支持（或者看起来如此）。

知道如何发送 SOAP 附件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T05:09:43.033

来自[维基百科](http://en.wikipedia.org/wiki/Direct_Internet_Message_Encapsulation)：

> 直接 Internet 消息封装 (DIME) 是 Microsoft 提出的用于通过 SOAP 传输二进制和其他封装数据的 Internet 标准。”

这与 SOAP with Attachments 或 XOP/MOTM 完全无关，后者取代了它：

> [微软现在将其描述为“被 SOAP 消息传输优化机制 (MTOM)规范](http://msdn.microsoft.com/en-us/library/ms951268.aspx)所取代”

据我所知，DIME 应该是 MIME 的简化版本，这是 Soap With Attachments 使用的。所以 DIME 只是一种典型的“拥抱、延伸、熄灭”技术，无论如何它似乎已经死了。

如本文所述，PHP 5 SOAP 扩展不支持[SwA](http://www.nabble.com/SOAP-and-attachment-td15075220.html)。[WSF/PHP](http://wso2.org/projects/wsf/php/features)支持 MTOM。

要在 .NET 中实现 MTOM，请看[这个](http://www.codeproject.com/KB/XML/MTOMWebServices.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T22:32:22.710

[如何：使用 DIME 向 SOAP 消息添加附件](http://msdn.microsoft.com/en-us/library/ms824597.aspx)

# python - ConfigParser 中的列表

> ID：335695
> 
> 赞同：212
> 
> 时间：2008-12-02T22:29:05.743
> 
> 标签：python, configparser

典型的 ConfigParser 生成的文件如下所示：

```
[Section]
bar=foo
[Section 2]
bar2= baz 
```

现在，有没有办法索引列表，例如：

```
[Section 3]
barList={
    item1,
    item2
} 
```

相关问题：[Python 的每个部分的 ConfigParser 唯一键](https://stackoverflow.com/questions/287757/pythons-configparser-unique-keys-per-section)

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2012-03-16T10:48:22.970

我正在使用 ConfigParser 和 JSON 的组合：

```
[Foo]
fibs: [1,1,2,3,5,8,13] 
```

只需阅读它：

```
>>> json.loads(config.get("Foo","fibs"))
[1, 1, 2, 3, 5, 8, 13] 
```

如果您的列表很长，您甚至可以换行（感谢@peter-smit）：

```
[Bar]
files_to_check = [
     "/path/to/file1",
     "/path/to/file2",
     "/path/to/another file with space in the name"
     ] 
```

当然我可以只使用 JSON，但我发现配置文件更具可读性，并且 [DEFAULT] 部分非常方便。

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2008-12-02T22:56:44.517

没有什么能阻止您将列表打包成一个分隔字符串，然后在您从配置中获取字符串后将其解包。如果您这样做，您的配置部分将如下所示：

```
[Section 3]
barList=item1,item2 
```

它并不漂亮，但对于大多数简单的列表都很有用。

* * *

## 回答 #3

> 赞同：108
> 
> 时间：2011-11-08T09:50:51.963

我最近在一个列表的配置文件中使用了一个专门的部分来实现这一点：

```
[paths]
path1           = /some/path/
path2           = /another/path/
... 
```

并`config.items( "paths" )`用于获取路径项的可迭代列表，如下所示：

```
path_items = config.items( "paths" )
for key, path in path_items:
    #do something with path 
```

希望这有助于其他人谷歌搜索这个问题;）

* * *

## 回答 #4

> 赞同：79
> 
> 时间：2012-08-08T14:26:45.620

许多人不知道的一件事是允许多行配置值。例如：

```
;test.ini
[hello]
barlist = 
    item1
    item2 
```

的值`config.get('hello','barlist')`现在将是：

```
"\nitem1\nitem2" 
```

您可以使用 splitlines 方法轻松拆分（不要忘记过滤空项目）。

如果我们看一下像 Pyramid 这样的大框架，他们正在使用这种技术：

```
def aslist_cronly(value):
    if isinstance(value, string_types):
        value = filter(None, [x.strip() for x in value.splitlines()])
    return list(value)

def aslist(value, flatten=True):
    """ Return a list of strings, separating the input based on newlines
    and, if flatten=True (the default), also split on spaces within
    each line."""
    values = aslist_cronly(value)
    if not flatten:
        return values
    result = []
    for value in values:
        subvalues = value.split()
        result.extend(subvalues)
    return result 
```

[来源](https://github.com/Pylons/pyramid/blob/1c37b5487d229d1896ec983de1377f3282825739/pyramid/settings.py#L44)

我自己，如果这对您来说很常见，我可能会扩展 ConfigParser：

```
class MyConfigParser(ConfigParser):
    def getlist(self,section,option):
        value = self.get(section,option)
        return list(filter(None, (x.strip() for x in value.splitlines())))

    def getlistint(self,section,option):
        return [int(x) for x in self.getlist(section,option)] 
```

请注意，使用此技术时需要注意一些事项

1.  作为项目的新行应以空格开头（例如空格或制表符）
2.  以下所有以空格开头的行都被认为是前一项的一部分。此外，如果它有一个 = 符号或者它以 ; 开头 跟随空格。

* * *

## 回答 #5

> 赞同：54
> 
> 时间：2014-03-18T12:10:56.493

如果你想**从字面上**传递一个列表，那么你可以使用：

```
ast.literal_eval() 
```

例如配置：

```
[section]
option=["item1","item2","item3"] 
```

代码是：

```
import ConfigParser
import ast

my_list = ast.literal_eval(config.get("section", "option"))
print(type(my_list))
print(my_list) 
```

输出：

```
<type'list'>
["item1","item2","item3"] 
```

* * *

## 回答 #6

> 赞同：48
> 
> 时间：2018-11-13T06:00:12.100

在这些答案中没有提到[`converters`kwarg for是相当令人失望的。`ConfigParser()`](https://docs.python.org/3/library/configparser.html#customizing-parser-behaviour)

根据文档，您可以将字典传递给`ConfigParser`它将`get`为解析器和部分代理添加一个方法。所以对于一个列表：

例子.ini

```
[Germ]
germs: a,list,of,names, and,1,2, 3,numbers 
```

解析器示例：

```
cp = ConfigParser(converters={'list': lambda x: [i.strip() for i in x.split(',')]})
cp.read('example.ini')
cp.getlist('Germ', 'germs')
['a', 'list', 'of', 'names', 'and', '1', '2', '3', 'numbers']
cp['Germ'].getlist('germs')
['a', 'list', 'of', 'names', 'and', '1', '2', '3', 'numbers'] 
```

这是我个人最喜欢的，因为不需要子类化，而且我不必依赖最终用户来完美编写 JSON 或可由`ast.literal_eval`.

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2014-03-27T00:20:03.480

我降落在这里寻求消耗这个......

```
[global]
spys = richard.sorge@cccp.gov, mata.hari@deutschland.gov 
```

答案是用逗号分割它并去掉空格：

```
SPYS = [e.strip() for e in parser.get('global', 'spys').split(',')] 
```

要获得列表结果：

```
['richard.sorge@cccp.gov', 'mata.hari@deutschland.gov'] 
```

它可能无法准确回答 OP 的问题，但可能是某些人正在寻找的简单答案。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2015-05-13T18:50:04.273

这是我用于列表的内容：

配置文件内容：

```
[sect]
alist = a
        b
        c 
```

代码 ：

```
l = config.get('sect', 'alist').split('\n') 
```

它适用于字符串

如果是数字

配置内容：

```
nlist = 1
        2
        3 
```

代码：

```
nl = config.get('sect', 'alist').split('\n')
l = [int(nl) for x in nl] 
```

谢谢。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-08-27T07:15:45.597

我在我的项目中完成了类似的任务，其中的键没有值：

```
import configparser

# allow_no_value param says that no value keys are ok
config = configparser.ConfigParser(allow_no_value=True)

# overwrite optionxform method for overriding default behaviour (I didn't want lowercased keys)
config.optionxform = lambda optionstr: optionstr

config.read('./app.config')

features = list(config['FEATURES'].keys())

print(features) 
```

输出：

```
['BIOtag', 'TextPosition', 'IsNoun', 'IsNomn'] 
```

应用程序配置：

```
[FEATURES]
BIOtag
TextPosition
IsNoun
IsNomn 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2019-11-06T18:58:07.133

因此，我更喜欢的另一种方法是仅拆分值，例如：

```
#/path/to/config.cfg
[Numbers]
first_row = 1,2,4,8,12,24,36,48 
```

可以像这样加载到字符串或整数列表中，如下所示：

```
import configparser

config = configparser.ConfigParser()
config.read('/path/to/config.cfg')

# Load into a list of strings
first_row_strings = config.get('Numbers', 'first_row').split(',')

# Load into a list of integers
first_row_integers = [int(x) for x in config.get('Numbers', 'first_row').split(',')] 
```

此方法可防止您需要将值包装在括号中以作为 JSON 加载。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-12-02T22:37:12.950

配置解析器仅支持原始类型进行序列化。对于这种要求，我会使用 JSON 或 YAML。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-04-08T20:40:56.313

为了让 Grr 的答案（我最喜欢的）更进一步，您可以使用 map 函数，而不是在 .ini 文件中用引号将列表项括起来。这允许您以 Python 方式指定列表项数据类型。

配置文件：

```
[section]
listKey1: 1001, 1002, 1003
listKey2: AAAA, BBBB, CCCC 
```

代码：

```
cfgFile = 'config.ini'
parser = ConfigParser(converters={'list': lambda x: [i.strip() for i in x.split(',')]})
parser.read(cfgFile)

list1 = list(map(int, parser.getlist('section', 'listKey1')))
list2 = list(map(str, parser.getlist('section', 'listKey2')))

print(list1)
print(list2) 
```

输出：

```
[1001, 1002, 1003]
['AAAA', 'BBBB', 'CCCC'] 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-03T08:58:59.713

我过去也遇到过同样的问题。如果您需要更复杂的列表，请考虑通过从 ConfigParser 继承来创建自己的解析器。然后你会用它覆盖get方法：

```
 def get(self, section, option):
    """ Get a parameter
    if the returning value is a list, convert string value to a python list"""
    value = SafeConfigParser.get(self, section, option)
    if (value[0] == "[") and (value[-1] == "]"):
        return eval(value)
    else:
        return value 
```

使用此解决方案，您还可以在配置文件中定义字典。

不过要小心！这并不安全：这意味着任何人都可以通过您的配置文件运行代码。如果您的项目中安全性不是问题，我会考虑直接使用 python 类作为配置文件。以下是比 ConfigParser 文件更强大和可消耗的文件：

```
class Section
    bar = foo
class Section2
    bar2 = baz
class Section3
    barList=[ item1, item2 ] 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-10-31T17:20:10.967

```
import ConfigParser
import os

class Parser(object):
    """attributes may need additional manipulation"""
    def __init__(self, section):
        """section to retun all options on, formatted as an object
        transforms all comma-delimited options to lists
        comma-delimited lists with colons are transformed to dicts
        dicts will have values expressed as lists, no matter the length
        """
        c = ConfigParser.RawConfigParser()
        c.read(os.path.join(os.path.dirname(__file__), 'config.cfg'))

        self.section_name = section

        self.__dict__.update({k:v for k, v in c.items(section)})

        #transform all ',' into lists, all ':' into dicts
        for key, value in self.__dict__.items():
            if value.find(':') > 0:
                #dict
                vals = value.split(',')
                dicts = [{k:v} for k, v in [d.split(':') for d in vals]]
                merged = {}
                for d in dicts:
                    for k, v in d.items():
                        merged.setdefault(k, []).append(v)
                self.__dict__[key] = merged
            elif value.find(',') > 0:
                #list
                self.__dict__[key] = value.split(',') 
```

所以现在我的`config.cfg`文件可能如下所示：

```
[server]
credentials=username:admin,password:$3<r3t
loggingdirs=/tmp/logs,~/logs,/var/lib/www/logs
timeoutwait=15 
```

可以为我的小项目解析成足够细粒度的对象。

```
>>> import config
>>> my_server = config.Parser('server')
>>> my_server.credentials
{'username': ['admin'], 'password', ['$3<r3t']}
>>> my_server.loggingdirs:
['/tmp/logs', '~/logs', '/var/lib/www/logs']
>>> my_server.timeoutwait
'15' 
```

这是为了非常快速地解析简单的配置，您将失去获取整数、布尔值和其他类型输出的所有能力，而无需转换从返回的对象`Parser`，或重新执行 Parser 类在其他地方完成的解析工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-31T12:16:32.997

`json.loads`&`ast.literal_eval`似乎正在工作，但配置中的简单列表将每个字符视为字节，因此甚至返回方括号....

意思是如果配置有`fieldvalue = [1,2,3,4,5]`

然后`config.read(*.cfg)` `config['fieldValue'][0]`返回`[`代替`1`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-10-23T09:41:57.423

正如 Peter Smit ( [https://stackoverflow.com/a/11866695/7424596](https://stackoverflow.com/a/11866695/7424596) ) 所提到的，您可能想要扩展 ConfigParser，此外，可以使用插值器自动转换为列表和从列表中转换。

作为底部的参考，您可以找到自动转换配置的代码，例如：

```
[DEFAULT]
keys = [
    Overall cost structure, Capacity, RAW MATERIALS,
    BY-PRODUCT CREDITS, UTILITIES, PLANT GATE COST,
    PROCESS DESCRIPTION, AT 50% CAPACITY, PRODUCTION COSTS,
    INVESTMENT, US$ MILLION, PRODUCTION COSTS, US ¢/LB,
    VARIABLE COSTS, PRODUCTION COSTS, MAINTENANCE MATERIALS
  ] 
```

因此，如果您请求密钥，您将获得：

```
<class 'list'>: ['Overall cost structure', 'Capacity', 'RAW MATERIALS', 'BY-PRODUCT CREDITS', 'UTILITIES', 'PLANT GATE COST', 'PROCESS DESCRIPTION', 'AT 50% CAPACITY', 'PRODUCTION COSTS', 'INVESTMENT', 'US$ MILLION', 'PRODUCTION COSTS', 'US ¢/LB', 'VARIABLE COSTS', 'PRODUCTION COSTS', 'MAINTENANCE MATERIALS'] 
```

代码：

```
class AdvancedInterpolator(Interpolation):
    def before_get(self, parser, section, option, value, defaults):
        is_list = re.search(parser.LIST_MATCHER, value)
        if is_list:
            return parser.getlist(section, option, raw=True)
        return value

class AdvancedConfigParser(ConfigParser):

    _DEFAULT_INTERPOLATION = AdvancedInterpolator()

    LIST_SPLITTER = '\s*,\s*'
    LIST_MATCHER = '^\[([\s\S]*)\]$'

    def _to_list(self, str):
        is_list = re.search(self.LIST_MATCHER, str)
        if is_list:
            return re.split(self.LIST_SPLITTER, is_list.group(1))
        else:
            return re.split(self.LIST_SPLITTER, str)

    def getlist(self, section, option, conv=lambda x:x.strip(), *, raw=False, vars=None,
                  fallback=_UNSET, **kwargs):
        return self._get_conv(
                section, option,
                lambda value: [conv(x) for x in self._to_list(value)],
                raw=raw,
                vars=vars,
                fallback=fallback,
                **kwargs
        )

    def getlistint(self, section, option, *, raw=False, vars=None,
            fallback=_UNSET, **kwargs):
        return self.getlist(section, option, int, raw=raw, vars=vars,
                fallback=fallback, **kwargs)

    def getlistfloat(self, section, option, *, raw=False, vars=None,
            fallback=_UNSET, **kwargs):
        return self.getlist(section, option, float, raw=raw, vars=vars,
                fallback=fallback, **kwargs)

    def getlistboolean(self, section, option, *, raw=False, vars=None,
            fallback=_UNSET, **kwargs):
        return self.getlist(section, option, self._convert_to_boolean,
                raw=raw, vars=vars, fallback=fallback, **kwargs) 
```

> **Ps**请记住缩进的重要性。如 ConfigParser 文档字符串中所述：
> 
> > 值可以跨越多行，只要它们的缩进比值的第一行更深。根据解析器的模式，空行可能被视为多行值的一部分或被忽略。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-02-28T07:15:36.490

您可以在配置文件中使用列表，然后在 python 中解析它

```
from ast import literal_eval

literal_eval("[1,2,3,4]")

import json

json.loads("[1,2,3,4]") 
```

您也可以在配置文件后面使用 json 文件，如下所示：

```
your config file :
[A]
json_dis = .example.jason
--------------------
your code :
import configparser
config = configparser.ConfigParser()
config.read('config.ini')
# getting items of section A
config.items('A')
# result is a list of key-values 
```

# wcf - 如何配置 WCF 以通过 Internet 使用 x509 证书？

> ID：335719
> 
> 赞同：38
> 
> 时间：2008-12-02T22:37:22.137
> 
> 标签：wcf, x509

我需要使用 x509 证书从富客户端通过 Internet 获取安全的消息级别身份验证到安全的 WCF Web 服务。

具体来说，我正在寻找一个关于设置、配置、编码和部署的工作分步指南，包括创建“开发”证书、安装它，以及获得用于生产的“真实”证书。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-12-05T04:26:43.490

以下步骤是帮助您入门的指南：

1）首先，您需要一个根权限来生成您的客户端和服务器证书。您可以使用外部授权提供程序（例如 Verisign），也可以使用 Microsoft 证书服务器之类的工具生成自己的授权提供程序。

要生成开发根授权证书，您可以使用 Visual Studio 附带的“makecert”工具，例如

```
makecert -n "CN=MyRootCA" -r -sv RootCA.pvk RootCA.cer 
```

2）然后您需要请求/生成您的客户端和服务器证书。两种类型的证书都可以作为本地机器证书安装，并且都需要使用相同的根权限进行签名。您可以从 Microsoft 证书服务器的 Web 界面请求客户端证书，例如`http://mycertserver/certsrv`.

要为每台机器生成开发客户端证书，您可以再次使用“makecert”。请注意，客户端证书使用在步骤 1 中创建的开发根授权证书进行签名。

```
makecert -pe -n "CN=MyCert" -ss my -sky exchange -sk MyCert 
         -iv MyRootCA.pvk -ic MyRootCA.cer -sr localmachine MyCert.cer 
```

这将在运行命令的机器上安装证书到本地机器存储中的个人证书文件夹中。

为了让服务器信任客户端证书，您需要在服务器的受信任的根证书颁发机构存储中安装开发根颁发机构证书（使用 mmc 证书管理单元来执行此操作）。客户端还应该以相同的方式安装根证书，以便他们信任自己的证书。

3) 配置您的 WCF 服务以要求使用证书进行客户端身份验证（例如通过 web.config）。

```
<services>
  <service
    name="TestService"
    behaviorConfiguration="wsHttpCertificateBehavior">
    <endpoint name="TestEndPoint"
      address=""
      binding="wsHttpBinding"
      bindingConfiguration="wsHttpEndpointBinding"
      contract="TestService.IMyContract">
      <identity>
        <dns value=""/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
  </service>
</services>

<bindings>
  <wsHttpBinding>
    <binding name="wsHttpEndpointBinding">
      <security mode="Message">
        <message clientCredentialType="Certificate"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<behaviors>
  <behavior name="wsHttpCertificateBehavior">
    <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"/>
    <serviceCredentials>
      <clientCertificate>
        <authentication 
          certificateValidationMode="PeerOrChainTrust" 
          revocationMode="NoCheck"/>
      </clientCertificate>
      <serverCertificate findValue="CN=MyCert"/>
    </serviceCredentials>
  </behavior>
</behaviors> 
```

4) 现在配置调用者（例如通过app.config）。

```
<client>
  <endpoint name="wsHttpBinding"
    address="https://localhost/TestService/TestService.svc"
    binding="wsHttpBinding"
    bindingConfiguration="wsHttpBinding"
    behaviorConfiguration="wsHttpCertificateBehavior"
    contract="TestService.IMyContract">
    <identity>
      <dns value="MyCert"/>
    </identity>
  </endpoint>
</client>

<bindings>
  <wsHttpBinding>
    <binding name="wsHttpBinding">
      <security mode="Message">
        <message clientCredentialType="Certificate"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<behaviors>
 <endpointBehaviors>
  <behavior name="wsHttpCertificateBehavior">
    <clientCredentials>
      <clientCertificate findValue="MyCert" storeLocation="LocalMachine"/>
      <serviceCertificate>
        <authentication 
          certificateValidationMode="PeerOrChainTrust" 
          revocationMode="NoCheck" 
          trustedStoreLocation="LocalMachine"/>
      </serviceCertificate>
    </clientCredentials>
  </behavior>
 </endpointBehaviors>
</behaviors> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-02T23:07:14.387

我建议阅读 Microsoft 的 WCF 安全指南

这涉及这种情况以及许多其他情况

[http://www.codeplex.com/WCFSecurityGuide/](http://www.codeplex.com/WCFSecurityGuide/)

编辑：现在在[https://archive.codeplex.com/?p=wcfsecurityguide](https://archive.codeplex.com/?p=wcfsecurityguide)

# silverlight - 是否可以为 Silverlight 插件的垂直大小设置动画？

> ID：335731
> 
> 赞同：1
> 
> 时间：2008-12-02T22:42:58.897
> 
> 标签：silverlight

希望让插件更改大小作为内部 Silverlight 动画的一部分。可能的？似乎找不到答案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T23:15:15.633

你可能不想这样做。最好让插件占用 100% 的窗口，然后将其设置为 Windowless = true 以便您可以覆盖 HTML。

我最近在滚动页面时在页面上移动插件，它非常不稳定，但是当我切换到在页面上下移动 html 内容时，它变得很流畅。

您可以通过调用 Javascript 并使用 DispatchTimer 为大小设置动画，但就像我说的那样，这可能会很不稳定，并且可能有更好的方法。

# javascript - 如何检查嵌入了 javascript 徽章的网站？

> ID：335732
> 
> 赞同：1
> 
> 时间：2008-12-02T22:43:37.803
> 
> 标签：javascript, embedding, badge

我想允许用户使用一段 javascript 将徽章嵌入到他们的个人网站或博客上。该徽章是在我们的网站上根据他们的个人资料中的信息进行定制的，这些信息在某些时候被“批准”。

是否有最佳实践来检查嵌入了 javascript 的网站，如果它与“已批准”配置文件中的网站不匹配，则什么也不显示。如果匹配，则注入 html 等。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-05T00:07:04.157

立即想到两种方法：

1.  配置您的服务器以记录对 javascript 的所有请求的“Referer”标头，甚至根据已批准的 url 列表检查它，并返回错误代码（[`403 Forbidden`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4)看起来像赢家）。

2.  让Javascript“打电话回家” - 报告它的位置 - 像这样：

    ```
    var etCallHome = new Image();
    etCallHome = "http://yoursite.com/logger?url="+document.location.href; 
    ```

你也可以结合这两种方法来获得好运。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T23:00:27.863

您可以使用以下方法检查顶部 url：

```
var topUrl = top.location.href; 
```

# c# - 编写代码以触发最后一个方法以在多线程 Web 应用程序中引发异常

> ID：335736
> 
> 赞同：1
> 
> 时间：2008-12-02T22:47:10.060
> 
> 标签：c#, .net

我今天正在为各种方法编写一些 try-catch 块，我心想最好有一个实用方法，它会在某个时间自动再次调用该方法在参数中指定的次数。

但是，我心想，将导致异常的方法/属性等将位于堆栈跟踪的顶部（属性调用是否放在堆栈跟踪上？）在单线程应用程序中（因此没有代码的应用程序与线程）。所以我可以简单地获取顶部的方法名称并再次动态调用它。

所以我会有如下代码：

字符串 s = StackTrace.GetFrame(0).GetMethodName; （我不记得确切的语法）。

使用这种方法，我可以使用激活器或其他几种方式之一来执行它。

但是在多线程应用程序中，我可以同时触发多个方法，但我不知道哪个方法首先/最​​后完成。所以我不能指望我编写一个 try-catch 块的方法位于堆栈的顶部。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T22:59:08.350

**请不要这样做。** 这是一个非常、非常、非常、非常、非常*糟糕的主意*。

如果硬盘驱动器空间不足，可能不如随机删除文件那么糟糕 - 但同样糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T23:17:18.283

虽然我质疑自动重试机制的必要性（在需要实用方法的许多情况下，随机重试真的能帮助你吗？） - 使用 StackTrace 和 Reflection 充其量是一个非常复杂的解决方案。

并不是说我建议任何人实际*使用*此代码，但我可能会采用基于委托的方法来解决这个特定问题：

```
public static class Extensions {
    public static void Try(this Action a, int maxTries) {
       new (Func<bool>(() => { a(); return true; })).Try(maxTries);
    }

    public static TResult Try<TResult>(this Func<TResult> f, int maxTries) {
       Exception lastException = null;

       for (int i = 0; i < maxTries; i++) {
          try {
              return f();
          } catch (Exception ex) {
              lastException = ex;
          }
       }

       throw lastException;
    }
} 
```

用法有点不正统，但我认为相当清楚：

```
// Set a property
new Action(() => myObject.Property = 5).Try(5);

// With a return value
var count = new Func<int>(() => myList.Count).Try(3); 
```

您不能将 lambda 内联到方法中，但您可以有一个流畅的接口：

```
Utilities.Try(
   () => MyObject.Property = 5
).Repeat(5); 
```

和多行方法：

```
Utilities.Try(() => {
   MyObject.Property1 = 5;
   MyObject.Property2 = 6;
   MyObject.Property3 = 7;
}).Repeat(5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T23:21:38.927

马克的代码可能更好，但这是我的......

如果你**真的**想做这样的事情，我会使用这样的代码。是的，您仍然必须手动调用它，但是您不加选择地重试所有异常方法的想法是一个非常非常糟糕的主意。

```
public class TryAgain
{
    public delegate void CodeToTryAgain ();

    public static void Repeat<E>(int count, CodeToTryAgain code) where E : Exception
    {
        while (count-- > 0)
        {
            try
            {
                code();
                return;
            }
            catch (E ex)
            {
                Console.WriteLine("Caught an {0} : {1}", typeof(E).Name, ex.Message);
                // ignoring it!
            }
        }
    }
} 
```

然后你会调用你失败的方法，`ThrowTwice`或者你想做的任何事情，像这样：

```
TryAgain.Repeat<MyException>(5, delegate()
{
    ThrowTwice();
}); 
```

在此示例中，Repeat 方法将忽略所有 MyException 类型的异常，尝试调用 ThrowTwice 最多 5 次...

您可以添加自己的睡眠和超时​​，等等。

# ruby-on-rails - Rails 应用，需要给模型添加标签

> ID：335742
> 
> 赞同：0
> 
> 时间：2008-12-02T22:49:24.453
> 
> 标签：ruby-on-rails, ruby, model, tags

我有这个 quiz rails 应用程序链接到一个提出问题的 IRC 机器人（是的，在 IRC 上），我有这个`Question`模型，其中包含问题、答案、提示和其他一些东西。

我从`Quiz`模型（比如万圣节或圣诞节的特殊测验）开始，表格中有 a `quiz_id`，`questions`然后，我告诉自己，能够对问题进行分类会很好，所以我添加了一个`Category`模型（比如，比如说、电影或书籍），`category_id`在`questions`.

现在，我的用户希望能够向一个或多个测验添加一个问题，并为问题分配一个或多个类别……</p>

所以，我一直在考虑去掉`Quiz`and`Category`模型并用标签替换它们，这样，就会有一个万圣节标签，一个电影标签，一个问题可以有“万圣节电影圣诞节”作为标签。

在我的搜索中，我已经看到了很多包含标签的方法`acts_as_taggable`，`acts_as_taggable_on_steroids`或者任何其他人想象的标签:-)

现在，我想知道我应该做什么，所以，我在问，你做了什么，你是怎么做到的，你为什么这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T03:00:49.297

我认为 Category 可以很容易地被标签替换，因为它们都用于向问题添加元数据。

但是，我对 Quiz 模型表示怀疑。如果您仅使用测验模型对问题进行分组，则可以将其替换为标签。但我认为测验模型将包含更多功能，而不仅仅是单独分组。例如，记分、选择下一个问题等。所以我会保持 Quic 模型不变。

要实现标记，acts_as_taggable_on_steroids 确实有效，但有点旧。最好有一个在后台使用 named_scope 的标记插件，因为它会使插件更加灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T10:36:51.123

act_as_taggable_on_steroids 较旧，但它仍然有效，并且仍在维护中。确保您正在访问它的主存储库：

[http://svn.viney.net.nz/things/rails/plugins/acts_as_taggable_on_steroids/](http://svn.viney.net.nz/things/rails/plugins/acts_as_taggable_on_steroids/)

您可以将acts_as_taggable_on_steroids 与named_scopes 一起使用，这里有一篇文章展示了如何：

[加速和 named_scope 行为_as_taggable_on_steroids 发现](http://codeintensity.blogspot.com/2008/11/speed-up-and-namedscope.html)

对模型的实际添加非常简单（这直接来自上面的文章）：

```
named_scope :tagged_with, lambda { |tags| YourModel.find_options_for_find_tagged_with(tags) } 
```

# crystal-reports - 遍历记录 - Crystal Reports 2008

> ID：335753
> 
> 赞同：0
> 
> 时间：2008-12-02T22:54:22.773
> 
> 标签：crystal-reports, business-objects

我需要知道如何遍历 CR2008 中的记录，当它到达一个非 NULL 的记录时，将其记录在一个变量中。

我有一个名为“frmAccum”的公式，我将它放在详细信息部分并取消它。我使用它来收集处理的每条记录的信息。我还有一个名为 frmReset 的公式，其中我将 stringvar "person_name" 设置为 ""，我可以将其放在 Group 标题中以在分组后重置。

当遇到一个非空且不为空的 person_name 字段时，我希望它将名称保留在要在报告标题中使用的变量中。

所以是这样的：

```
stringvar person_name;
whileprintingrecords;

If ({Command.personname} <> "") Then
    person_name := {Command.personname} 
```

我无法让这种组合发挥作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-03T15:00:45.320

好吧，我没有得到回应，并想出了如何修改我的命令，以便将名称放在列中的所有字段中，因此我现在可以通过 Command.personname 提取它。

如果有人回来阅读本文并知道如何通过 Crystal 语法执行此操作，将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-17T03:59:25.140

```
whileprintingrecords;

stringvar person_name;

If Isnull({Command.personname}) Then
    person_name := {Command.personname} 
```

# svn - svn复制有什么用？

> ID：335770
> 
> 赞同：27
> 
> 时间：2008-12-02T23:06:21.783
> 
> 标签：svn, version-control

例子：

```
$ svn copy foo.txt bar.txt  
A    bar.txt 
```

*   你什么时候会使用这种技术，为什么？
*   这个命令（取自 svn 的“红皮书”）会创建一个副本，`<foo.txt>`同时保留它的历史记录以供共享`<bar.txt>`吗？
*   如果我改变`<bar.txt>`，会发生`<foo.txt>`什么？

在其他现代系统（Clearcase、Accurev、Perforce）中有什么等价物？

让我强调一下我正在寻找的观点：
这种分支是否在文件级别上？
如果您在同一个分支中使用它会发生什么，即创建一个文件的副本然后开始更改该新文件。都在同一个分支？
我知道它也用于标记，但我感兴趣的是`<svn copy>`在文件级别执行时会发生什么。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-12-02T23:54:25.227

除了分支/标记之外，您还可以在将文件一分为二时使用它。在这种情况下，两个新文件都将具有历史记录，您将能够在拆分之前查看代码。

顺便说一句：这是 SVN 具有的少数功能之一，但 Git 没有（Git 会在事后尝试猜测代码的来源，特别是如果您添加`-C`到命令中）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-12-02T23:13:27.790

> 你什么时候会使用这种技术，为什么？

创建标签，以及创建分支，尽管通常你会在目录而不是单个文件上使用它。标签是一个或多个文件的副本，您为了方便而保留，但不再更改。分支是一个或多个文件的副本，然后与原始文件分开发展

> 此命令是否会创建副本，`foo.txt`同时保留要与之共享的历史记录`bar.txt`？

不完全是，`foo.txt`的历史将有效地复制到 的历史中`bar.txt`，然后在历史中出现一个额外的条目，`bar.txt`表明它是从 复制的`foo.txt`，此后它们是独立的。因此，直到副本的历史是相同/共享的。

> 如果我改变`bar.txt`，会发生`foo.txt`什么？

没什么，它们是完全分开的。但是您可以稍后将更改从一个合并到另一个。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-03T11:40:38.313

这是一个稍微不寻常的用法，但我发现有时我必须将源文件分成两个单独的文件——例如，如果它包含两组不相关的功能，我使用 svn copy 来执行此操作。然后我修改这两个文件并从每个文件中删除不适当的位。这样，两个新文件都会保留其相关位的修订历史记录。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-02T23:15:27.897

> 在其他现代系统（Clearcase、Accurev、Perforce）中有什么等价物？

git 会注意到该文件在普通副本上是相同的，并将其显示为副本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-02T23:14:24.183

我在创建新文件时使用这种技术，并且我想复制脚手架（我目前使用 Perforce，但曾经使用过 Subversion）。更改副本不会影响其他文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-03T11:34:10.963

Branch 不是 Subversion 中的一等公民，因为它被“实现”为一个目录。

因此，`svn copy`允许在同一分支（目录）内使用某种文件分支。您可以稍后将复制的文件合并回第一个文件。但这**仅适用于一个文件**，正如[该线程中提到的那样](http://svn.haxx.se/users/archive-2007-04/1062.shtml)

ClearCase 中的等价物将是一个选择规则，例如

```
element * .../myBranchForCopy/LATEST
element /myPath/myFile /main/myBranch/LATEST -mkbranch myBranchForCopy 
```

但是，在这个用于分支文件的视图中，您一次只能看到一个`foo.txt`（在 中`myBranch`，或者如果它被签出，在 中`myBranchForCopy`）。没有真正的“副本”，它是相同的元素。任何合并都将介于：

*   `foo.txt@@/main/myBranch/myBranchForCopy/LATEST`
    和
*   `foo.txt@@/main/myBranch/LATEST`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-05-20T19:51:55.777

`svn copy`在我无意中删除了一个文件后派上了用场。请参阅我提出的相应[问题的](https://stackoverflow.com/questions/2873478/svn-cat-after-svn-del)[答案。](https://stackoverflow.com/questions/2873478/svn-cat-after-svn-del/2873724#2873724)

# html - 适当使用DL和DD？

> ID：335774
> 
> 赞同：3
> 
> 时间：2008-12-02T23:07:19.050
> 
> 标签：html, validation, semantic-markup

我最近为我设计了一些网站模板。我得到了最终的 HTML 代码，它可以验证，但是文档的结构是使用 DL-DD 对布局的：

```
<dl>
  <dd class="some-class">
    Some text.
  </dd>
</dl> 
```

我对这些标签不是特别熟悉，因为我从来没有经常使用它们，但它们似乎并不适用于文档结构。我对吗？为什么设计师会这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-02T23:16:36.707

标签与`DL`标签大致相同`UL`，它开始一个无序列表。

不同之处在于`DL`/`DD`夫妇中基本上没有子弹。

但是，大多数时候，它用于实际用途，即**定义****列表**，并与and一起使用，它们是**定义**术语和**定义**描述，**看起来****像**：**`DT``DD`**

 ******```
<DL>
  <DT>CSS</DT>
  <DD>Cascading Style Sheet</DD>
</DL> 
```

默认情况下，该术语会缩进一点，并且将其定义缩进一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-02T23:09:43.930

来自 WC3：[http ://www.w3.org/TR/html401/struct/lists.html#h-10.3](http://www.w3.org/TR/html401/struct/lists.html#h-10.3)

> 定义列表与其他类型的列表仅略有不同，列表项由两部分组成：术语和描述。该术语由 DT 元素给出，仅限于内联内容。描述是用包含块级内容的 DD 元素给出的。

因此，鉴于您的示例，这些类型的结构应该用于特定类型的内容，而不是不适合此上下文的数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T23:14:42.000

你是对的，它不应该那样使用。我能想到的设计师使用它们的唯一原因是`<dd>`标签在大多数浏览器中都是缩进的。如果它们覆盖了它们的填充/边距，那么你的猜测和我的一样好。

# maven-2 - 如何在持续集成情况下使用 Maven 在存储库中安装版本化工件？

> ID：335781
> 
> 赞同：7
> 
> 时间：2008-12-02T23:10:41.307
> 
> 标签：maven-2, continuous-integration

我们正在将我们的主要构建过程从 ant 转换为 maven。我们将 TeamCity 用于我们的持续集成服务器 (CI)。

我们想使用 CI 服务器启动（每晚）版本包含构建号的构建，如 1.0.0.build#。这些构建将安装在我们的本地 Maven 存储库中，以供其他项目使用。因此 CI 服务器将管理版本，maven 将构建项目，而 maven 存储库将使其他项目可以访问构建。

我打算使用以下命令从 CI 服务器启动构建：

```
mvn -Dversion=1.0.0.25 install 
```

该项目的 pom 将有一个虚假的版本号，并且 -D 标志将覆盖它，如下所示：

```
<version>0.0.0.0</version> 
```

这种方法的问题是maven install插件只使用pom文件中的版本，而不是命令行传入的版本。[这在这个 Maven 问题](http://jira.codehaus.org/browse/MINSTALL-30)中有所说明。

因此，由于此问题自 08/2006 以来一直存在并且尚未修复，因此我认为这在某种程度上不是“*行家*之道”。所以我的问题是，如何在持续集成的情况下使用 Maven 在存储库中安装版本化的工件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-03T02:30:01.013

听起来您想构建具有唯一版本的 SNAPSHOT 版本。

因此，在您的 POM 中将版本声明为：

```
<version>#.#.#-SNAPSHOT</version> 
```

然后，在你的 POM 的*distributionManagement*部分，通过（参见 Maven 的[POM 参考）为](http://maven.apache.org/pom.html#Repository)*snapshotRepository*启用唯一版本：

```
<snapshotRepository>
  <uniqueVersion>true</uniqueVersion>
  <id>your-snapshot-repo-id</id>
  <name>Your Snapshots</name>
  <url>http://your-snapshot-repo-url/maven</url>
</snapshotRepository> 
```

仅供参考，请注意[Maven 约定](http://docs.codehaus.org/display/MAVEN/Extending+Maven+2.0+Dependencies)建议将版本声明为 major.minor.revision。所以，1.0.25 而不是 1.0.0.25。如果您能够使用此版本控制方案，那么在 Maven 世界中一切都会更加顺利。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T06:18:57.780

[马修的回答](https://stackoverflow.com/a/350865/933106)提供了一个解决方案，其中工件被上传到具有所需版本号的本地和远程存储库中，即存储库内的路径包含正确的版本号，但是，Maven 始终安装和部署仍然包含的源 POM 文件在`${ciVersion}`版本元素中。

如果您有一个具有共同父级的多模块，如下所示：

```
<project xmlns="..." xmlns:xsi="..." xsi:schemaLocation="...">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>myParent</artifactId>
    <groupId>com.stackoverflow</groupId>
    <version>${ciVersion}</version>
  </parent>
  <artifactId>myChild</artifactId>
  ...
</project> 
```

您将无法引用该`myChild`模块的专用版本，因为依赖解析将存在一个错误，即它无法找到`myParent`具有版本的模块`${ciVersion}`。

但是，您可以使用将 POM 上传到本地和远程存储库的[resolve-pom-maven-plugin](https://github.com/sap-production/resolve-pom-maven-plugin)，其中 POM 中的所有变量都将被其实际值替换。为此，您必须将以下代码段添加到您的（父）POM 中：

```
...
<build>
  <plugins>
    <plugin>
      <groupId>com.sap.prd.mobile.ios.maven.plugins</groupId>
      <artifactId>resolve-pom-maven-plugin</artifactId>
      <version>1.0</version>
      <executions>
        <execution>
          <id>resolve-pom-props</id>
          <goals>
            <goal>resolve-pom-props</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build>
... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-08T20:57:13.893

Shek 的答案可能是“行家之道”，所以我会接受它作为正确答案。但是，我们还没有准备好改变我们的约定，所以这里是我们正在使用的解决方法。

通过使用间接级别，您可以在构建时将版本号传递给 pom，并让安装和部署插件使用它们。例如：

```
<project xmlns="..." xmlns:xsi="..." xsi:schemaLocation="...">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.stackoverflow</groupId>
  <artifactId>stackoverflow</artifactId>
  <version>${ciVersion}</version>
  <packaging>jar</packaging>
  <name>StackOverflow</name>

  <properties>
    <ciVersion>0.0.0.0</ciVersion>
  </properties>

  ...

</project> 
```

我们不能直接覆盖 ${project.version}。因此，我们添加了第二个名为“ciVersion”的属性，并在属性部分为其设置了默认值“0.0.0.0”。现在 CI 服务器可以通过覆盖命令行上的 ciVersion 属性来指定版本号。如：

```
mvn -DciVersion=1.0.0.25 install 
```

正如预期的那样，安装和部署插件将使用在每次引用 ${project.version} 时传入的 ciVersion 属性的值，并且在命令行上未提供任何版本时将使用默认值。这使我们能够在对我们的流程影响最小的情况下切换到 Maven。此外，此解决方法不显眼，允许在需要时轻松切换到 SNAPSHOT 功能。

# .net - 如何将 cookie 传递到外部 Web 浏览器？

> ID：335783
> 
> 赞同：0
> 
> 时间：2008-12-02T23:11:05.737
> 
> 标签：.net, screen-scraping

我正在编写一个应用程序，它需要向使用表单身份验证的网站打开浏览器窗口（可能会坚持使用 IE）。诀窍是他们需要已经过身份验证，以节省时间，因为我们需要进入的网站数量众多。（最终我会在屏幕上抓取它们并处理数据......但我仍然需要让身份验证部分正常工作，以便他们可以在需要时点击进入真实站点。）

我已经完成了表单身份验证部分，因为我可以使用 HttpWebRequest 来获取 html 并将其传递给浏览器。但是我无法让它将 cookie 传输到客户端浏览器，以便它可以访问实际的网站。

我正在获取 System.Net.Cookies 进行身份验证，我尝试将它们复制到 System.Web.HttpCookies 并将它们添加到 Response 对象中。如果我在页面上放置一个链接或使用 Response.Redirect 访问它不起作用的网站，它就好像用户没有经过身份验证一样。

任何人都知道我将如何做到这一点？

这是当前代码，以防更清楚：

```
Dictionary<string, string> formValues = new Dictionary<string, string>(4);
        formValues.Add("txbUserName", "USERNAME");
        formValues.Add("txbPassword", "PASSWORD");
        formValues.Add("SubmitB", "Log In");

        HttpWebRequest webRequest;
        StreamReader responseReader;
        string responseData;

        //This authenticates an HttpWebRequest and returns it
        webRequest = FormsAuthHttpWebRequest.Create("REQUESTURI", "LOGINURI", 
                                                    formValues) as HttpWebRequest;

        responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream());

        responseData = responseReader.ReadToEnd();
        responseReader.Close();

        foreach (Cookie cookie in webRequest.CookieContainer.GetCookies(new Uri("SITEURI")))
        {
            HttpCookie httpCookie = new HttpCookie(cookie.Name, cookie.Value)
            {
                Domain = cookie.Domain,
                Expires = cookie.Expires,
                Path = cookie.Path,
                HttpOnly = cookie.HttpOnly,
                Secure = cookie.Secure                 
            };

            Response.Cookies.Add(httpCookie);
        }

        Response.Redirect("REQUESTURI"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T23:46:38.177

我不认为你将能够做到这一点。浏览器将忽略来自不属于与 cookie 关联的域的 Web 服务器的任何“Add-Cookie”标头。这是 cookie 内置安全性的一部分 - 如果其他网站可以读取或写入另一个域的 cookie，那将是灾难性的（从安全和隐私的角度来看）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T23:31:20.173

我认为浏览器可能会忽略响应标头中的 cookie，因为即将发生 Response.Redirect。我们最近遇到了这个问题，发现 FF 接受了 cookie，但 IE6&7 没有。

不过，我不确定我是否完全理解您要执行的操作。您是否尝试将站点 A 的 cookie 发送到实际上用于站点 B 的浏览器？

# sql - Linq to SQL：如何阻止自动生成的对象名称被重命名？

> ID：335792
> 
> 赞同：16
> 
> 时间：2008-12-02T23:15:28.067
> 
> 标签：sql, linq, linq-to-sql

在 Visual Studio 2008 中，当我将一个数据库表拖到我的 dbml 屏幕中时，任何以字母 s 结尾的表都会自动将 s 从 dbml 对象中删除。有什么办法可以禁用它吗？

此外，行集合还会在集合属性名称后附加一个 s。有没有办法改变它？

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-12-02T23:24:48.563

您需要禁用 LINQ to SQL 设计器的 Pluralize Table Names。

为此，导航到 Tools -> Options -> Database Tools -> O/R Designer 并将**Pluralization of names**更改为**false**。

然后你需要重新编译你的项目，它应该解决命名问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T06:28:15.813

在代码优先的场景中，您可以通过简单地在具有 Table 属性的实体上指定表的名称来处理一些像这样在更细粒度级别上弹出的问题：

```
 [Table("QTPhotos")]
    public class QTPhoto 
```

我发现，最初，我们有一个简单的实体名称“Photo”，但这与某些东西（与我们的许多实体名称）相冲突，因此我们开始对它们进行限定（“QT”作为示例前置），并且突然出现了这个问题。所以我敢打赌这是因为“Photo”是一个以“o”结尾的公认单词，它不会复数为“..oes”（如**Potat oes**中），但“QTPhoto”不是，这意味着它试图找到一张桌子命名为“QTPhotoes”。

只需设置表名即可解决此问题。

# html - HTML 编辑器 — 一次编辑开始和结束标记

> ID：335799
> 
> 赞同：5
> 
> 时间：2008-12-02T23:19:00.807
> 
> 标签：html, editor

是否有一个 HTML 编辑器可以在您编辑开始标签时自动更改结束标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T00:30:00.740

[Aptana Studio](http://www.aptana.com/studio)可以。只需在 Window Menu > Preferences > Aptana > Editor > HTML > Typing 中设置修改对标签默认情况下它是关闭的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T00:11:41.980

IntelliJ 有一堆[XML 重构](http://www.jetbrains.com/idea/features/refactoring.html#XML-aware_dedicated_refactorings)，其中一个是重命名标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-01T03:12:32.797

[e-texteditor](http://www.e-texteditor.com)可以做到这一点，虽然不像你可能想要的那样自动。Ctrl+双击开始和结束标签，并以这种方式更改它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T09:28:34.767

**IntelliJ IDEA 14.1**有这个特性：

[http://blog.jetbrains.com/idea/files/2015/02/simultaneous_tag_editing_2.gif](http://blog.jetbrains.com/idea/files/2015/02/simultaneous_tag_editing_2.gif)

例如，如果您想更改`div`为`span`in：

```
<div> Text </div> 
```

编辑其中一个标签就足够了，另一个标签将实时更改。

# architecture - 当你开始考虑一个编程项目时，你首先会做什么？

> ID：335802
> 
> 赞同：2
> 
> 时间：2008-12-02T23:22:25.197
> 
> 标签：architecture

当你开始考虑一个编程项目时，你首先会做什么？你会拿出一张纸开始画出建筑的草图吗？你有想法的笔记本吗？你开始编码了吗？或者您是否将软件建模在一个精美的软件包中。来来来，说出你的想法……

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-02T23:26:32.537

为了开始考虑架构或设计，我倾向于编写我希望“正常工作”的假设代码片段，以解决应用程序的核心问题。

例如，在设计我的数据库时，我通常会尝试考虑一些我希望编写的示例查询，而不是抽象地考虑数据实体和关系。

这种方法帮助我（个人）避免在第一次通过抽象时走得太远。您可以将其称为“美丽代码优先”方法。它与 TDD 有相似之处，不同之处在于您的目标首先是表达性、简洁的代码，然后构建架构和抽象来支持它。

我个人认为，从长远来看，富有表现力、清晰的代码比笨重、经过彻底测试的代码更可取。当然，这些并不是相互排斥的。只是不要让对漂亮“架构”的渴望导致业务逻辑中的客户端代码笨拙。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-02T23:30:44.870

我会先用**谷歌搜索**一下，看看有什么东西以同样的方式存在/甚至更接近，然后了解更多。借助当今可用的语言和框架的强大功能，任何普通程序员都可以编写代码，但质量实际上取决于您为实现该解决方案使用了多少“最佳实践”。你取得结果的速度也很重要。

所以我认为***谷歌搜索***将成为 SDLC 过程中的一个重要循环 :)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-02T23:40:01.230

我会考虑**用户**以及他们*想要*什么以及他们会*得到*什么。

他们不关心后端或花哨的语言，在你弄清楚你的程序会做什么以及为什么有人想要使用它之前，其他的都不重要。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-02T23:28:13.940

我几乎总是从绘制一个粗略的对象模型开始，让我对系统的结构有一个直观的了解。然后从那里构建。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-02T23:47:17.097

通过编程项目，我将假设“为客户”而不是爱好/个人项目。

我首先让客户用高级语言向我描述他们想要什么。我寻找诸如“我想要一个具有多个部门并允许通过电子邮件响应/更新的票务系统”之类的东西。快速简单的东西。

从那里开始，我开始编写规范文档的初稿。我开始向客户提出问题，以帮助完善原始草案并细化到更细化的水平，直到最终系统完全确定。完全，我的意思是客户无法向我提供有关他们想要什么的更多信息。

对于个人或爱好类型的项目，我通常会花几天时间在脑海中滚动，在纸上或在我的建模程序中设计一些基本的数据库模式。我喜欢在上面睡几个晚上，看看它是否是我将继续有兴趣发展的东西，而不是在它完成之前放弃。一旦我确定这是我会看透的东西，我会继续起草我自己的规范并从那里开始。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-02T23:29:31.627

我坐下来开始编码......然后我删除所有项目文件并转到白板并开始映射对象和关系。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-02T23:34:55.080

我有一个笔记本，我把所有的想法都写在里面。我通常会写一两页关于项目/产品/等的密集笔记，然后不管它，因为我没有时间做任何事情。当需要实际设计这个东西时，我会重新阅读我的笔记并尝试在 UML 中创建一个类图。通常这会失败，这会导致更多页的笔记提炼这个想法，解决奇怪的边缘情况和未定义的事情等。冲洗并重复。一旦我有了一个记录所有主要参与者的类图，我就开始编码。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-02T23:52:40.830

1.  收集需求
2.  定义优先级
3.  估计工作量
4.  开始工作
5.  跟踪和评估进度

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-02T23:30:31.920

我写了一个功能列表，然后详细介绍了它，然后我开始涂鸦我的对象以及它们如何相互交互，有点像 DFD.. 我所有的图纸都是一团糟！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-02T23:34:42.817

我拿起记事本和笔，开始画笔记和流程图，没什么花哨的，只是将概念模型可视化，然后我尝试将每个部分分解成更简单的任务。

一旦我无法进一步简化任务，我就开始编写丢失的伪代码并粗略地制定数据库方案。只有这样我才开始编写示例/测试代码。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-02T23:51:14.593

尝试分析业务领域。即，应用程序试图解决的业务问题的结构。它需要操纵/管理哪些实体，它们是可变/不可变的吗？应用程序需要实现哪些流程（从业务角度来看）？每个流程需要哪些实体，对于每个实体，流程对该实体做了什么？ETC..

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-05T20:42:33.520

我会开始记录一个**愿景**，一个描述项目的简短文档，围绕它的业务以及它的成功标准。

这有助于确定功能的优先级，并为从事该项目的每个人提供相同的方向。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-09-22T22:50:14.583

我总是向其他人解释我认为我正在尝试通过该项目解决的问题，最好是另一个开发人员。除非我能清楚地解释我正在尝试做什么，否则我不会有希望创造出能够解决问题的东西。不得不向另一个人描述它的行为经常会在我对问题领域的知识中产生空白，并暴露我未经证实的假设。如果我有一个方便的，这通常需要我在白板上画出我如何看待问题。

# sql - 如何在 SQL Server 数据库之间同步视图和存储过程？

> ID：335805
> 
> 赞同：3
> 
> 时间：2008-12-02T23:24:55.333
> 
> 标签：sql, sql-server

我有一个“参考”SQL Server 2005 数据库，用作我们的全球标准。我们都准备好保持通用表模式和数据正确同步，但是对于视图、存储过程和用户​​定义的函数等其他对象还没有一个好的解决方案。

我知道像[Redgate 的 SQL Compare](http://www.red-gate.com/products/SQL_Compare/index.htm)这样的产品，但我们现在真的不想依赖（任何进一步的）第 3 方工具。

例如，有没有办法确保参考数据库上的给定存储过程或视图在目标数据库上是最新的？这个可以写脚本吗？

编辑澄清：当我说“脚本化”时，我的意思是运行一个脚本，将任何更改推送到目标服务器。不在多个服务器上多次运行相同的 CREATE/ALTER 脚本。

任何有关如何解决此问题的建议/经验将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-02T23:31:16.710

1) 将所有视图、触发器、函数、存储过程、表模式等保存在源代码管理中，并将其用作主控。

2）如果做不到这一点，请使用您的参考数据库作为主数据库并编写视图和存储过程等：右键单击数据库，任务->生成脚本并选择您的对象。

3) 您甚至可以在参考数据库和目标数据库之间使用事务复制。

我坚信最好的方法是将**所有内容**编写脚本并放入源代码管理中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T07:04:53.407

我使用（并且喜欢）RedGate 工具，但是当 Microsoft 宣布 Visual Studio 2010 时，他们决定允许 MSDN 订阅者获得 Visual Studio 2008 Team System 也获得 Visual Studio 2008 Database Edition（它有一个模式比较工具）。

因此，如果您或您的组织订阅了 MSDN，您可能需要考虑通过 Team System 下载并安装 Database Edition 以立即获取所有功能。

更多详细信息，请访问[http://msdn.microsoft.com/en-us/vsts2008/products/cc990295.aspx](http://msdn.microsoft.com/en-us/vsts2008/products/cc990295.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-19T00:17:47.850

您可以使用系统表来执行此操作。

例如，

```
select * from sys.syscomments 
```

“文本”列将为您提供存储过程的所有代码（以及其他数据）。

非常值得查看所有系统表和过程。事实上，我怀疑这就是 RedGate 的软件和其他工具在幕后所做的。

我自己刚刚开始对此进行试验，所以我无法具体说明所有问题以及您需要查询的其他系统表，但这应该可以帮助您入门。

另见：

[查询以列出 SQL Server 存储过程以及每个过程的代码行](https://stackoverflow.com/questions/291574/query-to-list-sql-server-stored-procedures-along-with-lines-of-code-for-each-proc)

这与您的问题略有不同，但相关。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-19T02:47:14.850

看看 Codeplex 上的 ScriptDB ( [http://www.codeplex.com/ScriptDB](http://www.codeplex.com/ScriptDB) )

它是一个控制台 C# 应用程序，它使用 SMO 创建 SQL 数据库对象的脚本。您可以使用它来比较在两台服务器上生成的脚本。由于它是开源的，如果需要，请对其进行调整。

帖木儿

# c# - 回归本源; for 循环、数组/向量/列表和优化

> ID：335807
> 
> 赞同：4
> 
> 时间：2008-12-02T23:26:38.513
> 
> 标签：c#, arrays, optimization, list, performance

我最近正在编写一些代码，并遇到了一种方法，该方法具有 3 个用于 2 个不同数组的 for 循环。

基本上，发生的事情是一个 foreach 循环将遍历一个向量并从一个对象转换一个 DateTime，然后另一个 foreach 循环将从一个对象转换一个 long 值。这些循环中的每一个都会将转换后的值存储到列表中。

最后的循环将遍历这两个列表并将这些值存储到另一个列表中，因为需要为日期完成一次最终转换。

说了这么多之后，最后的两个列表使用 ToArray() 转换为一个数组。

好的，请耐心等待，我终于要回答我的问题了。

因此，我决定制作一个 for 循环来替换前两个 foreach 循环并一举转换值（第三个循环是准必要的，不过，我确信通过一些工作我也可以将它放入单回路）。

但后来我阅读了 Gustav Duarte 的文章“你的计算机在等待时做什么”，并开始考虑内存管理以及在同时访问两个列表的 for 循环中访问数据时数据在做什么。

所以我的问题是，这样的事情最好的方法是什么？尝试压缩 for 循环，使其发生在尽可能少的循环中，从而导致不同列表的多个数据访问。或者，允许多个循环并让系统引入它预期的数据。这些列表和数组可能很大，并且遍历 3 个列表，可能是 4 个，具体取决于 ToArray() 的实现方式，可能会变得非常昂贵（O(n^3) ??）。但是根据我在上述文章和我的 CS 课程中的理解，必须获取数据也可能很昂贵。

有人愿意提供任何见解吗？或者我已经完全脱离了我的摇滚乐，需要重新学习我没有学到的东西？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-02T23:33:15.660

最好的方法？编写最易读的代码，计算出它的复杂性，然后确定这是否真的是一个问题。

如果你的每个循环都是 O(n)，那么你仍然只有一个 O(n) 操作。

话虽如此，听起来 LINQ 方法确实更具可读性......而且很可能也更有效率。诚然，我们还没有看到代码，但我怀疑它是LINQ 的*理想选择*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T00:23:45.153

供参考，

这篇文章是在 [你等待时你的电脑会做什么](http://duartes.org/gustavo/blog/post/what-your-computer-does-while-you-wait)- Gustav Duarte

还有一个[big-O notation](http://www.nist.gov/dads/HTML/bigOnotation.html)的指南。

* * *

如果不能看到代码/伪代码，就不可能回答这个问题。唯一可靠的答案是“使用分析器”。假设你的循环在做什么对你和任何阅读这个问题的人都是一种伤害。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-02T23:53:24.417

我在这方面理解正确吗？

你有这些循环：

```
for (...){
  // Do A
}

for (...){
  // Do B
}

for (...){
  // Do C
} 
```

你把它转换成

```
for (...){
  // Do A
  // Do B
}
for (...){
  // Do C
} 
```

你想知道哪个更快？

如果没有，一些伪代码会很好，所以我们可以明白你的意思。:) 不可能说。它可以去任何一种方式。你是对的，获取数据很昂贵，但位置也很重要。第一个版本可能更适合数据局部性，但另一方面，第二个版本具有更大的块，没有分支，允许更有效的指令调度。

如果额外的性能真的很重要（正如 Jon Skeet 所说，它可能不重要，你应该选择最易读的东西），你真的需要衡量这两个选项，看看哪个是最快的。

我的直觉告诉我第二个，在跳转指令之间做更多的工作，会更有效率，但这只是一种预感，很容易出错。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-06T22:57:37.460

好吧，如果两个向量的大小不同，您就会遇到麻烦。正如已经指出的那样，这不会增加问题的整体复杂性，所以我会坚持使用最简单的代码 - 这可能是 2 个循环，而不是 1 个循环，具有两个不同长度的复杂测试条件。

实际上，这些长度测试可以很容易地使两个循环比单个循环*更快。*您还可以通过 2 个循环获得更好的内存获取性能 - 即您正在查看连续内存 - 即 A[0],A[1],A[2]... B[0],B[1],B[ 2]...，而不是 A[0],B[0],A[1],B[1],A[2],B[2]...

所以在各个方面，我都会使用 2 个单独的循环；-p

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-03T00:50:29.543

...处理一个数据但使用两个函数有时可以使处理该数据的代码不适合处理器的低级缓存。

```
for(i=0, i<10, i++ ) {
  myObject object = array[i];
  myObject.functionreallybig1(); // pushes functionreallybig2 out of cache
  myObject.functionreallybig2(); // pushes functionreallybig1 out of cache
} 
```

对比

```
for(i=0, i<10, i++ ) {
  myObject object = array[i];
  myObject.functionreallybig1(); // this stays in the cache next time through loop
}

for(i=0, i<10, i++ ) {
  myObject object = array[i];
  myObject.functionreallybig2(); // this stays in the cache next time through loop
} 
```

但这可能是一个错误（通常这种类型的技巧被评论）

当数据像这样循环加载和卸载时，它被称为缓存抖动，顺便说一句。

这是与这些函数正在处理的数据不同的问题，因为通常处理器会单独缓存这些数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-03T01:17:59.613

除了大型函数的缓存抖动之外，小型函数也可能有好处。这适用于任何自动矢量化编译器（不确定 Java JIT 是否会这样做，但您最终可以指望它）。

假设这是您的代码：

```
// if this compiles down to a raw memory copy with a bitmask...
Date morningOf(Date d) { return Date(d.year, d.month, d.day, 0, 0, 0); }

Date timestamps[N];
Date mornings[N];

// ... then this can be parallelized using SSE or other SIMD instructions
for (int i = 0; i != N; ++i)
    mornings[i] = morningOf(timestamps[i]);

// ... and this will just run like normal
for (int i = 0; i != N; ++i)
    doOtherCrap(mornings[i]); 
```

对于大型数据集，将可矢量化代码拆分为单独的循环可能是一个巨大的胜利（前提是缓存不会成为问题）。如果将其全部保留为单个循环，则不会发生矢量化。

这是英特尔在他们的 C/C++ 优化手册中推荐的东西，它确实可以产生很大的不同。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-06T22:51:16.460

对于没有尽快回复并提供任何类型的代码，我深表歉意。我在我的项目上偏离了方向，不得不做其他事情。

回答仍在关注此问题的任何人；

是的，就像 jalf 说的，这个函数是这样的：

```
 `PrepareData(vectorA, VectorB, xArray, yArray):
        listA
        listB
        foreach(value in vectorA)
            convert values insert in listA
        foreach(value in vectorB)
            convert values insert in listB
        listC
        listD
        for(int i = 0; i < listB.count; i++)
            listC[i] = listB[i] converted to something
            listD[i] = listA[i]
        xArray = listC.ToArray()
        yArray = listD.ToArray()`

我将其更改为：

```
 `PrepareData(vectorA, vectorB, ref xArray, ref yArray):
       listA
       listB
       for(int i = 0; i < vectorA.count && vectorB.count; i++)
            convert values insert in listA
            convert values insert in listB
        listC
        listD
        for(int i = 0; i < listB.count; i++)
            listC[i] = listB[i] converted to something
            listD[i] = listA[i]
        xArray = listC.ToArray()
        yArray = listD.ToArray()` 
```

 `请记住，向量可能包含大量项目。我认为第二个会更好，这样程序就不必循环 n 次 2 或 3 次不同的时间。但后来我开始想知道内存获取或预取的影响（效果？），或者你有什么。

所以，我希望这有助于澄清这个问题，尽管你们中的很多人都提供了很好的答案。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2008-12-08T17:50:58.373

谢谢大家提供的信息。思考 Big-O 和如何优化从来都不是我的强项。我相信我会把代码恢复到原来的样子，我应该相信它以前的编写方式，而不是跳出我的新手本能。另外，将来我会提供更多参考，以便每个人都能理解我在说什么（清晰也不是我的强项：-/）。

再次感谢你。

# cruisecontrol.net - Windows Server 2003 x64 上的 CruiseControl.Net

> ID：335812
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-12-02T23:29:30.970
> 
>         
> 
> 标签：cruisecontrol.net, windows-server-2003, 64-bit

我遇到了 CruiseControl.net 的问题，其中 Web 仪表板无法在 IIS 中运行。我尝试在 64 位和 32 位模式之间切换 ASP.Net 并重新安装巡航控制，但似乎没有任何效果。还有其他人在 64 位平台上遇到过 CruiseControl.Net 的问题吗？

干杯，杰米

[编辑]

我想我应该澄清一下，当我尝试访问该网站时出现 404 错误。我使用了正确的地址，因为它要求进行身份验证。.aspx 处理程序正在工作，因为我在 ccnet 目录中看不到 default.aspx 页面。

[编辑2]

我使用的是 ccnet 附带的默认 web.config，但这里是：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
    <!-- Change this if (for example) you want to keep your dashboard config file under source control -->
    <add key="DashboardConfigLocation" value="dashboard.config" />
</appSettings>

<system.web>
    <httpHandlers>
        <!-- Yes, we are overriding .aspx - don't delete this! We are using .aspx since we know it is already bound to ASP.NET. In future we might use a 
            different extension so that people can add their own ASP.NET pages if they want to, but we should make sure in that case to change how 
            URLs are created -->
        <add verb="*" path="*.aspx" type="ThoughtWorks.CruiseControl.WebDashboard.MVC.ASPNET.HttpHandler,ThoughtWorks.CruiseControl.WebDashboard"/>
        <add verb="*" path="*.xml" type="ThoughtWorks.CruiseControl.WebDashboard.MVC.ASPNET.HttpHandler,ThoughtWorks.CruiseControl.WebDashboard"/>
    </httpHandlers>
    <compilation defaultLanguage="c#" debug="true" />
    <customErrors mode="RemoteOnly" />
    <authentication mode="Windows" />
    <!--  APPLICATION-LEVEL TRACE LOGGING
        Application-level tracing enables trace log output for every page within an application. 
        Set trace enabled="true" to enable application trace logging.  If pageOutput="true", the
        trace information will be displayed at the bottom of each page.  Otherwise, you can view the 
        application trace log by browsing the "trace.axd" page from your web application
        root. 
    -->
    <trace
        enabled="false"
        requestLimit="10"
        pageOutput="true"
        traceMode="SortByTime"
        localOnly="true"
    />
    <sessionState mode="InProc" stateConnectionString="tcpip=127.0.0.1:42424" sqlConnectionString="data source=127.0.0.1;user id=sa;password="
        cookieless="false" timeout="20" />
    <globalization requestEncoding="utf-8" responseEncoding="utf-8" />
</system.web> 
```

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T00:43:50.510

看来我需要为 ASP.Net 启用 Web 服务扩展。我仍然没有在巡航控制网站属性中获得 ASP.Net 选项卡，但它正在工作。

* * *

C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727> 或 C:\WINDOWS\Microsoft.NET\Framework64\v2.0.50727> 对于 64 位

键入 aspnet_regiis.exe – i

ASP.NET 将自己注册并显示在 Web 服务扩展中

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-12-02T23:31:38.283

澄清一下，网络仪表板功能不正确吗？它根本不显示吗？

webdashboard 使用 Nvelocity，而不是 ASP.NET WebForms，因此您必须在 Web.config 中注册一个自定义 HTTPHandler 才能使其工作。

```
<add verb="*" path="*.aspx" type="ThoughtWorks.CruiseControl.WebDashboard.MVC.ASPNET.HttpHandler,ThoughtWorks.CruiseControl.WebDashboard"/> 
```

发布您的 web.config。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-12-02T23:37:13.280

因为您只想知道它是否有效……它确实有效。

我在 64 位 Windows Server 2008 上运行它没有问题。

所以现在我们已经确定它有效，也许您可​​以更详细地描述您的问题？

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2010-10-19T09:53:39.933

无法评论，我想将此添加到对亚当的回答中：我必须在 CMD 中使用此命令 for Win2008 x64

```
"C:\WINDOWS\Microsoft.NET\Framework64\v2.0.50727\aspnet_regiis.exe" -s "W3SVC/1/ROOT/ccnet" 
```

# dom - 如何读取加载了来自另一个域的页面的 iframe 的 DOM？

> ID：335817
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-02T23:30:55.790
> 
>         
> 
> 标签：dom, browser, iframe, activex, cross-browser

如果 iframe 中的文档位于另一个域中，是否有办法从父文档访问 iframe 中文档的 DOM？如果父页面和子页面都在同一个域上，我可以轻松访问它，但是当它们在不同域上时我需要能够做到这一点。

如果不是，也许还有其他方法可以读取 iframe 的内容（一个考虑是创建一个 ActiveX 控件，因为这仅供内部公司使用，但我希望它是跨浏览器兼容的）？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T00:08:44.137

并不真地。这对安全至关重要——否则你可能会打开我的网上银行网站或网络邮件并搞砸它。

您可以通过设置稍微[放宽限制](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)`document.domain`，但顶级域仍然必须相同。

您可以通过您自己的服务器代理请求来解决此限制（但不要忘记保护它，否则 s[cp]ammers 可能会滥用它）

```
my.example.com/proxy?url=otherdomain.com/page 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T00:11:17.847

*理论上*，您可以使用标准 DOM level2 [contentDocument](http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/html.html#ID-50708718)属性访问 iframe 的内容。*实际上*，您可能已经发现大多数浏览器出于安全考虑而拒绝访问外部文档的 DOM。无法访问完整的 DOM AFAIK（尽管可能有一些特定于浏览器的调整来禁用同域检查）；对于跨域 XHR，一个流行的技巧是使用 URL 片段标识符（参见例如[此链接](http://dojotoolkit.org/node/87)）在 iframe 和主文档中来回反弹数据，您可以使用相同的技术，但是：

*   加载在 iframe 中的文档必须配合，并且

*   无论如何您都无法访问完整的文档（您可以读回一些参数，或者您可以尝试对整个文档进行 URL 编码 - 但这会非常难看）

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-07T15:25:07.167

我刚刚找到`postMessage`了 HTML5 引入的方法；它已经在最近的浏览器（FF3、IE8 和 Safari 4）中实现。它允许在浏览器内的任何窗口对象之间交换消息。有关详细信息，请参阅[MDC](https://developer.mozilla.org/En/DOM:window.postMessage)上的文档和 John Resig 的这篇[不错的教程](http://ejohn.org/blog/cross-window-messaging/)。

# c++ - 如何像资源管理器一样在列表视图中显示缩略图？

> ID：335823
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2008-12-02T23:32:17.363
> 
>         
> 
> 标签：c++, listview, explorer, thumbnails, syslistview32

您能否指出 C++ 代码示例以在列表视图中显示视频和图像缩略图？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T08:02:13.667

我可以提供图片，但不能提供视频：

[http://www.codeproject.com/KB/GDI-plus/GdiPThumbnailsViewer.aspx](http://www.codeproject.com/KB/GDI-plus/GdiPThumbnailsViewer.aspx)

基本上，您使用普通列表控件并将图像添加到关联的图像列表中。虽然有一些问题 - 看起来你必须使用 CImageView::ReplaceImage 而不是 CImageView::AddImage，否则图像无法正确显示。屏蔽图像可能还需要一些工作。

# cocoa - 可可中不区分大小写的KVC？

> ID：335833
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2008-12-02T23:38:31.390
> 
>         
> 
> 标签：cocoa, key-value-observing, key-value-coding

对于我正在考虑使用的特定方法，我将不胜感激。场景如下。

我有一个对象（我们称之为 MObject），它有许多属性，比如 x 和 y 坐标、高度和宽度。这些属性是根据 KVC 指南命名的（MObject.x；MObject.height 等）。我的下一个任务是读入描述这个 MObject 的 XML 文件。不幸的是，XML 元素的名称不同——X 和 Y、高度和宽度（注意大写）。

理想情况下，XML 元素将与 MObject 的属性相匹配。在这种情况下，我可以使用 KVC 并避免一大堆代码：

```
for (xmlProperty in xmlElement)
{
    [MObject setValue:xmlProperty.value forKey:xmlProperty.name].
} 
```

解决此问题的一种方法是使用不区分大小写的键。我会从哪里开始呢？还有其他更好的解决方案吗？

建议非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T00:24:43.527

如果有帮助，您可以使用 NSString`lowercaseString`将 XML 键名转换为小写。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T03:21:52.673

覆盖`-valueForUndefinedKey:`和`-setValue:forUndefinedKey:`

如果您找到一个不同大小写的键，请使用它，否则调用`super`.

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T03:36:21.347

不要覆盖`-[NSObject valueForKey:]`，`-[NSObject setValue:forKey:]`如果你能帮助它。

最好的办法是即时转换从 XML 文件中获得的密钥。使用单独的方法进行转换，您还可以维护名称到属性键的缓存，因此您只需每次转换一次。

```
- (NSString *)keyForName:(NSString *)name {
    // _nameToKeyCache is an NSMutableDictionary that caches the key
    // generated for a given name so it's only generated once per name
    NSString *key = [_nameToKeyCache objectForKey:name];
    if (key == nil) {
        // ...generate key...
        [_nameToKeyCache setObject:key forKey:name];
    }
    return key;
}

- (void)foo:xmlElement {
    for (xmlProperty in xmlElement) {
        [myObject setValue:xmlProperty.value forKey:[self keyForName:xmlProperty.name]].
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T01:40:52.860

覆盖`-valueForKey:`和`-setValue:forKey:`。

您可能应该只接受您识别的键（元素/属性名称），并调用`super`其他键。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2012-09-14T17:46:48.620

所以我实施了 Chris Hanson 的建议，这就是我最终的结果。我把它放在我的 Utils 课上。它为我们查找的每个类保留一个字典。它可能需要进行一些重构，但到目前为止它对我来说效果很好。

```
static NSMutableDictionary *keyCache;

+ (NSString *)keyForClass:(Class)klass column:(NSString *)column {
    if (!keyCache) { keyCache = [NSMutableDictionary dictionary]; }

    NSString *className = NSStringFromClass(klass);

    NSMutableDictionary *tableKeyCache = [keyCache objectForKey:className];

    if (!tableKeyCache) {
        tableKeyCache = [NSMutableDictionary dictionary];

        unsigned int numMethods = 0;
        Method *methods = class_copyMethodList(klass, &numMethods);
        NSMutableArray * selectors = [NSMutableArray array];
        for (int i = 0; i < numMethods; ++i) {
            SEL selector = method_getName(methods[i]);
            [selectors addObject:NSStringFromSelector(selector)];
        }
        [tableKeyCache setValue:selectors forKey:@"allSelectors"];
        free(methods);
        [keyCache setValue:tableKeyCache forKey:className];
    }

    NSString *keyToReturn = [tableKeyCache valueForKey:column];
    if (!keyToReturn) {
        for (NSString *columnKey in [tableKeyCache valueForKey:@"allSelectors"]) {
            if ( [column caseInsensitiveCompare:columnKey] == NSOrderedSame) {
                [tableKeyCache setValue:columnKey forKey:column];
                keyToReturn = columnKey;
                break;
            }
        }
    }

    if (!keyToReturn) { // Taking a guess here...
        NSLog(@"Selector not found for %@: %@ ", className, column);
        keyToReturn = [Utils keyForClass:[klass superclass] column:column];
    }

    return keyToReturn;
} 
```

# visual-studio - VS2010 可扩展性 - 它有什么不同？

> ID：335838
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-12-02T23:44:11.940
> 
>         
> 
> 标签：visual-studio, add-in, vsx, extensibility

给那些已经看过 VS2010 的人一个问题。为了让他们的插件在 VS2010 下工作，插件开发人员必须做出多大的改变？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2008-12-04T07:09:01.370

幸运的是，我刚刚写了关于[这个确切主题的](http://jb-brown.blogspot.com/2008/11/migrating-visual-studio-add-in-to-2010.html)文章，并展示了升级我的加载项需要什么。（以下链接）

基本上，您的答案是迁移的影响很小，因为大多数功能都有向后兼容的“垫片”。不过可以理解的是，要在 2010 年获得新的东西，如 MAF、MEF 和 WPF，开发人员需要做一些工作。

*   [http://jb-brown.blogspot.com/2008/11/migrating-visual-studio-add-in-to-2010.html](http://jb-brown.blogspot.com/2008/11/migrating-visual-studio-add-in-to-2010.html)

*   [http://jb-brown.blogspot.com/2008/11/migrating-visual-studio-add-in-to-2010_29.html](http://jb-brown.blogspot.com/2008/11/migrating-visual-studio-add-in-to-2010_29.html)

*   （更多来）

最后 - 一定要阅读Carlos Quintero 发表的[这篇关于加载项、框架和 CLR 兼容性的优秀文章。](http://msmvps.com/blogs/carlosq/archive/2008/11/14/net-frameworks-clrs-and-visual-studio-add-ins.aspx)Carlos 的博客是我找到的关于加载项内容的最佳博客。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-08-06T08:45:25.950

我们已经将我们的 Visual Lint 产品的开发版本迁移到 VS2010，并且在大多数情况下，迁移很简单——或者如果 Visual Studio 2010 Beta 1 自动化模型中没有这么多错误的话，迁移就会很简单。这种体验类似于我们为支持 VS2005 所做的工作（相比之下，VS2008 轻而易举），因此很明显 VS2010 代表了 Visual Studio 发展的重大变化。

由于我们对我们支持的所有 Visual Studio 版本都使用相同的二进制文件（这意味着代码始终被限制为原生 C++），因此接口中的重大更改对我们来说往往是显而易见的。这一次，引起我们问题的领域是：

1.  新的 .vcxproj 项目文件格式（我们解析项目文件以读取项目属性，因为这在多个 Visual Studio 版本中比使用 VCProjectEngine - Visual C++ 自动化模型更可靠）。因此，我们必须为 .vcxproj 文件编写一个新的解析器，因为它们可能非常复杂，这本身就是一项主要任务。

2.  命令栏/命令界面中的各种错误（可能与新的 WPF 编辑器/命令栏集成有关）。Carlos Quintero 已就该主题撰写了大量博客，因此如果您对此领域有疑问，建议您阅读他的博客。

3.  Beta 1 中对加载项启动序列的未记录更改，这意味着 DTE 窗口界面在 OnStartupComplete 事件发生之前无法正常工作。MS 已通知我们，由于潜在的兼容性问题，他们正在逆转 Beta 2 中的这一特定更改，但无论如何，我们现在已经使我们的代码对这个不敏感。

4.  Beta 1 中的工具窗口不能由内部 CLSID 创建（尽管 ProgID 工作正常）。这是我们在结束端口的最后一个主要部分之前等待的最后一个。

我怀疑我们的经验对于大多数插件来说非常具有代表性——只有当您使用受 Visual Studio 本身的重大更改（例如编辑器或智能感知集成）直接影响的区域时，影响才可能特别严重。

最后，我们不打算将构建本身迁移到 VS2010。它目前是在 VS2008 中构建的，我们根本看不出有任何理由迁移到 IDE，即使它在今年晚些时候 RTM 时也显示出仍然是“正在进行中的工作”的所有迹象（尽管这只是我个人的看法- YMMV）。

# c++ - 你真的可以有一个没有主体的函数/方法，而只是一个 try/catch 块吗？

> ID：335839
> 
>         
> 
> 赞同：15
> 
>         
> 
> 时间：2008-12-02T23:44:30.020
> 
>         
> 
> 标签：c++, g++, try-catch

请注意，此函数没有“{”和“}”主体。只是一个 try/catch 块：

```
void func( void )
try
{
    ...
}
catch(...)
{
    ...
} 
```

这是有意成为 C++ 的一部分，还是 g++ 扩展？

除了绕过 {} 的 1 级之外，还有其他目的吗？

[在遇到http://stupefydeveloper.blogspot.com/2008/10/c-function-try-catch-block.html](http://stupefydeveloper.blogspot.com/2008/10/c-function-try-catch-block.html)之前我从来没有听说过这个

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2008-12-02T23:53:56.257

是的，那是有效的 C++。我发现它的一个目的是将异常转换为返回值，并将返回值中的异常转换代码与函数中的其他代码分开。是的，你可以`return x;`像你展示的那样从一个 catch 块（实际上我最近才发现）。但在这种情况下，我可能会使用另一层大括号并将 try/catch 放在函数中。大多数 C++ 程序员会更熟悉它。

另一个目的是捕获构造函数初始化列表抛出的异常，它使用类似的语法：

```
struct f {
    g member;
    f() try { 
        // empty
    } catch(...) { 
        std::cerr << "thrown from constructor of g"; 
    }
}; 
```

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2008-12-02T23:50:10.853

是的，这是标准的。函数 try 块，因为它们被称为，对常规函数没有太多用处，但对于构​​造函数，它们允许您捕获在初始化列表中抛出的异常。

请注意，在构造函数的情况下，异常将始终在任何 catch 块的末尾重新抛出。

# performance - 进程内、进程间和机器间调用之间的相对区别是什么？

> ID：335840
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2008-12-02T23:45:50.750
> 
>         
> 
> 标签：performance, networking, distributed, latency

忽略有效负载大小，进程内调用（例如在 C++ 或 Java 中）、对同一台机器上的进程的套接字调用以及对另一台机器上的进程的套接字调用之间的延迟相对差异是多少？这可以表示为 ns/ms 或相对数量级的最小延迟。

我正在寻找类似的东西：

[http://duartes.org/gustavo/blog/post/what-your-computer-does-while-you-wait](http://duartes.org/gustavo/blog/post/what-your-computer-does-while-you-wait)

...但扩展到进程内与网络调用（假设快速内部网）。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T22:16:07.313

这是个好主意……不精确，但它给出了粗略的比率：

方法调用 -- ~100s ns 同步方法调用 -- ~1000s ns 反射方法调用 -- 低 ~10,000s ns

机器环回——~30,000-150,000 ns

本地子网 -- 1-2 ms

互联网 -- 30-100 毫秒

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T20:15:02.690

ping 本地机器和 ping 远程机器会给您任何关系感吗？方法调用当然是另一个度量。  

# asp.net-mvc - MVC Beta [HandleError] 属性（需要帮助）

> ID：335841
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-02T23:46:24.947
> 
>         
> 
> 标签：asp.net-mvc, handleerror, asp.net-mvc-beta1

我已经尝试过使用和不使用“ExceptionType”参数。我在 Views/Shared 文件夹和 Views/thisController 文件夹中都有一个 Error.aspx 页面。但是每次我运行它时，我都会收到“'/'应用程序中的服务器错误”。错误页面，而不是视图/共享中的漂亮页面。

知道这里可能出了什么问题吗？

```
[HandleError(View="Error",ExceptionType=typeof(FormatException))]

    public ActionResult Create()
    {
        throw new Exception();
        //int breakMe = int.Parse("not a number");
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T01:32:50.503

我的 web.config 中确实有这个

```
<customErrors mode="On"></customErrors> 
```

一定是别的什么在起作用。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T01:21:42.477

它不适用于我当前的项目或新项目。这可能是一个“功能”。

**编辑：**看起来您已启用 customErrors (mode="On") 以便根据 HandleErrorAttribute.cs 中的此代码段工作：

```
// If custom errors are disabled, we need to let the normal ASP.NET exception handler
// execute so that the user can see useful debugging information.
if (filterContext.ExceptionHandled || !filterContext.HttpContext.IsCustomErrorEnabled) {
  return;
} 
```

# javascript - 如何判断 DOM 元素是否显示？

> ID：335847
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2008-12-02T23:47:48.080
> 
>         
> 
> 标签：javascript, html, css, dom

不要与[“如何判断 DOM 元素是否可见？”混淆。](https://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible)

我想确定给定的 DOM 元素是否在页面上可见。例如，如果元素是已`display:none;`设置的父元素的子元素，则它将不可见。

（这与元素是否在视口中无关）

我可以遍历元素的每个父元素，检查`display`样式​​，但我想知道是否有更直接的方法？

* * *

## 回答 #1

> 赞同：14
> 
>             
> 
> 时间：2008-12-02T23:55:59.250

从 Firefox 中的快速测试来看，当元素被父对象隐藏时，大小和位置属性（clientWidth、offsetTop 等）似乎都返回 0 `display:none`。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T01:08:43.113

使用[原型](http://prototypejs.org)：

```
if($('someDiv').visible) {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-12-04T14:12:56.663

当我使用[MochiKit](http://mochikit.com/)时，我根据 Ant P 的回答想出的是：

```
getElementPosition('mydiv').y != 0 
```

我还可以通过以下方式检查它是否在视口中（垂直）：

```
y = getElementPosition('mydiv').y
(y < getViewportPosition().y + getViewportDimensions().h &&
    getViewportPosition().y < y) 
```

顺便说一句，这也适用于 IE6。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-01-13T19:08:55.150

依靠位置为 0 是脆弱的。您最好编写一个辅助函数来遍历父母以直接检查他们的显示样式。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2011-05-27T14:17:52.280

这是迭代解决方案 -

```
var elementShown = function(e){
    if (e == document) 
      return true;

    if ($(e).css('display') == 'none') //or whatever your css function is
      return false;

    return elementShown(e.parentNode);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2018-04-26T20:50:49.710

`.getClientRects()`如果元素不是通过继承显示的（`display="none"`来自父/祖先元素），将返回一个空数组

# wpf - WPF CommandParameter 在第一次调用 CanExecute 时为 NULL

> ID：335849
> 
>         
> 
> 赞同：94
> 
>         
> 
> 时间：2008-12-02T23:49:22.367
> 
>         
> 
> 标签：wpf, data-binding, xaml, .net-3.5, command

我遇到了 WPF 和绑定到 ItemsControl 的 DataTemplate 内的按钮的命令的问题。场景非常简单。ItemsControl 绑定到对象列表，我希望能够通过单击按钮来删除列表中的每个对象。按钮执行命令，命令负责删除。CommandParameter 绑定到我要删除的对象。这样我就知道用户点击了什么。用户应该只能删除他们“自己的”对象 - 所以我需要在命令的“CanExecute”调用中进行一些检查，以验证用户是否具有正确的权限。

问题是传递给 CanExecute 的参数在第一次调用时为 NULL - 所以我无法运行逻辑来启用/禁用命令。但是，如果我让它始终启用，然后单击按钮执行命令，则正确传递了 CommandParameter。这意味着对 CommandParameter 的绑定正在工作。

ItemsControl 和 DataTemplate 的 XAML 如下所示：

```
<ItemsControl 
    x:Name="commentsList"
    ItemsSource="{Binding Path=SharedDataItemPM.Comments}"
    Width="Auto" Height="Auto">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <Button                             
                    Content="Delete"
                    FontSize="10"
                    Command="{Binding Path=DataContext.DeleteCommentCommand, ElementName=commentsList}" 
                    CommandParameter="{Binding}" />
            </StackPanel>                       
         </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

如您所见，我有一个 Comments 对象列表。我希望将 DeleteCommentCommand 的 CommandParameter 绑定到 Command 对象。

所以我想我的问题是：以前有没有人遇到过这个问题？CanExecute 在我的命令上被调用，但第一次参数始终为 NULL - 为什么会这样？

**更新：**我能够将问题缩小一点。我添加了一个空的 Debug ValueConverter，以便在 CommandParameter 绑定数据时输出消息。原来问题在于 CanExecute 方法是在 CommandParameter 绑定到按钮之前执行的。我试图在命令之前设置命令参数（如建议的那样） - 但它仍然不起作用。关于如何控制它的任何提示。

**Update2：**有什么方法可以检测绑定何时“完成”，以便我可以强制重新评估命令？另外 - 我有多个绑定到同一命令对象实例的按钮（ItemsControl 中的每个项目一个）是否存在问题？

**Update3：**我已将错误的复制品上传到我的 SkyDrive：[http ://cid-1a08c11c407c0d8e.skydrive.live.com/self.aspx/Code%20samples/CommandParameterBinding.zip](http://cid-1a08c11c407c0d8e.skydrive.live.com/self.aspx/Code%20samples/CommandParameterBinding.zip)

* * *

## 回答 #1

> 赞同：58
> 
>             
> 
> 时间：2010-10-28T21:39:55.323

我在尝试绑定到我的视图模型上的命令时遇到了同样的问题。

我将其更改为使用相对源绑定，而不是按名称引用元素，这样就成功了。参数绑定没有改变。

旧代码：

```
Command="{Binding DataContext.MyCommand, ElementName=myWindow}" 
```

新代码：

```
Command="{Binding DataContext.MyCommand, RelativeSource={RelativeSource AncestorType=Views:MyView}}" 
```

**更新**：我刚刚在没有使用 ElementName 的情况下遇到了这个问题，我正在绑定到我的视图模型上的命令，并且我的按钮数据上下文是我的视图模型。在这种情况下，我必须简单地将 CommandParameter 属性移到 Button 声明（在 XAML 中）中的 Command 属性之前。

```
CommandParameter="{Binding Groups}"
Command="{Binding StartCommand}" 
```

* * *

## 回答 #2

> 赞同：32
> 
>             
> 
> 时间：2008-12-03T04:59:55.017

我发现我设置 Command 和 CommandParameter 的顺序会有所不同。设置 Command 属性会导致立即调用 CanExecute，因此您希望此时已经设置了 CommandParameter。

我发现在 XAML 中切换属性的顺序实际上会产生影响，尽管我不确定它是否会解决您的问题。不过，值得一试。

您似乎在暗示该按钮永远不会启用，这令人惊讶，因为我希望在您的示例中的 Command 属性之后不久设置 CommandParameter。调用 CommandManager.InvalidateRequerySuggested() 会导致按钮启用吗？

* * *

## 回答 #3

> 赞同：18
> 
>             
> 
> 时间：2009-02-05T16:22:50.030

我偶然发现了一个类似的问题，并使用我值得信赖的 TriggerConverter 解决了它。

```
public class TriggerConverter : IMultiValueConverter
{
    #region IMultiValueConverter Members

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        // First value is target value.
        // All others are update triggers only.
        if (values.Length < 1) return Binding.DoNothing;
        return values[0];
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

这个值转换器接受任意数量的参数并将它们中的第一个作为转换后的值传递回去。在您的情况下用于 MultiBinding 时，它如下所示。

```
<ItemsControl 
    x:Name="commentsList"
    ItemsSource="{Binding Path=SharedDataItemPM.Comments}"
    Width="Auto" Height="Auto">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <Button                             
                    Content="Delete"
                    FontSize="10"
                    CommandParameter="{Binding}">
                    <Button.Command>
                        <MultiBinding Converter="{StaticResource TriggerConverter}">
                            <Binding Path="DataContext.DeleteCommentCommand"
                                     ElementName="commentsList" />
                            <Binding />
                        </MultiBinding> 
                    </Button.Command>
                </Button>
            </StackPanel>                                       
         </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

您必须将 TriggerConverter 作为资源添加到某处才能正常工作。现在，在 CommandParameter 的值变得可用之前，不会设置 Command 属性。您甚至可以绑定到 RelativeSource.Self 和 CommandParameter 而不是 . 达到同样的效果。

* * *

## 回答 #4

> 赞同：15
> 
>             
> 
> 时间：2014-07-10T06:16:59.670

我想出了另一个选项来解决我想分享的这个问题。因为命令的 CanExecute 方法在设置 CommandParameter 属性之前执行，所以我创建了一个带有附加属性的辅助类，该属性强制在绑定更改时再次调用 CanExecute 方法。

```
public static class ButtonHelper
{
    public static DependencyProperty CommandParameterProperty = DependencyProperty.RegisterAttached(
        "CommandParameter",
        typeof(object),
        typeof(ButtonHelper),
        new PropertyMetadata(CommandParameter_Changed));

    private static void CommandParameter_Changed(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var target = d as ButtonBase;
        if (target == null)
            return;

        target.CommandParameter = e.NewValue;
        var temp = target.Command;
        // Have to set it to null first or CanExecute won't be called.
        target.Command = null;
        target.Command = temp;
    }

    public static object GetCommandParameter(ButtonBase target)
    {
        return target.GetValue(CommandParameterProperty);
    }

    public static void SetCommandParameter(ButtonBase target, object value)
    {
        target.SetValue(CommandParameterProperty, value);
    }
} 
```

然后在要绑定命令参数的按钮上...

```
<Button 
    Content="Press Me"
    Command="{Binding}" 
    helpers:ButtonHelper.CommandParameter="{Binding MyParameter}" /> 
```

我希望这可能会帮助其他人解决这个问题。

* * *

## 回答 #5

> 赞同：10
> 
>             
> 
> 时间：2016-08-15T18:46:40.347

这是一个旧线程，但由于谷歌在我遇到这个问题时把我带到了这里，我将添加一个对我有用的 DataGridTemplateColumn 和一个按钮。

从以下位置更改绑定：

```
CommandParameter="{Binding .}" 
```

到

```
CommandParameter="{Binding DataContext, RelativeSource={RelativeSource Self}}" 
```

不知道为什么它有效，但它对我有用。

* * *

## 回答 #6

> 赞同：7
> 
>             
> 
> 时间：2019-05-10T12:37:26.810

我最近遇到了同样的问题（对我来说是上下文菜单中的菜单项），虽然它可能不是适合每种情况的解决方案，但我找到了一种不同的（而且更短！）解决这个问题的方法问题：

```
<MenuItem Header="Open file" Command="{Binding Tag.CommandOpenFile, IsAsync=True, RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}" CommandParameter="{Binding Name}" /> 
```

忽略`Tag`上下文菜单特殊情况的基于 - 的解决方法，这里的关键是`CommandParameter`定期绑定，但绑定`Command`附加的`IsAsync=True`. 这将稍微延迟实际命令的绑定（以及它的`CanExecute`调用），因此参数已经可用。不过，这意味着在短时间内，启用状态可能是错误的，但就我而言，这是完全可以接受的。

* * *

## 回答 #7

> 赞同：5
> 
>             
> 
> 时间：2009-02-18T15:34:52.913

您也许可以使用我昨天在[Prism 论坛上](http://www.codeplex.com/CompositeWPF/Thread/View.aspx?ThreadId=47338)`CommandParameterBehavior`发布的内容。它添加了丢失的行为，其中更改了要重新查询的原因。`CommandParameter``Command`

`PropertyDescriptor.AddValueChanged`这里有一些复杂性，因为我试图避免如果您在没有稍后调用的情况下调用而导致的内存泄漏`PropertyDescriptor.RemoveValueChanged`。我尝试通过在卸载 ekement 时取消注册处理程序来解决此问题。

`IDelegateCommand`除非您使用 Prism（并且想要对 Prism 库进行与我相同的更改），否则您可能需要删除这些东西。另请注意，我们通常不在`RoutedCommand`这里使用 s （我们使用 Prism 的几乎所有东西）所以如果我的调用引发某种破坏已知宇宙或任何东西的量子波函数崩溃级联，`DelegateCommand<T>`请不要让我负责。`CommandManager.InvalidateRequerySuggested`

```
using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Input;

namespace Microsoft.Practices.Composite.Wpf.Commands
{
    /// <summary>
    /// This class provides an attached property that, when set to true, will cause changes to the element's CommandParameter to 
    /// trigger the CanExecute handler to be called on the Command.
    /// </summary>
    public static class CommandParameterBehavior
    {
        /// <summary>
        /// Identifies the IsCommandRequeriedOnChange attached property
        /// </summary>
        /// <remarks>
        /// When a control has the <see cref="IsCommandRequeriedOnChangeProperty" />
        /// attached property set to true, then any change to it's 
        /// <see cref="System.Windows.Controls.Primitives.ButtonBase.CommandParameter" /> property will cause the state of
        /// the command attached to it's <see cref="System.Windows.Controls.Primitives.ButtonBase.Command" /> property to 
        /// be reevaluated.
        /// </remarks>
        public static readonly DependencyProperty IsCommandRequeriedOnChangeProperty =
            DependencyProperty.RegisterAttached("IsCommandRequeriedOnChange",
                                                typeof(bool),
                                                typeof(CommandParameterBehavior),
                                                new UIPropertyMetadata(false, new PropertyChangedCallback(OnIsCommandRequeriedOnChangeChanged)));

        /// <summary>
        /// Gets the value for the <see cref="IsCommandRequeriedOnChangeProperty"/> attached property.
        /// </summary>
        /// <param name="target">The object to adapt.</param>
        /// <returns>Whether the update on change behavior is enabled.</returns>
        public static bool GetIsCommandRequeriedOnChange(DependencyObject target)
        {
            return (bool)target.GetValue(IsCommandRequeriedOnChangeProperty);
        }

        /// <summary>
        /// Sets the <see cref="IsCommandRequeriedOnChangeProperty"/> attached property.
        /// </summary>
        /// <param name="target">The object to adapt. This is typically a <see cref="System.Windows.Controls.Primitives.ButtonBase" />, 
        /// <see cref="System.Windows.Controls.MenuItem" /> or <see cref="System.Windows.Documents.Hyperlink" /></param>
        /// <param name="value">Whether the update behaviour should be enabled.</param>
        public static void SetIsCommandRequeriedOnChange(DependencyObject target, bool value)
        {
            target.SetValue(IsCommandRequeriedOnChangeProperty, value);
        }

        private static void OnIsCommandRequeriedOnChangeChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            if (!(d is ICommandSource))
                return;

            if (!(d is FrameworkElement || d is FrameworkContentElement))
                return;

            if ((bool)e.NewValue)
            {
                HookCommandParameterChanged(d);
            }
            else
            {
                UnhookCommandParameterChanged(d);
            }

            UpdateCommandState(d);
        }

        private static PropertyDescriptor GetCommandParameterPropertyDescriptor(object source)
        {
            return TypeDescriptor.GetProperties(source.GetType())["CommandParameter"];
        }

        private static void HookCommandParameterChanged(object source)
        {
            var propertyDescriptor = GetCommandParameterPropertyDescriptor(source);
            propertyDescriptor.AddValueChanged(source, OnCommandParameterChanged);

            // N.B. Using PropertyDescriptor.AddValueChanged will cause "source" to never be garbage collected,
            // so we need to hook the Unloaded event and call RemoveValueChanged there.
            HookUnloaded(source);
        }

        private static void UnhookCommandParameterChanged(object source)
        {
            var propertyDescriptor = GetCommandParameterPropertyDescriptor(source);
            propertyDescriptor.RemoveValueChanged(source, OnCommandParameterChanged);

            UnhookUnloaded(source);
        }

        private static void HookUnloaded(object source)
        {
            var fe = source as FrameworkElement;
            if (fe != null)
            {
                fe.Unloaded += OnUnloaded;
            }

            var fce = source as FrameworkContentElement;
            if (fce != null)
            {
                fce.Unloaded += OnUnloaded;
            }
        }

        private static void UnhookUnloaded(object source)
        {
            var fe = source as FrameworkElement;
            if (fe != null)
            {
                fe.Unloaded -= OnUnloaded;
            }

            var fce = source as FrameworkContentElement;
            if (fce != null)
            {
                fce.Unloaded -= OnUnloaded;
            }
        }

        static void OnUnloaded(object sender, RoutedEventArgs e)
        {
            UnhookCommandParameterChanged(sender);
        }

        static void OnCommandParameterChanged(object sender, EventArgs ea)
        {
            UpdateCommandState(sender);
        }

        private static void UpdateCommandState(object target)
        {
            var commandSource = target as ICommandSource;

            if (commandSource == null)
                return;

            var rc = commandSource.Command as RoutedCommand;
            if (rc != null)
            {
                CommandManager.InvalidateRequerySuggested();
            }

            var dc = commandSource.Command as IDelegateCommand;
            if (dc != null)
            {
                dc.RaiseCanExecuteChanged();
            }

        }
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2010-04-08T18:01:27.613

有一种相对简单的方法可以用 DelegateCommand 来“修复”这个问题，尽管它需要更新 DelegateCommand 源并重新编译 Microsoft.Practices.Composite.Presentation.dll。

1) 下载 Prism 1.2 源代码并打开 CompositeApplicationLibrary_Desktop.sln。这是一个 Composite.Presentation.Desktop 项目，其中包含 DelegateCommand 源。

2）在公共事件EventHandler CanExecuteChanged下，修改为如下：

```
public event EventHandler CanExecuteChanged
{
     add
     {
          WeakEventHandlerManager.AddWeakReferenceHandler( ref _canExecuteChangedHandlers, value, 2 );
          // add this line
          CommandManager.RequerySuggested += value;
     }
     remove
     {
          WeakEventHandlerManager.RemoveWeakReferenceHandler( _canExecuteChangedHandlers, value );
          // add this line
          CommandManager.RequerySuggested -= value;
     }
} 
```

3）在protected virtual void OnCanExecuteChanged()下，修改如下：

```
protected virtual void OnCanExecuteChanged()
{
     // add this line
     CommandManager.InvalidateRequerySuggested();
     WeakEventHandlerManager.CallWeakReferenceHandlers( this, _canExecuteChangedHandlers );
} 
```

4) 重新编译解决方案，然后导航到已编译的 DLL 所在的 Debug 或 Release 文件夹。将 Microsoft.Practices.Composite.Presentation.dll 和 .pdb（如果您愿意）复制到您引用外部程序集的位置，然后重新编译您的应用程序以提取新版本。

此后，每次 UI 呈现绑定到相关 DelegateCommand 的元素时，都应触发 CanExecute。

保重，乔

gmail的裁判

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2015-11-29T10:41:34.337

在阅读了类似问题的一些很好的答案后，我在您的示例中稍微更改了 DelegateCommand 以使其正常工作。而不是使用：

```
public event EventHandler CanExecuteChanged; 
```

我将其更改为：

```
public event EventHandler CanExecuteChanged
{
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
} 
```

我删除了以下两种方法，因为我懒得修复它们

```
public void RaiseCanExecuteChanged() 
```

和

```
protected virtual void OnCanExecuteChanged() 
```

仅此而已...这似乎可以确保在 Binding 更改时和 Execute 方法之后调用 CanExecute

如果 ViewModel 发生更改，它不会自动触发，但正如该线程中所述，可以通过在 GUI 线程上调用 CommandManager.InvalidateRequerySuggested

```
Application.Current?.Dispatcher.Invoke(DispatcherPriority.Normal, (Action)CommandManager.InvalidateRequerySuggested); 
```

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2008-12-04T14:26:06.403

嘿 Jonas，不确定这是否适用于数据模板，但这是我在 ListView 上下文菜单中使用的绑定语法，用于获取当前项目作为命令参数：

CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}，Path=PlacementTarget.SelectedItem，Mode=TwoWay}"

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2009-11-26T14:18:40.777

我已将此记录为 .Net 4.0 中针对 WPF 的错误，因为该问题在 Beta 2 中仍然存在。

[https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=504976](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=504976)

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2016-06-21T23:19:36.993

其中一些答案是关于绑定到 DataContext 以获取 Command 本身，但问题是 CommandParameter 在不应该为 null 时为空。我们也经历过这种情况。凭直觉，我们找到了一种非常简单的方法来让它在我们的 ViewModel 中工作。这是专门针对客户反馈的CommandParameter null问题，一行代码。注意 Dispatcher.BeginInvoke()。

```
public DelegateCommand<objectToBePassed> CommandShowReport
    {
        get
        {
            // create the command, or pass what is already created.
            var command = _commandShowReport ?? (_commandShowReport = new DelegateCommand<object>(OnCommandShowReport, OnCanCommandShowReport));

            // For the item template, the OnCanCommand will first pass in null. This will tell the command to re-pass the command param to validate if it can execute.
            Dispatcher.BeginInvoke((Action) delegate { command.RaiseCanExecuteChanged(); }, DispatcherPriority.DataBind);

            return command;
        }
    } 
```

* * *

## 回答 #13

> 赞同：-1
> 
>             
> 
> 时间：2008-12-04T04:55:53.200

这是一个长镜头。要对此进行调试，您可以尝试：

- 检查 PreviewCanExecute 事件。

- 使用 snoop/wpf mole 窥视内部，看看命令参数是什么。

高温下，

* * *

## 回答 #14

> 赞同：-1
> 
>             
> 
> 时间：2008-12-22T05:57:30.130

commandManager.InvalidateRequerySuggested 也适用于我。我相信以下链接谈到了类似的问题，并且 M$ dev 确认了当前版本的限制，并且 commandManager.InvalidateRequerySuggested 是解决方法。[http://social.expression.microsoft.com/Forums/en-US/wpf/thread/c45d2272-e8ba-4219-bb41-1e5eaed08a1f/](http://social.expression.microsoft.com/Forums/en-US/wpf/thread/c45d2272-e8ba-4219-bb41-1e5eaed08a1f/)

重要的是调用 commandManager.InvalidateRequerySuggested 的时机。这应该在通知相关值更改后调用。

* * *

## 回答 #15

> 赞同：-2
> 
>             
> 
> 时间：2014-09-22T01:20:13.730

除了[Ed Ball 关于在 Command 之前设置 CommandParameter 的建议](https://stackoverflow.com/a/336258/378115)**之外**，请**确保**您的**CanExecute**方法具有**对象**类型的参数。

 ******```
private bool OnDeleteSelectedItemsCanExecute(object SelectedItems)  
{
    // Your goes heres
} 
```

希望它可以防止有人花费大量时间来弄清楚如何接收 SelectedItems 作为 CanExecute 参数

# user-interface - 在 Linux 和 Windows 上创建一个包装命令行程序的 GUI 应用程序

> ID：335855
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-02T23:52:33.250
> 
>         
> 
> 标签：user-interface, process

我正在编写一个 GUI 应用程序，它可以让用户与命令行程序进行交互。在这种情况下，这些程序是晶体学程序。他们需要很长时间才能运行。

使用命令行程序有一定的通用工作流程。一个程序的输出通常经过处理，然后由其他程序使用。用户需要能够填写各种文本框并选择发送到命令行程序的选项。

由于我很懒，不想做比我需要的更多的工作，有什么工具可以帮助我做到这一点？该软件最初需要在 Linux 上运行，但在某些时候也可以在 Windows 上运行。  

如果有某种 DSL 让非程序员能够扩展/修改 GUI 应用程序（添加新程序和更改选项等），那也会很整洁。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-19T02:30:27.023

看看[GTK Server](http://www.gtk-server.org/)，它可以轻松地从任何语言编写脚本，并且由于它作为服务运行（有点像浏览器），因此可以跨系统使用。也就是说，运行命令行的系统可以在功能强大的系统上运行，而 GTK Server 可以在用户的​​台式 PC 上运行。这些示例很容易理解，并且版本和语言矩阵必然包括您的。如果您运气不好，请选择最接近的组合作为示例。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2011-05-27T15:27:45.987

我建议看看[Galaxy](https://bitbucket.org/galaxy/galaxy-central/wiki/Home)门户网站。它基本上是一个基于 Web 的 GUI，用于命令行生物信息学工具（但同样适用于任何命令行应用程序），内置工作流功能，因此应该完全符合您的要求。

通过遵循 Galaxy 的工具配置格式，添加自己的包装器应该相当容易。请参阅[此页面](https://bitbucket.org/galaxy/galaxy-central/wiki/AddToolTutorial)了解如何执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-12-04T04:52:11.913

TCL/TK 是传统的方式。

今天，我将 python 与 wxPython（更完整）或 FLTK（更简单）一起使用。

如果您不需要从命令行程序回读结果，它会容易得多 -

例如 os.system("command options")

* * *

## 回答 #4

> 赞同：-2
> 
>             
> 
> 时间：2008-12-03T00:09:12.670

您可以使用 WShell 并重定向标准输入标准输出。

```
object console = WShell.Exec(cmdLine);
if (console.StdOut.AtEndOfStream)
    s = Pipe.StdOut.ReadLine(); 
```

缺点是您仍然必须弄清楚如何隐藏控制台窗口。但这很容易。您需要通过窗口标题找到此窗口并将其属性设置为可见。或者使用免费软件一些来自互联网的实用程序，它可以为您自动完成。

# linux - mount 使用的文件

> ID：335863
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-12-02T23:54:47.427
> 
>         
> 
> 标签：linux

/dev/md1 6068992 5204648 551080 91% /

我已经占用了 91% 的内容，并且正在尝试发现哪些文件占用了空间。我正在使用Linux。有人知道命令吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2008-12-02T23:57:34.660

`du -k -S -x / | sort -n -r | head -10`

将返回根文件系统上最大的 10 个文件。

编辑：[@Alnitak](https://stackoverflow.com/users/6782/alnitak)的答案包括`-S`and `-x`，为了完整起见包括在此处。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2008-12-02T23:58:16.390

这将以（反向）大小顺序列出目录

```
# du -k -S -x / | sort -r -n 
```

笔记：

*   `-S`告诉它不包括子目录计数，因此每个目录图将是该目录的使用**，**而不是它下面的树

*   `-x`告诉它不要离开那个文件系统。没有这个，它会进入`/proc`, `/dev`, `/sys`, 等等，你不需要`du`这些。

编辑：哦！并不意味着 --max-depth=1 - 只是习惯的力量！

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-12-02T23:58:18.840

您可以使用它`find`来定位系统上最大的文件，例如：

```
find / -size 100M -print 
```

将查找并打印所有 100 MB 或更大的文件的名称。`-mount`如果您只想查看指定目录所在的分区，则可以使用该选项：

```
find / -mount -size 100M -print 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T12:34:34.023

通常不是单个文件的大小，而是子目录中包含的内容。我通常使用该`--max-depth=1`选项`du`在我的`home`. 外部的所有东西都`home`以某种方式安装，所以我可以去我的包管理器，让它显示所有已安装的包，按磁盘大小排序；然后我可以扔掉一些我不再需要的东西。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T10:57:12.143

我通常使用：

```
du -x / | sort -ns 
```

但是在 GUI 上时，您也可以使用[filelight](http://www.methylblue.com/filelight/)或[fsview](http://docs.kde.org/kde3/en/kdeaddons/konq-plugins/fsview/index.html)。

# .net - SqlCommand 查询的长度有什么限制

> ID：335873
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2008-12-03T00:01:51.640
> 
>         
> 
> 标签：.net, sql-server, sql-server-2005, sql-server-2008, sql-server-2000

SQL Server 可以处理的查询长度是否有限制？

我有一个普通的 SqlCommand 对象，并将一个很长的 select 语句作为字符串传递。

在针对 SQL Server 2005/2008 引擎运行时，查询似乎很好，但在 SQL Server 2000 引擎上不执行。

我没有任何错误详细信息，因为我只有第三手信息，但我的应用程序没有按预期工作。我可以麻烦安装一个 SQL Server 2000 实例，但我只是想知道是否有人有一个快速的。是的，SQL Server 2000 中有 4K 或 8K 限制，但 2005 类型答案中没有。

我知道我可以使用存储过程，但假设我有正当理由不使用它们:-)

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2008-12-03T00:29:33.830

这是一个想法：

SQLServer 2000 的 VARCHAR 最多允许 8000 个字符，因此这可能有效：

伪代码：

```
SQLCommand command = new SqlCommand("exec sp_executeSQL @CMD");
command.Parameters.Add(new SqlParameter("@CMD",YourDynamicSQL, VARCHAR); 
```

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2008-12-03T00:05:49.493

SqlServer 2000 对即席查询有 4000 个字符的查询限制。

你能把它抽象成一个存储过程吗？

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2008-12-03T00:52:43.160

动态查询必读...[动态 SQL 的诅咒和祝福](http://www.sommarskog.se/dynamic_sql.html)，我强烈推荐你阅读它。这次可能对你没有帮助，但它肯定会在未来帮助你..

从文章中引用，以防万一。

> SQL 2000 中的 sp_executesql 和长 SQL 字符串
> 
>   
>   
> 
> 在 SQL 2000 和 SQL 7 上 sp_executesql 有一个限制，因为您不能使用超过 4000 个字符的 SQL 字符串。（在 SQL 2005 及更高版本上，您应该使用 nvarchar(MAX) 来避免此问题。）如果您想在查询字符串超过此限制时使用 sp_executesql 以使用参数化查询计划，实际上有一种解决方法。也就是说，您可以将 sp_executesql 包装在 EXEC() 中：
> 
>   
>   
> 
> 声明 @sql1 nvarchar(4000)、@sql2 nvarchar(4000)、@state char(2) SELECT @state = 'CA' SELECT @sql1 = N'SELECT COUNT(*)' SELECT @sql2 = N'FROM dbo.authors WHERE state = @state' EXEC('EXEC sp_executesql N''' + @sql1 + @sql2 + ''', N''@state char(2)'', @state = ''' + @state + '' '')
> 
>   
>   
> 
> 这是可行的，因为 sp_executesql 的 @stmt 参数是 ntext，所以它本身对大小没有任何限制。
> 
>   
>   
> 
> 您甚至可以通过使用 INSERT-EXEC 来使用输出参数，如下例所示：
> 
>   
>   
> 
> CREATE TABLE #result (cnt int NOT NULL) DECLARE @sql1 nvarchar(4000), @sql2 nvarchar(4000), @state char(2), @mycnt int SELECT @state = 'CA' SELECT @sql1 = N'SELECT @ cnt = COUNT(*)' SELECT @sql2 = N'FROM dbo.authors WHERE state = @state' INSERT #result (cnt) EXEC('DECLARE @cnt int EXEC sp_executesql N''' + @sql1 + @sql2 + ' '', N''@state char(2), @cnt int OUTPUT'', @state = ''' + @state + ''', @cnt = @cnt OUTPUT SELECT @cnt') SELECT @mycnt = cnt来自#结果
> 
>   
>   
> 
> 如果您认为这太混乱而不值得，您可以理解我的理解。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2008-12-03T01:24:29.990

我遇到了针对 AS/400 运行的查询的 2k 限制。我通常通过删除所有空格来设法低于 2k 限制 - 它使查询不可读，但这是低于限制的最简单方法。  

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2008-12-16T20:03:28.027

根据我自己的经验，我发现，最初似乎是 SQLServer2000 对查询长度的限制，实际上（信不信由你）并不是对查询长度的真正限制，而是对长度的限制查询中任何给定的 LINE。

大约一年前我遇到了这个问题，所以我不记得行长是多少，但是您可以尝试将巨大的查询拆分为最大行长为 64K 左右的行，并且看看情况如何。我的回忆是，行长限制可能是 64K，信不信由你。我采用了这个非常长的查询（由 sql-generator 程序生成），查询长约 80K，我在记事本中将其分成两半（即，我在 SQL 代码中的大约一半处添加了换行符--- 但我确保不要拆分任何单词），然后将整个内容粘贴到查询分析器命令窗口中。然后它起作用了，在中间的某个地方换行，从而导致两行中的每一行的长度都小于 64K。我希望这有帮助。如果没有，请尝试更小的线长。  

* * *

## 回答 #6

> 赞同：-2
> 
>             
> 
> 时间：2008-12-03T00:39:26.557

不要因为 sql 注入而这样做。如果用户完全可以操作应用程序的动态 sql，请放弃此操作。

还 - 考虑 SP，因为它更易于维护，并且还有助于 sql 注入。

# reporting-services - 表单身份验证/报告服务 - 获取用户名

> ID：335879
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-03T00:10:58.690
> 
>         
> 
> 标签：reporting-services, forms-authentication

您可以从 Microsoft SQL Reporting Services 中的 Forms Authentication 中获取用户名的变量是什么？User!UserId 值作为运行报告服务的 Windows 帐户返回。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-12-06T23:25:03.147

我不能 100% 确定你在哪里感到困惑，所以如果这不是你要找的，请告诉我。几个月前，我在使用报告服务时自己解决了这个问题。

我在我的 login.aspx.cs 中发现了这段代码，在我验证给定的用户名/密码经过身份验证/授权后立即调用它。

```
 // Setup a remote session with the current userID as the AuthCookie username.
// This userID is subsequently passed to reporting services as the UserID running the report
authCookie = FormsAuthentication.GetAuthCookie("the username here", false); 
```

如果这不是足够的信息，如果您澄清您的问题，我可以帮助您。

# iphone - 如何让 UIPickerView 向上滑动到另一个视图上？

> ID：335885
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-03T00:14:19.243
> 
>         
> 
> 标签：iphone, cocoa-touch, transition

我正在寻找一种在按下特定按钮时将 UIPickerView（和 UIDatePickerView）向上滑动到视图（特别是 UITableView）上的方法。

我了解如何将点击事件获取到 UITableView 中，但似乎没有一个好方法可以让 UIPickerView 向上滑动...

到目前为止，我看到的所有示例都只是将其捕捉到另一个视图的底部，我可以毫无问题地做到这一点。

想法？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2008-12-03T02:11:38.087

模态显示的视图控制器从底部向上滑动以覆盖当前视图。

请参阅 UIViewController 类参考中的 -presentModalViewController:animated: 文档。您将在 UITableViewController 上调用此方法，并将 UIPickerViewController 作为第一个参数传递，将 YES 作为第二个参数传递。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-01T15:45:23.853

Ben 上面提到的一个例子（动画块）如下，它将动画到一个子视图。

```
UIWindow *window = [[Director sharedDirector] window];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.75];
[UIView setAnimationTransition:(UIViewAnimationTransitionCurlDown)
                       forView:window
                         cache:YES];
[window addSubview:aView];
[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T01:01:33.720

您是否尝试过使用 UIView 的动画块来做到这一点？请参阅有关 +[UIView beginAnimations:context:] 和 +[UIView commitAnimations]的[Apple 文档。](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIView_Class/UIView_Class.pdf)基本上，包装你的调用以在这些调用中显示 UIPickerView，你可以放慢一点。

# sql-server - 如何将参数传递给表值函数

> ID：335886
> 
>         
> 
> 赞同：26
> 
>         
> 
> 时间：2008-12-03T00:14:42.067
> 
>         
> 
> 标签：sql-server, sql-server-2005, user-defined-functions

我想做类似的事情

```
select * from tvfHello(@param) where @param in (Select ID from Users) 
```

* * *

## 回答 #1

> 赞同：43
> 
>             
> 
> 时间：2008-12-03T10:39:59.183

您需要使用**CROSS APPLY**来实现这一点

```
select 
    f.* 
from 
    users u
    cross apply dbo.tvfHello(u.ID) f 
```

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2008-12-03T00:24:24.263

AdventureWorks 数据库中的以下工作：

```
CREATE FUNCTION dbo.EmployeeByID(@employeeID int)
RETURNS TABLE
AS RETURN
(
    SELECT * FROM HumanResources.Employee WHERE EmployeeID = @employeeID
)
GO

DECLARE @employeeId int

set @employeeId=10

select * from 
EmployeeById(@employeeId) 
WHERE @EmployeeId in (SELECT EmployeeId FROM HumanResources.Employee) 
```

# 编辑

根据 Kristof 的专业知识，如果您尝试获取多个值，我已经更新了此示例，例如：

```
select * 
from HumanResources.Employee e
CROSS APPLY  EmployeeById(e.EmployeeId)
WHERE e.EmployeeId in (5,6,7,8) 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T00:22:00.647

这对我来说看起来不错，除了你应该总是在你的函数前面加上它们的模式（通常是 dbo）。所以查询应该是：

```
SELECT * FROM dbo.tvfHello(@param) WHERE @param IN (SELECT ID FROM Users) 
```

# php - 在 MySQL 中使用什么函数来散列密码？

> ID：335888
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2008-12-03T00:17:24.667
> 
>         
> 
> 标签：php, mysql, hash, passwords

我的 mysql 数据库中有一个包含密码列的用户表。目前，我使用 MD5 算法对用户密码进行哈希处理以存储在数据库中。现在我喜欢认为我是一个有安全意识的人。我在阅读 MySQL 文档时注意到他们不推荐 MD5 或 SHA/SHA1 散列方法，但不提供替代方法。

在 MySQL 中散列密码的最佳方法是什么？在我当前的实现中，PHP 和 MySQL 原生支持的函数将是理想和必要的。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2008-12-03T00:28:31.990

不一定你不应该使用 MD5，而是你不应该*只*使用MD5，因为这会使你容易受到彩虹表攻击（彩虹表是预先计算的哈希值表 - 如果你的密码是偶数远程常见或简单，攻击者只需要查找哈希值，他就知道你的明文密码。）

至少你应该为每个密码添加一个盐，这样任何现有的彩虹表都是无用的，迫使攻击者为你的密码数据库生成一个全新的彩虹表。

更好的办法是对数据库中的每个密码使用不同的盐，比如与之关联的用户名，这样攻击者甚至无法为您的整个数据库生成彩虹表，而必须分别破解每个条目。

MD5 也是一种非常快速的算法。速度是破解的敌人——生成哈希所需的时间越长，黑客每次尝试所需的时间就越长。对于登录到您的网站的用户来说，像每次使用新的额外盐对纯文本进行 100 次散列处理这样简单的操作几乎无法察觉（如果有的话），但它会增加暴力破解密码所需的时间。 100 次。

这里有更多详细信息：http: [//www.codinghorror.com/blog/archives/000953.html](http://www.codinghorror.com/blog/archives/000953.html)

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T00:29:46.357

按照今天的标准，MD5 被认为是弱的。破解使用 MD5 生成的哈希仍然需要一些工作，但它比通过暴力猜测密码要容易几倍。理想情况下，破解哈希不应该比蛮力更容易。

SHA1 也被认为比暴力猜测密码更容易破解。

实际上，我为 MySQL 贡献了一个补丁，以显示来自 OpenSSL 的 SHA224、SHA256、SHA384 和 SHA512 函数。NIST 推荐这些用于密码散列（实际上是 SHA256 和更高版本）。

我的补丁是由 MySQL 工程师完成的，如果我记得的话，它包含在 MySQL 6.0.5 及更高版本中。

如果您使用早期版本的 MySQL（而谁不使用），那么您可能可以在您的宿主语言中使用强散列函数的实现。例如， PHP 具有该`hash()`功能。您可以在应用程序中进行散列处理并将生成的消息字符串保存到数据库中。

别忘了做[盐腌](http://en.wikipedia.org/wiki/Salting_(cryptography))！

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2016-02-17T21:24:19.280

这个问题是7岁。在那段时间里，我们在计算方面取得了进步，MD5 和 SHA1 现在很容易被现代计算机破解。现在应该避免这些。

PHP 5.5 引入了[password_hash](http://php.net/manual/en/function.password-hash.php)，它使用更安全的 bcrypt 算法。虽然 MySQL 可以加密/解密 bcrypt，但这是一个糟糕的解决方案，因为您不仅会为数据库层添加潜在的大型计算负载，而且[未经哈希处理的密码可能会存储在您的日志中](https://stackoverflow.com/questions/20295778/how-to-use-bcrypt-algorithm-within-encrypt-function-in-mysql-for-verifying-p#comment30283255_20295778)

> 在任何情况下，明文密码都不应该命中 MySQL，即使是在查询级别。否则，您可能会将密码写入日志（查询日志、一般日志、慢查询日志等）。这太可怕了。所以不，甚至不要打扰...

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T00:26:39.857

****[由于已知攻击](http://en.wikipedia.org/wiki/Cryptographic_hash_function#List_of_cryptographic_hash_functions)**，可能不再推荐使用**MD5**和**SHA-1**。但是，对于大多数用例，它们***通常***仍然足够。**

 ***如果您正在寻找更多选项，只需使用 PHP 的[散列函数](http://php.net/hash)——那里有[很多选项](http://php.net/hash_algos)。

* * *

## 回答 #5

> 赞同：-3
> 
>             
> 
> 时间：2016-02-17T10:20:23.123

我正在使用*组合*。例如**SHA1(MD5())**工作正常。

# python - 尽管在 Mac OS X 登录项中注册了 Shell 脚本，但它不会自动运行

> ID：335891
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2008-12-03T00:19:58.157
> 
>         
> 
> 标签：python, macos, bash, launchd, moinmoin

我在“登录项”首选项中注册了以下 shell 脚本，但它似乎没有任何效果。它旨在启动 moinmoin wiki，但仅在从终端窗口手动运行时才有效，之后它会一直运行直到机器下一次关闭。

```
#!/bin/bash
cd /Users/stuartcw/Documents/Wiki/moin-1.7.2
/usr/bin/python wikiserver.py >> logs/`date +"%d%b%Y"`.log 2>&1 & 
```

我真的希望 Wiki 在重新启动后可用，因此在理解这一点方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T00:26:49.030

尝试使用启动。更多信息请访问[http://www.macgeekery.com/tips/all_about_launchd_items_and_how_to_make_one_yourself](http://www.macgeekery.com/tips/all_about_launchd_items_and_how_to_make_one_yourself)

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T04:46:19.193

launchd 是 MacOS X 最好的部分之一，在其他系统上找不到它让我非常痛苦。

编辑并将其放置`/Library/LaunchDaemons`为`com.you.wiki.plist`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.you.wiki</string>
    <key>LowPriorityIO</key>
    <true/>
    <key>KeepAlive</key>
    <true/>
    <key>RunAtLoad</key>
    <true/>
    <key>Nice</key>
    <integer>1</integer>
    <key>WorkingDirectory</key>
    <string>/Users/stuartcw/Documents/Wiki/moin-1.7.2</string> 
    <key>UserName</key>
    <string>user to run this as</string>
    <key>ProgramArguments</key>
    <array>
        <string>/usr/bin/python</string>
        <string>wikiserver.py</string>
    </array>
</dict>
</plist> 
```

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T00:36:56.950

一些有用的链接：

[Mac OS X：创建登录挂钩](http://support.apple.com/kb/HT2420)

[使 Shell 脚本在登录或系统启动时启动](http://www.informit.com/library/content.aspx?b=Mac_OS_X_Unleashed&seqNum=153)

如果您决定改用 Launchd，另请参阅[Lingon](http://tuppis.com/lingon/)了解前端。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T00:25:51.327

我不太了解它，因为我不使用登录项。只是一个建议，也许可以尝试使用调用这些 shell 命令的 applescript，并将其放在登录项中。

# python - 如何完成这个python函数保存在同一个文件夹中？

> ID：335896
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-12-03T00:22:27.917
> 
>         
> 
> 标签：python, image-processing, python-imaging-library

我正在尝试编写我的第一个真正的 python 函数来做一些真正的事情。我想要完成的是搜索给定的文件夹，然后打开所有图像并将它们合并在一起，以便它们制作幻灯片图像。想象一下 5 张图像堆叠在一张图像中。

我现在有这段代码，应该没问题，但可能需要一些修改：

```
import os
import Image

def filmstripOfImages():

    imgpath = '/path/here/'
    files = glob.glob(imgpath + '*.jpg')

    imgwidth = files[0].size[0]
    imgheight = files[0].size[1]
    totalheight = imgheight * len(files)

    filename = 'filmstrip.jpg'
    filmstrip_url = imgpath + filename

    # Create the new image. The background doesn't have to be white
    white = (255,255,255)
    filmtripimage = Image.new('RGB',(imgwidth, totalheight),white)  
    row = 0
    for file in files:
        img = Image.open(file)

        left = 0
        right = left + imgwidth
        upper = row*imgheight
        lower = upper + imgheight
        box = (left,upper,right,lower)
        row += 1

        filmstripimage.paste(img, box)
    try:
        filmstripimage.save(filename, 'jpg', quality=90, optimize=1)
    except:
        filmstripimage.save(miniature_filename, 'jpg', quality=90)") 
```

如何修改它，以便将新的filmstrip.jpg 保存在我从中加载图像的同一目录中？它可能有一些遗漏或错误的东西，有人知道吗？

相关问题：[如何在 python 中从图像文件夹生成幻灯片图像？](https://stackoverflow.com/questions/334827/how-to-generate-a-filmstrip-image-in-python-from-a-folder-of-images)

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-12-03T01:32:45.233

这不是您问题的答案，但可能会有所帮助：

```
#!/usr/bin/env python
import Image

def makefilmstrip(images, mode='RGB', color='white'):
    """Return a combined (filmstripped, each on top of the other) image of the images.

    """
    width  = max(img.size[0] for img in images)
    height = sum(img.size[1] for img in images)

    image = Image.new(mode, (width, height), color) 

    left, upper = 0, 0
    for img in images:
        image.paste(img, (left, upper))
        upper += img.size[1]

    return image

if __name__=='__main__':
    # Here's how it could be used:
    from glob import glob
    from optparse import OptionParser

    # process command-line args
    parser = OptionParser()
    parser.add_option("-o", "--output", dest="file",
                      help="write combined image to OUTPUT")

    options, filepatterns = parser.parse_args()
    outfilename = options.file

    filenames = []
    for files in map(glob, filepatterns):
        if files:
            filenames += files

    # construct image
    images = map(Image.open, filenames)    
    img = makefilmstrip(images)
    img.save(outfilename) 
```

例子：

```
$ python filmstrip.py -o output.jpg *.jpg 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T00:30:24.280

我想如果你把你的`try`部分改成这样：

```
filmstripimage.save(filmstrip_url, 'jpg', quality=90, optimize=1) 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T00:35:58.903

如果您不是在开玩笑，那么您的脚本会出现一些问题，例如`glob.glob()`返回文件名列表（字符串对象，而不是图像对象）因此`files[0].size[0]`将不起作用。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T00:46:17.650

正如 JF Sebastian 提到的，glob 不返回图像对象......而且：

就像现在一样，脚本假定文件夹中的图像大小和形状都相同。这通常不是一个安全的假设。

因此，出于这两个原因，您需要先打开图像，然后才能确定它们的大小。一旦你打开它，你应该设置宽度，并将图像缩放到那个宽度，这样就没有空白了。

此外，您没有在脚本中的任何位置设置 micro_filename。

# sql-server - SQL Server 复制的可靠性如何？

> ID：335898
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-03T00:22:57.963
> 
>         
> 
> 标签：sql-server, replication

我们在 SQL Server 2000 上有一个数据库，该数据库应不时被截断。看起来最简单的解决方案是创建一个重复的数据库并在那里复制主数据库。然后主数据库可以被特别定制的存储过程安全地截断。

一种复制方式可以保证备份数据库包含来自主数据库的所有更新。

我们计划将备份数据库用于报告，将主要数据库用于操作数据。主数据库将在 2 天内在晚上截断一次。数据库是几千兆字节。只有几个表相当大（1-2 百万行）

有哪些可能的陷阱？这样的解决方案有多可靠？它会减慢主数据库的速度吗？

**更新：**用于复制的 DTS 变体听起来不错，但也有自己的缺点。它需要相当健壮的脚本，运行大约一个小时来复制更新的行。主数据库中的完整性约束也存在问题，这将使截断它成为非平凡的任务。由于这种复制，冷的东西大大地理顺了。

使用 union VIEW 也是可能的但不是很好的变体，因为系统主要在无人值守模式下工作，因此会占用专门的支持人员。这是相关的问题，但不是技术问题。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T00:41:59.657

虽然复制通常很强大，但有时它可能会中断并需要刷新。管理和维护复制可能会变得复杂。一旦主数据库被截断，您必须确保该操作不会被复制。您可能还需要改进的行识别系统，因为在您多次截断主数据库表之后，您的辅助数据库中仍然会有完整的历史记录。

由于必须运行额外的线程来读取事务日志，因此发布者（主要）的性能受到影响。除非您此刻承受着沉重的负担，否则您可能不会注意到这种影响。事务日志管理也变得更加重要。

相反，我会为您的问题寻找不同的解决方案。例如，在截断之前，您可以对数据库进行备份，并将其还原为新的数据库名称。然后，您将拥有截断之前的数据库副本，并且您可以使用三部分名称同时查询两者。

您提到辅助数据的目的是保持报告关闭。在这种情况下，您可以创建一个类似于 SELECT * FROM Primary.dbo.Table UNION ALL SELECT * FROM SecondaryDBJune2008.dbo.Table UNION ALL SELECT * FROM SecondaryDBoctober2008.dbo.Table 的视图。然后，无论何时执行截断，您都需要使该视图保持最新。

另一种选择是在截断之前拍摄当前数据的快照并将其插入到单个报告数据库中。然后，您将拥有主数据库和历史数据库——创建视图后无需修改视图。

我们在 GB 中谈论多少数据？

由于您计划每两天执行一次截断，我推荐第二种选择，即在截断之前将数据快照到单个历史数据库中。这可以通过 SQL 代理作业轻松完成，而无需担心复制使两组数据保持同步。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-12-03T01:26:35.120

我不会为此使用复制。我们有一个相当复杂的复制设置，运行着 80 多个分支，将一些表复制到一个中央数据库。当连接中断几天时，数据管理问题就会令人毛骨悚然。

如果要存档旧数据，请使用 DTS。然后，您可以将数据的复制和截断/删除构建到同一个 DTS 包中，将其设置为仅在复制成功时才会发生删除。

# linux - ld 找不到现有的库

> ID：335928
> 
>         
> 
> 赞同：176
> 
>         
> 
> 时间：2008-12-03T00:41:50.623
> 
>         
> 
> 标签：linux, gcc, linker, shared-libraries, shared-objects

我正在尝试在此 Debian lenny 系统上将应用程序与 g++ 链接。ld 抱怨找不到指定的库。这里的具体示例是 ImageMagick，但我在其他一些库中也遇到了类似的问题。

我用以下方式调用链接器：

```
g++ -w (..lots of .o files/include directories/etc..) \
-L/usr/lib -lmagic 
```

ld抱怨：

```
/usr/bin/ld: cannot find -lmagic 
```

但是，libmagic 存在：

```
$ locate libmagic.so
/usr/lib/libmagic.so.1
/usr/lib/libmagic.so.1.0.0
$ ls -all /usr/lib/libmagic.so.1*
lrwxrwxrwx 1 root root    17 2008-12-01 03:52 /usr/lib/libmagic.so.1 -> libmagic.so.1.0.0
-rwxrwxrwx 1 root root 84664 2008-09-09 00:05 /usr/lib/libmagic.so.1.0.0
$ ldd /usr/lib/libmagic.so.1.0.0 
    linux-gate.so.1 =>  (0xb7f85000)
    libz.so.1 => /usr/lib/libz.so.1 (0xb7f51000)
    libc.so.6 => /lib/i686/cmov/libc.so.6 (0xb7df6000)
    /lib/ld-linux.so.2 (0xb7f86000)
$ sudo ldconfig -v | grep "libmagic"
    libmagic.so.1 -> libmagic.so.1.0.0 
```

我如何进一步诊断这个问题，可能出了什么问题？我在做一些完全愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：178
> 
>             
> 
> 时间：2008-12-03T01:06:18.170

问题是链接器正在寻找`libmagic.so`但你只有`libmagic.so.1`

一个快速的技巧是符号链接`libmagic.so.1`到`libmagic.so`

* * *

## 回答 #2

> 赞同：70
> 
>             
> 
> 时间：2008-12-03T01:14:07.267

正如 grepsedawk 刚刚制定的那样，答案在于`-l`选择`g++`, 调用`ld`。如果您查看此命令的手册页，您可以执行以下操作：

*   `g++ -l:libmagic.so.1 [...]`

*   或：`g++ -lmagic [...]`，如果您的库路径中有一个名为 libmagic.so 的符号链接

* * *

## 回答 #3

> 赞同：34
> 
>             
> 
> 时间：2010-10-27T05:17:10.963

* * *

## 回答 #4

> 赞同：9
> 
>             
> 
> 时间：2012-05-23T09:10:56.697

In Ubuntu, you can install `libtool` which resolves the libraries automatically.

```
$ sudo apt-get install libtool 
```

This resolved a problem with `ltdl` for me, which had been installed as `libltdl.so.7` and wasn't found as simply `-lltdl` in the make.

* * *

## 回答 #5

> 赞同：6
> 
>             
> 
> 时间：2016-05-17T20:51:24.983

As mentioned above the linker is looking for `libmagic.so`, but you only have `libmagic.so.1`.

To solve this problem just perform an update cache. 

```
ldconfig -v 
```

To verify you can run:

```
$ ldconfig -p | grep libmagic 
```

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T01:08:20.507

除非我弄错了`libmagic`或者`-lmagic`与 ImageMagick 不是同一个库。你声明你想要 ImageMagick。

ImageMagick 带有一个实用程序，可为编译器提供所有适当的选项。

前任：

```
g++ program.cpp `Magick++-config --cppflags --cxxflags --ldflags --libs` -o "prog" 
```

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2014-07-01T21:25:31.343

Installing libgl1-mesa-dev from the Ubuntu repo resolved this problem for me.

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2021-07-07T06:53:42.297

I tried all solutions mentioned above but none of them solved my issue but finally I solved it with the following command.

```
sudo apt-get install libgmp3-dev 
```

This will do the magic.

# c++ - 丢弃需要输出迭代器的函数的输出

> ID：335930
> 
>         
> 
> 赞同：22
> 
>         
> 
> 时间：2008-12-03T00:43:03.913
> 
>         
> 
> 标签：c++, stl, iterator

假设 C++ 中有一个模板函数，它做了一些有用的工作，但也通过输出迭代器输出一系列值。现在假设该值序列有时很有趣，但有时没有用。STL 中是否有现成的迭代器类可以实例化并传递给函数，并且会忽略函数试图分配给输出迭代器的任何值？换句话说，将所有数据发送到 /dev/null?

* * *

## 回答 #1

> 赞同：24
> 
>             
> 
> 时间：2008-12-03T01:15:41.430

STL 不提供这样的迭代器。但是您可以自己编写代码（测试该代码）：

```
struct null_output_iterator : 
    std::iterator< std::output_iterator_tag,
                   null_output_iterator > {
    /* no-op assignment */
    template<typename T>
    void operator=(T const&) { }

    null_output_iterator & operator++() { 
        return *this; 
    }

    null_output_iterator operator++(int) { 
        return *this;
    }

    null_output_iterator & operator*() { return *this; }
}; 
```

它不需要任何数据，因为它使用自己作为`operator*`. 的结果`*it = x;`没有用于输出迭代器要求，所以我们可以给它一个返回类型`void`.

* * *

编辑：让我们来看看它是如何`operator*`工作的。该标准在**24.1.2/1**  中说明了在这两种情况下输出迭代器的要求：

```
*it = t;
*it++ = t; 
```

不使用这些表达式的结果。这就是使这项工作有效的原因：

```
null_output_iterator it;
*it; // returns a null_output_iterator& per definition of the `operator*`.
*it = some_value; // returns void per definition of the templated `operator=`. 
```

现在我们不需要返回任何数据`operator*`：我们只使用迭代器本身。请注意，模板化的 operator= 不会覆盖内置的复制赋值运算符。它仍然提供。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T00:53:05.157

你有 Boost 可用吗？如果是这样，您可以使用[function_output_iterator](http://www.boost.org/doc/libs/1_37_0/libs/iterator/doc/function_output_iterator.html)包装一个空函数。

但这并不理想。无论您使用什么迭代器，仍然需要创建 value_type 的实例以在 operator* 中返回，即使它随后将其丢弃。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T00:56:31.577

写一篇不难。

```
template<typename T>
class NullOutputIterator
{
public:
    NullOutputIterator() {}
    NullOutputIterator& operator++() { return *this; }
    NullOutputIterator& operator++(int) { return *this; }
    T& operator*() { return m; }
    T* operator->() { return &m; }
private:
    T m;
}; 
```

我没有对此进行测试，可能缺少一些重要的东西，但我认为这就是想法。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2017-06-07T18:00:56.717

我基于[std::back_insert_iterator](http://www.open-std.org/jtc1/sc22/open/n2356/lib-iterators.html#lib.back.insert.iterator)，但没有容器：

```
#include <iterator>

template<typename T>
class NullOutputIter
    : public std::iterator<std::output_iterator_tag,void,void,void,void>
{
public:
    NullOutputIter &operator=(const T &) { return *this; }
    NullOutputIter &operator*() { return *this; }
    NullOutputIter &operator++() { return *this; }
    NullOutputIter operator++(int) { return *this; }
}; 
```

这类似于 Johannes 的答案，但没有任何模板`operator=`。我喜欢强打字；我想`*it = wrong_type_thing`成为一个编译时错误。这也`void`用于各种模板参数`std::iterator`，例如标准库中的输出迭代器。

这也类似于 Mark 的解决方案，但是 (a) 它正确地继承自`std::iterator`并且 (b) 它没有不需要的内部状态变量。

# asp.net - 使用 Base Controller 获取 Common ViewData

> ID：335932
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2008-12-03T00:45:33.767
> 
>         
> 
> 标签：asp.net, asp.net-mvc

我正在开发一个 ASP.NET MVC 应用程序，该应用程序在每个页面上都包含一个标题和菜单。菜单和标题是动态的。换句话说，菜单项和标题信息是在运行时确定的。

我最初的想法是构建一个基本控制器，所有其他控制器都从该控制器派生。在基本控制器中，我将获取菜单和标题数据并将所需的信息插入到 ViewData 中。最后，我将使用 ViewUserControl 通过母版页模板显示标题和菜单。

因此，我正在尝试确定构建此类功能的最佳实践。此外，如果这是推荐的方法，那么在获取要插入 ViewData 的数据时，我应该重写哪个方法（我猜是执行）。

我确信这是一个常见的场景，所以任何建议/最佳实践将不胜感激！提前致谢！

编辑：发布后我确实找到了以下资源（当然），但任何额外的轶事都会很棒！

[http://www.singingeels.com/Blogs/Nullable/2008/08/14/How_to_Handle_Side_Content_in_ASPNET_MVC.aspx](http://www.singingeels.com/Blogs/Nullable/2008/08/14/How_to_Handle_Side_Content_in_ASPNET_MVC.aspx)

[您如何在 asp.net mvc 中使用显示数据“孤岛”的用户控件？](https://stackoverflow.com/questions/326987/how-do-you-use-usercontrols-in-aspnet-mvc-that-display-an-island-of-data)

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-12-03T04:00:08.507

取决于你的信息来自哪里。我们有标准的视图数据，我们使用这些数据来生成我们在屏幕上以这种方式创建的一些信息。它运行良好且易于维护。  [我们重写 View 方法以实现强类型视图名称](http://oddiandeveloper.blogspot.com/2008/11/strongly-typed-view-names.html)，并使用此信息来检索母版页所需的一些数据。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2010-08-12T08:11:22.927

您可以编写一个辅助扩展来呈现标题/菜单这样，您可以在需要时将其显示在视图中的不同位置，但只在一个位置进行维护。

```
public static HtmlString MainMenu(this HtmlHelper helper) 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2010-08-17T15:03:54.163

使用基本控制器类来实现通用过滤器方法。控制器类实现了一些过滤器接口 IActionFilter、IAuthorizationFilter、IExceptionFilter 和 IResultFilter，它们对于实现所有控制器的一些常见行为很有用。

如果所有页面上的菜单数据相同，但每个唯一用户的菜单数据不同。在控制器基类的or方法中

生成菜单数据。首先将在授权时调用。将在每个操作方法之前调用。您可以访问 ViewData 上下文。在那里生成菜单数据。将菜单和标题的视图内容放入母版页并在那里访问生成的 ViewData。`OnAuthorization``Initialize``Initialize`

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2010-08-18T00:47:31.550

几个月前，我解决了一个类似的设计挑战——实现了一个随着用户从一个页面导航到另一个页面而变化的面包屑特性。

我重写了`OnActionExecuting`收集面包屑并将它们存储在其中的方法`ViewData`（我使用动作的名称作为视图的面包屑）。然后我更新了母版页以包含一个用户控件，该控件获取`ViewData`并呈现面包屑。

需要注意的一件事是，如果您使用的是默认的 ASP.NET MVC 错误处理属性，并且您的错误`[HandleError]`页面使用的是试图读取`ViewData`.`ViewData`页面，它将引发异常。根据您是否需要`ViewData`失败场景，可行的解决方案是使用单独的母版页或执行以下操作：[如何将 ViewData 传递给 HandleError 视图？](https://stackoverflow.com/questions/1794936/how-do-i-pass-viewdata-to-a-handleerror-view)

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T03:47:06.427

我会用另一个问题来回答你的问题。基本控制器是否必须确定它真正的类型才能生成正确的菜单数据？如果是这样，那么您就违背了多态性的目的，并且生成数据的代码应该放在每个控制器中，如果菜单对于所有操作都相同，则可能在 OnActionExecuting 中。将它推回父类似乎最终可能会导致父类中的一些 switch 语句完成每个派生控制器真正应该处理的事情。

# c# - 在 C# 中引发异常的最佳方法是什么？

> ID：335933
> 
>         
> 
> 赞同：54
> 
>         
> 
> 时间：2008-12-03T00:45:35.310
> 
>         
> 
> 标签：c#, exception

我通常会部署一组允许手动验证核心应用程序功能的网页。一个示例是 LoggerTest.aspx，它生成并记录测试异常。我一直选择使用类似于以下代码片段的方法引发 DivideByZeroException：

```
try
{
   int zero = 0;
   int result = 100 / zero;
}
catch (DivideByZeroException ex)
{
   LogHelper.Error("TEST EXCEPTION", ex);
} 
```

代码工作得很好，但我觉得必须有一个更优雅的解决方案。有没有在 C# 中引发异常的最佳方法？

* * *

## 回答 #1

> 赞同：78
> 
>             
> 
> 时间：2008-12-03T00:50:16.083

```
try
{
  throw new DivideByZeroException();
}
catch (DivideByZeroException ex)
{
  LogHelper.Error("TEST EXCEPTION", ex);
} 
```

* * *

## 回答 #2

> 赞同：38
> 
>             
> 
> 时间：2008-12-03T00:47:35.323

简短的回答：

```
throw new Exception("Test Exception"); 
```

你会需要

```
using System; 
```

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2008-12-03T04:09:38.660

为测试目的构建自定义异常？然后，您可以添加任何您希望异常携带的自定义属性，以通过异常处理/记录过程...

```
 [Serializable]
 public class TestException: ApplicationException
 {
     public TestException(string Message, 
                  Exception innerException): base(Message,innerException) {}
     public TestException(string Message) : base(Message) {}
     public TestException() {}

     #region Serializeable Code
     public TestException(SerializationInfo info, 
           StreamingContext context): base(info, context) { }
     #endregion Serializeable Code
 } 
```

在你的课上

```
 try
 {  
      throw new TestException();
 }
 catch( TestException eX)
 {  
    LogHelper.Error("TEST EXCEPTION", eX);
 } 
```

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T00:48:23.900

在这里抛出异常；

不是吗？

我发现的例子是

```
 if (args.Length == 0)
        {
            throw new ArgumentException("A start-up parameter is required.");
        } 
```

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T01:47:41.690

所以，让我提出一个建议，让我继续按照你原来的方式做这件事。您不想测试`DivideByZeroException`抛出 a 时会发生什么；您想测试实际发生除以零时会发生什么。  

如果您没有看到差异，请考虑：您真的确定何时要检查`NullRefernceException`以及何时检查`ArgumentNullException`？

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2016-11-24T04:20:32.503

```
 try
        {
            string a="asd";
            int s = Convert.ToInt32(a);
        }
        catch (Exception ex)
        {

            Response.Write(ex.Message);
        } 
```

它将返回异常“输入字符串的格式不正确。”

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2008-12-03T04:05:54.703

感谢您的反馈。我已将 GalacticCowboy 的答案标记为正确，因为它显然是基于问题措辞方式的正确答案。  

对于那些认为“这个问题必须有更多内容”的人，你是对的。本质上，我正在寻找一种引发/导致/模拟异常的最佳方法。正如 James Curran 所说，这是异常的发生，而不是我所追求的抛出异常。强制 DivideByZeroException 是我的默认策略，尽管我认为可能有另一种方法，甚至可能是更好的强制例外。

抛出和“引发”异常之间很可能没有区别。大多数答案似乎至少是这种观点。

再次感谢您的反馈，如果问题含糊不清，我们深表歉意。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T00:48:57.253

`throw new DivideByZeroException("some message");`?

还是我错过了什么？

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T01:21:42.850

如果你只是测试 LogHelper 的 Error 方法，为什么还要抛出异常呢？你只需要一个单行：

```
LogHelper.Error("TEST EXCEPTION", new Exception("This is a test exception")); 
```

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2018-11-09T12:11:48.870

```
public class CustomException: Exception
{
     public CustomException(string message)
        : base(message) { }

} 
```

//
`if(something == anything)
{
   throw new CustomException(" custom text message");
}`

你可以试试这个

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T01:14:19.107

出于测试目的，您可能想要创建一个特定的类（可能是 TestFailedException？）并抛出它而不是劫持另一个异常类型。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2011-11-08T16:47:36.067

做

```
System.Diagnostics.Debug.Assert(condition); 
```

给你一个替代方案？  

也许然后使用

```
catch (AssertionException) { } 
```

记录测试失败。

另请参阅[C# - Assert() 方法有什么作用？它还有用吗？](https://stackoverflow.com/questions/163538/c-sharp-what-does-the-assert-method-do-is-it-still-useful)和[http://en.csharp-online.net/Assert](http://en.csharp-online.net/Assert)。

# apache - Apache2 无法启动 - Mac OS X - 乘客

> ID：335934
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-12-03T00:46:11.037
> 
>         
> 
> 标签：apache, macos, sysadmin, passenger

不久前我已经安装了乘客，当我今晚重新启动我的 mac 时，Apache2 将无法启动。

这是我得到的。

有人有想法么？重新安装Apache2？

```
dyld: Library not loaded: /usr/lib/libaprutil-1.0.dylib
  Referenced from: /usr/sbin/httpd
  Reason: no suitable image found.  Did find:
    /usr/lib/libaprutil-1.0.dylib: mach-o, but wrong architecture
    /usr/lib/libaprutil-1.0.dylib: mach-o, but wrong architecture
    /usr/lib/libaprutil-1.0.dylib: mach-o, but wrong architecture
/usr/sbin/apachectl: line 78: 10530 Trace/BPT trap          $HTTPD $ARGV 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-12-28T19:33:27.980

看起来该模块是为错误的架构编译的。尽管看起来很简单，请尝试卸载乘客以查看这是否是问题所在，然后尝试重新安装它。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T00:49:39.250

听起来那个模块没有正确安装。尝试在您的 apache 配置中禁用它（在 /etc/apache2/ 中）

# mysql - 为 MySQL 用户提供最低权限

> ID：335951
> 
>         
> 
> 赞同：20
> 
>         
> 
> 时间：2008-12-03T00:57:12.590
> 
>         
> 
> 标签：mysql, privileges

对于 Web 应用程序，在创建将连接到 MySQL 数据库的用户时，您可以选择权限。假设该用户打算执行的唯一操作是 SELECT/INSERT/UPDATE/DELETE，只提供这些权限似乎是有意义的，但是我从未在任何地方看到过推荐 - 支持和反对的原因是什么方法？

* * *

## 回答 #1

> 赞同：24
> 
>             
> 
> 时间：2012-05-15T07:37:21.343

我不同意 Bill 的观点，Atomix 的思路更合适。除非可以另外证明，否则比尔的回答大大增加了数据库被破坏的风险。

也许对于非常有经验的开发人员来说，还有其他安全措施，但是对于其他开发人员来说，让脚本完全、不受限制地访问数据库来做任何事情是在自找麻烦，而无需这样做。

这里应该使用最小特权原则。对于 MySQL，有一个具有所有权限的超级用户，用于创建表、删除数据库等。理想情况下，此用户名和密码永远不会出现在任何 PHP 文件或 Web 服务器上的任何文件中。（我以 PHP 为例，但它适用于其他 Web 应用程序）。您只能将此用户名和密码用于 PHPMyAdmin 或 MySQL Workbench。

然后，对于 PHP 脚本，有一个具有最低要求的，例如只插入、选择、更新，甚至可能没有删除，这取决于你的 PHP 脚本。这将在 PHP 文件中，也就是说，实际上只有文档根目录之外的一个文件，正如大多数人所推荐的那样。

原因是：是的，您不需要为每个 Web 应用程序用户提供一个 MySQL 用户。但是最小特权原则（[http://en.wikipedia.org/wiki/Principle_of_least_privilege](http://en.wikipedia.org/wiki/Principle_of_least_privilege)）应该适用。如果您的 MySQL 超级用户由于您不小心将 MySQL 连接脚本命名为 .txt 而不是 .php 或有人获得了对 Web 服务器文件的访问权限而受到损害，那么至少他们能做的“最糟糕”的事情是 SELECT、UPDATE 和 INSERT。 .. 虽然这可能会导致大问题，但并不像给他们 DROP DATABASE、DROP TABLES 和更糟糕的事情那么糟糕。

此外，在我目前的项目中，由于敏捷开发实践（我不为但推荐[http://www.agilealliance.org/](http://www.agilealliance.org/)工作），一两个“非技术”团队成员直接使用 PHPMyAdmin 直接更改MySQL 数据库。这是因为不需要为简单的直接数据输入创建 CMS。在这种情况下，第三个 MySQL 用户具有合理但同样“足够”的权限适合他们。我们不想削弱权限太少的团队成员，但他们当然不应该意外删除或更改内容。

由于 MySQL 没有 ROLES（在提出原始问题时，并且根据 Bill），因此允许任何 Web 脚本仅使用一个超级用户访问 MySQL 是非常危险的。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2008-12-03T01:12:04.040

用户在普通应用程序期间可能需要其他权限，例如：

*   创建临时表

*   执行（存储过程）

*   文件（用于 SELECT INTO 和 LOAD DATA）

*   锁定表

还有一种可能性是，*最小*权限可能意味着仅对某些表执行 SELECT，而对其他表仅执行 SELECT 和 UPDATE 等。这可能会在应用程序功能增强时随时更改。还有一些奇怪的情况，比如需要对您从未查询的表具有 SELECT 特权，因为它被您更新的表中的外键引用。因此，跟踪*最低*权限是一件非常痛苦的事情。

您想通过使用 SQL 权限来限制什么？您是编写所有代码的人，因此无需细粒度地管理 SQL 权限。坦率地说，如果您的用户能够上传和运行您未经审查的 SQL 语句，那么您将面临更大的问题：

```
SELECT * FROM mytable, mytable, mytable, mytable, mytable ORDER BY 1; 
```

您想要管理的真正任务不在数据库级别，而是在应用程序业务级别。例如，CMS 具有创建页面、编辑页面、管理评论等操作。这些任务比 SQL 权限级别更高。您可以使用 SQL 角色（即权限组）来模仿它们，但 SQL 角色并未得到广泛支持。

我不知道有人将他们的应用程序用户映射到不同的 MySQL 用户。他们是您在应用程序连接到数据库*后*在应用程序中进行身份验证的用户（用户只是数据库中的数据行）。

因此，您最好让您的 Web 应用程序使用具有完全权限的单个 MySQL 用户。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T01:46:17.903

Web 应用程序通常只使用一个用户来访问数据库，而不是每个实际用户帐户的用户。应用最低权限是一种很好的做法。用户名和密码将被编码到您的脚本中（是否有人混淆了这一点？）因此，如果您的脚本管理不善，就有妥协的余地。

以我的经验，我很少让应用程序删除行 - 最好将行标记为已删除，然后审核那里的内容，而不是不知道那里有什么！这种方法还有助于保持表和索引的优化。

因此，我建议只允许 INSERT、UPDATE 和 SELECT - 如果您的应用程序的某些部分需要稍微放松一下，它很快就会变得明显！

允许更多权限只能通过发出资源密集型命令或允许恶意数据攻击来扩大 DoS 攻击的可能性。

# math - Project Euler #211 - 效率问题

> ID：335955
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2008-12-03T01:02:17.493
> 
>         
> 
> 标签：math, common-lisp

我一直在慢慢地解决 Project Euler 问题的列表，我已经找到了一个我知道如何解决的问题，但似乎我做不到（考虑到我的解决方案的编写方式）。

我正在使用 Common Lisp 来执行此操作，并且我的脚本已经运行了超过 24 小时（远超过他们的一分钟目标）。

为了简洁起见，这是我的解决方案（这是一个剧透，但前提是你有一个非常快的处理器）：

```
(defun square? (num)
  (if (integerp (sqrt num)) T))

(defun factors (num)
  (let ((l '()))
    (do ((current 1 (1+ current)))
        ((> current (/ num current)))
      (if (= 0 (mod num current))
          (if (= current (/ num current))
              (setf l (append l (list current)))
              (setf l (append l (list current (/ num current)))))))
    (sort l #'< )))

(defun o_2 (n)
  (reduce #'+ (mapcar (lambda (x) (* x x)) (factors n))))

(defun sum-divisor-squares (limit)
  (loop for i from 1 to limit when (square? (o_2 i)) summing i))

(defun euler-211 ()
 (sum-divisor-squares 64000000)) 
```

使用更小、更友好的测试参数解决问题所需的时间似乎比指数级增长……这是一个真正的问题。

花了：

*   0.007 秒解决 100

*   0.107 秒求解 1000

*   2.020 秒解决 10000

*   56.61 秒解决 100000

*   1835.385 秒求解 1000000

*   24+小时解决64000000

我真的想弄清楚脚本的哪些部分导致它需要这么长时间。我已经考虑过记忆因子函数，但我不知道如何实际实现它。

对于那些想看看问题本身的人，[在这里](http://projecteuler.net/index.php?section=problems&id=211)。

任何关于如何使这件事变得更快的想法将不胜感激。

**对不起，如果这对任何人来说是一个剧透，它并不意味着......但如果你有计算能力在相当长的时间内运行它，那么你就有更多的能力。

* * *

## 回答 #1

> 赞同：14
> 
>             
> 
> 时间：2008-12-03T02:53:46.567

这是一个解决方案，牢记 [Project] Euler 的精神。[警告：**剧透**。我试图让提示保持缓慢，以便您只能阅读部分答案并根据需要自行思考。:)]

当您遇到与数字有关的问题时，一个好的策略（正如您可能已经从解决 210 个 Project Euler 问题中知道的那样）是查看小示例，找到一个模式并证明它。[根据您对数学的态度，最后一部分可能是可选的；-)]

但是，在这个问题中，看一些小例子——对于 n=1,2,3,4,... 可能不会给你任何提示。但是在处理数论问题时还有另一种意义上的“小例子”，你现在可能也知道——素数是自然数的组成部分，所以从素数开始。

对于素数 p，它的唯一除数是 1 和 p，所以它的除数的平方和是 1+p ²。

对于素数 p ^k，它的唯一除数是 1, p, p ² , ... p ^k，所以其除数的平方和是 1+p+p ² +...+p ^k =(p ^(k+1) - 1)/(p-1)。

那是最简单的情况：你已经解决了所有数字的问题，只有一个素数。

到目前为止没有什么特别的。现在假设你有一个数 n，它有*两个*质因数，比如 n=pq。那么它的因数是1、p、q和pq，所以它的除数的平方和是1+p ² +q ² +p ² q ² =(1+p ² )(1+q ² )。

那么 n=p ^a q ^b呢？其因子的平方和是多少？

[.......................在此行下方阅读有危险...... ....]

∑ [0≤c≤a, 0≤d≤b] (p ^c q ^d ) ² = ((p ^(a+1) -1)/(p-1))((q ^(b+1) -1)/(q -1））。

这应该给你提示，答案是什么以及如何证明它：n 的除数之和只是其因式分解中每个素数幂的（答案）的乘积，所以你只需要要做的是分解 64000000 （即使在一个人的头脑中也很容易做到:-)）并乘以每个（=两者，因为唯一的素数是 2 和 5）的素数幂的答案。

这解决了 Project Euler 问题；现在从道德上拿走它。

这里更普遍的事实是关于*乘法函数*——自然数上的函数使得当 gcd(m,n)=1 时 f(mn) = f(m)f(n)，即 m 和 n 在常见的。如果你有这样一个函数，那么函数在特定数字上的值完全由它在素数上的值决定（你能证明这一点吗？）

稍微难一点的事实，你可以尝试证明[它并不*难*]，是这样的：如果你有一个乘法函数 f [这里，f(n)=n ² ] 并且你将函数 F 定义为 F(n) = ∑ [d 除以 n] f(d)，（就像问题在这里所做的那样）然后 F(n) 也是一个乘法函数。

[事实上[，非常美丽的东西](http://en.wikipedia.org/wiki/M%C3%B6bius_inversion_formula)是真实的，但现在不要看它，你可能永远不需要它。:-)]

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T01:43:48.500

我认为你的算法不是最有效的。提示：你可能从错误的角度开始。

*编辑：*我想补充一点，选择 64000000 作为上限可能是问题发布者告诉你想出更好的东西的方式。

*编辑：*一些效率提示：

*   代替

```
(setf l (append l (...)))
```

您可以使用

```
（推（...）升）
```

它会破坏性地修改您的列表，方法是使用一个新单元格，您的值为 car，前者`l`为 cdr，然后指向`l`该单元格。这比每次都必须遍历列表一次的追加要快得多。如果您需要其他顺序的列表，您可以在完成后将其反转（但此处不需要）。

*   你为什么排序`l`？

*   您可以`(> current (/ num current))`通过与 num 的平方根进行比较来提高效率（每个 num 只需计算一次）。

*   是否有可能更有效地找到数字的因数？

还有一个样式提示：您可以将范围`l`放入 do 声明中：

```
(做 ((l ()))
     (电流 1 (+电流 1)))
    ((> 当前 (/当前数))
     l)
  ...)

```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-12-03T02:52:59.843

我会通过对数字进行素数分解来解决这个问题（例如：300 = 2^2 * 3^1 * 5^2），这相对较快，特别是如果你通过筛子生成它。由此，通过迭代 i=0..2 来生成因子是相对简单的；j=0..1；k=0..2，做 2^i * 3^j * 5^k。

```
5 3 2
-----
0 0 0 = 1
0 0 1 = 2
0 0 2 = 4
0 1 0 = 3
0 1 1 = 6
0 1 2 = 12
1 0 0 = 5
1 0 1 = 10
1 0 2 = 20
1 1 0 = 15
1 1 1 = 30
1 1 2 = 60
2 0 0 = 25
2 0 1 = 50
2 0 2 = 100
2 1 0 = 75
2 1 1 = 150
2 1 2 = 300

```

这可能不够快

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T01:48:32.697

您缺少的巧妙技巧是您根本不需要考虑数字 1..N 中有多少数字是 1 的倍数？N 1..N 中有多少个数是 2 的倍数？N/2

诀窍是将列表中的每个数字的因子相加。对于 1，将 1^2 添加到列表中的每个数字。对于 2，每隔一个数字加上 2^2。对于 3，每第三个数字加 3^2。

根本不检查可分性。最后，您必须检查总和是否是完美平方，仅此而已。在 C++ 中，这对我来说只需要 58 秒。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T01:16:34.127

抱歉，我不太了解 LISP，无法阅读您的答案。但我的第一印象是暴力破解的时间成本应该是：

开括号

sqrt(k) 找到 k 的除数（通过试除法），将每个除数平方（每个因子的恒定时间），并将它们相加（每个因子的恒定时间）。这是 σ [2] (k)，我称之为 x。

加

不确定一个好的整数平方根算法的复杂性是多少，但肯定不比 sqrt(x) （哑试乘法）差。x 可能比 k 大-O，所以我在这里保留判断，但是 x 显然在 k^3 之上，因为 k 最多有 k 个除数，每个除数本身不大于 k，因此它的平方不大于 k ^2。自从我获得数学学位以来已经很长时间了，我不知道 Newton-Raphson 收敛的速度有多快，但我怀疑它比 sqrt(x) 更快，如果所有其他方法都失败了，那么二进制斩波就是 log(x)。

右括号

乘以 n（因为 k 的范围为 1 .. n）。

因此，如果您的算法比 O(n * sqrt(n^3)) = O(n ^ (5/2)) 差，在哑平方的情况下，或者 O(n * (sqrt(n) + log( n^3)) = O(n ^ 3/2) 在 smart-sqrt 的情况下，我认为在算法中应该可以识别出问题。此时我被卡住了，因为我无法调试你的 LISP .

哦，我假设算术对于正在使用的数字是恒定时间的。它应该适用于小到 6400 万的数字，并且它的立方几乎适合 64 位无符号整数。但是，即使您的 LISP 实现使算术比 O(1) 差，它也不应该比 O(log n) 差，因此它不会对复杂性产生太大影响。当然不会使它成为超多项式。

这是有人过来告诉我我错了。

哎呀，我只是看了你的实际时间数字。它们并不比指数差。忽略第一个和最后一个值（因为小时间不能准确测量并且您还没有分别完成），将 n 乘以 10 将时间乘以不超过 30-ish。30 大约是 10^1.5，这对于如上所述的蛮力来说是正确的。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T01:35:22.777

我认为你可以用像初筛这样的东西来解决这个问题。不过这只是我的第一印象。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T05:50:57.567

我用这里的评论中的一些注释重新设计了程序。'factors' 函数现在效率稍微高了一点，我还必须修改 σ_(2)(n) 函数以接受新的输出。

“因素”的输出如下：

```
$ (factors 10) => (1 2 5 10) 
```

有一个喜欢

```
$ (factors 10) => ((2 5) (1 10)) 
```

修改后的函数如下所示：

```
(defun o_2 (n)
"sum of squares of divisors"
  (reduce #'+ (mapcar (lambda (x) (* x x)) (reduce #'append (factors n))))) 
```

在我进行了适度的重写之后，我在计算 100,000 时只节省了大约 7 秒。

看起来我将不得不离开我的屁股并写一个更直接的方法。

# sql-server-2008 - 如何在 VSTS DB Edition Deploy 中自定义 CREATE DATABASE 语句？

> ID：335963
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2008-12-03T01:10:53.543
> 
>         
> 
> 标签：sql-server-2008, visual-studio-2008, deployment, database-project

我正在使用 VSTS 数据库版 GDR 版本 9.1.31024.02

我有一个项目，当客户被添加到系统中时，我们将在运行中创建具有相同架构的多个数据库。每个客户一个数据库。我想我应该能够使用部署脚本来做到这一点。不幸的是，我总是得到 CREATE DATABASE 语句中指定的完整文件名。例如：

```
CREATE DATABASE [$(DatabaseName)]
ON 
PRIMARY(NAME = [targetDBName], FILENAME = N'$(DefaultDataPath)targetDBName.mdf')
LOG ON (NAME = [targetDBName_log], FILENAME = N'$(DefaultDataPath)targetDBName_log.ldf')
GO 
```

我期待更多这样的事情

```
CREATE DATABASE [$(DatabaseName)]
ON 
PRIMARY(NAME = [targetDBName], FILENAME = N'$(DefaultDataPath)$(DatabaseName).mdf')
LOG ON (NAME = [targetDBName_log], FILENAME = N'$(DefaultDataPath)$(DatabaseName)_log.ldf')
GO 
```

甚至

```
CREATE DATABASE [$(DatabaseName)] 
```

我不会在持续的基础上运行它，所以我想让它尽可能简单，以供下一个人使用。项目属性中有很多部署选项，但我无法让它按照我想要的方式工作。

有人知道如何设置吗？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-11-06T21:48:20.857

迟到总比没有好，我知道如何`$(DefaultDataPath)$(DatabaseName)`从您的第二个示例中获取文件名。  

您在第一个代码片段中显示的 SQL 表明您没有用于在 VSTS:DB 项目中创建数据库文件的脚本，可能是故意将它们从您所做的任何模式比较中排除。我发现它有点违反直觉，但解决方案是让 VSTS:DB 在您的开发环境中编写 MDF 和 LDF 脚本，然后编辑这些脚本以使用 SQLCMD 变量。  

在您的数据库项目中，转到文件夹*Schema Objects > Database Level Objects > Storage > Files*。在那里，添加这两个文件：

**数据库.sqlfile.sql**

```
ALTER DATABASE [$(DatabaseName)]
ADD FILE (NAME = [$(DatabaseName)], 
    FILENAME = '$(DefaultDataPath)$(DatabaseName).mdf',
    SIZE = 2304 KB, MAXSIZE = UNLIMITED, FILEGROWTH = 1024 KB) 
    TO FILEGROUP [PRIMARY]; 
```

**Database_log.sqlfile.sql**

```
ALTER DATABASE [$(DatabaseName)]
    ADD LOG FILE (NAME = [$(DatabaseName)_log], 
    FILENAME = '$(DefaultDataPath)$(DatabaseName)_log.ldf', 
    SIZE = 1024 KB, MAXSIZE = 2097152 MB, FILEGROWTH = 10 %); 
```

VSTS:DB 或 VSDBCMD.exe 生成的完整数据库创建脚本现在将使用 SQLCMD 变量来命名 MDF 和 LDF 文件，允许您在命令行或 MSBuild 中指定它们。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-21T02:54:37.770

我们使用模板数据库执行此操作，当新客户上线时，我们会对其进行备份、复制和恢复。我们不使用脚本创建任何模式，而是使用实时的空数据库。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-12-08T23:39:33.833

嗯，看来到目前为止最好的答案（鉴于压倒性的反应）是事后编辑文件......仍在寻找

# ios - 如何从我的应用程序启动我的设置包？

> ID：335965
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2008-12-03T01:12:15.507
> 
>         
> 
> 标签：ios, iphone, cocoa-touch

我正在为我的应用程序添加一个设置包，作为一种获得我偏好的 GUI 的廉价方式。是否可以从我的应用程序中的按钮启动它，或者我的用户是否总是必须通过内置的设置应用程序手动访问它？

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2008-12-03T04:02:58.783

他们可能必须转到设置应用程序，具体取决于您的操作方式。

请参阅[本文档](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/chapter_1_section_1.html)的“应用程序首选项”部分。以下是介绍中的相关部分：

> 将您的应用程序首选项添加到设置应用程序最适合生产力风格的应用程序以及您的首选项值通常配置一次然后很少更改的情况。例如，邮件应用程序使用这些首选项来存储用户的帐户信息和邮件检查设置。因为设置应用程序支持分层显示首选项，所以当您有大量首选项时，从设置应用程序中操作您的首选项也更合适。在您的应用程序中提供相同的首选项集可能需要太多屏幕，并可能导致用户混淆。
> 
> 当您的应用程序只有几个选项或用户可能希望定期更改选项时，您应该仔细考虑设置应用程序是否适合他们。例如，实用程序应用程序在其主视图的背面提供自定义配置选项。视图上的一个特殊控件将其翻转以显示选项，另一个控件将视图翻转回来。对于简单的应用程序，这种类型的行为提供了对应用程序选项的即时访问，并且比转到设置更方便用户。

**更新**

链接已过期。这是关于设置捆绑包[的类似文档。](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2012-03-20T05:57:50.760

对于 iOS5，您可以直接打开设置：

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]];

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-01-15T11:34:38.653

回答了我自己的问题：您确实可以使用 NSUserDefaults 来保存您自己的应用程序首选项，而无需与系统设置集成。

例如，我的应用程序是一个实用程序应用程序，它有一个小的 UI，用于 FlipSide 上的几个设置（用户按下“i”按钮时的视图）。

请注意，我从两个来源找到了此信息。

1.  在 iPhone BootCamp 的一系列精彩报告中，Scott Leberknight 顺便提到，他被告知应用程序用户默认设置可能会或可能不会集成到设置应用程序中。

2.  来自 iphone 官方开发者页面的 BubbleLevel 示例代码使用首选项来存储级别的校准（在反面视图上设置）

以下是 LevelAppDelegate.m 中的方法，它们在应用程序启动时加载首选项，并在应用程序终止时保存它：

```
// Invoked after the application has been launched and initialized but before it has received its first event.
- (void)applicationDidFinishLaunching:(UIApplication *)application {
    // Set up the level view controller
    levelViewController = [[LevelViewController alloc] init];
    [window addSubview:levelViewController.view];

    // Restore calibration for device
    float restoredOffset = [[NSUserDefaults standardUserDefaults] floatForKey:BubbleLevelCalibrationOffsetKey];
    levelViewController.calibrationOffset = restoredOffset;
}

// Invoked immediately before the application terminates.
- (void)applicationWillTerminate:(UIApplication *)application {
    float calibrationOffset = levelViewController.calibrationOffset;
    NSNumber *offset = [NSNumber numberWithFloat:calibrationOffset];
    [[NSUserDefaults standardUserDefaults] setObject:offset forKey:BubbleLevelCalibrationOffsetKey];
} 
```

但是，我想对原始问题的正确答案是：

1.  不 - 你不能从你自己的应用程序启动设置 UI（我还没有看到任何方法来做到这一点 - 我猜可能是错的 - 但我很确定即使你可以从你的应用程序启动设置，比如说URL 可用于启动 Safari 的方式 - 您将无法从“设置”应用程序*返回*到您的应用程序，这会破坏目的）。

2.  对于首选项级别的持久性（相对于应用程序数据持久保存在文档、数据库或缓存中），您有 2 个选择 i）使用系统设置应用程序进行编辑 ii）在您的应用程序中创建自己的控件

在任何一种情况下，您都可以使用 NSUserDefaults 来实现实际的持久性。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2011-04-19T10:40:13.563

我不知道从您的应用程序启动 Settings.app 的任何方法。但是，为什么不将设置直接集成到您的应用程序中呢？您可以使用[InAppSettingsKit](http://www.inappsettingskit.com/)非常轻松地做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T17:36:14.337

不，你不能——他们必须退出你的应用程序并启动设置。这是一种痛苦，如上所述，这是您必须做出的设计决定。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-10-01T07:01:54.280

我刚刚看到 Aka-aki 应用程序将我直接带到设置应用程序的推送通知屏幕。我第一次启动它时它就这样做了。所以应该是可以的。:)

# wpf - 有没有办法在 WPF 中对控件进行逻辑分组

> ID：335966
> 
>         
> 
> 赞同：14
> 
>         
> 
> 时间：2008-12-03T01:12:36.113
> 
>         
> 
> 标签：wpf

这是场景

我有一个带有一些 TextBlock 控件的网格，每个控件都位于网格中的一个单独的单元格中。从逻辑上讲，我希望能够将它们的可见性设置为绑定到我的 ViewModel 中的一个属性。但由于它们都位于网格中的单独单元格中，因此我必须设置每个 TextBlock 的 Visibility 属性。

有没有办法让我可以在其上设置其子项的公共属性的非可视组？还是我在做梦？

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2008-12-03T05:04:44.367

没有非视觉组可以使这成为可能。

直接或以所有 TextBlock 共享的通用样式设置 Visibility 属性可能是最简单的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-03-22T22:18:44.953

另一种选择是将项目组中每个项目的可见性属性绑定到一个项目，这样在你后面的代码中只需要设置一个项目的可见性。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-12-03T01:34:36.867

我希望您已经在 DataTemplate 中定义了所有单元格 UI 元素。您可以在 ViewModel 级别做一个小技巧来实现您正在寻找的东西。

1.  在 ViewModel 上有 Singleton 类，它应该具有要绑定到每个 TextBlock 的 Visibility 或等效属性。

2.  Singleton 类应实现 INotifypropertyChanged 以将更改通知发送到 UI

3.  在 XAML 中绑定 Singleton 属性，并从应用程序中的任何位置控制此属性。

    < TextBlock Visibility="{Binding Source={x:Static local:Singleton.Instance},Path=Visibility}"

一个简单的 Singleton 类可以实现为

```
public class Singleton :INotifyPropertyChanged
{
    private Singleton() { }
    public static Singleton Instance
    {
        get
        {
            if (instance == null){ instance = new Singleton(); }
            return instance;
        }
    }
    private Visibility _visibility;
    public Visibility Visibility
    {
        get { return _visibility; }
        set 
        { 
            _visibility = value; 
            PropertyChanged( this, new PropertyChangedEventArgs("Visibility") );
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;
    private static Singleton instance;
 } 
```

现在您可以从后面的代码中的任何位置控制 Singleton.Instance.Visibility = Visibility.Collapsed

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2013-01-26T17:19:40.707

可以创建一个自定义控件，将其所有添加/删除子方法重定向到其自己的父级，同时仍保留其内容的记录，以便它可以应用自己的属性样式。不过会很棘手。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2013-04-16T07:46:59.527

如果可能的话，我主要将它们放在 GroupBox 中并将 groupbox BorderThickness 设置为 0。这样所有控件都被分组，您不会看到它是一个 groupbox，您可以使用一个属性设置可见性..

```
 <Style TargetType="{x:Type GroupBox}"
     x:Key="HiddenGroupBox">
<Setter Property="BorderThickness"
        Value="0" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2022-01-17T11:06:33.447

我意识到这是一个非常古老的问题，但毫无疑问，人们会在搜索相关内容后找到这个线程。因此，我提供以下非常简单的解决方案：

将所有有问题的控件放入现有网格内的新网格中；跨越适当的单元格并在其自己的结构中复制它们。然后您可以更改新网格的可见性，并使用它来更改内部控件。

# .net - 正则表达式将字符串拆分为项目

> ID：335970
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-03T01:14:56.390
> 
>         
> 
> 标签：.net, regex, split

我的文本格式为

```
[1/12/2008 2:32:11 p.m. - name]
line 1
[1/12/2008 2:36:00 p.m. - name] - PRIVATE
line 2 [some text] sd
[1/12/2008 2:36:00 p.m. - name]
line 3 
```

我想将其拆分为项目，以便我可以访问每个项目的时间、名称和文本，

```
e.g.:
(item 1)
  1: 1/12/2008 2:32:11 p.m.
  2: name
  3: line 1
(item 2)
  1: 1/12/2008 2:36:00 p.m.
  2: name
  3:  - PRIVATE
    line 2 [some text] sd
(item 3)
  1: 1/12/2008 2:36:00 p.m.
  2: name
  3: line 3 
```

我试图想出一个单一的正则表达式模式来实现这一点，但没有运气：

```
\[([0-9\/ \:\.apm]+?) - ([a-z_\-0-9]+?)\](.*?\r\n.+?)(?:\[[0-9\/ \:\.apm]+? - [a-z_\-0-9]+?\]) 
```

上面的这个模式只返回第一项。

```
\[([0-9\/ \:\.apm]+?) - ([a-z_\-0-9]+?)\](.*?\r\n.+?)(?!\[[0-9\/ \:\.apm]+? - [a-z_\-0-9]+?\]) 
```

上面的模式返回所有项目，但只返回文本的第一个字符（第 3 组）

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T01:37:31.417

看起来这可以让你得到你想要的。

```
\[([0-9\/ \:\.apm]+?) - ([a-z_\-0-9]+?)\](.*?\r\n.+.*?) 
```

我在[我的 RegEx 测试仪](http://iowacomputergurus.com/free-products/regular-expression-tester.aspx)上对其进行了测试，它似乎得到了正确的格式。

# language-agnostic - Switch（Case）总是错的吗？

> ID：335971
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2008-12-03T01:15:34.953
> 
>         
> 
> 标签：language-agnostic, design-patterns, switch-statement

在某些情况下 switch(case) 是一个很好的设计选择（除了简单性）而不是策略或类似模式......

* * *

## 回答 #1

> 赞同：28
> 
>             
> 
> 时间：2008-12-03T02:07:12.540

*在测试基元值*时使用开关。（即整数或字符）。

*在不同类型*之间进行选择时使用多态性。

示例：测试用户输入的字符是否为“a”、“b”或“c”之一是开关的工作。

测试您正在处理的对象是 Dog 还是 Cat 是多态调度的工作。

在许多语言中，如果您有更复杂的值，您可能无论如何都无法使用 Switch。

* * *

## 回答 #2

> 赞同：18
> 
>             
> 
> 时间：2008-12-03T01:31:07.933

首先，简单通常是一个很好的设计选择。

我从来不理解这种对开关/案例的偏见。是的，它可以被滥用，但是，几乎所有其他编程结构也可以。  

切换类型通常是错误的，可能应该由多态性代替。打开其他东西通常没问题。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2008-12-03T01:18:21.220

一方面，可读性。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2008-12-03T01:30:55.703

当然是。很多时候，您的开关只与您的整体逻辑的一小部分相关，并且仅仅为了这个微小的影响而创建全新的类是错误的。

例如，假设您有一个单词数据库，用户输入了另一个单词，并且您想在数据库中找到该单词，但包括可能的复数形式。你可能会写类似 (C++)

```
 vector<string> possible_forms;
possible_forms.push_back(word);
char last_letter = word[word.size() - 1];
switch (last_letter) {
  case 's':
  case 'i':
  case 'z':
    possible_forms.push_back(word + "es");
    break;
  case 'y':
    possible_forms.push_back(word.substr(0, word.size() - 1) + "ies");
    break;
  default:
    possible_forms.push_back(word + "s");
} 
```

用策略来做这件事是矫枉过正的。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T01:23:21.147

通常没问题，只要你在*一个*地方只有*一个*开关。当您拥有多个（或多个）时，是时候考虑替代方案了。

 ** * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T01:27:14.680

可以使用开关创建“策略”。

这可能是起点，然后让多态性完成这项工作。

想到的其他需要以灵活性为代价的额外速度。有案例。

* * *

## 回答 #7

> 赞同：-1
> 
>             
> 
> 时间：2008-12-03T01:48:54.590

**不**，switch 语句可能只是简单情况下的一个不错的设计选择。  

一旦你通过了一个简单的情况 switch 语句，保持更新和维护就变得非常痛苦。这是设计模式出现的部分原因。

* * *

## 回答 #8

> 赞同：-4
> 
>             
> 
> 时间：2009-11-24T09:03:46.627

我的观点是 switch 总是错误的：

案例的主体是代码并且*是*行为，因此，案例中的事物（“值”）具有行为类型，因此，多态性将是更好的选择。

这意味着值实际上是类型，例如数字 1 是在某种程度上等于 1 的所有事物的类型。剩下的就是我们将 1-ness 映射到我们特定情况的行为，并且我们对所有其他类型都有多态性（一件好事）。

这在某些语言中比其他语言更容易完成，不幸的是，大多数常用语言都非常糟糕，因此阻力最小的路径是错误的，人们最终会编写 switch 或 if 语句（同样的事情）。

# objective-c - 方法：多个参数或结构？

> ID：335974
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-03T01:16:30.537
> 
>         
> 
> 标签：objective-c

通过查看 Apple 的示例代码，我注意到他们倾向于设计接收结构而不是多个参数的方法。这是为什么？就易用性而言，我个人更喜欢后者，但就性能而言，还有比其他更好的选择吗？

```
[pencil drawPoint:Point3Make(20,40,60)]
[pencil drawPointAtX:20 Y:50 Z:60] 
```

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2008-12-03T01:44:37.360

不要将这个问题与性能问题混为一谈。不要进行过早的优化（直到您知道自己有问题），并且在考虑代码中的性能热点时，它几乎总是在处理 I/O 的区域（例如，数据库、文件）。因此，请将您关于消息传递风格的问题与性能分开。您希望首先**做出最佳设计决策，然后***仅在需要*时优化性能。

话虽如此，Apple 不推荐或不喜欢传递多个参数而不是结构/对象。在 Objective-C 范围之外对此进行概括，在特定场景中有意义时使用个人参数或对象。换句话说，没有你可以遵循的非黑即白的答案。相反，在决定时使用以下准则：

*   当方法理解对象的许多/所有成员有意义时传递对象/结构

*   当您想要验证有关对象各个成员之间关系的某些规则时，传递对象/结构。这允许您确保您的方法的使用者在调用您的方法之前构造一个有效的对象（从而消除该方法验证这些条件的需要）。

*   当明确该方法有意义并且只需要某些元素而不是整个对象时，传递单个参数

使用您的示例的变体，采用两个坐标（X 和 Y）的绘制方法将受益于采用 Point 对象而不是两个变量 X 和 Y。

最好通过采用单个 id 和 name 参数而不是某些容器对象来设计方法 retrieveOrderByIdAndName。

现在，如果有一些方法可以通过许多不同的标准来检索订单，那么创建一个 retrieveOrderByCriteria 并传递一些标准结构会产生更多的发送。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-12-03T01:21:53.833

如果您要传递相同的参数集，那么将它们传递到一个结构中很有用，因为它们在语义上属于一起。

对于 3 点这样简单的结构，性能损失可能可以忽略不计。如果您认为它很慢，请使用可读/可重用的解决方案，然后分析您的代码:)

# svn - 是什么导致 svn commit 失败并报告文件/目录被阻塞？

> ID：335980
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2008-12-03T01:19:37.397
> 
>         
> 
> 标签：svn, tortoisesvn

我几乎是唯一一个签入 svn 存储库的人，但由于某种原因，在过去一周 Tortoise 报告说我的 WCF 服务参考目录被“阻塞”，我无法提交我的更改。如果我什至没有对该目录的内容进行任何更改，为什么 svn 报告受阻，这甚至意味着什么？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2008-12-03T01:33:22.407

您可能已经直接从文件系统中删除/移动了一些文件/目录，而不是通过 SVN 命令。如果目录无法计算出与存储库的差异，这有时会导致目录受阻。

尝试先执行清理，如果失败，恢复该目录并尝试使用 SVN 命令更改目录文件结构（删除/移动）。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2008-12-04T05:10:22.500

如果 .svn 子目录丢失，则该目录被标记为阻塞，因为 SVN 无法再知道该目录的状态。很可能清理或恢复无法修复它，因为本地 svn 数据已经消失，所以你有两个选择：

1.  rm 目录并更新以获取最新的工作副本

2.  如果目录包含有价值的更改内容，请检查临时目录中的最新工作副本并手动将丢失的 .svn 目录复制到位，然后 SVN 再次能够理解它。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-12-29T18:32:26.067

作为上述答案的补充，我认为重命名当前损坏的目录，查看正确文件夹中的最新副本并复制更改的文件会更方便。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2011-04-28T13:30:04.780

我会做同样的事情 - 删除两个目录并将它们替换为没有 .svn 目录的新目录。

我将新目录拖到我的桌面上，提交更改以使它们显示为丢失，然后将它们拖回来并再次提交。

# svn - SVN 存储库如何损坏？

> ID：335987
> 
>         
> 
> 赞同：15
> 
>         
> 
> 时间：2008-12-03T01:23:28.777
> 
>         
> 
> 标签：svn, repository, corruption

有几次，我遇到了我的一个 SVN 存储库损坏的情况，我们可以在不知道我们做了什么的情况下对项目的某些版本或分支做任何事情。所以我在问什么会导致存储库损坏？

* * *

似乎客户端之间的不兼容可能会导致问题，尤其是字符集。

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2008-12-03T18:31:06.877

基本上有三种不同的情况：

1.  硬件故障（内存、fs 损坏等）

2.  对服务器具有登录访问权限的用户可能会损坏存储库文件。

3.  颠覆中的错误。

有故障的硬件通常是最难发现的，除非是最明显的情况。案例 2 可以通过限制对服务器的登录访问来预防。**其他一切都是**Subversion 中的错误。（这包括客户端和服务器之间的兼容性问题。）您**永远**不能仅通过使用 Subversion 客户端来破坏存储库（即使客户端存在错误，IMO 也不行）。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2008-12-03T01:31:09.620

潜在的文件系统损坏或有人乱搞内部 svn 目录？

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2008-12-03T10:43:23.250

硬件故障的可能性总是存在的。内存中的位错误之类的事情可能会导致无声损坏，而不是简单地使计算机崩溃；如果 svn 服务器进程受到影响，则存储库可能会损坏。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2010-11-16T15:33:09.283

如果存储库不在 svn 服务器本地磁盘上，而是在 NFS 上，如果它们使用 berkley db 格式，它们可能会损坏。在 svn 1.5 中，FSFS 成为新存储库的默认设置 - 生活在非锁定文件系统（如 NFS）上非常快乐。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T01:39:19.320

我已经发生过几次了。如果客户端离开而服务器需要很长时间来做某些事情，SVN 似乎不能很好地应对。我不知道确切的细节，但我已经`kill -9`对我认为是只读的进程做了一些 s 并且最终不得不`svnadmin cleanup`在服务器再次响应之前运行一个。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-12-03T03:15:14.540

这在基于 repo 的情况下很常见`file://`，但是如果您有单个用户/服务访问 repo，则不会发生这种情况。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2010-09-01T18:44:30.520

我有一个回购腐败，我花了一段时间才弄清楚。在服务器上，我不小心将 repo 中 .svn 目录的所有者更改为某个不相关的用户。在那之后，SVN 给了我损坏错误，直到我删除并重新创建了 repo。即使在我更正之后。
*捶着额头*

# c# - C# 中的 NamedPipe 超时

> ID：335989
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-03T01:25:14.483
> 
>         
> 
> 标签：c#, named-pipes

我有几个应用程序相互通信，我使用 NamedPipe。但是，如果其他应用程序不可用，则 NamedPipe 将一直等待连接。它也不支持超时。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2008-12-03T01:28:28.580

您是否使用[NamedPipeClientStream](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeclientstream.aspx)类？如果是这样，则[Connect](http://msdn.microsoft.com/en-us/library/bb355337.aspx)过载，它采用超时值。这将允许您指定在放弃之前等待多长时间。**********` 
```*************