# StackOverflow 问答 11817000-11817999

# cordova - 在phonegap中设置背景图像

> ID：11817005
> 
> 赞同：0
> 
> 时间：2012-08-05T13:55:15.410
> 
> 标签：cordova

```
#bgImage{
background-image:url("/MedicineAlert/res/drawable-hdpi/bgimage.png");
background-size: 100% 100%;
background-repeat:no-repeat;
background-position:100% 100%;
top: 0px;
left: 0px;
}

.formButton{

    font-family: Verdana, Geneva, sans-serif;
    font-size: 24px;
    color: #FFF;
    padding: 5px 10px 5px 10px;
    border: solid 1px #CCC;

    background: #ba4742;
    text-shadow: 0px 1px 0px #000;

    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;

    box-shadow: 0 1px 3px #111;
    -moz-box-shadow: 3px 3px 1px #999;
    -webkit-box-shadow: 3px 3px 1px #999;

    cursor: pointer;

}
.formButton:hover {
    background: #a33f3a;
}

    <!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=320; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Alert Time</title>
      <link rel="stylesheet" href="register.css" type="text/css" media="screen" title="no title">
      <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
      <script type="text/javascript" charset="utf-8" src="register.js"></script>
  </head>
  <body id="bgImage">
    <hearder>
        <h1>Please fill out the form and submit</h1>
    </header>
    <div>
        <form action="" method="post">
             <header>
                <h1>
                    Your information Please!
                </h1>
             </header>
             <div>

        <form id="form_info" action="" method="post">       
                 Fist Name &nbsp;&nbsp;<input type="text" name="fname" required="required" /><br />
                 Middle Name &nbsp;&nbsp;<input type="text" name="mname" /><br />
                 Last name &nbsp;&nbsp;<input type="text" name="lname" required="required" /><br />
                 Date of birth &nbsp;&nbsp;<input type="text" name="dOfBirth" required="required"/><br />
                 Social security Number &nbsp;&nbsp;<input type="text" name="sNumber" /><br /> 
                 Gender &nbsp;&nbsp;<label for="male">Male</label>
                 <input type="radio" name="sex" id="male" />
                 <label for="female">Female</label>
                 <input type="radio" name="sex" id="female" />
                </div><br />
                <input type="submit" name="submitButton" value="Submit" class="formButton" />
        </form>
    </div>  
  </body>
 </html> 
```

我很难访问我的 drawable-hdpi 文件夹中的图像。首先，我在 assets 文件夹中创建了一个名为 image 的文件夹，然后我尝试使用 css 引用 assets 目录中 image 文件夹中的图像，但它不起作用。我决定将可绘制对象用于我的资源，但我仍然遇到同样的问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:30:03.453

部署应用程序时内部使用的路径与您在项目结构中看到的不同。尝试

```
background-image:url("file:///android_res/drawable/bgimage.png"); 
```

对于资产/图像，使用

```
background-image:url("file:///android_asset/image/bgimage.png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:26:09.873

将图像放回 assets/www 文件夹中，可能位于名为 images 的文件夹中，然后按如下方式访问它：

背景图像：url（“图像/bgimage.png”）；

这应该有效。

你能不能你的内联 CSS 应该在 html 文档的 head 元素中并由

```
 <style></style> 
```

# python - 如何在 z3 python API 中使用 Implies 和 if 布尔命令

> ID：11817007
> 
> 赞同：2
> 
> 时间：2012-08-05T13:55:24.007
> 
> 标签：python, python-2.7, z3

如何`if-then-else`使用 Z3 python API 作为一阶公式结合的一部分来实现？例如

```
s.add( F, H, (if then else)). 
```

一个相关的问题是：如何为此目的使用 Z3 python 在线指南中给出的布尔“暗示”或“如果”命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:37:42.837

`if(A, B, C)`使用 Z3 Python API 编码的表达式`If(A, B, C)`。这是一个例子：

```
F, H, A, B, C = Bools('F H A B C')
s = Solver()
s.add(F, H, If(A, B, C))
print s 
```

这是另一个使用“暗示”的例子

```
F, H, A, B, C = Bools('F H A B C')
s = Solver()
s.add(F, H, Implies(A, B))
print s 
```

上述示例的链接是：[http](http://rise4fun.com/Z3Py/4BF) : //rise4fun.com/Z3Py/4BF，http: [//rise4fun.com/Z3Py/JEU](http://rise4fun.com/Z3Py/JEU)

# python - 如何在mysql中使用带有数据对象的python类

> ID：11817009
> 
> 赞同：3
> 
> 时间：2012-08-05T13:55:42.850
> 
> 标签：python, django

我开始学习 Python 和 Django。我想知道如果我有一个简单的“玩家”类，它有一些属性，比如：名称、点数、库存，如果它们被更改，我将如何让该类也将值写入数据库。我的想法是我创建 Django 数据模型，然后`.save`在我的类中调用该方法。它是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T13:57:20.107

您调用该`save()`方法将模型保存到数据库是正确的，但是`save`如果您不想，则不必在模型类中定义该方法。阅读解释所有内容的 django 教程将非常有帮助。

[https://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

[https://docs.djangoproject.com/en/dev/topics/db/models/](https://docs.djangoproject.com/en/dev/topics/db/models/) 解释 django 模型

django 使用自己的 ORM（对象关系映射）

这听起来就像将您的 django/python 对象（模型）映射到您的后端。

它提供了一个时尚、直观、pythonic、非常易于使用的界面，用于创建模型（rdbms 中的表）添加数据和检索数据。

首先你要定义你的模型

```
class Player(models.Model):
  points = models.IntegerField()
  name = models.CharField(max_length=255) 
```

django 提供了将这个 python 对象转换为表的命令。

`python manage.py syncdb`

您还可以`python manage.py sql <appname>`用来显示 django 生成的实际 sql 以将此对象转换为表。

一旦你有了这个对象的存储空间，你就可以像创建 python 对象一样创建新的对象

```
new_player = Player(points=100, name='me')
new_player.save() 
```

调用`save()`实际上将对象写入您的后端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T13:58:29.640

你很准...

[从https://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)开始

确保你有 MySQL 的 python 绑定并通过它来工作......然后如果你有特定的问题，再问......

# backbone.js - 直接从模型中覆盖 fetch() 和 save() 是一种好习惯吗？

> ID：11817015
> 
> 赞同：5
> 
> 时间：2012-08-05T13:56:30.090
> 
> 标签：backbone.js

我不想覆盖`Backbone.sync()`，因为我的一些模型实际上会使用标准`sync()`.

直接从模型`fetch()`中覆盖是一种好习惯吗？`save()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T15:27:43.847

不需要`sync`全局覆盖。您可以按模型/集合执行此操作，即

```
var MyModel = Backbone.Model.extend({
    sync: customSync,
    ...
}); 
```

这避免了全局覆盖 Backbone.sync。

现在，如果您不需要实现完全同步，例如您只需要覆盖`fetch`，您当然也可以在每个模型的基础上这样做。

大概您已经看到 Backbone.sync 被 localStorage 版本覆盖。这确实没有必要（我认为这是不好的做法）。`sync`只定义自定义函数并让模型/集合使用它就足够了。

# android - 从资源文件夹中检索图像

> ID：11817016
> 
> 赞同：0
> 
> 时间：2012-08-05T13:56:31.357
> 
> 标签：android, image, resources, drawable, android-resources

我有一个 SQL 数据库，我将使用我需要在列表中显示图标的数据库获取名称字符串。为此，我遵循了两种方法，一种是：

```
int id= context.getResources().getIdentifier(path + i.getIcon(),null, null); 
```

我发现这种方法效率不高，所以我采用了其他一些技术，即

```
try {
            Class res = R.drawable.class;
            Field field = res.getField(i.getIcon());
            drawableId = field.getInt(null);
            holder.ContactImage.setImageResource(drawableId);
        }
        catch (Exception e) {
            Log.e("MyTag", "Failure to get drawable id.", e);
            holder.ContactImage.setImageResource(R.drawable.ic_all_contacts_green);
        } 
```

这里的问题是，有时我从 DB 获得的图标名称不会出现在 Drawable 文件夹中，那时我觉得如果我尝试滚动我的 UI 很慢，我尝试使用上述两种技术但我发现没有用.

如何克服这个问题，当图标丢失时，第一个方法抛出 NULL 而第二个方法显示异常，但为什么这样做要花太多时间呢？如何防止我的用户界面迟缓，任何有效的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:44:17.347

> 为此，我遵循了两种方法，一种是

我会推荐：

```
context.getResources().getIdentifier(i.getIcon(), "drawable", context.getPackageName()) 
```

> 当图标丢失时，第一种方法抛出 NULL，第二种方法显示异常

不要要求一个不存在的图标。由于您在编译时知道确切的图标存在和不存在，因此您完全有能力不要求不存在的图标。

> 如何防止我的 UI 出现呆滞

使用[Traceview](http://developer.android.com/tools/debugging/debugging-tracing.html)找出性能问题的确切位置。有些人会反思——无论你是明确地做还是（更好地）使用`getIdentifier()`，仍然会有反思。理想情况下，您将缓存`getIdentifier()`调用的结果。但除此之外，Traceview 将帮助您查明您的困难。

# session - 如何在法拉第设置cookie

> ID：11817026
> 
> 赞同：2
> 
> 时间：2012-08-05T13:57:52.913
> 
> 标签：session, cookies, sinatra, faraday

我使用 Faraday 作为 HTTP 客户端来测试我的 HTTP 服务（基于 Sinatra）。它对我来说非常强大，但我有一个问题。

我们在 Sinatra 服务上跟踪会话，但我无法使用 Faraday 客户端设置 cookie 值。这是示例代码：

```
# `response` is from the Sinatra service
cookie = response.headers['set-cookie']

# now, for the follow up request...
response = client.get '/api/profile' do |req|
  req.headers['Cookie'] = cookie
end 
```

服务器找不到会话。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:55:11.823

`Set-Cookie`和标`Cookie`头不一样，请阅读 RFC 以了解如何解释它们。简而言之，`Set-Cookie`标头还包含客户端如何处理数据（域、路径、到期等）的说明，并提供对现有 cookie 存储的*更新。*`Cookie`另一方面，标头提供 cookie 存储的内容，但不提供元数据。

您需要获取或实现某种 cookie 处理程序以插入您的 Faraday 中间件堆栈。

# c# - 在网页的特定视图中显示数据库内容

> ID：11817032
> 
> 赞同：0
> 
> 时间：2012-08-05T13:58:31.823
> 
> 标签：c#, asp.net, sql

好的，这就是我的想法。我正在制作一个招聘网站来招聘人员。它为申请人提供了一个功能，他可以在线建立他的简历！我为此制作了各种表格。

填写表格后，申请人将信息提交到数据库，然后将所有与构建简历相关的网页信息保存在数据库中！

我正在考虑为申请人提供一个选项卡，当他单击“查看简历”时，我会在该选项卡上向他展示他在新网页上建立的简历，格式如下

[http://careers.telenor.com.pk/Page/Detail/VacancyView.aspx?PositionID=3003265](http://careers.telenor.com.pk/Page/Detail/VacancyView.aspx?PositionID=3003265)

喜欢的字段应该在左侧作为表格列，它们在右侧的数据库中各自的内容！任何人都可以完全指导我如何做到这一点？或指导我到特定的教程？？我将感激不尽！我正在使用 Asp.net！

我看过网格视图！很像一张桌子！在数据库中的值的顶部和下方都有列！那不是我想要的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:48:51.473

DetailsView 控件可用于显示单个数据记录中的字段。它具有您正在寻找的“格式”。

您可以在此链接[http://msdn.microsoft.com/en-us/library/s3w1w7t4.aspx中找到文档](http://msdn.microsoft.com/en-us/library/s3w1w7t4.aspx)

# java - 使用 Xpath 处理 selenium web 驱动程序中的动态表

> ID：11817037
> 
> 赞同：0
> 
> 时间：2012-08-05T14:00:02.763
> 
> 标签：java, html, xpath, selenium

我正在使用 selenium Web 驱动程序进行网站的测试自动化工作。在该网站中有一个页面，其中显示了采购订单的详细信息。它有多个表，没有与之关联的 id/name。该设计仅使用“td”和“tr”元素。每个表可以包含多行、多列，具体取决于采购订单。我想用给定的值验证每个字段。如何使用 Xpath 获取这些动态细节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:51:24.700

您可以通过使用此[函数](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#findElements%28org.openqa.selenium.By%29)给出元素的 xpath来获取`<tr>`标签中的标签总数-`<td>``<td>`

```
List<WebElement> ele = driver.findElements(By.xpath("Xpath of the table")); 
```

现在您可以使用 for each 循环遍历`<tr>`上述列表中的每个标签，然后使用[getText()](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#getText%28%29)方法读取每个值。

让我知道这是否对您有帮助。

# linq - linq - 父/子查询仅选择最低级别

> ID：11817038
> 
> 赞同：0
> 
> 时间：2012-08-05T14:00:13.897
> 
> 标签：linq

给定一个共同的父/子表：

```
Table A
Column Id int
Column Parent_Id int
Column Description text 
```

我只想获取没有任何子节点的节点。

```
1,null,"PARENT A"
2,null,"PARENT B",
3,null,"PARENT C", 
100,1,"CHILD A1",
101,1,"CHILD A2",
102,2,"CHILD B1" 
```

所以对于我的结果集，我只想得到：

父 C（因为它没有任何子元素）和子 A1、B2、B1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:06:07.880

你没有说你到底在用 LINQ 查询什么，但总体思路是

```
var leafNodes = nodes.Where(n => nodes.Count(n1 => n1.Parent_Id == n.Id) == 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:07:39.737

您可能更喜欢 Any() 方法而不是 Count() == 0。查看[哪种方法性能更好：.Any() 与 .Count() > 0？](https://stackoverflow.com/questions/305092/which-method-performs-better-any-vs-count-0)

```
var itemsWithoutChildren = nodes.Where(item=>!nodes.Any(innerItem=>innerItem.Parent_Id==item.Id)) 
```

# c# - TreeViewItem 像链式事件一样扩展

> ID：11817044
> 
> 赞同：0
> 
> 时间：2012-08-05T14:01:21.853
> 
> 标签：c#, wpf, xaml, treeview

在我的 WPF 应用程序中，如果我打开其中一个树视图项以显示所有子项，它会发生连锁事件并慢慢开始打开所有父项。例如，如果我打开红色，它会慢慢打开蓝色，直到它们都打开；

![](../Images/1da05fc4e7d43979840f71a99c294134.png) 我的树视图代码；

```
<TreeView x:Name="tvTagList" Margin="15, 40, 15, 50" SelectedItemChanged="tvTagList_SelectedTagChanged" ItemsSource="{Binding}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="{x:Null}" BorderBrush="{DynamicResource ExtryzeAccentBrushSecondary}" BorderThickness="2" ScrollViewer.CanContentScroll="True" Foreground="White"
                                  VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling">
    <TreeView.Resources>
        <HierarchicalDataTemplate DataType="{x:Type  DataBind:TagClass}" ItemsSource="{Binding Children}" >
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                <TextBlock Text="{Binding TagClassMagic}" />
            </StackPanel>
        </HierarchicalDataTemplate>
        <HierarchicalDataTemplate DataType="{x:Type DataBind:TagEntry}">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                <TextBlock Text="{Binding TagFileName}" />
            </StackPanel>
        </HierarchicalDataTemplate>
    </TreeView.Resources>
</TreeView> 
```

我的课程;

```
public class TagClass
{
    public string TagClassMagic { get; set; }
    public ITagClass RawClass { get; set; }
    public List<TagEntry> TagEntries = new List<TagEntry>();

    public IList Children
    {
        get
        {
            return new CompositeCollection()
                {
                    new CollectionContainer() { Collection = TagEntries }
                };
        }
    }

}
public class TagEntry
{
    public string TagFileName { get; set; }
    public ITagEntry RawTag { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:59:47.020

我认为这是因为`Children`每次都会返回一个新`CompositeCollection`的，默认情况下可能会扩展。尝试直接返回或仅在第一次`TagEntries`返回新的。`CompositeCollection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:29:37.497

事实证明我们必须改变；

```
VirtualizingStackPanel.VirtualizationMode="Recycling" 
```

到

```
VirtualizingStackPanel.VirtualizationMode="Standard" 
```

# php - Codeigniter 安全问题 - 会话永远持续？

> ID：11817045
> 
> 赞同：2
> 
> 时间：2012-08-05T14:01:27.907
> 
> 标签：php, security, codeigniter, session

在检查 CodeIgniter 的会话处理机制时，我发现了一些我认为非常令人担忧的东西。

```
$expire = $this->now - $this->sess_expiration;

$this->CI->db->where("last_activity < {$expire}");
$this->CI->db->delete($this->sess_table_name); 
```

看来 CI 实际上是根据 last_activity 而不是一个固定的、不可变的过期字段来确定会话过期时间的。

这里的问题是，只要会话更新，last_activity 就会更新为 now()。因此，假设您使用 CI 默认值，并且会话持续 7200 秒（2 小时），每 300 秒（5 分钟）更新一次

会话在最后一次更新的 5 分钟后被标记为需要更新，因此如果用户在这 5 分钟之后但在 2 小时之前提交了他的会话 cookie，那么 CI 将把会话延长到从这一刻起再持续 2 小时，因为 last_activity将更新为 now()。

这对我来说似乎是一个巨大的安全风险，因为只要用户处于活动状态并不断触发会话更新，它的持续时间就会无限延长，有效地使过期设置无用。我通过将更新设置为 10 秒并将到期时间设置为 20 对此进行了测试。我可以确认，只要我每 10 秒刷新一次，会话就永远不会过期！

想象一下，如果攻击者窃取了您的登录 cookie 并建立了有效会话。即使您使登录 cookie 无效，攻击者也可以无限期地保持其会话有效，只要他经常提交 cookie 即可。

你怎么看？我在这里错过了一些重要的事情吗？或者这真的像看起来那样糟糕吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:15:28.953

我认为您从评论中明白了这一点，但简单地发布答案，您发现的是正确的功能。

会话被“延长”，它们不是从最初的固定时间点创建到 + 7200 秒。如果您是从事某项工作的人，并且在您处于活动状态时突然退出，这有点愚蠢。

作为一种替代方法，**如果**您想做您描述的事情，您可以扩展`CI_Session`并修改该特定方法，并将其另存为`MY_Session`.

在此处查看更多详细信息：http: [//codeigniter.com/user_guide/general/core_classes.html](http://codeigniter.com/user_guide/general/core_classes.html)

# javascript - JavaScript 更新一个 2MB 的 JSON 文件

> ID：11817046
> 
> 赞同：0
> 
> 时间：2012-08-05T14:01:28.740
> 
> 标签：javascript, json, cordova

如何使用 JavaScript 更新 2MB JSON 文件？

我使用phonegap 来开发一个Android 应用程序。现在，我需要从 JSON 文件中检索数据，然后将数据更新回这个 JSON 文件。

它显示“ *JavaScript 执行超出超时*”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:22:47.157

*大多数 JavaScript 引擎都有执行限制，这意味着当您的代码运行时间超过x*秒时，它们会抛出错误。在大多数浏览器中，这只是 5 或 10 秒。有关更多信息，请查看[SO 上的这个答案。](https://stackoverflow.com/a/3030039/990877)

想到了三个解决方案：

*   **将长时间运行的代码分解成**更小的部分。重写你的算法，让它在短的“spurts”中工作，并在迭代中使用`setInterval`或`setTimeout`调用代码。
*   **使用**专为长时间运行的任务设计的**[Web Workers 。](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)**不足之处？[浏览器兼容性](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers#Browser_compatibility)只是马马虎虎。
*   **在服务器上**运行它。这可能是微不足道的，也可能是几乎不可能的，具体取决于您的问题。

# php - 解析 Mobi 的 PHP 库

> ID：11817047
> 
> 赞同：0
> 
> 时间：2012-08-05T14:01:54.947
> 
> 标签：php, parsing, mobipocket

是否有任何免费的 PHP 库可以解析 .mobi 文件以获取：

*   作者
*   标题
*   出版商
*   覆盖

**编辑**：

对于那些认为这是与[是否存在 PHP 库以使用 PRC/MOBI 文件](https://stackoverflow.com/questions/2242548/does-a-php-library-exist-to-work-with-prc-mobi-files)**完全相同的副本**的每个人，您显然懒得阅读这些问题。

那位提问者想知道如何使用 PHP 库生成 .mobi 文件。我想知道如何分解或解析已经创建的 .mobi 文件以获取某些信息。因此，该问题的解决方案[phpMobi](https://github.com/raiju/phpMobi)将不起作用，因为它是从 HTML 生成 .mobi 文件的脚本，而不是解析 .mobi 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:44:55.060

一个非常非常蹩脚的例子，但如果你绝望了，你可以尝试这样的事情：

```
$data = file_get_contents("A Young Girl's Diary - Freud, Sigmund.mobi");

$chunk = mb_substr($data, mb_strpos($data, 'EXTH'), 512);
$chunks = explode("\x00", $chunk);
array_shift($chunks);

$chunks = array_filter($chunks, function($str){return preg_match('#([A-Z])#', $str) && mb_strlen($str) > 2;});

$chunks = array_combine(array('author', 'publisher', 'title'), $chunks);

print_r($chunks); 
```

输出：

```
Array
(
    [author] => Freud, Sigmund
    [publisher] => Webarto
    [title] => A Young Girl's Diary
) 
```

使用的文件：http: [//freekindlebooks.org/Freud/752-h.mobi](http://freekindlebooks.org/Freud/752-h.mobi)（使用 Calibre 编辑出版商元数据）

文件解析甚至不是一件容易或有趣的事情。看看这个：[http ://code.google.com/p/xee/source/browse/XeePhotoshopLoader.m?r=a70d7396356997114b548f4ab2cbd49badd7d285#107](http://code.google.com/p/xee/source/browse/XeePhotoshopLoader.m?r=a70d7396356997114b548f4ab2cbd49badd7d285#107)

您应该做的是逐字节读取，但是由于没有详细的文档，恐怕这不是一件容易的事。

PS我还没有尝试获取封面照片。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T10:12:54.820

如果有人仍然感兴趣，这里有一个 mobi 元数据阅读示例：

```
class palmDOCHeader
{
    public $Compression = 0;
    public $TextLength = 0;
    public $Records = 0;
    public $RecordSize = 0;
}

class palmHeader
{
    public $Records = array();
}

class palmRecord
{
    public $Offset = 0;
    public $Attributes = 0;
    public $Id = 0;
}

class mobiHeader
{
    public $Length = 0;
    public $Type = 0;
    public $Encoding = 0;
    public $Id = 0;
    public $FileVersion = 0;

}

class exthHeader
{
    public $Length = 0;
    public $Records = array();  
}

class exthRecord
{
    public $Type = 0;
    public $Length = 0;
    public $Data = "";
}

class mobi {
    protected $mobiHeader;
    protected $exthHeader;

    public function __construct($file){
        $handle = fopen($file, "r");
        if ($handle){
            fseek($handle, 60, SEEK_SET);
            $content = fread($handle, 8);
            if ($content != "BOOKMOBI"){
                echo "Invalid file format";
                fclose($handle);
                return;
            }

            // Palm Database
            echo "\nPalm database:\n";
            $palmHeader = new palmHeader();

            fseek($handle, 0, SEEK_SET);
            $name = fread($handle, 32);
            echo "Name: ".$name."\n";

            fseek($handle, 76, SEEK_SET);
            $content = fread($handle, 2);
            $records = hexdec(bin2hex($content));
            echo "Records: ".$records."\n";

            fseek($handle, 78, SEEK_SET);
            for ($i=0; $i<$records; $i++){
                $record = new palmRecord();

                $content = fread($handle, 4);
                $record->Offset = hexdec(bin2hex($content));

                $content = fread($handle, 1);
                $record->Attributes = hexdec(bin2hex($content));

                $content = fread($handle, 3);
                $record->Id = hexdec(bin2hex($content));

                array_push($palmHeader->Records, $record);
                echo "Record ".$i." offset: ".$record->Offset." attributes: ".$record->Attributes."  id : ".$record->Id."\n";
            }

            // PalmDOC Header
            $palmDOCHeader = new palmDOCHeader();
            fseek($handle, $palmHeader->Records[0]->Offset, SEEK_SET);
            $content = fread($handle, 2);
            $palmDOCHeader->Compression = hexdec(bin2hex($content));
            $content = fread($handle, 2);
            $content = fread($handle, 4);
            $palmDOCHeader->TextLength = hexdec(bin2hex($content));
            $content = fread($handle, 2);
            $palmDOCHeader->Records = hexdec(bin2hex($content));
            $content = fread($handle, 2);
            $palmDOCHeader->RecordSize = hexdec(bin2hex($content));
            $content = fread($handle, 4);

            echo "\nPalmDOC Header:\n";
            echo "Compression:".$palmDOCHeader->Compression."\n";
            echo "TextLength:".$palmDOCHeader->TextLength."\n";
            echo "Records:".$palmDOCHeader->Records."\n";
            echo "RecordSize:".$palmDOCHeader->RecordSize."\n";

            // MOBI Header
            $mobiStart = ftell($handle);
            $content = fread($handle, 4);
            if ($content == "MOBI"){
                $this->mobiHeader = new mobiHeader();
                echo "\nMOBI header:\n";
                $content = fread($handle, 4);
                $this->mobiHeader->Length = hexdec(bin2hex($content));

                $content = fread($handle, 4);
                $this->mobiHeader->Type = hexdec(bin2hex($content));

                $content = fread($handle, 4);
                $this->mobiHeader->Encoding = hexdec(bin2hex($content));

                $content = fread($handle, 4);
                $this->mobiHeader->Id = hexdec(bin2hex($content));

                echo "Header length: ".$this->mobiHeader->Length."\n";
                echo "Type: ".$this->mobiHeader->Type."\n";
                echo "Encoding: ".$this->mobiHeader->Encoding."\n";
                echo "Id: ".$this->mobiHeader->Id."\n";

                fseek($handle, $mobiStart+$this->mobiHeader->Length, SEEK_SET);
                $content = fread($handle, 4);
                if ($content == "EXTH"){
                    $this->exthHeader = new exthHeader();
                    echo "\nEXTH header:\n";

                    $content = fread($handle, 4);
                    $this->exthHeader->Length = hexdec(bin2hex($content));

                    $content = fread($handle, 4);
                    $records = hexdec(bin2hex($content));
                    echo "Records: ".$records."\n";

                    for ($i=0; $i<$records; $i++){
                        $record = new exthRecord();

                        $content = fread($handle, 4);
                        $record->Type = hexdec(bin2hex($content));

                        $content = fread($handle, 4);
                        $record->Length = hexdec(bin2hex($content));

                        $record->Data = fread($handle, $record->Length - 8);

                        array_push($this->exthHeader->Records, $record);
                        echo "Record ".$i." type: ".$record->Type." length: ".$record->Length."\n";
                        echo "  data: ".$record->Data."\n";
                    }
                }
            }

            fclose($handle);
        }
    }

    protected function GetRecord($type)
    {
        foreach ($this->exthHeader->Records as $record){
            if ($record->Type == $type)
                return $record;
        }
        return NULL;
    }

    protected function GetRecordData($type)
    {
        $record = $this->GetRecord($type);
        if ($record)
            return $record->Data;
        return "";
    }

    public function Title()
    {
        return $this->GetRecordData(503);
    }

    public function Author()
    {
        return $this->GetRecordData(100);
    }

    public function Isbn()
    {
        return $this->GetRecordData(104);
    }

    public function Subject()
    {
        return $this->GetRecordData(105);
    }

    public function Publisher()
    {
        return $this->GetRecordData(101);
    }
}

$mobi = new mobi("test.mobi");
echo "\nTitle: ".$mobi->Title();
echo "\nAuthor: ".$mobi->Author();
echo "\nIsbn: ".$mobi->Isbn();
echo "\nSubject: ".$mobi->Subject();
echo "\nPublisher: ".$mobi->Publisher(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T19:19:52.350

有同样的问题，没有找到任何 PHP 解析器，不得不自己编写（不幸的是我不能透露我的代码）。这是关于 .mobi 结构的一个很好的资源[http://wiki.mobileread.com/wiki/MOBI](http://wiki.mobileread.com/wiki/MOBI)

# javascript - jquery focusin 在调用 .focus() 并返回 false 时不起作用；

> ID：11817049
> 
> 赞同：0
> 
> 时间：2012-08-05T14:01:59.937
> 
> 标签：javascript, jquery, focus

我对 jQuery (1.7.2) 的 focusin/focusout 事件有疑问。

我在一个 div 中有 2 个输入。当其中一个获得焦点时，我想向 div 添加一个类。如果没有任何输入有焦点，我只想删除这个类。

* * *

```
$(function() {
  $('#container').on('focusin',function(){
    $(this).addClass('test');
  }).on('focusout',function(){
    if ($(this).find('input:focus').length) return;
    $(this).removeClass('test');
  });

  $('#container input').on('keydown',function(e) {
    var keycode = e.keyCode || e.which;
    //When Tab or Return, switch input
    if (keycode == 9 || keycode == 13) {
      $($(this).attr('data-target')).focus();
      return false;
    }
  });
}); 
```

* * *

```
<div id="container">
    <input type="text" id="a" data-target="#b">
    <input type="text" id="b" data-target="#a">
</div> 
```

* * *

[http://jsfiddle.net/pqUFX/](http://jsfiddle.net/pqUFX/)

工作正常，当我用鼠标单击输入以切换焦点时。但是，当`keydown()`通过调用`$('#b').focus();`类将焦点设置到输入事件内的其他输入时，即使检查 div 内的现有焦点也是如此。

可能是因为 my `return false;`，所以标签不会切换两次？您对此有任何替代解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:19:31.873

不知道为什么它真的不起作用（它应该），但你为什么不使用这样的东西：

```
$(function() {
    $('#container input').on('keydown',function(e) {
        var keycode = e.keyCode || e.which;
        //When Tab or Return, switch input
        if (keycode == 9 || keycode == 13) {             
            $($(this).attr('data-target')).focus();
            $(this).parent().addClass("test");
            return false;
        }
    }).focusin(function() {
        $(this).parent().addClass("test");                  
    }).focusout(function() {
        $(this).parent().removeClass("test");                  
    });
});​ 
```

# nginx - PHP 中的长时间运行脚本导致 NGINX 服务器变得非常繁忙

> ID：11817050
> 
> 赞同：3
> 
> 时间：2012-08-05T14:02:04.797
> 
> 标签：nginx, php

我会尽量具体说明这一点——这并不容易，所以请尽量遵循。

我们有一个在 NGINX 上使用 PHP 运行的脚本 - PHP-fpm FastCGI。该脚本从试图访问它的用户那里获取信息，并**实时**运行一些算法。它不能是在后台运行的计划进程。有时，页面加载甚至需要 5-12 秒 -**这没关系**。通常，我们会从用户那里收集数据，并向第三方服务器发出多次请求，收集数据并对其进行分析，然后为用户返回响应。

问题是，有**很多**用户在运行这个脚本，并且服务器变得非常繁忙——因为他们都是服务器上的活动连接，等待响应。我们有 2 台服务器在 1 个负载均衡器下运行，但这还不够。有时服务器一次有超过 1,500 个活动连接。您可以想象这些服务器在该时间范围内如何响应。

我正在寻找解决方案。我们可以向 LB 添加越来越多的服务器，但它是唯一的解决方案，这听起来很荒谬。我们运行了该脚本并将其优化到最大，我可以向您保证 - 该脚本的长时间运行没有真正的解决方案，因为它依赖于需要时间来响应我们实时流量的第 3 方服务器.

有没有您能想到的解决方案，以保持此脚本原样 - 但以某种方式降低这些活动连接对整体服务器功能的影响？有时，他们只是停下来回应。

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:54:50.723

3个月大的问题，我知道，但我忍不住想：

1.  如果您确定对第三方服务器的所有请求的网络工作总和加上 PHP 脚本中响应的相应处理*远*低于您的硬件限制。

2.  然后，您的 PHP 脚本可能会低效地忙循环，直到所有响应都从第三方服务器返回

如果我正在处理这样的问题，我会这样做：

1.  停止使用您自定义的外部 C++ curl 东西，因为 PHP 脚本无论如何都在忙着等待它。

2.  谷歌并阅读 PHP 的 curl-multi 实现的非忙循环使用

希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:17:31.333

我的建议是为请求**设置有限的超时时间**，并对每个第三方请求**使用异步请求。**

例如，对于您的页面，您必须显示 5 个第三方请求的结果。这意味着，您调用的内部脚本`cURL`或`file_get_contents`5 次，但脚本会因第三方的每次超时而冻结。一步步。这意味着，如果对于每个请求，您必须等待 10 秒的响应 - 您总共将有 50 秒。
`User calls the script -> script wait to end -> server is loaded for 50 seconds`

现在，如果对第三方的每个请求都将异步发送 - 它会将脚本的加载时间减少到最大请求延迟。因此，您将拥有一些较小的脚本，它们的寿命会更短——并且它会减少服务器上的负载。
`User calls the script -> script is loaded -> requests are sent -> there are no scripts that are waiting for the response and consuming resources of your server`

愿 AJAX 与您同在！;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-11T15:13:45.773

这是一个非常古老的问题，但由于我有类似的问题，我可以分享我的解决方案。长时间运行的脚本会影响系统的各个部分，并在网络服务器（在活动连接中）、php-fpm 和 mysql/其他数据库中造成压力。这些往往会导致一些连锁反应，例如其他请求开始失败。

首先确保您在服务器上安装了 netdata ( [https://github.com/netdata/netdata](https://github.com/netdata/netdata) )。如果您正在运行许多实例，您可能会发现设置 Grafana/Prometheus 也是值得的。

接下来确保它可以看到 PHP FPM 进程、Mysql 和 Nginx。Netdata 展示了很多东西，但对于这个问题，我的关键指标是：

*   Connections (mysql_local.connections) - 是充满连接的数据库
*   PHP-FPM 活动连接 (phpfpm_local.connections) - PHP 是否跟不上
*   PHP-FPM 请求持续时间 (phpfpm_local.request_duration) - 处理时间到了吗？
*   磁盘使用时间 (disk_util.sda) - 这显示磁盘是否跟不上（100% = 负载不佳）
*   用户打开文件 (users.files)

确保您有足够的文件句柄 ( [https://www.cyberciti.biz/faq/linux-increase-the-maximum-number-of-open-files/](https://www.cyberciti.biz/faq/linux-increase-the-maximum-number-of-open-files/) )，并且磁盘没有被完全占用。这两个都会阻止你让东西正常工作，所以在麻烦的服务器上让它们变大。

接下来检查 Nginx 在 nginx.conf 中有足够的资源：

```
worker_processes auto;
worker_rlimit_nofile 30000;

events {
    worker_connections 768;
} 
```

这将使您有时间找出问题所在。

接下来看php-fpm（/etc/php/7.2/fpm/pool.d/www.conf）：

*   将 pm.max_spare_servers 设置为高，例如 100
*   设置 pm.max_requests = 500 - 以防万一您的脚本无法正确释放自身。

然后观看。对我来说，问题是每个请求都会阻止传入连接。对同一脚本的更多请求将阻止更多连接。机器可以正常运行，但是执行 curl 命中的单个慢速脚本或慢速 SQL 语句将在其整个持续时间内占用该连接，因此 30 秒 = 减少 1 个 php 进程来处理传入请求。最终你达到了 500，然后你就用完了。如果您可以增加 FPM 进程的数量，以使慢速脚本请求的频率与它们运行的​​秒数相匹配。因此，如果脚本需要 2 秒，并且每秒被命中 2 次，那么您将需要一个恒定的 4 个额外的 fpm 工作线程，它们什么都不做。

如果你能做到这一点，那就停下来——除此之外的额外努力可能不值得。如果它仍然觉得这将是一个问题 - 在盒子上创建第二个 php-fpm 实例并将慢速脚本的所有请求发送到该新实例。这允许您在运行时间过多的情况下离散地失败这些请求。这将使您有能力做两件重要的事情：

*   控制用于慢速脚本的资源量
*   意味着所有其他脚本永远不会被慢速脚本阻塞，并且（假设操作系统限制足够高）永远不会受到资源限制的影响。

希望对在负载下苦苦挣扎的人有所帮助！

# javascript - Fancybox 问题，没有任何反应

> ID：11817051
> 
> 赞同：0
> 
> 时间：2012-08-05T14:02:35.497
> 
> 标签：javascript, jquery, fancybox

我想将 Fancybox 与以下代码集成到我的画廊中：

包括脚本：

```
<!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="tl_files/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>

<!-- Add fancyBox -->
<link rel="stylesheet" href="tl_files/fancybox/source/jquery.fancybox.css?v=2.0.6" type="text/css" media="screen" />
<script type="text/javascript" src="tl_files/fancybox/source/jquery.fancybox.js?v=2.0.6"></script>

<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="tl_files/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" type="text/css" media="screen" />
<script type="text/javascript" src="tl_files/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
<script type="text/javascript" src="tl_files/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>

<link rel="stylesheet" href="tl_files/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />
<script type="text/javascript" src="tl_files/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.0.6"></script> 
```

我的图片链接如下所示：

```
< a class="fancybox" data-fancybox-group="gallery" title="hello world" href="tl_files/photomania/images/51.jpg"><img   src="tl_files/photo/images/51.jpg"></img></a> 
```

最后我用下面的代码调用了这个花哨的盒子：

```
<script type="text/javascript">
(function($) {
    $('.fancybox').fancybox();
})(jQuery);
</script> 
```

但什么也没发生..请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:13:26.587

你得到什么样的错误？您是否检查过 javascript 控制台或 firebug（如果您使用 firefox/iceweasel）？

粘贴错误消息，它会更容易帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T21:49:08.420

尝试这个：

```
 <script type="text/javascript">
        $(document).ready(function() {
        $('.fancybox').fancybox();
        });
    </script> 
```

由于您在第一行加载 jquery，我认为您不需要那样做。

它应该工作。

# javascript - 使用 Bootstrap 进行页面导航

> ID：11817052
> 
> 赞同：0
> 
> 时间：2012-08-05T14:02:46.463
> 
> 标签：javascript

我正在尝试使用[Bootstrap](http://twitter.github.com/bootstrap/)，但在实现页面导航时遇到了一些麻烦。

导航链接如下所示：

```
<a href="#Profile">Profile</a> 
```

这会将浏览器 URL 更改为 append `#Profile`。运行 fiddler 似乎不会导致页面刷新（没有流量通过）。

这似乎没有记录在 Bootstrap 文档中，因为我什至不知道该功能的名称，所以我没有设法查找如何正确实现它。谁能告诉我它叫什么并可能提供解释或一些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:30:09.670

按照要求：

以 # 开头的链接会触发一个[`hashChange`](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)事件，并将当前页面滚动到一个`id`等于 Profile 的元素（so: `<div id="Profile>...</div>`）。这不是[twitter-bootstrap](/questions/tagged/twitter-bootstrap "显示标记为“twitter-bootstrap”的问题")功能，它纯粹是 HTML。

请注意，这对于您的问题中发布的链接是正确的：`<a href="#Profile">Profile</a>`

如果链接`href`具有以下形式：`<a href="http://example.com/index.html#Profile">Profile</a>`

然后它将加载一个新页面，并立即滚动到`id="Profile"`. 这对于链接到其他页面的特定部分很有用（我自己的主要用例是链接到 Quirksmode 兼容性或 W3 的 HTML/CSS 文档的特定部分）。

# python - 保存模型时去除空格

> ID：11817055
> 
> 赞同：2
> 
> 时间：2012-08-05T14:03:26.963
> 
> 标签：python, django, django-models

> **可能重复：**
> [（Django）从 charField 中修剪空格](https://stackoverflow.com/questions/5043012/django-trim-whitespaces-from-charfield)

在 ruby​​ on rails 中，在保存模型时非常容易去除空格。在 django 中，最佳做法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T14:07:33.700

覆盖方法非常容易`models.Model` `save`，以执行任何预 svae 操作。该链接`stummjr`还提供了一个示例。

```
class MyClass(models.Model):
    # some fields here

    def save(self, *args, **kwargs):
       # strip spaces here
       super(MyClass, self).save(*args, **kwargs)
       # make sure to call parent save method ^ 
```

# c - Apple LLVM 编译器 4.0 错误铿锵声

> ID：11817057
> 
> 赞同：1
> 
> 时间：2012-08-05T14:03:40.640
> 
> 标签：c, xcode, xcode4, llvm, building

对不起，我的英语不好，我是法国人。

我从 C 语言开始，在构建过程中遇到错误

```
error: -fobjc-arc is not supported with fragile abi
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我试图在网上找到一些解决方案，但没有结果..

```
ProcessPCH /Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/PrecompiledHeaders/DevTool-Prefix-btzmnprddvcwlhbcsotsvtjgrmyp/DevTool-Prefix.pch.pth DevTool/DevTool-Prefix.pch normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/Hollisprice/Documents/xCode/DevTool
setenv LANG en_US.US-ASCII
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-sign-compare -Wshorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.8 -g -Wno-sign-conversion "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -iquote /Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/DevTool.build/Debug/DevTool.build/DevTool-generated-files.hmap -I/Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/DevTool.build/Debug/DevTool.build/DevTool-own-target-headers.hmap -I/Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/DevTool.build/Debug/DevTool.build/DevTool-all-target-headers.hmap -iquote /Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/DevTool.build/Debug/DevTool.build/DevTool-project-headers.hmap -I/Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Products/Debug/include -I/Library/Frameworks/SDL.framework/Headers -I/Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/DevTool.build/Debug/DevTool.build/DerivedSources/i386 -I/Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/DevTool.build/Debug/DevTool.build/DerivedSources -F/Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Products/Debug -F/Library/Frameworks --serialize-diagnostics /Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/PrecompiledHeaders/DevTool-Prefix-btzmnprddvcwlhbcsotsvtjgrmyp/DevTool-Prefix.pch.dia -c /Users/Hollisprice/Documents/xCode/DevTool/DevTool/DevTool-Prefix.pch -o /Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/PrecompiledHeaders/DevTool-Prefix-btzmnprddvcwlhbcsotsvtjgrmyp/DevTool-Prefix.pch.pth -MMD -MT dependencies -MF /Users/Hollisprice/Library/Developer/Xcode/DerivedData/DevTool-dfnxafkbvghokwdpcwpuvrurijwt/Build/Intermediates/PrecompiledHeaders/DevTool-Prefix-btzmnprddvcwlhbcsotsvtjgrmyp/DevTool-Prefix.pch.d 
```

谢谢帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:40:30.023

我相信这是因为您使用 ARC 为 32 位 x86 编译代码。如果要使用 ARC，则必须编译为 64 位架构。

# html - HTML 表格未显示

> ID：11817060
> 
> 赞同：0
> 
> 时间：2012-08-05T14:04:32.563
> 
> 标签：html, xhtml

我目前正在学习 HTML。我试图创建一个显示简单表格的简单 HTML 文档，但我遇到了麻烦。我的网络浏览器（Mozilla Firefox）没有显示整个表格的边框。看起来如果它是一个普通的段落。

这是我所拥有的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0//Strict//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11-strict.dtd">
<html>
    <head>
        <title>My first web page</title>
    </head>
    <body>
        <table>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
            </tr>

            <tr>
                <td>4</td>
                <td>5</td>
                <td>6</td>

            <tr>
                <td>7</td>
                <td>8</td>
                <td>9</td>
            <tr/>

            <tr>
                <td>10</td>
                <td>11</td>
                <td>12</td>

            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:09:27.740

尝试向`<table>`标签添加边框属性，如下所示：

```
<table border="1"> 
```

**编辑**：如果您看到带有边框但没有设置边框属性的表格，可能是因为它们是用 css 设置样式的，这是在 html 中设置所有内容的首选方式（而不是像上面那样添加单个属性）：

```
<head>
    <title>My first web page</title>
    <style type="text/css">
       table {border: 1px solid black;}
       td {border: 1px solid black;}
    </style>
</head>
<body>
    <table>
        <tr>
            <td>1</td>
...
</body> 
```

作为另一个学习练习，您还应该考虑链接到外部样式表，作为`<style>`在 html 中使用标记的替代方法，如此处所示。这是一个不错的入门教程：[http ://www.w3schools.com/css/css_howto.asp](http://www.w3schools.com/css/css_howto.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T14:40:24.313

您可能想通过使用类似的东西来控制边界：

```
<table style="border:2px solid red;"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-05T14:06:27.653

您缺少第二行的结束元素。应该：

```
<head>

    <title>My first web page</title>

</head>

<body>

    <table>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>

        <tr>
            <td>4</td>
            <td>5</td>
            <td>6</td>
        </tr>

        <tr>
            <td>7</td>
            <td>8</td>
            <td>9</td>
        <tr/>

        <tr>
            <td>10</td>
            <td>11</td>
            <td>12</td>

        </tr>

    </table>

</body> 
```

# c# - 在组合框中对齐文本

> ID：11817062
> 
> 赞同：13
> 
> 时间：2012-08-05T14:04:41.743
> 
> 标签：c#, winforms, combobox, visual-c#-express-2010

我想在组合框中对齐我的文本，以便它显示在组合框的中心告诉我如何执行此操作您还可以看到组合框周围有一个默认边框，当它处于焦点时我如何删除该边框也请解决我的两个问题谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-06T14:29:55.300

本文将为您提供帮助：http: [//blog.michaelgillson.org/2010/05/18/left-right-center-where-do-you-align/](http://blog.michaelgillson.org/2010/05/18/left-right-center-where-do-you-align/)

诀窍是将`DrawMode`ComboBox 的 -Property设置`OwnerDrawFixed`为并订阅它的 event `DrawItem`。

您的活动应包含以下代码：

```
// Allow Combo Box to center aligned
private void cbxDesign_DrawItem(object sender, DrawItemEventArgs e)
{
  // By using Sender, one method could handle multiple ComboBoxes
  ComboBox cbx = sender as ComboBox;
  if (cbx != null)
  {
    // Always draw the background
    e.DrawBackground();

    // Drawing one of the items?
    if (e.Index >= 0)
    {
      // Set the string alignment.  Choices are Center, Near and Far
      StringFormat sf = new StringFormat();
      sf.LineAlignment = StringAlignment.Center;
      sf.Alignment = StringAlignment.Center;

      // Set the Brush to ComboBox ForeColor to maintain any ComboBox color settings
      // Assumes Brush is solid
      Brush brush = new SolidBrush(cbx.ForeColor);

      // If drawing highlighted selection, change brush
      if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
        brush = SystemBrushes.HighlightText;

      // Draw the string
      e.Graphics.DrawString(cbx.Items[e.Index].ToString(), cbx.Font, brush, e.Bounds, sf);
    }
  }
} 
```

![组合框预览](../Images/1d7670b4fe191035fb27daa162c52178.png)

要右对齐项目，您可以简单地替换`StringAlignment.Center`为`StringAlignment.Far`.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-05T14:50:08.407

ComboBox 不支持此功能。确切的原因已经在时间的迷雾中消失了，ComboBox 从九十年代初就已经存在，但肯定与让文本框部分中的文本与下拉列表中的文本对齐的尴尬有关。使用 DrawItem 自定义绘图也无法解决，只会影响下拉项的外观。

作为一种可能的解决方法，您也许可以做一些奇怪的事情，比如用空格填充项目字符串，使它们*看起来*居中。您需要 TextRenderer.MeasureText() 来确定要为每个项目添加多少空格。

您所说的“边框”不是边框，而是焦点矩形。您也无法摆脱这一点，Windows 拒绝让您创建一个不会显示具有焦点的控件的 UI。喜欢键盘而不是鼠标的用户会关心这一点。没有解决方法。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-09T12:46:34.140

将`RightToLeft`属性设置为`true`。
它不会颠倒字符序列。它只会正确证明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-05T14:13:51.493

Winforms 在自定义控件方面相当不灵活。如果您正在寻找更自定义的用户体验，那么我建议您考虑创建一个 WPF 应用程序，该应用程序允许您定义自定义控件。不过，这需要一些工作，所以只有当你真的认为有必要时，你才会想要去做。这是一个不错的网站，可以帮助您入门[http://www.wpftutorial.net/](http://www.wpftutorial.net/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-20T13:18:15.477

这篇文章有点旧，但可能仍然值得说：

对于 Windows 窗体组合框，这两个要求都是可能的：

*   **文本居中对齐（文本区域和下拉菜单）**
    *   对于文本区域，找到`Edit`控件并设置控件的`ES_CENTER`样式。
    *   对于下拉项或下拉模式中的选定项，要将文本居中对齐，只需将控件设为所有者绘制并将文本绘制在中心即可。
*   **摆脱焦点矩形**
    *   使控件由所有者绘制，而不是绘制焦点矩形。

**例子**

```
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;
public class MyComboBox : ComboBox
{
    public MyComboBox()
    {
        DrawMode = DrawMode.OwnerDrawFixed;
    }

    [DllImport("user32.dll")]
    static extern int GetWindowLong(IntPtr hWnd, int nIndex);
    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);
    const int GWL_STYLE = -16;
    const int ES_LEFT = 0x0000;
    const int ES_CENTER = 0x0001;
    const int ES_RIGHT = 0x0002;
    [StructLayout(LayoutKind.Sequential)]
    public struct RECT
    {
        public int Left;
        public int Top;
        public int Right;
        public int Bottom;
        public int Width { get { return Right - Left; } }
        public int Height { get { return Bottom - Top; } }
    }
    [DllImport("user32.dll")]
    public static extern bool GetComboBoxInfo(IntPtr hWnd, ref COMBOBOXINFO pcbi);

    [StructLayout(LayoutKind.Sequential)]
    public struct COMBOBOXINFO
    {
        public int cbSize;
        public RECT rcItem;
        public RECT rcButton;
        public int stateButton;
        public IntPtr hwndCombo;
        public IntPtr hwndEdit;
        public IntPtr hwndList;
    }
    protected override void OnHandleCreated(EventArgs e)
    {
        base.OnHandleCreated(e);
        SetupEdit();
    }
    private int buttonWidth = SystemInformation.HorizontalScrollBarArrowWidth;
    private void SetupEdit()
    {
        var info = new COMBOBOXINFO();
        info.cbSize = Marshal.SizeOf(info);
        GetComboBoxInfo(this.Handle, ref info);
        var style = GetWindowLong(info.hwndEdit, GWL_STYLE);
        style |= 1;
        SetWindowLong(info.hwndEdit, GWL_STYLE, style);
    }
    protected override void OnDrawItem(DrawItemEventArgs e)
    {
        base.OnDrawItem(e);
        e.DrawBackground();
        var txt = "";
        if (e.Index >= 0)
            txt = GetItemText(Items[e.Index]);
        TextRenderer.DrawText(e.Graphics, txt, Font, e.Bounds,
            ForeColor, TextFormatFlags.Left | TextFormatFlags.HorizontalCenter);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-01T09:18:37.103

您可以通过在查询中的显示成员之前添加空格来执行此类操作

例如 ：

```
combobox1.DataSource = Query(Select col1 , ('   '+col2) as Col2 from tableName) 
combobox1.DisplayMember = "Col2";
combobox1.ValueMember = "col1"; 
```

# linux - 新 Ruby on Rails 开发人员的最佳 Linux 截屏视频学习系列？

> ID：11817064
> 
> 赞同：0
> 
> 时间：2012-08-05T14:05:31.827
> 
> 标签：linux, video

我喜欢 lynda.com、railscasts.com 和 codeschool.com 等学习 Rails 的网站。有没有类似的学习linux的网站？

特别像一个 1 - 2 小时的截屏系列，我想在以下方面做得更好：

1) 命令行 2) 软件包安装 3) Web 服务器

Ruby on Rails 开发人员需要知道的东西。我做了一些探索，发现：[http](http://www.theurbanpenguin.com) ://www.theurbanpenguin.com看起来真的很不错，但我想知道你最喜欢的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:09:47.350

我看过我非常喜欢[的 Rails for Zombies 。](http://railsforzombies.org/ "僵尸导轨")

# mysql - MySql：存储空单元格，这很糟糕吗？

> ID：11817065
> 
> 赞同：1
> 
> 时间：2012-08-05T14:05:36.347
> 
> 标签：mysql, select

我有一张桌子，里面有各种各样的东西。问题是有些列只有一些行填充了数据。因为其他行不需要那个。让一些单元格为空是不是很糟糕？我是否应该将所有这些存储在不同的表中并有一个主表，其中所有对象都需要列？然后当我想选择我所做的事情时，我会加入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:11:51.133

有一些空单元格也不错。大多数情况下，当您可以在表之间建立更多关系时，您只需要多个表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:41:01.327

从您提供的少量信息来看，这**可能**是将有关不同类型对象的信息存储在一个表中的情况，例如汽车、人、房屋等。

并提前原谅我的过于简单化的例子，想不出更好的例子。

人们具有姓名，姓氏，出生日期等属性。汽车具有品牌、颜色、门数、发动机容量等属性。房屋具有面积、卧室数量、花园（是或否）等。

当这样的表将填充条目时，它看起来像这样：

```
id name   attr1 atttr2 attr3 attr4 attr5 attr6  
1  car1   1     1      0     0     0     0  
2  car2   1     1      0     0     0     0       
3  man1   0     0      1     1     0     0        
4  man2   0     0      1     1     0     0  
5  house1 0     0      0     0     1     1  
6  house2 0     0      0     0     1     1 
```

1 表示单元格有一些数据，0 表示单元格为空。

如果您的表看起来像这样，您最好将表拆分为更多表，正如数据库规范化所建议的那样。

# ruby-on-rails - 权限被拒绝在 PostgreSQL 中运行 ActiveRecord gem 测试

> ID：11817067
> 
> 赞同：0
> 
> 时间：2012-08-05T14:06:03.897
> 
> 标签：ruby-on-rails, macos, postgresql

我在 PostgreSQL 中运行[ActiveRecord gem 测试](https://github.com/rails/rails/tree/master/activerecord/test)时遇到问题，并且收到以下错误：

```
rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1473:in `initialize': could not connect to server: Permission denied (PG::Error)
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我可以使用`psql -h localhost`和创建数据库等连接到服务器。我使用[http://postgresapp.com/](http://postgresapp.com/)作为 postgresql 服务器。[按照Rails 贡献指南](http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html#testing-active-record)`rake postgresql:build_databases`的建议运行时，我遇到了同样的错误。

rails/activerecord/test/config.yml 文件具有以下设置（我更改的只是用户名）：

```
 postgresql:
    arunit:
      username: pete
      min_messages: warning
    arunit2:
      min_messages: warning
      username: pete 
```

我需要在 config.yml 中配置其他设置吗？我试过指定主机和空密码，但这根本没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:23:43.543

您的 psql 使用 TCP 连接到 localhost，ruby 显然是通过本地 unix 域套接字连接的。osx 上 postgresql 的 unix 域套接字的问题在于，并非所有 psql 客户端库和数据库后端都同意套接字的位置。

如果您不向 psql 传递 -h 选项，它将使用本地 unix 域套接字。有一个很好的改变将失败。

有两种可能的解决方案，我无法为您提供详细信息，因为我不知道 ruby​​ on rails 并且现在无法访问 mac：

1.  告诉 ruby​​ 连接到 localhost 而不是使用 unix 域套接字。

2.  确保 ruby​​ 使用的客户端库 (libpq) 与您正在运行的后端匹配。

# php - php - PDO：bindParam 令牌语法问题

> ID：11817070
> 
> 赞同：2
> 
> 时间：2012-08-05T14:06:14.787
> 
> 标签：php, mysql, pdo

有解决此错误的方法吗？是因为查询中的 mySQL 时间格式而发生的吗？

```
SQL 错误
错误：SQLSTATE[HY093]：无效的参数号：绑定变量的数量
与令牌数量不匹配

大批
(
    [:service_user_id] => 90
    [:week_beginning] => 2012-08-06
    [:week_ending] => 2012-08-12
)
回溯：C:\wamp\www\Sitetest_9.6.12\public_html\main\ajax\timetable_grid_load.php 在第 45 行

```

这是使用[php-pdo-wrapper-class](http://code.google.com/p/php-pdo-wrapper-class/)的 PHP ：

```
$bind = array(
    ":service_user_id" =>  $service_user_id,
    ":week_beginning" => $week_beginning,
    ":week_ending" => $week_ending,
);

$query = "SELECT 
    id AS sessID,
    session_day as sessDay,
    session_type_id,
    provider_id,
    description,
    TIME_FORMAT(start_time, '%H:%i') as start_time,
    TIME_FORMAT(finish_time, '%H:%i') as finish_time,
    start_date,
    finish_date,
    (SELECT absence FROM attendance WHERE sessID = session_id AND absence_date = DATE_ADD(':week_beginning', INTERVAL sessDay-1 DAY)) AS attendance
    FROM
    sessions
    WHERE
    service_user_id = :service_user_id AND
    start_date <= ':week_ending' AND
    (finish_date >= ':week_beginning' OR
    finish_date IS NULL OR 
    finish_date=0)
    ORDER BY session_day ASC";      

$result= $db->run($query,$bind);
return $result; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:14:13.233

不要在准备好的语句中使用单引号来分隔参数。没有必要（这就是首先准备好语句的全部意义）。

```
 ...
WHERE
    service_user_id = :service_user_id AND
    start_date <= :week_ending AND
    (finish_date >= :week_beginning OR
    finish_date IS NULL OR 
    ... 
```

提示：`start_date <= ':week_ending'`翻译为`less than or equal to the literal string ":week_ending"`.

# python - How to execute query only once in Django?

> ID：11817072
> 
> 赞同：0
> 
> 时间：2012-08-05T14:06:36.157
> 
> 标签：python, django, facebook, facebook-fql

This is the following query that I have in my views.py:

```
#parse json function
parse = get_persistent_graph(request)

#guys
male_pic = parse.fql('SELECT name,uid,education FROM user WHERE sex="male" AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())') 
```

This query currently takes approximately 10 seconds for me to load with about 800+ friends.

**Is it possible to only query this once, update when needed and save to a variable to use instead of having to query every time the page is loaded/refreshed?**

Some possible solutions that I can think of are:

*   Saving to the database - IMO that doesn't seem easily scaleable if I save every query from every user of this application
*   Some function I have no knowledge of
*   Improved and more efficient query request

Could someone please guide me to the path gate with the most efficient direction? Hoping I can lower 10 second requests to < 1 second! Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:04:17.887

Use cache system for that (like memcache).

# ruby-on-rails - Rails mongoid 有序 embeds_many 关联

> ID：11817073
> 
> 赞同：1
> 
> 时间：2012-08-05T14:06:43.013
> 
> 标签：ruby-on-rails, mongoid

我有文档用户，我想在此文档中存储其他用户的有序堆栈。用户文档的示例结构：

```
{
  "_id": ObjectId("parentID"),
  "stack": [
    { "_id": ObjectID("ChildId2"), position: 1 },
    { "_id": ObjectID("ChildId3"), position: 2 },
    { "_id": ObjectID("ChildId1"), position: 3 }
  ]
} 
```

我怎么能用 Mongoid 做到这一点？一般来说，我想订购（通过添加或按字段）embeds_many 关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:26:40.873

不确定您在这里需要什么，但您可以使用`order`关联上的选项指定嵌入文档的顺序。例如：

```
embeds_many :stack, :order => :position.asc 
```

将确保`user.stack`返回按位置排序的堆栈上的对象。

# java - Java 到 XML 安卓

> ID：11817076
> 
> 赞同：0
> 
> 时间：2012-08-05T14:07:15.957
> 
> 标签：java, android, xml, android-activity

Android 开发新手，想知道是否有某种方法可以获取用户输入来创建活动？例如，假设用户正在经历设置自己的个人资料的过程。问题之一是“你有多少只宠物？”。用户输入“4”，然后单击“下一步”按钮（打开下一个活动）。

我将如何使用用户输入的“4”在下一个活动中创建四个 editText 对象，以便用户现在可以输入他/她的宠物的名字？

我是一个不错的程序员（虽然之前从未接触过 XML）所以你不需要详细说明我只是不知道我将如何访问这个变量来创建四个 editText 对象。从我发现你不能在运行时向资源添加字符串，甚至不能在资源中编辑/附加文件。

我正在考虑从 java 编写一个 XML 文件并让活动（用 XML 编写）读取 XML 文件，如果这可能的话？XML 文件可以读取 XML 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:12:36.727

意图。

```
String 1 = et.getText().toString();
String 2 = et.getText().toString();
String 3 = et.getText().toString();
String 4 = et.getText().toString();

Intent i = new Intent(this, newclass.class).
i.putExtras("key1", 1); 
```

// 等等。

// 然后你得到数据。

```
bundle extras = i.getExtras();
string temps1 = extras.getString("key1", null); 
```

更多信息在这里：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T14:14:32.000

您要问的实际上并不是活动的创建，而是布局的创建。如您所知，Android 允许您使用 xml 定义布局，并且活动有一个简单的方法可以调用以基于该 xml 设置其内容视图。布局不需要在 xml 中定义；它们可以以编程方式创建。

当你开始一个活动时`Intent`，你会为它创建一个活动，你可以为这个意图添加“额外”；通过这样做，您可以将参数传递到您的活动中，它可以将这些参数用作如何构建布局的提示。

对编程布局进行一些研究（http://mylifewithandroid.blogspot.com/2007/12/xml-and-programmatic-layout.html 可能会有所帮助），您可能会弄清楚您需要知道什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T14:15:47.857

您可以在意图的帮助下传递数据（在您的情况下是用户输入）。您可以使用 putExtra 发送数据。[这是给你的好教程](http://javasrilankansupport.blogspot.in/2012/06/send-data-to-another-activity-simple.html)。

对于动态布局，您可以扩展当前布局并将控件添加到当前视图。对于动态布局[，这是一个很好的参考教程](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)。

我希望这两个两个教程对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T14:11:43.440

这与xml无关

用户的输入将存储在不同的数据类型中，例如字符串。如果你需要加载一个新的活动，你可以做的一件事是传递一个 android`Bundle`类型的信息。

您开始使用`intent`数据类型的新活动。`intent`数据类型有一个`putExtra`方法，您可以在其中放入变量。

在你之后`startActivity(yourIntent)`，新活动可以调用`Bundle`并且有一个方法调用`getExtra`关联`getIntent()`

这些至少应该指导你

# uml - 分布式系统的 UML

> ID：11817077
> 
> 赞同：1
> 
> 时间：2012-08-05T14:07:19.643
> 
> 标签：uml, soa, distributed-system

正如我们所知。UML 中的序列图是一种交互图，它显示了进程如何相互操作以及类或对象之间的顺序。现在我正在尝试在UML中找到一个图表或一些工具来描述分布式系统的交互和操作顺序。是否有任何图表或工具可以模拟分布式系统之间的交互，如序列图？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:43:02.127

活动图是在这种情况下使用的 UML 图。

[维基百科活动图](http://www.google.com.au/url?sa=t&rct=j&q=activity%20diagram%20uml&source=web&cd=6&ved=0CG8QFjAF&url=http://en.wikipedia.org/wiki/Activity_diagram&ei=idoeUIX_HO2wiQejuoHYBg&usg=AFQjCNEWytTQH2VgbExG2lel7-CbIlt4VQ)

[敏捷活动图](http://www.google.com.au/url?sa=t&rct=j&q=activity%20diagram%20uml&source=web&cd=7&ved=0CHUQFjAG&url=http://www.agilemodeling.com/artifacts/activityDiagram.htm&ei=idoeUIX_HO2wiQejuoHYBg&usg=AFQjCNFu-gG1yBIb9lx5bK9fmeQdPx0gzg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:42:45.997

您还可以使用序列图来描述分布式系统中组件之间的交互，每条生命线指定一个系统组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:28:39.253

序列图和通信图旨在显示“事物”如何交互。这些“事物”可以是对象、组件或完整的系统

# c# - 自删除可执行文件（卸载程序）

> ID：11817082
> 
> 赞同：0
> 
> 时间：2012-08-05T14:07:46.407
> 
> 标签：c#, uninstallation

我正在尝试制作卸载程序。我基本上需要能够删除包含卸载程序的程序文件中的目录。

我正在考虑让卸载程序将自己的副本创建到 temp 文件夹，然后让卸载程序从程序文件夹运行在 temp 中打开卸载程序并在继续卸载的地方关闭自身。

问题是，如何删除临时文件夹中的卸载程序...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:10:57.223

查看：[https ://www.catch22.net/tuts/win32/self-deleting-executables](https://www.catch22.net/tuts/win32/self-deleting-executables)

他有多种解决方案——但主要针对 C++ 代码。

我目前正在尝试在 C# 中实现“DELETE_ON_CLOSE”方法。

**对所有反对者的评论：** MSI 在所有情况下都不能解决这个问题。就我而言，我的应用程序需要安装到一个网络文件夹，任何网络用户都可以在其中运行该应用程序。它还需要支持从任何网络工作站进行升级和卸载 - 不一定是安装应用程序的同一工作站。这意味着我无法将卸载程序注册到本地计算机上的“添加/删除程序”列表中。我必须创建一个卸载到安装文件夹中的 Uninstall.exe。MSI不支持，所以我必须自己写。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-05T16:16:32.187

尽管我同意每个人都说你不应该这样做，但你可以做的是：

1.  让您的程序在其正在运行的操作系统的临时文件夹中创建一个可执行文件（和配置文件）。
2.  让您的程序将其作为独立进程启动，然后退出。
3.  然后该可执行文件回调实际的设置内容。
4.  设置完成后，临时可执行文件可以删除设置文件。
5.  由于您的程序的唯一痕迹现在位于临时文件夹中，因此**最终**会自动清除。

# mysql - 使用查询 A 的输出作为查询 B 的条件

> ID：11817084
> 
> 赞同：1
> 
> 时间：2012-08-05T14:07:58.590
> 
> 标签：mysql, database

我目前正在使用以下查询来确定数据库中的哪些项目没有关联的里程碑：

```
SELECT P.project_id, COUNT(M.milestone_id) as count FROM projects P
LEFT JOIN milestones M USING(project_id)
GROUP BY P.project_id
HAVING count < 1 
```

它返回：

```
project   count
---------------
9         0
34        0
32        0
41        0 
```

我现在如何`INSERT`为该表中的每个 project_id 设置一个新的里程碑行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:13:27.697

你可以使用`INSERT...SELECT`语句

```
INSERT INTO tableName (project_ID)
SELECT  P.project_id
FROM    projects P
            LEFT JOIN milestones M 
                USING(project_id)
GROUP BY P.project_id
HAVING count < 1 
```

更改`tableNAme`为要插入新行的表的名称。

**更新 1**

```
INSERT INTO tableName (project_ID, colA, colB, colC)
SELECT  P.project_id, colA, colB, colC
FROM    projects P
            LEFT JOIN milestones M 
                USING(project_id)
GROUP BY P.project_id
HAVING count < 1 
```

现在问题出现了，如果你想要一个列中不存在的值怎么办？您可以为此创建虚拟值。

```
INSERT INTO tableName (project_ID, field1, field2, field3)
SELECT  P.project_id, '' AS field1, 0 AS field2, NULL AS field3
FROM    projects P
            LEFT JOIN milestones M 
                USING(project_id)
GROUP BY P.project_id
HAVING count < 1 
```

# qt - QT X11 和 OpenGL

> ID：11817085
> 
> 赞同：1
> 
> 时间：2012-08-05T14:08:12.977
> 
> 标签：qt, opengl, gpu, qtembedded

1.  如何构建支持 OpenGL 的 X11 的 Qt？我的设备（GPU）上有硬件加速，但是当我将 qt(qml) 应用程序配置为使用 opengl 时，我看不到性能有任何改进……它的性能变得更慢。

我使用命令： `QApplication::setGraphicsSystem("opengl");`

我使用 Qt 灯塔（不是 qt Embedded-linux）。

1.  如何确保 Qt 真正使用 gpu 加速在屏幕上绘制 qt/qml 小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:22:40.923

确保 Qt 与 /usr/lib[64]/libGL.so 动态链接（或者只是库路径中的 libGL.so）。与任何其他 libGL.so、静态链接或什至 libMesaGL.{so, a} 的链接意味着，您很可能会在您的程序中获得 OpenGL 的软件光栅化器实现，而不是在您的系统上使用硬件加速。还要确保您的系统确实支持硬件加速 OpenGL。

如果运行`glxinfo | grep renderer`报告给你一些`software`光栅化器，你就没有硬件加速。请注意，*直接*与*间接*与硬件加速无关，尽管有时会这样说。间接只是意味着 OpenGL 命令被封装到 X11 请求中并通过 X11 服务器发送，而不是绕过服务器直接传递给 OpenGL 实现。

# java - java JTree取消选择已选择的节点

> ID：11817093
> 
> 赞同：2
> 
> 时间：2012-08-05T14:09:52.183
> 
> 标签：java, swing, jtree

我正在开发一个使用 JTree 的 java 应用程序。我想要存档的是，当我单击已选择的节点时，它会被取消选择。

我当前的解决方案是向 jtree 添加一个鼠标侦听器和一个树选择侦听器。但问题是 valueChanged 仅在选择发生变化时才被调用（而不是在您选择同一节点两次时）。为了解决这个问题，我添加了一个布尔值，指示节点是否第一次被单击，然后我在 mouseReleased 函数中处理取消选择。这可行，但现在的问题是，如果节点有子节点并且您想要扩展它，节点会被取消选择并再次重新选择（我不想要）。

我该如何解决这个问题？有没有更好的方法来取消选择已经选择的节点？

编码：

```
public void initComponents()
{
    elementsTree.addTreeSelectionListener(this);
    elementsTree.addMouseListener(new MouseAdapter() {
      public void mouseReleased(MouseEvent me) {
           TreePath tp = elementsTree.getPathForLocation(me.getX(), me.getY());
           if (tp != null)
           {
             if(!nodeSelected && elementsTree.getSelectionModel().isPathSelected(tp) )
                   {
                        elementsTree.getSelectionModel().removeSelectionPath(tp);
                   }
                }
                nodeSelected = false;
             }
        });
 }

 public void valueChanged(TreeSelectionEvent e)
 {
    nodeSelected = true;
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-26T21:35:42.617

只需使用`clearSelection()`.`JTree`

# java - 重新开始游戏

> ID：11817095
> 
> 赞同：-1
> 
> 时间：2012-08-05T14:10:04.127
> 
> 标签：java, tic-tac-toe, game-loop

我正在创建一个简单的井字游戏，但是每当游戏结束和单击重新启动按钮时，我都会陷入重新启动游戏的困境。我刚刚做了第一个水平按钮。当您按下它们时，会弹出一个窗口并告诉您有赢家。我只是为了测试而做的。但是当我按下重新启动时如何重新启动游戏？我只是java新手，我正在尝试自己制作游戏以进行改进。以下是我的代码的一些部分：

```
public class TicTacToe extends javax.swing.JFrame implements ActionListener{
int i=0;
boolean win = false;
String player[]={"You","Comp"};
/**
 * Creates new form TicTacToe
 */
public TicTacToe() {
    super("TicTacToe (LeeMinHu-bag)");
    initComponents();
    setResizable(false);
    setLocationRelativeTo(null);
    b1.addActionListener(this);
    b2.addActionListener(this);
    b3.addActionListener(this);
    b4.addActionListener(this);
    b5.addActionListener(this);
    b6.addActionListener(this);
    b7.addActionListener(this);
    b8.addActionListener(this);
    b9.addActionListener(this);

}
//If a button is pressed, its text will become "X"
public void actionPerformed(ActionEvent e){
   if(e.getSource() == b1){
       b1.setText("X");
       b1.setEnabled(false);
   }else if(e.getSource() == b2){
       b2.setText("X");
       b2.setEnabled(false);
   }else if(e.getSource() == b3){
       b3.setText("X");
       b3.setEnabled(false);
   }else if(e.getSource() == b4){
       b4.setText("X");
       b4.setEnabled(false);
   }else if(e.getSource() == b5){
       b5.setText("X");
       b5.setEnabled(false);
   }else if(e.getSource() == b6){
       b6.setText("X");
       b6.setEnabled(false);
   }else if(e.getSource() == b7){
       b7.setText("X");
       b7.setEnabled(false);
   }else if(e.getSource() == b8){
       b8.setText("X");
       b8.setEnabled(false);
   }else if(e.getSource() == b9){
       b9.setText("X");
       b9.setEnabled(false);
   }     
   i++;
   System.out.println(i);
    if(i%2==0){
       turn.setText(player[0]);
   }else{
       turn.setText(player[1]);
   }

   checkIfWin();

}
//check to see if there is a winner
 public void checkIfWin(){
     if(b1.getText()==b2.getText() && b2.getText()==b3.getText() && b1.getText()!=""){
         win = true;
     }else if(i==9 && win==false){
         JOptionPane.showMessageDialog(null,"Tie!","Game Over",JOptionPane.INFORMATION_MESSAGE);
     }else{
         win=false;
     }      
     ifWin(win); 
 }
 //if there is a winner
 public void ifWin(boolean w){
     if(w==true){
        JOptionPane.showMessageDialog(null,"WIN!","Game Over",JOptionPane.INFORMATION_MESSAGE);
        TicTacToe restart = new TicTacToe();
        restart.validate();
     }else{
         System.out.println("The game is still on!");
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:30:23.397

似乎您拥有的唯一状态是按钮上的文本。因此，要重新启动游戏，您只需要设置空文本（初始文本是什么？）并启用按钮。像这样的东西：

```
JButton buttons[] = {b1, b2, b3, b4, b5, b6, b7, b8, b9};
for (JButton button : buttons) {
    button.setText("");
    button.setEnabled(true);
} 
```

一些附加说明：

`if`您方法中的所有`actionPerformed`内容都可以替换为：

```
JButton button = (JButtton) e.getSource();
button.setText("x");
button.setEnabled(false); 
```

此外，**使用**`==`. 因此，我建议您将所有内容替换`b1.getText() == b2.getText()`为`b1.getText().equals(b2.getText())`. 请参阅[此](http://blog.enrii.com/2006/03/15/java-string-equality-common-mistake/)链接。

# css - 固定元素对齐以始终粘在屏幕底部

> ID：11817097
> 
> 赞同：2
> 
> 时间：2012-08-05T14:10:14.803
> 
> 标签：css, css-float

我有一个固定元素，它是一个带有几个链接的小菜单，它们会在页面上跟随您。

我正在使用 Squarespace 并使用链接制作一个新的小部件。在 CSS 中，我输入了以下代码：

```
#moduleContent18520661 { 
    position:fixed  !important;
    margin: auto;
    top:700px;
    left:400px;
    cursor:hand;
    background:#efefef;
    border:1px solid #ffcc00;
    width:480px;
    z-index:100;
} 
```

只有当我在我的电脑上对齐它时它才能完美运行。当我在笔记本电脑上查看时，它太低了。

无论屏幕大小如何，如何将元素固定在屏幕底部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T14:15:06.140

如果您正在使用`position: fixed`，您可以明确定位到屏幕的底部或任何其他侧：

```
#moduleContent18520661 {
    position: fixed;
    bottom: 0; /* the bottom edge of the element will
                  sit against the bottom edge of the window */
    /* other stuff */
} 
```

只需删除`top`声明并替换为您希望元素底部边缘与窗口底部边缘保持的距离。

此外，`cursor`应该`cursor: pointer;` *或者*应该`cursor: pointer;`遵循`cursor: hand;`，因为那是一个纯粹的 IE 6（如果我没记错的话）专有的 CSS 属性值。

# javascript - MVC 3 - 在客户端将非必填字段设置为必填

> ID：11817102
> 
> 赞同：2
> 
> 时间：2012-08-05T14:11:12.693
> 
> 标签：javascript, jquery, asp.net-mvc-3, asp.net-mvc-validation

我正在构建一个 MVC 3 应用程序。

我可以在客户端（使用 JavaScript / jQuery）将非必填字段设置为必填吗？

当页面中的事情发生变化时，我需要它是动态的。

更新：我查看了我的页面的源代码，并看到了将验证规则推入其中的 window.mvcClientValidationMetadata 数组。我可以用它来满足我的需要吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:15:36.277

你可以在客户端做任何你想做的事情。

您可以连接到表单提交事件并在其中检查该字段是否已填写，并根据需要提交表单或显示错误消息。

当然，如果 JavaScript 被关闭或者如果用户足够了解这个字段可能最终不会被填写，所以总是在服务器端检查（除了`Model.IsValid`，你可以添加对你没有特别添加`RequiredAttribute`到的字段的检查） .

如果您的验证逻辑很复杂，另一种选择是覆盖[`ModelMetadata`](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelmetadata.aspx)以提供自定义验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:07:26.367

您可以像这样设置验证规则：

```
$('element').rules('add',{
    required: true
}); 
```

并删除它：

```
$('element').rules('remove', 'required'); 
```

或者，您可以添加有条件地需要值的自定义验证方法。看到这个：[http ://docs.jquery.com/Plugins/Validation/Validator/addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)

# java - android json添加超链接到文本

> ID：11817111
> 
> 赞同：0
> 
> 时间：2012-08-05T14:12:56.997
> 
> 标签：java, android, json

这是我的 json 输出示例：

```
{"podcast":[{"link":"rtsp:\\live.xxx.ro:554\vod\_definst_\mp4:05\rfm_00.mp4","name":"Recording 1"} 
```

为了解析 json 代码，我使用这个：

```
private static final String TAG_LINK = "link";
        private static final String TAG_NAME = "name";
try {
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1) {
                        products = json.getJSONArray(TAG_PRODUCTS);
                        for (int i = 0; i < products.length(); i++) {
                            JSONObject c = products.getJSONObject(i);
                            String link = c.getString(TAG_LINK);
                            String name = c.getString(TAG_NAME);
                            HashMap<String, String> map = new HashMap<String, String>();
                            map.put(TAG_LINK, link);
                            map.put(TAG_NAME, name);
                            productsList.add(map);
                        }
                    } else {

                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

                return null;
            }

            protected void onPostExecute(String file_url) {
                pDialog.dismiss();
                runOnUiThread(new Runnable() {
                    public void run() {
                        ListAdapter adapter = new SimpleAdapter(
                                PodCast.this, productsList,
                                R.layout.list_item, new String[] {
                                        TAG_NAME, TAG_LINK },
                                new int[] { R.id.link, R.id.name });
                        setListAdapter(adapter);
                    }
                }); 
```

对于布局，这是链接视图的代码：

```
<TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:paddingBottom="6dip"
        android:textSize="17dip"
        android:autoLink="web"
        android:textColor="#fff"
        android:textColorLink="#fff"
        android:textStyle="bold"/> 
```

一切正常...但在链接视图中，我得到了整个链接 rtsp://live.xxx.ro...等，我想成为这样的东西： `<a href="rtsp://...">NAME </a>`所以我会有名字，当我点击它时打开指定的链接。各位大佬能帮我看看怎么弄吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:17:09.123

简单的...

```
String href = String.format("<a href=\"%s\"> %s </a>", map.get(TAG_LINK), map.get(TAG_NAME));
textV.setText(Html.fromHTML(href)) 
```

或者，如果您有一个链接作为资源字符串；只需确保保留的 HTML 字符未转换为 HTML 实体即可。

一个解析不正确的例子：

```
<string name="a_link">&lt;a href=&quot;http://www.google.com&quot;&gt;click here&lt;/a&gt;</string> 
```

要修复它，`strings.xml`手动编辑并将 HTML 实体转换为它们所代表的字符，这样上面就变成了：

```
<string name="a_link"><a href="http://www.google.com">click here</a></string> 
```

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:28:47.260

您需要设置一个函数 setOnItemClickListener() 并在其中声明如下内容：

```
Uri uri = Uri.parse( "http://www.google.com" );
startActivity( new Intent( Intent.ACTION_VIEW, uri ) ); 
```

# ruby-on-rails - 跨向导的 A/B 测试，如页面流

> ID：11817112
> 
> 赞同：1
> 
> 时间：2012-08-05T14:12:58.490
> 
> 标签：ruby-on-rails, ab-testing

我经营这个网站[http://www.gipote.dk](http://www.gipote.dk)，用户可以在其中制作广告来销售狗、小狗和宠物设备。

广告创建过程是跨多个页面的类似向导的流程。

我想以多种方式更改此向导 - 不仅仅是内容，还有页面的顺序 - 并希望对输出结果进行 A/B 测试。

流程可能会产生以下结果之一：

*   没有创建广告（用户中止 - 我们不喜欢这样...... ;-)
*   创建“标准广告”
*   创建了“银牌广告”
*   创建“黄金广告”

由于我们已经使用 Google Analytics，我考虑使用他们的“内容实验”模块进行此测试，但它似乎一次只测试 1 个页面的内容。

关于如何实现这一点的任何想法？在 GA 中还是使用其他工具？

奖励信息：该站点是在 Rails 3.0 中创建的

我**将**能够根据创建的广告类型将用户发送到不同的结束页面 URL。

起始网址可能是：

**www.gipote.dk/annonce/new**（这是当前版本）

**www.gipote.dk/annonce2/new**（新版本——一个全新的控制器）

/ 卡斯滕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:26:17.940

有一些宝石可以让你轻松做到这一点。请参阅 Ryan Bates 关于 Split 和 A/Bingo 的截屏视频。

链接： [http ://railscasts.com/episodes/214-ab-testing-with-a-bingo](http://railscasts.com/episodes/214-a-b-testing-with-a-bingo)

和

[http://railscasts.com/episodes/331-ab-testing-with-split](http://railscasts.com/episodes/331-a-b-testing-with-split)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-03T18:52:41.337

我刚刚开源了与 Rails 的 Google Analytics Experiments API 的集成。看看 - 希望它会做你需要的。它确实通过使用 Rails.cache 将用户保持在一个持久组中。

[https://github.com/dlangevin/gxapi_rails](https://github.com/dlangevin/gxapi_rails)

# javascript - 如何使用从 html 文件中获取的两个参数编写 AJAX GET 请求？

> ID：11817127
> 
> 赞同：1
> 
> 时间：2012-08-05T14:14:27.383
> 
> 标签：javascript, html, ajax

我有以下 HTML 元素，我需要将其值插入数据库。

```
<p>You scored :: </p><p id="txtScore1"></p>
<input type="text" placeholder="Your Name" id="name"> 
```

这是 W3schools 网站上建议的示例 javascript 代码以完成任务。

```
xmlhttp.open("GET","demo_get2.asp?fname=Henry&lname=Ford",true);
xmlhttp.send(); 
```

所以我在我的 javascript 文件中尝试了以下几行：

```
xmlhttp.open("GET","insert.php?q=&name=" + encodeURIComponent(document.getElementById('name').value + "&txtScore1=" + encodeURIComponent(document.getElementById('txtScore1').innerHTML),true);
xmlhttp.send(); 
```

它不起作用，并且在 chrome 控制台中，错误显示为**未捕获的语法错误。意外标识符（重复两次）。**

你能建议我正在做的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T14:20:27.727

这是一个语法错误。

```
xmlhttp.open("GET","insert.php?q=&name=" + encodeURIComponent(document.getElementById('name').value + "&txtScore1=" + encodeURIComponent(document.getElementById('txtScore1').innerHTML),true); 
```

应该

```
xmlhttp.open("GET","insert.php?q=&name=" + encodeURIComponent(document.getElementById('name').value) + "&txtScore1=" + encodeURIComponent(document.getElementById('txtScore1').innerHTML),true);
//                                                                                                 ↑
//                                                                                        Added parenthesis 
```

# c++ - 使用 write() 复制二进制文件，复制文件的大小增加

> ID：11817129
> 
> 赞同：0
> 
> 时间：2012-08-05T14:14:44.550
> 
> 标签：c++, binaryfiles

```
#include<fstream.h>
#include<conio.h>
#include<alloc.h>

class profile
{
   public: char *copyBytes;
}p;

void main()
{
   unsigned int size;

   fstream file ("file.mp3", ios::binary | ios::in | ios::out);
   fstream copy ("copy.mp3", ios::binary | ios::in | ios::out);
   file.seekg(0, ios::end);
   size=file.tellg();
   file.seekg(0);

   while(!file.eof())
   {
    p.copyBytes=(char*)malloc(size);
    file.read((char*)p.copyBytes, size);
    copy.write((char*)p.copyBytes, size);
    free(p.copyBytes);
   }

   file.close();

} 
```

该程序会复制二进制文件 file.mp3。原始二进制文件 (file.mp3) 为 2.13 MB，复制文件 (copy.mp3) 为 2.14 MB。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T14:22:00.440

1.  你永远不想使用看起来像`while (!file.eof())`. 相反，检查读取操作是否成功，例如：

    ```
    while (file.read(....)) 
    ```

    eof 标志可能仅由下一次读取操作设置，因此在读取之前检查它是没有帮助的。

2.  您总是将完整的缓冲区写入输出文件，但`read`可能只读取缓冲区的一部分。用于`file.gcount()`查看读取了多少字节。

请注意，缓冲区大小不需要与文件大小相同 - 这不适用于不适合内存的文件。您可以简单地使用恒定大小的缓冲区。循环将负责复制整个文件。

# database - 我可以在谷歌应用引擎上创建一个用户数据库，我可以在其中使用 java 存储用户详细信息

> ID：11817131
> 
> 赞同：0
> 
> 时间：2012-08-05T14:15:00.503
> 
> 标签：database, google-app-engine

我是谷歌应用引擎的新手。我想开发一种用户可以登录的应用程序，并且应用程序可以将数据存储在数据存储上。我可以在谷歌应用引擎上创建一个用户数据库，我可以在其中使用 java 存储用户详细信息吗？我知道如何使用没有数据存储的 Eclipse IDE 创建一个简单的页面。我在谷歌上搜索了很多，但只找到一个链接（[https://developers.google.com/appengine/docs/java/datastore/](https://developers.google.com/appengine/docs/java/datastore/) ）

如果你给我一些示例代码链接对我有好处

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:09:18.093

你能更具体一点吗？

您有两种存储数据的选择：数据存储或 Google Cloud SQL。在这两种情况下，您都可以存储您喜欢的任何信息。

如果您是 Google App Engine 的新手，最好阅读这篇文章：[Objectify](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify)

Objectify 是一个框架，可用于将数据存储在数据存储中。它非常易于使用，有据可查，并且有一个非常好的用户社区。

# python - 如何将事件/挂钩附加到我的 Bottle 应用收到的所有请求？

> ID：11817134
> 
> 赞同：4
> 
> 时间：2012-08-05T14:15:18.883
> 
> 标签：python, bottle

我想在每次请求后简单地打印几个换行符（当我的应用程序配置为详细时），以便我可以在控制台中轻松地将它们分开。例如，我当前的详细输出看起来像这样（实际应用程序中有更多的调试打印行）：

```
### webserver->check_login: 在 127.0.0.1 检查客户端的会话 cookie
### webserver->check_login: 凭证 cookie 有效，客户端已登录
### webserver->render_secure_page：渲染“dashboard.html”
127.0.0.1 - - [05/Aug/2012 15:50:06] “GET /dashboard HTTP/1.1”200 1728
### webserver->check_login: 在 127.0.0.1 检查客户端的会话 cookie
### webserver->check_login: 凭证 cookie 有效，客户端已登录
### webserver->render_secure_page：渲染“dashboard.html”
127.0.0.1 - - [05/Aug/2012 15:50:06] “GET /dashboard HTTP/1.1”200 1728
### webserver->check_login: 在 127.0.0.1 检查客户端的会话 cookie
### webserver->check_login: 凭证 cookie 有效，客户端已登录
### webserver->render_secure_page：渲染“dashboard.html”
127.0.0.1 - - [05/Aug/2012 15:50:06] “GET /dashboard HTTP/1.1”200 1728

```

我希望它看起来像这样：

```
### webserver->check_login: 在 127.0.0.1 检查客户端的会话 cookie
### webserver->check_login: 凭证 cookie 有效，客户端已登录
### webserver->render_secure_page：渲染“dashboard.html”
127.0.0.1 - - [05/Aug/2012 15:50:06] “GET /dashboard HTTP/1.1”200 1728

### webserver->check_login: 在 127.0.0.1 检查客户端的会话 cookie
### webserver->check_login: 凭证 cookie 有效，客户端已登录
### webserver->render_secure_page：渲染“dashboard.html”
127.0.0.1 - - [05/Aug/2012 15:50:06] “GET /dashboard HTTP/1.1”200 1728

### webserver->check_login: 在 127.0.0.1 检查客户端的会话 cookie
### webserver->check_login: 凭证 cookie 有效，客户端已登录
### webserver->render_secure_page：渲染“dashboard.html”
127.0.0.1 - - [05/Aug/2012 15:50:06] “GET /dashboard HTTP/1.1”200 1728

```

无需在我所有 100 多个视图中手动添加打印。

这可以做到吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T15:44:04.720

为了快速破解，您可以使用[hooks 插件](http://bottlepy.org/docs/dev/recipes.html#using-the-hooks-plugin)。

```
from bottle import hook

@hook('after_request')
def separator():
    print 3 * "\n", 
```

# c# - XNA 图形设备 WinForm

> ID：11817137
> 
> 赞同：0
> 
> 时间：2012-08-05T14:15:44.550
> 
> 标签：c#, xna

我正在为只允许 DDS 图像文件的游戏引擎制作 GUI 编辑器。我没有找到任何加载 DDS 文件的 WinForm 方法，所以我查看了 XNA 路由。我找到了一个使用 XNA 将 DDS 文件加载到 Texture2D 类型的 DDSLib。然后我想我可以将它们保存在内存中作为位图并在我的 WinForm 中使用它们。但是，这需要一个图形设备对象。如何在没有任何视觉效果的情况下获得此图形设备对象。我看到的所有内容都显示了控件，如果您想显示某些内容，这很有意义，但在我的情况下，我只需要它在幕后进行这些转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:23:25.137

这可能不是一个优雅的解决方案，但您可以将 winform 中的 XNA 框架设置为不可见？

**编辑：**

刚刚发现：[如何将 .dds 文件加载到图片框中？](https://stackoverflow.com/questions/865413/how-to-load-dds-files-into-a-picturebox)

# c# - VS 资源编辑器失败并显示“无法解析目标框架的 mscorlib '.NETFramework,Version=v4.0'

> ID：11817141
> 
> 赞同：0
> 
> 时间：2012-08-05T14:16:13.530
> 
> 标签：c#, visual-studio-2010, resources

> **可能重复：**
> [Visual Studio 2010：无法解析目标框架“.NETFramework,Version=v4.0”的 mscorlib](https://stackoverflow.com/questions/5498624/visual-studio-2010-could-not-resolve-mscorlib-for-target-framework-netframewo)

我有一个 C# 项目，其中包含 Resources.resx 中的一些资源。当我在 VS2010 中打开此文件时，出现错误：

`Could not resolve mscorlib for target framework '.NETFramework,Version=v4.0'. This can happen if the target framework is not installed or if the framework moniker is incorrectly formatted.`

*   项目编译并运行良好——只有 VS 编辑器坏了。
*   安装了VS2010，也就是安装了.NET4。
*   团队中的每个人都会发生这种情况，因此并不是单台机器的 .NET 安装出错。
*   .csproj 包含`<TargetFrameworkVersion>v4.0</TargetFrameworkVersion>`.
*   [可能是一个太长的路径](http://wcfvs.blogspot.co.uk/2011/04/could-not-resolve-mscorlib-for-target.html)，但最长的构建文件有 139 个字符的完整路径，这听起来并不多。

我该如何摆脱这个错误？

# javascript - 使用 jQuery.each() 遍历两个数组？

> ID：11817145
> 
> 赞同：9
> 
> 时间：2012-08-05T14:16:47.553
> 
> 标签：javascript, jquery

如何通过一次调用 jQuery 来迭代两个数组`.each()`？

这样的事情显然行不通：

```
$.each(arr1, arr2, function(i,v){
  //do something...
}); 
```

那么如何做到这一点呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T14:20:55.823

替代方法`.concat`是 double `$.each`：

```
$.each([arr1, arr2], function() {
    $.each(this, function(i, v) {
        // do something
    });
}); 
```

如果数组包含很多项目，这可能会更快。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T14:17:43.927

> @PPvG 这是我的代码，我得到了两个数组，每个数组都包含几个单词，并且使用 $.each() 我想将它们附加到`<p>`标签 arr1 和 arr2 中。arr1 first arr2 secondo 的内容不管顺序。– 山姆 4 秒前

您可以将[`.concat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)它们用于迭代：

```
$.each(arr1.concat(arr2), function(i,v){
  //do something...
}); 
```

演示：http: [//jsfiddle.net/ZG4wq/2/](http://jsfiddle.net/ZG4wq/2/)

# eclipse - GWT JUnit 尝试联系错误的 IP 地址

> ID：11817146
> 
> 赞同：2
> 
> 时间：2012-08-05T14:17:06.290
> 
> 标签：eclipse, gwt, junit4

我正在尝试在 eclipse Juno 中运行 GWT Junit 测试（右键单击测试用例文件并“作为 GWT JUnit 测试用例运行”）。但是，JUnit 失败并出现异常，说连接在我的客户端计算机以外的 IP 地址上被拒绝。

（我在 URL 中手动插入了一个额外的空格，以避免由于 URL 错误而导致 stackoverflow 阻塞帖子）。

> 在浏览器 FF3 上启动[http://192.168.1.234:46278/org.me.MyProject.JUnit/junit-standards.html?gwt.codesvr=192.168.1.234:46971](http://192.168.1.234:46278/org.me.MyProject.JUnit/junit-standards.html?gwt.codesvr=192.168.1.234:46971)
> 
> 记录 HtmlUnit 线程
> 
> [错误] HTTP 请求的 I/O 错误
> 
> org.apache.http.conn.HttpHostConnectException：连接到[http://192.168.1.234:46278](http://192.168.1.234:46278)被拒绝

我的机器的IP地址是192.168.1.3。我不知道eclipse从哪里获得了另一个IP。eclipse 在哪里得到错误的地址，我该如何更改它，最好是 127.0.0.1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:15:55.587

上述问题的答案是涉及配置错误的 DNS 服务器。Eclipse 读取机器的主机名并将其解析为错误的 IP 号。

# node.js - NodeJS - MongoDB 触发器

> ID：11817149
> 
> 赞同：3
> 
> 时间：2012-08-05T14:17:18.320
> 
> 标签：node.js, mongodb, derbyjs

我正在尝试使用 DerbyJS、Racer 和 MongoDB 开发日志查看器。日志将由不同的来源连续插入到 MongoDB 数据库中，我的日志查看器应该能够自动更新用户界面上的日志表。

我想知道是否有监听 MongoDB 事件的本机方式，例如：

```
 - On update
 - On delete 
```

例如，这些将类似于 Oracle DB 触发器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T11:20:35.080

您可以使用名为`insert`. 您只需要使用或在您的数据库实例上启用复制。`update``oplog``mongod --master``mongod --replicaSet`

Oplog 实际上是一个 capped 集合，mongodb 内部使用它来实现复制。如果您使用主/从复制，您将找到名称为 的集合`oplog.$main`，如果您使用的是副本集，它将被命名为`oplog.rs`。

您可以在 oplog 上使用可尾光标，这应该可以工作。

Oplog 实际上就是日志本身。因此，您可能不需要单独存储它们以用于记录目的。但是它的大小是固定的。这意味着当其完整的旧数据被删除时。

### 还要确保您正在查看**`local`**数据库，这就是维护 oplog 的地方

[这是来自mongoskin wiki 页面](https://github.com/kissjs/node-mongoskin/wiki/Using-tailable-cursors)的一个工作示例

```
skin = require "mongoskin"
db = skin.db "localhost:27017/local"

#//Cursor on oplog (a capped collection) which maintains a history for replication
#//oplog can be used only when replication is enabled
#//Use oplog.rs instead of oplog.$main if you are using replica set

oplog = db.collection "oplog.$main"
cursor = oplog.find({'ns': "icanvc.projects"},{tailable: yes, awaitData: yes})

#//Using cursor.nextObject will be slow
cursor.each (err, log)->
    console.error err if err
    console.log log if not err 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T14:38:07.740

日志查看器应用程序的典型方法是使用带有上限的日志条目[集合的可](http://www.mongodb.org/display/DOCS/Capped+Collections)[尾游标。](http://www.mongodb.org/display/DOCS/Tailable+Cursors)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T14:32:26.370

不，[https://jira.mongodb.org/browse/SERVER-124](https://jira.mongodb.org/browse/SERVER-124)它必须是应用程序端。

我不确定 node.js 是否在其驱动程序中内置了 MongoDB 触发器，但很可能没有，因此您需要自己编写代码。

# python - 线程中的子进程。线程挂起

> ID：11817156
> 
> 赞同：1
> 
> 时间：2012-08-05T14:19:20.363
> 
> 标签：python, multithreading, apache, cgi, subprocess

我不明白为什么下面的代码会挂起。当我从控制台运行它时，一切都很好，但是当我尝试通过浏览器运行它时，页面挂起。我正在使用 Python 2.7.2。

```
class MyThread(threading.Thread):
    def __init__(self):
        self.stdout = None
        self.stderr = None
        threading.Thread.__init__(self, name="snapshot",)

    def run(self):
        p = subprocess.Popen(["pwd"], shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=None)
        p.communicate()

myThread = MyThread()
myThread.start()
myThread.join() 
```

**更新** 我正在使用 Apache 作为 CGI 运行 Python。运行的系统是 Gentoo 2.1。

我认为问题出在Apache。不知何故，它阻塞了新线程，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:01:18.570

尝试使用`shell=False`.

我怀疑当您在 Web 框架中运行此代码时，您实际上并没有 shell，这会导致问题。

或者，您不能重用`stdout`和`stdin`从您的 Web 服务器进程，并且尝试这样做`subprocess.PIPE`会导致事情挂起。

我假设您实际上并不需要运行`pwd`，并且只是将其用作示例，但是如果您真的只需要，`pwd`这是一种不必要的复杂方法。只需将其替换为`os.curdir`属性即可。

# php - 在php中提交表单后如何查看jquery成功消息？

> ID：11817160
> 
> 赞同：0
> 
> 时间：2012-08-05T14:19:40.453
> 
> 标签：php, javascript, jquery

我想在 php 中提交表单后查看 jquery 成功消息。我尝试了以下代码。但它没有出现。但是当我在 html 中对其进行编码时，它正在工作。但它不是在提交后。我怎样才能实现它？

这是我在 php 中的 javascript 代码

```
 <?php
         if(isset($_POST['aaa']) and $_POST['aaa']=="Submit"){
    echo '<html>
    <style type="text/css" media="screen">
<!--
.container {width: 670px; margin: 10px auto;}
.messagebox {background-color: #F5F5F5;padding:5px;margin:10px 0px;border: 1px solid #DBDBDB;}
.errorbox {color:#000;background-color:#ffeded;padding:5px;margin:10px 0px;border:1px solid #f27c7c;}
.confirmbox {background-color:#F2FFDB;color:#151515;border:1px solid #9C6;margin:10px 0px;padding:5px;}
-->
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script >
<!--
$(document).ready(function() {
$("#messageBox").addClass("messagebox");setTimeout(function(){
$("#messageBox").fadeOut("slow")}, 4000);
});
function messagebox(){
$("#messageBox").removeClass().addClass("confirmbox").html("Item has been saved").fadeIn(2000).fadeOut(4000);
}
function alertbox(){
$("#messageBox").removeClass().addClass("errorbox").html("Oops, there was an error!").fadeIn(2000).fadeOut(4000);
}
-->

messagebox();
</script>
<body>
    <div class="messagebox" id="messageBox" style="display:none;"></div>
    </body>
    </html>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:27:40.193

您的代码有一些问题，但要回答您的问题，您需要使用[ajax](http://api.jquery.com/jQuery.ajax/)调用脚本并在回调函数中显示消息：

```
$.ajax({
  url: "test.php",
  data: data,
  success: function(message){
   //this will be called once the php has returned an answer
   $("#messageBox").removeClass().addClass("confirmbox").html(message).fadeIn(2000).fadeOut(4000);
   }
}) 
```

**PHP**

```
//after processing the data, echo a response:
echo "Message has been saved";

//if an error occured, echo it
echo "an error occured"; 
```

**更新：**

1.  不要在 PHP 回显中输出整个页面。只需关闭 php 标签并使用常规 HTML：

    ```
     <?php
         if(isset($_POST['aaa']) and $_POST['aaa']=="Submit"):?>

    <html>
      //regular html code goes here

    <?php endif;?> 
    ```

    [在这里](http://php.net/manual/en/control-structures.alternative-syntax.php)查看更多示例。

2.  您没有任何按钮或表单。你应该拥有的是这样的：

    ```
    <form action="myscript.php" method="post">
        <input name="email" type="text"/>
        //some more inputs
        <input value="Submit" type="submit"/>
     </form> 
    ```

3.  现在您可以将事件绑定到表单提交并调用 ajax：

    ```
    $('form').submit(function(){
    $.ajax({
      url: "test.php",
      data: $(this).serialize(),
      success: function(message){
               //this will be called once the php has returned an answer
      $("#messageBox")
        .removeClass()
        .addClass("confirmbox")
        .html(message) 
        .fadeIn(2000).fadeOut(4000);
       }
      })
     }); 
    ```

听起来你真的需要学习一些关于 web 开发的东西，我建议你从[这里](http://learncss.tutsplus.com/)开始，网上有很多很棒的资源。

# python - PyQt：导入 .xls 文件并填充 QTableWidget？

> ID：11817161
> 
> 赞同：1
> 
> 时间：2012-08-05T14:19:50.080
> 
> 标签：python, pyqt, xls, qtablewidget

如何使用 Python 和 PyQt 导入 .xls 文件，然后用其内容填充 QTableWidget？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:18:24.497

我[在这里](http://www.numbergrinder.com/2008/10/pulling-data-from-excel-using-python-xlrd/)和[这里使用](http://scienceoss.com/read-excel-files-from-python/)[xlrd](http://pypi.python.org/pypi/xlrd)来读取和写入 .xls 文件示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T10:43:26.727

试试我的图书馆`pyexcel`，

假设您有一个 csv、xls、xlsx 文件，如下所示：

```
1,2,3
4,5,6
7,8,9 
```

以下代码将为您提供 json 格式的数据

```
from pyexcel as pe
import json

# "example.xls", please import pyexel.ext.xls
# "example.xlsx", please import pyexcel.ext.xlsx
# "example.ods", please import pyexcel.ext.ods or pyexcel.ext.ods3
sheet= pe.load("example.csv")
print json.dumps(sheet.to_array()) 
```

输出是：

```
[[1, 2, 3], [4, 5, 6], [7, 8, 9]] 
```

您可以轻松地初始化`QTableWidiget(sheet.number_of_rows(), sheet.number_of_columns())`，然后用数组填充表格小部件，`data`.

更多代码示例可以在这个页面找到：[https ://github.com/chfw/pyexcel](https://github.com/chfw/pyexcel)

API 文档可以在这里找到：http: [//pyexcel.readthedocs.org/en/latest/api.html](http://pyexcel.readthedocs.org/en/latest/api.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:07:34.483

对于导入和读取 .xls 文件，我将从[xlutils](http://pypi.python.org/pypi/xlutils)开始，特别是 xlrd

# php - SublimeLinter：PHP linting 不起作用

> ID：11817164
> 
> 赞同：21
> 
> 时间：2012-08-05T14:20:29.600
> 
> 标签：php, sublimetext2

尽管在控制台中说， PHP linting 在[SublimeLinter](https://github.com/SublimeLinter/SublimeLinter)`PHP: loaded`中不起作用。我在 Windows 上工作。此外，如果我打开命令面板，除了`Extract Annotations`. 有没有人遇到同样的问题并知道解决方案？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-14T05:29:48.520

此外，请确保您在用户设置中提供了 php.exe 的路径 -

*   （首选项> pkg设置> sublimelinter>设置 - 用户）

*   应该是这样的（如果你的路径是“C:\xampp\php\php.exe”）：

{“sublimelinter”：真，“sublimelinter_executable_map”：{“php”：“/xampp/php/php.exe”}}

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-27T22:12:30.277

安装 sublimelint 包后，在 sublimeText 2 中的 MAC OS X 上

`cmd+shift+p`打开命令面板然后输入或选择`Preferences:SublimeLint - User`

这将打开设置文件

准确粘贴：

```
{
    "sublimelinter": true,
    "sublimelinter_executable_map":
 {
     "php":"/usr/bin/php"
 }
} 
```

保存文件并重新启动 sublime text 2\. 如果出现无法读取文件等错误，那是因为您输入了拼写错误。设置文件必须是格式正确的 json。

如果您有任何问题，请`which php`在终端中执行以确保 php 已安装`/usr/bin/php`并用命令为您提供的路径替换路径（`which`如果它不同）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-06T09:55:42.413

我只是有同样的问题。我的问题的原因是所有 PHP 文件都是用 HTML5 语法打开的。您可以通过在 SublimeText 控制台中粘贴以下命令来检查当前语法：

```
sublime.active_window().active_view().settings().get('syntax') 
```

要将 php 设置为当前文件类型的默认值，您可以转到：查看 > 语法 > 打开所有当前扩展名... > php

希望这可以帮助！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-04T18:39:02.003

我必须在我的用户设置中使用它：

```
{
    "sublimelinter": true,
    "sublimelinter_executable_map":
    { "php": "C:\\Program Files (x86)\\PHP\\v5.3\\php.exe"
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T14:14:57.360

对于我的 Windows，我不得不这样做：Windows 7 上的 php.exe 文件路径对我没有用，而 php-win.exe 做到了：

```
{
    "sublimelinter_executable_map":
    {
        "php":"C:/php/php-win.exe"
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-21T13:10:48.897

有时将 php 设置为`sublimlinter_executable_map`不起作用（对我来说）。对我来说，它只是将路径添加`php.exe`到 Windows 系统环境路径变量。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-25T21:18:43.990

我通过更改设置来解决这个问题（哪里是粗体），然后重新启动 sublime 并尝试这个 php 代码来查看 sublime linter 错误

```
<?php echo "hello linter"  ?> 
```

//不要在下一行php代码中看到红点的分号

只需更改如下设置

```
"linters": {
        "php": {
            "@disable": false,
            "args": [],
            "excludes": []
        },
        "phpcs": {
            "@disable": true,
            "args": [],
            "excludes": [],
            "standard": "PSR2"
        }
    },
    "mark_style": "solid underline",
    "no_column_highlights_line": false,
    "passive_warnings": true,
    "paths": {
        "linux": [],
        "osx": [],
        "windows": [
            "put your php path or path of php.exe D:/wamp/bin/php/php5.4.3/"
        ]
    }, 
```

这两个必须改变

```
"php": {
            "@disable": false,

        "phpcs": {
            "@disable": true, 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-26T21:55:12.840

对于 Windows，我做了这个并且它有效，使用 \\ 它应该可以工作！

```
{

  "sublimelinter_executable_map":
    {

        "php":"C:\\Users\\Wasil\\Documents\\BitNami\\php\\php-win.exe"
    }

} 
```

# linux - 无法通过 telnet 远程连接到 imap

> ID：11817167
> 
> 赞同：0
> 
> 时间：2012-08-05T14:21:00.370
> 
> 标签：linux, imap, ubuntu-12.04, dovecot

如果我尝试：

```
telnet localhost 143 
```

我可以访问 imap

如果我尝试

```
telnet server.name 143 
```

我明白了

```
telnet: Unable to connect to remote host: Connection timed out 
```

查看我的 netstat 的输出。

```
netstat --numeric-ports -l | grep 143

tcp        0      0 0.0.0.0:143             0.0.0.0:*               LISTEN     
tcp6       0      0 :::143                  :::*                    LISTEN 
```

上面的输出是什么意思？

我束手无策，无法让 imap 远程工作，与服务器上的 webmail 完美配合。

我正在从笔记本电脑终端远程访问服务器，并在本地访问本地主机连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:40:04.143

您引用的输出：

```
tcp        0      0 0.0.0.0:143             0.0.0.0:*               LISTEN     
tcp6       0      0 :::143                  :::*                    LISTEN 
```

意味着您有一个程序（可能是您的 imap 服务器）通过 tcp（在 IPv4 和 IPv6 上）侦听端口 143。而“0.0.0.0”部分意味着它应该接受来自任何来源的连接。（如果它说本地地址为“127.0.0.1:143”，则意味着只接受本地连接。）

因此，由于看起来您的 serer 监听正确，我首先检查 server.name 是否实际解析为正确的 IP 地址。您可以联系该服务器上的任何其他服务以确保该部分正常工作吗？

假设这可行，那么我要检查的下一件事就是您的防火墙。您可能会查看[http://www.cyberciti.biz/faq/howto-display-linux-iptables-loaded-rules/](http://www.cyberciti.biz/faq/howto-display-linux-iptables-loaded-rules/)但您可以从运行开始：

```
sudo iptables -L -v 
```

在我没有防火墙规则的机器上，我得到了这个：

```
$ sudo iptables -L -v
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination 
```

如果你得到一些不同的东西，我会仔细看看是否会阻塞你的流量。

# java - 如何检查 Java 是否安装在 Windows 上？

> ID：11817169
> 
> 赞同：-2
> 
> 时间：2012-08-05T14:21:36.750
> 
> 标签：java, delphi, delphi-xe2

如何检查，Java 是否安装在 Windows 系统上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T14:41:39.810

您可以从注册表中读取此内容。看看这个键：

```
HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment 
```

并读取名为的字符串值：

```
CurrentVersion 
```

此设置位于注册表的 32 位视图中，因此如果您构建 64 位代码，请确保包含该[`KEY_WOW64_32KEY`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724878.aspx)标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:09:03.160

一些可能有用的信息：

*   只需将 Java 运行时环境 (JRE) 复制到计算机即可安装（无需 Windows 系统条目）
*   电脑上可以同时有很多不同的JRE版本（很多商业应用都捆绑了​​自己的JRE）
*   您的 Delphi 应用程序可以检查系统路径中是否有 java.exe（因此避免扫描所有文件夹）
*   JAVA_HOME 环境变量通常指示 Java 开发工具包 (JDK) 的位置，但在典型安装中，JDK 目录还包含一个 JRE 文件夹

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T14:22:57.740

访问官方网站[http://www.java.com/en/download/testjava.jsp](http://www.java.com/en/download/testjava.jsp)并点击“测试当前安装的java版本”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T19:49:44.737

对于我的 Inno 设置，我检查了这个键：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Applications\javaw.exe 
```

如果我删除 JAVA，则密钥不再存在。

# google-maps - 从 Javascript 中选择 FusionTablesLayer 中的多边形

> ID：11817172
> 
> 赞同：0
> 
> 时间：2012-08-05T14:22:29.237
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

我的融合表有一张带有 FusionTablesLayer 的地图。生成的地图是一组彩色多边形。如果用户单击一个多边形，则与该多边形关联的数据以信息窗口的形式显示。我可以从 javascript 中选择一个特定的多边形而不是通过鼠标单击吗？例如，如果我有一个包含相同数据的图表，最好为当前图表选择更新地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:46:25.590

您还没有发布任何代码，所以这只是一个猜测。我的方法是：

1.  为 FT 中的每个多边形创建一个唯一键
2.  将这些键与您的图表或链接相关联
3.  创建一个特殊的 FT 层来处理具有独特颜色的突出显示
4.  对于图表或链接，单击使用唯一键为您的突出显示图层设置查询选项，以检索覆盖在现有多边形上的正确多边形，并使用您的唯一颜色。

# android - ImageView-getImageBitmap()？

> ID：11817176
> 
> 赞同：2
> 
> 时间：2012-08-05T14:22:57.277
> 
> 标签：android, android-imageview

我有一个带有预定义和XML 格式的**ImageView 。**`visibility = View.VISIBLE``width``height`

当我在我的代码中设置`ImageBitmap`时

```
someImageView.setImageBitmap(bitmap); 
```

我以后怎么知道是否已经定义了一些图像位图或者它仍然是空的（null）？

所以像`someImageView.getImageBitmap() == null`......我无法测试宽度、高度或可见性，因为它已经预定义了，如果有位图，它也是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T15:21:40.153

如果出现以下情况，您的 imageView 不包含位图：

```
imageView.getDrawable() == null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:51:28.760

试试这个：

```
try{
    bitmap = ((BitmapDrawable) someImageView.getDrawable()).getBitmap();

 //re-use bitmap somehow?
    }
catch(NullPointerException e){
//Bitmap dont exists

} 
```

# amazon-s3 - 如何备份或同步 Amazon S3 存储桶？

> ID：11817179
> 
> 赞同：22
> 
> 时间：2012-08-05T14:23:06.133
> 
> 标签：amazon-s3, backup

我在 Amazon S3 存储桶中有关键数据。我想每周将其其他内容备份到另一个云服务，甚至在 S3 内部。最好的方法是将我的存储桶同步到不同区域内的新存储桶，以防数据丢失。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-06T10:08:30.940

我更喜欢使用仅更新更改的同步在本地备份。这不是完美的备份解决方案，但您可以稍后根据需要实施定期更新：

```
s3cmd sync --delete-removed s3://your-bucket-name/ /path/to/myfolder/ 
```

如果您从未使用过 s3cmd，请使用以下命令安装和配置它：

```
pip install s3cmd
s3cmd --configure 
```

还应该有每月 5 美元的 S3 备份服务，但我还会检查 Amazon Glacier，如果您使用分段上传，它可以让您放置近 40 GB 的单个存档文件。

[http://docs.aws.amazon.com/amazonglacier/latest/dev/uploading-archive-mpu.html#qfacts](http://docs.aws.amazon.com/amazonglacier/latest/dev/uploading-archive-mpu.html#qfacts)

请记住，如果您的 S3 帐户遭到入侵，您可能会丢失所有数据，因为您会同步一个空文件夹或格式错误的文件。因此，您最好编写一个脚本来归档您的备份几次，例如通过检测一周的开始。

**2016 年 1 月 17 日更新：**

基于 Python 的 AWS CLI 现在非常成熟。

请使用：[https](https://github.com/aws/aws-cli)
://github.com/aws/aws-cli 示例：`aws s3 sync s3://mybucket .`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T18:20:47.710

此脚本备份 S3 存储桶：

```
#!/usr/bin/env python
from boto.s3.connection import S3Connection
import re
import datetime
import sys
import time

def main():
    s3_ID = sys.argv[1]
    s3_key = sys.argv[2]
    src_bucket_name = sys.argv[3]
    num_backup_buckets = sys.argv[4]
    connection = S3Connection(s3_ID, s3_key)
    delete_oldest_backup_buckets(connection, num_backup_buckets)
    backup(connection, src_bucket_name)

def delete_oldest_backup_buckets(connection, num_backup_buckets):
    """Deletes the oldest backup buckets such that only the newest NUM_BACKUP_BUCKETS - 1 buckets remain."""
    buckets = connection.get_all_buckets() # returns a list of bucket objects
    num_buckets = len(buckets)

    backup_bucket_names = []
    for bucket in buckets:
        if (re.search('backup-' + r'\d{4}-\d{2}-\d{2}' , bucket.name)):
            backup_bucket_names.append(bucket.name)

    backup_bucket_names.sort(key=lambda x: datetime.datetime.strptime(x[len('backup-'):17], '%Y-%m-%d').date())

    # The buckets are sorted latest to earliest, so we want to keep the last NUM_BACKUP_BUCKETS - 1
    delete = len(backup_bucket_names) - (int(num_backup_buckets) - 1)
    if delete <= 0:
        return

    for i in range(0, delete):
        print 'Deleting the backup bucket, ' + backup_bucket_names[i]
        connection.delete_bucket(backup_bucket_names[i])

def backup(connection, src_bucket_name):
    now = datetime.datetime.now()
    # the month and day must be zero-filled
    new_backup_bucket_name = 'backup-' + str('%02d' % now.year) + '-' + str('%02d' % now.month) + '-' + str(now.day);
    print "Creating new bucket " + new_backup_bucket_name
    new_backup_bucket = connection.create_bucket(new_backup_bucket_name)
    copy_bucket(src_bucket_name, new_backup_bucket_name, connection)

def copy_bucket(src_bucket_name, dst_bucket_name, connection, maximum_keys = 100):
    src_bucket = connection.get_bucket(src_bucket_name);
    dst_bucket = connection.get_bucket(dst_bucket_name);

    result_marker = ''
    while True:
        keys = src_bucket.get_all_keys(max_keys = maximum_keys, marker = result_marker)

        for k in keys:
            print 'Copying ' + k.key + ' from ' + src_bucket_name + ' to ' + dst_bucket_name

            t0 = time.clock()
            dst_bucket.copy_key(k.key, src_bucket_name, k.key)
            print time.clock() - t0, ' seconds'

        if len(keys) < maximum_keys:
            print 'Done backing up.'
            break

        result_marker = keys[maximum_keys - 1].key

if  __name__ =='__main__':main() 
```

我在 rake 任务中使用它（对于 Rails 应用程序）：

```
desc "Back up a file onto S3"
task :backup do
     S3ID = "AKIAJM3FAKEFAKENRWVQ"
     S3KEY = "0A5kuzV+F1pbaMjZxHQAZfakedeJd0dfakeNpry"
     SRCBUCKET = "primary-mzgd"
     NUM_BACKUP_BUCKETS = 2

     Dir.chdir("#{Rails.root}/lib/tasks")
     system "./do_backup.py #{S3ID} #{S3KEY} #{SRCBUCKET} #{NUM_BACKUP_BUCKETS}"
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-11T14:16:35.570

AWS CLI 现在支持这一点。

`aws s3 cp s3://first-bucket-name s3://second-bucket-name --recursive`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-01T19:31:58.987

我过去曾尝试过这样做，但仍然非常困难，尤其是对于大型、多 GB、数百万个文件的存储桶。我找到的最好的解决方案是[S3S3Mirror](https://github.com/cobbzilla/s3s3mirror)，它正是为此目的而设计的。

这并不像拨动开关那么简单，但它仍然比我尝试过的大多数其他 DIY 解决方案要好。它是多线程的，并且比类似的单线程方法复制文件要快得多。

一个建议：在一个单独的 EC2 实例上设置它，一旦你运行它，只需关闭该机器，但将 AMI 留在那里。然后，当您需要重新运行时，再次启动机器，一切就绪。这远不如真正的自动化解决方案好，但可以管理每月或每周备份。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-04T19:14:20.023

> 最好的方法是让我的存储桶与不同区域的新存储桶同步，以防数据丢失。

截至[2015 年 3 月 24 日](https://aws.amazon.com/blogs/aws/new-cross-region-replication-for-amazon-s3/)，这可以使用 S3 的[跨区域复制](https://docs.aws.amazon.com/AmazonS3/latest/dev/crr.html)功能。

列出[的用例场景](https://docs.aws.amazon.com/AmazonS3/latest/dev/crr.html#crr-scenario)之一是“合规要求”，它似乎与您为关键数据增加保护以防止数据丢失的用例相匹配：

> 尽管默认情况下，Amazon S3 将您的数据存储在多个地理位置相距遥远的可用区，但合规性要求可能会要求您将数据存储在更远的距离。跨区域复制允许您在遥远的 AWS 区域之间复制数据以满足这些合规性要求。

有关设置说明，请参阅[如何设置跨区域复制](https://docs.aws.amazon.com/AmazonS3/latest/dev/crr-how-setup.html)。

# python - 使用 Flask 上传多个文件

> ID：11817182
> 
> 赞同：67
> 
> 时间：2012-08-05T14:23:46.450
> 
> 标签：python, file-upload, flask

有没有办法用 Flask 接收多个上传的文件？我尝试了以下方法：

```
<form method="POST" enctype="multipart/form-data" action="/upload">
  <input type="file" name="file[]" multiple="">
  <input type="submit" value="add">
</form> 
```

然后打印以下内容`request.files['file']`：

```
@app.route('/upload', methods=['POST'])
def upload():
  if not _upload_dir:
    raise ValueError('Uploads are disabled.')

  uploaded_file = flask.request.files['file']
  print uploaded_file
  media.add_for_upload(uploaded_file, _upload_dir)
  return flask.redirect(flask.url_for('_main')) 
```

如果我上传多个文件，它只会打印集合中的第一个文件：

```
<FileStorage: u'test_file.mp3' ('audio/mp3')> 
```

有没有办法使用 Flask 的内置上传处理接收多个文件？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-08-05T14:41:55.477

您可以使用[flask.request.files](http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.MultiDict.getlist)的[getlist](http://flask.pocoo.org/docs/api/#flask.Request.files)方法，例如：

```
@app.route("/upload", methods=["POST"])
def upload():
    uploaded_files = flask.request.files.getlist("file[]")
    print uploaded_files
    return "" 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-07-26T13:00:52.593

```
@app.route('/upload', methods=['GET','POST'])
def upload():
    if flask.request.method == "POST":
        files = flask.request.files.getlist("file")
        for file in files:
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], file.filename)) 
```

这个对我有用。

对于 UPLOAD_FOLDER，如果您需要在 app = flask.Flask( **name** )之后添加它

```
UPLOAD_FOLDER = 'static/upload'
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-09-28T15:25:20.040

使用 Flask 1.0.2+：

```
files = request.files.getlist("images") 
```

`images`键/值对的键在哪里。值是多个图像。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-08-28T19:41:14.853

这是烧瓶版本“1.0.2”的工作解决方案：

```
images = request.files.to_dict() #convert multidict to dict
for image in images:     #image will be the key 
    print(images[image])        #this line will print value for the image key
    file_name = images[image].filename
    images[image].save(some_destination) 
```

基本上，images[image] 有一个添加了保存功能的图像文件现在对数据做任何你喜欢做的事情。

# java - 从 weblogic jaas 模块中的主题得到的原则

> ID：11817184
> 
> 赞同：0
> 
> 时间：2012-08-05T14:23:52.967
> 
> 标签：java, weblogic, jaas

我在 unix 机器和 Weblogic 10.3.4 上运行 EJB3.0 应用程序。

我已经使用连接到 Oracle DB 的 SQLProvider 配置了一个安全领域。
在域中，我们有两个提供程序：weblogic 默认提供程序和我们创建的 costome 提供程序。登录后，我为每个用户的主题添加了两条服装原则。

问题来了：在我登录到应用程序后，我添加的服装原则在看似随机的时间从主题中消失了，通过我的服装提供者连接的用户也消失了，并返回到默认的 weblogic 用户. 更奇怪的是，有时（再次，看似随机的时间）服装原则和登录用户返回主题，而用户没有任何操作（例如，没有重新登录）。服装原则对我的申请至关重要。

为什么会这样？我该如何解决这个问题？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:00:33.473

我发现了问题 - 显然，在 weblogic 中，上下文绑定到线程。在我的应用程序中，我使用 SwingWorker 来执行对服务器的调用（在拦截器中）。SwingWorker 有一个线程池，所以有时池中的线程没有分配上下文，调用失败。

# c# - 验证 Excel 工作表名称

> ID：11817186
> 
> 赞同：2
> 
> 时间：2012-08-05T14:24:00.137
> 
> 标签：c#, regex, excel

动态设置工作表名称时出现以下错误。有没有人在设置名称之前有正则表达式来验证名称？

*   您键入的名称不超过 31 个字符。这个名字确实
*   不包含以下任何字符： : \ / ? * [ 或者 ]
*   您没有将名称留空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T14:38:05.500

您可以使用该方法检查工作表名称是否有效

```
private bool IsSheetNameValid(string sheetName)
{
    if (string.IsNullOrEmpty(sheetName))
    {
        return false;
    }

    if (sheetName.Length > 31)
    {
        return false;
    }

    char[] invalidChars = new char[] {':', '\\',  '/',  '?',  '*', '[', ']'};
    if (invalidChars.Any(sheetName.Contains))
    {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T15:45:59.623

让我们匹配字符串的开头，然后是 1 到 31 个不在禁止列表中的事物，然后是字符串的结尾。要求至少一个意味着我们拒绝空字符串：

```
^[^\/\\\?\*\[\]]{1,31}$ 
```

这个正则表达式至少会遗漏一个细微差别：这将接受一系列空格、制表符和换行符，如果认为它是空白的（可能是这样），这将是一个问题。

如果您从正则表达式中取出长度检查，那么您可以通过执行以下操作来进行空白检查：

```
^[^\/\\\?\*\[\]]*[^ \t\/\\\?\*\[\]][^\/\\\?\*\[\]]*$ 
```

这是如何运作的？如果我们将上面的类定义为 WORKSHEET，那将是：

```
^[^WORKSHEET]*[^\sWORKSHEET][^WORKSHEET]*$ 
```

所以我们匹配一个或多个非禁止字符，然后是一个既不是禁止也不是空格的字符，然后是零个或多个非禁止字符。关键是我们要求中间部分至少有一个非空白字符。

但是我们丢失了长度检查。很难在一个表达式中同时进行长度检查和正则表达式。为了计算，我们必须根据匹配`n`时间来表述事物，并且必须知道被匹配的事物的长度为 1。但是为了允许自由放置空格 - 只要它不是全是空格 -我们需要匹配的一部分不一定长度为 1。

嗯，这并不完全正确。在这一点上，这开始成为一个非常糟糕的主意，但是：继续，进入突破口！（仅用于教育目的）

我们可以指定我们期望的每个部分的数量，而不是使用`*`可能为空的部分，并包括这三个部分加起来为 31 的所有可能方式。两个数字加起来为 30 有多少种方式？嗯，有30个。`0+30, 1+29, 2+28, ... 30+0`：

```
 ^[^WORKSHEET]{0}[^\sWORKSHEET][^WORKSHEET]{30}$
|^[^WORKSHEET]{1}[^\sWORKSHEET][^WORKSHEET]{29}$
|^[^WORKSHEET]{2}[^\sWORKSHEET][^WORKSHEET]{28}$
   ....
|^[^WORKSHEET]{30}[^\sWORKSHEET][^WORKSHEET]{0}$ 
```

显然，如果这是一个好主意，您应该编写一个该表达式的程序，而不是手动指定它（并且出错）。但我不认为我需要告诉你这不是一个好主意。然而，这是我对你的问题的唯一答案。

虽然诚然没有真正回答你的问题，但我认为@HatSoft 有正确的方法，直接清晰地编码条件。毕竟，我现在很满意，按要求回答您的问题实际上并没有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T15:48:59.097

要使用 Regex 对那些指定的无效字符进行工作表验证，您可以使用以下内容：

```
string wsName = @"worksheetName"; //verbatim string to take special characters literally
Match m = Regex.Match(wsName, @"[\[/\?\]\*]");
bool nameIsValid = (m.Success || (string.IsNullOrEmpty(wsName)) || (wsName.Length > 31)) ? false : true; 
```

这还包括检查工作表名称是否为空或空，或者是否大于 31。为了简单起见并避免过度设计此问题，这两个检查不是通过正则表达式完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T14:43:38.557

类似的东西？

```
 public string validate(string name)
    {
        foreach (char c in Path.GetInvalidFileNameChars())
            name = name.Replace(c.ToString(), "");

        if (name.Length > 31)
            name = name.Substring(0, 31);

        return name;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-30T15:17:19.343

您可能需要检查名称`History`，因为这是 Excel 中的保留工作表名称。

# facebook - Facebook 应用程序和 activeX

> ID：11817188
> 
> 赞同：-2
> 
> 时间：2012-08-05T14:24:24.270
> 
> 标签：facebook, internet-explorer

在开始编码之前为了安全起见：在 FB 应用程序中嵌入 activeX 有什么问题吗？10xs，那鸿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:28:09.040

您的 FB 应用程序无法在除 IE 之外的任何浏览器上运行（我认为其他浏览器的扩展可能会让您运行 ActiveX 控件）。如果您同意该限制，它应该可以工作，因为它将作为 iframe 运行。

# iphone - Xcode 事件只显示标记而不是名称 - TapKu？

> ID：11817189
> 
> 赞同：0
> 
> 时间：2012-08-05T14:24:36.577
> 
> 标签：iphone, xcode, calendar, tapku

我刚刚在我的应用程序中实现了 tapku 图书馆日历。日历在日历下显示一个事件列表。（单元格视图）

我有它，所以它使用此代码显示日期 - @“2012-08-09 00:00:00 +0000”。

我将如何做到这一点，以便当用户单击上面的日期时，它会在下面的单元格中显示类似“您的生日”的消息？

我用它来帮助我完成最初的部分 - [http://developinginthedark.com/posts/iphone-tapku-calendar-markers](http://developinginthedark.com/posts/iphone-tapku-calendar-markers)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:09:07.667

如果要替换“。” 对于任何字符串，您都必须编辑以下方法 TKCalendarView.m：

```
 - (void) drawTileInRect:(CGRect)r day:(int)day mark:(BOOL)mark font:(UIFont*)f1 font2:(UIFont*)f2{

NSString *str = [NSString stringWithFormat:@"%d",day];

r.size.height -= 2;
[str drawInRect: r
       withFont: f1
  lineBreakMode: UILineBreakModeWordWrap 
      alignment: UITextAlignmentCenter];

if(mark){
    r.size.height = 10;
    r.origin.y += 18;
    // Editing done here .......
    [@"edit" drawInRect: r
            withFont: f2
       lineBreakMode: UILineBreakModeWordWrap 
           alignment: UITextAlignmentCenter];
} 
```

}

此外，如果您想输入更长的字符串，请确保减小标签的字体大小和标签的其他尺寸属性。这里的标签是指（点）。

# iphone - 如何给应用商店起一个长名字，然后在图标下有一个短名字？

> ID：11817190
> 
> 赞同：6
> 
> 时间：2012-08-05T14:24:36.813
> 
> 标签：iphone, objective-c, ios, xcode, app-store

如何在应用商店中为应用设置一个长名称，然后在下载后在图标下方设置一个短名称？可能吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-05T15:09:18.103

在 iTunes Connect 中创建新应用时：

![在此处输入图像描述](../Images/dc6c62c5aad9bf4e9f2f5a867126c69f.png)

然后在您的应用程序 info.plist 文件中：

![在此处输入图像描述](../Images/d85dbaaa178306198721fc8e86f743f1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T14:27:51.803

App Store 名称是在您实际提交应用程序时在[iTunes Connect中设置的。](http://itunesconnect.apple.com)主屏幕上的名称是您在 Info.plist 中设置的名称，因此您可以轻松使用两个不同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T14:42:04.470

长名称由 iTunesConnect 设置；短名称在“产品名称”下的构建设置中设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T14:28:19.790

您可以为 in 设置应用程序的`AppStore`名称`itunesconnect`。`info.plist`并且可以在应用程序的文件中设置用户在其设备上可见的应用程序名称。如果我没记错的话是`Bundle Name`，但我可能是错的。目前附近没有 Mac

# android - Android - 将 res/raw 资源正确复制到 SD

> ID：11817192
> 
> 赞同：3
> 
> 时间：2012-08-05T14:24:44.977
> 
> 标签：android, copy, inputstream, outputstream

好吧，我尝试了很多东西，但我实现的更好目标是将所需文件复制到 sd，但新文件大小始终为 0bytes :(

这是我的代码：

```
 String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
        String fileName = sonidoActual+".mp3";

        File newSoundFile = new File(baseDir, fileName);
        Uri mUri = Uri.parse("android.resource://com.genaut.ringtonelists/raw/"+sonidoActual);
        AssetFileDescriptor soundFile;
        try {
            soundFile= getContentResolver().openAssetFileDescriptor(mUri, "r");
        } catch (FileNotFoundException e) {
            soundFile=null;   
        }

        try {
            byte[] readData = new byte[1024*500];
            FileInputStream fis = soundFile.createInputStream();
            FileOutputStream fos = new FileOutputStream(newSoundFile);
            int i = fis.read(readData);
            while (i != -1) {
                fos.write(readData, 0, i);
                i = fis.read(readData);
                Log.d("Degug - While: ", "i: "+i);
            }
            fos.flush();
            fos.close();
        } catch (IOException io) {
        } 
```

对不起我的英语不好。有人知道这个问题吗？非常感谢！

我的清单上有这些权限：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" />
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

更多信息：我尝试了一些代码来复制文件`assets`但不起作用..我有一些应用程序可以很好地设置铃声，所以我不认为我的 SD 有问题..我感到绝望：S

这些是资产中的代码，显然工作正常：[https ://stackoverflow.com/a/4530294/1422434](https://stackoverflow.com/a/4530294/1422434)

* * *

我也尝试过`getResources.openRawResource():`但不起作用

```
 String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
String fileName = nombreActual+".mp3";

File newSoundFile = new File(baseDir, fileName);

try {
    byte[] readData = new byte[1024*500];
    InputStream fis = getResources().openRawResource(contexto.getResources().getIdentifier(sonidoActual,"raw", contexto.getPackageName()));
    FileOutputStream fos = new FileOutputStream(newSoundFile);
    int i = fis.read(readData);

    while (i != -1) {
        fos.write(readData, 0, i);
        i = fis.read(readData);
    }

    fos.close();
} catch (IOException io) {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:44:11.047

当您使用原始文件夹时，只需从您的活动中使用它：

```
getResources().openRawResource(resourceName) 
```

# jquery - 为什么这个 AnySlider JQuery 会在 Chrome/Safari/Firefox 等中运行，但不能在 IE 中运行？

> ID：11817194
> 
> 赞同：0
> 
> 时间：2012-08-05T14:26:15.563
> 
> 标签：jquery, html, anythingslider

我的 JQuery Anythingslider 演示部署适用于我测试过的所有浏览器，包括 IE ( [DEMO](http://www.steph-morris.com/slidertest/index_anythingslider.html#) )。

但是，当我尝试将它插入到我的站点代码中时，这是一个我无法控制的可怕遗留 JQuery 的混乱，结果是它在 Chrome、Safari 和 Firefox 中正确加载，但在 IE 中根本没有。

要使用 AnythingSlider，您需要提供基本标记，JQuery 会添加类和 id 来处理它。

这是原始标记：

```
<ul id="slider">
    <li>CONTENT</li>
    <li>CONTENT</li>
    <li>CONTENT</li>
</ul> 
```

以下是我的标记在 Chrome 上的 Firebug 中的外观：

```
<div class="anythingSlider anythingSlider-default activeSlider" style="width: 790px; height: 790px; "><div class="anythingWindow" style=""><ul id="slider1" class="anythingBase horizontal" style="width: 4740px; left: -1580px; ">

    <li class="panel" style="width: 790px; height: 790px; "><img src="img/gallery05.jpg" alt="">
           CONTENT</li>
</ul></div><div class="anythingControls" style="display: block; "><a href="#" class="start-stop" style="display: none; "><span>Start</span></a></div><span class="arrow back" style=""><a href="#"><span>«</span></a></span><span class="arrow forward" style=""><a href="#"><span>»</span></a></span></div> 
```

在 Internet Explorer 8 中，在同一页面上，标记与原始标记没有变化——JQuery 根本没有运行，或者至少它没有将任何更改写入滑块 UL。当然，滑块不起作用。

*我尝试过的事情：*

*   我正在使用 JQuery noConflict 并排运行 JQuery 1.3.2 和 1.7。但是，当我将 noConflict 代码添加到我的演示时，它仍然在 IE 中工作，所以我认为不是这样。*   更改页面脚本加载顺序，以便首先加载任何滑动器，然后加载较旧的脚本 - 没有骰子。*   [正在寻找旧版本的 AnythingSlider，这样我就可以在没有冲突的情况下运行它 - 正在进行中。](https://stackoverflow.com/questions/11816958/where-can-i-download-an-older-version-of-anythingslider)

有谁知道会阻止此插件运行的任何 Internet Explorer 8 特定行为，以及我可以构建页面以阻止这种情况发生的任何方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:14:31.577

已解决：被错误的逗号杀死。我这样称呼我的滑块：

```
$(function(){
    $('#slider1, #slider2').anythingSlider({
    buildNavigation     : false,
    autoPlay            : false,
    resizeContents      : false,
    hashTags : false,
    }); 
```

当我在假后删除逗号时，问题得到解决：

```
$(function(){
    $('#slider1, #slider2').anythingSlider({
    buildNavigation     : false,
    autoPlay            : false,
    resizeContents      : false,
    hashTags : false
    }); 
```

而已。IE 被那个逗号窒息，而其他浏览器则没有。一个迷失的星期天的圣洁母亲花了很多时间来解决这个问题！

# delphi - Delphi：ListView中的颜色项

> ID：11817198
> 
> 赞同：1
> 
> 时间：2012-08-05T14:26:57.167
> 
> 标签：delphi, listview

> **可能重复：**
> [在 vsReport 模式下的 ListView 项目和行的着色](https://stackoverflow.com/questions/6294985/listview-in-vsreport-mode-colouring-of-items-and-rows)

我有一个问题：ListView 中的项目被添加到单独的线程中，其中一些元素必须是彩色的，但它们只有在将指针带到项目时才会被着色。如何解决这个问题呢？

这样做的颜色元素（OnAdvancedCustomDrawItem）：

```
procedure TFGlavnaya.LVThreadsListAdvancedCustomDrawItem(
  Sender: TCustomListView; Item: TListItem; State: TCustomDrawState;
  Stage: TCustomDrawStage; var DefaultDraw: Boolean);
begin
  try
    if Item.SubItems[0] = '' then
      begin
        Sender.Canvas.Font.Color := clBlue;
        Sender.Canvas.Font.Style := Sender.Canvas.Font.Style + [fsBold];
      end;
  except
    Exit;
  end;
end; 
```

# jquery - jquery兄弟选择器在不同的div

> ID：11817199
> 
> 赞同：1
> 
> 时间：2012-08-05T14:27:01.727
> 
> 标签：jquery, css-selectors, siblings

我是 jquery 的新手，并试图使用户帮助我的代码工作，但我现在遇到了麻烦。

我想让我的摄影网站在顶部有按钮，当你点击一个按钮时，你点击的类别（即'风景''肖像''婚礼'）显示所有带有这些“标签”的帖子（div类）。我让它在小提琴中工作，但是当我尝试将 div 包裹在帖子和按钮周围以将它们定位在页面上时，兄弟选择器会中断。

**这里的老工作**小提琴（没有 div 包装器）：http: [//jsfiddle.net/PxpXy/](http://jsfiddle.net/PxpXy/)

**这里损坏的小提琴**（带有 div 包装器）：http: [//jsfiddle.net/JUsZK/10/](http://jsfiddle.net/JUsZK/10/)

我已经为顶部的按钮和上下文（#test & #test2）添加了包装器，但现在（显然）兄弟选择器不起作用。

我怎样才能仍然拥有我的站点功能并使用 div 包装器在页面上重新定位它们？我是否不再需要兄弟选择器？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:34:57.187

鉴于您已将图片包装在 id 为“test”的 div 中，您可以执行以下操作：

```
$('#test .post').hide(); 
```

也就是说，隐藏 '#test' div 内的类 '.post' 的元素。

演示：http: [//jsfiddle.net/nnnnnn/JUsZK/12/](http://jsfiddle.net/nnnnnn/JUsZK/12/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T14:34:54.300

您的 div 不再是兄弟姐妹，固定版本可能是[http://jsfiddle.net/JUsZK/11/](http://jsfiddle.net/JUsZK/11/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T14:39:02.983

您只需将选择器修改为：

```
$('button').click(function() {
    $('div.post').hide()
    $('.' + this.id).show(500);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/JUsZK/13/)。

`$('div.post')`当然，使用will 可以处理带有of 的*所有* `div`元素。要将响应限制为仅*某些*s，您可以指定一个父容器元素，然后用于仅处理您特别感兴趣的那些元素，例如：`class``post` *`div``find()`*

 *```
$('button').click(function() {
    $(parentElementSelector).find('.post').hide()
    $('.' + this.id).show(500);
}); 
```

请注意，我没有更正多重`id`问题，但我建议使用 a `class`（或者，由于您没有在 jQuery 中使用它，我可以在您的问题中*看到*，只需删除`id`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T14:32:51.353

在 HTML 中，`id`s 应该是唯一的。在您的第二个（非工作）小提琴中，您有三个带有 id 的 div `test`。*

# php - 闪光灯放大问题

> ID：11817201
> 
> 赞同：0
> 
> 时间：2012-08-05T14:27:12.130
> 
> 标签：php, html, css, flash, actionscript

在标题中，我放置了一个 Flash 横幅。放大和缩小（Ctrl + 和 -）不适用于 Flash 横幅。这可以解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:58:30.087

如果您在舞台上设置了 NoScale，您可以使用：

```
stage.scaleMode = StageScaleMode.NO_SCALE 
```

然后添加一个 rescale 事件监听器：

```
stage.addEventListener(Event.RESIZE, onStageResize)
private function onStageResize(e:Event):void {
    var widthScale:Number = stage.stageWidth / 500; // width of your swf
    scaleX = scaleY = widthScale;
} 
```

这需要添加到 .fla 文件中才能工作。

# eclipse - 无法使用 Maven 布局运行应用引擎项目

> ID：11817204
> 
> 赞同：0
> 
> 时间：2012-08-05T14:27:38.033
> 
> 标签：eclipse, google-app-engine, maven

在 Eclipse 下创建了 maven 项目后，我配置了应用引擎设置并将我的 WAR 目录设置为 target/Site-0.0.1-Snapshot（我正在使用应用引擎插件）。将项目部署到应用程序引擎工作得很好，但是我无法让项目在本地运行。当我启动它时，它只是将 target/Site-0.0.1-Snapshot 的全部内容复制到 target/Site-0.0.1-Snapshot/WEB-INF 中，使 lib 目录保持为空并抛出 ClassNotFoundException。什么会导致这种奇怪的行为？可能是我配置错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:01:24.633

回答我自己的问题。检查“从该目录启动和部署”选项已解决该问题。

# html - 在 html 中嵌套 html 标签

> ID：11817210
> 
> 赞同：7
> 
> 时间：2012-08-05T14:28:04.203
> 
> 标签：html

我正在构建一个人们可以发送电子邮件的平台——为了显示电子邮件的预览，我在表单下方使用了一个 div，他们可以在其中键入消息。

所以一般的结构是这样的：

```
<html>
    <body>
         <form>
              <!-- Form to enter email here -->
         </form>
         <div>
              <!-- Email preview here -->
              <html>
                   <!-- Email content, updated everytime user types something --->
              </html>
         </div>
    </bod>
</html> 
```

然而，简单地在 html 文档本身中使用 html 标签似乎会使每个浏览器感到困惑——而且，它看起来也不是很干净。

由于发送的电子邮件将是一个完整的 html 文档，因此将所有内容放在 div 中是最简单的。

我怎样才能以一种有效、干净的方式做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T14:39:10.353

使用 iframe。您可以向它们写入动态内容 - 您不必总是使用`src`属性将物理页面加载到它们中。

HTML：

```
<iframe name='preview'></iframe> 
```

JS（在 DOM 就绪回调中）

```
var doc = document.preview.open("text/html","replace");
doc.write('<html><body><p>this is some content</p></body></html>');
doc.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:33:19.480

您无法使用您使用的方法解决此问题。获取邮件客户端中呈现的电子邮件是一个挑战，您可能希望使用 iframe 代替。但是，您必须确保电子邮件副本的内容必须完全采用表格布局格式。

# python - 如何在 webapp2 中自动将 URL 映射到请求处理程序？

> ID：11817213
> 
> 赞同：1
> 
> 时间：2012-08-05T14:28:22.663
> 
> 标签：python, web-applications, web.py, webapp2

我正在尝试找到一种方法来自动将 URL 映射到 webapp2 中的请求处理程序。

这就是我想要得到的：使用下面的类，所有请求都`/users`可以由 处理`Users`，所有请求都`/lists`可以由 处理`Lists`，没有硬编码`(URLRegex, RequestHandler)`元组`webapp2.WSGIApplication`

```
class Users(webapp2.RequestHandler):  
    pass
class Lists(webapp2.RequestHandler):
    pass 
```

`webpy`使用起来非常方便`auto_application`。`webpy`它用于将新类自动注册到`metaclass`全局 URL 调度程序。

由于我不是很熟悉`metaclass`，我想知道是否已经有这样的方法/示例代码可用`webapp2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:34:35.023

一种方法是使用通配符模式由单个调度程序处理程序处理所有 URL。例如“/(.*)”将由调度程序处理。调度程序可以分析 url，实例化适当的类并调用其上的任何方法。

但是，可能存在一些安全问题，因为浏览器将能够加载和调用命名空间中的任意类。

# ruby-on-rails - 如何在 ImageMagick 和 Paperclip 中调整大小和裁剪？

> ID：11817215
> 
> 赞同：1
> 
> 时间：2012-08-05T14:28:34.673
> 
> 标签：ruby-on-rails, image-processing, imagemagick, paperclip

输出图像尺寸应为 800x200 或更小。如何实现以下？

1.  如果源图像在两个维度上都较小，请不要修改。
2.  如果源图像在两个维度上都较大，则首先调整到较大的边保持纵横比。然后裁剪。因此，1000x500 被调整为 800x400，然后裁剪（围绕中心）为 800x200。
3.  如果源图像在一维上较大，则裁剪为 800x200。

使用 Paperclip 在 Rails 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:13:34.393

不确定这是否处理问题中的#1，但它处理#2 和#3。

```
has_attached_file :picture, 
                  :styles => { :medium => "800x200#" } 
```

感谢 colli8marko ！

[使用回形针进行简单裁剪](https://stackoverflow.com/questions/1017509/simple-cropping-with-paperclip)

# c# - 在运行时加载程序集

> ID：11817221
> 
> 赞同：1
> 
> 时间：2012-08-05T14:29:05.567
> 
> 标签：c#, dll, private, gac, .net-assembly

我使用了一个教程（http://support.microsoft.com/kb/837908，方法 1）来生成两个项目。项目 a 引用了项目 b。

**项目一：**

```
new System.EnterpriseServices.Internal.Publish().GacRemove(string.Format(@"C:\Users\[me]\Documents\Visual Studio 2010\Projects\MyAssembly1\MyAssembly1\bin\Debug\MyAssembly1.dll"));
new System.EnterpriseServices.Internal.Publish().GacInstall(string.Format(@"C:\Users\[me]\Documents\Visual Studio 2010\Projects\MyAssembly1\MyAssembly1\bin\Debug\MyAssembly1.dll"));
MyAssembly1.Class1 obj1 = new MyAssembly1.Class1();
MessageBox.Show(obj1.HelloWorld()); 
```

**项目b：**

```
 public string HelloWorld()
    {
        return "1";
    } 
```

当我执行以下操作时：

1.  将项目 b 中的“HelloWorld”方法更改为返回“2”（而不是“1”）。

2.  建设项目b

3.  构建项目 a 并运行它

我收到带有“1”作为文本的消息框，GAC 并不总是自行更新。

更新项目 b 并在项目 a 上查看它的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:49:00.497

首先，更改 GAC 不太可能帮助已经运行的流程。在这种特定情况下，请注意 JIT在方法执行**之前**按方法发生。这意味着 MyAssembly1 在删除/安装步骤之前已解决并加载。但是，这并不能改变这样一个事实，即这不太可能是一个好方法。

# java - 检查点数组是否在矩形数组内？

> ID：11817227
> 
> 赞同：0
> 
> 时间：2012-08-05T14:29:55.630
> 
> 标签：java, arrays, shape, point

我有一个顶点列表和一个区域列表（正方形/矩形）形状。顶点有 x 和 y 坐标，区域有 (x, y, height 和 width)。如何有效地检查每个顶点/区域的哪个顶点位于哪个区域？

编辑：

这是我为此编写的代码。

```
 if (!g.getVertices().isEmpty()) {

                for (int i = 0; i < g.getVertices().size(); i++) {

                    Vertex v = g.getVertices().get(i);
                    Point vertexPoint = new Point(v.getX(), v.getY());

                    for (int j = 0; j < g.getNumberOfRegions(); j++) {

                        int x = g.getRegions().get(j).getX();
                        int y = g.getRegions().get(j).getY();
                        int height = g.getRegions().get(j).getHeight();
                        int width = g.getRegions().get(j).getWidth();

                        Grid regionGrid = new Grid(j+1, x, y, height, width);

                        Rectangle regionRectangle = new Rectangle(x, y, height, width);
                        if (regionRectangle.contains(vertexPoint)) {
                            System.out.println("Vertex " + v + " lies inside region " + regionGrid.getRegionID());
                        }
                    }

                }
            } 
```

编辑 2：我用它来生成区域，但我需要一种方法来为网格中的每个区域从左到右分配一个 regionID。例如：

```
1 - 2 - 3
4 - 5 - 6 
7 - 8 - 9 
```

对于 3x3 网格。目前它是以下形式：

```
1 - 1 - 1
2 - 2 - 2
3 - 3 - 3

                for (int i = 0; i < rowValue; i++) {

                for (int j = 0; j < columnValue; j++) {

                    Grid r = new Grid(0, 20 + i * size, 20 + j * size, size, size);
                    r.setRegionID(j + 1);
                    g.addRegion(r);
                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:49:00.077

您可能可以使用核心 Java 库本身：

```
 List<Rectangle2D.Double> rectangles = Arrays.asList(
                                                new Rectangle2D.Double(0d, 0d, 100d, 100d),
                                                new Rectangle2D.Double(100d, 0d, 100d, 100d),
                                                new Rectangle2D.Double(0d, 100d, 100d, 100d),
                                                new Rectangle2D.Double(100d, 100d, 100d, 100d));

    Point2D.Double aPoint = new Point2D.Double(30d, 40d);

    for (Rectangle2D.Double rectangle:rectangles){
        if (rectangle.contains(aPoint)){
            System.out.println(rectangle + " has the point " + aPoint);
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T14:38:33.703

检查顶点是否在正方形或圆形内可以在 O(1) 中完成。您可以使用库函数或初等数学来做到这一点。所以你可以创建的工作算法是 O(#vertices * #regions)。您可以尝试通过按 X 轴然后按 Y 轴对顶点和区域进行排序来进行优化，并尝试消除检查肯定返回 false。但似乎在悲观的情况下你仍然会有 O(#vertices * #regions) 时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T14:34:33.380

[使用JTS](https://github.com/locationtech/jts)时使用平面几何非常容易。您可以尝试将您正在使用的对象转换为特定于 JTS 的对象。

# performance - HSQL 简单的一列更新永远运行

> ID：11817235
> 
> 赞同：0
> 
> 时间：2012-08-05T14:31:11.247
> 
> 标签：performance, hsqldb

我有一个包含大约 125 000 行的数据库，每行都有主键、几个 int 列和几个 varchar。
我添加了一个 int 列，并尝试在添加非空约束之前填充它。

db 保存在脚本文件中。我在某处读到，所有受影响的行在实际更新之前都已加载到内存中，这意味着不会对每一行进行磁盘写入。整个数据库大约 20MB，这意味着加载它并进行更新应该相当快，对吧？

所以，没有连接，没有嵌套查询，基本更新。我尝试了多个数据库管理器，包括与 hsql jar 捆绑的一个。

> 更新 tbl1 设置 col1 = 1

查询永远不会完成执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:47:23.067

它可能内存不足。

执行此操作的更简单方法是使用 DEFAULT 1 定义列，无论表的大小如何，它都不会使用太多内存。您甚至可以同时添加非空约束

```
ALTER TABLE T ADD COLUMN C INT DEFAULT 1 NOT NULL 
```

# java - java中的反斜杠

> ID：11817237
> 
> 赞同：2
> 
> 时间：2012-08-05T14:32:37.330
> 
> 标签：java, android

我对保存在数据库中的字符串有疑问，例如：`"311\315_316\336_337"`. 它们只有一个反斜杠，这是 java 中的一个问题。当我尝试`s.replaceAll("\", "\\")`它不起作用时，因为 java 编译器将字符串读取`"311\315_316\336_337"`为`"311Í_316Þ_337"`.

我也尝试对编码结果进行编码和解码，`"311%C3%8D_316%C3%9E_337"`但解码结果仍然是`"311Í_316Þ_337"`？

如何解决一个反斜杠的问题？

我想将此字符串传递给函数来执行拆分数字的过程，反斜杠是分隔符，但这个问题阻止了我这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:37:49.070

数据库中的数据是可以的，你不需要替换任何东西。直接用 Java 代码编写的字符串*字面量*必须用另一个反斜杠转义它们的反斜杠：

```
String s = "311\\315_316\\336_337";
System.out.println(s); // prints 311\315_316\336_337 
```

但是，如果您从数据库中获取这些值，则无需做任何事情：

```
String s = resultSet.getString(1);
System.out.println(s); // should print 311\315_316\336_337 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T14:36:22.070

在 java 字符串中，反斜杠字符是控制字符。如果您希望在字符串中包含文字反斜杠，则必须使用另一个反斜杠对其进行转义。例如`"\\"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T14:38:40.843

在java中，反斜杠`\`有特殊的含义。为了删除它，用另一个反斜杠转义它`\\`

尝试这个：

```
s.replaceAll("\\", "\\\\"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T14:51:54.500

您也可以使用 Unicode \ = \u005c

示例：“文件夹\u005cSubfolder1\u005cSubfolder2”

将产生字符串“Folder\Subfolder1\Subfolder2”

你可以在这里看到完整的表格：http: [//jrgraphix.net/r/Unicode/0020-007F](http://jrgraphix.net/r/Unicode/0020-007F)

# javascript - 使用自定义方法更改表单字段的值？

> ID：11817238
> 
> 赞同：0
> 
> 时间：2012-08-05T14:32:46.563
> 
> 标签：javascript, forms

我创建了一个名为`removeValue`删除表单域值的方法。每次用户单击它时，我都会在要执行的函数中放入 onclick 事件，在 html 中，它会给出此错误：“无法引用...的变量”（类似的东西）。这是为什么？

我认为关键字`this`总是指被调用的对象，如果我`this.value ="";`直接在 HTML 中编写，它可以工作。这是为什么？

```
function removeValue () {  
    if (this.value != "") {
        this.value = ""; 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:41:51.790

`this`在这种情况下指的是窗口对象。将您的元素传递给这样的函数：

```
function removeValue(element) {
    element.value = '';
} 
```

* * *

```
<input onclick="removeValue(this)" type="text"> 
```

我认为如果将函数绑定到`onfocus`事件会更好，因为这样在使用选项卡切换到输入字段时也会调用它。

# android - Android：寻呼机标题条和 WebView

> ID：11817240
> 
> 赞同：1
> 
> 时间：2012-08-05T14:32:57.500
> 
> 标签：android, webview, android-actionbar

我为 Android 4.0 创建了一个带有“Swipe View+Title Strip”导航类型的项目。我想要的是在单击标题或在页面之间滑动时显示不同的页面。例如，我有三个选项卡，每个选项卡都显示不同的网页。我现在如何创建一个简单的 webview 应用程序，它使用 javascript 等加载网页。请有人帮助我修改此代码，以便每次我从这些标题中单击一个选项卡以显示不同的内容。我看到了一些带有 int position 的东西，然后是 switch(position){ case 0, case 1, case 2} 等，但我不知道把这段代码放在哪里。

这是股票代码，有人可以帮我修改吗？我正在搜索这个数周:((。

```
package com.actionbartest;

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.NavUtils;
etc.

public class MainActivity extends FragmentActivity {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
 * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
 * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
 * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Create the adapter that will return a fragment for each of the three primary sections
    // of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
 * sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        Bundle args = getArguments();
        textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
        return textView;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:54:06.597

例如，您可以在 assets/www 文件夹（index1.html、index2.html、index3.html）中创建 3 个 html 文件，而不是将*最后*的 onCreateView()从生成文本视图更改为生成 webview，例如：

```
 WebView mWeb = new WebView(getActivity());
    WebSettings webSettings = mWeb.getSettings();
    webSettings.setJavaScriptEnabled(true);
    mWeb.setVerticalScrollBarEnabled(true);
    Bundle args = getArguments();
mWeb.loadUrl("file:///android_asset/www/index"+args.getInt(ARG_SECTION_NUMBER)+".html");
return mWeb; 
```

这种方法的坏处是当你滑动 webview 时会重新加载。您应该将 onCreateView 设置为仅填充一次视图并防止 webview 在滑动时重新加载，但我不知道如何实现这一点。

**我希望阅读这篇文章的人会就如何防止 webviews 在每次成为焦点时重新加载它的部分发表评论。**

# wso2 - WSO2 身份服务器 3.2.3。缺少添加外部用户存储的能力

> ID：11817243
> 
> 赞同：2
> 
> 时间：2012-08-05T14:33:02.063
> 
> 标签：wso2, wso2is

在 WSO2 Identity Server 3.2.3 中添加带有自定义表的外部用户存储的能力发生了什么？

我们正在评估此 IS 的使用，似乎旧版本具有此功能，而最新版本没有。

我是否缺少配置设置或此功能已被完全删除？或者这是一个构建配置选项？

没有这个功能是一个障碍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:21:57.890

它是通过配置文件完成的——（似乎）没有 ui 组件。通过操作 user-mgt.xml 和 master-datasource.xml 文件，我能够通过 jdbc 连接到外部 sql server 用户存储。尽管下一步将定义一个逻辑模式定义来映射 id 字段。例如，在我的 sql server db 上的 /dbscripts 中运行 mssql.sql 脚本将创建所需的结构。

# c++ - How to add new memory allocator to deal with low memory?

> ID：11817245
> 
> 赞同：2
> 
> 时间：2012-08-05T14:33:17.963
> 
> 标签：c++, new-operator

In [this answer](https://stackoverflow.com/a/240308/1526667) which discusses about the difference between `new` and `malloc` states one difference of `new` from `malloc` as `Can add a new memory allocator to deal with low memory (set_new_handler)`.

please give a example of this and how it works?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T15:00:46.053

It isn't exactly a new memory allocator, but a function you can register so that it is called when `operator new` runs out of memory.

If you can then magically fix the out of memory problem, `new` can try again and see if it works better now. This is most often not very useful, unless your application is holding on to some memory it can release.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:24:57.603

Here's a couple of examples where a new handler might be of use.

1.  Suppose you're on a unix-like machine on which the sysadmin has, for some reason, set a low soft limit on the heap size. The new handler can raise the soft limit to the hard limit and voila! new memory might be available.

2.  Suppose you want your application to hog all the memory, but other already-running applications are in the way. So just make your new handler sleep for a little bit. When one of those already-running programs terminates, viola! new memory is available.

There is at least one commercial application that takes option #2\. It is almost always a mistake. Typically the application runs out of memory because a user of the application inadvertently has tried to allocate more memory than exists on any computer. The application will happily munch ever more memory as other running applications quit. Eventually no new programs can be started, including those the operating system needs to run. This application is a rather nice tool for making the machine come crashing to its knees.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-05T15:06:50.487

I think "low memory" is actually indicating "out of memory" in the answer you're linking too. There are plenty of sample code fragments that install an out-of-memory handler by searching on set_new_handler (e.g. [http://www.cplusplus.com/reference/std/new/set_new_handler/](http://www.cplusplus.com/reference/std/new/set_new_handler/) )

One implementation I have seen (in production code for a particularly memory-intensive application) used this hook in conjunction with a "rainy-day" block allocation of ~10MB on application startup. If this handler was ever triggered, it would then delete the memory and attempt to enter a "controlled exit" path.

In practice, I found that this wasn't a very effective technique, as behavior once you are out of memory is already unpredictable.

# c++ - 通过 FTP 上传文件的进度条 [C++]

> ID：11817248
> 
> 赞同：2
> 
> 时间：2012-08-05T14:33:51.750
> 
> 标签：c++, ftp, progress-bar

我编写了一个小程序，它能够通过 ftp 将文件上传到服务器。由于某些文件很大，我想为用户创建一个进度条。因此，在上传期间，我需要每隔一定时间知道有多少字节已发送到服务器，以便得出已上传文件的百分比。到目前为止我已经尝试过：

当我调用函数 FtpPutFile() 来上传文件时，我使用以下代码生成了一个线程：

```
hInternet = InternetOpen(NULL,INTERNET_OPEN_TYPE_DIRECT,NULL,NULL,0);
hFtpSession = InternetConnect(hInternet, ftpserver, port, user, pass, INTERNET_SERVICE_FTP, 0,    0); 
int filesize = 0; // 2GB max

hFile = FtpOpenFile(hFtpSession,szFileTitle,GENERIC_READ,FTP_TRANSFER_TYPE_BINARY,0);
filesize = FtpGetFileSize(hFile,0); 
cout << "Size: " << filesize << endl; 
```

但是，这似乎不起作用，因为*文件大小*不断返回值 -1。我认为这是因为我正在写入文件（上传部分），同时我试图读取它以获取文件大小。而且我认为这是不可能的（如果我错了，请纠正我）。

我的主要问题：*是否有另一种方法可以为 ftp 上传创建进度条？***也许在使用函数 readBytesCount() 上传之前**计算字节数（不确定这是否可能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:17:22.390

你想要：

1.  调用[`InternetSetStatusCallback`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385120.aspx)设置在传输期间将定期调用的函数。
2.  将最后一个参数的（非零）值传递给`FtpOpenFile`. 这将在传输期间传递回您的状态回调函数。

然后，在 FTP 操作期间，将定期调用您的回调函数，其中包含有关传输进度的信息，然后它可以向用户显示这些信息。

我不相信这会让您在传输时显示实际字节 - 如果内存服务它主要显示传输中的离散步骤，例如打开句柄，解析名称，发送/接收 cookie，最后关闭手柄。

为了处理在文件本身传输期间写入的实际字节，您通常会从本地文件中读取一个充满数据的缓冲区，然后使用`InternetWriteFile`. 这样，您可以将传输的百分比计算为到目前为止写入的字节数除以文件的总大小（然后乘以 100）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:44:11.900

好吧，我通过分块发送文件并更新进度而不是通过一次调用发送整个文件来解决了这样的问题`FtpPutFile`

我是说：

```
 FtpOpenFile(...)
 for( ... )
 {
    InternetWriteFile(... dwChunkSize...)
    UpdateProgressBar(dwChunkSize)        
 }
 InternetCloseHandle(...) 
```

# java - Java 中的正则表达式环视构造：建议需要优化

> ID：11817249
> 
> 赞同：3
> 
> 时间：2012-08-05T14:33:59.510
> 
> 标签：java, regex, lookahead, negative-lookahead

我正在尝试在逗号分隔的列表中搜索文件名：

> text.txt、temp_doc.doc、template.tmpl、empty.zip

我使用 Java 的正则表达式实现。输出要求如下：

1.  只显示文件名而不是它们各自的扩展名
2.  排除以“temp_”开头的文件

它应该看起来像：

> 文本
> 
> 模板
> 
> 空的

到目前为止，我已经设法编写或多或少令人满意的正则表达式来应对第一项任务：

```
[^\\.,]++(?=\\.[^,]*+,?+) 
```

我相信使其符合第二个要求的最佳选择是使用环视构造，但不确定如何编写可靠和优化的表达式。虽然下面的正则表达式似乎确实可以满足要求，但如果没有其他原因，它显然是一个有缺陷的解决方案，它依赖于显式的最大文件名长度。

```
(?!temp_|emp_|mp_|p_|_)(?<!temp_\\w{0,50})[^\\.,]++(?=\\.[^,]*+,?+) 
```

PS我只研究了几天的正则表达式，所以请不要嘲笑这个新手风格的过于复杂的代码:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T14:49:53.697

> *   只显示文件名而不是它们各自的扩展名
> *   排除以“temp_”开头的文件

一种变体是这样的：

```
(?:^|,)(?!temp_)((?:(?!\.[^.]*(?:,|$)).)+) 
```

这允许

*   不以“单词字符”开头的文件名（Tim Pietzcker 的解决方案没有）
*   包含点的文件名（sth. like`file.name.ext`将匹配为`file.name`）

但实际上，这真的很复杂。您最好编写一个小函数，以逗号分隔输入并从部分中删除扩展名。

无论如何，这是拆解：

```
(?:^|,) # 文件名开始：字符串或逗号的开始
(?!temp_) # 否定前瞻：不允许以“temp_”开头的文件名
( # match group 1 (将包含你的文件名)
  (?: # 非捕获组（匹配一个允许的字符）
    (?! # 负前瞻 (不跟在后面):
      \。# 一个点
      [^.]* # 任意数量的非点（这与扩展名匹配）
      (?:,|$) # 文件名结束（字符串或逗号结尾）
    ) # 结束负前瞻
    . # 这个字符有效，匹配它
  )+ # 结束非捕获组，重复
) # 结束组 1

```

[http://rubular.com/r/4jeHhsDuJG](http://rubular.com/r/4jeHhsDuJG)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T14:47:19.603

这个怎么样：

```
Pattern regex = Pattern.compile(
    "\\b        # Start at word boundary\n" +
    "(?!temp_)  # Exclude words starting with temp_\n" +
    "[^,]+      # Match one or more characters except comma\n" +
    "(?=\\.)    # until the last available dot", 
    Pattern.COMMENTS); 
```

这也允许文件名中包含点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T14:52:26.737

另外一个选项：

```
(?:temp_[^,.]*|([^,.]*))\.[^,]* 
```

该模式将*匹配*所有文件名，但只会*捕获*有效名称。

*   如果在当前位置模式可以匹配`temp_file.ext`，它匹配它并且不捕获。
*   它无法匹配`temp_`，它会厌倦匹配`([^,.]*)\.[^,]*`，并捕获文件名。

你可以在这里看到一个例子：[http ://www.rubular.com/r/QywiDgFxww](http://www.rubular.com/r/QywiDgFxww)

# sql-server - 备份为 bak 文件或附加/分离 SQL Server 数据库？

> ID：11817250
> 
> 赞同：0
> 
> 时间：2012-08-05T14:34:17.967
> 
> 标签：sql-server

> **可能重复：**
> [SQL Server 备份/恢复与分离/附加](https://stackoverflow.com/questions/610113/sql-server-backup-restore-v-s-detach-attach)

使用 .bak 文件备份 SQL Server 数据库或分离文件有什么区别吗？

我们可以恢复两者。附加/分离文件可能会更好，因为我只需要复制 mdf 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T14:37:25.997

您可以在线备份数据库，但分离/附加需要停止为用户使用数据库。

补充：这里有很多[使用备份与分离的原因](http://msdn.microsoft.com/en-us/library/ms190794.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:37:03.007

mdf 文件还需要复制 ldf 文件，或者在恢复时创建一个新文件

# c# - 将透明图像移到另一个透明图像上

> ID：11817251
> 
> 赞同：0
> 
> 时间：2012-08-05T14:34:25.510
> 
> 标签：c#, controls, transparent

我定义`SelecterControl`了包含透明图像控件的用户控件（背景中`Roll`有透明图像）。

我想把前面的控制权移过来`SelecterControl`。

当这样做时，透明区域`SelecterControl`不清晰。

![在此处输入图像描述](../Images/824de50b3d85bf6bd5c240d417515827.png)

我的完整代码如下：

```
using System;
using System.Drawing;
using System.Windows.Forms;
using System.IO;

namespace TestControl
{
public partial class SelecterControl : UserControl
{
    private Roll roll;

    public SelecterControl()
    {
        InitializeComponent();
        BackgroundImage = Image.FromStream(new MemoryStream(Convert.FromBase64String("iVBORw0KGgoAAAANSUhEUgAAAPsAAAAWCAYAAAAGqOr6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AgFDRwUWvPXdAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACxklEQVR42u3cv0sbYRwG8McgucnXpiBCThyCpUMqGa4RobhlKDjKBSLt0EU7tbQQmv4FjQj94aRZOhSSkiKdQqFNJxGkIUOKGQohFMmlBEHrOSVQ0yE5aYJW7jyVO54PhCwX3vDePfd+733vbgBn88G6fRCRWReSuYEzGlQABM7RaJ6BJzId9Mg5Al8FUDwpd4MnNXZj6Lby+uH7pPB7Fb3egvB7TbWm11uYXZ5Y5H4jMicXr+xZyZvwe6HXW9X7b2ZSe61fgW7gq/+Gvj/svsx8OSlkaWEsPITxaYFhWTL9hz8lqtxrRBbdeTRm+jcHWhM7W3rg3eON5PfPP/PPSxGjSjge5Qf7ziprwu9VrTRGRFdnWJYwOTeCybkRCL83kimUfbF0MNUNehEAPMbGG692njHoRO6oDMbCQ8qLUF5FZ97N1z+yJ2/Njdg90eBzWD9d46HS4ze7wJm6WY7gCfLdwOcHu6P6mpAlS9fn/6F0v500Gz/Dw6THBrvAuWW9kCVk5stqLB2sAvAZI7s6Pi1sbezpzbdqWJlShb0nELpc99gFzjU+LaBrTQXp3jLe9nI7rEzhbjJgd7VA5GoXuZLlATrrdAwlkftKeb3e6g07EbmfBwCE34sDrcneIHKRA61p3P3ac1PNvt3X7YXiNyABcIKO6Mrt5+KVzqpYKdtIlrKN9tGfI1s+uXilDWABzltnJ7pSuXjFthyWso12Zr78xcihBwBC0dGErjVZyhO5qITXtSZi6WDCKOOPJ+iELC1ur++yl4hcYHt9F7XC4RI6T76hJ+yh6GhKyFJqc6XGniJysM2VGvR660MsHVzCaY+4hqKji6Vso7i5UlsTsmT5EVdjUoDdTnR5ZfvOlo5a4RAAlmaXJxL925z6pppStpHVtaZ6jpdXXGfgiczJxSttqy+vAJD/uPo1+vLHA+aOiIjI9f4CBEpvEw5QVnUAAAAASUVORK5CYII=")));
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        BackColor = Color.Transparent;
    }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x20;
            return cp;
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        if (BackgroundImage != null)
            e.Graphics.DrawImage(BackgroundImage, e.ClipRectangle, e.ClipRectangle, GraphicsUnit.Pixel);
    }

    #region Roll Horizontal Movement

    int strtX;

    private void roll_MouseDown(object sender, MouseEventArgs e)
    {
        strtX = e.X;
    }

    private void roll_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Left)
            roll.Left += e.X - strtX;
    }

    #endregion

    #region Designer generated code

    private System.ComponentModel.IContainer components = null;

    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
        System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(SelecterControl));
        this.roll = new MapControl.Roll();
        this.SuspendLayout();
        // 
        // roll
        // 
        this.roll.BackColor = System.Drawing.Color.Transparent;
        //this.roll.BackgroundImage = ((System.Drawing.Image)(resources.GetObject("roll.BackgroundImage")));
        this.roll.Location = new System.Drawing.Point(87, 1);
        this.roll.Name = "roll";
        this.roll.Size = new System.Drawing.Size(13, 18);
        this.roll.TabIndex = 0;
        this.roll.MouseDown += new System.Windows.Forms.MouseEventHandler(this.roll_MouseDown);
        this.roll.MouseMove += new System.Windows.Forms.MouseEventHandler(this.roll_MouseMove);
        // 
        // SelecterControl
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        //this.BackgroundImage = ((System.Drawing.Image)(resources.GetObject("$this.BackgroundImage")));
        this.Controls.Add(this.roll);
        this.Name = "SelecterControl";
        this.Size = new System.Drawing.Size(251, 22);
        this.ResumeLayout(false);

    }

    #endregion
}

class Roll : Control
{
    public Roll()
    {
        BackgroundImage = Image.FromStream(new MemoryStream(Convert.FromBase64String("iVBORw0KGgoAAAANSUhEUgAAAA0AAAASCAYAAACAa1QyAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AgFDR0RM4ISugAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA5UlEQVQoz2NkQAWCUMyARMPAexjNAhORjTul5GEhd5cBC1jc4h/249nJ9zCNjAwMDAwaufeVbDU57zIwMLyfnCKKYkPunNcwjek/np28x8DAcI+JgYGBAVnDozd/4BoevfnDMDlFlIGBgYEhtmbjTJizmWAKYBrkROAuZpATYUHRCANM2PygU/iIQafwEQMuwMRABhjVRIkmFmyCV/rl8Ol5z4SUxt7DUgByMpITYYGnP1iChWkSYmBgEIRpRE5GMA3LJ2abQDW9Z4QpSJ32QpCBgeEdNvesnt+p/OF0/3ukPEU6AADyU1AuXNEg+gAAAABJRU5ErkJggg==")));
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        BackColor = Color.Transparent;
    }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x20;
            return cp;
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        if (BackgroundImage != null)
            e.Graphics.DrawImage(BackgroundImage, e.ClipRectangle, e.ClipRectangle, GraphicsUnit.Pixel);
    }
}
} 
```

这个问题的原因是什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:02:39.137

```
 this.roll.Size = new System.Drawing.Size(13, 18); 
```

这是您代码中的核心问题，“滚动”控件太小。当您在 CreateParams 属性中使用 WS_EX_TRANSPARENT 标志时，您要求 Windows 确保您的控件后面的窗口始终首先绘制。它为您的“滚动”控件设置背景像素，以便它可以在它们上面绘制自己的东西。

麻烦的是，您的滚动控件太小了，以至于在您移动它之后，它还不足以覆盖之前绘制的杂散像素。它们不再位于滚动控制窗口内。所以他们会留在那里，产生你看到的拖尾效果。

避免这种情况的唯一方法是使您的滚动控制更大，以便它始终捕获这些像素。实际上，与滑块的范围一样大。问题是，你现在失去了让“滚动”成为它自己的控制的所有好处。像点击测试这样的事情变得复杂，你需要知道拇指在哪里才能知道用户点击了它。

您不妨创建*一个*同时绘制滑块和拇指的控件。所需的代码完全相同。而且它会更有效，因为您使用更少的系统资源，窗口是昂贵的对象。

# spring - 无法使用 Mybatis 运行 sql 查询

> ID：11817252
> 
> 赞同：1
> 
> 时间：2012-08-05T14:34:28.417
> 
> 标签：spring, spring-mvc, ibatis, mybatis

我正在尝试使用 mybatis 运行一个简单的 sql 查询，但它给了我以下异常

```
java.lang.IllegalArgumentException: Mapped Statements collection does not contain value for com.mycom.myproject.db.mybatis.dao.UserMapper.countByExample
org.apache.ibatis.session.Configuration$StrictMap.get(Configuration.java:660)
org.apache.ibatis.session.Configuration.getMappedStatement(Configuration.java:495)
org.apache.ibatis.session.Configuration.getMappedStatement(Configuration.java:488)
org.apache.ibatis.binding.MapperMethod.setupCommandType(MapperMethod.java:236)
org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:71)
org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:39)
$Proxy9.countByExample(Unknown Source)
com.mycom.myproject.controller.LoginController.login(LoginController.java:39)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我的 UserMapper.xml 是

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mycom.myproject.db.mybatis.dao.UserMapper" >
<select id="countByExample" resultType="int">
select count(*) from users
</select>
</mapper> 
```

我的 UserMapper 是

```
public interface UserMapper {
   int countByExample();
} 
```

我正在尝试在我的 LoginController 中访问它

```
public class LoginController
 {
static final Logger logger = Logger.getLogger(LoginController.class);

@Autowired
private UserMapper userMapper;

@RequestMapping("/login")
public ModelAndView login(@ModelAttribute User userBean, Model model){  

    int count = userMapper.countByExample();

    System.out.println("Count: "+ count);       

    return new ModelAndView("login", "userBean", userBean); 

}
    } 
```

我的 spring-servlet.xml 文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<context:annotation-config />   

<context:component-scan
    base-package="com.mycom.myproject" />

<!-- Enable annotation driven controllers, validation etc... -->
<mvc:annotation-driven />

<mvc:resources mapping="/resources/**" location="/resources/" />

<bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost/mydatabase"/>
    <property name="username" value="root"/>
    <property name="password" value="root"/>
</bean>

<!-- Declare a transaction manager -->

<bean id="transactionManager"
class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
p:dataSource-ref="datasource" />

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="datasource" />
</bean>

<!-- scan for mappers and will automatically scan the whole classpath for xmls -->
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
    <property name="basePackage" value="com.mycom.myproject.db.mybatis.dao" />
</bean> 

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

我不知道为什么会出现这个错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T11:36:25.987

查看错误

```
Mapped Statements collection does not contain value for com.mycom.myproject.db.mybatis.dao.UserMapper.countByExample 
```

看起来 myBatis 没有找到您的查询。这可能是因为它没有找到您的 xml 映射。它应该`com.mycom.myproject.db.mybatis.dao package`符合您的配置：

```
<!-- scan for mappers and will automatically scan the whole classpath for xmls -->
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
    <property name="basePackage" value="com.mycom.myproject.db.mybatis.dao" />
</bean> 
```

在项目结构中，UserMapper.java 和 UserMapper.xml 可以在不同的文件夹中（如果你想将 xml 和 java 文件分开），但它们应该在同名的包中，并且它们应该组合在同一个文件夹中战争构建过程，因为它们都应该根据您的配置在类路径中可用。

# ios - SQLite 数据库中的行顺序（iOS）

> ID：11817253
> 
> 赞同：0
> 
> 时间：2012-08-05T14:34:29.307
> 
> 标签：ios, sqlite, indexing, row

我有一个数据库，其中包含一个名为“connection”的表，为了简单起见，假设我只有一个名为“rowName”的列。现在假设我添加了一行 rowName = a; 现在我添加一行 rowName = q，最后我添加一行 rowName = w（字母完全随机）。现在，我通过以下声明激怒了结果：

```
 NSString * queryStatements = [NSString stringWithFormat:@"SELECT rowName,  FROM tableName"]; 
```

并使用代码：

```
NSMutableArray * rows = [[NSMutableArray alloc] init]; //create a new array
sqlite3_stmt * statement;
    if(sqlite3_prepare_v2(databaseHandle, [queryStatements UTF8String], -1, &statement, NULL) == SQLITE_OK){
        while (sqlite3_step(statement) == SQLITE_ROW){
           NSString * rowName = [NSString stringWithUTF8String : (char*) sqlite_column_text(statement, 1)];
[rows addObject : connection];
} sqlite3_finalize(statement_;
} 
```

在数组 rows 中，索引 0 处的对象是否为 rowName = a，索引 1 处的 rowName = q，索引 2 处的 rowName = w？还是随机的？有没有办法让它不是随机的？

另外，如果我删除一行，它会对其他行的顺序有什么影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:40:08.223

永远不要依赖数据库中的排序顺序。如果需要，请始终指定一个。

```
SELECT rowName FROM tableName order by rowName 
```

为您提供按 rowName 排序的数据。如果您需要不同的顺序，则需要另一列。

如果需要，您还可以对 NSArray 进行排序。

您在寻找什么排序顺序？

# c++ - 在 Windows 中从接口名称获取 IP 地址

> ID：11817260
> 
> 赞同：0
> 
> 时间：2012-08-05T14:36:08.340
> 
> 标签：c++, winapi, networking, porting, windows-networking

我想知道，winapi，我可以使用接口名称从中获取 ipaddress。其Linux版本如下。

```
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <netinet/in.h>
#include <net/if.h>
#include <unistd.h>
#include <arpa/inet.h>
int main()
{
    int fd;
    struct ifreq ifr;
    char iface[] = "eth0";
    fd = socket(AF_INET, SOCK_DGRAM, 0);
    //Type of address to retrieve - IPv4 IP address
    ifr.ifr_addr.sa_family = AF_INET;
    //Copy the interface name in the ifreq structure
    strncpy(ifr.ifr_name , iface , IFNAMSIZ-1);
    ioctl(fd, SIOCGIFADDR, &ifr);
    close(fd);
    //display result
    printf("%s - %s\n" , iface , inet_ntoa(( (struct sockaddr_in *)&ifr.ifr_addr )->sin_addr) );
    return 0;
} 
```

我正在寻找类似的功能（如上面的代码），但**适用于 C++ 中的窗口**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-31T12:57:36.957

请参阅 GetAdaptersAddresses 函数的示例。FriendlyName 和 FirstUnicastAddress 是您需要的字段。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915%28v=vs.85%29.aspx)

另请参阅：[从 IPv4 地址获取网络接口名称](https://stackoverflow.com/questions/17288908/get-network-interface-name-from-ipv4-address)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:34:49.793

您必须先初始化 WinSock，然后才能使用 gethostname、gethostbyname 和 inet_ntoa 函数。以下[链接](http://suite101.com/article/socket-programming-gethostbyname-a19557)将为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T14:40:15.367

SIGAR 是一个用于获取系统信息（CPU、RAM、磁盘和网络）的跨平台库。它将允许您列出 Mac / Windows / Linux 上的所有网络接口并获取您可能需要的任何其他信息。

[http://support.hyperic.com/display/SIGAR/Home](http://support.hyperic.com/display/SIGAR/Home)

如果您不想使用整个库，我相信您可以检查代码以找到您需要的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T15:31:12.987

也许你可以根据你的需要调整它......

[http://kodeyard.blogspot.in/2009/09/get-ip-address-in-cwindows.html](http://kodeyard.blogspot.in/2009/09/get-ip-address-in-cwindows.html)

# ruby-on-rails - RoR 3.2 中的浮点值被截断

> ID：11817261
> 
> 赞同：0
> 
> 时间：2012-08-05T14:36:11.320
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 3.2 应用程序中保存我的经度和纬度时，该值在保存时被截断。

我在控制台中尝试过，它保存了全部价值：

```
 item.update_attributes(:latitude => '51.07763839854951')

 item.latitude:

 => 51.07763839854951 
```

在浏览器中保存相同的值会给我一个输出：

```
 51.0865174 
```

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:13:50.850

该值存储在数据库中时可能会被截断。不管确切的原因是什么，如果这个值是精确的并且需要无损地存储和检索，那么浮点数可能是错误的数据类型。当您对浮点数执行某些算术运算时，它们可能会失去精度，因此它们不适用于必须精确的值。

当您使用 Rails 迁移定义数据库模式时，您可以将`:decimal`类型用于必须精确存储的十进制值。（当 ActiveRecord 将这些值从 DB 中拉出时，它们将成为`BigDecimal`对象而不是`Float`s 您可以在`BigDecimal`s 上进行算术运算而不会丢失精度。）

# c# - 使用 TripleDESCryptoServiceProvider 解密的数据具有附加字符

> ID：11817262
> 
> 赞同：0
> 
> 时间：2012-08-05T14:36:13.283
> 
> 标签：c#, encryption, encoding, tripledes

使用 TripleDESCryptoServiceProvider 解密数据时遇到问题。问题是解密后的值除了原始值之外还包含一些额外的奇怪字符

例如，如果我提供要加密的“rastko”，我稍后会得到类似“rastko⥊㮶”的解密。对于其他值，它可能是不同数量的“虚拟”字符，或者在某些情况下我会得到确切的值。

然后，我看到所有加密数据的字节数组大小都可以被 8 整除。看起来任何提供的数据都是在可以被 8 整除的值上四舍五入的。只有在原始编码值可以被 8 整除的情况下，解密才会检索到适当的值.

以下是我正在使用的方法：

```
 public static byte[] EncryptPassword(string password, out byte[] cryptoKey, out byte[] cryptoIV)
    {
        try
        {
            UnicodeEncoding unicodeEncoding = new UnicodeEncoding();
            byte[] unicodePassword = unicodeEncoding.GetBytes(password);
            byte[] encryptedPassword;

            using (TripleDESCryptoServiceProvider tripleDes = new TripleDESCryptoServiceProvider())
            {
                tripleDes.Key = GetCryptoKey();
                tripleDes.Mode = CipherMode.CBC;
                tripleDes.Padding = PaddingMode.PKCS7;
                cryptoKey = tripleDes.Key;
                cryptoIV = tripleDes.IV;

                using (MemoryStream memoryStream = new MemoryStream())
                {
                    ICryptoTransform cryptoTransform = tripleDes.CreateEncryptor();

                    using (
                        CryptoStream cryptoStream = new CryptoStream(memoryStream, cryptoTransform, CryptoStreamMode.Write))
                    {
                        cryptoStream.Write(unicodePassword, 0, unicodePassword.Length);
                        ////cryptoStream.FlushFinalBlock();
                    }

                    encryptedPassword = memoryStream.ToArray();
                }
            }

            return encryptedPassword;
        }
        catch (Exception ex)
        {
            throw new Exception("Password encryption failed !", ex);
        }
    }

    public static string DecryptPassword(byte[] encryptedPassword, byte[] cryptoKey, byte[] cryptoIV)
    {
        try
        {
            UnicodeEncoding unicodeEncoding = new UnicodeEncoding();
            string readablePassword;

            using (TripleDESCryptoServiceProvider tripleDes = new TripleDESCryptoServiceProvider())
            {
                tripleDes.Key = cryptoKey;
                tripleDes.IV = cryptoIV;
                tripleDes.Mode = CipherMode.CBC;
                tripleDes.Padding = PaddingMode.PKCS7;

                // Create a new MemoryStream using the passed 
                // array of encrypted data.
                using (MemoryStream memoryStream = new MemoryStream(encryptedPassword))
                {
                    // Create crypto transform that defines the basic operations of cryptographic transformations.
                    ICryptoTransform cryptoTransform = tripleDes.CreateDecryptor();

                    // Create a CryptoStream using the MemoryStream and the passed key and initialization vector (IV).
                    using (CryptoStream decryptoStream = new CryptoStream(memoryStream, cryptoTransform, CryptoStreamMode.Write))
                    {
                        decryptoStream.Write(encryptedPassword, 0, encryptedPassword.Length);
                        ///decryptoStream.FlushFinalBlock();
                    }

                    byte[] decryptedPassword = memoryStream.ToArray();

                    //Convert the buffer into a string and return it.
                    readablePassword = unicodeEncoding.GetString(decryptedPassword, 0, decryptedPassword.Length);
                }
            }

            return readablePassword;
        }
        catch (Exception ex)
        {
            throw new Exception("Password decryption failed !", ex);
        }
    }

    private static byte[] GetCryptoKey()
    {
        UnicodeEncoding unicodeEncoding = new UnicodeEncoding();
        string plainKey = "rastkoisajev2310982josipasenera153";
        byte[] encodedKey = unicodeEncoding.GetBytes(plainKey);

        // Prepares 192 bit key
        byte[] preparedKey = new byte[24];
        Array.Copy(encodedKey, preparedKey, 24);

        return preparedKey;
    } 
```

这是示例测试调用：

```
 private static void CryptoTest()
    {
        string password = "rastko";

        byte[] cryptoKey;
        byte[] cryptoIV;

        byte[] encryptedPassword = Crypto.EncryptPassword(password, out cryptoKey, out cryptoIV);

        string decryptedPAssword = Crypto.DecryptPassword(encryptedPassword, cryptoKey, cryptoIV);
    } 
```

我没有很好的安全经验。我看到的是 IV 向量是 8 字节大小，我发现它与 BlockSize 相关，比 IV 大小大 8 倍。IV 向量的 TripleDESCryptoServiceProvider 使用 8 字节值。我无法改变这一点。

你能告诉我我必须做什么还是我写错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:06:51.163

DES 是一个 64 位的块密码。任何不能完全划分为 64 位（=8 字节）块的文本都需要填充以构成整数块。您需要为加密和解密设置填充。如果您可以控制两端，则使用 PKCS#5 填充来加密和解密。如果您只能控制解密端，那么请询问加密端他们正在使用什么填充并期望得到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:59:56.757

*请注意，加密密码通常不是可行的方法。请改用[PBKDF2](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)。不要混淆密码和密钥！*

尝试确保您的 CryptoStreams 被关闭或刷新：

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.flushfinalblock.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.flushfinalblock.aspx)

如果你不这样做，那么填充/取消填充可能不会被执行，而是你会得到垃圾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:37:53.463

经过详细调查，我找到了解决问题的方法。我改变了一点解密逻辑。

而不是 DecryptPassword 方法中的这一部分：

```
 // Create a CryptoStream using the MemoryStream and the passed key and initialization vector (IV).
                using (CryptoStream decryptoStream = new CryptoStream(memoryStream, cryptoTransform, CryptoStreamMode.Write))
                {
                    decryptoStream.Write(encryptedPassword, 0, encryptedPassword.Length);
                    ///decryptoStream.FlushFinalBlock();
                }

                byte[] decryptedPassword = memoryStream.ToArray();

                //Convert the buffer into a string and return it.
                readablePassword = unicodeEncoding.GetString(decryptedPassword, 0, decryptedPassword.Length);
            } 
```

我现在使用 CryptoStream 中的读取逻辑，然后我只是删除可空字符。现在是这样的：

```
 // Create a CryptoStream using the MemoryStream and the passed key and initialization vector (IV).
                    using (CryptoStream decryptoStream = new CryptoStream(memoryStream, cryptoTransform, CryptoStreamMode.Read))
                    {
                        // Create buffer to hold the decrypted data.
                        byte[] fromEncrypt = new byte[encryptedPassword.Length];

                        decryptoStream.Read(fromEncrypt, 0, fromEncrypt.Length);

                        //Convert the buffer into a string and return it.
                        readablePassword = unicodeEncoding.GetString(fromEncrypt);
                        readablePassword = readablePassword.Replace("\0", string.Empty);
                    } 
```

这对我来说非常有效！谢谢大家的时间。

# javascript - DOMContentLoaded 和 DOMContentReady 有什么区别？

> ID：11817264
> 
> 赞同：9
> 
> 时间：2012-08-05T14:36:22.007
> 
> 标签：javascript, html, domready

[根据 MDN wiki，](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMContentLoaded) `DOMContentLoaded`当“页面的 DOM 准备就绪，[尽管] 引用的样式表、图像和子框架可能未完成加载”时将触发。

怎么样`DOMContentReady`？它只是一个别名吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-05T15:28:16.100

我声称事件类型“DOMContentReady”在当前的实现中不存在（意思是，当前的实现没有触发这样的事件类型），并且这样的名称的出现只是*lapsus memoriae*。

“DOMContentLoaded”这个名字不容易记住，而且由于jQuery库使用方法`.ready()`绑定这个事件类型，我猜，有些人只是错误地使用了“DOMContentReady”这个名字来指代正确的名字“DOMContentLoaded”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T14:46:31.100

据我所知`DOMContentReady`不是标准事件。坚持下去`DOMContentLoaded`。

# cordova - Phonegap 相机不工作

> ID：11817268
> 
> 赞同：0
> 
> 时间：2012-08-05T14:36:40.180
> 
> 标签：cordova, camera

我正在开发一个需要使用相机的 Phonegap 应用程序。我从文档中获取示例并将其粘贴到`camera.js`文件中。这个项目将使用构建Phonegap，但现在我在一个Android项目中本地进行调试以进行调试。此外，我在 UI 上使用 jQuery Mobile。当我转到该`new.html`页面时，相机没有出现，当我单击捕获新按钮时，我在`index.html`页面中收到一个错误，说这`capturePhoto()`是未定义的，即使我是从`new.html`页面调用该函数。感谢您提前提供任何帮助。

这是`new.html`页面的代码。

```
<!DOCTYPE html> 
 <html> 
   <head> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel = "stylesheet" href="assets/css/jquery.mobile-1.0.1.min.css" />
<script src="assets/js/jquery.js"></script>
<script src="assets/js/jquery.mobile-1.0.1.min.js"></script>
<script src="cordova-2.0.0.js"></script>
<script src="assets/js/camera.js"></script>
</head>
<body> 
<div data-role="page">
    <div data-role="header">
        <a href="#" data-rel="back" data-icon="back" data-theme="e">Back</a>
            <h1>New Moment</h1>
        </div><!-- /header -->
        <div data-role="content">   
            <a href="#" data-role="button" data-icon="gear" data-iconpos="right" data-theme="e" onclick="capturePhoto();" >Capture New</a>
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Company Name Here</h4>
        </div><!-- /footer -->
    </div><!-- /page -->
    <img style="display:none;width:60px;height:60px;" id="smallImage" src="small.png" />
    <img style="display:none;" id="largeImage" src="large.png" />
</body> 
```

这是 camera.js 文件中的代码。

```
var pictureSource;   // picture source
var destinationType; // sets the format of returned value 

// Wait for PhoneGap to connect with the device
//
document.addEventListener("deviceready",onDeviceReady,false);

// PhoneGap is ready to be used!
//
function onDeviceReady() {
    pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
}

// Called when a photo is successfully retrieved
//
function onPhotoDataSuccess(imageData) {
  // Uncomment to view the base64 encoded image data
   console.log(imageData);

  // Get image handle
  //
  var smallImage = document.getElementById('smallImage');

  // Unhide image elements
  //
  smallImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  smallImage.src = "data:image/jpeg;base64," + imageData;
}

// Called when a photo is successfully retrieved
//
function onPhotoURISuccess(imageURI) {
  // Uncomment to view the image file URI 
   console.log(imageURI);

  // Get image handle
  //
  var largeImage = document.getElementById('largeImage');

  // Unhide image elements
  //
  largeImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  largeImage.src = imageURI;
}

// A button will call this function
//
function capturePhoto() {
    consoe.log("CAPTURE");
  // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50 });
}

// A button will call this function
//
function capturePhotoEdit() {
  // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true }); 
}

// A button will call this function
//
function getPhoto(source) {
  // Retrieve image file location from specified source
  navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: destinationType.FILE_URI,
    sourceType: source });
}

// Called if something bad happens.
// 
function onFail(message) {
  alert('Failed because: ' + message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:04:12.977

By placing the camera.js in the index.html head section it worked. This is kinda weird because I want to run it on the new.html page and display the image their as well.

# facebook-graph-api - API 照片拍摄日期时间

> ID：11817276
> 
> 赞同：3
> 
> 时间：2012-08-05T14:37:57.297
> 
> 标签：facebook-graph-api, datetime, facebook-fql, photo

我需要通过 Facebook API 从相册中获取照片，并且还需要拍摄照片的日期时间。是不是还是不行？不是有一些解决方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:43:04.490

Facebook 不会给你花时间处理他们的照片，只有当照片通过`created`FQL 或`created_time`Graph API 中的字段上传到 Facebook 系统时。

您可以尝试在 Facebook 系统上下载最大版本的照片并检查 EXIF 数据。我怀疑是否会有。

# asp.net - ASP.NET 4.0 中的 ASP.NET 2.0 的 EventLog 等价物是什么？

> ID：11817281
> 
> 赞同：0
> 
> 时间：2012-08-05T14:38:31.343
> 
> 标签：asp.net, .net, c#-4.0

我在 ASP.NET 2.0 中创建了一个项目，我可以在其中使用我的自定义错误处理功能`EventLog.WriteEntry("mysite.com",message,entryType)` 但现在我正在 ASP.NET 4.0 中构建一个项目，但在这里找不到此类！我很困惑我是否以某种方式错过了它，或者有类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:44:51.167

根据 MSDN [http://msdn.microsoft.com/en-us/library/xzwc042w.aspx ，即使在 4.0 中也是如此](http://msdn.microsoft.com/en-us/library/xzwc042w.aspx)

它仍然存在于 System.Diagnostics 命名空间中

# c# - Nancy：从“/”提供静态内容（例如 index.html）？

> ID：11817283
> 
> 赞同：13
> 
> 时间：2012-08-05T14:38:38.353
> 
> 标签：c#, nancy

我正在尝试使用 Nancy 制作单页 Web 应用程序。因此，我希望我的根 URL 提供一个纯 .html 文件，没有任何视图逻辑或任何东西。

我试过

```
Get["/"] = parameters => Response.AsHtml("content/index.html") 
```

但是没有`AsHtml`。

我尝试了一个自定义引导程序

```
conventions.StaticContentsConventions.Add(
    StaticContentConventionBuilder.AddFile("/", @"content/index.html")
); 
```

但显然它认为“/”不是文件——南希给了我一个目录列表`http://localhost:<port>/`。

我该怎么办？这不应该这么难，对吧？

附言。有什么办法可以关闭该目录列表？感觉很没有安全感。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-31T10:32:52.173

添加一个`index.html`默认服务的模块：

```
public IndexModule() : base("")
{
    Get[@"/"] = parameters =>
    {
        return Response.AsFile("Content/index.html", "text/html");
    };
} 
```

然后使用引导程序中的约定提供其余文件：

```
protected override void ConfigureConventions(NancyConventions nancyConventions)
{
    nancyConventions.StaticContentsConventions.Add(StaticContentConventionBuilder.AddDirectory("/", "Content"));
    base.ConfigureConventions(nancyConventions);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T14:51:40.153

只需将其放入您的视图文件夹并执行以下操作：

```
Get["/"] = _ => View["index"]; 
```

目录列表与 Nancy 无关，无论您使用什么主机都显示它。

# c++ - Visual C++ 中的 MSVCR90.dll 分析

> ID：11817285
> 
> 赞同：-1
> 
> 时间：2012-08-05T14:38:49.767
> 
> 标签：c++, visual-studio, profiling, msvcr90.dll

我最近开始使用 Microsoft Visual Studio Team System Profiler。

除了一些奇怪的结果外，一切都很好。分析器告诉我，很多执行瓶颈都与 MSVCR90.dll 有关。

这会是一个准确的结果吗？这个 dll 里面有什么可能会消耗我这么多的执行时间？

我怀疑我正在使用的矩阵库（MTL4）在后台进行了一些内存分配和复制，也许这就是问题所在。这个dll是否以某种方式负责内存分配和移动数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:50:35.330

是的，它包含来自编译器标准库的函数。

`malloc`将是其中之一，因此它当然可以参与内存分配。

# javascript - 使用 Javascript 的三级面板菜单，无法正确加载内容

> ID：11817288
> 
> 赞同：1
> 
> 时间：2012-08-05T14:39:06.437
> 
> 标签：javascript, jquery, ajax, navigation

我试图在我的网站上实现的导航框架有一个小问题。编码如下：

HTML

```
<div class="panel1">
    first navigation ul li set
</div>
<div class="panel2" id="subnav">
    AJAX loaded navigation ul li set
</div>
<div class="panel3" id="content">
    content loaded by AJAX
</div> 
```

Javascript

```
$(document).ready(function () {
    $('a.ajax-link-top').click( function( event ) {
        set_ajax_link( $(this), event );
    });
});

function set_ajax_link( el, event ){
    event.preventDefault();
    var url = el.attr("href");
    load_menu_content( url );
}

function load_menu_content( url ){
    $("#subnav").load( url, { 'ajax': 'true' }, function(){
        $('#subnav a.ajax-link').click( function( event ) {
            set_ajax_link_sub( $(this), event );
        });
    });
}

function set_ajax_link( el, event ){
    event.preventDefault();
    var url = el.attr("href");
    load_page_content( url );
}

function load_page_content( url ){
    $("#content").load( url, { 'ajax': 'true' }, function(){
        $('#content a.ajax-link').click( function( event ) {
            set_ajax_link_sub( $(this), event );
        });
    });
} 
```

修复如下：

HTML：相同的 Javascript：

```
$(document).ready(function () {
    var panel2 = $(".panel2");
    var panel3 = $(".panel3");

    $(".panel1").click(function (e) {
        e.preventDefault();

        var url = e.target.href;
        $(".panel2").load(url);
    });

    $(".panel2").click(function (e) {
        e.preventDefault();

        var url_2 = e.target.href;
        panel3.load(url_2);
        });
}); 
```

目标是获取类 ajax-link-top 的链接以在#subnav div 中加载子导航菜单，并获取 ajax-link 类的链接以将页面内容加载到 #content div，从顶部导航面板或子导航面板。

我现在得到的结果是，只要单击任何链接，它们就会将内容、菜单或其他内容加载到#content div中。我确定我的 JS 代码中的某个地方有些问题，但我看不到它。

任何和所有的帮助表示赞赏！米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:10:07.587

这假设您使用的是 jQuery。

我会采取一种不同的方法，而不是将事件处理程序绑定到每个单独的链接，您可以定位面板 div 本身 - 点击事件会冒泡。它将为您节省大量重复绑定。如果容器中的元素多于一系列链接，则应添加检查以确保在容器中单击的内容实际上是链接，否则如果单击非链接元素，则会收到虚假事件。这样你只绑定两个事件。

我添加了一个伪造的负载来模拟 AJAX 负载来说明。[http://jsfiddle.net/WFb8a/](http://jsfiddle.net/WFb8a/)有一个小提琴。

HTML

```
<div class="panel1">
    <ul>
        <li><a id="subnav1" href="#link1">Link 1</a></li>
        <li><a id="subnav2" href="#link2">Link 2</a></li>
    </ul>        
</div>
<div class="panel2" id="subnav">
    AJAX loaded navigation ul li set
</div>
<div class="panel3" id="content">
    content loaded by AJAX
</div>

<script id="subnav1-content">
    <ul>
        <li><a id="subnav1-link1" href="#link1">Subnav1 Link 1</a></li>
        <li><a id="subnav1-link2" href="#link2">Subnav1 Link 2</a></li>
    </ul>        
</script>

<script id="subnav2-content">
    <ul>
        <li><a id="subnav2-link1" href="#link1">Subnav2 Link 1</a></li>
        <li><a id="subnav2-link2" href="#link2">Subnav2 Link 2</a></li>
    </ul>        
</script>

<script id="subnav1-link1-content">
    <h1>Content 1</h1>
</script>

<script id="subnav1-link2-content">
    <h1>Content 2</h1>
</script>

<script id="subnav2-link1-content">
    <h1>Content 3</h1>
</script>

<script id="subnav2-link2-content">
    <h1>Content 4</h1>
</script>​ 
```

Javascript

```
$(document).ready(function () {
    var $panel2 = $(".panel2");
    var $panel3 = $(".panel3");

    $(".panel1").click(function (e) {
        e.preventDefault();
        e.stopPropagation();

        $panel2.html($("#" + e.target.id + "-content").html());
    });

    $(".panel2").click(function (e) {
        e.preventDefault();
        e.stopPropagation();

        $panel3.html($("#" + e.target.id + "-content").html());
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:03:23.277

这是我将如何处理的。

首先，我会使用事件委托，这样我就不必担心在加载内容时绑定事件：

```
$(function () {
    $(document).on("click", "a.js-load-subnav", function (ev) {
        $("#subnav").load($(this).attr("href"), {ajax: "true"});
        return false;
    });
    $(document).on("click", "a.js-load-content", function (ev) {
        $("#content").load($(this).attr("href"), {ajax: "true"});
        return false;
    });
}); 
```

然后，我会适当地设置导航和子导航的 HTML，以便链接使用`js-load-subnav`类或`js-load-content`类。（我曾经`js-`表明这些链接仅供 JavaScript 使用，对链接样式没有用处。）

# php - 由于一段php代码，mysqld意外结束

> ID：11817289
> 
> 赞同：0
> 
> 时间：2012-08-05T14:39:07.993
> 
> 标签：php, mysql

我这里有一个代码，它通过数据库记录填充下拉列表......也来自不同的表。

我有几个表，其中 1 个表 = 1 个下拉列表

代码：（showhide_dropdown）

```
<?php 
$hostname = "localhost"; // usually is localhost, but if not sure, 
             check with your hosting company, 
             if you are with webune leave as localhost 
$db_user = "root"; // change to your database password 
$db_password = ""; // change to your database password 
$database = "minquep_test"; // provide your database name 
$db_table1 = "roles"; // leave this as is 
$db_table2 = "companies";
$db_table3 = "albury_branch";
$db_table4 = "minquep_branch";
$db_table5 = "countries";

$db = mysql_connect($hostname, $db_user, $db_password); 
mysql_select_db($database,$db); 
?> 

<?php
$roles_sql="SELECT role_id, role_name FROM $db_table1";
$comp_sql= "SELECT company_name FROM $db_table2";
$albury_sql= "SELECT albury_id, albury_name FROM $db_table3";
$minq_sql= "SELECT minquep_id, minquep_name FROM $db_table4"; 
$count_sql= "SELECT country_id, country_name FROM $db_table5"; 

$roles_result=mysql_query($roles_sql); 
$comp_result=mysql_query($comp_sql); 
$al_result=mysql_query($albury_sql); 
$minq_result=mysql_query($minq_sql);
$count_result=mysql_query($count_sql);

$roles_options=""; 
$comp_options="";
$al_options="";
$minq_options="";
$count_options="";

while ($roles_row=mysql_fetch_array($roles_result)) { 

    $roles_id=$roles_row["role_id"]; 
    $role=$roles_row["role_name"]; 
    $roles_options.="<OPTION VALUE=\"$role\">".$role; 
} 

while ($comp_row=mysql_fetch_array($comp_result)) { 

    $company=$comp_row["company_name"]; 
    $comp_options.="<OPTION VALUE=\"$company\">".$company; 
} 

while ($al_row=mysql_fetch_array($al_result)) { 

    $albury=$al_row["albury_name"]; 
    $al_options.="<OPTION VALUE=\"$albury\">".$albury;
} 

while ($minq_row=mysql_fetch_array($minq_result)) { 

    $minquep=$minq_row["minquep_name"]; 
    $minq_options.="<OPTION VALUE=\"$minquep\">".$minquep;
} 

while ($count_row=mysql_fetch_array($count_result)) { 

    $country=$count_row["country_name"]; 
    $count_options.="<OPTION VALUE=\"$country\">".$country;
} 

?> 
```

起初，它确实工作得很好，但是当我打开发布此代码的页面时……突然弹出一条 mysql.exe 错误消息（正常的 Microsoft 错误）说：意外错误……类似的东西.

然后我的页面上将显示一个mysql错误/警告..

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result 
         resource in C:\xampp\htdocs\minquep-native\pages\showhide_dropdown.php 
         on line 60 
```

我不明白这个问题。我是 PHP 新手，请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:46:51.193

您的问题似乎与此查询有关：

```
SELECT country_id, country_name FROM countries 
```

确保列和表确实存在（尝试直接在 mysql 中执行查询，看看你得到了什么）。您收到的错误是因为无法执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T15:12:43.977

所以你得到的错误是早期错误的症状：

在第 60 行，您执行以下操作：

```
while ($comp_row=mysql_fetch_array($comp_result)) { 
```

[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)需要一个 mysql 结果对象。但是它得到了其他东西（实际上是错误的）。它得到其他东西的原因是因为这条线：

```
$comp_result=mysql_query($comp_sql); 
```

返回 False 而不是 Mysql 结果，更改此：

```
$roles_result=mysql_query($roles_sql); 
$comp_result=mysql_query($comp_sql); 
$al_result=mysql_query($albury_sql); 
$minq_result=mysql_query($minq_sql);
$count_result=mysql_query($count_sql); 
```

至：

```
$roles_result=mysql_query($roles_sql); 
if(mysql_errno() != 0) echo mysql_error();
$comp_result=mysql_query($comp_sql); 
if(mysql_errno() != 0) echo mysql_error();
$al_result=mysql_query($albury_sql); 
if(mysql_errno() != 0) echo mysql_error();
$minq_result=mysql_query($minq_sql);
if(mysql_errno() != 0) echo mysql_error();
$count_result=mysql_query($count_sql);
if(mysql_errno() != 0) echo mysql_error(); 
```

看看发生了什么错误。

笔记：

如果您使用 Laravel 或任何其他框架，它会为您捕获这些错误。另外我会使用 mysqli 而不是 mysql，因为 mysql 已过时，请参阅： http: [//php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php) [http://php.net/manual/en/mysqli.overview.php](http://php.net/manual/en/mysqli.overview.php)

# responsive-design - 使 Fb 和 twitter 小部件具有响应性

> ID：11817299
> 
> 赞同：3
> 
> 时间：2012-08-05T14:40:13.800
> 
> 标签：responsive-design

如何让 Fb 和 Twitter 小部件在所有设备上都能响应？我尝试将 iframe 宽度设置为 100%，但是当我在智能手机中查看它时，它会拉伸导致水平滚动条的布局。这也发生在 youtube 视频上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-30T02:31:42.443

尝试：

```
#twitter-widget-0{
   width: 100% !important;  
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T01:37:02.563

对于推特！我找到的最简单的解决方案是通过 css。将 .twtr-doc 类编辑为 100% 的宽度。

对于 FB（假设你在谈论类似框）我将第一个宽度更改为 auto，第二个宽度（内联 css）更改为 100% 我将使用可口可乐作为示例...

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fcocacola&amp;width=auto&amp;height=395&amp;colorscheme=light&amp;show_faces=false&amp;border_color&amp;stream=true&amp;header=false&amp;appId=176993455739426" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100%; height:395px;" allowTransparency="true"></iframe> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-11T00:27:49.950

Twitter对它自己的反应相当敏感。但是纵横比呢？它归结为与 youtube 视频相同的问题。两者都是 iframe。

现在我应该感谢一些人为 youtube 提出了这个，但我忘记了是谁。对不起。无论如何，[Tod Moto 的 Fluidvids 也使用它。](http://toddmotto.com/fluid-and-responsive-youtube-and-vimeo-videos-with-fluidvids-js/)

所以这就是诀窍。您将 youtube 或 twitter 小部件的 iframe 放置在 div（或任何块元素）内。给它这些 CSS 值：

```
div {
position: relative;
padding-top: SEE BELOW
width: 100%; } 
```

然后将其应用于 iframe：

```
div iframe {
position: absolute;
top: 0px;
left: 0px;
width: 100%;
height: 100%; } 
```

在见下文，你应该写下你的纵横比。您可以通过将宽度除以高度并乘以 100% 来计算此值。如果你还没有发现的话，这在 Sass 中是非常简单的。

我的 html 看起来像这样，顺便说一句。twitter javascript 文件不是内联的，因为我 Ajax 小部件和内联脚本在 Ajaxed 时不运行。

```
<aside>
    <div>
        <a class="twitter-timeline" height="570" href="https://twitter.com/PartosNL" data-widget-id="520500579978596352">Tweets van @PartosNL</a>
        <script src="<?php bloginfo('template_url');?>/js/twitter.js"></script>
        <br class="clear">
    </div>
</aside> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-04T07:27:54.170

```
.twitter-tweet{
   width: 100% !important;  
} 
```

使用 class 而不是 id #twitter-widget-0 因为如果您在您的网站中添加多个 twitter 提要，它只会选择第一条推文并将 css 添加到其中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T12:36:55.683

对于推特尝试：

第一步：下载 Twitter 的小部件 js 文件并将其放入“YOUR_LOCAL_PATH/js”

* * *

第 2 步：修改小部件调用脚本如下：!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0]; if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="YOUR_LOCAL_PATH/js/twitter.widgets.js";fjs.parentNode.insertBefore(js, fjs);}}(文档,"脚本","twitter-wjs"); 您应该看到我已经删除了“p”变量和协议声明，并且指向了 Twitter 小部件 js 文件的本地副本。

* * *

第 3 步：使用类似[http://jsbeautifier.org/](http://jsbeautifier.org/)的内容使 widgets.js 文件中的代码可读。之后将该代码复制到“YOUR_LOCAL_PATH/js/twitter.widgets.js”中

* * *

步骤 4.1：查找并修改如下我建议的： `dimensions: { DEFAULT_HEIGHT: "600", DEFAULT_WIDTH: "100", // modify this to be 100 - like 100% NARROW_WIDTH: "100", // modify this to be 100 - like 100% MIN_WIDTH: "100", // modify this to be 100 - like 100% MIN_HEIGHT: "200", WIDE_MEDIA_PADDING: 81, NARROW_MEDIA_PADDING: 16, WIDE_MEDIA_PADDING_CL: 60, NARROW_MEDIA_PADDING_CL: 12 },`

步骤 4.2：查找并修改如下我建议的：从这个：.frame.style.minWidth = s.dimensions.MIN_WIDTH + "px" 到这个 .frame.style.minWidth = s.dimensions.MIN_WIDTH + "%"

* * *

第 5 步。恭喜，您现在拥有一个响应式 Twitter 小部件！如果他们发布了新版本的小部件，只需重新制作我建议的步骤！

# iphone - 越狱 iPod Touch 的重新启动应用程序

> ID：11817306
> 
> 赞同：2
> 
> 时间：2012-08-05T14:40:42.660
> 
> 标签：iphone, jailbreak

所以我有第三代 iPod Touch，带有 ios 4.2.1 并且它已经越狱了。我正在使用 SSH 在它和我的计算机之间传输文件，但我的问题是，当我向其中添加文件并且我想查看它时，我需要重新启动或重新启动我的 iPod 才能看到它。所以我想到了一个放置在主屏幕上的非常小的应用程序，它可以重新启动 iPod。我的问题是我对苹果编码一无所知**。**是否有“单线解决方案”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:37:37.237

如果您想要一个只会杀死跳板的应用程序，那么在

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

只需添加以下内容：

```
system("killall SpringBoard"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T00:12:54.357

我不知道您传输**文件**的确切含义。您是指转移**应用程序**吗？

如果是这样，您可以通过 SSH 连接到您的手机并执行此操作，使新安装的（通过 SSH 复制）应用程序出现在主屏幕上

```
>ssh mobile@ipod
>uicache 
```

或者

```
>ssh root@ipod
>su mobile -c uicache 
```

取决于您是否将 iPod 设置为允许`root`以`mobile`. 显然，在我上面的示例中，您必须将 iPod 的 IP 地址映射到主机名`"iPod"`，否则使用 IP 地址。

您可能知道也可能不知道的另一个选项是**SBSettings**应用程序本身。如果你从 Cydia 安装它，它有一个非常好的切换来简单地重新启动。这并不比拥有一个“小应用程序”来重新启动（我猜是额外的触摸）更多的工作。

如果您正在编写一个 Objective-C iOS 应用程序，并且您想以**编程**方式执行此操作（问题中并没有 100% 明确），[请查看此答案](https://stackoverflow.com/a/2021332/119114)。[有关使用](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/notify_post.3.html)的信息，请参见此处[`notify_post`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/notify_post.3.html)

# php - PHP后台进程一天要做些什么？

> ID：11817309
> 
> 赞同：1
> 
> 时间：2012-08-05T14:40:55.407
> 
> 标签：php, linux, process, background

我正在尝试每天在 linux 服务器上自动运行我的 PHP 脚本一次，而无需按下任何东西，只需一次，并且进程会一直运行到特定日期，

如何在不给服务器带来高流量负载的情况下做到这一点？

到目前为止，我所做的是使用[`ignore_user_abort()`](http://php.net/manual/en/function.ignore-user-abort.php)函数来保持它的运行，并[`sleep()`](http://php.net/manual/en/function.sleep.php)在 while 循环中使用函数来检查每个特定时间第二天还剩下多少，但这对于服务器来说似乎是一个很高的过程

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:43:37.600

如果您使用的是 Linux 服务器，则有一种更简单的方法。只需创建一个[cron 作业](http://en.wikipedia.org/wiki/Cron)（[教程](http://www.unixgeeks.org/security/newbie/unix/cron-1.html)）以每天运行一次脚本。

我从来没有使用过它，但是 Windows 服务器应该有一个叫做“任务计划程序”的东西来做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:47:32.867

```
00 11 * * * /usr/local/bin/php /home/you/your_script.php 
```

这是一个 cron 作业，将在每天上午 11:00 运行您的脚本。

# php - 带有点奇数结果的 Codeigniter URI 段

> ID：11817310
> 
> 赞同：0
> 
> 时间：2012-08-05T14:40:55.767
> 
> 标签：php, codeigniter, uri, segment

CodeIgniter 的 URI 段系统有一个奇怪的问题。

当我有这个网址时：

[http://www.mywebsite.com/forums/category_name/forum_name/topic_name](http://www.mywebsite.com/forums/category_name/forum_name/topic_name) ..（是的，名字有两个点）

现在我在 PHP 中执行此操作：

```
$topic = $this->uri->segment(4);
>>> echo $topic: 'topic_name..' 
```

这完美地工作。但奇怪的是。当我像这样对 URL 附加回复时：

[http://www.mywebsite.com/forums/category_name/forum_name/topic_name../reply](http://www.mywebsite.com/forums/category_name/forum_name/topic_name../reply)

现在我再次执行 PHP 代码：

```
$topic = $this->uri->segment(4);
>>> echo $topic: 'topic_name ' 
```

如您所见，它突然将我的“..”替换为“”（一个空格，为什么连两个都不行？）。

有谁知道当我在一个带点（“。”）之后添加一个段时，URI 段方法是否可能会清理某些东西。奇怪的是，当我手动修复 URL 后面有一个空格时，它又可以工作了，因为在 trim() 之后它仍然有“..”的左边，这次 CodeIgniter 似乎没有碰到它们：

[http://www.mywebsite.com/forums/category_name/forum_name/topic_name..%20/reply](http://www.mywebsite.com/forums/category_name/forum_name/topic_name..%20/reply)

```
$topic = $this->uri->segment(4);
> echo $topic: 'topic_name.. '
>>> echo trim($topic): 'topic_name..' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:59:15.350

见以下网址：-

CodeIgniter 中的 URI 类

URI 类提供了帮助您从 URI 字符串中检索信息的函数。如果您使用 URI 路由，您还可以检索有关重新路由段的信息。

[http://codeigniter.com/user_guide/libraries/uri.html](http://codeigniter.com/user_guide/libraries/uri.html)

读这个

我相信正在发生的事情是您的服务器正在使用 ./index.php 作为 403。将“...”添加到 URI 将导致发生以下两种情况之一。

1) 浏览器会尝试更改文件夹句柄并上一两个目录

2) 对于 Apache Web Server “(20024)给定的路径格式错误或包含无效字符”</p>

我不建议在 URI 中放置点，除非它用于 url 后缀，然后只需要一个点。

# eclipse - eclipse中C/C++的自动激活触发器

> ID：11817316
> 
> 赞同：4
> 
> 时间：2012-08-05T14:41:50.543
> 
> 标签：eclipse, autocomplete, eclipse-cdt

我想为 a-zA-Z 设置自动激活触发器以及“。” , '->','::'。最后三个由eclipse提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:11:23.800

这不是 Eclipse Juno C++ 中的选项。

# cakephp - cakePHP 将表中的数据加载到下拉框中

> ID：11817321
> 
> 赞同：0
> 
> 时间：2012-08-05T14:42:15.040
> 
> 标签：cakephp, view, drop-down-menu

大家好，我正在尝试将表格中的信息加载到下拉框中。我正在尝试将包含 - id、accounts_id、user_id 的 accounts_users 表中的 account_id 加载到下拉框中。

只有当 users 表中的 id = accounts_users 表中的 user_id 时才会显示 account_id。目前，保管箱仅从 accounts_users 表中加载 id。

这是我的添加功能

```
function add() {
    $this->set('title_for_layout', 'Please Enter Your Temaplate Details');
    $this->set('stylesheet_used', 'style');
    $this->set('image_used', 'eBOXLogo.jpg');  
    $accounts=$this->User->AccountsUser->find('list', array('conditions' => array('user_id' => $this->Auth->user('id'))));
    debug($accounts);
    if($this->request->is('post')){
      $this->Template->create();

  if ($this->Template->save($this->request->data)) {
    $this->Session->setFlash('The template has been saved');
    $this->redirect( array('controller' => 'Fields','action' => 'add'));
  } else {
    $this->Session->setFlash('The template could not be saved. Please, try again.');
  }
}

$this->set('accounts', $accounts); 
```

}

这是添加视图

```
<?php
echo $this->Form->create('Template', array('action'=>'add'));
echo $this->Form->input('name',array('label'=>'Template Name: '));
echo $this->Form->input('account_id',array('label'=>'Business: ', 'type' => 'select', 'options' => $accounts));
echo $this->Form->input('description',array('label'=>'Short Description Of Template: '));
echo $this->Form->end('Click Here To Submit Template');
?> 
```

调试输出

app\Controller\TemplatesController.php（第 20 行）数组（（int）3 => '3'）

accounts_users 表中的用户只有 1 个 id=3、account_id=10 和 user_id=14 的条目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:54:26.693

```
$accounts=$this->User->AccountsUser->find('list', array('conditions' => array('user_id' => $this->Auth->user('id')))); 
```

应该：

```
$accounts=$this->User->AccountsUser->find('list', array('fields'=>array('id','account_id'),'conditions' => array('user_id' => $this->Auth->user('id')))); 
```

# apache - 如何使用 .htcaccess 将非基本 URL 重写到另一个域？

> ID：11817322
> 
> 赞同：0
> 
> 时间：2012-08-05T14:42:38.090
> 
> 标签：apache, .htaccess

我正在尝试将具有非空 REQUEST_URI 的任何 URL 重写到另一个域，同时保留 REQUEST_URI。这个想法是这个域上只存在 www.example.com，任何其他请求都应该转到 www.example2.com。

我已验证 www.example.com 的 REQUEST_URI 为“/”。

例如

```
www.example.com -> should not be rewritten
www.example.com/test.php -> should be rewritten to www.example2.com/test.php
www.example.com/test2.php?id=123 -> should be rewritten to www.example2.com/test2.php?id=123 
```

[更新] 我尝试将 REQUEST_URI 与“/”进行比较，但这会重定向所有内容：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/$
RewriteRule ^(.+)$ http://www.example2.com/$1 [L,QSA] 
```

我试图检查文件或目录是否存在然后重定向它，但这甚至重定向了基本页面（www.example.com）

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://www.example2.com/$1 [L,QSA] 
```

我试图检查斜杠后是否有内容，但没有重定向：

```
RewriteEngine on
RewriteRule ^.+/(.+)$ http://www.example2.com/$1 [L,QSA] 
```

任何人都可以提出一个可行的解决方案吗？看起来它应该很简单，但我似乎无法让它工作。

谢谢。

**解决方案：**

仅供参考：我最终采用的解决方案是：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://www.example2.com/$1 [R,L,QSA] 
```

原因是如果我在 www.example.com 上有任何图像，它们将被重写为 www.example2.com。[R] 是使基本 URL 重定向问题正常工作的原因。感谢 poncha 指出了这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:51:21.270

我认为你第一次尝试几乎是好的，你只需要像这样否定重写条件：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/$
RewriteRule ^(.+)$ http://www.example2.com/$1 [L,QSA,R=301] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T14:51:37.773

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/$
RewriteRule ^(.+)$ http://www.example2.com/$1 [R,L,QSA] 
```

没有`!`， your`RewriteCond`是正匹配，而不是负匹配。此外，添加`R`了强制 apache 向浏览器发送重定向的标志

# python - 使用 gfortran 支持为 Lion Python 2.6 构建 numpy

> ID：11817323
> 
> 赞同：5
> 
> 时间：2012-08-05T14:42:55.353
> 
> 标签：python, numpy, scipy, gfortran

我正在尝试在 Lion OS 随附的预装 Python 2.6 上安装 numpy 和 scipy。

这是我正在采取的确切步骤：

*   安装一个干净的副本
    *   狮子，
    *   更新，
    *   Xcode（来自应用商店），
    *   自制，
    *   gfortran，
    *   点子，
    *   和麻木的。
*   下一步是尝试升级 numpy。
    这是发生的事情：（我无法发布完整的日志，因为我是受限用户。

```
Downloading/unpacking numpy from [http://pypi.python.org/packages/source/n/numpy/numpy-](http://pypi.python.org/packages/source/n/numpy/numpy-)    1.6.2.zip#md5=7e13c931985f90efcfa0408f845d6fee

Downloading numpy-1.6.2.zip (2.9Mb): 2.9Mb downloaded
Running setup.py egg_info for package numpy
Running from numpy source directory.non-existing path in 'numpy/distutils': 'site.cfg'
F2PY Version 2
blas_opt_info:
  FOUND:
    extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
    define_macros = [('NO_ATLAS_INFO', 3)]
    extra_compile_args = ['-msse3', '-    I/System/Library/Frameworks/vecLib.framework/Headers']

lapack_opt_info:
  FOUND:
    extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
    define_macros = [('NO_ATLAS_INFO', 3)]
    extra_compile_args = ['-msse3']

build_src
building py_modules sources
building library "npymath" sources
customize NAGFCompiler
Could not locate executable f95
customize AbsoftFCompiler
Could not locate executable f90
Could not locate executable f77
customize IBMFCompiler
Could not locate executable xlf90
Could not locate executable xlf
customize IntelFCompiler
Could not locate executable ifort
Could not locate executable ifc
customize GnuFCompiler
Could not locate executable g77
customize Gnu95FCompiler
Found executable /usr/local/bin/gfortran
customize Gnu95FCompiler
customize Gnu95FCompiler using config
C compiler: llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-    common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -    Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -    DENABLE_DTRACE -arch i386 -arch x86_64 -pipe

compile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -    Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -    Inumpy/core/include -    I/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c'
llvm-gcc-4.2: _configtest.c
sh: llvm-gcc-4.2: command not found
sh: llvm-gcc-4.2: command not found
failure.
removing: _configtest.c _configtest.o
Traceback (most recent call last):
  File "<string>", line 14, in <module>
  File "/Users/MYUSERNAME/build/numpy/setup.py", line 214, in <module>
    setup_package()
  File "/Users/MYUSERNAME/build/numpy/setup.py", line 207, in setup_package
    configuration=configuration )
  File "/Users/MYUSERNAME/build/numpy/numpy/distutils/core.py", line 186, in setup
    return old_setup(**new_attr)
  File     "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/core.py",     line 152, in setup
  File     "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py",     line 975, in run_commands
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 995, in run_command
  File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/egg_info.py", line 8, in     run
    self.run_command("build_src")
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/cmd.py", line 333, in run_command
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py",     line 995, in run_command
  File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/build_src.py", line 152, in run
    self.build_sources()
  File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/build_src.py", line 163, in build_sources
    self.build_library_sources(*libname_info)
  File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/build_src.py", line 298, in build_library_sources
    sources = self.generate_sources(sources, (lib_name, build_info))
  File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/build_src.py", line 385, in generate_sources
    source = func(extension, build_dir)
  File "numpy/core/setup.py", line 696, in get_mathlib_info
    raise RuntimeError("Broken toolchain: cannot link a simple C program")
RuntimeError: Broken toolchain: cannot link a simple C program
Complete output from command python setup.py egg_info:
Running from numpy source directory.non-existing path in 'numpy/distutils': 'site.cfg'

F2PY Version 2

blas_opt_info:

FOUND:

extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']

define_macros = [('NO_ATLAS_INFO', 3)]

extra_compile_args = ['-msse3', '-I/System/Library/Frameworks/vecLib.framework/Headers']

lapack_opt_info:

FOUND:

extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']

define_macros = [('NO_ATLAS_INFO', 3)]

extra_compile_args = ['-msse3']

running egg_info

running build_src

build_src

building py_modules sources

creating build

creating build/src.macosx-10.7-intel-2.6

creating build/src.macosx-10.7-intel-2.6/numpy

creating build/src.macosx-10.7-intel-2.6/numpy/distutils

building library "npymath" sources

customize NAGFCompiler

Could not locate executable f95

customize AbsoftFCompiler

Could not locate executable f90

Could not locate executable f77

customize IBMFCompiler

Could not locate executable xlf90

Could not locate executable xlf

customize IntelFCompiler

Could not locate executable ifort

Could not locate executable ifc

customize GnuFCompiler

Could not locate executable g77

customize Gnu95FCompiler

Found executable /usr/local/bin/gfortran

customize Gnu95FCompiler

customize Gnu95FCompiler using config

C compiler: llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe

compile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/include -I/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c'

llvm-gcc-4.2: _configtest.c

sh: llvm-gcc-4.2: command not found

sh: llvm-gcc-4.2: command not found

failure.

removing: _configtest.c _configtest.o

Traceback (most recent call last):

File "<string>", line 14, in <module>

File "/Users/MYUSERNAME/build/numpy/setup.py", line 214, in <module>

setup_package()

File "/Users/MYUSERNAME/build/numpy/setup.py", line 207, in setup_package

configuration=configuration )

File "/Users/MYUSERNAME/build/numpy/numpy/distutils/core.py", line 186, in setup

return old_setup(**new_attr)

File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/core.py", line 152, in setup

File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 975, in run_commands

File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 995, in run_command

File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/egg_info.py", line 8, in run

self.run_command("build_src")

File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/cmd.py", line 333, in run_command

File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 995, in run_command

File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/build_src.py", line 152, in run

self.build_sources()

File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/build_src.py", line 163, in build_sources

self.build_library_sources(*libname_info)

File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/build_src.py", line 298, in build_library_sources

sources = self.generate_sources(sources, (lib_name, build_info))

File "/Users/MYUSERNAME/build/numpy/numpy/distutils/command/build_src.py", line 385, in generate_sources

source = func(extension, build_dir)

File "numpy/core/setup.py", line 696, in get_mathlib_info

raise RuntimeError("Broken toolchain: cannot link a simple C program")

RuntimeError: Broken toolchain: cannot link a simple C program

----------------------------------------
Command python setup.py egg_info failed with error code 1 in     /Users/MYUSERNAME/build/numpy
Storing complete log in /Users/MYUSERNAME/Library/Logs/pip.log 
```

我非常感谢任何帮助/评论/指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:27:21.047

您是否尝试过官方安装说明？

[http://www.scipy.org/Installing_SciPy/Mac_OS_X](http://www.scipy.org/Installing_SciPy/Mac_OS_X)

# assembly - 致命：找不到可启动媒体

> ID：11817327
> 
> 赞同：1
> 
> 时间：2012-08-05T14:44:04.883
> 
> 标签：assembly, operating-system, boot, iso, bootloader

我有一个小问题。我制作了非常简单的引导加载程序。创建后，我创建了新的空 .iso 文件。

```
mkisofs -o cd.iso content 
```

然后我使用了 Okteta 编辑器，并用引导加载程序填充了前 512 个字节。 ![奥克泰塔](../Images/dfd28e45ff37ced009fe54493adc15f1.png)

然后我在 Virtual Box 中启动了 .iso 映像。我的问题是错误消息：

```
FATAL: No bootable medium found 
```

有谁知道我怎样才能让它工作？我哪里出错了？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:12:20.960

您不能只是将软盘/HDD 引导扇区复制到 cd 映像上并期望它能够正常工作。要制作可启动的 cd-rom，您需要遵守[El Torito](http://en.wikipedia.org/wiki/El_Torito_%28CD-ROM_standard%29)标准。[这是](http://paulski.com/zpages.php?id=1814)一个快速指南，如何从软盘映像制作可启动 cd。

# joomla1.5 - mod_rewrite 和 SEF 不适用于 joomla

> ID：11817333
> 
> 赞同：1
> 
> 时间：2012-08-05T14:45:30.407
> 
> 标签：joomla1.5, joomla-sef-urls

我正在使用 joomla 1.5.2。当 mod_rewrite 和 SEF 启用时，我有不同的 url 并且它不工作。例如：

```
https://sampleprojects.com/component/jobboard/buy (SEF and Apache mod_rewrite enabled)
https://sampleprojects.com/index.php?option=com_jobboard&view=buy&Itemid=2(SEF and Apache mod_rewrite disabled) 
```

我的网站上有 SSL，我也有 .htaccess 文件。问题是 SEF URL 中没有添加 Itemid。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:41:47.993

Itemid 永远不会添加到 SEF Url 中，也不应该添加。Itemid 指示您单击哪个菜单链接到达那里。它主要用于在查看页面时突出显示活动的菜单链接。

例如，如果您有两个不同的菜单都链接到同一个页面，它们将有两个不同的 Itemid，但本质上是同一个页面。这就是 SEF url 去除 Itemid 的原因，因为它会在 Google 中创建重复的内容项问题。

只是为了证明我是一个可靠的消息来源。我是[Joomla Component Creator](http://www.notwebdesign.com/joomla-component-creator/)的首席开发人员，自 1.0 版以来一直在开发 Joomla 网站。

# actionscript-3 - XNA 上类似 Flash 的渲染

> ID：11817336
> 
> 赞同：0
> 
> 时间：2012-08-05T14:45:39.960
> 
> 标签：actionscript-3, flash, xna, rendering

嘿，我想知道是否有人知道 XNA 是否有类似 Flash 的渲染引擎。我正在谈论 2d 的子和父关系渲染，或者可能如何调用这种渲染。

（在我尝试实现自己的之前）

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:26:26.703

场景图似乎最接近使用 XNA 进行的类似 flash 的渲染，我将实现自己的，如果我将其设为开源，我将在此处链接 :)

# python - 如何优雅地中断 urllib2 下载？

> ID：11817337
> 
> 赞同：23
> 
> 时间：2012-08-05T14:45:41.943
> 
> 标签：python, real-time, urllib2

我正在使用`urllib2`'s`build_opener()`创建一个`OpenerDirector`. 我正在使用`OpenerDirector`来获取慢速页面，因此它的超时时间很长。

到现在为止还挺好。

但是，在另一个线程中，我被告知要中止下载 - 假设用户已选择退出 GUI 中的程序。

有没有办法指示 urllib2 下载应该退出？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T05:16:48.157

**没有明确的答案。有几个丑的。**

*最初，我将被拒绝的想法放在问题中。由于很明显没有正确的答案，我决定将各种次优选择作为列表答案发布。其中一些受到评论的启发，谢谢。*

# 图书馆支持

一个理想的解决方案是`OpenerDirector`提供一个取消操作符。

它不是。库作者请注意：如果您提供长时间缓慢的操作，那么如果人们要在实际应用程序中使用它们，您需要提供一种取消它们的方法。

# 减少超时

作为其他人的通用解决方案，这可能会起作用。超时时间越小，它就越能响应环境的变化。但是，如果在超时时间内没有完全完成，也会导致下载失败，所以这是一个权衡。在我的情况下，这是站不住脚的。

# 分块阅读下载。

同样，作为一般解决方案，这可能有效。如果下载包含非常大的文件，您可以[分小块读取它们](https://stackoverflow.com/questions/2028517/python-urllib2-progress-hook)，并在读取块后中止。

不幸的是，如果（在我的情况下）延迟是接收第一个字节，而不是文件的大小，这将无济于事。

# 杀死整个线程。

虽然有一些激进的技术可以杀死线程，但取决于操作系统，[不推荐使用它们](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)。特别是，它们可能导致发生死锁。请参阅 Eli Bendersky 的[两篇](http://eli.thegreenplace.net/2011/08/22/how-not-to-set-a-timeout-on-a-computation-in-python/) [文章](http://eli.thegreenplace.net/2011/12/27/python-threads-communication-and-stopping/)（来自 @JBernardo）。

# 只是反应迟钝

如果用户触发了中止操作，最简单的方法可能是不响应，直到打开操作完成后才对请求进行操作。

您的用户是否可以接受这种无响应（提示：不！），取决于您的项目。

即使已知结果是不需要的，它也会继续对服务器提出要求。

# 让它在另一个线程中逐渐消失。

如果您创建一个单独的线程来运行该操作，然后以可中断的方式与该线程通信，您可以丢弃阻塞的线程，并开始执行下一个操作。最终，线程将解除阻塞，然后它可以优雅地关闭。

该线程应该是一个*daemon*，因此它不会阻止应用程序的完全关闭。

这将给予用户响应，但这意味着需要继续支持它的服务器，即使不需要结果。

# 将套接字方法重写为基于轮询的。

如@Luke's [answer](https://stackoverflow.com/a/11818804/8014)中所述，可以为标准 Python 库提供（脆弱的？不可移植的？）扩展。

他的解决方案将套接字操作从阻塞更改为轮询。另一个可能允许通过该方法关闭`socket.shutdown()`（如果确实会中断阻塞的套接字 - 未经测试。）

基于 Twisted 的解决方案可能更清洁。见下文。

# 用异步、非基于线程的库替换套接字。

[Twisted](http://twistedmatrix.com/trac/)框架为事件驱动的网络操作提供了一组替代库。我理解这意味着所有不同的通信都可以由一个没有阻塞的单线程处理。

# 破坏

可以导航`OpenerDirector`, 以找到阻塞的基本套接字，并直接破坏它（`socket.shutdown()`就足够了吗？）使其返回。

呸。

# 把它放在一个单独的（可杀死的）进程中

读取套接字的线程可以移动到一个单独的进程中，并且可以使用进程间通信来传输结果。这个IPC可以被客户端提前中止，然后整个进程可以被杀死。

# 请求 Web 服务器取消

如果您可以控制正在读取的 Web 服务器，则可以向它发送一条单独的消息，要求它关闭套接字。这应该会导致被阻止的客户端做出反应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T15:11:08.300

我没有看到任何内置机制来实现这一点。我只是将 OpenerDirector 移到它自己的~~线程~~进程中，这样就可以安全地杀死它。

注意：没有办法在 python 中“杀死”一个线程（感谢 JBernardo）。但是，可能会*在线*[程中生成异常](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)，但如果线程在套接字上阻塞，这可能不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T18:05:08.600

这是另一种方法的开始。它通过扩展 httplib 堆栈的一部分以包括对服务器响应的非阻塞检查来工作。您必须进行一些更改才能在您的线程中实现这一点。另请注意，它使用了一些未记录的 urllib2 和 httplib，因此您的最终解决方案可能取决于您使用的 Python 版本（我有 2.7.3）。在您的 urllib2.py 和 httplib.py 文件中四处寻找；它们非常易读。

```
import urllib2, httplib, select, time

class Response(httplib.HTTPResponse):
    def _read_status(self):
        ## Do non-blocking checks for server response until something arrives.
        while True:
            sel = select.select([self.fp.fileno()], [], [], 0)
            if len(sel[0]) > 0:
                break
            ## <--- Right here, check to see whether thread has requested to stop
            ##      Also check to see whether timeout has elapsed
            time.sleep(0.1)
        return httplib.HTTPResponse._read_status(self)

class Connection(httplib.HTTPConnection):
    response_class = Response

class Handler(urllib2.HTTPHandler):
    def http_open(self, req):
        return self.do_open(Connection, req)

h = Handler()
o = urllib2.build_opener(h)
f = o.open(url)
print f.read() 
```

另请注意，堆栈中有许多可能会阻塞的地方；这个例子只涉及其中之一——服务器已经收到请求但需要很长时间才能响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-20T18:30:15.223

由于 urllib 的阻塞性质，我找到了一种将所有与 urllib 相关的作业放在最合适的线程中的方法。然后可以完全中止任务，包括请求。杀死线程确实不安全，但引发异常应该是安全的。

[所以这是如何在线程（ doc](https://docs.python.org/c-api/init.html#c.PyThreadState_SetAsyncExc) ）中引发异常：

```
import ctypes
ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(your_thread.ident),
                                           ctypes.py_object(your_exception)) 
```

如果此时套接字处于阻塞（连接）状态，则在线程再次活跃后将立即引发异常。

# git - 如何将子模块添加到 gh-pages 分支并正确构建静态页面？

> ID：11817338
> 
> 赞同：12
> 
> 时间：2012-08-05T14:45:44.023
> 
> 标签：git, jekyll, git-submodules, github-api, github-pages

我有几个项目页面要维护，它们都使用相同的主题（我将它打包到一个名为 的单独 repo 中`KYProjectPageTheme`）。

只需将`KYProjectPageTheme`'s 的整个文件夹复制到`gh-pages`分支的根目录，然后将其推送到 Github 就可以很好地工作。当静态页面构建成功时，我会收到通知。

但是，我想添加`KYProjectPageTheme`为`gh-pages`分支下的子模块。这在我的本地机器上运行良好。但是当我将它推送到 Github 时，我再也收不到通知了！并且静态页面仍然是以前的状态，即我添加子模块后的修改没有影响。

我猜是当`gh-pages`分支中有子模块时，Github 的静态页面生成器将无法工作。但实际上，我不需要生成器来生成静态页面，我只需要修改 HTML 中的页面并将其推送到`gh-pages`. 为什么我的没有`index.html`更新？

任何的想法？是否有一些解决方法可以解决此问题？

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-03T09:42:02.663

我从 Github 得到了答案（感谢@Robert）。

> ## [将子模块与页面一起使用](https://help.github.com/articles/using-submodules-with-pages)
> 
> 如果您的存储库包含子模块，它们将在构建页面时自动被拉入。
> 
> 确保对子模块（包括嵌套子模块）使用`https://`只读 URL。您可以在`.gitmodules`文件中进行此更改。
> 
> 子模块也必须由公共存储库提供，因为 Pages 服务器无法访问私有存储库。

所以，我需要使用

```
https://github.com/Kjuly/KYProjectPageTheme.git (new page recommends to use "https://")
git://github.com/Kjuly/KYProjectPageTheme.git (old page recommends to use "git://") 
```

代替

```
git@github.com:Kjuly/KYProjectPageTheme.git 
```

它现在完美无缺！

* * *

**注意**，旧页面说：

> **HTTPS 和 SSH URL 将导致构建失败并出现“子模块获取失败”错误。**

不确定HTTPS现在是否有效，但如果`https://`不适合您，请继续使用`git://`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T12:03:46.927

当我将 SSH 用于我的主存储库并使用 HTTPS 用于我的子存储库（原型设计框架）时，我经常遇到这种情况。

我从来没有追查过为什么会发生这种情况。我什至联系过 GitHub 的工作人员，他们不得不在我的存储库中修复一些东西。

事实证明，有一种更简单的方法：**对父存储库和所有子存储库使用 HTTPS。**这似乎无需任何其他调整即可工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-25T03:36:01.537

我正在使用 Hugo 生成一个静态网站，并且必须`.gitmodules`像这样格式化我的文件：

```
[submodule "themes/code-editor"]
    path = themes/code-editor
    url = https://github.com/aubm/hugo-code-editor-theme.git 
```

# asp.net - ASP.NET 中的缩放

> ID：11817340
> 
> 赞同：1
> 
> 时间：2012-08-05T14:45:56.113
> 
> 标签：asp.net, .net

我对使用 ASP.NET 环境进行缩放有一些疑问。我正在开始构建一个应用程序，我希望它会吸引大量用户，如果是这种情况，我需要了解更多关于扩展的信息。

它在很大程度上取决于用户生成的内容，当内容更改时需要通过池 AJAX 调用通知其他用户，WebSockets 不是一个选项。

我知道基本的东西不会从数据库中读取，放在内存中，但是如何在网络农场中做到这一点？

如果用户内容是在 Webserver 1 上创建的，而其他用户是来自 Webserver 2 的请求对象，系统应该如何处理。我们如何通知用户而不需要通过 DB？提出大量内部请求？使用一些分布式缓存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T14:54:37.177

如果您希望从第一天起就需要这种可扩展性，请查看 AppFabric：[http ://www.slideshare.net/chrduf/scale-your-data-tier-with-windows-server-app-fabric](http://www.slideshare.net/chrduf/scale-your-data-tier-with-windows-server-app-fabric)

[http://www.microsoft.com/en-us/server-cloud/windows-server/appfabric.aspx](http://www.microsoft.com/en-us/server-cloud/windows-server/appfabric.aspx)

如果您希望在以后看到更多内容，那么最好先使用您所知道的内容编写应用程序，以便稍后重构为 AppFabric。这将使您能够获得一些东西，而不是陷入学习新技术的困境，因此当您进行重构时，您可以更好地了解自己的产品，这将有利于您在任何新平台上做出决策。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T14:52:12.393

如果您使用的是 SQL Server，请查看`SqlDependency`与 IIS 结合的对象`Cache`。基本上，如果底层记录集从 Server1 更改并且数据库中的内容更新，则将通知所有其他 Web 服务器更新其本地副本。在幕后，SqlDependency 使用 Service Broker，因此您可能还需要阅读它。

更多信息：

[使用 SqlCacheDependency 类在 ASP.NET 中进行缓存](http://msdn.microsoft.com/en-us/library/ms178604.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:00:28.113

以下是一些使用 pub/sub 机制提供分布式缓存的产品

1）Oracle的Coherence [http://coherence.oracle.com/display/COH34UG/Real+Time+Client+-+RTC](http://coherence.oracle.com/display/COH34UG/Real+Time+Client+-+RTC)它也有.net版本（来自java的端口）

2) Windows AppFabric 分布式缓存[http://msdn.microsoft.com/en-us/library/ff383731(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/ff383731(v=azure.10).aspx)这在语法上类似于 Coherence

另一个便宜的选择是使用 Nodes.js

# smalltalk - 从 OrderedCollection 中选择以下项目的最优雅方法是什么：

> ID：11817345
> 
> 赞同：5
> 
> 时间：2012-08-05T14:46:38.890
> 
> 标签：smalltalk, pharo

给定这样的 OrderedCollection：

```
noise1
noise2
noise3
signal1
signal1
signal1
signal1
randomButInteresting
noise4
noise5 
```

我想为新的 OrderedCollection 选择所有对象“signal1”以及这一系列“signal1”之后的对象，“randomButInteresting”。（一系列相同的信号在每个 Collection 中只出现一次。）

最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T15:09:11.523

直接的方法类似于

```
| data result lastWasSignal |

data := #( #noise1 #noise2 #noise3 #signal1 #signal1 #signal1 #signal1 #randomButInteresting #noise4 #noise5 ).

lastWasSignal := false.
result := data select: [ :value |
    | isElementAppropriate |
    isElementAppropriate := value = #signal1 or: [ lastWasSignal ].
    lastWasSignal := value = #signal1.
    isElementAppropriate
].

result 
```

是 O(n)。更聪明的方法是使用二分搜索找到**仅出现一次的信号组的边界。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T17:58:13.173

使用带有 PetitParser 的 Lukas 版本，但在结果中保留所有“signal1”：

```
" the parser that accepts the symbol #signal1 "
signal := PPPredicateObjectParser expect: #signal1.

" the parser that accepts many symbols #signal1 followed by something else "
pattern := signal plus , signal negate.

data := #(noise1 noise2 noise3 signal1 signal1 signal1 signal1 randomButInteresting noise4 noise5).

pattern flatten matchesSkipIn: data           -> an OrderedCollection(#(#signal1 #signal1 #signal1 #signal1 #randomButInteresting)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T17:27:29.547

您可以使用[PetitParser](http://www.lukas-renggli.ch/blog/petitparser-1)，因为您基本上匹配输入流上的特定模式。为清楚起见添加了一些注释的解析器定义如下：

```
" the parser that accepts the symbol #signal1 "
signal := PPPredicateObjectParser expect: #signal1.

" the parser that accepts the symbol #signal1 not followed by something else "
pattern := signal , signal negate.

" the parser that extract the second symbol "
parser := pattern map: [ :signal :random | random ]. 
```

当您在输入数据上运行它时，您会得到：

```
data := #(noise1 noise2 noise3 signal1 signal1 
          signal1 signal1 randomButInteresting
          noise4 noise5).
parser matchesIn: data -> #(randomButInteresting) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-05T17:45:12.487

使用输入和输出流的不同解决方案（是的，我喜欢流:-)）：

```
data := #(noise1 noise2 noise3 signal1 signal1 signal1 signal1 randomButInteresting noise4 noise5).

"Let's create an OrderedCollection from an output stream"
OrderedCollection streamContents: [:output |
    |datast|
    "We are basically streaming on the input data, so let's use a stream:"
    datast := data readStream.
    "We ignore everything before #signal1"
    datast skipTo: #signal1.
    "We add the #signal1we just found"
    output nextPut: #signal1.
    "And we add all the subsequent #signal1"
    [datast peek = #signal1]
        whileTrue: [output nextPut: datast next].
    "Finally we add the element after the last #signal1"
    output nextPut: datast next
    ] 
```

# iphone - 从 HTML 字符串中读取和获取值

> ID：11817347
> 
> 赞同：0
> 
> 时间：2012-08-05T14:47:09.150
> 
> 标签：iphone, ios, xcode, arrays, xcode4

我有一个有趣的场景，需要知道它是否可以在 Cocoa 中完成。

我已经尝试并未能找到免费的每小时天气预报 api，它可以让我查看某个城市/邮政编码的每小时天气预报。因此，对于另一种方法，我试图做的是阅读整个 HTML 页面源代码并尝试查看是否可以删除每小时天气部分，以便我可以在我的 iPhone 应用程序中使用它。

```
NSString *request = @"http://www.findlocalweather.com/hourly/il/chicago.html";

    NSURL *URL = [NSURL URLWithString:request];
    NSError *error;    
    NSString *HTML = [NSString stringWithContentsOfURL:URL encoding:NSASCIIStringEncoding error:&error];

    NSLog(@"HTML: %@", HTML); 
```

如果您访问[http://www.findlocalweather.com/hourly/il/chicago.html](http://www.findlocalweather.com/hourly/il/chicago.html)链接，您将看到网格每小时预报。我需要做的是从我需要读取每个日期、云和临时行并将其放入数组中的那个 HTML 源代码。例如

NSMutableArray1 将包含对象“AUG 05 9:00 AM, AUG 05 10:00 AM, AUG 05 11:00 AM ...”

NSMutableArray2 将包含对象“多云，多晴......”

NSMutableArray3 将包含对象“73、84、76、91 ....”（以度为单位的温度）

这可以做到吗？任何人都尝试过解析 HTML 页面源字符串以获取您想要的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:38:10.260

[您可以使用NSRegularExpression](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)轻松完成

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:EnterStringWithPatternHere options:0 error:NULL];
NSArray *matches = [regex matchesInString:webPage options:0 range:NSMakeRange(0, [webPage length])]; 
```

有一些很好的教程如何使用正则表达式（它们在大多数编程语言中几乎相同，但要注意 NSRegEx 的特点）

示例：从 HMTL 文件中解析 pdf 链接。

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"href=\"([^<>]*).pdf\"" options:0 error:NULL];
NSArray *matches = [regex matchesInString:webPage options:0 range:NSMakeRange(0, [webPage length])];
for (int i=0; i<[matches count]; i++) {
    NSTextCheckingResult *match = [matches objectAtIndex:i];
 NSString *theFullString = [NSString stringWithFormat:@"%@.pdf",[webPage   substringWithRange:[match rangeAtIndex:1]]];} 
```

我前段时间写了这段代码。我建议你尝试一下并使用 NSLog 或断点。这会有很大帮助。进入 RegEx Stuff 需要一些时间，但效果非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:49:57.173

XML Parser NSXMLParser 也可用于 HTML。它使用委托方法以增量方式处理文档的元素，因此您必须构建提取的字段。您必须查看返回的 HTML 文档的结构，以了解您将提取哪些元素（标签），然后将代码相应地放入委托方法 didEndElement 中。

# jquery - 在同一页面中使用两个不同的 jQuery UI 主题

> ID：11817349
> 
> 赞同：0
> 
> 时间：2012-08-05T14:47:27.913
> 
> 标签：jquery, jquery-ui-dialog, themeroller

我想在同一页面中为两个不同的 UI 应用程序使用两个不同的主题 - Vader 和 UI Darkness。知道怎么做吗？我遵循了[Stackoverflow](https://stackoverflow.com/questions/988078/two-different-jquery-ui-themes-on-the-same-page)提供的链接，但我无法遵循他们的方法。

# node.js - 我可以在后台运行 Node.js 命令行应用程序并通过按键调用它吗？

> ID：11817356
> 
> 赞同：3
> 
> 时间：2012-08-05T14:48:36.253
> 
> 标签：node.js, shell, command-line, keystroke

是否可以运行 Node.js 命令行应用程序并通过按键控制它？例如，想一想“Alfred”（Mac OS），它在后台不可见，但如果按⌘⌥ 就会打开。

我知道如果您设置“process.stdin.setRawMode(true);”，就可以检测到击键。但这似乎没有注册 ⌘ 击键。我需要额外的技术吗？（例如 AppleScript？）

谢谢你，皮波

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T17:31:44.353

这个问题有两个部分：

1.  在后台运行命令行应用程序
2.  应用程序从全局快捷方式接收命令

要回答第 1 个问题，请查看[https://superuser.com/questions/334597/enable-disable-startup-programs-script-services-on-amac](https://superuser.com/questions/334597/enable-disable-startup-programs-script-services-on-amac)。如果您希望从命令行轻松关闭/重新启动脚本，我会选择建议 4 并使用`launchd`.

要回答第2个问题，请看这里的第二个答案：[https](https://apple.stackexchange.com/questions/24063/create-global-shortcut-to-run-command-line-applications) ://apple.stackexchange.com/questions/24063/create-global-shortcut-to-run-command-line-applications提到大量第三方应用程序后可以做到这一点，它提到了如何使用 Automator 服务从快捷方式运行脚本。

由于这是一个特定于 node.js 的问题，我可能会在我的脚本中挂接一个小服务器，以侦听从其他脚本发送的命令（每个脚本都分配了一个键盘快捷键）。如果您想从非常简单的“客户端脚本”对“服务器脚本”执行“远程过程调用”，[Dnode 非常棒。](https://github.com/substack/dnode)

# java - 如何从 java 中的 formAttachment 中读取值？

> ID：11817357
> 
> 赞同：2
> 
> 时间：2012-08-05T14:48:40.107
> 
> 标签：java, swt

如何从`formAttachment`in Java 中读取值？

这是我的代码：

```
Text one = new Text(composite, SWT.BORDER);
data = new FormData();
data.top = new FormAttachment(0, 0);
data.bottom = new FormAttachment(100, 0);
data.left = new FormAttachment(0, 0);
data.right = new FormAttachment(sash, 0);
one.setLayoutData(data); 
```

结果：

![剩下一个](../Images/dc49c4eb9493cbb32626c75409c238cd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:58:01.097

`FormAttachment`s 用于定位 a `Control`。`FormAttachment`您可以使用for left、top、right 或 bottom来修复控件的边缘。自动计算所有剩余边。最简单的可能性是相对于周围复合材料边缘的百分比定位。这是一个例子：

```
FormData formData = new FormData();
// Fix the left edge of the control to 25% of the overall width + 10px offset.
formData.left = new FormAttachment(25, 10);
// Fix the lower edge of the control to 75% of the overall height + 0px offset.
formData.bottom = new FormAttachment(75);
// Tell the control its new position.
control.setLayoutData(formData); 
```

或者，您可以使用构造`new FormAttachment(control, offset, alignment)`函数将控件相对的边缘固定到另一个控件的边缘：

```
FormData formData = new FormData();
// Fix left edge 10px to the right of the right edge of otherControl
formData.left = new FormAttachment(otherControl, 10, SWT.RIGHT);
// Fix bottom edge at exactly the same height as the one of otherControl
formData.bottom = new FormAttachment(otherControl, 0, SWT.BOTTOM);
control.setLayoutData(formData); 
```

[Ralf Ebert在这里](http://www.ralfebert.de/books/)有一本非常好的 Eclipse RCP 手册。不幸的是它是德语的。但是，您可以在第 56-57 页找到解释我上面示例的图像。

# java - 在用户输入数字时计算数字的出现次数并显示最高出现次数

> ID：11817362
> 
> 赞同：0
> 
> 时间：2012-08-05T14:49:14.890
> 
> 标签：java, collections, frequency, treemap

当用户输入数字时，我正在尝试计算用户在程序中输入的数字的出现次数。它们都是整数。这必须显示在 TextArea 中。如果多个数字具有相同的出现次数，则它也必须显示在 TextArea 中。

我发现了一些关于如何执行此操作的非常令人困惑的信息。

我已经开始使用 TreeMap 将数字添加到其中，并且在输入每个数字时，它会检查该数字是否已经输入。如果不是，则将其输入密钥并为其分配值 1，否则将值加 1。

我一遍又一遍地阅读 Java API。我找到了 SortedMap，但这对我没有好处，据我了解，它已经在 TreeMap 中按键排序。我希望 TreeMap 按值排序，然后挑选出具有相同对应值的所有键。我找到了一种按值排序的方法，但是当我实现它时，它只允许我获取 .last().getKey().intValue()。我曾认为阵列可能是理想的，但我不知道该怎么做。

哦，我在我的第二类Java，所以我知道的很少，对我不知道的东西知道得更少，所以请记住这一点。

```
public class NumberCounterGUI extends JFrame {

    JLabel jlblEnteranumber = new JLabel("Enter a number:");

    JTextField jtfEnteranumber = new JTextField();

    JTextArea jtaNumbers = new JTextArea();
    JTextArea jtaMessages = new JTextArea();

    JScrollPane numbersScrollPane = new JScrollPane(jtaNumbers);

    JPanel panel1 = new JPanel();
    JPanel panel2 = new JPanel();
    JPanel panel3 = new JPanel(new BorderLayout());

    Color defaultBackgroundColor = new Color(238, 238, 238);

    Font defaultFontBold = new Font("Dialog", Font.BOLD, 12);

    TreeMap<Integer, Integer> numbersEntered = new TreeMap<>();

    int numberEntered, value;

    public NumberCounterGUI() {

        jtfEnteranumber.setPreferredSize(new Dimension(84, 20));
        jtfEnteranumber.setToolTipText("Integers Only");
        jtfEnteranumber.addActionListener(new NumberCounterGUI.Listener());

        jtaNumbers.setEditable(false);
        jtaNumbers.setLineWrap(true);
        jtaNumbers.setWrapStyleWord(true);

        numbersScrollPane.setVerticalScrollBarPolicy(JScrollPane
                .VERTICAL_SCROLLBAR_AS_NEEDED);
        numbersScrollPane.setPreferredSize(new Dimension(300, 75));

        jtaMessages.setFont(defaultFontBold);
        jtaMessages.setBackground(defaultBackgroundColor);
        jtaMessages.setEditable(false);

        panel1.add(jlblEnteranumber);
        panel1.add(jtfEnteranumber);

        panel2.add(jtaMessages);

        panel3.add(panel1, BorderLayout.NORTH);
        panel3.add(numbersScrollPane, BorderLayout.CENTER);
        panel3.add(jtaMessages, BorderLayout.SOUTH);

        add(panel3);
    }

    class Listener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            try {
                Long numberEnteredLong = Long.valueOf(jtfEnteranumber.getText());
                if (numberEnteredLong <= 2147483647 &&
                        numberEnteredLong >= -2147483647) {
                    numberEntered = Integer.valueOf(jtfEnteranumber.getText());
                    jtaNumbers.insert(jtfEnteranumber.getText() + " ", 1);
                    if (numbersEntered.get(numberEntered) == null) {
                        numbersEntered.put(numberEntered, 1);
                    } else {
                        value = numbersEntered.get(numberEntered).intValue();
                        value++;
                        numbersEntered.put(numberEntered, value);
                    }
                    jtaMessages.setText(entriesSortedByValues(numbersEntered)
                            .last().getKey().intValue() +" occurred most often");
                    jtfEnteranumber.setText("");
                } else {
                    Toolkit.getDefaultToolkit().beep();
                    jtaMessages.setText(jtfEnteranumber.getText()
                            + " is out of integer range!");
                    jtfEnteranumber.setText("");
                }
            } catch (NumberFormatException z) {
                Toolkit.getDefaultToolkit().beep();
                jtaMessages.setText(jtfEnteranumber.getText()
                        + " is not a number!");
                jtfEnteranumber.setText("");
            }
            pack();
        }
    }

    // Found at http://stackoverflow.com/questions/2864840/treemap-sort-by-value
    static <K, V extends Comparable<? super V>> SortedSet<Map.Entry<K, V>>
            entriesSortedByValues(Map<K, V> map) {
        SortedSet<Map.Entry<K, V>> sortedEntries = new TreeSet<>(
                new Comparator<Map.Entry<K, V>>() {
                    @Override
                    public int compare(Map.Entry<K, V> e1, Map.Entry<K, V> e2) {
                        int res = e1.getValue().compareTo(e2.getValue());
                        return res != 0 ? res : 1;
                    }
                });
        sortedEntries.addAll(map.entrySet());
        return sortedEntries;
    }

    public static void main(String[] args) {
        NumberCounterGUI frame = new NumberCounterGUI();
        frame.setTitle("Enter Numbers (Integers 1 - 999)");
        frame.pack();
        frame.setResizable(false);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:09:07.147

**-** Use the `Collections.frequency(Collection c, Object o)` method to get the **occurrence of certain Object in the collection.**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:07:09.750

One easy way to build your reference histogram would be to first gather your input data into a List. When you're ready to tabulate counts of each integer, you first sort your List, then iterate it, tracking and outputting counts with each change in value into a Map. Keep track of your highest count. Once that map is assembled, your answer is a simple lookup by that count returning the List of values matching it.

```
Map<Integer,List<Integer>> countedIntegers=new HashMap<Integer,List<Integer>>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:13:21.903

考虑到您需要跟踪每个输入数字的出现次数，您需要一个从entered_number(key) 到number_of_occurrences(value) 的映射。

如果您使用 number_of_occurrences 作为键，则每次输入的数字的出现次数发生变化时，您都必须删除该键并重新添加它以递增。假设您对输入数字总数的一半执行此操作，如果您使用类似堆的数据结构，最终的复杂度将为 O(n/2 * logn) = O(nlogn)。

如果您使用存储输入的数字（键）和出现次数（值）的标准地图数据结构（例如 HashMap），您最终将得到 O(n) 的复杂度，该复杂度由最后的迭代给出您必须首先发现最大出现次数，然后检索所有输入的具有该频率的数字。所以我推荐第二个版本。

# r - 替换R中数据框列中的数字？

> ID：11817371
> 
> 赞同：23
> 
> 时间：2012-08-05T14:50:09.960
> 
> 标签：r, replace, numbers, dataframe

> **可能重复：**
> [替换 R 数据框中因子列的内容](https://stackoverflow.com/questions/11810605/replace-contents-of-factor-column-in-r-dataframe)

我有data.frame

```
df1<-data.frame("Sp1"=1:6,"Sp2"=7:12,"Sp3"=13:18)
rownames(df1)=c("A","B","C","D","E","F")

df1
  Sp1 Sp2 Sp3
A   1   7  13
B   2   8  14
C   3   9  15
D   4  10  16
E   5  11  17
F   6  12  18 
```

我想用数字 800 替换 df1$Sp2 列中数字 8 的每个条目。我尝试过：

```
test<-replace(df1$Sp2,df1[800,"Sp2"],5) 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-05T14:53:52.273

例如：

```
df1$Sp2[df1$Sp2 == 8] <- 800 
```

# ruby-on-rails - 尝试发送电子邮件时，Action Mailer 会中断应用程序

> ID：11817381
> 
> 赞同：1
> 
> 时间：2012-08-05T14:51:44.160
> 
> 标签：ruby-on-rails, email, actionmailer

寻求有关 Rails 中动作邮件的帮助。我正在使用 Rails 3.2 并设计用于身份验证。我按照 railscasts 开始使用动作邮件程序，所以我第一次设置动作邮件程序并遇到了一些问题。我已将设计的注册控制器设置为在注册时发送电子邮件。发生的事情是应用程序在遇到该行代码以发送电子邮件时发生故障。我在下面包括我的日志、操作邮件等以寻求帮助....感谢您的帮助

**开发日志**

```
Started POST "/accounts" for 127.0.0.1 at 2012-08-04 15:36:11 -0600
Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"EWH87yAT4dTuK12kZ27HiidVzGZAhx+sHa4N2rXIWIM=", "user"=>{"firstname"=>"john", "lastname"=>"doe", "email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "store"=>{"storename"=>"Store 1"}, "commit"=>"Create my Account"}
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  COMMIT
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 FROM `users` WHERE `users`.`email` = BINARY 'david.gilbert@visibleequity.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `users` (`admin`, `created_at`, `current_sign_in_at`, `current_sign_in_ip`, `email`, `encrypted_password`, `firstname`, `last_sign_in_at`, `last_sign_in_ip`, `lastname`, `owner`, `remember_created_at`, `rentor`, `reset_password_sent_at`, `reset_password_token`, `sign_in_count`, `updated_at`, `userimage`) VALUES (0, '2012-08-04 21:36:11', NULL, NULL, '[FILTERED]', '$2a$10$yXNkAXglLgZBBPkDmE/T2uShDtgXeRO3ka1mXhUxwzTABgp.8Ijle', 'john', NULL, NULL, 'doe', 0, NULL, 1, NULL, NULL, 0, '2012-08-04 21:36:11', NULL)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `stores` (`created_at`, `storeimage`, `storename`, `updated_at`, `user_id`) VALUES ('2012-08-04 21:36:11', NULL, 'Store 1', '2012-08-04 21:36:11', 118)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  Rendered user_mailer/signup_confirmation.text.erb (0.4ms) 
```

**服务器日志**

```
Served asset /head_transpar.png - 304 Not Modified (0ms)
/Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/smtp.rb:583: [BUG] Segmentation fault
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0]

-- Control frame information -----------------------------------------------
c:0107 p:---- s:0530 b:0530 l:000529 d:000529 CFUNC  :connect
c:0106 p:0059 s:0527 b:0527 l:000526 d:000526 METHOD /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/smtp.rb:583
c:0105 p:0255 s:0522 b:0521 l:000b70 d:000b70 METHOD /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/smtp.rb:560
c:0104 p:0047 s:0513 b:0513 l:000512 d:000512 METHOD /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/smtp.rb:519
c:0103 p:0668 s:0506 b:0506 l:000505 d:000505 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144
c:0102 p:0031 s:0495 b:0495 l:000494 d:000494 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/mail-2.4.4/lib/mail/message.rb:2034
c:0101 p:0009 s:0491 b:0491 l:000467 d:000490 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/mail-2.4.4/lib/mail/message.rb:229
c:0100 p:0021 s:0489 b:0489 l:000471 d:000488 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionmailer-3.2.0/lib/action_mailer/base.rb:414
c:0099 p:0017 s:0486 b:0486 l:000476 d:000485 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123
c:0098 p:0032 s:0484 b:0484 l:000483 d:000483 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20
c:0097 p:0036 s:0477 b:0477 l:000476 d:000476 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123
c:0096 p:0021 s:0472 b:0472 l:000471 d:000471 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionmailer-3.2.0/lib/action_mailer/base.rb:412
c:0095 p:0039 s:0468 b:0468 l:000467 d:000467 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/mail-2.4.4/lib/mail/message.rb:229
c:0094 p:0091 s:0465 b:0465 l:000464 d:000464 METHOD /Users/dave/rails_projects/EquiptMe/app/controllers/registrations_controller.rb:6
c:0093 p:0014 s:0462 b:0462 l:000461 d:000461 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4
c:0092 p:0015 s:0456 b:0456 l:000455 d:000455 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167
c:0091 p:0041 s:0451 b:0451 l:000450 d:000450 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10
c:0090 p:0010 s:0447 b:0447 l:001a20 d:000446 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18
c:0089 p:0192 s:0445 b:0445 l:000444 d:000444 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:436
c:0088 p:0112 s:0439 b:0439 l:000438 d:000438 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405
c:0087 p:0027 s:0430 b:0430 l:000429 d:000429 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385
c:0086 p:0024 s:0425 b:0425 l:000424 d:000424 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81
c:0085 p:0020 s:0419 b:0419 l:001a20 d:001a20 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17
c:0084 p:0012 s:0415 b:0415 l:000414 d:000414 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29
c:0083 p:0010 s:0410 b:0410 l:000391 d:000409 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30
c:0082 p:0017 s:0406 b:0406 l:000396 d:000405 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123
c:0081 p:0032 s:0404 b:0404 l:000403 d:000403 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20
c:0080 p:0036 s:0397 b:0397 l:000396 d:000396 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123
c:0079 p:0152 s:0392 b:0392 l:000391 d:000391 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29
c:0078 p:0143 s:0387 b:0387 l:000386 d:000386 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205
c:0077 p:0032 s:0381 b:0381 l:000380 d:000380 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18
c:0076 p:0093 s:0376 b:0376 l:000375 d:000375 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121
c:0075 p:0084 s:0370 b:0370 l:000369 d:000369 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45
c:0074 p:0048 s:0365 b:0365 l:000364 d:000364 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203
c:0073 p:0086 s:0360 b:0360 l:000359 d:000359 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14
c:0072 p:0030 s:0354 b:0354 l:000928 d:000353 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246
c:0071 p:---- s:0351 b:0351 l:000350 d:000350 FINISH
c:0070 p:---- s:0349 b:0349 l:000348 d:000348 CFUNC  :call
c:0069 p:0022 s:0345 b:0345 l:000344 d:000344 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66
c:0068 p:0094 s:0339 b:0339 l:000338 d:000338 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30
c:0067 p:0026 s:0333 b:0333 l:000332 d:000332 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/routing/mapper.rb:40
c:0066 p:0184 s:0329 b:0329 l:000312 d:000328 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/journey-1.0.4/lib/journey/router.rb:68
c:0065 p:---- s:0318 b:0318 l:000317 d:000317 FINISH
c:0064 p:---- s:0316 b:0316 l:000315 d:000315 CFUNC  :each
c:0063 p:0051 s:0313 b:0313 l:000312 d:000312 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/journey-1.0.4/lib/journey/router.rb:56
c:0062 p:0025 s:0309 b:0309 l:000308 d:000308 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570
c:0061 p:0015 s:0305 b:0305 l:000304 d:000304 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-pjax-0.5.9/lib/rack/pjax.rb:12
c:0060 p:0014 s:0297 b:0297 l:000288 d:000296 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/warden-1.2.1/lib/warden/manager.rb:35
c:0059 p:---- s:0295 b:0295 l:000294 d:000294 FINISH
c:0058 p:---- s:0293 b:0293 l:000292 d:000292 CFUNC  :catch
c:0057 p:0086 s:0289 b:0289 l:000288 d:000288 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/warden-1.2.1/lib/warden/manager.rb:34
c:0056 p:0015 s:0284 b:0284 l:000283 d:000283 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17
c:0055 p:0015 s:0277 b:0277 l:000276 d:000276 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/etag.rb:23
c:0054 p:0052 s:0269 b:0269 l:000268 d:000268 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/conditionalget.rb:35
c:0053 p:0093 s:0262 b:0262 l:000261 d:000261 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14
c:0052 p:0046 s:0255 b:0255 l:000254 d:000254 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21
c:0051 p:0054 s:0250 b:0250 l:000249 d:000249 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242
c:0050 p:0031 s:0242 b:0242 l:000241 d:000241 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205
c:0049 p:0013 s:0234 b:0234 l:000233 d:000233 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200
c:0048 p:0020 s:0230 b:0230 l:000229 d:000229 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338
c:0047 p:0064 s:0222 b:0222 l:000221 d:000221 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64
c:0046 p:0029 s:0213 b:0213 l:000212 d:000212 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:4
c:0045 p:0014 s:0205 b:0205 l:001da0 d:000204 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28
c:0044 p:0040 s:0203 b:0203 l:000202 d:000202 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405
c:0043 p:0112 s:0196 b:0196 l:000195 d:000195 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405
c:0042 p:0027 s:0187 b:0187 l:000186 d:000186 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385
c:0041 p:0024 s:0182 b:0182 l:000181 d:000181 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81
c:0040 p:0013 s:0176 b:0176 l:001da0 d:001da0 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27
c:0039 p:0039 s:0172 b:0172 l:000171 d:000171 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65
c:0038 p:0044 s:0167 b:0167 l:000166 d:000166 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31
c:0037 p:0017 s:0163 b:0163 l:000162 d:000162 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16
c:0036 p:0017 s:0156 b:0156 l:000155 d:000155 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56
c:0035 p:0121 s:0150 b:0150 l:000149 d:000149 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/rack/logger.rb:26
c:0034 p:0052 s:0144 b:0144 l:000143 d:000143 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/rack/logger.rb:16
c:0033 p:0048 s:0140 b:0140 l:000139 d:000139 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22
c:0032 p:0095 s:0133 b:0133 l:000132 d:000132 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/methodoverride.rb:21
c:0031 p:0032 s:0128 b:0128 l:000127 d:000127 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/runtime.rb:17
c:0030 p:0057 s:0119 b:0119 l:000118 d:000118 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72
c:0029 p:0068 s:0115 b:0115 l:000114 d:000114 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/lock.rb:15
c:0028 p:0124 s:0109 b:0109 l:000108 d:000108 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53
c:0027 p:0032 s:0103 b:0103 l:000102 d:000102 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/engine.rb:479
c:0026 p:0034 s:0099 b:0099 l:000098 d:000098 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/application.rb:220
c:0025 p:0015 s:0095 b:0095 l:000094 d:000094 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/content_length.rb:14
c:0024 p:0015 s:0086 b:0086 l:000085 d:000085 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14
c:0023 p:0020 s:0081 b:0081 l:000072 d:000080 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/thin-1.3.1/lib/thin/connection.rb:80
c:0022 p:---- s:0079 b:0079 l:000078 d:000078 FINISH
c:0021 p:---- s:0077 b:0077 l:000076 d:000076 CFUNC  :catch
c:0020 p:0135 s:0073 b:0073 l:000072 d:000072 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/thin-1.3.1/lib/thin/connection.rb:78
c:0019 p:0088 s:0068 b:0067 l:000066 d:000066 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/thin-1.3.1/lib/thin/connection.rb:53
c:0018 p:0036 s:0064 b:0064 l:000063 d:000063 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/thin-1.3.1/lib/thin/connection.rb:38
c:0017 p:---- s:0059 b:0059 l:000058 d:000058 FINISH
c:0016 p:---- s:0057 b:0057 l:000056 d:000056 CFUNC  :run_machine
c:0015 p:0248 s:0054 b:0054 l:000053 d:000053 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/eventmachine-0.12.10/lib/eventmachine.rb:256
c:0014 p:0066 s:0047 b:0047 l:001320 d:001320 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/thin-1.3.1/lib/thin/backends/base.rb:61
c:0013 p:0143 s:0043 b:0043 l:000042 d:000042 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/thin-1.3.1/lib/thin/server.rb:159
c:0012 p:0081 s:0040 b:0040 l:000039 d:000039 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/handler/thin.rb:13
c:0011 p:0271 s:0034 b:0034 l:000290 d:000290 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/server.rb:265
c:0010 p:0231 s:0028 b:0028 l:0010c0 d:0010c0 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/commands/server.rb:70
c:0009 p:0063 s:0024 b:0024 l:000015 d:000023 BLOCK  /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/commands.rb:55
c:0008 p:---- s:0021 b:0021 l:000020 d:000020 FINISH
c:0007 p:---- s:0019 b:0019 l:000018 d:000018 CFUNC  :tap
c:0006 p:0702 s:0016 b:0016 l:000015 d:000015 TOP    /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/commands.rb:50
c:0005 p:---- s:0012 b:0012 l:000011 d:000011 FINISH
c:0004 p:---- s:0010 b:0010 l:000009 d:000009 CFUNC  :require
c:0003 p:0061 s:0006 b:0006 l:002678 d:000108 EVAL   script/rails:6
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:002678 d:002678 TOP   

-- Ruby level backtrace information ----------------------------------------
script/rails:6:in `<main>'
script/rails:6:in `require'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.0/lib/rails/commands.rb:50:in `<top (required)>'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/g 
```

**注册控制器**

```
class RegistrationsController < Devise::RegistrationsController
  def create
    @user = User.new(params[:user])
    @user.build_store(params[:store])
    if @user.save
      UserMailer.signup_confirmation(@user).deliver
      sign_in @user
      redirect_to @user, :flash => {:success => "Welcome to the App"}
    else
      render 'new'
      @title = "Sign up"
    end
  end
end 
```

**用户邮件**

```
class UserMailer < ActionMailer::Base
  default from: "johndoe@gmail.com"

  def signup_confirmation(user)
    @user = user

    mail to: user.email, subject: "Thank You for Registering with us"
  end
end 
```

**开发环境**

```
Outdoor::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # In the development environment your application's code is reloaded on
  # every request.  This slows down response time but is perfect for development
  # since you don't have to restart the web server when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = true

  #SMTP 
  config.action_mailer.default_url_options = { :host => 'localhost:3000' }
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :user_name            => 'Mygmail Account',
  :password             => 'MyPassword',
  :authentication       => 'plain',
  :enable_starttls_auto => true  }

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:26:14.977

奇怪的是，在您的开发日志中没有太多关于错误的信息，因为它应该是（我希望您不会错过日志文件的后半部分）。

而且最常见的错误是没有正确设置 SMTP 设置。

只需打开您的邮件传递错误 (config/environments/development.rb)

```
config.action_mailer.raise_delivery_errors = true 
```

以下是我在 Gmail 中使用的示例设置

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' }
ActionMailer::Base.smtp_settings = {
                    :address        => "smtp.gmail.com",
                    :port           => 587,
                    :authentication => :plain,
                    :user_name      => "sameera207@gmail.com",
                    :password       => "<my gmail password>",
                    :openssl_verify_mode  => 'none'
  } 
```

# wordpress - 如何屏蔽我的 wordpress 页面 id 以仅显示域

> ID：11817386
> 
> 赞同：0
> 
> 时间：2012-08-05T14:52:24.437
> 
> 标签：wordpress, apache, mod-rewrite, url-rewriting

我有wordpress，每次我创建一个页面时，它都会为该页面创建一个ID。有没有办法代替显示

www.mydomain.com/?page_id=97

无论显示什么页面，都只显示 www.mydomain.com

我确信使用了 mod rewrite，但 .htaccess 对我来说始终是个谜。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:57:10.220

据我所知 mod_rewrite 不能这样做。它无法从单个顶级 url 推断出哪个页面。

我能想到的有两种可能——

1）您可以拥有 sef 网址 - [http://www.mydomain.com/some-page](http://www.mydomain.com/some-page)

2) 你可以通过 iframe 做你想做的事

# html - 如何创建第一列固定且下一列可水平滚动的 HTML 表格

> ID：11817388
> 
> 赞同：3
> 
> 时间：2012-08-05T14:52:28.570
> 
> 标签：html, css, html-table

我有一个表，它只有两列，我希望第一列是固定的，另一列是水平滚动的。表可以有很多行。可滚动应作为一个组应用于所有正确的列，而不是单个列。

以下是我的表结构

```
<table>
    <tr>
        <th>Header 1</th>
        <th>Header 2</th>
    </tr>
    <tr>
        <td>row 1,cell 1</td>
        <td>row 1,cell 2</td>
    </tr>
    <tr>
        <td>row 2, cell 1</td>
        <td>row 2, cell 2</td>
    </tr>
</table> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:14:29.830

如果您希望将 who 列的权限作为一个单元格，您可以按如下方式设置表格：

```
<table>
     <tr>
         <th>Header 1</th>
         <th>Header 2</th>
     </tr>
     <tr>
          <td>row 1, cell 1</td>
          <td rowspan="2" class="scroll">spans across as may rows as rowspan, vertically</td>
      </tr>
      <tr>
          <td>row 2, cell2  </td>
      </tr>
 </table> 
```

对于滚动，您的选项取决于您的目标浏览器，如果您不关心 IE 的非当前版本（8 及之前），那么您可以简单地将以下样式应用于 tall td：

```
 td.scroll {
      overflow-x: auto;
      overflow-y: hidden;
  } 
```

如果您需要适应 IE 8，那么您将应用此样式

```
 overflow: auto; 
```

并且必须确保单元格的垂直内容没有高到足以导致垂直滚动条。如果您只想针对固定宽度的第一列，

```
 td:first-child {
         width: 120px
   } 
```

会成功的。

* * *

编辑：

您正在寻找的效果比我最初想象的要难得多 - 覆盖表的默认大小和行为需要很多时间。看起来表格对内部滚动有很强的抵抗力，事实上如果内部内容比定义的宽度宽 `td`，即使表格比定义的宽度更宽并且`overflow`设置为`scroll`，`td`仍然会扩展到以适应内容。据我所知（如果我错了，请纠正我），制作`td`卷轴的唯一方法是添加一个`max-width`. 此外，您想要的 fixed with 列**必须**设置一个`min-width`属性。这是我的实验：

[http://jsfiddle.net/thundercracker/8CUsm/19/](http://jsfiddle.net/thundercracker/8CUsm/19/)

我认为这不是很流畅，但是第二列将始终扩展到 max-width 属性中定义的宽度。

如果您尝试将此表设置为布局页面，我强烈建议您不要这样做。尽管它相当复杂，但这里有一个更流畅的替代布局；您可以尝试更改表格中的行数和正文的宽度，它的行为方式相同。

[http://jsfiddle.net/thundercracker/adD3E/67/](http://jsfiddle.net/thundercracker/adD3E/67/)

我必须将此线程归功于该设置的一部分：

[CSS - 将浮动子 DIV 高度扩展到父高度](https://stackoverflow.com/questions/4804581/css-expand-child-div-height-to-parents-height)

我实际上有点希望我错了——创建这样的布局不需要这么多，所以如果有人有更简单的方法，请发布。

编辑：替代布局适用于所有主要浏览器，并且在 IE 7 中只有一些小问题，我认为可以轻松修复（尽管我已经错了一次），所以这是非常有效的跨浏览器。

# android - 我想以编程方式设置 Spinner 的高度，就像其他小部件上可用的 setHeight

> ID：11817389
> 
> 赞同：1
> 
> 时间：2012-08-05T14:52:47.450
> 
> 标签：android, android-layout, android-spinner

我想隐藏微调器表单视图，即将高度设置为零。（我尝试过 setVisibility。但它只是隐藏了微调器。小部件仍然占据与以前相同的高度。）

然后我想显示 Spinner，即在事件中将 Spinner 的高度设置为“wrap_content”。

我该怎么做？

请注意，我想在微调器小部件本身而不是在适配器的视图上执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:58:55.030

您是否尝试过 setVisibility(View.GONE) 因为 setVisibility(View.INVISIBLE) 只会使其不可见，但不会在布局上腾出空间，而 GONE 确实腾出空间。

# ruby-on-rails - 如何在 ActiveAdmin Rails 的 admin_user 模型中添加用户名

> ID：11817390
> 
> 赞同：0
> 
> 时间：2012-08-05T14:52:52.763
> 
> 标签：ruby-on-rails, activeadmin

我正在尝试将一个名为 username 的新字段添加到我的 admin_user 模型中。我在我的应用程序中使用 ActiveAdmin。我不知道如何添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:01:05.813

您可以使用以下两个命令来执行此操作：

```
rails generate migration add_username_to_admin_user username:string    

rake db:migrate 
```

第一行是向表中添加字段的快捷方式 ( `add_username_to_admin_user`)。它会产生这样的东西：

```
class AddUsernameToAdminUser < ActiveRecord::Migration
  def change
    add_column :admin_users, :username, :string
  end
end 
```

第二行将迁移应用到您的数据库。

您可能还想查看[迁移文档](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)以获取更深入的信息（一如既往，Caveat Emptor：Rails 文档已经过时了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:14:13.393

您需要将其添加到您的架构（使用`rails g migration`），更新您的数据库（`rake db:migrate`），然后活动管理员将看到该字段。

# c++ - 在 C++ 中将 64 位值左移 64 位给出奇怪的结果

> ID：11817391
> 
> 赞同：5
> 
> 时间：2012-08-05T14:52:59.120
> 
> 标签：c++, 64-bit, bit-manipulation, shift

> **可能重复：**
> [64bit shift问题](https://stackoverflow.com/questions/1024968/64bit-shift-problem)

我在 Windows 8 64 位上使用 Visual Studio 2012，在调试模式下以 x64 为目标，使用 AMD Phenom II。
所以基本上...

```
uint64_t Foo = 0xFFFFFFFFFFFFFFFF << 64;//Foo is now 0x0000000000000000
uint64_t Derp = 64;
uint64_t Bar = 0xFFFFFFFFFFFFFFFF << Derp;//Foo is now 0xFFFFFFFFFFFFFFFF 
```

使用较低的值（例如 63）可以恢复正常行为。
为什么会发生这种情况，我该如何解决？

更新：我切换到发布模式。瞧，问题消失了，都返回了 0。但问题仍然处于调试模式，这是我需要调试代码的地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T14:59:47.317

如果移位大于或等于位宽的值，则移位操作具有未定义的行为。

来自 C++11 草案中的第 5.8 p1 节：

> 操作数应为整数或非范围枚举类型，并执行整数提升。结果的类型是提升的左操作数的类型。如果右操作数为负数，或者大于或等于提升的左操作数的位长度，则行为未定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T14:58:17.823

我相信 C++ 中未定义整数大小或更大的移位。

您的第一个示例正在编译时进行评估，因为它只涉及常量。您的第二个示例由处理器在运行时计算。

您可以将班次分成两部分：

```
uint64_t Bar = 0xFFFFFFFFFFFFFFFF << (Derp / 2);
Bar <<= Derp - (Derp / 2); 
```

# c++ - 如何使用 itermerval 和 sigaction 结构 C++ 以随机间隔同时调度两个函数

> ID：11817392
> 
> 赞同：0
> 
> 时间：2012-08-05T14:52:59.040
> 
> 标签：c++, scheduled-tasks, handler, setitimer

这里是新的代码片段：

```
#define SIMU_TIME 30
pthread_mutex_t mymutex = PTHREAD_MUTEX_INITIALIZER ; 
pthread_cond_t condition = PTHREAD_COND_INITIALIZER ; 
void *timer(void *Ptr) 
{    while ((float) clock()/CLOCKS_PRE_TICKS < SIMU_TIME) 
       {  float mean = (float) Ptr ; 
         float interval = exponential(mean) ; 
         float goal = (float) clock()/CLOCKS_PRE_TICKS + interval ; 
         pthread_mutex_lock(&mutex) ;
         while(goal > (float) clock()/CLOCKS_PRE_TICKS ) ; 
        pthread_mutex_unlock(&mymutex) ; 
       }
return(NULL) ; 
}
void *AddPacket(void *Ptr) 
{
   pthread_cond_lock(&mymutex) ;
   pthread_cond_wait(&condition, &mymutex) ; 
     // do business
    pthread_unlock_mutex(&mymutex) ; 
   }
int main()
{  float mean = 1.5 ; 
  pthread_t thread1, thread2 ; 
  pthread_create(&thread1, NULL, &timer, (void *) mean) ; 
  pthread_create(&thread2, NULL, &AddPacket, NULL) ; 
  pthread_join(thread1, NULL) ; 
  pthread_join(thread2, NULL) ; 
  pthread_mutex_destroy(&mymutex) ; 
  pthread_cond_destroy(&condition) ;
  pthread_exit(NULL) ; 
} 
```

由于 pthread_cond_wait 通常在一个线程在达到某个阈值之前不访问属性时使用，我们必须使用与此变量关联的互斥锁以避免任何竞争条件，但在我的情况下，这两个线程实际上并不需要访问相同的内存区域，这只是在第一个线程允许时调度第二个线程的一种方式。在这种情况下，是否有必要在“pthread_cond_wait”之前调用“pthread_mutex_lock”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:01:36.210

问题是您可以同时有两个警报，或者同时有两个`SIGALRM`处理程序。这可以通过多种方式解决。一种方法是使用事件队列。

您还有另一个问题，那就是您将信号处理程序设置为`this`. 这有很多问题。第一个是`this`在函数中无效。原因是它是一个由内核直接调用的线程函数，因此没有有效的`this`. 第二个是处理程序必须是一个函数，而不是一个类。请记住，信号处理程序是从操作系统调用的，它没有 C++ 类的概念。

上述两个问题都将通过实现某种[事件队列](http://en.wikipedia.org/wiki/Event_queue)来解决。

线程函数也有一个问题，当它们运行到最后时，线程也结束了。

# ruby-on-rails - 如何从模型中为 html 标签生成唯一的 dom id

> ID：11817398
> 
> 赞同：7
> 
> 时间：2012-08-05T14:53:26.523
> 
> 标签：ruby-on-rails, views, helpers

我有一个索引视图，其中包含多行具有多个属性的项目。我想用 ajax 更新 items 属性的内容，因此我需要一个唯一的 dom id。有没有可用的辅助方法？我现在正在做的是：

```
<span id="<%=  item.id.to_s + "_on_storage"%>"> 
```

最好的，菲尔

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-05T15:03:05.060

您可以使用

```
dom_id(item) 
```

这是一种用于生成 DOM ID 的 ActiveRecord 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T15:04:55.333

一个好的做法是使用 HTML5 数据属性：

```
<span data-item-id="<%= item.id %>"> 
```

# php - 获取括号内的单词

> ID：11817401
> 
> 赞同：0
> 
> 时间：2012-08-05T14:54:13.790
> 
> 标签：php

如果它们在 () 之间，我如何回显它们，这是我的示例：

```
<?php
$text = "(test1) ignore this right here (test2) ignore (test3)";
Echo get_texts_between("()",$text);
?> 
```

输出应该是：test1 test2 test3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:59:22.843

您可以为此使用 preg_match ：

```
$text = "(test1) ignore this right here (test2) ignore (test3)";
$pattern = '/\(([a-z0-9]+)\)/';
preg_match_all($pattern, $text, $matches);

echo implode(' ', $matches[1]); 
```

请注意，这仅匹配`a-z`和`0-9`在`()`. 这将与您的例句相匹配。如果您只匹配例如 4 个字母和 1 个数字，或者当组内可能有其他字符时，您必须添加更多示例，说明您希望在 OP 中完全匹配的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T15:13:45.587

您可以[`preg_replace`](http://php.net/preg_replace)用一个空格替换您不感兴趣的部分 ( )：

```
echo preg_replace('~^\(|\)[^\(]*\(|\)$~', ' ', $text); 
```

这是用正则表达式匹配字符串开头的单个左括号、字符串`^\(`中的右括号和左括号部分`\)[^\(]*\(`或字符串末尾的单个右括号`\)$`。

如果您不需要尾部斜杠，请添加一个简单的斜杠`trim`。或者还有`preg_split`：

```
echo implode(' ', preg_split('~^\(|\)[^\(]*\(|\)$~', $text, -1, PREG_SPLIT_NO_EMPTY)); 
```

但我想说的是，它在一行中变得有点复杂。顺便说一句，模式是一样的。

# android - 在 ListView 的 ArrayAdapter 中使用 Linkify 会导致 RuntimeException

> ID：11817402
> 
> 赞同：1
> 
> 时间：2012-08-05T14:54:23.997
> 
> 标签：android, android-listview, android-arrayadapter, linkify

`TextView`我有一个`ArrayAdapter`可能包含一些超链接的内容。对于我使用的那些链接`Linkify`：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = convertView;
    if (rowView == null) {
        rowView = inflater.inflate(R.layout.list_item_2, null);
        holder = new ViewHolder();

        holder.content = (TextView) rowView.findViewById(R.id.postContent);
        holder.date = (TextView) rowView.findViewById(R.id.postDate);

        rowView.setTag(holder);
    } else {
        holder = (ViewHolder) rowView.getTag();
    }

    holder.content.setText(contents.get(position));
    holder.date.setText(dates.get(position));

    Linkify.addLinks(holder.content, Linkify.ALL);

    return rowView;
} 
```

但是因为`Linkify`在 ArrayAdapter 中添加了 ，所以我得到一个异常说：

```
08-05 16:42:16.715: E/AndroidRuntime(20598): FATAL EXCEPTION: main
08-05 16:42:16.715: E/AndroidRuntime(20598): android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
08-05 16:42:16.715: E/AndroidRuntime(20598):    at android.app.ContextImpl.startActivity(ContextImpl.java:921)
08-05 16:42:16.715: E/AndroidRuntime(20598):    at android.content.ContextWrapper.startActivity(ContextWrapper.java:283)
08-05 16:42:16.715: E/AndroidRuntime(20598):    at android.text.style.URLSpan.onClick(URLSpan.java:62) 
```

我怎样才能使这项工作？我想不出替代方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T01:42:42.450

查看日志中的异常，您似乎在分配`ArrayAdapter`. 例如，如果您的代码类似于以下内容：

```
 listView.setAdapter(new ArrayAdapter<String>(context,
            android.R.layout.simple_list_item_1,
            data) {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // ...
        }
    }); 
```

您必须使用应用程序上下文初始化上面的**上下文**变量，如下所示：

```
 Context context = getApplicationContext(); 
```

为避免该错误，您应该使用您的`Activity`实例对其进行初始化：

```
 Context context = this; 
```

或者，如果您的代码位于`Fragment`：

```
 Context context = getActivity(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:47:37.513

如果您有兴趣打开链接，可以使用

```
String text = "<a href=\"http://www.google.co.in/\">Google</a>";
holder.content.setText(Html.fromHtml(text));
holder.content.setMovementMethod(LinkMovementMethod.getInstance()); 
```

这对您在 ListView 中会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T11:20:42.707

在您的 Activity.Java 中，同时将您的列表与适配器绑定

```
YourAdapter yourAdapter = new YourAdapter(YourCurrentActivityName.this, YourArrayList);
yourListView.setAdapter(yourAdapter); 
```

在构造函数的 YourAdapter.java 中，确保它是 Activity 而不是 Context

```
public YourAdapter(Activity context, YourArrayList list){
    this.context = context;
    this.list = list;
} 
```

并且，将此代码用于 Linkify 适配器中的文本视图。

```
holder.yourTextView.setLinksClickable(true);
holder.yourTextView.setMovementMethod(LinkMovementMethod.getInstance());
Linkify.addLinks(holder.yourTextView, Linkify.ALL);
holder.yourTextView.setAutoLinkMask(Linkify.ALL); 
```

# android - ListView NullpointerException 问题

> ID：11817408
> 
> 赞同：2
> 
> 时间：2012-08-05T14:55:22.863
> 
> 标签：android, listview, nullpointerexception

我尝试创建一个 XML 文件，该文件采用一个简单的 listeView 设置，个人适配器如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <ListView
        android:id="@+id/listpromo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout> 
```

和我的活动：

```
 public class ListSample_category3 extends Activity 
    {

        public final static String ITEM_TITLE = "title";
        public final static String ITEM_COMPANY= "company";
        public final static String ITEM_DATE = "availabledate";
        private ListView list;

        public Map<String,?> createItem(String title, String company, String date) 
        {
            Map<String,String> item = new HashMap<String,String>();
            item.put(ITEM_TITLE, title);
            item.put(ITEM_COMPANY, company);
            item.put(ITEM_DATE, date);
            return item;
        }

        @Override
        public void onCreate(Bundle bundle) 
        {
            super.onCreate(bundle);

            List<Map<String,?>> security = new LinkedList<Map<String,?>>();
            security.add(createItem("Remember passwords", "Cisco", "2012-02-10"));
            security.add(createItem("Clear passwords", "Microsoft", "2012-02-10"));
            security.add(createItem("Show security warnings", "Apple", "2012-02-10"));

            // create our list and custom adapter
            SeparatedListAdapter adapter = new SeparatedListAdapter(this);

            adapter.addSection("Categorie 1", new ArrayAdapter<String>(this,
                R.layout.list_item_category3, new String[] { "First item", "Item two" }));

            adapter.addSection("Categorie 2", new SimpleAdapter(this, security, R.layout.list_complex_category3, 
                new String[] { ITEM_TITLE, ITEM_COMPANY, ITEM_DATE }, new int[] { R.id.list_complex_title, R.id.list_complex_company, R.id.list_complex_date }));

            // create ListView
            //ListView list = new ListView(this);
            list = (ListView) findViewById(R.id.listpromo);

            // OnItemClickListener on all items
            OnItemClickListener listener = new OnItemClickListener()
            {
                  public void onItemClick(AdapterView<?> parent, View view, int position, long id)
                  {

                  }
            };
            list.setOnItemClickListener(listener);
            list.setItemsCanFocus(true);

            list.setAdapter(adapter);
            this.setContentView(list);

        }
    } 
```

但我有一个 NullPointerException ：

```
 08-05 17:00:26.304: E/AndroidRuntime(3226): FATAL EXCEPTION: main
08-05 17:00:26.304: E/AndroidRuntime(3226): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dev.prixo/com.dev.prixo.OngletsActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dev.prixo/com.dev.prixo.ListSample_category3}: java.lang.NullPointerException
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.os.Looper.loop(Looper.java:130)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at java.lang.reflect.Method.invokeNative(Native Method)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at java.lang.reflect.Method.invoke(Method.java:507)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at dalvik.system.NativeStart.main(Native Method)
08-05 17:00:26.304: E/AndroidRuntime(3226): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dev.prixo/com.dev.prixo.ListSample_category3}: java.lang.NullPointerException
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1491)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:676)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.widget.TabHost.setCurrentTab(TabHost.java:348)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.widget.TabHost.addTab(TabHost.java:227)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at com.dev.prixo.OngletsActivity.onCreate(OngletsActivity.java:34)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-05 17:00:26.304: E/AndroidRuntime(3226):     ... 11 more
08-05 17:00:26.304: E/AndroidRuntime(3226): Caused by: java.lang.NullPointerException
08-05 17:00:26.304: E/AndroidRuntime(3226):     at com.dev.prixo.ListSample_category3.onCreate(ListSample_category3.java:77)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-05 17:00:26.304: E/AndroidRuntime(3226):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-05 17:00:26.304: E/AndroidRuntime(3226):     ... 20 more 
```

请告诉我该怎么做，请..

这是我的 SeperatedListAdapter：

```
public class SeparatedListAdapter extends BaseAdapter 
{
    public final Map<String,Adapter> sections = new LinkedHashMap<String,Adapter>();
    public final ArrayAdapter<String> headers;
    public final static int TYPE_SECTION_HEADER = 0;

    public SeparatedListAdapter(Context context) 
    {
        headers = new ArrayAdapter<String>(context, R.layout.list_header_category3);
    }

    public void addSection(String section, Adapter adapter) 
    {
        this.headers.add(section);
        this.sections.put(section, adapter);
    }

    public Object getItem(int position) 
    {
        for(Object section : this.sections.keySet()) 
        {
            Adapter adapter = sections.get(section);
            int size = adapter.getCount() + 1;

            // check if position inside this section 
            if(position == 0) return section;
            if(position < size) return adapter.getItem(position - 1);

            // otherwise jump into next section
            position -= size;
        }
        return null;
    }

    public int getCount() 
    {
        // total together all sections, plus one for each section header
        int total = 0;
        for(Adapter adapter : this.sections.values())
            total += adapter.getCount() + 1;
        return total;
    }

    public int getViewTypeCount() 
    {
        // assume that headers count as one, then total all sections
        int total = 1;
        for(Adapter adapter : this.sections.values())
            total += adapter.getViewTypeCount();
        return total;
    }

    public int getItemViewType(int position) 
    {
        int type = 1;
        for(Object section : this.sections.keySet()) 
        {
            Adapter adapter = sections.get(section);
            int size = adapter.getCount() + 1;

            // check if position inside this section 
            if(position == 0) return TYPE_SECTION_HEADER;
            if(position < size) return type + adapter.getItemViewType(position - 1);

            // otherwise jump into next section
            position -= size;
            type += adapter.getViewTypeCount();
        }
        return -1;
    }

    public boolean areAllItemsSelectable() 
    {
        return false;
    }

    public boolean isEnabled(int position) 
    {
        return (getItemViewType(position) != TYPE_SECTION_HEADER);
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        int sectionnum = 0;
        for(Object section : this.sections.keySet()) {
            Adapter adapter = sections.get(section);
            int size = adapter.getCount() + 1;

            // check if position inside this section 
            if(position == 0) return headers.getView(sectionnum, convertView, parent);
            if(position < size) return adapter.getView(position - 1, convertView, parent);

            // otherwise jump into next section
            position -= size;
            sectionnum++;
        }
        return null;
    }

    public long getItemId(int position) 
    {
        return position;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T15:15:08.743

你不能说不`findViewById()`设置 contentView。您必须设置包含`ListView`.

`setContentView(R.layout.yourlayout)`. 否则，你的`ListView list`将是空的。

所以在你的`onCreate()`：

```
protected void onCreate(Bundle bundle) {
     super.onCreate(bundle);
     setContentView(R.layout.yourlayout);
} 
```

并删除底部的这一行`onCreate()`：

```
setContentView(listview); 
```

# actionscript-3 - Actionscript 中“SharedObject”背后的技术是什么？

> ID：11817415
> 
> 赞同：0
> 
> 时间：2012-08-05T14:57:37.863
> 
> 标签：actionscript-3, flash-media-server

我想知道在 AS2/AS3 中存在远程或本地“SharedObject”背后的技术是什么。

1）为什么其他脚本语言不使用该技术。喜欢 Javascript 吗？

2）它的存储方式是否与 Cookies（在客户端的浏览器数据库中）或会话（服务器端的数据库）相同，或者存储发生在哪里？

五。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:34:04.443

其他答案解决了您的第二个问题。在回答您关于为什么它在 JavaScript 中不可用的第一个问题时，简短的回答是，由于 HTML5 和 Web 存储规范，现在它可以了。

据我了解，没有什么大的技术差异可以让 Flash 拥有这么长时间的存储优势，而 JavaScript 只是最近才获得访问权。相反，不同之处在于 Flash 由一家公司 (Adobe) 管理，并且可以按照自己的节奏移动，实现他们想要的任何功能。然而，在浏览器中本地实现一项新功能意味着要就如何实现和标准化进行大量讨论，因为有许多不同的浏览器供应商需要支持该功能。

以下是有关 Web Storage 的一些历史及其当前状态的好读物：http: [//diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:16:47.620

详细信息可以在这里找到：http: [//helpx.adobe.com/flash-player/kb/disable-local-shared-objects-flash.html](http://helpx.adobe.com/flash-player/kb/disable-local-shared-objects-flash.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:28:01.007

SharedObject 背后的技术与浏览器的 cookie 相同。它们保存在硬盘 C 的 windows 文件夹中。

# java - 使用 Eclipse (JAVA) 进行远程开发、构建和 JUnit

> ID：11817420
> 
> 赞同：0
> 
> 时间：2012-08-05T14:59:01.370
> 
> 标签：java, eclipse, compilation, remote-debugging

首先，我想描述一下我想要实现的配置。

1) 远程 Windows 机器 - 安装所有必需的软件（我的项目的先决条件），配置数据库等。 2) 使用 Eclipse 的开发人员的本地机器。

以前他们使用 RDP 连接到 Windows 机器进行开发，但我对 UI 通过网络时发生的速度和不同的延迟不满意。

我想设置这个：

1）Eclipse 已连接到远程 Windows 机器 √ - 现在可以工作，我可以看到文件系统。

2）远程代码库添加到本地机器上的工作区，项目的构建路径充满了所需的库（也位于远程文件系统上）

3）所有常规工具都在工作，例如eclemma，可以执行JUnit等。

我有几个想法，例如 rsync、使用颠覆等，但所有这些都需要在本地机器上设置所有先决条件。我希望完成所有列出的事情远程。

目前我有 Eclipse 能够连接到远程 Windows 机器，但我只能访问和编辑文件、执行 shell 命令和查看文件结构，这更像是一个高级远程文本编辑器 - 我希望能够拥有更多的功能eclipse 和 3rd 方插件..

是否有任何现有的解决方案？

* * *

没有资源不是一个坏主意，但是，由于开发过程涉及更改源，要在远程机器上编译它们需要以某种方式同步它们。

以下是每个位置的任务细目： RemoteMachine - 编译、执行 JUnit（结果应在 Eclipse 中的常规 JUnit 选项卡中显示）。

本地机器 - Eclipse 运行、编码、源代码应该与远程机器同步，并且在 RSE 的 shell 窗口中我将能够执行完整的构建过程（在我们的项目中它与 Eclipse 的源代码编译不同）

主要思想是替换开发人员在 RDP 机器上工作的进程，并切换到在本地使用 eclipse，而无需在本地机器上设置所有必备软件。

# javascript - 如何缓存 html5 文件对象？

> ID：11817421
> 
> 赞同：0
> 
> 时间：2012-08-05T14:59:02.130
> 
> 标签：javascript, html

我有一系列`File`对象，我想将它们保留在客户端浏览器上，这样我就可以在用户愉快地浏览网站时在后台与之交互。

我的问题是，存储这个数组（客户端）的最佳位置是什么？我需要将它们存储在某个地方，因为现在它只是在一个变量上，如果用户导航到该站点的其他页面，该数组将会丢失。

# sql-server - 在 sql server 2008 中对百万记录表进行简单但缓慢的查询

> ID：11817425
> 
> 赞同：3
> 
> 时间：2012-08-05T14:59:23.627
> 
> 标签：sql-server, performance, sql-server-2008

您好朋友，并提前感谢您的帮助。

我正在执行一个简单的查询，该查询在两个表之间执行连接：

```
SELECT
F5_CNOMBRE,
F5_CTD,
F5_CNUMSER,
F5_CNUMDOC,
F5_DFECDOC,
F5_NIMPORT,
CD_DFECCAN,
CD_CCODART
FROM ft1
INNER JOIN cc1
ON RTRIM(cc1.CD_CNRODOC) = RTRIM(ft1.F5_CNUMSER) + ft1.F5_CNUMDOC
WHERE F5_CGLOSA LIKE @varNroExpediente + '%' 
```

表 ft1 有大约 100 万条记录，表 cc1 有大约 700 000 条记录。

当没有人在/使用这些表时，查询运行速度很快，但是当用户使用它们时，查询大约需要 30/50 秒才能完成。

我正在考虑创建一个索引视图，索引字段 ft1.F5_CNUMSER 和 ft1.F5_CNUMDOC。我认为这会提高性能。我也想听听你对这个问题的看法，如果我在视图上创建索引，查询的表是否有可能在操作中被损坏，这些表对于实际系统来说是非常重要的。

我很欣赏我能在这个主题上获得的洞察力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T16:21:22.690

看到您的两个表总共有 147 列，但您“仅”选择了其中的 8 个（一件好事！），您可能会通过在表上设置两个索引来获得良好的性能提升：

*   在 table 上`ft1`，创建一个索引`F5_CGLOSA`（您在`WHERE`子句中使用）并包含该表中的其他列：

    ```
    CREATE INDEX IX01_ft1 
    ON dbo.ft1 (F5_CGLOSA)
    INCLUDE(F5_CNOMBRE, F5_CTD, F5_CNUMSER, F5_CNUMDOC, F5_DFECDOC, F5_NIMPORT) 
    ```

*   在另一张表`cc1`上，在两列中较小的列上创建一个索引（取决于它们的数据类型）并包含另一列 - 我只是“猜测”它可能是这样的：

    ```
    CREATE INDEX IX01_ft1 
    ON dbo.cc1(CD_DFECCAN)
    INCLUDE(CD_CCODART) 
    ```

这样，您的查询（它需要的所有列）都被这两个索引“覆盖”，并且能够只扫描这两个索引（并结合这些扫描的结果），而不必扫描整个表（它们是更大，更多的列）可以带来显着的改进（希望如此！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T15:05:03.210

当然，用索引视图实现连接可能很有用，因为连接太讨厌了。索引对此无能为力。创建视图时，将 F5_CGLOSA 设为第一个聚集索引列，以便您的查询可以在其上查找。

不确定这对您是否可行，但您可以 a) 更改连接列，这样您就不必加入函数结果并成为 SARGable 和 b) 找出为什么该查询的并发用户会导致阻塞？也许你可以通过打开快照隔离来解决这个问题。

# javascript - 表格 - 停止双重提交

> ID：11817431
> 
> 赞同：0
> 
> 时间：2012-08-05T15:00:04.353
> 
> 标签：javascript, jquery, ajax

全部：

我正在使用 jquery/mvc/knockout 开发一个 Web 应用程序，该应用程序正在获取数据并使用 $.post 以相当昂贵的交易将其发布到服务器。

我不希望用户“双击”或不耐烦并单击两次。除了 UI 线索表明某些事情正在发生，我想出了一种我认为可以实现此目的的方法，但我想确保这样做没有警告或隐患。

下面是一个使用 setTimeout 模拟“通过 ajax 提交”请求的 JSFiddle。我将函数“alreadyClicked”上的一个内部字段设置为 true，运行“ajax 请求”，然后在后处理完成后将其设置回 false。如果您转到下面的小提琴并拥有一个支持 console.log 的调试器工具（a la firefox），您可以疯狂地点击并观察它进入方法以及何时跳过。

[http://jsfiddle.net/puhfista/vVUCm/7/](http://jsfiddle.net/puhfista/vVUCm/7/)

感谢您提供有关此主题的任何建议，您喜欢渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:05:46.460

你为什么不这样做：

```
$("<your element selector>").click(function(){
    $(this).attr('disabled', 'disabled');
    //  do your postback here
}); 
```

只是不要忘记在回发完成后重新启用该元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:06:12.610

您可以使用此插件在已经进行时阻止表单提交。

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:29:19.770

你在你的问题中提到你在这个项目中使用了淘汰赛。实现您想要的淘汰方法是在您的视图模型中声明一个称为“isPosting”之类的可观察对象：

```
self.isPosting = ko.observable(false); 
```

在提交按钮的 html 中，数据绑定到这个 observable：

```
<button data-bind="click:doPost, disable: isPosting">Submit</button> 
```

在您的“doPost”点击处理程序中，您需要在帖子发生时将 isPosting 设置为 true，在帖子完成后将其设置为 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T16:32:10.577

@DimitryV：那不是一个很好的解决方案。您会更好地键入提交事件，以便您捕捉到用户按 Enter 提交表单之类的事情。

```
$("form").submit(function () {
    $(this).attr('disabled', 'disabled');
    //  do your postback here
}); 
```

这样，您将捕获所有提交。只是作为一个注意事项！

# node.js - Node js：如何获取包的路径

> ID：11817433
> 
> 赞同：0
> 
> 时间：2012-08-05T15:00:19.273
> 
> 标签：node.js

我正在编写一个节点包，我需要复制包中包含的一些文件。但是我找不到获取 npm 包路径的方法。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-05T15:24:45.140

你看过`__dirname`吗？以下是文档：[http ://nodejs.org/api/globals.html#globals_dirname](http://nodejs.org/api/globals.html#globals_dirname)

您可以使用`__dirname`模块中的变量来派生其他包的位置。

# android - 使用 MediaPlayer 播放 InputStream

> ID：11817435
> 
> 赞同：3
> 
> 时间：2012-08-05T15:00:36.803
> 
> 标签：android

我有一个`InputStream`蓝牙（使用 SPP）相机，我想在 Android 上显示。有没有办法将此 InputStream 提供给 MediaPlayer 或任何其他控件以显示视频。

# struct - 使用 memcpy 复制 unsigned short

> ID：11817440
> 
> 赞同：0
> 
> 时间：2012-08-05T15:01:07.223
> 
> 标签：struct, memcpy

当我尝试将变量“b”的值复制到变量“a”中时出现*“**运行时错误**” 。*

```
#include <stdio.h>
#include <string.h>

typedef struct{
        unsigned short a;
}st1;

main()
{
        st1* myStruct;
        unsigned short b = 0xFFFF;

        memcpy(&myStruct->a, &b,sizeof(b));
} 
```

我想知道为什么会这样。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:04:18.680

因为您没有为`myStruct`. 你没有初始化它，所以它的值是`memcpy()`. 因此，`&myStruct->a`正在访问一些随机地址，并且写入`&myStruct->a`可能会导致运行时错误。

# c# - 如何从套接字只接收 X 字节？

> ID：11817444
> 
> 赞同：1
> 
> 时间：2012-08-05T15:01:30.787
> 
> 标签：c#, mono

当我调用 socket.Receive(Buffer) 时，有没有一种方法可以阻止调用，直到读取到一定数量的字节？如果不是，制作接收循环的典型方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:12:53.673

您通常需要使用接受偏移量和计数的重载，并手动循环（检查返回值）直到您有足够的量。例如：

```
void ReadExact(Socket socket, byte[] buffer, int offset, int count) {
    int read;
    while(count > 0 && (read = socket.Receive(
       buffer, offset, count, flags)) > 0)
    {
        offset += read;
        count -= read;
    }
    if(count > 0) throw new EndOfStreamException();
} 
```

如果您将套接字包装在`NetworkStream`.

# c# - 从 webBrowser 控件中提取 XML

> ID：11817447
> 
> 赞同：1
> 
> 时间：2012-08-05T15:01:39.710
> 
> 标签：c#, xml, browser

我希望从 webBrowser 控件中解析 XML 本身。

我曾尝试使用`webBrowser1.DocumentText.ToString()`来获取 XML，但它没有给出 XML 本身，它提供了包含所有 css 的网页源，等等提供了页面。下面是一个例子：

```
<?xml version="1.0"?>
<test>
  <example>Hello</example>
</test> 
```

这就是我想在输出中包含的内容，但这样做`webBrowser.DocumentText.ToString()`会给出以下内容：

```
<HTML><HEAD>
<STYLE>BODY{font:x-small 'Verdana';margin-right:1.5em}
.c{cursor:hand}
.b{color:red;font-family:'Courier New';font-weight:bold;text-decoration:none}
.e{margin-left:1em;text-indent:-1em;margin-right:1em}
.k{margin-left:1em;text-indent:-1em;margin-right:1em}
.t{color:#990000}
.xt{color:#990099}
.ns{color:red}
.dt{color:green}
.m{color:blue}
.tx{font-weight:bold}
.db{text-indent:0px;margin-left:1em;margin-top:0px;margin-bottom:0px;padding-left:.3em;border-left:1px solid #CCCCCC;font:small Courier}
.di{font:small Courier}
.d{color:blue}
.pi{color:blue}
.cb{text-indent:0px;margin-left:1em;margin-top:0px;margin-bottom:0px;padding-left:.3em;font:small Courier;color:#888888}
.ci{font:small Courier;color:#888888}
PRE{margin:0px;display:inline}</STYLE>
<SCRIPT><!--
function f(e){
if (e.className=="ci"){if (e.children(0).innerText.indexOf("\n")>0) fix(e,"cb");}
if (e.className=="di"){if (e.children(0).innerText.indexOf("\n")>0) fix(e,"db");}
e.id="";
}
function fix(e,cl){
e.className=cl;
e.style.display="block";
j=e.parentElement.children(0);
j.className="c";
k=j.children(0);
k.style.visibility="visible";
k.href="#";
}
function ch(e){
mark=e.children(0).children(0);
if (mark.innerText=="+"){
mark.innerText="-";
for (var i=1;i<e.children.length;i++)
e.children(i).style.display="block";
}
else if (mark.innerText=="-"){
mark.innerText="+";
for (var i=1;i<e.children.length;i++)
e.children(i).style.display="none";
}}
function ch2(e){
mark=e.children(0).children(0);
contents=e.children(1);
if (mark.innerText=="+"){
mark.innerText="-";
if (contents.className=="db"||contents.className=="cb")
contents.style.display="block";
else contents.style.display="inline";
}
else if (mark.innerText=="-"){
mark.innerText="+";
contents.style.display="none";
}}
function cl(){
e=window.event.srcElement;
if (e.className!="c"){e=e.parentElement;if (e.className!="c"){return;}}
e=e.parentElement;
if (e.className=="e") ch(e);
if (e.className=="k") ch2(e);
}
function ex(){}
function h(){window.status=" ";}
document.onclick=cl;
--></SCRIPT>
</HEAD>
<BODY class="st"><DIV class="e">
<SPAN class="b">&nbsp;</SPAN>
<SPAN class="m">&lt;?</SPAN><SPAN class="pi">xml version="1.0" </SPAN><SPAN class="m">?&gt;</SPAN>
</DIV>
<DIV class="e">
<DIV class="c" STYLE="margin-left:1em;text-indent:-2em"><A href="#" onclick="return false" onfocus="h()" class="b">-</A>
<SPAN class="m">&lt;</SPAN><SPAN class="t">test</SPAN><SPAN class="m">&gt;</SPAN></DIV>
<DIV><DIV class="e"><DIV STYLE="margin-left:1em;text-indent:-2em">
<SPAN class="b">&nbsp;</SPAN>
<SPAN class="m">&lt;</SPAN><SPAN class="t">example</SPAN><SPAN class="m">&gt;</SPAN><SPAN class="tx">Hello</SPAN><SPAN class="m">&lt;/</SPAN><SPAN class="t">example</SPAN><SPAN class="m">&gt;</SPAN>
</DIV></DIV>
<DIV><SPAN class="b">&nbsp;</SPAN>
<SPAN class="m">&lt;/</SPAN><SPAN class="t">test</SPAN><SPAN class="m">&gt;</SPAN></DIV>
</DIV></DIV>
</BODY>
</HTML> 
```

如何从 Web 浏览器控件中获取 XML 本身？我试图解析的 XML 文件显示有关用户的信息，它需要 cookie。用户之前在应用程序尝试获取此信息之前登录，因此在 webBrowser 控件中设置了 cookie。我尝试过使用`Xml.Load()`，但据我所知，这不允许您使用 CookieContainer，我也尝试过将 HttpWebRequest 与 CookieContainer 一起使用，但我无法将 webBrowser 中的 cookie 设置到 CookieContainer 中。

如果有人有办法我可以从 Web 浏览器控件加载 XML 本身，或者在 CookieContainer 中使用 Web 浏览器控件中的 cookie 的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:17:31.107

您可以尝试以下操作，这将为您获取 cookie。

```
webBrowser1.Document.Cookie 
```

并将其添加到 cookie 容器中，如下所示。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(myUri);
request.CookieContainer = new CookieContainer();
request.CookieContainer.SetCookies(myUri, webBrowser1.Document.Cookie); 
```

# facebook - 非对象上的函数 css()

> ID：11817448
> 
> 赞同：0
> 
> 时间：2012-08-05T15:01:44.593
> 
> 标签：facebook, cakephp

我的开发遇到了错误。尝试在 CakePHP 上进行 Facebook 身份验证基础知识并进行调试活动并偶然发现此错误，我现在无法修复。也许有一些解决方案？或者可能是一个尚未解决的问题？

> 错误：在非对象文件上调用成员函数 css()：C:\wamp\www\facebook_example\app\View\Layouts\facebook.ctp 行：3

如果您要查看 Line3：

```
 <?php echo $html->css('cake.generic'); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:15:01.487

如果您尝试对不是对象的变量调用方法，则会发生此错误。在 CakePHP 中，如果您：

*   不要指定在控制器中包含帮助程序，或者
*   不要正确调用助手。

因此，请确保您的助手包含在`$helpers`控制器上的数组中：

```
public MyController extends AppController {
    public $helpers = array(
        'Html',
        'Form',
    );
} 
```

最后，在您的视图中正确调用助手：

```
<?php
$this->Html->css('cake.generic'); 
```

需要注意的是，虽然 CakePHP **1.x**支持以下格式：

```
$html->css() 
```

**CakePHP 2.x**及更高版本不再支持此功能。新格式是：

```
$this->Html->css() 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T15:04:31.220

尝试这个 ：

```
<?php echo $this->Html->css('cake.generic'); ?> 
```

# android - 如何在android中添加动画属性？

> ID：11817451
> 
> 赞同：-1
> 
> 时间：2012-08-05T15:01:56.433
> 
> 标签：android, android-layout, animation

例如，我有 xml 文件：

```
<set
android:fromDegrees="0"
android:toDegrees="360"
android:pivotX="100%"
android:pivotY="100%"

android:duration="1500"
android:startOffset="1500" />

<translate
android:fromXDelta="-50%p"
android:toXDelta="100%"
android:duration="2000"
 /> 
```

... .

那么，如何使用我的类 .java 进行动态处理？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:43:36.337

我从[这个博客](http://chandan-tech.blogspot.com/2011/01/world-of-animations-in-android.html)得到了答案。只需将“my_xml_file”更改为您的动画名称。

```
Animation animation = AnimationUtils.loadAnimation(this,R.anim.my_xml_file);
myLayout.startAnimation(animation); 
```

# serialization - 在反序列化期间将项目添加到现有列表

> ID：11817455
> 
> 赞同：0
> 
> 时间：2012-08-05T15:03:27.647
> 
> 标签：serialization, json.net

我有一个问题一直困扰着我 - 我在我的类中定义了自定义子集合，当对象被实例化时会被实例化。在反序列化期间是否可以告诉 json.net 不要实例化新集合，而只是将反序列化的集合项添加到现有集合中？我正在谈论的代码类似于下面，您可以看到我将一个函数传递给它用于构建和编译表达式的集合的构造函数，我真的不想弄清楚如何获得该创建序列化程序中发生的逻辑。谢谢！

```
public class ClassWithChildCollection
{
    private CustomCollection<TestClass1> _childCollection;

    public CustomCollection<TestClass1> ChildCollection
    {
      get
      {
         return _childCollection;
      }
    }

    public ClassWithChildCollection()
   {
      _childCollection= new CustomCollection<TestClass1>(this, x => x.TestClass1Property);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:43:01.323

好吧，我现在问这个有点傻，因为事实证明这是一个简单的修复 - 只需将序列化程序上的 ObjectCreationHandling 设置为重用。啊！！谢谢。

# jquery - 淡入淡出多个元素

> ID：11817456
> 
> 赞同：1
> 
> 时间：2012-08-05T15:03:45.790
> 
> 标签：jquery

当一个人悬停在 div 上时，我想淡入和淡出多个元素。有一个标题和信息，当一个人将鼠标悬停在该特定标题上时，我希望标题淡出并且信息属于该标题以淡入。

这是代码：

```
$(document).ready(function(e) {
    if($(".info").is(":visible")) {
        $(".info").hide();
    }

    $(".title").mouseenter( function() {
        $(this).fadeOut(100);
        $(this).$(".info").fadeIn(100);
    })
    $(".info").mouseleave( function() {
        $(this).fadeOut(100);
        $(this).$(".title").fadeIn(100);
    })

}); 
```

我的问题是：如何使属于该标题的信息而不是所有其他信息淡入。

这是它有一点 php 的 HTML

```
<div class="holder">

            <div class="title">
                <img alt="random" src="pictures/<?php echo $company['picture']; ?>" height="100" width="100">
                <p><a href="profile.php?company=<?php echo $company['id']; ?>"><?php echo $company['title']; ?></a></p>
            </div>

            <div class="info">
                <p><a href="profile.php?company=<?php echo $company['id']; ?>"><?php echo $company['message']; ?></a></p>
            </div>

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:11:24.517

尝试这个

```
$(document).ready(function(e) {
  if($(".info").is(":visible")) {
    $(".info").hide();
  }

  $(".title").mouseenter( function() {
     $(this).fadeOut(100);
     $(this).next(".info").fadeIn(100);
   });

   $(".info").mouseleave( function() {
     $(this).fadeOut(100);
     $(this).prev(".title").fadeIn(100);
   });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:35:07.757

你可以用更少的代码来做到这一点，比如这种不同的方法：

**[这是 jsFiddle 玩。](http://jsfiddle.net/rSaJr/16/)**

html:

```
<div class="title">
          <img src="http://www.hurriyet.com.tr/_np/2769/17512769.jpg" height="100" width="100">
          <p><a href="profile.php?company=<?php echo $company['id']; ?>"><?php echo $company['title']; ?></a></p>

          <div class="info">
                <p>here is some info.here is some info.here is some info.</p>
          </div>
 </div> 
```

## ------------------

jQuery：

```
$(document).ready(function() {

    $('.title').bind({
        mouseenter: function() {
            $(this).children(".info").stop(false,true).fadeIn(100);
        }, mouseleave: function() {
            $(this).children(".info").stop(false,true).fadeOut(100);
            $(this).fadeIn(100);
        }
    });

});​ 
```

## ------------------

CSS：

```
.info { display:none; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:05:45.150

最好的办法是只给`.holder`元素样式和大小，并以`.holder`元素为目标，因为这样可以很容易地淡入和淡出它的子元素，而不会改变大小和消失的元素弄乱事件处理程序，并且您可以将子元素作为目标每个`.holder`功能的合一功能，而无需在 DOM 树上上下遍历太多：

CSS：

```
.holder {position: relative; 
         height: 140px; 
         width: 100px;
        }​ 
```

js：

```
$(function() {
    $(".info").hide(); //no need to check if the class is visible

    $(".holder").on('mouseenter mouseleave', function() {
        $('.info, .title', this).fadeToggle(100);
    })
});​ 
```

[**小提琴**](http://jsfiddle.net/JzAk7/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T15:11:43.563

您要做的是专门针对元素，如果它们始终按此顺序排列，则可以使用：

```
$(this).next().fadeIn(100); 
```

然后回到标题，你可以使用

```
$(this).prev(); 
```

从信息

# php - 如何在不编辑核心 WP 文件的情况下删除 wp.login.php 中的 Powered by Wordpress 链接？

> ID：11817464
> 
> 赞同：-4
> 
> 时间：2012-08-05T15:05:05.287
> 
> 标签：php, wordpress

我想删除附加到 wo-login.php 中徽标的 Powered by Wordpress (wordpress.org) 链接，或者在无需编辑核心文件的情况下对其进行更新。是否有可能做到这一点？

凯尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-03T17:35:30.937

@Chaser324 几乎是正确的，而不是回显结果需要返回结果，即

```
// changing the logo link from wordpress.org to your site 
function my_login_url() { return bloginfo('url'); }

// changing the alt text on the logo to show your site name 
function my_login_title() { return get_option('blogname'); }

// calling it only on the login page
add_filter('login_headerurl', 'my_login_url');
add_filter('login_headertitle', 'my_login_title'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T21:54:15.600

在您的主题`functions.php`文件中，添加以下内容：

```
function my_login_css() {
    echo '<link rel="stylesheet" href="' . get_stylesheet_directory_uri() .'/path_to_dir_in_your_theme/login.css">';
}

add_action('login_head', 'my_login_css'); 
```

然后只需创建自定义`login.css`文件，即可进行任何您想要的更改。

要将登录徽标上的链接和替代文本从 Wordpress.org 更改为您网站的标题/网址，请在您的`functions.php`文件中使用这些过滤器：

```
// changing the logo link from wordpress.org to your site 
function my_login_url() { echo bloginfo('url'); }

// changing the alt text on the logo to show your site name 
function my_login_title() { echo get_option('blogname'); }

// calling it only on the login page
add_filter('login_headerurl', 'my_login_url');
add_filter('login_headertitle', 'my_login_title'); 
```

# asp.net-mvc-3 - 在 Mvc3 中使用 Ajax 显示图像

> ID：11817465
> 
> 赞同：0
> 
> 时间：2012-08-05T15:05:07.633
> 
> 标签：asp.net-mvc-3

我正在尝试在脚本中显示图像。我从动作控制器获取数据并尝试在 img src= 中添加我的数据名称？那么如何用我的数据显示图像呢？

这是我的脚本：

> $(function () { $.ajax({ type: "get", url: "Home/Oku", data: {}, dataType: "json", success: function (data) {
> 
> img src="" + data[0] "width="150px" height="150px"/> ????? 怎么显示
> 
> ```
>  }
>     }); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:15:28.410

你应该这样做：

```
<img id="myimage" alt="Im being loaded with ajax"/>

$(function () { 
$.ajax({ 
    type: "get", 
    url: "Home/Oku", 
    data: {}, 
    dataType: "json",
    success: function (data) {
        //sets the 'src' attribute for the image tag with id 'myimage'.
        $("img#myimage").attr("src", data);
        }
 }); 
```

}

# c - c中的二进制搜索-必须找出键的所有数组位置

> ID：11817467
> 
> 赞同：-1
> 
> 时间：2012-08-05T15:05:12.843
> 
> 标签：c, search, binary

```
#include<stdio.h>
#include<stdlib.h>
int input(int *a)
{
    int n,i;
    printf("enter the no of elements:");
    scanf("%d",&n);
    for(i=0;i<n;i++)
    {
        printf("enter the element:");
        scanf("%d",a++);
    }
    return n;
}
int key_input(int *a,int key)
{
    int k;
    printf("enter the key value which have to be searched in the array of no's provided:");
    scanf("%d",&k);
    return k;
}
void binary_search(int *a,int n,int key)
{
    int low=0;
    int high=n-1;
    int mid;
    while(low<=high)
    {
        mid=(high+low)/2;
        if(key == a[mid])
        {
            printf("the key:%d is found at location:%d in the array",key,mid);
            if(key==a[mid+1])
            {
                binary_search(a+mid+1,n-mid-1,key);
            }
            if(key==a[mid-1])
            {
                binary_search(a,n-mid-1,key);
            }
            if(key != a[mid-1] || key != a[mid+1])
                break;
        }
        else if(key < a[mid])
            high=mid-1;
        else if(key>a[mid])
            low=mid+1;
    }
}
int main()
{
    int arr[100];
    int n=input(arr);
    int key=key_input(arr,n);
    binary_search(arr,n,key);
    return 0;
} 
```

这是我为二进制搜索编写的代码。我想找出密钥所在的所有数组位置。例如，如果我将输入 4、4、4、4 的键设为 4。输出应该包含数组（0-3）的所有位置，但我不知道代码有什么问题，它正在无限运行。有人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:15:27.393

很可能发生的情况是，您用于移动高点和低点的代码达到了中间值始终相同的点，这会导致无限循环。这将取决于数组列表中的项目数以及项目数是否能被 2 整除。

对于二分搜索，我通常会做的是，当范围足够小时，我将只对范围中的最后几个项目进行顺序搜索。

听起来您想要做的是搜索一个整数数组，该数组按升序排序并且其中可能包含重复项，并找到与您正在搜索的整数匹配的第一个数组元素。

一个问题是您是否希望这个正在搜索的函数提供匹配项的计数，或者只返回第一个并让函数的调用者检查任何其他项。

这是一个函数原型，供您考虑执行此操作的函数的接口。

```
// search the integer array iValueArray which is a sorted list of integers
// and return the index 0 to iNoArrayElements - 1 of the first integer matching
// the value specified in iSearchValue.  if a match is not found then return -1
int FindFirstMatch (int iSearchValue, int *iValueArray, int iNoArrayElements); 
```

该函数如下所示。

```
int FindFirstMatch (int iSearchValue, int *iValueArray, int iNoArrayElements) {
int iRetIndex = -1;

if (iNoArrayElements > 0) {
    int iLowIndex = 0;
    int iHighIndex = iNoArrayElements - 1;
    int iMidIndex = (iHighIndex - iLowIndex) / 2 + iLowIndex;

    while (iLowIndex <= iHighIndex) {
        int iCompare = (iSearchValue - iValueArray[iMidIndex]);

        if (iHighIndex - iLowIndex < 5) {
            // range is small so just do a straight sequential search
            for (iMidIndex = iLowIndex; iMidIndex <= iHighIndex; iMidIndex++) {
                int iCompare = (iSearchValue - iValueArray[iMidIndex]);
                if (iCompare == 0) {
                    // search value equals the mid so we have found a match
                    // now we need to move lower until we find the first of
                    // the series of matching items.
                    iRetIndex = iMidIndex;
                    break;
                }
            }
            break;
        }
        if (iCompare < 0) {
            // search value is lower than mid so move to range below mid
            iHighIndex = iMidIndex;
        } else if (iCompare > 0) {
            // search value is higher than mid so move to range above mid
            iLowIndex = iMidIndex;
        } else {
            // search value equals the mid so we have found a match
            // now we need to move lower until we find the first of
            // the series of matching items.
            iRetIndex = iMidIndex;
            break;
        }
        iMidIndex = (iHighIndex - iLowIndex) / 2 + iLowIndex;
    }
}

if (iRetIndex > 0) {
    while (iRetIndex > 0 && iValueArray[iRetIndex - 1] == iSearchValue) {
        iRetIndex--;
    }
}
return iRetIndex; 
```

}

# html - Jade 不呈现复选框文本？

> ID：11817469
> 
> 赞同：9
> 
> 时间：2012-08-05T15:05:35.670
> 
> 标签：html, checkbox, pug

我试图使用编译的玉将 chekcboxes 输入放在我的 html 文件中，它呈现实际的复选框而不是文本，即

```
 p.confirm
            input(type="checkbox", name="agree") 
              | I agree to the Terms & Conditions of this Company <br />
            input(type="checkbox", name="subscribe") 
              | Tick to recieve future communication from Company 
```

我尝试了玉文档，但没有任何反应，谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-12-12T13:38:18.640

我不确定接受的答案如何工作，因为如果没有转义，Jade 会将文本解释为标签。

这两种方法都可以代替：

```
p.confirm
  label
    input(type="checkbox", name="agree")
    | I agree to the Terms & Conditions of this Company
  br
  label
    input(type="checkbox", name="subscribe")
    = " Tick to recieve future communication from Company" 
```

需要标签才能使文本可点击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T15:27:15.870

输入标签没有子标签。

```
p.confirm
    input(type="checkbox", name="agree")
    I agree to the Terms & Conditions of this Company
    br
    input(type="checkbox", name="subscribe")
    Tick to recieve future communication from Company 
```

# pointers - 索引方案与 CUDA 中的指针数组

> ID：11817471
> 
> 赞同：0
> 
> 时间：2012-08-05T15:05:46.230
> 
> 标签：pointers, matrix, cuda

我想在 CUDA 中添加两个二维数组。

当我使用索引方案时，程序运行良好：

```
#define COLUMNS 3
#define ROWS 2    
__global__ void add(int *a, int *b, int *c)
{
    int x = blockIdx.x;
    int y = blockIdx.y;
    int i = (COLUMNS*y) + x;
    c[i] = a[i] + b[i];
}    

int main()
{
    int a[ROWS][COLUMNS], b[ROWS][COLUMNS], c[ROWS][COLUMNS];
    int *dev_a, *dev_b, *dev_c;
    cudaMalloc((void **) &dev_a, ROWS*COLUMNS*sizeof(int));
    cudaMalloc((void **) &dev_b, ROWS*COLUMNS*sizeof(int));
    cudaMalloc((void **) &dev_c, ROWS*COLUMNS*sizeof(int));
    for (int y = 0; y < ROWS; y++) // Fill Arrays
        for (int x = 0; x < COLUMNS; x++)
        {
            a[y][x] = x;
            b[y][x] = y;
        }
    cudaMemcpy(dev_a, a, ROWS*COLUMNS*sizeof(int), cudaMemcpyHostToDevice);
    cudaMemcpy(dev_b, b, ROWS*COLUMNS*sizeof(int), cudaMemcpyHostToDevice);
    dim3 grid(COLUMNS,ROWS);
    add<<<grid,1>>>(dev_a, dev_b, dev_c);
    cudaMemcpy(c, dev_c, ROWS*COLUMNS*sizeof(int), cudaMemcpyDeviceToHost);
    return 0;
} 
```

但是，当矩阵 b 表示为指针数组而不是通过上面的索引方案表示时，它不起作用：

```
int a[ROWS][COLUMNS], **b, c[ROWS][COLUMNS];
int *dev_a, *dev_b, *dev_c;
b = (int**)malloc(ROWS*sizeof(int*));
for (int i = 0; i < ROWS; i++)
b[i] = (int*) malloc(COLUMNS*sizeof(int)); 
```

为什么？

我在这里使用了示例：http: [//www.math.uaa.alaska.edu/~afkjm/cs448/handouts/cuda-firstprograms.pdf](http://www.math.uaa.alaska.edu/~afkjm/cs448/handouts/cuda-firstprograms.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:13:03.863

尽管问题很老，但我会尝试向遇到相关问题的每个人提供提示。

我同意leftaroundabout。没有 malloc 的编译时常量分配

```
int a[ROWS][COLUMNS], b[ROWS][COLUMNS], c[ROWS][COLUMNS]; 
```

很可能为每个大小为 ROWS*COLUMNS 的变量（a、b、c）分配一个内存块。可以在一次 memcpy 操作中将该块复制到设备。

在指针指向的情况下，每一列都是单独分配的，因此我们不能保证拥有一个可以使用单个 memcpy 复制到设备的连续内存块。

在给定的`**b`情况下，必须单独复制每个 Column 的数据，以实现类似的行为。

```
for (int o=0; o<ROWS; ++o)
{
  cudaMemcpy((dev_b+o*COLUMNS), b[o], COLUMNS*sizeof(int), cudaMemcpyHostToDevice);
} 
```

尽管如此，我认为应该使用相同的方案处理 a 和 b 以避免在元素排序不同的情况下出现索引混淆。（尽管我声称`a[ROWS][COLUMNS]`将使用行优先顺序存储变量。）

# c# - 如何使用 C# 查找类或方法的用法？

> ID：11817473
> 
> 赞同：11
> 
> 时间：2012-08-05T15:06:09.103
> 
> 标签：c#, visual-studio

在 Visual Studio 中，我可以右键单击一个类或方法并选择“查找用法”。这为我提供了解决方案中使用该代码的位置的列表。我怎样才能从我的代码中做同样的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-05T15:09:46.563

您需要解析您的代码才能执行此操作。我不认为你可以通过反思来做到这一点。MS 一直致力于一个名为 Roslyn 的项目。这是一种用于 .NET 编译器的 API。它应该为您提供所需的东西。查看[这篇](http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)文章了解 Roslyn 项目的详细信息。

引用帖子：

> 这为 VS 扩展程序提供了编写强大重构和语言分析工具的新机会，并允许任何人将我们的解析器、语义引擎、代码生成器和脚本合并到他们自己的应用程序中。

[这篇文章](http://blogs.msdn.com/b/csharpfaq/archive/2011/11/23/using-the-roslyn-symbol-api.aspx)演示了如何使用符号。
[这篇文章](http://social.msdn.microsoft.com/Forums/da-DK/roslyn/thread/0786b006-5a82-4d5e-9d6a-38d73b8ac2be)回答了获取所有参考的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T15:10:16.170

老实说，我以前从来没有这样做过，因为我从来不需要那种东西。

要访问您需要访问`Token Tree`的编译器类型的信息，为`semantic analysis`.

此类信息，*您肯定*可以从[Roslyn](http://msdn.microsoft.com/en-us/roslyn)（C# 编译器的 API）访问。您可以在其中将文本推送到 API 函数`C#`中，在其上运行编译器并恢复`Tokens tree`.

[罗斯林项目概述](http://msdn.microsoft.com/en-us/vstudio/hh500769.aspx)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:18:55.373

据我所知，没有办法找到解决方案中所有项目的所有用法。如果你的类有一个唯一的名称，Visual Studio 的搜索功能有一个“整个解决方案”搜索范围，它在你的解决方案的每个文件中查找确切的搜索文本。

这不会在每次使用您的方法时特别找到，因为它还匹配注释、类似命名的字段、具有相同字符串的任何内容，但这是一个好的开始。

# javascript - 试图让 Jquery 在 Rails 和 Active Admin 中使用动态选择表单

> ID：11817474
> 
> 赞同：0
> 
> 时间：2012-08-05T15:06:09.940
> 
> 标签：javascript, jquery, ruby-on-rails, activeadmin

我正在尝试根据另一个更新选择框..

在我的活动管理资源中，我仅针对一些测试数据执行了以下操作：

```
controller do

  def getcols
    list = new Hash
    list = {"OPTION1" => "OPTION1", "OPTION2" => "OPTION2"}
    list.to_json
  end
end 
```

在 active_admin.js 我有以下

```
$('#worksheet_type').change(function() {

  $.post("/admin/getmanifestcols/", { ws_type: $(this).val() }, function(data) {
            populateDropdown($("#column_0"), data);
        });
});

function populateDropdown(select, data) {
 select.html('');
    alert('hi');
    $.each(data, function(id, option) {
       select.append($('<option></option>').val(option.value).html(option.name));
    });       
 } 
```

从某种意义上说，当我的主选择框被更改时，上面的工作会调用 jquery，我什至会调用“hi”的警报框。但是，它不会用我的测试 OPTION1 和 OPTION2 数据替换选择框的内容。

我想我传递了错误的 JSON 或其他东西，或者它没有被读取。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:20:34.333

在我看来，好像您没有正确地遍历地图。

关于什么：

```
$.each(data, function(value, name) {
   select.append($('<option></option>').val(value).html(name));
}); 
```

?

# list - 使用 JSF 2、PrimeFaces 和 JSTL 嵌入另一个列表中的列表

> ID：11817477
> 
> 赞同：1
> 
> 时间：2012-08-05T15:06:37.120
> 
> 标签：list, jakarta-ee, jsf-2, jstl

在 Facelets 页面上，我遍历列表以在`p:dataTable`（PrimeFaces 组件）中显示数据。该列表本身包含我使用`c:forEach`(JSTL) 进行旅行的另一个列表。

问题是`c:forEach`应该处理的列表的数据没有出现。当我访问特定元素时，它运行良好，但在`c:forEach`.

不能使用嵌入在另一个循环中的内部循环变量吗？

这是页面的代码：

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <body>

        <ui:composition template="./template_utilisateur.xhtml">

            <ui:define name="content">

                <h:form prependId="false" id="form">

                    <p:growl id="growl" showDetail="true"/>

                    <p:dataTable id="carsTable" var="car" value="#{histCommController.lc}" rowKey="#{car.id}"  
                                  selectionMode="single" >

                        <f:facet name="header">
                            Expand rows to see detailed information
                        </f:facet>

                        <p:column style="width:4%">
                            <p:rowToggler/>
                        </p:column>

                        <p:column style="width:48%">
                            <f:facet name="header">
                                id
                            </f:facet>
                            <h:outputText value="#{car.id}" />
                        </p:column>

                        <p:column style="width:48%">
                            <f:facet name="header">
                                date envoi
                            </f:facet>
                            <h:outputText value="#{car.dateEnvoi}" />
                        </p:column>

                        <p:rowExpansion id="expanssion">
                            <h:panelGrid id="display" columns="2" cellpadding="4" style="width:300px;"
                                         styleClass=" ui-widget-content grid">

                                <h:outputText value="Model:" />
                            <h:outputText value="#{car.id}" />

                            <h:outputText value="Year:" />
                            <h:outputText value="#{car.etat}" />

                            <h:outputText value="Manufacturer:" />
                            <h:outputText value="#{car.dateEnvoi}" />

                            <h:outputText value="Color:" />
                            <h:outputText value="#{car.dateLivraisonRecommande}" />

                            <h:outputText value="Fichiers : " />
                            <h:outputText value="::::::::::::" />

                            <h:outputText value="Fichiers 1 : " />
                            <h:outputText value="#{car.listFichiers.get(0).nom}" />

                            <c:forEach var="jjjjj" items="#{car.listFichiers}">
                                <h:outputText value="nom fichier 1 : " />
                            <h:outputText value="#{jjjjj.nom}" />
                            </c:forEach>
                            </h:panelGrid>

                        </p:rowExpansion>
                    </p:dataTable>
                </h:form>

            </ui:define>

        </ui:composition>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:15:32.050

出现问题是因为您正在混合所谓的`build-time`和`render-time` 构造。

`build-time`首先发生，并且在那里发生的一切都不能利用在 之前不存在的东西`render-time`，这在之后发生。

在您的情况下，JSTL`forEach`是构建时，而`car`var 由 render-time 提供`dataTable`。解决方案是为内部循环使用渲染时构造。最好的候选人是`ui:repeat`.

也可以看看

*   [注意 Facelets 中构建时标签和渲染时标签之间的区别](http://java.dzone.com/articles/jsf-beware-difference-between)

# eclipse - 当 GlassFish 的管理控制台选项卡关闭时，Bug Eclipse IDE 被关闭

> ID：11817481
> 
> 赞同：0
> 
> 时间：2012-08-05T15:06:50.880
> 
> 标签：eclipse, glassfish, glassfish-3

我最近注意到我在 Eclipse Java EE (Juno) 上的 GlassFish (v3.1.2) 有一个非常奇怪的行为。每当我在 Eclipse 中打开 GlassFish 实例的管理控制台然后关闭其选项卡时，Eclipse 也会无缘无故地关闭。

我花了很多时间来寻找解决这个问题的方法，但找不到。

编辑：我有 jdk6 和 jdk7（都是 32 个版本）并运行 win 7 x64 操作系统。我还发现了一个与此错误相关的日志文件（每次 eclipse 由于此错误而关闭时都会创建该文件）我已上传到此处：

[日志文件链接](http://www.4shared.com/file/bXy9CJCE/hs_err_pid1436.html?refurl=d1url)

# python - 获取ValueError：int（）的无效文字，基数为10：''在字符串转换期间

> ID：11817482
> 
> 赞同：2
> 
> 时间：2012-08-05T15:07:24.077
> 
> 标签：python

我有这个 TCP 服务器，我希望能够接收数字（整数），但我在解决程序的一些输出时遇到了一些困难。它输出它应该输出的内容，但此外它还输出一些带有 ValueError 的回溯。我该如何解决？

```
Traceback (most recent call last):   File "server.py", line 18, in
<module>
    data = int(conn.recv(BUFFER_SIZE).strip()); ValueError: invalid literal for int() with base 10: '' 
```

我在这里做的是向服务器发送整数：

```
 data = int(conn.recv(BUFFER_SIZE).strip());

    foo = data + 1;

    if not data: break

    print "received data:", data
    print "\n foo:", foo 
```

这似乎很好用，但除了这两个打印件之外，我还得到了前面提到的回溯：-/

**编辑：**

感谢您指出这一点。由于数据（或recv）可能为空，我只是将逻辑移到if测试下，瞧……：D

```
 data = conn.recv(BUFFER_SIZE).strip();

        if not data: break

        command = int(data);
        foo = command + 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T15:10:42.203

正如错误消息所说，`int()`正在吐一个空字符串。所以检查这一点并避免调用`int()`，否则捕获并忽略`ValueError`.

策略一：

```
data = conn.recv(BUFFER_SIZE).strip()
if data:
    data = int(data)
    foo = data + 1
    if not data: break 
```

策略二：

```
try:
    data = int(conn.recv(BUFFER_SIZE).strip());
except ValueError:
    continue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T15:10:10.970

你的问题是你试图调用`int()`一个空字符串。换句话说，表达式`conn.recv(BUFFER_SIZE).strip()`的计算结果为`''`。（希望堆栈跟踪现在更有意义。）

`int()`您需要在调用（或将其放入块中）之前检查您是否有有效数据`try/except ValueError`，或者可能通过连续读取来构建字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:14:50.763

代替

```
data = int(conn.recv(BUFFER_SIZE).strip()) 
```

做

```
data = int(conn.recv(BUFFER_SIZE).strip() or 0) 
```

以避免出现空字符串的问题。

# html - 意外的填充 html 文档，来自 chrome 中的窗口顶部边框

> ID：11817484
> 
> 赞同：1
> 
> 时间：2012-08-05T15:07:43.380
> 
> 标签：html, css, google-chrome

这是我的整个 html 文档

```
<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin-left: 0px;
            margin-top: 0px;
            background-color: #0ff;
        }
    </style>
</head>
<body>
<div style="background-color: #090">some text</div>
</body>
</html> 
```

在谷歌浏览器中，div 标签是窗口顶部边框的填充，20-25px，在其他浏览器中，一切都很好，div 标签没有顶部填充。有人知道为什么chrome会出现这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:17:45.427

在跨浏览器制作应用程序时始终使用重置样式，这样您可以轻松解决所有不一致问题，您可以尝试以下基本操作：

```
* {
    margin: 0;
    padding: 0;
} 
```

或者使用其他一些“更完整”的解决方案，比如这里的解决方案：

*   [Eric Meyer 的重置样式](http://meyerweb.com/eric/tools/css/reset/index.html)
*   [YUI 重置样式](http://yuilibrary.com/yui/docs/cssreset/)

例如`Eric Meyer’s Reset Styles`告诉我们使用：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

希望能帮助到你！

# javascript - 使用 D3 进行回调

> ID：11817489
> 
> 赞同：3
> 
> 时间：2012-08-05T15:08:30.117
> 
> 标签：javascript, callback, d3.js

我正在使用[D3](http://d3js.org/) javascript 库来动态更改线条粗细。我想要实现的是一条粗细不断增加和粗细减小的线条。为了画一条线，我使用了以下代码：

```
<!DOCTYPE html>
<html>
<head>  
      <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
</head>
<body>  
    <div id="D3line"></div>
            <script type="text/javascript">

            var lineSVG = d3.select("#D3line")  
                .append("svg:svg")
                .attr("width", 500)  
                .attr("height", 200);               

            var myLine = lineSVG.append("svg:line")
                .attr("x1", 60)
                .attr("y1", 60)
                .attr("x2", 450)
                .attr("y2", 150)
                .style("stroke", "rgb(6,120,155)")
                .style("stroke-opacity", 2);                

            </script>
</body>
</html> 
```

然后，为了改变线条的粗细，我使用了下面的代码：

```
var lines = lineSVG.selectAll("line")   // select all lines 

function makeLinesThick()
{
    lines.transition().duration(500)
    .style("stroke-width", "5")
    .each("end", makeLinesThin);
}

function makeLinesThin(){
    lines.transition().duration(500)
    .style("stroke-width", "2")
    .each("end", makeLinesThick);
}

// call function to change lines
makeLinesThick() 
```

但是，我最终无法正常运行并在我的浏览器中收到“无响应脚本”消息。我不确定在这种情况下我是否正确地构建了回调。

`()`编辑：我通过删除行中的更改了我不正确的回调处理`.each()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T15:36:28.000

问题是您选择的*每个*`.each("end", ...)`元素都会调用它。也就是说，对 中的每一行调用一次。这就是导致您的浏览器挂起的原因。*`makeLinesThin``makeLinesThick`*

 *有几种方法可以让它发挥作用。您可以更改代码以单独为每一行执行转换（请参阅文档[`transition.each()`](https://github.com/mbostock/d3/wiki/Transitions#wiki-each)），或者您可以使用`settimeout()`. 请特别注意文档[`transition.transition()`](https://github.com/mbostock/d3/wiki/Transitions#wiki-transition)——您可以在当前转换完成之前安排另一个转换。

您可能还想看看[这里](http://www.jasondavies.com/animated-bezier/)[`d3.timer()`](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_timer)的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T21:01:32.807

使用 .each("start") 和 .each("end") 设置你的过渡

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T21:02:42.797

```
var mutateLine =
    function(line, t, width, altWidth) {
        d3.select(line).transition().duration(t).style("stroke-width", width)
        .each("end", function() {
            if ( mutateLine ) mutateLine(line, t, altWidth, width);
        });
    }

// assumes lines is obtained from d3.selectAll()
var mutateLines =
    function(lines, t, width, altWidth) {
        if ( !mutateLine)
            return;
        lines[0].forEach(function(line) {
            mutateLine(line, t, width, altWidth);
        }
    };

// start mutating
mutateLines(lines, 500, 5, 2);

// stop mutating
mutateLine = null; 
```*

# cocoa - 绑定到 NSTextField 有效；绑定到 NSTextView 没有？

> ID：11817492
> 
> 赞同：2
> 
> 时间：2012-08-05T15:08:45.917
> 
> 标签：cocoa, cocoa-bindings, nstextview

我有一个简单的主从项目，其中包含一个类实例数组、一个提供特定类实例选择的数组控制器以及一个呈现数组和选择的 NSTableView。我的类有一个 NSString 属性，当我将它绑定到一个 NSTextField 时，一切正常。

但是，当我将相同的属性绑定到 NSTextView 的 Value Path 字段时，它的行为非常不稳定：

*   在 NSTableView 中的条目中进行选择不会导致 NSTextView 发生变化，即使所选对象具有不同的绑定属性值。

*   输入到 NSTextView 中的任何内容都不会复制到选择的属性中。

*   绑定的唯一明显效果是清除 NSTableView 中的选择（例如，单击所有条目下方）会导致 NSTextView 的内容消失。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:37:54.147

valuePath 绑定用于*文件路径*。值绑定用于字符串；还有数据（RTF/RTFD）和属性字符串绑定。

# c++ - 我应该使用从 std::random_device 播种的随机引擎还是每次都使用 std::random_device

> ID：11817493
> 
> 赞同：23
> 
> 时间：2012-08-05T15:08:47.197
> 
> 标签：c++, random, c++11

我有一个包含两个随机源的类。

```
std::random_device rd;
std::mt19937 random_engine; 
```

我`std::mt19937`打电话给`std::random_device`. 如果我想生成一个数字并且我不关心可重复性，我应该打电话`rd()`还是`random_engine()`？

在我的特殊情况下，我确信两者都可以正常工作，因为这将在某些网络代码中调用，其中性能不是很重要，结果也不是特别敏感。但是，我对何时使用硬件熵和何时使用伪随机数的一些“经验法则”感兴趣。

目前，我只`std::random_device`用来播种我的`std::mt19937`引擎，而我的程序需要的任何随机数生成，我都使用`std::mt19937`引擎。

编辑：这是我使用这个特定示例的确切含义的解释：

这是一个游戏程序。这个特定的游戏允许用户在与对手开始一轮之前自定义他们的“团队”。设置战斗的一部分涉及将团队发送到服务器。我的程序有几个团队，并使用随机数来确定要加载哪个团队。每场新的战斗都会调用`std::random_device`播种伪随机数生成器。我记录了战斗的初始状态，其中包括我随机选择的这个团队和初始种子。

我在这个问题中询问的特定随机数是用于随机团队选择（不让对手提前知道我正在使用的团队是有益的，但不是关键任务），但我的我真正寻找的是经验法则。`std::random_device`如果我不需要我的数字的可重复性，总是使用它是否可以，或者是否存在真正的风险，即用完熵的速度比收集它的速度快？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T03:00:05.083

据我所知，标准做法是用计算机计算的数字（但来自一些外部的、不可预测的来源）为随机数生成器播种。您的 rd() 函数应该是这种情况。从那时起，您为所需的每个伪随机数调用伪随机数生成器 (PRNG)。

如果您担心数字不够随机，那么您应该选择不同的 PRNG。熵是一种稀缺而珍贵的资源，应该这样对待。虽然，您现在可能不需要那么多随机数，但将来可能需要；或其他应用程序可能需要它们。您希望该熵在应用程序要求时可用。

听起来，对于您的应用，mersenne twister 可以很好地满足您的需求。玩你的游戏的人不会觉得加载的团队不是随机的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T15:15:20.037

如果您不使用它进行加密，那么重复使用由`random_engine`.

对于这个答案的其余部分，我假设您在网络代码中使用随机数进行加密。**总之，mt19937不适合那个用途。**

[http://en.wikipedia.org/wiki/Mersenne_twister#Disadvantages](http://en.wikipedia.org/wiki/Mersenne_twister#Disadvantages)

随着时间的推移，您可能会泄露信息（可能是间接泄露），这样攻击者就可以开始预测随机数。至少在理论上，但这就是它的意义所在。来自维基百科

> ...因为这个数字是
> 产生未来迭代的状态向量的大小）允许人们预测所有未来的迭代。

防止随机数生成信息泄露给用户的一种简单方法是使用单向散列函数，但还有更多。您应该使用为此目的设计的随机数生成器：

[http://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator](http://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator)

各种示例（带代码）可在此处找到[http://xlinux.nist.gov/dads/HTML/pseudorandomNumberGen.html](http://xlinux.nist.gov/dads/HTML/pseudorandomNumberGen.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-05T15:18:50.433

如果您需要模拟或游戏的随机性，那么您正在做的很好。只调用一次随机设备，然后使用随机播种的伪 RNG 执行其他所有操作。作为奖励，您应该将种子值存储在日志文件中，以便稍后重播伪随机序列：

```
auto const seed = std::random_device()();
// save "seed" to log file
std::mt19937 random_engine(seed); 
```

（对于多线程，在主线程中使用 PRNG 为衍生线程中的进一步 PRNG 生成种子。）

如果出于加密目的需要大量真正的随机性，那么 PRNG 绝不是一个好主意，因为一长串输出包含的随机性比真正的随机性要少得多，也就是说，您可以从一个小的子集中预测所有这些。如果您需要真正的随机性，您应该从一些不可预测的来源（例如热传感器、用户键盘/鼠标活动等）收集它。Unix`/dev/random`可能是这样一个“真正的随机性”来源，但它可能不会很快填满。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-11T22:25:57.457

您可能想看看[http://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful](http://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful)，它解释了为什么应该使用 uniform_int_distribution，以及 random_device / mt19937 的相对优势。

在此视频中，Stephan T. Lavavej 特别指出，在 Visual C++ 上，random_device 可用于加密目的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-05T19:09:50.123

答案取决于平台。我似乎记得在 Visual C++ 2010 中，std::random_device 只是 mt19937 以某种未记录的方式播种。

当然，您意识到任何基于随机数生成器的临时加密方案都可能非常弱。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-05T15:32:35.170

假设这不是出于加密目的，关于随机数生成，最重要的是要记住您希望随机数的分布方式以及您期望的范围是多少。

通常库中的标准随机数生成器旨在提供均匀分布。所以数字将介于 0 和一些 RAND_MAX 之间（比如在 32 位机器上是 2^31 -1 ）

现在这是使用伪随机数生成器要记住的事情。它们中的大多数旨在生成随机数而不是随机位。差异是微妙的。如果您需要 0 到 8 之间的数字，大多数程序员会说 rand()%8 这很糟糕，因为该算法用于随机化 32 位。但是您只使用了底部的 3 位。不好。这不会给你一个均匀的分布（假设这是你要找的）

您应该使用 8 * (rand() + 1) / (RAND_MAX) 现在会给您一个介于 0 和 8 之间的统一随机数。

现在使用硬件随机数生成器，您可能会产生随机位。如果确实如此，那么您将独立生成每个位。那么它更像是一组相同的独立随机位。这里的建模必须有点不同。请记住这一点，尤其是在模拟中，分布变得很重要。

# php - 使用 preg_match 时忽略空格

> ID：11817494
> 
> 赞同：2
> 
> 时间：2012-08-05T15:09:03.500
> 
> 标签：php

我正在`preg_match`尝试在这个 html 结构中捕获“数据”，但目前它没有返回任何内容，我认为这可能是因为空格？

只是想知道其中有什么问题`preg_match`？

**html**

```
 <td><strong>Title</strong></td>

                    <td>Data</td> 
```

**php**

```
preg_match("~<td><strong>Title</strong></td>

                    <td>([a-zA-Z0-9 -_]+)</td>~", $html, $match); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T15:24:18.520

与其尝试重现空格的确切顺序（由于行结尾，这可能很难甚至不可能），只需使用`\s*`来表示“任意数量（包括零）的空格字符” - 这包括空格、制表符、换行符、回车符...正是您需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:15:14.390

抱歉，之前没有测试过。\s* 为您提供 0 到无限可能的空间，因此这是您的解决方案。

```
preg_match("/<td><strong>Title<\/strong><\/td>\s*<td>([a-zA-Z0-9 -_]+)<\/td>/",
           $html, $match) 
```

测试了它。它现在可以工作了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T19:47:26.427

使用 s 修饰符

阅读有关 modifires 的更多[信息](http://www.tutorialspoint.com/php/php_regular_expression.htm)

```
preg_match_all('/<td><strong>Title<\/strong><\/td>.*<td>(.*)<\/td>/iUs',$cnt,$preg);
print_r($preg); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => <td><strong>Title</strong></td>

                    <td>Data</td>
        )

    [1] => Array
        (
            [0] => Data
        )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T15:15:46.107

如果你想从 html 文件中获取数据，xml 解析器会好很多。

无论如何，除非您指定修饰符 m （您也可以为点 (.) 指定修饰符 s 以匹配新行），否则您的正则表达式不会匹配多于一行的任何内容。

见[http://php.net/manual/en/reference.pcre.pattern.modifiers.php](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

# python - 使用“Biopython”——如何改进我的代码

> ID：11817495
> 
> 赞同：2
> 
> 时间：2012-08-05T15:09:03.840
> 
> 标签：python, bioinformatics, biopython

我有以下代码：

```
from Bio import AlignIO
import itertools

out=open("test.csv","a")
align = AlignIO.read("HPV16_CG.aln.fas", "fasta")
n=0
def SNP(line):  
    result=[]
    result.append(str(n+1))
    result.append(line[0])
    result.append(align[y].id.rsplit("|")[3])
    result.append(x)
    return result

while n<len(align[0]):
  line = align[:,n]
  y=0
  for x in line:
    if line[0]!=x:
      print >> out, ','.join(map(str,SNP(line)))
      y=y+1
    else:
      y=y+1
  y=0
  n=n+1
out.close()

f=open("test.csv","rU")

out=open("test_2.csv","a")
lines=f.read().split()

for key, group in itertools.groupby(lines, lambda line: line.partition(',')[0]):
    print >>out, ','.join(group)

out.close()
f.close() 
```

如您所见，我目前正在编写两个文件。我真的只需要第二个文件。有没有人有任何建议将两个“下标”合并为一个？

输入文件“HPV16_CG.aln.fas”如下所示：

```
>gi|333031|lcl|HPV16REF.1| Alpha-9 - Human Papillomavirus 16, complete genome. 
ACTACAATAATTCATGTATAAAACTAAGGGCGTAACCGAAATCGGTTGAACCGAAACCGG

>gi|333031|gb|K02718.1|PPH16 Human papillomavirus type 16 (HPV16), complete genome
ACTACAATAATTCATGTATAAAACTAAGGGCGTAACCGAAATCGGTTGAACCGAAACCGG

>gi|196170262|gb|FJ006723.1| Human papillomavirus type 16, complete genome
ACTACAATAATTCATGTATAAAACTAAGGGCGTAACCGAAATCGGTTGAACCGAAACCGG 
```

我非常感谢所有帮助/建议来帮助我改进这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:33:14.687

最简单的做法是将文件的行保留在内存中，但我怀疑这不会起作用，因为任何有用的生物信息学文件都可能非常大。

这是通过删除全局变量使用并添加生成器函数来以流方式创建从函数返回的行来清理脚本的尝试，这些行`SNP`应该与您的`itertools.groupby`调用兼容。

```
from Bio import AlignIO
import itertools

n=0
align = AlignIO.read("HPV16_CG.aln.fas", "fasta")

def SNP(line, y, x):
    """Pass y as a parameter rather than relying on a global"""  
    result=[]
    result.append(str(n+1))
    result.append(line[0])
    result.append(align[y].id.rsplit("|")[3])
    result.append(x)
    return result

def generate_snp_lines(align, n):
    """this is a function generator that'll produce lines without writing them to a file"""
    while n<len(align[0]):
        line = align[:,n]
        y=0
        for x in line:
            if line[0]!=x:
                yield ','.join(map(str,SNP(line, y, x)))
            y+=1
        n+=1

def main():

    # let's use a context manager to open and cleanup this file for us:
    with open("test.csv","a") as out:
        # construct the generator:
        lines = generate_snp_lines(align, n)
        # pass it to itertools.groupby like we'd pass any iterable:
        for key, group in itertools.groupby(lines, lambda line: line.partition(',')[0]):
            print >>out, ','.join(group)

if __name__=="__main__":
    main() 
```

# ruby-on-rails - 如何使用 :selected 和 grouped_collection_select

> ID：11817496
> 
> 赞同：5
> 
> 时间：2012-08-05T15:09:04.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, grouped-collection-select

是否可以通过 grouped_collection_select 函数以某种方式使用您在普通选择视图助手上使用的 :selected 选项？我想设置在我的列表中预先选择的值。我试过传入 :selected 作为选项，但没有运气！

这是我的测试的一些代码片段：

```
grouped_collection_select 'user[subscription_attributes]', :subscription_plan_id, Trade.order(:name).all, :subscription_plans, :name, :id, :display_name, { :include_blank => true, :selected => 5 }

grouped_collection_select 'user[subscription_attributes]', :subscription_plan_id, Trade.order(:name).all, :subscription_plans, :name, :id, :display_name, :include_blank => true, :selected => 5 
```

这两个版本都不起作用。未设置选择。我正在使用它来设置嵌套模型的值。我正在使用 railscasts 动态选择列表方法：[http ://railscasts.com/episodes/88-dynamic-select-menus-revised](http://railscasts.com/episodes/88-dynamic-select-menus-revised)

我无法让 formtastic 与组选择很好地配合，所以我必须手动完成，但当用户验证失败时，我不会选择这个值。我想在他们修复验证错误时保留这个设置。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T20:31:35.717

我刚刚遇到了同样的问题，并使用记录在以下位置`option_groups_from_collection_for_select helper`的`select`帮助程序解决了它：http: [//api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)。

第一步是创建分组选项。以您的示例为例，它应该如下所示：

```
<% options = option_groups_from_collection_for_select(Trade.order(:name).all,
   :subscription_plans, :name, :id, :display_name, 5) %> 
```

然后我创建了选择对象，如：

```
<%= select('user[subscription_attributes]', :subscription_plan_id, options, 
  include_blank: true) %> 
```

您可以将它们全部写在一行中，我只是将选项分解为一个单独的变量来说明两种不同的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T15:27:34.063

也许为时已晚，但 grouped_collection_select 的 API 文档指出：“将选择实例对象上调用方法返回的值。”

因此，您甚至不必指定 :selected 选项，因为 Rails 会根据您的属性的当前值自动选择。如果 subscription_plan_id 的值为 5，那么这就是将被选中的内容。

如果这应该是默认值，那么您可以在模型中使用 after_initialize 进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-14T20:20:44.170

实际上，您需要发送选项 include_blank 例如

```
<%= grouped_collection_select :id, model.all, options = {:include_blank => 'Selecione'}%> 
```

# c# - 无论权限如何，Umbraco 用户都无法看到某些节点

> ID：11817498
> 
> 赞同：1
> 
> 时间：2012-08-05T15:09:14.777
> 
> 标签：c#, tree, umbraco

我有一个类似于以下的站点结构：

```
Content
  - Home
    - Articles
      - A1
      - A2
      - A3
    - Categories
      - C1
      - C2
      - C3 
```

还有几个文件夹，但这应该可以很好地说明问题。我有一个注册过程，可以创建用户并允许他们访问后台。但是，最近，我注意到当用户登录时，某些节点并没有出现。

例如，我创建了一个测试用户并授予了对所有内容的访问权限，但在登录时，他们可能只能在“文章”文件夹中看到一篇文章，而在“类别”文件夹中看不到任何类别。这似乎发生在我创建的任何用户身上，并且它总是显示/不显示相同的节点。

如果用户创建了一篇文章，那么在它发布之前它不会显示在树中。即使保存也不会导致它显示在树中。所以保存和导航会导致节点“丢失”。

管理员帐户不会发生这些问题。

我尝试重新发布整个站点，重新加载相关文件夹上的节点，以及触摸 web-config 并将新创建的用户设置为管理员，但仍然没有运气。

**更新**

经过一番调查，最初加载的节点似乎都有子节点。例如，如果 A1 有 2 个孩子，“Link 1”和“Link 2”，据我了解，这将显示，A2 和 A3 不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:16:38.197

我发现了问题！

When experimenting with custom trees, I implemented an example for an event that would remove the "Delete" action from the nodes. For some reason this was only rendering the node if it had children and was owned by the current user (if they weren't admin).

Doh!

# c - 进程创建中 fork()!=0 和 !fork() 有什么区别

> ID：11817501
> 
> 赞同：1
> 
> 时间：2012-08-05T15:09:19.223
> 
> 标签：c, unix, operating-system

目前，我正在做一些基于 UNIX 操作系统的练习。我使用了 fork() 系统调用来创建一个子进程，代码片段如下：

```
if(!fork())
{
   printf("I am parent process.\n");
}
 else
   printf("I am child process.\n"); 
```

而这个程序先执行子进程，再执行父进程。

但是，当我替换`if(!fork()) by if(fork()!=0`) 然后父块然后子块执行。这里我的问题是 - 结果是否应该在这两种情况下是相同的，或者这背后有什么原因？提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T15:21:22.773

*   没有保证的执行顺序。
*   但是，`if(!fork())`并在逻辑上`if(fork()!=0)`给出**相反的**`fork()`结果：如果返回零，`!fork()`则为真，而`fork()!=0`为假。

此外，从 fork() 的手册页中：

> 成功时，父进程返回子进程的PID，子进程返回0。失败时，在父进程中返回 -1，不创建子进程，并适当设置 errno。

所以正确的检查是

```
pid_t pid = fork();
if(pid == -1) {
     // ERROR in PARENT
} else if(pid == 0) {
     // CHILD process
} else {
     // PARENT process, and the child has ID pid
} 
```

编辑：正如 Wyzard 所说，您绝对应该确保稍后也使用 pid。（另外，将类型固定为 pid_t 而不是 int。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:22:47.437

你不应该真正使用其中任何一个，因为当孩子完成时，它会一直保持僵尸状态，直到父母也完成。您应该在变量中捕获孩子的 pid 并使用它来检索孩子的退出状态：

```
pid_t child_pid = fork();
if (child_pid == -1)
{
  // Fork failed, check errno
}
else if (child_pid)
{
  // Do parent stuff...

  int status;
  waitpid(child_pid, &status, 0);
}
else
{
  // Child stuff
} 
```

或者你应该使用“[双叉技巧](http://kasperd.net/~kasperd/comp.os.linux.development.faq#zombie)”将孩子与父母分离，这样孩子就不会像僵尸一样等待父母恢复其退出状态。

此外，您不能依赖子代在分叉后在父代之前执行。您有两个*同时*运行的进程，不能保证相对的执行顺序。它们可能轮流运行，也可能同时在不同的 CPU 内核上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:14:33.797

`!fork()`并且`fork() == 0`两者的行为方式相同。

条件本身不能成为执行顺序不同的原因。该进程被复制，这意味着子进程现在正在与父进程竞争资源，包括 CPU。由操作系统调度程序决定哪个进程将获得 CPU。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T15:16:23.313

父级和子级访问各自`printf()`语句的顺序是未定义的。如果您要多次重复您的测试，那么两者的结果很可能是相似的，因为对于任何一个版本，都会有父级先打印和父级最后打印的时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T15:40:05.940

子进程和父进程的执行顺序由调度程序决定。它确定处理器执行每个进程的时间和时间。因此，对于相同的程序代码，输出的顺序可能会有所不同。源代码的变化导致输出序列的变化纯属巧合。顺便说一句，你的 printf 应该正好相反：如果 fork() 返回 0，它是子进程，而不是父进程。

[请参阅http://en.wikipedia.org/wiki/Fork_%28operating_system%29](http://en.wikipedia.org/wiki/Fork_%28operating_system%29)上的代码示例。本文的德语版本 (http://de.wikipedia.org/wiki/Fork_%28Unix%29) 包含一个示例输出和关于操作顺序的简短讨论。

# php - MySQL插入多个数据库 - 问题

> ID：11817504
> 
> 赞同：1
> 
> 时间：2012-08-05T15:09:32.530
> 
> 标签：php, mysql, multiple-databases

我有两个数据库 real 和 backDB。我想用 SQL 将所有内容从一个复制到另一个……这似乎并不容易。如果有人可以帮助我。这是我的代码：

```
$newdbsql="CREATE TABLE $newdb LIKE $actdbname.`$acttable`";
$newresult = mysql_query($newdbsql, $bckconn) or die(mysql_error());

// copy all the data
$query = "INSERT INTO $newdb SELECT * FROM $actdbname.$acttable WHERE $acttable.azon < $upto";
$result = mysql_query($query, $bckconn) or die(mysql_error()); 
```

我一直在与它作斗争，但我无法正确...谢谢

更新：我可以连接两个数据库，也可以进行简单的选择。但是在我想从 A 读取并复制到 BackupDb 的地方，它总是只连接到一个 DB。

错误消息：SELECT 命令拒绝“备份”真实数据库上的用户...

重要信息：我在共享主机上，所以这并不容易:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:16:19.547

您只需要授予`SELECT`备份数据库用户对常规数据库的权限：

```
GRANT SELECT ON `$actdbname`.* TO `backup`@`localhost`; 
```

为获得最佳安全性，不建议授予除 以外`SELECT`的任何权限，因为不需要其他权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:27:39.410

> **警告：**
> 
> 请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？
> 
> 相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该提供一些有关决定使用哪个 API 的详细信息。对于 PDO，这里有一个[很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

要在不使用 MySQL 的内部复制功能的情况下复制数据库，可以使用`CREATE TABLE foo LIKE bar;`and`INSERT INTO foo SELECT * FROM bar;`语句。

第一行将创建一个使用与最初完全相同的结构命名的新表，`foo`第二**行将**`bar`帮助您将整个内容**复制**到.`bar``foo`

### 编辑：

表名可以表示为`foo`，表示`foo`您当前数据库中的表。但是您可以说`baz.foo`，这将意味着`foo`您`baz`数据库中的表。当然，您的用户需要在两个数据库上都拥有所需的权限。以下代码有效：

```
mysql_connect("localhost", "username", "password");
mysql_select_db("original");

mysql_query("CREATE TABLE backup.foo LIKE original.bar");
mysql_query("INSERT INTO backup.foo SELECT * FROM original.bar");

mysql_close(); 
```

# c# - 多线程访问.net中的集合

> ID：11817509
> 
> 赞同：1
> 
> 时间：2012-08-05T15:10:00.363
> 
> 标签：c#, .net, multithreading

假设有由 Hashtable.Synchronized() 创建的类似 Hashtable 的东西，它可以被多个线程访问。键值对是 Hashtable 中的 Guid 和 Object 。一个线程需要轮询这个 Hashtable，直到另一个线程将特定的 Guid 键添加到这个列表中。

下面是我的代码。

```
 public Hashtable syncHt = new Hashtable();
        public void Init()
        {
            Hashtable ht = new Hashtable();
            syncHt = Hashtable.Synchronized(ht);
        } 
```

在应用程序初始化中，我将调用 init();

在其中一个线程中，我将调用 isExist 来查找由其他线程添加的特定 Guid。

```
public bool isExist(Guid sId)
    {
        while (true)
        {
            if (syncHt.ContainsKey(sId))
            {
                return true;
            }
        }

} 
```

我想知道这个循环是否可以结束。我怎么知道在轮询期间哈希表发生了变化？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:18:06.107

看看[并发集合](http://msdn.microsoft.com/en-us/library/dd287108)，尤其是`ConcurrentBag<T>`

**更新**

关于 IsExist，这里有更好的解决方案

改变所以不需要`Hashtable`锁`ConcurrentDictionary<Guid, object>`

`repository`无锁添加项目

```
ConcurrentDictionary<Guid, object> repository = new ConcurrentDictionary<Guid, object>(); 
```

检查现有项目的存储库

```
 public bool IsExist(Guid id)
    {
        SpinWait.SpinUntil(() => repository.ContainsKey(id)); - you can add Timout
        return true;
    } 
```

这是有关[SpinWait的更多信息](http://msdn.microsoft.com/en-us/library/dd289501)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:39:25.457

在 .NET 中，读取和更重要的分配给引用始终是原子操作。

要进行原子操作，请使用`System.Threading.Interlocked`类。见[MSDN](http://msdn.microsoft.com/en-us/library/h7etff8w.aspx)

* * *

> 我想知道这个循环是否可以结束。

当另一个（仅允许 1 个写入器）线程插入想要的值时，它将结束，是的。

在 MSDN 上： [Hashtable 是线程安全的，可供多个读取线程和单个写入线程使用。](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)

但是您的解决方案非常低效。繁忙循环可能会消耗大量 CPU 时间。在旧式集合中存储（盒装）指南也不完美。

# c# - 使用 Xpath 进行屏幕抓取

> ID：11817517
> 
> 赞同：0
> 
> 时间：2012-08-05T15:10:47.807
> 
> 标签：c#, asp.net, vb.net, xpath

以下是 HTML：

```
 <div class="CatContent">
<div class="LeftCon">
<span class="mv"></span>
<a href="http://movies.justdial.com/movies/Mumbai.html" target="_blank" onclick="_ct("psc_Movies","hmpg");">
<p>
</div>
<div class="RightCon">
</div> 
```

我想提取`h1`标签之间的文本，即`Movies`.

`h1`用于提取标签之间文本的 XPath 应该是什么？？

这就是我正在尝试的：

```
Dim webGet = New HtmlWeb()
        Dim document = webGet.Load("http://www.asadsdsad.com/")
        Dim nodes = document.DocumentNode.SelectNodes("//*[@class='LeftCon']/a[@target='_blank']/h1")

        Dim _table As New Data.DataTable

        _table.Columns.Add("BusinessPIN", GetType(String))
        For i = 0 To nodes.Count - 1
            Dim _newRow As Data.DataRow = _table.NewRow
            _table.Rows.Add(nodes(i).InnerText)
        Next
        GridView1.DataSource = _table
        GridView1.DataBind()
        MsgBox(GridView1.Rows.Count) 
```

我尝试了许多变体，但总是得到 **“System.NullReferenceException：对象引用未设置为对象的实例”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:22:33.423

> 用于提取 h1 标记之间的文本的 XPath 应该是什么？？

`//h1`这将为您提供所有 h1 元素

迭代 h1 htmlelements 的集合，然后使用 HtmlElement 的 InnerText 属性获取文本

# django - 将 CMS 2.3 与 Django 1.4 集成

> ID：11817525
> 
> 赞同：1
> 
> 时间：2012-08-05T15:12:47.480
> 
> 标签：django, django-admin, django-templates, django-cms, django-sekizai

嗨，我在运行服务器上遇到以下错误，一个简单的 CMS 集成：

""" django.core.exceptions.ImproperlyConfigured: 'js' 和 'css' sekizai 命名空间必须存在于每个模板中，或者它继承自的模板 - 在 CMS_TEMPLATES 中定义。我在 'template_2 中找不到命名空间.html'。"""

我遵循了--- [http://docs.django-cms.org/en/latest/getting_started/tutorial.html#sekizai-namespaces](http://docs.django-cms.org/en/latest/getting_started/tutorial.html#sekizai-namespaces) ----这个方法

任何人都可以建议出了什么问题。

我已经添加了

```
{% load cms_tags sekizai_tags %}  
<@html> 
<@head>   
 {% render_block "css" %}   
 <@/head>   
<@body>  
{% cms_toolbar %}      

 {% placeholder base_content %}   

{% block base_content %}

{% endblock %}

{% render_block "js" %}   

<@/body>
<@/html> 
```

这到 base.html ，但显示上述错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:34:55.710

请提供 settings.py 配置。

试试`pip freeze -r > requirements.txt`。确保 sekizai 在该列表中。

# excel - 单元格格式四舍五入并显示 2 位小数

> ID：11817534
> 
> 赞同：35
> 
> 时间：2012-08-05T15:13:33.247
> 
> 标签：excel, rounding

我有一个单元格格式为数字和 2 位小数。

实际数字是 69.30217，所以在我的单元格中，想象单元格 A1，它看起来像 69.30。还行吧。

使用那个单元格，我正在做一些连接，所以如果我做这样的事情：

```
"&E5&" 
```

该号码显示为 69.30217。但如果我这样做：

```
"&ROUND(E5;2)&" 
```

该数字显示为 69.3。

我该怎么做才能显示那个零？显示什么 69.30

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-05T15:58:16.703

另一种方法是使用`FIXED`函数，您可以指定小数位数，但如果未指定小数位数，则默认为 2，即

`=FIXED(E5,2)`

要不就

`=FIXED(E5)`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-08-05T15:19:11.253

用这个

```
&TEXT(E5;"0.00")& 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-07T18:01:22.713

输入：0 0.1 1000

`=FIXED(E5,2)`

输出：0.00 0.10 1,000.00

`=TEXT(E5,"0.00")`

输出：0.00 0.10 1000.00

注意：如您所见，FIXED 在千位之后添加一个昏迷，而 TEXT 没有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-29T13:47:33.400

我使用格式、数字、2 位小数并勾选“使用 1000 分隔符”，然后转到“文件”、“选项”、“高级”，向下滚动到“计算此工作簿时”并勾选“设置显示的精度”。您会收到一条关于失去准确性的错误消息，这很好，因为这意味着它四舍五入到小数点后 2 位。比添加一个不必要的 ROUND 函数要好得多。

# c# - c# WinForms 的 TreeView-Grid 控件

> ID：11817535
> 
> 赞同：0
> 
> 时间：2012-08-05T15:13:34.890
> 
> 标签：c#, winforms, visual-web-gui

我现在正在 Visual webgui 中开发一个项目。设计窗口/页面与 WinForms 非常相似。我需要一个像这样的控件：http: [//www.devexpress.com/Products/NET/Controls/WinForms/Tree_List/](http://www.devexpress.com/Products/NET/Controls/WinForms/Tree_List/)。

Gizmox 库中没有这样的控件，所以我必须创建自己的。我正在 WinForms 中寻找这种控件的来源，因此我可以根据现成的示例实现我的自定义控件。

或者也许你在 webgui 中有这样的控制？无论如何，谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:43:24.740

您可以尝试[VisualJS.NET](http://visualjs.net)并轻松翻译任何 javascript 控件。它支持自定义基于 javascript 的控件等。

# ruby-on-rails - 在另一个循环中分别调用每个文章标签

> ID：11817537
> 
> 赞同：1
> 
> 时间：2012-08-05T15:13:41.547
> 
> 标签：ruby-on-rails, ruby, methods

我有一篇文章，每篇文章都有标签。现在我把所有的标签都叫在一起：

```
<% @articles.each do |article| %>
  <div class="articlebox">
    <article>
      <h4>
        <%= link_to article.title, article_path(article) %>
      </h4>
        <%= markdown article.body %>
      <span class="articletagbox">  
        <%= article.tag_tokens %>
      </span>   
<% end %> 
```

现在我的班级围绕着所有的文章标签。我希望它单独绕过每个文章标签。

我试过一个简单的

```
<% @tags.each do |tag| %> 
```

但这给了我一个未定义的方法“每个” nilclass 错误。

我知道这很简单，但我就是不知道我应该改变什么才能让它工作。我假设我需要在我的文章模型中定义一些东西？

谢谢！

编辑

所以现在我的代码看起来像这样：

```
<% article.tags.each do |tag| %>
  <span class="articletagbox">  
    <%= article.tag_tokens %>
  </span>   
<% end %> 
```

article.rb 中的方法是：

```
def tag_tokens
  self.tags.collect{|t| t.name}.join(", ")
end 
```

它返回与每篇文章关联的所有标签的次数与标签的次数相同。

例如，如果我在一篇文章上有三个标签：tag1、tag2、tag3 我得到

```
<class>tag1 tag2 tag3</class> <class>tag1 tag2 tag3</class> <class>tag1 tag2 tag3</class> 
```

相反，我想要

```
<class>tag1</class> <class>tag2</class> <class>tag3</class> 
```

所以我只是不确定为什么我将与每篇文章关联的所有标签一起返回，但与标签的次数相同。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:15:11.910

如果一篇文章`has many :tags`然后在文章循环中做

```
<% article.tags.each do |tag| %> 
```

在您的编辑之后：您正在输出一个在文章上调用的方法，同时在标签上循环。没有意义，你在标签上循环，`tag.name`而是打电话！

检查 slhck 答案以了解特定语法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T16:47:06.987

你说你想要：

```
<class>tag1</class> <class>tag2</class> <class>tag3</class> 
```

我假设`class`您的意思`span`是应该单独应用于每个标签的格式？只需摆脱该`tag_tokens`方法。无论如何，在标签的模型中定义格式化方法可能是不好的风格——而不是在视图中进行格式化，或者在[部分](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials).

在您看来，在您浏览所有文章的循环中，只需执行以下操作：

```
<% article.tags.each do |tag| %>
  <span class="articletagbox"><%= tag.name %></span>
<% end %> 
```

这将输出：

```
<span class="articletagbox">tag1</span>
<span class="articletagbox">tag2</span> 
```

... 等等。

# sql - Sql 按月每日比较

> ID：11817544
> 
> 赞同：0
> 
> 时间：2012-08-05T15:14:18.243
> 
> 标签：sql, date, comparison

我正在写一份工作报告，要求我比较每天下降的学生数量，我的意思是报告需要显示今天 8 月 5 日 X 数量从 1 日到 5 日下降的学生比较X 金额在 7 月 1 日至 5 日期间下降，依此类推，每年的每个月。任何人都可以通过向我提供可以用来获取该信息的查询来帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:25:59.543

您想比较一个月的前几天。以下查询为您提供了一个示例：

```
select yr, mon, count(*)
from (select extract(year from date) as yr, extract(month from date) as mon,
             extract(day from date) as day
      from t
     ) t
where day <= extract(day from now())
group by yr, mon 
```

但是，确切的语法可能取决于您的数据库。例如，当前日期可能是 now()、getdate()、system_date 或其他。一些数据库不支持提取，但大多数都有获取月份和日期的方法。

# c# - 使用 C# 连接多个 .wmv 文件

> ID：11817551
> 
> 赞同：-1
> 
> 时间：2012-08-05T15:14:57.900
> 
> 标签：c#

我正在尝试使用 C# 加入几个 .wmv 文件.....以下是我的编码.....编码工作正常，它将所有 .wmv 文件读取和写入到流中.....但是，当我用我的 windows 媒体播放器播放加入的视频时，第一个视频只播放.....假设有 5 个 20 mb 的视频文件......在我加入它们后，文件大小变为 100 mb .. ..但是，当我播放它时，第一个视频只播放......但是，我需要播放整个视频....我该怎么办？

```
private void JoinFiles(string FolderInputPath, string FileOutputPath)

{

// Needed to get all files in that directory

            DirectoryInfo diSource = new DirectoryInfo(FolderInputPath);

            // Filestream to reconstruct the file

            FileStream fsSource = new FileStream(FileOutputPath, FileMode.Append);

            // Loop through all the files with the *.part extension in the folder

            foreach (FileInfo fiPart in diSource.GetFiles(@"*.wmv"))
            {

                  // Create a byte array of the content of the current file
                Byte[] bytePart = System.IO.File.ReadAllBytes(fiPart.FullName);
                // Write the bytes to the reconstructed file
                fsSource.Write(bytePart, 0, bytePart.Length);

               }

            fsSource.Close();      

            // Close the file stream

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:26:44.003

也许尝试使用 ffmpeg 将系列“转换”为一个视频。

# ajax - Grails 更新带有消息的 html 表格 ajax 插入

> ID：11817559
> 
> 赞同：0
> 
> 时间：2012-08-05T15:15:43.573
> 
> 标签：ajax, grails, grails-orm

我来自.net 背景到 grails。我得到了一个供用户插入的表单，以及一个带有记录列表的 html 表。用户插入新记录后，如何使用该记录更新 html 表并显示一条消息 - 例如插入的公司？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:46:53.377

使用您需要的任何属性创建一个用于插入记录的域类。阅读[创建域类](http://grails.org/doc/latest/ref/Command%20Line/create-domain-class.html)和[Grails GORM](http://grails.org/doc/latest/guide/GORM.html)

用户提交表单后，将必要的值作为记录插入其中。要获取整个记录列表，您可以在域类上调用[list()方法。](http://grails.org/doc/latest/ref/Domain%20Classes/list.html)将整个记录列表作为操作的响应发送到客户端/作为**模型**呈现。见[渲染。](http://grails.org/doc/latest/ref/Tags/render.html)使用这些新记录更新您的 html 表。

对于状态部分，您可能希望在**try-catch** 块中执行插入操作并相应地呈现状态消息。

# objective-c - 按日期属性对自定义类对象的数组进行排序

> ID：11817561
> 
> 赞同：4
> 
> 时间：2012-08-05T15:15:48.303
> 
> 标签：objective-c, ios, object, nsdate

我有一个从自定义类创建的对象数组。每个对象都有一个 NSDate 属性。根据日期属性对所有这些对象进行排序的最简单快捷的方法是什么？（按从最近到最近的顺序）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-05T15:24:36.713

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"thisIsTheNameOfYourDateProperty" ascending:NO];
NSArray *orderedArray = [arrayOfCustomObjects sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T15:27:23.857

试试这个：

```
NSArray* newArray = [array sortedArrayUsingComparator: ^NSComparisonResult(MyClass *c1, MyClass *c2)
{
    NSDate *d1 = c1.date;
    NSDate *d2 = c2.date;

    return [d1 compare:d2];
}]; 
```

还有一些方法可以对可变数组进行排序，类似于上面的方法。

编辑：我知道还有其他方法可以使用更少的代码来做到这一点，但我真的更喜欢使用块枚举器来处理各种事情，所以我发现保持实践很有用。您还可以调整这些以使用更多非标准排序（整数与对象）并实际使用 NSLog() ...) 记录发生的事情。

# django - Django 中的网络资产

> ID：11817563
> 
> 赞同：1
> 
> 时间：2012-08-05T15:15:52.987
> 
> 标签：django

我是 Webassets 的新手，我将它与 Django 一起使用。我对此有几个问题，希望得到一些帮助。我指的[是 Django 中的 WebAssets。](http://elsdoerfer.name/docs/webassets/django/index.html#)

问题：

```
from django_assets import Bundle, register
js = Bundle('common/jquery.js', 'site/base.js', 'site/widgets.js',
            filters='jsmin', output='gen/packed.js')
register('js_all', js) 
```

1）我知道 Bundle 有助于将其打包到 packed.js 中，但为什么要使用过滤器？这里过滤器的目的是什么？

2) 使用网络资产有什么用途或优势？他们是网络资产的任何教程/阅读资料吗？

需要一些指导..感谢任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:58:34.590

使用 django 压缩器 :-)

但是，要回答您的问题，过滤器不是您可能正在考虑的 python 过滤器。它指的是正在使用的压缩器类型——例如闭包编译器、​​yui 压缩器等。

任何资产管理器的想法都是对静态文件（一些资产管理器的 js/css 和图像）进行合并、压缩和版本化，以优化网页加载速度。使用这些资产管理器之一 - [http://www.djangopackages.com/grids/g/asset-managers/](http://www.djangopackages.com/grids/g/asset-managers/) - 以最小的努力提高页面加载性能（通常只需要简单的配置）

# mysql - 按字符串和数字排序，首先以数字开头，然后是“数字字符串”

> ID：11817564
> 
> 赞同：1
> 
> 时间：2012-08-05T15:15:54.217
> 
> 标签：mysql, sql, sql-order-by

我的表中有一个 varchar 字段，其中包含各种条目。如何使用 order by 语句获得以下结果：

```
1
2
3
4
5
6
7
8
9
10
Steinstrass 1
Steinstrass 2
Steinstrass 3
Steinstrass 4
Steinstrass 5
Steinstrass 6
Steinstrass 7
Steinstrass 8
Steinstrass 9
Steinstrass 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:28:42.797

这对我有用：

```
mysql> select * from sorting;
+---------+
| field1  |
+---------+
| 1       |
| 4       |
| 10      |
| Item 1  |
| Item 10 |
| Item 0  |
| 0       |
+---------+
7 rows in set (0.00 sec)

mysql> select field1 from sorting order by length(field1),field1 asc;
+---------+
| field1  |
+---------+
| 0       |
| 1       |
| 4       |
| 10      |
| Item 0  |
| Item 1  |
| Item 10 |
+---------+
7 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:38:06.760

试试这个：

```
order by (case when left(str, 1) between '0' and '9' then 1
               else 0
          end) desc,
         (case when left(str, 1) between '0' and '9' then cast(str as unsigned)
          end),
         cast(substring(str, instr(' ', str)+1, 100) as unsigned) 
```

这应该适用于任意初始字符串。它假定初始字符串和数字之间有一个空格。

# javascript - 使用 WebRTC PeerConnection 进行两个以上参与者的视频会议是否可行？

> ID：11817572
> 
> 赞同：4
> 
> 时间：2012-08-05T15:17:55.840
> 
> 标签：javascript, video-conferencing, webrtc

我一直在玩 WebRTC 并阅读它的工作方式，但我仍然对对等连接的真实情况一无所知。如果视频会议中有太多参与者而没有某种中央服务器，如果他们都必须相互连接，那么流的路由方式会不会令人窒息？

有没有人尝试过这个？有人愿意猜测一下您的平均宽带连接的阈值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T07:38:50.243

他们肯定会扼杀你正在做的任何事情。

您将需要一个中央服务器，但这取决于您 - WebRTC 只处理媒体传输和通信部分 - 您需要自己处理所有信号。为此，您可以添加一个媒体服务器来处理多点会议并让它进行会议的编排。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:10:28.150

你可以看看 webrtc.io [http://multiwebrtc.nodejitsu.com/#0](http://multiwebrtc.nodejitsu.com/#0)

但就像@Tsahi 说的那样，在 4 名参与者之后让我窒息，并且 cpu 也飙升至 100% 的大量延迟。当您不做 1 对 1 时

# ruby - 如何将变量从控制器传递给部分？

> ID：11817573
> 
> 赞同：0
> 
> 时间：2012-08-05T15:18:01.107
> 
> 标签：ruby, ruby-on-rails-3, controller

我像这样渲染部分视图。

```
<%= render :partial => 'resources/positions', :controller => 'resources',
                         :action => 'this_is_a_test',
                         :locals => {:id_resource => 42} %> 
```

资源控制器.rb

```
def this_is_a_test
    @test1 = "batman"
    render :partial => 'positions'
  end 
```

_positions.html.erb

```
<%= @test1 %> 
```

但变量@test1 为空。你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:23:24.533

```
def this_is_a_test
  render :partial => 'positions', :locals => { :test1 => "batman" }
end 
```

并更改`_position.html.erb`为

```
<%= test1 %> 
```

# php - PHP缓冲区溢出可能吗？

> ID：11817576
> 
> 赞同：8
> 
> 时间：2012-08-05T15:18:10.863
> 
> 标签：php, buffer-overflow

> **可能重复：**
> [如何在 PHP/Python 中进行缓冲区溢出？](https://stackoverflow.com/questions/2081281/how-to-conduct-buffer-overflow-in-php-python)

当我遇到这个时，我正在阅读[本教程：](http://www.ibm.com/developerworks/opensource/tutorials/os-php-lockdown/section6.html)

> 缓冲区溢出攻击旨在溢出 PHP 应用程序中的内存分配缓冲区，或者更严重的是，在 Apache 或底层操作系统中溢出。请记住，您可能正在使用像 PHP 这样的高级语言来编写 Web 应用程序，但归根结底，您是在调用 C（在 Apache 的情况下）来完成工作。和大多数低级语言一样，C 对内存分配有严格的规定。

什么？我知道 PHP 有很好的错误检查，所以缓冲区溢出是不可能的。我应该检查用户输入长度以避免太大的数据流吗？非常感谢你

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T15:24:28.187

是的，在[当前的更改日志](http://php.net/ChangeLog-5.php)中，有 15 个与之相关的错误修复：

> *   修复了错误 #61807 apache_request_headers 中的缓冲区溢出，CVE-2012-2329。
> *   修复了 crypt() 中 overlog salt 的缓冲区溢出问题。（克莱门特·莱西涅，斯塔斯
> *   修复了错误 #60965（带有 $double=false 的 htmlspecialchars/entities 上的缓冲区溢出）。
> *   修复了 socket_connect() 中的堆栈缓冲区溢出。(CVE-2011-1938) 由 Mateusz Kocielski、Marek Kroemeke 和 Filip Palian 发现。（费利佩）
> *   修复了 mysqlnd_list_fields、mysqlnd_change_user 中可能的缓冲区溢出。（安德烈）
> *   修复了在 mysqlnd 中处理错误数据包时可能出现的缓冲区溢出。Stefan Esser 报道。（安德烈）
> *   修复了可能的去块过滤器缓冲区溢出。Stefan Esser 报道。（皮埃尔）
> *   修复了错误 #42862（IMAP 工具包崩溃：rfc822.c 旧例程缓冲区溢出）。（修复 CVE-2008-2829）（德米特里）
> *   修复了 FastCGI SAPI 中可能的堆栈缓冲区溢出。（安德烈·尼格马图林）
> *   修复了 fnmatch()、setlocale() 和 glob() 函数的 glibc 实现中可能触发缓冲区溢出的问题。由洛朗·加菲报道。
> *   修复了错误 #42222（php_openssl_make_REQ 中可能的缓冲区溢出）。（皮埃尔）
> *   修复了 make_http_soap_request() 中可远程触发的缓冲区溢出。(伊利亚)
> *   修复了 user_filter_factory_create() 中的缓冲区溢出问题。(伊利亚)
> *   修复了捆绑的 libxmlrpc 库中可远程触发的缓冲区溢出问题。（斯塔斯）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T15:26:25.720

当然，当调用实际使用 C/C++ 编写的函数（这将是所有核心函数）时，可能会发生这种情况。

我相信 PHP 提供的那些基本功能已经检查过缓冲区溢出等错误，但是您无法确定何时使用自定义扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:27:37.170

当然它是“可能的”。我更感兴趣的问题是您认为攻击向量在哪里执行此操作（更新的 php 错误等）。此外，我认为与其他安全问题相比，这是一个不太可能被利用的目标。

# javascript - 通过 javascript 清除和更新 html5 应用程序缓存

> ID：11817578
> 
> 赞同：12
> 
> 时间：2012-08-05T15:18:23.703
> 
> 标签：javascript, html, application-cache

我经常遇到这个问题，其中一些用户的应用程序缓存损坏（HTML 5）。

每次有新版本时，我都会更新清单文件，但有时有些用户会收到损坏的应用程序缓存。

在这种情况下，我想完全清除他们的应用程序缓存中的内容并从服务器加载所有新内容。

有没有办法使用Javascript？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-05T15:27:00.230

根据下面的文章

[http://www.w3schools.com/html5/html5_app_cache.asp](http://www.w3schools.com/html5/html5_app_cache.asp)

有三种方法可以重置应用程序缓存，它们是：

1.  用户清除浏览器缓存
2.  清单文件被修改
3.  应用程序缓存以编程方式更新

有关以编程方式更新应用程序缓存的更多信息，请参见此处：

[http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

它看起来像这样：

```
var appCache = window.applicationCache;

appCache.update(); //this will attempt to update the users cache and changes the application cache status to 'UPDATEREADY'.

if (appCache.status == window.applicationCache.UPDATEREADY) {
  appCache.swapCache(); //replaces the old cache with the new one.
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-12T20:00:58.127

这个已经很老了，但是当我看到一个错误的答案被投票时，我想给一些提示....

如果有麻烦看规范，你可以看到代码没有办法强制浏览器重新加载缓存，除非清单中有变化，那就是“appCache.status == window.applicationCache. UPDATEREADY”是真的。

看这里[http://www.w3.org/TR/2011/WD-html5-20110525/offline.html](http://www.w3.org/TR/2011/WD-html5-20110525/offline.html)

“updateready manifest中列出的资源已经重新下载，脚本可以使用swapCache()切换到新的缓存。”

因此，仔细阅读它，您会发现 applicationCache 在刚刚下载的资源时进入该状态......也就是说......之前的“下载”事件发生......并且在该事件之前是“检查”...... .

# java - Spring MVC REST - 根据请求内容类型返回 xml 或 json

> ID：11817580
> 
> 赞同：3
> 
> 时间：2012-08-05T15:18:48.423
> 
> 标签：java, xml, spring, rest, spring-mvc

我正在尝试创建 RESTful Web 服务，它将根据请求内容类型返回 json 或 xml：

我的控制器如下所示：

```
@Controller
public class RESTController {

    @RequestMapping(value="/rest/{id}", method=RequestMethod.GET)
    @ResponseBody
    public User getUser(@PathVariable Long id){
        User user = .....
        return user;
    } 
```

我的用户类如下所示：

```
@XStreamAlias("user")
public class User {

    private long id;
    private String firstName;
    private String lastName; 
      other setters and getters..............
} 
```

最后我的 Servlet.xml 看起来像这样：

```
<mvc:annotation-driven />
<context:annotation-config />
<context:component-scan base-package="com.vanilla.rest.controllers" />

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="ignoreAcceptHeader" value="true" />
    <property name="favorPathExtension" value="false" />
    <property name="order" value="1" />
    <property name="mediaTypes">
        <map>
            <entry key="xml" value="application/xml" />
            <entry key="json" value="application/json" />
        </map>
    </property>
    <property name="defaultViews">
        <list>
            <ref bean="xmlView"/>
            <ref bean="jsonView"/>
        </list>
    </property>
</bean>

<bean id="jsonView"
      class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
    <property name="contentType" value="application/json;charset=UTF-8"/>
    <property name="disableCaching" value="false"/>
</bean>

<bean id="xmlView"
      class="org.springframework.web.servlet.view.xml.MarshallingView">
    <property name="contentType" value="application/xml;charset=UTF-8"/>
    <constructor-arg>
        <ref bean="xstreamMarshaller"/>
    </constructor-arg>
</bean>

<bean id="xstreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
    <property name="autodetectAnnotations" value="true" />
    <property name="annotatedClass" value="com.vanilla.rest.entities.User"/>
</bean> 
```

我的问题是，无论我发送什么内容类型，我总是收到 JSON 响应。

![在此处输入图像描述](../Images/bc9bab0f7a8f2d4d3d42cfb80ddb1b3a.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T15:27:50.770

看起来你需要添加

```
Accept: application/xml 
```

到您的请求标头。

# windows - 包含 QDebug 时的 mingw32 链接器错误

> ID：11817581
> 
> 赞同：1
> 
> 时间：2012-08-05T15:18:48.900
> 
> 标签：windows, qt, linker, mingw

我有这个最小的例子：

```
QT -= gui
CONFIG += qt console
SOURCES += main.cpp 
```

```
#include <QDebug>

int main(int argc, char** argv)
{
    return 0;
} 
```

在构建项目时会出现此**链接错误：**

> c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe：最终链接失败：参数无效

**链接命令**如下所示：

> g++ -Wl -Wl -Wl,-subsystem,console -mthreads -o debug\test.exe debug/main.o -L"c:\QtSDK\Desktop\Qt\4.8.1\mingw\lib" -lQtCored4

**我的设置：**

*   视窗 XP SP3
*   Qt SDK 1.2.1 版（QtCreator 2.4.1，Qt Desktop 4.8.1 版）（全新安装于`C:\QtSDK\`）
*   MinGW32 4.4.0 版（包含在 Qt SDK 中`C:\QtSDK\mingw\`）

* * *

如果我删除`#include <QDebug>`，它编译得很好。如果我包含其他一些 Qt 头文件，例如 QCoreApplication，它也可以正常编译。

**编辑：**这是一个非常奇怪的最小示例。考虑一个像上面这样的空主函数。现在，如果我把这些包括，它无法链接：

```
#include <QWidget>
#include <QVariant> 
```

但是，如果我删除*其中一个*，它会链接而不会出现错误。

有什么问题？为什么 mingw 不告诉我*无效的论点是*什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:30:18.950

我想知道链接器是否找不到 lQtCored4 库？它实际上在 -L 目录中吗？

# html - 从“def get(self, notebook_id):”的参数构造链接时出现 404 错误

> ID：11817584
> 
> 赞同：0
> 
> 时间：2012-08-05T15:19:00.193
> 
> 标签：html, google-app-engine, python-2.7

我收到了带有此 url 的可怕的 404 html 错误消息

```
http://localhost:8088/editnotebook/Roger 
```

该链接是使用此 href 生成的。

```
{% for page in pages %}
<li><a href="/editnotebook/{{ page }}">  {{ page }} </a></li>
{% endfor %} 
```

python代码如下。

```
def get(self, notebook_id):
    iden = notebook_id
    notebook = db.get(db.Key.from_path('Notebooks', iden))
    self.render_template('editnotebook.html', {'notebook': notebook}) 
```

模型如下。

```
from models import Notes, Notebooks

class Notebooks(db.Model):
    user = db.StringProperty()
    moreinfo = db.StringProperty(multiline=True)
    deleteRequested = db.BooleanProperty(default=False) 
```

这些信息足以说明为什么我会收到 404 错误并可能修复它吗？

这个问题与[这里的问题](https://stackoverflow.com/questions/11657352/does-a-two-layer-crud-python-appengine-demo-exist)有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:47:16.580

hyperslug 注意到我没有发布我的 routes.py 代码确实回答了这个问题。在 routes.py 中，您必须添加正则表达式 ([\w]+) 以容纳链接参数。

# c# - 由于“私有”是 C# 中的默认范围 - 是否应该从签名中删除“私有”一词以获得更简洁的代码？

> ID：11817588
> 
> 赞同：10
> 
> 时间：2012-08-05T15:19:35.187
> 
> 标签：c#, .net, programming-languages, coderush

我听说各种程序员建议不要在声明、方法签名等中包含“私有”一词，因为私有是未指定时的默认范围。它可以使代码更清晰，但我对您是否在变量、方法等上使用“私有”范围的意见很感兴趣。像 CodeRush 这样为您生成代码的工具包括“私有”这个词，所以我我很好奇这是好是坏，或者只是个人喜好问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-05T15:21:44.793

更简洁的代码更*明确地表达*了设计者的意图。使用`private`表明一个深思熟虑的选择，不公开辩论。采用默认设置会引发问题：这是故意的，还是他只是忘记包含修饰符？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T15:23:20.600

删除私有并询问您的开发人员是否感到困惑

我个人觉得，包括 private 使您的代码更具可读性。我会更重视**“可读性”**而不是**“更干净”**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T20:13:23.173

在公开的东西是信息泄漏的代码库中（例如，它将不再被混淆），你想`public`突出。移除`private`也会对`protected`其他不必要的能见度产生同样的“退潮”效应。

理想情况下，一个人会使用 StyleCop 规则或类似规则来使代码实际上是一致的（尽管如此，在有人得出结论之前，所有代码规则实际上都应该在开发人员之间达成一致）。

（顺便说一句，您在 CodeRush 支持省略它的前提下的争论是不正确的 - 这些选项允许您将方法可见性等设置为`private`（OOTB）或“默认”（不指定任何内容））。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T15:25:09.177

编译器如何解释没有私有、受保护或公共的方法或其他类成员。在 nex 版本中可以更改。所以不要这样做。

# ruby - jRuby，带有 C 扩展的 gem

> ID：11817590
> 
> 赞同：7
> 
> 时间：2012-08-05T15:19:47.727
> 
> 标签：ruby, rubygems, jruby

有人对 jRuby 有同样的错误吗？当我尝试使用 C 扩展安装 gem 时，出现下一个错误：

> gem install serialport 构建原生扩展。这可能需要一段时间... 错误：安装串行端口时出错：错误：无法构建 gem 原生扩展。
> 
> ```
>  /home/username/.rvm/rubies/jruby-head/bin/jruby extconf.rb NotImplementedError: C > extension support is not enabled. Pass -Xcext.enabled=true to JRuby or set JRUBY_OPTS or modify .jrubyrc to enable. 
> ```
> 
> (root) 在 /home/username/.rvm/rubies/jruby-head/lib/ruby/shared/mkmf.rb:8
> 需要在 org/jruby/RubyKernel.java:1021 (root) 在 /home/username/。 rvm/rubies/jruby-head/lib/ruby/shared/rubygems/custom_require.rb:1 (root) at extconf.rb:1

在错误解释中声明的任何参数都不会成功......

**有关已安装 jruby 版本的信息：** jruby 1.7.0.preview2.dev (1.9.3p203) 2012-08-05 22cd6f9 on Java HotSpot(TM) Server VM 1.7.0_05-b05 [linux-i386]

**平台：** Linux

**宝石：**串行端口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T11:04:35.757

正如 echristopherson 所说，不推荐使用对 JRuby 的 C 扩展支持。[在大多数 gems 中，您应该在RubyGems](https://rubygems.org/)中找到 Java 特定版本，或者在 Github 中找到一个健康的替代方案。我不建议你尝试破解 gem 来与 jruby 一起工作，因为这将是一个痛苦的世界......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T07:34:25.247

Have you tried the rs232 gem? It may have jruby support, as the ffi gem it depends on has jruby support. [https://rubygems.org/gems/rs232](https://rubygems.org/gems/rs232)

# eclipse - Eclipse运行配置杀死python.exe？

> ID：11817591
> 
> 赞同：0
> 
> 时间：2012-08-05T15:19:49.997
> 
> 标签：eclipse, eclipse-juno, kill-process, taskkill, run-configuration

我正在从我的运行配置运行一个 Django 服务器，它转换为：

```
python manage.py runserver --noreload 
```

错误面板中的停止按钮不会杀死进程，所以我通常运行

> [**pskill**](http://technet.microsoft.com/en-us/sysinternals/bb896683)蟒蛇

**如何将此添加到我的 Eclipse 运行配置中？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:15:27.233

我的解决方案是创建一个名为“pskill.py”的 python 文件，其中包含：

```
from subprocess import call
from sys import argv

if __name__=='__main__':
    call(['pskill', argv[1]]) 
```

并将其添加到运行配置中的“Python 运行”下。

# eclipse - Remote Play 框架和 Eclipse

> ID：11817600
> 
> 赞同：1
> 
> 时间：2012-08-05T15:21:40.163
> 
> 标签：eclipse, playframework, playframework-2.0

我有一个在远程服务器上运行的游戏框架项目。

我正在尝试将 eclipse 配置为在项目上远程工作。因为不需要构建，所以我的要求是能够从 Eclipse 编辑项目文件并自动保存在服务器上、自动完成和调试。

我已经在 Eclipse 上安装了远程系统资源管理器，并设置了与我的服务器的远程 ftp 连接。

我服务器的播放环境在/play-2.0.2/下

我的项目路径是 /play-2.0.2/test

在 RSE 中，我点击了 /play-2.0.2/test 并“创建远程项目”

现在在 Java 透视图中，我可以浏览项目，更改文件，然后自动保存到服务器。

我的问题是播放框架库的自动完成效果不佳，因为所有参考都指向 /play-2.0.2/repository/...

知道如何解决吗？我尝试使用构建路径但没有成功

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T10:28:56.717

所以，我正在寻找自己实现同样的目标。

您遇到的问题是由于 .classpath 文件具有绝对值。而对我来说，除了在两种不同类型的操作系统之间不起作用的符号链接之外，我还想到了另外两种解决方案：

1.  生成后使用 sed 重写 .classpath 文件上的类路径
2.  为 sbt eclipse 命令使用[“classpathTransformerFactory”](https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse#classpathtransformerfactories)

一旦我这样做，我就不必处理它（它比什么更想要），我将探索这两个选项并发布详细信息。我只是把答案留在这里，以防有人想在你离开的地方接你。

另一件事是：

看到`sbt`获取中引用的库`build.sbt`，下载 jar 并将它们放在`~/.ivy2`目录中，如果您使用这些方法中的任何一种将引用从远程计算机更改为本地计算机，则需要确保相同的库是在本地的常春藤缓存上。所以，就在我写这篇文章的时候，另一个想法浮现在脑海：

3.  `sbt eclipse`or `play eclipse`or `activator eclipse`[it should be the same] 在本地环境和远程环境上，然后，将 .project 和 .classpath 文件从本地传输到远程，看看会发生什么（如果它不起作用，扫描它们用于可能需要更改的绝对路径和不正确路径）

对不起，未经证实的答案，我仍然认为总比没有答案好。

干杯

# c - 如何避免重新编译c文件？

> ID：11817607
> 
> 赞同：-2
> 
> 时间：2012-08-05T15:22:36.003
> 
> 标签：c, compilation, linker, include

我创建了一个库，我想在程序的另一部分使用它，但我不想将它包含在 make 文件中。有人可以指出我如何事先构建它并在编译时使用该`-l`命令链接它的正确方向。谢谢你。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-08-05T15:24:15.900

[http://crasseux.com/books/ctutorial/Building-a-library.html](http://crasseux.com/books/ctutorial/Building-a-library.html)

刚刚用谷歌搜索“构建 c 库”。

# ios - 选项卡，它应该是窗口还是视图？

> ID：11817610
> 
> 赞同：0
> 
> 时间：2012-08-05T15:23:00.690
> 
> 标签：ios, titanium

当你构建一个选项卡应用程序时，每个选项卡应该是一个视图还是一个窗口？

许多开发人员说您的应用程序应该只有一个具有多个视图的窗口。其他开发人员说每个选项卡都使用窗口。

哪个是正确的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:37:12.337

iOS 应用程序的一般规则是每个物理屏幕都需要一个 UIWindow 实例。在 iOS 添加更好的多屏支持，并且更新的硬件能够原生支持应用镜像之前，大多数应用都使用一个窗口，除非它明确支持第二个显示。

然后，您需要一个 UITabBarController 来显示 UIViewController 对象的实例。无论您使用什么 SDK 来编写应用程序，这条规则都应该适用，假设 Titan 将其类映射回它们的原生 Objective-C 对应项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:34:05.590

该窗口在普通应用程序中没有很多视图，它只是在显示时托管视图。我从来没有听说过在选项卡视图中使用窗口，我有几个使用 tabbarcontrollers 的应用程序，我总是使用 UIViewController 子类（或 UINavigationController 子类）和它的 nib 中的视图 - 一切都很好。

# iphone - SetProperty 和 AudioQueueStart 怎么样？

> ID：11817611
> 
> 赞同：1
> 
> 时间：2012-08-05T15:23:03.687
> 
> 标签：iphone, objective-c, ios, audio-recording, audiotoolbox

如何设置 audioqueuestart 的属性？我想录制设备的声音，有人告诉我使用“kAudioSessionCategory_PlayAndRecord”

```
UInt32 sessionCategory = kAudioSessionCategory_PlayAndRecord;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory); 
```

但是当应用我的简单代码时，它不起作用。我该如何设置属性？

```
#include <AudioToolbox/AudioQueue.h>
#include <AudioToolbox/AudioFile.h>
#include <AudioToolbox/AudioConverter.h>
#include <AudioToolbox/AudioToolbox.h>
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/stat.h>
#include <sys/select.h>

#define AUDIO_BUFFERS 3

typedef struct AQCallbackStruct
{
    AudioStreamBasicDescription mDataFormat;
    AudioQueueRef queue;
    AudioQueueBufferRef mBuffers[AUDIO_BUFFERS];
    AudioFileID outputFile;
    unsigned long frameSize;
    long long recPtr;
    int run;
} AQCallbackStruct;

static void AQInputCallback(
    void                                 *aqr,
    AudioQueueRef                        inQ,
    AudioQueueBufferRef                  inQB,
    const AudioTimeStamp                 *timestamp,
    unsigned long                        frameSize,
    const AudioStreamPacketDescription   *mDataFormat)
{
    AQCallbackStruct *aqc = (AQCallbackStruct *) aqr;

    /* Write data to file */
    if (AudioFileWritePackets (aqc->outputFile, false, inQB->mAudioDataByteSize,
    mDataFormat, aqc->recPtr, &frameSize, inQB->mAudioData) == noErr)
    {
    aqc->recPtr += frameSize;
    }

    /* Don't re-queue the sound buffers if we're supposed to stop recording */
    if (!aqc->run)
      return;

    AudioQueueEnqueueBuffer (aqc->queue, inQB, 0, NULL);
}

int main(int argc, char *argv[])
{
    AQCallbackStruct aqc;
    AudioFileTypeID fileFormat;
    CFURLRef filename;
    struct timeval tv;
    int i;

    if (argc < 3)
    {
    fprintf(stderr, "Syntax: %s [filename.aif] [seconds]", argv[0]);
    exit(EXIT_FAILURE);
    }

    //how ?
    //UInt32 sessionCategory = kAudioSessionCategory_PlayAndRecord;
    //AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);

    aqc.mDataFormat.mFormatID = kAudioFormatLinearPCM;//kAudioFormatLinearPCM;
    aqc.mDataFormat.mSampleRate = 44100.0;
    aqc.mDataFormat.mChannelsPerFrame = 2;
    aqc.mDataFormat.mBitsPerChannel = 16;
    aqc.mDataFormat.mBytesPerPacket =
    aqc.mDataFormat.mBytesPerFrame =
    aqc.mDataFormat.mChannelsPerFrame * sizeof (short int);
    aqc.mDataFormat.mFramesPerPacket = 1;
    aqc.mDataFormat.mFormatFlags =
        kLinearPCMFormatFlagIsBigEndian
      | kLinearPCMFormatFlagIsSignedInteger
      | kLinearPCMFormatFlagIsPacked;
    aqc.frameSize = 735;

    AudioQueueNewInput (&aqc.mDataFormat, AQInputCallback, &aqc, NULL,
    kCFRunLoopCommonModes, 0, &aqc.queue);

    /* Create output file */

    fileFormat = kAudioFileAIFFType;
    filename = CFURLCreateFromFileSystemRepresentation (NULL, (const UInt8*)argv[1], strlen (argv[1]), false);

    AudioFileCreateWithURL (
    filename,
    fileFormat,
    &aqc.mDataFormat,
    kAudioFileFlags_EraseFile,
    &aqc.outputFile
    );

    /* Initialize the recording buffers */

    for(i=0; i<AUDIO_BUFFERS; i++)
    {
    AudioQueueAllocateBuffer (aqc.queue, aqc.frameSize, &aqc.mBuffers[i]);
    AudioQueueEnqueueBuffer (aqc.queue, aqc.mBuffers[i], 0, NULL);
    //AudioQueueEnqueueBuffer (aqc.queue, aqc.mBuffers[i], 0x11, (const AudioStreamPacketDescription)"\x22");
    }

    aqc.recPtr = 0;
    aqc.run = 1;

    AudioQueueStart (aqc.queue, NULL);

    /* Hang around for a while while the recording takes place */

    tv.tv_sec = atof(argv[2]);
    tv.tv_usec = 0;
    select(0, NULL, NULL, NULL, &tv);

    /* Shut down recording */

    AudioQueueStop (aqc.queue, true);
    aqc.run = 0;

    AudioQueueDispose (aqc.queue, true);
    AudioFileClose (aqc.outputFile);

    exit(EXIT_SUCCESS);
} 
```

# c++ - 抛出异常与返回结果代码

> ID：11817612
> 
> 赞同：1
> 
> 时间：2012-08-05T15:23:15.673
> 
> 标签：c++, exception-handling, return-value, conventions

我正在创建一个库。我想做一个固定长度的字符串类。

```
#include <string>
#include <iostream>

#define OK 0
#define TOO_LONG 1
#define UNALLOWED_CHARACTERS 2

struct MyString {
    MyString(int l)
        : m_length(l) { }
    struct exception {
        exception(int t, MyString *p)
            : type(t), ptr(p) { }
        int type;
        MyString *ptr;
    };
    int set(const std::string& name);
    void set2(const std::string& name) throw(exception);

    std::string m_str;
    int m_length;
};

int MyString::set(const std::string& s)
{
    if(s.size() > 64) {
        return TOO_LONG;
    } else if(s.find('~') != std::string::npos) {
        return UNALLOWED_CHARACTERS;
    } else {
        m_str = s;
        return OK;
    }
}

void MyString::set2(const std::string& s) throw(exception)
{
    if(s.size() > m_length) {
        throw exception(TOO_LONG, this);
    } else if(s.find('~') != std::string::npos) {
        throw exception(UNALLOWED_CHARACTERS, this);
    } else {
        m_str = s;
    }
}

int main()
{
    using namespace std;
    //OPTION 1
    {
        MyString s1(10);
        MyString s2(10);
        int code;

        code = s1.set("abcdefghijX");
        switch(code) {
        case TOO_LONG:
            //handle <--
            break;
        case UNALLOWED_CHARACTERS:
            //handle
            break;
        default:
            //ok!
            break;
        }

        code = s2.set("abcdefghi~");
        switch(code) {
        case TOO_LONG:
            //handle
            break;
        case UNALLOWED_CHARACTERS:
            //handle <--
            break;
        default:
            //ok!
            break;
        }
    }

    //OPTION 2
    {
        MyString s1(10);
        MyString s2(10);
        try {
            s1.set2("abcdefghijX");
            s2.set2("abcdefghi~");

        } catch(MyString::exception &e) {
            cerr << "MyString::exception: ";
            auto p = e.ptr;
            if(p == &s1) cerr << "s1 ";
            else if(p == &s2) cerr << "s2 ";
            switch(e.type) {
                case TOO_LONG: cerr << "too long"; break;
                case UNALLOWED_CHARACTERS: cerr << "unallowed characters"; break;
            }
            cerr << endl;
        }

    }
} 
```

我不知道应该使用哪个版本的 MyString::set() 。在这种情况下，约定是什么？我在此示例中使用 STL 进行演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:34:01.877

通常，在 C++ 中，建议使用异常来指示在当前上下文中不可恢复的错误。但这取决于目的。您可能希望在嵌入式环境中不使用异常编译库（为了提高效率），那么您必须使用返回码。

使用返回码将 API 包装到使用异常的 API 很容易，但反之则不行。

**编辑：**

为什么不使用异常处理可能有意义的一些更多推理：

`try/catch`异常处理通常会引入有关需要放置在调用堆栈中的块的附加信息+ 一些性能损失来构建和检查这些信息。

另请参阅：[C++0x 异常的性能](https://stackoverflow.com/questions/1018800/performance-of-c0x-exceptions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:38:24.573

模仿标准库函数的行为是一个好主意，除非有特定的理由不这样做。顺便说一句，从 tr1 开始，STL 内置了一个固定长度的字符串类。让我们看看它做了什么。我手头的唯一示例实现是 Visual C++ 2010。

```
 std::tr1::array<int,5> arry;
arry[10] = 42; // Oopsie. There is no element 10. 

```

当编译并作为“调试”版本运行时，我得到一个**断言**失败。当为“Release”编译时，冒犯性的声明悄悄地做......什么都没有。它在不存在时就被优化了。好吧，也许这并不总是人们想要的。忘记我所说的模仿 STL，或者至少是微软的实现。意识列车继续……

我认为可以公平地说，如果程序试图设置超出范围的单元格，那是程序中的逻辑错误。在任务关键型软件中，最好有适当的代码来处理这种情况并从中恢复，同时努力确保它永远不会、永远不会发生。

所以**答案是，抛出 std::out_of_range 类型的异常。**

所以在那里。

# vb.net - 用 WinRar 压缩文件夹并移动到另一个目录 vb.net

> ID：11817616
> 
> 赞同：0
> 
> 时间：2012-08-05T15:23:47.357
> 
> 标签：vb.net, batch-file, winrar

无论如何将文件夹压缩为.rar并将其移动到另一个目录？我曾尝试从 vb.net 应用程序中执行此操作，并通过编写批处理文件来执行此操作，但我不确定文件的内容。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:06:06.027

```
Process.Start("""DESTINATION TO WINRAR""", "a -afrar -m5 -ed -pPASSWORDHERE -r -ep1  """ & WHERE YOU WANT TO SAVE THE FILE & """ ""DIRECTORY TO BACKUP*""") 
```

# php - 无法在字符串中回显带有 WP 值“the_title()”的刺痛 - 字符串更改的顺序

> ID：11817617
> 
> 赞同：1
> 
> 时间：2012-08-05T15:23:59.770
> 
> 标签：php, wordpress

我在回显包含多个值/变量的字符串时遇到问题。

这是PHP：

```
 echo '" alt="'.the_title ().'"height="500px" width="940px"data-caption="#'.$post->ID.'" />';
            echo '
            <span class=" orbit-caption" id="'.$post->ID.'"><a href="'.$permalink.'"><h3>'.the_title ().'</h3></a><br /><p>'.wp_trim_excerpt().'</p></span>
            '; 
```

这导致了这个（五个之一）：

```
<img src= "http://msc-media.co.uk/wp-content/uploads/2012/07/wpid-IMAG00421.jpgDay Thirteen &#8211; Undissapointing French castles" alt=""height="500px" width="940px"data-caption="#178" />Day Thirteen &#8211; Undissapointing French castles

<span class=" orbit-caption" id="178"><a href="http://msc-media.co.uk/?p=178"><h3></h3></a><br /><p>We finally decided to take advantage our free entry to Peyrepetouse, the pictures say it all really! Was super windy near the top, so much so that the falconry show in the castle lost a few birds, which we watched fight the wind to try to get back to their masters for over 30 minutes, [...]</p></span> 
```

问题在于 .the_title()。没有出现在 alt="" 标记中，但在与 img src 合并之前。第二个问题是，对于 span orbit-caption，the_title() 没有输出，因为它应该出现在标签之间。

让我知道我哪里出错了？- 或者我应该把这个字符串分成更多的 echo-s 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T15:26:34.557

尝试使用`get_the_title();`

**因为**

`the_title()`做类似的事情，并且不返回字符串。

```
function the_title() { echo get_the_title(); } 
```

所以它在您的回声呼叫之前调用。

# objective-c - 为什么基于文档的应用程序 IBActions 中的 IBOutlets 为零？

> ID：11817620
> 
> 赞同：2
> 
> 时间：2012-08-05T15:24:07.243
> 
> 标签：objective-c, interface-builder, osx-lion, automatic-ref-counting

如果我执行以下操作：
- 创建一个基于文档的应用程序项目；
- 创建一个继承自 NSView 的类，我称之为 CustomView；
- 将视图拖入 document.xib 并将其类设置为 CustomView；
- 将视图与文档连接起来，使用我称之为 customView 的插座；
- 在文档中添加一个 IBAction，我将其命名为 Foo；
- 将 mainmenu.xib 文件中的此 IBAction 连接到菜单项；

然后在 IBAction 内所有的出口都为零：

```
- (IBAction) Foo: (id) sender
{
    NSLog(@"%p",customView);
} 
```

它打印 0x0。
所有 IBOutlets 都会出现此问题，并且仅当 IBAction 与菜单项链接时。如果我尝试打印实例变量，则它们具有正确的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:44:52.320

不要在 中创建新`Document`对象`MainMenu.xib`，因为所做的只是创建一个与您正在打开`Document`的实际 s 没有任何关系的全新对象`Document`（因此， 的 nil 值`customView`）。

相反，要使用 获取活动`Document`对象`customView`，请将带有您指定的菜单项连接`IBAction`到-如果没有其他响应者处理它，`First Responder`AppKit 会自动将操作消息沿链向上传递到活动子类。`Document`也许阅读事件处理文档中的“操作消息”：（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html#//apple_ref/doc/uid/10000060i-CH3-SW7)）。

# java - RMI“实现远程的接口”

> ID：11817629
> 
> 赞同：0
> 
> 时间：2012-08-05T15:24:42.380
> 
> 标签：java

在 Eclipse 中尝试 RMI。我创建了 2 个名为 Server 和 Client 的包

我在服务器包中创建了扩展“远程”的接口。将此文件复制到客户端

但是，这样做之后，当我运行客户端代码时，它给出了一个错误说“ClassCastException”无法将proxy01转换为......

但是，当我编译 Server 包中的接口文件并将接口的 .class 文件复制到客户端的 bin 文件夹中时，它开始工作了

为什么接口的.class文件需要相同？（客户端和服务器包中的远程接口）

# php - 在“foreach ($this->items as $item)”中打乱顺序

> ID：11817634
> 
> 赞同：0
> 
> 时间：2012-08-05T15:25:10.700
> 
> 标签：php, rss, shuffle

我一直在尝试随机化我网站的 rss 提要输出项目的顺序，但还没有任何运气。这是创建实际 xml 的代码部分。

```
class RSSFeed {    
        private $items;

        public function __construct() {
            $this->items = array();   }

        public function addItem($item) {
            $this->items[] = $item;}

        public function dumpXML() {
                echo '<?xml version="1.0" encoding="UTF-8"?>', PHP_EOL;
                echo '<rss version="2.0">', PHP_EOL;
                echo '<channel>', PHP_EOL;
                foreach ($this->items as $item) {
                    echo '<item>', PHP_EOL;
                    echo '<title><![CDATA[', $item['title'], ']]></title>', PHP_EOL;
                    echo '<link>', $item['link'], '</link>', PHP_EOL;
                    echo '<guid>', $item['link'], '</guid>', PHP_EOL;
                    echo $item['description'], ']]>';
                    echo '</description>', PHP_EOL;
                    echo '</item>', PHP_EOL;
                }
                echo '</channel>', PHP_EOL;
                echo '</rss>', PHP_EOL; 
```

我尝试使用 shuffle($items)，但提要停止工作。我还尝试使用相同的项目创建一个新数组并对其进行随机播放，但结果是相同的。谁能帮我？自从我写了一些代码以来已经很长时间了，以至于我忘记了重要的东西...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T15:29:10.220

在输出结果之前，您可以执行以下两项操作之一：

```
shuffle($this->items); 
```

这会破坏项目的原始顺序。如果该顺序很重要，请尝试以下操作：

```
$tmp = $this->items;
shuffle($tmp);
foreach($tmp... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:32:49.883

您不需要对数组本身进行洗牌，只需对项目的顺序进行洗牌：

```
$keys = array_keys($this->items);
shuffle($keys);
foreach ($keys as $key) {
    $item = $this->items[$key];
    ... 
} 
```

请参阅[`array_keys`^(*Docs*)](http://de.php.net/array_keys)和[`shuffle`^(*Docs*)](http://de.php.net/shuffle)函数。

为了进一步改进，创建一个按原样输出数组的函数：

```
...
private function echoRSS(array $items) {
            echo '<?xml version="1.0" encoding="UTF-8"?>', PHP_EOL;
            echo '<rss version="2.0">', PHP_EOL;
            echo '<channel>', PHP_EOL;
            foreach ($items as $item) {
                ...
            }
            ... 
```

然后，您可以更轻松地做任何您想做的事情，例如通过调用该函数：

```
public function dumpXML() {
    $items = $this->items;
    shuffle($items);
    $this->echoRSS($items);
} 
```

希望这会有所帮助。

# php - 如何在此 php 代码中定位图像？

> ID：11817635
> 
> 赞同：0
> 
> 时间：2012-08-05T15:25:17.467
> 
> 标签：php, css, image

我有我用来显示随机图像的代码。但图片显示在网站的左上角。我希望能够根据需要定位图像。我必须对上述代码顺序进行哪些更改。这是代码——

```
/* 
 * Name your images 1.jpg, 2.jpg etc. 
 * 
 * Add this line to your page where you want the images to   * appear: <?php include"randomimage.php"; ?> 
 */  

// Change this to the total number of images in the folder 
$total = "2"; 

// Change to the type of files to use eg. .jpg or .gif 
$file_type = ".jpg"; 

// Change to the location of the folder containing the images 
$image_folder = "sample.url.com"; 

// You do not need to edit below this line 

$start = "1"; 

$random = mt_rand($start, $total); 

$image_name = $random . $file_type; 

echo "<img src=\"$image_folder/$image_name\" alt=\"$image_name\ />"; 

?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:32:42.217

这将是一个 CSS 解决方案，PHP 无法定位图像。使用 CSS，您可以以多种不同的方式定位事物：

1.  使用边距（例如，边距：*右上角左下角*；）
2.  使用填充（例如，填充：*右上左下；*）
3.  使用浮点数（例如，float: *right or left;*）
4.  使用位置（例如，位置：*绝对或相对；*然后使用顶部/左侧和底部/右侧来定位）。

例如，您可以使用边距将图像居中到页面的中间。将此添加到页面顶部：

```
<style type="text/css"> /*Initializing CSS code*/
img { margin: 0 auto; }
</style> 
```

或者您可以使用浮动将图像浮动到页面的最右侧，假设父对象的宽度为 100%：

```
<style type="text/css"> /*Initializing CSS code*/
img { float: right; }
</style> 
```

或者使用绝对位置将其定位在右下角：

```
<style type="text/css"> /*Initializing CSS code*/
img {
    position: absolute;
    right: 0px;
    bottom: 0px;
}
</style> 
```

您可能需要阅读 CSS 教程，以了解所有定位技术之间的差异以及何时使用它们以及在哪里使用它们时出现的小技巧、烦恼和事件。

[http://www.google.com/search?q=css+tutorial](http://www.google.com/search?q=css+tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:28:31.833

您需要修改您的 html 代码。

在您的情况下，您需要更改此字符串的值：

```
echo "<img src=\"$image_folder/$image_name\" alt=\"$image_name\ />"; 
```

像这样：

```
echo "<img src=\"$image_folder/$image_name\" alt=\"$image_name\ style=\"Your css style goes here\"/>"; 
```

在 Stack Overflow 提问之前，请先了解一些基础知识。

[http://www.w3.org/Style/CSS/learning.en.html](http://www.w3.org/Style/CSS/learning.en.html) CSS 指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T17:15:02.900

虽然 CSS 的答案很好，但并不是每个项目都需要或想要 CSS。给定您的代码，此替代解决方案在 PHP 标记中可以正常工作：

（我必须在第一个 < 之后放置一个空格，否则它不会在此页面上正确显示。只需从每一行中删除该空格即可使其正常工作）

右对齐：

```
< right>  

< img src=\"$image_folder/$image_name\" alt=\"$image_name\ />";

< /right> 
```

居中对齐：

```
< center>  

< img src=\"$image_folder/$image_name\" alt=\"$image_name\ />";

< /center> 
```

左对齐：

```
< left>  

< img src=\"$image_folder/$image_name\" alt=\"$image_name\ />";

< /left> 
```

这在技术上是一个 HTML 解决方案，但由于它在 PHP 标记中工作，您可以使用它来有效地定位您喜欢的任何内容。

# java - BufferedWriter 不刷新

> ID：11817636
> 
> 赞同：1
> 
> 时间：2012-08-05T15:25:40.120
> 
> 标签：java, http, sockets, client-server, printwriter

我有以下问题....

```
 try 
            {
                clientInput = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
                clientOutput = new BufferedWriter(new PrintWriter(clientSocket.getOutputStream()));

                while(true)
                { 
                    String clientRequest = "";
                    String tempStr = clientInput.readLine();

                    while(tempStr != null && !tempStr.equals("null"))
                    {
                        System.out.println(tempStr);
                        clientRequest += tempStr + " ";
                        tempStr = clientInput.readLine();
                    }

                    //Parse Request
                    ArrayList<String> tokenArray = parseRequest(clientRequest);

                    Calendar c = Calendar.getInstance();

                    switch(tokenArray.get(0))
                    {
                        case "GET": 
                        {
                            clientOutput.write("HTTP/1.1 200 OK\r\n");
                            clientOutput.write("Date: " + c.getDisplayName(0, Calendar.LONG, Locale.UK).toString() + "\r\n");
                            clientOutput.write("Server: Java HTTP Server v1.0\r\n");
                            clientOutput.flush();
                            break;
                            //Write File
                        }
                        default: 
                        {
                            clientOutput.write("500\r\n");
                            clientOutput.flush();
                        }
                    }
                } 
            } 
```

每件事都完全正常，直到上`clientOutput.write("HTTP.......`线，客户只是一直等待和等待......我试图在每次连续写入后刷新，但什么也没有......但这是奇怪的部分 - 如果我在代码进入while循环之前写入和刷新，`case "GET":`完美地写入作品......即

代码确实一直执行到

```
 clientOutput.flush();
                            break;
                            //Write File 
```

.

```
 try 
             {
                clientInput = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
                clientOutput = new BufferedWriter(new PrintWriter(clientSocket.getOutputStream()));

                clientOutput.write("HTTP/1.1 200 OK\r\n");
                clientOutput.flush();

                while(true)
                { 
                    String clientRequest = "";
                    String tempStr = clientInput.readLine();

                    while(tempStr != null && !tempStr.equals("null"))
                    {
                        System.out.println(tempStr);
                        clientRequest += tempStr + " ";
                        tempStr = clientInput.readLine();
                    }

                    //Parse Request
                    ArrayList<String> tokenArray = parseRequest(clientRequest);

                    Calendar c = Calendar.getInstance();

                    switch(tokenArray.get(0))
                    {
                        case "GET": 
                        {
                            clientOutput.write("HTTP/1.1 200 OK\r\n");
                            clientOutput.write("Date: " + c.getDisplayName(0, Calendar.LONG, Locale.UK).toString() + "\r\n");
                            clientOutput.write("Server: Java HTTP Server v1.0\r\n");
                            clientOutput.flush();
                            break;
                            //Write File
                        } 
```

这是客户端的代码

```
 Socket s = new Socket("localhost", 1337);

        BufferedReader fromServer = new BufferedReader(new InputStreamReader(s.getInputStream()));
        BufferedWriter toServer = new BufferedWriter(new PrintWriter(s.getOutputStream()));

        toServer.write("GET index.html HTTP/1.1\r\n");
        toServer.write("HOST: 127.0.0.1\r\n");
        toServer.write("Connection: close\r\n");
        toServer.write("\r\n");
        toServer.write("null\r\n");
        toServer.flush();   

        while(true)
        {
            String ss = fromServer.readLine();
            if(ss != null && !ss.equals("null"))
                System.out.println(ss);
        } 
```

服务器类：Strydom_A_201103578_P03

```
public class Strydom_A_201103578_P03
{
    Thread[] threadArray = new Thread[5];
    int ClientCount = 0;

    public Strydom_A_201103578_P03() throws ClientSizeExceededException 
    {
        ServerSocket httpServer = null;
    try 
    {
        httpServer = new ServerSocket(1337);
    } 
    catch (IOException ex) 
    {
        Logger.getLogger(Strydom_A_201103578_P03.class.getName()).log(Level.SEVERE, null, ex);
    }

    while(true)
    {
        try
        {
            //Wait for connection

            Socket clientSocket = httpServer.accept();

            if(ClientCount < 5)
            {
                threadArray[ClientCount] = new Thread(new clientHandler(clientSocket));
                threadArray[ClientCount].start();
                ClientCount++;
            }
            else
            {
                throw new ClientSizeExceededException();
            }

        }
        catch(IOException ex)
        {

        }
        finally
        {

        }
    }
}

class clientHandler implements Runnable
{
    Socket clientSocket;
    public clientHandler(Socket clientSocket) 
    {
        this.clientSocket = clientSocket;
    }

    @Override
    public void run() 
    {
        BufferedReader clientInput = null;
        BufferedWriter clientOutput = null;

            try 
            {
                clientInput = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
                clientOutput = new BufferedWriter(new PrintWriter(clientSocket.getOutputStream()));

                clientOutput.write(" ");
                clientOutput.flush();

                while(true)
                { 
                    String clientRequest = "";
                    String tempStr = clientInput.readLine();

                    while(tempStr != null && !tempStr.equals("null"))
                    {
                        System.out.println(tempStr);
                        clientRequest += tempStr + " ";
                        tempStr = clientInput.readLine();
                    }

                    //Parse Request
                    ArrayList<String> tokenArray = parseRequest(clientRequest);

                    Calendar c = Calendar.getInstance();

                    switch(tokenArray.get(0))
                    {
                        case "GET": 
                        {
                            clientOutput.write("HTTP/1.1 200 OK\r\n");
                            clientOutput.write("Date: " + c.getDisplayName(0, Calendar.LONG, Locale.UK).toString() + "\r\n");
                            clientOutput.write("Server: Java HTTP Server v1.0\r\n");
                            clientOutput.flush();
                            break;
                            //Write File
                        }
                        default: 
                        {
                            clientOutput.write("500\r\n");
                            clientOutput.flush();
                        }
                    }
                } 
            }
            catch (IOException ex) 
            {
                Logger.getLogger(Strydom_A_201103578_P03.class.getName()).log(Level.SEVERE, null, ex);
            } 
            finally 
            {
                try 
                {
                    clientInput.close();
                    clientOutput.close();
                } 
                catch (IOException ex) 
                {
                    Logger.getLogger(Strydom_A_201103578_P03.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
    }

    private ArrayList<String> parseRequest(String tempStr) 
    {
        StringTokenizer httpTokens = new StringTokenizer(tempStr, " ");
        ArrayList<String> tokens = new ArrayList<>();

        while(httpTokens.hasMoreTokens())
            tokens.add(httpTokens.nextToken());

        return tokens;
    }
}

public static void main(String[] args) throws ClientSizeExceededException 
{
    new Strydom_A_201103578_P03();
} 
```

}

```
public class TestClient 
{

public TestClient() 
{
    try 
    {
        Socket s = new Socket("localhost", 1337);

        BufferedReader fromServer = new BufferedReader(new InputStreamReader(s.getInputStream()));
        BufferedWriter toServer = new BufferedWriter(new PrintWriter(s.getOutputStream()));

        toServer.write("GET index.html HTTP/1.1\r\n");
        toServer.write("HOST: 127.0.0.1\r\n");
        toServer.write("Connection: close\r\n");
        toServer.write("\r\n");
        toServer.write("null\r\n");
        toServer.flush();   

        while(true)
        {
            String ss = fromServer.readLine();
            if(ss != null && !ss.equals("null"))
                System.out.println(ss);
        }

    } 
    catch (UnknownHostException ex) 
    {
        Logger.getLogger(TestClient.class.getName()).log(Level.SEVERE, null, ex);
    } 
    catch (IOException ex) 
    {
        Logger.getLogger(TestClient.class.getName()).log(Level.SEVERE, null, ex);
    }

}

public static void main(String[] args) 
{
    new TestClient();
} 
```

}

客户端类：TestClient

创建一个项目（或 2）并运行文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T22:50:15.493

这里的问题是`PrintWriter`. 它吞没了异常。将其更改为`OutputStreamWriter`. 然后你会看到任何被吞没的异常。一般来说，你应该避免`PrintWriters`和`PrintOutputStreams`通过网络。他们吞下您需要了解的异常情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:34:49.693

您需要更改内部 while 循环以查找客户端请求的结尾：

```
while(tempStr != null && !tempStr.equals("null")) 
```

到：

```
while(tempStr != null && !tempStr.equals("null") && !tempStr.equals("")) 
```

客户端在发送请求后不会断开连接（导致 null）。它会给你一个空行来指示它的请求结束。

立即返回响应标头有效的原因是什么？也许客户端只是读取 200 并（最终）断开连接？因此，当您阅读客户的请求时，它会结束并且您最终会得到一个空值。

* * *

编辑：

所以运行你的代码，它对我来说很好。客户端和服务器都在发送和接收请求和响应。但是，服务器永远不会断开连接（客户端包含一个`Connection: close`标头）并且客户端会继续阻止`readLine()`. 不出所料，当我在服务器端建立连接后立即包含`write()`and时，除了我在客户端看到两次之外，没有任何变化。也许你需要做的就是在你的?`flush()``HTTP/1.1 200 OK``clientSocket``finally{}``try/catch{}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T18:12:26.197

因此，为了让我现在结束的痛苦更加痛苦——这就是我最终所做的……

我将服务器和客户端的阅读器都从.... 更改`BufferedReader/Writer`为`DataInputstream/OutputStream`现在完美运行 - ！谢谢大家

艾登

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-05T15:53:10.237

只需这样做，它就会起作用.......

添加`true` **为第二个**参数`PrintWriter`

`clientOutput = new BufferedWriter(new PrintWriter(clientSocket.getOutputStream(), true));`

# c# - Selenium Webdriver，打开驱动程序后C#输出到控制台

> ID：11817640
> 
> 赞同：1
> 
> 时间：2012-08-05T15:26:07.713
> 
> 标签：c#, .net, selenium

嗨，我第一次使用 Selenium，我正在执行以下代码。它运行良好，但在打开 Firefox 后，它不会输出到控制台，因为代码表明它应该在代码中的所有步骤完成后完成所有操作。

所以我的问题是如何在实际运行步骤时将该文本输出到控制台？

```
 var ProxyIP = "xxx.xxx.xx.xxx:80";

        RtbConsole.AppendText("Setting Up Firefox\n");

        //Firefox driver + proxy setup
        FirefoxProfile profile = new FirefoxProfile();
        String PROXY = ProxyIP;
        OpenQA.Selenium.Proxy proxy = new OpenQA.Selenium.Proxy();
        proxy.HttpProxy = PROXY;
        proxy.FtpProxy = PROXY;
        proxy.SslProxy = PROXY;
        profile.SetProxyPreferences(proxy);

        RtbConsole.AppendText("Launching Firefox\n");
        FirefoxDriver driver = new FirefoxDriver(profile);

        RtbConsole.AppendText("Navigating to http://whatsmyip.net/ \n");
        driver.Navigate().GoToUrl("http://whatsmyip.net/");

        IWebElement ip = driver.FindElement(By.XPath("/html/body/div/div/h1/span"));
        var myIP = ip.Text;

        RtbConsole.AppendText("Checking IP for Proxy\n");
        if (ProxyIP == myIP + ":80") {
            RtbConsole.AppendText("Proxy Test: Success\n");
        } else {
            RtbConsole.AppendText("Proxy Test: Failed\n");
        }

        //Close the browser
        driver.Quit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:12:21.257

我是这个网站的新手，所以如果这没有帮助，我深表歉意。但是，当我在 C# 中编写 selenium(webdriver) 测试时，我通常不使用 append 命令。尝试以不同的方式接近控制台，例如

```
Console.WriteLine("Text you wish to be outputted to the Console"); 
//OR MAYBE 
Console.Write("Text you wish to be outputted to the Console"); 
```

此外，我不确定同时执行两个命令实际上是否可行，但是，您可以使输出取决于其他选择的代码执行、使用 if 语句或尝试 catch 等。

希望这会有所帮助！干杯!

# javascript - 根据另一个下拉列表中的选择填充一个下拉列表，然后重定向

> ID：11817641
> 
> 赞同：3
> 
> 时间：2012-08-05T15:26:16.933
> 
> 标签：javascript, menu

我正在尝试构建一个两层下拉菜单，其中第二个下拉菜单填充第二个。我在网站上找到了很多示例，但我希望我的菜单在选择第二个菜单后重定向到一个页面，并且无法弄清楚这一点。

我对 JS 不太了解，所以请多多包涵。

下面的代码是另一个帖子的示例：

```
<script type="text/javascript">
function configureDropDownLists(ddl1,ddl2) {
    var colours = new Array('Black', 'White', 'Blue');
    var shapes = new Array('Square', 'Circle', 'Triangle');
    var names = new Array('John', 'David', 'Sarah');

    switch (ddl1.value) {
        case 'Colours':
            document.getElementById(ddl2).options.length = 0;
            for (i = 0; i < colours.length; i++) {
                createOption(document.getElementById(ddl2), colours[i], colours[i]);
            }
            break;
        case 'Shapes':
            document.getElementById(ddl2).options.length = 0; 
        for (i = 0; i < colours.length; i++) {
            createOption(document.getElementById(ddl2), shapes[i], shapes[i]);
            }
            break;
        case 'Names':
            document.getElementById(ddl2).options.length = 0;
            for (i = 0; i < colours.length; i++) {
                createOption(document.getElementById(ddl2), names[i], names[i]);
            }
            break;
            default:
                document.getElementById(ddl2).options.length = 0;
            break;
    }

}

function createOption(ddl, text, value) {
    var opt = document.createElement('option');
    opt.value = value;
    opt.text = text;
    ddl.options.add(opt);
} 
```

然后调用它

```
<select id="ddl" onchange="configureDropDownLists(this,'ddl2')">
<option value=""></option>
<option value="Colours">Colours</option>
<option value="Shapes">Shapes</option>
<option value="Names">Names</option>
</select>
<select id="ddl2">
</select> 
```

这一切都很好，但我希望页面在该人在第二个下拉列表中进行选择后重定向到网站上的某个位置。

任何人都可以帮助如何调整代码以实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:32:19.430

> 我希望该人在第二个下拉列表中进行选择后将页面重定向到网站上的某个位置。

挂钩`change`第二个元素的事件`<select>`，然后从那里提交表单：

```
<select id="ddl2" onChange="redirect(this)">
</select>

function redirect(select) {
    // The simplest way: call submit on the form element the select belongs to:
    select.form.submit();
} 
```

但是您也可以在提交之前动态更改表单的目标属性，或者只是[导航离开](https://stackoverflow.com/q/1226714/1048572)。

更新：要使提交工作，您当然需要为您的选择提供一些`name`属性，例如：

```
<form action="/router.php" method="GET">
    <select name="first" onchange="configureDropDownLists(this,'ddl2')">
        ...
    </select>
    <select name="second" id="ddl2" onChange="redirect(this)">
    </select>
</form> 
```

* * *

尽管您的`configureDropDownLists`函数可能有效，但您可以通过不使用 switch 语句，而是使用对象字面量来改进它，并且如果在对象中找到选项值，则只需在执行相同操作之前选择选项值数组：

```
function configureDropDownLists(firstSelect, secondId) {
    var map = {
        "colours": ['Black', 'White', 'Blue'],
        "shapes": ['Square', 'Circle', 'Triangle'],
        "names": ['John', 'David', 'Sarah']
    };

    var value = firstSelect.value.toLowerCase();
    var optionsArr = map[value];

    var secondSelect = document.getElementById(secondId);
    secondSelect.options.length = 0; // remove all options
    if (optionsArr) {
         for (var i=0; i<optionsArr.length; i++) {
              createOption(secondSelect, optionsArr[i], optionsArr[i]);
         }
    }
} 
```

# c# - 从 Datatable 获取记录的最佳方法是什么？

> ID：11817646
> 
> 赞同：0
> 
> 时间：2012-08-05T15:26:36.797
> 
> 标签：c#, database, vb.net, multirec

我有一个包含大约的表。150000 条记录。这可能是改变..我的意思是更多..我不知道。这是一个访问数据库（这是一项义务）我使用.net framework 3.0

vb.net 或 c# 没关系..

我用了那个代码

```
 con = New OleDbConnection("provider=microsoft.jet.oledb.4.0; data source=db.mdb")
    cmd = New OleDbCommand("Select * from TAPU_GEMLIK", con)
    da = New OleDbDataAdapter(cmd)

    ds = New DataSet()
    da.Fill(ds)
    DgKayitlar.DataSource = ds.Tables(0) 
```

好吧，我的程序将对记录应用一些过滤器。

我有两个问题

1-

```
 da.Fill(ds)
    DgKayitlar.DataSource = ds.Tables(0) 
```

在这里，程序等待一段时间。如果记录增加，它将等待很多。我可以用它做什么？我以为我可以使用线程，但我不确定。

2-每个过滤器查询数据库。过滤器只是一个条件，例如

其中 Name=..... 和 Surname... 等。

这是查询数据库的好方法还是我必须从gridview获取查询结果？哪个可能更快或更好？

编辑：我无法分页。因为程序已经从数据库中搜索每条记录。首先，我需要从数据库中获取所有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:57:25.790

如果您必须一次性从数据库中加载所有数据，那么我可以建议从您的查询中缓存结果集（当然优化数据库除外），因为它会减少您的结果集加载时间。但这仅在数据不经常更改的情况下才有优势。此外，如果所有数据都已经呈现到页面上，那么我认为再次查询数据库进行搜索是没有意义的。使用网格的搜索选项会更好更快。但是我必须告诉你，在页面上加载大量数据会耗尽浏览器的生命，你可能会面临诸如无响应之类的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:35:29.793

如果过滤器很简单 `where Name=..... and Surname... etc.`

我建议您选择选项 2，但在您拥有的 sql 查询中进行过滤`Select * from TAPU_GEMLIK`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:25:22.637

您需要了解有关如何使用 SQL 查询数据的更多信息。

例如，您是否需要数据库中的所有列？或者你只需​​要一对。如果您只需要 6 个结果，请使用[TOP 命令](http://msdn.microsoft.com/en-us/library/ms189463.aspx)，例如“Select Top 6”。

您选择的列/行越多，需要传输的数据就越多。移动的数据越多，查询出现的速度就越慢。

在服务器上进行过滤。如果您的数据将始终在特定列上进行过滤，请使用[Index](http://support.microsoft.com/kb/304272)。索引将大大提高过滤性能。

高效查询的关键是过滤索引列并只返回您需要的内容。

# cocoa - 多次调用 updateTrackingAreas 方法

> ID：11817653
> 
> 赞同：4
> 
> 时间：2012-08-05T15:27:30.783
> 
> 标签：cocoa

在我的项目中，有一个带有**NSButton**和**NSView**的窗口（它是其他视图的容器）。单击按钮将更改容器的子视图，如下所示：

```
[containerView replaceSubview:displayedSubview with:nextView]; 
```

添加到 containerView 的第一个子视图有一个**基于视图的 TableView**填充（*使用绑定*）与**NSTableCellView 子类**的对象。

这个子类**NSTableCellView**有一个跟踪区域，当鼠标进入/离开单元格时，它可以让我显示/隐藏一个按钮。

方法**mouseEntered:**和**mouseExited:**分别使用 setAlphaValue: 方法显示和隐藏 _buttonInsideTableCellView。

跟踪区域在 init 方法中创建如下：

```
NSTrackingAreaOptions options = NSTrackingMouseEnteredAndExited|NSTrackingActiveInActiveApp;
_trackingArea  = [[NSTrackingArea alloc] initWithRect:[self bounds] options:options owner:self userInfo:nil]; 
```

**updateTrackingAreas**方法很简单：

```
- (void)updateTrackingAreas
{
    [_buttonInsideTableCellView setAlphaValue:0.0];

    [self removeTrackingArea:_trackingArea];

    NSTrackingAreaOptions options = NSTrackingMouseEnteredAndExited|NSTrackingActiveInActiveApp;
    _trackingArea  = [[NSTrackingArea alloc] initWithRect:[self bounds] options:options owner:self userInfo:nil];

    [self addTrackingArea:_trackingArea];

    [super updateTrackingAreas];
} 
```

## 问题

当程序启动时，一切都按预期工作：如果鼠标悬停在单元格上，则显示其按钮。

但是在我将containerView的子视图更改为nextView并返回第一个视图后，当子视图被替换时，当应用程序变为活动状态（？？？）时，方法updateTrackingAreas开始被调用多次（2次或更多），当鼠标进入或离开 trackingArea (???)。

## 调用栈

**如果我在updateTrackingAreas**中放置断点，这是调用堆栈：

```
#0  0x0000000100019e33 in -[CustomTableCellView updateTrackingAreas]
#1  0x00007fff8a1b24e4 in -[NSView(NSInternal) _updateTrackingAreas] ()
#2  0x00007fff894740b6 in __NSArrayEnumerate ()
#3  0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#4  0x00007fff894740b6 in __NSArrayEnumerate ()
#5  0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#6  0x00007fff894740b6 in __NSArrayEnumerate ()
#7  0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#8  0x00007fff894740b6 in __NSArrayEnumerate ()
#9  0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#10 0x00007fff8a1b36bd in -[NSScrollView _updateTrackingAreas] ()
#11 0x00007fff894740b6 in __NSArrayEnumerate ()
#12 0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#13 0x00007fff894740b6 in __NSArrayEnumerate ()
#14 0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#15 0x00007fff894740b6 in __NSArrayEnumerate ()
#16 0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#17 0x00007fff894740b6 in __NSArrayEnumerate ()
#18 0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#19 0x00007fff894740b6 in __NSArrayEnumerate ()
#20 0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#21 0x00007fff894740b6 in __NSArrayEnumerate ()
#22 0x00007fff8a1b2960 in -[NSView(NSInternal) _updateTrackingAreas] ()
#23 0x00007fff8a1b237c in _handleInvalidCursorRectsNote ()
#24 0x00007fff8a6ac851 in __35-[NSWindow _postInvalidCursorRects]_block_invoke_02794 ()
#25 0x00007fff894420c7 in __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ ()
#26 0x00007fff89442031 in __CFRunLoopDoObservers ()
#27 0x00007fff8941d4a8 in __CFRunLoopRun ()
#28 0x00007fff8941cdd2 in CFRunLoopRunSpecific ()
#29 0x00007fff89a72774 in RunCurrentEventLoopInMode ()
#30 0x00007fff89a72454 in ReceiveNextEventCommon ()
#31 0x00007fff89a723a3 in BlockUntilNextEventMatchingListInMode ()
#32 0x00007fff8a0d7fa3 in _DPSNextEvent ()
#33 0x00007fff8a0d7862 in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()
#34 0x00007fff8a0cec03 in -[NSApplication run] ()
#35 0x00007fff8a073656 in NSApplicationMain ()
#36 0x00000001000013a2 in main
#37 0x0000000100001374 in start () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:11:03.947

目前尚不清楚这里是否存在问题。updateTrackingAreas 方法旨在由 AppKit 在视图几何形状发生变化或需要您重新计算跟踪区域时多次调用。例如，在动画的情况下，当边界随时间快速变化时，您的方法将在每个运行循环中快速连续地调用。

仅供参考，更改任何视图的状态可能不是一个好主意，或者除了在该方法中添加或删除跟踪区域之外真正做任何事情。在这里，您正在更改按钮的 alpha 状态。这可能最好放在其他地方。

# java - Java Play 2 身份验证-> mongoDB

> ID：11817660
> 
> 赞同：1
> 
> 时间：2012-08-05T15:28:10.817
> 
> 标签：java, authentication, mongodb, playframework-2.0, morphia

今天我偶然发现了[https://github.com/joscha/play-authenticate](https://github.com/joscha/play-authenticate)。我看起来非常棒。对我来说，很难理解发生了什么，我可能需要几天时间。

现在这个插件是为 sql 编写的，但是我们想使用 nosql (mongoDB)。

**但在我开始之前，我想问您是否可以简要概述一下我必须更改的内容？**

我之所以问是因为我需要进行很多更改，而且我不想在一开始就犯一个大错误，只是为了看到我只需要更改配置文件。

* * *

例子：

我会这样开始：

```
private static ExpressionList<User> getEmailUserFind(final String email) {
    return find.where().eq("active", true).eq("email", email);
} 
```

我会用 Morphia 替换这段代码

例如

```
//pseudo code
private static ExpressionList<User> getEmailUserFind(final String email) {
        return datastore.createQuery(Some.class).field("active").equal("true").field("email").equal(email)...

    } 
```

# nginx - Nginx 和原始标头

> ID：11817662
> 
> 赞同：3
> 
> 时间：2012-08-05T15:28:18.037
> 
> 标签：nginx

我正在使用 Play Framework 开发一个 web api。我使用 nginx 作为反向代理。由于 api 将被嵌入式系统使用，因此返回的信息应尽可能简单。

生产模式下的 Play Framework 异常返回：（RAW HTTP 取自 Fiddler）

```
HTTP/1.1 200 OK
Content-Type: text/plain; charset=utf-8
Cache-Control: no-cache
Content-Length: 14

aTqYu1mxQPy|10 
```

但是，当我在用户和 api 之间放置 nginx 时，响应变成了这样：

```
HTTP/1.1 200 OK
Server: nginx/1.2.0
Date: Sun, 05 Aug 2012 15:08:31 GMT
Content-Type: text/plain; charset=utf-8
Content-Length: 14
Connection: close
Cache-Control: no-cache

aTqYu1mxQPy|10 
```

我根本不需要**Server**、**Date**、**Connection**标头。它们由 nginx 自动添加。（或者是因为我在之前的实验中弄乱了我的 nginx 配置）

有没有办法告诉 ngnix 不要告诉任何标题并原封不动地传递它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:45:02.493

您可以使用 nginx 的第三方模块修改（和删除）任何标头，[https://github.com/agentzh/headers-more-nginx-module](https://github.com/agentzh/headers-more-nginx-module)
但根据 RFC 2616，在 HTTP 协议中，您只能删除**服务器**标头.
**Connection: close** - 用于关闭持久 (HTTP/1.1) 连接。在所有请求中，必须在 HTTP/1.1 中显示
**日期标头，但以下情况除外：**

```
 1\. If the response status code is 100 (Continue) or 101 (Switching
     Protocols), the response MAY include a Date header field, at
     the server's option.

  2\. If the response status code conveys a server error, e.g. 500
     (Internal Server Error) or 503 (Service Unavailable), and it is
     inconvenient or impossible to generate a valid Date.

  3\. If the server does not have a clock that can provide a
     reasonable approximation of the current time, its responses
     MUST NOT include a Date header field 
```

据我所知，nginx 严格遵循 RFC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-08T02:21:23.757

这是 nginx 源删除“连接”标头的补丁：http: [//mailman.nginx.org/pipermail/nginx-devel/2017-February/009440.html](http://mailman.nginx.org/pipermail/nginx-devel/2017-February/009440.html)

```
diff -r d2b2ff157da5 -r 25129d5509b8 src/http/ngx_http_header_filter_module.c
--- a/src/http/ngx_http_header_filter_module.c  Tue Jan 31 21:19:58 2017 +0300
+++ b/src/http/ngx_http_header_filter_module.c  Thu Feb 02 02:14:06 2017 +0800
@@ -389,7 +389,9 @@
         }

     } else {
-        len += sizeof("Connection: close" CRLF) - 1;
+        if (clcf->keepalive_header != 0) {
+            len += sizeof("Connection: close" CRLF) - 1;
+        }
     }

 #if (NGX_HTTP_GZIP)
@@ -560,8 +562,10 @@
         }

     } else {
-        b->last = ngx_cpymem(b->last, "Connection: close" CRLF,
-                             sizeof("Connection: close" CRLF) - 1);
+        if (clcf->keepalive_header != 0){
+             b->last = ngx_cpymem(b->last, "Connection: close" CRLF,
+                                  sizeof("Connection: close" CRLF) - 1);
+        }
     }

 #if (NGX_HTTP_GZIP) 
```

这是 nginx 删除其他标头的模块： [https ://github.com/openresty/headers-more-nginx-module](https://github.com/openresty/headers-more-nginx-module)

```
keepalive_timeout 0;
keepalive_requests 0;

chunked_transfer_encoding off;

more_clear_headers 'Cache-Control';
more_clear_headers 'Content-Type';
more_clear_headers 'Date';
more_clear_headers 'Expires';
more_clear_headers 'Server';
more_clear_headers 'X-Debug-Token';
more_clear_headers 'X-Debug-Token-Link';
more_clear_headers 'X-Powered-By';
more_clear_headers 'X-Robots-Tag'; 
```

# javascript - jQuery Click 事件没有响应

> ID：11817667
> 
> 赞同：0
> 
> 时间：2012-08-05T15:28:43.457
> 
> 标签：javascript, jquery

我有一个 jQuery 菜单插件。最初，该插件是通过右键单击来操作的。（我知道，很奇怪）这个插件也有左键单击的功能......但由于某种原因它不起作用。

插件的代码现在在我的页面上：

```
<script type="text/javascript">
jQuery(document).ready(function(){

    var pieMenu = jQuery('#promo').pieMenu({icon : [
            { 
                path : "/wp-content/themes/Tersus/images/piemenu/winamp.png",
                alt  : "Winamp",
                fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}
            },  { 
                path : "/wp-content/themes/Tersus/images/piemenu/vlc.png",
                alt  : "VLC Media Player",
                fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}  
            },{ 
                path : "/wp-content/themes/Tersus/images/piemenu/QuickTime.png",
                alt  : "Quick Time Player",
                fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.qtl';return false}
            },{ 
                path : "/wp-content/themes/Tersus/images/piemenu/WMP.png",
                alt  : "Windows Media Player",
                fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.asx';return false}
            },{ 
                path : "/wp-content/themes/Tersus/images/piemenu/popup.png",
                alt  : "נגן Popup",
                fn   : function(){$("#popupplay").click();return false}
            },{ 
                path : "/wp-content/themes/Tersus/images/piemenu/iTunes.png",
                alt  : "iTunes",
                fn   : function(){alert('...בקרוב');return false}
            }],
        beforeMenuOpen: function(){
            jQuery('<div id="shadow"></div>').css(
            {
                'position':'fixed',
                'background-color':'#000000',
                'opacity': 0.6,
                'width':'100%',
                'height':'100%',
                'z-index' :999,
                'top':0,
                'left':0
            }).appendTo('body');
        },
        beforeMenuClose: function(){
            jQuery('#shadow').remove();
        }
    });

    $('#promo').click(function(){
    if($('#'+pieMenu.id).css('display') != 'block') //if jpie is not visible
    pieMenu.initMenu(200,200);

    })
});
</script> 
```

如您所见..最后一个条目是单击功能..作者将此代码用于悬停而不是单击并指出为了获得左键单击...只需将 .hover 更改为 .click 但不是在职的。

这是插件的 js 文件中的点击参数：

```
//click event
jQuery('#'+idCore).live({
    click: function() {
        if(closable)
            removeMenu();
    },
    contextmenu:function(e){
        e.preventDefault(); 
    }
}) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:14:10.710

改变

上下文：真实，

到

上下文：错误，

在 JS 文件中

# c# - 如何使用 protobuf-net 序列化字节数组？

> ID：11817668
> 
> 赞同：1
> 
> 时间：2012-08-05T15:29:00.290
> 
> 标签：c#, sockets, compression, protobuf-net

是否可以使用 protobuf-net 序列化字节数组，然后通过套接字发送它以对客户端进行反序列化？我正在寻找一种有效的方法来压缩/减少发送的数据。有人告诉我 protobuf-net 是最好的方法。知道我会怎么做吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:39:31.810

Protobuf-net 是一个*序列化*程序，旨在将复杂的对象结构简化为可以通过线路发送的基本表示。它不使用压缩。如果您想要压缩，请使用 GZipStream 之类的东西。实际上，byte[] 的 protobuf 表示是：数据的长度（作为 varint）后跟原始 byte[]。没有 protobuf 实现会减少这种情况。

所以：要么“按原样”发送原始字节 []，要么使用 GZipStream 之类的东西来尝试减小大小。请注意，这并不总是可行的，并且对于某些数据压缩工具可以*增加*大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:45:08.283

通过使用来自 7Zip ( [http://www.7-zip.org/sdk.html](http://www.7-zip.org/sdk.html) ) 的 LZMA SDK 来压缩/解压缩 protobuf 对象的字节数组表示，我们得到了很大的改进。例如，一个 1114 字节的数组缩减为 740。但就像 Marc 所说，您的里程可能会有所不同。

# android - android 应用程序内容、SQLite 或 XML 文件使用什么存储？

> ID：11817671
> 
> 赞同：3
> 
> 时间：2012-08-05T15:30:15.063
> 
> 标签：android, android-file, android-sqlite

我需要存储我的 android 应用程序内容，并想知道我应该使用什么存储空间。SQLite 数据库或 XML 文件？

应用程序和数据的一些特征：

1.  该应用程序用于跟踪（每日）体重、腰围、胸部、++ 的身体测量值
2.  测量类型分为单独的选项卡，彼此不依赖/不相关
3.  实体包含少量数据，4-5个属性
4.  预计数据量适中。最大值（每月 30 次测量 x 5 次测量类型 = 每月 150 次测量/一年中 1800 次）
5.  不会使用任何高级查询。主要是读取（所有数据元素）和添加新的测量值。
6.  我希望能够轻松地将测量数据共享/导出到例如保管箱或电子邮件。

我想将数据存储在具有这些要求/特征的 XML 文件中没有性能问题。如果是这样，我应该将每种测量类型分别放在 XML 文件中吗？我应该将文件存储在移动设备的哪个位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T15:49:12.817

我会阅读您在 Android 上可用的[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)，以尝试挖掘更多信息。

您所描述的，有一次写入保管箱中的文件似乎写出保存在保管箱中的 XML 文件似乎是一个不错的选择。没有复杂的查询，一次只读取一条记录。

但是，我觉得使用 SQL 数据库不会做更多的工作。从长远来看，这将更加灵活。现在你不想做查询，但有一天你可能会。另外，您不必担心将数据拆分为多个文件并进行解析。当您尝试缩放时，解析很快就会变得很麻烦。

我建议编写一个 ContentProvider，然后将所有详细信息放在那里。这样，您的程序就不会关心数据是如何存储的，以防您以后想更改它，因为 Provider 会为您完成所有繁重的工作。我宁愿使用[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html)也不愿使用其他任何东西，而您可以从使用 SQLite 中获得。加上所有新的[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)可以保持应用程序的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T15:47:51.030

最好的长期解决方案是使用 SQLite 数据库。

但是如果你想使用 XML，这里已经提供了一个很好的解决方案： [Store static data in Android - custom resource？](https://stackoverflow.com/questions/3196222/store-static-data-in-android-custom-resource)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:45:58.523

如果您的 XML 数据很大。XML 解析然后插入是一项非常昂贵且耗时的操作。

XML 解析和插入将面临的一些问题。

一种。XML 解析是内存密集型的，因此您的堆大小会增长，您需要注意这一点，因为这可能会导致崩溃。湾。SQLite DB 中的插入每个元组（行）大约需要 100 毫秒，因此您可以计算抽取数千行数据所需的时间。

如果您的数据不是太大，请不要担心使用 SQLite。

# python - 用python序列化语料库

> ID：11817673
> 
> 赞同：2
> 
> 时间：2012-08-05T15:30:22.517
> 
> 标签：python, serialization, nltk, corpus

我有一个巨大的论坛数据数据库。我需要从数据库中提取语料库用于 NLP 目的。提取步骤具有参数（例如 FTS 查询），我想将带有参数元数据的语料库保存在文件系统上。

一些语料库将有几十兆字节。用元数据保存文件的最佳方法是什么，这样我就可以在不加载整个文件的情况下读取元数据。

我正在使用以下可能相关的技术：PyQt、Postgres、Python、NLTK。

一些注意事项：

1.  我希望语料库脱离重量级数据库。
2.  我不想使用 sqlite，因为元数据的结构非常简单。
3.  据我所知，酸洗不允许部分反序列化。
4.  我不希望有单独的元数据文件。
5.  我有协议缓冲区的经验，但又似乎过于沉重。

我想我可以将元数据腌制为字符串，并让文件的第一行代表元数据。这似乎是我认为最简单的方法。也就是说，如果泡菜格式是 ASCII 安全的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T18:55:21.890

在 NLTK 的术语中，“语料库”是整个集合，可以包含多个文件。听起来您可以将每个论坛会话（*您*称之为“语料库”）存储到一个单独的文件中，使用允许您在文件开头存储元数据的结构化格式。

NLTK 通常为此目的使用 XML，但不难推出您自己的语料库阅读器，该阅读器读取文件头，然后遵循`PlainTextCorpusReader`. 或任何最适合您的文件格式的标准阅读器。如果您使用 XML，您还必须扩展`XMLCorpusReader`和提供方法`sents()`，`words()`等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:36:33.610

为什么不在您的语料库文件中添加 JSON 标头？或者任何其他类型的结构化格式......我现在可以想到 Jekyll 帖子中的[YAML 前端问题](https://github.com/mojombo/jekyll/wiki/yaml-front-matter)。

# php - 在 PHP 中计算图像白平衡

> ID：11817674
> 
> 赞同：-1
> 
> 时间：2012-08-05T15:31:04.027
> 
> 标签：php, image-processing

我正在用 PHP 编写一个脚本来补偿图像中的白平衡。我从图像中的白色中获取颜色样本，但我不确定如何计算特定的白平衡。我希望有一个人可以帮助我！

问候，桑德曼格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:37:59.533

看看函数 imagecolorforindex

# windows-8 - 在 Windows 8 应用程序的 snapview 中禁用 Appbars

> ID：11817677
> 
> 赞同：2
> 
> 时间：2012-08-05T15:32:11.910
> 
> 标签：windows-8

有什么办法可以在 snapview 状态下禁用 Appbar？！我正在使用 HTML5 和 javascript 来构建我的应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:07:02.633

您可以使用 CSS/JS 来禁用 Snap View 中的 Appbar；但是，如果此应用程序适用于商店，那么当涉及到商店认证时可能会导致问题，因为您应该在所有视图中支持应用栏。

您可以使用 CSS（禁用或隐藏的 CSS 属性）禁用/隐藏快照视图中的特定项目，以便应用栏仅包含在快照视图中有意义的项目。

应用栏指南和清单 - [http://msdn.microsoft.com/en-us/library/windows/apps/hh465302.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465302.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:22:32.647

我认为你不能在 Windows 8 应用程序中做到这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:09:51.263

没有明确的方法来禁用应用栏。有两件事要尝试：

*   display: none 在应用栏元素上它是自己的
*   或者从 dom 中移除出现的元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T16:28:41.730

捕捉视图和其他视图状态是 Windows 8 用户体验不可或缺的一部分，不能被禁用。应用程序需要准备好处理快照、填充、全屏横向和全屏纵向。

至于应用栏，只是不要在应用中声明一个。例如，使用 Visual Studio 或 Blend 中的空白项目模板创建一个新项目，您会看到它没有应用栏行为。

如果您询问是否可以禁用魅力栏（从右边缘滑入），那么不，您不能禁用它。同样，它是系统的一个组成部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T06:05:33.363

您可以在 Snap View 中禁用应用栏。您需要将 Snap 视图中的可见性更改为“已折叠”，并将其他视图中的可见性更改为“可见”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-27T11:33:35.470

添加一个 ID 'appbar' 到它和 css

```
@media screen and (-ms-view-state: snapped) {
    #appbar {
    display:none;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-30T13:35:14.353

您可以在 resize 事件上以编程方式执行此操作，如下所示：

`window.addEventListener("resize", snapAppBar, false);`

```
function snapAppBar() {
    var height = <height>;
    var condition = (document.querySelector("body").clientWidth < height);
    if (condition) {
        document.querySelector("#appbar").winControl.disabled = <"true"|| "false">;
    }
} 
```

如果您仍然需要帮助，那就是！

# google-maps - 谷歌标记不会在循环中显示有效地址，但适用于单个请求

> ID：11817682
> 
> 赞同：0
> 
> 时间：2012-08-05T15:32:32.020
> 
> 标签：google-maps, google-maps-api-3

我一直在使用 google marker api 遇到一个奇怪的问题，我正在从数据库中获取地址，很少有地址不能循环工作。这是一个例子，[http://admissiontimes.com/universityDb/welcome/universityProfile/Delhi_Institute_of_Pharmaceutical_Sciences_&_Research/557](http://admissiontimes.com/universityDb/welcome/universityProfile/Delhi_Institute_of_Pharmaceutical_Sciences_&_Research/557)

此页面清楚地显示了地址的标记，但[http://admissiontimes.com/universityDb/welcome/universityIn/India-Delhiuniversity/Delhi](http://admissiontimes.com/universityDb/welcome/universityIn/India-Delhiuniversity/Delhi)页面有问题，它显示特定位置的地址。但是如果你会看到带有萤火虫的控制台（因为我已经记录了未显示的地址），控制台中的第一个地址与第一个链接完全相同，但不显示，

可能是什么问题？

请帮忙

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:39:04.103

My hunch is you are going over the geocoder query limit (too many requests in a short time frame).

The workaround I have seen is to use `setTimeout` to delay successive requests.

Even better is to separately use the geocoder only once for each location (convert the human readable address to latitude and longitude coordinates), and store the LatLng result in your database, rather than use the geocoder every time your map webpage loads.

# algorithm - 大数的乘法

> ID：11817683
> 
> 赞同：2
> 
> 时间：2012-08-05T15:32:34.780
> 
> 标签：algorithm, complexity-theory

在分析算法时，我看到我们通常假设乘法需要单条计算机指令。但是这个假设在数字大小（就位数而言）时并不合适。在最基本的乘法形式中，将两个 n 位数相乘通常是 O(n^2)。在这种情况下，计算 x^n.(x 的 n 次方) 的复杂性（就位操作而言）可能是多少？

使用解释的方法，对我来说复杂性似乎是 n 的指数（但不确定确切的数字）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:27:31.473

计算的复杂性`x^n`当然取决于用于计算幂和乘法的算法。如果通过平方计算每个幂的幂，则需要 O(log n) 乘法。在每个步骤中，您要么对一个数字进行平方，要么将两个数字相乘，然后对两者中的一个进行平方。

如果`x`有`d(x)`数字，则`x^n`有 Θ(n*d(x)) 数字，在最后一步中，将大约`n/2*d(x)`数字的数量平方（并可能将该数字乘以较小的数字），然后通过将重复的数字相乘来完成算法平方`x^(2^k)`，如果`2^k <= n < 2^(k+1)`，与累加器。

让`S(m)`是平方数字的成本（可能与两个任意数字相乘`m`的成本相同，也可能不同）。然后平方需要大约`M(m)``m`

```
S(2^(k-1)*d(x)) + S(2^(k-2)*d(x)) + S(2^(k-3)*d(x)) + ... 
```

工作。因为`S(m) >= m`, 介于`S(2^(k-1)*d(x))`和之间`2*S(2^(k-1)*d(x))`。因此，平方的工作由最后一步控制。对于 a`x^(2^s)`与累加器的乘法，同样成立，最终的乘法占主导地位。最终的累加器几乎可以与重复平方一样大，因此通过重复平方提高`x`到`n`- 次方的总成本为

```
Θ(M(2^k*d(x)), 
```

这是`Θ(M(n*d(x)))`。使用天真的乘法 -`M(m) = O(m^2)`然后你得到总成本`O(n^2*d(x)^2)`. 使用更高级的乘法算法（Karatsuba、Toom-Cook、Schönhage-Strassen，...），您可以获得更低的复杂度，甚至略高于`O(n*d(x)*log (n*d(x)) * log log (n*d(x)))`.

当通过与 相乘来迭代计算幂时`x`，`n`让`M(m,k)`表示将`m`-digit 数字与`k`-digit 数字相乘的成本。由于其中一个因素总是`x`，总成本是

```
M(d(x),d(x)) + M(d(x),2*d(x)) + M(d(x),3*d(x)) + ... + M(d(x),(n-1)*d(x)) 
```

用教科书算法加上成本`M(m,k) = m*k`，这个加起来`n*(n-1)/2*d(x)^2`，所以总成本又是`Θ(n^2*d(x)^2)`。但常数因子大于通过重复平方取幂的因子。

当您将长度差异很大的数字相乘时，就像在几次迭代之后发生的那样，您不能 - 据我所知 - 将成本降低到`M(m,k)`远低于`Θ(m*k)`- 如果`m < k`，将数字视为 1 位数字和 -`r`位数字（`r*m <= k < (r+1)*m`) 在 base中，如果足够大，您可以`b^m`使用更好的算法减少乘以“数字”的成本，但您不能减少因子。因此该算法的复杂度为，无法消除 的因素。`m``r``O(n^2*M(d(x)))``n^2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T15:40:24.147

[Wikipedia](http://en.wikipedia.org/wiki/Computational_complexity_of_mathematical_operations "维基百科")很好地概述了各种乘法算法的复杂度时间。

为了回答您的问题，假设将两个 m 位数字相乘（其复杂度为 O( m^2 ）的幼稚教科书方法和通过将数字乘以自身 n 次来提高幂的幼稚方法，您有n 次乘法，所以复杂度为 O( n * m^2 ) 或简单 O( nm^2 )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T16:29:05.097

n^k 成本：

```
O((log(n))^k) 
```

log(n) - n 的位表示

^k - 因为将两个 n 位数字相乘的简单算法成本为 O(n^2)

# java - 尽管代码中没有错误，但 Eclipse 项目无法运行/显示错误

> ID：11817685
> 
> 赞同：0
> 
> 时间：2012-08-05T15:32:37.957
> 
> 标签：java, android, eclipse

我正在尝试运行我的 android 项目。我已经单独检查了这些文件，但它在任何文件中都没有显示错误。但仍然无法运行，它显示`Your project contains error(s), please fix them before running your application`

我已经在线检查并重建项目/清理项目，但它仍然向我显示错误。

这是错误日志。

```
eclipse.buildId=M20120208-0800
java.version=1.7.0_04
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_SG
Command-line arguments:  -os win32 -ws win32 -arch x86_64
Error
Sun Aug 05 23:01:23 SGT 2012
JavaBuilder handling ImageBuilderInternalException while building: NFCTest
org.eclipse.core.internal.resources.ResourceException: A resource exists with a
different case: '/NFCTest/bin/classes/com/example/NFCTest'.
at org.eclipse.core.internal.resources.Resource.checkDoesNotExist(Resource.java:308)
at org.eclipse.core.internal.resources.Resource.checkDoesNotExist(Resource.java:286)
at org.eclipse.core.internal.resources.Folder.assertCreateRequirements(Folder.java:30)
at org.eclipse.core.internal.resources.Folder.create(Folder.java:95)
at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.createFolder(AbstractImageBuilder.java:469)
at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder$1.visit(AbstractImageBuilder.java:253)
at org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:65)
at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82)
at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
at org.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:127)
at org.eclipse.core.internal.resources.Resource.accept(Resource.java:75)
at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.addAllSourceFiles(AbstractImageBuilder.java:218)
at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchImageBuilder.java:51)
at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilder.java:254)
at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:178)
at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:40:40.133

您正在混合**64-bit**和**32-bit**。下载 64 位版本的 Eclipse 并使用 64 位版本的 Java 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T19:00:47.690

请检查您是否在不同（在本例中为 src）文件夹中有相同的包。

# java - 如何从长方法中更新摆动 GUI？

> ID：11817688
> 
> 赞同：2
> 
> 时间：2012-08-05T15:32:56.270
> 
> 标签：java, multithreading, swing, user-interface, event-dispatch-thread

我是 Swing 新手，目前正在尝试在 NetBeans 中开发一个简单的 GUI 应用程序。

我想创建某种 GUI 日志系统，将应用程序正在执行的当前操作写入 TextArea。

作为一个简单的例子，我创建了一个只包含 2 个对象的 JFrame 表单：一个“开始”按钮和一个 TextArea。

当按下“开始”按钮时，它会调用某种冗长的方法，该方法应该需要一些时间（比如 10 秒）才能完成运行，并且在此方法运行时，我想将文本附加到 TextArea 中冗长的方法（当然我希望 TextArea 立即更新）。

我的问题是我找不到正确的方法。无论如何，我尝试这样做，当我按下“开始”按钮时，应用程序冻结 10 秒，而不像我想要的那样更新 TextArea。只有当方法完成时，我才能看到 TextArea 的更新。

这是一个示例代码：

```
private void startButtonActionPerformed(java.awt.event.ActionEvent evt) {
    try {
        for (int i = 0; i < 10; i++) {
           textArea.setText(i + "\n");
            Thread.sleep(1000);
        }
    } catch (Exception e) {}
} 
```

在此示例中，我希望看到的是，一旦单击按钮，在接下来的 10 秒内，每秒都会在 TextArea 中添加一个新行，如下所示：

1

2

3

4

...

但我从这段代码中得到的真正结果是应用程序冻结了 10 秒，最后 TextArea 被更新并只显示数字 9。

我尝试了许多不同的方法来做到这一点，主要是使用**SwingUtilities.invokeLater**和**SwingWorker**方法，但它们都不适合我。

任何有关找到正确方法的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T15:43:47.960

**1.**始终**保持UI在UI线程上工作，Non-UI在Non-UI线程上工作。**

**2.**在Java GUI 应用程序中，`main()`方法寿命**不**长，在调度GUI 的构建后`Event Dispatcher Thread`，main() 方法退出......现在它的**EDT 负责处理GUI。**

**3.**始终保留您的 EDT 线程，这是**仅用于 GUI 工作的 GUI 线程。**

**例如：**

```
public static void main(String[] args){

        EventQueue.invokeLater(new Runnable(){

              public void run(){

                myframe.setVisible(true);

             }

         }

  } 
```

**4.**创建一个单独的`Non-UI` **线程来处理那个耗时的方法。**

**5.**你可以简单地使用Java中专门引入的`Thread`或使用来**同步UI和Non-UI线程。**`SwingWorker`

 *** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T04:31:21.777

就像其他答案中所述，您将要使用`SwingWorker`- 我建议您阅读它，因为它是一个非常有用的工具。此实现应该为您提供您在示例中寻找的内容：

您的按钮操作：

```
button.addActionListener(new ActionListener(){
    @Override
    public void actionPerformed(ActionEvent arg0) {
        new Worker().execute();
    }
}); 
```

你的摇摆工人：

```
public class Worker extends SwingWorker<String, String>{

    @Override
    protected String doInBackground() throws Exception {
        //This is what's called in the .execute method
        for(int i = 0; i < 10; i++){
            //This sends the results to the .process method
            publish(String.valueOf(i));
            Thread.sleep(1000);
        }
        return null;
    }

    protected void process(List<String> item) {
        //This updates the UI
        textArea.append(item + "\n");
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T15:34:30.923

使用[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)类。有关详细信息，请参阅[如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。**

# php - PHP变量深度？或者我关联数组难题

> ID：11817689
> 
> 赞同：0
> 
> 时间：2012-08-05T15:33:09.757
> 
> 标签：php, string, variables, scope, depth

我有 2 个文件名为：dictionary.php 和 functions.php functions.php 包括 dictionary.php

dictionary.php：包含两件事：一个西班牙语->英语词典数组和这个函数：

```
<?php

    function english($is_english, $word) {

        global $es_en;
        if ($is_english) {
            //return value
            return $es_en[$word];

        }
        else {
            //return key
            return $word;
        }
    } 
```

functions.php 以 2 种方式调用此函数，其中一种方式出现故障：这是：

```
english($is_english,"StringToTranslate") 
```

和

```
english($is_english,$varToTranslate) 
```

第一个工作正常，但第二个发出这个通知：如果`$varToTranslate`碰巧是 Kínder

> 未定义索引：第 45 行 C:..\resources\dictionary.php 中的 Kínder

第 45 行是 the 所在的`return $es_en[$word]`位置。请注意，这`$es_en`是字典数组，它有一个条目：`Kínder=>Kinder,`在任何一种情况下，当我使用字符串而不是变量作为函数参数时，它都可以工作。

有谁知道我该如何解释这种行为？我必须对变量应用某种字符串更改，以便函数可以正确处理它吗？如果有什么不清楚的地方请指出。

更新

functions.php 包含几个由 main.php 页面调用的函数。现在正在测试的一个是这样的

```
function plan_info($grado, $materia, $ingles, $addresses, $files){
echo '<table id="plan_head"><tr>
<td><div style="width:289px;"><strong>' . english($is_english, "Maestro") . ':  </strong>' . $_SESSION['firstname'] . ' ' . $_SESSION['lastname'] . '</div></td>
<td style="text-align:center;"><div style="width:289px;"><strong>' . english($is_english, "Grado") . ':</strong> <span id="grado"><input type="text" name="grado" maxlength="60" value="' . english($is_english, $grado) . '"/></span></div></td> 
```

分配给 $grado（我原来的例子是 $varToTranslate），在 main.php 中完成：

```
$grado=html_entity_decode(htmlentities(str_replace('%20',' ',$_GET['grado']),  ENT_COMPAT, "ISO-8859-1"), ENT_COMPAT, "ISO-8859-1"); 
```

# c++ - “从‘std::vector’类型的右值对‘std::vector&’类型的非常量引用进行无效初始化”错误

> ID：11817692
> 
> 赞同：2
> 
> 时间：2012-08-05T15:33:20.800
> 
> 标签：c++

我从“std::vector”类型的右值中得到“'std::vector&'类型的非常量引用的无效初始化”错误，用于在第二个参数中传入merge_sort（right）。

```
left_merged = merge_sort(left);
// right_merged = merge_sort(right);
return merge(left_merged, merge_sort(right)); 
```

以下是函数声明：

```
vector<int> merge_sort(vector<int>& vec)
vector<int> merge(vector<int>& left, vector<int>& right) 
```

我一直在阅读关于右值如何成为临时对象的理论，如果它没有在初始化程序中使用或分配给变量，则它会被销毁，但我真正想要的是一个快速而肮脏的解决方案，以便能够在参数。

有什么快速的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T15:37:09.177

在本次通话中：

```
return merge(left_merged, merge_sort(right)); 
```

第二个参数是临时的，您不能将非常量引用绑定到临时。你需要

```
vector<int> merge(vector<int>& left, const vector<int>& right); 
```

并且可能（尽管它不会影响这个特定的例子），

```
vector<int> merge(const vector<int>& left, const vector<int>& right); 
```

如果您发现自己在函数中复制了参数，您可以按值获取它们。例如，如果您要复制第二个参数，那么更喜欢这个：

```
vector<int> merge(const vector<int>& left, vector<int> right);. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T15:37:31.417

将参数类型更改为`const vector<int>&`（常量引用）或简单地`vector<int>`（按值）。

如果在函数内部您不对参数进行任何更改，则首选第一个选项（const 引用）。否则是第二个（按值）。如果在函数内部，您立即复制参数，然后在忽略原始参数的情况下操作副本，则按值获取参数，跳过副本，直接使用参数。

# php - $settings['setting'] = "setting" 有什么作用？

> ID：11817693
> 
> 赞同：-8
> 
> 时间：2012-08-05T15:33:20.460
> 
> 标签：php, mybb

我正在使用一个名为[mybb](http://www.mybb.com)的公告板并遇到以下代码：-

```
$settings['setting'] = "setting" 
```

它是做什么的，谷歌让我失望了，因为我不知道到底要搜索什么。

我将如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T15:36:31.137

`$settings`此语句将由 key 标识的数组中的项的值设置为`setting`字符串`"setting"`。

你会像这样使用它：-

```
$settings['setting'] = "setting"; 
```

例如，如果您想回显该值，您会这样做：-

```
echo $settings['settings']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:45:07.990

我将使用不同的名称，以便您可能会看到关键字“设置”在您的代码的所有 3 种情况下都是任意的：

```
$animals = array("cat"=>"mamal","ant"=>"insect");
$animals['cat']="insect"; 
```

第一行仅在名为 $animals 的数组中声明了两个键值对，第二行仅将键“cat”的值设置为“insect”。

```
echo $animals['ant']; 
```

最后一行代码应该打印“昆虫”。

# objective-c - 为什么我们将 UIViewController 传递给 UINavigationController 类？

> ID：11817694
> 
> 赞同：0
> 
> 时间：2012-08-05T15:33:37.510
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, uinavigationcontroller

我对另一个控制器业务中的这个控制器有点困惑。我认为我们可以在没有 initWIthRootViewController 的情况下初始化 UInavigationController。

```
ViewController *controller = [[ViewController alloc] init];
controller.title = @"ViewController";
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:controller]; 
```

有时我想我明白了，但是当我看到这样的事情时，它让我回到了虚无。我已经阅读了文档，但它（对我而言）做得不好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:07:11.910

Your Navigation controller is managing the display of the items on it's stack. The rootViewController is the first item for it to display, and first item in the stack. It is a bit different to the other VCs in the stack as AFAIK, it can't be popped. There are times when the root view controller holds information that is useful to other VCs in the stack.

I guess Apple could have let you push a view controller during setup, but They decided that the concept of a root view controller is a good one, and I can see how it helps the IB/Storyboard implementation.

# c - 分配 3.exe 中 0x77ea15de 处的未处理异常：0xC0000005：访问冲突读取位置 0x33772c58

> ID：11817699
> 
> 赞同：0
> 
> 时间：2012-08-05T15:34:33.587
> 
> 标签：c, visual-studio-2010, geany

我不明白这个错误告诉我什么。当我运行程序时，它应该不断循环，直到用户输入 N （不再/退出）。我不明白发生了什么事。在第一组输入之后，在提示用户“你想处理一个新学生”之前，程序会抛出该异常。

我已经使用 Geany（它没有给我任何它只是崩溃的错误定义）和 Visual Studio 2010 运行它。

有人可以帮忙吗？

```
void draw_bar_chart(int student_id[], int percentage[], int size)
{
    FILE *report;
    int i, j=0, min = 1000000, max = 0, min_pos, max_pos, l;
    char s[20];

    report = fopen("report2.txt", "a");
    fprintf(report, "\n******* BAR CHART (YEARLY TOTAL EXPENSES: YEARLY TOTAL INCOME) *******\n\n");      

    for (i = 0; i < size; i++)
    {
        fprintf(report, "%d%c", student_id[i], ' ');
        if (percentage[i] > 0){
            l = percentage[i]/10; //the lenght of the bar
            if ((percentage[i]%10) > 0)
                l++;
            for (j = 0; j < l; j++)
                s[j] = 'x';
            s[l+1] = '\0';
        } else {
            s[0] = '!';
            s[1] = '\0';
        }

        fprintf(report, "%-20s%6c%d%c\n", s, ' ', percentage[j], '%');

        if (percentage[j] >= 0)
        {
            if (percentage[j] < min)        
            {
                min = percentage[j];        
                min_pos = j;                
            }
            if (percentage[j] > max)    
            {
                max = percentage[j];        
                max_pos = j;                
            }
        }
    }

    fprintf(report, "***lowest percentage:  %d%c (student ID: %d)\n", min, '%', student_id[min_pos]);
    fprintf(report, "***highest percentage: %d%c (student ID: %d)\n", max, '%', student_id[max_pos]);

    fclose(report);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:04:22.593

我可以看到以下错误：

1.  它应该是 s[l] = '\0'，而不是 s[l+1] = '\0'。
2.  在 s 中写下横杠后，所有出现的 j 都必须替换为 i。
3.  min_pos 和 max_pos 可能未初始化。

真正的问题是第二个问题。您可以通过养成将变量放在尽可能小的范围内的习惯来避免这种错误。即你有没有写这个：

```
 ...
        fprintf(report, "%d%c", student_id[i], ' ');

        /* display percentage */
        {
          char s[20];

          if (percentage[i] > 0) {
            int l, j;

            l = percentage[i] / 10; // the length of the bar
            if ((percentage[i]%10) > 0)
                l++;
            for (j = 0; j < l; j++)
                s[j] = 'x';
            s[l] = '\0';
          }
          else {
            s[0] = '!';
            s[1] = '\0';
          }

          fprintf(report, "%-20s%6c%d%c\n", s, ' ', percentage[i], '%');
        }

        /* update min, max */
        if (percentage[i] >= 0) {
        ... 
```

那么代码会更容易理解，如果你在 /* update ... */ 之后错误地使用 j 而不是 i，编译器会给你一个错误。更好的办法是将百分比显示位放在一个单独的函数中。

顺便说一句，格式字符串中不需要这些 %c ，只需将字符直接放入即可。% 可以用 %% 转义。

# php - 获取使用 php/mysql 预订的日期

> ID：11817700
> 
> 赞同：3
> 
> 时间：2012-08-05T15:34:36.193
> 
> 标签：php, mysql, date

我在 mysql 中有一个包含开始和结束日期的表。这些开始和结束日期适用于预订酒店的时间。我需要做的是显示一个日历，显示已预订的日期和当月可用的日期。我如何知道当月的预订日期？我可以循环浏览当月的每一天，但这意味着 30 或 31 个查询，是否有更好、更优化的方法来找出当月预订的日期，以便我可以在日历上对日期进行颜色编码？

**表结构是这样的：**

> hotelid 整数（11）
> 
> 开始日期（日期）
> 
> 结束日期（日期）

**查询请求：**

```
SELECT * FROM hotel_book WHERE hotelid = 1 AND DATE_FORMAT(startdate,'%Y-%m') >= '2012-08' AND DATE_FORMAT(enddate,'%Y-%m') <= '2012-08' 
```

我确定我可以通过它 2012-08-01 和 2012-08-31 所以我不会处理每张支票的日期格式。但仅用于示例目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:42:35.723

另一种方法是让您的日历接受开始和结束日期，并呈现在日历逻辑中预订的每一天。如果日历使用 javascript 而不是 PHP 或 MySQL，对您的服务器的影响将是最小的。无论哪种方式，您最终都会循环，这仅取决于您希望在哪里发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:56:00.063

所以首先获取酒店ID。然后进行查询以获取与该酒店 ID 相关的所有开始日期和结束日期。我建议你有第二个字段来计算差异：

如果有人预订了第 1 到第 3，那么也预订了第 2，因此您必须创建一个函数来计算差异，然后输出“中间”字段。因此，它必须首先获取开始编号，然后每次添加 +1 天，直到结束日期。所以它最终会像 array(1,2,3)

然后，您可以获取此信息并将其放入 jquery 或 ajax 日历的预定数组中（网上有很多可用的）。大概一旦预订了日期，就不能再次预订，否则您将有重复的 1,2,3 值 - 所以我猜酒店只有一个房间可用或其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T15:17:12.483

这是获取所需日期的代码。您将能够在日历上显示它们的逻辑。**请注意，我使用自定义类进行数据库选择。**

```
$id=$_POST['id'];
$days=$db->select("reservations","room_id=".$id);
$listofdays=array();
foreach ($days $day) {
$start=$day['start'];
$end=$day['end'];
$liste=array(); //This array will be filled with dates between start and end
$liste=date_range($start, $end, $step = '+1 day', $output_format = 'm-d-Y'     );
foreach ($liste as $key => $list) {
$listofdays[] = $list;

}
} 
```

//date_range函数如下：

```
 function date_range($first, $last, $step = '+1 day', $output_format = 'm/d/Y' ) {

$dates = array();
$current = strtotime($first);
$last = strtotime($last);

while( $current <= $last ) {

    $dates[] = date($output_format, $current);
    $current = strtotime($step, $current);
}

return $dates; 
```

};

# javascript - 无法在 JavaScript 中的函数内访问函数中的变量

> ID：11817701
> 
> 赞同：1
> 
> 时间：2012-08-05T15:34:47.347
> 
> 标签：javascript, global-variables

```
function updateRoomsList() {
    //empty the rooms list
    $("#rooms").empty();
    //fetch the non-joined rooms, id and name
    $.get('JoinPart', {
        goal: 5,
        userName: $("#userName").html()
    }, function (responseText) {
        var i = 0;
        id = "";
        while (i < responseText.length) {
            if (responseText.charAt(i) == '.') {
                //Now we got the full Id of a room, lets add it
                $.get('JoinPart', {
                    goal: 6,
                    roomId: id
                }, function (responseText) {
                    roomName = responseText;
                    $("#rooms").append('<div id="room' + id + '" class="listItem"><span title="Join Room" class="joinButton">+</span><div class="listItemContent">' + roomName + '</div></div>');
                });
                id = "";
            } else {
                id = id + responseText.charAt(i);
            }
            i++;
        }
    });
} 
```

在这个函数中有一个变量`id`，如果我`alert(id);`之后

```
if(responseText.charAt(i)=='.') 
```

我得到了在 中计算的 id 的正确值`else`，但是当我`alert(id);`在`$.get`id 内部做空`""`时，意味着在`append`函数中，`id`没有值，我怎样才能让这个 id 具有 $.get 函数之外的值?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:40:45.893

代码流不是你想象的顺序。

```
 id=""; 
```

顺便说一下，在函数内函数（称为闭包）之前发生（这应该有助于您的谷歌搜索）。添加打印语句

```
alert("here 1");
alert("here 2"); 
```

在闭包之前，`id="";`and this 应该跳出来。

最简单的解决方法可能是在闭包中进行交换`id`，`roomId`因为作为一个简单的字符串或 int，该值被完全复制到`roomId`，即使`id`更改也是安全的（好吧，更准确地说，`id=...`只更改引用，因此引用的值by`roomId`保持不变。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:46:01.797

那是因为它的作用域在外部闭包中，所以你的内部回调会引用它在循环`id`结束时设置的最后一个值。如果您在第二个回调中需要变量`while`的私有副本，则需要编写`id``$.get()`

```
$.get('JoinPart', {goal :6, roomId :id }, (function (id) {
  return function (responseText) {
    roomName = responseText;
    $("#rooms").append('<div>' + id + '</div>');
  }
})(id)); 
```

当你这样做时，你创建了一个新的作用域，它有一个局部变量`id`，它给出了`id`当前迭代中的确切值，而不是局部变量`id`本身，它在循环结束时（或者实际上只是在下一次迭代中）可以成为任何东西。

该构造`(function(arg){})(arg)`称为*[立即调用的函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)*。请注意，此函数返回一个新的函数对象，即`$.get()`

*闭包*是在另一个闭包内部定义的函数。根据定义，闭包可以访问外部函数的所有局部变量。当您为稍后执行提供回调时`$.get()`，您实际上是在使用闭包：当回调将被执行时（可能在几秒钟后），JS 引擎`id`仍然可以访问，但其值显然取决于其余代码。

如果您需要存储变量的当前快照以供以后阅读，您需要创建一个新的闭包（即一个新的作用域）：我们为此使用 IIFE。IIFE**在**实际的 HTTP 请求被触发之前执行（即在调用**之前**`$.get()`），它是回调的最近范围，因此它将用于在`id`执行回调时解析引用。

您可以通过弄清楚以下代码段将打印什么来测试您是否理解这个概念

```
function inner() {
  console.log(i);          
}

for (var i = 0; i < 3; i++) {
  inner();
  setTimeout(inner, 1000);
}​ 
```

# objective-c - 子类化和属性分配

> ID：11817703
> 
> 赞同：2
> 
> 时间：2012-08-05T15:34:50.390
> 
> 标签：objective-c, ios

我有一堂课：

```
@interface BasicDescription : NSObject

@property (strong,nonatomic) NSString *author;
@property (assign,nonatomic) NSInteger year;
@property (strong,nonatomic) NSString *owner; 
```

第二类：

```
@interface AdvDescModel : BasicDescription

-(id)initWithBasicModel:(BasicDescription*)basicModel; 
```

所以我的问题是当我创建新对象时如何分配所有属性。我现在有

```
AdvDescModel *adv = [AdvDescModel alloc] initWithBasicModel:basic]; 
```

然后在初始化程序中：

```
-(id)initWithBasicModel:(BasicDescription*)basicModel {

    if(self = [super init]) {
        [self setAllParams:basicModel];
    }
    return self;
}

-(void)setAllParams:(BasicDescription*)bModel {

    [self setAuthor:bModel.author];
    [self setYear:bModel.year];
    [self setOwner:bModel.owner];
} 
```

但是有没有更好的方法来做到这一点？现在我必须查看我所有的属性并为每个属性调用 setter。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T15:41:09.447

您初始化对象的方式还不错，如果它满足您的要求，您可以以这种方式离开......但是看看在这种情况下最好的选择是[构建器模式。](http://erik.doernenburg.com/2011/11/builder-pattern-in-objective-c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T15:40:29.037

假设您有许多这样的属性，更好的方法是使用具有所有默认值的可变字典，并简单地在每个新对象上设置它。然后您可以修改子类或用户想要更改的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T15:47:30.893

我认为让一个类负责自己的属性是更好的做法，所以我建议`AdvDescModel`有一个初始化器，比如......

```
-(id)initWithBasicModel:(BasicDescription*)basicModel {

    if(self = [super initWithBasicModel:basicModel]) {
        ;  // Anything specific to the subclass
    }
    return self;
} 
```

...并且父母有：

```
-(id)initWithBasicModel:(BasicDescription*)bModel {

    if(self = [super init]) {
        [self setAuthor:bModel.author];
        [self setYear:bModel.year];
        [self setOwner:bModel.owner];
    }
    return self;
} 
```

# google-apps-script - Google Apps 教程：您的第一个自定义函数

> ID：11817706
> 
> 赞同：3
> 
> 时间：2012-08-05T15:35:01.207
> 
> 标签：google-apps-script, google-sheets, custom-function

我对谷歌应用程序脚本相当陌生，在尝试“你的第一个自定义函数”教程时遇到了这个问题。

```
=in2mm(1) -> 25.4
=in2mm(2) -> 50.8
=in2mm() -> #ERROR (error: input must be a number (line 6))
=in2mm(pi()) -> 79.7964534011807
=in2mm(a) -> #NAME? (error: Unknown range name a)
=in2mm(*) -> #ERROR (error: Parse error) 
```

我试图了解谷歌应用程序脚本中“投掷”功能的用法。它如何能够在我的第 3 行中产生“输入必须是数字”，而第 5 行和第 6 行会产生其他一些结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:17:48.370

您可以通过添加一些这样的案例处理来使错误消息更加明确：

```
function in2mm(inNum) {
  // Function to convert from INCHES to MILLIMETERS
  var outNum = 0;     // this will hold the answer
  var factor = 25.4;  // multiply input by this factor to get output
    if (inNum == "") {  // check to make sure input is a number
    throw ("error: input must not be empty");  // throw an exception with the error message
    }else if (typeof inNum != "number") {  // check to make sure input is a number
    throw ("error: input must be a number (now it is a "+typeof inNum+")");  // throw an exception with the error message
}
  outNum = inNum * factor;  // calculate the answer
  return outNum;  // return the answer to the cell which has the formula
} 
```

但是该参数必须是“有效”才能由函数处理...在您的示例中，`=in2mm(a)`a 被解释为命名区域，并且由于您没有名为“a”的区域，因此在尝试执行之前会出错功能。这就是为什么错误消息不是来自函数本身而是来自电子表格下的“引擎”的原因。

另一个示例`=in2mm(*)`出于同样的原因返回 Parse 错误，参数无效，在这种情况下它也不能是一个范围......你也可以尝试 + 或 - ，它会尝试计算一些东西，但它不能并且错误消息再次来自电子表格，而不是来自您的函数。

尝试使用有效范围并更改目标单元格中​​的值，您将看到完全不同的结果。例如在`A2`写`=in2mm(A1)` 和玩`A1`

希望我让事情变得（一点）更清楚;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:01:25.150

如果您在代码中发现错误，那么您可以抛出您在提供的第三个示例中看到的错误。例如，代码看起来像......

```
function in2mm(inches){
  if (inches == null){ 
    throw 'input must be a number'; 
  }
} 
```

在您提供的最后两个示例中，错误没有被您的函数捕获，而是被 Google 电子表格捕获。

# mobile - 移动设备管理

> ID：11817709
> 
> 赞同：-4
> 
> 时间：2012-08-05T15:35:09.980
> 
> 标签：mobile

我的要求是我需要向客户提出移动设备管理 (MDM) 工具，该工具将具有所有必需的功能（设备注册、设备权限、将移动应用程序推送到设备等）

仅供参考：MDM 工具应该支持**IPHONE**、**ANDROID**、**BlACKBERRY**、**SYMBIAN**和**WINDOWSPHONE**

市场上有没有我可以免费下载和安装的 MDM 工具。

谢谢房车

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-29T13:25:03.907

可能存在免费的 MDM 解决方案：[http](http://www.spiceworks.com/free-mobile-device-management-mdm-software/)
://www.spiceworks.com/free-mobile-device-management-mdm-software/ 但是我不确定这对您的客户来说是否是一个可行的解决方案。

有关 MDM 解决方案提供商的非详尽列表： [http ://www.enterpriseios.com/wiki/Comparison_MDM_Providers](http://www.enterpriseios.com/wiki/Comparison_MDM_Providers)

**注意**：MobileIron 还提供本地解决方案，其中虚拟智能手机平台和最终的集成哨兵安装在客户端的网络基础设施中（注意：本地）。此外，如果客户确实选择了 Connected Cloud 解决方案，则 VSP 仅托管在云上。

换句话说，有可能在客户端的基础架构中实施一个独立的哨兵（不能托管在云上）来加密所有传出到 VSP 的数据，这就是所谓的混合解决方案。实施托管在云上的独立哨兵的可能性被“计划”在 2014 年底。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:57:45.303

我认为我们有像**ZENPRISE**这样的工具，它支持所有主要的设备供应商。

上面的工具似乎有点贵，每个用户收费 35 美元。

我们还有其他解决方案，例如**MAAS360**和**MOBILEIRON**，但它们是基于云的（所有员工详细信息都将远程存储）。大多数客户更喜欢本地安装，因为他们不想透露他们的公司信息。

我的问题是，有没有像**zenprise**这样的工具比这个工具更自由/更便宜？

谢谢房车

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T05:53:47.183

我在网上搜索，寻找免费的 MDM 解决方案来编制列表。我登陆了这个页面，它帮助我整理了 Spiceworks，所以我认为通过提交我编译的列表来做我的工作会很好。

我发现有 5 个免费的 MDM 软件实际上提供免费服务，尽管有些软件的功能受到限制。

1.  [米拉多尔](https://www.miradore.com/miradore-online-for-mobile-device-management/)
2.  [香料厂](https://spiceworks.com/)
3.  [桌面中心](https://www.manageengine.com/products/desktop-central/)
4.  [回归](https://www.relution.io/en/)
5.  [AppTec EMM](https://www.apptec360.com/solutions/mobile-device-management/)

好吧，我不能把它们都写在这里；已经花费了大量时间来编译和编写免费提供的功能。**这是我更详细的链接。：[5免费移动设备管理软件](http://listoffreeware.com/free-mobile-device-management-software/)**

# git - 解决与 egit 的冲突。没有“团队 -> 添加”选项

> ID：11817710
> 
> 赞同：7
> 
> 时间：2012-08-05T15:35:20.447
> 
> 标签：git, egit

我刚开始使用 git 和使用 eclipse 的 eGit。所以我在 linux 服务器上创建了一个远程 repo，并从本地计算机 #1 我将一个 git repo 推送到服务器。我将该回购拉到本地计算机＃2。

现在我进行了更改并将更改从计算机 #1 推送到服务器。我还在 #2 计算机上进行了更改，当我再次尝试从服务器中提取时，我在 #2 计算机上遇到了冲突。

我在 egit 用户指南中阅读了如何修复文件，直到您解决了所有冲突。然后eGit指南说我应该对固定文件执行“团队->添加”。但是我的“团队”右键菜单中没有该选项。以下是“团队”菜单的屏幕截图。

我敢肯定这是我在这里想念的非常明显的东西。“团队 - 添加”选项在哪里？

感谢帮助！

![在此处输入图像描述](../Images/bddde65bf550f67db3c04c05e168045b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T18:33:38.003

根据 eGit 用户指南，在较新版本的 eGit 中，它被称为“添加到索引”：

> 单击项目节点上的团队 > 添加。（此菜单项在 Egit 的最新版本中可能显示为 Add to Index）

# spring - Spring + JPA - 为什么我收到错误 java.lang.NoSuchMethodError: javax.persistence.PersistenceContext.properties()？

> ID：11817712
> 
> 赞同：0
> 
> 时间：2012-08-05T15:35:28.797
> 
> 标签：spring, hibernate, jpa

我尝试使用 Spring + Hibernate JPA，但是当我启动我的 jettyt 服务器时，我收到了这个错误：java.lang.NoSuchMethodError: javax.persistence.PersistenceContext.properties()

你有什么主意吗 ？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:54:40.797

您的类路径中的某处可能有 JPA 1.0 库而不是 JPA 2.0 库。这对我有用：

```
 <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.0.Final</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T15:01:28.863

我删除了这种依赖，之后一切正常

```
 <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>annotations-api</artifactId>
        <version>6.0.13</version>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T12:47:11.783

错误：**java.lang.NoSuchMethodError: javax.persistence.PersistenceContext.properties()[Ljavax/persistence/PersistenceProperty**

解析度：

运行 maven 依赖树并排除以下依赖。

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>annotations-api</artifactId>
    <version>6.0.13</version>
</dependency> 
```

例子 ：

```
<dependency>
        <groupId>com.sc.dc</groupId>
        <artifactId>monitoring</artifactId>
        <version>2.8</version>
        <exclusions>
            <exclusion>
                <groupId>org.apache.tomcat</groupId>
                <artifactId>annotations-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

[![在此处输入图像描述](../Images/c301e6238abce48dc97bd46d4d633ff4.png)](https://i.stack.imgur.com/M5LYG.png)

# javascript - 如何删除不在 DOM 中的元素？

> ID：11817716
> 
> 赞同：4
> 
> 时间：2012-08-05T15:35:50.990
> 
> 标签：javascript, dom, removechild

```
var paragraphElement = document.createElement('p'); 
```

`paragraphElement`不在 DOM 中。我怎样才能删除它？我知道`removeChild`如果它在 DOM 中我可以使用。我不倾向于添加`paragraphElement`到 DOM 然后将其删除。有什么解决办法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T15:41:00.377

如果一个对象不再被引用，它将被标记为垃圾回收。因此，当您离开`p`有效的上下文并且没有以任何其他方式引用该元素时，垃圾收集将在下次运行时释放内存。垃圾回收如何实现这一点取决于 JavaScript 引擎。

您还可以分配`p`一个新的非参考值，例如`0`，或使用`p = null`。请注意，[`.removeChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)不会从内存中删除子节点，只会从 DOM 中删除子节点，但如果此节点上没有其他引用，则会将其释放以进行垃圾收集。

有关更多信息，请查看[MDN：内存管理](https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:51:50.587

如果它不在 DOM 中，那么您所要做的就是清除对它的任何 JS 引用，垃圾收集器将为您删除它。这本质上与 javascript 对象或 javascript 数组没有什么不同。如果您清除对它的任何引用，垃圾收集器将清除它。

所以，如果你像这样创建它：

```
var paragraphElement = document.createElement('p'); 
```

然后，您所要做的就是摆脱它的明确引用：

```
var paragraphElement = null; 
```

如果没有对元素的 javascript 引用，垃圾收集器将删除它。

# xml - 如何在 HTML 输出中结合 DITA 主题和嵌套主题？

> ID：11817725
> 
> 赞同：0
> 
> 时间：2012-08-05T15:37:37.120
> 
> 标签：xml, documentation, xml-documentation, dita

这类似于我之前提出的一个问题，但有一个变化。我想知道如何将多个主题合并为一个（使用@chunk），然后在 HTML 输出中可以导航到其他子主题：

**实际示例：** [http ://docs.autodesk.com/3DSMAX/15/ENU/3ds-Max-Help/files/GUID-484B095B-1229-4CB9-BC53-952AC40F67C2.htm](http://docs.autodesk.com/3DSMAX/15/ENU/3ds-Max-Help/files/GUID-484B095B-1229-4CB9-BC53-952AC40F67C2.htm)

*   在文档的顶部，您会注意到多个主题已合并为一个。这些主题包括`concept`和`task`类型。
*   在文档的底部，您会看到可以导航到子主题。

尽管付出了很多努力，我还是无法让嵌套主题保持独立。它们要么与 topic1+topic2+topic3 合并，要么完全从 TOC 中消失。

鉴于有 7 个不同类型的单独主题，我想编写一个生成以下 HTML 输出的地图：

*   主题1+主题2+主题3
    *   话题4
    *   话题5
        *   话题6
*   主题 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:38:47.120

好的，经过大量修补后，我发现以下生成了所需的输出：

```
<!-- chapter.ditamap -->
<topicref href="objects/overview.dita" type="concept" chunk="to-content">
    <!-- topics to combine with parent -->
    <topicref href="objects/visualising-objects.dita" type="concept"/>

    <!-- changing-the-object-size.dita = nested topic -->
    <topicref href="changing-the-object-size.dita" type="task" chunk="to-content"/>
</topicref> 
```

或另一个稍微干净的标记（imo）：

```
<!-- chapter.ditamap -->
<topicref href="objects/overview.dita" type="concept" chunk="to-content">
    <!-- topics to combine with parent -->
    <topicref href="objects/visualising-objects.dita" type="concept"/>

    <!-- changing-the-object-size.dita = nested topic -->
    <topicgroup>
        <topicref href="changing-the-object-size.dita" type="task" chunk="to-content"/>
    </topicgroup>
</topicref> 
```

这会生成 2 个 HTML 文件，一个用于“Overview + Visualizing Objects”，另一个用于“Changing the Object Size”，嵌套在“Overview + Visualizing Objects”中。

不幸的是，我无法将组合主题放入其自己的单独地图中：

```
<!-- chapter.ditamap -->
<!-- objects.ditamap = combined topic -->
<topicref href="objects.ditamap" type="dita">
    <!-- changing-the-object-size.dita = nested topic -->
    <topicref href="changing-the-object-size.dita" type="task"/>
</topicref> 
```

（有什么想法吗？）

但是，至少我找到了解决方案！

# authorization - 结合使用 ImageResizer 安全地提供图像

> ID：11817729
> 
> 赞同：1
> 
> 时间：2012-08-05T15:38:02.353
> 
> 标签：authorization, asp.net-mvc-4, imageresizer

[这是关于之前与计算机语言学家讨论的后续/清理问题，希望我对此进行了足够的说明] ImageResizer 是否可以在站点根目录之外获取文件并提供服务（从而避免使未更改的原件在线可用）？或者这种情况的最佳实践是什么？

*是否应该将原件存储在站点根目录之外，在线存储基本调整大小的图像（通过 url auth / httpmodule 等保护），然后让 Imageresizer 根据该图像动态调整拇指等的大小？据我所知，我还没有找到一种方法来限制对文件夹的 100% 访问，除非通过 imageresizer 请求。如果 ImageResizer 可以调整大小，用户似乎可以访问它。

*或者也许是一个解决方案，控制器提供原始图像，然后由 ImageResizer 处理。

主要目的：

1.  能够完全自定义权限规则

2.  能够以安全的方式提供服务（至少据我所知，未经更改的用户上传的图像不应直接在站点根目录下访问）。保留原件似乎是一种面向未来的策略。

3.  能够利用 ImageResizer 即时调整大小的强大功能。

任何关于其他人如何实现这一点的意见也受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:25:48.357

1.  将文件定位在站点根目录之外不会完成任何事情。您仍然必须将它们安装为虚拟文件夹，以便再次访问它们。
2.  MVC 的编写方式使得它在这里绝对没用 - 它会拖延直到 ProcessRequest 做任何事情。
3.  ImageResizer 与这个问题完全无关 - 它的行为类似于 StaticFileHandler 出于您的目的 - 您需要一个通用授权系统。
4.  [ASP.NET URL 授权](http://msdn.microsoft.com/en-us/library/wce3kxhd%28v=vs.80%29.aspx)听起来可能不够复杂，无法满足您所需的复杂程度。

要完成自定义授权逻辑，您需要处理 HTTP 管道中的 AuthorizeRequest 事件并从头开始实现路径解析逻辑。您可以在 Global.asax.cs 中或通过实现 IHttpModule 来处理事件。

在 AuthorizeRequest 中，您可以在 ImageResizer 或任何其他 HttpModule 或 HttpHandler 看到它之前访问传入的路径和查询字符串数据，决定用户今天是否应该能够访问它，并让请求继续或抛出 HTTP 401 错误.

我建议使用 ILSpy 查看 System.Web.Security 中的 UrlAuthorizationModule。它只有几页代码，而且非常简单。

# c - 为什么我会在带有 ioctl 的内核模块中收到此编译警告？

> ID：11817734
> 
> 赞同：0
> 
> 时间：2012-08-05T15:38:45.710
> 
> 标签：c, linux-kernel

像这样定义时`t_ioctl`，我没有收到任何警告：

```
long t_ioctl(struct file *filep, unsigned int cmd, unsigned long input){ 
```

当`t_ioctl`这样定义时：

```
static long t_ioctl(struct file *filep, unsigned int cmd, unsigned long input){ 
```

我收到警告：

```
warning: 't_ioctl' defined but not used 
```

但是当它达到`t_read`或`t_write`静态和非静态函数声明不会引起警告时。例如：

```
static ssize_t t_read(struct file *filp, char __user * buf, size_t count, loff_t * f_pos); 
```

为什么我在一种情况下收到警告，而在另一种情况下却没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T17:11:22.087

您很可能在同一个文件中有这样的定义：

```
static struct file_operations fileops = {
    .read     = t_read,
    .write    = t_write,
    /* etc. ... */
}; 
```

而你不见了

```
.compat_ioctl = t_ioctl, /* or .ioctl/.unlocked_ioctl, depending on version etc. */ 
```

# objective-c - iOS从文本框中解析和int并将其分配给一个整数值以用于总和？

> ID：11817739
> 
> 赞同：1
> 
> 时间：2012-08-05T15:39:39.707
> 
> 标签：objective-c, ios, parsing

抱歉，我意识到这是一个简单的问题，但我是 iOS 开发和 Objective-c 的新手。

来自 ac# 背景，我会尝试解析文本框中的字符串，然后如果 true 将其分配给 int 以用于总和，然后将其分配给标签。

在 iOS 和 obj-c 中，我在上面遇到了一些问题，然后我需要释放和分配。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:11:29.117

你可以用它[`NSScanner`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)来做到这一点。例如：

```
NSString *test = @"45";
NSScanner *scanner = [[NSScanner alloc] initWithString:test];
NSInteger integer;
if ([scanner scanInteger:&integer])
{
    NSLog(@"The value is: %i", integer);
}
else
{
    NSLog(@"Didn't parse successfully.");
} 
```

作为另一个答案说明，您可以使用`intValue`or `integerValue`on `NSString`。这种方法有几点需要注意：

1.  如果解析失败，则返回 0。这使得无法确定解析的值是否实际为 0，或者解析是否刚刚失败。
2.  两者都`NSScanner`允许`intValue`空格，因此`    45`会成功解析。使用 NSScanner，如果您愿意，可以使用`setCharactersToBeSkipped`to nil 禁用它：

    ```
    [scanner setCharactersToBeSkipped:nil]; 
    ```

您可以从那里执行正常的算术运算，例如`integer + 20`，或对您解析的其他数字求和。

如果语言环境很重要（请参阅[Julien 的回答](https://stackoverflow.com/a/11818099/492405)），那么您可以`setLocale`在 NSScanner 上使用该方法[`NSLocale`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)，例如，如果我们想确保始终使用 en-US 语言环境：

```
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[scanner setLocale: locale]; 
```

* * *

> 我需要释放和分配什么。

这取决于很多事情。你在用ARC吗？如果是这样，那么 ARC 将为您处理发布。您可能需要[阅读](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)内存管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T15:53:46.243

从 UITextField 获取字符串（假设 *textField 是您的 UITextField）

```
int integetValue=[textField.text intValue]; 
```

然后你可以像普通整数一样对它进行求和。要将此值设置为 UILabel 你需要做（假设 sum 是你的整数摘要）：

```
[label setText:[NSString stringWithFormat:@"%d",sum]]; 
```

在这种情况下，您不需要分配/释放任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T16:30:39.107

这取决于您的字符串有多“国际化”。

如果您正在处理低级格式化数字（即您完全忽略了用户的语言环境），您可以使用`-[NSString intValue]`（或类似方法）或`-[NSScanner initWithString:]`将字符串转换为数字。您可以使用`"%d"`格式说明符（和其他格式说明符）将数字转换为字符串。

但是，您可能希望尊重用户的语言环境，其中小数分隔符可以是点或逗号，其中数字本身可以使用与通常的“阿拉伯数字”不同的字符集。

在这种情况下，您想使用`NSNumberFormatter`或设置`NSScanner`的语言环境。

请注意，选择要使用 all 解释数字的语言环境取决于字符串来自（或去往）的位置。

# php - 在非面向对象的 php 脚本中调用 yii 类

> ID：11817741
> 
> 赞同：0
> 
> 时间：2012-08-05T15:39:57.597
> 
> 标签：php, yii

我正在研究基于 Yii 框架构建的网站的投票部分，我正在使用 ajax 调用一个 php 脚本，该脚本应该加载一个答案模型并增加正面/负面投票，但是这个脚本无法访问模型类答案，如果我使用`require_once('Answer.php')`它给了我`ActiveRecord.php Class not found`，..我的脚本文件不是一个类，所以我不能扩展 ActiveRecord 类，我想知道是否有一种方法可以在我的脚本中加载答案模型而不会弄乱 Yii 代码，我是 yii 的新手,谢谢这里是我的js

```
function downVoteAnswer(id){
    var data= $.get("/codepacu/protected/models/votehandler.php",function(data){
    $('#ans-downvote-'+id).text(data);
    });

    } 
```

这是我的 php 脚本文件

```
require_once('Answer.php');
$model=Answer::loadModel(4);
$model->up_vote=$model->up_vote++;
$model->save();
echo $model->up_vote; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:56:20.887

这个错误不是 Yii 特有的，任何 PHP 代码都是这样：

只有当它的定义可用时，您才能使用一个类。在您的情况下，仅部分加载了定义。`Answer.php`您已经为模型类加载了文件`Answer`，但该类在多个文件中定义。

因此，这需要您加载更多文件。确定所有需要的类并需要相关文件。

这可能很多，所以通常最好在 Yii 本身中创建一些 ajax 控制器端点。

*   [使用 renderPartial 更新 AJAX 中的内容（yiiframework wiki）](http://www.yiiframework.com/wiki/49/)
*   [简单的 Yii ajaxLink（Bryan Marble；2010 年 5 月 12 日）](http://lostmahbles.com/simple-yii-ajaxlink/)
*   [在 yii 框架中发出 ajax 请求（Handita Okviyanto；2012 年 3 月 2 日）](http://mrhandscode.blogspot.de/2012/03/make-ajax-request-in-yii-framework.html)

# ruby-on-rails - 无法连接到Rails开发地址

> ID：11817742
> 
> 赞同：0
> 
> 时间：2012-08-05T15:40:01.353
> 
> 标签：ruby-on-rails, ruby, windows, http

我正在尝试运行 Rails 应用程序。我对此很陌生，所以我可能错过了一些明显的东西。我有窗户。我已经使用 Rails Installer for Windows 安装了 Ruby。我在命令提示符下。

```
rails new application
cd application directory
rails server 
```

然后它启动服务器，但我无法访问 0.0.0.0:3000 的 http 地址。我无法进一步输入任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:43:09.677

地址有点误导。打开浏览器，然后转到

```
localhost:3000 
```

这应该让您进入 Rails 默认页面。如果这不起作用，控制台输出应该为您提供更多信息（例如，当您请求页面时发生的任何应用程序错误）。

如果您决定切换到生产模式并部署在直接连接到 Internet 的真实服务器上，也不要相信`rails server`命令提供给您的 IP 地址 - 始终使用您的出站 IP 地址。

# java - 字符串缓冲区到字符串转换异常？

> ID：11817744
> 
> 赞同：4
> 
> 时间：2012-08-05T15:40:12.537
> 
> 标签：java, arraylist, stringbuffer

嗨检查下面的代码

```
 ArrayList x=new ArrayList();
   ArrayList<String>y=x;
   ArrayList<StringBuffer>z=x;
   y.add("Strings");
   System.out.println(z.get(0).toString()); 
```

我在 System.out.println 收到 Class Cast 异常

```
 java.lang.ClassCastException: java.lang.String
 at com.one.MainClass.main(MainClass.java:16) 
```

但是当我尝试

```
 System.out.println(z.get(0)) 
```

它正在工作为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:49:00.017

我假设您这样做是作为一个实验（如果不是，那么请阅读其他答案，了解您应该如何编写代码）。

x 是一个 raw `ArrayList`，您可以在其中放置任何类型的对象。

`y.add("string")`添加一个字符串。

z 是一个`ArrayList<StringBuffer>`并且需要 StringBuffers。当您调用`z.get(0)`时，JVM 会在返回之前尝试将索引 0 处的元素转换为 StringBuffer。那个演员失败了。

换句话说，虽然`StringBuffer s = z.get(0);`可以编译，但它会在运行时抛出 ClassCastException，因为`z.get(0)`它不是`StringBuffer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:43:07.530

关于您遇到问题的具体原因如下：

*   新的 ArrayList 已创建，为空
*   所有元素都输入到 String in y
*   所有元素都输入到 z 中的 StringBuffer
*   一个新元素被添加到这个数组列表中。
*   JVM 尝试将其转换为 String 和 StringBuffer
*   因为“Strings”不是 StringBuffer 的实例，所以抛出 ClassCastException。

为避免这种情况，不要将数组类型化为 String 和 StringBuffer。只选择一个。例如：

```
ArrayList<StringBuffer> myArrayList = new ArrayList<StringBuffer> 
```

如果要将 String 数组列表复制到 StringBuffer ArrayList 中，则必须遍历 z 中的所有项目以将它们转换为字符串缓冲区：

```
ArrayList x=new ArrayList();
ArrayList<String>y=x;
ArrayList<StringBuffer>z=new ArrayList<StringBuffer>();
for(String s : y)
    z.add(new StringBuffer(s)); 
```

原因是 StringBuffer 不扩展 String。导致问题的原因是您不能将字符串转换为字符串，例如对 StringBuffer 说“str”，即您不能这样做`StringBuffer s = (StringBuffer)"str";`。

要`ArrayList x`转换为`ArrayList<T>`， 的所有元素都`x`必须是扩展的或者是 的实例`T`。

此外，如果可能，您应该始终使用泛型类型。如果您不知道列表中的内容（例如），请使用：

```
ArrayList<?> x = new ArrayList<?>(); 
```

如果您知道更多，例如它将是另一个类的子类，请使用 `ArrayList<? extends T>`or `ArrayList<? implements T>`。这将帮助您避免未来的 ClassCastExceptions。

# c++ - 错误：此系统不支持“Cygwin GCC”

> ID：11817747
> 
> 赞同：1
> 
> 时间：2012-08-05T15:40:27.437
> 
> 标签：c++, eclipse, gcc, cygwin, eclipse-cdt

我正在尝试使用 Eclipse IDE（使用 Windows 7）创建我的第一个 C++ 可执行文件。我在构建时收到以下错误。

如何纠正它？

> ERROR:: 无法获取主线程的上下文，错误 998

信息：配置“调试”使用**此系统不支持的工具链“Cygwin GCC”，**无论如何都尝试构建。

做所有

'构建文件：../src/LestTest.cpp' [sig] C:\cygnus\cygwin-b20\H-i586-cygwin32\bin\make.exe 1000 (0) call_handler: 无法获取主线程的上下文, 错误 998

重击

![在此处输入图像描述](../Images/309b051ac628113911248564da539a75.png)

Path 环境变量有以下内容

> C:\cygwin\bin\

请看以下eclipse的截图

![在此处输入图像描述](../Images/cb39772febd38d16acf389d69559673b.png)

![在此处输入图像描述](../Images/1940a10d0477055cdb03410ceb19f76d.png)

![在此处输入图像描述](../Images/13ce373232ba94262bfabc12a1eebd48.png)

![在此处输入图像描述](../Images/8340eb6cd464ad61ff53c10fe6093bbf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:11:14.153

First of all, you do appear to have Cygwin installed, but it appears to be an ancient version. I suggest that you uninstall the version you have, download the setup program from [here](http://www.cygwin.com/) and install the current version. Be sure to select g++ to be installed.

UPDATE: On second thoughts, if you don't have a specific requirement to use Cygwin, it might be easier to use MinGW instead. Installation instructions are [here](http://www.mingw.org/wiki/InstallationHOWTOforMinGW).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:32:00.863

使用错误中提到的“Bash”进行测试[：在 PATH 中找不到程序“make”](https://stackoverflow.com/questions/11817994/error-program-make-not-found-in-path)

确保 Bash 结果指向 Cygwin 中提到的位置

构建代码 - 这会生成一个二进制文件夹

运行应用程序

# javascript - 在触摸屏上拖放

> ID：11817750
> 
> 赞同：8
> 
> 时间：2012-08-05T15:40:40.683
> 
> 标签：javascript, drag-and-drop, touch

我一直在寻找关于这些事件如何运作的明确指南，现在我比开始时更加困惑。

我网站的某些功能涉及拖放。目前，通过让用户选择项目，点击“移动”按钮，然后触摸放置点来支持移动设备（或任何没有鼠标的设备）。虽然这很有效（项目在可见的网格上），但它并不像拖动那样用户友好。

我最初的理解是，无论我在哪里分配`element.onmousedown`，我也可以简单地将相同的处理程序分别分配给，`element.onmousemove`和。`element.onmouseup``element.ontouchstart``element.ontouchmove``element.ontouchend`

但是，这留下了以下问题：

*   如何获取触摸点的坐标，它与什么相关？
*   视图是否会被平移（默认的拖动操作），如果可以，是否可以取消？
*   如果一根手指碰巧在可拖动元素上，如何避免干扰多点触控操作，例如捏合缩放？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-01T22:57:58.577

其他答案更好地解决了原始问题，但是对于像我一样发现此链接试图使现有的单击/拖动（鼠标）功能在触摸屏上工作的后代来说，这是一个非常简单的解决方案。

如果要添加事件侦听器，则可以将相应的 'touchstart' 行添加到“mousedown”，如下所示：

```
 document.getElementById('throttle').addEventListener('mousedown', mouseDown, false);
 document.getElementById('throttle').addEventListener('touchstart', mouseDown, false); 
```

对任何 mousemove (touchmove) 和 mouseup (touchend) 执行相同的操作。

在您的函数中，当您获得鼠标坐标时，请使用：

```
 var top = e.clientY || e.targetTouches[0].pageY; //the same syntax for the x value 
```

这样，它首先检查鼠标单击和拖动，然后如果未定义，它会寻找触摸交互。

就像我说的，非常准系统，但它让我开始工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T16:13:31.937

您可以通过测量设备宽度/高度（window.innerHeight/window.innerWidth）来确定坐标。

这篇文章是触摸事件和覆盖它们的一个很好的起点：http: [//www.html5rocks.com/en/mobile/touch/](http://www.html5rocks.com/en/mobile/touch/)

多点触控手势不应干扰可拖动元素。如果它们有干扰，您可以在事件处理程序中使用条件： (event handler) if (event.touches === 1) 处理事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:41:29.037

以下是关于移动和桌面屏幕坐标之间差异的简短摘要：[screenX/Y、clientX/Y 和 pageX/Y 有什么区别？](https://stackoverflow.com/questions/6073505/what-is-the-difference-between-screenx-y-clientx-y-and-pagex-y/11280547#11280547)

还有一个实现`touchmove`事件监听器的工作示例：

```
 this.canvas.addEventListener("touchmove", function(e) {
        e.preventDefault();
        touchPosition(e);
    }, false);

var getCanvasPos = function(el) {
    var canvas = document.getElementById(el) || this.getCanvas();
    var _x = canvas.offsetLeft;
    var _y = canvas.offsetTop;

    while(canvas = canvas.offsetParent) {
        _x += canvas.offsetLeft - canvas.scrollLeft;
        _y += canvas.offsetTop - canvas.scrollTop;
    }

    return {
        left : _x,
        top : _y
    }
};

var touchPosition = function(e) {
    var mouseX = e.clientX - this.getCanvasPos(e.target).left + window.pageXOffset;
    var mouseY = e.clientY - this.getCanvasPos(e.target).top + window.pageYOffset;
    return {
        x : mouseX,
        y : mouseY
    };
}; 
```

# ios - 在视图控制器之间移动和传递数据的正确方法

> ID：11817752
> 
> 赞同：0
> 
> 时间：2012-08-05T15:40:51.573
> 
> 标签：ios, uinavigationcontroller, segue

我的根控制器是一个带有静态单元格和导航控制器的 TableViewController。根据选择的单元格，我想推送另一个 ViewController（带有嵌入式 TableView），它将相应地更改其配置（是否启用按钮，来自 db 表或 NSArray 的单元格数据等）。选择一些“控制器 A”单元格将调用“控制器 B”或“控制器 C”并传递一些数据。

我正在尝试的代码如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
   switch (indexPath.row) {
        case 0:
        {
            [self performSegueWithIdentifier:@"segueToType" sender:self];
        }
            break;
        case 1:
        {
            [self performSegueWithIdentifier:@"segueToType" sender:self];
        }
}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

if ([[segue identifier] isEqualToString:@"segueToType"])
{
    NSIndexPath *selectedIndexPath = [self.tableView indexPathForSelectedRow];
    NSInteger rowNumber = selectedIndexPath.row;
    switch (rowNumber) {
        case 0:
        {
            TypeSelectController *selCon = [segue destinationViewController];
            selCon.myPet = self.myPet;
            selCon.sel = @"tipo";
            selCon.delegate = self;
        }
            break;
        case 1:
        {
            TypeSelectController *selCon = [segue destinationViewController];
            selCon.myPet = self.myPet;
            selCon.sel = @"razza";
            selCon.delegate = self;
        }
            break;
        default:
            break;
    }

} 
} 
```

例如，在这种情况下，我只调用“控制器 B”，但根据“控制器 A”的选定单元格，它以不同的方式配置自身（取决于“selCon.sel”字符串）。

在“控制器 B”中，我有这样的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if ([sel isEqualToString:@"tipo"]) {
    NSString *itemToPassBack = [tipi objectAtIndex:indexPath.row];
    [self.delegate addItemViewController:self didFinishEnteringItem:itemToPassBack ofType:@"tipo"];
    [self.navigationController popViewControllerAnimated:YES];
} else if ([sel isEqualToString:@"razza"]) {
    NSString *itemToPassBack = [razze objectAtIndex:indexPath.row];
    [self.delegate addItemViewController:self didFinishEnteringItem:itemToPassBack ofType:@"razza"];
    [self.navigationController popViewControllerAnimated:YES];
}
} 
```

同样，根据字符串“sel”值，我将不同的数据返回到“控制器 A”。

当我选择控制器 A 中的第一个单元格时，我正确地获得了控制器 B 场景。然后我选择一个单元格并返回正确数据的控制器 A。现在，如果我尝试在控制器 A 中选择第二个单元格并在控制器 B 中选择一个单元格，则导航不会按我的意愿响应并且我得到控制器 C 场景，然后是控制器 A 和以下错误：

嵌套推送动画可能导致导航栏损坏

在意外状态下完成导航转换。导航栏子视图树可能会损坏。

开始/结束外观转换的不平衡调用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:55:39.943

在故事板示例中使用协议和委托的快速示例。只是在这里打亮点，因为你已经大部分时间了。

控制器 a（父）。有一个名为 category 的 NSString 属性和一个名为 partNumber 的属性。有一个表视图。选择行来启动一个segue。[self performSegueWithIdentifier:@"segueToType" sender:self];

*   (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([[segue identifier] isEqualToString:@"segueToType"]) {
ControllerB *b = segue.destinationViewController; b.category = self.category; b.代表=自我；}

视图控制器 B

@protocol -(void)doSomethingWithPickedPartNumber:(NSString *)partNumber; @结尾

//使用传入的类别的零件号设置表格视图。

//选择行所以我们有我们想要发回的partNumber。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *pn = [self.listOfParts objectAtIndex:indexPath.row];

 //options - set the variable in the parent or call a method in the parent
 self.delegate.partNumber = pn;
 //if you set the variable in the parent - you can check for it in the -(void)viewWillAppear  method and reconfigure the parent view if needed

 //or do this
 [self.delegate doSomethingWithPickedPartNumber:pn];

 //this is actually calling a method in the parent.  remember you don't have a view you can see yet, but its in memory and you can modify things so when the child pops back it will look how you want it.  Also note, you can name the protocol methods what ever you want, as long as they match up from the parent  to the protocol in the child.

 //then return to parent
 [self.navigationController popViewControllerAnimated:YES]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:28:12.943

好的，再试一次。

*   让我们使用头发颜色的例子。您在控制器 a 中有一个表格，其中有一个用于头发颜色的静态单元格。假设您显示所选颜色的文本值。cell.textLabel = self.hairColor。如果它是空白的，用户可以触摸单元格并打开一个新的控制器来选择颜色。

在您选择的新视图控制器中，您设置了一个属性来告诉它查找“hairColor”。因此它从一个名为 listOfHairChoices 的数据库构建一个列表。

用户选择第三行，因此您可以像这样使用委托引用在父级中设置属性。self.delegate.hairColor = [self.listOfHairChoices objectAtIndex:indexPath.row]; 然后弹出关闭子 vc 并弹回父级。[self.navigationController popViewCon..etc]

然后回到父级，在 -(void)viewDidAppear 中，您只需像这样重新加载您的表格视图： [self.tableView reloadData]

现在，您的原始 tableview 应该显示在子视图控制器中选择的单元格的值。

这是一种直接的方法，并且在每个步骤中都需要逻辑来确定您正在使用哪些属性以及需要设置哪些属性 - 但将与您现有的框架一起使用。

另一种方法是创建您正在呈现的数据的模型类，然后将模型传递给子 VC - 让他们更新模型并将其传回，然后只需在每次转换后从更新的模型中重新加载您的表。您可能不熟悉这种方法，但它简化了事情并减少了您现在为 tableview 的每一行所拥有的所有条件逻辑。

希望这个建议对您的项目有所帮助。

# java - jStyleParser 无法解析我的 html 文件

> ID：11817755
> 
> 赞同：0
> 
> 时间：2012-08-05T15:41:35.463
> 
> 标签：java, css, parsing, dom, jstyleparser

我正在尝试使用 jStyleParser 库（CSSBox 项目的一部分）来分析通用网页的 css 并将所有 css 信息绑定到该页面的 DOM。我的目标是，给定一个网页，拥有一个 DOM 树，这样，对于每个节点，我可以获得所有与该节点相关的 css 信息。

这是（部分）我的代码：

```
System.out.println("Analizing "+Mylocalfile.getAbsolutePath()); 
StyleSheet ss = CSSFactory.parse(Mylocalfile.getAbsolutePath(), "UTF-8");
if (ss.isEmpty()) System.out.println("StyleSheet is void"); 
```

parse 方法似乎无法解析文件：StyleSheet ss 实际上是无效的。

你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:56:40.530

只要*MyLocalFile*指向 CSS 样式表 (*.css)，您的代码就是正确的。*在这种情况下，您应该在ss*中获取已解析的样式表，但它没有绑定到任何 DOM。如果您仍然获得空样式表，则可能是 CSS 代码甚至解析器中存在错误。在这种情况下，我建议向[SourceForge 的 jStyleParser 论坛](http://sourceforge.net/projects/cssbox/)报告。

如果要将样式定义分配给 DOM（*MyLocalFile*指向 HTML 文件），则应使用[jStyleParser 手册](http://cssbox.sourceforge.net/jstyleparser/manual.php)中描述的*assignDOM*方法。在这种情况下，您应该使用 DOM 解析器解析 HTML 文档，并使用*assignDOM*方法自动检索引用的样式表并计算元素样式。您可以在 jStyleParser 源包的 src/test/DOMAssign.java 中找到一个示例。

# javascript - 设置子视图控制器 emberjs

> ID：11817758
> 
> 赞同：0
> 
> 时间：2012-08-05T15:42:00.883
> 
> 标签：javascript, ember.js

```
{{#each posts}}
  {{view App.PostView controller=App.PostController}}
{{/each}} 
```

但这总是得到 parentView 控制器而不是 PostController。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:41:25.147

I think you miss putting App.PostController between double quotes. The controller have to be an instance, not a class here. So you have to instantiate App.PostController in your js code beafore using it in the template.

# xcode - Xcode 4.4 & 4.5 在项目关闭时冻结

> ID：11817771
> 
> 赞同：1
> 
> 时间：2012-08-05T15:43:50.920
> 
> 标签：xcode, xcode4, freeze, xcode4.5, xcode4.4

自从升级到 Xcode 4.4 并再次升级到 4.5（在 Lion 上运行）后，每次我关闭我的应用程序项目或退出时，Xcode 似乎都会冻结大约 3-5 分钟。在此期间，活动监视器显示 CPU 固定在 95%，尽管磁盘活动很少。

我已经尝试卸载并重新安装 Xcode，但这并没有什么不同。

还有其他人遇到这种情况吗？有什么建议我能做什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:42:03.220

报告此问题：[https ://discussions.apple.com/thread/4160869?start=0&tstart=0](https://discussions.apple.com/thread/4160869?start=0&tstart=0)

# python - 调用解释器作为 python3 vs python3.2

> ID：11817772
> 
> 赞同：2
> 
> 时间：2012-08-05T15:43:58.170
> 
> 标签：python

有区别吗？

我假设没有，因为本教程的[第 2 章和](http://docs.python.org/py3k/tutorial/interpreter.html)我在 SO 和 Google 上的任何搜索都没有透露任何内容。

我对我的 python3 二进制文件和 python3.2 二进制文件进行了 md5 总和，它们是相同的。

出于好奇，我只是想知道它是否就像在只有 bash 兼容模式的系统上运行 sh 或类似的东西。

编辑：更清楚的是，这是使用 Mac OS X 安装程序从 python.org 安装的带有 Python 3 的 Mac OS X。它们不是符号链接，但实际上是两个独立的二进制文件。从提供的答案以及它们在其他系统上的符号链接方式告诉我，不，没有兼容模式或类似的东西，只需使用 python3。;） 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T15:52:11.677

您没有指定您的操作系统，但在 Ubuntu（可能还有许多其他系统）上，将 python 和 pythonX 链接到 pythonX.Y 是正常的做法。在我的系统上，我安装了 2.7，所以 python 和 python2 链接到 python2.7。可能你有类似的东西。

我通常建议使用最不具体的名称，以保证您需要什么。如果您只需要任何特定版本的 python，请调用 python。如果您需要版本 3.X，则调用 python3。如果出于某种原因，您需要 python3.2，请调用它。尽可能不具体意味着随着新版本的出现而减少更新，并提高您的脚本可移植到可能没有安装您的特定版本的其他系统的机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:47:06.280

一般来说，这取决于您的系统。在您的系统上，由于 md5sum 与 python3 和 python3.2 匹配，因此它们是相同的。

它们很可能是同一个二进制文件的符号链接。

以下是您可以进一步调查的方法：

```
% which python3
/usr/bin/python3
% which python3.2
/usr/bin/python3.2
% ls -l /usr/bin/python3 /usr/bin/python3.2 /usr/bin/python3.2mu
lrwxrwxrwx 1 root root       9 2011-10-05 16:53 /usr/bin/python3 -> python3.2
lrwxrwxrwx 1 root root      11 2011-09-05 19:04 /usr/bin/python3.2 -> python3.2mu
-rwxr-xr-x 1 root root 2852896 2011-09-05 19:04 /usr/bin/python3.2mu 
```

在某些时候，如果您安装 Python3.3，安装程序可能会更改符号链接，以便 python3 指向 python3.3。

因此，您可以编写脚本来使用 python3：

```
#!/usr/bin/env python3 
```

并且将使用最新版本的 Python3。

# c - Libxml2 没有在第一行解析有效的 xml 文件（段错误）

> ID：11817775
> 
> 赞同：0
> 
> 时间：2012-08-05T15:44:42.357
> 
> 标签：c, xml, parsing, libxml2

我安装`libxml2`并用于编译读取 xml 文档的示例文件。我使用以下标记，所以我使用的是 libxml2：

```
gcc `xml2-config --cflags xml2-config --libs` libxml.c 
```

但是它在解析文件的第一行就崩溃了：

```
Error: <unknown>:1: syntax error near line 1
context: <?xml version="1.0" >>>  encoding="UTF-8"?> <<< 
Segmentation fault 
```

我知道这是一个有效的 xml 文件，xml 文件的前几行如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<sbml xmlns="http://www.sbml.org/sbml/level3/version1/core" level="3" version="1">
  <model metaid="_case00010" id="case00010" name="case00010" timeUnits="time"> 
```

以前有人遇到过这个错误吗？谢谢。

这是我在运行 gdb 时得到的，但不确定它的含义：

```
Cannot find new threads: generic error 
```

代码从这里逐字记录：[http ://www.xmlsoft.org/examples/parse1.c](http://www.xmlsoft.org/examples/parse1.c)

并且 xml 文件通过了验证检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:40:18.290

For some reason it is not linking right the libraries when the file name is at the end. I put the linkage info at the end and it wokred:

`gcc 'xml2-config --cflags' libxml.c 'xml2-config --libs'`

# multithreading - 在另一个线程中使用 QSqlQueryModel 并通过主线程的指针直接访问它？

> ID：11817776
> 
> 赞同：1
> 
> 时间：2012-08-05T15:45:02.227
> 
> 标签：multithreading, qt

我使用 QSqlQueryModel 的子类来公开我的 QML 项目中 ListView 的数据。我想同时做这两个：

1.  **使用模型的指针**`setContextProperty()`将模型公开给 QML 。

***   将模型留在另一个线程中，这样当我调用模型`update()`函数（执行最后一个查询以反映数据库中更改的数据）时，模型在重新查询数据库时不会阻塞 UI。** 

 **是否可以？如果没有，更好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:41:32.923

我的解决方案是：子类`QThread`，将`QmlApplicationViewer`指针传递给它的构造函数，在新类`DatabaseQueryThread`中，我在那里为查看器设置上下文属性。这样，Qt 将允许我直接通过指针提供对查询模型的访问。**

# ios - viewcontroller 释放导致崩溃或奇怪现象

> ID：11817780
> 
> 赞同：0
> 
> 时间：2012-08-05T15:45:41.393
> 
> 标签：ios, uiviewcontroller, release, addsubview

我有一个非常简单的 ViewController 包含以下内容：

```
@interface ServingsView : UIViewController
@property (retain, nonatomic) IBOutlet UILabel *labelTitle;
@property (retain, nonatomic) IBOutlet UILabel *labelContent;
@property (retain, nonatomic) IBOutlet UIButton *buttonSelect; 
```

我没有在这个控制器的 m 文件中添加任何代码。

现在，我正在创建这个视图控制器并将其视图添加到滚动视图中：

```
 for (NSSubArray * Choice in currentItem.ItemsArray)
    {
        stView * ChoiceView=[[stView alloc]initWithNibName:@"stView" bundle:nil];
        ChoiceView.view.tag=1515;
        [mScrollView addSubview:ChoiceView.view];
        ChoiceView.view.frame=CGRectMake(0, [self getMinimumHeight]+h*ChoiceView.view.frame.size.height , 320, ChoiceView.view.frame.size.height);
        ChoiceView.labelTitle.text=Choice.ArrayName;

        [ChoiceView.buttonSelect addTarget:self action:@selector(onSubservingItemClicked:) forControlEvents:UIControlEventTouchUpInside];

        ChoiceView.buttonSelect.tag=h;
        h++;
        increaseHeight+=ChoiceView.view.frame.size.height;
        // here is the problem:
        [ChoiceView release];
    } 
```

现在，我没有在任何地方使用 ChoiceView。发生的事情是，按钮甚至没有显示，并且该视图没有任何响应。在其环境中使用视图滚动时，我遇到了不同类型的异常。有时它的 CALayer 异常，有时是 stView 异常。当我删除发布线时，一切正常。

我什至创建了一个测试项目，它没有在那里发生，所以我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:56:06.570

不要做类似的事情`[mScrollView addSubview:ChoiceView.view];`。如果您查看有关视图控制器包含的 Apple 视频，您会发现他们将其描述为不一致的视图层次结构：[https ://developer.apple.com/videos/wwdc/2011/?id=102](https://developer.apple.com/videos/wwdc/2011/?id=102)

要么按照定义将视图作为滚动视图的视图层次结构的一部分，要么创建一个使用提供的父/子方法的容器视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:55:24.060

好的，这是一个非常奇怪的答案！经过多次测试和一个未能引发此错误的模拟应用程序后，我将故障控制器添加到另一个应用程序。得到了同样的结果！所以，我已经完全删除了它并创建了一个新的......现在它正在工作。

苹果 - 去想...

# javascript - 按类名删除表行 - Javascript

> ID：11817788
> 
> 赞同：2
> 
> 时间：2012-08-05T15:46:17.587
> 
> 标签：javascript, dom

我浏览了很多关于这个简单代码的论坛帖子。并尝试了许多变化和方法，但没有任何效果。

我有一个基于数据库查询构建表的脚本。我将其限制为 10 个结果，并提供前进和后退按钮以转到数据库中的其他结果。当您按下下一步按钮时，我需要它删除所有当前表行，以便它可以使用查询的新结果重新创建它们。我正在使用以下代码删除行；

```
if (document.getElementsByClassName('shiftTrRow')) {
    table = document.getElementById('resultsTable')
    deleteRow = document.getElementsByClassName('shiftTrRow');
    table.removeChild(deleteRow);       
} 
```

我使用 if 案例来检查是否有任何行要删除，我添加了一个警报来测试是否发现了行并且这有效。

当我运行代码时，我在该行收到以下错误：

```
table.removeChild(deleteRow)

Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

我查看了错误代码，它解释了找不到该元素，但事实并非如此，因为该代码只有在找到该元素时才会执行。如果有人知道我做错了什么或更好的方法来做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:53:51.267

`document.getElementsByClassName`将返回 a `NodeList`，而不是单个节点。您需要从该列表中选择一个节点，例如`document.getElementsByClassName('shiftTrRow')[0]`.

还要确保节点实际上是给定表的子节点。以下代码更安全一点：

```
if (document.getElementsByClassName('shiftTrRow'))
{    
    deleteRow = document.getElementsByClassName('shiftTrRow')[0];

    if(deleteRow.parentNode)
        deleteRow.parentNode.removeChild(deleteRow);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:52:31.013

```
document.getElementsByClassName('shiftTrRow')
                   ^ 
```

返回一个[NodeList](https://developer.mozilla.org/en-US/docs/DOM/Nodelist)，即一个元素数组。您将需要遍历它们并自行删除它们中的每一个（但请注意，该集合是实时的，并且在您删除元素时会缩小）。

此外，[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)可能会返回根本不是该表行的元素，从而导致`NOT FOUND`您收到异常。

但是，从表中删除行的最简单方法是它的[`deleteRow`方法](https://developer.mozilla.org/en-US/docs/DOM/table.deleteRow)：

```
var table = document.getElementById('resultsTable');
while (table.rows.length > 0)
    table.deleteRow(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T15:52:56.490

`document.getElementsByClassName`返回一个元素数组。`table.removeChild`它的参数需要一个 DOM 元素，而不是数组。

# android - 安卓。2D游戏开发

> ID：11817789
> 
> 赞同：22
> 
> 时间：2012-08-05T15:46:52.597
> 
> 标签：android

我想开始为 Android 开发一款 2D 游戏，但我一点也不知道从哪里开始。例如，愤怒的小鸟游戏是如何开发的？我猜这是一个2D引擎还是什么？

任何人都可以对此事有所了解吗？任何事情都值得赞赏，因为我对首先看哪里的想法为零。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T11:42:20.160

我已经广泛使用了 AndEngine，我真的很喜欢它但是

2D 游戏——除非你有一些非常非常复杂的想法（大量的物理和碰撞检测），我建议你考虑用普通的旧 HTML（具体来说是 HTML5）来创建它们。

为什么？

因为 HTML5 几乎可以在任何地方工作，并且有一些非常不错的工具包可以制作更复杂的东西（包括关卡编辑器和基本的物理东西）。

此外，您可以将 HTML5 转换为适用于 Android、iOS 和其他平台的应用程序 - 例如，您的游戏几乎可以在任何地方运行，而无需付出额外的努力。使用 Cordova(phonegap) 之类的工具甚至可以让您在使用 HTML5 代码创建的应用程序中访问相机和倾斜传感器等内容（Android 上的海豚浏览器甚至允许这些应用程序在浏览器中运行！）

如果您确实想要更高级的东西，Corona 相当不错，而且易于学习且跨平台 - 如果您很高兴被困在 Android 上，Andengine 非常棒！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-28T14:06:04.963

我推荐 LIBGDX

[http://libgdx.badlogicgames.com/index.html](http://libgdx.badlogicgames.com/index.html)

开源、java、跨平台、对 Open-GL 的良好支持、大量示例和良好的社区。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-05T16:07:57.160

Yes, Angry Birds was developed on its own 2D engine. I recommend to look at these engines:

[Corona SDK - really simple crossplatform(!) engine. Nice one to start.](http://www.coronalabs.com/)

[AndEngine - havent any type of documentation, but there are a lot of references and useful extensions, including Multiplayer. Good community](http://www.andengine.org/)

Marmalade (AirPlay SDK) - really powerful, but complex engine. Many hits were made on it

Also you can use Unity3D with 2D extension. Its awesome engine.

Good luck with your beginnings ;)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-07T05:28:17.497

个人而言，要开始您的第一个 2D 游戏，不要立即开始使用游戏引擎或 2D 框架。

这是我仅使用位图操作逻辑和运行游戏的 java 线程开发的游戏。

[降落伞企鹅](https://play.google.com/store/apps/details?id=com.positivesthinking.parachutepenguinsfree)

[https://play.google.com/store/apps/details?id=com.positivesthinking.parachutepenguinsfree](https://play.google.com/store/apps/details?id=com.positivesthinking.parachutepenguinsfree)

1.  创建一个用作游戏循环的 Java 线程。
2.  利用 SurfaceView 和操作位图和 onClickListeners 可以实现简单的 2D 游戏。

一旦你对它感到满意，就选择游戏引擎和框架。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-05T16:02:58.617

我会推荐AndEngine。他们有一个非常好的论坛，而且他们的示例代码几乎是不言自明的。

如果您正在寻找先机，请按照本[教程](http://jimmaru.wordpress.com/2011/09/28/andengine-simple-android-game-tutorial/)进行操作。

去AndEngine！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-11T10:30:55.220

[Felgo](https://felgo.com/) (felgo.com) 为任何技能水平提供了几个教程。它是一个跨平台的 2D 游戏引擎。已经有一个使用 Felgo 制作[的开源 Angry Birds克隆。](https://github.com/FelgoSDK/FlappyBird)它还为最成功的游戏类型（如塔防、平台游戏或益智游戏）提供即用型游戏模板，并提供可重复使用的组件来处理多种显示分辨率和纵横比、动画、粒子、物理、多点触控、手势、寻路等，可在几天内制作原型和构建游戏 [API 参考](https://felgo.com/doc/felgo-group.html)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-09T20:09:39.253

我已经在另一篇文章中回答了类似的问题：[Android 2D game development without an engine](https://stackoverflow.com/questions/10311841/android-2d-game-development-without-an-engine)

[我在http://www.youtube.com/watch?v=PnnHGCKrIzw](http://www.youtube.com/watch?v=PnnHGCKrIzw)发布了一个教程

假设您熟悉 Java、Eclipse（或类似的编译器）、Google API 等。以下是构建完整的 2D Android 游戏的步骤：

1.  对精灵图像使用 drawable-nodpi（使精灵大小在屏幕密度和大小上保持一致）

2.  使用不同的布局来支持各种屏幕尺寸（例如 layout-large、layout-xlarge 等...）

3.  使用 TranslateAnimation 和 ObjectAnimator 对屏幕上的精灵运动进行动画处理

4.  使用数学计算精灵碰撞（例如屏幕坐标和精灵位置等）

5.  使用处理程序和条件语句来控制游戏事件

您可以通过查看 Google Play 上的 Yum Yum Pow 游戏来测试按照上述指南开发 2D Android 游戏的结果。免费的限量版也可在 Google Play 上获得，并可在以下网址下载：

[https://play.google.com/store/apps/details?id=com.wildroid.yum.yum.pow.limited](https://play.google.com/store/apps/details?id=com.wildroid.yum.yum.pow.limited)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-05T15:54:20.653

这一切都有据可查！

试试这里，这帮助我加载：[http ://www.javacodegeeks.com/2011/06/android-game-development-tutorials.html](http://www.javacodegeeks.com/2011/06/android-game-development-tutorials.html)

# c# - c#中的宏替换

> ID：11817791
> 
> 赞同：0
> 
> 时间：2012-08-05T15:46:57.043
> 
> 标签：c#, winforms

我正在尝试在 c# 中进行宏替换。其实我正在努力学习c#。我在视觉狐狸经验丰富。

无论如何，这是我需要的：

假设我正在尝试以编程方式添加新控件：

```
ProgressBar progressBar1 = new ProgressBar();
progressBar1.Size = new System.Drawing.Size(516, 23);
progressBar1.Location = new Point(10, 36);
groupBox4.Controls.Add(progressBar1); 
```

现在我需要知道一种方法如何替换控件的名称（progressBar1）并获取字符串变量的名称，以便我可以使用 for 语句创建多个进度条？

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:56:28.187

您必须将代码放在 for 循环中以创建多个进度条实例，如果您想保留项目的引用，您可以将它们存储到字典中，例如：

```
Dictionary<int, ProgressBar> progressBars = new Dictionary<int, ProgressBar>();

for(int i = 0; i < someValue; i++) {
ProgressBar progressBar = new ProgressBar();
progressBar.Size = new System.Drawing.Size(516, 23);
progressBar.Location = new Point(10, 36);
groupBox4.Controls.Add(progressBar);
progressBars.Add(i, progressBar);
} 
```

因此，现在您可以通过索引（或您定义为键的其他内容）在字典中查找所需的进度条...

使用索引 3（通过索引器）取回进度条的示例：

```
ProgressBar bar = progressBars[3]; 
bar.Value = //Assign some value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:57:14.137

progressBar1 不是控件的名称。是用于与 ProgressBar 的当前实例一起使用的 ProgressBar 类型的变量的名称。

从 Control 派生的每个类都有一个称为字符串类型[名称的属性。](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.name.aspx)

```
int xPos = 10;
int yPos = 36;

// Add 10 progressbars to the groupbox control collection
for(x = 0; x < 10; x++)
{
    yPos = yPos + (x * 30);
    ProgressBar progressBar1 = new ProgressBar(); 
    progressBar1.Name = "pgb" + x.ToString();
    progressBar1.Size = new System.Drawing.Size(516, 23); 
    progressBar1.Location = new Point(10, yPos); 
    groupBox4.Controls.Add(progressBar1); 
} 
```

要检索您添加的进度条之一，您可以简单地使用组框的控件对象集合。

```
ProgresBar pb = groubBox4.Controls["pgb1"] as ProgressBar;
pb.Increment(1); 
```

# c++ - 素因数输出 - 有什么问题？

> ID：11817796
> 
> 赞同：-1
> 
> 时间：2012-08-05T15:47:31.163
> 
> 标签：c++, primes

我正在参加[UVA 在线编程竞赛](https://en.wikipedia.org/wiki/UVa_Online_Judge)，并且正在研究 UVA 583（主要因素）的解决方案。

我最近为此做了一个 Java 解决方案，并被接受了。当我尝试将它翻译成 C++ 时，它总是得到 WA（“错误答案”），即使对于我制作的每个测试用例，两个程序都输出相同的答案。

谁能指出什么问题？

```
#include <iostream>
#include <string>
#include <cmath>
#include <stdio.h>
using namespace std;
int primes [4792];
void factorize(int x1){
    int c = 0;
    for(int i = 0;i<4792;i++){
        int x2 = primes[i];
        while(x1%x2==0){
            if(c!=0)
                cout<<" x ";
            cout<<x2;
            c++;
            x1/=x2;
        }
    }
    if(x1>1 && c!=0){
        cout<<" x "<<x1;
    }
    if(c==0)
        cout<<x1;
    cout<<endl;
}
int main(){
    primes[0]=2;
    primes[1]=3;
    int count = 2;
    for(int i=5; i<46340;i+=2){
        if(i%6 != 1 && i%6 != 5)
            continue;
        int limit = (int)sqrt((double)i);
        bool isPrime = true;
        for(int j=0;j<count;j++){
            if(primes[j]<limit){
                if(i%primes[j]==0){
                    isPrime = false;
                    break;
                }
            }
        }
        if(isPrime){
            primes[count]=i;
            count++;
        }
    }
    int x = 0;
    cin>>x;
    while(x!=0){
        string out;
        cout<<x<<" = " ;
        int x1 = x;
        if(x<0){
            cout<< "-1 x ";
            x1*=-1;
        }
        factorize(x1);
        cin>>x;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:49:06.020

```
while((double)x1/(double)x2 == (double)(x1/x2)){ 
```

这几乎总是一个坏主意。由于浮点运算的精度有限，您最终可能会遇到在数学意义上两者完全等价的情况，但上面的测试结果为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:57:34.320

在您的`factorize(int x1)`，就在上面`while`，添加`if (x2*x2 > x1) break;`.

在你的`main()`,`if(primes[j]<limit){`应该使用 `<=`并且它应该有`else`子句 with `{break;}`。`<`代替`<=`我很惊讶它在 Java 中对你有用。

实际上，在`<`那里，您的代码无法识别 46340 以下的前 46 个素数 - 它会将它们放在*数组末端*¹之后，它们仍然无法触及。写过去数组的结尾本身就是不好的。

¹那是因为它错误地将素数的平方识别为素数，并且在 5 到 46340 之间有 46 个这样的平方。

# haskell - 不在 Cabal 中启用共享库支持的原因

> ID：11817797
> 
> 赞同：1
> 
> 时间：2012-08-05T15:47:33.463
> 
> 标签：haskell, dynamic-linking, cabal

我正在寻找为 Ruby-to-Haskell 桥安装 Hubris。

[最近的安装说明](https://stackoverflow.com/questions/11493620/hubris-fails-to-install-with-missing-c-libraries-ruby-ruby-ruby)说我需要在 Cabal 中启用共享库支持。我可能不想这样做有什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:39:53.397

一个原因是，当您使用共享的 Haskell 库构建二进制文件时，它们会受到您本地安装的 Haskell 包的任何未来损坏的影响。换句话说，当您升级库时，您将不得不保留旧`.so`文件或重建程序。`-dyn`这就是 Debian 尚未为除了引导包集之外的任何库提供包的主要原因。

（我猜，cabal-install 不会卸载东西的事实在这里有点帮助。但尽管如此，我不想担心用`cabal-install`或在里面做某事`.cabal`可能会破坏现有程序。

# ios - 无法使用命令行构建 iOS 项目，但可以通过 Xcode 界面构建

> ID：11817801
> 
> 赞同：4
> 
> 时间：2012-08-05T15:48:54.017
> 
> 标签：ios, xcode, restkit, xcodebuild

我有一个 Xcode 项目。在 Xcode 交互时，我可以使用 Ad_Hoc_Distribution 配置运行/构建/归档，但是当我运行时：

```
/usr/bin/xcodebuild -configuration Ad_Hoc_Distribution clean build 
```

在我的项目中，我收到一个错误：

```
/Users/esg/Documents/app-ios/testapp/testapp/AppDelegate.h:14:9: fatal error: 'RestKit/RestKit.h' file not found
#import <RestKit/RestKit.h>
    ^
1 error generated. 
```

当它通过界面工作时，什么会导致它从命令行失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:26:44.283

我的团队也遇到了同样的问题。从 Xcode 4.3.2 升级到 4.4.1 后，以前可以正确找到的文件不再存在。

通过比较 xcodebuild 与 Xcode 自己的构建日志的输出，然后与我们的 Xcode 4.3.2 构建日志进行比较，我们发现 xcodebuild 和 Xcode IDE 不再使用相同的头依赖项进行构建。当 xcodebuild 运行 4.4.1 构建时，它为包含文件使用了不正确的基本目录，其中不包括通向 .xcodeproj 目录的整个当前路径。文件夹路径中的最后两个目录节点似乎被截断。

但是从 Xcode IDE 构建工作正常。

我们通过添加正确的头文件路径来解决这个问题，正如 Xcode 报告的那样，作为额外的头文件依赖项：

![编辑公司信息以保护我](../Images/c4e63de98a06b6241f500560298ff983.png)

当使用 xcodebuild 时，$(SRCROOT) 似乎被错误地解释了。它应该包含我在第二行中插入的两个子目录。

我只能得出结论，在 xcode/xcodebuild 交互中存在一个成熟而严重的新错误，但您可以修复您的头文件依赖项，至少可以编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T04:44:55.890

请参阅我自己的问题。

[在 ReskIt 中找不到 xcodebuild 头文件](https://stackoverflow.com/questions/17943956/xcodebuild-header-files-not-found-in-reskit)

我通过什么都不做改变来解决它，而是通过添加一个工作区和一个方案并用它来构建。所有头文件设置都与为 Xcode GUI 构建的设置相同。

# tcserver - Spring-insight 来源、设计和替代方案

> ID：11817807
> 
> 赞同：2
> 
> 时间：2012-08-05T15:49:27.443
> 
> 标签：tcserver, spring-insight

我有几个关于 Spring-insight 技术的问题。

*   Spring-insight 是开源的吗？我很好奇看到底层设计。我可以对插件的源代码进行优化，但不能对整个包进行优化（它是 tc-server 的一部分）。
*   能否将这些数据持久化到数据库中（供以后使用）
*   我读到 Spring 洞察力不应该用于生产用途。我在想是否可以将这些数据保存到某个数据存储区并通过不同的应用程序检索。Spring 洞察力是否有任何现有的替代方案？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:28:48.913

> Spring-insight 是开源的吗？我很好奇看到底层设计。我可以对插件的源代码进行优化，但不能对整个包进行优化（它是 tc-server 的一部分）。

在我撰写本文时，Spring Insight 本身并不是开源的，但 Spring Insight 插件是在 ASL 2.0 许可下发布的。

[https://github.com/SpringSource/spring-insight-plugins](https://github.com/SpringSource/spring-insight-plugins)

> 能否将这些数据持久化到数据库中（供以后使用）

数据保存在 Spring Insight 内部并保留一段时间（可配置）。在那段时间之后，它会从系统中清除。我相信7天是默认的。目前无法将此数据持久保存到外部系统，例如 MySQL 或 Oracle 数据库。

> 我读到 Spring 洞察力不应该用于生产用途。

这是旧信息。Spring Insight 最初是作为开发人员专用工具发布的，称为 Spring Insight for Developers。顾名思义，这个工具应该只用于开发或可能的小型 QA 环境。这个工具可以从这里免费获得（就像在啤酒中一样）。

[http://www.springsource.org/insight](http://www.springsource.org/insight)

对于生产用途，您可能希望使用 Spring Insight Operations。这是一个商业产品，可作为 VMware vFabric 产品套件的一部分或通过购买 vFabric tc Server 获得。

# html - 将数据从 HTML 表单传递到 Perl 脚本的步骤

> ID：11817809
> 
> 赞同：2
> 
> 时间：2012-08-05T15:49:49.727
> 
> 标签：html, perl, apache, cgi, cgi-bin

我创建了一个简单的 HTML，其中包含以下表单：

```
<form action="WEB-INF/cgi/run.pl" method="post">
      <table border="0" cellspacing="0"> 

      <tbody>
      <tr><th align="center" bgcolor="F7F5F2"> <p class="normal">Submission Form</p> </th></tr>

      <tr><td align="center" bgcolor="F7F5F2"> <p class="normal">Insert your text below:</p> </td></tr>
      <tr><td><textarea wrap="virtual" name="seq_data" rows="15" cols="80"></textarea></td></tr>  
    </tbody></table>
    or upload a file :   <input type="file" name="file" size="29" border="0"><br><br>
    <input class="normalc" value="Submit Query" type="submit">
    <input class="normalc" value="Clear Form" type="reset"><p></p>
</form> 
```

我需要将表单中的数据作为输入传递给 perl 脚本 (run.pl)。

在搜索互联网时，我读到：1）我需要通过 apache tomcat 测试我的网站。我已经安装了 apache 7.0 版并通过从这个 servlet 周围删除 XML 注释来修改 Tomcat 7.0/conf/web.xml 文件：

```
<servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
    <init-param>
        <param-name>debug</param-name>
        <param-value>0</param-value>
    </init-param>
    <init-param>
        <param-name>listings</param-name>
        <param-value>false</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

我还创建了放置 perl 脚本的目录“WEB-INF/cgi”。

2) 我需要修改我的 Perl 脚本，但我找不到我应该添加什么才能将数据从 html 表单传递到我的脚本。

不知道除了修改Tomcat和Perl脚本还有没有其他必要的步骤。我已经阅读了许多相关主题，但仍然找不到分步指南。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T00:09:57.720

当 Web 服务器接收到 HTTP 请求时，它通常会以资源的内容进行响应。但是，如果 URL 指定了[通用网关接口](http://en.wikipedia.org/wiki/Common_Gateway_Interface)(CGI) 资源，它将运行它并返回程序的输出。

服务器的配置指定 CGI 和非 CGI 资源之间的区别，这可以基于文件扩展名 -`.cgi`等`.pl`- 或文件在服务器目录结构中的位置。

服务器通过其 STDIN 以及进程的环境变量将 HTTP 请求中的信息传递给 CGI 程序。通常，请求的参数`PUT`将`POST`出现在 STDIN 中，而请求的参数将`GET`插入环境变量中。

该程序的工作是根据这些参数构建所需的响应并将它们打印到 STDOUT。它还可以利用数据库信息和其他系统信息。服务器将使用此输出作为 HTTP 响应的内容。

您应该查看[`Perl CGI module`](https://www.metacpan.org/module/CGI)在方便的子例程中包装此接口的哪个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:07:31.943

**应用程序.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>
    Application| Form
  </title>
  <style>
  input
  {
    display:block;
  }
  </style>
</head>
  <body>
    <form action="evaluate.pl" method="post" enctype="multipart/form-data">
      <input type="file" name="photo">
      <input type="file" name="photo">
      <input type="text" name="email_id" placeholder="email id">
      <input type="submit" value="submit">
    </form>
  </body>
</html> 
```

* * *

**评估.pl**

```
#!C:/wamp/bin/perl/bin/perl.exe
#Purpose: To find the number of photos uploaded

use CGI;
use strict;
my $cgi = new CGI;

print "Content-Type:text/html\r\n\r\n";

my $param = $cgi->{param};

foreach( keys(%{$param}) ){
  print $_," -> ",$param->{$_};
  print "<br/>";
} 
```

如果你不知道如何在 perl 中从数组中读取值，你可以问我，**但首先尝试理解我发布的这个示例，然后我会帮助你。**

# mongodb - Mongo DB并将bson文件插入数据库

> ID：11817812
> 
> 赞同：8
> 
> 时间：2012-08-05T15:50:32.207
> 
> 标签：mongodb

我得到了一个 bson 文件的数据转储。在 mongo db 中，存在数据库和集合。这些是对数据库中每个集合的更新。因此，在给定的目录中，每个集合大约有 30 个 bson 文件。

在命令行中，我使用的是 ubuntu，如何追加和加载？Mongo 在我的本地主机上，没有用户名或密码。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-31T21:01:45.040

我花了一段时间来解决这个错误的借口。最后我去了我的`dump`文件夹外的目录，并做了以下......

对于完整的数据库还原：

`mongorestore --drop dump/mydb`

请注意，该操作将为它创建的文件夹*中*`mongodump`的每个数据库创建单独的文件夹，因此您需要指定完整的相对路径，如上所述。*`dump`*

 *对于单个集合：

`mongorestore --drop -d mydb -c mycollection dump/mydb/mycollection.bson`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-25T13:35:27.323

通常的语法是：

```
mongorestore -d dbname -c collectionname dir/file.bson 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T16:01:09.457

您在寻找 mongorestore 吗？[http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongorestore](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongorestore)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-30T07:16:29.070

*   导入 Bson

    *   mongorestore -d dbname -c 集合名 dir/file.bson
*   导入 JSON

    *   mongoimport --collection NAME --file NAME。

[http://docs.mongodb.org/v2.2/reference/mongoimport/](http://docs.mongodb.org/v2.2/reference/mongoimport/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T16:21:19.973

由于 Mongo restore 不会更新当前记录，因此这不是一个好的选择。

Mongorestore 仅附加新记录，如下所述：

> mongorestore 只是插入要恢复的数据；如果存在现有数据（例如具有相同_id），则不会被替换。

您可能希望用您选择的语言构建一个 BSON 解析器，并制作一个比 mongorestore 更复杂的工具，因为 mongorestore 仅旨在“恢复”（顾名思义）数据库/集合，您需要编写一些东西做你想做的事更复杂，这在很大程度上取决于你的服务器端语言。

## 编辑

这实际上用 mongoexport 和 mongoimport 做得更好：

[http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongoimport](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongoimport)

使用 mongoexport，您可以导出 JSON 文件并为其提供命令行执行 upserts。所以我会亲自回到提供这个文件的人那里，告诉他们你实际上想要一个 mongo 导出文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-22T15:51:40.350

1）在CMD中进入“dump”文件夹所在的目录。

2) 运行**mongorestore**命令。*

# web-scraping - 如何找出网站上的“趋势”我也无权访问

> ID：11817816
> 
> 赞同：0
> 
> 时间：2012-08-05T15:51:52.903
> 
> 标签：web-scraping, rss, trending

在一个论坛上，我有一个新闻部分，成员发布新闻。似乎每天都有关于苹果的文章，有人请愿删除苹果的文章，因为每天都是同样的故事。每个论坛部分都有一个 RSS 提要。

这让我觉得看到当天网站上的新闻报道趋势会很酷，但我被困住了，因为我没有任何访问数据库或后端的权限，因为我是普通用户。谁能想到我可以实现这一目标的方法？

我有一个服务器，我可以在上面托管结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:56:23.603

该网站是否有 API 或 RSS 提要？

如果不是，您只能使用具有站点所有者权限的内容来阅读`file_get_contents($url)`。

# android - 错误帮助！语法和 OnItemSelectedListener

> ID：11817817
> 
> 赞同：0
> 
> 时间：2012-08-05T15:52:01.173
> 
> 标签：android, syntax, android-spinner

好的，所以我对此很陌生，但我明白了。我刚遇到这个错误，我看到其他人也有同样的问题，但标准修复（干净）对我不起作用。我不知道如何解决这些错误！请帮忙！

第一个错误：

在`sp2.setOnItemSelectedListener(new OnItemSelectedListener() {`我的 else if 语句中，我不断收到此错误：

new AdapterView.OnItemSelectedListener(){} 类型必须实现继承的抽象方法 AdapterView.OnItemSelectedListener.onNothingSelected(AdapterView)

我在那里有 onNothingSelected，它在我的 if 语句中有效，我的意思是我所做的只是复制、粘贴和编辑。

第二个错误：

在`});`我的 else if 语句的末尾，我收到错误：

语法错误，插入“;” 完成声明

但一切都在那里。声明完成！

```
sp1.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelecteds(AdapterView<?> arg0, View arg1,
            int arg2, long arg3) {

             String reg_select = (sp1.getSelectedItem().toString());
                 if (reg_select.contentEquals("Southwest")){
                     sp2.setAdapter(sw_cit_adp); 
                     sp2.setOnItemSelectedListener(new OnItemSelectedListener() {

                            public void onItemSelected(AdapterView<?> arg0, View arg1,
                                    int arg2, long arg3) {
                                // TODO Auto-generated method stub

                             String sw_cit_select = (sp2.getSelectedItem().toString());
                             if (sw_cit_select.contentEquals("Lake Charles")){
                                 sp3.setAdapter(sw_lake_charles_adp); }

                             else if (sw_cit_select.contentEquals("Iowa")){
                                 sp3.setAdapter(sw_iowa_adp); }

                            ;}

                            public void onNothingSelected(AdapterView<?> arg0) {
                                // TODO Auto-generated method stub

                            };});}

                 else if (reg_select.contentEquals("South Central")){
                         sp2.setAdapter(sc_cit_adp); 
                         sp2.setOnItemSelectedListener(new OnItemSelectedListener() {

                                public void onItemSelected(AdapterView<?> arg0, View arg1,
                                        int arg2, long arg3) {
                                    // TODO Auto-generated method stub

                                 String sc_cit_select = (sp2.getSelectedItem().toString());
                                 if (sc_cit_select.contentEquals("Lafayette")){
                                     sp3.setAdapter(sc_lafayette_adp); }

                                 else if (sc_cit_select.contentEquals("Gueydan")){
                                     sp3.setAdapter(sc_gueydan_adp); }

                                ;}
                                public void onNothingSelected(
                                        AdapterView<?> arg0) {
                                    // TODO Auto-generated method stub

                                }

                                ;
                               });
                         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:56:58.967

你有那个方法在错误的地方。你不能选择一个项目，也不能选择任何东西，这是没有意义的。

您需要将方法放在侦听器下，例如`onItemSelected`，但不是 inside `onItemSelected`。

这是它应该（基本上）看起来的样子：

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onNothingSelected(AdapterView<?> parent) {
        }

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int pos, long id) {
        // Your code to do something with the selected item
        }
    }); 
```

哦，你需要使用确切的方法名称......它`onItemSelected` **不是** `onItemSelecteds`

# cakephp - 是否可以使用 CakePHP 在插件内创建插件？

> ID：11817818
> 
> 赞同：0
> 
> 时间：2012-08-05T15:52:10.703
> 
> 标签：cakephp, cakephp-2.0

我正在尝试使用 CakePHP 框架在插件内创建一个插件。

我的文件夹结构是这样的

```
app/Plugin/SbnAdmin/Plugin/SbnChart/..... 
```

我正在使用以下行加载 SbnAdmin 插件

```
CakePlugin::loadAll(array('SbnAdmin' => array('bootstrap' => true))); 
```

在 SbnAdmin 引导程序中，我有

```
CakePlugin::loadAll(); 
```

我可以从 SbnAdmin 插件查看控制器/模型/视图，但我无法访问 SbnChart 插件...

我努力了

```
www..../sbn_admin/sbn_chart/chart/index
www..../sbn_chart/chart/index 
```

没有成功，我不确定我还能做什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:24:49.513

在您的 SbnAdmin 引导程序中添加：

```
App::build(array('Plugin' => array(CakePlugin::path('SbnAdmin') . 'Plugin' . DS)));
CakePlugin::load('SbnChart'); 
```

我们正在做的是告诉 cake 添加额外的路径来寻找加载插件，在本例中是在您的 SbnAdmin/Plugin 文件夹中。然后我们之后加载插件。

您现在应该可以通过正常`/plugin_name/controller/action`或在您的情况下访问它`/sbn_chart/controller/action`

# c++ - 跨多个发行版的 SDL

> ID：11817820
> 
> 赞同：1
> 
> 时间：2012-08-05T15:52:16.147
> 
> 标签：c++, linux, cmake, sdl

我刚刚用 C++/SDL for linux 制作了一个游戏，它通过 cmake/make 的帮助进行编译。

我想将游戏分发给一些也运行 linux 的朋友。有没有一种简单的方法可以帮助每个人安装运行游戏所需的 SDL 库？

我的意思是..一些发行版使用 apt-get install，一些使用 yum install，另一些使用 rpm 包（我认为？），每个 sdl 包的名称略有不同。有没有一种简单的方法可以让系统为人们安装这些系统，或者至少分发他们需要在我的游戏中安装的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:01:49.910

我不久前问过这个问题，请在开始新问题之前尝试搜索现有问题，但是这里是[项目分布的链接](https://stackoverflow.com/questions/10326239/distribution-of-projects#comment13317741_10326239)

# java - 使用简单的核心 java 代码检索 hashmap 的值

> ID：11817821
> 
> 赞同：0
> 
> 时间：2012-08-05T15:52:19.530
> 
> 标签：java, collections, hashmap

我有以下查询，我在下面有这个是 hashmap 类..

```
 HashMap map=new HashMap();//HashMap key random order.
         System.out.println("Amit".hashCode());
         map.put("Amit","Java");
         map.put("mAit","J2EE");
         map.put("Saral","J2rrrEE"); 
```

如果我想在控制台上检索数组的元素以查看输出，则代码将如下所示。

```
Set s=map.entrySet();
         Iterator itr=s.iterator();
         while(itr.hasNext())
         {
             Map.Entry m=(Map.Entry)itr.next();
             System.out.println(m.getKey()+"\t"+m.getValue()+"\t"+ m.hashCode());
          } 
```

现在我们根据需要将它转换为 map.entry 并且我们有称为 getkey() 和 getvalue() 的方法，我也很清楚 map.entry ，但我想通过简单的核心检索没有这些内置函数的数组java代码，请指教如何实现..！

我不想使用任何内置的集合函数，例如 getkey() 或 getvalue() 来检索地图的内容，我想使用简单的 java 代码来检索给定键的值或那里的所有键的值必须是在我想使用的核心 java 上构建的 getkey() 和 getvalue() 背后的一些逻辑..!!

有没有什么方法可以通过简单的java程序本身来检索地图的内容..!!不使用内置的集合函数..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T15:59:06.150

我不确定您要查找的数组，您的代码中没有数组。

你会通过使用泛型来简化你的生活。将您的地图声明为：

```
HashMap<String, String> map = new HashMap<String, String>(); 
```

您的第二个片段可以用增强的 for 循环编写：

```
for (Map.Entry<String, String> m : map.entrySet()) {
    System.out.println(m.getKey()+"\t"+m.getValue()+"\t"+ m.hashCode());
} 
```

如果您只想获取标题所暗示的值：

```
for (String value : map.values()) {
    System.out.println(value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T16:23:56.513

您可以使用 keyset() 或 values() 函数来获取键集或值集合。

> 我不想使用任何内置的集合函数，例如 getkey() 或 getvalue() 来检索地图的内容

如果它是您所追求的哈希图的内部表示，请远离它。内部数据结构旨在抽象哈希图的内部结构。与普通散列图相比，链接散列图可以用不同的方式表示。你为什么要访问内部结构呢？没有 API 开发人员允许访问这些表示。

如果你很绝望，你可以随时查找 hashmap 的私有成员变量并通过反射访问它们。但同样，请仅将此类解决方案用于学术目的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T16:34:05.613

我认为您不了解 OOP 的概念。HashMap 是一个类，当你说`new HashMap()`你创建了这个类的一个新对象时。这个类有一些私有字段，可能是一个数组或类似的东西。但关键是，你不知道。该类隐藏了它的字段——它们是私有的。要访问这些字段并使用它们，该类提供了方法。例如`put(...)`，为添加新元素而调用的方法或`get(...)`为检索元素而调用的方法。

您不能使用任何核心 Java 事物来访问这些字段 - 没有任何语法可以访问类的私有字段。您可以只使用 HashMap 的方法，没有其他（简单）方法。（嗯，有反思，但那完全是另一个话题......）。

当然，HashMap 是用一些“核心 Java”编程的。如果您对它的外观感兴趣，请查看源代码[java.util.HashMap](http://www.docjar.com/html/api/java/util/HashMap.java.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T16:06:13.597

The array of `Map.Entry`s that you want to retrieve is private to the `HashMap` and cannot be directly accessed. But you should not be worried by that because you can always get another array instance from the entryset:

```
Set s=map.entrySet();
Map.Entry[] entries = s.toArray(new Map.Entry[0]); 
```

After you edit :

Why do you want to avoid using the api that HashMap provides to retrieve the values given a key ? The logic in the `iterator` and `getKey()` and `getValue()` cannot be replicated outside these methods becuase only these methods have access to the private state of the`HashMap`. Even if you could replicate the logic outside these methods , that would break all tenets of Object oriented programming, so - dont do that !

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T16:04:31.437

试试这个`values()`方法

```
for (String sVal : map.values()) {

    System.out.println("Your values :"+ sVal);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-09T12:48:41.003

通过使用这个增强的 for 循环，我们可以轻松地从 map 中检索值

```
for (String variable : map.values()) {
    System.out.println(variable);
} 
```

# c++ - 进程外 COM 单例

> ID：11817822
> 
> 赞同：1
> 
> 时间：2012-08-05T15:52:21.343
> 
> 标签：c++, com, atl, out-of-process

我正在处理一个单线程库（不是线程安全的），我想将它包装在一个 COM 进程外对象中以解决其线程不安全问题。我需要一种行为，其中每个新 COM 对象都在其自己的进程中实例化 - 某种形式的进程外单例。

自从我处理核心 COM 以来已经有一段时间了，所以我不确定如何处理这个问题，或者如果没有一些技巧，这是否可能完全可行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T16:32:27.217

调用 CoRegisterClassObject() 并将 REGCLS 参数设置为 REGCLS_SINGLEUSE。注意成本，进程*不是*廉价的操作系统对象。

否则没有理由不能确保封送的方法调用是线程安全的，只需调用 CoInitializeEx() 来请求 STA。在进程外服务器中的工作与在进程内服务器中一样好。如果您这样做只是为了解决线程问题，那么绝对支持进程内 STA。需要消息循环。

# c# - 验证大整数的二进制模式 (BigInteger)

> ID：11817823
> 
> 赞同：3
> 
> 时间：2012-08-05T15:52:29.987
> 
> 标签：c#, .net, binary, numbers, bit-manipulation

我想测试一个正整数，看看它的二进制表示是否以零个或多个 1 开头，后跟一个或多个 0。

```
00000000 // Valid
10000000 // Valid
11000000 // Valid
11100000 // Valid
11110000 // Valid
11111100 // Valid
11111110 // Valid
11111110 // Valid
11111111 // Not Valid
// Any other combination is Not Valid 
```

与正则表达式相同的表达式是 ^[1]*[0]+$。当然，这只是为了澄清，我们不能使用正则表达式。

蛮力逼近：

*   创建多个位掩码，并一起确定结果。
*   使用动态掩码循环遍历每个数字以确定结果。

问题是我正在处理可能有数十万位数字的巨大正整数，并且需要对数千个这样的数字执行此测试。

有没有更有效的方法来确定这种二进制模式？

**更新**

这是我尝试的实现。尚未将时间与其他答案进行比较。

```
public static bool IsDiagonalToPowerOfTwo (this System.Numerics.BigInteger number)
{
    byte [] bytes = null;
    bool moreOnesPossible = true;

    if (number == 0) // 00000000
    {
        return (true); // All bits are zero.
    }
    else
    {
        bytes = number.ToByteArray();

        if ((bytes [bytes.Length - 1] & 1) == 1)
        {
            return (false);
        }
        else
        {
            for (byte b=0; b < bytes.Length; b++)
            {
                if (moreOnesPossible)
                {
                    if (bytes [b] == 255)
                    {
                        // Continue.
                    }
                    else if
                    (
                        ((bytes [b] & 128) == 128) // 10000000
                        || ((bytes [b] & 192) == 192) // 11000000
                        || ((bytes [b] & 224) == 224) // 11100000
                        || ((bytes [b] & 240) == 240) // 11110000
                        || ((bytes [b] & 248) == 248) // 11111000
                        || ((bytes [b] & 252) == 252) // 11111100
                        || ((bytes [b] & 254) == 254) // 11111110
                    )
                    {
                        moreOnesPossible = false;
                    }
                    else
                    {
                        return (false);
                    }
                }
                else
                {
                    if (bytes [b] > 0)
                    {
                        return (false);
                    }
                }
            }
        }
    }

    return (true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:01:40.800

假设整数以二进制形式存储，分组到一个无符号整数数组 x[] 中，您可以这样做：

```
Define UINT to be the unsigned integer type you are using for the grouped bits.
Define UMAX to be the maximum value of that type (all bits are on).

// Find first word that has a zero bit.
int i;
for (i = highest word in x; 0 <= i; --i)
    if (x[i] != UMAX)
        break;

// Return true if all bits in all of x[] are on.
if (i < 0)
    return true;

// Test whether word conforms to the ones-then-zeroes rule.
UINT y = x[i];
if (y + (y & -y))
    return false;

// Test whether all remaining words are zero.
for (; 0 <= i; --i)
    if (x[i])
        return false;

return true; 
```

在`y + (y & -y)`中，`y & -y`返回 y 中设置的最低位。（证明留给读者作为练习。）如果 y 中的所有高位都打开，添加最低位会导致进位传播通过所有这些位，将它们更改为零。如果这些高位中的任何一个为关闭，则进位停止，结果不为零。否则，结果为零。

你能在上面改进吗？假设比较和分支比 AND 等操作具有更高的成本。在这种情况下，您可以使用二进制搜索在数组中查找值从全 1 变为全零或都不变为全零的位置。测试如上标识的关键字，然后将所有较高的值组合在一起并测试所有 1 的结果，然后将所有较低的值组合在一起并测试所有 0 的结果。

这为您提供了一个二分搜索，然后是一个加载和一个 AND 或 OR 用于每个单词。这将很难改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:05:08.197

在最坏的情况下，如果没有存储有关输入的额外数据，您无法比 O( *n* ) 算法做得更好——其中*n*是位数——因为您需要检查数字中的每一位。

如果您在之前的操作过程中可以跟踪例如“最右边的 1”和“最左边的 0”，您可以通过检查它们是否确实是“10”来立即获得答案。

否则，您将不得不有效地遍历这些位以检查它是否正确。请注意，从左边开始遍历数字直到您击中 1，然后检查一切是否为 0（使用适当的极端情况）是 O( *n* )，而拥有 O( *n* ) 可能值的完整列表并检查它是否是等于（大概？）O（*n*）比较中的任何一个是O（*n* ^ 2），因此是个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:14:01.967

将您的二进制数据分成固定大小的块...... 32位...... 64位 - >将它们视为无符号整数

准备两个包含所有有效模式的哈希图，以及反向模式（以'0'开始，以'1'结束）......再次无符号整数

现在测试最左边的块是否包含在逆模式哈希图中...如果不是 -> 模式无效
现在测试最右边（非零）块是否包含在正常模式哈希图中...如果不是 ->模式无效

现在测试所有其他块是否等于所有位设置模式（应该是与无符号整数的比较）......如果所有都相等 -> 模式是有效的......否则......模式是无效的

# mysql - 如何检索 Facebook 用户个人资料唯一 url/id

> ID：11817828
> 
> 赞同：1
> 
> 时间：2012-08-05T15:53:22.157
> 
> 标签：mysql, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk, facebook-social-plugins

我计划举办一场比赛作为我页面的第一个促销活动。我将使用 PHP 编写脚本。我会将脚本上传到网络托管服务器并在 FB 上调用页面 url。在 FB 上，我将创建独特的 woobox 应用程序。我将在该应用程序上调用此页面。

我需要的是，当参与者被给予他/她可以参与的页面时，程序应该首先检查这个用户是否已经参加了比赛。如果他**已经参与了**，他应该被引导到一个页面，上面会说，你已经参与了。 **如果不是**，他/她应该被引导到他将提供他的姓名、国家和电子邮件的页面。在这个页面上，我更喜欢使用 Facebook api 来获取姓名、国家和电子邮件 ID，而不是要求参与者输入这些信息。并且还获取用户个人资料 ID 并保存在数据库中，避免重复肠衣

我对这个FB api n图完全空白......

在这方面需要你最全面的帮助..请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:06:47.580

The registration plugin can grab a users info and allow them to register, the plugin will post that registration info to which ever page "database" you need.

refer to: [http://developers.facebook.com/docs/plugins/registration/](http://developers.facebook.com/docs/plugins/registration/)

# c# - 如何验证已为所有用途创建了自动映射器映射？

> ID：11817829
> 
> 赞同：1
> 
> 时间：2012-08-05T15:53:22.837
> 
> 标签：c#, automapper, roslyn

我想要一个测试来验证，对于每次使用，在我的 Bootstrapper`Automapper.Mapper.Map<T1,T2>()`中有一个相应的映射配置 ( )。`AutoMapper.Mapper.CreateMap<T1,T2>()`

我正要走上使用[Roslyn](http://en.wikipedia.org/wiki/Microsoft_Roslyn)与编译器接口的道路，并找到该`Map<>`方法的所有用法，然后尝试使用这些实例进行映射。尽管这样做可以解决问题，但我想我宁愿使用已经存在的东西。

这存在吗？如果没有，还有比 Roslyn 更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:17:55.947

您对元编程的研究太深了。

您可以做的最好的事情是将映射的类包含到一个或多个命名空间，并检查这些命名空间中的所有类是否存在映射。为此，您不需要 Roslyn、Cecil 或任何类似的东西。

如果您放弃编译时检查，至少您必须制定一些约定，并且如果您的约定定义明确，您可以验证它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:26:05.320

问题是你不能确定——有很多情况下它不是确定性的（例如，一个类型的模型`Y`可能会被传递给 AutoMapper 向下转换为`object`.

作为正常代码覆盖的一部分，您应该提供对映射的实际消耗的覆盖。

这是否意味着每个映射方法的单元测试是一个不同的问题......

# visual-studio - 在 Visual Studio 中导出属性表？

> ID：11817835
> 
> 赞同：2
> 
> 时间：2012-08-05T15:53:53.200
> 
> 标签：visual-studio, propertysheet

有时，在处理人们在网上发布的项目时，我必须疯狂地修改自己的属性表以匹配他们的属性表，以便我的项目能够正常工作（例如：MTd、链接器内容、Unicode/多字节设置）。

我想知道是否可以在 Visual Studio 中导出一个属性表以供以后使用，而不是从头开始创建一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:17:35.727

如果您使用他们的项目文件，则不会，它的设置是“最后一个”并覆盖您在项目属性表中设置的任何内容。

顺便说一句，没有什么是您无法使用文本编辑器修复的，使用记事本打开 .vcproj 或 .vcxproj 文件，看看如何删除设置以便属性表可以工作。或者从您自己的项目文件中复制/粘贴设置。

# java - 把数字拼成数字？

> ID：11817838
> 
> 赞同：4
> 
> 时间：2012-08-05T15:54:29.690
> 
> 标签：java, numbers

任何人都知道可以采用非常大的拼写数字并将它们转换为数字的java库吗？如果它也能做到小数位就好了。示例.. 10 到 10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:17:58.873

嗯，为什么不试试你自己的呢？这里有 2 个示例让您开始：

```
import java.util.*;

public class NumToWords {
        String string;
        String st1[] = { "", "one", "two", "three", "four", "five", "six", "seven",
                        "eight", "nine", };
        String st2[] = { "hundred", "thousand", "lakh", "crore" };
        String st3[] = { "ten", "eleven", "twelve", "thirteen", "fourteen",
                        "fifteen", "sixteen", "seventeen", "eighteen", "ninteen", };
        String st4[] = { "twenty", "thirty", "fourty", "fifty", "sixty", "seventy",
                        "eighty", "ninty" };

        public String convert(int number) {
                int n = 1;
                int word;
                string = "";
                while (number != 0) {
                        switch (n) {
                        case 1:
                                word = number % 100;
                                pass(word);
                                if (number > 100 && number % 100 != 0) {
                                        show("and ");
                                }
                                number /= 100;
                                break;

                        case 2:
                                word = number % 10;
                                if (word != 0) {
                                        show(" ");
                                        show(st2[0]);
                                        show(" ");
                                        pass(word);
                                }
                                number /= 10;
                                break;

                        case 3:
                                word = number % 100;
                                if (word != 0) {
                                        show(" ");
                                        show(st2[1]);
                                        show(" ");
                                        pass(word);
                                }
                                number /= 100;
                                break;

                        case 4:
                                word = number % 100;
                                if (word != 0) {
                                        show(" ");
                                        show(st2[2]);
                                        show(" ");
                                        pass(word);
                                }
                                number /= 100;
                                break;

                        case 5:
                                word = number % 100;
                                if (word != 0) {
                                        show(" ");
                                        show(st2[3]);
                                        show(" ");
                                        pass(word);
                                }
                                number /= 100;
                                break;

                        }
                        n++;
                }
                return string;
        }

        public void pass(int number) {
                int word, q;
                if (number < 10) {
                        show(st1[number]);
                }
                if (number > 9 && number < 20) {
                        show(st3[number - 10]);
                }
                if (number > 19) {
                        word = number % 10;
                        if (word == 0) {
                                q = number / 10;
                                show(st4[q - 2]);
                        } else {
                                q = number / 10;
                                show(st1[word]);
                                show(" ");
                                show(st4[q - 2]);
                        }
                }
        }

        public void show(String s) {
                String st;
                st = string;
                string = s;
                string += st;
        }

        public static void main(String[] args) {
                NumToWords w = new NumToWords();
                Scanner input = new Scanner(System.in);
                System.out.print("Enter Number: ");
                int num = input.nextInt();
                String inwords = w.convert(num);
                System.out.println(inwords);
        }
} 
```

和这个：

```
class constNumtoLetter
  {
      String[] unitdo ={"", " One", " Two", " Three", " Four", " Five",
         " Six", " Seven", " Eight", " Nine", " Ten", " Eleven", " Twelve",
         " Thirteen", " Fourteen", " Fifteen",  " Sixteen", " Seventeen", 
         " Eighteen", " Nineteen"};
      String[] tens =  {"", "Ten", " Twenty", " Thirty", " Forty", " Fifty",
         " Sixty", " Seventy", " Eighty"," Ninety"};
      String[] digit = {"", " Hundred", " Thousand", " Lakh", " Crore"};
     int r;

      //Count the number of digits in the input number
      int numberCount(int num)
      {
          int cnt=0;

          while (num>0)
          {
            r = num%10;
            cnt++;
            num = num / 10;
          }

            return cnt;
      }

      //Function for Conversion of two digit

      String twonum(int numq)
      {
           int numr, nq;
           String ltr=\"";

           nq = numq / 10;
           numr = numq % 10;

           if (numq>19)
             {
           ltr=ltr+tens[nq]+unitdo[numr];
             }
           else
             {
           ltr = ltr+unitdo[numq];
             }

           return ltr;
      }

      //Function for Conversion of three digit

      String threenum(int numq)
      {
             int numr, nq;
             String ltr = "";

             nq = numq / 100;
             numr = numq % 100;

             if (numr == 0)
              {
              ltr = ltr + unitdo[nq]+digit[1];
               }
             else
              {
              ltr = ltr +unitdo[nq]+digit[1]+" and"+twonum(numr);
              }
             return ltr;

      }

}

 class originalNumToLetter

   {

      public static void main(String[] args) throws Exception
      {

          //Defining variables q is quotient, r is remainder

          int len, q=0, r=0;
          String ltr = " ";
          String Str = "Rupees";
          constNumtoLetter n = new constNumtoLetter();
          int num = Integer.parseInt(args[0]);

          if (num <= 0) System.out.println(\"Zero or Negative number not for conversion");

          while (num>0)
          {

             len = n.numberCount(num);

             //Take the length of the number and do letter conversion

             switch (len)

             {
                  case 8:
                          q=num/10000000;
                          r=num%10000000;
                          ltr = n.twonum(q);
                          Str = Str+ltr+n.digit[4];
                          num = r;
                          break;

                  case 7:
                  case 6:
                          q=num/100000;
                          r=num%100000;
                          ltr = n.twonum(q);
                          Str = Str+ltr+n.digit[3];
                          num = r;
                          break;

                  case 5:
                  case 4:

                           q=num/1000;
                           r=num%1000;
                           ltr = n.twonum(q);
                           Str= Str+ltr+n.digit[2];
                           num = r;
                           break;

                  case 3:

                            if (len == 3)
                                r = num;
                            ltr = n.threenum(r);
                            Str = Str + ltr;
                            num = 0;
                            break;

                  case 2:

                           ltr = n.twonum(num);
                           Str = Str + ltr;
                           num=0;
                           break;

                  case 1:
                           Str = Str + n.unitdo[num];
                           num=0;
                           break;
                  default:

                          num=0;
                          System.out.println(\"Exceeding Crore....No conversion");
                          System.exit(1);

              }
                          if (num==0)
                          System.out.println(Str+\" Only");
            }

         }

      } 
```

编辑：

该样本将转换为看起来数十亿：

```
import java.text.DecimalFormat;

public class EnglishNumberToWords {

  private static final String[] tensNames = {
    "",
    " ten",
    " twenty",
    " thirty",
    " forty",
    " fifty",
    " sixty",
    " seventy",
    " eighty",
    " ninety"
  };

  private static final String[] numNames = {
    "",
    " one",
    " two",
    " three",
    " four",
    " five",
    " six",
    " seven",
    " eight",
    " nine",
    " ten",
    " eleven",
    " twelve",
    " thirteen",
    " fourteen",
    " fifteen",
    " sixteen",
    " seventeen",
    " eighteen",
    " nineteen"
  };

  private static String convertLessThanOneThousand(int number) {
    String soFar;

    if (number % 100 < 20){
      soFar = numNames[number % 100];
      number /= 100;
    }
    else {
      soFar = numNames[number % 10];
      number /= 10;

      soFar = tensNames[number % 10] + soFar;
      number /= 10;
    }
    if (number == 0) return soFar;
    return numNames[number] + " hundred" + soFar;
  }

  public static String convert(long number) {
    // 0 to 999 999 999 999
    if (number == 0) { return "zero"; }

    String snumber = Long.toString(number);

    // pad with "0"
    String mask = "000000000000";
    DecimalFormat df = new DecimalFormat(mask);
    snumber = df.format(number);

    // XXXnnnnnnnnn 
    int billions = Integer.parseInt(snumber.substring(0,3));
    // nnnXXXnnnnnn
    int millions  = Integer.parseInt(snumber.substring(3,6)); 
    // nnnnnnXXXnnn
    int hundredThousands = Integer.parseInt(snumber.substring(6,9)); 
    // nnnnnnnnnXXX
    int thousands = Integer.parseInt(snumber.substring(9,12));    

    String tradBillions;
    switch (billions) {
    case 0:
      tradBillions = "";
      break;
    case 1 :
      tradBillions = convertLessThanOneThousand(billions) 
      + " billion ";
      break;
    default :
      tradBillions = convertLessThanOneThousand(billions) 
      + " billion ";
    }
    String result =  tradBillions;

    String tradMillions;
    switch (millions) {
    case 0:
      tradMillions = "";
      break;
    case 1 :
      tradMillions = convertLessThanOneThousand(millions) 
      + " million ";
      break;
    default :
      tradMillions = convertLessThanOneThousand(millions) 
      + " million ";
    }
    result =  result + tradMillions;

    String tradHundredThousands;
    switch (hundredThousands) {
    case 0:
      tradHundredThousands = "";
      break;
    case 1 :
      tradHundredThousands = "one thousand ";
      break;
    default :
      tradHundredThousands = convertLessThanOneThousand(hundredThousands) 
      + " thousand ";
    }
    result =  result + tradHundredThousands;

    String tradThousand;
    tradThousand = convertLessThanOneThousand(thousands);
    result =  result + tradThousand;

    // remove extra spaces!
    return result.replaceAll("^\\s+", "").replaceAll("\\b\\s{2,}\\b", " ");
  }

  /**
   * testing
   * @param args
   */
  public static void main(String[] args) {
    System.out.println("*** " + EnglishNumberToWords.convert(0));
    System.out.println("*** " + EnglishNumberToWords.convert(1));
    System.out.println("*** " + EnglishNumberToWords.convert(16));
    System.out.println("*** " + EnglishNumberToWords.convert(100));
    System.out.println("*** " + EnglishNumberToWords.convert(118));
    System.out.println("*** " + EnglishNumberToWords.convert(200));
    System.out.println("*** " + EnglishNumberToWords.convert(219));
    System.out.println("*** " + EnglishNumberToWords.convert(800));
    System.out.println("*** " + EnglishNumberToWords.convert(801));
    System.out.println("*** " + EnglishNumberToWords.convert(1316));
    System.out.println("*** " + EnglishNumberToWords.convert(1000000));
    System.out.println("*** " + EnglishNumberToWords.convert(2000000));
    System.out.println("*** " + EnglishNumberToWords.convert(3000200));
    System.out.println("*** " + EnglishNumberToWords.convert(700000));
    System.out.println("*** " + EnglishNumberToWords.convert(9000000));
    System.out.println("*** " + EnglishNumberToWords.convert(9001000));
    System.out.println("*** " + EnglishNumberToWords.convert(123456789));
    System.out.println("*** " + EnglishNumberToWords.convert(2147483647));
    System.out.println("*** " + EnglishNumberToWords.convert(3000000010L));

    /*
     *** zero
     *** one
     *** sixteen
     *** one hundred
     *** one hundred eighteen
     *** two hundred
     *** two hundred nineteen
     *** eight hundred
     *** eight hundred one
     *** one thousand three hundred sixteen
     *** one million 
     *** two millions 
     *** three millions two hundred
     *** seven hundred thousand 
     *** nine millions 
     *** nine millions one thousand 
     *** one hundred twenty three millions four hundred 
     **      fifty six thousand seven hundred eighty nine
     *** two billion one hundred forty seven millions 
     **      four hundred eighty three thousand six hundred forty seven
     *** three billion ten
     **/
  }
} 
```

**参考：**

*   [http://www.roseindia.net/tutorial/java/core/convertNumberToWords.html](http://www.roseindia.net/tutorial/java/core/convertNumberToWords.html)
*   [http://www.java-samples.com/showtutorial.php?tutorialid=1156](http://www.java-samples.com/showtutorial.php?tutorialid=1156)
*   [http://www.rgagnon.com/javadetails/java-0426.html](http://www.rgagnon.com/javadetails/java-0426.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T17:16:49.187

令人惊讶的是，似乎还没有解决此任务的 Java 库。由于我在问题注释中找到了 Python 解决方案，因此我将其转换为 Java：

**Text2Digit.java**

```
public class Text2Digit {

    final static String[] units = { "zero", "one", "two", "three", "four",
            "five", "six", "seven", "eight", "nine", "ten", "eleven", "twelve",
            "thirteen", "fourteen", "fifteen", "sixteen", "seventeen",
            "eighteen", "nineteen" };

    final static String[] tens = { "", "", "twenty", "thirty", "forty",
            "fifty", "sixty", "seventy", "eighty", "ninety" };

    final static String[] scales = { "hundred", "thousand", "million",
            "billion", "trillion" };

    final static Map<String, ScaleIncrement> numWords = new HashMap<>();

    static {
        numWords.put("and", ScaleIncrement.valueOf(1, 0));
        for (int i = 0; i < units.length; i++)
            numWords.put(units[i], ScaleIncrement.valueOf(1, i));

        for (int i = 0; i < tens.length; i++)
            numWords.put(tens[i], ScaleIncrement.valueOf(1, i * 10));

        for (int i = 0; i < scales.length; i++) {
            int exponent = (i * 3 == 0) ? 2 : i * 3;
            numWords.put(scales[i],
                    ScaleIncrement.valueOf((int) Math.pow(10, exponent), 0));
        }
    }

    public static long convert(String text) {

        long current = 0;
        long result = 0;
        for (String word : text.split(" ")) {

            if (!numWords.containsKey(word))
                throw new RuntimeException("Illegal word:" + word);

            long scale = numWords.get(word).scale;
            long increment = numWords.get(word).increment;
            current = current * scale + increment;
            if (scale > 100) {
                result += current;
                current = 0;
            }
        }

        return result + current;
    } 
```

}

**ScaleIncrement.java**

```
public class ScaleIncrement {

    long scale;
    long increment;

    private ScaleIncrement() {}

    public static ScaleIncrement valueOf(long scale, long increment) {
        ScaleIncrement result = new ScaleIncrement();
        result.scale = scale;
        result.increment = increment;
        return result;
    }

} 
```

**测试**

```
public static void main(String[] args) {

    System.out.println(convert("seven billion one"
            + " hundred million thirty one thousand"
            + " three hundred thirty seven"));
} 
```

**输出**

> 7100031337

# android - 创建新对话框时出现 NullPointerException

> ID：11817840
> 
> 赞同：9
> 
> 时间：2012-08-05T15:54:35.477
> 
> 标签：android, nullpointerexception, android-dialog

我有一个 DialogFragment，它创建一个列表视图对话框，在列表项上单击我想显示一个警报对话框，但是当我创建对话框时，它给了我一个`NullPointerException`我以前从未见过的错误

```
08-05 11:40:42.315: E/AndroidRuntime(4693): java.lang.NullPointerException
08-05 11:40:42.315: E/AndroidRuntime(4693):     at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:142)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at android.app.AlertDialog$Builder.<init>(AlertDialog.java:359)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at com.tyczj.bowling.dialogs.SeasonType$1$1.onClick(SeasonType.java:60)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at android.os.Looper.loop(Looper.java:137)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at java.lang.reflect.Method.invokeNative(Native Method)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at java.lang.reflect.Method.invoke(Method.java:511)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-05 11:40:42.315: E/AndroidRuntime(4693):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的对话框`onCreate`

```
@Override
public Dialog onCreateDialog(Bundle state){
    final Dialog d = new Dialog(getActivity());
    d.setContentView(R.layout.dialog_layout);
    d.setTitle("Select a season");
    ListView lv = (ListView)d.findViewById(R.id.dialog_list);
    String[] list = getResources().getStringArray(R.array.season_dialog_type);
    lv.setAdapter(new ArrayAdapter<String>(getActivity(),R.layout.stats_list_layout,list));
    lv.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
            d.dismiss();
            FragmentTransaction ft = getFragmentManager().beginTransaction();
            if(arg2 == 0){
                DialogFragment df = new SeasonsDialog(true);
                df.show(ft,null);
            }else if(arg2 == 1){
                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
                final View v = getActivity().getLayoutInflater().inflate(R.layout.add_season_layout, null, false);
                builder.setTitle("Add a season").setView(v).setPositiveButton("Add", new OnClickListener(){

                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                        arg0.dismiss();
                        AlertDialog.Builder builder2 = new AlertDialog.Builder(getActivity()); //Error here
                        builder2.setTitle("Warning!").setMessage("Adding a new season will cause all new games to be under this season.\n\n Do you wish to continue?")
                        .setPositiveButton("Yes", new OnClickListener(){

                            @Override
                            public void onClick(DialogInterface dialog,int which) {
                                dialog.dismiss();
                                EditText et = (EditText)v.findViewById(R.id.editText1);
                                ContentValues values = new ContentValues();
                                values.put(Games.SEASON, et.getText().toString());
                                Uri uri = getActivity().getContentResolver().insert(Games.SEASONS_URI, values);
                                et.setText("");
                                SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(getActivity());
                                SharedPreferences.Editor edit = pref.edit();
                                edit.putLong(Preferences.SELECTED_SEASON, ContentUris.parseId(uri)).commit();
                            }

                        }).setNegativeButton("No", new OnClickListener(){

                            @Override
                            public void onClick(DialogInterface dialog,int which) {
                                dialog.dismiss();
                            }

                        }).create().show();
                    }

                }).setNegativeButton("Cancel", new OnClickListener(){

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                    }

                }).create().show();
            }

        }

    });

    return d;
} 
```

它的错误出现在我的这一行`onClick`

```
AlertDialog.Builder builder2 = new AlertDialog.Builder(getActivity()); 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T16:06:07.683

这可能是因为您试图从 onClick 侦听器中调用 getActivity()。通常匿名内部类只喜欢访问**最终**的东西。在创建你的听众之前尝试做类似的事情

```
final Context context = getActivity(); 
```

然后在崩溃的行上使用*上下文而不是 getActivity() 。*

并作为说明。我会在这里使用[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)。它可以更好地管理 Dialog 的生命周期。当您在对话框打开时尝试旋转屏幕时会遇到问题。但是，使用 DialogFragment 它将为您解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T16:09:36.683

试试这个

```
AlertDialog alrt = (AlertDialog )arg0;
AlertDialog.Builder builder = new AlertDialog.Builder(alrt.getContext()); 
```

在显示新对话框后也关闭旧对话框。

# vba - 如何禁用以下超链接

> ID：11817844
> 
> 赞同：3
> 
> 时间：2012-08-05T15:55:37.453
> 
> 标签：vba, excel

是否可以（可能使用 VBA 宏）禁用 Excel 自动跟随电子表格中的超链接？

Excel 的默认设置是“点击关注，按住编辑”，这似乎无法更改并且非常烦人。我会对一个可以拦截任何“跟随链接”信号并忽略它们或转换为“编辑单元格”的宏感到非常满意，但我的 VBA 经验非常初级，因此非常感谢任何帮助。谢谢！

我能够找到的一些解决方案包括：

*   编写一个宏将所有链接转换为纯文本，
*   设置自动更正选项以防止创建新选项

我宁愿不走那条路。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-05T17:36:40.960

不确定答案是否像这样简单...我自己将其用作快速启动栏中的按钮...

```
Sub removehyperlink()
    Selection.Hyperlinks.Delete
End Sub 
```

# java - 在春季注入番石榴缓存

> ID：11817845
> 
> 赞同：3
> 
> 时间：2012-08-05T15:55:39.097
> 
> 标签：java, spring, inversion-of-control, guava

由于某种原因，我无法构造番石榴缓存实例并将其公开为 Spring bean。

下面是构造代码：

```
@Configuration
public class ProductRepositoryCache {

    @Bean
    public Cache<NameSearchKey,Collection<String>> nameSearchCache() {
        Cache<NameSearchKey,Collection<String>> result = CacheBuilder.newBuilder()
                .maximumSize(1024)
                .expireAfterAccess(0, TimeUnit.HOURS)
                .expireAfterWrite(6, TimeUnit.HOURS)
                .build();
        return  (Cache<NameSearchKey,Collection<String>>) result;
    }
} 
```

然后使用它：

```
@Resource
Cache<NameSearchKey,Collection<String>> nameSearchCache; 
```

但部署失败：

> 资源依赖注入失败；嵌套异常是 org.springframework.beans.factory.BeanNotOfRequiredTypeException：名为“nameSearchCache”的 Bean 必须是 [com.google.common.cache.Cache] 类型，但实际上是 [com.google.common.cache.CacheBuilder] 类型|#]

我相信我错过了一些简单的东西，但找不到它。所以，我的问题是 - 我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:29:11.060

真正的返回实例是`com.google.common.cache.LocalCache.LocalManualCache`缓存。我认为您的代码是正确的，而且我之前做过同样的事情，它工作正常。

我建议检查`BeanNotOfRequiredTypeException`其中包含：

> beanName - 请求的 bean 的名称
> 
> requiredType - 必需的
> 
> type actualType - 返回的实际类型，与预期类型不匹配

然后您可以调试`BeanNotOfRequiredTypeException`实例以找到原因。

此外，您可以声明 Bean 显式名称，这样可以避免一些容易出错的情况。

```
@Bean(name = "thisCache")
public Cache<NameSearchKey,Collection<String>> nameSearchCache() {...}

@Resource(name = "thisCache")
Cache<NameSearchKey,Collection<String>> nameSearchCache; 
```

# jquery - Jquery.Ajax 不起作用

> ID：11817846
> 
> 赞同：0
> 
> 时间：2012-08-05T15:55:41.137
> 
> 标签：jquery, ajax

我尝试写一个Jquery。代码点火器中的 Ajax。但它不会发布内容，而是在我单击链接时从头开始加载所有页面。因此，所有开始动画都会再次显示。
我的 ajax.js 在 header.php 头部部分：

```
$("#sidebar-content ul li a").click( function(e){
   e.preventDefault();
   var target_url = $(this).attr('href');
   $.ajax({
       url: target_url,
      type: 'POST',
      data: target_url,
   success: function(response) {
                $('#content').html(response.msg);
            }
   });
return false;
}); 
```

Menu.php 文件是：

```
<!-- SIDEBAR -->

<div id="sidebar">
    <div id="sidebar-content">
            <!-- MENU -->
       <ul id="menu">
         <li class="current"><a href="<?php echo site_url('home'); ?>">ANASAYFA</a></li>
         <li><a href="<?php echo site_url('about'); ?>">HAKKIMIZDA</a></li> 
```

我只想在主页中更改内容划分。我该如何更正代码？

编辑1：

这现在有效。但我不得不使用#page 而不是#content。

```
$("#sidebar-content ul li a").click( function(e){
     e.preventDefault();
     $('#page').load(this.href);
     return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:06:03.370

我认为您应该`return false`在活动结束时放置`click`-

```
$("#sidebar-content ul li a").click( function(e){
     // your existing stuff here

     return false; // or e.preventDefault();
}); 
```

这是完整的代码试试这个

```
$("#sidebar-content ul li a").click( function(e){
     e.preventDefault();
     $('#content').load(this.href);
     return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:02:58.837

要在容器中加载一些代码，您只需要使用 load 方法。就像是：

```
$( "#content" ).load( "your url here" ); 
```

看看文档：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

例如，删除“a”标签并使用跨度。它不会触发超链接，您也不会停止传播。而不是“a”使用：

```
<span data-url="your url...">link</span> 
```

当您单击跨度进行加载时，您将获得“data-url”属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:18:58.870

尝试;

确保你像链接 jquery 一样；

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"> 
```

或者

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"> 
```

并将您的javascript包装在里面；

```
$(document).ready( function() {

}); 
```

在您的网页部分内，以使您的代码运行。

```
$('#content').text(response.msg); 
```

代替

```
$('#content').html(response.msg); 
```

# propel - 如何将文件夹移动到新站点版本？

> ID：11817847
> 
> 赞同：0
> 
> 时间：2012-08-05T15:55:57.553
> 
> 标签：propel, file-transfer

如何将构建文件夹转移到另一个站点？

问题是数据库表前缀的名称被缝合到文件中，如果我有很多站点，我将不得不手动更改数据。是否可以自动更改表名和前缀？

例如：

```
abstract class BaseCategoriesPeer {

/** the default database name for this class */
const DATABASE_NAME = 'test';

/** the table name for this class */
const TABLE_NAME = 'test_123_categories'; 
```

对于每个新站点，我都必须更改数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:10:04.343

If I got it correctly, here's a possible solution:

You can check the **directory** in which your source file is, and make a `switch` to define a variable (let's say) `$appStored`.

Then in a class for database access definitions (it's more common than a table name schema that depends on the deploy site), you make another `switch`, this time `switch ($appStored)`, and then define the names for each deploy configuration.

# python - 如何在 Django 中创建装饰器来装饰视图

> ID：11817854
> 
> 赞同：2
> 
> 时间：2012-08-05T15:56:50.767
> 
> 标签：python, django, decorator

我有观点：

```
@decorator
def func(request):
  hello = "hello"
  return render_to_responce("test.html", locals() ) 
```

和模板 test.html：

```
{{ hello }}
{{ username }} 
```

我想为 编写装饰器`func(request)`，它将一个变量 USERNAME 添加到函数中，并在模板中返回两个参数。我试图使它如下：

```
def decorator(func):
    def wrapper( request, *args, **kwargs):
        username = request.user.username
        q = func(request, *args, **kwargs)
        #what I need add here I do not know ...
        return q   
    return wrapper 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T16:02:29.657

如果您的视图如下所示：

```
def func(request, username):
    hello = "hello"
    return render_to_responce("test.html", locals() ) 
```

你可以这样写一个装饰器：

```
from functools import wraps
def pass_username(view):
    @wraps(view)
    def wrapper(request, *args, **kwargs):
        return view(request, request.user.username, *args, **kwargs)
    return wrapper 
```

然后像这样使用它：

```
@pass_username
def func(request, username):
    hello = "hello"
    return render_to_response("test.html", locals()) 
```

（只要确保你会像对待它`urls.py`一样对待它`def func(request):`，没有`username`- 这个参数将由装饰器提供）

但确实这是一个非常简单的情况，并不真正需要单独的装饰器（无论如何，它只是视图定义中的额外一行）。

# google-chrome - chrome 扩展 - 清单版本 2

> ID：11817855
> 
> 赞同：1
> 
> 时间：2012-08-05T15:56:51.783
> 
> 标签：google-chrome, google-chrome-extension

我开发了 chrome 扩展的清单版本 1，它接受用户的输入并打开一个新窗口

但是当我升级到清单版本 2 时，新选项卡中对 www.someUrl.com 的重定向停止了。

请告诉我我必须根据版本 2 进行哪些更改才能使其运行。

popup.html

```
<body onload="document.form.query.focus()";>

<div id="searchwrapper">

<script>
function send_url() {   
    var url = "www.someurl.com?query="+form.query.value;
    window.open(url, '_blank'); 
    return false;
}
</script>
<form name="form" id="search_form" action="popup.html" method="POST">
<input type="text" class="searchbox" name="query" value=""/>
<input type="hidden" name="search" value="1">
<input type="image" src="search.png" onClick="send_url()" value=""/>
</form>
</div>

</body> 
```

和我的 manifest.json

```
{
"manifest_version": 2,
"name": "Search",
"version": "2.0",
"description": "This is a chrome extension for search",
"browser_action": {
  "default_icon": "icon.png",
  "default_popup": "popup.html"
},
"permissions": ["www.someUrl.com"]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:09:47.100

Manifest2 中不允许使用内联脚本。清单 2 也不允许

`onClick="send_url()"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T02:40:15.527

改变

```
"version": "2.0", 
```

到

```
 "manifest_version": 2, 
```

# javascript - Math.min.apply 为 null 返回 0

> ID：11817861
> 
> 赞同：10
> 
> 时间：2012-08-05T15:57:41.327
> 
> 标签：javascript

我想从数组中获取最小值。如果数据包含`null`值，则`Math.min.apply`返回`0`值`null`。请参阅[此 JSFiddle 示例](http://jsfiddle.net/jeryslo/7DCXw/)。即使数组中存在空值，如何获得真正的最小值？

代码（与 JSFiddle 示例相同）：

```
var arrayObject= [ {"x": 1, "y": 5}, {"x": 2, "y": 2}, {"x": 3, "y": 9}, {"x": 4, "y": null}, {"x": 5, "y": 12} ];

var max = Math.max.apply(Math, arrayObject.map(function(o){return o.y;}));
var min = Math.min.apply(Math, arrayObject.map(function(o){return o.y;}));

$("#max").text(max);
$("#min").text(min); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-05T16:02:01.927

嗯， 的数值`null`是`0`。如果您不想`null`考虑值，则必须将它们过滤掉：

```
var values = arrayObject.map(function(o){
    return o.y;
}).filter(function(val) {
    return val !== null
}); 
```

**参考**：[`Array#filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T16:05:12.700

Felix 解决方案的替代方案：分别将 min 和 max 调用`null`视为`+`或`-`无穷大。

```
var max = Math.max.apply(Math, arrayObject.map(function(o) {
    return o.y == null ? -Infinity : o.y;
}));
var min = Math.min.apply(Math, arrayObject.map(function(o) {
    return o.y == null ? Infinity : o.y;
})); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-05T16:13:24.513

我认为，通过直接应用逻辑，该[函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)不会映射属性、过滤`null`值和应用`Math.min/max`（如其他答案所建议的），而是会为您节省一些时间和代码：[`reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

```
var arrayObject= [ {"x": 1, "y": 5}, {"x": 2, "y": 2}, {"x": 3, "y": 9}, {"x": 4, "y": null}, {"x": 5, "y": 12} ];
var min = var arrayObject.reduce(function(m, o) {
    return (o.y != null && o.y < m) ? o.y : m;
}, Infinity);
var max = var arrayObject.reduce(function(m, o) {
    return (o.y != null && o.y > m) ? o.y : m;
}, -Infinity); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T16:03:17.727

```
var validArray = $.grep( arrayObject, function(item, _){
                    return item.y != null;
               });
//That gives a new array without null values for "y" 
```

现在做..

```
var min = Math.min.apply(Math, validArray.map(function(o){return o.y;})); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-01T20:38:18.830

这些是我在 2020 年一直在使用的。代码略短。

```
const min = (values) => values.reduce((m, v) => (v != null && v < m ? v : m), Infinity);
const max = (values) => values.reduce((m, v) => (v != null && v > m ? v : m), -Infinity);

const arrayObject = [
  { x: 1, y: 5 },
  { x: 2, y: 2 },
  { x: 3, y: 9 },
  { x: 4, y: undefined },
  { x: 5, y: 12 },
];
const yValues = arrayObject.map((item) => item.y)

console.log(yValues)
console.log('min', min(yValues))
console.log('max', max(yValues))
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-21T17:54:45.370

使用 lodash：

```
_.min([5, null]) = 5 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-07-16T10:49:35.380

你试过 min 函数中的条件（三元）运算符吗

（**如果 Value 为 Null** ？“一个不属于最小标准的大值”：“原始值”）

希望这可以帮助！

# ios - iOS Sharekit 语义问题

> ID：11817864
> 
> 赞同：0
> 
> 时间：2012-08-05T15:58:54.353
> 
> 标签：ios, sharekit

我正在使用 sharekit 进行 Twitter 集成。应用程序与 sharekit 一起工作正常，但编译器显示 25 条语义问题警告。由于应用程序运行良好，是否可以留下这些问题而不修复它们？留下这些问题会使某些用户的应用程序崩溃吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:04:23.940

作为一般的编程原则，你应该没有错误或警告......许多程序员认为任何警告都是错误......我个人喜欢看到 0 个警告......他们告诉你一些事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:12:28.820

确保您使用最新[的 ShareKit 2.0](https://github.com/ShareKit/ShareKit/)。只剩下一个警告，来自第 3 方 API。如果您决定使用 try it，最好的办法可能是从头开始重新实现它并按照[install wiki](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)操作。自最初的共享套件以来，发生了许多变化。

# java - Android sqlite 数据库报错 SQLiteException no such column

> ID：11817866
> 
> 赞同：1
> 
> 时间：2012-08-05T15:59:03.373
> 
> 标签：java, android, sql, sqlite

打开创建数据库的活动时，它立即崩溃并出现错误 SQLiteException: no such column。我不知道该怎么做，因为 SQLite 对我来说仍然是一个谜。

****新错误，这次我可以创建锻炼记录，但是一旦我点击编辑它，我会得到另一个不存在这样的列，这次是 squatLabel。但它确实存在....* ***

编辑：此时我得到的唯一错误是不存在这样的列：squatLabel

```
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ContextMenu.ContextMenuInfo;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.AdapterContextMenuInfo;

public class WorkoutList extends ListActivity {
    private static final int ACTIVITY_CREATE=0;
    private static final int ACTIVITY_EDIT=1;

    private static final int INSERT_ID = Menu.FIRST;
    private static final int DELETE_ID = Menu.FIRST + 1;

    private StrongDbAdapter mDbHelper;

    /** Called when the 5x5 button is pressed in first activity */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.workout_list);
        mDbHelper = new StrongDbAdapter(this);
        mDbHelper.open();
        fillData();
        registerForContextMenu(getListView());
    }

    private void fillData() {
        Cursor NotesCursor = mDbHelper.fetchAllNotes();

        // Get all of the rows from the database and create the item list
        NotesCursor = mDbHelper.fetchAllNotes();
        startManagingCursor(NotesCursor);

        // Create an array to specify the fields we want to display in the list (only TITLE)
        String[] from = new String[]{StrongDbAdapter.KEY_TITLE,};

        // and an array of the fields we want to bind those fields to (in this case just text1)
        int[] to = new int[]{R.id.workout_row };

        // Now create a simple cursor adapter and set it to display
        SimpleCursorAdapter notes = 
            new SimpleCursorAdapter(this, R.layout.workout_row, NotesCursor, from, to);
        setListAdapter(notes);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        menu.add(0, INSERT_ID, 0, R.string.menu_insert);
        return true;
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) {
        switch(item.getItemId()) {
            case INSERT_ID:
                createNote();
                return true;
        }

        return super.onMenuItemSelected(featureId, item);
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        menu.add(0, DELETE_ID, 0, R.string.menu_delete);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        switch(item.getItemId()) {
            case DELETE_ID:
                AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
                mDbHelper.deleteNote(info.id);
                fillData();
                return true;
        }
        return super.onContextItemSelected(item);
    }

    private void createNote() {
        Intent i = new Intent(this, WorkoutEdit.class);
        startActivityForResult(i, ACTIVITY_CREATE);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        Intent i = new Intent(this, WorkoutEdit.class);
        i.putExtra(StrongDbAdapter.KEY_ROWID, id);

        startActivityForResult(i, ACTIVITY_EDIT);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);
        fillData();
    }
} 
```

这是我的一些 WorkoutEdit 课程，问题似乎正在发生。

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.database.Cursor;
import android.os.Bundle;
import android.text.InputType;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioGroup;
import android.widget.RadioGroup.OnCheckedChangeListener;
import android.widget.TextView;
import android.widget.ViewFlipper;

public class WorkoutEdit extends Activity {

    public TextView mTitleText;
    //private EditText mBodyText;
    private Long mRowId;
    private StrongDbAdapter mDbHelper;
    private ViewFlipper viewFlipper;
    public TextView squats;
    public boolean workoutA;
    public String workoutState;
    //private double rowId = mRowId;
    public String squatLabel;
    public Button confirmButton;
    private Long prevId ;

    private void populateFields() {
        if (mRowId != null) {
            Cursor note = mDbHelper.fetchNote(mRowId);
            startManagingCursor(note);
            //mTitleText.setText(note.getString(
                    //note.getColumnIndexOrThrow(StrongDbAdapter.KEY_TITLE)));
            workoutState=(note.getString(
                    note.getColumnIndexOrThrow(StrongDbAdapter.KEY_TITLE)));
            squats.setText(note.getString(note.getColumnIndexOrThrow(StrongDbAdapter.SQUAT_LABEL)));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        saveState();
        outState.putSerializable(StrongDbAdapter.KEY_ROWID, mRowId);
    }

    @Override
    protected void onPause() {
        super.onPause();
        saveState();
    }

    @Override
    protected void onResume() {
        super.onResume();
        populateFields();
    }

    //Saves all the data to the database
    private void saveState() {
        String title = workoutState;
        String squatLabel = squats.getText().toString();

        if (mRowId == null) {
            long id = mDbHelper.createNote(title, squatLabel);
            if (id > 0) {
                mRowId = id;
            }
        } else {
            mDbHelper.updateNote(mRowId, title);
        }
    }       

    }
    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (mDbHelper != null) {
            mDbHelper.close();
        }

    }

} 
```

这是我的 DbAdapter

****更新了创建语句****

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class StrongDbAdapter {

    public static final String KEY_TITLE = "title";
    public static final String KEY_BODY = "body";
    public static final String KEY_ROWID = "_id";

    public static final String WORKOUT_STATE = "workoutState";

    public static final String SQUAT_LABEL = "squatLabel";

    private static final String TAG = "StrongDbAdapter";
    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private static final String DATABASE_NAME = "data";
    private static final String DATABASE_TABLE = "notes";
    private static final int DATABASE_VERSION = 2;

    /**
     * Database creation sql statement
     */
    private static final String DATABASE_CREATE =
        "create table notes (_id integer primary key autoincrement , "
        + "title text," +
        " squatLabel text, workoutState text );";

    private final Context mCtx;

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS notes");
            onCreate(db);
        }
    }

    /**
     * Constructor - takes the context to allow the database to be
     * opened/created
     * 
     * @param ctx the Context within which to work
     */
    public StrongDbAdapter(Context ctx) {
        this.mCtx = ctx;
    }

    /**
     * Open the notes database. If it cannot be opened, try to create a new
     * instance of the database. If it cannot be created, throw an exception to
     * signal the failure
     * 
     * @return this (self reference, allowing this to be chained in an
     *         initialization call)
     * @throws SQLException if the database could be neither opened or created
     */
    public StrongDbAdapter open() throws SQLException {
        mDbHelper = new DatabaseHelper(mCtx);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    public long createNote(String title, String squatLabel) {

        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_TITLE, title);
        //initialValues.put(WORKOUT_STATE, workoutState);
        initialValues.put(SQUAT_LABEL, squatLabel);

        return mDb.insert(DATABASE_TABLE, null, initialValues);
    }

    /**
     * Delete the note with the given rowId
     * 
     * @param rowId id of note to delete
     * @return true if deleted, false otherwise
     */
    public boolean deleteNote(long rowId) {

        return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    /**
     * Return a Cursor over the list of all notes in the database
     * 
     * @return Cursor over all notes
     */
    public Cursor fetchAllNotes() {

        return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
                WORKOUT_STATE}, null, null, null, null, null);
    }

    /**
     * Return a Cursor positioned at the note that matches the given rowId
     * 
     * @param rowId id of note to retrieve
     * @return Cursor positioned to matching note, if found
     * @throws SQLException if note could not be found/retrieved
     */
    public Cursor fetchNote(long rowId) throws SQLException {

        Cursor mCursor =

            mDb.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                    KEY_TITLE, WORKOUT_STATE}, KEY_ROWID + "='" + rowId+"'", null,
                    null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;

    }

    /**
     * Update the note using the details provided. The note to be updated is
     * specified using the rowId, and it is altered to use the title and body
     * values passed in
     * @return true if the note was successfully updated, false otherwise
     */
    public boolean updateNote(long rowId, String title) {
        ContentValues args = new ContentValues();
        args.put(KEY_TITLE, title);
        //args.put(WORKOUT_STATE, workoutState);

        return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

最后是我的 LogCat：

****使用新的 create 语句，这次没有这样的列 squatLabel。****

```
08-05 18:57:05.336: E/AndroidRuntime(1131): FATAL EXCEPTION: main
08-05 18:57:05.336: E/AndroidRuntime(1131): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.anapoleon.android.stronglifts/com.anapoleon.android.stronglifts.WorkoutEdit}: java.lang.IllegalArgumentException: column 'squatLabel' does not exist
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.os.Looper.loop(Looper.java:137)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.app.ActivityThread.main(ActivityThread.java:4340)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at java.lang.reflect.Method.invokeNative(Native Method)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at java.lang.reflect.Method.invoke(Method.java:511)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at dalvik.system.NativeStart.main(Native Method)
08-05 18:57:05.336: E/AndroidRuntime(1131): Caused by: java.lang.IllegalArgumentException: column 'squatLabel' does not exist
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:301)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at com.anapoleon.android.stronglifts.WorkoutEdit.populateFields(WorkoutEdit.java:199)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at com.anapoleon.android.stronglifts.WorkoutEdit.onCreate(WorkoutEdit.java:82)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.app.Activity.performCreate(Activity.java:4465)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-05 18:57:05.336: E/AndroidRuntime(1131):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
08-05 18:57:05.336: E/AndroidRuntime(1131):     ... 11 more 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:37:28.977

正如其他人所说，您没有在数据库中定义该列。

他们忽略告诉您的是，在将列添加到应用程序中的数据库架构**后，您必须执行以下两件事之一。**

1）删除并重新安装您的应用程序，以便在创建数据库时使用数据库的新架构

或者

2）增加数据库的版本，以便调用 onUpgrade 方法并将您的数据库更新为新模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:09:33.370

查看您的创建语句：

```
private static final String DATABASE_CREATE =
        "create table notes (_id integer primary key autoincrement , "
        + "title text," +
        " squatLabel text );"; 
```

你没有`workoutState`包括在内。只需将该列添加到 create 语句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:19:45.770

看起来您更新的 Create DB 语句是正确的。

至于下一个错误：它表明您永远不会关闭数据库和游标。使用 DB 时，我通常使用下一个模板：

```
openReadableDatabase(); // or openWritableDatabase();

// do some work with DB

closeDatabase(); 
```

上述方法可能如下所示：

```
private void closeDatabase() {
    if (_db != null && _db.isOpen()) {
        _db.close();
    }
}

private void openReadableDatabase() {
    _db = getReadableDatabase();
}

private void openWritableDatabase() {
    _db = getWritableDatabase();
} 
```

同样的你可以应用到光标对象：

```
Cursor cursor = _db.query(TABLE_NAME, FROM, null, null, null, null, null);

// do some work with cursor

cursor.close(); 
```

FROM 是一个列名数组。注意：最后一列名称后面的逗号不是拼写错误。

```
private static final String[] FROM = { COLUMN1_NAME, COLUMN2_NAME, }; 
```

**更新：**
您应该在 db.query() 方法的数据检索参数中添加一个 SquatLabel 列（对于 fetchNote 方法也是如此）：

```
public Cursor fetchAllNotes() {
    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
        SQUAT_LABEL, WORKOUT_STATE}, null, null, null, null, null);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-11T15:08:45.623

如果有人仍然面临同样的错误，如果您正在查询字符串，请确保添加引号。

例如，当我这样写时，我出错了：

```
 Cursor cursor = this.database.query(
            SQLiteHelper.TABLE_NAME,
            new String[]{ID, FNAME},
            "fname"+" = "+name,   ...... 
```

我通过以下方式解决了它：

```
 Cursor cursor = this.database.query(
            SQLiteHelper.TABLE_NAME,
            new String[]{ID, FNAME},
            "fname"+" = "+"'"+name+"'", ..... 
```

# php - PHP 中的 SOAP 解析

> ID：11817869
> 
> 赞同：0
> 
> 时间：2012-08-05T15:59:52.760
> 
> 标签：php, parsing, soap

我在 PHP 中创建了一个 SOAP 客户端：

```
$client = new SoapClient("http://xxxx.net/Service/Service.svc?wsdl");
$response= $client->GetHotelNugget($data); 
```

但我无法解析响应。我需要`<a:TITLE>`标签值。

SOAP 客户端的输出：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <GetHotelNuggetResponse xmlns="http://tempuri.org/">
         <GetHotelNuggetResult xmlns:a="http://schemas.datacontract.org/2004/07/Model" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <a:HotelNugget>
               <a:NUGGETNAME>Yaz Tatili Otelleri</a:NUGGETNAME>
               <a:NUGGETORDER>10</a:NUGGETORDER>
               <a:PARENTUNIQUECODE>AS_SOL_UST</a:PARENTUNIQUECODE>
               <a:REWRITENUGGETNAME>yaz-tatili-otelleri</a:REWRITENUGGETNAME>
               <a:TITLE>Yaz Tatili Otelleri</a:TITLE>
               <a:UNIQUECODE>YTOTL</a:UNIQUECODE>
               <a:WEBNUGGETID>306</a:WEBNUGGETID>
            </a:HotelNugget>
            <a:HotelNugget>
               <a:NUGGETNAME>Ramazan Fırsatları</a:NUGGETNAME>
               <a:NUGGETORDER>20</a:NUGGETORDER>
               <a:PARENTUNIQUECODE>AS_SOL_UST</a:PARENTUNIQUECODE>
               <a:REWRITENUGGETNAME>ramazan-firsatlari</a:REWRITENUGGETNAME>
               <a:TITLE>Ramazan Fırsatları</a:TITLE>
               <a:UNIQUECODE>RFIR</a:UNIQUECODE>
               <a:WEBNUGGETID>308</a:WEBNUGGETID>
            </a:HotelNugget>
            <a:HotelNugget>
               <a:NUGGETNAME>Ramazan Bayramı Otelleri</a:NUGGETNAME>
               <a:NUGGETORDER>30</a:NUGGETORDER>
               <a:PARENTUNIQUECODE>AS_SOL_UST</a:PARENTUNIQUECODE>
               <a:REWRITENUGGETNAME>ramazan-bayrami-otelleri</a:REWRITENUGGETNAME>
               <a:TITLE>Ramazan Bayramı Otelleri</a:TITLE>
               <a:UNIQUECODE>RBO</a:UNIQUECODE>
               <a:WEBNUGGETID>283</a:WEBNUGGETID>
            </a:HotelNugget>       
         </GetHotelNuggetResult>
      </GetHotelNuggetResponse>
   </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:12:07.847

尝试下面的代码并检查`print_r`值

```
$xmlResp = simplexml_load_string($response);
$jsonResp = json_encode($xmlResp);
$arrResp = json_decode($jsonResp);

foreach($arrResp as $k=>$v) {
    print_r($v);
} 
```

然后，您可以通过以下方式访问 foreach 中的 TITLE 标记

`$v['HotelNugget']['TITLE'];`

# java - DAO 模式多线程

> ID：11817872
> 
> 赞同：1
> 
> 时间：2012-08-05T16:00:32.780
> 
> 标签：java, multithreading, design-patterns, dao

我在一个多线程 Java 应用程序上工作，它是一个提供 REST 服务的 Web 服务器，每秒大约 1000 个请求。我有一个关系数据库，我使用 hibernate 来访问它。该数据库每秒大约有 300-400 个请求。从多线程的角度来看，我想知道 DAO 模式是否正确。

因此，有一个 BaseModel 类看起来像这样：

```
public class BaseModelDAO 
{

    protected Session session;

    protected final void commit() {
        session.getTransaction().commit();
    }

    protected final void openSession() {
        session = HibernateUtil.getSessionFactory().openSession();
        session.beginTransaction();
    }

} 
```

然后我为数据库中的每个表都有一个 DAO 类：

```
public class ClientDAOHibernate extends BaseModelDAO implements ClientDAO 
{

    private Logger log = Logger.getLogger(this.getClass());

    @Override
    public synchronized void addClient(Client client) throws Exception {
        try {
            openSession();
            session.save(client);
            commit();
            log.debug("client successfully added into database");
        } catch (Exception e) {
            log.error("error adding new client into database");
            throw new Exception("couldn't add client into database");
        } finally {
            session.close();
        }
    }

    @Override
    public synchronized Client getClient(String username, String password) throws Exception {
        Client client = null;
        try {
            openSession();
            client = (Client) session.createCriteria(Client.class).createAlias("user", "UserAlias").add(Restrictions.eq("UserAlias.username", username)).add(Restrictions.eq("UserAlias.password", password)).uniqueResult();
            commit();
        } catch (Exception e) {
            log.error("error updating user into database");
            throw new DBUsersGetUserException();
        } finally {
            session.close();
        }
        return client;
    }
} 
```

以下是我的问题：

1.  考虑到并发请求的数量，可以为每次访问数据库打开和关闭会话吗？

2.  现在可以直接从应用程序业务逻辑访问 DAO 类。应该使用 DAO 管理器安装吗？如果是，什么应该是一个好的设计来实现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T18:23:20.640

不，您的实现不是一个好的实现：

*   交易应该围绕业务逻辑，而不是围绕数据访问逻辑：如果你想将钱从一个账户转移到另一个账户，你不能有一个借方操作的交易，而另一个贷方操作的交易。事务必须涵盖整个用例。
*   通过同步 DAO 的每个方法，您可以禁止两个请求同时获取一个客户端。你的 DAO 中不应该有会话字段。session 应该是每个方法的局部变量。通过这样做，您的 DAO 将变得无状态，因此本质上是线程安全的，无需任何同步
*   正如 Michael 在他的评论中所说，使用程序化事务会使代码冗长、复杂，并且不专注于业务用例。使用 EJB 或 Spring 享受声明式事务管理和异常处理。

# c++ - 从函数返回值时使用 std::move() 以避免复制

> ID：11817873
> 
> 赞同：57
> 
> 时间：2012-08-05T16:00:36.873
> 
> 标签：c++

考虑支持默认移动语义的类型 T。还要考虑下面的函数：

```
T f() {
   T t;
   return t;
}

T o = f(); 
```

在旧的 C++03 中，一些非最优编译器可能会调用复制构造函数两次，一次用于“返回对象”，一次用于`o`.

在 c++11 中，由于`t`inside`f()`是一个左值，那些编译器可能会像以前一样调用一次复制构造函数，然后调用 o 的移动构造函数。

说避免第一个“额外副本”的唯一方法是`t`返回时移动是否正确？

```
T f() {
   T t;
   return std::move(t);
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-05T16:04:57.243

不。只要语句中的局部变量`return`符合复制省略的条件，它就会绑定到右值引用，因此`return t;`与`return std::move(t);`您的示例中关于哪些构造函数符合条件的情况相同。

但是请注意，这会`return std::move(t);` *阻止*编译器执行复制省略，而`return t`; 没有，因此后者是首选样式。[感谢@Johannes 的更正。] 如果发生复制省略，是否使用移动构造的问题将成为一个有争议的问题。

参见标准中的 12.8(31, 32)。

还要注意，如果`T`有一个可访问的副本，但一个删除的移动构造函数，则`return t;`不会编译，因为必须首先考虑移动构造函数；您必须说一些事情才能`return static_cast<T&>(t);`使其发挥作用：

```
T f()
{
    T t;
    return t;                 // most likely elided entirely
    return std::move(t);      // uses T::T(T &&) if defined; error if deleted or inaccessible
    return static_cast<T&>(t) // uses T::T(T const &)
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-31T04:31:25.767

不，最佳做法是直接`return t;`.

如果类`T`有未删除的移动构造函数，并且 notice`t`是一个`return t`符合复制省略条件的局部变量，它就像移动构造返回的对象一样`return std::move(t);`。但是`return t;`仍然可以复制/移动省略，因此可以省略构造，而`return std::move(t)`始终使用移动构造函数构造返回值。

如果类中的移动构造函数`T`被删除但复制构造函数可用，`return std::move(t);`则不会编译，但`return t;`仍使用复制构造函数进行编译。与提到的[@Kerrek](https://stackoverflow.com/users/596781/kerrek-sb)不同，`t`它没有绑定到右值引用。对于符合复制省略的返回值有一个两阶段的重载解决方案——先尝试移动，然后复制，移动和复制都可能被省略。

```
class T
{
public:
    T () = default;
    T (T&& t) = delete;
    T (const T& t) = default;
};

T foo()
{
    T t;
    return t;                   // OK: copied, possibly elided
    return std::move(t);        // error: move constructor deleted
    return static_cast<T&>(t);  // OK: copied, never elided
} 
```

如果`return`表达式是左值并且不符合复制省略的条件（很可能您正在返回非局部变量或左值表达式）并且您仍然希望避免复制，那么`std::move`这将很有用。但请记住，最佳实践是让复制省略成为可能。

```
class T
{
 public:
    T () = default;
    T (T&& t) = default;
    T (const T& t) = default;
};

T bar(bool k)
{
    T a, b;
    return k ? a : b;            // lvalue expression, copied
    return std::move(k ? a : b); // moved
    if (k)
        return a;                // moved, and possibly elided
    else
        return b;                // moved, and possibly elided
} 
```

标准中的 12.8(32) 描述了该过程。

> 12.8 [class.copy]
> 
> 32 当满足或将满足复制操作省略的条件时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，重载决策以选择复制的构造函数就像对象由右值指定一样首先执行。如果重载决议失败，或者如果所选构造函数的第一个参数的类型不是对对象类型的右值引用（可能是 cv 限定的），则再次执行重载决议，将对象视为左值。[注意：无论是否会发生复制省略，都必须执行此两阶段重载解析。它确定如果不执行省略则要调用的构造函数，并且即使调用被省略，所选构造函数也必须是可访问的。——尾注]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T13:33:33.963

好的，我想对此发表评论。这个问题（和答案）让我相信没有必要`std::move`在退货声明中指定。然而，在处理我的代码时，我只是被认为是一个不同的教训。

所以，我有一个函数（它实际上是一个特化），它需要一个临时的并返回它。（通用函数模板做其他事情，但特化做恒等操作）。

```
template<>
struct CreateLeaf< A >
{
  typedef A Leaf_t;
  inline static
  Leaf_t make( A &&a) { 
    return a;
  }
}; 
```

`A`现在，这个版本在返回时调用复制构造函数。如果我将 return 语句更改为

```
Leaf_t make( A &&a) { 
  return std::move(a);
} 
```

`A`然后调用移动构造函数，我可以在那里做一些优化。

它可能不是 100% 匹配您的问题。但认为这`return std::move(..)`从来没有必要是错误的。我以前也是这么想的。不再 ;-）

# selenium - TestNG 是否足以作为 Web 测试框架？

> ID：11817874
> 
> 赞同：1
> 
> 时间：2012-08-05T16:00:46.643
> 
> 标签：selenium, testng, selenium-webdriver

我刚开始使用 Selenium 进行 Web 测试，并且一直在学习 Selenium WebDriver + Java。

我的问题是，为什么我需要在有 TestNG 的情况下构建测试框架？

TestNG 作为一个框架不能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:28:09.217

没有什么 ：-）

更严重的是，TestNG 在 Selenium 用户中非常受欢迎，原因有很多，其中支持：

*   依赖关系（非常方便测试相互跟随的页面）。
*   参数化`@DataProvider`（用于测试浏览器和用户代理的各种组合）。
*   并行测试（让您同时在多个浏览器上进行测试）。

查看 Selenium 论坛以获取更多信息，如果您有任何问题，请随时通过电子邮件发送到 testng-users 列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:21:53.090

是的，我认为 TestNG 作为一个 Web 测试框架就足够了。如果你熟悉使用 JUnit，切换到 TestNG 会更容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:23:52.987

有时可能需要构建自定义框架。你可以为此使用 TestNG。:)

# javascript - 使用 css3/jquery 来回“切换”元素旋转

> ID：11817879
> 
> 赞同：1
> 
> 时间：2012-08-05T16:01:27.973
> 
> 标签：javascript, jquery, css

我有一个图像，我想点击动画旋转 90 度，当再次点击它时，我希望它动画旋转 -90 度。

对于使用 css3 变换的旋转 im：

```
-moz-transform:rotate(90deg); 
-webkit-transform:rotate(90deg); 
-ms-transform:rotate(90deg); 
```

对于 jquery，我想设置一个变量来检查对象是否已旋转，然后采取相应措施。

我一直很难让它发挥作用。我已经组合了一个[JsFiddle](http://jsfiddle.net/58Nfn/)。

这是我正在使用的代码：

```
var turn = true;
$("#button").click(function () {
    $("#shape").css('transform', function(index) {
      return index * 90;
    });
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T16:17:07.427

添加一些转换和旋转类，然后切换该类：

CSS：

```
#shape  { width: 100px; 
          height: 200px; 
          background:#000;
          -moz-transition: all 1s ease;
          -webkit-transition: all 1s ease;
          -o-transition: all 1s ease;
           transition: all 1s ease;
         }

.rotate {-moz-transform: rotate(90deg);
         -webkit-transform:rotate(90deg); 
         -ms-transform:rotate(90deg);
         -o-transform:rotate(90deg);
         } 
```

js：

```
$("#button").click(function() {
    $("#shape").toggleClass('rotate');
});​ 
```

[小提琴](http://jsfiddle.net/58Nfn/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T16:11:51.323

如果我理解正确，[应该](http://jsfiddle.net/58Nfn/2/)这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-17T18:33:31.147

我认为一般来说，如果您要使用过渡，您应该针对您想要影响的特定属性。我认为使用“全部”是不好的做法。

目标替代：css：

```
#shape  { 
    width: 100px; 
    height: 200px; 
    background:#000;
    -moz-transition: transform 1s ease;
    -webkit-transition: transform 1s ease;
    -o-transition: transform 1s ease;
    transition: transform 1s ease;
}

.rotate {
    -moz-transform: rotate(90deg);
    -webkit-transform:rotate(90deg); 
    -ms-transform:rotate(90deg);
    -o-transform:rotate(90deg);
    transform:rotate(90deg);
}

///jquery

$("#button").click(function() {
    $("#shape").toggleClass('rotate');
});​ 
```

# android - Android - 检查应用内购买是否已完成

> ID：11817880
> 
> 赞同：1
> 
> 时间：2012-08-05T16:01:38.580
> 
> 标签：android, in-app-purchase

我看过这个问题：[Android - 如何检查应用内购买是否已经完成？](https://stackoverflow.com/questions/9819116/android-how-to-check-if-in-app-purchase-has-already-been-done/9819333#comment15708311_9819333)

然而，这对我来说不是很清楚。我正在使用答案中提到的 AndroidBillingLibrary，我有几个问题。

使用时`restoreTransactions()`，这是否意味着此时购买的内容存储在设备本身上？不能以某种方式操纵吗？

如果我在另一台设备上购买商品怎么办，第一台设备怎么知道这一点？我需要再次恢复吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:25:09.360

对于第一个问题，每次购买都使用 ID 进行管理，因此只有托管项目使用`restoreTransactions()`. 此外，`restoreTransactions()`不适用于保留的产品 ID。因此它仍然是安全的。

理想情况下，您应该`restoreTransactions()`在应用程序每次运行时调用。关键是所有交易都与设备/用户 ID 配对（不确定 Google 如何在其服务器端处理身份验证，但我认为它使用的是您的 Google 帐户以及与 Google 帐户配对的手机的组合）。

因此，如果有人要修改事务文件，当与 Google 一方的日志文件进行比较时，它就会失效。

希望这可以澄清事情:)

# iphone - 推送通知未发送到具有 ad Hoc Profile 的设备（使用 Parse）

> ID：11817881
> 
> 赞同：1
> 
> 时间：2012-08-05T16:01:50.843
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

Push 正在使用我的开发配置文件，我试图让它为我的 Ad Hoc 配置文件工作。

我使用文本编辑器检查了临时配置文件，发现：

```
 <key>aps-environment</key>
        <string>production</string> 
```

因此，我在我的应用 ID 上设置了生产证书：

![在此处输入图像描述](../Images/3dfccf40ff2325e874635b4e8f04fc51.png)

1.  我重新生成了我的个人资料并用它重建了项目。
2.  我用正确的证书上传了我的 Ad Hoc 构建（测试飞行）（我手动检查了它）
3.  我检查了设备日志，发现它确实成功注册了设备令牌：

    `- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)newDeviceToken` {

    ```
     // Tell Parse about the device token (this gets called)
     [PFPush storeDeviceToken:newDeviceToken];
     ... 
    ```

安装对象出现在 Parse 的 Web UI 中。（[Parse](http://parse.com/)是移动应用程序的后端服务）

![在此处输入图像描述](../Images/3cabc575278e7a1e8ed857212e4cd5f8.png)

客户端推送出现在推送日志中（参见屏幕截图 3）。我还从 Web UI 工具创建了手动文本推送。

![在此处输入图像描述](../Images/842e1e6e59ec78776b5d2d4c54465c71.png)

设备上没有出现任何推送。我尝试让应用程序在前台运行并且根本不运行（从任务栏中删除）。

有人有什么建议吗？我厌倦了这个......我似乎已经尝试了一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T03:44:42.303

似乎您正确定义了证书和配置文件。在使用 APN 签署 Parse 连接或向 APN 发送推送消息的证书的过程中缺少某些内容。

真的很抱歉我荒谬的英语，但这会有点长。您是否尝试使用您的证书和私钥手动连接到 APNs？

要做到这一点并使事情变得更简单，请将您的证书和私钥放在同一个文件夹中，然后打开终端并转到放置证书和密钥文件的同一个文件夹并运行以下命令：

```
 openssl s_client -connect gateway.push.apple.com:2195 -cert YourCertFileHere -key YourPrivateKeyFileHere 
```

...并输入密钥的密码

如果一切顺利，您将通过 telnet 连接到 APN，并且连接不会断开，否则，您没有有效的文件对（密钥和证书）。

其他可能的原因是 Parse 试图向沙箱服务器发送推送消息，我无法弄清楚你如何确认这一点，因为我没有使用这个 BaaS 的经验。

我希望这可以帮助你。

# c# - 只选择 LINQ 中的第一个对象？

> ID：11817882
> 
> 赞同：5
> 
> 时间：2012-08-05T16:01:53.323
> 
> 标签：c#, linq, c#-4.0

基本上我想将此代码改编为 LINQ：

```
private Tile CheckCollision(Tile[] tiles)
{
    foreach (var tile in tiles)
    {
        if (tile.Rectangle.IntersectsWith(Rectangle))
        {
            return tile;
        }
    }

    return null;
} 
```

代码检查每个图块并返回与对象碰撞的第一个图块。我只想要第*一个*图块，而不是像我使用这个得到的图块数组：

```
private Tile CheckCollision(Tile[] tiles)
{
    var rtn = 
        from tile in tiles
        where tile.Rectangle.IntersectsWith(Rectangle)
        select tile;

} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-05T16:04:17.990

您可以使用`.First()`or`.FirstOrDefault()`扩展方法来检索匹配某个条件的第一个元素：

```
private Tile CheckCollision(Tile[] tiles)
{
    return tiles.FirstOrDefault(t => t.Rectangle.IntersectsWith(Rectangle));
} 
```

如果在数组中找不到与所需条件匹配的`.First()`元素，则扩展方法将引发异常。`.FirstOrDefault()`另一方面，将默默地返回 null 。因此，请使用更适合您需求的那个。

请注意，`.Single()`您还可以使用扩展方法。不同之`.First()`处在于，`.Single()`如果多个元素与条件匹配，则会抛出异常，而`.First()`将返回第一个。

# r - 拟合 3 参数 Weibull 分布

> ID：11817883
> 
> 赞同：9
> 
> 时间：2012-08-05T16:01:56.843
> 
> 标签：r, statistics, distribution, model-fitting, weibull

我一直在 R 中进行一些数据分析，我试图弄清楚如何将我的数据拟合到 3 参数 Weibull 分布。我找到了如何使用 2 参数 Weibull 来完成它，但是在找到如何使用 3 参数来完成它方面做得很短。

这是我使用包中的`fitdistr`函数拟合数据的方法`MASS`：

```
y <- fitdistr(x[[6]], 'weibull') 
```

`x[[6]]`是我的数据的一个子集，y 是我存储拟合结果的位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T16:20:31.893

首先，您可能想查看[FAdist package](http://cran.r-project.org/web/packages/FAdist/FAdist.pdf)。`rweibull3`但是，从到并不难`rweibull`：

```
> rweibull3
function (n, shape, scale = 1, thres = 0) 
thres + rweibull(n, shape, scale)
<environment: namespace:FAdist> 
```

同样从`dweibull3`到`dweibull`

```
> dweibull3
function (x, shape, scale = 1, thres = 0, log = FALSE) 
dweibull(x - thres, shape, scale, log)
<environment: namespace:FAdist> 
```

所以我们有这个

```
> x <- rweibull3(200, shape = 3, scale = 1, thres = 100)
> fitdistr(x, function(x, shape, scale, thres) 
       dweibull(x-thres, shape, scale), list(shape = 0.1, scale = 1, thres = 0))
      shape          scale          thres    
    2.42498383     0.85074556   100.12372297 
 (  0.26380861) (  0.07235804) (  0.06020083) 
```

**编辑：**如评论中所述，尝试以这种方式拟合分布时会出现各种警告

```
Error in optim(x = c(60.7075705026659, 60.6300379017397, 60.7669410153573,  : 
  non-finite finite-difference value [3]
There were 20 warnings (use warnings() to see them)
Error in optim(x = c(60.7075705026659, 60.6300379017397, 60.7669410153573,  : 
  L-BFGS-B needs finite values of 'fn'
In dweibull(x, shape, scale, log) : NaNs produced 
```

起初对我来说只是`NaNs produced`，这不是我第一次看到它，所以我认为它没有那么有意义，因为估计很好。经过一番搜索，这似乎是一个非常流行的问题，我既找不到原因也找不到解决方案。一种替代方法是使用`stats4`包和`mle()`函数，但它似乎也有一些问题。但我可以让您使用 danielmedic 的[代码](http://statisticians.livejournal.com/35256.html)修改版本，我已经检查了几次：

```
thres <- 60
x <- rweibull(200, 3, 1) + thres

EPS = sqrt(.Machine$double.eps) # "epsilon" for very small numbers

llik.weibull <- function(shape, scale, thres, x)
{ 
  sum(dweibull(x - thres, shape, scale, log=T))
}

thetahat.weibull <- function(x)
{ 
  if(any(x <= 0)) stop("x values must be positive")

  toptim <- function(theta) -llik.weibull(theta[1], theta[2], theta[3], x)

  mu = mean(log(x))
  sigma2 = var(log(x))
  shape.guess = 1.2 / sqrt(sigma2)
  scale.guess = exp(mu + (0.572 / shape.guess))
  thres.guess = 1

  res = nlminb(c(shape.guess, scale.guess, thres.guess), toptim, lower=EPS)

  c(shape=res$par[1], scale=res$par[2], thres=res$par[3])
}

thetahat.weibull(x)
    shape     scale     thres 
 3.325556  1.021171 59.975470 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-25T17:57:50.803

另一种选择：包“lmom”。L-矩技术估计

```
library(lmom)
thres <- 60
x <- rweibull(200, 3, 1) + thres
moments = samlmu(x, sort.data = TRUE)
log.moments <- samlmu( log(x), sort.data = TRUE )
weibull_3parml <- pelwei(moments)
weibull_3parml
zeta      beta     delta 
59.993075  1.015128  3.246453 
```

但我不知道如何在这个包或上面的解决方案中做一些拟合优度统计。其他软件包，您可以轻松地进行拟合优度统计。无论如何，您可以使用以下替代方法：ks.test 或 chisq.test

# c++ - 将 unsigned char * 复制到 unsigned char*

> ID：11817897
> 
> 赞同：1
> 
> 时间：2012-08-05T16:04:15.367
> 
> 标签：c++

我需要将数据包状态保存一段时间。所以我读取了表示为 unsigned char* 的数据包数据，然后我用这些数据创建了一条记录，并将记录保存在列表中一段时间​​。

这将是一种将记录中的数据包表示为 char* 或 char[] 的更好方法。

如何将读取的数据（ unsigned char *）复制到两个选项：到 unsigned char[] 和到 unsigned char* *

我需要复制数据，因为每次读取数据包时都会读取到相同的字符*，所以当我保存一段时间时，我需要先复制数据

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T16:23:42.273

如果数据包数据是二进制的，我更喜欢使用`std::vector`它来存储数据，而不是 C`strXXX`函数之一，以避免数据流中存在潜在的 NULL 字符的问题。大多数`strXXX`函数查找 NULL 字符并截断它们的操作。由于数据不是字符串，因此我也会避免`std::string`执行此任务。

```
std::vector<unsigned char> v( buf, buf + datalen ); 
```

向量构造函数将复制所有数据，`buf[0]`并`buf[datalen - 1]`在向量超出范围时释放内存。`v.data()`您可以使用or获取指向底层缓冲区的指针`&v[0]`。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-05T16:18:22.490

因此，听起来您需要将来自多个数据包的数据保存在一个列表中，直到将来某个时候。

如果是我，我通常会使用 std::string 或 std::vector ，因为这样可以消除分配问题并且通常很快。

如果您确实打算使用 char* 或 char[]，那么您会想要使用 char*。声明像“char buf[1024];”这样的变量 将其分配到堆栈上，这意味着当该函数返回时，它就消失了。要将其保存在列表中，您需要动态分配它，因此您可以执行类似“char *buf = new char[packet.size];”之类的操作 然后复制数据并将指针和数据长度存储在列表中（或者，正如我之前所说，使用 std::string 避免单独保留长度）。

你如何复制数据？

可能是memcpy。strcpy 函数会遇到数据中可能包含 nul 字符的问题，这在网络情况下很常见。所以，像：

```
char *buf = new char[packet_length];
memcpy(buf, packet_data, packet_length);
// Put buf and packet_length into a structure in your list. 
```

# perl - 是否有用于服务器端 Perl/CGI 的调试工具，例如 Firebug？

> ID：11817913
> 
> 赞同：2
> 
> 时间：2012-08-05T16:06:10.877
> 
> 标签：perl, debugging, testing, cgi

我真的很喜欢使用 Firebug 来调试我的 JavaScript 代码、HTML DOM 和网络加载，即：关于 Web 开发的所有客户端。

服务器端的情况并不那么乐观。我正在开发的应用程序使用 Perl 和[CGI](http://metacpan.org/module/CGI)​​ 和[DBI](http://metacpan.org/module/DBI)等强制性标准模块。我知道[标准的故障排除技术](https://stackoverflow.com/questions/2165022/how-can-i-troubleshoot-my-perl-cgi-script)，但似乎没有调试工具可以跟踪例如数据库查询或函数调用并给我很好的输出。

尤其不能只在 STDOUT（想象一下`Content-Type: application/json`）或 STDERR （通过错误日志中查找非常不舒服）上拉出输出，并且该工具不应该要求我手动将东西修补到核心模块`use Data::Dumper; print '<pre>',Dumper($foo),'</pre>'`中或贯穿代码。

**长话短说：**有没有一种工具可以让 Perl/CGI 的服务器端调试像 Firebug 在客户端的调试一样有趣？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T01:57:19.117

是的，但他们依赖[Plack](https://metacpan.org/module/Plack)。Plack 是位于 Web 框架和 Web 服务器之间的层。Plack 消除了服务器差异，并提供了一个[插入各种调试工具](https://metacpan.org/module/Plack%3a%3aMiddleware%3a%3aDebug)的地方。其中包括数据库[配置文件](https://metacpan.org/module/Plack%3a%3aMiddleware%3a%3aDebug%3a%3aDBIProfile)和[跟踪](https://metacpan.org/module/Plack%3a%3aMiddleware%3a%3aDebug%3a%3aDBITrace)信息，您可以[编写自己的调试面板](https://metacpan.org/module/Plack%3a%3aMiddleware%3a%3aDebug#HOW-TO-WRITE-YOUR-OWN-DEBUG-PANEL)。还有一个[交互式调试器](http://blogs.perl.org/users/yko/2011/07/hello-world-in-plack-2-interactive-debugger.html)，虽然我自己没有使用过。

现在很多 Perl Web 框架（例如 Catalyst 和 Dancer）都使用 Plack，但是如果你直接使用 Perl 和 CGI​​，你就不会得到它。幸运的是，让 CGI 应用程序在 Plack 上运行非常容易。要么[用使用 Plack 的子类替换 CGI，](http://advent.plackperl.org/2009/12/day-6-convert-cgi-apps-to-psgi.html)要么[将 CGI 代码包装在仿真层](http://advent.plackperl.org/2009/12/day-9-running-cgi-scripts-on-plack.html)中。

除了调试工具之外，转换为 Plack 有很多优势，值得付出努力。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T16:35:46.520

不，不是。

你可以做的事情是：

在你的代码中添加调试代码。

```
use constant DEBUG => 1;
...;
debug_function($var) if DEBUG; 
```

一旦取消设置`DEBUG`部署常量，您将不会有任何额外的运行时成本（语句已被优化掉），并且您可以在必要时重新激活它们。

你甚至可以说一些邪恶的话，比如

```
BEGIN {require Data::Dumper if DEBUG} 
```

有条件地加载调试模块。

如果你想覆盖核心函数，为什么不添加调试处理程序呢？那不是邪恶的修补，那是增强……</p>

```
BEGIN {
   if (DEBUG) {
      my $oldfunction = \&CORE::function;
      *CORE::function = sub {  # add prototypes if you like them
         debug_handler(@_);
         &$oldfunction;
      };
   }
} 
```

使用此技术记录您对数据库的调用。

您可以重新打开`STDERR`一些特殊文件（或管道，或终端，或......）

```
BEGIN {
   if (DEBUG) {
      close STDERR or die "STDERR hates me and doesn't want to be closed.";
      open STDERR, '>', "/path/to/my/error/log.file" or die "couldn't open error log";
   }
} 
```

你可以定义你的`DIE`和`WARN`处理程序来做*你*想做的事情：

```
$SIG{__WARN__} = sub {
    print MYERRORS "There was a warning: $!";
    # do additional error handling unless you're paranoid
} 
```

`warnings`pragma 可以帮助您使重要的警告变得致命：

```
use warnings qw(FATAL importantWarning); 
```

或创建自己的警告，只需查看文档

要获取调用堆栈跟踪，请查看该`caller`函数的众多可能性。本质上，您可能希望构建您对`Carp`模块的个人解释，因为`CGI::Carp`可能无法满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:26:47.193

除了上述之外，检查[Devel::LTrace](http://search.cpan.org/~koorchik/Debug-LTrace-0.03/lib/Debug/LTrace.pm#VERSION)，它可以告诉您何时调用命名的子例程，以及[Devel::CallTrace](http://search.cpan.org/~jesse/Devel-CallTrace-1.2/lib/Devel/CallTrace.pm)，它可以告诉您何时何地调用了哪些子例程。

# php - 在 PHP 中接收来自 jquery 的数组

> ID：11817914
> 
> 赞同：0
> 
> 时间：2012-08-05T16:06:11.453
> 
> 标签：php, jquery, arrays

我在多个复选框上使用 jquery 将一组值传递给 PHP：

```
echo "<input type='checkbox' class='regularCheckbox' name='color[]' value='".$colorBoxes[color_base1]."' /><font class='similarItemsText'>   ".$colorBoxes[color_base1]."</font><br />"; 
```

jQuery 看起来如下：

```
jQuery(document).ready(function($) {
    $("input:checkbox").change(function() {
        if($(this).is(':checked')) 
            {
            var color = [];
            color.push($(this).val());
            $(".indexMain").load('indexMain.php?color='+color);
            }
});
}); 
```

然后我在 PHP 中接收数组，带有`$color = $_GET['color'];`. 这足以拥有数组并使用 a`foreach($color as $value) {`来使用我的多个值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:36:14.127

而不是使用`.load()`您应该创建一个`.post(), .get(), or .ajax()`来发送您的数据。例如：

```
jQuery(document).ready(function($) {
    $("input:checkbox").change(function() {
        if($(this).is(':checked')) {
            // not really sure why you are creating a new, empty array 
            // every time and only passing one color...
            var color = [];
            color.push($(this).val());
            $.ajax({
                type: "POST",
                url: "indexMain.php",
                data: {color: color},
                success: function(output) {
                    // load the textbox that 'indexMain.php' is outputting 
                    $(".indexMain").html(output);
                }
            });
        }
    });
}); 
```

# iphone - Sandbox: Prompt to remove Game Center data when app is deleted?

> ID：11817916
> 
> 赞同：3
> 
> 时间：2012-08-05T16:06:21.117
> 
> 标签：iphone, xcode, ios5, game-center

I've looked for an answer in the Apple Docs, and here and other sites, and cannot find anything. So I'm hoping to find someone who knows or has experience with it.

My app is using GameKit to store some Achievements (no scores or leaderboard). When I delete the app from the simulator, it is NOT prompting me if I want to delete the GameCenter data as well, like production apps usually do. Is this normal? Do I need to do anything specific to create this prompt? Or will it simply appear in the production version and is not available for some reason in the Sandbox?

# delphi - Prepare exe for distribution

> ID：11817924
> 
> 赞同：4
> 
> 时间：2012-08-05T16:08:06.990
> 
> 标签：delphi

May I ask for some guidance please ?

```
Development machine – Windows 7  64bit
IDE – Delphi 7 pro (with 7.1 update)
Target machine for install – Windows XP (SP3) – NB this is the Win 7 Virtual Machine 
```

I have built a small application, nothing more than a test app. A grid, a TADOConnection connected to an MS accdb file and a few TADOTables. Using Inno Setup I have also built an installer. I promise, it’s a very simple app.

When I install the ‘application’ on the XP virtual machine, everything goes according to plan, ie no error message and the installer completes. However, the application will not start. On the same XP VM, I have D7 installed and, here’s where it get’s weird, if the IDE is running, my application will launch without issue. If I close the IDE, it, my application, will fail to start again.

All I get is an hourglass for a second or two, and that’s it … no error message, no horrible MS dialog asking me if I want to send them info about this dreadful application, in fact I get no feedback whatsoever.

NB - Whether run from the IDE, or outside of the IDE, on the Win 7 machine, the application runs just fine.

I’m obviously missing something quite obvious, but I’m lost. I have even tried ….

```
program Project1;
uses
  Dialogs,
  Forms,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.res}
begin
  Application.Initialize;
  ShowMessage('Starting');
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

But I do not get to see the ShowMessage dialog.

I have read the many ‘Hello World’ tutorials. Gleaned a great deal of knowledge from generous SO contributers (thank you). But there must be another tutorial that teaches me what to do in order to ‘prepare’ my application for inclusion in an installer. I thought that if I unchecked the ‘Build with runtime packages’ in Project Options and then did Project > Project Build, I could build a file with everything I needed to run the application outside of the IDE.

May I ask if anyone could point me to the last piece of the jigsaw, please ?

Incidentally, is there a way to debug an executable outside of the IDE ? Perhaps some switch within Delphi that would produce a log file when the application starts … or tries to.

Thanks for your time ?

Regards, John.

**EDIT** - I mentioned earlier that the file will run outside of the IDE on my W7 machine. I got this wrong ... it won't run unless D7 is up and running too. Also, I made a copy of the original folder with this file in and started messing with the Project Options switches. Suddenly, the new file is twice the size and runs OK. Problem ... I can't replicate whatever I changed on the original file / Project to know for certain what I have done is the cause / fix.

**Edit 2** - OK - the issue definately has something to do with the different file sizes. I have created a folder on the XP volume and dropped a copy of all of my BPLs from the Output directory in Win 7 Delphi install. Dropped my exe (the file that will NOT run outside of the IDE) in there, and also my accdb file too. Double click and ... Hey Presto - it runs. the grid displays my sample data ... beautiful.

Here's the thing ... Project > Options > Packages > Build with Runtime Packages is UNchecked. This should build me a LARGE exe file - (is that correct) but it builds a relatively small exe that needs the BPL's !!!!

Will do some more testing ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:03:21.390

您可能已在 ide 中连接了您的 tconnection。

这让您可以看到 IDE 中真实数据的情况，但是现在当您运行您的应用程序时，它会尝试在开始时立即连接，而当时可能还没有正确设置所有内容。

一种可能的解决方案：断开连接组件，并在稍后阶段连接，例如通过“连接”按钮。

至少正确处理这样的异常会更容易。

# php - Implementing fancybox onclick()

> ID：11817927
> 
> 赞同：0
> 
> 时间：2012-08-05T16:08:48.520
> 
> 标签：php, javascript, fancybox

```
<?php
   echo '<td class="options-width">'.
        '<a href="edituser_lightbox.php?user_id=' . $row['user_id'] . ' " onclick:"  $.fancybox({ href:'example.jpg',title : 'Custom Title'});"title="Edit" class="icon-1 info-tooltip" </a>'.
        '<a href="deleteuser.php?user_id=' . $row['user_id'] . ' " class="icon-2 info-tooltip">   </a>'.
        '<a href="" title="Save" class="icon-5 info-tooltip">     </a>'.
        '</td>';

   echo "</tr>";
  }
?> 
```

I have to atleast be close here guys? Can you see what im trying to do? I can't change my css to include fancybox either :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:11:59.617

看起来像一个错字：

```
onclick:" 
```

使冒号成为等号：

```
onclick=" 
```

此外，通过添加引号确保对象的属性值将是字符串。

```
onclick='$.fancybox({href: "'example.jpg'", title: "'Custom Title'"});' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:12:44.600

该`onclick`属性应使用 指定`=`，而不是`:`如下所示：

```
echo '<a href="edituser_lightbox.php?user_id=' . $row['user_id'] . '" onclick="$.fancybox({ href:\'example.jpg\',title : \'Custom Title\'});" title="Edit" class="icon-1 info-tooltip" </a>'; 
```

在 fancybox 语句中，您还需要对单引号进行反斜杠转义，以便它们`'`在输出 HTML 中显示为文字。`"`在`href=`属性关闭之前，您还有一个额外的空间。

将 JavaScript 内联放置在标记内并不是一种好的做法。相反，最好将它绑定为：

```
$("a#editLink").click(function() {
   $.fancybox({ href:'example.jpg',title : 'Custom Title'});
}); 
```

请注意，您需要将 添加`id="editLink"`到`<a>`标签中。（它可以是任何 id 或各种其他 jQuery 选择器，而不是`id`.

```
echo '<a id="editLink" href="edituser_lightbox.php?user_id=' . $row['user_id'] . '" onclick="$.fancybox({ href:\'example.jpg\',title : \'Custom Title\'});" title="Edit" class="icon-1 info-tooltip" </a>'; 
```

# c# - 如何调用 T 类型的方法，将 T 作为字符串或“T”传递

> ID：11817928
> 
> 赞同：1
> 
> 时间：2012-08-05T16:08:50.870
> 
> 标签：c#

我有这样的东西

```
public void FunctionName<T>(){

} 
```

并称之为你需要这样的东西

```
sub main(){
    FunctionName<Integer>();
} 
```

我的问题是我可以将整数作为“整数”传递吗？

```
sub main(){
    FunctionName<"Integer">();
} 
```

或者还有其他方法吗

好的，这是我的实际代码

```
private static T Convert<T>(DataRow row) where T : new()
{
    T model = new T();
    Type modelType = model.GetType();
    FieldInfo[] fields = null;
    FieldInfo field = default(FieldInfo);
    Type fieldType = null;
    string fieldName = null;

    fields = modelType.GetFields(BindingFlags.Public | BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Static);

    foreach ( field in fields) {
        fieldType = field.FieldType;
        fieldName = field.Name.Replace("_", string.Empty);
        Interaction.CallByName(model, fieldName, Microsoft.VisualBasic.CallType.Set, GetValue(row, fieldName, fieldType.Name));
    }

    return model;
}

static void main(){
    Student s;

    s = Convert<Student>(DatabaseRow);
} 
```

这里的问题是我只能从将使用此代码的某个地方将 Student 作为字符串（“Student”）获取任何其他解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T16:15:31.530

在没有看到更多代码的情况下，很难确定您是否有一个合法的用例来调用这样的方法。但无论如何，假设`FunctionName`包含在 class 中`Foo`，那么您可以使用反射调用该方法：

```
var foo = new Foo();
var typeName = "System.Int32";
var method = typeof(Foo).GetMethod("FunctionName");
var genericMethod = method.MakeGenericMethod(Type.GetType(typeName));
genericMethod.Invoke(foo, new Type[0]); 
```

请注意，我们不能使用`Integer`，因为这不是真正的类型名称。（它在 C# 中`int`或者`Int32`在 C# 中，但只有在编译器中被烘焙后才`Int32`合法）此外，关于通过 apply here 获取类型的所有常见警告（在很多情况下它不会找到您的自定义类型）。`GetType``int``Type.GetType`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T16:10:21.700

不，你不能那样做。仅当类型在编译时已知时，才应使用泛型。这就是泛型的全部意义：强制编译时安全。如果在编译时不知道类型，就像您的情况一样，您可以使用反射或其他一些技术，具体取决于您要实现的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:17:44.733

除了达林的回答：如果函数不是为指定的类型编译的（仅仅是因为它从未明确地为此类型调用），则代码根本不可用。

# android - Android relativeLayout在模拟中与父级不匹配，但在图形视图中

> ID：11817929
> 
> 赞同：0
> 
> 时间：2012-08-05T16:08:52.160
> 
> 标签：android, xml

我在 Android 中的 XML 遇到问题。在图形布局视图中，它看起来正是我想要的样子，但是当我在 10.1" 屏幕上运行模拟时，它在宽度上与父级匹配，但在高度上不匹配。当我在 10.1" 平板电脑上运行模拟时，它与父级都不匹配宽度或高度。这是我的代码，

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:fillViewport="true">
  <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content" android:background="#fff">

        <!--  Header  Starts-->
        <LinearLayout android:id="@+id/header"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@layout/header_gradient"
                android:paddingTop="5dip"
                android:paddingBottom="5dip">
                <!-- Logo Start-->
                <ImageView android:src="@drawable/logo"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="10dip"/>
                <!-- Logo Ends -->
        </LinearLayout>
        <!--  Header Ends --> 
        <!-- Footer Start -->
        <LinearLayout android:id="@+id/footer"
                android:layout_width="match_parent"
                android:layout_height="90dip"
                android:background="@layout/footer_repeat"
                android:layout_alignParentBottom="true">
        </LinearLayout>
        <!-- Footer Ends --> 

        <!-- Registration Form -->
        <LinearLayout
          xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:padding="10dip"
          android:layout_below="@id/header">
          <!-- Full Name Label -->
          <TextView android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="#372c24"
                android:text="Full Name"/>
          <EditText android:id="@+id/reg_fullname" 
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dip"
                android:singleLine="true"
                android:layout_marginBottom="20dip"/>
          <!--  Email Label -->
          <TextView android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="#372c24"
                android:text="Email"/>
          <EditText android:id="@+id/reg_email" 
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dip"
                android:singleLine="true"
                android:layout_marginBottom="20dip"/>
          <!-- Password Label -->
          <TextView android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="#372c24"
                android:text="Password"/>
          <EditText android:id="@+id/reg_password" 
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:password="true"
                android:singleLine="true"
                android:layout_marginTop="5dip"/>
          <!-- Register Button -->      
          <Button android:id="@+id/btnRegister" 
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dip"
                android:text="Register New Account"/>
          <!-- Link to Login Screen -->
          <TextView android:id="@+id/link_to_login" 
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="40dip"
                android:layout_marginBottom="40dip"
                android:text="Have an account? Login here"
                android:gravity="center"
                android:textSize="20dip"
                android:textColor="#025f7c"/>

        </LinearLayout>
        <!-- Registration Form Ends -->

  </RelativeLayout>
</ScrollView> 
```

这就是它在图形布局中的显示方式，也是我想要的样子，

![在此处输入图像描述](../Images/2547fadf7fb01d195c5b4e6206d4d40b.png)

这是它在 android 虚拟机 3.2 模拟上的样子，

![在此处输入图像描述](../Images/aa98bf2a4a1721839d7a972b3d7f2a93.png)

最后，这就是它在我的三星 Galaxy 10.1" 平板电脑上的样子，

![在此处输入图像描述](../Images/d489127387debf8203eccb7aadae1554.png)

谁能看到我哪里出错了？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:21:13.370

只需添加 `android:largeScreens="true"`和`android:xlargeScreens="true"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:12:53.827

似乎活动正在调用错误的布局.xml！

检查您的登录活动是否设置了正确的视图。

```
setContentView(R.layout.thelayoutyouareusing); 
```

此外，您可能将错误的活动设置为应用程序启动时启动的登录（第一个）活动。您是否检查了您的清单文件：

```
<activity android:name=".YourFirstActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

第一个活动是带有代码意图过滤器部分的活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T12:20:37.777

如果没有任何效果，则将具有较大值的 minWidth 属性赋予最顶层的父布局标记，例如

```
 android:minWidth="1400dp" 
```

它对我很有效，即使对于小屏幕布局也没有造成任何问题

# python - python itertools 组合扩展性

> ID：11817931
> 
> 赞同：1
> 
> 时间：2012-08-05T16:09:14.537
> 
> 标签：python, combinations, itertools

我设法修改了我在互联网上找到的示例代码，以从一个文件夹中找到一组文件的所有可能组合，成对 2。

如果我有一个包含以下文件的文件夹*test ：* *file1、file2、file3、file4*并运行以下代码：

```
import os, itertools, glob
folder = "test"

files = glob.glob(folder + "/*")
counter = 0
for file1, file2 in itertools.combinations(files, 2):
  counter = counter + 1
  output = file1 + " and " + file2
  print output, counter 
```

我的输出是这样的：

```
test/file1 and test/file2 1
test/file1 and test/file3 2
test/file1 and test/file4 3
test/file2 and test/file3 4
test/file2 and test/file4 5
test/file3 and test/file4 6 
```

这非常适合列出所有可能的 2 个文件组而不重复。现在，由于我对*for*循环进行了硬编码，因此在将其扩展到“x”文件组时遇到问题，但要保持代码简单。IE，我希望用户选择“x”，这样如果他选择 3，脚本将显示以下输出：

```
test/file1 and test/file2 and test/file3 1
test/file1 and test/file2 and test/file4 2
test/file1 and test/file3 and test/file4 3
test/file2 and test/file3 and test/file4 4 
```

整个想法并不是在标准输出上实际显示输出，而是将它们用作子进程调用中的参数。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T16:13:58.923

```
x=3

for combination in itertools.combinations(files, x):
  counter = counter + 1
  output = " and ".join(combination)
  print output, counter 
```

命令行参数可以用`sys.argv`

# wordpress - 将 git 与 PHPFog Wordpress 应用程序一起使用

> ID：11817934
> 
> 赞同：1
> 
> 时间：2012-08-05T16:09:19.673
> 
> 标签：wordpress, git, phpfog

我已将我的 PHPFog Wordpress 应用程序的副本克隆到我的本地计算机。然后，我有一些主题正在使用自己的独立存储库进行处理。所以我将一个主题复制并粘贴到我的 Wordpress 存储库中，然后将其与 PHPFog 同步备份。

这一切都很好。

但是，如果我在管理面板中更新我的 Wordpress 应用程序，然后同步我所做的一些更改，我会丢失更新，并返回到我开始使用的 Wordpress 版本。

如果您在 Wordpress 管理面板上所做的每项更改都被本地计算机的每次同步覆盖，您应该如何正确使用 git 和 PHPFOG。

我是否应该更新 Wordpress，然后再进行一次克隆，以便在进行新更改之前在我的本地计算机上拥有正确的版本，如果是这种情况，如何将更新的 Wordpress 应用程序克隆到我的本地计算机。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T19:38:32.260

您的权利，文件系统更改，由 Wordpress 管理员进行，不会添加到您的 PHP Fog 存储库中，并且可能会在下一次推送时被吹走。

处理此问题的更好方法是在您的开发系统上本地运行您的 Wordpress 安装，就像您暗示的那样。我使用[mamp](http://www.mamp.info/en/index.html) for mac 或[wamp](http://www.wampserver.com/en/)或[xampp](http://www.apachefriends.org/en/xampp.html) for windows 在本地的 Wordpress 管理员中进行更改，然后签入并推送这些更改。这将使您在不影响生产站点的情况下查看更改的结果。我认为花费时间进行设置是非常值得的。

要让它运行，您应该安装 mamp 或 wamp 并安装 wordpress 的新副本，以确保 mysql 在本地运行并且 wordpress 安装能够连接。然后在一个新文件夹中克隆一个新的 repo 副本并将其加载到浏览器中。url 类似于 localhost:8888。它应该找不到数据库，但这是预期的。您需要配置本地环境变量（如下所列）以指向本地运行的 mysql 服务器。在全新安装的 wp-config.php 文件中查找数据库设置。不要使用克隆仓库的 wp-config.php 设置。您不想对 wp-config.php 文件进行更改，因为这些更改将被检入到 repo 中，并且会在推送后破坏您的生产站点。

```
MYSQL_DB_HOST 
MYSQL_DB_NAME
MYSQL_USERNAME
MYSQL_PASSWORD 
```

这是一个很好的链接，更详细地解释了这个过程：http: [//docs.phpfog.com/getting-started/development](http://docs.phpfog.com/getting-started/development)

# python - 更改 matplotlib 底图中的边框

> ID：11817940
> 
> 赞同：0
> 
> 时间：2012-08-05T16:10:06.503
> 
> 标签：python, matplotlib, gis, edit, matplotlib-basemap

我想永久更改 Basemap 中国家/地区的政治边界。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:16:01.133

没有聪明的方法可以做到这一点。您可以修改`mpl_toolkits/basemap/data`文件夹中的数据。海岸线来自 GSHHS 数据集，因此请将`gshhs*`文件替换为其他`gshhs`格式的数据。如果您的数据不是`gshhs`格式，那么这将是一项艰巨的任务，但您可以在[底图](http://en.wikipedia.org/wiki/Monkey_patch)上修改该`drawcoastlines`方法。

祝你好运！

# apache - 从 l.domain.com/TARGETID 重定向到 domain.com/redirect?target=TARGETID

> ID：11817944
> 
> 赞同：1
> 
> 时间：2012-08-05T16:10:23.387
> 
> 标签：apache, .htaccess, subdomain

无法弄清楚这个的 .htaccess 代码：/

如果使用子域“l”，它应该像标题中提到的那样重定向

同样在浏览器中，url 仍应显示为 l.domain.com/TARGETID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:17:31.933

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^l\.domain\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/redirect
RewriteRule ^(.*)$ /redirect?target=$1 [L,QSA] 
```

# python - Getting the time remaining before event.wait is done in Python

> ID：11817945
> 
> 赞同：0
> 
> 时间：2012-08-05T16:10:33.433
> 
> 标签：python, multithreading, timer, timeout

I'm writing a Python script in which i have a thread running that calculates some values and creates a graph every hour. What I would like to do is have a function in that thread that tells me how much time there is remaining before the next update happens. My current implementation is as follows:

```
class StatsUpdater(threading.Thread):

    def __init__(self, updateTime):
        threading.Thread.__init__(self)
        self.event = threading.Event()
        self.updateTime = updateTime

    def run(self):
        while not self.event.is_set():
            self.updateStats()
            self.event.wait(self.updateTime)

    def updateStats(self):
        print "Updating Stats"
        tables = SQLInterface.listTables()

        for table in tables:
            PlotTools.createAndSave(table)

    def stop(self):
        self.event.set() 
```

So what i would like is adding another function in that class that gives me back the time remaining gefore self.event.wait(self.updateTime) times out, something like this:

```
def getTimeout(self):
    return self.event.timeRemaining() 
```

Is this possible somehow?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:33:39.133

好吧，我对我的问题有个妥协。我在 StatsUpdater.run 中实现了一个变量：

```
self.lastUpdateTime = int(time.time()) 
```

在我执行更新功能之前。

现在，当我调用 getTimeout() 时，我会：

```
def getTimeout(self):
    timePassed = int(time.time() - self.lastUpdateTime
    return self.updateTime - timePassed 
```

这样，我没有运行计算密集型线程并且每秒计算一小部分，但我仍然可以很好地指示下一次更新的时间，因为更新之间的时间量也是已知的；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:49:47.007

不支持直接获取剩余时间，但您可以睡几次并跟踪剩余时间。

```
def __init__(self, updateTime):
    threading.Thread.__init__(self)
    self.event = threading.Event()
    self.updateTime = updateTime
    self.wait_time=None

def run(self):
    while not self.event.is_set():
        self.updateStats()
        try:
            self.wait_time=self.updateTime
            inttime=int(self.updateTime)
            remaining=inttime-self.updateTime
            self.event.wait(remaining)
            for t in reversed(range(inttime)): 
                self.wait_time=t+1
                self.event.wait(1)
        finally:
            self.wait_time=0 
```

然后使用

```
def getTimeout(self):
    return self.wait_time 
```

# python - nose test + class iterator = strange behavior

> ID：11817946
> 
> 赞同：0
> 
> 时间：2012-08-05T16:10:46.900
> 
> 标签：python, unit-testing, list, iterator, nose

I'm creating class which behaves like list(), but you can add strings to it and these strings will be splitted by spaces on words and these words will be added to the class instance. Same with substraction: substraction removes words from class instance (if any).

I faced with strange behavior in nose tests: behavior changes when I'm simply changing order of assertions.

Here is test:

```
from nose.tools import *

def test_isub_str(self):
    u = params()

    u += "1 2 3 4"
    u -= "2 3"

    ok_("1" in u, u)
    ok_("2" not in u, u)
    ok_("3" not in u, u)
    ok_("4" in u, u) 
```

This test fails with following output:

```
Traceback (most recent call last):
  File "tests.py", line 71, in test_isub_str
    ok_("4" in u, u)
    assert expr, msg
AssertionError: 1 4 
```

Strange, the "u" is dumped as "1 4", but "4" wasn't found in "u" during assertion testing. And the most interesting happens when I change the order of assertions to following:

```
ok_("1" in u, u)
ok_("4" in u, u)
ok_("2" not in u, u)
ok_("3" not in u, u) 
```

Then tests are passing OK and this is correct, expected behavior. It looks like "not in" statement changes behavior of following "in" statements. I'm surprized.

Finally, here is my class:

```
class params():
    def __init__(self):
        self.index = 0 # iterator index
        self.values = [] # list of stored values

    def __iadd__(self, addvalues):
        if isinstance(addvalues, str):
            addvalues = addvalues.split(" ")
        # add all values to this instance if they are list() or params()
        # and not exist in current instance
        if isinstance(addvalues, params) or isinstance(addvalues, list):
            for value in addvalues:
                if isinstance(value, str) and value not in self.values:
                    self.values.append(value)
                else:
                    raise TypeError
            return self
        else:
            raise TypeError

    def __isub__(self, subvalues):
        if isinstance(subvalues, str):
            subvalues = subvalues.split(" ")
        # substract all values from this instance if they are list() or params()
        # and existing in current instance
        if isinstance(subvalues, params) or isinstance(subvalues, list):
            for value in subvalues:
                if isinstance(value, str) and value in self.values:
                    self.values.remove(value)
                else:
                    raise TypeError
            return self
        else:
            raise TypeError

    def __iter__(self):
        return self

    def next(self):
        if self.index >= len(self.values):
            raise StopIteration
        else:
            self.index += 1
            return self.values[self.index - 1]

    def __str__(self):
        return " ".join(self.values) 
```

So question is: why such strange behavior happens? I missed something in iterator functionality? Or this nosetests bug?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:32:39.510

不，这不是鼻子测试错误，我认为当你这样做时

```
ok_("1" in u, u) 
```

u.index 为 1，当你这样做时：

```
ok_("2" not in u, u)
ok_("3" not in u, u) 
```

u.index 是 2。当你这样做时

```
ok_("4" in u, u) 
```

u.index 仍然是 2，并且您的“下一个”方法会引发 StopIteration，因为 2 >= len(self.values)。

在您的第二种情况下，当您执行以下操作时 u.index 仍然为 1：

```
ok_("4" in u, u) 
```

# image - control increase or decrease contrast MATLAB

> ID：11817948
> 
> 赞同：1
> 
> 时间：2012-08-05T16:10:57.127
> 
> 标签：image, matlab, image-processing

How to know when i should increase or decrease contrast in image? for example some images need to decrease and some need to increase. so how can i control that in matlab? Could studying histogram help me ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:52:35.517

也许使用[imadjust](http://www.mathworks.com/help/toolbox/images/ref/imadjust.html)是您正在寻找的。

# python - 生成器表达式以最大递归深度失败

> ID：11817949
> 
> 赞同：1
> 
> 时间：2012-08-05T16:11:02.103
> 
> 标签：python, recursion, generator, python-2.x

考虑以下代码片段（注意我使用的是全局，因为非本地关键字在 Python 2.7 中不可用）

```
def foo(L,K):
    global count
    count = 0
    def bar(f,L):
        global count
        for  e in L:
            if e - f == K or f - e == K: count += 1
            yield e
    try:
        while True:
            L = bar(L.next(),L)
    except StopIteration:
        return count
count=0
print foo((int(e) for e in some_string.split()),some_number) 
```

在哪里

```
some_string: A space delimited integers
some_number: An integer 
```

什么时候`len(some_string) = 4000`，上面的代码失败并出现错误

```
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

是因为内部嵌套的生成器是作为递归实现的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T16:18:37.643

您正在用`L`的结果替换 ，`bar`它本身就是一个生成器。因此，您最终以递归嵌套生成器表达式的形式传`bar`回`bar`。

这种构造最终通过了递归深度限制。

# php - What is data serialization?

> ID：11817950
> 
> 赞同：54
> 
> 时间：2012-08-05T16:11:03.633
> 
> 标签：php, javascript, serialization, definition

First of all, I couldn't get clear definition of it from [WikiPedia](http://en.wikipedia.org/wiki/Serialization) or even from [serialize](http://php.net/manual/en/function.serialize.php) function in the `PHP` manual. I need to know some cases where we need the term serialization and how things are going without it? In other words, Where you need serialization and without it your code will be missing some important feature.

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-08-05T16:28:53.653

**什么是序列化？**

序列化将对象编码为另一种格式。
例如，您在 PHP 中有一个这样的数组：

```
$array = array("a" => 1, "b" => 2, "c" => array("a" => 1, "b" => 2)); 
```

然后您想将其存储在文件中或发送到其他应用程序。

有几种格式选择，但想法是一样的：数组必须被编码（或者你可以说“翻译”）成文本或字节，可以写入文件或通过网络发送。
例如，在 PHP 中，如果您：

```
$data = serialize($array); 
```

你会得到这个：

```
a:3:{s:1:"a";i:1;s:1:"b";i:2;s:1:"c";a:2:{s:1:"a";i:1;s:1:"b";i:2;}} 
```

这是 PHP 理解的 PHP 特定的序列化格式，反之亦然，因此您可以使用它来反序列化对象。
例如，您将一个序列化的数组存储在一个文件中，并希望它作为数组返回到您的代码中：

```
$array = unserialize($data); 
```

但您可以选择不同的序列化格式，例如 JSON：

```
$json = json_encode($array); 
```

会给你这个：

```
{"a":1,"b":2,"c":{"a":1,"b":2}} 
```

结果不仅易于保存、人眼读取或通过网络发送，而且几乎所有其他语言（JavaScript、Java、C#、C++ ......）也可以理解

**结论**
序列化将对象转换为另一种格式，以防您想要存储或共享数据。

**有没有什么情况，你不能做任何事情，只能序列化它？**

不，但是序列化通常会使事情变得更容易。

**JSON 和 PHP 格式是唯一可能的格式吗？**
不，不，不，还有一次不。有很多格式。

*   具有 SOAP、WSDL 等后继者的 XML（具有特定目的）
*   字节、Protobuf 等
*   yaml
*   ...
*   ...
*   您自己的格式（您可以创建自己的序列化格式并使用它，但大多数时候这是一件大事而且不值得）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-05T16:17:34.617

序列化是将一些内存对象转换为另一种格式的过程，该格式可用于存储在文件中或通过网络发送。反序列化是逆过程，这意味着实际的对象实例是从给定的对象序列化表示中恢复的。这在各种系统之间进行通信时非常有用。

序列化格式可以是可**互操作**的或**不可互操作的**。可互操作的格式（例如 JSON、XML 等）允许使用给定平台序列化某些对象并使用不同平台反序列化它。例如，使用 JSON，您可以使用 javascript 序列化对象并通过网络将其发送到 PHP 脚本，该脚本将反序列化对象并使用它。

[`serialize()`](http://php.net/manual/en/function.serialize.php)PHP 函数使用不可互操作的格式。这意味着只有 PHP 可以用来序列化和反序列化对象。

您可以使用[`json_encode`](http://php.net/manual/en/function.json-encode.php)和[`json_decode()`](http://php.net/manual/en/function.json-decode.php)函数以使用 JSON 可互操作格式序列化/反序列化 PHP 对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-05T16:24:38.057

序列化是将数据（例如变量）转换为字符串等表示的过程，可以轻松地从例如文件或数据库中写入和读取。

用例？有很多，但通常它围绕着将复杂的嵌套数组或对象转换为可以保存并稍后读取以检索相同结构的简单字符串的想法。例如，假设您在 php 中有：

```
$blub = array();
$blub['a'] = 1;
$blub['a']['b'] = 4;
$blub['b'] = 27;
$blub['b']['b'] = 46; 
```

与其单独遍历每个数组成员并编写它，不如只：

```
$dataString = serialize($blub); 
```

序列化的数组已经准备好作为一个简单的字符串写入任何地方，这样再次检索这个字符串并对其执行 unserialize() 可以获得与之前完全相同的数组结构。是的，就是这么简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-05T16:35:21.770

> 我需要知道一些我们需要术语序列化的情况以及没有它的情况如何？

如果您需要存储仅在特定时间点有效的完整结构（例如包含所有相关数据（如客户地址、发件人地址、产品位置、税收计算等）的发票），序列化会变得很方便。

所有这些数据都将在未来发生变化，新的税收法规可能会出台，客户地址会发生变化，产品会过时。但是发票仍然需要有效并存储。

这可以通过序列化来实现。像快照一样。内存中的对象被序列化为可以存储的（通常类似于 PHP）二进制形式。它可以在以后（并在不同的环境中）恢复使用。就像这个发票示例：十年后，数据仍然可以读取，并且发票对象与十年前相同。

> 换句话说，如果您必须需要序列化，而没有它，您的代码将缺少一些重要功能。

那是一个例子。并不是你总是需要它，但如果事情变得更复杂，序列化可能会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-05T16:13:31.633

由于您已将其标记为`javascript`，因此一种序列化可能是表单序列化。

以下是[jQuery](http://api.jquery.com/serialize/)和[prototype.JS](http://www.prototypejs.org/api/form/serialize)等价物的参考资料。

他们基本上所做的是**将表单输入值序列化为逗号分隔的名称-值对**。

所以考虑实际使用..

```
$.ajax({
   url : 'insert.php?a=10,b=15' //values serialized via .serialize()
   type: 'GET'
}); 
```

你可能会`$GET["a"]`检索这些值，不过我不熟悉 PHP。

# matlab - convert first.obj to first.exe

> ID：11817951
> 
> 赞同：0
> 
> 时间：2012-08-05T16:11:09.253
> 
> 标签：matlab

please I would like you to answer me about that error when I compiled my C program(VC++ 2008) Thank you very, I would appreciate any help .. Note :my program is to perform cosimulation between OPNET modeler 14.5 and MATLAB by using external cosimulation controller C program ....

this is output error in VC++ 2008 command prompt

`first.c Microsoft (R) Incremental Linker Version 9.00.30729.01 Copyright (C) Microsoft Corporation. All rights reserved.

/out:first.exe first.obj $first.obj : error LNK2019: unresolved external symbol _*imp*_Esa_Interface_Value_Set $referenced in function _main $first.obj : error LNK2019: unresolved external symbol _*imp*_Esa_Interface_Value $_Get referenced in function _main $first.obj : error LNK2019: unresolved external symbol _*imp*_Esa_Execute_Until r $eferenced in function _main $first.obj : error LNK2019: unresolved external symbol _*imp*_Esa_Interface_Callb $ack_Register referenced in function _main $first.obj : error LNK2019: unresolved external symbol _*imp*_Esa_Interface_Group $_Get referenced in function _main $first.obj : error LNK2019: unresolved external symbol _*imp*_Esa_Load referenced $ in function _main $first.obj : error LNK2019: unresolved external symbol _*imp*_Esa_Init referenced $ in function _main $first.obj : error LNK2019: unresolved external symbol _*imp*_Esa_Main referenced $ in function _main $first.exe : fatal error LNK1120: 8 unresolved externals`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:52:07.527

我想您最好使用 OPNET 提供的命令行工具（例如 makesim），而不是 Visual Studio。由于您的 cosim 依赖于 OPNET 头文件和库，因此最好使用 OPNET 工具链进行编译和链接。

# android - ViewPager：定义片段是否在片段本身内被选中/可见

> ID：11817960
> 
> 赞同：1
> 
> 时间：2012-08-05T16:12:16.463
> 
> 标签：android

有没有一种方法可以定义 ViewPager 的片段是否可见、活动 - 用户看到的片段 - 在片段本身内部？

我需要特别在片段可见时运行我的代码（它在片段本身内部） - 而不仅仅是相邻。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:17:05.010

设置片段在特定时刻的状态。

Resumed：
片段在正在运行的活动中可见。

Paused：
另一个activity在前台并且有焦点，但是这个fragment所在的activity仍然是可见的（前台activity是部分透明的或者没有覆盖整个屏幕）。

已停止：
片段不可见。主机活动已停止，或者片段已从活动中删除但已添加到后台堆栈。已停止的片段仍然存在（系统保留所有状态和成员信息）。但是，它不再对用户可见，并且如果该活动被终止，它将被终止。

引用自：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# ruby - 在 Ruby 中拆分数组上的集合中剥离

> ID：11817961
> 
> 赞同：0
> 
> 时间：2012-08-05T16:12:17.867
> 
> 标签：ruby

以下代码：

```
str = "1, hello,2"
puts str
arr = str.split(",")
puts arr.inspect
arr.collect { |x| x.strip! }
puts arr.inspect 
```

产生以下结果：

```
1, hello,2
["1", " hello", "2"]
["1", "hello", "2"] 
```

这正如预期的那样。以下代码：

```
str = "1, hello,2"
puts str
arr = (str.split(",")).collect { |x| x.strip! }
puts arr.inspect 
```

但是会产生以下输出：

```
1, hello,2
[nil, "hello", nil] 
```

为什么我得到这些“零”？为什么我不能立即在拆分数组上执行 .collect？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:18:09.000

该[**`#collect`**](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-collect)方法将返回每个块调用返回的值的数组。在您的第一个示例中，您正在修改实际的数组内容`#strip!`并使用这些内容，而忽略`#collect`.

在第二种情况下，您使用`#collect`结果。您的问题是，它[**`#strip!`**](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip-21)要么返回一个字符串，要么返回一个字符串`nil`，这取决于它的结果——特别是，`nil`如果字符串没有被修改，它将返回。

因此，使用[**`#strip`**](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip)（不带感叹号）：

```
1.9.3-p194 :005 > (str.split(",")).collect { |x| x.strip }
 => ["1", "hello", "2"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:18:14.127

因为如果字符串未更改，则`#strip!`返回。`nil`

在您的早期示例中，您没有使用`#collect,`仅使用`#strip!`. 在这种情况下使用`#each`会使非功能性命令式循环更加清晰。通常仅在使用生成的新数组时才使用`#map`/ 。`#collect`

你最后的方法看起来不错，你写了一个功能图，但你把 in 留下了`#strip!`......只需取出`!`.

# r - R中的garchFit（）在所有拟合值中返回相同的数字

> ID：11817967
> 
> 赞同：1
> 
> 时间：2012-08-05T16:13:19.433
> 
> 标签：r, statistics

我曾尝试在 R 中使用 garchFit 并发现一些非常奇怪的东西，似乎所有的拟合都是一样的。我尝试使用 R 页面中的示例并发现相同的结果。

如果您打开 R 并键入以下内容：

```
library(fGarch);
## UNIVARIATE TIME SERIES INPUT:
# In the univariate case the lhs formula has not to be specified ...
# A numeric Vector from default GARCH(1,1) - fix the seed:
N = 200
x.vec = as.vector(garchSim(garchSpec(rseed = 1985), n = N)[,1])
garchFit(~ garch(1,1), data = x.vec, trace = FALSE)
# An univariate timeSeries object with dummy dates:
x.timeSeries = dummyDailySeries(matrix(x.vec), units = "GARCH11")
gfit = garchFit(~ garch(1,1), data = x.timeSeries, trace = FALSE) 
```

然后进行以下健全性检查似乎表明残差计算正确：

```
gfit@residuals == (x.vec - gfit@fitted) 
```

但是，如果您检查 gfit@fitted 的内容，您会发现所有值都是相同的！所以基本上 garchFit 函数找到了一条水平线？

这个例子是预期的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T16:41:37.883

GARCH 对序列的方差进行建模，因此我们不会期望拟合值（序列均值的估计值）发生变化，因为您所做的只是为方差指定模型。

这意味着您拟合的模型中的平均值有一个 ARMA(0,0)：

```
R> gfit = garchFit(~ garch(1,1), data = x.timeSeries, trace = TRUE)

Series Initialization:
 ARMA Model:                arma
 Formula Mean:              ~ arma(0, 0)
 GARCH Model:               garch
 Formula Variance:          ~ garch(1, 1) 
```

如果您使用均值和方差模型拟合该系列，则拟合值**确实**会有所不同：

```
R> gfit2 = garchFit(~ arma(1,1) + garch(1,1), data = x.timeSeries, trace = FALSE)
R> head(gfit2@fitted)
   1970-01-01    1970-01-02    1970-01-03    1970-01-04    1970-01-05 
-0.0010093158 -0.0004840687 -0.0002678956 -0.0006093776 -0.0003781936 
   1970-01-06 
 0.0004521798 
```

# symfony - 使用 Symfony+Doctrine 的环境特定数据夹具

> ID：11817971
> 
> 赞同：20
> 
> 时间：2012-08-05T16:13:32.547
> 
> 标签：symfony, doctrine-orm

使用 Smyfony2 和 Doctrin2，可以使用以下示例创建数据夹具：http: [//symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html](http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html)

我想要的是能够使用这个概念进行测试，以便 setup/teardown 可以为功能测试创建一个纯测试数据环境。如何在功能测试期间运行一组特定的仅测试夹具，以及如何将这些夹具与标准夹具分开，以便控制台命令忽略它们？

似乎这样做的方法是复制教义的功能：fixtures 控制台命令并将测试夹具存储在其他地方。有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-01-16T18:14:38.913

按目录拆分fixture 的另一种方法是使用自定义fixture 类。然后，您的夹具类将扩展此类并指定实际加载它的环境。

```
<?php

use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\HttpKernel\KernelInterface;

/**
 * Provides support for environment specific fixtures.
 *
 * This container aware, abstract data fixture is used to only allow loading in
 * specific environments. The environments the data fixture will be loaded in is
 * determined by the list of environment names returned by `getEnvironments()`.
 *
 * > The fixture will still be shown as having been loaded by the Doctrine
 * > command, `doctrine:fixtures:load`, despite not having been actually
 * > loaded.
 *
 * @author Kevin Herrera <kevin@herrera.io>
 */
abstract class AbstractDataFixture implements ContainerAwareInterface, FixtureInterface
{
    /**
     * The dependency injection container.
     *
     * @var ContainerInterface
     */
    protected $container;

    /**
     * {@inheritDoc}
     */
    public function load(ObjectManager $manager)
    {
        /** @var KernelInterface $kernel */
        $kernel = $this->container->get('kernel');

        if (in_array($kernel->getEnvironment(), $this->getEnvironments())) {
            $this->doLoad($manager);
        }
    }

    /**
     * {@inheritDoc}
     */
    public function setContainer(ContainerInterface $container = null)
    {
        $this->container = $container;
    }

    /**
     * Performs the actual fixtures loading.
     *
     * @see \Doctrine\Common\DataFixtures\FixtureInterface::load()
     *
     * @param ObjectManager $manager The object manager.
     */
    abstract protected function doLoad(ObjectManager $manager);

    /**
     * Returns the environments the fixtures may be loaded in.
     *
     * @return array The name of the environments.
     */
    abstract protected function getEnvironments();
} 
```

您的固定装置最终看起来像这样：

```
<?php

namespace Vendor\Bundle\ExampleBundle\DataFixtures\ORM;

use AbstractDataFixture;
use Doctrine\Common\Persistence\ObjectManager;

/**
 * Loads data only on "prod".
 */
class ExampleData extends AbstractDataFixture
{
    /**
     * @override
     */
    protected function doLoad(ObjectManager $manager)
    {
        // ... snip ...
    }

    /**
     * @override
     */
    protected function getEnvironments()
    {
        return array('prod');
    }
} 
```

我相信这应该适用于 ORM 和 ODM 数据夹具。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-05T17:50:01.667

最简单的方法是将您的灯具放入不同的文件夹，然后使用`php app/console doctrine:fixtures:load --fixtures=../src/Acme/TestBundle/DataFixtures/ORM/test`命令加载它们。固定装置选项必须指向应用文件夹的相对路径！

然后，您可以根据需要将数据拆分为初始数据、测试数据等，或者创建开发、测试、暂存、产品固定装置。

如果你想把它们混合起来，我不知道有什么比我做的更好的解决方案：我创建了一个“模板”文件夹，所有灯具都驻留在其中。在我的 dev 文件夹中，我创建了一个类，它扩展了正确的灯具类模板并调整需要调整的内容（如覆盖`getOrder`方法）。这并不完美，我想有人可以考虑扩展 fixtures:load 命令以采用多条路径，但它对我有用。

# linux - 如何使用 Babeltrace-log

> ID：11817972
> 
> 赞同：0
> 
> 时间：2012-08-05T16:13:39.053
> 
> 标签：linux, kernel, babeltrace

我想将一个 txt 日志文件传输到通用跟踪格式 (CTF) 文件中。我发现lttng的Babeltrace工具可以在文本格式和CTF格式之间传输文件。但我不知道该怎么做。命令 babeltrace-log 可以将 txt 文件转成 CTF 文件，格式如下：

***babeltrace-log [OPTIONS] 输出，只有 1 个选项 -t(timestamp)。*** (http://manpages.ubuntu.com/manpages/precise/man1/babeltrace-log.1.html)

我不知道如何为 babeltrace 提供输入以传输文件。

你能帮我并给我一些提示吗？网上资料很少。

非常感谢，

艾洛瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:23:26.603

正如手册页和 babeltrace --help 中所写：

“将文本日志（从标准输入读取）转换为 CTF。”

典型的用途是将一个命令的结果通过管道（使用标准输入）传输到 babeltrace-log 中：

dmesg | babeltrace-log -t 输出文件.txt

# solr - 例外：找不到类 SolrCoreAware

> ID：11817973
> 
> 赞同：6
> 
> 时间：2012-08-05T16:13:46.040
> 
> 标签：solr

当我在 solrconfig.xml 中添加此配置时：

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
      <str name="config">data-config.xml</str>
    </lst>
</requestHandler> 
```

然后启动tomcat，我得到了这个异常：

```
ClassNotFoundException: org.apache.solr.util.plugin.SolrCoreAware 
```

我检查了目录

```
<lib dir="../../dist/" regex="apache-solr-dataimporthandler-\d.*\.jar" /> 
```

jar 导入了，有什么问题？lib节点目录属性是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-07T10:36:34.343

将OP的评论转换为（a）更容易发现并且（b）对我有用的答案：

注意不要`solr-dataimporthandler-x.y.z.jar`放入

```
Tomcat\lib                                <-  Doesn't work! 
```

相反，请确保将其放置在：

```
Tomcat\webapps\solr\WEB-INF\lib           <-  Works. 
```

# c++ - 为matlab编译s函数

> ID：11817974
> 
> 赞同：3
> 
> 时间：2012-08-05T16:13:53.873
> 
> 标签：c++, matlab

我一直在尝试用我的 c++ 代码在 matlab 中制作一个 s-function 块。我正在使用以下 mexopts.bat 文件

> @echo 关闭
> 
> 设置 MATLAB=%MATLAB%
> 
> 设置 PATH=%PATH%;c:\cygwin\bin
> 
> 设置 MW_TARGET_ARCH=win64
> 
> 设置编译器=x86_64-w64-mingw32-g++
> 
> 设置 COMPFLAGS=-c -fexceptions "-I%MATLAB%\extern\include"
> 
> 设置 OPTIMFLAGS=-O3
> 
> 设置 DEBUGFLAGS=-g -Wall
> 
> 设置 NAME_OBJECT=-o
> 
> 设置 PRELINK_CMDS1=echo EXPORTS > mex.def & echo mexFunction >> mex.def
> 
> 设置 LIBLOC="%MATLAB%\bin\win64"
> 
> 设置 LINKER=x86_64-w64-mingw32-g++
> 
> 设置 LINKFLAGS= -static-libgcc -shared mex.def -L%LIBLOC% -static-libstdc++
> 
> 设置 LINKFLAGSPOST= -lmex -lmx -lmwlapack -lmwblas -lstdc++
> 
> 设置 LINKOPTIMFLAGS=-O3
> 
> 设置 LINKDEBUGFLAGS= -g -Wall
> 
> 设置 LINK_FILE=
> 
> 设置 LINK_LIB=
> 
> 设置 NAME_OUTPUT=-o "%OUTDIR%%MEX_NAME%%MEX_EXT%"
> 
> 设置 RSP_FILE_INDICATOR=
> 
> 设置 POSTLINK_CMDS1=del mex.def

我能够使用“mex”函数从 matlab 成功编译示例 mexfunction 文件，但是当我尝试编译 s-function（我使用 matlab 获取示例文件）时，我得到以下错误

```
C:\Program Files\MATLAB\R2012a\simulink\include/simstruc.h:357:3: error: #error Must define one of RT, NRT, MATLAB_MEX_FILE, SL_INTERNAL, or FIPXT_SHARED_MODULE

C:\Program Files\MATLAB\R2012a\simulink\include/simstruc.h:467:78: fatal error: rt_matrx.h: No such file or directory
compilation terminated. 
```

我确定 c++ 文件是正确的，因为我从 matlab 示例中获取它们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:01:03.437

所有 S-Function 都需要定义以下预处理器符号。

```
MATLAB_MEX_FILE
S_FUNCTION_LEVEL=2
S_FUNCTION_NAME=<your-sfun-name> 
```

使用指令将它们添加到`COMPFLAGS`批处理文件中。`-D`

# c++ - 从程序运行 vssadmin

> ID：11817980
> 
> 赞同：0
> 
> 时间：2012-08-05T16:14:51.953
> 
> 标签：c++, volume-shadow-service, writers

我正在尝试从 c++ 程序运行以下命令：

```
system("vssadmin list writers > tmp.txt "); 
```

我得到这个输出：

```
 "vssadmin 1.1 - Volume Shadow Copy Service administrative command-line tool (C) Copyright 2001-2005 Microsoft Corp.

Error: A Volume Shadow Copy Service component encountered an unexpected error. Check the Application event log for more information. 
```

在事件日志中有 2 个错误：22 和 8193。

如果我直接从命令行运行它，它工作正常。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:39:43.997

问题是我在 64 位机器上运行 32 位应用程序，因此 windows 将应用程序重定向到错误的 vssadmin。

[http://msdn.microsoft.com/en-us/library/aa384187](http://msdn.microsoft.com/en-us/library/aa384187)

[http://msdn.microsoft.com/en-us/library/aa365743](http://msdn.microsoft.com/en-us/library/aa365743)

# wpf - 项目之间的模板

> ID：11817981
> 
> 赞同：2
> 
> 时间：2012-08-05T16:14:56.867
> 
> 标签：wpf, xaml

我有一个项目集合，并希望将其显示`ListView`为逗号分隔值列表。如何在值之间显示逗号？

到目前为止，我已经创建了`ItemsPanelTemplate`一个`<VirtualizingStackPanel IsItemsHost="True" Orientation="Horizontal"/>`独生子女。

显然，创建一个`DataTemplate`包含逗号的会导致一个尾逗号，我不想要一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:47:07.280

使用这个转换器...

公共类 StringListConverter : IValueConverter { public StringListConverter() { Separator = CultureInfo.CurrentCulture.TextInfo.ListSeparator + " "; }

```
 public string Separator { get; set; }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string result = "";
        if (value is IList<string> && targetType.IsAssignableFrom(typeof(string)))
        {
            result = string.Join(Separator, (value as IList<string>).ToArray());
        }
        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在资源中的 XAML 中：

```
<rw:StringListConverter x:Key="StringListConverter"/> 
```

然后

```
<TextBlock Text="{Binding ItemList, Converter={StaticResource StringListConverter}}"/> 
```

# php - Jquery附加具有唯一PHP编号的文本框

> ID：11817985
> 
> 赞同：0
> 
> 时间：2012-08-05T16:15:28.450
> 
> 标签：php, jquery

我有一个网站，当用户单击按钮时，它会将文本框附加到 div。文本框效果很好。现在，我想为`id`每个盒子生成一个唯一的数字。下面的代码给了我 0 作为`id`每个盒子的。我试图让他们去 1,2,3,4...

代码：

```
<?php $x=0; ?> 

$("#add").click(function(){
    $('#boxes').append(<input type="text" id="<?php echo $x; $x++; ?>">);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:26:19.840

PHP 代码在执行 javascript 代码之前更早地执行。但是在您的代码示例中，您尝试同时执行两者。事实并非如此。

您需要使用 javascript 变量而不是 PHP 变量：

```
var x = 0;
$("#add").click(function() {
    $('#boxes').append('<input type="text" id="' + ++x + '">');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:21:47.003

您可以使用 PHP 变量作为您的 javascript 变量的基础，也可以只使用普通的 javascript。

```
//note, $x can be anything e.g. 1
var boxID = '<?php echo $x; ?>'; 

$("#add").click(function(){
    //insert new box, increase boxID
    $('#boxes').append('<input type="text" id="'+boxID+'">');
    boxID++;
}); 
```

# iphone - 使用 NSPredicate 过滤 NSArray/NSDictionary

> ID：11817986
> 
> 赞同：1
> 
> 时间：2012-08-05T16:15:29.840
> 
> 标签：iphone, objective-c, ios, nsarray, nspredicate

我一直在尝试使用 NSPredicate 过滤这个数组（充满了 NSDictionaries）......

我有非常少量的代码无法正常工作......

以下代码应将 label.text 更改为 AmyBurnett34，但它不会...

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"id = %@", [[mightyPlistDict objectForKey:@"pushesArr"] objectAtIndex:indexPath.row]];

    NSLog(@"%@",pred);

    label.text = [[[twitterInfo filteredArrayUsingPredicate:pred] lastObject] objectForKey:@"screen_name"];
    NSLog(@"%@",twitterInfo); 
```

这就是得到 NSLoged 的​​内容......

```
2012-08-05 11:39:45.929 VideoPush[1711:707] id == "101323790"
2012-08-05 11:39:45.931 VideoPush[1711:707] (
        {
        id = 101323790;
        "screen_name" = AmyBurnett34;
    },
        {
        id = 25073877;
        "screen_name" = realDonaldTrump;
    },
        {
        id = 159462573;
        "screen_name" = ecomagination;
    },
        {
        id = 285234969;
        "screen_name" = "UCB_Properties";
    },
        {
        id = 14315150;
        "screen_name" = MichaelHyatt;
    }
) 
```

如果你也 NSLog 这只是为了提醒......数组是空的......

```
NSLog(%@,[twitterInfo filteredArrayUsingPredicate:pred]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:25:23.390

问题是您的谓词使用与字符串进行比较，而您的内容使用数字。尝试这个：

```
NSNumber *idNumber = [NSNumber numberWithLongLong:[[[mightyPlistDict objectForKey:@"pushesArr"] objectAtIndex:indexPath.row] longLongValue]];
NSPredicate *pred = [NSPredicate predicateWithFormat:@"id = %@", idNumber]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:31:43.837

你不确定“id”的值是一个字符串——它可能是一个 NSNumber。我建议：

```
NSUInteger matchIdx = ...;
NSUInteger idx = [array indexOfObjectPassingTest:^BOOL(NSDictionary *dict, NSUInteger idx, BOOL *stop)
{
  id obj = [dict objectForKey:@"id"];
  // NSLog the class if curious using NSStringFromClass[obj class];
  NSUInteger testIdx = [obj integerValue]; // works on strings and numbers
  return testIdx == matchIdx;
}
if(idx == NSNotFound) // handle error

NSString *screenName = [[array objectAtIndex:idx] objectForKey:@"screen_name"]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-05T16:22:06.030

NSPredicate 用于*过滤*数组，而不是对它们进行*排序*。要对数组进行排序，请使用`sortedArrayUsingDescriptors`NSArray 的方法。

一个例子：

```
// Define a sort descriptor based on last name.
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"lastName" ascending:YES];    

// Sort our array with the descriptor.
NSArray *sortedArray = [originalArray sortedArrayUsingDescriptors:[NSArray arrayWithObjects:descriptor, nil]]; 
```

# ajax - 数据表中的复选框按钮

> ID：11817988
> 
> 赞同：0
> 
> 时间：2012-08-05T16:15:43.503
> 
> 标签：ajax, jsf, jsf-2, primefaces

我在数据表中有复选框列，我想要一些 ajax 代码，当我单击标题上的复选框按钮时，应该检查数据表的呈现数据行中的所有复选框。我正在使用 primefaces，他们为此提供了一些现成的东西，但我们不想实现它。请让我知道是否有使用 ajax 的简单解决方案。

到目前为止，我们已经编写了如下代码，但我们可以做得更好。

```
<p:dataTable id="userListTable" value="#{Bean.List}"
                    var="user" rowClasses="odd even"

                    <p:column style="width:18px">
                        <f:facet name="header">
                            <p:selectBooleanCheckbox
                                valueChangeListener="#{Controller.toggleCheckBox}"
                                partialSubmit="true" immediate="true" />

                        </f:facet>
                        <p:selectBooleanCheckbox value="#{user.disable}"
                            disabled="#{user.disable}"
                            valueChangeListener="#{circleController.enableDisableOkbutton}"
                            partialSubmit="true" immediate="true" />

                    </p:column>

                    <p:column>

                        <f:facet name="header">
                            <h:outputText value="#{labels['circle.userList.name']}" />
                        </f:facet>
                        <p:panelGrid styleClass="noBorders">
                            <p:row>
                                <p:column rowspan="3" style="width:60px;">
                                    <p:graphicImage
                                        value="#{name}.jpg"
                                        style="width:50px;height:50px" />
                                </p:column>
                                <p:column>

                                    <h:outputText value="  " />
                                    <h:outputText value="#{user.firstName}" />
                                    <h:outputText value="  " />
                                    <h:outputText value="#{user.lastName}" />

                                </p:column>
                            </p:row>
                            <p:row>
                                <h:outputText value="#{user.country}" />
                            </p:row>

                        </p:panelGrid>
                    </p:column>

                </p:dataTable> 
```

# c++ - 带有 printf 的 C++ 奇怪输出

> ID：11817992
> 
> 赞同：2
> 
> 时间：2012-08-05T16:16:36.827
> 
> 标签：c++, c

以下是我的功能，它假设列出了我尝试使用 << 固定但似乎没有帮助的一些国家

这是我的输出：

```
�ѿra
�ѿd Arab Emirates
�ѿnistan
�ѿua and Barbuda
�ѿlla
�ѿia
�ѿia
�ѿrlands Antilles
�ѿa
�ѿctica
�ѿtina
�ѿcan Samoa 
```

我的文本文件没问题，我想知道我的数据转换是否有问题。

这是我的 CountryData.cpp 文件

```
#include <iostream>
#include <string.h>
#include "CountryData.h"

using namespace std;
// ====================================================================

void readData ()
{
    FILE * pFile;
    NoOfRecordsRead = 0;
    char buffer [Line_Char_Buffer_Size];

    pFile = fopen (INPUT_FILE_NAME , "r");

    if (pFile == NULL) 
        perror ("Error opening file 'Countries.txt' !");
    else
    {
        while ( !feof (pFile) )
        {
            char* aLine = get_line (buffer, Line_Char_Buffer_Size, pFile);

            if (aLine != NULL)
            {
//              printf ("%d] aLine => %s\n", NoOfRecordsRead, aLine);
                globalCountryDataArray [NoOfRecordsRead++] = createCountryRecord (aLine);
            }
        }

     fclose (pFile);

    }
}

// ====================================================================

char* get_line (char *s, size_t n, FILE *f)
{
    char *p = fgets (s, n, f);

    if (p != NULL) 
    {
        size_t last = strlen (s) - 1;
        if (s[last] == '\n') 
            s[last] = '\0';
    }
    return p;
}

// ====================================================================

CountryRecordType createCountryRecord (char* aLine)
{
    CountryRecordType ctryRec;
    char* pch = strtok (aLine, LINE_DATA_DELIMITER);

    // 1) Retrieve TLD
    strcpy (ctryRec.TLD, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 2) Retrieve Country
    strcpy (ctryRec.Country, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 3) Retrieve FIPS104
    strcpy (ctryRec.FIPS104, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 4) Retrieve ISO2
    strcpy (ctryRec.ISO2, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 5) Retrieve ISO3
    strcpy (ctryRec.ISO3, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 6) Retrieve ISONo
    ctryRec.ISONo = atof (pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 7) Retrieve Capital
    strcpy (ctryRec.Capital, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 8) Retrieve Region
    strcpy (ctryRec.Region, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 9) Retrieve Currency
    strcpy (ctryRec.Currency, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 10) Retrieve CurrencyCode
    strcpy (ctryRec.CurrencyCode, pch);
    pch = strtok (NULL, LINE_DATA_DELIMITER);

    // 11) Retrieve Population
    ctryRec.Population = atof (pch);

    return (ctryRec);

}

// ====================================================================

char* displayRecordContent (CountryRecordType ctryRec)
{
    char * output = ctryRec.Country;
    return output;

}

// ====================================================================

void showAllRecords ()
{
    int i=0;
    string stroutput;
    char * result;
    for (i=0; i<NoOfRecordsRead; i++)
    {

        result = displayRecordContent (globalCountryDataArray [i]);
        stroutput += result;
        stroutput += "\n";
    }

cout << fixed << stroutput << endl;

}

// ====================================================================

int findCountryRecord (const char* countryName)
{
    int idx     = -1;
    int found   = 0;

    while (!found && (++idx < Max_Record_Size))
        if (strcmp (globalCountryDataArray [idx].Country, countryName) == 0)
            found = 1;

    if (found)
        return (idx);
    else
        return (-1);
}

// ====================================================================

char* getCapital (const char* countryName)
{
    int idx = findCountryRecord (countryName);

    if (idx < 0)
    {
        printf ("Country '%s' not found!\n", countryName);
        return (NULL);  
    }
    else
        return (globalCountryDataArray [idx].Capital);
}

// ====================================================================

char* getCurrencyCode (const char* countryName)
{
    int idx = findCountryRecord (countryName);

    if (idx < 0)
    {
        printf ("Country '%s' not found!\n", countryName);
        return (NULL);  
    }
    else
        return (globalCountryDataArray [idx].CurrencyCode);
}

// ====================================================================

main ()
{
    readData ();
    showAllRecords ();

} 
```

这是我的 CountryData.h 文件

```
#ifndef COUNTRY_DATA_H
#define COUNTRY_DATA_H

// ====================================================================

#include <stdlib.h>
#include <stdio.h>
#include <string.h>

using namespace std;
// ====================================================================

#define TLD_LEN             2
#define COUNTRY_LEN         100
#define FIPS104_LEN         2
#define ISO2_LEN            2
#define ISO3_LEN            3
#define CAPITAL_LEN         100
#define REGION_LEN          100
#define CURRENCY_LEN        50
#define CURRENCY_CODE_LEN   3

#define No_Of_Rec_Fields        11
#define Max_Record_Size         250
#define Line_Char_Buffer_Size   400

#define LINE_DATA_DELIMITER     ","
#define INPUT_FILE_NAME         "Countries.txt"

// ====================================================================

//const char*   LINE_DATA_DELIMITER     = ",";
//const char*   INPUT_FILE_NAME         = "Countries.txt";

typedef struct CountryRecord
{
    char TLD            [TLD_LEN+1];            // Top Level Domain code
    char Country        [COUNTRY_LEN+1];    
    char FIPS104        [FIPS104_LEN+1];        // Ctry code according to FIPS104 standard
    char ISO2           [ISO2_LEN+1];           // Ctry code according to ISO2    standard
    char ISO3           [ISO3_LEN+1];           // Ctry code according to ISO3    standard
    double ISONo;

    char Capital        [CAPITAL_LEN+1];    
    char Region         [REGION_LEN+1];         // E.g. Asia, Europe, etc.
    char Currency       [CURRENCY_LEN+1];       // Full name of currency
    char CurrencyCode   [CURRENCY_CODE_LEN+1];  // Currency abbreviation
    double Population;

}   CountryRecordType;

int NoOfRecordsRead;
CountryRecordType globalCountryDataArray [Max_Record_Size];

// ====================================================================

void readData ();
char* get_line (char *s, size_t n, FILE *f);
CountryRecordType createCountryRecord (char* aLine);
char* displayRecordContent (CountryRecordType ctryRec);
void showAllRecords ();

int findCountryRecord (const char* countryName);
char* getCapital (const char* countryName);
char* getCurrencyCode (const char* countryName);

// ====================================================================

#endif // COUNTRY_DATA_H 
```

这是我的 countries.txt 文件的一部分

```
AD,Andorra,AN,AD,AND,20.00,Andorra la Vella,Europe,Euro,EUR,67627.00
AE,United Arab Emirates,AE,AE,ARE,784.00,Abu Dhabi,Middle East,UAE Dirham,AED,2407460.00
AF,Afghanistan,AF,AF,AFG,4.00,Kabul,Asia,Afghani,AFA,26813057.00
AG,Antigua and Barbuda,AC,AG,ATG,28.00,Saint John's,Central America and the Caribbean,East Caribbean Dollar,XCD,66970.00
AI,Anguilla,AV,AI,AIA,660.00,The Valley,Central America and the Caribbean,East Caribbean Dollar,XCD,12132.00
AL,Albania,AL,AL,ALB,8.00,Tirana,Europe,Lek,ALL,3510484.00
AM,Armenia,AM,AM,ARM,51.00,Yerevan,Commonwealth of Independent States,Armenian Dram,AMD,3336100.00
AN,Netherlands Antilles,NT,AN,ANT,530.00,Willemstad,Central America and the Caribbean,Netherlands Antillean guilder,ANG,212226.00
AO,Angola,AO,AO,AGO,24.00,Luanda,Africa,Kwanza,AOA,10366031.00
AQ,Antarctica,AY,AQ,ATA,10.00,--,Antarctic Region, , ,0.00
AR,Argentina,AR,AR,ARG,32.00,Buenos Aires,South America,Argentine Peso,ARS,37384816.00
AS,American Samoa,AQ,AS,ASM,16.00,Pago Pago,Oceania,US Dollar,USD,67084.00
AT,Austria,AU,AT,AUT,40.00,Vienna,Europe,Euro,EUR,8150835.00
AU,Australia,AS,AU,AUS,36.00,Canberra,Oceania,Australian dollar,AUD,19357594.00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T16:28:17.420

由于您将`CountryRecordType`值传递给`displayRecordContent`，因此您返回的指针无效，并且使用它会导致未定义的行为。这是因为您正在返回一个指针，该指针指向在函数调用期间创建的副本所保存的内容，该副本在函数返回时被破坏。

修改您的`displayRecordContent`函数以改用按引用传递。

```
const char* displayRecordContent (const CountryRecordType &ctryRec)
{
    const char * output = ctryRec.Country;
    return output;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:18:56.337

我会从头开始重写代码，尝试实际使用 C++ 而不是 C，并混入一些 C++。

```
#include <vector>
#include <string>
#include <iostream>
#include <iterator>
#include <fstream>

struct CountryRecord { 
    std::string TLD;
    std::string Country;
    std::string FIPS104;
    std::string ISO2;
    std::string ISO3;
    double ISONo;
    std::string Capital;
    std::string Region;
    std::string Currency;
    std::string CurrencyCode;
    double Population;
};

template <class T>
std::istream &get_field(std::istream &is, T &field) {
    is >> field;
    is.ignore(1);
    return is;
}

template<>
std::istream &get_field<std::string>(std::istream &is, std::string &field) {
    return std::getline(is, field, ',');
}

std::istream &operator>>(std::istream &is, CountryRecord &r) { 
    get_field(is, r.TLD);
    get_field(is, r.Country);
    get_field(is, r.FIPS104);
    get_field(is, r.ISO2);
    get_field(is, r.ISO3);
    get_field(is, r.ISONo);
    get_field(is, r.Capital);
    get_field(is, r.Region);
    get_field(is, r.Currency);
    get_field(is, r.CurrencyCode);
    return get_field(is, r.Population);
}

std::ostream &operator<<(std::ostream &os, CountryRecord const &r) { 
    return os << r.Country;
}

int main() { 
    std::ifstream in("countries.txt");
    std::vector<CountryRecord> countries(
        (std::istream_iterator<CountryRecord>(in)),
        std::istream_iterator<CountryRecord>());

    std::copy(countries.begin(), countries.end(), 
              std::ostream_iterator<CountryRecord>(std::cout, "\n"));

    return 0;
} 
```

# c++ - 错误：在 PATH 中找不到程序“make”

> ID：11817994
> 
> 赞同：2
> 
> 时间：2012-08-05T16:16:51.913
> 
> 标签：c++, eclipse, window, eclipse-cdt

我在 Eclipse CDT（使用 Windows 7）中有以下错误。如何纠正它？

> 错误：在 PATH=[C:\cygwin\bin;C:/Program Files/Java/jre1.6.0/bin/client;C:/Program Files/Java/jre1.6.0/bin; 中找不到程序“make”； C:/Program Files/Java/jre1.6.0/lib/i386;C:\Program Files\WinRAR;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\ System32\WindowsPowerShell\v1.0\;C:\cygwin\bin\;C:\Users\user\AppData\Local\Temp\Rar$EX00.502\eclipse]

Path 环境变量有以下内容

> C:\cygwin\bin\

重击 ![在此处输入图像描述](../Images/787d3eb1c90fdfecfdecf0951fa19725.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:49:42.663

您应该在 cygwin 中安装 make 包。为此，请执行 cygwin setup.exe，当软件包窗口打开时，搜索 make 并安装它。我想这会解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:19:18.923

您缺少`make`用于处理 Makefile 以构建程序的内容。

在我看来，这似乎与 superuser.com 更相关，[这](https://superuser.com/questions/154418/where-do-i-get-make-for-cygwin)是一个类似的问题。

# opengl-es - GLKit 的 GLKMatrix4 类在 MonoTouch 中不可用

> ID：11817998
> 
> 赞同：1
> 
> 时间：2012-08-05T16:17:24.517
> 
> 标签：opengl-es, xamarin.ios, opengl-es-2.0, glkit

据我了解，我们应该能够`GLKit`在我们的 MonoTouch 应用程序中使用（请参阅[http://docs.xamarin.com/ios/releases/MonoTouch_5/MonoTouch_5.3](http://docs.xamarin.com/ios/releases/MonoTouch_5/MonoTouch_5.3)）。

不幸的是，我在 MonoTouch 库中找不到`GLKit`'类。`GLKMatrix4`

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:22:10.960

找到它，它被命名`Matrix4`并且它存在于`OpenTK-1.0.dll`程序集中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:46:56.750

以下示例均使用 GLKit：

[https://github.com/xamarin/monotouch-samples/tree/monotouch-5.4/GLCameraRipple](https://github.com/xamarin/monotouch-samples/tree/monotouch-5.4/GLCameraRipple)

[https://github.com/xamarin/monotouch-samples/tree/monotouch-5.4/RosyWriter](https://github.com/xamarin/monotouch-samples/tree/monotouch-5.4/RosyWriter)

它们都需要 MonoTouch 5.3.xx（截至 2012 年 8 月 6 日，即 Beta 版）。

# node.js - 如何在 node.js 中使非 IO 操作同步与异步？

> ID：11817999
> 
> 赞同：1
> 
> 时间：2012-08-05T16:17:24.250
> 
> 标签：node.js, asynchronous, nonblocking

我知道这个标题听起来像是对其他十几个问题的欺骗，而且很可能是这样。然而，我已经阅读了这十几个问题，并在谷歌上搜索了一段时间，并没有找到任何让我满意的答案。

这可能是因为没有人正确回答，在这种情况下你应该投票给我。

这可能是因为我很愚蠢并且不理解其他答案（更有可能），在这种情况下你应该投票给我。

**语境：**

我知道 Node.js 中的 IO 操作被检测到并默认异步运行。我的问题是关于仍然可能长时间阻塞/运行的非 IO 操作。

假设我有一个`blockingfunction`带有`for`循环的函数，它可以执行加法或诸如此类的操作（纯 CPU 周期，没有 IO），还有很多。运行需要一分钟或更长时间。

假设每当有人向我的服务器发出特定请求时，我希望此功能运行。

**问题：**

显然，如果我在代码的外层显式调用这个循环，那么一切都会阻塞，直到它完成。

我读过的大多数建议都建议通过首先启动我所有的其他处理程序/服务器等，然后通过延迟调用函数来将其推迟到未来`process.nextTick`or `setTimeout(blockingfunction, 0)`。

*   但是不会`blockingfunction1`在执行循环的下一个旋转中阻塞吗？我可能错了，但似乎这样做会在不阻塞应用程序的情况下启动我的所有其他东西，但是当有人第一次发出导致`blockingfunction`被调用的请求时，只要完成，一切都会阻塞。

*   放入`blockingfunction`a `setTimeout`or `process.nextTick`call 是否以某种方式使其与未来的操作共存而不阻塞它们？

*   如果没有，有没有办法在`blockingfunction`不重写的情况下做到这一点？

*   其他人如何处理这个问题？我看到的很多答案都是“只要相信你的 CPU 密集型的东西会很快，它们会很快”，但这并不令人满意。

*   没有线程（我可以保证执行`blockingfunction`将与其他正在发生的事情交错执行），我是否应该重新编写 CPU 密集型/耗时的循环以用于`process.nextTick`执行固定的、有保证的快速数量每滴答声的迭代次数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:36:00.837

是的，即使您运行 process.nextTick，阻塞函数也会继续阻塞。

一些选项：

1.  如果确实需要一段时间，那么也许应该将它分派到一个队列中，在那里你可以让一个专门的工作进程来处理它。

    1a。Node.js 有一个子进程风格，专门用于通过内置的通信通道来分叉其他 node.js 文件。因此，例如，您可以创建一个（或多个）线程来按顺序处理这些请求，然后响应并点击回调。请参阅：[http ://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)

2.  您可以将 blockingFunction 分解为循环运行的块。让它使用 process.nextTick 调用每 X 次迭代，以便为处理其他事件让路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T16:24:01.200

是的，你是对的。如果您将函数推迟到下一个刻度，它只会在该刻度而不是当前刻度中阻塞。

不幸的是，这里没有魔法可以为您解决这个问题。虽然可以[在另一个进程中启动该功能](http://nodejs.org/api/child_process.html)，但这可能不值得麻烦，具体取决于您在做什么。

我建议以这样的方式重写你的函数，这样工作会发生一段时间，然后在下一个滴答声中继续。节点滴答非常有效......如果需要，您可以在一个体面大小的循环的每次迭代中调用它们，而无需大量开销。当然，您必须在代码中对其进行分析以查看其影响。