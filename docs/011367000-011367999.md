# StackOverflow 问答 11367000-11367999

# asp.net - 如何在 ASP.NET 应用程序中显示 Access 2010 表单？

> ID：11367000
> 
> 赞同：1
> 
> 时间：2012-07-06T17:28:47.740
> 
> 标签：asp.net, ms-access

在 MS Access 2010 中创建脱离 Access 表的表单非常容易。我的问题是，如何在 ASP.NET Web 应用程序上显示这些表单。有没有可以轻松做到这一点的组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:48:34.053

如果您谈论 Access 2010，那么使用 A2010 创建的 Web 表单实际上是标准的 .net 表单，它们基于 zammel (XAML)。因此，这些表单不需要任何类型的转换。但是，这些 Web 表单确实需要所谓的 Access Web Services。它们甚至可以用 VS 来打开——但这在 4GL 系统的标准缺陷中非常普遍。

访问网络服务目前可从一些托管服务提供商处获得，例如 www.AccesHosting.com。您还可以将 Access Web 表单发布到 SharePoint 2010（企业版）。

最后但并非最不重要的一点是，您还可以将 Access Web 表单发布到 office 365，这是非常低成本的托管，起价为每月 6 美元。

这些 Access Web 表单的唯一真正问题是没有可以转换现有 Web 表单的转换实用程序。因此，虽然 Access 可用于创建 Web 表单并发布它们，但它们不能包含 VBA（必须使用转换为 JavaScript 的宏）。

这是这些新 Web 表单外观的视频。 [http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

请注意，在中途我如何切换到在标准 Web 浏览器中 100% 运行应用程序。所以这些网络应用程序不需要 Silverlight 甚至任何 ActiveX 下载——因为这些表单在大多数标准网络浏览器上都能正常工作——包括我的 iPad abnd 智能手机。

对于现有的 VBA 应用程序，您在此处没有任何选择。没有更多的东西可以转换 FoxPro、VB6 或基于 C++ 客户端的程序。因此，我知道从来没有任何合理的技术可以让您根据您的要求将桌面软件转换为基于 Web 的软件。因此，计算机行业的基本概念在过去 30 到 50 年中的运作方式并没有改变，并且在完全不同的系统上运行不同的软件是不可能的。

但是，如前所述，Access 2010 现在确实具有 Web 表单创建功能。

在现有 Access 应用程序的情况下，一种可能且经常使用的解决方案是使用所谓的远程桌面和终端服务。事实上，“终端服务”和远程桌面可以在网络浏览器中使用。这实际上意味着您确实通过浏览器使用 Windows 桌面。但是，这将要求用户下载 ActiveX 组件，或者在使用任何最新版本的 windows 的情况下，默认情况下会安装 windows 远程桌面客户端，并且您实际上不需要 Web 浏览器来进行此设置。

# python - 在 Django 视图中向对象添加列表

> ID：11367005
> 
> 赞同：0
> 
> 时间：2012-07-06T17:29:13.987
> 
> 标签：python, django, views

我已经搜索并通过互联网阅读试图找出这个问题。感谢您对此问题的任何建议。

我在 Django 中将对象列表添加到另一个对象时遇到问题。我有一个对象*'category'*和一个对象列表*'subcategory'*，但是当我尝试将它们作为一个包*'ad'*放在一起时，有一个`TypeError: 'subcategory' is an invalid keyword argument for this function`.

这是视图：

```
def create_in_category(request, slug):
   category = get_object_or_404(Category, slug=slug)
   subcategory = SubCategory.objects.all()

   ad = Ad.objects.create(category=category, subcategory=subcategory, user=request.user,
                       expires_on=datetime.datetime.now(), active=False)
   ad.save() 
```

能够将所有这些元素组合在一起，我缺少什么？非常感谢您分享您的知识。

* * *

编辑：添加模型。

```
class Category(models.Model):
   name = models.CharField(max_length=200)
   slug = models.SlugField()

   def __unicode__(self):
       return self.name + u' Category'

class SubCategory(models.Model):
   name = models.CharField(max_length=50, unique=True)
   category = models.ManyToManyField(Category)

   def __unicode__(self):
       return self.name + u' SubCategory' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:08:01.563

我不肯定你在做什么或为什么，但只是把我的 2 美分投入：

如果您要使用层次结构进行分类（除非有不同的东西（除了层次结构中的位置），也许您应该使用类似[https://github.com/django-mptt/django-mptt/](https://github.com/django-mptt/django-mptt/)

```
class Category(MPTTModel) :
    """initial Category model"""
    title = models.CharField(
        verbose_name    = _(u'Title'), 
        help_text           = _(u'This category.'),
        max_length      = 255
    )
    slug = models.SlugField(
        verbose_name    = _(u'Slug'),
        help_text           = _(u'Unique identifier for this category.'),
        max_length      = 255,
        unique              = True
    )
    parent = models.ForeignKey(
        'self',
        null                            = True, 
        blank                           = True, 
        default                     = None,
        verbose_name            = _(u'Parent Category')
    )

    class MPTTMeta:
        order_insertion_by  = ['title', ]

    class Meta:
        verbose_name                = _(u'Category')
        verbose_name_plural = _(u'Categories')

    def __unicode__(self):
        return '%s' % (self.title,) 
```

那么你就可以使用 MPTT 为你提供的所有花哨的层次结构构建工具

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:53:13.017

使用我的水晶球，我可以看出`subcategory`出于某种原因这是一个多对多关系，并且您不能在实例化时将其传递（因为在创建关系之前它需要在两端保存一个实例）。首先实例化并保存`Ad`，然后添加关系`ad.subcategory.add(*subcategory)`

至于这种关系实际上是否应该是 ManyToMany 是另一个问题（子类别能够属于多个类别意味着什么？）。

# jquery - 使用jQuery滚动更新位置使元素闪烁

> ID：11367008
> 
> 赞同：0
> 
> 时间：2012-07-06T17:29:20.720
> 
> 标签：jquery, css, user-interface, scroll

我有一个侧边栏，只要用户向下滚动到它会消失的位置，我就想将它贴在右侧。我第一次尝试这样做看起来像：

```
$(window).scroll(function(){
    if($(window).scrollTop() >= 524){
    if(!$(".page #sidebar").hasClass("sticky")){
        $(".page #sidebar").addClass("sticky");
    }
    }
    else{
    if($(".page #sidebar").hasClass("sticky")){
        $(".page #sidebar").removeClass("sticky");
    }
    }
}); 
```

类*sticky*有`position: fixed`a`top`和`right`值，所以它会正确地粘在浏览器窗口中。唉，当我在测试时，我意识到了这个错误：作为屏幕右侧的侧边栏，如果我将浏览器窗口的大小调整到低于我正在使用的分辨率，当然，侧边栏会相对于浏览器窗口停留在那里。

然后，我提出了这个解决方案：将具有*绝对定位*的侧边栏放在另一个*相对定位*的容器中，然后用 javascript 计算它的位置。除了（我认为）不必要的沉重之外，这个解决方案还有效，但由于事件触发速度不够快，因此元素会*闪烁。*`.scroll`代码如下：

```
$(window).scroll(function(){
    if($(window).scrollTop() >= 524){
    if(!$(".page #sidebar").hasClass("sticky")){
        $(".page #sidebar").addClass("sticky");
    }
    else{
        $(".page #sidebar").css("top",$(window).scrollTop()-524+"px");
    }
    }
    else{
    if($(".page #sidebar").hasClass("sticky")){
        $(".page #sidebar").removeClass("sticky");
    }
    }
}); 
```

您可以在以下位置查看实时示例：[http ://www.onewayitalia.it/agenzia-di-comunicazione/web-agency-per-la-realizzazione-di-siti-e-portali-internet/](http://www.onewayitalia.it/agenzia-di-comunicazione/web-agency-per-la-realizzazione-di-siti-e-portali-internet/)

**有趣的是**，在我写作的时候，我意识到*stackoverflow*正在做我想要通过**类似问题**侧边栏完成的事情；它似乎也使用*固定*定位并且不会在调整窗口大小时中断。有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:51:20.707

您可以尝试 $.animate 而不将您的计算位置排队。这可能看起来更流畅

# jquery - Cross-domain $.ajax request is not working

> ID：11367011
> 
> 赞同：0
> 
> 时间：2012-07-06T17:29:29.330
> 
> 标签：jquery, ajax

Included below is the code that I am trying to use to display the HTML contents of another page. I am unable to get the code to work and am receiving an error each time. What am I missing here?

```
$.ajax({
    url: 'http://www.msn.com',  
    type: 'GET',
    dataType : "text/html",
    success: function (result) {
        alert('success');
        alert(result);
    },
    error: function() { 
       alert('error');
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:31:25.990

You cannot do a cross-domain AJAX request (unless the servers are specifically set up for it).

The best you can do is call a PHP script on your server, which in turn gets the HTML from the other server and sends it back to your page.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T17:32:34.890

Due to browser security restrictions, most "Ajax" requests are subject to the [same origin policy](http://en.wikipedia.org/wiki/Same_origin_policy); the request can not successfully retrieve data from a different domain, subdomain, or protocol.

Script and JSONP requests are not subject to the same origin policy restrictions.

Source: [http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T17:31:25.537

You can only make ajax requests to your own domain. Point it to your own pages and your success function will be called.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T17:31:48.473

In Chrome, open up Web Inspector (e.g. right-click, Inspect Element) and go to the Console tab, then run that code. You will then actually get to see the cross-domain scripting security error you are triggering.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T17:36:58.147

If you indeed intended to do a Cross-Domain AJAX request and you're looking to retrieve a HTML response you may want to check out [this article by James Podolosky](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/), where he discusses piping these sort of requests through YQL and provides a plugin to automate this by overriding the jQuery.ajax function, allowing you to use it as you expected here.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T17:39:45.073

If you're fine using an external API, you can use [YQL](http://ajaxian.com/archives/using-yql-as-a-proxy-for-cross-domain-ajax) (but it's not perfect).

Check this [fiddle](http://jsfiddle.net/schawaska/9vqSP/) and you'll see it working. Perhaps it's not for you, just throwing it out there.

# c# - 有没有办法绑定到 Keyboard.FocusedElement？

> ID：11367013
> 
> 赞同：5
> 
> 时间：2012-07-06T17:29:35.797
> 
> 标签：c#, .net, wpf, binding, focus

我想要一个始终绑定到当前焦点控件的属性。

我已经看到了两种获得当前集中控制的方法。

一种是使用 Keyboard.FocusedElement。第二个是遍历可视化树。

因为我想知道每次聚焦元素发生变化时，可视化树遍历似乎一直在运行大量代码。

但是 Keyboard.FocusedElement 没有实现 INotifyPropertyChanged。所以我不能只是正常绑定它。

**有没有办法让它在它发生变化时通知我？**

**（或者以其他方式让属性始终设置为当前聚焦的控件？）**

**注意：**显然我可以在每个控件上添加一个事件并让它更新一个属性。但是我有很多控制。我想避免必须为每个事件附加一个事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T17:49:08.947

您可以尝试订阅[Keyboard.GotKeyboardFocus 附加事件](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboard.gotkeyboardfocus.aspx)

> 当元素获得键盘焦点时发生。

这是一个订阅此事件 OnStartup 的示例。例如，您可以使用附加行为来执行此操作并更新您可以绑定到的附加属性。

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        EventManager.RegisterClassHandler(typeof(UIElement),
            Keyboard.GotKeyboardFocusEvent,
            new RoutedEventHandler(Keyboard_GotKeyboardFocus), true);

        base.OnStartup(e);
    }

    private void Keyboard_GotKeyboardFocus(object sender, RoutedEventArgs e)
    {
        Debug.WriteLine(e.OriginalSource);
    }
} 
```

# silverlight - 播放音频文件 mp3 时如何使 MediaElement 可见？

> ID：11367015
> 
> 赞同：1
> 
> 时间：2012-07-06T17:29:52.683
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0, mediaelement

我有 XAML 作为 ContentControl：

```
<ContentControl x:Name = "MyPlayer">      
  <StackPanel />
</ContentControl> 
```

然后我在此 ContentControl 的代码中添加 MediaElement：

```
this.myPlayer.Content = new MediaElement() {
 Source = new Uri(@"http://mysite/myfile.mp3"),
 Visibility = Visibility.Visible
}; 
```

然后当我运行应用程序时，播放器确实播放了文件，但没有视觉播放器。屏幕保持空白。

如何放置视觉播放器元素，以便用户可以暂停/停止/重播源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:02:22.263

您需要在逻辑后面创建自己的按钮和代码来播放/暂停/重播等。您可以将此作为参考：http: [//msdn.microsoft.com/en-us/library/ms748248.aspx](http://msdn.microsoft.com/en-us/library/ms748248.aspx)

或者，您可以使用 CodePlex 媒体播放器框架：[http](http://smf.codeplex.com/) ://smf.codeplex.com/ 这为媒体播放器创建了模板。

我相信如果你想看到一些东西，你还需要为 MediaElement 指定一个高度/宽度，但你希望看到一个 MP3 文件是什么？

另外，ContentControl 需要什么？为什么不将 MediaElement 放在 xaml 中？

# xcode - 在 xcode 中将按钮硬编码为 IBAction

> ID：11367018
> 
> 赞同：0
> 
> 时间：2012-07-06T17:29:56.443
> 
> 标签：xcode, button, ibaction, hardcode

当我在谷歌上搜索我的问题的标题时，我得到了另一个 stackoverflow 问题，该问题得到了回答，这真的很有帮助，并解释了我需要对按钮进行硬编码的大部分工作。问题是，当它与一个动作相关联时，它类似于......

[btnDetail setImage:[UIImage imageNamed:@"btn-detail.png"] forState:UIControlStateNormal];

我希望将按钮直接绑定到我已经创建的名为 exitMovie 的 IBAction，所以我希望做这样的事情......

[按钮 setAction: [IBAction.exitMovie] forState:UIControlStateNormal];

或类似的东西，但我没有尝试过。我该如何正确地做到这一点？

下面是我大部分使用的上述硬代码的链接。 [您可以硬编码 IBActions 和 IBOutlets，而不是在 Interface Builder 中手动拖动它们吗？](https://stackoverflow.com/questions/2544279/can-you-hard-code-ibactions-and-iboutlets-in-xcode-rather-then-drag-them-manuall)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:42:25.943

您在最后一个问题中自己找到了它：

```
[button addTarget:self 
               action:@selector(exitMovie:)
     forControlEvents:UIControlEventTouchUpInside]; 
```

# wcf - WCF 3.0 网络服务 + CRUD

> ID：11367019
> 
> 赞同：0
> 
> 时间：2012-07-06T17:29:58.877
> 
> 标签：wcf, crud, .net-3.0

我将使用 .net framework 3.0 创建 WCF Web 服务。该 Web 服务将向数据库公开 CRUD 操作，并且它将具有一些使用其他 Web 服务来提供服务的 Web 方法。我决定为 CRUD 功能创建单独的类库。我想知道此类需求的最佳实践。如何构建 Web 服务架构和类库？如何使用存储库模式并将其公开给 Web 方法？我只能使用 .NET 3.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:39:20.477

如果您只是要通过 WCF 公开数据库的 CRUD 操作，您可能只想使用[WCF 数据服务](http://msdn.microsoft.com/en-us/data/odata.aspx)（除非他们再次重命名它）。它可能会为您节省一些设置时间。

# java - 在 linux 上编译 jigsaw http 服务器的问题

> ID：11367022
> 
> 赞同：0
> 
> 时间：2012-07-06T17:30:04.860
> 
> 标签：java, makefile

我正在使用 Jigsaw http 服务器。我在 jigsaw 官方页面上下载了 zip 文件，并修改了 src 文件夹中的 java 文件。每个文件夹都有一个`Makefile`. 所以我去了主要文件夹并在终端中执行`make`命令并出现......

```
building  org.w3c
building  org.w3c.cvs
building  org.w3c.jigsaw
building  org.w3c.jigsaw.acl
building  org.w3c.jigsaw.auth
building  org.w3c.jigsaw.admin 
```

这样编译还是不编译？

```
PACKAGE="org"

JIGSAWPACKAGES = \
    w3c

PACKAGES = $(JIGSAWPACKAGES)

TOP=../..
include $(TOP)/makefiles/package.make

jigsawdoc::
    rm -rf ../../../Doc/Programmer/api/*
    javadoc -J-ms32m -J-mx64m -d ../../../Doc/Programmer/api/ \
        `make -s dumpjigsawpackages` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:32:03.880

是的，它确实编译了。检查二进制文件。

# php - 将字符串转换为 PHP 中关联数组索引的引用

> ID：11367038
> 
> 赞同：1
> 
> 时间：2012-07-06T17:31:05.580
> 
> 标签：php

我有一个这样的数组：

```
[0] => [basketball][player]
[1] => [basketball][threes][player]
[2] => [basketball][home][leaders][player]
[3] => [basketball][away][leaders][player] 
```

我想将每个元素转换为对关联数组中某个元素的引用：

```
$post['basketball']['player']
$post['basketball']['threes']['player']
etc. 
```

有没有办法自动将前者翻译成后者？如果是这样会超级方便，如果不是可能超级不方便，所以我希望有办法，但我不知道它可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:34:51.477

我会说这样的话：

*   去掉`[`开头和`]`结尾的 ( 使用`substr`)
*   用于`explode`分割字符串`][`
*   循环遍历分解的片段，将它们用作数组的键。

所以是这样的：

```
$array = ..... // the big array
$str = "[basketball][player]";
$keys = explode("][",substr($str,1,-1));
$pos = $array; // PHP does a lazy copy, so there is no performance issue here
while($key = array_shift($keys)) $pos = $pos[$key];
// $pos is now your target element 
```

# mysql - mysql - 由于索引无效而避免文件排序..？

> ID：11367040
> 
> 赞同：0
> 
> 时间：2012-07-06T17:31:14.213
> 
> 标签：mysql, query-optimization, filesort

我正在运行一个通过日期范围搜索连接多个表的查询，并试图弄清楚如何进一步优化它。

```
SELECT ACC.name AS account_name, CAMP.account_id AS account_id,CAMP.name AS campaign_name,CAMP.id AS campaign_id,ADG.id AS adgroup_id,ADG.name AS adgroup_name,KW.text AS keyword_name,
SUM(SPENT.billed_clicks) AS billed_clicks,KW.id AS keyword_id,KW.status_id AS status_id FROM account ACC, campaign CAMP,adgroup ADG,adgroup_keyword KW INNER JOIN keyword_spent SPENT
ON KW.id = SPENT.keyword_id WHERE     summary_date >= '2012-03-01' AND summary_date <= '2012-03-04' AND KW.adgroup_id = ADG.id AND ADG.campaign_id = CAMP.id AND CAMP.account_id = ACC.id
GROUP BY keyword_id 
```

对此的解释产生以下结果 -

```
+----+-------------+-------+--------+----------------------------+--------------+---------+---------------------------------+--------+----------------------------------------------+
| id | select_type | table | type   | possible_keys              | key          | key_len | ref                             | rows   | Extra                                        |
+----+-------------+-------+--------+----------------------------+--------------+---------+---------------------------------+--------+----------------------------------------------+
|  1 | SIMPLE      | SPENT | range  | summary_date               | summary_date | 3       | NULL                            | 752191 | Using where; Using temporary; Using filesort | 
|  1 | SIMPLE      | KW    | eq_ref | PRIMARY,FK1948D0E6ED3A5544 | PRIMARY      | 8       | clicksummarydb.SPENT.keyword_id |      1 |                                              | 
|  1 | SIMPLE      | ADG   | eq_ref | PRIMARY,FKBBC2083C29112FD0 | PRIMARY      | 8       | advertisedb.KW.adgroup_id       |      1 |                                              | 
|  1 | SIMPLE      | CAMP  | eq_ref | PRIMARY,FKF7A90110246F33C4 | PRIMARY      | 8       | advertisedb.ADG.campaign_id     |      1 |                                              | 
|  1 | SIMPLE      | ACC   | eq_ref | PRIMARY                    | PRIMARY      | 8       | advertisedb.CAMP.account_id     |      1 |                                              | 
+----+-------------+-------+--------+----------------------------+--------------+---------+---------------------------------+--------+----------------------------------------------+ 
```

keyword_spent 表包含超过 150 万行，这里是其上的 show create 表

```
 | keyword_spent | CREATE TABLE `keyword_spent` (
   `id` bigint(20) NOT NULL auto_increment,
   `summary_date` date NOT NULL,
   `adgroup_id` bigint(20) NOT NULL,
   `keyword_id` bigint(20) NOT NULL,
   `billed_clicks` int(11) default NULL,
   `un_billed_clicks` int(11) default NULL,
   `spent` decimal(20,5) default NULL,
   `last_click_recno` bigint(20) default NULL,
   `campaign_id` bigint(20) NOT NULL,
   `account_id` bigint(20) NOT NULL,
   `total_convs` bigint(20) unsigned default '0',
    PRIMARY KEY  (`id`),
   UNIQUE KEY `keyword_spent_uniq` (`summary_date`,`adgroup_id`,`keyword_id`),
   KEY `idx_account_id` (`account_id`),
   KEY `idx_kw_id` (`keyword_id`),
   KEY `adgroup_id` (`adgroup_id`),
   KEY `campaign_id` (`campaign_id`),
   KEY `summary_date` (`summary_date`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 | 
```

我不明白为什么当该日期范围内的记录不超过 100,000 条时，要扫描近 750,000 行。

另外，为什么要进行文件排序而不是使用索引。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:47:16.707

尝试在连接谓词中引用的所有列上建立索引：

```
CREATE INDEX keyword_spent_IX2 ON keyword_spent (keyword_id, summary_date) 
```

-或者-

```
CREATE INDEX keyword_spent_IX3 ON keyword_spent (summary_date, keyword_id) 
```

-或者-您甚至可以创建一个覆盖索引，其中包含查询中引用的所有列：

```
CREATE INDEX keyword_spent_IX4 ON keyword_spent (keyword_id, summary_date,
    billed_clicks, un_billed_clicks, spent, total_convs) 
```

* * *

文件排序操作可能是由于 GROUP BY。

我的偏好是使用`JOIN ... ON`语法而不是老式逗号，并在 WHERE 子句中混合连接谓词。

```
 FROM account ACC
  JOIN campaign CAMP ON CAMP.account_id = ACC.id
  JOIN adgroup ADG ON ADG.campaign_id = CAMP.id
  JOIN adgroup_keyword KW ON KW.adgroup_id = ADG.id
  JOIN keyword_spent SPENT ON SPENT.keyword_id = KW.id
 WHERE SPENT.summary_date >= '2012-03-01'
   AND SPENT.summary_date <= '2012-03-04'
 GROUP BY SPENT.id 
```

您仅按 SELECT 列表中的非聚合子集进行分组。大多数其他 RDBMS 都会对此抛出异常；MySQL 更自由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:52:32.397

文件排序不一定是坏的。如[Baron Schwartz 的博客文章](http://www.mysqlperformanceblog.com/2009/03/05/what-does-using-filesort-mean-in-mysql/)所示，文件排序不一定与文件有关。这只是在没有可用的有效索引时使用的快速排序。

作为如何优化的一个想法：也许所有的聚合数据都在它自己的子查询中，然后加入这些数据？我在想这样的事情（根据需要进行调整）：

```
SELECT ACC.name AS account_name,
CAMP.account_id AS account_id,
CAMP.name AS campaign_name,
CAMP.id AS campaign_id,
ADG.id AS adgroup_id,
ADG.name AS adgroup_name,
KW.text AS keyword_name,
KW.id AS keyword_id,
JOINED.billed_clicks AS billed_clicks,
JOINED.un_billed_clicks AS un_billed_clicks,
JOINED.total_clicks AS total_clicks,
JOINED.spent AS spent,
JOINED.total_convs AS total_convs
FROM account ACC
INNER JOIN campaign CAMP ON ACC.id = CAMP.account_id
INNER JOIN adgroup ADG ON CAMP.id = ADG.campaign_id
INNER JOIN adgroup_keyword KW ON ADG.id = KW.adgroup_id
INNER JOIN (SELECT
    SUM(billed_clicks) AS billed_clicks,
    SUM(un_billed_clicks) AS un_billed_clicks,
    SUM(billed_clicks) + SUM(un_billed_clicks) AS total_clicks,
    SUM(spent) AS spent,
    SUM(total_convs) AS total_convs,
    id AS keyword_id
    FROM keyword_spent
    GROUP BY keyword_id
) JOINED ON JOINED.keyword_id = KW.id 
```

希望我能正确理解这一点。此解决方案有一个好处：group by/aggregates 保持独立，您不必担心 group by-ing 其他列，这在原始示例中从未做过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:58:48.773

先尝试对 summary_date 的索引（在 where 中使用），然后是关键字 ID；并在 JOIN 内显式移动日期范围：

```
ON (SPENT.id = KW.id AND SPENT.summary_date BETWEEN ... AND ...) 
```

此外，尝试创建一个视图，为您提供 SPENT 上的聚合字段。理想情况下，优化器应该更好地理解这一点，并为您节省一些时间。

```
CREATE VIEW SPENT AS SELECT
    keyword_id,
    SUM(SPENT.billed_clicks) AS billed_clicks,
    SUM(SPENT.un_billed_clicks) AS un_billed_clicks,
    SUM(SPENT.spent) AS spent,
    SUM(SPENT.total_convs) AS total_convs
FROM keyword_spent GROUP BY keyword_id; 
```

这需要首先对keyword_id 和summary_date 进行索引，并且与VIEW 的JOIN 应该相当于100,000 行的SELECT。

# html - Twitter Bootstrap - 奇怪的参数？

> ID：11367041
> 
> 赞同：2
> 
> 时间：2012-07-06T17:31:23.510
> 
> 标签：html, css, twitter-bootstrap

我是 HTML5 和 Twitter Bootstrap 的新手，但是 - 因为我一直在查看一些预先构建的示例 - 我有几个问题......

让我们以这段代码为例（来自[Fluid Layout Example](http://twitter.github.com/bootstrap/examples/fluid.html)）：

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Project name</a>
      <div class="btn-group pull-right">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
          <i class="icon-user"></i> Username
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li><a href="#">Profile</a></li>
          <li class="divider"></li>
          <li><a href="#">Sign Out</a></li>
        </ul>
      </div>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

有人可以告诉我：

*   这些`data-toggle`和`data-target`参数有什么意义？
*   这 3 个空`icon-bar`跨度实例（或空`caret`跨度，就此而言）有什么意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:43:55.110

[文档](http://twitter.github.com/bootstrap/base-css.html#icons)解释说那些空标签会`<i></i>`创建图标。这是一个与空跨度类似的故事。它们具有与特定类名相关联的样式，这会将它们变成您可以使用的可爱的东西。如果您删除该类，它们将只是空的、无意义的元素。

该`data-toggle="dropdown"`部分涉及将该元素转换为[下拉菜单，这是一个可选的 Bootstrap javascript 插件。](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

Bootstrap 背后的想法是为您提供一大堆优雅的样式和功能，而无需自己完成所有工作。感谢[Mark Otto](http://www.markdotto.com/)和[Jacob Thornton](http://www.wordsbyf.at/)所做的出色工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:54:55.923

和`data-toggle`属性`data-target`由[JavaScript 下拉组件](http://twitter.github.com/bootstrap/javascript.html#dropdowns)使用。

该类`icon-bar`由[导航栏 CSS 组件](http://twitter.github.com/bootstrap/components.html#navbar)使用。

要学习 twitter bootstrap，在深入了解示例之前访问该站点并至少浏览每个部分是一个非常好的主意。

# javascript - 在 DOM 中为 JavaScript Web 应用程序构建多个页面

> ID：11367046
> 
> 赞同：0
> 
> 时间：2012-07-06T17:31:28.317
> 
> 标签：javascript, dom

我正在构建一个管理应用程序，用户必须在其中输入 PIN，将信息与加载的变量进行比较，然后用户继续访问为其部门指定的特定页面。从那里，他们可以产生一棵大约五页的树；都是动态的。

我应该如何管理 DOM 中的多个页面？

最初，我的想法是创建一个 HTML 树，每个部门都有一个 DIV，然后在该 HTML 树中的其他页面中创建树，在需要时使用 JavaScript 编辑动态内容。

我做了一些研究，遇到了模板引擎和使用 iframe 等解决方案。我希望这是一个结构牢固且稳定的应用程序，所以我不认为在 iframe 周围搞砸是最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:39:46.500

您应该遵循您选择的任何框架的最佳实践。我建议看一下[ember.js](http://emberjs.com/)。在 ember（和 sproutcore）中，您定义视图，可以通过模板或以编程方式声明。所以你的应用程序的每个部分都是一个视图，带有子视图。ember 的好处是：

1) 允许您的视图在模型更改时更新的绑定
2) 允许您分离关注点并处理应用程序逻辑的状态图机制
3) 灵活的视图系统
4) 允许做您想做的事情的机制，例如将视图绑定到 url...

如果我必须直接用 js 来做，我可能会开发最简单的视图系统来满足我的需求，将视图的概念从 dom 的渲染中抽象出来。没有它，我看不到任何保持代码清洁的方法。

# c# - 反应式扩展缺少方法重载

> ID：11367048
> 
> 赞同：1
> 
> 时间：2012-07-06T17:31:35.473
> 
> 标签：c#, system.reactive

我已经开始使用官方[初学者指南](http://go.microsoft.com/fwlink/?LinkId=208528)来玩弄 .NET 的 Reactive Extensions 了，但是很多方法重载对我不起作用（我参考了 System.Reactive）。我不确定这是因为指南已过时还是有其他原因（如果我缺少一些程序集，请告诉我）。这是原始代码和更改后的代码：

```
using System;
using System.Linq;
using System.Reactive.Disposables;
using System.Reactive.Linq;
using System.Windows.Forms;

namespace RxFormsSandbox
{
    class Program
    {
        static void Main(string[] arguments)
        {
            var textBox = new TextBox();
            var form = new Form { Controls = { textBox } };

            // MY CODE (WORKING)

            var mouseMoves = Observable.FromEvent<MouseEventHandler, MouseEventArgs>(
                handlerAction => (_, args) => handlerAction(args),
                handler => form.MouseMove += handler,
                handler => form.MouseMove -= handler);

            var input = Observable.FromEvent<EventHandler, EventArgs>(
                handlerAction => (_, args) => handlerAction(args),
                handler => textBox.TextChanged += handler,
                handler => textBox.TextChanged -= handler);

            var mouseMovesSubscription = mouseMoves.Select(x => x.Location.ToString()).Subscribe(Console.WriteLine);
            var inputSubscription = input.Subscribe(x => Console.WriteLine(textBox.Text)); // can I do this without directly accessing 'label' (via sender)
            // END OF MY CODE

            // ORIGINAL CODE AS PROVIDED IN THE SAMPLE

//            var mouseMoves = Observable.FromEvent<MouseEventArgs>(form, "MouseMove");
//            var input = Observable.FromEvent<MouseEventArgs>(textBox, "TextChanged");
//
//            var mouseMovesSubscription = mouseMoves.Select(x => x.EventArgs.Location.ToString()).Subscribe(Console.WriteLine);
//            var inputSubscription = input.Subscribe(x => Console.WriteLine(((TextBox)x.Sender).Text));
            // END OF ORIGINAL SAMPLE CODE

            using (new CompositeDisposable(mouseMovesSubscription, inputSubscription))
            {
                Application.Run(form);
            }
        }
    }
} 
```

前提是，方法的签名确实在版本之间发生了变化，有几件事让我对我的解决方案感到困惑，我想问一下是否有更好的方法：

1.  我重写的版本明显更长，我认为表达力较差。有没有办法让它更短（理想情况下不引入魔术字符串）？
2.  input.Subscribe(x => Console.WriteLine(textBox.Text)); 不是很好，因为它引用了外部代码。我想通过“发件人”属性以某种方式访问​​它。

我的程序集来自 NuGet，它的版本是 1.0.10621.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:48:43.143

如果你想模仿旧的方式，你可以使用这个`FromEventPattern`方法：

```
var mouseMoves = Observable.FromEventPattern<MouseEventArgs>(form, "MouseMove"); 
```

这样做的唯一缺点是您失去了使用 FromEvent 方法时获得的类型安全性。（`FromEventPattern`也有一个使用委托的重载，但它处理`EventHandler<T>`但`MouseMove`在.Net 2.0之前）

至于您的第二点，为什么“引用外部代码”是一件坏事？[闭包](https://stackoverflow.com/questions/428617/what-are-closures-in-net)是 C# 语言的重要组成部分，确实没有理由避免使用它们。实际上，在事件订阅代码中的代码中，您也在这样做（捕获表单）：

```
var mouseMoves = Observable.FromEvent<MouseEventHandler, MouseEventArgs>(
               handlerAction => (_, args) => handlerAction(args),
               handler => form.MouseMove += handler,
               handler => form.MouseMove -= handler); 
```

# api - 使用 api 更改任务的优先级标题

> ID：11367058
> 
> 赞同：3
> 
> 时间：2012-07-06T17:32:13.650
> 
> 标签：api, asana

我知道可以使用 api 创建优先级标题（任务以:) 结尾。

有人知道是否可以通过 api 为任务分配优先级标题？

谢谢，

卢多维奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T18:13:57.127

即使 API 从字面上看不支持此功能，您仍然可以使用变通方法来执行此操作。

首先，获取必须在您的任务之上的优先标题的 ID。

然后，使用任务端点上的“addProject”方法更改任务的顺序（优先级），并将其移动到所需的优先级标题之后。

curl -u api_key: [https://app.asana.com/api/1.0/tasks/task_id/addProject](https://app.asana.com/api/1.0/tasks/task_id/addProject) -d "project=project_id&insert_after=priority_heading_id"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:07:02.850

（我在 Asana 工作）

这目前不受支持 - API 尚未提供一种方法让您重新确定任务的优先级或将它们移动到特定的优先级标题下。

# android - HTC / Motorola 设备的日历活动是什么？

> ID：11367063
> 
> 赞同：0
> 
> 时间：2012-07-06T17:32:35.100
> 
> 标签：android, android-intent, android-activity, calendar

我开发了带有日历应用程序快捷方式的小部件。

我为三星设备找到了这个

*   包：com.android.calendar
*   类：com.android.calendar.LaunchActivity

HTC 和摩托罗拉日历呢？任何人都可以分享吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:13:01.177

这是我用于类似应用程序的包名和类名的列表。
虽然我不喜欢我必须硬编码的方式。我希望有一个不依赖于包名或类名的解决方法，这样我就不必为我的应用程序发送更新，每次某些制造商更改其中一个值时。

现在，给你：

```
{ "HTC Calendar", "com.htc.calendar",
"com.htc.calendar.LaunchActivity" },

{ "Standar Calendar", "com.android.calendar",
"com.android.calendar.LaunchActivity" },

{ "Froyo Nexus Calendar", "com.google.android.calendar",
"com.android.calendar.LaunchActivity" },

{ "Moto Blur Calendar", "com.motorola.blur.calendar",
"com.motorola.blur.calendar.LaunchActivity" },

{ "Samsung Galaxy S", "com.android.calendar",
"com.android.calendar.LaunchActivity" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:48:51.200

> 我开发了带有日历应用程序快捷方式的小部件

什么“日历应用程序”？仅就设备上的内容而言，可能有十几个，毫无疑问，Play Store 上还有数百个。

> 我为三星设备找到了这个

**不，您“为**” “三星设备” “想出了这个”。三星生产不止一部 Android 手机，并且不能保证任何给定的三星手机都必须为其捆绑的日历应用程序使用相同的包和/或类名称。

> HTC 和摩托罗拉日历呢？

他们也生产不止一部 Android 手机，并且无法保证来自任何制造商的任何给定手机都必须为其捆绑的日历应用程序使用相同的包和/或类名。

而且，当然，包和/或类名可能会随着任何固件更新而改变。

而且，当然，用户可能不希望使用捆绑的日历应用程序，而是希望使用他们从 Play Store 或其他地方获得的一些其他日历应用程序。

# unit-testing - 对 TFS 2010 流程工作流进行单元测试

> ID：11367064
> 
> 赞同：4
> 
> 时间：2012-07-06T17:32:35.380
> 
> 标签：unit-testing, workflow

我正在尝试将 TFS 2010 工作流加载到单元测试中。这个工作流有许多自定义工作流活动，用于自定义我们的构建过程，因为我们可以找到以前没有的功能来满足我们需要做的事情。我想尽可能地缩短测试这个定制工作流程的过程，因此是单元测试。有没有人有这方面的经验？有人知道如何在代码中手动加载 TFS 工作流吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:09:06.967

我将工作流的核心功能放到类中，在活动中使用它们并分别测试它们。

完成后，我使用[WorkFlowApplication](http://msdn.microsoft.com/en-us/library/system.activities.workflowapplication.aspx)测试工作流本身。

此外，我为团队构建本身做了一些集成测试。

一些资源可以在[这里](http://msdn.microsoft.com/en-us/magazine/dd179724.aspx)、[这里](http://wf.codeplex.com/wikipage?title=Microsoft.Activities.UnitTesting%20Overview)和[这里找到](http://www.planetgeek.ch/2010/12/06/dependency-injection-with-windows-workflow-foundation-4-introduction/)

# jquery - 创建允许用户在页面上选择图像的表单

> ID：11367065
> 
> 赞同：0
> 
> 时间：2012-07-06T17:32:46.017
> 
> 标签：jquery, html, forms, xhtml

附件是我正在尝试编码的页面的一部分的屏幕截图。我希望用户能够单击图像并记录该选择，然后将其发送给我，以便我知道他们最喜欢哪种设计。

我不希望用户输入任何内容，只需单击图像并发送表单。我将使用 jQuery 在“您选择...”部分显示用户选择，但我完全不确定如何将他们的选择记录在表单中，以便在他们按下提交后通过电子邮件发送结果按钮。

我有许多这些部分和图像供用户选择。我知道我可以简单地在每个图像下方放置一个单选按钮，但是有没有一种方法可以不使用单选按钮，只需单击图像本身就可以记录他们的选择？也许是单选按钮和图像的组合？

谢谢。![在此处输入图像描述](../Images/1f418cbdbd23193e0e339e8bbec0b97b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:38:33.343

像这样 ：

```
<img class="bamBoum" src="blabvla.jpg" alt="" title="" data-id="1" />

var prefImage = 0;
$('.bamBoum').click(function(e){
    e.preventDefault();
    prefImage = $(this).attr('data-id');

    alert(prefImage)
}); 
```

当您“提交”页面时，只需查看变量。

当然，您必须记住您的网页需要 Javascript 才能工作。您也可以使用变量填充隐藏字段，因此当您提交表单时，您可以在另一侧看到结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:39:17.997

有很多方法。您可以使用您提到的收音机，但只需隐藏它们。只要记住将可见性设置为隐藏，或绝对定位在屏幕之外；using`display: none`实际上不会将它们的值与表单一起提交，从而违背了目的。

或者，您可以使用隐藏的输入，并将选定的选项存储在其中。

或者，如果您不介意在他们选择后立即提交表单，您甚至可以使用`<input type="image">`，为每个表单赋予相同的名称，但具有唯一值。这可能不是最好的方法，但它在技术上是一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:35:49.010

您可以在提交表单之前使用选择的值填充隐藏字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:36:41.413

根据您需要支持的浏览器，这可能是使用[ol' checkbox hack](http://css-tricks.com/the-checkbox-hack/)的好地方。您将使用收音机而不是复选框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T17:38:52.717

如果您使用[`$.post()`](http://api.jquery.com/jQuery.post/)，那么您可以使用变量而不是输入字段来构建您的帖子数据。

要查找选择了哪一个，您可以通过查找哪个具有相应的选定类来执行此操作，或者在事件[`.data()`](http://api.jquery.com/jQuery.data/)期间使用存储最后一个选定的类来执行此操作。[`click()`](http://api.jquery.com/click/)

# javascript - requestAnimFrame 在 Chrome 中为 60FPS，在 FF 中为 1FPS

> ID：11367067
> 
> 赞同：1
> 
> 时间：2012-07-06T17:32:56.470
> 
> 标签：javascript, html, firefox, google-chrome, html5-canvas

我最近创建了一个画布动画，`requestAnimFrame`并且对 Chrome 中的结果非常满意，但在 FF 中，它看起来正在运行幻灯片。我不知道是什么导致了这个问题。

此外，当我将粒子数从 500 减少到 <50 时，FF 中的动画很流畅，但仍不是 60FPS。这是我的代码：

```
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    W = window.innerWidth,
    H = window.innerHeight,
    circles = [];

canvas.width = W;
canvas.height = H; 

//Random Circles creator
function create() {

    //Place the circles at the center

    this.x = W/2;
    this.y = H/2;

    //Random radius between 2 and 6
    this.radius = 2 + Math.random()*3; 

    //Random velocities
    this.vx = -10 + Math.random()*20;
    this.vy = -10 + Math.random()*20;

    //Random colors
    this.r = Math.round(Math.random())*255;
    this.g = Math.round(Math.random())*255;
    this.b = Math.round(Math.random())*255;
}

for (var i = 0; i < 500; i++) {
    circles.push(new create());
}

function draw() {

    //Fill canvas with black color
    ctx.globalCompositeOperation = "source-over";
    ctx.fillStyle = "rgba(0,0,0,0.15)";
    ctx.fillRect(0, 0, W, H);

    //Fill the canvas with circles
    for(var j = 0; j < circles.length; j++){
        var c = circles[j];

        //Create the circles
        ctx.beginPath();
        ctx.globalCompositeOperation = "lighter";
        ctx.arc(c.x, c.y, c.radius, 0, Math.PI*2, false);
        ctx.fillStyle = "rgba("+c.r+", "+c.g+", "+c.b+", 0.5)";
        ctx.fill();

        c.x += c.vx;
        c.y += c.vy;
        c.radius -= .05;

        if(c.radius < 0)
            circles[j] = new create();
    }
}

function animate() {
    requestAnimFrame(animate);
    draw();
}

animate(); 
```

这[是现场演示](http://cssdeck.com/item/preview/591/particles-explosion-with-html5-canvas)。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-28T06:42:00.683

以下是在没有参考的情况下如何工作`globalCompositeOperation`：

```
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    W = window.innerWidth,
    H = window.innerHeight,
    circles = [];

canvas.width = W;
canvas.height = H; 

//Random Circles creator
function create() {

    //Place the circles at the center

    this.x = W/2;
    this.y = H/2;

    //Random radius between 2 and 6
    this.radius = 2 + Math.random()*3; 

    //Random velocities
    this.vx = -10 + Math.random()*20;
    this.vy = -10 + Math.random()*20;

    //Random colors
    this.r = Math.round(Math.random())*255;
    this.g = Math.round(Math.random())*255;
    this.b = Math.round(Math.random())*255;
}

for (var i = 0; i < 500; i++) {
    circles.push(new create());
}

function draw() {

    //Fill canvas with black color
    ctx.fillStyle = "rgba(0,0,0,0.15)";
    ctx.fillRect(0, 0, W, H);

    //Fill the canvas with circles
    for(var j = 0; j < circles.length; j++){
        var c = circles[j];

        //Create the circles
        ctx.beginPath();
        ctx.arc(c.x, c.y, c.radius, 0, Math.PI*2, false);
        ctx.fillStyle = "rgba("+c.r+", "+c.g+", "+c.b+", 0.5)";
        ctx.fill();

        c.x += c.vx;
        c.y += c.vy;
        c.radius -= .05;

        if(c.radius < 0)
            circles[j] = new create();
    }
}

function animate() {
    requestAnimFrame(animate);
    draw();
}

animate();
```

```
<canvas id="canvas"></canvas>
```

# tooltip - Silverlight中文本框及其工具提示之间的不同数据上下文

> ID：11367068
> 
> 赞同：0
> 
> 时间：2012-07-06T17:32:59.943
> 
> 标签：tooltip, silverlight-5.0, domaindatasource

我正在尝试做一些看似简单的事情，但我不知道为什么不起作用。

这工作正常：

```
<TextBox DataContext="{Binding ElementName=CORDONES_ESTATALESDomainDataSource, Path=Data}" Text="{Binding Path=DNA_A1}">
    <ToolTipService.ToolTip>
        <ToolTip Content="{Binding Path=DNA_A1}"/>
    </ToolTipService.ToolTip>
</TextBox> 
```

我在工具提示中显示的内容与在文本框中显示的内容相同。相反：

```
<TextBox DataContext="{Binding ElementName=CORDONES_ESTATALESDomainDataSource, Path=Data}" Text="{Binding Path=DNA_A1}">
    <ToolTipService.ToolTip>
        <ToolTip DataContext="{Binding ElementName=TIPAJES_INTERMEDIOSDomainDataSource, Path=Data}" Content="{Binding Path=ALELOS_DNA_A2}"/>
    </ToolTipService.ToolTip>
</TextBox> 
```

这说明什么。请注意，唯一的变化是工具提示具有不同的 DataContext，因为 domaindatasource 也不同。

为什么会这样？我做错了什么还是不可能做的？是因为不同的数据上下文吗？如果这不是方法，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:40:41.380

我没有找到办法让它工作，所以我解决了以下方法。

```
<TextBox DataContext="{Binding ElementName=CORDONES_ESTATALESDomainDataSource, Path=Data}" Text="{Binding Path=DNA_A1}">
<ToolTipService.ToolTip>
    <ToolTip Name="DNA_A1Tooltip" Content=""/>
</ToolTipService.ToolTip> 
```

我将内容设置为“”，并为工具提示指定了一个名称。然后在域数据源的 currentChanged 事件中，我以编程方式为其内容赋值：

```
DNA_A1Tooltip.Content = TIPAJES_INTERMEDIOSDomainDataSource.DataView.CurrentItem.ALELOS_DNA_A1() 
```

我知道这不是最优雅的解决方案，但它确实有效。

# vb.net - 使用 VB Express 将两个不同 Excel 表中的两个范围相乘（这有什么问题？）

> ID：11367075
> 
> 赞同：0
> 
> 时间：2012-07-06T17:33:22.010
> 
> 标签：vb.net, excel

以下有什么问题？（级别：初学者）我想将两个不同 Excel 表中的两个范围相乘后得到的答案相加。

```
Dim iRowCounter As Integer
For iRowCounter = 3 To 47

' C3 to C47 from oSheet6
' C22 to C66 from oSheet5

osheet7.Range("A" & iRowCounter - 1).Value = (oSheet5.Range("C" & iRowCounter+19).Value * oSheet6.Range("C" & iRowCounter).Value) + (oSheet5.Range("C" & iRowCounter+20).Value * oSheet6.Range("C" & iRowCounter+1).Value) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:58:28.160

您不能只将范围内的所有值相互叠加，您需要遍历范围以执行操作。所以而不是：

```
 oRng7.Value = oRng5.Value * oRng7.Value 
```

尝试这个：

```
 Dim iRowCounter as integer
 For iRowCounter = 3 to 47 then 
      osheet7.Range("B" & iRowCounter -1).value = oSheet5.Range("C" & iRowCounter).value * oSheet6.Range("C" & iRowCounter).value
 next iRowCounter 
```

更新：

你最初的公式是：

表 7 = 表 5 * 表 7

根据您的评论，我将代码更改为：

表 7 = 表 5 * 表 6

# eclipse - [错误] [mv_main] - 内存不足；要增加内存量，请在启动时使用 -Xmx 标志（java -Xmx128M ...）

> ID：11367078
> 
> 赞同：2
> 
> 时间：2012-07-06T17:33:56.847
> 
> 标签：eclipse, gwt, dev-mode

使用 Eclipse IDE 进行代码更改后，当我在 GWT DevMode 中重新加载我的应用程序时，我不断收到以下错误。

```
[ERROR] [mymodule] - Failed to create an instance of 'com.myapp.client.widget.MyCustomWidget' via deferred binding 
    [ERROR] [mymodule] - Out of memory; to increase the amount of memory, use the -Xmx flag at startup (java -Xmx128M ...) 
```

第一次运行它，没有问题，但是当我在浏览器上进行刷新（以获取代码更改）时，会弹出此错误。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:47:01.427

我以前见过这个错误。对于任何重要的 GWT 模块，默认的 JVM 堆内存设置都太低了。您可以通过修改用于启动 GWT 开发模式的 Eclipse 启动配置来增加它。在启动配置屏幕中，选择 Arguments 选项卡并将其添加到“VM arguments”字段中：

```
-Xmx512M 
```

# python - Python多处理进程和管道 - 700个进程合理吗？

> ID：11367082
> 
> 赞同：0
> 
> 时间：2012-07-06T17:34:30.277
> 
> 标签：python, python-multithreading

服务器运行 32 位 8 核的 Red Hat。

必须实例化的公司类是不可腌制的。

我尝试了线程，但达到 4 到 7 个并发线程会使性能下降到顺序处理的性能。这部分是由于我的无知，PySimpleClient 和底层 C++ 实现。

我尝试使用队列进行多处理，但这并不强大，也没有提高性能。

我目前正在成功运行 60 个多进程进程，每个进程都有一个管道。到目前为止，性能非常好，鲁棒性非常好。

但我至少需要 700 个进程。700合理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:36:56.810

我会说这在 32 位机器上是不合理的。我想在具有充足内存的 64 位机器上运行这种负载，以处理该数量的进程可能需要的任何开销。

# android - 多重警报-警报不响

> ID：11367083
> 
> 赞同：1
> 
> 时间：2012-07-06T17:34:45.283
> 
> 标签：android, alarmmanager, android-alarms

我正在尝试发出一个会在指定的 n 次响起的警报。我的代码如下。我能够正确获取条目，但根本没有警报响起。

```
public void setAlert(View view) {

    int h[] = new int[TOTAL_ALARMS];
    int m[] = new int[TOTAL_ALARMS];
    Intent intent[] = new Intent[TOTAL_ALARMS];
    PendingIntent pendingIntent[] = new PendingIntent[TOTAL_ALARMS];
    int piID = 12345; 
    Calendar[] cal = new Calendar[TOTAL_ALARMS];
    for (int i = 0; i < TOTAL_ALARMS; i++) {
        cal[i] = Calendar.getInstance();
    }

    for (int i = 0; i < TOTAL_ALARMS; i++) {
        try {

            m[i] = Integer.parseInt(editHour[i].getText().toString());

            h[i] = Integer.parseInt(editMinute[i].getText().toString());

            cal[i].set(Calendar.HOUR, h[i]);
            cal[i].set(Calendar.MINUTE, m[i]);

            intent[i] = new Intent(this, AlarmService.class);
             pendingIntent[i] = PendingIntent.getActivity(this,
                    piID++, intent[i], PendingIntent.FLAG_CANCEL_CURRENT);
            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
            alarmManager.set(AlarmManager.RTC_WAKEUP,
                    cal[i].getTimeInMillis(), pendingIntent[i]);
            Toast.makeText(this, "Alarm set", Toast.LENGTH_LONG).show();

        } catch (Exception ex) {
            ex.printStackTrace();
            System.out.print("OOPS!");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:55:48.850

我刚刚回答了同样的问题，您缺少在 Manifest 中以特定意图定义 Receiver。

[答案链接](https://stackoverflow.com/a/11366469/519718)

并且您必须将第二个参数从“123”更改为随机且唯一的数字，您可以通过 int 计数来做到这一点，并在未决意图中使用 count ++ 代替 123 // 固定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:59:31.047

以这种方式创建警报将每次都简单地替换旧警报，因为它们是使用相同的代码创建的。每次修改请求代码将允许创建多个警报。如果您每次都通过循环将 i 添加到您的 123 中就足够了。

此外，您是否设置了一个接收器类以及清单中定义的接收器？如果不是，则不会收到警报。

[警报管理器示例](http://justcallmebrian.com/?p=129)

# arrays - 数组练习

> ID：11367088
> 
> 赞同：0
> 
> 时间：2012-07-06T17:35:14.210
> 
> 标签：arrays, algorithm, language-agnostic

我试图解决这个问题：给定一个包含从 0 开始的**连续整数的****排序**数组（一个整数可能重复多次）例如 - （也可以很长 - 这只是一个例子），有效地找到开始和结束索引给定整数。**`0,0,0,1,2,3,3,3,4,4`**

 **我正在考虑使用

1）遍历（复杂度= `O(n)`）

2) 修改后的二分查找（复杂度 = `O(log n)`）。[ n = 总数组的长度]

然后想知道是否可以利用连续整数属性来解决它。有什么不同的想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:48:21.490

您可以查看开始和结束元素以查看数组中有多少个元素*k*，然后对每个边界进行修改后的二进制搜索，检查元素及其左右。我认为你不能比 O( *k* log( *n* )) 更快。

如果您按从左到右（或从右到左）的顺序搜索边界，则应该减少平均时间，因为您可以在数组的较小子集中进行搜索，但我认为这不会影响最坏的情况-案件复杂性。

即检查索引*i*及其相邻元素，搜索 0-1 边界：

```
|0|0|0|1|1|1|1|1|2|2|2
         \ 一世 /

```

然后向左走：

```
|0|0|0|1|1|1|1|1|2|2|2
   \ 一世 /

```

既然你找到了它，现在在它右边的集合中寻找 1 和 2 之间的边界：

```
1|1|1|1|1|2|2|2
    \ 一世 /

1|1|1|1|1|2|2|2
        \ 一世 /

```

你已经完成了，因为你知道你正在寻找多少边界。

编辑：对不起，我没有意识到你只想要一个边界。过程类似——您找到要搜索的元素（即 O(log( *n* )) ），然后使用相同的修改后的搜索向左和向右搜索以检查边界。根据数组的整体大小与数组中的项目数，实际上只检查一侧或另一侧可能会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:21:42.717

*首先，让我们忽略“连续性”属性*

只要问题是找到处理*单个*请求的最有效方法，直接的通用解决方案就是执行两次连续的二进制搜索：第一个找到序列的开头，第二个找到序列的结尾顺序。第二次搜索在数组的剩余部分中执行，即在先前找到的序列开头的右侧。

但是，如果您以某种方式*知道*序列的平均长度相对较小，那么将第二次二进制搜索替换为*线性*搜索就开始有意义了。（这与合并两个相似长度的排序序列时的原理相同：线性搜索优于二分搜索，因为输入的结构保证平均搜索目标位于序列开头附近）。

更正式地说，如果整个数组的长度是并且数组`n`中不同整数值的数量（多样性度量）是需要提出一个实际的关系）。`k``n/k``log2(n)`

说明这种影响的极端例子是当 时的情况`n=k`，即当数组中的所有值都不同时。显然，使用线性搜索找到每个序列的结尾（一旦你知道开始）将比使用二分搜索更有效。

但这需要额外了解输入数组的属性：我们需要知道`k`.

*这就是您的“连续性”属性发挥作用的时候！*

由于数字是连续的，因此数组中的最后一个值减去数组中的第一个值等于`k-1`，这意味着

```
k = array[n-1] - array[0] + 1 
```

此规则也可以应用于原始数组的任何子数组，以计算该子数组的品种度量。

这已经为您提供了一种非常可行且高效的序列查找算法：首先对序列的开头执行二进制搜索，然后根据和之间的关系（或者更好的是，长度之间的关系）执行*二进制*或*线性*搜索右子数组的数量和右子数组的多样性度量）。`n``k`

PS 同样的技术也可以应用于第一次搜索。如果您正在寻找 的序列`i`，那么您会立即知道它是`j`数组中的第 - 个序列，其中`j = i - array[0]`。这意味着对该序列开头的线性搜索将`j * n/k`平均采取步骤。如果该值小于`log2(n)`，则线性搜索可能比二分搜索更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:03:41.707

您的数组已排序，因此您可以使用二分搜索。说`n`是数组的大小，如果 n 是奇数，则将`A`A 除以大小 (n/2) 或分别为 (n/2) 和 (n/2) + 1。您正在寻找 j 的起始索引。(j 在 A 中)`A1``A2`

```
 1\. if A1(n/2) < j, then you know that j is in A2\. 
 2\. if A2(1) > j, then you know that j is in A1\. 
 3\. If A2(1) = j, then j may be in A1 and A2\. Just check A1(n/2).
     if A1(n/2) < j then 2\. Do the same recursively on A2 to find the last index
     else apply dichotomic search to find the starting index and ending index in both arrays 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:43:59.353

它必须是一个算法吗？你的问题只是说找到位置，但如果它确实是某种形式的算法方法，请告诉我，因为我提供了一个 PHP 函数，它以相当标准的方式处理这个问题。

```
$numbers = array(0,0,0,1,2,3,3,4,4,4,4);
function get_boundaries($array,$number)
{
    $keys = array_keys($array,$number);
    $found = count($keys);
    if($found == 0)
    {
        $ret = false;
    }
    else if($found == 1)
    {
        $ret = array($keys[0],$keys[0]);
    }
    else if($found > 1)
    {
        $ret = array($keys[0],$keys[$found-1]);
    }
    return $ret;
}

$result = get_boundaries($numbers,1);
print_r($result);

//Result when looking for 0
Array
(
    [0] => 0
    [1] => 2
)

//Result when looking for 1
Array
(
    [0] => 3
    [1] => 3
)

//Result when looking for 9
(boolean) false 
```**

# bison - yacc/bison 确定行动的结果

> ID：11367090
> 
> 赞同：0
> 
> 时间：2012-07-06T17:35:22.727
> 
> 标签：bison, yacc, parser-generator

我正在使用 Jflex、byacc、java 来解析语句，它看起来像

```
where expr,expr having expr 
```

语法看起来像

```
%token WHERE HAVING COMMA
%%

stmt : whereclause havingclause

whereclause : WHERE conditionlist { move tmpList to whereClause};
havingclause : HAVING conditionlist { move tmpList to havingClause};

conditionlist : condition | condition COMMA conditionlist;

condition : expr { tmpList.add($1); 
                  /How do I know this is being executed for whereclause or havingclause /};

expr : .... 
```

我无法区分条件是 whereclause 还是 havingclause 的一部分，因此我将条件存储在临时列表中，然后移至正确的子句。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:53:13.907

最常见的是，您在规则操作中构建数据结构，分配指向它们的指针，`$$`然后在更高级别的规则中读取它们。就像是：

```
%token WHERE HAVING COMMA
%union {
    class List *listptr;
    class Expr *exprptr;
}
%type<listptr> whereclasue havingclause conditionlist
%type<exprptr> condition expr
%destructor { delete $$; } <listptr>
%destructor { delete $$; } <exprptr>
%%

stmt : whereclause havingclause { do something with $1 and $2... }

whereclause : WHERE conditionlist { $$ = $2; };
havingclause : HAVING conditionlist { $$ = $2 };

conditionlist : condition { $$ = new List($1); }
              | condition COMMA conditionlist { $$ = $2->prepend($1); };

condition : expr { $$ = $1; }

expr : .... 
```

请注意，这些`%destructor`操作是野牛扩展，在出现语法错误时需要避免内存泄漏。

# asp.net - ADO.NET 连接问题需要ODBC吗？

> ID：11367097
> 
> 赞同：0
> 
> 时间：2012-07-06T17:36:17.807
> 
> 标签：asp.net, ado.net, odbc

我想使用 ASP.NET 2.0 (C# 3.5) 实现从 MySQL 到 SQL Server 的数据迁移，现在与 MySQL 数据库的连接是使用 ODBC 进行的，我想通过将 ASP.NET 与 SQL Server 一起使用并使用给我作为 LINQ 的技术。

问题是我无法连接（`web.config`）

提供者告诉我我需要注册我的 SQL ODBC ADO.NET 知道不需要 ODBC 蘑菇对我的提供者还是我不好？需要 ODBC ADO.NET？如果是这样，我如何使用 LINQ to SQL？

我在本地测试我的应用程序并且工作但部署服务器已关闭

我收到的错误消息如下：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。发现服务器是否无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:20:36.387

检查你的防火墙。您似乎无法从服务器连接到 SQL。安装 SQL 管理工作室作为测试，看看你是否甚至可以联系 SQL 框。

# javascript - 在 SharePoint 中获取登录用户的用户名并立即使用

> ID：11367099
> 
> 赞同：0
> 
> 时间：2012-07-06T17:36:22.317
> 
> 标签：javascript, sharepoint, com

我能够在 SharePoint SitePage 中获取当前登录用户的全名。但是，我需要在它之后使用全名并对其进行处理。不幸的是，它没有按预期工作。

这是代码

```
<script type="text/javascript">
    var currentUser = "";
    $(document).ready(function() { 
        AddItem();
        alert(currentUser);
    });

    function AddItem()
    {
        var context = new SP.ClientContext.get_current();
        var web = context.get_web();
        user = context.get_web().get_currentUser();

        context.load(this.user);
        context.executeQueryAsync(Function.createDelegate(this, this.onSuccessMethod),
        Function.createDelegate(this, this.onFailureMethod));
    }
    function onSuccessMethod(sender, args) {
        currentUser = this.user.get_title();
        //alert(' Name:' + this.user.get_title() + '\n Login:' + this.user.get_loginName());
    }
    function onFaiureMethod(sender, args) {
        //alert('request failed ' + args.get_message() + '\n' + args.get_stackTrace());
    }
</script> 
```

现在我在想，因为我在 AddItem() 之后调用 alert(currentUser)，所以我会得到当前登录用户的名称，但事实并非如此，因为它给了我空字符串。基本上 alert(currentUser) 在 AddItem() 之前被调用。

任何想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:44:20.847

我不知道共享点是什么（我似乎记得一些古老的微软平台），但我确实认为我可以告诉你问题出在哪里。

AddItem 执行异步操作，这意味着它最初不会执行很多操作，并且在 AddItem 函数触发之前触发了警报获取。因此，您可能想要的是以下内容：

```
var currentUser = "";
$(document).ready(function() { 
    AddItem(function(){
        alert(currentUser);
    });
});

function AddItem(callback)
{
    var context = new SP.ClientContext.get_current();
    var web = context.get_web();
    user = context.get_web().get_currentUser();

    context.load(this.user);
    context.executeQueryAsync(Function.createDelegate(this, function(sender, args) {
         currentUser = this.user.get_title();
         callback();
         //alert(' Name:' + this.user.get_title() + '\n Login:' + this.user.get_loginName());
    }),Function.createDelegate(this, this.onFailureMethod));
}
function onFaiureMethod(sender, args) {
    //alert('request failed ' + args.get_message() + '\n' + args.get_stackTrace());
} 
```

# sql - VBScript - CSV 文件中的 SQLOLEDB - 无效的连接字符串属性

> ID：11367100
> 
> 赞同：0
> 
> 时间：2012-07-06T17:36:38.420
> 
> 标签：sql, sql-server, vbscript, connection-string

我正在尝试执行一个非常简单的示例，该示例使用 SQLOLEBD 使用 VBScript 从 CSV 文件中检索记录。我收到错误：行：4 字符：1 错误：无效的连接字符串属性”代码：80004005 来源：Microsoft OLD DB Provider for SQL Server 有人可以帮我理顺吗？

```
Set objConnection = CreateObject("ADODB.Connection")
Set objRecordSet = CreateObject("ADODB.Recordset")

objConnection.Open "Provider=SQLOLEDB; Data Source= C:\Users\public\; Extended Properties=""text;HDR=YES;FMT=Delimited"""

objRecordset.Open "SELECT * FROM employees.csv, objConnection, adOpenStatic, adLockOptimistic, adCmdText"

Do Until objRecordset.EOF
Wscript.Echo "name: " & objRecordset.Fields.Item("Name")
objRecordset.MoveNext
Loop

wscript.echo "Finished" 
```

* * *

员工.csv

id,name,grade 1,"Ezequiel, Justin",1 2,Charlie Sheen,4 3,"Name, Your",8 4,Another Guy,16

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:34:27.690

您的错误的直接原因是使用了错误的 OLE DB 提供程序（您的 Jet 提供程序错误可能是[32 位与 64 位问题](http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_programs/the-microsoftjetoledb40-provider-is-not-registered/40de1d9d-98f2-4526-8e6a-a4e611b92760)），但您的真正目标似乎是将文本文件中的数据与桌子。

两个相当简单的选项是 a) 使用各种[批量加载方法之一将文件加载到 SQL Server 表中，然后像往常一样加入表，或者 b) 直接使用](http://msdn.microsoft.com/en-us/library/ms175937.aspx)[OPENROWSET()](http://msdn.microsoft.com/en-us/library/ms190312.aspx)将表加入文件中。如果您经常这样做，或者如果您有大量数据，那么第一种方法可能会更好，因为您可以利用数据库引擎进行索引和更好的连接性能。

您也可以为此使用[SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)，但在这种情况下它可能有点矫枉过正。

提及您的 SQL Server 版本和其他具体细节总是有用的。

# c# - GridView 编辑的 OnCommand 期间的操作未显示

> ID：11367102
> 
> 赞同：1
> 
> 时间：2012-07-06T17:36:44.990
> 
> 标签：c#, asp.net

所以我有一个我写的方法，它将 selectedValue 从一个下拉框中复制到特定行中的另一个。它是从 OnCommand 事件的行上的按钮调用的。

```
 protected void Copy(String From, String To, GridViewRow CurrentRow)
    {
        DropDownList FromList = (DropDownList)CurrentRow.FindControl(From);
        DropDownList ToList = (DropDownList)CurrentRow.FindControl(To);
        ToList.SelectedValue = FromList.SelectedValue;
    } 
```

现在，当我在页脚行上使用它时，一切正常，但是，当我在编辑行时尝试调用它时，如果我调试，我可以看到数据，但是，下拉菜单不会填充。没有错误，发生。

我确实通过了这个过程，它在我的 OnCommand 事件触发后再次调用了我的 Grids RowEditing 事件（填充所有下拉列表）。所以我的猜测是，它只是通过重新填充下拉列表来消除我所做的更改。

有没有办法防止 RowEditing 事件重新触发（即使它只是为了证明自己是对还是错）？我应该以其他方式处理此副本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:08:13.180

不要`DataBind()`回发：

```
if(!Page.IsPostback)
{
    //databind
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:44:02.677

所以我今天早上发现了我的问题，这是因为我在按钮上使用了 CommandName 属性，或者更具体地说，是我使用的名称。

我认为 CommandName 只是一个供您传递值的空白点，但如果您使用某个名称，例如“Edit”，它实际上会为与该按钮关联的网格启动 RowEditing 事件。

我不认为这会以这种方式工作（考虑到与按钮相关联，而不是与网格相关联）但是一旦我更改了命令名称，它就可以正常工作。我把它改回来了，它又坏了。

# jquery - 使用窗口大小jquery动态调整元素大小

> ID：11367109
> 
> 赞同：5
> 
> 时间：2012-07-06T17:37:28.397
> 
> 标签：jquery, resize

我已经查看了很多关于这个主题的问题，但似乎无法找出我的代码有什么问题。任何帮助将不胜感激！

```
$(window).resize(function(){
   var newwidth = $(window).innerWidth();
   var newheight = $(window).innerHeight();      
   $("#element").height(newheight).width(newwidth);
       }); 
```

如果调整窗口大小，我正在尝试将#element 调整为与窗口相同的高度和宽度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T17:41:07.963

关于`.innerWidth()`，来自[文档](http://api.jquery.com/innerWidth/)：

> 此方法不适用于窗口和文档对象；对于这些，请改用 .width() 。

也有相同的[注释](http://api.jquery.com/innerHeight/)。`.innerHeight()`

所以你需要使用`.width()`and `.height()`：

```
$(window).resize(function(){
    var newwidth = $(window).width();
    var newheight = $(window).height();      
    $("#element").height(newheight).width(newwidth);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:41:30.197

试试这个：

```
$(window).resize(function(){
   var newwidth = $(window).width();
   var newheight = $(window).height();      
   $("#element").css({"height": newheight, "width": newwidth });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:44:30.383

在纯 Javascript 中，您可以这样做：

```
 var viewportwidth;
    var viewportheight;

    // the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight

    if (typeof window.innerWidth != 'undefined')
    {
        viewportwidth = window.innerWidth,
        viewportheight = window.innerHeight
    }

    // IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

    else if (typeof document.documentElement != 'undefined'
     && typeof document.documentElement.clientWidth !=
     'undefined' && document.documentElement.clientWidth != 0)
    {
         viewportwidth = document.documentElement.clientWidth,
         viewportheight = document.documentElement.clientHeight
    }

    // older versions of IE

    else
    {
         viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
         viewportheight = document.getElementsByTagName('body')[0].clientHeight
    }
    var mydiv = document.getElementById("element");
    mydiv.style.height=viewportheight'px';
    mydiv.style.width=viewportwidth+'px'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T17:47:42.580

[jsFiddle](http://jsfiddle.net/minagabriel/PZz9h/)

```
 $(window).resize(function(){
var newwidth = $(window).width();
var newheight = $(window).height();      
$("#element").height(newheight).width(newwidth);
  });​ 
```

两者都适合我

[更新](http://jsfiddle.net/minagabriel/PZz9h/1/)

```
 $(window).resize(function(){
var newwidth = $(window).innerWidth();
var newheight = $(window).innerHeight();      
$("#element").height(newheight).width(newwidth);
  });​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T17:43:40.407

你总是可以只使用 CSS：

```
#element {width:100%; height:100%; position:fixed; } 
```

# jquery - jquery ajax 在 RESTful Web 服务上不返回传输

> ID：11367110
> 
> 赞同：0
> 
> 时间：2012-07-06T17:37:37.220
> 
> 标签：jquery, asp.net, ajax, rest

我有一个 RESTful 网络服务，我可以在已发布的服务器上成功 ping 以将测试作为演示返回。然后我尝试将一些代码放入要调用的方法中，但它似乎在 AJAX 调用中失败了。我不知道错误在哪里，因为我不在本地主机上运行服务器。我知道 Web 服务被正确调用，因为语法与设计中的测试相同

我有类似的方法，但它不是 RESTful，所以我相应地迁移了所有数据，所以我知道方法中的代码可以正常工作。

下面是发布的 AJAX 调用：

```
$.ajax({
            type: 'GET',
            url: WEBSERVICE_URL + 'getWebFormDesignFieldContents',
            data: JSON.stringify({
                'pr_id': LOGGED_IN_PR_ID,
                'fe_name': opts,
                '_count': 200,  //this might need to be adjusted slightly.  I may want to make it more OR less.
                '_also_search_fe_desc': true,
                'opts': opts
            }),
            contentType: 'application/json; charset=utf-8',
            dataType: 'jsonp',
            success: function (result) {
                //success
                var r = $(result.getWebFormDesignFieldContentsResult)[0];
                var div = $("<div class='modal'>").html(r.d);
                /*
                var d = document.createElement("div");
                d.className = "modal";
                d.appendChild(r[0]);
                */
                $("div.modal").replaceWith(div);
                $("div.modal #queryInput").val(opts);
                $("div.modal").css({
                    top: $(window).height() / 2 - $("div.modal").height() / 2,
                    left: $(window).width() / 2 - $("div.modal").width() / 2
                });
                $("div.modal").fadeIn();
            },
            error: function (result) {
                //error
                //alert("Error: "+result.statusText);
                alert(result.statusText);

                //$("div.modal").replaceWith($("<div class = 'modal'>").html(result.responseText));
                //$("div.modal").fadeIn();
                $("div.overlay").fadeOut();
            }
        }); 
```

网络服务接口：

```
[OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "getWebFormDesignFieldContents")]
    string getWebFormDesignFieldContents(WebFormFieldClass inputData); 
```

网络服务功能

```
public string getWebFormDesignFieldContents(string pr_id, string fe_name, string _count, string _also_search_fe_desc, string opts)
    {
       int count = Convert.ToInt32(_count);
       bool also_search_fe_desc = Convert.ToBoolean(_also_search_fe_desc);
       ...
    }

 [DataContract]
public class WebFormFieldClass
{
    [DataMember]
    public string pr_id { get; set; }
    [DataMember]
    public string fe_name { get; set; }
    [DataMember]
    public int count { get; set; }
    [DataMember]
    public string also_search_fe_desc { get; set; }
    [DataMember]
    public string opts { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:43:24.847

编辑 ：

好的，您的问题是您正在使用 GET 将 JSON 对象作为数据传递。

但是抱歉，对于 GET 请求，您使用查询字符串参数。如果你想发送一个完整的 JSON 对象，你应该使用 POST。

此外，您的 URIParameter 添加一个前导斜杠“/”，如下所示

```
 /getWebFormDesignFieldContents 
```

url: URL+'/getWebFormDesignFieldContents',

您有两个选择，要么发出 POST 请求，要么使用 GET 将您的参数（如“pr_id”等）作为 UriTemplate 参数传递

我已经像这样测试过：

```
 <script src="Jquery-1.7.2.js" type="text/javascript"></script>
<script type="text/javascript">
    var URL = 'http://localhost:11431/Service1.svc/getWebFormDesignFieldContents';
    $.ajax({           
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({
            'pr_id': 'ss',
            'fe_name': 'ss',
            '_count': 22,  //this might need to be adjusted slightly.  I may want to make it more OR less.
            '_also_search_fe_desc': true,
            'opts': 'kk'
        }),     
        url: URL,

        success: function (data) {
            alert(data);
        },
        error: function (xhr, status, message) {
            alert("Error: " + status + " " + message);
        }
    });

</script> 
```

我的 IService1.svc

```
 [OperationContract]
    [WebInvoke(Method = "POST",
     ResponseFormat = WebMessageFormat.Json,
     BodyStyle = WebMessageBodyStyle.Wrapped)]

    string getWebFormDesignFieldContents(string pr_id, string fe_name, string _count, string _also_search_fe_desc, string opts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:18:36.897

这个问题来自浏览器，或者看起来是这样。所有这些信息都是正确的，但我得到的错误和问题来自 IE 及其对 ajax 的厌恶。另一个问题是，我们必须添加一堆对 ASP 的引用，以允许程序成功处理来自目标的信息。

# php - 无法使用 php 从 tmp 文件夹下载大小大于 9MB 的文件

> ID：11367113
> 
> 赞同：2
> 
> 时间：2012-07-06T17:38:00.477
> 
> 标签：php, download, file-get-contents

我有一个网络应用程序，下面是我正在尝试做的事情

*   我要求用户使用简单的 html 页面上传 pdf 文件。该文件被上传到服务器中的临时目录。然后我尝试使用 file_get_contents 读取文件的内容并将其放入数据库中。此方法适用于小于 ~9MB 的文件，但不适用于大于该大小的文件。

*   print_r($_FILES) 不是空白的，并且填充了所有值，这意味着文件正在上传。

*   我试图将文件移动到另一个文件夹，然后从那里读取它，但是 Web 应用程序没有写权限，所以这个方法失败了。我成功地将文件移动到具有不同名称的 tmp 文件夹，但在目录中找不到该文件。

*   我试图通读 fread 和 stream_get_contents 但这些方法返回大小为 1 的内容。

PHP

```
$file_name = mysql_real_escape_string($_FILES['file']['name']);
$file_data = mysql_real_escape_string(file_get_contents($_FILES['file']['tmp_name']));
$file_mime = mysql_real_escape_string($_FILES['file']['type']);
$file_size = $_FILES['file']['size']; 
```

*   内存大小为 32M，post_max_size 为 32M，upload_max_file 为 500M 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:36:35.313

转到`php.ini`文件并制作`upload_max_filesize = 32MB`. 希望这会有所帮助！

# php - 在 Zend 中渲染之前修改页面内容？

> ID：11367114
> 
> 赞同：1
> 
> 时间：2012-07-06T17:38:00.200
> 
> 标签：php, zend-framework, helper, helpers

我想根据用户的喜好在页面中使用不同的货币。用户可以将其默认货币设置为英镑、欧元或美元。但是所有页面都已经写有英镑的价格，即`'£'`。

我不知道如何处理这个问题。首先，我想在渲染之前获取页面内容`preDispatch()`或类似的东西，修改它，然后渲染修改后的视图。我可以在控制器中获取视图，但只是像一个对象。另一个问题是我也从控制面板写入了报价，它们不包含在视图对象中。当我`var_dump($view);`的视图是一个对象时，控制面板中的报价就像普通的 HTML 一样显示在屏幕上。

我不想编辑所有创建的页面。这将非常费力。我也看了`Zend_Currency`helper ，但我认为在那种情况下它无济于事。任何建议如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:40:35.253

您不想通过后处理来做到这一点。相反，在输出货币时使用视图助手来反映用户的区域设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:50:00.443

假设：我假设如果您根据用户偏好更改货币，其他内容也可能会略有变化。本质上，您允许您的用户做的是根据他们的具体情况定制语言环境。

> getTranslationList() 使您可以访问多种类型的本地化信息。如果您想在无需翻译的情况下向客户显示本地化数据，这些信息将非常有用。它们已经可供您使用。

以下代码将为您提供大量可以使用的语言环境设置（认真检查本文底部的链接）：

```
$list = Zend_Locale::getTranslationList('language', 'de_AT');
print_r ($list); 
```

最重要的是，您可以获得的一些值：

*   货币符号
*   NameToCurrency
*   CurrencyToName
*   货币四舍五入
*   货币分数
*   货币到地区
*   区域到货币

参考： http: [//framework.zend.com/manual/1.11/en/zend.locale.functions.html#zend.locale.getdata](http://framework.zend.com/manual/1.11/en/zend.locale.functions.html#zend.locale.getdata)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T15:58:14.403

您可以向视图添加过滤器。[Matthew Turland 的这篇文章](http://matthewturland.com/2008/06/04/output-filters-in-zend_view/)解释了这个过程并有一个例子。

另请参阅[此问题](https://stackoverflow.com/questions/3595711/in-zend-framework-applications-what-purpose-does-the-views-filters-serve)，其中包含 Bill Karwin 的答案。

也就是说，更好的方法是`Zend_Locale`从一开始就可能使用生成正确的输出。但是在输出已经创建之后添加过滤器 - 但在它被发送到客户端之前 - 听起来像是一种处理您的特定情况的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:40:26.907

我不熟悉 Zend 框架的内部结构，但您应该能够只使用输出缓冲区并覆盖实际呈现结果的任何函数，然后`str_replace`覆盖缓冲区的内容。虽然可能不是一个特别优雅的解决方案。

# regex - Python RegEx 匹配结果太少，请指教

> ID：11367128
> 
> 赞同：1
> 
> 时间：2012-07-06T17:39:10.090
> 
> 标签：regex, python-3.x

我很困惑为什么这个 Python 正则表达式没有给我预期的结果。在下面的示例中，我希望输出为“/w:document/w:body/w:sectPr”，但实际结果（Python v3.2）是“/w:sectPr”。我为以下示例简化了我的问题。

```
import re

path = "/w:document/w:body/w:sectPr/w:footerReference"
rxSetting = re.compile('(/\w+:[^/]+){3}')   # top-three
matchSetting = rxSetting.match(path)
setting = matchSetting.group(1)
print(setting) 
```

当我用正则表达式检查它时，它符合我想要的。我需要在 Python 中做一些特定的事情来完成这项工作吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:45:16.350

在这里试试这个：

```
rxSetting = re.compile('((?:/\w+:[^/]+){3})') 
```

如果要捕获（分组）前三个，则需要整个正则表达式周围的括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:14:54.133

如果你想要整场比赛，你也可以使用`.group(0)`或`.group()`

# perl - 无法检查字符串中的模式

> ID：11367131
> 
> 赞同：3
> 
> 时间：2012-07-06T17:39:21.947
> 
> 标签：perl

我要检查的是“免费”是否出现在单词边界中并且这不起作用（不打印）：

```
use strict;

my @words= ("free hotmail msn");

my $free = "free";

$free =~ s/.*/\b$&\b/;

if ( $words[0] =~ m/$free/)
{
    print "found\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:49:52.510

你需要做的就是写

```
my $free = 'free';

$free = qr/\b$free\b/;

print "found" if $words[0] =~ $free; 
```

但是，如果您的`@words`数组应该每个元素包含一个单词，那么您更有可能想要

```
use strict;
use warnings;

my @words= qw( free hotmail msn );

my $free = "free";

print "found\n" if $words[0] eq $free; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:42:24.987

在模式替换中，如在双引号字符串中，`\b`被解释为退格字符（`chr(8)`在大多数系统上）。

```
$free =~ s/.*/\\b$&\\b/; 
```

是一种尴尬的写作方式

```
$free = '\b' . $free . '\b';
$free = "\\b$free\\b"; 
```

但它会完成这项工作。

# android - 我有SecurityException：权限拒绝错误

> ID：11367132
> 
> 赞同：0
> 
> 时间：2012-07-06T17:39:39.880
> 
> 标签：android

我收到以下错误：

```
ActivityManager: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.optionpricing/.optionListNew } from null (pid=1160, uid=2000) requires null 
```

我是 Android 编程新手，我无法理解与我的问题相关的其他帖子。我想知道 optionListNew 类是否有问题？有人可以伸出援手，这样我就可以继续完成我的应用程序。此外，该应用程序在我的虚拟设备中运行，当我尝试在我的实际手机上对其进行测试时，我只会收到此错误。任何想法表示赞赏。下面是清单文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest android:versionCode="1" android:versionName="1.0"
    package="com.optionpricing" xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="8"/>
    <application android:icon="@drawable/icon"
                 android:label="@string/app_name"
                 android:debuggable="true">
        <activity android:name=".optionListNew">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <activity android:name=".OptionPricing"/>
        <activity android:name=".optionListNew"/>
        <activity android:name=".futureOptionActivity"/>
        <activity android:name=".currencyOptionActivity"/>
        <activity android:name=".gapOptionActivity"/>
        <activity android:name=".gapOptionList01"/>
        <activity android:name=".barrierSingleUpInActivity"/>
        <activity android:name=".testActivity"/>
        <activity android:name=".barrierlistview"/>
        <activity android:name=".barrierSingleDownInActivity"/>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:46:31.910

您在清单文件中添加了两次**“optionListNew”**活动。通过删除此行删除以下活动

```
<activity android:name=".optionListNew"/> 
```

您的 Manifest.xml 代码将变为

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest android:versionCode="1" android:versionName="1.0"
    package="com.optionpricing" xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="8"/>
    <application android:icon="@drawable/icon"
                 android:label="@string/app_name"
                 android:debuggable="true">
        <activity android:name=".optionListNew">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <activity android:name=".OptionPricing"/>
        <activity android:name=".futureOptionActivity"/>
        <activity android:name=".currencyOptionActivity"/>
        <activity android:name=".gapOptionActivity"/>
        <activity android:name=".gapOptionList01"/>
        <activity android:name=".barrierSingleUpInActivity"/>
        <activity android:name=".testActivity"/>
        <activity android:name=".barrierlistview"/>
        <activity android:name=".barrierSingleDownInActivity"/>
    </application>
</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:47:08.730

optionListNew 在清单中出现两次。删除第二个。

# iphone - 将目标 c 与 sqlite 一起使用时，SELECT INTO 语句的正确语法是什么？

> ID：11367137
> 
> 赞同：0
> 
> 时间：2012-07-06T17:40:05.627
> 
> 标签：iphone, objective-c, sqlite, syntax

现在我的陈述是这样的：

```
NSString *sqlJoin = @"SELECT * INTO #tmp FROM foods JOIN bridgeTable ON foods.foodID = bridgeTable.foodID";

if(sqlite3_prepare_v2(database, [sqlJoin UTF8String],
                      -1, &statement, nil) == SQLITE_OK) {
    while (sqlite3_step(statement) == SQLITE_ROW) {
    }
    sqlite3_finalize(statement); 
}
else {
    NSLog(@"Statement: %s", sqlite3_errmsg(database));
}
NSLog(@"count: %i", [foodArray count]); 
```

我得到的输出是：

```
2012-07-06 10:32:04.940 ProFitness[7087:f803] Statement: near "INTO": syntax error
2012-07-06 10:32:04.940 ProFitness[7087:f803] count: 0
2012-07-06 10:32:04.940 ProFitness[7087:f803] sql statement: SELECT * FROM #tmp WHERE TableID = '3'
2012-07-06 10:32:04.941 ProFitness[7087:f803] Statement: near "#tmp": syntax error 
```

如果我的语法错误，它应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:51:46.767

您必须使用以下方法自己创建临时临时：

```
CREATE TEMP TABLE xxxx 
```

那么你会使用

```
SELECT * INTO xxxx 
```

有关更多信息，请参阅[SQLite 的临时磁盘文件的使用](http://www.sqlite.org/tempfiles.html)。

# c++ - 链接到静态库时出现未定义的引用错误

> ID：11367138
> 
> 赞同：4
> 
> 时间：2012-07-06T17:40:09.527
> 
> 标签：c++, g++, cygwin, static-linking, undefined-reference

我正在尝试编译一个依赖于[Xerces XML Parser](http://xerces.apache.org/xerces-c/)的项目。该项目可以毫无困难地为 Windows 编译，但我在 Cygwin 中使用 g++ 编译它时遇到了一些麻烦。

为了使用 Xerces，我正在尝试针对静态库编译我的代码`libxerces-c.a`。但是当我这样做时，我会得到如下所示的错误：

```
/tmp/cc2QGvMh.o:test.cpp:(.text+0x3a): undefined reference to `xercesc_2_8::DOMImplementationRegistry::getDOMImplementation(unsigned short const*)' 
```

我已经使用 检查了静态库`ar`，并确认它包含`DOMImplementationRegistry.o`定义我正在调用的函数的文件。

```
ar -t libxerces-c.a
...
DOMImplementationImpl.o
DOMImplementationRegistry.o
DOMLocatorImpl.o
... 
```

我还从库中提取了目标文件，并使用“nm”来确保我调用的函数确实存在：

```
ar -x libxerces-c.a
nm --demangle DOMImplementationRegistry.o
...
00000080 T xercesc_2_8::getDOMImplSrcVectorMutex()
00000300 T xercesc_2_8::DOMImplementationRegistry::getDOMImplementation(unsigned short const*)
000002a0 T xercesc_2_8::DOMImplementationRegistry::addSource(xercesc_2_8::DOMImplementationSource*)
... 
```

由于我可以为 Windows 编译所有内容，但不能使用 g++，因此我认为错误可能出在链接器顺序中（类似于此问题中描述的[问题](https://stackoverflow.com/questions/2624238/c-undefined-references-with-static-library)）。但是，即使更改了链接器顺序，我仍然会遇到相同的编译器错误。我都试过了

```
g++ -o test.exe test.cpp -Llib -lxerces-c 
```

和

```
g++ -o test.exe test.cpp lib/libxerces-c.a 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T18:09:19.140

您的项目使用编译器错误消息指出的 xercesc_2_6 命名空间中的方法，但您的库提供 xercesc_2_8 版本。问题可能是由于您使用的标头与库目标文件不匹配造成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T00:17:42.593

你没有说存档的来源。如果它不是用 cygwin 编译的，则可能是名称修改问题。从源代码编译库可能会解决这个问题。

也可能是存档构建不正确，因此存在内部解析问题。尝试两次给出库名称。

```
g++ -o test.exe test.cpp lib/libxerces-c.a lib/libxerces-c.a 
```

如果这可行，则存档已损坏，您应该寻找或构建一个新存档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:14:49.120

尝试链接器选项--enable-stdcall-fixup（参见'man ld'）。它将关心名称修改和调用约定：

```
g++ -o test.exe test.o -Wl,--enable-stdcall-fixup -Llib -lxerces-c 
```

# python - Python/POpen/gpg：通过标准输入或文件描述符提供密码和加密文本

> ID：11367140
> 
> 赞同：4
> 
> 时间：2012-07-06T17:40:20.163
> 
> 标签：python, ipc, pipe, gnupg

我正在尝试通过 python 程序远程控制 gpg `POpen`。
我有一个包含加密数据的文件，我想对其进行解密、修改并重新加密后写回磁盘。
目前我将解密的信息存储在一个临时文件中（我`shred`在程序结束时）。然后我对该文件进行修改，然后使用一个函数重新加密它，该函数将密码短语通过`stdin`.
代码如下：

```
def encrypt(source, dest, passphrase, cipher=None):
  """Encrypts the source file.
  @param source Source file, that should be encrypted.
  @param dest Destination file.
  @param passphrase Passphrase to be used.
  @param cipher Cipher to use. If None or empty string gpg's default cipher is
  used.
  """
  phraseecho = Popen(("echo", passphrase), stdout=subprocess.PIPE)

  gpgargs = [
          "gpg",
          "-c",
          "--passphrase-fd", "0", # read passphrase from stdin
          "--output", dest,
          "--batch",
          "--force-mdc"]
  if not cipher is None and len(cipher) > 0:
      gpgargs.extend(("--cipher-algo", cipher))

  gpgargs.append(source)

  encrypter = Popen(
          gpgargs,
          stdin=phraseecho.stdout,
          stdout=subprocess.PIPE,
          stderr=subprocess.PIPE)
  stdout, stderr = encrypter.communicate()
  rc = encrypter.returncode
  if not rc == 0:
      raise RuntimeError(
              "Calling gpg failed with return code %d: %s" % (rc, stderr)) 
```

这工作得很好，但我相当确定将潜在敏感的解密数据存储在临时文件中是一个相当大的安全漏洞。
所以我想以某种方式重写我的加密/解密函数，使它们能够完全在内存中工作，而不会将敏感数据存储在磁盘上。
解密还可以通过管道传输密码短语`stdin`并捕获`stdout`解密数据来直接进行。

另一方面，加密让我发疯，因为我不能只将密码和消息传递给“stdin”……至少

```
encrypter.stdin.write("%s\n%s" % (passphrase, message)) 
```

没用。
我的下一个最佳猜测是提供某种内存文件/管道/套接字的文件描述符或其他任何`--passphrase-fd`参数。问题是：我不知道是否存在诸如内存文件之类的东西，或者套接字是否适用，因为我从未使用过它们。

任何人都可以帮助或指出我的问题的更好解决方案吗？
该解决方案不必是可移植的 - 我完全可以使用仅 Linux 的方法。

提前致谢...

编辑：
非常感谢你们，Lars 和 ryran。两种解决方案都可以完美运行！可惜我只能接受一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:55:31.683

下面是我在[Obnam](http://liw.fi/obnam/)中用来运行 gpg 的代码，也许它可以对你有所帮助。

```
def _gpg_pipe(args, data, passphrase):
    '''Pipe things through gpg.

    With the right args, this can be either an encryption or a decryption
    operation.

    For safety, we give the passphrase to gpg via a file descriptor.
    The argument list is modified to include the relevant options for that.

    The data is fed to gpg via a temporary file, readable only by
    the owner, to avoid congested pipes.

    '''

    # Open pipe for passphrase, and write it there. If passphrase is
    # very long (more than 4 KiB by default), this might block. A better
    # implementation would be to have a loop around select(2) to do pipe
    # I/O when it can be done without blocking. Patches most welcome.

    keypipe = os.pipe()
    os.write(keypipe[1], passphrase + '\n')
    os.close(keypipe[1])

    # Actually run gpg.

    argv = ['gpg', '--passphrase-fd', str(keypipe[0]), '-q', '--batch'] + args
    tracing.trace('argv=%s', repr(argv))
    p = subprocess.Popen(argv, stdin=subprocess.PIPE, stdout=subprocess.PIPE,
                         stderr=subprocess.PIPE)
    out, err = p.communicate(data)

    os.close(keypipe[0])

    # Return output data, or deal with errors.
    if p.returncode: # pragma: no cover
        raise obnamlib.Error(err)

    return out

def encrypt_symmetric(cleartext, key):
    '''Encrypt data with symmetric encryption.'''
    return _gpg_pipe(['-c'], cleartext, key)

def decrypt_symmetric(encrypted, key):
    '''Decrypt encrypted data with symmetric encryption.'''
    return _gpg_pipe(['-d'], encrypted, key) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T23:53:01.123

Chris：感谢 Lars，由于你有一个使用 os.pipe 的简单示例，我将提供[Pyrite](https://github.com/ryran/pyrite/)（我的 gpg 的 GTK 前端）所做的，希望更多的代码示例更好。由于 gui 方面，我的用例比你的要复杂一些——我实际上使用字典进行输入和输出，我有代码以 stdin 作为输入启动 gpg 和以文件作为输入启动它的代码等并发症。

那个警告说，我和你一样从列表中的 gpg 命令行开始；但是，我没有使用`--passphrase-fd 0`，而是创建了一个自定义文件描述符，以在加载实例`os.pipe()`之前发送密码，该实例用于输入数据。[以下是 pyrite 的crypt_interface](https://github.com/ryran/pyrite/blob/master/modules/crypt_interface.py)模块的一些相关（修改）摘录。`Popen()``stdin=subprocess.PIPE`

```
#!/usr/bin/env python
# Adapted excerpts from Pyrite <http://github.com/ryran/pyrite>

from subprocess import Popen, PIPE, check_output
...
 # I/O dictionary obj
 self.io = dict(
    stdin='',   # Stores input text for subprocess
    stdout='',  # Stores stdout stream from subprocess
    stderr=0,   # Stores tuple of r/w file descriptors for stderr stream
    gstatus=0,  # Stores tuple of r/w file descriptors for gpg-status stream
    infile=0,   # Input filename for subprocess
    outfile=0)  # Output filename for subprocess
...
cmd = ['gpg']
fd_pwd_R, fd_pwd_W = os.pipe()
os.write(fd_pwd_W, passwd)
os.close(fd_pwd_W)
cmd.append('--passphrase-fd')
cmd.append(str(fd_pwd_R))
...
# If working direct with files, setup our Popen instance with no stdin
if self.io['infile']:
    self.childprocess = Popen(cmd, stdout=PIPE, stderr=self.io['stderr'][3])
# Otherwise, only difference for Popen is we need the stdin pipe
else:
    self.childprocess = Popen(cmd, stdin=PIPE, stdout=PIPE, stderr=self.io['stderr'][4])

# Time to communicate! Save output for later
self.io['stdout'] = self.childprocess.communicate(input=self.io['stdin'])[0]

# Clear stdin from our dictionary asap, in case it's huge
self.io['stdin'] = ''

# Close os file descriptors
if fd_pwd_R:
    os.close(fd_pwd_R)
time.sleep(0.1)  # Sleep a bit to ensure everything gets read
os.close(self.io['stderr'][5])
if self.io['gstatus']:
    os.close(self.io['gstatus'][6])
... 
```

调用所有等待直到`self.childprocess`对象具有`returncode`属性并假设返回码是`0`并且输入是文本（而不是文件）的函数，然后它从该字典中读取 gpg 的标准输出并将其打印到屏幕上。

很高兴回答问题或尝试从我有限的经验中提供帮助。可以通过以下链接找到我的联系信息。

Edit: You might also find [a4crypt](https://github.com/ryran/b19scripts/blob/master/a4crypt.py) instructive as it is a much simpler frontend for gpg -- it was the project I started in order to learn python, and later mothballed after I "completed" (if there is such a thing) pyrite.

# c++ - 如何将静态 const 数组声明和初始化为类成员？

> ID：11367141
> 
> 赞同：28
> 
> 时间：2012-07-06T17:40:21.617
> 
> 标签：c++

很不言自明。数组为整型，内容已知不变，不允许使用C++0x。它还需要声明为指针。我似乎无法找到有效的语法。

Class.hpp 中的声明：

```
static const unsigned char* Msg; 
```

Class.cpp 中的东西确实是我修改过的：

```
const unsigned char Class::Msg[2] = {0x00, 0x01}; // (type mismatch)
const unsigned char* Class::Msg = new unsigned char[]{0x00, 0x01}; // (no C++0x) 
```

...ETC。我也尝试过在构造函数内部进行初始化，这当然是行不通的，因为它是一个常量。我的要求是不可能的吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-06T17:47:23.550

```
// in foo.h
class Foo {
    static const unsigned char* Msg;
};

// in foo.cpp
static const unsigned char Foo_Msg_data[] = {0x00,0x01};
const unsigned char* Foo::Msg = Foo_Msg_data; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-06T17:45:14.090

您正在混合指针和数组。如果你想要的是一个数组，那么使用一个数组：

```
struct test {
   static int data[10];        // array, not pointer!
};
int test::data[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }; 
```

另一方面，如果您想要一个指针，最简单的解决方案是在定义成员的翻译单元中编写一个辅助函数：

```
struct test {
   static int *data;
};
// cpp
static int* generate_data() {            // static here is "internal linkage"
   int * p = new int[10];
   for ( int i = 0; i < 10; ++i ) p[i] = 10*i;
   return p;
}
int *test::data = generate_data(); 
```

# api - 让网络浏览器查询另一个 api 而不是我的网站提供它是一个坏主意吗？

> ID：11367154
> 
> 赞同：0
> 
> 时间：2012-07-06T17:41:13.203
> 
> 标签：api, yql

这是我的问题。我有一个提供一些投资服务的网站，我为日终数据付费，这是我真正需要的服务，但当人们在白天登记时我觉得有点奇怪，它只显示昨天的收盘价。一天结束对我的分析来说很好，但我想在我的网站上显示延迟报价。

根据雅虎的[YQL 常见问题解答](http://developer.yahoo.com/yql/faq/)：`If you use IP based authentication then you are limited to 1000 calls/day/IP`如果我的网站增长，我可能会超过这个值，但我正在考虑尝试将此请求推送给浏览我网站的人，因为同一个 IP 不太可能每天访问我的网站 1000 次（我的网站本身对这些信息没有用处）。我会从他们的浏览器中调用一个 url，然后解析结果，这样我就可以允许他们以站点模板的格式查看它。

我是 Web 开发的新手，所以我想知道让用户浏览器自己调用 api 是一种常见做法还是一个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:17:05.180

这根本不是一个坏主意：

*   您以这种方式扩大了限制；
*   您的服务器将响应更快（因为它不必联系 api）；
*   您的页面将加载更快，因为初始响应更小；
*   当您的 UI 已经响应时，您可以以异步方式从 api 加载剩余数据。

一般来说，与客户端的 api 交谈是一个好主意。它更具动态性，您可以分散流量，提高响应能力等...

我能想到的最大缺点是取决于其他服务的可用性。另一方面，由于流量分散，您的服务器将受到较小的压力。

希望这有点帮助！干杯!

# javascript - 使用 jquery 访问具有相同类名但不同测试的嵌套 div

> ID：11367156
> 
> 赞同：1
> 
> 时间：2012-07-06T17:41:24.080
> 
> 标签：javascript, jquery, html

我想遍历 div 结构。实际上，我想要的是如果我有不同的 div 结构具有相同的类名，例如 mod 并且我想检查其类名为 title 的内部 div。它们之间的唯一区别是类名称标题的 div 的内容具有文本为 hello1 和其他文本为 hello2。

这是结构

```
<div class="mod" id="mod23" >
      <div class="content" >
       <div class="hd" >
         <div class="title">Hello1</div>
           <ul class="list"></ul>
           <ul class="buttons">
             <li class="help"></li>
             <li class="show" ></li>
             <li class="close"></li>
           </ul>
       </div>
      </div>
     </div>
    <div class="mod" id="mod27" >
      <div class="content" >
       <div class="hd" >
         <div class="title">Hello2</div>
           <ul class="list"></ul>
           <ul class="buttons">
             <li class="help"></li>
             <li class="show" ></li>
             <li class="close"></li>
           </ul>
       </div>
      </div>
     </div> 
```

这是我试图想出的代码不起作用

```
$('div').each(function(index) {
if($(this).hasClass('title').text('Hello1')){
    alert('found');
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:47:38.287

你可以使用`contains`选择器：

```
$('div.title:contains("Hello")').each(function(index) {
    alert('found');
}); 
```

[http://jsbin.com/atayeb/2/](http://jsbin.com/atayeb/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T17:47:48.337

```
var result = $('div.title').filter(function() {
    return $(this).text() === "Hello1";
});

// Do something with result 
```

或者您可以查看[contains-selector](http://api.jquery.com/contains-selector/)，但这确实匹配与您的查询匹配的所有内容。

```
var result = $('div.title:contains(Hello1)') 
```

* * *

要检查您是否匹配任何内容：

```
if ( result.length ) {
    alert("found");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T17:45:13.410

```
$('div').each(function(index) {
if($(this).find('.title').first().text() == 'Hello1'){
    alert('found');
    }
}); 
```

不过可能有更酷的方法

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T17:45:49.853

试试这个：

```
<script>
$('div').each(function(index) {
if($(this).hasClass('title') && $(this).text() == 'Hello1'){
    alert('found');
    }
});
</script> 
```

祝你好运！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T17:47:45.333

您可以`div`使用[CSS 选择器](http://api.jquery.com/category/selectors/)更直接地找到您感兴趣的内容：

```
$('.mod .title').each(function(i, e) {  
    if($(e).text() == 'Hello1') {
        alert('found');
    }
});? 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T19:48:14.380

```
 $('div').each(function (index) {
        if ($(".title")) {
            if ($(this).text('Hello1')) {
                alert('found');
            }
        }
    }); 
```

# php - SendGrid 设置问题

> ID：11367160
> 
> 赞同：1
> 
> 时间：2012-07-06T17:41:54.213
> 
> 标签：php, zend-framework, sendgrid

我刚刚配置了我的 SendGrid 帐户并将 zip 文件上传到我的服务器，现在我正在尝试将它与我的 Zend Framework 项目集成。我试图慢慢整合，所以我一次只会遇到一些错误，从创建电子邮件开始，然后再尝试发送。到目前为止，这就是我所拥有的：

```
require_once(BASE_PATH . "/library/sendgrid-php/SendGrid.php");
require_once(BASE_PATH . "/library/sendgrid-php/SendGrid_loader.php");
$sendgrid = new SendGrid($username, $password);
        $mail = new SendGrid/Mail();
        $mail->addTo($email)
             ->setSubject('Subject')
             ->setText('');
        //$sendgrid->smtp->send($mail); 
```

顺便说一句，第一个 require 在那里，因为 SendGrid 加载器因为找不到 SendGrid.php 而抛出错误。无论如何，只有这几行代码会产生所有这些错误：

```
Warning: Missing argument 1 for SendGrid::__construct(), called in 
...InviteController.php on line 51 and defined in 
...library/sendgrid-php/SendGrid.php on line 13

Warning: Missing argument 2 for SendGrid::__construct(), called in 
...InviteController.php on line 51 and defined in 
...library/sendgrid-php/SendGrid.php on line 13

Warning: mail() expects at least 3 parameters, 0 given in 
...InviteController.php on line 51

Warning: Division by zero in ...InviteController.php on line 51

Fatal error: Call to a member function addTo() on a non-object in 
...InviteController.php on line 52 
```

SendGrid 自己的指南[http://docs.sendgrid.com/documentation/get-started/integrate/examples/php-email-example-using-smtp/](http://docs.sendgrid.com/documentation/get-started/integrate/examples/php-email-example-using-smtp/)基本上只是说将文件上传到您的服务器并包含加载器和您'准备好了。我绝对不明白为什么我会得到所有这些错误。我错过了设置它的步骤还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:00:19.437

它只是一个过时的 PHP 版本。Sendgrid 的命名空间功能（类名中的斜杠）至少需要 5.3 才能正常工作。我的代码无法评估命名空间，因此找不到所需的类。

# c - 使用主应用程序窗口使拥有的窗口最小化

> ID：11367164
> 
> 赞同：0
> 
> 时间：2012-07-06T17:42:22.717
> 
> 标签：c, windows, gtk

在我的应用程序中，主窗口会生成多个对话框，通常会同时打开多个对话框。在 Ubuntu 上，如果我最小化主窗口，每个子对话框也会被最小化。在 Windows XP/Vista/7 上，对话框不会随主窗口最小化。

在 Windows 上，当主应用程序最小化时，有没有办法让所有顶级窗口最小化。

编辑：通过为“窗口状态事件”设置信号并手动使用 gtk_window_iconify 解决。

设置信号：

```
g_signal_connect(G_OBJECT(Main_Application),  "window-state-event", G_CALLBACK(minimize_windows), NULL); 
```

这是最小化窗口函数。

```
gboolean minimize_windows( GtkWidget *widget, GdkEventWindowState *event, gpointer user_data)
{
  GList *glist;
  /*Returns a GList of each toplevel window*/
  glist = gtk_window_list_toplevels();  

  /*Iconify check*/
  if(event->new_window_state & GDK_WINDOW_STATE_ICONIFIED)
      g_list_foreach(glist, (GFunc)gtk_window_iconify,NULL);
  /* If not make sure all the windows are deiconified */
  else
      g_list_foreach(glist, (GFunc)gtk_window_deiconify, NULL);

  g_list_free(glist);

  return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:33:56.977

尝试使父表单成为子表单的所有者：

```
Form2 f2 = new Form2();
f2.Show(this); 
```

# javascript - 如何使用 javascript 获取共享点 .xml

> ID：11367166
> 
> 赞同：0
> 
> 时间：2012-07-06T17:42:59.883
> 
> 标签：javascript, ajax, sharepoint

我想用js解析Sharepoint中的xml，但是js只能加载客户端文件，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:45:53.003

您可以使用 jQuery 内置功能`parseXML`

[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# ruby - 如何使用Nokogiri递归删除XML中特定xpath位置的空子元素？

> ID：11367168
> 
> 赞同：1
> 
> 时间：2012-07-06T17:43:08.770
> 
> 标签：ruby, xml, nokogiri, xmlnode

我有以下 XML，其中我有几个带有空文本的子元素。

```
doc = <<'XML'
<Book>
    <BookId>BK45647</BookId>
    <BookName>The Client by John Grisham</BookName>
    <BookAuthenticationCode></BookAuthenticationCode>
    <BookCategory>Suspense</BookCategory>
    <BookSequence></BookSequence>
    <BookPublisherInfo>
        <PublisherId>PBBK12345</PublisherId>
        <PublisherName>Mc.GrawHill</PublisherName>
        <PublisherIndex></PublisherIndex>
        <PublisherCategoryQuota></PublisherCategoryQuota>
    </BookPublisherInfo>
    <BookPurchaselist>
       <Customer>
           <FirstName>John</FirstName>
           <LastName>Smith</LastName>
           <MiddleName></MiddleName>
           <NickName></NickName>
       </Customer>
        <Customer>
           <FirstName>Winston</FirstName>
           <LastName>Churchill</LastName>
           <MiddleName></MiddleName>
           <NickName></NickName>
       </Customer>
    </BookPurchaselist>
</Book>
XML 
```

我尝试使用下面的代码，但它以某种方式无法正常工作。

```
cust = doc.at_xpath("//Customer")
cust.each do |cust_obj|
    if cust_obj.has_text? == false
       cust_obj.delete
    end
end 
```

这在某种程度上无法正常工作并给出以下输出

```
<Book>
    <BookId>BK45647</BookId>
    <BookName>The Client by John Grisham</BookName>
    <BookAuthenticationCode></BookAuthenticationCode>
    <BookCategory>Suspense</BookCategory>
    <BookSequence></BookSequence>
    <BookPublisherInfo>
        <PublisherId>PBBK12345</PublisherId>
        <PublisherName>Mc.GrawHill</PublisherName>
        <PublisherIndex></PublisherIndex>
        <PublisherCategoryQuota></PublisherCategoryQuota>
    </BookPublisherInfo>
    <BookPurchaselist>
       <Customer>
           <FirstName>John</FirstName>
           <LastName>Smith</LastName>
           <MiddleName></MiddleName>
       </Customer>
        <Customer>
           <FirstName>Winston</FirstName>
           <LastName>Churchill</LastName>
           <NickName></NickName>
       </Customer>
    </BookPurchaselist>
</Book> 
```

很少有具有空文本的元素正在获取，并且很少有这样的元素。我如何递归地删除特定 xpath 中的元素（带有空数据）并重新编写 XML。

卡在这里..需要建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:41:19.017

```
doc.xpath('//Customer/child::*[not(text())]').each do |node|
  node.remove
end 
```

`not(node())`如果要删除没有子节点的节点，也可以使用。

**编辑**：完整的工作示例（使用与上面相同的代码）

```
require 'nokogiri'

xml = <<-XML
<Book>
    <BookId>BK45647</BookId>
    <BookName>The Client by John Grisham</BookName>
    <BookAuthenticationCode></BookAuthenticationCode>
    <BookCategory>Suspense</BookCategory>
    <BookSequence></BookSequence>
    <BookPublisherInfo>
        <PublisherId>PBBK12345</PublisherId>
        <PublisherName>Mc.GrawHill</PublisherName>
        <PublisherIndex></PublisherIndex>
        <PublisherCategoryQuota></PublisherCategoryQuota>
    </BookPublisherInfo>
    <BookPurchaselist>
       <Customer>
           <FirstName>John</FirstName>
           <LastName>Smith</LastName>
           <MiddleName></MiddleName>
       </Customer>
        <Customer>
           <FirstName>Winston</FirstName>
           <LastName>Churchill</LastName>
           <NickName></NickName>
       </Customer>
    </BookPurchaselist>
</Book>
XML

doc = Nokogiri.parse(xml)

doc.xpath('//Customer/child::*[not(text())]').each do |node|
  node.remove
end

puts doc.to_s 
```

这个程序的输出是：

```
<?xml version="1.0"?>
<Book>
    <BookId>BK45647</BookId>
    <BookName>The Client by John Grisham</BookName>
    <BookAuthenticationCode/>
    <BookCategory>Suspense</BookCategory>
    <BookSequence/>
    <BookPublisherInfo>
        <PublisherId>PBBK12345</PublisherId>
        <PublisherName>Mc.GrawHill</PublisherName>
        <PublisherIndex/>
        <PublisherCategoryQuota/>
    </BookPublisherInfo>
    <BookPurchaselist>
       <Customer>
           <FirstName>John</FirstName>
           <LastName>Smith</LastName>

       </Customer>
        <Customer>
           <FirstName>Winston</FirstName>
           <LastName>Churchill</LastName>

       </Customer>
    </BookPurchaselist>
</Book> 
```

# javascript - 本地 .txt 文件上的 XMLHttpRequest() 在除 Firefox 之外的所有浏览器中都返回一个空的 responseText

> ID：11367176
> 
> 赞同：0
> 
> 时间：2012-07-06T17:43:45.430
> 
> 标签：javascript, xmlhttprequest, responsetext

由于某种原因，我的**XMLHttpRequest().responseText**在尝试从同一子目录中包含的文件中提取时为空。

我没有检查**XMLHttpRequest().status == 200**，因为根据我在搜索过程中发现的情况，如果请求的文件是本地文件，状态将始终为 0 - 这是我在几分钟前遇到的问题检查**XMLHttpRequest().readyState == 4 && XMLHttpRequest().status == 200**。这是由于没有通过网络服务器。

文件（data.txt）包含纯文本，但**responseText**总是返回空，我不知道为什么。任何帮助将不胜感激！

***更新：*** 似乎它适用于 Firefox，但不适用于 Chrome（我用来测试）或 IE。这些浏览器没有将数据放入 responseText，所以有谁知道为什么，或者更好的是，如何纠正它？

```
function loadData()
{
    var request = new XMLHttpRequest();
    request.open("GET", "data.txt", true);
    request.onreadystatechange = function()
    {
        if (request.readyState == 4)
            useData(request.responseText);
    }
    request.send(null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:11:09.170

这是为了防止 javascript 漏洞共享，例如邮件文件中的附件（因为桌面应用程序不存在类似域的东西，并且只有一个文件系统）。对于**开发**，您可以使用该`--disable-web-security`标志在 chrome 中禁用此安全功能，但通常您只需要接受这是不可能的。

# xml - 有没有办法在 ColdFusion 中从其 XML 源制作 PDF 文件？

> ID：11367181
> 
> 赞同：1
> 
> 时间：2012-07-06T17:44:04.853
> 
> 标签：xml, pdf, coldfusion, lifecycle, cfpdfform

我需要对 PDF 文件的 XML 源进行一些更改，并将结果保存为 ColdFusion 中的 PDF。第一部分很简单。我不知道如何像 LifeCycle 一样将 XML 转换为 PDF！

如果单击 XML 源（当然对于动态 pdf 文件），XML 源与您在 LifeCycle 中看到的内容完全相同。

谢谢

顺便说一句，我知道我可以使用 CFPDFFORM 读取实际的 PDF 并用 XML 数据填充它，问题是，cfpdfform 出于某种原因截断了标签，所以我不能使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:07:38.950

我不这么认为。您只能在 CF 中使用`<cfdocument>`和`<cfpdf>`操作 PDF，它们都不支持从“XML 源”创建 PDF 文件。最后的事情是 DDX，但我很确定它与您所指的“XML 源”无关。

# mongodb - Shard key又该如何选择呢？

> ID：11367186
> 
> 赞同：1
> 
> 时间：2012-07-06T17:44:37.617
> 
> 标签：mongodb, sharding

我是 NoSQL 数据库的新手，现在我使用 MongoDB，顺便说一句，我对 MongoDB 分片键有疑问，我想知道它实际上是做什么的？它与查询性能有关吗？我们如何为集合选择一个好的分片键？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:45:32.907

来自 10gen 的文档：[http ://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key](http://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key)

选择分片键很大程度上取决于您的数据和用例。

以下是您可能会发现相关的更多文档：

[http://docs.mongodb.org/manual/faq/sharding/](http://docs.mongodb.org/manual/faq/sharding/)

[http://docs.mongodb.org/manual/sharding/](http://docs.mongodb.org/manual/sharding/)

具体来说：

[http://docs.mongodb.org/manual/core/sharding/](http://docs.mongodb.org/manual/core/sharding/)

从本质上讲，分片允许您将数据分区到不同的服务器上。这意味着不同的写入/读取将发送到不同的服务器——将应用程序的负载分布在多个服务器上。

分片键是您正在评估的集合中的值，以确定文档也被路由到哪个分片/服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:39:02.070

您可以在 Kristina Chodrow 的书“Scaling MongoDB”中获得更多关于分片键选择和工作的解释

也看看[**这个**](https://stackoverflow.com/a/13029530/1424605)

# python - 使用 heatmap.py 生成 kml 文件

> ID：11367187
> 
> 赞同：0
> 
> 时间：2012-07-06T17:44:37.980
> 
> 标签：python, kml, heatmap

我目前正在尝试使用 heatmap.py 为 Google Maps 生成热图覆盖。描述 heatmap.py 的网站 (http://jjguy.com/heatmap/) 展示了一张华盛顿特区上空的美丽热图以及用于生成它的代码。然而，运行代码后，我得到以下 KML 输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Folder>
    <GroundOverlay>
      <Icon>
        <href>classic.png</href>
      </Icon>
      <LatLonBox>
        <north>38.9096822126249293</north>
        <south>38.8880342183292171</south>
        <east>-77.0127326291108432</east>
        <west>-77.0498038539626435</west>
        <rotation>0</rotation>
      </LatLonBox>
    </GroundOverlay>
  </Folder>
</kml> 
```

这只是一个长方形盒子。此外，我研究了源代码，发现以下内容：

```
KML = """<?xml version="1.0" encoding="UTF-8"?>                                                                                                                        
<kml xmlns="http://www.opengis.net/kml/2.2">                                                                                                                           
  <Folder>                                                                                                                                                             
    <GroundOverlay>                                                                                                                                                    
      <Icon>                                                                                                                                                           
        <href>%s</href>                                                                                                                                                
      </Icon>                                                                                                                                                          
      <LatLonBox>                                                                                                                                                      
        <north>%2.16f</north>                                                                                                                                          
        <south>%2.16f</south>                                                                                                                                          
        <east>%2.16f</east>                                                                                                                                            
        <west>%2.16f</west>                                                                                                                                            
        <rotation>0</rotation>   
    <GroundOverlay>                                                                                                                                                    
      <Icon>                                                                                                                                                           
        <href>%s</href>                                                                                                                                                
      </Icon>                                                                                                                                                          
      <LatLonBox>                                                                                                                                                      
        <north>%2.16f</north>                                                                                                                                          
        <south>%2.16f</south>                                                                                                                                          
        <east>%2.16f</east>                                                                                                                                            
        <west>%2.16f</west>                                                                                                                                            
        <rotation>0</rotation>                                                                                                                                         
      </LatLonBox>                                                                                                                                                     
    </GroundOverlay>                                                                                                                                                   
  </Folder>                                                                                                                                                            
</kml>"""

def saveKML(self, kmlFile):
    """                                                                                                                                                            
    Saves a KML template to use with google earth.  Assumes x/y coordinates                                                                                        
    are lat/long, and creates an overlay to display the heatmap within Google                                                                                      
    Earth.                                                                                                                                                         

    kmlFile ->  output filename for the KML.                                                                                                                       
    """

    tilePath = os.path.basename(self.imageFile)
    north = self.maxXY[1]
    south = self.minXY[1]
    east = self.maxXY[0]
    west = self.minXY[0]

    bytes = KML % (tilePath, north, south, east, west)
    file(kmlFile, "w").write(bytes) 
```

这似乎完全符合输出的建议。有没有人能够使用 heatmap.py 生成类似于图中所示的热图。如果没有，您是否能够使用另一种方法生成类似的热图？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:00:16.427

那不是“只是一个矩形框”。这正是 KML 中定义叠加层的方式。谷歌文档报告了这个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<GroundOverlay>
   <name>GroundOverlay.kml</name>
   <color>7fffffff</color>
   <drawOrder>1</drawOrder>
   <Icon>
      <href>http://www.google.com/intl/en/images/logo.gif</href>
      <refreshMode>onInterval</refreshMode>
      <refreshInterval>86400</refreshInterval>
      <viewBoundScale>0.75</viewBoundScale>
   </Icon>
   <LatLonBox>
      <north>37.83234</north>
      <south>37.832122</south>
      <east>-122.373033</east>
      <west>-122.373724</west>
      <rotation>45</rotation>
   </LatLonBox>
</GroundOverlay>
</kml> 
```

You can save it as kml file and check that it works. The main difference compared to the code in your question is the `<color>` tag: this example uses the alpha channel to reduce the opacity of the image. The `<Icon>` section contains a reference to the image to show, the `<LatLonBox>` contains the coordinates of the image.

[Check the google documentation about GroundOverlay for more details](https://developers.google.com/kml/documentation/kmlreference?hl=en#groundoverlay).

# ios - Opengl ES2 剪贴蒙版

> ID：11367188
> 
> 赞同：0
> 
> 时间：2012-07-06T17:44:40.540
> 
> 标签：ios, opengl-es-2.0, textures, clipping

我正在寻找一种方法来使用纹理来掩盖我的整个视口。就我而言，我想使用黑白格子图案（或任何 2 种颜色），并且只显示场景中黑色的部分。

最好的方法是使用剪贴蒙版、片段着色器或 Alpha 混合。我在 SO 上看到过这篇文章：[How to create Stencil buffer with texture (Image) in OpenGL-ES 2.0](https://stackoverflow.com/questions/7571075/how-to-create-stencil-buffer-with-texture-image-in-opengl-es-2-0)这似乎与我需要的相似，但我不完全理解如何处理 discard 关键字。是否适用于我的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:09:29.657

假设您有黑白方格的方格纹理。首先，您需要设置模板测试以绘制蒙版：

```
glEnable(GL_STENCIL_TEST);
glDisable(GL_DEPTH_TEST);
glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
glDepthMask(GL_FALSE);

glStencilFunc(GL_ALWAYS, 1, -1);
glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE); 
```

接下来绘制方格纹理。这里的关键步骤（丢弃出现的地方）是您将片段着色器设置为仅绘制棋盘为黑色的片段（如果您愿意，也可以将其翻转为白色）。丢弃关键字会跳过不符合您的条件的任何像素的渲染。

```
//in the fragment shader
if(sampleColor.r > 0.5) { discard; } 
```

在此渲染步骤之后，您将拥有一个带有棋盘图像的模板缓冲区，其中一半缓冲区的模板值为 0，另一半的模板值为 1。

然后在模板缓冲区 == 1 时正常渲染，启用模板测试以通过。

```
glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
glStencilFunc(GL_EQUAL, 1, -1); 
```

# python - 用大数组中的值 c 替换从值 a 到 b 的浮点数

> ID：11367191
> 
> 赞同：2
> 
> 时间：2012-07-06T17:44:56.297
> 
> 标签：python, arrays, numpy

我有一个带有浮点数的数组（2000 * 2000），我想对数字进行分类。因此，10 到 20 之间的所有数字都应替换为 15，20 到 60 之间的数字应替换为 40，依此类推。

我用几个 if 语句写了一些循环遍历所有行和列的东西……但是在大型数组上运行需要很长时间。有人知道如何加快速度吗？

```
for a in range(grid.shape[0]): #grid is an array
    for b in range(grid.shape[1]):    
        for c in range(len(z)):
            if z[c][0] <= grid[a][b] < z[c][1]: # z is a list containing [lower,upper,replace_value]
                grid[a][b]=z[c][2] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:00:14.440

像这样的东西对你有用吗？

```
>>> import numpy as np
>>> grid = np.random.random((5,5)) * 100
>>> z = np.array([0, 10, 20, 60, 100.])
>>> replace_value = np.array([np.nan, 5., 15., 40., 80.])

>>> grid = replace_value[z.searchsorted(grid)]
>>> print grid
[[ 15\.  40\.  80\.  80\.  15.]
[ 80\.  40\.  15\.  80\.  80.]
[ 15\.  80\.   5\.  15\.  40.]
[ 40\.  80\.   5\.   5\.  80.]
[ 40\.   5\.  80\.   5\.  40.]] 
```

# c++ - 如何确定传入连接是否需要 SSL？

> ID：11367192
> 
> 赞同：4
> 
> 时间：2012-07-06T17:45:09.370
> 
> 标签：c++, ssl, tcp, openssl

我想为未加密的 TCP 和 SSL 使用 1 个端口。

目标是使 1 个端口成为机器的入口。这意味着将所有协议和传输复用到端口中。例如，我偷看流的前 4 个字节。如果它以“GET”、“POST”、“HEAD”等开头。我知道它是 HTTP 协议，所以我将连接传递给 HTTP 服务器。如果是“HELO”或“EHLO”，我知道将其传递给 SMTP 服务器。

问题是，如果它是 SSL 连接（以便将其传递给 OpenSSL），我应该寻找什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:04:54.430

SSL 2 将 8x yz（十六进制）作为前两个字节（x yz 可以是任何东西，例如 8F 13），SSL 3 及更高版本将 16 03 十六进制作为前两个字节。

更新：正如评论中所指出的，某些协议要求服务器首先发送一些东西（FTP 和 POP3 仅举几例，评论中提到了 SMTP），因此您的方法仅适用于有限数量的协议。

# actionscript-3 - 如何为 actionscript 3 类创建重载构造函数？

> ID：11367198
> 
> 赞同：1
> 
> 时间：2012-07-06T17:45:35.400
> 
> 标签：actionscript-3

如何覆盖 as3 中的类构造函数？

```
public class Cargar{

public Cargar(){
}

public Cargar(sobrecargado:object){
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:55:05.513

`Actionscript 3.0`不支持函数重载。也是一个函数，所以`constuctor`你不能重载它。但是你可以做这样的事情：

```
public class Cargar{
    public Cargar(sobrecargado:Object=null):void{
         if(sobrecargado === null){
             initByEmptyObject();
         }else{
             initByObject(sobrecargado);
         }
    }
    //surrogate of `Cargar()` constructor
    private function initByEmptyObject():void{

    }
    //surrogate of `Cargar(sobrecargado:object)` constructor
    private function initByObject():void{

    }
} 
```

# javascript - JavaScript 尝试创建新元素不起作用

> ID：11367207
> 
> 赞同：0
> 
> 时间：2012-07-06T17:46:38.563
> 
> 标签：javascript

这感觉像是一个答案很明显的初学者问题，但我一生都无法弄清楚。我在下面尝试创建一个新元素并将其添加到正文中有什么问题？

```
var newDiv = document.createElement("div");
newDiv.setAttribute("id", "popup");
newDiv.setAttribute("width", "400px");
newDiv.setAttribute("height", "400px");
newDiv.setAttribute("backgroundColor", "red");
document.getElementsByTagName("body")[0].appendChild(newDiv);
newDiv.style.position = "absolute";
newDiv.style.left = "25px";
newDiv.style.top = "25px"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T17:50:25.600

宽度和高度**属性**不适用于其中的“px”，我也不确定背景属性。无论哪种方式，以下确实有效，并且是您应该这样做的方式：

```
var newDiv = document.createElement("div");
newDiv.setAttribute("id", "popup");
newDiv.style.width="400px";
newDiv.style.height="400px";
newDiv.style.backgroundColor="red";
document.getElementsByTagName("body")[0].appendChild(newDiv);
newDiv.style.position = "absolute";
newDiv.style.left = "25px";
newDiv.style.top = "25px"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:52:20.550

[http://jsfiddle.net/4BBWj/2/](http://jsfiddle.net/4BBWj/2/) 设置 newDiv.style.backgroundColor 或设置属性 style = backgreound-color:red

高度和宽度相同。

并且还放了一些内容来看看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:02:27.067

这是我认为最好的方法。

```
var newDiv = document.createElement("div");
newDiv.id = "popup";

newDiv.setAttribute("width", "400px");
newDiv.setAttribute("height", "400px");

newDiv.style.position = "absolute";
newDiv.style.top = "25px";
newDiv.style.left = "25px";
newDiv.style.backgroundColor = "red";

document.body.appendChild(newDiv); 
```

# java - 使用 Selenium IE Webdriver 登录时出现“会话已过期”错误

> ID：11367214
> 
> 赞同：2
> 
> 时间：2012-07-06T17:47:18.073
> 
> 标签：java, internet-explorer, session, webdriver, selenium-webdriver

我有一套测试，它与 Selenium 和 Chrome 的 Firefox 驱动程序一起成功运行。登录应用程序时，测试输入正确的凭据（尝试使用相同的凭据登录，一切正常），然后单击提交按钮。然后出现会话过期错误。

有什么建议么？

PS 我试图清除缓存和 cookie。没有任何帮助。

# asp.net - W3WP 运行缓慢

> ID：11367217
> 
> 赞同：-1
> 
> 时间：2012-07-06T17:47:25.593
> 
> 标签：asp.net, iis-7.5, asp.net-mvc-4, w3wp

我对 W3WP 进程（IIS 工作进程）有一个非常不寻常的问题。它没有从我的 CPU 中占用足够的内存来运行得更快。它正在影响我的开发工作，因为它需要很长时间才能建立一个本地网站。当我从我的本地主机启动网站时，W3WP 从大约 50MB 开始，需要将近 10 分钟才能达到 100MB。

有没有办法让 W3WP 运行得更胖？

我正在使用具有 8GB RAM 的 64 位 3.4GHZ 四核 i5 CPU。操作系统 Windows 7 企业版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:03:41.960

你也可以使用`.NET Profiler`看看慢的方法。您还可以在高级应用程序池设置中更改资源限制（CPU、内存、...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:49:09.247

我进入 IIS 设置并将“工作进程”/“更改 .Net Framework 版本”从 2.XX 更改为 4.XX。此外，我的应用程序有一个专用的应用程序池，并停止了所有其他应用程序。这些变化使事情变得比以前好多了。

# android - “GLOB”SQL 命令的缓慢结果

> ID：11367219
> 
> 赞同：1
> 
> 时间：2012-07-06T17:47:28.563
> 
> 标签：android, sqlite, glob

我有一个至少有 100.000 行（SQLite）的表（rowID、name、familyName）。当 EditText 的文本发生更改（onTextChanged）时，我正在使用此代码查询我的表：

```
mySelectSql = "Select rowID from gamtable WHERE name GLOB ' " + searchEditText.getText().toString() + "*';";
Cursor c1 = db.rawQuery(mySelectSql, null); 
```

rowID 是主键，name 是索引的！**此代码仅在 EditText 中输入的第一个**键上运行缓慢（~6000 毫秒），在第二个、第三个等上运行速度非常快。

我需要改进我的代码，以使第一个输入的密钥与第二个和第三个一样快...对这个问题有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:10:33.787

假设它实际上使用的是索引（听起来你已经检查过？），我会简单地限制结果的数量。在 UI 预览中使用最大数量的可显示结果。

```
SELECT rowID FROM gamtable WHERE name GLOB 'foo*' LIMIT 15; 
```

# css - * {边距：0；填充：0；} 在2012年

> ID：11367234
> 
> 赞同：0
> 
> 时间：2012-07-06T17:48:33.850
> 
> 标签：css, html, browser, cross-browser

浏览器渲染的当前差异状态是什么？这种“CSS重置”的方法肯定是低效的，今天的现代浏览器有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:52:57.000

“当今的现代浏览器”仅占浏览器市场份额的一部分（[来源](http://www.w3counter.com/globalstats.php)）；您仍然有惊人比例的用户使用旧版或非标准浏览器。

即使在现代浏览器中，它们的默认状态也存在细微的差异，这使得重置 css 有助于确保尽管用户代理存在差异，但仍可以平等地开始。这适用于全面的浏览器，不仅是古怪的 Internet Explorer，甚至是业内知名的兼容并处于新标准前沿的浏览器（[来源 1](http://www.webmonkey.com/2010/06/dealing-with-browser-differences-in-css-3/)、[来源 2](http://blog.orite.com.au/web_development/2009-04-09/css-implementation-chart-ie6-ie7-ie8/)、[来源 3](http://www.stuffandnonsense.co.uk/blog/about/five_css_design_browser_differences_i_can_live_with/)）

也就是说......没有人用 重置`*`，因为那是低效且过于广泛的。大多数人喜欢有针对性和具体的东西，一种旨在处理“现代浏览器”中已知差异的东西：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:55:44.403

这是使盒子模型在浏览器之间尽可能标准的好方法。我确信每个浏览器都有一些看起来“漂亮”的默认样式，你在处理宽度/高度时总是会忘记考虑这些样式。

进行一般的 css 重置有什么效率低下？它可能是额外的 CSS，但我认为你不应该担心它的效率。

# python - 展平numpy数组

> ID：11367243
> 
> 赞同：28
> 
> 时间：2012-07-06T17:49:04.483
> 
> 标签：python, numpy

NumPy 中是否有一种简单的方法来展平类型对象数组？

我知道 .flatten() 方法可以展平由相同大小的数组构造的非对象类型数组：

```
I1 a = np.array([[1],[2],[3]])

I2 a.flatten()
O2 array([1, 2, 3]) 
```

但是，我无法将 dtype=object 数组展平：

```
I4 b
O4 array([[1], [2, 3], [3]], dtype=object)

I5 b.flatten()
O5 array([[1], [2, 3], [3]], dtype=object) 
```

谢谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-06T18:03:59.553

如果你想要 [1,2,3,3]，试试这个

```
np.hstack(b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-14T23:29:18.660

如果您的数组不包含多个嵌套数组，则`np.hstack(arr)`函数**将不起作用！**

解决方法：

```
arr = np.array([[0]])
if arr.any():
    arr = np.hstack(arr)
else:
    arr = arr.flatten() 
```

# iphone - MPMoviePlayerController 播放在视频结束前终止

> ID：11367245
> 
> 赞同：0
> 
> 时间：2012-07-06T17:49:19.343
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller

我无法理解此类并使其正常工作，这是我使用它的一段代码：

```
MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:_videoURL];
UIImage *videoThumbnail = [moviePlayer thumbnailImageAtTime:0 timeOption:MPMovieTimeOptionNearestKeyFrame];
[lastImageView setImage:videoThumbnail];

[moviePlayer setControlStyle:MPMovieControlStyleNone];
[moviePlayer setShouldAutoplay:YES];
[moviePlayer prepareToPlay];

[moviePlayer.view setFrame:lastImageView.frame];
moviePlayer.view.transform = CGAffineTransformMakeRotation((90*M_PI)/180);
[self.view addSubview:moviePlayer.view];

[moviePlayer play]; 
```

videoThumbnail 行仍然存在的唯一原因是因为我没有播放视频，直到我只是尝试看看它是否会从那里获取图像然后它突然开始工作......有点. 现在它播放 2-3 秒，然后终止而不发送 MPMoviePlayerPlaybackDidFinishNotification 或 MPMoviePlayerPlaybackStateDidChangeNotification 我用谷歌搜索了一下，找不到任何有用的提示，有人能告诉我什么是错的或我忘记了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:31:14.330

如果您没有将新创建的`MPMoviePlayerController`实例分配给具有本地范围 ( ) 的变量以外的任何内容`moviePlayer`，则电影播放器​​将在电影播放之前被释放。（我想这个`thumbnailImageAtTime`电话会保持更长的时间。）

尝试将电影播放器​​实例分配给保留的（强）实例变量或属性。当然，它应该在完成后释放，因为多个电影播放器​​实例不能很好地一起播放。

另外，请注意，从 iOS 5 开始，`prepareToPlay`需要调用。以下内容来自 Matt Neuberg 的*Programming iOS 5, Second Edition*的第 28 章：

> > 在您使用 MPMoviePlayerController 在您的界面中显示电影之前，您必须调用 prepareToPlay，它是通过 MPMediaPlayer 协议（由 MPMoviePlayerController 采用）提供的。此要求是 iOS 5 中的新要求，与以前的系统版本有很大不同；如果不进行此调用，您的旧代码可能会中断。

# java - 检查 JFrame 是否打开

> ID：11367246
> 
> 赞同：2
> 
> 时间：2012-07-06T17:49:20.700
> 
> 标签：java, swing, jframe, chat

我正在尝试为我的程序创建一个聊天客户端，我想为每个聊天打开一个新窗口（A & B 不会与 A & C 在同一个窗口中）我有我想要的伪代码做，但不确定如何写。

聊天客户端：

```
inputstream.read()
Read who message from
If (chat window arleady open with person from)
{
    Add Message to output section of the window
{
else if (chat window not open)
{
    Open new chat window with person from
    Display message in new chat window
} 
```

为此，我想到的是将 IP 存储在一个数组中，然后每当客户端收到消息时，它都会查看数组以查看是否存储了 IP。如果是存储的，则窗口应该已经打开，否则需要打开窗口。我可以通过使用 JFrame 中的 defaultonclose 命令对此进行编程，以便在窗口关闭时调用 IP 的删除，但这是我遇到的问题。

1.  一旦我在数组中搜索 IP 地址，如果窗口已经打开（假设我有 AB 和 C 与 D 交谈），我如何确保 C 发送一条消息，将其放置在 C 窗口中？

1.1 我考虑过产生一个新线程，命名线程，然后当有消息进入时将其传递到与名称匹配的线程，但我不知道该怎么做。我以前读过线程的名称，但从未将某些内容传递给特定的线程。

反正有没有下载额外的库更容易做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:02:15.670

*   不要`JFrame`用于另一个窗口，因为你不能设置`parent v.s.owner`，`JDialog`而是使用

*   然后返回使用[JDialog(myFrame owner)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Dialog%29)`JFrame.getOwnedWindows()`的所有实例`JDialog(s)`

*   在所有情况下`Window[] allWindows = Window.getWindows();`都返回当前 JVM 的所有实例，返回所有`(J)Frames`, `(J)Dialogs`,`(J)Windows`或`JOptionsPanes`

# android - Android：将多部分文件连接在一起以制作单个文件

> ID：11367247
> 
> 赞同：6
> 
> 时间：2012-07-06T17:49:21.100
> 
> 标签：android, file, http, join, segment

我正在开发一个 android 应用程序，它可以下载多个并行段中的文件。我分别拥有它们，现在我想将它们全部加入。

为了更清楚，我将通过一个简单的示例向您展示。假设我下载了 100kb 的 4 段文件。第一段是从 0kb 到 25kb，第二段是从 25kb 到 50kb，第三段是从 50kb - 75kb，最后一段是从 75kb-100kb。文件类型可以是mp3、avi等。

现在我需要加入它们，以便这些段（文件部分）成为一个文件。我希望你能帮我解决这个问题。谢谢你的时间！

编辑：例如，它更像是分段的 avi(xxx.avi.001, xxx.avi.002, xxx.avi.003) 文件，我们有时会下载到我们的 PC 中并使用[HJSplit](http://www.hjsplit.org/)将文件合并到一个文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-18T08:53:39.040

尝试这样，从单独的文件一个一个地读取，写入一个文件。下面的简单代码供您理解。试试这个，我希望它对你有用。您可以改进此代码。

```
 InputStream in1 = new FileInputStream("sourceLocation1");
    InputStream in2 = new FileInputStream("sourceLocation2");
    InputStream in3 = new FileInputStream("sourceLocation3");
    InputStream in4 = new FileInputStream("sourceLocation4");

    OutputStream out = new FileOutputStream("targetLocation");

    // Copy the bits from instream to outstream
    byte[] buf = new byte[1024];
    int len;

    while ((len = in1.read(buf)) > 0) {
        out.write(buf, 0, len);
    }

    while ((len = in2.read(buf)) > 0) {
        out.write(buf, 0, len);
    }

    while ((len = in3.read(buf)) > 0) {
        out.write(buf, 0, len);
    }

    while ((len = in4.read(buf)) > 0) {
        out.write(buf, 0, len);
    }

    in1.close();
    in2.close();
    in3.close();
    in4.close();
    out.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T16:27:11.637

尝试**[RandomAccessFile](http://developer.android.com/reference/java/io/RandomAccessFile.html)**。它具有强大而灵活的功能，使您可以在准确的字节位置读取或写入文件。

# java - MVP的具体代码示例

> ID：11367250
> 
> 赞同：38
> 
> 时间：2012-07-06T17:49:35.257
> 
> 标签：java, design-patterns, mvp

有人可以提供 MVP 的具体（实际 Java 代码）示例吗？

这将包括以下 3 种类型的类以及它们如何调用彼此的方法来实现模式和处理/响应客户端响应：

*   **模型**- 某种值对象 (VO)
*   **View** - 表示或生成 UI
*   **演示者**- 业务逻辑

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-06T23:47:34.220

MVP 是我最喜欢的创建 UI 的设计模式。

MVP 和 MVC 的最大区别在于如何处理视图。

*   在 MVC 中，控制器操作视图，负责如何在视图中呈现用户操作和模型的部分。这意味着控制器和视图具有“紧密耦合”。
*   在 MVP 中，Presenter 负责用户任务，模型在 Presenter 和 View 之间共享。因此视图根据模型渲染 UI，有时视图可以从 Presenter 调用操作。Presenter 和 View 可以有一个定义的接口契约，使它们“松耦合”。例如，您可以为 Java Swing UI 创建一个视图，为 JavaFX UI 创建另一个视图。或者，如果与数据源的连接发生变化，那么您只需要更新演示者。

MVP 有多种编程方式。

在形式上，包括为设计模式的每个元素创建接口。

```
/*-- file: Application.java --*/
import javax.swing.JOptionPane;

/**
 *
 * @author danLeon
 */
interface LoginModel {

    String getUser();

    void setUser(String user);
}

class MyLoginModel implements LoginModel {

    String user;

    @Override
    public String getUser() {
        return user;
    }

    @Override
    public void setUser(String user) {
        this.user = user;
    }
}

interface LoginView {

    LoginPresenter getPresenter();

    void setPresenter(LoginPresenter loginPresenter);

    void updateModelFromView();

    void updateViewFromModel();

    void open();

    void close();

    void userRejected();
}

class MyLoginView extends javax.swing.JFrame implements LoginView {

    private LoginPresenter loginPresenter;

    /**
     * Creates new form MyLoginView
     */
    public MyLoginView() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jLabel1 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBounds(new java.awt.Rectangle(0, 0, 0, 0));
        java.awt.GridBagLayout layout = new java.awt.GridBagLayout();
        layout.columnWidths = new int[] {0, 7, 0};
        layout.rowHeights = new int[] {0, 7, 0, 7, 0};
        getContentPane().setLayout(layout);

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel1.setText("Welcome");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 3;
        getContentPane().add(jLabel1, gridBagConstraints);

        jTextField1.setColumns(13);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        getContentPane().add(jTextField1, gridBagConstraints);

        jLabel2.setText("User");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        getContentPane().add(jLabel2, gridBagConstraints);

        jButton1.setText("Login");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 4;
        getContentPane().add(jButton1, gridBagConstraints);

        pack();
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        getPresenter().login();
    }

    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JTextField jTextField1;

    @Override
    public void updateModelFromView() {
        getPresenter().getModel().setUser(jTextField1.getText());
    }

    @Override
    public void updateViewFromModel() {
        jTextField1.setText(getPresenter().getModel().getUser());
    }

    @Override
    public void open() {
        setVisible(true);
        jTextField1.selectAll();
        jTextField1.requestFocus();
    }

    @Override
    public void close() {
        dispose();
    }

    @Override
    public void userRejected() {
        jLabel1.setText("Try again!");
        jTextField1.selectAll();
        jTextField1.requestFocus();
    }

    @Override
    public LoginPresenter getPresenter() {
        return loginPresenter;
    }

    @Override
    public void setPresenter(LoginPresenter loginPresenter) {
        this.loginPresenter = loginPresenter;
    }
}

interface LoginPresenter {

    LoginModel getModel();

    void setModel(LoginModel loginModel);

    LoginView getView();

    void setView(LoginView loginView);

    void setOnLogin(Runnable onLogin);

    void run();

    void login();
}

class MyLoginPresenter implements LoginPresenter {

    LoginModel loginModel;
    LoginView loginView;
    private Runnable onLogin;

    @Override
    public LoginModel getModel() {
        return loginModel;
    }

    @Override
    public void setModel(LoginModel loginModel) {
        this.loginModel = loginModel;
    }

    @Override
    public LoginView getView() {
        return loginView;
    }

    @Override
    public void setView(LoginView loginView) {
        this.loginView = loginView;
    }

    @Override
    public void setOnLogin(Runnable onLogin) {
        this.onLogin = onLogin;
    }

    @Override
    public void run() {
        loginModel.setUser("previousUser");
        loginView.setPresenter(this);
        loginView.updateViewFromModel();
        loginView.open();
    }

    @Override
    public void login() {
        loginView.updateModelFromView();
        if (loginModel.getUser().equalsIgnoreCase("root")) {
            loginView.close();
            loginView.setPresenter(null);// for memory sanity. 
            onLogin.run();
        } else {
            loginView.userRejected();
        }
    }
}

public class Application {

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                LoginModel loginModel = new MyLoginModel();
                LoginPresenter loginPresenter = new MyLoginPresenter();
                loginPresenter.setModel(loginModel);
                LoginView loginView = new MyLoginView();
                loginPresenter.setView(loginView);
                loginPresenter.setOnLogin(new Runnable() {

                    @Override
                    public void run() {
                        JOptionPane.showMessageDialog(null, "Welcome user!");
                    }
                });
                loginPresenter.run();
            }
        });
    }
} 
```

# mysql - 1329 无数据 - 提取、选择或处理零行

> ID：11367251
> 
> 赞同：1
> 
> 时间：2012-07-06T17:49:42.597
> 
> 标签：mysql, stored-procedures

我已经多次更改此存储过程，但仍然收到相同的错误。我知道我正在取回行，因为我单独测试了游标选择。我在这个网站上阅读了其他类似的问题，但我似乎没有相同的解决方法。

```
DECLARE iDone INTEGER(10) DEFAULT 0; 
DECLARE userID INTEGER(10);
DECLARE creditRemaining INTEGER(10);

DECLARE column_cur CURSOR FOR
     SELECT `userID`, `creditRemaining` FROM `access` 
     WHERE (`dateExpire`>=now() OR `isRenewed`=1) and `descriptionShort`='Subscription';

DECLARE CONTINUE HANDLER FOR NOT FOUND SET iDone=1;

SET userID = 0;
SET creditRemaining = 0;
OPEN column_cur;
LOOP1: LOOP   

   FETCH column_cur INTO userID, creditRemaining;
   IF iDone = 1
       THEN
          LEAVE LOOP1;
   END IF;
   -- SELECT userID, creditRemaining;
   UPDATE `users` SET `saveCount`=creditRemaining, `searchCount`=6000 WHERE `ID`=userID;

END LOOP LOOP1;
CLOSE column_cur; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-08T13:25:29.073

我认为这是更多的重复，除了你已经声明了一个 HANDLER 的事实。在另一个`Error 1329`问题中， @DanJGer 的[这个回答](https://stackoverflow.com/a/23690018/7358209)指出了文档中的一条注释：

> 在 MySQL 5.6.3 之前，如果生成警告或错误的语句导致调用条件处理程序，则处理程序可能不会清除诊断区域。这可能会导致处理程序没有被调用。以下讨论演示了该问题并提供了解决方法。

这很可能是您遇到的问题。

# python - PySide 是否支持 Python 3？

> ID：11367252
> 
> 赞同：6
> 
> 时间：2012-07-06T17:49:44.827
> 
> 标签：python, qt, python-3.x, pyside

我问这个的原因是因为我已经看过[这个页面](http://wiki.qt.io/PySide_Python_3_Support)，但是我找不到要从下载页面下载的 Mac OSX 二进制文件。有没有专门的地方可以拿到。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-28T09:06:27.403

这个问题很老，但是是谷歌上的第一个答案之一，所以一文不值：

*   Pyside 有一个 python 3 子目录，应该可以与 Python 3 一起使用
*   最后一次发布是 2013 年 8 月
*   官方存储库是 gitorius，而不是 github（github 是一个过时的副本）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T09:57:33.717

在没有自己测试的情况下，但在 qt 项目网站上[说明](http://wiki.qt.io/PySide_Python_3_Support)：

> PySide 从 1.0.8 版本开始支持 Python 3.2。如果 Python 3 支持有任何问题，应该在[Qt 项目错误跟踪器](https://bugreports.qt.io/)中报告。

“最后修改”日期为 2016 年 6 月

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T17:54:26.690

他们写：

已对 Python 3 支持进行了调查。根据调查，Python 3 的支持没有不可逾越的障碍。

[https://wiki.qt.io/PySide_Roadmap](https://wiki.qt.io/PySide_Roadmap)

[https://wiki.qt.io/PySide_Python_3_Issues](https://wiki.qt.io/PySide_Python_3_Issues)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T03:11:35.013

这里有一个类似的问题[Installing pyside with python3 on os x](https://stackoverflow.com/questions/14799514/installing-pyside-with-python3-on-os-x)

长话短说，答案是肯定的，它可以用 hombrew 安装。然而，PySide 的未来有些未知。据我所知，PySide 上没有积极的开发，可能是时候使用 PyQt，它实际上更容易安装。

# excel - VBA 作为 Excel 的数据源

> ID：11367253
> 
> 赞同：0
> 
> 时间：2012-07-06T17:49:45.633
> 
> 标签：excel, vba, pivot-table

我想让 VBA 为 Excel 数据透视表生成一些数据。然后 VBA 将重新计算数据，并且枢轴将基于此更新。

问题：是否可以让 VBA 成为数据透视的直接数据源，还是我需要在 VBA 的文件中写下来并让皮托管从那里自行刷新？直接数据源的优势在于我可以创建多维数据，而不仅仅是二维矩阵。

我可以看到我可以选择很多数据源，并且可以从 VBA 中以其中一种格式编写一些数据。

因此，例如，我可以选择从 VBA 生成一个 xml 文件，然后让一个数据透视表使用该 xml 文件作为其源。我想在 VBA 中从 SQL Server 模拟 OLAP 多维数据集是个坏主意！

达米安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:37:15.060

对于 OLAP 多维数据集，Microsoft Excel 是一个非常好的查看器，但如果您可以访问 Analysis Server 工具，您会更喜欢使用它。

但是，Excel 可以自己连接到 SQL Server。你有没有尝试过？它在数据菜单中。

# javascript - 类似github的浏览器向前/向后滑动页面效果

> ID：11367258
> 
> 赞同：1
> 
> 时间：2012-07-06T17:50:10.413
> 
> 标签：javascript, ajax, html, user-experience

在浏览存储库时，如何实现与 github 中的浏览器后退按钮/前进按钮类似的效果？

要体验它，试试这个： [https ://github.com/rogerdudler/git-guide](https://github.com/rogerdudler/git-guide)

并单击下面的任何 html 页面：它将顺利加载（我也不知道如何实现）并且您将能够使用浏览器的箭头来回滑动，就像您在 Flash 小程序中浏览一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:54:33.257

我相信他们正在使用[History API执行此操作](http://diveintohtml5.info/history.html)

其他相关答案：

*   [GitHub源码动态导航](https://stackoverflow.com/questions/4952554/github-source-dynamic-navigation)
*   [实现 github.com 文件无缝文件导航](https://stackoverflow.com/questions/4732407/implement-github-com-file-seemless-file-navigation)

# java - 查找网站访问者地理位置的解决方案

> ID：11367264
> 
> 赞同：3
> 
> 时间：2012-07-06T17:50:42.447
> 
> 标签：java, php, geolocation, ip, ip-geolocation

我知道有许多服务提供地理定位工具来确定用户从哪里访问。我正在开发的网站是一个在多个地区运行的电子商务网站。当访问者访问网站时，它应该确定他们来自哪里，并为用户显示相关的货币/语言。

过去我们使用过[maxmind](http://www.maxmind.com/)，但我想知道是否有更好的解决方案。我呼吁在该领域具有经验的开发人员分享他们的知识和专业知识，了解可用的解决方案以及各种解决方案的优缺点。

附加信息：有问题的网站主要在 Java (Spring) 和 PHP (Kohana) 的组合上运行，因此也可以考虑其中任何一个的库。如果我们可以获得访问者所在国家/地区的 ISO 代码，我们已经有一个解决方案来确定使用哪种货币。

* * *

**更新**
以为我会为访问此问题的任何人留下一个粗略的结果解释。

**地理位置：**我已经使用 freegoip 来检测用户位置，如该线程中所建议的那样。
**语言：**在确定用户使用哪种语言时，我使用 PHP 检查用户浏览器中设置的语言：[http ://www.php.net/manual/en/function.http-negotiate-language.php](http://www.php.net/manual/en/function.http-negotiate-language.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:55:03.450

在我工作的一个小型电子商务网站上，我们使用 Akamai 提供地理定位数据，这些数据将根据访问者所处的状态提供定制的广告和价格。查看更多信息：[http ://www.akamai.com/ html/技术/产品/personalization.html](http://www.akamai.com/html/technology/products/personalization.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-20T07:37:29.847

[IPGeolocation](https://ipgeolocation.io/)将是您更好的选择。他们建立自己的数据库并每周更新两次数据库。他们在国家一级有 99% 的准确率，在城市一级有 75% 的准确率。他们还提供付费和免费（每天 1000 个请求）API 计划，您可以在此处查看：[https](https://ipgeolocation.io/pricing.html) ://ipgeolocation.io/pricing.html 。

为了方便开发人员，IPGeolocation API 提供了一些适用于各种编程语言的 SDK：

*   [IP 地理定位 API Java SDK](https://ipgeolocation.io/documentation/ip-geolocation-api-java-sdk.html)
*   [IP Geolocation API C-Sharp dotNet SDK](https://ipgeolocation.io/documentation/ip-geolocation-api-c-sharp-dotnet-sdk.html)
*   [IP 地理位置 API Typescript SDK](https://ipgeolocation.io/documentation/ip-geolocation-api-typescript-sdk.html)
*   [IP 地理位置 API Javascript SDK](https://ipgeolocation.io/documentation/ip-geolocation-api-javascript-sdk.html)
*   [IP 地理定位 API PHP SDK](https://ipgeolocation.io/documentation/ip-geolocation-api-php-sdk.html)
*   [IP 地理位置 API JQuery SDK](https://ipgeolocation.io/documentation/ip-geolocation-api-jquery-sdk.html)

**获取 IP 地址地理位置信息的端点：**
此端点旨在从服务器端调用。

```
$ curl 'https://api.ipgeolocation.io/ipgeo?apiKey=API_KEY&ip=8.8.8.8' 
```

JSON 响应将是：

```
{
    "ip": "8.8.8.8",
    "hostname": "google-public-dns-a.google.com",
    "continent_code": "NA",
    "continent_name": "North America",
    "country_code2": "US",
    "country_code3": "USA",
    "country_name": "United States",
    "country_capital": "Washington",
    "state_prov": "California",
    "district": "",
    "city": "Mountain View",
    "zipcode": "94043",
    "latitude": "37.4229",
    "longitude": "-122.085",
    "is_eu": false,
    "calling_code": "+1",
    "country_tld": ".us",
    "languages": "en-US,es-US,haw,fr",
    "country_flag": "https://ipgeolocation.io/static/flags/us_64.png",
    "isp": "Level 3 Communications",
    "connection_type": "",
    "organization": "Google Inc.",
    "geoname_id": "5375480",
    "currency": {
        "code": "USD",
        "name": "US Dollar",
        "symbol": "$"
    },
    "time_zone": {
        "name": "America/Los_Angeles",
        "offset": -8,
        "current_time": "2019-01-14 03:30:00.135-0800",
        "current_time_unix": 1547465400.135,
        "is_dst": false,
        "dst_savings": 1
    }
} 
```

您还可以从整个响应中过滤特定参数。

获取访问者的位置后，您还可以使用以下简单代码根据他的语言/货币将他重定向到页面：

```
var request = new XMLHttpRequest(); 
request.onreadystatechange = function() { 
if (4 === this.readyState && 200 === this.status) { 
var json = JSON.parse(this.responseText); 
if (json.country_code2 == "FR" && window.location.hostname !== "http://fr.exmaple.com") { 
window.location.href = "https://fr.exmaple.com"; 
} else if (json.country_code2 == "US" && window.location.hostname !== "http://us.exmaple.com") { 
window.location.href = "https://us.exmaple.com"; 
} else if (json.country_code2 == "UK" && window.location.hostname !== "http://uk.exmaple.com") { 
window.location.href = "https://uk.exmaple.com"; 
}else { 
window.location.href = "https://exmaple.com"; 
} 
} 
} 
request.open("GET", "https ://api.ipgeolocation.io/ipgeo?apiKey=YOUR_API_KEY&fields=country_code2", false); 
request.setRequestHeader("Accept", "application/json"); 
request.send(); 
```

我希望这将是您的最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:05:28.630

我一直在从事一个需要地理定位的项目，不幸的是，我发现大多数服务都在[MaxMind](http://www.maxmind.com/)数据库上工作，最后我使用[了 freegeoip](http://freegeoip.net/static/index.html)，免费且迄今为止在我所在的地区精确。

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:35:22.613

对于语言，它应该来自浏览器。这比地理定位更有用、更准确。

例如，如果您带着笔记本电脑旅行并使用互联网，您可能希望以您所在国家的母语而不是您所在国家的母语来查看内容。

查看这个问题以获取更多信息：[Checking browser's language by PHP?](https://stackoverflow.com/questions/620276/checking-browsers-language-by-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-31T22:01:50.070

另一种选择是[http://ipinfo.io](http://ipinfo.io) API（我自己的服务）。这是 API 返回的示例。

```
$ curl ipinfo.io/8.8.8.8
{
  "ip": "8.8.8.8",
  "hostname": "google-public-dns-a.google.com",
  "loc": "37.385999999999996,-122.0838",
  "org": "AS15169 Google Inc.",
  "city": "Mountain View",
  "region": "CA",
  "country": "US",
  "phone": 650
} 
```

您还可以查询特定字段，例如本示例中的国家/地区：

```
$ curl ipinfo.io/8.8.8.8/country
US 
```

更多详细信息，请访问[http://ipinfo.io/developers](http://ipinfo.io/developers)。每天最多 1,000 个请求是免费的，您还可以注册付费计划（请参阅[http://ipinfo.io/pricing](http://ipinfo.io/pricing)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-06T16:45:04.327

正如我提到的，我们为这个确切的用例构建了[https://ipdata.co](https://ipdata.co)

```
$ip = '78.8.53.5';
$details = json_decode(file_get_contents("https://api.ipdata.co/{$ip}")); 
```

这将返回

```
{
    "ip": "78.8.53.5",
    "city": "G\u0142og\u00f3w",
    "region": "Lower Silesia",
    "country_name": "Poland",
    "country_code": "PL",
    "continent_name": "Europe",
    "continent_code": "EU",
    "latitude": 51.663,
    "longitude": 16.0757,
    "asn": "AS12741",
    "organisation": "Netia SA",
    "postal": "67-200",
    "currency": "PLN",
    "currency_symbol": "z\u0142",
    "calling_code": "48",
    "flag": "https://ipdata.co/flags/pl.png",
    "time_zone": "Europe/Warsaw"
} 
```

这有许多电子商务相关的数据点，特别是

*   货币符号
*   货币代码
*   国家标志图标
*   国家电话代码

货币符号`z\u0142`是兹罗提的 ASCII

```
zł 
```

# php - C2DM PHP 实现

> ID：11367269
> 
> 赞同：1
> 
> 时间：2012-07-06T17:51:08.797
> 
> 标签：php, android, android-c2dm

我尝试使用以下链接 [https://github.com/lytsing/c2dm-php中的 php 代码](https://github.com/lytsing/c2dm-php)

我得到的响应 http 代码为“0”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:10:05.213

我在以下链接 [http://code.google.com/p/plic-opensource-mti2012/source/browse/trunk/server/library/c2dm.php?r=72中找到了不同的 php c2dm 实现](http://code.google.com/p/plic-opensource-mti2012/source/browse/trunk/server/library/c2dm.php?r=72)

它现在工作正常。

# c# - 允许单词字符和一些特殊字符但没有逗号的正则表达式

> ID：11367274
> 
> 赞同：0
> 
> 时间：2012-07-06T17:51:24.990
> 
> 标签：c#, regex

我有一个名为“**分类**”的视图模型要在我的 MVC 网站中使用。

我正在尝试使用正则表达式属性验证此视图模型上名为“ **Description ”的属性。**

此“**描述**”属性的要求是：

*   仅允许以下字符：
    *   字母、数字、空格和以下任意字符 _ -+ ( ) /\

因此，这些值应该通过验证：

*   测试
*   测试1
*   测试1_
*   t(e_s)t1 i/s \good+-

这些应该失败：

*   t,测试
*   t.test
*   测试！
*   te!@#$%st

这是我到目前为止的正则表达式：

```
^[a-zA-Z0-9 _+-\/\\\(\)]+$ 
```

上面所有的预期值都通过了，但是应该失败列表中的前两个值（逗号和句点值）也通过了，这是错误的！这非常令人沮丧。

请让我知道我在正则表达式中遗漏了什么。

非常感谢提前，

米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:01:53.777

您需要在角色类中转义“-”破折号

```
^[a-zA-Z0-9 _+\-\/\\\(\)]+$ 
```

没有它你会得到：

> “+”和“/”之间的字符«+-/»**

# ruby-on-rails - 在rails中将图像放在导航栏上只显示图像名称而不显示图像

> ID：11367280
> 
> 赞同：1
> 
> 时间：2012-07-06T17:52:13.000
> 
> 标签：ruby-on-rails, image

我一直试图将其作为徽标放在导航栏上的图像仅显示名称。我在资产管道中有一个名为 images 的文件夹中的图像，我正在使用引导程序。我目前在我的代码中有这个：

```
`<%= link_to image_tag('WikiLogoFinal.jpg'), getting_started_path, id: "logo" %>` 
```

我的CSS如下：

```
#logo {
float: left;
margin-right: 10px;
font-size: 1.7em;
color: $niceBlandGreen;
text-transform: uppercase;
letter-spacing: -1px;
padding-top: 9px;
font-weight: bold;
line-height: 1;
&:hover {
font-size: 1.75em;
color: white;
background: $shinyOrange;
text-decoration: none;
}
} 
```

图像不是问题，因为我使用了不同的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:54:06.510

根据您所拥有的，您的代码应该可以工作。确保您的图像在

```
app/assets/images 
```

目录。此外，请检查以确保您启用了资产管道。去

```
config/application.rb 
```

看看你是否有这条线：

```
# Enable the asset pipeline
config.assets.enabled = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-04T22:45:37.190

为了将徽标或图像添加到导航栏中。为此，请执行以下步骤：

1.  打开您的 navbar.html.erb，通常这些文件位于视图中的 layout 文件夹下，然后查找 navbar-brand 类，例如，

```
<a class="navbar-brand" href="/"><img class="img-responsive2" src ="https://www.google.com.mx/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png"> BLOG</a>
```

2.  将以下代码添加到类 .navbar 下的 navbar.scss 文件中

    ```
    .img-responsive2 {
    display: inline-block;
    max-width: 20%;
    height: auto;} 
    ```

我希望按照上述步骤，您可以将图像或徽标添加到导航栏中

# c# - 比较两个 ExtendedProperty

> ID：11367281
> 
> 赞同：0
> 
> 时间：2012-07-06T17:52:15.997
> 
> 标签：c#

我在 C# 中工作，所以我有一个 ExtendedProperty 的定义列表，然后我拉出另一个 ExtendedProperty 列表。

所以 ExtendedProperty myprop & ExtendedProperty pullList

现在我想比较两个 ExtendedProperty。但是，两个扩展属性列表的顺序不同。我怎么能遍历两个列表并比较字段以查看它们是否匹配。

我想像定义列表 myProps 一样，检查第一个道具与所有从拉列表中的内容，看看它们是否匹配，然后转到第二个并与拉列表进行比较，依此类推。

我想我的逻辑是错误的，但我不知道如何进行编码。

Anyhelp将不胜感激如何编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:38:51.497

我会使用 LINQ 来比较这两个列表。LINQ 有几种方法可以对此有很大帮助。您可以使用 LINQ 的 except 方法或 Intersect 方法，具体取决于您的需要。您可以使用 Intersect 创建一个 List，其中包含两个 List 共享的公共值。您可以使用 except 创建一个列表，其中包含列表 A 中不在列表 B 中的值。这是一些示例的好网站：

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

# iphone - UIImage 中加载的图像在视网膜上像素化

> ID：11367283
> 
> 赞同：1
> 
> 时间：2012-07-06T17:52:19.117
> 
> 标签：iphone, image, retina-display, pixelate

我从一个也包含 jpg 图像的网络中解析了数据。问题是图像在视网膜显示器上看起来模糊/像素化。有什么解决办法吗？谢谢。

```
NSData *data = [NSData dataWithContentsOfURL:linkUrl];
            UIImage *img = [[UIImage alloc] initWithData:data];   

          //  detailViewController.faces.contentScaleFactor=[UIScreen mainScreen].scale;//Attampt to solve the problem

            detailViewController.faces.image=img; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:09:39.983

使用数据初始化图像后，使用正确的比例创建一个新图像，如下所示：

```
img = [UIImage imageWithCGImage:img.CGImage scale:[UIScreen mainScreen].scale orientation:img.imageOrientation]; 
```

...但请注意，除非您将其放大，例如通过在图像视图中拉伸它，否则图像现在将在视网膜显示器上显示一半大小。

# php - 我想改进的非常具体的 MySQL 查询

> ID：11367285
> 
> 赞同：3
> 
> 时间：2012-07-06T17:52:28.373
> 
> 标签：php, mysql

这是我的场景：我有一个包含事件的表，每个事件都有一个名为“created”的字段，其中包含创建该事件的时间戳。现在我需要从最新到最旧对事件进行排序，但我不希望 MySQL 将它们全部返回。我只需要给定时间间隔内的最新信息，例如 24 小时范围内（编辑：我希望有一个灵活的解决方案，不仅适用于 24 小时范围，而且可能每隔几个小时）。我只需要最后 10 天。我已经实现了这一点，但我确信以最低效的方式，也就是说，像这样：

```
$timestamp = time();

for($i = 0; $i < 10; $i++) {
    $query = "SELECT * FROM `eventos` WHERE ... AND `created` < '{$timestamp}' ORDER BY `created` DESC LIMIT 1";    
    $return = $database->query( $query );

    if($database->num( $return ) > 0) {
        $event = $database->fetch( $return );
        $events[] = $event;

        $timestamp = $timestamp - 86400;
    }
} 
```

我希望我足够清楚。谢谢，耶稣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:17:43.750

如果您有一个索引`created`作为前导列，MySQL 可能能够进行反向扫描。如果您有一个没有任何事件的 24 小时时段，则您可能会返回不是该时段的行。为了确保您在该期间获得一行，您确实需要在列上包含一个下限`created`，如下所示：

```
SELECT * FROM `eventos`
 WHERE ... 
   AND `created` <  FROM_UNIXTIME( {$timestamp} )
   AND `created` >= DATE_ADD(FROM_UNIXTIME( {$timestamp} ),INTERVAL -24 HOUR)
 ORDER BY `created` DESC
 LIMIT 1 
```

我认为这里性能的关键是索引`created`作为前导列，以及 WHERE 子句中引用的所有（或大多数）其他列，并确保您的查询使用该索引。

如果您需要不同的时间间隔，直到秒，这种方法可以很容易地推广。

```
SELECT * FROM `eventos`
 WHERE ... 
   AND `created` <  DATE_ADD(FROM_UNIXTIME({$timestamp}),INTERVAL  0*{$nsecs} SECOND)
   AND `created` >= DATE_ADD(FROM_UNIXTIME({$timestamp}),INTERVAL -1*{$nsecs} SECOND)
 ORDER BY `created` DESC
 LIMIT 1 
```

从您的代码来看，24 小时周期似乎是在任意时间有界的......如果时间函数返回例如 1341580800（'2012-07-06 13:20'），那么您的十个周期都将来自 13当天20点到次日13点20分。

（注意：请确保如果您的参数是 unix 时间戳整数，那么数据库会正确解释它。）

在单个查询中提取十行可能更有效。如果可以保证 'timestamp' 是唯一的，则可以制作这样的查询，但查询文本将比您现在拥有的要复杂得多。我们可以在每个周期内获取 MAX(timestamp_) ，然后将其加入以获取行......但这将非常混乱。

如果我要尝试拉出所有十行，我可能会尝试采用一种`UNION ALL`方法，虽然不是很漂亮，但至少可以调整。

```
SELECT p0.*
  FROM ( SELECT * FROM `eventos` WHERE ... 
            AND `created` <  DATE_ADD(FROM_UNIXTIME({$timestamp}),INTERVAL  0*24 HOUR)
            AND `created` >= DATE_ADD(FROM_UNIXTIME({$timestamp}),INTERVAL -1*24 HOUR)
          ORDER BY `created` DESC LIMIT 1
       ) p0 
 UNION ALL           
SELECT p1.*
  FROM ( SELECT * FROM `eventos` WHERE ... 
            AND `created` <  DATE_ADD(FROM_UNIXTIME({$timestamp}),INTERVAL -1*24 HOUR)
            AND `created` >= DATE_ADD(FROM_UNIXTIME({$timestamp}),INTERVAL -2*24 HOUR)
          ORDER BY `created` DESC LIMIT 1
       ) p1 
 UNION ALL           
SELECT p2.*
  FROM ( SELECT * FROM `eventos` WHERE ... 
            AND `created` <  DATE_ADD(FROM_UNIXTIME({$timestamp}),INTERVAL -2*24 HOUR)
            AND `created` >= DATE_ADD(FROM_UNIXTIME({$timestamp}),INTERVAL -3*24 HOUR)
          ORDER BY `created` DESC LIMIT 1
       ) p2 
 UNION ALL           
SELECT p3.*
  FROM ... 
```

同样，这可以概括为在几秒钟内作为参数传递。将 HOUR 替换为 SECOND，并将“24”替换为具有秒数的绑定参数。

它相当冗长，但它应该运行良好。

* * *

另一种在单个结果集中获取它的非常混乱和复杂的方法是使用内联视图来获取十个周期的结束时间戳，如下所示：

```
 SELECT p.period_end
       FROM (SELECT DATE_ADD(t.t_,INTERVAL -1 * i.i_* {$nsecs} SECOND) AS period_end
               FROM (SELECT FROM_UNIXTIME( {$timestamp} ) AS t_) t
               JOIN (SELECT 0 AS i_
                     UNION ALL SELECT 1
                     UNION ALL SELECT 2
                     UNION ALL SELECT 3
                     UNION ALL SELECT 4
                     UNION ALL SELECT 5
                     UNION ALL SELECT 6
                     UNION ALL SELECT 7
                     UNION ALL SELECT 8
                     UNION ALL SELECT 9
                    ) i
            ) p 
```

然后把它加入你的桌子......

```
 ON `created` < p.period_end
 AND `created` >= DATE_ADD(p.period_end,INTERVAL -1 * {$nsecs} SECOND) 
```

并为每个周期 GROUP BY p.period_end 拉回 MAX(created)，将其包装在一个内联视图中。

然后将其连接回您的表格以获取每一行。

但这真的非常非常混乱，难以理解，而且不太可能比你已经在做的更快（或更高效）。您可以做出的最大改进是运行 9 个查询所需的时间。

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:07:02.577

我会添加另一列是日期（不是时间），然后使用 MySQL“分组依据”来获取每个日期的最新信息。

[http://www.tizag.com/mysqlTutorial/mysqlgroupby.php/](http://www.tizag.com/mysqlTutorial/mysqlgroupby.php/)

本教程就是这样做的，但按产品类型而不是日期。这应该有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:12:23.373

假设您想要过去 10 天内每天的最新（创建日期最长）事件。

所以让我们每天获取最新的时间戳

```
$today = date('Y-m-d');
$tenDaysAgo = date('Y-m-d', strtotime('-10 day'));

$innerSql = "SELECT date_format(created, '%Y-%m-%d') day, MAX(created) max_created FROM eventos WHERE date_format(created, '%Y-%m-%d') BETWEEN '$today' and '$tenDaysAgo' GROUP BY date_format(created, '%Y-%m-%d')"; 
```

然后我们可以选择与这些创建日期匹配的所有事件

```
$outerSql = "SELECT * FROM eventos INNER JOIN ($innerSql) as A WHERE eventos.created = A.max_created"; 
```

我还没有机会对此进行测试，但原则应该足够健全。

如果您想按其他任意小时数进行分组，您可以更改 innerSql：

```
$fromDate = '2012-07-06' // or if you want a specific time '2012-07-06 12:00:00'
$intervalInHours = 5;
$numberOfIntervals = 10;

$innerSql = "SELECT FLOOR(TIMESTAMPDIFF(HOUR, created, '$fromDate') / $intervalInHours) as grouping, MAX(created) as max_created FROM eventos WHERE created BETWEEN DATE_SUB('$fromDate', INTERVAL ($intervalInHours * $numberOfIntervals) HOUR) AND '$fromDate' GROUP BY FLOOR(TIMESTAMPDIFF(HOUR, created, '$fromDate') / $intervalInHours)"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:01:45.697

您想要 10 天内的所有活动，还是 10 天内每天只需要一个活动？

无论哪种方式，请考虑[MySQL 的日期函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)以获得帮助。它应该可以帮助您获得所需的日期范围。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T18:51:10.257

试试这个：

```
 SELECT *
      FROM eventos
     WHERE created BETWEEN DATE_SUB(DATE(NOW()), INTERVAL 10 DAY) AND DATE_ADD(DATE(NOW()), INTERVAL 1 DAY)
  ORDER BY created DESC
     LIMIT 10 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T19:04:59.910

这是一个可以让您获得过去 10 天当天的第一个事件。

```
 SELECT *
    FROM eventos
   WHERE created BETWEEN DATE_SUB(DATE(NOW()), INTERVAL 10 DAY) AND DATE_ADD(DATE(NOW()), INTERVAL 1 DAY)
GROUP BY DATE(created)
ORDER BY MAX(created) DESC
   LIMIT 10 
```

# android - Android 4.x：在联系人中获取自定义帐户类型列表

> ID：11367289
> 
> 赞同：4
> 
> 时间：2012-07-06T17:52:36.387
> 
> 标签：android, android-syncadapter

我正在尝试为 android 编写自己的同步适配器。我正在从 SDK 中挖掘 Sample Sync Adapter，但它没有记录在案。我可以让联系人出现在联系人应用程序中。但我无法编辑它们或创建新的。

很难找到有关如何在默认联系人应用程序中列出我自己的帐户类型以供创建或使其可编辑的任何信息。我不想添加任何已被 android 支持的自定义字段和数据。

任何人都可以向我提供有关如何将我的同步适配器集成到默认联系人应用程序（如交换同步）的教程或示例吗？

*   AndroidManifest.xml 需要添加什么
*   需要在contacts.xml中添加什么
*   需要在syncadapter.xml 中添加什么
*   是否需要添加任何代码才能工作？

顺便说一句：
我不关心低于 ICS 的 android 版本。我到处读到 2.x 的联系人应用程序不支持此功能，但 3.x 及更高版本支持。2.x 不在讨论范围内，所以我正在寻找 ICS 方法来实现它。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T10:31:24.450

我想现在回答这个问题有点晚了，但我遇到了这个问题，终于解决了。在 android 4.x 中，您只能将联系人添加到 android 中的三种帐户。1) Google Account, 2) Exchange Account, 3) Writable account, 可写的意思是你的contacts.xml 文件应该包含`EditSchema`标签。此外，您应该将以下标记添加到清单文件中：

`<meta-data android:name="android.provider.CONTACTS_STRUCTURE" android:resource="@xml/contacts" />`

关于`EditSchema`，以下 URL 中有一个很好的示例：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.3_r1/packages/apps/Contacts/tests/res/xml/test_basic_contacts.xml](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.3_r1/packages/apps/Contacts/tests/res/xml/test_basic_contacts.xml)

您只需要复制上述 xml 文件的内容并将其粘贴到您的 contacts.xml 文件中。（如果需要，您可以自定义 xml）一切都完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:15:35.790

看看这个：

[在蜂窝中编辑自定义联系人](https://stackoverflow.com/questions/8343372/honeycomb-sync-adapter-features-for-editing-contacts)

我之前问过这个问题，我打开了一个赏金来得到答案。答案是，尽管 Honeycomb 中存在该功能，但在任何地方都没有记录。你需要通过代码来学习如何去做。

我现在发现有一些文档，例如这里：[关于社交网络 API 的博客](http://android-developers.blogspot.co.uk/2012/02/new-social-apis-in-android-ics.html)

# javascript - 提取函数会导致性能损失吗？

> ID：11367292
> 
> 赞同：4
> 
> 时间：2012-07-06T17:52:49.287
> 
> 标签：javascript, optimization, readability

我正在遍历一个大数组（10^5 项）并对每个数组执行操作。

```
for (var row in rows) {
  switch (operator) {
    case "op1":
      row += 1;
      break;
    case "op2":
      ...
    case "opN":
      break;
  }
} 
```

为了可测试性和可读性，我想将内部 switch 语句提取到它自己的函数中，所以循环看起来像

```
for (var row in rows) {
  this.updateRow(row, operator);
} 
```

与调用函数 10^5 次相关的开销是否会导致明显的性能损失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:05:39.187

内联函数总是比定义函数快一点。这是因为参数和返回之类的东西不需要在运行时从堆栈中推送和弹出。通常这对于较新的机器来说不是什么大问题，但是通过 10^5 次函数调用，您可能会看到一些性能下降。

我可能会保持它内联。并没有太大的伤害，每一点优化都有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:55:36.603

**是的**

使用 JSPerf 我在这里介绍了我的示例：http: [//jsperf.com/inline-switch-vs-switch-function](http://jsperf.com/inline-switch-vs-switch-function)

我用 4 个简单的算术运算符测试了内联 switch 语句，对照在一个包含 100k 项的数组上提取到它自己的函数的相同 switch 语句。我还使用随机开关运算符、最佳情况运算符（第一个开关选项）和最坏情况运算符（最后一个开关选项）对其进行了测试。

内联 switch 语句全面优于该函数，在最坏的情况下以约 150 ops/sec 的速度击败该函数，在最佳情况下以约 600 ops/sec 的速度击败该函数。

在这种情况下，内联 switch 语句会明显更快。

# android - 如何使 OpenGL 具有交互性？

> ID：11367293
> 
> 赞同：2
> 
> 时间：2012-07-06T17:52:49.263
> 
> 标签：android, opengl-es

我正在制作一个 Android 游戏应用程序，并使用 openGL 将 3D obj 模型加载到应用程序中。我想知道是否有人可以帮助我如何使这些对象具有交互性。我真正需要的只是让一个对象可点击，但是学习更多东西会很酷，比如在屏幕上拖动它等等。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:38:22.330

你想要的就叫采摘。

这不是一件容易的事，取决于您想要做的事情，您有多种选择。

问题：您想根据 2D 坐标（鼠标/触摸位置）在 3D 空间中选择一个对象。由于 2D 鼠标坐标，您会错过一个坐标来确定 3D 空间中的确切点击位置​​。

一种可能的选择是：

*   用特定颜色渲染您的对象（例如完全红色）
*   之后将当前显示缓冲区保存到变量
*   清除显示缓冲区并使用标准设置再次渲染模型（这是向用户显示的屏幕）
*   确定点击/触摸位置 将其转换为显示区域上的坐标
*   检查保存的显示缓冲区中此坐标处的颜色。如果这个位置的颜色是红色的，用户点击/触摸了一个对象

这种方法不是那么灵活，但与其他解决方案相比，实现非常简单。它是有限的，因为您只能检测使用过的是否点击/触摸了某个对象，但您无法确定对象上的确切位置。

另一种可能的选择是根据 2D 单击位置计算 3D 世界上的射线，然后确定 3D 空间中与该射线发生碰撞的所有对象。这称为光线拾取。[您可以在此处](http://content.gpwiki.org/index.php/OpenGL%3aTutorials%3aPicking)找到有关光线拾取的 OpenGL 教程

如果您不使用固定功能管道（例如，您使用自定义着色器等），示例使用`glRenderMode, glLoadName, etc.`可能不是最佳选择。

另一种选择是根据点击位置、视口和投影矩阵自己进行数学计算并计算光线矢量。如果你想这样做，[gluUnproject](http://www.opengl.org/sdk/docs/man/xhtml/gluUnProject.xml)的文档可以帮助你。

# c# - WPF - VirtualPanel / ZoomableCanvas - 在 ObservableCollection 中找到对象交集的最快方法？

> ID：11367294
> 
> 赞同：3
> 
> 时间：2012-07-06T17:52:56.337
> 
> 标签：c#, wpf, linq

我正在使用一个名为 ZoomableCanvas 的 WPF 控制器（请参阅[http://blogs.msdn.com/b/kaelr/archive/2010/08/11/zoomableapplication2-a-million-items.aspx](http://blogs.msdn.com/b/kaelr/archive/2010/08/11/zoomableapplication2-a-million-items.aspx)），它是一个虚拟化画布（渲染仅需要在显示区域中的内容）。我正在尝试实现一种方法，在给定视口矩形的情况下，在 ObservableCollection 中查找其顶部/左侧参数作为点与矩形相交的对象。我已经让它工作了，如下所示：

```
//This is all in a class that inherits from ObserableCollection<BlockTile> 
//Where blocktile is a struct-like class used to store brush and position info for the 
//tiles that make up our canvas content.

public IEnumerable<int> Query(Rect rectangle)
{
         rectangle.Intersect(Extent); //Extent is our total data set, in case the         
                                      //viewport pans past our data set. 

         foreach (BlockTile t in this)
         {
             if(rectangle.Contains(new Point(t.left, t.top)))
             {
                  yield return (int)this.IndexOf(t);
             }
         }
} 
```

这种方法的问题是我的 BlockTile 集合大约有 70,000 个项目，并且遍历整个数据集会降低性能。我试图弄清楚，给定一个 IEnumerable 对象，是否有一种方法可以在不迭代整个结果集的情况下过滤这些项目。我的猜测是否定的。

我的直觉说尝试按顺序插入数据，然后检索它变成将画布中的位置映射到插入顺序。然而，这是笨拙和不准确的。另一种选择是查询根数据源并返回到我们最初用于获取画布上位置的计算中。也有点笨拙，但至少我们正在删除完整的迭代。只是好奇LINQ是否有任何提示或技巧来替换foreach，但这实际上并没有在幕后进行foreach。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:23:46.403

正如@Kek 所暗示的那样，您想要的是分层碰撞结构，例如四叉树。我用谷歌搜索了一下，发现似乎是一个理想的实现（QuadTree 类无耻地从[GaryTexmo 的 Generic QuadTree](http://bytes.com/topic/c-sharp/insights/880968-generic-quadtree-implementation)中提取，我放在一起的示例代码）

此脚本的示例输出：

```
Filling tree with 10000 rectangles took 00:00:00.0066186
1000 queries of quadtree took 00:00:00.4597303 and avged 4334 hits per query 
```

代码：

```
void Main()
{
    var width = 10000;
    var height = 10000;
    var rectCount = 10000;
    var queryCount = 1000;
    var tree = new QuadTree<RectangleHolder>(0, 0, width, height);
    var rnd = new Random();
    var rects = Enumerable.Range(0, rectCount)
        .Select(_ => new { px = new []{rnd.Next(width), rnd.Next(width)}, py = new []{rnd.Next(height), rnd.Next(height)}})
        .Select(pts => new Rectangle(pts.px.Min(), pts.py.Min(), pts.px.Max() - pts.px.Min(), pts.py.Max() - pts.py.Min()))
        .ToList();
    var queryRanges = Enumerable.Range(0, queryCount)
        .Select(_ => new { px = new []{rnd.Next(width), rnd.Next(width)}, py = new []{rnd.Next(height), rnd.Next(height)}})
        .Select(pts => new Rectangle(pts.px.Min(), pts.py.Min(), pts.px.Max() - pts.px.Min(), pts.py.Max() - pts.py.Min()))
        .ToList();
    var sw = Stopwatch.StartNew();
    foreach (var rect in rects)
    {
        tree.Insert(new RectangleHolder(rect));
    }
    Console.WriteLine("Filling tree with {0} rectangles took {1}", rectCount, sw.Elapsed);
    sw.Restart();
    var totHits = 0;
    var res = new List<RectangleHolder>();
    foreach (var queryRect in queryRanges)
    {
        res.Clear();
        tree.GetObjects(queryRect, ref res);
        totHits += res.Count;
    }
    Console.WriteLine("{0} queries of quadtree took {1} and avged {2} hits per query", queryCount, sw.Elapsed, (totHits / queryCount));
}

public class RectangleHolder : IHasRectangle
{
    public RectangleHolder(Rectangle rect)
    {
        Rect = rect;
    }

    public Rectangle Rect {get; private set;}
}

public interface IHasRectangle
{
    /// <summary>
    /// The rectangle that defines the object's boundaries.
    /// </summary>
    Rectangle Rect { get; }
}

public class QuadTree<T> where T : IHasRectangle
{
    #region Constants
    // How many objects can exist in a QuadTree before it sub divides itself
    private const int MAX_OBJECTS_PER_NODE = 2;
    #endregion

    #region Private Members
    private List<T> m_objects = null;       // The objects in this QuadTree
    private Rectangle m_rect;               // The area this QuadTree represents

    private QuadTree<T> m_childTL = null;   // Top Left Child
    private QuadTree<T> m_childTR = null;   // Top Right Child
    private QuadTree<T> m_childBL = null;   // Bottom Left Child
    private QuadTree<T> m_childBR = null;   // Bottom Right Child
    #endregion

    #region Public Properties
    /// <summary>
    /// The area this QuadTree represents.
    /// </summary>
    public Rectangle QuadRect { get { return m_rect; } }

    /// <summary>
    /// The top left child for this QuadTree
    /// </summary>
    public QuadTree<T> TopLeftChild { get { return m_childTL; } }

    /// <summary>
    /// The top right child for this QuadTree
    /// </summary>
    public QuadTree<T> TopRightChild { get { return m_childTR; } }

    /// <summary>
    /// The bottom left child for this QuadTree
    /// </summary>
    public QuadTree<T> BottomLeftChild { get { return m_childBL; } }

    /// <summary>
    /// The bottom right child for this QuadTree
    /// </summary>
    public QuadTree<T> BottomRightChild { get { return m_childBR; } }

    /// <summary>
    /// The objects contained in this QuadTree at it's level (ie, excludes children)
    /// </summary>
    public List<T> Objects { get { return m_objects; } }

    /// <summary>
    /// How many total objects are contained within this QuadTree (ie, includes children)
    /// </summary>
    public int Count { get { return this.ObjectCount(); } }
    #endregion

    #region Constructor
    /// <summary>
    /// Creates a QuadTree for the specified area.
    /// </summary>
    /// <param name="rect">The area this QuadTree object will encompass.</param>
    public QuadTree(Rectangle rect)
    {
        m_rect = rect;
    }

    /// <summary>
    /// Creates a QuadTree for the specified area.
    /// </summary>
    /// <param name="x">The top-left position of the area rectangle.</param>
    /// <param name="y">The top-right position of the area reactangle.</param>
    /// <param name="width">The width of the area rectangle.</param>
    /// <param name="height">The height of the area rectangle.</param>
    public QuadTree(int x, int y, int width, int height)
    {
        m_rect = new Rectangle(x, y, width, height);
    }
    #endregion

    #region Private Members
    /// <summary>
    /// Add an item to the object list.
    /// </summary>
    /// <param name="item">The item to add.</param>
    private void Add(T item)
    {
        if (m_objects == null)
            m_objects = new List<T>();

        m_objects.Add(item);
    }

    /// <summary>
    /// Remove an item from the object list.
    /// </summary>
    /// <param name="item">The object to remove.</param>
    private void Remove(T item)
    {
        if (m_objects != null && m_objects.Contains(item))
            m_objects.Remove(item);
    }

    /// <summary>
    /// Get the total for all objects in this QuadTree, including children.
    /// </summary>
    /// <returns>The number of objects contained within this QuadTree and its children.</returns>
    private int ObjectCount()
    {
        int count = 0;

        // Add the objects at this level
        if (m_objects != null) count += m_objects.Count;

        // Add the objects that are contained in the children
        if (m_childTL != null)
        {
            count += m_childTL.ObjectCount();
            count += m_childTR.ObjectCount();
            count += m_childBL.ObjectCount();
            count += m_childBR.ObjectCount();
        }

        return count;
    }

    /// <summary>
    /// Subdivide this QuadTree and move it's children into the appropriate Quads where applicable.
    /// </summary>
    private void Subdivide()
    {
        // We've reached capacity, subdivide...
        Point size = new Point(m_rect.Width / 2, m_rect.Height / 2);
        Point mid = new Point(m_rect.X + size.X, m_rect.Y + size.Y);

        m_childTL = new QuadTree<T>(new Rectangle(m_rect.Left, m_rect.Top, size.X, size.Y));
        m_childTR = new QuadTree<T>(new Rectangle(mid.X, m_rect.Top, size.X, size.Y));
        m_childBL = new QuadTree<T>(new Rectangle(m_rect.Left, mid.Y, size.X, size.Y));
        m_childBR = new QuadTree<T>(new Rectangle(mid.X, mid.Y, size.X, size.Y));

        // If they're completely contained by the quad, bump objects down
        for (int i = 0; i < m_objects.Count; i++)
        {
            QuadTree<T> destTree = GetDestinationTree(m_objects[i]);

            if (destTree != this)
            {
                // Insert to the appropriate tree, remove the object, and back up one in the loop
                destTree.Insert(m_objects[i]);
                Remove(m_objects[i]);
                i--;
            }
        }
    }

    /// <summary>
    /// Get the child Quad that would contain an object.
    /// </summary>
    /// <param name="item">The object to get a child for.</param>
    /// <returns></returns>
    private QuadTree<T> GetDestinationTree(T item)
    {
        // If a child can't contain an object, it will live in this Quad
        QuadTree<T> destTree = this;

        if (m_childTL.QuadRect.Contains(item.Rect))
        {
            destTree = m_childTL;
        }
        else if (m_childTR.QuadRect.Contains(item.Rect))
        {
            destTree = m_childTR;
        }
        else if (m_childBL.QuadRect.Contains(item.Rect))
        {
            destTree = m_childBL;
        }
        else if (m_childBR.QuadRect.Contains(item.Rect))
        {
            destTree = m_childBR;
        }

        return destTree;
    }
    #endregion

    #region Public Methods
    /// <summary>
    /// Clears the QuadTree of all objects, including any objects living in its children.
    /// </summary>
    public void Clear()
    {
        // Clear out the children, if we have any
        if (m_childTL != null)
        {
            m_childTL.Clear();
            m_childTR.Clear();
            m_childBL.Clear();
            m_childBR.Clear();
        }

        // Clear any objects at this level
        if (m_objects != null)
        {
            m_objects.Clear();
            m_objects = null;
        }

        // Set the children to null
        m_childTL = null;
        m_childTR = null;
        m_childBL = null;
        m_childBR = null;
    }

    /// <summary>
    /// Deletes an item from this QuadTree. If the object is removed causes this Quad to have no objects in its children, it's children will be removed as well.
    /// </summary>
    /// <param name="item">The item to remove.</param>
    public void Delete(T item)
    {
        // If this level contains the object, remove it
        bool objectRemoved = false;
        if (m_objects != null && m_objects.Contains(item))
        {
            Remove(item);
            objectRemoved = true;
        }

        // If we didn't find the object in this tree, try to delete from its children
        if (m_childTL != null && !objectRemoved)
        {
            m_childTL.Delete(item);
            m_childTR.Delete(item);
            m_childBL.Delete(item);
            m_childBR.Delete(item);
        }

        if (m_childTL != null)
        {
            // If all the children are empty, delete all the children
            if (m_childTL.Count == 0 &&
                m_childTR.Count == 0 &&
                m_childBL.Count == 0 &&
                m_childBR.Count == 0)
            {
                m_childTL = null;
                m_childTR = null;
                m_childBL = null;
                m_childBR = null;
            }
        }
    }

    /// <summary>
    /// Insert an item into this QuadTree object.
    /// </summary>
    /// <param name="item">The item to insert.</param>
    public void Insert(T item)
    {
        // If this quad doesn't intersect the items rectangle, do nothing
        if (!m_rect.Intersects(item.Rect))
            return;

        if (m_objects == null || 
            (m_childTL == null && m_objects.Count + 1 <= MAX_OBJECTS_PER_NODE))
        {
            // If there's room to add the object, just add it
            Add(item);
        }
        else
        {
            // No quads, create them and bump objects down where appropriate
            if (m_childTL == null)
            {
                Subdivide();
            }

            // Find out which tree this object should go in and add it there
            QuadTree<T> destTree = GetDestinationTree(item);
            if (destTree == this)
            {
                Add(item);
            }
            else
            {
                destTree.Insert(item);
            }
        }
    }

    /// <summary>
    /// Get the objects in this tree that intersect with the specified rectangle.
    /// </summary>
    /// <param name="rect">The rectangle to find objects in.</param>
    /// <param name="results">A reference to a list that will be populated with the results.</param>
    public void GetObjects(Rectangle rect, ref List<T> results)
    {
        // We can't do anything if the results list doesn't exist
        if (results != null)
        {
            if (rect.Contains(m_rect))
            {
                // If the search area completely contains this quad, just get every object this quad and all it's children have
                GetAllObjects(ref results);
            }
            else if (rect.Intersects(m_rect))
            {
                // Otherwise, if the quad isn't fully contained, only add objects that intersect with the search rectangle
                if (m_objects != null)
                {
                    for (int i = 0; i < m_objects.Count; i++)
                    {
                        if (rect.Intersects(m_objects[i].Rect))
                        {
                            results.Add(m_objects[i]);
                        }
                    }
                }

                // Get the objects for the search rectangle from the children
                if (m_childTL != null)
                {
                    m_childTL.GetObjects(rect, ref results);
                    m_childTR.GetObjects(rect, ref results);
                    m_childBL.GetObjects(rect, ref results);
                    m_childBR.GetObjects(rect, ref results);
                }
            }
        }
    }

    /// <summary>
    /// Get all objects in this Quad, and it's children.
    /// </summary>
    /// <param name="results">A reference to a list in which to store the objects.</param>
    public void GetAllObjects(ref List<T> results)
    {
        // If this Quad has objects, add them
        if (m_objects != null)
            results.AddRange(m_objects);

        // If we have children, get their objects too
        if (m_childTL != null)
        {
            m_childTL.GetAllObjects(ref results);
            m_childTR.GetAllObjects(ref results);
            m_childBL.GetAllObjects(ref results);
            m_childBR.GetAllObjects(ref results);
        }
    }
    #endregion
}

public static class Ext
{
    public static bool Intersects(this Rectangle lhs, Rectangle rhs)
    {
        var noIntersect =
            (lhs.Right < rhs.Left) ||
            (rhs.Right < lhs.Left) ||
            (lhs.Bottom < rhs.Top) ||
            (rhs.Bottom < lhs.Top);
        return !noIntersect;
    }
} 
```

# java - 项目不会停止在 NetBeans 上运行

> ID：11367296
> 
> 赞同：0
> 
> 时间：2012-07-06T17:52:58.320
> 
> 标签：java

我开始编写一个小程序来了解更多关于 java 的知识，并尝试在不总是使用 NetBeans 的情况下手动设计我的布局。

问题是，当我运行我的项目并关闭它时，它不会停止在 NetBeans 中运行，所以每次我重新运行它都会创建另一个运行。通过搜索和查看我使用 NetBeans 创建的另一个 GUI，我想添加

```
 setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE); 
```

会做的伎俩，但我想我错了。

有人可以解释一下我应该怎么做吗？

这是我的程序的 SSCCE：[http ://pastebin.com/QhKpwdDw](http://pastebin.com/QhKpwdDw)

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:56:25.307

```
setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE); 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/WindowConstants.html#DISPOSE_ON_CLOSE](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/WindowConstants.html#DISPOSE_ON_CLOSE)

DISPOSE_ON_CLOSE

public static final int DISPOSE_ON_CLOSE dispose-window 默认的窗口关闭操作。注意：当 Java 虚拟机 (VM) 中的最后一个可显示窗口被处理掉时，VM 可能会终止。有关详细信息，请参阅 AWT 线程问题。

另请参阅：Window.dispose()、JInternalFrame.dispose()、常量字段值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:01:51.617

试试这个...

将它**放在 JFrame 的构造函数**或**扩展 JFrame 的类中**

`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:15:12.537

您可能想看看这个问题：[如何从代码中关闭 Java Swing 应用程序](https://stackoverflow.com/questions/258099/how-to-close-a-java-swing-application-from-the-code)，因为它通常处理关闭应用程序以及如何确保它完全终止。

但要快速回答您的问题，有几种选择。

## 选项1

由于您`JFrame`在课堂上进行扩展，因此您可以使用[`EXIT_ON_CLOSE`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html#EXIT_ON_CLOSE)退出。

```
setDefaultCloseOperation(EXIT_ON_CLOSE); 
```

**注意：** `EXIT_ON_CLOSE`退出所有`JFrames`应用程序，而不仅仅是应用程序。

## 选项 2

这很可能不是您想要的答案，但[`DISPOSE_ON_CLOSE`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/WindowConstants.html#DISPOSE_ON_CLOSE)只会关闭`JFrame`您正在应用它的答案。

如果您有多个`JFrames`open ，或者如果您有任何其他`Threads`，它们将继续运行并且程序不会结束。但是如果你只有一个`Thread`和一个`JFrame`，这将关闭应用程序。

```
setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE); 
```

## 我的偏好

我会选择选项 1，不同意其他人。它直接绑定到`JFrame`而不依赖于`WindowConstants`，这使事情变得更清洁和更可靠。但更重要的是，它会关闭*所有*窗口，而不仅仅是您应用它的窗口。

尽管看起来您只有一个窗口，但`Threads`您的程序中的其他地方可能还有其他内部，NetBeans 将其放入其中。

为确保一切都关闭，您要使用`EXIT_ON_CLOSE`.

## 额外的信息

有关如何`DISPOSE_ON_CLOSE`和`EXIT_ON_CLOSE`不同的讨论：http: [//www.coderanch.com/t/340183/GUI/java/DISPOSE-CLOSE-vs-EXIT-CLOSE](http://www.coderanch.com/t/340183/GUI/java/DISPOSE-CLOSE-vs-EXIT-CLOSE)

文档`JFrame's` `EXIT_ON_CLOSE`：[http ://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html#EXIT_ON_CLOSE](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html#EXIT_ON_CLOSE)

`DISPOSE_ON_CLOSE`关于和其他的文档：http `WindowConstants`: [//docs.oracle.com/javase/1.5.0/docs/api/javax/swing/WindowConstants.html#DISPOSE_ON_CLOSE](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/WindowConstants.html#DISPOSE_ON_CLOSE)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:26:12.487

正如您在此处看到的（[setDefaultCloseOperation 文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)），如果您想触发窗口侦听器（例如关闭数据库连接），可以使用 DISPOSE_ON_CLOSE。在这种情况下，选择 DISPOSE_ON_CLOSE 而不是 EXIT_ON_CLOSE 是有意义的。

PS：不要忘记`System.exit(0)`在窗口监听代码的末尾添加一个，以便应用程序退出。

# ruby - Nokogiri 和 Xpath 查询

> ID：11367298
> 
> 赞同：0
> 
> 时间：2012-07-06T17:52:59.740
> 
> 标签：ruby, xpath, nokogiri

我在循环中有这个 Xpath 查询，

```
//div[@class='listing_content'][#{i}]/div/div/h3/a/text() 
```

我想单独处理每个节点

问题是它提供了正确的节点，但同时所有这些节点。

还有什么时候`i > 1`，它什么也不返回？

```
for i in (1...30)
  name = page.xpath("//div[@class='listing_content'][#{i}]/div/div/h3/a/text()")
  puts "this is name"
  puts name

  #Get Business phone
  phone = page.xpath("//div[@class='listing_content'][#{i}]//span[@class='business-phone phone']/text()")
  puts "this is phone"
  puts phone

  #Get Business website(if any)
  puts "this is website"
  website = page.xpath("//div[@class='listing_content'][#{i}]//li[@class='website-feature']//@href")
  puts website
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:23:08.913

> 同样当 i > 1 时，它什么也不返回？

这是 XPath 中第二多的常见问题解答：

**使用**：

```
(//div[@class='listing_content'])[#{i}]/div/div/h3/a/text() 
```

**观察到的行为的原因是**在 XPath 中`[]`具有比`//`伪运算符更高的优先级（优先级）。

因此，在您的原始表达式中，您指定应该选择作为其父级`div[@class='listing_content']`的 -th 子级的每个元素。`i`

但是，在您正在使用的 XML 文档中，每个都`div[@class='listing_content']` 恰好是其父级的第一个（也是唯一一个）子级——因此，如果`i > 1`没有选择任何内容。

As in any other language, in order to override the default priority, we must use brackets.

# powershell - Powershell - 从注册表刷新 SNMP 或执行 SNMPServiceResetEvent

> ID：11367302
> 
> 赞同：2
> 
> 时间：2012-07-06T17:53:06.027
> 
> 标签：powershell, registry, snmp

我编写了一个 powershell 脚本，它为网络驱动程序编写注册表项以更改 DCB 设置。诸如打开和关闭 DCB、定义流量类别和带宽组之类的事情。将值写入注册表后，有时您无法通过 SNMP 远程查看更改。虽然这是不一致的。

我搜索了网络，看看是否有办法强制 SNMP 再次从注册表中获取其值。我们有一个脚本可以设置 SNMP 中的值，它会自动更改注册表。我试图采取相反的方式并在注册表中设置值并更新 MIB。我尝试在脚本中重置 SNMP 服务和网络设备，但没有成功。

> 修改注册表后，对名为“SNMPServiceResetEvent”的全局事件执行 SetEvent。（即，对该命名事件执行 CreateEvent，然后执行 SetEvent）。这应该会导致代理使用当前注册表值重新初始化。Jeff Kelley 微软/Windows CE 网络

我发现唯一听起来像我需要的是上面的引用，尽管进一步的研究表明他在谈论 C++ 或 C#。有没有办法按照他在powershell中的建议做？尽管我不确定它是否适合当前任务，但我找到了一个 New-Event 命令行开关。我试过的代码：

```
$snmpService = New-Event -sourceidentifier dcbScriptSnmpReset -sender     SNMPServiceResetEvent -messagedata "Reset SNMP to refresh Registry" 
```

虽然没有 Set-Event 命令行开关，但我不知道如何继续。

任何帮助或线索将不胜感激。

谢谢，马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:59:30.043

显然我误解了 SNMP 的工作原理，现在我可以通过启用和禁用网络适配器以及停止和启动 SNMP 服务来更新输入到注册表中的值：

```
Stop-Service $snmpService.Name
$adaptor = Get-WmiObject -Class Win32_NetworkAdapter | Where-Object {$_.DeviceID -eq     $deviceID }
$adaptor.Disable()
$adaptor.Enable()

Start-Service $snmpService.Name 
```

# google-places-api - Google Places API：页面令牌错误

> ID：11367307
> 
> 赞同：6
> 
> 时间：2012-07-06T17:53:33.663
> 
> 标签：google-places-api

我基本上是在谷歌地方 API 查询亚特兰大的商店。

```
https://maps.googleapis.com/maps/api/place/search/json?location=33.7488,-84.3874&radius=50000&sensor=false&key=YOUR_KEY_HERE&types=amusement_park|art_gallery|bakery|bar|beauty_salon|bicycle_store|book_store|bowling_alley|cafe|car_repair|car_wash|clothing_store|florist|furniture_store|gym|hair_care|home_goods_store|jewelry_store|laundry|liquor_store|museum|night_club|pet_store|pharmacy|restaurant|shoe_store|spa|store|veterinary_care|zoo 
```

这正如预期的那样返回带有页面令牌的结果，以使用相同的查询获取另一页数据。

```
https://maps.googleapis.com/maps/api/place/search/json?key=YOUR_KEY_HERE&page_token=PAGE_TOKEN_HERE 
```

根据他们的 API，第二个 URL 就是我获取第二页数据所需的全部内容。但它总是返回“REQUEST_DENIED”。

```
"{\n   \"html_attributions\" : [],\n   \"results\" : [],\n   \"status\" : \"REQUEST_DENIED\"\n}\n" 
```

目前尚不清楚为什么我的请求被拒绝。我没有接近我的每日限额。如果我尝试使用包含令牌的第一个 URL 中的所有给定参数运行第二个 URL，它就像我再次请求第一个页面并完全忽略 page_token 一样。

有没有人让这个page_token工作？！？！？！？！？！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T00:35:41.657

这是文档中的错误，将尽快修复。要使用的正确参数是`pagetoken`NOT `page_token`。

# jsf - 在 JSF 视图中迭代列表列表

> ID：11367309
> 
> 赞同：1
> 
> 时间：2012-07-06T17:53:42.597
> 
> 标签：jsf, uirepeat

我正在尝试使用 ui:repeat 标记在我的 JSF 视图上迭代 List>。它看起来像这样：

```
<h:form>
<ui:repeat value="#{myController.currentEntry.pages}" var="page" varStatus="pageStatus">
    <p:fieldset rendered="#{myController.currentEntryPage == pageStatus.index}">
         <ui:repeat value="#{page}" var="item" varStatus="itemStatus">
              <h:outputText value="#{itemStatus.index + 1}. #{item.anotherClass.text}" />
         </ui:repeat>
    <p:fieldset>
</ui:repeat>
</h:form> 
```

我的类项目，位于模型包中，包含对另一个类对象的引用，也在模型包中。我已经签入调试器，并且在返回到我的视图的重定向之前，myController.currentEntry.pages 格式正确。

但是，我收到以下错误：

```
javax.servlet.ServletException: /my_view.xhtml @10,109 value="#{itemStatus.index + 1}. #{item.anotherClass.text}": Property 'anotherClass' not readable on type models.AnotherClass
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:422)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    filters.Auth.doFilter(Auth.java:19)
    filters.Encoding.doFilter(Encoding.java:28) 
```

这是怎么回事？JSF 如何将 item 映射到 item.anotherClass？我知道 ui:repeat 充满了错误，但我发现没有一个指向这种问题。

有没有其他方法可以实现我想要做的事情？我的项目使用 Primefaces。它已接近尾声，甚至更接近交付期限，因此切换到另一个库不是一种选择。

编辑：我已经切换到一个更优雅的解决方案，不需要我迭代整个矩阵：

```
<ui:repeat value="#{myController.currentEntryPageItems}" var="item" varStatus="itemStatus"> 
```

getCurrentEntryPageItems() 是一个返回的方法`myController.currentEntry.pages.get(myController.currentEntryPage)`。

我仍然想知道是否可以使用 ui:repeat 完成 2d 迭代，所以我将保留这个问题。

# .htaccess - htaccess 重定向 .asp 页面，但允许使用带有变量的同一页面提供服务

> ID：11367311
> 
> 赞同：0
> 
> 时间：2012-07-06T17:53:51.680
> 
> 标签：.htaccess, isapi-rewrite

使用 htaccess (isapi) 我需要重定向 .asp 页面但保持 .asp 页面的变量不变。这听起来很简单，所以我认为是，但我的努力没有结果。

```
RewriteRule ^CodePage.asp$ ^NewCodePage.asp? [R=301,NC,L] 
```

我想将确切的 URL 明确匹配到新的 Root 登陆页面，但保留从 CodePage.asp 提供的所有动态页面不变。

```
e.g. http://www.domain.com/CodePage.asp?prodid=666 
```

我认为“$”符号可以实现这一点，但该规则也匹配所有完整路径动态页面并将它们推送到 NewCodePage.asp 页面。注意，我不想将变量传递给新页面，只是根登陆页面。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:29:33.227

```
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^CodePage\.asp$ NewCodePage.asp [R=301,NC] 
```

# android - 如何检查android中是否没有选中任何复选框？

> ID：11367313
> 
> 赞同：0
> 
> 时间：2012-07-06T17:53:52.977
> 
> 标签：android

我正在研究android项目。我有 3 页，其中每页包含一些描述，并在描述 5 到 8 个复选框下方。我将下一个按钮保留在每一页的顶部。我将选定的复选框 ID 存储在数组列表中。即，如果我选中复选框，则 id 将存储在 arraylist 中，如果我取消选中复选框，则 id 将从 arraylist 中删除。（我需要更多页面的选中复选框，因此需要此任务）。 **如果未选中任何复选框并单击下一步按钮，我想显示一条警报，提示“请至少选择一个”。如何检查是否未选中任何复选框以及如何显示警报框？**请帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:57:16.673

遍历您`ArrayList`的 ID 并检查是否选中了每个框。

```
boolean isChecked = false;
for (int id : yourArrayOfIds) {
    if (((CheckBox) findViewById(id)).isChecked()) {
        isChecked = true;
        break;
    }
}
// If isChecked==true, a box is checked. 
```

您可能还想检查[`CheckBox`](http://developer.android.com/reference/android/widget/CheckBox.html)对象是否`null`在使用`isChecked()`. 这只是一个初步的例子。

要显示您的警报，请使用类似[这样](http://www.wikihow.com/Show-Alert-Dialog-in-Android)的内容。还有很多其他教程和[文档](http://developer.android.com/guide/topics/ui/dialogs.html)。

# android - 如何将 XML 转换为 Android 二进制 XML

> ID：11367314
> 
> 赞同：5
> 
> 时间：2012-07-06T17:53:57.077
> 
> 标签：android, xml, binary

我正在创建一个可以部署 Android 应用程序的软件，但位于 apk 文件中的 AndroidManifest 是自定义二进制 XML 格式。我想知道的是是否有一个工具可以让我将自己的 AndroidManifest.xml 文件添加到 apk 中（添加时将其转换为 AXML），或者在任何地方解释格式以便我可以创建我的自己的转换器

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T17:15:05.373

使用 Android 打包工具 (aapt.exe) 解决了这个问题

```
aapt.exe package -f -m -J src -M AndroidManifest.xml -S res -A assets  -0 "" -I android.jar -F MyApp.apk 
```

根据[文档](http://manpages.org/aapt)：

```
-f
    force overwrite of existing files

-m
    make package directories under location specified by -J

-J
    specify where to output R.java resource constant definitions

-M
    specify full path to AndroidManifest.xml to include in zip

-S
    directory in which to find resources. Multiple directories will be scanned and the first match found (left to right) will take precedence

-A
    additional directory in which to find raw asset files

-0
    specifies an additional extension for which such files will not be stored compressed in the .apk. An empty string means to not compress any files at all.

-I
    add an existing package to base include set

-F
    specify the apk file to output 
```

这需要一个普通的 xml 清单并将其打包成二进制 XML 并将其插入到 apk 中。

不幸的是，它要求资源和资产存在（如果您在清单文件本身中引用它们）。我还必须将任何其他数据添加回 apk 文件。不理想，但至少有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:04:02.360

查看“apktool”：http: [//ibotpeaches.github.io/Apktool/](http://ibotpeaches.github.io/Apktool/)

> 它可以将资源解码为几乎原始的形式，并在进行一些修改后重建它们；它使逐步调试 smali 代码成为可能。此外，由于类似项目的文件结构和一些重复性任务（如构建 apk 等）的自动化，它还使使用应用程序变得更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-18T08:23:11.423

[xml2axml.jar](https://github.com/hzw1199/xml2axml)

经过大量研究，我在 Github 上找到了一个工具，它允许我们将 axml (Binary AndroidManifest.xml) 转换为 xml (Readable AndroidManifest.xml)，反之亦然。

[从此处](https://github.com/hzw1199/xml2axml/releases)**`xml2axml.jar`**的发布页面下载该工具的文件，然后您可以使用这些命令来解码 axml 和编码 xml 文件。

**将 xml 文件编码为 axml：**

```
java -jar xml2axml e [AndroidManifest-readable-in.xml] [AndroidManifest-bin-out.xml] 
```

**将 axml 文件解码为 xml：**

```
java -jar xml2axml d [AndroidManifest-bin-in.xml] [AndroidManifest-readable-out.xml] 
```

# testflight - 如何在 TestFlight 上安装以前的版本

> ID：11367315
> 
> 赞同：15
> 
> 时间：2012-07-06T17:53:59.793
> 
> 标签：testflight

我希望有些人安装最新版本而其他人安装以前的版本，所以我相应地设置了权限，希望用户可以自动定向到该版本。但是，testFlight 总是指向最新版本，其他用户会收到一条错误消息，说“您无权访问”......无论如何从设备安装以前的版本？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-22T04:43:48.677

只需按照步骤安装以前的版本。

1 - 进入试飞

2 - 点击您想要获取之前版本的应用程序。

3 - 点击后您会看到它的详细信息，在底部您会看到“以前的版本”按钮。

4 - 点击“以前的版本”。

5 - 将显示所有以前版本的列表，您可以从中安装任何以前的版本。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-02T23:51:15.973

我不知道自动在测试人员之间拆分版本，但您可以从 TestFlight 下载旧版本的应用程序。

在特定构建的权限页面上（从仪表板，选择构建，然后选择您所追求的应用程序的构建 - 点击最新构建旁边的更多按钮以显示其他构建）有一个标题为*共享此构建*的部分提供直接下载链接。如果是我，在这种情况下，我会避开 TestFlight 的自动通知系统并手动发送通知，包括每个测试人员的适当直接链接。如果您的交付系统允许，请将电子邮件回复地址设置为在构建的反馈页面上找到的地址，测试人员仍然可以通过回复您的（现在自定义的）公告电子邮件来发送反馈。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-03T10:20:29.270

我可以在*TestFlight*中安装以前版本的构建。我们可以无缝升级和降级到任何旧/新版本

要遵循的步骤，

1.  在 TestFlight iOS 应用中

2.  点击您要获取其先前版本的应用程序。

3.  点击后，您将看到它的详细信息，在顶部，您将能够看到“以前的版本”按钮。
4.  点击“以前的版本”。
5.  将显示所有以前版本的列表，您可以从中安装任何以前的版本。

检查屏幕截图以了解更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-27T07:32:48.247

看来今天没有办法安装旧版本（

# .htaccess - 修复 htaccess 中的重定向循环

> ID：11367317
> 
> 赞同：1
> 
> 时间：2012-07-06T17:54:02.790
> 
> 标签：.htaccess, redirect

我在谷歌和这里花了一些时间，搜索但我仍然无法解决我的困境。

我目前正在使用：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www.)?site.com$

RewriteRule ^(/)?$ ty [L]

http://www.site.com/ **Works**
http://www.site.com **Works**
http://site.com/ **Redirect Loop**
http://site.com **Redirect Loop**
https://www.site.com/ **Works**
https://www.site.com **Works** 
```

谁能帮我用我的 RewriteCond 摆脱循环？

最终结果应该是[http://site.com/ty/](http://site.com/ty/) [rest of url] **不是** [http://site.com/ty/ty/ty/ty/ty/ty/ty/ty/ty/](http://site.com/ty/ty/ty/ty/ty/ty/ty/ty/ty/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:26:12.510

试试这个

```
RewriteEngine on
RewriteRule ^$ ty [L] 
```

# c# - Windows 服务在进入/从睡眠或休眠模式唤醒时的行为如何？

> ID：11367318
> 
> 赞同：9
> 
> 时间：2012-07-06T17:54:22.093
> 
> 标签：c#, .net, windows-services

我有一个用 C# 编写的服务，当计算机进入睡眠模式时，它似乎并没有完全关闭。用户需要手动停止并重新启动服务以保留功能。我知道问题是什么，但我不知道在哪里解决它。Windows 服务在进入/退出睡眠和休眠时的行为如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T18:12:26.157

服务如何对电源事件做出反应？真的，*这取决于*。

在*您的*服务中，您可以通过在您的服务中处理它来处理休眠/挂起/等事件

```
 protected override bool OnPowerEvent(PowerBroadcastStatus powerStatus)
  { 
     //do stuff here
  } 
```

# html - 有没有办法根据 ID 名称中的特定单词来设置 ID 样式？

> ID：11367320
> 
> 赞同：0
> 
> 时间：2012-07-06T17:54:31.300
> 
> 标签：html, css

有没有办法根据 ID 名称中的特定单词来设置 ID 样式？

如果我有这样的事情：

```
<div id="name-of-id.1234">Something</div>
<div id="name-of-id.5678">Something</div>
<div id="name-of-id.4321">Something</div> 
```

通常我会这样设计：

```
div#name-of-id\.1234,
div#name-of-id\.5678,
div#name-of-id\.4321 {
    color: #F0F;
} 
```

但我更愿意做这样的事情：

```
div[# contains the word "name-of-id"] {
    color: #F0F;
} 
```

有没有办法在这样的 ID 中定位特定单词？

我对 html 的访问非常有限——我可以在布局中添加脚本/样式，但仅此而已。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:13:12.520

使用 CSS3 前缀[子字符串匹配属性选择器](http://www.w3.org/TR/selectors/#attribute-substrings)：

```
div[id^="name-of-id"] {
    color: #F0F;
} 
```

[当前所有浏览器都支持](http://www.caniuse.com/#feat=css-sel3)它。要获得旧版本 IE 的支持，请使用[Selectivizr polyfill](http://selectivizr.com/)。还有一个用于后缀 ( `[id$="..."]`) 和通用子字符串 ( `[id*="..."]`) 的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:58:38.130

如果您可以添加 javascript（并且您使用 jQuery），您*可以*添加如下内容：

```
$('div').each(function(){
    if(this.id.match('name-of-id')) {
        $(this).addClass('someClass');
    }
}); 
```

如果没有 jQuery，你可以这样做：

```
var elems = document.getElementsByTagName('div');
for(var i=0; i<elems.length; i++) {
    if(this.id.match('name-of-id')) {
        this.className = this.className + 'someClass';
    }
} 
```

然后用一个类来设计它们：

```
.someClass {
    /* your CSS styles */
} 
```

当然，`$('div')`如果您的页面包含很多它们，运行会很慢（就 javascript 而言），所以如果您可以缩小选择器范围，这可能是一个更可行的解决方案。

更重要的是，我知道没有一种方法可以单独匹配 CSS 中的部分 ID 名称。

# c# - 过程或函数 SP_XXX 指定的参数过多

> ID：11367323
> 
> 赞同：1
> 
> 时间：2012-07-06T17:54:42.600
> 
> 标签：c#, asp.net, sql-server-2008

我正在做一些项目并收到此错误消息：

*过程或函数 SP_XXX 指定了太多参数* 下面是我的 SQL 参数，我通过 ASP c# App 检查了许多站点，但一无所获:) 非常感谢您的帮助！

```
 cmd.Parameters.Add(new SqlParameter() { Value = user.CODE, ParameterName = "@CODE" });cmd.Parameters.Add(new SqlParameter() { Value = CODE, ParameterName = "@OLD_CODE" });
        cmd.Parameters.Add(new SqlParameter() { Value = COCODE, ParameterName = "@OLD_COCODE" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.COCODE, ParameterName = "@COCODE" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.MEMBERTYPE, ParameterName = "@MEMBERTYPE" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.ENNAME, ParameterName = "@ENNAME" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.ARNAME, ParameterName = "@ARNAME" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.NATIONALITY, ParameterName = "@NATIONALITY" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.GENDER, ParameterName = "@GENDER" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.SPECIAL, ParameterName = "@SPECIAL" });
        cmd.Parameters.Add(new SqlParameter() { Value = (object)user.BIRTHDATE ?? DBNull.Value, ParameterName = "@BIRTHDATE" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.Religion, ParameterName = "@RELIGION" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.QUALIFY, ParameterName = "@QUALIFY" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.MEMBERPOS, ParameterName = "@MEMBERPOS" });
        cmd.Parameters.Add(new SqlParameter() { Value = (object)user.JOINDATE ?? DBNull.Value, ParameterName = "@JOINDATE" });
        cmd.Parameters.Add(new SqlParameter() { Value = (object)user.EXPIRYDATE ?? DBNull.Value, ParameterName = "@EXPIRYDATE" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.POBOX, ParameterName = "@POBOX" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.WORKTEL, ParameterName = "@WORKTEL" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.HOMETEL, ParameterName = "@HOMETEL" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.MOBILE, ParameterName = "@MOBILE" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.FAX, ParameterName = "@FAX" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.EMAIL, ParameterName = "@EMAIL" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.WEBSITE, ParameterName = "@WEBSITE" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.ACCCODE, ParameterName = "@ACCCODE" });

        cmd.Parameters.Add(new SqlParameter() { Value = user.AMOUNT, ParameterName = "@AMOUNT" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.PAIDAMOUNT, ParameterName = "@PAIDAMOUNT" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.EMIRATE, ParameterName = "@EMIRATE" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.MILIT_NO, ParameterName = "@MILIT_NO" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.GRADE, ParameterName = "@GRADE" });

        //need job

        cmd.Parameters.Add(new SqlParameter() { Value = user.NEEDJOB, ParameterName = "@NEEDJOB" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.DEBIT, ParameterName = "@DEBIT" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.JOBNAME, ParameterName = "@JOBNAME" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.BNKNAME, ParameterName = "@BNKNAME" });
        cmd.Parameters.Add(new SqlParameter() { Value = (object)user.BNKAMOUNT ?? DBNull.Value, ParameterName = "@BNKAMOUNT" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.COMPAGNY, ParameterName = "@COMPAGNY" });
        cmd.Parameters.Add(new SqlParameter() { Value = (object)user.COMPAMOUNT ?? DBNull.Value, ParameterName = "@COMPAMOUNT" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.PRSN, ParameterName = "@PRSN" });
        cmd.Parameters.Add(new SqlParameter() { Value = (object)user.PRSNAMOUNT ?? DBNull.Value, ParameterName = "@PRSNAMOUNT" });
        if (user.PIC == null)
            cmd.Parameters.Add(new SqlParameter() { Value = DBNull.Value, ParameterName = "@PIC", SqlDbType = System.Data.SqlDbType.Image });
        else
            cmd.Parameters.Add(new SqlParameter() { Value = user.PIC, ParameterName = "@PIC" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.COMPANY, ParameterName = "@COMPANY" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.TYPEBLOOD, ParameterName = "@TYPEBLOOD" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.PASSPORTNUM, ParameterName = "@PASSPORTNUM" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.LEAVENUM, ParameterName = "@LEAVENUM" });
        cmd.Parameters.Add(new SqlParameter() { Value = user.POSBEFORE, ParameterName = "@POSBEFORE" });
 cmd.Parameters.Add(new SqlParameter() { Value = (object)user.LEAVEDATE ?? DBNull.Value, ParameterName = "@LEAVEDATE" });
        cmd.CommandType = System.Data.CommandType.StoredProcedure;
        cmd.CommandText = "SP_MSMEMBERS_UPDATE";
        cmd.Connection = con;
        string constr = ConfigurationManager.ConnectionStrings["ConnectionStrings"].ToString();
        con.ConnectionString = constr;
        con.Open();
        int x = cmd.ExecuteNonQuery();

        con.Close(); 
```

* * *

```
 ALTER PROCEDURE [dbo].[SP_MSMEMBERS_UPDATE] 
       (
 @CODE VARCHAR(10),
 @OLD_CODE VARCHAR(10),
 @COCODE INTEGER,
 @OLD_COCODE INTEGER,
 @MEMBERTYPE INTEGER,
 @ENNAME VARCHAR(40),
 @ARNAME VARCHAR(40),
 @NATIONALITY INTEGER,
 @GENDER VARCHAR(1),
 @SPECIAL VARCHAR(1),
 @BIRTHDATE DATETIME,
 @RELIGION INTEGER,
 @QUALIFY INTEGER,
 @MEMBERPOS VARCHAR(40),
 @JOINDATE DATETIME,
 @EXPIRYDATE DATETIME,
 @POBOX VARCHAR(15),
 @WORKTEL VARCHAR(30),
 @HOMETEL VARCHAR(30),
 @MOBILE  VARCHAR(30),
 @FAX  VARCHAR(30),
 @EMAIL VARCHAR(40),
 @WEBSITE VARCHAR(80),
 @ACCCODE VARCHAR(20),
 @AMOUNT NUMERIC(15,3),
 @PAIDAMOUNT NUMERIC(15,3),
 @EMIRATE INTEGER,
 @MILIT_NO VARCHAR(40),
 @GRADE VARCHAR(20)
 --new add
 ,@NEEDJOB VARCHAR(1) 
 ,@DEBIT VARCHAR(1)
 ,@JOBNAME varchar(20)
 ,@BNKNAME varchar(25)
 ,@BNKAMOUNT NUMERIC(15,3)
 ,@COMPAGNY nvarchar(25)
 ,@COMPAMOUNT NUMERIC(15,3)
 ,@PRSN varchar(30)
 ,@PRSNAMOUNT NUMERIC(15,3)
 ,@PIC image
 ,@COMPANY varchar(25)
 ,@TYPEBLOOD varchar(20)
 ,@PASSPORTNUM varchar(20)
 ,@LEAVENUM varchar(10)
 ,@POSBEFORE varchar(15)
 ,@LEAVEDATE datetime
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:55:11.320

抱歉发错帖子

其次，我运行 c# 代码如下：

```
public class MemberD
{
    public SqlCommand cmd = new SqlCommand();
    public SqlConnection con = new SqlConnection("ConStr");
    public SqlDataReader dr;

    public void UpdateMember(string CODE, int COCODE, Member user)
    {
        cmd.Parameters.Clear(); // Here's  the solution

        //Here I added my SQL parameters 
        cmd.CommandType = System.Data.CommandType.StoredProcedure;
        cmd.CommandText = "SP_MSMEMBERS_UPDATE";
        cmd.Connection = con;
        con.Open();
        cmd.ExecuteNonQuery();

        con.Close();
    }
} 
```

关键是我使用 SqlCommand 作为全局变量启动一次，所以当我使用两次更新方法或 GetByID 方法时，SQLCommand 变量也保留旧参数。因此，当您**传递的参数超过 SP 需要** 时，您会收到上述错误，所以我简单地添加了： **cmd.Parameters.Clear();** 在每个方法的开头。

现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:05:55.780

该错误通常表示具有比您的 SP 定义的更多的参数。

由于您没有提供足够的代码来确定地告诉您（提供更多的 cmd 代码块和至少 SP 的定义），我认为是这种情况。尤其是在提供了这么多参数的情况下。

我确实读到这也可能是处理 SqlDatasources 时引起的潜在问题。但是，由于您提供的代码有限，我只是指出这是一种可能性。

# java - 如何缩放 BufferedImage

> ID：11367324
> 
> 赞同：7
> 
> 时间：2012-07-06T17:54:52.687
> 
> 标签：java, swing, bufferedimage

我已经查看[了这个问题](https://stackoverflow.com/questions/4216123/how-to-scale-a-bufferedimage)，但它似乎并没有真正回答我的问题。我有一个图像文件，可能是任何分辨率。`BufferedImage`我需要将该图像以特定分辨率加载到对象中（例如，对于本示例，800x800）。我知道 Image 类可以用来`getScaledInstance()`将图像缩放到新大小，但是我不知道如何将它恢复为`BufferedImage`. 有没有一种简单的方法可以将缓冲图像缩放到特定大小？

**注意**II 不想按特定因子缩放图像，我想拍摄图像并制作特定尺寸。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T18:02:19.677

像这样的东西？：

```
 /**
 * Resizes an image using a Graphics2D object backed by a BufferedImage.
 * @param srcImg - source image to scale
 * @param w - desired width
 * @param h - desired height
 * @return - the new resized image
 */
private BufferedImage getScaledImage(Image srcImg, int w, int h){
    BufferedImage resizedImg = new BufferedImage(w, h, BufferedImage.TRANSLUCENT);
    Graphics2D g2 = resizedImg.createGraphics();
    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
    g2.drawImage(srcImg, 0, 0, w, h, null);
    g2.dispose();
    return resizedImg;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T18:01:50.500

您可以创建一个所需大小的新 BufferedImage，然后将原始图像按比例绘制到新图像中：

```
BufferedImage resizedImage = new BufferedImage(new_width, new_height, BufferedImage.TYPE_INT_ARGB); 
Graphics2D g = resizedImage.createGraphics();
g.drawImage(image, 0, 0, new_width, new_height, null);
g.dispose(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:03:12.527

看这个网站 [Link1](http://www.mkyong.com/java/how-to-resize-an-image-in-java/)

或者这个[链接2](http://www.java2s.com/Code/Java/Advanced-Graphics/ScalingaBufferedImage.htm)

# vba - Excel：如何根据第三个奇数/偶数参数列将一列拆分为两列？

> ID：11367330
> 
> 赞同：0
> 
> 时间：2012-07-06T17:55:15.620
> 
> 标签：vba, excel, excel-2007

我将参考下图： ![在此处输入图像描述](../Images/982d30a7fe2349e46eaf9536e4aeb44c.png)

我试图将 FirstValue 列拆分为它右侧的两列；但是，我想根据 Parameter 列拆分列。当 Parameter 值为奇数时，我只想将值复制到 OtherValue1 列。当参数值是偶数时，我只想将值复制到 OtherValue2 列。在阅读论坛并尝试了 excel 的“文本到列”功能后，我找不到解决方案。

有没有办法使用 VBA 实现这一点？

*注意：工作表实际上大约有 10,000 行长，因此速度也会有所帮助。

**编辑**：这是我到目前为止的代码。我在这行代码中遇到对象错误：`.Cells(2, MF1Col).Formula = "=IF(MOD(paraformula,2)=1,WTRfor,"")"`

```
 Dim rw As Worksheet
Dim secondCell, MF1Cell, MF2Cell, paraCell, MF1formula, MF2formula, paraformula, WTRfor As Range
Dim secondCol As Long, MF1Col As Long, MF2Col As Long, paraCol As Long
 Set rw = ActiveSheet

With rw

    Set secondCell = .Rows(1).Find("FirstValue”)

    ' Check if the column with “FirstValue” is found

    'Insert Two Columns after FirstValue
    If Not secondCell Is Nothing Then
        secondCol = secondCell.Column
        .Columns(secondCol + 1).EntireColumn.Insert
        .Columns(secondCol + 2).EntireColumn.Insert
        .Cells(1, secondCol + 1).Value = "OtherValue1"
        .Cells(1, secondCol + 2).Value = "OtherValue2"
        .Activate

    Set MF1Cell = .Rows(1).Find("OtherValue1")
    MF1Col = MF1Cell.Column
    Set MF2Cell = .Rows(1).Find("OtherValue2")
    MF2Col = MF2Cell.Column
    Set paraCell = .Rows(1).Find("Parameter")
    paraCol = paraCell.Column

    Set paraformula = Range(.Cells(2, paraCol).Address(RowAbsolute:=False, ColumnAbsolute:=False))
    Set MF1formula = Range(.Cells(2, MF1Col).Address(RowAbsolute:=False, ColumnAbsolute:=False))
    Set WTRfor = Range(.Cells(2, secondCol).Address(RowAbsolute:=False, ColumnAbsolute:=False))
    .Cells(2, MF1Col).Formula = "=IF(MOD(" & paraformula & ",2)=1," & WTRfor & ","""")"
    Range(.Cells(2, MF1Col).Address).Select
    Range(Selection, Selection.End(xlDown)).Select
    Selection.Copy
    ActiveSheet.Paste

    Set MF2formula = Range(.Cells(2, MF2Col).Address(RowAbsolute:=False, ColumnAbsolute:=False))
    .Cells(2, MF2Col).Formula = "=IF(MOD(" & paraformula & ",2)=0," & WTRfor & ","""")"
    Range(.Cells(2, MF2Col).Address).Select
    Range(Selection, Selection.End(xlDown)).Select
    Selection.Copy
    ActiveSheet.Paste   

End If
End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:05:09.267

在 C2 中，`=IF(MOD(E2,2)=1,B2,"")`
在 D2 中，`=IF(MOD(E2,2)=0,B2,"")`

将这些复制到数据的末尾

假设格式相同 (Data,Col1,Col2,Parameter)，但使用相对寻址
第 1 列：`=IF(MOD(OFFSET(C2,0,2),2)=1,OFFSET(C2,0,-1),"")` *将 C2 替换为当前单元格* 第 2 列：`=IF(MOD(OFFSET(D2,0,1),2)=0,OFFSET(D2,0,-2),"")` *将 D2 替换为当前单元格*

再次，复制和粘贴 - 一旦你正确地第一个，excel将调整当前单元格的公式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:05:26.723

对于单元格 D2：

```
 =IF(MOD(E2,2),B2,"") 
```

说明：如果 Range E2 不能被 2 整除，则显示 B2 的值，否则不显示。

您可以通过在单元格 C2 的 MOD 周围插入“NOT”来扭转这种情况：

```
 =IF(NOT(MOD(E2,2)),B2,"") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:29:32.893

VBA：

```
Sub odd_even()

a = 1                                                           ' start row
b = 10                                                          ' end row
c = 1                                                           ' column with values inputs

For d = a To b                                                  ' FOR loop from start row to end row

    If ActiveSheet.Cells(d, c) Mod 2 Then                       'mod becomes high when value is odd
        ActiveSheet.Cells(d, c + 2) = ActiveSheet.Cells(d, c)   'odd value gets copied to the odd-column   ( two to the right of the values)
        ActiveSheet.Cells(d, c + 3) = ""                        'same row on even-column gets cleared
    Else:
        ActiveSheet.Cells(d, c + 3) = ActiveSheet.Cells(d, c)   'even value gets copied to the even-column ( three to the right of the values)
        ActiveSheet.Cells(d, c + 2) = ""                        'same row on odd-column gets cleared
    End If

Next d                                                          ' go to next row

End Sub 
```

# javascript - jsp中的动态div

> ID：11367332
> 
> 赞同：0
> 
> 时间：2012-07-06T17:55:21.053
> 
> 标签：javascript, jquery, html, jsp

我正在尝试创建一个将逐步呈现的页面。用户选择某个选项，下一个 div 会根据所选值动态呈现在 jsp 页面上。例如

**我的页面.jsp**

```
<input type="button" onclick="somejsfunction();" value="Select Choice" /> 
```

`somejsfunction()`向服务器发出 a`POST`并在会话中设置一些值。然后我需要在`MyPage.jsp`. 我想我总是可以从 post 调用中吐出 HTML 代码，然后将其附加到文档正文中，`somejsfunction()`但我想知道是否有更清洁的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:59:24.067

使用 jQuery 更简洁

```
function callMe(){
    $.ajax({
      type: "POST",
      url: "/someServlet",
      data: { methodToInvoke: "sayHello" , data: "Abc" }
    }).done(function( msg ) {
      //msg is the HTML received from server
      $("#someDivId").html(msg);
    });
} 
```

# css - 带有图像的 div 内的 div

> ID：11367334
> 
> 赞同：0
> 
> 时间：2012-07-06T17:55:30.860
> 
> 标签：css, html

很简单，但它让我发疯

我在一个 div 里面有一个 div，里面有一个图像，我需要在右下角对齐那个子 div（稍后我将重现相同的内容，但将 div 对齐到 div 的四个角中的任何一个）。

```
<div class="parent">
    <img src="someimage.jpg" />
    <div class="child">
        <b>Hi there !</b>
    </div>
</div> 
```

父 div 和图像具有相同的尺寸（900w x 300h），子 div 为 100w x 50h。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:57:19.800

您希望将 div*绝对*定位到父 div 的右下角。

```
.parent {
    height: 200px;
    border: 1px solid;
    position: relative;
}

.child {
    position: absolute;
    right: 0;
    bottom: 0;
}
​ 
```

[**演示**](http://jsfiddle.net/eqha4/)

对于其他角，您也可以设置`left`和`top`定位。

# dns - 在权威 DNS 服务器中创建一个包罗万象的区域

> ID：11367338
> 
> 赞同：0
> 
> 时间：2012-07-06T17:55:43.827
> 
> 标签：dns, bind

`@ CNAME example.com.`除非另有说明，否则我希望有一个返回所有请求的 DNS 服务器。这将用作未自定义 DNS 的客户端的权威服务器。

是否可以将 BIND 配置为为没有自己的区域文件的任何请求提供一个包罗万象的区域文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:43:23.147

您应该能够添加通配符`CNAME`记录。

```
*.example.com.    IN      CNAME       example.com. 
```

# html - CSS3 中 ul li:hover 上的背景颜色填充错误？

> ID：11367340
> 
> 赞同：1
> 
> 时间：2012-07-06T17:55:45.623
> 
> 标签：html, css, sass, menubar

我尝试使用 CSS 设计一个带有 HTML 表格的水平菜单栏。但是**填充**并没有按照我认为的方式工作：当我试图改变整个 li 的背景颜色时，当用户用鼠标“悬停”它时。但是填充似乎出错了。

这是我在 CSS 中的代码（使用 Sassy CSS）：

```
/* just to be sure the default of browser doesn't change look */
* {
    margin:0;
    padding:0;
}

/* some other design code ... */

#nav-menu {
    padding:5px;
    text-align:center;

    /* change background: browser specific gradient */
    background:$menu-bgcolor;

    li {
        list-style:none;
        display:inline;
        padding:2px 10px 2px 10px;

        :hover {
            background-color:$deco-dark;
            color:$deco-verylight;
        }
    }           
} 
```

但结果如下所示：

![悬停状态的菜单项——您可以看到填充并未覆盖所有 li 区域。](../Images/ff1cfaf618dc053e1a79c545f3096348.png)

正如您所看到的，`$deco-dark`在这种情况下，更改的背景颜色不会影响整个`li`区域（具有渐变的区域），正如我所期望的那样。我能做些什么来改变这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:44:20.973

使用 SASS，以下内容：

```
li {
  :hover { } } 
```

将`:hover`样式*应用于*`li`. _ 你需要的是

```
li {
  &:hover {} } 
```

它将在悬停时将样式应用于`li`元素本身。目前，该样式可能仅`a`应用于`li`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:06:03.387

尝试将您的 li 更改为`display: inline-block;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:40:34.853

您也可以在 li 中放置锚点，然后相应地设置锚点的样式。这是我通常做的。另外，就像 Brant 说的，您使用的是列表还是表格？列表可能更好，并且是您已实现的，因此只需使用它。

# c# - C# 将集合作为接口集合传递

> ID：11367341
> 
> 赞同：9
> 
> 时间：2012-07-06T17:55:45.847
> 
> 标签：c#, collections, interface, decoupling

我在下面的代码中简化并重现了我的问题。我收到的错误是：参数 1：无法从 'System.Collections.ObjectModel.Collection' 转换为 'System.Collections.ObjectModel.Collection

导致此问题的设计决策的一些背景：我创建了一个用于处理“IFruit”的 Web 服务，但由于 SOAP 和端点绑定的性质，据我所知，我创建了具有 IFruit 显式实现的方法。在业务层上，为每个水果的具体实现创建一个单独的方法首先会导致大量重复代码，其次业务和服务层耦合得足够紧密，以至于以后在 Web 服务中接受新的 IFruit 类型也需要更改我的代码在业务层中（添加另一个冗余代码副本）。这种设计是我过去使用 Java 成功实现的设计，但 C# 接口似乎完全不同，足以让我失望。请指教。

```
public interface IFruit{
    public string TakeBite();
}

public Apple : IFruit{
    public string TakeBite(){
        return "tasty bite of apple";
    }
}

public void EatFruit(Collection<IFruit> fruits){
    foreach(var fruit in fruits){
        Console.WriteLine(fruit.TakeBite());
    }
}

public void EatApples(Collection<Apple> apples){
    this.EatFruit(apples);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T18:00:04.930

尝试改变你`EatFruit`的接受方式`IEnumerable<IFruit>`

```
public void EatFruit(IEnumerable<IFruit> fruits)
{
    foreach (var fruit in fruits)
    {
        Console.WriteLine(fruit.TakeBite());
    }
} 
```

该接口`IEnumerable<out T>`支持协方差，因为它用`out`修饰符标记。 `Collection<T>`没有标记这样的修饰符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:58:06.310

这叫做协方差。
但是，使用可变集合是不可能的。

否则，`EatFruit`可以写

```
fruits.Add(new Orange()); 
```

.Net 4 确实支持纯接口的协方差，因此您可以将其更改为`IEnumerable<IFruit>`它会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:16:56.077

简单的解决方案：

```
public void EatApples(Collection<Apple> apples){
     this.EatFruit(
          new Collection<IFruit>(
              apples.Cast<IFruit>()
          )
     );
} 
```

更好的解决方案：使用 C# 4 中引入的协方差：参见*Kevin*的回答

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:09:59.700

除了使用 IEnumerable 之外，您还可以键入检查集合（有点可怕，但它应该可以工作）：

```
public void EatApples(Collection<IFruit> fruit)
    var col = new Collection<IFruit>();

    fruit.Where(x => x is Apple).ToList().ForEach(x => col.Add(x));

    this.EatFruit(col);
} 
```

虽然我会改用 IEnumerable - 如果你不能重构，这只是一个选项：P

（它和你做的一样安全！）

# regex - 如何使用正则表达式操作文本文件？

> ID：11367347
> 
> 赞同：0
> 
> 时间：2012-07-06T17:56:14.920
> 
> 标签：regex, text-files

我将所有推文导出到一个文本文件，但我想对其进行一些操作以不同的格式。在我看来，最简单的方法是使用正则表达式，但我对它们没有太多经验。

当前格式：

```
User: Jack
Text: Hello world!
Created At: July 06 22:55:33 2012

---

User: Jill
... 
```

格式我想得到它：

```
Hello World!

July 06, 2012 at 10:55PM via [Jack](http://twitter.com/Jack)

---

... 
```

谁能帮我弄清楚正则表达式是什么？最棘手的部分是将时间戳形式从 24h 更改为 12h。我也想颠倒顺序（最近的在底部而不是在顶部），但我不确定这样做有多容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:29:28.783

重新排序，但将时间保留为 24 小时：

搜索：`User: (.+)\nText: (.+)\nCreated At: (\w+ \d+) (\d+:\d+:\d+) (\d+)\n`

代替：`\2\n\n\3, \5 at \4 via [\1](http://twitter.com/\1)\n`

替换模式可能需要`$1`代替`\1`等，具体取决于正则表达式的风格。

第 1 组是用户名

第 2 组是文本

第 3 组是月份和月份中的某天

第 4 组是一天中的时间

Group 5 is year

Converting 24h to 12h using simple regex is possible, but best done with the help of a programming language.

# php - 计算 30 天前 PHP

> ID：11367348
> 
> 赞同：-1
> 
> 时间：2012-07-06T17:56:15.953
> 
> 标签：php, mysql, function, triggers, cron

我正在从我的数据库中提取 lastBillingDate。这是一个正常的时间戳。我想让系统检查时间戳是否是 30 天前。基本上，我们每 30 天向客户收费一次。我想要的是它在日期正好是 30 天或超过 30 天时触发该功能。这似乎不起作用。这也是我的时间戳之一的示例：

```
1339477200 
```

这是 cron 函数：

```
 $query = "SELECT * FROM contacts";
                $result = mysql_query($query);      

                while($row = mysql_fetch_row($result)){

                        $id = $row[0];
                        $ownerID = $row[1];
                        $company = $row[4];
                        $lastBillDate = $row[36];

                        echo $lastBillDate.'<br>';

                    if($lastBillDate<strtotime('-30 days')){
                        $billdate = RelativeTime($lastBillDate);

                                    mailBillNotice($id, $ownerID, $company, $billdate);
                    }

                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:03:43.517

恕我直言，最好将该条件放在 SQL 查询中。

```
SELECT * FROM contacts WHERE last_bill_date <= UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 30 DAY)) 
```

这将只`last_bill_date`返回从今天起 30 天或更长时间的联系人。然后执行您需要的任何处理，向客户收费，并更新时间戳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:59:03.827

看到它只是一个数字，您可以在时间戳上使用普通算术：

```
$timestamp = 1339477200;
$thirtyDays = (60 * 60 * 24 * 30)
$thirtyDaysAgo = time() - (60 * 60 * 24 * 30)

if($timestamp - $thirtyDays <= $thirtyDaysAgo) {
    // Do your thang
} 
```

然而，在 MySQL 中执行此操作更为明智。它消除了从数据库中获取额外行的开销。尝试这个：

```
SELECT * FROM contacts 
WHERE 
    last_bill_date <= UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 30 DAY)) 
```

# java - Ploeh 的 AutoFixture for .Net 是否有 Java 替代品？

> ID：11367349
> 
> 赞同：24
> 
> 时间：2012-07-06T17:56:20.647
> 
> 标签：java, unit-testing, mocking, quickcheck, autofixture

我正在寻找一种 Java 工具，它可以在我的测试中创建[匿名变量](http://blogs.msdn.com/b/ploeh/archive/2008/11/17/anonymous-variables.aspx)（我不关心其值的变量），类似于 .Net 中的 AutoFixture。这是[AutoFixture 的自述文件](https://github.com/AutoFixture/AutoFixture#readme)的链接，其中有很好的例子来说明它的作用。

这是取自同一个自述文件的一个简短示例：

```
[TestMethod]
public void IntroductoryTest()
{
    // Fixture setup
    Fixture fixture = new Fixture();

    int expectedNumber = fixture.CreateAnonymous<int>();
    MyClass sut = fixture.CreateAnonymous<MyClass>();
    // Exercise system
    int result = sut.Echo(expectedNumber);
    // Verify outcome
    Assert.AreEqual<int>(expectedNumber, result, "Echo");
    // Teardown
} 
```

Java世界有这样的工具吗？

**编辑：**

我尝试了 QuickCheck，虽然它设法完成了我正在寻找的事情：

```
import net.java.quickcheck.Generator;
import net.java.quickcheck.generator.PrimitiveGenerators;
import net.java.quickcheck.generator.support.ObjectGeneratorImpl;

public class Main {

interface Test{
     String getTestValue();
}

public static void main(String[] args) {
    Generator<String> stringGen = PrimitiveGenerators.strings(5, 100);
    Generator<Integer> intGen = PrimitiveGenerators.integers(5, 20);

    ObjectGeneratorImpl<Test> g = new ObjectGeneratorImpl<>(Test.class);
    g.on(g.getRecorder().getTestValue()).returns(stringGen);

    for (int i = 0; i < intGen.next(); i++) {
        System.out.println("value of testValue is: " + g.next().getTestValue());
    }
}

} 
```

该工具似乎只适用于接口。如果我将 Test 更改为类并将方法更改为字段，则生成器会引发仅支持接口的异常。

我真诚地希望有更好的东西，特别是因为文档严重缺乏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-09T12:13:36.107

还有 JFixture 可以在[github](https://github.com/FlexTradeUKLtd/jfixture)上找到并发布到[maven central](http://javalibs.com/artifact/com.flextrade.jfixture/jfixture)。

这仍在积极开发中，并且正在满足功能请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-23T12:45:33.567

伊万，

我开始了一个[项目，专注于在 java 中重新实现 AutoFixture 的核心功能](https://github.com/grzesiek-galezowski/AutoFixtureGenerator)。AutoFixture 肯定有很多特性，所以我需要优先考虑哪些要先实现，哪些根本不去实现。由于项目刚刚开始，我欢迎测试、缺陷报告和功能请求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-03T13:39:09.230

我在 Mockito [.spy () 上使用](https://github.com/mockito/mockito "Mockito")[JFixture](https://github.com/FlexTradeUKLtd/jfixture "夹具") ;)

让我们看一个示例，如何使用 AutoFixture 和 C# 做一些简单的事情。这里的想法是在您的对象中生成随机数据，除了一些需要具有特定值的特定方法。有趣的是，我没有发现某处说明了这一点。这种技术消除了单元测试的“排列”部分，使其成为少量的行，此外还侧重于该单元测试需要特定的值才能通过

```
public class SomeClass {
    public int id; //field I care
    public String name; // fields I don't care
    public String description; //fields I don't care

    public int getId(){
        return id;
    } 

    public void setId(int id){
        this.id = id;
    }

    public String getName(){
        return name;
    }

    public void setName(String name){
        this.name = name;
    }

    public String getDescription(){
        return description;
    }

    public void setDescirption(String description){
        this.description = description;
    }
}

public static void main(String args[]){
    JFixture fixture = new JFixture();
    fixture.customise().circularDependencyBehaviour().omitSpecimen(); //omit circular dependencies
    fixture.customise().noResolutionBehaviour().omitSpecimen(); // omit methods that cannot be resolved
    SomeClass entity = fixture.create(SomeClass.class);
    SomeClass mock = Mockito.spy(entity);
    Mockito.when(mock.getId()).thenReturn(3213);

    System.out.println(mock.getId()); // always 3213
    System.out.println(mock.getName()); // random
    System.out.println(mock.getDescription()); //random
} 
```

这打印：

```
3213
name9a800265-d8ef-4be9-bd45-f0b62f791d9c
descriptiona9f9245f-eba1-4805-89e3-308ef69e7091 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-10T21:57:33.170

试试对象工厂。[它在github](https://github.com/leakingtapan/rof)上开源。它可以在一行代码中创建随机的 Java 对象。它是高度可配置的。

例子：

```
ObjectFactory rof = new ReflectionObjectFactory();

String str = rof.create(String.class);
Customer cus = rof.create(Customer.class); 
```

它也可以在 Maven 中央存储库中使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T19:26:13.877

QuickCheck 有一个 Java 实现，它具有用于生成测试数据的 API：

[http://java.net/projects/quickcheck/pages/Home](http://java.net/projects/quickcheck/pages/Home)

我对 AutoFixture 不太熟悉，我怀疑 QuickCheck 是一种略有不同的测试框架，但它可能对解决您的特定问题很有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-11T08:33:54.053

ObjectGenerator 更像是一个实验性功能：

```
ObjectGenerator<Test> objects = PrimitiveGenerators.objects(Test.class);
objects.on(objects.getRecorder().getTestValue()).returns(PrimitiveGenerators.strings());

Test next = objects.next();
System.out.println(next.getTestValue()); 
```

我更喜欢一个简单的生成器实现：

```
class TestGenerator implements Generator<Test>{
    Generator<String> values = PrimitiveGenerators.strings();
    @Override public Test next() {
        return new TestImpl(values.next());
    }   
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T00:09:34.693

[然而，Another QuickCheck for Java](http://sourceforge.net/projects/yaqc4j/)是另一个您可能会看一看的工具。

它与 JUnit 非常集成（它支持带参数的测试、注释以配置生成的对象等）。

它有很多生成器（都是 quickcheck，还有一些特定于 OOP，例如接口、抽象类和单例生成器），您可以定义自己的生成器。还有一个基于构造函数的生成器。

目前处于 alpha 状态，但如果您查看[下载页面](http://sourceforge.net/projects/yaqc4j/files/Documentation.html/download)，您会看到基本文档。

# .net - EF 总是生成初始模式

> ID：11367353
> 
> 赞同：1
> 
> 时间：2012-07-06T17:56:58.817
> 
> 标签：.net, entity-framework, migration, ef-code-first, database-schema

我一直在使用 EF 4.3.1 并取得了很大的成功。今天，尽管当我更新其中一个表时，整个模式正在生成，而不仅仅是为单个表更新。

如何防止生成整个架构？

我以前见过一次或两次，我通常只是删除文件并再次运行 add-migration ，看起来还不错。

任何想法为什么会发生这种情况。

# c - 获取所有 Xorg 显示器的列表

> ID：11367354
> 
> 赞同：16
> 
> 时间：2012-07-06T17:57:01.523
> 
> 标签：c, linux, unix, xorg, window-managers

我想知道如何获得系统上所有 Xorg 显示器的列表，以及与每个显示器关联的屏幕列表。我花了一些时间浏览 Xlib 文档，但找不到可以满足我需求的函数。请假设除了符合 POSIX 的操作系统和 X（例如，没有 GTK）之外，我没有其他依赖项。如果假设这些最小依赖项不可能实现我的要求，那么使用其他库的解决方案就可以了。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-06T18:49:54.123

我知道获取显示列表的唯一方法是检查`/tmp/.X11-unix`目录。

完成此操作后，您可以使用 Xlib 查询每个显示以获取更多信息。

每个例子：

```
#include <stdio.h>
#include <dirent.h>
#include <string.h>
#include <X11/Xlib.h>

int main(void) {
    DIR* d = opendir("/tmp/.X11-unix");

    if (d != NULL) {
        struct dirent *dr;
        while ((dr = readdir(d)) != NULL) {
            if (dr->d_name[0] != 'X')
                continue;

            char display_name[64] = ":";
            strcat(display_name, dr->d_name + 1);

            Display *disp = XOpenDisplay(display_name);
            if (disp != NULL) {
                int count = XScreenCount(disp);
                printf("Display %s has %d screens\n",
                    display_name, count);

                int i;
                for (i=0; i<count; i++)
                    printf(" %d: %dx%d\n",
                        i, XDisplayWidth(disp, i), XDisplayHeight(disp, i));

                XCloseDisplay(disp);
            }
        }
        closedir(d);
    }

    return 0;
} 
```

运行上面的代码给我这个输出与我当前的显示/屏幕：

```
Display :0 has 1 screens
 0: 3046x1050
Display :1 has 2 screens
 0: 1366x768
 1: 1680x1050 
```

从来没有找到比这更好的列出 X 显示的方法。我非常想知道是否存在更好的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:15:33.437

就像 netcoder 写的那样，这个问题有两个不同的部分：

1.  连接到 X 服务器

    该过程使用`XOpenDisplay()`. 使用 断开连接`XCloseDisplay()`。此线程中的 netcoders 代码是如何正确执行此操作的一个很好的示例。

    正如 netcoder 所提到的，问题在于没有可靠的方法来找出进程可以连接到哪些 X 服务器。他的代码检查 X 套接字的典型位置，`/tmp/.X11-unix/`. 如果用户是远程连接的，例如通过 SSH（启用 X 转发），这种方法根本*不起作用。*在那种情况下，实际上只有`DISPLAY`环境变量（也许还​​有一些诡计的`~/.Xauthority`文件）。

    不幸的是，我也不知道有什么更好的方法。我个人更喜欢使用每个用户的配置文件——比如`~/.application/displays`——用户可以在其中列出应用程序应该尝试以与环境变量相同的格式连接的服务器名称`DISPLAY`，除了默认的。它不是自动的（netcoder 的代码是），但这种方法更适合我。

2.  了解 X 服务器提供的屏幕

    `XScreenCount()`将返回进程当前连接到的 X 服务器提供的屏幕数量。如果您只需要屏幕尺寸，请按照 netcoders 示例。更详细的信息，使用`XScreenOfDisplay(Display,index)`获取`Screen`指针；`0`<= `index`< `XScreenCount(Display)`.

    在 C 代码中，宏`ScreenCount()`和`ScreenOfDisplay()`通常比实际的函数调用更有效。

# cocos2d-iphone - 精灵低于某个高度后如何使用重新启动按钮重新启动场景？

> ID：11367355
> 
> 赞同：0
> 
> 时间：2012-07-06T17:57:02.717
> 
> 标签：cocos2d-iphone, screen, sprite, restart, scene

我正在为我的第一个 iPhone 半基本游戏而苦苦挣扎。游戏运行良好，但我想要一个按钮显示重新启动，然后单击它重新启动场景。只有当我的精灵（称为精灵）低于 iphone 屏幕底部时，才会出现此按钮。如果有区别，我会同时使用 cocos 2d 和 box 2d。

感谢您在高级的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:28:13.910

一旦精灵低于某个点时让按钮出现的快速答案：创建按钮时，将其状态设置为不可见。`resetButton.isVisible = NO;`然后写一个关于你的精灵位置的 if 语句，并在发生这种情况时启用按钮。

```
if (sprite.position.y >= 0)
{
    resetButton.isVisible = YES;
} 
```

这应该让你开始这方面的工作。我现在不在我的 Mac 上，但如果没有记忆，不启用不可见按钮，因此单击它的位置无关紧要。如果那不正确，只需适当地添加`resetButton.isEnabled = NO;`即可`YES`。

至于重置场景，这可能会有点棘手，具体取决于您想要完成的任务。您基本上需要用场景本身替换场景，但这可能会导致不希望出现的闪光。快速谷歌搜索发现了一堆关于此的论坛帖子。如果您可以详细说明您已经尝试过的内容以及您遇到的问题，我可以尝试更具体。

# php - 合并多维数组中不同相同键上的两个键

> ID：11367356
> 
> 赞同：0
> 
> 时间：2012-07-06T17:57:16.303
> 
> 标签：php, arrays, merge, multidimensional-array

我有一个多维数组，我正在尝试合并键。我想合并与我尝试合并的键不同的键上出现相同键的位置。

我当前的数组看起来像这样。

```
Array
(
[0] => Array
    (
        [zone_id] => 2
        [zone_title] => Users
        [link_title] => Users
    )

[1] => Array
    (
        [zone_id] => 2
        [zone_title] => Users
        [link_title] => Add User
    )

[2] => Array
    (
        [zone_id] => 3
        [zone_title] => Locations
        [link_title] => 
    )
) 
```

除了将具有相同 zone_id 键的数组合并在一起之外，我想保持数组不变。

结果

```
 Array
(
[0] => Array
    (
        [zone_id] => 2
        [zone_title] => Users
        [link_title] => Array 
                            (
                                [0] => Users
                                [1] => Add user
                            )
    )

[1] => Array
    (
        [zone_id] => 3
        [zone_title] => Locations
        [link_title] => 
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:01:06.427

```
<?php
function merge_keys($arr){
    for ($key = 0; $key < count($arr); $key++) {
        $zone_id = $arr[$key]['zone_id'];
        $index = search($arr, $zone_id);
        if ($index != $key && $index != -1){
            $link_title = $arr[$key]['link_title'];
            $link_title2 = $arr[$index]['link_title'];  
            $arr[$key]['zone_id'] = $zone_id;
            $arr[$key]['zone_title'] = $arr[$key]['zone_title'];
            $arr[$key]['link_title'] = array($link_title, $link_title2);
            unset($arr[$index]);
        }
    }
    return $arr;
}

function search($arr, $zone_id){
    for ($i = count($arr) - 1; $i >= 0 ; $i--) {
        $item = $arr[$i];
        $tmp_zone_id = $item['zone_id'];
        if($tmp_zone_id == $zone_id){
            return $i;
        }
    }
    return -1;
}

$arr = array(array('zone_id' => 2, 'zone_title' => 'Users', 'link_title' => 'Users'),
             array('zone_id' => 2, 'zone_title' => 'Users', 'link_title' => 'Add User'),
             array('zone_id' => 3, 'zone_title' => 'Locations', 'link_title' => ''));

echo "Before change: \n";
print_r($arr);
$arr = merge_keys($arr);
echo "After change: \n\n";
print_r($arr);
?> 
```

# python - python中的list、str和int帮助

> ID：11367359
> 
> 赞同：0
> 
> 时间：2012-07-06T17:57:31.477
> 
> 标签：python, elementtree

我有这样的号码列表：

146, 168

174, 196

230, 252

258, 280

286, 308

314, 336

342, 364

370, 392

第一个数字代表我从我的代码中获得的值（起始数字），逗号后面的第二个数字是结束值。我尝试做的是同时使用开始值和结束值来打印字符串。这是我的代码的一部分：

```
root = etree.parse(f)

for lcn in root.xpath("/protein/match[@dbname='DB']/lcn"):
    start = lcn.get("start")
    end = lcn.get("end")
    print "%s, %s" % (start, end,)
    if start <= end:
        start = int(start+1)
        print start    
    if start <= end:

      print list(start)

      start = int(start+1) 
```

我收到错误消息说我无法连接“str”和“int”对象。旁注：在列表索引中有一个字母。所以我的目标是在每个开始值和结束值的一行上打印出这些字母。例如 ACTGAGCAG 并可能导入到另一个输出文件。你能帮我解决这个问题吗？

更新：所以一切都解决了，我得到了结果，但现在我想让它们出现在一行上。我这样做了，但我收到错误消息说 TypeError: 'builtin_function_or_method' object is not subscriptable

```
 while start <= end:
        inRange = makeList.append[start]
        start += 1
        print inRange 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:59:00.610

代替

```
start = lcn.get("start")
end = lcn.get("end") 
```

利用

```
start = int(lcn.get("start"))
end = int(lcn.get("end")) 
```

这是因为`lcn.get`返回一个字符串。

而不是`start = int(start+1)`，使用`start += 1`. 您不再需要转换为整数并且`start += 1`是`start = start + 1`.

而不是`print "%s, %s" % (start, end,)`，使用`print "%d, %d" % (start, end)`. 最后的逗号是不必要的，`start`并且`end`现在是整数，所以使用`%d`而不是`%s`.

更新：

而不是

```
while start <= end:
    inRange = makeList.append[start]
    start += 1
    print inRange 
```

利用

```
for i in range(start, end):
    makeList.append(i)
    print(i) 
```

如果使用 Python 3 或使用

```
for i in xrange(start, end):
    makeList.append(i)
    print i 
```

如果使用 Python 2。

# json - Node.js JSON 转义问题

> ID：11367363
> 
> 赞同：1
> 
> 时间：2012-07-06T17:57:49.190
> 
> 标签：json, node.js, mongodb

我一直在按照本[教程](http://blog.jeffdouglas.com/2012/03/25/build-an-api-with-node-js-express-mongodb-and-cloud-foundry/)使用 Node.js 和 MongoDB 创建一个简单的 API，但是我在制作的 JSON 帖子的格式方面遇到了一些问题。

该帖子大致如下：

```
curl POST -d '{"test":"test"}' http://127.0.0.1:3000/add 
```

然而，一旦在 MongoDB 中，它看起来如下所示：

```
{\"test\":\"test\"}":"","_id":"4ff725d6349fdf9c0d000004"} 
```

我的 POST 函数如下：

```
app.post('/add', function(req, res){
   require('mongodb').connect(mongourl, function(err, conn){
    conn.collection('docs', function(err, coll){
      coll.insert( req.body, {safe:true}, function(err){
      res.writeHead(200, {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*"
      });
      res.end(JSON.stringify(req.body));
      });
    });
  });
 }); 
```

关于如何确保正确处理 POST 的任何想法都会有所帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:09:04.460

看起来它可能会将您的 POST 数据解析为表单编码。试试这个 CURL 命令：

```
curl -H "Content-Type: application/json" -X POST -d '{"test":"test"}' http://127.0.0.1:3000/add 
```

# python - OOP：从类处理程序创建对象的调用方法

> ID：11367366
> 
> 赞同：1
> 
> 时间：2012-07-06T17:58:09.150
> 
> 标签：python, oop

我正在创建一个简单的启动/停止 HTTP Server python 应用程序，我目前有以下类设置：

```
#The Tkinter interface for the application
class Application():
    def __init__(self,win):
        self.serverThread=ServerThread()

        self.output=Tkinter.Text(win)
        self.output.pack()

#The Server Thread
class ServerThread():
    class ServerHandler(BaseHTTPServer.BaseHTTPRequestHandler):
        def log_message(msg):
            //here's where I'm confused
    def __init__(self):
        self.server=BaseHTTPServer.HTTPServer(('',8000),self.ServerHandler) 
```

在不使用全局输出变量的情况下，从 ServerHandler 类向我的应用程序中的输出字段添加文本的正确方法是什么？ServerHandler 甚至有对创建它的 ServerThread 对象的引用吗？

**编辑：我想我真正要找的是：我怎样才能让作为类传递给 BaseHTTPServer.HTTPServer 的 ServerHandler - 知道在不使用全局变量的情况下创建的 ServerThread 和 Application 对象？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T02:50:38.357

如果您正在寻找日志记录工具，我建议您查看标准[日志记录](http://docs.python.org/library/logging.html)模块。实际上，它为您提供了任意数量的“全局”日志输出。它显然还具有标准的优点：这使得日志记录代码更清晰，因为很多人都使用这种方法。

# powershell - 使用 PowerShell 的 Invoke-Command 进行远程处理时，如何包含本地定义的函数？

> ID：11367367
> 
> 赞同：34
> 
> 时间：2012-07-06T17:58:21.913
> 
> 标签：powershell, powershell-2.0, powershell-remoting

我觉得我错过了一些应该很明显的东西，但我就是不知道该怎么做。

我有一个 ps1 脚本，其中定义了一个函数。它调用该函数，然后尝试远程使用它：

```
function foo
{
    Param([string]$x)

    Write-Output $x
}

foo "Hi!"

Invoke-Command -ScriptBlock { foo "Bye!" } -ComputerName someserver.example.com -Credential someuser@example.com 
```

这个简短的示例脚本打印“嗨！” 然后崩溃说“术语 'foo' 未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。”

我知道该函数未在远程服务器上定义，因为它不在 ScriptBlock 中。我可以在那里重新定义它，但我宁愿不这样做。我想定义一次函数并在本地或远程使用它。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-06T20:23:27.477

您需要传递函数本身（而不是调用 中的函数`ScriptBlock`）。

上周我也有同样的需求，发现[了这个 SO讨论](https://stackoverflow.com/questions/8448808/using-invoke-command-scriptblock-on-a-function-with-arguments)

所以你的代码将变成：

```
Invoke-Command -ScriptBlock ${function:foo} -argumentlist "Bye!" -ComputerName someserver.example.com -Credential someuser@example.com 
```

请注意，通过使用此方法，您只能将参数按位置传递给您的函数；您不能像在本地运行函数时那样使用命名参数。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-05-30T06:44:47.167

您可以将函数的定义作为参数传递，然后通过创建脚本块然后对其进行点源来重新定义远程服务器上的函数：

```
$fooDef = "function foo { ${function:foo} }"

Invoke-Command -ArgumentList $fooDef -ComputerName someserver.example.com -ScriptBlock {
    Param( $fooDef )

    . ([ScriptBlock]::Create($fooDef))

    Write-Host "You can call the function as often as you like:"
    foo "Bye"
    foo "Adieu!"
} 
```

这消除了复制函数的需要。如果您愿意，也可以通过这种方式传递多个函数：

```
$allFunctionDefs = "function foo { ${function:foo} }; function bar { ${function:bar} }" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-01T01:12:10.557

您还可以将函数和脚本放在文件 (foo.ps1) 中，然后使用 FilePath 参数将其传递给 Invoke-Command：

```
Invoke-Command –ComputerName server –FilePath .\foo.ps1 
```

该文件将被复制到远程计算机并执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T06:11:17.947

虽然这是一个老问题，但我想添加我的解决方案。

有趣的是，函数测试中脚本块的参数列表不采用 [scriptblock] 类型的参数，因此需要转换。

```
Function Write-Log 
{
    param(
        [string]$Message
    )

    Write-Host -ForegroundColor Yellow "$($env:computername): $Message"
}

Function Test
{
    $sb = {
        param(
            [String]$FunctionCall
        )

        [Scriptblock]$WriteLog = [Scriptblock]::Create($FunctionCall) 
        $WriteLog.Invoke("There goes my message...")               
    }

    # Get function stack and convert to type scriptblock 
    [scriptblock]$writelog = (Get-Item "Function:Write-Log").ScriptBlock 

    # Invoke command and pass function in scriptblock form as argument 
    Invoke-Command -ComputerName SomeHost -ScriptBlock $sb -ArgumentList $writelog
}

Test 
```

另一种可能性是将哈希表传递给我们的脚本块，其中包含您希望在远程会话中可用的所有方法：

```
Function Build-FunctionStack 
{
    param([ref]$dict, [string]$FunctionName)

    ($dict.Value).Add((Get-Item "Function:${FunctionName}").Name, (Get-Item "Function:${FunctionName}").Scriptblock)
}

Function MyFunctionA 
{
    param([string]$SomeValue)

    Write-Host $SomeValue
}

Function MyFunctionB
{
    param([int]$Foo)

    Write-Host $Foo
}

$functionStack = @{}

Build-FunctionStack -dict ([ref]$functionStack) -FunctionName "MyFunctionA"
Build-FunctionStack -dict ([ref]$functionStack) -FunctionName "MyFunctionB" 

Function ExecuteSomethingRemote
{
    $sb = {
        param([Hashtable]$FunctionStack)

        ([Scriptblock]::Create($functionStack["MyFunctionA"])).Invoke("Here goes my message");
        ([Scriptblock]::Create($functionStack["MyFunctionB"])).Invoke(1234);

    }

    Invoke-Command -ComputerName SomeHost -ScriptBlock $sb -ArgumentList $functionStack
}

ExecuteSomethingRemote 
```

# sql - 计算假期日期

> ID：11367369
> 
> 赞同：0
> 
> 时间：2012-07-06T17:58:32.347
> 
> 标签：sql, sql-server-2005, calculated-columns

我必须创建“假期”表，然后创建 php 脚本，以便我可以在我的网站上显示它。

假期可以是特定的，例如 15.05.2012 - 5 月 15 日。

非特定：7 月的第一个（或第二个、第三个）星期日

有什么方法可以创建计算列，所以这句话“7 月的第一个（或第二个、第三个）星期日”可以变成 x.07.2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:05:21.887

使用日历表。SQL Server 中没有内置的魔术代码知道复活节是什么时候。这篇文章展示了基本前提——你用 x 年到 y 年的所有日期填写一个表格，然后根据特定逻辑为假期日期更新一个名为 IsHoliday 的列（最容易在循环中执行一次，那么您以后的所有代码都可以参考计算的位）：

[ASP 常见问题参考。当前链接不再有效，这是该页面的 archive.org 缓存版本](http://web.archive.org/web/20120719141807/http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T15:18:56.997

答案中的链接现在将您带到一个想要加载病毒的虚假页面。只是抬头。

[http://codeinet.blogspot.com/2006/08/auxiliary-calendar-table-for-sql.html](http://codeinet.blogspot.com/2006/08/auxiliary-calendar-table-for-sql.html)

这似乎是一个工作版本。

# java - GWT-GIN 与生吉斯

> ID：11367370
> 
> 赞同：2
> 
> 时间：2012-07-06T17:58:33.253
> 
> 标签：java, gwt, guice, gwt-gin

有什么理由不能在 GWT 应用程序中只使用 Guice 进行 DI 吗？如果是这样，为什么？如果没有，GWT-GIN*真正*提供了 POG（plain ole' Guice）没有的什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:24:25.803

Guice 在很大程度上依赖于反射，而 GWT 并没有完全支持反射。

# c - 静态/动态源代码分析

> ID：11367384
> 
> 赞同：0
> 
> 时间：2012-07-06T17:59:32.567
> 
> 标签：c, security, web-applications

我参加了一个名为“安全代码”的课程，在我们的下一个作业中，我们应该对一些 C 文件和一个 JavaEE Web 项目进行静态/动态分析。

我检查了“源监视器”并在 C 文件上运行它，但是（除非我不知道如何使用它！）它似乎没有做我想要的。

考虑到这个话题，我很想知道是否有用于检测“不安全”代码的工具，即可能通过缓冲区溢出、SQL 注入、XSS 攻击的代码......所以我想指出哪个函数应该被“升级”（例如 fgets 而不是 get，或者 PreparedStatement 而不是普通的 SQL 语句）

注意：我更喜欢开源软件，可能适用于 Windows（我在 VM 上安装了 Ubuntu，但我不太擅长使用它……我通常花更多的时间来了解如何配置工具而不是运行它们）。

谢谢你的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:54:23.287

[Frama-C 的价值分析](http://frama-c.com/value.html)是开源的，[可用于 Windows 的预编译，用于查找](http://lists.gforge.inria.fr/pipermail/frama-c-discuss/2012-February/003040.html)[QuickLZ C 库中的](http://blog.frama-c.com/index.php?post/2011/04/05/QuickLZ-1)这个或[Polar SSL](http://polarssl.org/trac/changeset/1221/trunk)中的这个等安全漏洞。

这就是说，您可能会发现仅仅为了一个学校作业而习惯了很多，然后，您是否真的希望在一个学校作业中发现安全漏洞？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:24:05.247

对于*JavaEE Web 项目*，请使用 Persistence API，您可以使用非 SQL 语句，理论上黑客是不可能的！最好的开源之一是[Hibernate](http://www.hibernate.org/)。它易于使用且非常灵活。

# php - 使用 jquery/js 或 php 创建图像/mjpeg 缓冲区

> ID：11367385
> 
> 赞同：1
> 
> 时间：2012-07-06T17:59:38.753
> 
> 标签：php, javascript, jquery, buffer, mjpeg

我有一个 IP 摄像机流式传输 mjpeg。我最初是这样流式传输的：

```
//JQUERY
    setInterval(function(){
    $("#overView").attr("src", "http://74.105.102.4:9999/cgi-bin/view/image?pro_3?"+new Date().getTime());
},1000);

//HTML
    <img id="overView" class="overView" width="710" height="400" style="" src="http://74.105.102.4:9999/cgi-bin/view/image?pro_3"> 
```

这工作正常，但每秒只给我 1 帧，如果我尝试再挤出，它会停止，因为我需要创建一个缓冲区。相机设置的最大速率为 30fps。所以为了获得更多的 FPS，我尝试使用 jQuery 创建一个缓冲区，如下所示：

```
//JQUERY
var mjpegImg = 'http://74.105.102.4:9999/cgi-bin/view/image?pro_3';

$('#start').attr('disabled', false).toggle(function() {
    $(this).text('Stop');

    $('#buffer').load(function() {
        $('#video').attr('src', this.src);
        this.src = mjpegImg + '?cache=' + new Date().getTime();
    }).trigger('load');
}, function() {
    $(this).text('Start');
    $('#buffer').unbind();
});​

//HTML
<img id="buffer" alt="" />
<img id="video" alt="" />
<button id="start" disabled="disabled">Start</button>​ 
```

这种作品，虽然仍然有问题。这是上面脚本的小提琴 [http://jsfiddle.net/XgAWJ/2/](http://jsfiddle.net/XgAWJ/2/)在流的右上角有一个时间戳，所以你可以知道它是如何移动的。

无论如何我可以使用这种方法挤出更多的FPS吗？15-20fps 将是理想的。摄像头由 15mbs 上传线路托管，对于 mjpeg 来说应该足够了。如果有使用 PHP 的方法，我也不害怕使用 PHP `ob_start()`，我在这里看到了一个使用它的解决方案[http://ben-collins.blogspot.com/2010/06/php-sending-motion-jpeg.html](http://ben-collins.blogspot.com/2010/06/php-sending-motion-jpeg.html)不确定如果这样可以正常工作，我看不到任何地方可以设置时间间隔。

谢谢一群人！

# java - 将文件保存到特定位置

> ID：11367395
> 
> 赞同：-4
> 
> 时间：2012-07-06T18:00:22.127
> 
> 标签：java, file, location

我正在尝试使用将文件保存到 C 驱动器

`File file = new File ("C:/file.txt")`

该文件确实出现在那里，但是信息不会保存到它上面并且它仍然是空白的。为什么？

当我将文件保存到源代码的位置时，它工作正常，当我尝试将它写入 C 驱动器时它不会保存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:16:07.007

尝试这个...

**写入后关闭文件.......或阅读......它很重要..试试这个..**

使用`close()`方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T12:32:59.813

完成工作后使用close（），还要确保您有权写入该文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:15:36.163

试试这个例子

```
import java.io.*;
 public class InputStreamToFile {
   public static void main(String args[]) {
   try {
        File f=new File("outFile.java");
        InputStream inputStream= new FileInputStream("InputStreamToFile.java");
        OutputStream out=new FileOutputStream(f);
        byte buf[]=new byte[1024];
               int len;
               while((len=inputStream.read(buf))>0)
               out.write(buf,0,len);
               out.close();
               inputStream.close();
   System.out.println("\nFile is created..........");
   }
   catch (IOException e){}
   }  
 } 
```

[在此处输入链接描述](http://www.roseindia.net/java/java-conversion/InputstreamToFile.shtml)

# jquery - jQuery与多个库冲突？

> ID：11367396
> 
> 赞同：2
> 
> 时间：2012-07-06T18:00:27.650
> 
> 标签：jquery

[链接到网站](http://avs.mybigcommerce.com/)

我确信我的页面幻灯片和图像滑块之间存在冲突..

**这是页面幻灯片的代码：**

```
<ul>
    <li>
        <a href="javascript:$.pageslide({ direction: 'right', href: '_secondary.html' })" class="first">Slide to the right, and load content from a secondary page.</a>
    </li>

    <li>
        <a href="javascript:$.pageslide({ direction: 'left', href: '/template/_secondary.html' })" class="second">Open the page programatically.</a>
    </li>
</ul>
<script>
var jq171 = jQuery.noConflict();
</script>
<script src="/template/js/jquery-1.7.1.min.js"></script>
<script src="/template/js/jquery.pageslide.js"></script>
<script>
    /* Default pageslide, moves to the right */
    $(".first").pageslide({ direction: "right"});

    /* Slide to the left, and make it model (you'll have to call $.pageslide.close() to close) */
    $(".second").pageslide({ direction: "left"});
</script>` 
```

**这是图像滑块：**此代码引用了两个 jQuery 库 - v1.5.1 和 orbit-1.2.3

```
<div class="container" style="margin-top:20px; margin-left:10px;">
    <div id="featured"> 
        <a href=""><img src="*****" /></a>
        <a href=""><img src="*****" /></a>
        <a href=""><img src="*****" /></a>
        <a href=""><img src="*****" /></a>
        <a href=""><img src="*****" /></a>
    </div> 
```

有一分钟我让他们俩一起工作，但我不确定是什么导致了冲突。我已经尝试过不同变体的无冲突脚本。如果您需要更多信息来帮助，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:05:27.330

由于库脚本加载速度的差异，代码有时会起作用，有时会不起作用。有时，它的加载速度足以在您开始使用它时就位，有时则不然。这就是为什么你应该把你的初始代码放在一个`ready`块中：

```
<script src="/template/js/jquery-1.7.1.min.js"></script>
<script src="/template/js/jquery.pageslide.js"></script>
<script type="text/javascript">
    var jq171 = jQuery.noConflict();
    jq171.ready(function ($) {
        /* Default pageslide, moves to the right */
        $(".first").pageslide({ direction: "right"});

        /* Slide to the left, and make it model (you'll have to call $.pageslide.close() to close) */
        $(".second").pageslide({ direction: "left"});
    });
</script> 
```

另外，我敦促您重新考虑在同一页面甚至同一站点上使用两个库。一个就够了！

**文档**

*   jQuery `ready`- [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:06:41.903

在加载 jQuery 后使用`noConflict`并使用它来代替`$()`：

```
var jq171 = jQuery.noConflict();
jq171(document).ready(function () {
   jq171(".first").pageslide({ direction: "right"});
   // ....
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:08:38.390

在传递 $ 变量的就绪状态下运行您的 jQuery。

只使用**一个 jQuery 库**，最好是最新的并且来自[CDN](https://developers.google.com/speed/libraries/devguide#jqueryDiv)。

```
jQuery.noConflict();
jQuery.ready(function ($) {
    /* Default pageslide, moves to the right */
    $(".first").pageslide({ direction: "right"});

    /* Slide to the left, and make it model (you'll have to call $.pageslide.close() to close) */
    $(".second").pageslide({ direction: "left"});
});

// Outside the ready state $ calls the other library. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T18:23:13.190

您有三个不同版本的 jQuery 加载。忘记使用 noConflict 来处理它们，没有理由加载三个版本。

# .net - 无法在控制台应用程序中引用 System.Web

> ID：11367398
> 
> 赞同：3
> 
> 时间：2012-07-06T18:00:42.123
> 
> 标签：.net, visual-studio-2010, visual-studio

我需要在控制台应用程序中使用 HttpUtility，就像这个问题[UrlEncode through a console application?](https://stackoverflow.com/questions/14731/urlencode-through-a-console-application)

问题是，由于某些奇怪的原因，当我尝试添加引用并转到 .NET 选项卡时，我没有看到 System.web，而且当我转到最近并选择 System.Web 时，它添加了引用，但使用黄色感叹号。

怎么了，我知道这是小事一桩……

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T21:04:07.147

Microsoft 为 .Net 框架提供了一个特殊的“客户端配置文件”，以便应用程序开发人员可以制作更小/更快的部署包。尽管客户端配置文件包含许多简单的 .Net 应用程序可能需要的东西（CLR、Windows 窗体等），但奇怪的是它不包含 System.Web 的东西。

请参阅[http://msdn.microsoft.com/en-us/library/cc656912.aspx](http://msdn.microsoft.com/en-us/library/cc656912.aspx)以了解有关框架的“客户端配置文件”版本所包含内容的更多信息。

正如您所发现的，您只需将 TargetFramework 更改为普通的 .Net Framework 4（在项目属性窗口中），您就可以访问您需要的所有功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:52:51.693

您需要更改目标框架配置文件：从客户端到完整（在 VS 项目属性窗口）。

# perl - 在没有 root 的情况下安装 CPAN 模块

> ID：11367399
> 
> 赞同：5
> 
> 时间：2012-07-06T18:00:43.440
> 
> 标签：perl, cpan

我按照这个[有用的教程](http://www.dcc.fc.up.pt/~pbrandao/aulas/0203/AR/modules_inst_cpan.html)为我的用户安装了 Perl。很抱歉链接到外部网站，但我认为阅读这是了解如何回答问题的唯一方法。

无论如何，我正在为 CPAN 配置提供默认值——通过教程创建的目录`.cpan`和`CPAN`目录——但由于某种原因，当我尝试安装模块时，CPAN 仍然想深入`/usr/lib/`研究——它只是无法进入。这是在安装时`DBD::CSV`。

这是错误消息：

```
All tests successful (7 subtests UNEXPECTEDLY SUCCEEDED), 3 tests skipped.
Files=23, Tests=706,  3 wallclock secs ( 2.28 cusr +  0.54 csys =  2.82 CPU)
/usr/bin/make test -- OK
Running make install
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
ERROR: Can't create '/perl5lib/lib/Bundle/DBD'
mkdir /perl5lib: Permission denied at /usr/lib/perl5/5.8.8/ExtUtils/Install.pm line 457
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
at -e line 1
make: *** [pure_site_install] Error 13
/usr/bin/make install  -- NOT OK 
```

似乎走错了路`perl5lib`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:06:21.877

是的，local::lib 有帮助。我建议使用 cpanm 而不是 cpan。我认为它默认安装所有东西 ~/perl5/lib/perl5。这是一个[超级有用的教程](https://github.com/kraih/mojo/wiki/Dreamhost)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T19:00:41.743

[local::lib](http://search.cpan.org/perldoc?local%3a%3alib)导致安装程序使用我认为损坏的 INSTALL_BASE。我使用[perlbrew](http://search.cpan.org/perldoc?perlbrew)来安装 Perl 的本地副本。

*   你不会弄乱你系统的 Perl 安装，所以你不会破坏你的操作环境。
*   允许您轻松安装多个版本和构建的 Perl。
*   不需要使用 INSTALL_BASE。
*   无需特殊权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T18:02:44.733

看看这个模块：[local::lib](http://search.cpan.org/~apeiron/local-lib-1.008004/lib/local/lib.pm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:55:39.760

您是否在 cpan 中配置了 myconfig.pm 而不是让它自动填充所有默认值？在 cpan 配置期间，您需要为 Makefile.PL 部分添加 PREFIX="" 以便它将模块安装到您具有写入权限的这个新位置。由于它已经为您自动配置，请进入 .cpan/CPAN/，查找 MyConfig.pm 并对其进行编辑。找到“makepl_arg”行并将 [] 中的值更改为包含 PREFIX=""。然后尝试 perl -MCPAN -e shell 并安装一个模块。

# objective-c - UIWebView 缩放页面，这样就不需要水平滚动了

> ID：11367401
> 
> 赞同：0
> 
> 时间：2012-07-06T18:00:59.053
> 
> 标签：objective-c, ios, ipad, uiwebview, scaling

例如，有没有办法在 UIWebView 中缩放网页，保持纵横比，但减少水平滚动阅读文章的需要。垂直滚动很好，我只是不希望用户必须不断地在水平方向来回滚动来阅读文章的每一行。谢谢！

编辑：我用来创建视图的代码

```
 _webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, [[self view] frame].size.width, [[self view] frame].size.height)];
    [_webView setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth];
    [_webView setDelegate:self];
    [_webView setScalesPageToFit:YES];
    [_webView loadRequest:[NSURLRequest requestWithURL:[headline link]]]; 
```

该链接始终已针对移动设备进行了格式化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T19:10:14.423

我认为为您的 UIWebView 定义视口可能会有所帮助：

```
<meta name="viewport" content="width=device-width"/> 
```

这是使用设备的整个宽度；如果您的 UIWebView 较小，您可以指定其宽度（以磅为单位）。

如果您需要在加载页面后将元标记添加到页面的 HTML 中，您可以使用以下代码：

```
- (void) webViewDidFinishLoad:(UIWebView *)webView {

  NSString* js = 
  @"var meta = document.createElement('meta'); "
   "meta.setAttribute( 'name', 'viewport' ); "
   "meta.setAttribute( 'content', 'width = device-width' ); "
   "document.getElementsByTagName('head')[0].appendChild(meta)";

  [webView stringByEvaluatingJavaScriptFromString: js];        
} 
```

另请检查[此 SO 线程](https://stackoverflow.com/questions/3588628/can-i-change-the-viewport-meta-tag-in-mobile-safari-on-the-fly)以获取相同的另一种技术。

# google-apps-script - urlfetchapp 文件大小

> ID：11367404
> 
> 赞同：1
> 
> 时间：2012-07-06T18:01:09.953
> 
> 标签：google-apps-script

我目前正在尝试制作一个 Google Apps 脚本，该脚本将每 2 个月将我直接阅读的免费在线杂志的新问题下载到 Google Drive。不幸的是，UrlFetchApp 的文件大小限制似乎在 5 MB 到 10 MB 之间，不幸的是 PDF 文件的范围从 5 MB 到 20 MB，这意味着某些问题未下载并返回“内容太大”错误。

我知道它每 2 个月只有一个文件，所以我可以手动完成，但我想知道是否有办法将“大”文件直接下载到 Google Drive？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:44:56.340

根据[Apps Script Dashboard](https://docs.google.com/macros/dashboard)，消费者帐户的限制为每天 50 MB

# javascript - document.ready 和 ExecuteOrDelayScriptLoaded

> ID：11367407
> 
> 赞同：0
> 
> 时间：2012-07-06T18:01:18.410
> 
> 标签：javascript, jquery, dom

我有一个两难境地 - 我的 javascript 代码需要在 DOM 准备好时执行。但是，同时我需要能够连接到另一个脚本的加载事件。所以假设说我需要这样的东西：

```
 ExecuteOrDelayUntilScriptLoaded(getData, "sp.js");

 function getData() {

       (document.ready(function() {

            //my code to get data from sharepoint list.  
       }));

 } 
```

只有后者似乎不起作用。

请建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:21:44.750

为什么不这样做呢？

```
 $(document).ready(function() {
    ExecuteOrDelayUntilScriptLoaded(function getData(){
        //your code to get data from sharepoint list.  
    }, "sp.js");
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:28:45.483

尝试

```
$(document).ready(function() {
    $.getScript('sp.js', function() {
        //your code to get data from sharepoint list.
    });
}); 
```

要对脚本加载进行更多控制，请尝试使用简单轻量级的 yepnope.js 或更复杂的 LABjs 之类的脚本加载器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:04:53.947

如果您使用 jQuery、MooTools 或任何其他库 - 您可以使用一个标准函数来检查 DOM 和您的资产是否已加载。

例如，在 jQuery 中： http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

# gwt - GWT Elemental 中的 WebWorkers

> ID：11367410
> 
> 赞同：10
> 
> 时间：2012-07-06T18:01:34.563
> 
> 标签：gwt, web-worker

[GWT svn 的 Workers JSNI](http://code.google.com/p/google-web-toolkit/source/search?q=JsWorker&origq=JsWorker&btnG=Search+Trunk "JsWorker.java") 看起来 WebWorkers 还没有完全实现。我知道 elemental 处于开发的早期阶段，但可能有人已经尝试过让它工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-07T15:02:18.650

Web Worker 的问题在于它们并不真正适合标准的 GWT/Java 模型——在我看来，它们几乎不适合标准的 JS 模型。

Web Worker 通过在本质上不同的 JavaScript VM 之间来回传递数据来工作。该数据必须是字符串的形式，并且每个工作人员必须单独加载其 JS。这意味着在一个工作程序（或主页）中声明的变量不能从另一个工作程序访问，除非它作为字符串数据的一部分传递，在工作程序之间来回推送。

那么当您考虑 GWT/Java 时，这是如何工作的呢？从Java的角度来看，这不等于多线程，而是多JVM！不同的进程只能通过来回传递字符串（或更重要的是，不是 Java 对象）进行通信，并且不能共享任何其他状态。甚至两个虚拟机之间的静态变量也可能不同。

从您发布的链接中，查看[JsWorker](http://code.google.com/searchframe#T04cSGC7sWI/trunk/elemental/src/elemental/js/html/JsWorker.java&q=JsWorker%20package%3agoogle-web-toolkit.googlecode.com&sq=&ct=rc&cd=1)的来源- 您可以通过[JsWindow.newWorker](http://code.google.com/searchframe#T04cSGC7sWI/trunk/elemental/src/elemental/js/html/JsWindow.java&q=JsWorker%20package%3agoogle-web-toolkit.googlecode.com&l=1119)使用 JS 脚本的 url 创建一个实例，并且 JsWorker 支持侦听响应并将消息发送到的方法让它工作。

该脚本可能是一个 GWT 编译的对象 - 但它将是一个与原始应用程序不同的模块和入口点，因此它只有可以合理运行的代码，并且在加载时不会尝试在页面上开始绘图。它可能需要使用只加载 JS 的链接器，并且不会在“页面”上假设 iframe。

[GWT-NS](http://code.google.com/p/gwt-ns/wiki/WebWorker)项目已经有一些 web worker 示例，使用它们自己的链接器构建 js 文件以加载到 worker 中，以及其他一些便利部分。

# objective-c - CoreText 框架 - 应用程序不会在模拟器中运行 - iOS

> ID：11367411
> 
> 赞同：2
> 
> 时间：2012-07-06T18:01:44.807
> 
> 标签：objective-c, xcode, frameworks, ios-simulator, core-text

我有一个使用 CoreText 框架的应用程序。我能够在 iPhone 和 iPad 1 和 2 上成功运行该应用程序。

但是我无法在 xCode iPhone / iPad 模拟器中运行该应用程序。我收到以下错误消息：

ld：警告：忽略文件/Users/croydonbod/Documents/iDevelopment/MyApp/CoreText.framework/CoreText，文件是为不受支持的文件格式构建的，它不是被链接的架构（i386）

架构 i386 的未定义符号：“_CTFontCreateWithName”，引用自：-[View drawRect:] in View.o “_CTFramesetterCreateWithAttributedString”，引用自：-[View drawRect:] in View.o “_CTFramesetterCreateFrame”，引用自：-[View view.o "_CTFrameGetVisibleStringRange" 中的drawRect:]，引用自：-[View drawRect:] View.o "_CTFrameDraw"，引用自：-[View drawRect:] View.o "_kCTFontAttributeName"，引用自：-[在 View.o "_kCTForegroundColorAttributeName" 中查看 drawRect:]，引用自： View.o 中的 -[View drawRect:] ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 - v 查看调用）

谁能提出为什么会这样？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T18:05:27.433

看起来您将 CoreText 框架文件从 SDK*复制*到了您的应用程序中，而不是弱链接框架（这意味着适当的框架将为设备或模拟器正确加载）。

从您的项目中删除 CoreText 框架并重新添加它，确保***取消选中***“将项目复制到目标文件夹”复选框（如果出现），一旦添加了 CoreText 框架，请确保为项目中的 CoreText 框架。这是为 UIKit 框架设置的方式：

![在此处输入图像描述](../Images/1c116795a82df8c03367c1c0d3fe0aa2.png)

# javascript - onclick 依赖于 for 循环的 i 值。如何删除它？

> ID：11367418
> 
> 赞同：0
> 
> 时间：2012-07-06T18:02:08.213
> 
> 标签：javascript

我正在用 JavaScript 编写一个简单的计算器。我有 0 到 9、+、-、*、/、= 和 C 的按钮用于清除。我想为每个按钮的 onclick 分配事件处理程序。由于 0 到 9 的按钮具有非常相似的事件处理程序，因此我使用了一个 for 循环来分配给每个按钮的 onclick：

```
/* one, two, three, etc. are variables defined earlier.
 *
 * for example,
 * var one = document.getElementById("one");
 * where that element is a button that says "1"
 *
 * the "display" element is the calculator display
 */
var num_array = [one, two, three, four, five,
                 six, seven, eight, nine, zero];
for (var i = 0; i < num_array.length; ++i) {
    num_array[i].onclick = function() {
        document.getElementById("display").value += num_array[i].value;
    };
} 
```

但这不起作用，因为 onclick 的事件处理程序依赖于 i，一旦 for 循环完成，它将始终为 10。有什么方法可以消除对 i 的依赖，同时保持我的代码简洁（即使用 for 循环）？我不想为每个单独的按钮写出事件处理程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:08:12.727

为什么不直接使用`this`代替`num_array[i]`？

```
for (var i = 0; i < num_array.length; ++i) {
    num_array[i].onclick = function() {
        document.getElementById("display").value += this.value;
    };
} 
```

`this`将指向被点击的元素。

# javascript - 两个不同元素冲突的Javascript addEventListener

> ID：11367419
> 
> 赞同：0
> 
> 时间：2012-07-06T18:02:10.243
> 
> 标签：javascript, dom-events, addeventlistener

我必须防止在搜索表单上提交空搜索。表单没有提交按钮，所以我必须阻止输入。

html代码：

表格 1

```
 <form method="get" class="search-form" id="searchform" action="http://example.com" >   
                <input class="text" name="s" id="s" type="text" />       
    </form> 
```

表格 2

```
<form action="http://example.com" class="search-form" method="get">             
    <input type="text" name="s" class="text">                           
</form> 
```

Javascript 代码

```
// Im sure this funcions returns the 2 different forms, 
var searchForms = getElementsByClass('search-form');    
    for(i in searchForms)
    {   
        if (searchForms[i].addEventListener) 
        {
            searchForms[i].addEventListener("submit", function(e)
               {
                preventSubmit(e); // no problem here
                console.log(i) // ALWAYS LOGS 1         
               });
        } //I also implemented the ie code, but not necessary here, is the same as above for addEventListener

    } 
```

每次我提交任何表单时，都会在控制台中写入 1，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:06:23.557

你需要一个闭包：

```
var searchForms = getElementsByClass('search-form');    
    for(i in searchForms)
    {   
        if (searchForms[i].addEventListener) 
        {
            (function(i) { // Closure start <-- We make our own static variable i 
                searchForms[i].addEventListener("submit", function(e)
                   {
                   preventSubmit(e); // no problem here
                   console.log(i)        
                   });
            })(i); // Closure end.
        }
    } 
```

这是因为在您的循环之后 ( `for i in searchForms`)`i`将是最后一个值 (=== `1`)。您将需要创建一个闭包以获得静态值`i`.

在此处查看更多关于闭包的信息：

[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:32:08.270

回调在提交之前不会执行——此时 的值为1。以[立即执行函数](http://www.mitya.co.uk/blog/2011/May/Understanding-Javascript-self-executing-functions-176)`i`的形式的闭包允许我们捕获 的变化值并将其副本传递给我们的函数。`i`

还

1) 除非在某些情况下，一般要避免`for-in`对数组进行循环。使用传统`for`的循环。例如，如果您使用`for-in`通过 ECMA5`querySelectorAll()`方法选择表格的礼物，您会得到意想不到的结果（循环的四次迭代，而不是两次）

2）您不必要地重新评估循环的每次迭代使用哪种事件注册机制。决定一次，在外面。

```
//get forms
var searchForms = getElementsByClass('.search-form');

//initialise event registration depending on browser
var addEvent = window.addEventListener ? function(el, evt, func, bubble) {
    el.addEventListener(evt, func, bubble);
} : function(el, evt, func) {
    el.attachEvent('on'+evt, func);
};

//bind submit events
for (var i=0, len=searchForms.length; i<len; i++) {
    (function(i) {
        addEvent(searchForms[i], "submit", function(evt) { alert(i); preventSubmit(evt); }, false);
    })(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:08:21.573

这是因为关闭而发生的，请参阅类似的链接

[循环中的Jquery动态按钮对话框不填充功能](https://stackoverflow.com/questions/11125322/jquery-dynamic-buttons-dialog-for-in-loop-doesnt-populate-function/11126175)

# sql-server-2000 - SQL Server 2000：数据类型的运算符无效。运算符等于 add，类型等于 ntext

> ID：11367431
> 
> 赞同：-2
> 
> 时间：2012-07-06T18:02:35.310
> 
> 标签：sql-server-2000

我有一个获取`Ntext`参数的存储过程。在存储过程中，我有一个变量，我通过连接几个字符串来`varchar`设置这个变量。`varchar`

此时我在编译时收到以下错误。

> 数据类型的运算符无效。运算符等于 add，type 等于 ntext。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:25:17.607

我犯了一个粗心的错误。我实际上是将我`varchar`的变量与`ntext`变量连接起来。由于`Ntext`不允许串联，我被卡住了。

# java - 解析日期给出 00 月份

> ID：11367432
> 
> 赞同：-2
> 
> 时间：2012-07-06T18:02:37.223
> 
> 标签：java, date

> **可能重复：**
> [SimpleDateFormat 结果不正确](https://stackoverflow.com/questions/11356109/improper-result-of-simpledateformat)

以下代码输出日期 00/12/2010。我无法弄清楚为什么日期字符串被毫无例外地解析，但月份设置为 00。为了理智，我尝试使用 Locale.Enlgish 的 SimpleDateFormat 构造函数的第二个参数，但这没有帮助。有什么建议么？

```
 String dateString = "12-OCT-10";
    SimpleDateFormat formatFrom = new SimpleDateFormat("dd-MMM-yy");
    Date date = formatFrom.parse(dateString);
    SimpleDateFormat formatTo = new SimpleDateFormat("mm/dd/yyyy");
    System.out.println(formatTo.format(date)); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T18:04:06.133

`mm`代表分钟，使用`MM`; 有关详细信息，请参阅[文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

# php - PHP超时不适用于Web服务

> ID：11367437
> 
> 赞同：1
> 
> 时间：2012-07-06T18:03:32.697
> 
> 标签：php, web-services

我试图强制 PHP 永远不要尝试在设定的时间段内连接和发送信息到 web 服务。我在下面使用，由于某种原因，它会在允许的时间内运行，我不知道为什么。例如，如果我将其设置为 30 秒，我会发现在某些情况下需要更长的时间。如果需要太长时间，我需要找到一种 100% 终止连接的方法。

TIA，威尔

```
    $intTimeout = $this->getTimeout();
        $client = new SoapClient("{$this->url}?WSDL", array('trace' => 0, 'connection_timeout'=>$intTimeout));
        尝试 {
            $this->response = $client->someService($objPerson);
        }
        捕获（异常 $e）{

        }
        $this->restoreTimeout();

```

```
    函数getTimeout()
    {
        $intTimeout = @$this->timeout ？$this->timeout : 60;
        $_SESSION['old_sock'] = ini_get('default_socket_timeout');
        ini_set('default_socket_timeout', $intTimeout);

        返回 $intTimeout；
    }

    函数恢复超时（）
    {
        $intCurSockTime = @$_SESSION['old_sock'];
        if($intCurSockTime) ini_set('default_socket_timeout', $intCurSockTime);
    }
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T11:43:56.420

问题是：default_socket_timeout 在套接字响应之前计数，只要它得到响应，它将永远等待。

这是一个很好的例子，使用带有超时的 curl 作为后备：[http ://www.darqbyte.com/2009/10/21/timing-out-php-soap-calls/](http://www.darqbyte.com/2009/10/21/timing-out-php-soap-calls/)

类似的问题：[PHP SoapClient Timeout](https://stackoverflow.com/questions/3500527/php-soapclient-timeout)

# django - django - 引用 settings.py 中的 url 名称

> ID：11367443
> 
> 赞同：1
> 
> 时间：2012-07-06T18:03:55.687
> 
> 标签：django, django-settings

我的 Django 项目的 settings.py 定义了一些 URL 变量，例如`LOGIN_URL`,`LOGIN_REDIRECT_URL`等。我的 urls.py 定义了带有名称的 URL（“acct_login”、“acct_redirect”等）。

有什么方法可以**通过名称**在 settings.py 中引用这些 url吗？例如`LOGIN_URL = url(acct_login)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:09:47.673

你需要的[是`reverse()`方法](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)。

# jquery - 如何测试图像是否已经在缓存中？

> ID：11367448
> 
> 赞同：3
> 
> 时间：2012-07-06T17:48:06.063
> 
> 标签：jquery, image, optimization, coldfusion, background-image

我正在使用 ColdFusion 10 和 jQuery 1.7.1 和 Bootstrap。

我正在开发一个网站，它的主页上有很多大型、高质量的图像。在主页上，有一个图像轮播，可以从数据库中提取十张高质量的图像。每个图像可以是 1 兆。轮播图像不是我的问题（现在），但它与它有关。

我现在要解决的问题是我使用了一个我想继续使用的高质量背景图像，它大约是 180k。如果我在主页的缓存中有背景，我想使用它。如果没有，那么我不想在主页上使用它。我将从不同的页面加载它。当用户返回主页，并且背景图片在缓存中时，我想使用它。

我可以测试图像是否已经在缓存中，如果是，动态加载还是不加载？

您可以在此处查看主页：

```
http://flyingpiston2012-com.securec37.ezhostingserver.com/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:14:20.147

我认为没有办法测试图像是否在浏览器缓存中。

但是，解决这个问题的一种方法是使用[jQuery 的 .load() 事件](http://api.jquery.com/load-event/)。加载图像时，将图像 ID（或文件名）放入 localStorage（或 cookie）。然后，您可以测试此变量以查看图像是否已加载。

为图像设置 localStorage 变量的示例：

```
$(document).ready(function () {
   $('.hiResImg').load(function () {
      var imgSrc = $(this).attr('src');
      var loadedImgs = localStorage.getItem("loadedImgs");

      loadedImgs = loadedImgs || [];

      loadedImgs.push(imgSrc);

      localStorage.setItem("loadedImgs", loadedImgs);
   });
}); 
```

测试和加载图像的示例：

```
$(document).ready(function () {
   var loadedImgs = localStorage.getItem("loadedImgs").split(',');

   var imagePath = "http://localhost/path/to/someImg.jpg";

   if ($.inArray(imagePath, loadedImgs) > -1) {
      $('body').css('background-image', 'url(' + imagePath + ')');
   }
}); 
```

注意：此代码尚未经过全面测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:10:36.830

它可能是也可能不是一个选项，具体取决于您需要的浏览器支持，但您可以使用 DataURL 将其存储在浏览器的 localStorage 中。

这是一篇涵盖此主题的 Mozilla 文章：http: [//hacks.mozilla.org/2012/02/saving-images-and-files-in-localstorage/](http://hacks.mozilla.org/2012/02/saving-images-and-files-in-localstorage/)

您还应该知道 localStorage 确实有大小限制，我认为对于给定域，通常为 5MB。这不应该是您的 180KB 背景图像的问题，但根据浏览器设置和域上的其他页面/站点，它可能是一个问题。

# c# - 使用 SQL Server Compact 和 EF 时出错

> ID：11367472
> 
> 赞同：0
> 
> 时间：2012-07-06T18:06:34.680
> 
> 标签：c#, sql, visual-studio-2010, sql-server-ce

我正在使用 VS2010 + SQL Server CE 3.5 + EF + Framework 4。

我从 SQL Server CE 读取数据没有问题。

但是在使用此代码插入数据时：

```
EFConn.SaveChanges(); 
```

我收到一个错误：

> 错误：更新条目时出错。有关详细信息，请参阅内部异常。

请帮我...

错误详情：

> System.Data.UpdateException 未处理
> 
> Message=更新条目时发生错误。有关详细信息，请参阅内部异常。
> 
> 源=系统.数据.实体
> 
> 内部异常：System.Data.EntityCommandCompilationException
> 
> 消息=准备命令定义时发生错误。有关详细信息，请参阅内部异常。
> 
> 源=系统.数据.实体
> 
> 内部异常：System.NotSupportedException
> 
> Message=SQL Server Compact 不支持服务器生成的键和服务器生成的值。
> 
> 源=System.Data.SqlServerCe.Entity

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:33:31.217

1.  SQL CE 4.0 版通过其实体框架提供程序解决了这个问题。您可以从 [http://www.microsoft.com/en-us/download/details.aspx?id=17876下载](http://www.microsoft.com/en-us/download/details.aspx?id=17876)

2.  如果不想更改 SQL CE，可以尝试将字段类型更改为 uniqueidentifier。您可以这样做[SQL Server Compact 不支持服务器生成的键和服务器生成的值](https://stackoverflow.com/questions/648449/server-generated-keys-and-server-generated-values-are-not-supported-by-sql-serve)

希望这可以帮助

# linq - linq查询，如果前一个日期存在，则按最大日期搜索

> ID：11367474
> 
> 赞同：1
> 
> 时间：2012-07-06T18:06:36.863
> 
> 标签：linq, c#-4.0

我试图从数据库中取回三列，DecalExpireDate、DecalExpireMonth 和 DecalExpireYear。基本上，我正在尝试检查它是否有之前的到期日期，如果有，我需要获取最新的到期日期，因为它可能有多个之前的到期日期。

```
var previousExpirationDate = (from d in db.CT_Decals
      where d.TankID == decal.TankID
      && d.DecalStatus == "Approved"
      && d.DecalExpireDate == ((from dn in db.CT_Decals
                               where dn.TankID == decal.TankID
                               && dn.DecalStatus == "Approved"
                               select dn.DecalExpireDate).Max())
      select new 
      {
        d.DecalExpireDate,
        d.DecalExpireMonth,
        d.DecalExpireYear

      }); 
```

此查询不起作用，任何人都可以看到问题吗？我正在按 TankID 进行搜索，状态 = 已批准，然后我尝试使用最大过期日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:24:05.197

这个怎么样

```
 var result = db.CT_Decals.Where(o => o.TankId ==  decal.TankId && o.DecalStatus == "Approved")
                  .OrderByDescending(o => o.DecalExpireDate)
                  .Select(o => new { o.DecalExpireDate,
                                     o.DecalExireMonth,
                                     o.DecalExireYear }).First() 
```

或者

```
var result = (from d in db.CT_Decals
                      where d.TankID == 1 && d.Status == "Approved"
                      orderby d.ExpireDate descending
                      select new { d.DecalExpireDate, 
                                   d.DecalExpireMonth, 
                                   d.ExpireDate }).First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:27:33.423

无法`Sql`在您需要的范围内将 max 函数转换为问题，因此您可以像这样尝试

```
 var previousExpirationDate = (from d in db.CT_Decals
  where d.TankID == decal.TankID
  && d.DecalStatus == "Approved"
  && d.DecalExpireDate == ((from dn in db.CT_Decals
                           where dn.TankID == decal.TankID
                           && dn.DecalStatus == "Approved"
                           order by dn.DecalExpireDate
                           select dn.DecalExpireDate).First())
  select new 
  {
    d.DecalExpireDate,
    d.DecalExpireMonth,
    d.DecalExpireYear

  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:41:56.707

尽管`Max`可能是您的示例中的问题，但最好找到一种正确使用它的方法，因为它比排序更快。怎么样：

*编辑：*这个答案只返回 DecalExpireDate

 ~~~~```
var previousExpirationDate = (from d in db.CT_Decals
      where d.TankID == decal.TankID
      && d.DecalStatus == "Approved"
      select new 
      {
        d.DecalExpireDate,
        d.DecalExpireMonth,
        d.DecalExpireYear
      }).Max(d => d.DecalExpireDate); 
```~~  ~~对于这个版本，您必须测试是否值得额外调用数据库以避免排序：

```
var latestDate = (from d in db.CT_Decals
      where d.TankID == decal.TankID
      && d.DecalStatus == "Approved"
      select d.DecalExpireDate).Max();

var previousExpirationDate = (from d in db.CT_Decals
      where d.TankID == decal.TankID
      && d.DecalStatus == "Approved"
      && d.DecalExpireDate == latestDate
      select new 
      {
        d.DecalExpireDate,
        d.DecalExpireMonth,
        d.DecalExpireYear
      }).First(); 
```~~~~

# grails - Wiki based website - Choice of technology

> ID：11367476
> 
> 赞同：0
> 
> 时间：2012-07-06T18:06:56.240
> 
> 标签：grails, mediawiki, wiki, wikipedia, stackexchange

I am willing to build a wiki-based website that would have some other features, namely **comments, social sharing, video insertion, article rating and gamification**. In a nutshell, something very close to the StackExchange's websites, but the pages would consist of a single piece article instead of a thread of questions implementing the *footnote feature*.

I have not coded a single line yet.

I am rather experienced with Grails, so I know Groovy and Java. I also know JQuery and a bit of PHP, but I can learn basically everything required. I will be the only one programming on the project.

My questions are:

*   Which technology should I use according to YOU ? Should I use Grails as this is what I know best, and try to integrate a wiki technology within my app (if yes, which one) ?

*   Should I start from an already existing wiki technology (WikiMedia, XWiki, TWiki, Moinmoin, ...) and modify it to integrate the features I need (gamification, comments, video insertion, article rating and social sharing) ? Once again, if you think that is the best solution, please quote a technology, and if possible, tell me why is this THE one.

Thank you very much for your help. I find it rather hard to choose, and ever harder to know which path is the right one to go. Any suggestion is most welcome.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:34:10.180

I would suggest using MediaWiki for the following reasons

1.  You mentioned a wiki-based website
2.  It has lots of extensions built already for your needs (comments, article rating, sharing, comments)
3.  Since you mentioned you know little PHP, you can also modify some of the extensions for your use.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T16:31:04.360

[MediaWiki](http://mediawiki.org/wiki/) has (via extensions) support for social sharing, video insertion and article rating, and not-great-but-okay support for comments. (Probably most other wiki platforms too - these are common enough features.) Wikia (a MediaWiki-based wiki farm who opensourced most of their custom code) has some gamification features, though I am not familiar with them. Also, MediaWiki has the advantage of having the most widely known wiki dialect (due to the popularity of Wikipedia).

That said, if you are going for minimal developement effort, I would look into adding wiki features to an existing StackOverflow clone before trying to add gamification, comment etc. features to a wiki.

# java - Java 排序集合/api

> ID：11367478
> 
> 赞同：1
> 
> 时间：2012-07-06T18:07:04.693
> 
> 标签：java, api, list, sorting, package

我想知道哪种 API 或集合最适合使用扫描仪来搜索文档，计算单词出现的次数并创建一个按字母顺序排列的列表，并为每个单词创建一个子列表，说明它被遵循了多少次换个说法。

这是一个类，所以请指出我正确的方向，因为我对 Java 和包是全新的，但我不想要任何实际的编码技巧，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:11:00.853

我想你可以用`Map<String, Map<String, Integer>>`. 基本上你将拥有一个单词，它与包含所有连续单词及其频率（即它们出现的次数）的地图相关联。所以你有的是：

```
Map<String, Map<String, Integer>> frequencyTable = new HashMap<String, Map<String, Integer>>(); 
```

对于排序，您可以创建一个包含单词及其频率的类。然后，您可以将 a`TreeSet`与比较器一起使用（或`compareTo`在您的类上实现）来强制排序。然后您的地图将如下所示：

```
Map<String, TreeSet<Frequency>> frequencyTable = new HashMap<String, TreeSet<Frequency>>(); 
```

Assuming`Frequency`是保存有关字符串及其出现次数的信息的类。这里唯一的困难是每次你需要更新它的频率时都要查找这个词，因为你必须遍历这个集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:12:37.943

看看它是否关于排序......

这里有几个选择...

1.  如果您只想以**一种方式排序，**请使用**Collections.sort(T t)**和**Comparable interface 。**

***   使用**Collection.sort(T t, Comparator c)**和**Comparator 接口以不止一种方式进行排序。**

    *   If **uniqueness is important**, you can also use **TreeSet with comparator**.**

# c# - 更新位于服务器上的 XML 文件时如何刷新 XmlDataProvider？

> ID：11367483
> 
> 赞同：0
> 
> 时间：2012-07-06T18:07:19.670
> 
> 标签：c#, wpf, data-binding, xmldataprovider

在下面的代码中：有没有办法在我更新 myXml.xml 时自动更新 ComboBox.Items？

我知道如果 'myXml.xml' 是本地的，我可以`FileSystemWatcher`这样[使用](https://stackoverflow.com/questions/8881755/refresh-combobox-when-xmldataprovider-is-updated)。但是这个怎么样？

```
<Grid.Resources>
        <XmlDataProvider Source="http://www.mywebsite.com/myXml.xml" 
              x:Key="myXml"  XPath="/data/names"/>
</Grid.Resources>

<ComboBox ItemsSource="{Binding Source={StaticResource myXml}}"
              DisplayMemberPath="@name"/> 
```

# r - 通过搜索列名重命名数据框的列

> ID：11367485
> 
> 赞同：5
> 
> 时间：2012-07-06T18:07:45.160
> 
> 标签：r

我正在为 ggplot 编写一个包装器，以根据各种数据集生成多个图形。当我将列名传递给函数时，我需要重命名列名，以便 ggplot 可以理解引用。

但是，我正在努力重命名数据框的列

这是一个数据框：

```
df <- data.frame(col1=1:3,col2=3:5,col3=6:8) 
```

这是我用于搜索的列名：

```
col1_search <- "col1"
col2_search <- "col2"
col3_search <- "col3" 
```

以下是要替换的列名：

```
col1_replace <- "new_col1"
col2_replace <- "new_col2"
col3_replace <- "new_col3" 
```

当我搜索列名时，R 对列索引进行排序并忽略搜索位置。

例如，当我运行以下代码时，我希望新的标题是 new_col1、new_col2 和 new_col3，而不是新的列名是：new_col3、new_col2 和 new_col1

```
colnames(df)[names(df) %in% c(col3_search,col2_search,col1_search)] <- c(col3_replace,col2_replace,col1_replace) 
```

有没有人可以搜索列名并按顺序替换它们的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T23:26:12.313

```
require(plyr)
df <- data.frame(col2=1:3,col1=3:5,col3=6:8)
df <- rename(df, c("col1"="new_col1", "col2"="new_col2", "col3"="new_col3"))
df 
```

你可以创造性地提出第二个论点，`rename`这样它就不是那么手动了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:12:42.203

```
> names(df)[grep("^col", names(df))] <- 
                        paste("new", names(df)[grep("^col", names(df))], sep="_")
> names(df)
[1] "new_col1" "new_col2" "new_col3" 
```

如果您想用任意字符向量替换一组有序的列名，那么这应该有效：

```
names(df)[sapply(oldNames, grep, names(df) )] <- newNames 
```

( `sapply`)-ed`grep`将为您提供“newNames”向量的正确位置。我想如果你将它构建到一个函数中，你可能想确保有一组完整的匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T18:17:43.033

嗯，这可能有点复杂，但我想到的第一个：

```
lookup <- data.frame(search = c(col3_search,col2_search,col1_search),
                     replace = c(col3_replace,col2_replace,col1_replace))

colnames(df) <- lookup$replace[match(lookup$search, colnames(df))] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T19:15:34.703

我支持@justin 的 aes_string 建议。但是对于将来的重命名，您可以尝试。

```
require(stringr)
df <- data.frame(col1=1:3,col2=3:5,col3=6:8)
oldNames <- c("col1", "col2", "col3")
newNames <- c("new_col1", "new_col2", "new_col3")
names(df) <- str_replace(string=names(df), pattern=oldNames, replacement=newNames) 
```

# excel - 使用 VBA 覆盖 Excel 中的公式

> ID：11367487
> 
> 赞同：0
> 
> 时间：2012-07-06T18:07:51.623
> 
> 标签：excel, vba

这是有问题的公式。

`.Range("F5").Formula = "=SUMPRODUCT(--(I23:I29>='Raw Data'!K2),--(I23:I29<='Raw Data'!K3))"`

这很好用，但我想要的不是 ，而是`I23:I29`我想要它，以便当我在 excel VBA 中执行“lastrow”公式时，它将用 I 替换 I29，以及最后一行中的实际响应。

我认为要做到这一点，我必须打破括号，但我不确定这是否是正确的做法。

我认为我必须做的是：

`.Range("F5").Formula = "=SUMPRODUCT(--(I23:I" & lastrow">='Raw Data'!K2),--(I23:I" & lastrow"<='Raw Data'!K3))"`

但它看起来不正确。Excel 也给了我一个红线，所以我知道我做的不对。有人可以帮我弄清楚这个小噩梦吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:17:03.427

关闭 - 注意，并确保`&`字符串构建的每个部分之间存在：

`.Range("F5").Formula = "=SUMPRODUCT(--(I23:I" & lastrow & ">='Raw Data'!K2),--(I23:I" & lastrow & "<='Raw Data'!K3))"`

# android - 相对布局缩放？

> ID：11367494
> 
> 赞同：0
> 
> 时间：2012-07-06T18:08:25.597
> 
> 标签：android, android-layout, android-relativelayout

我想创建一个显示在所有设备上的布局，就像它在我的手机上一样。我试图让它适用于平板电脑，但它看起来很糟糕。这是它的样子： ![在此处输入图像描述](../Images/63f78da9a17304b498954abaf4f8175b.png)

但这是它在此平板电脑模拟器上的显示方式： ![在此处输入图像描述](../Images/3ce331fd004c33532d5f69ce1a82e633.png)

我该怎么做才能让它出现在所有屏幕尺寸上，就像在我的手机上一样？我目前正在使用相对布局。这是我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout02"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/terranlogo1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_centerHorizontal="true"
    android:src="@drawable/terranlogo" />

<ImageView
    android:id="@+id/protosslogo1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentRight="true"
    android:src="@drawable/protosslogo" />

<ImageView
    android:id="@+id/zerglogo1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:src="@drawable/zerglogo" />

<CheckBox
    android:id="@+id/ck_t1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/terranlogo1"
    android:layout_centerHorizontal="true" />

<CheckBox
    android:id="@+id/ck_p1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/protosslogo1"
    android:layout_below="@id/protosslogo1"
    android:layout_marginLeft="25dp" />

<CheckBox
    android:id="@+id/ck_z1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/zerglogo1"
    android:layout_below="@id/zerglogo1"
    android:layout_marginLeft="25dp" />

<ImageView
    android:id="@+id/terranlogo2"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_below="@id/ck_t1"
    android:layout_centerHorizontal="true"
    android:src="@drawable/terranlogo" />

<ImageView
    android:id="@+id/protosslogo2"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentRight="true"
    android:layout_below="@id/ck_p1"
    android:src="@drawable/protosslogo" />

<ImageView
    android:id="@+id/zerglogo2"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/ck_z1"
    android:src="@drawable/zerglogo" />

<CheckBox
    android:id="@+id/ck_t2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/terranlogo2"
    android:layout_centerHorizontal="true" />

<CheckBox
    android:id="@+id/ck_p2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/protosslogo1"
    android:layout_below="@id/protosslogo2"
    android:layout_marginLeft="25dp" />

<CheckBox
    android:id="@+id/ck_z2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/zerglogo1"
    android:layout_below="@id/zerglogo2"
    android:layout_marginLeft="25dp" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/ck_t2"
    android:layout_marginRight="18dp"
    android:layout_marginTop="17dp"
    android:gravity="center_vertical|center_horizontal"
    android:text="Choose your opponets race(s) and your race(s)"
    android:textSize="30dp" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Game Length"
    android:textSize="15dp" />

<Spinner
    android:id="@+id/s_answertime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/textView4" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/terranlogo2"
    android:layout_alignParentBottom="true"
    android:gravity="center_horizontal"
    android:text="Mistakes Allowed"
    android:textSize="15dp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Answer Time"
    android:textSize="15dp" />

<Spinner
    android:id="@+id/s_mistakenumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/s_answertime"
    android:layout_alignTop="@+id/s_answertime"
    android:layout_toLeftOf="@+id/s_gametime"
    android:layout_toRightOf="@+id/s_answertime" />

<Spinner
    android:id="@+id/s_gametime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView3"
    android:layout_alignLeft="@+id/protosslogo2"
    android:layout_alignTop="@+id/s_mistakenumber" />

</RelativeLayout> 
```

Lijap，感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:39:13.880

由于您设置了 layout_above 和 layout_below，微调器被拉伸，因此它们会拉伸以适应这两个标准。删除其中一个（可能是 layout_above）并为它们设置合理的固定高度（75dp？）。

此外，您的最左边/最右边的图标/复选框可能会在一个健康的 margin_left/right=50dp 下看起来更好，以防止它们一直延伸到屏幕边缘。

# couchdb - CouchDB 视图以发出文档元素是特定类型的文档

> ID：11367498
> 
> 赞同：1
> 
> 时间：2012-07-06T18:08:30.707
> 
> 标签：couchdb

我是沙发新手，但我正在追踪一个错误，并且想要一个视图，该视图将发出特定类型的所有文档，其中某个键的值不是数组。

我试过

```
function(doc) {
    if( doc.Type == "MyType" && !( doc.Stuff instanceof Array ) )
    {
         emit( doc._id, null );
    }
} 
```

但它会返回所有类型为“MyType”的文档，即使 doc.Stuff 是一个数组。我想做的事可能吗？我只是犯了一个愚蠢的错误吗？

作为记录，这只是我用来希望追踪错误的临时视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:36:25.917

尝试：

```
if(doc.Type === "MyType" && !isArray(doc.Stuff)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:54:54.883

您不应该依赖`constructor`或依赖于`constructor`like的任何东西`instanceof`。我建议鸭子用这样的东西打字：

```
if( doc.Type == "MyType" && !( doc.Stuff.splice && doc.Stuff.join ) ) 
```

# android - 从头开始重新开发应用程序？

> ID：11367507
> 
> 赞同：4
> 
> 时间：2012-07-06T18:09:15.330
> 
> 标签：android, google-play

这不是一个编程问题，但我觉得 SO 是放置它的正确位置。

市场上有一个安卓应用程序。我们的工作是大规模升级应用程序。我们决定从头开始一个新项目，有很多事情需要改变。

我的问题是：**为了能够替换（升级）Play商店中现有的应用程序**，我们应该怎么做？保持相同的包名？还是签名键就足够了？或两者？要不然是啥？

感谢您的帮助，如果这不是正确的地方，我们深表歉意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T18:13:45.347

您必须具有相同的包名称和相同的签名密钥。此外，如果它具有可以从其他应用程序启动的任何类型的意图/操作，您可能希望保持它们相同（以防用户设置了它们的快捷方式）。

**包名称**是 Play 商店从另一个应用中确定一个应用的方式。对于每个应用程序，它们必须是唯一的。如果您想升级现有应用程序，则在上传原件后无法更改它。

**签名密钥**是 Play 商店验证您是原始开发者的方式。如果您丢失或更改此密钥**，您将绝对无法更新原始应用程序！**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T18:14:42.293

> **为了能够替换（升级）Play商店中现有的应用程序，**我们应该怎么做？

您需要**“相同的包名称和相同的签名密钥”**

或者，如果您想更改其中任何一项，您始终可以选择从 Play 商店取消发布您的应用程序。（从开发人员控制台您可以取消发布它）

然后你可以上传一个新的应用程序。

# c - 无限缓冲区 printf - 格式化的 put 直接流式传输

> ID：11367511
> 
> 赞同：1
> 
> 时间：2012-07-06T18:09:22.260
> 
> 标签：c, string, printf

我的理解是 printf 的大多数实现都依赖于类似的东西

```
vsnprintf( _acBuffer[0], sizeof( _acBuffer[0] ), pcFormat, *ptArgList ); 
```

实际处理格式，然后他们通过 puts 将它们输出到流中。

是否有任何实现可以最小化所需的 _acBuffer[0] 大小，同时保持打印所有字符串的能力？

显然是这样的：

```
printf("%s", pcReallyLongString); 
```

会是个问题。

非常感谢您的想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T21:09:30.950

你的理解是错误的。我从未见过或听说过`printf`首先将整个输出格式化为临时字符串缓冲区的实现。通常 printf 以相反的方式完成：基本构建块是`vfprintf`并且`vsnprintf`是一个包装器，它创建一个假`FILE`的，其缓冲区是目标字符串。

**编辑：**一些流行的（例如glibc）实现**确实**为某些格式使用了无限大的中间缓冲区，尤其是宽字符转换，并且当它们无法为缓冲区分配足够的内存时会意外失败。然而，这纯粹是一个低质量的实施问题；`printf`无论打印什么，任何功能都只需要少量恒定的工作空间，没有根本原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T21:56:30.423

我想说`fprintf`（或`printf`）规范的重点是允许“无缓冲”一次性实现此功能的方式。即，它将数据逐个顺序转换（如果需要转换），立即将其发送到输出并永远忘记它。该函数可以使用中间缓冲区进行数字数据转换，但这是一个固定且编译时大小不重要的临时缓冲区。

除非我遗漏了什么，否则一个正确实现的`fprintf`函数应该对结果字符串的长度绝对没有限制。您假设的实现`vsnprintf`将违反该原则。

# java - GWT：批处理 vs 可处置性 vs 无状态

> ID：11367512
> 
> 赞同：0
> 
> 时间：2012-07-06T18:09:33.697
> 
> 标签：java, javascript, gwt

我最近观看了几个 Google I/O 视频，其中 Google 开发人员展示了 GWT 的性能和安全性。在那段视频中，演讲者提到了几个*GWT 主义*：

*   客户端请求“批处理”
*   “一次性”
*   GWT app“无国籍”的追求

关于“批处理”，似乎可以将 GWT 配置为将服务器端 RPC 调用排队并一次发送它们（而不是许多微小的、阻碍性能的调用）。不幸的是，我在这里只是看不到森林：GWT 是否为您处理批处理，或者您是否必须编写执行此捆绑/批处理的逻辑？如果必须这样做，可以/应该捆绑哪些类型的调用？你怎么知道什么时候该关闭批次？

在 GWT 术语中，当有人说：

*   “客户端和服务器都是一次性的”；但
*   “视图”不是一次性的

“批处理”和“一次性”的概念与 GWT 应用程序“无状态”有何关系。据此，发言者将*无国籍状态*定义为：

*   浏览器体现了会话（？！？！）
*   服务器是无状态的 - 除了缓存（？！？！）
*   客户端永远不会注意到重新启动（？！？！）

如果有人可以帮助我具体了解这 3 个项目以及它们之间的关系，我想我会开始“了解 gwt”。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:34:20.410

> GWT 是否为您处理批处理，或者您是否必须编写执行此捆绑/批处理的逻辑？如果必须这样做，可以/应该捆绑哪些类型的调用？你怎么知道什么时候该关闭批次？

GWT-RPC 没有批处理机制。您可以（相对）轻松地添加一些，方法是在列表中排队“命令”，然后将列表作为单个 GWT-RPC 调用发送。一些项目应该用最少的努力为您做到这一点（例如 GWT-Platform）。

另一方面，RequestFactory 具有内置批处理功能：您创建一个`RequestContext`实例并对其进行批处理调用，直到您完成它为止`fire()`。

> “客户端和服务器都是一次性的”；但“观点”不是一次性的

第一个与无状态有关（例如，使用 AppEngine，您无法控制何时创建、关闭或重新启动新的服务器实例：服务器随时可能*消失*，因此不要将*状态*保存在内存中）。
第二个是关于性能的：与浏览器中的 DOM 相关的一切都很*慢*，因此构建一个新视图（堆叠在一起的小部件）是重量级的（但对于 Cell 小部件来说则不那么重要）。因此，您*不想*让它们一次性使用，即不时将它们扔掉。您宁愿保留一个视图实例，以便在应用程序的整个生命周期内重复使用。
不完全相同的“可处置性”概念。

> 浏览器体现了会话（？！？！）

GWT 由*单页应用程序*构建。您可以在应用程序的变量中简单地将*状态存储在客户端；*您不需要 cookie 或其他任何东西来在*页面*之间共享*状态*。

 *> 服务器是无状态的 - 除了缓存（？！？！）

在服务器上存储会话状态是有代价的（状态必须持久化——特别是如果服务器是*一次性*的——在服务器之间共享——当你有一个集群/在云中运行时——等等。你将花费尽可能多的资源来维持存在您的会话状态作为实际的*业务逻辑*）。

> 客户端永远不会注意到重新启动（？！？！）

HTTP 是一个断开连接的协议。如果服务器重新启动，客户端将不知道它，它不应该知道它。

> 如果有人可以帮助我具体了解这 3 个项目以及它们之间的关系，我想我会开始“了解 gwt”。

这不是关于*获得 GWT*，而是关于*获得 Web*和*获得单页 webapps*，以及如何*扩展*它们。
无论它们是在客户端使用 GWT 还是 jQuery，在服务器端使用 Java、Python 还是 .NET，都无关紧要。

阅读 REST，它总结了一切。*

# node.js - NodeJS - 为登录或未登录的用户显示不同的内容

> ID：11367522
> 
> 赞同：2
> 
> 时间：2012-07-06T18:10:16.300
> 
> 标签：node.js, authentication, express

我试图在一页上显示登录而不是用户的不同内容。

这是我用于生成 / 页面的代码：

```
app.get('/',function(req, res){
    if (!checkSession(req, res)) {
        res.render('index.ejs', {
            title: 'FrontSpeak - blog-based social network'
       })
    } else {
        res.render('index.ejs', {
            title: 'autrhorized'
        })
    }
}) 
```

检查会话功能：

```
function checkSession(req, res) {
if (req.session.user_id) {
    db.collection('users', function (err, collection) {
        collection.findOne({
            _id: new ObjectID(req.session.user_id)
        }, function (err, user) {
            if (user) {
                req.currentUser = user;
                return true;
            } else {
                return false;
            }
        });
    });
} else {
    return false;
}
} 
```

登录功能：

```
app.post('/', function(req, res){
    db.collection("users", function (err, collection) {
        collection.findOne({ username: req.body.username }, function (err, doc) {
            if (doc && doc.password == req.body.password) {
                console.log("user found");
                req.session.user_id = doc._id;
            }
            }
        });
    });

}); 
```

所以，它似乎不起作用。但是，我认为这不是显示不同内容的最佳方式。可能有一些更优雅的方法来做到这一点？谢谢！

**更新：**新的登录功能：

```
app.post('/', function(req, res){
    db.collection("users", function (err, collection) {
        collection.findOne({ username: req.body.username }, function (err, doc) {
            console.log('found user');
            if (doc && doc.password == req.body.password) {
                req.session.user_id = doc._id;
                res.redirect('/');
            };
            res.redirect('/');
        });
    res.redirect('/');  
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:25:24.240

这是一个尝试将传统的同步模型应用到 Node 的异步回调驱动模型的案例。

数据库查询完成后，您返回`true`，但您只是返回到数据库驱动程序。 `checkSession`很久以前回来了。由于如果有（如果没有）该函数返回*未定义，登录检查将**始终*评估为假。`session.user_id``false`

 *相反，您可以使用 Brandon 的建议进行`checkSession`异步，或者我建议实现中间件功能：

```
function checkLogin(req, res, next) {
    if (req.session.user_id) {
        db.collection('users', function (err, collection) {
            if (err) return next(err); // handle errors!
            collection.findOne({
                _id: new ObjectID(req.session.user_id)
            }, function (err, user) {
                if (user) {
                    req.currentUser = user;
                } else {
                    req.currentUser = null;
                }
                next();
            });
        });
    } else {
        req.currentUser = null;
        next();
    }
} 
```

现在您有两种使用中间件功能的方法。如果您想在每个请求中检查用户，只需将其添加到应用程序中：

```
app.use(checkLogin); 
```

现在每个请求都会有一个`req.currentUser`，但是您会为每个请求从数据库中获取登录状态带来性能损失。或者，如果您只需要某些请求的用户信息，请将函数粘贴在路由中：

```
app.get('/', checkLogin, function(req, res) {
    if (req.currentUser) {
        // logged in
    } else {
        // not
    }
}); 
```

[您可以在Express 文档](http://expressjs.com/guide.html#route-middleware)中了解更多相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:17:33.813

看起来您正试图`checkSession`通过检查其返回值来用作同步函数，但`checkSession`不能同步，因为它依赖于异步功能，即此处的回调：`db.collection('users', function (err, collection) ...`. 您需要修改`checkSession`为异步：

```
function checkSession(req, res, callback) {
if (req.session.user_id) {
    db.collection('users', function (err, collection) {
        collection.findOne({
            _id: new ObjectID(req.session.user_id)
        }, function (err, user) {
            if (user) {
                req.currentUser = user;
                callback(true);
            } else {
                callback(false);
            }
        });
    });
} else {
    callback(false);
}
} 
```

然后在您的请求处理程序中异步使用它：

```
app.get('/',function(req, res){
    checkSession(req, res, function(isUser) {
      if (!isUser) {
          res.render('index.ejs', {
              title: 'FrontSpeak - blog-based social network'
         })
      } else {
          res.render('index.ejs', {
              title: 'autrhorized'
          })
      }
    });
}) 
```*

# linux - 在内核内部通过网络发送数据

> ID：11367525
> 
> 赞同：-1
> 
> 时间：2012-07-06T18:10:33.510
> 
> 标签：linux, network-programming, linux-kernel, linux-device-driver

我正在 Linux 内核中编写一个通过网络发送数据的驱动程序。现在假设我要发送的数据（缓冲区）在内核空间中。我如何在不创建套接字的情况下发送数据（首先这是一个好主意吗？）。我正在寻找代码中的性能而不是简单的编码。我如何设计接收端？没有套接字连接，我可以在接收端获取和查看数据吗（如何）？如果缓冲区在用户空间中，所有这些都会改变（包括性能）（如果有的话，我会从用户那里复制:-)）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:09:27.933

您可能应该使用[netlink](http://en.wikipedia.org/wiki/Netlink)，如果您想真正与远程主机通信（例如通过 TCP/IPv6），请使用用户级代理应用程序。（所以内核模块使用 netlink 到您的应用程序代理，它可以使用 TCP，甚至通过`ssh`或 HTTP，远程发送数据，或将其存储在磁盘上......）。

我不认为让内核模块直接与远程主机通信是没有意义的（例如安全问题、过滤、路由`iptables`......）

真正的瓶颈几乎总是（物理）网络本身。1Gbit 以太网几乎总是比内核模块或应用程序可持续产生的速度慢得多（还有延迟问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:16:29.567

如果您希望在没有套接字的情况下在网络上发送数据，您需要连接到网络驱动程序并通过它们发送原始数据包，并为您想要劫持的那些过滤它们的传入数据包。我认为性能优势不会大到足以保证这一点。

我什至认为网络驱动程序中没有正常的钩子，我过去做了一些相关的事情来实现防火墙。您可以想象使用 netfilter 挂钩来执行类似的操作，以便从网络驱动程序附加到接收端。

# java - 设置 JPanel/JFrame 背景图片，我第一次

> ID：11367530
> 
> 赞同：1
> 
> 时间：2012-07-06T18:11:04.653
> 
> 标签：java, swing, jframe, jpanel

我又带着另一个非常愚蠢的问题回来了。我已经阅读了其他一些 stackoverflow 帖子，并尝试遵循建议，但无济于事。我无法将 JPanel 背景更改为图像！我尝试将图像移动到我的 c:\，所以不是这样。

请提前帮助和感谢！

登录代码：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

public class login implements ActionListener{

    JTextField gusername;
    JTextField gpassword;
    static String username;
    static String password;

    void logini() throws IOException {

        JFrame window = new JFrame("Login");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setSize(300, 250);
        window.setResizable(false);
        window.setVisible(true);

        JPanel mainp = new JPanel(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        window.add(mainp);

        BufferedImage myPicture = ImageIO.read(new File("c:\bgd.png"));
        JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
        mainp.add( picLabel );

        c.gridx = 0;
        c.gridy = 1;
        gusername = new JTextField();
        gusername.setText("Username");
        mainp.add(gusername, c);

        c.gridx = 0;
        c.gridy = 2;
        gpassword = new JTextField();
        gpassword.setText(" password ");
        mainp.add(gpassword, c);

        c.gridx = 0;
        c.gridy = 3;
        JButton login = new JButton("Login");
        mainp.add(login, c);

        login.addActionListener(this);
        login.setActionCommand("ok");
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equalsIgnoreCase("ok")){
            try {
                this.username = (gusername.getText());
                this.password = (gpassword.getText());
                System.out.println("0");

            }
            catch(NumberFormatException ex){
                System.out.println("ERROR: Could not preform function: 7424");

            }
        }
    }

} 
```

错误：

```
Exception in thread "main" javax.imageio.IIOException: Can't read input file!
    at javax.imageio.ImageIO.read(Unknown Source)
    at login.logini(login.java:34)
    at Main.main(Main.java:10) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:14:45.953

**转义路径中的反斜杠。**

反斜杠是字符串中的特殊转义字符。 `\b`是一个特殊字符，而不是反斜杠和 b。要获得反斜杠，您需要其中两个`\\`。

```
BufferedImage myPicture = ImageIO.read(new File("c:\\bgd.png")); 
```

我建议`File.separatorChar`改用平台独立性，但`C:`几乎不独立于平台。

# mysql - MySQL查询给出重复条目错误1062

> ID：11367532
> 
> 赞同：0
> 
> 时间：2012-07-06T18:11:13.967
> 
> 标签：mysql, mysql-error-1062

为什么这个查询会出错？错误是： SQL 错误 (1062): Duplicate entry '0' for key 'PRIMARY'

```
INSERT INTO `static_number_source` (`IDString`, `source`) VALUES
('RUS-001A', 'Thub'), #one
('RUS-001A', 'Fort'), #two
('RUS-002A', 'Thub'), #three
('RUS-002A', 'Fort'), #four
('RUS-003A', 'Thub'), #five
('RUS-003A', 'Fort'), #six
('RUS-004A', 'Thub'), #seven
('RUS-004A', 'Fort'); #eight 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:13:28.020

IDString 似乎设置为 PRIMARY。PRIMARY 必须具有唯一值。如果要使用具有相同值的多个值，请使用常规的非唯一 INDEX。

顺便说一句，如果您在两个字段上都有一个 UNIQUE 索引，那么它们是相似的：

```
('RUS-002A', 'Fort'), #three
('RUS-002A', 'Fort'), #four 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:11:20.753

您可以更改表以将 AUTO_INCREMENT 添加到 ID 字段，或者始终在插入时提供 Id

要添加`AUTO_INCREMENT`，只需在表中找到 id 的最大值并将 id 设置为多一个。

# sharepoint-2010 - 使用 SSRS HTML 查看器的基于表单的身份验证 SharePoint 2010

> ID：11367533
> 
> 赞同：3
> 
> 时间：2012-07-06T18:11:15.847
> 
> 标签：sharepoint-2010, reporting-services

我正在以集成模式（受信任）运行 SSRS，并且在尝试在 Sharepoint 2010 中基于表单的身份验证站点上使用 HTML 查看器时遇到问题。我发现了几篇关于在 FBA 中使用报表查看器的文章；但是，据我所知，我需要使用 HTML 查看器，因为最终目标是为最终用户无缝生成 PDF 文件。我收到的错误是“401 UNAUTHORIZED 此 SharePoint 网站上的 Reporting Services 终结点发生未知错误”。我提交的Url格式如下：http:///_vti_bin/ReportServer?//.rdl&rs:Command=Render&rs:Format=PDF。一些附加信息，如果我使用默认站点名称而不是基于表单的名称，则请求有效。

所以我的问题是双重的，我应该能够在 FBA 中做到这一点吗？如果不是，为客户生成 PDF 报告的最佳途径是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:43:46.807

首先，使用 SharePoint 运行 SSRS 很棘手。要使 SSRS 能够接收用户凭据，它必须在 kerberos 模式下运行。否则，对 SSRS 的请求将作为匿名登录（这就是您收到 401 的原因）。

现在，对于 PDF，您有几个选择：

1.  直接调用 SSRS Web 服务并生成 PDF。
2.  设置订阅并将其生成为 PDF 文件系统、电子邮件等。
3.  做你现在正在做的事情，但要启用 kerberos。

# android - Android 应用启动问题

> ID：11367536
> 
> 赞同：1
> 
> 时间：2012-07-06T18:12:00.970
> 
> 标签：android, startup-error

- 编辑此块中的主要代码 -
我正在编写的此代码在启动时出现问题。它启动应用程序 GUI 并显示“我们很抱歉，“Appname”已不幸停止工作。”

[这里是 logcat 错误][1]
我猜它与这里的启动代码有关：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dhd);

    DialogPreference dp = (DialogPreference) findPreference("mediavolume");
    dp.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

        public boolean onPreferenceChange(Preference preference,
                Object newValue) {
            SeekBar volumeBar = (SeekBar) findViewById(R.id.seekBar);
            final AudioManager manager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

            volumeBar.setMax(manager
                    .getStreamMaxVolume(AudioManager.STREAM_SYSTEM));
            volumeBar.setProgress(manager
                    .getStreamVolume(AudioManager.STREAM_SYSTEM));

            volumeBar
                    .setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
                        @Override
                        public void onStartTrackingTouch(SeekBar seekBar) {
                            Toast.makeText(volman.this, "Starting", Toast.LENGTH_LONG).show();

                        }

                        @Override
                        public void onStopTrackingTouch(SeekBar seekBar) {
                            Toast.makeText(volman.this, "Now Stopping", Toast.LENGTH_LONG).show();

                        }
                        public void onProgressChanged(SeekBar seekBar,
                                int progress, boolean fromUser) {
                            manager.setStreamVolume(
                                    AudioManager.STREAM_SYSTEM, progress,
                                    AudioManager.FLAG_SHOW_UI);
                            Toast.makeText(volman.this, "Now going Silent", Toast.LENGTH_LONG).show();

                        }
                    });

            return false;
        }
    });
}

private DialogPreference findPreference(String string) {
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:18:55.937

您必须设置内容视图。

添加后`super.onCreate(savedInstanceState);`：

```
setContentView(R.layout.your_layout); 
```

**编辑：**

这就是发生的事情。您将此代码粘贴到您的活动中。

Eclipse 给你一个错误：*“方法 findPreference(String) 未定义类型 volman”*。这是正常的，因为**您必须扩展`PreferenceActivity`**而不是`Activity`.

您做了快速修复：*创建方法 findPreference(String)*。

这创建了一个返回 null 的方法，但使您的代码编译。

这就是为什么你得到一个`NullPointerException`.

# javascript - 如何在循环中使用 WinJs.xhr？

> ID：11367539
> 
> 赞同：-3
> 
> 时间：2012-07-06T18:12:16.393
> 
> 标签：javascript, html, microsoft-metro

我想调用一个 url 30 次，我在 for 循环中使用了 WinJS.xhr，但我无法得到响应。我在循环外使用 Winjs.xhr 尝试了相同的 url，我得到了响应....我可以在循环中使用 WinJs.xhr 吗？..请帮我举个例子。

这是我试过的代码......

```
for (var i = 0; i < Ids.length; i++) 
{
    FromId[i] = data[i].id;;
    WinJS.xhr({ type: 'GET', url:"https://www.xyz.com/"+FromId[i] }).done(function (res) {
        sampleArray[i] = JSON.parse(res.responseText);
    });
} 
```

如果我在循环外使用下面的代码，我可以在 res 中看到响应

```
WinJS.xhr({ type: 'GET',  url:"https://www.xyz.com/"+FromId[i] }).done(function (res) {
    sampleArray[i] = JSON.parse(res.responseText);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:43:07.747

这似乎很清楚：

[http://msdn.microsoft.com/en-us/library/windows/apps/br229787.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229787.aspx)

WinJS.xhr 只是一个简单的 JS AJAX 调用包装器，因此没有理由在循环中运行它会导致它中断。正如其他评论者所指出的那样，几乎不可能通过更多信息来帮助您解决问题，但我的猜测是您期望某些东西可以同步工作，并且由于这是一个异步调用，因此您无法获得预期的结果你期待他们。

# android - WebView 自动保存密码？

> ID：11367543
> 
> 赞同：1
> 
> 时间：2012-07-06T18:12:25.370
> 
> 标签：android, webview

我正在开发一个基于 WebView 的应用程序，我想在其中保存所有密码，就像浏览器在编写一次密码时记住密码的方式一样。问题是，即使我使用：

```
webView.getSettings().setSavePassword(true); 
```

我仍然收到警告对话框，要求我保存密码。有没有在不询问用户的情况下保存密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:18:29.593

除非你也在开发一个将使用 webview 的浏览器......那么不，我不明白这怎么可能。

如果浏览器能够保存我输入的密码而不先询问我，我会认为这是一个安全漏洞。我个人不喜欢浏览器存储我的密码。

也许你正在以错误的方式接近这个。您保存密码的目的是什么？也许您需要一个“记住我”类型的复选框？

# php - GoDaddy 上的 MySql 连接字符串（远程服务器）

> ID：11367545
> 
> 赞同：2
> 
> 时间：2012-07-06T18:12:27.990
> 
> 标签：php, mysql, sql, database-connection, connection-string

我需要连接到 godaddy 上的数据库并插入一些值。所有代码都已到位，并且可以在 localhost 上运行。但是我不知道如何连接到在线数据库。我在他们的 Web 界面上创建数据库时选择了远程托管选项。

它不适用于 localhost，因为它们显然没有托管在同一台服务器上。

具体来说，我需要知道的是我需要写什么。

```
$con = mysql_connect("WHATINEEDTOWRITE","username","password");
//note that mysql_connect is just given as an example to help clarify the situation. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T18:17:35.657

GoDaddy 在远程主机上运行他们的数据库服务器。

因此，您的 $con 语句将类似于以下内容：

`$con = mysql_connect("USERNAME.db.123456789.hostedresource.com", "DATABASE_USERNAME", "DATABASE_PASSWORD");`

然后，您将在以下语句中选择数据库。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T18:18:16.883

很简单。

```
$con = mysql_connect("WHATINEEDTOWRITE","databasename","password"); 
```

"WHATINEEDTOWRITE" = "localhost" 大多数时候，这意味着 MySQL 位于脚本所在的同一台服务器上。编辑：看来 GoDaddy 使用远程主机，所以这样做而不是 localhost :)

"databasename" = 不不不，这是您的用户名而不是数据库名称！

“密码” = 您的密码与用户名一起使用。

有关更多信息，请参见：http: [//www.w3schools.com/php/php_mysql_connect.asp](http://www.w3schools.com/php/php_mysql_connect.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T18:16:21.367

您需要启用到您的 GoDaddy MySQL 数据库的远程连接：http: [//support.godaddy.com/help/article/4978/connecting-remotely-to-shared-hosting-databases](http://support.godaddy.com/help/article/4978/connecting-remotely-to-shared-hosting-databases)

该链接是官方的 GoDaddy 帮助文章，用于指导您这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T18:15:17.963

它不会只是“本地主机”吗？这就是通常的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T18:17:16.243

```
     $con = mysql_connect("example.com","username","password") or die (mysql_error());
     mysql_select_db("数据库",$con) 或死 (mysql_error());

```

example.com = ip / 或您的提供商/主机的 dns 名称

# facebook - Facebook Graph API 停止发送完整结果

> ID：11367548
> 
> 赞同：0
> 
> 时间：2012-07-06T18:12:48.027
> 
> 标签：facebook, facebook-graph-api

我正在对 facebook Graph 进行一个简单的查询，如下所示：

```
https://graph.facebook.com/{UserId}/feed?limit=1000&since=0&access_token={AccessToken} 
```

其中 {UserId} 和 {AccessToken} 当然是有效值。AccessToken 是从具有以下范围的 facebook 登录中检索的：

```
user_status,friends_status,user_activities,friends_activities 
```

当响应有`paging`我称之为它的`next`价值，直到没有更多的分页。

因此，当我开始测试时，我收到了至少三页包含所有用户帖子的数据，但出乎意料的是，我收到了包含所有故事的单页（有时是两页），例如：

```
A and B are now friends 
```

或者

```
A updated his cover photo. 
```

我也试过

```
https://graph.facebook.com/{UserId}/posts?limit=1000&since=0&access_token={AccessToken} 
```

结果相同。

另外，如果我改变它`{UserId}`，`me`它会按预期工作。

起初我以为我可能已经达到投票限制，但我没有收到任何错误，只是结果的一个子集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:21:00.397

从 fb 开发页面“没有 read_stream 权限的查询将只返回数据的公共视图”。

[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

# ruby-on-rails - 防止访客再次投票

> ID：11367551
> 
> 赞同：4
> 
> 时间：2012-07-06T18:13:01.927
> 
> 标签：ruby-on-rails, session, authentication, tracking, rack

# 原始问题

我想在我的页面上实现一个对访问者和用户开放的投票系统，即未经身份验证的用户可以投票。

是否有用于识别访客的导轨/机架（或其他）解决方案？

# 总结/结果：

如果您想实现一个访问者只能执行一次特定操作的系统，即投票系统。您必须将访问者分为两组：

## 不想/没有工具来欺骗投票的访问者

可以使用以下技术跟踪不操纵结果的访问者：[evercookie](http://samy.pl/evercookie/)、Webbrowser Fingerprinting ( [panopticklick](https://panopticlick.eff.org/) ) 和 IP-Blocking。

**宝石：**

*   [https://github.com/daddyz/evercookie](https://github.com/daddyz/evercookie)
*   [https://github.com/Valve/fingerprintjs](https://github.com/Valve/fingerprintjs)

**JS：**

*   [https://github.com/carlo/jquery-browser-fingerprint](https://github.com/carlo/jquery-browser-fingerprint)

**付费服务：**

*   [http://threatmetrix.com](http://threatmetrix.com)

## 想要并且可以欺骗投票的访客

想要操纵结果的访问者将会并且可以这样做。这是一个[例子](http://latimesblogs.latimes.com/technology/2009/04/4chan-time-moot.html)。您可以为这些访问者设置较高的障碍，但他们通常更容易绕过这些障碍而不是您实施它们。这个问题的答案完美地概述了其原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:15:40.610

您可以使用 cookie，但可以禁用和过期，或使用 IP 地址来识别访问者。这也可以被欺骗，并且有可能来自更大的网络，人们来自相同的IP（例如来自公司网络）。

基本上没有万无一失的解决方案。我认为如果没有什么重要的依赖，IP 地址可以“足够好”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T23:17:50.483

# 客户端软件识别

## 网络浏览器指纹识别

**panopticklick 只识别浏览器配置**，不识别人类。只是在同一台计算机上使用不同的浏览器（IE/FF/Opera/Chrome），在同一台计算机上的不同用户帐户上使用相同的浏览器（安装的插件集不同，因此浏览器指纹不同）或使用不同的浏览器计算机将“愚弄” panopticklick。

这不是 panopticklick 的弱点，因为 panopticklick 不尝试识别人类，仅识别 Web 浏览器。

“私人浏览模式”应该使浏览器指纹不那么独特。

## 饼干

**evercookie 与任何类型的 cookie 一样，是特定于用户帐户**（或计算机）的：仅使用不同的帐户或不同的计算机会给您不同的身份。（由于文件权限不同，不同用户不能互相访问cookies。）

“隐私浏览模式”如果实施得当，将清除所有 cookie，包括“超级 cookie”。

# IP地址

## 更改 IP 地址

一些订户有：

*   固定IP地址；
*   很少更改的 IP 地址；
*   一个 IP 地址会在他们拔下调制解调器一小时、几天或几周后发生变化；
*   几乎每次重新启动调制解调器时都会更改的 IP 地址；
*   每 24 小时更改一次的 IP 地址，即使他们不希望这样（因为 IP 地址更改会破坏 TCP 连接）。

这不是编造的。**我知道 ISP 拥有所有这些不同的 IP 分配策略。**但是，我没有关于这些不同类别的用户数量的统计数据。

一些 ISP 会让您为拥有一个固定的 IP 地址而付费。所以我相信，对于大多数互联网用户来说，更改 IP 地址在实践中几乎是常态。

## 代理

使用匿名代理（包括 Tor）将提供不同的 IP 地址，就像 VPN 一样。

但是所有代理用户（或 Tor 出口节点的所有用户）可能都具有相同的 IP 地址。

# 共享 IP 地址

在几乎所有情况下，家庭成员都会共享一个 IP 地址。

大多数中小型企业只有一个外部地址。这在实践中一直是网络邮件的每 IP 反垃圾邮件限制的问题。

几乎所有移动 IP 用户都与少数或大量其他用户共享相同的 IP 地址。这在实践中一直是每个 IP 反 DOS 限制的问题！服务器管理员必须列出传出 IP 地址并将它们列入白名单！每当移动 ISP 使用新的传出 IP 地址时，它的客户端都会再次被阻止，直到服务器管理员添加新的 IP 地址。

*你可能不想玩这个“游戏”。*

# python - Python 3.2 中的蛮力脚本

> ID：11367553
> 
> 赞同：5
> 
> 时间：2012-07-06T18:13:04.533
> 
> 标签：python, python-3.x, passwords, brute-force

我是编写代码的初学者，我从 Python 开始，因为它似乎是最简洁和最容易开始的（我目前有 Python 3.2）。现在我已经阅读了一些关于 python 编码的在线书籍等，我已经制作了一些小程序，仅此而已。

但是后来我想制作一个可以暴力破解随机密码的程序，例如：

```
PassWord = random.randint(0,9999) 
```

我做了一些可以尝试随机密码的东西：

```
import random
PassWord = str(random.randint(0,9999))
Trial = ' '
while Trial != PassWord:
    Trial = str(random.randint(0,9999))
    print(Trial)
    if Trial == PassWord:
        print('The password is: '+PassWord)
        input() 
```

但这并不是真正的暴力攻击，它更多的是尝试随机猜测密码。我认为蛮力攻击是首先用 1 位数字尝试所有可能性，然后是 2、3 等等。但我不知道如何做到这一点。

如果有人能说出如何创建一个程序，该程序首先检查所有可能性 1 位数字，如果可能的话，以正确的顺序（0、1、2、3 等），然后是 2、3 和 4 位数字，我将不胜感激。

然后我可以解决它，并了解有关 Python 的更多信息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T18:40:45.763

先上代码：

```
from itertools import product

chars = '0123456789' # chars to look for

for length in range(1, 3): # only do lengths of 1 + 2
    to_attempt = product(chars, repeat=length)
    for attempt in to_attempt:
        print(''.join(attempt)) 
```

`itertools.product`生成其输入的笛卡尔连接 - 在这种情况下，它被“连接”到自身。所以在第一次迭代中，每一个字符都会被打印出来。然后在下一次迭代中，由于`repeat=length`（并且`length`现在是 == 2），生成 '00'、'01' 等......值得尝试并查看输出以更好地理解它。

这也意味着您可以输入字母（大写/小写），并更改`range`函数中的上限。

它当然不会破坏代码破解的世界，但应该让您了解 Python 的灵活性和可用的工具。

我会让你检查密码是否匹配并打破循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:17:08.130

你想要这样的东西：

```
PassWord = str(random.randint(0,9999))#example password 
for i in range(10000):    #0-9999
   Trial = str(i)  
   if Trial == Password:  
       print('Found password: ' + Password) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-29T13:09:28.353

只需运行这个程序，你就会得到你想要的。但请记住更改我在代码中注释的字段的值。

```
import random
import time
import os
from tqdm import tqdm
import random
import getpass

def loading():
    for index in tqdm(range(100), desc = "loading..."):
        time.sleep(0.1)

    pss = random.randint(1, 9)
    print("found a digit-", pss)
    print("hunt will continue in 2 seconds...")

def pas():
    pas = getpass.getpass("enter password: ")
    if pas == ("root"):  #you can change it according to your need
        menu()
    else:
        end()

def login():
    usid = input("enter username: ")
    if usid == ("root"): #change this too according to your need
        pas()
    else:
        end()

def end():
    os.system('cls')
    print("okk!! bye...")
    exit()

def menu():
    os.system('cls')
    input("enter ip address:")
    os.system('cls')
    print("starting the hunt...")
    time.sleep(2)
    os.system('cls')

    loading()
    time.sleep(2)
    loading()
    time.sleep(2)
    loading()
    time.sleep(2)
    loading()
    time.sleep(2)
    loading()
    time.sleep(2)
    loading()
    time.sleep(2)
    loading()
    time.sleep(2)
    loading()
    time.sleep(2)
    loading()
    print("completed! combine the digits and that's your password...")
    end()

login() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-10T16:25:38.767

```
import random

digits=list(range(0,1000))
password=random.randint(0,1000)
eachdigit=-1
print(password)
while eachdigit!=password:
    for eachdigit in digits:
        print(eachdigit)
        if eachdigit==password:
            print("Password is found:"+str(eachdigit)+"---------------------------")
            password=str(input("Enter new password if you wish")) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-10-07T18:32:04.613

这就是我所做的，它非常无效且写得不好，我目前正试图将它放入一个函数中，以便它可以做任何长度，但它只做 4 个 atm。我使用了一串字母/数字并按顺序运行，直到答案 = 密码：

```
idea = ["a","b","c","d","e","1","2","3",.........]
var = 0
answer = ""

while answer != password:
     answer = idea[var]
     print(answer)
     var += 1 
```

如果您重视您的眼睛，请不要往下看（警告您它很乱）。

```
<pre><code>
password = input("pass:")
#idea = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9"," "]
#THE IDEA ABOVE IS THE FULL A-Z, 0-9 (takes ages)
password = input("pass:")
idea = ["a","b","c","d"]
awnser = [""] *6
var = 0
var1 = 0
var2 = 0
var3 = 0
char = 0

while awnser != password:
    awnser = idea[var]
    print(awnser)
    if var != len(idea):
        var += 1
    if var == len(idea):
        var = 0
        while awnser != password:
            awnser = idea[var]+idea[var1]
            print(awnser)
            if var != len(idea):
                var += 1
            if var == len(idea):
                if var1 != len(idea):
                    var = 0
                    var1 += 1
                if var1 == len(idea):
                    var = 0
                    var1 = 0
                    while awnser != password:
                        awnser = idea[var]+idea[var1]+idea[var2]
                        print(awnser)
                        if var != len(idea):
                            var += 1
                        if var == len(idea):
                            if var1 != len(idea):
                                var = 0
                                var1 += 1
                            if var1 == len(idea):
                                if var2 != len(idea):
                                    var = 0
                                    var1 = 0
                                    var2 += 1
                                if var2 == len(idea):
                                    var = 0
                                    var1 = 0
                                    var2 = 0
                                    while awnser != password:
                                        awnser = idea[var]+idea[var1]+idea[var2]+idea[var3]
                                        print(awnser)
                                        if var != len(idea):
                                            var += 1
                                        if var == len(idea):
                                            if var1 != len(idea):
                                                var = 0
                                                var1 += 1
                                            if var1 == len(idea):
                                                if var2 != len(idea):
                                                    var = 0
                                                    var1 = 0
                                                    var2 += 1
                                                if var2 == len(idea):
                                                    print("==============================================")
                                                    print("Password too long or characters not in string!")
                                                    print("==============================================")
                                                    break

print("==================")
print("")
input("Password = "+awnser)

</code></pre> 
```

# regex - 正则表达式：从许多匹配项中选择最短的匹配项

> ID：11367557
> 
> 赞同：2
> 
> 时间：2012-07-06T18:13:34.440
> 
> 标签：regex, perl

我正在尝试在 PERL 中编写一个将选择最短匹配的正则表达式。我写了一个可以识别许多匹配的，但我需要能够选择所有匹配中最短的。

假设我有以下文字：

```
$text = "blah BEG blah blah blah END blah blah BEG blah END blah BEG blah blah END"; 
```

我可以使用这个正则表达式来识别以 BEG 开头和以 END 结尾的三种情况，而 BEG 或 END 不在 BEG 和 END 之间。

```
/(BEG(?:(?!BEG|END).)*END)/ 
```

它捕获了这三种情况。

```
BEG blah blah blah END
BEG blah END 
BEG blah blah END 
```

我只想匹配第二个，因为它是三个中最短的。

我考虑过将所有匹配项拉到一个数组中并确定数组中最短的元素。

有没有更简单的方法将其合并到正则表达式中？

提前感谢您的想法和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:44:15.223

```
use List::Util qw( reduce );

my $shortest =
   reduce { length($a) < length($b) ? $a : $b }
      /(BEG(?:(?!BEG|END).)*END)/s; 
```

它可以完全在 Perl 正则表达式中完成（在嵌入式 Perl 代码的帮助下），但除非你绝对需要，否则它会很愚蠢。

```
my ($shortest) = /
   ( BEG (?:(?!BEG|END).)* END )
   (?!
      .*
      ( BEG (?:(?!BEG|END).)* END )
      (?(?{ length($2) >= length($1) })(*FAIL))
   )
/sx; 
```

# events - JQGrid：dataEvents 更改中的依赖关系下拉列表

> ID：11367558
> 
> 赞同：0
> 
> 时间：2012-07-06T18:13:39.103
> 
> 标签：events, drop-down-menu, jqgrid, dependencies, onchange

我正在开发一个网格，其中包含每个模块的许可列表。

我想要的是在列的组合框中进行更改时验证每 2 个事件。我使用 1 和 0 来激活/停用

第一种情况：如果我主动“写”、“修改”、“删除”或“打印”表示自选“读”

![在此处输入图像描述](../Images/558b87cafe03e2a0655e7e9287d783a2.png)

第二种情况则相反：如果禁用“读取”将自动关闭“写入”、“修改”、“删除”和“打印”

![在此处输入图像描述](../Images/7f200b83306fdaa0a30912aac0871f7d.png)

研究我发现使用输入事件功能的选项：

```
{"name":"read",
"index":"read",
"width":48,
"resizable":false,
"editable":true,
"edittype":"select",
"editoptions":{
  "value":"0:0;1:1",
  "dataEvents":[{
               "type":"change",
                "fn":function(e){
                     if($(e.target).val() == '0')
                     {
                     // actions here...
                     }
                 }
               }]
 }
} 
```

您可以更改其他列的元素......按行？

**编辑**

我的解决方案：

```
$('tr.jqgrow select[name*="read"]').live("change",function()
{   
    if($(this).val() === '0') $(this).closest('tr.jqgrow').find('select.editable').not(this).find('option:first-child').attr("selected", "selected");
});

$('tr.jqgrow select[name!="read"]').live("change",function()
{
    $(this).closest('tr.jqgrow').find('select[name*="read"]').find('option:last-child').attr("selected", "selected");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:04:39.137

在[答案中](https://stackoverflow.com/a/4480184/315935)，您将找到一个如何在 jqGrid 中实现依赖选择的示例。顺便说一句，您可以使用相同的想法`formatter: "checkbox"`。在这种情况下，实施会容易得多。*您必须手动*修改`<select>`元素或 chachboxes ，这一点很重要。

 *[另一个答案](https://stackoverflow.com/a/10851429/315935)可以显示您可以使用的另一种实现选项。*

# c# - 无法调用此函数，因为当前主机没有实现它c#

> ID：11367561
> 
> 赞同：3
> 
> 时间：2012-07-06T18:14:10.993
> 
> 标签：c#, powershell

我知道这是在这个板上，但我是新手，没有什么能真正阻碍我，所以我希望有人能提供一些见解。我收到以下错误：

无法调用此函数，因为当前主机没有实现它

这是我的代码

```
 public static void runPowershellScript(string scriptName)
    {
        RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();

        Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
        runspace.Open();

        RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);
        scriptInvoker.Invoke("Set-ExecutionPolicy Unrestricted");

        Pipeline pipeline = runspace.CreatePipeline();
        pipeline.Commands.Add(scriptName);
        pipeline.Invoke();

    } 
```

我通过的变量是我的脚本名称，它没有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:28:14.340

您可能正在使用一些特定于主机的函数，这意味着托管 PowerShell 引擎的任何进程（例如 powershell.exe、powershell_ise.exe、您的 c# 应用程序）都必须为它们提供实现。

通常，这些将包括 *-host 函数（write-host、out-host、read-host）、transcript 函数（start-transcript、stop-transcript）和其他一些函数。

# php - 使用最后一个活动文本输入框运行搜索

> ID：11367568
> 
> 赞同：-1
> 
> 时间：2012-07-06T18:15:03.893
> 
> 标签：php, javascript, html

我有三个运行相同 PHP 脚本的文本输入框。PHP 脚本检查每个是否为空并生成搜索结果页面。问题是，脚本获取第一个已满的输入框。例如，如果我先填写 A，然后填写 B，然后在 B 处于活动状态并且是最新填写的情况下运行搜索，它会返回 A 的结果。如果我先填写 A，然后填写 C，然后填写 B，然后填写 C，也会出现同样的问题。

我一直在尝试找到一种方法来获得正确的搜索，而不必求助于拆分脚本并将每个单独的脚本附加到单独的输入框中，因为以后进行更改会很痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:47:17.620

将`onfocus`事件附加到记录哪个框处于活动状态的每个框。然后，将一个附加`onsubmit`到检查哪个框上次活动的表单。空白其他两个，然后提交表格。像这样的东西（未经测试）：

**HTML：**

```
<form action="phpscript.php" onsubmit="checkLastActive();">
Input 1: <input type="text" name="box1" id="box1" onfocus="lastActive=this.id"><br>
Input 2: <input type="text" name="box2" id="box2" onfocus="lastActive=this.id"><br>
Input 3: <input type="text" name="box3" id="box3" onfocus="lastActive=this.id"><br>
<input type="submit">
</form> 
```

**JavaScript：**

```
var lastActive="";
function checkLastActive() {
    for (var i=1; i<4; i++) {
        if (lastActive != "box" + i) document.getElementById("box" + i).value="";
    }
} 
```

# c++ - Qt小部件/布局的WinForm“Dock Fill”等效？

> ID：11367570
> 
> 赞同：1
> 
> 时间：2012-07-06T18:15:05.423
> 
> 标签：c++, qt4, qt-creator, dock

从 Qt 开始（来自 C#，WinForms）我想知道相当于什么`Dock: Fill`（控件应使用所有可用空间）？

下面的屏幕截图显示了我的简单演示应用程序的结构。`QTableView`应扩展到完整的水平尺寸。在 WinForm 中，我会使用`Dock: Fill`. Qt 中有（类似的）解决方案吗？

我尝试了`SizePolicy`and `LayoutSizeRestriction`( `SetMaximumSize`)，但没有成功。

![演示应用](../Images/a6605c2e530355feab8f8a615d8d68e9.png) ![演示应用程序 UI 设计](../Images/513ab5878c133d261ed488f9ab5dd1ba.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:49:31.357

第一次使用可能有点不直观，但您只需要在`QDialog`. 右键单击对话框表单上的任意位置，然后选择“布局”。

# r - 对变量的不同值重复 sqldf

> ID：11367573
> 
> 赞同：0
> 
> 时间：2012-07-06T18:15:31.100
> 
> 标签：r, sqldf

只是一点背景：我是通过统计进入编程的，我没有太多正式的编程经验，我只是知道如何让事情发挥作用。我愿意接受任何从不同方向提出的建议，但我目前正在使用多个 sqldf 查询来获取我想要的数据。我最初是在 SAS 中开始统计编程的，我经常使用的东西之一是宏编程能力。

举一个简单的例子，假设我的表 A 如下所示：

```
Name      Sex    A    B       DateAdded
John      M      72   1476    01/14/12
Sue       F      44   3269    02/09/12
Liz       F      90   7130    01/01/12
Steve     M      21   3161    02/29/12 
```

我当前使用的 select 语句的形式是： `sqldf("SELECT AVG(A), SUM(B) FROM A WHERE DateAdded >= '2012-01-01' AND DateAdded <= '2012-01-31'")`

现在我想对 DateAdded 在二月份的输入运行相同的查询。根据我对 SAS 的经验，您将为 DateAdded 的值创建宏变量。我考虑过将其作为（非常非常慢的）for 循环运行，但我不确定如何将 R 变量传递给 sqldf，或者这是否可能。在我的表中，我在多年的数据中使用相同的查询——任何简化我的代码的方法都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:49:26.733

读入数据，将`DateAdded`列转换为`Date`类，添加`yearmon`（年/月）列，然后使用`sqldf`或`aggregate`按年/月聚合：

```
Lines <- "Name      Sex    A    B       DateAdded
John      M      72   1476    01/14/12
Sue       F      44   3269    02/09/12
Liz       F      90   7130    01/01/12
Steve     M      21   3161    02/29/12"

DF <- read.table(text = Lines, header = TRUE)

# convert DateAdded column to Date class
DF$DateAdded <- as.Date(DF$DateAdded, format = "%m/%d/%y")

# add a year/month column using zoo
library(zoo)
DF$yearmon <- as.yearmon(DF$DateAdded) 
```

现在我们有了数据并且它的格式正确，答案只是一行代码。这里有两种方法：

```
# 1\. using sqldf
library(sqldf)
sqldf("select yearmon, avg(A), avg(B) from DF group by yearmon")

# 2\. using aggregate
aggregate(cbind(A, B) ~ yearmon, DF, mean) 
```

最后两行的结果是：

```
> sqldf("select yearmon, avg(A), avg(B) from DF group by yearmon")
   yearmon avg(A) avg(B)
1 Jan 2012   81.0   4303
2 Feb 2012   32.5   3215
> 
> # 2\. using aggregate
> aggregate(cbind(A, B) ~ yearmon, DF, mean)
   yearmon    A    B
1 Jan 2012 81.0 4303
2 Feb 2012 32.5 3215 
```

编辑：

关于您按周进行的问题，请参阅[动物园快速参考小插图](http://cran.r-project.org/web/packages/zoo/vignettes/zoo-quickref.pdf)`nextfri`中的功能。

# ruby-on-rails - 具有多态关联的 Rails STI 模型，急切加载查询引用了错误的类类型

> ID：11367585
> 
> 赞同：2
> 
> 时间：2012-07-06T18:16:18.913
> 
> 标签：ruby-on-rails, polymorphic-associations, eager-loading, sti

我在这里使用的是 Rails 2.3.14，但我遇到的问题可能并不局限于这个特定版本。这是 Rails 3 中仍然存在的所有关联和急切加载功能，并且在 2.3.14 之前就已经存在。我正在从 rails 2.3.8 升级，我没有遇到下面描述的问题。

下面的代码是基于更复杂的生产系统的模型。我概述的类/模块方案是这样设置的，这是有原因的。实际上，我在这个模型中包含了比演示问题所需的更多细节，希望使系统的整体结构更加清晰。

假设我有几个可以“驱动”的域对象，包括车辆（汽车/卡车）和高尔夫球。对于其中的每一件事，我都有一个 ActiveRecord 类：

```
class Vehicle < ActiveRecord::Base
end

class Car < Vehicle
    include Driveable
end

class Truck < Vehicle
    include Driveable
end

class GolfBall < ActiveRecord::Base
    include Driveable
end 
```

首先注意`GolfBall`是一个顶层模型类，对应的数据库表是`golf_balls`. 另一方面，`Car`和`Truck`是 的子类`Vehicle`。车辆数据库是使用 STI 设置的，因此`Cars`两者`Trucks`都对应于`vehicles`表（带有`type`列微分器）。

其次，请注意，我`Drivable`在所有底层域对象（`Car`, `Truck`, `GolfBall`）上都包含了一个模块，它看起来像这样（在实际系统中，这个模块也做了很多事情，包括根据特定的设置进行设置，包括域对象）：

```
module Driven
    def self.included(base)
        base.class_eval do
            has_one :driver, :as => :driveable, :class_name => "#{self.name}Driver", :dependent => :destroy
        end
    end
end 
```

所以这些东西中的每一个都可以有一个`Driver`，并且它使用`:class_name`基于包含类名称的 a（例如，在一个with中包含类`Car`结果），因为这些引用的类中的每一个（等等......）都包含特定的业务逻辑，这是必要的协会的用途。`has_one``:class_name => "CarDriver"``CarDriver`

有一个建立多态关联的顶级`Driver`类，然后是与上述域对象驱动程序类似的子类层次结构：

```
class Driver < ActiveRecord::Base
    belongs_to :driveable, :polymorphic => true
end

class VehicleDriver < Driver
end

class CarDriver < VehicleDriver
end

class TruckDriver < VehicleDriver
end

class GolfBallDriver < Driver
end 
```

这是基于单个数据库表`drivers`，对所有子类使用 STI。

有了这个系统，我创建了一个新的`Car`（存储在`@car`下面）并将它与这样的新创建的相关联`CarDriver`（在这个模型中它被分成这些特定的顺序步骤，以反映实际系统的工作方式）：

```
@car = Car.create
CarDriver.create(:driveable => @car) 
```

这在表中创建了数据库行，`vehicles`如下所示：

```
 id   type   ... 
-----------------
 1    Car    ... 
```

表格中的一行是`drivers`这样的：

```
 id   driveable_id    driveable_type   type         ...
--------------------------------------------------------
 1    1               Vehicle          CarDriver    ... 
```

`Vehicle`是`driveable_type`相反的，`Car`因为车辆是 STI。到现在为止还挺好。现在我打开一个 Rails 控制台并执行一个简单的命令来获取一个`Car`实例：

```
>> @car = Car.find(:last)
=> #<Car id: 1, type: "Car", ...> 
```

根据日志，这是执行的查询：

```
Car Load (1.0ms)
SELECT * FROM `vehicles`
WHERE ( `vehicles`.`type` = 'Car' )
ORDER BY vehicles.id DESC
LIMIT 1 
```

然后我得到`CarDriver`：

```
>> @car.driver
=> #<CarDriver id: 1, driveable_id: 1, driveable_type: "Vehicle", type: "CarDriver", ...> 
```

这导致该查询被执行。

```
CarDriver Load (0.7ms)
SELECT * FROM `drivers`
WHERE (`drivers`.driveable_id = 1 AND `drivers`.driveable_type = 'Vehicle') AND (`drivers`.`type` = 'CarDriver' )
LIMIT 1 
```

但是，如果我尝试使用急切加载，我会得到不同的结果。从新的控制台会话中，我运行：

```
>> @car = Car.find(:last, :include => :driveable)
=> #<Car id: 1, type: "Car", ...>
>> @car.driver
=> nil 
```

这导致`nil`了司机。检查日志，第一条语句执行以下查询（常规查询和预加载查询）：

```
Car Load (1.0ms)
SELECT * FROM `vehicles`
WHERE ( `vehicles`.`type` = 'Car' )
ORDER BY vehicles.id DESC
LIMIT 1

CarDriver Load (0.8ms)
SELECT * FROM `drivers`
WHERE (`drivers`.driveable_id = 1 AND `drivers`.driveable_type = 'Car') AND (`drivers`.`type` = 'CarDriver' )
LIMIT 1 
```

如您所见，在急切加载的情况下，`Car`查询与上述相同，但`CarDriver`查询不同。它几乎是相同的，除了`drivers.driveable`类型它正在寻找`Car`它应该寻找 STI 基类名称的位置`Vehicle`，就像它在非急切加载情况下所做的那样。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:53:23.277

在阅读了几个小时的 rails 源代码之后，我很确定我明白了这一点（当然，我可能误读了某些东西）。它似乎是 Rails 2.3.9 中引入的 Rails 2.3.x 分支中的一个错误，并且从未修复。它从这个 Rails 2.3 错误报告开始：

[为预加载嵌套在多态 belongs_to 下的关联而构建的查询错误](https://rails.lighthouseapp.com/projects/8994/tickets/3233-query-built-wrong-for-preloading-associations-nested-under-polymorphic-belongs_to)

确实这是一个有效的错误，并且在 Rails 2.3.9 中的这个提交中修复了它：

[修复嵌套的多态 has_one 关联的急切加载](https://github.com/rails/rails/commit/844da12ba6acfb71a691ba32901d7acf4cbe37b4)

但是，此提交无意中破坏了 STI 类上的非嵌套多态预加载，并且他们没有针对这种情况进行测试，因此自动化测试没有捕捉到它。相关的差异在这里：

```
 360    -          conditions = "#{reflection.klass.quoted_table_name}.#{connection.quote_column_name "#{interface}_id"} #{in_or_equals_for_ids(ids)} and #{reflection.klass.quoted_table_name}.#{connection.quote_column_name "#{interface}_type"} = '#{self.base_class.sti_name}'"

 360    +          parent_type = if reflection.active_record.abstract_class?
 361    +            self.base_class.sti_name
 362    +          else
 363    +            reflection.active_record.sti_name
 364    +          end
 365    +
 366    +          conditions = "#{reflection.klass.quoted_table_name}.#{connection.quote_column_name "#{interface}_id"} #{in_or_equals_for_ids(ids)} and #{reflection.klass.quoted_table_name}.#{connection.quote_column_name "#{interface}_type"} = '#{parent_type}'" 
```

从这个差异中您可以看到，在 2.3.9 之前，对于预先加载的多态关联，它始终`self.base_class.sti_name`用作`parent_type`（即多态类型列）。按照问题中的示例，这意味着父类型列将是`driveable_type`，并且由于`Car.base_class`是`Vehicle`，它将正确匹配 on `driveable_type = 'Vehicle'`。

但是，从上述提交开始，只有在关联持有者是`abstract_class`. 这似乎是一个直接的错误；应该设置它，因此如果关联持有者是抽象的*或*sti 子类，它应该设置`parent_type`为`self.base_class.sti_name`.

幸运的是，有一种简单的方法可以解决这个问题。虽然它在任何地方的文档中都没有提到这一点，但似乎可以通过设置`abstract_class = true`sti 子类来解决这个问题，该子类包含多态 belongs_to 关联。在问题的示例中，这将是：

```
class Car < Vehicle
    abstract_class = true
    include Driveable
end

class Truck < Vehicle
    abstract_class = true
    include Driveable
end 
```

对 rails 源进行全文搜索`abstract_class`，设置似乎不会产生任何意外/不希望的后果，并且在使用真实应用程序的初始测试中，它似乎已经解决了问题。

# c# - 是否可以通过鼠标右键单击来处理 Thumb.DragDelta？

> ID：11367588
> 
> 赞同：0
> 
> 时间：2012-07-06T18:16:22.533
> 
> 标签：c#, .net, wpf, slider

```
 Thumb.DragDelta += new DragDeltaEventHandler(Thumb_DragDelta); 

```

是否可以使用 RightMouseButtonDown 而不是 LeftButtonDown 来处理此方法？

谢谢

# javascript - Kendo ui 柱形图标签

> ID：11367592
> 
> 赞同：3
> 
> 时间：2012-07-06T18:16:38.830
> 
> 标签：javascript, kendo-ui

使用 Kendo UI 柱形图，是否可以显示值为 0 的系列默认标签？标签适用于饼图和折线图。

这是我的 javascript，我没有看到任何配置选项

[http://jsfiddle.net/8YnKv/30/](http://jsfiddle.net/8YnKv/30/)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:47:05.717

这是一个 hack 解决方案，但如果您不关心十进制值，您始终可以将 0 值设置为 .00001 之类的值，然后使用 kendo.format 将其四舍五入为最接近的整数，即 0。示例 jsFiddle ：

[http://jsfiddle.net/8YnKv/31/](http://jsfiddle.net/8YnKv/31/)

现在，如果您需要保留十进制值，那么此解决方案将不适合您。我希望 Telerik 尽快提出解决方案。

# sql - 将表达式转换为数据类型 int 的算术溢出错误

> ID：11367594
> 
> 赞同：0
> 
> 时间：2012-07-06T18:16:51.553
> 
> 标签：sql

我正在将数据选择到临时表中，然后查询该表以获取报告的其他值。这是产生错误的代码，如果它有任何区别，那么临时表中大约有 3600 万条记录。它说错误出现在第一个查询的第一列。

```
SELECT SUBSCRIPTION_ALIAS,
       'Count' = 0,
       COUNT(SUBSCRIPTION_ALIAS) AS MonthChange
FROM #Temp1 A WHERE DATEDIFF(day,JOIN_DTM,'01/01/2012') < 31    
GROUP BY SUBSCRIPTION_ALIAS

UNION

SELECT B.SUBSCRIPTION_ALIAS,
       COUNT(B.SBSCRPTN_MBR_KEY) AS [Count],
       'MonthChange' = 0
FROM #Temp1 B JOIN #Temp1 A ON B.SUBSCRIPTION_ALIAS = A.SUBSCRIPTION_ALIAS
GROUP BY B.SUBSCRIPTION_ALIAS

DROP TABLE #Temp1 
```

这是临时表的语句（很丑）。错误消息是该线程的标题。

```
SELECT
  bi_communications.F_EML_RCPNT.SBSCRPTN_LIST_KEY,
  bi_communications.F_EML_RCPNT.SBSCRPTN_MBR_KEY,
  bi_communications.D_SBSCRPTN_LIST.SBSCRPTN_LIST_NM,
  bi_communications.F_EML_RCPNT.DLRY_DT_KEY,
  bi_communications.D_DT.DT_DT,

  CASE
WHEN D_SBSCRPTN_LIST.SBSCRPTN_LIST_NM = 'active-offers' THEN 'Special Offers'
WHEN D_SBSCRPTN_LIST.SBSCRPTN_LIST_NM = 'reserveamerica-offers' THEN 'RA Special Offers'
WHEN D_SBSCRPTN_LIST.SBSCRPTN_LIST_NM in
   ('active-team-sports-insider','active-tennis','active-women-news', ... (omitting excess)
   ) THEN 'Content'
    WHEN D_SBSCRPTN_LIST.SBSCRPTN_LIST_NM = 'local-events' THEN 'Local Events'
    ELSE 'Blank'
  END AS SUBSCRIPTION_ALIAS,
  bi_communications.D_SBSCRPTN_MBR.JOIN_DTM
INTO #Temp1     
FROM bi_communications.F_EML_RCPNT
    JOIN
     bi_communications.D_SBSCRPTN_LIST ON bi_communications.F_EML_RCPNT.SBSCRPTN_LIST_KEY = bi_communications.D_SBSCRPTN_LIST.SBSCRPTN_LIST_KEY
JOIN bi_communications.D_DT ON bi_communications.F_EML_RCPNT.DLRY_DT_KEY = bi_communications.D_DT.DT_KEY
    JOIN bi_communications.D_SBSCRPTN_MBR ON bi_communications.F_EML_RCPNT.SBSCRPTN_MBR_KEY = bi_communications.D_SBSCRPTN_MBR.SBSCRPTN_MBR_KEY
WHERE
  bi_communications.F_EML_RCPNT.SBSCRPTN_LIST_KEY  IN 
  ( 180740437, 180741017, 180740482, 180740438, ... )
AND bi_communications.D_DT.DT_DT BETWEEN  '01/01/2011 00:00:00' AND '01/01/2012 00:00:00' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:35:53.170

嗯，订阅别名在一个有 3400 万行的表中有 5 个左右不同的值。好吧，其中之一将至少有 600 万行。自连接将在此生成至少 36 万亿行，这很快就会在第二个查询中出现算术溢出。

你真的是这个意思吗？

```
SELECT B.SUBSCRIPTION_ALIAS, COUNT(B.SBSCRPTN_MBR_KEY) AS [Count],'MonthChange' = 0
FROM #Temp1 B JOIN #Temp1 A
     ON B.SUBSCRIPTION_ALIAS = A.SUBSCRIPTION_ALIAS
GROUP BY B.SUBSCRIPTION_ALIAS 
```

这实质上是将计数的行数平方。我猜错误在第二个子查询中；位置报告不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:23:26.927

是否有可能您`JOIN_DTM`的日期无效（超出范围或仅为空）然后 DATEDIFF 运行它，将其转换为 int 并导致错误？

# eclipse - maven 和 eclipse - 对我的项目的依赖

> ID：11367596
> 
> 赞同：0
> 
> 时间：2012-07-06T18:17:04.923
> 
> 标签：eclipse, maven, m2eclipse

我有 2 个项目：`MyApp`和`MyUtis`.

我想`MyUtils`作为依赖添加到`MyApp`. 它几乎可以工作。我可以构建`MyAppl`依赖`MyUtils`并创建 jar 文件。从命令行可以。

但我对日食有疑问。我有一个编译的`MyUtils`jar 文件在我的本地 maven 存储库中，但是当我在同一个工作区和 eclipse 中没有时`MyApp`，eclipse 中的项目看不到。当我将项目添加到我的 Eclipse 工作区时，必须在 Eclipse 中打开该项目，我可以看到来自.`MyUtils``MyUtils``MyUtils``MyUtils``MyAppl`

你能帮助我吗？`MyAppl`是否可以在不将`MyUtils`项目添加到同一工作区的情况下添加依赖项？

在`MyAppl`项目中，我`MyUtils`在 Eclipse 的“引用库”中看不到 jar 文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:05:33.750

如果没有 maven 插件，Eclipse 不知道在哪里可以找到您的库。我建议安装[m2e](http://www.eclipse.org/m2e/)。Eclipse 4.2 Java（不是 Java EE）已经安装了它。然后，eclipse 能够解决您的 .jar 依赖关系。

请注意，您必须安装 MyUtils.jar 以便该 jar 在您的本地存储库中可用，或者您必须将其部署在 Nexus 或 Artifactory 等存储库中。

（您也可以只将 jar 添加到构建路径，但是您必须管理两个依赖项，一个在 pom.xml 中，一个在 Eclipse 项目中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:17:24.473

@Behe 的回答是完全合理的，但是如果您不想向 Eclipse 添加新插件，还有另一种解决方案。您可以在命令行上运行：

```
mvn eclipse:eclipse 
```

不过有两个问题：

1.  每次 MyApp 更改其依赖项时，您都必须重新运行它
2.  每次 MyUtils 发生变化（任何事情）时，您都必须重新安装到本地 maven 存储库。

这有点痛苦，但如果 MyUtils 没有太大变化并且 MyApp 没有经常更改其类路径，这可能是比 m2eclipse 更好的解决方案。

# objective-c - 初始化器和复制

> ID：11367600
> 
> 赞同：4
> 
> 时间：2012-07-06T18:17:10.957
> 
> 标签：objective-c, automatic-ref-counting

我刚刚阅读了[Craig Hockenberry](https://stackoverflow.com/users/132867/chockenberry)的一篇关于[**ARC 和 copy**](http://furbo.org/2012/05/04/arc-and-copy/)的简短博客文章。我现在的问题是传递给分配给实例变量的初始化程序的参数是否应该始终使用`copy`？还是取决于实例变量的类型？

```
#import "MyObject.h"

@implementation MyObject {
    SomeType *_ivar1;
    SomeOtherType *_ivar2;
}

-(id)initWithParam1:(SomeType *)param1 andParam2:(SomeOtherType *)param2
{
    if ((self == [super init])) {
        _ivar1 = [param1 copy]; // Always good
        _ivar2 = [param2 copy]; // practice?
    }

    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:52:38.943

我认为理解这篇文章的关键在于这个声明：

> 因为我认为在 -init 期间使用访问器是一个坏主意，`@property`所以从不使用由定义的复制语义，并且 ARC 很乐意保留引用而不是复制它。

我认为克雷格是在专门谈论以下案例：

```
@interface MyObject : NSObject {
    SomeType *_ivar1;
}
-(id)initWithParam1:(SomeType *)param1;
@property (copy, nonatomic) SomeType* prop1;
@end

@implementation MyObject
@synthesize prop1 = _ivar1;
-(id)initWithParam1:(SomeType *)param1 {
    if ((self == [super init])) {
        /*
        Craig could have called

        self.prop1 = param1;

        but he believes that it's a bad idea to call accessors
        from the initializer, so he calls copy explicitly.
        */
        _ivar1 = [param1 copy];
    }
    return self;
}
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T20:22:49.177

取决于变量的类型和意图。

对于简单的类型——NSString、NSArray、NSNumber 等等——你使用复制是因为你通常希望存储的类型是不可变的。也就是说，拥有一个`firstName`可以通过传入`NSMutableString`.

对于更复杂的类——封装状态和功能的类——你通常不想完全复制它，因为状态可能会随着时间而改变。例如，如果您的应用程序是一个流式视频应用程序，它有一个 VideoPlayer 实例来播放封装在 StreamingVideo 实例中的视频，您不会想要复制 StreamingVideo，因为它的内部状态会随着下载更多数据而不断变化（或发生错误）。

当您想要一个不可变的状态快照时使用Ie `copy`，当您希望对象 A 连接到 B 以更改/监视/查询 B 的状态时使用引用。

而且，是的，您希望它保持一致。如果一个属性是`copy`并且您有一个设置该属性的便利初始化程序，请确保该便利初始化程序也复制设置给该属性的任何内容。

# javascript - jqplot 在图上标注一点

> ID：11367603
> 
> 赞同：1
> 
> 时间：2012-07-06T18:17:24.173
> 
> 标签：javascript, jqplot

我有一个包括两条线（一条水平线和一条抛物线）的图形，我想显示交叉点的值并用文本“MSY”标记它。我尝试使用 option `pointLabels`，但似乎我没有找到正确的方法。谁能给我一些提示？这是问题的[演示](http://jsfiddle.net/godhong/JWhmQ/289/)。

jQuery代码：

```
$(document).ready(function() {
    $.jqplot.config.enablePlugins = true;
    var s1 = [[0.0, 0.0], [1.0, 0.036], [2.0, 0.064], [3.0, 0.084], [4.0, 0.096], [5.0, 0.1], [6.0, 0.096], [7.0, 0.084], [8.0, 0.063], [9.0, 0.036], [10.0, 0.0]];

    $.jqplot('chart1', [s1], {
        seriesDefaults: {
            showMarker: false,
            pointLabels: {
                show: false
            }
        },
        axes: {
            xaxis: {
                label: 'X label',
                pad: 0
            },
            yaxis: {
                label: 'Y label',
                labelRenderer: $.jqplot.CanvasAxisLabelRenderer
            }
        },
        legend: {
            show: true,
            location: 'ne',
            placement: 'inside',
            fontSize: '11px'
        },
        canvasOverlay: {
            show: true,
            objects: [
                {
                horizontalLine: {
                    y: 0.1,
                    color: 'rgb(100, 55, 124)',
                    show: true,
                }}
            ]
        },
        pointLabels: {
            show: true,
            labels: [[5, 0.10]],
            hideZeros: true
        }
    })
})​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:57:17.277

没有直接的解决方案，但假设抛物线是均匀的。我只是做了一些假设来计算抛物线的顶点。它只是一个近似值。并准备了一个可以馈送到系列标签的数组。

```
var k = Math.round(s1.length / 2); //Assuming your Parabola to be uniform
    var l = [];
    var i=0;
    while(i<(k-1))
    {
    l.push("");
        i++;
    }
    l.push('MSY'); 
```

现在我们有了 l 数组，我将它提供给 series 选项以获得所需的结果。

```
 series: [
            {
            pointLabels: {
                show: true,
                labels: l
            }}], 
```

我已经对小提琴进行了必要的更改并对其进行了更新[http://jsfiddle.net/JWhmQ/292/](http://jsfiddle.net/JWhmQ/292/)。我建议您找到一个小插件或构建一个小脚本，它可以为您提供抛物线的尖端或顶点，并使用上述内容。它会解决你的问题。

# java - 如何将字符串转换为位然后转换为 int 数组 - java

> ID：11367611
> 
> 赞同：5
> 
> 时间：2012-07-06T18:17:42.613
> 
> 标签：java, string, int, bit, bits

如何在Java中将字符串转换为位（不是字节）或位数组（我稍后会做一些操作）以及如何转换为整数数组（每32位转换为整数然后将其放入数组中？我有从未在 Java 中进行过这种转换。

```
String->array of bits->(some operations I'll handle them)->array of ints 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T18:21:44.290

```
ByteBuffer bytes = ByteBuffer.wrap(string.getBytes(charset));
  // you must specify a charset
IntBuffer ints = bytes.asIntBuffer();
int numInts = ints.remaining();
int[] result = new int[numInts];
ints.get(result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T12:11:23.700

这就是答案

```
String s = "foo";
      byte[] bytes = s.getBytes();
      StringBuilder binary = new StringBuilder();
      for (byte b : bytes)
      {
         int val = b;
         for (int i = 0; i < 8; i++)
         {
            binary.append((val & 128) == 0 ? 0 : 1);
            val <<= 1;
         }
      //   binary.append(' ');
      }
      System.out.println("'" + s + "' to binary: " + binary); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:20:05.700

你正在寻找[这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#getBytes%28%29)：

```
string.getBytes(); 
```

不是列表，它是一个数组，但您可以稍后使用它，甚至将其转换为整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:24:14.953

好吧，也许您可​​以跳过字符串到位的转换并直接转换为整数数组（如果您想要的是每个字符的 UNICODE 值），使用`s.toCharArray()`where`s`是一个`String`变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T18:24:15.137

这会将“abc”转换为字节，然后代码将以相应的 ASCII 码（即 97 98 99）打印“abc”。

```
byte a[]=new byte[160];
String s="abc";
a=s.getBytes();
for(int i=0;i<s.length();i++)
{
    System.out.print(a[i]+" ");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T18:25:56.200

可能是这样（我当前的计算机中没有编译器，也没有测试它是否工作，但它可以帮助你一点）：

```
String st="this is a string";
byte[] bytes=st.getBytes();
List<Integer> ints=new ArrayList<Integer>();
ints.addAll(bytes); 
```

如果编译器失败

```
ints.addAll(bytes); 
```

你可以用

```
for (int i=0;i<bytes.length();i++){
   ints.add(bytes[i]);
} 
```

如果你想得到准确的数组：

```
ints.toArray(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T18:35:43.120

请注意，字符串是一个字符序列，在 Java 中，每个字符数据类型都是一个 16 位 Unicode 字符。它的最小值为“\u0000”（或 0），最大值为“\uffff”（或 65,535，包括在内）。为了获得 char 整数值，请执行以下操作：

```
 String str="test";
    String tmp="";

    int result[]=new int[str.length()/2+str.length()%2];
    int count=0;

    for(char c:str.toCharArray()) {
         tmp+=Integer.toBinaryString((int)c);
         if(tmp.length()==14) {
            result[count++]=Integer.valueOf(tmp,2);
            //System.out.println(tmp+":"+result[count-1]);
            tmp="";
         }
    }

    for(int i:result) {
        System.out.print(i+" ");
    } 
```

# sql - 查询不返回所有结果

> ID：11367616
> 
> 赞同：0
> 
> 时间：2012-07-06T18:18:02.857
> 
> 标签：sql, sql-server, select, group-by, average

我有 881 行下面的查询应该返回，但只返回 744：

```
SELECT MIN(DateTime),AVG(ISNULL((Convert(decimal(10,3),SCR1_EXHAUST_GAS_TEMP)),0))
FROM jmusa_LOG1
GROUP BY DATEPART(HH,DateTime),DATEPART(DD,DateTime)
ORDER BY MIN(DateTime) 
```

现在，如果我分别运行这两个查询，我分别得到 588 和 293，这等于我需要的 881：

```
SELECT MIN(DateTime),AVG(ISNULL((Convert(decimal(10,3),SCR1_EXHAUST_GAS_TEMP)),0))
FROM jmusa_LOG1
WHERE SCR1_EXHAUST_GAS_TEMP IS NULL
GROUP BY DATEPART(HH,DateTime),DATEPART(DD,DateTime)
ORDER BY MIN(DateTime) 
```

上述语句的主要区别在于 WHERE 语句。

```
SELECT MIN(DateTime),AVG(ISNULL((Convert(decimal(10,3),SCR1_EXHAUST_GAS_TEMP)),0))
FROM jmusa_LOG1
WHERE SCR1_EXHAUST_GAS_TEMP IS NOT NULL
GROUP BY DATEPART(HH,DateTime),DATEPART(DD,DateTime)
ORDER BY MIN(DateTime) 
```

此处也存在相同的关键差异，请注意其中一个具有 IS NULL 和另一个 IS **NOT** NULL的区别

**现在有人现在为什么会发生这种情况？我可能的错误是什么导致第一次提到的查询不返回所有 881 结果？**

数据库管理器：SQL Server 2008 R2 和 SSMS 日期格式（如果需要）：YYYY-MM-DD HH:MM:SS.000

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:22:45.163

您有以下组合：

```
DATEPART(HH,DateTime),DATEPART(DD,DateTime) 
```

其中 DATEPART(HH,DateTime),DATEPART(DD,DateTime) 采用 NULL 和非 NULL 值。

换句话说，由两个单独的查询定义的组重叠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:31:45.530

您真的确定 HH、DD 和 NULL(SCR1_EXHAUST) 的组合是唯一的吗？

如果两行，即使它们具有不同的 DateTimes，但设法具有相同的 HH 和 DD，并且一个具有 NULL SCR1_EXHAUST_GAS_TEMP 而另一个具有不同的空相同，则 GROUP BY 会将它们合并为一行。

在这种情况下，您也需要在 ISNULL(SCR1_EXHAUST_GAS_TEMP) 上进行分组。

```
SELECT MIN(DateTime),AVG(ISNULL((Convert(decimal(10,3),SCR1_EXHAUST_GAS_TEMP)),0))
FROM jmusa_LOG1
GROUP BY ISNULL(SCR1_EXHAUST_GAS_TEMP, 0)=0, DATEPART(HH,DateTime),DATEPART(DD,DateTime)
ORDER BY MIN(DateTime) 
```

...否则，也许 744 行**实际上**是您需要的。

现在，如果您想查看所有日期，但对于其中一些日期，您有垃圾值，那么您需要：

*   通过提取 YYYY、MM、DD、HH 的不同值来准备第一组，这将是您的“日历”
*   准备第二组，您将在其中平均非空值 temp，按 YYYY、MM、DD 和 HH 分组
*   LEFT 将日历与数据连接起来，在 YYYY、MM、DD 和 HH 上连接并获得这些数据，加上 TEMP，并按 y、m、d、h 排序。

这会给你类似的东西，

```
Year Mo Da HH Temp
2012 07 07 00  750
2012 07 07 01  633
2012 07 07 02  NULL    <-- from 02:00 to 02:59 we only have junk!
2012 07 07 03  660     (actually, when going from summer time to winter time...)
2012 07 07 04  680 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:40:18.447

以下查询应向您显示 2 组中重叠的行：

```
SELECT DATEPART(HH,DateTime),DATEPART(DD,DateTime)
FROM jmusa_LOG1
WHERE SCR1_EXHAUST_GAS_TEMP IS NULL
GROUP BY DATEPART(HH,DateTime),DATEPART(DD,DateTime)

intersect

SELECT DATEPART(HH,DateTime),DATEPART(DD,DateTime)
FROM jmusa_LOG1
WHERE SCR1_EXHAUST_GAS_TEMP IS NOT NULL
GROUP BY DATEPART(HH,DateTime),DATEPART(DD,DateTime) 
```

# php - 如何限制分页中显示的页码？

> ID：11367619
> 
> 赞同：2
> 
> 时间：2012-07-06T18:18:25.793
> 
> 标签：php, pagination

我正在尝试限制显示的分页。我的网站有 500 多个页面，所有 500 多个数字都显示在分页中。

我试图像这样限制它：

```
Prev 1 2 3 4 5 6 Next 
```

我的代码：

```
$skin = new skin('site/pagination'); $pagination = '';
if ($pages >= 1 && $page <= $pages) {
    for ($x=1; $x<=$pages; $x++) {
        $TMPL['pagination'] = ($x == $page) ? '<strong><a href="/writer/'.urlencode($name).'/'.$x.'">'.$x.'</a></strong> ' : '<a href="/writer/'.urlencode($name).'/'.$x.'">'.$x.'</a> ';
        $pagination .= $skin->make();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T21:16:14.923

chnage解决的分页页数限制问题

```
for ($x=1; $x<=$pages; $x++) 
```

到

```
for($x = max(1, $page - 5); $x <= min($page + 5, $pages); $x++) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T18:23:09.713

你期望这会做什么？：

```
for ($x=1; $x<=$pages; $x++) 
```

它将为每个页面创建一个条目。如果您不希望这样做，请限制它的意义：

```
for ($x=1; $x <= min(5, $pages); $x++) 
```

更好的是考虑当前页面：

```
for ($x=max($curpage-5, 1); $x<=max(1, min($pages,$curpage+5)); $x++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:30:50.040

```
//Let's say you want 3 pages on either side of your current page:

$skin = new skin('site/pagination'); $pagination = '';
$currentPage = get the current page number however you have it stored;

// set the lower bound as 3 from the current page
$fromPage = $currentPage - 3;

// bounds check that you're not calling for 0 or negative number pages
if($fromPage < 1) {
    $fromPage = 1;
}

// set the upper bound for what you want
$toPage = $fromPage + 7; // 7 is how many pages you'd like shown

// check that it doesn't exceed the maximum number of pages you have
if($toPage > $maxPages) {
    $toPage = $maxPages;
}

// iterate over your range
for ($x=$fromPage; $x<=$toPage; $x++) {
    $TMPL['pagination'] = ($x == $page) ? '<strong><a href="/writer/'.urlencode($name).'/'.$x.'">'.$x.'</a></strong> ' : '<a href="/writer/'.urlencode($name).'/'.$x.'">'.$x.'</a> ';
    $pagination .= $skin->make();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T16:08:05.393

对于大量页面，请考虑使用“对数”分页显示链接。在此处查看我的答案（包括 PHP 代码）：

[如何为很多很多页面进行页面导航？对数页面导航](https://stackoverflow.com/q/7835752/999120)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-28T07:11:16.750

我尝试了 wallyk 和 Hemang 提供的答案，但它们不适合我的分页案例。他们的答案有时会显示比范围更少的链接。我不得不添加一些 max 和 min 语句。

这是我对 Javascript 代码的看法：

```
var minPage = Math.max(Math.min(currentPage - (range / 2), totalPages - range), 0);
var maxPage = Math.min(Math.max(currentPage + (range / 2), range), totalPages); 
```

范围是始终显示的链接数。totalPages 是要迭代的总页数。currentPage 是当前显示的页面。

请注意，我的分页索引是基于 0 的。

# html - 悬停时表格单元格边框更改

> ID：11367623
> 
> 赞同：0
> 
> 时间：2012-07-06T18:18:42.247
> 
> 标签：html, css, wicket

我正在做一个 webapp，我有一个由 wicket ListView 生成的表。该应用程序所做的是，当鼠标悬停在一个单元格上时，该应用程序将通过 ajax 填充一个信息面板，我想要的是更改单元格边框，以便用户可以知道信息与哪个单元格相关。目前我在css中有以下代码。（scroll-content-item 是表的类）

```
scroll-content-item td:hover{
border-style:outset;
border-width:5px;
border-color:#0000ff;} 
```

这确实在悬停时给出了边框，但是一旦用户将鼠标移到单元格之外，边框就消失了。我想要的是一种只要鼠标不移动到另一个单元格就可以使边框保持不变的方法。有什么办法可以让边框一直保持到鼠标移动到另一个单元格上？我很感激任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T18:22:22.330

不能用 CSS 做到这一点。不过你可以使用 JS。这是一个使用[jQuery](http://jquery.com/)的示例。

```
$("td").hover(function() {
    $("td").removeClass('highlight');
    $(this).addClass('highlight');
});​ 
```

[**演示**](http://jsfiddle.net/4nMwg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:13:02.033

这是我的最终解决方案：

```
<!DOCTYPE HTML>
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <style>
  .highlight{
    border-style:outset;
    border-width:3px;
    border-color:#0000ff;
  }
  </style>
  <script type="text/javascript">
  $(document).ready(function(){
    $("td").hover(function(){
      $("td").removeClass('highlight');
      $(this).addClass('highlight');
    });
  });
  </script>
</head>
<body>
  <table class="waypointsTable" border="1">
    <tbody>
      <tr>
        <td>some text</td>
        <td>some text</td>
        <td>some text</td>
        <td>some text</td>
      </tr>
    </tbody>
  </table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T10:49:00.480

```
table {
    border-collapse: collapse;
}
td {
    border-top: 1px solid black;
    border-left: 1px solid black;
    border-right: none;
    border-bottom: none;
}

tr td:last-child {
    border-right: 1px solid black;
}

tr:last-child td {
    border-bottom: 1px solid black;
}

td:hover {
    border: 1px solid red !important;
} 
```

# php - 我的 PHP PDO 类不起作用

> ID：11367627
> 
> 赞同：1
> 
> 时间：2012-07-06T18:19:54.450
> 
> 标签：php, database, pdo

**这是 Database.php**：

```
<?php
/*Data Base Class
* MySQL - InnoDB 
* PHP - PDO (PHP Data Object -So we could change databases if needed)
*/
class Database extends PDO{
    private $DBH;

    function __construct($host, $dbname, $user, $pass){
        try {
            $this->DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
        } catch (PDOException $e) {  
            return $e->getMessage();  
        }
    }

    public function alteration_query($sql){
        /* Begin a transaction, turning off autocommit */
        $this->DBH->beginTransaction();
        try{
            $count = $this->DBH->exec($sql);
            $this->DBH->commit();
            return $count;
        }catch (PDOException $e) {
          $this->DBH->rollback();
          return  $e;
        }
    }
}
?> 
```

**这是 test.php**：

```
<?php
require('Database.php');
$dbo = new Database('***.***.com','***','***','***');
echo $dbo->alteration_query('DELETE * from T_Table');
?> 
```

出于某种原因，它不会给我一个错误或删除 T_table 的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:30:12.667

编辑：您的情况的问题是该参数被调用`$sql`，但您正在使用`$query`它来执行它（在alteration_query 方法中）。下次，请启用错误报告，和/或使用可以显示这些错误的像样的 IDE。像这样：

![例子](../Images/8a48cde8339bb9b20d5339b365e1730b.png)

EDIT2：将 PDO 的错误模式设置为异常，这样任何错误都会引发异常。请参阅更新的代码。

不要在函数内部捕获异常，在外部执行：

```
<?php
/*Data Base Class
* MySQL - InnoDB 
* PHP - PDO (PHP Data Object -So we could change databases if needed)
*/
class Database
{
    private $DBH;

    function __construct($host, $dbname, $user, $pass)
    {
        $this->DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
        //Set PDO to throw exceptions on errors!
        $this->DBH->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }

    public function alteration_query($sql)
    {
        /* Begin a transaction, turning off autocommit */
        $this->DBH->beginTransaction();
        $count = $this->DBH->exec($query);
        $this->DBH->commit();
        return $count;
    }
}

try {
    $pdo = new Database("localhost", "dbname", "user", "pass");
    $pdo->alteration_query("SELECT * FROM wrong_table");
}
catch (PDOException $e) {
    die("An error has occured! " . $e->getMessage());
} 
```

这样，您可以准确地在需要的地方捕获错误，而不是在函数内部强制它（这有点超出了异常的重点）。

另外，从手册中：

> 当脚本结束或连接即将关闭时，如果有未完成的事务，**PDO 会自动回滚**。这是一种安全措施，可帮助避免在脚本意外终止的情况下出现不一致 -**如果您没有明确提交事务，则假定出现问题，因此为了数据的安全而执行回滚**。

异常会停止函数的执行，这意味着`commit()`永远不会发生，并且会回滚。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T18:21:38.157

试试这条线：

```
$this->DBH = new parent::__construct("mysql:host=$host;dbname=$dbname", $user, $pass); 
```

原因：__construct 覆盖了主类函数。我想这就是为什么，真的不确定。

如果它不起作用，请尝试`parrent::PDO`. 我很确定这是一个覆盖问题。

# ios - ASI HTTP OAuth 2 身份验证

> ID：11367628
> 
> 赞同：1
> 
> 时间：2012-07-06T18:20:00.193
> 
> 标签：ios, asihttprequest, oauth-2.0

我一直在尝试寻找一个好的解决方案，使用 ASI HTTP 库通过 OAuth 2.0 对用户进行身份验证。我来的有点短。有谁知道将它添加到 ASI HTTP 的库？我发现一个只适用于 OAuth 1.0，另一个是向 OAuth 请求添加方法，但没有一个可以处理登录等。

非常感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:37:06.280

我看到一些实现浮动。这个问题也被问到[了这里](https://stackoverflow.com/questions/6920834/how-to-make-asihttprequest-support-oauth2)。[这](https://github.com/veritech/FROAuth2Request)组类似乎增加了支持。

我实际上建议切换到[AFNetworking](https://github.com/AFNetworking/AFNetworking)之类的东西，因为不再更新/支持 ASIHTTPRequest。如果你这样做，有一个官方扩展来做你在[这里](https://github.com/AFNetworking/AFOAuth2Client)问的事情。

# jquery - 带有 jquery 表单验证的单选按钮列表

> ID：11367631
> 
> 赞同：1
> 
> 时间：2012-07-06T18:20:16.977
> 
> 标签：jquery, asp.net, jquery-validate, validation

我有一个像这样的单选按钮列表，我正在尝试将其设为必填字段并使用表单验证（jquery 验证插件）。

```
 <asp:RadioButtonList ID="PlateType1" runat="server" CssClass="rbclass required">
                    <asp:ListItem>New</asp:ListItem>
                    <asp:ListItem>Renewal</asp:ListItem>
                 </asp:RadioButtonList> 
```

显然，在幕后，asp.net 引擎生成了一个表格，因此表单验证插件不理解 CssClass 所需的功能。所以它从不验证我的列表，尽管我在提交时没有选择任何内容。我如何重写以便可以使用 jquery 验证插件？

我的 rbclass 是

```
 .rbclass
           {
            float:left;
            display:block;

            } 
```

通过萤火虫检查元素时，这就是正在发生的事情。标签 class="error" 在单选按钮之后生成。我该如何控制它，以便它在 New 之后。

```
 <td>
               <input id="MainContent_PlateType1_0" class="ui-wizard-content ui-helper-reset ui-state-default required error" type="radio" value="New" name="ctl00$MainContent$PlateType1">
               <label class="error" for="ctl00$MainContent$PlateType1" generated="true">This field is required.</label>
                <label for="MainContent_PlateType1_0">New</label>
             </td> 
```

这是我更新的标记，它引用了生成的 id 名称

```
 <label for="PlateType1" class="rblabel">This plate is: <span class="required_field">*</span></label>
                 <asp:RadioButtonList ID="PlateType1" runat="server" CssClass="rbclass">
                    <asp:ListItem>New</asp:ListItem>
                    <asp:ListItem>Renewal</asp:ListItem>
                 </asp:RadioButtonList> 
                 <span>
                  <label class="error" for="ctl00$MainContent$PlateType1" >Please select either New or Renewal</label>
                  </span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:23:29.037

你可以在文档就绪处理程序上有这样的东西

```
$("#<%= PlateType1.ClientID %> input").addClass("required"); 
```

或者如果你想在外部 js 文件中使用它

```
$(".rbclass input").addClass("required"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:25:23.000

试试这个：

```
 $(document).ready(function(){
    $('.rbclass input').addClass('required') // or $('#PlateType1')...
  }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T10:25:15.130

在运行时为 Radiobuttonlist 添加一些属性（data-type = radio, data-required=1

然后下面的脚本 vil validate(multiple) radiobuttonlist

```
 function validateRadioBoxes() {
        var isValid = true;
        var radioButtonLists = $('table[data-type="radio"][data-required="1"]');
        radioButtonLists.each(function (key) {
            isValid = ($(this).find("input[type=radio]:checked").length>0);
            if (!isValid) {
                $(this).css({
                    "border": "1px solid red",
                    "background": "#FFCECE"
                });
            }
            else {
                $(this).css({
                    "border": "",
                    "background": ""
                });
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-28T13:36:19.873

**ASP 代码：**

```
<asp:RadioButtonList ID="rdbGender" runat="server" RepeatDirection="Horizontal">
    <asp:ListItem Value="Male">Male</asp:ListItem>
    <asp:ListItem Value="Female">Female</asp:ListItem>
</asp:RadioButtonList> 
```

**jQuery代码：**

```
if( $("#rdbGender input:radio:checked").val()==undefined)    
alert("Please Select Gender"); 
```

# c++ - 在 C++ 中使用向量和映射

> ID：11367633
> 
> 赞同：-3
> 
> 时间：2012-07-06T18:20:34.990
> 
> 标签：c++, vector

我有特定格式的数据，我想通过 C++ 中的向量/对/映射来存储它们。例如：

```
Group A          Group B   Group C  ........
John             Matt      Shawn            
Jane             Liam      Tom              
.
.
. 
```

其中可以有任意数量的组和任意数量的名称（所有字符串）。我希望形成包含任意数量名称的组（可以是任意数量）。所以我尝试将它们声明为一张地图或一对。上面的格式是我要存储的。我尝试以这种形式进行：

```
Map<vector<int>, vector<string> > groups;
groups[i] = names.at(i); 
```

不工作。

该方法的代码是：-

```
void form_groups(vector<string> teams){
          pair<vector<int>, vector<string> > groups;
          int num_teams_in_grp = 0;
          int group_num = 1;
          int i = 0;
          while( i < teams.size())
                  {
                          groups[group_num] = teams.at(i++);
                          num_teams_in_grp++; 
                  }       
                  group_num++;
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:41:21.730

您对格式含糊不清，因此我将做出以下假设。您有一些组名称和一些组，每个组都被定义为一组成员。

我建议像这样存储它们：

```
#include <map>
#include <set>

...

// members of groups stored in sets, keyed by group name
map<string, set<string> > groups; 

...

// to access groups:
set<string>& somegroup      = groups["Minions"];
set<string>& someothergroup = groups["Judicators"]; 
```

使用您的特定数据格式将人员添加到组中，我假设为：

```
Group1 Group2 Group3 ... GroupN
Member1_Group1 Member2_Group1 Member3_Group1 ... MemberM_Group1
...
Member1_GroupN Member2_GroupN Member3_GroupN ... MemberM_GroupN 
```

您必须跟踪每个组名称的索引，以便您可以按行跟踪您应该向哪个组添加成员。为此，您可能会使用类似以下 C++ 的伪代码：

```
vector<string> groups_by_index;            // stores group names by index numbers
int current_line = 0;                      // stores the index of the group to add to

for each item on line:                     // store group names by index
    groups_by_index.push_back(item);

for each remaining line:                   // loop over each groups members
    for each item on line:
        groups[current_line].insert(item); // add member to group
    ++current_line;                        // increment group index 
```

# powershell - 使用 powershell 获取缺少驱动程序的设备列表

> ID：11367639
> 
> 赞同：2
> 
> 时间：2012-07-06T18:20:51.153
> 
> 标签：powershell, powershell-2.0

这是在 Windows XP pro 系统上（是的，我知道旧操作系统）我一直在寻找一种方法来获取所有未安装驱动程序的设备的列表，或者正在使用的驱动程序存在问题。

我试过了

```
 $foo = Get-WmiObject Win32_PNPEntity | Where-Object{$_.ConfigManagerErrorcode -ne 0} 
```

问题在于，它似乎并没有得到所有的例外。
例如，具有指纹扫描仪的 HP 笔记本电脑在设备管理器中显示为其他设备 - USB 设备。使用我列出的一个衬垫没有检测到这一点。

有没有办法使用 powershell 获取一系列缺少的驱动程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-25T13:09:48.657

```
#For formatting:
    $result = @{Expression = {$_.Name}; Label = "Device Name"},
              @{Expression = {$_.ConfigManagerErrorCode} ; Label = "Status Code" }

#Checks for devices whose ConfigManagerErrorCode value is greater than 0, i.e has a problem device.
Get-WmiObject -Class Win32_PnpEntity -ComputerName localhost -Namespace Root\CIMV2 | Where-Object {$_.ConfigManagerErrorCode -gt 0 } | Format-Table $result -AutoSize 
```

Windows 设备管理器中的错误代码：- [https://support.microsoft.com/en-us/kb/310123](https://support.microsoft.com/en-us/kb/310123) Win32_PNP 实体类：[https://msdn.microsoft.com/en-us/library/aa394353(v=vs .85).aspx](https://msdn.microsoft.com/en-us/library/aa394353(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:20:02.207

当我有一些设备没有被我的脚本拾取时，我这样做了，试一试，看看它是否检测到你的设备。

```
$foo = Get-WmiObject Win32_PNPEntity | Where-Object{$_.Availability -eq 11 -or $_.Availability -eq 12} 
```

# java - 如何以比特为单位获取大小 Java

> ID：11367641
> 
> 赞同：-1
> 
> 时间：2012-07-06T18:21:02.533
> 
> 标签：java, string, size, endianness

如何以大端顺序获取 64 位（不是字节）的字符串大小）？我从来没有在Java中做过这种操作。谢谢你的帮助 ： ）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:23:58.587

我想你想要这个：

```
String source = "0123456789";
byte[] byteArray = source.getBytes("UTF-16BE");
int sizeInBits = byteArray.length * 8; 
```

资料来源：[为什么 byteArray 的长度是 22 而不是 20？](https://stackoverflow.com/questions/228987/convert-string-to-byte)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:22:55.477

诶？字符串只能以字符或字节为单位进行测量，并且只有在您为编码指定特定字符集后才能进行测量。

对于后者，它只是`string.getBytes(charset).length`.

如果我们知道您实际上想要做什么，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:30:43.270

即使像 x86 这样的平台使用 LittleEndian，Java 在内部也始终使用 BigEndian 顺序工作。

在 Java 中，64 位值存储在`long`数据类型中。

现在最后一个问题是你想要测量什么。在字符串中，您可以计算字符数，或使用指定编码（例如 UTF-8、UTF-16、ISO-8859-1、...）对其进行编码时字符串占用的字节数。

假设您想计算 String 中的字符数，并且希望将该数字作为 64 位数字，您可以使用以下代码：

```
String myString = "abcdefgh";
long charCount = myString.length; 
```

如果要写入`charCount`文件或网络连接，可以使用 DataOutputStream 获取 BigEndian 表示：

```
DataOutputStream out = new DataOutputStream(streamToWriteTo);
out.writeLong(charCount); 
```

# java - MacRoman 与 UTF-8

> ID：11367643
> 
> 赞同：0
> 
> 时间：2012-07-06T18:21:03.057
> 
> 标签：java, utf-8, jasypt, apache-commons-io, mac-roman

我尝试从源中提取字节数据，对其进行加密，然后将其存储在文件系统中。

对于加密，我使用**jasypt**和**BasicTextEncryptor**类。为了存储到文件系统，我使用了**Apache 的 Commons IOUtils**类。

需要时，这些文件将被解密，然后发送到用户的浏览器。该系统在默认字符集为**MacRoman**的本地计算机上运行，​​但在默认字符集为**UTF-8**的服务器上失败。

当我在流程的每个阶段明确设置编码以使用**MacRoman**时，它也可以在服务器上运行，但我对此表示怀疑，因为我的其余代码使用**UTF8**。

有没有一种方法可以在不转换为 MacRoman 的情况下使用代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:24:58.087

您应该在任何地方都使用 UTF8。

只要您在操作的每一端使用相同的编码（并且只要编码可以处理您需要的所有字符），您就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-06T20:39:54.930

在您对另一个答案的评论中，您声称您没有使用编码，但这是不可能的。您正在使用 BasicTextEncryptor 类，根据[本文档](http://www.jasypt.org/api/jasypt/1.8/org/jasypt/util/text/BasicTextEncryptor.html)，该类仅适用于字符串和字符数组。这意味着，在某些时候，您正在从与编码无关的字节数组转换为特定于编码的字符串或字符数组。这意味着无论您是否意识到，您都依赖于某个地方的编码。您需要跟踪发生转换的位置并确保它具有正确的编码。

您的问题指出，“当我在流程的每个阶段明确设置编码时”，因此您需要知道它是如何在数据库中编码的。如果这没有意义，请继续阅读。

也有可能您只是尝试加密从数据库中取出的文件，而您并不关心字符串表示；您想将其视为纯字节，而不是文本。在这种情况下，BasicTextEncrypter（“用于轻松执行正常强度**文本**加密的实用程序类。”）不适合此任务。它加密字符串。BasicBinaryEncryptor（“用于轻松执行**二进制**（字节数组）的正常强度加密的实用程序类。”）是您所需要的。

# c++ - log4cxx 输出目录

> ID：11367645
> 
> 赞同：1
> 
> 时间：2012-07-06T18:21:21.113
> 
> 标签：c++, logging, log4cxx

我如何配置 log4cxx 它将日志写入特定目录？

我使用的教程网站来自这里，我想使用每日滚动日志。

[Log4cxx 教程](http://www.yolinux.com/TUTORIALS/Log4cxx.html)

花一些时间谷歌搜索后，我尝试添加以下行，但似乎不起作用，现在我将不胜感激。

```
<param name ="directory" value = "/var/log/myapp/"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:06:55.063

Log4cxx 使用类似于 log4j 的配置文件，因此在配置文件中有类似

```
log4j.rootLogger=DEBUG, R
log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=/var/log/myapp
log4j.appender.R.MaxBackupIndex=1
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n 
```

然后在你的代码中初始化日志系统

```
log4cxx::PropertyConfigurator::configure("config.props"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:28:01.783

您必须使用整个目录路径指定文件名，例如

```
 <param name="File" value="/var/log/myapp/logfile" /> 
```

在 appender 标签下方。并在您的 triggerPolicy 标记下根据需要设置参数名称 =“DatePattern”。

# list - Sharepoint List，用户只查看自己的Item

> ID：11367646
> 
> 赞同：3
> 
> 时间：2012-07-06T18:21:27.170
> 
> 标签：list, sharepoint, permissions, items

我正在使用 Sharepoint 2010，并且我有一个列表，我希望用户只能看到他们自己的列表项。我已经进入高级列表设置并设置了项目级别的权限，因此他们只能读取自己的项目，但它不起作用。

用户被设置为贡献权限。

谢谢您的帮助！伊森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:22:07.227

所以我想通了。我所拥有的没有任何问题，但是在服务器管理面板下，所有用户都有完整的阅读审核，或者类似的东西，所以无论其他权限在哪里，他们都可以完整阅读内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:56:55.313

这应该由项目级权限完成

有关详细信息，请参阅此博客文章，[http://sharepoint.microsoft.com/blogs/GetThePoint/Lists/Posts/Post.aspx?ID=58](http://sharepoint.microsoft.com/blogs/GetThePoint/Lists/Posts/Post.aspx?ID=58)

# function - 为什么我不能在实时服务器上的 Coldfusion CFC 中调用函数，当它在生产中工作时？

> ID：11367653
> 
> 赞同：2
> 
> 时间：2012-07-06T18:21:56.083
> 
> 标签：function, coldfusion, extends, cfc

我不知所措。

我正在通过 Ajax 发布到 Coldfusion8 cfc，虽然它在我的本地计算机上运行良好，但在实时服务器上，我无法调用此 CFC 中的任何函数，或者它是扩展的 CFC。

我想做这个：

```
<cfset LOCAL.response = THIS.commit() /> 
```

如果我转储：

```
<cfdump output="e:\path\to\dump.txt" label="catch" var="committing"> 
<cfdump output="e:\path\to\dump.txt" label="catch" var="#THIS#"> 
<cfset dickhead = THIS.Commit() >
<cfdump output="e:\path\to\dump.txt" label="catch" var="out"> 
```

我越来越：

```
committing 
****************************************************************

catch - component services.form_service_user 
    extends controllers.form_switch

Methods: 
    DEFAULTS
        [function]
            Arguments: none 
            ReturnType: struct 
            Roles:  
            Access: public 
            Output: false 
            DisplayName:  
            Description:  
PROCESS
        [function]
            Arguments: none 
            ReturnType: struct 
            Roles:  
            Access: remote 
            Output: true 
            DisplayName:  
            Description:   
COMMIT
        [function]
            Arguments: none 
            ReturnType: struct 
            Roles:  
            Access: public 
            Output: false 
    Description:  
             ... 
```

* * *

所以方法/功能就在那里。但我不会**出去**。我也清除了提交函数，除了一个单独的返回值和一个转储。我既没有得到转储，也没有得到返回值。

**问题**：
如果我在 PROCESS 中，为什么我不能在实时服务器上调用 COMMIT，而它在生产环境中运行良好？这是某种缓存还是其他设置？另外，我无权访问 CFadmin，所以我或多或少是在瞎猜？

感谢您提供任何信息！

**编辑**：
提交调用在 try/catch 中：

```
<cftry>     
    <cfdump output="e:\dump.txt" label="catch" var="a"> 
    <cfdump output="e:\dump.txt" label="catch" var="#THIS#"> 
    <cfset LOCAL.Response = THIS.Commit() >
    <cfdump output="e:\dump.txt" label="catch" var="b"> 

    <!--- COMMIT ERRORS --->
    <cfcatch>
            <cfdump output="e:\dump.txt" label="catch" var="ERROR">
            <cfset LOCAL.Response.Success = false />
            <cfset LOCAL.Response.Errors = [["server_error","commit error"]] />     
    </cfcatch>
</cftry> 
```

我收到 AJAX 返回的“提交错误”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:45:21.127

检查您的方法的访问属性。

如果您从同一组件中的另一个方法调用组件中的方法（或从父组件继承），则访问必须是私有的、公共的或包的。它不可能是远程的。

确保您的 ColdFusion 映射对于实时服务器是正确的。

确保您已将所有应用程序文件部署到正确位置的实时服务器。

# python - Python 路径覆盖

> ID：11367659
> 
> 赞同：0
> 
> 时间：2012-07-06T18:22:35.980
> 
> 标签：python, python-module

我有一个这样的目录结构：

```
PYTHONPATHDIR
    App1
        someModule.py
        utils.py  
    utils
        hasClassIWantToImport.py 
```

我希望 someModule 从 utils.hasClassIWantToImport 导入一些东西。当我打电话时：

```
from utils.hasClassIWantToImport import ClassIWant 
```

它无法解析“hasClassIWantToImport”，因为它认为我正在谈论当前目录中的 utils.py。

我该如何解决这个问题？我知道我可以重命名“utils”之一，但宁愿不...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:27:18.827

不确定我是否正确理解了您的目录设置，但您可以尝试：

```
import sys
sys.path.insert(0,'/path/to/utils')
from hasClassIwantToImport import ClassIWant 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:30:11.747

没有任何方法可以让您同时保持对两者的访问，`PYTHONPATHDIR/utils`而`PYTHONPATHDIR/App1/utils.py`无需参考其中一个相对于其他事物。

如果您修改路径以使其`PYTHONPATHDIR`位于列表的开头，则可以导入`utils.hasClassIWantToImport`，但您将无法访问`utils.py`.

你能做的最好的事情是`App1`通过将文件放入其中来制作一个包，`__init__.py`然后像@Gryphius 建议的那样调整你的路径（即`/path/to/utils`放在`sys.path`. 当你想访问时`utils.hasClassIWantToImport`，你

```
from utils.hasClassIWantToImport import ClassIWant 
```

要导入相对于 的文件`utils.py`，您将

```
from App1.utils import ClassIWantFromApp1 
```

然而，这是一个可怕的黑客，只是为了避免重命名`utils.py`。我建议让自己免于长期头痛的路径操作，只需重命名该文件即可。

# vba - 我怎样才能为我的下一个子程序保留这个变量的值？

> ID：11367662
> 
> 赞同：2
> 
> 时间：2012-07-06T18:22:57.457
> 
> 标签：vba, excel, scope

我是一名初级程序员（没有经验），正在为我现在正在做的工作学习 Visual Basic。我已经阅读了一天左右，终于决定开始制作所需的程序！

但是，我遇到了一些问题。

现在我有两个子程序。第一个子例程让用户输入他们有多少数据对，这样我就可以创建一个表格供他们填写。这样他们的数据就在正确的位置供我以后参考。

然后他们在完成输入数据后按下一个按钮以启动一个不同的子程序，该子程序将对他们输入的数字进行一些计算。我的问题是我需要一个变量来说明他们必须将多少数据对转移到第二个例程。

在我继续之前，这是我到目前为止的代码！（您必须在窗口中向下滚动）我还应该注意第二个子例程在一个单独的模块中。

```
Option Explicit

Public Counter As Long

Sub TableCreation1()

    ActiveSheet.Shapes.Range(Array("Button 5")).Select

    Selection.Delete

    Counter = InputBox("How many pairs of data do you have? ")

    Range("A1") = "Time (days)"

    Range("B1") = "CFL (measured)"

    Range("A1:B1").Font.Bold = True

    Columns("A:B").EntireColumn.EntireColumn.AutoFit

    Range("A1").Select

    ActiveCell.Range("A1:B" & Counter + 1).Select

    Selection.Borders(xlDiagonalDown).LineStyle = xlNone

    Selection.Borders(xlDiagonalUp).LineStyle = xlNone

    With Selection.Borders(xlEdgeLeft)

       .LineStyle = xlContinuous

       .Weight = xlThin

    End With

    With Selection.Borders(xlEdgeTop)

        .LineStyle = xlContinuous

        .Weight = xlThin

    End With

    With Selection.Borders(xlEdgeBottom)

        .LineStyle = xlContinuous

        .Weight = xlThin

    End With

    With Selection.Borders(xlEdgeRight)

        .LineStyle = xlContinuous

        .Weight = xlThin

    End With

    With Selection.Borders(xlInsideVertical)

        .LineStyle = xlContinuous

        .Weight = xlThin

    End With

    With Selection.Borders(xlInsideHorizontal)

        .LineStyle = xlContinuous

        .Weight = xlThin

    End With

    Dim btn As Button

    Dim rng As Range

    With Worksheets("Sheet1")

        Set rng = .Range("A" & Counter + 2)

        Set btn = .Buttons.Add(rng.Left, rng.Top, rng.Width, rng.Height)

    With btn

        .Caption = "Click this button to begin calculations"

        .AutoSize = True

    End With

    End With

End Sub

Option Explicit

Dim IntermediateVariable As Long

Public Counter As Long

Sub FindCFLGuess()

IntermediateVariable = Worksheets("Sheet1").Range("B:B").Cells.SpecialCells(xlCellTypeConstants).Count

Counter = IntermediateVariable - 1

End Sub 
```

为什么 Counter 的值不能延续到第二个子例程？现在我有一个解决方法来计算 B 列中填写的单元格数量，这给了我数字。但是，这使得我无法将 B 列中的任何空间用于我想要使用的工作表的其余部分。

任何人都可以帮忙吗？我认为“公共”会使其成为工作簿级别的变量？每当我让第二个子显示 Counter 的值时，它就会显示为零。

抱歉，如果我的代码混乱/效率低下。我还在学习。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:45:18.167

在您的代码中，您声明`Public Counter As Long`了两次。可能发生的情况是您的每个`Sub`块都获得了不同的`Counter`变量。如果您删除第二个，它们应该共享相同的变量。

此外，您应该只需要为`Option Explicit`每个模块列出一次。其中，现在我看到您指定这些是单独的模块，您做得很好。

**编辑：**试图阐明更多。

将其视为分层，每个“范围”都是该层可以访问的。每一层都可以访问自己和所有父级。这是一个简化的可视化：

```
( program 
    ( module
        ( sub )
    )
) 
```

在您的子例程中，您引用变量，因此程序开始向上查找。当然，假设您已经设置`Option Explicit`了这意味着必须手动定义变量，并且永远不会自动定义它们。

你想要的是如下的东西。变量在范围内是全局的，以便可以从同时运行的其他模块访问它。

```
( program
    [global variable]
    ( module1
        ( sub )
    )
    ( module2 )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:11:25.537

我删除了您在生产中可能需要的一堆无关代码，但只是妨碍了查看问题。我测试了以下内容，并且 Counter 将其在第一个模块中的第一个 sub 中设置的值保持为第二个模块中的 sub。

**模块一：**

```
Option Explicit

    Public Counter As Long

    Sub TableCreation1()
        Dim btn As Button
        Dim rng As Range

        Counter = InputBox("How many pairs of data do you have? ")
        Range("A1") = "Time (days)"
        Range("B1") = "CFL (measured)"
        Range("A1:B1").Font.Bold = True
        Columns("A:B").EntireColumn.EntireColumn.AutoFit
        Range("A1").Select
        ActiveCell.Range("A1:B" & Counter + 1).Select

        With Worksheets("Sheet1")
            Set rng = .Range("A" & Counter + 2)
            Set btn = .Buttons.Add(rng.Left, rng.Top, rng.Width, rng.Height)
            With btn
                .Caption = "Click this button to begin calculations"
                .AutoSize = True
            End With
        End With
    End Sub 
```

**模块 2：**

```
Option Explicit

Sub FindCFLGuess()
    MsgBox ("Counter = " & Counter)
End Sub 
```

如果您创建一个包含 2 个模块的新工作簿并将代码粘贴到每个模块中，则您的 Counter 变量的值将显示在`messagebox`if you run`TableCreation1`然后`FindCFLGuess`按顺序显示。

如果由于某种原因出现运行时错误，或者中断代码的执行，显然 Counter 将失去其价值。如果这些事情都没有发生，您应该在单步执行代码时添加一个监视来跟踪变量的值。

要添加监视，请右键单击变量，选择**添加监视...**，然后从模块下拉列表中选择**（所有模块） 。**当表达式的值发生变化时，您还可以让手表中断。

# symfony - Symfony 2 - 在 postUpdate 触发 preUpdate 事件中刷新

> ID：11367665
> 
> 赞同：11
> 
> 时间：2012-07-06T18:23:00.567
> 
> 标签：symfony, doctrine-orm, event-listener

我发现这个问题“感谢”我得到的一个异常：

```
Catchable Fatal Error: Argument 3 passed to
Doctrine\ORM\Event\PreUpdateEventArgs::__construct() 
must be an array, null given, called in 
/.../vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php on line 804 
and defined in
/.../vendor/doctrine/lib/Doctrine/ORM/Event/PreUpdateEventArgs.php line 28 
```

我正在做一个需要特定逻辑的项目：
当`order`实体中的字段`book`被修改时，我需要更新`books_order_modified_at`父实体中的`bookstore`字段（这个字段可以让我知道书店中书籍的顺序是否改变了）。

我决定在事件侦听器中执行此操作，因为代码中有很多地方可能会改变书籍的顺序。

我没有找到从`preUpdate`事件更新相关实体的任何方法，因此我在侦听器类中有一个私有字段，用于告诉`postUpdate`事件更新相关`bookstore`实体。

我的问题是，当我这样做时，实体的`preUpdate`事件会被触发。 当我检查更改集时，它仅包含该字段，但前后具有相同的值。`book`
`modified_at`

如果有人有另一个想法如何解决这个问题 - 太好了。

如果没有 - 知道如何防止在`preUpdate`事件中调用刷新时触发`postUpdate`事件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-15T09:07:36.207

实际上，这是来自学说[Doctrine Issue DDC-2726](https://github.com/doctrine/doctrine2/issues/3468)的问题。通过在侦听器中的刷新之后添加对实体管理器的明确调用来解决它，因此该构造函数的第三个参数，实际上是 entityChangeSets，将被重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:11:27.277

更新`modified_at`实体内部的内容并让学说处理呢？您将更改书中的 setOrder 方法以更新 BookOrder 实体，如下所示：

```
class Book {
    public function setOrder($order) {
        // modify book
        $this->bookOrder->updateModifiedAt();
    }
} 
```

当然，您的 BookOrder 必须实现 modifiedAt：

```
class BookOrder {
    public function updateModifiedAt() {
        $this->modifiedAt = new \DateTime();
    }
} 
```

如果您在 Datetime 中使用其他类，您当然必须更改此代码！

Doctrine 应该认识到 BookOrder 已经改变并且应该在不需要使用事件监听器的情况下更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T16:45:21.260

我可以建议你使用来自[DoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle)的 Timestampable 扩展。

通过使用它，您不需要设置`created_at`或`modified_at`值。此扩展程序会自动执行此操作。甚至`modified_at`只能在修改特定字段时设置。见[例子](http://gediminasm.org/article/timestampable-behavior-extension-for-doctrine-2#entity-mapping)。

我认为您正在编写类似此扩展程序的内容。所以，你不需要这样做，因为这已经完成了:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-30T11:44:54.880

我有一个类似的问题。尝试使用`preupdate`修改子元素导致相同的错误。最后，我的解决方案是简单地更新属于父母的孩子。不需要显式调用`flush`。

```
/**
 * Update expiry dates for all runners belonging to a campaign
 *
 * @param $runners
 * @param $expiryDate
 */
private function updateCampaignRunners($runners, $expiryDate){
    foreach($runners as $runner){
        $runner->setExpiresAt($expiryDate);
        $this->getModelManager()->update($runner);
    }
}

/**
 * Post update and persist lifecycle callback
 *
 * @param Campaign $campaign
 */
private function postAction(Campaign $campaign)
{
    $runnerExpire = $this->getForm()->get("runnerExpire")->getData();
    if($runnerExpiryDate && $campaign->getRunners()){
        $this->updateCampaignRunners($campaign->getRunners(), $runnersExpiryDate);
    }
} 
```

# python - 'One-lineize' python 语句

> ID：11367669
> 
> 赞同：0
> 
> 时间：2012-07-06T18:23:21.533
> 
> 标签：python

我想知道是否可以在一行中写下以下语句：

```
new = ''
for char in text:
    if char in blacklist:
        new += ' '
    else:
        new += char 
```

我试过但我得到语法错误：

```
new = ''.join(c for c in text if c not in blacklist else ' ') 
```

我知道不是更好或更漂亮，我只是想知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:31:01.390

迭代它似乎是一种过于复杂的方法。为什么不使用[正则表达式](http://docs.python.org/library/re.html)？

```
import re
blacklist = re.compile(r'[xyz]') # Blacklist the characters 'x', 'y', 'z'
new = re.sub(blacklist, ' ', text) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:26:16.383

你在错误的地方使用了你的内联条件（如果你没有`else ' '`那里，它会起作用，因为它只是对可迭代的过滤器）。事实上，你会想要这样做：

```
new = ''.join(c if c not in blacklist else ' ' for c in text) 
```

如果你愿意，你也可以这样做：

```
new = ''.join(' ' if c in blacklist else c for c in text) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T18:26:25.213

你几乎拥有它：

```
''.join(c if c not in blacklist else ' ' for c in text) 
```

the`X if Y else Z`本身就是一个表达式，所以你不能通过将`for c in text`部分放在中间来拆分它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:45:12.257

使用 str 的 translate 方法。构建一个白名单字符字符串，用 ' ' 代替黑名单字符：

```
>>> table = ''.join(c if c not in 'axy' else ' ' for c in map(chr,range(256))) 
```

然后用这个表调用翻译：

```
>>> 'xyzzy'.translate(table)
'  zz ' 
```

# c++ - inplace_merge：是什么导致 N*log(N) 与 N-1 的复杂性？

> ID：11367674
> 
> 赞同：5
> 
> 时间：2012-07-06T18:24:00.610
> 
> 标签：c++, merge, complexity-theory

从关于 inplace_merge 的 C++ 文档中，算法的复杂性是“如果使用内部缓冲区，则比较线性 (N-1)，否则为 NlogN（其中 N 是 [first,last) 范围内的数字元素）”。内部缓冲区是什么意思，是什么导致了 O(N-1) 与 O(NlogN) 的复杂性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:21:27.923

内部缓冲区只是由库分配的足够大小的缓冲区，以在合并发生时保存合并的输出（合并完成后它被复制回原始范围）。如果使用了这个额外的空间，则可以在线性时间内完成合并。如果它不能或不使用单独的缓冲区来存储输出，则操作会降级为使用 runtime 的通用排序`O(n log n)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-24T06:15:06.983

要扩展其他答案：

*   至少在 libstdc++ 和 libc++ 中，“内部缓冲区”是通过调用[`std::get_temporary_buffer`](http://en.cppreference.com/w/cpp/memory/get_temporary_buffer)STL 中一个晦涩但标准的例程来提供的。该例程在 C++17 中已被弃用，主要是因为它令人困惑且有点愚蠢。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/3264299/why-do-i-need-stdget-temporary-buffer)，或阅读[Stephan T. Lavavej 的原始弃用提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0174r1.html#3.2)。

*   在 libstdc++ 中，`get_temporary_buffer`实现为对`operator new`. [（资源）](https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a01066_source.html#l00084)

*   在 libc++ 中，`get_temporary_buffer`被实现为对`operator new`. [（资源）](https://llvm.org/svn/llvm-project/libcxx/trunk/include/memory)

*   我不知道是否在 MSVC 的标准库中`inplace_merge`使用`get_temporary_buffer`，但我敢打赌它确实如此。

*   [据报道](https://stackoverflow.com/questions/3264299/why-do-i-need-stdget-temporary-buffer#comment3376300_3264638)，在 MSVC 中，它`get_temporary_buffer`是作为对`operator new`.

您可以编写一个程序，通过在全局命名空间中重写来[直接](https://wandbox.org/permlink/SbMFc4XH70KefbwK)[观察此调用：`operator new`](https://wandbox.org/permlink/SbMFc4XH70KefbwK)`operator new`

```
#include <algorithm>
#include <cstdio>
#include <cstdlib>

void *operator new(size_t nbytes, const std::nothrow_t&) noexcept
{
    puts("hello from operator new!");
    return malloc(nbytes);
}

int main()
{
    int a[32] = {
        1,1,1,2,3,4,4,5,5,5,5,6,6,8,9,9,
        1,1,2,3,3,3,4,4,5,5,7,8,9,9,9,9,
    };
    std::inplace_merge(&a[0], &a[16], &a[32]);  // "hello from operator new!"
    (void)a;
} 
```

TL;DR：通过调用在堆上分配“内部缓冲区” `operator new`。实现*不需要*调用`operator new`，但实际上它们都需要。`inplace_merge`如果你重视你的堆，请远离，远离。

# struts2 - struts 2开发登录的问题

> ID：11367677
> 
> 赞同：0
> 
> 时间：2012-07-06T18:24:14.480
> 
> 标签：struts2

我有几个问题，如果有人可以帮助我用 Struts 2 解决这个问题，我会的。这就是我遇到的问题。当我运行我的简单登录应用程序时，我遇到了这个错误：

> org.apache.jasper.JasperException：找不到 Struts 调度程序。

这通常是由于使用没有关联过滤器的 Struts 标签造成的。Struts 标记仅在请求通过其 servlet 过滤器时可用，该过滤器初始化此标记所需的 Struts 调度程序。- [未知位置]

日志是这样的：

```
Advertencia: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
The Struts dispatcher cannot be found.  This is usually caused by using Struts tags without the associated filter. Struts tags are only usable when the request has passed through its servlet filter, which initializes the Struts dispatcher needed for this tag. - [unknown location]
    at org.apache.struts2.views.jsp.TagUtils.getStack(TagUtils.java:60)
    at org.apache.struts2.views.jsp.StrutsBodyTagSupport.getStack(StrutsBodyTagSupport.java:44)
    at org.apache.struts2.views.jsp.ComponentTagSupport.doStartTag(ComponentTagSupport.java:48)
    at org.apache.jsp.Login_jsp._jspx_meth_s_form_0(Login_jsp.java:99)
    at org.apache.jsp.Login_jsp._jspService(Login_jsp.java:72)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

文件树是这个：

```
 src(es.uniway.action.login as a package and inside this class:
LoginAction.java:

package com.uniway.action.login;

import com.opensymphony.xwork2.ActionSupport;

public class LoginAction extends ActionSupport{

@Override
public String execute() throws Exception {
// TODO Auto-generated method stub
return SUCCESS;
}

} 
```

在 src 内部我也有 struts.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
 "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
"http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>

<constant name="struts.enable.DynamicMethodInvocation" value="true" />
<constant name="struts.devMode" value="false" />

<package name="default" namespace="/" extends="struts-default">

<action name="Login" class="com.uniway.action.LoginAction">
<result name="input">/Login.jsp</result>
<result name="success" type="redirectAction">/index.jsp</result>
</action>

</package>

<!-- Add packages here -->

</struts> 
```

然后在 web-info 文件夹中`web.xml`，我有这个东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_9" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>cloud46</display-name>
<filter>
<filter-name>struts2</filter-name>
<filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>

<filter-mapping>
<filter-name>struts2</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping>

 <welcome-file-list>
 <welcome-file>Login.jsp</welcome-file>

 </welcome-file-list>
 </web-app> 
```

然后在 WebContent 我有 index.jsp 和 Login.jsp 我有这个代码：

```
<%@ page contentType="text/html; charset=UTF-8" %>
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
<head>
<title>Sign On</title>
</head>

<body>
<s:form action="Login.action"> 
<s:textfield key="username"/>
<s:password key="password" />
<s:submit method="execute"/>
</s:form>  
</body>
</html> 
```

WEB-INF 内的 lib 文件夹中的库为 : `asm-3.3.jar`, `asm-commons-3.3.jar`, `asm-tree-3.3.jar`, `commons-fileupload-1.2.2.jar`, `commons-io-2.0.1.jar`, `commons-lang3-3.1.jar`, `freemarker-2.3.19.jar`, `javassist-3.11.0.GA.jar`, `ognl-3.0.5.jar` , `struts2-core-2.3.3.jar`, `xwork-core-2.3.3.jar`. 请问，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:41:56.953

做这个改变

```
<action name="Login" class="com.uniway.action.LoginAction">
<result name="input">/Login.jsp</result>
<result name="success" type="redirectAction">/index.jsp</result>
</action> 
```

至

```
<action name="Login" class="com.uniway.action.LoginAction">
     <result name="input">/Login.jsp</result>
     <result name="success">/Login.jsp</result>
</action> 
```

1.  改变这个

    `<s:form action="Login.action">` 至

    `<s:form namespace="/" action="Login">`

2.  下一个变化

    `<s:submit method="execute"/>`

至

```
<s:submit value="Login"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T13:34:13.913

我的 404.jsp 页面出现了这个问题，这是我的解决方案：

我们不应该`<s:`在 404.jsp 中使用标签！！！

我不知道为什么，但这解决了我的问题！

# python - imshow and histogram2d: can't get them to work

> ID：11367683
> 
> 赞同：6
> 
> 时间：2012-07-06T18:24:31.767
> 
> 标签：python, numpy, matplotlib

I'm learning Python and this is my first question here. I've read other topics related to the usage of **imshow** but didn't find anything useful. Sorry for my bad English.

I have plotted a set of points here, left graphic:

[points (left) and image (right)](https://dl.dropbox.com/u/10411539/python/image.png)

Now I'd like to see an image of the density of points, so I used **imshow** and **histogram2d**, and I got the image to the right in the previous link.

The image doesn't correspond to the distribution of points. How is this possible? I've followed the instructions in the help and even changed some parameters but nothing worked :(

The code is:

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

j, h, k = np.loadtxt("test.dat", usecols=(2, 4, 6), \
    unpack=True)

# límites
xmin = -0.5
xmax =  3.0
ymin = -0.5
ymax =  4.0

# colores
j_h = j - h
h_k = h - k

# no todas las estrellas son graficadas    
x1 = 0.5
y1 = 0.5
b  = 2.2
c  = y1 - b * x1

x = y = np.array([])

for xi, yi in zip(h_k, j_h):
    if xi < (yi - c) / b:
        x = np.append(x, xi)
        y = np.append(y, yi)

# gráfico
fig = plt.figure(figsize=(8, 7))

ax = fig.add_subplot(111)
#ax.plot(x, y, "go")
ax.set_xlabel(r"X", fontsize=14)
ax.set_ylabel(r"Y", fontsize=14)
ax.axis([xmin, xmax, ymin, ymax])

# imagen
rango = [[xmin, xmax], [ymin, ymax]]
binsx = int((xmax - xmin) / 0.05)
binsy = int((ymax - ymin) / 0.05)
binsxy = [binsx, binsy]

H, xedges, yedges = np.histogram2d(x, y, range=rango, bins=binsxy)

extent = [yedges[0], yedges[-1], xedges[0], xedges[-1]]
cp = ax.imshow(H, interpolation='bilinear', extent=extent, cmap=cm.jet)
fig.colorbar(cp)

plt.show() 
```

The links for the data used is here:

[https://dl.dropbox.com/u/10411539/python/test.dat](https://dl.dropbox.com/u/10411539/python/test.dat)

Any help is appreciated!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:37:06.060

Try different interpolation, and transpose the matrix to get it in the same axis:

```
cp = ax.imshow(H.transpose()[::-1], interpolation='nearest', extent=extent, cmap=cm.jet) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T18:37:14.347

Is this what you want to get? You can use pcolor (and pcolormesh) if you want to pass the x and y coordinates.

```
import urllib
import numpy as np
import matplotlib.pyplot as plt
f = urllib.urlopen('https://dl.dropbox.com/u/10411539/python/test.dat')
j, h, k = np.loadtxt(f, usecols=(2, 4, 6), \
    unpack=True)
j, h, k
j_h = j - h
h_k = h - k
H, xedges, yedges = np.histogram2d(j_h, h_k, bins=100)
plt.pcolor(xedges, yedges, H) 
```

![Example of pcolor using histogram2d](../Images/50a2031ae026902c54efa0a092e7f51c.png)

For imshow you have to reverse the first dimension, because imshow uses zero-based row, column indices to the x, y. Drawing from the top down.

```
plt.imshow(H[::-1,:], extent=(0,5, 0,2.5)) # typed in extent by hand. 
```

![imshow example](../Images/edbe6efb2e79c953b6b96a4179c039d7.png)

# hadoop - 将数据加载到 Hive 表中

> ID：11367684
> 
> 赞同：2
> 
> 时间：2012-07-06T18:24:40.723
> 
> 标签：hadoop, mapreduce, hive

```
CREATE TABLE IF NOT EXISTS TestingTable2 
( 
USER_ID BIGINT, 
PURCHASED_ITEM ARRAY<STRUCT<PRODUCT_ID: BIGINT,TIMESTAMPS:STRING>> 
) ROW FORMAT
DELIMITED FIELDS TERMINATED BY '-'
collection items terminated by ','
map keys terminated by ':'
LINES TERMINATED BY '\n' 
STORED AS TEXTFILE
LOCATION '/user/rkost/output2'; 
```

下面是我的数据，它只有一行数据，我需要在上表中上传。

```
1015826235-[{"product_id":220003038067,"timestamps":"1340321132000"},{"product_id":300003861266,"timestamps":"1340271857000"},{"product_id":140002997245,"timestamps":"1339694926000"},{"product_id":200002448035,"timestamps":"1339172659000"},{"product_id":260003553381,"timestamps":"1339072514000"}]- 
```

在我选择查询时上传数据后，我看不到正确的数据。我应该只得到如下一行，但我没有在表中得到以下结果

```
**USER_ID**     **PURCHASED_ITEM**
1015826235     [{"product_id":220003038067,"timestamps":"1340321132000"},    {"product_id":300003861266,"timestamps":"1340271857000"},    {"product_id":140002997245,"timestamps":"1339694926000"},    {"product_id":200002448035,"timestamps":"1339172659000"},    {"product_id":260003553381,"timestamps":"1339072514000"}] 
```

在我进行选择查询后，我在表数据中得到了类似的东西，而不是上面的数据。分界线有什么问题吗？

```
1015826235      [{"product_id":null,"timestamps":" 220003038067"},{"product_id":null,"timestamps":" \"1340321132000\"}"},{"product_id":null,"timestamps":"  
                                 300003861266"},{"product_id":null,"timestamps":" \"1340271857000\"}"},{"product_id":null,"timestamps":" 140002997245"},
                                      {"product_id":null,"timestamps":" \"1339694926000\"}"},{"product_id":null,"timestamps":" 200002448035"},
                                            {"product_id":null,"timestamps":" \"1339172659000\"}"},{"product_id":null,"timestamps":" 260003553381"},
                                                       {"product_id":null,"timestamps":" \"1339072514000\"}]"}] 
```

谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:05:20.493

为产品 ID 添加双引号

```
1015826235-[{"product_id":"220003038067","timestamps":"1340321132000"},{"product_id":"300003861266","timestamps":"1340271857000"},{"product_id":"140002997245","timestamps":"1339694926000"},{"product_id":"200002448035","timestamps":"1339172659000"},{"product_id":"260003553381","timestamps":"1339072514000"}]- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:20:42.367

我已经自己想通了。需要加载的整个数据应该是这样的——

`1015826235-220003038067:1340321132000,300003861266:1340271857000,140002997245:1339694926000,200002448035:1339172659000,260003553381:1339072514000`

# powershell - Powershell：在命令行调用powershell时如何传递变量来切换参数？

> ID：11367685
> 
> 赞同：36
> 
> 时间：2012-07-06T18:24:43.667
> 
> 标签：powershell, parameters, type-conversion, cmd

通常，如果您想将 switch 参数的规范推迟到某个变量，您可以将表达式传递给 switch 参数，如 WhatIf 参数所示。

```
test.ps1

param ( [string] $source, [string] $dest, [switch] $test )
Copy-Item -Path $source -Destination $dest -WhatIf:$test 
```

这使您在使用开关时具有极大的灵活性。但是，当您使用 cmd.exe 或其他方式调用 powershell 时，您会得到如下结果：

```
D:\test>powershell -file test.ps1 -source test.ps1 -dest test.copy.ps1 -test:$true

D:\test\test.ps1 : Cannot process argument transformation on
parameter 'test'. Cannot convert value "System.String" to type "System.Manageme
nt.Automation.SwitchParameter", parameters of this type only accept booleans or
 numbers, use $true, $false, 1 or 0 instead.
At line:0 char:1
+  <<<<
    + CategoryInfo          : InvalidData: (:) [test.ps1], ParentContainsError
   RecordException
    + FullyQualifiedErrorId : ParameterArgumentTransformationError,test.ps1 
```

但是，通过`-test:true`和时会出现相同的结果`-test:1`。为什么这不起作用？Powershell 的类型转换系统不应该自动将这些字符串识别为可转换为 bool 或 switch 并转换它们吗？

这是否意味着当从其他系统（例如构建系统）调用 powershell 脚本时，有必要构建复杂的流控制结构来确定是否在命令字符串中包含一个开关，还是省略它？这似乎很乏味且容易出错，这让我相信事实并非如此。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-08T18:21:50.260

此行为已作为[connect](http://connect.microsoft.com/PowerShell/feedback/details/742084/powershell-v2-powershell-cant-convert-false-into-swtich-when-using-file-param)上的错误提交。这是一种解决方法：

```
powershell ./test.ps1 -source test.ps1 -dest test.copy.ps1 -test:$true 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-06T19:57:18.780

使用开关的 IsPresent 属性。例子：

```
function test-switch{
param([switch]$test)
  function inner{
    param([switch]$inner_test)
    write-host $inner_test
  }
  inner -inner_test:$test.IsPresent
}
test-switch -test:$true
test-switch -test
test-switch -test:$false

True
True
False 
```

顺便说一句，我使用了函数而不是脚本，因此更容易测试。

# html - 粘性div固定位置

> ID：11367690
> 
> 赞同：0
> 
> 时间：2012-07-06T18:25:02.767
> 
> 标签：html, css, css-position, sticky

这是我的html作品。[http://jsfiddle.net/awaises/remqf/4/](http://jsfiddle.net/awaises/remqf/4/)

我想将固定`div`框推到屏幕底部。但它与左侧导航重叠，导航的最后一项隐藏在绿色框后面。我们可以按照以下设计修复绿色框吗？但是我们必须确保绿色框必须在屏幕的底部，即使窗口的分辨率很小或很大。

设计版面网址 [http://www.thewebmakerz.com/screen.jpg](http://www.thewebmakerz.com/screen.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:54:38.450

看到[这个小提琴](http://jsfiddle.net/9Hu6x/)。

三个关键提示：

1.  将“left-footer”放在与菜单内容不同的父级中（称为“left-col-top”）。
2.  “left-col-top”应该是透明的，“position:fixed”，“z-index:1”和一个比你的菜单高的最小高度。
3.  “左页脚”应该是“位置：绝对”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:17:41.437

看屏幕 1.1，如果黄框里有第 11 个列表，它肯定会落后于绿框。（还要考虑浏览器中的工具栏/菜单栏）。如果屏幕高度较小，您可能必须使用“更多链接>”之类的内容。

屏幕 1.2 及以后版本：如果 jQuery 是一个选项，您可以使用 scrollTop 函数。最初，用 position:fixed 和底部的一些负边距来固定绿框。然后，当用户滚动到特定数量时（如屏幕 1.2 所示），请尝试以下 jQuery 代码：

```
var yellowBoxHeight = $("div.yellow-box").height();
$document.scroll(function() {
  if ($document.scrollTop() >= yellowBoxHeight - 100) {
    // If user has scrolled some amount, eg. 100 pixels of yellow box is still visible
    // make the green box animate & let it come upwards
  } else {
   // put the green-box back with some negative margin into the bottom
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:27:57.303

这`.left-col{ height:500px;}`能解决您的问题吗？

# android - 将 Canvas 保存为位图而不再次绘制它

> ID：11367691
> 
> 赞同：1
> 
> 时间：2012-07-06T18:25:03.897
> 
> 标签：android, bitmap, android-canvas

我的应用程序绘制到 a 上`Canvas`，然后我想将其保存在 SD 卡上。这不是问题，但是当我保存图像时，它会`Canvas`再次绘制并将其保存在文件中。问题是程序在创建图像时使用了随机因素，因此当重新绘制它时，它与屏幕上显示的图像不同。

有谁知道谁在不重新绘制系统的情况下将图像保存在屏幕上？

谢谢

# html - 水平滚动表

> ID：11367694
> 
> 赞同：3
> 
> 时间：2012-07-06T18:25:19.623
> 
> 标签：html, css, mobile, html-table

我目前有一个带有数据表的网络应用程序。问题是，表格中的数据太多，以至于在移动设备上变得挤压和不可读。我注意到维基百科正是我想要的：[http ://en.m.wikipedia.org/wiki/Ivy_League#section_1](http://en.m.wikipedia.org/wiki/Ivy_League#section_1)

我想创建一个水平滚动的表格，以便每个单元格的标题保持不变，并且里面的内容可以保持不变。

编辑：这是我目前拥有的表格：http: [//honedge.com/94296358](http://honedge.com/94296358)

还没有真正接触过：P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:28:43.083

您应该能够将您的表格包装在一个 div 中，并将溢出属性设置为“自动”，当显示完整网格的不动产不存在时，会产生一个可滚动区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T20:11:41.013

根据我们上面的讨论，这样的事情应该会有所帮助：

```
$("#example").dataTable({
  bFilter: false,
  bPaginate: false,
  sScrollX: "100%"
}) 
```

在此处查看完整文档：http: [//datatables.net/ref](http://datatables.net/ref)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:39:52.813

我尝试使用 sScrollX，但由于某种原因，它没有按预期工作。我通过仅包装表格解决了这个问题，包括标题（但不包括其他数据表组件）在具有宽度和溢出集的 div 中：

```
table=$("#example").dataTable();

table.wrap('<div style="overflow: auto; width: ' + 
table.parent().parent().parent().width()*0.95 + 'px"/>'); 
```

我测试的所有表格功能（排序、搜索、要显示的项目数）仍在工作。

# javascript - 数字数组排序（）

> ID：11367697
> 
> 赞同：10
> 
> 时间：2012-07-06T18:25:24.093
> 
> 标签：javascript

来自“Learning PHP, MySql and Javascript by. Robin Nixon”一书的这一部分错了吗？

```
numbers = [7, 23, 6, 74];

numbers.sort(function(a,b){return a - b}); 
```

输出为 6,7,23,74

书上说：

> 如果 sort() 中的匿名函数返回大于零的值，则排序假定**a**在**b**之前。
> 
> 如果 sort() 中的匿名函数返回小于零的值，则排序假定**b****位于**a之前。
> 
> 排序在数组中的所有值上运行此函数以确定它们的顺序。

这是错的吗？因为....

`a`这里是`7`
`b`这里`23`

`7 - 23 = -16`// 一个小于零的数字。书上说 b 应该在 a 之前。

所以最终的输出应该是`74, 23, 7, 6`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:29:47.000

看来这是错误的。来自[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)：

> 如果 compareFunction(a, b) 小于 0，则将 a 排序到比 b 低的索引。

（在这种情况下，“下标”意味着 a 在 b 之前）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:30:19.730

输出是正确的，但解释不正确。如果方法返回 < 0，则 a 在 b 之前。

# jsf-2 - JSF 页面重定向

> ID：11367699
> 
> 赞同：3
> 
> 时间：2012-07-06T18:25:48.593
> 
> 标签：jsf-2

我们在 weblogic-10.3.4 中部署了一个 JSF2.0 应用程序，我们需要给用户一个通用 url，比如说 (http://web/apply?7777)。当用户访问此页面时，根据查询字符串值，用户将被重定向到客户端特定页面，该页面可以是 10 个不同页面之一。

所以一种方法是有一个 apply.jsf 页面，它有一个预渲染事件，它将根据查询字符串将用户重定向到不同的页面，

还有其他更好的方法吗？没有apply.xhtml。

注意：在 web.xml 中，我们定义了 pageNotFound.xhtml 以防找不到页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:04:08.957

您可以为此使用一个简单的[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)。

```
@WebFilter("/apply")
public class ApplyFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;

        String queryString = request.getQueryString();
        String redirectURL = determineItBasedOnQueryString(queryString);

        if (redirectURL != null) {
            response.sendRedirect(redirectURL);
        } else {
            response.sendError(HttpServletResponse.SC_NOT_FOUND);
        }
    }

    // ...
} 
```

# c - C编译时cmath错误

> ID：11367707
> 
> 赞同：3
> 
> 时间：2012-07-06T18:26:15.457
> 
> 标签：c, compiler-errors, visual-studio-2012, cmath

我已经坚持了很长时间，由于某种原因我的 C 代码没有编译。它会产生很多 cmath 错误

因为将我的代码和错误放在一起会占用大量空间：

```
#include <stdlib.h>
#include <stdio.h>
#include <Windows.h>
#include <fstream>

typedef unsigned char* pointer;

void printDbPointers(void);
void show_int(int);
void show_bytes(unsigned char*, int);
void floatingPointRep();
void fahrenheit();

int main()
{
    int a = 100;
    show_int(a);
    floatingPointRep();
    fahrenheit();
    printDbPointers();
    Sleep(100000);
    return 0;
}

void printDbPointers(){
    char hi[7] = {'t', 'i', 'g', 'e', 'r', '\0'};
    char *p, **dp;

    p = &(hi[0]);
    dp = &p;

    printf("%c %c\n", *p, **dp);
    printf("%p %p %p\n", p, *dp, hi);
    p+=1;
    printf("%c, %c\n", *p, **dp);
    printf("%p %p %p\n", p, *dp, hi);
    *dp+=2;
    printf("%c, %c\n", *p, **dp);
    printf("%p %p %p\n", p, *dp, hi);
}

void show_int(int x)
{
    show_bytes((pointer) &x, sizeof(int));
}

void show_bytes(pointer start, int len)
{
    int i;
    for(i=0;i<len;i++)
    {
        // printf("0x%p\t0x%.2x\n", start + i, start[i]);
        printf("0x%p\t\n", start + i, start[i]);
        printf("\n");
    }
}

void floatingPointRep()
{
    float f1 = 1.0;
    float f2 = 0.0;
    int i;
    for ( i=0; i<10; i++ ) {
        f2 += 1.0/10.0;
    }

    printf("0x%08x 0x%08x\n", *(int*)&f1, *(int*)&f2);
    printf("f1 = %10.8f\n", f1);
    printf("f2 = %10.8f\n\n", f2);

    f1 = 1E30;
    f2 = 1E-30;
}

void fahrenheit()
{
    int i;
    double arr[3] = {12345678.000, 98765345.333, 456793332.300};
    for (i = 0; i < 3; i++)
    printf ("%g\n", arr[i]);
} 
```

但是，如果将问题代码放在其他地方违反了 SO 的规则，请告诉我，我会放在这里

```
 73  error C1003: error count exceeds 100; stopping compilation  
4   error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  28  1   
7   error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  29  1   
11  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  30  1   
15  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  31  1   
19  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  32  1   
23  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  33  1   
27  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  34  1   
31  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  35  1   
34  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  37  1   
37  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  38  1   
41  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  39  1   
45  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  40  1   
49  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  41  1   
53  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  42  1   
57  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  43  1   
61  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  44  1   
64  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  46  1   
66  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  48  1   
69  error C2059: syntax error : ';' c:\program files\microsoft visual studio 11.0\vc\include\cmath  49  1   
63  error C2061: syntax error : identifier 'abs'    c:\program files\microsoft visual studio 11.0\vc\include\cmath  46  1   
65  error C2061: syntax error : identifier 'acos'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  48  1   
3   error C2061: syntax error : identifier 'acosf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  28  1   
33  error C2061: syntax error : identifier 'acosl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  37  1   
67  error C2061: syntax error : identifier 'asin'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  48  1   
5   error C2061: syntax error : identifier 'asinf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  28  1   
35  error C2061: syntax error : identifier 'asinl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  37  1   
68  error C2061: syntax error : identifier 'atan'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  49  1   
70  error C2061: syntax error : identifier 'atan2'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  49  1   
8   error C2061: syntax error : identifier 'atan2f' c:\program files\microsoft visual studio 11.0\vc\include\cmath  29  1   
38  error C2061: syntax error : identifier 'atan2l' c:\program files\microsoft visual studio 11.0\vc\include\cmath  38  1   
6   error C2061: syntax error : identifier 'atanf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  29  1   
36  error C2061: syntax error : identifier 'atanl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  38  1   
71  error C2061: syntax error : identifier 'ceil'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  49  1   
9   error C2061: syntax error : identifier 'ceilf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  29  1   
39  error C2061: syntax error : identifier 'ceill'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  38  1   
72  error C2061: syntax error : identifier 'cos'    c:\program files\microsoft visual studio 11.0\vc\include\cmath  50  1   
10  error C2061: syntax error : identifier 'cosf'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  30  1   
12  error C2061: syntax error : identifier 'coshf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  30  1   
42  error C2061: syntax error : identifier 'coshl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  39  1   
40  error C2061: syntax error : identifier 'cosl'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  39  1   
13  error C2061: syntax error : identifier 'expf'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  30  1   
43  error C2061: syntax error : identifier 'expl'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  39  1   
14  error C2061: syntax error : identifier 'fabsf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  31  1   
44  error C2061: syntax error : identifier 'fabsl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  40  1   
16  error C2061: syntax error : identifier 'floorf' c:\program files\microsoft visual studio 11.0\vc\include\cmath  31  1   
46  error C2061: syntax error : identifier 'floorl' c:\program files\microsoft visual studio 11.0\vc\include\cmath  40  1   
17  error C2061: syntax error : identifier 'fmodf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  31  1   
47  error C2061: syntax error : identifier 'fmodl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  40  1   
18  error C2061: syntax error : identifier 'frexpf' c:\program files\microsoft visual studio 11.0\vc\include\cmath  32  1   
48  error C2061: syntax error : identifier 'frexpl' c:\program files\microsoft visual studio 11.0\vc\include\cmath  41  1   
20  error C2061: syntax error : identifier 'ldexpf' c:\program files\microsoft visual studio 11.0\vc\include\cmath  32  1   
50  error C2061: syntax error : identifier 'ldexpl' c:\program files\microsoft visual studio 11.0\vc\include\cmath  41  1   
22  error C2061: syntax error : identifier 'log10f' c:\program files\microsoft visual studio 11.0\vc\include\cmath  33  1   
52  error C2061: syntax error : identifier 'log10l' c:\program files\microsoft visual studio 11.0\vc\include\cmath  42  1   
21  error C2061: syntax error : identifier 'logf'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  32  1   
51  error C2061: syntax error : identifier 'logl'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  41  1   
24  error C2061: syntax error : identifier 'modff'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  33  1   
54  error C2061: syntax error : identifier 'modfl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  42  1   
25  error C2061: syntax error : identifier 'powf'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  33  1   
55  error C2061: syntax error : identifier 'powl'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  42  1   
26  error C2061: syntax error : identifier 'sinf'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  34  1   
28  error C2061: syntax error : identifier 'sinhf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  34  1   
58  error C2061: syntax error : identifier 'sinhl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  43  1   
56  error C2061: syntax error : identifier 'sinl'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  43  1   
29  error C2061: syntax error : identifier 'sqrtf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  34  1   
59  error C2061: syntax error : identifier 'sqrtl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  43  1   
30  error C2061: syntax error : identifier 'tanf'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  35  1   
32  error C2061: syntax error : identifier 'tanhf'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  35  1   
62  error C2061: syntax error : identifier 'tanhl'  c:\program files\microsoft visual studio 11.0\vc\include\cmath  44  1   
60  error C2061: syntax error : identifier 'tanl'   c:\program files\microsoft visual studio 11.0\vc\include\cmath  44  1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T18:42:15.083

似乎有些混乱。你有#included fstream，这是C++的一部分，而不是C。

似乎 fstream 出于某种原因做了自己的 cmath 的#include，错误可能来自 C 和 C++ 之间的不兼容。

编辑：

是的，在几级#includes 之后，cmath 是#included，并且cmath 不仅仅是math.h 的副本，而是包含C++ 特定的代码。

# css - CSS3 滑块 - 相对 div 内的绝对定位，用于响应式幻灯片

> ID：11367709
> 
> 赞同：1
> 
> 时间：2012-07-06T18:26:20.527
> 
> 标签：css, slider, slideshow, parallax

我正在修改从[http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/](http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/)获得的一些 CSS 代码。它是一个视差 CSS3 滑块。

我几乎尝试了所有方法，但我的问题是我无法在浏览器中以固定的最大宽度居中滑动 div（da.slide）。最大宽度为 970 像素，当浏览器调整大小时会缩小。我已经尝试使用`margin: 0 auto`并且`left:50%`它现在仍在工作 - 它只是挂在左边。

我认为可能的问题是滑块 div 的定位。当我将它从绝对更改为相对时，它适用于第一张幻灯片，但其余幻灯片消失/在彼此下方滑动。有没有机会使滑动 div 居中？

这是CSS3代码：

```
.da-slider{
    width: 100%;
    min-width: 320px;
    height: 300px;
    position: relative;
    margin: 0 auto;
    overflow: hidden;
    background: transparent url(../images/waves.png);
    background-repeat:repeat-x;
    -webkit-transition: background-position 1s ease-out 0.3s;
    -moz-transition: background-position 1s ease-out 0.3s;
    -o-transition: background-position 1s ease-out 0.3s;
    -ms-transition: background-position 1s ease-out 0.3s;
    transition: background-position 1s ease-out 0.3s;
}

.da-slide{
    position: absolute;
    max-width: 970px;
    width:100%; 
    height: 100%;
    top: 0px;
    left: 0px;  
    font-family: 'BebasNeueRegular', 'Arial Narrow', Arial, sans-serif;
    text-align: left;

}
.da-slide-current{
    z-index: 1000;
}
.da-slider-fb .da-slide{
    left: 100%;
}
.da-slider-fb  .da-slide.da-slide-current{
    left: 0px;
}
.da-slide h2,
.da-slide p,
.da-slide .da-link,
.da-slide .da-img{
    position: absolute;
    opacity: 0;
    left: 110%;
}
.da-slider-fb .da-slide h2,
.da-slider-fb .da-slide p,
.da-slider-fb .da-slide .da-link{
    left: 10%;
    opacity: 1;
} 
```

HTML 是：

```
<div id="da-slider" class="da-slider">
                <div class="da-slide">
                    <h2>Easy management</h2>
                    <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
                    <a href="#" class="da-link">Read more</a>
                    <div class="da-img"><img src="images/2.png" alt="image01" /></div>
                </div>
                <div class="da-slide">
                    <h2>Revolution</h2>
                    <p>A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth.</p>
                    <a href="#" class="da-link">Read more</a>
                    <div class="da-img"><img src="images/3.png" alt="image01" /></div>
                </div>
                <div class="da-slide">
                    <h2>Warm welcome</h2>
                    <p>When she reached the first hills of the Italic Mountains, she had a last view back on the skyline of her hometown Bookmarksgrove, the headline of Alphabet Village and the subline of her own road, the Line Lane.</p>
                    <a href="#" class="da-link">Read more</a>
                    <div class="da-img"><img src="images/1.png" alt="image01" /></div>
                </div>
                <div class="da-slide">
                    <h2>Quality Control</h2>
                    <p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar.</p>
                    <a href="#" class="da-link">Read more</a>
                    <div class="da-img"><img src="images/4.png" alt="image01" /></div>
                </div>
                <nav class="da-arrows">
                    <span class="da-arrows-prev"></span>
                    <span class="da-arrows-next"></span>
                </nav>
        </div> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:03:41.873

```
.da-slide{
    position: relative;
    margin: 0 auto;
    max-width: 970px;  
    font-family: 'BebasNeueRegular', 'Arial Narrow', Arial, sans-serif;
    text-align: left;

} 
```

这似乎对我有用。不知道你到底想做什么。

绝对定位将元素从页面流中取出。top、left、right、bottom 属性指的是它相对于其父元素的位置。通过将其扩展到 100% 宽度和 100% 高度，元素将扩展到它所在的容器的大小，禁用能够居中。

您应该给元素一个最小宽度，以便浏览器知道展开/缩回框的大小。这些尺寸的大小应给予灵活的度量，例如百分比。给它一个 100% 的宽度意味着元素将扩展到其所在容器的大小。最大值和最小值允许元素在该设置大小处停止扩展。

希望有帮助，B

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-08T23:55:21.897

这是事后的事，但我遇到了和你一样的问题，Raja。具体来说，我正在使用 da-slider（我作为另一个模板的一部分获得），但滑块中的图像相对于正在查看它们的浏览器没有正确调整大小。因此，在 PC 上看起来不错的较大图像在 iPhone 上查看时看起来相当大。

为了解决这个问题，我将每个 da-slide div 中的图像宽度设置为 100%。接下来，我从 da-slider 类中删除了 height 属性。最后，我为 da-slide 设置了 display:none，并为 da-slide-current 类设置了 display: block。这阻止了父/容器 div 同时显示所有图像。最终结果是只显示“当前”图像，并且容器 div 相对于浏览器窗口的宽度展开/收缩。

这是最终的 da-slider 类的样子：

```
.da-slider{
    width: 100%;
    position: relative;
    margin: 0 auto;
    overflow: hidden;
    box-shadow: 0px 1px 1px rgba(0,0,0,0.2), 0px -2px 1px #fff;
    -webkit-transition: background-position 1.4s ease-in-out 0.3s;
    -moz-transition: background-position 1.4s ease-in-out 0.3s;
    -o-transition: background-position 1.4s ease-in-out 0.3s;
    -ms-transition: background-position 1.4s ease-in-out 0.3s;
    transition: background-position 1.4s ease-in-out 0.3s;
} 
```

以及 da-slide 和 da-slide-current 类，分别为：

```
.da-slide{
    width: 100%;
    height: 100%;
    top: 0px;
    left: 0px;
    font-family: 'BebasNeueRegular', 'Arial Narrow', Arial, sans-serif;
    text-align: left;
    display: none;
}
.da-slide-current{
    z-index: 10;
    display: block;
} 
```

最后，da-slide div 看起来像：

```
 <div id="da-slider" class="da-slider">
    <div class="da-slide">
      <img src="assets/img/index/panel1.jpg" style="width: 100%;">
    </div> 
    ... 
```

同样，这是事后的事（此时您的问题已经有一年多了），但希望对您或其他人有所帮助。

# android - 使用 GCM 从 java 服务器向 android 手机发送希伯来语推送通知时出现乱码

> ID：11367710
> 
> 赞同：0
> 
> 时间：2012-07-06T18:26:22.603
> 
> 标签：android, google-app-engine, push-notification, hebrew, google-cloud-messaging

我正在使用应用程序引擎使用 Google Cloud Messaging 将希伯来语推送通知发送到智能手机，但是当我在电话上收到消息时，文本是 ??????? 而不是希伯来语。

这里是使用 JSON 对象准备将消息发送到电话的代码：

```
 JSONObject obj=new JSONObject();
                JSONArray registrationsIDList = new JSONArray();

                Query newsQuery = new Query("Devices");
                List<Entity> results = datastore.prepare(newsQuery).asList(
                        FetchOptions.Builder.withDefaults());
                if(results!=null)
                {
                    for(int j=0;j<results.size();j++)
                    {
                        Entity entity=results.get(j);
                        if(entity!=null)
                        {
                            String ID=(String) entity.getProperty("Registration ID");
                            if(ID!=null)
                            {
                                registrationsIDList.put(ID);
                            }
                        }
                    }
                }

                LinkedHashMap data = new LinkedHashMap();
                data.put("Subject",subjects.get(i).getSubject());
                data.put("Writer", subjects.get(i).getWriter());
                data.put("SubjectDate", subjects.get(i).getLastCommentDateTime());
                data.put("SubjectLink", subjects.get(i).getSubjectLink());

                try {
                    obj.put("registration_ids", registrationsIDList);
                    obj.put("data", data);
                } catch (JSONException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                //Sending message to GCM for devices

                try 
                {
                    URL url = new URL("https://android.googleapis.com/gcm/send");
                    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                    connection.setDoOutput(true);
                    connection.setRequestMethod("POST");
                    connection.setRequestProperty("Content-Type", "application/json ; charset=utf-8");
                    connection.setRequestProperty("Authorization", "key=*************************************");

                    OutputStream writer = connection.getOutputStream();
                    Entity tmp=new Entity("JSON");
                    tmp.setProperty("Message", obj.toString());
                    datastore.put(tmp);
                    writer.write(obj.toString().getBytes());
                    writer.close();

                    Entity device=new Entity("Messages Results");
                    device.setProperty("Response Code", connection.getResponseCode());
                    device.setProperty("Response Message", connection.getResponseMessage());
                    datastore.put(device);
                    if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {

                    } else {
                        // Server returned HTTP error code.
                    }
                } catch (MalformedURLException ex) {
                    // ...
                } catch (IOException ex) {
                    // ...
                } 
```

在发送消息之前，我检查了 JSON 对象是否包含正确的希伯来语文本。

这里是在手机上接收消息的代码：

```
@Override
protected void onMessage(Context arg0, Intent arg1) {
    Log.d("GCM", "RECIEVED A MESSAGE");
    String str = arg1.getExtras().getString("Subject");
    Log.d("GCM", str);
    String str1 =arg1.getExtras().getString("Writer");
    Log.d("GCM", str1);
    String str2 =arg1.getExtras().getString("SubjectDate");
    Log.d("GCM", str2);
    String str3 =arg1.getExtras().getString("SubjectLink");
    Log.d("GCM", str3);
} 
```

现在的文字是??????????????????? 而不是希伯来语。任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:31:02.363

您需要使用 Unicode：`.toString.getBytes("UTF8")`

# entity-framework-4.1 - 实体框架很慢

> ID：11367715
> 
> 赞同：1
> 
> 时间：2012-07-06T18:26:53.523
> 
> 标签：entity-framework-4.1

我给出了一个简单的 EF 查询

```
return context.GlobalEntities
.Where(ge => ge.IsActive == true)  
.ToList() 
```

它被翻译成以下 SQL 查询

```
SELECT 
[Extent1].[GlobalEntityId] AS [GlobalEntityId], 
[Extent1].[GlobalEntityName] AS [GlobalEntityName], 
[Extent1].[GlobalEntityAlias] AS [GlobalEntityAlias], 
[Extent1].[GlobalEntityTypeId] AS [GlobalEntityTypeId], 
[Extent1].[IsActive] AS [IsActive], 
[Extent1].[CreatedBy] AS [CreatedBy], 
[Extent1].[CreatedAt] AS [CreatedAt], 
[Extent1].[ChangedBy] AS [ChangedBy], 
[Extent1].[ChangedAt] AS [ChangedAt], 
[Extent1].[EmailAddress] AS [EmailAddress], 
[Extent1].[AverageActionTimeInHrs] AS [AverageActionTimeInHrs], 
[Extent1].[AverageCreationTimeInHrs] AS [AverageCreationTimeInHrs]
FROM [dbo].[GlobalEntity] AS [Extent1]
WHERE 1 = [Extent1].[IsActive] 
```

当我执行上面的代码时，它需要 45 秒才能执行，而当我从 SSMS 执行相同的查询时只需要 1 秒。

关于为什么实体框架执行简单查询需要这么长时间的任何想法。这是 SQL 探查器所说的

```
SQL:BatchCompleted  SELECT 
[Extent1].[GlobalEntityId] AS [GlobalEntityId], 
[Extent1].[GlobalEntityName] AS [GlobalEntityName], 
[Extent1].[GlobalEntityAlias] AS [GlobalEntityAlias], 
[Extent1].[GlobalEntityTypeId] AS [GlobalEntityTypeId], 
[Extent1].[IsActive] AS [IsActive], 
[Extent1].[CreatedBy] AS [CreatedBy], 
[Extent1].[CreatedAt] AS [CreatedAt], 
[Extent1].[ChangedBy] AS [ChangedBy], 
[Extent1].[ChangedAt] AS [ChangedAt], 
[Extent1].[EmailAddress] AS [EmailAddress], 
[Extent1].[AverageActionTimeInHrs] AS [AverageActionTimeInHrs], 
[Extent1].[AverageCreationTimeInHrs] AS [AverageCreationTimeInHrs]
FROM [dbo].[GlobalEntity] AS [Extent1]
WHERE 1 = [Extent1].[IsActive]  

Application Name: EntityFramework   
NTUserName: user
CPU: 187    
Reads: 1357 
Writes: 0   
Duration: 45157 
ProcessID: 9520 
StartTime: 2012-07-06 10:38:40.797  
End TIme: 2012-07-06 10:39:25.953 
```

# c# - 在 Visual Studio 2010 中使用 MS Access 加入简单报表

> ID：11367716
> 
> 赞同：-1
> 
> 时间：2012-07-06T18:27:01.727
> 
> 标签：c#, visual-studio-2010, ms-access, ms-access-2007

我在 C#.Net 2010 中有 Windows 应用程序。我已经使用 oledb Connection 在 MS Access 2007 中连接了数据库

现在我添加了简单的 ReportViewer（不是 Crystal Report Viewer），并使用它设计了使用 DataSet 的简单报表。它用一张表很好地显示数据。

但我想使用 INNER JOIN 从多个表中获取数据，MS Access 2007 中是否存在任何存储过程或视图，或者 VS 2010 中是否存在与报告的任何连接？

谢谢//

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:30:58.643

MS Access 2007 允许查看。您可以使用您需要的数据在 MS Access 中创建一个视图。创建视图的语法可以在这里找到：

[CREATE VIEW 语句 (Microsoft Access SQL)](http://msdn.microsoft.com/en-us/library/bb177895%28v=office.12%29.aspx)

# java - GWT：100 LOC 经验法则？

> ID：11367717
> 
> 赞同：0
> 
> 时间：2012-07-06T18:27:13.483
> 
> 标签：java, javascript, gwt

我读过几篇 GWT 开发人员博客，其中提到了一些“经验法则”，即如果生成的 JavaScript 将是 100 行或更多代码，最好自己编写 JavaScript（而不是通过 GWT 生成它）。

我的问题是：你怎么知道会产生多少 LOC GWT？这似乎是一个难以遵循的经验法则，并且需要编写 2 组代码（首先编写 GWT，然后用 JavaScript 重新编写它）！？！？

我在这里误解了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:57:05.447

GWT 的目的是让我们不必编写 JavaScript 和使用 Vaadin（构建在 GWT 之上的 Java Web 应用程序框架）我创建了许多 UI 控件，我什至不知道如何在 JavaScript 中进行操作。您需要牢记的问题是性能。我写了一个表单，在 IE8 中渲染需要 20 多秒。无论您的用户有多少 LOC，没有人会等待页面出现这么久。

# ruby-on-rails - 为什么我的 Ruby 脚本占用了我 90% 的 CPU？

> ID：11367719
> 
> 赞同：0
> 
> 时间：2012-07-06T18:27:18.827
> 
> 标签：ruby-on-rails, ruby, multithreading, logging, daemon

我编写了一个管理脚本，该脚本跟踪 heroku 日志，每隔 n 秒，它会汇总平均值并在我超过某个阈值时通知我（是的，我知道并喜欢新的遗物——但我想做自定义的东西）。

这是[整个脚本](https://gist.github.com/3063475)。

我从来都不是 IO 和线程的高手，我想知道我是否犯了一个愚蠢的错误。我有几个`while(true){}`可能是罪魁祸首的守护线程。例如：

```
# read new lines
f = File.open(file, "r")
f.seek(0, IO::SEEK_END)
while true do
  select([f])
  line = f.gets
  parse_heroku_line(line)
end 
```

我使用一个守护进程来监视日志的新行，另一个用于定期总结。

有人看到了一种减少处理器密集型的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T19:01:49.287

这可能很热，因为您在从临时文件中读取时从未真正阻塞。[是 POSIX select(2)](http://linux.die.net/man/2/select)[`IO::select`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-select)上的一个薄层。看起来您正试图阻止直到文件准备好读取，但 select(2) 认为 EOF 已准备好（“文件描述符在文件结束时也已准备好”），因此您总是立即返回from select then call gets 在 EOF 处返回 nil。

您可以获得更真实的 EOF 读取和良好的阻塞行为，方法是避免写入临时文件的线程，而是使用[`IO::popen`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-popen)fork`%x[heroku logs --ps router --tail --app pipewave-cedar]`日志尾部，连接到可以循环的 ruby​​ IO 对象，返回`gets`时退出（指示日志裁缝完成）。当没有可读取的内容时，来自tailer 的管道上的管道将阻塞，并且您的脚本只会在执行行解析和报告时尽可能热地运行。`gets``nil``gets`

编辑：我没有设置实际尝试您的代码，但您应该能够用此代码替换日志尾部线程和临时文件读取循环以获得上述行为：

```
IO.popen( %w{ heroku logs --ps router --tail --app my-heroku-app } ) do |logf|
  while line = logf.gets
    parse_heroku_line(line) if line =~ /^/
  end
end 
```

我还注意到您的报告线程没有做任何事情来同步对`@total_lines`,等的访问。因此，您有一些较小的竞争条件，您可以从方法更新`@total_errors`的实例变量中获得不一致的值。`parse_heroku_line`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:52:21.757

`select`是关于读取是否会阻塞。f 只是一个普通的旧文件，所以当你读到最后时不会阻塞，它们只会立即返回 nil 。结果`select`立即返回，而不是像我假设的那样等待将某些内容附加到文件中。正因为如此，你正处于一个繁忙的循环中，所以高 CPU 是可以预料的。

如果您处于 eof 状态（您可以检查`f.eof?`或是否`gets`返回 nil），那么您可以开始睡眠（可能有某种退避）或使用诸如[listen](https://github.com/guard/listen)之类的东西来接收文件系统更改的通知

# git - Git post commit：跳过 --amend 和 rebase

> ID：11367722
> 
> 赞同：10
> 
> 时间：2012-07-06T18:27:47.407
> 
> 标签：git, githooks, post-commit-hook

我有一个 post-commit 钩子，它在 ruby​​ 中做一些事情。它工作得很好，但在某些情况下，我想在执行`git rebase`or时跳过代码执行`git commit --amend`。

有人知道在这些情况下我如何无法触发提交后挂钩或任何解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T18:55:36.540

变基时，文件夹中有一个名为`rebase-merge`present 的`.git`目录。这可能是一种在 a 期间禁用钩子的方法（ btw`rebase`的开始由钩子指示）。`rebase``pre-rebase`

但是`--amend`，我帮不了你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-28T13:00:39.140

如果你想从钩子中检测 git commit --amend ，这是你最好的选择

重击

```
if [[ $(ps -ocommand= -p $PPID) == "git commit --amend" ]]; then
    echo "always allow git commit --amend"
    exit 0
fi 
```

红宝石

```
parent=`ps -ocommand= -p #{Process.ppid}`.chomp
if parent == "git commit --amend"
  # Always allow an amend
  puts "always allow git commit --amend"
  exit 0
end 
```

git 和 shell 别名在 shell 输出中扩展，所以这也涵盖了这些情况

灵感：[https ://github.com/brigade/overcommit/issues/146](https://github.com/brigade/overcommit/issues/146)

# c# - 如何在 C# 中对字符串进行 SHA512 处理？

> ID：11367727
> 
> 赞同：55
> 
> 时间：2012-07-06T18:28:02.053
> 
> 标签：c#, hash

我正在尝试编写一个函数来获取一个字符串并 sha512 像这样吗？

```
public string SHA512(string input)
{
     string hash;

     ~magic~

     return hash;
} 
```

魔法应该是什么？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-07-06T18:33:08.977

您的代码是正确的，但您应该处理 SHA512Managed 实例：

```
using (SHA512 shaM = new SHA512Managed())
{
   hash = shaM.ComputeHash(data);
} 
```

512 位是 64 个字节。

要将字符串转换为字节数组，您需要指定编码。如果你想创建一个哈希码，UTF8 是可以的：

```
var data = Encoding.UTF8.GetBytes("text");    
using (... 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-08-24T19:41:37.403

这是来自我的一个项目：

```
public static string SHA512(string input)
{
    var bytes = System.Text.Encoding.UTF8.GetBytes(input);
    using (var hash = System.Security.Cryptography.SHA512.Create())
    {
        var hashedInputBytes = hash.ComputeHash(bytes);

        // Convert to text
        // StringBuilder Capacity is 128, because 512 bits / 8 bits in byte * 2 symbols for byte 
        var hashedInputStringBuilder = new System.Text.StringBuilder(128);
        foreach (var b in hashedInputBytes)
            hashedInputStringBuilder.Append(b.ToString("X2"));
        return hashedInputStringBuilder.ToString();
    }
} 
```

请注意：

1.  SHA512 对象已处理（“使用”部分），因此我们没有任何资源泄漏。
2.  StringBuilder 用于高效的十六进制字符串构建。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-06T18:32:02.550

`512/8 = 64`，所以 64 确实是正确的大小。也许您想在 SHA512 算法*之后将其转换为十六进制。*

另请参阅：[如何将字节数组转换为十六进制字符串，反之亦然？](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa-in-c)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-21T10:36:40.373

除了使用 System.Security.Cryptography 的 WinCrypt-API，您还可以使用 BouncyCastle：

```
public static byte[] SHA512(string text)
{
    byte[] bytes = System.Text.Encoding.UTF8.GetBytes(text);

    Org.BouncyCastle.Crypto.Digests.Sha512Digest digester = new Org.BouncyCastle.Crypto.Digests.Sha512Digest();
    byte[] retValue = new byte[digester.GetDigestSize()];
    digester.BlockUpdate(bytes, 0, bytes.Length);
    digester.DoFinal(retValue, 0);
    return retValue;
} 
```

如果您需要 HMAC 版本（向哈希添加身份验证）

```
public static byte[] HmacSha512(string text, string key)
{
    byte[] bytes = Encoding.UTF8.GetBytes(text);

    var hmac = new Org.BouncyCastle.Crypto.Macs.HMac(new Org.BouncyCastle.Crypto.Digests.Sha512Digest());
    hmac.Init(new Org.BouncyCastle.Crypto.Parameters.KeyParameter(System.Text.Encoding.UTF8.GetBytes(key)));

    byte[] result = new byte[hmac.GetMacSize()];
    hmac.BlockUpdate(bytes, 0, bytes.Length);
    hmac.DoFinal(result, 0);

    return result;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-13T03:48:05.463

您可以尝试以下几行：

```
public static string GenSHA512(string s, bool l = false)
{
    string r = "";

    try
    {
        byte[] d = Encoding.UTF8.GetBytes(s);

        using (SHA512 a = new SHA512Managed())
        {
            byte[] h = a.ComputeHash(d);
            r = BitConverter.ToString(h).Replace("-", "");
        }

        r = (l ? r.ToLowerInvariant() : r);
    }
    catch
    {

    }

    return r;
} 
```

1.  它被放置在最后
2.  它是安全的
3.  支持小写

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T18:32:00.900

我不确定你为什么期待 128。

一个字节中有 8 位。64 字节。8 * 64 = 512 位哈希。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T18:33:00.393

来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/System.Security.Cryptography.SHA512Managed.aspx)：
SHA512Managed 算法的哈希大小为 512 位。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-06T18:34:29.050

您可以使用 System.Security.Cryptography.SHA512 类

[SHA512 上的 MSDN](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha512)

这是一个示例，直接来自 MSDN

```
byte[] data = new byte[DATA_SIZE];
byte[] result;
SHA512 shaM = new SHA512Managed();
result = shaM.ComputeHash(data); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-20T20:49:11.893

保持简单：

```
using (SHA512 sha512 = new SHA512Managed())
{
    password = Encoding.UTF8.GetString(sha512.ComputeHash(Encoding.UTF8.GetBytes(password)));
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-02T10:45:29.033

```
UnicodeEncoding UE = new UnicodeEncoding();            
        byte[] message = UE.GetBytes(password);
        SHA512Managed hashString = new SHA512Managed();
        string hexNumber = "";
        byte[]  hashValue = hashString.ComputeHash(message);
        foreach (byte x in hashValue)
        {
            hexNumber += String.Format("{0:x2}", x);
        }
        string hashData = hexNumber; 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2020-05-01T07:19:53.407

我使用了以下

```
public static string ToSha512(this string inputString)
{
        if (string.IsNullOrWhiteSpace(inputString)) return string.Empty;
        using (SHA512 shaM = new SHA512Managed())
        {
            return Convert.ToBase64String(shaM.ComputeHash(Encoding.UTF8.GetBytes(inputString)));
        }
} 
```

# ios - 在 iOS 应用程序的文件系统中查看文件以进行测试？

> ID：11367730
> 
> 赞同：0
> 
> 时间：2012-07-06T18:28:06.170
> 
> 标签：ios, filesystems

我现在正在开发一个应用程序，该应用程序应该从 NSString 生成文本文档，将其保存到应用程序的文档文件夹，然后将其上传到 iCloud。

我想检查并查看该文件是否实际被创建并保存在我的应用程序沙箱的 Documents 文件夹中。

> 您如何查看保存在 iPhone 上的文件？（无论是在手机上还是通过 USB 连接到我的 Mac 时。）

这仅用于测试目的，我要做的就是查看文件名和内容，而不是以任何方式编辑它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:39:13.033

试试这个 [http://www.macroplant.com/iexplorer/](http://www.macroplant.com/iexplorer/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:55:55.343

除了 pdesantis 的回答，你可以通过 Xcode 实现你想要的，而不是依赖第三方工具。打开管理器，选择设备选项卡，在左侧栏中选择相关设备下的应用程序，然后在右侧大区域中选择您感兴趣的应用程序，然后单击屏幕底部的下载以获取其当前本地存储。

# asp.net - 在 AsyncFileUpload 后，ModalDialog 上 UpdatePanel 中的 Gridview 未更新

> ID：11367732
> 
> 赞同：0
> 
> 时间：2012-07-06T18:28:12.693
> 
> 标签：asp.net, gridview, updatepanel, postback, asyncfileupload

我在更新面板中有一个 GridView，还有一个用于上传图像的 AsyncFileUpload（在更新面板之外）。所有这些都在一个使用`SHOWMODALDIALOG`.

我要实现的目标：
1\. 文件上传完成后，更新面板就会更新，gridview 会显示用户刚刚添加的图像。

我面临的问题：
1\. Gridview 不刷新，即使文件上传到数据库后我有一个 Databind 事件。更新面板正在通过`__doPostBack('UpdatePanelID',' ')`调用的 JS 进行刷新`OnClientUploadComplete`（我正在通过在更新面板中显示当前时间的标签进行检查）
2\. 每当我单击“保存更改”或“取消”时，ModalDialog 都会打开一个新页面' 添加图像后的按钮。如果我只是打开窗口并单击这些按钮，它们就可以正常工作。我确实尝试包含`<base target="_self" />`在 中`<head>`，最后解决了`window.name="xxx"` `onload body`。

任何帮助表示赞赏。我的代码：

**ASPX**

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="RCMT0032.aspx.vb" Inherits="RCWKSHEET.RCMT0032" EnableEventValidation="false"%>
<%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit"%>

<html>
<head>
<base target="RCMT0032" />
  <title>RCMT0032</title>
    <script type="text/javascript">

        function readpasseddata() {
            window.name = 'RCMT0032';
            var rpt = window.dialogArguments;
            document.getElementById("HiddenReport").value = rpt;

        }
        function UploadComplete(sender, args) {
            __doPostBack('gvupd', '');
        }         
    </script>
</head>
<body onload="readpasseddata()" >
    <form id="Form1" method="post" runat="server" target="RCMT0032" >
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></asp:ToolkitScriptManager>
    <asp:AsyncFileUpload id="BrowserHidden" Width="1" runat="server" OnClientUploadComplete="UploadComplete" OnUploadedComplete="BrowserHidden_UploadedComplete"/>
    <button class="ActionButton" id="btnSave" runat="server">Save & Exit</button>
    <button class="ActionButton" id="btnClose" runat="serverCancel</button>

    <asp:UpdatePanel id="gvupd" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
            <asp:Label runat="server" ID="Label1" />

            <asp:GridView id="GridView1" Runat="server" AutoGenerateColumns="False"
                    AllowPaging="false" EnableViewState="true" datakeynames="Seq">
                <Columns>
                <asp:TemplateField HeaderText="Comments">
                    <ItemTemplate><asp:TextBox ID="comments" Enabled="true" MaxLength="249" TextMode="MultiLine" Text='<%# Eval("Comments") %>'/>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Picture">
                    <ItemTemplate><asp:HyperLink id="PictHyper" runat="server" Target="_blank" ImageUrl='<%# String.Format("RCMT0033.aspx?report={0}&seq={1}", Eval("ReportNumber"), Eval("Seq"))%>' NavigateUrl='<%# String.Format("RCMT0034.aspx?report={0}&seq={1}", Eval("ReportNumber"), Eval("Seq"))%>' /></ItemTemplate></asp:TemplateField>         
                <asp:TemplateField HeaderText="Delete">
                    <ItemTemplate><asp:CheckBox runat="server" ID="DeleteCB" /></ItemTemplate>
                </asp:TemplateField></Columns>
        </asp:GridView>
        </ContentTemplate>
    </asp:UpdatePanel>
    </div>
    </form>
 </body>
 </html> 
```

**背后的代码**

```
 Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.LoaD
        If Not IsPostBack Then
            LoadData()
            DataBind()
        Else
            With ViewState
                _intReportNumber = CInt(.Item("Report"))
                _strVendorNumber = CStr(.Item("VendorNumber"))
                _strStatus = CStr(.Item("Status"))
            End With
        End If
    End Sub

    Public Sub LoadData()
    //GET DATA INTO DATATABLE DT
            GridView1.DataSource = dt
            GridView1.DataBind()
        Catch err As Exception
            Throw err
        End Try
    End Sub

Protected Sub UploadData()
        If BrowserHidden.PostedFile IsNot Nothing AndAlso BrowserHidden.PostedFile.FileName <> "" Then
            Try
                //UPLOAD STUFF
                GridView1.DataBind()
            Catch ex As Exception
            End Try
        End If
    End Sub

    Protected Sub btnClose_ServerClick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnClose.ServerClick
        canceladd()
        ScriptManager.RegisterStartupScript(Page, Me.GetType(), "onclick", "window.open('','_self',''); window.close();", True)
    End Sub

    Protected Sub BrowserHidden_UploadedComplete(ByVal sender As System.Object, ByVal e As AjaxControlToolkit.AsyncFileUploadEventArgs)
        UploadData()
    End Sub

    Protected Sub gvupd_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles gvupd.Load
        Label1.Text = DateTime.Now.ToString()
    End Sub

    Protected Sub btnSave_ServerClick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.ServerClick
        FinalizeAdd()
        Page.ClientScript.RegisterStartupScript(Me.GetType(), "onclick", "window.open('','_self',''); window.close();", True)
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:06:46.683

对于您的 #2 问题，我认为您不能使用客户端或服务器端脚本重新加载/刷新模式窗口。要归档相同或相似的结果，您可以让上传控件关闭模式窗口并返回一个值以指示需要重新打开。然后在父窗口中，您可以根据需要使用循环打开它。如果用户单击模态窗口上的关闭按钮或右上角的 X 按钮，模态将不会重新打开，因为它不会将“重新打开”值发送回父级。

父页面.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="ParentPage.aspx.cs" Inherits="WebApplication1.ParentPage" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript">
        function popModal(){
            var val = window.showModalDialog('ModalChild.aspx', '', '');
            while (val == "reopen") {
                val = window.showModalDialog('ModalChild.aspx', '', '');
            }
        }
    </script>
</head>
<body>
    <input type='button' value='Pop Modal' onclick='popModal();' />
</body>
</html> 
```

ModalChild.aspx

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript">
        function closeAndReOpen(){
            window.returlValue = "reopen";
            window.close();
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    <div>
        <asp:AsyncFileUpload ID="AsyncFileUpload1" runat="server" OnClientUploadComplete="closeAndReOpen();"
            OnUploadedComplete="AsyncFileUpload1_UploadedComplete" />

        <input type='button' value='Close' onclick='window.close();' />

        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:GridView runat="server" ID="GridView1" AutoGenerateColumns="False" OnRowDataBound="GridView1_RowDataBound">
                    <Columns>
                        <asp:TemplateField>
                            <ItemTemplate>
                                <img runat="server" id="img" /></ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="AsyncFileUpload1" />
            </Triggers>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

ModalChild.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using System.Web.UI.HtmlControls;

namespace WebApplication1
{
    public partial class ModalChild: System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                LoadGrid();
            }
        }

        protected void LoadGrid()
        {
            var files = new DirectoryInfo(Server.MapPath("Data")).GetFiles("*.png");
            GridView1.DataSource = files;
            GridView1.DataBind();
        }

        protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                var fi = e.Row.DataItem as FileInfo;
                var img = e.Row.FindControl("img") as HtmlImage;
                img.Src = @"Data\" + fi.Name;
            }
        }

        protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
        {
            if (AsyncFileUpload1.PostedFile != null)
            {
                var savePath = Server.MapPath(@"Data\" + Guid.NewGuid().ToString() + ".png");
                AsyncFileUpload1.SaveAs(savePath);
            }
        }
    }
} 
```

# matplotlib - Matplotlib，使用乳胶的一致字体

> ID：11367736
> 
> 赞同：69
> 
> 时间：2012-07-06T18:28:24.537
> 
> 标签：matplotlib

我的问题是我想在某些情节中使用乳胶标题，而在其他情节中不使用乳胶。现在，matplotlib 为 Latex 标题和非 Latex 标题有两种不同的默认字体，我希望两者保持一致。是否有我必须更改的 RC 设置才能自动允许此设置？

我使用以下代码生成一个图：

```
import numpy as np
from matplotlib import pyplot as plt

tmpData = np.random.random( 300 )

##Create a plot with a tex title
ax = plt.subplot(211)
plt.plot(np.arange(300), tmpData)
plt.title(r'$W_y(\tau, j=3)$')
plt.setp(ax.get_xticklabels(), visible = False)

##Create another plot without a tex title
plt.subplot(212)
plt.plot(np.arange(300), tmpData )
plt.title(r'Some random numbers')
plt.show() 
```

这就是我所说的不一致。相对于标题，轴刻度标签看起来很薄。： ![](../Images/92a2c325fd91107ad53da8be2d6e7c72.png)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-12-29T23:12:48.177

要使 tex-style/mathtext 文本看起来像常规文本，您需要将 mathtext 字体设置为 Bitstream Vera Sans，

```
import matplotlib
matplotlib.rcParams['mathtext.fontset'] = 'custom'
matplotlib.rcParams['mathtext.rm'] = 'Bitstream Vera Sans'
matplotlib.rcParams['mathtext.it'] = 'Bitstream Vera Sans:italic'
matplotlib.rcParams['mathtext.bf'] = 'Bitstream Vera Sans:bold'
matplotlib.pyplot.title(r'ABC123 vs $\mathrm{ABC123}^{123}$') 
```

如果您希望常规文本看起来像 mathtext 文本，您可以将所有内容更改为 Stix。这将影响标签、标题、刻度等。

```
import matplotlib
matplotlib.rcParams['mathtext.fontset'] = 'stix'
matplotlib.rcParams['font.family'] = 'STIXGeneral'
matplotlib.pyplot.title(r'ABC123 vs $\mathrm{ABC123}^{123}$') 
```

基本思想是您需要将常规字体和数学文本字体设置为相同，并且这样做的方法有点晦涩难懂。您可以看到自定义字体的列表，

```
sorted([f.name for f in matplotlib.font_manager.fontManager.ttflist]) 
```

正如其他人所提到的，您还可以通过在 rcParams 中设置 text.usetex 来让 Latex 使用一种字体为您呈现所有内容，但这很慢而且并非完全必要。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-06T18:36:30.857

**编辑**

如果您想更改 matplotlib 中 LaTeX 使用的字体，请查看此页面

[http://matplotlib.sourceforge.net/users/usetex.html](http://matplotlib.sourceforge.net/users/usetex.html)

其中一个例子是

```
from matplotlib import rc
rc('font',**{'family':'sans-serif','sans-serif':['Helvetica']})
## for Palatino and other serif fonts use:
#rc('font',**{'family':'serif','serif':['Palatino']})
rc('text', usetex=True) 
```

只选择你最喜欢的！

如果你想要粗体字体，你可以试试`\mathbf`

```
plt.title(r'$\mathbf{W_y(\tau, j=3)}$') 
```

**编辑 2**

以下将为您设置粗体字体

```
font = {'family' : 'monospace',
        'weight' : 'bold',
        'size'   : 22}

rc('font', **font) 
```

# java - Java 中的 Scanner.hasNext 字符串匹配

> ID：11367739
> 
> 赞同：0
> 
> 时间：2012-07-06T18:28:49.787
> 
> 标签：java, regex, parsing, text, java.util.scanner

我正在解析一个包含一些文本的文本文件，如下所示：

```
Level1
Some-text-here
Level2
Some-text-here
Level3
Some-text-here 
```

我已经实现了解析文件并尝试计算文件中“级别”出现次数的代码。这就是我的做法：

```
Scanner scanner = new Scanner(new File(inPath));
Pattern p = Pattern.compile("Level");
while(scanner.hasNext()) {
    if(scanner.hasNext(p))  {
        ++lastLevelCreatedWas;
    }
    scanner.next();
} 
```

然而，'if' 条件永远不会被击中，因为 hasNext(p) 试图找到“Level”的完全匹配并且会忽略“Level1”、“Level2”等单词。我应该如何让它考虑包含关键字“级别”的任何单词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:37:18.530

我认为您正在寻找[Scanner.useDelimiter](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29)

尝试这个 ：

```
Scanner scanner = new Scanner(new File(inPath));
scanner.useDelimiter("Level");
while(scanner.hasNext()) {
    ++lastLevelCreatedWas;
    scanner.next();
} 
```

同时根据需要转到下一个“级别”令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:38:33.710

hasNext、getNext 等类似方法只有在设置 delimiter 时才有效。

调用`useDelimiter`方法将分隔符设置为 Scanner 实例。

# php - jQuery 和 php 注册脚本不起作用

> ID：11367741
> 
> 赞同：0
> 
> 时间：2012-07-06T18:28:58.183
> 
> 标签：php, jquery, mysql, mobile

我正在为使用`jQuery`and的应用程序开发用户注册和登录`PHP`。我在将记录插入我的成员数据库时遇到问题。当我点击提交时，我收到“未注册”警报，它只是将我带回注册页面。

我`jQuery`的提交按钮句柄和`HTML`：

```
$('#regsubmit').click(function(){
         $.post("register.php",{reguser: $("#reguser").val(), fname: $("#fname").val(),lname: $("#lname").val(),regpass: $("#regpass").val(), regemail: $("#regemail").val()},function(data){
             if(data == true){
                alert("Registered"); 
             }else{
                alert("Not Registered"); 
             }
             });
      });

<div data-role="content">
<div data-role="collapsible"><h2>Register</h2>
   <form action="" method="post" id="registrationform">
   <div data-role="fieldcontain">
      <label for="fname">First name:</label>
      <input type="text" name="fname" id="fname" value=""  />
      <div id="fnamecheck"></div>
    </div>
       <div data-role="fieldcontain">
      <label for="lname">Last name:</label>
      <input type="text" name="lname" id="lname" value=""  />
      <div id="lnamecheck"></div>
    </div>
       <div data-role="fieldcontain">
      <label for="regemail">Email:</label>
      <input type="email" name="regemail" id="regemail" value=""  />
      <div id="emailcheck"></div>
    </div>
 <div data-role="fieldcontain">
      <label for="reguser">Username:</label>
      <input type="text" name="reguser" id="reguser" value="" />
      <div id="usernamecheck"></div>
    </div>
    <div data-role="fieldcontain">
      <label for="regpass">Password:</label>
      <input name="regpass" type="password" id="regpass" value="">
      <div data-role="fieldcontain"><label for="confirmregpass">Confirm Password:</label>
      <input name="confirmregpass" type="password" id="confirmregpass" value=""></div>
    </div>
    <input name="regsubmit" type="submit" id="regsubmit" value="Register" data-icon="check" data-theme="a"/>
   </form>
       </div> 
```

还有我的 register.php：

```
<?php
$MYSQL_SERVER =  "localhost";
$MYSQL_USER = "root";
$MYSQL_PASSWORD = "password";

        $db = mysql_connect($MYSQL_SERVER, $MYSQL_USER, $MYSQL_PASSWORD ) or die(mysql_error());
    mysql_select_db("hedonsof_conflict") or die(mysql_error());

        $fname = $_POST['fname'];
        $lname = $_POST['lname'];
        $email = $_POST['regemail'];
        $reguser = $_POST['reguser'];
        $regpass = $_POST['regpass'];
        //Username check
        $usercheck = mysql_query("SELECT * FROM members WHERE username='".$reguser."'");
        if(empty($fname)||empty($lname)||empty($email)||empty($reguser)||empty($regpass)){
            if(empty($fname)){
                $errors[] = "Missing first name.";
            }
            if(empty($lname)){
                $errors[]= "Missing last name.";
            }
            if(empty($email)){
                $errors[]= "Missing email.";
            }
            if(empty($reguser)){
                $errors[]= "Missing user name.";
            }
            if(empty($regpass)){
                $errors[] = "Missing password.";
            }
        }elseif(!filter_var($email, FILTER_VALIDATE_EMAIL)){
            $errors = "Not a valid eail address.";
        }else{
            $fname = strip_tags($fname);
            $fname = stripslashes($fname);
            $fname = trim($fname);

            $lname = strip_tags($lname);
            $lname = stripslashes($lname);
            $lname = trim($lname);

            $email = strip_tags($email);
            $email = stripslashes($email);
            $email = trim($email);

            $reguser = strip_tags($reguser);
            $reguser = stripslashes($reguser);
            $reguser = trim($reguser);

            $regpass = strip_tags($regpass);
            $regpass = stripslashes($regpass);
            $regpass = trim($regpass);

            $sql = mysql_query("INSERT INTO members (username, fname, lname, password, email) VALUES('$reguser','$fname','$lname','$regpass','$email)") or die(mysql_error());

                $msg = "Thanks for Registering.";
                if($msg){
                echo true;
            }else{
                $errors[] = "Sorry error with database at this time.";  
                echo $errors;
            }
        }
?> 
```

编辑：

```
<?php
$MYSQL_SERVER =  "localhost";
$MYSQL_USER = "root";
$MYSQL_PASSWORD = "password";

$db = mysql_connect($MYSQL_SERVER, $MYSQL_USER, $MYSQL_PASSWORD ) or die(mysql_error());
    mysql_select_db("hedonsof_conflict") or die(mysql_error());

        $fname = $_POST['fname'];
        $lname = $_POST['lname'];
        $email = $_POST['regemail'];
        $reguser = $_POST['reguser'];
        $regpass = $_POST['regpass'];
        $errors[] = "";

        //Username check
        $usercheck = mysql_query("SELECT * FROM members WHERE username='".$reguser."'");

            if(empty($fname)){
                $errors[] = "Missing first name.";
            }
            if(empty($lname)){
                $errors[]= "Missing last name.";
            }
            if(empty($email)){
                $errors[]= "Missing email.";
            }
            if(empty($reguser)){
                $errors[]= "Missing user name.";
            }
            if(empty($regpass)){
                $errors[] = "Missing password.";
            }
   //     }elseif(!filter_var($email, FILTER_VALIDATE_EMAIL)){
     //       $errors = "Not a valid email address.";
        else{
            $fname = strip_tags($fname);
            $fname = stripslashes($fname);
            $fname = trim($fname);
            //$fname = mysqli_real_escape_string($fname);

            $lname = strip_tags($lname);
            $lname = stripslashes($lname);
            $lname = trim($lname);
            //$lname = mysqli_real_escape_string($lname);

            $email = strip_tags($email);
            $email = stripslashes($email);
            $email = trim($email);
            //$email = mysqli_real_escape_string($email);

            $reguser = strip_tags($reguser);
            $reguser = stripslashes($reguser);
            $reguser = trim($reguser);
            //$reguser = mysqli_real_escape_string($reguser);

            $regpass = strip_tags($regpass);
            $regpass = stripslashes($regpass);
            $regpass = trim($regpass);
            //$regpass = mysqli_real_escape_string($regpass);

            $sql = mysql_query("INSERT INTO members (username, fname, lname, password, email) VALUES('$reguser','$fname','$lname','$regpass','$email')") or die(mysql_error());

                $msg = "Thanks for Registering.";
                if($msg){
                echo "true";
            }else{
                $errors[] = "Sorry error with database at this time.";  
                echo "false";
            }
        }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:51:44.453

尝试这个：

```
$('#regsubmit').click(function(e){
   e.preventDefault();

      $.post("register.php",{reguser: $("#reguser").val(), fname: $("#fname").val(),lname: $("#lname").val(),regpass: $("#regpass").val(), regemail: $("#regemail").val()},function(data){
         if(data == true){
            alert("Registered"); 
         }else{
            alert("Not Registered"); 
         }
      });

    return false;
}); 
```

# jquery - 突出显示文本

> ID：11367742
> 
> 赞同：0
> 
> 时间：2012-07-06T18:28:59.150
> 
> 标签：jquery, html

单击它们时我们如何突出显示整个 div 文本元素。我使用以下代码

```
$("#ques22").css("background-color","#3BB9FF"); 
```

ques22 是我的 div id。它还使用 div 元素更改图像的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:31:44.987

您可以添加`p`标签样式：

```
<div id="ques22">
   <p>text</p>
  <img src='src.jpg'/>
</div>

$('#ques22').click(function(){
    $(this).find('p').css("background-color","#3BB9FF");
}) 
```

[http://jsfiddle.net/2eJeS/](http://jsfiddle.net/2eJeS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:58:00.287

而不是 .css() ，尝试像这样 addClass() ，您将通过这种方式通过 css 获得更多控制

[http://jsfiddle.net/fedmich/MPaDc/](http://jsfiddle.net/fedmich/MPaDc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:59:43.313

如果要设置文本样式，可以使用以下内容：

**JS**

```
$('div.yourClass').toggle(function() {
    $(this).html(function(i, text) {
        return $('<span>', {'class': 'highlighter', 'text': text});
    });
},
function() {
    $(this).html($('span', this).html());
}); 
```

**CSS**

```
.highlighter {
    color: red;
} 
```

**[演示](http://jsfiddle.net/ricardolohmann/bs7p4/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:24:57.470

使用它可以产生阴影效果并突出显示它们

`#ques22 { -webkit-transition: text-shadow 1s linear; -moz-transition: text-shadow 1s linear; -ms-transition: text-shadow 1s linear; -o-transition: text-shadow 1s linear; transition: text-shadow 1s linear; }`

ques22 的 id 必须有阴影效果，那么只有这个代码才能工作

`$("#ques22").css({'text-shadow': '0 0 20px red'});`

# facebook - 有没有办法获取 Facebook 页面的 RSS 提要？

> ID：11367744
> 
> 赞同：1
> 
> 时间：2012-07-06T18:29:03.850
> 
> 标签：facebook, rss

问题：我想在 PHP 页面上显示来自我的 facebook 页面的帖子。[当 facebook 页面上有新帖子时，我的 PHP 页面也应该呈现相同的内容]

Way1：如果有办法获取 Facebook 页面的 RSS 提要，我可以解析 RSS 并将其显示在 PHP 页面中。**但我无法找到获取 RSS 提要的方法。**

Way2：另一种方法是使用FB Api。但是我可以使用什么 API？从来没有使用过 facebook API，所以任何帮助都会很棒。

欢迎任何其他解决问题的方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:31:45.837

Facebook 有一个通用页面 RSS 提要：

`https://facebook.com/feeds/page.php?id=PAGE_ID_HERE&format=rss20`

您可以简单地相应地检索和清理数据。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:26:52.630

这似乎对我不起作用（也许这是隐私设置的事情？）如果您想要墙上的所有内容（不仅仅是您自己的状态帖子，请转到您的通知页面并选择顶部的 RSS，您可以选择获取文本消息警报或墙上内容的 RSS 提要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T11:24:06.867

第 1 步：找到您的 Facebook ID 页面： http: [//findmyfacebookid.com/](http://findmyfacebookid.com/)

第 2 步：在以下 url 字符串的末尾添加 ID

[http://www.facebook.com/feeds/page.php?format=rss20&id=](http://www.facebook.com/feeds/page.php?format=rss20&id=) “仅在此处添加 ID 号”

例如 facebook.com/feeds/page.php?format=rss20&id=100001463662167

# wpf - 在 Bing WPF 控件中更改地图模式

> ID：11367745
> 
> 赞同：1
> 
> 时间：2012-07-06T18:29:09.933
> 
> 标签：wpf, map, bing

这是我的 XAML 代码：

```
<s:SurfaceWindow x:Class="map_test.SurfaceWindow1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:s="http://schemas.microsoft.com/surface/2008"
xmlns:m="clr-namespace:Microsoft.Maps.MapControl.WPF;assembly=Microsoft.Maps.MapControl.WPF" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="1080" Width="1920" WindowStartupLocation="CenterScreen">
<Grid>
    <m:Map x:Name="NotreDameMap" CredentialsProvider="AmNh-jzPEmrdpc2T2wBxEjyB0fvSimavosz4B4_IPEAY4RDE-r7L2rHa439uEzlz" Mode="AerialWithLabels" Center="41.702380,-86.234168" ZoomLevel="16" >
        <Canvas Width="175.198" Height="85" 
          m:MapLayer.Position="41.702380,-86.234168" 
          m:MapLayer.PositionOrigin="BottomCenter" Opacity="0.75">
            <!-- Layer 1/<Group>/<Path> -->
            <Path StrokeThickness="0.2" Stroke="#ffec008b" StrokeMiterLimit="1.0" Data="F1 M 122.944,144.000"/>

            <!-- Layer 1/<Group>/<Path> -->
            <Path StrokeThickness="0.2" Stroke="#ffec008b" StrokeMiterLimit="1.0" Data="F1 M 65.081,47.477"/>

            <!-- Layer 1/<Group>/<Group>/<Compound Path> -->
            <Path Fill="#ff0e223e" Data="F1 M 159.484,130.991 L 158.570,130.991 L 158.570,128.309 C 158.791,128.277 159.073,128.247 159.484,128.247 C 160.901,128.247 161.408,128.941 161.408,129.636 C 161.408,130.609 160.523,130.991 159.484,130.991 Z M 161.187,131.494 L 161.187,131.432 C 162.036,131.180 162.732,130.547 162.732,129.505 C 162.732,128.750 162.479,128.213 162.006,127.866 C 161.532,127.521 160.744,127.269 159.544,127.269 C 158.600,127.269 157.968,127.364 157.306,127.457 L 157.306,135.373 L 158.570,135.373 L 158.570,131.965 L 159.453,131.965 C 160.459,131.965 160.964,132.347 161.155,133.355 C 161.312,134.396 161.502,135.122 161.693,135.373 L 163.019,135.373 C 162.890,135.122 162.700,134.646 162.511,133.420 C 162.354,132.251 161.879,131.623 161.187,131.494 Z"/>

            <!-- Layer 1/<Group>/<Group>/<Compound Path> -->
            <Path Fill="#ff0e223e" Data="F1 M 154.433,89.842 L 149.441,95.128 L 144.158,95.128 L 144.158,47.566 L 149.441,47.566 L 154.433,52.852 L 154.433,89.842 Z M 123.018,95.128 L 120.080,95.128 L 91.603,47.566 L 123.018,47.566 L 123.018,95.128 Z M 62.242,95.128 L 62.232,95.128 L 62.232,47.566 L 65.170,47.566 L 93.646,95.128 L 62.242,95.128 Z M 41.101,95.128 L 31.693,95.128 L 31.693,47.566 L 41.101,47.566 L 41.101,95.128 Z M 157.372,26.423 L 144.158,26.423 L 144.158,21.138 L 157.372,21.138 L 157.372,0.000 L 109.807,0.000 L 109.807,21.138 L 123.018,21.138 L 123.018,26.423 L 78.677,26.423 L 62.242,0.000 L 27.892,0.000 L 27.892,21.138 L 41.101,21.138 L 41.101,26.423 L 0.000,26.421 L 0.000,47.737 L 10.571,47.737 L 10.571,95.299 L 0.000,95.299 L 0.000,116.276 L 40.808,116.265 L 40.808,121.550 L 27.609,121.550 L 27.609,142.688 L 75.453,142.688 L 75.453,121.550 L 62.242,121.550 L 62.242,116.265 L 106.345,116.265 L 122.165,142.688 L 144.158,142.688 L 144.158,116.265 L 157.372,116.265 L 175.598,97.774 L 175.598,44.921 L 157.372,26.423 Z"/>

            <!-- Layer 1/<Group>/<Group>/<Compound Path> -->
            <Path Fill="#ff0e223e" Data="F1 M 159.925,137.267 C 156.771,137.267 154.215,134.617 154.215,131.241 C 154.215,127.928 156.771,125.251 159.895,125.251 L 159.925,125.251 C 163.079,125.251 165.602,127.928 165.602,131.272 C 165.602,134.617 163.079,137.299 159.925,137.267 Z M 159.925,124.146 L 159.895,124.146 C 156.014,124.146 152.859,127.300 152.859,131.241 C 152.859,135.248 156.014,138.373 159.895,138.373 C 163.802,138.373 166.896,135.248 166.896,131.241 C 166.896,127.300 163.802,124.146 159.925,124.146 Z"/>

            <TextBlock FontSize="9" Foreground="White" Margin="65" TextAlignment="Center">
                    Hesburgh<LineBreak />
                    Library <LineBreak />
            </TextBlock>
        </Canvas>

    </m:Map>
    <StackPanel>
        <ToggleButton x:Name="toggleButton" Content="Change Map Mode"/>
        <TextBlock Text="Maps" />

        </StackPanel>
</Grid> 
```

很简单，我正在尝试创建一个按钮，将地图模式从 AerialWithLabels 更改为 Road 模式。

任何帮助将不胜感激。

PS对不起，如果这是一个相当基本的问题，我是编码新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T23:10:31.907

如果您在应用程序中使用 C#，那么执行此操作的一种方法是：

1.  在 XAML 中创建一个按钮，并为其命名：

    ```
    <Button Name="TestButton">
                <TextBlock FontSize="26">Change Map Mode</TextBlock>
            </Button> 
    ```

2.  为按钮的 MouseUp 或 TouchUp 事件分配一个事件处理程序：

    ```
    <Button Name="TestButton" TouchUp="Toggle_Map">
                <TextBlock FontSize="26">Change Map Mode</TextBlock>
            </Button> 
    ```

3.  在您的 C# 代码隐藏中，像这样创建事件处理程序，使用正确的 C# 代码来切换地图模式：

    ```
    using Microsoft.Maps.MapControl.WPF;

    private void Toggle_Map(object sender, TouchEventArgs e)
    {
        if (myMap.Mode.ToString() == "Microsoft.Maps.MapControl.WPF.RoadMode")
       {
          //Set the map mode to Aerial with labels
          myMap.Mode = new AerialMode(true);
       }

       if (myMap.Mode.ToString() == "Microsoft.Maps.MapControl.WPF.AerialMode")
       {
          //Set the map mode to RoadMode
          myMap.Mode = new RoadMode();
       }
    } 
    ```

MyMap 需要匹配地图控件的名称，在 XAML 中使用 Name="myMap"。

这应该让你开始......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T17:23:30.697

我无法对上一个答案添加评论。所以我会再次修改回答

1) 在 XAML 上创建一个按钮

```
 <Button Content="Toggle Map" HorizontalAlignment="Right" VerticalAlignment="Top" Width="81" Click="btnToggleMap_Click"/> 
```

2) 在 C# 中，事件处理程序应该有一个 if 和 else。修复它的代码是：

```
using Microsoft.Maps.MapControl.WPF;

private void btnToggleMap_Click(object sender, TouchEventArgs e)
{
    if (NotreDameMap.Mode.ToString() == "Microsoft.Maps.MapControl.WPF.RoadMode")
   {
      //Set the map mode to Aerial with labels
      NotreDameMap.Mode = new AerialMode(true);
   } else if (NotreDameMap.Mode.ToString() == "Microsoft.Maps.MapControl.WPF.AerialMode")
   {
      //Set the map mode to RoadMode
      NotreDameMap.Mode = new RoadMode();
   }
} 
```

注意：NotreDameMap 是地图的名称，它必须与 XAML 上的地图相同

您可以复制并粘贴代码并且应该可以工作。

# twitter-bootstrap - input-append 类按钮显示有边距

> ID：11367746
> 
> 赞同：5
> 
> 时间：2012-07-06T18:29:17.857
> 
> 标签：twitter-bootstrap

嗨 StackOverflow 社区，我正在某些页面中基于 twitter bootstrap 2.0.4 构建一个站点，我想在输入中附加一个按钮。问题是显示在输入和按钮之间有一个边距。

我确定这是我缺少的东西，但我无法确定它是什么？

**编辑**：某些样式（例如禁用和不可编辑输入）在页面中未正确应用

**编辑2**：显然工作.disabled和.uneditable-input。

JFiddle：http: [//jsfiddle.net/sHGtb/](http://jsfiddle.net/sHGtb/)

JFiddle 全屏结果：http: [//jsfiddle.net/sHGtb/embedded/result/](http://jsfiddle.net/sHGtb/embedded/result/)

有什么帮助吗？？

## HTML

```
<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="http://localhost/test/index.php/../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="http://localhost/test/index.php/../css/bootstrap-responsive.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--[if lt IE 9]>
        <script src="../../js/html5shiv.js"></script>
    <![endif]-->
    <script type="text/javascript" src="http://localhost/test/index.php/../js/modernizr.js"></script>
</head>
<body>
    <div class="container">
        <form class="form-horizontal">
            <fieldset>
                <hr/>
                <h4>Puesto</h4>
                <p>Debe estar asignado segun su perfil, solo los administradores pueden cambiar esta opcion; si existiese alguna irregularidad debe solicitar reportelo al administardor.</p>
                <div class="control-group">
                    <label for="puesto" class="control-label">Puesto</label>
                    <div class="controls">
                        <div class="input-append">
                            <input type="text" name="puesto" class="input-xlarge" />
                            <button class="btn" type="button"><i class="icon-search"></i></button>
                        </div>
                    </div>
                </div>
                <hr/>

            </fieldset>
        </form>
    </div>  
    <script language="javascript" type="text/javascript" src="http://localhost/test/index.php/../js/jquery-1.7.2.min.js"></script>
    <script language="javascript" type="text/javascript" src="http://localhost/test/index.php/../js/bootstrap.min.js"></script>
</body>
</html> 
```

![问题截图](../Images/44e59761c8e8d6495021bfbf2e8595f5.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-10T16:05:04.790

这可能听起来很愚蠢，但不要在输入和您的文本编辑器弄乱页面的按钮之间留下新的一行：-P

```
 <div class="control-group">
                <label for="puesto" class="control-label">Puesto</label>
                <div class="controls">
                    <div class="input-append">
                        <input type="text" name="puesto" class="input-xlarge" /><button class="btn" type="button"><i class="icon-search"></i></button>
                    </div>
                </div>
            </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:34:51.077

如果我理解你，你想消除按钮和输入字段之间的边距吗？你可以试试这样的...

```
<input type="text" name="puesto" class="input-xlarge" style="margin-right:0;"/>
<button class="btn" type="button" style="margin-left:0;"><i class="icon-search"></i></button> 
```

如果该样式不起作用，请尝试在元素上添加更多 CSS 样式。

# pdf - 联系人模块中的 PDF 打印功能

> ID：11367748
> 
> 赞同：0
> 
> 时间：2012-07-06T18:29:40.627
> 
> 标签：pdf, sugarcrm

我正在使用 Sugar Enterprise 6.4.0 是否有任何方法可以将“打印为 PDF”之类的功能添加到联系人模块中。我想通过单击可能出现在联系人模块详细信息视图中的按钮将联系人信息保存为 PDF 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T07:52:27.423

我知道这是一个老问题，但认为会发布相关回复，可能会对某人有所帮助。

在详细视图的操作下拉列表中`Contacts module`有一个`Generate Letter`选项。此选项将链接到您在模块中创建的相关模板`PDF Templates`。

如果您没有预定义的模板，您可以转到 PDF 模板模块为相关模块构建一个自定义模板，其中包含您在 PDF 中需要的信息。

然后，当您单击 Generate Letter 链接时，它会显示该模块的模板，您只需选择首选模板，它就会为您下载 PDF。

如果我正确理解了您的问题，我认为这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:43:42.143

查看 Synolia PDF Manager....

[http://www.sugarforge.org/projects/synopdfmanager/](http://www.sugarforge.org/projects/synopdfmanager/)

# xml - ActionScript：如何将动态加载的地址添加到动态加载菜单上的条目中？

> ID：11367749
> 
> 赞同：0
> 
> 时间：2012-07-06T18:29:45.080
> 
> 标签：xml, actionscript-3, flash

所以我有一个菜单，其中包含从 XML 文件动态加载的选项，并且效果很好。他们都为 MouseOvers 附加了 eventListeners，这也很好。我遇到问题的地方是我需要为每个将为该选项加载适当内容的 Click eventListener 添加。每个选项都应根据为该选项指定的地址加载具有可变内容的同一页面。我已经在 XML 文件中列出了每个选项的地址，并将它们推送到一个数组中。我只是不知道如何获得引用它们的选项。到目前为止，这是我的代码：

```
var blogData:XMLList;
var blogTotal:Number;

var entryTitle:String;

//Arrays
var entriesArray:Array = new Array();
var entryAddr:Array = new Array();

var blogListLoader: URLLoader = new URLLoader();
blogListLoader.load(new URLRequest("BlogEntries.xml"));
blogListLoader.addEventListener(Event.COMPLETE, loadBlogList);

function loadBlogList(e:Event):void
{
    var blogList:XML = new XML(e.target.data);
    blogData = blogList.ENTRY;
    blogTotal = blogData.length();
}

function loadBlogEntries():void
{
    //Load entriesArray
    var yTmp:Number = 0;
    for (var i:Number = 0; i < blogTotal; i++)
    {
        var entryName = blogData[i].@TEXT;
        var entry:TextField = new TextField();
        entriesArray[i] = entry;
        entriesArray[i].textColor = 0x0DAC54;
        entriesArray[i].x = 0;
        entriesArray[i].y = yTmp;
        entriesArray[i].width = 1031;
        entriesArray[i].height = 90.30;
        entriesArray[i].embedFonts = true;
        entriesArray[i].antiAliasType = AntiAliasType.ADVANCED;
        entriesArray[i].defaultTextFormat = listformat;
        entriesArray[i].selectable = false;
        entriesArray[i].wordWrap = true;
        entriesArray[i].text = entryName;
        entriesArray[i].autoSize = TextFieldAutoSize.LEFT;
        entriesArray[i].addEventListener(MouseEvent.MOUSE_OVER , bEntryOvr);
        entriesArray[i].addEventListener(MouseEvent.CLICK , bEntryClick);
        BlogPage.blogEntriesPage.entryList.addChild(entriesArray[i]);
        yTmp = yTmp + 149;

        var Addr = blogData[i].@ADDR;
        entryAddr[i] = Addr;
    }
}

function bEntryOvr(event:MouseEvent):void
{
    event.target.backgroundColor = 0x0DAC54;
    event.target.background = true;
    event.target.textColor = 0x000000;
    event.target.addEventListener(MouseEvent.MOUSE_OUT , bEntryOut);
}

function bEntryOut(event:MouseEvent):void
{
    event.target.background = false;
    event.target.textColor = 0x0DAC54;
    event.target.removeEventListener(MouseEvent.MOUSE_OUT , bEntryOut);
}

function bEntryClick(event:MouseEvent):void
{
    showPage = BlogPage.blogEntriesPage.blogEntry;
    flashup();
} 
```

我不认为这可能有那么难，但它现在让我大吃一惊。任何见解都值得赞赏。谢谢，-T。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:56:39.947

您可以使用闭包：

```
entriesArray[i].addEventListener(MouseEvent.CLICK, makeEntryClick(index)); 
```

```
function makeEntryClick(index:Number):Function {
    return function (event:MouseEvent):void {
        bEntryClick(event, index);
    };
}

function bEntryClick(event:MouseEvent, index:Number):void {
    // ...
} 
```

如果您稍后需要删除处理程序，您可以传递`arguments.callee`.

# django - Django + PostgreSQL：查询返回不正确的结果

> ID：11367751
> 
> 赞同：3
> 
> 时间：2012-07-06T18:30:03.943
> 
> 标签：django, postgresql

在我的应用程序中，我在 PostgreSQL 数据库上创建了一个视图，并将该视图映射到 Django 中的一个非托管模型。

出于某种原因，当我在 Django 中查询此模型时，其中一个元组返回了不正确的结果。

这是我的创建视图代码：

```
 CREATE VIEW test_view_a AS
  SELECT ROW_NUMBER() OVER (ORDER BY account_id, person_id)::int AS id,
  AVG(EXTRACT(epoch FROM date_trunc('second', meeting_time)))::int AS avg_meeting_time,
  AVG(EXTRACT(epoch FROM date_trunc('second', office_time)))::int AS avg_office_time,
  AVG(EXTRACT(epoch FROM date_trunc('second', traffic_time)))::int AS avg_traffic_time,
  account_id,
  person_id
  FROM test_view_b
  GROUP BY account_id, person_id
  ORDER BY account_id, person_id; 
```

这是我直接在数据库中查询时返回的数据：

```
 id | avg_meeting_time | avg_office_time | avg_traffic_time | account_id | person_id 
----+------------------+-----------------+------------------+------------+-----------
  1 |            64800 |               0 |             1514 |          1 |         8
  2 |            14400 |               0 |            29290 |          3 |         9
  3 |            14400 |               0 |                0 |          3 |        10
(3 rows) 
```

当我通过 Django 查询此视图时，第二行和第三行正确返回，但第一行返回的 avg_meeting_time 为 -1144800，avg_traffic_time 为 1202400：

```
>>> from test.models import *
>>> queryset = ViewA.objects.all()
>>> '%i %i' % (queryset[0].avg_meeting_time, queryset[0].avg_traffic_time)
'-1144800 1202400' 
```

我曾尝试通过 django.db.connection 对象直接查询此视图，甚至尝试执行以这种方式生成视图的查询。结果总是相同的，与数据库上的不同。

如果这很重要，我正在使用带有 PostGIS 的空间数据库。我曾尝试将后端切换到 psycopg2，但得到了相同的结果。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:38:32.197

尝试调试你

```
>>> from test.models import *
>>> queryset = ViewA.objects.all()
>>> '%i %i' % (queryset[0].avg_meeting_time, queryset[0].avg_traffic_time) 
```

和

```
from django.db import connection
connection.queries 
```

并同意 Burhan Khalid - 模型将很有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T10:34:09.467

你应该检查你的 settings.py 你有正确的语言环境吗？

TIME_ZONE = '美国/芝加哥'

# c++ - 你能在 C++11 中展开类型表达式吗？

> ID：11367754
> 
> 赞同：2
> 
> 时间：2012-07-06T18:30:08.353
> 
> 标签：c++, templates, c++11

给定一种类型的表单`a<b<c>>`，我可以展开它，以便我取回类型名`a`，`b<c>`然后`c`呢？或者至少能够有一个模板化函数，允许我匹配类型名的元素，例如

```
template <typename C, typename E>
fun(C<E>& h, C<E>& i) {...} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:37:28.397

```
template <template<typename> class C, typename E>
fun(C<E>& h, C<E>& i) {...} 
```

# git - 将一个 Subversion 存储库项目拆分为两个 Git 存储库

> ID：11367755
> 
> 赞同：4
> 
> 时间：2012-07-06T18:30:10.070
> 
> 标签：git, svn, version-control, git-svn

我有一个 Subversion 服务器，标准布局中有几个不同的项目，如下所示：

```
ProjectA/
    trunk/
    branches/
    tags/
ProjectB/
    trunk/
        FolderOfBinaries/
        SourceFolderA/
        SourceFolderB/
        SourceFolderC/
    branches/
    tags/
        v1.0/
        v1.1/
        v2.0/
ProjectC/
    trunk/
    branches/
    tags/ 
```

ProjectB 将被迁移到 Git，但不会使用标准克隆。我想将项目拆分为两个 Git 存储库 - 一个用于包含相对经常更改的大型二进制文件的文件夹，另一个用于其他所有内容的存储库。我完全克隆了存储库，它只有几 GB，但二进制文件夹可能是其中的 90%，并且运行`git gc`需要很长时间。如果开发人员需要，我宁愿有一个小的快速存储库，然后将二进制文件夹添加为子模块。

到目前为止，我发现了两个潜在的选择。首先，我可以`git branch-filter`尝试从历史记录中删除二进制文件夹，如 Git Book 中所示。其次，我可以`svndumpfilter`将当​​前的 Subversion 存储库分成两部分，然后`git svn clone`分别分开。

我的问题是，所有的历史会发生什么，尤其是分支和标签？我仍然想知道项目中每个标签的二进制文件夹是什么样的，即使二进制文件在两个标签之间可能没有改变。那可能吗？

**编辑**：二进制文件的文件夹中没有充满构建工件（*.class、*.o、*.dll 等），所以我不能直接将其剥离并使其成为外部。它充满了需要版本控制的第三方程序输出的二进制文件（想想 OpenOffice 文档、Photoshop 文件等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:55:05.200

看看[svndumpfilter](http://svnbook.red-bean.com/en/1.7/svn.ref.svndumpfilter.html)。使用起来非常简单。您执行 Subversion 存储库转储，然后使用过滤器说出您想要的或不想要的。

转储当前存储库，然后运行 ​​svndumpfilter 两次——每个 Git 存储库运行一次。你可以把它们串起来。只需为每个 Git 存储库运行两次。

```
$ svndumpfilter include ProjectB < svn_repo_dump | svndumpfilter exclude ProjectB/trunk/folderofbinaries > svn_repos_no_binaries 
```

我确实想提一件事：不要将构建的二进制对象存储在您的存储库中。在 Subversion 中，如果没有转储和过滤器，它们是不可能删除的，即使在具有消除修订能力的版本控制系统中，这样做也需要花费大量时间和精力。这是一个很大的维护难题。

为了什么？在版本控制系统中存储二进制文件并没有真正的帮助。您无法*区分*二进制文件，历史记录无济于事，而且非开发人员很难访问它们。

相反，请使用发布存储库，并将您的二进制文件存储在那里。即使您不使用 Maven 甚至不使用 Java，您也可以使用像 Artifactory 或 Nexus 这样的 Maven 存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T17:41:20.927

我建议`svndumpfilter`首先将 ProjectB 拆分为两个存储库。之后，您可以使用`git svn clone`将新的 SVN 存储库转换为 GIT 存储库。当考虑主干、分支和标签文件夹的`--include`模式时`svndumpfilter`，将保留拆分存储库的完整历史记录。因此，您可以查看`FolderOfBinaries`新二进制存储库中的所有历史记录。

当您使用 创建 GIT 存储库`git svn clone`时，`branches`文件夹的内容将被转换为 GIT 分支，`tags`文件夹的内容将被转换为 GIT 标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T20:26:54.877

好吧，我已经设法做到了，但这并不是那么简单。可能有更好的方法，但不是我能解决的。我做了以下事情：

1.  创建当前存储库的转储：`svnadmin dump /opt/repo > full_dump`

2.  过滤转储以删除二进制文件夹：`svndumpfilter exclude *folderofbinaries* --pattern --renumber-revs --drop-empty-revs < full_dump > filtered_dump`. 我需要制作`folderofbinaries`一个模式，因为在过去有人实际上已经将二进制文件直接检查到标签中（！），所以下一步由于缺少文件夹而失败。

3.  使用过滤后的转储创建本地 SVN 存储库： `mkdir repo-filtered; svnadmin create repo-filtered; svnadmin load repo-filtered < filtered_dump`

4.  将完整和过滤的 repo 克隆到不同的文件夹中（我使用[svn2git](https://github.com/nirvdrum/svn2git)）。过滤后的 repo 将不包含任何二进制文件。如果在完整的仓库中，只有二进制文件夹在标签 A 和 B 之间发生了变化，那么在新过滤的 Git 仓库中，这两个标签将指向同一个提交，这正是我想要的。

5.  在完整的 Git 存储库中，使用 Git 删除除二进制文件夹之外的所有内容。

我必须使用 Git 来隔离二进制文件夹的原因是因为我无法弄清楚如何仅使用来维护标签`svndumpfilter`（特别是考虑到我将二进制文件直接提交到标签中）。转换后，我得到了与过滤后的 repo 相同的行为——如果两个标签之间没有二进制文件发生变化，那么它们都指向同一个提交。

最后一步的命令是：

```
git checkout master
git filter-branch --tag-name-filter cat --prune-empty --subdirectory-filter folderofbinaries -- --all
git reset --hard
git for-each-ref --format="%(refname)" refs/original/ | xargs -n 1 git update-ref -d
git reflog expire --expire=now --all
git gc --prune=now 
```

我从[这个问题](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)中得到的。

现在，我从原来的 4.4GB SVN 转储文件中获得了一个 80MB 的源存储库和一个 1.5GB 的二进制存储库！我可以通过将二进制文件夹添加为源存储库的 Git 子模块并在每个存储库上签出相同的标签（这就是我需要保留所有标签信息的原因）来重新创建原始 SVN 存储库的确切状态，同时没有一个猛犸象使用缓慢的 Git 存储库。

# php - 使用 PHP 的 MultiSelect 加载效率

> ID：11367757
> 
> 赞同：0
> 
> 时间：2012-07-06T18:30:12.927
> 
> 标签：php, arrays, merge

我正在寻找一种更有效的加载多选列表的方法，这个理论可以适用于许多情况。我这样做的方式会导致很多查询，我想知道是否有办法在两个数据库查询中做到这一点。

```
DB Table : users: fields= (userID, name)
       data: 1, Dan
       data: 2, Cory
       data: 3, Matt
DB Table : users_selected: fields(userSelectedID, userID)
       data: 1,1 
```

现在使用 php 我通常会执行以下操作：

```
<?php 
 $q = 'SELECT userID,name FROM users';
 $r = mysql_query($r);
 echo '<select id="assignToID" name="assignToID[]" multiple="assignToID">';
 while($e = mysql_fetch_array($r){
     //this is where you have to query the db each time... theres got to be a better way
     $q2 = 'SELECT userSelectedID FROM user_selected WHERE userID = "'.$e['userID'].'" ';
     $r2 = mysql_query($q2);
     $nr = mysql_num_rows($r2);
     if($nr>0){
        $sel = ' selected="selected" ';
     }
     else{
        $sel = '';
     }
     echo '<option '.$sel.' value="'.$e['userID'].'"'>'.$e['name'].'</option>';

 }
 echo '</select>'
?> 
```

所以上面我们必须在循环中查询我们在数据库中的每个用户。有没有办法使用 PHP array_merge 或以某种方式只为所有用户进行一次查询，然后附加他们被选中的天气......只是试图找到一个更优雅和有效的解决方案。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:52:40.910

是的，有这样一种方法，可以在 1 个 SQL 查询中得到你需要的东西。

```
SELECT * FROM users
LEFT OUTER JOIN user_selected
ON users.userID = user_selected.userID 
```

这个 LEFT OUTER JOIN 应该并且将会从表 users 中生成一组完整的记录，而不是来自 user_selected 的匹配记录（如果可用）。如果没有匹配，右侧将只包含 null。

# php - 使用 getJSON 将 JSON 对象发布到 PHP 页面并检索 JSON 对象

> ID：11367760
> 
> 赞同：0
> 
> 时间：2012-07-06T18:30:20.447
> 
> 标签：php, jquery, json, getjson

我正在尝试构建一个大量利用 JSON 进行数据访问的 HTML5 应用程序。在某些情况下，我想使用 getJSON 对象（使用 JavaScript 和 JQuery）将 JSON 对象发布到 PHP 页面。然后，该 PHP 页面将抓取 JSON 对象，执行一些业务逻辑，然后将单独的 JSON 对象返回给调用页面。

我可以获得返回到调用页面的有效 JSON 对象，但我似乎无法获取在原始请求中传递的 JSON 对象。我已经尝试过 $_GET、$_POST 和其他几个选项。一切都无济于事。

这是我在原始页面上的代码。这非常简单——当用户单击按钮时，我们会执行 AJAX 调用，将 JSON 对象传递给名为 receive_jason.php 的页面。该页面应该评估传入的 JSON 对象并将另一个 JSON 对象返回到原始页面。

第 1 页：

```
<html lang="en">
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>

<script type="text/javascript">
function StartPost()
{
var strJSON = '{"id":"3","artist":"The Beatles","alblum":"White Alblum"}';
var jsonURL = "receive_json.php";

$.getJSON(  jsonURL, 
            strJSON, 
            function(data) {
                var items = [];

                responseMsg     = data["success"];
                alert(responseMsg);

    });

}

</script>

<body>
     <input type="button" name="Post Data" value="Post Data" onClick="StartPost();">
</body>

</html> 
```

这是receive_json.php页面上的PHP代码......

```
<?php
    $incomingData = $_GET['artist'];
    $myText =(string) $incomingData;
    echo "{\"success\":\"" . strlen($myText) . "\"}";
?> 
```

需要明确的是，getJSON 调用有效，并且我在返回时确实收到了有效的 JSON 调用。但我无法访问我传入的 JSON 对象。

我的问题......

1）这只是一个我可以修复的简单语法错误吗？

2) getJSON 甚至是这项任务的正确功能吗？

3) 有没有一种简单的方法可以让我调试 getJSON 请求，以便我可以看到页面上发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:20:51.190

使用这样的东西：

```
$.ajax({
                url: "yourfile_orserverfile.php",
                type: "POST",
                data: {
                  //whatever your data is
                }
                datatype: "json",
                success: function (status) {
                    if (status.success == false) {
                        //alert a failure message
                    } else {
                        //alert a success message
                    }
                }
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:32:17.373

`$.getJSON`发送 GET 请求。

您需要`$.ajax`使用`method: "POST"`和`type: "json"`。

# symfony - Symfony2 日志中的那些空方括号是什么？

> ID：11367762
> 
> 赞同：3
> 
> 时间：2012-07-06T18:30:28.920
> 
> 标签：symfony

从 Symfony2 的默认安装开始，我在控制器中使用以下行记录了一条 INFO 级别的消息：

```
$this->get('logger')->info('foo'); 
```

这出现在`app/logs/dev.log`：

```
[2012-07-06 10:56:19] app.INFO: foo [] [] 
```

那些空的方括号是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:30:30.980

从`Monolog\Formatter\LineFormatter`，看起来第一个`[]`是`%context%`，第二个是`%extra%`。默认情况下都不填充。有关如何用会话令牌替换空方括号的信息，请参阅[这个有用的文档。](http://symfony.com/doc/current/cookbook/logging/monolog.html#adding-a-session-request-token)

如果你想填写`%context%`，这里有一个想法（但不要真正使用它）：

```
$trace = debug_backtrace(); 
$record['context'] = $trace[3]['file'].':'.$trace[3]['line']; 
```

看：

*   [https://groups.google.com/d/topic/symfony-devs/aycdKqEPUlk/discussion](https://groups.google.com/d/topic/symfony-devs/aycdKqEPUlk/discussion)
*   [https://groups.google.com/d/topic/symfony-devs/7fxFTS0EK4g/discussion](https://groups.google.com/d/topic/symfony-devs/7fxFTS0EK4g/discussion)

# css - 从我的手机访问网站时不使用 CSS 媒体查询？

> ID：11367767
> 
> 赞同：-1
> 
> 时间：2012-07-06T18:30:56.887
> 
> 标签：css, http, mobile, media-queries

我在我的 ASP.NET MVC 网页上使用 CSS 媒体查询，我可以看到当我在 Windows 中缩小浏览器时，CSS 媒体查询将启动。

但是当从我的手机（HTC Titan（Windows Phone））访问网页时，页面只会显示在普通桌面版本（不是 CSS 媒体查询）上？

为什么？

网页是[www.biss.se](http://www.biss.se)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:07:13.800

一个简单的解释是您手机上的浏览器不支持它们（还）。

# javascript - 使用 Angular.js 创建表

> ID：11367769
> 
> 赞同：9
> 
> 时间：2012-07-06T18:31:00.563
> 
> 标签：javascript, angularjs

我正在尝试使用 Angular.js 创建一个表格，该表格将具有跨多行的单元格。

例子：

[http://jsfiddle.net/famedriver/kDrc6/](http://jsfiddle.net/famedriver/kDrc6/)

示例数据

```
var data = [{Colors: ["red","green","blue"]}] 
```

预期产出

```
<table>
  <tr>
    <td rowspan="3">Colors</td>
    <td>red</td>
  </tr>
  <tr>
     <td>green</td>
  </tr>
  <tr>
     <td>blue</td>
  </tr>
 </table> 
```

我通过使用`ng-show`指令让它工作。但这仍然会渲染一个额外的单元格，只是隐藏起来。正确呈现表格将是理想的。

`ng-switch`，如前所述，不适用于具有严格解析的某些元素（即：仅允许某些标签的表）

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T14:18:53.483

通常你可以使用[ng-switch](http://docs.angularjs.org/api/ng.directive:ngSwitch)来做这样的事情，它有条件地从 DOM 中添加/删除东西，不像 ng-show/ng-hide 只是隐藏/显示东西。

但是 ng-switch 不能很好地处理表格，因为它需要一个额外的元素用于 switch 语句。

幸运的是，有人制定了一个名为[“if”](https://github.com/tigbro/jquery-mobile-angular-adapter/blob/master/src/main/webapp/utils/if.js)的指令，它只接受元素的一个属性，并有条件地从 DOM 中添加/删除它。这是天才:-)。

这是它的一个示例（查看侧面的“资源”面板，我从 github 包含它）。[http://jsfiddle.net/5zZ7e/](http://jsfiddle.net/5zZ7e/)。

我还展示了如何制作没有全局变量的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-25T07:49:34.287

使用更新版本的 Angular 回答问题。

正如 Andrew Joslin 所写，[ng-show](https://docs.angularjs.org/api/ng/directive/ngShow)隐藏了元素（它适用`display: none`）。[ng-switch](https://docs.angularjs.org/api/ng/directive/ngSwitch)删除不匹配的元素，而不是仅仅隐藏它们。但它也需要额外的元素`switch-when`表达。

自上一个答案以来，[ng-if](https://docs.angularjs.org/api/ng/directive/ngIf)已成为 Angular 的一部分，您不再需要外部库。

```
(function(win) {
  angular.module('myApp', [])
    .controller("Tester", function($scope) {
      $scope.data = {
        Colors: ["red", "green", "blue"]
      }
    })
}(window));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
<div ng-app="myApp">
  <h1>old code converted</h1>
  <p>Just converted to a newer AngularJS.</p>
  <table border="1" ng-controller="Tester">
    <tbody ng-repeat='(what,items) in data'>
      <tr ng-repeat='item in items'>
        <td rowspan="{{items.length}}" ng-show="$first">{{what}}</td>
        <td>{{item}}</td>
      </tr>
    </tbody>
  </table>
  <h1>solution via ng-if</h1>
  <table border="1" ng-controller="Tester">
    <tbody ng-repeat='(what,items) in data'>
      <tr ng-repeat='item in items'>
        <td rowspan="{{items.length}}" ng-if="$first">{{what}}</td>
        <td>{{item}}</td>
      </tr>
    </tbody>
  </table>
</div>
```

# ruby-on-rails-3 - Rails：嵌套资源路线不起作用

> ID：11367775
> 
> 赞同：1
> 
> 时间：2012-07-06T18:31:39.120
> 
> 标签：ruby-on-rails-3, routes, nested-routes

我定义了以下路线：

```
resources :employees do
  resources :questions
  member do
    get :results
  end
end 
```

上述资源的其中一条路线（rake 路线）打印出以下内容：

`new_employee_question GET /employees/:employee_id/questions/new(.:format) questions#new`

但是当我这样做时`= link_to 'New Question', :new_employee_question`

我收到以下错误：

`No route matches {:action=>"new", :controller=>"questions"}`

我同时定义了所需的操作方法`QuestionsController`。`EmployeesController`

我还在 Rails 控制台中尝试了以下操作：

`Rails.application.routes.recognize_path(app.new_employee_question_path)`

...这会产生以下错误：

`ActionController::RoutingError: No route matches {:controller=>"questions"}`

我正在使用 Rails `3.2.6`。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:35:56.827

尝试使用这个：

```
= link_to 'New Question', new_employee_question_path(@employee) 
```

# php - 在套接字资源中输入（返回）需要什么控制字符？

> ID：11367783
> 
> 赞同：0
> 
> 时间：2012-07-06T18:31:56.187
> 
> 标签：php, sockets, control-characters

我想将输入（回车）放入 telnet 套接字资源中。

\r 不工作。请建议如何输入，以便在套接字中触发命令。

like`show version`是我想在 cisco 交换机上执行的命令。显示版本\r 不工作。

注意：套接字已正确打开，问题仅在于 \r

```
$this->socketResource = fsockopen($this->nodeIp,$this->portNumber);
fputs($this->socketResource,'show version\r'); 
```

![在此处输入图像描述](../Images/e89f336cd63a59ba34dc3c764f9b5576.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:06:26.293

您应该始终将`\n`,`\r`等`\t`放在双引号中。

# android - 使用 Scanner 从 CSV 文件填充 Spinner

> ID：11367790
> 
> 赞同：0
> 
> 时间：2012-07-06T18:32:43.777
> 
> 标签：android, android-spinner

使用 Android (Eclipse) 我正在尝试读取 .csv 文件并使用 Scanner 动态填充 Spinner。尝试了许多方法，结果相同。模拟器显示 Spinner，但仅填充最后一个逗号和价格。还需要将所有三个变量存储在数组中，并在选择 Spinner 时检索它们以填充 EditText 字段。任何帮助将不胜感激...

数据文件记录：

4,铝罐,.55 5,带猫转换器的车辆,9.00 18,黄铜（讽刺红/黄）,.20 1001,*扣* 客户#查找,-2.00

爪哇：

```
public class BRprogramActivity extends Activity {
    private static final String TAG = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //
        Button addButton;
        Button editButton;
        Button sendButton;
        //  
        Spinner array_spinner;
        //
        //      activate soft Keyboard
        this.getWindow().setSoftInputMode
        (WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
        //
        //      .csv comma separated values file
        //        
        try {
            Scanner scanner = new Scanner(getResources().openRawResource(R.raw.brdata));  
            //         
            while (scanner.hasNext()) {
                String data = (scanner.next());
                String [] values = data.split(",");
                item = values[0];              
                description = values[1];
                price = values[2];    
                //  
                array_spinner = (Spinner)findViewById(R.id.spinner1);         
                ArrayAdapter<String> adapter = new ArrayAdapter<String>
                (this,android.R.layout.simple_spinner_item,values);
                array_spinner.setAdapter(adapter); 
            }       
            scanner.close();

        }   catch (Exception e) {
            Log.e(TAG, "Exception: "+Log.getStackTraceString(e));
        }
        //
        addButton = (Button) findViewById(R.id.addbutton);

        addButton.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                Log.v("test", "ADD button clicked");
            }
        });
        //
        editButton = (Button) findViewById(R.id.editbutton);

        editButton.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                Log.v("test", "EDIT button clicked");
            }
        });    
        //
        sendButton = (Button) findViewById(R.id.sendbutton);

        sendButton.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                Log.v("test", "SEND button clicked");
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:44:34.217

如果您想在微调器的一行中显示 CSV 的每一行，请尝试以下操作：

```
List<String> list = new ArrayList<String>();
while (scanner.hasNext()) {
    list.add(scanner.next());
}

array_spinner = (Spinner)findViewById(R.id.spinner1);         
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
array_spinner.setAdapter(adapter); 
```

虽然对于普通用户来说可读性很差，但也许您只想显示描述和价格：

```
List<String> list = new ArrayList<String>();
while (scanner.hasNext()) {
    String data = scanner.next();
    String [] values = data.split(",");
    list.add(values[1] + "  $" + values[2]);
} 
```

您发布的方法仅显示了最后一个 CSV 行，因为您正在为 CSV 中的每一行创建一个新的 ArrayAdapter 并*覆盖*您之前创建的适配器。

通过将 Scanner 的结果存储在 List 中并将适配器的定义移出 Scanner 循环，您应该能够看到您希望的结果。

**从评论添加**

长度 = 2、索引 = 2 的 OutOfBounds 异常表明实际 CSV 中的至少一行只有两个值（一个逗号）。为了帮助您找到该行，请尝试以下操作：

```
if(values.length != 3)
    Log.v("Example", "Malformed row: " + data);
else
    list.add(values[1] + "  $" + values[2]); 
```

另外，我没有提到您没有为 Spinner 设置下拉布局。这不会导致应用程序崩溃，但会创建标准用户界面：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

# php - 我可以使用 window.open 打开现有的 php 文件并将 javascript 变量传递给该 php 页面吗？

> ID：11367795
> 
> 赞同：3
> 
> 时间：2012-07-06T18:33:26.820
> 
> 标签：php, javascript, variables, window.open

我在父浏览器窗口中有一些 JavaScript 变量，现在我想通过单击某个按钮打开一个新窗口（一个现有的 php 文件）并将这些变量传递给打开的页面。我知道我可以通过 GET 方法实现这一点，我只是想知道是否有更清晰的方法可以做到这一点，所以我不必在 URL 的末尾附加变量值。我也在 google 和 SO 上搜索过，有人建议使用 window.opener 不知何故它似乎不适用于 php。我还是个新手。任何帮助表示赞赏。提前致谢。

打开页面中的脚本

```
var newWindow = window.open ("myfile.php" ,"_blank");
newWindow.var1="hello";
newWindow.var2="world"; 
```

我的文件.php

```
//Is it possible to use the variables in php page as below?
window.opener.var1;
window.opener.var2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:35:51.050

如果您希望 PHP 代码可以访问这些变量，那么不，GET 方法是最简单、最清晰的方法。

```
No JS needed to open new window:
<a href="myfile.php?var1=foo&var2=bar" target="_blank">mylink</a>

JS method:
window.open("http://mysite.com/myfile.php?var1=foo&var2=bar"); 
```

我的文件.php

```
<?php
    $var1 = $_GET['var1'];
    $var2 = $_GET['var2'];
    ...
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:36:02.563

您可以使用带有 POST 方法和 的表单`target="_blank"`，但除此之外，您的选择是有限的。

无论如何，人们不喜欢弹出窗口。

# c# - 使用 Json.NET 序列化子类

> ID：11367796
> 
> 赞同：8
> 
> 时间：2012-07-06T18:33:27.343
> 
> 标签：c#, json, json.net

我正在尝试使用 Json.NET 来序列化一个子类。生成的 json 包含超类的序列化属性，但**不**包含子类对象的属性。

这似乎与我[在 SO 上](https://stackoverflow.com/q/5863496/498969)发现的问题有关。但是不得不写一个`JsonConverter`似乎有点矫枉过正。

**示例子类：**

```
public class MySubclass : List<string>
{
    public string Name { get; set; }
} 
```

**序列化示例：**

```
MySubclass myType = new MySubclass() { Name = "Awesome Subclass" };
myType.Add("I am an item in the list");

string json = JsonConvert.SerializeObject(myType, Newtonsoft.Json.Formatting.Indented); 
```

**生成的json：**

```
[
  "I am an item in the list"
] 
```

我预计结果会更像这样：

```
{
    "Name": "Awesome Subclass",
    "Items": [
        "I am an item in the list"
    ]
} 
```

也许我只是在序列化时没有使用正确的配置。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:50:29.600

根据[文档](http://james.newtonking.com/json/help/index.html?topic=html/SerializationGuide.htm)：

> .NET 列表（继承自 的类型`IEnumerable`）和 .NET 数组转换为 JSON 数组。因为 JSON 数组只支持一系列值而不支持属性，所以 在 .NET 集合上声明的**任何其他属性和字段****都不会序列化**。

所以，不要子类`List<T>`，只需添加第二个属性。

```
public class MyClass 
{
    public List<string> Items { get; set; }
    public string Name { get; set; }

    public MyClass() { Items = new List<string>(); }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:49:59.057

以下是我对此的看法。我认为您的预期结果会与这样的课程更加一致：

```
public class MyClass 
{
    public string Name { get; set; }
    public List<string> Items { get; set; }
} 
```

我不希望`Items`在序列化结果中看到一个元素，因为 on和 on`MySubclass : List<string>`都没有 Items 属性。`List``MySubclass`

由于您的类`MySubclass`实际上是一个字符串列表，我猜想（我只是在这里猜测）该`SerializeObject`方法只是遍历您的对象并序列化字符串列表。

# mobile - 在 iphone、android 平台上使用 ajax

> ID：11367802
> 
> 赞同：0
> 
> 时间：2012-07-06T18:33:56.167
> 
> 标签：mobile

先生，我正在为 iPhone、android 平台开发移动网站。我可以在 php 中使用 ajax 吗？如何实现 java 脚本。,是否支持这个平台的java脚本。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:34:58.150

是的，iPhone/Android 支持 JavaScript。做你为桌面浏览器做的事情，JavaScript 就可以正常工作。

# android - 在三星安卓浏览器上启用真正的固定定位

> ID：11367806
> 
> 赞同：25
> 
> 时间：2012-07-06T18:34:14.963
> 
> 标签：android, css, webkit, css-position, samsung-mobile

Android 浏览器从 2.2 开始支持固定定位，至少在某些情况下，例如关闭缩放时。我有一个没有 JS 的简单 HTML 文件，但我试过的三部三星手机上的固定定位是完全错误的。标题不是真正的固定定位，而是滚动出视图，然后在滚动完成后弹回原位。

对于我测试过的任何配置（2.2、2.3、2.3 x86、4.0.4），Android SDK 模拟器上都不会发生这种情况。在三星手机上的应用程序中使用 WebView 时也不会发生这种情况：在这些情况下，定位按预期工作。

**有没有办法让三星安卓“股票”浏览器使用真正的固定定位？**

我测试过： 1.三星 Galaxy 551，Android 2.2 2.三星 Galaxy S，Android 2.3 3.三星 Galaxy S II，Android 2.3

示例代码：

```
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,user-scalable=no,width=device-width,height=device-height"> 
    <style>
    h1 { position: fixed; top: 0; left: 0; height: 32px; background-color: #CDCDCD; color: black; font-size: 32px; line-height: 32px; padding: 2px; width: 100%; margin: 0;}
    p { margin-top: 36px; }
    </style>
  </head>
  <body>
    <h1>Header</h1>
    <p>Long text goes here</p>
  </body>
</html> 
```

预期的行为是灰色标题填充屏幕顶部并保持不变，无论您滚动多少。在三星 Android 浏览器上，它似乎滚动到视野之外，然后在滚动完成后弹回原位，好像固定定位是使用 Javascript 模拟的，但事实并非如此。

**编辑** 从评论和“答案”来看，似乎我不清楚我需要什么。我正在寻找一个元标记或 css 规则/hack 或 javascript 切换来关闭三星损坏的固定定位并打开 Android 浏览器的工作固定定位。我不是在寻找一种 Javascript 解决方案，它将损坏的固定定位添加到没有任何支持的浏览器中；三星固定定位已经做到了，只是看起来很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:39:08.017

我认为 android 2.2 浏览器实现 javascript 的最佳方式。

您可以通过此链接找到更多信息。它是关于所有移动浏览器中的固定定位。

[http://bradfrostweb.com/blog/mobile/fixed-position/](http://bradfrostweb.com/blog/mobile/fixed-position/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:21:05.393

也许您可以考虑一种不需要固定定位的不同方法...

将滚动添加到段落元素而不是（默认）正文元素。然后，您可以将段落元素放置在标题下方。这将确保标题始终显示在页面顶部，同时允许您滚动段落中的文本。

```
h1 {
   height: 20px;
}

p {
  position: absolute;
  top: 20px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  overflow-y: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T11:17:51.113

在他对 Brad Frost 的文章的评论中，Matthew Holloway 提出了一个与 Anita Foley 的回答类似的解决方案，但在不支持的地方使用了用于溢出的 polyfill:auto。在这里查看：

[http://bradfrostweb.com/blog/mobile/fixed-position/](http://bradfrostweb.com/blog/mobile/fixed-position/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-09T09:35:30.583

这不是三星的 Android 浏览器损坏，而是 Android 2.2 支持损坏。一般来说，您可能知道 position:fixed 在许多移动设备/系统中曾经并且在某些情况下仍然很糟糕。

要回答您的问题，没有“切换或元标记”会“打开 Android 浏览器的工作固定定位”。如果浏览器不支持某些东西，那么就没有“切换”来“切换”它。这不是一个功能。

否则，您可以使用[http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)来模拟它。

（编辑：一些事实）

1.  根据[http://caniuse.com/#search=position:fixed](http://caniuse.com/#search=position:fixed) Android 2.2 和 Android 2.3 有 PARTIAL 而不是完全支持 position:fixed。（部分支持似乎是错误的支持）
2.  Android 模拟器不会也永远不会与 Android 原生浏览器相同，例如 IETester 与 IE 原生浏览器不同（存在差异）
3.  摩托罗拉 ATRIX 4G 没有 Android 2.2 但 Android 2.3 ( [http://www.motorola.com/us/consumers/MOTOROLA-ATRIX%E2%84%A2-4G/72112,en_US,pd.html?selectedTab=tab- 2&cgid=手机#tab](http://www.motorola.com/us/consumers/MOTOROLA-ATRIX%E2%84%A2-4G/72112,en_US,pd.html?selectedTab=tab-2&cgid=mobile-phones#tab) )

您建议 SAMSUNG 引入专有的 hack 或 mod，以破坏 Android 浏览器中固定位置的其他工作支持。无论上述 3 点如何，这似乎都不太可能。

答案实际上很简单：有部分（错误）支持，您唯一的解决方案是使用替换或“修复”漏洞的 javascript 库。

# antlr - antlr 在这种情况下如何获得较小的树

> ID：11367817
> 
> 赞同：1
> 
> 时间：2012-07-06T18:35:12.360
> 
> 标签：antlr, antlr3

我正在根据我的语法从 AST 树中打印出类型字段和文本字段，我得到了这个

```
type=5 text=and
    type=14 text==
        type=4 text=ALIAS
            type=20 text=a
        type=7 text=ATTR_NAME
            type=20 text=column_b
        type=36 text=STR_VAL
            type=35 text="asdfds"
    type=14 text==
        type=4 text=ALIAS
            type=20 text=a
        type=7 text=ATTR_NAME
            type=20 text=yyyy
        type=12 text=DEC_VAL
            type=11 text=564.555 
```

我生成的词法分析器中的有效类型整数是

```
public static final int EOF=-1;
public static final int ALIAS=4;
public static final int AND=5;
public static final int ATTR_NAME=7;
public static final int DECIMAL=11;
public static final int DEC_VAL=12;
public static final int EQ=14;
public static final int ID=20;
public static final int STR_VAL=36; 
```

我非常希望树中永远不要有 type=20 ！！！而是将类型为 20 的节点上移一级，因此文本将是信息（不是令牌名称），类型将是 4,7，或 ALIAS 或 ATTR_NAME 类型。有没有办法做到这一点？

我当前语法的这一部分现在使用虚构的标记 ATTR_NAME 和 ALIAS

```
primaryExpr
    :   compExpr
    |   inExpr
    |   parameterExpr
    |   attribute
    ;

parameterExpr
    :   attribute (EQ | NE | GT | LT | GE | LE)^ parameter
    |   aliasdAttribute (EQ | NE | GT | LT | GE | LE)^parameter
    ;

compExpr
    :   attribute (EQ | NE | GT | LT | GE | LE)^ value
    |     aliasdAttribute(EQ | NE | GT | LT | GE | LE)^value
    ;
alias
    :   ID
    ;
inExpr  :   attribute IN^ valueList
    ;

attribute: ID -> ^(ATTR_NAME ID);

aliasdAttribute
    :       alias(DOT)(ID) -> ^(ALIAS alias ) ^(ATTR_NAME ID)
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:00:57.680

> 有没有办法做到这一点？

当然。

`alias`语法`T`规则：

```
grammar T;

options {
  output=AST;
}

tokens {
  ALIAS;
}

alias
 : ID -> ALIAS[$ID.text]
 ;

ID : ('a'..'z' | 'A'..'Z')+; 
```

将始终生成（重写）类型`ALIAS`为的标记，但内部文本与`ID`标记相同。

# android - android强制转换为自定义视图：ClassCastException：android.widget.LinearLayout

> ID：11367820
> 
> 赞同：1
> 
> 时间：2012-07-06T18:35:25.390
> 
> 标签：android, casting

我得到 ClassCastException: android.widget.LinearLayout 我试图抓住这样一个事实，即视图（Lineralayout）中包含 listview 的元素（它的一个子项）。

自定义视图：

```
public class MasterView extends View {
public boolean done=false;
public MasterView(Context context) {
    super(context);
}
public MasterView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public MasterView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}
@Override
protected void onFinishInflate() {
    // TODO Auto-generated method stub
    done=true;
    super.onFinishInflate();
}

} 
```

我这样称呼它：

```
View master = (View)findViewById(R.id.master);
MasterView master2 = (MasterView)master; //exception 
```

xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/master"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<RelativeLayout
    android:id="@+id/cnt"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="0.03" >

</RelativeLayout>

</LinearLayout> 
```

我用列表膨胀 cnt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:28:41.670

xml 中的 R.id.master 元素不是 MasterView 类型。将您的 xml 更改为：

```
<yourpackage.MasterView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/master"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >
  <RelativeLayout
    android:id="@+id/cnt"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="0.03" >
  </RelativeLayout>
</yourpackage.MasterView> 
```

# c++ - OpenSceneGraph - 如何添加一堵墙或 3

> ID：11367821
> 
> 赞同：0
> 
> 时间：2012-07-06T18:35:36.073
> 
> 标签：c++, openscenegraph

我需要在我的场景图中添加一堵墙，让它工作，这样我就不能用我的相机越过墙。我正在创建一个实验室场景，但总的来说我对 3d 编程很陌生。我一直在使用 OpensceneGraph 3.0 Beginner's guide 这本书，到目前为止，好的。

我的场景中有几件家具，但我想做的是添加一堵墙，我的相机不应该越过它。我下面的代码，来自本书，Openscenegraph 初学者，似乎没有做任何事情（第 83 页）。我添加了它，我没有看到一堵墙，我仍然可以用我的相机在场景中的任何地方移动。如何在我的应用程序中创建墙。

```
osg::ref_ptr<osg::Group> root = new osg::Group();
    //adding walls to the lab to make it more room like -- 7/6/12
    osg::ref_ptr<osg::Vec3Array> vertices = new osg::Vec3Array;
    vertices->push_back(osg::Vec3(0.0f, 0.0f, 0.0f));
    vertices->push_back(osg::Vec3(0.0f, 0.0f, 1.0f));
    vertices->push_back(osg::Vec3(1.0f, 0.0f, 0.0f));
    vertices->push_back(osg::Vec3(1.0f, 0.0f, 1.5f));
    vertices->push_back(osg::Vec3(2.0f, 0.0f, 0.0f));
    vertices->push_back(osg::Vec3(2.0f, 0.0f, 1.0f));
    vertices->push_back(osg::Vec3(3.0f, 0.0f, 0.0f));
    vertices->push_back(osg::Vec3(3.0f, 0.0f, 1.5f));
    vertices->push_back(osg::Vec3(4.0f, 0.0f, 0.0f));
    vertices->push_back(osg::Vec3(4.0f, 0.0f, 1.0f));

    osg::ref_ptr<osg::Vec3Array> normals = new osg::Vec3Array;
    normals->push_back(osg::Vec3(0.0f, -1.0f, 0.0f));

    osg::ref_ptr<osg::Geometry>geom = new osg::Geometry;
    geom->setVertexArray(vertices.get());
    geom->setNormalArray((normals.get()));
    geom->setNormalBinding((osg::Geometry::BIND_OVERALL));
    geom->addPrimitiveSet((new osg::DrawArrays(GL_QUAD_STRIP,0,10)));
    osg::ref_ptr<osg::Geode> wall = new osg::Geode;
    wall->addDrawable(geom.get());
    root->addChild(wall);

osgViewer::Viewer viewer;
      viewer.setSceneData(root.get());
    viewer.run(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:33:00.073

您已经按照上面的代码绘制了“墙”——它看起来更像是栅栏而不是墙，但是您可以通过将 1.0 值一直移动到 1.5 以匹配其他值来轻松解决这个问题。由于比例不同，您可能无法在场景的其余部分看到它 - 例如，如果您的家具尺寸为 100 秒。用以下代码替换您的 root->addChild(wall)：

```
 // assumes your furniture is already added to root
 float scale=root->getBound().radius();
 osg::ref_ptr<osg::PositionAttitudeTransform> pax = new osg::PositionAttitudeTransform;
 pax->addChild(wall);
 pax->setScale(osg::Vec3d(scale,scale,scale));
 root->addChild(pax); 
```

然后你会看到你的栅栏。移动 pax 的位置/旋转以放置墙壁。正如我在评论中提到的那样，您必须使用一些交叉路口代码来告诉相机在哪里停下来。

# canvas - 将 three.js 网格导出为 OBJ 或 STL

> ID：11367822
> 
> 赞同：8
> 
> 时间：2012-07-06T18:35:40.873
> 
> 标签：canvas, webgl, three.js

我想为参数化 Three.js 网格对象创建导出为 OBJ 或 STL 链接。就像[http://www.3dtin.com上的导出选项一样](http://www.3dtin.com)

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T14:09:13.310

为了获得 .obj 格式的网格，我使用了这个简单的函数：

```
THREE.saveGeometryToObj = function (geometry) {
var s = '';
for (i = 0; i < geometry.vertices.length; i++) {
    s+= 'v '+(geometry.vertices[i].x) + ' ' +
    geometry.vertices[i].y + ' '+
    geometry.vertices[i].z + '\n';
}

for (i = 0; i < geometry.faces.length; i++) {

    s+= 'f '+ (geometry.faces[i].a+1) + ' ' +
    (geometry.faces[i].b+1) + ' '+
    (geometry.faces[i].c+1);

    if (geometry.faces[i].d !== undefined) {
        s+= ' '+ (geometry.faces[i].d+1);
    }
    s+= '\n';
}

return s;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T15:14:13.140

写一个`OBJExporter`应该很容易。[只需将OBJLoader](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJLoader.js)用作参考。如果到那时还没有人这样做，我可能会在几周后自己写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T20:12:35.100

我会首先研究 python OBJ -> three.js 转换器。

除此之外，我认为您不会找到任何预先构建的库来执行此操作。我实际上会问 3DTin 他们是使用图书馆还是在内部开发它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:50:42.300

我稍微调整了上面的代码，以允许在场景中复制和平移的对象数组。我目前正在使用 document.writeln 然后手动复制并粘贴到文档中。

```
var l = parent.length;
var j = 0;

while (l--) {

 var numVerts = parent[l].children[0].geometry.vertices.length;
 document.writeln(THREE.saveGeometryToObj(parent[l].children[0],j*(numVerts)));     

 j++;
}

THREE.saveGeometryToObj = function (geo,nums) {

geo.updateMatrixWorld();
var num = parseInt(nums);
var s = '';

for (i = 0; i < geo.geometry.vertices.length; i++) {

    var vector = new THREE.Vector3( geo.geometry.vertices[i].x, geo.geometry.vertices[i].y, geo.geometry.vertices[i].z );
    geo.matrixWorld.multiplyVector3( vector );

    s+= 'v '+(vector.x) + ' ' +
    vector.y + ' '+
    vector.z + '</br>';
}

for (i = 0; i < geo.geometry.faces.length; i++) {

    s+= 'f '+ (geo.geometry.faces[i].a+1+num) + ' ' +
    (geo.geometry.faces[i].b+1+num) + ' '+
    (geo.geometry.faces[i].c+1+num);

    if (geo.geometry.faces[i].d!==undefined) {
        s+= ' '+ (geo.geometry.faces[i].d+1+num);
    }
    s+= '</br>';
}

return s; 
```

}

# jdo - 具有 PersistenceCapable 注释的类尝试存储非持久类型的实例

> ID：11367824
> 
> 赞同：0
> 
> 时间：2012-07-06T18:35:44.447
> 
> 标签：jdo, objectdb

使用 ObjectDB [ObjectDB 2.4.1] javax.jdo.JDOUserException 尝试存储非持久类型 com.A 的实例

```
@PersistenceCapable
public abstract class B
{
...
@Embedded
protected com.A a = new A();

} 
```

不幸的是，我们多年来一直在使用库中的 A 类，并且不再有可用的源代码，我无法在 com.A.java 上放置 PersistenceCapable 注释。我能做些什么？

编辑

我认为答案是为 A 类添加 package.jdo。但我仍然不明白为什么 JDO 让我为我想要保留的每个类添加注释或在 .jdo 文件中创建一个条目。我希望这可以通过 Serializable 接口以某种方式驱动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:42:29.403

默认情况下禁用 ObjectDB 中的序列化，以鼓励尽可能使用更高效的 JPA/JDO 可持久类型（实体类、具有持久性的类、可嵌入类）。

但是，当需要序列化时，您可以启用它，如[ObjectDB 手册](http://www.objectdb.com/java/jpa/setting/entities#The_persist_element_)中所述。

然后您应该能够在您的 ObjectDB 数据库中存储可序列化实例的实例。

# c# - 如何在 C# 中找到调用方法的全名

> ID：11367830
> 
> 赞同：22
> 
> 时间：2012-07-06T18:36:02.050
> 
> 标签：c#, .net, reflection

如何在 C# 中找到调用方法的全名？我已经看到了解决方案：

*[如何在 C# 中获取调用方法](https://stackoverflow.com/questions/394850/how-i-can-get-the-calling-methods-in-c-sharp)*

*[如何找到调用当前方法的方法？](https://stackoverflow.com/questions/171970/how-can-i-find-the-method-that-called-the-current-method)*

*[从被调用函数中获取调用函数名](https://stackoverflow.com/questions/1310145/get-calling-function-name-from-called-function-in-c-sharp)*

但他们只给我最高水平。考虑这个例子：

```
namespace Sandbox
{
    class Program
    {
        static void Main(string[] args)
        {
            test();
        }

        static void test()
        {
            var stackTrace = new StackTrace();
            var methodBase = stackTrace.GetFrame(1).GetMethod();
            Console.WriteLine(methodBase.Name);
        }
    }
} 
```

这只是输出'Main'。如何让它打印“Sandbox.Program.Main”？

这是我正在研究的一个简单的日志框架。

* * *

添加到 Matzi 的答案：

这是解决方案：

```
namespace Sandbox
{
    class Program
    {
        static void Main(string[] args)
        {
            test();
        }

        static void test()
        {
            var stackTrace = new StackTrace();
            var methodBase = stackTrace.GetFrame(1).GetMethod();
            var Class = methodBase.ReflectedType;
            var Namespace = Class.Namespace;         // Added finding the namespace
            Console.WriteLine(Namespace + "." + Class.Name + "." + methodBase.Name);
        }
    }
} 
```

它会产生应有的“Sandbox.Program.Main”。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-06T18:38:00.367

这有点像[这里](https://stackoverflow.com/questions/2968352/using-system-reflection-to-get-a-methods-full-name)。

```
MethodBase method = stackTrace.GetFrame(1).GetMethod();
string methodName = method.Name;
string className = method.ReflectedType.Name;

Console.WriteLine(className + "." + methodName); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-09T20:04:00.923

我认为获得全名的最佳方法是：

```
 this.GetType().FullName + "." + System.Reflection.MethodBase.GetCurrentMethod().Name; 
```

或者试试这个：

```
string method = string.Format("{0}.{1}", MethodBase.GetCurrentMethod().DeclaringType.FullName, MethodBase.GetCurrentMethod().Name); 
```

如果要显示最近的函数调用，可以使用：

```
StackTrace st  = new StackTrace();
StackFrame sf  = st.GetFrame(0);
var methodName = sf.GetMethod(); 
```

但是如果你想显示调用函数的树，你可以这样做：

```
if (st.FrameCount >1)
{
     // Display the highest-level function call
     // in the trace.
     StackFrame sf = st.GetFrame(st.FrameCount-1);
     Console.WriteLine("  Original function call at top of call stack):");
     Console.WriteLine("      {0}", sf.GetMethod());
} 
```

欲了解更多[信息](https://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.getframe(v=vs.110).aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-08T14:02:24.233

使用此方法，您可以可靠地获取全名

```
 public void HandleException(Exception ex, [CallerMemberName] string caller = "")
    {
        if (ex != null)
        {
            while (ex.InnerException != null)
                ex = ex.InnerException;

            foreach (var method in new StackTrace().GetFrames())
            {
                if (method.GetMethod().Name == caller)
                {
                    caller = $"{method.GetMethod().ReflectedType.Name}.{caller}";
                    break;
                }
            }

            Console.WriteLine($"Exception: {ex.Message} Caller: {caller}()");
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:40:26.613

在`System.Reflection.MethodBase`方法`GetCurrentMethod`中，您可以找到有关使用类等调用堆栈的完整信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-06T10:17:11.457

当前调用的命名空间不等于当前命名空间：

```
 var mNamespace = new StackTrace().GetFrames()?.Select(x =>
                {
                    try
                    {
                        return x.GetMethod().ReflectedType?.Namespace;
                    }
                    catch (Exception)
                    {
                        return string.Empty;
                    }
                }).First(x => x != new StackTrace().GetFrame(0).GetMethod().ReflectedType?.Namespace); 
```

# android - Android 单元测试包路径错误

> ID：11367832
> 
> 赞同：2
> 
> 时间：2012-07-06T18:36:07.397
> 
> 标签：android, unit-testing, junit, android-testing, junit3

我一直在使用 Android 单元测试并遇到了似乎是一个路径问题。

首先我从我的项目目录中运行这个命令

```
android create test-project -m ../ -p tests -n RoamPayTests 
```

这将创建一个测试项目并对其进行初始化。自动生成的 ActivityInstrumentaionTestCase2 工作正常。我可以在这里创建测试，一切正常。

注意：请注意，主要活动在 ui 包中。

```
package com.roamdata.roampayx;

import com.roamdata.roampayx.ui.SplashActivity;

import android.test.ActivityInstrumentationTestCase2;

/**
 * This is a simple framework for a test of an Application.  See
 * {@link android.test.ApplicationTestCase ApplicationTestCase} for more information on
 * how to write and extend Application tests.
 * <p/>
 * To run this test, you can type:
 * adb shell am instrument -w \
 * -e class com.roamdata.roampayx.ui.SplashActivityTest \
 * com.roamdata.roampayx.tests/android.test.InstrumentationTestRunner
 */
public class SplashActivityTest extends ActivityInstrumentationTestCase2<SplashActivity> {

    public SplashActivityTest() {
        super("com.roamdata.roampayx", SplashActivity.class);
    } 
```

这是自动生成的 Android_Manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- package name must be unique so suffix with "tests" so package loader doesn't ignore us -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.roamdata.roampayx.tests"
          android:versionCode="1"
          android:versionName="1.0">
    <!-- We add an application tag here just so that we can indicate that
         this package needs to link against the android.test library,
         which is needed when building test cases. -->
    <application>
        <uses-library android:name="android.test.runner" />
    </application>
    <!--
    This declares that this application uses the instrumentation test runner targeting
    the package of com.roamdata.roampayx.  To run the tests use the command:
    "adb shell am instrument -w com.roamdata.roampayx.tests/android.test.InstrumentationTestRunner"
    -->
    <instrumentation android:name="android.test.InstrumentationTestRunner"
                     android:targetPackage="com.roamdata.roampayx"
                     android:label="Tests for com.roamdata.roampayx"/>
</manifest> 
```

问题是当我尝试创建一个新的测试用例时。

```
package com.roamdata.roampayx;
import com.roamdata.roampayx.provider.RoamPay;
import com.roamdata.roampayx.provider.RoamPayProvider;
import android.test.ProviderTestCase2;

public class ProviderTest extends ProviderTestCase2<RoamPayProvider> {
    public ProviderTest() {
        super(RoamPayProvider.class, RoamPay.AUTHORITY);
    }
} 
```

接下来我构建并安装，（这里没有问题）。但后来我跑了

```
adb shell am instrument -w com.roamdata.roampayx.tests/android.test.InstrumentationTestRunner 
```

最后我得到以下错误

```
android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests:
Error in testSuiteConstructionFailed:
java.lang.RuntimeException: Exception during suite construction
    at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
    at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
    at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)
Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Constructor.constructNative(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
    at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
    at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
    at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
    at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
    at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:379)
    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4142)
    at android.app.ActivityThread.access$1300(ActivityThread.java:130)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NoClassDefFoundError: com.roamdata.roampayx.provider.RoamPayProvider
    at ProviderTest.<init>(ProviderTest.java:9)
    ... 18 more 
```

我有对 RoamPay 和 RoamPayProvider 的导入。智能感知正在工作，我正在获得这些参考。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:42:52.727

一切都很好，除了构造函数。我把它改成

```
public RoamPayProviderTest() {
    super(RoamPayProvider.class, "com.roamdata.roampayx");
} 
```

and now everything works. I guess you can use this question and answers as a nice tutorial on how to setup your unit tests.

# php - 检查mysql升序字段

> ID：11367833
> 
> 赞同：-3
> 
> 时间：2012-07-06T18:36:08.970
> 
> 标签：php, mysql

我的 mysql 数据库中有一个名为“rank”的字段。

我想运行一个尽可能简单的查询或 php 循环，检查所有行的该字段中是否存在从 1 开始的增量。行的顺序无关紧要，只要有一个“等级”为 1、另一个为 2、另一个为 3 等的行。

如果序列中有中断，我有一些代码要运行，所以我只是在寻找对资源最友好的检查方式的帮助。

还需要有一个等级为 1 的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:50:04.703

如果 rank 1 存在，这将返回一个 0 作为 missingrank 的行，并且除了 missingrank 0 之外的任何行都是缺失的排名。

```
 SELECT T.ID - 1 AS [MISSINGRANK]
 FROM URTABLE T
 LEFT JOIN URTABLE T2 ON T.rank = T2.rank + 1
 WHERE T2.ID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:57:29.570

看看这个：

```
mysql> set @a:=1;

mysql> select actor_id,if(@a<>actor_id,'break',@a),@a:=@a+1 from t2 order by actor_id;
+----------+-----------------------------+----------+
| actor_id | if(@a<>actor_id,'break',@a) | @a:=@a+1 |
+----------+-----------------------------+----------+
|        1 | 1                           |        2 |
|        2 | 2                           |        3 |
|        3 | 3                           |        4 |
|        4 | 4                           |        5 |
|        5 | 5                           |        6 |
|        6 | 6                           |        7 |
|        7 | 7                           |        8 |
.....
|       99 | 99                          |      100 |
|      101 | break                       |      101 |
|      102 | break                       |      102 |
|      103 | break                       |      103 |
|      104 | break                       |      104 |
|      105 | break                       |      105 |
+----------+-----------------------------+----------+
207 rows in set (0.00 sec) 
```

我不知道这是否是您想要的（我在本地主机上尝试过），其中中断意味着 actor_id 已经破坏了 auto_auto_increment，您可以添加 group by 、 order by 等，无论您需要什么

# python - 在 Windows 上导入和使用使用多处理而不会导致无限循环的模块

> ID：11367835
> 
> 赞同：6
> 
> 时间：2012-07-06T18:36:22.153
> 
> 标签：python, windows, multiprocessing

我有一个名为`multi.py`. 如果我只是想将 multi.py 作为脚本执行，那么避免在 Windows 上崩溃（产生无限数量的进程）的解决方法是将多处理代码放在：

```
if __name__ == '__main__': 
```

但是，我正在尝试将其作为模块从另一个脚本导入并调用`multi.start()`. 如何实现？

```
# multi.py
import multiprocessing

def test(x):
    x**=2

def start():
    pool = multiprocessing.Pool(processes=multiprocessing.cpu_count()-2)
    pool.map(test, (i for i in range(1000*1000)))
    pool.terminate()
    print('done.')

if __name__ == '__main__':
    print('runs as a script,',__name__)
else:
    print('runs as imported module,',__name__) 
```

这是我`test.py`运行的：

```
# test.py
import multi
multi.start() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T18:48:23.003

我不太明白你在问什么。你不需要做任何事情来防止它产生无限多的进程。我只是在 Windows XP 上运行它——导入文件并运行`multi.start()`——它在几秒钟内完成。

您必须进行`if __name__=="__main__"`保护的原因是，在 Windows 上，多处理必须导入主脚本才能运行目标函数，这意味着该文件中的顶级模块代码将被执行。仅当顶级模块代码本身尝试生成新进程时，才会出现问题。在您的示例中，顶级模块代码不使用多处理，因此没有无限的进程链。

编辑：现在我明白你的要求了。你不需要保护`multi.py`。你需要保护你的主脚本，不管它是什么。如果您遇到崩溃，那是因为在您的主脚本中，您是`multi.start()`在顶级模块代码中执行的。您的脚本需要如下所示：

```
import multi
if __name__=="__main__":
    multi.start() 
```

*主*脚本中始终需要“保护” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:38:17.860

```
if __name__ == '__main__':
  print('runs as a script,',__name__)
else:
  print('runs as imported module,',__name__) 
```

# sql-server-2008 - 运行存储过程，然后通过电子邮件发送结果

> ID：11367838
> 
> 赞同：0
> 
> 时间：2012-07-06T18:36:32.347
> 
> 标签：sql-server-2008, sp-send-dbmail

我正在尝试在 SQL Server 2008 中运行存储过程，然后通过电子邮件发送存储过程的结果，但收到以下错误：

> Msg 22050, Level 16, State 1, Line 0
> 格式查询错误，可能参数无效
> Msg 14661, Level 16, State 1, Procedure sp_send_dbmail, Line 504
> 查询执行失败：Msg 102, Level 15, State 1, Server XXYYZZ, Line 1
> '@returnvalue' 附近的语法不正确。

这是一些要复制的示例代码：

```
CREATE PROCEDURE pTestEmail 
AS
        -- Create the result table - Stores the results of the stored procedure -- 

        DECLARE @returnvalue TABLE (
        ClientID varchar(5)
        );

BEGIN
    SET NOCOUNT ON;

    -- Insert some fake data -- 

    INSERT INTO @returnvalue
    VALUES ('001'),
    ('002'),
    ('003'),
    ('004'),
    ('005');

    -- Test that the fake data is in there
    -- Uncomment the next line to see it works --
    -- SELECT * FROM @returnvalue;

    -- Email the results in the @returnvalue table -- 
    EXEC msdb.dbo.sp_send_dbmail
    @execute_query_database='MainDB',
    @recipients=N'me@null.com',
    @body='Message Body', 
    @subject ='The Resultset',
    @profile_name ='Reports',
    @query ='SELECT * @returnvalue',
    @attach_query_result_as_file = 1,
    @query_attachment_filename ='Results.txt'

END
GO 
```

我已经测试了该`DBmail`功能并使其正常工作。你能像我一样在存储过程中使用@标量，还是我需要使用全局临时表？

# struts-1 - 将显示标签应用于我的项目，但在 struts 配置文件中失败

> ID：11367839
> 
> 赞同：0
> 
> 时间：2012-07-06T18:36:32.487
> 
> 标签：struts-1, displaytag

我在struts中将显示标签应用于我的jsp但无法做到，请查看

1.strutsconfig

```
<form-beans><form-bean name="DailysheetForm" type="com.myapp.struts.DailysheetForm"/>
</formbean>
<action input="/" path="/DailysheetList" name="DailysheetForm"  scope="request"            type="com.myapp.struts.DialysheetListAction">
   <forward name="success" path="/DailysheetList.jsp"/>
</action> 
```

2.表格

```
public class DailysheetForm extends ActionForm 
 {
// some getter and setter methods i used like receiptno
   protected ArrayList arraylist;
   public ArrayList getArraylist()
     {
       return arraylist;
     }

public void setArraylist(ArrayList arraylist) {

    this.arraylist = arraylist;

} 
```

3.动作类

```
public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    ArrayList dailysheetdata;
    DailysheetForm dailyform = (DailysheetForm) form;
    Class.forName("com.mysql.jdbc.Driver");
    Connection connect = DriverManager.getConnection("jdbc:mysql://localhost/Stonecrusher?"
                        + "user=Stonecrusher&password=xxxxxx");
    System.out.println("Connection"+connect);
    dailysheetdata = StoneCrusherData.getDailysheetData(connect);

    dailyform.setArraylist(dailysheetdata) ;
    return mapping.findForward(SUCCESS);
     } 
```

JSP

```
<display:table id="data"  name="requestScope.DailysheetForm.arraylist"requestURI="/DailysheetList" pagesize="10" >
  <display:column property="receiptno" title="RECEIPTNO" sortable="true"/>
  <display:column property="cutomername" title="CUSTOMER NAME" sortable="true"/>
</display:table>
<display:table id="data" name="requestScope.DailysheetForm.arraylist" requestURI="/DailysheetList" pagesize="10" >
  <display:column property="receiptno" title="RECEIPTNO" sortable="true"/>
  <display:column property="cutomername" title="CUSTOMER NAME" sortable="true"/>
</display:table> 
```

它不起作用，基本上我正在将数据获取到 dailysheetdate，它是我的 Action 类中的数组列表，我想在带有分页的 jsp 中显示它。我知道我错了，请帮助我怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:06:31.400

检查您的 jar 文件是否将所有必需的 jar 放入 lib 中。. 仍然有问题将您的错误粘贴到此处..

[请参阅显示标签教程](http://www.dzone.com/tutorials/java/struts/struts-example/struts-display-tag-table-decorator-example-1.html)

那么你不需要在in 中指定`input`和`name`属性`<action>``strutsconfig.xml`

即你的代码应该像这样

```
<action path="/DailysheetList" scope="request"  type="com.myapp.struts.DialysheetListAction">
   <forward name="success" path="/DailysheetList.jsp"/>
</action> 
```

那么肯定会执行Action Class..

还有一件事是通过查看您的操作类代码，我不知道是否`StoneCrusherData`创建了对象..也请检查以下行

```
dailysheetdata = StoneCrusherData.getDailysheetData(connect); 
```

# if-statement - 在批处理脚本中执行这个条件（if-else）有什么问题？

> ID：11367841
> 
> 赞同：0
> 
> 时间：2012-07-06T18:36:42.613
> 
> 标签：if-statement, batch-file

我正在测试我拥有的一些小脚本。这个特别的让我发疯。在我看来，它应该可以工作，但它并没有按照我的想法/应该做。

```
@echo off
echo testing the issue
echo.

ECHO Checking the log file for errors...
echo %errorlevel%
FINDSTR /C:"open failed" C:\automatic_deployment\test1.txt 
echo %errorlevel%
if %errorlevel% == 0 (
ECHO Deployment failed.
pause
GOTO quit) else (GOTO TSTErrChecking1)

:TSTErrChecking1
FINDSTR /C:"does not exist" C:\automatic_deployment\test1.txt
echo %errorlevel%
if %errorlevel% == 0 (
ECHO Deployment failed.
pause
GOTO quit) else (GOTO TSTErrChecking2)

:TSTErrChecking2
FINDSTR /C:"Logon failed" C:\automatic_deployment\test1.txt 
echo %errorlevel%
if %errorlevel% == 0 (
ECHO Deployment failed.
pause
GOTO quit) else ( GOTO TSTErrChecking3)

:TSTErrChecking3
FINDSTR /C:"Failure" C:\automatic_deployment\test1.txt 
echo %errorlevel% 
if %errorlevel% == 0 (
ECHO Deployment failed.
pause
GOTO quit) else ( GOTO TSTErrChecking4)

:TSTErrChecking4
FINDSTR /C:"RC (return code) = 0" C:\automatic_deployment\test1.txt 
echo %errorlevel%
IF %ERRORLEVEL% == 0 (
ECHO Deployment was successful.
pause
GOTO quit) ELSE (
ECHO Deployment failed.
pause
GOTO quit)

:quit
exit 
```

如您所见，我正在使用“FINDSTR”从一个小的 test1.txt 文件中查找某些单词/字符串并采取相应的行动。如果它看到任何“失败”/“不存在”/“打开失败”，我希望它说“部署失败”并尽快退出。如果它找不到上述任何一个并找到“RC（返回码）= 0”，我希望它说它是“成功的”。

因此，我将所有这些测试单词和字符串放在我的 test1.txt 文件中并测试了批处理脚本，但它一直跳过（我认为）所有那些失败提示/单词并一直说它是成功的。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:04:26.330

可能是`%ERRORLEVEL%`您的环境中已经定义了一个变量

读

Raymond Chen 的 *`ERRORLEVEL`不是`%ERRORLEVEL%`* [http://blogs.msdn.com/b/oldnewthing/archive/2008/09/26/8965755.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2008/09/26/8965755.aspx)

然后尝试

```
FINDSTR /C:"RC (return code) = 0" test.txt
IF ERRORLEVEL 1 ECHO Deployment failed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:40:31.700

我只是没有要搜索的匹配字符串。我不知道 FINDSTR 在搜索和比较时会寻找完全相同的大小写字母。这就是问题所在。

# algorithm - 可以在合理的时间内在 pi 中找到任何有限位串吗？

> ID：11367844
> 
> 赞同：29
> 
> 时间：2012-07-06T18:36:55.070
> 
> 标签：algorithm, complexity-theory, communication, pi

所以，不久前我读到一个类似这样的笑话：

> “永远不要以二进制计算 pi - 因为它无限地进行并且是随机的，理论上它包含每个有限位字符串。因此，您将拥有所有现有的受版权保护的材料并承担一些严重的罚款。”

这显然是为了幽默，但它让我思考。如果每个有限位字符串都存在于 pi 的二进制表示中，是否可以将其用作传输数据的方法？

例如，假设我想传输一个可以解释为 jpeg 图像的位串。我不会直接发送信息，而是在 pi 的数字内找到它的位置，并简单地发送 pi 的数字内的第一位的位置，以及字符串的长度。

这对我来说似乎很简单，但这里明显的问题是即使在前几万亿位数字中找到这个字符串的概率也非常小。因此，最终可能需要花费大量时间才能找到。

我的想法是，可以有几台机器专门用于在 pi 中搜索大文件，然后创建它们所有起始位置的索引。因此，每次计算只需要发生一次，然后该信息可以从那时起非常快速地传输。

所以你怎么看？这是完全可行的，还是这些计算会花费太多时间？

谢谢阅读！如果我忽略了任何发布指南，我深表歉意，这是我在这个论坛上的第一个问题。

编辑：

感谢您的快速回复，伙计们！我认为我的推理有误，很高兴知道为什么！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-06T18:55:36.027

扩展我的评论。这里有一个非常重要的概念，叫做**[信息熵](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)**。

在完全公开的情况下，我是目前 Pi 数字 10 万亿位 (10^13) 的世界纪录保持者。

**我有大约 10,000 份每个人的[社会安全号码](http://en.wikipedia.org/wiki/Social_Security_number)。**

然而，这并不意味着我可以侵入每个人的账户并窃取他们的身份。因为我不知道每个人的SSN从哪里开始***。***对于典型的 9 位 SSN，Pi 中将出现该 SSN 的第一个数字的长度约为 9 位。换句话说，关于 SSN 的信息保存在*地址*中，而不是 Pi 本身中。

* * *

例如，如果某人拥有 SSN：**938-93-3556**

它从 Pi 中的偏移量**597,507,393**开始。这个数字`597,507,393`大约与 SSN 本身一样长。换句话说，我们没有通过使用 Pi 获得任何收益。
[（我不确定它是否出现了更早的偏移量，但随着偏移量的减小，概率会呈指数下降。）]

* * *

概括地说，即使你有无限位数的 Pi（理论上它包含所有可能的信息），保存数据 XXX 的地址也将（极有可能）与 XXX 本身一样大。

换句话说，信息不是保存在 Pi 本身的数字中，而是保存在信息开始的地址中。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-06T20:33:40.667

因为我们都在[Lounge<C++>](https://chat.stackoverflow.com/rooms/10/loungec)中感到无聊，所以我继续执行搜索以找出特定长度的“消息”的平均偏移量。

我下载[了 100 万位 Pi](https://gist.github.com/3062541#file_pi)并查找了所有固定长度的子序列（例如 00..99）。根据消息长度，您将获得以下输出：

```
 Digits    Avg.Offset    Unfound

 1            8.1        0
 2          107.07       0
 3          989.874      0
 4         9940.46       0
 5        99959.4        8 <-- note 
```

*请注意，在 pi searched*的位数的 10% 处，我们已经开始遇到未找到的模式。

还要注意，正如信息熵定律所预测的那样，平均偏移量大致与消息的长度成正比。

* * *

### 原始输出和时间：

跑步

```
for a in 10 100 1000 10000 100000; do \make -B CFLAGS=-DNUMRANGE=$a && time ./test; done 
```

节目

```
g++ -DNUMRANGE=10 -std=c++0x -g -O3 -fopenmp -march=native test.cpp -o test && ./test
0 unfound
81 cumulative, 8.1 average

real    0m0.008s
user    0m0.008s
sys 0m0.004s
g++ -DNUMRANGE=100 -std=c++0x -g -O3 -fopenmp -march=native test.cpp -o test && ./test
0 unfound
10707 cumulative, 107.07 average

real    0m0.004s

g++ -DNUMRANGE=1000 -std=c++0x -g -O3 -fopenmp -march=native test.cpp -o test && ./test
0 unfound
989874 cumulative, 989.874 average

real    0m0.010s

g++ -DNUMRANGE=10000 -std=c++0x -g -O3 -fopenmp -march=native test.cpp -o test && ./test
0 unfound
9.94046e+07 cumulative, 9940.46 average

real    0m0.081s

g++ -DNUMRANGE=100000 -std=c++0x -g -O3 -fopenmp -march=native test.cpp -o test && ./test
8 unfound
9.99594e+09 cumulative, 99959.4 average

real    0m7.387s 
```

完整代码、makefile 和 pi 数字：**[https ://gist.github.com/3062541](https://gist.github.com/3062541)**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-06T18:49:29.350

不，不可能在随机序列中*有效地*找到任意序列——这源于“随机”的定义。（如果有办法预测序列发生的位置，它就不是随机的。）

至于索引所有位置，那么，你得到了什么？您实际上是在说“跳到起点 0...”，然后您必须说“...然后以 π 计算下一个 JPEG 大小的位...”（没有胜利，因为您必须使用向上能量进行计算）或“......然后在 mega-π 索引中查找下一个 JPEG 大小的数据块。” （在这种情况下，您可以加载 JPEG 文件。）

你不能赢，也不能收支平衡（而且，就其价值而言，你不能退出游戏）。

更新：@Mysticial 的回答比我的好。他的观点

> 例如，如果某人拥有 SSN：938-93-3556
> 
> 它从 Pi 中的偏移量 597,507,393 开始。这个数字 597,507,393 大约与 SSN 本身一样长。换句话说，我们没有通过使用 Pi 获得任何收益。

优雅地抓住了根本问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-06T18:50:41.270

这种说法是错误的。Pi 是无限的，它的下一个数字是不可预测的，但这并不意味着每个可能的字符串都在那里。

例如，假设我创建了一个类似于 pi 的函数，但任何时候都有 20 个二进制零序列，计算接下来的 20 位，并用它替换零。

这个序列也是无限的，不可预测的——但我们可以肯定地知道它永远不会包含 20 个二进制零的序列。

没有办法证明 PI 包含所有可能的位序列。

这也可能有助于回答： [http ://www.youtube.com/watch?v=8PUJvAlD64k](http://www.youtube.com/watch?v=8PUJvAlD64k)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T18:49:43.223

> 因为它是无限进行的并且是随机的，理论上它包含了每一个有限位串

Pi 无限继续，但绝对不是随机的 - 即。它的数字可以由一个`O(log n)`大小的程序计算（因此，有限前缀可以由比前缀小得多的程序生成），这意味着 Pi 前缀的 Kolmogorov 复杂度渐近小于它们的大小。因此，尚未证明它包含每个有限字符串（我不知道）。

# javascript - 外部javascript中数组的随机引用不显示onload

> ID：11367845
> 
> 赞同：0
> 
> 时间：2012-07-06T18:37:04.140
> 
> 标签：javascript

我是一个 javascript 初学者，我试图弄清楚为什么这段代码在写在头部时有效，但在从外部文件引用时无效。

在我的 html 文档的开头，我引用了 javascript 文件“quote.js”，如下所示。

```
<script type="text/javascript" language="JavaScript" src="/js/quote.js"> </script> 
```

quote.js的内容如下

```
var textarray = [
    "Be Good.",
    "Our future depends powerfully on how well we understand the cosmos.",
    "Bottomless wonders spring from simple rules... repeated without end.",
    "All our science, measured against reality, is primitive and childlike — and yet, it is the most precious thing we have.",
    "To use violence is to already be defeated."
    ];

    function RndText() {
      var rannum= Math.floor(Math.random()*textarray.length);
      document.getElementById('ShowText').innerHTML=textarray[rannum];
    }
    window.onload = function() { RndText(); } 
```

最后，我在body中替换的div如下...

```
<div id = "ShowText"></div> 
```

这可能是一个愚蠢的错误，但我一直在尝试追踪它一段时间，但我错过了一些东西。当我在我的 html 头中编写 quote.js 的内容时，它工作正常。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:41:59.570

如果代码在头部有效，但在包含时无效，则可能是脚本路径有问题。仔细检查这`/js/quote.js`是一个合适的位置。它可能需要`js/quote.js`，你可能有一个错字。在 FireFox 和 Chrome 等浏览器中，如果您查看页面的源代码，您可以单击此类文件的路径，它会加载包含的文件，如果找不到文件，则会显示错误。

如果您可以共享该页面的链接，我可以更确定地告诉您问题出在哪里。

此外，如果您使用 XHTML，则不必使用语言属性，但这不会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:43:32.970

也许代码在 DOM 准备好之前就在运行

而不是`onload`使用事件`DOMContentLoaded`

```
document.addEventListener('DOMContentLoaded', function () {
   //code here
}, false); 
```

# java - 使用私有变量覆盖类中的方法

> ID：11367846
> 
> 赞同：1
> 
> 时间：2012-07-06T18:37:05.263
> 
> 标签：java

如果我有一个无法更改的课程（在罐子内），例如。

```
public class AA implements A{
  private String s = "foo";
  public String getValue() { return s; }
} 
```

覆盖该 getValue() 方法的好方法是什么？我的方式一直是复习课。前任。

```
public class AB implements A{
  private String s = "foo";
  public String getValue() { return s + "bar"; }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:40:00.503

无论您做什么，都无法访问私有变量（没有反射）。如果您需要它的值，请在您的 getter 中调用超类的 getter，以获取该值，然后随意操作它。您可以通过执行调用超类的方法

`super.getValue();`

在您的`getValue`实施中。

鉴于您的更新

```
public class AB extends AA {
  public String getValue() { 
      String superS = super.getValue();
      return superS + "bar"; 
  }
} 
```

请注意以下事项

1）我使用`extends`的是你不使用的。`extends`用于扩展类，`implements`用于实现接口。
2）我没有阴影`s`。我把它留在超级班上。我只是将 super`getValue`与您指定的装饰结合使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T18:46:39.090

有两种方法可以解决这个问题：

**1）**使用继承。

```
public B extends A{
    public String getValue(){
     String s = super.getValue();
     // do something with s
     return s;
  }
} 
```

这可以正常工作，但用户仍然可以`B`转换`A`为`B`继承自`A`. 这意味着您仍然可以`A.getValue()`从课程中访问`B`，这不是您想要的。

**2）**另一种解决方案是使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)

```
public B {
  private A a = new A();
  public String getValue(){
     String s = a.getValue();
     // do something with s
     return s;
  }
} 
```

这样，`B`使用`A`和隐藏它。`B`没有to的演员表`A`是可能的，也没有电话`A.getValue()`可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:43:39.667

这就是**封装**的用途......您的示例指向名为**OCP（开放封闭原则）的设计原则。**

这意味着**类是对扩展开放的，而不是对修改开放的。**您可以使用 jars 方法访问其私有变量，但不能以非法方式对其进行修改。

您可以**通过仅访问超类的 getter 方法来访问超类中的私有变量。**

# javascript - jQuery 的 .css() 实现

> ID：11367850
> 
> 赞同：9
> 
> 时间：2012-07-06T18:37:12.463
> 
> 标签：javascript, jquery, css, internet-explorer

我正在查看 jQuery 代码并找到了这一行：

`elem.runtimeStyle.left = elem.currentStyle.left;`

在

[https://github.com/jquery/jquery/blob/449e099b97d823ed0252d8821880bc0e471701ea/src/css.js#L169](https://github.com/jquery/jquery/blob/449e099b97d823ed0252d8821880bc0e471701ea/src/css.js#L169)

我不确定为什么要这样做。这不是没用吗？

将 runtimeStyle 设置为 currentStyle 不会覆盖任何内容。除了让 runtimeStyle 在你下次阅读时可读——现在似乎不需要了。

我理解这里的整体概念以及为什么存在该代码块（将数字非像素值转换为适当的像素值，方法是将左侧设置为非像素值并读取其像素值，然后将左侧恢复为原始值价值）。

**编辑**请参阅下面的答案，了解为什么我认为已经完成（带有 jsFiddle 插图！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:05:29.677

这实际上是一个 IE hack，上面的 RHS 计算的值被输入到上面的 LHS 中。即。我们正在获取新值以获取计算值。查看此博客以了解更多信息[http://jsperf.com/testing-awesome-hack-for-ie](http://jsperf.com/testing-awesome-hack-for-ie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:03:40.387

我一直在思考这个问题。这就是为什么我相信它已经完成了：

将 runtimeStyle 设置为 currentStyle 可确保这是应用于元素的样式（运行时样式胜过内联样式）。因此，当您`elem.style.left`在下一行中进行设置时，UI 不会发生任何变化。但是，新的像素值仍然可以使用`elem.style.pixelLeft`- 因为这只是将 CSS 上的非像素值转换为像素值。`pixelLeft`不是对实际位置的测量，它只是对像素值的转换。

看到这个：http: [//jsfiddle.net/RaSzc/](http://jsfiddle.net/RaSzc/)

所以这样做是为了**在 UI 中没有任何变化的情况下计算出像素值**

# c# - 是否有任何属性可以避免验证模型？

> ID：11367853
> 
> 赞同：2
> 
> 时间：2012-07-06T18:37:23.037
> 
> 标签：c#, .net, asp.net-mvc, validation, attributes

我的控制器中有以下操作：

```
[HttpGet]
public ActionResult Office(GestionOffice model)
{
    ModelState.Clear();
    model.Initialize();
    return View(model);
} 
```

我不需要通过 GET 采取行动，进行验证。这将帮助我执行 GET 调用。

这将是我的理想情况：

```
[HttpGet]
[NotValidateModel]
public ActionResult Office(GestionOffice model)
{
    model.Initialize();
    return View(model);
} 
```

谢谢你。

**编辑**

`NotValidateModel`澄清不存在，将归因于案例以避免验证。

将模型移动到行动中的原因是`MOCK`模型

**编辑二**

我有我的 POST 操作，我需要通过 GET 接收我的操作，没有验证的模型，以成功完成控制器中操作的测试

```
[HttpGet]
[NotValidateModel]
public ActionResult Office(GestionOffice model)
{
    model.Initialize();
    return View(model);
}

[HttpPost]
[ActionName("Office")]
[NotValidateModel]
public ActionResult OfficePost(GestionOffice model)
{
    if(ModelState.IsValid)
    {
        model.Save();
        return RedirectToAction("List");
    }

    model.Initialize();
    return View(model);
} 
```

**关于@Mark 解决方案的版本**

在我看来，我有一些动作调用，我必须使用动作和控制器创建一个键。

**自定义模型元数据**

```
public class CustomModelMetaData : ModelMetadata
{
    public CustomModelMetaData(ModelMetadataProvider provider, Type containerType, Func<object> modelAccessor, Type modelType, string propertyName)
        : base(provider, containerType, modelAccessor, modelType, propertyName)
    {
    }

    public override IEnumerable<ModelValidator> GetValidators(ControllerContext context)
    {
        var itemKey = this.CreateKey(context.RouteData);
        if (context.HttpContext.Items[itemKey] != null && bool.Parse(context.HttpContext.Items[itemKey].ToString()) == true)
        {
            return Enumerable.Empty<ModelValidator>();
        }

        return base.GetValidators(context);
    }

    private string CreateKey(RouteData routeData)
    {
        var action = (routeData.Values["action"] ?? null).ToString().ToLower();
        var controller = (routeData.Values["controller"] ?? null).ToString().ToLower();
        return string.Format("NoValidation_{0}_{1}", controller, action);
    }
} 
```

**筛选**

```
public class NoValidationAttribute : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        var itemKey = this.CreateKey(filterContext.ActionDescriptor);
        filterContext.HttpContext.Items.Add(itemKey, true);
    }

    private string CreateKey(ActionDescriptor actionDescriptor)
    {
        var action = actionDescriptor.ActionName.ToLower();
        var controller = actionDescriptor.ControllerDescriptor.ControllerName.ToLower();
        return string.Format("NoValidation_{0}_{1}", controller, action);
    }
} 
```

**编辑过滤器**

可能存在在主视图中有一个 foreach 以调用具有属性的几个局部视图的情况`NoValidation`。在这种情况下，包括一个检查密钥的控件。因为它在key中包含了controller的名字和action，这个key几乎是唯一的，只能在描述的情况下重复

```
public class NoValidationAttribute : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        var itemKey = this.CreateKey(filterContext.ActionDescriptor);
        if (!filterContext.HttpContext.Items.Contains(itemKey))
        {
            filterContext.HttpContext.Items.Add(itemKey, true);
        }
    }

    private string CreateKey(ActionDescriptor actionDescriptor)
    {
        var action = actionDescriptor.ActionName.ToLower();
        var controller = actionDescriptor.ControllerDescriptor.ControllerName.ToLower();
        return string.Format("NoValidation_{0}_{1}", controller, action);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:52:08.343

**[请参阅下面的更新以及@ANDRES 在问题中提到的编辑]**

您尝试做的事情很难实现，我不确定您为什么要这样做。我试图通过自定义`ModelMetaData`和过滤来完成（未完全测试）。

我们无法从模型绑定器或元数据提供程序中读取通过操作修饰的属性，因此我们需要一个过滤器。过滤器在 中添加了一些值，`HttpContext.Items`我们可以从自定义元数据提供程序（*http://stackoverflow.com/questions/6198155/asp-net-mvc-modelbinder-getting-action-method*）中检索它。

**筛选**

```
public class NoValidationAttribute : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
      // please see the edits in question to see the key generation
      filterContext.HttpContext.Items.Add("NoValidation", true);
    }
} 
```

**自定义模型元数据**

```
public class CustomModelMetaData : ModelMetadata
{
    public CustomModelMetaData(ModelMetadataProvider provider, Type containerType, Func<object> modelAccessor, Type modelType, string propertyName) :
      base(provider, containerType, modelAccessor, modelType, propertyName)
    {
    }

    public override System.Collections.Generic.IEnumerable<ModelValidator> GetValidators(ControllerContext context)
    {
      if (context.HttpContext.Items["NoValidation"] != null && bool.Parse(context.HttpContext.Items["NoValidation"].ToString()) == true)
        return Enumerable.Empty<ModelValidator>();

      return base.GetValidators(context);
    }
} 
```

**自定义 ModelMetaDataProvider**

```
public class CustomModelMetaDataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(System.Collections.Generic.IEnumerable<Attribute> attributes,
      Type containerType, Func<object> modelAccessor,
      Type modelType,
      string propertyName)
    {
      return new CustomModelMetaData(this, containerType, modelAccessor, modelType, 
         propertyName); 
    }
} 
```

**全球.asax.cs**

```
ModelMetadataProviders.Current = new CustomModelMetaDataProvider(); 
```

**用法**

```
[HttpGet]
[NoValidation]
public ActionResult Office(GestionOffice model)
{
   ...
} 
```

==================================**更新**================ ======================

**`CustomModelMetaData`而不是通过继承来创建 a`ModelMetadata`我认为继承自`DataAnnotationsModelMetadata`.**

```
public class CustomModelMetaData : DataAnnotationsModelMetadata
{
    public CustomModelMetaData(DataAnnotationsModelMetadataProvider provider, Type containerType,   
            Func<object> modelAccessor, Type modelType, string propertyName,            
            DisplayColumnAttribute displayColumnAttribute) :            
    base(provider, containerType, modelAccessor, modelType, propertyName, displayColumnAttribute)
    {
    }

    public override IEnumerable<ModelValidator> GetValidators(ControllerContext context)
    {
        var itemKey = this.CreateKey(context.RouteData);

        if (context.HttpContext.Items[itemKey] != null && 
           bool.Parse(context.HttpContext.Items[itemKey].ToString()) == true)
        {
             return Enumerable.Empty<ModelValidator>();
        }

        return base.GetValidators(context);
    }

    private string CreateKey(RouteData routeData)
    {
       var action = (routeData.Values["action"] ?? null).ToString().ToLower();
       var controller = (routeData.Values["controller"] ?? null).ToString().ToLower();
       return string.Format("NoValidation_{0}_{1}", controller, action);
    }
} 
```

**在`CustomModelMetaDataProvider`你必须设置一些属性。**

```
public class CustomModelMetaDataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(IEnumerable<Attribute> attributes,
      Type containerType, Func<object> modelAccessor, Type modelType, string propertyName)
    {
      var displayColumnAttribute = new List<Attribute>(attributes).OfType<DisplayColumnAttribute>().FirstOrDefault();

      var baseMetaData = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);

      // is there any other good strategy to copy the properties?
      return new CustomModelMetaData(this, containerType, modelAccessor, modelType,  propertyName, displayColumnAttribute)
      {
        TemplateHint = baseMetaData.TemplateHint,
        HideSurroundingHtml = baseMetaData.HideSurroundingHtml,
        DataTypeName = baseMetaData.DataTypeName,
        IsReadOnly = baseMetaData.IsReadOnly,
        NullDisplayText = baseMetaData.NullDisplayText,
        DisplayFormatString = baseMetaData.DisplayFormatString,
        ConvertEmptyStringToNull = baseMetaData.ConvertEmptyStringToNull,
        EditFormatString = baseMetaData.EditFormatString,
        ShowForDisplay = baseMetaData.ShowForDisplay,
        ShowForEdit = baseMetaData.ShowForEdit,
        Description = baseMetaData.Description,
        ShortDisplayName = baseMetaData.ShortDisplayName,
        Watermark = baseMetaData.Watermark,
        Order = baseMetaData.Order,
        DisplayName = baseMetaData.DisplayName,
        IsRequired = baseMetaData.IsRequired
      };
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:40:56.497

是的，您使用这样的`[ValidateInput(false)]`属性：

```
[ValidateInput(false)]
[HttpGet]
public ActionResult Office(GestionOffice model)
{
    model.Initialize();
    return View(model);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:51:50.927

验证发生在 POST 中，因此您必须删除`Model.IsValid`并添加`[ValidateInput(false)]`

```
[HttpPost]
[ValidateInput(false)]
[ActionName("Office")]
public ActionResult OfficePost(GestionOffice model)
{        
    model.Save();
    return RedirectToAction("List");
} 
```

现在帖子将成功，但如果您插入数据库，则必须小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T19:30:19.517

如果您想在生产代码中使用而不进行验证，则需要禁用客户端验证，因为在服务器端它将被禁用。

将 web.config 修改为休闲：

```
<appSettings>
    <add key="ClientValidationEnabled" value="false" />
</appSettings> 
```

# jquery - 鼠标悬停在 div 描述框上

> ID：11367854
> 
> 赞同：0
> 
> 时间：2012-07-06T18:37:26.437
> 
> 标签：jquery

因此，如果您访问 www.graysonearle.com/newtest，您将看到我的网站正在进行中。我正在使用一个 jQuery 脚本，当您将鼠标悬停在该框上时，该脚本会弹出项目描述。问题是有时描述会在 mouseOut 之后保留，即使您再次返回它们也是如此。而其他时候，描述只是没有弹出。如果您快速移动鼠标，则更容易破坏。这是jQuery：

```
$(window).load(function() {
    // For each instance of p.caption
    $("p.caption").each(function() {
        // needs a 1px bump
        $(this).children("span").css({
            "margin-left": "1px"
        });
        $(this)
        // Add the following CSS properties and values
        .css({
            // Height equal to the height of the image
            "height": $(this).children("img").height() + "px",
            // Width equal to the width of the image
            "width": $(this).children("img").width() + "px"
        })
        // Select the child "span" of this p.caption
        // Add the following CSS properties and values
        .children("span").css(
        // Width equal to p.caption
        // But subtract 20px to callibrate for the padding
        "width", $(this).width() - 10 + "px")
        // find the <big> tag if it exists
        // And then add the following div to break the line
        .find("i").before('<div class="clear"></div>');
        // When you hover over p.caption
        $("p.caption").hover(function() {
            // Fade in the child "span"
            $(this).children("span").stop().fadeTo(200, 1);
        }, function() {
            // Once you mouse off, fade it out
            $(this).children("span").fadeOut(200); // removed "stop()" before fadeout
        });
        // End $(this)
    });
});​ 
```

# android - jQuery没有在PhoneGap中解析JSON

> ID：11367857
> 
> 赞同：0
> 
> 时间：2012-07-06T18:37:32.063
> 
> 标签：android, jquery, cordova, jsonp

我正在尝试使用带有 jQ​​uery 的 JSONP 从服务器解析 JSON。下面的代码与 PhoneGap 一起使用，用于使用 HTML 创建 Android 应用程序。例如，当我在 Safari 中使用下面的代码时，它可以正常工作，但如果手机有间隙，它就无法正常工作！

有人知道发生这种情况的原因吗？

```
<!DOCTYPE HTML>
<html>
<head>
    <title>PortalARP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-1.8.0.js"></script>
    <script>

        $(document).ready(function () {
            $("#conteudoArea").append("<ul></ul>");
            $.ajax({
                url: 'http://portalarp.com.br/portal/produto/gerar_json?id_categoria_pai=56',
                dataType: 'jsonp',
                crossDomain: true,
                jsonp: false,
                jsonpCallback: 'jsonFlickrFeed',
                success: function (d) {
                    $('#title').text(d.id_produto);

                    var i, l = d.items.length, newLi, newItem;

                    $('<ul id="photoList"></ul>').appendTo('#main');

                    for (i = 0; i < l; i++) {
                        newLi = $('<li></li>');
                        newItem = d.items[i];

                        $('<h2>' + newItem.nm_produto + '</h2>').appendTo(newLi);
                        $('<h3>' + newItem.nm_marca + '</h3>').appendTo(newLi);

                        newLi.appendTo('#photoList');

                    }
                }
            });
        });

    </script>

</head>
<body>

    <div id="main"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:12:41.180

将网址列入白名单`res/xml/cordova.xml`，它应该可以工作。

```
<access origin="http://portalarp.com.br" /> 
```

有关更多详细信息，请查看文档：

[http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:58:50.773

[我会根据jquery 移动文档](http://jquerymobile.com/test/docs/pages/phonegap.html)检查您的设置中的 $.support.cors 和 $.mobile.allowCrossDomainPages 是否都是真的。

# java - GWT 编译器优化：它们何时安全？

> ID：11367859
> 
> 赞同：4
> 
> 时间：2012-07-06T18:37:46.473
> 
> 标签：java, gwt, optimization

何时可以安全/明智地添加以下编译器优化：

```
-XdisableClassMetaData
-XdisableCastChecking
compiler.stackMode
compiler.enum.obfuscate.names
CssResource.obfuscationPrefix
CompilerParameters.gwt.xml.* 
```

有些仅在开发（或生产）模式下有意义吗？是否存在任何安全漏洞？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T19:24:19.457

-XdisableClassMetaData - 当你不使用 Object.getClass() 方法时是安全的。

-XdisableCastChecking - 我个人永远不会使用它。但是，如果您根本不使用多态性，则可以尝试。

compiler.stackMode - prod 为“strip”，dev 为“emulated”

compiler.enum.obfuscate.names - 推荐在 prod 中使用。

CssResource.obfuscationPrefix - 当你需要部分混淆的 css 时使用

对于最后一个，您可以[在此处找到一些文档](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/core/CompilerParameters.gwt.xml)

只有 compiler.enum.obfuscate.names 会影响安全漏洞（因此在 prod 中将其设置为 true）。希望能帮助到你。

# cocos2d-iphone - 不知道这个错误代码是什么意思：“Apple LLVM Compiler 3.1 Error”，“clang failed with exit code 254”Cocos2D，Xcode 4.3.3

> ID：11367860
> 
> 赞同：0
> 
> 时间：2012-07-06T18:37:51.937
> 
> 标签：cocos2d-iphone, xcode4.3, clang

环顾四周，我找不到任何令人满意的答案来解决我的特定问题。在 SO 上找到了一些关于此错误代码的帖子，但他们主要讨论的是编译器在点符号和未分配标签方面存在问题，因此这些问题似乎不适用于此处。

在我的 HelloWorldLayer.m 文件中，我有一个方法可以将 CCSprites 添加到图层并将它们移动到屏幕上的某些位置。该方法工作正常——精灵被正确初始化和动画——当我移动每个精灵并单独设置我的 BOOL 时，如下所示：

```
[card1 moveToCard1Position];
[opponentCard1 moveToOpponentCard1Position];
[card2 moveToCard2Position];
[opponentCard2 moveToOpponentCard2Position];
[CCDelayTime actionWithDuration: kHoleCardTravelTime];

// BOOLs to determine if the card is in its proper place
card1ReachedPosition = YES;
card2ReachedPosition = YES;
opponentCard1ReachedPosition = YES;
opponentCard2ReachedPosition = YES; 
```

但是我需要在动画真正实时完成之前不要设置布尔值。因此，当我使用 CCSequence 将布尔值的设置延迟为 YES 时，直到动画完成后，如下所示：

```
[self runAction:[CCSequence actions:[CCDelayTime actionWithDuration:0.0], 
             [card1 moveToCard1Position], 
             [opponentCard1 moveToOpponentCard1Position], 
             [card2 moveToHoleCard2Position], 
             [opponentCard2 moveToOpponentCard2Position], 
             [CCDelayTime actionWithDuration:kCardTravelTime], 
             card1ReachedPosition = YES, 
             card2ReachedPosition = YES, 
             opponentCard1ReachedPosition = YES, 
             opponentCard2ReachedPosition = YES, 
             nil]]; 
```

我收到“clang 失败，退出代码 254”错误。完整的错误，为了彻底，我将在底部显示。我在 HelloWorldLayer.m 文件中的其他地方使用了 [self runAction:...] 就好了，但由于某种我无法弄清楚的原因，只有这种方法会引发 254 错误。我做错了什么？TIA

```
CompileC /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/Objects-normal/i386/HelloWorldLayer.o CardGame/HelloWorldLayer.m normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/Home/Development/zzzMyGames/CardGame
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch i386 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG -DCOCOS2D_DEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-conversion -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/CardGame-generated-files.hmap -I/Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/CardGame-own-target-headers.hmap -I/Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/CardGame-all-target-headers.hmap -iquote /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/CardGame-project-headers.hmap -I/Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Products/Debug-iphonesimulator/include -ICardGame/libs/kazmath/include -I/Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/DerivedSources/i386 -I/Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/DerivedSources -F/Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Products/Debug-iphonesimulator -include /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/PrecompiledHeaders/Prefix-ggqxnfadbzynyrexiqnutryhfhfk/Prefix.pch -MMD -MT dependencies -MF /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/Objects-normal/i386/HelloWorldLayer.d --serialize-diagnostics /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/Objects-normal/i386/HelloWorldLayer.dia -c /Users/Home/Development/zzzMyGames/CardGame/CardGame/HelloWorldLayer.m -o /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/Objects-normal/i386/HelloWorldLayer.o

0  clang             0x000000010149e422 _ZL15PrintStackTracePv + 34
1  clang             0x000000010149e8a9 _ZL13SignalHandleri + 553
2  libsystem_c.dylib 0x00007fff95754cfa _sigtramp + 26
3  libsystem_c.dylib 0x00007fff60172000 _sigtramp + 18446744072814187296
4  clang             0x0000000100d85de9 (anonymous namespace)::CGObjCCommonMac::EmitMessageSend(clang::CodeGen::CodeGenFunction&, clang::CodeGen::ReturnValueSlot, clang::QualType, llvm::Value*, llvm::Value*, clang::QualType, bool, clang::CodeGen::CallArgList const&, clang::ObjCMethodDecl const*, (anonymous namespace)::ObjCCommonTypesHelper const&) + 1385
5  clang             0x0000000100d88525 (anonymous namespace)::CGObjCNonFragileABIMac::GenerateMessageSend(clang::CodeGen::CodeGenFunction&, clang::CodeGen::ReturnValueSlot, clang::QualType, clang::Selector, llvm::Value*, clang::CodeGen::CallArgList const&, clang::ObjCInterfaceDecl const*, clang::ObjCMethodDecl const*) + 309
6  clang             0x0000000100d64074 clang::CodeGen::CodeGenFunction::EmitObjCMessageExpr(clang::ObjCMessageExpr const*, clang::CodeGen::ReturnValueSlot) + 1908
7  clang             0x00000001007110a5 clang::StmtVisitorBase<clang::make_ptr, (anonymous namespace)::ScalarExprEmitter, llvm::Value*>::Visit(clang::Stmt*) + 17349
8  clang             0x00000001008ec760 (anonymous namespace)::ScalarExprEmitter::VisitCastExpr(clang::CastExpr*) + 464
9  clang             0x000000010070fabb clang::StmtVisitorBase<clang::make_ptr, (anonymous namespace)::ScalarExprEmitter, llvm::Value*>::Visit(clang::Stmt*) + 11739
10 clang             0x000000010070ccc8 clang::CodeGen::CodeGenFunction::EmitScalarExpr(clang::Expr const*, bool) + 72
11 clang             0x00000001008ee819 clang::CodeGen::CodeGenFunction::EmitAnyExpr(clang::Expr const*, clang::CodeGen::AggValueSlot, bool) + 57
12 clang             0x00000001008ee715 clang::CodeGen::CodeGenFunction::EmitCallArg(clang::CodeGen::CallArgList&, clang::Expr const*, clang::QualType) + 1445
13 clang             0x0000000100d6b011 void clang::CodeGen::CodeGenFunction::EmitCallArgs<clang::ObjCMethodDecl>(clang::CodeGen::CallArgList&, clang::ObjCMethodDecl const*, clang::ConstExprIterator, clang::ConstExprIterator) + 97
14 clang             0x0000000100d63e78 clang::CodeGen::CodeGenFunction::EmitObjCMessageExpr(clang::ObjCMessageExpr const*, clang::CodeGen::ReturnValueSlot) + 1400
15 clang             0x00000001007110a5 clang::StmtVisitorBase<clang::make_ptr, (anonymous namespace)::ScalarExprEmitter, llvm::Value*>::Visit(clang::Stmt*) + 17349
16 clang             0x000000010070ccc8 clang::CodeGen::CodeGenFunction::EmitScalarExpr(clang::Expr const*, bool) + 72
17 clang             0x00000001008ee819 clang::CodeGen::CodeGenFunction::EmitAnyExpr(clang::Expr const*, clang::CodeGen::AggValueSlot, bool) + 57
18 clang             0x00000001008f1e09 clang::CodeGen::CodeGenFunction::EmitIgnoredExpr(clang::Expr const*) + 41
19 clang             0x000000010070c312 clang::CodeGen::CodeGenFunction::EmitStmt(clang::Stmt const*) + 242
20 clang             0x000000010070c8eb clang::CodeGen::CodeGenFunction::EmitCompoundStmt(clang::CompoundStmt const&, bool, clang::CodeGen::AggValueSlot) + 251
21 clang             0x000000010070c69a clang::CodeGen::CodeGenFunction::EmitSimpleStmt(clang::Stmt const*) + 154
22 clang             0x000000010070c240 clang::CodeGen::CodeGenFunction::EmitStmt(clang::Stmt const*) + 32
23 clang             0x0000000100d651ba clang::CodeGen::CodeGenFunction::GenerateObjCMethod(clang::ObjCMethodDecl const*) + 58
24 clang             0x000000010061b07c clang::CodeGen::CodeGenModule::EmitTopLevelDecl(clang::Decl*) + 876
25 clang             0x000000010061acef (anonymous namespace)::CodeGeneratorImpl::HandleTopLevelDecl(clang::DeclGroupRef) + 95
26 clang             0x000000010061ac51 clang::BackendConsumer::HandleTopLevelDecl(clang::DeclGroupRef) + 161
27 clang             0x00000001005e3092 clang::ParseAST(clang::Sema&, bool) + 306
28 clang             0x00000001005e1bd7 clang::CodeGenAction::ExecuteAction() + 855
29 clang             0x00000001005b413f clang::CompilerInstance::ExecuteAction(clang::FrontendAction&) + 879
30 clang             0x00000001005b2dcb clang::ExecuteCompilerInvocation(clang::CompilerInstance*) + 2683
31 clang             0x00000001005a55ce cc1_main(char const**, char const**, char const*, void*) + 5086
32 clang             0x000000010057fdd8 main + 648
33 clang             0x000000010057fb44 start + 52
Stack dump:
0\.  Program arguments: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -cc1 -triple i386-apple-macosx10.6.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name HelloWorldLayer.m -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -target-cpu yonah -target-linker-version 128.2 -g -coverage-file /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/Objects-normal/i386/HelloWorldLayer.o -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/3.1 -dependency-file /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/Objects-normal/i386/HelloWorldLayer.d -MT dependencies -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -iquote /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/CardGame-generated-files.hmap -iquote /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/CardGame-project-headers.hmap -include-pch /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/PrecompiledHeaders/Prefix-ggqxnfadbzynyrexiqnutryhfhfk/Prefix.pch.pth -D DEBUG -D COCOS2D_DEBUG=1 -D IBOutlet=__attribute__((iboutlet)) -D IBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName))) -D IBAction=void)__attribute__((ibaction) -D __IPHONE_OS_VERSION_MIN_REQUIRED=50100 -I /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/CardGame-own-target-headers.hmap -I /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/CardGame-all-target-headers.hmap -I /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Products/Debug-iphonesimulator/include -I CardGame/libs/kazmath/include -I /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/DerivedSources/i386 -I /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/DerivedSources -F/Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Products/Debug-iphonesimulator -fmodule-cache-path /var/folders/gl/wnr8s5t94vqfqf9s9bthyb200000gp/T/clang-module-cache -O0 -Wno-trigraphs -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -Wprotocol -Wdeprecated-declarations -Wno-conversion -Wno-sign-conversion -std=gnu99 -ferror-limit 19 -fmessage-length 0 -stack-protector 1 -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-exceptions -fexceptions -fpascal-strings -fdiagnostics-show-option -serialize-diagnostic-file /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/Objects-normal/i386/HelloWorldLayer.dia -o /Users/Home/Library/Developer/Xcode/DerivedData/CardGame-efaqdicwgomjmmefmvhiyaissfgj/Build/Intermediates/CardGame.build/Debug-iphonesimulator/CardGame.build/Objects-normal/i386/HelloWorldLayer.o -x objective-c /Users/Home/Development/zzzMyGames/CardGame/CardGame/HelloWorldLayer.m 
1\.  <eof> parser at end of file
2\.  /Users/Home/Development/zzzMyGames/CardGame/CardGame/HelloWorldLayer.m:52:1: LLVM IR generation of declaration 'HelloWorldLayer::scene'
3\.  /Users/Home/Development/zzzMyGames/CardGame/CardGame/HelloWorldLayer.m:339:22: LLVM IR generation of compound statement ('{}')
clang: error: unable to execute command: Segmentation fault: 11
clang: error: clang frontend command failed due to signal 2 (use -v to see invocation)
clang: note: diagnostic msg: Please submit a bug report to http://developer.apple.com/bugreporter/ and include command line arguments and all diagnostic information.
clang: note: diagnostic msg: Preprocessed source(s) and associated run script(s) are located at:
clang: note: diagnostic msg: /var/folders/gl/wnr8s5t94vqfqf9s9bthyb200000gp/T/HelloWorldLayer-GbrnJj.mi
clang: note: diagnostic msg: /var/folders/gl/wnr8s5t94vqfqf9s9bthyb200000gp/T/HelloWorldLayer-GbrnJj.sh
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 254 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:18:24.607

CCSequence 采用从 CCAction 派生的类对象列表。显然`card1ReachedPosition`不是一个 CCAction 类实例，它是一个 BOOL。从代码中很难判断，但`[card1 moveToCard1Position]`也可能不会返回 CCAction 类的实例。

您想要做的（除了不是大量嵌套的方法调用）是使用 CCCallFunc 或 CCCallBlock 操作分别为您设置布尔值，以中继对 moveToXXX 方法的调用。

# java - 了解 java.util.Scanner 对 InputStream 的影响

> ID：11367866
> 
> 赞同：0
> 
> 时间：2012-07-06T18:38:14.717
> 
> 标签：java, regex, java.util.scanner

希望能更清楚地了解 Scanner 的内部工作原理……我已经实现了没有 Scanner 的需要，但我只是想了解为什么这没有像我想象的那样工作。

上下文：我正在编写一个文本解析器，它需要定期从读取文本行（行模式）切换到从同一输入流中读取设定数量的字节（字节模式）。如果在输入流中看到 BYTE\n，则进入字节模式；后面应该有一个整数，指定要读取的字节数。在有效整数/字节序列后看到 ENDBYTE\n 时退出字节模式。

我尝试使用 Scanner 来实现此解析器，并使用分隔符“\n”以“行模式”读取。我认为如果我将分隔符切换到“.{1}”中流的正则表达式模式，它将开始一次给我一个字节，以便我可以在“原始模式”下处理数据（这是在在我意识到该方法实际上并不仅仅为您提供 InputStream 中的下一个字节之前，浪费了大量时间修补 Scanner.nextByte()。

我尝试将这个序列放入 Scanner 的 InputStream：

```
BYTE\n32\nNegative, I am a meat popsicle.\nENDBYTE\n 
```

解析“32\n”后，我尝试将分隔符更改为“.{1}”。如果我随后请求 next()，我得到“\n”，然后 Scanner 奇怪地报告它有更多令牌，但结果却是空的。如果我将分隔符保留为“\n”，我会正确地得到“否定，我是肉冰棒”。作为下一个令牌。

所以我假设：

1.  ".{1}" 不只匹配我想要的单个字符...不知道为什么会这样？
2.  Scanner 通过不断读取尽可能多的数据并抢先将数据解析为令牌来更改 InputStream。我倾向于相信这是真的，因为当我在 InputStream 上打印 available() 调用的结果时，在我第一次调用 next() 并将分隔符设置为 "\n 后，可用字节数变为零”。这意味着更改定界符中间处理对于 Scanner 来说非常令人困惑，并且看起来它的行为错误？

任何正则表达式/扫描仪专业知识将不胜感激，谢谢！

PS 我刚刚自己从 InputStream 中读取了单个字节，并在行模式下手动查找“\n”……不漂亮，但按我想要的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:42:12.300

正则表达式`".{1}"`（顺便说一下与 相同`"."`）与换行符**不匹配。**

要匹配*包括*换行符在内的任何字符，请打开正则表达式中的“点匹配换行符”开关：

```
(?s). 
```

### 已编辑

我建议*不要*使用分隔符。只需像这样使用输入：

```
while (scanner.hasNextLine()) {
    String line = scanner.nextLine();
    // do something with line
} 
```

# design-patterns - 命令模式不是依赖倒置原则的实现吗？

> ID：11367868
> 
> 赞同：0
> 
> 时间：2012-07-06T18:38:21.257
> 
> 标签：design-patterns, inversion-of-control, command-pattern, dependency-inversion

*命令模式*具有三个主要组件：*调用*者、*命令*和*接收者*。Client 向*Invoker提供调用**Receiver*`M`上 的特定方法所需的信息，而实际调用的是*Command*对象（由*Receiver*提供）。***`M`***

 ***a) 为了实现**CP**，我们必须将*Invoker 的*逻辑与命令的数量分离，这样当我们增加命令的数量时，*Invoker*类就不必改变。我们通过让*Command*对象和*Invoker*依赖于抽象（即接口）来做到这一点。

因此，**CP不只是****DIP**的特定实现吗？

b) 如果**CP**确实是**DIP的实现，那么****CP**与其他类型的**DIP**实现究竟有什么不同？也就是说，我们不能说所有其他的**DIP**实现也有*Invoker*对象（即更高级别的模块）、*Command*对象（即为更高级别的模块提供行为的依赖项），而 Receiver 将被视为依赖对象的任何方法（即较低级别的模块）调用？

谢谢你

**编辑：**

一个）

> 依赖对象将依赖项保持为一个字段，并将其用于所有后续方法调用。

如果依赖对象不将此依赖项保留为字段，因此它不会将其用于所有后续调用，而是始终接收新的依赖项对象，那么我们是否可以争辩说我们有一个**CP**而不是**DI**？

反之亦然——如果 Invoker 总是调用相同的命令对象，那么我们是否可以争辩说我们有**DI**而不是**CP**，而不管实际执行的工作命令对象是什么？

b）我理解你试图表达的观点，但我仍然在区分什么是行为和什么是命令时遇到了一些重大问题。在我看来，将命令传递给 Invoker 也可以解释为注入依赖对象完成其工作所需的行为。是真的那么明确还是更主观？因此，我们如何判断一个对象所做的工作是命令还是行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:19:59.800

命令模式不会向对象*注入任何内容。*它将命令*传递*给调用命令的方法（通常只调用一次）。

依赖注入*注入*一个*依赖*（即依赖对象完成其工作所需的另一个对象）。依赖对象将依赖项保持为一个字段，并将其用于所有后续方法调用。

如果你想打个比方，依赖注入就是给厨师一个烤箱，让他准备所有的菜。命令模式包括每次有人要菜时给他一碗食材准备。

编辑：

命令模式包括传递抽象类的某个接口的实现，该接口只定义了一个方法（`execute()`）。调用者在不知道它可以做什么或它的角色是什么的情况下调用这个命令。该模式的原理是能够传递命令接口的几种不同实现（例如，上、右、左）。调用者可能会存储这些实例以便稍后执行它们，或者存储它们以撤消它们。

依赖注入只是在依赖对象初始化时传递一个依赖。这种依赖关系提供了大量识别良好的方法，这些方法被依赖对象用作其自身业务逻辑的一部分。

两者都使用对象和调用方法，但目标却大不相同。

所以我对你的观点 a) 的回答是：是或否，这取决于。如果该对象是提供不同方法的通用对象，并且它不是仅具有一种方法的单个接口的许多实现之一，则依赖对象根据需要调用它，则它不构成命令。

b) 阅读[http://en.wikipedia.org/wiki/Command_pattern](http://en.wikipedia.org/wiki/Command_pattern)中的示例代码，它应该更清楚。***

# c# - 将 IList 存储在隔离存储中

> ID：11367875
> 
> 赞同：0
> 
> 时间：2012-07-06T18:38:47.730
> 
> 标签：c#, windows-phone-7, isolatedstorage, ilist

我有一个 IList 类，但是当我尝试将它们存储在 IsolatedStorage 中时，它只是说内置的序列化程序无法处理它，JSON.net 也不能​​。我已经把这个类放在下面了，有人能想出一种存储它的方法吗？

我得到的错误是；

> 无法序列化类型“System.Windows.UIElement”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。

```
IList<ScoreWatcher> RecentSessions = new List<ScoreWatcher>();
public class ScoreWatcher
{
    public ScoreWatcher() { }

    public string SessionName = "";
    public DateTime SessionCreationTime;
    public DateTime SessionModificationTime;

    public int Player1Total = 0;
    public int Player1ScoreRollover = 0;
    public int Player2Total = 0;
    public int Player2ScoreRollover = 0;

    public string Player1Name = "";
    public string Player2Name = "";

    public ListBox scoreListBox;

    public string GrabFriendlyGLobal()
    {
        UpdateModificationTime();
        return string.Format("{0}-{1}", Player1Total, Player2Total);
    }

    public void UpdateModificationTime()
    {
        SessionModificationTime = DateTime.Now;
    }

    public void UpdateScoringSystem()
    {
        UpdateModificationTime();

        Player1Total = 0;
        Player1ScoreRollover = 0;
        Player2Total = 0;
        Player2ScoreRollover = 0;

        foreach (Match snookerMatch in matches)
        {
            if (snookerMatch.Player1Score > snookerMatch.Player2Score)
                Player1Total++;
            else if (snookerMatch.Player1Score == snookerMatch.Player2Score)
            {
                Player1Total++;
                Player2Total++;
            }
            else
                Player2Total++;

            // House cleaning
            Player1ScoreRollover += snookerMatch.Player1Score;
            Player2ScoreRollover += snookerMatch.Player2Score;
        }

    }
    public void LoadMatchesIntoListbox()
    {
        UpdateModificationTime();

        scoreListBox.Items.Clear();

        foreach (Match snookerMatch in matches)
            scoreListBox.Items.Add(new UserControls.GameHistoryTile(snookerMatch.GlobalScore, snookerMatch.Player1Score, snookerMatch.Player2Score));
    }

    public List<Match> matches = new List<Match>();
    public class Match
    {
        public int Player1Score = 0;
        public int Player2Score = 0;

        public string GlobalScore = "0-0";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:42:51.263

您只能序列化具体类

理想情况下，您需要更改您的实现以提供序列化程序的具体类型 - 您需要将其作为 IList 吗？

编辑：啊，我看到你没有序列化一个接口 - 基本上你在你的类上有一个 UIElement 的引用。您需要指定它被 XmlSerializer 忽略 - 这些事件处理程序是否由表单处理？

编辑 2：仅供参考，如果您想这样做，您可以使用 XmlIgnore 属性或 NonSerialized，具体取决于您是使用 BinaryFormatter 还是 XmlSerializer 进行序列化

例如

```
[XmlIgnore]
public int SomeProperty { get; set; } 
```

# c# - 使用 Jira SOAP API 更新基本字段

> ID：11367876
> 
> 赞同：0
> 
> 时间：2012-07-06T18:38:50.880
> 
> 标签：c#, api, soap, jira

我正在使用 Jira SOAP API，并且我已经设法从问题中读取并创建新问题。但是，我无法更新已存在问题的字段。我对字段进行了更改，但在程序停止运行后它们不会持续存在。

我知道要使用的方法可能是 updateIssue(...) 方法，但我无法尝试使用它，因为我不知道为最后一个参数传递什么。我查看了文档，但不明白 RemoteFieldValue[] 是什么。

有人可以告诉我如何创建一个可以传递给 updateIssue 方法的 RemoteFieldValue[] 以更新摘要、描述等基本字段吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:16:28.483

要使用 Jira SOAP 更新基本字段，您需要使用 updateIssue()（正如您所怀疑的那样）。

```
updateIssue(java.lang.String token, java.lang.String issueKey, RemoteFieldValue[] actionParams) 
```

RemoteFieldValue 构造函数有两个参数：fieldID 和 newFieldValues

```
public RemoteFieldValue(java.lang.String fieldID,
                        java.lang.String[] newFieldValues) 
```

其中标准字段的 fieldID 是字段的名称（“摘要”、“描述”等）

这是一个例子：

```
List<RemoteFieldValue> actionParams = new List<RemoteFieldValue>();

RemoteFieldValue description = new RemoteFieldValue { 
    id = "description", 
    values = new string[] { "here is new description" } };

actionParams.Add(description);

jiraSoapService.updateIssue(token, issueKey, actionParams.ToArray()); 
```

# objective-c - 使用 API 时 Xcode 中的 Objective-C 链接器问题

> ID：11367883
> 
> 赞同：0
> 
> 时间：2012-07-06T18:39:17.263
> 
> 标签：objective-c, xcode, linker

首先，我在将 IQ 引擎的 VisionIQ ios-sdk 源代码添加到我的项目路径时收到错误，因此我根据在线 Objective-C/iOS 论坛将 Objective-C 自动引用计数设置为“否”。这消除了这些错误。

之后，我开始收到“链接器命令失败，退出代码为 1”的错误，以及有关链接器的警告。有关完整的措辞，请参见下文。

```
 ld: warning: ignoring file /Users/steve_markey_99/Desktop/iqengines/IQEnginesSDK/Local/libIQEnginesLocal.a, missing required architecture i386 in file

ld: duplicate symbol _main in /Users/steve_markey_99/Library/Developer/Xcode/DerivedData/Appnosis5-aavlzfkfrroooycvukmcvhdhccik/Build/Intermediates/Appnosis5.build/Debug-iphonesimulator/Appnosis5.build/Objects-normal/i386/main-5EBE64A76029E73E.o and /Users/steve_markey_99/Library/Developer/Xcode/DerivedData/Appnosis5-aavlzfkfrroooycvukmcvhdhccik/Build/Intermediates/Appnosis5.build/Debug-iphonesimulator/Appnosis5.build/Objects-normal/i386/main-FE71900E2479E387.o for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我的系统信息：

Apple LLVM 编译器 3.1（更改为 LLVM GCC 4.2 时出现更多错误）

Xcode 4.3.3

MacBook OS X 10.7.4

IQ 引擎 VisionIQ ios-sdk（2012 年 7 月 5 日下载）

iOS SDK 5.1

链接时间优化 = “否”

有一个建议我去：“为项目中包含的静态库构建设置，确保禁用链接产品（.a 文件）的剥离或设置为仅剥离调试符号。”

我在这里看不到要更改的参数/参数？这是一个准确的解决方案吗？如果是这样，我该怎么做？

仅供参考，我已经联系了 IQ Engines 支持人员。在我等待的时候在这里寻找第二个意见。

PS 我没有看到任何来自 IQ Engines 的文档说 API 不在 i386 芯片组上运行。不过，我的蜘蛛侠常识说这就是问题所在……想法？

非常感谢！

史蒂夫-o

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:48:54.597

> ld：重复符号_main

你确定你没有包含另一个源文件包含

```
int main(int argc, char** argv) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:17:22.183

很多时候，您收到 i386 链接器错误是因为您没有包含或错误地包含必要的框架/库。我对 VisionIQ 和所需库的经验为零，因此除了尝试解释错误消息之外，我无能为力。您应该尝试开始一个新项目，看看是否可以重新包含他们的库，然后构建项目。

此外，正如 Martin 和 Dustin 所提到的，关于重复的主要符号的第二个错误值得研究。

# django-admin - django 教程：http://localhost:8000/admin/

> ID：11367884
> 
> 赞同：0
> 
> 时间：2012-07-06T18:39:24.647
> 
> 标签：django-admin

我正在学习 django 框架，并且正在使用远程服务器（alwaysdata.net）。

我没有找到应该放什么网址而不是`http://localhost:8000/admin/`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:32:59.333

你可以试试**myaccount.alwaysdata.net**。

# sql-server - 如何使用 T-SQL 或 sys 视图获取 SQL Server 登录审核设置

> ID：11367886
> 
> 赞同：4
> 
> 时间：2012-07-06T18:39:29.570
> 
> 标签：sql-server, properties, login, audit

在 SSMS > 服务器属性 > 安全页面中，我可以查看/将“登录审核”更改为“无、仅失败、仅成功...”有没有办法使用 TSQL/系统目录/视图/获取属性值车管所？我想将其合并到脚本中以生成报告。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T19:02:37.190

此信息实际上存储在注册表中，因此 AFAIK 您需要使用未记录的 proc 来获取它：

```
declare @AuditLevel int
exec master..xp_instance_regread 
    @rootkey='HKEY_LOCAL_MACHINE',
    @key='SOFTWARE\Microsoft\MSSQLServer\MSSQLServer',
    @value_name='AuditLevel',
    @value=@AuditLevel output
select @AuditLevel 
```

以下是返回值的关键：
无 = 0
仅成功登录 = 1
仅失败登录 = 2
失败和成功登录 = 3

我将此信息归功于[Tim Radney](http://timradney.com/2012/01/03/sql-server-login-auditing/)和[SSC 的 Jason L。](http://www.sqlservercentral.com/Forums/Topic698590-146-2.aspx#bm1271346)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T18:48:12.313

您需要将 SQL 安装为名称实例而不是默认实例的路径中的实例名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-18T15:59:33.597

你也可以使用

```
execute xp_loginconfig 'audit level'; 
```

这似乎是 Microsoft 的首选方法，但由于它是一个存储过程，因此在另一个查询中使用输出具有从存储过程获取数据的所有常见问题。

# javascript - 这些附加事件的方式有什么区别？

> ID：11367887
> 
> 赞同：3
> 
> 时间：2012-07-06T18:39:29.797
> 
> 标签：javascript, javascript-events

```
A) <div id="myDiv" onclick="MyFunc()"></div>

B) document.getElementById("myDiv").onclick = MyFunc;

C) document.getElementById("myDiv").addEventListener("click", MyFunc, false) 
```

现在，这三种将事件附加到 DOM 元素的方式之间有什么区别（忽略 C 不能在 IE 上工作的事实）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:49:25.153

**方法 A 和 B**

这些被称为 DOM 零级事件，有点老派。方法 A 在您的 HTML 中内联声明它（错误），而方法 B 在您的 JS 中做同样的事情，但集中在您的 JS 中。

使用方法 A，属性值是一个有效的 JS 字符串，在触发时将被评估（也不好）。由于绑定事件的位置，这意味着此字符串中引用的任何函数都必须是全局的（或全局可访问的方法）。使用方法 B，事件在您的 JS 中集中绑定，而不是内联。

除了过时和简化之外，它们的主要警告是每个元素只能绑定一种事件。如果您尝试使用此机制将两个单击事件处理程序绑定到同一个事件处理程序，则第一个将被遗忘。这是有道理的，因为您只是在覆盖元素属性。

**方法 C**

`addEventListener`是附加事件的标准。很长一段时间，IE 都不支持这种方式，而倾向于使用它的等效`attachEvent`方法。它们之间的一些区别包括：

*   `attachEvent`不允许捕获事件（参数 3`addEventListener`允许这样做）
*   with `attachEvent`，事件对象（即存储有关触发事件的信息的对象）在 上访问`window.event`，而 with`addEventListener`它作为回调的唯一参数转发
*   with `attachEvent`, 事件名称必须以 为前缀`on`，例如`onClick`. `addEventListener`只需要`click`
*   with `addEventListener`，`this`回调中的关键字指向触发事件的元素。您必须通过从事件 ( ) 对象`attachEvent`中的属性中提取元素来自己破译这一点`window.event`

IE9上线并支持`addEventListener`.

# python - 负面清单索引？

> ID：11367902
> 
> 赞同：109
> 
> 时间：2012-07-06T18:41:01.223
> 
> 标签：python, list

我正在尝试理解以下代码：

```
# node list
n = []
for i in xrange(1, numnodes + 1):
    tmp = session.newobject();
    n.append(tmp)
link(n[0], n[-1]) 
```

具体来说，我不明白索引`-1`指的是什么。如果索引`0`指的是第一个元素，那么`-1`指的是什么？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-07-06T18:43:40.807

负数意味着你从右边而不是左边数。所以，`list[-1]`指的是最后一个元素，`list[-2]`是倒数第二个，以此类推。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-06T18:43:52.363

-x 的列表索引表示列表末尾的第 x 项，因此`n[-1]`表示列表中的最后一项`n`。任何好的 Python 教程都应该告诉你这一点。

这是一个不寻常的约定，除了 Python 之外只有少数其他语言采用，但它非常有用；在任何其他语言中，您都会花费大量时间`n[n.length-1]`来访问列表的最后一项。

# javascript - JQuery动画未针对动态更改的元素运行

> ID：11367903
> 
> 赞同：2
> 
> 时间：2012-07-06T18:41:11.760
> 
> 标签：javascript, events, jquery-animate, jquery

好吧，我已经束手无策了。这是我的代码，或者至少是我认为导致问题/与我的问题相关的部分。

```
//clicking back contacts scenario
$("#feat-back-arrow").live("click", function () {
    contractFeature();
});

//undo expand function for feature
//
//
function contractFeature() {
    $(feat_expanded_div).removeClass("expanded-feat");
    //actual slow animation
    var d = {};
    var speed = 400;
    d.width = feat_orig_width;
    d.height = feat_orig_height;
    d.left = feat_offset_left;
    d.top = feat_offset_top;
    d.marginRight = "0px"
    $(feat_expanded_div).animate(d, speed);
    showFeatures();
    returnFeatureHeader(feat_expanded_div);
    ExpandFeature = false;
} 
```

我动态生成一个按钮`#feat-back-arrow`，当单击它时，会调用`contractFeature()`，并且具体来说，会运行一个动画事件。此事件不起作用`feat_expanded_div`（我在上面将其定义为全局变量等，并在 中的其他函数中使用它`contractFeature()`）。什么都没有发生。

现在，如果我将代码的一部分更改为：

```
var d = {};
        var speed = 400;
        d.width = feat_orig_width;
        d.height = feat_orig_height;
        d.left = feat_offset_left;
        d.top = feat_offset_top;
        d.marginRight = "0px"
        $("div").animate(d, speed); 
```

更改它使其仅在所有 div 上运行，它工作正常。我知道问题不在于定义`feat_expanded_div`，因为正如我所说，该函数`returnFeatureHeader()`将它作为参数携带就可以了。

我认为这`.live`与带有动画事件的事件有关，但从字面上看，现在的任何见解都会非常有帮助。=)

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-25T21:20:51.587

如果 feat_expanded_div 是一个 jquery 对象

（像这样声明.. var feat_expanded_div = $("blahblah element"); ）

那么你不应该将它包装在另一个 $() 中，换句话说就是这样做

feat_expanded_div.animate(d, speed);

# domain-driven-design - RavenDB 领域模型

> ID：11367907
> 
> 赞同：1
> 
> 时间：2012-07-06T18:41:21.787
> 
> 标签：domain-driven-design, ravendb

我正在构建我的第一个小型 RavenDB 应用程序，我想知道在构建域模型时我是否正确地处理了事情。

我有一个国家列表，我想在我的模型中的多个地方使用这些国家/地区。通常在过去，我会创建一个数据库表来存储国家和国家对象，看起来有点像这样：

```
public class Country{
    public int Id {get;set;}
    public string CountryName {get;set;}
} 
```

当我去使用 country 类时，我会在另一个对象中保存它的一个实例，例如：

```
public class Shop{
    public int Id {get;set;}
    public string Name {get;set;}
    public Country InCountry {get;set;}
} 
```

或者

```
public class Customer{
    public int Id {get;set;}
    public string Surname {get;set;}
    public Country CountryOfResidence {get;set;}
} 
```

等等等等。我认为我现在应该做的是将国家的 Id 存储在`Shop`and`Customer`类中是否正确，所以它们现在看起来像这样：

```
public class Shop{
    public int Id {get;set;}
    public string Name {get;set;}
    public int CountryId {get;set;}
}

public class Customer{
    public int Id {get;set;}
    public string Surname {get;set;}
    public int CountryOfResidenceId {get;set;}
} 
```

当我从数据库中提取这些内容时，我可以使用 Raven API 的包含功能来获取相关的国家/地区对象，尽管它位于单独的对象中，例如我不能这样做`myCustomer.Country.Name`。

显然这是一个非常人为的例子，但我真的只是想在继续这条路线之前检查我是否完全没有吠叫错误的树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:15:27.080

我还没有正确使用文档数据库（还），但我对您的问题的看法是：

*   您不应该为了满足持久性实现的需要而弯曲您的域模型，但是如果有机会让您的聚合设计完全持久化无知，我会认为它会是在使用文档数据库时。
*   如果国家/地区对象仅包含名称，那么它很可能是[值对象](http://devlicio.us/blogs/casey/archive/2009/02/13/ddd-entities-and-value-objects.aspx)，甚至不需要 ID。值对象是不可变的，因此如果商店的国家/地区发生变化，您只需替换整个对象。无需引用 ID，因为多个聚合/实体引用相同的值并不重要。
*   关于子实体：它们仅在聚合范围内起作用，这意味着您不应该在多个聚合中存在相同的实体。所以我想再次存储整个对象而不是对 ID 的引用。
*   引用其他聚合是不同的。这是您要通过 ID 引用的位置。这篇[文章](http://dddcommunity.org/sites/default/files/pdf_articles/Vernon_2011_2.pdf)解释了原因。

# spring-mvc - 我们如何在 Jasper Reports 中访问 bean 的参数？

> ID：11367909
> 
> 赞同：3
> 
> 时间：2012-07-06T18:41:27.923
> 
> 标签：spring-mvc, jasper-reports

我们如何在 Jasper Reports 中访问 bean 的参数？

我必须在 Jasper Reports 中显示模型（不是集合）的数据。

我将模型作为地图中的参数传递给 Jasper 报告。

```
Map<String,Object> params = new HashMap<String,Object>();
params.put("object", object); 
```

现在这个对象有我需要在报表标题部分显示其数据的字段。

就像我们在 jsp 中所做的那样`${object.name}, ${object.phone}`，我们如何在 JasperReports 中实现这一点？

我试过做`$P{object.name}`，但它不起作用。

谁能让我知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T20:34:20.547

有几个步骤可以做到这一点。

1)**定义您的参数：** 这将是参数类型的完整包名和类名。就像是：

```
<parameter name="object" class="com.mystuff.User"/> 
```

2）**为您想要的值调用getter方法：** 将文本字段添加到适当的字段。如果我想在我的 User 类中使用该方法的值，`getId()`我的文本字段将如下所示：

```
<textField>
    <reportElement uuid="09bf47a8-8fc7-45c5-911a-c79c3d405ada" x="205" y="22" width="100" height="20"/>
    <textElement/>
    <textFieldExpression><![CDATA[$P{parameter1}.getId()]]></textFieldExpression>
</textField> 
```

3)**在 iReport 中设置类路径：** 如果您使用 iReport 来设计您的报告，您需要告诉它 com.mystuff.User 类的编译版本所在的位置。如果您在 Eclipse 中，您可以将其指向项目中的 bin 文件夹，或者如果您有一个已编译项目的 jar，您可以将其指向该文件夹。类路径设置位于`Tools -> Options -> Classpath Tab`.

# javascript - Javascript appendchild 不包括 Body/Head 中的元素

> ID：11367916
> 
> 赞同：3
> 
> 时间：2012-07-06T18:42:14.227
> 
> 标签：javascript

我正在使用代码使用 javascript 文件将 javascript 添加到我的页面。

我的代码是：

```
 alert("works");

   addScript('http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
   addScript('js/pdttrack/jquery.titlealert.js');
   addScript('js/pdttrack/jquery.msgbox.min.js');

  function addScript(filename) {
      var tagPosition = document.getElementsByTagName('body');
      var scriptElement = document.createElement('script');
      scriptElement.setAttribute('type', 'text/javascript');
      scriptElement.setAttribute('src', filename);
      tagPosition.appendChild(scriptElement);
      alert("added "+ scriptElement);
  } 
```

...但最后一个警报没有触发..似乎

```
tagPosition.appendChild(scriptElement); 
```

不是解雇休息都是..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:44:57.883

尝试改变：

```
var tagPosition = document.getElementsByTagName('body'); 
```

到：

```
var tagPosition = document.getElementsByTagName('body')[0]; 
```

由于`getElementsByTagName`返回`NodeList`which is `Array`-like 并且您需要指定`index/key`数组。

**您也可以简单地执行以下操作：**

```
var tagPosition = document.body; 
```

**在 MDN 上了解更多信息：**

*   [https://developer.mozilla.org/en/DOM/element.getElementsByTagName](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T18:44:57.687

`getElementsByTagName`返回具有给定标签名称的元素*列表*。该列表没有名为 的方法`appendChild`。你想抓住*第*一个并对其进行操作：

```
document.getElementsByTagName('body')[0] 
```

更多信息：

*   [https://developer.mozilla.org/en/DOM/element.getElementsByTagName](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)

# java - 通过串口发送xml消息

> ID：11367918
> 
> 赞同：1
> 
> 时间：2012-07-06T18:42:19.350
> 
> 标签：java, c, xml, serial-port

有没有办法通过xml消息与串口通信？我的意思是我想从高级（java）发送/接收一个结构化数据包，由嵌入式设备（C）解析。有没有办法做到这一点？如果 xml 消息传递不可能通过串行端口发送结构化数据包的任何其他替代方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-24T08:35:38.407

请查看 SLIP 和 SLIPMUX 以通过串行线路发送面向数据包的协议（基本上是 XML 文件）。

这个问题的更多细节：[通过串行通信java发送数据包](https://stackoverflow.com/questions/28467950/sending-packets-over-serial-comms-java/41823403#41823403)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:45:05.840

串行端口只是您可用的传输方式。理论上，您可以通过串行端口运行几乎可以通过其他通信方式运行的任何协议。从理论上讲，您甚至可以[在邦戈鼓上运行 TCP/IP](http://slashdot.org/story/03/09/27/175242/tcpip-over-bongo-drums)。

如果嵌入式设备支持它，您可以通过串行端口运行 TCP/IP，并通过基于 TCP/IP 的协议传递您的 XML 结构。

[linux环境下串口数据转TCP/IP](https://stackoverflow.com/questions/484740/converting-serial-port-data-to-tcp-ip-in-a-linux-environment)

即使嵌入式设备无法运行 TCP/IP 之类的协议，您仍然可以通过串行端口传输 XML 消息并在 C 程序中解释它们。

# java - 为什么有些东西不能在上面运行？

> ID：11367920
> 
> 赞同：2
> 
> 时间：2012-07-06T18:42:30.080
> 
> 标签：java, android

为什么某些 Java 代码在打包为 APK 并部署到 Android 设备时无法运行/工作？像 Google Guice、Apache Camel 和许多其他项目。这不就是普通的 ole' Java 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:46:22.940

不会。有很多自定义库和框架可以帮助管理应用程序的生命周期。

我不确定 Camel 和 Guice 到底是什么。但是，（如果我错了，请有人纠正我）是 Android 框架。操作系统有安排要运行的东西的方法。这就是您的应用程序的整个生命周期。如果你刚开始运行纯 java 代码，操作系统的钩子在哪里？它需要一些东西来控制。我想理论上你的代码可以在它的 DM 中愉快地运行，但我怀疑它不会很好地与任何东西一起玩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:13:34.093

让我扩展弗兰克的回答。如果您将发动机从柴油中取出并放入普通汽车中；它会运行吗？它们都是引擎。

简短的回答：Android 想要安全。它不喜欢随意执行代码。为了运行 Java 代码，它需要一个包装器。该包装器是 APK，在某种程度上是 android 清单。一旦 Android 看到这些东西，它就知道它在运行什么以及如何运行它。让我们回到我对标准汽车中的柴油发动机的类比。可以做到这一点，但是您必须进行一些修改，以便汽车（Android）知道如何处理发动机（柴油发动机）。

Android 运行 Linux 的核心；在您的思维模式下，您应该能够运行 linux 原生应用程序吧？你可以看到我要去哪里。

更简短的回答：在许多方面，Android 根本不是 Java。它是它自己独特的语言，有警告和怪癖，但语法相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T19:15:23.843

“Plain ole' Java”或“100% pure Java”实际上并不存在于语言规范之外。您正在处理完全不同的虚拟机模型和不同的类库。 [Dalvik VM](http://en.wikipedia.org/wiki/Dalvik_%28software%29)的实现并不是为了与桌面 JVM 实现（Sun/Oracle、OpenJDK 等）兼容。它甚至不直接运行 Java 字节码；它被编译成特定于 Dalvik 的指令集，并以其他方式进行修改，以尝试创建更小的可执行包并在通常资源受限的移动平台上运行良好。

# python - 用于 Python 2.7 的 Python 图像库 Mac OSX？

> ID：11367921
> 
> 赞同：0
> 
> 时间：2012-07-06T18:42:34.803
> 
> 标签：python, macos, image, osx-lion, python-imaging-library

> **可能重复：**
> [如何在 mac os x 10.7.2 Lion 上安装 PIL](https://stackoverflow.com/questions/9070074/how-to-install-pil-on-mac-os-x-10-7-2-lion)

如何获得适用于 Python 2.7 的 Mac OSX 的 PIL？如果没有，是否还有其他同样强大的库？

# python - 如何通过 python 使用 ActiveX Conrtols 来控制德州仪器 DDC4100 数字控制器？

> ID：11367925
> 
> 赞同：1
> 
> 时间：2012-07-06T18:42:55.480
> 
> 标签：python, activex

我的任务是弄清楚如何使用 python 与 DDC4100 数字控制器进行通信。DDC4100 是 DLP Discovery 4100 开发套件的一个组件。如果你对那是什么感到好奇，你可以点击[这里。](http://www.ti.com/tool/dlpd4x00kit)

我一直在使用 PythonWin 和 pywin32 包来尝试与控制器进行通信。

我想使用早期绑定自动化，所以我使用 makepy 为 DDC4100 ActiveX 控制模块生成一个包装器。

```
# -*- coding: mbcs -*-
# Created by makepy.py version 0.5.01
# By python version 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)]
# From type library 'DDC4100.tlb'
# On Fri Jul 06 10:52:42 2012
'DDC4100 ActiveX Control module'
makepy_version = '0.5.01'
python_version = 0x20703f0

import win32com.client.CLSIDToClass, pythoncom, pywintypes
import win32com.client.util
from pywintypes import IID
from win32com.client import Dispatch

# The following 3 lines may need tweaking for the particular server
# Candidates are pythoncom.Missing, .Empty and .ArgNotFound
defaultNamedOptArg=pythoncom.Empty
defaultNamedNotOptArg=pythoncom.Empty
defaultUnnamedArg=pythoncom.Empty

CLSID = IID('{4AB30830-EFC0-496D-8D38-ACFE2518ECEB}')
MajorVersion = 1
MinorVersion = 0
LibraryFlags = 10
LCID = 0x0

from win32com.client import DispatchBaseClass
class _DDDC4100(DispatchBaseClass):
    'Dispatch interface for DDC4100 Control'
    CLSID = IID('{C4374661-BB24-410F-9BEB-5DED735F4985}')
    coclass_clsid = IID('{5C75C113-9AFC-42AC-8CED-1ABFE27763B5}')

    def AboutBox(self):
        return self._oleobj_.InvokeTypes(-552, LCID, 1, (24, 0), (),)

    def AllowMessages(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(11, LCID, 1, (2, 0), ((2, 0),),value
            )

    def Clear(self, BlockNum=defaultNamedNotOptArg, DoReset=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(3, LCID, 1, (2, 0), ((2, 0), (2, 0)),BlockNum
            , DoReset)

    def ConnectDevice(self, DeviceNum=defaultNamedNotOptArg, SrcFile=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(14, LCID, 1, (2, 0), ((2, 0), (8, 0)),DeviceNum
            , SrcFile)

    def ConvertImage(self, SrcFile=defaultNamedNotOptArg, DestFile=defaultNamedNotOptArg, MirrorImage=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(4, LCID, 1, (2, 0), ((8, 0), (8, 0), (2, 0)),SrcFile
            , DestFile, MirrorImage)

    def DownloadAppsFPGACode(self, FileName=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(12, LCID, 1, (2, 0), ((8, 0),),FileName
            )

    def FileToFrameBuffer(self, ImageFile=defaultNamedNotOptArg, MirrorImage=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(6, LCID, 1, (2, 0), ((8, 0), (2, 0)),ImageFile
            , MirrorImage)

    def FloatMirrors(self):
        return self._oleobj_.InvokeTypes(5, LCID, 1, (2, 0), (),)

    def GetActiveXRev(self):
        return self._oleobj_.InvokeTypes(13, LCID, 1, (3, 0), (),)

    def GetBlkAd(self):
        return self._oleobj_.InvokeTypes(22, LCID, 1, (2, 0), (),)

    def GetBlkMd(self):
        return self._oleobj_.InvokeTypes(20, LCID, 1, (2, 0), (),)

    def GetCOMPDATA(self):
        return self._oleobj_.InvokeTypes(32, LCID, 1, (2, 0), (),)

    def GetDDCVERSION(self):
        return self._oleobj_.InvokeTypes(2, LCID, 1, (2, 0), (),)

    def GetDLLRev(self):
        return self._oleobj_.InvokeTypes(17, LCID, 1, (3, 0), (),)

    def GetDMDTYPE(self):
        return self._oleobj_.InvokeTypes(1, LCID, 1, (2, 0), (),)

    def GetDriverRev(self):
        return self._oleobj_.InvokeTypes(15, LCID, 1, (3, 0), (),)

    def GetEXTRESETENBL(self):
        return self._oleobj_.InvokeTypes(40, LCID, 1, (2, 0), (),)

    def GetFPGARev(self):
        return self._oleobj_.InvokeTypes(47, LCID, 1, (3, 0), (),)

    def GetFirmwareRev(self):
        return self._oleobj_.InvokeTypes(16, LCID, 1, (2, 0), (),)

    def GetGPIO(self):
        return self._oleobj_.InvokeTypes(42, LCID, 1, (2, 0), (),)

    def GetNSFLIP(self):
        return self._oleobj_.InvokeTypes(34, LCID, 1, (2, 0), (),)

    def GetNumDevices(self):
        return self._oleobj_.InvokeTypes(46, LCID, 1, (2, 0), (),)

    def GetPWRFLOAT(self):
        return self._oleobj_.InvokeTypes(38, LCID, 1, (2, 0), (),)

    def GetRST2BLKZ(self):
        return self._oleobj_.InvokeTypes(24, LCID, 1, (2, 0), (),)

    def GetResetComplete(self, waittime=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(49, LCID, 1, (2, 0), ((3, 0),),waittime
            )

    def GetRowAddr(self):
        return self._oleobj_.InvokeTypes(28, LCID, 1, (2, 0), (),)

    def GetRowMd(self):
        return self._oleobj_.InvokeTypes(26, LCID, 1, (2, 0), (),)

    def GetSTEPVCC(self):
        return self._oleobj_.InvokeTypes(30, LCID, 1, (2, 0), (),)

    def GetSpeedMode(self):
        return self._oleobj_.InvokeTypes(18, LCID, 1, (2, 0), (),)

    def GetWDT(self):
        return self._oleobj_.InvokeTypes(36, LCID, 1, (2, 0), (),)

    def IsDeviceAttached(self):
        return self._oleobj_.InvokeTypes(43, LCID, 1, (11, 0), (),)

    def LoadControl(self):
        return self._oleobj_.InvokeTypes(45, LCID, 1, (2, 0), (),)

    def LoadData(self, data=defaultNamedNotOptArg, length=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(44, LCID, 1, (2, 0), ((16386, 0), (2, 0)),data
            , length)

    def LoadImageFileToBuffer(self, FileName=defaultNamedNotOptArg, ImageBufferPtr=defaultNamedNotOptArg, MirrorImage=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(9, LCID, 1, (2, 0), ((8, 0), (16386, 0), (2, 0)),FileName
            , ImageBufferPtr, MirrorImage)

    def LoadToDMD(self, BlockNum=defaultNamedNotOptArg, DoReset=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(7, LCID, 1, (2, 0), ((2, 0), (2, 0)),BlockNum
            , DoReset)

    def MemToFrameBuffer(self, ImageBufferPtr=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(8, LCID, 1, (2, 0), ((16386, 0),),ImageBufferPtr
            )

    def Reset(self, BlockNum=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(10, LCID, 1, (2, 0), ((2, 0),),BlockNum
            )

    def SetBlkAd(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(21, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetBlkMd(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(19, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetCOMPDATA(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(31, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetConversionThreshold(self, threshold=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(48, LCID, 1, (2, 0), ((2, 0),),threshold
            )

    def SetEXTRESETENBL(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(39, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetGPIO(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(41, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetNSFLIP(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(33, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetPWRFLOAT(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(37, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetRST2BLKZ(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(23, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetRowAddr(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(27, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetRowMd(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(25, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetSTEPVCC(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(29, LCID, 1, (2, 0), ((2, 0),),value
            )

    def SetWDT(self, value=defaultNamedNotOptArg):
        return self._oleobj_.InvokeTypes(35, LCID, 1, (2, 0), ((2, 0),),value
            )

    _prop_map_get_ = {
    }
    _prop_map_put_ = {
    }

class _DDDC4100Events:
    'Event interface for DDC4100 Control'
    CLSID = CLSID_Sink = IID('{0CC72AA0-956F-48BD-9118-4446866ECBE3}')
    coclass_clsid = IID('{5C75C113-9AFC-42AC-8CED-1ABFE27763B5}')
    _public_methods_ = [] # For COM Server support
    _dispid_to_func_ = {
    }

    def __init__(self, oobj = None):
        if oobj is None:
            self._olecp = None
        else:
            import win32com.server.util
            from win32com.server.policy import EventHandlerPolicy
            cpc=oobj._oleobj_.QueryInterface(pythoncom.IID_IConnectionPointContainer)
            cp=cpc.FindConnectionPoint(self.CLSID_Sink)
            cookie=cp.Advise(win32com.server.util.wrap(self, usePolicy=EventHandlerPolicy))
            self._olecp,self._olecp_cookie = cp,cookie
    def __del__(self):
        try:
            self.close()
        except pythoncom.com_error:
            pass
    def close(self):
        if self._olecp is not None:
            cp,cookie,self._olecp,self._olecp_cookie = self._olecp,self._olecp_cookie,None,None
            cp.Unadvise(cookie)
    def _query_interface_(self, iid):
        import win32com.server.util
        if iid==self.CLSID_Sink: return win32com.server.util.wrap(self)

    # Event Handlers
    # If you create handlers, they should have the following prototypes:

from win32com.client import CoClassBaseClass
# This CoClass is known by the name 'DDC4100.DDC4100Ctrl.1'
class DDC4100(CoClassBaseClass): # A CoClass
    # DDC4100 Control
    CLSID = IID('{5C75C113-9AFC-42AC-8CED-1ABFE27763B5}')
    coclass_sources = [
        _DDDC4100Events,
    ]
    default_source = _DDDC4100Events
    coclass_interfaces = [
        _DDDC4100,
    ]
    default_interface = _DDDC4100

RecordMap = {
}

CLSIDToClassMap = {
    '{C4374661-BB24-410F-9BEB-5DED735F4985}' : _DDDC4100,
    '{5C75C113-9AFC-42AC-8CED-1ABFE27763B5}' : DDC4100,
    '{0CC72AA0-956F-48BD-9118-4446866ECBE3}' : _DDDC4100Events,
}
CLSIDToPackageMap = {}
win32com.client.CLSIDToClass.RegisterCLSIDsFromDict( CLSIDToClassMap )
VTablesToPackageMap = {}
VTablesToClassMap = {
}

NamesToIIDMap = {
    '_DDDC4100Events' : '{0CC72AA0-956F-48BD-9118-4446866ECBE3}',
    '_DDDC4100' : '{C4374661-BB24-410F-9BEB-5DED735F4985}',
} 
```

然后我使用 Dispatch 创建控制对象。

```
from win32com.client import Dispatch
DDC4100 = Dispatch('DDC4100.DDC4100Ctrl.1') 
```

现在，当我尝试从包装器中调用其中一个函数时，我遇到了一个错误。

```
DDC4100.AboutBox()
Traceback (most recent call last):
File "<interactive input>", line 1, in <module>
File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 505, in   __getattr__
ret = self._oleobj_.Invoke(retEntry.dispid,0,invoke_type,1)
com_error: (-2147418113, 'Catastrophic failure', None, None) 
```

似乎 makepy 包装器没有自动加载，所以我尝试使用 EnsureModule() 函数表单 gencache ，但我仍然收到相同的错误。在这一点上，我不知道该怎么做，因为我已经通过注册类型库中的其他几个程序完成了相同的过程并且没有遇到任何问题。是否有人在我的方法或逻辑中看到任何错误，或者知道使用 ActiveX 控件的不同方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:46:03.120

通常，该错误意味着 ActiveX 控件需要一个完整的容器。您可以尝试将其嵌入在 IE 中运行的网页中，该网页充当 ActiveX 容器。

# c# - 单客户端 TCP 服务器模型

> ID：11367930
> 
> 赞同：2
> 
> 时间：2012-07-06T18:43:22.603
> 
> 标签：c#, multithreading, sockets, tcp, backgroundworker

我是 C# 新手，过去主要完成基于 Web 的编码。我正在创建一个将与单个客户端通信的 TCP 服务器。我知道我需要多个线程，因为我不希望我的程序阻塞等待连接（或读取数据、发送等）。

到目前为止，我已经编写了一个简单的测试应用程序，它带有一个 GUI 和一个用于与客户端通信的类。主 GUI 类创建通信类的实例。我在 BackgroundWorker 中有 socket.accept 调用，我试图将连接的套接字传递回 RunWorkerCompletedEventArgs.Result 中的通信类。这一直没有奏效。我可以中断 DoWork 方法并查看套接字已连接。然后我将 DoWorkEventArgs.Result 设置为连接的套接字并尝试将其传递回通信类。在 RunWorkerCompleted 方法中，套接字不再连接。

我可能对如何为单个客户端实现 TCP 服务器有错误的想法。我看到的所有示例都是为多个客户端设计的，但我将处理单个客户端。我无法控制客户端，只是尝试与它进行通信。

如何将连接的套接字从 BackgroundWorker 传递回主类，或者我需要一种更好的代码结构方式。

**更新：**

我不控制客户端。它是一种嵌入式 Linux 设备。该协议非常简单。后跟数据字节的大小标头。

目标是 .NET 2.0。WCF 似乎仅在 .NET 3.0 及更高版本上可用。

**更新：**

我的代码将向客户端发送命令并接收回数据。我的代码将是一个需要持续发送/接收数据的长时间运行的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:06:09.363

当您询问其他设计理念时，这是我过去 4 年在我的项目中的建议（我在 Java 和 .NET 中使用过这种模式），它证明工作得很好！）主要思想是：你不应该给你的socket 回到主类。您的后台工作人员应该阻塞等待客户端的套接字，一旦它获得连接，它就会循环并从客户端读取数据。[后台工作人员将通过线程安全队列](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)将接收到的数据包（二进制格式，不要在这里解析数据，因为它应该是主类的职责）传递给主类。主类可以循环（或更好地使用[阻塞队列](http://msdn.microsoft.com/en-us/library/dd267312.aspx)）并通过后台工作程序处理来自客户端的任何新消息。

通过这种方式，您可以将代码分成两个不同的层。工人，负责与客户交谈，主要类负责理解客户所说的内容并有选择地响应（仍然通过工人）

**编辑**从您的编辑中，我看到您使用的是 .NET2.0。不幸的是，这个版本的框架没有线程安全的阻塞队列，因为我认为它们是在 .NET4 中引入的。您仍然可以找到许多基于 .NET2 的线程安全队列实现

# javascript - Uploadify取消方法未触发

> ID：11367931
> 
> 赞同：2
> 
> 时间：2012-07-06T18:43:32.890
> 
> 标签：javascript, jquery, file-upload, uploadify

我正在使用 Uploadify jQuery 插件将图像上传到我的网站。我正在使用自己的队列标记自定义它。这是标记：

```
<form id="upload-form" action="" method="post" enctype="multipart/form-data">
    <div id="file-queue">
        <ul>

        </ul>
    </div>

    <div id="upload-form-buttons">
        <input type="file" name="images" id="image-upload" />
        <a href="" class="primary-button">Upload</a>
    </div>
</form> 
```

和 Uploadify 代码：

```
$('#image-upload').uploadify({
    'swf': '/swf/uploadify.swf',
    'uploader': 'uploadify.php',
    'buttonClass': 'primary-button',
    'buttonText': 'Select files',
    'height': 28,
    'width': 100,
    'queueID': 'file-queue',
    'overrideEvents': ['onSelect'],
    'onSelect': function(file) {
        onSelect(file);
    },
    'onCancel': function(file) {
        onCancel(file);
    }
}); 
```

当用户选择文件时，我将触发此函数以将其添加到上传队列中：

```
function onSelect(file) {
    // Add the file to the queue
    $('#file-queue ul').append('<li class="' + file.id + '">' + trimName(file.name) + '<a href="javascript:$(\'#image-upload\').uploadify(\'cancel\')"><img class="cancel" src="/img/cancel.png" /></a><span class="filesize">' + readableFileSize(file.size) + '</span></li>');
} 
```

该文件的标记显示为：

```
<li class="SWFUpload_0_0">
    IMG_20120610_185131.jpg
    <a href="javascript:$('#image-upload').uploadify('cancel')">
        <img class="cancel" src="/img/cancel.png">
    </a>
    <span class="filesize">606.1KB</span>
</li> 
```

现在，当我单击取消按钮时，Uploadify 不会触发取消事件。这是应该被触发的函数：

```
function onCancel(file) {
    // Remove file from queue
    $('#file-queue ul li.' + file.id).remove();
} 
```

但该文件永远不会从队列中删除。如果我`$('#image-upload').uploadify('cancel')`输入我的`onSelect`函数（我这样做是为了测试），它就可以工作。我也尝试过做类似的事情，`$('img.cancel').live('click', function() { //... });`但它也没有在那里被解雇。

还有一些有趣的事情，如果我`$('#image-upload').uploadify('cancel');`在我的页面上粘贴到 Chrome javascript 控制台中，它会返回为`undefined`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T16:40:34.563

我知道只有在将“auto”设置为 false 时才会触发 onCancel - 所以我们可以看到 onCancel 仅在文件上传之前运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T07:06:30.147

我有同样的问题，我的解决方案是将处理程序放在 Uploadify 回调中`onInit`

```
$('#image-upload').uploadify({
    ...
    'onInit': function () {
         $('img.cancel').live('click', function() { //... });
    }
}); 
```

它对我有用，但我实际上不明白，如果处理程序设置在 Uploadify 之外，为什么取消不会触发

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T06:46:42.067

我创建了新方法，编辑 jquery.uploadify.js

```
// Create the file data object
        itemData = {
            'fileID'     : file.id,
            'instanceID' : settings.id,
            'fileName'   : fileName,
            'fileSize': fileSize,
            'fullname': file.name // modified by jitheesh 5/1/2017
        }
       // alert(fileName);
        // Create the file item template
        // modified by jitheesh 5/1/2017
        if (settings.itemTemplate == false) {
            settings.itemTemplate = '<div id="${fileID}" class="uploadify-queue-item">\
                <div class="cancel">\
                    <a class="uploadbtn_cancel" rel="${fullname}" href="javascript:$(\'#${instanceID}\').uploadify(\'cancel\', \'${fileID}\')">X</a>\
                </div>\
                <span class="fileName">${fileName} (${fileSize})</span><span class="data"></span>\
                <div class="uploadify-progress">\
                    <div class="uploadify-progress-bar"><!--Progress Bar--></div>\
                </div>\
            </div>'; 
```

并在您的页面中尝试此代码

```
 $('body').on('click', '.uploadbtn_cancel', function () {

       // alert(this.rel);
         $.ajax({
            type: "POST",
            url: "customers.aspx/RemoveFile",
            data: '{fileName: "' + (this.rel).trim() + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function () { },
            failure: function (response) {
                alert(response.d);
            }
        });
    }); 
```

# c++ - 为什么是 unique_ptr (T*) 显式？

> ID：11367933
> 
> 赞同：29
> 
> 时间：2012-07-06T18:43:37.717
> 
> 标签：c++, pointers, c++11, type-conversion, unique-ptr

以下函数无法编译：

```
std::unique_ptr<int> foo()
{
    int* answer = new int(42);
    return answer;
}

std::unique_ptr<int> bar()
{
    return new int(42);
} 
```

我觉得这有点不方便。`std::unique_ptr<T>(T*)`明确的理由是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-06T18:48:22.487

您不希望托管指针隐式获取原始指针的所有权，因为这可能会导致未定义的行为。考虑一个函数`void f( int * );`和一个调用`int * p = new int(5); f(p); delete p;`。现在假设有人重构`f`以获取托管指针（任何类型）并且允许隐式转换：`void f( std::unique_ptr<int> p );`如果允许隐式转换，您的代码将编译但会导致未定义的行为。

以同样的方式考虑指针甚至可能不是动态分配的：`int x = 5; f( &x );`...

获取所有权是一项非常重要的操作，最好明确说明：程序员（而不是编译器）知道是否应该通过智能指针管理资源。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-06T18:50:05.390

**简短的回答：**

*显式*构造函数使得编写危险代码变得困难。换句话说，*隐式*构造函数可以帮助您更轻松地编写危险代码。

**长答案：**

如果构造函数是*隐式的，那么您可以**轻松*编写这样的代码：

```
void f(std::unique_ptr<int> param)
{
     //code

} //param will be destructed here, i.e when it goes out of scope
  //the pointer which it manages will be destructed as well. 
```

现在看看*危险*的部分：

```
int *ptr = new int;

f(ptr); 
//note that calling f is allowed if it is allowed:
//std::unique_ptr<int> test = new int;
//it is as if ptr is assigned to the parameter:
//std::unique_ptr<int> test = ptr;

//DANGER
*ptr = 10; //undefined behavior because ptr has been deleted by the unique_ptr! 
```

请阅读评论。它解释了上面代码片段的每个部分。

当使用原始指针调用`f()`时，程序员可能没有意识到参数类型`f()`将`std::unique_ptr`获取指针的所有权，并且`delete`在超出范围时将获取。另一方面，程序员可能会*使用*它，而`delete`它甚至没有意识到它已经被删除了！这一切都是因为从原始指针*隐式*转换到`std::unique_ptr`.

请注意，出于同样的原因，`std::shared_ptr`具有构造函数。`explicit`

# sql - Oracle 代码不正确

> ID：11367940
> 
> 赞同：1
> 
> 时间：2012-07-06T18:43:52.473
> 
> 标签：sql, oracle

```
SQL> create table Drugs (
  2  DrugNumber smallint primary key,
  3  DrugMarketName varchar(40),
  4  DrugGenericName varchar(40),
  5  PackSize smallint,
  6  UnitCost numeric(7,2),
  7  foreign key (DrugSupplierNumber) references Drug_Suppliers (DrugSupplierNumber) );
foreign key (DrugSupplierNumber) references Drug_Suppliers (DrugSupplierNumber)
)
             *
ERROR at line 7:
ORA-00904: "DRUGSUPPLIERNUMBER": invalid identifier 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:48:57.997

Oracle 抱怨（正确地）您的表定义中没有 DrugSupplierNumber 列。要么去掉“外键”，要么创建一个普通列 DrugSupplierNumber 并在之后添加约束；v1 的示例：

```
create table Drugs (
  DrugNumber smallint primary key,
  DrugMarketName varchar(40),
  DrugGenericName varchar(40),
  PackSize smallint,
  UnitCost numeric(7,2),
  DrugSupplierNumber references Drug_Suppliers (DrugSupplierNumber) 
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:52:13.983

您正在尝试创建一个涉及`DrugSupplierNumber`不属于表的列的外键约束。您不想在此表上创建外键，或者您想向`DrugSupplierNumber`此表添加一列，或者您想在约束中引用此表中的其他列之一。我的猜测是您只是忘记将`DrugSupplierNumber`列添加到表定义中。

尽管它在语法上是有效的，但在 Oracle 表中声明列的可能性很小`smallint`。这是 a 的别名，`NUMBER(38)`因此它不会提供任何（合理的）上限，就像您来自非 Oracle 数据库时所期望的那样。

```
SQL> create table foo( col1 smallint );

Table created.

SQL> desc foo
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 COL1                                               NUMBER(38) 
```

此外，在 Oracle 中，将字符串列声明为`VARCHAR2`而不是`VARCHAR`将`UnitCost`列声明为`NUMBER(7,2)`而不是`NUMERIC(7,2)`.

# android - Android 视频流延迟：通过别人的网络摄像头的世界

> ID：11367941
> 
> 赞同：4
> 
> 时间：2012-07-06T18:43:54.593
> 
> 标签：android, video-streaming, rtsp, vlc

我正在尝试将网络摄像头视频流式传输到我的 android (gingerbread 2.4.3) 并且我已经完成了所有设置。我在 rtsp 流上使用 h263 编解码器和 mp4 容器格式流式传输我的网络摄像头抛出的 VLC；我的问题不是我看不到视频，而是视频缓冲时间（8-10 秒）太长，我不能拥有这个。

我想知道是否有可能将缓冲时间减少到实时流的缓冲时间？如果没有，那么有没有更好的方法可以显示实时视频？

# c# - 无法在 C# 中访问 Storyboard 对象

> ID：11367944
> 
> 赞同：0
> 
> 时间：2012-07-06T18:44:14.473
> 
> 标签：c#, .net, windows-phone-7, xaml, storyboard

所以我有这个 XAML：

```
<ListBox Height="626" HorizontalAlignment="Left" Margin="6,6,0,0" Name="ItemList" VerticalAlignment="Top" Width="444">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Vertical">
                <Grid Height="50">
                    <Grid.Resources>
                        <Storyboard x:Name="ItemCountBGImageShow">
                            <DoubleAnimation Storyboard.TargetName="ItemCountBGImage"
                                Storyboard.TargetProperty="Opacity"
                                From="0" To="100" Duration="0:0:0.3" />
                        </Storyboard>
                    </Grid.Resources>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="31" />
                        <ColumnDefinition Width="300" />
                        <ColumnDefinition Width="100" />
                    </Grid.ColumnDefinitions>

                    <Image Opacity="0" Grid.ColumnSpan="1" Name="ItemCountBGImage" Width="31" Height="31" Source="/CafeKonto.wp7;component/Images/table_quantity.png" />
                    <TextBlock Grid.ColumnSpan="2"  FontSize="25" Name="ItemName" Foreground="White" Tap="ItemName_Tap" Text="{Binding ItemName}" Margin="35,0,0,0" />
                    <TextBlock Grid.ColumnSpan="3" TextAlignment="Right" FontSize="25" Name="ItemPrice" Foreground="White" Text="{Binding ItemPriceFormated}" />
                </Grid>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我的问题是，我无法从 C# 启动动画。ItemCountBGImageShow 在后面的代码中是不可见的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:49:38.273

您不能像这样访问元素的资源字典中的项目。

给网格命名，然后使用它的 Resources 属性访问它。

例子：

XAML：

```
<Grid Name="Grid1" Height="50"> 
```

代码：

```
Storyboard ItemCountBGImageShow = (Storyboard)Grid1.Resources["ItemCountBGImageShow"]; 
```

# android - 关于android中的启动画面

> ID：11367949
> 
> 赞同：0
> 
> 时间：2012-07-06T18:44:33.227
> 
> 标签：android, splash-screen

我有这个用于启动画面的代码。当我运行它时，它在模拟器上显示错误，因为“应用程序动画闪屏（进程 com.animated.splash）已意外停止。请重试。”

我在这里附上整个代码。

```
this is AnimatedSplashScreenActivity.java file.

package com.animated.splash;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.view.animation.LayoutAnimationController;
import android.view.animation.Animation.AnimationListener;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class AnimatedSplashScreenActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    startAnimating();

}
/** 
 * Helper method to start the animation on the splash screen
 */
private void startAnimating()
{
    //Fade in top title

    TextView logo1 = (TextView) findViewById(R.id.TextViewTopTitle);
    Animation fade1 = AnimationUtils.loadAnimation(this,R.anim.fade_in);
    logo1.startAnimation(fade1);
    TextView logo2=(TextView) findViewById(R.id.TextViewBottomTitle);
    Animation fade2 = AnimationUtils.loadAnimation(this,R.anim.fade_in2);
    logo2.startAnimation(fade2);
    fade2.setAnimationListener(new AnimationListener(){
        public void onAnimationEnd(Animation animation){
            startActivity(new   
             Intent(AnimatedSplashScreenActivity.this,MainActivity.class));
            AnimatedSplashScreenActivity.this.finish();
        }
         public void onAnimationRepeat(Animation animation){
    }
        public void onAnimationStart(Animation animation){
        }

});
    Animation spinin=AnimationUtils.loadAnimation(this,R.anim.custom_anim);
    LayoutAnimationController controller=new LayoutAnimationController(spinin);
    TableLayout table=(TableLayout) findViewById(R.id.TableLayout01);
    for(int i=0;i<table.getChildCount();i++)
    {
        TableRow row =(TableRow) table.getChildAt(i);
        row.setLayoutAnimation(controller);

    }
}
@Override
protected void onPause()
{
    super.onPause();
    TextView logo1=(TextView) findViewById(R.id.TextViewTopTitle);
    logo1.clearAnimation();
    TextView logo2=(TextView) findViewById(R.id.TextViewBottomTitle);
    logo2.clearAnimation();
    TableLayout table=(TableLayout) findViewById(R.id.TableLayout01);
    for(int i=0;i<table.getChildCount();i++)
    {
        TableRow row =(TableRow) table.getChildAt(i);
        row.clearAnimation();

    }
}
@Override
protected void onResume()
{
    super.onResume();

    startAnimating();

}

} 
```

这是清单文件

```
<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <activity
        android:name=".AnimatedSplashScreenActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<activity android:name=".MainActivity"
    android:label="@string/hello">
    <intent-filter>
        <action android:name="com.animated.splash.MainActivity"/>
        <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter>
</activity>    

</application>

</manifest> 
```

这是 custom_anim.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0" 
                     android:interpolator="@android:anim/accelerate_interpolator" 
                android:duration="6000" android:repeatCount="infinite"/>
    </set> 
```

这是fade_in.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
   <set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0"  
    android:interpolator="@android:anim/accelerate_interpolator" 
    android:duration="3000" android:repeatCount="infinite"/>
 </set> 
```

这是fade_in2.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0"
    android:interpolator="@android:anim/accelerate_interpolator" 
    android:duration="5000" android:repeatCount="infinite"/>
    </set> 
```

这是splash.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:id="@+id/TextViewTopTitle" android:text="@string/app_logo_top"
android:layout_gravity="center_vertical|center_horizontal"
android:gravity="top|center" android:textSize="25pt">
</TextView>
<TableLayout android:id="@+id/TableLayout01" android:stretchColumns="*"
android:layout_height="wrap_content" android:layout_width="fill_parent">
<TableRow android:id="@+id/TableRow01" android:layout_height="wrap_content"
android:layout_width="wrap_content" 
android:layout_gravity="center_vertical|center_horizontal">
<ImageView android:id="@+id/ImageView2_Left" android:layout_width="wrap_content"
android:layout_height="wrap_content"  
android:layout_gravity="center_vertical|center_horizontal"
android:src="@drawable/splash1"></ImageView>

<ImageView android:id="@+id/ImageView2_Right" android:layout_width="wrap_content"
android:layout_height="wrap_content" 
android:layout_gravity="center_vertical|center_horizontal"
android:src="@drawable/splash2"></ImageView> 
```

```
<TableRow android:id="@+id/TableRow02" android:layout_height="wrap_content"
android:layout_width="wrap_content"
android:layout_gravity="center_vertical|center_horizontal"> 
```

```
<ImageView android:id="@+id/ImageView3_Right" android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical|center_horizontal"
android:src="@drawable/splash4"></ImageView> 
```

```
<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:id="@+id/TextViewBottomTitle" android:text="@string/app_logo_bottom"
android:gravity="center" android:textSize="25pt">
</TextView>

<TextView android:id="@+id/TextViewBottomVersion"   
android:text="@string/app_version_info"
android:textSize="5pt" android:layout_height="wrap_content"
android:lineSpacingExtra="4pt" android:layout_width="fill_parent" 
android:layout_gravity="center_vertical|center_horizontal"
android:gravity="center" >
</TextView>

</LinearLayout> 
```

最后是 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Main Screen" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:53:02.013

您正在将内容视图设置为`main.xml`。`R.id.TextViewTopTitle`但是您正在获取中定义的 TextView `splash.xml`。尝试将内容视图设置为`splash.xml`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    startAnimating();
} 
```

# ruby-on-rails - Rails 3：根据登录状态更改链接

> ID：11367951
> 
> 赞同：0
> 
> 时间：2012-07-06T18:44:52.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, erb

我想根据用户状态（登录或未登录）更改我的应用程序中的徽标链接到的位置。

如果用户已登录，我希望它链接到他们的个人资料页面（用户/节目）。如果未登录，则进入 root_path。

我使用助手进行了此设置：

看法：

```
<%= link_to logo, root_path %> 
```

帮手：

```
 def logo
    logo = image_tag("rlogo.png", alt: "Sample App")
  end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:57:49.063

Matzi 建议的三元解决方案肯定会起作用，但另一种选择是修改您的助手以设置徽标和链接，如下所示（其中`current_user`是为登录用户返回`User`实例的方法）：

```
def logo_link
  destination = current_user.present? ? current_user : root_path
  link_to image_tag("rlogo.png", alt: "Sample App"), destination
end 
```

然后，在您看来，只需包括

```
<%= logo_link %> 
```

如果您仍然希望在外部使用该上下文，您也可以在帮助程序中使用现有`logo`的帮助程序。`logo_link`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:49:07.837

在视图中使用类 C 的条件表达式：

```
<%= link_to logo, (is_logged ? profile_path : root_path) %> 
```

# r - Logit 模型优势比的概率曲线

> ID：11367952
> 
> 赞同：0
> 
> 时间：2012-07-06T18:44:53.177
> 
> 标签：r, statistics

我有一个关于为具有多个预测变量的逻辑回归模型绘制概率曲线的问题。我在 SO 上发布了这个，因为我想知道 ggplot2 特定的解决方案，并从 ggplot2 中的 logit 模型创建有用的图形。

所以这是一个例子=

```
library(car)
mtcars
log <- glm(vs ~ mpg + am, data=mtcars, family=binomial)
summary(log) 
```

这提供了 logit coefs（对数赔率），但我想知道如何继续预测 mpg 的所有“级别”的 Y = 1，并且在 ggplot2 中。基本上，我如何使用 ggplot2 创建有助于解释 logit 模型结果的图？当有多个预测变量时，我特别想知道解决方案。

编辑：

我专门询问如何使用预测值或优势比生成图表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T19:22:06.820

这个怎么样：

```
library(car)
mtcars
#Change your model name because log is also a function
logodds <- glm(vs ~ mpg + am, data=mtcars, family=binomial)
summary(logodds)

library(ggplot2)
new.data = with(mtcars, expand.grid(am = unique(am),
                                    mpg = seq(min(mpg), max(mpg))))

new.data$vs <- predict.glm(logodds, newdata = new.data, type = "response")

ggplot(new.data, aes(mpg, vs, colour = am)) + geom_line(aes(group = am)) 
```

![在此处输入图像描述](../Images/2476aba014413a94a5936889cd765bb3.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:10:24.237

不确定您是在寻找不同的 mpg 和 am 值的预测 Y，还是只是想解释系数？

如果您试图解释系数，我是系数图的忠实粉丝。

```
require(coefplot)
coefplot(log) 
```

这让你： ![在此处输入图像描述](../Images/fc6010a6d15c59af281d7d618383f014.png)

**编辑：** 也许是这样。

```
preds <- with(mtcars, expand.grid(mpg, am))
names(preds) <- c("mpg", "am")
preds$Score <- predict(object=logMod, newdata=preds, type="response")
ggplot(preds, aes(x=mpg, y=Score, group=am, colour=factor(am))) + geom_line(linetype=2) + scale_color_discrete("am") 
```

![在此处输入图像描述](../Images/09a02c468d8e0d0379c03e683b144f5b.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T23:37:47.840

您的另一个选择 - 虽然尚未使用 ggplot2 - 是在 Frank Harrell 的 rms 包中找到的绘图方法。我希望 Harrell 很快会切换到 ggplot2 来绘制他的图表，但是方法集、诊断图、概率图、系数图等非常有用。

# asp.net - 下拉列表中的第一项丢失属性

> ID：11367958
> 
> 赞同：0
> 
> 时间：2012-07-06T18:45:08.263
> 
> 标签：asp.net, css, vb.net

我有动态创建并包含用户列表的下拉列表。如果用户遇到某个我应用样式属性来突出显示用户。我的 ListItems 都将正确突出显示，除了 List 上的第一个。第一个会以这种方式行事并且与其他人不同，这似乎很奇怪。

```
 ddlSupervisorList.Items(ddlSupervisorList.Items.Count - 1).Attributes.CssStyle.Value = "background:#cc66ff;" 
```

如果我选择另一个用户，新选择的用户仍将保持其突出显示，但第一个用户仍不会突出显示。

我什至尝试过执行以下操作：

```
If ddlSupervisorList.SelectedItem.Equals(ddlSupervisorList.Items(ddlSupervisorList.Items.Count - 1)) Then
   ddlSupervisorList.SelectedItem.Attributes.CssStyle.Value = "background:#cc66ff;"
End If 
```

但它仍然不会在加载时突出显示第一项（默认项）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:27:51.113

最终我使用了一些 JQuery 和 javascript 来解决这个问题。我拿起下拉列表 ID 并获得了选定的选项。如果它应该突出显示'availableSelected'是cssclass，那么我将它添加到下拉列表的列表行的css中。

```
var userClientId = '#<%= ddlSupervisorList.ClientID %>';
var selectedId = userClientId + ' option:selected';
function clientIdChanged() 
{
    if ($(selectedId).hasClass('availableSelected')) {
        $(userClientId).addClass('availableSelected');
    }
    else {
        $(userClientId).removeClass('availableSelected');
    }
}
$(document).ready(function() {
    clientIdChanged();
    $(userClientId).bind('change', clientIdChanged);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T18:50:29.413

如果它是动态生成的，请确保您没有将它放在 if(!page.IsPostBack) 中。在 page_load 上，您必须使用您想要的样式重新呈现下拉菜单。

# ms-access - 在 MS Access 2007 中创建视图

> ID：11367959
> 
> 赞同：11
> 
> 时间：2012-07-06T18:45:10.143
> 
> 标签：ms-access

我在 MsAccess 2007 中有数据库，里面有 5 个表

我想在 MS Accesss 中创建视图

我不需要语法，但我需要创建视图的步骤（因为我在 MS Acccess 中找不到 CreateView

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T18:53:19.240

您不能在 MS Access 2007 中创建视图，它不受支持。但是，您可以创建一个查询来返回您需要的数据。

[有关创建视图语句，](http://msdn.microsoft.com/en-us/library/bb177895%28v=office.12%29.aspx)请参阅MSDN 。

> Microsoft Access 数据库引擎不支持将 CREATE VIEW 或任何 DDL 语句用于非 Microsoft Access 数据库引擎数据库。

但是创建查询与创建`SELECT`查询相同`View`，因为您可以检索数据并供其他查询使用。

例如，如果您创建一个名为的查询，该查询`GetQuery1`执行以下操作：

```
SELECT *
FROM table1 
```

如果你想像视图一样使用它，你可以直接从另一个查询中调用它：

```
SELECT *
FROM GetQuery1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:47:29.920

MS Access 允许您创建可用于其他查询的查询。所以它类似于视图

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2017-09-15T01:51:03.677

```
CREATE VIEW view [(field1[, field2[, …]])] AS selectstatement 
```

[https://msdn.microsoft.com/en-us/library/bb177895(v=office.12).aspx](https://msdn.microsoft.com/en-us/library/bb177895(v=office.12).aspx)

# gridview - GridView 中的 ObjectDataSource 和 DeleteMethod

> ID：11367964
> 
> 赞同：1
> 
> 时间：2012-07-06T18:45:24.933
> 
> 标签：gridview, objectdatasource

我正在尝试使用 ObjectDataSource 为我的 GridView 指定 DeleteMethod，但无论我尝试什么，似乎都不会调用 DeleteMethod。

我的代码是：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataSourceID="dsGridView" AutoGenerateDeleteButton="True">
        <Columns>
            <asp:BoundField DataField="CustomerID" HeaderText="CustomerID" 
                SortExpression="CustomerID" />
            <asp:BoundField DataField="FirstName" HeaderText="FirstName" 
                SortExpression="FirstNenter code hereame" />
            <asp:BoundField DataField="LastName" HeaderText="LastName" 
                SortExpression="LastName" />
            <asp:BoundField DataField="Country" HeaderText="Country" 
                SortExpression="Country" />
        </Columns>
    </asp:GridView>

        <asp:ObjectDataSource ID="dsGridView" runat="server" 
        SelectMethod="GetCustomerByCountry" DeleteMethod="DeleteRow" TypeName="WebApplication1.App_Code.DAL">
        <SelectParameters>
            <asp:ControlParameter 
                ControlID="DropDownList1" 
                DefaultValue="NULL" 
                Name="Country" 
                PropertyName="SelectedValue" 
                Type="String" />
        </SelectParameters>
        <DeleteParameters>
            <asp:Parameter 
                Name="CustomerID" 
                Type="Int32" />
        </DeleteParameters>
    </asp:ObjectDataSource>

public static void DeleteRow(int CustomerID)
    {
        Database1Entities de = new Database1Entities();

        var LQ = (from s in de.Customers
                  where s.CustomerID == CustomerID
                  select s).FirstOrDefault();

        if (LQ != null)
        {
            de.Customers.DeleteObject(LQ);
            de.SaveChanges();
        }
    } 
```

我有一个名为“Database1Entities”的数据库实体模型，它包含 4 个简单的行。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:27:33.357

您必须将`DataKeyNames`Gridview 添加到知道您的数据绑定的 id 是什么。

```
<asp:GridView ID="GridView1" runat="server" 
        AutoGenerateColumns="False" 
        DataSourceID="dsGridView" 
        AutoGenerateDeleteButton="True" 
        DataKeyNames="CustomerID"> 
```

# mysql - SQL 5.1 触发语法错误

> ID：11367969
> 
> 赞同：0
> 
> 时间：2012-07-06T18:45:39.900
> 
> 标签：mysql, triggers, syntax-error

我有这个触发器：

```
CREATE TRIGGER `VerficiaDispon` BEFORE INSERT ON `ordini` 
FOR EACH
ROW 
BEGIN 
DECLARE temp INT

SET temp = (SELECT disponibili FROM motoinstock 
            WHERE Moto = new.Moto_Comprata 
                AND Concessionario = new.Concessionario_Vendita);

IF temp = 0 OR temp IS NULL THEN SIGNAL SQLSTATE '45000' 
    SET MESSAGE_TEXT = 'Moto non disponibile';

END IF ;

SELECT acquisti
INTO temp
FROM clienticoncessionari
WHERE cliente = new.Cod_Cliente
AND concessionario = new.Concessionario_Vendita;

IF temp %2 =1 THEN SET new.Prezzo_Vendita = ( new.Prezzo_Vendita * 0.9 ) ;

END IF ;

END; 
```

我不能让它在 sql 5.1 中工作。它在第 7 行给了我一个错误。我尝试选择 X 进入 temp，设置 temp=(...)，但似乎没有任何效果。我找不到 sintax 错误，有人可以帮我吗？必须是 sql 5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:18:19.817

```
Delimiter $$

CREATE TRIGGER `VerficiaDispon` BEFORE INSERT ON `ordini` 
FOR EACH
ROW 
BEGIN 
DECLARE temp INT

SET temp = (SELECT disponibili FROM motoinstock 
            WHERE Moto = new.Moto_Comprata 
                AND Concessionario = new.Concessionario_Vendita);

IF temp = 0 OR temp IS NULL THEN SIGNAL SQLSTATE '45000' 
    SET MESSAGE_TEXT = 'Moto non disponibile';

END IF ;

SELECT acquisti
INTO temp
FROM clienticoncessionari
WHERE cliente = new.Cod_Cliente
AND concessionario = new.Concessionario_Vendita;

IF temp %2 =1 THEN SET new.Prezzo_Vendita = ( new.Prezzo_Vendita * 0.9 ) ;

END IF ;

END
$$

Delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:18:43.870

SIGNAL 语句仅在 MySQL 5.5 中可用。

在 5.1 的触发器中使用 SIGNAL 会导致语法错误，因为 MySQL 不知道这个语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:32:53.747

好的，所以我几乎解决了所有问题。现在代码是这样的：

```
delimiter $$
CREATE TRIGGER `VerficiaDispon` BEFORE INSERT ON `ordini` 
FOR EACH
ROW 
BEGIN 

DECLARE temp integer;
SET temp = (SELECT disponibili FROM motoinstock 
            WHERE Moto = new.Moto_Comprata 
                AND Concessionario = new.Concessionario_Vendita);

IF temp=0 OR temp=NULL THEN
RAISE_APPLICATION_ERROR(-20001,'NA');

SET temp = ( SELECT acquisti FROM clienticoncessionari 
             WHERE cliente = new.Cod_Cliente
              AND concessionario = new.Concessionario_Vendita);

IF temp %2 =1 THEN SET new.Prezzo_Vendita = ( new.Prezzo_Vendita * 0.9 ) ;

END IF ;

END
delimiter ; 
```

现在我的问题是在 IF 上。我无法提出错误，由于某种原因 RAISE_APPLICATION_ERROR 不起作用。其余的都很好。关于如何处理错误的任何想法？

# c# - 定期更改基础 EF 模型的最佳替代方案

> ID：11367970
> 
> 赞同：2
> 
> 时间：2012-07-06T18:45:53.423
> 
> 标签：c#, .net, entity-framework, ef-model-first

我正在使用实体框架 4 和模型优先方法开发 C# 应用程序（我有一个模型，我从中生成我的数据库表和类）。

每次来自客户的更改请求时，定期更改数据库模式（表定义等）的最佳方法是什么？（删除整个数据库并将生成的模型 SQL 应用到它显然不是一种选择，因为数据库中的所有数据都会丢失。）

希望有人可以给我一个提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:55:59.973

对于我们的模型优先数据库更新，我们将生成的数据库放入第二个“diff”数据库。然后我们使用 Open DB diff 之类的工具生成更改脚本：http: [//opendbiff.codeplex.com/](http://opendbiff.codeplex.com/)或 redgate 的 SQL 比较器：[http ://www.red-gate.com/products/sql-development/sql-compare /](http://www.red-gate.com/products/sql-development/sql-compare/)。

生成的脚本通常会创建一个安全的数据库导出，并保留您的数据。*然而，检查生成的脚本实际做*了什么总是一个好主意，以防止任何数据丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:06:50.727

数据库项目。您可以与本地或开发数据库进行模式比较，然后针对生产数据库生成变更。简单且源代码可控。

# c++ - 返回变量名 C++

> ID：11367975
> 
> 赞同：-6
> 
> 时间：2012-07-06T18:46:30.910
> 
> 标签：c++, macros

我使用此代码

```
#define _(x) cout << #x; 
```

作为宏，在程序的开头，返回一个变量名。它在 main 中运行良好，但在嵌套在其他函数中时根本不行。例如，如果定义

```
void print (int p)
{
   _(p); cout << "=" << p;
}

int main()
{
   int a=1, b=2;
   _(a); 
   cout << " = " << a;
   print(b);
} 
```

输出将是 a = 1 p = 2

有什么想法可以克服这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:51:18.243

```
#define _(x) cout << #x;
#define print(v) _(v); cout << "=" << v; 
```

它没有按照您期望的方式运行的原因是当您从函数内部调用它时，变量的名称是“p”。所以它完全按照你告诉它的做，即使它不是你的意思。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T18:57:30.123

这似乎工作正常。和的值分别是`a`和，这正是您的输出所显示的。你期待什么输出？`p``1``2`

如果您期望第二个输出是`b = 2`，那么我认为您对该语言有根本的误解。该函数不知道调用函数在调用它时使用的变量名称（如果它完全使用变量）。具有普遍自省能力的高级语言可能能够做这样的事情，但 C++ 不能。

或许更重要的是，通过查看代码或在基本调试器中运行代码来了解您还不知道的变量名称，您可以获得什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:03:28.523

您需要以某种方式将信息传递给打印功能。

```
struct named {
    int &x_;
    const char *n_;
    operator int () const { return x_; }
    named(int &x, const char *n) : x_(x), n_(n) {}
};

const char * name (int, const char *s) { return s; }
const char * name (named &n, const char *s) { return n.n_; }

#define _(x) std::cout << name(x, #x)

void print (named p) {
    _(p); std::cout << " = " << p << std::endl;
}
#define print(x) print(named(x, #x))

int main() {
   int a=1, b=2;
   _(a); std::cout << " = " << a << std::endl;
   print(b);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T19:06:49.580

听起来您希望变量的名称成为变量本身的一部分。C++ 在运行时不给变量名。您在程序中使用的标识符仅指传递的值。

您可以定义明确包含名称的对象类型：

```
#include <iostream>
#include <string>

template< typename t >
struct named_value {
    t value;
    std::string name;
};

template< typename t >
void _( named_value< t > const &nv ) { // not a good name for a function
    std::cout << nv.name; // not a good semantic for a function
}

template< typename t >
std::ostream &operator<< ( std::ostream &s, named_value< t > const &v ) {
    return s << v.value;
}

typedef named_value< int > named_int;

void print (named_int p)
{
   _(p); std::cout << "=" << p;
}

int main()
{
   named_int a = { 1, "a" }, b = { 2, "b" };
   _(a); 
   std::cout << " = " << a;
   print(b);
} 
```

[http://ideone.com/AFHEq](http://ideone.com/AFHEq)

**但是，**你真的不应该写这样的程序。

# java - 使用带有通配符的 Java 泛型时出现“类型不匹配”

> ID：11367979
> 
> 赞同：1
> 
> 时间：2012-07-06T18:46:55.933
> 
> 标签：java, generics

我在 Java 中使用泛型有一个奇怪的问题。泛型对我来说很新，但我想我了解基础知识。

请看一下这段代码：

```
private void drawQuadtreeBoxes_helper(QuadTree<?> node) {
    if (node == null)
        return;

    Vector3 min = node.bbox.min;
    Vector3 max = node.bbox.max;
    // Draw the boxes (...)

    if (node.hasChildren()) {
        Array<QuadTree<?>> children = node.getChildren(); // ERROR HERE
        for (QuadTree<?> child : children) {
            drawQuadtreeBoxes_helper(child);
        }
    }
} 
```

因为存储在四叉树结构中的对象类型与此方法无关，所以我使用通配符作为方法签名，以便此方法可以应用于各种四叉树。

getChildren() 方法返回节点的四个子节点，存储在名为 Array 的集合类（Array[的实现](http://code.google.com/p/libgdx/source/browse/trunk/gdx/src/com/badlogic/gdx/utils/Array.java)）中。我确信 getChildren() 的返回类型确实是`Array<QuadTree<?>>`（甚至 Eclipse 在工具提示中也这么说），但我仍然在这一行得到一个错误，告诉我：

```
cannot convert from Array<QuadTree<capture#6-of ?>> to Array<QuadTree<?>> 
```

有趣的部分来了：当我向 Eclipse 询问如何解决这个问题的建议时，这是建议之一：

```
Change type of 'children' to 'Array<QuadTree<?>>' 
```

但是已经是这种类型了！它变得更好了：当我点击这个建议时，Eclipse 将这一行更改为：

```
Array<?> children = node.getChildren(); 
```

当然，这会破坏以下所有代码。

这到底是怎么回事？有人可以启发我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:52:07.963

问题是方法不知道它是*相同* `QuadTree<?>`的（可能在同一个调用中`?`引用*不同的类型）。*

解决方案是“键入”该方法，该方法在整个方法中锁定`QuadTree<?>`（因此`?`）是*相同*的类型。

```
private <T extends QuadTree<?>> void drawQuadtreeBoxes_helper(T node) {
    if (node == null)
        return;

    Vector3 min = node.bbox.min;
    Vector3 max = node.bbox.max;
    // Draw the boxes (...)

    if (node.hasChildren()) {
        Array<T> children = node.getChildren(); // ERROR HERE
        for (T child : children) {
            drawQuadtreeBoxes_helper(child);
        }
    }
} 
```

`?`仍然意味着“任何东西”，但它现在是*相同*的“任何东西”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T01:34:57.453

除了 Bohemian 的回答，我想指出你仍然可以拥有你想要的相同签名（没有人需要知道你正在使用这个“T”类型参数，因为它是一个实现细节。

您可以通过使用原始类型签名创建一个包装器方法来做到这一点，该方法使用 T 调用泛型方法。该调用由于捕获而起作用。

```
private void drawQuadtreeBoxes_helper(QuadTree<?> node) {
    drawQuadtreeBoxes_helper_private(node);
}

private <T extends QuadTree<?>> void drawQuadtreeBoxes_helper_private(T node) {
    // code here ...
} 
```

当然，由于您示例中的方法是私有的，您可能不会费心去做所有这些。但如果它是一个公共 API，那么这样做可能是个好主意，以抽象出 T 的不必要的实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:06:06.573

如果您不关心 QuadTree 中的类型参数，请从您的代码中简单地删除任何地方:) 刚刚尝试了以下代码，编译器认为它可以：

```
private void drawQuadtreeBoxes_helper(QuadTree node) {
    if (node == null)
        return;

    Vector3 min = node.bbox.min;
    Vector3 max = node.bbox.max;
    // Draw the boxes (...)

    if (node.hasChildren()) {
        Array<QuadTree> children = node.getChildren();
        for (QuadTree child : children) {
            drawQuadtreeBoxes_helper(child);
        }
    }
} 
```

# php - SQLSTATE[HY093]：无效参数号：混合命名参数和位置参数

> ID：11367982
> 
> 赞同：0
> 
> 时间：2012-07-06T18:47:04.457
> 
> 标签：php, mysql, doctrine, pdo, doctrine-orm

这个错误对我来说似乎是一个错误，因为我的查询中没有位置参数。这是方法：

```
public function getAll(User $user, DateTime $start = null, DateTime $end = null)
{
    $params = array('user_id' => $user->getId());

    $rsm = new \Doctrine\ORM\Query\ResultSetMapping(); // Result set mapping
    $rsm->addScalarResult('subtype', 'subtype');
    $rsm->addScalarResult('count',   'count');

    $sms_sql =
    "SELECT CONCAT('sms_', IF(is_auto = 0, 'user' , 'auto')) AS subtype, " .
    "SUM(messages_count * (customers_count + recipients_count)) AS count " .
    "FROM outgoing_message AS m INNER JOIN small_text_message AS s ON " . 
    "m.id = s.id WHERE status <> 'pending' AND user_id = :user_id";

    $news_sql =
    "SELECT CONCAT('news_', IF(is_auto = 0, 'user' , 'auto')) AS subtype, " .
    "SUM(customers_count + recipients_count) AS count " .
    "FROM outgoing_message AS m JOIN newsletter AS n ON m.id = n.id " .
    "WHERE status <> 'pending' AND user_id = :user_id";

    if($start) :
        $sms_sql        .= " AND sent_at >= :start";
        $news_sql       .= " AND sent_at >= :start";
        $params['start'] = $start->format('Y-m-d');
    endif;

    $sms_sql  .= ' GROUP BY type, is_auto';
    $news_sql .= ' GROUP BY type, is_auto';

    return $this->_em->createNativeQuery("$sms_sql UNION ALL $news_sql", $rsm)
        >setParameters($params)->getResult();
} 
```

这引发了异常：

> SQLSTATE[HY093]：无效参数号：混合命名参数和位置参数

数组`$params`没问题，因此[生成了 SQL](http://pastebin.com/Rx0BQsV6)：

```
var_dump($params);

array (size=2)
  'user_id' => int 1
  'start' => string '2012-01-01' (length=10) 
```

最奇怪的是它只适用于`"$sms_sql"`！

# 更新

又发现了一件奇怪的事。如果我只更改名称（改为`start_date`而不是`start`）：

```
 if($start) :
        $sms_sql             .= " AND sent_at >= :start_date";
        $news_sql            .= " AND sent_at >= :start_date";
        $params['start_date'] = $start->format('Y-m-d');
    endif; 
```

发生的事情是 Doctrine/PDO 说：

> SQLSTATE [42S22]：找不到列：1054 'where 子句'中的未知列'sent1rt_date'

...因为`1rt`在列名中间添加了字符串！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:11:27.903

我相信问题在于对 NativeSQL 的 Doctrine ORM 支持。

`setParameters`我在用于命名参数的方法的文档中找不到任何示例。我看到的所有使用该方法的示例都是针对位置的，而不是命名的。

命名参数的所有示例都使用`setParameter`（没有“s”）方法。而且它们仅在 SQL 中显示匹配占位符的一次出现。

作为一项测试（并且作为一种可能的解决方法），尝试使 SQL 文本中的每个占位符都是唯一的，然后分别设置每个占位符。

看起来“命名参数”支持可能有些不完整（与我们习惯使用的 Oracle 和其他 ORM 框架相比）。看起来 Doctrine 可能对位置符号有更好的支持。（这对于简单的语句非常有用，但是当您有很多参数并且您需要对 SQL 语句进行更改时，它可能是一个真正的负担。这就是命名参数的好处真正开始发挥作用的地方......如果它们是支持的权利。）

这是 Doctrine ORM 文档的链接[*http://doctrine-orm.readthedocs.org/en/latest/reference/query-builder.html?highlight=setParameters*](http://doctrine-orm.readthedocs.org/en/latest/reference/query-builder.html?highlight=setParameters) （`setParameters`在该页面上搜索示例。）

（请参阅我对您问题的评论。）

这可能无法真正回答您的问题，但它可能会让您朝着正确的方向前进。在外面小心点。

# python - 为什么我的 python 子进程不能使用移动命令？

> ID：11367986
> 
> 赞同：-2
> 
> 时间：2012-07-06T18:47:19.897
> 
> 标签：python, windows, batch-file, subprocess, move

好吧，所以在 Windows 中使用 Python 我正在尝试运行一个批处理命令，该命令是移动文件的“移动”命令。我知道它可以使用 python 中的shutil 来完成，但这给我带来了麻烦。

```
move /-y "%~dp0itself.py" "C:\folder\folder2\" 
```

当作为批处理文件单独运行时，这非常有效。

```
import subprocess
    process = subprocess.Popen(move /-y "%~dp0sarpedon.py" "C:\Utility\Config\", shell=True, stdout=subprocess.PIPE)
process.wait()
print process.returncode 
```

我尝试将其添加到python中其他一些代码的末尾，但我不断收到错误，它说我的语法无效，因为

```
"%~dp0sarpedon.py   (") 
```

我用来修复它的许多尝试都以错误结束：

```
EOL while scanning string literal. 
```

因为右括号

```
(move /-y "%~dp0sarpedon.py" "C:\Utility\Config\", shell=True, stdout=subprocess.PIPE   ")" 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:52:21.893

您需要阅读有关 Popen 工作原理的文档。您不能只在括号之间转储命令行。您必须将命令及其参数作为列表中的字符串传递。阅读[文档](http://docs.python.org/library/subprocess.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:07:50.583

你能具体说明shutil给了什么麻烦吗？你忘了双反斜杠吗？或者文件或目录是否需要管理员权限？

以下是否导致错误？

```
import shutil
shutil.move("%~dp0itself.py", "C:\\folder\\folder2") 
```

在我的 64 位 Windows 机器上运行时，使用这一行移动了文件。

至于为什么你的代码不工作 - 我认为是因为 \"，尝试使用双反斜杠 \，否则字符串解释器不会结束字符串。或者它会创建一些奇怪的字符来代替你的所有分隔符。

如果您致力于使用子进程，请尝试使用组合字符串作为移动和目标命令：

```
import subprocess
process = subprocess.Popen("move /-y %~dp0sarpedon.py C:\\Utility\\Config\\",
                           shell=True, stdout=subprocess.PIPE) 
```

# ruby-on-rails - 将字体添加到资产管道

> ID：11367987
> 
> 赞同：4
> 
> 时间：2012-07-06T18:47:20.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, fonts, asset-pipeline

我已经阅读了几个关于这个问题的 stackoverflow 问题，但似乎没有一个对我有用。我的环境是 Rails 3.1.6、Ruby 1.9.3、sass-rails 3.1.0。

我正在尝试将字体添加到**vendor/assets/fonts**。当我将字体文件（例如：1eaf27c0-f4de-4273-9f4c-1b3236ad2f3c.woff）添加到该目录并重新启动服务器时。如果我去 localhost:3000/assets/1eaf27c0-f4de-4273-9f4c-1b3236ad2f3c.woff，我得到一个 404。

任何想法为什么会发生这种情况？我试过添加

> config.assets.paths << "#{Rails.root}/vendor/assets/fonts"

到 application.rb 仍然无法正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T16:01:43.350

原来字体名称不能有连字符。我猜这与文件指纹识别使用连字符的事实有关。当我删除连字符时它可以工作

# css - 没有浮动的 CSS 列：需要父元素的高度正确

> ID：11367990
> 
> 赞同：0
> 
> 时间：2012-07-06T18:47:51.190
> 
> 标签：css, html

我有以下 HTML：

```
<div class="columns">
  <div class="column">
    foo
  </div>
</div> 
```

以及以下 CSS：

```
.columns
{
    position: relative;
    width: 100%;
}

.column
{
    top: 0;
    bottom: 0;
    position: absolute;
    overflow: auto;
    margin: 0 0 0 10px;
} 
```

渲染时，.columns div 的高度为零。如何获取 .column div 的高度？

我最终想要在这里做的是使用顶部/底部和绝对定位来创建一行柱状内容，但能够从本质上“清除” .columns 元素，以便我可以将东西放在它下面。

（我试图在没有浮动/清除的情况下执行此操作，以允许固定流体固定的三列布局，其中列从左到右以正确的顺序排列。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:02:52.013

不幸的是，您需要`<br style="clear:both;">`在列外的内列来执行此操作。我不认为有其他方法。另外，我会删除`bottom: 0;`没有做任何事情并且可能会产生问题的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:52:05.090

你可以让你的列内联块。这将允许您将它们并排放置，而无需制作它们`position:absolute;`，从而允许父级包含它们。

[例子](http://jsfiddle.net/VEAUD/1/)

虽然这不使用浮动/清除，但它具有与浮动类似的效果，因此可能不是您想要的。但是，我想我会指出它，因为您可以找到解决此问题的方法（不完全确定您想要什么，否则我会尝试）。

此外，虽然这是一个（很糟糕的）表 hack，但您可以制作`.columns`a`display:table;`和`.column`a `display:table-cell;`，这会产生有趣的结果。

# javascript - 不规则形状的碰撞检测

> ID：11367991
> 
> 赞同：10
> 
> 时间：2012-07-06T18:47:51.970
> 
> 标签：javascript, jquery, html, canvas, collision-detection

我知道如何检查一个圆是否即将与一个正方形发生碰撞，我知道如何检测一个正方形是否将与一个正方形发生碰撞，但是我将如何检测一个多边形是否即将与一个正方形发生碰撞?

或者更好的是，当多边形即将与多边形碰撞时。

或者更好的是，当由不直的线组成的形状与另一个相似的形状、多边形或圆形/矩形发生碰撞时

有没有办法让一个形状可能占用的像素和另一个形状占用的像素并检查它们中的任何一个是否相同？

我希望有一些不需要大量特定形状计算的解决方案。

我正在使用 javascript 和 html5 画布来执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:05:02.673

这不是一个简单的东西。如果您对一个函数可以判断两个多边形是否正在碰撞感到满意（并且您可以回滚它们），那么解决方案并不难。您只需要检查多边形的任何两个边是否相互交叉。这可以通过一些数学来完成，并且对于大的形状或很多多边形，它可以吃掉性能。为了解决这个问题，您可以使用空间分区和边界卷。

**更新：** 您可以基于[此](https://web.archive.org/web/20121001232059/http://paulbourke.net/geometry/lineline2d/)计算线的交点。然后你需要检查这个点是否在两个段中。为此，您可以使用段的端点，如果段实际包含该点，则 ua 和 ub 变量将介于 0-1 之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:10:08.290

最简单的是使用边界框，只需找到对象的最小值和最大值并从中制作一个框。要对多边形进行多边形处理，您需要一种存储多边形边缘的方法以及另一种确定哪些点或边缘与另一个对象发生碰撞的方法。然后，您可以从这里确定如何对碰撞做出反应。

边界框易于实现，但不是很准确。使用多边形本身的实际边缘更准确，但更难处理并且速度要慢得多。

# macos - Mac 的核心绘图教程

> ID：11367993
> 
> 赞同：2
> 
> 时间：2012-07-06T18:47:55.237
> 
> 标签：macos, core-plot

我想知道是否有适用于 Mac 的核心情节教程。看起来所有的教程都是针对 iOS 的，而且有些代码有很大的不同。

我只是想用存储在数组中的 x、y 坐标创建一个简单的图形。

# wcf - 使用 WCF 时如何验证证书在其证书链中是否具有特定 CA

> ID：11367999
> 
> 赞同：4
> 
> 时间：2012-07-06T18:48:33.083
> 
> 标签：wcf, security, x509certificate

我需要确保客户端在 WCF 会话期间提供的 x509 证书在其链中具有特定的证书颁发机构。

我知道我可以使用 ChainElements[index] 以编程方式检查证书链。

但我不确定如何在使用配置文件与 WCF 集成的同时执行此操作。

目前 WCF 是在配置文件中设置的，见下文：

```
<services>
  <service name="SampleService" behaviorConfiguration="wsHttpBehavior">
    <endpoint name="SampleEndPoint"
              address="http://localhost:70000/SampleService.svc"
              binding="wsHttpBinding"
              bindingConfiguration="wsHttpBinding"
              contract="SampleApp.ISampleService">
    </endpoint>
  </service>
</services>

<bindings>
  <wsHttpBinding>
    <binding name="wsHttpBinding">
      <reliableSession enabled="true" ordered="true" />
      <security>
        <message clientCredentialType="Certificate" />
      </security> 
    </binding>
  </wsHittpBinding>
</bindings>

<behaviors>
  <serviceBehaviors>
    <serviceMetadata httpGetEnabled="true" />
    <serviceDebug includeExceptionDetailInFaults="false" />
    <serviceCredentials>
      <serviceCertificate findValue="aa aa aa" 
                          storeLocation="LocalMachine" 
                          storeName="My" 
                          x509FindType="FindBySerialNumber" />
    </serviceCredentials>
  <serviceBehaviors>
</behaviors> 
```

我可以在配置文件中做些什么来告诉它确保提供的客户端证书包含特定的证书颁发机构。还是我必须绑定到 WCF 频道才能完成此操作？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:24:37.060

这可以通过 WCF 的可扩展性（[Introduction to Extensbility](http://msdn.microsoft.com/en-us/library/ms789051.aspx)）来实现。

举一个具体的例子（[如何：创建使用自定义证书验证器的服务](http://msdn.microsoft.com/en-us/library/ms733806.aspx)）

使用该信息和我从[StackoverFlow 帖子](https://stackoverflow.com/questions/2147889/c-sharp-verify-certificate-in-crl-list)中收集的信息，我创建了一个服务来检查证书的有效性，并验证它是否来自特定的证书颁发机构。

代码：

```
public class CustomX509CertificateValidator : X509CertificateValidator
  {
    public override void Validate(System.Security.Cryptography.X509Certificates.X509Certificate2 certificate)
    {
      var ch = new X509Chain();

      //RevocationMode Enumeration
      //http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509revocationmode.aspx
      ch.ChainPolicy.RevocationMode = X509RevocationMode.Online;

      //RevocationFlag Enumeration
      //http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509revocationflag.aspx
      ch.ChainPolicy.RevocationFlag = X509RevocationFlag.EntireChain;

      //The time span that elapsed during online revocation verification or downloading the 
      //certificate revocation list (CRL)
      ch.ChainPolicy.UrlRetrievalTimeout = new TimeSpan(1000);

      //VerificationFlags Enumeration
      //http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509verificationflags.aspx 
      ch.ChainPolicy.VerificationFlags = X509VerificationFlags.NoFlag;

      //The time that the certificate was verified expressed in local time
      ch.ChainPolicy.VerificationTime = DateTime.Now;

      ch.Build(certificate);

      //Check to see if the CA is a specific one
      if (ch.ChainElements[ch.ChainElements.Count - 1].Certificate.IssuerName.Name != "CN=Something, OU=PKI...,")
      {
        throw new SecurityTokenValidationException("Certificate was not issued by a trusted issuer");
      }

      foreach (X509ChainStatus s in ch.ChainStatus)
      {
        string str = s.Status.ToString();
        Console.WriteLine("str: " + str);
      }

      //Check to see if the current certificate is revoced in the current system (does this not happen in the above?
      X509Store store = new X509Store(StoreName.Disallowed, StoreLocation.LocalMachine);
      store.Open(OpenFlags.ReadOnly);
      bool isRevoked = store.Certificates.Contains(certificate);
      store.Close();

      if (isRevoked)
      {
        throw new SecurityTokenValidationException("Certificate is revoked");
      }

      if (certificate.Verify() == false)
      {
        throw new SecurityTokenValidationException("Certificate cannot be verified");
      }
    }
  } 
```

网络配置

```
<behaviors>
  <serviceBehaviors>
    <behavior name="secureHttpBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
      <serviceCredentials>
        <serviceCertificate  findValue="00 b7 70" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySerialNumber"/>
        <clientCertificate>
          <authentication certificateValidationMode="Custom"               
                          customCertificateValidatorType="WcfWebServer.CustomX509CertificateValidator, WcfWebServer"/>
        </clientCertificate>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```