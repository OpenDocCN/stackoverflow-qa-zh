# StackOverflow 问答 11087000-11087999

# python - Python简单字符串格式化错误

> ID：11087000
> 
> 赞同：1
> 
> 时间：2012-06-18T16:23:42.377
> 
> 标签：python, string

这是我的脚本，它应该解析 .txt 文件中的域列表（每个域由返回分隔），将它们分成单独的域名，使用域名向 whois 站点发送请求，检查响应以查看是否它可用，如果可用，请将其写入新文件。所以我得到了一个只有可用名称的列表。

**问题？这很简单，我只是不太了解语言，我不知道如何以字符串格式获取域名，以便对 whois 站点的请求是这样的：**

[http://whois.domaintools.com/google.com](http://whois.domaintools.com/google.com)

显然 %s 的事情不起作用。

代码：

```
#!/usr/bin/python
import urllib2, urllib
print "Domain Name Availability Scanner."
print "Enter the Location of the txt file containing your list of domains:"
path = raw_input("-->")

wordfile = open(path, "r")
words = wordfile.read().split("n")
words = map(lambda x: x.rstrip(), words)
wordfile.close()

for word in words:
    req = urllib2.Request("http://whois.domaintools.com/%s") % (word)
    source = urllib2.urlopen(req).read()
    if "This domain name is not registered" in source:
    f = open("success.txt", "a")
    f.write("%s\n") % (word)
    f.close()
  break 
```

终端错误：

```
python domain.py
Domain Name Availability Scanner.
Enter the Location of the txt file containing your list of domains:
-->a.txt
Traceback (most recent call last):
  File "domain.py", line 13, in <module>
    req = urllib2.Request("http://whois.domaintools.com/%s") % (word)
TypeError: unsupported operand type(s) for %: 'instance' and 'str' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T16:25:13.870

**修正括号：**

```
req = urllib2.Request("http://whois.domaintools.com/%s" % (word)) 
```

也：

```
f.write("%s\n" % word) 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:25:22.187

你需要使用：

```
req = urllib2.Request("http://whois.domaintools.com/%s" % word)
# ...
f.write("%s\n" % word) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T16:26:45.197

利用：

```
f.write("%s\n" % word) 
```

查看此链接，它应该解释这种格式的工作原理：[http ://docs.python.org/release/2.5.2/lib/typesseq-strings.html](http://docs.python.org/release/2.5.2/lib/typesseq-strings.html)

# python - Python - ValueError：需要超过 1 个值才能解压

> ID：11087005
> 
> 赞同：1
> 
> 时间：2012-06-18T16:24:29.783
> 
> 标签：python, django, api, oauth, vimeo

请检查这个问题[Python oauth2 - making request](https://stackoverflow.com/questions/11070885/python-oauth2-making-request)我正在我的 Web 应用程序中使用 vimeo 集成。

最初我得到了一个**oauth_signature**并且没有任何问题（没有错误），我从一开始就再次尝试了这些事情，现在我得到了**ValueError: need more than 1 value to unpack** while making this request

```
>>> r = request.get(url, headers=headers) 
```

你可以在这里查看我的代码[https://gist.github.com/2949182](https://gist.github.com/2949182)

错误是

```
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/usr/local/lib/python2.7/dist-packages/requests-0.10.1-py2.7.egg/requests/api.py", line 51, in get
return request('get', url, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/requests-0.10.1-py2.7.egg/requests/api.py", line 39, in request
return s.request(method=method, url=url, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/requests-0.10.1-py2.7.egg/requests/sessions.py", line 159, in request
headers[k] = header_expand(v)
File "/usr/local/lib/python2.7/dist-packages/requests-0.10.1-py2.7.egg/requests/utils.py", line 152, in header_expand
for i, (value, params) in enumerate(headers):
ValueError: need more than 1 value to unpack 
```

谢谢！

**更新**

```
>>> headers
{'Authorization': u'oauth_body_hash=XXXXXXXXXXXXXXXXXXXXXXXXXX,oauth_nonce=3454768,oauth_timestamp=1340035585,oauth_consumer_key=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,oauth_signature_method=HMAC-SHA1,oauth_version=1.0,oauth_signature=XXXXXXXXXXXXXXXXXXXXXXXXXXXXX,oauth_callback=http://127.0.0.1:8000/information/vimeo'} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:01:14.120

为了能够解压字典，你必须使用 .items()，所以代码是这样的：

```
for i, (value, params) in enumerate(headers.items()): 
```

现在因为那不是你的代码，你不能改变它，错误告诉你的是，如果你像这样传递标题，标题不应该是字典，而是元组（或列表）：

```
headers = [("Authorization", "Values")] 
```

它应该工作。

编辑：这不起作用。现在字典版本 {"Authorization": "Values"} 对我有用，也许更新请求会有所帮助。

# android - Android RadioButton IsSelected 不起作用

> ID：11087014
> 
> 赞同：2
> 
> 时间：2012-06-18T16:24:56.697
> 
> 标签：android

我有一个无线电组，定义了两个黑色和彩色按钮。当我尝试根据选择进行计算时，没有任何反应。知道为什么我的单选按钮不起作用吗？谢谢

```
 public void onClick(View v) {
                // TODO Auto-generated method stub
                EditText startingAmt = (EditText) findViewById(R.id.editText1);
                RadioButton black = (RadioButton) findViewById(R.id.radio0);
                RadioButton color = (RadioButton) findViewById(R.id.radio1);
                if(!TextUtils.isEmpty(startingAmt.getText().toString().trim())){

                TextView ***** = (TextView)findViewById(R.id.textView1);
                double  temp1 = 0.0,
                        endAmt = 0.0,
                        startAmt = 0.0;
                String answer;
                Editable editableValue1 = startingAmt.getText();
                startAmt = Double.parseDouble(editableValue1.toString());
                if(color.isSelected()){
                    temp1 = startAmt * 1.15;
                    endAmt = temp1 * .15;
                    endAmt = (double)Math.round(endAmt*10)/10;
                }
                if(black.isSelected()){
                    temp1 = startAmt * 1.10;
                    endAmt = temp1 * .10;
                    endAmt = (double)Math.round(endAmt*10)/10;
                } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T16:28:38.033

而是使用`isSelected()`go for `isChecked()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T16:27:50.287

使用方法[`isChecked`](http://developer.android.com/reference/android/widget/CompoundButton.html#isChecked%28%29)而不是`isSelected`. 或者您可以[`getCheckedRadioButtonId`](http://developer.android.com/reference/android/widget/RadioGroup.html#getCheckedRadioButtonId%28%29)在`RadioGroup`包含这两个`RadioButtons`.

# php - PHP 如何响应 HTTP 请求并继续处理？

> ID：11087019
> 
> 赞同：1
> 
> 时间：2012-06-18T16:25:15.413
> 
> 标签：php, http, response.redirect, http-status-code-200

我正在使用用于执行回调请求的支付网关的 API。发出回调请求时，网关希望我回复“OK”。没有更多或更少。这并不意味着 html 呈现响应。只是带有这两个字母的回调文件。请注意，这并不意味着它需要 HTTP 状态代码 200/OK……它需要“OK”一词的实际数据（而不是标头）。

所以这行不通：

```
<html><body>OK</body></html> 
```

这将起作用：

```
<?php echo "OK"; ?> 
```

但是，在我发回 OK 后，我需要在服务器端做一些事情，然后将浏览器页面重定向到另一个页面。但是当我尝试这样做时：

```
<?php
echo "OK";
header('Location: http://www.store.com/success.php');
exit;
?> 
```

网关会忽略回显“OK”，而是从我重定向到的 success.php 页面中读取 html。

那么我怎样才能发回OK但继续在我这边做事呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:29:05.777

您不能发送内容然后重定向。重定向标头设置必须单独完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:29:43.203

你可以试试用[`flush();`](http://php.net/manual/en/function.flush.php)强制php写出OK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:31:49.820

使用 javascript 或元刷新标签将重定向移动到客户端是否可以接受？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:34:18.307

在发送之前，`OK`您可以通过命令行调用 PHP 以使 PHP 表现得像受到多重威胁一样。

# actionscript-3 - 始终将特定的 Datagrid 行保留在末尾 - 也可以使用 Sorting

> ID：11087021
> 
> 赞同：0
> 
> 时间：2012-06-18T16:25:24.417
> 
> 标签：actionscript-3, apache-flex, datagrid

我被困在以下问题上：

我有`datagrid`10 个项目...我还添加了一个额外的行（第 11 行），其中显示了 prevouis 字段的总数...但我总是想将最后一行（总数）保留在最后一行数据网格（所以总是在位置 11）。

这意味着当数据网格按列排序时，最后一行的位置也会根据数据字段中的值发生变化。是否有任何简单直接的方法可以防止它与其他列一起排序，以便始终将具有总计的列放在最后？或者我最好使用什么方法？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:13:46.857

请找到下面的代码希望这可以帮助你，我尝试了一些解决方法来实现你正在寻找的东西我不确定这段代码有多可行： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.FlexEvent;

            [Bindable]
            private var dpHierarchy:ArrayCollection= new ArrayCollection([
                {name:"A", region: "Arizona", number:1},
                {name:"B", region: "Arizona", number:2},
                {name:"C", region: "California", number:3},
                {name:"D", region: "California", number:4}
            ]); 

            private function creationComp():void
            {
                var totalValue:int = 0;
                for(var i:int=0; i<dpHierarchy.length; i++)
                {
                    totalValue = totalValue + dpHierarchy[i].number;
                }
                var obj:Object = new Object();
                obj.name = "Total";
                obj.region = "==";
                obj.number = totalValue;
                dpHierarchy.addItem(obj)
                myADG.dataProvider = dpHierarchy;
            }

            private function sortHandler(obj1:Object, obj2:Object):int
            {
                var lastObj:Object = dpHierarchy.getItemAt(dpHierarchy.length-1);

                if(lastObj.number == obj1.number || lastObj.number == obj2.number)
                    return 0;

                if(obj1.number < obj2.number) {
                    return -1;
                } else if(obj1 == obj2) {
                    return 0;
                }
                return 1;
            }
        ]]>
    </fx:Script>

    <mx:AdvancedDataGrid id="myADG" x="50" y="50"
                         width="400" height="300" 
                         variableRowHeight="true" creationComplete="creationComp()">
        <mx:columns>
            <mx:AdvancedDataGridColumn dataField="name" headerText="Name" sortCompareFunction="sortHandler"/>
            <mx:AdvancedDataGridColumn dataField="region" headerText="Region" sortCompareFunction="sortHandler"/>
            <mx:AdvancedDataGridColumn dataField="number" headerText="Number" sortCompareFunction="sortHandler"/>
        </mx:columns>   

    </mx:AdvancedDataGrid>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:22:53.210

我会按这个顺序考虑几个选项。

1.  将您的摘要数据放在其他地方。这真的不是数据网格中的一行的用途。
2.  如果您真的不希望用户对数据进行排序，请不要让用户通过单击列名 (sortableColumns='false') 进行排序。
3.  为每列创建自定义排序，确保您始终将汇总数据放在最后。这是一个不错的教程：[http](http://www.switchonthecode.com/tutorials/flex-datagrid-custom-sorting) ://www.switchonthecode.com/tutorials/flex-datagrid-custom-sorting 。我想强调这将是一个高维护的想法，因为您必须为每一列构建自定义排序。

# android - Android GUI 生成器 IDE

> ID：11087026
> 
> 赞同：0
> 
> 时间：2012-06-18T16:25:39.540
> 
> 标签：android

是否有任何 IDE 可以拖放 android 的用户界面并为不同的屏幕尺寸生成 xml？我正在使用 netbeans anhd 我知道 eclipse 但它也不好 - 例如无法预览不同的屏幕尺寸等。DroidDraw 不准确。我愿意为 IDE 付费

# javascript - jquery .text() 和 unicode

> ID：11087027
> 
> 赞同：34
> 
> 时间：2012-06-18T16:25:45.120
> 
> 标签：javascript, jquery, html, unicode

我想在我的 HTML 链接文本中显示[“打开锁”字符。](http://www.fileformat.info/info/unicode/char/1f513/index.htm)

如果我直接这样做，它会正确显示`<a id="myId">&#x1f512;</a>`，但我发现无法使用 jQuery`.text()`函数动态更改它，例如：

```
 $("#myID").text(openLockText); 
```

我应该在 openLockText 中放什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-18T16:35:13.477

Javascript 内部仅支持 UTF-16。

因为这是一个扩展的 32 位 UTF 字符（不在“基本多语言平面”中），所以您需要插入“UTF-16 代理对”，它在您链接到的同一页面上很有帮助：

```
0xD83D 0xDD13 
```

IE

```
$('#myId').text('\ud83d\udd13'); 
```

更多细节可以在[RFC 4627](http://www.ietf.org/rfc/rfc4627.txt)中找到，严格来说是 JSON 的格式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T16:28:17.050

*已编辑*——**如果**它是一个可以用单个 UTF-16 字符表示的 Unicode 代码点，那么您可以在这种情况下使用 JavaScript 转义序列：

```
$('#foo').text('\uXXXX'); 
```

但是，因为您的角色需要更多位，所以这是行不通的。可能可以构建允许字符表示为 UTF-16 的字节序列，但这会很痛苦。我会去的`.html()`。

请注意，并非所有字体都为这样的“异国情调”代码点提供字形，并且根据我的经验，那些确实提供了令人难以置信的丑陋的字形。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-10T07:38:45.753

您可以将字符直接放在那里，作为带引号的字符串，例如

```
$("#myID").text(''); 
```

前提是文件是 UTF-8 编码的并且您正确[声明了字符编码](http://www.w3.org/International/O-charset.en.php)。（理论上，您可以选择使用 UTF-16 甚至 UTF-32，但不应期望浏览器支持它们。）

尽管根据 ECMAScript 标准，直接在源文档中支持非 BMP 字符是可选的，但现代浏览器允许您使用它们。自然，您需要一个可以处理 UTF-8 的编辑器，并且您需要一些输入法；例如，请参阅我的[完整 Unicode 输入](http://www.cs.tut.fi/~jkorpela/fui.html8)实用程序。

该问题包含一些未被注意到的错误：由于`id`属性值区分大小写，因此`myId`需要将拼写固定为`myID`. 并且 OPEN LOCK 字符是 U+1F513，而不是 U+1F512，所以引用`&#x1f512;`会给出错误的字符。

此外，很少有字体包含OPEN LOCK，浏览器，尤其是IE，即使系统中的某些字体包含字形，也可能很难找到字形，所以你应该给浏览器帮助并声明一个已知包含该字符的字体列表，按优先顺序。例子：

```
<style>
#myID { font-family: Symbola, Quivira, Segoe UI Symbol; }
</style>
<a id="myID">stuff</a>
<script>
 $("#myID").text('');
</script> 
```

非 BMP 字符在内部表示为代理对，并且*可以*使用代理对的组件的符号来编写`\u`，但这非常不直观

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-02T10:13:07.507

以下脚本应将 UTF32 十六进制值转换为 UTF16 对

```
function toUTF16Pair(hex) {
  hex = hex.replace(/[&#x;]/g,'');
    var x = parseInt(hex, 16);
    if (x >= 0x10000 && x <= 0x10FFFF) {
        var first = Math.floor((x - 0x10000) / 0x400) + 0xD800;
        var second = ((x - 0x10000) % 0x400) + 0xDC00;
        return {
            first: first.toString(16).toUpperCase(),
            second: second.toString(16).toUpperCase(),
          combined: '\\u'+first.toString(16).toUpperCase() + '\\u'+second.toString(16).toUpperCase()
        };
    } else {
        return {}
    }
}
```

```
<input type='text' id='in' />
<input type='button' value='Click' onclick="document.getElementById('result').innerHTML = toUTF16Pair(document.getElementById('in').value).combined" />
<p id='result'></p>
```

# android - Android替换应用程序安装失败

> ID：11087030
> 
> 赞同：4
> 
> 时间：2012-06-18T16:26:03.127
> 
> 标签：android, upgrade

我的应用程序实现了自动升级功能，因为该应用程序不会投放市场。apk 文件托管在网络服务器上。我已经实现了以下链接的第一部分

[使用 AsyncTask 并在对话框中显示下载进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog "使用 AsyncTask 并在对话框中显示下载进度")

现在，当我运行应用程序时，会发生以下事情。

1.  如果有新版本可用，则应用程序会提示用户是否要升级。 ![升级提示](../Images/255d1e8e7606366a58a7a1b3115d7065.png)

2.  如果用户选择是，则应用程序从服务器下载文件。 ![下载](../Images/1d0070c43e07cd74ec1ab4f1fa7b7654.png)

3.  完成后，应用程序会提示用户是否要替换应用程序 ![替换提示](../Images/4a32c0fa10333fb3f23bf5cb826a84cb.png)
4.  如果用户点击确定，则应用程序开始安装，但失败并显示以下屏幕 ![在此处输入图像描述](../Images/b359820ba150352b704ece9108f70b04.png)

没有提供关于为什么会发生这种情况的日志文件信息。请有人帮助我了解可能导致此问题的原因。这是生成 fianl 2 屏幕的默认 android 代码，而不是我的代码。

在异步任务上运行以下代码后会发生这种情况：

```
 protected void onPostExecute(String result) {
        super.onPostExecute(result);
        // dismiss the progress dialog
        mProgressDialog.dismiss();
        // get the file
        String path = getFilesDir().getAbsolutePath()+ File.separator + getString(R.string.apk_file);
        File file = new File(path);
        // if it exists
        if(file.exists()) {
            // create and start the intent with the new file
            Intent intent = new Intent(Intent.ACTION_VIEW); 
            intent.setDataAndType(Uri.fromFile(file), "application/vnd.android.package-archive"); 
            startActivity(intent);
        } else {
            // display error message 
            Toast.makeText(context, "File was not downloaded", Toast.LENGTH_LONG).show();
        }           
    } 
```

如果我卸载应用程序并使用浏览器转到文件位置，应用程序会自动下载，然后我可以从下载文件夹成功安装它。

这可能是应用程序在当前运行时尝试安装自身的问题吗？该文件在升级过程中下载到内部存储器，而不是 SD 卡位置，因为我无法保证用户设备会存在 SD 卡。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:04:19.090

1.  Be sure that old and new apks signed with the same key and have the same package name. Otherwise you will see the same error.

2.  Try to call `finish` to your activity(or just use `System.exit`) just after `startActivity`.

# objective-c - 如何将“initWithBytes”NSString 转换为 unsigned char*

> ID：11087031
> 
> 赞同：0
> 
> 时间：2012-06-18T16:26:07.573
> 
> 标签：objective-c, ios, nsstring, char

如何将“initWithBytes”NSString 转换为 unsigned char*？

这是 NSString 的产生方式

```
NSString *byte = [[[NSString alloc] initWithBytes:inputbytes length:inputlength encoding:NSASCIIStringEncoding] autorelease]; 
```

其中包含不应在位级别更改的字节数据（将是 base64 转换的输入）

字节中的数据为0x01 0x00 0x01，3个字节

我想把它转换成一个 unsigned char*

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:29:56.897

一般来说，您应该`NSString`直接使用而不是尝试进出 Objective-C。但是有理由降级到 C（例如，使用仅 C 的 API）所以我会幽默你。;)

如果您只需要将数据传递给另一个函数，您可以这样做：

```
const unsigned char *cString = (const unsigned char *)[byte cStringUsingEncoding: NSASCIIStringEncoding]; 
```

如果您需要修改 C 字符串（即使其成为 non- `const`），则需要制作一份副本：

```
const unsigned char *cString = (const unsigned char *)strdup([byte cStringUsingEncoding: NSASCIIStringEncoding]); 
```

然后`free()`当你完成它时：

```
free(cString); 
```

请注意，这不会修改原始 C 字符串或`NSString`您从中创建的字符串。如果需要`NSString`可以修改，请使用`NSMutableString`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:29:08.883

试试 NSString 的 cStringUsingEncoding: 方法：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-BAJHJHHD](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-BAJHJHHD)

# java - Java清理字符串值以删除不需要的字符

> ID：11087032
> 
> 赞同：-1
> 
> 时间：2012-06-18T16:26:08.800
> 
> 标签：java

我有一个 XML 文件，其中包含具有不需要的字符的值，例如

```
\xc2d
d\xa0
\xe7
\xc3\ufffdd
\xc3\ufffdd
\xc2\xa0
\xc3\xa7
\xa0\xa0
'619d813\xa03697'
\xe9.com 
```

输入示例可以是

```
name : John Hinners\xc2d
email: abc@gmail\xe9.com
and others .... 
```

期望的输出应该是

```
name : John Hinners
email: abc@gmail.com
and others .... 
```

我来自 python 背景，可以轻松完成此任务

```
def remove_non_ascii(s):
    return ''.join(i for i in s if ord(i)<128) 
```

是否有一些类似的方法可以在 Java 中执行相同的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:32:21.653

在java中它不会那么漂亮。

您可以使用正则表达式，但如果您没有简单的字符定义，最好的方法可能是这样做：

```
 StringBuilder sb = new StringBuilder();
        for (int i=0; i<s.length(); i++) {
           if (((int)s.charAt(i))<128) sb.append(s.charAt(i));
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T07:42:03.990

正如我在这里所说：

[类似问题](https://stackoverflow.com/a/31424164/2630033)

使用正则表达式

```
String clean = str.replaceAll("\\P{Print}", ""); 
```

删除所有不可打印的字符。但这也包括 \n（换行）、\t（制表符）和 \r（回车），如果你想保留这些字符，请使用：

```
String clean = str.replaceAll("[^\\n\\r\\t\\p{Print}]", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:29:56.693

```
String s = "WantedCharactersunwantedCharacters"; 
```

如果我希望剩余的字符串是“WantedCharacters”，我只需写：

```
s = s.replaceAll("unwantedCharacters", ""); 
```

[编辑]：当然，你也可以写

```
private static String removeNonAscii(String s){
    StringBuffer sb = new StringBuffer();
    for(int i=0; i<s.length(); ++i){
        if(s.charAt(i) < 128){
            sb.append(s.charAt(i));
        }
    }
    return sb.toString();
} 
```

如果这是一个令人满意的解决方案

# groovy - 在播放框架中的模板中循环两个条件？

> ID：11087035
> 
> 赞同：1
> 
> 时间：2012-06-18T16:26:12.653
> 
> 标签：groovy, playframework, template-engine

在 playframework 的视图模板中执行此操作的方法是什么？我已经用 groovy 进行了标记，因为显然，play 模板引擎是基于 groovy 的。

```
%{ 
    for(int i=0, int j = 0; i < userdata.size(), j < user.size();i = i + 4, j++){
}%
<div style="text-align: center;">
<h3>
    ${foo.get(j)}
</h3>
</div> 
```

如果这是不可能的，或者只是出于好奇：

我还尝试将 foo 作为 hashmap 传递，其键已经存在于 userdata 中。我尝试了这样的事情但无济于事：

`${foo.each{ k, v -> println "${k}:${v}" }}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:52:22.490

由于您在谈论 groovy，我假设您使用的是 playframework 1.x。Playframework 2 使用 scala 模板。

您可以循环两个条件，就像使用任何其他语言一样。语法只是有点不同。

爪哇：

```
for (int i = 0; i < 10; i++){
    for (int j = 0; j < 10; j++) {
        System.out.println(String.format("i: %d, j: %d", i, j));
    }
} 
```

游戏框架模板：

```
#{list items:0..10, as:'i'}
    #{list items:0..10, as:'j'}
        <p>i: ${i}, j: ${j}</p>
    #{/list}
#{/list} 
```

查看[#{list} 标签的文档](http://www.playframework.org/documentation/1.2.4/tags#anamelistlista)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:19:17.893

它接缝你不能用播放模板内置标签来做到这一点。此外，我在 play 1.2.4 模板中使用带有多参数初始化的 for 循环也出现编译失败。您可以使用 while 循环使其工作：

```
%{
    int j = 0, i = 0;
    while (i*i <= j) {
}%
        ${i}^2 <= ${j}
%{
        i++;
        j = j+2;
    }
}%
//prints
//0^2 <= 0
//1^2 <= 2
//2^2 <= 4 
```

# android - android 开发者网站崩溃的示例代码

> ID：11087037
> 
> 赞同：0
> 
> 时间：2012-06-18T16:26:25.607
> 
> 标签：android, android-intent

所以我刚开始用android开发，在开发网站上一步步实现示例代码。

前几个工作正常，但我坚持意图。

我已经浏览了代码及其与开发人员网站上的代码完全相同的副本。那么为什么当活动在 startActivity(intent) 发生变化时它会崩溃？

帮助 ！

这是第一个活动:::

```
package com.example.Trial;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class TrialActivity extends Activity {
    /** Called when the activity is first created. */
    public final static String EXTRA_MESSAGE = "com.example.myapp.MESSAGE";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    public void sendMessage(View view) { 
        // Do something in response to button 
        Intent intent = new Intent(this, DisaplyMessageActivity.class); 
        EditText editText = (EditText) findViewById(R.id.edit_message); 
        String message = editText.getText().toString(); 
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
        }
    } 
```

这是它调用的活动：

```
package com.example.Trial;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class DisaplyMessageActivity extends Activity { 
    @Override public void onCreate(Bundle savedInstanceState) 
    {
    super.onCreate(savedInstanceState);
    Intent intent = getIntent(); 
    String message = intent.getStringExtra(TrialActivity.EXTRA_MESSAGE);
TextView textView = new TextView(this); 
textView.setTextSize(40);
textView.setText(message); 
setContentView(textView);
} } 
```

这是 main.xml::

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <EditText
        android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:hint="@string/edit_message" />

        <Button
        android:onClick="sendMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" />

</LinearLayout> 
```

这是 string.xml:::

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">My First App</string>
    <string name="edit_message">Enter a message</string>
    <string name="button_send">Send</string>
</resources> 
```

致命例外追踪到：

06-18 21:30:51.377: E/AndroidRuntime(341): 在 com.example.Trial.TrialActivity.sendMessage(TrialActivity.java:23)

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:43:41.533

您是否包含`DisplayMessageActivity`在清单中？您的主要活动应该有一个条目，其他所有活动也应该有一个条目：

```
 <activity
        android:name=".TrialActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DisplayMessageActivity" >
    </activity> 
```

# unix - gvim 到 .vimrc 中的自定义高亮组不起作用

> ID：11087041
> 
> 赞同：14
> 
> 时间：2012-06-18T16:26:32.563
> 
> 标签：unix, vim

版本 6.3

尝试创建一个新的突出显示组来突出显示制表符和尾随空格。我在 .vimrc 中只有这些设置。

```
autocmd ColorScheme * highlight UnwanttedTab ctermbg=red guibg=darkred
match UnwanttedTab /\t/
autocmd ColorScheme * highlight TrailSpace guibg=red ctermbg=darkred
match TrailSpace / \+$/ 
colorscheme torte 
```

但是在启动vim时，我得到了这样的错误：

```
line    1:
E216: No such group or event: ColorScheme * highlight UnwanttedTab ctermbg=red guibg=darkred
line    2:
E28: No such highlight group name: UnwanttedTab /\t/
line    3:
E216: No such group or event: ColorScheme * highlight TrailSpace guibg=red ctermbg=darkred
line    4:
E28: No such highlight group name: TrailSpace / \+$/ 
```

我正在遵循本[指南](http://vim.wikia.com/wiki/Highlight_unwanted_spaces)并使用 autocmd 来防止我的突出显示设置被清除。但是还是不能上班。有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-18T19:04:11.597

您的代码的问题是`match`命令引用了尚未定义的自定义突出显示组名称。这些组名必须先使用 eg 定义，`highlight UnwanttedTab ...` **然后**再与 .一起使用`match`。将仅在您加载任何颜色方案**后**`autocmds`使用高亮组名称来定义。`highlight`

 **这是一种设置高亮组的方法，首先用组名定义语法高亮，然后为这些组名提供匹配：

```
highlight UnwanttedTab ctermbg=red guibg=darkred
highlight TrailSpace guibg=red ctermbg=darkred
match UnwanttedTab /\t/
match TrailSpace / \+$/ 
```

文章中的`autocmd`建议旨在防止您可能加载的任何颜色方案清除您的自定义突出显示组`:highlight clear`。

尝试将上面的命令与`autocmd`, 在你的`.vimrc`：

```
highlight UnwanttedTab ctermbg=red guibg=darkred
highlight TrailSpace guibg=red ctermbg=darkred
match UnwanttedTab /\t/
match TrailSpace / \+$/ 

autocmd ColorScheme * highlight UnwanttedTab ctermbg=red guibg=darkred
autocmd ColorScheme * highlight TrailSpace guibg=red ctermbg=darkred

colorscheme torte 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T11:13:33.223

你到底在用 2004 年发布的 Vim 6.3 版做什么？！

该`ColorScheme`事件仅在两年后的 Vim 7.0 中引入，也就是大约六年前。

切换到更新的 Vim 版本；那么您也可以使用现成的插件之一来突出尾随空格，例如我的[ShowTrailingWhitespace](http://www.vim.org/scripts/script.php?script_id=3966)插件。**

# python - 在 Python 中使用 lambda 进行延迟评估

> ID：11087047
> 
> 赞同：12
> 
> 时间：2012-06-18T16:26:49.690
> 
> 标签：python, lambda, deferred-execution

在一个循环中，我试图将两个节点的两个 value() 的比较推迟到以后。

```
class Node():
    def __init__(self, v):
        self.v = v
    def value(self):
        return self.v

nodes = [Node(0), Node(1), Node(2), Node(3), Node(4), Node(2)]
results = []
for i in [0, 1, 2]:
    j = i + 3
    results.append(lambda: nodes[i].value() == nodes[j].value())

for result in results:
    print result 
```

结果都是 True （因为 i,j==2,5 对于所有 lambdas）。如何推迟 lambda 的执行，直到它被实际调用，但使用正确的变量绑定？并且 lambda 中的表达式不一定都是相等的……还有很多其他更复杂的表达式。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T16:31:36.083

要将当前值`i`和函数绑定`j`到函数而不是让它在外部作用域中查找，您可以使用闭包或默认参数值。最简单的方法是在 lambda 中使用默认参数值：

```
for i in [0, 1, 2]:
    j = i + 3
    results.append(lambda i=i, j=j: nodes[i].value() == nodes[j].value()) 
```

这是一个闭包的样子：

```
def make_comp_func(i, j):
    return lambda: nodes[i].value() == nodes[j].value()

for i in [0, 1, 2]:
    j = i + 3
    results.append(make_comp_func(i, j)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-18T16:42:26.063

将其包装在另一个 lambda 中：

```
results.append((lambda x, y: lambda: nodes[x].value() == nodes[y].value()) (i, j)) 
```

或者以更好的方式，使用`partial`：

```
from functools import partial

results.append(partial(lambda x, y: nodes[x].value() == nodes[y].value(), i, j)) 
```

默认参数技巧是，嗯......一个技巧，我建议避免它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T16:38:06.377

惯用的方法是使用默认参数：

```
[f() for f in [lambda: i for i in range(3)]]
[2, 2, 2] 
```

将其更改为：

```
[f() for f in [lambda i=i: i for i in range(3)]]
[0, 1, 2] 
```

# asp.net - jqgrid asp.net webforms 服务器端 SelectedRow 属性为空

> ID：11087049
> 
> 赞同：2
> 
> 时间：2012-06-18T16:26:55.853
> 
> 标签：asp.net, webforms, jqgrid-asp.net

我正在尝试使此示例正常工作 [Get Selected Row (on server)](http://www.trirand.net/examples/grid/selection/selectedrow/default.aspx)

但对我来说 SelectedRow 属性总是空的。

唯一的区别是我使用 Page_load 事件来填充我的网格。当我按下表单上的按钮时，它会进行回发，并重新填充丢失行选择的网格。

示例代码：

```
if (!Page.IsPostBack )
    {
        UserBusinessObject userBO = new UserBusinessObject();
        GRDUsers.DataSource = userBO.GetUsersbyProfileID(SessionFacade.Id);
        GRDUsers.DataBind();
    }

 protected void btnEdit_Click(object sender, EventArgs e)
{
     if (String.IsNullOrEmpty(GRDUsers.SelectedRow))
     {
         lblError.Visible = true;
     }
     else
     {
         Response.Redirect(string.Format("~/Manage/EditUserRoles.aspx?username={0}",GRDUsers.SelectedRow));

     }

} 
```

我还注意到，在单击按钮时，我的页面加载会触发两次（第一次回发是真的，第二次是假的）根据 jqgrid 帖子，这是故意的。但我认为这可能会导致我的悲伤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:55:50.277

您始终必须设置 DataSource，因为它没有保存在 ViewState 或其他任何地方。所以代码必须是：

```
UserBusinessObject userBO = new UserBusinessObject();
GRDUsers.DataSource = userBO.GetUsersbyProfileID(SessionFacade.Id);

if (!Page.IsPostBack )
{
    GRDUsers.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:10:13.037

与 JQGrid 的人一起工作，我们已经解决了这个问题。这是他们网格中的一个错误，已在 v4.5.0.0 中修复

[详情见这里](http://www.trirand.net/forum/default.aspx?g=posts&t=2882)

我可以确认这修复了错误，并且世界再次一切正常

# ajax - 具有文件和文本输入的 Ajax 表单

> ID：11087051
> 
> 赞同：2
> 
> 时间：2012-06-18T16:26:59.003
> 
> 标签：ajax, upload, form-data

我正在尝试创建一个发送文件和文本输入的 ajax 上传表单。我已经设法使用以下代码发送文件：

```
var $form = $('#form');
var formData = new FormData();

formData.append('file', $('#file')[0].files[0]);

$.ajax({
    url: 'upload.php',
    type: 'POST',
    dataType: 'html',
    data: formData,
    processData: false,
    contentType: false
}); 
```

但是，我还需要发送文本输入，所以我尝试将整个表单传递给`FormData`对象：

```
var $form = $('#form');
var formData = new FormData($form);

$.ajax({
    url: 'upload.php',
    type: 'POST',
    dataType: 'html',
    data: formData,
    processData: false,
    contentType: false
}); 
```

但后来我在'upload.php'中什么也没得到

如何将文本和文件输入一起发送？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:52:00.377

经过大量搜索后找到了这个答案（[上一个答案），并且在我的应用程序中效果很好：](https://stackoverflow.com/a/10899796/1535514)

```
$("form#data").submit(function(){

var fd = new fd($(this)[0]);

var request = jQuery.ajax({
  url: gurl,
  type: 'POST',
  cache: false,
  contentType: false,
  processData: false,
  data: fd
  }); 
```

我还会检查您的 AJAX 调用，dataType: 'html' 可能会导致错误。

# objective-c - 键盘出现时滚动条内容大小发生变化

> ID：11087053
> 
> 赞同：0
> 
> 时间：2012-06-18T16:27:04.313
> 
> 标签：objective-c, xcode, uiscrollview, keyboard

我有一个带有很多文本框的滚动视图的视图控制器，当我单击其中一个文本框并出现键盘时，滚动视图的内容大小不足以在键盘打开的情况下显示所有内容。每次键盘弹出时如何更改内容大小并在消失后将其重新设置？还有一种方法可以让它在每个文本字段上都没有 resignfirstresponder 的情况下消失吗？
希望有人可以帮助我，我对Objective C很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:34:03.400

`contentSize`可能不是您应该更改的属性。

尝试更改`frame`滚动视图的属性（即使其变小*n* pt，其中*n*是键盘的高度 - 纵向为 216，横向为 162。）

滚动视图应该在您更改它的框架后让您的内容正确滚动。

内容大小属性是正在滚动的东西的大小 - 这不会改变，它只是你可以看到改变的量。

（如果你觉得闪光，你可以动画帧的高度变化:)

# mysql - MySQL：我如何更新随机选择的 50% 的行？

> ID：11087059
> 
> 赞同：21
> 
> 时间：2012-06-18T16:27:25.103
> 
> 标签：mysql, random, percentage

我想更新随机选择的表中 50% 的行。有没有办法做到这一点？

编辑：只是为了澄清它应该始终更新 50% 的记录，但在这 50% 中，必须随机选择行（例如，不仅是前 50%）。换句话说，平均而言，应该更新所有其他记录。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-18T16:30:54.227

应该这样工作：

```
UPDATE table SET x = y WHERE RAND() < 0.5 
```

是的，测试过，有效。但当然，平均只有 50% 的行，而不是 50%。

正如 SQL 92 规范中所写的，`WHERE`必须为每个元组执行该子句，因此`rand()`必须重新评估以产生预期的结果（而不是选择所有行或根本不选择行）。

规范摘录（强调我的）：

> 一般规则
> 
> 1)`<search condition>`应用于 T 的每一行。 的结果是 T 的结果为真的`<where clause>`那些 T 行的表。`<search condition>`
> 
> 2)对 T 的每一`<subquery>`行`<search condition>` **有效地执行其中的每个，**并将结果应用于T`<search condition>`的给定行。如果任何执行 `<subquery>`包含对 T 的列的外部引用，则引用是对的值T 的给定行中的该列。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T16:38:40.370

正如我所说，这是一段很长的路，用一种伪代码来描述。)

```
$x = SELECT COUNT(*) FROM some_table;
@ids = SELECT id FROM some_table ORDER BY RAND() LIMIT $x / 2;
UPDATE some_table WHERE id IN (@ids); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:23:47.513

UPDATE table SET volumnvalue = x WHERE RAND() <= 0.5 将导致非常接近 50% 的记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-24T05:03:58.760

`RAND`应该是随机的，你不会得到一个固定的百分位分割。

最好使用模运算符`%`来查找每 X 个项目。这对于像主键这样的唯一 id 列最有效。

尝试运行此查询，请务必指定您的表名和 id 列名：

选择每第二行，可被 2 整除 `SELECT * from <your_table_name> where <id_column_name> %2=0`

选择每 6 行，可被 6 整除 `SELECT * from <your_table_name> where <id_column_name> %6=0`

一旦您对`SELECT`结果看起来不错感到满意，您可以使用更新语法更改查询以更新记录，使用相同的`WHERE`子句

# wpf - 检查用户是否在 Bing 地图中移动地图

> ID：11087060
> 
> 赞同：1
> 
> 时间：2012-06-18T16:27:31.893
> 
> 标签：wpf, events, bing-maps, zooming, panning

我正在尝试在 WPF 中使用 Bing 地图，但一切都令人困惑，因为在线搜索让我产生了错误的希望。我会搜索一些东西，但要获取 AJAX 版本而不是 WPF 版本。如果有人可以向我指出适当的文件或帮助解决这个问题，那么我将永远欠他们的债。

我的 WPF 应用程序中有一张地图，我想在用户滚动时对其进行跟踪。我尝试将地图绑定到 DragEnter 事件，但这并没有做任何事情。我的问题是是否有一个事件可以用来检查用户是否正在平移或缩放地图？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:39:12.460

该事件`ViewChangeOnFrame`似乎做你想做的事。
请参阅[处理地图事件](http://msdn.microsoft.com/en-us/library/hh868035.aspx)

```
<m:Map ViewChangeOnFrame="MyMap_ViewChangeOnFrame" ...> 
```

[来自 MSDN](http://msdn.microsoft.com/en-us/library/hh868035.aspx)

> 假设您在 XAML 设计代码中定义了一个名为 CurrentPosition 的 TextBlock 元素，您可以在地图视图在位置之间设置动画时跟踪它的当前位置。此代码跟踪有界地图视图的西北角和东南角的纬度和经度位置。

```
void MyMap_ViewChangeOnFrame(object sender, MapEventArgs e)
{
    //Gets the map that raised this event
    Map map = (Map) sender;
    //Gets the bounded rectangle for the current frame
    LocationRect bounds = map.BoundingRectangle;
    //Update the current latitude and longitude
    CurrentPosition.Text += String.Format("Northwest: {0:F5}, Southeast: {1:F5} (Current)",
                bounds.Northwest, bounds.Southeast);
} 
```

# c++ - C ++中地图的多个键

> ID：11087068
> 
> 赞同：3
> 
> 时间：2012-06-18T16:27:55.230
> 
> 标签：c++, stl, map

我有一张表，其中的条目是这样的

```
Row - Column1 - Column2 - Column3 Column4

 1     0X0A      1          2      A
 2     0X0B      2          2      B
 3     0x0C      3          2      C 
```

现在我想使用地图，这样我就可以使用第 1 列或第 2 列作为获取行的键。我应该使用什么样的地图来实现这一目标？

（注意-表格只是为了解释，而不是确切的要求）我想过使用多图，但这并不能解决问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T16:30:17.443

[尝试来自boost](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/index.html)的多索引容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:35:46.423

定义一个类似于`pair`自定义比较器的类，如果第一个成员或第二个成员匹配，则表示相等，但不一定两者都匹配。然后，您可以使用该类作为您的密钥类型。您可能需要为每个永远不会在数据中使用的成员指定一个特定值，以用作构造函数中的默认值，以避免由于剩余数据而仅初始化第一个成员的键偶尔匹配第二个成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:32:21.597

您可以使用一个映射从第 1 列映射到行，而另一个映射从第 2 列映射到行。根据需要重复尽可能多的列

# position - 使用加速度计+陀螺仪的小汽车模型位置计算

> ID：11087076
> 
> 赞同：1
> 
> 时间：2012-06-18T16:28:18.883
> 
> 标签：position, accelerometer, gyroscope, inertial-navigation

我想计算一辆小型遥控车的位置（相对于起始位置）。汽车在平坦的表面上移动，例如：房间地板。现在，我正在使用加速度计和陀螺仪。确切地说，这个板——> [http://www.sparkfun.com/products/9623](http://www.sparkfun.com/products/9623)

作为第一步，我只是在 x 和 y 轴上获取加速度计数据（因为汽车在表面上移动）并双重整合数据以获得位置。我使用的公式是：

```
vel_new = vel_old + ( acc_old + ( (acc_new - acc_old ) / 2.0 ) ) * SAMPLING_TIME;
pos_new = pos_old + ( vel_old + ( (vel_new - vel_old ) / 2.0 ) ) * SAMPLING_TIME;
vel_old = vel_new;
pos_old = pos_new;
acc_new = measured value from accelerometer 
```

以上公式基于此文档： http: [//perso-etis.ensea.fr/~pierandr/cours/M1_SIC/AN3397.pdf](http://perso-etis.ensea.fr/~pierandr/cours/M1_SIC/AN3397.pdf)

然而，这给出了可怕的错误。

在阅读了这个论坛上的其他类似问题后，我发现我需要以某种方式使用陀螺仪从上述加速度值（每次来自 acc_new）中减去重力分量。[这个想法在 Google 技术讲座视频Sensor Fusion on Android Devices: A Revolution in Motion Processing](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)中得到了很好的解释，时间 23:49。

现在我的问题是如何减去重力分量？我从陀螺仪获得角速度。如何将其转换为加速度，以便我可以从加速度计的输出中减去它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:59:24.933

[它不起作用，](https://stackoverflow.com/a/7835988/341970)这些传感器不够精确，无法计算位置。

您所指的视频中也解释了原因。

你能做的最好的就是根据车轮的转速来获得速度。如果您还知道属于速度的航向，则可以对速度进行积分以获得位置。远非完美，但它应该给你一个合理的位置估计。

我不知道您如何获得汽车的航向，这取决于您拥有的硬件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:27:31.883

对于这些设备，恐怕阿里的回答是相当正确的。但是，您为什么不尝试搜索 arduino 航位推算，它将涵盖人们尝试类似板的故事？

这是搜索后出现的链接，我认为这可能会对您有所帮助：

[将 IMU 转换为 INS](http://arduino.cc/forum/index.php?topic=144801.0)

即使看起来它们都失败了，您也可能会遇到变通方法，这些变通方法会将错误减少到可接受的数量，或者使用其他传感器校准您的算法，使其回到正轨，因为加速度的平方误差以及陀螺仪白噪声破坏精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T11:48:32.480

你有一个巨大的错误的一个原因是方程似乎是错误的。

示例：要获得更新的 vel，请使用`Velnew=velold+((accelold+accelnew)/2)*sampletime`...

看起来你在等式中有一个额外的加速项。单独使用它并不能纠正所有的错误......正如你所说的，需要纠正重力和其他事物的影响。

# yii - Yii CActiveForm CheckBox 未正确显示

> ID：11087078
> 
> 赞同：0
> 
> 时间：2012-06-18T16:28:26.880
> 
> 标签：yii, yii-components

我是使用 Yii 框架的新手。我显示一个列表一个复选框。但它没有正确显示。这是我想要的：http: [//imageshack.us/photo/my-images/703/checkboxgood.png](http://imageshack.us/photo/my-images/703/checkboxgood.png)

但是，这是我得到的：http: [//imageshack.us/photo/my-images/715/checkbox.png](http://imageshack.us/photo/my-images/715/checkbox.png)

无论如何，这是我用来生成此视图的代码：

```
 <div class="row">
        <?php echo $form->labelEx($model,'kat3'); ?>
        <?php echo $form->checkBox($model,'kat3'); ?>
    ?php echo $form->error($model,'kat3'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'kat4'); ?>
        <?php echo $form->checkBox($model,'kat4'); ?>
        <?php echo $form->error($model,'kat4'); ?>
    </div> 
```

我是 Web 开发的新手，对 CSS 有点了解。有人有建议吗？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:25:36.433

Yii 带有默认的 CSS 类，这就是你所看到的。

为了自定义这些，您必须为此部分实现自己的自定义 CSS 类。您可以将您的表单包装到您的表单类中，并根据需要定义 CSS 规则。

# asp.net-mvc-3 - MVC3 中日期时间字段的自动绑定

> ID：11087081
> 
> 赞同：0
> 
> 时间：2012-06-18T16:28:33.123
> 
> 标签：asp.net-mvc-3, datetime, data-binding, model

我有一个包含许多日期字段的页面，可以在客户端动态添加。我有一个日期时间？此字段的编辑器模板上的属性：

```
[Display(Name = "Bar Admission Date")]
public DateTime? AdmissionDate { get; set; } 
```

当我提交表单时，我在 AdmissionDate 字段中得到一个空数据，因为 binder 不知道该字段的格式。

关于如何克服这个问题，我有 2 个想法：

1.  在模型中创建一个字符串字段并在服务器端解析它。简单而且相当快。
2.  为日期字段编写自定义模型绑定器。我不喜欢这个解决方案，因为我不知道我将使用的所有字段的键。

有更好的解决方案吗？我搜索了如何重载 TextboxFor 方法以传递文化，但我没有找到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:32:43.553

听起来您应该使用可枚举（IList/ICollection）的`DateTime?`. [Phil Haacked 有一篇关于模型绑定到列表的好文章（即使项目的数量是动态的）](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。

**更新**

至于格式问题，我会看看如何[为 project/model binder 设置文化](https://stackoverflow.com/questions/5050641/asp-net-mvc-model-binder-with-global-number-formats)。

# php - 在以标点符号分隔但未正确分隔的单词中添加空格

> ID：11087085
> 
> 赞同：0
> 
> 时间：2012-06-18T16:28:41.887
> 
> 标签：php

我在变量中有生物信息：

**$bio = '文字，文字，文字...';**

我修剪该文本并在最后使用 rtrim php 函数

```
trim($bio);
rtrim($bio,',.;:- _!$&#'); 
```

问题是有时生物信息具有这样的结构：

```
$bio = 'hello, i am jason!and i like cars,sports,beer and boats, tv, papers.'; 
```

**当标点符号分隔的两个单词没有用空格分隔时，有没有办法添加空格？像“我是杰森！和”或“汽车、运动、啤酒”**

$bio 应该是：

```
$bio = 'hello, i am jason and i like cars, sports, beer and boats, tv, papers.'; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:38:52.493

您总是可以有一个循环来检查字符串的每个索引，如果它等于您拥有的给定标点之一，则创建一个新字符串，例如

```
$bio = substr($bio,0,index of punctuation+1)." ".substr($bio,index of punctuation+1,length     of bio); 
```

它肯定很笨重，但应该可以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:45:39.153

您可以使用[`preg_replace()`](http://www.php.net/manual/en/function.preg-replace.php)替换出现的标点符号，后跟字母（数字？）文字（中间没有空格）替换为相同的标点符号，后跟空格，其余部分:)

# c# - 接受任何结构的任何数据的 wcf 服务（REST 或 SOAP 或 WEB API）

> ID：11087086
> 
> 赞同：1
> 
> 时间：2012-06-18T16:28:42.280
> 
> 标签：c#, .net, wcf, azure, asp.net-web-api

我正在尝试构建服务/API。在我的场景中，会有很多监控健康的设备。例如，心跳监视器将监视心跳发送心跳数据。脉搏率监测器将监测脉搏发出的数据，类似地，您可以想象很多设备以自己的格式向我的服务发送数据。我正在尝试构建的服务/API 应该能够接受任何格式的数据并将其存储在 azure 表或 blob 存储中。有关如何开始使用此设计的任何指示都会有所帮助。我也不确定 asp.net web api 或 WCF 是否会是更好的选择。

我提到的服务中也没有业务逻辑。从服务的角度来看，我不必知道数据的结构。我所要做的就是坚持它并在被要求时检索它。而已

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:43:53.173

考虑到您（最终）必须知道这些数据是什么，我建议您在遇到它们时定义它们中的每一个，然后处理这些数据。

现在付款或稍后付款。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:08:16.193

有些事情要考虑...

您仍然需要能够识别哪些数据是哪些数据，因此您可以摆脱的最低限度是具有 Id 或 Name 字段的结构，然后是您提到的包含任何格式数据的其余部分的字符串数据.

因此，您要么需要提交者理解该格式并将其与 Id 或 Name 字段一起发送，要么您需要设置多个方法供用户在向服务提交数据时调用，例如：

```
.addHeartBeat()
.addPulseRate() 
```

等等......并让该方法将 Id 或 Name 添加到您的数据中。然后，您将需要一种相应的方式来请求返回该数据 - 使用相同的结构（用户需要知道 Id，或者调用特定方法）。您还需要考虑请求者可能使用的其他标准，例如日期范围、特定患者等。然后所有这些可能的过滤器字段都需要与 blob 数据分开，以便有效地查询它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:14:00.753

看起来您想构建一个文件上传加载服务，该服务接受任何类型的文件并将其存储在 blob 中（从字面上看，您可以将要监视的所有内容视为文件）。首先，考虑生成 SAS 并允许客户端直接将文件上传到 blob 存储。这可以节省一些精力，并提供更好的性能。如果这不是一个选项，则使用 ASP.NET Web API。虽然 WCF 也支持 REST，但从长远来看，建议使用 ASP.NET Web API 来构建新的 RESTful 服务。WCF 可用于构建 SOAP 服务，但 SOAP 要求客户端发送 SOAP 信封而不是任意数据。

最好的祝福，

明旭。

# perl - 如何使用 Geo::Coder::US 和 Geo::TigerLine 将美国街道地址转换为地理空间坐标？

> ID：11087087
> 
> 赞同：4
> 
> 时间：2012-06-18T16:28:43.667
> 
> 标签：perl, geolocation, geocoding, geospatial, cpan

我在[Geo::Coder::US](http://p3rl.org/Geo%3a%3aCoder%3a%3aUS)和[Geo::Coder::US::Import](http://p3rl.org/Geo%3a%3aCoder%3a%3aUS%3a%3aImport)工作。他们说我需要导入数据库，他们的示例没有显示如何执行此操作，至少对于现在可行的方式。Geo::Coder::US 想要查看 Berkeley DB。Geo::Coder::US::Import 有示例代码来创建不起作用的数据库。编码：

```
Geo::Coder::US::Import->load_tiger_data( "TGR06075" ); 
```

崩溃，说：

> 无法读取 TGR06075.RTC：./import.pl 第 7 行没有这样的文件或目录

字符串过时了吗？有人可以提供将填充数据库的示例代码，以便 Geo::Coder::US 拥有它想要的一切吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:43:19.583

我在[Geo::Coder::US::Import](http://search.cpan.org/~sderle/Geo-Coder-US-1.00/US/Import.pm#SEE_ALSO)的 CPAN Docs 中找到了[这个](http://www.census.gov/geo/www/tiger/)。您也许可以将文档中给出的示例与这些文件的新版本一起使用。看来您无论如何都应该自己获取文件。它们似乎没有随模块一起提供。

因此，它找不到数据库文件是有道理的。

我偷偷看了一下[Import.pm](http://cpansearch.perl.org/src/SDERLE/Geo-Coder-US-1.00/US/Import.pm)：

```
sub load_tiger_data {
    my ($class, $source) = @_;

    my $DB = \%Geo::Coder::US::DB;
    croak "No database specified" unless tied( %$DB );

    open TIGER, "<$source.RTC" or croak "can't read $source.RTC: $!";
    Geo::TigerLine::Record::C->parse_file( \*TIGER, \&_type_C );

    open TIGER, "<$source.RT1" or croak "can't read $source.RT1: $!";
    Geo::TigerLine::Record::1->parse_file( \*TIGER, \&_type_1 ); 
```

看起来它附加`.RTC`到参数，使其成为文件名。因此，我建议尝试在人口普查网站上查找当前数据，将其放在工作目录附近的某个位置，然后使用数据的文件名再次尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:11:51.297

您要查找的文件可能位于此处： ftp: [//ftp2.census.gov/geo/tiger/TIGER2011/](ftp://ftp2.census.gov/geo/tiger/TIGER2011/)

# java - 如何将 JSON 映射到 JAX-B 对象？

> ID：11087088
> 
> 赞同：1
> 
> 时间：2012-06-18T16:28:49.490
> 
> 标签：java, xml, web-services, rest

我有一些传入的 JSON 需要映射到 JAXB 对象。我需要将 JSON 转换为 XML，然后填充 JAXB 对象，还是可以将 JSON 直接映射到对象？无论哪种情况，有人可以告诉我这样做的最佳库是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:44:10.503

[gson](http://code.google.com/p/google-gson/)是一个灵活的库，可以将 JSON 字符串转换为等效的 Java 对象，包括预先存在的 Java 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:29:55.160

如果您使用的是 Jackson，您可以在此处查看 JacksonJAXBAnnotations [http://wiki.fasterxml.com/JacksonJAXBAnnotations](http://wiki.fasterxml.com/JacksonJAXBAnnotations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:25:43.217

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

> 我需要将 JSON 转换为 XML，然后填充 JAXB 对象，还是可以将 JSON 直接映射到对象？

在将输入交给 JAXB (JSR-222) 实现之前，您不需要将 JSON 转换为 XML。如果您正在使用 Jersey 实现（可能还有其他实现），您可以设置您的 JAX-RS 方法，如下所示，JAXB 将用于 XML 和 JSON 处理。

```
@GET
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Path("{id}")
public Customer read(@PathParam("id") long id) {
    return entityManager.find(Customer.class, id);
} 
```

JAX-RS 实现具有允许您覆盖默认转换的`MessageBodyReader`/机制。`MessageBodyWriter`我不知道 Gson 对 JAXB 注释有任何支持。Jackson 是一个 object-to-JSON 库，它提供[对 JAXB 注释子集的支持](http://wiki.fasterxml.com/JacksonJAXBAnnotations)（[可能令人遗憾](https://twitter.com/cowtowncoder/status/183984609556578304)）。EclipseLink MOXy 是一个 JAXB 实现，已[扩展为支持 JSON 绑定](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)。有关在 JAX-RS 环境中使用它的示例，请参阅：

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:46:48.093

作为一种轻量级方法，您可以通过 StAX 使用 StAXON - JSON，[https://github.com/beckchr/staxon/](https://github.com/beckchr/staxon/)。StAXON 为 JAXB 提供支持，请参阅[https://github.com/beckchr/staxon/wiki/Using-JAXB](https://github.com/beckchr/staxon/wiki/Using-JAXB)。

使用 StAXON，将带有 JAXB 注释的模型绑定到 JSON 就像

```
JsonXMLMapper<Person> mapper = new JsonXMLMapper<Person>(Person.class);
Person person = mapper.readObject(input);
...
mapper.writeObject(output, person); 
```

StAXON 还支持 JAX-RS，请参阅[https://github.com/beckchr/staxon/wiki/Using-JAX-RS](https://github.com/beckchr/staxon/wiki/Using-JAX-RS)。

# jquery - 如果 url 存在，则关闭对话框并重定向

> ID：11087096
> 
> 赞同：0
> 
> 时间：2012-06-18T16:29:13.000
> 
> 标签：jquery, jquery-ui, dialog

我在链接中添加了一个 css 类，单击该类时会关闭 jquery ui 对话框，但我希望它重定向到页面（在 iframe 中）并关闭对话框。

目前，如果链接具有 href 值，它只会重定向并且不会关闭对话框。如果没有 href 值，它会根据需要关闭对话框。

```
<a href="http://...." class="button hide" target="contentFrame">Some Text</a>

$(".hide").bind("click", function(){
  $(".dialog").dialog('close');
}); 
```

所以我需要先以某种方式关闭对话框，然后再进行重定向。

我可以覆盖点击并以某种方式做到这一点吗？如果没有 href 值，或者它为空，我不需要重定向，只需关闭对话框即可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:33:35.340

试试这个：

```
$(".hide").bind("click", function(event){
  event.preventDefault();
  $(".dialog").dialog('close');
  window.location.href = $(this).attr('href');
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T16:34:41.910

关闭对话框后需要手动重定向（这样可以控制顺序）。类似于以下内容：

```
$(".hide").bind("click", function(e){
  e.preventDefault();
  $(".dialog").dialog('close');
  $iframe.attr('src',$(this).attr('href'));
}) 
```

请记住，您必须这样做，`preventDefault()`否则链接将像往常一样单击。有关示例和更多信息，请参阅[jQuery 文档](http://api.jquery.com/event.preventDefault/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:33:31.763

您可以使用

```
window.location = "http://www.google.com/" 
```

重定向。把它放在你的对话框关闭行之后。

# comments - ANTLR 在评论和返回中禁用特定的用户路径

> ID：11087097
> 
> 赞同：0
> 
> 时间：2012-06-18T16:29:13.360
> 
> 标签：comments, antlr

当我从我的 Grammarfile 生成 Parser 和 Lexer 时，一切正常而不是问题，ANTLR 自动将整个用户目录添加到任何返回和注释。这是不好的。例如：

```
return "C:\\Users\\##\\workspace\\project\\src\\Grammar.g" 
```

这个工具也对任何评论做同样的事情：

```
// $ANTLR 3.4 C:\\Users\\##\\workspace\\project\\src\\Grammar.g 2012-06-18 18:25:20 
```

我必须发布我的项目，所以有什么办法可以禁用这个“功能”？

问候，红线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:38:19.497

路径似乎取决于您调用 ANTLR 的位置和方式。我无法使用 ANTLRWorks 实现这一点，但使用命令行 ANTLR 你可以执行此操作。您可以执行以下操作（示例适用于 Windows，但也应该可以在其他操作系统上重现）：

1.  [为命令行下载](http://www.antlr.org/download/antlr-3.4-complete.jar)Antlr 并将其复制到 eg

    `C:\Program Files (x86)\ANTLRworks\antlr-3.4-complete.jar`.

2.  打开 Windows 命令行 ( `cmd.exe`) 并切换到语法文件所在的目录：

    `cd C:\Users[path to the eclipse project]\src\some\package\name`

3.  调用

    ```
    java -jar "C:\Program Files (x86)\ANTLRworks\antlr-3.4-complete.jar" MyGrammar.g 
    ```

    从命令行。

生成的 java 文件将只包含您的语法文件的名称，不再包含路径。

这个答案来自我自己的问题[Remove (absolute) paths in ANTLR generated java classes:](https://stackoverflow.com/questions/12385765/remove-absolute-paths-in-antlr-generated-java-classes)最后我自己回答了。

# javascript - 查看元素的所有 dom 事件

> ID：11087099
> 
> 赞同：9
> 
> 时间：2012-06-18T16:29:13.703
> 
> 标签：javascript, jquery, jquery-ui, dom-events

我有一个 jQuery UI 日期选择器，当您单击日期时，将我的 URL 哈希清除为`#`，并且不会更改文本框中的日期。

我假设在某个地方还有一些其他的 JavaScript 实用程序，它也有某种委托事件，它也被调用，抛出一个错误，并杀死 jquery 处理程序。

我如何单步执行或查看所有委托事件与*此 dom 元素*匹配。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T16:36:40.793

Chrome 的开发工具可以帮助解决这个问题：

1.  将 Chrome 指向页面
2.  右键单击 jQuery UI 日期选择器中的日期并选择“检查元素”。
3.  在最右边，有一个带有各种东西的手风琴。靠近底部的是“事件监听器”。（当前版本的 Chrome 开发工具对此非常聪明，包括查询 jQuery 的处理程序链。）
4.  展开“事件侦听器”树项，您将看到与该元素相关的挂钩事件列表，即使处理程序没有专门针对*该*元素设置。（例如，如果您使用问题上的 upvote 按钮执行此操作，您会看到它与 和`click`挂钩。）因此您可以绕过这些来查看与该元素的该事件相关的直接和委托处理程序。`a.vote-up-off``document`

除此之外，您可以使用未缩小版本的 jQuery 并在您单击日期选择器中的日期时遍历事件调度。

当然，[Gabe 展示](https://stackoverflow.com/a/11087155/157247)了如何通过未记录的 jQuery`events`数据获取特定于 jQuery 的处理程序。（这不会向您显示委托的处理程序（除非您遍历祖先树），也不会向您显示可能附加的非 jQuery 处理程序，但它仍然是非常有用的东西。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T16:32:32.807

使用 jQuery，您可以通过访问`events`数据的键来查看所有元素事件。

[jsFiddle](http://jsfiddle.net/N4Y4R/)

例子：

**HTML**

```
<input type="text" id="myelement" />​ 
```

**JS**

```
$(function() {

    var myelement = $('#myelement');
    myelement.click(function() {

        console.log('anonymous event');

    });

    myelement.click(anotherEvent);
    myelement.change(anotherEvent);

    var events = myelement.data('events');

    console.log('Number of click events:' + events.click.length);
    console.log('Number of change events:' + events.change.length);

});

function anotherEvent(){
    console.log('another event');   
} 
```

# ruby - 遵循 Python/Flask Heroku 教程时出现“工头启动”错误

> ID：11087100
> 
> 赞同：4
> 
> 时间：2012-06-18T16:29:21.457
> 
> 标签：ruby, heroku, foreman

遵循所有指示。运行时出现此错误`foreman start`：

```
C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/foreman-0.47.0/lib/fo reman/engine.rb:39:in `trap': unsupported signal SIGHUP (ArgumentError)
       from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/foreman-0.47.0/lib/foreman/engine.rb:39:in `start'
       from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/foreman-0.47.0/lib/foreman/cli.rb:34:in `start'
       from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/thor-0.15.3/lib/thor/task.rb:27:in `run'
       from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/thor-0.15.3/lib/thor/invocation.rb:120:in `invoke_task'
       from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/thor-0.15.3/lib/thor.rb:275:in `dispatch'
       from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/thor-0.15.3/lib/thor/base.rb:425:in `start'
       from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/foreman-0.47.0/bin/foreman:7:in `<top (required)>'
       from C:/Program Files (x86)/ruby-1.9.3/bin/foreman:19:in `load'
       from C:/Program Files (x86)/ruby-1.9.3/bin/foreman:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:02:58.277

所以，显然`foreman`不能在 Windows 上工作，这在 Heroku 教程中没有提到。希望他们解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T15:42:52.710

我遇到了类似的问题并解决了它，我认为它也应该解决您的问题（请务必卸载以前安装的 ruby​​，因为有时有多个相同版本的安装）。解决方案如下：[Foreman start 在 Windows 上按照 Heroku 教程失败](https://stackoverflow.com/questions/11434287/foreman-start-fails-on-windows-following-heroku-tuturial/11436332#11436332)

# c++ - 段错误和内存泄漏

> ID：11087102
> 
> 赞同：2
> 
> 时间：2012-06-18T16:29:31.143
> 
> 标签：c++, c, memory-management

我的问题有两个部分：

*   是否有可能，如果在分配内存之后但在释放内存之前发生段错误，这会泄漏内存（也就是说，内存永远不会被释放导致内存泄漏）？
*   如果是这样，有没有办法确保在发生段错误时清理分配的内存？

我一直在阅读 C++ 中的内存管理，但找不到任何关于我的具体问题的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T16:32:19.280

如果发生段错误，操作系统负责清理程序持有的所有资源。

编辑：

无论您的程序如何终止，现代操作系统都会清理任何泄漏的内存。内存只会在程序的生命周期内泄漏。大多数操作系统还会清理许多其他类型的资源，例如打开的文件和套接字连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T16:40:08.093

> 是否有可能，如果在分配内存之后但在释放内存之前发生段错误，这会泄漏内存（也就是说，内存永远不会被释放导致内存泄漏）？

是和否：崩溃的进程应该完全由操作系统绑定。但是请考虑您的进程产生的其他进程：它们可能不会完全终止。但是通常这些不应该占用太多资源，但这可能会因您的程序而异。见[http://en.wikipedia.org/wiki/Zombie_process](http://en.wikipedia.org/wiki/Zombie_process)

> 如果是这样，有没有办法确保在发生段错误时清理分配的内存？

如果程序不是关键的（这意味着如果它崩溃就没有生命危险）我建议修复分段错误。如果您确实需要能够处理分段错误，请参阅此主题的答案：[如何在 Linux 中捕获分段错误？](https://stackoverflow.com/questions/2350489/how-to-catch-segmentation-fault-in-linux)

**更新**：请注意，尽管可以处理 SIGSEGV 信号（并在程序流中继续），但它不是一种安全的依赖方式，因为 - 正如下面的评论中所指出的 - 它是未定义的行为，意味着不同的平台/compilers/... 可能会有不同的反应。

因此，通过任何方式可能修复分段错误（以及 Windows 上的访问冲突）都应该具有第一优先级。仍然使用建议的解决方案以这种方式处理信号必须经过彻底测试，如果放入生产代码中，您必须了解它并得出任何后果 - 这可能会有所不同并取决于您的要求，因此我不会命名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T16:31:55.680

C++ 标准不关心段错误（这是特定于平台的事情）。

在实践中，这真的取决于你做什么，以及你对“内存泄漏”的定义是什么。理论上，您可以为 seg-fault 信号注册一个处理程序，您可以在其中进行所有必要的清理。但是，无论如何，任何现代操作系统都会自动清除终止进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:51:17.923

现代操作系统将应用程序的内存分开，以便能够在它们之后进行清理。分段错误的问题是它们通常只在出现问题时发生。此时，默认行为是关闭应用程序，因为它不再按预期运行。

同样，除非在某些奇怪的情况下，您的应用程序可能已经做了一些您无法解释的事情，如果它遇到了分段错误。因此，“清理”几乎是不可能的。为了保证可接受的回滚状态，仔细使用类似于事务数据库的内存并不是不可能的，但是这样做（并且取决于级别的细粒度）可能会非常乏味。

一个更实用的版本可能是在应用程序组件之间提供您自己的沙盒类型，并在组件死机时重新启动它，将其恢复到可接受的先前保存状态。这样你就可以刷新它所有分配的内存并让它从头开始。但是，您仍然会丢失截至上一个检查点尚未保存的任何数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T16:34:27.407

一，有系统负责清理的资源。其中之一是记忆。您不必担心在段错误上永久泄漏 RAM。

二是存在系统不负责清理的资源。您可以编写一个程序，将其 pid 插入数据库并在关闭时将其删除。这不会因段错误而被删除。您可以 1) 添加一个处理程序来清理这种非系统资源，或者 2) 从一开始就修复程序中的错误。

# jquery - 如何让用户输入文字 不使用输入字段？

> ID：11087103
> 
> 赞同：-13
> 
> 时间：2012-06-18T16:29:32.260
> 
> 标签：jquery

文本占位符是列表项的列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:31:57.113

您可以简单地将`contentEditable`属性添加到相关`li`元素：

```
<li contentEditable>placeholder text</li> 
```

然而，这不一定是一个很好的解决方案，因为跨浏览器支持`contentEditable`并且因为您没有指定您的意图是什么（它们应该只是为了用户的娱乐而可编辑，还是您将更改的文本提交到数据库或在某种脚本中使用客户端的值？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:31:50.800

也许您可以将 .keypress() 事件附加到您的 LI 项目并根据键进行切换？

**编辑：** 好吧，如果有人感兴趣，如果我们将它附加到页面的主体，那么时髦的 keypress() 方法似乎有效。请参阅 jsfiddle [http://jsfiddle.net/reygonzales/36RX3/9/](http://jsfiddle.net/reygonzales/36RX3/9/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T16:34:16.537

像这样放置 contenteditable="true" 的属性：

```
<li contenteditable="true">text to edit</li> 
```

我从头开始构建了 kitgui.com，它使用了这种技术。我会在那里查看 UI 中的技术，以便您了解一个好的 INLINE 方法

你还需要有一种方法让人们保存东西，这是一个完全不同的答案

# c# - 了解 COM/WSH 行为 - 后期绑定的 IDispatch _Default 和 Item？

> ID：11087104
> 
> 赞同：0
> 
> 时间：2012-06-18T16:29:32.623
> 
> 标签：c#, com, activex, idispatch, createinstance

我试图复制我在 C# 中的 JScript 中观察到的行为。我正在使用 IDispatch 枚举成员并在后期绑定对象上调用它们。我是一个完整的 C++ 菜鸟，并且对 COM 的了解足够多，以至于非常危险。这是我的问题：

*   DISPID_VALUE 是否始终为零 (0)？（似乎是的）
*   调用 COM 对象时，我应该何时调用 DISPID_VALUE 成员？（例如，当接口本身被索引或调用时......？）
*   何时调用 .Item 是否有任何规则/提示？
*   为什么在下面的示例中，BindingFlags.SetProperty 对 .Cells(x, x) 起作用（而不是 BindingFlags.InvokeMethod）？它是在调用 _Default(x, x) 吗？项目（x，x）？它怎么知道这样做？我怎样才能知道它在调用哪个？
*   是否有一些关于调用后期绑定的 IDispatch COM 对象的好文档？

在下面的示例中，Excel 电子表格的单元格 1,1 将值设置为某些文本并“加粗”。

考虑以下 WSH JScript：

```
 var objExcel = new ActiveXObject("Excel.Application");
objExcel.Workbooks.Add();
objExcel.Visible = true;
objExcel.Cells(1,1).Value = "some test value";
objExcel.Cells(1,1).Font.Bold = true; 
```

此 C# 代码创建相同的结果（是的，抱歉，它非常冗长）：

```
 Type axType = Type.GetTypeFromProgID("Excel.Application");
object objExcel = Activator.CreateInstance(axType);
object workbooks = objExcel.GetType().InvokeMember("Workbooks", System.Reflection.BindingFlags.GetProperty, null, objExcel, null);
objExcel.GetType().InvokeMember("Visible", System.Reflection.BindingFlags.SetProperty, null, objExcel, new object[] { true });
workbooks.GetType().InvokeMember("Add", System.Reflection.BindingFlags.InvokeMethod, null, workbooks, new object[] { true });
object cell = objExcel.GetType().InvokeMember("Cells", System.Reflection.BindingFlags.GetProperty, null, objExcel, new object[] { 1, 1 });
cell.GetType().InvokeMember("Value", System.Reflection.BindingFlags.SetProperty, null, cell, new object[] { "some test value" });
object font = cell.GetType().InvokeMember("Font", System.Reflection.BindingFlags.GetProperty, null, cell, null);
font.GetType().InvokeMember("Bold", System.Reflection.BindingFlags.SetProperty, null, font, new object[] { true }); 
```

当我有时间时，我计划尝试并了解更多有关此内容的一种方法是让 JScript 调用我将使用日志记录/调试创建的 C# COM 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:04:18.943

是的，在 oaidl.idl 中，DISPID_VALUE 是 #defined 为 0。为属性分配 0 使其成为*默认*属性。许多语言允许省略默认属性的名称。等效于 C# 索引器。

这只是一个约定，COM IDispatch 派生接口当然不需要公开默认属性。该属性也不必命名为“值”。这样做很常见。[ComVisible] C# 接口的索引器将得到 dispid 0，但名称为“Item”。周围有很多其他变化，你不能假设任何事情。

BindingFlags.SetProperty 有效，因为 Cells 成员是属性，而不是方法。它看起来有点像一个方法，只是因为它是一个*索引*属性。这在 C# 中几乎不受支持（仅用于索引器），但在 COM 或 VB.NET 中不受限制。您的示例代码中使用了 COM IDispatch 接口，它允许按名称查找成员。IDispatch::GetIDsOfNames() 完成了这项工作，将字符串映射到数字（dispid），然后可以使用 IDispatch::Invoke() 调用属性或方法。请注意，这仅适用于一种方式，即名称到编号。IDispatch 不支持等效的反射。

*通过在 VB.NET 中编写或使用 C# 版本 4动态*关键字来摆脱丑陋的 C# 代码。

# html - 删除 HTML5 中的边距

> ID：11087107
> 
> 赞同：-6
> 
> 时间：2012-06-18T16:29:46.130
> 
> 标签：html, css

我无法删除上、下、左和右 frmo 标签的边距。我究竟做错了什么？

**HTML5** 你可以访问这些地址中的代码：http: [//www.demo31.com/validacion/personal](http://www.demo31.com/validacion/personal)

**CSS**

```
    @CHARSET "utf-8";

    /* 临时 CSS 重置 */  
    *{  
        边距：0 自动；  
        填充：0自动；  
    }  

    /* 告诉浏览器将 HTML 5 元素呈现为块 */  
    页眉，页脚，旁边，导航，文章，部分{  
        显示：块；  
    }

    html，正文{
        边距：0 自动；
        填充：0自动；
        字体系列：Calibri、Verdana、Helvetica、Tahoma、Sans-Serif；
        文本对齐：对齐；
        字体大小：66%；
        背景颜色：#1d293f；
        顶部：0px；
        字体大小调整：无；
        字体样式：正常；
        字体变体：正常；
        字体粗细：正常；
        字体高度：正常；
    }

    标题，h1{
        边距：0 自动；
        填充：0；
        边框：0；
        /*边距：-7px -1px -4px -1px;*/
        溢出：隐藏；/*删除上边距页面*/
    }

    标头{
        宽度：80%；
        背景颜色：#fbf585；
    }

    部分{
        边距：0 自动；
        填充：0自动；
        宽度：80%；
        背景颜色：#ffffff；  
    }
    部分 > h1{
        宽度：80%；
        背景颜色：#CCCCCC；
        边框间距：0px；
        字体大小：10em；        
        字母间距：0.25em；
        文本对齐：左；
    }

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:34:18.233

***不***删除所有边距`margin: 0;` *`margin: 0 auto;`*

 *一旦定义：

```
* {  
    margin: 0;  
    padding: 0; /*auto is not valid for padding*/  
} 
```

您永远不需要为任何其他元素再次设置这些属性。

`*`就是一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-11T20:11:16.140

`auto;`对填充不起作用，您需要设置 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-16T20:37:50.203

你只需要这样做

```
body{    
    margin: 0px;
    padding: 0px;
} 
```*

# java - 带有 Nexus 的 Maven - 原因：java.util.zip.ZipException：打开 zip 文件时出错

> ID：11087109
> 
> 赞同：1
> 
> 时间：2012-06-18T16:29:56.353
> 
> 标签：java, maven, build, continuous-integration, nexus

我在使用 Maven 时遇到了一些问题，因为我无法让它工作。当我在调试模式下构建 Maven 项目时，控制台上出现的错误如下所示：

正常模式输出

```
ERROR] Failed to parse plugin descriptor for org.apache.maven.plugins:maven-clean-plugin:2.4.1 (C:\Users\me\.m2\repository\org\apache\maven\plugins\maven-clean-plugin\2.4.1\maven-clean-plugin-2.4.1.jar): error in opening zip file -> [Help 1]
ERROR]
ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
ERROR] Re-run Maven using the -X switch to enable full debug logging. 
```

调试模式输出

```
org.apache.maven.plugin.PluginDescriptorParsingException: Failed to parse plugin descriptor for org.apache.maven.plugins:maven-clean-plugin:2.4.1 (C:\Users\me\.m2\repository\org\apache\maven\plugins\maven-clean-plugin\2.4.1\maven-clean-plugin-2.4.1.jar): error in opening zip file
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.extractPluginDescriptor(DefaultMavenPluginManager.java:212)
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getPluginDescriptor(DefaultMavenPluginManager.java:147)
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getMojoDescriptor(DefaultMavenPluginManager.java:261)
        at org.apache.maven.plugin.DefaultBuildPluginManager.getMojoDescriptor(DefaultBuildPluginManager.java:185)
        at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.setupMojoExecution(DefaultLifecycleExecutionPlanCalculator.java:152)
        at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.setupMojoExecutions(DefaultLifecycleExecutionPlanCalculator.java:139)
        at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.calculateExecutionPlan(DefaultLifecycleExecutionPlanCalculator.java:116)
        at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.calculateExecutionPlan(DefaultLifecycleExecutionPlanCalculator.java:129)
        at org.apache.maven.lifecycle.internal.BuilderCommon.resolveBuildPlan(BuilderCommon.java:92)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.util.zip.ZipException: error in opening zip file
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:114)
        at java.util.jar.JarFile.<init>(JarFile.java:133)
        at java.util.jar.JarFile.<init>(JarFile.java:112)
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.extractPluginDescriptor(DefaultMavenPluginManager.java:170) 
```

*请注意，如果我在 settings.xml 文件中添加代理条目，那么它工作正常，所以显示的错误有点误导。*

我尝试通过反复试验来调查问题，发现问题与代理服务器的配置方式有关。

如果我在文件中添加代理服务器的详细信息，`M2/settings.xml`那么它工作正常。这不是我想做的，因为我在本地使用 Nexus 存储库。使用 Nexus 时，所有请求都应该通过 nexus，所以我不需要通过 Maven 配置文件配置代理。

我之前已经让它与通过 Nexus GUI 屏幕（在管理 > 服务器 > HTTP 代理设置下）添加的代理配置一起工作，但由于某种原因，这次它不接受它。

这是我的 settings.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>

<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<!--
 | This is the configuration file for Maven. It can be specified at two levels:
 |
 |  1\. User Level. This settings.xml file provides configuration for a single user, 
 |                 and is normally provided in ${user.home}/.m2/settings.xml.
 |
 |                 NOTE: This location can be overridden with the CLI option:
 |
 |                 -s /path/to/user/settings.xml
 |
 |  2\. Global Level. This settings.xml file provides configuration for all Maven
 |                 users on a machine (assuming they're all using the same Maven
 |                 installation). It's normally provided in 
 |                 ${maven.home}/conf/settings.xml.
 |
 |                 NOTE: This location can be overridden with the CLI option:
 |
 |                 -gs /path/to/global/settings.xml
 |
 | The sections in this sample file are intended to give you a running start at
 | getting the most out of your Maven installation. Where appropriate, the default
 | values (values used when the setting is not specified) are provided.
 |
 |-->
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ~/.m2/repository
  <localRepository>/path/to/local/repo</localRepository>
  -->

  <!-- interactiveMode
   | This will determine whether maven prompts you when it needs input. If set to false,
   | maven will use a sensible default value, perhaps based on some other setting, for
   | the parameter in question.
   |
   | Default: true
  <interactiveMode>true</interactiveMode>
  -->

  <!-- offline
   | Determines whether maven should attempt to connect to the network when executing a build.
   | This will have an effect on artifact downloads, artifact deployment, and others.
   |
   | Default: false
  <offline>false</offline>
  -->

  <!-- pluginGroups
   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.
   | when invoking a command line like "mvn prefix:goal". Maven will automatically add the group identifiers
   | "org.apache.maven.plugins" and "org.codehaus.mojo" if these are not already contained in the list.
   |-->
  <pluginGroups>
    <!-- pluginGroup
     | Specifies a further group identifier to use for plugin lookup.
    <pluginGroup>com.your.plugins</pluginGroup>
    -->
  </pluginGroups>

  <!-- proxies
   | This is a list of proxies which can be used on this machine to connect to the network.
   | Unless otherwise specified (by system property or command-line switch), the first proxy
   | specification in this list marked as active will be used.
   |-->
  <proxies>
    <!-- proxy
     | Specification for one proxy, to be used in connecting to the network.
     |
    <proxy>
      <id>optional</id>
      <active>true</active>
      <protocol>http</protocol>
      <username>proxyuser</username>
      <password>proxypass</password>
      <host>myProxy.local.com</host>
      <port>8080</port>
      <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
    </proxy>
    -->
  </proxies>

  <!-- servers
   | This is a list of authentication profiles, keyed by the server-id used within the system.
   | Authentication profiles can be used whenever maven must make a connection to a remote server.
   |-->
  <servers>
    <!-- server
     | Specifies the authentication information to use when connecting to a particular server, identified by
     | a unique name within the system (referred to by the 'id' attribute below).
     | 
     | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are 
     |       used together.
     |-->   

    <!-- Another sample, using keys to authenticate.
    <server>
      <id>siteServer</id>
      <privateKey>/path/to/private/key</privateKey>
      <passphrase>optional; leave empty if not used.</passphrase>
    </server>
    -->
  </servers>

  <!-- mirrors
   | This is a list of mirrors to be used in downloading artifacts from remote repositories.
   | 
   | It works like this: a POM may declare a repository to use in resolving certain artifacts.
   | However, this repository may have problems with heavy traffic at times, so people have mirrored
   | it to several places.
   |
   | That repository definition will have a unique id, so we can create a mirror reference for that
   | repository, to be used as an alternate download site. The mirror site will be the preferred 
   | server for that repository.
   |-->
  <mirrors>
    <!-- mirror
     | Specifies a repository mirror site to use instead of a given repository. The repository that
     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used
     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.
     |
    <mirror>
      <id>mirrorId</id>
      <mirrorOf>repositoryId</mirrorOf>
      <name>Human Readable Name for this Mirror.</name>
      <url>http://my.repository.com/repo/path</url>
    </mirror>
     -->
     <mirror>
            <!--This sends everything else to /public -->
            <id>nexus</id>
            <mirrorOf>*</mirrorOf>
            <url>http://localhost:8280/nexus/content/groups/public</url>
    </mirror>
  </mirrors>

  <!-- profiles
   | This is a list of profiles which can be activated in a variety of ways, and which can modify
   | the build process. Profiles provided in the settings.xml are intended to provide local machine-
   | specific paths and repository locations which allow the build to work in the local environment.
   |
   | For example, if you have an integration testing plugin - like cactus - that needs to know where
   | your Tomcat instance is installed, you can provide a variable here such that the variable is 
   | dereferenced during the build process to configure the cactus plugin.
   |
   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles
   | section of this document (settings.xml) - will be discussed later. Another way essentially
   | relies on the detection of a system property, either matching a particular value for the property,
   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a 
   | value of '1.4' might activate a profile when the build is executed on a JDK version of '1.4.2_07'.
   | Finally, the list of active profiles can be specified directly from the command line.
   |
   | NOTE: For profiles defined in the settings.xml, you are restricted to specifying only artifact
   |       repositories, plugin repositories, and free-form properties to be used as configuration
   |       variables for plugins in the POM.
   |
   |-->
  <profiles>
    <!-- profile
     | Specifies a set of introductions to the build process, to be activated using one or more of the
     | mechanisms described above. For inheritance purposes, and to activate profiles via <activatedProfiles/>
     | or the command line, profiles have to have an ID that is unique.
     |
     | An encouraged best practice for profile identification is to use a consistent naming convention
     | for profiles, such as 'env-dev', 'env-test', 'env-production', 'user-jdcasey', 'user-brett', etc.
     | This will make it more intuitive to understand what the set of introduced profiles is attempting
     | to accomplish, particularly when you only have a list of profile id's for debug.
     |
     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.
    <profile>
      <id>jdk-1.4</id>

      <activation>
        <jdk>1.4</jdk>
      </activation>

      <repositories>
        <repository>
          <id>jdk14</id>
          <name>Repository for JDK 1.4 builds</name>
          <url>http://www.myhost.com/maven/jdk14</url>
          <layout>default</layout>
          <snapshotPolicy>always</snapshotPolicy>
        </repository>
      </repositories>
    </profile>
    -->

    <!--
     | Here is another profile, activated by the system property 'target-env' with a value of 'dev',
     | which provides a specific path to the Tomcat instance. To use this, your plugin configuration
     | might hypothetically look like:
     |
     | ...
     | <plugin>
     |   <groupId>org.myco.myplugins</groupId>
     |   <artifactId>myplugin</artifactId>
     |   
     |   <configuration>
     |     <tomcatLocation>${tomcatPath}</tomcatLocation>
     |   </configuration>
     | </plugin>
     | ...
     |
     | NOTE: If you just wanted to inject this configuration whenever someone set 'target-env' to
     |       anything, you could just leave off the <value/> inside the activation-property.
     |
    <profile>
      <id>env-dev</id>

      <activation>
        <property>
          <name>target-env</name>
          <value>dev</value>
        </property>
      </activation>

      <properties>
        <tomcatPath>/path/to/tomcat/instance</tomcatPath>
      </properties>
    </profile>
    -->
        <profile>
            <id>nexus</id>
            <!--Enable snapshots for the built in central repo to direct -->
            <!--all requests to nexus via the mirror -->
            <repositories>
                <repository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases><enabled>true</enabled><updatePolicy>always</updatePolicy></releases>
                    <snapshots>
                        <enabled>true</enabled>
                        <updatePolicy>always</updatePolicy>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>      
  </profiles>

  <!-- activeProfiles
   | List of profiles that are active for all builds.
   |
  <activeProfiles>
    <activeProfile>alwaysActiveProfile</activeProfile>
    <activeProfile>anotherAlwaysActiveProfile</activeProfile>
  </activeProfiles>
  -->
  <!--make the profile active all the time -->
  <activeProfiles>
   <activeProfile>nexus</activeProfile>
  </activeProfiles>

</settings> 
```

## 编辑

在初始下载期间，会看到以下校验和警告

```
Downloading: http://localhost:8280/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom
[WARNING] Checksum validation failed, expected <html><body><h1>It but is 12179caec26a089cabcbb75c4dbe0bdfe60951f7 for http://localhost:8280/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom
[WARNING] Checksum validation failed, expected <html><body><h1>It but is 12179caec26a089cabcbb75c4dbe0bdfe60951f7 for http://localhost:8280/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom
Downloaded: http://localhost:8280/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom (44 B at 0.0 KB/sec)
[WARNING] The POM for org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
Downloading: http://localhost:8280/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.jar
[WARNING] Checksum validation failed, expected <html><body><h1>It but is 12179caec26a089cabcbb75c4dbe0bdfe60951f7 for http://localhost:8280/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.jar
[WARNING] Checksum validation failed, expected <html><body><h1>It but is 12179caec26a089cabcbb75c4dbe0bdfe60951f7 for http://localhost:8280/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.jar
Downloaded: http://localhost:8280/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.jar (44 B at 0.1 KB/sec) 
```

如果我删除 Nexus 配置并直接下载，它确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:08:40.657

只需尝试删除语言环境存储库 .m2/repository ，然后从命令行重试构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T10:40:08.383

是的，从您的 .m2 存储库中删除 jar 并重试，如果这不起作用，而不是从您的 nexus 存储库中删除 jar，可能是当 nexus 试图拉出该 jar 时，它已损坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:18:43.573

我认为 ZipException 意味着您的文件已损坏。由于您已尝试删除存储库文件夹但没有任何反应，我们可能应该探索可能性。

您的网络是否在代理后面？你用的是什么Nexus版本？如果您使用的是旧版本，您可能想查看此错误报告：[https ://issues.sonatype.org/browse/NEXUS-3638](https://issues.sonatype.org/browse/NEXUS-3638)

我假设你有一个at的`settings.xml`文件。尝试运行：`nexus mirror``C:\Users\me\.m2\`

```
jar -tvf C:\Users\me\.m2\repository\org\apache\maven\plugins\maven-clean-plugin\2.4.1\maven-clean-plugin-2.4.1.jar 
```

如果您的 Nexus 存储库没有匿名访问权限，您应该包括 Nexus 存储库的用户名和密码。

```
<servers>
    <server>
            <id>nexus</id>
            <username>username</username>
            <password>password</password>
     </server>
</servers> 
```

# php - MAMP PRO - 内存/WordPress 问题

> ID：11087120
> 
> 赞同：0
> 
> 时间：2012-06-18T16:30:28.490
> 
> 标签：php, wordpress, mamp

我正在本地安装 WordPress 并使用最新版本的 Mamp Pro。当我去保存自定义菜单或生成表单（使用重力表单）时，POST 超时。

我已将 php.ini 文件中的内存以及 WP_CONFIG 文件中的内存增加到 256M。我还将时间限制从 30 秒增加到 60 秒。

我知道这不是插件或主题问题，而且我已经多次重新安装了 MAMP、WordPress 等。

我看过其他帖子，这似乎只是一个内存问题，但这根本没有解决我的问题。

这在我的另一台计算机上不是问题，而只是在我的 MB Pro 上。我不确定是否可以尝试配置其他 PHP 设置或其他 MAMP 设置以使其正常工作。

此外，仅作记录，如果我将所有内容推送到我的实时服务器（Media Temple）就没有问题，所以我知道这是我的本地机器。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T03:26:45.350

在 php.ini 中，尝试[打开](http://www.jhuskisson.com/code-tidbits/re-enabling-error-reporting-in-mamp)[并`display_errors`](http://www.jhuskisson.com/code-tidbits/re-enabling-error-reporting-in-mamp)查看是否出现任何问题。我能想象的唯一另一件事是您的安装无法写入 MAMP 的 MySQL 数据库。

# ssl - Java SSL - InstallCert 识别证书，但仍然“无法找到有效的证书路径”错误？

> ID：11087121
> 
> 赞同：7
> 
> 时间：2012-06-18T16:30:42.620
> 
> 标签：ssl, ssl-certificate, java

以为我会遇到与其他人相同的问题，我一直在经历许多类似的问题和潜在的解决方案，但没有运气。

我正在使用的信任库是 cacerts，位于 Java 1.6.0 JRE 的 lib/security 中（构建 1.6.0_20-b02 ......这可能是问题的根源吗？）。我也尝试过 jssecacerts。

使用 InstallCert（根据发布的其他类似问题），我可以看到我的证书实际上已安装且有效（并且我已将其删除、重新导入等以确保我看到正确的数据）：

```
java InstallCert <my host name>
Loading KeyStore jssecacerts...
Opening connection to <my host name>:443...
Starting SSL handshake...
No errors, certificate is already trusted 
```

签入 keytool 和 Portecle，重新导入证书（我尝试使用 -showcert 从 openssl 生成，从浏览器导出并 scp'ing 等）给我“这已经存在于这里的另一个别名下”类型信息。因此，证书进入工具的方式似乎没有任何问题。

在代码中强制显式 trustStore 路径没有任何区别，在所有情况下，当我打开调试（通过 javax.net.debug 的 setProperty 到“all”）时，我最终看到的是：

```
main, SEND TLSv1 ALERT:  fatal, description = certificate_unknown
main, WRITE: TLSv1 Alert, length = 2 [Raw write]: length = 7 0000: 15
03 01 00 02 02 2E                               ....... main, called
closeSocket() main, handling exception:
javax.net.ssl.SSLHandshakeException:
sun.security.validator.ValidatorException: PKIX path building failed:
sun.security.provider.certpath.SunCertPathBuilderException: unable to
find valid certification path to requested target 
```

不幸的是，我不能允许通过实现我自己的 TrustManager 来覆盖检查 - 它必须实际检查。

我从主机获得的证书有许多扩展名（准确地说是 9 个），这让我想知道它们是否是这个问题的一部分。

我还能检查/尝试什么？切换到不同的 JRE 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:12:18.773

我的猜测是发生了以下任何一种情况：

a) 您在 Web 服务器上运行您的代码。他们经常使用他们自己的信任库——那么你真的确定`cacerts`在你的代码执行时使用的是它吗？

b) 默认情况下，Java 将尝试通过下载和解释 CRL 来检查证书的有效性。如果您在代理后面，下载将失败，因此整个 PKIX 检查将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:49:13.547

SSL 调试跟踪将显示您正在使用的 cacerts 文件，只要您不自己手动加载它。很明显，你没有使用你认为的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:01:34.847

您仍然可以通过实施自己的信任管理器来检查证书。[我在这里](https://stackoverflow.com/questions/2290570/pkix-path-building-failed-while-making-ssl-connection)遇到了类似的问题。我也尝试将证书添加到`cacerts`但无济于事。

在您的信任管理器中，您需要显式加载证书。基本上我必须做的是这样的：

首先，我创建一个使用实际证书文件的信任管理器：

```
public class ValicertX509TrustManager implements X509TrustManager {

    X509TrustManager pkixTrustManager;

    ValicertX509TrustManager() throws Exception {

        String valicertFile = "/certificates/ValicertRSAPublicRootCAv1.cer";
        String commwebDRFile = "/certificates/DR_10570.migs.mastercard.com.au.crt";
        String commwebPRODFile = "/certificates/PROD_10549.migs.mastercard.com.au.new.crt";

        Certificate valicert = CertificateFactory.getInstance("X509").generateCertificate(this.getClass().getResourceAsStream(valicertFile));
        Certificate commwebDR = CertificateFactory.getInstance("X509").generateCertificate(this.getClass().getResourceAsStream(commwebDRFile));
        Certificate commwebPROD = CertificateFactory.getInstance("X509").generateCertificate(this.getClass().getResourceAsStream(commwebPRODFile));

        KeyStore keyStore = KeyStore.getInstance("JKS");
        keyStore.load(null, "".toCharArray());
        keyStore.setCertificateEntry("valicert", valicert);
        keyStore.setCertificateEntry("commwebDR", commwebDR);
        keyStore.setCertificateEntry("commwebPROD", commwebPROD);

        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance("PKIX");
        trustManagerFactory.init(keyStore);

        TrustManager trustManagers[] = trustManagerFactory.getTrustManagers();

        for(TrustManager trustManager : trustManagers) {
            if(trustManager instanceof X509TrustManager) {
                pkixTrustManager = (X509TrustManager) trustManager;
                return;
            }
        }

        throw new Exception("Couldn't initialize");
    }

    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        pkixTrustManager.checkServerTrusted(chain, authType);
    }

    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        pkixTrustManager.checkServerTrusted(chain, authType);
    }

    public X509Certificate[] getAcceptedIssuers() {
        return pkixTrustManager.getAcceptedIssuers();
    }
} 
```

现在，使用这个信任管理器，我必须创建一个套接字工厂：

```
public class ValicertSSLProtocolSocketFactory implements ProtocolSocketFactory {

    private SSLContext sslContext = null;

    public ValicertSSLProtocolSocketFactory() {
        super();
    }

    private static SSLContext createValicertSSLContext() {
        try {
            ValicertX509TrustManager valicertX509TrustManager = new ValicertX509TrustManager();
            SSLContext context = SSLContext.getInstance("TLS");
            context.init(null, new ValicertX509TrustManager[] { valicertX509TrustManager}, null);
            return context;
        }

        catch(Exception e) {
            Log.error(Log.Context.Net, e);
            return null;
        }
    }

    private SSLContext getSSLContext() {
        if(this.sslContext == null) {
            this.sslContext = createValicertSSLContext();
        }

        return this.sslContext;
    }

    public Socket createSocket(String host, int port, InetAddress clientHost, int clientPort) throws IOException {
        return getSSLContext().getSocketFactory().createSocket(host, port, clientHost, clientPort);
    }

    public Socket createSocket(final String host, final int port, final InetAddress localAddress, final int localPort, final HttpConnectionParams params) throws IOException {
        if(params == null) {
            throw new IllegalArgumentException("Parameters may not be null");
        }

        int timeout = params.getConnectionTimeout();
        SocketFactory socketFactory = getSSLContext().getSocketFactory();

        if(timeout == 0) {
            return socketFactory.createSocket(host, port, localAddress, localPort);
        }

        else {
            Socket socket = socketFactory.createSocket();
            SocketAddress localAddr = new InetSocketAddress(localAddress, localPort);
            SocketAddress remoteAddr = new InetSocketAddress(host, port);
            socket.bind(localAddr);
            socket.connect(remoteAddr, timeout);
            return socket;
        }
    }

    public Socket createSocket(String host, int port) throws IOException {
        return getSSLContext().getSocketFactory().createSocket(host, port);
    }

    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException {
        return getSSLContext().getSocketFactory().createSocket(socket, host, port, autoClose);
    }

    public boolean equals(Object obj) {
        return ((obj != null) && obj.getClass().equals(ValicertSSLProtocolSocketFactory.class));
    }

    public int hashCode() {
        return ValicertSSLProtocolSocketFactory.class.hashCode();
    }
} 
```

然后我刚刚注册了一个新协议：

```
Protocol.registerProtocol("vhttps", new Protocol("vhttps", new ValicertSSLProtocolSocketFactory(), 443));
PostMethod postMethod = new PostMethod(url);
for (Map.Entry<String, String> entry : params.entrySet()) {
    postMethod.addParameter(entry.getKey(), StringUtils.Nz(entry.getValue()));
}

HttpClient client = new HttpClient();
int status = client.executeMethod(postMethod);
if (status == 200) {
    StringBuilder resultBuffer = new StringBuilder();
    resultBuffer.append(postMethod.getResponseBodyAsString());
    return new HttpResponse(resultBuffer.toString(), "");
} else {
    throw new IOException("Invalid response code: " + status);
} 
```

唯一的缺点是我必须`vhttps`为这个特定的证书创建一个特定的协议 ()。

# android - Android SurfaceView用图片填充背景

> ID：11087122
> 
> 赞同：2
> 
> 时间：2012-06-18T16:30:44.827
> 
> 标签：android, background, surfaceview, image, fill

我是一名初学者/中级 java 学生，我刚开始使用 android 2D 编程。我在surfaceView中工作并想设置背景，但问题是我不知道如何使背景填充100％的屏幕，这就是我绘制背景的方式：

```
public GFXSurface(Context context) {
    super(context);
    mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.roadtest);
    getHolder().addCallback(this);
    mThread = new ViewThread(this);
}
public void doDraw(Canvas canvas){
    canvas.drawBitmap(mBitmap, 0, 0, null);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:49:33.273

像这样的东西应该可以解决问题，在获取位图后放置它

```
float scale = (float)mBitmap.getHeight()/(float)getHeight();
int newWidth = Math.round(mBitmap.getWidth()/scale);
int newHeight = Math.round(mBitmap.getHeight()/scale);
Bitmap scaledBitmap = Bitmap.createScaledBitmap(mBitmap, newWidth, newHeight, true); 
```

然后像你已经做的那样画它:)

# ios - 从纵向视图控制器呈现模态横向视图控制器

> ID：11087141
> 
> 赞同：2
> 
> 时间：2012-06-18T16:32:10.253
> 
> 标签：ios, ios4, uiviewcontroller, modalviewcontroller

我有一个只有肖像的 VC，它呈现了一个只有风景的 VC。我正在努力看看如何让它发挥作用。我很幸运地调用了一个动画来旋转模态 VC，但它看起来有点狡猾。

我坚持使用 iOS 4.3，所以没有故事板。

我想要的是......

```
[landscapeVC setOrentation:UIDeviceOrentaionLanscape];
[portraitVC presentModalViewController:landscapeVC Animated:YES]; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T16:34:21.857

在 PortraitVC 的 viewDidLoad 方法和 shouldautorotate 方法中使用它：

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO];
 [[self view] setBounds:CGRectMake(0, 0, 480, 320)];
 [[self view] setCenter:CGPointMake(160, 240)];
 [[self view] setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 
```

# c++ - 用于替换映射向量的外部存储器数据结构

> ID：11087142
> 
> 赞同：6
> 
> 时间：2012-06-18T16:32:10.390
> 
> 标签：c++, algorithm, memory, data-structures, stl

我正在对流网络进行迭代计算，在此期间我需要记录每个源对每个边缘上的流的贡献量。任何一条边上的流量平均是由 2% 的源引起的，所以我定义`vector< map<int, double> > flow`，其中`flow[e][s] = f`意味着边上的流量`e`由于源`s`是`f`。在每次迭代中，每个`f`in`flow`都会更新。

该程序的峰值内存使用量接近 4 GB。这适用于（32 位）Linux 和 OS X，但它在 Windows 上崩溃（这似乎对[每个进程施加了 2 GB 的限制](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx#memory_limits)）。

如何使用`vector< map<int, double> >`接口实现基于磁盘的数据结构（或以其他方式解决此问题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:05:53.543

我已经将[STXXL](http://stxxl.sourceforge.net/)用于类似类型的场景。这可能值得研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:57:24.450

如果地图矢量是消耗所有内存的东西，`double`那么数据字段是否绝对有必要？改变可能会有所帮助。

否则，您也许可以使用[内存映射](http://en.wikipedia.org/wiki/Memory_map)，尽管使其跨平台兼容需要一些工作，尤其是对于映射的嵌入式数据结构。

# git - 如何在不暂存的情况下 git 添加新文件？

> ID：11087143
> 
> 赞同：55
> 
> 时间：2012-06-18T16:32:12.697
> 
> 标签：git, staging, git-index

为了有效地（并且按照预期）使用 git，我进行了小的原子提交，而我确实有更长的会话，我不仅改变了一件事。因此，我大量使用`git add -p`. 但是，这不适用于全新的文件，因为我以后往往会忘记它们。

我想要做的是，告诉*有*`git`一个新文件，我希望它跟踪，但*不暂存它*：

 **示例：运行`git status`产生：

```
# On branch my-current-branch
# Your branch is ahead of 'origin/my-current-branch' by 2 commits.
#
# Changes to be committed:
#
<<STAGED SECTION>> // A
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
<<UNSTAGED-YET-KNOWN SECTION>> // B
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
<<UNKNOWN SECTION>> // C 
```

如果我`foo`在 C 部分有一个文件，我说`git add foo`它将转到 A 部分。如果我说`git add -N foo`它将同时发送到 A 和 B。但是，这意味着它将包含在下一次提交中，至少因为有一个新文件这一事实。

我希望它专门放在 B 部分，这样我以后可以用`git add -p`or `git add foo`（或其他）将它添加到 A 中。

## 编辑

关于`add -N`解决方案，这不起作用，因为如果我在说了之后尝试提交`add -N`并且*没有*正确添加它，git会抱怨，因为它不知道如何处理空文件：

```
foo: not added yet
error: Error building trees 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-05-20T06:34:26.713

使用 Git 2.5，**`git add -N/--intent-to-add`**实际上是正确的解决方案。
新文件不会成为下一次提交的一部分。

请参阅Nguyễn Thái Ngọc Duy ( ) 的[提交 d95d728](https://github.com/git/git/commit/d95d728aba06a34394d15466045cbdabdada58a2)[`pclouds`](https://github.com/pclouds)（合并在[d0c692263](https://github.com/git/git/commit/d0c692263f453f267ddd82b90b1a2fcff9d45f5f)中）：

> ## `diff-lib.c`: 调整 diff 中 ita 条目的位置

### 问题：

> “ ”添加的条目`git add -N`是对用户的提醒，以便他们在提交之前不要忘记添加它们。这些条目出现在索引中，即使它们不是真实的。它们在索引中的存在导致了一个令人困惑的“ `git status`”，如下所示：

```
On branch master
Changes to be committed:
        new file:   foo

Changes not staged for commit:
        modified:   foo 
```

> 如果您执行“ ”，即使“ ”报告为“ `git commit`”，“ ”也不会被包括在内。`foo``status``to be committed`

### 解决方案：

> 此补丁将输出更改为

```
On branch master
Changes not staged for commit:
        new file:   foo

no changes added to commit 
```

这意味着：

> 将此类路径视为“尚未添加到索引但 Git 已经知道它们”；" `git diff HEAD`" 和 " `git diff --cached HEAD`" 不应该谈论它们，而 " `git diff`" 应该将它们显示为新的。+ 文件尚未添加到索引中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T18:09:27.413

也许您可以尝试编写一些预提交钩子，如果您有未跟踪的文件，它会提醒您。不过，这将要求您始终保持 git 目录清洁才能正常工作（显然您需要保持最新的 .gitignore）。

也可以试试`git add -i`这类似于`git add -p`但也有一个添加新文件的界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T16:35:06.620

在进行更改之前，您可以使用该路径提交一个空文件。如果您已经在那里写了东西，请将文件移开，制作一个空白文件，提交，然后正常添加 -p ，`git commit --amend`这样您就没有“添加空白文件”提交。**

# assembly - 在 64 位处理器上安装 SSE 4.2 是否合理？

> ID：11087158
> 
> 赞同：-3
> 
> 时间：2012-06-18T16:32:42.307
> 
> 标签：assembly, sse, sse4

SSE 4.2 一次对两个**16 字节的**操作数进行比较。但也可以用普通处理器指令**一次比较两个 8 字节的操作数。**

**差别不是那么大**，才有这种比较的特殊硬件实现。SSE 4.2 如此无关紧要，还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:38:56.910

x64 处理器仅保证具有 SSE2，您需要使用 CPUID 来检查 SSE 4.2 支持（通过`CPUID.01H:ECX.SSE42[Bit 20] flag`），但是，SSE 2 支持 16*字节*比较，通过[`_mm_cmpeq_epi8`](http://msdn.microsoft.com/en-us/library/bz5xk21a.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:57:25.947

我不确定标准寄存器比较指令与其更广泛的 SSE 等效指令相比如何执行的细节（标准比较指令可能需要更多周期），但吞吐量提高 2 倍并没有什么可动摇的坚持。

我想你是在问“如果你得到的只是一次比较 2 次而不是 1 次，为什么还要 SSE 4.2？” 我认为你忽略了一些事情：

*   正如我之前提到的，两倍的宽度是很不错的。如果您正在开发一个进行大量此类比较的应用程序，您可能会对它的存在感到高兴。

*   将这条指令添加到已经存在的 SSE 执行单元的增量成本可能相对较小。已经有很多硬件可以执行已经为早期 SSE 指令集定义的各种操作。

    如今，似乎添加的指令要么是旧功能的更广泛版本（例如许多 AVX 指令），要么是对某些特定应用程序很重要的操作（例如 CRC/AES 指令、4 元素点积）。可能有一些应用程序从这种比较指令中受益匪浅，并且添加它的成本值得通过在这些类型的代码上更快获得的营销收益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:57:13.850

虽然除了 4.2 之外的所有 SSE 确实都添加了“通常有用”的指令，但新的字符串操作非常通用，以至于它们在字符串处理之外也有潜在的用途。我不知道任何情况下这实际上有帮助，因为它们很慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:58:01.230

SSE4.2 指令比较两个*压缩*操作数。因此，您不是在比较两个字节或单词，而是在 16 个字节和 16 个其他字节之间进行非常复杂的比较。（或 8 个单词和 8 个其他单词。）（每种情况下“最多 X”...）

SSE4.2 指令通常比正常比较慢，因为它们几乎总是微编码的。但是，鉴于每条 SSE4.2 指令开始时最多进行 256 次比较（在字节情况下），然后计算一堆更有用的输出，因此通常可以节省算法性能，除非您的搜索模式无法跳过几个每次迭代的字符。

# hibernate - 使用 .save() 或 .update() 而不是 .saveOrUpdate() 时，不会触发自己的 Hibernate DefaultSaveOrUpdateEventListener

> ID：11087159
> 
> 赞同：4
> 
> 时间：2012-06-18T16:32:42.737
> 
> 标签：hibernate

我正在尝试构建一个 spring (3.1) & hibernate (3.6.10) web 应用程序并且遇到了休眠事件的问题。我实现了自己的 DefaultSaveOrUpdateEventListener 来更新/创建 dateCreated 和 lastUpdated 日期，每个 .saveOrUpdate() 事件都会调用它。到现在为止还挺好。

不应该在 .save() 或 .update() 事件上调用此侦听器吗？或者我在这里错过了什么？

听众：

```
public class SaveOrUpdateDateListener extends DefaultSaveOrUpdateEventListener {

    private static final long serialVersionUID = 1L;

    private static Logger log = Logger.getLogger(SaveOrUpdateDateListener.class);

    @Override
    public void onSaveOrUpdate(SaveOrUpdateEvent event) {
        log.debug("Entered onSaveOrUpdate()");

        if (event.getObject() instanceof BaseDomain) {
            BaseDomain record = (BaseDomain) event.getObject();

            record.setDateUpdated(new Date());

            if (record.getDateCreated() == null) {
                record.setDateCreated(new Date());
            }
        }

        super.onSaveOrUpdate(event);
    }
} 
```

休眠配置（部分）：

```
<sesssion-factory>

<event type="save-update">
            <listener class="net.test.listener.hibernate.SaveOrUpdateDateListener"/>
            <listener class="org.hibernate.event.def.DefaultSaveOrUpdateEventListener"/>
        </event>    
</session-factory> 
```

示例 dao 方法（**不起作用**）：

```
@Autowired
private SessionFactory sessionFactory;

@Override
public void add(Registration registration) {
    sessionFactory.getCurrentSession().save(registration);
}

@Override
public void update(Registration registration) {
    sessionFactory.getCurrentSession().update(registration);
} 
```

示例道方法（**作品**）：

```
@Autowired
private SessionFactory sessionFactory;

@Override
public void add(Registration registration) {
    sessionFactory.getCurrentSession().saveOrUpdate(registration);
}

@Override
public void update(Registration registration) {
    sessionFactory.getCurrentSession().saveOrUpdate(registration);
} 
```

**编辑**

在我决定一般不使用 saveOrUpdate 之后，我希望通过使用如下基类来解决我的问题：

```
@MappedSuperclass
public class BaseDomain {

    @Id
    @GeneratedValue
    protected Integer id;

    @Column(nullable=false)
    protected Timestamp dateCreated;

    @Column(updatable = false, insertable = false, columnDefinition = "timestamp default current_timestamp on update current_timestamp")
    @Generated(GenerationTime.ALWAYS)
    protected Timestamp dateUpdated;

    protected BaseDomain() {
        this.dateCreated = new Timestamp(System.currentTimeMillis());
    }

    public Integer getId() {
        return id;
    }

    protected void setId(Integer id) {
        this.id = id;
    }

    public Timestamp getDateCreated() {
        return dateCreated;
    }

    public Date getDateUpdated() {
        return dateUpdated;
    }
} 
```

As the current_timestamp can be used only once per table (mysql restriction) i tried to build the dateCreated via constructor.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T19:09:07.013

Save-update events occurs only as a consequence of calling saveOrUpdate. Save-update is not some kind of combinations of save, update. and saveOrUpdate.

In [documentation](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/events.html#objectstate-events) this is spelled following way:

> 14.2\. Event system
> ...
> All the methods of the Session interface correlate to an event.
> ...
> When a request is made of one of these methods, the Hibernate Session generates an appropriate event and passes it to the configured event listeners for that type.

# android - OpenGL ES 1.0：在纹理重叠时隐藏纹理部分

> ID：11087162
> 
> 赞同：2
> 
> 时间：2012-06-18T16:32:46.287
> 
> 标签：android, opengl-es, textures

我有道路纹理。具有此纹理的线（由三角形条表示）如下所示： ![路1](../Images/00746a97b1bdb7508e6a711d7a24b89b.png)

当然，道路可以与其他道路重叠。在这种情况下，我想隐藏道路边界。道路边界的 alpha 为 0.6，而道路的 alpha 为 1。那么，当纹理部分与具有较大 alpha 的纹理部分重叠时，如何隐藏 alpha 较小的纹理部分？这是我所拥有的：

![http://i.stack.imgur.com/WpXVW.png](../Images/ad028d080906f6abe28b73469adc7554.png)

这就是我想要的：

![路2](../Images/c47b74f16f40bff60f541140721848b1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:47:33.363

我想不出任何可以像这样比较的 alpha 通道功能。

我可能要做的是：

1.  启用 alpha 测试以拒绝 alpha<0.8（还不想绘制边框）
2.  在某个固定深度绘制纹理，这应该只绘制主要的黄色道路。
3.  禁用 alpha 测试
4.  启用深度测试
5.  以更大的深度值重新绘制道路。此通道将绘制道路边界，但任何已绘制主要道路的地方都将被深度拒绝。
6.  您应该得到与所需图像相似的结果。

或者，您可以以相同的方式使用模板缓冲区，但深度测试可能更容易设置。

# java - 如何在java中获取url html内容到字符串

> ID：11087163
> 
> 赞同：8
> 
> 时间：2012-06-18T16:33:00.093
> 
> 标签：java, html, url, file-io

我在服务器上存储了一个 html 文件。我有这样的 URL 路径：`<https://localhost:9443/genesis/Receipt/Receipt.html >`

我想从 url 中读取包含标签的 html 文件的内容，即 html 文件的源代码。

我该怎么做？这是一个服务器端代码，不能有浏览器对象，我不确定使用 URLConnection 是否是一个不错的选择。

现在最好的解决方案应该是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T12:19:45.650

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

public class URLContent {
    public static void main(String[] args) {
        try {
            // get URL content

            String a = "http://localhost:8080//TestWeb/index.jsp";
            URL url = new URL(a);
            URLConnection conn = url.openConnection();

            // open the stream and put it into BufferedReader
            BufferedReader br = new BufferedReader(
                               new InputStreamReader(conn.getInputStream()));

            String inputLine;
            while ((inputLine = br.readLine()) != null) {
                System.out.println(inputLine);
            }
            br.close();

            System.out.println("Done");

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:01:35.507

使用spring解决了它，将bean添加到spring配置文件中

```
 <bean id = "receiptTemplate" class="org.springframework.core.io.ClassPathResource">
    <constructor-arg value="/WEB-INF/Receipt/Receipt.html"></constructor-arg>
  </bean> 
```

然后用我的方法阅读

```
 // read the file into a resource
        ClassPathResource fileResource =
            (ClassPathResource)context.getApplicationContext().getBean("receiptTemplate");
        BufferedReader br = new BufferedReader(new FileReader(fileResource.getFile()));
        String line;
        StringBuffer sb =
            new StringBuffer();

        // read contents line by line and store in the string
        while ((line =
            br.readLine()) != null) {
            sb.append(line);
        }
        br.close();
        return sb.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:35:20.483

举个例子 ：

```
 URL url = new URL("https://localhost:9443/genesis/Receipt/Receipt.html");
        URLConnection con = url.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
        String l;
        while ((l=in.readLine())!=null) {
            System.out.println(l);
        } 
```

您可以以其他方式使用输入流，而不仅仅是打印它。

当然如果你有本地文件的路径，你也可以这样做

```
 InputStream in = new FileInputStream(new File(yourPath)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:37:55.113

```
import java.net.*;
import java.io.*;

//...

URL url = new URL("https://localhost:9443/genesis/Receipt/Receipt.html");
url.openConnection();
InputStream reader = url.openStream(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-27T16:24:36.807

我认为最简单的方法是使用`IOUtils`

```
import com.amazonaws.util.IOUtils;
...

String uri = "https://localhost:9443/genesis/Receipt/Receipt.html";
String fileContents = IOUtils.toString(new URL(uri).openStream());
System.out.println(fileContents); 
```

# entity-framework - 是否可以判断一个实体是否被跟踪？

> ID：11087164
> 
> 赞同：0
> 
> 时间：2012-06-18T16:33:10.263
> 
> 标签：entity-framework

我正在使用实体框架 4.1。我已经使用大量在线示例实现了一个基本存储库。我的存储库获取方法采用 bool 参数来决定是否跟踪实体。有时，我想加载一个实体并跟踪它，有时，对于某些实体，我只是想读取它们并显示它们（即在图表中）。在这种情况下，永远不需要编辑，所以我不想要跟踪它们的开销。此外，图形实体被发送到 silverlight 客户端，因此实体与上下文断开连接。因此，我的 Get 方法可以返回被跟踪或未被跟踪的实体列表。这是通过动态创建查询来实现的，如下所示：

```
DbQuery<E> query = Context.Set<E>();

 // Track the entities in the context?
 if (!trackEntities)
 {
    query = query.AsNoTracking();
 } 
```

但是，我现在想让用户能够与图形交互并对其进行编辑。这种情况不会经常发生，所以我仍然想在不跟踪它们的情况下获取一些实体，但要能够保存它们。为此，我只需将它们附加到上下文并将状态设置为已修改。到目前为止一切正常。

我正在通过覆盖 SaveChanges 方法来审核任何更改。如上所述，在某些情况下，我可能需要保存已断开连接的修改实体。因此，要进行审核，我必须从数据库中检索当前值，然后进行比较以找出断开连接时发生的更改。如果实体已被跟踪，则无需获取旧值，因为我可以通过状态管理器访问它们。我没有使用自我跟踪实体，因为这对我的要求来说太过分了。

问题：在我的审计方法中，我只是想知道修改后的实体是否被跟踪，即我是否需要去数据库并获取原始值？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:52:18.473

DbContext.ChangeTracker.Entries ( [http://msdn.microsoft.com/en-us/library/gg679172(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679172(v=vs.103).aspx) ) 返回所有被跟踪实体的 DbEntityEntry 对象。DbEntityEntry 具有 Entity 属性，您可以使用该属性来确定是否跟踪实体。就像是

```
var isTracked = ctx.ChangeTracker.Entries().Any(e => Object.ReferenceEquals(e.Entity, myEntity)); 
```

# javascript - Extjs 表单在组合选择中具有动态显示/隐藏的字段

> ID：11087165
> 
> 赞同：5
> 
> 时间：2012-06-18T16:33:23.990
> 
> 标签：javascript, forms, extjs, extjs4, extjs4.1

使用 Ext 4.1 我想创建一个带有选择组合的表单，并根据当前选择的选项显示/隐藏不同的子字段。下面的例子：

![在此处输入图像描述](../Images/a4dde64b55e180ac6bdf9a39682b75b9.png)

现在我有一个组合和一组隐藏在渲染上的两个日期字段。当组合值更改时，我有一个事件侦听器将显示这些字段。但我不确定这是否是解决这个问题的最佳方法。在这种情况下，字段集会更好吗？

```
Ext.define('TooltipForm', {
    extend: 'Ext.form.Panel',
    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    border: false,
    bodyPadding: 10,

    initComponent: function(){
        this.on('afterrender', this.onAfterRender, this);

        this.callParent(arguments);
    },

    onAfterRender: function(){
        this.items.each(function(item){
            item.on('change', this.onChange, this);
        }, this);
    },

    onChange: function(field, newValue){
        if (field.name === 'range'){
            switch(newValue){
                case 'fit':
                    console.log('fit view');
                    break;
                case 'complete':
                    console.log('complete view');
                    break;
                case 'date range':
                    console.log('date range view');
                    break;
            }
        }
    },

    fieldDefaults: {
        labelAlign: 'top',
        labelWidth: 100,
        labelStyle: 'font-weight:bold'
    },
    items: [
        {
            width:          50,
            xtype:          'combo',
            mode:           'local',
            value:          'fit',
            triggerAction:  'all',
            forceSelection: true,
            editable:       false,
            fieldLabel:     me.rangeFieldLabel,
            name:           'range',
            queryMode:      'local',
            store:          ['fit', 'complete', 'date range']
        },
        {
            width:50,
            xtype: 'datefield',
            fieldLabel: 'date from',
            name: 'datefrom',
            hidden: true
        },
        {
            width:50,
            xtype: 'datefield',
            fieldLabel: 'date to',
            name: 'dateto',
            hidden:true,
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T00:20:03.023

这些方面的东西：

```
Ext.define('TooltipForm', {
    extend: 'Ext.form.Panel',
    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    border: false,
    bodyPadding: 10,
    rangeFieldLabel: 'Foo',

    initComponent: function() {
        Ext.apply(this, {
            fieldDefaults: {
                labelAlign: 'top',
                labelWidth: 100,
                labelStyle: 'font-weight:bold'
            },
            items: [{
                itemId: 'range',
                width: 50,
                xtype: 'combo',
                value: 'fit',
                triggerAction: 'all',
                forceSelection: true,
                editable: false,
                fieldLabel: this.rangeFieldLabel,
                name: 'range',
                queryMode: 'local',
                store: ['fit', 'complete', 'date range']
            }, {
                itemId: 'dateFrom',
                width: 50,
                xtype: 'datefield',
                fieldLabel: 'date from',
                name: 'datefrom',
                hidden: true
            }, {
                itemId: 'dateTo',
                width: 50,
                xtype: 'datefield',
                fieldLabel: 'date to',
                name: 'dateto',
                hidden: true,
            }]
        });

        this.callParent(arguments);
        this.child('#range').on('change', this.onChange, this);
    },

    onChange: function(field, newValue) {
        switch(newValue) {
            case 'fit':
                console.log('fit view');
                // do something else
                break;
            case 'complete':
                this.child('#dateFrom').hide();
                this.child('#dateTo').hide();
                break;
            case 'date range':
                this.child('#dateFrom').show();
                this.child('#dateTo').show();
                break;
        }
    },
});

Ext.onReady(function(){
    new TooltipForm({
        renderTo: document.body
    });
}); 
```

# java - 找不到该类的实体元数据

> ID：11087167
> 
> 赞同：2
> 
> 时间：2012-06-18T16:33:27.430
> 
> 标签：java, tomcat, persistence, entity, kundera

我回来了同样的问题......

我正在尝试在我的 Cassandra DB 和 Kundera（Cassandra ORM）中使用查询，这个查询在其他项目中工作但是当我尝试在 webapp 中执行它（使用 tomcat 6.0）时，我收到了这个错误：

```
com.impetus.kundera.metadata.KunderaMetadataManager  - No Entity metadata found for the class 
```

=> JavaNullPointerException。

但是当我从我的项目中离开persistence.xml 时，我遇到了另一个错误。（找到 NoPersistence.xml 什么的……）

所以，我的项目找到了 Persistence.xml，但没有找到我的实体类：fileCassandra。

你可以看到我的 persistence.xml ：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <!--  192.168.3.107 -->
    <persistence-unit name="cassandra_pu">
        <provider>com.impetus.kundera.KunderaPersistence</provider>     
        <class>net.***.common.db.***.FileCassandra</class>

        <properties>            
            <property name="kundera.nodes" value="localhost"/>
            <property name="kundera.port" value="9160"/>
            <property name="kundera.keyspace" value="KunderaExamples"/>
            <property name="kundera.dialect" value="cassandra"/>
            <property name="kundera.client.lookup.class" value="com.impetus.client.cassandra.pelops.PelopsClientFactory" />
            <property name="kundera.cache.provider.class" value="com.impetus.kundera.cache.ehcache.EhCacheProvider"/>
            <!-- <property name="kundera.cache.config.resource" value="/ehcache-test.xml"/>    -->           
        </properties>
       </persistence-unit>
</persistence> 
```

网。***.common.db。***.FileCassandra 我必须用***替换，因为它是我公司的名称；）

相同的方法（包括EntityManager）在其他项目的junit中工作，当我在Tomcat中构建我的项目时，出现这个错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:07:30.360

当您的类路径中有多个相同类的条目时，就会发生这种情况。

拥有实体的理想位置最接近加载 kundera 核心和客户端（HBase、Cassandra 等）的同一个类加载器。

例如，如果这些 kundera 文件位于 WEB-INF/lib 下，您宁愿将实体放在应用程序下，就好像 kundera 文件在应用程序 lib 文件夹中一样，最好将您的实体捆绑在一个 jar 中并将它们放在那里（并且删除应用中的实体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:32:58.933

我能看到的唯一问题是类和 persistence.xml 位置。

尝试将 persistence.xml 放在 /WEB-INF/classes/META-INF/ 中，前提是您的实体定义位于 classes 文件夹中！

-维维克

# objective-c - NSObject 扩展 UIAlertViewDelegate 崩溃？

> ID：11087179
> 
> 赞同：2
> 
> 时间：2012-06-18T16:34:06.290
> 
> 标签：objective-c, ios, uialertview

我有一个助手类，我想显示一个 UIAlertView 然后将执行一些 Web 服务操作。我想这样做，这样我就可以在其他地方重新使用警报视图。

我这样声明：

```
@interface FBLinkHelper : NSObject <UIAlertViewDelegate> 
```

我还有一个方法可以显示警报视图：

```
- (void) showLinkDialog {
    UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"Link account with Facebook?" message:@"Linking your account with Facebook extends your user experience. Link account?" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];
    [av show];
} 
```

这就是我显示对话框的方式：

```
 FBLinkHelper *fbLinkHelper = [[FBLinkHelper alloc] init];
    [fbLinkHelper showLinkDialog]; 
```

一切对我来说似乎都很正常。它显示了警报视图对话框，但是当我单击一个按钮（其中一个）时，我的应用程序在控制台中没有太多可说的崩溃。我注意到它*只有*在我有一个 UIAlertViewDelegate 方法到位时才会崩溃，例如 didDismissWithButtonIndex。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:38:15.090

-更新-

该`FBLinker`实例不是其调用者的强属性，因此委托回调转到一个悬空指针。OP 报告制作`FBLinker` `strong`解决了问题。

使类扩展`UIView`而不是`NSObject`无效的原始建议，此处仅出于历史目的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:43:36.867

我正在使用的应用程序中遇到了同样的情况。如果委托对象不是强（或在 5.0 之前的 iOS 中保留）属性，它可能会在 UIAlertView 显示后立即被释放。

# php - PHP多维数组移动值并插入

> ID：11087186
> 
> 赞同：0
> 
> 时间：2012-06-18T16:34:20.407
> 
> 标签：php, arrays, multidimensional-array

我有这个需要插入数据库的数组。我下面的代码不起作用，我最终得到相同的值。

```
array(10) { [0]=>  array(1) { ["GymnastName"] => string(7) "ertwert"  }
            [1]=>  array(1) { ["GymnastName"] => string(6) "wergfb"  }
            [2]=>  array(1) { ["GymnastAge"] => string(8) "ewrtwert" }
            [3]=>  array(1) { ["GymnastAge"] => string(8) "dsfvsdtg" }
            [4]=>  array(1) { ["ParentsName"] => string(9) "werfgdsfv" }
            [5]=>  array(1) { ["ParentsName"] => string(9) "wetrgwerg" }
            [6]=>  array(1) { ["ParentsEmail"] => string(7) "erteqrt" }
            [7]=>  array(1) { ["ParentsEmail"] => string(6) "adfwer" }
            [8]=>  array(1) { ["ParentsPhone"] => string(7) "ertwert" }
            [9]=>  array(1) { ["ParentsPhone"]=> string(4) "qert" }
} 
```

这是我的循环：

```
for ($i=0; $i<$l; $i++) {

    $name = $gymarray[$i];
    $age = $gymarray[$i];
    $parentname = $gymarray[$i];
    $parentemail = $gymarray[$i];
    $parentphone = $gymarray[$i];

    $db->insert statement here 
```

本质上，我需要将记录插入为 GymnastName、GymnastAge、ParentsName、ParentsEmail、ParentsPhone。

我最终得到的最终代码是：

```
array(1) {
["GymnastName"]=>
string(7) "ertwert"
}

array(1) {
["GymnastName"]=>
string(7) "ertwert"
}

array(1) {
["GymnastName"]=>
string(7) "ertwert"
}

array(1) {
["GymnastName"]=>
string(7) "ertwert"
} 

array(1) {
["GymnastName"]=>
string(7) "ertwert"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:55:33.590

我猜你想做类似的事情

```
for ($i=0; $i<$l; $i) {

    $name        = $gymarray[$i]["GymnastName"];
    $age         = $gymarray[$i + 2]["GymnastAge"];
    $parentname  = $gymarray[$i + 4]["GymnastAge"];
    $parentemail = $gymarray[$i + 6]["ParentsEmail"];
    $parentphone = $gymarray[$i + 8]["ParentsPhone"];

    $db->insert statement here
} 
```

# php - 从另一个类调用非对象的成员函数

> ID：11087195
> 
> 赞同：0
> 
> 时间：2012-06-18T16:34:35.823
> 
> 标签：php

我正在学习 oop 并尝试在此过程中实现 php 标准 PSR-0 和 PSR-1。我首先创建了一个基于 Swiftlet 的小型 MVC 框架。

我正在尝试从我从 url 调用的 Controller 中的基本 View 控制器调用函数，我得到“调用非对象中的成员函数 set()”。

所有类都加载正常。所以在我的控制器中我调用 $this->view->set('helloWorld', 'Hello world!'); 但我得到一个错误。我在尝试正确设置名称空间结构时遇到了一些麻烦，所以也许这就是原因？

这是文件结构：

索引.php

lib/bootstrap.php

lib/view.php

库/控制器.php

应用程序/控制器/index.php

这是每个的代码：

索引.php

```
<?php

namespace MVC;

    // Bootstrap the application
    require 'lib/Bootstrap.php';

    $app = new lib\Bootstrap;

    spl_autoload_register(array($app, 'autoload'));

    $app->run();
    $app->serve(); 
```

引导程序.php

```
namespace MVC\lib;

class Bootstrap 
{
    protected
        $action     = 'index',
        $controller,
        $hooks      = array(),
        $view
        ;

    /**
     * Run the application
     */

    function run() 
    {
               ... Code that gets controller and the action form the url

        $this->view = new \lib\View($this, strtolower($controllerName));

        // Instantiate the controller
        $controllerName = 'app\Controllers\\' . basename($controllerName);

        $this->controller = new $controllerName();                      

        // Call the controller action
        $this->registerHook('actionBefore');

        if ( method_exists($this->controller, $this->action) ) {
            $method = new \ReflectionMethod($this->controller, $this->action);

            if ( $method->isPublic() && !$method->isFinal() && !$method->isConstructor() ) {
                $this->controller->{$this->action}();
            } else {
                $this->controller->notImplemented();
            }
        } else {
            $this->controller->notImplemented();
        }

        return array($this->view, $this->controller);

    }

<?php

namespace MVC\lib;

class Bootstrap 
{
    protected
        $action     = 'index',
        $args       = array(),
        $config     = array(),
        $controller,
        $hooks      = array(),
        $plugins    = array(),
        $rootPath   = '/',
        $singletons = array(),
        $view
        ;

    /**
     * Run the application
     */

    function run() 
    {
        // Determine the client-side path to root
        if ( !empty($_SERVER['REQUEST_URI']) ) {
            $this->rootPath = preg_replace('/(index\.php)?(\?.*)?$/', '', $_SERVER['REQUEST_URI']);

            if ( !empty($_GET['route']) ) {
                $this->rootPath = preg_replace('/' . preg_quote($_GET['route'], '/') . '$/', '', $this->rootPath);
            }
        }

        // Extract controller name, view name, action name and arguments from URL
        $controllerName = 'Index';

        if ( !empty($_GET['route']) ) {
            $this->args = explode('/', $_GET['route']);

            if ( $this->args ) {
                $controllerName = str_replace(' ', '/', ucwords(str_replace('_', ' ', str_replace('-', '', array_shift($this->args)))));
            }

            if ( $action = $this->args ? array_shift($this->args) : '' ) {
                $this->action = str_replace('-', '', $action);
            }
        }

        if ( !is_file('app/Controllers/'. $controllerName . '.php') ) {
            $controllerName = 'Error404';
        }

        $this->view = new \lib\View($this, strtolower($controllerName));

        // Instantiate the controller
        $controllerName = 'app\Controllers\\' . basename($controllerName);

        $this->controller = new $controllerName();                      

        // Call the controller action
        $this->registerHook('actionBefore');

        if ( method_exists($this->controller, $this->action) ) {
            $method = new \ReflectionMethod($this->controller, $this->action);

            if ( $method->isPublic() && !$method->isFinal() && !$method->isConstructor() ) {
                $this->controller->{$this->action}();
            } else {
                $this->controller->notImplemented();
            }
        } else {
            $this->controller->notImplemented();
        }

        $this->registerHook('actionAfter');

        return array($this->view, $this->controller);

    }

<?php

namespace MVC\lib;

class Bootstrap 
{
    protected
        $action     = 'index',
        $args       = array(),
        $config     = array(),
        $controller,
        $hooks      = array(),
        $plugins    = array(),
        $rootPath   = '/',
        $singletons = array(),
        $view
        ;

    /**
     * Run the application
     */

    function run() 
    {
        // Determine the client-side path to root
        if ( !empty($_SERVER['REQUEST_URI']) ) {
            $this->rootPath = preg_replace('/(index\.php)?(\?.*)?$/', '', $_SERVER['REQUEST_URI']);

            if ( !empty($_GET['route']) ) {
                $this->rootPath = preg_replace('/' . preg_quote($_GET['route'], '/') . '$/', '', $this->rootPath);
            }
        }

        // Extract controller name, view name, action name and arguments from URL
        $controllerName = 'Index';

        if ( !empty($_GET['route']) ) {
            $this->args = explode('/', $_GET['route']);

            if ( $this->args ) {
                $controllerName = str_replace(' ', '/', ucwords(str_replace('_', ' ', str_replace('-', '', array_shift($this->args)))));
            }

            if ( $action = $this->args ? array_shift($this->args) : '' ) {
                $this->action = str_replace('-', '', $action);
            }
        }

        if ( !is_file('app/Controllers/'. $controllerName . '.php') ) {
            $controllerName = 'Error404';
        }

        $this->view = new \lib\View($this, strtolower($controllerName));

        // Instantiate the controller
        $controllerName = 'app\Controllers\\' . basename($controllerName);

        $this->controller = new $controllerName();                      

        // Call the controller action
        $this->registerHook('actionBefore');

        if ( method_exists($this->controller, $this->action) ) {
            $method = new \ReflectionMethod($this->controller, $this->action);

            if ( $method->isPublic() && !$method->isFinal() && !$method->isConstructor() ) {
                $this->controller->{$this->action}();
            } else {
                $this->controller->notImplemented();
            }
        } else {
            $this->controller->notImplemented();
        }

        $this->registerHook('actionAfter');

        return array($this->view, $this->controller);

    } 
```

lib/view.php

```
namespace lib;

class View 
{
    protected
        $app,
        $variables = array()
        ;

    public
        $name
        ;

    /**
     * Constructor
     * @param object $app
     * @param string $name
     */
    public function __construct($app, $name)
    {
        $this->app  = $app;
        $this->name = $name;
    }

    /**
     * Set a view variable
     * @param string $variable
     * @param mixed $value
     */
    public function set($variable, $value = null)
    {
        $this->variables[$variable] = $value;
    } 
```

最后是 app/controllers/index.php

```
namespace app\Controllers;

class index extends \lib\Controller

{

    public function test()

    {
           // This gets the error
                   $this->view->set('helloWorld', 'Hello world!');  
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:23:37.243

如果这就是控制器中的所有代码，那么`$this->view`它就不是对象。
尝试运行以下代码：

```
namespace app\Controllers;

class index extends \lib\Controller
{
    public function test()
    {
           var_dump( $this->view );
           exit;
           $this->view->set('helloWorld', 'Hello world!');  
    }

} 
```

~~您还应该知道，在 PHP 中，`__construct()`方法不是继承的。~~
^(我一定是受了一些脑损伤。)

哦..我看不到，为什么这个问题有[mvc](/questions/tagged/mvc "显示标记为“mvc”的问题")标签。当您尝试编写类似 MVC 的东西时，问题本身与 MVC 作为架构模式无关。

# ruby-on-rails - 嵌套表单和 has_many :through

> ID：11087201
> 
> 赞同：0
> 
> 时间：2012-06-18T16:34:58.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个小示例应用程序，其中有 3 个模型：成员、组和订阅。这个想法是成员可以订阅组。

![ERD](../Images/d1803d437a95d9a2adb512e39334e427.png)

```
class Member < ActiveRecord::Base
  has_many :subscriptions, dependent: :delete_all
  has_many :groups, through: :subscriptions

  attr_accessible :email

  validates :email, presence: true
end

class Group < ActiveRecord::Base
  has_many :subscriptions, dependent: :delete_all
  has_many :members, through: :subscriptions

  accepts_nested_attributes_for :subscriptions

  attr_accessible :name, :subscriptions_attributes

  validates :name, presence: true, uniqueness: true
end

class Subscription < ActiveRecord::Base
  belongs_to :group
  belongs_to :member

  attr_accessible :group_id, :introduction

  validates :group_id, presence: true
  validates :introduction, presence: true
end 
```

我正在尝试为新组创建一个表单，并将`introduction`属性嵌套在其中。

我的控制器方法：

```
def new
  @group = Group.new
  @group.subscriptions.build
end

def create
  @member = Member.first
  @group = @member.groups.build(params[:group])

  if @group.save
    flash[:success] = "Saved"
    redirect_to group_path(@group)
  else
    render :new
  end
end 
```

但它不起作用。它抛出错误`group_id can't be blank`。所以我不知道如何将新组分配给订阅。

此外，member_id 被创建为 nil。但是正如您所看到的，我正在从`@member`变量创建组，所以我认为它应该被初始化，但它没有。

谁能给我看灯？

您可以在此处查看示例应用程序：[https ://github.com/idavemm/nested_form](https://github.com/idavemm/nested_form)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:37:01.633

确保您尝试分配的所有属性都是 attr_accessible。您可以禁用它并查看它是否有效，或者查看 Rails 服务器日志中的警告。

**更新**：您应该将accepts_nested_attributes_for 添加到成员模型中，并使用带有fields_for 的多模型表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:16:58.817

我认为您以错误的方式考虑您的模型。每个成员对每个小组都有不同的介绍吗？那么，例如，member1 会有一个介绍，而 member2 会有不同的介绍吗？

Subscriptions 模型应该存储有关成员和组之间关系的信息。在这种情况下，最好在小组模型中进行介绍。**您收到错误的原因是因为您正在尝试为尚未创建的组创建订阅（当您设置介绍属性时）。**

因此，将介绍移至组模型，然后，如果您希望组的创建者自动订阅它（您应该这样做），请在保存记录后在创建操作中添加代码以创建对控制器的订阅. 然后，在订阅模型上，您可以做一些很酷的事情，例如拥有一个状态机来跟踪成员在组中的状态（版主、新手、资深成员等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:56:34.207

经过数小时的调查和挫折，我将其报告给 Rails 开发人员，我终于有了一个解决方案：

Rails 3 无法按照问题中定义的方式自动初始化 group_id 和 member_id。

所以，目前，有两种方法可以让它工作：

1.  将 member_id 添加为视图中的隐藏字段。
2.  改变一切的订阅模式也是如此`accepts_nested_attributes_for`。这样，要创建的新对象就是 Subscription，Group 就是嵌套模型。

第一个选项有一个重要的安全漏洞，所以我不推荐它。

第二个选项，虽然不是很合乎逻辑，但更干净，据说是解决此问题的“Rails 方式”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T23:06:45.033

我刚刚遇到了同样的问题，解决方案是从相关模型中删除存在验证（基于[这个问题](https://stackoverflow.com/questions/10716547/rails3-nested-form-doesnt-save-because-id)），在你的情况下，删除：

验证：group_id，存在：真

一旦验证消失，一切都像发条一样运转

# java - 如何读取和修改amr音频文件数据？

> ID：11087207
> 
> 赞同：5
> 
> 时间：2012-06-18T16:35:14.867
> 
> 标签：java, audio, amr, file-structure, audioformat

如何从 AMR-NB 文件中提取采样率、比特率等信息。严格来说，我想要采样率或任何其他可能改变其音高或速度的数据。

WAV 文件很容易，但在这里我受限于 AMR-NB 格式（J2me 设备）

我在谷歌上搜索了很多，但找不到任何东西......

AMR-NB 是固定在 8Khz 的吗？或者它随每个样本而变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:01:38.213

根据 AMR 文件格式位于：http: [//developer.nokia.com/community/wiki/AMR_format](http://developer.nokia.com/community/wiki/AMR_format)AMR 文件有一个 6 字节的头，后面跟着一组音频帧，每个帧都有一个 1 字节的头。每个音频帧的长度为 20 毫秒，并且采样率在每个帧的标题中给出。所以要读取第一帧的采样率，您需要读取文件中的第 7 个字节。取第 7 个字节并将其右移 3 位，并屏蔽掉新值的低 4 位。在 java 中，这是“((value>>3)& 0x0F)”，其中 value 是帧的 1 字节标头。然后对照下表检查该数字以确定该帧的比特率。然后由于每帧的长度为 20 毫秒，因此您需要将比特率（它们以 kb/s 的形式给出，因此将该数字乘以 1000 以获得每秒的比特数）除以 20 并除以（（每字节 8 位）* 1000 毫秒每second) = 8000 以获取下一帧头要跳过的字节数。如果要修改框架的内容，只需按顺序将框架重新复制到新文件，但用旧框架替换新框架。临时文件对此很有用。我已经从下面的源页面复制了比特率表以供参考。

0 - AMR 4.75 - 以 4.75kbit/s 编码

1 - AMR 5.15 - 以 5.15kbit/s 编码

2 - AMR 5.9 - 以 5.9kbit/s 编码

3 - AMR 6.7 - 以 6.7kbit/s 编码

4 - AMR 7.4 - 以 7.4kbit/s 编码

5 - AMR 7.95 - 以 7.95kbit/s 编码

6 - AMR 10.2 - 以 10.2kbit/s 编码

7 - AMR 12.2 - 以 12.2kbit/s 编码

# php - Magento var_dump 页面上正在使用的所有集合

> ID：11087211
> 
> 赞同：0
> 
> 时间：2012-06-18T16:35:29.453
> 
> 标签：php, magento

还在学习magento编码。我想知道有没有办法可以在我加载到 magento 的任何页面上打印出集合中的所有值？这是假设我不知道正在使用的集合的名称。

如果可能的话，这将非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T16:50:21.767

首先，警告 - 如果您正在 var_dump'ing 集合，更不用说为给定请求加载的每个集合，那么您很可能会遇到问题 - 集合包含大量数据。

您需要从每个集合中执行此操作的确切要求是什么？

无论如何，获得这些数据的唯一方法是使用订阅的观察者：

```
core_collection_abstract_load_after 
```

所以作为一个开始...

您的 config.xml 看起来与此类似...

```
<?xml version="1.0"?>
<config>
    <modules>
        <YourCompany_YourModule>
            <version>1.0.0</version>
        </YourCompany_YourModule>
    </modules>
    <frontend>
        <events>
            <core_collection_abstract_load_after>
                <observers>
                    <yourmodule>
                        <class>YourCompany_YourModule_Model_Observer</class>
                        <method>core_collection_abstract_load_after</method>
                    </yourmodule>
                </observers>
            </core_collection_abstract_load_after>
        </events>
    </frontend>
    <global>
        <models>
            <yourmodule>
                <class>YourCompany_YourModule_Model</class>
            </yourmodule>
        </models>
    </global>
</config> 
```

你的观察者看起来像这样......

```
<?php

class YourCompany_YourModule_Model_Observer
{
    public function core_collection_abstract_load_after(Varien_Event_Observer $observer)
    {
        $collection = $observer->getEvent()->getCollection();
        //Do what you want with each collection here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T19:30:00.473

一个更简单的方法，如果你是 Magento 的新手，我建议使用这个：

*   [https://github.com/madalinoprea/magneto-debug](https://github.com/madalinoprea/magneto-debug)

因为它将提供对内部工作的其他见解以及有关实际集合的集合和 SQL 信息。

实际操作中的视图：

*   [http://www.youtube.com/watch?v=aqvgrmebcu4](http://www.youtube.com/watch?v=aqvgrmebcu4)

# javascript - 您如何检索用户单击的图像的图像源？(jQuery)

> ID：11087212
> 
> 赞同：0
> 
> 时间：2012-06-18T16:35:38.720
> 
> 标签：javascript, jquery

我正在尝试检索用户单击的图像的图像源。这就是我所拥有的，它似乎不起作用：

```
var imgSrc = getSrc(image)

    function getSrc(image) {
        $('img').each(function() {
            $(this).click(function() {
                $(this).attr('src')
            }); //end click
        }); //end each  
    } //end getSrc 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T16:36:42.400

```
$('img').click(function() {
    alert( $(this).attr('src') ); // or this.src
 }); 
```

你不需要任何循环。我认为上面的代码可以正常工作。

**完整代码**

```
function getSrc(image) {
   var src;
   $('img').click(function() {
     src = $(this).attr('src'); // or this.src
   }); 
   return src;
} 
```

### 笔记

在您的问题中，您不在`image`代码中使用参数。我不确定你为什么要使用它。如果您想使用通过参数传递的 get `src`，`image`那么您可以尝试：

```
$(image).attr('src'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:41:27.687

您没有从该函数返回任何内容。此外，您不需要 .each() 调用，因为您知道已单击的图像：

```
var imgSrc = '';

$(document).ready(function () {
    $('img').click(function () {
        imgSrc = $(this).attr('src');
    });
}); 
```

# string - 我将如何根据字符串打印一整列。（随机列号）

> ID：11087214
> 
> 赞同：2
> 
> 时间：2012-06-18T16:35:51.923
> 
> 标签：string, awk, grep, cut

在第一天，我可能会收到大量的 CSV 输出，例如： 在第二天，我可能会收到以下输出： 我感兴趣的列和行总是随机的，我永远不知道输出会是哪个字段- 但我只对带有特定字符串的垂直列感兴趣。例如“叔叔”。
`this,is,a,test
bob,is,your,uncle
sound,one,"Zen proverb",clapping` 

`test,this,is,a
clapping,one,sound,"Zen proverb"
uncle,bob,is,your
Neo,the,Matrix,"Has you"` 

`test
clapping
uncle
Neo` 

我是 awk 和 PERL 的新手 - 但我想 awk 将能够根据匹配的字符串打印第一个匹配列（Up-and-Down the column）。有谁知道我应该如何解析这种数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:50:13.873

听起来您想要以下内容：给定一个字符串和一个逗号分隔的文件，找到字符串的第一个匹配项并为文件中的每条记录输出该字段。对文件进行 2 次传递，第一次传递寻找匹配项：

```
 s=uncle
 awk 'NR==FNR && /'$s'/ { for( i=1; i<=NF; i++ ) if( $i ~ /'$s'/ ) { a=i; nextfile; } }
    NR!=FNR{ print $a}' FS=, input input 
```

请注意，如果字符串不在文件中，则第二遍将打印整个记录。也不`nextfile`是标准的 awk，但确实存在于`gawk`. 而不是`nextfile`，您可以执行 : `NR==FNR && /'$s'/ && !a`，或者只调用 awk 两次，第一次只是让列输出，第二次进行打印。

# algorithm - 从整数数组中删除重复的整数 - 伪代码

> ID：11087215
> 
> 赞同：-1
> 
> 时间：2012-06-18T16:35:56.377
> 
> 标签：algorithm

我需要一些帮助才能做到这一点，

**问题** 写一个函数，它需要两个数组——一个数组是源数组，另一个数组是索引数组，并删除源数组索引处的所有元素，并从第二个数组中获取索引。

这就是我想出的......

```
 public static int[] DeleteArrayUsingIndices(int[] source, int[] indices)
    {
        for (int i = 0; i < indices.Length; i++)
        {
            if (indices[i] < source.Length)
            {
                source[indices[i]] = int.MinValue; // delete
            }                
        }

        return source;
    } 
```

我不太确定这个解决方案，因为这不会删除该值。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:53:37.883

你不能真正从数组中删除元素，所以你需要问这个措辞是什么意思。如果用特殊元素（如`int.MinValue`您的代码）替换元素是可以接受的，那么您的解决方案就可以了。

另一种解释可能是重新排列数组，以便“未删除”索引以与原始顺序相同的顺序位于数组的开头——在这种情况下，您将希望返回数组的新“长度”（未“删除”的元素的数量）——这意味着“删除”操作会将尚未删除的元素的数组压缩到数组的开头（将数组的内容从已删除的元素移向开头数组末尾的索引（或未删除元素的末尾）。注意不要“删除”同一个元素两次。

要实现后者，您将必须跟踪哪个位置移动了多少元素。或者，更新索引数组以减少比当前更大的索引（以容纳现在压缩的数组）——在这种情况下，您可以从对索引数组进行排序开始（可能同时删除重复项）并跟踪如何到目前为止，许多职位已经转移

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:52:09.040

尝试这个

```
public static void main(String[] args) {
    Integer[] a = {1,2,3,4,5,6,7,8,9};
    Integer[] b = {2,3};
    System.out.println(Arrays.asList(deleteArrayUsingIndices(a, b)));
} 
```

^ 用于测试

```
public static Integer[] deleteArrayUsingIndices(Integer[] source, Integer[] indices)
{
    ArrayList<Integer> sourceArr = new ArrayList<Integer>(Arrays.asList(source));
    ArrayList<Integer> toDelete = new ArrayList<Integer>();
    for (int i:indices)
    {
        try {
            toDelete.add(sourceArr.get(i));
        } catch (Exception e) {}              
    }

    sourceArr.removeAll(toDelete);

    return sourceArr.toArray(new Integer[sourceArr.size()]);
} 
```

# .net - Microsoft 测试管理器 - 测试文件路径

> ID：11087218
> 
> 赞同：2
> 
> 时间：2012-06-18T16:36:01.607
> 
> 标签：.net, visual-studio, microsoft-test-manager

我正在使用 Microsoft 测试管理器在 VM 上运行我的测试。

运行测试时，我的测试程序集存储在 VM 上的什么位置？

[更新：]原来测试的路径是：

C:\Users*test-user*\AppData\Local\VSEQT\QTAgent*test-guid**machine-name*\Deployment

# google-bigquery - BigQuery 的 M-Lab 表访问不工作

> ID：11087222
> 
> 赞同：0
> 
> 时间：2012-06-18T16:36:23.960
> 
> 标签：google-bigquery

我正在尝试从 BigQuery 访问 M-Lab 表，但不断收到此消息：

错误：拒绝访问：表测量实验室：m_lab.2010_01：QUERY_TABLE

我可以很好地访问其他示例表。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:03:09.503

访问 M-lab 表要求您至少以“读者”的身份参与 M-lab 项目。你知道你是否被添加了吗？我将联系 Google 的 M-lab 人员，看看他们是否愿意将所有用户添加到 acl，这意味着任何人都可以访问。

# sql-server-2008 - 使用存储过程的页面导航（不能绑定复合标识符）

> ID：11087224
> 
> 赞同：1
> 
> 时间：2012-06-18T16:36:26.457
> 
> 标签：sql-server-2008, stored-procedures, data-paging

当我查看商店列表时，我正在使用存储过程进行页面导航。我只有一张带有&`Store`列的表。`Name``S_Id`

这是我的查询：

```
 SELECT  Stores.Name
    FROM
       (
         SELECT ROW_NUMBER() OVER (ORDER BY Stores.S_Id) AS rownum ,
            Stores.Name
         FROM Stores    
       )AS ordered
    WHERE ordered.rownum BETWEEN [someValue] AND [someValue] 
```

但是当我尝试保存我的程序时，我得到一个错误：

> 无法绑定复合标识符 Stores.Name

我看过很多主题，但找不到问题所在。如果我用 LINQ 来做，我会尝试这样的事情：

```
 (select name from Stores order by S_Id).Skip(n).Take(m) . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:42:22.843

您的子查询为您的数据定义了一个新名称 -`ordered`因此您需要使用该新名称而不是`stores`：

```
SELECT  
    ordered.Name    <=== you're selecting from the subquery which is called "ordered" - use that name!!
FROM
   (SELECT 
       ROW_NUMBER() OVER (ORDER BY Stores.S_Id) AS rownum,
       Stores.Name
    FROM Stores    
   ) AS ordered
WHERE 
   ordered.rownum BETWEEN [someValue] AND [someValue] 
```

# sql - SQL 问题基于时间聚合值

> ID：11087225
> 
> 赞同：0
> 
> 时间：2012-06-18T16:36:27.563
> 
> 标签：sql, time, aggregation

我需要值 1 和值 2 的运行总和。

我有一个看起来像这样的表：

```
Time | Plus Value | Minus Value 2 | 
0         30           10             
10        20           15
15        10           20
... 
```

我希望能够得到下表

```
Time | Plus Value | Minus Value 2 | Total
0         30           10             20           
10        20           15             25
15        10           20             15
... 
```

我希望能够选择这样的东西

```
select time, plus_value, minus_value(sum(plus_value) - sum(minus_value)) as total
from table
where time <= time 
```

我怎样才能做到这一点？我被迫按时间分组，这并没有给我想要的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:45:29.963

```
select time,
       plus_value,
       minus_value,
       sum(plus_value - minus_value) over(order by time rows unbounded preceding) as total
from table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:45:54.200

我不明白你的 where 子句：`where time <= time`？

无论如何，我相信您的查询可以像这样实现：

```
select time, plus_value, minus_value, (plus_value - minus_value) as total
from table; 
```

# jsf - 在 jsf 中从一个视图渲染到另一个视图

> ID：11087226
> 
> 赞同：0
> 
> 时间：2012-06-18T16:36:30.577
> 
> 标签：jsf, jsf-2, richfaces, ajax4jsf

我有这个：

包含的父视图

*   第一视图
*   第二视图

第一个视图有一个

```
<rich:panel id="toRender"> 
```

第二个有一个

```
<a4j:ajax render="toRender"> 
```

如何从 firstView 的 secondView 渲染面板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:00:17.483

找出它的真实客户端 ID，为其添加前缀`:`以使其成为绝对客户端 ID，然后使用它来代替。

对于尚未记住客户端 ID 是如何生成的以及所有 JSF[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)是什么的初学者来说，找出真实客户端 ID 的最简单方法是在浏览器中打开页面并*查看源代码*并找到生成的 HTML 元素感兴趣的 JSF 组件并获取其`id`属性的值。

它可能看起来像这样

```
<someHtmlElement id="someId:otherId:lastId"> 
```

在这种情况下，您需要使用

```
<a4j:ajax render=":someId:otherId:lastId"> 
```

如果其中一个父 JSF`NamingContainer`组件（如`<h:form>`）还没有固定`id`分配，因此您最终`j_idt123`会在客户端 ID 中自动生成或其他内容，那么您需要为 JSF`NamingContainer`组件提供一个固定 ID。

# javascript - 将 .toggle() 添加到 jQuery

> ID：11087227
> 
> 赞同：3
> 
> 时间：2012-06-18T16:36:30.780
> 
> 标签：javascript, jquery

我首先尝试在`.toggle()`此代码中添加一个，以便菜单会在单击时设置动画，但也会在单击时关闭，然后意识到我不能很好地使用它，`.animate`所以`.toggle()`我正在尝试`.click()`

如果有一种方法可以通过单击替换我的`mouseenter`和`mouseleave`功能，那就是我正在寻找的。

我已经搜索过，但找不到任何使用动画菜单完成的地方，所以这里是该函数的 javascript：

```
$('#sdt_menu > li').bind('mouseenter',function(){
    var $elem = $(this);
    $elem.find('img')
         .stop(true)
         .animate({
            border: '5px solid #000',

            'width':'150px',
            'height':'170px',
            'left':'0px'
         },400,'easeOutBack')
         .andSelf()
         .find('.sdt_wrap')
         .stop(true)
         .animate({'top':'140px'},500,'easeOutBack')
         .andSelf()
         .find('.sdt_active')
         .stop(true)
         .animate({'height':'170px'},300,function(){
        var $sub_menu = $elem.find('.sdt_box');
        if($sub_menu.length){
            var left = '170px';
            if($elem.parent().children().length == $elem.index()+1)
                left = '-170px';
            $sub_menu.show().animate({'left':left},200);
        }    
    });
}).bind('mouseleave',function(){
    var $elem = $(this);
    var $sub_menu = $elem.find('.sdt_box');
    if($sub_menu.length)
        $sub_menu.hide().css('left','0px');

    $elem.find('.sdt_active')
         .stop(true)
         .animate({'height':'0px'},300)

         .andSelf().find('img')
         .stop(true)
         .animate({
            border: "2px solid #FFFFFF",
            'width':'150px',
            'height':'150px',
            'left':'0px'},400)
         .andSelf()
         .find('.sdt_wrap')
         .stop(true)
         .animate({'top':'25px'},500);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:44:36.093

~~下面我添加一个如果它打开的类，如果它关闭则删除一个类，它告诉 onclick 事件要做什么。~~

查看[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)。很简单。

[归功于](https://stackoverflow.com/users/710446/apsillers)apsillers 。

```
$('#sdt_menu > li').toggle(function(){
    var $elem = $(this);
    var $sub_menu = $elem.find('.sdt_box');
    $elem.find('img')
         .stop(true)
         .animate({
            border: '5px solid #000',

            'width':'150px',
            'height':'170px',
            'left':'0px'
         },400,'easeOutBack')
         .andSelf()
         .find('.sdt_wrap')
         .stop(true)
         .animate({'top':'140px'},500,'easeOutBack')
         .andSelf()
         .find('.sdt_active')
         .stop(true)
         .animate({'height':'170px'},300,function(){
        if($sub_menu.length){
            var left = '170px';
            if($elem.parent().children().length == $elem.index()+1)
                left = '-170px';
            $sub_menu.show().animate({'left':left},200);
        }    
    });
}, function(){      
    var $elem = $(this);
    var $sub_menu = $elem.find('.sdt_box');
    if($sub_menu.length)
        $sub_menu.hide().css('left','0px');     
    $elem.find('.sdt_active')
         .stop(true)
         .animate({'height':'0px'},300)     
         .andSelf().find('img')
         .stop(true)
         .animate({
            border: "2px solid #FFFFFF",
            'width':'150px',
            'height':'150px',
            'left':'0px'},400)
         .andSelf()
         .find('.sdt_wrap')
         .stop(true)
         .animate({'top':'25px'},500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:50:31.267

您可以定义一个全局变量，`var isOpen = true;`然后更改您的点击代码

```
$('#sdt_menu > li').on('click', isOpen, function() {
    if (isOpen) {
        // Close
    } else {
        // Open
    }
    isOpen = !isOpen;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:13:03.927

```
 var isOpen = true;
 $('#sdt_menu > li').click(function(){
       if(isOpen ==  true){
           $(this).hide();
           isOpen = false;
       }else{
           $(this).show();
           isOpen = true;
       }
    } 
```

您可以根据需要设置 isOpen 变量的默认值。

.show() 和 .hide 是切换功能的扩展功能。

# javascript - 如何在融合表中使用 queryText 获取行数结果？

> ID：11087231
> 
> 赞同：2
> 
> 时间：2012-06-18T16:36:51.300
> 
> 标签：javascript, html, visualization, google-fusion-tables

如何在融合表中使用 queryText 获取行数结果？我将在下面发布我的代码...

```
function drawTable() 
{
    var queryText = encodeURIComponent(consulta);
    var gvizQuery = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq=' + queryText);
    gvizQuery.send(function (response) 
    {
        var table = new google.visualization.Table(document.getElementById('visualization'));
        table.draw(response.getDataTable(), { showRowNumber: true });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:32:46.057

```
numRows = response.getDataTable().getNumberOfRows(); 
```

# python - 在 python 中将“纯文本”解释为 utf-8 文本

> ID：11087232
> 
> 赞同：0
> 
> 时间：2012-06-18T16:36:53.757
> 
> 标签：python, string, text, encoding, utf-8

我有一个文本文件，其中的文本应该被解释为 utf-8 但不是（它是以这种方式给我的）。以下是文件典型行的示例：

> \u30ed\u30f3\u30c9\u30f3\u5728\u4f4f

应该是：

> ロンドン在住

现在，我可以通过在命令行中键入以下内容在 python 上手动执行此操作：

```
>>> h1 = u'\u30ed\u30f3\u30c9\u30f3\u5728\u4f4f'    
>>> print h1
ロンドン在住 
```

这给了我我想要的。有没有办法让我自动做到这一点？我试过做这样的事情

```
>>> f = codecs.open('testfile.txt', encoding='utf-8')
>>> h = f.next()
>>> print h
\u30ed\u30f3\u30c9\u30f3\u5728\u4f4f 
```

我也尝试过“编码”和“解码”功能，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:39:52.337

`\u30ed\u30f3\u30c9\u30f3\u5728\u4f4f`不是UTF8；它使用 python unicode 转义格式。请改用`unicode_escape`编解码器：

```
>>> print '\u30ed\u30f3\u30c9\u30f3\u5728\u4f4f'.decode('unicode_escape')
ロンドン在住 
```

这是上述短语的 UTF-8 编码，用于比较：

```
>>> '\u30ed\u30f3\u30c9\u30f3\u5728\u4f4f'.decode('unicode_escape').encode('utf-8')
'\xe3\x83\xad\xe3\x83\xb3\xe3\x83\x89\xe3\x83\xb3\xe5\x9c\xa8\xe4\xbd\x8f' 
```

请注意，`unicode_escape`对于任何不是可识别的 Python 转义序列的数据，使用 解码的数据都将被视为 Latin-1。

但是要小心；可能你真的在看*JSON 编码的数据*，它使用相同的符号来指定字符转义。用于`json.loads()`解码实际的 JSON 数据；具有此类转义的 JSON 字符串用`"`引号分隔，通常是较大结构（例如 JSON 列表或对象）的一部分。

# c#-4.0 - 从 C# 中的网络流中读取

> ID：11087236
> 
> 赞同：0
> 
> 时间：2012-06-18T16:37:13.337
> 
> 标签：c#-4.0, tcp, networkstream

我只是在从 C# 中的网络流中读取时遇到了这个问题。由于我更像是一名 Java 开发人员，因此我遇到了这个问题。

在java中，我可以选择使用以下代码知道接收到的数据包的长度 `int length = dataiInputStream.read(rcvPacket);`

即使分配的字节数组 rcvPacket 的大小大于其中包含的元素数量。这将允许我只读取所需长度的元素，这样我的字节数组中就没有包含零的元素。

当我试图在 C# 上使用类似的东西时

```
long len = networkStream.length; 
```

但是文档说不支持此属性。有解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:44:45.657

Java 代码*不会*显示数据包的长度。它向您显示了该调用中读取的数据量，这些数据`read`可能来自多个数据包。

`NetworkStream.Read`返回相同的信息，除了使用 0 而不是 -1 来指示流的结束。

# javascript - jQuery 将 div 切片成动画片段

> ID：11087238
> 
> 赞同：2
> 
> 时间：2012-06-18T16:37:23.100
> 
> 标签：javascript, jquery, html, css, slice

是否可以使用 jQuery 和 CSS 将 div 一分为二，然后分别为这两个部分设置动画？

为了更好地解释，请参见此图：

![在此处输入图像描述](../Images/8b1bacefc97f2ed4dad397256bd2f0d7.png) ![在此处输入图像描述](../Images/da442d664f6dde2be02cc07a45212f9d.png)

任何帮助将不胜感激 - 在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T16:46:59.260

您可以使用一对这样的容器 div 来伪造它：**[jsFiddle example](http://jsfiddle.net/j08691/Z6hac/)**。

**HTML**

```
<div id="top"><div>Some text here</div></div>
<div id="bottom"><div>Some text here</div></div>​ 
```

**CSS**

```
#top,#bottom {
    background: #333;
    width:200px;
    height:100px;
    position:relative;
    overflow:hidden;
}
#top div {
    position:relative;
    top: 90px;
    color:#eee;
    text-align:center;
}
#bottom div {
    position:relative;
    top: -10px;
    color:#eee;
    text-align:center;
} 
```

**jQuery**

```
$('#bottom').delay(2000).animate({
    bottom: '-200px'
},4000);
$('#top').delay(2000).animate({
    top: '-200px'
},4000); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:40:58.250

不，你不能像那样显示一个 div。但是您可以在每个副本上复制并将大小限制为一半，然后为两者设置动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T16:42:12.257

您可以制作 2 个 div，并让每个`overflow:hidden;`.

之后，将文本放置在左侧相同的位置，但一个略低于 div，一个略高于 div，以便将每个文本“剪切”成两半。（或者这是一种解决方法）

# oauth - 服务器端移除 Oauth 令牌

> ID：11087240
> 
> 赞同：1
> 
> 时间：2012-06-18T16:37:39.153
> 
> 标签：oauth

如果用户想从我们的服务中删除他/她自己，我们会从我们的数据库中删除他们的所有数据，包括 Oauth 令牌。我们拥有的 Oauth 令牌是安全且持久的。作为最佳实践的一部分，我们希望完全使令牌无效，就好像他们想访问他们的 Google 帐户页面并在那里将其删除一样。阅读 Oauth 文档时，我不清楚这是否可能，因为所有示例都与单会话或非安全案例有关（请原谅我缺乏“你尝试了什么？”-ism 但我正在尝试一起制定如何执行此操作的快速计划）。

所以

1）这可能吗？最好在 1.0 上？

2）如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T01:11:03.160

是的，您可以通过编程方式撤销令牌，就像用户在其帐户设置页面中撤销访问一样。

对于 AuthSub 和 OAuth 1.0，通过发出 OAuth 签名请求来使用[AuthSubRevoke 令牌端点：](https://developers.google.com/accounts/docs/OAuth_ref#RevokeToken)

```
https://www.google.com/accounts/AuthSubRevokeToken 
```

对于 OAuth 2.0，使用[吊销端点](https://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke)，例如：

```
https://accounts.google.com/o/oauth2/revoke?token={refresh_token} 
```

# iphone - iPhone - 检测圆圈运动

> ID：11087242
> 
> 赞同：1
> 
> 时间：2012-06-18T16:37:48.700
> 
> 标签：iphone, ios, cocoa-touch, ipad

我有一个用户可以用手指绘制的区域。该区域包含一个对象，我希望用户能够顺时针或逆时针旋转它。我的想法是为用户提供整个屏幕来控制对象。我的意思是，如果用户开始以圆形模式描述顺时针手指运动，则对象将沿该方向旋转。如果运动是逆时针方向的，则对象将向另一个方向旋转。

因此，这个想法是检测手指是否在描述圆周运动，顺时针或逆时针以及角度量。这必须是实时的，我的意思是，只要用户在旋转手指对象就在旋转。

我见过应用程序做类似的事情，用户绘制一个形状和繁荣，应用程序用漂亮的形状代替了笨重的形状。本质上，该应用程序检测到绘制了一个圆形、一个三角形等，并将该手势替换为一个真正漂亮的形状。

我该怎么做这种事情？我只对圆圈运动感兴趣。

大家能给我指个方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:00:21.440

查看“圆形检测的霍夫变换”。这是一篇很好的[博客文章](http://basic-eng.blogspot.com/2006/02/hough-transform-for-circle-detection.html)：

# linux - 比较 2 个文件夹并查找具有不同字节数的文件

> ID：11087244
> 
> 赞同：11
> 
> 时间：2012-06-18T16:37:52.320
> 
> 标签：linux, file, size, compare, directory

在 Linux Mint 12 中使用 Gnome，我将一个大约 9.7 GB 的文件夹（包含一个复杂的子文件夹树）从一个 NTFS 闪存驱动器复制到另一个 NTFS 闪存驱动器。根据 Gnome，文件计数匹配，但根据 du（和其他程序），字节计数不匹配。（我在其他 Linux 发行版和 Windows XP 中复制文件夹时遇到了同样的问题。）

我只想知道哪些文件没有匹配的字节数。（我不想比较每个文件的内容，因为那样会花费太长时间。）找到字节数不匹配文件的最佳、最简单和最快的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-07T14:45:04.650

我会调整@user1464130 的答案，因为它无法处理文件名中的空格。

```
cd dir1
find . -type f -printf "%p %s\n" | sort > ~/dir1.txt
cd dir2
find . -type f -printf "%p %s\n" | sort > ~/dir2.txt
diff ~/dir1.txt ~/dir2.txt 
```

如果要对每个文件启动命令并在报告中使用结果，可以使用`while`Bash 构造。此示例用于`md5sum`计算每个文件的校验和。

```
find . -maxdepth 1 -type f -printf "%p %s\n" | while read path size; do echo "$path - $(md5sum $path | tr -s " " | cut -f 1 -d " ") - $size" ; done 
```

每个`$()`都单独执行，并允许我们计算每个文件的校验和。使用将`tr`每个连续的空格压缩到一个空格中，并`cut`提取第 n 个位置的单词，这里是第一个位置。如果我们不这样做，我们会两次获取文件名，因为`md5sum`将其返回到标准输出。

这是一个不使用比较的示例（否`diff`）。请注意，我使用破折号`-`来强调我们输出的关于每个文件的三个数据，但如果您想将其提供给另一个程序，这可能会出现问题。

```
$ find . -maxdepth 1 -name "*.c" -type f -printf "%p %s\n" |  while read path size; do echo "$path - $(md5sum $path | tr -s " " | cut -f 1 -d " ") - $size" ; done
./thread.c - 5f2b7b12c7cd12fcb9e9796078e5d15b - 584
./utils.c - d61bc1dbc72768e622a04f03e3b8f7a2 - 3413 
```

**编辑**：要处理文件名中的空格并仍然获取校验和和大小，您可以使用以下代码。

```
$ find . -maxdepth 1 -name "*.c" -type f -print0 | xargs -0 -n 1 md5sum | while read checksum path; do echo $path $(stat --printf="%s" "$path") $checksum ; done
./ini tia li za tion.c 84 31626123e9056bac2e96b472bd62f309 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T22:16:01.797

您是否检查了两个分区是否具有相同的属性？（块大小、大小、为删除或坏块保留的空间等）

对于您的具体情况，我建议使用选项 -n（或 --dry-run）进行*rsync 。*它会告诉你哪些文件不同。那是：

```
$ rsync -I -n /source/ /target/ 
```

选项*-I*是忽略时间。您可以使用相同的命令使两个目录等效（时间戳、权限等）。

查看*rsync*的手册或尝试选项*--help*以获取更多选项和如何使用它的示例。它非常强大。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T17:10:54.710

假设您需要比较 dir1 和 dir 2，以下是控制台命令：

```
cd dir1
find . -type f|sort|xargs ls -l| awk '{print $5,$8}' > ~/dir1.txt
cd dir2
find . -type f|sort|xargs ls -l| awk '{print $5,$8}' > ~/dir2.txt
diff ~/dir1.txt ~/dir2.txt 
```

您可能需要编辑 awk 参数以使其正确打印文件长度和路径。

# c# - 将项目绑定到 ListBox 多列

> ID：11087248
> 
> 赞同：2
> 
> 时间：2012-06-18T16:38:09.450
> 
> 标签：c#, wpf, xaml, listbox, multiple-columns

我正在尝试将我的数据添加到多个列 ListBox 中，我做到了，但是在尝试从列表框中检索数据时遇到了一个难题。有没有办法将对象而不是文本放入 listBox 行？

```
<ListView Name="listBox1" ItemsSource="{Binding Items}" Margin="28,28,68,67" FlowDirection="RightToLeft" MouseDoubleClick="listBox1_MouseDoubleClick">
        <ListView Name="listBox1" ItemsSource="{Binding Items}" Margin="28,28,68,67" FlowDirection="RightToLeft" MouseDoubleClick="listBox1_MouseDoubleClick">
        <ListView.View>
            <GridView>
                <GridView.Columns>
                    <GridViewColumn Header="a" Width="100" DisplayMemberBinding="{Binding Path=ID}" />
                    <GridViewColumn Header="b" Width="100" DisplayMemberBinding="{Binding Path=Name}" />
                    <GridViewColumn Header="c" Width="100" DisplayMemberBinding="{Binding Path=F}" />
                </GridView.Columns>
            </GridView>
        </ListView.View>
    </ListView>
</Grid> 
```

这是代码

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
    public sealed class MyListBoxItem
    {
        public string Field1 { get; set; }
        public string Field2 { get; set; }
        public string Field3 { get; set; }
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        Students st = new Students(1, "name","anything");
        listBox1.ItemsSource = new List(new[] { st });
    }

    private void listBox1_MouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        object ob = listBox1.SelectedItem;
        string i = ((MyListBoxItem)listBox1.SelectedItem).Field1;
    }
} 
```

这是班级学生

```
 class Students
{
    int id;
    string name;
    string f;

    public Students(int id, string name,string f)
    {
        this.id = id;
        this.name = name;
        this.f = f;
    }
    public int ID
    {
        get { return id; }
        set { id = value; }
    }
    public string Name
    {
        get { return name; }
        set { name = value; }
    }
    public string F
    {
        get { return f; }
        set { f = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T16:53:12.847

不要使用 listBox1.Items.Add(....)。而是使用 listBox1.ItemsSource = new List(new[] {st});

然后将您的 DisplayMemberBindings 分别更改为“Id”、“Name”。

不需要 ListBoxItem 类。

== 编辑 ==

你已经非常接近完美了。我在下面附上了它应该如何工作。需要注意的重要事项是 ListView 中 ItemsSource 和 SelectedITem 的绑定，并将 IsSynchronisedWithCurrentItem 设置为 true。

此外，在网格的底部两行中，我展示了两种不同的绑定到所选项目的方法，一种使用“/”表示法，另一种使用 ViewModel 上的属性

## XAML

```
<Window x:Class="StackOverflow11087468.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
            <ListView Name="listBox1"
                      Grid.Row="0"
                      ItemsSource="{Binding Students}"
                      SelectedItem="{Binding SelectedStudent}"
                      IsSynchronizedWithCurrentItem="True"
                      Margin="28,28,68,67"
                      FlowDirection="RightToLeft">
                <ListView.View>
                    <GridView>
                        <GridView.Columns>
                            <GridViewColumn Header="a"
                                            Width="100"
                                            DisplayMemberBinding="{Binding Path=ID}" />
                            <GridViewColumn Header="b"
                                            Width="100"
                                            DisplayMemberBinding="{Binding Path=Name}" />
                            <GridViewColumn Header="c"
                                            Width="100"
                                            DisplayMemberBinding="{Binding Path=F}" />
                        </GridView.Columns>
                    </GridView>
                </ListView.View>
            </ListView>

        <StackPanel Grid.Row="1" Orientation="Horizontal">
            <TextBlock>ID</TextBlock>
            <TextBox Text="{Binding Students/ID}" />            
        </StackPanel>

        <StackPanel Grid.Row="2"
                    Orientation="Horizontal">
            <TextBlock>ID</TextBlock>
            <TextBox Text="{Binding SelectedStudent.ID}" />
        </StackPanel>
    </Grid>
</Window> 
```

# 主窗口.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace StackOverflow11087468
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            this.DataContext = new ViewModel();
        }
    }
} 
```

# 视图模型.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace StackOverflow11087468
{
    public class ViewModel : INotifyPropertyChanged
    {
        public ObservableCollection<Student> Students { get; set; }

        public ViewModel()
        {
            this.Students = new ObservableCollection<Student>();
            Students.Add(new Student(98760987, "Student1", "F"));
            Students.Add(new Student(98760988, "Student22", "M"));
        }

        public Student SelectedStudent
        {
            get { return _selectedStudent; }
            set
            {
                _selectedStudent = value;
                RaisePropertyChanged("SelectedStudent");
            }
        }

        private void RaisePropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private Student _selectedStudent;
    }
} 
```

# php - 如何将 mod_rewrite 与多个 user_id 和多个模板一起使用

> ID：11087250
> 
> 赞同：0
> 
> 时间：2012-06-18T16:38:14.100
> 
> 标签：php, mysql, mod-rewrite

我有一个用 PHP 编写并使用 mysql 的会员程序，用户输入他们的产品信息以显示在公共网页上，其 URL 如下所示：

```
http://domain.com/folder/page.php?id=62&template=7 
```

我想使用 mod_rewrite 将页面转换为：

```
http://domain.com/folder/62/7 
```

`id`可以是从 1 到 10,000 的任何数字，并且可以`template`是从 1 到 100 的任何数字。mod_rewrite 规则或条件看起来如何？如果我需要编写 PHP 代码以包含在 mod_rewrite 规则中以处理多个`id`s 和多个`template`s，那么 mod_rewrite 会附带什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:40:48.023

.ht 访问：

```
RewriteEngine On
RewriteBase /
RewriteRule ^folder/([^/]+)/([^/]+) page.php?id=$1&template=$2 [L] 
```

# php - 进入数组处理的复选框

> ID：11087254
> 
> 赞同：-2
> 
> 时间：2012-06-18T16:38:20.870
> 
> 标签：php, arrays

我有这样的问题。在我的表格中，我把它作为一个复选框：

```
<input type="checkbox" name="access[1]" value="E01">Highway 1<br><br>
<input type="checkbox" name="access[1][]" value="C001" >&nbsp;C001<br>
<input type="checkbox" name="access[1][]" value="C002" >&nbsp;C002
<br>
<br>
<input id="access[2]" type="checkbox" name="access[2]" value="E03">Highway 2<br><br>
<input id="access[2]" type="checkbox" name="access[2][]" value="XXXX">&nbsp;XXXX
<br>
<br>
<input id="access[3]" type="checkbox" name="access[3]" value="E05">Highway 3<br><br>
<input id="access[3]" type="checkbox" name="access[3][]" value="XXXX">&nbsp;XXXX<br>
<br> 
```

在我的 PHP 代码中，我得到了这个：

```
foreach ($_POST ["access"] as $id => $subs) {       

    foreach ($subs as $sub) {

        $subcategory = $sub;

        echo "<p>".$id." - ".$subs." - ".$subcategory."</p>";

    }

} 
```

结果是这样的：

[http://s12.postimage.org/f2xi0yz4p/data4.png](http://s12.postimage.org/f2xi0yz4p/data4.png)

您看到的数组应该是表单中的值吧？像“E01”/“E03”/“E05”。我怎样才能使“数组”这个词成为主要类别？

预期的输出应该是这样的：

1 - E01 - C0001
2 - E01 - C0002
3 - E03 - XXXX
4 - E05 - XXXX

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:52:50.143

您将需要重命名`access[1]`和`access[2]`类似：`access[1][id]` `access[2][id]`as `access[1]`/`access[2]`正在通过以下输入自动转换为数组。

然后您可以访问这些变量：

```
foreach ($_POST ["access"] as $id => $subs) {       

    foreach ($subs as $key=>$sub) {
        if($key!='id'){
            $subcategory = $sub;
            echo "<p>".$id." - ".$subs['id']." - ".$subcategory."</p>";
        }
    }

} 
```

# shell - Shell 脚本中的并行处理或线程

> ID：11087256
> 
> 赞同：11
> 
> 时间：2012-06-18T16:38:29.217
> 
> 标签：shell, unix

我正在 shell 中编写一个脚本，其中一个命令正在运行并且需要 2 分钟。每次。此外，我们对此无能为力。但是如果我想在脚本中运行这个命令 100 次，那么总时间将是 200 分钟。这将产生一个大问题。没有人愿意等待 200 分钟。我想要的是并行运行所有 100 个命令，以便输出将在 2 分钟内出现，或者可能需要更多时间，但不需要 200 分钟。

如果有任何机构可以以任何方式帮助我，我们将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T04:43:31.990

[GNU Parallel](http://www.gnu.org/software/parallel/)就是你想要的，除非你想重新发明轮子。这里有一些更详细的[例子](http://unethicalblogger.com/2010/11/11/gnu-parallel-changed-my-life.html)，但很短：

```
ls | parallel gzip # gzip all files in a directory 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-18T16:58:56.817

> ...并行运行所有 100 个命令，以便输出将在 2 分钟内出现

这只有在您的系统上有 200 个处理器时才有可能。

shell 脚本中没有这样的实用程序/命令来并行运行命令。你可以做的是在后台运行你的命令：

```
for ((i=0;i<200;i++))
do
   MyCommand &
done 
```

使用`&`（背景），每次执行都会尽快安排。但这并不能保证您的代码将在 200 分钟内执行完毕。这取决于您的系统上有多少个处理器。

如果您只有一个处理器，并且每次执行命令（需要 2 分钟）都在 2 分钟内进行一些计算，那么处理器正在做一些工作，这意味着没有浪费任何周期。在这种情况下，并行运行命令并没有帮助，因为只有一个处理器也不是空闲的。因此，这些进程将只是等待轮到它们执行。

如果您有多个处理器，那么上述方法（for 循环）可能有助于减少总执行时间。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-18T18:06:59.590

As @KingsIndian said, you can background tasks, which sort of lets them run in parallel. Beyond this, you can also keep track of them by process ID:

```
#!/bin/bash

# Function to be backgrounded
track() {
  sleep $1
  printf "\nFinished: %d\n" "$1"
}

start=$(date '+%s')

rand3="$(jot -s\  -r 3 5 10)"

# If you don't have `jot` (*BSD/OSX), substitute your own numbers here.
#rand3="5 8 10"

echo "Random numbers: $rand3"

# Make an associative array in which you'll record pids.
declare -A pids

# Background an instance of the track() function for each number, record the pid.
for n in $rand3; do
  track $n &
  pid=$!
  echo "Backgrounded: $n (pid=$pid)"
  pids[$pid]=$n
done

# Watch your stable of backgrounded processes.
# If a pid goes away, remove it from the array.
while [ -n "${pids[*]}" ]; do
  sleep 1
  for pid in "${!pids[@]}"; do
    if ! ps "$pid" >/dev/null; then
      unset pids[$pid]
      echo "unset: $pid"
    fi
  done
  if [ -z "${!pids[*]}" ]; then
    break
  fi
  printf "\rStill waiting for: %s ... " "${pids[*]}"
done

printf "\r%-25s \n" "Done."
printf "Total runtime: %d seconds\n" "$((`date '+%s'` - $start))" 
```

You should also take a look at the Bash documentation on [coprocesses](http://www.gnu.org/software/bash/manual/html_node/Coprocesses.html).

# ios - Instagram 之类的照片编辑功能

> ID：11087261
> 
> 赞同：0
> 
> 时间：2012-06-18T16:38:52.860
> 
> 标签：ios, objective-c

我见过`Instagram`很多类似的应用程序，可以拍照并改变图像的颜色，如淡入淡出、亮度、灰度和添加到其中的各种图像处理效果。

我需要尝试一下，所以有人可以帮我找到一个好的教程，开始吧。

目前，我的程序可以从相机拍摄照片，但我无法处理 Instagram 上显示的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T02:12:07.797

这是一个可能有帮助的开源图像过滤器库：[https ://github.com/OmidH/Filtrr](https://github.com/OmidH/Filtrr)

# jquery - Jasmine 测试一个元素的定位

> ID：11087262
> 
> 赞同：2
> 
> 时间：2012-06-18T16:38:54.483
> 
> 标签：jquery, bdd, jasmine, backbone-views

我想测试一个主干视图，该视图在第一次实例化时最初应该在其父容器中居中。它是 UI 的一部分，允许用户在 div 内拖动元素。

此当前测试不起作用（元素的左侧和顶部设置为零）。

我意识到，由于我创建的父元素和子元素从未插入到 DOM 中，因此它们的 CSS 似乎从未采用任何值。这样做的正确方法是什么？

渲染函数：

```
 $(@el).css
    left: ($(@parent).width() - @el.width) / 2
    top: ($(@parent).height() - @el.height) / 2      
      @ 
```

测试代码

```
it("should center the element", function() {
  var size = { width: 60, height: 90};
  var parent = document.createElement('div');
  $(parent).width(size.width);
  $(parent).height(size.height);

  this.view.parent = parent;
  $(parent).append(this.view.render().el);

  var expectPosition = {
    left: ($(parent).width() - $(this.view.el).width()) / 2,
    top: (size.height - $(this.view.el).height()) / 2,
  }

      expect($(this.view.el).position()).toEqual(expectPosition);
}); 
```

# c# - 是否有用于 Xml 的 Json2Csharp.com？

> ID：11087263
> 
> 赞同：1
> 
> 时间：2012-06-18T16:38:55.490
> 
> 标签：c#, xml

我一直在使用 Json2Csharp.com。为我节省了很多工作。有没有类似的 XML 工具？（如 Xml2Csharp.com）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:49:09.210

有一个用于此类目的的[XML 架构定义工具 (Xsd.exe) 。](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.100%29.aspx)它不是一个网站，但可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-27T16:36:02.073

同站现在支持xml转换，希望对 [https://json2csharp.com/xml-to-csharp有所帮助](https://json2csharp.com/xml-to-csharp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T12:30:26.267

是的，它在[http://xmltocsharp.azurewebsites.net/](http://xmltocsharp.azurewebsites.net/)那里 ，它比 xsd.exe 或 Visual Studio“特殊粘贴”更智能转换器（对于具有许多字段的 xml，它创建具有强类型字段的纯类，而不是具有数组的类System.Object 和 Enum 用于 VS 或 xsd.exe 等标识字段）

# wpf - 如何在初始化序列期间显示主窗口

> ID：11087267
> 
> 赞同：0
> 
> 时间：2012-06-18T16:39:10.817
> 
> 标签：wpf

我有一个正在构建的 WPF 应用程序。程序在初始化时会显示一个启动屏幕。大多数启动顺序需要在显示主窗口后在后台线程中完成。我的问题是主窗口在我想要的时候没有显示。

这是我的主窗口的 Window_Loaded 事件处理程序：

```
private void Window_Loaded( object sender, RoutedEventArgs e ) {
    if ( !DoInitialize() ) {
        shuttingDown = true;
        Application.Shutdown();
    }

    e.Handled = true;
}

private bool DoInitialize() {
    if ( !ReadConfiguration( Application.ConfigurationFilePath ) ) {
        return false;
    }

    Thread th = new Thread( new ThreadStart( FinishInitializing ) );
    th.SetApartmentState(ApartmentState.STA); 
    th.Start();

    ClockTimer = new DispatcherTimer( TimeSpan.FromSeconds( 1 ), DispatcherPriority.Background, UpdateClock, Dispatcher );
    ClockTimer.Start();

    return true;
} 
```

如您所见，除了读取配置文件之外，它除了启动后台`Thread`完成初始化并启动`DispatcherTimer`. 此计时器用于更新显示屏上的时钟。

究竟是什么触发了主窗口的显示？

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:03:37.103

如果您希望在渲染（显示）窗口后执行代码，您可以附加到主窗口上的 Window.ContentRendered 事件。

要回答您的问题，顺序是

*   显示的闪屏
*   MainWindow 构造函数 (InitializeComponent())
*   Window.Loaded 调用
*   显示的窗口
*   Window.ContentRendered 调用
*   闪屏已隐藏

# appfabric - AppFabric 缓存对象 GET 时间太长

> ID：11087270
> 
> 赞同：1
> 
> 时间：2012-06-18T16:39:14.503
> 
> 标签：appfabric

我已经在开发机器（Windows 7）中安装了 Windows 服务器 AppFabric Cache 来试用它。我创建了一个简单的 aspx 页面，它获取我之前保存在缓存中的 DataTabel（1000 行整数和字符串）。在一系列页面重新加载后计算 GET 时间（我使用 Stopwatch 类）我得到以下时间 13ms、13ms、13ms、13ms、439ms、13ms、309ms、452ms、603ms、195ms、565ms、13ms 等。我完全对此感到困惑，我无法解释。考虑到 13 毫秒是正常时间，什么可能导致这种延迟？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:41:46.153

您在测试过程中是否注意到任何瓶颈（CPU、内存、网络）？尝试将查询与持久数据库进行比较。

# linq - Linq 到实体百分比

> ID：11087271
> 
> 赞同：0
> 
> 时间：2012-06-18T16:39:16.307
> 
> 标签：linq, linq-to-entities, percentage

有人对在 Linq to Entities 中计算百分比有任何提示吗？

我猜肯定有比返回 2 个结果并在内存中计算更有效的方法。也许是对 let 或 into 的创造性使用？

编辑

* * *

感谢 Mark 的评论，这是一个代码片段，但我认为这将导致 2 个数据库命中：

```
int passed = (from lpt in this.PushedLearnings.Select(pl => pl.LearningPlanTask)
where lpt.OnlineCourseScores.Any(score => score.ActualScore >= ((lpt.LearningResource.PassMarkPercentage != (decimal?)null) ?lpt.LearningResource.PassMarkPercentage : 80))
select lpt).Count();

int total = (from lpt in this.PushedLearnings.Select(pl => pl.LearningPlanTask)
select lpt).Count();

double percentage = passed * 100 / total; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:41:46.173

如果您使用 LINQ to Entities 并`select x * 100.0 / y`在查询中编写一些内容，则此表达式将转换为 SQL 并在数据库中运行。这将是有效的。

# ruby-on-rails - 使用 gem 时 multi_json_1.3.6 错误 exception_notification", "~> 2.6.1"

> ID：11087272
> 
> 赞同：0
> 
> 时间：2012-06-18T16:39:16.487
> 
> 标签：ruby-on-rails, rubygems, bundler

```
Installing multi_json (1.3.6) /home/ubuntu/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/fileutils.rb:243:in `mkdir': Permission denied - /home/ubuntu/.rvm/gems/ruby-1.9.2-p180/gems/multi_json-1.3.6 (Errno::EACCES) 
```

我什至删除了 Gemfile.lock 但它显示错误。我只用过

```
gem "exception_notification", "~> 2.6.1" 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:21:38.730

如果您不知道此错误的含义：

> 安装 multi_json (1.3.6) /home/ubuntu/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/fileutils.rb:243:in `mkdir': Permission denied - /home/ ubuntu/.rvm/gems/ruby-1.9.2-p180/gems/multi_json-1.3.6 (Errno::EACCES)

你应该回去并获得一些关于unix和用户权限的基本知识......

问题是，您正在执行捆绑命令的用户不允许执行`mkdir`，`/home/ubuntu/.rvm/gems/ruby-1.9.2-p180/gems/`所以这基本上是一个权限管理问题。

# wcf - Visual Studio 在 WCF 服务操作中抛出 FaultException 时是否正常？

> ID：11087275
> 
> 赞同：1
> 
> 时间：2012-06-18T16:39:28.667
> 
> 标签：wcf

在我的服务操作中，我抛出了一个 FaultException，但应用程序暂停，直到我按 F5 继续操作。

这对于 FaultExceptions 是否正常？（我可以禁用在 Visual Studio 中捕获的 FaultExceptions 并且一切正常，但我担心这将如何在生产中发挥作用？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:24:53.713

您看到的是调试器的行为，而不是应用程序的行为。如果您在 Visual Studio 中禁用异常中断，您将看到您的应用在生产中的行为方式。

# php - 创建一个简单的时间戳并测试它是否已过期

> ID：11087281
> 
> 赞同：3
> 
> 时间：2012-06-18T16:40:02.150
> 
> 标签：php

我正在尝试学习如何创建和测试时间戳的到期。我设置了一个简单的示例，尝试测试已过期的时间戳，但它似乎无法正常工作，我想知道是否有人可以帮助我弄清楚为什么它不会回显“有效”和“过期”在适当的时候？

```
<?php

echo'
<html>
<head>
</head>
<body>';

//set static current time
$timestamp = 1340037073;

if($timestamp <= strtotime("+10 minutes", $timestamp)){
    echo "Valid";
}else{
    echo "Expired";
}

echo'
</body>
</html>';

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:52:14.340

当前时间是通过`time()`函数获取的，因此`$timestamp`应该包含从外部源（如数据库或其他）获取的时间，以检查当前时间是否已过期：

```
//test timestamp
$timestamp = 1340037073;

//check if it has expired (600 = 60*10 seconds = 10 minutes)
if ((time() - $timestamp) < 600)
{
  echo 'valid';
}
else
{
  echo 'expired';
} 
```

希望对你有帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:51:13.577

你所拥有的永远是有效的。考虑一下：

```
$i = 0;

if ($i <= ($i+1)) {
  // always truthy, because 1 is greater than 0
} 
```

所以你应该切换它：

```
$timestamp = 1340037073;

if(strtotime("+10 minutes", $timestamp) <= $timestamp){
    echo "Valid";
} else {
    echo "Expired";
} 
```

另外：为什么不开始使用[DateTime](http://php.net/manual/en/book.datetime.php)呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-05T11:48:56.407

更简单：（600 = 10 分钟，以秒为单位）

```
if (($timestamp+600) <= time()) {
    //expired
} 
```

# asp.net - VB.Net 路径中的反斜杠

> ID：11087286
> 
> 赞同：2
> 
> 时间：2012-06-18T16:40:16.620
> 
> 标签：asp.net, vb.net, path, backslash

看来我对 ASP.Net VB.Net 中的反斜杠并不幸运。

我正在尝试使用 ffprobe 输出有关文件的一些信息，并且我的路径在每个包含反斜杠的字符串中的某个反斜杠处随机剪切。

我调试了这个函数来返回fileToProcess生成的路径：

```
Function ffprobe_show_format(ByVal arg As String) As String
    Dim myProcess As New System.Diagnostics.Process()
    Dim fileToProcess As String = MapPath(".") & "\temps\" & arg
    myProcess.StartInfo.FileName = MapPath(".") & "\ffprobe.exe"
    myProcess.StartInfo.Arguments = "-show_format " & fileToProcess & " >C:\inetpub\vhosts\mysite.com\httpdocs\absolutefs\ffmpegtemp.txt"
    myProcess.StartInfo.UseShellExecute = False
    myProcess.StartInfo.RedirectStandardInput = True
    myProcess.StartInfo.RedirectStandardOutput = True
    myProcess.Start()
    Dim myStreamWriter As StreamWriter = myProcess.StandardInput
    Dim mystreamreader As StreamReader = myProcess.StandardOutput
    Dim str As String = mystreamreader.ReadToEnd
    Return str & ";" & "FileToProcess=" & fileToProcess & "MapPath(.) AND ffprobe.exe" & MapPath(".") & "\\ffprobe.exe"
End Function 
```

它返回`;FileToProcess=C:`

代表着

*   由于某些错误，我的文件未处理
*   我的路径在反斜杠处被切断
*   然后将其余的字符串断开

我是否需要告诉 asp.net 以另一种方式表示反斜杠？

[编辑]

我无法选择答案，但会投赞成票，因为我犯了两个错误： - 为了调试，我正在读取我的值，一旦它被放入具有限制大小的 SQL 变量然后 - ...使用可能拒绝的 Newtonsoft.Json 解析器获取一些字符。

我是 ASP.Net 的新手，所以我很难找到调试的好方法。因此，当我无法在平台上进行调试时，我终于像往常一样：我已经在文本文件中编写了调试变量，并且所有内容都使用这种方式：

```
Function ffprobe_show_format(ByVal file As String, ByVal app As String) As String        
    Dim myProcess As New System.Diagnostics.Process()
    myProcess.StartInfo.FileName = app
    Dim argz As String = FormatCommandLine("-show_format", file)
    myProcess.StartInfo.Arguments = argz
    myProcess.StartInfo.UseShellExecute = False
    myProcess.StartInfo.RedirectStandardOutput = True
    myProcess.Start()
    Dim mystreamreader As StreamReader = myProcess.StandardOutput str As String = mystreamreader.ReadToEnd
    MapPath(".") & "/ffprobe.exe"
    Dim objWriter As New System.IO.StreamWriter(MapPath(".") & "\debug.txt")
    objWriter.Write(str)
    objWriter.Close()
    Return str
End Function 
```

我将添加一个 ffmpeg 标签，因为它也是如何调用它和处理文件的另一个示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:18:08.207

您无需担心反斜杠。反斜杠在 VB 中不像在 C# 中那样是特殊字符。事实上，如果你把它们加倍，你可能会遇到错误。

很难说问题出在哪里。尝试缩小范围的一些想法：

*   尝试不要重定向 StandardInput，因为您没有传递任何东西。

*   从 StandardError 读取以确保它为空。它可能包含错误消息。

*   我会使用 Debug.WriteLine 来跟踪函数并尝试找出问题开始的地方。

*   这可能无关紧要，但我会将 myProcess.WaitForExit 放在 mystreamreader.ReadToEnd 之后。

*   Larry 建议使用 System.IO.Path 是一个很好的建议。

一些基于所有这些仓促修改的代码：

```
Function ffprobe_show_format(ByVal arg As String) As String

    Debug.WriteLine("arg: " & arg)

    Dim fileToProcess As String = IO.Path.Combine(MapPath("."), "temps\" & arg)
    Debug.WriteLine("fileToProcess = " & fileToProcess)

    Debug.WriteLine("MapPath AND ffprobe.exe: " & IO.Path.Combine(MapPath(".") & "\\ffprobe.exe"))

    Dim myProcess As New System.Diagnostics.Process()
    myProcess.StartInfo.FileName = IO.Path.Combine(MapPath("."), "\ffprobe.exe")
    myProcess.StartInfo.Arguments = "-show_format " & fileToProcess & " >C:\inetpub\vhosts\mysite.com\httpdocs\absolutefs\ffmpegtemp.txt"
    myProcess.StartInfo.UseShellExecute = False
    'myProcess.StartInfo.RedirectStandardOutput = True
    myProcess.StartInfo.RedirectStandardError = True
    myProcess.Start()
    'Dim str As String = myProcess.StandardOutput.ReadToEnd
    Dim errStr as string = myProcess.StandardError.ReadToEnd
    myProcess.WaitForExit()

    Debug.WriteLine("myProcess exit code = " & myProcess.ExitCode.ToString())
    'Debug.WriteLine("stdOutput: " & str)
    Debug.WriteLine("stdError: " & errStr)

    Return str & ";" & "FileToProcess=" & fileToProcess

End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T17:18:21.280

这里有几件事需要考虑。

首先，反斜杠字符是转义字符（即 \t \n \r ...），如果您必须将其嵌入字符串中，则应该双转义 \\。

但是，.NET 框架包含一个非常好的类：System.IO.Path，它具有多个 Combine 方法重载，可以帮助您构建路径，而无需将反斜杠字符嵌入到字符串中。这也使您的代码在您将在非 Windows 平台上运行它的（有点不太可能）事件中更具可移植性。

[http://msdn.microsoft.com/en-us/library/system.io.path](http://msdn.microsoft.com/en-us/library/system.io.path)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T18:42:57.060

`StreamReader`在访问其内容之前尝试关闭：

```
Dim myStreamReader As StreamReader = myProcess.StandardOutput
Dim str As String = myStreamReader.ReadToEnd
myStreamReader.Close()
Return str & ";" & "FileToProcess=" & fileToProcess & "MapPath(.) AND ffprobe.exe" & MapPath(".") & "\\ffprobe.exe" 
```

当我在本地 devbox 中运行您的功能时：

```
Function ffprobe_show_format(ByVal arg As String) As String
    Dim myProcess As New System.Diagnostics.Process()
    Dim fileToProcess As String = HttpContext.Current.Server.MapPath(".") & "\temps\" & arg
    myProcess.StartInfo.FileName = HttpContext.Current.Server.MapPath(".") & "\ffprobe.exe"
    myProcess.StartInfo.Arguments = "-show_format " & fileToProcess & " >C:\inetpub\vhosts\mysite.com\httpdocs\absolutefs\ffmpegtemp.txt"
    'myProcess.StartInfo.UseShellExecute = False
    'myProcess.StartInfo.RedirectStandardInput = True
    'myProcess.StartInfo.RedirectStandardOutput = True
    'myProcess.Start()
    'Dim myStreamWriter As StreamWriter = myProcess.StandardInput
    'Dim myStreamReader As StreamReader = myProcess.StandardOutput
    Dim str As String = String.Empty 'myStreamReader.ReadToEnd
    Return str & ";" & "FileToProcess=" & fileToProcess & "MapPath(.) AND ffprobe.exe" & HttpContext.Current.Server.MapPath(".") & "\\ffprobe.exe"
End Function 
```

我得到了一个我认为是正常返回的字符串`ffprobe_show_format`：

```
";FileToProcess=C:\Documents and Settings\Me\My Documents\Proj1\SubApp1\temps\testMapPath(.) AND ffprobe.exeC:\Documents and Settings\Me\My Documents\Proj1\SubApp1\\" 
```

我注释掉了，`System.Diagnostics.Process()`因为我没有一个名为`ffprobe.exe`.

鉴于它的其余部分有效，请尝试在访问其内容之前关闭 StreamReader。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T17:16:19.170

您应该只需要用另一个反斜杠来转义每个反斜杠。
或者，您可以在字符串前面加上 @ 符号（在 C# 中工作，不确定 VB.NET）。

IE
使用 "C:\this\that.exe"
或 @"C:\this\that.exe" 代替 "C:\this\that.exe"

# jquery - Django DateTimeField 到一天时分秒

> ID：11087293
> 
> 赞同：2
> 
> 时间：2012-06-18T16:40:39.603
> 
> 标签：jquery, python, django

我正在使用[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)。我数据库中的每个“事件”表都有一个“日期”列。`date = models.DateTimeField()` datetimefield( `{{ event.date }}`) 将返回 ' `Aug. 15, 2012, 12:23 p.m.`'。默认插件格式为“dHMS”。

如何让我的 django 日期正确显示在这个 jquery 插件中？或者更好。如何将我的日期时间字段变成：

```
 {{ countdown_day }},
 {{ countdown_hour }},
 {{ countdown_min }},
 {{ countdown_sec }} ? 
```

**脚本：**

```
(function(){
     var eventDate = '{{ event.date }}'; 
     $('#defaultCountdown').countdown({until: eventDate});      
     $('#removeCountdown').toggle(function() { 
         $(this).text('Re-attach'); 
         $('#defaultCountdown').countdown('destroy'); 
     }, 
    function() { 
        $(this).text('Remove'); 
        $('#defaultCountdown').countdown({until: eventDate}); 
    });
})(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:48:27.430

[您可以使用“日期”过滤器（文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)）将 Python 日期格式化为 Django 模板。

```
day:     {{ countdown|date:"D" }}
hour:    {{ countdown|date:"g" }}
minute:  {{ countdown|date:"i" }}
second:  {{ countdown|date:"s" }} 
```

要将日期转换为 javascript 日期，我使用 {{ countdown|date:"U" }} 来获取 unix 时间戳。您可以从这里创建一个 javascript 日期对象，如下所示：

```
 new Date({{ countdown|date:"U" }} / 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T01:34:00.070

实际上要获得正确的日期，代码是：

```
new Date({{ countdown|date:"U" }} * 1000); 
```

因为 Django 以秒为单位返回时间，而 JS 期望以毫秒为单位的时间。

[Javascript 日期对象定义](http://www.w3schools.com/jsref/jsref_obj_date.asp)

# ruby-on-rails - 'Backbone.history' [未定义] 不是对象

> ID：11087297
> 
> 赞同：0
> 
> 时间：2012-06-18T16:40:54.410
> 
> 标签：ruby-on-rails, backbone.js, rspec, rspec-rails

嘿伙计们，我有一个奇怪的问题，当我运行 rspec 测试时，**有时会**显示一条消息

> 'http://127.0.0.1:59796/assets/application.js|15727|TypeError: 表达式'Backbone.history' [未定义] 的结果不是对象

并且测试失败。我这样开始 Backbone.history ：

```
$ ->
  $('body#pages-dashboard').each ->
    new Scanradar.Routers.TasksRouter({tasks: []})
    Backbone.history.start() 
```

我不明白，为什么它不起作用？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:06:57.673

`Backbone.history`是在您第一次实例化定义了路由的路由器时创建的。

[http://backbonejs.org/docs/backbone.html#section-113](http://backbonejs.org/docs/backbone.html#section-113)

如果您看到此错误，则表示您尝试创建的路由器由于某种原因失败（实例化时出错）或未定义任何路由。

仅仅创建一个路由器是不够的。路由器必须在其上定义或添加路由，然后`Backbone.history`对象才能工作。

# jquery - 在 Firefox 中，Jquery 选项卡组件中的 SWF 内容不像在 Chrome 和 Safari 中那样加载/卸载。我怎样才能解决这个问题？

> ID：11087299
> 
> 赞同：0
> 
> 时间：2012-06-18T16:41:03.003
> 
> 标签：jquery, jquery-ui, firefox, flash

我正在使用 jquery 处理选项卡机制......显示和隐藏内容的机制不是问题。但是 SWF 在选项卡中的行为方式……在 Firefox 中是这样的。在 Chrome 和 Safari 中它可以完美运行。如果您单击一个选项卡 - 您会看到 swf 出现，并且它从头开始播放。如果您单击另一个选项卡，然后返回上一个选项卡，则 Flash 内容将重新加载/重新启动。

但是我的问题是 Firefox，它的工作原理不一样...您单击一个选项卡-您会看到 swf 出现，但它已经开始了-大概是在加载页面时。如果您单击另一个选项卡，然后返回到上一个选项卡，则 Flash 内容已进行。

如何在单击选项卡时使任何选项卡中的 swf 内容开始/重新加载，并在单击其他选项卡时卸载。

我的代码是标准的 jquery 选项卡代码...

```
 <div id="tabs" class="flashes">
        <h3>Online Advertising</h3>
    <ul>
        <li><a href="#fragment-1"><img src="thumb1.jpg"/></a></li>
        <li><a href="#fragment-2"><img src="thumb2.jpg"/></a></li>
        <li><a href="#fragment-3"><img src="thumb3.jpg"/></a></li>
    </ul>
    <div id="fragment-1">
        <p>content in a tab</p>
    </div>
    <div id="fragment-2">
      <div class="mpu"> 
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
width="300" height="250" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,40,0"><param name="allowscriptaccess" value="always" />
<param name="src" value="300x250.swf" />
<param name="allowfullscreen" value="true" />
<embed type="application/x-shockwave-flash" width="300" height="250" 
src="300x250.swf" allowfullscreen="true" allowscriptaccess="always">
</embed>
</object>
    </div> </div>
    <div id="fragment-3">
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, 
sed diam nonummy nibh   euismod tincidunt ut laoreet dolore 
magna aliquam erat volutpat.
        Lorem ipsum dolor sit amet, consectetuer 
    </div>
    </div> 
```

我唯一的额外代码是在页面加载时不打开任何选项卡

```
 <script>
    $(document).ready(function(){
    $("#tabs").tabs({
        collapsible: true,
        selected: -1
    });

    }); 
    </script> 
```

如果有人可以分享如何解决这个问题，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:58:14.527

尝试这个

```
$(document).ready(function(){
    $("#tabs").tabs({
        collapsible: true,
        selected: -1,
        select: function(evt,ui){
           var flashObj = $(ui.panel).find("object");
           if(flashObj.length > 0) {
              $(ui.panel).find("object").remove();
              $(ui.panel).append(flashObj);
           }
        }
    });
}); 
```

# sql - 将 MySQL 插入和更新转换为 SQL Server 触发器

> ID：11087305
> 
> 赞同：2
> 
> 时间：2012-06-18T16:41:27.750
> 
> 标签：sql, triggers, insert

我有一个关系表，其中两个外键指向同一个表。

第一个外键列应该始终是外部属性的最小值，第二个是最大值。

我是 SQL Server 的新手，我读到`inserted`应该使用使用临时表的插入，但是我应该如何设置最小和最大关系子项而不使用循环来迭代`inserted`条目。

**表：**

```
table Child
{
    int id;

    int value;
}

table Parent    
{
    int id;

    // foreign-keys A enforce minimum child value!
    int childA;
    int childB;
} 
```

**MySql 触发器**

```
CREATE TRIGGER parent_beforeInsert
BEFORE INSERT ON Parent
    FOR each ROW
    BEGIN
        DECLARE childAValue AS INT;
        DECLARE childBValue AS INT;

        SET childAValue = (SELECT value FROM Child WHERE ID = NEW.childA);
        SET childBValue = (SELECT value FROM Child WHERE ID = NEW.childB);

        -- only check if b > a since reverse is wished behavior
        IF childBValue > childAValue
        BEGIN
            -- swap values              
            DECLARE newChildA AS INT = NEW.childA
            SET NEW.childA = NEW.childB;
            SET NEW.childB = newChildA;
        END;
    END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:53:19.973

使用条件选择查询解决了它。不是那么优雅，特别是如果需要设置许多属性但它可以工作。

```
INSERT INTO Parent (childA_ID, childB_ID) 
    SELECT CASE WHEN childA.value <= childB.value THEN childA.ID ELSE childB.ID END AS childA_ID,
            CASE WHEN childA.value > childB.value THEN childA.ID ELSE childB.ID END AS childB_ID
        FROM inserted AS p, 
            Child AS childA, 
            Child AS childB,
        WHERE childA.ID = p.childA 
            AND childB.ID = p.childB; 
```

# objective-c - exc_bad_access 错误//

> ID：11087313
> 
> 赞同：1
> 
> 时间：2012-06-18T16:41:53.030
> 
> 标签：objective-c

我正在使用 Xcode 4 和 ARC，当我尝试在书中进行此练习时出现此错误。`Thread 1: Program received signal: "EXC_BAD_ACCESS".`与`Rectangle *intersectingRect = [[Rectangle alloc] init];`中的方法`intersect`一致`Rectangle.m`。

```
#import <Foundation/Foundation.h>

@interface XYPoint : NSObject 
@property float x, y;

@end 
```

* * *

```
#import "XYPoint.h"

@implementation XYPoint 
@synthesize x, y;

@end 
```

* * *

```
#import "XYPoint.h"

@interface Rectangle : NSObject  
@property float width, height;

-(void) setOrigin: (XYPoint *) pt;
-(XYPoint *) origin;
-(BOOL) containsPoint: (XYPoint *) aPoint;
-(Rectangle *) intersect: (Rectangle *) myRect;

@end 
```

* * *

```
#import "Rectangle.h"

@implementation Rectangle {
    XYPoint *origin;
}
@synthesize width, height;

-(void) setOrigin: (XYPoint *) pt {
    if (! origin) 
        origin = [[XYPoint alloc] init];

    origin.x = pt.x;
    origin.y = pt.y;

}

-(XYPoint *) origin {
    XYPoint *myOrigin = [[XYPoint alloc] init];

    myOrigin.x = origin.x;
    myOrigin.y = origin.y;

    return myOrigin;
}

-(BOOL) containsPoint:(XYPoint *)aPoint {
    if (origin.x + height >= aPoint.x && origin.y + width >= aPoint.y)
        return YES;
    else
        return NO;
}

-(Rectangle *) intersect:(Rectangle *)myRect {
    Rectangle *intersectingRect = [[Rectangle alloc] init];

    if ([self intersect: myRect]){
        intersectingRect.width = self.origin.x + self.width - myRect.origin.x;
        intersectingRect.height = myRect.origin.y + myRect.height - self.origin.y;

        intersectingRect.origin.x = myRect.origin.x;
        intersectingRect.origin.y = self.origin.y;
    }
    return intersectingRect;
} 
```

# android - 将edittext输入与字符串数组进行比较

> ID：11087316
> 
> 赞同：1
> 
> 时间：2012-06-18T16:42:05.353
> 
> 标签：android, string, compare, android-edittext

我是新手，如果我的问题很蹩脚，很抱歉。

但是，我正在尝试制作一个 AI 聊天机器人（例如，一个更简单的智能机器人版本，它可以响应某些输入关键字。）

我有一个edittext面板，用户将输入单词与AI“交谈”。但是，我不想对 java 文件中的每个单词进行编码，而是想将字符串输入与现有的字符串数组进行比较，以检查关键字是否存在，以便 AI 可以显示相应的答案。

例子：

> 如果输入是：Hellothere！
> 
> 在字符串数组上，有：你好。

和：

> 如果edittext=Hello，则显示：blah blah。

这是我的（业余）代码：

```
 public void onClick(View v){

        Resources res = getResources();
       String[] usernames = res.getStringArray(R.array.input2);
     boolean submit_check = input1(wordy, usernames); 
       public boolean input1(String wordy, String[] input2){

           if(candidate.equals(usernames))
           {

               wahh.start();
           myString = res.getStringArray(R.array.OUTPUT); 
           pic.setImageResource(R.drawable.keel);
            String q = myString[rgenerator.nextInt(myString.length)];   
            display.setText(q); 
           }

           else{ 
               wahh.start();
               pic.setImageResource(R.drawable.keel);
               myString = res.getStringArray(R.array.OUTPUT); 
            String q = myString[rgenerator.nextInt(myString.length)];   
            display.setText(q);
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:47:26.857

我认为你想要的是更多的东西（伪代码）：

```
if(EditText.getText().Contains("Hello")) {
    EditText.setText("What's up?");
} 
```

不过，您想检查它是否包含数组中的选择。如果是，则获取数组的索引。根据指数，做出相应的回应。最简单的方法是使用 for 循环和 switch 语句。虽然人工智能实际上比这复杂得多，而且我的知识。

# jquery - 使用 jQuery 基于计数器删除/添加 img

> ID：11087318
> 
> 赞同：0
> 
> 时间：2012-06-18T16:42:11.380
> 
> 标签：jquery

基本上，我想要做的是当单击列表项时，将图像附加到图像 div 中，当它被关闭时，从图像 div 中删除最后一个图像。因此，添加的列表项越多，div 中的图像就越多。当列表项全部关闭时，图像数量应重置为正常。

HTML

```
<ul id="list">
  <li><a href="#">First</a></li>
  <li><a href="#">Second</a></li>
  <li><a href="#">Third</a></li>
</ul>

<div class="images">
  <img src="#" />
  <img src="#" />
  <img src="#" />
  <img src="#" />
  <img src="#" />
</div> 
```

jQuery

```
var count = 0;
$('#list a').on("click", function(event){
    count++;
    $(this).parent().toggleClass('added');
    var classname = $(this).parent().toggleClass('added');

    if (classname == '') {
      // remove image
    } else {
      //add image
    }

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:55:46.220

为什么不直接遍历图像列表以查看源是否存在并将类排除在外？可能是这样的？：

```
$('#list a').on("click", function(event){

    var src = $(this).attr('href'); // source of link clicked

    var addMe = 1;

    // loop through images list and look for clicked source
    $('.images img').each(function(i) {
        var $img = $(this);

        if ($img.attr('src') = src) { // found source matching <a href>
            $img.remove(); // remove the image
            addMe = 0; // stop image from adding
        } 
    });

    // if addme still = 1 append the html
    if (addMe) {
        var html = '<img src="'+src+'" />';
        $('.images').append(html);
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:51:46.073

您可以检查一个元素是否应用了一个类，例如：

```
if (!$(this).parent().hasClass('added')) {
  // remove image
} else {
  //add image
} 
```

# objective-c - 在 iPad 绘画应用程序中设置颜色

> ID：11087324
> 
> 赞同：1
> 
> 时间：2012-06-18T16:42:32.937
> 
> 标签：objective-c, ios, xcode, colors, paint

我想知道是否有人可以帮助我在我的 iOS 应用中实现颜色选择。现在，画线只有黑色，但我希望用户能够改变颜色。现在我有 5 个按钮用于 5 种不同的颜色选项。然后我将每个按钮标记为 1-5，并将它们全部连接到一个`IBAction`. 我在想我可以有一个 if 语句来说明按钮是否标记为 1，然后将每种颜色的颜色设置为 1.0、0.0、0.0、1.0（红色）等等。所以，这是我的 if 语句：

```
NSString *color = @"0.15, 1.15, 0.15, .8";

-(IBAction)color:(id)sender{

    if ([sender tag] ==1) {
        color = @"0.15, 1.15, 0.15, .8";
    }
    if ([sender tag] ==2) {
        color = @"0.15, 1.15, 0.15, .8";
    }
    if ([sender tag] ==3) {
        color = @"0.15, 1.15, 0.15, .8);";
    }
    if ([sender tag] ==4) {
        color = @"(0.15, 1.15, 0.15, .8";
    }
    if ([sender tag] ==5) {
        color = @"0.15, 1.15, 0.15, .8";
    }
} 
```

所以，现在我把可变颜色放进去

```
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), color ); 
```

但是，我收到错误“函数调用的参数太少，预期为 5，有 2”

谢谢你的帮助！

-卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:58:07.397

感谢您的所有帮助，但我自己想出了最后一部分。如果有人感兴趣，这是我想出的代码：

```
double C1 = 1.15;
double C2 = 0.15;
double C3 = 0.15;
double C4 = .8;

'NSString *color = @"0.15, 1.15, 0.15, .8";

-(IBAction)colors:(id)sender{

if (([sender tag] ==1)) {
    C1=  0.15;
    C2 = 0.15;
    C3 = 0.15;
    C4 = .8;
}

else if (([sender tag] ==2)) {

    C1 = 0.15;
    C2 = 1.15;
    C3 = 0.15;
    C4 = .8;
}

else if (([sender tag] ==3)) {
    color = @"1.15, 0.15, 0.15, .8";
    C1 = 1.15;
    C2 = 0.15;
    C3 = 0.15;
    C4 = .8;
}

else if (([sender tag] ==4)) {
    C1 = 0.15;
    C2 = 0.15;
    C3 = 1.15;
    C4 = .8;
}
else if (([sender tag] ==5)) {
    C1 = 1.15;
    C2 = 1.15;
    C3 = 0.15;
    C4 = .8;
}

}

CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), C1, C2, C3, C4 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:59:07.430

```
/*
[colorArray addObject:@"0.0,0.0,0.0"];      
[colorArray addObject:@"148.0,0.0,211.0"];  
[colorArray addObject:@"0.0,191.0,255.0"];  
...
*/

-(IBAction)actionColorButton:(id)sender
{
[self setPenColor:[colorArray objectAtIndex:[sender tag] - 1]];
} 
```

* * *

```
-(void)setPenColor:(NSString*)color
{
NSArray *arr = [color componentsSeparatedByString:@","];

colorRed = [[arr objectAtIndex:0] floatValue] / 255.0;
colorGreen = [[arr objectAtIndex:1] floatValue] / 255.0;
colorBlue = [[arr objectAtIndex:2] floatValue] / 255.0;
...
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 
                           colorRed,
                           colorGreen,
                           colorBlue,
                           1.0);
...
} 
```

# security - 验证客户端真实性

> ID：11087325
> 
> 赞同：0
> 
> 时间：2012-06-18T16:42:37.203
> 
> 标签：security, post, client

我已经用 HTML5 构建了一个游戏，并且一个 Web 表单将数据发布到服务器。

游戏中的分数是使用 Javascript 计算的，表单将数据发布到服务器。

这种架构会不会容易受到攻击，客户端可以被修改，这样它会发布恶意值而不是计算的分数？

我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:44:52.953

为了简短起见 - 您需要在*服务器端*完成所有验证。使用客户端脚本让事情看起来不错没有问题，但是**你不能信任来自客户端的任何东西**。

以 Stackoverflow 为例。当您投票时，它会立即在客户端计算（以使事情保持良好和快速），但一旦提交，它就会由服务器正确验证。

例如，如果我尝试对自己的答案进行投票，服务器会使用以下 JSON 拒绝它：

```
{"Success":false,"Warning":false,"NewScore":0,"Message":"You can't vote for your own post.","Refresh":false} 
```

即使 javascript 愉快地提交了它。

因此，您还需要在*服务器端*计算您的游戏分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:47:13.937

不要相信用户输入，尤其是当您向服务器发送数据时他们可能会执行 SQL 注入的表单。（另请参阅[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)）

尝试在服务器端验证尽可能多的数据。

看到您还使用 javascript 注意 javascript 注入（[http://www.testingsecurity.com/how-to-test/injection-vulnerabilities/Javascript-Injection](http://www.testingsecurity.com/how-to-test/injection-vulnerabilities/Javascript-Injection)），因为它们可以将更改注入您的脚本（例如分值）

# javascript - Javascript 跳转（显示/隐藏）

> ID：11087326
> 
> 赞同：1
> 
> 时间：2012-06-18T16:42:46.470
> 
> 标签：javascript, jquery

没有任何编程经验，只有基本的 html/css。我正在尝试创建一个 javascript 菜单（如果有更简单的方法，可以接受建议？），它将根据第一个菜单中选择的选项显示/隐藏？我有以下...

```
<form name="jump"> 
<select name="menu" onChange="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="GO"> 
<option value="#" selected>Quick Links</option>
<option value="menu1">menu1</option> 
<option value="menu2">menu2</option> 
<option value="menu3">menu3</option>
</select>

<select name="menu1" onChange="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="GO"> 
<option value="http://www.site.com/opt1-1.html">opt1</option> 
<option value="http://www.site.com/opt1-2.html">opt2</option> 
<option value="http://www.site.com/opt1-3.html">opt3</option>
</select>

<select name="menu2" onChange="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="GO"> 
<option value="http://www.site.com/opt2-1.html">opt1</option> 
<option value="http://www.site.com/opt2-2.html">opt2</option> 
<option value="http://www.site.com/opt2-3.html">opt3</option>
</select>

<select name="menu3" onChange="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="GO"> 
<option value="http://www.site.com/opt3-1.html">opt1</option> 
<option value="http://www.site.com/opt3-2.html">opt2</option> 
<option value="http://www.site.com/opt3-3.html">opt3</option>
</select>

</form> 
```

有人可以解释我怎么能....

-根据在“菜单”中选择的选项显示/隐藏菜单 1-2？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:45:20.537

考虑使用现成的下拉菜单作为解决方案。一些链接：

*   38 jQuery 和 CSS 下拉多级菜单解决方案：[http ://www.1stwebdesigner.com/css/38-jquery-and-css-drop-down-multi-level-menu-solutions/](http://www.1stwebdesigner.com/css/38-jquery-and-css-drop-down-multi-level-menu-solutions/)
*   22 个最佳 jQuery 下拉菜单：[http ://slodive.com/web-development/best-jquery-dropdown-menus/](http://slodive.com/web-development/best-jquery-dropdown-menus/)

或者，您可以编写自己的解决方案，例如使用 jQuery。有关这方面的更多信息，请参阅“[简单 jQuery 下拉菜单](http://www.webchief.co.uk/blog/simple-jquery-dropdown-menu/index.php)”的示例教程。

# objective-c - (anObject = [enumerator nextObject] 返回数组对象的逆序

> ID：11087327
> 
> 赞同：0
> 
> 时间：2012-06-18T16:42:48.007
> 
> 标签：objective-c, ios, nsenumerator

我`json`从我的网络服务收到响应，我记录它并以正确的顺序获取，但是当我开始使用`NSEnumerator`并应用 id anObject 解析数组中的数据时；

```
while ((anObject = [enumerator nextObject])) 
```

并记录一个对象，我以完全相反的顺序得到数组，有没有人知道这一点，或者他们是否有任何解决方法来使用枚举器以正确的顺序获取对象以进行解析？我在此论坛中搜索后发布了帖子，但对于该主题的 ios，它们没有任何内容。

提前谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-07-16T06:37:38.400

怎么样`NSEnumerator *enumerator = [arr reverseObjectEnumerator];`？

# android - ICS 平板电脑不显示菜单按钮，但它适用于 Galaxy Nexus

> ID：11087333
> 
> 赞同：2
> 
> 时间：2012-06-18T16:42:59.417
> 
> 标签：android, menu, android-4.0-ice-cream-sandwich

我对 Android 4.0 上的菜单按钮有疑问。这是清单中有趣的部分：

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="13"/> 
```

问题是模拟 Galaxy Nexus 的模拟器显示菜单按钮，但模拟平板电脑不显示菜单按钮。

据此，[它](http://android-developers.blogspot.com.es/2012/01/say-goodbye-to-menu-button.html)应该被显示（并且它在 Galaxy Nexus 中）。

有谁知道为什么它不显示在平板电脑中？我能做些什么来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:47:53.813

从链接的文档中：

> 唯一的例外是，如果您将 minSdkVersion 设置为 10 或更低，将 targetSdkVersion 设置为 11、12 或 13，并且您不使用 ActionBar，则在 Android 4.0 或更高。
> 
> 这个例外可能有点令人困惑，但它是基于这样一种信念，即如果您将应用设计为支持之前的 Honeycomb 手机和 Honeycomb 平板电脑，它可能希望手机设备包含一个菜单按钮（但它支持没有一）。

因此系统假定您的应用程序适用于平板电脑，因为它针对 Honeycomb，但不适用于 ICS 手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:44:03.397

将 targetSdkVersion 提升到 14

# semantics - 仅当执行第一个查询的记录集中没有记录时，SPARQL 从第二个查询返回记录

> ID：11087338
> 
> 赞同：1
> 
> 时间：2012-06-18T16:43:23.670
> 
> 标签：semantics, rdf, sparql

我是 SPARQL 的新手，因此非常感谢您的帮助。

我有两个查询要运行。一个从源返回记录。但是，在第一种情况下没有返回记录的情况下，我想从第二个查询中返回记录。

在 SQL SERVER 中，我可能不得不做类似的事情

```
SELECT FIRSTAME, LASTNAME, DOB, CLASS 
 FROM TABLENAME 
   WHERE CLASS ="FIRSTCLASS"

IF @@ROWCOUNT = 0

     SELECT FIRSTAME, LASTNAME, DOB, CLASS 
 FROM TABLENAME 
   WHERE CLASS ="SECONDCLASS" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:55:38.390

为什么不在你的应用程序中分派两个查询呢？SPARQL 中没有条件逻辑。SPARQL 1.1 确实包含子查询，但我不确定您是否可以复制您想要的内容。我建议只使用两个单独的查询，并将业务逻辑保留在代码中而不是查询中。

# jquery - 没有淡出的幻灯片

> ID：11087339
> 
> 赞同：1
> 
> 时间：2012-06-18T16:43:26.697
> 
> 标签：jquery, slideshow, fadeout

我有一个带有几张图片的幻灯片。它有效，但有一个小缺点。图像全部淡出。让我解释一下：第一个图像淡入并再次淡出。然后第二个图像淡入淡出。接下来是第三张图像，它再次淡入淡出。问题是在第一张图像淡出和第二张图像淡入之间，什么都没有显示。我想淡入第一张图像，然后在第一张图像上淡入第二张图像，依此类推。这样，图像的褪色之间就没有“任何东西”。

我如何调整以下代码？

html:

```
<div class="slideshow"></div> 
```

Javascript

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
var images=new Array('http://placehold.it/450x450','http://placehold.it/250x150/123456','http://placehold.it/250x150/dbca98');
var nextimage=0;

doSlideshow();

function doSlideshow()
{
    if($('.slideshowimage').length!=0)
    {
        $('.slideshowimage').fadeOut(1500,function(){slideshowFadeIn();$(this).remove()});
    }
    else
    {
        slideshowFadeIn();
    }
}
function slideshowFadeIn()
{
    $('.slideshow').prepend($('<img class="slideshowimage" src="'+images[nextimage++]+'" style="display:none">').fadeIn(1500,function(){setTimeout(doSlideshow,1500);}));
    if(nextimage>=images.length)
        nextimage=0;
}
});//]]>  

</script> 
```

CSS

```
<style type='text/css'>
    .slideshow
{
    position: absolute;
    width: 455px;
    height: 450px;
}
.slideshow img
{
    position: absolute;
    width: 455px;
    height: 450px;
    z-index:1;
}
  </style> 
```

您可以在小提琴中找到代码：[脚本](http://jsfiddle.net/R4ZHX/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:49:58.463

确实有一些函数被称为这样做......对于一个便宜的解决方案，将 slideshowFadeIn() 放在你的第一个“if”语句中的 fadeOut() 调用下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:48:09.253

您需要做的就是移动您的“幻灯片淡入淡出”；

[http://jsfiddle.net/R4ZHX/195/](http://jsfiddle.net/R4ZHX/195/)

```
if($('.slideshowimage').length!=0)
{
    $('.slideshowimage').fadeOut(1500,function(){$(this).remove()});
    slideshowFadeIn();
}
else
{
    slideshowFadeIn();
} 
```

# javascript - 如何更改对象数组中的元素值

> ID：11087342
> 
> 赞同：1
> 
> 时间：2012-06-18T16:43:43.810
> 
> 标签：javascript, jquery, arrays

如何更改对象数组中元素的值？我下面的示例从数组中删除一个对象，然后更改对象其余部分中的元素（数字） - 删除部分工作正常，但另一部分没有 -

我有一个[jsFiddle](http://jsfiddle.net/minagabriel/C3d9T/)

代码 ：

```
var x =[
    {name : 'myname' , number : '10' , color:'green'},
    {name : 'yourname' , number : '15' , color:'blue'}
]; 

$.each(x , function(index ,value) {
    if(value.number == '10'){
        x.splice(index , 1) ; 
    } 
    else {
        x[i].number = '20' ; 
    }
    console.log(x) ; 
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:49:39.070

您可以[`.map()`](http://api.jquery.com/jQuery.map/)像这样使用构建一个新数组

```
var x =[{name : 'myname' , number : '10' , color:'green'},
  {name : 'yourname' , number : '15' , color:'blue'}] ; 

var newX = $.map(x , function(obj ,index){
    if(obj.name == 'yourname'){
        return null;
    }else{
       obj.number = '20';
       return obj; 
    }
});

console.log(newX); 
```

​演示 **：http:** [//jsfiddle.net/joycse06/C3d9T/3/](http://jsfiddle.net/joycse06/C3d9T/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:52:01.877

看起来你可以用`$.map()`它来为你做这件事。

```
var new_array = $.map(x, function (el) {

    if (el.number === '10') {
        // remove this
        return null;
    } else {
        // transform into something else
        el.number = '20';
        return el;
    }

}); 
```

请注意，这会创建一个新数组。您可以通过将返回分配给旧变量来覆盖旧数组：

```
x = $.map(x, function (el) { }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:53:28.507

删除您正在循环的数组元素时，您需要减少循环计数器。我不确定这是否可以使用 jQuery 的 each() 轻松完成。您可以只使用普通的 for 循环：

```
for(var i = 0; i < x.length; i++) {
    var value = x[i];
    if(value.number == '10') {
        x.splice(i, 1); 
        i--;
    }
    else {
        value.number = '20'; 
    }
    console.log(x); 
} 
```

这是一个演示 - [http://jsfiddle.net/bFYj7/](http://jsfiddle.net/bFYj7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:58:49.083

试试这个。

```
 var x =[{name : 'myname' , number : '10' , color:'green'},
       {name : 'yourname' , number : '15' , color:'blue'}] ; 

 $(x) . each(function(index ,value){
    if(value.number != undefined && value.number == '10'){
        x.splice(index , 1) ; 
    }else {
       if(value.number != undefined){
           value.number= '20' ; 
       }
    }
    console.log(x) ; 
});​ 
```

这是[演示](http://jsfiddle.net/M6Mrf/)

对该对象索引使用未定义检查。

# cmake - 使用 CMake 和 MinGW 编译的项目的导出符号过多

> ID：11087357
> 
> 赞同：0
> 
> 时间：2012-06-18T16:45:00.070
> 
> 标签：cmake, mingw

我正在尝试使用 CMake 和 MinGW 为 Windows编译[libzint （条形码生成器）。](https://github.com/zint/zint)目的是避免 Visual Studio 依赖项。除了生成的 .dll 文件包含太多导出的符号外，一切运行良好。我应该只有 ZBarcode_* 函数，但实际上几乎所有声明为变量/常量的东西都会被导出（并且生成的 .dll 文件没有版本信息，我认为这很奇怪。）

以下是我的工作方式：

1.  从 D:\Projects\Zint 中的 github 存储库 git clone
2.  在 C:\CMake 中安装 cmake
3.  在 C:\MinGW 中安装 mingw
4.  启动 cmake-gui，浏览到 D:\Projects\Zint
5.  单击“配置”，在列表中选择“MinGW Makefiles”并“指定本机编译器”，接下来我指定了 c:\mingw\bin\mingw32-gcc.exe 的完整路径（确定...）
6.  单击“配置”。它成功了，但是它添加了一些红色的变量，因为没有满足依赖项（PNG 和 QT，但我不想要它们，没有它们 zint 很好）
7.  再次点击“配置”，一切都变白了
8.  点击“生成”
9.  关闭 cmake-gui
10.  启动控制台提示
11.  仅将路径变量环境覆盖到 C:\mingw\bin
12.  转到“D:\Projects\Zint”并运行“mingw32-make”，然后运行“mingw32-make install”
13.  libzint.dll 和 zint.exe 被部署到“C:\Program Files\zint-package\bin”

我使用[Dependency Walker](http://www.dependencywalker.com/)查看了导出的函数，发现除了少数 ZBarcode_* 函数外，还有大约 400 个其他符号，根据源代码，我看到这些符号实际上是常量、数组和 libzint 的其他内部结构.

您知道如何配置或调整事物以避免所有这些导出吗？

非常感谢您的帮助，问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:43:15.553

Look in the headers for any macros that contain `dllexport`. If you find one or more, check that it's not malfunctioning.

Another possibility is that all classes are being exported, instead of just the few functions that are necessary.

If you have `grep`, do `grep -nr dllexport *`. This will recursively look in all files. For every hit, it will print the file name, line number, and contents of the line.

# ruby-on-rails - 将根页面设置为 activeAdmin 默认登录页面

> ID：11087362
> 
> 赞同：28
> 
> 时间：2012-06-18T16:45:16.807
> 
> 标签：ruby-on-rails, activeadmin

我很难将可能 Rails 应用程序中的根页面设置为 Active Admin gems 的默认登录页面，位于 localhost:3000/admin/login。这是我的路线.rb：

```
TestActiveadmin::Application.routes.draw do
  ActiveAdmin.routes(self)

  devise_for :admin_users, ActiveAdmin::Devise.config

  match 'login' => 'sessions#new', :as => :login
  match 'signup' => 'users#new', :as => :signup
  match 'logout' => 'sessions#destroy', :as => :logout
  resources :sessions
  resources :users

end 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-18T16:56:48.693

告诉 rails 你希望默认根进入管理命名空间、仪表板控制器、索引操作：

```
root to: "admin/dashboard#index" 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-26T23:55:52.880

您可以编辑 Active Admin 配置文件：`config/initializers/active_admin.rb`

```
config.root_to = 'admin/dashboard#index' 
```

# google-chrome - Selenium::WebDriver 等待（Ruby、Chrome）

> ID：11087368
> 
> 赞同：2
> 
> 时间：2012-06-18T16:45:40.830
> 
> 标签：google-chrome, ubuntu, selenium, webdriver

我有一个可以打开浏览器的 ruby​​ 脚本。如果FF由于某种原因失败，我将它设置为先打开Firefox，然后再打开Chrome——比如FF得到更新而Selenium还没有赶上。

等待功能/定义适用于 FF，但总是会破坏 Chrome。下面是Chrome浏览器启动的相关代码：

```
b = Selenium::WebDriver.for :chrome
b.driver.manage.timeouts.implicit_wait = $BROWSER_IMPLICIT_WAIT 
```

我对 Selenium 还是很陌生，我在声明如下内容后使用了 wait.until 命令：

```
wait = Selenium::WebDriver::Wait.new(:timeout => $BROWSER_EXPLICIT_WAIT) 
```

上面的代码行在 Firefox 中运行良好。但是，我想用 FF 和 Chrome 运行我的脚本。有没有办法在 Chrome 和 FF 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:21:42.437

现在看到您提供了更容易解决的错误。

原因是 - 您已将 selenium 驱动程序实例命名为`b`

但将隐式时间定义为

`b.driver.manage.timeouts.implicit_wait = $BROWSER_IMPLICIT_WAIT`

即与`b.DRIVER`，因此错误消息 -`undefined method 'driver' for`

将您的命令更改为

```
b.manage.timeouts.implicit_wait = $BROWSER_IMPLICIT_WAIT 
```

# javascript - 使用 javascript 原型继承

> ID：11087374
> 
> 赞同：0
> 
> 时间：2012-06-18T16:46:01.203
> 
> 标签：javascript, oop, inheritance, prototype-chain

为什么这行得通....

```
function Person(name) {
   this.name = name;
  }

Person.prototype.speak =  function() {
   alert(this.name);
}

var person = new Person("fred");

person.speak(); 
```

但不是这个。。

```
function Person(name) {
   this.name = name;
        speak =  function() {
   alert(this.name);
}

var person = new Person("fred");

person.speak(); 
```

我不了解继承是如何工作的，或者 javascript“原型链”。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:47:57.790

```
function Person(name) {
   this.name = name;
        speak =  function() {
   alert(this.name);
} 
```

应该

```
function Person(name) {
   this.name = name;
   this.speak = function () {
      alert(this.name);
   };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:50:38.970

实际上，这是您不理解的变量范围。

```
function Person(name) {
  this.name = name;

  speak = function() {
    alert(this.name);
  }
} 
```

通过在此处省略`var`之前`speak = ...`，您创建了一个名为 的全局变量`speak`，而不是`Person`'s 范围内的变量。在浏览器中，全局变量附加到全局对象`window`，因此您的代码相当于：

```
function Person( name ) {
  this.name = name;

  window.speak = function() { alert( this.name ); } 
```

}

Douglas Crockford 写了一些关于原型继承中变量作用域的[相关材料，你应该会发现这些材料很有启发性。](http://javascript.crockford.com/private.html)

# java - 如何在 Seam 2 中实现 resourcebundle (messages.properties) 的热重载

> ID：11087376
> 
> 赞同：2
> 
> 时间：2012-06-18T16:46:10.490
> 
> 标签：java, jsf, seam, resourcebundle, seam2

我们仍在将 Seam 2 (2.2.GA) 用于一个旧版 web 应用程序。我们有 JRebel 来热重载所有的东西（xhtml、java），但不是 i18n messages.properties。它太烦人了！

那么，我们尝试了什么？我们尝试在调试模式（开发期间）覆盖以下 Seam 的内置组件：

*   org.jboss.seam.core.ResourceLoader - @Name("org.jboss.seam.core.resourceLoader")
*   org.jboss.seam.international.Messages - @Name("org.jboss.seam.international.messagesFactory")
*   org.jboss.seam.core.ResourceBundle - @Name("org.jboss.seam.core.resourceBundle")

并且以下类也被覆盖：

*   DynamicSeamResourceBundle 扩展了 org.jboss.seam.core.SeamResourceBundle （这样它就不再在内部缓存捆绑包，Seam 自己的缓存机制）
*   DynamicResourceBundleControl 扩展 ResourceBundle.Control（使用 timeToLive = TTL_DONT_CACHE 来覆盖 Java 的缓存行为）

当然，Seam 会初始化和使用定制的组件，当然，在每次尝试之前，属性文件都会更改 bean。但是所有的技巧都无济于事！自定义代码的idee可以在这里找到：[https ://community.jboss.org/thread/184261](https://community.jboss.org/thread/184261)

请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:56:18.623

您是否向 JRebel 论坛/支持报告了该问题？我确信它可以在 JRebel-Seam 集成中实现

# z3 - Tseitin 编码下的满足模型

> ID：11087382
> 
> 赞同：4
> 
> 时间：2012-06-18T16:46:32.177
> 
> 标签：z3

我在 z3 4.0 中使用以下代码片段将公式转换为 CNF。

```
(set-logic QF_UF)
(
  set-option
  :produce-models
  true
)

; ------ snip -------
;
; declarations, 
; and assert statement
; of "original" formula
; here.
;
; ------ snap -------

(
  apply
  (
    then
    (
      !
      simplify
      :elim-and
      true
    )
    tseitin-cnf
  )
) 
```

我得到如下内容：

```
(goals
(goal

  ; ------ snip -------
  ;
  ; Lot's of lines here
  ;
  ; ------ snap -------

  :precision precise :depth 2)
) 
```

我假设后面的每个表达式`goal`都是 CNF 的一个子句，也就是说，所有这些表达式都应该结合起来以产生实际的公式。我将把这个连词称为“编码”公式。

显然，原始公式和编码公式并不等价，因为编码公式包含新的变量`k!0, k!1, ...`，这些变量进行 Tseitin 编码。但是，我期望它们是可满足的，或者实际上它们对相同的模型感到满意（当忽略`k!i`变量时）。

即，我期待这`(encoded formula) AND (NOT original formula)`是无法满足的。不幸的是，情况似乎并非如此。我有一个反例，该检查实际返回`sat`。

这是 z3 中的错误，是我使用错误，还是我的任何假设都不成立？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:04:32.060

这是新`tseitin-cnf`战术中的一个错误。我修复了该错误，该修复将在下一个版本（Z3 4.1）中提供。同时，您可以通过使用几轮简化来解决该错误。也就是说，使用

```
 (apply 
    (then (! simplify :elim-and true)
          (! simplify :elim-and true)
          tseitin-cnf)) 
```

代替

```
 (apply 
    (then (! simplify :elim-and true)
          tseitin-cnf)) 
```

# vim - 如何告诉 MacVim 始终使用特定文件类型的特定语法突出显示？

> ID：11087397
> 
> 赞同：5
> 
> 时间：2012-06-18T16:47:47.663
> 
> 标签：vim, syntax-highlighting, markdown, macvim

我正在寻找可以添加到我的 .vimrc 中的东西，它会告诉 MacVim 始终对 TXT 文件使用 Markdown 语法突出显示。

目前，我可以手动执行此操作，`set filetype=markdown`但每次打开文件时都必须这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T16:56:38.270

您可以使用以下命令自动设置特定文件扩展名的文件类型`autocmd`：

```
autocmd BufRead,BufNewFile  *.txt,*.TXT set filetype=markdown 
```

将此行添加到您的`.vimrc`.

`:help autocmd`在 vim 中输入以获取更多详细信息；另见：`:help autocmd-group`。另见：`:help filetype`。

# powershell - appcmd 为站点设置 ssl 证书

> ID：11087399
> 
> 赞同：1
> 
> 时间：2012-06-18T16:47:57.210
> 
> 标签：powershell, iis-7, appcmd

我正在尝试使用 IIS7 中的可用证书之一为应用程序提供 https 绑定，但在语法上遇到了困难。

我*认为*该命令应如下所示，但它不起作用：

```
appcmd.exe set site "mysite.com" /+bindings.[protocol='https',bindingInformation='*:443:www.mysite.local:mycertificatename'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:07:30.400

我发现最好的方法是使用 selfssl.exe

```
C:\Program Files (x86)\IIS Resources\SelfSSL>selfssl.exe /T /N:CN=mysite.com /S:theSiteId /Q 
```

我还没有找到使用 appcmd 的方法。此解决方案的问题在于，您必须在服务器上安装 IIS 资源工具包。我个人认为你最好在服务器上安装 powershell 或 ruby​​。

我猜这取决于您的操作人员。

# objective-c - 使用未声明的标识符错误

> ID：11087402
> 
> 赞同：0
> 
> 时间：2012-06-18T16:48:14.013
> 
> 标签：objective-c, xcode, cocoa

我正在尝试设置一个运行循环，为此我有以下代码：

```
[[NSRunLoop currentRunLoop] addTimer:a forMode:NSEventTrackingRunLoopMode]; 
```

但是，我收到一条错误消息，提示“使用未声明的标识符 'a'”。我在我的头文件和主文件中声明了这两种方法：

```
//AppController.h
#import <Foundation/Foundation.h>
@interface AppController : NSObject
- (IBAction) startLoop: (id)sender;
- (void) a: (id)sender;
@end

//AppController.m
#import "AppController.h"
@implementation AppController
-(IBAction) startLoop: (id) sender {
    [[NSRunLoop currentRunLoop] addTimer:a forMode:NSEventTrackingRunLoopMode];
}
-(void) a: (id) sender {
    //Code here 
}
@end 
```

我是 Objective-C 的新手，所以我提前为任何愚蠢的错误道歉，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:54:27.463

该`addTimer::`方法希望它的第一个参数是一个 NSTimer 对象。您的代码中唯一可见的（几乎）被调用`a`的不仅不是 NSTimer，而且根本不是对象。这是一种方法。您是否在打算使用的地方创建了计时器？

（从技术上讲，该方法的名称是`a:`而不是`a`。）

# java - 如何计算方法描述符中的参数数量？

> ID：11087404
> 
> 赞同：2
> 
> 时间：2012-06-18T16:48:25.920
> 
> 标签：java, jvm

我想知道[第 4 章类文件格式 - 第 4.3.3 节](http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3)中指定的提供方法描述符的方法的参数数量。是否有提供此实用程序的内置功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:57:54.043

我不知道内置方法，但偶尔我已经实现了一个。

```
private static Pattern allParamsPattern = Pattern.compile("(\\(.*?\\))");
private static Pattern paramsPattern = Pattern.compile("(\\[?)(C|Z|S|I|J|F|D|(:?L[^;]+;))");

int getMethodParamCount(String methodRefType) {
    Matcher m = allParamsPattern.matcher(methodRefType);
    if (!m.find()) {
        throw new IllegalArgumentException("Method signature does not contain parameters");
    }
    String paramsDescriptor = m.group(1);
    Matcher mParam = paramsPattern.matcher(paramsDescriptor);

    int count = 0;
    while (mParam.find()) {
        count++;
    }
    return count;
} 
```

[欢迎您在此处](https://github.com/alexradzin/SafeChain)参考完整的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T00:51:15.613

看看这是否有效......我也在使用 ASM，这是我炮制的方法......现在已经使用了一段时间......

```
public static int getMethodArgumentCount(String desc) {
 int beginIndex = desc.indexOf('(') + 1;
 int endIndex = desc.lastIndexOf(')');
 String x0 = desc.substring(beginIndex, endIndex);//Extract the part related to the arguments
 String x1 = x0.replace("[", "");//remove the [ symbols for arrays to avoid confusion.
 String x2 = x1.replace(";", "; ");//add an extra space after each semicolon.
 String x3 = x2.replaceAll("L\\S+;", "L");//replace all the substrings starting with L, ending with ; and containing non whitespace characters inbetween with L.
 String x4 = x3.replace(" ", "");//remove the previously inserted spaces.
 return x4.length();//count the number of elements left.
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T16:50:53.643

方法#getParameterTypes().length ?

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T16:52:13.127

您可以使用`method.getParameterTypes()`. 它给你一个参数类型的数组，所以你可以知道有多少个参数。

# ruby-on-rails-3 - rails routes 出现错误 - 似乎调用了错误的控制器

> ID：11087405
> 
> 赞同：1
> 
> 时间：2012-06-18T16:48:26.790
> 
> 标签：ruby-on-rails-3, routes

我无法弄清楚我的路线有什么问题。我对 Rails（和编程）非常陌生，所以它可能非常简单。

单击我的主页会出现以下错误 -

```
Routing Error

No route matches {:action=>"show", :controller=>"bets"}
Try running rake routes for more information on available routes. 
```

这是我的路线.rb

```
 root :to => 'pages#home'
 resources :bets
 resources :bettingevents
 get  '/bet' => 'bets#index'
 get  '/bettingevent' => 'bettingevents#index' 
```

我的投注控制器中的显示功能有

```
 def show

  redirect_to(bets_path)
  end 
```

`localhost:3000/bets`很好，创建、更新、删除、编辑路线正常工作。在我添加投注路线之前，我的页面控制器一直运行良好。

如果我删除`resources :bets`主页可以正常工作，但所有投注路线都不起作用。

我究竟做错了什么？谢谢

# bash - xargs 在搜索中尊重通配符

> ID：11087407
> 
> 赞同：4
> 
> 时间：2012-06-18T16:48:27.963
> 
> 标签：bash, xargs

我有一个名为 file1.txt 的文件：

```
dir1
dir2
dir3
... 
```

我想使用 xargs 来检查文件系统中是否存在一些文件，如下所示：

```
 cat file1.txt | xargs -i ls  /projects/analysis7/{}/meta_bwa/hg19a/*varFilter 2>/dev/null 
```

但是 xargs 似乎永远不够聪明，无法扩展 *. 即，即使文件与模式匹配（如果 * 已扩展），它也永远不会找到文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T16:51:59.717

您只需要添加`sh -c`：

```
 cat file1.txt | xargs -i sh -c 'ls  /projects/analysis7/{}/meta_bwa/hg19a/*varFilter' 2>/dev/null 
```

# sql - 插入某些列

> ID：11087410
> 
> 赞同：16
> 
> 时间：2012-06-18T16:48:40.210
> 
> 标签：sql, sql-server

我正在使用 SQL Server 2005。

我有一个 3 列的 table1。和 table2 有 4 列。

我想将 table1 中的记录插入到 table2 中。

但我不想从 table2 插入 column1。

我想从 column2 开始插入。

我能做些什么？谢谢...

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-18T16:51:24.683

```
insert into table2
(
    col2, col3, col4
)
select col1, col2, col3
from table1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T16:52:36.650

您可以结合选择和插入来执行此操作。这是如何：

```
insert into table2 (col2, col3, col4)
select col1, col2, col3
from table1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T16:51:35.103

您只需要`SELECT...FROM`在您的中使用 a`INSERT`来选择您想要的列。

```
INSERT INTO table2
(
    column2, column3, column4
)
SELECT column1, column2, column3
FROM table1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T16:51:57.210

```
INSERT INTO Table2 (column2,colum3,column4 )
SELECT  column1,column2,column3 FROM    Table1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T16:52:00.320

```
into into table2
(column2,......)
select column2 ..... from table1 
```

# php - PHP：选择添加到 Amazon S3 文件夹的最新文件

> ID：11087414
> 
> 赞同：2
> 
> 时间：2012-06-18T16:48:59.550
> 
> 标签：php, amazon-s3, amazon-web-services

我正在开发一个自动更新解决方案，并且我正在使用 Amazon S3 进行分发。

我希望它的工作方式如下：

1.  我将文件上传到 s3 文件夹
2.  自动 PHP 脚本检测到已添加新文件并通知客户端

为此，我需要以某种方式列出亚马逊存储桶文件夹中的所有文件，并找到最后添加的文件。

我试过`$s3->list_objects("mybucket");`了，但它返回存储桶内所有对象的列表，我没有看到仅列出指定文件夹内文件的选项。

使用 Amazon S3 PHP api 执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:13:34.013

> 为此，我需要以某种方式列出亚马逊存储桶文件夹中的所有文件，并找到最后添加的文件。

S3 的 API 并未真正针对按修改日期排序进行优化，因此您需要调用`list_buckets()`并检查每个时间戳，始终跟踪最新的时间戳，直到到达列表末尾。

> 自动 PHP 脚本检测到已添加新文件并通知客户端

您需要编写一个长时间运行的 PHP CLI 脚本，该脚本开头为：

```
while (true) { /*...*/ } 
```

也许偶尔会`sleep(1)`在那里扔一个，这样你的 CPU 就不会那么严重地飙升，但你基本上需要睡眠和轮询，每次循环遍历所有时间戳。

> 我试过 $s3->list_objects("mybucket");，但它返回存储桶内所有对象的列表，我没有看到仅列出指定文件夹内文件的选项。

您需要`prefix`在调用中设置参数[`list_objects()`](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/list_objects)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T00:20:27.207

S3 启动了存储桶[http://docs.aws.amazon.com/AmazonS3/latest/dev/Versioning.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/Versioning.html)中文件的版本控制功能。

您可以通过调用 s3client.listVersions(request) 并根据需要指定 n 来获取最新的 n 个文件。请参阅[http://docs.aws.amazon.com/AmazonS3/latest/dev/list-obj-version-enabled-bucket。 html](http://docs.aws.amazon.com/AmazonS3/latest/dev/list-obj-version-enabled-bucket.html)

示例是在 java 中。不确定是否为版本控制添加了 PHP 的 API。

# iphone - UIScrollView 使用系统中的两个 uiimageview 初始化？

> ID：11087416
> 
> 赞同：0
> 
> 时间：2012-06-18T16:49:14.157
> 
> 标签：iphone, ios, uiscrollview, uiimageview

我有一个带有滚动视图的笔尖，我在控制器上使用它。我必须根据 scrollview.subviews 计数进行一些恒定的计算。然而，令人惊讶的是，滚动视图总是从两个 uiimage 视图开始。

我的 Nib 文件中的滚动视图是空的，我什至检查了 nib 源代码以确保那里没有垃圾。我还删除了滚动视图并创建了另一个具有相同结果的视图。

我总是在那里收到相同的视图（总是在，所以我的 scrollview.subviews.count 总是从 2 开始。这可能是什么原因造成的？？

如果我在初始化视图后打印滚动视图子视图..

```
[[NSBundle mainBundle] loadNibNamed:@"TileScreen" owner:self options:nil];
    NSLog(@"Started scrollview with subviews %@", _scrollView.subviews); 
```

我收到：

```
Started scrollview with subviews (
    "<UIImageView: 0x1dcb50; frame = (294 400; 7 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x1e51b0>>",
    "<UIImageView: 0x1bb6a0; frame = (294 400; 7 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x1a9b50>>"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:49:15.063

在我发布这个问题之前，我理解了这个问题。我想分享以防有人陷入这种情况。

问题是“显示水平滚动条，显示垂直滚动条”添加了提到的 UIImageViews。您可以通过简单地取消选中 IB 上的属性来避免这种情况。

但是，如果您想显示滚动条，则需要在计数中考虑这两个视图。

# php - 在浏览器中启用发帖 (post.php?name=MyName&body=MyText?)

> ID：11087417
> 
> 赞同：0
> 
> 时间：2012-06-18T16:49:14.393
> 
> 标签：php, database, post

我创建了一个文本发布网站。除了在 post.php 页面上发布之外，我想让用户在键入 www.mywebsite.com/post.php?name=MyName&body=MyText? 时发布文本？我怎样才能做到这一点？

邮政编码如下所示：

```
 <?php

  //insert category to database
  if(isset($_POST['qty'])) {
    // Fetch and clean the <select> value.
    // The (int) makes sure the value is really a integer.
    $qty = (int)$_POST['qty'];

    // Create the INSERT query.
    $sql = "INSERT INTO `table`(`quantity`)
            VALUES ({$qty})";

    // Connect to a database and execute the query.
    $dbLink = mysql_connect('MyServer', 'username', 'password') or die(mysql_error());
              mysql_select_db('database_name', $dbLink) or die(mysql_errno());

    $result = mysql_query($sql);

    // Check the results and print the appropriate message.
    if($result) {
        echo "Record successfully inserted!";
    }
    else {
        echo "Record not inserted! (". mysql_error() .")";
    }
}

     if ($_POST['post'])
{
    //get data
    $title = $_POST['title'];
    $body = $_POST['body'];

    //check for existance
    if ($title&&$body)
    {
        mysql_connect("MyServer","username","password") or die(mysql_error());
        mysql_select_db("database_name") or die(mysql_error());

        $date = date("Y-m-d");

        //insert data
        $insert = mysql_query("INSERT INTO news VALUES ('','$title','$body','$date')") or die(mysql_error());

        die("Your text has been posted!");

    }
    else
        echo "Please fill out your name and text";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:54:50.557

尝试使用 $_REQUEST - 它包含您发布到脚本的所有数据（来自 $_GET、$_POST 和 $_COOKIE 全局数组）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:59:17.397

第一个建议是，不惜一切代价避免基于查询字符串的直接查询！这是一个巨大的安全问题。

此外，您提供的代码可能存在许多安全漏洞和问题。

每当您通过 $_COOKIE、$_POST 或 $_GET 调用变量并在查询中使用它时，尽可能使用 MySQLI/PDO 准备语句，或至少使用 mysql_real_escape_string。这将尝试清理进入数据库的数据。

此外，您正在从 url/查询字符串获取参数，将 POST 更改为 GET。

此外，您的行说：

```
if($_GET['post']) 
```

总是会失败，你的 url 中没有一个名为 post 的参数。为此，它需要看起来像：

```
post.php?post&name=MyName&body=MyText?) 
```

见下文：

```
<?php

//insert category to database
// makes sure qty is numeric # added by sixeightzero
if(isset($_GET['qty']) && is_numeric($_GET['qty'])) {
// Fetch and clean the <select> value.
// The (int) makes sure the value is really a integer.
$qty = (int)$_GET['qty'];

// Create the INSERT query.
$sql = "INSERT INTO `table`(`quantity`)
        VALUES ({$qty})";

// Connect to a database and execute the query.
$dbLink = mysql_connect('MyServer', 'username', 'password') or die(mysql_error());
          mysql_select_db('database_name', $dbLink) or die(mysql_errno());

$result = mysql_query(mysql_real_escape_string($sql));     
// sanitizes input # added by sixeightzero

// Check the results and print the appropriate message.
if($result) {
    echo "Record successfully inserted!";
}
else {
    echo "Record not inserted! (". mysql_error() .")";
}
}

if (!isset($_GET['name']) && !isset($_GET['body'])){

//get data
$title = $_GET['name'];
$body = $_GET['body'];

//check for existance
if ($title && $body)
{
    mysql_connect("MyServer","username","password") or die(mysql_error());
    mysql_select_db("database_name") or die(mysql_error());

    $date = date("Y-m-d");

    //insert data
    $insert = mysql_query("INSERT INTO news VALUES ('','".mysql_real_escape_string($title)."','".mysql_real_escape_string($body)."','".mysql_real_escape_string($date)."')") or die(mysql_error());
    // sanitizes input # added by sixeightzero

    die("Your text has been posted!");

}
else
    echo "Please fill out your name and text";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T17:00:33.700

这是完整的源代码！！尝试使用这个

```
 <?php

  //insert category to database
  if(isset($_POST['qty'])) {
    // Fetch and clean the <select> value.
    // The (int) makes sure the value is really a integer.
    $qty = (int)$_POST['qty'];

    // Create the INSERT query.
    $sql = "INSERT INTO `table`(`quantity`)
            VALUES ({$qty})";

    // Connect to a database and execute the query.
    $dbLink = mysql_connect('MyServer', 'username', 'password') or die(mysql_error());
              mysql_select_db('database_name', $dbLink) or die(mysql_errno());

    $result = mysql_query($sql);

    // Check the results and print the appropriate message.
    if($result) {
        echo "Record successfully inserted!";
    }
    else {
        echo "Record not inserted! (". mysql_error() .")";
    }
}

     if ($_SERVER['REQUEST_METHOD'] == "GET") //check whether its a GET method
{
    //get data, since you know that a valid "GET" request was sent
    $title = $_REQUEST['title'];
    $body = $_REQUEST['body'];

    if (isset($title) && isset($body)) //check for existance
    {
        mysql_connect("MyServer","username","password") or die(mysql_error());
        mysql_select_db("database_name") or die(mysql_error());

        $date = date("Y-m-d");

        //insert data
        $insert = mysql_query("INSERT INTO news VALUES ('','$title','$body','$date')") or die(mysql_error());

        die("Your text has been posted!");

    }
    else
        echo "Please fill out your name and text";
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T16:52:00.317

您将希望对查询字符串中的数据使用 $_GET 而不是 POST。

```
//get data
$title = $_GET['title']; // or name if it's name
$body = $_GET['body']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T16:52:30.377

`$_REQUEST`基本上是 的结果`array_merge($_GET,$_POST,$_COOKIE)`，因此您可以使用它来获取可能是 GET 或 POST 变量的值。

# iphone - 崩溃日志中我的应用名称旁边的“抛弃”是什么意思？

> ID：11087424
> 
> 赞同：10
> 
> 时间：2012-06-18T16:49:49.720
> 
> 标签：iphone, ios, xcode, ipad, memory

我的应用程序崩溃了几次，在我的控制台上没有任何错误或堆栈跟踪。那么剩下的唯一方法就是去查看Apple的崩溃报告器。我在我的应用名称旁边发现“抛弃”，这反过来意味着 iOS 杀死了我的应用，但我如何弄清楚它为什么会发生？为什么 iOS 会杀死我的应用程序？最初，我认为这是一个内存溢出问题，但后来，使用 Instruments，我发现我的应用程序几乎没有占用 4-5 MB 内存，所以我放弃了这些问题。Apple 的文档对此并没有提及太多。任何帮助或建议将不胜感激。

![崩溃报告](../Images/09be0b7652b06f9b3e06fb1c8b78ec5d.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T16:56:58.647

这意味着该进程已终止，因为 iOS 需要内存：

> 每个进程的内存使用情况以内存页数的形式报告，截至本文撰写时，每个进程的内存页数为 4KB。*您将在任何被 iOS 终止以释放内存的进程名称旁边看到“（抛弃）”*。如果您在应用程序名称旁边看到它，则表明该应用程序因使用过多内存而被终止。
> 
> [文档](https://developer.apple.com/library/ios/technotes/tn2151/_index.html)

我会查看该技术说明以获取更多帮助。该文档还指出 Instruments 不测量图形内存的使用，这需要特殊处理。

# doctrine - 教义：DQL 中的子查询

> ID：11087425
> 
> 赞同：1
> 
> 时间：2012-06-18T16:49:50.207
> 
> 标签：doctrine, subquery, dql

我正在尝试在一个表上使用 DQL 计算一个值。假设此表名为“TABLE”。它有 5 列：

*   ID
*   人数
*   动物计数
*   region_id
*   type_id

我正在寻找的结果是人的总和（按地区分组时）除以动物的总和（按类型分组时）；

SQL 会是这样的：

```
SELECT SUM(people_count) / 
(
    SELECT SUM(animal_count) 
    FROM TABLE t2 
    GROUPED BY type_id
) 
FROM TABLE t1 
GROUPED BY region_id 
```

你将如何使用 DQL 在 Doctrine 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:20:53.527

我通过创建另一个查询、执行它并将结果包含在第一个查询中来解决了我的问题。

如果您正在处理一个简单的示例，这可能不是最好的方法，但对于我的代码架构来说，这是唯一的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T09:44:57.767

我有一个解决方案，但我认为可能有最好的解决方案来解决您的问题。

无论如何，进行两次查询并在第二次中导入第一次查询的结果可以是一个解决方案。不幸的是，它对我们的数据库的使用率很低。此外，有时我们必须只执行一个 SQL 来对每个示例的列结果进行排序。

```
<?php

namespace AppBundle\Repository;

use AppBundle\Entity\MyClass;
use Doctrine\ORM\EntityRepository;

class MyRepository extends EntityRepository
{
    public function findWithSubQuery()
    {
        return $this->createQueryBuilder('a')
                    ->addSelect(sprintf(
                        "(SELECT COUNT(b.id) FROM %s AS b WHERE b.a = a.id GROUP BY a.id) AS otherColumn",
                        MyClass::class
                    ))
                    ;
    }
} 
```

我使用这个解决方案。也许子查询可以用 DQL ojbect 而不是 DQL 字符串编写。

# hadoop - 如何在 OS X 10.7.4 上安装和运行 Accumulo 和 Hadoop

> ID：11087427
> 
> 赞同：1
> 
> 时间：2012-06-18T16:50:03.313
> 
> 标签：hadoop, mapreduce, apache-zookeeper, accumulo

所以我正在尝试运行 MapReduce，字数统计示例，但我需要运行 Hadoop。我尝试按照**[此处](http://harborsite.blogspot.com/2012/02/accumulo-on-mac-osx.html)**的说明进行操作，但似乎不起作用。问题是没有设置环境变量。我在其中添加了该行`setenv HADOOP_HOME /opt/hadoop-0.20.2`，`/etc/launchd.conf`但是当我运行`echo $HADOOP_HOME`它时它不会打印路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T22:12:06.830

直接在 Accumulo 的***conf/accumulo-env.sh***脚本中设置**HADOOP_HOME变量。**

# jquery - jQuery 克隆问题

> ID：11087432
> 
> 赞同：0
> 
> 时间：2012-06-18T16:50:27.600
> 
> 标签：jquery, clone

这是我的场景：

```
<div class="item">
<div class="item-title">
<a href="_files/download_item.zip" class="link">Download 1</a>
</div>
<div class="item-description"> Lorem ipsum dolor…. </div>
</div> 
```

我想要做的是克隆锚并将其附加到“项目描述”div。

问题是当我有多个项目时，克隆函数会将所有锚点复制到所有“项目描述”div。

这是我正在使用的 jquery：

```
$(function(){   
    $('a.link').clone(true).appendTo('.item-description');
}); 
```

谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:51:53.573

```
$(function(){   
    var links = $('.item-title a.link');
    links.each(function() {
       $(this).parent().next('.item-description').append($(this).clone(true));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:53:26.370

试试这个：

```
$(function(){
  $("a.link").each(function(){
    $(this).clone(true).appendTo($(this).parent().siblings(".item-description"));
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T16:56:58.927

```
$(function(){
    $(".item").each(function(){
        $(this).find(".item-description")
            .append($(this).find("a.link").clone(true));
    });
}); 
```

# java - 动态二维数组可以实现 Java.Collection.size() 方法吗？

> ID：11087439
> 
> 赞同：5
> 
> 时间：2012-06-18T16:51:01.470
> 
> 标签：java, collections, int, type-conversion, long-integer

好的，所以我在 Java 中创建了一个实现 java.util.Collection 接口的动态二维数组。我让我的数组实现了它，因为我希望它具有与普通`Collection`. 但是，我无法实现该`size()`方法，因为在接口中它返回一个整数，而二维矩阵可能会溢出整数类型。

这是我正在尝试制作的课程片段：

```
public abstract class AbstractMatrix<E> implements Collection<E>{
     @Override
     public long size() {
         return columns * rows;
     }
} 
```

现在，这将不起作用，因为“返回类型与`Collection<E>.size()`”不兼容，如果我将类型更改为 int，列 * 行可能会溢出。

我知道我不能像这样覆盖 size 方法，但是有什么方法可以确保该方法在实现`Collection`接口的同时返回正确的大小？

是的，我知道这是不切实际的，可能永远不会成为问题，但我很想知道是否有一个好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:59:20.267

尽管您的实现是有问题的，但在[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#size%28%29)中定义`size`了合同：`Collection#size`

> 返回此集合中的元素数。如果此集合包含多个 Integer.MAX_VALUE 元素，则返回 Integer.MAX_VALUE。

因此，您可以将大小计算为 a `long`，`Integer.MAX_VALUE`如果大于 则返回`Integer.MAX_VALUE`。

或者，您可以模仿它的实现方式，`LinkedList#add`例如，`size`简单地递增并允许溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:59:20.627

假设你愿意拥有一个 8GB 的​​数组——一个二维数组的最小大小，`int`它的总大小会溢出一个至少仅用于迭代分钟）...

我相信典型的方法是要么退回到实施`Iterable`而不是`Collection`，或者只是返回`Integer.MAX_VALUE`，如Javadoc所指定的：

> 返回此集合中的元素数。如果此集合包含多个 Integer.MAX_VALUE 元素，则返回 Integer.MAX_VALUE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:59:16.150

如果您真的担心可能溢出的足够大的矩阵，您可以通过检查结果大小（初始化或调整大小）是否仍在整数范围内来确保不会发生这种情况，如果会抛出（运行时）异常是这样

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T16:59:03.123

我不这么认为，您将需要使用某种解决方法。您可以扩展您的大小以返回负数并将它们解释为无符号的 32 位整数，这将为您提供最多 40 亿和更改。

不过问问自己，你真的需要能够支持这么多对象吗？请记住，40 亿和更改 32 位整数将占用 16GB 的 RAM。使用 64 位 java，一个 40 亿长的`Object`set to all null 数组将占用 32GB，因为 64 位 java 上的引用是 64 位的。这甚至没有考虑用于实际实例化那么多类的内存，这很可能会高得多。

# ios - 刷新当前视图 iOS

> ID：11087445
> 
> 赞同：0
> 
> 时间：2012-06-18T16:51:25.323
> 
> 标签：ios, xcode, refresh, tableview, reload

我在这里发现了很多 TableView 问题的“reloadData”，但我的情况不同。

我有一个通知应用程序，它使用 UILocalNotification 来触发提醒。

我需要在警报触发后实时刷新我的表格视图，而无需关闭和打开应用程序来这样做......

例子：

用户正在查看计划的提醒 (tableView)，突然其中一个提醒触发。此时，tableView 将重新加载，但前提是用户退出应用程序或返回另一个视图并再次打开 tableView。如果用户按下 tableView 女巫显示当前提醒的行（已经完成并且不再存在），这不会发生，因为应用程序会中断。

我需要实时重新加载 tableView，而不离开 tableView Controller 视图。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:02:51.750

当应用程序在前台时触发应用程序的本地通知时，系统会将`application:didReceiveLocalNotification:`消息发送给您的应用程序委托。从那里，您应该通知视图控制器（通过直接引用和消息发送或可能使用自定义`NSNotification`）在这种情况下执行它需要执行的任何操作。

# extjs - extjs 组合框模型

> ID：11087456
> 
> 赞同：4
> 
> 时间：2012-06-18T16:52:05.053
> 
> 标签：extjs, combobox

有没有办法在不创建 js 模型（ExtJS 4.1）的情况下将商店绑定到 ExtJS ComboBox？
要填充用户组合框，我总是需要先设置模型？我想为每个组合框跳过以下代码：

```
Ext.define('User',{extend:'Ext.data.Model',idProperty:'Id',fields:['Id','Name']}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:15:37.627

你是对的，尼尔！
我已经找到了如何使用它：

```
var myStore = Ext.create('Ext.data.Store',{
    fields:['Id','Name'],
    data:[
        {Id:0,Name:'Yes'},
        {Id:1,Name:'No'},
        {Id:2,Name:'Maybe'}
    ]
});

var pnl = Ext.create('Ext.panel.Panel', {
    xtype: 'panel',
    title: 'My Panel',
    items: [{
        id:'cboField1'
        xtype:'combobox',
        fieldLabel:'My Field',
        displayField:'Name',
        valueField:'Id',
        queryMode:'local',
        store: myStore
    }]
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:25:00.970

我发现创建具有两个字段 id、name 的简单模型很有用，然后在预定义值列表的所有静态存储（我用于组合框）上使用此模型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-04T14:28:05.657

如果您使用 Architect，您可以在 ComboBox 的 store 属性中指定一个数组。如果您只想要一个静态的“标题”组合框，则没有必要创建额外的商店和模型。

```
xtype:'combo',
fieldLabel:'Title',
name:'division',
queryMode:'local',
store:['Mr','Mrs','Ms'],
displayField:'title',
autoSelect:true,
forceSelection:true 
```

ps 为了将存储属性更改为 Architect 中的本地数组，您需要选择存储文本左侧的小图标并将其更改为数组而不是存储。 ![在此处输入图像描述](../Images/7d579e74ba1d2cd40f43a65d8f6d3f76.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T18:36:45.360

在 Extjs 中的任何情况下，您都不*需要*在商店中设置模型。设置商店的字段属性。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-cfg-fields](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-cfg-fields)

此外，请考虑本地数据的 store 的 data 属性。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-property-data](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-property-data)

# android - Android：在地图中查找我所在位置的附近点

> ID：11087467
> 
> 赞同：-1
> 
> 时间：2012-06-18T16:52:56.807
> 
> 标签：android, gps, maps, latitude-longitude

我在数据库中有一个表格，其中地图中有经纬度记录的点。

如何确定哪些点在我检测到的位置附近？用户将给出其想要步行去这个地方的最大距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:24:45.273

你可以自己计算：看看[这个](http://www.movable-type.co.uk/scripts/latlong.html)*[haversine公式](http://en.wikipedia.org/wiki/Haversine_formula)*的解释。它解释了数学并有一个有效的 Javascript 示例。

或者，您似乎还可以使用[内置的 Android 功能](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)。

# visual-studio-2010 - Visual Studio Productivity Power Tools 配置设置

> ID：11087469
> 
> 赞同：16
> 
> 时间：2012-06-18T16:53:15.210
> 
> 标签：visual-studio-2010, visual-studio-extensions

我试图找出 Visual Studio Productivity Power Tools 设置的存储位置。我最近搬到了一个新的 Visual Studio 实例，我丢失了所有的 Power Tools 正则表达式选项卡着色设置。它们显然不是普通 VS2010 设置文件的一部分，因为我已经导出和导入了它。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-19T02:23:10.873

它只是存储在注册表中

```
HKCU\Software\Microsoft\VisualStudio\10.0 
```

似乎正则表达式在

```
...\DialogPage\Microsoft.DocWellBehavior.Options.ColorCodingOptions 
```

# http-status-codes - 正确的 etag 响应是什么样的？

> ID：11087471
> 
> 赞同：2
> 
> 时间：2012-06-18T16:53:28.937
> 
> 标签：http-status-codes

我们想知道，

标头明智...正确的 etag 响应是什么样的。

Etag 响应，从某种意义上说，发出了电子标签请求，是的，它与我们端的 etag 匹配，因此不必发送任何内容。

它是否需要包含内容长度标头？

我们是否使用 304 标头响应？

* * *

**澄清：**

我们想通过 php 来 etag 句柄。

流程如下：

a) Etagged 请求进来。

b) PHP 检查 etag 以查看它是否满足我们认为**不**发回完整文档正文的适当条件。

c) 我们通过 php 手动发回什么信号给浏览器以使用缓存的内容？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:54:05.317

在阅读了 wiki 后回答了我自己的问题，正如 lanzz 在上面的评论中所建议的那样：

> “在此后续请求中，服务器现在可以将客户端的 ETag 与资源当前版本的 ETag 进行比较。如果 ETag 值匹配，这意味着资源没有更改，那么服务器可能会发回一个非常短的响应HTTP 304 Not Modified 状态。304 状态告诉客户端它的缓存版本仍然很好，它应该使用它。

所以是的，如果您希望用户代理使用缓存副本，则 304 响应是回答 etag 请求的正确方法。

# django - Noobie 不了解表单集

> ID：11087473
> 
> 赞同：0
> 
> 时间：2012-06-18T16:53:32.437
> 
> 标签：django, django-forms

我有一个实例，我正在创建一个包含多个模型的订单。我希望这些模型以一种形式呈现，并被告知表单集是我的答案。我一直在研究它是如何工作的，但我仍然不知道如何旋转我的轮子。对不起，如果这很简单，我没有看到它。

这是我的模型：

```
class Contact(models.Model):
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    email_address = models.EmailField(max_length=275)
    address = models.CharField(max_length=10, choices=ADDRESS_CHOICES)

    def __unicode__(self):
        return "%s %s" % (self.first_name, self.last_name)

class BaseStationary(models.Model):
    contact = models.ForeignKey(Contact, related_name='%(class)s_related')
    address = models.CharField(max_length=10, choices=ADDRESS_CHOICES)
    quantity = models.CharField(max_length=3, choices=QUANTITY_CHOICES)

    class Meta:
        abstract = True

class LetterHead(BaseStationary):
    pass

class WindowEnv(BaseStationary):
    pass

class NumberTenEnv(BaseStationary):
    pass

class NineByTwelveEnv(BaseStationary):
    pass

class TenByThirteenEnv(BaseStationary):
    pass

class BusinessCard(models.Model):
    contact = models.ForeignKey(Contact, related_name='businesscards')
    card_first_name = models.CharField(max_length=100)
    card_last_name = models.CharField(max_length=100)
    title = models.CharField(max_length=100)
    print_choices = models.CharField(max_length=19, choices=PRINT_CHOICES)
    card_styles = models.CharField(max_length=12, choices=CARD_CHOICES)
    card_email_address = models.EmailField(max_length=275)
    office_phone_number = PhoneNumberField(_('main office phone number'),
        blank=True, null=True)
    toll_free_number = PhoneNumberField(_('toll free number'),
        blank=True, null=True)
    mobile_number = PhoneNumberField(_('mobile phone number'),
        blank=True, null=True)
    fax_number = PhoneNumberField(_('main office fax'),
        blank=True, null=True)
    card_mailing_address = models.CharField(max_length=10,
        choices=ADDRESS_CHOICES)
    card_quantity = models.CharField(max_length=3,
        choices=CARD_QUANTITY_CHOICES)

class RushOrder(models.Model):
    contact = models.ForeignKey(Contact, related_name='rushorders')
    rush_order = models.BooleanField()
    in_hand_date = models.DateField(blank=True, null=True)

class OrderNote(models.Model):
    contact = models.ForeignKey(Contact, related_name='ordernotes')
    add_note = models.BooleanField()
    notes = models.TextField() 
```

这是我的表格：

```
class ContactForm(forms.ModelForm):
    address = forms.ChoiceField(required = True, widget=RadioSelect(), choices=ADDRESS_CHOICES)
    class Meta:
        model = Contact

class LetterHeadForm(forms.ModelForm):
    address = forms.ChoiceField(required = True, widget=RadioSelect(attrs={'id': 'letterhead_address', 'required': 'True'}), choices=ADDRESS_CHOICES)
    class Meta:
        model = LetterHead
        widgets = {
            'contact': forms.HiddenInput,
            'quantity': forms.Select(attrs={'id': 'letterhead_quantity'}, choices=QUANTITY_CHOICES),
        }

class WindowEnvForm(forms.ModelForm):
    address = forms.ChoiceField(required = True, widget=RadioSelect(attrs={'id': 'windowenv_address', 'required': 'True'}), choices=ADDRESS_CHOICES)
    class Meta:
        model = WindowEnv
        widgets = {
            'contact': forms.HiddenInput,
            'quantity': forms.Select(attrs={'id': 'windowenv_quantity'}, choices=QUANTITY_CHOICES),
        }

class NumberTenEnvForm(forms.ModelForm):
    address = forms.ChoiceField(required = True, widget=RadioSelect(attrs={'id': 'numbertenenv_address', 'required': 'True'}), choices=ADDRESS_CHOICES)
    class Meta:
        model = NumberTenEnv
        widgets = {
            'contact': forms.HiddenInput,
            'quantity': forms.Select(attrs={'id': 'numbertenenv_quantity'}, choices=QUANTITY_CHOICES),
        }

class NineByTwelveEnvForm(forms.ModelForm):
    address = forms.ChoiceField(required = True, widget=RadioSelect(attrs={'id': 'ninebytwelveenv_address', 'required': 'True'}), choices=ADDRESS_CHOICES)
    class Meta:
        model = NineByTwelveEnv
        widgets = {
            'contact': forms.HiddenInput,
            'quantity': forms.Select(attrs={'id': 'ninebytwelveenv_quantity'}, choices=QUANTITY_CHOICES),
        }

class TenByThirteenEnvForm(forms.ModelForm):
     address = forms.ChoiceField(required = True, widget=RadioSelect(attrs={'id': 'tenbythirteenenv_address', 'required': 'True'}), choices=ADDRESS_CHOICES)
    class Meta:
        model = TenByThirteenEnv
        widgets = {
            'contact': forms.HiddenInput,
            'quantity': forms.Select(attrs={'id': 'tenbythirteenenv_quantity'}, choices=QUANTITY_CHOICES),
        }

class BusinessCardForm(forms.ModelForm):
    print_choices = forms.ChoiceField(required = True, widget=RadioSelect(), choices=PRINT_CHOICES)
    card_styles = forms.ChoiceField(required = True, widget=RadioSelect(), choices=CARD_CHOICES)
    card_mailing_address = forms.ChoiceField(required = True, widget=RadioSelect(), choices=ADDRESS_CHOICES)
    class Meta:
        model = BusinessCard
        widgets = {
            'contact': forms.HiddenInput,
        }

class RushOrderForm(forms.ModelForm):
    class Meta:
        model = RushOrder
        widgets = {
            'contact': forms.HiddenInput,
            'rush_order': forms.CheckboxInput,
            'in_hand_date': forms.extras.SelectDateWidget
        }

class OrderNoteForm(forms.ModelForm):
    class Meta:
        model = OrderNote
        widgets = {
            'contact': forms.HiddenInput,
            'add_note': forms.CheckboxInput,
            'notes': forms.Textarea
        } 
```

这是我的观点：

```
class OrderFormView(CreateView):
    model = Contact
    form_class = ContactForm
    template_name = 'orderform.html'
    success_url = 'success'

def get_context_data(self, **kwargs):
    context = super(OrderFormView, self).get_context_data(**kwargs)
    context.update({
        'letterhead_form': LetterHeadForm,
        'windowenv_form': WindowEnvForm,
        'numbertenenv_form': NumberTenEnvForm,
        'ninebytwelveenv_form': NineByTwelveEnvForm,
        'tenbythirteenenv_form': TenByThirteenEnvForm,
        'businesscard_form': BusinessCardForm,
        'rushorder_form': RushOrderForm,
        'ordernote_form': OrderNoteForm,
        })
    return context

def form_valid(self, form):
    if form.is_valid():
        data = form.cleaned_data
        email = OrderFormNotification(to=[settings.ORDERFORM_EMAIL_ADDRESS, ],
                extra_context=data)
        email.send() 
```

提前感谢您的任何见解。即使它为我指明了更好地理解表单集的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:44:02.763

如果您需要 9 种不同模型的 9 种表格，那么我认为表格集不会对您有所帮助。表单集用于构造相同类型的多个表单。同样，`CreateView`它旨在仅用于创建单个模型的简单情况。如果您正在创建多个模型/验证多个表单，您会发现自己正在`CreateView`努力完成这项工作。您最好编写自己的视图类，`ProcessFormView`甚至是`View`.

# javascript - 发送新值时谷歌仪表给出错误

> ID：11087478
> 
> 赞同：1
> 
> 时间：2012-06-18T16:53:55.060
> 
> 标签：javascript, google-gauges

我收到一个`data1`未定义的参考错误，我的表格是可见的，我可以看到我制作的 3 个圆圈。但是当我想更新它时，我得到了参考错误。

这是我正在工作的绘图代码：

```
google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data1 = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['A', 0],
        ]);
        var data2 = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['B', 0]
        ]);
        var data3 = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['C', 0]
        ]);

        var options1 = {
          width: 150, height: 170,
          min:0, max:200,
          minorTicks: 5
        };
        var options2 = {
          width: 150, height: 170,
          min:0, max:7000,
          minorTicks: 5
        };
        var options3 = {
          width: 150, height: 170,
          min:0, max:30,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('visualization1'));
        var chart2 = new google.visualization.Gauge(document.getElementById('visualization2'));
        var chart3 = new google.visualization.Gauge(document.getElementById('visualization3'));
        chart.draw(data1, options1);
        chart2.draw(data2, options2);
        chart3.draw(data3, options3);
      } 
```

这是我用来添加新值的函数`data1`

```
function changeSpeed(dir) {
      console.log(dir);
     data1.setValue(0, 0, dir);
    chart.draw(data1, options1);
    } 
```

可能我的功能设置不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:54:59.150

变量`options1`,`options2`和`options3`, 还有`data1`,`data2`和`data3`在本地范围内定义。你需要像这样改变你的功能：

```
function changeSpeed(dir, options, data) {
   data.setValue(0, 0, dir);
   chart.draw(data, options);
} 
```

并使用它：

```
changeSpeed(dir, options1, data1); 
```

或者，您可以在全局范围内定义变量。

# php - PHP - 这个 if 语句可以返回 true 吗？

> ID：11087481
> 
> 赞同：0
> 
> 时间：2012-06-18T16:54:17.680
> 
> 标签：php, if-statement

我正在尝试编辑我同事的代码（他正在度假并且遥不可及）并且有这个 if 语句：

```
if($this->carrier() == 1 and $this->carrier() == 2) {
    return 'V';
} 
```

我希望他不小心放了“and”而不是“or”，这可以解释我遇到的一个错误，但他对 PHP 的了解比我多得多，我想确定这是错误的，而不是违反直觉.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T16:55:53.700

是的，因为它是一个具有潜在副作用的函数，所以它可能是真的。

例如：

```
function carrier() {
    return $someValue++;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T16:55:50.847

是的。该`carrier()`方法可以在您每次调用它时增加它返回的任何值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T16:57:03.717

有可能的可能性很小，是的。

他调用了两次函数，而您没有包含该函数的文本。所以这可能会做一些我们看不到的事情，比如计算这个过程调用它的次数。

另一方面，它更有可能确实是一个错字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T17:05:44.777

有可能的。这是一个可以运行的工作示例。

```
class program
{
private $i = 1;
function carrier()
{
 $this->i=$this->i+1;
 return $this->i-1;
}

function run()
{
 if ($this->carrier()==1 && $this->carrier()==2)
 {
  echo "works";
 }
 else
 {
  echo "doesnt work" . $i;
 }
}
}

$prog = new Program();
$prog->run(); 
```

# express - Paypal 即时更新 nvp 不工作（沙盒环境）

> ID：11087487
> 
> 赞同：1
> 
> 时间：2012-06-18T16:54:40.090
> 
> 标签：express, paypal, instant, nvp

我目前正在使用 JAVA 实现 Paypal 的快速结帐，并与 PayPal NVP API 接口。我的 SetExpressCheckout、GetExpressCheckoutDetails、DoExpressCheckout、DoAuthorization 和 DoCapture 方法都在工作。但是，我需要实现即时更新 API 来计算我们服务器上的运费和税金并显示在贝宝的页面上。我遵循了所有步骤和建议，但是，从未调用过回调。我曾尝试使用 setExpressCheckout 参数，因为我在此论坛中读到这些参数可能是问题所在，但还不能使其正常工作。当我登录或更改送货地址时，永远不会调用回调，顺便说一句，我处于沙盒环境中。

我的回调 url 是公开的并且可以正常工作。尝试使用网络浏览器时，它会调用我的 payPalCheckoutUpdate 方法并写入我服务器的日志文件中，所以我很肯定该 url 被调用了。问题是当我登录贝宝的结帐移动网站或更改送货地址时，永远不会调用此回调 url。

我的 paypal 更新方法托管在基于 Apache Ofbiz 的应用程序中，我在不同的论坛中发现 paypal 无法访问端口 8443 或 8080 中的 ofbiz url。所以我使用 apache 从我的回调 URL 重定向到我的实际方法并避免使用回调 url 中的端口不同于 80。（使用网络浏览器测试时效果很好）

这是我在没有凭据的情况下对 setExpressCheckout 的调用（如果您在此调用中发现问题，请告诉我）

**372623 [http-0.0.0.0-8443-3] 信息 com.paypal.sdk.core.nvp.NVPAPICaller - L_SHIPPINGOPTIONAMOUNT0=0.00&CANCELURL=https%3A%2F%2Fdev2.XXXjacker.com%3A8443%2FXXXjacker%2Fcontrol%2FpayPalCheckoutCancel&MAXAMT= 80.99&L_SHIPPINGOPTIONLABEL0=Calculated+Offline&AMT=80.99&RETURNURL=https%3A%2F%2Fdev2.XXXjacker.com%3A8443%2FXXXjacker%2Fcontrol%2FpayPalCheckoutReturn&CALLBACK=http%3A%2F%2Fdev2.XXXjacker.com%2FpayPalCheckoutUpdate&L_SHIPPINGOPTIONISDEFAULT0=true&L_AMT0=80.99&TAXAMT=0.00 &L_QTY0=1&L_NUMBER0=286202&SHIPPINGAMT=0.00&L_NAME0=DVD+%2B+VCR+w%2F+Line+in+%28no+tuner%29&ITEMAMT=80.99&CALLBACKVERSION+=84.0&VERSION=84.0&L_SHIPPINGOPTIONNAME0=Calculated+Offline&CALLBACKCheckout&CALLBACKTIMEOUT=3&L_SHIPPINGOPTIONNAME0=已计算+离线&SETPWDCheckout& **OUTCYMETHOD** =USD& &源=PAYPAL_JAVA_SDK_76.0&SIGNATURE= ***** *****&USER=xxxxx_12xxxx643_biz_api1.xxxxxxxxxxxxx.com**

我尝试了使用和不使用 L_SHIPPINGOPTIONLABEL0 参数，还尝试了将 version 和 callbackversion 设置为 76.0（我正在使用的 java 库的默认设置，取自 paypal）我总是得到相同的结果，回调 url 没有被调用。

这是来自贝宝的回应：

**373536 [http-0.0.0.0-8443-3] INFO com.paypal.sdk.core.nvp.NVPAPICaller - TOKEN=EC%2dXXXXXXXX03911650G&TIMESTAMP=2012%2d06%2d12T22%3a03%3a06Z&CORRELATIONID=f1e3c64211d5e&ACK=Success&VERSION=84%2e0&BUILD=2975009确认：200 经过时间：914 毫秒**

预先感谢您在此问题上提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:52:59.180

回调可能需要 SSL？：

*   [http://www.konakart.com/forum/index.php?topic=280.0](http://www.konakart.com/forum/index.php?topic=280.0)
*   [http://afillyateit.com/forums/topic/500](http://afillyateit.com/forums/topic/500)

# c# - 任务和线程不在 Linqpad 的静态构造函数中运行

> ID：11087494
> 
> 赞同：1
> 
> 时间：2012-06-18T16:55:03.860
> 
> 标签：c#, linqpad, static-constructor

此代码无限期地`t.Wait()`在线等待。

```
void Main()
{
    Foo.Bar();
}

public static class Foo
{
    static Foo()
    {
        var t = Task.Factory.StartNew (() => 1);
        t.Wait();
        "Done".Dump();
    }

    public static void Bar()
    {
    }
} 
```

我希望任务能够立即运行并完成。关于为什么的任何想法？这似乎不会发生在实例构造函数中。v4.42.01

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:38:38.407

如果您将代码的“ `StartNew`-and- `Wait`”部分放入或放入方法中，则代码的“-and-”部分将按预期工作（ `t.Result`will be ）。仅当您将其放入静态构造函数时，它才不会停止，因为“在静态构造函数[中阻塞当前线程的任何操作都可能存在死锁风险](http://blogs.msdn.com/b/pfxteam/archive/2011/05/03/10159682.aspx)”。`1``Main``Bar``Wait`

为了防止同时多次执行静态ctor，CLR 在锁下执行它们。在这里，您尝试从 Foo 的静态 ctor 调用 Foo 的匿名方法，并等待它完成，这会导致死锁。

相关 SO 页面：[1](https://stackoverflow.com/questions/10465961/potential-pitfalls-with-static-constructors-in-c-sharp) , [2](https://stackoverflow.com/questions/8594975/why-will-an-empty-net-task-not-complete-if-started-and-waited-for-from-a-static)

# linux - 如何使用 Shell 挑选/修剪字符串的一部分

> ID：11087496
> 
> 赞同：1
> 
> 时间：2012-06-18T16:55:07.010
> 
> 标签：linux, string, shell, date

我正在尝试修剪它，它存储在一个名为 $line 的变量中。

```
[2012-06-18 10:37:09,026 (there is a lot of text after this, i just cut it out) 
```

我是 shell 脚本的新手，这是我拥有的代码

```
errortime= $line | cut -c2-10; 
```

它给了我一个错误，从变量 $line 中提取日期的正确代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:57:47.100

你想要：

```
errortime=`echo $line | cut -c2-20` 
```

反而？

* * *

编辑：如果您使用的是 ksh，则该行需要如下所示：

```
errortime=$(echo $line | cut -c2-20) 
```

# bash - Bash如何将stderr捕获到变量？

> ID：11087499
> 
> 赞同：59
> 
> 时间：2012-06-18T16:55:25.493
> 
> 标签：bash, stderr

Bash如何将stderr捕获到变量？

我想在我的 bash 脚本中做这样的事情

```
sh -c path/myExcecutable-bin 2>&1 =MYVARIABLE 
```

如何将 stderror 输出发送到变量？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-06-18T16:56:55.340

保存`stdout` *和* `stderr`到一个变量：

```
MYVARIABLE="$(path/myExcecutable-bin 2>&1)" 
```

请注意，这会将 stdout 和 stderr 交错到同一个变量中。

*仅* 保存`stderr`到变量：

```
MYVARIABLE="$(path/myExcecutable-bin 2>&1 > /dev/null)" 
```

# c# - 反序列化 JSON 响应时，RestSharp 客户端将所有属性返回为 null

> ID：11087508
> 
> 赞同：13
> 
> 时间：2012-06-18T16:55:57.430
> 
> 标签：c#, json, c#-4.0, restsharp

我正在尝试做一个非常简单的示例，使用 RestSharp 的 Execute 方法查询休息端点并序列化为 POCO。但是，我尝试的所有操作都会产生一个 response.Data 对象，该对象的所有属性都具有 NULL 值。

这是 JSON 响应：

```
{
   "Result":
   {
       "Location":
       {
           "BusinessUnit": "BTA",
           "BusinessUnitName": "CASINO",
           "LocationId": "4070",
           "LocationCode": "ZBTA",
           "LocationName": "Name of Casino"
       }
   }
} 
```

这是我的测试代码

```
 [TestMethod]
    public void TestLocationsGetById()
    {
        //given
        var request = new RestRequest();
        request.Resource = serviceEndpoint + "/{singleItemTestId}";
        request.Method = Method.GET;
        request.AddHeader("accept", Configuration.JSONContentType);
        request.RootElement = "Location";
        request.AddParameter("singleItemTestId", singleItemTestId, ParameterType.UrlSegment);
        request.RequestFormat = DataFormat.Json;

        //when
        Location location = api.Execute<Location>(request);            

        //then
        Assert.IsNotNull(location.LocationId); //fails - all properties are returned null

    } 
```

这是我的 API 代码

```
 public T Execute<T>(RestRequest request) where T : new()
    {
        var client = new RestClient();
        client.BaseUrl = Configuration.ESBRestBaseURL;

        //request.OnBeforeDeserialization = resp => { resp.ContentLength = 761; };

        var response = client.Execute<T>(request);
        return response.Data;
    } 
```

最后，这是我的 POCO

```
 public class Location
{        
    public string BusinessUnit { get; set; }
    public string BusinessUnitName { get; set; }
    public string LocationId { get; set; }
    public string LocationCode { get; set; }
    public string LocationName { get; set; }
} 
```

此外，响应上的 ErrorException 和 ErrorResponse 属性为 NULL。

这似乎是一个很简单的案例，但我整天都在转圈！谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T17:19:37.420

`Content-Type`响应中的内容是什么？如果不是“application/json”等标准内容类型，那么 RestSharp 将无法理解要使用哪个反序列化器。如果它实际上是 RestSharp 不“理解”的内容类型（您可以通过检查`Accept`请求中发送的内容来验证），那么您可以通过以下方式解决此问题：

```
client.AddHandler("my_custom_type", new JsonDeserializer()); 
```

**编辑：**

好的，抱歉，再次查看 JSON，您需要类似以下内容：

```
public class LocationResponse
   public LocationResult Result { get; set; }
}

public class LocationResult {
  public Location Location { get; set; }
} 
```

然后做：

```
client.Execute<LocationResponse>(request); 
```

# c# - 如何让 Mozilla Firefox 显示文件下载进度

> ID：11087510
> 
> 赞同：1
> 
> 时间：2012-06-18T16:56:26.667
> 
> 标签：c#, asp.net-mvc, firefox

我的 MVC 应用程序有一个简单的文件下载控制器操作，用于下载文件。

这是代码：

```
public ActionResult Download(string fileId, string filename)
{
    //var fullFilePath = FileService.GetFullPath(fileId); // get the path to file
    var fullFilePath = fileId;
    return File(fullFilePath, "application/octet-stream", filename);
} 
```

我可以成功下载/保存文件，但似乎无法让 Firefox 显示文件下载进度。所有其他浏览器都会显示文件下载进度。

有谁知道如何让 Mozilla Firefox 显示文件下载进度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:59:45.593

您需要添加`Content-Length`到标题中，以便浏览器可以计算。

```
HttpContext.Response.AddHeader("Content-Length", file.Length.ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:59:55.837

您需要发送一个`Content-Length`标头，以字节为单位告知文件的大小，否则浏览器不知道文件有多大，也无法显示进度条。

如果您传递内容长度，则它可以在下载时显示进度条。

# android - 我可以使用数据库演示吗

> ID：11087512
> 
> 赞同：-1
> 
> 时间：2012-06-18T16:56:29.193
> 
> 标签：android, database

大家好，我已经制作我的应用程序 6 个月了。我一直在研究我的布局和编码等。现在上个月我一直在尝试创建一个数据库。但我就是无法解决这个问题。我已经完成了 android 记事本教程，并且我已经下载了 SQLite 数据库浏览器。即使我有一个来自notepad v3（添加和删除数据）的工作数据库，我只是不知道我是否可以在我的项目中使用这个数据库演示。

我也在一些堆栈溢出页面上（现在找不到它），有人放了一个指向我下载并运行它的数据库演示 zip 文件的链接。它正是我所追求的。希望你们能帮助我，让我知道我是否可以将这个数据库演示用作我自己的..

不要误会我的意思，我不是在寻找一种简单的方法来制作我自己的数据库或学习它。

在安卓世界里有很多东西要学。如果我有一个可以在其他项目中使用的工作数据库，我将一路学习编码。这是数据库演示的 java 代码，如果您想查看我的 XML，粘贴所有这些内容有点重请说..

```
 package mina.android.DatabaseDemo;
      import android.app.Activity;
      import android.app.Dialog;
      import android.database.Cursor;
      import android.os.Bundle;
      import android.text.Spannable;
      import android.view.View;
      import android.widget.AdapterView;
      import android.widget.EditText;
      import android.widget.SimpleCursorAdapter;
       import android.widget.Spinner;
      import android.widget.TextView;
      import android.widget.AdapterView.OnItemSelectedListener;

       public class AddEmployee extends Activity {
       EditText txtName;
       EditText txtAge;
       TextView txtEmps;
       DatabaseHelper dbHelper;
        Spinner spinDept;

       @Override
         public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.addemployee);
         txtName=(EditText)findViewById(R.id.txtName);
         txtAge=(EditText)findViewById(R.id.txtAge);
         txtEmps=(TextView)findViewById(R.id.txtEmps);
         spinDept=(Spinner)findViewById(R.id.spinDept);
        }

    @Override
    public void onStart()
   {
    try
    {
    super.onStart();
    dbHelper=new DatabaseHelper(this);

        txtEmps.setText(txtEmps.getText()+String.valueOf(dbHelper.getEmployeeCount()));

    Cursor c=dbHelper.getAllDepts();
    startManagingCursor(c);

    //SimpleCursorAdapter ca=new  

       SimpleCursorAdapter(this,android.R.layout.simple_spinner_item, c, new String [] 

       {DatabaseHelper.colDeptName}, new int []{android.R.id.text1});
    SimpleCursorAdapter ca=new   

         SimpleCursorAdapter(this,R.layout.deptspinnerrow, c, new String []

        {DatabaseHelper.colDeptName,"_id"}, new int []{R.id.txtDeptName});

        //ca.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinDept.setAdapter(ca);
    spinDept.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View   
                    selectedView,
                int position, long id) {
            // TODO Auto-generated method stub

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });

    //never close cursor
    }
    catch(Exception ex)
    {
        CatchError(ex.toString());
    }
    }

     public void btnAddEmp_Click(View view)
   {
    boolean ok=true;
    try
    {
        Spannable spn=txtAge.getText();
        String name=txtName.getText().toString();
        int age=Integer.valueOf(spn.toString());
        int deptID=Integer.valueOf((int)spinDept.getSelectedItemId());
        Employee emp=new Employee(name,age,deptID);

        dbHelper.AddEmployee(emp);

    }
    catch(Exception ex)
    {
        ok=false;
        CatchError(ex.toString());
    }
    finally
    {
        if(ok)
        {
            //NotifyEmpAdded();
            Alerts.ShowEmpAddedAlert(this);
            txtEmps.setText("Number of employees 

                        "+String.valueOf(dbHelper.getEmployeeCount()));
        }
      }
     }

      void CatchError(String Exception)
   {
    Dialog diag=new Dialog(this);
    diag.setTitle("Add new Employee");
    TextView txt=new TextView(this);
    txt.setText(Exception);
    diag.setContentView(txt);
    diag.show();
     }

     void NotifyEmpAdded()
    {
    Dialog diag=new Dialog(this);
    diag.setTitle("Add new Employee");
    TextView txt=new TextView(this);
    txt.setText("Employee Added Successfully");
    diag.setContentView(txt);
    diag.show();
    try {
        diag.wait(1000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        CatchError(e.toString());
    }
    diag.notify();
    diag.dismiss();
     }

       }

   package mina.android.DatabaseDemo;

    import android.app.AlertDialog;
    import android.app.Dialog;
    import android.content.Context;
    import android.content.DialogInterface;
    import android.content.DialogInterface.OnClickListener;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.widget.Spinner;
    import android.widget.TextView;

    public class Alerts {
    public static void ShowEmpAddedAlert(Context con)
     {
     AlertDialog.Builder builder=new AlertDialog.Builder(con);
     builder.setTitle("Add new Employee");
     builder.setIcon(android.R.drawable.ic_dialog_info);
     DialogListner listner=new DialogListner();
     builder.setMessage("Employee Added successfully");
     builder.setPositiveButton("ok", listner);

    AlertDialog diag=builder.create();
    diag.show();
        }

    public static AlertDialog ShowEditDialog(final Context con,final Employee emp)
    {
   AlertDialog.Builder b=new AlertDialog.Builder(con);
   b.setTitle("Employee Details");
   LayoutInflater li=LayoutInflater.from(con);
   View v=li.inflate(R.layout.editdialog, null);

   b.setIcon(android.R.drawable.ic_input_get);

   b.setView(v);
   final TextView txtName=(TextView)v.findViewById(R.id.txtDelName);
   final TextView txtAge=(TextView)v.findViewById(R.id.txtDelAge);
   final Spinner spin=(Spinner)v.findViewById(R.id.spinDiagDept);
   Utilities.ManageDeptSpinner(con, spin);
   for(int i=0;i<spin.getCount();i++)
   {
    long id=spin.getItemIdAtPosition(i);
    if(id==emp.getDept())
    {
        spin.setSelection(i, true);
        break;
        }
       }

   txtName.setText(emp.getName());
    txtAge.setText(String.valueOf(emp.getAge()));

   b.setPositiveButton("Modify", new OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        emp.setName(txtName.getText().toString());
        emp.setAge(Integer.valueOf(txtAge.getText().toString()));

        emp.setDept((int)spin.getItemIdAtPosition(spin.getSelectedItemPosition()));

        try
        {
        DatabaseHelper db=new DatabaseHelper(con);
        db.UpdateEmp(emp);

        }
        catch(Exception ex)
        {
            CatchError(con, ex.toString());
        }
       }
      });

      b.setNeutralButton("Delete", new OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        DatabaseHelper db=new DatabaseHelper(con);
        db.DeleteEmp(emp);
       }
    });
     b.setNegativeButton("Cancel", null);

      return b.create();
      //diag.show();

          }

         static public void CatchError(Context con, String Exception)
        {
     Dialog diag=new Dialog(con);
     diag.setTitle("Error");
     TextView txt=new TextView(con);
     txt.setText(Exception);
     diag.setContentView(txt);
     diag.show();
          }
            }

        package mina.android.DatabaseDemo

        import android.app.TabActivity;
        import android.content.Intent;
         import android.os.Bundle;
        import android.view.Menu;
        import android.view.MenuItem;
        import android.widget.GridView;
        import android.widget.TabHost;
        import android.widget.TextView;

        public class DatabaseDemo extends TabActivity {
    DatabaseHelper dbHelper;
    GridView grid;
    TextView txtTest;
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        SetupTabs();

       }

         @Override
       public boolean onCreateOptionsMenu(Menu menu)
        {
        menu.add(1, 1, 1, "Add Employee");
       return true;
       }

        public boolean onOptionsItemSelected(MenuItem item)
       {
       switch (item.getItemId())
       {
        //Add employee
       case 1:
        Intent addIntent=new Intent(this,AddEmployee.class);
        startActivity(addIntent);
        break;
       }
       super.onOptionsItemSelected(item);
      return false;
       }

      void SetupTabs()
      {

       TabHost host=getTabHost();

       TabHost.TabSpec spec=host.newTabSpec("tag1");
       Intent in1=new Intent(this, AddEmployee.class);
       spec.setIndicator("Add Employee");
       spec.setContent(in1);

       TabHost.TabSpec spec2=host.newTabSpec("tag2");
       Intent in2=new Intent(this, GridList.class);

       spec2.setIndicator("Employees");
       spec2.setContent(in2);
       host.addTab(spec);
       host.addTab(spec2);
        }
       }

       package mina.android.DatabaseDemo;

       import android.content.ContentValues;
       import android.content.Context;
       import android.database.Cursor;
       import android.database.sqlite.SQLiteDatabase;
       import android.database.sqlite.SQLiteOpenHelper;

      public class DatabaseHelper extends SQLiteOpenHelper {

    static final String dbName="demoDB";
    static final String employeeTable="Employees";
    static final String colID="EmployeeID";
    static final String colName="EmployeeName";
    static final String colAge="Age";
     static final String colDept="Dept";

    static final String deptTable="Dept";
    static final String colDeptID="DeptID";
    static final String colDeptName="DeptName";

     static final String viewEmps="ViewEmps";

     public DatabaseHelper(Context context) {
    super(context, dbName, null,33);

    // TODO Auto-generated constructor stub
    }

   @Override
    public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

    db.execSQL("CREATE TABLE "+deptTable+" ("+colDeptID+ " INTEGER PRIMARY KEY 
          , "+
            colDeptName+ " TEXT)");

    db.execSQL("CREATE TABLE "+employeeTable+" ("+colID+" INTEGER PRIMARY KEY 
          AUTOINCREMENT, "+
            colName+" TEXT, "+colAge+" Integer, "+colDept+" INTEGER 

        NOT NULL ,FOREIGN KEY ("+colDept+") REFERENCES "+deptTable+"  
        ("+colDeptID+"));");

    db.execSQL("CREATE TRIGGER fk_empdept_deptid " +
            " BEFORE INSERT "+
            " ON "+employeeTable+

            " FOR EACH ROW BEGIN"+
            " SELECT CASE WHEN ((SELECT "+colDeptID+" FROM 

            "+deptTable+" WHERE "+colDeptID+"=new."+colDept+" ) IS NULL)"+
            " THEN RAISE (ABORT,'Foreign Key Violation') END;"+
            "  END;");

    db.execSQL("CREATE VIEW "+viewEmps+
            " AS SELECT "+employeeTable+"."+colID+" AS _id,"+
            " "+employeeTable+"."+colName+","+
            " "+employeeTable+"."+colAge+","+
            " "+deptTable+"."+colDeptName+""+
            " FROM "+employeeTable+" JOIN "+deptTable+
            " ON "+employeeTable+"."+colDept+" 

        ="+deptTable+"."+colDeptID
            );
    //Inserts pre-defined departments
    InsertDepts(db);

     }

    @Override
     public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

    db.execSQL("DROP TABLE IF EXISTS "+employeeTable);
    db.execSQL("DROP TABLE IF EXISTS "+deptTable);

    db.execSQL("DROP TRIGGER IF EXISTS dept_id_trigger");
    db.execSQL("DROP TRIGGER IF EXISTS dept_id_trigger22");
    db.execSQL("DROP TRIGGER IF EXISTS fk_empdept_deptid");
    db.execSQL("DROP VIEW IF EXISTS "+viewEmps);
    onCreate(db);
    }

    void AddEmployee(Employee emp)
    {

     SQLiteDatabase db= this.getWritableDatabase();

    ContentValues cv=new ContentValues();

    cv.put(colName, emp.getName());
    cv.put(colAge, emp.getAge());
    cv.put(colDept, emp.getDept());
    //cv.put(colDept,2);

    db.insert(employeeTable, colName, cv);
    db.close();

   }

    int getEmployeeCount()
   {
    SQLiteDatabase db=this.getWritableDatabase();
    Cursor cur= db.rawQuery("Select * from "+employeeTable, null);
    int x= cur.getCount();
    cur.close();
    return x;
    }

    Cursor getAllEmployees()
    {
     SQLiteDatabase db=this.getWritableDatabase();

     //Cursor cur= db.rawQuery("Select "+colID+" as _id , "+colName+", 

        "+colAge+" from "+employeeTable, new String [] {});
     Cursor cur= db.rawQuery("SELECT * FROM "+viewEmps,null);
     return cur;

   }

   Cursor getAllDepts()
   {
     SQLiteDatabase db=this.getReadableDatabase();
     Cursor cur=db.rawQuery("SELECT "+colDeptID+" as _id, "+colDeptName+" from 

        "+deptTable,new String [] {});

     return cur;
   }

      void InsertDepts(SQLiteDatabase db)
     {
     ContentValues cv=new ContentValues();
        cv.put(colDeptID, 1);
        cv.put(colDeptName, "Sales");
        db.insert(deptTable, colDeptID, cv);
        cv.put(colDeptID, 2);
        cv.put(colDeptName, "IT");
        db.insert(deptTable, colDeptID, cv);
        cv.put(colDeptID, 3);
        cv.put(colDeptName, "HR");
        db.insert(deptTable, colDeptID, cv);
        db.insert(deptTable, colDeptID, cv);

        }

         public String GetDept(int ID)
     {
     SQLiteDatabase db=this.getReadableDatabase();

     String[] params=new String[]{String.valueOf(ID)};
     Cursor c=db.rawQuery("SELECT "+colDeptName+" FROM"+ deptTable+" WHERE 

        "+colDeptID+"=?",params);
     c.moveToFirst();
     int index= c.getColumnIndex(colDeptName);
     return c.getString(index);
    }

    public Cursor getEmpByDept(String Dept)
    {
     SQLiteDatabase db=this.getReadableDatabase();
     String [] columns=new String[]{"_id",colName,colAge,colDeptName};
     Cursor c=db.query(viewEmps, columns, colDeptName+"=?", new String[] 

         {Dept}, null, null, null);
     return c;
    }

    public int GetDeptID(String Dept)
    {
     SQLiteDatabase db=this.getReadableDatabase();
     Cursor c=db.query(deptTable, new String[]{colDeptID+" as 

            _id",colDeptName},colDeptName+"=?", new String[]{Dept}, null, null, null);
     //Cursor c=db.rawQuery("SELECT "+colDeptID+" as _id FROM "+deptTable+" 

            WHERE "+colDeptName+"=?", new String []{Dept});
     c.moveToFirst();
     return c.getInt(c.getColumnIndex("_id"));

     }

     public int UpdateEmp(Employee emp)
     {
     SQLiteDatabase db=this.getWritableDatabase();
     ContentValues cv=new ContentValues();
     cv.put(colName, emp.getName());
     cv.put(colAge, emp.getAge());
     cv.put(colDept, emp.getDept());
     return db.update(employeeTable, cv, colID+"=?", new String  

          []{String.valueOf(emp.getID())});

    }

     public void DeleteEmp(Employee emp)
   {
     SQLiteDatabase db=this.getWritableDatabase();
     db.delete(employeeTable,colID+"=?", new String []    

            {String.valueOf(emp.getID())});
     db.close();
            }
             }

       package mina.android.DatabaseDemo;

      import android.content.DialogInterface;

      public class DialogListner implements  
      android.content.DialogInterface.OnClickListener {

public DialogListner()
{

}

public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub

}

    }

       package mina.android.DatabaseDemo;

     import android.content.Context;

     public class Employee {

int _id;
String _name;
int _age;
int _dept;

public Employee(String Name,int Age,int Dept)
{

    this._name=Name;
    this._age=Age;
    this._dept=Dept;
}

public Employee(String Name,int Age)
{
    this._name=Name;
    this._age=Age;
}

public int getID()
{
    return this._id;
}
public void SetID(int ID)
{
    this._id=ID;
}

public String getName()
{
    return this._name;
}

public int getAge()
{
    return this._age;
}

public void setName(String Name)
{
    this._name=Name;
}
public void setAge(int Age)
{
    this._age=Age;
}

public void setDept(int Dept)
{
    this._dept=Dept;
}

public String getDeptName(Context con, int Dept)
{
    return new DatabaseHelper(con).GetDept(Dept);
}
public int getDept()
{
    return this._dept;
}
     }

      package mina.android.DatabaseDemo;

      import android.app.Activity;
     import android.app.AlertDialog;
     import android.content.DialogInterface;
     import android.content.DialogInterface.OnDismissListener;
     import android.database.Cursor;
     import android.database.sqlite.SQLiteCursor;
     import android.os.Bundle;
     import android.view.View;
     import android.widget.AdapterView;
     import android.widget.GridView;
     import android.widget.SimpleCursorAdapter;
     import android.widget.Spinner;
     import android.widget.TextView;
     import android.widget.AdapterView.OnItemClickListener;
    import android.widget.AdapterView.OnItemSelectedListener;

    public class GridList extends Activity {
DatabaseHelper dbHelper;
static public GridView grid;
TextView txtTest;
Spinner spinDept1;
/** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.gridview);
    grid=(GridView)findViewById(R.id.grid);
    txtTest=(TextView)findViewById(R.id.txtTest);
    spinDept1=(Spinner)findViewById(R.id.spinDept1);

    Utilities.ManageDeptSpinner(this.getParent(),spinDept1);
    final DatabaseHelper db=new DatabaseHelper(this);
    try
    { 
```

[http://img856.imageshack.us/img856/446/hoop.png](http://img856.imageshack.us/img856/446/hoop.png)

```
 spinDept1.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            LoadGrid();
            //sca.notifyDataSetChanged();

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });

        }
        catch(Exception ex)
        {
        txtTest.setText(ex.toString());
        }

        try
       {
         grid.setOnItemClickListener(new OnItemClickListener()
        {

        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            // TODO Auto-generated method stub
            try
            {

            SQLiteCursor 
            cr=(SQLiteCursor)parent.getItemAtPosition(position);
            String 
             name=cr.getString(cr.getColumnIndex(DatabaseHelper.colName));
            int  
               age=cr.getInt(cr.getColumnIndex(DatabaseHelper.colAge));
            String 
               Dept=cr.getString(cr.getColumnIndex(DatabaseHelper.colDeptName));
            Employee emp=new Employee(name, age,db.GetDeptID(Dept));
            emp.SetID((int)id);
            AlertDialog diag= Alerts.ShowEditDialog(GridList.this,emp);
            diag.setOnDismissListener(new OnDismissListener() {

                public void onDismiss(DialogInterface dialog) {
                    // TODO Auto-generated method stub
                    txtTest.setText("dismissed");

            //((SimpleCursorAdapter)grid.getAdapter()).notifyDataSetChanged();
                    LoadGrid();
                }
            });
            diag.show();
            }
            catch(Exception ex)
            {
                Alerts.CatchError(GridList.this, ex.toString());
            }
        }

       }
        );
        }
        catch(Exception ex)
        {

        }

         }

           @Override
           public void onStart()
        {
        super.onStart();
         //LoadGrid();
          }

           public void LoadGrid()
          {
         dbHelper=new DatabaseHelper(this);
        try
         {
        //Cursor c=dbHelper.getAllEmployees();
        View v=spinDept1.getSelectedView();
        TextView txt=(TextView)v.findViewById(R.id.txtDeptName);
        String Dept=String.valueOf(txt.getText());
        Cursor c=dbHelper.getEmpByDept(Dept);
        startManagingCursor(c);

        String [] from=new String 
          []{DatabaseHelper.colName,DatabaseHelper.colAge,DatabaseHelper.colDeptName};
        int [] to=new int [] {R.id.colName,R.id.colAge,R.id.colDept};
        SimpleCursorAdapter sca=new  
          SimpleCursorAdapter(this,R.layout.gridrow,c,from,to);
        grid.setAdapter(sca);

        }
         catch(Exception ex)
        {
        AlertDialog.Builder b=new AlertDialog.Builder(this);
        b.setMessage(ex.toString());
        b.show();
       }
          }

          }

       package mina.android.DatabaseDemo;

        import android.content.Context;
        import android.database.Cursor;
        import android.widget.SimpleCursorAdapter;
        import android.widget.Spinner;

       public class Utilities {
       static public void ManageDeptSpinner(Context context,Spinner view)
       {
    DatabaseHelper dbHelper=new DatabaseHelper(context);
    Cursor c=dbHelper.getAllDepts();
    //context.startManagingCursor(c);

   //SimpleCursorAdapter ca=new 
       SimpleCursorAdapter(this,android.R.layout.simple_spinner_item, c, new String [] 
       {DatabaseHelper.colDeptName}, new int []{android.R.id.text1});
   SimpleCursorAdapter ca=new   
     SimpleCursorAdapter(context,R.layout.deptspinnerrow,c, 
       new String [] {DatabaseHelper.colDeptName,"_id"}, new int []{R.id.txtDeptName});
    view.setAdapter(ca);

        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:11:55.193

大多数 Android 演示，包括当前版本的[记事本](http://developer.android.com/resources/samples/NotePad/index.html)，都使用[Apache License v2.0](http://www.apache.org/licenses/LICENSE-2.0)。该许可证规定您可以自由使用和重新分发代码，但您必须保留所有现有的通知和归属，并明确承认您已经修改了代码。（具体措辞见第 4 段。）

# tomcat - 虚拟主机tomcat

> ID：11087513
> 
> 赞同：0
> 
> 时间：2012-06-18T16:56:30.440
> 
> 标签：tomcat

我是tomcat的新手。如果我在 tomcat 中创建一个虚拟主机，例如 www.myapp.com，它是否适用于外部人员？还是只能在内部网络中工作？我在域中有一个节点，名称很长，所以我想缩短它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:18:42.213

VirtualHosts 并不神奇：它们只配置服务器以将某些请求路由到`<Host>`您在 Tomcat 中配置的特定请求`server.xml`。如果您想`www.myapp.com`解析到您选择的服务器（无处不在，而不仅仅是在您的本地计算机上或类似的地方），您将需要修改全局 DNS 注册表以将该主机名映射到您的服务器。您的域名注册商应提供完成此操作所需的工具。

# c++ - 如何使用 boost::shared_ptr 安全地释放线程之间共享的对象？

> ID：11087514
> 
> 赞同：-2
> 
> 时间：2012-06-18T16:56:32.610
> 
> 标签：c++, multithreading, boost, thread-safety, shared-ptr

我想知道，这样实施是否安全？：

```
typedef shared_ptr<Foo>  FooPtr;    
FooPtr                  *gPtrToFooPtr    // global variable

// init (before any thread has been created)
void init()
{
    gPtrToFooPtr = new FooPtr(new Foo);
}

// thread A, B, C, ..., K
// Once thread Z execute read_and_drop(), 
// no more call to read() from any thread.
// But it is possible even after read_and_drop() has returned,
// some thread is still in read() function.
void read()
{
    FooPtr a = *gPtrToFooPtr;
    // do useful things (read only)
}

// thread Z (executed once)
void read_and_drop()
{
    FooPtr b = *gPtrToFooPtr;
    // do useful things with a (read only)
    b.reset();
} 
```

我们不知道哪个线程会做实际的释放。boost`shared_ptr`在这种情况下能安全释放吗？

根据boost的文档，线程安全`shared_ptr`是：

> `shared_ptr`多个线程可以同时“读取”一个实例（仅使用 const 操作访问）。***不同*** 的实例可以由多个线程同时`shared_ptr` “写入”（使用可变操作，例如 operator`=`或访问）。`reset`

就我而言，上面的代码没有违反我上面提到的任何线程安全标准。而且我相信代码应该可以正常运行。有人告诉我我是对还是错？

提前致谢。

* * *

## **编辑于 2012-06-20 01:00 UTC+9**

上面的伪代码工作正常。该`shared_ptr`实现保证在多个线程访问它的实例的情况下正常工作（每个线程**必须**访问其自己的实例`shared_ptr`化实例，通过使用*复制构造函数*）。

请注意，在上面的伪代码中，您必须`delete gPtrToFooPtr`让`shared_ptr`实现最终释放（将引用计数减一）它拥有的对象（不是正确的表达式，因为它不是一个`auto_ptr`，但谁在乎；））。在这种情况下，您必须意识到它可能会在多线程应用程序中导致 SIGSEGV。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:14:14.020

您如何在这里定义“安全”？如果您将其定义为“我想确保对象仅被销毁一次”，那么是的，释放是安全的。但是，问题在于您的示例中两个线程共享一个智能指针。这根本不安全。一个线程执行的`reset()`操作可能对另一个线程不可见。

如文档所述，智能指针提供与内置类型（即指针）相同的保证。因此，在其他线程可能仍在读取时执行无保护写入是有问题的。当另一个读取线程将看到另一个线程的写入时，它是未定义的。因此，当一个线程调用`reset()`指针时，可能不会在另一个线程中重置指针，因为 shared_ptr 实例本身是共享的。

如果你想要某种线程安全，你必须使用两个共享指针实例。然后，当然，重置其中一个不会释放对象，因为另一个线程仍然具有对它的引用。通常这种行为是有意的。

但是，我认为更大的问题是您滥用了 shared_ptrs。使用 shared_ptrs 的指针并在堆上分配 shared_ptr（使用 new）是非常罕见的。如果你这样做，你就会遇到想要避免再次使用智能指针的问题（你现在必须管理 shared_ptr 的生命周期）。也许先查看一些关于智能指针及其用法的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:40:25.283

为了你好，我会诚实的。

您的代码正在做很多事情，几乎所有事情都是无用和荒谬的。

```
typedef shared_ptr<Foo>  FooPtr;    
FooPtr                  *gPtrToFooPtr    // global variable 
```

指向智能指针的原始指针，取消了自动资源管理的优势，并没有解决任何问题。

```
void read()
{
    FooPtr a = *gPtrToFooPtr;
    // do useful things (read only)
} 
```

`a`没有以任何有意义的方式使用。

```
{
    FooPtr b = ...
    b.reset();
} 
```

`b.reset()`在这里没用，`b`反正快要被毁了。`b`在这个函数中没有任何目的。

恐怕你不知道自己在做什么，智能指针是干什么用的，怎么用`shared_ptr`，怎么做 MT 编程；因此，您最终会得到一堆荒谬的无用功能，无法解决问题。

**简单地做简单的事情**怎么样：

```
Foo f;

// called before others functions 
void init() {
    // prepare f
}

// called in many threads {R1, R2, ... Rn} in parallel
void read()
{
    // use f (read-only)
}

// called after all threads {R1, R2, ... Rn} have terminated
void read_and_drop()
{
    // reset f
} 
```

`read_and_drop()` **在可以保证其他线程没有读取**之前不能调用**`f`。**

 *** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T12:27:45.193

对您的编辑：

为什么不`reset()`先调用 global`shared_ptr`呢？

*   如果您是最后一个访问该对象的人，则可以将其删除，然后`shared_ptr`在堆上删除该对象。
*   如果其他线程仍在使用它，则将 ref 计数减一，并将全局 ptr 与指向的（仍然存在的）对象“断开连接”。然后，您可以安全地删除`shared_ptr`堆上的 ，而不会影响任何可能仍在使用它的线程。**

# javascript - 确保您已经定义了所有需要的变量

> ID：11087516
> 
> 赞同：0
> 
> 时间：2012-06-18T16:56:38.257
> 
> 标签：javascript

得到“确保你已经定义了所有需要的变量。” 在这个 Code Academy Javascript 脚本中。

```
// add a parameter called hourOfDay to the function
var taxiFare = function (milesTraveled, hourOfDay) {
  var baseFare = 2.50;
  var costPerMile = 2.00;
  var nightSurcharge = 0.50; // 8pm to 6am, every night
  var costs = baseFare + (costPerMile * milesTraveled);
  if (hourOfDay > 20 || hourOfDay < 6) 
    costs = costs + nightSurcharge
  end
  return costs
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:58:02.980

您需要修复`if`语句中的语法：

```
if (hourOfDay > 20 || hourOfDay < 6) {
    costs = costs + nightSurcharge;
} 
```

Javascript 使用大括号来识别代码块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:33:20.453

javascript中没有保留字“end”。这就是为什么它要求您定义变量。在 javascript 中，if 语句应使用花括号来指示它们包含的内容。

# c# - 将powershell对象另存为xml并在c#中加载

> ID：11087517
> 
> 赞同：5
> 
> 时间：2012-06-18T16:56:39.723
> 
> 标签：c#, xml, powershell, dataset

我有以下 powershell 脚本，它扫描一个位置并将文件详细信息添加到 xml 文件中，

```
Get-ChildItem -recurse c:\DATA | Select-Object  * , @{Name="Kbytes";Expression={ "{0:N0}" -f ($_.Length / 1Kb) }},@{Name="Age";Expression={ (((Get-Date) - $_.CreationTime).Days) }}  | Export-Clixml c:\DATA\Final.xml 
```

据我了解，这应该是.net 框架中的一个对象，假设是一个数据集？我想做的是将此对象加载到 ac# 应用程序中并将其用作数据集。

如何将对象加载到 c# 中的数据集中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:22:11.503

1.  添加对`System.Management.Automation.dll`程序集的引用。
2.  创建一个 PowerShell`Runspace`
3.  打开`Runspace`
4.  使用命令创建 PowerShell`Pipeline`对象`Import-CliXml`
5.  调用`Pipeline`
6.  关上`Runspace`

    ```
     var rs = RunspaceFactory.CreateRunspace();
        rs.Open();
        var pl = rs.CreatePipeline(@"Import-CliXml c:\DATA\Final.xml;");
        var result = pl.Invoke();
        rs.Close(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-05T10:18:31.843

更快的方法可能是：

- 对于列表

```
object[] xmlAsList =
     System.Management.Automation.PSSerializer.DeserializeAsList(System.IO.File.ReadAllText(@"C:\Users\batman\Desktop\myList.clixml")); 
```

- 对于通用对象

```
object importedObject =
 System.Management.Automation.PSSerializer.Deserialize(System.IO.File.ReadAllText(@"C:\Users\batman\Desktop\myObject.clixml")); 
```

然后，您通过以下方式管理结果：`System.Management.Automation.PSObject`使用`Members`属性。

# c# - IMul tiValueConverter 总是传入 DependencyProperty.UnsetValue 的列表

> ID：11087518
> 
> 赞同：0
> 
> 时间：2012-06-18T16:56:42.250
> 
> 标签：c#, .net, wpf, .net-3.5

我有一个滑块控件，它将选择列表中的一个元素。我需要显示所选元素的 ToString()。我遇到的问题是`values`我的`IMultiValueConverter.Convert`函数中的值总是有一个正确的值，`values[0]`但`values[1]`总是`DependencyProperty.UnsetValue`。我在绑定中做错了什么？

这是我的 XAML

```
<Window x:Class="VetWebConnectorWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:VetWebConnectorWPF"
        <!--Snip-->
        >
    <Grid>
    <!--Snip-->
        <GroupBox Grid.Row="1" Height="Auto" Header="Display configuration">
            <Grid>
                <!--Snip-->
                <Grid Grid.Row="1" Width="200">
                    <!--Snip-->
                    <Slider Name="sldrResoultion" Grid.Column="1" TickPlacement="BottomRight" Minimum="0" Maximum="{Binding ElementName=lstResoultions, Path=Count}" TickFrequency="1"
                                        IsSnapToTickEnabled="True"/>
                </Grid>
                <Label Name="lblResoultionDisplay" Grid.Row="2" HorizontalAlignment="Center">
                    <Label.Resources>
                        <local:ResoutionConverter x:Key="resoutionConverter" />
                    </Label.Resources>
                    <Label.Content>
                        <MultiBinding Converter="{StaticResource resoutionConverter}">
                            <Binding ElementName="sldrResoultion" Path="Value" />
                            <Binding ElementName="lstResoultions" />
                        </MultiBinding>
                    </Label.Content>
                </Label>
            </Grid>
        </GroupBox>
    </Grid>
</Window> 
```

这是我的 MainWindow 代码隐藏

```
namespace VetWebConnectorWPF
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            this.lstResoultions = new List<object>();

            AddResoution(new Resoultion(1024, 768));
            AddResoution(new Resoultion(1366, 768));
            AddResoution(new Resoultion(1280, 960));
            AddResoution(new Resoultion(1440, 900));
            AddResoution(new Resoultion(1280, 1024));
            AddResoution(new Resoultion(1600, 900));
            AddResoution(new Resoultion(1400, 1050));
            AddResoution(new Resoultion(1440, 1080));
            AddResoution(new Resoultion(1600, 1200));
            AddResoution(new Resoultion(1920, 1080));
            AddResoution(new Resoultion(1920, 1200));
            AddResoution(new Resoultion(2048, 1152));
            AddResoution(new Resoultion(2560, 2048));
            AddResoution(new Resoultion(3200, 2048));

            this.lstResoultions.Add("Full Screen");

        }

        readonly List<object> lstResoultions;

        //(Snip)
    }
} 
```

这是 Resoultion.cs 的代码

```
namespace VetWebConnectorWPF
{
    public class Resoultion
    {
        public Resoultion(int width, int height)
        {
            this.Width = width;
            this.Height = height;
        }

        public int Width { get; private set; }
        public int Height { get; private set; }

        public override string ToString()
        {
            return string.Concat(this.Width, " x ", this.Height);
        }
    }

    class ResoutionConverter : IMultiValueConverter
    {
        public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (values == null || values.Length != 2)
                return null;

            double? idx = values[0] as double?;
            object[] resoultions = values[1] as object[];

            if (!idx.HasValue || resoultions == null)
                return null;

            return resoultions[System.Convert.ToInt32(idx.Value)];
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:12:05.553

我在您的 XAML 中没有看到任何名为`lstResoultions`

[DependencyProperty.UnsetValue](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.unsetvalue.aspx)是 WPF 的属性系统使用的，而不是`null`表示该属性存在，但它没有值

# java - JOGL 小程序与 WebGL

> ID：11087520
> 
> 赞同：6
> 
> 时间：2012-06-18T16:56:47.047
> 
> 标签：java, javascript, opengl, webgl, jogl

在 applet 中使用 JOGL 与在 WebGL 中使用是否有任何显着的技术差异？我想特别关注两件事：

*   性能：使用 WebGL 渲染 3D 是否有更多的开销？
*   功能：两者对 OpenGL 标准的支持程度如何？

我正在开发一个 3D Web 应用程序，我想更多地了解两者的技术能力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:53:52.227

我认为纯 GL 渲染速度会相似，特别是如果您在少量调用中完成大量工作。对于其他代码，Java 往往比 Javascript 快大约 5-10 倍：http: [//blog.j15r.com/2011/12/for-those-unfamiliar-with-it-box2d-is.html](http://blog.j15r.com/2011/12/for-those-unfamiliar-with-it-box2d-is.html)

还有其他区别：

*   JOGL 要求您可以运行小程序/签名的 webstart（我不确定在大多数浏览器上是否仍然默认启用）
*   WebGL 需要启用 WebGL 的浏览器（现代 Chrome、Safari 或 Firefox，不适用于 IE）....
*   WebGL 基于 GL ES 2.0，即不支持 GL 固定功能管道。这意味着您需要实现自己的着色器或使用诸如three.js 之类的库

# linux - lua和env lua的区别？

> ID：11087521
> 
> 赞同：0
> 
> 时间：2012-06-18T16:56:47.507
> 
> 标签：linux, lua

用其中任何一个启动程序文件有什么区别吗？

```
#!/usr/bin/env lua
#!/usr/bin/lua 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T16:59:46.493

```
#!/usr/bin/lua 
```

这指定了唯一允许运行的 Lua 是`/usr/bin`.

```
#!/usr/bin/env lua 
```

这将运行用户从`$PATH`环境变量中获得的 Lua。

# android - 膨胀的列表视图项目不显示为按下

> ID：11087524
> 
> 赞同：0
> 
> 时间：2012-06-18T16:56:57.943
> 
> 标签：android, button, view

抱歉，如果这太琐碎或以前已发布过。现在，我正在处理这个问题。我有一个 ListView 组件，我在其中创建一组项目，每个项目都是膨胀的布局。当我点击一个项目时，**onClick**的行为是完整的，听众正在做他们的工作，但 ListView 没有在按钮中显示“按下状态”。下图显示了我正在寻找的内容：

![在此处输入图像描述](../Images/ad6d9cf9322f308f7e46ef7722dc28db.png)

有没有人有提示给我？我已经检查并尝试了几件事： 1\. android:state_focused="true" 2\. android:state_pressed="true" 3\. setClickable(true)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:31:12.920

您必须手动将样式应用于列表项的状态。因为，您正在创建自己的列表项视图而不是 android 列表项视图。因此，您必须提供特定的样式来显示不同的状态。使用选择器为列表项设置样式。我在这里提供了一些示例代码，

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_focused="false"
        android:drawable="@drawable/list_item_gradient" />

    <!-- Even though these two point to the same resource, have two states so the drawable will invalidate itself when coming out of pressed state. -->
    <item android:state_focused="true" android:state_enabled="false"
        android:state_pressed="true"
        android:drawable="@drawable/list_selector_background_disabled" />
    <item android:state_focused="true" android:state_enabled="false"
        android:drawable="@drawable/list_selector_background_disabled" />

    <item android:state_focused="true" android:state_pressed="true"
        android:drawable="@drawable/list_selector_background_transition" />
    <item android:state_focused="false" android:state_pressed="true"
        android:drawable="@drawable/list_selector_background_transition" />

    <item android:state_focused="true"
        android:drawable="@drawable/list_selector_background_focus" />

</selector> 
```

在列表视图中

`<ListView android:id="@android:id/list" android:layout_width="fill_parent" android:layout_height="fill_parent" android:listSelector="@drawable/list_selector_background" />`

# wireless - Wireshark 中格式错误的 radiotap 标头

> ID：11087528
> 
> 赞同：1
> 
> 时间：2012-06-18T16:57:11.280
> 
> 标签：wireless, wireshark

我已经设置了一个实验来使用两台笔记本电脑测量无线通信参数。我正在使用编程为发射器的一台笔记本电脑（使用 Broadcom BCM 4331 接口卡的 Macbook Pro）和另一台笔记本电脑（使用英特尔公司迅驰 Ultimate-N 6300 接口卡的戴尔 Latitude E6410）在监视器接口上将自定义数据包注入网络，编程为接收器嗅探网络以查找自定义注入的数据包并报告接收信号强度、传播延迟等参数...传输工作正常，我能够在接收端获取注入的数据包。

但是，当我使用 Wireshark 使用使用 airmon-ng 创建的监视器接口分析传入数据包时，无线电分路标头似乎格式不正确。这对所有数据包都是一样的。

另外，为什么现在在 Radio Tap 详细信息中显示 Noise 参数？

谁能帮我解决这个问题？

![Wireshark 中格式错误的无线电分接头头](../Images/ab85b336f2171e1db9e41e55bd94d47e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T23:28:54.253

由于例如驱动程序错误，标头很可能*格式不正确。*（即，笔记本电脑上迅驰适配器的 Linux 驱动程序中的错误。）

不幸的是，Wireshark 没有提供任何格式错误的迹象*，*因此很难诊断出这个问题。

我刚刚检查了 Wireshark 主干的更改，为格式错误的 radiotap 标头添加专家信息；如果您可以尝试构建当前的 SVN 主干头并查看它报告的内容，这可能表明标头有什么问题。

问题*可能*是 radiotap 标头中的长度字段错误。

如果当您说“还有，为什么现在在收音机点击详细信息中会显示噪声参数？” 你的意思是“为什么在无线电抽头详细信息中***没有***显示噪声参数？”，长度字段太短可以解释 - 存在位图表示存在噪声参数，但标题字段指定的长度不够大包括噪声参数，因此当 Wireshark 尝试获取该字段时，它发现它运行超过了 radiotap 标头的末尾，并报告了一个问题。

此外，这也*可以*解释为什么其中几个帧上的 802.2 LLC 标头看起来是假的 - 如果 Wiretap 跳过 radiotap 标头中指定的长度以找到 802.11 标头，并且将其置于例如噪声参数，它尝试将其分解为 802.11 标头，并尝试将 802.11 标头之后的内容分解为 802.2 标头，它们都可能是伪造的。

# python - 在本地 GAE 服务器上运行烧瓶时出错 [Errno 13]

> ID：11087529
> 
> 赞同：3
> 
> 时间：2012-06-18T16:57:11.907
> 
> 标签：python, google-app-engine, flask

尝试在 Windows 上的 GAE 开发服务器上运行 Kamal Gill 的[flask-appengine-template 。](https://github.com/kamalgill/flask-appengine-template "烧瓶应用引擎模板")尝试获取页面时出现此错误。已经尝试重新安装 Python 和 App Engine。通过谷歌搜索找不到任何类似的问题。帮助我，StackOverflow，你是我唯一的机会。

```
2012-06-18 19:36:29 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py', '--admin_console_server=', '--port=8081', 'C:\\Users\\Roman Levin\\Documents\\webapps\\kamalgill-flask-appengine-template-c409e3c\\src']"
C:\Program Files (x86)\Google\google_appengine\google\appengine\api\search\search.py:232: UserWarning: DocumentOperationResult._code is deprecated. Use OperationResult._code instead.
  'Use OperationResult.%s instead.' % (name, name))
C:\Program Files (x86)\Google\google_appengine\google\appengine\api\search\search.py:232: UserWarning: DocumentOperationResult._CODES is deprecated. Use OperationResult._CODES instead.
  'Use OperationResult.%s instead.' % (name, name))
WARNING  2012-06-18 16:36:31,108 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
WARNING  2012-06-18 16:36:31,325 datastore_file_stub.py:518] Could not read datastore data from c:\users\romanl~1\appdata\local\temp\dev_appserver.datastore
INFO     2012-06-18 16:36:31,421 dev_appserver_multiprocess.py:647] Running application dev~myflaskonappengineapp on port 8081: http://localhost:8081
INFO     2012-06-18 16:36:31,421 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8081/_ah/admin
ERROR    2012-06-18 16:39:41,960 wsgi.py:189] 
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\application\__init__.py", line 11, in <module>
    import urls
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\application\urls.py", line 11, in <module>
    from application import views
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\application\views.py", line 20, in <module>
    from forms import ExampleForm
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\application\forms.py", line 11, in <module>
    from flaskext import wtf
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\flaskext\__init__.py", line 1, in <module>
    __import__('pkg_resources').declare_namespace(__name__)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\pkg_resources.py", line 2646, in <module>
    working_set = WorkingSet()
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\pkg_resources.py", line 397, in __init__
    self.add_entry(entry)
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\pkg_resources.py", line 412, in add_entry
    for dist in find_distributions(entry, True):
  File "C:\Users\Roman Levin\Documents\webapps\kamalgill-flask-appengine-template-c409e3c\src\pkg_resources.py", line 1694, in find_on_path
    for entry in os.listdir(path_item):
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 620, in __call__
    raise OSError(errno.EACCES, 'path not accessible', path)
OSError: [Errno 13] path not accessible: 'c:\\python27\\dlls'
INFO     2012-06-18 16:39:42,016 dev_appserver.py:2904] "GET / HTTP/1.1" 500 - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:51:57.403

我从未使用过 Kamal Gill 的 repo，但我通常使用[开花的 Flask GAE 骨架](https://github.com/blossom/flask-gae-skeleton)。它更容易使用。简单地说，更改应用标识符，将你的谷歌应用引擎指向 gae 文件夹，你基本上就设置好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:39:15.683

有同样的问题。使用 64 位 python 修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T19:52:15.533

很高兴看到我没有疯。大约两周前，我在尝试使用完全相同的模板时遇到了同样的错误。最后，由于我刚开始使用 Python，我实际上又回到使用以下资源自己拼凑它，而不是使用预先构建的模板。您是否偶然在 virtualenv 中运行它？我还没有正式写出这一切，但是使用以下资源，我能够让 Flask、GAE 和 Eclipse/PyDev 在 Windows 上很好地运行。

**2.6 说明** [http://forum.codecall.net/topic/60323-python-on-google-app-engine-creating-blog-engine/](http://forum.codecall.net/topic/60323-python-on-google-app-engine-creating-blog-engine/)

**将 GAE 项目从 2.6 迁移到 2.7** [http://blog.notdot.net/2011/10/Migrating-to-Python-2-7-part-1-Threadsafe](http://blog.notdot.net/2011/10/Migrating-to-Python-2-7-part-1-Threadsafe)

# java - 无法在 Google App Engine (Java) 中保留对象数据

> ID：11087531
> 
> 赞同：1
> 
> 时间：2012-06-18T16:57:20.380
> 
> 标签：java, eclipse, google-app-engine, persistence, jdo

我正在尝试保留我的对象，但是当我查看开发控制台时，并未设置对象上的所有属性。有些是空的，有些是缺失的。出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:57:22.000

我花了一个下午把头发扯在这个上面，我觉得我以前经历过这个。我在这里发帖，希望如果我再次犯同样的错误，我会找到这个......

对我来说，问题是 Eclipse 中的一个设置，它在私有字段上插入了“final”关键字。虽然这对于大多数 java 对象（具有您认为不可变的字段）来说是一个好主意，但在这里并不好，因为最终成员不会被持久化到数据库中。包含一个 setter 将阻止 eclipse 插入“final”关键字，但这很糟糕，因为您正在传达这个字段是可变的想法。我只需要在 Eclipse 中禁用该保存操作。

# android - Android沿移动精灵生成背景

> ID：11087537
> 
> 赞同：1
> 
> 时间：2012-06-18T16:57:32.717
> 
> 标签：android, image, background

我的问题是逻辑如何适用于不断生成对象的游戏背景，例如，猪正在滚下山，山上是树木和玉米，在猪到达屏幕尽头之前，地图必须添加更多背景，这样他就不会翻过世界末日^^

如果我不清楚，请告诉我，我会尝试解释更多。

# apache-flex - 为什么我的班级不被识别？

> ID：11087541
> 
> 赞同：1
> 
> 时间：2012-06-18T16:57:49.160
> 
> 标签：apache-flex, oop, actionscript, mxml

当我尝试使用 Flexbuilder 运行以下 mxml 文件时，我收到错误消息

**1046：未找到类型或不是编译时常量：AlertDataObject。**

此代码来自 main.mxml 文件

```
<?xml version="1.0" encoding="utf-8"?>
 <mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" 
layout="vertical" 
horizontalAlign="center" 
verticalAlign="middle"
xmlns:components="components.*" 
xmlns:ConferenceRequestForm="components.core.ConferenceRequestForm.*"
xmlns:ConferenceHomeScreen="components.core.ConferenceHomeScreen.*"
xmlns:ConferenceLoginForm="components.core.ConferenceLoginForm.*"
xmlns:debug="components.debug.*"
xmlns:RandomUserMaker="components.debug.RandomUserMaker.*"
xmlns:RandomConferenceMaker="components.debug.RandomConferenceMaker.*"
initialize="initializeApplication();" 
creationComplete="openConferenceHomeScreen();">

<mx:Script>
    <![CDATA[

        import flash.events.MouseEvent;

        public function debugButtonHandler(event:MouseEvent):void{

        userCredentials.logIn('admin', 'admin', "John", "Admin", 7, 99,0)

        openReportsForm(); 

        }

    ]]>
</mx:Script>

<mx:Button label="Debug Button" id="debugButton_btn" click="debugButtonHandler(event);" enabled="true" visible="false"/>

<RandomConferenceMaker:RandomConferenceMaker id="rcm" visible="false"/>
<RandomUserMaker:RandomUserMaker id="rum" visible="false"/>

<mx:Script source="../classes/ConferenceApp_action.as"/> 

</mx:Application> 
```

这是**ConferenceApp_action.as文件的顶部，其中包含大部分应用程序逻辑，包括导入到定义失败****AlertDataObject**的类的类。

```
//Built-In Classes
import mx.managers.PopUpManager;

//events
import mx.events.CloseEvent;

//custom events
import classes.AlertDataObject; 
```

这是**ConferenceApp_action.as**文件中创建错误的行。

```
private function showChoiceWindow(data:AlertDataObject):void{
  .
  .
  .
} 
```

这是 AlertDataObject 类。

```
package classes
{

public class AlertDataObject
{

    /****************
    Constants
    ****************/
    static public var TITLE_ALERT:String = "Alert";
    static public var TITLE_CONFIRM:String = "Please Confirm";
    static public var TITLE_DEBUG:String = "Debug";

    static public var TITLE_SUCCESS:String = "Success";
    static public var TITLE_FAILURE:String = "Failure";
    static public var TITLE_ERROR:String = "Error";

    /****************
    Properties
    ****************/
    private var __title:String;
    private var __text:String;

            .
            .

    /****************
    Getters / Setters
    ****************/
    public function get title():String{

        return __title;

    }

            .
            .
            .

    /****************
    Constructor
    ****************/
    public function AlertDataObject($text:String, $title:String="Alert", $yesFunction:Function=null, $yesFunctionArguments:Object=null, $noFunction:Function=null, $noFunctionArguments:Object=null, $dataProvider:Object=null, $icon:Class=null){

        //store basic props
        __title = $title;
        __text = $text;

        //store confirm props
        __yesFunction = $yesFunction;
        __yesFunctionArguments = $yesFunctionArguments;
        __noFunction = $noFunction;
        __noFunctionArguments = $noFunctionArguments;

        //store dataProvider object
        __dataProvider = $dataProvider;

        //store misc. props
        __icon = $icon;

    }

} 
```

}

为什么 Flex 不能正确看到 AlertDataObject 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:43:50.343

我从您导入`ConferenceApp_action.as`文件的方式猜测包含`AlertDataObject`该类的类目录存储在项目的根目录中。如果是这种情况，请尝试将 classes 文件夹移动到创建 main.mxml 文件的 src 目录。默认情况下，这是使用 Flex Builder 进行项目设置的主要源文件夹，也是编译器查找自定义类的位置。

请注意，您可以更改默认源文件夹或在项目属性对话框中的 flex 构建路径选项下指定其他源文件夹，但在您的情况下，我认为您不需要执行其中任何一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T01:52:23.453

我敢打赌，您的 ConferenceApp_Action.as 文件或 main.mxml 文件中存在语法错误，导致无法完全编译。本质上，您所做的是“包含”而不是使用适当的类，并且在执行此操作时不会收到很好的错误消息。可能是因为 Flex 团队忘记了他们为人们做这件事敞开了大门（这不是一个很好的做法）。

IMO，你很幸运，你遇到了任何类型的编译错误。我曾经继承了一个使用这些类型包含的项目，其中开发人员忘记将一些文件添加到版本控制中。我没有收到一条错误消息——它只是默默地编译失败​​。

我的建议是至少使用 Flex 团队考虑的那种类型的 OOP（换句话说，适当的类文件），并让编译器的全部重量帮助你。如果做不到这一点，请尝试将指向 .as 文件的脚本标签移到另一个脚本标签上方。甚至确保所有导入语句都在同一个脚本块中。

FWIW，我相信在 Flex 框架的内部有一些以“$”开头的变量，这个前缀的含义是“这些是我们正在推送到后台并覆盖的 Flash Player 定义的原始变量/方法用我们自己的版本。” 我不认为这是您的意图，查看您的代码，但如果是这样，那么以这种方式命名变量并没有错。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T18:17:53.070

在您提供的代码中，您实际上并没有实例化 AlertDataObject 类。因此，编译器不会编译它，并且您在运行时看不到它。可能导致问题的另一件事是在使用 actionscript 时使用 PHP 编码约定。我认为我从未尝试过以“$”开头的变量名，但至少它违背了所有好的动作脚本实践，最多可能会导致您遇到的奇怪的运行时问题.

# callback - 钩子和回调有什么区别？

> ID：11087543
> 
> 赞同：43
> 
> 时间：2012-06-18T16:57:54.793
> 
> 标签：callback, hook

通过阅读一些文字，尤其是iOS文档中关于委托的内容，所有的协议方法都被称为自定义委托对象需要实现的**钩子。**但是其他一些书，将这些**钩子**命名为**回调**，它们之间有什么区别？它们只是名称不同但机制相同吗？除了 Obj-C 之外，其他一些编程语言，比如 C 也中了**钩**，和 Obj-C 的情况一样吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-18T17:12:05.120

这里的术语有点模糊。一般来说，两者都试图达到相似的结果。

通常，*回调*是您向 API 注册的函数（或委托），以便在处理流程中的适当时间调用（例如，通知您处理处于某个阶段）

*钩子*传统上意味着更通用的东西，用于修改对 API 的调用（例如修改传递的参数，监视调用的函数）。在这个意义上，它通常比 Java 等高级语言所能达到的水平低得多。

在*iOS的上下文中，**钩子*这个词的含义与上面的*回调*完全相同

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-02-21T20:32:00.317

让我加入一个 Javascript 答案。在 Javascript 中，**回调**、**钩子**和**事件**都被使用。按照这个顺序，它们都是比另一个更高层次的概念。

不幸的是，它们经常被不当使用，从而导致混乱。

## 回调

从控制流的角度来看，**回调**是一个函数，通常作为参数给出，您在从函数返回之前执行该函数。

这通常用于需要等待 I/O 的异步情况（例如 HTTP 请求、文件读取、数据库查询等）。您不想等待同步`while`循环，因此可以同时执行其他功能。

当您获取数据时，您（永久）放弃控制并使用结果调用回调。

```
function myFunc(someArg, callback) {
    // ...
    callback(error, result);
} 
```

因为回调函数可能是一些尚未执行的代码，并且您不知道调用堆栈中函数上方的内容，所以通常不是抛出错误，而是将错误作为参数传递给回调。有*错误优先*和*结果优先的*回调约定。

在 Javascript 世界中，大多数回调已被[Promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises)取代，并且从 ES2017+ 开始，您可以本机使用[`async/await`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)来摆脱富含回调的意大利面条式代码，并使异步控制流看起来像是同步的。

有时，在特殊的级联控制流中，您在函数中间运行回调。例如，在您运行的[Koa（Web 服务器）中间件](https://koajs.com/#cascading)或[Redux 中间件](https://redux.js.org/advanced/middleware)`next()`中，它会在堆栈中的所有其他中间件都运行后返回。

## 挂钩

钩子并不是一个定义明确的术语，但在 Javascript 实践中，当您希望客户端（API/库用户、子类等）在控制流中定义明确的点采取可选操作时，您可以提供钩子。

因此，钩子可能是您在某个时间点调用的某个函数（例如，作为参数或类方法），例如在数据库更新期间：

```
data = beforeUpdate(data);

// ...update

afterUpdate(result); 
```

通常的重点是：

*   挂钩可以是可选的
*   钩子通常是等待的，即它们在那里修改一些数据
*   每个钩子最多调用一个函数（与事件相反）

React 在其[Hooks API](https://reactjs.org/docs/hooks-intro.html)中使用了钩子，它们——引用它们的定义——“是让你“钩入”React 状态和生命周期特性的函数”，即它们让你改变 React 状态，并且每次在某些情况下运行自定义函数部分状态发生变化。

## 活动

在 Javascript 中，事件在特定时间点*发出*，客户端可以订阅它们。事件发生时调用的函数称为**侦听**器- 或者为了增加混淆，**回调**。我更喜欢避免使用“回调”这个词，而是使用“监听器”这个词。

这也是一种通用的 OOP 模式。

在前端有一个用于事件的[DOM 接口](https://developer.mozilla.org/en-US/docs/Web/API/Event)，在 node.js 中有[EventEmitter](https://nodejs.org/api/events.html)接口。[在ReactiveX](http://reactivex.io/)中实现了一个复杂的异步版本。

事件的属性：

*   可能有多个侦听器/回调订阅（将执行）同一事件。
*   它们通常不接收回调，只接收一些事件信息并同步运行
*   **通常，与 hooks 不同**的是，它们不用于修改事件发射器控制流中的数据。发射器不在乎“是否有人在听”。它只是使用事件数据调用侦听器，然后立即继续。

示例：当数据流开始或结束、用户单击按钮或修改输入字段时发生事件。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-18T17:21:38.083

这两个术语非常相似，有时可以互换使用。钩子是库中的一个选项，用户代码可以链接一个函数来改变库的行为。库函数不需要与用户代码同时运行；就像在析构函数中一样。

回调是一种特定类型的钩子，用户代码将在其中启动库调用，通常是 I/O 调用或 GUI 调用，它将控制权交给内核或 GUI 子系统。然后，控制进程在中断或信号上“回调”用户代码，以便用户代码可以提供处理程序。

从历史上看，我见过用于中断处理程序的钩子和用于 GUI 事件处理程序的回调。我还看到当例程是静态链接和动态代码中使用回调时使用的钩子。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-08T17:27:33.230

已经有两个很好的答案，但**我想再提供一个证据，术语“钩子”和“回调”是相同的，并且可以互换使用**：FreeRTOS 支持“钩子”一词，但将“回调”视为等价词术语，当他们说：

> 空闲任务可以选择调用应用程序定义的**挂钩（或回调）**函数 - 空闲挂钩。
> 
> 滴答中断可以选择调用应用程序定义的**挂钩（或回调）**函数 - 滴答挂钩。
> 
> 由 heap_1.c、heap_2.c、heap_3.c、heap_4.c 和 heap_5.c 实现的内存分配方案可以选择包含一个 malloc() 失败**挂钩（或回调）**函数，该函数可以配置为在 pvPortMalloc() 时调用永远返回 NULL。

来源：[https ://www.freertos.org/a00016.html](https://www.freertos.org/a00016.html)

# java - Python 服务器只从 Java 客户端接收一个字符？

> ID：11087544
> 
> 赞同：4
> 
> 时间：2012-06-18T16:57:55.167
> 
> 标签：java, python, macos, tcp, client-server

我正在尝试实现一个简单的 Python 服务器来与一些简单的 Java 客户端代码进行通信，但是我遇到了一些奇怪的行为。我正在运行 Mac OSX 10.7.2。

客户端代码：

```
import java.io.*;
import java.net.*;

public class JavaClient {
    public static void main(String argv[]) throws Exception {
        String sentence;
        String modifiedSentence;
        BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));
        Socket clientSocket = new Socket("localhost", 9999);
        DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
        BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        sentence = inFromUser.readLine() + '\n';
        outToServer.writeBytes(sentence);
        modifiedSentence = inFromServer.readLine();
        System.out.println("FROM SERVER: " + modifiedSentence);
        clientSocket.close();
    }
} 
```

服务器代码：

```
import SocketServer

class PythonServer(SocketServer.BaseRequestHandler):

    def handle(self):
        # self.request is the TCP socket connected to the client
        self.data = self.request.recv(1024).strip()
        print "{} wrote:".format(self.client_address[0])
        print self.data
        # just send back the same data, but upper-cased
        self.request.sendall(self.data.upper())

if __name__ == "__main__":
    HOST, PORT = "localhost", 9999

    # Create the server, binding to localhost on port 9999
    server = SocketServer.TCPServer((HOST, PORT), MyTCPHandler)

    # Activate the server; this will keep running until you
    # interrupt the program with Ctrl-C
    server.serve_forever() 
```

奇怪的是，当我第一次实例化服务器并从 Java 客户端发送请求时，一切都按预期运行：

Java 控制台：

```
test

FROM SERVER: TEST 
```

命令行：

```
127.0.0.1 wrote:
test 
```

但随后的请求会导致：

Java 控制台：

```
test

FROM SERVER: T 
```

命令行：

```
127.0.0.1 wrote:
t 
```

所以看起来我的服务器只接收到我的消息的第一个字符，尽管我的客户认为它正在发送整个消息。

更复杂的是，我创建了一个 Java 服务器和 Python 客户端，Java 客户端/服务器组合和 Python 客户端/服务器组合没有这个问题，但 Python 客户端/Java 服务器有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:06:41.823

在将套接字传递给之前禁用客户端上的[Nagle 算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)`DataOutputStream`：

```
clientSocket.noTcpDelay(true); 
```

这在网络带宽方面有些浪费，但如果这对您来说是个问题，我们也可以解决这个问题。

还有另一个潜在问题，这次是在您的服务器代码中，相当于[这个问题](https://stackoverflow.com/questions/1708835/receving-socket-python)的重复。

# php - 使用 SOAP 的 Web 服务，WSDL 不起作用 - PHP

> ID：11087546
> 
> 赞同：1
> 
> 时间：2012-06-18T16:58:07.087
> 
> 标签：php, web-services, soap, wsdl

我正在尝试访问发布伦敦黄金和白银定价的“免费”网络服务。

我找到了以下两个服务，但我无法让这些服务返回任何有用的数据。

我做错了什么还是服务器没有发布任何数据？有人知道任何其他“免费”的伦敦黄金和白银修复服务器可以工作吗？

客户代码：

```
<pre>
<?php
$c = new soapclient('http://www.restfulwebservices.net/wcf/LondonGoldFixService.svc?wsdl');
print_r($c->GetMarketData());
?>
</pre>
<br />

<pre>
<?php
$c = new soapclient('http://www.webservicex.net/londongoldfix.asmx?wsdl');
print_r($c->GetLondonGoldAndSilverFix());
?>
</pre> 
```

服务器输出：

```
 stdClass Object
    (
    [GetMarketDataResult] => stdClass Object
        (
            [Gold_AM_USD] => 0
            [Gold_AM_STG] => 0
            [Gold_AM_EUR] => 0
            [Gold_PM_USD] => 0
            [Gold_PM_STG] => 0
            [Gold_PM_EUR] => 0
            [Silver_CENTS] => 0
            [Silver_PENCE] => 0
            [Silver_EUR] => 0
            [Status] => Failed
        )
)

stdClass Object
(
    [GetLondonGoldAndSilverFixResult] => stdClass Object
        (
            [Gold_AM_USD] => 0
            [Gold_AM_STG] => 0
            [Gold_AM_EUR] => 0
            [Gold_PM_USD] => 0
            [Gold_PM_STG] => 0
            [Gold_PM_EUR] => 0
            [Silver_CENTS] => 0
            [Silver_PENCE] => 0
            [Silver_EUR] => 0
            [Status] => Failed
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:01:09.860

看起来服务器正在返回数据。都是零。您的肥皂代码正在运行。该网站必须返回错误数据或被破坏。

# performance - 转置有向图的成本？

> ID：11087548
> 
> 赞同：-1
> 
> 时间：2012-06-18T16:58:20.737
> 
> 标签：performance, algorithm, graph, computer-science

我试图通过在原始图上运行 DFS 来构造有向图的转置，然后在发现新节点时生成镜像的邻接列表。

这将是什么计算时间？我知道 DFS 需要 O(|V| + |E|) 但是构建邻接列表呢？通过DFS构建转置的邻接表需要多长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:37:37.770

如果您将 O(1) 项插入到图形中（假设您使用哈希表或哈希图进行顶点查找，或者如果您的顶点由整数表示，则使用数组），那么渐近运行时应该与 DFS 没有什么不同。

老实说，我认为您实际上不需要进行 DFS。我认为您可以遍历每个顶点的邻接列表，然后以这种方式添加边。运行时间仍然是 O(V+E)，所以理论上，这并不重要。

此外，如果您的图表示为边列表，那么我相信制作转置图只需 O(E)，但我想这需要连接图。

对不起，如果那里有太多额外的信息，我希望我能提供帮助！

# apache - index.php/argument not found - apache 的奇怪问题

> ID：11087549
> 
> 赞同：0
> 
> 时间：2012-06-18T16:58:26.630
> 
> 标签：apache, indexing, http-status-code-404

在 index.php 之后传递参数时，它显示 404 错误.. 它的 apache 错误不是 cms 但直接访问 index.php 没有问题

```
File does not exist: /home/me/web/test/index.php/a
File does not exist: /home/me/web/test/index.php/home
File does not exist: /home/me/web/test/index.php/contact 
```

问题与 mod_rewrite 无关，因为当 index.php 在 URL 中时，我遇到了同样的错误。

使用 .htaccess 和 mod_rewrite 并从 url 中删除 index.php 没有帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:59:55.557

您并没有完全清楚这些 URL 的来源，但从外观上看，您的 Web 服务器的[`AcceptPathInfo`](http://httpd.apache.org/docs/2.0/en/mod/core.html#acceptpathinfo)指令不是“打开”。

> 该指令控制是否接受或拒绝包含跟随实际文件名（或现有目录中不存在的文件）的尾随路径名信息的请求。PATH_INFO 环境变量中的脚本可以使用尾随路径名信息。

# javascript - jQuery每个都超出了功能

> ID：11087552
> 
> 赞同：1
> 
> 时间：2012-06-18T16:58:41.157
> 
> 标签：javascript, jquery, jqplot

我有一个[jqPlot](http://jqplot.com)图表，我想在其上添加链接，我相信我找到了一种使用数组的方法，例如`[[[1,2,"http://google.com"]],[[2,3,"http://yahoo.com]]]`，当我尝试通过 XML、jQuery 和 Ajax 加载它时，它并不能很好地工作。

我认为问题出`.each`在此代码中的条款中：

```
function getBars(xml)
{
var categoryid = 1;
var bars = [];
$(xml).find("category").each(
    function()
    {
        bars.push(loadBars(categoryid,$(this)));
        categoryid++;
    });
return bars;
}
function loadBars(categoryid,xml)
{
var bar = [];
var bars = [];
$(xml).find("bar").each(function()
{
    bar.push(parseInt(categoryid));
    bar.push(parseInt($(this).attr("size")));
    bar.push($(this).attr("link"));
    bars.push(bar);
});
    $("#debug").append("\nBAR:")
    debug2dArray(bars);
    return bars;
    } 
```

XML 看起来像：

```
<?xml version="1.0"?>
    <chart>
    <category>
    <bar size="20" link="http://google.com"/>
    </category>
    <category>
    <bar size="70" link="http://yahoo.com" />
    </category>
    </chart> 
```

[这是一个jsFiddle](http://jsfiddle.net/fwRSH/)

## 更新

将变量更新为非全局变量后，图表现在显示正确，但仍将两个相同的值添加到数组中。代码已更新以反映更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:03:09.593

我还没有消化你的整个代码，但是你正在做的一个真正致命的陷阱是在你的函数中使用尚未声明的变量`var`（我特别关注你如何`bar`在两个函数上使用你的变量） .

当您使用变量而`var`不像您在这里所做的那样声明它时，您将变量带到*全局可见性*。这意味着该变量与您的代码中任何地方（大多数）使用的变量相同。第`bar`一个功能相同`bar`，第二个功能相同。

当您的两个函数启动时，它所做的第一件事就是清除`bar`变量（即`bar = [];`）。由于它们共享`bar`引用，调用一个函数有效地抵消了另一个函数所做的事情。

这是你的意图吗？如果不是（或什至如此），您应该使用以下命令声明您的变量`var`：

```
var categoryId = 1, 
    bar = []; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:02:54.773

没有使用 声明任何变量`var`，尤其是`bars`数组。这导致它们是隐式全局的，并且每次调用时都会覆盖变量`loadBars`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T17:44:19.233

除了缺少 之外`var`，您还在`each`迭代器的末尾返回变量，而不是在函数的末尾。这是一个工作小提琴：http: [//jsfiddle.net/fwRSH/1/](http://jsfiddle.net/fwRSH/1/)

```
function loadBars(categoryid, xml) {
    var bar = [];
    var bars = [];
    $(xml).find("bar").each(function() {
        bar.push(parseInt(categoryid, 10));
        bar.push(parseInt($(this).attr("size"), 10));
        bar.push($(this).attr("link"));
        bars.push(bar);
        //$("#debug").append("\nBAR:"); //not defined in fiddle, commented out
        //debug2dArray(bars); //not defined in fiddle, commented out
    });
    return bars; //moved from end of "each" iterator to here.
}

function getBars(xml) {
    var categoryid = 1;
    var bars = [];
    $(xml).find("category").each(function() {
        bars.push(loadBars(categoryid, $(this)));
        categoryid++;
    });
    return bars;
}

$(document).ready(function() {
    var bars = [];
    $("div#barchart").css("background-color", "#F00");
    $("div#barchart").css("height", "200px");
    $("div#barhcart").css("width", "400px");
    //moved for debugging
    bars = getBars($('div#xmlDI'));
    /* returns:
     * [
     *     [
     *         [1, 20, "http://google.com"]
     *     ],
     *     [
     *         [2, 70, "http://yahoo.com"]
     *     ]
     * ]
     */
    $.jqplot("barchart", bars, {
        seriesDefaults: {
            renderer: $.jqplot.BarRenderer,
            rendererOptions: {
                fillToZero: true
            }
        },
        axes: {
            // Use a category axis on the x axis and use our custom ticks.
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: ['one', 'two'],
                autoscale: true
            },
            yaxis: {
                autoscale: true
            }
        }
    });
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T17:45:48.043

我不确定你希望你的图表是什么样子。因为一般而言，您提供给图表的数据是“正确”显示的。如果你用以下方式写它：

```
[
    [[1, 30, "http://google.com"], [2,0,""]],
    [[1,0,""],[2, 40, "http://yahoo.com"]]
] 
```

...它会给出完全相同的结果，该库只是假设未为特定系列提供的数据为 0，[这就是它在此处被视为可见的方式。](http://jsfiddle.net/Boro/fwRSH/2/)

由于您不喜欢这种方式，我的猜测是您在数据变量中犯了格式错误，[正如我们在这里看到的那样，“差距”已经消失。](http://jsfiddle.net/Boro/fwRSH/3/)

**因此，我认为以下是您所追求的格式：**

```
[[
    [1, 30, "http://google.com"],
    [2, 40, "http://yahoo.com"]
]] 
```

此外，当单击条形图的条时，您会[发现对问题的答案很有用](https://stackoverflow.com/a/10318192/613495)。在那里，您可以看到如何捕获点击以及如何打开 URL。由于我使用了一个全局 URL 数组，因此您只需要稍微采用它即可满足您的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T17:40:25.947

解析 XML 的代码：

```
var bars = [], cat = 0;
$.ajax({
  type: 'GET',
  url: 'plotlinks.xml',
  dataType: "xml",
  cache: true,
  success: function(data, textStatus, jqXHR) {

    $(data).find("category").each( function() {
      var barSet = [cat];
      $(this).find("bar").each(function() {
        var $elt = $(this);
        barSet.push([$elt.attr('size'),$elt.attr('link')]);
      });
      cat++;
      bars.push(barSet);
    });

    // bars is an array; each element is an array. 
    // The first element in the inner array is the 
    // category "index" (0,1,2,...). All other 
    // elements represent a link for that category. 
    // Those elements are arrays of [size,url].
    alert($.stringifyJSON(bars)); 
  }
}); 
```

生成的json：

```
[[0,
   ["20","http://google.com"]
 ],
 [1,
   ["70","http://yahoo.com"]
 ]
] 
```

# python - PyQt 应用程序在通过 sudo 运行时看起来不同

> ID：11087553
> 
> 赞同：1
> 
> 时间：2012-06-18T16:58:41.467
> 
> 标签：python, linux, pyqt4

我有一个 PyQt4 应用程序，以普通用户身份运行时看起来非常好（在 Ubuntu 12.04 上）。但是这个应用程序需要 root 访问权限才能绑定到低于 1024 的 TCP 端口，所以我使用这个技巧（[https://stackoverflow.com/a/5222710/95083](https://stackoverflow.com/a/5222710/95083)）在必要时以 root 身份重新启动。

但是，当我的应用程序现在运行时，它看起来很糟糕。我不确定是什么让它看起来那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:05:47.473

尝试 gksu/gksudo 而不是 sudo（[Ubuntu 帮助 - 关于图形 sudo](https://help.ubuntu.com/community/RootSudo#Graphical_sudo)）

# c# - 在linq中返回多个具有相同名称的xml子项

> ID：11087566
> 
> 赞同：1
> 
> 时间：2012-06-18T16:59:21.937
> 
> 标签：c#, xml, linq

我有以下 XML 并希望将所有“答案”子项作为列表返回

```
<quiz xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="quiz.xsd">
    <mchoice>
        <question>What is the capital city of Australia?</question>
        <answer>Sydney</answer>
        <answer correct="yes">Canberra</answer>
        <answer>Melbourne</answer>
        <answer>Gold Coast</answer>
    </mchoice>
    <mchoice>
        <question>Launceston is the second largest city in which Australian state?</question>
        <answer>Victoria</answer>
        <answer>New South Wales</answer>
        <answer correct="yes">Tasmania</answer>
        <answer>Western Australia</answer>
    </mchoice>
</quiz>

public class Question
{
    public string QuestionText { get; set; }
    public List<Answer> Answers { get; set; }

}
public class Answer
{
    public string Answer1 { get; set; }
    public string Answer2 { get; set; }
    public string Answer3 { get; set; }
    public string Answer4 { get; set; }
} 
```

我尝试了以下 linq 查询，但我被困在答案字段中

```
public IEnumerable<Question> GetAll()
    {
        var questions = from docs in _doc.Descendants("mchoice")
                        select new
                        {
                            QuestionText = docs.Element("question").Value,
                            Answers = docs.Descendants("answer").SelectMany(e=>e.Element("answer").Value)

                        };
        return questions;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:22:51.317

将您的课程更改为

```
public class Question
{
    public string QuestionText { get; set; }
    public List<string> Answers { get; set; }

} 
```

那么您的查询将是

```
var questions = from docs in _doc.Descendants("mchoice")
                        select new Question
                        {
                            QuestionText = docs.Element("question").Value,
                            Answers = docs.Elements("answer").Select(a=>a.Value).ToList()

                        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:30:49.237

我不太确定逻辑上您的实体结构是否正确。您似乎有一个 List 类型的 Answers 属性，每个答案实体又有 4 个（总是 4 个？）答案！

我想，像这样改变它会更有意义。

```
public class Question
{
    public string QuestionText { get; set; }
    public List<Answer> Answers { get; set; }

    public Question()
    {
        if (Answers == null)
            Answers = new List<Answer>();
    }

}
public class Answer
{
    public string Answer1 { get; set; }
} 
```

您可以通过阅读您的 XML 来编写一个返回问题列表（带有答案）的方法

```
public static IEnumerable<Question> GetAll(XElement elm)
{
    var allQA = new List<Question>();
    var mchoices = elm.Descendants("mchoice").ToList();
    foreach (var choice in mchoices)
    {
        var answers = choice.Descendants("answer").ToList();
        var qA = new Question { QuestionText = choice.Descendants("question").SingleOrDefault().Value };
        foreach (var answer in answers)
        {
            qA.Answers.Add(new Answer { Answer1 = answer.Value});
        }
        allQA.Add(qA);               
    }
    return allQA;
} 
```

我可以随时随地这样称呼它

```
XElement elm = XElement.Load(Server.MapPath(@"../YourFolder/sample.xml"));
//You can alternatively load from string/stream etc..
if (elm != null) 
{
  var questionList=GetAll(elm);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:04:48.053

尝试改变这个：

`Answers1 = docs.Descendants("answer").SelectMany(e=>e.Element("answer").Value)`

对此：

`Answers1 = docs.Descendants("answer").SelectMany(e=>e.Value)`

# sql - GAE 数据存储大量数据

> ID：11087570
> 
> 赞同：0
> 
> 时间：2012-06-18T16:59:40.420
> 
> 标签：sql, database, google-app-engine, mysqldump

**背景：**

我正在开展一个项目，该项目从一个大型 SQL 转储开始，我必须将其导入新数据库。这个转储是大约 1.5GB 的纯文本，所以信息量相当大。我的客户现在希望我使用 Google App Engine 及其数据存储区，我 (a) 不太喜欢，并且 (b) 不太适合 SQL 转储。在我遇到麻烦之前...

**问题：**

什么是可以有效处理大量数据（理想情况下成本更低）的云托管数据库解决方案？特别是，我可以将我的 SQL 转储原样导入到哪个数据库解决方案中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:09:30.250

您的客户是否有任何理由使用数据存储？如果您已经有了 SQL 转储，我认为使用GAE的[Google Cloud Sql会更容易。](https://developers.google.com/cloud-sql/)

# php - PHP 站点 - 作为服务 - 如何将其分离为模块或插件并易于集成

> ID：11087576
> 
> 赞同：0
> 
> 时间：2012-06-18T16:59:47.163
> 
> 标签：php, service, module, add-in

我正在创建一个 php 网站作为服务。我的客户向我支付年费，他们将在此期间使用此服务。

我的问题：我想提供几个功能。有些客户只需要某些功能。有些需要定制的功能。那么如何在编码时将其分离为模块或插件，使其易于集成到站点。

请指导我。

示例站点：Shiftcode.com 检查他们的 gpt 站点管理面板。

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:13:11.993

你可以看看[http://www.symfony-project.org/](http://www.symfony-project.org/)，一个非常好的 PHP 开发框架。它有一个很好的路由功能，可以满足您的需求。您将获得单元测试框架和许多其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:17:01.030

在决定开发如此复杂的应用程序之前，请先查看现有的应用程序，例如[WordPress Multisite/Network](http://wpcandy.com/presents/an-introduction-to-wordpress-multisite)

# c++-cli - 从 HBITMAP 创建位图 (.NET)

> ID：11087580
> 
> 赞同：1
> 
> 时间：2012-06-18T16:59:54.960
> 
> 标签：c++-cli, type-conversion, intptr, hbitmap

我正在使用 C++/CLI 并且我有一个 raw`HBITMAP`调用`hStrip`，我必须在 a 中显示它`PictureBox`，所以我找到了以下函数`System::Drawing::Image::FromHbitmap`，但是这需要我想知道在传递它之前`IntPtr`是否需要将我的 raw 转换`HBITMAP`为或者我是否需要`IntPtr`可以像这样通过它吗？

如果我需要转换，我应该如何转换？我还没有真正找到这种转换方式。不过，我确实找到了另一种方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:34:12.973

一个简单的演员就可以完成工作：

```
HBITMAP hBmp = NULL;
// Assign hBmp
//...
Bitmap^ bmp = Bitmap::FromHbitmap((IntPtr)hBmp);
DeleteObject(hBmp);  // okay to destroy now 
```

# ruby-on-rails - ActiveRecord 图表工具

> ID：11087583
> 
> 赞同：1
> 
> 时间：2012-06-18T17:00:07.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, charts, analytics

我想知道是否有任何 Rails 工具可以根据 ActiveRecord 日期自动生成图表，例如`created_at`用于显示每次创建的记录。我看到有 RailsMetrics，但没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:17:24.443

[我在admin_data](https://github.com/bigbinary/admin_data)工具中找到了我想要的东西。它是一个类似于 ActiveAdmin、RailsAdmin 等的工具，但我发现当您浏览记录时，您还会获得一个分析选项。例子：

![来自测试服务器的示例图表](../Images/776916a8788aace893de32deaa9193af.png)

# c++ - Xcode - 为“跳转到定义”附加第三方源代码

> ID：11087584
> 
> 赞同：1
> 
> 时间：2012-06-18T17:00:08.863
> 
> 标签：c++, xcode, eclipse-cdt

我的 C++ 项目依赖于几个开源第三方库。包含头文件和 .dylib 文件可以让我成功构建项目，并且在我自己的代码中的任何位置执行“跳转到定义”会将我带到正确头文件中的函数**声明**。

在 Eclipse CDT 中，我可以添加仅用于索引的库源代码，这样可以同时执行“跳转到声明”（到第三方头文件）和“跳转到定义”（到第三方 . cpp 文件）。

我也可以在 Xcode 中这样做吗？即“附上”第三方库的源码快速导航，构建过程不包含库源码？

我的猜测是从源代码构建第三方库并向我的项目添加依赖项是可行的，但鉴于我已经拥有 .dylib 文件并且可以构建我的项目，我强烈希望不必这样做。

# iis - IIS7 - URL 重写问题

> ID：11087585
> 
> 赞同：0
> 
> 时间：2012-06-18T17:00:09.083
> 
> 标签：iis, url-rewriting

我正在尝试重写一些网址，我过去曾这样做过，但由于某种原因，这次它不会坚持下去。这是规则：

```
 <rule name="Force HTTPS - Test.aspx" patternSyntax="ECMAScript" stopProcessing="true">
                            <match url="^Templates/Test\.aspx" />
                            <conditions>
                                <add input="{HTTP_HOST}" pattern="^my\.domain\.com$" />
                                <add input="{HTTPS}" pattern="^OFF$" />
                            </conditions>
                            <action type="Redirect" url="https://my.domain.com/Templates/test.aspx" />  
</rule> 
```

它应该采用[http://my.domain.com/Templates/test.aspx](http://my.domain.com/Templates/test.aspx)并重定向到**https://my.domain.com/Templates/test.aspx**。

不幸的是，无论我尝试什么，它都无法正常工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:07:16.860

我发现 IIS 被配置为在我尝试重定向的文件上强制使用 SSL。这意味着它甚至会在检查 url 重写规则之前返回 HTTP 403 错误。

希望对其他人有所帮助。

# javascript - Air Native 应用程序不会退出

> ID：11087592
> 
> 赞同：1
> 
> 时间：2012-06-18T17:00:26.227
> 
> 标签：javascript, air, air-native-extension

我正在尝试控制 Air 应用程序的退出，但无法让应用程序实际退出。我正在使用具有扩展桌面配置文件的本机进程，并在退出时尝试运行脚本。现在它似乎退出了，但该过程仍在运行。我必须通过任务管理器结束该过程。下面的代码：

这是退出事件的事件处理程序。

函数退出（）{

```
//remove the exit event handler
air.NativeApplication.nativeApplication.removeEventHandler(air.Event.EXITING,exit); 
//close the window
var winClosingEvent; 
var win = air.NativeApplication.nativeApplication.openedWindows[0]; 
closingEvent = new air.Event(air.Event.CLOSING,false,true); 
win.dispatchEvent(closingEvent); 
win.close();

//dispatch an exit event and force exit

var exitingEvent = new air.Event(air.Event.EXITING, false, false);
air.NativeApplication.nativeApplication.dispatchEvent(exitingEvent);    
air.NativeApplication.nativeApplication.exit(); 
```

}

# django - Heroku+django：在本地找不到配置变量

> ID：11087593
> 
> 赞同：1
> 
> 时间：2012-06-18T17:00:31.657
> 
> 标签：django, heroku

我正在heroku上尝试django，按照[官方教程](https://devcenter.heroku.com/articles/django#syncing_the_database)并停留在使用`creating celery and kombu tables locally`步骤`python manage.py syncdb`，出现以下错误：

> _cursor 中的文件“/my/virtual/path/django/db/backends/postgresql_psycopg2/base.py”，第 162 行引发 ImproperlyConfigured(“您需要在 Django 设置文件中指定 NAME。”) django.core.exceptions。配置不当：您需要在 Django 设置文件中指定名称。

问题是它找不到我通过heroku的配置变量为heroku设置的数据库。当我运行时`heroku config`，它会`DATABASE_URL`正确显示我的应用程序，但是当我尝试时：

> 如果 os.environ 中的 'DATABASE_URL'

在 python 解释器中，它返回`false`. 我还检查了，我的配置变量都没有在我的`os.environ`. 不应该自动添加vars吗？我之前的步骤是正确的。

我搜索并获得了很多检测 heroku 数据库的解决方案，但它们都是基于`DATABASE_URL`我的`os.environ`.

谁能指出我哪里出错了？任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:49:53.857

我相信本教程缺少有关如何在本地运行应用程序的一些步骤。如果你想在本地同步数据库，你应该用你机器上的数据库覆盖“默认”数据库。[这里](https://stackoverflow.com/a/11072426/59352)有一个与代码示例类似的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T03:13:25.423

访问此页面

[Heroku 数据库设置注入 - 如何设置我的 dev django 数据库？](https://stackoverflow.com/questions/11071579/heroku-database-settings-injection-how-do-i-setup-my-dev-django-database)

*ldiqual*的回答是正确的。

# javascript - Css float:right 100% 高度，图像底部对齐

> ID：11087595
> 
> 赞同：1
> 
> 时间：2012-06-18T17:00:34.510
> 
> 标签：javascript, jquery, html, css

`float: right`我在我的[网站](http://makestrange.co.uk/test/structures.html)上使用 a 。我想让那个 div 100% 的窗口高度减去 10px 的边距。我希望高度随页面调整大小。

我还希望其中的图像位于“容器”的底部 - 10px 填充。

我已经尝试过调整所有内容，并且确信代码中的某些内容存在冲突，但我无法解决。

感谢您提前提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:13:12.290

我建议你使用[绝对定位](https://developer.mozilla.org/en/CSS/position#Absolute_positioning)而不是浮动，你可以通过设置例如`top`同时扩展元素`bottom`。

`bottom`如果您将其设置为，绝对定位也适用于图像`10px`（其偏移父级已经是正确的容器，因为`position`除了默认值之外的任何其他`static`元素都会使该元素成为偏移父级）。

快速示例：

```
/* this makes your body take up the whole screen */
html, body { height: 100%; }
/* the positioning magic */
#right { width: 100px; position: absolute;top: 10px; bottom: 10px; right: 20px; } 
```

[jsFiddle 演示](http://jsfiddle.net/cNwNy/)

​<strong>更新：以及[更新的 jsFiddle](http://jsfiddle.net/cNwNy/1/)以显示将另一个元素放入容器并将其定位到底部的示例。

```
#image { position: absolute; bottom: 10px; left: 20px;  } 
```

# wso2 - wso2：寻找 XSLT 转换工作示例

> ID：11087597
> 
> 赞同：1
> 
> 时间：2012-06-18T17:00:52.250
> 
> 标签：wso2, wso2esb

有人可以向我指出一个使用代理服务 xslt 中介选项的 xsl 转换的工作示例。

基本上，我的要求是，我将有一个请求，我将在其中获取一些确定路由的数据，然后从所请求数据的其他元素中我必须重新构建soap请求以触发另一个bpel服务。

请让我知道更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:54:50.413

您可以使用 XSLT Mediator 在您的序列中很好地使用 XSLT 转换。

在您的序列文件中，您可以指定 XSLT 文件来转换请求。示例序列代码片段：

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="SampleInterceptorSequence">
   <in>
      <log level="full" category="DEBUG">
         <property name="sequence" value="inSequence-Request Before XSLT" />
      </log>
      <xslt key="RequestTranformerXSLT" />
      <log level="full" category="DEBUG">
         <property name="sequence" value="inSequence-Request After XSLT" />
      </log>
      <send>
         <endpoint key="MyActualServiceEPR" />
      </send>
    </in> 
```

您的 xslt 将包含为达到终点参考而形成的实际请求的样式。

此外，如果您可以查看这篇关于 Web 服务链接的精彩文章，以实时了解 xslt 中介。

[来自 WSO2 ESB 开发人员的 Web 服务链](http://wso2.org/library/articles/2011/01/wso2-esb-by-example-service-chaining)

希望这可以帮助。谢谢。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T18:10:00.510

找到下面的示例..

[http://wso2.org/project/esb/java/4.0.0/docs/samples/message_mediation_samples.html#Sample8](http://wso2.org/project/esb/java/4.0.0/docs/samples/message_mediation_samples.html#Sample8)

# sql - 更新：子查询返回超过 1 个值

> ID：11087598
> 
> 赞同：0
> 
> 时间：2012-06-18T17:00:55.743
> 
> 标签：sql

我遇到了问题，我不知道如何解决此查询。我有一个临时表，其中一列应包含另一列的计算值除以该列的组总和。我不知道如何写这个，以避免错误。

```
Declare @Temp Table
(           
    ZipCode char(5) Not Null,
    StateFacilityId varchar (50) Not Null,
    Cnt int Not Null,
    MarketShare float,
    Row int Not Null,
    Primary Key Clustered (ZipCode, StateFacilityId)
);

Insert Into @Temp (ZipCode, StateFacilityId, Cnt, Row)
Select d.ZipCode, d.StateFacilityId, Cnt = COUNT(*), Row = ROW_NUMBER()OVER(PARTITION BY ZipCode ORDER BY Count(*) DESC)
From [MarketShareIQData].[dbo].[tblServicesDetail] d    
Group By d.ZipCode, d.StateFacilityId
;

Update @Temp
Set MarketShare =(h.Cnt/(
                Select SUM(h.Cnt)
                From @Temp h
                Group By ZipCode
                ))
From @Temp h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:04:01.607

A`group by`将返回每组一行。我猜您正在寻找具有匹配邮政编码的单个组。你可以这样做：

```
update h
set     MarketShare = h.Cnt /
        (
        select  sum(h2.Cnt)
        from    @Temp h2
        where   h2.ZipCode = h.ZipCode
        )
from    @Temp h 
```

# java - android完成当前活动导致应用关闭

> ID：11087600
> 
> 赞同：9
> 
> 时间：2012-06-18T17:01:10.143
> 
> 标签：java, android, eclipse

我正在执行 maswebview 类，我只想完成这个活动。我尝试过`maswebview.this.finish()`，但执行时，应用程序已关闭。然后，如果我为选项卡内容设置了一个新视图，它会正确加载并且 webviewmas 会消失但只是一段时间，然后再次出现适合全屏显示。如何完全完成maswebview？谢谢你

```
public void onClick(View arg0) 
            {
                /*
                Intent intent = getIntent();
                intent.addFlags(Intent.FLAG_ACTIVITY_TASK_ON_HOME);
                startActivityForResult(intent, 1);
                Intent intentmas = new Intent (maswebview.this, mas.class);
                intentmas.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
                intentmas.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
                intentmas.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
                intentmas.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                View vista = getLocalActivityManager().startActivity("maswb", intentmas).getDecorView();
                setContentView(vista);  */

                maswebview.this.finish(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:22:52.277

在您调用 finish() 时，您的应用程序的堆栈中是否还有其他活动？如果不这样做，您将想要开始所需的活动，而不是完成当前活动。

但实际上在我看来，您正在尝试完成一些可以更简单的事情。您能否提供有关手头任务的更多信息以及您尝试使用的应用程序结构？

从您所说的来看，您似乎有选项卡式 UI，并且您正试图在其中一个选项卡中显示 web 视图，然后将其隐藏。

首先，我不明白您为什么要将 webview 放在单独的活动中。在我看来，您可以将它放在其中一个选项卡的布局中，然后调用 setVisibility(GONE) 来隐藏它。

第二 -**这很重要**- 看起来你正在尝试以*旧*方式实现选项卡 - TabWidget、TabHost 等。由于 Honeycomb 已发布，因此有更方便的方式来实现选项卡式 UI -[操作栏选项卡和片段](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)- 这种方法更方便，并且会让你的 webview 问题过时：有一个东西叫做[WebViewFragment](http://developer.android.com/reference/android/webkit/WebViewFragment.html)这基本上是一个 WebView，但更智能 - 它会以最少的努力处理自己的生命周期（即删除时暂停，添加时恢复）。研究 Fragments 需要付出一些努力，但这是非常值得的。您可以获得用于 pre-Honeycomb android sdks 的 Fragments API 作为静态库 - 它称为 android-support-v4，您可以在 Android SDK Manager 中下载它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:52:57.510

你在叫“maswebview.this.finish();”吗？在新活动开始之前？

此外，如果您想在不存在旧 Activity 的情况下启动这个新 Activity，那么您可以将 android:nohistory="true" 添加到 manifest.xml。这将导致当前活动成为队列中的唯一活动。看[这里](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)

您需要为我们提供更多信息，以便更好地了解到底发生了什么。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:45:02.307

试试下面的代码

```
@Override
        public void onBackPressed() {
        if(childView != null && parentLayout.getChildCount()==2){
            childView.stopLoading();
            parentLayout.removeViewAt(parentLayout.getChildCount()-1);
            if(webView.getVisibility() == View.GONE)
                webView.setVisibility(View.VISIBLE);
        }else{          
            super.onBackPressed();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:43:27.640

您是否有启动此活动的父活动？如果是，请确保在启动 maswebview 后不调用 finish()，这样父活动将保留在堆栈中。一旦 maswebview 退出，就会为您的父活动调用 onResume。

# php - 奇怪的 SQL 错误 IIS 7

> ID：11087601
> 
> 赞同：3
> 
> 时间：2012-06-18T17:01:09.783
> 
> 标签：php, sql, codeigniter, iis-7

我最近不得不将以下 SQL 修改为：

```
$this->db->select('StaffMembers.Id AS StaffMembers_Id, Contacts.AssociatedStaffMember_Id');
$this->db->join("StaffMembers", "Contacts.AssociatedStaffMember_Id=StaffMembers.Id");                   
$q1 = $this->db->get_where($this->contacts_table, 'Contacts.AssociatedStaffMember_Id ='.$ContactId);
$s = $q1->row_array(); 
```

然而，当我登录时，它显示一个旧的 SQL：

```
A Database Error Occurred
Error Number:

Invalid column name 'Contact_Id'.

SELECT Contacts.Id, StaffMembers.Id AS StaffMember_Id 
FROM StaffMembers JOIN Contacts ON Contacts.Id=StaffMembers.Contact_Id 
WHERE Contacts.Id =161 
```

我已经重新启动了 mssql 服务器，刷新了 memcached 和 iis7，但它仍然显示旧查询。不知道，到底为什么要这样做，有什么想法吗？

发现了问题，控制器类中似乎有一些重复的 SQL（当不应该有的时候！）

已修复 - 问题已解决。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:00:39.280

这是否以任何方式解决了问题？

```
$this->db->select('StaffMembers.Id AS StaffMembers_Id, Contacts.AssociatedStaffMember_Id');
$this->db->join("StaffMembers", "Contacts.AssociatedStaffMember_Id=StaffMembers.Id");  
$this->db->where('Contacts.AssociatedStaffMember_Id', $ContactId);
$q1 = $this->db->get($this->contacts_table);
$s = $q1->row_array(); 
```

您之前的代码使用的是 get_where，我不能 100% 确定是否可以混合使用。

`$this->db`在运行此代码之前，您是否有一个基础类来操作该类？

加夫

# javascript - navigator.geolocation.getCurrentPosition() 不起作用

> ID：11087604
> 
> 赞同：0
> 
> 时间：2012-06-18T17:01:16.493
> 
> 标签：javascript, google-maps-api-3, geolocation

我正在尝试使用地理位置获取当前位置的纬度和经度。直到最近，极其相似的代码还在工作，我不知道它为什么停止工作。它不再设置变量*latitude*或*longitude*。当我浏览 js 代码时，getCurrentPosition() 方法被跳过，我不知道为什么。奇怪的是，如果我在 getCurrentPosition() 方法中放置一个警告框，它将正确获取并显示纬度和经度......我不知道为什么会这样。

```
var gl;
try {
    if (typeof navigator.geolocation === 'undefined'){
        gl = google.gears.factory.create('beta.geolocation');
    } else {
        gl = navigator.geolocation;
    }
} catch(e) {}

var latitude;
var longitude;

if (gl) {
    gl.getCurrentPosition(
        function (position) {
            latitude = position.coords.latitude;
            longitude = position.coords.longitude;
            //alert("got the lat & long - lat=" + latitude + ", lng=" + longitude);
        },
        function (error) {
            alert("Error getting geolocation:" + error);
        }
    );
} else {
    alert("Geolocation services are not supported by your web browser.");
} 
```

然后我继续使用 Google Maps API 在地图上设置一些标记。

非常感谢，

彼得

**编辑**

这里 JSFiddle 上的代码显示了奇怪的行为：

[http://jsfiddle.net/JtmCV/](http://jsfiddle.net/JtmCV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:02:57.860

我刚刚尝试了您的 jsfiddle，它运行良好（Win 7 上的 Chrome 19），所以我不明白为什么它会导致问题。

话虽如此，我强烈建议改用 use`navigator.geolocation.watchPosition`而不是`navigator.geolocation.getCurrentPosition`. 我最近在地理定位系统上做了一些工作，发现`getCurrentPosition`可以返回不可靠的缓存位置，即使您使用 options 参数指定一个较低的`maximumAge`值。

我的最新版本在以下情况之一为真后停止手表：

*   第五名已归还
*   精度在100m以下
*   手表开始时间超过 30 秒

# eclipse - EGit 需要 org.eclipse.team.core

> ID：11087606
> 
> 赞同：31
> 
> 时间：2012-06-18T17:01:25.477
> 
> 标签：eclipse, egit

安装 EGit 时出现此错误：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：EGit Import Support 2.0.0.201206130900-r (org.eclipse.egit.import.feature.group 2.0.0.201206130900-r) 缺少要求：EGit Import Support 2.0.0.201206130900-r (org.eclipse.egit.import. feature.group 2.0.0.201206130900-r) 需要 'org.eclipse.team.core 3.6.100' 但找不到

我想它需要将基本团队模块​​添加到 Eclipse，但我找不到下载。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-19T09:23:00.937

“EGit 导入支持”功能需要 Eclipse 3.8、4.2 或更高版本。只需取消选中该复选框，安装即可。

请参阅此处了解该功能：[http ://wiki.eclipse.org/EGit/New_and_Noteworthy/2.0#Support_for_Eclipse-SourceReferences_manifest_headers](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.0#Support_for_Eclipse-SourceReferences_manifest_headers)

# sitecore - 用于整体工作流程审批的自定义 sitecore shell 工具

> ID：11087607
> 
> 赞同：2
> 
> 时间：2012-06-18T17:01:28.363
> 
> 标签：sitecore, sitecore6, sitecore-workflow

我想知道为 sitecore shell 创建一个简单的自定义功能区控件的文档。

我要解决的问题是管理员应该能够强制所有子项递归地被批准到某个工作流状态（而不是手动批准每个子项），但我们目前不知道有什么方法可以实现这一点。

为了解决这个问题，我们希望以编程方式强制项目通过工作流状态（触发相应的命令），但我们需要一种理智的方式让管理员与之交互，明智的选择是 sitecore shell 中的自定义事物，但我们不是不确定实现这一目标有多容易。

这个问题有什么推荐的读物吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:29:38.283

尽管本文声称是为 Sitecore 5.3 编写的，但同样的步骤也适用于 6.x。**注意**：它需要访问 SDN：[如何在 Sitecore v5.3 中创建功能区按钮](http://sdn.sitecore.net/Scrapbook/How%20to%20create%20a%20ribbon%20button.aspx)

这篇文章的要点是：

1.  创建一个继承自的新类`Sitecore.Shell.Framework.Commands.Command`
2.  将班级标记为`[Serializable]`。简单的命令可能不需要它，但现在添加它，这样您以后就不会遇到问题！否则按钮可能无法正常工作（这与管道有关 - 以及管道可能会停止和恢复的事实）
3.  覆盖`Execute()`，可能还有`GetIcon()`, `GetHeader()`, `QueryState()`, `GetClick()`,`GetSubmenuItems()`
4.  向文件添加新`<command name="…" type="...">`标签`/App_Config/Commands.config`
5.  登录 Sitecore 并切换到`core`数据库
6.  `/sitecore/content/Applications/Content Editor/Ribbons`在所需块中导航并创建（或复制）命令
7.  在字段中输入您的命令名称（步骤 4 中的名称）`"Click"`（并提供标题、图标、工具提示等）

# java - 在 Java 中从内存中执行可执行程序 (.exe)

> ID：11087612
> 
> 赞同：4
> 
> 时间：2012-06-18T17:01:47.927
> 
> 标签：java, windows, java-native-interface, jna

我想在 Windows 上执行内存中的程序。我不想将文件写入磁盘。我只想传入一个字节数组（这是我要执行的程序）作为参数。

我不够熟练，无法编写本机代码来执行此操作。同样，这应该是 Windows 原生的。

我要在内存中执行的程序不是 Java 程序。它是一个可执行文件（.exe）！可执行文件旨在在内存中读取和运行，而不是通过*Runtime.getRuntime().exec("example.exe");*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:07:05.103

我还不能评论，否则我会的。您应该能够在这里找到一些有用的信息，人们正在尝试使用 C++ 解决相同的问题。祈祷告诉你，你是想写一个跨平台的程序，还是只写 Windows 的程序？您对“.exe”的使用仅表示 Windows。

[来自内存缓冲区的 CreateProcess](https://stackoverflow.com/questions/305203/createprocess-from-memory-buffer)

理论上，您应该能够通过使用 Windows API 调用来完成这项工作，只要您不尝试制作这个跨平台。

# c# - 如何在 Windows 7 中设置显示器方向？

> ID：11087613
> 
> 赞同：7
> 
> 时间：2012-06-18T17:02:02.830
> 
> 标签：c#, screen-orientation

我想编写一些有趣的代码来在 Windows 7 上颠倒方向。请参阅我要控制的选项的屏幕截图。

* * *

![显示器方向](../Images/2757fa3c65a5365a826480265b3fcd6b.png)

* * *

这是我的代码：

```
class Program
{
    public const long WM_PAINT=0x0F;
    public const long WM_DISPLAYCHANGE=0x7E;

    [StructLayout(LayoutKind.Sequential, CharSet=CharSet.Auto)]
    public struct DEVMODE // taken from Win API
    {
        ...
        public System.Windows.Forms.ScreenOrientation dmDisplayOrientation;
    }

    [DllImport("user32.dll", CharSet=CharSet.Auto)]
    public static extern bool EnumDisplaySettings(string lpszDeviceName, int iModeNum, ref DEVMODE lpDevMode);
    [DllImport("user32.dll", CharSet=CharSet.Ansi)]
    public static extern int ChangeDisplaySettings(ref DEVMODE lpDevMode, int dwFlags);
    [DllImport("User32.Dll")]
    public static extern long PostMessage(IntPtr hWnd, long wMsg, long wParam, long lParam);

    static void Main(string[] args)
    {

        ScreenOrientation ori=ScreenOrientation.Angle0;
        DEVMODE mode=new DEVMODE()
        {
            dmSize=(short)Marshal.SizeOf(typeof(DEVMODE)),
            dmDriverExtra=0,
            dmDeviceName=new string(new char[32]),
            dmFormName=new string(new char[32]),
        };

        try
        {
            EnumDisplaySettings(null, -1, ref mode);
            if((mode.dmFields&0x80)>0)
            {
                ori=mode.dmDisplayOrientation;
            }

            mode.dmDisplayOrientation=ScreenOrientation.Angle270;
            int temp=mode.dmPelsWidth;
            mode.dmPelsWidth=mode.dmPelsHeight;
            mode.dmPelsHeight=temp;
            int ret=ChangeDisplaySettings(ref mode, 0);
            PostMessage(Process.GetCurrentProcess().Handle, WM_DISPLAYCHANGE, 0, 0);
            ...
        }
        catch
        {
        }
    }
} 
```

它运行，但不会产生任何影响。

参考代码：http: [//justlikeamagic.com/2009/05/21/changeing-display-settings-programmatically/](http://justlikeamagic.com/2009/05/21/changing-display-settings-programmatically/) 和[http://msdn.microsoft.com/en-us/library/ms812499.aspx#tbconchgscrn_chngingdisplay](http://msdn.microsoft.com/en-us/library/ms812499.aspx#tbconchgscrn_chngingdisplay)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:06:57.580

在 Windows 7 上，`ChangeDisplaySetting`存在已知的兼容性问题。解决方法是调用 WDK 函数：`SetDisplayConfig`.

[http://social.msdn.microsoft.com/Forums/en/windowsuidevelopment/thread/5bc2396d-1e0e-44fb-b73b-95f8dfc45684](http://social.msdn.microsoft.com/Forums/en/windowsuidevelopment/thread/5bc2396d-1e0e-44fb-b73b-95f8dfc45684)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:57:31.823

我已经开始了一些事情。

请看一下：[MultiMonitorHelper](https://multimonitorhelper.codeplex.com/)

它包含了 Win7 所需的结构，以便您可以调用 SetDisplayConfig 和其他函数。

一个实际的例子，如何将显示器旋转 90 度：

```
 int numPathArrayElements;
        int numModeInfoArrayElements;

        const QueryDisplayFlags pathType = QueryDisplayFlags.OnlyActivePaths;

        // query active paths from the current computer.
        // note that 0 is equal to SUCCESS!
        // TODO; HARDCODE MAGIC VALUES AWAY.
        if (CCDWrapper.GetDisplayConfigBufferSizes(pathType, out numPathArrayElements,
                                                   out numModeInfoArrayElements) == 0)
        {
            var pathInfoArray = new DisplayConfigPathInfo[numPathArrayElements];
            var modeInfoArray = new DisplayConfigModeInfo[numModeInfoArrayElements];

            // TODO; FALLBACK MECHANISM THAT HANDLES DIFFERENT VALUES FOR ZERO.
            if (CCDWrapper.QueryDisplayConfig(
                pathType,
                ref numPathArrayElements, pathInfoArray,
                ref numModeInfoArrayElements,
                modeInfoArray, IntPtr.Zero) == 0)
            {

                pathInfoArray[0].targetInfo.rotation = DisplayConfigRotation.Rotate90;
                CCDWrapper.SetDisplayConfig((uint) numPathArrayElements, pathInfoArray, (uint) numModeInfoArrayElements,
                                            modeInfoArray, SdcFlags.Apply | SdcFlags.UseSuppliedDisplayConfig);
            }
         } 
```

它现在是原始的，这意味着现在没有“C# 风格”API，但无论如何，您可以使用这些结构。

# php - 对 mysql 表进行重复数据删除但忽略空值

> ID：11087618
> 
> 赞同：0
> 
> 时间：2012-06-18T17:02:27.677
> 
> 标签：php, mysql

我有一个将 csv 文件上传到 mysql 数据库的 php 脚本。

数据库有几列。这些列中有一个“电子邮件”字段。我写了一些 mysql 来删除 email 列中包含重复值的行。下面是mysql：

```
 $sql = "CREATE TABLE new_table as SELECT * FROM auto WHERE 1 GROUP BY email";

mysql_query($sql, $conn);

$query = mysql_query("SELECT COUNT(*) FROM new_table");
list($number) = mysql_fetch_row($query);

$query = mysql_query("SELECT COUNT(*) FROM auto");
list($number2) = mysql_fetch_row($query);
$result = $number2 - $number;
mysql_query("DROP TABLE auto");
mysql_query("RENAME TABLE new_table TO auto"); 
```

该代码有效，它删除了重复值。

**问题：**

它删除不包含值的行。因此，它假定两个或多个空的电子邮件值是重复的，并删除它们是行。

**问题：**

如何告诉 mysql 忽略空值。

谢谢您的帮助。

**编辑**

我的数据库表在哪里。一张桌子。什么时候是我执行代码的时候。我计划放入一个 php 文件以按需执行。我期望的结果是一个没有重复电子邮件的 mysql 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:10:27.663

通过在电子邮件中允许 NULL 并添加 UNIQUE 约束，这样的事情将适用于一次性更改：

```
-- set empties to NULL
UPDATE tablename SET email = NULL WHERE LENGTH(email)=0;
-- drop all rows violating the UNIQUE constraint on email:
ALTER IGNORE TABLE tablename ADD UNIQUE (email); 
```

# java - 结束类实例的正确方法？

> ID：11087620
> 
> 赞同：0
> 
> 时间：2012-06-18T17:02:34.917
> 
> 标签：java, android, multithreading

在我的 Android 应用程序中，我有一个扩展类，`Thread`它在建立互联网连接（3G/WIFI）时运行。

加载应用程序时，如果建立了 Internet 连接，我会像这样实例化该类：

```
 MyThread thread = new MyThread(); //  (it calls its own start() method) 
```

在线程中，如果连接丢失，我想销毁`Thread`. 我被告知不要跑`finalize()`，我将如何摧毁它，这`thread == null`是真的？

* * *

编辑：我问的原因是，稍后，我想重新启动线程以防连接返回，并检查是否`(thread == null)`很容易。我可以只使用一个标志来指示线程需要重新启动或检查它是否被中断。感谢您迄今为止的有用评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:10:10.157

通常，您不会子类化`Thread`. 您创建一个`Runnable`，并将其传递给一个`Thread`对象，或者更好的是，一个`ExecutorService`.

但是您不必担心线程完成后的清理工作，它会由垃圾收集器自动处理。如果您希望自己的本地引用为空，只需自己将其清空，或者更好的是，不要坚持下去。

```
new Thread( new Runnable() {
    public void run() {
        // put your stuff here
    }
} ).start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:26:05.597

试试这个，

1.  A `thread of execution will live until it has finished executing its run() method`，然后它要么移动到`dead stat`e要么移动到`thread pool`。

2.  `run()`使用 . 控制方法总是更好`boolean variable`。

    例如：

    ```
     boolean isRunning = true;

       new Thread(new Runnable()

           {

       public void run()

          {

         while(isRunning)

             {

              // Keep doing your work here....

                   if (!isRunning){

                            break;
                        }

                  }

      } 
    ```

    `}).start();`

# c# - 如何在 ListBox 中选择多个选项？

> ID：11087621
> 
> 赞同：0
> 
> 时间：2012-06-18T17:02:39.193
> 
> 标签：c#, .net, listbox

我有一个`ListBox`关联到一个用户。用户需要能够选择一个或多个选项并将这些选项保存在 SQL 数据库中，但我只能保存一个选项。

当我创建我的表单时，我使用了“启用回发选项”并且在我的“选择模式”中我有：`multiple`.

这是我的代码：

```
//IN MY FORM

if (!IsPostBack)
{
    ClLinea_1 seleccion = new ClLinea_1();
    DataSet ds = seleccion.sqlSelectLinea_1();
    DataTable dt = ds.Tables[0];
    ListBoxLinea_1.DataSource = dt;
    ListBoxLinea_1.DataTextField = "descripcion";
    ListBoxLinea_1.DataValueField = "id_linea_1";
    ListBoxLinea_1.DataBind();
}

// IN MY BUTTON 
protected void btnInsertaLinea_1_Click(object sender, EventArgs e)
{
    ClLinea_1 inserta = new ClLinea_1();
    inserta.SqlSeleccionLinea_1(int.Parse(ListBoxLinea_1.SelectedValue.),int.Parse   
    (txtUsuario.Text));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:15:33.223

那么你需要确保 multiselect 属性设置为 true。

然后使用类似的东西。

```
foreach(var item in MyListBox.SelectedItems)
{
   int value;
   if (int.TryParse(item.ToString(), out value)
   {
      // insert to db here.
   }
} 
```

# java - MongoDB 和 JAVA - 使用正则表达式查询的逻辑或

> ID：11087628
> 
> 赞同：0
> 
> 时间：2012-06-18T17:03:02.780
> 
> 标签：java, mongodb

我正在尝试创建以下 SQL 查询的等效项：

```
Select * from X where a like 'a%' OR b like 'a%' 
```

我尝试了各种选项，但我不断收到以下错误：

```
falsecom.mongodb.MongoException: $or requires nonempty array 
```

有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:05:46.160

您可以使用 QueryBuilder 类使代码更具可读性：

```
 Mongo m = new Mongo();
    m.setWriteConcern(WriteConcern.SAFE);
    DBCollection c = m.getDB("test").getCollection("or-test");
    c.drop();

    c.insert(new BasicDBObject("a", "abba"));
    c.insert(new BasicDBObject("b", "abba"));
    c.insert(new BasicDBObject("a", "bbba"));
    c.insert(new BasicDBObject("b", "bbba"));

    Pattern pattern = Pattern.compile("^a");
    DBObject query = QueryBuilder.start().or(
            QueryBuilder.start("a").regex(pattern).get(),
            QueryBuilder.start("b").regex(pattern).get()
            ).get();
    System.out.println(c.find(query).count()); 
```

这将打印“2”。

# c++ - 当超过 12 个线程时，pthread_create 分段错误？

> ID：11087630
> 
> 赞同：2
> 
> 时间：2012-06-18T17:03:22.313
> 
> 标签：c++, multithreading, pthreads

我有一个 C++ 程序，它使用 t 个线程对从 0 到 n 的数字求和。N 和 T 作为命令行参数传递。我正在使用创建 pthread 的 for 循环和将主线程重新加入它们的第二个 for 循环。当我使用少于 11 或 12 个线程时，程序运行良好。例如，在输入 100 10 时，它返回 5050。当我使用超过 11-12 个线程时，它会导致分段错误并崩溃。我似乎无法弄清楚为什么。我的代码中有一些行用于调试，例如打印到提示符等。感谢任何提示！

```
int n = 0;
int t = 0;
unsigned long gsum = 0;
pthread_mutex_t mutexsum;

void *sum(void *Index)
{
    int index = (int)(int *) Index; 
    int threadSum = 0;
    int k;
    int lowerBound, upperBound; //used to find range of numbers to sum

    //printf("I am here: %d \n",index);

    if (index == t - 1) {
        lowerBound = (n/t)*(t-1);
        upperBound = n; 
    } else {
        lowerBound = (n/t)*index;
        upperBound = (n/t)*(index+1)-1;
    }

    for (k = lowerBound; k < upperBound + 1; k++) {
        threadSum = threadSum + k;
    }

    // Critical Section
    pthread_mutex_lock(&mutexsum);
    gsum = gsum + threadSum;
    pthread_mutex_unlock(&mutexsum);    

    pthread_exit((void*) 0);
}
int main(int argc, char* argv[]){
int i, k, j;
pthread_t sumThreads [t];

for(i = 1; i < argc; i++) {
    if(i == 1)
        n = atoi(argv[i]);
    if(i == 2)
        t = atoi(argv[i]);
}

if (n < 0 || t <= 0 || argc != 3) {
    printf("Invalid or missing parameters! \n");
    exit(0); 
}

for (k = 0; k < t; k++) {
    int nt = -1;    
    nt = pthread_create(&sumThreads[k], NULL, sum, (void*)k);
    printf("%d \n", nt);
}

for (j = 0; j < t; j++) {
    int rj = -1;    
    rj = pthread_join (sumThreads[j], NULL);
    printf("%d \n", rj);
}    

printf("Total Sum: %lu \n",gsum);
return 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:10:38.927

您已在程序顶部初始化`t`为零，因此这一行：

```
pthread_t sumThreads [t]; 
```

没有分配足够大的数组来保存线程标识符。因此，在存储标识符时存在缓冲区溢出，并且您正在读取`thread_join`循环中的缓冲区。

您正在使用一种称为*可变长度数组*（或 VLA）的功能，该功能在 1999 年标准修订版中成为 C 语言的一部分。C++ 没有采用 VLA，因此您使用的是编译器扩展。如果您希望您的代码与 C++ 兼容，则应使用向量。

```
std::vector<pthread_t> sumThreads;

// ...after t gets initialized
sumThreads.resize(t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:17:58.713

在 c/c++ 中，这种类型的代码不起作用：

```
int i=10:
int arr[i]; 
```

避免这样做。如果这种类型的代码有效，我们将不再需要 malloc.. 这正是您要实现的目标。

# iphone - 在 Core Data 中建模逆向关系

> ID：11087631
> 
> 赞同：0
> 
> 时间：2012-06-18T17:03:39.393
> 
> 标签：iphone, objective-c, ios, core-data, relationship

Core Data 中的关系只是让我感到困惑。我读了又读，但我就是不明白。我想我通常在阅读时感到沮丧并没有帮助。我想做一些非常简单的事情：

我有一个名为的实体`Pictures`和一个名为`User`. 我希望用户能够喜欢和标记图片中的其他人，因此每个`Picture`实体都有两种关系：

**图片实体：**

**UsersWhoLikedThePicture (to-many):**

```
Destination: User 
Inverse: Picture 
```

**UsersWhoAreTaggedInThePicture（对多）：**

```
Destination: User
Inverse: Picture 
```

但这在使用中造成了如此多的混淆，我什至无法开始描述。这是不一致的。有人喜欢一张图片会导致他们作为标记用户被删除，喜欢一张图片会导致您对所有其他图片的喜欢被删除。啊，真是一团糟……我的结构看起来还好吗？我将如何建模？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:36:01.093

除了**Matthias Bauch 的**回答，我可以给你一些提示来理解关系。

首先，当你处理 Core Data 时，你必须从对象的角度来思考。通过这种抽象，您可以将模型视为一个图，其中节点是您在模型中创建的实体，而关系是这些实体之间的链接。

现在，关于关系，它们可以是不同的类型：一对一、一对多和多对多。根据您拥有的关系类型，您可以在对象图中创建不同的链接。例如，如果 a`User`与 具有一对多关系`Picture`，则意味着（类型为`NSManagedObject`）的每个对象实例都有指向不同`Picture`s 的链接。`User`作为源，`Picture`s，作为目的地。

Core Data 使用反向关系来保持图形的一致性。特别是，当您处理删除规则时，它们很有用。

每个关系都有一个与之关联的删除规则。**级联**意味着如果你删除一个对象，比如`User`，Core Data 将为你删除`Picture`链接到它的对象（s）。如果有链接到它，**拒绝**不允许删除。**Nullify**意味着从 a到 a的链接将被破坏。这并不意味着对象被删除。就对象图而言，这意味着您不再有这些对象之间的链接。**无操作**意味着源被删除，目标始终存在并且它继续指向不再存在的对象。所以，不像**Nullify**`User``Picture`**`Picture``User`****，您需要手动断开该链接。如果不是，您可能会有图表不一致。尽量避免这种类型的关系。******

 ******如果你想知道别的，请告诉我。

**编辑**

查看[核心数据编程指南关系部分](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:35:29.767

我不知道这是否可能，但听起来你对两个关系使用了相同的反向目标。不要那样做。

正确的方法是这样的：

![在此处输入图像描述](../Images/876ed08e4e6866491d9c8fbbede10d1d.png)******

# javascript - Javascript appendChild 重置 IE 中其他页面元素的滚动

> ID：11087632
> 
> 赞同：1
> 
> 时间：2012-06-18T17:03:41.733
> 
> 标签：javascript, internet-explorer, appendchild

在 IE 中查看时，页面上的 div 滚动出现问题，在 Chrome 或 FF 中没有问题到正文或页面的任何其他部分，另一个 div 上的滚动重置回顶部。请您提供任何建议为什么会发生这种情况，也许与重绘/重排有关，但为什么只有 IE？

我注意到的另一件事可能是原因，它似乎只发生在位置固定的页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:47:01.140

Internet Explorer 9 在呈现时在我的页面上的一个元素上发现了一个死类引用。当它这样做时，它在这种情况下再次加载每个元素，而不保存它已经向下滚动了多远。

# http - nginx httpsubmodule 替换html内容

> ID：11087633
> 
> 赞同：2
> 
> 时间：2012-06-18T17:03:45.333
> 
> 标签：http, static, nginx

我刚刚遇到了 nginx httpsubmodule。我想这可能是什么可以帮助我做到这一点。

我有静态的 HTML 页面，我想在输出 html 中使用 uri 部分。例如，我的静态 URL 是[http://static.mydomain.com/pic1234.html](http://static.mydomain.com/pic1234.html)所以在页面中我想显示单词“pic1234”。我不能使用 javascript，因为我想为静态页面生成 HTML 元数据。

这可以做到吗？如果是这样怎么办？我找不到任何例子。我发现的只是这个[http://wiki.nginx.org/NginxHttpSubModule](http://wiki.nginx.org/NginxHttpSubModule)

请注意，我在为 nginx 服务器提供服务的静态文件上没有 cgi 或程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T21:36:25.083

我创建了一个简单的示例。使用此配置，nginx 将`__name__`html 页面中的 token 替换为请求的 html 的文件名（在本例中为“pic1234”）：

**nginx配置：**

```
server {
        listen   80;
        server_name localhost;

        root D:/Development/public;
        sub_filter_once off;

        location / {
            if ($uri ~* /(\w+)\.html$) {
               set $filename "$1";
            }
            sub_filter "__name__" $filename;
            try_files $uri $uri/ ;
        }
} 
```

**D:/开发/公共/pic1234.html:**

```
<html>
<head>
  <title>__name__</title>
</head>
<body>
  <h1>Contents of __name__:</h1>
</body>
</html> 
```

[你可以在这里](https://gist.github.com/2950723)找到要点

# objective-c - NSComboBoxCell 禁用打字？

> ID：11087636
> 
> 赞同：2
> 
> 时间：2012-06-18T17:04:07.227
> 
> 标签：objective-c, macos, user-interface, interface-builder, nscombobox

我有一个 NSComboBoxCell 允许用户从列表中选择一个项目，但目前它还允许用户键入他们想要的值。我还没有找到一种方法来使用户无法在组合框中输入内容（我只是希望他们能够选择列表中的内容）。这似乎应该相对简单（甚至是界面构建器选项），但如果是这样，我完全忽略了它。有任何想法吗？

注意：这是针对 OSX 而不是 iOS。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T17:44:13.553

您应该使用 NSPopUpButton 而不是 NSComboBox。NSComboBox 的全部意义在于它提供了一个用户可以输入的文本字段和一个弹出按钮，以便他们可以从菜单中快速选择选项，通常作为常用值的快捷方式。NSPopUpButton 只显示一个菜单。NSPopUpButtons 在 Interface Builder 中可用。

# c# - 将 MySQL 数据库列映射到 C# 对象？

> ID：11087640
> 
> 赞同：1
> 
> 时间：2012-06-18T17:04:21.593
> 
> 标签：c#, mysql, class, object, mapping

我正在做一个项目，我在一个类中保存了许多 C# 对象，如下所示：

```
public class DatabaseInfo
{
//Fields
public string info1 { get; set; }
public string info2 { get; set; }
public string info3 { get; set; }
} 
```

然后我有一个数据库，它将在一个名为“DatabaseInfo”的表中保存此类中包含的值。我只是希望能够轻松地将类对象映射到数据库字段，以便我可以将数据从对象传递到数据库，有人可以帮忙吗？

我也在使用 Visual Studio C# 和 MySQL。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:10:22.623

听起来您在谈论[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。

您可能想查看 Castle [ActiveRecord （基于](http://castleproject.org/)[nHibernate](http://nhforge.org/Default.aspx)构建）。

如果您使用的是 .NET 3.5 或 4.0，您也可以使用[.NET Entity Framework](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)。

就个人而言，我更喜欢 ActiveRecord，因为我喜欢能够使用代码中的属性来定义映射。Entity Framework 使用一个映射 XML 文件（可以使用 Visual Studio 的 GUI 设计器进行修改），我觉得它有点笨拙（EF 专家可能会先在这里介绍代码。）此外，Entity Framework 非常重 LINQ，这是如果你喜欢 LINQ，那就太好了。ActiveRecord 使用标准的[ActiveRecord 模式](http://en.wikipedia.org/wiki/Active_record_pattern)、HQL 或 LINQ - 这为您提供了更多的灵活性。

我不会详细介绍，因为我认为这些框架之间已经有很多在线比较。

I've used Entity Framework with both SQL Server and Oracle, and have found Oracle support generally works well, but probably doesn't get the same level of attention as SQL Server. NHibernate has dialects for pretty much any RDBS you can think of, and I've found it to be a very mature and solid platform regardless of what DB you use.

# actionscript-3 - 需要知道点击了哪个精灵

> ID：11087641
> 
> 赞同：0
> 
> 时间：2012-06-18T17:04:32.060
> 
> 标签：actionscript-3

这是我的游戏关卡选择器。你可以选择1-8级，我需要知道点击了哪一个。e.target 除了对象的名称之外并没有给我太多信息。我需要知道数组中的位置或图片的名称，以便知道要加载哪个级别。

```
package 
{
    import flash.display.Bitmap;
    import flash.display.DisplayObject;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class LevelSelector extends Sprite 
    {
        private var posX:int = 50;
        private var posY:int = 50;

        [Embed(source="../lib/one.png")]
        private var lvl1Class:Class;
        private var lvl1:Bitmap = new lvl1Class();

        [Embed(source="../lib/two.png")]
        private var lvl2Class:Class;
        private var lvl2:Bitmap = new lvl2Class();

        [Embed(source="../lib/three.png")]
        private var lvl3Class:Class;
        private var lvl3:Bitmap = new lvl3Class();

        [Embed(source="../lib/four.png")]
        private var lvl4Class:Class;
        private var lvl4:Bitmap = new lvl4Class();

        [Embed(source="../lib/five.png")]
        private var lvl5Class:Class;
        private var lvl5:Bitmap = new lvl5Class();

        [Embed(source="../lib/six.png")]
        private var lvl6Class:Class;
        private var lvl6:Bitmap = new lvl6Class();

        [Embed(source="../lib/seven.png")]
        private var lvl7Class:Class;
        private var lvl7:Bitmap = new lvl7Class();

        [Embed(source="../lib/eight.png")]
        private var lvl8Class:Class;
        private var lvl8:Bitmap = new lvl8Class();

        private var myArrayBitmaps:Array = new Array;
        private var myArraySprites:Array = new Array;

        private var yCounter:int = 1;

        public function LevelSelector():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }
        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            // entry point

            myArrayBitmaps.push(false, lvl1, lvl2, lvl3, lvl4, lvl5, lvl6, lvl7, lvl8);

            for (var i:int = 1; i < 9; i++) 
            {
                myArrayBitmaps[i].x = posX;
                myArrayBitmaps[i].y = posY;
                myArrayBitmaps[i].height = 50;
                myArrayBitmaps[i].width = 100;
                //myArrayBitmaps[i].name = "lvl_" + i + "";

                myArraySprites[i] = new Sprite();
                myArraySprites[i].addChild(myArrayBitmaps[i]);
                myArraySprites[i].x = posX;
                myArraySprites[i].y = posY;
                //myArraySprites[i].name = "lvl_" + i + "";

                stage.addChild(myArraySprites[i]);

                myArraySprites[i].addEventListener(MouseEvent.CLICK, function(e:MouseEvent):void {
                    removeThis(e, this);
                });

                posX += 100;
                yCounter += 1;
                if (yCounter == 5) {
                    posY += 100;
                    posX -= 400;
                }
            }
        }
        private function removeThis(e:MouseEvent, temp):void
        {
            //Need to know the number which was passed, 1-8
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:16:33.990

我会做这样的事情：

```
//...
private function init(e:Event = null):void 
{
    //...
    for (var i:int = 1; i < 9; i++) 
    {
        //...
        myArraySprites[i] = new Sprite();
        myArraySprites[i].addChild(myArrayBitmaps[i]);
        //...
        stage.addChild(myArraySprites[i]);

        myArraySprites[i].addEventListener(MouseEvent.CLICK, removeThis);

        }
    }
}
private function removeThis(e:MouseEvent):void
{
    var clickTarget:int = myArraySprites.indexOf(e.currentTarget);
    trace("Clicked sprite (id): " + clickTarget);
} 
```

# c++ - OpenCV VideoCapture 不能在 Visual Studio 之外工作

> ID：11087644
> 
> 赞同：1
> 
> 时间：2012-06-18T17:04:53.793
> 
> 标签：c++, visual-studio-2008, video, opencv

我正在使用`VideoCapture capture(filename);`从文件中加载视频。当我在 Visual Studio（发布模式）中运行该程序时，它工作得很好，可以像我期望的那样加载视频。当我在 Visual Studio 之外运行时（通过双击资源管理器目录中的图标），找不到视频并且捕获设备返回 null，即使它是相同的文件并且路径是硬编码和绝对的。

有任何想法吗？

**更新：**还尝试使用旧的 CvCapture* 和相同的错误。

**6/19 更新：**

这是一些示例代码。

```
#include "opencv2/highgui/highgui.hpp"
#include <iostream>

using namespace std;
using namespace cv;

int main(int argc, char** args)
{
    const char* filename = "c:/testvideo.wmv";

    //Check to see if we can see the file
    FILE* myFile = fopen(filename, "r");
    if (myFile)
        cout<<"0: Found file"<<endl;
    else
        cout<<"0: File not found"<<endl;

    //First use the openCV new way of doing it
    VideoCapture capture1(filename);

    if (capture1.isOpened())
        cout<<"1: Opened the video successfully"<<endl;
    else
        cout<<"1: Could not open the video"<<endl;

    //Second, try the old way
    CvCapture* capture2 = cvCaptureFromFile(filename);
    if (capture2)
        cout<<"2: Opened the video successfully"<<endl;
    else
        cout<<"2: Could not open the video"<<endl;

    //Pause
    char c;
    cin>>c;

    return 0;
} 
```

在以发布模式运行的 Visual Studio 中，我得到：

```
0: File Found
1: Opened the video successfully
2: Opened the video successfully 
```

从文件系统的 exe 运行（双击）我得到：

```
0: File Found
1: Could not open the video
2: Could not open the video 
```

我只编译过一次，所以目录中只有一个 exe...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:12:14.567

检查所需的所有 DLL 是否与您的 exe 位于同一文件夹中（或在 PATH 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:29:47.317

确保您使用绝对视频路径（如果没有，请尝试将视频复制到 exe 路径），如果您使用的是发布模式，则所有 dll 都必须处于发布模式。如果你给我一个小项目，也许我会解决这个问题。

# ios - PhoneGap 不通过 sqlLite 数据库的 setMetadata 备份属性？

> ID：11087647
> 
> 赞同：3
> 
> 时间：2012-06-18T17:05:07.727
> 
> 标签：ios, cordova, icloud

我们有一个应用程序因向 iCloud 提供太多数据而被拒绝。我们的应用程序是使用 PhoneGap 编写的；我已经升级到 1.8.1 以使用 setMetaData 函数，但我不知道如何使用 File API 来访问 sqlLite 数据库文件以将其设置为不备份（它的数据很适合离线使用使用但不是用户创建的）。

我可以创建数据库并访问文件系统，但我不知道从那里去哪里获取可以调用 setMetadata 的 FileEntry 对象。

```
 var shortName = 'myDB'; 
 var version = '1.0'; 
 var displayName = 'myDB'; 
 var maxSize = 265536; 
 theDB = openDatabase(shortName, version, displayName, maxSize);
 window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, fail); 
```

任何帮助将不胜感激！

# android - Google Play 更新描述和屏幕截图，但不更新应用 apk

> ID：11087649
> 
> 赞同：1
> 
> 时间：2012-06-18T17:05:18.233
> 
> 标签：android, google-play

大约 3 小时前，我在 Google Play 上激活了我的应用程序的新版本。关于它的信息已经更新（描述，截图）但apk还没有，继续旧版本。发生是正常的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T17:33:45.227

确保在上传 APK 后“激活”它。仅通过上传、更改描述并保存它不会更新 APK 本身，您只是在更新描述。

我通常做的是在上传一个新的 APK 后，我更新什么是新的部分，回去激活 APK，然后最后点击“保存”按钮。

在 Google Play 之前，APK 更新几乎是即时的。但最近，新的 APK 更新至少需要 1 到 4 小时才能在 Google Play 网站上更新。

*   更新：没关系，看到你在问题中“激活”了一个新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:12:26.540

更新 apk 需要更多时间，通常我见过 1-12 小时之间的任何时间，具体取决于您更新 apk 的时间。Apk 每天更新一到两次。如果您幸运地在内部流程更新之前更新了您的 apk，那么您将很快看到它更新。

另一方面，文本和图片只是呈现的 html，因此会立即更新。

我尝试在午夜 12 点之前或附近更新深夜，然后到第二天早上 9 点（伦敦时间），它会在 google play/market 中更新。

有时我在伦敦时间上午 8 点更新，反映在上午 10 点左右更新！

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T11:59:44.493

我有一个类似的问题，我的测试人员能够在 Play 商店中看到我的应用程序的生产版本，但看不到新的 Beta 版本更新，即使它是在几个小时前上传并作为更新提供给其他 Beta 测试人员。

我已将他作为 Beta 测试员添加到我的 Google 群组中，并在我的 Google Play 商店帐户中添加为测试用户。解决方案是强制停止 Play Store，然后重新启动它。

他一回到 Play 商店并搜索该应用程序，就可以使用 Beta 更新。

# svn - SVN 多分支标记

> ID：11087650
> 
> 赞同：3
> 
> 时间：2012-06-18T17:05:28.130
> 
> 标签：svn, tags, tortoisesvn, visualsvn-server

我们正面临 SVN 标记的问题。下图显示了我们的项目在 SVN 中是如何组织的。我们使用 Tortoise SVN 进行结帐，并使用 Visual SVN 作为我们的服务器。

![SVN 文件组织](../Images/f3ba14d6ea506dc05517f1da5b58d699.png)

这就是我们的项目在 SVN 中的组织方式

*   分支 A（主要工作分支）从主干分支出来，因此位于 Branches 文件夹中。这个分支中有不同的模块
*   分支 B（称为 RNS 的特定模块）稍后从分支 A 分支（这是为了新的增强）
*   请注意，两个分支都不是主干。
*   在Branch B开发过程中，引入了一些新文件，仅在Branch B上
*   分支 A 中的 RNS 模块没有进行任何开发。

我们想标记我们最新工作项目的一个版本，即包含 RNS 模块的分支 B 的分支 A。如何实现？

这就是我们从 SVN 签出最新工作区的方式

*   我们签出整个项目的 Branch A 版本。
*   完成后，我们右键单击 RNS 模块，然后使用 SVN 开关选项将其更新为该模块的分支 B(QUAL_RNS) 版本。
*   这构成了我们最新的工作设置（黄色）。
*   所以除了RNS模块之外的每个模块都属于Branch A。

我们尝试从父文件夹 –Folder-1（带有工作副本选项）创建此最新工作设置的标签/分支，但这只是创建了一个带有分支 A 的标签，不包括 RNS 模块的分支 B。

**更新：** 我在 Tortoise SVN 帮助菜单中看到了这个

*   您也可以在没有工作副本的情况下创建分支或标签。为此，请打开存储库浏览器。您可以将文件夹拖到新位置。您必须在拖动时按住 Ctrl 键以创建副本，否则文件夹将被移动，而不是被复制。
*   您也可以使用鼠标右键拖动文件夹。释放鼠标按钮后，您可以从上下文菜单中选择是否要移动或复制文件夹。当然，要创建分支或标签，您必须复制文件夹，而不是移动它。

所以我用工作副本尝试了这个。我创建了一个新的标签文件夹并按住 Ctrl 键将我的整个项目拖到它上面。这似乎可行，但这是否会占用额外的空间（是否会创建一个额外的副本，因为复制整个工作区大约需要 5 分钟（470MB））还是会创建到存储库内文件的正确链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:46:06.253

您必须按照[http://svnbook.red-bean.com/en/1.6/svn.branchmerge.tags.html#svn.branchmerge.tags.mkcomplex中的说明进行正常或](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.tags.html#svn.branchmerge.tags.mkcomplex)[稀疏](http://svnbook.red-bean.com/en/1.6/svn.advanced.sparsedirs.html)工作副本并使用工作副本制作标签

使用 TortoiseSVN（或命令行），您可以对完整存储库进行标记（从根目录执行），但不推荐这样做，因为它会干扰在标准布局中中继的某些工具的行为。

# android - 如何使用抖动进行页面导航

> ID：11087651
> 
> 赞同：-3
> 
> 时间：2012-06-18T17:05:30.877
> 
> 标签：android

我想开发一个使用手机摇晃浏览页面的应用程序。我的应用程序主页有 2 个按钮。我使用了这个基本代码，但我无法理解页面导航是如何完成的。请给我一个解决方案。

```
public class mainactivity extends Activity implements View.OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        View loginButton = findViewById(R.id.login);
        loginButton.setOnClickListener(this);
    }

    public void onClick(View v) {
        Animation shake = AnimationUtils.loadAnimation(this, R.anim.shake);
        findViewById(R.id.pw).startAnimation(shake);
        // Toast.makeText(this, "Wrong Password", Toast.LENGTH_SHORT).show();
        Intent my = new Intent(getApplicationContext(), path.class);
        startActivityForResult(my, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:32:17.627

你的问题有点含糊。你有任何错误吗？我看到你在我猜是密码 TextView 上使用摇动动画，但我没有看到任何加速度计分析。无论如何，假设您有一个名为`path`. 命名约定建议类应以大写字母开头（如 Activity、Animation、Button），因此我将您的类重命名为`Path`. 它应该如下所示：

```
public class Path extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.path);
        ...
    }
    ...
} 
```

现在在您的 Manifest.xml 文件中，您需要这个：

```
<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <activity
        android:name=".mainactivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".Path" /> <!-- Add me! -->
</application> 
```

最后，我将假设它`loginButton`是一个按钮，而不是通用视图。在这种情况下，您的`loginButton`代码应如下所示：

```
Button loginButton = (Button) findViewById(R.id.login);
loginButton.setOnClickListener(this); 
```

希望对你有帮助，祝你好运！

**添加**

以下是如何实现识别通用抖动运动的示例：

```
public class Example extends Activity implements SensorEventListener {
      private float mAccCurrent;
      private float mAccLast;
      private SensorManager mSensorManager;
      private int mShakeCount = 0;
      private TextView mText;

      // Sensor events
      public void onSensorChanged(SensorEvent event) {
          mAccLast = mAccCurrent;
          mAccCurrent = (float) Math.sqrt((Math.pow(event.values[0], 2) + Math.pow(event.values[1], 2) + Math.pow(event.values[2], 2)));
          float acceleration = mAccCurrent - mAccLast;
          mText.setText(acceleration + "");
          if(Math.abs(acceleration) > 2) {
              Toast.makeText(this, "Shake " + mShakeCount++, 1).show();
              // Navigate here
          }
      }

      public void onAccuracyChanged(Sensor sensor, int accuracy) {}

      // Activity events
      @Override
      public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);
          mText = (TextView) findViewById(R.id.text);

          mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
          mSensorManager.registerListener(this, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
          mAccCurrent = SensorManager.GRAVITY_EARTH;
      }

      @Override
      protected void onResume() {
          super.onResume();
          mSensorManager.registerListener(this, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
      }

      @Override
      protected void onStop() {
          mSensorManager.unregisterListener(this);
          super.onStop();
      }
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:53:56.473

公共类 ACTIVITY 扩展 Activity {

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            SensorManager mSensorManager;

            ShakeEvent mSensorListener;

            mSensorListener = new ShakeEvent();
            mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
            mSensorManager.registerListener(mSensorListener,
                mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_UI);

            mSensorListener.setOnShakeListener(new ShakeEvent.OnShakeListener() {

              public void onShake() {
                  Intent i = new Intent(Shake.this, NEWACTIVITY.class);
                  startActivity(i);
              }
            });
        }} 
```

# firefox - 有没有办法在 Ubuntu 11.10 上获得 Selenium 2.23？

> ID：11087660
> 
> 赞同：0
> 
> 时间：2012-06-18T17:06:23.497
> 
> 标签：firefox, selenium-webdriver, ubuntu-11.10

我将 Firefox 12 与 Selenium::WebDriver（2.22 版）一起使用，一切正常。然后，我愚蠢地通过 Ubuntu 每周更新升级到 Firefox 13。Selenium (2.22) 无法控制 FF 13，所以我出去买了 Selenium 2.23。然后我开始出现一些奇怪的行为，并认为这是我的硬盘驱动器。

愚蠢的错误 #2 我在我的主硬盘上重新安装了 Ubuntu 11.10（我以为我实际上是在备份驱动器上做的，但备份只保存了我的脚本的备份，而不是我的主硬盘的整个映像）。

所以我安装了 Ubuntu 11.10，我认为升级不会有什么大不了的（我相信我之前使用的是 11.04，但它可能是 10 左右）。在过去，升级 Ubuntu 版本已经为我解决了大多数问题，而不是新的问题。在 11.10 之前，我使用了命令

```
sudo gem update --system 
```

升级所有宝石并在我这样做时获得了 Selenium 2.23。现在在 11.10 中，我收到一条关于 update --system 已在 Debian blah 中删除的消息，blah，blah use apt-get。但是，apt-get 给我留下了 Selenium 2.22 而不是 2.23，而且 Selenium 仍然无法控制 FF 13。

我尝试猜测并使用了命令

```
sudo gem install selenium-webdriver-2.23.0 
```

希望以这种方式升级我的硒，但没有运气。

因此，在多次尝试获取 Selenium 2.23 后，我将 FF 降级为 12，并测试 FF 12 可以通过 IRB 控制。FF 12 立即将自身升级到 FF 13.0.1，现在我又回到了第一方。

有没有办法在 Ubuntu 11.10 上获得 Selenium 2.23？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:42:17.047

您可以使用以下命令安装特定版本的 Selenium：

```
pip install selenium==2.23.0 
```

要验证从 pip 安装的版本，请使用（将列出所有已安装的库及其版本号）：

```
pip freeze 
```

或仅列出硒：

```
pip freeze | grep selenium 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T19:09:39.117

你试过从[官方网站](http://seleniumhq.org/)下载 Selenium吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T20:44:03.723

尝试升级到独立的 selenium 库（在我的情况下为 jar），这可能会有所帮助，因为您可能会缺少更新依赖项。

# java - 如何使用简单序列化框架序列化变量但不反序列化它？

> ID：11087663
> 
> 赞同：3
> 
> 时间：2012-06-18T17:06:30.457
> 
> 标签：java, android, xml, xml-serialization, simple-framework

我目前在 Android 上使用 SimpleXML 将不可变对象序列化为 XML 文件。

我想使用构造函数注入来反序列化这个对象。

但是，并非所有`@Element`带注释的变量都作为参数传递给我的构造函数，因为有些是派生的（并基于其他参数在构造函数中设置）。因此`ConstructorException`在序列化时抛出 a ：“没有构造函数接受所有只读值”。

有什么方法可以确保 SimpleXML 将我的派生变量输出到 XML 文件（派生变量基于相当复杂的计算），但不尝试读取和设置该派生变量？

# ios - iOS Web 视图力大小

> ID：11087664
> 
> 赞同：0
> 
> 时间：2012-06-18T17:06:33.243
> 
> 标签：ios, uiwebview

我正在加载一个 100% div 宽度的网页，但加载的页面比它在我的 WebView 中的大小要大。

有没有办法告诉网页设备只有一定的尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:47:26.157

使用 html 元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scaleable=no" /> 
```

如果你想从 Obj-C 而不是 html 做类似的事情：

```
webView.scalesPageToFit = YES; 
```

# drupal - 使用特定词汇在 drupal 7 中创建内容类型

> ID：11087666
> 
> 赞同：0
> 
> 时间：2012-06-18T17:06:50.033
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我正在尝试制作一种内容类型，它是给定分类法中的一组词汇术语。考虑以下分类结构：

```
--Animal Name
----Taxonomic Class
----Number of legs
----Sound it makes
----Fun Fact 
```

我希望能够有一个看起来像这样的表单：

```
Animal Name: _____________
Taxonomic Class: _____________
Number of legs: _____________
Sound it makes: _____________
Fun fact: _____________ 
```

我遇到的问题是，当我创建我的内容类型时，我只能对整个分类有一个术语参考；没有一个词。

有没有办法将内容类型中的特定字段链接到分类法中的各个术语，或者是否有一个模块可以帮助实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:25:32.920

我不太了解您要完成的工作。但是，要创建一个 Animal 内容类型。

您可以创建一个名为 Taxonomic Class 的词汇表。然后设置一个内容类型，其中包含一个对分类学类的术语引用字段，一个表示腿数的整数字段。它发出的声音的文本字段字段和有趣的事实的文本区域。节点的名称将是动物名称。

这将做你需要的形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:14:08.350

以前从未使用过，但该模块已被 2,300 多个站点使用。看看：[http ://drupal.org/project/term_reference_tree](http://drupal.org/project/term_reference_tree)

# javascript - 带有自定义模板的 Ext Window

> ID：11087669
> 
> 赞同：0
> 
> 时间：2012-06-18T17:07:09.340
> 
> 标签：javascript, extjs, window, extjs4

我想创建一个弹出窗口，它会有一些自定义模板。基本功能是在标题中添加一些文本，然后是表单、进度条和按钮。问题是我的自定义模板在最后呈现并且并不真正适合弹出窗口。什么是正确的方法？任何地方都有可用的例子吗？我的缩短代码：

```
Ext.define('MyTooltip', {
    extend : 'Ext.window.Window',
    title: 'Mywindow',
    closeAction: 'hide',
    width: 300,
    height: 300,
    layout: 'fit',
    resizable: false,
    draggable: true,
    modal: true,
    items: [],
    data: {
        bar: 'foo'
    },
    tpl : Ext.create('Ext.XTemplate', '<div class="tooltip"><h1>{bar}</h1><div>{form}</div></div>', {compiled: true}),

    initComponent: function(){
        var me = this;

        //Create items
        var progressBar = Ext.create('Ext.ProgressBar', {
            text: 'Progress...',
            width: 250,
            animate: true,
            hidden: true,
            id: 'widget-progressbar'
        });       

        me.items = [
            Ext.create('Ext.form.Panel',{
                layout: {
                    type: 'vbox',
                    align: 'stretch'
                },
                border: false,
                bodyPadding: 10,

                fieldDefaults: {
                    labelAlign: 'top',
                    labelWidth: 100,
                    labelStyle: 'font-weight:bold'
                },
                items: [                   
                    {
                        width:          50,
                        xtype:          'combo',
                        mode:           'local',
                        value:          'Audi',
                        triggerAction:  'all',
                        forceSelection: true,
                        editable:       false,
                        fieldLabel:     'Cars',
                        name:           'cars',
                        queryMode:      'local',
                        store:          ["Audi", "BMW", "Citroen"]
                    },
                    progressBar
                ],

                buttons: [
                    {
                        text: 'Start',
                        handler: function() {
                        },
                        scope: this
                    }
                ]
            })
        ]      

        me.callParent(arguments);      
    }
}); 
```

* * *

编辑

在第一个答案之后尝试更改我的 initComponent 方法，但是如何将我的项目呈现为 tpl 或 html ？

```
initComponent: function(){
    (...)

    me.callParent(arguments);

    var tpl = Ext.create('Ext.XTemplate', 
        '<div>'+
            '<div><h3>Available cars</h3>'+
            '<div>{form}'+
            '</div>'+
        '</div>',
        {compiled: true}
    );

    this.html = tpl.apply({
        form: me.form.html
    });
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:52:00.283

我不会使用自定义`tpl`属性。这完全取决于您打算如何使用这个基类。在我的项目中，我将通用逻辑放在`initComponent()`构造函数中——比如为所有子视图创建相同的工具栏。

# html - 如何设置 bing 流量地图默认显示流量？

> ID：11087670
> 
> 赞同：0
> 
> 时间：2012-06-18T17:07:13.043
> 
> 标签：html, bing-maps, traffic

我正在尝试为我的网站编写一个 bing 流量地图，一切都很好，除了我必须摆脱的两个烦恼：

*   使用箭头键通常可以让我上/下我的网页，但现在它只移动地图的中心。我该如何关闭它？

*   为了让地图显示交通图层，必须有一个按钮，用户需要操作才能打开它？我只想让流量默认开启。

这是我网站上目前的代码：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
      <script type="text/javascript">
      var map = null;
      function trafficModuleLoaded()
      {
        setMapView();
      }    
       function loadTrafficModule()
      {
       Microsoft.Maps.loadModule('Microsoft.Maps.Traffic', { callback: trafficModuleLoaded });
      }
      function setMapView()
      {
        map.setView({zoom: 12, center: new Microsoft.Maps.Location(43.64, -79.39)})
      }          
      function getMap()
      {
          map = new Microsoft.Maps.Map(document.getElementById('myMap'), {credentials: 'AmREBa2I8sJ_e4p_G4UA00Y-pFpncDf8jG9J0f75aMZszZyXTfnYCdxWWyTuZSC1'});
          loadTrafficModule();
          trafficLayer.show();
      }    
      function showTrafficLayer()
     {    
            var trafficLayer = new Microsoft.Maps.Traffic.TrafficLayer(map);
        // show the traffic Layer
        trafficLayer.show();
      }

      </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:47:54.133

这对我来说很好，页面加载时流量就在那里：

```
<script type="text/javascript">          
  var map = null;

  function getMap()
  {
      map = new Microsoft.Maps.Map(document.getElementById('myMap'), 
      {
        credentials: 'key',
        showDashboard: false,
        mapTypeId: Microsoft.Maps.MapTypeId.road,
        center: new Microsoft.Maps.Location(some, place),
        zoom: 12
      });

      getTraffic();

      var pushpin = new Microsoft.Maps.Pushpin(map.getCenter(), null); 
      map.entities.push(pushpin); 
      pushpin.setLocation(new Microsoft.Maps.Location(some, place));           
   }

   function getTraffic()
   {
      Microsoft.Maps.loadModule('Microsoft.Maps.Traffic', { callback: function() { trafficLayer = new Microsoft.Maps.Traffic.TrafficLayer(map); trafficLayer.show();} });  
   }
  </script> 
```

# android - 适当的音频捕捉和降噪

> ID：11087672
> 
> 赞同：2
> 
> 时间：2012-06-18T17:07:14.760
> 
> 标签：android, server-side, audio-recording, noise-reduction

在我的 android 应用程序中，我需要从麦克风捕获用户的语音，然后将其传递给服务器。目前，我使用该`MediaRecorder`课程。但是，它不能满足我的需求，因为我想根据当前输入声音的音量制作发光效果，所以我想我需要一个 AudioStream 或类似的东西。目前，我使用以下内容：

```
 this.recorder = new MediaRecorder();
    this.recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    this.recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    this.recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    this.recorder.setOutputFile(FILENAME); 
```

我正在使用 API 级别 7 编写，所以我看不到任何其他音频编码器，但 AMR 窄带。也许这就是我在录音中听到的可怕噪音的原因。

我面临的第二个问题是音质差，噪音，所以我想减少（取消，抑制）它，因为它真的很糟糕，尤其是在我的无名中文平板电脑上。这应该是服务器端的，因为据我所知，它需要大量资源，而且并非所有现代小工具（尤其是无名中国平板电脑）都能尽快做到这一点。我可以自由选择在服务器上使用哪个平台，所以它可以是 ASP.NET、PHP、JSP 或任何有助于我改善声音的平台。谈到 ASP.NET，我遇到了一个名为 NAudio 的库，它可能在某种程度上可以帮助我。我知道，库中没有内置任何降噪解决方案，但我发现了一些关于 FFT 和使用它的自动关联的示例，所以它可能会有所帮助。
老实说，我以前从未使用过如此接近的声音，我不知道从哪里开始。我在谷歌上搜索了很多关于降噪技术、代码示例的信息，但一无所获。你们是我最后的希望。
提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-19T06:18:27.537

看看[这篇文章](http://twigstechtips.blogspot.com/2013/07/android-enable-noise-cancellation-in.html)。

长话短说，它使用[MediaRecorder.AudioSource.VOICE_RECOGNITION](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html#VOICE_RECOGNITION)而不是[AudioSource.MIC](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html#MIC)，这给了我非常好的结果，并且背景中的噪音确实减少了很多。

这个解决方案的伟大之处在于，它可以与 AudioRecord 和 MediaRecorder 类一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:30:56.893

For audio capture you can use the [AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html) class. This lets you record raw audio, i.e. you are not restricted to "narrow band" and you can also measure the volume.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:37:21.803

很多智能手机都有两个麦克风，一个是`MIC`你正在使用的，另一个是靠近摄像头拍摄视频的，称为`CAMCORDER`。您可以从它们两者中获取数据以进行降噪。有许多论文谈论使用多个麦克风降低音频噪声。

参考：http: [//developer.android.com/reference/android/media/MediaRecorder.AudioSource.html](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html)

[https://www.google.com/search?q=noise+reduction+algorithm+with+two+mic](https://www.google.com/search?q=noise+reduction+algorithm+with+two+mic)

# ios - 从 iOS AVAssetWriter 生成的原始 H264 mdat 中获取 PTS

> ID：11087676
> 
> 赞同：6
> 
> 时间：2012-06-18T17:07:25.743
> 
> 标签：ios, ffmpeg, avfoundation, h.264, avassetwriter

我正在尝试同时读取和写入由 AVAssetWriter 编写的 H.264 mov 文件。我设法提取了单个 NAL 单元，将它们打包到 ffmpeg 的 AVPackets 中，并使用 ffmpeg 将它们写入另一种视频格式。它工作正常，生成的文件播放良好，但播放速度不正确。如何从原始 H.264 数据计算正确的 PTS/DTS 值？或者也许还有其他方法可以得到它们？

这是我尝试过的：

1.  将捕获最小/最大帧速率限制为 30，并假设输出文件为 30 fps。事实上，它的 fps 总是小于我设置的值。而且，我认为 fps 在数据包之间不是恒定的。

2.  记住每个书面样本的呈现时间戳，并假设样本一对一映射到 NALU，并将保存的时间戳应用于输出数据包。这行不通。

3.  将 PTS 设置为 0 或 AV_NOPTS_VALUE。不工作。

通过谷歌搜索，我了解到原始 H.264 数据通常不包含任何时间信息。它有时可以在 SEI 中包含一些时间信息，但我使用的文件没有它。另一方面，有一些应用程序完全可以做我想做的事情，所以我想它是可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:20:47.510

您要么必须自己生成它们，要么访问 MP4/MOV 容器中包含时序信息的 Atom 以生成 PTS/DTS 信息。FFmpeg 在 libavformat 中的 mov.c 可能会有所帮助。

您使用 AVAssetWriter 编写的每个样本/帧都将与 VCL NAL 一对一映射。如果您所做的只是转换，那么让 FFmpeg 完成所有繁重的工作。从一种容器格式转换到另一种容器格式时，它将正确维护时间信息。

AVAssetWriter 生成的比特流不包含 SEI 数据。它只包含 SPS/PPS/I/P 帧。SPS 也不包含 VUI 或 HRD 参数。

- 编辑 -

另外，请记住，如果您从 CMSampleBufferRef 保存 PTS 信息，则时基可能与目标容器的时基不同。例如 AVFoundation 时基是纳秒，而 FLV 文件是毫秒。

# asp.net - 防止 FormsAuthenticationModule 拦截 ASP.NET Web API 响应

> ID：11087677
> 
> 赞同：11
> 
> 时间：2012-06-18T17:07:27.287
> 
> 标签：asp.net, forms-authentication, asp.net-mvc-4, asp.net-web-api, asp.net-authorization

在 ASP.NET 中，FormsAuthenticationModule 拦截任何 HTTP 401，并将 HTTP 302 重定向返回到登录页面。这对 AJAX 来说很痛苦，因为您要求 json 并以 html 格式获取登录页面，但状态代码是 HTTP 200。

在 ASP.NET Web API 中避免这种拦截的方法是什么？

在 ASP.NET MVC4 中，很容易通过显式结束连接来防止这种拦截：

```
public class MyMvcAuthFilter:AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        if (filterContext.HttpContext.Request.IsAjaxRequest() && !filterContext.IsChildAction)
        {
            filterContext.Result = new HttpStatusCodeResult(401);
            filterContext.HttpContext.Response.StatusCode = 401;
            filterContext.HttpContext.Response.SuppressContent = true;
            filterContext.HttpContext.Response.End();
        }
        else
            base.HandleUnauthorizedRequest(filterContext);
    }
} 
```

但在 ASP.NET Web API 中，我无法显式结束连接，因此即使我使用此代码，FormsAuthenticationModule 也会拦截响应并将重定向发送到登录页面：

```
public class MyWebApiAuth: AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        if(actionContext.Request.Headers.Any(h=>h.Key.Equals("X-Requested-With",StringComparison.OrdinalIgnoreCase)))
        {
            var xhr = actionContext.Request.Headers.Single(h => h.Key.Equals("X-Requested-With", StringComparison.OrdinalIgnoreCase)).Value.First();

            if (xhr.Equals("XMLHttpRequest", StringComparison.OrdinalIgnoreCase))
            {
                // this does not work either
                //throw new HttpResponseException(HttpStatusCode.Unauthorized);

                actionContext.Response = new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized);
                return;
            }
        }

        base.HandleUnauthorizedRequest(actionContext);
    }
} 
```

在 ASP.NET Web API 中避免这种行为的方法是什么？我一直在看，我找不到这样做的方法。

问候。

PS：我不敢相信这是 2012 年，这个问题仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-06T06:08:02.637

如果有人有兴趣使用 Authorize 属性处理 ASP.NET MVC 应用程序中的相同问题：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
public class Authorize2Attribute : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        if (filterContext.HttpContext.Request.IsAuthenticated)
        {
            filterContext.Result = new HttpStatusCodeResult((int) HttpStatusCode.Forbidden);
        }
        else
        {
            if (filterContext.HttpContext.Request.IsAjaxRequest())
            {
                filterContext.HttpContext.Response.SuppressFormsAuthenticationRedirect = true;
            }
            base.HandleUnauthorizedRequest(filterContext);
        }
    }
} 
```

这样浏览器可以正确区分禁止和未经授权的请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T10:56:30.990

MVC 4 RC 的发行说明暗示自 Beta 版以来此问题已得到解决——您使用的是哪个？

[http://www.asp.net/whitepapers/mvc4-release-notes](http://www.asp.net/whitepapers/mvc4-release-notes) *由 ASP.NET Web API 处理的未经授权的请求返回 401 Unauthroized：由 ASP.NET Web API 处理的未经授权的请求现在返回一个标准的 401 Unauthorized 响应，而不是重定向用户代理到登录表单，以便 Ajax 客户端可以处理响应。*

查看 MVC 的源代码，似乎通过 SuppressFormsAuthRedirectModule.cs 添加了一个功能

[http://aspnetwebstack.codeplex.com/SourceControl/network/forks/BradWilson/AspNetWebStack/changeset/changes/ae1164a2e339#src%2fSystem.Web.Http.WebHost%2fHttpControllerHandler.cs](http://aspnetwebstack.codeplex.com/SourceControl/network/forks/BradWilson/AspNetWebStack/changeset/changes/ae1164a2e339#src%2fSystem.Web.Http.WebHost%2fHttpControllerHandler.cs)。

```
 internal static bool GetEnabled(NameValueCollection appSettings)
    {
            // anything but "false" will return true, which is the default behavior 
```

所以看起来这是默认启用的，RC应该在没有任何英雄主义的情况下解决你的问题......作为一个侧面，看起来你可以使用AppSettings [http://d.hatena.ne.jp/shiba-禁用这个新模块严/20120430/1335787815](http://d.hatena.ne.jp/shiba-yan/20120430/1335787815)：

```
<appSettings> 
    <Add Key = "webapi:EnableSuppressRedirect"  value = "false" /> 
</appSettings> 
```

**编辑（示例和说明）**

我现在在[GitHub 上](https://github.com/markyjones/StackOverflow/tree/master/FormsAuthAndWebApi/FormsAuthAndWebApi)为这种方法创建了一个示例。新的重定向抑制要求您使用两个正确的“授权”属性；控制器中的 MVC Web [System.Web.Mvc.Authorize] 和 Web API [System.Web.Http.Authorize] 在全局过滤器[Link](https://github.com/markyjones/StackOverflow/blob/master/FormsAuthAndWebApi/FormsAuthAndWebApi/App_Start/FilterConfig.cs)中和/或。

然而，这个例子确实引出了该方法的局限性。似乎 web.config 中的“授权”节点将始终优先于 MVC 路由，例如这样的配置将覆盖您的规则并仍然重定向到登录：

```
<system.web>
    <authentication mode="Forms">
    </authentication>
    <authorization>
        <deny users="?"/> //will deny anonymous users to all routes including WebApi
    </authorization>
</system.web> 
```

遗憾的是，使用 Location 元素为某些 url 路由打开它似乎不起作用，WebApi 调用将继续被拦截并重定向到登录。

*解决方案*

对于 MVC 应用程序，我只是建议从 Web.Config 中删除配置并在代码中坚持使用全局过滤器和属性。

如果您必须在 Web.Config 中为 MVC 使用授权节点或拥有混合 ASP.NET 和 WebApi 应用程序，那么@PilotBob - 在下面的评论中 - 发现子文件夹和多个 Web.Config 可以用来做你的蛋糕和吃了它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T19:56:59.480

通过设置以下属性，我能够绕过 web.config 中的拒绝匿名设置：

Request.RequestContext.HttpContext.SkipAuthorization = true;

在对 Global.asax.cs 中的 Application_BeginRequest 方法中的 Request 对象进行一些检查后，我会执行此操作，例如 RawURL 属性和其他标头信息，以确保请求正在访问我希望允许匿名访问的区域。一旦调用 API 操作，我仍然会执行身份验证/授权。

# ios - 嵌套 json 中的 AFNetworking 发布图像

> ID：11087678
> 
> 赞同：3
> 
> 时间：2012-06-18T17:07:31.593
> 
> 标签：ios, afnetworking

我必须发送一个嵌套的 json 请求，其中包含内部层次结构中的图像。例如：

```
{"product" : {
  "catalogue_id" : "x", 
   "name" : "my product", 
   "image" : #<image>
  } 
} 
```

问题是如果我尝试使用`multipartFormRequestWithMethod:path:parameters:constructingBodyWithBlock:`(and `appendPartWithFileData:name:fileName:mimeType:`)，将 catalogue_id 和 name 作为参数传递，图像字段会附加在“产品”之后，如下所示：

```
{"product" : {
  "catalogue_id" : "x", 
   "name" : "my product"
  } ,
   "image" : #<image>
} 
```

有没有办法指定图像字段嵌套在某个深度？

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T22:33:51.647

通过一些修修补补找到了答案：`product[image]`在名称中成功了

示例代码：

```
NSMutableURLRequest *request = [[client sharedInstance]
                         multipartFormRequestWithMethod:@"POST" 
                                                   path:@"/catalogues/1/products.json" 
                                             parameters:params
                              constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
                                  [formData appendPartWithFileData:img
                                                              name:@"product[image]" 
                                                          fileName:@"myimage.jpg" 
                                                          mimeType:@"image/jpg"];
                                  }]; 
```

# jquery - JQuery 使用参数扩展自定义对象

> ID：11087680
> 
> 赞同：1
> 
> 时间：2012-06-18T17:07:37.677
> 
> 标签：jquery, object, parameters, extend

可能有一种更简单的方法来实现我正在尝试做的事情，我认为我并不完全理解`$.extend()`功能，但我在这里寻求建议：

我在我的索引上定义了这个自定义网格对象：

```
var grid = $('.grid').loadGrid({
            inlineEditing:<?php echo $edit ? 'true' : 'false'; ?>,
            adding:<?php echo $edit ? 'true' : 'false'; ?>,
            deleting:<?php echo $edit ? 'true' : 'false'; ?>,
            pagerLocation:"top",
            width:1320,
            loadComplete: function() {
                exp_sql = $(this).data().exp_sql;
            }
        }); 
```

如您所见，一些参数是在 PHP 处理页面时计算出来的。

然后我在页面下面有几个预先定义了一些 var 检查的网格：

```
<?
$tab = '1';
if(!@in_array($tab,$SECTIONS,true) AND $LEVEL != 1){ $edit = 0;}
?>

<table class="grid cat" action="div-m.php" title="Master catalogue info">
   <th col="Catalogue"  editable="<?php echo $edit ? 'select' : ''; ?>">Catalogue No</th>
   <th col="ISRC" editable="<?php echo $edit ? 'text' : ''; ?>">ISRC</th>
   ...
</table> 
```

然后：

```
...
<table class="grid isrc" action="div-d.php" title="Digital / detailed info">
...
</table> 
```

每个单独的表都有其唯一性`date_ranges`（来自 mysql 表），应该在每个表的主网格中定义。但是因为我在同一页面上有多个网格，所以我不能用 PHP 做到这一点。

所以问题是 - 我可以直接在表格之前使用更多选项扩展第一个定义的对象`grid`，即：

```
<?php
    $tab = '1';
    $grid = 'cat';
    if(!@in_array($tab,$SECTIONS,true) AND $LEVEL != 1){ $edit = 0;}
?>
    <script type="text/javascript">
        var date = {dateRange:"street_date"};
        $.extend.apply(grid, date);
    //  $.extend(grid, dateRange:"street_date");
    </script>
    <table class="grid cat" action="div-m.php" title="Master catalogue info"> 
```

以上显然不起作用......因为我认为`loadGrid()`应该再次调用方法......

# python - Gunicorn 可以在 Windows 上运行吗

> ID：11087682
> 
> 赞同：98
> 
> 时间：2012-06-18T17:08:03.620
> 
> 标签：python, gunicorn

我环顾四周，很惊讶没有发现 Gunicorn 是否在 Windows 上运行的任何信息。有谁知道是否是这种情况，如果是这样，我在哪里可以找到有关它的一些文档？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2018-01-31T12:18:01.080

从技术上讲，这不是答案。但**实际上**我一直在寻找的答案是如何在 Windows 上运行 WSGI Web 应用程序（如 Django），对于那些因此而进入此页面的人，这里是：

我现在正在使用[女服务员](https://docs.pylonsproject.org/projects/waitress/en/latest/)，非常好的选择:)

基本上，您所要做的就是将`gunicorn`调用替换为：

```
waitress-serve --listen=*:8000 myapp.wsgi:application 
```

对于典型的应用程序，这将为您提供与运行 gunicorn 相同的结果。：） 祝你好运！

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-06-18T17:15:30.640

Gunicorn 用于 UNIX 环境，与 Windows 不兼容。另外有关更多信息，请参阅它的[文档](https://docs.gunicorn.org/en/stable/index.html)。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-12-13T20:53:33.893

编辑：现在计划添加 Windows 支持。[https://github.com/benoitc/gunicorn/issues/524](https://github.com/benoitc/gunicorn/issues/524)

* * *

不，Gunicorn 不能在 Windows 上运行。它的设计目的是利用“Unix/类 Unix 内核中的功能优势”。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-23T09:43:13.797

gunicorn 过去不能直接在 Windows 上运行，但工作（以及待解决的问题）意味着您可以使其在 Cygwin 上运行。

见[https://github.com/benoitc/gunicorn/issues/407](https://github.com/benoitc/gunicorn/issues/407) ....

（注意：我更新了这个答案，因为该错误现已修复）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-06-10T09:22:58.687

Gunicorn 不支持 windows，虽然你可以使用[waitress](https://www.docketrun.com/blog/waitress-alternative-flask-gunicorn/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-09-13T03:19:22.453

我正在尝试使用 FASTAPI 在 Windows 上构建 ASGI 应用程序。FASTAPI 在 Gunicorn & Uvicorn 服务器上运行。我阅读了 FASTAPI[文档](https://fastapi.tiangolo.com/deployment/)以了解如何在 Windows 上部署我的应用程序。他们建议使用 docker 从 windows 部署应用程序。事实证明，这是在 Windows 上使用 Gunicorn 的最佳方式。

# python - 追加到python字典

> ID：11087683
> 
> 赞同：1
> 
> 时间：2012-06-18T17:08:03.273
> 
> 标签：python, dictionary

我有一个包含数字整数和浮点数的 csv 文件，

```
"5",7.30124705657363,2,12,7.45176205440562
"18",6.83169608190656,5,11,7.18118108407457
"20",6.40446470770985,4,10,6.70549470337383
"3",5.37498781178147,17,9,5.9902122724706
"10",5.12954203598201,8,8,5.58108702947798
"9",3.93496153596789,7,7,4.35751055597501 
```

我正在做一些算术，然后我试图将它们添加到字典中，但我遇到了关键错误。这是我的代码，

```
global oldPriceCompRankDict
oldPriceCompRankDict = {}

def increaseQuantityByOne(self, fileLocation):
    rows = csv.reader(open(fileLocation))
    rows.next()
    print "PricePercentage\t" + "OldQuantity\t" + "newQuantity\t" + "oldCompScore\t" + "newCompScore"
    for row in rows:
        newQuantity = float(row[2]) + 1.0
        newCompetitiveScore = float(row[1]) + float(math.log(float(newQuantity), 100))
        print row[1] + "\t", str(row[2])+"\t", str(newQuantity) + "\t", str(row[4]) + "\t", newCompetitiveScore
        oldPriceCompRankDict[row[3]].append(row[4]) 
```

我有未排序的密钥，我认为密钥不必采用有序格式。我认为任何事情都可能是关键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:10:36.893

无需输入`global`关键字，它是无操作的。使用 a[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)代替：

```
from collections import defaultdict

oldPriceCompRankDict = defaultdict(list) 
```

发生的事情是您从未为 定义任何键`oldPriceCompRankDict`，您只是希望它们默认为列表。该`defaultdict`类型为您提供了一个执行此操作的 dict；`oldPriceCompRankDict`当在新实例中尚未找到键时，`list()`将使用该键作为起始值，而不是引发 KeyError。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:42:13.123

Python 字典类型没有`append()`方法。您所做的基本上是尝试调用`append()`可通过 key 访问的字典元素的方法`row[3]`。您得到 a 是`KeyError`因为您在 key 下没有任何内容`row[3]`。

你应该替换你的代码

```
oldPriceCompRankDict[row[3]].append(row[4]) 
```

为了这：

```
oldPriceCompRankDict[row[3]] = row[4] 
```

此外，`global`在函数内部使用关键字来指示变量是全局变量，您可以在此处阅读有关它的信息：[在创建它们的函数之外的函数中使用全局变量，](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them) 因此声明全局字典的正确方法就是`oldPriceCompRankDict = {}`

您的函数将从第二行开始添加到字典中，因为`rows.next()`如果它是一种理想的行为，那么您调用它就可以了，否则您不需要调用该方法。

希望这对您有所帮助，祝您编码愉快！

# python - 使用 Python，如何在 Windows 资源管理器的右键上下文菜单中添加一个项目？

> ID：11087686
> 
> 赞同：3
> 
> 时间：2012-06-18T17:08:37.643
> 
> 标签：python, windows, registry

我一直在环顾四周，找到了该`_winreg`模块，但这似乎是一种冒险的方法（就是在注册表中胡闹）。还有其他方法吗？

到目前为止，我已经略过了：http: [//blogs.msdn.com/b/codefx/archive/2010/09/14/writing-windows-shell-extension-with-net-framework-4-c-vb- net-part-1.aspx](http://blogs.msdn.com/b/codefx/archive/2010/09/14/writing-windows-shell-extension-with-net-framework-4-c-vb-net-part-1.aspx)看起来我需要在这里添加一个密钥：`HKEY_CLASSES_ROOT\<File Type>\shellex\ContextMenuHandlers`.

在我真正做出任何改变之前，我只是想安全地行事。

Windows 7，64 位。

# iphone - 如何检测出现在大于设备分辨率的位置上的触摸

> ID：11087688
> 
> 赞同：0
> 
> 时间：2012-06-18T17:08:45.787
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone

我正在寻求帮助。我正在尝试制作一些益智游戏，我的主层底部有一个薄的可滚动层，其中包含一些拼图形状。我可以滚动图层并查看每个形状，但形状是在可滚动图层上的代码中手动定位的，问题是，如果我尝试检测是否触摸了精灵，哪个位置大于 1024（在第一个 iPad 中）它没有不工作。它不起作用，因为触摸可以在 1024X768 内有位置，并且形状的位置例如是 1500x100。为了更清楚，形状是精灵，我尝试使用 CGRectContainsPoints 方法检测它们。有没有其他方法可以做到或者你有什么想法？提前致谢 ：]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:25:10.763

您可以做的是子类化您的精灵，为其创建一个委托并将您的主视图/类分配为委托。

实现适当的触摸方法，并将选择什么精灵的消息发送给您的委托（主视图或所需的控制器类）。

这样，每个精灵都有相同的委托，并向您的控制类发送一条消息，告知您选择了哪些精灵并继续执行所需的功能。不需要`CGRectContainsPoint`方法。

这更清洁，更有效。

希望这可以帮助！

# asp.net-mvc - 版本控制 WebAPI 接口的推荐做法

> ID：11087690
> 
> 赞同：9
> 
> 时间：2012-06-18T17:08:47.550
> 
> 标签：asp.net-mvc, asp.net-web-api

我想使用 WebAPI 作为我的 API 技术：

*   允许批准的公司在我的系统中输入/检索数据
*   为我公司的iOS/Android/等创建标准接口。应用

有谁知道用于实现接口版本控制的最佳实践和机制。具体来说，如果我对我的 API 进行更新，我不想破坏向后兼容性。我想知道人们使用什么版本控制方案，以及 WebAPI 是否有任何支持版本控制的内置机制，而无需在每次发布新版本时设置路由/路径。任何想法将不胜感激。

*更新* 在进行了一些研究之后，我想我知道我想做什么，但我不知道该怎么做。理想情况下，在内容协商期间，我想使用用户传递的媒体类型来指定应该使用哪个版本的 API（而不是硬编码 URL）并点击相应的控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:17:58.273

如果你不希望版本被包含在 Url 中，那么可能要走的路是实现 IHttpControllerSelector。这篇博文应该为您提供一个很好的起点：[在 ASP.NET Web API 中实现 API 版本控制](http://damsteen.nl/blog/implementing-versioning-in-asp.net-web-api)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:31:03.770

我建议您查看 Peter Williams 关于[版本控制 REST 服务](http://barelyenough.org/blog/tag/rest-versioning/)的系列博客文章。他们解释了什么和为什么。有关[如何创建自定义媒体格式化程序](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)的教程，请查看 Mike Wasson 的教程。

# algorithm - 计算空间和时间复杂度并提高该程序的效率

> ID：11087691
> 
> 赞同：0
> 
> 时间：2012-06-18T17:08:48.707
> 
> 标签：algorithm, complexity-theory, time-complexity

**问题**

在重复数字的数组中查找非重复数字的列表。

**我的解决方案**

```
 public static int[] FindNonRepeatedNumber(int[] input)
    {
        List<int> nonRepeated = new List<int>();
        bool repeated = false;

        for (int i = 0; i < input.Length; i++)
        {
            repeated = false;

            for (int j = 0; j < input.Length; j++)
            {
                if ((input[i] == input[j]) && (i != j))
                {
                    //this means the element is repeated.
                    repeated = true;
                    break;
                }
            }

            if (!repeated)
            {
                nonRepeated.Add(input[i]);
            }
        }

        return nonRepeated.ToArray();
    } 
```

**时间和空间复杂度** 时间复杂度 = O(n^2) 空间复杂度 = O(n)

我不确定上面计算的时间复杂度，以及如何使这个程序更高效和快速。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:16:18.437

您提供的算法的复杂性是`O(n^2)`.

使用 Hashmaps 来改进算法。伪代码如下：

```
public static int[] FindNonRepeatedNumbers(int[] A)
{
Hashtable<int, int> testMap= new Hashtable<int, int>();

for (Entry<Integer, String> entry : testMap.entrySet()) {
            tmp=testMap.get(A[i]);
            testMap.put(A[i],tmp+1);
}

/* Elements that are not repeated are:

Set set = teatMap.entrySet(); 
// Get an iterator 
Iterator i = set.iterator(); 
// Display elements 
while(i.hasNext()) { 
Map.Entry me = (Map.Entry)i.next(); 
if(me.getValue() >1)
{
    System.out.println(me.getValue()); 
}
} 
```

**操作：** 我在这里所做的是使用哈希映射，哈希映射的**键**是输入数组的元素。哈希图的**值**就像每个元素的计数器。因此，如果一个元素出现一次，则该键的值为 1，并且该键值随后根据输入数组中元素的重复出现递增。

所以最后你只需检查你的哈希图，然后显示哈希值为 1 的元素，这些元素是非重复元素。如果输入数组长度为 ，则该算法的时间复杂度是`O(k)`创建 hashmap 和`O(k)`搜索`k`。这比`O(n^2)`. 最坏的情况是根本没有重复的元素。伪代码可能很乱，但这种方法是我能想到的最好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:29:59.937

时间复杂度 O(n) 意味着你不能有一个内循环。一个完整的内循环是 O(n^2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:51:10.073

两个指针。开始和结束。当相同的字母到达时开始递增并存储开始和结束位置，长度以供参考......否则增加结束......继续这样做直到列表结束......比较所有输出，你应该有最长的连续唯一数字列表。我希望这是问题所要求的。线性算法。

```
void longestcontinuousunique(int arr[])
{
int start=0;
int end =0;
while (end! =arr.length())
{
if(arr[start] == arr[end])
{
start++;
savetolist(start,end,end-start);
}
else
end++
}

return maxelementof(savedlist);
    } 
```

# javascript - 如何使用相同的类从一个输入跳转到下一个输入（jQuery）

> ID：11087695
> 
> 赞同：0
> 
> 时间：2012-06-18T17:10:00.777
> 
> 标签：javascript, jquery, forms, filtering

我正在寻找一种方法来从输入跳转到具有相同类的下一个输入。表单中的输入应该相互链接（不是全部，而是一些）。这可以很容易地完成，因为布局很简单，但是布局可以并且将会改变，因此很难做类似 parent() -> next() 之类的事情。那么如何在不返回第一个元素的情况下找到具有相同类的表单/布局中的下一个输入（不想循环它们）。

表单代码（示例只是为了给你一个想法）

```
<form>
    <div>
        <input type="text" class="chainme"/>
    </div>
    <div>
        <input type="text"/>
    </div>
    <div>
        <input type="text"/>
    </div>
    <div>
        <div>
            <input type="text" class="chainme"/>
        </div>
        <div>
            <input type="text" class="chainme"/>
            <div>
                <input type="text"/>
                <input type="text" class="chainme"/>
            </div>
        </div>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:16:50.603

我能想到的最简单的方法是：

```
$('form').on('keypress','input',function(e){
    var eClassName = this.className,
        index = $(this).index('.' + eClassName) + 1;
    if (e.which === 13){
        e.preventDefault();
        $('input.' + eClassName)
            .eq(index)
            .focus();
    }
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZmAEG/)。

这假设您要按`Enter`键移动到`input`同一类的下一个。此外，该元素只有一个类。

参考：

*   [`eq()`](http://api.jquery.com/eq/).
*   [`index()`](http://api.jquery.com/index/).
*   [`on()`](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:11:03.803

jQuery`next()`允许你传入一个选择器——这会将它限制在你想要的类中，而不是回到开头。

# xcode - 在动画之前删除超级视图已经完成

> ID：11087696
> 
> 赞同：0
> 
> 时间：2012-06-18T17:10:07.953
> 
> 标签：xcode, ipad, uiview, core-animation

我有一个应用程序，其中电影视图是一种加载屏幕，它位于我的根控制器 splitViewController 之上。电影完成后，我想将其从超级视图中删除，动画。我现在正在使用此代码，其中 mpmctr 我的电影控制器是：

```
[UIView beginAnimations:@"blablablab" context:NULL];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:splitViewController.view.superview cache:NO];
[UIView setAnimationDuration:.5];
[mpMCtr.view removeFromSuperview];
[UIView commitAnimations]; 
```

当这段代码运行时，mpmctr 将自己从超级视图中移除，但没有动画。当 splitviewcontroller 已经在屏幕上时，就会发生这种情况。

我使用此代码将 mpmctr 放在委托方法 didfinishlaunching 中的视图上。

```
[window addSubview:splitViewController.view];
[splitViewController.view addSubview:mpMCtr.view]; 
```

我希望你们能帮助我解决这个问题，

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:25:44.437

UIView 动画无法动画化从超级视图中移除，但您可以例如将其 alpha 动画化为零，然后您可以执行此操作以在动画完成后移除视图。

```
[UIView setAnimationDidStopSelector:@selector(removeMyView)];

- (void) removeMyView
{

    [mpMCtr.view removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T19:50:06.860

尽管[MDT 说](https://stackoverflow.com/a/11087930/608157)了什么，您实际上可以使用 UIView 动画为视图的移除设置动画。您只需使用 iOS 4 中引入的基于块的 API。

这是[Apples 文档中的确切示例代码`transitionWithView:duration:options:animations:completion:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/occ/clm/UIView/transitionWithView:duration:options:animations:completion:)

```
[UIView transitionWithView:containerView
                  duration:0.2
                  options:UIViewAnimationOptionTransitionFlipFromLeft
                  animations:^{
                      [fromView removeFromSuperview];
                      [containerView addSubview:toView]; }
                  completion:NULL]; 
```

它将从左侧翻转，删除`fromView`并添加`toView`到`containerView`（添加它们的视图从中删除）。

# vb.net - 在“标准表达式中的数据类型不匹配”中我应该怎么做

> ID：11087698
> 
> 赞同：1
> 
> 时间：2012-06-18T17:10:10.047
> 
> 标签：vb.net, ms-access-2007, oledbexception

为什么我会收到此错误？“OledbException 未处理” “条件表达式中的数据类型不匹配。”

查询字符串数据类型的时候是没有问题的，但是查询整数数据类型的时候总是遇到这个问题。。

我正在使用 microsoft access 2007

这是我的源代码：

```
Public Function searchMemberId(ByVal userId As String) As DataSet
    sqlStr = "Select Member_ID From tblMemberInfo Where Member_ID = '" & _
        Val(userId) & "'"
    ds.Clear()
    da = New OleDbDataAdapter(sqlStr, con.ConnectionString)
    da.Fill(ds, "john")

    Return ds
End Function 
```

Member_ID 的数据类型是自动编号，错误总是指向 da.Fill(ds, "john")

“ds”是一个数据集

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:16:32.647

如果您查询数字类型，请不要使用引号

```
SELECT Member_ID 
FROM tblMemberInfo
WHERE Member_ID = 17 
```

如果查询字符串类型，请使用引号

```
SELECT Member_ID 
FROM tblMemberInfo
WHERE Member_ID = 'john' 
```

* * *

更新

在这种情况下，该`Val`功能将无济于事。简单地写

```
sqlStr = "SELECT ... WHERE Member_ID = " & userId 
```

如果 ID 是一个字符串，它可以包含单引号，您必须在 SQL 字符串中使用双引号对其进行转义

```
ID = "John's record"
sqlStr = "SELECT ... WHERE Member_ID = '" & ID.Replace("'", "''") & "'"
' ==> "SELECT ... WHERE Member_ID = 'John''s record'" 
```

这也有助于防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)（维基百科）。然而，更专业的方法是使用参数。请参阅 MSDN 上的 Steve 的答案和[DataAdapter 参数 (ADO.NET)](http://msdn.microsoft.com/en-us/library/bbw6zyha%28v=vs.90%29.aspx)（尤其是“OleDb 参数占位符”和“OleDb 示例”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:22:06.803

您应该使用参数，并且不会发生此类问题。

```
sqlStr = "Select Member_ID From tblMemberInfo Where Member_ID = ?" 
ds.Clear() 
da = New OleDbDataAdapter(sqlStr, con.ConnectionString) 
da.SelectCommand.Parameters.AddWithValue("@id", Convert.ToInt32(userID))
da.Fill(ds, "john") 
Return ds 
```

# php - 密码散列：这对于 wap 应用程序来说足够了吗？

> ID：11087700
> 
> 赞同：1
> 
> 时间：2012-06-18T17:10:12.390
> 
> 标签：php, security, encryption, hash, passwords

首先，我认为需要指出的是：我正在为通常互联网速度较慢的手机制作应用程序，因此需要在速度和安全性之间进行折衷。

我将使用相同的函数（当然，用于创建哈希的变量不同）来创建用户的自动登录 cookie 并存储他们的密码。

到目前为止，它看起来像这样：

```
function multiSHA($toSha, $mode=0, $count=100) { //$mode=1 to create cookies with uniqid, or =0 for hashing with externally specified salt (added to $toSha) and static pepper
    $toSha=hash('sha512',$toSha); //so that I know the length of the string below
    if ($mode==0) {
        for ($i=0; $i<$count; ++$i) {
            $p1=hash('sha512',substr($toSha,0,64)); // since I know the length
            $p2=hash('sha512',substr($toSha,64,128));
            $pepper=hash('sha512','This is my static pepper.');
            $toSha=hash('sha512',$p1.$pepper.$p2);
        }
    }
    else {
        for ($i=0; $i<$count; ++$i) {
            $p1=hash('sha512',substr($toSha,0,64));
            $p2=hash('sha512',substr($toSha,64,128));
            $uniqid=hash('sha512',uniqid('This is my static pepper.',true));
            $toSha=hash('sha512',$p1.$uniqid.$p2);
        }
    }
    return $toSha;
} 
```

现在，这是否足以存储密码和 cookie 数据？例如，我不能使用它，`PBKDF2`因为它占用**了太多**资源，但是这个相当轻量级。攻击者不知道循环重复了多少次`for`，我还将cookie存储在一个单独的表中以进行一些额外的安全检查（例如用户代理）。

此外，我应该准备多少次循环才能确保足够安全，**而不会使我的网站成为 DDOS 攻击的容易目标**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:35:54.760

你不是密码学专家。不要尝试创建自己的加密结构，因为它们可能会以某种微妙的方式存在缺陷，而您对加密的了解不足而无法识别。

至少，您的“multiSHA”散列方案在模式 0 中缺少加盐，并且在模式 1 中是不可重复的（因此完全无用）。

无论如何，客户端设备的速度/功率与您可以并且应该在服务器端使用的数据加密的安全性完全没有关系。如果您担心 PBKDF2 会给服务器带来过多负载，请对登录尝试应用某种形式的速率限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:33:40.000

查看[OWASP-Password Storage Cheat Sheet](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)中的指南。

目前，他们建议对密码进行 64,000 次哈希迭代。我找不到参考资料（我以为它在 OWASP 上），但我记得最近看到，截至 2012 年，盐应该至少为 24 个字节。

我认为目前，64,000 次带有盐的 SHA-512 迭代应该足以保证您的安全。

编辑：关于盐的注释来自 OWASP，但它似乎已被删除。原文是：

> 由于我们已经在野外看到了所有最多 24 个字符的密码的彩虹表，因此建议的最小长度为至少 24 个字节的盐。

# c# - 在创建 c# 图像时是否有某种初始化

> ID：11087701
> 
> 赞同：2
> 
> 时间：2012-06-18T17:10:16.697
> 
> 标签：c#

我注意到第一次从 uri 创建图像需要很长时间，但是在创建一个图像之后，其他图像的加载速度非常快（第一个图像甚至更快）。

第一次使用图像对象时是否有某种初始化？有没有办法提高这种性能？

我正在加载这样的图像：

```
new BitmapImage(new Uri("directlink")); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:13:00.463

有很多可能性：

1.  第一次尝试访问图像时，您可能会导致加载额外的程序集。
2.  JIT 编译可能正在编译类型，导致第一次使用此代码时稍有延迟。
3.  由于 DNS 查找速度较慢，您第一次尝试访问 URL 域时可能会遇到问题。后续图像可能正在使用 DNS 缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:11:47.860

猜测，这可能是由于即时 (JIT) 编译。

当您执行程序时，CLR 会“按原样”从 IL 编译为本机指令。这意味着您第一次访问任何代码时，都会在编译时受到打击，但一旦完成，您就不会再次受到惩罚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:13:25.197

是的，需要创建对象，然后是连接对象，需要打开连接，正确的方法等

# ruby - Solaris 10 上的 Ruby 1.9.3 + Rails - 缺少 libyaml

> ID：11087707
> 
> 赞同：1
> 
> 时间：2012-06-18T17:10:40.237
> 
> 标签：ruby, solaris

我正在尝试在 Solaris 10 机器上安装 Ruby on Rails。我设法从源代码构建了 Ruby 1.9.3 并安装了 gems，但是当我每次收到此消息时运行 gem 命令时：

```
# gem list
/usr/local/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby. 
```

这真的很烦人:)

所以我尝试重建 Ruby，这是我在 make 的输出中注意到的。

```
configuring psych
libyaml is missing. Please install libyaml.
Failed to configure psych. It will not be installed. 
```

我找到了检查它的 extconf.rb 脚本，并尝试手动运行它：

```
# pwd
/root/pub/ruby-1.9.3-p194/ext/psych
#
# irb --simple-prompt
>> require 'mkmf'
=> true
>> find_header 'yaml.h'
checking for yaml.h... yes
=> true
>> find_library 'yaml', 'yaml_get_version'
checking for yaml_get_version() in -lyaml... yes
=> true
>> exit 
```

显然 extconf.rb 可以找到 libyaml 但 make 不能。所以我很困惑为什么make找不到它。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:25:44.497

网上有一些关于在 Solaris 上安装 Rails 的演练。

这适用于 Rails 3： [https ://www.machine-unix.com/2011/05/installing-rails3-on-solaris-10-910/](https://www.machine-unix.com/2011/05/installing-rails3-on-solaris-10-910/)

这一篇谈到避免不兼容的库的问题： [http ://www.nowastedmoves.com/2009/geekery/installing-ruby-on-rails-on-solaris-10-1008-2/](http://www.nowastedmoves.com/2009/geekery/installing-ruby-on-rails-on-solaris-10-1008-2/)

我从未在 Solaris 上尝试过，但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:27:03.510

我在 Mac OS 上遇到了这个问题，也许它有帮助：http: [//icodeapps.net/ ?p=8](http://icodeapps.net/?p=8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:28:23.323

您需要安装 libyaml。

如果您从预构建的包中安装 libyaml，您可能需要一个带有开发头文件的单独包，通常是“libyaml-dev”或类似的。

或者，您可以[从源代码安装 libyaml](http://pyyaml.org/wiki/LibYAML)：

> 下载源码包： http: [//pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz](http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz)。要构建和安装 LibYAML，请运行：
> 
> ```
> $ ./configure
> $ make
> # make install 
> ```

（注意最后一行以 开头`#`，表示 root shell，`sudo`在以普通用户身份运行时添加。）

然后在安装 libyaml 后重新配置和重新编译 Ruby。

# php - 无法编辑 $_SESSION 变量

> ID：11087711
> 
> 赞同：2
> 
> 时间：2012-06-18T17:10:57.427
> 
> 标签：php

我有一个非常简单的脚本来创建用户：

```
<?php
include 'mysqlserver.php';
session_start();

$con = mysql_connect($mysql_host, $mysql_username,$mysql_password);
if (!$con) {
die('Could not connect: ' . mysql_error());
}

mysql_select_db($mysql_db, $con);

$newuser = $_POST[username];
$newpassword = $_POST[password];
$confirmnewpassword = $_POST[confirmpassword];

if ($newpassword != $confirmnewpassword) {
die('Passwords do not match.');
}

if ($newuser == null) {
die('You need to choose a username!');
} elseif ($newpassword == null) {
die('You need to enter a password!');
}

$avail_query = mysql_query("SELECT * FROM users WHERE username='$newuser'");

$avail_numrows = mysql_num_rows($avail_query);

if ($avail_numrows != 0) {
die('That user already exists');
}

mysql_query("INSERT INTO users (username, password) 
VALUES ('$newuser', '$newpassword')");

$_SESSION['username'] == $newuser;

mysql_close($con);
?>

<script type="text/javascript">

function enterUCP(){
window.location = "/member.php"
}

</script>
</head>
<body onLoad="setTimeout('enterUCP()', 3000)">
Account created! Logging you in...
</body> 
```

最初，我的脚本只是在创建帐户后将您重定向到登录页面。我一直在尝试对其进行调整，以便您在创建帐户后登录。出于某种原因，我无法编辑 $_SESSION['username'] 或任何其他会话变量，即使我已经在第 3 行开始了会话。我很困惑，因为我的其他一些 PHP 脚本正确地操作了 $_SESSION 变量，我说不出我的有什么不同。

PS请不要评论我系统的安全性。它可能非常不安全，但我只是在为原型编写。

编辑：只是为了让这个问题不那么无用，任何人都可以在这里找到任何严重的安全漏洞[吗](http://jaxtests.comule.com/index.php)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T17:12:21.773

改变：

```
$_SESSION['username'] == $newuser; 
```

到：

```
$_SESSION['username'] = $newuser; 
```

您是在比较而不是设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T17:14:12.067

$_SESSION['username'] == $newuser;

删除第二个 = 符号。

```
$_SESSION['username'] = $newuser; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T17:15:21.647

哦，天哪 ：）

```
$_SESSION['username'] == $newuser; 
```

双等号..只放一个就可以了:)

```
$_SESSION['username'] = $newuser; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T17:23:52.250

很多人已经回答了你的问题，但我不想把这个放在评论中。首先，您通过更改来修复您的代码

```
$_SESSION['username'] == $newuser; 
```

到：

```
$_SESSION['username'] = $newuser; 
```

**重要的：**

当您学习 MySQLi 或[PDO](http://php.net/manual/en/book.pdo.php)时，对您的代码执行此操作

```
$newuser = mysql_real_escape_string($_POST[username]); 
```

保护自己免受[SQL 注入](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)

确保对查询中使用的所有输入进行类似的转义。

# .htaccess - 如何通过 IP 地址将用户重定向到特定目录以外的用户

> ID：11087714
> 
> 赞同：0
> 
> 时间：2012-06-18T17:11:05.953
> 
> 标签：.htaccess

我在上线之前测试了一个网站，并且在完成测试时，我正在使用 .htaccess 通过 IP 地址将用户重定向到 Facebook 群组页面。我们是 3 名开发人员，我已经能够允许特定的 IP 地址访问该站点。但是，我想让每个人都可以访问某个目录。请让我知道我该怎么做。这是我的 .htaccess 代码：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_HOST} !^41\.210\.129\.
RewriteCond %{REMOTE_HOST} !^196\.0\.41\.54
RewriteCond %{REMOTE_HOST} !^41\.202\.225\.154 
RewriteRule .* http://www.facebook.com/groups/tradelinksafrica/ [R=302,L] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:10:37.170

你可以使用这个 RewriteCond：`RewriteCond %{REQUEST_URI} !^/folder [NC]`

# mysql - Doctrine 出现异常的 1452 错误

> ID：11087715
> 
> 赞同：1
> 
> 时间：2012-06-18T17:11:06.437
> 
> 标签：mysql, sql, macos, foreign-keys, mamp

我目前正在为一个 1452 错误（将 Symfony2 与教义一起使用）而头疼。

情况如下：我有 3 张桌子，位置、音乐会和 CD，并且正如预期的那样，音乐会在某个位置举行，并且 CD 与音乐会相关，其中包括一些外键。

以下是由教义生成的用于创建数据库的 SQL 查询：

```
CREATE TABLE CD (id INT AUTO_INCREMENT NOT NULL, concert INT NOT NULL, number INT NOT NULL, INDEX IDX_EB3C8BB0D57C02D2 (concert), PRIMARY KEY(id)) ENGINE = InnoDB;
CREATE TABLE Concert (id INT AUTO_INCREMENT NOT NULL, location INT NOT NULL, date DATETIME NOT NULL, name VARCHAR(255) DEFAULT NULL, INDEX IDX_1AC13B4E5E9E89CB (location), PRIMARY KEY(id)) ENGINE = InnoDB;
CREATE TABLE Location (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(40) NOT NULL, city VARCHAR(40) NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;
ALTER TABLE CD ADD CONSTRAINT FK_EB3C8BB0D57C02D2 FOREIGN KEY (concert) REFERENCES Concert(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE Concert ADD CONSTRAINT FK_1AC13B4E5E9E89CB FOREIGN KEY (location) REFERENCES Location(id) ON UPDATE CASCADE ON DELETE CASCADE; 
```

事实上，插入 Location 和连接的 Concert 来满足 CD 的外键是没有问题的：

```
INSERT INTO Location (id, name, city) VALUES (NULL, 'Church', 'Berlin');
INSERT INTO Concert (id, location, date, name) VALUES (NULL, '1', '2012-06-20 19:30:00', NULL); 
```

但是，如果我尝试插入一张 CD：

```
INSERT INTO  CD (id ,concert ,number) VALUES (NULL ,  '1',  '1'); 
```

我得到了著名的错误：

```
Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`festival`.`cd`, CONSTRAINT `FK_EB3C8BB0D57C02D2` FOREIGN KEY (`concert`) REFERENCES `Concert` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

所以我尝试了一些技巧：

1.  转义表 Location 和相关键的创建：

    ```
    CREATE TABLE CD (id INT AUTO_INCREMENT NOT NULL, concert INT NOT NULL, number INT NOT NULL, INDEX IDX_EB3C8BB0D57C02D2 (concert), PRIMARY KEY(id)) ENGINE = InnoDB;
    CREATE TABLE Concert (id INT AUTO_INCREMENT NOT NULL, location INT NOT NULL, date DATETIME NOT NULL, name VARCHAR(255) DEFAULT NULL, INDEX IDX_1AC13B4E5E9E89CB (location), PRIMARY KEY(id)) ENGINE = InnoDB;
    ALTER TABLE CD ADD CONSTRAINT FK_EB3C8BB0D57C02D2 FOREIGN KEY (concert) REFERENCES Concert(id) ON UPDATE CASCADE ON DELETE CASCADE; 
    ```

    这运作良好。

2.  创建后删除表位置（以及相关键）：

    ```
    CREATE TABLE CD (id INT AUTO_INCREMENT NOT NULL, concert INT NOT NULL, number INT NOT NULL, INDEX IDX_EB3C8BB0D57C02D2 (concert), PRIMARY KEY(id)) ENGINE = InnoDB;
    CREATE TABLE Concert (id INT AUTO_INCREMENT NOT NULL, location INT NOT NULL, date DATETIME NOT NULL, name VARCHAR(255) DEFAULT NULL, INDEX IDX_1AC13B4E5E9E89CB (location), PRIMARY KEY(id)) ENGINE = InnoDB;
    CREATE TABLE Location (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(40) NOT NULL, city VARCHAR(40) NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;
    ALTER TABLE CD ADD CONSTRAINT FK_EB3C8BB0D57C02D2 FOREIGN KEY (concert) REFERENCES Concert(id) ON UPDATE CASCADE ON DELETE CASCADE;
    ALTER TABLE Concert ADD CONSTRAINT FK_1AC13B4E5E9E89CB FOREIGN KEY (location) REFERENCES Location(id) ON UPDATE CASCADE ON DELETE CASCADE;
    ALTER TABLE Concert DROP FOREIGN KEY FK_1AC13B4E5E9E89CB;
    ALTER TABLE Concert DROP INDEX IDX_1AC13B4E5E9E89CB;
    DROP TABLE Location; 
    ```

    同样的错误。

3.  逃逸外键控制

    ```
    SET FOREIGN_KEY_CHECKS = 0; 
    ```

    同样的错误。

最后两次尝试，让我想到链接 Concert-Location 上的一些索引问题？你明白，我有点失落。

有没有人已经面临过类似的事情？

非常感谢知识，

汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:40:48.003

所以，

根据[MySQL 文档](http://bugs.mysql.com/bug.php?id=60309)，自 OSX 5.5.9 以来的 MySQL 服务器在插入外键时失败。这个错误似乎带有大小写敏感性。

有很多方法可以修复它（此列表并非详尽无遗，某些选项可能无效）：

*   仅使用小写的表名。
*   尝试将[lower_case_table_names](http://dev.mysql.com/doc/refman/5.1/en/identifier-case-sensitivity.html)设置为 O 或 1（但在 OS X 上，这并不总是可能导致系统区分大小写）。
*   降级到 MySQL 服务器 5.5.8（我没有测试升级）。

[感谢这个线程](https://stackoverflow.com/questions/5566991/mysql-5-5-foreign-key-constraint-fails-when-foreign-key-exists)。

# c# - 如何在 Zedgraph 中删除特定的图形对象

> ID：11087717
> 
> 赞同：1
> 
> 时间：2012-06-18T17:11:12.897
> 
> 标签：c#, object, zedgraph

我正在尝试从 zedgraph 中删除特定的图形对象，是否有可能....？

我有一个 zedgraph，它有多个曲线和多个图形对象...

```
GraphPane pane = zedGraphControl1.GraphPane;

// Create two Line Onjects
LineObj BlueLine = new LineObj(Color.Blue, 10, 10, 10, 100);
LineObj RedLine = new LineObj(Color.Red, 90, 10, 90, 100);

// Add the line objects
pane.GraphObjList.Add(BlueLine);
pane.GraphObjList.Add(RedLine); 
```

我知道在

```
pane.GraphObjList.Clear(); 
```

我可以清除所有对象，但我想单独删除红线..？

谢谢你的时间...：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:23:25.607

如果您使用`LineItem`代替`LineObj`，您可以使用`LineItem1.clear()`删除单条曲线。

您可以用 填充它`PointPairList`，并将其添加到您的窗格中：

`LineItem1 = pane.AddCurve("CurveName", PointPairList1, Color.White, SymbolType.None)`

# .net - 使用 [ImportingConstructor] 时向容器添加部件

> ID：11087718
> 
> 赞同：1
> 
> 时间：2012-06-18T17:11:13.257
> 
> 标签：.net, mef

如果我`[ImportingConstructor]`在零件上使用，如何手动将其添加到容器中？我无法添加实例，因为我需要自己编写它。我还应该添加一个默认构造函数吗？目录是将零件放入容器的唯一方法吗？

```
class ClassA
{
  [ImportingConstructor]
  public ClassA(ClassB classB) { ... }

}

[Export]
class ClassB { ... } 
```

在不使用目录的情况下，如何将 ClassA 的实例放入 CompositionContainer？

# jquery - jQuery自动完成在添加EasyUI时崩溃

> ID：11087720
> 
> 赞同：0
> 
> 时间：2012-06-18T17:11:20.993
> 
> 标签：jquery, jquery-autocomplete

请在[http://jsfiddle.net/7c84b/](http://jsfiddle.net/7c84b/)中查看我的示例 没有 EasyUI，自动完成工作正常。但是在添加 EasyUI js 时，自动完成不再起作用。

请帮助如何让他们和平合作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:22:23.483

我也有这个问题。一个快速的补救措施是将链接放在指向 的链接`jquery.easyui.min.js`之前`jquery.ui.autocomplete.js`。

# java - 来自 RHEL5.5 的 Java 6 HTTPURLConnection 和 Project Server NTLM 身份验证

> ID：11087721
> 
> 赞同：1
> 
> 时间：2012-06-18T17:11:31.967
> 
> 标签：java, iis-6, httpurlconnection, ntlm, project-server

目前无法使用在 IIS 上运行的 Microsoft Project Server 2007 实例进行身份验证，并从运行在 Linux、RHEL 5.5 上的 Java 1.6(u19) 客户端启用集成 Windows 身份验证。

注意：客户端在我的 Windows 工作站上工作。

我最初试图实现一个 JAX-WS 调用，发现由于身份验证错误，我无法检索 WSDL，特别是 401.2，然后是 500。所以我将它简化为一个 Java 类：

1.  `Authenticator`在 AD 中使用对项目服务器站点具有权限的用户名/密码创建一个并将其设置为默认值
2.  创建一个`java.net.URL`对象
3.  创建`java.net.HttpURLConnection`并调用`getInputStream`
4.  正是在这一点上发生了故障。

`HttpURLConnection`打开调试后，我可以看到：

1.  从服务器返回的初始身份验证失败（401.2），响应中包含“negotiate”和“NTLM”。
2.  客户端创建 NTLM 令牌并将其发送回服务器
3.  服务器返回 500 状态码

在日志中的 Windows 服务器上，我可以看到日志文件中没有包含仅针对我的请求的用户名，只有一个“-”，我认为它的意思是“匿名”。

我的想法是 Project Server 不喜欢正在传递和阻塞的 NTLM 令牌。基于这方面的许多帖子，NTLM (v1 & v2) 应该在 Java 1.6 中得到支持。

任何帮助将不胜感激...

**2012 年6 月 20 日更新：**将问题缩小到*网络安全的本地安全策略设置：基于 NTLM SSP（包括 RPC）服务器的最低会话安全*。导致 Java 客户端失败的设置是*Require NTLMv2 security*。这与 1.6 JDK 所声称的 NTLM 支持背道而驰。

一些参考资料：

*   [Java HTTP 身份验证](http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-auth.html)
*   [显示 Java Authenticator Impl 的博客](http://biemond.blogspot.com/2009/04/jax-ws-web-service-proxy-client-and.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T23:12:20.663

不久前，当我遇到这个问题时，我最终使用了其他人创建的方案。

[http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html](http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html)

当我不得不从带有 ntlm 的 iis 服务器获取图像文件时为我工作。使用上面的代码片段..

```
AuthPolicy.registerAuthScheme(AuthPolicy.NTLM, org.xyz.JCIFS_NTLMScheme.class);
            HttpClient client = new HttpClient();
            client.getState().setCredentials(AuthScope.ANY, new NTCredentials(userName, password, "", strDomain));
            GetMethod get = new GetMethod(strImageFile);
            get.setDoAuthentication(true);
            client.executeMethod(get); 
```

# java - 杀死 bash 进程不会杀死 bash 当前正在运行的进程

> ID：11087722
> 
> 赞同：0
> 
> 时间：2012-06-18T17:11:42.917
> 
> 标签：java, shell, jvm

场景如下：我有一个 java 守护进程，它应该不会终止。但是，如果出现意外错误，崩溃的 JVM 应该通过脚本重新启动。所以我写了一个命令来启动一个后台bash，它有一个循环启动JVM（所以当JVM终止时，它将再次重新启动）。

```
/bin/bash -c "while true; do java ...; done" & 
```

为了能够停止守护进程，我想杀死这个 bash 后台进程（通过将它的进程 ID 保存在文件中）。只要后台 bash 不会重新启动 JVM，但仍然不会杀死当前正在运行的进程，这就是有效的——因此 bash 似乎在检查 kill 命令之前就结束了它的当前命令。我也想杀死当前正在运行的 JVM。

由于我不想管理 2 个 PID（一个用于后台 bash，一个用于当前运行的 JVM），有没有一种“强制终止”的方法，可以通过设计停止当前命令？（我在 man kill 中找不到这样的东西）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:25:48.923

有许多进程管理工具正是为此目的而构建的：runit、daemontools、upstart……甚至是 SysV inittab 表中的一个条目。

所有这些都将在关机时立即自动重启，跟踪所需状态而不是当前状态（并尝试根据需要发出启动或关机信号），管理信号传递等。

您可以在 bash 中捕获信号并在其上触发事件，但这仅处理*可以*捕获的子集（例如，您不能捕获 KILL）。更好的是使用专用的工具。

* * *

[Wooledge.org wiki](http://mywiki.wooledge.org/ProcessManagement)的ProcessManagement 页面（由 irc.freenode.org 的#bash 频道使用）有一些其他的关于自己在 bash 中执行此操作的具体建议……尽管它也建议将 runit、daemontools 及其亲属作为最好的 -实践方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:14:25.087

为什么不使用[cron](http://ss64.com/bash/crontab.html)启动您的应用程序，并且只管理 1 个 pid，即属于您的应用程序的 pid？这样你总是会杀死正确的进程。

强调一下，您可以创建一个 bash 脚本来管理您的应用程序：start|stop|status。启动时，它会将 java pid 保存到文件中。然后您可以安排一个 cron 作业来验证应用程序的状态，如果 pid 不存在，请重新启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T19:05:21.857

这不是 bash 的默认行为吗？例如，我认为 zsh 会相反并且不会向所有子进程发送 SIGHUP 吗？也许您可以尝试这个答案并编写一个小脚本并以 disown 开头？

看到这个问题：[将进程的生命与启动它的外壳联系起来](https://stackoverflow.com/questions/1848797/tie-the-life-of-a-process-to-the-shell-that-started-it)

我没有测试它，但我的网络服务器中需要 zsh，因为我手动启动它并使用双 CTRL-D 退出我的 shell。

# c++ - 如何使用 C++/OpenGL 在球体上映射多个图像？

> ID：11087726
> 
> 赞同：-1
> 
> 时间：2012-06-18T17:11:56.087
> 
> 标签：c++, opengl

有谁知道如何使用 C++/OpenGL 在球体上映射多个图像？

如图所示； [球体上的图像](http://www.flickr.com/photos/80647638@N05/7395304126/in/photostream)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:45:38.483

您可以将球体分成多个部分，每个部分绑定一个图像。

使用球体方程生成球体切片坐标应该相对容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:57:59.690

您可以使用图像编辑程序将所有图像组合成一个纹理。然后你只需要在整个球体上应用一个纹理。为此，您只需找到一种将球体模型导入程序的方法。（除非您想尝试以程序方式生成一个。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T18:18:40.480

最简单的方法是使用 Alpha 通道创建纹理图像。您可以将许多纹理添加到着色器代码中，并通过 alpha 将它们全部混合为遮罩。

# php - 从生成的 HTML 表中删除一行

> ID：11087731
> 
> 赞同：0
> 
> 时间：2012-06-18T17:12:11.900
> 
> 标签：php, mysql, html-table

我的网站将从 MySQL 数据库创建一个表。我想知道他们是否是一种在每一行旁边都有一个删除按钮的方法，以便成员可以删除他们表上的特定行。其他一切正常。我希望用户能够从他们的表中删除他们的行。

```
<form action="addcel.php" method="post">
Name <input type="text" name="Name"/>
Year <input type="text" name="year"/>
<input type="submit" />

<html><head><title>MySQL Table Viewer</title></head><body>
<?php
echo "<style type = 'text/css'>

table {width:700px;border:none;text-align:center;background-color:#B0B0B0;font-family:'Arial';}

#tabledata {padding:2px;border-width:0px;}

#tableheader {border-width:0px;}

#line {border:1px solid black;padding:0px;}

</style>";
$db_host = 'localhost';
$db_user = 'root';
$db_pwd = '';

$database = 'Name_gage';
$table = 'Name';

if (!mysql_connect($db_host, $db_user, $db_pwd))
    die("Can't connect to database");

if (!mysql_select_db($database))
    die("Can't select database");

// sending query
$result = mysql_query("SELECT * FROM {$table}");
if (!$result) {
    die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

echo "<h1>Table: {$table}</h1>";
echo "<table border='1'><tr>";
// printing table headers
for($i=0; $i<$fields_num; $i++)
{
    $field = mysql_fetch_field($result);
    echo "<th id = 'tableheader'>{$field->name}</th>";
}
echo "</tr>\n";
echo "<tr><td id = 'line'></td id = 'line'><td id = 'line' ></td><td id = 'line' ></td><td id = 'line' ></td><td id = 'line' ></td></tr>";
// printing table rows
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable
    foreach($row as $cell)
        echo "<td id = 'tabledata'>$cell</td>";

    echo "</tr>\n";
}
mysql_free_result($result);
?>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:23:26.247

您可以在每一行中放置一个表单，以在给定行 ID 的情况下调用删除脚本。

```
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable
    foreach($row as $cell)
        echo "<td id = 'tabledata'>$cell</td>";
    echo "<form method='post' action='delete.php'><input type='hidden' name='id' value='$row[id]'/><input type='submit' value='Delete'/></form>";
    echo "</tr>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:28:38.313

这需要ajax调用。当您的用户单击特定 html 表行的删除按钮时，您将需要对服务器进行 ajax 调用，并在服务器端从数据库中删除该特定行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:21:17.057

看看这个类似的stackoverflow问题：

[Jquery Ajax 从表和数据库中删除行](https://stackoverflow.com/questions/1141793/jquery-ajax-remove-rows-from-table-and-in-db)

上面的链接引用并解释了如何使用 Ajax 来达到预期的效果。

如果您愿意，您始终可以为删除行按钮创建一个 onClick 函数，它将用户链接到删除行页面，然后将用户刷新回表格页面。这就是他们在 AJAX 之前的做法，但将是一种不太无缝的方法。

# google-maps - MonoDroid 和谷歌地图： com.google.android.maps 包不存在

> ID：11087732
> 
> 赞同：4
> 
> 时间：2012-06-18T17:12:13.620
> 
> 标签：google-maps, xamarin.android

我无法将 Google Maps 合并到使用 MonoDroid 创建的 adroid 应用程序中。我正在使用 MonoDevelop IDE。

我引用了 Mono.Android.GoogleMaps 包（我注意到版本是 0.0.0.0）。我创建了一个名为 LocationMapActivity 的 MapActvity。当我尝试构建应用程序时，我在 LocationMapActivity.java: **package com.google.android.maps does not exist**中收到以下错误。

在此先感谢您的帮助！

编辑：确保在安装 Google API 后不要忘记设置正确的目标框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:07:01.597

Google Maps library 不包含在基本的 Android SDK 中，所以我猜你还没有安装 Google APIs 插件。Xamarin[在此处](http://docs.xamarin.com/Android/Guides/Platform_Features/Maps_and_Location/Part_2_-_Maps_API#Configuring_Maps_API_Prerequisites)提供了一些文档，其中详细说明了安装加载项和设置包含对它的支持的模拟器所需执行的操作。

# sql - 将 mm/dd/yyyy 字符串转换为日期时间时出错

> ID：11087737
> 
> 赞同：2
> 
> 时间：2012-06-18T17:12:35.160
> 
> 标签：sql, sql-server, tsql

我正在尝试更新一个表，我只得到一个 varchar 值：

```
UPDATE table
SET Deadline = CONVERT(DATETIME, '06/18/2012 12:00 AM')
FROM table
WHERE nominal_id = 2650 
```

我得到的错误是：

> 消息 241，级别 16，状态 1，第 10 行
> 从字符串转换日期和/或时间时转换失败。

但是当我做一个简单的`SELECT CONVERT(DATETIME, '12:00 PM')`，它返回正确的值。我在这里似乎缺少什么？我应该铸造 varchar 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T17:22:01.313

对于日期/时间文字，您应该始终使用明确的、与区域无关的字符串。在您的情况下，这应该会更好（并且您不需要显式转换为日期时间）：

```
'20120618 12:00 AM' 
```

我强烈建议您更改输入格式。如果您无法更改输入格式，那么也许：

```
CONVERT(DATETIME, CONVERT(VARCHAR(19), '06/18/2012 12:00 AM', 101)) 
```

# android - 如何从绑定服务与处理程序进行通信？

> ID：11087738
> 
> 赞同：1
> 
> 时间：2012-06-18T17:12:35.737
> 
> 标签：android, android-service, android-handler, android-binder

我目前正在通过我的应用程序使用的插件与外部服务进行通信。

绑定的服务最终会启动一个活动，然后应通知主应用程序活动已完成。

问题是，服务通过本地广播得到通知。我已经将 Messenger 存储`msg.replyTo`到一个变量中，所以我可以在 Handler 完成后访问它，但 Service 仍然被绑定。

它确实有效，但是我想完全确定不可能有 NullPointer，所以我不太喜欢这种方法。

有没有比将 Messenger 存储在变量中更好的方式与 Binder 进行通信？

这里有一些代码可以更好地理解：

```
private BroadcastReceiver mMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            try {
                if (intent.getAction().equals("activity_closed") && mReplyMessenger != null) {

                mReplyMessenger.send(Message.obtain(null, MSG_RESULT_ACTIVITY_FINISHED));

            }
        } catch (RemoteException e) {
            e.printStackTrace();
        }
};

class IncomingHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        mReplyMessenger = null;
        try {
            switch (msg.what) {
            case MSG_START_ACTIVITY: {
                mReplyMessenger = msg.replyTo;

[...]

                BridgeBinder.this.startActivity(i);
                break;
            }
[...]

            default:
                super.handleMessage(msg);
            }
        } catch (RemoteException e) {
            e.printStackTrace();
        }
    }
}

final Messenger mMessenger = new Messenger(new IncomingHandler());

@Override
public IBinder onBind(Intent arg0) {
    return mMessenger.getBinder();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:21:33.483

我正在以相同的方式实现双向 Messenger。我真的没有看到您的 Handler 获得对您的 Activity 的过时引用（因此是 NPE），但如果您想格外小心，您可以尝试在 onResume() 方法中每次更新引用，甚至每次您收到一条消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-02T08:23:19.730

如果你需要我的课：

# 消息管理器.java

```
import android.os.Bundle;
import android.os.IBinder;
import android.os.Message;
import android.os.Messenger;
import android.os.RemoteException;

import com.ubikinformatica.it.lib.commons.modules.log.EMaxLogger;

import java.util.ArrayList;
import java.util.List;

public class MessageManager {

    public interface IOnHandleMessage{
        // Message Whats
        int MSG_HANDSHAKE = 0x1;

        void onHandleMessage(Message msg);
    }

    private static final String TAG = MessageManager.class.getSimpleName();

    private Messenger mMsgSender;
    private Messenger mMsgReceiver;
    private List<Message> mMessages;

    public MessageManager(IOnHandleMessage callback, IBinder target){
        mMsgReceiver = new Messenger(new MessageHandler(this, callback, MessageHandler.TYPE_ACTIVITY));
        mMsgSender = new Messenger(target);
        mMessages = new ArrayList<>();
    }

    public MessageManager(IOnHandleMessage callback){
        mMsgReceiver = new Messenger(new MessageHandler(this, callback, MessageHandler.TYPE_SERVICE));
        mMsgSender = null;
        mMessages = new ArrayList<>();
    }

    /** Getter & Setter Methods **/
    public Messenger getMsgSender() {
        return mMsgSender;
    }

    public void setMsgSender(Messenger sender) {
        this.mMsgSender = sender;
    }

    public Messenger getMsgReceiver() {
        return mMsgReceiver;
    }

    public void setMsgReceiver(Messenger receiver) {
        this.mMsgReceiver = receiver;
    }

    public List<Message> getLastMessages() {
        return mMessages;
    }

    public void addMessage(Message message) {
        this.mMessages.add(message);
    }

    /** Public Methods **/
    public void sendMessage(int what, int arg1, int arg2, Bundle msgData){
        if(mMsgSender != null && mMsgReceiver != null) {
            try {
                Message msg = Message.obtain(null, what, arg1, arg2);
                msg.replyTo = mMsgReceiver;
                if(msgData != null){
                    msg.setData(msgData);
                }
                mMsgSender.send(msg);
            } catch (RemoteException rE) {
                EMaxLogger.onException(TAG, rE);
            }
        }
    }

    public void sendHandshake(){
        if(mMsgSender != null && mMsgReceiver != null){
            sendMessage(IOnHandleMessage.MSG_HANDSHAKE, 0, 0, null);
        }
    }

} 
```

# 消息处理程序.java

```
 import android.os.Handler;
import android.os.Message;

public class MessageHandler extends Handler {

    // Types
    final static int TYPE_SERVICE = 0x1;
    final static int TYPE_ACTIVITY = 0x2;

    private MessageManager mMessageManager;
    private MessageManager.IOnHandleMessage mCallback;
    private int mType;

    public MessageHandler(MessageManager msgManager, MessageManager.IOnHandleMessage callback, int type){
        this.mMessageManager = msgManager;
        this.mCallback = callback;
        this.mType = type;
    }

    /** Override Handler Methods **/
    @Override
    public void handleMessage(Message msg){
        this.mMessageManager.addMessage(msg);
        switch(msg.what){
            case MessageManager.IOnHandleMessage.MSG_HANDSHAKE:
                switch(mType){
                    case TYPE_SERVICE:
                        this.mMessageManager.setMsgSender(msg.replyTo);
                        this.mMessageManager.sendHandshake();
                        break;
                    case TYPE_ACTIVITY:
                        break;
                }
                break;
            default:
                if(mCallback != null){
                    mCallback.onHandleMessage(msg);
                }
                break;
        }
    }

} 
```

# 更多信息在我的帖子中：在这里[查看我的帖子](https://stackoverflow.com/questions/2463175/how-to-have-android-service-communicate-with-activity/54480497#54480497)

实际上，新的 JobService 和 JobIntentService 存在一些问题，因为它们不能返回比 JobScheduler IBinder 引擎更多的 IBinder，但我现在正在尝试解决它们：D

希望这有帮助，有一个很好的编码：D再见

# [重要编辑时间：02/05/2019 - 10:57]

好的问题解决了大声笑，您可以将 Messenger 放在一个包裹中，并通过意图将其发送到服务。因此，在 JobIntentService 中，“onBind”方法将返回 JobScheduler IBinder 引擎，您将在 Intent 中获取 Messenger 的 Binder！

因此，您仅使用回调在活动中初始化 MessageManager，通过“enqueueWork”启动服务，并在意图中放置 Messenger Receiver。在 JobIntentService 中，您可以通过在“onBind”和“onHandleWork”方法中使用 Messenger 的“getBinder()”方法获取 IBinder 来初始化 MessageManager。当您拥有活动的 MessengerReceiver 的 IBinder 时，您可以使用构造函数“回调 + 活页夹”来初始化 MessageManager。然后在服务中发送握手并在活动中设置他的发件人。

# 去做这个：

您必须更改 MessageHandler 的“handleMessage”覆盖方法：现在的方法是：

```
@Override
    public void handleMessage(Message msg){
        this.mMessageManager.addMessage(msg);
        switch(msg.what){
            case MessageManager.IOnHandleMessage.MSG_HANDSHAKE:
                switch(mType){
                    case TYPE_SERVICE:
                        this.mMessageManager.setMsgSender(msg.replyTo);
                        this.mMessageManager.sendHandshake();
                        break;
                    case TYPE_ACTIVITY:
                        break;
                }
                break;
            default:
                if(mCallback != null){
                    mCallback.onHandleMessage(msg);
                }
                break;
        }
    } 
```

您需要删除 Type 因为您不再需要它。因此，在“MessageHandler”类中的“handleMessage”方法的切换中，当您获取并握手时，您必须执行以下操作：

```
 [...]
case MessageManager.IOnHandleMessage.MSG_HANDSHAKE:
    if(this.mMessageManager.getMsgSender() == null){
        this.mMessageManager.setMsgSender(msg.replyTo);
        this.mMessageManager.sendHandshake();
    }
    [...] 
```

这样就解决了 JobIntentService 的问题；）希望对您有所帮助！有一个很好的编码 <3

# html - 在 Powershell 电子邮件中设置 HTML 字体颜色

> ID：11087739
> 
> 赞同：1
> 
> 时间：2012-06-18T17:12:37.673
> 
> 标签：html, email, powershell, fonts, colors

我有一个 powershell 脚本，它将为密码将在 <=10 天后过期的用户生成一封电子邮件。电子邮件被格式化为 HTML，但我想将一个句子的字体颜色更改为红色以引起注意。但是，我对 html 代码周围的引号有疑问。如果我使用双引号，powershell 会输出文字消息并使用单引号给出错误消息。有没有办法在 powershell 电子邮件中使用多种字体颜色？

这是我目前正在使用的代码。我还要补充一点，这是我第一次尝试在 powershell 中编写脚本，所以如果我做的事情很长，我愿意接受一些输入。

```
 # Import ActiveDirectory module for Powershell V2 AD cmdlets
    import-module activedirectory
    # Uncomment the following line to include optional cmdlets included with Exchange  2010 schema changes. No such cmdlets are included in this script
    # add-pssnapin microsoft.exchange.management.powershell.e2010 

    #Import the maximum password age from Active Directory GPO policy from domain
    $maxdays=(Get-ADDefaultDomainPasswordPolicy).MaxPasswordAge.TotalDays
    $date = date

    # Simple HTML Message to format body of email. Body is broken up into four parts for appearance and for easy function insertion into message.
    $body1 +=   "<html><body><br> Your network password will expire in "
    $body2 +=   " day(s).</body><html>"
    $body3 +=   "<html><body><br>Employees of Organization, when you receive this email please visit https://scriptlogic/iisadmpwd/aexp2b.asp to reset your network password."
    $body3 +=   "<br>If you are <font color =""#99000"">not employed by Organization</font>, please visit https://gateway.organization.org to reset your network password using our Citrix website."
    $body3 +=   "<br>If you need assistance resetting your password, please contact the Ibformation Service Department at 867-5309"
    $body3 +=   "<br>If you have a portable device, smart phone, etc. that you use to access the Network the new password will need to be updated on these devices also."
    $body3 +=   "<br><br>Thank you,"
    $body3 +=   "<br> IS Department"
    $body3 +=   "<br><img src='P:\Documents\PowerShell\Scripts\password\logo.jpg' alt='logo'/>"
    $body3 +=   "<br><br><hr>"
    $body3 +=   "From <b> IS Department</b>"
    $body3 +=   "<br>The information contained in this e-mail and any accompanying documents is confidential, may be privileged, and is intended solely for the person and/or entity to whom it is"
    $body3 +=   "<br>addressed (i.e. those identified in the <b> To: </b> and <b> cc:</b> box). They are the property of this organization. Unauthorized review, use, disclosure, or copying of this"
    $body3 +=   "<br>communication, or any part thereof, is strictly prohibited and may be unlawful.  The IT Department thanks you for your cooperation.<br>"
    $body4 +=   "<br><hr><br></body></html>"

    # Combine body segments into string for display
    $bod1y=$body1 | out-string 
    $body2=$body2 | out-string 
    $body3=$body3 | out-string 
    $body4=$body4 | out-string 

    #Gather ADusers which are enabled, password is set not set to never expire and all properties of user object. *Note Extension Attributes will not show up unless they are populated.
    (Get-ADUser -filter {(Enabled -eq "True") -and (PasswordNeverExpires -eq "False")} -properties *) | Sort-Object pwdLastSet |

    #Loop to validate password age of each account and generate email. Emails to non-domain addresses are generated based on extensionattribute1 and extensionattribute2\. 
    #Active Directory is pre-populated with the user address as extensionattribute1 and domain information in extensionattribute2\. For example, johndoe = extensionattribute1
    # gmail.com = extensionattribute2.
    foreach-object {
    $lastset=Get-Date([System.DateTime]::FromFileTimeUtc($_.pwdLastSet))
    $expires=$lastset.AddDays($maxdays).ToShortDateString()
    $daystoexpire=[math]::round((New-TimeSpan -Start $(Get-Date) -End $expires).TotalDays)
    $samname=$_.samaccountname
    $firstname=$_.GivenName
    $lastname=$_.SN
    $extensionattribute1=$_.extensionattribute1
    $extensionattribute2=$_.extensionattribute2
    $recipient="$extensionattribute1@$extensionattribute2"
                if (($daystoexpire -ge 1) -and ($daystoexpire -le 10)) {
                $ThereAreExpiring=$true

                $email = @{
                to = "$recipient" 
                from = 'IS_Notifications@org.org'
                subject = "$firstname $lastname your network password will expire in $daystoexpire day(s)"
                body = "$firstname $lastname" +  " $body1" + "$daystoexpire" + "$body2" + "$body3" + "$date" + "$body4"
                smtpserver = 'smtp.server.org'
                # attachments = "p:\documents\citrix\citrix_password_reset.doc"
            }
        Send-MailMessage @email  -BodyAsHTML
        } 
```

}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:49:57.157

您看过 Powershell 的“此处字符串”功能吗？有[一篇讨论该功能的 technet 文章](http://technet.microsoft.com/en-us/library/ee692792.aspx)。我一直将它们用于作为东西模板的字符串。

我喜欢在此类模板中使用像 {0} 这样的 c# 风格的占位符。这允许对日期和货币进行花哨的格式设置。（在我的示例中，我使用了“花式”日期格式。）

使用带有占位符的模板还意味着我不必记住以特定顺序将字符串连接在一起，或者记住像 $firstname 这样的东西必须在这些连接中的位置。它也应该更容易国际化，但我从未这样做过。

这是一个快速示例，您需要将其集成到循环逻辑中。

```
# first, stick the template into a variable for later use. Use a "here string" for ease of formatting and editting.
$bodyTemplate = @"
{0} {1}
<html><body><br> Your network password will expire in {2} day(s).</body><html>
<html><body><br>Employees of Organization, when you receive this email please visit https://scriptlogic/iisadmpwd/aexp2b.asp to reset your network password.
<br>If you are <font color =""#99000"">not employed by Organization</font>, please visit https://gateway.organization.org to reset your network password using our Citrix website.
<br>If you need assistance resetting your password, please contact the Ibformation Service Department at 867-5309
<br>If you have a portable device, smart phone, etc. that you use to access the Network the new password will need to be updated on these devices also.
<br><br>Thank you,
<br> IS Department
<br><img src='P:\Documents\PowerShell\Scripts\password\logo.jpg' alt='logo'/>
<br><br><hr>
From <b> IS Department</b>
<br>The information contained in this e-mail and any accompanying documents is confidential, may be privileged, and is intended solely for the person and/or entity to whom it is
<br>addressed (i.e. those identified in the <b> To: </b> and <b> cc:</b> box). They are the property of this organization. Unauthorized review, use, disclosure, or copying of this
communication, or any part thereof, is strictly prohibited and may be unlawful.  The IT Department thanks you for your cooperation.<br>
{3:D}
<br><hr><br></body></html>
"@

# Now, loop through your users, calculate $DaysUntilExpiry, test the value and build the email to be sent
# I'm just making up some dumb values here
$daystoexpire = 42 # or whatever
$firstname =  "George"
$lastname = "Washington"
$date = date

# using the template, stick the appropriate values into place and store that in a variable for convenience
$body = $bodyTemplate -f $firstname, $lastname, $daystoexpire, $date

# do whatever we want with $body
write-host $body 
```

# c - 向量作为参数 C

> ID：11087741
> 
> 赞同：2
> 
> 时间：2012-06-18T17:12:40.780
> 
> 标签：c, pointers, vector

我必须执行以下操作：

给定一个带有随机数的向量，将其分成 2 个其他向量，奇数和偶数。但在函数中，所有向量都必须通过参数传递（不能使用全局）。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

void vetores(int *vetor, int *A, int *B)
{
    int i = 0,aux;
    for(i = 0;i < 100; i++)
    {
        if(vetor[i] % 2 == 0)
        {
            aux = vetor[i];
            A[i] = aux;
        }else{
            aux = vetor[i];
            B[i] = aux;
        }
    }
}

int main()
{
    int vetor[101], a[51], b[51],i;

    /*a = (int)malloc(sizeof(int)*51);
    b = (int)malloc(sizeof(int)*51);*/

    for(i = 0; i < 100; i++)
    {
        vetor[i] = i;
    }

    vetores(vetor,a,b);

    for(i = 0; i < 50; i++)
    {
        if(vetor[i] % 2 == 0)
        {
            printf("%d",a[i]);
        }else
        {
            printf("%d",b[i]);
        }
    }

    return 0;
} 
```

如果您测试该代码，则向量正在被更改（它不应该）并且 A 向量没有收到偶数！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:20:21.910

您的主要问题是您正在根据 input 中的位置*索引**输出*。

 *例如，如果您的第一个偶数在`input[3]`，那么您将其写入`even_output[3]`，应该（可能）在哪里`even_output[0]`。

你可能想要这样的东西：

```
if (input[i] %2 == 0)
    *A++ = input[i];
else
    *B++ = input[i]; 
```

您可能还需要做一些事情来告诉调用者您找到了多少奇数和偶数（并且调用者可能必须稍微不同地分配内存，除非这些计数相等 - 现在，您有 101 个输入，并分配了 51 个点对于每个输出。如果您有（例如）60 个偶数和 40 个奇数，您将写超出为偶数分配的空间的末尾。使用您提供的输入，不会出现该问题，但在几乎任何其他情况下，这不仅是可能的，而且实际上是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:18:47.100

您需要数组 A 和 B 的单独索引计数。

试试这个：

```
void vetores(int *vetor, int *A, int *B)
{
    int i = 0,aux;
    int aIndex = 0, bIndex = 0;
    for(i = 0;i < 100; i++)
    {
        if(vetor[i] % 2 == 0)
        {
            A[aIndex] = vetor[i];
            aIndex++;
        }else{
            B[bIndex] = vetor[i];
            bIndex++;
        }
    }
} 
```

尝试使用一个不错的[调试器工具](http://en.wikipedia.org/wiki/Debugger)，这将帮助您在代码中找到此类错误。

您还需要检查数组的长度：

```
int vetor[101], a[51], b[51] 
```

如果它们是随机的，我认为`a`或`b`可能有超过 51 个值。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:22:35.093

这里有一些提示：除了你几乎总是拼错“向量”之外，你使用的是经典的 c 数组而不是向量。您的向量方法需要进行大量重构，因为您不需要使用额外的内存和双重分配变量。

```
#include <stdio.h>
#include <stdlib.h>

void vectores(int *vector, int *A, int *B)
{
    int i = 0, k = 0, l = 0;
    for(;i < 100; i++)
    {
        if(vector[i] % 2 == 0)
        {
            A[k++] = vector[i];
        }else{
            B[l++] = vector[i];
        }
    }
}

int main()
{
    int vector[100], a[51], b[51],i;

    for(i = 0; i < 100; i++)
    {
        vector[i] = i;
    }

    vectores(vector,a,b);
    for(i = 0; i < 51; i++){
        printf("%d          %d",a[i], b[i] );
        printf("\n");
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:28:17.910

从技术上讲，这不是您问题的答案，但是如果您想区分奇数和偶数值，最好对每个值的最后一位执行一次快速排序，例如

```
int temp, i = 0, j = N-1;
while ( i < j ) {
    while ( vetor[i] & 1 == 0 )
        i += 1;
    while ( vetor[j] & 1 == 1 )
        j -= 1;
    if ( i < j ) {
        temp = vetor[i];
        vetor[i] = vetor[j];
        vetor[j] = temp;
        }
    } 
```

以上内容未经测试，如果您发现任何错误，请随时保留它们。*

# javascript - 带有计时的jQuery鼠标悬停

> ID：11087743
> 
> 赞同：1
> 
> 时间：2012-06-18T17:12:48.090
> 
> 标签：javascript, jquery, css

有没有办法仅在鼠标在元素上悬停 1 秒后触发 mouseover 事件？

```
$("img").mouseover(function () {

 $(this).animate( {opacity:1}, 200);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:22:08.090

[http://jsfiddle.net/tqa2J/1/](http://jsfiddle.net/tqa2J/1/)

```
$("img").on("mouseover mouseout", function() {
    var tid = 0;
    return function(e) {
        var elem = $(this);
        clearTimeout(tid);
        if (e.type == "mouseover") {
            tid = setTimeout(function() {
                elem.stop(true).animate({
                    opacity: 1
                }, 200);
            }, 1000);
        }
        else {
            console.log(elem);
            elem.stop(true).animate({
                opacity: 0.3
            }, 200);
        }

    };
}());​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:16:25.470

您可以使用此处找到的 hoverIntent() jQuery 插件：http: [//cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

此外，请确保在使用这些类型的东西时要小心，因为它们不适用于移动浏览器或使用触摸屏的任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T17:21:22.417

```
$("img").mouseover(function () {
    $(this).delay(1000).animate( {opacity:1}, 200);
}).mouseleave(function() {
    $(this).clearQueue().stop().animate({opacity:0.2},200);
});​ 
```

[演示](http://jsfiddle.net/pFz9u/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:17:20.073

您应该使用 setTimeOut 函数。

```
setTimeOut(function(){$("img").mouseover(function () {

        $(this).animate( {opacity:1}, 200);

});
},1000); 
```

它需要以毫秒为单位的时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T17:19:34.173

您可以创建一个计时器函数（参见 [1]），在 1 秒后处理您的事件。您可以将该函数存储在数组中或直接存储到“窗口”中，如果在定时器函数触发之前发生“鼠标退出”，则可以取消它。

[1] [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

# windows-runtime - WinRT 自定义控件 - 无法绑定 IMvxCommand 类型的 DependencyProperty，但可以在类型更改为 RelayCommand 或 ICommand 时绑定

> ID：11087753
> 
> 赞同：0
> 
> 时间：2012-06-18T17:13:27.560
> 
> 标签：windows-runtime, icommand

在昨天的 WP2W8 伦敦活动中，我尝试将现有的 WP7 自定义控件移植到 WinRT（5 月 31 日发布候选版本）

这个自定义控件有一个属性，声明如下：

```
public IMvxCommand Command
{
    get { return (IMvxCommand)GetValue(CommandProperty); }
    set { SetValue(CommandProperty, value); }
}

public static readonly DependencyProperty CommandProperty =
    DependencyProperty.Register("Command", typeof(IMvxCommand), typeof(IconWithTextMenuItem), new PropertyMetadata(null));

private void OnTap(object sender, CantRememberExactEventArgs e)
{
    if (Command == null)
        return;

    if (CommandParameter != null)
        Command.Execute(CommandParameter);
    else
        Command.Execute();
} 
```

无论我尝试什么，我都无法绑定 - 输出窗口调试绑定错误总是报告绑定无法将类型转换`MvxRelayCommand`为`IMvxCommand`

但是，如果我更改`IMvxCommand`为`MvxRelayCommand`或`ICommand`然后绑定有效。

这里的继承树是`MvxRelayCommand`从`IMvxCommand`继承自继承的`System.Windows.Input.ICommand`——但我确实怀疑 WinRT 可能会`ICommand`在后台进行一些时髦的类型重定向。

有没有人了解是否`IMvxCommand`可以`ICommand`在 WinRT 自定义控件中使用依赖属性？

* * *

更新 - 一个示例项目是：[https ://github.com/slodge/WinRTInterfaceBindingProblem](https://github.com/slodge/WinRTInterfaceBindingProblem)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:17:03.413

我认为`System.Windows.Input.ICommand`可以在WinRT控件中使用。在您的示例中，您可能只需将依赖项属性声明为 a`ICommand`而不是`IMvxCommand`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:32:34.167

在 WP7`ICommand`中是在`System.Windows.Input`命名空间中。在 Metra XAML 中，它位于`Windows.UI.Xaml.Input`命名空间中。看来您正在引用一个依赖于无法编译的 WP7 二进制文件的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T20:25:54.987

最后，我没有从 MS 那里得到任何回报。

但从样本来看，我猜它只是一个我们必须忍受的错误：

[https://github.com/slodge/WinRTInterfaceBindingProblem/tree/master/App1](https://github.com/slodge/WinRTInterfaceBindingProblem/tree/master/App1)

# c++ - 实现真值表的一般模式

> ID：11087754
> 
> 赞同：8
> 
> 时间：2012-06-18T17:13:37.657
> 
> 标签：c++

是否有一个很好的通用模式来实现真值表？

我正在重新处理一些遗留代码（C++），并且刚刚意识到我正在使用的函数相当于一个具有 3 个二进制输入和 8 个可能输出的真值表。这是八个测试中的两个和相应输出的示例：

```
// - + +
if ( (prevdst5 < 0.0) && (dst5 > 0.0) && (nextdst5 > 0.0) ){
    thawpct = (dst5 / (dst5 - prevdst5));
}

// - - +
if ( (prevdst5 < 0.0) && (dst5 < 0.0) && (nextdst5 > 0.0) ){
    thawpct = (nextdst5 / (nextdst5 - dst5));
}

// other cases...

return thawpct; 
```

基本上我想知道是否有一种更清洁、更可维护/可扩展*的方式来设置它。

*   如果添加另一个输入怎么办？那么所需的 if 语句的数量将是 16，在我看来，这对于当前的模式来说太麻烦了。
*   如果几个输入组合应该映射到同一个输出怎么办？

*代码库是学术界使用的生态系统模型，因此根据编码人员的观点，维护和扩展是类似的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T17:27:40.483

```
int condition = ( prev >= 0 ? ( 1<<0 ) : 0 ) + 
                ( cur >= 0  ? ( 1<<1 ) : 0 ) + 
                ( next >= 0 ? ( 1<<2 ) : 0 );

switch (condition) {
  case 0: // - - -
  case 1: // + - -
  case 2: // - + -
  case 3: // + + -
  case 4: // - - +
  case 5: // + - +
  case 6: // - + +
  case 7: // + + +
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T17:21:40.733

数组是一个表。

布尔真值序列是二进制数。

数组按数字索引。

呜呜呜……

您可以为每个计算定义一个函数：

```
// - + + == 0 1 1 == 3
inline double f3(double prev, double curr, double next)
{
  return curr / (curr - prev);
}

// - - + == 0 0 1 == 1
inline double f1(double prev, double curr, double next)
{
   return next / (next - curr);
}

// ... 
```

然后声明一个函数指针数组：

```
typedef double (*func_type)(double, double, double);
func_type funcs[8] = {
  f1, f2, // ...
}; 
```

然后使用布尔条件作为二进制数字索引到数组中：

```
func_type f = funcs[ (int(prevdst5 < 0.0)<<2) | (int(dst5 < 0.0)<<1) | int(nextdst5 > 0.0) ];
thawpct = f(prevdst5, dst5, nextdst5); 
```

> *   如果添加另一个输入怎么办？（那么测试的数量将是 16，在我看来，使用当前模式管理起来会很麻烦）

如果需要不同的计算，您可以将数组的大小加倍并添加`f8`等`f9`，但您只需在数组索引中添加一次新测试：

```
func_type f = funcs[ (cond<<3) | (int(prevdst5 < 0.0)<<2) | (int(dst5 < 0.0)<<1) | int(nextdst5 > 0.0) ]; 
```

> *   如果几个输入组合应该映射到同一个输出怎么办？

在数组的多个元素中存储相同的函数指针：

```
func_type funcs[8] = {
  f1, f2, f3, f1, f1, // ...
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:22:29.207

您可以将 3 个（或`n`）值映射到需要执行的相应功能。`true`然后根据条件的/`false`状态循环该映射中的函数并执行该函数。

这样，您将拥有一个 3 维地图（所有维度的大小为 2）

# mysql - 在 MySQL 中将 UTF16 转换为 UTF8

> ID：11087755
> 
> 赞同：1
> 
> 时间：2012-06-18T17:13:38.763
> 
> 标签：mysql, utf-8, utf-16

我试图执行以下查询

```
SELECT  Scania.GensetType, Scania.EngineType, Scania.Engine60Hz, Scania.Alternator, Scania.PriceEur
FROM Scania  
LEFT JOIN NordhavnGenset
    ON Scania.GensetType=NordhavnGenset.Alternator 
LEFT JOIN Generator
    ON Scania.Alternator=Generator.Alternator
LEFT JOIN Insulation 
    ON NordhavnGenset.Insulation=Insulation.Insulation
LEFT JOIN Klasse
    ON NordhavnGenset.Class=Klasse.Class
LEFT JOIN AirInletFilter
    ON NordhavnGenset.AirInletFilter=AirInletFilter.AirInletFilter
LEFT JOIN IP
    ON NordhavnGenset.Ip=IP.IP
WHERE (NordhavnGenset.MaxKva='46') and (Generator.Alternator='ECP34-1LN/4') and (Insulation.Insulation='F (90ºC/45ºC)') and (Klasse.Klasse='KRS\r') and (AirInletFilter.AirInletFilter='No') and (IP.IP='IP23'); 
```

然而似乎

```
Scania.Alternator=Generator.Alternator 
```

数据类型分别为 text UTF 16 和 text UTF8。结果，它无法执行。我需要知道应该用于进行此转换的语法

这是我在执行查询时收到的错误消息

```
#1267 - Illegal mix of collations (utf16_unicode_ci,IMPLICIT) and (utf8_unicode_ci,IMPLICIT) for operation '=' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:58:54.260

您可以使用该[`CONVERT(.. USING ..)`](http://dev.mysql.com/doc/refman/5.6/en/cast-functions.html#function_convert)函数将值从一种字符编码转换为另一种：

```
Scania.Alternator = CONVERT(Generator.Alternator USING ucs2) 
```

或者，您可以查看列编码不同的原因，并考虑对所有内容使用 utf8 或 ucs2 ...

# android - 无障碍服务未启动

> ID：11087758
> 
> 赞同：16
> 
> 时间：2012-06-18T17:14:02.297
> 
> 标签：android, android-4.0-ice-cream-sandwich, toast, accessibility-api

我想在 android ics (4.0.3) 中记录所有 toasts 事件，但我无法记录任何系统事件。服务还没有开始！

根据这个问题： [onAccessibilityEvent(AccessibilityEvent event) not intercepting notification](https://stackoverflow.com/questions/9158934/onaccessibilityeventaccessibilityevent-event-not-intercepting-notification?lq=1)

**MyAccessibilityService.java**

```
package com.test.toasts2;

import android.accessibilityservice.AccessibilityService;
import android.accessibilityservice.AccessibilityServiceInfo;
import android.app.Notification;
import android.os.Parcelable;
import android.util.Log;
import android.view.accessibility.AccessibilityEvent;
import android.widget.Toast;

public class MyAccessibilityService extends AccessibilityService {

    public static final String TAG = "volumeMaster";

    @Override
    public void onAccessibilityEvent(AccessibilityEvent event)
    {
        Log.v(TAG, "***** onAccessibilityEvent");
        Toast.makeText(getApplicationContext(), "Got event from: " + event.getPackageName(), Toast.LENGTH_LONG).show();
    }

    @Override
    public void onInterrupt()
    {
        Log.v(TAG, "***** onInterrupt");
    }

    @Override
    public void onServiceConnected()
    {
        Log.v(TAG, "***** onServiceConnected");       

        AccessibilityServiceInfo info = new AccessibilityServiceInfo();
        info.eventTypes = AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED;
        info.notificationTimeout = 100;
        info.feedbackType = AccessibilityEvent.TYPES_ALL_MASK;
        setServiceInfo(info);

    }
} 
```

**Toast2Activity.java**

```
package com.test.toasts2;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;

public class Toast2Activity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent i = new Intent(this, MyAccessibilityService.class);
        startService(i);
    }
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test.toasts2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
<service android:name=".MyAccessibilityService" android:label="@string/app_name" android:enabled="true" android:exported="false">
        <intent-filter>
            <action android:name="android.accessibilityservice.AccessibilityService" />
        </intent-filter>

</service>

        <activity
            android:name=".Toast2Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我在清单中包含了活动标签（在应用程序启动时启动服务），并且还尝试删除。没有改变。服务只是没有启动。我没有在日志猫（onServiceConected 中的 Log.v）中收到通知。

我将其编译为普通应用程序（不是系统应用程序），android 4.0.3。难道我做错了什么？

附加项目（可能是错在别处，或者我编译错了）： [https ://dl.dropbox.com/u/1928109/toast2.zip](https://dl.dropbox.com/u/1928109/toast2.zip)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-26T08:10:16.843

您需要从系统设置菜单启用无障碍服务：

*   在测试设备上安装您的应用程序。

*   在设备上安装应用程序后，更改设备上的以下设置：

    > 主屏幕 > 系统设置 > 辅助功能 > 辅助功能服务 > Toast2 > 从关闭更改为打开，

    其中 Toast2 是您的应用名称。

*   然后运行您的应用程序。

AFAIK 没有方法可以在您的应用程序中以编程方式将可访问性设置为开启模式。作为一种解决方法，您可以提示用户更改设置，如果他们通过单击按钮同意，则启动可访问性系统设置，如下所示：

```
Intent intent = new Intent(android.provider.Settings.ACTION_ACCESSIBILITY_SETTINGS);
startActivityForResult(intent, 0); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-04T05:33:48.517

作为对评论的补充回答，还有一点值得注意的是，您必须在您的服务中声明权限 - [android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE"](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html)，否则设置->可访问性中将没有开关。

# c# - TextReader() 被 Timer_Tick() + this.ActiveControl 崩溃？

> ID：11087762
> 
> 赞同：-1
> 
> 时间：2012-06-18T17:14:12.163
> 
> 标签：c#, timer, crash, controls, textreader

我有一个子表单，它`TextReader`可以在被调用时加载一些值。我召唤表格的那一刻，它一直在崩溃。此表单具有以这种方式`Timer`更新 a 文本的 a `TextBox`：

```
textbox.Text = this.ActiveControl.Name; 
```

我注意到在加载操作期间禁用计时器会阻止崩溃的发生。我可以说`TextReader`受到干扰`this.ActiveControl`并导致崩溃吗？

VS Just-in-Timer 调试器每次都会给出不同的 [xxxx] 错误代码。尝试使用 VS 进行调试得到“无法附加崩溃进程。已附加调试器。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:18:50.983

您很可能有一个竞争条件：如果在`ActiveControl`调用计时器时尚未初始化（并尝试访问它），您将遇到崩溃。正如您所提到的，您需要确保计时器在`ActiveControl`完全初始化之前不会访问无效（通过在此之前禁用它或通过其他方式（例如互斥锁/信号量）保护访问）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:36:34.743

感谢大家的帮助。我忽略了汉斯·帕桑特的回答。现在，当我以这种方式将 TextBox 文本更新嵌套在 if 中时：

if (this.ActiveControl != null) { tbTest.Text = this.ActiveControl.Name; }

即使我不禁用计时器，也不会再发生崩溃。Kaboom，汉斯指出了错误！^^

感谢 Attila 给了我关于比赛条件的指针。在知识工具箱中非常有用。

# php - Yii 对不同表的两列的唯一验证，即。复合唯一验证

> ID：11087764
> 
> 赞同：6
> 
> 时间：2012-06-18T17:14:18.217
> 
> 标签：php, validation, yii, composite-key, unique-constraint

我有两个表`table1`，每个表都有一个与不同的其他列一起`table2`命名的列。我想要的是一个验证器，它在两列的字段中`email`寻找唯一性。`email`我找到了一个检查**SAME**表的多个列的[扩展](http://www.yiiframework.com/extension/unique-multiple-columns-validate/)。如何扩展它以使其适用于多个列？

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T03:52:21.203

您可以使用 className 属性为其他类指定..

文档： `the ActiveRecord class name that should be used to look for the attribute value being validated. Defaults to null, meaning using the class of the object currently being validated. You may use path alias to reference a class name here.`

让我们在两个模型中有一个名为 common_attr 的属性：

```
class Model1 extends CActiveRecord{
    public function rules(){
        array('common_attr', 'unique', 'className'=> 'Model1'),
        array('common_attr', 'unique', 'className'=> 'Model2'),
    }
}

class Model2 extends CActiveRecord{
    public function rules(){
        array('common_attr', 'unique', 'className'=> 'Model1'),
        array('common_attr', 'unique', 'className'=> 'Model2'),
    }
} 
```

**要检查`combined key`多个表的验证，您可以使用 CUniqueValidator 的标准属性。** ***不需要任何扩展***

文档：`criteria property public array $criteria; additional query criteria. This will be combined with the condition that checks if the attribute value exists in the corresponding table column. This array will be used to instantiate a CDbCriteria object.`

```
class Model1 extends CActiveRecord{

    public function rules(){
        array('common_attr', 'unique', 'caseSensitive'=>false,
                   'criteria'=>array(
            'join'=>'LEFT JOIN model2 ON model2.common_attr=model1.common_attr',
                            'condition'=>'model2.common_attr=model1.common_attr',
        )),
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-19T13:46:44.283

在**Yii2**

短的：

```
['common_attr', 'unique'],
['common_attr', 'unique', 'targetClass' => AnotherClass::class], 
```

详细：

```
class One extends \yii\db\ActiveRecord
{
    public function rules()
    {
        return [
            ['common_attr', 'unique'],
            ['common_attr', 'unique', 'targetClass' => Two::class],
        ];
    }
}

class Two extends \yii\db\ActiveRecord
{
    public function rules()
    {
        return [
            ['common_attr', 'unique'],
            ['common_attr', 'unique', 'targetClass' => One::class],
        ];
    }
} 
```

此外，您可以将多个唯一键与 targetAttribute 一起使用：

```
[
    'common_attr', 
    'unique', 
    'targetClass' => One::class, 
    'targetAttribute' => ['common_attr', 'one_more_attr']
] 
```**

# php - 查找文件夹时写 where 子句？

> ID：11087765
> 
> 赞同：1
> 
> 时间：2012-06-18T17:14:21.413
> 
> 标签：php, mysqli

使用时

```
$optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = ?)";

// Bind parameter for statement
$optionstmt->bind_param("s", $selected_option); 
```

这很好，但是如果我想使用 WHERE 子句在文件夹中查找变量，它应该如何编写？下面是这样的吗？

```
$optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = 'VideoFiles/?')";

// Bind parameter for statement
$optionstmt->bind_param("s", $selected_option); 
```

或像这样：

```
$optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = ?)";

// Bind parameter for statement
$optionstmt->bind_param("s", 'VideoFiles/$selected_option'); 
```

单引号是围绕文件夹名称和变量名称还是围绕文件夹名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:17:44.637

你需要使用后者

```
$optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = ?)"; 
```

有多种方法可以引用字符串，以下任何一种都可以：

```
$optionstmt->bind_param("s", 'VideoFiles/' . $selected_option);
// or
$optionstmt->bind_param("s", "VideoFiles/$selected_option"); 
```

但是，将变量放在单引号`'`中是行不通的。变量不会被翻译成它的实际值，`$selected_option`如果你使用单引号，你会在查询中得到文字字符串。

# mysql - 如何使用 joins 和 group_concat 正确检索产品的主要和次要类别？

> ID：11087768
> 
> 赞同：2
> 
> 时间：2012-06-18T17:14:34.380
> 
> 标签：mysql

我试图找出一个查询来检索特定产品所在的类别列表。

我有一个名为 products 的数据库，其中包含三个名为 categories、product_to_sec_cat_assoc 和 products 的表。

```
+--------------------+ +--------------------+ +--------------------------+
| Products           | | categories         | | product_to_sec_cat_assoc |
+--------------------+ +--------------------+ +--------------------------+
| product_id         | | category_id        | | product_id               |
| pri_category_id    | | category_name      | | category_id              |
| name               | | url_link           | +--------------------------+
+--------------------+ +--------------------+ 
```

由于并非所有产品都有次要类别，因此我直接在产品条目中将其主要类别分配给产品。如果它们也在其他次要类别中，我使用名为 product_to_sec_cat_assoc 的关联表来关联更多类别。

我在编写查询时遇到问题，我想在其中创建一个显示特定类别中所有产品的页面。每个产品列表还显示了它们所在的各种次要类别。

我目前的查询是：

```
select t.*, 
GROUP_CONCAT(c.category_name order by pri_category_id, c.category_id) as category_names, 
GROUP_CONCAT(c.url_link) as category_links from products t
left join product_to_sec_category_assoc a using (id)
left join categories c on t.pri_category_id = c.category_id or c.category_id = a.category_id
where t.pri_category_id = 12 
or (a.category_id = 12 and a.id = t.id)
group by t.title 
```

但是，由于某种原因，如果我将产品添加到多个次要类别中，当我查看其中一个次要类别中的产品时，它只会显示我正在查看的主要类别和次要类别。另一方面，如果我查看主要类别列表，它会显示主要类别及其所有次要类别。

例如，假设我在电子产品主要类别以及平板电脑和移动设备次要类别中拥有 iPad。如果我访问电子产品类别列表，它会在电子产品、平板电脑、手机中显示 iPad。如果我进入移动类别，它会在电子、移动中显示。如果我进入平板电脑类别，它会显示在电子产品、平板电脑类别中。

我遇到的另一个问题是查询也没有正确排序 GROUP_CONCAT(category_name) 和 GROUP_CONCAT(category_link) 以便 category_names 及其链接处于匹配顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:33:23.917

考虑到您的设计（产品与类别有两种不同的关系），您的问题相当棘手。问题在于，在您的`WHERE`子句中，您实际上是在过滤掉其余的产品类别，只返回用户所在的类别和/或其主要类别。

相反，您必须首先在辅助类别表或其主要类别字段中选择具有特定类别的产品（在子选择中完成`FROM`），**然后**将*结果*连接到辅助类别表 - 这样您就可以获得所有**仅**属于特定类别的产品的类别（无论是否是主要类别）：

```
SELECT
    a.*,
    GROUP_CONCAT(DISTINCT CONCAT(c.category_name, '||', c.url_link) ORDER BY c.category_name) AS categories
FROM
    (
        SELECT 
            aa.product_id,
            aa.pri_category_id,
            aa.name
        FROM
            products aa
        LEFT JOIN
            product_to_sec_category_assoc bb ON 
                aa.product_id = bb.product_id
                AND bb.category_id = 12
        WHERE
            aa.pri_category_id = 12
            OR bb.product_id IS NOT NULL
    ) a
LEFT JOIN
    product_to_sec_cat_assoc b ON a.product_id = b.product_id
LEFT JOIN
    categories c ON 
        a.pri_category_id = c.category_id
        OR b.category_id = c.category_id
GROUP BY
    a.product_id
ORDER BY
    a.title 
```

两个`12`代表用户当前所在的类别。

您必须注意的一件事是，对于具有至少一个次要类别的每个产品，`OR`第二个总是连接两行 - 一行将始终是该产品的主要类别。`LEFT JOIN`因此，在连接中，对于为产品列出的每个次要类别，您将在其上添加产品的主要类别，从而导致重复。`DISTINCT`这就是为什么你必须在`GROUP_CONCAT()`函数中引入。

在 中`GROUP_CONCAT()`，我决定将`category_name`和`url_link`字段合并在一起，用 . 分隔`||`。根据您在应用程序中使用的语言，您可以根据该分隔符拆分两者。这比尝试匹配两个不同列中的顺序要好。

* * *

也许更好的设计是在产品和类别之间建立多对多关系，并在交叉引用表中有一个字段指示该类别是否是主要的。架构看起来像：

```
+---------------+ +-------------------+ +----------------+
| products      | | product_cat_assoc | | categories     |
+---------------+ +-------------------+ +----------------+
| product_id    | | product_id        | | category_id    |
| name          | | category_id       | | category_name  |
+---------------+ | is_primary        | | url_link       |
                  +-------------------+ +----------------+ 
```

现在您只需要关心基于一种关系而不是两种关系来检索类别。该`is_primary`字段可以是 TINYINT(1)，包含`0`或`1`指示它是否是主要的。在此设计中，所有产品应始终在表中至少有一个对应的行`product_cat_assoc`表示主要类别。其他行将是次要类别。

然后要检索特定类别中产品的所有类别列表，查询将非常简单：

```
SELECT
    a.*,
    GROUP_CONCAT(CONCAT(c.category_name, '||', c.url_link) ORDER BY b.is_primary DESC) AS categories
FROM
    (
        SELECT 
            aa.product_id, 
            aa.name
        FROM 
            products aa
        INNER JOIN 
            product_cat_assoc bb ON aa.product_id = bb.product_id AND bb.category_id = 12
    ) a
INNER JOIN
    product_cat_assoc b ON a.product_id = b.product_id
INNER JOIN
    categories c ON b.category_id = c.category_id
GROUP BY
    a.product_id
ORDER BY
    a.name 
```

# excel - 加权趋势线

> ID：11087773
> 
> 赞同：11
> 
> 时间：2012-06-18T17:15:15.067
> 
> 标签：excel, graph, excel-formula, curve-fitting, least-squares

Excel 为成对值集生成散点图。它还提供了为趋势线生成最佳拟合趋势线和公式的选项。它还生成气泡图，其中考虑了每个值提供的权重。但是，权重对趋势线或公式没有影响。这是一组示例值，以及它们的映射和权重。

```
 Value Map     Weight
    0       1      10
    1       2      10
    2       5      10
    3       5      20
    4       6      20
    5       1      1 
```

对于 Excel 的趋势线，值 5 的映射对公式的影响太大。有没有办法产生一个反映各自权重的公式？

作为帮助，我引入了五个连续值的加权平均值。但他们是更好的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T07:37:52.000

使用 A2:C7 中的数据，基于标准加权最小二乘公式，您可以尝试：

```
=LINEST(B2:B7*C2:C7^0.5,IF({1,0},1,A2:A7)*C2:C7^0.5,0) 
```

在 E2:F2 或任何 2x1 范围内使用 CTRL+SHIFT+ENTER 输入。这也返回 {1.1353,1.4412}。

对于 Rsquared，您可以输入：

```
=INDEX(LINEST((B2:B7-SUM(B2:B7*C2:C7)/SUM(C2:C7))*C2:C7^0.5,IF({1,0},1,A2:A7)*C2:C7^0.5,0,1),3,1) 
```

**公式说明**

首先考虑使用 LINEST 在 X 上对 y 进行正态回归。如果 const = TRUE，则回归矩阵是由一列 1 和后面的回归列组成的增广矩阵，即 X'=(1,X)。如果 const = FALSE，则回归矩阵只是 X，因此在包含一列的情况下运行回归与在不包含一列并设置 const=TRUE 的情况下运行相同的估计值。

现在考虑加权最小二乘回归。回归现在是 WX'=(W1,WX) 上的 Wy，其中 W 是由权重的平方根组成的对角矩阵。由于没有一列存在，我们必须设置 const = FALSE 并在回归矩阵中使用两列。

**R平方计算**

在第三行和第五行得到的第一个公式的 LINEST 输出中将 stats 设置为 TRUE：

```
SSres = 59.76
SSreg(u) = 1461.24
SSTot(u) = 1521
Rsq(u) = 1 - 59.76/1521 = 0.9607 
```

请注意，这些值是非居中版本 (u)，因为 const=FALSE（有关详细信息，请参阅 LINEST 上的 MS 帮助。）对于居中版本 (c)，我们需要减去加权平均值，如下所示：

```
SSTot(c) =SUMPRODUCT(C2:C7*(B2:B7-SUM(B2:B7*C2:C7)/SUM(C2:C7))^2) = 244.93
Rsq(c) = 1 - 59.76/244.93 = 0.756 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T02:43:05.727

**更新**
根据您拥有数万行的附加信息，这里有一个 VBA UDF 可以完成这项工作（包括 r2）

根据下面的屏幕截图，它提供了与我的扩展数据集在我的原始答案中所做的相同`m`和值`x``r2`

![在此处输入图像描述](../Images/0e50dbffa07d161fbec1ad98696a0596.png)

```
Public Function LinestWeighted(xRng As Range, yRng As Range, wRng As Range, bInt As Boolean, bStat As Boolean) As Variant
    Dim x As Variant
    Dim y As Variant
    Dim W As Variant
    Dim TotX As Variant
    Dim TotY As Variant
    Dim lngRow As Long
    Dim strDelim As String
    Dim strX As String
    Dim strY As String
    Dim NewSeries As Variant

    x = Application.Transpose(xRng)
    y = Application.Transpose(yRng)
    W = Application.Transpose(wRng)
    strDelim = ","

    If (UBound(x, 1) = UBound(y, 1)) And (UBound(x, 1) = UBound(W, 1)) Then
        For lngRow = 1 To UBound(W)
            strX = strX & Application.WorksheetFunction.Rept(x(lngRow) & strDelim, W(lngRow))
            strY = strY & Application.WorksheetFunction.Rept(y(lngRow) & strDelim, W(lngRow))
        Next lngRow
        TotX = Split(Left$(strX, Len(strX) - 1), strDelim)
        TotY = Split(Left$(strY, Len(strY) - 1), strDelim)
        ReDim NewSeries(1 To UBound(TotX) + 1, 1 To 2)
        For lngRow = 0 To UBound(TotX)
            NewSeries(lngRow + 1, 1) = CDbl(TotX(lngRow))
            NewSeries(lngRow + 1, 2) = CDbl(TotY(lngRow))
        Next
        With Application
            LinestWeighted = .WorksheetFunction.LinEst(.Index(.Transpose(NewSeries), 2), .Index(.Transpose(NewSeries), 1), bInt, bStat)
        End With
    Else
        LinestWeighted = "input ranges must be equal in length"
        Exit Function
    End If
End Function 
```

**初步答案**

只需通过您的权重因子扩展您的数据系列

因此，不要尝试绘制 6 对图形，而是使用最高与最低的比率来重复这些点

即图

```
0       1     `10 times`  
1       2     `10 times`    
...
5       1     `once` 
```

![在此处输入图像描述](../Images/6352cb6d7762de7cde3b5302b6f8f4a4.png)

# jsf-2 - Primefaces Lightbox：如何调用 hide() 方法

> ID：11087774
> 
> 赞同：0
> 
> 时间：2012-06-18T17:15:16.600
> 
> 标签：jsf-2, primefaces

我有一个只有一张图片的灯箱。是的，我知道它并没有真正为此而设计。

```
<p:lightBox styleClass="imagebox" widgetVar="light">
  <h:outputLink value="#{imageBean.getImageResourceLink(id)}" title="#{name}" onclick="light.hide();"/> 
   <h:graphicImage library="thumb_lib" name="#{id}" width="165"/>
  </h:outputLink>  
</p:lightBox> 
```

现在我希望在打开的灯箱内单击时关闭/隐藏灯箱。这不能按预期工作。只有当我单击灯箱导航箭头时，灯箱才会隐藏。很好，隐藏某种方式有效。但是如何通过在灯箱内单击来隐藏它？

我怎样才能做到这一点？

强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:51:57.357

在里面看不到任何“onclick”事件`p:lightBox`

所以我想你可以使用 jQuery 的帮助......
以下应该可以正常工作（添加到你的 js 文件或脚本标签）

```
jQuery(document).delegate(".imagebox", "click", function (event) {
    light.hide(); 
}); 
```

或者

```
jQuery(document).delegate(".ui-lightbox-content-wrapper", "click", function (event) {
    light.hide(); 
}); 
```

如果您的灯箱有一个 ID，您可以使用`....delegate("#idOfLightBox ",....`

# javascript - Location.href 给出部分网址

> ID：11087780
> 
> 赞同：0
> 
> 时间：2012-06-18T17:15:46.470
> 
> 标签：javascript

在页面 URL 上，例如：

```
http:mysite.com/index.php?mact=News,cntnt01,detail,0&cntnt01articleid=3&cntnt01returnid=15 
```

使用 location.href 将返回

```
http://mysite.com/index.php?mact=News,cntnt01,detail,0 
```

有没有办法获得完整的网址，包括`'...&cntnt01articleid=3&cntnt01returnid=15'`

谢谢

亨利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:23:58.807

如果您的 URL 格式正确，则查询字符串将在`window.location.href`.

[http://en.wikipedia.org/wiki/Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)

逗号是 URI 中的保留字符，不应用作查询字符串值的一部分。此外，您应该对您的网址进行 URI 编码。这是通过调用[encodeURI](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURI)在 javascript 中完成的。

相关：[我可以在 URL 中使用逗号吗？](https://stackoverflow.com/questions/198606/can-i-use-commas-in-a-url)

# java - Apache POI 中的过滤

> ID：11087782
> 
> 赞同：1
> 
> 时间：2012-06-18T17:16:01.030
> 
> 标签：java, excel, filtering, apache-poi

我刚开始使用 Apache POI 来处理来自 Java 中的 Excel 电子表格的数据。现在我只是在摆弄。但是，我似乎无法理解 setAutoFilter 函数的工作原理。有人可以解释一下或提供一段代码的链接，该代码显示正在过滤的 Excel 数据。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:31:42.607

```
sheet.setAutoFilter(CellRangeAddress.valueOf("A1:N1")); 
```

# c# - 访问：在 C# 中执行内部联接查询？

> ID：11087785
> 
> 赞同：1
> 
> 时间：2012-06-18T17:16:29.323
> 
> 标签：c#, ms-access-2007, inner-join

我正在尝试通过内部联接查询填充 DataGrid：

```
SELECT * FROM Tbl1 INNER JOIN (Tbl2 INNER JOIN Tbl3 ON Tbl3.id=Tbl2.id)
ON Tbl1.id=Tbl2.id; 
```

但是当我尝试执行查询时，出现错误：

```
No value given for one or more required parameters. 
```

查询错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:33:30.323

我修复了查询：

```
SELECT * FROM 

(Tbl1 INNER JOIN Tbl2 ON Tbl.id=Tbl2.id)

INNER JOIN Tbl3 ON Tbl3.id=Tbl2.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:22:52.733

语法不正确。应该如下

```
SELECT * FROM Tbl1 
INNER JOIN Tbl2 ON Tbl1.id=Tbl2.id
INNER JOIN Tbl3 ON Tbl3.id=Tbl2.id 
```

# excel - 如何在 VBA 中将给定数字转换为时间格式 HH:MM:SS？

> ID：11087787
> 
> 赞同：1
> 
> 时间：2012-06-18T17:16:33.973
> 
> 标签：excel, vba, datetime

我收到了代表军事时间的自定义格式（类型：000000）的数字列表。它始终包含 6 位数字，必要时使用前导零。例如：

*   123456 变为 12:34:56（下午）
*   000321 变为 00:03:21（上午）
*   142321 变为 14:23:21（下午）

如何将 A 列中的整数转换为 B 列中的格式 (hh:mm:ss)？我想使用军用 24 小时制时钟。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:48:19.000

假设它是一个实整数，而不是文本：

`=TIME(INT(A1/10000),INT(MOD(A1,10000)/100),MOD(A1,100))`

如果是文本，则使用

`=TIME(VALUE(LEFT(A1,2)),VALUE(MID(A1,3,2)),VALUE(RIGHT(A1,2)))`

根据需要格式化结果。

作为 VBA 函数： 整数：

```
Function RetTime(IntTime As Long) As Date
RetTime = TimeSerial(Int(IntTime / 10000), Int((IntTime Mod 10000) / 100), (IntTime Mod 100))
End Function 
```

细绳：

```
Function RetTimeS(StrTime As String) As Date
RetTimeS = TimeSerial(Val(Left(StrTime, 2)), Val(Mid(StrTime, 3, 2)), Val(Right(StrTime, 2)))
End Function 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T18:08:01.417

试试 TEXT 功能，即在 B1

`=TEXT(A1,"00\:00\:00")+0`

格式为 hh:mm:ss

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T18:00:32.307

我不知道你是否想要 VBA 代码，或者单元格的公式，或者是什么`Custom, type 00000`。从正确使用 VBA 功能的角度来看，肖恩的上述回答可能是最好的，但我不相信有任何方法可以在军事时间格式化时间对象，并将“(am)”和“(pm)”附加到最后. 至少不使用标准的 Excel 格式。（可能是因为 am 和 pm 在军事时间是多余的。）

因此，假设您的源数据确实是字符串，这里有一个替代方案，以防您出于某种原因真的想要 'am' 和 'pm'：

```
=MID(A1,1,2) & ":" & MID(A1,3,2) & ":" & MID(A1,5,2) & IF(VALUE(MID(A1,1,2)) < 12," (am)", " (pm)") 
```

# zend-framework - url 中的 Zend 项目公共名称

> ID：11087790
> 
> 赞同：1
> 
> 时间：2012-06-18T17:16:38.160
> 
> 标签：zend-framework

嗨，我已经完成了一个可以在 localhost 上正确运行的 zend 项目。现在我想把它放在服务器网络上……我没有创建虚拟主机的权限，所以我只能使用.htaccess。我在这样的根目录上有一个 htaccess

```
RewriteEngine On
RewriteRule !^public/ /public%{REQUEST_URI} [L,R=301] 
```

和公用文件夹上的 htaccess

```
SetEnv APPLICATION_ENV production
RewriteEngine On
RewriteBase /public
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

但是当我看到远程页面的 url 是 www.domain.it/public/controlle/action？

如何删除网址上的公众？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:19:55.073

删除公用文件夹，将您的`.htaccess`和`index.php`文件放在您的`public_html`文件夹或等效文件夹中。Zend Framework 中的`public`目录只是您实际的公共 Web 目录的占位符。

使用标准 Zend 框架`.htaccess`文件。你不需要任何花哨的重写规则。

您可以将 ZF 应用程序文件放在文件夹的上一级`public_html`或其他任何位置。如果您没有将它们放在公共的上一级，请确保更改`APPLICATION_PATH`index.php 以反映正确的位置。

# mysql - 根据状态条件消除重复

> ID：11087792
> 
> 赞同：0
> 
> 时间：2012-06-18T17:16:48.987
> 
> 标签：mysql

我有一个表员工，其字段为 empid、status、name。它们是具有相同emp id的多条记录。要应用的条件如下：

1.  为每个员工 id 获取一条记录
2.  如果存在失败状态，则删除记录，除非它们具有扣留或撤回状态或两者兼而有之。

表结构：

```
empid      name      status
1          p1        fail
2          p2        pass
2          p2        fail
3          p3        pass
4          p4        pass
4          p4        onhold
5          p5        fail
5          p5        withheld
5          p5        withdrawn
6          p6        fail
6          p6        withheld
6          p6        withdrawn
6          p6        onhold
7          p7        fail
7          p7        withheld
8          p8        fail
8          p8        withdrawn
9          p9        fail
9          p9        withdrawn
9          p9        onhold
10         p10       pass
10         p10       onhold
10         p10       withdrawn
11         p11       waiting
11         p11       disburse
11         p11       withdrawn
12         p12       disburse
12         p12       fail 
```

结果应如下所示：

```
empid      name
3          p3
4          p4
5          p5  
6          p6
7          p7
8          p8
9          p9
10         p10
11         p11 
```

我是 MYSQL 的新手。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:26:28.057

```
SELECT DISTINCT empid, name FROM employee WHERE status != 'fail' 
```

**DISTINCT**关键字用于获取唯一值。所以在这里它会返回唯一的员工ID，除了“失败”之外

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:20:00.463

一种方法是将值分配给 -1,1 和 1 以失败、撤回和保留。然后将它们相加并仅选择记录> 1

```
SELECT empid, 
       name 
FROM   employee 
GROUP  BY empid, 
          name 
HAVING Sum(CASE status 
             WHEN 'fail' THEN -1 
             WHEN 'withdrawn' THEN 1 
             WHEN 'withheld' THEN 1 
             ELSE 0 
           end) > -1 
```

[演示](http://sqlfiddle.com/#!2/359cb/11)

另一种更传统的方法使用 IN 和 NOT IN 子句

```
SELECT DISTINCT empid, 
                name 
FROM   employee 
WHERE  empid NOT IN (SELECT empid 
                     FROM   employee 
                     WHERE  status = 'fail') 
        OR empid IN (SELECT empid 
                     FROM   employee 
                     WHERE  status IN ( 'withheld', 'withdrawn' )) 
```

[演示](http://sqlfiddle.com/#!2/359cb/16)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:41:49.423

这是您所问内容的正确（我希望）查询。它是这样工作的：它用一个整数值对每个状态进行评分。通过获得 0，失败获得 1，其他任何事情获得 2。查询按 empid 分组并聚合这 3 个可能值中的最大值。因此，如果最大值为 0，则意味着一切都通过了，所以我们希望它进入。如果最大值为 1，则意味着只有通过和失败，所以我们不希望它们进入。最后，如果最大值是 2 这意味着至少有一些状态不是通过或失败。如果我正确理解了你的问题，你也想要这些。

这是查询：

```
select empid, name
from
(
    select empid, name,
    max(if(status = 'pass', 0, if(status != 'fail', 2, 1))) as w
    from 
    emps
    group by empid
) t
where w != 1 
```

*（编辑掉之前的答案）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:21:36.863

```
select distinct empid, name from employee where status <> 'fail' 
```

# python - PDF提取中的空白和奇怪的单词解释

> ID：11087795
> 
> 赞同：12
> 
> 时间：2012-06-18T17:16:54.157
> 
> 标签：python, pdf, unicode, pypdf

使用下面的代码片段，我尝试从[这个](http://dl.dropbox.com/u/6160029/Aggarwal%20et%20al.%20-%202008%20-%20Asynchronous%20decoding%20of%20dexterous%20finger%20movements%20using%20M1%20neurons.pdf)PDF 文件中提取文本数据。

```
import pyPdf

def get_text(path):
    # Load PDF into pyPDF
    pdf = pyPdf.PdfFileReader(file(path, "rb"))
    # Iterate pages
    content = ""
    for i in range(0, pdf.getNumPages()):
        content += pdf.getPage(i).extractText() + "\n"  # Extract text from page and add to content
    # Collapse whitespace
    content = " ".join(content.replace(u"\xa0", " ").strip().split())
    return content 
```

[但是，我获得](http://paste.ubuntu.com/1047657/)的输出在大多数单词之间没有空格。这使得对文本进行自然语言处理变得困难（我的最终目标，在这里）。

此外，“手指”一词中的“fi”一直被解释为其他东西。这是相当有问题的，因为这篇论文是关于自发的手指运动......

有谁知道为什么会发生这种情况？我什至不知道从哪里开始！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-01-26T09:16:06.593

在不使用 PyPdf2 的情况下，使用具有相同功能的 Pdfminer 库包，如下所示。我从中得到了代码，并且我想编辑它，[这段](https://stackoverflow.com/questions/5725278/how-do-i-use-pdfminer-as-a-library)代码给了我一个文本文件，其中单词之间有空格。我使用 anaconda 和 python 3.6。要为 python 3.6 安装 PdfMiner，您可以使用此[链接](https://anaconda.org/conda-forge/pdfminer.six)。

```
from pdfminer.pdfinterp import PDFResourceManager, PDFPageInterpreter
from pdfminer.converter import TextConverter
from pdfminer.layout import LAParams
from pdfminer.pdfpage import PDFPage
from io import StringIO

class PdfConverter:

   def __init__(self, file_path):
       self.file_path = file_path
# convert pdf file to a string which has space among words 
   def convert_pdf_to_txt(self):
       rsrcmgr = PDFResourceManager()
       retstr = StringIO()
       codec = 'utf-8'  # 'utf16','utf-8'
       laparams = LAParams()
       device = TextConverter(rsrcmgr, retstr, codec=codec, laparams=laparams)
       fp = open(self.file_path, 'rb')
       interpreter = PDFPageInterpreter(rsrcmgr, device)
       password = ""
       maxpages = 0
       caching = True
       pagenos = set()
       for page in PDFPage.get_pages(fp, pagenos, maxpages=maxpages, password=password, caching=caching, check_extractable=True):
           interpreter.process_page(page)
       fp.close()
       device.close()
       str = retstr.getvalue()
       retstr.close()
       return str
# convert pdf file text to string and save as a text_pdf.txt file
   def save_convert_pdf_to_txt(self):
       content = self.convert_pdf_to_txt()
       txt_pdf = open('text_pdf.txt', 'wb')
       txt_pdf.write(content.encode('utf-8'))
       txt_pdf.close()
if __name__ == '__main__':
    pdfConverter = PdfConverter(file_path='sample.pdf')
    print(pdfConverter.convert_pdf_to_txt()) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-07-14T12:28:57.823

作为 PyPDF2 的替代方案，我建议`pdftotext`：

```
#!/usr/bin/env python

"""Use pdftotext to extract text from PDFs."""

import pdftotext

with open("foobar.pdf") as f:
    pdf = pdftotext.PDF(f)

# Iterate over all the pages
for page in pdf:
    print(page) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-18T17:29:40.923

您的 PDF 文件没有可打印的空格字符，它只是将单词放在需要的位置。您将不得不做额外的工作来找出空格，也许通过假设多字符运行是单词，并在它们之间放置空格。

如果您可以在 PDF 阅读器中选择文本，并且正确显示空格，那么至少您知道有足够的信息来重构文本。

“fi”是一个印刷连字，显示为单个字符。您可能会发现“fl”、“ffi”和“ffl”也会发生这种情况。您可以使用字符串替换将“fi”替换为 fi 连字。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-24T11:00:21.243

PyPDF 不读取换行符。

所以使用 PyPDF4

使用安装它

```
pip install PyPDF4 
```

并以此代码为例

```
import PyPDF4
import re
import io

pdfFileObj = open(r'3134.pdf', 'rb')
pdfReader = PyPDF4.PdfFileReader(pdfFileObj)
pageObj = pdfReader.getPage(1)
pages_text = pageObj.extractText()

for line in pages_text.split('\n'):
    #if re.match(r"^PDF", line):
    print(line) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-17T14:05:52.673

我在这里尝试给出答案，但它对我不起作用。在我的情况下，以下工作：

```
from pdf2image import convert_from_path
import pytesseract

images = convert_from_path("sample.pdf")
for i,image in enumerate(images,start=1):
    image.save(f"./images/page_{i}.jpg","JPEG")

print(pytesseract.image_to_string("./images/page_1.jpg")) 
```

这里的想法是首先将 PDF 转换为图像，然后从中读取文本。这种方法保留了空白。

依赖：

*   conda install -c conda-forge tesseract
*   康达安装pdf2image
*   康达安装pytesseract

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T21:12:30.890

PDFBox 是一个非常好的工具，用于使用 Java 从 PDF 文件中提取文本。文本提取是它的强项；如果您想修改/注释或查看 PDF 文件，另一个工具可能会更好地为您服务。它具有用于识别文件中空格的代码。

它也有处理连字的代码，但你需要在类路径上有一个特定的国际化库才能工作——Icu4j。

您可以从 Python 调用 PDFBox 文本提取器作为命令行程序，而无需编写任何 Java 代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-18T13:59:41.030

我已经通过使用 R 解决了这个问题：

```
library(pdftools)
pdf_file <- "xxx/untitled.pdf"
text <- pdf_text(pdf_file)
cat(text[1]) 
```

# asp.net-mvc-3 - 浮动时间序列未格式化

> ID：11087801
> 
> 赞同：0
> 
> 时间：2012-06-18T17:17:21.967
> 
> 标签：asp.net-mvc-3, flot

我正在使用 flot 在 mvc3 网页中显示堆叠的时间序列。图表正确显示 xaxis 格式不影响图表。

我使用以下代码将数据传递给视图

```
 var range = DateTime.Today.AddDays(-30);
        var graphData = _db.UpdateStatistics.Where(x => x.Day > range).OrderBy(x=> x.Day);
        var viewGraph = new SubscriptionUpdatesGraphViewModel();

        foreach (var entry in graphData)
        {
            viewGraph.Total.Add(new Tuple<long, int>(entry.Day.Ticks, entry.Total));
            viewGraph.Attention.Add(new Tuple<long, int>(entry.Day.Ticks, entry.Attention));
            viewGraph.Complete.Add(new Tuple<long, int>(entry.Day.Ticks, entry.Complete));
            viewGraph.Fail.Add(new Tuple<long, int>(entry.Day.Ticks, entry.Failed));
            viewGraph.Notify.Add(new Tuple<long, int>(entry.Day.Ticks, entry.Pending));
        }

        ViewBag.Graph = viewGraph;
        return View(result); 
```

在视图中，我有以下内容

```
<script id="source" type="text/javascript">
$(function () {
    var total =  @ViewBag.Graph.SerialisedTotal;       
    var attention =  @ViewBag.Graph.SerialisedAttention;  
    var notify =  @ViewBag.Graph.SerialisedNotify;     
    var complete =  @ViewBag.Graph.SerialisedComplete;     
    var fail =  @ViewBag.Graph.SerialisedFail;    

    var stack = true, bars = false, lines = true, steps = false;

    function plotWithOptions() {
        $.plot($("#graph"), [{label:'Need Attention',data:attention}, 
                             {label:'Ready to apply',data:notify},                             
                             {label:'Failed',data:fail},
                             {label:'Completed',data:complete}], 
            { series: {stack : stack, 
                       lines: { show: lines, 
                                fill: true, 
                                steps: steps }  , 
               xaxis: {mode: 'time' ,                                                                           
                        timeformat: "%d",  
                        tickSize: [5, "day"]  }   }
        });
    }

    plotWithOptions();

}); 
```

该图似乎显示原始刻度，仅此而已

![该图似乎显示原始刻度，仅此而已](../Images/f4a2ce50bc242f880093b6f8d6df00b6.png)

示例数据：

```
 var total =  [[634754880000000000,12],[634755744000000000,10],];  
    var attention =  [[634754880000000000,2],[634755744000000000,0],]; 
    var notify =  [[634754880000000000,2],[634755744000000000,10],];   
    var complete =  [[634754880000000000,3],[634755744000000000,10],]; 
    var fail =  [[634754880000000000,5],[634755744000000000,0],]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:51:02.340

有几个小问题，但你基本上就在那里。

首先你的时间戳不是有效的时间戳，如果你进入`new Date(634754880000000000)`你的 js 控制台，那将返回一个无效的日期。

您可以使用它在 .NET 中生成时间戳（这只是直接从 flot API.txt 中提取的）：

```
 public static long GetJavascriptTimestamp(DateTime input)
    {
        var span = new TimeSpan(DateTime.Parse("1/1/1970").Ticks);
        var time = input.Subtract(span);
        return time.Ticks / 10000;
    } 
```

第二个问题是您对 $.plot 的调用略有偏离，xaxis 不是系列的成员，但与系列处于同一级别，所以像这样：

```
$.plot($("#graph"),
        [{label:'Need Attention',data:attention}, 
        {label:'Ready to apply',data:notify},
        {label:'Failed',data:fail},
        {label:'Completed',data:complete}],
        {
            series: {
                stack: stack,
                lines: {
                    show: lines,
                    fill: true,
                    steps: steps
                }
            },
            xaxis: {
                mode: "time",
                timeformat: "%d"
            }
        }); 
```

通过这两个更改，我能够让您的图表正确输出。

# c++ - Boost Units 使用问题 - hash_value, count 乘法

> ID：11087802
> 
> 赞同：2
> 
> 时间：2012-06-18T17:17:26.997
> 
> 标签：c++, boost, hash, boost-units

我正在尝试自学 Boost Unit，但在使用单位作为浮动替代品时遇到了一些问题。

1.  我正在使用自定义的道尔顿/amu 单位进行计算。我的旧代码就像

    ```
    float baseMass = 14.95;
    float totalMass = baseMass * 12; 
    ```

    但是，对单位做同样的事情（dalton_t 是数量的 typedef）

    ```
    dalton_t baseMass = 14.95 * units::dalton_mass;
    dalton_t totalMass = baseMass * 12; 
    ```

    提供错误“二进制表达式的无效操作数”。这是否意味着 12 应该是某种无量纲单位？

2.  我还使用质量作为无序集中的键。

    ```
    typedef boost::unordered_set<types::dalton_t> DaltonSet;
    DaltonSet dSet;
    dalton_t testMass(13384.384 * phobos::units::dalton_mass);
    dSet.insert(testMass); 
    ```

    这会提供一个错误“No matching function for call to hash_value”，即使它是在单元的头文件中定义的。

对其中任何一个有什么想法吗？

单位头文件如下：

```
#ifndef UNITS_H_
#define UNITS_H_
#include <boost/functional/hash.hpp>
#include <boost/units/conversion.hpp>
#include <boost/units/io.hpp>
#include <boost/units/pow.hpp>
#include <boost/units/systems/si.hpp>
#include <boost/units/systems/si/prefixes.hpp>

namespace phobos {

namespace units {
using boost::units::mass_dimension;
using boost::units::pow;
using boost::units::root;
using boost::units::quantity;
using boost::units::unit;

struct amu_mass_base_unit :
    boost::units::base_unit<amu_mass_base_unit, mass_dimension, 1> {
        static std::string name() { return "atomic mass unit"; }
        static std::string symbol() { return "u"; }
    };

    typedef boost::units::make_system<amu_mass_base_unit>::type amu_system;
    typedef unit<mass_dimension, amu_system> amu_mass;
    static const amu_mass dalton_mass;
} /* namespace units */

namespace types {
using boost::units::quantity;
typedef quantity<units::amu_mass, float> amu_t;
typedef amu_t dalton_t;
} /* namespace types */
} /* namespace phobos */

BOOST_UNITS_DEFINE_CONVERSION_FACTOR(phobos::units::amu_mass_base_unit,
        boost::units::si::kilogram_base_unit,
        float, 1.66053892173e-27);

std::size_t hash_value(const phobos::types::amu_t &amu) {
    return boost::hash_value(amu.value());
}

#endif /* UNITS_H_ */ 
```

先感谢您！

亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:21:12.240

您的第一个问题消除了 Boost.Units 的一个已知弱点：算术表达式中没有类型提升，因此标量必须与数量的类型匹配。`baseMass * 12.0f`应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:47:10.187

至于升压单元不可散列，我也发现了这一点：

```
namespace std {
template <> struct hash<phobos::types::amu_t> {
    inline std::size_t operator()(const phobos::types::amu_t &amu) const {
        return std::hash<phobos::types::mass_store_t>()(amu.value());
    }
};
} 
```

# linux - 通过远程访问打开多个终端

> ID：11087806
> 
> 赞同：0
> 
> 时间：2012-06-18T17:17:51.290
> 
> 标签：linux, unix, remote-desktop, remote-access

我正在使用通过 SSH 远程登录到我的工作服务器。我必须在终端上工作，如果我可以拉出多个终端来访问多个目录和文件，那将会很有帮助。我怎样才能做到这一点？我是初学者。因此，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:20:35.010

屏幕是一个很好的工具。

```
screen -m 
```

将打开一个守护程序屏幕窗口，您可以将其分离以返回到您的主 shell

Ctrl+A ，然后按 D

要恢复屏幕使用

```
screen -r 
```

您可以使用名称创建多个屏幕并单独恢复它们。查看手册页以获取更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:22:46.030

您可以在服务器上使用“屏幕”在“专用”环境中打开更多 shell 会话，这样您甚至可以在不丢失 shell 的情况下断开与服务器的连接（例如，在空闲的情况下）。

见[http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to/](http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to/)

# ruby-on-rails - 使用 MiniMagick 将子图像插入另一个图像

> ID：11087808
> 
> 赞同：0
> 
> 时间：2012-06-18T17:18:03.800
> 
> 标签：ruby-on-rails, imagemagick, carrierwave, minimagick

我正在寻找使用 MiniMagick 编写 Carrierwave 过程以将子图像添加到另一个图像中，有什么想法吗？

这个文档[https://github.com/probablycorey/mini_magick](https://github.com/probablycorey/mini_magick)说我们可以使用 ImageMagick 的所有 mogrify 命令行选项，但我不需要复合来做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:37:18.417

我必须睁开眼睛，这是写在 MiniMagick 文档中的：

```
image = MiniMagick::Image.open("original.png")
result = image.composite(MiniMagick::Image.open("watermark.png", "jpg")) do |c|
  c.gravity "center"
end
result.write "my_output_file.jpg" 
```

# testing - 满足以下要求的最佳 Web 应用程序测试工具？

> ID：11087809
> 
> 赞同：1
> 
> 时间：2012-06-18T17:18:17.020
> 
> 标签：testing

*   加载 HTML 页面并检查加载速度
*   验证 HTML 的完整性
*   按照页面上的链接
*   填写并提交表格
*   执行javascript并验证执行的正确性
*   通过模拟端点来验证 AJAX 调用
*   允许灵活定义测试和预期结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:05:37.290

绝对这里的一切[都](http://www.softwareqatest.com/qatweb1.html#FUNC)可能会做。直到您提出更多要求 - 语言、免费与商业、有关的一些附加信息`Allow flexibly defining tests and expected results`等，这是您最好的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:23:56.950

我决定使用 HtmlUnit。

# actionscript-3 - Flex：如何使用验证器重置火花组合框？

> ID：11087810
> 
> 赞同：3
> 
> 时间：2012-06-18T17:18:18.870
> 
> 标签：actionscript-3, apache-flex

下面是一个可以运行的独立应用程序。它只是显示一个带有重置按钮的火花组合框。如果您选择了一个条目，例如“红色”，然后单击“重置组合框”按钮，组合框中的选定条目将被清除。但是，它还应该删除组合框的任何错误消息，但不会删除此错误消息。第二次单击“重置”按钮将消除错误。

任何人都知道不需要再次单击“重置”按钮的解决方案？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
   xmlns:s="library://ns.adobe.com/flex/spark" 
   xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Declarations>
    <mx:NumberValidator id="valCB" source="{myCB}" 
                        property="selectedIndex" minValue="0" 
                        lowerThanMinError="This field is required."/>
</fx:Declarations>

<fx:Script>
    <![CDATA[   
        import mx.events.ValidationResultEvent;
        import mx.validators.*;

        private function resetCB():void {
            valCB.enabled=false;   <!-- disable validator -->
            myCB.selectedIndex=-1; <!-- reset selected entry -->
            valCB.enabled=true;    <!-- enable validator -->
            myCB.errorString="";   <!-- clear error msg -->
        }   
    ]]>
</fx:Script>

<s:Form id="myForm">                
    <s:layout>
        <s:FormLayout gap="-5"/>
    </s:layout>
    <s:FormItem label="Select a Color"  required="true">
        <s:ComboBox id="myCB" width="140" prompt="Select a Color"> 
            <s:dataProvider>
                <mx:ArrayList>
                    <fx:String>Red</fx:String>
                    <fx:String>Blue</fx:String>
                    <fx:String>Green</fx:String>
                </mx:ArrayList>
            </s:dataProvider>
        </s:ComboBox>
    </s:FormItem>
</s:Form>
<s:Button label="Reset Combo Box" x="60" y="60" click="resetCB()"/>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:02:04.840

这对我来说似乎是 Adob​​e 的一个错误，尽管我不确定预期的行为是让它在第一次点击时起作用，还是根本不起作用。您将 设置为`selectedIndex`验证器不允许的值，打开验证器并期望它不验证。我不确定我会期望发生什么。

最好在事件中禁用验证器，然后在`click`事件中重新启用它`change`。`valCB.enabled=true;`从重置函数中删除（并且，`myCB.value = -1;`因为该值已经是 -1）：

```
private function resetCB():void {
    valCB.enabled=false;   <!-- disable validator -->
    myCB.errorString="";   <!-- clear error msg -->
} 
```

并给出`ComboBox`一个`change`事件：

```
<s:ComboBox id="myCB" width="140" prompt="Select a Color" change="enableValidate()"> 
```

然后在该事件中启用验证器：

```
protected function enableValidate():void
{
    valCB.enabled=true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:42:53.913

您应该将控制 errorString 设置为空。这应该够了吧。

# jquery - jQuery XML 调用默认为“未定义”

> ID：11087812
> 
> 赞同：0
> 
> 时间：2012-06-18T17:18:22.847
> 
> 标签：jquery, xml, ajax

我正在使用 jQuery ajax 调用从大量数据中获取多个条目并将其写入表中。

我想更改 ajax 调用的设置，以便如果给定的 ajax 调用不存在任何条目，jQuery 应该返回 0 而不是未定义，这可能吗？

*编辑：*

我对文件的调用如下

```
$.get('http://ontariosheep.org/mobile/data/data_osi2.php',function(data){
            $('.content').empty();
            $(data).find('market').each(function(){
...
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:33:23.147

当然可以，假设被调用的文件根本不返回任何数据（完全为空），这样的事情应该可以工作：

```
$.ajax({
    url: 'test.html',
    success: function(data) {
        processData(data);
    }, 
    error: function() {
        processData(0); 
    }
});

function processData(data) {
    alert(data);
} 
```

# java - 使用 primefaces ajaxify 页面的一部分

> ID：11087814
> 
> 赞同：0
> 
> 时间：2012-06-18T17:18:39.440
> 
> 标签：java, jakarta-ee, primefaces

如何使用 primefaces 在我的 java ee 应用程序中仅更新网页的一部分？下面是我的xhtml代码：

```
 <h:form id="frm">

        <h:outputText value="#{equityBean.tdate}" id="mydt" style="position: absolute;right: 100px;top:210px"/>

            <p:panelGrid columns="3" style="position: absolute;top:210px">
                <p:selectOneMenu style="width: 150px" value="#{equityBean.exchange}">
                <f:selectItem itemLabel="NSE" itemValue="nse"/>
                <f:selectItem itemLabel="BSE" itemValue="bse"/> 
                <p:ajax update="sym" listener="#{equityBean.wow}"/>
                </p:selectOneMenu> 
                    <p:selectOneMenu style="width: 150px" id="sym" value="#{equityBean.scripSymbol}">
            <f:selectItem itemLabel="select scrip" />
            <f:selectItems var="scrip" value="#{equityBean.sl}"  itemLabel="#{scrip.scripSymbol}" itemValue="#{scrip.scripSymbol}"/>
        </p:selectOneMenu>
                    <p:commandButton value="Get Quote" type="submit" action="#{equityBean.setQuote()}" oncomplete="dlg.show()" update=":frmdialog" />
                    </p:panelGrid>
        <br/>
        <div style="width: 100%" id="updateDiv">

            <table style="width: 100%">
                <tr>
                    <td> 
                        <b>Nifty 50</b><br/>
                        <b><h:outputText value="#{equityBean.niftyChange}"/></b><br/>
                        <b><h:outputText value="#{equityBean.niftyChangePer}"/></b><br/>
                        <b><h:outputText value="#{equityBean.niftyLTP}"/></b></td>
                <td><img src="http://ichart.yahoo.com/t?s=^NSEI"/></td>
                <td>&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td> 
                    <b>BSE Sensex</b><br/>
                    <b><h:outputText value="#{equityBean.sensexChange}"/></b><br/>
                    <b><h:outputText value="#{equityBean.sensexChangePer}"/></b><br/>
                    <b><h:outputText value="#{equityBean.sensexLTP}"/></b></td>
                <td><img src="http://ichart.yahoo.com/t?s=^BSESN"/></td>
                <td>&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td> 
                     <b>Gold</b><br/>
                    <b><h:outputText value="#{equityBean.sensexChange}"/></b><br/>
                    <b><h:outputText value="#{equityBean.sensexChangePer}"/></b><br/>
                    <b><h:outputText value="#{equityBean.sensexLTP}"/></b></td>
                <td><img src="http://ichart.yahoo.com/t?s=GCQ12.CMX"/></td>
                </tr>

                </table>
            <hr/>

            </div> 
```

我希望每 5 秒更新一次表格，我该怎么做？

# java - 我可以在调用每个 @RequestMapping 方法后调用一个方法吗？

> ID：11087819
> 
> 赞同：0
> 
> 时间：2012-06-18T17:19:02.160
> 
> 标签：java, spring

如果我们将注解@ModelAttribute 放在一个方法之前，它将在每个请求之前被调用（在@RequestMapping 之前）

每次请求**后**是否有类似的方法来调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:33:03.200

这样做的方法是定义一个[Spring 拦截器](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)或更一般地使用 AOP。

@ModelAttribute 注释方法有不同的用途，它们的主要目的是设置公共模型属性，其副作用是需要在实际的 @RequestMapped 方法之前调用此类方法。

# javascript - Meteor.user() 错误：未捕获的 TypeError：无法读取 null 的属性“名称”

> ID：11087820
> 
> 赞同：0
> 
> 时间：2012-06-18T17:19:17.300
> 
> 标签：javascript, meteor

我正在使用 Meteor 框架，当我尝试将当前用户的名称返回给模板助手时遇到了这个错误。

```
Template.user.userName = function (){
    return Meteor.user().name;

}

<template name ="user">
    {{userName}}
</template> 
```

我不断收到此错误：（错误：未捕获的 TypeError：无法读取 null 的属性“名称”）

但是，从 javascript 控制台一切正常。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:47:54.473

`Meteor.user()`如果没有用户登录，则返回 null。所以为了安全起见，您应该执行类似`Meteor.user() ? Meteor.user().name : ''`.

# payment-gateway - 支付网关将付款存入两个（或更多）帐户

> ID：11087822
> 
> 赞同：1
> 
> 时间：2012-06-18T17:19:27.757
> 
> 标签：payment-gateway, payment

我了解大多数支付网关只是将所有收到的付款存入一个帐户。是否可以将付款存入两个银行账户（比如 90% 存入一个后台账户，10% 存入另一个企业账户）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:19:55.680

您需要为此使用Paypal [Adaptive Payments](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:48:59.250

IANAL，但您提出的建议甚至可能不合法。请咨询您的注册会计师。通常，付款进入记录它们的活期或现金账户，然后分散到“抵消”或其他账户，再次记录。现金账户通常必须每天进行平衡。也有例外，通常是第三方费用，这在技术上是一项单独的交易，同样是您的 CPA。

# jquery - 拖放然后保存图像

> ID：11087825
> 
> 赞同：0
> 
> 时间：2012-06-18T17:19:39.027
> 
> 标签：jquery, drag-and-drop

我正在建立一个具有管理和用户视图界面的足球网站。我有一个有球员的实体，有足球场的形象。现在我希望**（管理员）**将球员从某个列表（div 或其他）拖放到足球场。通过点击保存按钮（或其他东西），我希望玩家将被固定在地面上，这样用户就无法更改它们 - 只能查看。**然后管理员**可以编辑职位等。

最好的解决方案是什么？我可以用**jQuery**、**html**或我必须使用**flash**来做到这一点吗？

任何建议，最佳实践...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:24:43.977

我会使用**jQueryUI** `.sortable()`扩展。只需链接您的播放器 div 以允许排序到目标 div。在拖动完成事件时，修改一些隐藏的表单变量以显示哪个玩家在什么位置，然后保存发布到服务器。**然后使用您的权限系统，只需向非Admin**的用户显示结果。

# c# - 使用 IIS 中托管的 WCF 处理长时间运行的服务操作的正确方法是什么？

> ID：11087826
> 
> 赞同：10
> 
> 时间：2012-06-18T17:19:51.320
> 
> 标签：c#, asp.net, .net, wcf

我正在构建一个将公开多个操作的 WCF 服务，它将在 IIS 中运行，因为它需要 HTTPS 端点。大多数操作将在几秒钟或更短的时间内执行；但是，其中一项或两项操作将需要 5-90 分钟。

该服务的主要消费者将是一个 ASP.NET MVC 应用程序；处理这个问题的正确方法是什么？

我应该提高超时时间并进行一些 ajax 调用吗？我是否应该向我的数据库中添加一个表，让长时间运行的操作更新这个数据库，并让 Web 界面每分钟轮询一次这个表？我不确定什么（如果有）普遍接受的最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:35:17.910

我为我的高级项目写了类似的东西，基本上是一个作业调度框架。

1.  我选择了将“工作”的“状态”存储在数据库中的路径。
2.  我编写了一个实现 WCF 客户端（代理）的管理器 Windows 服务
3.  我编写了一个实现我的“工作主机”的 WCF 服务。

管理器服务将从数据库中读取队列，并将工作分配给我所有的“工作主机”。我让 Windows 服务执行此任务而不是让 UI 直接与工作主机对话的原因是因为它对整个过程提供了额外的控制级别。

我不喜欢从我的工作主机上“拔下网络电缆”的想法，并且再也不会从这个特定的工作中获得状态更新。因此，Windows 服务让我能够持续监控 WCF 工作主机的进度，如果发生连接错误（或其他意外），我可以将状态更新为失败。因此，没有孤立的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:32:10.900

看看这个

[WCF 长时间运行的操作](https://stackoverflow.com/questions/2400263/wcf-windows-service-long-operations-callback-to-calling-module?rq=1) 可能还有其他选项，但它们几乎相同。您还可以在以下链接中提供一些推送通知（我假设没有返回数据）

[WCF 推送](http://www.codeproject.com/Articles/186723/Push-Messages-in-RESTful-WCF-Web-Application-with)

# android - Android上的后台位置管理

> ID：11087829
> 
> 赞同：0
> 
> 时间：2012-06-18T17:19:57.257
> 
> 标签：android, geolocation, locationmanager

将我们基于位置的游戏移植到 Android。

当应用程序在后台时，我们依赖于更新用户位置。在减轻电池影响的同时，在 Android 端实现这一目标的最佳方法是什么？

我们不需要高频率的更新，即使是 20 分钟的节奏也是可以接受的。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:36:33.367

您需要创建一个[后台服务](http://android.kgmoney.net/2010/05/08/creating-a-simple-android-service-for-background-processing/)来完成您想要的。

在该**后台服务**中，您将需要使用[LocationManager](http://developer.android.com/reference/android/location/LocationManager.html)并请求位置更新。

请求位置更新的函数采用修复间隔的参数，如下所示：

```
public void requestLocationUpdates (String provider, long minTime, float minDistance, LocationListener listener) 
```

您将使用 minTime 参数来选择修复之间的间隔：

**minTime**： *通知的最小时间间隔，以毫秒为单位。此字段仅用作节省电量的提示，位置更新之间的实际时间可能大于或小于此值。*

# linux - 关于在 find 命令中使用 xargs

> ID：11087840
> 
> 赞同：0
> 
> 时间：2012-06-18T17:20:48.743
> 
> 标签：linux, find, xargs, tcsh

我有一种情况，我需要选择所有具有 aliencoders.numeric-digits 的文件，比如 alienoders.1206 并且 find 命令也应该搜索所有子目录。如果没有这样的文件，它不应该做任何事情。

我写 ：

```
find /home/jassi/ -name "aliencoders.[0-9]+" | xargs ls -lrt | awk print '$9' 
```

如果没有这样的文件以aliencoders.xx开头，它会说没有这样的文件或目录......

我怎么能绕过这个错误。我必须为几个这样的目录运行它，它应该只为那些存在这样的文件模式的目录提供输出，否则没有警告并且不做 xargs 等东西。

目前，如果没有这样的文件，那么它正在寻找当前目录而不是 /home/jassi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:37:10.343

如果您不想`xargs`在输入为空的情况下执行，您可以使用[手册](http://linux.die.net/man/1/xargs)页`-r`中`--no-run-if-empty`指出的 GNU 扩展。因此，如果您有这种支持，您可以尝试 或者您可以使用option with在这些行上实现这一点 希望这会有所帮助！
`find /home/jassi/ -name "aliencoders.[0-9]+" | xargs -r ls -lrt | awk '{print $9}'`
`exec``find`
`find /home/jassi/ -name "aliencoders.[0-9]+" -exec ls -lrt {} + | awk '{print $9}'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:32:53.823

**重击**：

试试这个命令（在`bash`shell 下，因为大多数人都使用它，并且没有指定 shell）：

```
find /home/jassi/ -name "aliencoders.[0-9]+" 2>&1 | xargs ls -lrt | awk '{print $9}' 
```

随着`2>&1`您将错误消息从 重定向`stderr`到`stdout`。一旦你有了这个单一的输出流，你就可以用你的管道等来处理它。

如果没有此重定向，您的错误消息`stderr`将继续发送到控制台，从而在输出中造成混乱，并且只会`stdout`被管道处理。

[关于重定向的所有内容](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)将为您提供有关重定向的更多详细信息和控制。

**更新**：

**tcsh**：

基于使用`tcsh`（有时我认为我是唯一使用它的人），可以使用以下构造重定向`stderr`到：`stdout`

```
command |& ... 
```

所以

```
find /home/jassi/ -name "aliencoders.[0-9]+" |& xargs ls -lrt | awk '{print $9}' 
```

应该有帮助。在您的错误消息绕过您的管道并直接进入控制台之前，只有`stdout`您的管道处理。有了这个，你**所有**的输出都会通过管道，你可以过滤掉你想要的东西。

另外，请注意在`awk`命令末尾使用命令：

```
awk '{print $9}' 
```

与您最初发布的内容不同。

# javascript - 在 POST 变量中使用 '&'

> ID：11087843
> 
> 赞同：1
> 
> 时间：2012-06-18T17:21:15.013
> 
> 标签：javascript, html, ajax, forms, post

> **可能重复：**
> [ajax 发布特殊字符](https://stackoverflow.com/questions/1954502/ajax-post-special-characters)

我正在构建自己的 post 参数并通过 ajax 传递它们；但是，我的 POST 包含一个`&`符号。我怎样才能发布这些并转义特殊字符，使其仅作为文本发布并且不会拆分我的价值？

前任：

```
Thing=lala&lalala 
```

应该是`thing = 'lala&lalala'`，但我得到的是`thing = 'lala'`第二`='lalala'`个键是空白的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T17:23:14.157

[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)在将参数发送到服务器之前，您应该使用它们。它会正确地转义参数中的所有内容。

**快速示例：**

```
var s = 'Thing=' + encodeURIComponent('lala&lalala'); 
```

请注意，每个值都应该单独编码（所以你不应该简单地在整个查询字符串上使用它）。

# c# - 在单个处理程序中包装多个方法调用（每个都有不同的签名）

> ID：11087846
> 
> 赞同：5
> 
> 时间：2012-06-18T17:21:24.907
> 
> 标签：c#

我对第 3 方库中的方法进行了多次调用。这些方法具有多种不同的签名/参数组合。

第 3 方库生成的某些特定错误是我想要捕获和处理的，并且由于解决方案相同，我希望它发生在单个处理程序中。

所以我希望能够有一个方法，它基本上将函数（委托）及其参数作为参数接收，并在一些 try/catch 逻辑中调用它。

我不知道这是不可能的，还是我的语法不正确，但我不知道如何处理传入的每个方法的签名不同的事实。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:28:12.640

您可以使用`Action`and`Func<T>`来包装方法，并使用闭包来传递参数。

```
public TResult CallMethod<TResult>(Func<ThirdPartyClass, TResult> func)
{
    try
    {
        return func(this.wrappedObject);
    }
    catch(ThirdPartyException e)
    {
        // Handle
    }
}

public void CallMethod(Action<ThirdPartyClass> method)
{
    this.CallMethod(() => { method(this.WrappedObject); return 0; });
} 
```

然后您可以通过以下方式使用它：

```
var result = wrapper.CallMethod(thirdParty => thirdParty.Foo(bar, baz)); 
```

* * *

编辑：以上假设您正在包装第三方库的实例。鉴于（根据您的评论）这些是静态方法，您可以使用：

```
public static TResult CallMethod<TResult>(Func<TResult> func)
{
    try
    {
        return func();
    }
    catch(ThirdPartyException e)
    {
        // Handle
    }
}

public static void CallMethod(Action method)
{
    CallMethod(() => { method(); return 0; });
} 
```

然后通过以下方式调用：

```
var result = Wrapper.CallMethod(() => ThirdParty.Foo(bar, baz)); 
```

# reporting-services - 如何将报表呈现为具有不同页面方向的 PDF，并包含子报表的页眉/页脚？SSRS

> ID：11087847
> 
> 赞同：1
> 
> 时间：2012-06-18T17:21:27.287
> 
> 标签：reporting-services, ssrs-2008

使用 Reporting Services 2008 r2。

所以这是我的问题：

我们有 5 个报告需要合并为“所有报告”报告，该报告最初是使用 VB6 完成的。

我创建了一个包含 5 个子报表的主报表，当然，它不起作用。

**我需要将某些报告呈现为横向，而将其他报告呈现为纵向。另外，我想从每个子报表中获取页眉和页脚。**

***我知道 SSRS 不支持其中任何一个***，但是有没有办法将子报表“预渲染”为 PDF，然后通过报表服务将它们组合成一个 PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:12:25.447

这不能开箱即用。您要完成此操作的唯一方法是通过自定义代码。您可以构建/购买一些工具来将您的 PDF 合并到一个文档中。我无法评论哪种工具是最好的方法，但我可以告诉你自定义代码是唯一的方法。

# c# - c# 检查服务器上是否有特定名称的文件

> ID：11087848
> 
> 赞同：0
> 
> 时间：2012-06-18T17:21:27.277
> 
> 标签：c#, installation

我正在制作一个程序并想制作一个更新功能......所以假设我做了一个更新并将其放在我的保管箱上..当有人点击更新时，程序将检查是否有任何名称不同的文件（没有相同的版本) 在服务器上，如果有，则开始下载它.. 有可能吗？

我的第二个问题是我在我的电脑上安装了我的程序，但是当再次启动安装程序时它说：

*该产品的另一个版本已安装。此版本的安装无法继续。要配置或删除本产品的现有版本，请使用控制面板上的添加/删除程序。*

我希望当我第二次运行安装程序时，如果他想删除以前的版本来安装这个，会出现一条确认消息（我需要这个来更新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:45:38.767

您可以创建一个提供要同步的目录的索引/清单的 Web 服务。Web 服务还可以提供上传和下载同步文件和文件夹的方法。

如果您使用的是 Visual Studio 安装项目 (.msi)，您只需更改安装程序版本即可。Visual Studio 看到更改并询问您是否要更改产品代码。你会说“是”。然后，安装程序应在安装最新版本之前删除以前的版本。您还需要 DetectNewerInstalledVersion = true 和 RemovePreviousVersions = true。

不确定它是否适用于这种情况，但您可能想查看 ClickOnce 部署。它可以解决你的两个问题。[ClickOnce 部署](http://msdn.microsoft.com/en-us/library/ms227123%28v=vs.80%29.aspx)

# android - Android 全局触摸事件

> ID：11087849
> 
> 赞同：3
> 
> 时间：2012-06-18T17:21:30.133
> 
> 标签：android, service, touch

我正在android中制作一个后台应用程序A，并想在屏幕上捕捉触摸事件。因为前台应用 B（当前正在运行的一个）不是我的应用，所以我无法使用 Intent 进行应用间通信。

我是否可以像其他 GPS 或加速度计传感器一样，使用公共 API、挂钩（？），甚至在电容式触摸屏的低级别，或以任何方式读取触摸传感信息？（假设用户允许任何权限但生根）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:06:42.153

幸运的是，出于明显的安全和隐私原因，这是不可能的。

# c# - 盒子检测算法

> ID：11087850
> 
> 赞同：0
> 
> 时间：2012-06-18T17:21:31.687
> 
> 标签：c#, crop, edge-detection

我正在寻找在 C# 中制作程序的指导，该程序接收一堆 bmp 图像并检测图像上的一个框，并将裁剪后的框作为 bmp 图像返回到单独的文件夹中。

我正在使用 Visual Basic 2010。

我研究了 .NET 服务器具有的所有不同的内置算法，并且我还下载并尝试了 Emgucv 示例等等。[我找到了一个程序，它使用预设图像并将其裁剪到用户单击http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=30725](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=30725)的位置指定的某个矩形， 并试图合并部分这与内置于 Emgucv 参考的 Example.ShapeDetection.exe 一起使用。

```
using System;
using System.Drawing.Drawing2D;
using System.Collections;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Forms;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Text;
using Emgu.CV;
using Emgu.Util;
using Emgu.CV.Structure;
using Emgu.CV.CvEnum;

namespace Project1{
    public static class Project1 {
 public static void main()
    {
        //load in desired images to be processed
        //Load the image from file
     //for loop that runs all the code below for all the files in a certain folder
     //for example
     //for(int i = 0; i<"number of images in image folder"; i++){
     //code that loads the bmp images

    Image<Bgr, Byte> img = new Image<Bgr, byte>(fileNameTextBox.Text).Resize(400, 400, true);
    Image<Gray, Byte> gray = img.Convert<Gray, Byte>().PyrDown().PyrUp();
    Gray cannyThreshold = new Gray(180);
    Gray cannyThresholdLinking = new Gray(120);
    Gray circleAccumulatorThreshold = new Gray(120);
    Image<Gray, Byte> cannyEdges = gray.Canny(cannyThreshold, cannyThresholdLinking);
    LineSegment2D[] lines = cannyEdges.HoughLinesBinary(
        1, //Distance resolution in pixel-related units
        Math.PI / 45.0, //Angle resolution measured in radians.
        20, //threshold
        10, //min Line width
        10 //gap between lines
        )[0]; //Get the lines from the first channel

    #region Find rectangles

    List<MCvBox2D> boxList = new List<MCvBox2D>();

    using (MemStorage storage = new MemStorage()) //allocate storage for contour approximation
        for (Contour<Point> contours = cannyEdges.FindContours(); contours != null; contours = contours.HNext)
        {
            Contour<Point> currentContour = contours.ApproxPoly(contours.Perimeter * 0.05, storage);

            if (contours.Area > 100) //only consider contours with area greater than 250
            {
                if (currentContour.Total == 4) //The contour has 4 vertices.
                {
                    #region determine if all the angles in the contour are 90 degree's
                    bool isRectangle = true;
                    Point[] pts = currentContour.ToArray();
                    LineSegment2D[] edges = PointCollection.PolyLine(pts, true);

                    for (int i = 0; i < edges.Length; i++)
                    {
                        double angle = Math.Abs(
                           edges[(i + 1) % edges.Length].GetExteriorAngleDegree(edges[i]));
                        if (angle < 89 || angle > 91)
                        {
                            isRectangle = false;
                            break;
                        }
                    }

                    #endregion

                    if (isRectangle) boxList.Add(currentContour.GetMinAreaRect());
                }
            }
        }
    #endregion

    originalImageBox.Image = img;

    #region draw rectangles
    Image<Bgr, Byte> RectangleImage = img.Copy();
    foreach (MCvBox2D box in boxList)
        RectangleImage.Draw(box, new Bgr(Color.Green), 2);
    RectangleImageBox.Image = RectangleImage;
    #endregion
}
}
} 
```

这是我目前拥有的代码，我知道它有几个问题，但我似乎找不到解决它们的方法。

1.  当前上下文中不存在 filenameImageBox、originalImageBox 和 RectangleImageBox。我的猜测是，这是因为他们引用了一个不再存在的图像。

2.  正如我在评论中所说，我正在尝试编写一个循环，遍历资源中的所有 *.bmp 图像并将它们加载到程序中。我不知道该去哪里。

3.  最重要的是，这段代码希望能检测到我正在寻找的矩形，并简单地在空白图像上的相同位置重新绘制一个具有相同尺寸的矩形。我想做的是简单地将矩形裁剪为全屏的大小。上面链接的裁剪图像程序中有一些部分可以做到这一点，但我正在努力使用 ShapeDetection 算法的矩形检测将裁剪与该程序隔离开来。

建议将不胜感激。我只在 C# 中工作了几周，虽然之前有 C++ 和 Java 方面的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:10:47.887

我想这会对你有所帮助

```
 else if (currentContour.Total == 4) //The contour has 4 vertices.
                    {double angle = Math.Abs(edges[(i + 1) % edges.Length].GetExteriorAngleDegree(edges[i]));
                             if (angle > 75 || angle < 95)
                            {... 
```

# sql - 更新具有相同标识符且列 > 0 的最早日期的列

> ID：11087853
> 
> 赞同：0
> 
> 时间：2012-06-18T17:21:40.610
> 
> 标签：sql, sql-server, sql-server-2008

我有一个简化的数据库，如下所示：

```
ID  |  SecondID   |  DateRecorded  |  NumberToCheck  |  NumberToUpdate 
```

`NumberToUpdate`当前所有行的值为 0。

我希望用同一行上`NumberToUpdate`的值进行更新，减去 具有最早“ ”的值，其中大于 0，并且具有与原始行相同的 ID 和 secondID。`NumberToCheck``NumberToCheck``DateRecorded``(Min(DateRecorded)``NumberToCheck`

到目前为止我有

```
UPDATE dbo.Table
SET NumberToUpdate =//Update NumberToUpdate
   NumberToCheck - //NumberToCheck from the current row, subtracting...
      (SELECT TOP 1 t2.NumberToCheck FROM Table t2 WHERE ID = t2.ID AND secondID = t2.secondID AND t2.DateRecorded = 
      (SELECT TOP 1 MIN(t3.DateRecorded) FROM Table t3  WHERE t2.ID = t3.ID AND t2.secondID = t3.secondID AND t3.Passes > 0))
      //the NumberToCheck with the earliest date, of the same ID. 
```

然而，这是不正确的，并且返回给我没有意义的值（包括不应该有的负值！）

我在这里忘记了什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:31:21.463

首先，您应该从一个选择查询开始以获得您想要的值：

```
select t.*
from (select t.*, row_number() over (partition by id order by date) as seqnum
      from table t
      where number_to_check > 0
     ) t
where seqnum = 1 
```

现在，您可以在原始更新中使用它：

```
with vals as (select t.*
              from (select t.*, row_number() over (partition by id order by date) as seqnum
                    from table t
                    where NumberToCheck > 0
                   ) t
              where seqnum = 1
             )
update table
    set NumberToUpdate = NumberToCheck - vals.NumberToCheck
from vals
where t.id = vals.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:32:40.500

```
UPDATE dbo.Table as t1
INNER JOIN
(
  SELECT MIN(DateRecord) as mindate, ID
  FROM dbo.Table
  GROUP BY ID
) as mindates
ON t1.ID = mindates.ID
INNER JOIN
dbo.Table as substractions
ON mindates.mindate = substraction.DateRecord
AND mindates.ID = substraction.ID
SET t1.numberToUpdate = t1.numberToCheck - substractions.NumberToCheck
WHERE substraction.NumberToCheck > 0
--your questions is ambigious here: did you mean this one should be greater than 0, or should t1.NumberToCheck > 0 ?
AND t1.DateRecord <> mindates.mindate
--Assuming that you don't want to update the record with the lowest date. 
```

注意：这假设 DateRecord 与 ID 结合是唯一的，您的结构不能保证这一点。恐怕有了这种表格布局，就没有别的办法了。

# sql - 当所有字段都是可选的时更新查询

> ID：11087857
> 
> 赞同：5
> 
> 时间：2012-06-18T17:21:58.877
> 
> 标签：sql, coldfusion

我有一个需要更新的表，其中所有列都可以选择传递给一个方法。

然后我使用 ColdFusion 检查是否每列都已通过并将其添加到更新查询中。

做这个的最好方式是什么？我不能总是更新 user_id 字段，因为它是一个身份字段。有没有类似于我下面设置的 1 = 1 的东西可以工作？问题只是逗号导致语法错误。

谢谢你的帮助。

```
update users
set 1 = 1
    <cfif len(arguments.userType)>,user_type = #arguments.userType#</cfif>
    <cfif len(arguments.primaryGroupId)>,primary_group_id = #arguments.primaryGroupId#</cfif>
    <cfif len(arguments.email)>,email = '#arguments.email#'</cfif>
    <cfif len(arguments.password)>,password = '#arguments.password#'</cfif>
    <cfif len(arguments.firstName)>,first_name = '#arguments.firstName#'</cfif>
    <cfif len(arguments.lastName)>,last_name = '#arguments.lastName#'</cfif>
    <cfif len(arguments.status)>,status = '#arguments.status#'</cfif>
    <cfif len(arguments.languageId)>,language_id = #arguments.languageId#</cfif>
    <cfif len(arguments.gmtOffset)>,gmt_offset = '#arguments.gmtOffset#'</cfif>
where user_id = #arguments.userId# 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:45:18.000

如果您正在更新，并且未传递参数，则只需将其设置为当前值。

```
update users
set
    user_type = <cfif len(arguments.user_type)>#arguments.userType#<cfelse>user_type</cfif>
    ,primary_group_id = <cfif len(arguments.primaryGroupId)>#arguments.primaryGroupId#<cfelse>primary_group_id</cfif>
    ,email = <cfif len(arguments.email)>'#arguments.email#'<cfelse>email</cfif>
where user_id = #arguments.userId# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:36:53.340

嗯...您可以计算您所做的更新次数。这将“修复”上面的查询。如：

```
<cfset updCt = false/>
<cfif len(arguments.usertype)>, user_type = #arguments.userType# 
    <cfset updCt = true/>
</cfif>
<cfif len(arguments.primaryGroupID)>
  <cfif updCt>,</cfif> 
    primary_group_id = #arguments.primaryGroupID# <cfset updCT = true/>
</cfif> 
```

...你明白了。虽然很乱。我想我更有可能确保所有参数都在那里 - 传递未更改的值，以便查询更新整个数据集（或其他）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:49:08.943

如果您可以将所有参数（除了 UserID）设为可选且没有默认值，那么您可以执行以下操作：

```
<cffunction name="updateUser">
 <cfargument name="userID" required="true">

 <cfset argumentMap = {field1 = {name="field_1", type="cf_sql_varchar"},
                      field2 = {name="field_2", type="cf_sql_numeric"},
                      ....} />
 <!--- where field1, field2, etc will match the name 
       of the arguments to your function--->

 <cfif arrayLen(structKeyArray(arguments)) gt 1>
   <cfquery>
   UPDATE users
     SET
      <cfloop collection="#arguments#" item="arg">
         #argumentMap[arg].name# = <cfqueryparam 
                                       value="#arguments[arg]#"
                                       type="#argumentMap[arg].type#" />
      </cfloop>
     WHERE user_id = <Cfqueryparam value="#arguments.userID#" type="cf_sql_numeric"/>
   </cfquery>
 </cfif>
</cffunction> 
```

这只会使用给定的参数执行 UPDATE 语句。

# java - 如何使用java检查子域是否也来自同一个域

> ID：11087858
> 
> 赞同：1
> 
> 时间：2012-06-18T17:22:00.500
> 
> 标签：java

我有一个我需要过滤特定域和子域的 url 列表。说我有一些域名，比如

```
http://www.example.com
http://test.example.com
http://test2.example.com 
```

我需要从域 example.com 中提取 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:56:22.673

我了解您可能正在寻找使用 URL 类或其他东西的奇特解决方案，但这不是必需的。只需想一种从每个 url 中提取“example.com”的方法。

注意：example.com 与 example.net 本质上是不同的域。因此，仅提取“示例”在技术上是错误的做法。

我们可以划分一个示例 url 说：

```
http://sub.example.com/page1.html 
```

**第 1 步：使用分隔符***“/”*拆分 url，以提取包含域的部分。

每个这样的部分都可以以以下块的形式查看（可能为空）

```
[www][subdomain][basedomain] 
```

**第 2 步：**丢弃*“www”*（如果存在）。我们剩下 [subdomain] [basedomain]

**第 3 步：使用分隔符***“.”*分割字符串

 ***第 4 步：**查找拆分生成的字符串总数。如果有 2 个字符串，它们都是目标域（example 和 com）。如果有 >=3 个字符串，则获取最后 3 个字符串。如果最后一个字符串的长度为 3，则最后 2 个字符串构成域（example 和 com）。如果最后一个字符串的长度为 2，则最后 3 个字符串组成域（example 和 co 和 uk）

我认为这应该可以解决问题（我希望这不是家庭作业：D）

```
 //You may clean this method to make it more optimum / better
    private String getRootDomain(String url){
         String[] domainKeys = url.split("/")[2].split("\\.");
             int length = domainKeys.length;
             int dummy = domainKeys[0].equals("www")?1:0;
             if(length-dummy == 2) 
                  return domainKeys[length-2] + "." + domainKeys[length-1];
             else{
                  if(domainKeys[length-1].length == 2) {
                       return domainKeys[length-3] + "." + domainKeys[length-2] + "." + domainKeys[length-1];
                  }
                  else{
                       return domainKeys[length-2] + "." + domainKeys[length-1];
                  }       
             }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-29T21:40:24.147

处理需要我确定两个 URL 是否来自同一个子域的项目（即使存在嵌套域）。我从上面的指南中进行了修改。到目前为止，这很好：

```
public static boolean isOneSubdomainOfTheOther(String a, String b) {

        try {
            URL first = new URL(a);
            String firstHost = first.getHost();
            firstHost = firstHost.startsWith("www.") ? firstHost.substring(4) : firstHost;

            URL second = new URL(b);
            String secondHost = second.getHost();
            secondHost = secondHost.startsWith("www.") ? secondHost.substring(4) : secondHost;

            /*
             Test if one is a substring of the other
             */           
            if (firstHost.contains(secondHost) || secondHost.contains(firstHost)) {

                String[] firstPieces = firstHost.split("\\.");
                String[] secondPieces = secondHost.split("\\.");

                String[] longerHost = {""};
                String[] shorterHost = {""};

                if (firstPieces.length >= secondPieces.length) {
                    longerHost = firstPieces;
                    shorterHost = secondPieces;
                } else {
                    longerHost = secondPieces;
                    shorterHost = firstPieces;
                }
                //int longLength = longURL.length;
                int minLength = shorterHost.length;
                int i = 1;

                /*
                 Compare from the tail of both host and work backwards
                 */
                while (minLength > 0) {
                    String tail1 = longerHost[longerHost.length - i];
                    String tail2 = shorterHost[shorterHost.length - i];

                    if (tail1.equalsIgnoreCase(tail2)) {
                        //move up one place to the left
                        minLength--;
                    } else {
                        //domains do not match
                        return false;
                    }
                    i++;
                }
                if (minLength == 0) //shorter host exhausted. Is a sub domain
                    return true;
            }
        } catch (MalformedURLException ex) {
            ex.printStackTrace();
        }
        return false;
    } 
```

图我把它留在这里，以备将来参考类似的问题。*

# java - Java - 列出 int 数组中重复值的索引

> ID：11087861
> 
> 赞同：3
> 
> 时间：2012-06-18T17:22:01.693
> 
> 标签：java, arrays, eclipse, exception, duplicates

我必须找到并列出数组中所有重复的索引值。

示例：int[] 数组 = { 0, 7, 9, 1, 5, 8, 7, 4, 7, 3};

7 位于索引 1、6 和 8 的三个不同位置。我将如何修改现有代码以使 outputResults.setText() 显示重复值的位置？outputResults.setText() 是 JTextField 如果有帮助的话。

```
String tmp1 = getNumbers.getText();
    try {
        int search = Integer.parseInt(tmp1);
        for (p = 0; p < array.length; p++) {
            if(array[p]==search) {
                b = true;
                index = p;
            }
        }   
        if(b==true)
            outputResults.setText(search + " was in the following fields of the array " + index);
         else 
            throw new NumberNotFoundException("Your number was not found.");

    } catch (NumberFormatException ex) {
        JOptionPane.showMessageDialog(getContentPane(), "You can only search for integers.");

    } catch (NumberNotFoundException ex) {
        JOptionPane.showMessageDialog(getContentPane(), ex.getMessage());
    } 
```

在当前状态下，它将仅列出上次找到重复号码的时间，根据我的示例，该号码将是索引 8。数组中的数字列表由用户输入，我不允许对值进行排序。我最初的猜测是创建一个嵌套循环，每当它找到一个重复的数字时，将 p （它正在搜索的当前索引）添加到一个新数组中。然后我会在 outputResults.setText() 中列出完整的数组，但是当我尝试时它给出了几个警告和错误。

如果需要，可以在这里找到完整的代码：[http](http://pastebin.com/R7rfWAv0) ://pastebin.com/R7rfWAv0 是的，完整的程序是一团糟，但它完成了工作，我对此感到非常头疼。另请注意，在完整程序中，如果检测到重复值作为额外学分，教授要求我们抛出异常。我做到了，但我将其注释掉以完成原始作业，因此请忽略它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:58:30.340

不需要哈希表、列表或其他任何东西，你可以很容易地做到这一点：

```
int [] array = { 0, 7, 9, 1, 5, 8, 7, 4, 7, 3};
int pointer=0;
int currNumber;
while(pointer<array.length)
{   
  currNumber=array[pointer];
  for(int i=0;i<array.length;i++){          
    if(currNumber==array[i] && i>pointer){
        System.out.println("Duplicate for "+currNumber +" in " +i);
        break;
    }
  }   
  pointer++;
} 
```

它将打印数组中所有数字的所有重复项。

```
Duplicate for 7 in 6
Duplicate for 7 in 8 
```

显然，您可能必须连接一个字符串并通过调用在循环结束时显示它`outputResults.setText()`

[演示在这里。](http://ideone.com/Ba6tF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:30:52.297

我认为您应该使用 a`List`来记录索引

```
List<Integer> indexs =new ArrayList<Integer>();
for (p = 0; p < array.length; p++) {
    if(array[p]==search) {
        indexs.add(p);
    }
}
if(p.length()>0){
    //print the result
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-04T01:53:33.980

只有两个 for 循环怎么样？

```
for (int i = 0; i < array.length; i++) {
  for (int j = 0; j < array.length; j++) {
    if (array[i] == array[j]) {
      System.out.println("Duplicate - " + array[i] + " found at index " + i + " and " + j);
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:41:41.953

当您遍历数组时，您将使用 line 覆盖任何先前找到的索引`index = p;`。此行仅在出现一次正在搜索​​的值时才有效。让`index`成为一个字符串，并在每次到达那条线时连接到它，这样`index += " "+p;`. 您的线路：

```
 outputResults.setText(search + " was in the following fields of the array " + index); 
```

然后将打印出正在搜索的值的所有找到的索引。

因此，有几种方法可以完成您的解决方案（有些天真，有些是最佳）。您应该仔细考虑您要实现的目标，并在遇到问题时弄清楚代码（调试）中的每一行都在做什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T17:31:33.340

一种选择是创建一个使用该值作为键的 HashMap，并为该值创建一组索引。当您扫描数组时，如果该值不在 HashMap 中，请使用新的索引集合添加它。如果值在数组中，则拉取集合，添加下一个索引并完成迭代。

完成后，迭代 HashMap，任何具有 size() > 1 值的条目都有重复项。

# c - 编译器如何翻译 while(foo)？

> ID：11087863
> 
> 赞同：-1
> 
> 时间：2012-06-18T17:22:08.223
> 
> 标签：c, compiler-construction

如果我从语句中省略运算符，如下所示： `while(foo)`编译器会将其转入`while(foo != NULL || *foo != '\0' || foo != 0)`或类似的`while(!foo)`东西吗？

它是如何真正做到的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:24:24.140

`while (condition)`只检查`condition`非零。

因此这两个是等价的：

```
while (foo)
while (foo != 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:27:47.130

NULL、'\0' 和 0 在功能上是相同的，只是它们用于不同的类型。

因此`foo`，例如，如果是一个 int，`while (foo)`则意味着`while (foo!=0)`

如果 foo 是一个指针，`while (foo)`意味着`while (foo!=NULL)`

等等。不过，编译器从不检查 foo 指向的值。

# c# - 让 ajax 参与自动完成

> ID：11087867
> 
> 赞同：1
> 
> 时间：2012-06-18T17:22:28.677
> 
> 标签：c#, ajax, json, asp.net-mvc-3

目前我有这个自动完成选项：

```
<script type="text/javascript">
    $().ready(function () {

        $("#tags").autocomplete(["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby", "python", "c", "scala", "groovy", "haskell", "pearl"], {
            width: 320,
            max: 4,
            highlight: false,
            multiple: true,
            multipleSeparator: " ",
            scroll: true,
            scrollHeight: 300
        });
    });
    </script>

    <body> <p>
        <label>Tags (local):</label>
        <input type="text" id='tags' />
    </p>
</body> 
```

但我想从一个动作方法中得到这个数组：[“c++”，“java”，“php”，“coldfusion”，“javascript”，“asp”，“ruby”，“python”，“c”， “scala”、“groovy”、“haskell”、“pearl”]。例如，来自控制器“搜索”中的操作“快速搜索”。

所以是这样的：

```
public ActionResult QuickSearch(string term)
        {
            IEnumerable<string> list = test();
            return Json(list, JsonRequestBehavior.AllowGet);
        } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:29:28.707

是的，您可以将 URL 放入将数据源作为“源”参数返回给自动完成功能的操作方法。从文档中：

数据源可以是：

*   包含本地数据的数组
*   一个字符串，指定一个 URL
*   回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:52:08.760

你几乎在那里：

```
<script type="text/javascript">
$().ready(function () {

    $("#tags").autocomplete({
        source: "URL to your method"
        width: 320,
        max: 4,
        highlight: false,
        multiple: true,
        multipleSeparator: " ",
        scroll: true,
        scrollHeight: 300
    });
});
</script> 
```

您需要向传入的选项对象添加一个源属性，该源可以是一个数组、一个回调，或者在您的情况下是一个方法的 URL。

来自根的相对 URL 将是“搜索/快速搜索”

# sql-server - SQL - 我可以传递要在 FROM 语句中使用的变量吗？

> ID：11087869
> 
> 赞同：1
> 
> 时间：2012-06-18T17:22:33.127
> 
> 标签：sql-server, tsql

我可以将变量传递给`SELECT`语句吗？

我不断收到一条错误消息，说我需要声明它。

但是，它被声明了。

```
SELECT (list of columns)
FROM @database_table 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:24:02.807

您正在寻找使用动态 SQL 来执行这种类型的查询。

[动态 SQL 的祸与福](http://www.sommarskog.se/dynamic_sql.html)

这是一个快速示例

```
declare @sqlstatement nvarchar(4000)
declare @table sysname
set @table = 'yourTableName'

set @sqlstatement = 'SELECT * FROM ' + QUOTENAME(@table)
exec(@sqlstatement) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:26:20.280

当您使用表变量时，您可以做任何您想做的事情。您必须将变量定义为：

```
declare @name table (<column list>) 
```

这是声明临时表的替代方法。

除此之外，我完全同意 bluefeet。你应该阅读他发布的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:55:23.947

是的，使用动态 sql 语句来构建您的 select 语句。

```
-- Procedure input parameters
@TableName varchar(50)

-- Query guts
Declare @sql varchar(2000)
Set @sql = 'Select columnname from ' + @TableName
exec (@sql) 
```

# css - “下一步”按钮无法正确对齐

> ID：11087870
> 
> 赞同：0
> 
> 时间：2012-06-18T17:22:34.047
> 
> 标签：css, button, html, position, css-float

我有两个相邻的部分——一个是最近的工作，另一个是最近的博客文章。这些部分中的每一个都有 3 个缩略图，我希望在其最右侧有一个“下一步”按钮（尽管它将是一个椭圆的 .png）。在不影响其他元素的情况下，我很难将每个下一个按钮放到正确的位置。

这部分今天真的给我带来了一些麻烦，所以非常感谢任何和所有的帮助。

**如果我还要问：我一直无法在`<p><span>`下面为元素提供适当的填充（应该是 20 像素）。我如何实现这一目标？

这是我目前拥有的： ![当前的](../Images/13cae44c0b6ae28a0cff6da127a89c79.png)

这是我希望最终设置的样子： ![理想的](../Images/226b13261c5c38d372cf1207e9fca4fc.png)

```
<div id="recent">
        <div id="recent-work">
            <p><span>Recent Work</span></p>
                <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
                <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
                <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
            <div class="next">
                <a href="#"><img src="img/next.png" alt="Click for more information" /></a>
            </div><!-- end next -->
        </div><!-- end recent-work -->

        <div class="divider">
            <img src="img/divider.png" alt="Section divider" />
        </div><!-- end divider -->

        <div id="recent-blog">
            <p><span>Recent Blog</span></p>
                <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
                <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
                <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
            <div class="next">
                <a href="#"><img src="img/next.png" alt="Click for more information" /></a>
            </div><!-- end next -->
        </div><!-- end recent-blog -->
    </div><!-- end recent --> 
```

和

```
#recent {
    border-top: 1px solid #202020;
    padding-bottom: 40px;
    padding-top: 40px;
}

#recent .divider {
    display: block;
    float: left;
    margin-left: 20px;
}

#recent #recent-work {
    display: block;
    float: left;
}

#recent #recent-work p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    padding-bottom: 20px;
    text-transform: uppercase;
}

#recent #recent-work a {
    padding-bottom: 40px;
    padding-right: 20px;
}

#recent #recent-work .next{
    float: right;
}

#recent #recent-blog {
    display: block;
    float: right;
}

#recent #recent-blog p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    padding-left: 20px;
    text-transform: uppercase;
}

#recent #recent-blog a {
    padding-bottom: 40px;
    padding-left: 20px;
}

#recent #recent-blog .next{
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:36:48.393

您可以尝试使用`position: absolute;`以获得您想要的“下一步按钮”。试试这个：

**HTML**

```
<div id="recent">
    <div id="recent-work">
        <p><span>Recent Work</span></p>
        <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
        <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
        <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>

        <div class="next">
            <a href="#"><img src="img/next.png" alt="Click for more information" /></a>
        </div><!-- end next -->

     </div><!-- end recent-work -->

     <div class="divider">
        <img src="img/divider.png" alt="Section divider" />
     </div><!-- end divider -->

     <div id="recent-blog">
        <p><span>Recent Blog</span></p>
        <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
        <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>
        <a href="#"><img src="http://lorempixel.com/130/130/" alt="Click for more information" /></a>

        <div class="next">
            <a href="#"><img src="img/next.png" alt="Click for more information" /></a>
        </div><!-- end next -->

     </div><!-- end recent-blog -->
</div><!-- end recent --> 
```

**CSS**

```
#recent {
    border-top: 1px solid #202020;
    padding-bottom: 40px;
    padding-top: 40px;
}

#recent .divider {
    display: block;
    float: left;
    margin-left: 20px;
}

#recent #recent-work {
    display: block;
    float: left;
    position:relative;
}

#recent #recent-work p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    padding-bottom: 20px;
    text-transform: uppercase;
}

#recent #recent-work a {
    padding-bottom: 40px;
    padding-right: 20px;
}

#recent #recent-blog {
    display: block;
    float: right;
    position:relative;
}

#recent #recent-blog p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    padding-left: 20px;
    text-transform: uppercase;
}

#recent #recent-blog a {
    padding-bottom: 40px;
    padding-left: 20px;
}

#recent .next{
position:absolute;
bottom:-15px;
right:0;
} 
```

希望它可以帮助你！

# php - PHP cURL POST 返回 415 - 不支持的媒体类型

> ID：11087872
> 
> 赞同：7
> 
> 时间：2012-06-18T17:22:37.943
> 
> 标签：php, post, curl, jboss

我有一个简单的 PHP 脚本，它通过 cURL 发送一个 HTTP POST 请求，并期望一个 json 字符串作为响应（本想为此使用像 pecl_http/HTTPRequest 这样的现有库，但不能）。调用始终失败并出现 415 错误 - 不支持的媒体类型。我认为我没有正确配置 cURL，但是经过大量搜索，我无法找出我做错了什么。这是一些代码：

```
class URLRequest
{
    public $url;
    public $headers;
    public $params;
    public $body;
    public $expectedFormat;
    public $method;

    public function URLRequest($aUrl, array $aHeaders, array $aParams, $aFormat = "json", $isPost = false, $aBody = "+")
    {
        $this->url = $aUrl;
        $this->headers = $aHeaders;
        $this->params = $aParams;
        $this->expectedFormat = $aFormat;
        $this->method = ($isPost ? "POST" : "GET");
        $this->body = $aBody;

    }

    public function exec()
    {

        $queryStr = "?";
        foreach($this->params as $key=>$val)
            $queryStr .= $key . "=" . $val . "&";

        //trim the last '&'
        $queryStr = rtrim($queryStr, "&");

        $url = $this->url . $queryStr;

        $request = curl_init();
        curl_setopt($request, CURLOPT_URL, $url);
        curl_setopt($request, CURLOPT_HEADER, 1);
        curl_setopt($request, CURLOPT_HTTPHEADER, $this->headers);
        curl_setopt($request, CURLOPT_RETURNTRANSFER, 1);
        //curl_setopt($request, CURLOPT_SSL_VERIFYPEER, false);

        if($this->method == "POST")
        {
            curl_setopt($request, CURLOPT_POST, 1);
            curl_setopt($request, CURLOPT_POSTFIELDS, $this->body);

            //this prevents an additions code 100 from getting returned
            //found it in some forum - seems kind of hacky
            curl_setopt($request, CURLOPT_HTTPHEADER, array("Expect:"));
        }

        $response = curl_exec($request);
        curl_close($request);

        preg_match("%(?<=HTTP/[0-9]\.[0-9] )[0-9]+%", $response, $code);

        $resp = "";
        if($this->expectedFormat == "json")
        {
            //parse response
        }
        elseif($this->expectedFormat == "xml")
        {
            //parse response
        }

        return $resp;

    }
}

$url = "http://mydomain.com/myrestcall";

$query = array( "arg_1" =>      "test001",
                "arg_2" =>      "test002",
                "arg_3" =>      "test003");

$headers = array(    "Accept-Encoding" =>    "gzip",
                    "Content-Type" =>       "application/json",
                    "Accept" =>             "application/json",
                    "custom_header_1" =>    "test011",
                    "custom_header_2" =>    "test012",
                    "custom_header_3" =>    "test013");

$body = array(  "body_arg_1" =>      "test021",
                "body_arg_2" =>     array("test022", "test023"), 
                "body_arg_3" =>     "test024"); 

$request = new URLRequest($url, $headers, $query, "json", true, $body);

$response = $request->exec(); 
```

...和回应：

```
HTTP/1.1 415 Unsupported Media Type
Server: Apache-Coyote/1.1
X-Powered-By: Servlet 2.5; JBoss-5.0/JBossWeb-2.1
Content-Type: text/html;charset=utf-8
Content-Length: 1047
Date: Mon, 18 Jun 2012 16:30:44 GMT

<html><head><title>JBoss Web/2.1.3.GA - Error report</title></head><body><h1>HTTP Status 415 - </h1><p><b>type</b> Status report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>The server refused this request because the request entity is in a format not supported by the requested resource for the requested method ().</u></p><h3>JBoss Web/2.1.3.GA</h3></body></html> 
```

有什么见解或想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-18T21:20:16.220

问题解决了！这是问题：

发送标题的关联数组不适用于 cURL。有几个论坛散布在展示使用关联数组作为标题的示例。不要这样做！

*正确*的方法（它也散布在互联网上，但我太密集以至于没有注意到）是将标题键/值对构造为字符串，并在设置 CURLOPT_HTTPHEADER 选项时传递这些字符串的标准数组。

所以总而言之，

**错误的：**

```
$headers = array(    "Accept-Encoding" =>    "gzip",
                     "Content-Type" =>       "application/json",
                     "custom_header_1" =>    "test011",
                     "custom_header_2" =>    "test012",
                     "custom_header_3" =>    "test013"); 
```

**对：**

```
$headers = array(    "Accept-Encoding: gzip",
                     "Content-Type: application/json",
                     "custom_header_1: test011",
                     "custom_header_2: test012",
                     "custom_header_3: test013"); 
```

我希望在他们像我一样浪费大量时间调试之前，这对其他一些高贵的傻瓜有用。

如果我不得不猜测，我会假设相同的规则也适用于 POST 正文键/值对，这就是为什么 @drew010 关于使用`http_build_query()`或`json_encode()`字符串化您的消息正文的评论也是一个好主意。

感谢大家非常有用的评论，感谢您的时间和考虑。最后，对 http 流量（通过 Wireshark 捕获）的并排比较揭示了这个问题。

谢谢！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T17:43:46.067

我认为问题在于您将数组作为`CURLOPT_POSTFIELDS`选项传递。通过传递一个数组，这会强制`POST`请求`multipart/form-data`在服务器可能期望的时候使用`application/x-www-form-urlencoded`。

尝试改变

```
curl_setopt($request, CURLOPT_POSTFIELDS, $this->body); 
```

到

```
curl_setopt($request, CURLOPT_POSTFIELDS, http_build_query($this->body)); 
```

有关更多信息，请参阅[http_build_query](http://php.net/http_build_query)以及此答案：[我的 cURL 请求使某些服务器感到困惑？](https://stackoverflow.com/questions/9559662/my-curl-request-confuses-some-servers/9559752#9559752)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-28T18:11:50.023

我有同样的问题，我修复了更改标题。

我的代码：

```
$authorization = 'authorization: Bearer '.trim($apiKey);
$header = [
'Content-Type: application/json',
$authorization
];
curl_setopt($session, CURLOPT_HTTPHEADER, $header); 
```

我不知道为什么数组函数不起作用：

```
curl_setopt($session, CURLOPT_HTTPHEADER, array('Content-Type: 
application/json',
$authorization)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-23T13:30:53.250

这对我有用

```
 $data ="data";

 $headers = [
                "Content-Type: application/json",
                "X-Content-Type-Options:nosniff",
                "Accept:application/json",
                "Cache-Control:no-cache"
            ];

  $auth =  $USER . ":" . $PASSWORD;

 $curl = curl_init();
        curl_setopt($curl,CURLOPT_URL, $url);
        curl_setopt($curl,CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl,CURLOPT_ENCODING, "");
        curl_setopt($curl,CURLOPT_MAXREDIRS, 10);
        curl_setopt($curl,CURLOPT_TIMEOUT, 0);
        curl_setopt($curl,CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($curl,CURLOPT_HTTP_VERSION,CURL_HTTP_VERSION_1_1);
        curl_setopt($curl,CURLOPT_CUSTOMREQUEST, "POST");
        curl_setopt($curl,CURLOPT_POSTFIELDS, json_encode($data)); 
        curl_setopt($curl, CURLOPT_USERPWD,  $auth);  
        curl_setopt($curl,CURLOPT_HTTPHEADER, $headers);

         $result = curl_exec($curl); 
```

# java - Spring程序化事务管理警告？

> ID：11087873
> 
> 赞同：6
> 
> 时间：2012-06-18T17:22:38.457
> 
> 标签：java, spring, transactions

Spring 支持程序化事务，这使我们能够对 TX 管理进行细粒度控制。根据 Spring 文档，可以通过以下方式使用程序化 TX 管理：
1\. 利用 Spring 的 TransactionTemplate：

```
transactionTemplate.execute(new TransactionCallbackWithoutResult() {

protected void doInTransactionWithoutResult(TransactionStatus status) {
    try {
        updateOperation1();
        updateOperation2();
    } catch (SomeBusinessExeption ex) {
        status.setRollbackOnly();
    }
} }); 
```

2\. 直接利用 PlatformTransactionManager（将 PlatformTransactionManager 实现注入 DAO）：

```
DefaultTransactionDefinition def = new DefaultTransactionDefinition();
def.setName("SomeTxName");
def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);

//txManager is a reference to PlatformTransactionManager
TransactionStatus status = txManager.getTransaction(def);
try {
  updateOperation1();
  updateOperation2();
}
catch (MyException ex) {
    txManager.rollback(status);
    throw ex;
}
txManager.commit(status); 
```

为了简单起见，假设我们正在处理 JDBC 数据库操作。

我想知道`updateOperation1(),updateOperation2()`在第二个片段中发生的任何数据库操作，或者它是用实现的，`JDBCTemplate`或者`JDBCDaoSupport`，如果不是，该操作实际上没有在任何事务中执行，是吗？

我的分析是，如果我们不使用`JDBCTemplate`or `JDBCDaoSupport`，我们不可避免地会从数据源管理中创建/检索连接。我们得到的连接当然不是`PlatformTransactionManager`底层用来管理事务的连接。

我挖掘了 Spring 源代码和略过相关的类，发现它们`PlatformTransactionManager`将尝试检索包含在`ConnectionHolder`其中的连接，作为回报，从`TransactionSynchronizationManager`. 我还发现`JDBCTemplate`并`JDBCDaoSupport,`尝试与类似的例程建立联系`TransactionSynchronizationManager.`

因为`TransactionSynchronizationManager`管理许多资源，包括每个线程的连接（基本上用于`Threadlocal`确保一个线程获得自己唯一的托管资源实例）

所以我认为 PlatformTransactionManager 和`JDBCTemplate`or检索到的连接`JDBCDaoSupport`是一样的，这可以解释 spring 编程事务确保如何`updateOperation1(),updateOperation2()`被事务保护。

我的分析正确吗？如果是，为什么 Spring 文档没有强调这个警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:42:55.737

是的，这是正确的。

任何使用 raw`Connection`的代码都应该以特殊方式获取它们`DataSource`，以便参与 Spring 管理的事务（[12.3.8 DataSourceTransactionManager](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html#jdbc-DataSourceTransactionManager)）：

> 应用程序代码需要通过 DataSourceUtils.getConnection(DataSource) 而不是 Java EE 的标准 DataSource.getConnection 来检索 JDBC 连接。

另一种选择（如果您不能更改调用的代码`getConnection()`）是`DataSource`用[`TransactionAwareDataSourceProxy`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy.html).

# java - Java中的多线程和垃圾收集

> ID：11087875
> 
> 赞同：2
> 
> 时间：2012-06-18T17:22:50.593
> 
> 标签：java, garbage-collection

有人可以给我一些建议吗？我正在阅读一篇旧文本和我老师的一些笔记，当在 Java 中使用多线程时，有必要编写一个特殊的垃圾收集程序。

这仍然适用于 Java SE6 及更高版本吗？如果确实如此，有人可以提供执行此操作的标准方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:26:55.587

据我所知，只要没有任何东西指向一个对象，垃圾收集器就会释放该对象。

Java 的垃圾收集器在循环引用方面非常健壮，我不明白为什么它不适用于同时运行的多个线程。

因此，您可以放心地假设**您不需要为垃圾收集编写特殊的程序，因为 java 会非常有效地为您完成。**

如果要在 java 中释放对象，只需确保没有变量引用您的对象。（包括来自 java 集合或其他库的结构（列表、数组等））

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:25:12.343

使用垃圾收集器可以更轻松地编写多线程代码。这是因为在多线程上下文中手动释放资源很难做到正确。使用 GC，您大部分时间都无需担心。

> 我正在阅读，当使用多个线程时，有必要编写一个特殊的垃圾收集程序。

我不相信这种情况曾经发生过。

> 这是否仍然适用于 SE6 及更高版本，如果是，是否有标准方法可以做到这一点。

执行此操作的标准方法是不引用您不需要的对象。例如，如果你有一个不需要的局部变量，就让它脱离作用域。

它不必很复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-09T02:43:37.443

这篇来自**JavaWorld 2003 年的**文章，[J2SE 1.4.1 增强了垃圾收集](http://www.javaworld.com/article/2073244/core-java/j2se-1-4-1-boosts-garbage-collection.html)，对 J2SE 1.4.1 之前的 Java 垃圾收集有这样的说法：

> Mark and sweep 是一种“stop-the-world”的垃圾收集技术；也就是说，所有应用程序线程都会停止，直到垃圾收集完成，或者直到更高优先级的线程中断垃圾收集器。如果垃圾收集器被中断，它必须重新启动，这可能导致应用程序崩溃而没有明显的结果。标记和扫描的另一个问题是许多类型的应用程序不能容忍它的停止世界特性。对于需要近乎实时行为的应用程序或为大量面向事务的客户端提供服务的应用程序尤其如此。

**Dobbs 博士 2009 年**的一篇文章[G1: Java's Garbage First Garbage Collector](http://www.drdobbs.com/jvm/g1-javas-garbage-first-garbage-collector/219401061)对 SE 6 之前的 Java 垃圾收集器有这样的说法。

> 直到最近，Java SE 还提供了两个主要的收集器：并行收集器和并发标记清除 (CMS) 收集器——请参阅侧边栏的并行性和并发性。在最新的 Java SE 6 更新版本中，G1 收集器是另一种选择。G1 的计划是最终将 CMS 替换为低暂停、软实时收集器。让我们来看看它是如何工作的。

因此，在 SE 6 之前，一些有助于 Java 垃圾收集的额外预防措施可能会有所帮助，尤其是对于具有大量临时变量的多线程应用程序，这些临时变量会生成需要收集的垃圾。然而，这应该最多需要在慢速期间显式调用垃圾收集器。写一些特别的东西似乎很不寻常。

但是，情况比以前要好得多。此外，垃圾收集在不同版本的 Java 虚拟机之间可能会有所不同。

所以几年前可能是真的，现在用现在的技术几乎肯定不是真的。

这篇文章，[如何监控 Java 内存使用情况？](https://stackoverflow.com/questions/1058991/how-to-monitor-java-memory-usage)，讨论了监视 Java 内存使用情况以及显式调用垃圾收集器的一些优缺点。

Oracle 有一个涵盖 Java SE 7 Hotspot JVM的[Java Garbage Collection Basics 教程。](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:38:51.683

使用以下代码显式调用垃圾收集器

```
Runtime runtime = Runtime.getRuntime(); 
runtime.gc(); 
```

但这不是必需的，jvm 会自动处理正确及时运行的 GC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T17:58:13.953

几乎可以肯定，您的讲师的说明（正确地）指出，由于 Java 是一个多线程环境，因此在 Java 运行时环境中实现垃圾收集器时需要比仅涉及单个线程时需要更多的注意。*任何*多线程环境 都是如此。

正如其他人所说，程序员看不到任何这种复杂性。这是 gc 提供的自动内存管理的礼物。

# java - 查找数组索引

> ID：11087879
> 
> 赞同：1
> 
> 时间：2012-06-18T17:22:55.980
> 
> 标签：java, arrays

我确定我想要完成的任务有一个 CS 术语，但我不确定它是什么。我有三个数组，我们称它们`a`为 、`b`和`c`。我正在遍历数组的所有可能组合，这将是`a*b*c`迭代。

我正在传递`int`当前迭代的函数 an（例如`iteration`从`0`到 ）以及、和`a*b*c-1`的长度。我希望该函数能够打印出索引的每个唯一排列，仅根据迭代次数和 、 和 的长度计算得出。`a``b``c``a``b``c`

这就是我现在所拥有的：

```
class Test {
    public static void printIndices(int i, int a, int b, int c) {
        System.out.println(i%a + ", " + (i+1)%b + ", " + (i+2)%c);
    }

    public static void main(String[] args) {
        int a[] = new int[2];
        int b[] = new int[2];
        int c[] = new int[3];

        int iterations = a.length * b.length * c.length;

        for (int i=0; i < iterations; i++){
            printIndices(i, a.length, b.length, c.length);
        }
    }
} 
```

它生成以下输出：

```
0, 1, 2
1, 0, 0
0, 1, 1
1, 0, 2
0, 1, 0
1, 0, 1
0, 1, 2
1, 0, 0
0, 1, 1
1, 0, 2
0, 1, 0
1, 0, 1 
```

如您所见，有重复项。我希望输出为：

```
0, 0, 0
1, 0, 0
0, 1, 0
1, 1, 0
0, 0, 1
1, 0, 1
0, 1, 1
1, 1, 1
0, 0, 2
1, 0, 2
0, 1, 2
1, 1, 2 
```

（顺序并不重要，只要每个排列都没有重复）。

显然我的输出行是错误的：

```
System.out.println(i%a + ", " + (i+1)%b + ", " + (i+2)%c); 
```

获得我正在寻找的输出的正确操作是什么？

我知道这段代码看起来有点傻，这根本不是我实际在做的事情，但它很好地展示了这个案例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:24:51.393

如评论中所述，您正在寻找[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。

您使用模块化算术的方法几乎可行。您只需要进行一些修改即可获得正确的结果：

```
System.out.println(i%a + ", " + (i/a)%b + ", " + (i/a/b)%c); 
```

在线查看它：[ideone](http://ideone.com/nPFXu)

# java - Java中的后递减

> ID：11087881
> 
> 赞同：3
> 
> 时间：2012-06-18T17:23:01.220
> 
> 标签：java

> **可能重复：**
> [java中的递减](https://stackoverflow.com/questions/11086765/decrement-in-java)

我在看这个问题，[Java 中的 Decrement](https://stackoverflow.com/questions/11086765/decrement-in-java#11086765)，它激起了我的好奇心。我了解后/前递增/递减的工作原理，但我想知道为什么它在特定情况下的工作方式。

例如，

```
int x = 5;
x--; 
```

很明显将 x 设置为 4。但如果你这样做，

```
x = x--; 
```

x 仍然是 5 （正如引用问题的发布者所发现的那样）。根据我对后减量的理解，它在修改它之前返回值。所以我期望发生的事情会`x = 5`首先发生。（与上述保持一致）。然后，x 递减，所以在我看来，`x--;`会运行，在上面清楚地将 x 设置为 4。

我的意思是，是的，这很容易做到，`x--;`但我想了解为什么 Java 的 post decrement 会以这种方式工作。

我尝试了下面的代码，它完全按预期工作。

```
int x = 5;
int y = x--; 
```

`y`设置为 5 并`x`适当递减。为什么不会发生同样的情况`x = x--;`？

# node.js - 如何在 Nodester 上升级 Node.js

> ID：11087882
> 
> 赞同：1
> 
> 时间：2012-06-18T17:23:02.840
> 
> 标签：node.js, upgrade, nodester

我正在尝试升级到 Node v0.6.17。我按照这篇文章中的说明进行操作：

[http://blog.nodester.com/](http://blog.nodester.com/)

但我仍在运行 0.4.9 版

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:28:50.887

为什么它不起作用可能有几个问题。如果您将 package.json 粘贴到某处会很好。

FWIW 要升级 node.js，您只需要添加下一个键/值对：

```
"node":"0.6.17" 
```

在 package.json 的顶层，它区分大小写，并且它只能是请求[http://nodester.com/env/version](http://nodester.com/env/version)时 api 返回的版本之一。

换句话说，您的 package.json 应该如下所示：

```
{
   "name":"jwerre",
   "description":"my awesome app",
   "version":"0.0.1",
   "node":"0.6.17"
   ... 
} 
```

# java - Android java 2.3.3，如何创建类似steam的菜单？

> ID：11087883
> 
> 赞同：3
> 
> 时间：2012-06-18T17:23:02.950
> 
> 标签：java, android, layout, menu, android-sdk-2.3

你如何制作类似蒸汽的菜单？下面是我的三星 Galaxy S 的截图。当你按下手机底部的菜单按钮时，菜单会展开，它将当前窗口推到一边并显示菜单。所以它窃取了 70% 的屏幕。问题是，它是如何建造的？我什至不知道从哪里开始构建这样的东西。有任何想法吗？教程？

应符合 android 2.3.3。

![我的三星 Galaxy S 截图](../Images/f166bafa110e28ae887e31e30d66a87f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:49:20.207

使用 Jeremy Feinstein 的[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)库。它工作得非常好，实际上比它的 Steam 实现更流畅。

# html - 应用填充 这让我很烦......我有一个简单的 HTML 页面，它有一个文件类型的输入 HTML 对象 - 请参见下面的代码行：

|  |
|  |

在我的 CSS 文件中，我有： input.textbox{padding:10px;font-size:14px} 填充在 IE9 中工作正常，但在 Mozilla 中似乎不起作用。对于 Mozilla，我有什么需要考虑的因素吗？ 任何帮助将不胜感激。谢谢！ encodeURIComponent在将参数发送到服务器之前，您应该使用它们。它会正确地转义参数中的所有内容。 快速示例： var s = 'Thing=' + encodeURIComponent('lala&lalala'); 请注意，每个值都应该单独编码（所以你不应该简单地在整个查询字符串上使用它）。 htmlcsspadding 4 2 回答 2 This answer is useful 2 td改为在封闭元素上设置填充。文件输入小部件在浏览器中以特殊和不同的方式实现，它们可能部分不受 CSS 影响。 于 2012-06-18T17:25:01.873 回答 This answer is useful 2 我见过的最好的解决方案在这里：http ://www.quirksmode.org/dom/inputfile.html 。众所周知，不同浏览器的文件输入样式不一致，因此需要对 HTML 进行一些修改。 于 2012-06-18T17:28:44.153 回答 Related 1 sql - 我的 SQL Server 2008 实例在哪里？ 0 c# - Cookie 构造函数 C# 中的路径无效 0 javascript - 立方体 3D 旋转 - 方向错误 (Javascript - CSS3) 4 c# - 为什么 OfType<> 比 Cast<> 快？ 1 vb.net - 复制目录，但仅在需要时更新文件 1 java - 如何让固定数量的线程使用未绑定的可排序队列？ 4 jquery - jQuery 如何选择不是 .first() 或 .last() 的元素 1 blackberry - 如何在列表字段中设置不同的行高？ 0 date - 响应标头日期，总是在那里？ 1 mod-rewrite - 将 www 重定向到非 www 是重定向到脚本而不是漂亮的 URL Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11087885
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, css, padding

这让我很烦......我有一个简单的 HTML 页面，它有一个文件类型的输入 HTML 对象 - 请参见下面的代码行：

```
<table>
    <tr><td><input type="file" id="file" name="file" class="textbox" size="75" /></td></td>
</table> 
```

在我的 CSS 文件中，我有：

```
input.textbox{padding:10px;font-size:14px} 
```

填充在 IE9 中工作正常，但在 Mozilla 中似乎不起作用。对于 Mozilla，我有什么需要考虑的因素吗？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:25:01.873

`td`改为在封闭元素上设置填充。文件输入小部件在浏览器中以特殊和不同的方式实现，它们可能部分不受 CSS 影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:28:44.153

我见过的最好的解决方案在这里：[http](http://www.quirksmode.org/dom/inputfile.html) ://www.quirksmode.org/dom/inputfile.html 。众所周知，不同浏览器的文件输入样式不一致，因此需要对 HTML 进行一些修改。

# php - 是否可以通过内部连接查询Mysql

> ID：11087888
> 
> 赞同：3
> 
> 时间：2012-06-18T17:23:16.523
> 
> 标签：php, mysql, sql, join, inner-join

我会从两个 MySQL 表中获取详细信息

表结构如图

```
table:App
|AppID|AppName|AppType|

table:AppRelease
|AppReleaseID|AppID|ReleaseDate|ReleaseVersion| 
```

并写下如下所示的查询

```
$query="
  SELECT
    A.*,
    B.ReleaseDate,
    B.ReleaseVersion
  FROM       App AS A
  INNER JOIN AppRelease AS B
  WHERE A.AppID = B.AppID
"; 
```

当 appid 在两个表中时我得到值

但我也想从 App 表中获取值，尽管我在 AppRelease 发布表中没有数据

是否可以写查询请帮助我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:25:14.930

您的要求不应该是内部联接。

使用左连接：

```
$query= "SELECT A.*,B.ReleaseDate,B.ReleaseVersion
             from App as A LEFT JOIN AppRelease as B 
             ON A.AppID=B.AppID"; 
```

# iphone - 当用户按下该按钮删除以前的图像时更改 UIButton 上的图像

> ID：11087895
> 
> 赞同：0
> 
> 时间：2012-06-18T17:23:33.620
> 
> 标签：iphone, objective-c, xcode, image, uibutton

当用户按下它时，我想更改我的 UIButton 上的图像。图像具有透明效果（它是仅显示边缘的 .png）。问题是，当点击按钮时，一切正常（连接到它的其他功能），但应用程序会覆盖 2 个不同的图像，一秒一秒！按下按钮时，我想显示第二张图像，并删除第一张图像（这变得不必要）。PS：我不想使用图像数组。这里是按钮的代码

```
UIButton *overlayButton = [UIButton buttonWithType:UIButtonTypeCustom];
[overlayButton setImage:[UIImage imageNamed:@"image1.png"] forState:UIControlStateNormal];
[overlayButton setFrame:CGRectMake(20, 382, 120, 60)];
[overlayButton addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside]; //just graphics
[overlayButton addTarget:self action:@selector(buttonshapeClicked:) forControlEvents:UIControlEventTouchUpInside]; //just to set a variable i++ for my cycle
[overlayButton addTarget:self action:@selector(changeshape:) forControlEvents:UIControlEventTouchUpInside];  //function that changes another shape
[[self view] addSubview:overlayButton]; 
```

我的简单循环

```
- (void)buttonshapeClicked:(id)sender{
shape++;
if (shape == 4) {
    shape = 1;
        }} 
```

这里是允许更改屏幕上主要形状的主要功能

```
 -(void) changeshape:(id)sender {
if (shape==1 && people==2) {
    //bottone forma
    UIButton *overlayButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [overlayButton setImage:[UIImage imageNamed:@"passaquadrato.png"] forState:UIControlStateNormal];
    [overlayButton setFrame:CGRectMake(20, 382, 120, 60)];
    [overlayButton addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [overlayButton addTarget:self action:@selector(buttonshapeClicked:) forControlEvents:UIControlEventTouchUpInside];
    [overlayButton addTarget:self action:@selector(changeshape:) forControlEvents:UIControlEventTouchUpInside];
    [[self view] addSubview:overlayButton];

    //bottone people
    UIButton *overlayButtonp = [UIButton buttonWithType:UIButtonTypeCustom];
    [overlayButtonp setImage:[UIImage imageNamed:@"passatre.png"] forState:UIControlStateNormal];
    [overlayButtonp setFrame:CGRectMake(180, 382, 120, 60)];
    [overlayButtonp addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [[self view] addSubview:overlayButtonp];

    UIImageView *overlayImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"circle2.png"]];
    [overlayImageView setFrame:CGRectMake(20, 88, 280, 280)];
    [[self view] addSubview:overlayImageView];
}

else if (shape==2 && people==2) {
    //bottone forma
    UIButton *overlayButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [overlayButton setImage:[UIImage imageNamed:@"passarettangolo.png"] forState:UIControlStateNormal];
    [overlayButton setFrame:CGRectMake(20, 382, 120, 60)];
    [overlayButton addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [overlayButton addTarget:self action:@selector(buttonshapeClicked:) forControlEvents:UIControlEventTouchUpInside];
    [overlayButton addTarget:self action:@selector(changeshape:) forControlEvents:UIControlEventTouchUpInside];
    [[self view] addSubview:overlayButton];

    //bottone people
    UIButton *overlayButtonp = [UIButton buttonWithType:UIButtonTypeCustom];
    [overlayButtonp setImage:[UIImage imageNamed:@"passatre.png"] forState:UIControlStateNormal];
    [overlayButtonp setFrame:CGRectMake(180, 382, 120, 60)];
    [overlayButtonp addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [[self view] addSubview:overlayButtonp];

    UIImageView *overlayImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"square2.png"]];
    [overlayImageView setFrame:CGRectMake(20, 88, 280, 280)];
    [[self view] addSubview:overlayImageView];
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:39:32.947

试试这样：

```
UIButton *overlayButton = [UIButton buttonWithType:UIButtonTypeCustom];
[overlayButton setImage:[UIImage imageNamed:@"image1.png"] forState:UIControlStateNormal];
[overlayButton setFrame:CGRectMake(20, 382, 120, 60)];
[overlayButton addTarget:self action:@selector(setRightActionToButton:) forControlEvents:UIControlEventTouchUpInside];
[[self view] addSubview:overlayButton];

-(void)setRightActionToButton:(id)sender {
    UIButton *button = (UIButton *)sender;

    if (shape==1 && people==2) {
        [button setImage:[UIImage imageNamed:@"image2.png"] forState:UIControlStateNormal];
        [self scanButtonPressed:button]
    }

    else if (shape==2 && people==2) {
        [button setImage:[UIImage imageNamed:@"image3.png"] forState:UIControlStateNormal];
        [self buttonshapeClicked:button]
    }

    else if (shape==3 && people==2) {
        [button setImage:[UIImage imageNamed:@"image4.png"] forState:UIControlStateNormal];
        [self changeshape:button];
    }
} 
```

# json - 如何使用脚本从 JSON 格式获取响应？

> ID：11087896
> 
> 赞同：0
> 
> 时间：2012-06-18T17:23:34.243
> 
> 标签：json, groovy, automation, soapui

我正在使用 SoapUI Pro 4.5.0，也是这个工具的初学者。我需要从响应（JSON 格式）中获取值。谁能给我这个示例代码？

注意：我使用的是基于 REST 的服务，而不是基于 SOAP 的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-22T08:18:27.630

SoapUI 在 groovy jar 中包含 JsonSlurper 类，所以你只需要像这样导入它

```
import groovy.json.JsonSlurper 
```

然后得到响应为

```
responseContent = testRunner.testCase.getTestStepByName("<test_step_name>").getPropertyValue("Response")

jsonresponse = new JsonSlurper().parseTest(responseContent) 
```

现在您可以访问响应元素，例如

```
jsonresponse.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:37:42.583

我建议使用Groovy 脚本中的[JSONPath](http://goessner.net/articles/JsonPath/)。您可能需要将 JSONPath Jar 添加到 /bin/ext 目录。

我面前没有 SoapUI，但在 groovy 脚本中它会是这样的：

```
def getResponse = context.expand( '${SomeGet#response}' )
def jsonSuff = JsonPath.read(getResponse, "\$..*") 
```

如果您在使用其他 JAR 时遇到问题，这就是我的 POM 中的内容（我创建了一个在 SoapUI 中使用的外部 JAR）。

```
<dependency>
    <groupId>com.jayway.jsonpath</groupId>
    <artifactId>json-path</artifactId>
    <version>0.8.1</version>
</dependency> 
```

这是我的导入声明：import com.jayway.jsonpath.JsonPath

# iphone - 如何将 UIViewController 作为子视图添加到 UIViewController(RootViewController)？

> ID：11087897
> 
> 赞同：2
> 
> 时间：2012-06-18T17:23:42.060
> 
> 标签：iphone, ios, uiviewcontroller, addsubview

我有一个`UIViewController`命名`LoginViewController`的，它是一个`rootViewController`在`AppDelegate`. 在 中`LoginViewController`，我有两个按钮：`Login`和`Enroll`。

当我点击 时`Login`，我将 a 指定`TabBarController`为`rootViewController`，然后显示`TabBarController`。但是，现在我想当我点击时我需要添加另一个`UIViewcController`作为子视图`Enroll`。我尝试了以下方法：

```
[self.view addsubview:viewcontroller.view]; 
```

但这里的问题是**My ViewController 的 view.top 被固定在屏幕顶部下方约 20 像素处**。我认为状态栏有问题，但我不知道如何解决它。

**我认为我需要将我的 ViewController 作为子视图添加到 LoginViewController**，然后从那里重定向到不同的视图。有人可以建议其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:45:03.477

尝试将框架设置为您的注册屏幕对象，然后将其作为子视图添加到登录视图。前任：

```
[enrollViewcontroller.view setFrame:CGRectMake(0,0,320,440)];
[self.view addsubview:enrollViewcontroller.view]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:52:00.637

你不应该让 UIViewController 成为另一个 UIViewController 视图的子视图。如果将子视图视为普通 UIView（如果不是这两个视图），那么您可能想要做的事情是屏幕上只有一个 UIViewController 并且它占据整个屏幕。

更多信息：[如何将 UIViewController 的视图添加为子视图](https://stackoverflow.com/questions/1486832/how-to-add-an-uiviewcontrollers-view-as-subview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T05:23:53.163

我没有将 UIViewController 作为子视图添加到另一个 UIViewController，而是决定将我的 ViewController 呈现为 ModalViewController 使用

```
[self presentModalViewController:myViewController animated:YES]; 
```

# objective-c - 无法从自定义类中获取数据

> ID：11087898
> 
> 赞同：0
> 
> 时间：2012-06-18T17:23:43.127
> 
> 标签：objective-c, ios, ipad

我四处寻找答案，因为它看起来很简单，但我似乎找不到合适的东西。我正在尝试使用假数据测试我拥有的程序。我创建了一个 StudentData 类，它拥有一个学生的属性，并且还有一个数组来保存它们。

当另一个班级需要他们时，他们会调用 getStudent 方法（这是迄今为止该班级唯一的公共部分）并发送一个 ID 号以获取该学生的姓名。

我的问题是我无法弄清楚如何解析学生数组以将学生 ID 号码与传入的号码匹配。遇到同样的问题，我也无法弄清楚如何从学生对象中提取姓名。

到目前为止，这是我的代码：

```
// StudentData.m

#import "StudentData.h"

@interface StudentData() {
    NSString *ID;
    NSString *firstName;
}
@property (nonatomic, strong) NSMutableArray *studentArray;
@end

@implementation StudentData
@synthesize studentArray = _studentArray;

- (NSMutableArray *)studentArray {
    if(!_studentArray) _studentArray = [[NSMutableArray alloc] init];
    return _studentArray;
}

- (void)awakeFromNib {

    NSArray *idA = [NSArray arrayWithObjects:@"111", @"685", nil];
    NSArray *fnA = [NSArray arrayWithObjects:@"Mark", @"Sam", nil];

    for(int i = 0; i < idA.count; i++) {
        StudentData *tempCurrentStudent = [[StudentData alloc] init];
        ID = [idA objectAtIndex:i];
        firstName = [fnA objectAtIndex:i];

        [self.studentArray addObject:tempCurrentStudent];
    }
}

- (NSString *)getStudentsFirstName:(NSString *)studentID {
    NSString *firstName;

    for(int i = 0; i < self.studentArray.count; i++) {
        if([studentID isEqualToString:[[self.studentArray objectAtIndex:i] self.firstName]]) { // ERROR
            fN = [[self.studentArray objectAtIndex:i] self.firstName]; // ERROR
        }
    }

    return firstName;
}

@end 
```

我不断收到的错误是：**Expect ']'**并且错误指向“self.firstName”行。

如果我使用“[self.studentArray objectAtIndex:i].firstName;” 我收到错误：**在“id”类型的对象上找不到属性“firstName”**如果我将“firstName”设为属性（本地或公共），我什至会收到此错误。这是有道理的，因为数组在技术上充满了“id”类型。我也知道，与 java 不同，我不能使用泛型或类似的东西。

任何帮助将不胜感激，如果需要澄清，请告诉我！顺便说一句，如果这有帮助的话，这适用于 ipod/ipad 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:04:21.923

两件事情 ：

1.  您在这里遇到名称冲突。您有一个名为 firstName 的局部变量，并且传递给问题函数的参数具有相同的名称。

2.  `firstName`除非您将其定义为属性，否则它不是属性。在这种情况下，它只是一个普通的局部变量。意味着您无法使用它来访问它，`self.firstName`而只能通过`firstName`. 这就是编码指南说您应该以下划线开头命名局部变量的原因之一（正如您已经在`studentArray`属性中所做的那样）。这样您就可以区分它是局部变量还是属性。

最好的，

弗洛

# expressionengine - Expressionengine cron 电子邮件语法错误

> ID：11087902
> 
> 赞同：0
> 
> 时间：2012-06-18T17:23:55.327
> 
> 标签：expressionengine

我正在使用表达式引擎 2.4.0 。我在正确的目录中有插件，但每次我把示例代码都给我一个错误

```
{exp:cron plugin="cron_email" day="23" minute="59" to="webmaster@mysite.com" subject="Daily Email"}

Hello There!

{/exp:cron} 
```

以下标签有语法错误：

```
{exp:cron} 
```

请更正模板中的语法。

我做错什么了吗？任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:53:50.473

您需要同时安装Cron[插件](https://github.com/EllisLab/Cron) *和*[Cron Send Email 插件](http://expressionengine.com/downloads/details/cron_send_email/)。

# c# - 如何将图像嵌入 RichTextBox？

> ID：11087904
> 
> 赞同：3
> 
> 时间：2012-06-18T17:24:02.060
> 
> 标签：c#, wpf

我正在寻找一种将图像嵌入富文本框的方法。我的 rtf 文件是可移植的，其中包含图像和文本。即它可以从一台计算机移动到另一台计算机。因此，即使它在另一台机器上，用户也应该能够看到 rtf 文件（文本+图像）的内容。

现在我正在使用以下代码插入图像。

```
public static void ApplyImage(RichTextBox RichTextBoxControl)
{
    try
    {
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
        dlg.DefaultExt = ".png";
        dlg.Filter = "PNG Files (.png)|*.png|JPG Files (.jpg)|*.jpg|GIF Files (.gif)|*.gif";
        Nullable<bool> result = dlg.ShowDialog();
        if (result == true)
        {
            string fileName = dlg.FileName;
            if (File.Exists(fileName))
            {
                BitmapImage bi = new BitmapImage(new Uri(fileName));
                Image image = new Image();
                image.Source = bi;
                InlineUIContainer container = new InlineUIContainer(image);
                Paragraph paragraph = new Paragraph(container);
                RichTextBoxControl.Document.Blocks.Add(paragraph);
            }
        }
    }
    catch
    {
        throw;
    }
} 
```

但是这段代码不适合我的目的。因为嵌入的图像可能不在另一台机器上。所以它不会工作。我需要在 rtf 文件中嵌入图像或将图像存储为二进制文件。我到处搜索，没有运气。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:32:36.323

我得到了解决这个问题的办法。我不确定它是正确的方法，但这个解决方案仍然对我有用。希望它可以帮助其他人。

解决方案是遍历流文档中的所有图像标签并将图像复制到可移植的存储库文件夹中。然后下次从该存储库文件夹加载图像以将图像显示回richtextbox。

```
foreach (Block block in rtb.Blocks)
        {
            if (block is Paragraph)
            {
                Paragraph paragraph = (Paragraph)block;
                foreach (Inline inline in paragraph.Inlines)
                {
                    if (inline is InlineUIContainer)
                    {
                        InlineUIContainer uiContainer = (InlineUIContainer)inline;
                        if (uiContainer.Child is Image)
                        {
                            Image image = (Image)uiContainer.Child;
//Copy Image source to another repository folder and save the path.
                        }
                    }
                }
            } 
```

# java - 在 php/java/mysql 中不能有正确的 UTF-8 字符集

> ID：11087908
> 
> 赞同：1
> 
> 时间：2012-06-18T17:24:23.890
> 
> 标签：java, php, mysql, utf-8

我正在用 JAVA 和 PHP 开发一个应用程序。我从 JAVA 类调用 php 文件，php 在 ddbb 中执行查询并返回结果。问题是它没有正确返回字符。我想使用 UTF-8，我在我的 php 文件的开头有这个： header("Content-type: text/html; charset=utf-8"); 但它不起作用。如果我直接用奇怪的字符输入一个单词，然后回显，则该单词会正确显示，但如果我从 ddbb 中获取它们，则不会。

函数 mb_internal_encoding 返回 ISO-8859-1 但如果我将其设置为 utf-8 也不起作用

我不知道我是否正确解释了这个问题，对不起我的英语。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:34:32.413

在你的 PDO 中试试这个：

```
$dbInfos = array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'");

$this->connection = new PDO($this->dsn, $this->username, $this->password, $dbInfos); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:46:43.057

如果您有 php 5.3.6+，您应该更喜欢以下方法

```
$pdo = new PDO("mysql:host=localhost;dbname=world;charset=utf8", 'my_user', 'my_pass'); 
```

原因是否则，将无法正确处理字符串转义。这很重要，因为 php 仍然默认为 mysql*模拟准备好的语句*，因此，它非常依赖于内部 real_escape_string 能够识别正确的字符集。通过设置字符集`"SET NAMES ..."`不会更新 real_escape_string 使用的内部字符集设置。

摘要：如果不使用上述方法，您可能容易受到sql注入攻击。我说可能，因为它取决于初始和最终字符集。

或者，您可以将 pdo 配置为不模拟准备好的语句。

参考： [http ://www.php.net/manual/en/mysqlinfo.concepts.charset.php](http://www.php.net/manual/en/mysqlinfo.concepts.charset.php)

# xml - 如何删除powershell中的新行和标签？

> ID：11087910
> 
> 赞同：0
> 
> 时间：2012-06-18T17:24:26.507
> 
> 标签：xml, powershell

下面是我的 powershell 代码，用于删除“data6.xml”的所有换行符和制表符，但它根本不起作用！

```
function Replace-String($find, $replace)
{
   (Get-Content C:/Temp/data6.xml) | 
   Foreach-Object {$_ -replace $find, $replace} | 
   Set-Content C:/Temp/data6.xml    
}

# to remove the [CDATA] tag
Replace-String "\<!\[CDATA\[" "" 
Replace-String "\]\]\>"  ""
Replace-String "\n"  ""
Replace-String "`n"  ""
Replace-String "`t"  ""
Replace-String "\n"  "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:44:14.337

这是因为`Get-Content`为您提供了一系列行，其中每一行自然都没有换行符。

所以我猜你想要的是如下内容：

```
-join ((Get-Content data6.xml) -replace '<!\[CDATA\[|]]|(?<=>)\s+(?=<)') | Set-Content data6.xml 
```

# java - 命令行参数中的文件路径

> ID：11087915
> 
> 赞同：0
> 
> 时间：2012-06-18T17:24:50.507
> 
> 标签：java

在我当前的项目中，我正在编写代码生成器。界面将是命令行。

在命令行参数中，用户指定规范文件和目标文件夹，这将指导代码生成器在特定目标文件夹中生成文件。

例如，我的命令行参数是

```
VocArchSpec.text NetworkSpec.text ./src/fr/inria/arles/pankesh/gen ./src/fr/inria/arles/pankesh/gen/logic ./src/fr/inria/arles/pankesh/gen/sim/device ./src/fr/inria/arles/pankesh/gen/util 
```

在上述命令中，1 和 2 是规范，其他是目标路径。此路径由代码生成器使用。代码生成器在指定的目标文件夹中生成几个 java 文件。

但是，我的问题是我收到以下错误：

```
java.io.IOException: The system cannot find the path specified
at java.io.WinNTFileSystem.createFileExclusively(Native Method)
at java.io.File.createNewFile(File.java:883) 
```

===============> 我使用以下代码生成文件。

```
new File(GlobalVariable.utilDirPath).mkdir(); // Assume that I set the value GlobalVariable.utilDirPath variable through command line arguments. 
file = new File(GlobalVariable.utilDirPath + "/" + unit.getName());
file.createNewFile();
FileWriter writer = new FileWriter(file);
writer.write(content);
writer.flush();
Writer.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:29:54.633

获得此异常的一种方法是当要创建文件的路径（文件夹）不存在时。您的代码需要确保指定的文件夹存在。

要创建这些的简单方法，请查看[File.mkdirs()](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs%28%29)。

# c# - 在 C# NETMF 中将浮点数转换为字节数组（NETMF 没有 BitConverter）

> ID：11087917
> 
> 赞同：4
> 
> 时间：2012-06-18T17:24:52.857
> 
> 标签：c#, .net, .net-micro-framework

我有一个 C# [NETMF](http://en.wikipedia.org/wiki/.NET_Micro_Framework)项目，我需要将 a 转换`float`为 a `byte[]`，反之亦然。问题是，NETMF 没有`System.BitConverter`.NET 之类的东西，所以我真的找不到任何方法来做到这一点，除非我自己去做。

我一直在编写高级（[Java](http://en.wikipedia.org/wiki/Java_%28programming_language%29)、[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)、[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)等）并且只涉足 C++，所以我真的不知道如何将浮点数转换为字节数组。

执行此操作的样板函数的一些示例代码是什么样的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:53:11.950

[.NET Micro Framework支持](http://msdn.microsoft.com/en-us/library/ee436421.aspx)，因此您[`StructLayoutAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)可以使用 C++ 样式联合来获取浮点数的字节（反之亦然）：

```
[StructLayout(LayoutKind.Explicit)]  
public struct FloatUnion
{ 
    [FieldOffset(0)] public float Value;
    [FieldOffset(0)] public byte Byte0;
    [FieldOffset(1)] public byte Byte1;
    [FieldOffset(2)] public byte Byte2;
    [FieldOffset(3)] public byte Byte3;

    public byte[] ToByteArray()
    {
        return new[] { Byte0, Byte1, Byte2, Byte3 };
    }

    public static byte[] FloatToBytes(float value)
    {
        return new FloatUnion { Value = value }.ToByteArray();
    }

    public static float BytesToFloat(byte[] bytes)
    {
        if (bytes.Length != 4) throw new ArgumentException("You must provide four bytes.");
        return new FloatUnion { Byte0 = bytes[0], Byte1 = bytes[1], Byte2 = bytes[2], Byte3 = bytes[3] }.Value;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:33:32.077

与整数（Int32、Byte、UInt64 等）不同，其中每个值都可以从整数字节中每个位的状态轻松确定，二进制浮点数没有直观的表示，因此 IEEE 定义了一个规范浮点数：[IEEE-754](http://en.wikipedia.org/wiki/IEEE_floating_point)。可以说，这并不简单，但遵循规范中的规则将允许您将 .NET System.Single 和 System.Double 实例序列化为一系列字节。

桌面 .NET Framework 实际上在这里作弊。GetBytes(Single) 函数实际上只是将 Single 实例转换为 Int32，然后使用原始指针将原始字节复制到 4 字节数组中。但是你不能使用这个有用的快捷方式，因为微框架不支持指针——更糟糕的是：MF 也不包含 BinaryWriter。恐怕你必须推出自己的 IEEE-754 串行器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:27:35.677

`BinaryWriter`在 a上使用a `MemoryStream`。

# arrays - 如何在 Bash 中为数组赋值？

> ID：11087918
> 
> 赞同：10
> 
> 时间：2012-06-18T17:24:59.923
> 
> 标签：arrays, bash, shell

我正在尝试从文本文件*hello.txt*中读取值列表，并将它们存储在数组中。

```
counter=0

cat hello.txt | while read line; do
 ${Unix_Array[${counter}]}=$line;
 let counter=counter+1;
    echo $counter;
done

echo ${Unix_Array[0]}
echo ${Unix_Array[1]}
echo ${Unix_Array[2]} 
```

我无法将值分配给数组*Unix_Array[]* ... *echo*语句不打印数组的内容。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T17:33:12.293

这里有一些语法错误，但明显的问题是分配正在发生，但[你在隐含的 subshel​​l](http://mywiki.wooledge.org/BashPitfalls#grep_foo_bar_.7C_while_read_-r.3B_do_.28.28count.2B-.2B-.29.29.3B_done)中。通过使用管道，您为整个*while*语句创建了一个子 shell。当*while*语句完成时，子 shell 退出并且你的`Unix_Array`不再存在。

在这种情况下，最简单的解决方法是不使用管道：

```
counter=0

while read line; do
  Unix_Array[$counter]=$line;
  let counter=counter+1;
  echo $counter;
done < hello.txt

echo ${Unix_Array[0]}
echo ${Unix_Array[1]}
echo ${Unix_Array[2]} 
```

顺便说一句，你真的不需要柜台。更简单的写法可能是：

```
$ oIFS="$IFS" # Save the old input field separator
$ IFS=$'\n'   # Set the IFS to a newline
$ some_array=($(<hello.txt)) # Splitting on newlines, assign the entire file to an array
$ echo "${some_array[2]}" # Get the third element of the array
c
$ echo "${#some_array[@]}" # Get the length of the array
4 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T17:39:15.133

如果您使用的是 Bash v4 或更高版本，则可以使用`mapfile`来完成此操作：

```
mapfile -t Unix_Array < hello.txt 
```

否则，这应该工作：

```
while read -r line; do
   Unix_Array+=("$line")
done < hello.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-29T09:59:15.117

我发现的最好方法是：

```
declare -a JUPYTER_VENV
JUPYTER_VENV+=( "test1" "test2" "test3" ) 
```

然后使用它：

```
for jupenv in "${JUPYTER_ENV[@]}"
do
  echo "$jupenv"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T01:24:02.420

这是一个解决方案：

```
count=0
Unix_Array=($(cat hello.txt))
array_size=$(cat hello.txt | wc -l)
for ((count=0; count < array_size; count++))
do
    echo ${Unix_Array[$count]}
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T17:34:28.533

而不是这个：

```
cat hello.txt | while read line; do
 ${Unix_Array[${counter}]}=$line;
 let counter=counter+1;
    echo $counter;
done 
```

你可以这样做：

```
Unix_Array=( `cat "hello.txt" `) 
```

# java - Android 和 PC 通过 USB 通信：我可以使用 ADB 推/拉并从 Android 应用程序访问的安全目录是什么？

> ID：11087921
> 
> 赞同：2
> 
> 时间：2012-06-18T17:25:02.887
> 
> 标签：java, android, adb

我正在编写一个应用程序，它允许计算机上的 android 手机和 java 应用程序通过 USB 电缆进行通信。在这种情况下，不能选择使用蓝牙或 Wifi。

我发现很难找到一个好的解决方案来解决这个问题，而且主机/附件库似乎旨在将手机连接到扩展坞/相机/电路板，而不仅仅是一台 PC。这是我的解决方案，如果有更好的选择，请告诉我：

我将创建一个 Java 应用程序来使用 ADB 将文件推送到手机上，然后手机将检查这些文件是否有更改并采取相应措施。

到目前为止，它似乎运行良好，除了我使用 /sdcard/ 文件夹来保存这些文件。我希望这个应用程序也可以在没有 SD 卡的手机上运行，​​所以我想知道是否还有其他安全文件夹可以指望能够从带有 ADB 的 PC 和 android 应用程序访问。

（我查看了 INTERNAL STORAGE 库，但我不知道它们将数据存储在哪里，以及我是否可以从 ADB 推/拉它们。）

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:10:00.863

阅读此[https://groups.google.com/forum/?fromgroups#!topic/android-developers/tZrxqZQLh98](https://groups.google.com/forum/?fromgroups#!topic/android-developers/tZrxqZQLh98) 关于保存 tmp 文件的精彩讨论。您想从 PC 控制您的应用程序吗？您不能为此使用亚行推出的 Intents 吗？

使用 ADB 通过 USB 进行端口转发的另一个选项： adb forward tcp:6100 tcp:7100 adb forward tcp:6100 local:logd

就我个人而言，我最终会向我的本地 Apache 服务器发出 GET 请求以获取数据。或者在有根设备上，许多文件夹变得可用。

# sql - 运行示例 SQL 的问题

> ID：11087923
> 
> 赞同：1
> 
> 时间：2012-06-18T17:25:12.903
> 
> 标签：sql, oracle, plsql

错误：

`ORA-06550: line1, column 22: PLS-00103 Encountered the symbol "end-of-file" when expecting one of the following: * & = - + .......`

PL/SQL 块：

```
DECLARE v_c number :=0;
   BEGIN
      SELECT COUNT(*) into v_c from all_sequences where sequence_name='TEST_SEQ' and   sequence_owner='test';
      IF v_c = 1 THEN
         execute immediate 'DROP SEQUENCE test.TEST_SEQ';
      END IF;
   END;
/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:41:28.010

我从您的帖子中复制了代码并在 SQLDeveloper 和 SQLPlus 中运行它没有问题：

连接到：Oracle 数据库 11g 版本 11.2.0.3.0 - 生产

```
prompt> DECLARE v_c number :=0;                        
  2     BEGIN
  3        SELECT COUNT(*) into v_c from all_sequences where sequence_name='TEST_SEQ' and sequence_owner='test';
  4        IF v_c = 1 THEN
  5           execute immediate 'DROP SEQUENCE test.TEST_SEQ';
  6        END IF;
  7     END;
  8  /

PL/SQL procedure successfully completed. 
```

你用的是什么工具？我最好的建议是在 SQLPlus 中尝试，如果仍然有错误，请向我们展示会话的全文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T01:11:42.147

您只执行第一行而不是整个 PL/SQL 块。

```
DECLARE v_c number :=0
/ 
```

导致：

```
DECLARE v_c number :=0
                 *
ERROR at line 1:
ORA-06550: line 1, column 22:
PLS-00103: Encountered the symbol "end-of-file" when expecting one of the
following:
* & = - + ; < / > at in is mod remainder not rem 
```

正如其他人建议的那样，在 SQLPlus 中试试这个。

# jsf-2 - 从 primefaces 数据表中的支持 bean 中设置选定的行

> ID：11087927
> 
> 赞同：8
> 
> 时间：2012-06-18T17:25:32.970
> 
> 标签：jsf-2, primefaces

我正在使用带有可点击行的 primefaces 数据表，我需要找到如何从支持 bean 设置选定行的方法。

有我的数据表定义：

```
<p:dataTable id="cablePathTable" var="cablePath" value="#{commonTableBean.cableLazyModel}" rows="100"
         selectionMode="single" selection="#{commonTableBean.selectedCablePathTblRow}" 
         rowIndexVar="rowIndex"  widgetVar="datatableVar"
         emptyMessage="---">  
<p:ajax event="rowSelect" process="@this" update=":form:portFieldset" />

<p:column headerText="No">  
    <h:outputText value="#{cablePath.column1}" />  
</p:column>
<p:column headerText="Port A">  
    <h:outputText value="#{cablePath.column4}" />  
</p:column>
<p:column headerText="Port B">  
    <h:outputText value="#{cablePath.column5}" />  
</p:column> 
```

我尝试了以下方法，但没有成功。在支持 bean 中，我添加了方法：

```
public void test(){
    DataTable dataTable = (DataTable) FacesContext.getCurrentInstance().getViewRoot().findComponent("form:cablePathTable");
    dataTable.setRowIndex(2);
} 
```

我在 XHTML 页面中添加了测试按钮：

```
<p:commandButton process="@this" update=":form:cablePathTable" value="set2row" action="commonTableBean.test"/> 
```

但是数据表上没有任何改变，选择没有改变......

请任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T20:01:28.623

只需设置后面的值`selection="#{commonTableBean.selectedCablePathTblRow}"`。

```
public void test(){
    selectedCablePathTblRow = cablepath;
} 
```

# ios - 使用两个导航控制器推送视图控制器

> ID：11087931
> 
> 赞同：0
> 
> 时间：2012-06-18T17:25:46.227
> 
> 标签：ios, uinavigationcontroller, pushviewcontroller

我有一个应用程序，我正在推送一个模态视图控制器。它工作正常，但我担心我没有以最正确的方式对其进行编码。我已经实例化了两个导航控制器，这对我来说似乎有点狡猾。

基本上，我创建了一个带有 3 个选项卡的选项卡栏控制器，然后将其中一个选项卡/视图控制器设为根。后来我（在核心文本上使用一些本土标记）当用户触摸段落中的特定单词时弹出一个视图控制器。推送的视图控制器有一个后退按钮，工作正常，应用程序似乎没问题。

就像我说的那样，这一切都有效，但似乎我在这里循环编码。它是否正确？

**AppDelegate.h**

```
#import <Foundation/Foundation.h>

@interface AppDelegate : NSObject <UIApplicationDelegate, UITabBarControllerDelegate>
{
    UIWindow *window;
    UITabBarController *tabBarController;
}
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UITabBarController *tabBarController;
@end 
```

**来自 AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    ViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    ViewController2 *viewController2 = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];
    ViewController3 *viewController3 = [[ViewController3 alloc] initWithNibName:@"ViewController3" bundle:nil];

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:viewController];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav, viewController2, viewController3, nil];
    self.tabBarController.delegate = self;
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**ViewController3.h**

```
#import <UIKit/UIKit.h>
#import "JSCoreTextView.h"
#import "PopupViewController.h"

@class JSTwitterCoreTextView;

@interface ReadingViewController : UIViewController <JSCoreTextViewDelegate>
{
    JSTwitterCoreTextView *_textView;
    UIScrollView *_scrollView;
}
@end 
```

**来自 ViewController3.m**

在这里，我正在实例化另一个导航控制器。这是一个好主意吗？

```
- (void)textView:(JSCoreTextView *)textView linkTapped:(AHMarkedHyperlink *)link
{
    PopupViewController *popupVC = [[PopupViewController alloc] initWithNibName:@"PopupViewController" bundle:nil];
    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:popupVC];
    [nav setModalPresentationStyle:UIModalPresentationFullScreen];
    [nav setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
    [self presentModalViewController:nav animated:YES];
} 
```

**来自 PopupViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone 
                 target:self 
                 action:@selector(done:)]];
}

- (void)done:(id)sender
{
    [self.parentViewController dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:47:49.480

看来答案是“是”。我的印象是应用程序只有一个导航控制器，但它更像是每个选项卡一个，取决于是否会从该选项卡进一步推送。

# swift - 新的 iOS 开发者应该使用 Storyboard 和 Xibs/Nibs 吗？

> ID：11087936
> 
> 赞同：6
> 
> 时间：2012-06-18T17:26:02.763
> 
> 标签：swift, interface-builder, swiftui, uistoryboard, nib

我是一位经验丰富的 C/C++ Windows 开发人员，正在编写我的第一个真正的 iOS 应用程序。因为我真的不必担心向后兼容性，所以我决定加入并使用 XCode 4.3 中的新 Storyboard 功能。我发现，虽然故事板承诺在不编写任何代码的情况下布置应用程序中的所有屏幕，包括转场和手势，但现实情况是，除了最琐碎的程序之外，任何其他程序在运行时都不起作用他们，通常会毫不客气地失败并显示非常无用的错误消息。更糟糕的是，您无法单步执行代码来查看问题所在，因为*没有代码*。

所以我的问题是：一个新的 iOS 开发人员是否应该按照[本文](http://blog.shinetech.com/2011/07/23/when-should-new-ios-developers-start-using-interface-builder/)的建议在没有 Interface Builder 和 Nibs 和 Storyboard 的情况下进行开发？

*2020 年 4 月 3 日更新：看起来 SwiftUI 很好地弥合了这个鸿沟，并且可能会成为未来构建 iOS 应用程序**的方式。**在 SwiftUI 中，您确实需要逐步执行代码，它会在 Xcode 中为您提供实时反馈，显示您的应用程序在运行时的外观。在撰写本文时，我一直在享受一个很棒的[100 天免费课程（无隶属关系），其中包括对 Swift 的介绍。](https://www.hackingwithswift.com/100/swiftui)受到推崇的。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:37:48.587

是的！您绝对应该使用 Storyboards 来构建您的应用程序。Interface Builder 的优点之一是它不会抽象出底层概念——您仍然可以使用与代码中相同类型的对象（UIViewController、UIView 等）。

这让您仍然可以了解 UIKit 的工作原理，同时体验使用工具构建 UI 的好处。

去年的 WWDC 演示文稿概述了在应用程序中使用 Storyboard 的基础知识：

[https://developer.apple.com/videos/wwdc/2011/?id=309](https://developer.apple.com/videos/wwdc/2011/?id=309)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:40:52.870

这是相当主观的，但我绝对同意。如果您想了解 iOS 的工作原理，请先明确启动 UI 代码。界面构建器对于快速准确地定位元素很有用，但就像文章中提到的那样，在您了解视图和控制器如何协同工作后，您的工作效率会更高。

# java - Google App Engine（java）中ImageService所需的ARGB格式是什么

> ID：11087937
> 
> 赞同：0
> 
> 时间：2012-06-18T17:26:08.133
> 
> 标签：java, image, google-app-engine, hex

出于某种原因，[Google API 需要 long](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/images/ImagesService#composite%28java.util.Collection,%20int,%20int,%20long%29)而不是对象（如 Color）。这个格式是什么，我该如何传递它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:26:10.223

您可以直接在调用中以十六进制定义它。每对代表 Alpha（透明度）、红色、绿色和蓝色：

例如：0xFF00FF00 是纯绿色

通过在十六进制后放置“L”来定义您的长：

```
 Image i = imageService.composite(images, 100, 100, 0xff00ff00L); 
```

# xcode4 - 无法从子视图更新超级视图中的表

> ID：11087943
> 
> 赞同：0
> 
> 时间：2012-06-18T17:26:27.737
> 
> 标签：xcode4, subviews, uitableview

我使用的是 Xcode 4.3，虽然我已经做了很多年的程序员，但我在 Xcode 中有点像个小鬼。

我有一个名为 First 的 UIView，其中包含一个 UITable，它从内存中的文件中获取其内容。然后，我创建了一个名为 Second 的子视图 UIView，它在数据文件中进行了更改，这些更改应该会更改 First 中表的内容。当我删除 Second 并返回 First 时，这并不奇怪，表没有更新。下次从头开始加载 First 时，该表会反映所做的更改。

首先包含方法 viewDidLoad，该方法用于从文件中的数据中加载一个 NSArray，其中包含表所需的数据。我可以从 Second 调用 viewDidLoad，但除非从新更改的 NSArray 更新表，否则表将像更改之前一样显示。

所以我的问题是如何从 Second 调用表方法，以便在删除 Second 并返回 First 时更新 First 中的表。我曾尝试调用将数据加载到表中的表方法，但由于出现编译错误，因此没有成功。我需要知道如何调用 table 函数，当我返回到 first 时会导致 table 被更新。

至少我的部分问题是我不知道如何调用表更新，因为它没有像我预期的那样从 viewDidLoad 调用。

抱歉，这是对问题的冗长描述。我正在编写的程序的大部分其余部分都在工作，我已经处理这个问题好几个月了。我每隔几周就会回来一次，然后再试一次，但到目前为止还没有运气。我真的很感谢您提供的任何帮助，这将提高我的理解并解决问题。

这是修复后的代码：第一个（superview）相关代码

```
 -(void)viewDidLoad {  
    NSFileManager * fm = [[NSFileManager alloc] init];  
    NSError* err = nil;  
    NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.dir'"];  
    NSArray *array = [fm contentsOfDirectoryAtPath: userFolder error:&err];  
    self.listData = [array filteredArrayUsingPredicate:fltr];  
    [self.tableView reloadData]; //This does the updating must make table an IBOutlet as  
    [super viewDidLoad];         //described in one of the comments by m. Othman  
} 
```

这是修复后的代码：第二个（子视图）相关代码。此代码位于进行更改应影响表格显示的方法中

```
UIView * start = [self.view superview]; //this line and next two call viewDidLoad in first  
UIResponder * nextResponder = [start nextResponder];  
[nextResponder viewDidLoad]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:20:35.507

好吧，`UITableView`代表只是在加载视图或要求它重新加载时调用..
所以在您的 viewDidLoad 或任何应该更改 tableview 内容的方法中，您需要编写这一行

```
[tableview reloadData]; 
```

我希望我能理解你的问题！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:48:39.790

你读过[UIViewController API 参考](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW46)吗？除了 -viewDidLoad 之外，还有更多选项可用于处理视图的（重新）外观......

# wso2 - Developer studio (2.0.0) 在 Eclipse Indigo 上是否稳定

> ID：11087946
> 
> 赞同：0
> 
> 时间：2012-06-18T17:26:38.643
> 
> 标签：wso2, eclipse-indigo, wso2developerstudio

最新版本的 developer studio (2.0.0) 在 Eclipse Indigo SR2 上是否稳定？开发人员工作室是否支持 Indigo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:10:10.213

与 Developer Studio 2.0.0 一起使用的推荐 Eclipse 版本是 Eclipse Helios SR2 (3.6.2)。

Developer Studio 尚未对 Eclipse Indigo 进行全面测试，但在试用 Indigo 时没有遇到任何问题。

谢谢并恭祝安康，

哈沙娜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:27:57.170

我正在使用带有 eclipse Indigo SR2 的 Developer Studio 2.0.0，但我还没有发现任何与 IDE 稳定性相关的问题。

问候，加布里埃尔。

# java - EJB Jndi 仅在 Java Web 启动时在 Glassfish 服务器中查找

> ID：11087951
> 
> 赞同：0
> 
> 时间：2012-06-18T17:27:06.413
> 
> 标签：java, glassfish, ejb, lookup, java-web-start

我正在尝试通过 Java Web 启动连接到 glassfish 服务器中的 ejb 服务。获取初始上下文时出现以下错误。我还添加了用于获取初始上下文的代码片段。

一个有趣的是，当我在 netbeans IDE 中将程序作为 java web start 之外的简单 java 程序运行时，它运行良好。

我将 glassfish 模块文件夹中的所有相关 jar 文件添加到 java web start 中。

```
java.lang.NullPointerException
    at com.sun.enterprise.naming.impl.SerialContext.<init>(SerialContext.java:275)
    at com.sun.enterprise.naming.impl.SerialContext.<init>(SerialContext.java:334)
    at com.sun.enterprise.naming.impl.SerialInitContextFactory.createInitialContext(SerialInitContextFactory.java:358)
    at com.sun.enterprise.naming.impl.SerialInitContextFactory.getInitialContext(SerialInitContextFactory.java:353)
    at com.sun.enterprise.naming.SerialInitContextFactory.getInitialContext(SerialInitContextFactory.java:69)
    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.init(Unknown Source)
    at javax.naming.InitialContext.<init>(Unknown Source)
    at gov.ca.lc.util.ServiceLocator.getInitialContext(ServiceLocator.java:140)
    at gov.ca.lc.util.ServiceLocator.getVotesEJB(ServiceLocator.java:103)
    at gov.ca.lc.scenemanagement.AbstractVotingScene.getCommitteeList(AbstractVotingScene.java:143)
    at gov.ca.lc.scenemanagement.AbstractVotingScene.<init>(AbstractVotingScene.java:65)
    at gov.ca.lc.scenes.MenuScene.<init>(MenuScene.java:56)
    at gov.ca.lc.menu.StartVoting.startUp(StartVoting.java:47)
    at org.mt4j.MTApplication.setup(MTApplication.java:328)
    at processing.core.PApplet.handleDraw(PApplet.java:1580)
    at processing.core.PApplet.run(PApplet.java:1502)
    at java.lang.Thread.run(Unknown Source)
Exception in thread "Animation Thread" java.lang.NullPointerException
    at gov.ca.lc.scenemanagement.AbstractVotingScene.getCommitteeList(AbstractVotingScene.java:143)
    at gov.ca.lc.scenemanagement.AbstractVotingScene.<init>(AbstractVotingScene.java:65)
    at gov.ca.lc.scenes.MenuScene.<init>(MenuScene.java:56)
    at gov.ca.lc.menu.StartVoting.startUp(StartVoting.java:47)
    at org.mt4j.MTApplication.setup(MTApplication.java:328)
    at processing.core.PApplet.handleDraw(PApplet.java:1580)
    at processing.core.PApplet.run(PApplet.java:1502)
    at java.lang.Thread.run(Unknown Source)

Following is my code to get the initial context

    private static InitialContext getInitialContext()
            throws NamingException {
            Properties props = null;
            try{  
    //            props=new Properties();   
    //            props.load(new FileInputStream(new File("jndi.properties")));
    //            System.out.println(props.get("java.naming.factory.initial"));
                 props=new Properties();   

    props.setProperty("java.naming.factory.initial","com.sun.enterprise.naming.SerialInitContextFactory");  
        props.setProperty("java.naming.factory.url.pkgs ", "com.sun.enterprise.naming");//ur server ip  
        props.setProperty("java.naming.factory.state ", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");//ur server ip  
        props.setProperty("org.omg.CORBA.ORBInitialHost", "165.107.33.181");//ur server ip  
        props.setProperty("org.omg.CORBA.ORBInitialPort","3700"); //default is 3700  

            }catch(Exception ex){
                ex.printStackTrace();
            }
            return new InitialContext(props);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:41:14.543

我也有同样的问题。我使用 JMS，我需要添加其他 jars。起初我尝试使用 gf-client.jar，但它无法通过 Java Web 启动。因此，我添加了 [将远程 JMS 客户端连接到 GlassFish 3](https://stackoverflow.com/questions/5489937/connecting-a-remote-jms-client-to-glassfish-3)中列出的 jar 。它在 Java Web 启动之外工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:58:54.037

我不知道相关的 jar 文件对您来说是什么，但以防万一我们对该领域有不同的看法：我只使用 appserv-rt.jar 和 java-ee.jar 使用与初始上下文相同的属性它工作正常。不要添加任何你不需要的东西，然后再试一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:52:08.633

glassfish/bin 中的 package-appclient 创建了 appclient.jar，其中包含客户端的 jar。然后在客户端上解压并像往常一样使用 gf-client.jar。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-26T23:53:14.423

我想补充一点，所有这些设置只有在您的机器中安装了 glassfish 时才能工作。如果您在没有 glassfish 服务器的机器上部署 java webstart 应用程序，那么我们最终会遇到同样的异常。原因是如果你打开 appserv-rt.jar 它指向 gf-client.jar，如果你查看 gf-client.jar 它指向模块文件夹中的一大堆 jar 文件。所以我想，基本上我们需要 gf-client.jar 指向的所有 jar 文件。

# php - symfony 1.4 - 基于用户类型的路由

> ID：11087956
> 
> 赞同：0
> 
> 时间：2012-06-18T17:27:21.280
> 
> 标签：php, symfony1, routing, symfony-1.4

我一直在使用 symfony 1.4 来构建一个我没有完全考虑过的项目。该站点有四种用户类型：A、B、C 和未经身份验证的用户。我需要每种用户类型都有自己的一组路由和操作。当 A 类型的用户访问 mysite.com/ 时，他会看到与 B、C 和未登录用户不同的内容。A 用户可能还可以使用这些路由：mysite.com/users、mysite.com/组等，而 B、C 和未经身份验证的用户可能不会。基本上，有时用户可能会共享一些路由（例如 /），有时则不会。

不幸的是，symfony 在到达用户过滤器之前加载了路由，据我所知，没有简单的方法可以即时重新填充路由并重新调度。使用 switchTo 似乎也很糟糕，因为我基本上会为每个请求加载两次应用程序。

基本上我需要框架来查看用户类型并加载适当的路由。任何涉及 symfony 的解决方案都非常受欢迎！丁：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:34:52.793

想想你的应用程序设计。URL 是对象的标识符。对不同的事物使用相同的 URL 并不是一个好的设计。

也许如果用户的类型真的不同，你也可以考虑为界面创建不同的应用程序。然后，您还可以创建不同的会话 cookie。

然后 URLS 可以是
/
头版 /groups 所有普通用户的组页面
/admin/groups 组的管理界面

# ios - 检测网页请求是否来自浏览器与 UIWebView

> ID：11087957
> 
> 赞同：3
> 
> 时间：2012-06-18T17:27:24.950
> 
> 标签：ios, uiwebview, webserver

网络服务器是否知道页面请求是来自网络浏览器还是来自 IOS 应用程序中的 UIWebView。

例如，是否有任何网络服务器能够区分从网络浏览器请求的网页与 iOS 上的 Instapaper 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T09:50:49.703

用户代理会有所作为。使用以下检测代码

```
var isWebView = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);

if(isWebView) {
    alert("Page serving through UIWebView");
} else {
    alert("Page serving through Browser");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:52:55.263

是的，每个用户代理都是不同的。

# javascript - JavaScript字符串中的转义控制和非ASCII字符（高位）？

> ID：11087958
> 
> 赞同：2
> 
> 时间：2012-06-18T17:27:28.300
> 
> 标签：javascript, regex

javascript中是否有一种简单的方法可以只转义某些范围的控制字符？

具体来说，我只想转义范围“\x00-\x1f”和“\x7f-\xff”（控制和高位字符）。在计算然后发送到 API 的哈希之前，我只需要转义这些字符。像 encodeURI() 和 escape() 这样的标准函数逃逸太多了。

基本上，我需要匹配 perl 的[uri_escape($text,"\x00-\x1f\x7f-\xff")](http://search.cpan.org/dist/URI/URI/Escape.pm)的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:41:11.137

```
function uri_escape( text, re ) {

    function pad( num ) {
        return num.length < 2 ? "0" + num : num;
    }

    return text.replace( re, function(v){
        return "%"+pad(v.charCodeAt(0).toString(16)).toUpperCase();
    });
}

uri_escape( "\u0015\u0012", /[\x00-\x1f\x7f-\xff]/g );
//"%15%12" 
```

# google-apps-script - 使用 Google Apps 脚本编写 Google 文档（不是电子表格）

> ID：11087962
> 
> 赞同：0
> 
> 时间：2012-06-18T17:27:35.527
> 
> 标签：google-apps-script

所以我知道可以使用 Google Apps 脚本创建用于电子表格的脚本，但是是否支持在文档上使用创建的脚本？我知道 API 提供了用于创建和编辑文档的服务，尽管它们带有实验标签，但我似乎找不到在文档上创建和安装脚本的方法。

当我说文档服务时，我指的是以下链接：[https ://developers.google.com/apps-script/service_document](https://developers.google.com/apps-script/service_document)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-07T20:09:16.597

更新：[你现在可以这样做](https://developers.google.com/apps-script/reference/document/)。以防万一有人偶然发现这个答案。还要澄清上述答案：您可以创建附加到文档或独立脚本的脚本。附加脚本可以作为附加组件发布，但始终与文档（文档、工作表或表单）相关联。独立脚本可以作为 Web 应用程序发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:40:33.860

你找不到它，因为你做不到。脚本确实可以使用文档服务（如您所指）操作文档，但脚本本身应链接到电子表格或 Google 站点。链接可能不是最好的词，因为可以发布应用程序脚本以作为独立的 Web 应用程序工作 - 在这种情况下，电子表格的链接仅在应用程序开发期间使用。我希望这能让事情变得足够清楚。

# windows - 在同一浏览器选项卡中打开链接

> ID：11087969
> 
> 赞同：1
> 
> 时间：2012-06-18T17:28:12.400
> 
> 标签：windows, delphi, url, browser

如何在同一浏览器选项卡中打开链接？我试过这段代码：

```
ShellExecute(Handle, 'open', 'http://site.com', '_self', nil, SW_SHOWNORMAL); 
```

但它会继续在新表中打开链接。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:38:18.720

[我以前写过这个话题](http://embarcadero.newsgroups.archived.at/public.delphi.nativeapi/200809/080905119.html)：

> `ShellExecute`绝对没有“标签”的概念。事实上，它甚至没有“默认浏览器”的概念。它所做的只是找到为以“http://”开头的文件名配置的任何程序并执行配置的命令行。
> 
> 浏览器对新命令行的作用是它自己的选择。API 函数没有控制权。有时，浏览器允许用户对其进行配置。
> 
> 打开新标签页或窗口是最安全的做法。您和浏览器都不知道用户是否仍在使用之前的选项卡或窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:28:06.810

一个可能的入口点是使用 OLE 自动化。使用这种技术，您可以连接任何现有的 MSIE 实例，以便您可以将当前浏览窗口带到新的 url。

# javascript - 查找文本并将其删除 jquery

> ID：11087972
> 
> 赞同：3
> 
> 时间：2012-06-18T17:28:14.307
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 查找文本字符串？](https://stackoverflow.com/questions/926580/find-text-string-using-jquery)

你如何找到一个文本字符串并用 jquery 隐藏它。

```
<div class="report-box">
  <div class="title">test</div>
  <table>
    <tbody>
      <tr align="center" class="CellLabel">
        <td colspan="2">Day at a Glance</td>
      </tr>
      <tr class="CellLabel">
        <td>New Clients</td>
        <td>00000</td>
      </tr>
      <tr class="CellLabel">
      <  td>Money Received</td>
        <td>$ 0000,000.0000</td>
      </tr>
      <tr class="CellLabel">
        <td>Overdue Invoices</td>
        <td>0000000</td>
      </tr>
      <tr class="CellLabel">
        <td>Services</td>
        <td>000000</td>
      </tr>
      <tr align="right" class="CellLabel">
        <td colspan="2"></td>
      </tr>
    </tbody>
  </table>
</div> 
```

我将如何删除

```
<tr class="CellLabel">
  <td>Money Received</td>
  <td>$ 0000,000.0000</td>
</tr> 
```

从使用 jquery 的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:48:56.643

首先，您的 html 有点乱，缺少一些标签。但是给你。;)

# 1：

预览 - [http://jsfiddle.net/Xpc63/1/](http://jsfiddle.net/Xpc63/1/)

```
$('.CellLabel').removeByContent('Money');​ 
```

*查看完整 JS 代码的预览。*

# 2：

预览 - [http://jsfiddle.net/ahzPs/1/](http://jsfiddle.net/ahzPs/1/)

```
$('.CellLabel').contains('Money').remove();​ 
```

*查看完整 JS 代码的预览。*

# 3：

预览 - [http://jsfiddle.net/mWtzw/](http://jsfiddle.net/mWtzw/)

```
$('.CellLabel').filter(function() {
    return $(this).html().indexOf('Money') != -1;
}).remove();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:34:14.167

您可以使用 contains 选择器方法：

```
$('td:contains("$ 0000,000.0000")').parent().hide();  //to hide

$('td:contains("$ 0000,000.0000")').parent().remove();  //to remove 
```

或者，如果您只想删除或隐藏包含文本的 td：

```
$('td:contains("$ 0000,000.0000")').hide();  //to hide

$('td:contains("$ 0000,000.0000")').remove();  //to remove 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:35:14.727

```
$('.cellLabel').find('td:contains("money")').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:39:07.037

```
// just want to remove
$('.cellLabel').find('td:contains("Money Received")').parent.remove(); 
```

或者

```
 // if just want to hide
 $('.cellLabel').find('td:contains("Money Received")').parent.hide(); 
```

# c# - Linq-to-Entity 查询的动态谓词

> ID：11087973
> 
> 赞同：11
> 
> 时间：2012-06-18T17:28:14.733
> 
> 标签：c#, asp.net-mvc-3, linq, linq-to-entities

以下 Linq-to-Entities 查询工作正常：

```
var query = repository.Where(r => r.YearProp1.HasValue &&
                                  r.YearProp1 >= minYear &&
                                  r.YearProp1 <= maxYear); 
```

我的数据库有十几个列，它们都报告与年份相关的信息（`short?`数据类型）。我想为所有这些列重用相同的 Linq-to-Entities 逻辑。就像是：

```
Func<RepoEntity, short?> fx = GetYearPropertyFunction();
var query = repository.Where(r => fx(r).HasValue &&
                                  fx(r) >= minYear &&
                                  fx(r) <= maxYear); 
```

这会导致错误：

> LINQ to Entities 无法识别方法 'System.Nullable`1[System.Int16] fx(RepoEntity)' 方法，并且此方法无法转换为存储表达式。

我理解为什么我会收到错误，但我想知道是否有一种解决方法不涉及重复代码十几次，只是为了更改 SQL 查询正在运行的属性。

我会在多个查询中重用该函数，所以我想我的问题的一般版本是：**有没有办法将一个简单的属性获取器 lambda 函数转换为 Linq-to-Entities 可以使用的表达式？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:16:39.370

以 Raphaël Althaus 的回答为基础，但添加了您最初寻找的通用选择器：

```
public static class Examples
{
    public static Expression<Func<MyEntity, short?>> SelectPropertyOne()
    {
        return x => x.PropertyOne;
    }

    public static Expression<Func<MyEntity, short?>> SelectPropertyTwo()
    {
        return x => x.PropertyTwo;
    }

    public static Expression<Func<TEntity, bool>> BetweenNullable<TEntity, TNull>(Expression<Func<TEntity, Nullable<TNull>>> selector, Nullable<TNull> minRange, Nullable<TNull> maxRange) where TNull : struct
    {
        var param = Expression.Parameter(typeof(TEntity), "entity");
        var member = Expression.Invoke(selector, param);

        Expression hasValue = Expression.Property(member, "HasValue");
        Expression greaterThanMinRange = Expression.GreaterThanOrEqual(member,
                                             Expression.Convert(Expression.Constant(minRange), typeof(Nullable<TNull>)));
        Expression lessThanMaxRange = Expression.LessThanOrEqual(member,
                                          Expression.Convert(Expression.Constant(maxRange), typeof(Nullable<TNull>)));

        Expression body = Expression.AndAlso(hasValue,
                      Expression.AndAlso(greaterThanMinRange, lessThanMaxRange));

        return Expression.Lambda<Func<TEntity, bool>>(body, param);
    }
} 
```

可以像您正在寻找的原始查询一样使用：

```
Expression<Func<MyEntity, short?>> whatToSelect = Examples.SelectPropertyOne;

var query = Context
            .MyEntities
            .Where(Examples.BetweenNullable<MyEntity, short>(whatToSelect, 0, 30)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:34:59.500

谓词本身就是一个过滤器，应该评估为 bool（是否将其包含在结果中）。您可以修改您的方法，使其看起来像这样，它应该可以工作：

```
public static Expression<Func<RepoEntity, bool>> FitsWithinRange(int minYear, int maxYear)
{
    return w => w.HasValue && w >= minYear && w <= maxYear;
} 
```

编辑：哦，使用它：

```
var query = repository.Where(Repository.FitsWithinRange(minYear, maxYear)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T20:28:24.740

你可以做这样的事情（不确定它是否会在 linq2 实体中“按原样”工作，但如果你有问题......告诉）

用法

```
var query = <your IQueryable<T> entity>.NullableShortBetween(1, 3).ToList(); 
```

功能

```
public static IQueryable<T> NullableShortBetween<T>(this  IQueryable<T> queryable, short? minValue, short? maxValue) where T: class
        {
            //item (= left part of the lambda)
            var parameterExpression = Expression.Parameter(typeof (T), "item");

            //retrieve all nullable short properties of your entity, to change if you have other criterias to get these "year" properties
            var shortProperties = typeof (T).GetProperties().Where(m => m.CanRead && m.CanWrite && m.PropertyType == typeof(short?));

            foreach (var shortProperty in shortProperties)
            {
                //item (right part of the lambda)
                Expression memberExpression = parameterExpression;
                //item.<PropertyName>
                memberExpression = Expression.Property(memberExpression, shortProperty);
                //item.<PropertyName>.HasValue
                Expression firstPart = Expression.Property(memberExpression, "HasValue");
                //item.<PropertyName> >= minValue
                Expression secondPart = Expression.GreaterThanOrEqual(memberExpression, Expression.Convert(Expression.Constant(minValue), typeof (short?)));
                //item.<PropertyName> <= maxValue
                var thirdPart = Expression.LessThanOrEqual(memberExpression, Expression.Convert(Expression.Constant(maxValue), typeof (short?)));
                //item.<PropertyName>.HasValue && item.<PropertyName> >= minValue
                var result = Expression.And(firstPart, secondPart);
                //item.<PropertyName>.HasValue && item.<PropertyName> >= minValue && item.<PropertyName> <= maxValue
                result = Expression.AndAlso(result, thirdPart);
                //pass the predicate to the queryable
                queryable = queryable.Where(Expression.Lambda<Func<T, bool>>(result, new[] {parameterExpression}));
            }
            return queryable;
        } 
```

**编辑**：另一种解决方案，基于“简单”反射，“看起来”是你想要的

```
public static short? GetYearValue<T>(this T instance)
        {
            var propertyInfo = typeof(T).GetProperties().FirstOrDefault(m => m.CanRead && m.CanWrite && m.PropertyType == typeof(short?));
            return propertyInfo.GetValue(instance, null) as short?;
        } 
```

用法

```
var result = list.Where(item => item.GetYearValue() != null && item.GetYearValue() >= 1 && item.GetYearValue() <= 3).ToList(); 
```

# android - 单选按钮更新

> ID：11087975
> 
> 赞同：-1
> 
> 时间：2012-06-18T17:28:18.580
> 
> 标签：android, bluetooth, radio-button

我正在开发一个需要连接到嵌入式蓝牙设备的应用程序，然后在我的 android 设备和嵌入式芯片之间来回发送数据。我目前遵循了 BluetoothChat 示例中给出的模型，并且我非常接近正确连接。对于错误检查，我想知道是否有办法让单选按钮/复选框/可以附加到布尔值的东西，这样在与设备连接后，该框将被选中，但如果无法建立连接，它没有被选中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:39:33.243

您可以只使用内置的 Checkbox 小部件。

假设您有用于跟踪 BT 连接的布尔值 isConnected，然后通过以下方式设置复选框状态：

```
checkBox.setChecked(isConnected); 
```

# jquery - 如何使用 jQuery 正确地将备用类添加到具有相同类的多个表上的表行？

> ID：11087977
> 
> 赞同：2
> 
> 时间：2012-06-18T17:28:26.870
> 
> 标签：jquery, html-table

这通常是一件非常直接的事情，所以在你对这样的问题投反对票之前，请听我说完:)

我的问题不是选择元素并添加类，而是我希望将备用类添加到*相对于该表的*偶数行或奇数行。

现在我正在使用这个：

```
jQuery(document).ready(function(){

jQuery('table.rep tbody > tr td:first-child').addClass('composer');
jQuery('table.rep tbody > tr td:last-child').addClass('pieces');
jQuery('table.rep tbody > tr:odd').addClass('alt');

}); 
```

问题是 jQuery 正在使用“rep”类从所有表中选择所有行，然后将“alt”类添加到该集合中的奇数行。

就像我说的，我想让它把类应用到相对于每个表的偶数/奇数行，所以第一行的样式总是相同的。由于它使用上面的代码，第一行可以是 alt/normal，具体取决于上表中有多少行。

我正在考虑以某种方式使用该`.each()`功能，但是在查看了 jQuery 文档之后，我无法找到如何实现我想要的结果。

我想它可能看起来像这样：

```
jQuery('table.rep').each(function(){
    /* select/filter odd rows from this set and add alt class */
}); 
```

所以我的问题是是否`.each()`可以这样使用，如果可以，如何深入研究每次迭代的结果并让它做我想做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:36:31.427

你在这里`.each()`:)

```
jQuery("table.rep").each(function(i,e)
            {
                $(e).find("tr:odd").addClass("alt");
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:57:17.807

干得好..！永远记住 $(...).length 是找出过滤器或陷阱中有多少元素的关键... :-)

**Javascript：**

```
jQuery(document).ready(function()
{
    $('table.rep tbody > tr td:first-child').addClass('composer');
    $('table.rep tbody > tr td:last-child').addClass('pieces');
    $('table.rep').each(function()
    {
       //alert($(this).children('tbody').children(':odd').length)
       $(this).children('tbody').children(':odd').addClass('alt');
    });

}); 
```

**HTML**

```
<table border="1" class="rep">
    <tbody>
        <tr>
            <td>composor #1.1</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #1.1</td>
        </tr>
        <tr>
            <td>composor #1.2</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #1.2</td>
        </tr>
        <tr>
            <td>composor #2.1</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #2.1</td>
        </tr>
        <tr>
            <td>composor #2.2</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #2.2</td>
        </tr>
    </tbody>
</table>
<br /><br />
<table border="1" class="rep">
    <tbody>
        <tr>
            <td>composor #1.1</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #1.1</td>
        </tr>
        <tr>
            <td>composor #1.2</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #1.2</td>
        </tr>
        <tr>
            <td>composor #2.1</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #2.1</td>
        </tr>

    </tbody>
</table>
<br /><br />
<table border="1" class="rep">
    <tbody>
        <tr>
            <td>composor #1.1</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #1.1</td>
        </tr>
        <tr>
            <td>composor #1.2</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #1.2</td>
        </tr>
        <tr>
            <td>composor #2.1</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #2.1</td>
        </tr>
        <tr>
            <td>composor #2.2</td>
            <td>data</td>
            <td>data</td>
            <td>pieces #2.2</td>
        </tr>
    </tbody>
</table> 
```

**CSS**

```
.composer {
    color:blue;
}
.pieces {
    color:green;
}
.alt {
    background-color:#ddd;
}
body {
    font-family:tahoma
}
.rep td {
    padding:2px;
} 
```

我本可以避免添加 HTML，但不是为了使这篇文章（答案）自包含 - 我在这里添加它。

您可以在 jsfiddle 上查看演示：http: [//jsfiddle.net/dharmavir/HfwqH/](http://jsfiddle.net/dharmavir/HfwqH/)

# sql-server-2008 - 无法在不使用范围、之间等的情况下选择 TSQL 中的某些记录

> ID：11087978
> 
> 赞同：1
> 
> 时间：2012-06-18T17:28:30.873
> 
> 标签：sql-server-2008, tsql, indexing, sql-execution-plan, hint

在 SQL Server 2008 R2 数据库上，我有一个以单个整数作为主键的表。有时，当我对主键执行选择时，我没有得到任何结果，但如果我在某些值之间搜索主键上的所有记录，我就能够检索该行。这仅影响少数记录（数百万行中不到十个）。绝大多数记录都可以用一个简单的“等于”语句来选择。

有谁知道这可能是什么原因或如何解决这个问题？我怀疑聚集索引可能有问题。如果我使用提示“index(0)”，那么我可以在不使用范围的情况下获取记录。

**细节：**

语句 1 不产生任何结果：

```
select * from claim where claim_id = 12166769 
```

语句 2 为 claim_id 12166769 生成一个结果：

```
select * from claim where claim_id > 12166768 and claim_id < 12166770 
```

这两个语句都使用使用 PK_claim_claim_id 的聚集索引搜索。

语句 3 使用提示为 claim_id 12166769 生成一个结果：

```
select * from claim  with (index(0)) where claim_id = 12166769 
```

声明表有一个名为“claim_id”的列，定义为主键，整数，不为空。它在名为“PK_claim_claim_id”的主键上有一个聚集索引。

我正在使用 SQL Sentry Plan Explorer 查看计划树。语句 1 有 1 个估计行和 0 个实际行。语句 2 有 7 个估计行和 1 个实际行。

**更新** 另外我们发现当我们跑

```
select * from claim where claim_id > 12166774 and claim_id < 12166775 
```

我们返回了五行，从 12166770 到 12166774。运行

```
select * from claim with (index(0))  where claim_id > 12166774 
and claim_id < 12166775 
```

提示没有按预期返回任何记录。

**2012 年 6 月 22 日更新**

我说得太早了。我们在不同的地方发现了这个错误。我发现我实际上并没有扫描整个数据库，只扫描了其中的一部分。

```
select * from claim where claim_id in (8223749,8223752,8223753,8223754,8223755) 
```

不返回任何行，而

```
select * from claim with (index(0))
    where claim_id in (8223749,8223752,8223753,8223754,8223755) 
```

返回行。我跑了

```
SELECT sys.fn_PhysLocFormatter(%%physloc%%),claim_id FROM claim with (index(0)) 
WHERE claim`_id in (8223749,8223752,8223753,8223754,8223755) 
```

并收到

```
(3:1394868:2)   8223749
(3:1394868:5)   8223752
(3:1394868:6)   8223753
(3:1394868:7)   8223754
(3:1394868:8)   8223755 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:22:37.480

由于我的评论似乎解决了问题，我将继续发布作为答案。

DBCC CHECKTABLE (table_name | view_name [ , { NOINDEX | index_id } |, { REPAIR_ALLOW_DATA_LOSS | REPAIR_FAST | REPAIR_REBUILD } ] )

# iphone - 吊销分发证书时 APNS 证书会发生什么情况

> ID：11087983
> 
> 赞同：6
> 
> 时间：2012-06-18T17:28:59.503
> 
> 标签：iphone, ios, certificate, apple-push-notifications

我是 APNS 证书的新手。我的问题是一位老开发人员丢失了我们用于多个内部（临时）应用程序的私钥，以及我们用来向用户推出应用程序和策略的应用程序。我知道获取私钥的唯一方法是吊销证书，然后生成一个新证书并重新签署所有内部应用程序并使用新证书重新部署。我唯一关心的是使用APNS的应用程序会发生什么，这是否仍然使用我们苹果帐户的分发证书，或者当我们撤销分发证书时这不会受到影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:27:24.650

推送证书不是配置文件的一部分。它与客户端（应用程序）无关，只有您的服务器与 APNS 的连接受到影响。

# google-app-engine - 尝试为 GWT / App Engine 数据存储区查找示例（eclipse 项目）

> ID：11087984
> 
> 赞同：0
> 
> 时间：2012-06-18T17:29:03.683
> 
> 标签：google-app-engine, gwt, jdo, datastore, objectify

一定有人知道 GWT / App Engine 数据存储区的工作 Eclipse 项目吗？

我试图用 JDO 教程为 stockwatcher 找到一个完整的示例，但没有运气。

我找到了 2 个 Objectify 示例：listwidget（检出失败）和 gwt-objectify-appengine（Maven 构建失败，抱怨缺少 appengine-api-1.0-sdk-1.5.1.jar，它实际上存在）。

理想情况下，我正在寻找最小的东西，一个将部署到 App Engine 并保存/重新加载一些值的 RPC 应用程序。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:02:11.003

GWT 自己的[MobileWebApp](http://google-web-toolkit.googlecode.com/svn/trunk/samples/mobilewebapp/)就是这样一个示例项目。它已经过 mavenized，因此要使其成为 Eclipse 项目，只需将其作为 Eclipse 中的 Maven 项目检出（假设您已安装[m2e](http://eclipse.org/m2e/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:16:43.917

在 google-code 的[GWT 下载](http://code.google.com/p/google-web-toolkit/downloads/list)页面中，您可以找到教程应用程序 StockWatcher 的代码。[此](http://code.google.com/p/google-web-toolkit/downloads/detail?name=Tutorial-GettingStartedAppEngine-2.1.zip&can=2&q=)zip 是为 Google App Engine 配置的 StockWatcher 应用程序。它不使用 Maven。有关如何在 Eclipse 中导入项目的详细说明，请查看 zip 文件中的 README.txt 文件。

正是这段代码让您可以从第 3 步开始[本教程](https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine)。

# charts - JavaFX 2.x 使用类别 axys 放大 XYChart

> ID：11087988
> 
> 赞同：2
> 
> 时间：2012-06-18T17:29:20.780
> 
> 标签：charts, zooming, javafx-2

我有这段代码可以对 XYChart LineChart < Number, Number > 执行缩放

```
public class Zoom extends Application {

BorderPane pane;
Rectangle rect;
SimpleDoubleProperty rectinitX = new SimpleDoubleProperty();
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty();
SimpleDoubleProperty rectX = new SimpleDoubleProperty();
SimpleDoubleProperty rectY = new SimpleDoubleProperty();

double initXLowerBound = 0, initXUpperBound = 0, initYLowerBound = 0, initYUpperBound = 0;
@Override
public void start(Stage stage) {    
stage.setTitle("Lines plot");
final NumberAxis xAxis = new NumberAxis(1, 12, 1);
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {

@Override
public String toString(Number object) {
    return String.format("%7.5f", object);
}
});

final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis);

lineChart.setCreateSymbols(false);
lineChart.setAlternativeRowFillVisible(false);
lineChart.setAnimated(true);

XYChart.Series series1 = new XYChart.Series();
series1.getData().add(new XYChart.Data(1, 0.53185));
series1.getData().add(new XYChart.Data(2, 0.532235));
series1.getData().add(new XYChart.Data(3, 0.53234));
series1.getData().add(new XYChart.Data(4, 0.538765));
series1.getData().add(new XYChart.Data(5, 0.53442));
series1.getData().add(new XYChart.Data(6, 0.534658));
series1.getData().add(new XYChart.Data(7, 0.53023));
series1.getData().add(new XYChart.Data(8, 0.53001));
series1.getData().add(new XYChart.Data(9, 0.53589));
series1.getData().add(new XYChart.Data(10, 0.53476));
series1.getData().add(new XYChart.Data(11, 0.530123));
series1.getData().add(new XYChart.Data(12, 0.53035));

pane = new BorderPane();
pane.setCenter(lineChart);
Scene scene = new Scene(pane, 800, 600);
lineChart.getData().addAll(series1);

initXLowerBound = ((NumberAxis) lineChart.getXAxis()).getLowerBound();
initXUpperBound = ((NumberAxis) lineChart.getXAxis()).getUpperBound();
initYLowerBound = ((NumberAxis) lineChart.getYAxis()).getLowerBound();
initYUpperBound = ((NumberAxis) lineChart.getYAxis()).getUpperBound();

stage.setScene(scene);        

scene.setOnMouseClicked(mouseHandler);
scene.setOnMouseDragged(mouseHandler);
scene.setOnMouseEntered(mouseHandler);
scene.setOnMouseExited(mouseHandler);
scene.setOnMouseMoved(mouseHandler);
scene.setOnMousePressed(mouseHandler);
scene.setOnMouseReleased(mouseHandler);

rect = new Rectangle();
rect.setFill(Color.web("blue", 0.1));
rect.setStroke(Color.BLUE);
rect.setStrokeDashOffset(50);

rect.widthProperty().bind(rectX.subtract(rectinitX));
rect.heightProperty().bind(rectY.subtract(rectinitY));
pane.getChildren().add(rect);

stage.show();
}
EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {

@Override
public void handle(MouseEvent mouseEvent) {
if (mouseEvent.getButton() == MouseButton.PRIMARY)
{
        if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {
            rect.setX(mouseEvent.getX());
            rect.setY(mouseEvent.getY());
            rectinitX.set(mouseEvent.getX());
            rectinitY.set(mouseEvent.getY());
        } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED) {
            rectX.set(mouseEvent.getX());
            rectY.set(mouseEvent.getY());
        } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_RELEASED) {

            if ((rectinitX.get() >= rectX.get())&&(rectinitY.get() >= rectY.get()))
            {
                LineChart<Number, Number> lineChart = (LineChart<Number, Number>)    pane.getCenter();

                ((NumberAxis) lineChart.getXAxis()).setLowerBound(initXLowerBound);
                ((NumberAxis) lineChart.getXAxis()).setUpperBound(initXUpperBound);

                ((NumberAxis) lineChart.getYAxis()).setLowerBound(initYLowerBound);
                ((NumberAxis) lineChart.getYAxis()).setUpperBound(initYUpperBound);

            }
            else
            {

                double Tgap = 0;
                double newLowerBound, newUpperBound, axisShift;
                double xScaleFactor, yScaleFactor;
                double xaxisShift, yaxisShift;

                LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter();

                // Zoom in Y-axis by changing bound range.            
                NumberAxis yAxis = (NumberAxis) lineChart.getYAxis();
                Tgap = yAxis.getHeight()/(yAxis.getUpperBound() - yAxis.getLowerBound());
                axisShift = getSceneShiftY(yAxis);
                yaxisShift = axisShift;

                newUpperBound = yAxis.getUpperBound() - ((rectinitY.get() - axisShift) / Tgap);
                newLowerBound = yAxis.getUpperBound() - (( rectY.get() - axisShift) / Tgap);

                if (newUpperBound > yAxis.getUpperBound())
                    newUpperBound = yAxis.getUpperBound();

                yScaleFactor = (yAxis.getUpperBound() - yAxis.getLowerBound())/(newUpperBound - newLowerBound);
                yAxis.setLowerBound(newLowerBound);
                yAxis.setUpperBound(newUpperBound);

                NumberAxis xAxis = (NumberAxis) lineChart.getXAxis();

                Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound());            
                axisShift = getSceneShiftX(xAxis);                        
                xaxisShift = axisShift;                                                                                
                newLowerBound = ((rectinitX.get() - axisShift) / Tgap) + xAxis.getLowerBound();
                newUpperBound = ((rectX.get() - axisShift) / Tgap) + xAxis.getLowerBound();                

                if (newUpperBound > xAxis.getUpperBound())
                    newUpperBound = xAxis.getUpperBound();

                xScaleFactor = (xAxis.getUpperBound() - xAxis.getLowerBound())/(newUpperBound - newLowerBound);
                xAxis.setLowerBound( newLowerBound );
                xAxis.setUpperBound( newUpperBound );                      

            }
            // Hide the rectangle
            rectX.set(0);
            rectY.set(0);
        }
}

 }
 };
private static double getSceneShiftX(Node node) {
double shift = 0;
do { 
shift += node.getLayoutX(); 
node = node.getParent();
} while (node != null);
return shift;
}
private static double getSceneShiftY(Node node) {
double shift = 0;
do { 
shift += node.getLayoutY(); 
node = node.getParent();
} while (node != null);
return shift;
}

public static void main(String[] args) {
launch(args);
}        
} 
```

我想通过使用 < String, Number > 来获得相同的缩放结果，因为我想在 x axys 上使用日期和时间作为字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-26T10:49:18.427

好的，这就是我使用的应用程序，它不是很整洁，但它会完成这项工作：

首先，我使用 Javafx 的 Date 轴类：

[https://github.com/dukke/FXCharts/blob/master/DateAxis.java](https://i.stack.imgur.com/MY6dE.png)

然后我添加了另一个类，这个类是必要的，但我更容易使用它，所以：

```
package linechartwithdateaxis;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import javafx.event.EventHandler;
import javafx.scene.Cursor;
import javafx.scene.control.Label;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;

/**
 *
 * @author yschellekens
 */
      class HoveredThresholdNode extends StackPane {

      DateFormat df = new SimpleDateFormat("MM/dd/yyyy");

    HoveredThresholdNode(Date date,  double value) {
      setPrefSize(5, 5);

      final Label label = createDataThresholdLabel(date, value);

      setOnMouseEntered(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          getChildren().setAll(label);
          setCursor(Cursor.NONE);
          toFront();
        }
      });

       setOnMouseClicked(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {

                 }
     });

      setOnMouseDragEntered(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
         getChildren().setAll(label);

        }
     });

      setOnMouseExited(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          getChildren().clear();
          setCursor(Cursor.CROSSHAIR);
          toBack();
        }
      });
    }

    private Label createDataThresholdLabel(Date date, double value) {
      final Label label = new Label( java.lang.Math.round(value)+", On " +df.format(date));
              label.setStyle("-fx-font-size: 20; -fx-font-weight: bold; -fx-background-color: transparent; -fx-color:transparent;");

        label.setTextFill(Color.BLACK);

      label.setMinSize(Label.USE_PREF_SIZE, Label.USE_PREF_SIZE);
      return label;
    }
  } 
```

还有实际的代码，虽然丑陋但有效：

```
package linechartwithdateaxis;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.GregorianCalendar;
import javafx.application.Application;
import static javafx.application.Application.launch;
import javafx.beans.binding.BooleanBinding;
import javafx.beans.property.ObjectProperty;
import javafx.beans.property.SimpleObjectProperty;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Point2D;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.control.Button;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;

/**
 *
 * @author yschellekens
 */
public class LineChartWithDateAxis extends Application {  

    DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
    final DateAxis dateAxis = new DateAxis(new Date(2014-1900,11,10),new Date(2014-1900,11,25));
    final NumberAxis yAxis = new NumberAxis(0,20,1);
    Date [] xData ;
    ObservableList<XYChart.Data<Date, Number>> series1Data;
     ObservableList<XYChart.Series<Date, Number>> series;
    private double[] anArray;
    final LineChart<Date, Number> lineChart = new LineChart<>(dateAxis, yAxis);
    private int i;

    @Override
    public void start(Stage primaryStage) {     

        xData = new Date[9];
        for (i = 0; i < xData.length  ; i++) {xData[i]= new Date(2014-1900,11,i+15);  }
         dateAxis.setLowerBound(xData[0]);
         dateAxis.setUpperBound(xData[xData.length-1]);

        anArray = new double[9];
        anArray[0] = 2;
        anArray[1] = 19;
        anArray[2] = 3;
        anArray[3] = 5;
        anArray[4] = 12;
        anArray[5] = 6;
        anArray[6] = 2;
        anArray[7] = 12;
        anArray[8] = 6;

           XYChart.Series Dates = new XYChart.Series( "Dates", plotWithVisableLabeles(xData,anArray)  );

            lineChart.getData().add(Dates);

            final  BorderPane chartContainer = new  BorderPane();
            final Button zoomButton = new Button("Zoom");
            chartContainer.setCenter(lineChart);
             final Button unZoomButton = new Button("Un Zoom");
            chartContainer.setBottom(zoomButton);
            chartContainer.setRight(unZoomButton);
           final Rectangle zoomRect = new Rectangle();
        zoomRect.setManaged(false);
        zoomRect.setFill(Color.LIGHTSEAGREEN.deriveColor(0, 1, 1, 0.5));

        chartContainer.getChildren().add(zoomRect);
        setUpZooming(zoomRect, lineChart);

        StackPane root = new StackPane();
        root.getChildren().add(chartContainer);

        Scene scene = new Scene(root, 600, 600);

       //     final Button resetButton = new Button("Reset");
              final BooleanBinding disableControls = 
                 zoomRect.widthProperty().lessThan(5)
                .or(zoomRect.heightProperty().lessThan(5));
                zoomButton.disableProperty().bind(disableControls);

        zoomButton.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                doZoom(zoomRect);
            }
        });

            unZoomButton.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent event) {
               dateAxis.setLowerBound(new GregorianCalendar(2014, 11, 10).getTime());
               dateAxis.setUpperBound(new GregorianCalendar(2014, 11, 25).getTime());
                   }
        });  

             primaryStage.setTitle("zoomable Line chart with Date axis");
        primaryStage.setScene(scene);
        primaryStage.show();

    }

     private void setUpZooming(final Rectangle rect, final Node zoomingNode) {
        final ObjectProperty<Point2D> mouseAnchor = new SimpleObjectProperty<>();
        zoomingNode.setOnMousePressed(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                mouseAnchor.set(new Point2D(event.getX(), event.getY()));
                rect.setWidth(0);
                rect.setHeight(0);
            }
        });
        zoomingNode.setOnMouseDragged(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                double x = event.getX();
                double y = event.getY();
                rect.setX(Math.min(x, mouseAnchor.get().getX()));
                rect.setY(Math.min(y, mouseAnchor.get().getY()));
                rect.setWidth(Math.abs(x - mouseAnchor.get().getX()));
                rect.setHeight(Math.abs(y - mouseAnchor.get().getY()));
            }
        });
    }
        private void doZoom(Rectangle zoomRect) {
        Date leftBorder = dateAxis.getValueForDisplay(zoomRect.getX());        
        Date RightBorder = dateAxis.getValueForDisplay(zoomRect.getX() + zoomRect.getWidth());

       dateAxis.setLowerBound(leftBorder);
       dateAxis.setUpperBound(RightBorder);

        zoomRect.setWidth(0);
        zoomRect.setHeight(0); 
    }

        public ObservableList<XYChart.Data<Date, Double>> plotWithVisableLabeles(Date[] x ,double[] y) {
    final ObservableList<XYChart.Data<Date, Double>> dataset = FXCollections.observableArrayList();
     i = 0;
    while (i < y.length) {
      final XYChart.Data< Date,  Double> data = new XYChart.Data<>(x[i], y[i]);
      final StackPane node =  new HoveredThresholdNode(x[i],y[i]);
      node.setStyle("-fx-background-color: linear-gradient(black,white);");
     data.setNode(node);     
      dataset.add(data);
      i++;
    }
      return dataset;
  }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

我添加了我使用的日期轴版本（它的旧版本，并且由于 SO 限制我删除了所有评论）

```
package linechartwithdateaxis;

import com.sun.javafx.charts.ChartLayoutAnimator;
import javafx.animation.KeyFrame;
import javafx.animation.KeyValue;
import javafx.beans.property.LongProperty;
import javafx.beans.property.ObjectProperty;
import javafx.beans.property.ObjectPropertyBase;
import javafx.beans.property.SimpleLongProperty;
import javafx.scene.chart.Axis;
import javafx.util.Duration;
import javafx.util.StringConverter;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.*;

public final class DateAxis extends Axis<Date> {

    private final LongProperty currentLowerBound = new SimpleLongProperty(this, "currentLowerBound");

    private final LongProperty currentUpperBound = new SimpleLongProperty(this, "currentUpperBound");

    private final ObjectProperty<StringConverter<Date>> tickLabelFormatter = new ObjectPropertyBase<StringConverter<Date>>() {
        @Override
        protected void invalidated() {
            if (!isAutoRanging()) {
                invalidateRange();
                requestAxisLayout();
            }
        }

        @Override
        public Object getBean() {
            return DateAxis.this;
        }

        @Override
        public String getName() {
            return "tickLabelFormatter";
        }
    };

    private Date minDate, maxDate;

    private ObjectProperty<Date> lowerBound = new ObjectPropertyBase<Date>() {
        @Override
        protected void invalidated() {
            if (!isAutoRanging()) {
                invalidateRange();
                requestAxisLayout();
            }
        }

        @Override
        public Object getBean() {
            return DateAxis.this;
        }

        @Override
        public String getName() {
            return "lowerBound";
        }
    };

    private ObjectProperty<Date> upperBound = new ObjectPropertyBase<Date>() {
        @Override
        protected void invalidated() {
            if (!isAutoRanging()) {
                invalidateRange();
                requestAxisLayout();
            }
        }

        @Override
        public Object getBean() {
            return DateAxis.this;
        }

        @Override
        public String getName() {
            return "upperBound";
        }
    };

    private ChartLayoutAnimator animator = new ChartLayoutAnimator(this);

    private Object currentAnimationID;

    private DateAxis.Interval actualInterval = DateAxis.Interval.DECADE;

    public DateAxis() {
    }

    public DateAxis(Date lowerBound, Date upperBound) {
        this();
        setAutoRanging(false);
        setLowerBound(lowerBound);
        setUpperBound(upperBound);
    }

    public DateAxis(String axisLabel, Date lowerBound, Date upperBound) {
        this(lowerBound, upperBound);
        setLabel(axisLabel);
    }

    @Override
    public void invalidateRange(List<Date> list) {
        super.invalidateRange(list);

        Collections.sort(list);
        if (list.isEmpty()) {
            minDate = maxDate = new Date();
        } else if (list.size() == 1) {
            minDate = maxDate = list.get(0);
        } else if (list.size() > 1) {
            minDate = list.get(0);
            maxDate = list.get(list.size() - 1);
        }
    }

    @Override
    protected Object autoRange(double length) {
        if (isAutoRanging()) {
            return new Object[]{minDate, maxDate};
        } else {
            if (getLowerBound() == null || getUpperBound() == null) {
                throw new IllegalArgumentException("If autoRanging is false, a lower and upper bound must be set.");
            }
            return getRange();
        }
    }

    @Override
    protected void setRange(Object range, boolean animating) {
        Object[] r = (Object[]) range;
        Date oldLowerBound = getLowerBound();
        Date oldUpperBound = getUpperBound();
        Date lower = (Date) r[0];
        Date upper = (Date) r[1];
        setLowerBound(lower);
        setUpperBound(upper);

        if (animating) {

            animator.stop(currentAnimationID);
            currentAnimationID = animator.animate(
                    new KeyFrame(Duration.ZERO,
                            new KeyValue(currentLowerBound, oldLowerBound.getTime()),
                            new KeyValue(currentUpperBound, oldUpperBound.getTime())
                    ),
                    new KeyFrame(Duration.millis(700),
                            new KeyValue(currentLowerBound, lower.getTime()),
                            new KeyValue(currentUpperBound, upper.getTime())
                    )
            );

        } else {
            currentLowerBound.set(getLowerBound().getTime());
            currentUpperBound.set(getUpperBound().getTime());
        }
    }

    @Override
    protected Object getRange() {
        return new Object[]{getLowerBound(), getUpperBound()};
    }

    @Override
    public double getZeroPosition() {
        return 0;
    }

    @Override
    public double getDisplayPosition(Date date) {
        final double length = getSide().isHorizontal() ? getWidth() : getHeight();
        double diff = currentUpperBound.get() - currentLowerBound.get();
        double range = length - getZeroPosition();
        double d = (date.getTime() - currentLowerBound.get()) / diff;
        if (getSide().isVertical()) {
            return getHeight() - d * range + getZeroPosition();
        } else {
            return d * range + getZeroPosition();
        }
    }

    @Override
    public Date getValueForDisplay(double displayPosition) {
        final double length = getSide().isHorizontal() ? getWidth() : getHeight();
      double diff = currentUpperBound.get() - currentLowerBound.get();
      double range = length - getZeroPosition();

        if (getSide().isVertical()) {
            return new Date((long) ((displayPosition - getZeroPosition() - getHeight()) / -range * diff + currentLowerBound.get()));
        } else {
            return new Date((long) ((displayPosition - getZeroPosition()) / range * diff + currentLowerBound.get()));
        }
    }

    @Override
    public boolean isValueOnAxis(Date date) {
        return date.getTime() > currentLowerBound.get() && date.getTime() < currentUpperBound.get();
    }

    @Override
    public double toNumericValue(Date date) {
        return date.getTime();
    }

    @Override
    public Date toRealValue(double v) {
        return new Date((long) v);
    }

    @Override
    protected List<Date> calculateTickValues(double v, Object range) {
        Object[] r = (Object[]) range;
        Date lower = (Date) r[0];
        Date upper = (Date) r[1];

        List<Date> dateList = new ArrayList<Date>();
        Calendar calendar = Calendar.getInstance();

        // The preferred gap which should be between two tick marks.
        double averageTickGap = 100;
        double averageTicks = v / averageTickGap;

        List<Date> previousDateList = new ArrayList<Date>();

        DateAxis.Interval previousInterval = DateAxis.Interval.values()[0];

        // Starting with the greatest interval, add one of each calendar unit.
        for (DateAxis.Interval interval : DateAxis.Interval.values()) {
            // Reset the calendar.
            calendar.setTime(lower);
            dateList.clear();
            previousDateList.clear();
            actualInterval = interval;

            while (calendar.getTime().getTime() <= upper.getTime()) {
                dateList.add(calendar.getTime());
                calendar.add(interval.interval, interval.amount);
            }

            if (dateList.size() > averageTicks) {
                calendar.setTime(lower);
                // Recheck if the previous interval is better suited.
                while (calendar.getTime().getTime() <= upper.getTime()) {
                    previousDateList.add(calendar.getTime());
                    calendar.add(previousInterval.interval, previousInterval.amount);
                }
                break;
            }

            previousInterval = interval;
        }
        if (previousDateList.size() - averageTicks > averageTicks - dateList.size()) {
            dateList = previousDateList;
            actualInterval = previousInterval;
        }

        // At last add the upper bound.
        dateList.add(upper);

        List<Date> evenDateList = makeDatesEven(dateList, calendar);
        if (evenDateList.size() > 2) {

            Date secondDate = evenDateList.get(1);
            Date thirdDate = evenDateList.get(2);
            Date lastDate = evenDateList.get(dateList.size() - 2);
            Date previousLastDate = evenDateList.get(dateList.size() - 3);

            if (secondDate.getTime() - lower.getTime() < (thirdDate.getTime() - secondDate.getTime()) / 2) {
                evenDateList.remove(secondDate);
            }

          if (upper.getTime() - lastDate.getTime() < (lastDate.getTime() - previousLastDate.getTime()) / 2) {
                evenDateList.remove(lastDate);
            }
        }

        return evenDateList;
    }

    @Override
    protected void layoutChildren() {
        if (!isAutoRanging()) {
            currentLowerBound.set(getLowerBound().getTime());
            currentUpperBound.set(getUpperBound().getTime());
        }
        super.layoutChildren();
    }

    @Override
    protected String getTickMarkLabel(Date date) {

        StringConverter<Date> converter = getTickLabelFormatter();
        if (converter != null) {
            return converter.toString(date);
        }

        DateFormat dateFormat;
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(date);

        if (actualInterval.interval == Calendar.YEAR && calendar.get(Calendar.MONTH) == 0 && calendar.get(Calendar.DATE) == 1) {
            dateFormat = new SimpleDateFormat("yyyy");
        } else if (actualInterval.interval == Calendar.MONTH && calendar.get(Calendar.DATE) == 1) {
            dateFormat = new SimpleDateFormat("MMM yy");
        } else {
            switch (actualInterval.interval) {
                case Calendar.DATE:
                case Calendar.WEEK_OF_YEAR:
                default:
                    dateFormat = DateFormat.getDateInstance(DateFormat.MEDIUM);
                    break;
                case Calendar.HOUR:
                case Calendar.MINUTE:
                    dateFormat = DateFormat.getTimeInstance(DateFormat.SHORT);
                    break;
                case Calendar.SECOND:
                    dateFormat = DateFormat.getTimeInstance(DateFormat.MEDIUM);
                    break;
                case Calendar.MILLISECOND:
                    dateFormat = DateFormat.getTimeInstance(DateFormat.FULL);
                    break;
            }
        }
        return dateFormat.format(date);
    }

    private List<Date> makeDatesEven(List<Date> dates, Calendar calendar) {

        if (dates.size() > 2) {
            List<Date> evenDates = new ArrayList<Date>();
 for (int i = 0; i < dates.size(); i++) {
                calendar.setTime(dates.get(i));
                switch (actualInterval.interval) {
                    case Calendar.YEAR:
                           if (i != 0 && i != dates.size() - 1) {
                            calendar.set(Calendar.MONTH, 0);
                            calendar.set(Calendar.DATE, 1);
                        }
                        calendar.set(Calendar.HOUR_OF_DAY, 0);
                        calendar.set(Calendar.MINUTE, 0);
                        calendar.set(Calendar.SECOND, 0);
                        calendar.set(Calendar.MILLISECOND, 6);
                        break;
                    case Calendar.MONTH:
                                             if (i != 0 && i != dates.size() - 1) {
                            calendar.set(Calendar.DATE, 1);
                        }
                        calendar.set(Calendar.HOUR_OF_DAY, 0);
                        calendar.set(Calendar.MINUTE, 0);
                        calendar.set(Calendar.SECOND, 0);
                        calendar.set(Calendar.MILLISECOND, 5);
                        break;
                    case Calendar.WEEK_OF_YEAR:
                        // Make weeks begin with first day of week?
                        calendar.set(Calendar.HOUR_OF_DAY, 0);
                        calendar.set(Calendar.MINUTE, 0);
                        calendar.set(Calendar.SECOND, 0);
                        calendar.set(Calendar.MILLISECOND, 4);
                        break;
                    case Calendar.DATE:
                        calendar.set(Calendar.HOUR_OF_DAY, 0);
                        calendar.set(Calendar.MINUTE, 0);
                        calendar.set(Calendar.SECOND, 0);
                        calendar.set(Calendar.MILLISECOND, 3);
                        break;
                    case Calendar.HOUR:
                        if (i != 0 && i != dates.size() - 1) {
                            calendar.set(Calendar.MINUTE, 0);
                            calendar.set(Calendar.SECOND, 0);
                        }
                        calendar.set(Calendar.MILLISECOND, 2);
                        break;
                    case Calendar.MINUTE:
                        if (i != 0 && i != dates.size() - 1) {
                            calendar.set(Calendar.SECOND, 0);
                        }
                        calendar.set(Calendar.MILLISECOND, 1);
                        break;
                    case Calendar.SECOND:
                        calendar.set(Calendar.MILLISECOND, 0);
                        break;

                }
                evenDates.add(calendar.getTime());
            }

            return evenDates;
        } else {
            return dates;
        }
    }

    public final ObjectProperty<Date> lowerBoundProperty() {
        return lowerBound;
    }

    public final Date getLowerBound() {
        return lowerBound.get();
    }

    public final void setLowerBound(Date date) {
        lowerBound.set(date);
    }

    public final ObjectProperty<Date> upperBoundProperty() {
        return upperBound;
    }

    public final Date getUpperBound() {
        return upperBound.get();
    }

    public final void setUpperBound(Date date) {
        upperBound.set(date);
    }

    public final StringConverter<Date> getTickLabelFormatter() {
        return tickLabelFormatter.getValue();
    }

    public final void setTickLabelFormatter(StringConverter<Date> value) {
        tickLabelFormatter.setValue(value);
    }

    public final ObjectProperty<StringConverter<Date>> tickLabelFormatterProperty() {
        return tickLabelFormatter;
    }

    private enum Interval {
        DECADE(Calendar.YEAR, 10),
        YEAR(Calendar.YEAR, 1),
        MONTH_6(Calendar.MONTH, 6),
        MONTH_3(Calendar.MONTH, 3),
        MONTH_1(Calendar.MONTH, 1),
        WEEK(Calendar.WEEK_OF_YEAR, 1),
        DAY(Calendar.DATE, 1),
        HOUR_12(Calendar.HOUR, 12),
        HOUR_6(Calendar.HOUR, 6),
        HOUR_3(Calendar.HOUR, 3),
        HOUR_1(Calendar.HOUR, 1),
        MINUTE_15(Calendar.MINUTE, 15),
        MINUTE_5(Calendar.MINUTE, 5),
        MINUTE_1(Calendar.MINUTE, 1),
        SECOND_15(Calendar.SECOND, 15),
        SECOND_5(Calendar.SECOND, 5),
        SECOND_1(Calendar.SECOND, 1),
        MILLISECOND(Calendar.MILLISECOND, 1);

        private final int amount;

        private final int interval;

        private Interval(int interval, int amount) {
            this.interval = interval;
            this.amount = amount;
        }
    }
} 
```

就是这样：

![在此处输入图像描述](../Images/fd454088f94c26dc746c804b7f3f4b91.png)

# c# - 将 sql 表中的 xml 字符串转换为动态列

> ID：11087989
> 
> 赞同：3
> 
> 时间：2012-06-18T17:29:21.700
> 
> 标签：c#, sql-server, xml, sql-server-2008, pivot-without-aggregate

我有两个与 Id 列相关的表（使用表变量进行说明。您可以直接在管理工作室中运行这些表）。

第一个表中的项目有一些标准的列集，第二个表有相同记录的一些扩展参数数据。我将扩展集存储为 xml，因为它在所有方面都是动态的（每个产品不同或添加的新值等）。

正如您在下面的示例中所见，我能够连接这两个表并展平列列表。但是我的查询需要预先定义动态列。从某种意义上说，如果我要在@extended 表中添加一个新列，它应该会自动作为输出列列表中的一个新列出现，我希望这个真正动态的。

基本上，附加列的列表应由该记录的 xml 确定。列名应该是 xml 标记，值应该是每个 id 的 xml 标记的值。

任何指针？（如果每个表中有大约 10 万条记录或更多记录，它也可以很快吗）

```
declare @standard table
(
   Id INT,
   Column1 varchar(10),
   Column2 varchar(10),
   Column3 varchar(10)
)

declare @extended table
(
    Id INT,
    column1 xml
)

insert into @standard values (1,'11', '12', '13')
insert into @standard values (2,'21', '22', '23')

insert into @extended values (1,'<FieldSet><Field><id>1</id><column4>1x</column4><column5>4x</column5></Field></FieldSet>')
insert into @extended values (2,'<FieldSet><Field><id>2</id><column4>2x</column4><column5>5x</column5></Field></FieldSet>')

select s.column1, s.column2,

( 
    SELECT Item2.value('(column4)[1]', 'varchar(50)')
    FROM 
    e.column1.nodes('/FieldSet') AS T(Item)
    CROSS APPLY e.column1.nodes('/FieldSet/Field') AS T2(Item2)

 ) column4,

 ( 
    SELECT Item2.value('(column5)[1]', 'varchar(50)')
    FROM 
    e.column1.nodes('/FieldSet') AS T(Item)
    CROSS APPLY e.column1.nodes('/FieldSet/Field') AS T2(Item2)

 ) column5 

from @extended e
join @standard s on s.Id = e.Id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:00:14.520

首先，您可以稍微简化当前查询。

```
select s.column1,
       s.column2,
       e.column1.value('(/FieldSet/Field/column4)[1]', 'varchar(50)') as column4,
       e.column1.value('(/FieldSet/Field/column5)[1]', 'varchar(50)') as column5 
from extended as e
  join standard as s
    on s.Id = e.Id 
```

做你想做的事不会容易或快速。您需要获取 XML 中所有名称/值对的列表。

```
select T1.X.value('.', 'int') as Id,
       T2.X.value('local-name(.)', 'sysname') as Name,
       T2.X.value('.', 'varchar(10)') as Value
from extended as e
  cross apply e.column1.nodes('/FieldSet/Field/id') as T1(X)
  cross apply e.column1.nodes('/FieldSet/Field/*[position() > 1]') as T2(X) 
```

在数据透视查询中使用它并加入到`standard`.

```
select S.column1,
       S.column2,
       P.column4,
       P.column5
from standard as s
  inner join
      (
      select id, P.column4, P.column5
      from (
           select T1.X.value('.', 'int') as Id,
                  T2.X.value('local-name(.)', 'sysname') as Name,
                  T2.X.value('.', 'varchar(10)') as Value
           from extended as e
             cross apply e.column1.nodes('/FieldSet/Field/id') as T1(X)
             cross apply e.column1.nodes('/FieldSet/Field/*[position() > 1]') as T2(X)
           ) as e
      pivot (min(Value) for Name in (column4, column5)) P
      ) P
    on S.Id = P.Id 
```

要使用返回的动态列数来执行此操作，您需要动态构建此数据透视查询。
将名称/值对存储在临时表中，使用该表找出您需要的列并构建查询。

```
create table #ext
(
  Id int,
  Name sysname,
  Value varchar(10),
  primary key(Id, Name)
)

insert into #ext(Id, Name, Value)
select T1.X.value('.', 'int') as Id,
       T2.X.value('local-name(.)', 'sysname') as Name,
       T2.X.value('.', 'varchar(10)') as Value
from extended as e
  cross apply e.column1.nodes('/FieldSet/Field/id') as T1(X)
  cross apply e.column1.nodes('/FieldSet/Field/*[position() > 1]') as T2(X)

declare @SQL nvarchar(max)
set @SQL = 
'select S.column1,
        S.column2,
        [COLLIST]
from standard as s
  inner join
      (
      select id, [COLLIST]
      from #ext as e
      pivot (min(Value) for Name in ([COLLIST])) P
      ) P
    on S.Id = P.Id'

declare @ColList nvarchar(max)

set @ColList = 
  (select ','+Name
   from #ext
   group by Name
   for xml path(''), type).value('.', 'nvarchar(max)')

set @SQL = replace(@SQL, '[COLLIST]', stuff(@ColList, 1, 1, ''))

exec (@SQL)

drop table #ext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T10:50:13.967

我希望它会帮助你

选择@COUNT_XML=0

```
 SELECT @COUNT_XML=(SELECT @xxxxx_GROUP_ID.value('count(/NewDataSet/position/ID)', 'INT'))

                    IF(@COUNT_XML > 0)            

                        BEGIN
                          IF OBJECT_ID('tempdb..#TBL_TEMPOSITION') IS NOT NULL  
                           DROP TABLE  #TBL_TEMPOSITION

                             CREATE TABLE #TBL_TEMPOSITION (ID NUMERIC(18,0)) 
                             INSERT INTO #TBL_TEMPOSITION (ID)    
                             SELECT XMLxxxxGroup.PositionGPItem.value('.','NUMERIC(18,0)')
                             FROM   @xxxxx_GROUP_ID.nodes('/NewDataSet/position/ID') AS XMLPositionGroup(PositionGPItem) 
                             SELECT @emp_cond =@emp_cond+ N' AND CM.STATIC_EMP_INFO.POSITION_ID IN (SELECT ID FROM #TBL_TEMPOSITION) '        
                        END 
```

# vb.net - VB.NET 打印图像使用大量内存

> ID：11087998
> 
> 赞同：1
> 
> 时间：2012-06-18T17:29:58.643
> 
> 标签：vb.net, pdf, printing

我正在使用在代码项目中找到的 DLL 在 VB.NET 中处理 PDF：

[http://www.codeproject.com/Articles/37458/PDF-Viewer-Control-Without-Acrobat-Reader-Installe](http://www.codeproject.com/Articles/37458/PDF-Viewer-Control-Without-Acrobat-Reader-Installe)

我的应用程序允许您在网格中选择多个文件并打印它们。这些文件存储在受密码保护的 zip 文件中，因此我要做的第一步是将每个选定的文件提取到我传递给新 PDF 包装器对象的内存流中。每个对象都被添加到队列中。然后，将队列中的每个对象逐页打印为 system.drawing.image。整个事情在后台工作人员上运行。

现在，将 PDF 提取到队列中几乎不会占用任何内存。但是在 PrintPage 事件处理程序中，当我提取图像并将它们发送到打印机时，一定有问题。我的内存使用量激增。当然，每个图像都很大，因为它以 300 dpi 渲染，但是每个页面使用的内存没有返回给操作系统，也没有被垃圾收集。

最后，如果我选择了足够多的文件，我的内存就会用完。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:36:00.993

好的，所以我终于想通了。

首先，就图像而言，CLR 显然不知道为 a 分配了多少内存，`Drawing.Image`所以当你处理它时，你必须告诉它：

```
'It's 4 bytes per pixel with RGBA
'Use Drawing.Image.PixelFormat to get
'the number of bytes if you don't know
Dim countBytes as long = 4 * img.Width * img.Height

'Let the CLR know of the memory we want to free
if countBytes > 0 then GC.AddMemoryPressure(countBytes)

'Get rid of the image
img.Dispose()
img = Nothing

'Free up the unused memory
GC.Collect()

'Tell the CLR we took care of it
GC.RemoveMemoryPressure(countBytes) 
```

现在，CodeProject 示例中的 PDF 库要困难得多。

首先，确保在包含包装器的表单的事件中或在包含它的类的方法中调用对象`Dispose`上的方法。`PDFWrapper``FormClosed``Finalize`

但是，`PDFWrapper`实际上似乎缓存了您从中检索到的图像。因此，当您翻阅 PDF 时，内存使用量会增加，直到整个 PDF 的图像都被缓存。如果您使用这些图像以 300DPI 打印 PDF，这是一个更大的问题（在使用 1.5GB 内存的情况下，我在 60 多页 PDF 的末尾出现内存不足错误）。

据我所知，这个对象没有“清除缓存”方法。但是我用来让它工作的技巧是在我得到我需要的图像后以 1DPI 抓取图像，然后像上面那样执行垃圾收集。这间接释放了缓存的内存。但是，像以前一样，我们必须告诉 CLR 我们使用了多少字节。和上面的计算是一样的。

但是还有一个问题。`PDFWrapper`看起来，该对象实际上是在另一个线程上抓取图像。因此，通过在我们请求 300DPI 图像后请求另一个 1DPI 图像，它会感到困惑，并在应该给我们 300DPI 图像打印时随机吐出 1DPI 图像。因此，解决此问题的方法：

```
Dim img As System.Drawing.Image
img = AFPDFLibUtil.GetImageFromPDF(pdfWrapper, currentPage, DPI)

'Wait for PDFWrapper to finish rendering
Dim sw As New Stopwatch()
sw.Start()
While _pdfWrapper.IsBusy
    If sw.ElapsedMilliseconds < TimeoutMS Then
        System.Threading.Thread.Sleep(10)
    Else
        Throw New Exception("This page took too long to render.")
    End If
End While
sw.Stop()
sw.Reset() 
```

你去吧。也许这就是为什么在 CodeProject 示例中，他使用不同的 DLL 进行打印。但是，该`PDFWrapper`对象支持从 a 读取`IO.MemoryStream`，我认为该项目中的任何其他包含都不支持。

祝所有阅读本文的人编码愉快！