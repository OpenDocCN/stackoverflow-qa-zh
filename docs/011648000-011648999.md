# StackOverflow 问答 11648000-11648999

# javascript - 在每个页面上加载脚本

> ID：11648008
> 
> 赞同：0
> 
> 时间：2012-07-25T10:46:33.393
> 
> 标签：javascript, html, dom, domdocument, dom-manipulation

我有一个问题是在我的所有页面上加载相同的脚本，而不必一遍又一遍地定义它们。

我想出了一个半完整的解决方案，看起来像......

```
var scriptLocs = [];

function loadScripts() {
    for (var i = 0; i < scriptLocs.length; i++) {
        var crtElement = document.createElement('script');
        crtElement.src = scriptLocs[i];
        var hh = document.getElementsByTagName('head')[0];
        // Getting head tag
        hh.appendChild(crtElement);
        //Adding it to head
    }
}​ 
```

该数组可能非常大，例如大约 120 个脚本（2.5MB），其中包括 jQuery 和 Knockout 等...

我遇到的问题是这可能不可靠我的函数似乎错过了，或者以与我的数组中定义的顺序不同的顺序加载。顺序非常重要，因为有些东西可能依赖于 jQuery，所以它必须在其他脚本之前加载。

每次刷新时也会出现不同的错误...例如，加载顺序可能不同？

有没有定义一个元素中的所有脚本然后一次附加很多脚本？这行得通吗？

更新：

使用这个 test.js 文件

```
for (var i = 0; i < scriptLocs.length; i++) {
    document.write("<script type=\"text/javascript\" src=\"" + scriptLocs[i] + "\"><\/script>");
} 
```

并把它作为头脑中的第一件事包括......

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Test</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script type="text/javascript" src="test.js"></script> 
```

似乎可以解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:50:06.200

对于这么多脚本，您可能应该考虑压缩和连接它们并将它们作为一个缩小的脚本提供。

您可以使用[Google 的闭包编译器](https://developers.google.com/speed/articles/compressing-javascript)或[YUI 压缩](http://developer.yahoo.com/yui/compressor/#work)器来执行此操作，例如：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:58:03.290

听起来您正在寻找一种声明依赖关系并指定加载顺序的方法，这[需要 js](http://requirejs.org/)处理得很好。此外，

> RequireJS 有一个优化工具... [c] 将相关脚本组合到构建层中，并通过 UglifyJS（默认）或 Closure Compiler（使用 Java 时的一个选项）将它们缩小。

这将允许您在应用程序的所有页面中包含一个缩小的脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:09:48.923

这是`document.write()`为了什么。它经常被误用，但在这种情况下，它是一个不错的选择：

```
var scriptLocs = [...];
for (var i = 0; i < scriptLocs.length; i++) {
    document.write("<script type=\"text/javascript\" src=\""+scriptLocs[i]+"\"><\/script>");
} 
```

但不要将它放在函数中或从事件处理程序中调用它。此脚本应在页面加载时立即运行。`document.write()`在 dom 加载后调用会导致问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:59:45.433

你检查过你正在调用的脚本的大小吗？数组将按照您的顺序进行，元素创建将按照您的顺序进行，但请记住您是在 javascript 中调用它们，因此它永远不会等待脚本加载然后加载另一个脚本，即如果您正在加载 100 的 jquery例如 kb 并且您正在调用一些 10 kb 的本机脚本，因此您的脚本将首先加载这个 jquery。您添加属性 async 以使 dom 不等待您的脚本。

# android - 来自本机代码的 NDK 调用函数

> ID：11648016
> 
> 赞同：0
> 
> 时间：2012-07-25T10:46:51.997
> 
> 标签：android, c, android-ndk

我正在尝试使用 NDK 和 JNI 从本机 C 代码调用一个简单的连接函数。以下是我的代码：

C 代码 - 返回一个值

```
freerdp_ext_connect(const char *host, const char *username,
                    const char *pass, const char *domain,
                    int width, int height){} 
```

Java代码：

```
#include <jni.h>
#include <stdio.h>
#include <freerdp/freerdp.h>

jstring Java_com_example_freerdpandroid_FreeRDPActivity_test(JNIEnv* env, jobject javaThis)
{

 freerdp_ext_connect("10.123.123.12", "admin", "dsadsad", "", 600, 800);

    return (*env)->NewStringUTF(env, "dsfsdf");

} 
```

当试图用 cygwin 编译时，它给了我这个错误：

```
./obj/local/armeabi/objs/freerdp/freerdp.o: In function `Java_com_example_freerdpandroid_FreeRDPActivity_test':
C:\Users\stefan.scerri\workspace\freerdp/jni/freerdp.c:11: undefined reference to `freerdp_ext_connect'
collect2: ld returned 1 exit status
/cygdrive/c/android-ndk/android-ndk/build/core/build-binary.mk:378: recipe for target `obj/local/armeabi/libfreerdp.so' failed
make: *** [obj/local/armeabi/libfreerdp.so] Error 1 
```

知道为什么会这样吗？我相信这是因为 C 函数的返回值，但是我不确定，有人可以确认。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:47:54.507

是否`freerdp_ext_connect`在已编译的库中？如果是这样，您在构建 NDK 项目时是否链接到该库？要与库链接，请将以下内容放入 Android.mk：

```
LOCAL_LDLIBS := -lfoo 
```

并且链接器将链接到 libfoo.a 或 libfoo.so，无论哪个可用。

如果`freerdp_ext_connect`在源文件中 - 您是否正在编译该源文件？源文件必须`LOCAL_SRC_FILES`在 Android.mk 中列出。

# c++ - 我将在哪个 Windows dll 中找到 afxwin/CFrameWnd？

> ID：11648018
> 
> 赞同：1
> 
> 时间：2012-07-25T10:47:11.460
> 
> 标签：c++, windows, dll, mfc

我正在尝试从 afxwin 动态加载一些功能，但我不确定我需要的 DLL 的名称。

谢谢

编辑：我正在寻找的课程是 CFrameWnd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:58:25.037

根据您要查找的特定类，它可以是以下任何 dll

MFC42U.DLL（Unicode 版本） MFC42UD.DLL（Unicode 调试） MFCN42UD.DLL（Unicode 调试 - 网络类） MFCO42UD.DLL（Unicode 调试 - OLE 类） MFCD42UD.DLL（Unicode 调试 - 数据库类）

# asp.net-mvc - 公开一个 BBCode 解析器操作？

> ID：11648019
> 
> 赞同：0
> 
> 时间：2012-07-25T10:47:14.010
> 
> 标签：asp.net-mvc, markitup

我正在谈论的是有一个控制器，如：

```
[HttpPost, ValidateResult(false)]
public String Preview(String value) {
    return BBCode.ToHtml(value);
} 
```

因此用户可以通过 url 引用它。这正常吗？可能这不是一个高优先级的问题，但我只是好奇？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:49:51.767

通常控制器动作应该返回 ActionResults。因此，您的代码的更正确版本将是：

```
[HttpPost, ValidateResult(false)]
public ActionResult Preview(String value) {
    return Content(BBCode.ToHtml(value));
} 
```

# android - 滚动直到容器结束才发生

> ID：11648021
> 
> 赞同：0
> 
> 时间：2012-07-25T10:47:26.257
> 
> 标签：android, cordova, sencha-touch

我有一个包含多个组件的容器。在容器的末尾，放置了一个提交按钮。

当我向下滚动时，它显示按钮。

但如果我离开滚动条，它又会回到屏幕顶部。所以用户无法按下提交按钮。

所以我想，当我滚动到容器的末尾时，它会停在那里并显示按钮。这样我就可以按下按钮了。这是我的容器代码：

```
{

    xtype : 'container',
    id : 'dashboardiconcontainer',
    height: 800,
    scrollable : true,
    layout: 'vbox',
    items : [
            {
                xtype : 'container',
                id : 'topitembox',
                layout : {
                    type : 'hbox'
                },
                margin : '10 0 0 10',
                height : 50,
                items : [ {
                    xtype : 'textfield',
                    id : 'itemname',
                    labelWidth : '40%',
                    label : 'Name of the item',
                    width : 320
                }, {
                    xtype : 'textfield',
                    id : 'barcodtext',
                    width : 300,
                    margin : '0 0 0 10',
                    labelWidth : '40%',
                    label : 'Enter Barcode'
                }, {
                    xtype : 'button',
                    height : 40,
                    margin : '0 0 0 10',
                    id : 'scanbutton',
                    ui : 'orange',
                    width : '80',
                    text : 'scan barcode'
                } ]
            },

            {
                xtype : 'container',
                height : 160,
                id : 'cameraimagecontainer',
                margin : '10 0 0 10',
                layout : {
                    type : 'hbox'
                },
                items : [
                        {
                            html : '<img style="width:180px; height:150px;display:none;" id="capturedimage" src="" />'
                        },
                        {
                            xtype : 'container',
                            id : 'btncontainer',
                            width : 120,
                            margin : '0 0 0 10',
                            layout : {
                                type : 'vbox'
                            },
                            items : [
                                    {
                                        xtype : 'button',
                                        height : 73,
                                        cls : 'capturebtn',
                                        id : 'capturebtn',
                                        width : 100
                                    },
                                    {
                                        xtype : 'button',
                                        height : 73,
                                        margin : '10 0 0 0',
                                        cls : 'choosephotobtn',
                                        id : 'selectphoto',
                                        width : 100
                                    } ]
                        },

                        {
                            xtype : 'container',
                            id : 'additionalinfo',
                            margin : '10 0 0 10',
                            width : 400,
                            layout : {
                                type : 'vbox'
                            },
                            items : [
                                    {
                                        xtype : 'textareafield',
                                        height : 80,
                                        width : 380,
                                        id : 'additionalinfo',
                                        label : 'Add Additiona Details',
                                        labelWidth : '40%',
                                        placeHolder : ''
                                    },
                                    {
                                        xtype : 'selectfield',
                                        margin : '5 0 0 0',
                                        width : 300,
                                        label : 'Select Category',
                                        options : [
                                                {
                                                    text : 'Food',
                                                    value : 'first'
                                                },
                                                {
                                                    text : 'Sports',
                                                    value : 'second'
                                                },
                                                {
                                                    text : 'Electronics',
                                                    value : 'third'
                                                } ],
                                        labelWidth : '40%'
                                    },
                                    {
                                        xtype : 'textareafield',
                                        id : 'Addmoretag',
                                        margin : '10 0 0 0',
                                        width : 320,
                                        placeHolder : 'Add any other tags you want '
                                    },
                                    {
                                         xtype : 'button',
                                         height : 54,
                                         id : 'Addwishlog',
                                         margin : '10 0 0 0',
                                         ui : 'orange',
                                         width : 250,
                                         text : 'Add to my wishlog'
                                         }

                                    ]
                        } ]
            } ]
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:29:03.557

看看这段代码

```
{

    xtype : 'container',
    id : 'dashboardiconcontainer',
    height: 800,
    scrollable : true,
    scrollable: 'vertical',
                   draggable: {
                   direction: 'vertical',
                   constraint: {
                   min: { x: 0, y: 0 },
                   max: { x: 0, y: 700 }
                   },
                   listeners: {
                   dragstart: {
                   fn: function(draggable, evt, offsetX, offsetY, eOpts){

                   },
                   order: 'before'
                   },
                   drag: function(panel, e, offset){

                   },
                   dragend: function(draggable, evt, offsetX, offsetY, eOpts){

                   },
    layout: 'vbox',
    items : [
            {
                xtype : 'container',
                id : 'topitembox',
                layout : {
                    type : 'hbox'
                },
                margin : '10 0 0 10',
                height : 50,
                items : [ {
                    xtype : 'textfield',
                    id : 'itemname',
                    labelWidth : '40%',
                    label : 'Name of the item',
                    width : 320
                }, {
                    xtype : 'textfield',
                    id : 'barcodtext',
                    width : 300,
                    margin : '0 0 0 10',
                    labelWidth : '40%',
                    label : 'Enter Barcode'
                }, {
                    xtype : 'button',
                    height : 40,
                    margin : '0 0 0 10',
                    id : 'scanbutton',
                    ui : 'orange',
                    width : '80',
                    text : 'scan barcode'
                } ]
            },

            {
                xtype : 'container',
                height : 160,
                id : 'cameraimagecontainer',
                margin : '10 0 0 10',
                layout : {
                    type : 'hbox'
                },
                items : [
                        {
                            html : '<img style="width:180px; height:150px;display:none;" id="capturedimage" src="" />'
                        },
                        {
                            xtype : 'container',
                            id : 'btncontainer',
                            width : 120,
                            margin : '0 0 0 10',
                            layout : {
                                type : 'vbox'
                            },
                            items : [
                                    {
                                        xtype : 'button',
                                        height : 73,
                                        cls : 'capturebtn',
                                        id : 'capturebtn',
                                        width : 100
                                    },
                                    {
                                        xtype : 'button',
                                        height : 73,
                                        margin : '10 0 0 0',
                                        cls : 'choosephotobtn',
                                        id : 'selectphoto',
                                        width : 100
                                    } ]
                        },

                        {
                            xtype : 'container',
                            id : 'additionalinfo',
                            margin : '10 0 0 10',
                            width : 400,
                            layout : {
                                type : 'vbox'
                            },
                            items : [
                                    {
                                        xtype : 'textareafield',
                                        height : 80,
                                        width : 380,
                                        id : 'additionalinfo',
                                        label : 'Add Additiona Details',
                                        labelWidth : '40%',
                                        placeHolder : ''
                                    },
                                    {
                                        xtype : 'selectfield',
                                        margin : '5 0 0 0',
                                        width : 300,
                                        label : 'Select Category',
                                        options : [
                                                {
                                                    text : 'Food',
                                                    value : 'first'
                                                },
                                                {
                                                    text : 'Sports',
                                                    value : 'second'
                                                },
                                                {
                                                    text : 'Electronics',
                                                    value : 'third'
                                                } ],
                                        labelWidth : '40%'
                                    },
                                    {
                                        xtype : 'textareafield',
                                        id : 'Addmoretag',
                                        margin : '10 0 0 0',
                                        width : 320,
                                        placeHolder : 'Add any other tags you want '
                                    },
                                    {
                                         xtype : 'button',
                                         height : 54,
                                         id : 'Addwishlog',
                                         margin : '10 0 0 0',
                                         ui : 'orange',
                                         width : 250,
                                         text : 'Add to my wishlog'
                                         }

                                    ]
                        } ]
            } ]
   } 
```

# java - w3c 和 apache 中的 getTextContent() 问题

> ID：11648023
> 
> 赞同：0
> 
> 时间：2012-07-25T10:47:35.640
> 
> 标签：java, xml, xpath

我已经使用 org.w3c.dom.Node.getTextContent() 方法来获取文本值，在 Eclipse 中也可以正常工作。当我们将它作为独立运行时，它正在使用 :class org.apache.xerces.dom.DeferredElementImpl 并失败。请就如何在运行时获取 org.w3c.dom.Node.getTextContent() 提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:35:47.870

[`org.w3c.dom.Node`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html)是一个接口。[`org.apache.xerces.dom.DeferredElementImpl`](http://xerces.apache.org/xerces2-j/javadocs/xerces2/org/apache/xerces/dom/DeferredElementImpl.html)是该接口的实现（实际上是 的实现[`org.w3c.dom.Element`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Element.html)， 的子接口`Node`）。还有其他实现。如果您编写一个使用 的程序`Node`，那么当您运行它时，您实际上将使用其中一种实现。

似乎`DeferredElementImpl`没有`getTextContent()`正确实施。尽管很难确定这一点，但鉴于您尚未说出实际问题是什么。

似乎在 Eclipse 中，您正在使用除 之外的一些实现`DeferredElementImpl`，并且该实现`getTextContent()`正确实现。在我安装 Eclipse 时，[`com.sun.org.apache.xerces.internal.dom.ElementImpl`](http://www.docjar.com/docs/api/com/sun/org/apache/xerces/internal/dom/ElementImpl.html)如果我以正常方式创建元素，我会得到一个。

`com.sun.org.apache.xerces.internal.dom.ElementImpl`是捆绑在 Sun JRE 中的标准实现。如果你得到一个不同的实现，那是因为你的类路径上有一个非标准的 XML 解析器。这很好，但这是你应该注意的事情。如果您检查独立应用程序的类路径，您应该会发现在 Eclipse 中运行时不存在的解析器。

# vbulletin - vbulletin 自定义字段插件

> ID：11648035
> 
> 赞同：0
> 
> 时间：2012-07-25T10:48:00.360
> 
> 标签：vbulletin

我对 vbulletin 4 插件有疑问。我需要创建一个插件，在注册表单中添加一个新的自定义字段。我不想修改“注册”模板或从管理面板添加此自定义字段。抱歉，我是 vbulletin 开发的新手，我需要您的帮助，或者一些关于如何使用插件和自定义字段的参考资料。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:05:47.273

转到 ACP - 用户配置文件字段 - 添加新用户配置文件字段并在此处添加一个新字段。你不需要修改任何东西。:)

# build - 如何使用 Star 团队存储库配置 Jenkins？

> ID：11648037
> 
> 赞同：1
> 
> 时间：2012-07-25T10:48:09.477
> 
> 标签：build, repository, hudson, jenkins

在我的项目中，我们使用明星团队存储库来存储源代码。我需要使用 Jenkins Tool 从 STAR TEAM 存储库构建。如何设置配置明星团队。因此，如果输入我的明星团队 ID 和密码，所有项目都必须以我的登录权限列出。如果您有任何想法，请告诉我。

# extjs - 在 Ext JS 中按名称选择单选按钮

> ID：11648038
> 
> 赞同：0
> 
> 时间：2012-07-25T10:48:13.097
> 
> 标签：extjs

我正在尝试按名称选择单选按钮组：

```
Ext.select('*[name=job[sometext]]') 
```

它在 Firefox 控制台中给出以下错误：

```
Error parsing selector, parsing failed at "]" 
```

我知道这是因为`[]`使用了 name 属性，但我无法更改它。有没有办法做到这一点？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:24:42.923

用过的`Ext.select('*[name=job\\[sometext\\]]')`

# ruby - EOF 与 Nokogiri

> ID：11648039
> 
> 赞同：0
> 
> 时间：2012-07-25T10:48:16.583
> 
> 标签：ruby, exception, nokogiri, eof

我在一个长循环中有以下行

```
page = Nokogiri::HTML(open(topic[:url].first)).xpath('//ul[@class = "pages"]//li').first 
```

有时，我的 Ruby 应用程序崩溃，并在这一行中引发“到达文件末尾”异常。

我该如何解决这个问题？只是一个开始;提高;结束块？

是一个执行论坛备份的脚本，所以不跳过任何线程很重要。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:32:27.703

除了@Phrogz 的优秀建议（特别是关于`at_css`更简单的表达式），我会单独提取原始 xml [内容]：

```
page = if (content = open(topic[:url].first)).strip.length > 0
  Nokogiri::HTML(content).xpath('//ul[@class = "pages"]//li').first
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:18:35.050

我建议您首先解决根本问题，以免出现此错误。

*   相同的 URL 是否总是导致问题？（将其输出到您的日志文件中。）如果是这样，您可能需要对[URL 进行 URI 编码](https://stackoverflow.com/a/9814611/405017)。
*   它是随机的，因此可能与连接中断或服务器问题有关吗？如果是这样，您应该挽救特定错误，然后进行[`retry`](http://phrogz.net/programmingruby/tut_exceptions.html#playitagain)一次或多次以获取关键数据。

其次，您应该知道该查询的 CSS 语法要简单得多：

```
page = Nokogiri.HTML(...).at_css('ul.pages li') 
```

*   这不仅少于字节的一半，而且还允许`<ul class="foo pages">`出现 XPath 丢失的情况。
*   使用[`at_css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_css)(or [`at_xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_xpath)) 与 相同`.css(...).first`，但更快更简单。

# c++ - 命名空间“sf”中的 X 未命名类型

> ID：11648041
> 
> 赞同：0
> 
> 时间：2012-07-25T10:48:21.067
> 
> 标签：c++, sfml

我正在使用 SFML1.6 制作图形应用程序（游戏）。当我在主文件之外只有一个文件时，它工作正常。现在我添加了一个新文件 Level，我得到了这些错误：

```
C:\Users\...\Window.hpp|6|error: 'RenderWindow' in namespace 'sf' does not name a type|
C:\Users\...\Window.hpp|7|error: 'Image' in namespace 'sf' does not name a type|
C:\Users\...\Window.hpp|8|error: 'Sprite' in namespace 'sf' does not name a type|
C:\Users\...\Window.hpp|9|error: 'Color' in namespace 'sf' does not name a type| 
```

由于它工作正常，我想这是由于新文件：

*级别.cpp*

```
#include <SFML/Window.hpp>
#include <iostream>

#include "Window.hpp"

class Level
{
     sf::Window* pResultScreen;
     public:
     Level( sf::Window& );
}; 

Level::Level( sf::Window &app)
{
     pResultScreen = &app;
}; 
```

*级别.hpp*

```
#ifndef Level_hpp
#define Level_hpp

class Level
{
     sf::Window* pResultScreen;
     public:
     Level( sf::Window& );
};

#endif 
```

有人看到上面的代码有问题吗？

编辑：Window.cpp

```
class Window
{
sf::RenderWindow appWindow;
sf::Image charImage;
sf::Sprite charSpriteSheet;
sf::Color deleteColor;
bool keyPressed;
int curFrame;
int stateChar;
int timerFrame;
int flipChar;

public:
Window();
int Loop();
void SheetCutter(int); // Prepares tiles
void Animate(int); // Loop through animations
void ColourCleaner(); // Remove the sprite's color.
};

Window::Window()
{
stateChar = 0;
curFrame = 0;
flipChar = 1;

deleteColor.a = 255;
deleteColor.r = 255;
deleteColor.g = 47;
deleteColor.b = 198;

appWindow.Create(sf::VideoMode( 800, 600, 32), "AI_Fighter");
appWindow.SetFramerateLimit(30);

if( !charImage.LoadFromFile("Bass.png") )
{
    std::cout << "Problem opening file 'Bass.png'";
}

charImage.SetSmooth(false);

ColourCleaner();

charSpriteSheet.SetImage(charImage);

SheetCutter(curFrame); // This allows it to not show the entire tile set at the    beginning.
};

int Window::Loop()
{
// Start game loop
while (appWindow.IsOpened())
{
    sf::Event evt;
    while (appWindow.GetEvent(evt))
    {
        // Window closed
        if (evt.Type == sf::Event::Closed)
            appWindow.Close();

        // Escape key pressed
        if ((evt.Type == sf::Event::KeyPressed) && (evt.Key.Code == sf::Key::Escape))
            appWindow.Close();

        if (evt.Type == sf::Event::KeyPressed)
            keyPressed = true;

        else
            keyPressed = false;
    }

    // Get elapsed time
    float ElapsedTime = appWindow.GetFrameTime();

    // Move the sprite
    if ( appWindow.GetInput().IsKeyDown(sf::Key::Left) || appWindow.GetInput().IsKeyDown(sf::Key::Right) || appWindow.GetInput().IsKeyDown(sf::Key::Up) || appWindow.GetInput().IsKeyDown(sf::Key::Down) )
    {
        if (appWindow.GetInput().IsKeyDown(sf::Key::Left))
        {
            charSpriteSheet.Move(-100 * ElapsedTime, 0);
            stateChar = 1;
            flipChar = 0;

            Animate(6);
        }

        if (appWindow.GetInput().IsKeyDown(sf::Key::Right))
        {
            charSpriteSheet.Move( 100 * ElapsedTime, 0);
            stateChar = 1;
            flipChar = 1;

            Animate(6);
        }

        if (appWindow.GetInput().IsKeyDown(sf::Key::Up))
        {
            charSpriteSheet.Move(0, -100 * ElapsedTime);
            stateChar = 2;

            Animate(6);
        }

        if (appWindow.GetInput().IsKeyDown(sf::Key::Down))  charSpriteSheet.Move(0,  100 * ElapsedTime);
    }

    else
    {
        stateChar = 0;

        Animate(12);
    }

    // Clear the screen (fill it with black color)
    appWindow.Clear(sf::Color( 0, 0, 0));

    appWindow.Draw(charSpriteSheet);

    // Display window contents on screen
    appWindow.Display();
}

return 0;
};

void Window::SheetCutter(int offset)
{
charSpriteSheet.SetSubRect(sf::IntRect((offset * 26), 0, ((offset * 26) + 26), 35));
};

// This changes the curFrame, so that animations loop and stuff. Pretty easy, although    unelegant.
void Window::Animate(int rate)
{
charSpriteSheet.FlipX(flipChar);

if((timerFrame%rate) == 0) // This is, rather obviously, a variable designed to allow to change the frames at the right rate.
{
    if(stateChar == 0) // ? Not getting activated. Not getting called...
    {
        if(curFrame >= 2)
        {
            curFrame = 0;
        }

        else
        {
            curFrame++;
        }
    }

    else if(stateChar == 1) // Walking.
    {
        if(curFrame >= 5 || curFrame <= 2 )
        {
            curFrame = 3;
        }

        else
        {
            curFrame++;
        }
    }

    else curFrame = 6; // Jump.

    SheetCutter(curFrame);
}

std::cout << stateChar;
timerFrame++;
};

// This removes the magenta background, changing the colour to tempClr. Color doesn't        really matter as long as the fourth digit is set
// to 0, since it's the alpha value.
void Window::ColourCleaner()
{
sf::Color tempClr(0, 0, 0, 0);

for(int i = 0; i < 182; i++ )
{
    for(int j = 0; j < 35; j++)
    {
        sf::Color CLR = charImage.GetPixel(i, j);
        if(deleteColor == CLR)
        {
            charImage.SetPixel(i, j, tempClr);
        }
    }
}
}; 
```

窗口.hpp

```
#ifndef Window_hpp
#define Window_hpp

class Window
{
sf::RenderWindow appWindow;
sf::Image charImage;
sf::Sprite charSpriteSheet;
sf::Color deleteColor;
int curFrame;
int stateChar;
int timerFrame;

public:
Window();
int Loop();
void SheetCutter();
void Animate(int rate);
void ColourCleaner();
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:57:07.733

你应该把它`#include <SFML/Window.hpp>`放到你的头文件中，因为你需要它的定义。（然后源文件应该包含标题而不是复制其内容

# z3 - '双箭头' => 真的意味着'暗示'吗？

> ID：11648045
> 
> 赞同：1
> 
> 时间：2012-07-25T10:48:33.063
> 
> 标签：z3, smt

做

```
(=> (f g)) 
```

总是意味着同样的事情

```
(or (not f) g)) 
```

?

这两个表达式在我的模型中表现不同。虽然使用*=>*给了我*UNSAT*，但使用其他变体不会产生任何结果（*timeout*）。我会满足于拥有一个运算符列表及其含义。我知道 SMTLIB 标准，但文档没有明确讨论运算符的含义。具体来说，如果在三元表达式中使用，' *=>* ' 似乎可以兼作 ' *ite* ' (if_then_else) 运算符的别名，我对此感到非常困惑。

如果相关，我设置了*AUFLIA*逻辑。

我正在寻找一个简单的是或否的答案。其次是关于 SMT2 的适当文档（可能是一本书）。

我有[这个](https://gist.github.com/3175462)相当大的模型，这个模型是从 Daniel Jackson 的标记扫描模型生成的，用于那些愿意亲眼看看的人的合金 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:08:53.543

您的表达不正确/格式不正确。

`=>`确实意味着“暗示”。换句话说，`(=> f g)`等价于`(or (not f) g)`。

如果有疑问，您可以使用 Z3 来证明它。[以下查询](http://rise4fun.com/Z3/kZtE)是`unsat`：

```
(declare-const p Bool)
(declare-const q Bool)

(define-fun conjecture () Bool
    (= (=> p q) 
       (or (not p) q)))

(assert (not conjecture))
(check-sat) 
```

# java - cdi - 扩展或带有 bean 的简单 jar

> ID：11648048
> 
> 赞同：1
> 
> 时间：2012-07-25T10:48:51.903
> 
> 标签：java, jakarta-ee, cdi

我正在玩 CDI，并希望通过编写扩展来让我的脚湿透。我正在考虑让用户从文件中注入配置属性的标准概念，如下所示：

```
@Inject @Config("applicationUrl")
private String applicationUrl; 
```

但我想知道它是否值得作为扩展来做？我的意思是即使我需要在几个不同的应用程序中使用它，我也可以将所有这些东西（ConfigReader、注释等）压缩到带有 beans.xml 的小 jar 中，并将其用作常规 beans 源。我对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:00:09.437

[Seam Solder](http://www.seamframework.org/Seam3/Solder)带有一个非常复杂的[资源注入](http://docs.jboss.org/seam/3/3.1.0.Final/reference/en-US/html/solder-resourceloading.html)机制。您可能想检查一下，看看它是否满足您的需求。

如果您想寻找机会来理解/编写/贡献 CDI 扩展，您可能会通过关注[Deltaspike](https://cwiki.apache.org/DeltaSpike/)周围的活动获得一些想法（不要通过其可怕的网页来判断该项目 :)。

# sql-server-2008 - 使用 XQuery 更新 XML 列的多个列

> ID：11648054
> 
> 赞同：1
> 
> 时间：2012-07-25T10:49:10.690
> 
> 标签：sql-server-2008, xquery

我有以下

**第一个表**

```
Declare @t1 Table(Id int , PaymentXML XML)

    Insert Into @t1 
    Select 1, '<CreditCard>
            <cc_display_name />
            <cc_type>MasterCard</cc_type>
            <cc_no>************5811</cc_no> 
            <cc_expire_month>4</cc_expire_month>
            <cc_expire_year>2007</cc_expire_year>         
          </CreditCard>' Union All
    Select 2 , '<CreditCard>
            <cc_display_name />
            <cc_type>MasterCard</cc_type>
            <cc_no>****1234567890</cc_no>
            <cc_expire_month>3</cc_expire_month>
            <cc_expire_year>2010</cc_expire_year>        
          </CreditCard>' Union All
    Select 3 , '<CreditCard>
            <cc_display_name />
            <cc_type>MasterCard</cc_type>
            <cc_no>****45678</cc_no>
            <cc_expire_month>10</cc_expire_month>
            <cc_expire_year>2011</cc_expire_year>        
          </CreditCard>' Union All   

    Select 4 , '<CreditCard>
            <cc_display_name />
            <cc_type>MasterCard</cc_type>
            <cc_no>****1234567890</cc_no>
            <cc_expire_month>5</cc_expire_month>
            <cc_expire_year>1997</cc_expire_year>        
          </CreditCard>'
     Select * From @t1 
```

**第二张表**

```
Declare @t2 Table(Id int) 
 Insert Into @t2 Select 1 Union All Select 2 
 Select * From @t2 
```

我需要编写一个更新语句，以便对于@t1 和@t2 表的每个匹配行，PaymentXML 列节点将更新如下

> a) 将是空白的（即）
> 
> b) 将为空白（即 ）
> 
> c) 将为零（0）（即 0 ）
> 
> d) 将为零（0）（即 0 ）

我给出了一个非常基本的镜头，但需要帮助，因为我是 xquery 的新手

```
DECLARE @cc_type VARCHAR(10)
SELECT @cc_type = ''

Update @t1
SET PaymentXML.modify(
'
    replace value of (/CreditCard/@cc_type)[1] 
    with sql:variable("@cc_type")
')
From @t1 a
Join @t2 b On a.Id = b.Id 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:43:14.880

那么你可以像这样更新多个列

```
update @t1 set 
    PaymentXML.modify('replace value of (/CreditCard/cc_type/text())[1] with ""')
from @t1 a
    inner join @t2 b on b.Id = a.Id

update @t1 set 
    PaymentXML.modify('replace value of (/CreditCard/cc_no/text())[1] with ""')
from @t1 a
    inner join @t2 b on b.Id = a.Id

update @t1 set 
    PaymentXML.modify('replace value of (/CreditCard/cc_expire_month/text())[1] with "0"')
from @t1 a
    inner join @t2 b on b.Id = a.Id

update @t1 set 
    PaymentXML.modify('replace value of (/CreditCard/cc_expire_year/text())[1] with "0"')
from @t1 a
    inner join @t2 b on b.Id = a.Id 
```

但对于你的情况，最简单的方法是

```
update @t1 set
    PaymentXML = 
        '<CreditCard>
             <cc_display_name/>
             <cc_type/>
             <cc_no/>
             <cc_expire_month>0</cc_expire_month>
             <cc_expire_year>0</cc_expire_year>        
         </CreditCard>'
from @t1 a
    inner join @t2 b on b.Id = a.Id 
```

# ruby - 测试输入\输出

> ID：11648057
> 
> 赞同：0
> 
> 时间：2012-07-25T10:49:28.213
> 
> 标签：ruby, testing, rspec, io

我有用户输入的代码：

```
class Z
  def self.input()
    val = $stdin.gets.chomp
    if val == "123"
      p "Ok"
    else
      p "none"
    end
  end
end 
```

我想测试不同的数据：

```
describe "Z" do
  it "should receive none"
    Object.stub!(:gets){"das"}
    Z.input
    Object.should_receive(:p).with("none")
  end
end 
```

但我得到一个错误：

```
Failure/Error: Object.should_receive(:p).with("none")
   (<Object (class)>).p("none")
       expected: 1 time
       received: 0 times 
```

如何测试输出？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:16:22.263

试试这个：

```
describe Z do
  it "should print into stdout" do
    $stdin.stub(:gets).and_return("das")
    $stdout.should_receive(:p).with("none")
    Z.input
  end
end 
```

# java - Android 上的反序列化对象导致数组列表为空

> ID：11648058
> 
> 赞同：2
> 
> 时间：2012-07-25T10:49:28.627
> 
> 标签：java, android, serialization, arraylist

我在 Android 上的序列化有问题。服务器是用 Java 编写的。它将 DataContainer 对象与对象的 ArrayList 序列化。在这种情况下，包含 Category 对象的 ArrayList 的 Menu 对象并将其发送到 Android 设备。当我反序列化它时，它可以工作，但 ArrayList 类别大小为 0。当我使用用普通 Java 编写的客户端时，它工作得很好。每个类都实现了可序列化，服务器和 Android 应用程序使用相同的包（也可以对另一个对象进行序列化和反序列化）。任何想法我做错了什么？

以下是代码片段：

菜单：

```
public class Menu implements Serializable { 
    public ArrayList<Category> categories = new ArrayList<Category>();
} 
```

类别：

```
public class Category implements Serializable {
    Integer category_id;
    String name;
   public ArrayList<Product> products;  
} 
```

Product 类中的等等（我删除了 setter 和 getter）。

反序列化代码：

```
 o = server.readObject();
 dc = (DataContainer) o;
 while(!dc.data.isEmpty()) {

           o = dc.data.remove(0);           
           if(o instanceof Menu) {
           if(mds.saveMenu((Menu) o))
           m = (Menu) o;
           Log.i("Synchronizacja", "Zapisano menu " + m.getCategories().size()); // This line says that categories.size() is 0
  } 
```

桌面 Java 反序列化代码：

```
public void manageInput(Object o){
    DataContainer dc = (DataContainer) o;
    Menu m = (Menu) dc.data.get(0);
    System.out.println(m.categories.size()); // This line returns a non-zero value
} 
```

# c# - C#：AppDomain ShadowCopyDirectories 为空

> ID：11648059
> 
> 赞同：0
> 
> 时间：2012-07-25T10:49:30.203
> 
> 标签：c#, appdomain, shadow-copy

我是 appdomain 概念的新手。它[在这里](https://stackoverflow.com/questions/2687166/what-does-shadowcopyfiles-property-in-appdomain-does)指出，卷影副本会创建您正在引用的程序集的副本，但是当我检查我的 ShadowCopyDirectories 时，它是空的。

这是我的代码：

```
 AppDomainSetup sandboxDomainSetup = new AppDomainSetup();
        sandboxDomainSetup.ApplicationBase = @"D:\Testing\AppDomainTestProject\MainUI\bin\Debug";
        sandboxDomainSetup.ShadowCopyFiles = "true";
        string appData = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);
        string tempfolder = Path.Combine(appData, "TestAppDomain"); //C:\ProgramData\TestAppDomain
        if (!Directory.Exists(tempfolder))
        {
            Directory.CreateDirectory(tempfolder);
        }
        sandboxDomainSetup.ShadowCopyDirectories = tempfolder;

        sandbox = AppDomain.CreateDomain("MyAppDomain", null, sandboxDomainSetup);

        Assembly sandboxAssembly = Assembly.LoadFrom(assemblyPath.ToString());
        var instance = sandbox.CreateInstance(sandboxAssembly.GetName().Name, sandboxAssembly.GetTypes().FirstOrDefault().FullName);
        if (instance != null)
        {
            object obj = instance.Unwrap();} 
```

我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T09:20:58.743

[AppDomainSetup.ShadowCopyDirectories](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.shadowcopydirectories.aspx)属性用于指定包含在加载时要进行影子复制的程序集的目录。这不是将复制程序集的位置。[AppDomainSetup.CachePath](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.cachepath.aspx)属性是您要查找的属性。在您的示例代码中，Shadow-Copy 已成功启用，但加载的程序集被复制到 CLR 创建的临时文件夹中。

# ruby-on-rails - 浏览器中的水豚场景

> ID：11648065
> 
> 赞同：1
> 
> 时间：2012-07-25T10:49:47.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, integration-testing, capybara, acceptance-testing

我对验收测试有一个奇怪的问题，水豚只向我展示了浏览器中的第一个场景，所有其他的只是在后端运行，并且由于某种原因我看到一个空白页面（但它们通过并正常失败）。我的配置是：

```
require 'capybara'

Capybara.register_driver :selenium_chrome do |app|
  Capybara::Selenium::Driver.new(app, :browser => :chrome)
end

Capybara.current_driver = :selenium_chrome
Capybara.javascript_driver = :selenium_chrome
Capybara.run_server = true
Capybara.server_port = 7000
Capybara.app_host = "http://localhost:#{Capybara.server_port}" 
```

`tests`：

```
feature 'f1' do

  background do
    @user = create(:user)
    visit "/"
    fill_in 'Email', :with => @user.email
    fill_in 'Password', :with => 'password'
    click_button 'Sign In'
  end

  scenario "sc1" do
    click_link '1'
    click_link '2'
    click_link '3'
    page.should have_content('120')
  end

  scenario "sc2" do
    click_link '4'
    click_link '5'
    click_link '6'
    page.should have_content('110')
  end

end 
```

`gemfile`：

```
group :test do
  gem 'rspec', '~> 2.8.0'
  gem 'rspec-rails', '~> 2.8.0'

  gem 'shoulda', '~> 2.11.3'
  gem 'shoulda-matchers'

  gem 'capybara', '~> 1.1.2'
  gem 'nokogiri', '~> 1.5.2'
  gem 'database_cleaner'
end 
```

所以我只能看到`sc1`在浏览器中运行，`sc2`而所有其他人都只是在后台运行，我在 chrome 中看到一个空白页面。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:03:02.193

如果有人会遇到同样的问题：

```
RSpec.configure do |config|
  config.before do
    Capybara.current_driver = :selenium_chrome
    Capybara.javascript_driver = :selenium_chrome
    Capybara.run_server = true
    Capybara.server_port = 7000
    Capybara.app_host = "http://localhost:#{Capybara.server_port}"
  end
end 
```

把它放在`before`块中就可以了

# android - 自动打开 VPN 连接

> ID：11648071
> 
> 赞同：4
> 
> 时间：2012-07-25T10:50:02.837
> 
> 标签：android

在 Android 上，当用户连接到蜂窝网络时，我们希望使用 VPN。

但问题是在 WiFi 和蜂窝网络之间切换时 VPN 连接不会自动打开。

重新启动设备时，它也不会自动连接。

在 WiFi 和蜂窝网络之间切换以及设备重新启动时，是否有任何潜在的方法可以自动打开 VPN 连接。

Android Gingerbread & Ice Cream Sandwich 需要这个。

当用户在 WiFi 和蜂窝网络之间切换时，VPN 会打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:00:08.713

1.  当网络发生变化时：

`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>`在您的清单中添加权限。设置一个`BroadcastReceiver`监听动作`android.net.conn.CONNECTIVITY_CHANGE`。在这个接收器中，获取一个`ConnectivityManager`使用实例`Context.getSystemService(Context.CONNECTIVITY_SERVICE);`并检查网络是否连接。如果是这样，您可以继续并开始您的 vpn 登录。

1.  重新启动时：

添加权限`<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />`到清单。设置一个`BroadcastReceiver`监听动作`Intent.ACTION_BOOT_COMPLETED`。在这里，您可以继续建立您的 vpn 连接。

# firefox-addon - 使用 .ico 作为 Firefox 插件的工具栏按钮

> ID：11648073
> 
> 赞同：0
> 
> 时间：2012-07-25T10:50:13.000
> 
> 标签：firefox-addon, icons, xul, toolbar

我想使用一个 .ico 文件，其中包含不同大小（例如 16-24-32 像素）的插件图标作为工具栏按钮图标。当我将它设置为工具栏大小和插件详细信息页面的图标时，始终选择 16px 版本。

是否可以让 FF 自动选择合适的尺寸？因此，如果工具栏图标大小为“大”，它将选择 24px 版本而不是拉伸 16px。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:00:43.233

您可以使用 CSS 执行此操作：

```
{
    -moz-image-region: rect(0 24px 24px 0);
     list-style-image: url("chrome://sidebar/skin/icon_24x24.png");
}

toolbar[iconsize="small"]
{
    -moz-image-region: rect(0 16px 16px 0);
     list-style-image: url("chrome://sidebar/skin/icon_16x16.png");
} 
```

# jquery - jQuery - 将 nth-child 添加到 jQuery 对象？

> ID：11648074
> 
> 赞同：1
> 
> 时间：2012-07-25T10:50:12.993
> 
> 标签：jquery, jquery-selectors

有没有办法将 css 选择器“nth-child”添加到 jQuery 对象？

例如

```
var $myDiv = $('div');
$myDiv:nth-child('4n').css(); // yes I know this won't work... 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:53:57.990

是的，支持[nth-child()](http://api.jquery.com/nth-child-selector/)选择器。

如果您已经有一组`<div>`元素，并且想要获得满足的元素，`:nth-child(4n)`则可以将选择器传递给[filter()](http://api.jquery.com/filter/)：

```
var divs = $("div");
var filteredDivs = divs.filter(":nth-child(4n)"); 
```

# asp.net - “未处理的异常：$get("imgUpload") 为空”

> ID：11648076
> 
> 赞同：0
> 
> 时间：2012-07-25T10:50:26.357
> 
> 标签：asp.net, asp.net-ajax, asyncfileupload

我在我的页面中使用了 asyncfileUpload 控件，并且该页面派生自母版页。我使用此控件的动机只是上传图像并在同一页面上显示该图像。但是当我尝试上传图像时，我得到一个异常，即：`"Unhandled Exception: $get("imgUpload") is null".` 我在 ClientUploadComplete 上使用以下函数：

```
<script type="text/javascript">
     function uploadComplete(sender, args) {
         var FileName = args.get_fileName();
         $get("imgUpload").src = "../ajax/upload/" + FileName;
     }
</script> 
```

我还设置了 ClientIDMode=AutoID。

我在 UploadedComplete 事件下使用以下代码：

```
 protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    string strPath = MapPath("~/ajax/upload/") + Path.GetFileName(e.FileName);
    AsyncFileUpload1.SaveAs(strPath);
    imgUpload.ImageUrl = strPath;
} 
```

在普通页面中，当我尝试上述操作时它工作正常，但在派生页面（来自母版页）的情况下，它会引发异常。

请帮我解决这个问题。

问候， 拉文德拉库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:45:14.327

AutoID 将根据呈现顺序重命名控件，因此在添加母版页时，它会更改所有内容。您是否查看了渲染的源代码以验证渲染的控件 ID？尝试将 ClientIDMode 更改为“静态”

# android - 将图像从当前位置缩放到指定位置

> ID：11648077
> 
> 赞同：1
> 
> 时间：2012-07-25T10:50:44.780
> 
> 标签：android, animation, android-imageview

我想为imageview添加**缩放效果。但是我希望这种缩放效果****从当前位置到指定位置**，以便在指定位置显示其他图像。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:55:46.753

看看这个 关于如何缩放和平移图像的[教程，它非常好。](http://developer.sonymobile.com/wp/2010/06/09/android-one-finger-zoom-tutorial-part-3/)

# java - SEAM 和 Hibernate 验证

> ID：11648080
> 
> 赞同：0
> 
> 时间：2012-07-25T10:50:56.493
> 
> 标签：java, jboss6.x, seam2

接缝 2，Jboss 6.1

我目前在我的持久性对象上使用 Hibernate 验证注释，并在我的 jsf 页面上进行验证：

```
@Entity
@Table(name = "CLIENT", catalog = "testdb")
public class Client implements java.io.Serializable {

private Integer             id;
private String              name;

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "ID", unique = true, nullable = false)
public Integer getId() {
    return this.id;
}

@Column(name = "NAME", unique = true, nullable = false, length = 64)
@org.hibernate.validator.Length(min=4,max=64)
public String getName() {
    return this.name;
}

...Setters and rest
} 
```

这非常有效，当名称字段长度小于 4 个字符时，会显示一个很好的错误。

问题是用户在其他渠道提交数据，即电子表格导入、3de 方应用程序等。因此我必须在我的 java 代码中进行如下验证：

```
ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
Validator validator = factory.getValidator();
Set<ConstraintViolation<K>> constraintViolations = validator.validate(bean); 
```

现在这不会发现任何验证错误，但是持久化数据确实会引发异常，因此它确实可以在某个地方工作。我可以通过使用 @org.hibernate.validator.constraints.Length 让它工作，但是 jsf 屏幕不会报告约束问题。

在我看来，@org.hibernate.validator.Length 是一个旧的 Hibernate Validator 库，但它与接缝 2 非常纠缠，因此无法删除。

任何人都知道如何在 java 代码中使用遗留的 hibernate 注释进行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:15:58.373

无需手动调用休眠验证。在保存时处理错误

```
 try {
        save();
    } catch (InvalidStateException e) {
        logHibernateValidationException(e);
        ...

private void logHibernateValidationException(InvalidStateException e) {
    for (InvalidValue invalidValue : e.getInvalidValues()) {
        LOGGER.warn("Validation Failed. Instance of bean class: {0} has an invalid property: {1} with message: {2}",
                invalidValue.getBeanClass().getSimpleName(),
                invalidValue.getPropertyName(),
                invalidValue.getMessage());
    }
} 
```

# java - 将 txt 文件读取到数组时的效率

> ID：11648081
> 
> 赞同：2
> 
> 时间：2012-07-25T10:50:59.500
> 
> 标签：java, arrays, filereader, performance

我已经编写了一个脚本，我在其中将*.txt*文件读取到`arrays`. 它工作得很好，但我很好奇是否有更有效的方式来读取*.txt*文件。我有这个：

```
try {
    String line;
    filestart = new BufferedReader(new FileReader("C:\\path\\file.txt));
    for (line = filestart.readLine(); line !=null; line = filestart.readLine()) {
        array.add (line);  
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

有没有结合`BufferedReader`和的功能`FileReader`？

`Scanner`与我所拥有的相比如何？

# c# - 放弃流/文件的所有权

> ID：11648083
> 
> 赞同：1
> 
> 时间：2012-07-25T10:51:01.923
> 
> 标签：c#, mono, stream

在使用单声道流时，我遇到了一个非常奇怪的问题。我打开这样的流：

```
_stream = new FileStream(filename, FileMode.Open, FileAccess.ReadWrite, FileShare.Read); 
```

其中 _stream 当然是 FileStream。我为这个类添加了一个 dispose 方法，如下所示：

```
public override void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);
}

private void Dispose(bool disposing)
{
    if(!_disposed)
    {
        if(disposing)
        {
            _stream.Flush(true);
            _stream.Dispose();
            _items.Clear();
        }
        _disposed = true;
    }
} 
```

现在我有这个简单的测试：

```
[Test]
public void SimpleTest()
{
    SyncFileWriter s = new SyncFileWriter("file");
    s.Save("a", "b");
    s.Dispose();

    SyncFileWriter s2 = new SyncFileWriter("file");
    s2.Dispose();
} 
```

但如果因 IOException 失败：共享冲突。[编辑]看来monodevelop有错误。重新启动它，现在它每次都失败[/编辑]

如何避免这种情况并正确关闭流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:40:15.890

看来是我的错。SyncFileWriter 派生自一个检查文件是否存在的抽象类。如果没有，它将使用一些默认内容初始化此文件，这就是我执行以下操作的原因

```
File.Create(filename); 
```

如您所见，我创建了一个文件，但是 File.Create 打开了一个流并且在离开它的范围后没有关闭它，无论如何。现在我这样做：

```
Filestream f = File.Create(filename);
...
f.Dispose(); 
```

一切都很好。

我认为这也是第一个非确定性行为的问题所在，因为它仅在参数为空时才这样做，并且它仅在您创建新文件时为空。

无论如何，感谢您的帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T11:08:34.437

不太确定您要达到的目标，但我想这可能会有所帮助： http: [//www.blackwasp.co.uk/UsingStatement.aspx](http://www.blackwasp.co.uk/UsingStatement.aspx)

# build - PARI/GP 和 gcc

> ID：11648087
> 
> 赞同：0
> 
> 时间：2012-07-25T10:51:10.117
> 
> 标签：build, ansi, pari

我正在尝试安装 PARI/GP，在配置步骤中我得到：

```
$ ./Configure
[...]
Looking for the compilers ...
...cc is /usr/bin/cc
...gcc is /usr/local/bin/gcc
GNU compiler version 4.8.0 20120705 (experimental) (GCC)
###
### C compiler does not work. PARI/GP requires an ANSI C compiler! Aborting.
###
### Compiler was: /usr/local/bin/gcc  
$ gcc --version
gcc (GCC) 4.8.0 20120705 (experimental) 
```

这很奇怪，因为文档说：

```
"Only ANSI C and C++ compilers are supported.  Choosing the GNU compiler
gcc/g++ enables the inlining of kernel routines (about 20% speedup; if you
use g++, it is a good idea to include the -fpermissive flag).  If you choose
not to use gcc, the C++ version of Pari will be a little faster because of
general inlining, but can be used in library mode only with C++ programs.
We strongly recommand using gcc all the way through." 
```

我也尝试过使用 g++ 得到相同的结果。

我正在尝试在 linux x86_64 上编译。

有任何想法吗？提前致谢，

米；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-11T13:08:30.737

我有同样的问题。这是 Linux Mint 17.1 64 位的解决方案：

```
sudo apt-get install gcc libc6-dev libgmp-dev 
```

此命令还安装 GMP 库（建议用于 PARI/GP）。

感谢 KB 关于如何查看问题的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:34:44.467

PARI 顶层的 config/get_cc 脚本试图编译一个测试程序，但失败了。

寻找线

```
$CC $CFLAGS $extraflag -o $exe ansi.c 2>/dev/null && $RUNTEST $exe 
```

并删除 2>/dev/null。Configure 现在应该从编译器打印出明确的错误消息。他们应该提供提示。

# c# - 根据角度在 9x9 矩阵上画线

> ID：11648088
> 
> 赞同：0
> 
> 时间：2012-07-25T10:51:11.533
> 
> 标签：c#, drawing, trigonometry

我已经在半径 = 1 的 9x9 矩阵上声明了一个圆，我想根据参数在上面画线。

这是矩阵

![在此处输入图像描述](../Images/7615442d70e86a9072616bec00791ee7.png)

这是用于查找以红色绘制的线的起点和终点的参数。

![在此处输入图像描述](../Images/e96cde6f686348df074aab7bf4fb20d0.png)

h1 和 h2 是用红线隔开的两个区域的亮度值，不必考虑。

换句话说，像素 1 是 (3,1)，2 是 (4,1) 等等，所以原点是 x,y 轴上的 (5,5)。顺便说一句，我知道角度和 p。

为了获得这条红线的开始和结束像素或坐标以便使用 drawline 函数绘制它，您有什么建议？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:38:30.667

P 将平分红线。红线的中心和末端之间的距离是你知道的圆的半径。现在计算红线的长度，它将是 2（平方半径和 p 的平方根）。

根据 p 和 alpha 的方程计算 x 和 y 之间的关系。

根据半径和原点计算圆方程（两者都有）。

求解直线方程和圆方程。作为一种解决方案，您将获得圆和线之间的两个交互点。

# javascript - jQuery插件 - 从不同父变量中的外部访问子值

> ID：11648089
> 
> 赞同：1
> 
> 时间：2012-07-25T10:51:12.307
> 
> 标签：javascript, jquery, jquery-plugins

我是 jQuery 新手，尤其是 JavaScript 新手。

我正在尝试创建一个 jQuery 插件，但在回调事件方面遇到了一些困难。我想将回调事件包含到不同的函数中，这样插件会有点灵活。

这是代码：

```
 (function($, undefined){

    var methods = {

        init: function(options){

            var settings = $.extend({

                // Default settings
                'fadeInOutSpeed'            : 100,
                // the rest of default settings ...

                // Callback events
                onOpenBefore        : function(){},
                onOpen              : function(){},
                onOpenedCloseBefore : function(){}
                // the rest of the callback events...

            }, options);

            // code goes here...

            return this.each(function(){

                // code goes here

            });

        },
        destroy: function(){
            // code goes here
        },
        open: function(){
            console.info('method open accessed');
        },
        close: function(){
            console.info('method close accessed');
        },
        update: function(){
            console.info('method update accessed');
        }

    };

    function gui_selectbox_open(param, event){

        // HOW TO PUT A CORRECT CALLBACK CODE HERE ?
        settings.onOpenBefore.call(param, event);

        // function code goes here

        settings.onOpenAfter.call(param, event);
    }; 
```

在函数内部`gui_selectbox_open(param,event)`，开头有一行，我想在其中放置一个回调事件，以便在从外部初始化插件时可以正确访问它，这给了我一个 JavaScript 错误，告诉我`settings.onOpenBefore...`没有定义。如何定义它？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:03:40.320

您的变量`settings`被定义为对象`init()`内部函数的本地变量`methods`。要使其在外部可访问，您可以在`init`函数外部定义它并将其访问为`methods.settings.yourMethod(..)`

IE

```
var methods = {

    settings: null,

    init: function(options){

    ... 
```

# javascript - 将事件添加到 Google 日历的 Chrome 扩展程序发生“解析错误”

> ID：11648090
> 
> 赞同：1
> 
> 时间：2012-07-25T10:51:14.443
> 
> 标签：javascript, google-chrome, google-chrome-extension, calendar

我正在编写一个可以与 Google 日历同步的离线日历。它可以从 Google 日历获取数据，但不能向 Google 插入事件。这是我的插入代码：

```
 var url = 'https://www.googleapis.com/calendar/v3/calendars/' + calendar_id + '/events';
    var request = {
        'method': 'POST',
        'headers': {
            'GData-Version': '3.0',
            'Content-Type': 'application/atom+xml'
        },
        'body': {
            'start': { 'dateTime': '2012-07-24T07:30:00+08:00'},
            'end': { 'dateTime': '2012-07-24T08:30:00+08:00'},
            'summary': calEvent.title,
            'description': calEvent.body,
            'attendees': [ { 'email': calendar_id}],
            'reminders': {
                'overrides': [ {'method': 'email', 'minutes': 15}]
            }
        }
    };
    oauth.sendSignedRequest(url, function(resp) { console.log(resp) }, request); 
```

查了好几遍，查了一些相关的问题，还是不知道哪里错了。这是返回错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "parseError",
    "message": "Parse Error"
   }
  ],
  "code": 400,
  "message": "Parse Error"
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T03:06:31.807

我弄清楚哪里错了。请求的正文必须是字符串。

```
var body = {
'start': { 'dateTime': '2012-07-24T07:30:00+08:00'},
            'end': { 'dateTime': '2012-07-24T08:30:00+08:00'},
            'summary': calEvent.title,
            'description': calEvent.body,
            'attendees': [ { 'email': calendar_id}],
            'reminders': {
                'overrides': [ {'method': 'email', 'minutes': 15}]
            }
        } 
```

然后把body变成字符串：

```
body = JSON.stringify(body) 
```

设置请求变量：

```
request = {
    .....
    'body': body
    .....
} 
```

# ruby-on-rails - 如何只允许填写一个或其他字段，但不能同时填写？

> ID：11648095
> 
> 赞同：0
> 
> 时间：2012-07-25T10:51:35.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个具有 4 个属性的产品模型，称为价格、价格单位、单位和单位金额。我想允许填写价格属性或其他 3 个字段，但不是全部 4 个。这是一个更好的视图：

```
class Product < ActiveRecord::Base
  attr_accessible :price, :price_per_unit, :unit, :unit_amount
end

<%= form_for(@product) do |f| %> 
 # Either give a regular price or....
 <%= f.text_field :price %>

 # a price per unit the requires all 3 of these fields.
 <%= f.text_field :price_per_unit %>
 <%= f.text_field :unit %>
 <%= f.text_field :unit_amount %>

 <%= f.submit %>
<% end %> 
```

因此，在数据库（或网站）中，如果我按单位查看产品或具有正常价格但不能两者兼有。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:21:38.683

我想说这主要取决于您希望用户界面的行为方式无论如何，您应该有两个部分：

*   模型中的验证确保所描述的限制
*   允许用户输入任一选项的用户界面，例如。使用 javascript 进行选择。

# c# - 生成解锁密钥

> ID：11648097
> 
> 赞同：-2
> 
> 时间：2012-07-25T10:51:48.330
> 
> 标签：c#, .net, wix

我正在使用 WIX 和 C# 自定义操作来解锁产品。我们计划从旧样式修改我们的解锁密钥，例如 (34450-ee33-8736333-30393)。你能告诉我哪种算法适合这个吗？提供在线资料来学习这一点会很有用。
如果您需要任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:17:11.250

您可以使用 System.Net.Security 和 System.Net.Security.Cryptography 中的各种加密类。我特别使用了像 MD5CryptoServiceProvider 这样的类来计算二进制块或文件的哈希值，并输出类似于您提到的摘要。然后，您可以匹配系统生成的与用户输入的键来激活/解锁您的软件。

这是我的密码学工作中的一个示例：

```
 byte[] bytes = System.IO.File.ReadAllBytes(ofd.FileName);
            byte[] checksum = null;
            if (optMD5.IsChecked==true)
            {
                MD5 md5 = System.Security.Cryptography.MD5.Create();//.MD5CryptoServiceProvider();
                checksum=new byte[1024];
                checksum = md5.ComputeHash(bytes);
            }
            else if (optSHA1.IsChecked == true)
            {
                SHA1 sha1 = new System.Security.Cryptography.SHA1CryptoServiceProvider();
                checksum = sha1.ComputeHash(bytes);
            }
            else {
                MessageBox.Show("No option selected.");
                return;
            }
            //string schecksum = BitConverter.ToString(checksum);//ASCIIEncoding.ASCII.GetString(checksum);

            // Create a new Stringbuilder to collect the bytes
            // and create a string.
            StringBuilder sb = new StringBuilder();

            // Loop through each byte of the hashed data 
            // and format each one as a hexadecimal string.
            for (int i = 0; i < checksum.Length; i++)
            {
                sb.Append(checksum[i].ToString("x2"));
            }

            // Return the hexadecimal string.
            //return sb.ToString();

            MessageBox.Show("checksum-1 = " + sb.ToString() + Environment.NewLine + "checksum-2 = " + txtChecksum.Text); 
```

# c# - 将简单的表达式语言翻译成 LINQ 查询？

> ID：11648099
> 
> 赞同：0
> 
> 时间：2012-07-25T10:51:59.753
> 
> 标签：c#, entity-framework, constraints

我想为一个小型数据库应用程序编写一个简单的表达式语言和 LINQ to Entities 翻译器。翻译者应该简单地将表达式翻译成 linq 查询，例如

```
[Project Participants] > 50 AND [Project Duration in Months] < 4 
```

应转换为类似的 LINQ 查询

```
from p in projects where p.Participants.Count > 50 && p.Duration < 4 select p; 
```

在运行时动态。

我的目标是将用户特定的约束存储在数据库中，并使用这些约束使用实体框架按需生成项目列表。进行这种“翻译”的好习惯是什么？

非常感谢，问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:35:02.157

我的建议是使用 ScottGu 的动态 LINQ 库，可在此处找到：

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

基本上，您可以将简单的表达式语言解析为字符串，并使用一些 YACC 样式的代码在运行时构建适当的 LINQ 查询部分。

# c - 需要 L 值吗？C 编程位模式

> ID：11648100
> 
> 赞同：0
> 
> 时间：2012-07-25T10:51:59.640
> 
> 标签：c, bit-manipulation, lvalue

```
void InsertA(SET *A,int elem)
{
    if( isMember(*A,elem) == false)
    {
    *A = *A || 1<<elem;; /*it says its in this row*/
    }
} 
```

/*Error: Lvalue required in Function InsertA 对这家伙有什么想法吗？菜鸟在这里

*/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:46:42.990

在此声明中：

```
*A = *A || 1<<elem;; /*it says its in this row*/ 
```

我们有这些运营商`*,=,||,<<`

现在查看优先级表

```
Precedence    Operator   operation                  associativity 
               --------   ---------                 ----------------
3                  *       Indirection (dereference)       R to L
7                  <<       Bitwise left shift             L to R
14                 ||       Logical OR                     L to R
16                 =       Direct assignment               R to L 
```

那么让我们看看会发生什么：

1) 将首先执行间接。其中有两个。他们将右与左联系起来。这意味着将首先执行正确的一个。重要的是要了解这里有两个解引用运算符，稍后遇到`=`运算符时会考虑不同。

2) 将对 1 执行按位左移。 3) 将对`*A`按位移位的结果执行逻辑或。它可以评估零或非零。4) 这个零/非零值将被分配给`*A`。这里`*A`可以被视为`=`运算符上下文中的左值。如果你离开这个考虑，它会导致模棱两可。因为我们经常将取消引用操作视为要使用`*A`的 an`rvalue`或 an 。`value`实际上它是一个有效的`lvalue`，它将被隐式转换为 a `rvalue`（这是返回`value`存储在指向的地址的a 时`A`）。否则`*A`只是内存中对值开放的容器。

所以问题是您的表达式是未定义的，并且没有任何意义为什么您将**逻辑**值放入`*A`. `or`如果您使用二进制而不是逻辑，它将更有意义。

让我们这样做：

我们的优先表中有一个新条目

```
Precedence OP   OPeration        Associativity 
12         |    Bitwise OR          L to R 
```

只有在执行按位 OR 时，才会在第 3 步中发生变化。

举个例子

假设`elem = 3.` A 指向数组`{1,2,3,3,4}`

1) '*A's 将被执行。它只会计算需要执行的“偏移量”`load`或`store`处理器的指令。

2）我们将得到一个恒定的位模式：`1 << 3 = 1000` 3）现在`|`我们需要`rvalues`两个操作数。所以现在`load`将执行一条指令来获取存储在内存中的值。说它`2`。所以我们将得到`0010 | 1000 = 1010` 4) 将执行存储指令以将此位模式放入内存中，因此数组看起来像`{1,A,3,3,4}`

过多冗长的解释：我认为如果未来的用户试图找到如何通过语言规则剖析复杂的表达式，我认为这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:06:46.760

如评论中所述，代码应编译。但看起来你想在 an 中设置一点`int`，所以我怀疑你真的想要`|`而不是`||`. 所以你应该做

```
*A |= 1<<elem; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:16:12.857

|| 是逻辑运算，而不是按位运算。您是否尝试将其更改为 |？

每当您执行 A = 时，您就有可能创建一个临时 A，与 *A 相同。小心使用 = 运算符并查看如何禁用复制构造函数。

您可以使用 |= 运算符。A |= (1 << 随便什么)

编辑：确保您没有在 C++ 模式下使用 C++ 编译器编译 C 代码。GCC 有一个用于 C 的开关，这取决于您的构建环境。

# php - 使用预定义的文件名将 CSV 文件自动保存到预定义的位置

> ID：11648102
> 
> 赞同：0
> 
> 时间：2012-07-25T10:52:15.823
> 
> 标签：php, file, csv, directory, autosave

假设我有一个下载 csv 文件的网页。然后会出现一个对话框，其中包含“打开”或“保存”文件选项。现在，我想要的是，只要用户单击下载按钮，csv 文件就会自动保存到预定义的位置，而屏幕上不会出现任何对话框。另外，我希望在该位置使用预定义的文件名保存文件，并覆盖任何现有的相同类型的文件（如果已经存在）。可能吗？（我使用 Firefox 作为浏览器）。提前谢谢了。

# c# - 播放媒体文件，同时还在下载（Windows Phone）

> ID：11648103
> 
> 赞同：0
> 
> 时间：2012-07-25T10:52:16.723
> 
> 标签：c#, windows-phone-7, audio, download, isolatedstorage

我想知道，是否有办法在 Windows Phone 中播放媒体文件，而该文件仍在下载？

目前，我有一个具有功能的应用程序，允许在完全下载后下载和播放媒体文件。（我已经创建了这个功能，使用[文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=586)）

所以，简而言之，首先，媒体文件是从 url 下载的，然后我使用 mediaElement 来播放它：

```
mediaElement.source = isolatedStorageFileStream; 
```

之后，我可以通过我的播放器 UI 使用这个文件。

但是，我更喜欢让这个功能更好——允许在下载过程中开始播放文件。最后，这应该是这样的：开始下载文件，同时开始解密这个文件，同时允许播放文件的解密部分。解密到此为止吧（我已经写了一个下载文件的方法，那应该稍微改一下），主要的问题是如何允许两个并行任务：下载和播放。

第一个问题是：“MediaElement 是否只允许将“源”属性设置为仅实体（最终下载的）文件，或者它也可以在下载期间使用此流”？因为，我找到了一些信息，即：

> “MediaElement 目前不支持流式传输。它在实际播放之前先加载*整个文件。”*

，虽然我不确定这个是指Windows Phone，但听起来相当焦急。

如果无法做到这一点，我还能用什么来处理媒体文件？我对下载视频不感兴趣，我们只限制 mp3 音频文件。

现在，下载过程是这样实现的：

```
WebClient webClient = new WebClient();
webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(webClient_DownloadProgressChanged);
webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
webClient.OpenReadAsync(new Uri(link)); 
```

然后在 OpenReadCompleted 中将下载文件流设置为 mediaFile 的源。

```
mediaFile.SetSource(isolatedStorageFileStream); 
```

在此之后，我可以使用我的媒体文件。

我的问题有解决方案吗？我在 Windows Phone 线程和流方面相当新，不知道如何实现这样的功能。

PS当然，我试图找到一个类似的问题，但失败了。如果你知道的话，请给我一个链接。

PPS 对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:31:27.770

您只能使用 BackgroundAudioPlayer 流式传输它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:34:27.747

您正在尝试读取正在使用的文件。我认为不可能。

但是：VideoRecorder 使用文件接收器工作，并设法同时捕获、写入和显示。建议你去那个地区看看

如何：在 Windows Phone 的相机应用程序中录制视频 [http://msdn.microsoft.com/en-us/library/hh394041(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh394041(v=vs.92).aspx)

FileSink [http://msdn.microsoft.com/en-us/library/system.windows.media.filesink(VS.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.filesink(VS.95).aspx)

# git - Git合并冲突 - 远程文件已删除，本地文件已更改

> ID：11648105
> 
> 赞同：23
> 
> 时间：2012-07-25T10:52:25.573
> 
> 标签：git, git-merge, git-merge-conflict

我合并了来自另一个分支的更改，但我遇到了冲突，因为远程分支上的文件已被删除，但本地分支上有更改。

我想删除该文件 - 我试过`git rm path/to/file`但它说`file: needs merge`。删除文件并提交合并的最佳方法是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-25T10:55:00.890

尝试使用`--force`参数：

```
git rm --force <file> 
```

如果要将文件保留在文件系统中：

```
git rm --cached <file> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-07-27T20:54:37.453

> 我试过`git rm path/to/file`了，但它说文件：`needs merge`

您将不再看到 Git 2.23 的错误消息（Q3 0219，七年后）

" "在实际删除路径之前`git rm`解决用于泄漏内部消息的冲突路径" "，这令人困惑。 这已得到纠正。`needs merge`

请参阅[Junio C Hamano ( ) 的](https://github.com/gitster)[提交 b2b1f61](https://github.com/git/git/commit/b2b1f615ce3b9383a32dec7f84488284004224f3)（2019 年 7 月 17 日[）](https://github.com/gitster)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 5e9d978](https://github.com/git/git/commit/5e9d9787d278331385dbfcf962b32dc4e8d3eb5e))^(中，2019 年 7 月 25 日）)[`gitster`](https://github.com/gitster)
^([`gitster`](https://github.com/gitster))

> ## rm：通过删除解决不是值得警告的事件
> 
> 当解决路径上的冲突以支持删除它时，`git rm`在其上使用“”是这样做的标准方法。
> 然而，在该操作期间，用户会收到一条 " `needs merge`" 消息：
> 
> ```
> $ git merge side-branch
> $ edit conflicted-path-1
> $ git add conflicted-path-1
> $ git rm conflicted-path-2
> conflicted-path-2: needs merge
> rm 'conflicted-path-2' 
> ```
> 
> `git rm`确实执行了“”的删除操作，但是外行的用户可能会感到困惑：
> “ `needs merge`？所以我需要先解决冲突才能删除它？？？”
> 
> 消息来自[`update-index --refresh`](https://git-scm.com/docs/git-update-index#Documentation/git-update-index.txt---refresh)内部调用的“”，以确保“ `git rm`”知道哪些路径是干净的，哪些路径是脏的，以防止在没有“ `-f`”选项的情况下删除相对于索引修改的路径。
> 
> 我们不知何故最终没有压制这个渗透到 UI 表面的消息。
> 
> 使用与“ `git commit`”、“ `git describe`”等相同的机制来压制消息。

# asp.net-mvc-4 - 使用 WebAPI 搜索

> ID：11648107
> 
> 赞同：14
> 
> 时间：2012-07-25T10:52:38.453
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我为我的`Customer`模型制作了一个 Web API 类。我有标准方法（GET、POST、PUT、DELETE）。问题是，我想实现另一种 GET 方法，即搜索。像这样的东西：

```
[HttpGet]
public IEnumerable<Customer> Search(string id)
{
    var customers = customerRepository.Search(id);
    return customers;
} 
```

搜索方法使用该方法根据我的客户的帐号执行搜索`.Contains()`。

问题是，当我导航到：`mySite.com/api/Customers/Search/123`我得到一个 404。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-01-21T13:26:58.670

虽然 Darin 的答案总是质量上乘，但这个问题实际上会受益于解释如何在任何 API 中实际完成搜索、分页和过滤以及如何使用最新版本的 Web API (v2) 完成的答案。

这是一篇我认为关于此事的好资源（技术独立）的帖子：http: [//www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api](http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api)

答案还应该反映 ASP.NET Web API v2 中的新功能，因为 Darin 的答案已经很老了。

由于在谷歌搜索“asp.net web api search”时这个问题出现在顶部，我将在这里尝试解释一些事情。

要使用最新版本的 ASP.NET Web API (v2) 尽可能接近 REST 原则，应该认真研究最新版本中引入的属性路由。使用旧的、经典的、基于约定的路由（在 global.asax.cs 或 RouteConfig.cs 中）很难实现 RESTful 路由。

你应该在这里阅读更多关于 [http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2](http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2)

现在，详细介绍如何实施您询问的细节。

最常见的做法是通过查询字符串参数公开这些类型的功能。

例如，根据 REST 原则，您的客户资源应该有一个端点

```
/api/customers 
```

要实现这一点，您将像这样在 Web API 控制器中装饰您的 GetCustomers() 操作

```
[HttpGet]
[Route("/api/customers")]
public HttpResponseMessage GetCustomers(string q="", string sortBy="", string sortDirection="", bool active=true, ...)
{ 
// q = being optional search query
// sortBy = optional sort by column/property
// sortDirection = optional sort direction
// active = filter on 'active' column/property
// ... other filters may be applicable
} 
```

如果您想提供过滤的视图，您将非常接近您在经典 MVC 中所做的操作来实现此操作。

如果真的需要，我只会在一些自定义边缘情况下引入新的控制器和自定义操作。

关于 SearchFilter 强类型对象的评论，让我们解释一下这不会开箱即用，因为默认模型绑定器在使用 GET 请求时不会绑定到此类。

因此，我要么将这些属性从 SearchFilter 类中取出并将它们放在操作本身上，以便它们通过查询字符串绑定器绑定，或者`[FromBody]`如果您想从请求正文绑定，则使用绑定器。根据[http://www.asp.net/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api](http://www.asp.net/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api)

高温高压

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T10:56:20.300

根据默认路由设置，仅允许使用标准控制器操作名称（RESTful 和调度是基于 HTTP 动词完成的）。如果您想违反 RESTful 约定并使用一些自定义操作名称，那么您必须修改您的路由设置，以便在 url: 中包含操作名称`api/{controller}/{action}/{id}`。现在您可以发送一个请求，`/api/Customers/Search/123`该请求将调用客户 API 控制器上的搜索操作。

# extjs4 - 网格滚动条在 I-pad 上不起作用

> ID：11648109
> 
> 赞同：0
> 
> 时间：2012-07-25T10:52:48.380
> 
> 标签：extjs4

我正在使用 ExtJS 4.0.7

我的页面上有网格。如果有太多数据滚动条会自动出现，在 Chrome 中，Mozilla IE 甚至在 Safari 上也是如此。

但是当我尝试在 I-pad 中访问相同的应用程序时，滚动条不起作用。

**注意**： - 网格重新设置功能，即分页等工作正常。只有滚动条不起作用。

这有什么具体原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:18:07.503

这是 Ext 4.0 的一个已知问题；它对网格使用虚拟滚动条，并且在触摸设备上完全损坏。Ext JS 4.1 解决了这个问题，并且滚动在 iPad 上工作，尽管没有显示滚动条。

# javascript - 如果语句由于某种原因不起作用

> ID：11648110
> 
> 赞同：0
> 
> 时间：2012-07-25T10:52:48.623
> 
> 标签：javascript

这是我的代码：

```
alert ("Current: " + crmForm.all.new_currentdate.DataValue);
alert ("Previous value: " + crmForm.all.new_date.DataValue);

if(crmForm.all.new_currentdate.DataValue != crmForm.all.new_date.DataValue )
{
  crmForm.all.new_otherValue.DataValue  = null;
  alert("Nulling other value");
} 
```

如您所见，我已经在开始时添加了警报以检查值，它们是相同的。但是，它仍会进入 IF 语句，并且也会显示第三个警报（Nulling other value）。有任何想法吗？这是在 MS Dynamics CRM 中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:57:31.683

```
console.log(true + 1); // outputs 2
console.log(true == 1); // outputs true
console.log(true === 1); // outputs false. true is not the number 1\. 
console.log(false + 1); // outputs 1
console.log(false == 0); // outputs true
console.log(false === 0); // outputs false. false is not the number 0. 
```

对于unitiatated javascript if 语句可能相当奇怪，[从这里](http://11heavens.com/falsy-and-truthy-in-javascript)

# sqlite - 将 android SQLite 数据库与 Web 浏览器集成

> ID：11648113
> 
> 赞同：0
> 
> 时间：2012-07-25T10:52:51.093
> 
> 标签：sqlite

我需要创建一个 android 应用程序，它将在数据库中插入一些记录，并且数据库的记录将在 Web 浏览器中显示为输出。是否可以使用 android 的 SQLite 数据库来做到这一点？如果是，那怎么办？

# objective-c - 显示字典对象

> ID：11648116
> 
> 赞同：-3
> 
> 时间：2012-07-25T10:53:03.723
> 
> 标签：objective-c, cocoa-touch, xcode4.3

我想单独显示每个对象，仅针对此字典 (email,city,name)：{"contact_search":{"0":{"email":"xxx","city":"xxx","name" :"xxx"}}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:03:52.253

很难说你真正想要什么。

```
NSDictionary *contactSearch = [dictionary objectForKey:@"contact_search"];

[dictionary enumerateKeysAndObjectsUsingBlock:^(id key, NSDictionary *contact, BOOL *stop) {
    NSString *name  = [contact objectForKey:@"name"]; 
    NSString *city  = [contact objectForKey:@"city"];
    NSString *email = [contact objectForKey:@"email"];

    NSLog(@"name: %@, city: %@, email: %@", name, city, email);
}]; 
```

这将抓取对象字典，然后循环通过每个键/值对打印值

# eclipse - 在 Eclipse 内容辅助中自动插入首选

> ID：11648119
> 
> 赞同：0
> 
> 时间：2012-07-25T10:53:12.037
> 
> 标签：eclipse, eclipse-plugin

我喜欢 Visual Studio 的一点是，您可以自动插入内容辅助的第一个选项，而不是按`Ctrl`+`Space`然后从菜单中选择第一个选项。

是否有类似的方法来映射特殊的组合键以始终在 Eclipse 中插入第一选择？

如果这样的选项不是 Eclipse 中的本机选项，是否有用于该选项的插件？

我在 SO 中看到了一个类似的问题：[没有在 Eclipse 中选择的内容辅助，](https://stackoverflow.com/questions/4477805/content-assist-without-choosing-in-eclipse)但解决方案建议将触发的内容辅助标签重命名为独特的东西，我正在寻找适用于所有东西的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:50:58.617

没有自动插入仅在只有一种选择时才有效。

您可以针对 JDT/Text 打开此功能的增强请求 - [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=JDT](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=JDT)

# jquery - 如何更改 jQuery Mobile Listview 的颜色

> ID：11648121
> 
> 赞同：1
> 
> 时间：2012-07-25T10:53:16.017
> 
> 标签：jquery, jquery-mobile, themeroller

我想将其中一张`<li>`唱片的颜色更改为“红色”。请建议我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:44:52.787

您可以使用[jQuery Mobile ThemeRoller](http://jquerymobile.com/themeroller/)将色板自定义为您想要的任何颜色。您可以拥有多个样本（来自 AZ）并在元素级别上使用它们`data-theme="a"`（插入样本字母）。

这是我为你制作的主题，全是红色的。[http://jquerymobile.com/themeroller/?ver=1.1.1&style_id=20120725-62](http://jquerymobile.com/themeroller/?ver=1.1.1&style_id=20120725-62)

![在此处输入图像描述](../Images/9c3f0f583c4074a776f667a0bf3bc047.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T13:32:32.513

我知道您已经选择了答案，但是修改列表视图的锚标记应该可以解决问题。我有这个（#storeList 是我的无序列表的名称）：

```
#storeList a {
    background-color:red;
} 
```

# c# - C# lambda 否则声明

> ID：11648126
> 
> 赞同：2
> 
> 时间：2012-07-25T10:53:24.293
> 
> 标签：c#, lambda

我想知道是否可以在 lambda 中执行其他明智的类型语句，类似于：

有两个看起来完全相同的表结构，除了一列，称为概要（表 1）和描述（表 2）。我的组件根据一个属性读取两个表中的一个，并希望执行一个 lambda 表达式来确定该列是否存在：

```
(from p in table[this.TableName]
 where (p["Description"] != null)
 'otherwise' where (p["Synopsis"] != null)
 select p).First(); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:56:03.480

如果访问不存在的列不会引发异常，您应该能够使用逻辑 OR 运算符 ( `||`)：

```
(from p in table[this.TableName]
 where (p["Description"] != null || p["Synopsis"] != null)
 select p).First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:57:51.913

不，您不能扩展 LINQ 查询理解语法来添加新关键字。您*可以*做的是添加更多扩展方法，并以这种方式编写您自己的逻辑 - 但在这种情况下它不会真正有帮助，因为 a`.Where(...).Otherwise(...)`实际上不会**获得**任何“否则”数据 - 序列已经被过滤了`Where(...)`. _

另外：除非那是 LINQ-to-Objects，否则您可能应该期望查询解释器阻塞它。更简单的答案是“不，你真的不能那样做”。

正如其他人所指出的，您*可以*通过简化条件`||`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:58:03.753

听起来逻辑 OR ("||") 是解决方案，假设您的索引器返回`null`不存在的列。

# android - PhoneGap + Android 模拟器 + Sencha Touch

> ID：11648127
> 
> 赞同：1
> 
> 时间：2012-07-25T10:53:26.237
> 
> 标签：android, cordova, sencha-touch

我正在尝试在 Android Emulator 上使用以下代码调用本地服务。Bellow 是调用该服务的 JavaScript 代码。

```
Ext.Ajax.request({
    url: "http://10.0.2.2/MyService.svc/Authenticate",
    jsonData: data,
    headers: {
      "X-Authorization-Elf" : SessionManager.getCurrentSessionToken()
    },
    scope: scope,
    success: function (response, options) {
    },
    failure: function(response, options) {
    },
    callback: function (options, success, response) {
        // Hide the loading message box
        Ext.Viewport.setMasked(false);
    }
}); 
```

呼叫未接通服务。应用程序流将失败，状态为 0，响应文本为空。

请建议我的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:44:23.837

您是否将主机添加到 phonegap/cordova xml？

尝试将此行添加到 res/xml 文件夹中的 phonegap/cordova xml：

```
<access origin="http://10.0.2.2*"/> 
```

如果您使用 phonegap 2.0.0，请将其添加到 config.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:11:58.773

我认为，您的应用程序无法连接到您提供的网址。如果您的服务器类被调用，您可以在您的服务器端类中添加断点并进行调试。

# iphone - 核心数据交叉引用两个关系

> ID：11648130
> 
> 赞同：0
> 
> 时间：2012-07-25T10:53:47.487
> 
> 标签：iphone, objective-c, ios, core-data

我在Core Data中有一个像这样的数据结构......

用户

物品

类别

用户与 Item 实体有一个 toMany 关系“FavouriteItems”。Category 与 Item 实体还有一个 toMany 关系“Items”。

用户可以从他们希望的任何类别中选择最喜欢的项目。目前我正在列出所有项目，然后在旁边显示类别。

我想做的是显示选定类别的所有用户的 favouriteItems。

即选择与类别x 和用户y 有关系的所有项目。

我目前正在通过一种关系（即User.favouriteItems）获取所有项目，然后使用块谓词过滤NSSet。

是否可以使用简单的 CoreData 谓词来做到这一点？

嗯...想想它会像这样的谓词工作...

```
[NSPredicate predicateWithFormat:@"interestedUser.id = %@ AND category.id = %@", user.id, category.id]; 
```

然后在项目实体上运行获取请求？

那行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:28:38.983

拍摄相当盲目，因为这是一个尴尬的场景，只是为了回答一个问题，但也许

如果您正在过滤具有正确反向关系设置的项目数组。

```
[NSPredicate predicateWithFormat:@"%@ IN interestedUsers AND %@ IN categories", 
                                 someUser, 
                                 someCategory]; 
```

基本上`Item`有很多用户 ( `interestedUsers`) 所以我们说的是我们在这个集合中的用户。

同样，它`Item`有很多类别 ( `categories`)，所以我们说`AND`的是我们在这个集合中选择的类别。

# git - 如何将 org 模式下的 URL 导出为不带括号的 ascii

> ID：11648136
> 
> 赞同：2
> 
> 时间：2012-07-25T10:54:10.993
> 
> 标签：git, url, export, ascii, org-mode

当我写

```
$ git clone https://https://username@bitbucket.org/username/reponame.git 
```

在 org-mode 然后导出到 ascii (Cc Ce a) 结果是

```
$ git clone [https://https://username@bitbucket.org/username/reponame.git] 
```

因此，自述文件的读者将无法简单地复制和粘贴该行。

我想以 org-mode (emacs) 为 GIT 项目编写我的自述文件并将它们导出到 ascii。这样会很好，因为格式很漂亮，而且 ReadMe.txt 文件的内容会自动显示在 github 和 bitbucket 上。

摆脱括号的首选方法是什么？将 org-mode 中的行定义为代码片段？更改 ascii 导出定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:29:36.720

我建议将这些命令标记为文字示例，或者将其括在`#+begin_example`and之间`#+end_example`，或者在单行中使用冒号作为前缀：

```
This is an example command:
: $ git clone https://username@bitbucket.org/username/reponame.git 
```

链接不会被解释。

# c# - 在 ListBoxItems 之间创建一条水平线（水平方向的 ListBox）

> ID：11648138
> 
> 赞同：0
> 
> 时间：2012-07-25T10:54:19.833
> 
> 标签：c#, wpf

我想创建一个这样的列表框：

-----|-----|-----|-----|-----|--

| 是我使用边距分隔的列表框项。这工作正常。我想要的是列表框有一个包含这一行的背景。或者至少有它在后台。我尝试了一个分隔符，但这不是我想要的，因为它也是可点击的，因为我在 itemtemplate 中使用了它。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:40:05.297

您必须将带有控件模板的样式添加到 ListBox 项。

```
 <Style x:Key="{x:Type ListBoxItem}" TargetType="ListBoxItem">
   <Setter Property="SnapsToDevicePixels" Value="true"/>
   <Setter Property="OverridesDefaultStyle" Value="true"/>
   <Setter Property="Template">
     <Setter.Value>
        <ControlTemplate TargetType="ListBoxItem">
          <Border Name="Border"
                  BorderThickness="1,0"
                  BorderBrush="Black"
                  Padding="2"
                  SnapsToDevicePixels="true">
            <ContentPresenter />
          </Border>
        </ControlTemplate>
     </Setter.Value>
   </Setter>
 </Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:10:38.467

边框控件适用于这种类型的装饰线。侧面的粗细是独立设置的，因此仅使用一侧作为一条垂直线。在相关说明中，您是否尝试过在布局中使用 Grid 控件而不是边距？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:53:01.243

我正在尝试创建一个像控件一样的时间线。我现在用这个修复它：

```
 <ListBox.Template>
      <ControlTemplate>
            <Border BorderThickness="2" BorderBrush="Black">
                  <Grid>
                        <Rectangle Height="2" HorizontalAlignment="Stretch" VerticalAlignment="Center" Fill="Black"/>
                        <ScrollViewer Padding="{TemplateBinding Padding}">
                              <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        </ScrollViewer>
                  </Grid>
            </Border>
       </ControlTemplate>
  </ListBox.Template> 
```

这在测试项目中工作正常，但我在我的主项目中遇到了一些问题。矩形保留在滚动查看器下方。嗯...取得进展。希望尽快解决这个问题。

感谢您到目前为止的回答！

# c++ - 使用来自同一个 DLL 的 impls 导出 DLL API 和工厂

> ID：11648140
> 
> 赞同：1
> 
> 时间：2012-07-25T10:54:28.460
> 
> 标签：c++, dll, dllimport, dllexport

好的，我开始明白为什么它被称为 Dll Hell。
这是我得到的代码

```
// API.h file
#ifdef EXPORTS
    #define API __declspec(dllexport)
#else
    #define API __declspec(dllimport)
#endif

struct API IClass {
   virtual void foo() = 0;
}

extern "C" API IClass* CreateClass(const char* type);

// Impl1.h
class Impl1: public IClass
{
   //...
}

// API.cpp file
#include "Impl1.h"
#include "Impl2.h"
#include "ImplX.h"

extern "C" API IClass* CreateClass(const char* type)
{
    if (type == "type1")
        return new Impl1();

    // ...
    return 0;
} 
```

我收到链接器警告

```
warning LNK4217: locally defined symbol ??0IClass@DG@@QAE@XZ (public: __thiscall IClass::IClass(void)) imported in function... 
```

我知道发生这种情况是因为我已经在所有 Impl 中导入了这些符号，但另一方面，它们现在是本地的，因为我正在作为 API 一部分的工厂中编译它们。

1）我应该忽略警告还是有不同的方法来解决这个问题？
2）我应该保留默认的 __thiscall 还是更改为 __stdcall ？

**编辑**
不导出`IClass`帮助我删除了警告。
另一个问题出现了，我不确定同样的方法可以解决这个问题。
让我们假设`IClass`也有一个方法`virtual bar(IData* data) = 0`。
如果我希望客户能够创建实例，`IData`我需要将其导出到 dll 中，回到 impl 中的原始问题。除非我也为它们创建创建函数，但这对于简单的数据结构来说似乎有点太多开销。

所以基本上问题是，如何在`IData`不将它们导出到 DLL 的情况下向客户端公开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:09:54.170

如果您喜欢 COM 之类的东西：无需通过以下方式导出接口

```
__declspec(dllexport|import). 
```

调用约定是一个相当古老的概念，并且与 x64 有任何相关性（Windows 和 UNIX 只有一个 64 位调用约定！）您在 32 位上的选择将介于`__cdecl`或`__stdcall`. 第一条规则应该是：保持一致！这两种约定本身都很好。（除非你打算使用`va_args`（你不应该使用，因为它们是纯粹的邪恶）......）

`__stdcall`由 COM 和 WinAPI 使用，而标准库大多使用`__cdecl`. 就性能而言，它完全无关紧要（stackoverflow 上有一篇关于调用约定的速度差异的帖子）。

警告可能是由于您正在导出类而不是构造函数，因此我建议不要导出类...

# java - Error pops up when trying to execute hdfs zkfc command

> ID：11648141
> 
> 赞同：3
> 
> 时间：2012-07-25T10:54:30.733
> 
> 标签：java, hadoop

Hi could anyone help me out im a newbie to hadoop wanted to try this feature out.so can anyone of you help.Im running on a single node cluster.

```
$ hdfs zkfc
Exception in thread "main" org.apache.hadoop.HadoopIllegalArgumentException: HA is not enabled for this namenode.
    at org.apache.hadoop.hdfs.tools.DFSZKFailoverController.setConf(DFSZKFailoverController.java:122)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:66)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)
    at org.apache.hadoop.hdfs.tools.DFSZKFailoverController.main(DFSZKFailoverController.java:168) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:10:13.063

The error speaks for itself: looks like you forgot to change a setting hadoop uses.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:30:56.507

```
$ sudo service hadoop-hdfs-namenode start

$ sudo -u hdfs hdfs namenode -bootstrapStandby

$ sudo service hadoop-hdfs-namenode start

$ sudo service hadoop-hdfs-zkfc start

This is for configuring NN.And it works!! Thanks 
```

# java - java中的window azure身份验证

> ID：11648144
> 
> 赞同：0
> 
> 时间：2012-07-25T10:54:37.740
> 
> 标签：java, authentication, azure

java中的window azure身份验证...

```
String bingUrl = "https://api.datamarket.azure.com/Bing/Search/Web?Query='multiple'&$top=4&$skip=1&$format=json";
String accountKey = "HEPgn2ahb407EMW/j5TXKs5umkO6VDlb8anWMq+O2=";
byte[] accountKeyBytes = Base64.encode((accountKey + ":" + accountKey).getBytes());
String accountKeyEnc = new String(accountKeyBytes);
URL urlb = new URL(bingUrl);
URLConnection urlConnection =urlb.openConnection();
urlConnection.setRequestProperty("Authorization","basic " + accountKeyEnc); 
```

但这不起作用...这里的帐户密钥不是实际的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:06:45.530

不久前我回答了一个类似的问题，这段代码确实有效：[Bing Search API Azure Marketplace Authentication in Java](https://stackoverflow.com/questions/11136936/bing-search-api-azure-marketplace-authentication-in-java/11137385#11137385)

我看到的第一个问题是您正在调用**Base64.encode**，这实际上应该是：**Base64.encodeBase64**。您是否也可以尝试将**basic**更改为**Basic**（在 setRequestProperty 调用中）？

这些更改与正确的帐户密钥一起应该可以解决问题。

# vim - 未知函数：splice#SpliceInit 在启动时

> ID：11648146
> 
> 赞同：2
> 
> 时间：2012-07-25T10:54:46.283
> 
> 标签：vim

我通过*Vundle安装了**Splice.vim* ，但运行时出现这些错误。这是我的：*`git mergetool``.gitconfig`*

 *```
[merge]¬                                                                         
    tool = splice¬                                                               
[mergetool "splice"]¬                                                            
    cmd = "vim -f $BASE $LOCAL $REMOTE $MERGED -c 'SpliceInit'"¬                 
    trustExitCode = true 
```

如您所见，没有什么原创的。

我满足要求。Vim 7.3，Python 2.7.1，Vim 支持 Python，...</p>

这是`:call splice#SpliceInit()`返回的内容：

```
Error detected while processing function splice#SpliceInit:
line    3:
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/Users/adrien/.vim/bundle/splice.vim/autoload/splice.py", line 19, in SpliceInit
    splice.init()
  File "/Users/adrien/.vim/bundle/splice.vim/autoload/splicelib/init.py", line 96, in init
    setlocal_buffers()
  File "/Users/adrien/.vim/bundle/splice.vim/autoload/splicelib/init.py", line 78, in setlocal_buffers
    buffers.hud.open()
  File "/Users/adrien/.vim/bundle/splice.vim/autoload/splicelib/util/bufferlib.py", line 53, in hud
    return Buffer(int(vim.eval("bufnr('__Splice_HUD__')")) - 1)
  File "/Users/adrien/.vim/bundle/splice.vim/autoload/splicelib/util/bufferlib.py", line 10, in __init__
    self._buffer = vim.buffers[i]
    IndexError: no such buffer 
```

任何想法？*

# c# - ASP.NET：Web 表单按钮 onclick 问题

> ID：11648150
> 
> 赞同：1
> 
> 时间：2012-07-25T10:55:00.103
> 
> 标签：c#, asp.net, webforms

我在 c# 中使用 ASP.NET 实现 Web 表单，我有一个页面，其中包含几个 TextBox 和一个提交按钮，当按下提交按钮时，来自 TextBox 的数据将插入到数据库中，该页面将被保留并且不需要重定向。

但是数据提交后有一个问题，如果F5/刷新页面没有点击提交按钮，数据会反复插入。

第一次提交后如何避免此类问题发生？

提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:59:34.990

保存逻辑完成后，将 Response.Redirect 放置到同一页面。发生这种情况是因为浏览器在 F5 上重复最后一个请求，如果这是保存的 POST 请求。在 Response.Redirect 最后一个请求将是 GET 之后，您的问题将得到解决

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T11:06:24.870

不幸的是，您无法阻止类似的事情发生，因为在您按下刷新后浏览器会再次执行相同的代码，因此您无能为力，但您可以再次使用 response.redirect 到同一页面。

您还可以检查数据库中的重复项，因此如果该记录存​​在，请不要再次保存。

希望我有所帮助

# redirect - @PostConstruct 方法中的重定向导致 IllegalStateException

> ID：11648151
> 
> 赞同：3
> 
> 时间：2012-07-25T10:55:09.340
> 
> 标签：redirect, jsf-2, illegalstateexception

根据[BalusC 的回答](https://stackoverflow.com/a/1930907/801434)，我用

```
FacesContext.getCurrentInstance().getExternalContext().redirect(url); 
```

在我的`@PostConstruct`方法中阻止 JSF 呈现视图并重定向用户。但是，当我尝试运行代码时，我仍然遇到`java.lang.IllegalStateException`了上面一行的异常。

```
WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.IllegalStateException
    at org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:524)
    at StudentManagedBean.CourseSummary.init(CourseSummary.java:55)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

**更新：**我在我的`@PostConstruct`方法中添加了以下行：

```
System.out.println("INIT " + FacesContext.getCurrentInstance().getExternalContext().isResponseCommitted()); 
```

我看到的是`INIT true`。`@PostConstruct`我想知道在调用方法之前是否应该提交响应？

如果您能给我一个建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T06:29:52.530

正如我在更新中提到的，打印了以下行`INIT true`：

```
System.out.println("INIT " + FacesContext.getCurrentInstance().getExternalContext().isResponseCommitted()); 
```

我终于找到了为什么会出现上述情况。在我的页面上，在`ManagedBean X`包含重定向功能的被 引用之前`UIComponent A`，另一个被放置在页面结构上方的`ManagedBean Y`预先引用。结果，响应由 部分提交，这使得无法发送请求。`UIComponent B``UIComponent A``ManagedBean Y``ManagedBean X``redirect`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:21:05.780

重定向在这里不起作用，因为即使响应已经完成并最终确定，JSF 也不够聪明，无法避免其运行生命周期事件的典型例程。

相反，您可以尝试从 RequestDispatcher 执行转发。转发与重定向在以下方面不同：

*   由 servlet 在内部执行
*   浏览器无动于衷
*   原始网址保持不变

这是一些代码，显示了如何做到这一点......

```
RequestDispatcher dispatcher =
    ((ServletRequest) context.getExternalContext().getRequest())
    .getRequestDispatcher("/j_spring_security_logout");

try {
  dispatcher.forward((ServletRequest) context.getExternalContext().getRequest(),
  (ServletResponse) context.getExternalContext().getResponse());
} catch (ServletException e) {
  log.error("ServletException", e);
} catch (IOException e) {
  log.error("IOException", e);
} 
```

通过这样做，您将过早地结束 FacesServlet 的执行并将其完全转发到不同的 servlet。我想从这个其他 servlet 可能会重定向到所需的位置。

# delphi - 如果使用 continue 则“无返回值”？

> ID：11648155
> 
> 赞同：0
> 
> 时间：2012-07-25T10:55:19.683
> 
> 标签：delphi, warnings, return-value, delphi-xe2

作为。没关系。在 while/repeat 循环上继续有错误的直觉。出丑了:-)

请参阅注释行。如果我取消注释它 - 编译就可以了。如果我保留它的评论，则会给出关于未定义结果的警告。似乎编译器无法解释像 Break 和 Continue 这样的伪过程。

以前的 Delphi 版本会发生这种情况吗？有QC吗？

```
//returns 0 or win32 error code
function TfmMain.callQDN(DeviceName: string;
  out buff: string): DWORD;
const len_step = 8192;
var res, len, err: DWORD;
    lpDeviceName: PChar;
begin
  SetLength(buff, len_step);
  len := Length(buff);

  lpDeviceName := nil;
  if DeviceName>'' then lpDeviceName := @DeviceName[1];

  repeat
    Res := QueryDosDevice(lpDeviceName, @buff[1], len);

    if Res = 0 then begin
       err := GetLastError;
//       Result := err;

       if err = ERROR_INSUFFICIENT_BUFFER then begin
          len := len_step + len;
          SetLength(buff, len);
          continue;
       end;

       Result := err;
    end else begin
       Result := 0;
       SetLength(buff, res); // res+1 ?
    end;

  until (Result = 0);

end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:59:08.480

我真笨。

继续重新检查条件，而不是再次启动循环体

# android - 当屏幕处于触摸模式时，如何在 Listview 中找到位置？

> ID：11648158
> 
> 赞同：1
> 
> 时间：2012-07-25T10:55:25.197
> 
> 标签：android, listview, listener

我正在为盲人申请和困难

我有这样的情况，当用户在**listview**上从**顶部屏幕向底部****滑动**一根手指时，当手指移动时，在哪个项目手指上继续，我想找出项目中的**位置**基本细节。

 ******这不是**onitemclicklistener**！手指在项目上移动，因此屏幕进入**触摸模式**。是否有任何听众或周围的方式来找出项目的位置？

非常感谢您的帮助和评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:13:46.853

这是一个疯狂的建议，未经测试：

1.  在`getView()`listview 适配器中，用于`View.setTag(Object)`将任何自定义数据附加到视图。
2.  `OnTouchListener()`在返回之前为每个视图设置一个。
3.  在 中`OnTouchListener()` `onTouch(View, MotionEvent)`，您将获得视图，并且您可以`view.getTag()`获取附加的自定义数据。******

# c# - Microsoft Access 中损坏的 OLE 对象数据类型记录

> ID：11648166
> 
> 赞同：1
> 
> 时间：2012-07-25T10:56:10.503
> 
> 标签：c#, ms-access-2007

```
 In my client database, i saw corrupted records for specifically Template Column(DataType : OLE Object) in Emp table. if i am trying to delete it tells "The Microsoft Jet database engine stopped the process because you and another user are attempting to change the same data at the same time". only one thing i can do remove corrupted record by deleting that row which contained corrupted record but this not suitable solution. 
```

如何使用 C# 应用程序防止访问数据库中的损坏记录？

![损坏的 OLE 对象记录](../Images/fe7c5df1891696f60ce3fd41ed04e5dd.png)

# php - 自定义表单日期和时间选择中的 Joomla 2.5 日历字段类型

> ID：11648167
> 
> 赞同：2
> 
> 时间：2012-07-25T10:56:14.853
> 
> 标签：php, xml, joomla2.5

我的 admin/components/com_xxxxx/models/forms/xxxxx.xml 文件中有两个字段。

这些输入到 Joomla 2.5 后端的管理员输入表单中

```
<field name="f_start" type="calendar" class="inputbox" 
             required="true" 
             format="%Y-%m-%d %H:%M:%S"
             default="0000-00-00 09:30:00" 
             label="COM_xxxxx_F_START"
             description="COM_xxxxx_F_START_DESC" 
             filter="safehtml" /> 

<field name="f_end" type="calendar" class="inputbox"
             required="true" 
             format="%Y-%m-%d %H:%M:%S"
             default="0000-00-00 19:30:30" 
             label="COM_xxxxx_F_END"
             description="COM_xxxxx_F_END_DESC" 
             filter="safehtml" /> 
```

这些本质上是文章发表的开始和结束日期。但是在选择DatePicker / Calendar图标并选择该字段的日期以更新为所选择的日期但保留09:30:00默认开始时间。这似乎适用于 01:30:00 到 11:30 之间的时间，任何下午的时间都会在选择日期后重置为现在。

谁能解释为什么？或者如何保持日期选择器的默认时间？

如果结束日期也可以默认为从开始日期起 28 天？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T23:56:40.717

单击日历图标时，日历小部件会尝试将自身定位在相应文本字段中包含的日期上。由于`0000-00-00`日期无效，`Date.parseDate`函数 in`media/system/js/calendar-uncompressed.js`尝试从格式字符串的所有组件中猜测日期。`0000-00-00 09:30:00`被识别为 9 月 30 日，因为`09 < 12`, 所以它看起来像一个月份数，因此它返回`Sep 30, 9:30`。另一方面，`0000-00-00 19:30:00`不被识别为任何有效日期，并且函数返回`today`. 因此，时间部分的差异。

例如，如果您查看 com_content 的 XML 表单文件，您会发现它们不使用日历字段的默认值。

但是，您可以创建从 JFormFieldCalendar 派生的自定义字段类型，这将为您提供充分的灵活性。例如：

表格/whatever.xml

```
<field name="f_start" type="PubDateCalendar"
       format="%Y-%m-%d %H:%M:%S" default="start" ... />
<field name="f_end" type="PubDateCalendar"
       format="%Y-%m-%d %H:%M:%S" default="end" ... /> 
```

字段/pubdatecalendar.php

```
<?php
defined('_JEXEC') or die;
jimport('joomla.form.helper');
JFormHelper::loadFieldClass('calendar');

class JFormFieldPubDateCalendar extends JFormFieldCalendar
{
    public $type = 'PubDateCalendar';
    protected function getInput()
    {
        $format = $this->element['format']
                ? (string) $this->element['format']
                : '%Y-%m-%d';
        if ($this->element['default'] == 'start') {
            $this->value = strftime($format);
        } else if ($this->element['default'] == 'end') {
            $this->value = strftime($format, time() + 28 * 24 * 60 * 60);
        }
        return parent::getInput();
    }
}
?> 
```

或任何更适合您的特定应用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T00:45:00.270

也许这对像我这样正在寻找这个问题的答案但在当前版本的 Joomla 3.3.6 上的人会有所帮助：

```
<field
  name="birth_day"
  type="calendar"
  label="COM_PERSONS_PERSON_FIELD_BIRTHDAY_LABEL"
  description="COM_PERSONS_PERSON_FIELD_BIRTHDAY_DESC"
  class="inputbox" 
  size="20"
  format="%Y-%m-%d"
  filter="user_utc" /> 
```

# php - Zend 框架无法上传文件

> ID：11648172
> 
> 赞同：0
> 
> 时间：2012-07-25T10:56:26.237
> 
> 标签：php, zend-framework, file-upload

我无法设置`setDestination()`在 zend 框架中上传文件的功能的路径。

当我使用如下路径时，我的文件已成功上传：

```
$upload = new Zend_File_Transfer_Adapter_Http();
$upload->setDestination("C:/"); 
```

但实际上我想`upload_folder`在 zend 框架的公共目录中的目录中上传一个文件。我试过我的代码：

```
$upload = new Zend_File_Transfer_Adapter_Http();            
$upload->setDestination($this->view->baseUrl()."/upload_folder/"); 
```

但文件没有上传到上述路径目录中。

谁能帮我？如何设置文件上传的路径`Project_Directory/public/upload_folder`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:09:55.683

`setDestination`将需要文件系统路径，因此为什么`C:/`有效而使用`baseUrl`无效。

`$this->view->baseUrl`将是`http://yourserver.com`（这是一个 URL，而不是文件系统路径）。

如果您像大多数示例一样设置了 Zend 框架，则应该将`APPLICATION_PATH`变量设置为 eg `C:/project/application`（例如，您也应该有`C:/project/public`）。

如果你有`APPLICATION_PATH`（只需回显它以查看它的去向），那么你可以使用`setDestination(APPLICATION_PATH.'/../public/upload_folder/');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:11:18.740

`APPLICATION_PATH`使用常量设置上传路径

```
setDestination(APPLICATION_PATH.'/../public/upload_folder/') 
```

# android - 如何创建在点击时扩大和缩小的视图？

> ID：11648173
> 
> 赞同：3
> 
> 时间：2012-07-25T10:56:41.667
> 
> 标签：android

我必须显示项目列表以及加号（+），单击加号列表应展开&再次单击列表应缩小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:45:03.417

你可以这样做，但需要做更多你想要展示的工作

名称、地址和加号应更改为减号，您需要制作自定义列表视图，您可以使用

在列表中单击加号按钮时

```
 nameText.setVisibility(View.VISIBLE);                                

adress.setVisibility(View.VISIBLE);

btn.setBackgroundResource(R.drawable.minus); 
```

当点击减号按钮时

```
nameText.setVisibility(View.GONE);

adress.setVisibility(View.GONE);

btn.setBackgroundResource(R.drawable.plus); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:16:29.657

如果你想创建一个像windows一样的树视图，那么它不是android支持的UI元素。与此类似的是`ExplandableListView`元素。

尽管在一个业务应用程序中，我发现这个[http://code.google.com/p/tree-view-list-android/](http://code.google.com/p/tree-view-list-android/)项目完全符合您的要求。

# javascript - Firefox 列出当前目录中所有文件名的问题

> ID：11648174
> 
> 赞同：0
> 
> 时间：2012-07-25T10:56:44.067
> 
> 标签：javascript, filesystems

直接搜索当前的所有 html 文件并`div`使用超链接添加标签。它在 IE 中完美运行。但它在 Firefox 和 Chrome 中不起作用。任何人都可以帮助我......

```
 <script type="text/javascript">
        function getCurrentDirectory() {
            var fso = new ActiveXObject("Scripting.FileSystemObject");
            path = unescape(document.location); 
            path = path.substring(8, path.lastIndexOf("/") + 1); 

            return path;
        }

        function ShowFolderFileList() {
            var fso, f, f1, fc, s, temp, Extention, fileName, temp2, filePath;
            folderspec = getCurrentDirectory();

            fso = new ActiveXObject("Scripting.FileSystemObject");
            f = fso.GetFolder(folderspec);
            fc = new Enumerator(f.files);

            s = "";
            for (; !fc.atEnd(); fc.moveNext()) {
                filePath = "" + fc.item() + "";
                fileName = fc.item().name;
                temp = "" + fileName + ""
                Extention = (temp.lastIndexOf(".") > -1) ? temp.slice(temp.lastIndexOf(".") + 1).toLowerCase() : "*";
                if (Extention == "html" || Extention == "htm") {
                    s += "<a href=\"" + fileName + "\" target=\"_blank\">" + temp.replace("." + Extention, "") + "</a> <br>";                                                            
                }

            }

            outPut.innerHTML = s;

        }
    </script> 
```

在 html 中

```
<div id="outPut">
</div> 
```

任何人都在这方面工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:58:03.837

[由于多种原因，Firefox 不支持 ActiveX 技术。](http://support.mozilla.org/en-US/kb/ActiveX)

Chrome 也是如此。

如果您确实需要访问文件系统，[Java Web Start](http://en.wikipedia.org/wiki/Java_Web_Start)之类的工具将是一个替代方案。

# android - 在 Android 中使用 sqlcipher 后出现“sqlite3_open_v2("mydatabase.db", &handle, 6, NULL) failed”

> ID：11648177
> 
> 赞同：1
> 
> 时间：2012-07-25T10:56:58.933
> 
> 标签：android, sqlcipher

在 Android 2.3.3 中使用 sqlcipher 时。我收到错误。

这是我的 DB.java 类

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.util.Log;
import net.sqlcipher.database.SQLiteDatabase;
import net.sqlcipher.database.SQLiteDatabase.CursorFactory;
import net.sqlcipher.database.SQLiteOpenHelper;

public class DB {

private static String _DB_NAME = "mydatabase.db";
private static int _DB_VERSION = 1;

private Context _context;
private DBHelper _helper;

public DB(Context context) {
SQLiteDatabase.loadLibs(context);
this._context = context;
this._helper = new DBHelper(this._context, _DB_NAME, null, _DB_VERSION);
SQLiteDatabase sqdb = this._helper.getWritableDatabase("123");
sqdb.close();
}

public void insertValuesInTable() {

try {
SQLiteDatabase sqdb = SQLiteDatabase.openOrCreateDatabase(_DB_NAME, "123",null);
sqdb.execSQL("insert into mytable(category, total) values (1,"100");");
sqdb.close();
} catch (Exception e) {
e.printStackTrace();
}
}
private static class DBHelper extends SQLiteOpenHelper {

        public DBHelper(Context context, String name, CursorFactory factory,
                int version) {

            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            createTables(db);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        }

        private void createTables(SQLiteDatabase db) {

            try {
                String query1;

                query1 = "Create table if not exists mytable (category integer primary key, total text) ;   ";
                db.execSQL(query1);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

} 
```

我创建了 DB.java 的对象并像这样使用它

```
DB _db = new DB(getApplicationContext());
_db.insertValuesInTable(); 
```

一旦我执行此行`_db.insertValuesInTable();`，我就会收到此错误

```
sqlite returned: error code = 14, msg = cannot open file at line 32288 of [6d326d44fd]
sqlite returned: error code = 14, msg = os_unix.c:32288: (2) open(//mydatabase.db) - 
sqlite3_open_v2("mydatabase.db", &handle, 6, NULL) failed
net.sqlcipher.database.SQLiteException: unable to open database file
net.sqlcipher.database.SQLiteDatabase.dbopen(Native Method)
net.sqlcipher.database.SQLiteDatabase.<init>(SQLiteDatabase.java:1952)
net.sqlcipher.database.SQLiteDatabase.openDatabase(SQLiteDatabase.java:902)
net.sqlcipher.database.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:945)
com.keane.database.DB.insertValuesInMd5Check(DB.java:133)
com.keane.test2.UsageMonitorTestActivity.onCreate(UsageMonitorTestActivity.java:45)
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
android.app.ActivityThread.access$1500(ActivityThread.java:117)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:123)
android.app.ActivityThread.main(ActivityThread.java:3683)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:507)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
dalvik.system.NativeStart.main(Native Method) 
```

我已正确包含所有`.so`, `.jar`&`.zip`文件。我仍然收到这个错误。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:12:23.203

您应该创建一个 的子类`android.app.Application`，并将其注册到您的`AndroidManifest.xml`文件中。在调用之前，通过从应用程序实例`SQLiteDatabase.openOrCreateDatabase`调用获取数据库文件的完整路径并将该值传递给.`getDatabasePath``SQLiteDatabase.openOrCreateDatabase`

# php - Magento 产品详细信息 - 受登录用户限制 + 客户组？

> ID：11648179
> 
> 赞同：0
> 
> 时间：2012-07-25T10:57:06.213
> 
> 标签：php, xml, magento

在我的 Magento 产品页面上，我有一个选项卡式系统来显示描述、功能和另一个名为“下载”的选项卡 - 这需要对特定组中的登录客户可见。

在我的 catalog.xml 的布局 XML 中，我有这个：

```
<block type="catalog/product_view_description" name="product.description" as="description" template="catalog/product/view/description.phtml">
     <action method="addToParentGroup"><group>detailed_info</group></action>
     <action method="setTitle"><name>Description</name></action>
</block>

<block type="catalog/product_view_description" name="product.features" as="features" template="catalog/product/view/features.phtml">
    <action method="addToParentGroup"><group>detailed_info</group></action>
    <action method="setTitle"><name>Features</name></action>
</block>

<customer_logged_in>
    <block type="core/template" name="product.downloads" as="downloads" template="catalog/product/view/downloads.phtml">
        <action method="addToParentGroup"><group>detailed_info</group></action>
        <action method="setTitle"><name>Downloads</name></action>
    </block>           
</customer_logged_in> 
```

**但是——即使我以任何组中的客户身份登录，该框也不会显示，因此`<customer_logged_in>`从那里删除会显示选项卡 + 框。**

所以我需要知道：

1.  为什么我登录时不显示？
2.  我可以在登录后进行此节目吗？但只能在特定客户群中进行？

我想也许你可以使用`<customer_logged_in setCustomerGroupId="2">`或类似的东西！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:22:36.770

您可以使用客户登录重定向 magento 扩展。它将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:20:14.787

别担心，我现在已经通过 .phtml 模板文件进行了排序，下面的代码供其他人使用：

```
$_allowed_group_ids = array(1); // Stick in Allowed Customer Group ID's
$_product_collateral = array(); // We will store the tabbed content in our own array
$_restricted_tabs = array('downloads');

foreach ($this->getChildGroup('detailed_info', 'getChildHtml') as $alias => $html) {

    $_product_collateral[$alias] = $html;   

    if( in_array($alias, $_restricted_tabs) ):              

        if( Mage::getSingleton('customer/session')->isLoggedIn() ):

            $_group_id = Mage::getSingleton('customer/session')->getCustomerGroupId();

            if( !in_array($_group_id, $_allowed_group_ids) ):                           
                unset($_product_collateral[$alias]);
                continue;
            endif;
        else:
            unset($_product_collateral[$alias]);
            continue;                           
        endif;      

    endif;                                                                      
} 
```

示例用法：

```
<ul>
    <?php foreach( $_product_collateral as $alias => $html ): ?>
    <li><a href="#tab-<?php echo strtolower($alias); ?>"><?php echo ucfirst($alias); ?></a></li>
    <?php endforeach; ?>    
</ul> 
```

框内容的示例用法：

```
<?php foreach( $_product_collateral as $alias => $html ): ?>            
<div class="box-collateral <?php echo "box-{$alias}"?>" id="tab-<?php echo strtolower($alias); ?>">
    <?php echo $html; ?>
</div> 
<?php endforeach;?> 
```

# c# - char.IsNumber()

> ID：11648182
> 
> 赞同：2
> 
> 时间：2012-07-25T10:57:11.513
> 
> 标签：c#, winforms

我正在构建一个 Windows 窗体应用程序。我`char.IsNumber()`用来检查按下的键是否为数字：

```
 private void AmBox_KeyPress(object sender, KeyPressEventArgs e)
   {
       if(char.IsNumber(e.KeyChar))
           e.Handled=true;
   } 
```

MSDN 说`char.IsNumber()`检查一个键字符是否为数字，所以如果它是一个数字，它会返回 true。从我所看到的情况来看，结果是相反的——它忽略了数字（1,2,3....）而不是字符（A,a,b,c...）。

如果我使用我可以解决问题，`!char.IsNumber();`但我无法理解这种方法`char.IsNumber()`的作用。有人可以详细解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T11:00:16.610

`char.IsNumber()``true`如果字符是数字 ( `'0'`, `'1'`, ... `'9'`) ，则返回。

并`e.Handled = true`说*“这个事件已经被处理了，所以忽略它”*。

因此，您的代码实际上意味着：

```
if (e.KeyChar is a number)
    Ignore this event 
```

这样看，您可能会明白为什么您的代码只忽略数字。

所以使用的解决方案`!char.IsNumber()`是正确的，因为它基本上是说*“如果字符**不是**数字，忽略这个事件”*。

另外，请注意您可能正在寻找[`Char.IsDigit`](http://msdn.microsoft.com/en-us/library/7f0ddtxh)， as[`Char.IsNumber`](http://msdn.microsoft.com/en-us/library/yk2b3t2y.aspx)也将其他字符识别为数字。仅`Char.IsDigit`返回to ，这很可能是您想要的。`true``'0'``'9'`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T11:01:17.360

您正确使用[了 Char.IsNumber()](http://msdn.microsoft.com/en-us/library/system.char.isnumber.aspx)`true` ，如果传递的字符符合数字条件，它会返回。

您的问题在于[Handled](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.handled.aspx)属性。当您将其设置为 时`true`，您基本上是在告诉框架*我已经处理了这个，您与该事件没有任何关系*，这会阻止执行默认行为。换句话说，您设置的字符`Handled`将`true`被忽略。

这就是为什么你必须颠倒你的条件：

```
if (!Char.IsNumber(e.KeyChar)) {
    // e.KeyChar is not a number, block it.
    e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T11:00:34.643

更有可能的是，因为当字符是数字时您将事件标记为已处理，所以事件不会“冒泡”到实际处理它的任何方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T11:01:40.183

试试这个

```
if(!char.IsNumber(e.KeyChar))
           e.Handled=true; 
```

# asp.net - Ajax ModalPopupExtender 回发滚动条

> ID：11648183
> 
> 赞同：1
> 
> 时间：2012-07-25T10:57:16.530
> 
> 标签：asp.net, ajax, modalpopupextender

我有一个 asp 面板，它使用 ajax 作为模态弹出窗口打开。此面板中有一些可以回发的用户控件，例如允许自定义编辑和添加的 gridview。

然而，由于面板的大小，我不得不引入滚动条，以便用户可以滚动 asp 面板并编辑相应的网格视图。在回发时，尽管面板内的滚动条被重复放置在顶部，而不是保持滚动位置。

我的问题是；有没有办法在这个模态弹出扩展面板中保持滚动位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:33:21.767

使用的代码（供参考）是：

```
var iST;
$(document).ready(function() {
getScrollPosition();
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(getScrollPosition);
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(setScrollPosition);
});

function pageLoad() {
    var popup = $find('<%=MODALPOPUPNAME.ClientID%>');
    popup.add_shown(setScrollPosition);
}

function getScrollPosition() {
    iST = $("#<%=PANELNAME.ClientID %>").scrollTop();
}
function setScrollPosition() {
    $("#<%=PANELNAME.ClientID %>").scrollTop(iST + 20);
} 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-31T03:34:49.680

花了几个小时后，我能够做到这一点。假设我们有一个名为 myDiv 的 div，它位于一个名为 pnlPopup 的弹出面板中。每当 myDiv 上有一个 scoll 时，我们需要 javascript 来标记滚动位置。我们在一个名为 hfScrollP 的隐藏元素中标记这个滚动位置。

```
<script type="text/javascript">
    function markScrollPosition() {
        var div = document.getElementById("myDiv").scrollTop;
        document.getElementById('<%=hfScrollP.ClientID %>').value = div;
    }
</script>

<asp:HiddenField ID = "hfScrollP" runat = "server" />
<asp:Panel ID="pnlPopup" runat="server"  Width="750px" style="display:none;">

    <div id="myDiv" style="height: 350px; width: 700px;overflow: auto;" 
          onscroll="markScrollPosition();">

    </div>

</asp:Panel> 
```

然后我们有一个按钮，它会在点击时打开弹出窗口和我们的模态弹出扩展器。

```
<asp:Button ID="btnShowModalPopup" runat="server" Text="Show" />
<ajaxToolkit:ModalPopupExtender ID="mpePopup" runat="server" 
   TargetControlID="btnShowModalPopup" 
   PopupControlID="pnlPopup" DropShadow="True" BackgroundCssClass="modalBackground"  
   Enabled ="true">
</ajaxToolkit:ModalPopupExtender> 
```

我们需要这个 javascript 以便在每次我们有回发并显示弹出窗口时设置弹出窗口上的滚动位置。

```
<script type="text/javascript" language="javascript">
                function pageLoad() {
                    var modal = $find('<%=mpePopup.ClientID %>');
                    $find('<%=mpePopup.ClientID %>').add_shown(
                        function () {                       
                     $('#myDiv').scrollTop(document.getElementById('<%=hfScrollP.ClientID %>').value);
                    }
                       );
                }
 </script> 
```

在你的代码后面。

```
 Private Sub btnShowModalPopup_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnShowModalPopup.Click
            //Do your necessary processing
            mpePopup.show();
        End Sub 
```

而已。当弹出窗口显示时，它将滚动回最后标记的向下滚动位置。希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-02T20:50:35.313

您可以更改特定 Div 的 javascript 代码。

```
<script type="text/javascript">
    function pageLoad() {
        $('#DataDiv').scrollTop(document.getElementById('<%=hfScrollT.ClientID %>').value).scrollLeft(document.getElementById('<%=hfScrollL.ClientID %>').value);
    }
</script> 
```

希望有所帮助！

# ios - UIWebView 和 Safari 对比

> ID：11648184
> 
> 赞同：18
> 
> 时间：2012-07-25T10:57:18.560
> 
> 标签：ios, uiwebview, mobile-safari

1.  UIWebView 是否使用与 Mobile Safari 相同的 JavaScript 引擎？

2.  另外，UIWebView 是否支持 Mobile Safari 那样的所有 HTML5 功能？我特别关注 Web SQL 和 Web Workers

3.  如果我有一个纯粹用 HTML 和 JS 编写的应用程序，我应该将它包装在 UIWebView 中还是应该在 Mobile Safari 中打开它

4.  Apple 商店是否接受纯 HTML 和 JS 应用程序？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-25T12:24:45.307

> UIWebView 是否使用与 Mobile Safari 相同的 JavaScript 引擎？

UIWebView 没有 Nitro Javascript 引擎，因此它执行 JS 比 Mobile Safari 慢。所以不一样。

> 另外，UIWebView 是否支持 Mobile Safari 那样的所有 HTML5 功能？我特别关注 Web SQL 和 Web Workers

不确定这个。可能不是。至少 UIWebView 在某些功能上比 Safari 更严格一些。示例：通过 JS 设置宽高样式时，需要在数字后面加上 'px'，而 Mobile Safari 则不需要。

> 如果我有一个纯粹用 HTML 和 JS 编写的应用程序，我应该将它包装在 UIWebView 中还是应该在 Mobile Safari 中打开它

如果您想在 App Store 上发布该应用程序，则必须对其进行包装。如果没有，你真的不必。

> Apple 商店是否接受纯 HTML 和 JS 应用程序？

如果你把它包起来，是的。但正如詹姆斯韦伯斯特所写的那样，它有一些局限性。

有关UIWebView 和 Safari 之间差异的更多信息，请参阅SO 上的[这个问题。](https://stackoverflow.com/questions/3496505/differences-between-uiwebview-and-mobile-safari)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:10:12.493

我只能通过这些片段真正为您的问题的第 4 部分提供见解：

[App Store Review 指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)中有一些指南（需要登录）提到“网络”

> 2.12 不是很有用、**只是捆绑为应用程序的网站**或不提供任何持久娱乐价值的应用程序可能会被拒绝
> 
> 2.17 浏览网页的应用必须使用iOS WebKit 框架和WebKit Javascript
> 
> 12.3 简单的网络剪辑、内容聚合器或链接集合的应用程序可能会被拒绝

# zend-framework - 在表单 .ini 文件中关闭 zend inArrayValidator

> ID：11648185
> 
> 赞同：0
> 
> 时间：2012-07-25T10:57:26.483
> 
> 标签：zend-framework

嗨，我想知道您如何在表单 ini 文件中关闭默认验证器：inArrayValidator，我可以在控制器中将其关闭，如下所示：

```
$oForm->getElement("sitename")->setRegisterInArrayValidator(false); 
```

我希望能够在我的 .ini 中做到这一点，以免弄乱我的控制器：

我尝试了以下方法：

```
elements.0.type = "select"
elements.0.name = "sitename"
elements.0.options.label = "Site name"
elements.0.options.validators.inarrayvalidator = false 
```

但这不起作用，我收到以下错误：

```
Plugin by name '' was not found in the registry; used paths:\nZend_Validate_: Zend\/Validate\/ 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:03:04.280

在您的 ini 文件中，您应该引用`registerInArrayValidator`而不是`inArrayValidator`因为实际的属性 in`Zend_Form`被调用`registerInArrayValidator`。

以下配置有效：

```
[elements]

sitename.type = "select"
sitename.name = "sitename"
sitename.options.label = "Site name"
sitename.options.registerInArrayValidator = false
sitename.options.multiOptions[] = "Hello"
sitename.options.multiOptions[] = "There" 
```

# javascript - 如何在 FileMaker Web 查看器中从网站检索内容

> ID：11648190
> 
> 赞同：4
> 
> 时间：2012-07-25T10:57:37.643
> 
> 标签：javascript, html, xml, filemaker

我需要建立一个可以在 FileMaker Pro 11 Web Viewer 中查看的网站。URL 将由 FileMaker 初始设置。之后，用户可以更改页面内容，生成新数据。想法是将新数据检索回 FileMaker。

网站应该如何输出数据供 FileMaker 检索？FileMaker A) 可以在 URL 更改后从 URL 读取参数，或者 B) 将整个页面作为 XML 读取，然后解析 XML 并提取数据（尽管我希望有比这更简单的解决方案）。

我对这件事的看法主要是作为一名网络开发人员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T16:10:31.280

您可以创建一个按钮，通过 GetLayoutObjectAttribute 函数“获取” Web 视图的内容。

首先，为 Web 视图对象命名。

接下来，使用以下命令创建一个设置字段或变量的脚本：

GetLayoutObjectAttribute(objectName;"source") -- 返回对象的 URL GetLayoutObjectAttribute(objectName;"content") -- 返回对象的当前内容（html、xml等）

现在创建一个调用新创建的脚本的按钮。

如果您要解析 xml，请查看[http://www.briandunning.com/cf/1](http://www.briandunning.com/cf/1)以获取简化解析的功能。

# php - Symfony2 两个实体之间的多重关系

> ID：11648200
> 
> 赞同：0
> 
> 时间：2012-07-25T10:58:04.553
> 
> 标签：php, symfony, doctrine

我有两个实体：Product 和 ProductAttachment（一个文件实体）

一个产品有一张主照片、一个图片列表和一个文档列表。

我的想法是在 Product 和 ProductAttachment 之间建立树关系，所以我在 Product 中有三个属性：

*   $main_photo : 一对一
*   $图片：一对多
*   $附件：一对多

产品附件具有以下属性：

*   $名称
*   $路径
*   $文件
*   $product : 多对一
*   $type : 附件类型（主照片、图片、文档）

我有一些问题，但在提出具体问题之前，我想知道这是否是一个好方法。

是否存在另一种处理文件的简单方法？我在 knpbundles 中尝试了一些上传包，但没有运气（它们不适合我的需要）

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:21:13.400

编辑：重新阅读您的问题后，关于您的关系，您实际上需要 ManyToOne（因为您可以拥有许多产品并附有一张主图片） ManyToMany（许多产品+许多图片）ManyToMany（许多产品+许多附件）

然后你会得到一个 OneToMany、ManyToMany 和 ManyToMany 的逆。

也可以将图片和附件都放在一个关系中，并在文件上使用类型标识符，这完全取决于您。

结束编辑

您完成它的方式将起作用，通常当我处理数据库结构几乎保持不变的文件时。产品附件（或文件）可能有一些额外的字段指示它的存储位置（FTP、S3 等），但除此之外。

通常，当我处理要上传的文件时，我会使用[http://www.plupload.com](http://www.plupload.com)之类的脚本，该脚本实际上会将图像发布到您选择的页面。这真的很好，因为如果用户不支持该上传器，它将使用 HTML5 并回退到各种其他上传器类型。

当上传者向控制器发送响应时，它会发送文件，通常我有一个路由设置，可以让我指定上传目录，所以我会指向上传者说[http://site.com/upload/upload -文件夹1](http://site.com/upload/upload-folder1)

然后让控制器保存文件，并发送回包含文件位置的响应。然后，您使用 javascript 将文件位置放入隐藏的表单字段 productAttachment.path（例如）中，仅此而已。

我也尝试了上传包，但它们相当复杂，似乎缺乏我所需要的东西。

# c++ - 关于 Hinnant 的栈分配器的问题

> ID：11648202
> 
> 赞同：33
> 
> 时间：2012-07-25T10:58:16.343
> 
> 标签：c++, c++11, memory-alignment, allocator, exception-specification

我一直在使用 Howard Hinnant 的[堆栈分配器](http://howardhinnant.github.io/stack_alloc.h)，它的工作原理就像一个魅力，但实现的一些细节对我来说有点不清楚。

1.  为什么是全球运营商`new`和`delete`使用？和成员函数分别使用`allocate()`和。同样，成员函数使用全局放置 new。为什么不允许任何用户定义的全局或特定类的重载？`deallocate()``::operator new``::operator delete``construct()`
2.  为什么对齐设置为硬编码的 16 字节而不是`std::alignment_of<T>`？
3.  为什么构造函数`max_size`有`throw()`异常规范？这不是不鼓励（参见例如更有效的 C++ 第 14 条）吗？当分配器发生异常时，是否真的需要终止和中止？这会随着新的 C++11`noexcept`关键字而改变吗？
4.  `construct()`成员函数将是完美转发（到被调用的构造函数）的理想候选者。这是编写符合 C++11 的分配器的方法吗？
5.  为了使当前代码符合 C++11，还需要进行哪些其他更改？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-25T14:48:35.560

> 我一直在使用 Howard Hinnant 的[堆栈分配器](http://howardhinnant.github.io/stack_alloc.h)，它的工作原理就像一个魅力，但实现的一些细节对我来说有点不清楚。

很高兴它一直在为你工作。

> 1\. 为什么是全局运算符`new`和`delete`使用？和成员函数分别 使用`allocate()`和。同样，成员函数 使用全局放置 new。为什么不允许任何用户定义的全局或特定类的重载？`deallocate()``::operator new``::operator delete``construct()`

没有什么特别的原因。随意以最适合您的方式修改此代码。这只是一个例子，它绝不是完美的。唯一的要求是分配器和释放器提供正确对齐的内存，并且构造成员构造一个参数。

在 C++11 中，构造（和销毁）成员是可选的。如果您在提供`allocator_traits`. 要找出答案，只需删除它们，看看是否还能编译。

> 2\. 为什么对齐设置为硬编码的 16 字节而不是`std::alignment_of<T>`？

`std::alignment_of<T>`可能会正常工作。那天我可能是偏执狂。

> 3\. 为什么构造函数`max_size`有`throw()`异常规范？这不是不鼓励（参见例如更有效的 C++ 第 14 条）吗？当分配器发生异常时，是否真的需要终止和中止？这会随着新的 C++11 `noexcept`关键字而改变吗？

这些成员永远不会扔。对于 C++11，我应该将它们更新为`noexcept`. 在 C++11 中，用 装饰事物变得更加重要`noexcept`，尤其是特殊成员。在 C++11 中，可以检测表达式是否为 nothrow。代码可以根据该答案进行分支。已知为 nothrow 的代码更有可能导致通用代码分支到更有效的路径。 `std::move_if_noexcept`是 C++11 中的典型示例。

永远不要使用`throw(type1, type2)`。它已在 C++11 中被弃用。

当你`throw()`真的想说：这永远不会抛出，如果我错了，终止程序以便我可以调试它。 `throw()`在 C++11 中也已弃用，但有一个替代品：`noexcept`.

> 4.`construct()`成员函数将是完美转发（到被调用的构造函数）的理想候选者。这是编写符合 C++11 的分配器的方法吗？

是的。不过`allocator_traits`会为你做。让它。std::lib 已经为您调试了该代码。C++11 容器将调用`allocator_traits<YourAllocator>::construct(your_allocator, pointer, args...)`. 如果你的分配器实现了这些函数，allocator_traits 将调用你的实现，否则它会调用一个经过调试的、高效的默认实现。

> 5\. 为了使当前代码符合 C++11，还需要进行哪些其他更改？

说实话，这个分配器并不真正符合 C++03 或 C++11。当您复制分配器时，原件和副本应该彼此相等。在这个设计中，这绝不是真的。然而，这件事仍然恰好在许多情况下起作用。

如果你想让它严格符合，你需要另一个间接级别，这样副本将指向同一个缓冲区。

除此之外，C++11 分配器比 C++98/03*分配器*更容易构建。这是您必须做的最低要求：

```
template <class T>
class MyAllocator
{
public:
    typedef T value_type;

    MyAllocator() noexcept;  // only required if used
    MyAllocator(const MyAllocator&) noexcept;  // copies must be equal
    MyAllocator(MyAllocator&&) noexcept;  // not needed if copy ctor is good enough
    template <class U>
        MyAllocator(const MyAllocator<U>& u) noexcept;  // requires: *this == MyAllocator(u)

    value_type* allocate(std::size_t);
    void deallocate(value_type*, std::size_t) noexcept;
};

template <class T, class U>
bool operator==(const MyAllocator<T>&, const MyAllocator<U>&) noexcept;

template <class T, class U>
bool operator!=(const MyAllocator<T>&, const MyAllocator<U>&) noexcept; 
```

您可以选择考虑使`MyAllocator`Swappable 并将以下嵌套类型放入分配器中：

```
typedef std::true_type propagate_on_container_swap; 
```

您可以在 C++11 分配器上调整其他一些类似的旋钮。但是所有的旋钮都有合理的默认值。

**更新**

上面我注意到，由于副本不相等，我的[堆栈分配器不符合要求。](http://howardhinnant.github.io/stack_alloc.h)我决定将此分配器更新为符合 C++11 的分配器。新的分配器称为[short_allocator](http://howardhinnant.github.io/short_alloc.h)，并[在此处](http://howardhinnant.github.io/stack_alloc.html)记录。

[short_allocator](http://howardhinnant.github.io/short_alloc.h)与[堆栈分配器](http://howardhinnant.github.io/stack_alloc.h)的不同之处在于“内部”缓冲区不再位于分配器内部，而是现在可以位于本地堆栈上或给定线程或静态存储持续时间的单独“竞技场”对象。虽然`arena`不是线程安全的，但请注意这一点。如果你愿意，你可以让它成为线程安全的，但这会带来递减的回报（最终你会重新发明 malloc）。

这是符合要求的，因为分配器的副本都指向同一个 external `arena`。请注意，`N`现在的单位是字节，而不是数量`T`。

通过添加 C++98/03 样板（typedef、构造成员、销毁成员等），可以将此 C++11 分配器转换为 C++98/03 分配器。一项乏味但简单的任务。

[新的short_allocator](http://howardhinnant.github.io/short_alloc.h)的这个问题的答案保持不变。

# joomla - Joomla！Yoothemes Carousel 拒绝加载超过 4 张幻灯片

> ID：11648203
> 
> 赞同：0
> 
> 时间：2012-07-25T10:58:17.513
> 
> 标签：joomla, joomla1.5, carousel

我在这里发起了一个论坛主题：http: [//forum.joomla.org/viewtopic.php?f=472](http://forum.joomla.org/viewtopic.php?f=472&t=716885) &t=716885但没有任何回复。我有一个 Joomla！1.5 站点，其中 Yootheme Carousel 模块用于旋转横幅图像。我添加了六个，并在 Yootheme 轮播设置中调整了要加载的幻灯片数量。但不知何故，它会继续加载几年前添加的初始版本，而不是新版本。我没有看到任何 404 错误，我相信文件权限很好。即使`CHMOD 755`只加载了最初的旧四个，但没有加载最后两个。有任何想法吗？

**滑块的更新 I** 缓存已关闭，重新加载后两个额外的图像仍未加载。想知道模块是否存储新值..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:01:22.560

找到一个缺少步骤的[视频教程](http://www.youtube.com/watch?v=2T4LggLnjpU)。不足以将图像添加到媒体/画板/大。我还必须将它集成到一篇文章中，其中包含 Artboard 和 Category large 部分。

# html - 如何将网站与 Google+ 链接以启用右窗格片段进行自然搜索？

> ID：11648206
> 
> 赞同：0
> 
> 时间：2012-07-25T10:58:36.137
> 
> 标签：html, seo, google-plus, rich-snippets

有一些网站在右侧有漂亮的 Google+ 代码段。

示例（用红色标记）：

![在此处输入图像描述](../Images/351782cb9f6dc777a5d4f8ac28ae044c.png)

如何启用显然与“Rich Snippet”或“schema.org snippet”不同的片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:02:10.127

这很像“相关的附加链接”，因为谷歌只会在感觉喜欢时才显示它。有多种方法可以启用此功能，但您可以通过遵循以下四个 G 开发指南之一来确保 G 拥有数据：

[https://developers.google.com/+/plugins/snippet/](https://developers.google.com/+/plugins/snippet/)

# java - 将参数注入 Beans，CDI bean VS JSF bean

> ID：11648207
> 
> 赞同：2
> 
> 时间：2012-07-25T10:58:38.840
> 
> 标签：java, jsf, cdi, code-injection

经过一些试验，我已经能够使用和一些 EL将我的 GET 参数注入到一个`@ManagedBean`（因此，一个 JSF）bean 中。`@ManagedProperty`

现在，除了从 读取参数映射的方法之外`FacesContext.getCurrentInstance().getExternalContext()`，我还无法将我的 GET 参数注入`@Named`（因此是 CDI-）bean。

因此，我一直在阅读 JSF bean 和 CDI bean 的优缺点。简而言之，我遇到了两个问题：第一个。在使用 JSF bean 而不是 CDI bean 时我会遇到任何缺点吗？第二。如果是这样，是否有一种干净的方法可以将我的 GET 参数注入 CDI bean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:52:48.753

我希望我不会在这里引发一场激烈的战争，但可以肯定地说，CDI 作用域和依赖注入机制比 JSF 作用域涵盖的领域要多得多。一般来说，您最好使用 CDI 范围 - 但在这里可以进入几乎任意的细节。

关于你的问题：[Seam Solder](http://www.seamframework.org/Seam3/SolderHome)带来了——除此之外——http-parameter-injection。看看[这个](http://docs.jboss.org/seam/3/3.1.0.Final/reference/en-US/html/injectablerefs.html#injectablerefs.request_param)。

**更新：** 如果您害怕将 Solder 集成到您的项目中（不要这样！），请查看具有魔力的[相关源代码。](https://github.com/seam/solder/blob/develop/impl/src/main/java/org/jboss/solder/servlet/http/RequestParamProducer.java)您可以轻松地将其复制到您的项目中 - 只是 Solder 背后的开发人员在他们的脑海中比您当场可能想出的要多一些。

# java - 在 JFrame 中切换面板

> ID：11648208
> 
> 赞同：4
> 
> 时间：2012-07-25T10:59:02.633
> 
> 标签：java, swing, user-interface

我有 2 个 JPanel 和 1 个 JFrame，当我单击一个按钮时，我试图在面板之间切换。我不想使用 CardLayout，因为我想要不同的面板，而使用 CardLayouts，我只能为两者使用相同的按钮. 我的代码是：

```
package javaapplication2;

import javax.swing.JPanel;

public class NewJFrame extends javax.swing.JFrame {
/**
 * Creates new form NewJFrame
 */JPanel panel1 = new JPanel();
 JPanel panel2 = new JPanel();
public NewJFrame() {
    initComponents();
}

private void initComponents() {

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setBackground(new java.awt.Color(121, 183, 60));
    setSize(200, 300);
    setResizable(false);

    /**panel1**/
     jButton1 = new javax.swing.JButton();

    jButton1.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jButton1MouseClicked(evt);
        }
    });
    jButton1.setText("jButton1");
     panel1.setBackground(new java.awt.Color(121, 183, 60));
    panel1.setMaximumSize(new java.awt.Dimension(100, 200));
    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(panel1);
    panel1.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(164, 164, 164)
            .addComponent(jButton1)
            .addContainerGap(172, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(115, 115, 115)
            .addComponent(jButton1)
            .addContainerGap(158, Short.MAX_VALUE))
    );

    /**panel2**/

       jButton2 = new javax.swing.JButton();

    jButton2.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jButton2MouseClicked(evt);
        }
    });
    jButton2.setText("jButton2");
     panel2.setBackground(new java.awt.Color(101, 13, 61));
    panel2.setMaximumSize(new java.awt.Dimension(100, 200));
    javax.swing.GroupLayout layout2 = new javax.swing.GroupLayout(panel2);
    panel2.setLayout(layout2);
    layout2.setHorizontalGroup(
        layout2.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout2.createSequentialGroup()
            .addGap(164, 164, 164)
            .addComponent(jButton2)
            .addContainerGap(172, Short.MAX_VALUE))
    );
    layout2.setVerticalGroup(
        layout2.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout2.createSequentialGroup()
            .addGap(115, 115, 115)
            .addComponent(jButton2)
            .addContainerGap(158, Short.MAX_VALUE))
    );
   add(panel2);
    pack();
}

public void changePanel(){
    getContentPane().removeAll();
    add(panel1);
    invalidate();
    repaint();
}

private void jButton1MouseClicked(java.awt.event.MouseEvent evt) {
    changePanel();
}
 private void jButton2MouseClicked(java.awt.event.MouseEvent evt) {
    changePanel();
}

private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T15:12:11.243

这是一个可以帮助您的小例子：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CardLayoutExample
{
    private JPanel contentPane;
    private MyPanel panel1;
    private MyPanel2 panel2;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Card Layout Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setBorder(
            BorderFactory.createEmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new CardLayout());
        panel1 = new MyPanel(contentPane);
        panel2 = new MyPanel2(contentPane);
        contentPane.add(panel1, "Panel 1"); 
        contentPane.add(panel2, "Panel 2");
        frame.setContentPane(contentPane);
        frame.pack();   
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new CardLayoutExample().displayGUI();
            }
        });
    }
}

class MyPanel extends JPanel 
{
    private JButton jcomp4;
    private JPanel contentPane;

    public MyPanel(JPanel panel) 
    {
        contentPane = panel;
        setOpaque(true);
        setBackground(Color.RED.darker().darker());
        //construct components
        jcomp4 = new JButton ("openNewWindow");
        jcomp4.addActionListener( new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                CardLayout cardLayout = (CardLayout) contentPane.getLayout();
                cardLayout.next(contentPane);
            }
        });
        add(jcomp4);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }
}

class MyPanel2 extends JPanel 
{

    private JButton jcomp1;
    private JPanel contentPane;

    public MyPanel2(JPanel panel) 
    {   
        contentPane = panel;

        setOpaque(true);
        setBackground(Color.GREEN.darker().darker());

        //construct components
        jcomp1 = new JButton ("Back");
        jcomp1.addActionListener( new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                CardLayout cardLayout = (CardLayout) contentPane.getLayout();
                cardLayout.next(contentPane);
            }
        });

        add(jcomp1);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }
} 
```

**最新编辑**

展示`JPanel`您的选择，在里面`CardLayout`

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CardLayoutExample
{
    private JPanel contentPane;
    private MyPanel panel1;
    private MyPanel2 panel2;
    private MyPanel2 panel3;
    private JComboBox choiceBox;
    private String[] choices = {
                                "Panel 1",
                                "Panel 2",
                                "Panel 3"
                               };

    private void displayGUI()
    {
        JFrame frame = new JFrame("Card Layout Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setBorder(
            BorderFactory.createEmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new CardLayout());

        choiceBox = new JComboBox(choices);        

        panel1 = new MyPanel(contentPane, this);
        panel2 = new MyPanel2(contentPane
                , Color.GREEN.darker().darker(), this);
        panel3 = new MyPanel2(contentPane
                , Color.DARK_GRAY, this);   

        contentPane.add(panel1, "Panel 1"); 
        contentPane.add(panel2, "Panel 2");
        contentPane.add(panel3, "Panel 3");         

        frame.getContentPane().add(choiceBox, BorderLayout.PAGE_START);
        frame.getContentPane().add(contentPane, BorderLayout.CENTER);       
        frame.pack();   
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public JComboBox getChoiceBox()
    {
        return choiceBox;
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new CardLayoutExample().displayGUI();
            }
        });
    }
}

class MyPanel extends JPanel 
{
    private JButton jcomp4;
    private JPanel contentPane;
    private JComboBox choiceBox;

    public MyPanel(JPanel panel, CardLayoutExample cle) 
    {
        choiceBox = cle.getChoiceBox();
        contentPane = panel;
        setOpaque(true);
        setBackground(Color.RED.darker().darker());
        //construct components
        jcomp4 = new JButton ("Show New Panel");
        jcomp4.addActionListener( new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                String changeToPanel = (String) choiceBox.getSelectedItem();
                CardLayout cardLayout = (CardLayout) contentPane.getLayout();
                cardLayout.show(contentPane, changeToPanel);
            }
        });
        add(jcomp4);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }
}

class MyPanel2 extends JPanel 
{

    private JButton jcomp1;
    private JPanel contentPane;
    private Color backgroundColour;
    private JComboBox choiceBox;

    public MyPanel2(JPanel panel, Color c, CardLayoutExample cle) 
    {   
        contentPane = panel;
        backgroundColour = c;
        choiceBox = cle.getChoiceBox();

        setOpaque(true);
        setBackground(backgroundColour);

        //construct components
        jcomp1 = new JButton ("Show New Panel");
        jcomp1.addActionListener( new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                String changeToPanel = (String) choiceBox.getSelectedItem();
                CardLayout cardLayout = (CardLayout) contentPane.getLayout();
                cardLayout.show(contentPane, changeToPanel);
            }
        });

        add(jcomp1);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }
} 
```

# caching - 使用 Windows 7 的 XAMPP 上的 Kohana 3.2 错误：目录 APPPATH\cache 必须是可写的

> ID：11648213
> 
> 赞同：4
> 
> 时间：2012-07-25T10:59:11.117
> 
> 标签：caching, xampp, kohana

当我查看使用 Kohana 3.2 创建的网站时，会出现错误“Kohana_Exception [ 0 ]: Directory APPPATH\cache must be writable”。

我使用带有 XAMPP 的 Windows 7 并且不知道该怎么做。

因为目录“logs”是可写的，这个目录没有问题，但是缓存目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:27:59.300

please give 777 permission for application/logs folder.

also give 777 permission for application/cache folder.

mod_rewrite and Curl Should be enabled for kohana. These are all are basic requirements of kohana.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-24T07:49:52.710

哦，是的，我昨天读了某人的答案，但我今天才弄清楚。我所做的是这样的：

*   进入**应用程序/**
*   创建一个新的文件夹**缓存/**
*   进入**缓存/**
*   创建一个*空的文本文件*。（我创建了**empty.txt**）

然后就是这样。希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:20:43.680

您的应用程序文件夹中是否存在文件夹“缓存”？

# android - 如何以编程方式读出在 Android 中选择了哪个语音识别？

> ID：11648216
> 
> 赞同：4
> 
> 时间：2012-07-25T10:59:15.503
> 
> 标签：android, speech-recognition

我想读出手机中选择的语音识别。

默认情况下，已安装并选择 Google 语音搜索。

一些设备还安装了 Vlingo 语音识别。

如何以编程方式读出选择了哪个语音识别？

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T19:03:30.423

如果您没有找到解决方案，您需要执行以下操作：

```
final List<ResolveInfo> services = context.getPackageManager().queryIntentServices(
        new Intent(RecognitionService.SERVICE_INTERFACE), 0);

String packageName = "";
String serviceName = "";

for (final ResolveInfo info : services) {

    packageName = info.serviceInfo.packageName;
    serviceName = info.serviceInfo.name;

    if (packageName != null && serviceName != null) {
    // Do something with the output here
    }
} 
```

[这是我从这个答案](https://stackoverflow.com/a/15415208/1256219)中使用的改编。

# xaml - 尝试为自定义枚举依赖属性设置动画时出现“灾难性失败”

> ID：11648217
> 
> 赞同：1
> 
> 时间：2012-07-25T10:59:24.887
> 
> 标签：xaml, windows-8, winrt-xaml

在处理托管自定义 Windows 8 控件时，我遇到了“灾难性故障”异常，我已经设法将问题本地化为一个非常简单的测试用例。现在我被困住了。

假设我有一个这样定义的枚举：

```
public enum Modes
{
  Mode1,
  Mode2
} 
```

然后我有一个自定义控件，其依赖属性定义如下

```
public Modes Mode
{
    get { return (Modes)GetValue(ModeProperty); }
    set { SetValue(ModeProperty, value); }
}

// Using a DependencyProperty as the backing store for Mode.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty ModeProperty =
    DependencyProperty.Register("Mode", typeof(Modes), typeof(CustomControl1), new PropertyMetadata(Modes.Mode1)); 
```

我尝试通过 VisualState 将属性从 Mode1 切换到 Mode2，如下所示：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="VisualStateGroup">
        <VisualState x:Name="VisualState">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(CustomControl1.Mode)" Storyboard.TargetName="customControl1">
                    <DiscreteObjectKeyFrame KeyTime="0">
                        <DiscreteObjectKeyFrame.Value>
                            <local:Modes>Mode2</local:Modes>
                        </DiscreteObjectKeyFrame.Value>
                    </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

为此，我只需在单击按钮时调用 GoToState() ：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    VisualStateManager.GoToState(this, "VisualState", false);
} 
```

我得到了臭名昭著的“灾难性故障（HRESULT 异常：0x8000FFFF（E_UNEXPECTED））”

我试图在 Silverlight 中创建完全相同的测试用例，它工作得很好。这是 Windows 8 XAML RC 错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:02:28.307

Alan - 不幸的是，这个（自定义枚举）不适用于 WinRT。

# android - 自定义警报对话框未定义的方法

> ID：11648222
> 
> 赞同：1
> 
> 时间：2012-07-25T10:59:47.233
> 
> 标签：android, dialog, android-alertdialog

我是 android 新手，我正试图让这个自定义对话框工作，我收到一个错误`showDialog`&上面`removeDialog`写着 The method `removeDialog(int)`is undefined for the type `new DialogInterface.OnClickListener`。

`onReceive`方法：

```
showDialog(DIALOG_TEXT_ENTRY); 
```

代码：

```
 private static final int MY_PASSWORD_DIALOG_ID = 0;

    MediaPlayer mp;
    Context context;   

    protected Dialog onCreateDialog(int id, Context context) {

        Dialog dialog = null;
        switch(id) {
        case MY_PASSWORD_DIALOG_ID:
            LayoutInflater factory = LayoutInflater.from(context);

            final View textEntryView = factory.inflate(R.layout.password_dialog, null);

            final EditText password1 = (EditText) textEntryView.findViewById(R.id.inputPassword);

            AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setTitle("Enter Password");
            builder.setView(textEntryView);

            builder.setPositiveButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int whichButton) {
                      removeDialog(MY_PASSWORD_DIALOG_ID);
                   }
                });

                AlertDialog passwordDialog = builder.create();
                return passwordDialog; 
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:03:22.223

利用

```
dialog.dismiss(); 
```

代替

```
removeDialog(MY_PASSWORD_DIALOG_ID); 
```

您不能在 BroadcastReceiver 中显示对话框。

但是，如果你想显示一个弹出屏幕，那么创建一个带有对话框主题的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:19:46.803

你也可以使用

```
builder.setPositiveButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int whichButton) {
                       dialog.cancel(); 
                   }
                }); 
```

点击按钮应该可以正常工作

也可以参考这个链接

[http://developer.android.com/guide/topics/ui/dialogs.html#AddingButtons](http://developer.android.com/guide/topics/ui/dialogs.html#AddingButtons)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:05:37.580

你应该使用`dialog.dismiss();`而不是你的 removeDialog() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:06:06.077

见下文。使用**解雇（）；**

```
builder.setPositiveButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
   public void onClick(DialogInterface dialog, int whichButton) {
      dismiss();
   }
}; 
```

这样叫`showDialog(MY_PASSWORD_DIALOG_ID);`

请参阅此[创建自定义对话框教程](http://android-coding.blogspot.in/2011/05/create-custom-dialog-with-dynamic.html)

```
@Override
protected Dialog onCreateDialog(int id) {
 // TODO Auto-generated method stub

 screenDialog = null;
 switch(id){
 case(ID_SCREENDIALOG):
  screenDialog = new Dialog(this);
  screenDialog.setContentView(R.layout.screendialog);
  bmImage = (ImageView)screenDialog.findViewById(R.id.image);
  TextOut = (TextView)screenDialog.findViewById(R.id.textout);
  btnScreenDialog_OK = (Button)screenDialog.findViewById(R.id.okdialogbutton);
  btnScreenDialog_OK.setOnClickListener(btnScreenDialog_OKOnClickListener);
 }
 return screenDialog;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T13:09:57.007

使用 dialog.dismiss();

请参考以下链接 [http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

# html - 表格未正确对齐

> ID：11648226
> 
> 赞同：0
> 
> 时间：2012-07-25T10:59:58.717
> 
> 标签：html, css, html-table

我有一个烦人的问题，同一张桌子在不同的分辨率下表现不同。作为页面一部分的一个表可以正常工作，并且所有内容都对齐得很好。不起作用的是全宽，因为它是要打印的，所以它在单独的页面中。问题出现在“lorem ipsum”表格单元格与“好/优秀”单元格未正确对齐的技能和语言部分。修复可能是增加“entry_data”类的字体大小，但我希望它的大小更小。您可以建议在这里更改什么以修复它，因为我希望它可以正常工作？

HTML 代码

```
 <table id="cv_table_p">
        <tbody>
            <tr>
                <td class="cv_head" colspan="4">Education</td>    
            </tr>
            <tr>
                <td colspan="2">
                    <ul>
                        <li class="entry_head">lorem ipsum</li>
                        <li class="entry_data">lorem ipsum</li>
                        <li class="entry_data">lorem ipsum</li>
                    </ul>
                </td>
                <td colspan="2">
                    <ul>
                        <li class="entry_head">lorem ipsum</li>
                        <li class="entry_data">lorem ipsum</li>
                        <li class="entry_data">lorem ipsum</li>
                    </ul>
                </td>
            </tr>                
            <tr>
                <td class="cv_head" colspan="4">Experience</td>    
            </tr> 
            <tr>
                <td colspan="4">
                    <ul>
                        <li class="entry_head">lorem ipsum</li>
                        <li class="entry_data">lorem ipsum</li>
                        <li class="entry_data">lorem ipsum</li>
                    </ul>
                    <p>lorem ipsumlorem ipsumlorem ipsumlorem ipsum</p>         
                </td>
            </tr>
            <tr>
                <td class="cv_head" colspan="4">Skills<span>Basic/Good/Excellent</span></td>    
            </tr>
            <tr>
                <td colspan="1" class="entry_head">
                    <ul>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>                            
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                    </ul>
                </td>
                <td colspan="1" class="entry_data">
                    <ul>
                        <li>Good</li>
                        <li>Excellent</li>
                        <li>Good</li>
                        <li>Good</li>
                        <li>Good</li>
                        <li>Excellent</li>
                        <li>Excellent</li>
                        <li>Excellent</li>
                    </ul>
                </td>
                <td colspan="1" class="entry_head">
                    <ul>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                    </ul>
                </td>
                <td colspan="1" class="entry_data">
                    <ul>
                        <li>Excellent</li>
                        <li>Excellent</li>
                        <li>Good</li>
                        <li>Excellent</li>
                        <li>Excellent</li>
                        <li>Basic</li>
                        <li>Good</li>
                        <li>Excellent</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="cv_head" colspan="4">Languages<span>Basic/Good/Fluent</span></td>    
            </tr>
            <tr>
                <td colspan="1" class="entry_head">
                    <ul>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                    </ul>
                </td>  
                <td colspan="1" class="entry_data">
                    <ul>
                        <li>Fluent</li>
                        <li>Good</li>
                        <li>Basic</li>
                    </ul>
                </td>                   
                <td colspan="1" class="entry_head">
                    <ul>
                        <li>lorem ipsum</li>
                        <li>lorem ipsum</li>
                        <li>&nbsp;</li>
                    </ul>
                </td>                   
                <td colspan="1" class="entry_data">
                    <ul>
                        <li>Basic</li>
                        <li>Basic</li>
                        <li>&nbsp;</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="cv_head" colspan="4">Awards</td>    
            </tr> 
            <tr>
                <td colspan="4">
                    <ul>
                        <li class="entry_head">lorem ipsumlorem ipsumlorem ipsum</li>
                        <li class="entry_data">lorem ipsumlorem ipsumlorem ipsumlorem ipsum</li>
                        <li class="entry_data">lorem ipsumlorem ipsumlorem ipsumlorem ipsum</li>
                    </ul>
                    <p>lorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsum</p>          
                </td>
            </tr>
        </tbody>
    </table> 
```

CSS 代码

```
body {
    margin:0px;
}
h3 {
    margin-top:10px;
}
#cv_table_p {
    border-collapse:collapse;
    width:100%;
    border: 1px solid #DCDCDC;
    margin-top:10px;
    float:left;
    margin-bottom:50px;
}
#cv_table_p td {
    width:25%;
    padding:0;
    border: 1px solid #DCDCDC;
}
#cv_table_p .cv_head {
    background:#DCDCDC;
    font-size:1.125em;
    padding:5px;
}
#cv_table_p .cv_head  span{
    font-size:0.75em;
    float:right;
}
#cv_table_p ul {
    list-style:none;
    padding:0;
    margin:0;
}
#cv_table_p ul li {}
#cv_table_p .entry_head {
    background: #EEEEEE;
    padding:5px;
}
#cv_table_p .entry_data {
    font-size:0.825em;
    padding-left:5px;
    color:#4D4D4D;
    padding:3px 3px 3px 5px;
}
#cv_table_p p {
    line-height:150%;
    padding:0 5px 0 5px;
    font-size:0.9375em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:03:36.857

```
#cv_table_p .entry_head {
    background: #EEEEEE;
    padding:5px;
    line-height:21px;

}
#cv_table_p .entry_data {
    font-size:0.825em;
    padding-left:5px;
    color:#4D4D4D;
    padding:3px 3px 3px 5px;
    vertical-align:top;
    line-height:21px;
} 
```

# c# - 实体框架：删除列后列无效

> ID：11648227
> 
> 赞同：13
> 
> 时间：2012-07-25T11:00:00.103
> 
> 标签：c#, entity-framework

我有一个在实体框架中映射的表，它可以很好地添加/更新和删除记录。我从 SQL 服务器中删除了一个名为“Category”的列，然后在模型中重新映射了我的实体。这工作正常，列消失了。

现在，我在表上运行查询以更新一行并得到相同的错误，无效列“类别”。

这已从 SQL 表中删除并从实体中删除，那么当我运行以下代码时，它还在寻找这个该死的列吗？

```
using (Entities db = new Entities())
                { 
                       var Voucher = (from vouchers in db.Vouchers
                                 where vouchers.ID == ID
                                 select vouchers).FirstOrDefault();

                       if (Voucher != null)
                       {
                           Voucher.Status = (int)Vouchers.UI.Enums.VoucherStatus.Removed;                           
                           ret = db.SaveChanges() == 1;
                       }
                } 
```

这是错误：

列名“类别”无效。

我已经清理了代码、构建、重新构建和更新了大约 100 次实体。

有没有人有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-25T11:02:47.857

从 *.EDMX 文件中删除该表，然后将该表再次添加到 *.EDMX 文件中

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-24T23:33:03.227

我曾经也删除并重新添加表格，但从来没有这样。我宁愿做什么。我关闭模型。右键单击并以 XML 格式打开，然后他们手动删除此引用。因此，它使我在一个模型中的多个图表以及我定义的颜色保持不变。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-16T14:49:49.990

不需要从 *.EDMX 文件中删除整个表格，只需从 *.EDMX 文件中删除不必要的字段。它帮助了我

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-01T14:24:16.533

我也遇到了同样的问题，我通过从设计视图 .edmx 文件中删除列来解决。其他选项是前面在帖子中提到的，您删除表并将其重新添加到您的 .edmx 文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-19T19:15:14.337

另一种解决方案是在实体框架图中找到该表，然后删除“类别”列并保存模型文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-03T10:20:20.537

[![在此处输入图像描述](../Images/406ef38662c621c55f0cb58129f9d1ca.png)](https://i.stack.imgur.com/CNH9D.png)

打开 Edmx -> 右键单击​​表格列 -> 选择从模型中删除

# javascript - Facebook js sdk 无法检索登录用户的名称

> ID：11648230
> 
> 赞同：1
> 
> 时间：2012-07-25T11:00:14.583
> 
> 标签：javascript, facebook, facebook-javascript-sdk, app-id

我正在使用 facebook JS SDK。我目前登录 facebook，我的代码如下：

```
$(document).ready(function() {

   FB.init({
      appId: "myappID",
       xfbml: true
   });

   FB.api('/me', function(response) {
      alert(response.name);
   });

}); 
```

我收到的警报说“未定义”。为什么 ？有没有办法获得 Facebook 唯一的 app-id ？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:03:16.363

因为你还没有授权你的应用。

用于`FB.login`首先登录您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:57:00.153

> 我收到的警报说“未定义”。为什么 ？

很可能是因为您的用户帐户尚未*连接*到您的应用程序。

首先调用 FB.login，然后将 API 调用放入回调处理程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:25:07.087

我发现您在 jQuery 的 $(document).ready 中初始化 FB JS SDK 很奇怪。

你在做同步加载吗？如果您按照 Facebook 的说明进行操作，您实际上是在进行异步加载，这样会更好，因为不会阻止页面加载。在异步加载中，`<script>`包含 all.js（Facebook 的 JS SDK）的标签在 $(document).ready 事件触发后附加到文档 DOM。

因此，您正在尝试访问尚未定义的 js 对象 (FB)。最好按照 Facebook 文档中的说明将代码分配给 window.fbAsyncInit：

```
window.fbAsyncInit = function() {
    FB.init({
        appId: 'AppID',
        cookie: true, // I think you'll need this cookie to make the API call
        xfbml: true
    });

    // Additional initialization code here
    FB.api('/me', function(response) {
        alert(response.name);
    });
}; 
```

祝你好运！

# objective-c - 我可以仅使用 Interface Builder 将 nib 内容加载到 UIView 吗？

> ID：11648237
> 
> 赞同：2
> 
> 时间：2012-07-25T11:00:35.533
> 
> 标签：objective-c, ios, xcode, uiview, interface-builder

有谁知道在情节提要中从另一个 nib 加载 UIView 内容的方法？我知道我可以用代码轻松地做到这一点，但我正试图弄清楚如何在 IB 中做更多的事情。

我有一个带有主要 UI 布局的故事板，我有一个 UIScrollView，我想在 IB 中设计它的内容。我能弄清楚如何做到这一点的唯一方法是在自己的 .nib 中设计 UIView，但是我的问题是，如何在不编码的情况下加载 nib？这甚至可能吗？这对我来说似乎并不太牵强。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:36:06.323

我假设您只是想在 IB 中布置您的 UIScrollView，提到 .nib 是因为这是您正在探索的一种方法，但是如果您可以在情节提要中严格执行此操作，那将是可以接受的，如果不是更可取的话：

1.  首先，在 Xcode 中创建一个新文件，它是 UIScrollView 的子类。

2.  在情节提要中，将 UIScrollView 拖到要显示此滚动视图的场景（视图控制器）中。

3.  在身份检查器中，将 UIScrollView 的自定义类设置为 UIScrollView 的子类。

4.  通过 ctrl+将 UIScrollView 拖到它所显示的 ViewController 子类的 .h 文件中，为此 UIScrollView 创建一个出口。将其命名为 myScrollView

5.  在 ViewController 的 -viewDidLoad 方法中，将 UIScrollView 的 contentSize 属性设置为您想要的任何大小。所以它看起来像：

    self.myScrollView.contentSize = CGSizeMake(800,800);

6.  现在，将 UI 对象拖到您的 UIScrollView 和设计中。

7.  重要提示：为这些对象创建出口有点棘手。假设你拖出了一个 UILabel。您需要手动进入 UIScrollView 子类并添加到 .h

    @property（非原子，弱）IBOutlet UILabel* myLabel；

和.m

```
@synthesize myLabel = _myLabel; 
```

1.  现在您需要将大纲视图与情节提要一起显示在屏幕上，然后按 ctrl+从您的滚动视图拖动到您的标签以创建一个出口。这有点与你习惯的相反。

2.  现在您可以从 viewcontroller 或 scrollview 子类中引用该插座。例如，在 viewcontroller -viewDidLoad 你可以说：

    self.scrollView.myLabel.text = @"Hello World";

！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:24:11.670

如果您想要在 IB 的滚动视图中进行编辑，那会很痛苦，但可行。看看[我](https://stackoverflow.com/a/9933376/28275)对[这个问题](https://stackoverflow.com/questions/8809984/designing-inside-a-scrollview-in-xcode-4-2-with-storyboards)的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:11:52.333

在 IB 中添加一个通用 UIView，将其自定义类设置为您的 nib 文件的名称。

将 GradientControl 替换为您的 nib 文件的名称（减去“.xib”）。 ![截屏](../Images/a34581268f11ad2cb878b6d041128572.png)

# javascript - 我可以使数组列表适应 HTML 吗？

> ID：11648238
> 
> 赞同：2
> 
> 时间：2012-07-25T11:00:46.720
> 
> 标签：javascript, jquery, html, list

我目前正在创建一个拼写游戏，您可以将字母拖放到相应的单词上。目前我有一个动态生成网格的数组列表中的单词列表。

问题是当需要在游戏中添加新单词时，它们必须通过HTML添加，因为办公室的那一方不熟悉JavaScript/JQuery，也不愿意学习。

最好的方法是什么？

有没有办法可以通过 HTML 向脚本中的数组添加内容？

这是我目前的剧本...

```
var listOfWords = new Array();

listOfWords['mat'] = 'http://www.wav-sounds.com/cartoon/daffyduck1.wav';
listOfWords['cat'] = 'http://www.wav-sounds.com/cartoon/porkypig1.wav';
listOfWords['dog'] = 'http://www.wav-sounds.com/cartoon/bugsbunny1.wav';
listOfWords['pit'] = 'http://www.wav-sounds.com/cartoon/daffyduck1.wav';
listOfWords['pot'] = 'http://www.wav-sounds.com/cartoon/porkypig1.wav';
listOfWords['fog'] = 'http://www.wav-sounds.com/cartoon/daffyduck1.wav';
listOfWords['log'] = 'http://www.wav-sounds.com/cartoon/porkypig1.wav';
listOfWords['pan'] = 'http://www.wav-sounds.com/cartoon/bugsbunny1.wav';
listOfWords['can'] = 'http://www.wav-sounds.com/cartoon/bugsbunny1.wav';
listOfWords['man'] = 'http://www.wav-sounds.com/cartoon/porkypig1.wav';
listOfWords['pin'] = 'http://www.wav-sounds.com/cartoon/daffyduck1.wav';
listOfWords['gag'] = 'http://www.wav-sounds.com/cartoon/porkypig1.wav'; 
```

然后我有一个脚本，它采用数组列表项并动态创建一个网格。

```
var rndWord = null;
var guesses = new Array();
var shuffledWords = keys(listOfWords).slice(0).sort(function() {
return 0.5 - Math.random();
}).slice(0, 12);

 var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < Object.keys(shuffledWords).length - 1; i += wordsPerRow) {
var row = document.createElement('tr');

for (var j = i; j < i + wordsPerRow; ++j) {
    var word = shuffledWords[j];
    guesses[word] = [];

    for (var k = 0; k < word.length; ++k) {
        var cell = document.createElement('td');

        $(cell).addClass('drop').attr('data-word', word);
        cell.textContent = word[k];
        // IF FIREFOX USE cell.textContent = word[j]; INSTEAD
        row.appendChild(cell);
        }
    }
    tbl.appendChild(row);
}

document.body.appendChild(tbl); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:29:55.463

尽管[Zeta 的回答](https://stackoverflow.com/a/11648479/38055)可能会让您了解如何执行此操作，但我想说它并不能真正解决您的实际问题。正如你自己所说：

> 问题是当需要在游戏中添加新单词时，它们必须通过HTML添加，因为办公室的那一方不熟悉JavaScript/JQuery，也不愿意学习。

对我来说，这指出了您团队中更根本的困难，而不仅仅是如何在 HTML 中指定字典；您似乎正在与积极反对您的人合作。我看到了几种不同的方法来解决这种情况——其中一些比其他的更具挑衅性，而另一些则需要你做更多的工作。您必须自己判断其中哪些（如果有）适用于您...

*   **强迫他们学习。**并不是说他们必须是 jQuery 大师才能在字典中添加一个词——他们只需要学习一种特定的语法，你可以教他们。
    它们显然能够在 HTML 标记中指定字典，因此可以假定它们对某种形式的语法感到满意。我想说你的字典语法比 Zeta 建议的要简单得多，所以如果他们能学会一个，你应该可以教他们另一个。
    如果需要，请登上公司阶梯并与他们的经理交谈。他们不会喜欢它，但您的开发过程可能会。

*   **做他们的工作。**考虑通过重组谁在开发过程中做什么来简化整个过程。如果负责字典的团队无法将实际的键/值对添加到代码中，也许他们可以要求您为他们做这件事？向专用地址发送电子邮件，您每天检查几次并将相应的内容添加到代码中，这将是解决问题的一种方法。

*   **给他们写一个管理系统。**这包括您为创建和支持该功能所做的大量工作 - 但它可能会在其他事项上为您赢得一些善意。如果应用程序应该支持以后添加新单词，为什么不编写一个简单的服务，让他们从 Web 表单中将单词添加到字典中呢？您将所有内容存储在服务器上，并在需要时使用 AJAX 加载字典。其他团队不需要学习任何东西——他们只需在表格中输入信息，然后点击“发送”，就可以搞定。

**我的观点是**，如果你正在与一个不想在这样一个简单的事情上半途而废的团队合作，那么你面临的问题不仅仅是如何将这些单词放入列表中。我将专注于解决这里的*真正*问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T11:15:43.430

您可以在 DOM 中添加一个隐藏对象：

```
<ul style="display:none;" id="wordlist">
  <li data-word="mat" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav"></li>
  <li data-word="cat" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav"></li>
  <!-- data-xxx can be read with JS, node["data-xxx"] or jQuery: node.data("xxx") -->
</ul> 
```

然后，您可以使用 jQuery 或遍历所有元素`node.children`：

```
var listOfWords = {};

var ul = document.getElementById("wordlist");

var i;
for(i = 0; i < ul.children.length; ++i){
    listOfWords[ul.children[i].getAttribute("data-word")] = ul.children[i].getAttribute("data-audio");
}

console.log(listOfWords); 
```

[**演示**](http://jsfiddle.net/MZUwx/1/)

提示：请注意，您`listOfWords`实际上是一个对象而不是数组。数组仅支持整数索引并且应该用`.push`.

### 编辑：

请看一下[Tomas 的回答](https://stackoverflow.com/a/11648722/1139697)。虽然这种方法肯定可以让您的同事在不实际编写 JavaScript 的情况下添加或更改元素，但这实在是太费力了。无论哪种方式，他们都会询问您如何将元素添加到列表中。另见[丹尼斯的评论](https://stackoverflow.com/questions/11648238/can-i-make-an-array-list-adaptable-in-the-html/11648479#comment15433138_11648238)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:29:55.917

简而言之 - 不，你不能只使用 HTML

您需要编写简单的脚本来生成包含数组的 js 文件，并且您可以将此文件包含到您的 HTML 文件中。

基本上脚本可能如下所示：

```
<?php
    if (isset($_POST['code']) && isset($_POST['path'])){
        $string = "listOfWords['" . $_POST['code'] . "'] = '" . $_POST['path'] . "';"
        $fh = fopen('listofwords.js', 'a');
        fwrite($fh, $string);
        fclose($fh);
    }
?> 
<form action="" method="post">
    <input type="text" name="code" />
    <input type="text" name="path" />
    <input type="submit" value="Add code" />
</form> 
```

当然这个脚本只是用来添加的，如果你需要编辑/删除记录你应该根据你的需要重写脚本

# jquery - 动画容器高度以适应动态变化的图像高度 - 功能并不总是有效 - jQuery

> ID：11648245
> 
> 赞同：0
> 
> 时间：2012-07-25T11:01:06.903
> 
> 标签：jquery, jquery-animate

我现在正在建一个画廊。单击缩略图时，该图像的全尺寸版本显示在`div`. 所有图像的宽度相同，但高度不同。为了避免任何跳跃，我编写了脚本，使容器的高度动画以适应新的高度。

**编码：**

```
$(document).ready(function() {
    var thumb = $(".thumb");
    var bigImage = $("#big-image").find("img");
    var bigImageContainer = $("#big-image");

    thumb.click(function(e){
        var hrefToFull = $(this).find("a").attr("href"); // getting the fullsize link of clicked thumb
        var bigSrc = bigImage.attr("src"); // src of current big image
        var oldHeight = bigImage.height();

        e.preventDefault();

        bigImageContainer.css("height", oldHeight); // height = height of current img

        bigImage.fadeOut(500, function(){ // fading the image out
            bigImage.attr("src", hrefToFull); // changing src

            bigImage.load(function() { // when new image is loaded
                var newHeight = bigImage.height(); // height = height of new img
                bigImageContainer.animate({height:newHeight}, 600); // animate height
                bigImage.fadeIn(500); // fading it in again
            })
        });
    });
}); 
```

**它应该做什么：**

一开始我设置了一些变量，比如`div`包含大图和大图本身。单击拇指时，我会获得新大图像的 URL/src 和当前大图像的 URL/src。我还分配了一个变量来保存当前大图像的高度。然后我将容器的高度设置为当前图像的高度，虽然我不确定这是否真的需要。

然后，旧图像淡出，并用`src`新图像的源替换它的源。加载新图像时，我将它的高度分配给一个变量，并告诉父级的高度`div`应该被动画以匹配该高度。毕竟这一切，我淡入新的形象。

**它能做什么：**

实际上，它有效。但有时，动画只是停止工作。这会导致大图像与拇指重叠，或者导致大图像下方有很多空间。所以我的猜测是动画速度或`load`.

您看到此代码有什么不正确的地方吗？什么可能导致错误的动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:05:38.267

这可能是由于您的浏览器缓存了大图像，如果图像被缓存，`.load`则并不总是调用该函数。（*我相信这取决于浏览器是否决定调用它*）

我倾向于通过执行以下操作来解决此类问题

而不是这样的代码：

```
img.load(function() {
    //do some stuff once image loaded
}); 
```

我执行以下操作：

```
function doStuffToImage() {
    //do stuff to image
}

img.load(function() {
    doStuffToImage();
});

if(img.width() != 0)
    doStuffToImage(); 
```

由于`.load()`是异步的，您可能会发现在某些浏览器中 doStuffToImage 被调用了两次（一次是因为 if 语句，一次是因为某些浏览器即使在缓存的图像上也总是调用 .load）在这种情况下，您可能需要添加一个布尔标志来确定是否图像是否已处理。

# c - DEV-C++ 中的编译器错误

> ID：11648246
> 
> 赞同：0
> 
> 时间：2012-07-25T11:01:08.450
> 
> 标签：c, gcc, compiler-errors, gcc-warning, dev-c++

我编译了`#include <strsafe.h>`在我的 C 代码中声明的以下代码，并且在 DEV-C++ 中出现以下编译器错误。我想编译器中应该有一些选项来解决这个问题。有人可以帮助解决这个问题。

以下是我的示例代码，取自 MSDN 站点：

```
#include <windows.h>
#include <strsafe.h>

void ErrorExit(LPTSTR lpszFunction) 
{ 
    // Retrieve the system error message for the last-error code

    LPVOID lpMsgBuf;
    LPVOID lpDisplayBuf;
    DWORD dw = GetLastError(); 

    FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        dw,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPTSTR) &lpMsgBuf,
        0, NULL );

    // Display the error message and exit the process

    lpDisplayBuf = (LPVOID)LocalAlloc(LMEM_ZEROINIT, 
        (lstrlen((LPCTSTR)lpMsgBuf) + lstrlen((LPCTSTR)lpszFunction) + 40) * sizeof(TCHAR)); 
    StringCchPrintf((LPTSTR)lpDisplayBuf, 
        LocalSize(lpDisplayBuf) / sizeof(TCHAR),
        TEXT("%s failed with error %d: %s"), 
        lpszFunction, dw, lpMsgBuf); 
    MessageBox(NULL, (LPCTSTR)lpDisplayBuf, TEXT("Error"), MB_OK); 

    LocalFree(lpMsgBuf);
    LocalFree(lpDisplayBuf);
    ExitProcess(dw); 
}

void main()
{
    // Generate an error

    if(!GetProcessId(NULL))
        ErrorExit(TEXT("GetProcessId"));
} 
```

来自大量错误的错误样本。

```
154 26  C:\Documents and Settings\mkumar@hubino\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h   
[Error] expected '=', ',', ';', 'asm' or '__attribute__' before 'char'
155 26  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] expected '=', ',', ';', 'asm' or '__attribute__' before 'const'
156 1   C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__nullterminated'
156 33  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] expected '=', ',', ';', 'asm' or '__attribute__' before '*' token
157 26  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] expected '=', ',', ';', 'asm' or '__attribute__' before 'const'
158 26  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] expected '=', ',', ';', 'asm' or '__attribute__' before 'const'
164 38  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] expected '=', ',', ';', 'asm' or '__attribute__' before 'const'
165 38  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] expected '=', ',', ';', 'asm' or '__attribute__' before 'const'
166 38  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h
[Error] expected '=', ',', ';', 'asm' or '__attribute__' before 'const'
173 10  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name 'STRSAFE_PCNZCH'
174 10  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__in_range'
175 15  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__deref_out_range'
179 10  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name 'STRSAFE_PCNZWCH'
180 10  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__in_range'
181 15  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__deref_out_range'
193 5   C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__deref_in_opt_out'
194 17  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__deref_out_range'
200 5   C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__deref_in_opt_out'
201 17  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name '__deref_out_range'
207 30  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name 'STRSAFE_PCNZCH'
213 30  C:\Documents and Settings\mkumar\Desktop\DEVC\TEST-install-Driver-Difx\TO-DO\strsafe.h  
[Error] unknown type name 'STRSAFE_LPCSTR'
continues....... 
```

我收到上述错误的 strsafe.h 文件的一部分：

```
//
// These typedefs are used in places where the string is guaranteed to
// be null terminated.
//
typedef __nullterminated char* STRSAFE_LPSTR;
typedef __nullterminated const char* STRSAFE_LPCSTR;
typedef __nullterminated wchar_t* STRSAFE_LPWSTR;
typedef __nullterminated const wchar_t* STRSAFE_LPCWSTR;
typedef __nullterminated const wchar_t UNALIGNED* STRSAFE_LPCUWSTR;

//
// These typedefs are used in places where the string is NOT guaranteed to
// be null terminated.
//
typedef __possibly_notnullterminated const char* STRSAFE_PCNZCH;
typedef __possibly_notnullterminated const wchar_t* STRSAFE_PCNZWCH;
typedef __possibly_notnullterminated const wchar_t UNALIGNED* STRSAFE_PCUNZWCH;

// prototypes for the worker functions

STRSAFEWORKERAPI
StringLengthWorkerA(
    __in STRSAFE_PCNZCH psz,
    __in __in_range(<=, STRSAFE_MAX_CCH) size_t cchMax,
    __out_opt __deref_out_range(<, cchMax) size_t* pcchLength);

STRSAFEWORKERAPI
StringLengthWorkerW(
    __in STRSAFE_PCNZWCH psz,
    __in __in_range(<=, STRSAFE_MAX_CCH) size_t cchMax,
    __out_opt __deref_out_range(<, cchMax) size_t* pcchLength);

#ifdef ALIGNMENT_MACHINE
STRSAFEWORKERAPI
UnalignedStringLengthWorkerW(
    __in STRSAFE_PCUNZWCH psz,
    __in __in_range(<=, STRSAFE_MAX_CCH) size_t cchMax,
    __out_opt __deref_out_range(<, cchMax) size_t* pcchLength);
#endif  // ALIGNMENT_MACHINE

STRSAFEWORKERAPI
StringExValidateSrcA(
    __deref_in_opt_out STRSAFE_LPCSTR* ppszSrc,
    __inout_opt __deref_out_range(<, cchMax) size_t* pcchToRead,
    __in const size_t cchMax,
    __in DWORD dwFlags); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:30:33.893

__nullterminated、__out_opt、__in、__in_opt 和其他此类词是 Microsoft 特定的关键字。当您使用 gcc 时，您可以将它们定义为空宏，例如

```
#define __in
#define __deref_out_range(A,B)
... and so on 
```

在包含之前插入这些定义。

或者正如评论所建议的那样避免使用`<strsafe.h>`

编辑：

MinGW（来自[http://equation.com](http://equation.com)`strsafe.h`的 x64 构建）只需一个简单的命令就可以安静地（甚至使用 ）编译上面的代码：

```
gcc -c Test.cpp -o Test.exe -lstdc++ 
```

# ios - 全局访问 UIalertview 中的文本字段数据

> ID：11648248
> 
> 赞同：0
> 
> 时间：2012-07-25T11:01:19.713
> 
> 标签：ios, xcode, nsstring, uitextfield, uialertview

我创建了一个带有文本字段的警报视图，当我选择一个按钮时，必须访问插入到文本字段中的详细信息。这是我的代码

```
-(IBAction)addcart:(id)sender{

UIAlertView *customAlertView = [[UIAlertView alloc] initWithTitle:@"Enter Your quantity" message:@"" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:@"Cancel", nil];

txtfield = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 40.0, 260.0, 20.0)];

[txtfield setBackgroundColor:[UIColor whiteColor]];

[txtfield setKeyboardType:UIKeyboardTypeNumberPad];

[customAlertView addSubview:txtfield];

[customAlertView show];

[customAlertView release];   }

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex

if (buttonIndex == 0)
{
    NSString* str=txtfield.text;

    qtystr=str;
}

-(IBAction)showcontent:(id)sender{

NSLog(@"%@",qtystr);    } 
```

在这里 qtystr,txtfield 我创建了属性并合成了它..但我不知道我在哪里错过它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:08:17.697

如果`qtystr`是属性，`self.qtystr`请在引用它时使用。

（否则，使用断点`qtystr=str;`来查看赋值期间的值。）

# iphone - 正方体 OCR 在单点触控中

> ID：11648250
> 
> 赞同：1
> 
> 时间：2012-07-25T11:01:27.013
> 
> 标签：iphone, xamarin.ios, ocr

如何在 Iphone 的单点触控应用程序中实现 Tesseract OCR？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:18:57.100

首先，您需要将该库*移植*到 iOS 并作为**静态**库使用。Vikas 的答案（[Pocket-PCR](https://github.com/rcarlsen/Pocket-OCR)）可能会派上用场（但我没有尝试过）。

接下来，您需要为库创建 C# 绑定。

当 API 导出 C 函数时，您可以使用*普通*的.NET pinvokes，即使用[DllImport](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)属性。

`btouch`提供 Objective-C API 后，您可以使用该工具创建绑定。MonoTouch 网站上提供了[说明。](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types)

[但是（这对于Tesseract](http://code.google.com/p/tesseract-ocr/)来说似乎是这种情况）对于 C++ 库来说有点复杂。您需要先创建一个 C（或 Objective-C）库来导出您需要的功能，然后它们绑定您自己的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:08:18.273

要构建 tesseract 库，请下载源代码并针对 iPhone（arm 处理器）进行适当的编译。将库添加到 XCode 项目并构建。去这个链接试试........

[https://github.com/rcarlsen/Pocket-OCR](https://github.com/rcarlsen/Pocket-OCR)

# c# - 应用着色器效果后图片模糊

> ID：11648256
> 
> 赞同：5
> 
> 时间：2012-07-25T11:01:56.717
> 
> 标签：c#, wpf, pixel-shader

我在 WPF 中遇到了像素着色器的奇怪行为。

这个问题是 100% 可重现的，所以我写了一个小演示程序。[你可以在这里](http://ge.tt/3Y7EP0L/v/0?c)下载源代码。

万恶之源是一个名为 MyFrameworkElement 的小类：

```
internal sealed class MyFrameworkElement : FrameworkElement
{
    public double EndX
    {
        get
        {
            return (double)this.GetValue(MyFrameworkElement.EndXProperty);
        }
        set
        {
            this.SetValue(MyFrameworkElement.EndXProperty, value);
        }
    }

    public static readonly DependencyProperty EndXProperty =
        DependencyProperty.Register("EndX",
            typeof(double),
            typeof(MyFrameworkElement),
            new FrameworkPropertyMetadata(0d, FrameworkPropertyMetadataOptions.AffectsRender));

    protected override void OnRender(DrawingContext dc)
    {
        dc.DrawLine(new Pen(Brushes.Red, 2), new Point(0, 0), new Point(this.EndX, 100));
        dc.DrawLine(new Pen(Brushes.Green, 3), new Point(10, 300), new Point(200, 10));
    }
} 
```

如您所见，此框架元素呈现 2 行：下一行具有永久坐标，但上一行取决于 EndX 依赖属性。

所以这个框架元素是像素着色器效果的目标。为简单起见，我使用在[这里](http://bursjootech.blogspot.com/2008/06/grayscale-effect-pixel-shader-effect-in.html)找到的灰度着色器效果。所以我将 GrayscaleEffect 应用于 MyFrameworkElement。你可以看到结果，它看起来不错。

![](../Images/0ffe0bae343edee3a15d9d5b475e0738.png)

直到我大幅增加 EndX 属性。

![](../Images/46d3d8ab192e598b3c7dfb253b10118f.png)

小线模糊，大线没问题！

但是如果我删除灰度效果，所有的线条都会看起来像它们应该的那样。

![](../Images/e2108f8ab9656c1b4efd9e454234d16d.png)

任何人都可以解释这种模糊的原因是什么？或者更好的是如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:17:38.310

请注意，图像通常在垂直方向上是模糊的，但在水平方向上是锯齿状的。

由于着色器应用于光栅图像，而不是矢量，因此线条被光栅化为纹理。硬件通常支持最高 8198*8192 的纹理。在我的例子中，你所说的“模糊”出现在滑块值 16384 处。所以，我的 virtualBox 虚拟显卡最多支持 16384*16384。您的限制可能会有所不同。所以只要保持这个值低于那个值。

但奇怪的是，WPF 光栅化了整个图像，因为只有一小部分可见。所以还有另一个可能的原因，那就是着色器本身，但它被编译成二进制，所以我无法检查它。

更新：就我而言，它看起来是这样的： ![应用了着色器](../Images/f865089533f04fa1643e312c44dc9dcd.png)

看起来它是垂直过滤的，但不是水平过滤的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:25:29.523

使用自定义像素着色器，它必须创建一个中间位图，然后该纹理由像素着色器采样。

您正在创建大量渲染，因此您在渲染路径中遇到了一些限制。

一个快速的解决方法是剪辑您想要渲染的内容，如下所示：

```
Geometry clip = new RectangleGeometry(new Rect(0,0,this.ActualWidth, this.ActualHeight));

dc.PushClip(clip);

dc.DrawLine(new Pen(Brushes.Red, 2), new Point(0, 0), new Point(this.EndX, 100));
dc.DrawLine(new Pen(Brushes.Green, 3), new Point(200, 10), new Point(10, 300));

dc.Pop(); 
```

更新：

一种理论是，当位图超过最大纹理大小（可能会因您的显卡架构而异）时，它使用过滤器来缩放位图......所以它以不同大小通过像素着色器......然后它缩小到原始大小。

因此，缩放过滤器会根据您的位图的内容造成伪影（即水平线和垂直线比对角线更好地按比例缩小和放大）。

.NET 4 将其用于过滤的默认过滤器更改为较低质量的过滤器...双线性，而不是 Fant...也许这也会影响您获得的质量。

[http://10rem.net/blog/2010/05/16/more-on-image-resizing-in-net-4-vs-net-35sp1-bilinear-vs-fant](http://10rem.net/blog/2010/05/16/more-on-image-resizing-in-net-4-vs-net-35sp1-bilinear-vs-fant)

更新2：

这证实了我上面的想法。

如果您使用 Windows Performance Toolkit/Suite（Windows SDK 的一部分），那么您可以在增加滑块值的同时在橙色图中看到视频内存被吞噬，因为正在创建更大的中间位图纹理。它不断增加，直到达到极限，然后变得平坦……这就是像素化变得明显的时候。

![在此处输入图像描述](../Images/36fafca9ac0c46d78aef0d3a9e2bc53e.png)

更新3：

如果您将渲染模式设置为“软件渲染器”（第 0 层），那么您可以看到它如何处理如此大的视觉效果 - 伪影开始出现在不同的点......大概是因为纹理大小限制更大/与您的 GPU 不同。但是工件仍然出现，因为它在内部使用了双线性过滤器。

尝试使用 RenderOptions.SetBitmapScalingMode 将过滤器提升到 Fant 似乎不会以任何方式改变渲染质量（我猜是因为它在通过自定义像素着色器路径时不受尊重）。

将其放入 Application_Startup 以查看软件渲染器结果：

```
RenderOptions.ProcessRenderMode = RenderMode.SoftwareOnly; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:07:20.850

好的，我有这个！我用你的灰度效果反编译了库，还反编译了 WCF PresentationCore 库，以检查为什么**BlurEffect**在相同情况下可以完美运行。而且我发现**BlurEffect实现了****GrayscaleEffect**中不存在的抽象方法**Effect.GetRenderBounds**。我还注意到**GrayscaleEffect**是针对 PresentationCore v 3.0.0 构建的，其中 Effect 没有**GetRenderBound**。

 ******所以这是 WPF 第 3 版和第 4 版之间的不兼容。有三种方法可以修复它：

1.  如果您有**GrayscaleEffect**的源代码- 添加所需的方法并针对 4.0.0 版本的运行时进行编译。
2.  您可以将应用程序使用的运行时切换到版本 3.*。
3.  如果您没有**GrayscaleEffect**的来源但不能使用第三版运行时，请编写继承**Effect** (v4) 并实现缺失方法的**GrayscaleEffect包装器。**

 **我尝试了第二种方法，问题消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-27T14:36:46.037

老问题，但对于在应用自定义 ShaderEffect 后出现图像模糊问题的人可能有用。

还提到的问题 OP 可能与渲染内容的比例有关，在将 WPFShadersLibrary 中的 ShaderEffects 应用于普通窗口中的视频、文本和任何其他内容后，我遇到了类似的模糊问题。

我注意到图像向下移动了一点点，导致“像素分裂”，所以我为选定的 ShaderEffect 创建了两个新属性：XOffset 和 YOffset，并将它们应用到 HLSL（见下面的代码），然后绑定到 Sliders XAML：

```
float2 newPos;
newPos.x = uv.x + offsetX;
newPos.y = uv.y + offsetY; 
```

然后我尝试了一些任意偏移并能够重新对齐图片。仍然有一些最小的模糊（或细节损失），但结果明显更好。

目前这个解决方案存在问题，我不知道如何根据分辨率或窗口大小来预测偏移量。********

# matlab - 将单元格与矩阵Matlab的元素相乘

> ID：11648261
> 
> 赞同：2
> 
> 时间：2012-07-25T11:02:13.100
> 
> 标签：matlab, matrix, multiplication, cell-array

我有一个 1xm 单元阵列`A{}`，阵列的每个元素都是 NxN 矩阵和一个矩阵`W(N1,m)`。
我需要计算

```
Sum(j) = W(j,1)*A{1,1} + W(j,2)*A{1,2} 
```

我正在做以下事情：

```
for j=1:N1
  sum=false(N);  
  for k=1:m  
    sum = sum + W(j,k)*A{1,k};  
  end  
  Sum(j)=sum  
end 
```

或者更直观地： 有没有办法在不使用循环的情况下做到这一点？
`Matrix W(let's say N1=2)
|W11 W12||A{1,1}| = |W11*A{1,1} + W12*A{1,2}|
|W21 W22||A{1,2}| = |W21*A{1,1} + W22*A{1,2}|`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:20:33.563

要在没有 for 循环的情况下做到这一点，您可以强奸（请原谅表达式）[`arrayfun`](http://www.mathworks.com/help/techdoc/ref/arrayfun.html)命令：

```
w_func = @(j)arrayfun(@(k)(W(j, k) * A{k}), 1:m, 'Un', 0)
sum_func = @(x)sum(cat(3, x{:}), 3)
S = arrayfun(@(j)sum_func(w_func(j)), 1:N1, 'Un', 0); 
```

这将生成一个包含所有总和的元胞数组`S`，从`S{1}`到`S{N1}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:56:08.600

我对你想要做什么感到困惑，但如果我理解正确，这段代码应该可以工作：

```
temp = cell2mat(A);
a_sum = temp*repmat(eye(n),m,1); % this reduces A by performing sum like operation so [1 1 1 3;0 1 0 2]
                                 % becomes [2 4; 0 3]

Sum = W * a_sum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:18:18.367

我也不确定我是否理解了这个问题，但这里有一些代码需要考虑：

```
%# create some data resembling what you described
N = 2;
m = 4;
N1 = 5;
W = rand(N1,m);
A = cell(1,m); for i=1:m, A{i} = rand(N); end

%# do the multiplications
s = cell(N1,1);
for j=1:N1
    AA = cellfun(@times, A, num2cell(W(j,:)), 'UniformOutput',false);
    s{j} = sum(cat(3,AA{:}), 3);
end 
```

元胞数组`s`现在包含这样的结果：

```
s{j} = W(j,1)*A{1} + W(j,2)*A{2} + ... + W(j,m)*A{m} 
```

因此`s`是一个大小为 N1×1 的元胞数组，其中每个元胞包含一个 N×N 矩阵

# php - Simplepie 无法识别 wordpress RSS

> ID：11648262
> 
> 赞同：0
> 
> 时间：2012-07-25T11:02:33.693
> 
> 标签：php, wordpress, rss, blogger, simplepie

```
$feed->set_feed_url(array('http://chrisheadleand.com', 'http://glaciem-world.com/feed/'));
$feed->set_autodiscovery_level(SIMPLEPIE_LOCATOR_ALL); 
```

simplepie 中是否有任何理由为什么这些域不会解析为 HTML 页面？到目前为止，我唯一能够使用 simplepie 的 RSS 是 twitter RSS 提要

例如

```
 http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=thenextweb 
```

对于来自 wordpress 和博客网站的 rss 提要，我需要让它工作（使用自动检测）。

谁能指出我正确的方向？

干杯

CJ

* * *

更新

我想出了如何从 sinmplepie 获取错误消息

我现在正在获取以下信息

[http://www.clearthemist.com/test/](http://www.clearthemist.com/test/)

谁能解释这意味着什么以及我如何解决它。

我使用的网址是[http://chrisheadleand.com](http://chrisheadleand.com) - 它在 simplepies 网络演示中运行良好，但在我的网站上却不行。我尝试了两种不同版本的 simplepie，但没有更好的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:10:28.230

对此的简单回答是，如果 RSS 提要中的标题信息有点不合常规，那么 simplepie 就会出现问题。我卸载了最新版本的 wordpress，它运行良好。

为阅读喝彩！

# c# - C# 访问 HTTPS 文件

> ID：11648268
> 
> 赞同：1
> 
> 时间：2012-07-25T11:02:53.410
> 
> 标签：c#, https

我已经弄清楚（通过在使用我的 C# 应用程序时检查网站本身和网站的响应）有问题的网站不使用表单或 cookie 来进行安全连接，所以我想知道是否有人知道一种可能使用 SSL 证书或网站标头（我认为所有帐户中确实有 cookie）的方法，以允许登录然后下载某个文件。

我能否获得代码示例或使用标题登录网站的方法的链接是我所要求的，我拥有所有必要的凭据，只是没有使用它们的广泛知识。

谢谢一堆。

```
 public void downloadStuff()
    {
        string formUrl = "https://secure.website.co.nz/extension/Login.aspx";
        string formParams = string.Format("ctl00_main_Login1_UserName={0}&ctl00_main_Login1_Password={1}", "*********", "************");
        string cookieHeader;
        WebRequest req = WebRequest.Create(formUrl);
        req.ContentType = "application/x-www-form-urlencoded";
        req.Method = "POST";
        byte[] bytes = Encoding.ASCII.GetBytes(formParams);
        req.ContentLength = bytes.Length;
        using (Stream os = req.GetRequestStream())
        {
            os.Write(bytes, 0, bytes.Length);
        }
        WebResponse resp = req.GetResponse();
        cookieHeader = resp.Headers["Set-cookie"];

        string pageSource;
        string getUrl = "https://secure.website.co.nz/extension/Downloader.axd?x=stock-all";
        WebRequest getRequest = WebRequest.Create(getUrl);
        getRequest.Headers.Add("Cookie", cookieHeader);
        WebResponse getResponse = getRequest.GetResponse();
        using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
        {
            WebClient exeed = new WebClient();
            exeed.DownloadFileAsync(new Uri(@"https://secure.website.co.nz/extension/Downloader.axd?x=stock-all"), "test.txt");
            pageSource = sr.ReadToEnd();
        }
    } 
```

注意：也提出了这个问题，因为如果我所做的是正确的，我将不知道如何使用 cookie 来下载文件。如何捕获和使用 cookie 和/或标头的潜在示例代码将是最佳选择。谢谢，这是一个编辑！

# mysql - 如何在使用 MYSQL REGEX 首次出现一组可能的符号后获取第一个字母数字字符

> ID：11648270
> 
> 赞同：0
> 
> 时间：2012-07-25T11:02:53.367
> 
> 标签：mysql, regex

我在使用正则表达式时遇到了困难。我有一个 MYSQL 表，其中包含 ABC 标记的曲调，看起来有点像这样：

```
X: 1
T: Spórt
M: 6/8
L: 1/8
R: jig
K: Dmaj
|:AdF ~A3 | GBE ~G3 | AdF ~A3 |
GBE cde | AdF ~A3 | GBE ~G3 |
cdc A2G | EAA D3 :| 
```

我想在 MYSQL 中创建一个搜索功能，该功能将按开始音符的顺序列出曲调。在这种情况下，我需要返回`A`

大多数曲调都以以下任一开头： bar-line `|`，重复 bar-line`|:`或 no bar-line （这意味着我必须匹配第一行中包含 bar-lines 的第一个字符）

关于什么正则表达式可以做到这一点的任何建议？我发现正则表达式非常令人困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-03T00:21:55.373

尝试：`\|:?([A-Ga-g])`

*   `\|`火柴`|`
*   `:?``:`如果有一个匹配
*   `([A-Ga-g])`得到一个注释。

# c# - RichTextBox 中的 TextRange 构造函数性能

> ID：11648272
> 
> 赞同：2
> 
> 时间：2012-07-25T11:03:05.937
> 
> 标签：c#, wpf, textrange

我目前正在从事语法高亮和代码完成项目，并基于 RichTextBox 进行用户控制。我在适应 RTB 的工作方式和一切方面遇到了一些问题，但我设法进行了简单的语法突出显示。

简单意味着每次用户键入字符时我都会突出显示整个文本。它不应该很快或任何东西，但它**太慢了**。当我有大约 500 个字符的文本时，性能问题变得明显，并且我只对每个键入的字符进行一次传递（一次传递中调用了大约 100 次“colorInterval”函数）。

性能分析表明问题是 TextRange 构造函数需要大约 80% 以上的时间，并且我每次需要为文本间隔着色时都使用它：

```
private void colorInterval(TextPointer start, TextPointer end)
    {
        TextRange range = new TextRange(start, end);
        if(isFunction(range.Text)) colorAsFunction(range);
        if(isInQuotes(range.Text)) colorAsQuoted(range);
        ...
    } 
```

所以这是**我的问题**：

我这样做是不是做错了什么，或者有没有办法提高 TextRange 的性能，回收“范围”对象或类似的东西？还有什么其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:11:39.117

最简单的途径是（如您所建议的）重用该`TextRange`对象，如果它确实是占用您大部分时间的构造函数。`TextRange`属性`Start`和`End`是只读的，但有一个公共方法会`Select`更新两者，`TextPointer`就像您一直使用的构造函数一样获取两个对象。

```
protected TextRange range;

private void colorInterval(TextPointer start, TextPointer end)
{
  if (range == null)
    range = new TextRange(start, end);
  else
    range.Select(start, end);
  ...
} 
```

（注意在决定是否初始化变量之前检查空引用并不像`TextRange`在声明中实例化 a 那样简洁。不幸的是，`TextRange`没有公共的空构造函数，也`TextPointer`没有公共构造函数。你可以用一些虚拟值创建它您的类构造函数以避免此检查。）

上面，我说'如果它真的是构造函数'。显然，您正确完成的分析已经突出显示了构造函数，但它也可以很容易地成为构造函数和`Select`方法的通用例程。

假设您不`colorInterval`从多个线程调用，我会说这是一种比您目前节省时间更好的方法，因为（我猜想）`colorInterval`经常被调用并且后续`TextRange`对象的持续创建和垃圾收集它留下的肯定是一种低效率。

提出这个建议后，我强烈建议您远离每次想要对（例如）单个字符更改做出反应时扫描整个文档的模型。假设您的目标是 >= .net 3.5，则`RichTextBox`提供一个`TextChanged`事件，该事件报告一个`TextChange`对象列表，您可以从中计算出更改的位置（以及添加或删除的字符）。

Naturally, there will be some work here because any change is unlikely to completely encapsulate a highlighted range. The `TextRange` class has a method for finding the paragraphs in which the start and end of a range can be found, in case that helps. There's probably a case for storing details of each highlighted range so you can quickly check for intersection.

# jquery - 与 JsRender 动态模板渲染相关的问题

> ID：11648274
> 
> 赞同：0
> 
> 时间：2012-07-25T11:03:09.650
> 
> 标签：jquery, jsrender

我在运行时将模板应用到 JsRender 时遇到问题。

请参考这张图片 - ![软件天才公司](../Images/b4c0c4ea76a19977b54677c7e31866de.png)

当我单击执行模型按钮时，我从控制器获取数据并在客户端缓存在对象（resultData）中。

如果我使用硬编码模板，它可以工作。这是代码

```
$.templates({ tmpl: "{{:#index+1}}:<b>ID=>{{:ItemID}}</b>- <i>Name=>{{:ItemName}}</i> - (Rate=>{{:Rate}}) <br />" });
$( "#outputWindow" ).html( $.render [ "tmpl" ]( resultData )); 
```

当我单击任何样式时，我必须应用动态模板。我也可以获得动态模板。请检查这张图片 - ![软件天才公司](../Images/831cdec7a0a1c74d739f69a2448f0395.png)

以下是我要应用的代码-

```
// Apply selected style
    function applyThisStyle(stl) {
        var id = $(stl).parent().find('#hidScannerId').val();
        var styleName = stl.innerHTML.toString().trim();
        alert('Applying style : ' + stl.innerHTML+ ', id='+id);

        //var styleText = "";
        var thisScanner = scannerDictionary[id];

        for(var i=0;i<thisScanner.Styles.length;i++) {
            if (thisScanner.Styles[i].Name == styleName) {
                alert(styleName);
                var styleText = thisScanner.Styles[i].HTMLContent;
                renderMyTemplate(styleText);
                break;
            }
        }

    }

    // Render template based on style selection
    function renderMyTemplate(t) {
        alert ("Template = " + t);
        $.templates({ tmpl: t });
        $( "#outputWindow" ).html( $.render [ "tmpl" ]( resultData ));
    } 
```

谁能告诉我代码有什么问题。为什么在硬编码工作时不应用动态模板。

# jquery - Jquery - 创建一个函数并将文档元素作为参数传递给它

> ID：11648277
> 
> 赞同：1
> 
> 时间：2012-07-25T11:03:26.593
> 
> 标签：jquery, hover

我有一个`#contactblurb`在 HTML 中定义的 id 元素：

```
<div id="contactblurb" class="tab">
  email:  info@something.co.uk
</div> 
```

当鼠标悬停在另一个元素（`#contactNav`）上时，我想隐藏一些其他元素并显示这个`#contactblurb`。我希望能够用其他元素来做到这一点，而不仅仅是`#contactblurb`，所以我在 jquery 中创建了一个函数，它需要（我认为是）要隐藏的元素：

```
var HideSlidesAndShowMe = function($elem)
{
  $('#slides').fadeOut('slow', function()
  { 
    $('#acorn').css({opacity : 0.05});

    $elem.show();
  });
} 
```

我通过以下方式调用它：

```
$("#contactNav").hover( function () {
                                   HideSlidesAndShowMe($("#contactblurb")) ;
                                 },
                                 function () 
                                 {
                                   // other stuff on exit hover.
                                 }
                    ); 
```

但它没有显示#contactblurb，但它确实做了其他事情。

我传递论点的方式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:12:20.877

工作演示：http: [//jsfiddle.net/g9kBC/](http://jsfiddle.net/g9kBC/)

这似乎表现得很好再次检查你的html和右括号，即使有`$`符号它也应该表现得很好`:)`

**代码**

```
var HideSlidesAndShowMe = function($elem) {
    //$('#slides').fadeOut('slow', function() {
      //  $('#acorn').css({
        //    opacity: 0.05
        //});
       alert($elem.attr('id'));
        $elem.show();
    }

$("#contactNav").hover(function() {
    alert('f');
    HideSlidesAndShowMe($("#contactblurb"));
}, function() {
    // other stuff on exit hover.
});​ 
```

# ruby - 单击带有 Mechanize 的 xpath 链接

> ID：11648278
> 
> 赞同：3
> 
> 时间：2012-07-25T11:03:26.920
> 
> 标签：ruby, xpath, nokogiri, mechanize, mechanize-ruby

我想单击使用 xpath (nokogiri) 选择的带有 Mechanize 的链接。

这怎么可能？

```
 next_page = page.search "//div[@class='grid-dataset-pager']/span[@class='currentPage']/following-sibling::a[starts-with(@class, 'page')][1]"
    next_page.click 
```

问题是 nokogiri 元素没有点击功能。

我无法读取 href (URL) 并发送 get 请求，因为该链接已定义 onclick 函数（无 href 属性）。

如果这不可能，有什么替代方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T22:28:06.497

1.  当您尝试仅查找一个元素时使用[`page.at`](http://mechanize.rubyforge.org/Mechanize/Page.html#method-i-at)而不是。[`page.search`](http://mechanize.rubyforge.org/Mechanize/Page.html#method-i-search)

2.  您可以使用 CSS 选择器语法使您的选择器更简单（更短）：

    ```
    next_page = page.at('div.grid-dataset-pager > span.currentPage + a[class^="page"]') 
    ```

3.  `Link`如果您有 Nokogiri 元素、页面和 mechanize 对象来提供构造函数，则可以构建自己的实例：

    ```
    next_link = Mechanize::Page::Link.new( next_page, mech, page )
    next_link.click 
    ```

4.  但是，您可能不需要它，因为[`Mechanize#click`](http://mechanize.rubyforge.org/Mechanize.html#method-i-click)您可以提供一个字符串，其中包含要单击的锚点/按钮的文本。

    ```
    # Assuming this link text is unique on the page, which I suspect it is
    mech.click next_page.text 
    ```

5.  **完全重新阅读问题后进行编辑**：但是，这对您没有任何帮助，因为*Mechanize 不是网络浏览器！*它没有 JavaScript 引擎，因此不会（不能）`onclick`为您执行。为此，您需要使用 Ruby 来控制真正的网络浏览器，例如使用[Watir](http://watir.com/)或[Selenium](http://code.google.com/p/selenium/wiki/RubyBindings)或[Celerity](http://celerity.rubyforge.org/)等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T01:48:58.437

一般来说，你会这样做：

```
page.link_with(:node => next_link).click 
```

然而，就像 Phrogz 所说，这不会真正做到你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:17:25.207

为什么不使用 hpricot 元素呢？只要链接具有“src”或“href”属性，Mechanize 就可以单击 hpricot 元素。尝试以下方式：

```
page = agent.get("http://www.example.com")
next_page = agent.click((page/"//your/xpath/a")) 
```

**编辑**阅读 Phrogz 的回答后，我也意识到这不会真正做到。Mechanize 还不支持 Javascript。考虑到这一点，您有 3 个选项。

1.  使用控制真实网络浏览器的库。请参阅@Phrogz 答案。
2.  使用[Capybara](https://github.com/jnicklas/capybara)，它是一个集成测试库，但也可以用作独立的爬虫。我已经使用[HTMLUnit](http://htmlunit.sourceforge.net/)成功地完成了这项工作，它也是 Java 中的一个集成测试库。Capybara 默认支持 Selenium，尽管它也通过外部 gem 支持 Webkit。Capybara 开箱即用地解释 Javascript。这篇[博文](http://www.chadcf.com/blog/using-capybara-javascript-capable-replacement-mechanize)可能会有所帮助。
3.  Grok 您打算抓取的页面并使用[HTTPFox](https://addons.mozilla.org/en-us/firefox/addon/httpfox/)之类的东西来监视 onclick Javascript 函数的作用，并将其复制到您的 Mechanize 脚本中。

祝你好运。

# html - 如何在html中格式化文本

> ID：11648281
> 
> 赞同：0
> 
> 时间：2012-07-25T11:03:32.253
> 
> 标签：html, grails

我有一个 .gsp，它在页面中显示一个数字。问题是，即使小数为 0，我也会收到带小数的数字（来自服务器）。我想“如果此字符串中的最后一个字符为 0，则从点删除直到结尾”

任何想法？如果可能，不要接触服务器端。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:20:20.167

您最好将数字视为数字（如果需要，解析它们），然后使用与 Grails 捆绑在一起的格式标签。在这种情况下， [g:formatNumber](http://grails.org/doc/latest/ref/Tags/formatNumber.html)将是合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:13:44.383

你可以用 javascript/jQuery 做到这一点，但不能用 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:15:11.200

在您的 .gsp 页面上，在您显示数字的地方进行**g:if测试。**检查最后一个字符是否为 0，如果是，则对数字执行**toString()** ，用 '.'**分隔** 并在第 0 个索引处显示字符串。

# .htaccess - 301 .htaccess 在 / 之后重定向查询

> ID：11648289
> 
> 赞同：-1
> 
> 时间：2012-07-25T11:03:43.987
> 
> 标签：.htaccess, redirect, permanent

我一直在努力进行 301 重定向，并且现有的主题都没有帮助。

我需要使用 .htaccess 对以下页面进行重定向：

```
Redirect 301 http://www.mypage.com/?q=company/contacts http://www.mypage.com/contacts 
Redirect 301 http://www.mypage.com/?q=product/new/ghz/name-5 http://www.mypage.com/name-5 
```

我知道我应该使用重写规则并指定 {QUERY-STRING} 并相信我，我已经尝试过了。没有什么帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:09:30.377

匹配实际请求：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?q=company/contacts
RewriteRule ^$ http://www.mypage.com/contacts? [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?q=product/new/ghz/name-5
RewriteRule ^$ http://www.mypage.com/name-5? [R=301,L] 
```

或查询字符串（这匹配重写的 URI）

```
RewriteCond %{QUERY_STRING} ^q=company/contacts$
RewriteRule ^$ http://www.mypage.com/contacts? [R=301,L]

RewriteCond %{QUERY_STRING} ^q=product/new/ghz/name-5$
RewriteRule ^$ http://www.mypage.com/name-5? [R=301,L] 
```

# android - Android Surfaceview 的 onResume 未调用 Surfacecreated 方法

> ID：11648291
> 
> 赞同：2
> 
> 时间：2012-07-25T11:03:50.243
> 
> 标签：android, surfaceview, android-animation

我正在通过在表面视图中使用可运行线程来播放动画。当我第一次运行该应用程序时，一切正常，动画播放正常。当我按下返回/主页按钮并重新打开应用程序时，我得到一个没有动画的黑屏，但可运行线程在我使用 Log cat 条目确认的背景上工作。

另外，我覆盖了后退按钮按下事件，并且在后退按钮按下事件中调用了 finish()。

任何人都可以帮我解决为什么在我恢复应用程序时没有调用surfacecreated方法吗？

**注意：**当我使用

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

在后退按钮事件而不是 finish() 方法中，应用程序在 onresume 事件中正常工作。

提前致谢， 蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:25:20.553

我认为，你必须扩展 SurfaceView 类并监听 surfaceChanged 方法。并在方法中重新绘制。代码：

```
class MySurfaceView extends SurfaceView implements SurfaceHolder.Callback{  
        SurfaceHolder holder;
        public MySurfaceView(Context context) {  
            super(context); 
            holder = this.getHolder();
            holder.addCallback(this); 
        }  
        public void surfaceChanged(SurfaceHolder holder, int format, int width,  
                int height) {  
            //when surfaceChanged,i think you must make your view draw one time.

        }   
        public void surfaceCreated(SurfaceHolder holder) {  
            //surfaceCreated
        }    
        public void surfaceDestroyed(SurfaceHolder holder) {  
            //surfaceDestroyed
        }  

    } 
```

希望这可以帮到你。

# multithreading - 如何获取由第一个活动使用意图启动的辅助活动的处理程序？

> ID：11648293
> 
> 赞同：0
> 
> 时间：2012-07-25T11:03:54.190
> 
> 标签：multithreading, android-intent, android-activity, handler, looper

我的项目中有一项主要活动，我正在使用意图开始一项次要活动。在一个单独的线程上，我想获取第二个活动的处理程序，以便将一些控制消息发送到第二个活动。如何接收我已开始使用意图的第二个活动的处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:26:07.913

当它已经创建时，我将开始向第二个活动发送消息。这意味着，我将在第二个活动`Handler`的方法中创建一个对象`onCreate()`，并将该处理程序传递给您要从中发送消息的线程。

# plupload - 我可以限制 Plupload 中的文件类型吗？

> ID：11648294
> 
> 赞同：1
> 
> 时间：2012-07-25T11:03:59.617
> 
> 标签：plupload

我想阻止人们尝试使用 Plupload 上传某些文件类型。文档过滤器（即阻止人们在文件浏览器中选择文件）但仍然很容易绕过，Plupload 将允许尝试上传这些文件：

[http://www.plupload.com/documentation.php#configuration](http://www.plupload.com/documentation.php#configuration)

当然，服务器然后说它不想要那种类型的文件，但只有在上传完成之后。

我可以让 Plupload 拒绝上传某种类型的文件（或只上传给定类型的文件）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:41:47.260

在文件上传或文件添加的过程中，您可以检查文件名的扩展名：

```
var test='hellothere.jpg';
var ext = test.substr(-3); 
```

然后提醒用户注意无效文件。

**更新**

服务器上将需要额外的验证。第一次检查客户端，第二次在服务器端发布到您的上传方法，并记住如果您已重命名文件，请查看表单的“名称”属性，而不是文件新名称的 postfilecollection。如果有任何错误，您可以发送 json 响应说：

```
 "{"respCode" : "500", "Msg" : "Failed"} 
```

# sql - 数据库中的用户块

> ID：11648295
> 
> 赞同：1
> 
> 时间：2012-07-25T11:04:04.080
> 
> 标签：sql, concurrency, block

我想更多地了解 sql_server 的内部行为。

我的问题是我正在尝试创建一个多用户数据库，但我正在尝试并发数据问题。

举个例子：

1.  UserA 打开一个应用程序并在不提交的情况下修改 tableA 中的某些内容。
2.  UserB 也打开应用程序并尝试读取 tableA。
3.  用户 B 被阻止，直到用户 A 提交

我的问题是：

1.  我该如何解决？
2.  难道没有办法给用户B旧信息，让他知道信息是旧的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:09:12.313

> 打开应用程序并修改 tableA 中的某些内容而不提交

不要编写执行此操作的应用程序。*任何应用程序都不应在用户*操作期间保持锁定。编辑表单不应锁定数据。阅读有关[乐观并发](http://msdn.microsoft.com/en-us/library/aa0416cz.aspx)的信息。

应用程序仍会偶尔阻塞，最好的方法是部署基于行的版本控制，也就是。快照隔离。请参阅[了解基于行版本控制的隔离级别](http://msdn.microsoft.com/en-us/library/ms189050%28v=SQL.105%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:12:41.767

> *用户 B 被阻止，直到用户 A 提交*

任何现代 DBMS 都不是这样。几乎所有这些都实现了某种[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)，以便编写器阻塞读取器，而读取器不会阻塞写入器。

如果我没记错的话，这仍然是 Microsoft SQL Server 的默认行为（即使在 2012 年），但可以更改以允许更高的并发性

# sql-server - Microsoft SQL 报表服务器身份验证

> ID：11648297
> 
> 赞同：1
> 
> 时间：2012-07-25T11:04:07.407
> 
> 标签：sql-server, authentication, reporting-services

有谁知道是否有一种简单的方法可以绕过用于访问报告网站前端中已发布报告的标准 Windows 身份验证。

我知道不同的身份验证方法，RSWindowsNegotiate、RSWindowsKerberos、RSWindowsNTLM 和 RSWindowsBasic。我也知道有一个自定义身份验证选项，我必须去创建我自己的登录 ASP.net 页面。

问题是我正在尝试为用户设置一个角色，以限制用户在前端可以看到和执行的操作，而无需将其他用户添加到 Windows 活动目录。

所以用户必须能够使用自己的用户名和密码登录，并且只能查看他们的权限设置。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:30:57.100

我不会称之为简单的方法，但有一种方法可以做到这一点。查看 SQLServerCentral 上的这篇文章：[如何根据用户凭据将报表参数设置为默认值](http://www.sqlservercentral.com/articles/Reporting+Services+%28SSRS%29/72897/)

它描述了实现这一点的以下步骤：

1.  在您的 sql server 数据库中创建报表用户表
2.  创建用户 ID 参数
3.  调整您的报告查询以识别用户并使用该信息仅显示允许的数据

# database - 沙发数据库在没有视图的情况下查找数据

> ID：11648298
> 
> 赞同：1
> 
> 时间：2012-07-25T11:04:09.057
> 
> 标签：database, nosql, couchdb

我想知道 Couch DB HTTP API 中是否有任何方法可以在没有 VIEWS 的情况下查询数据库？我们可以获取具有特定 ID 的所有文档/文档，但是如果我们想使用 ID 以外的键查询数据库，而不使用 VIEWS 怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:52:35.290

在不使用视图的情况下，您不能通过主键 (ID) 以外的任何方式查询 CouchDB 数据库。在 CouchDB 世界中，视图就是查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T06:14:23.907

您可以使用 couchDB 的 HTTP API 从 CouchDB 获取数据而无需查看。

[http://wiki.apache.org/couchdb/HTTP_Document_API](http://wiki.apache.org/couchdb/HTTP_Document_API)

存储在 CouchDB 中的文档有一个 DocID。DocID 是区分大小写的字符串标识符，用于唯一标识文档。两个文档在同一个数据库中不能有相同的标识符，它们被认为是同一个文档。

```
http://localhost:5984/test/some_doc_id
http://localhost:5984/test/another_doc_id
http://localhost:5984/test/BA1F48C5418E4E68E5183D5BD1F06476 
```

# objective-c - 在 iOS 中从 XML 中提取价值？

> ID：11648299
> 
> 赞同：0
> 
> 时间：2012-07-25T11:04:15.037
> 
> 标签：objective-c, ios, xml

我从 Web 服务中获取了一些 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<NewDataSet>
  <Table>
    <CITY>Jupiter</CITY>
    <STATE>FL</STATE>
    <ZIP>33477</ZIP>
    <AREA_CODE>561</AREA_CODE>
    <TIME_ZONE>E</TIME_ZONE>
  </Table>
</NewDataSet> 
```

我需要一种简单干净的方法来从这个 XML 中获取 CITY 和 STATE 值。在 iOS 中是否有一种简单易用的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:10:17.487

有一个简洁的 NSXMLParser Wrapper 可以为您将 XML 文件转换为 NSDictionary。

它简单而干净！

[http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)

然后从那里，您可以使用：

```
NSDictionary *dict = [self convertXML:xmlContents];
NSArray *tables = [dict objectForKey:@"NewDataSet"];

for (NSDictionary *table in tables) {

   NSLog(@"City = %@", [table objectForKey:@"city"]);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:49:23.620

使用使用 NSXMLParser 编写的[xmldocument 解析器](https://github.com/nfarina/xmldocument/)，但开发人员可以使用更简单的功能。

1.  将 SMXMLDocument.h 和 .m 文件添加到您的项目中
2.  在您的类实现文件（.m 文件）中添加#import

    ```
    // create a new SMXMLDocument with the contents the xml file
    // data is the NSData representation of your XML
    SMXMLDocument *document = [SMXMLDocument documentWithData:data error:&error];

    // Pull out the <NewDataSet> node
    SMXMLElement *dataset = [document.root childNamed:@"NewDataSet"];

    // Look through <Table> children
    for (SMXMLElement *table in [dataset childrenNamed:@"Table"]) {
        // demonstrate common cases of extracting XML data
        NSString *city = [table valueWithPath:@"CITY"]; // child node value
        NSString *state = [table valueWithPath:@"STATE"]; // child node value
    } 
    ```

PS我没有运行此代码，但根据类似用法进行了修改以匹配您的案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:09:26.020

完成此操作的工具已丢失（[链接](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)）。我会推荐这种`SAX`方法，因为您只需要解析这些`XML`数据（例如[`NSXMLParser`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:10:14.433

请看：`NSXMLParser`

和方法：`(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict`

使用起来非常简单。`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T11:11:54.663

你可以使用 NSXMLParser，我现在不在我的 mac，所以大炮仔细检查，但基本上你用返回的数据设置了一个 NSXMLParser。然后，您将一个类设置为解析器的委托，当解析器命中一个元素时，它会告诉您它所命中的元素及其属性。

如果您对 Web 服务有任何控制权，我会认真考虑使用 JSON 数据而不是 XML。ObjC 带有一个非常好的 JSON 解析器。

# java - 使用域而不是 localhost/ipaddress 访问 Web 应用程序会导致找不到 WebPage？

> ID：11648305
> 
> 赞同：3
> 
> 时间：2012-07-25T11:04:56.310
> 
> 标签：java, jakarta-ee, web-applications, dns

我在 tomcat 上部署了我的 java web 应用程序。我可以访问它

```
https://localhost:8443/myWebAp 
```

但我想用一些域名而不是本地主机来访问它。为此，我在 C:/Windows/System32/drivers/etc/hosts 的 hosts 文件中创建了以下条目

```
 10.215.134.45   shopCart.myApp.com 
```

现在我使用 url 访问我的应用程序

```
 https://shopCart.myApp.com:8443/myWebAp 
```

它说找不到网页。虽然只要我输入我的 ip 即 10.215.134.45 而不是 shopCart.myApp.com 它就可以正常工作。另一个奇怪的事情是，如果我输入为

```
 10.215.134.45   shopCart 
```

现在访问应用程序

```
 https://shopCart:8443/myWebAp 
```

它工作正常，但只要我在 shopCart 上附加一些 .(dot)，看起来浏览器就无法针对 shopCart.myApp.com 解析 ip。我没有得到它背后的原因是什么？我也尝试给 127.0.0.1 而不是我的 ip 针对域名，但结果相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:02:40.007

This generally happens only if you are behind a proxy, and the browser is using your proxy to resolve the URL rather than using your hosts file/DNS. You should add *.myApp.com to the proxy exceptions list, to ensure that it resolves the IP address for the domain using your hosts file.

# joomla - 图像未在 Joomla 的灯箱中打开

> ID：11648306
> 
> 赞同：0
> 
> 时间：2012-07-25T11:05:01.563
> 
> 标签：joomla

我正在使用 Joomla 1.5，我已经尝试了很多，但无法在灯箱扩展中加载图像。

请指导我那里缺少什么，因为所有组件和模块都没有在 Lightbox 中显示图像，真的很令人沮丧。在 index.php 中使用以下网址

```
<script type="text/javascript" src="<?php echo $this->baseurl ?>/templates/foldrname/engine1/jquery.js"></script> 
```

请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:08:51.253

尝试使用调试`Firebug`，查找`JS`错误（如果有），如果图像未显示，请查看`img src`标签中的路径..如果路径设置正确..一旦您按照这些步骤操作，请告诉我:)（我确定您能够然后自己解决）:)

新的 -

```
<script type="text/javascript" src="/vijaishree/templates/vijaishree/engine1/script.js"></script> 
```

把它放在前面，让我知道..严重的是一个 js 放错地方的案例（如果包含正确，还请查看 jquery.js）:) --

```
 <script type="text/javascript">
 var pns = jQuery.noConflict();
     pns(window).load(function() { 
```

# android - 传递数组列表 在android上从一个活动到另一个活动

> ID：11648312
> 
> 赞同：5
> 
> 时间：2012-07-25T11:05:29.967
> 
> 标签：android

我已经存储`ArrayList<Double>`在我的 bean 类中，

我的主要活动有豆类，

如何将`ArrayList<Double>`我的主要活动传递给另一个活动。？

我的数组列表是双倍的。如何传递双数组列表？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T11:09:49.193

这个可以帮你...

```
public Intent putParcelableArrayListExtra (String name, ArrayList<? extends Parcelable> value) 
```

有关更多信息，请查看[putParcelableArrayListExtra](http://developer.android.com/reference/android/content/Intent.html#putParcelableArrayListExtra%28java.lang.String,%20java.util.ArrayList%3C?%20extends%20android.os.Parcelable%3E%29)

**编辑：**

如果你有`double[]`那么你可以使用

`void putDoubleArray(String key, double[] value)`[捆绑](http://developer.android.com/reference/android/os/Bundle.html)类..

将双精度数组值插入此 Bundle 的映射中，替换给定键的任何现有值。并将此捆绑包传递给 Intent to Other Activity。

**更新：2**

**第一活动：**

```
Intent intent = new Intent(this, OtherActivity.class);
ArrayList<Double> listDouble = new ArrayList<Double>();
listDouble.add(1111.00000);
listDouble.add(13331.00000);
intent.putExtra("arraylist", listDouble);
startActivity(intent); 
```

**其他活动：（**检索双 ArrayList）

```
ArrayList<Double> listDouble = (ArrayList<Double>) getIntent().getSerializableExtra("arraylist");
System.out.println("...serialized data.." + listDouble); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:13:57.287

请参考以下方法将数据从一个活动传递到另一个活动

**例如 1**

```
putIntegerArrayListExtra(String name, ArrayList<Integer> value)
putParcelableArrayListExtra(String name, ArrayList<? extends Parcelable> value)
putStringArrayListExtra(String name, ArrayList<String> value)
putCharSequenceArrayListExtra(String name, ArrayList<CharSequence> value) 
```

然后，您可以通过将 put 替换为 get 并将键字符串作为参数来读取您的下一个活动，例如

```
myIntent.getStringArrayListExtra("array"); 
```

**例如 2**

```
Intent i = new Intent(this,name.class);
Bundle b = new Bundle();
b.putIntegerArrayListExtra(String name, ArrayList<Integer> value);
//b.putParcelableArrayListExtra(String name, ArrayList<? extends Parcelable> value);
//b.putStringArrayListExtra(String name, ArrayList<String> value);
i.putExtra(String name,b);
startActivity(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:09:15.327

您应该考虑通过 Intent Extras 将参数传递给其他活动：

```
Intent.putExtra() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T17:05:44.360

此代码将演示如何通过 inent 将双数组对象传递给其他活动

```
String [] my_dblArray=new Sting[no];
   //put some value in the array and then pass through intent
Intent intnt=new Intent(this,YourReqActivity.class);            
Bundle bundle = new Bundle();
bundle.putDoubleArray("doubleVal",my_dblArray);  
intnt.putExtra(bundle);
startActivity(intnt); 
```

// 在 Receiver 端放置这行代码。

```
 String [] dblval=Bndl.getDoubleArray("doubleVal"); 
```

# php - 如何在 MySQL 数据库上检查 FB ID 和其他个人数据，以便在重新访问时只显示某个页面？

> ID：11648322
> 
> 赞同：-1
> 
> 时间：2012-07-25T11:06:26.503
> 
> 标签：php, mysql, facebook

我创建了一个 Facebook 应用程序，我需要人们只输入一次他们的数据。

一切正常，数据库正在被填充，但我需要确保人们不会不断回来并无休止地重新输入他们的数据。

检查用户是否已经提交数据的最佳方法是什么？

signed_request 仍可能已提交且未输入其数据，因此我需要检查两者才能正常工作。

理想情况下，PHP 只会检查 FB ID + 其他数据，并且只显示确认/感谢页面。

目前我要发送到数据库的 php 是：

```
class Users_Model extends CI_Model {
    protected $_name = 'users';

    function add($id,$key,$value) {
        $data = array(
           'id' => $id,
           'name' => $key,
           'value' => $value
        );

        return $this->db->insert($this->_name, $data); 
    }
    function update($id,$key,$value) {
        $data = array(
           'value' => $value
        );

        $this->db->where(array(
           'id' => $id,
           'name' => $key
        ));
        return $this->db->update($this->_name, $data); 
    }

    function exists($id,$key=null) {
        if($key == null) {
            $this->db->where(array(
            'id' => $id
            ));
        } else {
            $this->db->where(array(
            'id' => $id,
            'name' => $key
            ));  
        }

        $query = $this->db->get($this->_name);
        if($query->num_rows() > 0) {
            return true;
        }
        return false;
    }

    function remove($id) {
        $data = array(
           'id' => $id,
        );

        return $this->db->delete($this->_name, $data); 
    }

    function all() {
        $query = $this->db->get($this->_name);
        $results = array();
        if($query->num_rows() > 0) {
            foreach($query->result() as $row) {
                $results[]=$row;
            }
        } 
        return $results;  
    }
} 
```

非常感谢任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:53:18.517

> 检查用户是否已经提交数据的最佳方法是什么？

检查您的数据库中是否已有用户 Facebook id 的记录。

# iphone - 如何在iphone中获取哪个对象开始触摸

> ID：11648323
> 
> 赞同：0
> 
> 时间：2012-07-25T11:06:28.000
> 
> 标签：iphone, uiimageview, uitouch

我在 iPhone 应用程序中有一个视图。在那个视图中，我添加了两个 UIImageView，比如说 img_view1、img_view2。现在我将触摸事件放在该视图上，如下所示。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
     // Some code are here
} 
```

我怎样才能得到哪个图像视图开始触摸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:09:02.110

```
UITouch *touch = [touches anyObject];
CGPoint pt = [touch locationInView:self];

if (CGRectContainsPoint(img_view1.frame, pt)
{
    NSLog(@"Image View 1 touched");
} 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:13:41.393

在 xib 中启用您的图像视图用户交互（或者如果您以编程方式添加它，则通过代码）并使用 UIResponder 方法 touchesBegan、touchesMoved、touchesEnded 等来检测图像视图上的触摸：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = [touches anyObject];

if ([touch view] == yourImageView)
{
        //add your code for image touch here 
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:14:05.883

使用此代码

```
UITouch *touch = [touches anyObject];

if (touch.view==imageView1) { 
  // do something
}
else if (touch.view==imageView2) { 
  // do something else
} 
```

希望这是您正在寻找的。

享受编码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:15:18.190

使用此代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{

   UITouch *touch = [touches anyObject];
        if(touch.view == img_view1)
        {
    }
    else if(touch.view == img_view2)
        {
    }
} 
```

# windows - 在txt文件后面运行exe文件

> ID：11648324
> 
> 赞同：1
> 
> 时间：2012-07-25T11:06:33.407
> 
> 标签：windows, exe, alternate-data-stream

正在阅读有关 Windows 中的 ADS（备用数据流）的信息，所以遇到了这个东西。在 Windows XP 上工作以测试以下内容。

我创建了一个名称为 sample.txt 的文件，其内容为“你好” 创建了另一个名称为 second.txt 的文件，其内容为“我被隐藏了”

在命令提示符下执行以下操作：-

> 键入 second.txt > sample.txt:newfile.txt

它执行成功

现在，如果我输入这个： -

> 记事本 sample.txt:newfile.txt

记事本打开 newfile.txt 的内容 - “我被隐藏了”

到这里，一切正常

现在，我试图隐藏一个 exe 文件，比如说 - notepad.exe 在这样的 txt 示例后面：-- （我已将 notepad.exe 复制到同一文件夹中）

> 键入 notepad.exe > sample.txt:newexe.exe

以上命令运行成功。

问题是，现在我如何运行现在位于文本文件后面的 exe 文件。我的猜测是我需要某种形式的解释器（如第一个示例中的 notepad.exe）来使我的 exe 运行。exe文件是否需要某种解释器才能运行（如文本文件需要一些编辑器）？我知道，exe文件可以直接运行，但在这种情况下，这是行不通的。甚至尝试过：--

> 启动 second.txt:newexe.exe

但它不起作用。非常感谢您的帮助，因为我对 Windows 内部结构了解不多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:30:15.410

明智地，Windows 不会允许这样做，并且如果您尝试执行它会抛出拒绝访问，同样没有简单的方法来复制二进制流。

使用管理权限，您可以`mklink blah.exe sample.txt:newexe.exe`创建指向可执行 ADS 的符号链接，可通过`blah.exe`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:11:05.427

在 Windows XP 下，您必须给出要启动的 ADS 的完整限定名（在这种情况下，我在 dbgview.exe 中有“隐藏”depends.exe）：

![在此处输入图像描述](../Images/29d9a2889a029a3ed326404752d86e6d.png)

# ruby-on-rails - Rails 教程“无方法错误”

> ID：11648327
> 
> 赞同：1
> 
> 时间：2012-07-25T11:06:45.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是Rails的新手。我目前正在使用 ruby​​.railstutorial.org 在线教程。我坚持第 5 章。当我尝试在我的机器上运行示例应用程序时，返回以下错误：

```
NoMethodError in Static_pages#home

Showing C:/rails_project/next_app/app/views/layouts/application.html.erb where line #4 raised:

undefined method `full_title' for #<#<Class:0x32de058>:0x32e47a8>

Extracted source (around line #4):

1: <!DOCTYPE html>
2: <html>
3:   <head>
4:     <title><%= full_title(yield(:title)) %></title>
5:     <%= stylesheet_link_tag    "application", media: "all" %>
6:     <%= javascript_include_tag "application" %>
7:     <%= csrf_meta_tags %>

Rails.root: C:/rails_project/next_app 
```

小解释：我已将名称从“Sample_app”更改为“Next_app”

感谢帮助！

附言。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:17:23.060

我认为您错过了定义辅助方法`full_title`

看到这个

[http://ruby.railstutorial.org/chapters/rails-flavored-ruby#code:title_helper](http://ruby.railstutorial.org/chapters/rails-flavored-ruby#code:title_helper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:16:36.740

我认为您正在学习“railstutorials.org”示例教程。凭记忆，您必须确保在帮助程序中定义了 full_title 方法。尝试在 Application Helper 中定义它。

# silverlight - 用户控件上的数据绑定

> ID：11648329
> 
> 赞同：1
> 
> 时间：2012-07-25T11:07:00.700
> 
> 标签：silverlight, windows-phone-7, user-controls

我有一个包含用户控件的列表框。用户控制其中定义的 2-3 个文本框。如何在这些文本框上启用数据绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:50:24.353

您可以简单地`DependencyProperty`为它们中的每一个创建 -s，并且可以像这样直接通过 xaml 绑定：

```
<user:MyControl txtBox1="{Binding Field1}" txtBox2="{Binding Field2}" ... /> 
```

要创建一个`DependencyProperty`，你可以像写作一样偷懒`"propdp" + TAB`。有大量关于`DependencyProperty`s 主题的文章、博客文章和一般信息，请尽情享受吧。一个好的起点是：

[http://msdn.microsoft.com/en-us/library/ms752914.aspx](http://msdn.microsoft.com/en-us/library/ms752914.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)

[什么是依赖属性？](https://stackoverflow.com/questions/617312/what-is-a-dependency-property)

祝你好运！和他们一起工作真的很有趣。:-)

# ios - cocoa - 获取 iphone 地址组

> ID：11648330
> 
> 赞同：0
> 
> 时间：2012-07-25T11:07:02.987
> 
> 标签：ios, ios5, contacts, addressbook

有没有办法在通讯录中获取联系人的组？

我可以获取有关联系人的所有信息，但我不知道如何获取该组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:27:37.163

我不知道您是否会获得联系人组，但您可以通过此或[参考](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABRecordRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABRecordGetRecordType)链接知道联系人是否属于组类型：

```
 ABRecordGetRecordType : Returns the type of a record.

 ABRecordType ABRecordGetRecordType (
 ABRecordRef record
 );

Parameters : record
The record whose type is being returned.

Return Value : The record type of record:

kABPersonType for person records
kABGroupType for group records.
kABSourceType for source records. 
```

# android - 查看动画问题

> ID：11648332
> 
> 赞同：0
> 
> 时间：2012-07-25T11:07:06.050
> 
> 标签：android, animation, position

情况：我在屏幕底部有一个按钮（A），上面有一个更大的按钮（B）。相对布局的两个孩子。

我想在用户单击按钮 B 时显示 A 按钮，但不仅仅是显示 - 我希望它从其位置向左移动 50-100 dp。

我已经这样做了，但是有一个问题：A 按钮的视觉表示正在成功移动，我不能说它的非视觉部分。所以当我点击 A - 它什么也不做。但是，如果我点击它所在的位置 - 触发 onClick 事件。

我意识到，这是 android 动画的常见行为，现在我正在寻找设置非可视按钮部分位置的方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:39:42.370

OnAnimationEnd：试试这个：

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_LEFT); 
```

（或您想移动视图的任何地方）然后使用

```
yourButton.setLayoutParams(params); 
```

# sqlite - 在 phonegap 应用程序中导出 sqlite db

> ID：11648333
> 
> 赞同：6
> 
> 时间：2012-07-25T11:07:12.673
> 
> 标签：sqlite, cordova

我们有一个使用cordova（phonegap）和他自己的sqlite DB的应用程序（我的意思是我们没有安装外部sqlite）。

我们需要将数据库备份到 SD 内存中，但是我们无法将 sqlite 文件从 phonegap 导出到 SD。

有人可以帮助我们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-12T04:43:15.057

几年后，我知道，但这对我在 Cordova 5.4.1 上工作并在 Android 上运行（我认为 iOS 也使用 cordova.file.application ，但我还没有测试过）：

```
this.getdbfilename = function () {
    return "dbfile.db";
};

this.getdbdirectory = function() {
    return cordova.file.applicationStorageDirectory + "databases/";
};

// copy DB file out to non-private app directory.
this.copyDBFileOut = function (outfilename) {
    window.resolveLocalFileSystemURL(this.getdbdirectory() + this.getdbfilename(), function (fileEntry) {
        window.resolveLocalFileSystemURL((cordova.file.externalDataDirectory || cordova.file.documentsDirectory), function(dirEntry) {
            fileEntry.copyTo(dirEntry, outfilename, function() { console.log("copyDBFileOut() succeeded");}, this.errorHandler);
        });
      });
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T23:22:57.340

Cordova 3.5 和 org.apache.cordova.file 1.2.1 听起来不错

不同路径需要一些变化。

```
window.resolveLocalFileSystemURL("file:///data/data/my-app-name/databases/name-of.db", function(fs) {
                var parent = "file://mnt/external_sd/";
                var newName = "mybackup.db";
                window.resolveLocalFileSystemURL(parent, function(directoryEntry) {
                    fs.copyTo(directoryEntry, newName, function() {
                        alert("Backup ok");
                    }, failFiles);
                });
            }, failFiles);

function failFiles(error) {        
  if (error.code == FileError.NOT_FOUND_ERR) alert("Message : NOT_FOUND_ERR" )
  else if (error.code == FileError.SECURITY_ERR) alert("Message : SECURITY_ERR" )
  else if (error.code == FileError.ABORT_ERR) alert("Message : ABORT_ERR" )
  else if (error.code == FileError.NOT_READABLE_ERR) alert("Message : NOT_READABLE_ERR" )
  else if (error.code == FileError.ENCODING_ERR) alert("Message : ENCODING_ERR" )
  else if (error.code == FileError.NO_MODIFICATION_ALLOWED_ERR) alert("Message : NO_MODIFICATION_ALLOWED_ERR" )
  else if (error.code == FileError.INVALID_STATE_ERR) alert("Message : INVALID_STATE_ERR" )
  else if (error.code == FileError.SYNTAX_ERR) alert("Message : SYNTAX_ERR" )
  else if (error.code == FileError.INVALID_MODIFICATION_ERR) alert("Message :  INVALID_MODIFICATION_ERR" )
  else if (error.code == FileError.QUOTA_EXCEEDED_ERR) alert("Message : QUOTA_EXCEEDED_ERR" )
  else if (error.code == FileError.PATH_EXISTS_ERR) alert("Message : PATH_EXISTS_ERR" )  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T10:47:09.363

很多年前......但我认为这是解决方案：

```
function failFiles(error) {        
  if (error.code == FileError.NOT_FOUND_ERR) alert("Message : NOT_FOUND_ERR" )
  else if (error.code == FileError.SECURITY_ERR) alert("Message : SECURITY_ERR" )
  else if (error.code == FileError.ABORT_ERR) alert("Message : ABORT_ERR" )
  else if (error.code == FileError.NOT_READABLE_ERR) alert("Message : NOT_READABLE_ERR" )
  else if (error.code ==   FileError.ENCODING_ERR) alert("Message : ENCODING_ERR" )
  else if (error.code == FileError.NO_MODIFICATION_ALLOWED_ERR) alert("Message : NO_MODIFICATION_ALLOWED_ERR" )
  else if (error.code == FileError.INVALID_STATE_ERR) alert("Message : INVALID_STATE_ERR" )
  else if (error.code == FileError.SYNTAX_ERR) alert("Message : SYNTAX_ERR" )
  else if (error.code == FileError.INVALID_MODIFICATION_ERR) alert("Message :  INVALID_MODIFICATION_ERR" )
  else if (error.code == FileError.QUOTA_EXCEEDED_ERR) alert("Message : QUOTA_EXCEEDED_ERR" )
  else if (error.code == FileError.PATH_EXISTS_ERR) alert("Message : PATH_EXISTS_ERR" )  
}  

function successDump() {    
}  

//Export DB. Get the file        file:///data/data/yourproject/app_database/file__0/0000000000000001.db  
//and save in the SD with the name yourproject.db
function copyBdtoSD() {    
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, successDump, failFiles);            window.resolveLocalFileSystemURI("file:///data/data/yourproject/app_database/file__0/0000000000000001.db", copyFileToSd, failFiles);
}

function copyFileToSd(entry) {    
    var parent = "file:///mnt/sdcard",
        parentName = parent.substring(parent.lastIndexOf('/')+1),        
        parentEntry = new DirectoryEntry(parentName, parent);       
    var newName = "yourproject.db";

   // copy the file
   entry.copyTo(parentEntry, newName, successExport, failFiles);    
} 
```

# html - 将 HTML 表格单元格旋转 180 度

> ID：11648334
> 
> 赞同：0
> 
> 时间：2012-07-25T11:07:14.890
> 
> 标签：html, css

例如，我有下面的表格，想像其他表格一样旋转它。我怎样才能做到这一点？反正没有javascript吗？

旋转前

```
<table>
    <tr>
        <td>
            A
        </td>
        <td>
            B
        </td>
    </tr>
    <tr>
        <td>
            C
        </td>
        <td>
            D
        </td>
    </tr>
</table> 
```

旋转后

```
<table>
    <tr>
        <td>
            B
        </td>
        <td>
            A
        </td>
    </tr>
    <tr>
        <td>
            D
        </td>
        <td>
            C
        </td>
    </tr>
</table> 
```

视觉上

```
A B        B A
C D  --->  D C 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T11:13:20.607

您可以使用 CSS3 转换来做到这一点：

```
​table, td {
    -webkit-transform: scaleX(-1);
       -moz-transform: scaleX(-1);
        -ms-transform: scaleX(-1);
         -o-transform: scaleX(-1);
            transform: scaleX(-1);
}​ 
```

**见：http:** [//jsfiddle.net/thirtydot/gE5sV/](http://jsfiddle.net/thirtydot/gE5sV/)

浏览器支持：[http ://caniuse.com/transforms2d](http://caniuse.com/transforms2d)

从上面的链接可以看出，CSS3 转换在 IE8 和更早版本中不起作用。你*可以*用 来做`filter`，但它会让文本看起来*很糟糕*，所以我不推荐它：

```
filter: progid:DXImageTransform.Microsoft.Matrix(M11=-1,M12=0,M21=0,M22=1,SizingMethod='auto expand'); 
```

# cocoa - NSScreen visibleFrame 不减去菜单栏区域

> ID：11648335
> 
> 赞同：2
> 
> 时间：2012-07-25T11:07:25.353
> 
> 标签：cocoa

我正在使用`visibleFrame`of 方法，`NSScreen`它看起来好像没有从可见矩形中减去菜单栏区域（**Dock 位于屏幕底部**）。从以下代码的输出中可以明显看出：

```
NSRect visibleFrame = [screenInfo visibleFrame];
NSLog(@"\nx=%f , y=%f\nw=%f , h=%f",visibleFrame.origin.x,visibleFrame.origin.y,visibleFrame.size.width,visibleFrame.size.height);
NSRect screenFrame1 = [screenInfo frame];
NSLog(@"\nx=%f , y=%f\nw=%f , h=%f",screenFrame1.origin.x,screenFrame1.origin.y,screenFrame1.size.width,screenFrame1.size.height); 
```

输出如下：
**可见矩形**

```
x=0.000000 , y=80.000000
w=1920.000000 , h=1000.000000 
```

**屏幕矩形**

```
x=0.000000 , y=0.000000
w=1920.000000 , h=1080.000000 
```

我们可以从上面的输出推断出dock的高度是80（因为可见矩形原点的“Y”坐标是80）。因此，可见矩形的高度应该是：（
***屏幕高度 - 停靠栏高度 - 菜单栏高度）***
结果为：
***1080 - 80 - 菜单栏高度，***
在任何情况下都应该小于 1000 ，但从上面的输出中可以看出，它正好是 1000。这意味着菜单栏的高度没有被减去。
这是一个错误`visibleFrame`还是我在某个地方犯了错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T03:56:43.600

自己想出了答案。我`[[NSScreen alloc]init];`用来获取 NSScreen 对象，而我应该使用`[NSScreen mainScreen];`

# python - 没有明显原因的 Django 服务器 100% cpu

> ID：11648339
> 
> 赞同：3
> 
> 时间：2012-07-25T11:07:37.387
> 
> 标签：python, django

这是一个使用 Python 2.6.6 和 Django 1.2.3 在 Linux（我认为是 CentOS）上运行的服务器。

发生的情况是运行 django 的 python 进程突然开始使用 100% cpu，直到它重新启动。这种情况最近只发生过两次，并且在不到一个月前才开始这样做。我在大约 7 个月内没有对代码进行任何大的更改。

查看控制台的输出，它没有任何极端使用。在我相信它开始使用 100% cpu 之前的大约 10 分钟内只有大约 10 个查询。打印的唯一错误是管道损坏错误，我认为一旦它变慢并关闭连接，可能有人在使用它。

我重新运行了所有在它变慢时的查询，它们都运行得很好，没有任何问题。

服务器本身在某种意义上仍然可以正常工作，但速度非常慢。我每天都会进行一系列测试，它们通常需要大约 7 分钟，但是当它如此缓慢时，可能需要 2-3 小时。

如果有人有任何想法，我将不胜感激。

另外，您可能会注意到，如果有人可以推荐有关如何监控此类活动的良好做法，那么当涉及到这些问题时，我还是个新手。

谢谢你的时间！

下面是我提到的输出，它开始 100% cpu 的时间是 ~4pm

```
[23/Jul/2012 15:49:55] "GET /CFXsearch/?n=&v=all&e=2012Week30&c=all&r=all&p=all&run=all&pl=all&m=all&o=all&d1=&d2=&submitOption=comparing&compareBy=plat&sort=sortName&Soft=CFX HTTP/1.1" 200 67228
[23/Jul/2012 15:50:00] "GET /CFXsearch/?n=&v=all&e=2012Week30&c=all&r=all&p=all&run=all&pl=RH5&m=all&o=all&d1=&d2=&submitOption=comparing&compareBy=plat&sort=sortName&Soft=CFX HTTP/1.1" 200 33346
[23/Jul/2012 15:50:05] "GET /CFXsearch/?n=&v=all&e=2012Week30&c=all&r=all&p=all&run=all&pl=SLES10&m=all&o=all&d1=&d2=&submitOption=comparing&compareBy=plat&sort=sortName&Soft=CFX HTTP/1.1" 200 33394
[23/Jul/2012 15:54:48] "GET /CFXsearch/?n=&v=all&e=2012Week30&c=all&r=all&p=all&run=all&pl=SLES11&m=all&o=all&d1=&d2=&submitOption=comparing&compareBy=plat&sort=sortName&Soft=CFX HTTP/1.1" 200 33394
[23/Jul/2012 15:54:53] "GET /results/?n=&e=2012Week30&c=TGTest&pl=SLES11&p=single&p=defined&p=double&run=default&run=hpmpi&run=mpich&run=mpich2&run=Platform&run=pvm%20parallel&run=serial&sort=sortResult&d=&y=&submitOption=latestsearch&Soft=CFX HTTP/1.1" 200 19350
[23/Jul/2012 15:54:57] "GET /results/?n=&e=2012Week30&c=turboexamples&pl=SLES11&p=single&p=defined&p=double&run=default&run=hpmpi&run=mpich&run=mpich2&run=Platform&run=pvm%20parallel&run=serial&sort=sortResult&d=&y=&submitOption=latestsearch&Soft=CFX HTTP/1.1" 200 36729
[23/Jul/2012 15:59:40] "GET / HTTP/1.1" 200 11111
[23/Jul/2012 15:59:40] "GET /site_media/style.css HTTP/1.1" 304 0
[23/Jul/2012 15:59:45] "GET /CFXsearch/ HTTP/1.1" 200 25637
[23/Jul/2012 15:59:45] "GET /site_media/jquery-1.2.6.min.js HTTP/1.1" 304 0
[23/Jul/2012 15:59:45] "GET /site_media/sorttable.js HTTP/1.1" 304 0
[23/Jul/2012 16:00:04] "GET /CFXsearch/?n=&v=14.5&e=all&c=solver54&r=all&p=all&run=all&pl=all&m=all&o=all&d1=&d2=&submitOption=comparing&compareBy=plat&sort=sortName&Soft=CFX HTTP/1.1" 200 402737
[23/Jul/2012 16:00:19] "GET /results/?n=&e=2012Week29&c=solver54&pl=SLES11&p=single&p=defined&p=double&run=default&run=hpmpi&run=mpich&run=mpich2&run=Platform&run=pvm%20parallel&run=serial&sort=sortResult&d=&y=&submitOption=latestsearch&Soft=CFX HTTP/1.1" 200 1557488
[23/Jul/2012 16:02:48] "GET /CFXsearch/?n=&v=14.5&e=all&c=solver54&r=all&p=all&run=all&pl=all&m=all&o=all&d1=&d2=&submitOption=comparing&compareBy=ex&sort=sortName&Soft=CFX HTTP/1.1" 200 408388
[23/Jul/2012 16:03:01] "GET /CFXsearch/?n=&v=14.5&e=all&c=solver54&r=all&p=all&run=all&pl=all&m=all&o=all&d1=&d2=&submitOption=comparing&compareBy=plat&sort=sortName&Soft=CFX HTTP/1.1" 200 402737
Traceback (most recent call last):
  File "/home/install2/testingDatabase/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 281, in run
    self.finish_response()
  File "/home/install2/testingDatabase/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 321, in finish_response
    self.write(data)
  File "/home/install2/testingDatabase/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 400, in write
    self.send_headers()
  File "/home/install2/testingDatabase/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 465, in send_headers
    self._write(str(self.headers))
  File "/home/install2/testingDatabase/Python-2.6.6/Lib/socket.py", line 318, in write
    self.flush()
  File "/home/install2/testingDatabase/Python-2.6.6/Lib/socket.py", line 297, in flush
    self._sock.sendall(buffer(data, write_offset, buffer_size))
error: [Errno 32] Broken pipe
Traceback (most recent call last):
  File "/home/install2/testingDatabase/Python-2.6.6/Lib/SocketServer.py", line 560, in process_request_thread
    self.finish_request(request, client_address)
  File "/home/install2/testingDatabase/Python-2.6.6/Lib/SocketServer.py", line 322, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/home/install2/testingDatabase/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 562, in __init__
    BaseHTTPRequestHandler.__init__(self, *args, **kwargs)
  File "/home/install2/testingDatabase/Python-2.6.6/Lib/SocketServer.py", line 618, in __init__
    self.finish()
  File "/home/install2/testingDatabase/Python-2.6.6/Lib/SocketServer.py", line 661, in finish
    self.wfile.flush()
  File "/home/install2/testingDatabase/Python-2.6.6/Lib/socket.py", line 297, in flush
    self._sock.sendall(buffer(data, write_offset, buffer_size))
error: [Errno 32] Broken pipe
[23/Jul/2012 16:09:59] "GET /PolyflowSummary/ HTTP/1.1" 200 7561
[23/Jul/2012 16:17:42] "GET /?soft=CFX HTTP/1.1" 200 11112
[23/Jul/2012 16:17:44] "GET /?soft=CFX HTTP/1.1" 200 11112
[23/Jul/2012 16:18:06] "GET /site_media/style.css HTTP/1.1" 200 432
[23/Jul/2012 16:18:23] "GET /site_media/style.css HTTP/1.1" 200 432
[23/Jul/2012 16:18:23] "GET /site_media/favicon.ico HTTP/1.1" 200 1718 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:03:53.400

您可以连接到进程并附加调试器。我以前做过这个，它非常有用。 [我的完整笔记在这里](http://acooke.org/cute/DebuggingA0.html)，但精简版是：

*   安装[它](http://svn.python.org/projects/python/trunk/Misc/gdbinit)以便 gdb “理解” python

*   使用`gdb -p PID`（`PID`来自`ps`或类似）连接

*   在 gdb 中生成堆栈跟踪，您将确切地看到消耗 CPU 的位置。

原始信用 -[显示来自正在运行的 Python 应用程序的堆栈跟踪](https://stackoverflow.com/questions/132058/getting-stack-trace-from-a-running-python-application)（事实上，在输入所有这些之后，也许这是链接问题的欺骗？我想问题是不同的，即使答案是相同的......）

# php - 在php中将字符串加密为数字

> ID：11648341
> 
> 赞同：0
> 
> 时间：2012-07-25T11:07:48.427
> 
> 标签：php, encryption, credit-card

> **可能重复：**
> [将字符串转换为数字并返回字符串？](https://stackoverflow.com/questions/8087432/convert-a-string-to-number-and-back-to-string)

我有一个看起来像这样的字符串：

```
AhgRtlK== 
```

我需要能够将此字符串加密和解密为可能如下所示的数字：

```
1275653444 
```

这就像电话费信用（类似的东西）

编辑：我想创建一些东西，比如包含信用卡价值但加密的移动收费信用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:23:13.377

您可以只使用 ascii 值将字符串转换为数字：

```
$integer = '';
foreach (str_split($string) as $char) {
    $integer .= sprintf("%03s", ord($char));
}
return $integer; 
```

要将其转换回来，您可以使用以下命令：

```
$string = '';
foreach (str_split($integer, 3) as $number) {
    $string .= chr($number);
}
return $string; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T11:35:23.633

我认为您对问题的理解不足以提出正确的问题。就我理解你在说什么而言，这不是经过深思熟虑的。假设某些代码意味着 500 美元的信用额度。嗯，它*总是*意味着，今天，明天，永远，即使在我花了一些钱之后。

所以你*不*想要解密为值的代码。您需要识别具有余额的唯一帐户的代码。（有很好的算法可以做到这一点，它们通常基于 HMAC。）

# sql - 基于参数连接表

> ID：11648345
> 
> 赞同：1
> 
> 时间：2012-07-25T11:08:09.710
> 
> 标签：sql, sql-server

在我的数据库中，我有以下三个表，其中列出了字段：

```
TablePS 

 aID 

TableAM 

 aID(pk)
 bID  

TableM 

 bID(pk)
 bName 
```

如果我知道 TablePS 中的 aID，如何找到 TableM 中 bName 的值？我尝试了以下查询：

```
SELECT bName FROM TableM WHERE bID=
(SELECT TablePS.aID,TableAM.aID 
FROM TablePS 
INNER JOIN TableAM 
ON TablePS.aID= TableAM.aID) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:11:03.420

```
select bName
from tableM
    inner join tableAM on tableM.bID = tableAM.bID
where
    aID = [value] 
```

应该足够了。如果你需要加入到表 PS，那么

```
select bName
from tableM
    inner join tableAM on tableM.bID = tableAM.bID
    inner join tablePS on tableAM.aID = tablePS.aID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:11:55.697

```
Select BName from TableM as M inner join TableAM as Am on M.bId=Am.bID
inner join TablePS as P on Am.Aid=P.Aid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:12:24.623

```
SELECT k.bName 
FROM TablePS p 
     INNER JOIN TableAM m ON m.aID = p.aID
     INNER JOIN TableM k on k.bID = m.bID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:32:00.683

如果你不想使用`JOIN`s 那么也许这个。

我假设 aId 是您可以更改的 INT 类型。

```
declare @x as int = 10 --<<change to an id that you are searching for

 select bname from  TableM  where bid in 
            (
            select  bID from TableAM  
            where aID in 
                             (
                             select aID from TablePS where aId = @x
                             ) 
            ) 
```

# c# - 将类型名称映射到派生类

> ID：11648349
> 
> 赞同：0
> 
> 时间：2012-07-25T11:08:29.810
> 
> 标签：c#

我有一个带有生成派生类的静态工厂方法的基类：

```
public class Fruit
{
    ...

    static Dictionary<string, Type> classes = new Dictionary<string, Type>
    {
         {"apple", typeof(Apple)}
        ,{"orange", typeof(Orange)}
    }  

    public static Fruit makeFruit(string typeName) {
        if(classes[typeName] == null) throw new Exception("invalid fruit type");
        Fruit fruit = Activator.CreateInstance(classes[typeName]) as Fruit;
        // do some intializations
        return fruit;
    }
} 
```

如何在不修改 Fruit 类代码本身的情况下添加从 Fruit 派生的类并让 Fruit 类知道它？实际上，我需要能够简单地通过放入 Banana.DLL 或将 Banana.cs 文件添加到我的项目中来添加水果。在 javascript 等其他语言中，我只需在类声明之后将类添加到 Fruit 的静态数组：

```
function Banana()
{
    ...
}
Fruit.classes['banana'] = Banana; 
```

当然这在 C# 中是不可能的，我尝试将代码放在静态构造函数中，但这也不起作用，因为 ctor 仅在类的第一次实例化之前被调用。想到的另一种解决方法是让基类扫描所有程序集中定义的所有类以查找其所有派生类并从每个派生类中定义的静态字符串成员中检索 typeName 但这感觉有点过头了。你有什么建议？

* * *

以下是 Gupta 建议使用 MEF 之后我现在正在做的事情：

添加了一个这样的水果信息类：

```
abstract class FruitInfo
{
    readonly Type type;
    readonly string typeName;

    public FruitInfo(Type type, string typeName)
    {
        this.type = type;
        this.typeName = typeName;
    }
} 
```

为每个 Fruit 创建一个 FruitInfo 类：

```
class Banana : Fruit
{
    ...
}

[Export(typeof(FruitInfo))]
class BananaInfo : FruitInfo
{
    public BananaInfo() : base(typeof(Banana), "banana") { }
}; 
```

在 Fruit 中使用这个静态函数来导入类型：

```
public static void importAllFruitTypes()
{
    var catalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
    var container = new CompositionContainer(catalog);
    IEnumerable<FruitInfo> fruitInfos = container.GetExportedValues<FruitInfo>();
    foreach(FruitInfo fruitInfo in fruitInfos) {
        class[fruitInfo.typename] = fruitInfo.type;
    }
} 
```

任何改进这一点的建议仍然非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:14:15.693

您必须寻找继承 Fruit 的类，但您不能到处寻找。您需要定义要查看的程序集。如果所有类都在同一个程序集中，那么很容易：

```
var types = Assembly.GetAssembly(tyepof(Fruit)).GetTypes();
var derived = types.Where(t => t.IsSubclassOf(typeof(Fruit)).Select(t => new { t.Name, t }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:42:53.807

如果我理解正确，那么您应该检查 MEF（托管可扩展性框架），检查此链接[msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

# java - Spring Integration - 控制自动启动

> ID：11648351
> 
> 赞同：0
> 
> 时间：2012-07-25T11:08:46.700
> 
> 标签：java, spring, spring-integration

我有一个入站文件通道适配器，其`auto-startup`属性设置为`false`. 这个适配器是我的应用程序的起点；如果它没有发送通知文件系统的消息，我希望其他一切都是惰性的。

但是，在启动我的上下文时，消息开始流经系统。为什么？

配置：

```
<int-file:inbound-channel-adapter auto-startup="false" id="fileWatcher" directory="${input.dir}" channel="incomingFiles">
    <int:poller fixed-rate="1000"></int:poller>
</int-file:inbound-channel-adapter>

<int:channel id="incomingFiles"></int:channel> 
```

主要方法：

```
public static void main(String[] args) { 
    logger.info("Started application");
    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("classpath:/spring-config/*.xml");
    context.start();
} 
```

日志：

```
[...]
12:06:56.743 [main] INFO  o.s.i.e.SourcePollingChannelAdapter - started fileWatcher
12:06:56.770 [task-scheduler-6] INFO  o.s.i.file.FileReadingMessageSource - Created message: [[Payload=C:\input\From Spreadsheet.txt][Headers={timestamp=1343214416770, id=b8e92486-d469-406e-8787-df78e23b287a}]] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T11:55:29.250

在适配器上设置 auto-startup="false"（默认为 true）。

您可以手动启动它以获取对它的引用并调用 fileWatcher.start()。如果您包含集成 MBean 导出器，这也可通过 JMX 获得。

或者，您可以向其有效负载中包含“@fileWatcher.start()”的 <control-bus /> 发送消息。

哦; 我刚刚注意到你已经有了。

不要调用 context.start() - 这将启动所有 bean，无论它们的自动启动设置如何。

自动启动控件，错误，自动启动 - 您正在手动启动上下文。

# logging - 应用程序日志中的时间戳格式

> ID：11648366
> 
> 赞同：0
> 
> 时间：2012-07-25T11:09:36.830
> 
> 标签：logging, timestamp

我正在以 JSON 格式为我的云托管应用程序编写日志。

前任：

```
{"timestamp":1343205650,"app_name":"gmail","app_version":"2.45467","category":"Info","err_no":-1,"message":"Started","source_file": "appstartcrawler.cc","source_line":79}

```

该日志稍后由 Splunk 解析和索引。

我的问题是我应该为时间戳使用什么格式，为什么？一些选项是：

1.  ISO 8601（例如：2004-02-12T15:19:21+00:00）
2.  RFC 2822（例如：2000 年 12 月 21 日星期四 16:01:07 +0200）
3.  Unix 时间戳
4.  MySQL 格式等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:57:40.027

根据[这里的文章，](http://dev.splunk.com/view/SP-CAAADP6)选项 1、2 是首选，包括 4 位数的年份和时区。

我们使用的是 ISO 8601，它运行良好。

# c# - c#中的多个事件

> ID：11648367
> 
> 赞同：4
> 
> 时间：2012-07-25T11:09:39.240
> 
> 标签：c#, winforms, events

我正在尝试使用 Visual C# 2010 对 Pokemon 集换式卡牌游戏进行编程，但遇到了一个小问题。我有三个对象：

**游戏**：处理所有游戏数据和规则。

**Form1** : 显示给玩家的窗口。显示允许玩家查看游戏的所有信息，并允许玩家与游戏互动。

**ComputerAI**：该对象跟踪计算机应该知道的内容并保存 AI 的逻辑。

为了让事情继续进行，游戏会引发一个“PriorityChanged”事件，让玩家和 AI 都知道优先级已经改变以及哪个人收到了它（在 EventArgs 中）。表格在日志中报告此信息并酌情显示消息：“等待您”和“等待对手”。computerAI 使用它来决定它是否应该运行它的逻辑。我遇到的问题是，当事件引发时，AI 被告知并运行其逻辑（打牌等），这导致玩家获得优先权并引发另一个 PriorityChanged 事件，AI 得到并且什么也没做（这是正确的）。然后表单一个接一个地得到两个 PriorityChanged 事件，但顺序错误。

为了解决这个问题，我将“PriorityChanged”事件分成两个，“PriorityChanged”和“PriorityRecieved”。表单在“PriorityChanged”事件上更新显示，AI 在“PriorityRecieved”事件上运行其逻辑。

**这个解决方案有效，但我觉得它是错误的。有没有更好的办法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:33:33.920

我怀疑发生的事情如下：

```
PriortyChanged (Start)
  AI -> Process
  AI -> Raise Priority Changed
    Priority Changed (Start)
      AI -> DoNothing
      UI -> Process
    Priority Changed (End)
  UI -> Process
PriorityChanged (End) 
```

# c# - .First() 是在 linq 级别还是在返回的可枚举集合上运行？

> ID：11648370
> 
> 赞同：1
> 
> 时间：2012-07-25T11:09:51.203
> 
> 标签：c#, .net, linq

我遇到了一个同事的代码，并认为它可能效率低下

```
bool any = (from c in listDeviceMaxDate
             where c.DeviceKey == m_deviceList[i].deviceKey
             select c).Any();

if (!any)
{
    latestDate = (DateTime)System.Data.SqlTypes.SqlDateTime.MinValue;
}
else
{
    // from the list we have get the lastest max date from the flow table
    DeviceDateTimeItem temp = (from c in listDeviceMaxDate
                                where c.DeviceKey == m_deviceList[i].deviceKey
                                select c).First();

    latestDate = Convert.ToDateTime(temp.dateTimeMax);
} 
```

我的第一直觉是存储 linq 查询，然后根据需要引用它，但后来我意识到`First()`操作员可能会阻止 linq 实际获取不受约束的查询会执行的所有行。

我最初是如何考虑重构代码的：

```
var deviceList = from c in listDeviceMaxDate
                            where c.DeviceKey == m_deviceList[i].deviceKey
                            select c;

if (!deviceList.Any())
{
    latestDate = (DateTime)System.Data.SqlTypes.SqlDateTime.MinValue;
}
else
{
    // from the list we have get the lastest max date from the flow table
    DeviceDateTimeItem temp = deviceList.First();

    latestDate = Convert.ToDateTime(temp.dateTimeMax);
} 
```

我的问题是`First()`对第二个 linq 查询的调用是否会阻止它返回所有结果，因此，以原始方式执行它实际上是否更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:14:17.677

它实际上取决于它是什么 LINQ 实现。如果它是 LINQ-to-Objects（即`IEnumerable<T>`），那么它*基本上*只是枚举数据，*无论它是什么*，如果有则返回第一项。`First()`道德上的等价物是：

```
foreach(var val in sequence) return val;
throw OopsNoData(); 
```

并且`Any()`应该很好地比较：

```
foreach(var val in sequence) return true;
return false; 
```

（它可能在实际实现中使用原始迭代器，而不是`foreach`）

然而！如果它是 LINQ-to-anything-else，那么所有的赌注都没有了。LINQ 查询（尤其是 LINQ 查询`IQueryable<T>`）被设计为可组合的——例如，我希望 LINQ-to-SQL 能够构成`First()`TSQL`select TOP 1 ...`查询，并且对于大多数其他数据库后端也是如此。所以是的，告诉它你只想要一排应该会有所帮助。然而！我也希望`.Any()`做一些非常相似的事情，所以（理论上）不应该有很大的不同。在一个完美的世界里，它甚至可能用`exists(...)`在 TSQL 中，但这个世界远非完美。

找出方法：附上一个sql tracer，看看最终的TSQL是什么。

* * *

做到这一点的最终方法更简单：

```
var obj = someQuery.FirstOrDefault();
if(obj == null) {
   // no match
} else {
   // do something with "obj"
} 
```

# design-patterns - 域实体/对象和向其中注入服务感觉完全错误，有理由吗？

> ID：11648374
> 
> 赞同：2
> 
> 时间：2012-07-25T11:09:58.990
> 
> 标签：design-patterns, architecture, inversion-of-control, software-design

在我看来，感觉就像我们需要在这里反转构造。

实体依靠服务来填充自身内部的各种属性。这应该交给建筑商，不是吗？（即对象的构造）我正在查看遗留代码并执行一些一般重构。

从本质上讲，实体应该是相当愚蠢的，似乎有混合处理正在进行，我很确定应该/可能会被打破。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:30:10.767

将服务注入域实体可能不是一个好主意，但可能不是你想的那样。

> 从本质上讲，实体应该是相当愚蠢的，似乎有混合处理正在进行，我很确定应该/可能会被打破。

这是一个有争议的问题，但许多人认为哑域实体是一种反模式（[贫血域模型](http://martinfowler.com/bliki/AnemicDomainModel.html)）并且违背了面向对象的编程风格。实体不仅应该包含数据，还应该封装行为。

[问题是，在您的域对象开始遭受低内聚](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)之前，您可以添加多少行为？在您的示例中，依赖服务来填充各种属性是域对象的职责（内聚性）与非职责之间的典型边界情况。此外，如果属性是从数据库中显式加载的，这可能违反了[持久性无知](http://thinkddd.com/glossary/persistence-ignorance/)原则。

如果事实证明这些属性需要从对象的诞生开始就被初始化，我同意你的观点，工厂或生成器可能是获取数据和组装实体的更好地方，特别是在构造逻辑复杂的情况下.

但通常，这种机制是用来提供延迟加载的，换句话说，是按需及时地填充属性。这允许推迟昂贵的操作，例如从数据库中获取潜在的大数据，并避免从一开始就将大对象图加载到内存中。

虽然我个人不会因为延迟加载而看到在构建时注入实体中的服务，但有些人认为这是不好的做法：请参阅[此处](http://lostechies.com/jimmybogard/2010/04/14/injecting-services-into-entities/)和[此处](http://thinkbeforecoding.com/post/2009/03/04/How-not-to-inject-services-in-entities)。您可能更喜欢使用方法注入或[委托注入](http://thinkbeforecoding.com/post/2009/02/07/Lazy-load-and-persistence-ignorance)来获得更清洁、更可测试的实体。

# c# - ASP.NET 向导获取文本框的值

> ID：11648376
> 
> 赞同：2
> 
> 时间：2012-07-25T11:10:03.420
> 
> 标签：c#, asp.net, webforms, viewstate, wizard

我的 Webforms 应用程序中有一个 asp:Wizard：

```
<WizardSteps>
    <asp:WizardStep ID="WizardStep1" runat="server" StepType="Start" Title="a">  
        <asp:TextBox ID="TextBox1" runat="server" Enabled="True"></asp:TextBox>
    </asp:WizardStep>
    <asp:WizardStep ID="WizardStep2" runat="server" StepType="Complete" Title="b">  
    </asp:WizardStep>
</WizardSteps> 
```

现在我想在下一步中访问用户在 TextBox1 中输入的值。在

```
Wizard1_NextButtonClick 
```

我可以访问 TextBox1.text，但用户输入的值不在 text 属性中。还有初始值吗？如何访问用户输入的值？向导和向导步骤的视图状态已启用。

* * *

**解决方案：** 我的错是，我将每个 Page_Load 上的 TextBox1.Text 再次设置为初始值。我不知道这个事件是由向导下一步按钮触发的。

如此简单的解决方案是添加一个 if 案例，它要求页面的 PostBack 状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:23:50.673

检查[此 MSDN 论坛帖子](http://forums.asp.net/t/1783159.aspx/1)。希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:52:02.777

我自己解决了这个问题。我的错是，我将每个 Page_Load 上的 TextBox1.Text 再次设置为初始值。我不知道这个事件是由向导下一步按钮触发的。

如此简单的解决方案是添加一个 if 案例，它要求页面的 PostBack 状态：

```
if(!Page.IsPostBack)
TextBox1.Text = Initialvalue; 
```

# algorithm - am X n 矩阵中的最大平方数

> ID：11648379
> 
> 赞同：-6
> 
> 时间：2012-07-25T11:10:10.153
> 
> 标签：algorithm

问题是 ：

> 给定一个包含 1.s 和 0 的 M x N 阶矩阵，您必须找到可以形成的最大平方数。正方形是通过将包含 1 的相邻单元格组合在一起形成的。最大正方形是不完全包含在另一个正方形中的正方形。部分重叠的最大正方形将单独计算。单位正方形（边长 = 1）也应计算在内。请注意，正方形是填充的，即它们不能包含 0.s。什么是最好的算法？

例子 ：

对于以下 4x5 矩阵，输入将是：

样本输入和输出：

```
11001
11110
11011
11001 
```

输出：

```
9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:11:40.447

设`S(i,j)`为右下角为 的最大正方形的大小`(i,j)`。（我的索引从上到下，从左到右，从 1 开始。）整体`S`是一个`M x N`整数矩阵。计算`S`是动态规划中非常经典的问题，已知它具有 O(MN) 时间复杂度。（如果你不记得了，这里是如何完成的。假设`A`是输入矩阵。你设置`S(i,j) = 0`if `A(i,j) = 0`，并设置`S(i,j) = min(S(i-1,j), S(i,j-1), S(i-1,j-1))+1`if `A(i,j) = 1`。你可以设置`S(0,j) = S(i,0) = 0`如果你喜欢。）

然后通过检查矩阵来提取最大平方`S`。`(i,j)`当且仅当`S(i,j)`非零且大于或等于`S(i+1,j)`，`S(i,j+1)`且时，右下角为 的正方形是最大的`S(i+1,j+1)`。（设置`S(M+1,j) = 0`，`S(i,N+1) = 0`如果你喜欢。）这一步也需要 O(MN) 时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:00:26.467

可能的 4x4 正方形在 (0,0) 和 (1,0) 处具有左上角。

可能的 3x3 正方形在 (0,0)、(1,0)、(2,0)、(0,1)、(1,1)、(2,1) 处具有左上角。

可能的 2x2 正方形在 (0,0), (1,0), (2,0), (3,0), (0,1), (1,1), (2,1) 处有左上角， (3,1), (0,2), (1,2), (2,2), (3,2)。

可能的 1x1 正方形在所有坐标处都有左上角。

所以一个算法可以如下：

从测试 4x4 开始，如果全为 1，则标记为属于 4x4，并增加计数。

然后测试 3x3，如果全 1 且未标记为属于 4x4，则标记为属于 3x3，并增加计数。

然后测试 2x2，如果全 1 且未标记为属于 4x4 或 3x3，则标记为属于 2x2，并增加计数。

然后测试 1x1，如果 1 并且根本没有标记，则增加计数。

返回计数。

您如何标记单元格将是特定于语言的。例如，对于 C，我会使用位域。

**编辑：**为了好玩，我使用 Bitset 在 Java 中实现了这个。

```
import java.util.BitSet; 

public class Program
    {
    // Right-shift bits by 'n' places
    private static BitSet RightShift(BitSet x, int n)
        {
        return x.get(n, Math.max(n, x.length()));
        }

    // Test square of dimension 'size' with top-left at position (h,w) for maximal-ness
    public static boolean IsMaximalSquare(BitSet [][] matrix, int h, int w, int size)
    {
        boolean isMaximal = true;
        for (int a = 0; a < size; a++)
        {
            for (int b = 0; b < size; b++)
            {
                BitSet x = matrix[h + a][w + b];
                if (!x.get(0))
                    return false;
                x = RightShift(x, size + 1);
                if (!x.isEmpty())
                    isMaximal = false;
            }
        }

        if (!isMaximal)
            return false;

        for (int a = 0; a < size; a++)
        {
            for (int b = 0; b < size; b++)
                matrix[h + a][w + b].set(size);
        }

        return true;
    }

    // Populate a 2d array of bitsets from string array
    public static BitSet [][] BuildMatrix(String rows[])
    {
        BitSet [][] matrix = new BitSet[4][5];

        for (int i = 0; i < 4; i++)
        {
            for (int j = 0; j < 5; j++)
            {
                matrix[i][j] = new BitSet(5);
                matrix[i][j].set(0, '1' == rows[i].charAt(j));
            }
        }
        return matrix;
    }

    // Return number of maximal squares from string representation of array
    public static int Solve(String rows[])
    {
        BitSet [][] matrix = BuildMatrix(rows);

        int count = 0;

        for (int size = 4; size > 0; size--) // test squares of size 4x4, 3x3, 2x2 and 1x1
        {
            for (int h = 0; h < 5 - size; h++) // iterate the rows
            {
                for (int w = 0; w < 6 - size; w++) // iterate the columns
                {
                    if (IsMaximalSquare(matrix, h, w, size))
                        count++;
                }
            }
        }

        return count;
    }

    public static void main(String[] args)
        {
        String rows1[] = {"11001","11110","11011","11001"}; // original question
        String rows2[] = {"11111","11111","11111","11111"}; // additional test case 1
        String rows3[] = {"00000","00000","00000","00000"}; // additional test case 2
        String rows4[] = {"11100","11111","11111","00111"}; // additional test case 3
        String rows5[] = {"11101","11111","11111","10111"}; // additional test case 4

        System.out.println(Solve(rows1));
        System.out.println(Solve(rows2));
        System.out.println(Solve(rows3));
        System.out.println(Solve(rows4));
        System.out.println(Solve(rows5));
        }
    } 
```

# iphone - 显示当前周的开始和结束日期

> ID：11648386
> 
> 赞同：2
> 
> 时间：2012-07-25T11:10:27.080
> 
> 标签：iphone, objective-c

我想显示当前周，`UINavigationBar`然后单击下一个或上一个按钮以显示上一周或下周

例子：

```
7 月 22 日 - 7 月 28 日
7 月 29 日 - 8 月 4 日

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:28:50.840

要获得一周的第一个日期，您可以执行以下操作：

```
- (NSDate *)firstDayOfWeekFromDate:(NSDate *)date {
    CFCalendarRef currentCalendar = CFCalendarCopyCurrent();
    NSDateComponents *components = [CURRENT_CALENDAR components:DATE_COMPONENTS  fromDate:date];
    [components setDay:([components day] - ([components weekday] - CFCalendarGetFirstWeekday(currentCalendar)))];
    //[components setDay:(CFCalendarGetFirstWeekday(currentCalendar))];
    [components setHour:0];
    [components setMinute:0];
    [components setSecond:0];
    CFRelease(currentCalendar);
    return [CURRENT_CALENDAR dateFromComponents:components];
} 
```

在获得一天的第一周后，您可以按照@vikas 上述答案中的建议计算天数：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:42:55.793

```
 NSDate * selectedDate = [NSDate date];

-(IBAction)Week_CalendarActionEvents:(id)sender{

NSCalendar *gregorian = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
NSDateComponents *offsetComponents = [[[NSDateComponents alloc] init] autorelease];
NSDate *nextDate;

if(sender==Week_prevBarBtn)  // Previous button events 
    [offsetComponents setDay:-7];
else if(sender==Week_nextBarBtn) // next button events 
    [offsetComponents setDay:7];

nextDate = [gregorian dateByAddingComponents:offsetComponents toDate:selectedDate options:0];

selectedDate = nextDate;
[selectedDate retain];

NSDateComponents *components = [gregorian components:NSWeekCalendarUnit fromDate:selectedDate];
NSInteger week = [components week];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MMMM YYYY"];
NSString *stringFromDate = [formatter stringFromDate:selectedDate];
[formatter release];
[Week_weekBarBtn setTitle:[NSString stringWithFormat:@"%@,Week %d",stringFromDate,week]]; 
```

}

# c# - 提高图像的分辨率 (dpi)

> ID：11648388
> 
> 赞同：4
> 
> 时间：2012-07-25T11:10:30.347
> 
> 标签：c#, image, bitmap, zpl

我不确定如果没有一些第三方库这将是多么可行，但这里是：

我有一张尺寸为 450x900 的图像，我正在尝试打印。
问题是，我用来打印的方法是将原始数据发送到打印机。
图像分辨率为 96dpix96dpi，打印机以 203dpi 运行。
所以...图像变小了。

我需要增加图像的 dpi 才能以“真实”尺寸打印。

```
Bitmap b0 = LoadBitmap();

//I need to rotate it because for some odd reason it prints backwards and upside down.
b0.RotateFlip(RotateFlipType.Rotate180FlipX);

//Set a new resolution, 203dpi
b0.SetResolution(203, 203);

//I need to save and reload the bitmap, because RotateFlip compresses it.
//(annoying as hell, took me ages to figure out why it wasn't working.)
Stream imgStream = new MemoryStream();
b0.Save(imgStream, ImageFormat.Bmp);
b0 = new Bitmap(imgStream);

//get my byte array
ImageConverter converter = new ImageConverter();
byte[] imageData = (byte[])converter.ConvertTo(b0, typeof(byte[])); 
```

所以，相当直截了当。但是 SetResolution(...) 实际上似乎并没有做任何事情。图像打印的大小完全相同，生成的字节数组大小完全相同。

所以我试图弄清楚它实际上在做什么。
但我想它需要用额外的像素填充所有图像数据来做我想做的事情？

如果这不是一种实用的方法，是否有一种简单的拉伸方法或类似方法可以用来获得所需的效果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T11:26:49.967

为什么不将您的图像缩放到更大：

```
 System.Drawing.Bitmap b0 = LoadBitmap();
        double scale = 203/96;
        int width = (int)(b0.Width * scale);
        int height = (int)(b0.Height * scale);
        System.Drawing.Bitmap bmpScaled = new System.Drawing.Bitmap(b0,width, height); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T11:29:57.897

您必须了解，仅更改位图的分辨率 (dpi) 对其像素内容没有任何影响。对于位图，“分辨率”只是一个元数据。真正重要的是像素大小。

因此，如果您希望您的图片*在打印*时更大，您将不得不更改打印机分辨率或缩放您的图像（例如，使用[Grzegorz 的方法](https://stackoverflow.com/a/11648654/1105881)）。

# c# - 为什么 Iterator 定义 remove() 操作？

> ID：11648389
> 
> 赞同：12
> 
> 时间：2012-07-25T11:10:30.113
> 
> 标签：c#, java, iterator, ienumerator

在 C# 中，[IEnumerator](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx)接口定义了一种遍历集合并查看元素的方法。我认为这非常有用，因为如果您传递`IEnumerable<T>`给一个方法，它不会修改原始源代码。

但是，在 Java 中，[Iterator](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)将[删除](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#remove%28%29)操作定义为（可选！）允许删除元素。`Iterable<T>`传递给方法没有任何优势，因为该方法仍然可以修改原始集合。

`remove`的*可选*性是[拒绝遗赠](http://sourcemaking.com/refactoring/refused-bequest)气味的一个例子，但忽略这一点（已经在[这里](https://stackoverflow.com/questions/1536273/why-iterator-remove-has-been-described-as-optional-operation)讨论过）我会对促使`remove`事件在接口上实现的设计决策感兴趣。

导致`remove`被添加到的设计决策是`Iterator`什么？

换句话说，明确没有`remove`定义的 C# 设计决策是`IEnumerator`什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T11:18:58.457

`Iterator`能够在迭代期间删除元素。您不能使用迭代器迭代集合并使用`remove()`该集合的方法从目标集合中删除元素。您将获得`ConcurrentModificationException`下一次调用，`Iterator.next()`因为迭代器无法知道集合究竟是如何更改的，也无法知道如何继续迭代。

当您使用`remove()`迭代器时，它知道集合是如何更改的。此外，实际上您不能删除集合的任何元素，只能删除当前元素。这简化了迭代的继续。

关于传递迭代器或迭代器的优点：您始终可以使用`Collection.unmodifireableSet()`或`Collection.unmodifireableList()`防止修改您的集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:21:17.193

这可能是由于在迭代集合时从集合中删除项目一直是导致错误和奇怪行为的原因。从阅读文档中可以看出，Java 在运行时强制 remove() 每次调用 next() 时只调用一次，这让我认为它刚刚被添加以防止人们在迭代列表时弄乱从列表中删除数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:19:36.757

在某些情况下，您希望能够使用迭代器删除元素，因为这是最有效的方法。例如，当遍历链接数据结构（例如链接列表）时，使用迭代器删除是一个`O(1)`操作......与`O(N)`通过`List.remove()`操作相比。

当然，*许多*集合的设计是为了在集合期间通过任何其他方式修改集合，而不是`Iterator.remove()`导致`ConcurrentModificationException`.

* * *

如果您不想允许通过集合迭代器进行修改，则使用它的迭代器包装它`Collection.unmodifiableXxxx`并使用它的迭代器将产生预期的效果。或者，我认为 Apache Commons 提供了一个简单的不可修改的迭代器包装器。

* * *

顺便说一句`IEnumerable`，与`Iterator`. 看看[`reset()`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.reset.aspx)方法。我也很好奇 C#`LinkedList`类如何处理`O(N)`删除问题。似乎它是通过以值是引用的and属性的形式*公开列表的内部结构来做到这一点的。*这违反了另一个设计原则......并且（IMO）比.`First``Last``LinkedListNode``Iterator.remove()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T11:27:49.450

这实际上是 Java 的一个很棒的特性。您可能很清楚，在 .NET 中遍历列表以删除元素（其中有许多用例）时，您只有两个选项。

```
var listToRemove = new List<T>(originalList);
foreach (var item in originalList)
{
    ...
    if (...)
    {
        listToRemove.Add(item)
    }
    ...
}

foreach (var item in listToRemove)
{
    originalList.Remove(item);
} 
```

**或者**

```
var iterationList = new List<T>(originalList);
for (int i = 0; i < iterationList.Count; i++)
{
    ...
    if (...)
    {
        originalList.RemoveAt(i);
    }
    ...
} 
```

现在，我更喜欢第二个，但是对于 Java，我不需要所有这些，因为当我在一个项目上时，我可以删除它，但迭代将继续！老实说，虽然它可能看起来不合适，但它在很多方面确实是一种优化。

# extjs - 在后退按钮显示旧值后导航视图中的sencha触摸

> ID：11648390
> 
> 赞同：0
> 
> 时间：2012-07-25T11:10:32.983
> 
> 标签：extjs, sencha-touch-2

我正在 sencha touch 2.0 中创建一个应用程序

我正在使用导航视图

我创建了一个按升序排列的数字数学测验

我的问题是当我运行应用程序时它第一次工作正常但是当我点击后退按钮并且老化进入同一个视图时它向我显示旧号码

重要的是按钮文本上出现了新数字，但是当我单击按钮并获取文本时，它会显示旧数字

我的代码

```
sequence_user_answer="";
sequence_answer="";
sequence_number1=this.getRandomNumber(99,10);
sequence_number2=this.getRandomNumber(99,10);
sequence_number3=this.getRandomNumber(99,10);
       if(sequence_number1==sequence_number2)
       {
            while(sequence_number1==sequence_number2)
            {
                sequence_number2=this.getRandomNumber(99,10);
            }
       }
       else if(sequence_number3==sequence_number1 || sequence_number3==sequence_number1)
       {
            while(sequence_number3==sequence_number2 || sequence_number3==sequence_number1)
            {
                sequence_number3= this.getRandomNumber(99,10);
            }
       }

       var sequencenumber1=Ext.getCmp('NumberSequence1');
       sequencenumber1.setHtml(sequence_number1);

       var sequencenumber2=Ext.getCmp('NumberSequence2');
       sequencenumber2.setHtml(sequence_number2);
      // alert("two");

       var sequencenumber3=Ext.getCmp('NumberSequence3');
       sequencenumber3.setHtml(sequence_number3);

       var label1=Ext.getCmp('lblsequencenumber1');
       label1.setHtml("");

       var label2=Ext.getCmp('lblsequencenumber2');
       label2.setHtml("");

       var label3=Ext.getCmp('lblsequencenumber3');
       label3.setHtml("");

       if(sequence_number1>sequence_number2)
       {
            if(sequence_number1>sequence_number3)
            {

                if(sequence_number2>sequence_number3)
                {
                    sequence_answer=sequence_answer+sequence_number3;
                    sequence_answer=sequence_answer+sequence_number2;

                }
                else
                {
                    sequence_answer=sequence_answer+sequence_number2;
                    sequence_answer=sequence_answer+sequence_number3;

                }
                sequence_answer=sequence_answer+sequence_number1;
            }
            else
            {

                sequence_answer=sequence_answer+sequence_number2;
                sequence_answer=sequence_answer+sequence_number1;
                sequence_answer=sequence_answer+sequence_number3;
            }
       }
       else
       {
            if(sequence_number2>sequence_number3)
            {
                if(sequence_number1>sequence_number3)
                {
                    sequence_answer=sequence_answer+sequence_number3;
                    sequence_answer=sequence_answer+sequence_number1;
                }
                else
                {
                    sequence_answer=sequence_answer+sequence_number1;
                    sequence_answer=sequence_answer+sequence_number3;
                }
                sequence_answer=sequence_answer+sequence_number2;
            }
            else
            {
                sequence_answer=sequence_answer+sequence_number2;
                sequence_answer=sequence_answer+sequence_number1;
                sequence_answer=sequence_answer+sequence_number3;
            }
       } 
```

在按钮点击

```
getSequenceAnswer:function(selected_button_id)
{
       //alert(selected_button_id);
       alert(selected_button_id.getHtml()); // here it shows me an old value when i go back and enter again to this view
       var ans_audio=Ext.getCmp('answeraudio');
       var que_audio=Ext.getCmp('questionaudio');
       var result=Ext.getCmp('statuslbl');
       if(sequence_count==0)
       {
            var sequence_label1=Ext.getCmp('lblsequencenumber1');
            sequence_label1.setHtml(selected_button_id.getHtml());
            sequence_count++;
            sequence_user_answer=sequence_user_answer+selected_button_id.getHtml();
       }
       else if(sequence_count==1)
       {
            var sequence_label2=Ext.getCmp('lblsequencenumber2');
            sequence_label2.setHtml(selected_button_id.getHtml());
            sequence_count++;
            sequence_user_answer=sequence_user_answer+selected_button_id.getHtml();
       }
       else if(sequence_count==2)
       {
            var sequence_label3=Ext.getCmp('lblsequencenumber3');
            sequence_label3.setHtml(selected_button_id.getHtml());
            sequence_count++;
            sequence_user_answer=sequence_user_answer+selected_button_id.getHtml();

            if(sequence_answer==sequence_user_answer)
            {
                que_audio.setUrl("");
                ans_audio.setUrl('audio/true.mp3');
                ans_audio.play();            
                this.getTrue(result);
                var marks=Ext.getCmp('lblMarks');
                sequence_marks = sequence_marks+2;
                marks.setHtml(sequence_marks);            
                var total=Ext.getCmp('lbltotal');
                sequence_total_marks= sequence_total_marks+2;
                total.setHtml(sequence_total_marks);
            }
            else
            {
                que_audio.setUrl("");
                ans_audio.setUrl('audio/false.mp3');
                ans_audio.play();
                this.getFalse(result);
                var total=Ext.getCmp('lbltotal');
                sequence_total_marks= sequence_total_marks+2;
                total.setHtml(sequence_total_marks);
            }
       }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:12:34.047

您很可能可以使用 show listener，它在容器显示时调用。在此处编写动态创建组件的逻辑。或者，作为另一种选择，您可以重置标签或其中的其他组件数据。

```
listeners: {
    show: function(list, opts){
        // code to reset  your comp
    }
} 
```

# php - Zen 购物车在其他属性价格之上使用属性价格因素

> ID：11648393
> 
> 赞同：0
> 
> 时间：2012-07-25T11:10:51.250
> 
> 标签：php, zen-cart

我继承了 Zen Cart 商店（1.3.9h），它已经被黑客入侵了（甚至在某些地方的核心），所以升级它不是一个选择。我已将其设置如下：

产品价格：0
产品按属性定价：是

* * *

大期权价格：600
大期权包含在基本价格中：true

小期权价格：200
基本价格中包含的小期权：true

* * *

附加功能价格：60
基本价格中包含的附加功能：true

无附加功能价格：0
基本价格中不含附加功能：true

* * *

用昂贵材料制造价格系数：1.2
用昂贵材料制造价格抵消：1

* * *

我得到以下结果：

大号，普通材料，无附加功能：600 英镑 - 符合预期
大号，普通材料，附加功能：660 英镑 - 符合预期
大号，昂贵材料，无附加功能：633.33 英镑 - 我预计 720 英镑 (600 * 1.2)
大号，昂贵的附加功能：693.33 英镑 - 我预计 792 英镑（（600+60）* 1.2）

我不明白为什么会这样做，似乎使用任何价格因素都行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:53:32.327

价格因素不适用于所有属性选择选项的集合。

它仅适用于可能的最低价格（即：取每个选项名称组的可能最低价格并将其相加以确定可能的最低价格。价格因素将适用于该值）。

# php - PHP：在包含对象的数组中搜索一个值

> ID：11648396
> 
> 赞同：0
> 
> 时间：2012-07-25T11:10:56.597
> 
> 标签：php, arrays, search, object

我正在寻找的是一种从这些中搜索任何内容并取回所有字段的快速方法，例如，如果我在示例代码（如下所示）中搜索 favcolors 中的“red”，我会得到孩子最喜欢的人的名字color this is，即在这种情况下，返回一个包含 jhon 和 homer 的数组。如果搜索词是针对年龄 = 43 的人，则返回 homer，依此类推...：

```
<?php
class person {
public $name;
public $kidsfavcolors=array();
public $age;
}

$people['jhon'] = new person;
$people['jhon']->name = "jhon";
$people['jhon']->age = 30;
$people['jhon']->kidsfavcolors['katherine']= "red";
$people['jhon']->kidsfavcolors['jimmy']= "yellow";

$people['homer'] = new person;
$people['homer']->name = "homer";
$people['homer']->age = 43;
$people['homer']->kidsfavcolors['bart']= "black";
$people['homer']->kidsfavcolors['lisa']= "red"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:18:36.553

这可能是一个起点：

```
function search_objects($objects, $key, $value) { // might contain bugs as I typed in in SO on the go
    $return = array();
    foreach ($objects as $object) {
        $objVars = get_object_vars($object);
        if (isset($objVars[$key]) && $objVars[$key] == $value) {
           $return[] = $object;
        }
    }
    return $return;
}

print_r(search_object($people, 'name', 'john')); 
```

如果没有某种索引，它不会比对象的线性行走快得多。此搜索的复杂度为 n*（可变属性计数）。您将不得不修改它以搜索不是简单的 key=>value 而是数组的属性。您可能想要使用反射。

数据从何而来？我相当乐观，如果我们知道更多，会有更好的方法来做到这一点。

# reporting-services - 报告服务条件格式

> ID：11648397
> 
> 赞同：0
> 
> 时间：2012-07-25T11:11:00.783
> 
> 标签：reporting-services, colors, format

对于报告向导来说，这可能是一个简单的解决方法:)

如果该行早于当前月份，我想将其标记为红色。

转到 BackgroundColor 表达式：

我的表达：=IIF(Month(Fields!Date.Value)< Today(Month()),"Red","White")

Fields.Date.Value 采用以下格式：(DD/MM/YYYY)

已经浏览过类似的帖子，找不到任何合适的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:35:36.643

检查日期是否小于本月初：

```
=iif((Fields!Date.Value < DateAdd("d", 1-Day(Today()), Today())), "Red", "White") 
```

# django - __init__() 至少需要 2 个参数（给定 1 个）在使用 South 和自定义字段进行迁移时

> ID：11648400
> 
> 赞同：1
> 
> 时间：2012-07-25T11:11:08.897
> 
> 标签：django, migration, django-south

**我是南方的新手，我遵循了他们的文档，在初始化南方迁移之后，在运行之后**

```
manage.py migrate appname 
```

**对于以下自定义模型模型，我添加了如下内省规则**

楷模：

```
class DependentIntegerField(models.IntegerField):

     def __init__(self, default_callable, *args, **kwargs):
          self.default_callable = default_callable
          super(DependentIntegerField, self).__init__(*args, **kwargs)

     def pre_save(self, model_instance, add):
          if not add:
               return super(DependentIntegerField, self).pre_save(model_instance, add)

          return self.default_callable(model_instance)

class Level(models.Model):
     group = models.ForeignKey(Level_Group)
     number = models.IntegerField(unique=True)#null=True, blank=True
     threshold = DependentIntegerField(lambda mi:mi.number*50,null=False,blank=True)

     def __str__(self):
          return '%s' %(self.number)

     def get_fib(self):
          return fib(self.number+3)

class Gallery (models.Model):
     contractor = models.ForeignKey(Contractor)
     image = StdImageField(upload_to='GalleryDB', size=(640, 480,True))
     Title = models.CharField(max_length=250,null=True,blank = True)
     Caption = models.CharField(max_length=1000,null=True,blank=True) 
```

内省规则：

```
add_introspection_rules([
    (
        [Level], # Class(es) these apply to
        [],         # Positional arguments (not used)
        {           # Keyword argument
            "threshold": ["threshold", {}],
        },
    ),
], ["^shoghlanah\.models\.DependentIntegerField"])

add_introspection_rules([
    (
        [Gallery], # Class(es) these apply to
        [],         # Positional arguments (not used)
        {           # Keyword argument
            "image": ["image"], "upload_to": ["GalleryDB"]
        },
    ),
], ["^stdimage\.fields\.StdImageField"]) 
```

追溯

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/management/commands/migrate.py", line 107, in handle
    ignore_ghosts = ignore_ghosts,
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/migration/__init__.py", line 219, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/migration/migrators.py", line 235, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/migration/migrators.py", line 310, in migrate_many
    result = self.migrate(migration, database)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/migration/migrators.py", line 133, in migrate
    result = self.run(migration)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/migration/migrators.py", line 99, in run
    south.db.db.current_orm = self.orm(migration)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/migration/migrators.py", line 260, in orm
    return migration.orm()
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/utils/__init__.py", line 62, in method
    value = function(self)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/migration/base.py", line 427, in orm
    return FakeORM(self.migration_class(), self.app_label())
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/orm.py", line 45, in FakeORM
    _orm_cache[args] = _FakeORM(*args) 
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/orm.py", line 124, in __init__
    self.models[name] = self.make_model(app_label, model_name, data)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/orm.py", line 317, in make_model
    field = self.eval_in_context(code, app, extra_imports)
  File "/Library/Python/2.7/site-packages/South-0.7.5-py2.7.egg/south/orm.py", line 235, in eval_in_context
    return eval(code, globals(), fake_locals)
  File "<string>", line 1, in <module>
TypeError: __init__() takes at least 2 arguments (1 given) 
```

我不太确定它是从外地来的，`DependentIntegerField`但我不知道`__init__`它想打电话给哪个，我试过了

```
"threshold": ["threshold", {"ldefault_callable":default_callable}], 
```

但我明白了

```
NameError: name 'default_callable' is not defined 
```

我不知道如何解决这个问题，感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:53:15.200

# 如何将可调用参数传递给南方使用的字段

你有这样的字段类，你想让它与南一起工作——问题在于 default_callable 参数是可调用的并且不能被冻结。

```
class DependentIntegerField(models.IntegerField):

 def __init__(self, default_callable, *args, **kwargs):
      self.default_callable = default_callable
      super(DependentIntegerField, self).__init__(*args, **kwargs) 
```

## 忽略这个论点

完全保留这个参数怎么样——让它在字段上是可选的，并从自检规则中删除这个参数（所以南方忽略它的存在）——我认为可调用的参数不会改变字段的数据库行为——和这是南方唯一关心的事情。在此参数中允许空值（并在执行数据库操作时使该字段失败——比如保存模型实例——使用 null `default_callable`。

在 south run 期间会没问题，因为 south 不保存任何模型 --- 它只是创建数据库表，并且在正常操作期间，模型定义将从`models.py`已`default_callable`设置的文件中获取。

# 传递有关调用什么函数的信息

在某些模块中，创建`default_callable`可由字符串键访问的字典 od 函数。

更改您的字段：

```
 class DependentIntegerField(models.IntegerField):

 def __init__(self, default_callable="foo.bar", *args, **kwargs):
      self.default_callable = default_callable #it it string now!
      super(DependentIntegerField, self).__init__(*args, **kwargs)

 @property
 def default_fun(self):
     return registry[self.default_callable] 
```

其中registry是所有默认函数的字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:16:21.433

南方的自定义字段可能会一团糟，内省规则基本上告诉南方什么以及如何将属性转换为构造函数参数。例如`to`，构造函数参数 from`ForeignKey`转换为 property `field.rel.to`。*此外，您为字段*而不是*模型*定义自省

 *与您的代码相同：在构造对您的字段的构造函数调用时，南必须知道该字段属性`default_callable`转换为同名的构造函数参数。所以我认为你的内省规则应该这样定义：

```
add_introspection_rules([
(
    [DependentIntegerField], # Notice it is for a field not a model 
    [],         # Positional arguments (not used)
    {           # Keyword argument
        "default_callable": ["default_callable", {'default' : <<some defined constant>>}],
    },
),
], ["^shoghlanah\.models\.DependentIntegerField"]) 
```

至于：

```
 NameError: name 'default_callable' is not defined 
```

我猜这个函数 default_callable 没有在当前范围内定义。*

# php - 如何获取媒体：使用 SimpleXML 的内容

> ID：11648401
> 
> 赞同：4
> 
> 时间：2012-07-25T11:11:08.833
> 
> 标签：php, parsing, simplexml

我有一个 XML 提要，我可以在新闻网站上获取有关塞浦路斯的新闻。我想使用新闻图片，当然还有新闻本身。

这是一个xml示例

```
 <item>
      <title>Rumlardan KKTC üniversitelerine ambargo</title>
      <description>
        <![CDATA[<p><a href="http://www.ntvmsnbc.com/id/25368624/">
          <img align="left" border="0" src="http://media.ntvmsnbc.com/j/NTVMSNBC/Components/ArtAndPhoto-Fronts/Sections-StoryLevel/Dünya/Kıbrıs/120723girne.thumb.jpg" alt="" style="margin:0 5px 5px 0" /></a> 
          Kıbrıs Rum yönetimi, KKTC'deki üniversitelerle işbirliği yapan ülkelerin eğitim kurumlarına resmi yazılar göndererek yetkilileri tehdit ediyor. Hindistan üniversitesinden ortak akademik programlara son verilmesi istendi.</p><br clear="all" />]]>
      </description>
      <link>http://www.ntvmsnbc.com/id/25368624/</link>
      <media:content medium="image" url="http://media.ntvmsnbc.com/j/NTVMSNBC/Components/ArtAndPhoto-Fronts/Sections-StoryLevel/Dünya/Kıbrıs/120723girne.thumb.jpg">
        <media:text>
          <![CDATA[<p><a href="http://www.ntvmsnbc.com/id/25368624/">
            <img align="left" border="0" src="http://media.ntvmsnbc.com/j/NTVMSNBC/Components/ArtAndPhoto-Fronts/Sections-StoryLevel/Dünya/Kıbrıs/120723girne.thumb.jpg" alt="" style="margin:0 5px 5px 0" />
            </a>
            </p>
            <br clear="all" />]]>
        </media:text>
      </media:content>
      <pubDate>Mon, 23 Jul 2012 14:27:32 GMT</pubDate>
      <category>Haberler</category>
      <guid isPermaLink="true">http://www.ntvmsnbc.com/id/25368624/</guid>
    </item> 
```

xml的链接是： http: [//www.ntvmsnbc.com/id/24928068/device/rss/rss.xml](http://www.ntvmsnbc.com/id/24928068/device/rss/rss.xml)

现在我使用下面的代码用 simpleXML 解析这个 xml。在此代码上，我可以防止显示`<img>`带有 strip_ 标签的标签，我只能在 CDATA 中显示文本数据。

简而言之，我要问的是如何`media:content url=""`进入我的代码，因为我想在那个 url 中将 thumb.jpg 更改为 hlarge.jpg 。

我试过`$d['media'] = $news->media->attributes();` `'<p>'.$post['media']['url'].`了，但它不工作

这是我的代码：

```
<? 
$NewsFeedUrl =  "http://www.ntvmsnbc.com/id/24928068/device/rss/rss.xml";

$xml = @simplexml_load_file($NewsFeedUrl);

if(is_object($xml)){
    //Rest of our code will be here
}else{
    die('Güncel Haberlere Bağlanılamıyor.');
}

foreach($xml->channel->item as $news){
    if(is_array($newsContent) && count($newsContent)==$amountToShow){
    }
    $description = $news->description;
    $d['title'] =$news->title;
    $d['link'] = $news->link;
    $d['media'] = $news->media->attributes();
    $d['cont'] = $news->description;
    $d['date'] = $news->pubDate;
    $newsContent[]=$d;
}
//$ad=array("thumb", "left");

if(is_array($newsContent)){
    foreach($newsContent as $post){

        echo '

      <article class="entry"><h3>'.'<a href="'.$post['link'].' "target="_blank">'.$post['title'].'</a></h3>
      '.'<div class="meta"><span class="date_post">'.$post['date'].'</span>'.$post['pubDate'].
      //'<p>'.str_replace($ad,"hlarge",$post['cont']).
      '<p>'.$post['cont'].
      '<p>'.strip_tags($post['cont']).
      //'<p>'.$post['media']['url'].
      '<p><a href="'.$post['link'].' "target="_blank" class="button">Devamını Oku</a>'.
      ' </article>';
    }
}else{
    echo '<p>Güncel Haberler Alınamadı Sayfayı Yenilemeyi Deneyin.</p>';
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:51:06.067

该`content`元素具有名称空间前缀 ( `<media:content>`)，因此无法通过通常的方式访问它。

“媒体”的命名空间 URI 来自`http://search.yahoo.com/mrss/`（检查您`rss.xml`的“xmlns:media”）。

试试这个：

```
foreach ($xml->channel->item as $news)
{
    $ns_media = $news->children('http://search.yahoo.com/mrss/');

    echo $ns_media->content; // displays "<media:content>"
} 
```

**编辑 ：**

我认为命名空间uri“ [http://search.yahoo.com/mrss/](http://search.yahoo.com/mrss/) ”存在一些问题

我尝试使用**您的**xml ：

[http://codepad.org/P90bOQUj](http://codepad.org/P90bOQUj) [不工作]

我尝试使用**其他**xml ：

[http://codepad.org/ADYveL6T](http://codepad.org/ADYveL6T) [工作]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T17:50:29.030

我也遇到了这个问题，我用这个解决方案进行了测试：

[https://gist.github.com/enderandpeter/6b760140bf9d2ed9620c](https://gist.github.com/enderandpeter/6b760140bf9d2ed9620c)

它奏效了！

```
$content = $xml->channel->item->children('media', true)->content;

$contentattr = $content->attributes(); 
```

# javascript - javascript分词器

> ID：11648410
> 
> 赞同：1
> 
> 时间：2012-07-25T11:11:54.497
> 
> 标签：javascript

我有一个关于在 javascript 中拆分字符串的问题。我从其他地方得到一个字符串，我只想得到它的一部分。我不能使用 substr 因为它的长度可以改变。我也看了 split 方法，但还不够。例如，我的一个字符串如下所示：

```
<img src="http://image.weather.com/web/common/wxicons/31/30.gif?12122006" alt="" />Partly Cloudy, and 84 &deg; F. For more details? 
```

我只想得到 img 标签和数字 84。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:15:50.440

这是应该使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)的地方。

您可以执行以下操作：

```
var inputStr = '<img src="http://image.weather.com/web/common/wxicons/31/30.gif?12122006" alt="" />Partly Cloudy, and 84 &deg; F. For more details?';
var regex = /<img.*?src="(.*?)".*?>.*?([0-9]+\s*&deg;\s*[CF])/;
var results = regex.exec(inputStr);

results[1]; // => "http://image.weather.com/web/common/wxicons/31/30.gif?12122006"
results[2]; // => "84 &deg; F" 
```

请参阅使用此代码的工作示例：

[http://jsfiddle.net/epkcn/](http://jsfiddle.net/epkcn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:16:00.033

```
var root = document.createElement("div");
root.innerHTML = '<img src="http://image.weather.com/web/common/wxicons/31/30.gif?12122006" alt="" />Partly Cloudy, and 84 &deg; F. For more details?';

var src = root.firstChild.src; //the src
var number = +root.firstChild.nextSibling.nodeValue.match( /\d+/ )[0]; //84 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:14:26.507

您可以使用[正则表达式](http://www.regular-expressions.info/)来准确指定要在字符串中查找的内容。

# c# - 从 XML 读取写入另一个 XML

> ID：11648424
> 
> 赞同：-1
> 
> 时间：2012-07-25T11:12:41.110
> 
> 标签：c#, xml

我想做一个软件，从 xml 中读取一些东西并在其他 xml 中写入另一个东西，例如： 从这里我希望软件读取 <>[value] 之间的所有值

```
<quest>
 <id>1</id>
 <reward_exp1>1848</reward_exp1>
 <reward_gold1>560</reward_gold1>
</quest> 
```

并写一些类似这样的东西

```
<quest id="1"><reward gold="560" exp="184" /></quest> 
```

我可以找到教程或其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:16:58.643

一种方法是使用 linq to xml。

这里有一些链接可以帮助您入门。 [http://msdn.microsoft.com/en-us/library/bb387044.aspx](http://msdn.microsoft.com/en-us/library/bb387044.aspx) http://www.dreamincode.net/forums/topic/218979-linq-to-xml/

还有其他选项，例如 xslt 转换、xml dom

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:27:47.303

您要做的是称为 XML 转换，这是一个常见问题，有许多不同的方法来解决问题。

如果您是编码新手，您可能想查看 XSLT，虽然 XSLT“语言”对于复杂问题可能有点棘手，但我怀疑它可以轻松处理您的问题，并且只需要几行 XSLT '代码'和几行你想用来运行 XSLT 的语言（例如 Java、C#、VB 等）。

# java - 使用 Multimap 检查键中的值的数量

> ID：11648426
> 
> 赞同：0
> 
> 时间：2012-07-25T11:13:00.690
> 
> 标签：java, guava

我想检查 Multimap 中的给定键是否有一定数量的值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T23:14:45.910

要么`multimap.get(key).size()`或`multimap.keys().count(key)`将工作。如果重要的话，第一个可能会“浪费”一个对象实例，而第二个可能不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:17:07.413

您可以在`get(key)`调用的集合上执行将返回集合的 a，`size()`以找出`Multimap`与给定键关联的元素的数量。

从[文档](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)中：

> Collection get(K key) 返回与键关联的所有值的集合视图。

# c++ - 堆内存分析

> ID：11648428
> 
> 赞同：1
> 
> 时间：2012-07-25T11:13:15.587
> 
> 标签：c++, memory, heap-memory

`Solaris`我有一个连续运行的过程。随着时间的推移，进程的堆内存使用量不断增加，当超过 4Gb 时，进程核心转储。

我尝试使用 运行该进程`Purify`，但找不到任何真正泄漏内存的代码。

有什么方法可以分析哪些代码导致堆内存使用量增加？进程的堆内存使用量每 15 分钟增加 4Mb 或 8Mb，并且从未减少。

我使用`pmap`命令检查进程堆内存使用情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:25:28.783

我会将所有对它们的调用`new`以及调用`delete`它们的位置记录到一个文件中，以找出何时`new`调用函数而没有调用相应的函数`delete`。也许你在堆中有循环。

# ios - 如何使粗体字体 NSString 值？

> ID：11648432
> 
> 赞同：1
> 
> 时间：2012-07-25T11:13:26.800
> 
> 标签：ios, string, fonts, bold

在我的 iOS 应用程序中，如何在 NSString 值中使用粗体？我使用下面的代码在 NSString 值中制作粗体文本，但显示错误

像这样：

> 架构 i386 的未定义符号：“_kCIAttributeName”，

```
NSString *boldFontName = [[UIFont boldSystemFontOfSize:12] fontName];
NSString *yourString = [NSString stringWithFormat:@"%@%@%@",key,@":",@" "];
NSRange boldedRange = NSMakeRange(22, 4);

NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithString:yourString];

[attrString beginEditing];
[attrString addAttribute:kCIAttributeName value:boldFontName range:boldedRange];

[attrString endEditing];

NSString *string = [NSString stringWithFormat:@"%@%@",attrString,[dic objectForKey:key]]; 
```

如何在字符串中制作粗体字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:28:31.463

这`NSString`是用于存储没有任何字体格式的**简单文本。**

有`UILabel`一个`font`属性，您可以使用它在 上设置可见文本的字体`UI`，但`UILabel`只能使用一种格式，并且整个文本具有相同的字体和样式。

* * *

如果你真的想使用一种富文本文档，你应该创建一个`UIWebView`类，你可以在里面显示任何带有标准`HTML`标签的文档。

* * *

### **更新**

`UILabel`可以存储自 iOS6 以来的[属性字符串](https://developer.apple.com/documentation/uikit/uilabel/1620542-attributedtext)，这使您有机会在一个`UILabel`实例中显示富格式文本，即使使用各种字体或大小等...

# python - jinja 烧瓶和循环属性

> ID：11648433
> 
> 赞同：3
> 
> 时间：2012-07-25T11:13:28.833
> 
> 标签：python, html, templates, flask, jinja2

您好，我的模板上有以下代码，但无法获取 loop.counter 属性代码有什么问题吗？

```
{% for res in res_list %}
 79             <div  id="tr_{{ res.id }}">
 80                         <li><span data-acttion='rename' class="resname edit" id="zaab{{ loop.counter }}">{{ res.id }}</span>
 81 
 82                         <span class="edit resexpr" data-id="{{ res.id }}">{{ res.expr_highlight|safe }}</span></dd>&nbsp;&nbsp;
 83                         <input type="button" id="pickMeUp" value="pickMeUp">
 84                 </div>
 85                 </li>
 86                 {% endfor %} 
```

我遇到的问题是在第 80 行，我有这个问题：

```
id="zaab{{ loop.counter }}" 
```

浏览器上的输出只是 zaab

如果我将其更改为 loop.first

乍一看，输出是 zaabTrue ，所以我认为计数有一些东西！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T11:39:43.953

好的解决了我在 jinja 2.0 中寻找 jinja 1 命令，该命令甚至不存在，所以你可以使用 loop.index 代替！

# reportviewer - 如何检查rdlc表达式中的多个条件

> ID：11648434
> 
> 赞同：8
> 
> 时间：2012-07-25T11:13:34.307
> 
> 标签：reportviewer, rdlc, iif-function

我在 rdlc 表达式值中只处理了可能的 2

```
=iif((Fields!Gender.Value="1"),"Male","Female") 
```

在这里，我只能使用 2 种可能性。但是，如果我想检查 3 个或更多条件，我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T11:27:02.083

如果你有更多的条件，使用 Switch，它也更具可读性。

```
=Switch(
    Fields!Gender.Value = 1, "Male", 
    Fields!Gender.Value = 2, "Female"
    ) 
```

[rdlc 表达式 iif 使用？](https://stackoverflow.com/questions/999852/rdlc-expression-iif-use)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T13:00:09.817

您可以使用`Code`报表的属性。右键单击报告外的空白区域，然后单击`Report Properties`或单击报告菜单，然后单击报告属性。

单击“代码”选项卡并键入您的条件检查语句，如下所示

```
Public Function GetGender(ByVal val as String) As String
   Dim retVal as String = ""

   If(val = "1")
    retVal = "Male"
   Else If (val = "2")
    retVal = "???"
   Else If (val = "3")
    retVal = "???"
   Else
    retVal = "???"
   End If

   Return retVal

End Function 
```

然后在文本框的表达式中调用该函数

```
= Code.GetGender(Fields!Gender.Value) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-08T07:33:54.000

试试这个：

```
=iif(Fields!Gender.Value="1","Male", iif(Fields!Gender.Value="2","Female","Undefined")) 
```

格式为：

```
=iif(expression=value, true, false) 
```

你可以改变：

```
=iif(expression=value, true, iif(expression2=value2, true, false)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-03T08:21:19.503

开关和自定义代码看起来不错，谢谢你们

但是如果你坚持使用 iif() 条件，

```
=iif( (Fields!Gender.Value="1"), "Male", iif( (Fields!Gender.Value="2"), "Female", "Something Else" ) ) 
```

好的，再见

# python - Python 不检测 .pyc 文件

> ID：11648440
> 
> 赞同：3
> 
> 时间：2012-07-25T11:13:48.987
> 
> 标签：python, import, pyc

我正在使用 Python 3.2（用于构建和执行），这是我的问题。

我打算使用以下设置发布我的 python 应用程序：

有一个主脚本（比如说，`Main.py`），它使用一个编译的模块，比如说`Module1.pyc`）。准确地说，目录结构是：

```
.\Main.py
.\__pycache__\Module1.cpython-32.pyc 
```

当我使用python解释器运行主脚本时，找不到模块并出现以下错误：

```
Traceback (most recent call last):
  File "Main.py", line 10, in <module>
    import Module1
ImportError: No module named Module1 
```

* * *

请注意，我已将当前目录添加到`PYTHONPATH`环境变量中，并且是`sys.path`. 此外，还添加了内部`__pycache__`目录，并且在`sys.path`.

不知道为什么找不到 Module1。我猜，这可能是因为不同的文件名 - Module1.cpython-32.pyc？但是，这就是 Python 3.2 解释器生成它的方式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T11:20:38.153

看看[PEP-3147](http://www.python.org/dev/peps/pep-3147/)。他们描述了 python-lookup 机制是如何工作的。

![在此处输入图像描述](../Images/35eb646603eb45716f416ae2b8cda29b.png)

因此，在您的具体情况下：将文件 Module1.pyc 直接放在根文件夹中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T11:52:20.683

如下所述，两个步骤解决了该问题： 步骤 1：将 Module.cpython-32.pyc 文件从 .__pycache__ 目录复制到 .\ 步骤 2：将文件重命名为 Module.pyc

PS：感谢 gecco 分享细节。

# iphone - TableViewCell 的背景颜色不起作用

> ID：11648441
> 
> 赞同：0
> 
> 时间：2012-07-25T11:13:50.317
> 
> 标签：iphone, ios, uitableview, background-image

![在此处输入图像描述](../Images/b6780d930b3a0ff06fe56cd1a71e721e.png)

就像您在图片中看到的那样，我有一个 tableView（tableviewController 的视图），蓝色视图是部分的 headerView，当我点击它时，它会折叠一些单元格，但我的问题是单元格具有背景的第一部分将tableView（云）作为背景[在这张图片中，我将单元格的背景颜色设置为清除，但如果我为其设置颜色，则右侧和左侧（图片中的LR）部分仍然存在]

我尝试：cell.layer.masksToBounds = YES; 和 cell.contentView.layer.masksToBounds = YES;

我该如何解决？为什么单元格将 tableView BackGroundColor [image] 的第一部分作为 BackGroundColor ？

编辑：一些代码（我正在覆盖 StoryBoard 中的所有值，如背景......）

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
    static NSString *CellIdentifier = @"clientCell";
    ClientCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if ([[[[[[DataManager sharedManager] clientsList] objectAtIndex:indexPath.section] objectForKey:@"rewards"] objectAtIndex:indexPath.row] valueForKey:@"description"] != [NSNull null])
  {
    cell.voucherDescription.text = [[[[[[DataManager sharedManager] clientsList]    objectAtIndex:indexPath.section] objectForKey:@"rewards"] objectAtIndex:indexPath.row] valueForKey:@"description"];
  }

 //configure more labels ..

[cell setBackgroundColor:[UIColor clearColor]];
[cell.voucherDescription setFont:[UIFont fontWithName:SharkFontSystemeName size:17]];    
return cell;
} 
```

在 viewDidLoad ：

```
 [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bg.png"]]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:19:08.110

问题解决，我将 viewController 从 UITableViewController 更改为 UIViewController 并将 tableView 添加为子视图，并且没有更改任何可以完美运行的代码。这是一个错误还是我错过了什么？

# windows-phone-7 - Windows Phone 应用程序部署错误 0x89731812

> ID：11648442
> 
> 赞同：2
> 
> 时间：2012-07-25T11:13:54.137
> 
> 标签：windows-phone-7

当我尝试将我的 XAP 部署到 Windows Phone 时，我收到“错误 0x89731812”消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:13:54.137

您的设备已锁定屏幕。不幸的是，这在任何地方都没有记录，但在第 3 页有一些提示的[讨论。](http://forum.xda-developers.com/showthread.php?p=29293497#post29293497)

1.  打开你的手机（如果还没有的话）
2.  滑开
3.  输入您的密码以解锁

解锁屏幕后重试部署。

编辑：我的坏（好吧，我的搜索引擎）。它们被记录[在这里](http://phone7.wordpress.com/2010/12/01/wp7-deployment-error-codes-explained/)。谢谢键盘P！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:35:25.167

当我偶然发现这个旧线程时，我可能已经找到了这个错误代码的解决方案。

我收到了同样的消息，因为我发现我的设备在设备管理器中没有被正确识别。做了一些研究，发现驱动程序没有选择正确的 USB 端口，因为它已注册到其他 USB 端口之一。

将电话插入第一次注册的第一个 USB 端口后，第一次一切正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T13:32:18.900

如果您的手机费用非常低，它也不会部署该应用程序。
要部署您必须： 1.连接
您的 wp7 手机
2.打开 Zune 3.打开
部署
程序 4.解锁您的手机（如前所述）
5.部署

它需要解锁手机（无限制）或互操作解锁手机，并且手机电量不能低。

# java - Android SDK：查看寻呼机不返回正确视图

> ID：11648444
> 
> 赞同：0
> 
> 时间：2012-07-25T11:13:56.447
> 
> 标签：java, android, android-viewpager, android-preferences

我有一个视图，可以根据用户的操作以 3 种方式访问​​。例如，我有一个商店描述页面，可以通过以下方式访问：

*   寻找店铺
*   通过附近商店地图功能点击商店
*   通过列表视图点击商店

我遇到的问题是，当用户在商店描述页面上并单击返回时，它不会返回到正确的上一页。因此，如果他们通过附近的地图功能访问商店描述，单击返回会将他们带到显然不正确的列表视图。

我尝试通过使用以下代码设置引荐来源网址来解决此问题：

```
SharedPreferences preferences = this.getSharedPreferences("SHARED_PREF",Context.MODE_PRIVATE);  
            SharedPreferences.Editor editor = preferences.edit();
            editor.putString("referrer", "nearby");
            editor.commit(); 
```

然后我在 onBackPressed 方法中检查了这个共享偏好：

```
public static void onBackPressed() {
        System.out.println("REFERRER NOW EQUALS= "+referrer);
        if(referrer == "nearby") {

        TabsViewPagerFragmentActivity.mViewPager.setCurrentItem(13);

        } else if(referrer == "search-list"){

            TabsViewPagerFragmentActivity.mViewPager.setCurrentItem(15);
        } else {

            TabsViewPagerFragmentActivity.mViewPager.setCurrentItem(10);
        }

    } 
```

但是它仍然无法正常工作。有没有更好的方法来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:18:02.500

您将字符串与：

```
 equals(); 
```

而不是 == 使用：

```
if(referrer.equals("nearby")) { 
```

# python - 类属性的迭代

> ID：11648448
> 
> 赞同：0
> 
> 时间：2012-07-25T11:14:06.163
> 
> 标签：python, class

存在以下课程。

```
class Reaction(object):
    Var1 = "lorem"
    Var2 = "impsum"
    Var3 = "dolor" 
```

我想迭代这个类的属性，就像下面的代码一样。

```
for value in Reaction:
    print value 
```

这应该产生以下输出。

```
lorem
ipsum
dolor 
```

我已经找到了这个主题：[如何按照定义的顺序遍历类的属性？](https://stackoverflow.com/questions/2280961/how-to-iterate-over-a-the-attributes-of-a-class-in-the-order-they-were-defined)，但它并没有真正帮助我。

如何使我的类可迭代？

**编辑**：我在这篇文章中想到了类似的东西：[构建一个基本的 Python 迭代器](https://stackoverflow.com/questions/19151/build-a-basic-python-iterator)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:27:42.250

如果您确实需要一个可以通过点符号访问其成员但仍想遍历它们的对象，则需要一个[`namedtuple`](http://docs.python.org/library/collections.html#collections.namedtuple).

```
Reaction = collections.namedtuple('Reaction', ['Var1', 'Var2', 'Var3'])
reaction = Reaction('lorem', 'ipsum', 'dolor')
for value in reaction:
    print value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:18:39.653

首先，您正在尝试的有点不寻常-通常， a`dict`用于这种事情

```
Reaction = {
   var1: "Lorem",
   var2: "Ipsum",
   var3: "Dolor"
} 
```

如果由于某种原因您仍然喜欢您的方法，您可以使用[inspect.getmembers()](http://docs.python.org/library/inspect.html#inspect.getmembers)。辅助函数可能如下所示

```
def attributes(class_):
    for name, value in inspect.getmembers(class_):
        if not name.startswith("__"):
             yield name, value 
```

然后你可以做

```
for name, value in attributes(Reactor):
    # do stuff 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:29:14.823

```
>>> for k, v in Reaction.__dict__.iteritems():
...     if not k.startswith('__'):
...         print v
... 
lorem
dolor
impsum 
```

或更好：

```
>>> import inspect
>>> class Reaction(object):
...     Var1 = "lorem"
...     Var2 = "impsum"
...     Var3 = "dolor"
...     def __iter__(self):
...         return (v for k, v in inspect.getmembers(self) if not k.startswith('__'))
... 
>>> for value in Reaction():
...     print value
... 
lorem
impsum
dolor 
```

# opayo - 将 Sagepay 定期付款与 ASP.NET 集成

> ID：11648464
> 
> 赞同：0
> 
> 时间：2012-07-25T11:14:54.523
> 
> 标签：opayo

我已经完成了与 ASP.NET Webforms 的 Sagepay 服务器协议集成以进行正常支付。但是 Sagepay 中的定期付款是如何工作的，任何类型的请求/响应格式也将很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-19T10:55:08.127

无法使用 Sage Pay 设置 CA 支付频率。您需要自己管理。

# ios - 在 Iphone 的 UITableView 中隐藏表格单元格

> ID：11648470
> 
> 赞同：0
> 
> 时间：2012-07-25T11:15:10.157
> 
> 标签：ios, iphone, uitableview

在我的应用程序中，我想在 uitableview 中隐藏表格单元格，并且我不想在 iPhone 中隐藏 tableview 的标题。在那个表格视图标题上我想添加一个按钮，所以如果有人知道如何隐藏表格视图中的单元格而不隐藏 iPhone 的表格视图中的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:16:57.987

如果要隐藏某个部分中的所有单元格，只需将该部分中的行数设置为 0！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:21:21.937

使用表 Dalegate 方法将该行的高度设置为 0。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# bxslider - 如何在 bxslider 中为 Ajax 生成的 li 的内容实现幻灯片效果

> ID：11648475
> 
> 赞同：4
> 
> 时间：2012-07-25T11:15:18.100
> 
> 标签：bxslider

目前我用 ajax 生成的 li 实现了一个 bxslider。ajax 请求中的一切都很好，内容也很好。我还在 ajax 导航中添加了 bxslider 导航代码。

我的问题是：使用 ajax 导航按钮时，bxslider 的滑块效果不起作用。

我的 bxslider 代码在这里：

```
 $(document).ready(function(){
           myReadyFunction();
     }); 

function myReadyFunction(){

        var slider = $('#moreStories').bxSlider({
                             mode: 'horizontal',
                             speed:900,
                             controls: true,
                             pager: false,
                             displaySlideQty: 3,
                             moveSlideQty:1,
                             ticker: false,
                      });

       $('#go_prev').live("click", function(){
           ///alert("prev");
               slider.goToPreviousSlide();
            return false;
      });

      $('#go_next').live("click", function(){
        //alert("next");
        top.window.close();
        slider.goToNextSlide();
        return false;
      });

} 
```

下面是我通过 jquery 访问 ajax 内容的代码：

```
function loadData(page)
{
     loading_show();    
     $.ajax({
               type: "POST",
       url: "load_page.php",
       data: "page="+page,
       success: function(msg){
          $(".ajaxBased").ajaxComplete(function(event, request, settings){
            loading_hide();
            $(".ajaxBased").html(msg);
          });
         }
      });
}
    loadData(1);  // For first time page load default results
    $('.ajaxBased #navigation a.active').live('click',function(){
        var page = $(this).attr('p');
        loadData(page)
    }); 
```

谁能帮我解决这个滑块问题，我也搜索了论坛，但找不到确切的解决方案。

# android - 带有离散进度点标记的 Android 搜索栏

> ID：11648477
> 
> 赞同：6
> 
> 时间：2012-07-25T11:15:29.987
> 
> 标签：android, seekbar

我想在离散的进度点有一个带有标记的搜索栏（如链接：[YUI 库示例](http://developer.yahoo.com/yui/examples/slider/slider-ticks.html)），但进度间隔不是静态的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:38:32.667

您可以编写一个自定义代码，`View`在您想要的任何点绘制垂直线。

请参阅：http: [//developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

您只需要覆盖`onDraw(Canvas canvas)`即可绘制线条。您可以使用视图宽度的比例作为标记。每条垂直线都在该点

> lineNumber * (viewWidth) / numLines
> 
> 从 lineNumber = 0 到 lineNumber = numLines-1

您的进度将以类似的方式绘制，但是是的..您必须自己做。

# mysql - Mysql select * from tables where primary_key in (1,2,,...) 非常慢

> ID：11648478
> 
> 赞同：1
> 
> 时间：2012-07-25T11:15:30.097
> 
> 标签：mysql, sql, performance

我的一个查询有时很慢，我遇到了麻烦。

```
SELECT * FROM table WHERE primary_key IN (1,2,...) 
```

对于大约 100 个条目，有时甚至 5 秒非常慢。显然我们在主键上有索引。有没有办法优化这个查询。该表略大，大约有 1 亿个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:32:07.580

对于一个 100M 的记录表，您实际上无法在查询优化方面做太多事情，因为它很简单。您可以研究的是 MySQL 配置调整。

如果您的表是 InnoDB/XtraDB（如果不是我建议使用这些引擎），您可能需要查看`innodb_buffer_pool_size`变量 - 使用的索引必须适合内存以实现查询的最佳性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:59:53.383

你能发布一个解释，也许有一些可疑的事情发生。

此外，如果这是一个 MyISAM 数据库表并且您有高并发 INSERT，则该表将在插入期间被锁定，因此您的 SELECT 可能会在此期间阻塞。

# php - MYSQL X 锁定事务

> ID：11648484
> 
> 赞同：0
> 
> 时间：2012-07-25T11:16:03.663
> 
> 标签：php, mysql, transactions, pdo

快速提问，

我想为事务独占锁定一行，例如：

`SELECT.....FROM.....FOR UPDATE`

我的问题是在做之前我是否需要这样做`PDO::beginTransaction`-`UPDATE`在事务内部进行，然后在抛出异常时手动解锁？

或者我可以把它放在交易里面吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:15:55.403

在 PDO::beginTransaction 之前调用`SELECT.....FROM.....FOR UPDATE`没有意义，因为它将在自动包装事务中调用（如果在 mysql 中默认为 autocommit=true），因此不会锁定实际记录。

所以在 beginTransaction 之后做

# java - 从微调器中选择项目，从 ListView 中的 JSON 过滤/排序结果

> ID：11648485
> 
> 赞同：0
> 
> 时间：2012-07-25T11:16:05.647
> 
> 标签：java, android, json, spinner

我有一个来自 json 的列表视图，如下所示：

```
{
"GetPOIByTypeResult": [
    {
        "ID": 1,
        "Name": "Spitalul Judetean",
        "Phone": "085228291",
        "Rating": 44,
        "Schedule": {
            "ClosingHour": 16,
            "ID": 1,
            "IsNonStop": false,
            "IsOpenOnFriday": true,
            "IsOpenOnMonday": true,
            "IsOpenOnSaturday": false,
            "IsOpenOnSunday": false,
            "IsOpenOnThursday": true,
            "IsOpenOnTuesday": true,
            "IsOpenOnWednesday": true,
            "Name": "Monday to Friday",
            "OpenHour": 8
        },
        "Specialities": [
            {
                "ID": 1,
                "Name": "Stomatologie"
            },
            {
                "ID": 2,
                "Name": "Radiologie"
            },
            {
                "ID": 3,
                "Name": "Cardiologie"
            },
            {
                "ID": 4,
                "Name": "Ginecologie"
            },
            {
                "ID": 5,
                "Name": "Pediatrie"
            },
            {
                "ID": 6,
                "Name": "Patologie"
            },
            {
                "ID": 7,
                "Name": "Oncologie"
            },
            {
                "ID": 8,
                "Name": "Macelarie"
            },
            {
                "ID": 9,
                "Name": "Oftalmologie"
            },
            {
                "ID": 10,
                "Name": "Ghipsologie"
            }
        ],
        "Type": "Hospital"
    },

]
} 
```

在我的列表视图中，有来自字段的结果：“名称”。我想按列表中未显示的专业过滤我的列表，只返回值。我实际上不知道如何使这项工作，这是我到目前为止所做的：

```
package com.example.medical.map;

import java.util.ArrayList;

public class SearchActivityHospitals extends ListActivity {

Button searchButton;
Button closeButton;
public Spinner spinner1;
private String poiType[];
private boolean isSearch = false;
EditText editText, editText2;
JsonArrayAdapterHospitals adapter;
ArrayList<Hospitals> tempName = new ArrayList<Hospitals>();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search_activity_layout_actionbar_hospitals);
    adapter = new JsonArrayAdapterHospitals(this, tempName);
    setListAdapter(adapter);

    poiType = new String[] {"", "Stomatologie", "Radiologie", "Cardiologie", "Ginecologie", "Pediatrie", "Patologie", "Oncologie", "Macelarie", "Oftalmologie", "Ghipsologie"};
    //this is my spinner
    ArrayAdapter<String> adapter0 = new ArrayAdapter<String>(SearchActivityHospitals.this, android.R.layout.simple_spinner_item, poiType);
    adapter0.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

    spinner1.findViewById(R.id.spinnerSpecialityHospitals);
    spinner1.setAdapter(adapter0);
    spinner1.setOnItemSelectedListener(new MyOnItemSelectedListener()
    );

    WebService.setOnFinishAllHospitals(new OnFinishAllHospitals() {

        public void onFinishAllHospitals(ArrayList<Hospitals> hospitals) {

            if (hospitals != null) {
                if (hospitals.size() > 0) {
                    tempName.clear();
                    tempName.addAll(hospitals);
                    adapter.notifyDataSetChanged();
                }

            }

        }

    });

    WebService
            .GetPOIByType("http://82.77.55.81:9090/MedicalMap/MedicalMap.svc/Getpoibytype/hospital");

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent intent = new Intent(SearchActivityHospitals.this, DetailsHospitals.class);
            intent.putExtra("Value", tempName.get(position));
            startActivity(intent);

        }
    });

    editText = (EditText) findViewById(R.id.editNameTextHospitals);
    editText.addTextChangedListener(new TextWatcher() {

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            adapter.getFilter().filter(s); // Filter from my adapter
            adapter.notifyDataSetChanged(); // Update my view
        }

        public void afterTextChanged(Editable s) {

        }

    });

    editText2 = (EditText) findViewById(R.id.editAddressTextHospitals);
    editText2.addTextChangedListener(new TextWatcher() {

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            adapter.getFilter().filter(s); // Filter from my adapter
            adapter.notifyDataSetChanged(); // Update my view
        }

        public void afterTextChanged(Editable s) {

        }

    });

}
//and here is my onitem click listener which I have no idea how to do, please help
public class MyOnItemSelectedListener implements OnItemSelectedListener{

    public void onItemSelected(AdapterView<?> parent, View v, int position,
            long id) {
        if(spinner1.getSelectedItem().equals("Stomatologie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Radiologie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Cardiologie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Ginecologie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Pediatrie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Patologie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Oncologie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Macelarie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Oftalmologie")){

        }else{

        }
        if(spinner1.getSelectedItem().equals("Ghipsologie")){

        }else{

        }

    }

    public void onNothingSelected(AdapterView<?> arg0) {
        spinner1.getSelectedItem().equals("");
        {

        }
    }

public void handleClick_search(View v) {

    ImageView searchButton = (ImageView) findViewById(R.id.searchButton);
    searchButton.setVisibility(View.INVISIBLE);
    LinearLayout layout = (LinearLayout) findViewById(R.id.searchFieldLayout);
    layout.setVisibility(View.VISIBLE);

}

public void handleClick_closeSearch(View v) {

    ImageView searchButton = (ImageView) findViewById(R.id.searchButton);
    searchButton.setVisibility(View.VISIBLE);
    LinearLayout layout = (LinearLayout) findViewById(R.id.searchFieldLayout);
    layout.setVisibility(View.GONE);

}

public void showSearch() {

    if (isSearch != true) {
        isSearch = true;
        searchButton.setVisibility(View.INVISIBLE);
        closeButton.setVisibility(View.VISIBLE);
        findViewById(R.layout.search_activity_layout_doctors).setVisibility(View.VISIBLE);

    }

}

public void hideSearch() {
    if (isSearch != false) {
        isSearch = false;
        searchButton.setVisibility(View.VISIBLE);
        closeButton.setVisibility(View.GONE);
        findViewById(R.layout.search_activity_layout_doctors).setVisibility(View.GONE);

    }

}

}
} 
```

所以我的问题是，如何进行以下操作： 从微调器中选择项目-> 按选定条件过滤/排序列表 标准已解析但未显示在列表中，因此数据存在但如何操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:33:13.457

我想你可以做的是：

1.  微调器中项目的 OnSelect，调用一些函数 reorganizeList(String criteria)
2.  在 reorganizeList(criteria) 中：假设你的数据集是一个 List，mListData。对数据使用 Collections.sort() 并使用标准对数据进行排序。
3.  在适配器上调用 notifyDataSetChanged()。

# svg - 创建一个跨浏览器图标 webfont

> ID：11648488
> 
> 赞同：17
> 
> 时间：2012-07-25T11:16:17.910
> 
> 标签：svg, cross-browser, font-face, inkscape, octicons

[我一直在以网页设计师仓库](http://www.webdesignerdepot.com/2012/01/how-to-make-your-own-icon-webfont/)和[intridea](http://www.intridea.com/blog/2012/4/24/symbol-font)的文章为起点制作自己的webfont 。

我知道不同的引擎以不同的方式呈现字体，但我遇到的问题是 firefox 呈现的字体高于 chrome - 在我显示字体的大小下，这非常明显（3 或 4 px - 在按钮上意味着它们'重新完全错位）。

我还参考了[Github 的 occticon 文档](https://github.com/blog/1135-the-making-of-octicons)- 在查看 occticons 如何比较浏览器时，它们看起来很棒！据我所知，没有明显的区别。**他们是如何做到这一点的？**

我正在使用 inkscape 并尝试了几个不同的 svg 入门模板。安装程序`Set width: 1024`已经尝试过各种尺寸的图标，但没有不同的结果。即 512pt 正方形并在基线下方对齐。

**我的问题是在创建 webfont 时我需要遵守哪些规则才能获得浏览器渲染字体之间的最小差异？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-28T01:30:10.633

这是一个复杂的问题，涉及到所谓的垂直指标。字体具有三组这些。在“hhea”表中找到的第一组通常特定于 Mac。在“OS/2”表中找到的另外两组与 Windows（和 Linux）有关。我们的想法是使这些值相等。我们的生成器有一个奇怪的特性，叫做“Fix Vertical Metrics”，它可以很好地猜测这些。请注意，Github 使用生成器来完成他们的图标。

我知道这与 SVG 字体没有特别的关系，但我很确定这就是你的问题所在。具有不同的垂直度量值会破坏跨平台的基线。

一些阅读：

*   [http://blog.typekit.com/2010/07/14/font-metrics-and-vertical-space-in-css/](http://blog.typekit.com/2010/07/14/font-metrics-and-vertical-space-in-css/)
*   [http://webfonts.info//webfonts-know-how/part-1-we-need-talk-about-line-height](http://webfonts.info//webfonts-know-how/part-1-we-need-talk-about-line-height)
*   [http://code.google.com/p/googlefontdirectory/wiki/VerticalMetricsRecommendations](http://code.google.com/p/googlefontdirectory/wiki/VerticalMetricsRecommendations)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T05:00:30.867

有一个 webapp，icomoon：http: [//icomoon.io/app/](http://icomoon.io/app/)

它使这项工作做得很好，但您必须测试不同图标的渲染。

如果您不想设计所有东西，他们会提供很多图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T11:30:00.027

我有同样的问题，并通过手动设置所有三种类型的指标来解决它。

您可以在此处查看带有设置屏幕截图的我的工作解决方案：[https://stackoverflow.com/a/20609766/955413](https://stackoverflow.com/a/20609766/955413)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-18T10:53:10.647

我使用**[Icomoon 应用程序](https://icomoon.io/app/#/select)**创建**[Emoji 图标字体](https://github.com/jslegers/emoji-icon-font)**以及基于每个项目创建自定义图标字体。

Icomoon 应用程序允许您执行以下各项操作：

*   从几种流行的图标字体中获取一个或多个图标
*   上传其他字体，可以是图标字体，也可以是常规字体
*   上传 SVG 文件以用作图标
*   从任意数量的可用字体中组合任意数量的图标
*   为您需要的任何字符设置 UNICODE 十六进制值
*   导出和/或保存您创建的字体集

![爱可梦](../Images/ae10b17b62cb1647689e60805d1912df.png)

有关更多详细信息，请参阅**[使用 Unicode 补充多语言平面符号创建 webfont](https://stackoverflow.com/questions/19824628/create-webfont-with-unicode-supplementary-multilingual-plane-symbols/27410391#27410391)**。

# jquery - 在 jQuery 中，如何在具有 id 属性的标签内按类子元素进行选择？

> ID：11648495
> 
> 赞同：3
> 
> 时间：2012-07-25T11:16:31.887
> 
> 标签：jquery, html, dom, jquery-selectors

我有以下代码

```
<tr id="myid">
<td>
<div>
...
<a href="" class="myclass"></a>
<a href="" class="myclass"></a>
<a href="" class="myclass"></a>
<a href="" class="myclass"></a>
<a href="" class="myclass"></a>
...
</div>
</td>
</tr>
<tr id="anotherid">
<td>
<div>
...
<a href="" class="myclass"></a>
<a href="" class="myclass"></a>
<a href="" class="myclass"></a>
<a href="" class="myclass"></a>
<a href="" class="myclass"></a>
...
</div>
</td>
</tr> 
```

我正在尝试在 ID 为“myid”属性的标签 TR 中选择 A 标签，但是以下代码不起作用：

```
$('#myid.myclass') 
```

如何使用 TR ID 选择 A 标签？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T11:17:49.893

使用这个： -和`$('#myid .myclass')`之间应该有一个空格`#myid``.myclass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:18:10.033

选择里面的所有`<a>`标签`#myid`而不考虑嵌套

```
$("a", "#myid") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:23:53.700

它与 CSS 选择器相同。您的标记意味着您将需要一个空格：

**回答**

```
$('#myid .myclass') 
```

**信息**

这`$('#myid.myclass')`意味着 .myclass`#myid`像这样坐在一边：

```
<tr id="anotherid" class="myclass"> 
```

# hibernate - Grails 唯一约束

> ID：11648496
> 
> 赞同：0
> 
> 时间：2012-07-25T11:16:34.387
> 
> 标签：hibernate, grails, constraints, unique, unique-constraint

我有一个使用`hibernate`.Under`grails 1.3.7`一切正常的 grails 应用程序，但是当我切换到`grails 2.0.3`以下问题时：

我无法检查`java/src`目录下的唯一字段。如果我尝试使用相同的唯一键添加或更新任何记录，则会出现批量插入错误。

在`src/groovy`我创建一个类来检查验证下：

```
Example: LanguageCommand.groovy

package myproject.command

import org.codehaus.groovy.grails.validation.Validateable;

@Validateable
class LanguageCommand {

    String code
    String codeDescription

    static constraints= {
        code(blank:false, maxSize:50)
        codeDescription(maxSize:200)
    }
} 
```

在`src/java`我创建一个类来检查唯一字段

```
Example: LanguageConstraints.groovy

package myproject.model

    constraints = {
        code unique: true
    } 
```

其中`myproject.model`是包含休眠类的包的名称。

**笔记：** `Validation class works fine but the unique one not. i try to add unique constraints to validation class, same error appears`

**错误：**

```
Error 500: Executing action [save] of controller 
           [myproject.controller.LanguageController] 
           caused exception: Runtime error executing action
Servlet: grails
URI: /myproject/grails/language/save.dispatch
Exception Message: Batch entry 0 insert into language 
                   (language_code, code_description, version, id) 
                   values (en, English, 0, 1) was aborted. 
                   Call getNextException to see the cause.
Caused by: Batch entry 0 insert into language 
           (language_code, code_description, version, id) 
           values (en, English, 0, 1) was aborted. 
           Call getNextException to see the cause.
Class: LanguageController
At Line: [125]
Code Snippet: 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:48:38.340

您将在下面`src/groovy`创建一个 LanguageCommand.groovy 类：

```
package myproject.command

import org.codehaus.groovy.grails.validation.Validateable;

@Validateable
class LanguageCommand {
    String oldCode
    String code
    String codeDescription

    static constraints= {
        code(maxSize:40, blank:false, validator: { val, obj ->
            if((obj.oldCode != val) && (Language.findWhere(code:val) != null))
                return['constraints.unique.code']
        })
        codeDescription(maxSize:200)
    }
} 
```

在 i18n/messages.properties 你必须写`(the message you want to display it)`：

```
constraints.unique.code = code must be unique 
```

并且在检查验证之前的更新方法中的控制器中，您必须编写：

```
def update = {  
    LanguageCommand languageCommand ->
    Language languageInstance = Language.get(params.id)
    if(languageInstance) {
        languageCommand.oldCode = languageInstance.code
        if (!languageCommand.validate()){
            ...
            ...
        }
        ...
        ...
    }
    ...
    ...
} 
```

**注意：** oldCode 仅用于更新而不是创建，我们将更新前的代码存储在其中，因为如果我们通过代码搜索语言而不更改它会返回结果，那么当代码 = 等于旧代码时我们没有' t 按代码搜索语言。

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:30:10.353

在 Grails 2 中，唯一约束可能仅适用于 GORM 域（gorm 映射），而不适用于 Hibernate 域（休眠映射）。在 grails 中添加了适当的验证器。见类`isValid`方法`AbstractPersistentConstraint`。

Grails 1.3.x 没有检查这个。

# file - 使用批处理文件按名称和日期重命名文件

> ID：11648499
> 
> 赞同：0
> 
> 时间：2012-07-25T11:16:38.613
> 
> 标签：file, batch-file

我正在尝试创建一个批处理文件，该文件通过名称连接下划线和日期重命名文件夹中的所有文件。例如，如果文件名是>User1，那么它将是>User1_25072012。我找到了一个代码，它按日期更改所有文件名，而不是如上例中的名称和日期。

那么你能告诉我一个方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:32:26.047

这应该这样做

```
@echo off
cd "C:\account folder"
for /f "tokens=1-3 delims=/" %%a in ('echo %date%') do set today=%%a%%b%%c
for %%f in (*.*) do ren "%%f" "%%~nf_%today%%%~xf" 
```

# c# - “System.ObjectDisposedException”类型的异常

> ID：11648504
> 
> 赞同：3
> 
> 时间：2012-07-25T11:17:06.943
> 
> 标签：c#, .net, entity-framework, ef-code-first

我有以下 EF 代码第一个代码。它工作正常。但是当我寻找“club2.Members”的价值时，它会说：

> “club2.Members”引发了“System.ObjectDisposedException”类型的异常。

消息是：

> ObjectContext 实例已被释放，不能再用于需要连接的操作。

我没有为 Members 属性设置值。没关系。但是，它不应该在内部引起任何异常。

1.  有没有办法克服这个异常？
2.  删除此异常是否有助于提高性能？
3.  为什么这个异常没有导致程序执行终止？

注意：我不需要俱乐部实体中的会员数据（在我打电话的地方）。即使当时还没有会员加入俱乐部。我只需要摆脱异常；不要使用急切加载来加载数据。如何避免**异常**？

![在此处输入图像描述](../Images/88d497bb04e53415a0647c6144369d0e.png)

```
namespace LijosEF
{

public class Person
{
    public int PersonId { get; set; }
    public string PersonName { get; set; }
    public virtual ICollection<Club> Clubs { get; set; }
}

public class Club 
{
    public int ClubId { get; set; }
    public string ClubName { get; set; }
    public virtual ICollection<Person> Members { get; set; }

}

//System.Data.Entity.DbContext is from EntityFramework.dll
public class NerdDinners : System.Data.Entity.DbContext
{

    public NerdDinners(string connString): base(connString)
    { 

    }

    protected override void OnModelCreating(DbModelBuilder modelbuilder)
    {
         //Fluent API - Plural Removal
        modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }

    public DbSet<Person> Persons { get; set; }
    public DbSet<Club> Clubs { get; set; }

}
}

    static void Main(string[] args)
    {
        Database.SetInitializer<NerdDinners>(new MyInitializer());

        CreateClubs();
        CreatePersons();

    }

    public static void CreateClubs()
    {

        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
        using (var db = new NerdDinners(connectionstring))
        {

            Club club1 = new Club();
            club1.ClubName = "club1";

            Club club2 = new Club();
            club2.ClubName = "club2";

            Club club3 = new Club();
            club3.ClubName = "club3";

            db.Clubs.Add(club1);
            db.Clubs.Add(club2);
            db.Clubs.Add(club3);

            int recordsAffected = db.SaveChanges();

        }
    }

    public static Club GetClubs(string clubName)
    {
        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
        using (var db = new NerdDinners(connectionstring))
        {

            var query = db.Clubs.SingleOrDefault(p => p.ClubName == clubName);
            return query;
        }
    }

    public static void CreatePersons()
    {
        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
        using (var db = new NerdDinners(connectionstring))
        {

            Club club1 = GetClubs("club1");
            Club club2 = GetClubs("club2");
            Club club3 = GetClubs("club3");

             //More code to be added (using db) to add person to context and save
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T11:22:15.853

您收到此错误是因为您在执行查询后处理了 dbcontext。如果要使用“成员”中的数据，请使用查询加载它：http: [//blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature- ctp5-part-6-loading-related-entities.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

如果您不需要延迟加载，这意味着只加载您在查询中加载的数据（这将消除异常），请设置 LazyLoadingEnabled = false。看这里： [在 Entity Framework 4 中默认禁用延迟加载](https://stackoverflow.com/questions/2967214/disable-lazy-loading-by-default-in-entity-framework-4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:33:47.523

**方法 1**

不需要下面的方法。这可以在当前上下文中完成。它只是一个选择。

```
GetClubs("club1"); 
```

**方法 2**

附加实体解决了问题：

```
 Club club1 = GetClubs("club1");
            Club club2 = GetClubs("club2");
            Club club3 = GetClubs("club3");

            ((IObjectContextAdapter)db).ObjectContext.Attach((IEntityWithKey)club1);
            ((IObjectContextAdapter)db).ObjectContext.Attach((IEntityWithKey)club2);
            ((IObjectContextAdapter)db).ObjectContext.Attach((IEntityWithKey)club3);

            var test = club2.Members; 
```

我不应该尝试引用 club2.Members（属于 Club 类），因为创建 Person 对象不需要它。

成员是 Club 类中的相关数据。由于它是虚拟的，它会做延迟加载。

在不同的场景中，如果我必须从不同的上下文中检索 Members 对象（这是一个相关数据），我应该依赖预先加载（在为您提供 Club 对象的地方）。

另请参阅以下内容：

1.  [实体框架：多对多关系中的重复记录](https://stackoverflow.com/questions/11646299/entity-framework-duplicate-records-in-many-to-many-relationship)

2.  [System.ObjectDisposedException：ObjectContext 实例已被释放，不能再用于需要连接的操作](https://stackoverflow.com/questions/4206634/system-objectdisposedexception-the-objectcontext-instance-has-been-disposed-and)

3.  [ObjectContext 实例已被释放，不能再用于需要连接的操作](https://stackoverflow.com/questions/5360372/the-objectcontext-instance-has-been-disposed-and-can-no-longer-be-used-for-opera)

4.  [ObjectContext 实例在绑定时已被释放](https://stackoverflow.com/questions/3529977/objectcontext-instance-has-been-disposed-while-binding)

# java - 64 位 Linux 上的 JVM、Tomcat

> ID：11648507
> 
> 赞同：1
> 
> 时间：2012-07-25T11:17:16.270
> 
> 标签：java, tomcat, jvm, 64-bit

在 32 位系统上，JVM 的内存限制为 1.5 到 2 GB。64 位 Linux 上的 JVM 内存有什么好的价值？如何将其映射到 tomcat 中的最大线程数和最大请求​​数？

我正在使用 JDK 6+ 和 tomcat 7。四核处理器上的可用 RAM 为 12 GB。

MRD

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:28:49.767

我认为这个问题没有现成的答案。这在很大程度上取决于您要托管的应用程序类型以及系统上的应用程序数量。我在 64 位 linux 系统上管理一个带有 3-4 个应用程序的小型服务器。使用 4GB 对我来说绰绰有余。

我的建议是大胆猜测您的应用程序需要多少内存。然后用监控工具启动tomcat，然后观察你的tomcat上有多少负载。您可能为 tomcat 分配了太多资源。也许太少了。你永远不会知道

请阅读这篇关于[同时用户](http://www.tomcatexpert.com/ask-the-experts/simultaneous-users)的文章，以及关于[tomcat中的负载平衡的文章](http://people.apache.org/~mturk/docs/article/ftwai.html)

基本上你必须区分用户和请求。您可能有 5000 个用户浏览您的网站，但同时只有 100 个用户请求新页面。默认情况下，tomcat 支持 50 个并发请求（虽然不是 100% 肯定）。但是这个数字可以在你的 tomcat 配置中改变。显然，您可能需要更多硬件。在第二篇文章中，建议每个 tomcat 实例最多 200 个请求。只有在第二篇文章中提到的简单计算规则并进行一些监控才能有所帮助。

甚至还有一个用于 tomcat 的负载均衡器管理器。看看 [tomcat的负载均衡器](http://tomcat.apache.org/connectors-doc/generic_howto/loadbalancers.html)

要考虑的另一件事是，尽管您拥有支持 5000 个用户的硬件和正确的负载平衡，但您还需要足够的带宽来做到这一点。在第二篇《tomcat中的负载均衡》中再次说明

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:45:36.530

这取决于有多少用户将同时访问您的应用程序。

有时，应用程序会在特定时间点运行非常缓慢，

例如，在上午 8:00，登录操作导致应用无法正常运行。

我建议您根据“用户总数”估算每个用户的平均内存，

然后你可能会得到一个几乎正确的内存设置。

* * *

# android - SYSTEM_UI_FLAG_LOW_PROFILE 不起作用

> ID：11648510
> 
> 赞同：2
> 
> 时间：2012-07-25T11:17:33.060
> 
> 标签：android, view, softkeys

我有一个`Activity`内容视图，其根视图为**`FrameLayout`**，我想隐藏底部栏的软键，我在 myActivity 的 onCreate 中添加了以下代码，但它没有任何影响。

```
FrameLayout frameLayout = (FrameLayout)this.findViewById(R.id.myframe);
frameLayout.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

我需要添加任何许可或额外代码吗？

提前致谢 ：）

**注意**：我在 Android **HoneyComb（API 13）上尝试这个**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:23:10.200

我想您需要的只是将 AndroidManifest 中的 targetSdkVersion 设置为适当的，例如分别为 3.0 或 3.2 设置 11 或 13。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T23:10:10.200

[SYSTEM_UI_FLAG_LOW_PROFILE](http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_LOW_PROFILE)在 API 级别 14（冰淇淋三明治）中添加。在此之前它不会起作用，例如在 Honeycomb 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:32:00.733

尝试这个：

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-17T09:14:39.800

SYSTEM_UI_FLAG_LOW_PROFILE 在 API 级别 14 中添加，在它之前是 STATUS_BAR_HIDDEN，这是从 api 11 开始，但现在已弃用

来源[http://developer.android.com/reference/android/view/View.html#STATUS_BAR_HIDDEN](http://developer.android.com/reference/android/view/View.html#STATUS_BAR_HIDDEN)

# c# - AppFabric 缓存是否支持 WCF 持久服务的持久性？

> ID：11648511
> 
> 赞同：0
> 
> 时间：2012-07-25T11:17:44.527
> 
> 标签：c#, wcf, appfabric

我们有配置为使用 SqlPersistenceProvider 的持久服务。每次调用 WCF Durable 服务大约需要 3 到 4 秒，其中只有 200 毫秒是实际处理时间。其余时间仅用于 Serizlization（其大对象）或将大对象保存到 sqlserver。

任何人，请指导我设置 AppFabric 缓存 1.1 以使用而不是默认的 sqlpersistenceprovider？

这受 AppFabric 支持吗？我对 AppFabric 很陌生。

附件是显示处理时间 200 毫秒
SQL Server 保存的跟踪屏幕截图，加载时间分别为 3.2 秒。

![在此处输入图像描述](../Images/427d439f6f1b9eab4614db5a69ccaa0c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:52:37.660

AppFabric 和任何其他分布式缓存都不能解决序列化问题。对象必须被序列化以存储在您的进程之外。

如果大对象的序列化是最大的时间消耗者，请考虑其他设计选项。

# ruby-on-rails - RSpec 测试以 2 种方式编写，其中一种失败

> ID：11648512
> 
> 赞同：0
> 
> 时间：2012-07-25T11:17:46.570
> 
> 标签：ruby-on-rails, ruby, unit-testing, testing, rspec

我有这个 RSpec 测试 - 它正确通过：

```
 it "should have the right title" do
  page.should { have_selector('title', 
                            :text => "#{base_title}") }
end 
```

我正在尝试重新编写相同的代码，如下所示：

```
 it { should have_selector('title', 
                          :text => "#{base_title}") } 
```

**但较短的代码失败了。** 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:28:04.357

答案是我忘了在该声明之前添加：

```
subject { page } 
```

# object - 在销售队伍中创建数据并将数据插入到对象中？

> ID：11648514
> 
> 赞同：0
> 
> 时间：2012-07-25T11:17:55.490
> 
> 标签：object, salesforce, insertion

我想创建数据并将其插入到销售人员对象中。如何在 Sales Force 免费试用控制台中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:00:27.033

您必须使用具有“**新建...** ”选项的 ListView 的**选择**。

 **我建议你阅读这个[官方](https://na14.salesforce.com/help/doc/en/salesforce_agent_console_cheatsheet.pdf)文档

> 创建记录 从新建下拉列表中，选择任何对象以创建新记录。新记录页面显示在详细视图中。**

# java - 如何在 Java 桌面应用程序中使用此 php 代码

> ID：11648520
> 
> 赞同：0
> 
> 时间：2012-07-25T11:18:26.490
> 
> 标签：java, php

我有这个简单的 php 代码，并希望以这种方式在 java 应用程序中使用此代码，即用户在 java 控制台中输入 id 并检查该 id 的状态，然后将其显示给用户

我应该将此代码更改为java代码吗？如何？请帮帮我

```
<?php
// www.webmn.net
function yahoo($id){
$url = 'http://opi.yahoo.com/online?u=';
$data = file_get_contents($url . $id);
if (trim(strtolower(strip_tags($data))) != 'user not specified.') {
return (strlen($data) == 140) ? 'online' : 'offline';
} else {
return trim(strip_tags($data));
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:23:56.590

您可以将 php 文件放入您的服务器中，然后使用此功能从您的 java 应用程序向其发送发布请求

```
`public static String httpPost(String urlStr, String[] paramName,
            String[] paramVal) throws Exception {
              URL url = new URL(urlStr);
              HttpURLConnection conn =
                  (HttpURLConnection) url.openConnection();
              conn.setRequestMethod("POST");
              conn.setDoOutput(true);
              conn.setDoInput(true);
              conn.setUseCaches(false);
              conn.setAllowUserInteraction(false);
              conn.setRequestProperty("Content-Type",
                  "application/x-www-form-urlencoded");

```
 // Create the form content
          OutputStream out = conn.getOutputStream();
          Writer writer = new OutputStreamWriter(out, "UTF-8");
          for (int i = 0; i < paramName.length; i++) {
            writer.write(paramName[i]);
            writer.write("=");
            writer.write(URLEncoder.encode(paramVal[i], "UTF-8"));
            writer.write("&");
          }
          writer.close();
          out.close();

          if (conn.getResponseCode() != 200) {
            throw new IOException(conn.getResponseMessage());
          }

          // Buffer the result into a string
          BufferedReader rd = new BufferedReader(
              new InputStreamReader(conn.getInputStream()));
          StringBuilder sb = new StringBuilder();
          String line;
          while ((line = rd.readLine()) != null) {
            sb.append(line);
          }
          rd.close();

          conn.disconnect();
          return sb.toString();
        } 
```` 

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2012-07-25T11:26:09.160

这段代码是关于 ajax 请求的。

1、可以使用HTTPclient重写PHP代码。

2、下载一个PHP服务器，如resin：

```
http://www.caucho.com/resin-application-server/ 
```

然后，用 java 运行 PHP-server（通过一个 cmd.bat 文件），你编写一个 Java-HTTPclient 来访问这个 PHP 页面以获得结果。

祝你好运。 
```

# xcode4 - 想不通这个叫什么

> ID：11648521
> 
> 赞同：0
> 
> 时间：2012-07-25T11:18:31.047
> 
> 标签：xcode4

由于我无法发布图片，我将不得不将您引用到执行此操作的应用程序。如果你有 twitter 应用程序并且你要转推一条推文并且该视图出现在底部，这叫什么？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:24:14.713

它被称为弹出窗口。它的视图不是@底部，而是位于您选择重新推文的推文的正下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:25:00.533

Apple 用户界面模型是向上滑动的对话框应该是模态对话框。

见：`presentModalViewController:animated` [这里](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

# swt - 在 Eclipse 中使用 WindowBuilder 将 SWT TableView 窗口添加到现有程序

> ID：11648525
> 
> 赞同：0
> 
> 时间：2012-07-25T11:18:54.770
> 
> 标签：swt, jface, windowbuilder

我已经在 Eclipse Juno 中安装了 WindowBuilder，并且能够创建详细信息页面。生成的源代码：

```
 /**
 * Initialize the details page.
 * @param form
 */
public void initialize(IManagedForm form) {
    managedForm = form;
}

/**
 * Create contents of the details page.
 * @param parent
 */
public void createContents(Composite parent) {
    FormToolkit toolkit = managedForm.getToolkit();
    parent.setLayout(new FillLayout());
    // 
```

需要初始化一个 ManagedForm。一个非常 Java 的新手，我完全不知道从哪里得到这个对象。我可能错过了显而易见的事情，但非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:52:47.253

查看`ManagedForm`课程。创建一个继承自 ManagedForm 的新类，你就得到了一个`IManagedForm`实现：

```
public class MyManagedForm extends ManagedForm {
    public MyManagedForm(Composite parent) {
        super(parent);
    }
} 
```

我建议使用像 Eclipse 这样的编辑器并将源代码放入其中，这样您就可以轻松地浏览文档和 API 的一般类。[Lars Vogel 对 Eclipse APIs 的介绍](http://www.vogella.com/articles/EclipseForms/article.html)也很不错。

# php - 我怎样才能优化这个需要很多时间的查询？

> ID：11648526
> 
> 赞同：0
> 
> 时间：2012-07-25T11:18:55.710
> 
> 标签：php, mysql

我有这个查询大约需要 40-50 秒才能加载

```
SELECT
  members.latitude,
  members.longitude,
  members.mem_id
FROM members
WHERE profile_type != "C"
    AND (gender = 'm'
          OR gender = 'f')
    AND members.mem_id IN(SELECT DISTINCT
                            n2.mem_id
                          FROM network n1,
                            network n2
                          WHERE n1.frd_id = n2.mem_id
                              AND n1.mem_id = '48'
                              AND n2.frd_id = '48')
ORDER BY profilenam 
```

有包含用户朋友的网络表

请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:24:44.227

这很慢，因为使用的子查询在没有使用派生表的子查询的情况下尝试它：

```
SELECT latitude, longitude, a.mem_id
FROM members a
     INNER JOIN (SELECT DISTINCT n2.mem_id AS mem_id
                 FROM network n1,
                      network n2
                 WHERE n1.frd_id = n2.mem_id
                       AND n1.mem_id = '48'
                       AND n2.frd_id = '48'
                ) b
                ON a.mem_id = b.mem_id
WHERE profile_type != "C"
      AND (gender = 'm'
           OR gender = 'f')
ORDER BY profilenam; 
```

还要在表上添加适当的索引并用于`EXPLAIN EXTENDED`检查索引使用情况：

```
ALTER TABLE network ADD KEY ix1(mem_id);
ALTER TABLE network ADD KEY ix1(frd_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:29:32.297

将 IN 子句替换为 EXISTS。

IN 集合中只允许 1000 个项目

在(items_num=1000)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:26:33.640

IN 子句只有在结果集很小的情况下才真正适合。对于更大的结果集，请考虑重写查询。过滤器（由 IN 子句生成）是一项昂贵的数据库操作。

# ios - 使用 UIGraphicsGetImageFromCurrentImageContext 获取图像

> ID：11648528
> 
> 赞同：1
> 
> 时间：2012-07-25T11:19:25.290
> 
> 标签：ios, drawing, core-graphics, quartz-2d

我试图理解 UIgraphicsGetImageContext() 函数，根据我的理解，它是一个函数，它从当前位图上下文中获取图像，所以每当我在画布上绘制一些东西并调用这个函数时，我都会绘制图像，但是假设我不画任何东西，然后它也会提取一个空图像。所以我想了解，我们如何检查画布（CGContext）何时为零。

下面是我尝试过的代码，但它不起作用

```
 UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO,0.0);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    if(UIGraphicsGetCurrentContext() == nil)
    {
        NSLog(@"NIL");
    }
    else
    {   
        m_curImage = UIGraphicsGetImageFromCurrentImageContext();  
        UIGraphicsEndImageContext();
        NSLog(@"%@",m_curImage);       
    } 
```

所以朋友，请告诉我如何获得它，这将对我有所帮助

问候兰吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:55:33.583

`UIGraphicsGetCurrentContext()`仅当图形上下文堆栈为空时才会返回 nil。在您的绘图代码中，您将始终有一个绘图上下文，因此它不会在这里返回 nil。`UIGraphicsBeginImageContextWithOptions`在堆栈上推送一个新的上下文。

你不能用它`UIGraphicsGetCurrentContext()`来检测你是否在上下文中画了一些东西。

# ruby-on-rails - 结果输出到控制台而不是浏览器。

> ID：11648529
> 
> 赞同：0
> 
> 时间：2012-07-25T11:19:26.757
> 
> 标签：ruby-on-rails

此代码工作正常。问题是所有内容都打印到控制台。我想在浏览器上显示它。怎么做？我需要一个名为 create.html.erb 的模板吗？如何访问视图中的变量和基本上整个控制器代码？请帮忙！！

```
require File.join(Rails.root, 'config/myconfig')
puts Rails.root
class UsersController < ApplicationController
  layout 'admin'
  #require File.expand_path('././myconfig')  #=> C:/ruby/require/expand_path/ok.rb loaded

  def list
    @users = User.all
  end

  def new
    @user = User.new
  end

  def create
    if EntityList::ENTITIES.include?(params[:user][:entity_name])

      puts " Entered entity is: "
      @entity = params[:user][:entity_name]
      @var =  EntityList::RELATION_SHIPS[@entity.to_sym]
      puts "Entered entity is related to"
      if(@var.nil?)
        #do nothing

      else
          puts @var
          checking(@var)
      end
      #@var.split(" ")

      #@len = @var.length
      #puts @var[0]
      #puts @var[1]
      #puts @var[1]
      #@var.each {|@var| puts @var}

      #for index in 0 ... @var.size
       # puts EntityList::RELATION_SHIPS[@var[index].to_sym]
     # end

     # @var.each_with_index {|val, index| puts "#{val} => #{index}" }

      #@var2= EntityList::RELATION_SHIPS[@var.to_sym]
      #puts "Entity2 is related to"
      #puts @var2
      flash[:notice] = "The entity you entered is valid!!"

      puts "Before Redirection"

      redirect_to(:action => "helloworld")
      puts "After redirection"
      puts "done"

    else
      redirect_to(:action => "SorryPage")
    end

  end

  def checking(array)

    array.split(" ")

        for index2 in 0 ... array.size

            if EntityList::RELATION_SHIPS[array[index2].to_sym].nil?

                    # do nothing

            else
                puts EntityList::RELATION_SHIPS[array[index2].to_sym]

                some =  EntityList::RELATION_SHIPS[array[index2].to_sym]

                checking(some)

            end
        end
    end

  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:27:22.890

是的，您将创建一个 create.html.erb 并可以从那里访问所有控制器实例变量，例如 @entity 或 @var。

我建议查看生成脚手架调用的输出以获取其工作原理的示例，例如通过在新的 rails 应用程序中调用它：

```
rails new tryout
cd tryout
rails generate scaffold User name:string email:string 
```

然后查看生成的控制器并查看模板。

# powershell - 在 MsBuild 中，如何运行 PowerShell 并报告所有错误

> ID：11648530
> 
> 赞同：1
> 
> 时间：2012-07-25T11:19:29.043
> 
> 标签：powershell, error-handling, msbuild, teamcity, msbuild-task

> **可能重复：**
> [任何好的 PowerShell MSBuild 任务？](https://stackoverflow.com/questions/78069/any-good-powershell-msbuild-tasks)

Powershell 似乎没有一种简单的方法来使用任意命令触发它，然后以与非 PowerShell 的调用者正确互操作的方式冒泡解析和执行错误 - 例如`cmd.exe`，[TeamCity](https://stackoverflow.com/questions/11647987/how-do-i-get-errors-to-propagate-in-the-teamcity-powershell-runner)等。

我的问题很简单。使用 OOTB MSBuild v4 和 PowerShell v3 对我来说最好的方法是什么（接受建议 - 不会排除适合生产的 MSBuild 任务，但它需要比建议“这很容易 - 使用 PowerShell 任务工厂示例和调整它和/或成为它的维护者/父”）来运行一个命令（一个小的脚本段，或者（最常见的）一个`.ps1`脚本的调用。

我认为它应该是正常的，例如：

```
<Exec 
  IgnoreStandardErrorWarningFormat="true"
  Command="PowerShell &quot;$(ThingToDo)&quot;" /> 
```

* * *

可悲的是，这不起作用：-

1.  如果`ThingToDo`解析失败，则静默失败
2.  如果`ThingToDo`是不存在的脚本调用，则失败
3.  如果你想传播一个`ERRORLEVEL`基于`.cmd`结果的结果，它会变得毛茸茸的
4.  如果你想在 中嵌入`"`引号`ThingToDo`，它将不起作用

那么，从 MSBuild 运行 PowerShell 的防弹方法应该是什么？有什么我可以[PsGet](http://psget.net/)让一切正常的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:12:34.230

您可以使用以下示例：

```
<InvokeScript Condition="..."
              PowerShellProperties="..."
              ScriptFile="[PATH TO PS1 FILE]"
              Function="[FUNCTION TO CALL IN PS1]"
              Parameters="..."
              RequiredOutputParams="...">
  <!-- You can catch the output in an Item -->
  <Output TaskParameter="OutputResults"
          ItemName="Output" />
</InvokeScript> 
```

这可以在 MSBuild 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:19:29.043

Weeeeelll，您可以使用像这样冗长的东西，直到找到更好的方法：-

```
<PropertyGroup>
  <__PsInvokeCommand>powershell "Invoke-Command</__PsInvokeCommand>
  <__BlockBegin>-ScriptBlock { $errorActionPreference='Stop';</__BlockBegin>
  <__BlockEnd>; exit $LASTEXITCODE }</__BlockEnd>
  <_PsCmdStart>$(__PsInvokeCommand) $(__BlockBegin)</PsCmdStart>
  <_PsCmdEnd>$(__BlockEnd)"</PsCmdEnd>
</PropertyGroup> 
```

然后你需要做的“所有”就是：

```
<Exec 
  IgnoreStandardErrorWarningFormat="true"
  Command="$(_PsCmdStart)$(ThingToDo)$(_PsCmdEnd)" /> 
```

这个唯一的赎回功能（除了捕获我能想到的所有错误类型）是它适用于任何 PowerShell 版本和任何 MSBuild 版本的 OOTB。

我去拿我的外套。

# objective-c - XCode - 重新定义宏

> ID：11648535
> 
> 赞同：2
> 
> 时间：2012-07-25T11:19:44.520
> 
> 标签：objective-c, macros, c-preprocessor

小问题我在某个特定时间在屏幕上有大量对象（敌人）并且无法重新定义它们的值。我将我的敌人设置为从屏幕上的 3 开始。

我的目标是根据当前分数改变敌人的数量。

我附上了下面的代码片段。

```
#define kEnemies 3

- (void) EnemyIncrease 
{
    if (self.score>=100) {
    #define kEnemies 4
    }
} 
```

// 我也尝试过

```
#define kEnemies 3

- (void) EnemyIncrease
{
  if (self.score >=100) {
    #undef kEnemies
    #define kEnemies 6
  }
} 
```

非常感谢一些帮助。

* * *

我现在已将我的代码更改为以下

```
int numberOfEnemies;

if (self.score>=0) {
 numberOfEnemies = 3
}

else if (self.score>=100) {
 numberOfEnemies = 4
} 
```

但是现在的问题是，当分数满足新条件时，数组不会更新 numberOfEnemies。

```
for(int i = 0; i < numberOfEnemies; i++) 
```

抱歉，我对编码和尝试修改现有代码仍然很陌生

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T11:24:26.400

宏是预处理的，这意味着它们甚至在你的其余代码编译之前就被处理了。

取出您的代码，这意味着预处理器会看到这一点（使用您的第二个示例）。最终，值为`kEnemies`6：

```
#define kEnemies 3
#undef kEnemies
#define kEnemies 6 
```

将#defines 用于变量并不可行，我只将它们用于常量。

您可以使用成员变量：

```
int numberOfEnemies;

...

if (self.score >=100) 
{
    numberOfEnemies = 6
} 
```

（我删除了*k*前缀，因为这种样式适用于常量）

# javascript - 如何在没有ajax的情况下调用上一页

> ID：11648541
> 
> 赞同：1
> 
> 时间：2012-07-25T11:20:20.157
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

大家好，我正在为不支持 ajax 的 blackberr5 开发应用程序。通过使用`window.location.href = "MainMenu.html";`我从一个 html 导航到另一个。现在在 MainMenu.html 文件中，我的标题为：

```
<div data-role="header" align="center">

    <a href="#" data-rel="back" data-icon="arrow-l">Back</a>
        <h1>Test.html</h1>
    <a href="MainMenu.html"  data-icon="grid">Menu</a>

</div> 
```

但是当我单击返回时，它不会转到上一页。如果我使用`$.mobile.changePage('MainMenu.html');`然后后退按钮工作正常。然后对于blackberry5如何处理后退按钮。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T11:27:05.393

您是否尝试过使用`history.back()`

您可以在此处找到有关 jQuery mobile 中后退按钮的一些有用信息：http: [//jquerymobile.com/test/docs/toolbars/docs-headers.html](http://jquerymobile.com/test/docs/toolbars/docs-headers.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:05:19.817

尝试这两个之一

history.back() 或 history.go(-1)

希望它会起作用

# iphone - 从 UITextView 获取检测到的数据

> ID：11648542
> 
> 赞同：1
> 
> 时间：2012-07-25T11:20:26.377
> 
> 标签：iphone, objective-c, ios

我在我的应用程序中使用 UITextView。对于 textview，我使用如下数据检测：

```
 UITextView *tv=[[UITextView alloc]init];
tv.dataDetectorTypes=UIDataDetectorTypePhoneNumber; 
```

没关系 。它正在检测电话号码。但我想将此电话号码提取到另一个变量中。是否有任何规定可以从 UITextView 获取检测到的数据？

# javascript - 共享 javascript 和样式表文件

> ID：11648544
> 
> 赞同：1
> 
> 时间：2012-07-25T11:20:27.780
> 
> 标签：javascript, asp.net-mvc-3, stylesheet

是否可以在同一个 Visual Studio 解决方案中的项目之间共享样式表和 javascript 文件。我想为我所有常用的脚本和样式表创建某种基础。所以我只能参考它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:21:57.567

您必须在 Web 服务器上托管这些文件才能访问它们。只是将它们放在作为解决方案一部分的类库中不会使它们可用于 Web 项目。您可以在自己的网络中创建一个 CDN，在其中托管可以在多个 Web 应用程序之间重用的通用静态文件（js、css、图像...）。

为了在您的项目中引用它们，您需要使用它们的绝对 url：

```
<script type="text/javascript" src="http://cdn.mycompany.com/js/foo.js"></script> 
```

# php - 在php中重命名URL不起作用

> ID：11648548
> 
> 赞同：0
> 
> 时间：2012-07-25T11:20:39.323
> 
> 标签：php, .htaccess, url-rewriting

我在写这个：

```
RewriteRule ^title$  articles.php?&=stop [QSA,L,N,S=15]
RewriteCond %{QUERY_STRING} !stop 
RewriteRule articles.php? http://mysite.com/pages/title [r=301,L,nc] 
```

为了重命名`pages/title?id_article=2`为`pages/title`

但它不起作用。请问有什么建议吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:01:11.370

如果你想用 PHP 来做，下面是脚本：

```
<?php
$url = $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];

$url = explode('?', $url);

if(!empty($url[1])) 
{
header("Location: http://".$url[0]);
}
?> 
```

# php - php中日期时间格式，计时不正确

> ID：11648553
> 
> 赞同：0
> 
> 时间：2012-07-25T11:20:54.197
> 
> 标签：php

当我使用此函数获取日期 n 时间时：

```
date("d-M-Y h:i A"); 
```

它给出了错误的时机。当前正确的时间是 04.30 pm，但我的功能显示为 11.00 am。这意味着提前 5.30 小时放映。帮我找出正确的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:23:51.223

有两个可能的原因。

1) 时区。2）服务器时间。

这些其实是相关的。

检查服务器时间（即运行代码的机器上的系统时间）。如果不正确；修理它。如果正确，则还要检查时区并将其与 php 端的默认时区进行引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:40:50.177

根据您的用户名，我认为您来自印度。

所以放`date_default_timezone_set('Asia/Kolkata');`

就在之前`date("d-M-Y h:i A");`

或者

```
$offset= strtotime("+5 hours 30 minutes"); 
$date = date("Y-m-d H:i:s",$offset); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:23:15.367

如果在本地主机上工作，请在 php.ini 文件中更改您的时区。

`OR`尝试以下方式：

```
<?php
  $timezone = new DateTimeZone("Asia/Kolkata" );
  $date = new DateTime();
 $date->setTimezone($timezone );
 echo  $date->format( 'H:i:s A  /  D, M jS, Y' );
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:28:36.173

似乎您获得的是 UTC 时间而不是您的时区（格林威治标准时间 +5:30）。（这可能是因为您的默认时区可能设置为 UTC）

试试这个：

```
date_default_timezone_set('GMT');
$temp= strtotime("+5 hours 30 minutes"); 
$date = date("Y-m-d H:i:s",$temp);
echo $date; 
```

# css - 在绝对定位的 div 中居中 div

> ID：11648554
> 
> 赞同：-1
> 
> 时间：2012-07-25T11:20:59.830
> 
> 标签：css

我有两个 div，一个在另一个里面。外部 div 的宽度以百分比形式给出，内部 div 以`position:absolute`. 我想将内部 div 与外部 div 的中心对齐，而不管外部 div 的宽度百分比如何。

从内部 div 中删除时它工作正常`position:absolute`，但我需要它。任何帮助将不胜感激。

我有以下代码：

```
<div class='container' style='width:70%; position:relative'>
   <div style='position:absolute; text-align:center' align='center'>
        //contents
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:27:25.917

您可以执行以下操作：

1.  添加`text-align:center`到`.container`div：

    ```
    .container{
        text-align:center;
    } 
    ```

2.  如果您尝试将另一个 div 或图像等居中，`.container`则将这些项目设置为具有以下内容`margin:0 auto;`，例如

    ```
    .container > div{
        margin: 0 auto;
        /* note that div needs to be a block element and needs a given width */
    } 
    ```

这应该有助于解决您的问题。

# c++ - 停止组件在 IDE (BCB) 中执行代码

> ID：11648558
> 
> 赞同：0
> 
> 时间：2012-07-25T11:21:10.983
> 
> 标签：c++, c++builder-2009

我制作了一个新组件，它在 IDE 上执行构造函数中的代码。我需要阻止它这样做，并且只在它实际执行程序时执行代码。我正在使用 C++ Builder 2009。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:37:23.283

删除您制作的使 IDE 执行此操作的新组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:37:37.463

```
 if (ComponentState.Contains(csDesigning))
    ShowMessage("Design-time");
  else
    ShowMessage("Runtime"); 
```

# python - 帧缓冲区对象创建失败

> ID：11648561
> 
> 赞同：0
> 
> 时间：2012-07-25T11:21:17.920
> 
> 标签：python, opengl

我想创建一个 FrameBufferObject，但它失败了，我不知道为什么。

这是我的代码，它在第 4 行失败并显示以下错误消息：

错误：

```
Traceback (most recent call last):
  File "/home/julius/workspace/Bachelor/Final/Exporter/FBOtest.py", line 154, in <module>
    fbo.mainGameLoop()
  File "/home/julius/workspace/Bachelor/Final/Exporter/FBOtest.py", line 142, in mainGameLoop
    self.createFBO()
  File "/home/julius/workspace/Bachelor/Final/Exporter/FBOtest.py", line 55, in createFBO
    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, self.depthbuffer)
  File "/usr/lib/pymodules/python2.7/OpenGL/platform/baseplatform.py", line 335, in __call__
    return self( *args, **named )
ctypes.ArgumentError: argument 2: <type 'exceptions.TypeError'>: wrong type 
```

代码：

```
 self.fbo = glGenFramebuffersEXT(1)
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, self.fbo)
    self.depthbuffer = glGenRenderbuffersEXT(GL_RENDERBUFFER_EXT)
    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, self.depthbuffer)
    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, width, height)
    glFramebufferReadBufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, self.depthbuffer)

    self.texture = glGenTextures(1)
    glBindTexture(GL_TEXTURE_2D, self.texture)
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_NEAREST)
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_NEAREST)
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8,  width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, None);
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,  GL_TEXTURE_2D, self.texture, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:59:13.690

`glGenRenderbuffersEXT`应该获取您希望创建的缓冲区数量（在这种情况下可能为 1），而不是 GL_RENDERBUFFER_EXT 作为参数。

# perl - 使用 log4perl 限制日志大小

> ID：11648566
> 
> 赞同：3
> 
> 时间：2012-07-25T11:21:27.753
> 
> 标签：perl, log4perl

我想限制使用 log4perl 创建的日志文件的大小。我不希望我的日志文件增长到超过 100mb；我只需要最后 100mb（或大约）的数据。理想情况下，它将截断较早的数据并仅保留最后一位。我知道 Log::Dispatch::FileRotate 模块，但这不太符合我的要求，因为我不想要多个日志文件。

这可能吗？

完整的代码，包括内联配置，如下（减去 use 语句）：

```
my $log_conf = q/ 
    log4perl.category = DEBUG, Logfile
    log4perl.appender.Logfile = Log::Dispatch::FileRotate
    log4perl.appender.Logfile.filename = sub { return get_log_fn(); }
    log4perl.appender.Logfile.mode = truncate
    log4perl.appender.Logfile.autoflush = 1 
    log4perl.appender.Logfile.size =  104857600
    log4perl.appender.Logfile.layout    = Log::Log4perl::Layout::PatternLayout     
    log4perl.appender.Logfile.layout.ConversionPattern = %d %P %M(%L) %p %m %n
/;

Log::Log4perl::init( \$log_conf );
my $logger = Log::Log4perl::get_logger();

INFO "Starting $0";
my $upper = 100000000;
for(my $i=0;$i < $upper;$i++) {
    DEBUG $i;
}

sub get_log_fn 
{
    use File::Basename;
    return sprintf "%s.log", basename( $0, '.pl' );     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:27:26.703

我只是读了一点，做了一个实验。[似乎如果您在使用Log::Dispatch::FileRotate](https://metacpan.org/module/Log%3a%3aDispatch%3a%3aFileRotate)时离开 max 属性，保留 size 属性，并使用 truncate 属性而不是 append ，您可以获得您想要的：

```
#!/usr/bin/env perl

use Modern::Perl;
use Log::Log4perl;

Log::Log4perl::init('./log4perl.conf');

my $logger = Log::Log4perl->get_logger('LOG1');

for my $num ( 1..1000 ) {
    $logger->debug($num);
}

$logger->debug('blah'); 
```

使用关联的配置文件：

```
###############################################################################
#                              Log::Log4perl Conf                             #
###############################################################################
log4perl.rootLogger              = DEBUG, LOG1
log4perl.appender.LOG1           = Log::Dispatch::FileRotate
log4perl.appender.LOG1.filename  = ./mylog.log
log4perl.appender.LOG1.mode      = truncate
log4perl.appender.LOG1.autoflush = 1
log4perl.appender.LOG1.size      = 1024
#log4perl.appender.LOG1.max       = 5
log4perl.appender.LOG1.layout    = Log::Log4perl::Layout::PatternLayout
log4perl.appender.LOG1.layout.ConversionPattern = %d %p %m %n 
```

这给我留下了一个 130 字节的 mylog.log，其中有 4 行：

```
2012/07/25 08:23:14 DEBUG 998
2012/07/25 08:23:14 DEBUG 999
2012/07/25 08:23:14 DEBUG 1000
2012/07/25 08:23:14 DEBUG blah 
```

* * *

**更新**

即使 max 设置为 0，FileRotate 似乎也总是会生成至少一个 .1 的文件。

如果这对您绝对不起作用，您将需要[编写自己的 appender](http://search.cpan.org/dist/Log-Log4perl/lib/Log/Log4perl/FAQ.pm#How_can_I_write_my_own_appender?)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T21:22:08.263

我遇到了同样的问题并找到了这个模块：

[http://search.cpan.org/dist/Log-Log4perl-Appender-File-FixedSize/lib/Log/Log4perl/Appender/File/FixedSize.pm](http://search.cpan.org/dist/Log-Log4perl-Appender-File-FixedSize/lib/Log/Log4perl/Appender/File/FixedSize.pm)

也许晚了两年，但我认为其他登陆这里的人可能会从中受益

# mysql - 当一列唯一时插入 SELECT 查询

> ID：11648568
> 
> 赞同：2
> 
> 时间：2012-07-25T11:21:40.407
> 
> 标签：mysql, database, insert, duplication, insert-select

我需要调用 INSERT + SELECT 将用户数据导入到不同的表中，并且我需要过滤 user_name 重复项，所以我需要这样的东西：

```
INSERT INTO new_table SELECT email, distinct user_name, password from old_table 
```

但是 distinct 仅在使用时才有效，`distinct email, user_name, password`并且所有这些列都必须是唯一的。

有没有其他方法可以使用 uniq user_names 插入选择，（我只需要第一行 - 具有较低的 id）？

**编辑**我忘了提到我使用mysql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:27:22.510

如果不进行测试，我希望这样的事情可以解决问题（假设 id 列名为 id）

```
INSERT INTO new_table 
    SELECT email, user_name, password 
    FROM old_table 
    INNER JOIN 
        ( SELECT MIN(id) FROM old_table GROUP by user_name ) minids
    ON minids.id = old_table.id 
```

# java - 将数据从 servlet 发送到 applet：我该如何实现？

> ID：11648577
> 
> 赞同：4
> 
> 时间：2012-07-25T11:22:04.650
> 
> 标签：java, jakarta-ee, servlets, applet

我想将发送`HashMap`对象发送到请求它的小程序。servlet 具有该`HashMap`对象。有没有办法我可以做到这一点？

```
Applet ------requests HashMap object---->Servlet listens to this request
                                                 |
                                                 |
                                     Servlet searches that HashMap Object
                                                 |
                                                 |
                                                \ /
<--Finally Send this to applet------------ Servlet gets the HashMap object 
```

我已经与 servlet 建立了连接，并且我的 servlet 也有*HashMap*对象，但我不知道如何将它发送到小程序，我想知道它是否可以发送！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:25:29.553

如何序列化它并发送它作为响应？考虑将其转换为 JSON 或 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T17:13:31.320

如果 servlet 与下载 applet 的服务器位于同一服务器中，则可以打开与 servlet 的 URL 连接。你可以阅读

```
URL site = new URL("your site")
URLConnection urlCon = site.openConnection();
BufferedReader in = new BufferedReader(new InputStreamReader(
                                urlCon.getInputStream()));
    String inputLine;
    while ((inputLine = in.readLine()) != null) 
        System.out.println(inputLine);
    in.close(); 
```

同时在 servlet 中，您使用 HttpServletResponse 将数据写回客户端。

如果你需要更“复杂”的东西，你可以在你的小程序中使用轴作为 web 服务堆栈，或者包含一个轻量级的 REST 库，比如 Jersey。但是这些解决方案迫使您使用其他服务器组件而不是 Servlet。

这篇文章将帮助您：

*   编写您的 servlet：[如何将 json 发送回客户端作为响应](https://stackoverflow.com/a/2012031/1297972)。
*   编写您的客户端：[如何从 http 响应中读取 JSON](https://stackoverflow.com/questions/2845599/how-do-i-parse-json-from-a-java-httpresponse)。

他们都使用[json-lib](http://json-lib.sourceforge.net/)从 JSON 格式解析/序列化对象。

希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T22:40:58.423

我将使用一些外部库来回答您的问题：[Google Gson](http://code.google.com/p/google-gson/)和[Apache IO Utils](http://commons.apache.org/io/api-1.2/org/apache/commons/io/IOUtils.html)。

因此，您的 Servlet 中已经有了 HashMap，并希望将其发送到 Applet：

```
Map<String, String> myMap = new HashMap<String, String>();// or whatever
Gson gson = new GsonBuilder().create();
String jsonString = gson.toJson(myMap);
IOUtils.write(jsonString, resp.getOutputStream());// where 'resp' is your HttpServletResponse
IOUtils.closeQuietly(resp.getOutputStream()); 
```

并在您的 Applet 中接收它：

```
String jsonString = IOUtils.toString(conn.getInputStream()); // where 'conn' is an HttpURLConnection
IOUtils.closeQuietly(connection.getInputStream());
Gson gson = new GsonBuilder().create();
// The TypeToken is needed when Generics are involved
Type typeOfHashMap = new TypeToken<Map<String, String>>() {}.getType();
Map<String, String> myMap = gson.fromJson(jsonString, typeOfHashMap); 
```

就是这样。这只是一个简单的例子，但我希望你能从中有所收获。

当然，您可以手动完成，而不是使用外部库，但这种方式要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:25:06.973

您可以简单地序列化对象并将其直接写入 HttpServletResponse，写入字节流。

在 Applet 端，您必须读取字节流并使用流进行反序列化。请注意，Applet 发送一个 POST 请求，否则如果您使用 GET 请求，您可能会有 1024 字节的限制。

希望这对您有所帮助。

# iphone - 下载的 ppt 文件似乎已损坏

> ID：11648578
> 
> 赞同：1
> 
> 时间：2012-07-25T11:22:12.460
> 
> 标签：iphone, ios, asihttprequest, google-drive-api

最近，我将 Google Drive 与我的 iOS 应用程序集成在一起。一切正常，但 .ppt 文件。通常，如果文件是 Drive 文件，我会使用 downloadURL 来下载它。[如果文件属于 Google Docs，我会使用其中一个 exportLinks（与 Alain在此处](https://stackoverflow.com/a/11639162/434715)描述的完全相同）。

`"mimeType": "application/vnd.google-apps.presentation"`但是，来自 Google Docs 的所有 .ppt 文件（带有）在下载后都已损坏（我使用带有 的导出链接`exportFormat=pptx`）。通过网络浏览器下载的相同文件工作正常。我使用 ASIHTTPRequest 库来下载文件（这也可能是 .ppt 损坏的原因？）。

任何想法为什么只有 ppt 文件会导致问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:57:43.697

我已经可以告诉您，您使用的 lib 不是原因：我没有使用它，但我有同样的问题：似乎收到的代码不是 200（如果 ($httpRequest-> getResponseHttpCode() == 200))，因为它显示了我要求返回的特定错误消息。此外，当我尝试下载 PDF 或 txt 格式的演示文稿时，它会显示相同的错误。

这不是一个真正的答案，但我也试图理解为什么只有演示会导致问题。

编辑：收到的代码是**302**。如果可以帮助... 编辑2：尝试后，我注意到第一个参数是文件ID，第二个参数是导出格式：

```
https://docs.google.com/feeds/download/presentations/Export?docId=filedid&exportFormat=pptx 
```

但是在 302 代码中，我有这个位置：

```
https://docs.google.com/feeds/download/presentations/Export?exportFormat=pptx&id=fileid 
```

不仅两个参数的顺序不同，而且**名称是 id 而不是 docid**

当我使用此 URL 时，将其作为导出链接，然后尝试复制文件，它正在工作。我得到一个 200 响应和文件的内部。

我希望它有所帮助。

# iphone - UIScrollview 内容不滚动且粘滞

> ID：11648579
> 
> 赞同：0
> 
> 时间：2012-07-25T11:22:13.243
> 
> 标签：iphone, objective-c, xcode, uiscrollview

我使用界面构建器创建了一个新的 UIScrollView，我放置了一个带有长文本的标签，滚动条正在显示和滑动，尽管内容变得粘滞并且在滚动时没有隐藏

截图 [ [1](https://thumbs.rapidshare.com/thumbs/600/61D/B3641E8EAE1BA97C4F5AB67CA2065.jpg) ] [ [2](https://thumbs.rapidshare.com/thumbs/600/D1E/0E8B0DEA90DD5F4B23A918624F9AF.jpg) ]

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    title.text = @"hellllllo world hellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo worldhellllllo world";

    scrollview.contentSize =
    CGSizeMake(self.view.frame.size.width, self.view.frame.size.height+600);
    //scrollview.maximumZoomScale = 4.0;
    //scrollview.minimumZoomScale = 0.75;
    scrollview.clipsToBounds = YES;
    //  scrollview.bounces = YES;
    scrollview.superview.autoresizesSubviews = NO;
    //scrollview.delegate = self;

    [scrollview setScrollEnabled:YES];
    // Do any additional setup after loading the view.

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:29:06.757

确保“标题”标签是滚动视图的子视图。

在我看来，它与滚动视图处于同一级别而不是在其下方是错误的。

![它应该是什么样子](../Images/81201d30481dbc6b93ff4e12b85416bf.png)

在您的屏幕截图中，显示了第二个问题：文本显示不正确。确保使用 Interface Builder 将标签连接到“textLabel”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:30:47.240

确保滚动视图大小小于 contentSize

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:25:00.517

您需要从属性检查器中为界面构建器中的滚动视图勾选“垂直反弹”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:38:43.957

这是因为在 ios 6 上使用了 xcode 4.5，它为每个 UIView 子类添加了约束并导致该问题，通过从早期版本的 XCode 创建视图来解决。

# c# - 什么是 ASP.NET MVC 的客户端/服务器等效项

> ID：11648582
> 
> 赞同：0
> 
> 时间：2012-07-25T11:22:23.170
> 
> 标签：c#

我曾经在 ASP.NET MVC 上建立一个网站。现在我想构建另一个 Web 服务。这一次，我想使用客户端应用程序（在 Windows 上运行）并且不需要网页。我应该选择什么技术？我仍然在服务器端和客户端使用 C#，我可能会使用 mySQL。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:30:14.680

您可以使用经典的 3 层架构：

*   WPF 中的 UI 客户端应用程序（它为 UI/逻辑分离提供了很好的 MVVM 模式）
*   用于后台的 WCF Web 服务、IIS 托管（C# 程序集）
*   作为 ORM 的实体框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:24:19.557

我强烈建议客户端使用 WPF。它具有类似的 MVC 架构，并为 UI 使用 XAML，这很容易学习但非常强大。如果不需要 gui，服务器可以是服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:30:28.423

它是[ASP.NET Web API](http://www.asp.net/web-api)，它是[ASP.NET MVC 4](http://www.asp.net/mvc/mvc4) ^(<1>)中的新功能。

[在撰写本文时，ASP.NET MVC 4 处于 RC 之下。]

# .net - 将模型/ POCO 放在单独的 DLL 中是个好建议吗？

> ID：11648583
> 
> 赞同：0
> 
> 时间：2012-07-25T11:22:27.827
> 
> 标签：.net, architecture, separation-of-concerns

这些原则如何说明将 POCO（或 MVC 中的模型）放在单独的 DLL 中？

关键是当对象被分发给不同的开发人员并由不同的开发人员使用时，让域范围的对象更容易“移动”。在这种实际情况下，“我们”是一个开发人员，很快就会成为两个开发人员。我们将处理系统（和不同）dll 的不同关注点，但我们将分享一些 POCO 和枚举。

```
public class Customer
{
    public int CustomerId { get; set; }
    public string Name { get; set; }
} 
```

问题。是否有一些缺点为 POCO 和枚举创建单独的 dll？所谓的领域广泛使用。好吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:49:08.077

就个人而言，我总是将我的域类放入单独的 dll 中。您现在可能不需要它，但它几乎总是会在以后出现（例如，如果应用程序架构需要更改，即从 web 表单到 mvc）。通过将其分离到类库 (dll) 中，您可以强制执行关注点分离概念的一部分。您的所有业务逻辑都应该包含在类库中而不是前端。那么前端可以只关注导航，而无需过多考虑类库。

所以你的优势至少是：关注点分离，可以重新分配和重用，最佳实践，更干净的前端代码/项目。

不利的一面是，如果您在多个项目中使用它，您将必须控制哪些应用程序正在使用哪些库，并确保它们拥有最新的库，或者至少是最新的相关库。

因此，从听起来的情况来看，在您的情况下，这只是一件优先的事情。但是恕我直言，这是您应该适应的偏好。

# jquery - 具有多维数组的 jQuery 多维对象

> ID：11648586
> 
> 赞同：9
> 
> 时间：2012-07-25T11:22:37.097
> 
> 标签：jquery, flot

我正在尝试构建一个有点高级的“Flot”jQuery 插件图。为此，我需要一个多维对象（或者至少我认为是）。

结构应如下所示：

```
var datasets = {
        "usa": {
            label: "USA",
            data: [[1988, 483994], [1989, 479060], [1990, 457648], [1991, 401949], [1992, 424705], [1993, 402375], [1994, 377867], [1995, 357382], [1996, 337946], [1997, 336185], [1998, 328611], [1999, 329421], [2000, 342172], [2001, 344932], [2002, 387303], [2003, 440813], [2004, 480451], [2005, 504638], [2006, 528692]]
        },        
        "russia": {
            label: "Russia",
            data: [[1988, 218000], [1989, 203000], [1990, 171000], [1992, 42500], [1993, 37600], [1994, 36600], [1995, 21700], [1996, 19200], [1997, 21300], [1998, 13600], [1999, 14000], [2000, 19100], [2001, 21300], [2002, 23600], [2003, 25100], [2004, 26100], [2005, 31100], [2006, 34700]]
        }
}; 
```

从我的代码隐藏中，我生成了一些看起来像这样的列表（不是相同的数据，但不介意）：

```
<ul id="MOBILISATION">
  <li data-key="2012/3/27">02:10</li>
  <li data-key="2012/3/28">05:25</li>
  <li data-key="2012/3/29">09:21</li>
  <li data-key="2012/3/30">00:00</li>
  <li data-key="2012/3/31">00:00</li>
</ul>
<ul id="OPERATIONS">
  <li data-key="2012/3/27">19:51</li>
  <li data-key="2012/3/28">18:35</li>
  <li data-key="2012/3/29">14:39</li>
  <li data-key="2012/3/30">07:46</li>
  <li data-key="2012/3/31">10:26</li>
</ul> 
```

其中“USA/usa”是“MOBILISATION”，“1988”是“2012/3/27”，“483994”是“02:10”。你有图！！？？？

我试过写一些 jQuery，但它显然不起作用：

```
 var objects = [];
    var array = [];
    var categoryName = "";
    $('div#Container ul').each(function () {
        catName = $(this).attr('id');
        $('li', this).each(function () {
            array.push([new Date($(this).data('key')).getTime(), $(this).text()]);
        });

        objects.push({ categoryName: { label: categoryName, data: array} });
    });
    var datasets = objects; 
```

如您所见，我使用了推送到`objects`数组。显然，这并没有给我想要的结果。我在这方面有点迷失方向，因为这是我第一次使用 jQuery 对象。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T11:29:31.080

改变`var objects = [];`和`var objects = {};` 改变

```
objects.push({ categoryName: { label: categoryName, data: array} }); 
```

到

```
objects[categoryName] = { label: categoryName, data: array}; 
```

JSON 对象的问题在于使用变量索引设置属性。如上所述，您可以使用数组表示法来执行此操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T11:33:14.067

您的数据集是一个对象，而不是一个数组 - 您无法推送到它。此外，您的变量`categoryName`不能那样工作（阅读更多关于[点和括号符号](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators)的信息）。试试这个：

```
var datasets = {};
$('div#Container ul').each(function () {
    catName = this.id;
    var array = [];
    $('li', this).each(function () {
        array.push([
          new Date($(this).data('key')).getTime(),
          $(this).text()
        ]);
    });
    datasets[catName.toLowercase()] = {
        label: catName.toUppercase(),
        data: array
    };
}); 
```

另外，我不确定您是否真的需要创建`Date`对象，但这取决于您的输入和输出格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:33:32.413

尝试

```
 var data = {};
    $('div#Container ul').each(function() {
        var sub_obj = data[$(this).attr('id').toLowerCase()] = {
            label: $(this).attr('id').toUpperCase(),
            data: []
        };
        $(this).children('li').each(function() {
            sub_obj.data.push([$(this).data('key'), $(this).text()]);
        });
    });
    console.log(data); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-02T11:00:55.493

```
function convertObject(obj, key) {
    let returnObje = {};
    if (!key) key = "";
    else key = key + "_";
    Object.keys(obj).forEach(function (k1) {
        if (obj[k1] != null && typeof obj[k1] == "object") {
            returnObje = Object.assign({}, returnObje, convertObject(obj[k1], key + k1))
        } else
            returnObje[key + k1] = obj[k1];
    });
    return returnObje;
}

var hotels = { 
                     "hilton": {"name": "hilton hotel" },
                     "newton": {"name": "newton hotel"}
                 };

convertObject(hotels); 
```

# android - android 4.0.3 中的来电自动应答

> ID：11648587
> 
> 赞同：2
> 
> 时间：2012-07-25T11:22:42.607
> 
> 标签：android

我在 Android 技术领域工作了 1 年。目前我想在 Android 4.0.3 中开发一个应用程序来电自动应答，但在这个版本中我没有得到任何解决方案或找不到任何 api (ITelephony.aidl)。请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:05:42.240

它的工作代码。首先使用Phone状态Broadcast Receiver找出它的来电。

```
 filter.addAction("android.intent.action.PHONE_STATE");
    mContext.registerReceiver(myCallReceiver, filter); 
```

然后在 onReceive(Context context, Intent intent) 调用 answerPhoneHeadsethook() 函数。

```
private void answerPhoneHeadsethook(Context context) {
    // Simulate a press of the headset button to pick up the call
    Intent buttonDown = new Intent(Intent.ACTION_MEDIA_BUTTON);
    buttonDown.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(
            KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HEADSETHOOK));
    context.sendOrderedBroadcast(buttonDown,
            "android.permission.CALL_PRIVILEGED");

    // froyo and beyond trigger on buttonUp instead of buttonDown
    Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON);
    buttonUp.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(
            KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
    context.sendOrderedBroadcast(buttonUp,
            "android.permission.CALL_PRIVILEGED");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:46:36.703

为了接听或拒绝电话，需要 MODIFY_PHONE_STATE 权限。不幸的是，自 2.3 起，它仅适用于系统应用程序。（更多信息[在这里](https://stackoverflow.com/questions/4715250/how-to-grant-modify-phone-state-permission-for-apps-ran-on-gingerbread)）

接听电话的解决方法（最初来自[此处](https://stackoverflow.com/questions/2610587/how-to-programmatically-answer-a-call)）：

```
Intent i = new Intent(Intent.ACTION_MEDIA_BUTTON);
KeyEvent event = new KeyEvent(KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_HEADSETHOOK);
i.putExtra(Intent.EXTRA_KEY_EVENT, event );
context.sendOrderedBroadcast(i, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:18:03.237

这适用于 Android 2.2 到 4.0，现在在将 try catch 添加到最后一行后，它适用于 4.1.2 和 4.2 坦率地说不知道它是如何工作的，但它对我有用。

> ```
>  Log.d(tag, "InSecond Method Ans Call");
>     // froyo and beyond trigger on buttonUp instead of buttonDown
>     Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON);
>     buttonUp.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(
>             KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
>     sendOrderedBroadcast(buttonUp, "android.permission.CALL_PRIVILEGED"); 
> ```

```
 Intent headSetUnPluggedintent = new Intent(Intent.ACTION_HEADSET_PLUG);
    headSetUnPluggedintent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
    headSetUnPluggedintent.putExtra("state", 0);
    headSetUnPluggedintent.putExtra("name", "Headset");
    try {
        sendOrderedBroadcast(headSetUnPluggedintent, null);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

这在 Android 4.1.2 中对我有用，并且我已经在 4.2 上进行了测试。这仍然会给出一个已处理的异常。

# c# - 有没有类似 DbSet 的东西 .RemoveWhere（谓词 )

> ID：11648590
> 
> 赞同：7
> 
> 时间：2012-07-25T11:23:08.003
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-4.3

> **可能重复：**
> [在 LINQ to Entities 中批量删除](https://stackoverflow.com/questions/869209/bulk-deleting-in-linq-to-entities)

我需要按条件删除一些实体。例如，删除所有数量小于 1 的订单商品：

```
var orderId = 10; // any order Id
context.OrderItems.RemoveWhere(item => item.OrderId == orderId && item.Quantity < 1.0); 
```

我知道，我可以选择这些项目，然后像这样一一删除它们：

```
var itemsToRemove = context.OrderItems.Where(item => item.OrderId == orderId && item.Quantity < 1.0).ToArray();

foreach (var item in itemsToRemove)
  context.OrderItems.Remove(item); 
```

但这不太可能，因为会发生额外的工作。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:35:00.223

您可以使用GitHub 上支持[批量更新和删除的](https://github.com/loresoft/EntityFramework.Extended/wiki/Batch-Update-and-Delete)[EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)插件。

# asp.net - 每次重新启动服务时，ASPNETDB 都会分离

> ID：11648592
> 
> 赞同：0
> 
> 时间：2012-07-25T11:23:11.700
> 
> 标签：asp.net, sql-server-express

我有一个从 SQL Server Management Studio 中附加到数据库的 ASPNETDB.mdf 文件。我将该数据库用于会员资格。当我刚刚附加了 mdf 文件并创建了一个数据库时，一切正常。身份验证工作正常。但如果我重新启动计算机或 SQLExpress 服务本身 ASPNETDB 停止工作。当我进入 Management Studio 时，我可以在那里使用 ASPNETDB，但左侧没有加号。如果我尝试通过用户映射向用户授予权限，则会出现一个对话框，显示“一个或多个数据库无法访问且不会显示”。我怎样才能避免这个问题？

# windows - 使用各种选项运行数月的批处理脚本

> ID：11648601
> 
> 赞同：1
> 
> 时间：2012-07-25T11:23:46.663
> 
> 标签：windows, opencv, batch-file, batch-processing

我想运行一个运行一个月的批处理脚本。代码如下。它处理大量视频并将其各种输出发送到各种文件夹。问题是如果它在无人看管的情况下运行一个月，磁盘可能已满。我希望它检查磁盘是否已满并继续写入另一个磁盘。有日志也不错

```
`@echo off
    setlocal enabledelayedexpansion
    set EXE_FILE=E:\opencv\build\bin\Release\blobtrack_sample.exe
    set INPUT_PATH=E:\Glasgow\Test\
    set TRACKS_PATH=E:\Glasgow\Tracks\
    set OUTPUT_PATH=E:\Glasgow\Result\
    set COUNT=0
    pushd %INPUT_PATH%
    for %%f in (*) do if %%f neq %~nx0 (
        set /a COUNT+=1
        echo Processing %%f, track=%%~nf.txt, btavi=test!COUNT!%%~xf
        %EXE_FILE% fg=FG_0S bd=BD_CC bt=CCMSPF btpp=None bta=Kalman btgen=RawTracks track=%TRACKS_PATH%\%%~nf.txt FGTrainFrames=125 btavi=%OUTPUT_PATH%\%%~nf.avi %%f
    )
    popd` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:56:20.637

考虑以下：

```
`@echo off
    set drive="E"
    set /A size=99
    FOR /F "tokens=1-5" %G IN ('dir ^| find "Dir(s)"') do set size=%I
    echo %size% > currentsize.txt
    echo %size% >> sizelog.log
    FOR /F "tokens=1-5" %G IN ('dir ^| find "currentsize.txt"') do set /A size=%J

REM SIZE LESS THAN 4 INDICATES LESS THAN 1024 Bytes left on the disk.
    IF %size% LSS 4 set drive="F"

    setlocal enabledelayedexpansion
    set EXE_FILE=%drive%:\opencv\build\bin\Release\blobtrack_sample.exe
    set INPUT_PATH=%drive%:\Glasgow\Test\
    set TRACKS_PATH=%drive%:\Glasgow\Tracks\
    set OUTPUT_PATH=%drive%:\Glasgow\Result\
    set COUNT=0
    pushd %INPUT_PATH%
    for %%f in (*) do if %%f neq %~nx0 (
        set /a COUNT+=1
        echo Processing %%f, track=%%~nf.txt, btavi=test!COUNT!%%~xf
        %EXE_FILE% fg=FG_0S bd=BD_CC bt=CCMSPF btpp=None bta=Kalman btgen=RawTracks track=%TRACKS_PATH%\%%~nf.txt FGTrainFrames=125 btavi=%OUTPUT_PATH%\%%~nf.avi %%f
    )
    popd` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:04:36.287

我从[这个答案](https://stackoverflow.com/questions/293780/free-space-in-a-cmd-shell)中找到了这段代码。我建议您阅读那里的所有答案，您会发现可以使用的东西

将以下内容保存在批处理文件中并运行它。它将显示 C: 驱动器的空闲字节。在 IF 条件中使用变量来更改目标保存到驱动器

```
@setlocal enableextensions enabledelayedexpansion
@echo off
for /f "tokens=3" %%a in ('dir c:\') do (
    set bytesfree=%%a
)
set bytesfree=%bytesfree:,=%
echo %bytesfree%
endlocal && set bytesfree=%bytesfree% 
```

# z3 - Z3理论插件错误

> ID：11648607
> 
> 赞同：2
> 
> 时间：2012-07-25T11:24:10.127
> 
> 标签：z3

我创建了一个自定义理论插件，目前它什么都不做。回调都已实现并注册，但它们只是返回。然后，我使用 Z3_parse_smtlib2_string 读入了一堆声明常量、声明乐趣和断言，并将生成的 ast 传递给 Z3_assert_cnstr。随后对 Z3_check_and_get_model 的调用失败并出现以下错误：

> 没有为用户理论设置 mk_fresh_ext_data 回调，您必须使用 Z3_theory_set_mk_fresh_ext_data_callback

据我所知， Z3_theory_set_mk_fresh_ext_data_callback 不存在。

使用相同的字符串，但没有注册理论插件， Z3_check_and_get_model 返回 sat 并按预期提供模型。

我正在使用版本 4 和 Linux 64 位库。

完整的例子在这里： http: [//pastebin.com/hLJ8hFf1](http://pastebin.com/hLJ8hFf1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:46:25.627

问题在于基于模型的量词实例化模块 (MBQI)。该模块尝试创建主逻辑引擎的副本。要创建副本，Z3 必须复制每个理论插件。它可以为所有内置理论做到这一点，但不适用于外部理论。

原始的理论插件 API 不支持复制自身，因为它是在 MBQI 模块之前实现的。API`Z3_theory_set_mk_fresh_ext_data_callback`就是为此而生的。但是，由于多种原因，它还没有被曝光。主要问题是 Z3 4.0 有一个新的求解器 API。当前的理论插件 API 与新的求解器 API 不兼容。我们正在研究整合它们的方法。在 Z3 4.0 中，理论插件仅适用于旧的（已弃用的）求解器 API。

为避免您描述的问题，您只需禁用 MBQI 模块。您可以通过`MBQI=false`在创建时设置来做到这一点`Z3_context`。在 C 中，您可以使用以下代码片段来执行此操作。

```
Z3_config cfg; 
Z3_context ctx;
cfg = Z3_mk_config();
Z3_set_param_value(cfg, "MBQI", "false");
ctx = Z3_mk_context(cfg); 
```

这也解释了为什么您的插件适用于无量词公式。MBQI 模块不用于此类公式。

# c# - 使用 SocketAsyncEventArgs 按顺序发送数据

> ID：11648611
> 
> 赞同：3
> 
> 时间：2012-07-25T11:24:19.407
> 
> 标签：c#, .net, sockets, packets, socketasynceventargs

我最初在发送数据时遇到了竞争条件，问题是我允许使用多个 SocketAsyncEventArgs 来发送数据，但是第一个数据包在第二个数据包之前没有完全发送，这是因为我有它所以如果数据缓冲区不适合它循环，直到所有数据都发送完毕，并且第一个数据包比第二个数据包大，第二个数据包很小，所以第二个数据包在第一个数据包之前被发送并到达客户端。

我通过将 1 个 SocketAyncEventArgs 分配给一个用于发送数据的打开连接并使用信号量来限制对它的访问来解决这个问题，并在完成后使 SocketAsyncEventArgs 回调。

现在这工作正常，因为所有数据都已发送，当它完成下一次发送准备好时回调。问题是，当我想将数据随机发送到打开的连接时，它会导致阻塞，而当有大量数据发送时，它会阻塞我的线程。

我正在寻找解决此问题的方法，我想有一个队列，当请求发送数据时，它只是将数据包添加到队列中，然后 1 SocketAsyncEventArgs 只是循环以发送该数据。

但是我怎样才能在保持可扩展性的同时有效地做到这一点呢？在按照请求发送的顺序发送数据包时，我想尽可能避免阻塞。

感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:35:52.160

如果数据需要保持有序，又不想阻塞，那么就需要添加队列。我这样做的方法是在我的状态对象上跟踪我们是否已经有一个正在处理该连接的活动发送异步循环。在入队之后（显然必须同步），只需检查正在进行的内容：

```
 public void PromptToSend(NetContext context)
    {
        if(Interlocked.CompareExchange(ref writerCount, 1, 0) == 0)
        { // then **we** are the writer
            context.Handler.StartSending(this);
        }
    } 
```

这`writerCount`是连接上的写循环计数（应该正好是 1 或 0）；如果没有，我们开始一个。

我`StartSending`尝试从该连接的队列中读取；如果它可以这样做，它会做通常的`SendAsync`等：

```
if (!connection.Socket.SendAsync(args)) SendCompleted(args); 
```

（请注意，`SendCompleted`这里是针对“同步”情况的；对于“异步”情况，它必须`SendCompleted`通过事件模型）。`SendCompleted`显然，重复这个“出队，尝试发送异步”步骤。

剩下的唯一事情是确保当我们*尝试*出队时，如果我们发现没有更多可做的事情，我们会注意到缺乏行动：

```
 if (bufferedLength == 0)
        {  // nothing to do; report this worker as inactive
            Interlocked.Exchange(ref writerCount, 0);
            return 0;
        } 
```

有道理？

# php - 如何在php中发送带有段落的消息

> ID：11648615
> 
> 赞同：0
> 
> 时间：2012-07-25T11:24:32.037
> 
> 标签：php, message

我正在使用下面的 php 代码发送消息

```
<?php
$newline = $_GET['message'];

$newline = str_replace("[N]","\n","$newline");
$newline = str_replace("[n]","\n","$newline");

mail($_GET['to'],$_GET['subject'],$newline,"From: ".$_GET['from']);

header( 'Location: http://my_site.com/POMPC/report.html' ) ;
?> 
```

可悲的是，当我发送消息时，它出现了，但一切都出现在一条直线上，弄乱了消息。

例子：

```
Hello,
This is a message. 
Reply. 
```

表现为

> 你好，这是一条消息。回复。

一切都在一条直线上，把东西弄乱了。我如何维护格式。我发送的消息来自我的桌面应用程序，并将用户定义的数据发送给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:48:22.980

在所有其他事情之前，请确保您的消息在您期望的位置包含正确的换行符。您可以将此调试代码放在`str_replace`调用之后：

```
echo "<pre>$newline</pre>"; 
```

并查看您的文本是否被分成几行。如果不是，那么问题出在您的输入中。

接下来，看起来您的邮件阅读器将邮件解析为 HTML，因此所有内容都被拼凑在一起。您没有明确指定内容类型，因此由每个邮件阅读器决定如何解释消息。您的问题有两种解决方案：

(1) 将消息声明为 HTML 并用于`<br/>`分行：

```
<?php
$newline = $_GET['message'];

$newline = str_replace("[N]","\n","$newline");
$newline = str_replace("[n]","\n","$newline");
$newline = nl2br($newline);

$headers = "Content-type: text/html\r\nFrom: ".$_GET['from'];
mail($_GET['to'],$_GET['subject'],$newline,$headers);

header( 'Location: http://my_site.com/POMPC/report.html' ) ;
?> 
```

(2) 将消息声明为纯文本并将换行符保留为`\n`：

```
<?php
$newline = $_GET['message'];

$newline = str_replace("[N]","\n","$newline");
$newline = str_replace("[n]","\n","$newline");

$headers = "Content-type: text/html\r\nFrom: ".$_GET['from'];
mail($_GET['to'],$_GET['subject'],$newline,$headers);

header( 'Location: http://my_site.com/POMPC/report.html' ) ;
?> 
```

两者中的任何一个都应该产生您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:31:22.740

`<p> </p>`在您进入的内容中使用标签`$_GET['message']`；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:33:26.093

利用`nl2br($_GET['message']);`

另外，你为什么使用 GET 方法？POST 是更好的选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:38:02.787

您可以像这样创建您的消息

```
$content=" <h3> Hello </h3>, <p>This is a message. <br/> Long string <br/>";

$content . = " <br/> Thanks <br/> Your Name"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T12:51:18.677

## 如果你想要 HTML 段落：

仅使用该`mail()`函数，您必须像这样编写 HTML 源代码：

不要在第 3 个参数中写任何内容`$message`，将其留空即可`''`。并像这样组成休息：

```
$additional_headers = <<<MAIL
Content-Type: multipart/alternative; boundary=00151747835895c6f804c48dc14b

--00151747835895c6f804c48dc14b
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

    Pararaph 1
    Pararaph 2

--00151747835895c6f804c48dc14b
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

    <p>Pararaph 1</p>
    <p>Pararaph 2</p>

--00151747835895c6f804c48dc14b--
MAIL;

$additional_headers = str_replace("\n", "\r\n", $additional_headers); 
```

确保**纯文本/文本**区域中的文本被一个或多个分隔，`\r\n`以获得类似于 html 段落的视觉感觉。

# c# - Xdocument 修改所有匹配的属性

> ID：11648617
> 
> 赞同：0
> 
> 时间：2012-07-25T11:24:42.917
> 
> 标签：c#, linq, linq-to-xml

这让我发疯，我已经尝试了 2 天了。

我基本上想根据名称替换值。

我有如下的xml：

```
 <session>   
      <immediate>   
        <diff name="TEST_DIFF">
          <pivot name="(Original)">
            <grid-processor name="mdStoredShape"/>
            <axes>
              <axis position="SLICERS">
                <attribute name="Result Namespace" mode="INCLUSIVE">
                  <selection value="$NAMESPACE$"/>
                </attribute>
                <attribute name="Date" mode="INCLUSIVE">
                  <selection value="$DATEFROM$"/>
                </attribute>
                <attribute name="Book" mode="INCLUSIVE">
                  <selection value="$BOOK_NAME$" type="Book Hierarchy"/>
                </attribute>
                <attribute name="Measure" mode="INCLUSIVE">
                  <exclude value="PV"/>
                </attribute>
                <attribute name="Risk Source System" mode="INCLUSIVE">
                  <selection value="gdsldn"/>
                </attribute>
                <attribute name="Is Error">
                  <selection value="false"/>
                </attribute>
              </axis>
              <axis position="DISCRIMINATOR">
                <attribute name="Book" mode="ALL"/>
                <attribute name="Book" mode="ALL"/>
                <attribute name="Measure" mode="ALL"/>
              </axis>
              <axis position="RESULT">
                <attribute name="SUM(Money Value In(GBP))"/>
                <attribute name="COUNT_DISTINCT(Book)"/>
              </axis>
            </axes>
          </pivot>
          <pivot name="(New)">
            <grid-processor name="mdStoredShape"/>
            <axes>
              <axis position="SLICERS">
                <attribute name="Result Namespace" mode="INCLUSIVE">
                  <selection ref="$NAMESPACE$"/>
                </attribute>
                <attribute name="Date" mode="INCLUSIVE">
                  <selection ref="$DATETO$"/>
                </attribute>
                <attribute name="Book" mode="INCLUSIVE">
                  <selection value="$BOOK_NAME$" type="Book Hierarchy"/>
                </attribute>
                <attribute name="Measure" mode="INCLUSIVE">
                  <exclude ref="PV"/>
                </attribute>
                <attribute name="Risk Source System" mode="INCLUSIVE">
                  <selection value="gdsldn"/>
                </attribute>
                <attribute name="Is Error">
                  <selection value="false"/>
                </attribute>
              </axis>
              <axis position="DISCRIMINATOR">
                <attribute name="Book" mode="ALL"/>
                <attribute name="Book" mode="ALL"/>
                <attribute name="Measure" mode="ALL"/>
              </axis>
              <axis position="RESULT">
                <attribute name="SUM(Money Value In(GBP))"/>
                <attribute name="COUNT_DISTINCT(Book)"/>
              </axis>
            </axes>
            <source name="risk"/>
          </pivot>
        </diff>   
    </immediate> 
</session> 
```

我想用实际值替换所有 $NAMESPACE$ 值。

有人可以帮忙吗？

有关我正在使用的其他信息

```
XElement xeNS = Xdoc.Descendants("selection").First(el => (String)el.Attribute("value").Value == "$NAMESPACE$");
            xeNS.SetAttributeValue("value", ns); 
```

但这仅取代了第一个实例。我希望 linq 查询然后循环并应用更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:41:32.847

如果仅此而已，为什么不使用“xml”.replace（“oldavalue”，“newvalue”）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:15:19.333

我最终设法解决了这个问题 - 选择正确的属性然后循环遍历元素..

> var query = from x in Xdoc.Descendants("selection") where x.Attribute("value").Value == "$BOOK_NAME$" select x;
> 
> ```
>  foreach (XElement xe in query)
>         {
>             xe.Attribute("value").Value = book;                
>         } 
> ```

# .htaccess - 如何防止静态域提供非静态内容？

> ID：11648619
> 
> 赞同：0
> 
> 时间：2012-07-25T11:24:43.143
> 
> 标签：.htaccess, redirect, static, dns, cookieless

我已经设置了一个静态域别名来提供没有 cookie 的静态内容，但是由于这只是主域的别名，我担心如果它无意中链接到它，那么它可能会被索引。我想通过主站点 .htaccess 文件中的条件来防止静态域别名提供除 CSS、JS、JPG、GIF 文件等以外的任何内容。

即类似的东西：

如果域名包含术语“静态”，则将对以 .css、.js 等结尾的“非”文件的所有请求重定向到父域。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:01:05.523

在静态域的文档根目录中，将其添加到 htaccess 文件中（最好靠近顶部，或在任何现有规则之上）：

```
RewriteEngine On

# check if hostname includes "static"
RewriteCond %{HTTP_HOST} static

# and the request isn't for a file ending with one of these extensions
RewriteCond %{REQUEST_URI} !\.(css|js|jpe?g|gid|png)$ [NC]

# then redirect whatever the request is to the parent domain
RewriteRule ^(.*)$ http://parent.domain.com/$1 [L,R=301] 
```

# ruby-on-rails - 在 Rails 3 中设置环境变量（设计 + Omniauth）

> ID：11648620
> 
> 赞同：53
> 
> 时间：2012-07-25T11:24:49.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, environment-variables, omniauth, railscasts

我一直试图弄清楚 Ryan Bates 在他的[Facebook Authentication screencast](http://railscasts.com/episodes/360-facebook-authentication)中是如何设置以下“FACEBOOK_APP_ID”和“FACEBOOK_SECRET”环境变量的。

```
provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_SECRET'] 
```

周围有类似的问题，但没有我能够在 Rails 3.2.1 上工作的答案。

**更新：**

截至 2013 年 5 月，我处理 ENV 变量的首选方式是通过[Figaro gem](https://github.com/laserlemon/figaro)

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-07-25T11:43:43.703

你可以看看[评论](http://railscasts.com/episodes/360-facebook-authentication?view=comments)：

您可以直接在启动服务器的 shell 上设置环境变量：

```
FACEBOOK_APP_ID=12345 FACEBOOK_SECRET=abcdef rails server 
```

或者（相当hacky），您可以将它们设置在您的`config/environments/development.rb`：

```
ENV['FACEBOOK_APP_ID'] = "12345";
ENV['FACEBOOK_SECRET'] = "abcdef"; 
```

## 另一种方法

但是，我两者都不会。我会创建一个配置文件（比如`config/facebook.yml`），其中包含每个环境的相应值。然后将其作为常量加载到初始化程序中：

### `config/facebook.yml`

```
development:
  app_id: 12345
  secret: abcdef

test:
  app_id: 12345
  secret: abcdef

production:
  app_id: 23456
  secret: bcdefg 
```

### `config/initializers/facebook.rb`

```
FACEBOOK_CONFIG = YAML.load_file("#{::Rails.root}/config/facebook.yml")[::Rails.env] 
```

`ENV['FACEBOOK_APP_ID']`然后在您的代码中替换为`FACEBOOK_CONFIG['app_id']`和`ENV['FACEBOOK_SECRET']`。`FACEBOOK_CONFIG['secret']`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-25T11:51:28.083

有几种选择：

*   从命令行设置环境变量：

    ```
    export FACEBOOK_APP_ID=your_app_id
    export FACEBOOK_SECRET=your_secret 
    ```

    你可以把上面的行放在你的`~/.bashrc`

*   运行时设置环境变量`rails s`：

    ```
    FACEBOOK_APP_ID=your_app_id FACEBOOK_SECRET=your_secret rails s 
    ```

*   创建一个[`.env`](http://ddollar.github.io/foreman/#ENVIRONMENT)文件：

    ```
    FACEBOOK_APP_ID=your_app_id
    FACEBOOK_SECRET=your_secret 
    ```

    并使用[Foreman](https://github.com/ddollar/foreman)（使用 启动您的应用程序`foreman start`）或[dotenv](https://github.com/bkeepers/dotenv) gem。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-22T22:42:07.227

这是另一个想法。`provider.yml`如上所述，在文件中定义键和值。然后把它放在你的`environment.rb`（在调用之前`Application.initialize!`）：

```
YAML.load_file("#{::Rails.root}/config/provider.yml")[::Rails.env].each {|k,v| ENV[k] = v } 
```

Then these environment variables can be referenced in the `omniauth` initializer without any ordering dependency among intializers.

# c++ - C++ SDL“本机”已退出，代码为 -1073741701 (0xc000007b)”

> ID：11648621
> 
> 赞同：2
> 
> 时间：2012-07-25T11:24:50.190
> 
> 标签：c++, sdl

我的代码

```
#include "SDL.h"
#include <iostream>
#undef main

int main ( void ) {
SDL_Init( SDL_INIT_EVERYTHING );
SDL_Quit(  );
return 0;
} 
```

我遵循 LazyFoo 的 tut，但即使构建解决方案，我仍然需要修改我的设置。现在，每次我调试它时，我都会得到：

该程序`[11228] xxx.exe: Native' has exited with code -1073741701 (0xc000007b).`

你能帮我吗 ？

编辑：我正在运行 Windows 7 64 位，并且包含 x86 lib 包，链接器输入：SDL.lib;SDLmain.lib;SDL_image.lib;OpenGL32.lib;glu32.lib

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:42:38.353

您是否尝试过[此答案](https://stackoverflow.com/questions/9223611/using-sdl-image-in-visual-studio-2010-with-error-application-was-unable-to-sta)中的建议？

您看到的错误通常表明找不到运行时 dll。如果您*已经*尝试过上述方法，也许您可​​以在[depends.exe](http://www.dependencywalker.com/)中打开内置的可执行文件，它应该让您知道缺少哪些DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-25T16:40:04.883

该错误还意味着您可能正在混合架构：64 位应用程序与 32 位库或（更常见：）反之亦然

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-17T15:24:21.123

我不确定这是否会对您有所帮助。我在使用 OpenCv 时遇到了同样的错误。事实证明，我正在链接 x64 DLL 而不是 x86 DLL。

# java - 将 BigDecimal 数的精度加一？

> ID：11648623
> 
> 赞同：0
> 
> 时间：2012-07-25T11:25:01.497
> 
> 标签：java

我有如下要求。

我有许多 BigDecimal 类型：100

```
i need a method which will take input(100 here) and gives output as 100.1
if 100.1 is passed it should return 100.2
if 100.2 is passed it should return 100.3....etc 
```

有没有最简单的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:38:21.397

~~您可以重新缩放它，加 1，然后再缩放它。~~
正如@PeterLawrey 建议的那样，这可以简化为只需添加`BigDecimal.ONE.scaleByPowerOfTen(-scale)`.

```
public static BigDecimal increaseBy1(BigDecimal value) {
    int scale = value.scale();
    return value.add(BigDecimal.ONE.scaleByPowerOfTen(-scale));
}

public static void main(String[] args) {
    System.out.println(increaseBy1(new BigDecimal("100.012")));
    System.out.println(increaseBy1(new BigDecimal("100.01")));
    System.out.println(increaseBy1(new BigDecimal("100.1")));
    System.out.println(increaseBy1(new BigDecimal("100")));
} 
```

印刷

```
100.013
100.02
100.2
101 
```

如果您想`100`成为`100.1`，请将第一行更改为

```
int scale = Math.max(1, value.scale()); 
```

# python - MongoDB shell 在 php 和 python 中的 db.stats()

> ID：11648627
> 
> 赞同：12
> 
> 时间：2012-07-25T11:25:12.970
> 
> 标签：python, php, mongodb, pymongo, mongodb-php

我可以看到来自 Mongo shell 的统计信息

```
db.stats() 
```

或者

```
db.collection_name.stats() 
```

如何从 PHP 和 Python 查看数据库或集合的统计信息。

**编辑**：我已经在 PHP 中完成了，但仍然无法在 Python 中完成。

帮助？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T23:05:04.910

`Python`如果您正在使用`PyMongo`驱动程序，这就是您的操作方式：

```
 connection = pymongo.Connection(host = "127.0.0.1", port = 27017)
db = connection["test_db"]
test_collection = db["test_collection"]
db.command("dbstats") # prints database stats for "test_db"
db.command("collstats", "test_collection") # prints collection-level stats for "test_collection" under "test_db". 
```

**参考：**

*   [db.command()](http://api.mongodb.org/python/current/api/pymongo/database.html#pymongo.database.Database.command)*   [MongoDB：如何从 API 获取 db.stats()](https://stackoverflow.com/questions/8726152/mongodb-how-to-get-db-stats-from-api)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T13:23:11.080

这就是你在 PHP 中的做法

```
$con= new Mongo()

$stats=$con->dbName->command(array('dbStats' => 1));  // for db.stats()

$stats=$con->dbName->command(array('collStats' => 'collection_name')); // for db.collection_name.stats() 
```

但是如何在python中做到这一点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T22:13:32.090

我发现使用 Mongoengine 模型执行此操作的最简单方法是：

```
import mongoengine
from models import MyModel

connection = mongoengine.connection.get_connection()
db = connection[MyModel._get_db().name]
stats = db.command("collstats", MyModel._get_collection_name()) 
```

这应该允许使用 mongoengine 的配置设置对集合和数据库进行透明更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-25T14:47:02.180

这是使用新驱动程序执行`dbStats`命令的 PHP 代码：`MongoDB`

```
$mongo = new \MongoDB\Driver\Manager('mongodb://localhost:27017');
$cmdstats = new \MongoDB\Driver\Command(['dbStats' => 1]);
$dbstats = $mongo->executeCommand('databaseName', $cmdstats);
$dbstats->setTypeMap(array(
    'array' => 'array',
    'document' => 'array',
    'root' => 'array'
));

// There must be only one item in $dbstats

foreach ($dbstats as $dbs)
{
    echo($dbs['dataSize']);
} 
```

# c++ - 枚举数组相对于常量和宏的优势？

> ID：11648628
> 
> 赞同：0
> 
> 时间：2012-07-25T11:25:14.167
> 
> 标签：c++, enums

> **可能重复：**
> [我应该使用#define、enum 还是 const？](https://stackoverflow.com/questions/112433/should-i-use-define-enum-or-const)
> [#defines 与常量的优缺点？](https://stackoverflow.com/questions/1944041/advantage-and-disadvantages-of-defines-vs-constants)

enum 将如何比#define 和 const 更有用。内存和代码可见性的观点和可读性的观点。我可以将（类型转换）枚举转换为 int 数组吗，如果我已经取了整数内的所有值。

例子：

```
 class MapPlt_clContainer { 
    public:  
    enum tagVectorType {       
    enVTAll = 0,       
    enVTPolygon,       
    enVTLines 
    }  
    };  

    tVoid MapPlt_clRender::vDrawLineClass( MapPlt_clContainer::tagVectorType* ) 
```

调用函数枚举传递时

```
vDrawLineClass( ClassArray_Group ); //Working 
```

调用数组基地址传递时

```
int test[3] =  
{       
5,       
6,       
7, 
};   

vDrawLineClass( test); //Not Working 
```

错误！！

它应该自动类型转换吗？或者它取决于编译器。就我而言，它给出了错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:30:19.393

`enum`与不同的**类型**不同`#define`，语言（在编译器的帮助下）将帮助您确保不会混合不同**类型**的值（即使它们具有相同的数值）。

此外，调试器可以使用 an 的值，而在预处理期间（甚至在代码生成开始之前）丢失了`enum`的原始含义。`#define`

将 an 类型转换`enum`为 an`int`是一个自动的内置过程，而相反的转换则比较棘手，因为并非所有`int`值都对您的特定`enum`.

如果您在没有子句`enum`的语句中使用了所有可能的值，现代编译器也会警告您，这是无法检查s`switch``default``#define`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:40:39.743

如果您在 C++ 中使用枚举作为整数，那么您会闻到气味。枚举定义了一种类型，并且只应使用该类型的值。（我意识到这不是强制的，枚举可以被解释为一个 int，但对于 C++，它通常不应该）。

另外，我的一个大烦恼：不要在 C++ 中的枚举名称中加上“类型”。枚举的值不是“类型”（在 C++ 的意义上）。一旦你开始编写模板代码，你就会讨厌所有类型名称中带有单词 Type 的枚举。

此外，任何时候你试图在你的设计中进行类型转换，你都做错了。这在 C++ 中是一种可怕的气味。您不应该这样做，当然也不应该将其设计到您的代码中（即，将其用作“功能”）。

最后，这部分：

```
int test[3] =  
{       
5,       
6,       
7, 
}; 

vDrawLineClass( test); //Not Working 
```

这是一个直截了当的丑陋黑客。做你说的，说你做的：

```
MapPlt_clContainer::tagVectorType test[3] =  
{       
MapPlt_clContainer::enVTAll,       
MapPlt_clContainer::enVTPolygon,       
MapPlt_clContainer::enVTLines 
};

vDrawLineClass( test); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:50:49.147

除了其他答案中提出的观点外，我想补充以下几点：

如果您有多种类型并且需要对其进行迭代，则必须使用常量数组，如下所示：

```
const int states[] = {STATE_1,STATE_2, STATE_3, STATE_4 };
int numStates = sizeof(states)/sizeof(state[0]);
for (int i = 0; i < numStates; i++) {
    // Do something with states[i]..
} 
```

通过枚举，这可以简化为

```
enum states{cState_1 = 0, cState_2, cState_3, cState_4, cNumStates};
for (int i = 0; i < numStates; i++) {
    // do something with i
} 
```

# shell - 从 Perforce 生成一个日志文件以与 Gourse 一起使用

> ID：11648637
> 
> 赞同：1
> 
> 时间：2012-07-25T11:25:47.600
> 
> 标签：shell, awk, perforce, gource

我正在尝试使用 awk 生成一个 perforce 日志文件，然后可以将其与[Gource](http://code.google.com/p/gource/)一起使用。

Gource 允许您生成文件/项目修订历史的动画。

我尝试按照[此处](http://blog.ruslans.com/2010/01/code-opera-using-gource-to-watch-story.html)的示例进行操作，但它们不适用于我的仓库（尽管它们适用于 adobe 仓库！）

我还尝试了[此处](http://code.google.com/p/gource/wiki/CustomLogFormat)页面上的脚本，上面写着，

```
p4 changes //depot/path_to_files/|awk '{print $2}'|p4 -x - describe -s|awk '(/^Change / || /^... /) {if ($1 == "Change") {u=substr($4,1,index($4,"@")-1); t = $(NF-1) " " $NF; gsub("/"," ",t); gsub(":"," ",t);mktime(t);} else {if ($NF=="add") {c="A";} else if ($NF=="delete") {c="D";} else {c="M";};f=substr($2,3,index($2,"#")-3);print time "|" u "|" c "|" f;}}'|sort -n 
```

但我得到一个

“ **awk：第 0 行（NR=1）：变量“mktime”不能用作函数**“

错误。

如果有人知道出了什么问题，我想听听你的意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:06:16.543

`mktime`是一个**GNU awk**扩展：

> 为了更容易处理此类日志文件并生成有用的报告，gawk 提供了以下用于处理时间戳的函数。它们是笨拙的扩展；它们没有在 POSIX 标准中指定，也没有在任何其他已知版本的 awk 中指定

[https://www.gnu.org/software/gawk/manual/html_node/Time-Functions.html](https://www.gnu.org/software/gawk/manual/html_node/Time-Functions.html)

如果它在您的系统上可用，只需替换`awk`为：`gawk`

```
p4 changes //depot/path_to_files/             \
  | awk '{print $2}'                          \
  | p4 -x - describe -s                       \
  | gawk '(/^Change / || /^... /) {           \
      if ($1 == "Change") {                   \
          u=substr($4,1,index($4,"@")-1);     \
          t = $(NF-1) " " $NF;                \
          gsub("/"," ",t);                    \
          gsub(":"," ",t);                    \
          time = mktime(t);                   \
      } else {                                \
          if ($NF=="add") {                   \
            c="A";                            \
          } else if ($NF=="delete") {         \
            c="D";                            \
          } else {                            \
            c="M";                            \
          };                                  \
          f=substr($2, 3, index($2,"#")-3);   \
          print time "|" u "|" c "|" f;       \
      }                                       \
  }'                                          \
  | sort -n 
```

# wpf - 使用 xaml 文件引用组件

> ID：11648638
> 
> 赞同：0
> 
> 时间：2012-07-25T11:25:52.080
> 
> 标签：wpf, mvvm, f#

我想通过代码从我的 ViewModelClass 中对视图进行操作，而不仅仅是修改 XAML 绑定到的属性。

```
member x.SelectedUdl 
  with get() = selectedudl
  and set value = selectedudl  <- value
                  //do fancy things like 
                  //this.Quotes12.ItemsSource <- asyncquotes.gethisto (undls |> Seq.head, 2012) 
```

但是要做到这一点，我需要对组件本身的引用。
我有什么方法可以从 xaml 或其他方式添加对“this”的引用吗？

```
 <UserControl.DataContext>
      <ViewModel:QuotesViewModel>
           <x:Arguments>
              THIS
           </x:Arguments>
      </ViewModel:QuotesViewModel>
   </UserControl.DataContext>
   <DockPanel> 
```

```
type QuotesViewModel(this:Window) =
    inherit ViewModelBase() 
```

**编辑**

我终于在第一个位置添加了一个 Global.fs 文件，以便所有编译单元都可以访问它

```
module Global

open FSharpx

type MainWindow = XAML<"MainWindow.xaml">

type Singleton private () =
   static let instance = Singleton()
   let mutable ivalue : MainWindow = null

   static member Instance = instance
   member this.Value 
      with get () = ivalue  
      and set value = ivalue  <- value

let window () =  Singleton.Instance.Value 
```

请注意，它使用 XAML 类型提供程序，因此您必须将 FMVVM 模板 MainWindow 的 Frame 上移一级才能从强类型访问中受益。

然后在视图中，可以添加

```
Global.window().TextBox.Text <- "hello" 
```

有了这个，我们可以以强类型的方式使用声明方式或代码方式。

初始化很容易完成

```
let mainWindow = MainWindow()
Global.Singleton.Instance.Value <- mainWindow

// Application Entry point
[<STAThread>]
[<EntryPoint>]
let main(_) =(new Application()).Run(mainWindow.Root) 
```

（欢迎推荐，我刚开始看wpf ..）

# mysql - Mysql在不同的表中使用like与两个变量

> ID：11648641
> 
> 赞同：0
> 
> 时间：2012-07-25T11:25:59.707
> 
> 标签：mysql

我有两张桌子`a`和`b`.

`Table a`有一个名为的字段`gr`，它可以有多个与字符串相连的值。

`Table b`在字段中单独持有它`lg`。

我如何运行以下查询来检查是否`b.lg`在`a.gr`？

```
 SELECT lg FROM `a`,`b` WHERE a.`id` =22 AND  (a.gr LIKE '%'+b.lg+'%') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:30:10.883

您需要使用 CONCAT 函数尝试：

```
SELECT lg 
FROM a, b 
WHERE a.id = 22 AND  
      a.gr LIKE CONCAT('%', b.lg, '%'); 
```

# android - getHttpResponseCode() 在 android 2.2 中返回 -1

> ID：11648648
> 
> 赞同：7
> 
> 时间：2012-07-25T11:26:25.963
> 
> 标签：android, https, httpurlconnection

在我的 android 应用程序中，我试图通过执行 POST 请求从服务器中提取数据。

我正在使用`HttpURLConnection`类来发出请求，因为 Apache`HttpClient`不再由 android 维护。

这就是我正在做的事情。

```
private boolean callWS() {
    try {

        // To avoid the bug in httpurlconnection prior froyo which
        // causes the getInputStream to return headers along with response
        if (Build.VERSION.SDK_INT < 8)
            System.setProperty("http.keepAlive", "false");

        mHttpResponseCode = 0;
        mErrorMessage = "";

        // Initialize connection
        URL connectURL = new URL(mServerUrl);

        HttpURLConnection conn = (HttpURLConnection) connectURL.openConnection();
        conn.setDoInput(true);
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setInstanceFollowRedirects(true);
        conn.setReadTimeout(30000); 
        conn.setConnectTimeout(15000); 
        conn.setRequestMethod("POST");

        // Set some headers
        connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
        connection.setRequestProperty("Accept-Encoding", "deflate, gzip");
        connection.setRequestProperty("Content-Length", mParameters.length() + "");

        // Connect to host
        conn.connect();

        // Write parameters to connection
        OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());
        writer.write(mParameters);
        writer.flush();
        writer.close();

        // Wait for http response code
        mHttpResponseCode = conn.getResponseCode();

        // Read response from connection
        BufferedInputStream bis = new BufferedInputStream(conn.getInputStream());
        ByteArrayBuffer baf = new ByteArrayBuffer(50);
        int read = 0;
        int bufSize = 1024;
        byte[] buffer = new byte[bufSize];

        while (true) {
            read = bis.read(buffer);
            if (read == -1)
                break;
            baf.append(buffer, 0, read);
        }

        // Decompress gzipped response
        if (conn.getHeaderField("Content-Encoding") != null && conn.getHeaderField("Content-Encoding").contains("gzip"))
            mResponseString = decompress(baf.toByteArray());
        else
            mResponseString = new String(baf.toByteArray());

        mResponse.setResponse(mResponseString);         
        isWSCallSuccessfull = true;
    } catch(UnknownHostException unknownHostException) {
        isWSCallSuccessfull = false;
        mErrorMessage = "Unknown host exception";
        unknownHostException.printStackTrace();
        mLogger.putStacktrace(unknownHostException);
    } catch(SocketException socketException) {
        isWSCallSuccessfull = false;
        mErrorMessage = "Socket Exception";
        socketException.printStackTrace();
        mLogger.putStacktrace(socketException);
    } catch(SocketTimeoutException socketTimeOutException) {
        isWSCallSuccessfull = false;
        mErrorMessage = "Socket Timeout Exception";
        socketTimeOutException.printStackTrace();
        mLogger.putStacktrace(socketTimeOutException);
    } catch(SSLException sslException) {
        isWSCallSuccessfull = false;
        mErrorMessage = "SSL Exception";
        sslException.printStackTrace();
        mLogger.putStacktrace(sslException);
    } catch(IOException ioException) {
        isWSCallSuccessfull = false;
        mErrorMessage = "IO Exception " + ioException.getMessage();
        ioException.printStackTrace();
        mLogger.putStacktrace(ioException);
    }

    mResponse.setHttpResponseCode(mHttpResponseCode);
    mResponse.setErrorMessage(mErrorMessage);
    mResponse.isWSCallSuccessful(isWSCallSuccessfull);

    return isWSCallSuccessfull;
} 
```

除了运行 2.2 的设备（没有在 2.1 上尝试过）之外，这在所有设备上都可以正常工作。

在 2.2 中，它工作正常。但是如果我让这部分代码闲置超过 30 秒，它会在下一次返回 -1 作为 http 响应代码。

另一件需要注意的是，这仅发生在 HTTPS 网址上，而不是 HTTP 网址。我不想使用 HttpsURLConnection 类，因为有时我可能也想使用 http。

我不会关闭连接只是为了保持连接处于活动状态。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:26:07.407

如果您想同时使用 Https 和 Http 并且不想创建单独的连接 - 如果`HttpsUrlConnection`解决了您的*“-1 问题”*，您可以使用以下方法：

```
URLConnection conn = new URL(url).openConnection();
if (conn instanceof HttpsURLConnection) {
  // do stuff with cast to HttpsUrlConection
}
else {
  // do stuff with cast to HttpUrlConnection
} 
```

我把[这个](https://stackoverflow.com/questions/3604089/classcastexception-with-httpsurlconnection)答案作为参考

# r - 求解方程，奇怪的结果

> ID：11648653
> 
> 赞同：1
> 
> 时间：2012-07-25T11:26:43.903
> 
> 标签：r

这是我求解方程的代码：

```
fx=function(x){ x^3-x-3}  
solve=function(a,b,eps){
    if(abs(fx(a))<0.00001)  return(list(root=a,fun=fx(a)))    
    else if(abs(fx(b))<0.00001)  return(list(root=b,fun=fx(b)))  
    else if (fx(a)*fx(b)>0)  return(list(root="failed to find"))  
    if (a>b){
        c<-a
        a<-b
        a<-b}       
    while( b-a>eps ){ 
        x=(a+b)/2
        if (fx(x)==0) {return(list(root=x,fun=fx(x))) } 
        else if (fx(a)*fx(x)<0) {b=x }           
        else  {a=x}}
    myroot=(a+b)/2
    return(list(root=myroot,value=fx(myroot)))
}

> solve(1,3,1e-8)
$root
[1] 1.6717

$value
[1] 2.674228e-08

> fx(1.6717)
[1] 8.73813e-07 
```

为什么`fx(1.6717) != $value`，我想知道原因
`8.73813e-07!=2.674228e-08`？

我怎样才能修改：return(list(root=myroot,value=fx(myroot)))
使我的根更多位数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:09:24.757

当 R 打印一个值时，它默认使用`digits=3`，即打印 3 个有效数字。这意味着您在查看结果时出现了解释错误。

试试这个：

```
 x <- solve(1,3,1e-8)

print(x[[1]], digits=9)
[1] 1.67169989 
```

现在将实际返回值替换为您的函数：

```
fx(x[[1]])
[1] 2.674228e-08 
```

现在值匹配。

总之，您在解释函数的打印结果时犯了一个舍入错误。

* * *

您可以在 R 帮助文件中跟踪此行为，如下所示：

```
?print 
```

会指向你

```
?print.default 
```

关于这个论点有这样的`digits`说法：

*数字：数字的非空值指定要在值中打印的有效数字的最小数量。默认值 NULL 使用 getOption(digits)。（有关复数的解释，请参见 signif。）非整数值将向下舍入，并且仅接受大于或等于 1 且不大于 22 的值。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:06:26.413

试试这个，看看`print()`of`a`和`b`。

```
fx=function(x){ x^3-x-3}  
solve=function(a,b,eps){
    if(abs(fx(a))<0.00001)  return(list(root=a,fun=fx(a)))    
    else if(abs(fx(b))<0.00001)  return(list(root=b,fun=fx(b)))  
    else if (fx(a)*fx(b)>0)  return(list(root="failed to find"))  
    if (a>b){
        c<-a
        a<-b
        a<-b}       
    while( b-a>eps ){ 
        x=(a+b)/2
        if (fx(x)==0) {return(list(root=x,fun=fx(x))) } 
        else if (fx(a)*fx(x)<0) {b=x }           
        else  {a=x}}
    myroot=(a+b)/2
    print(a,digits=20)
    print(b,digits=20)
    return(list(root=myroot,value=fx(myroot)))
} 
```

有一个回合。

# .net - 在内存中创建目录

> ID：11648659
> 
> 赞同：0
> 
> 时间：2012-07-25T11:27:12.047
> 
> 标签：.net, azure, azure-storage

我们如何在内存中创建一个目录作为流，然后使用 System.IO 包作为 zip 包目录。

附加信息：我需要做内存，因为我将在 Windows Azure 中使用它。所以我不确定我是否会在服务器中获得这样做的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:39:50.773

在内存中执行所有这些操作可能不是一个好主意，尤其是当您在 Windows Azure 中运行时。知道您的实例的可用内存量有限，您应该将实例上的负载保持在最低限度。

为什么不使用[本地资源](http://msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx)呢？这是磁盘上的一部分，您可以在其中使用任何您需要的东西（在您的情况下创建一个目录，也许添加一些文件并压缩它）：

```
LocalResource resource = RoleEnvironment.GetLocalResource("MySampleStorage");
Directory.CreateDirectory(resource.RootPath + "\\NewFolder");
File.Create(resource.RootPath + "\\NewFolder\\NewFile.txt"); 
```

请注意，此数据不会被保留（您可以随时丢失它）。一旦你完成了你需要做的任何事情，你应该把文件保存为一个 blob（请参阅：[如何使用 Blob 存储服务](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)）

# java - Util 或 Swing 任何一种 Java 计时器都使我的整个系统挂起、冻结，如何保护系统崩溃？

> ID：11648661
> 
> 赞同：3
> 
> 时间：2012-07-25T11:27:12.087
> 
> 标签：java, swing, time

当我使用 util 或 swing Timer 时，系统会挂起/冻结。我怎么能骑这个？

我在下面调用此任务的其他用户界面，重试后，整个系统被冻结。

```
TimerTask t  = new Task("Local",a); 
java.util.Timer timer = new java.util.Timer();
timer.scheduleAtFixedRate(t, 0, 10000); 
```

尝试 3：失败

```
import java.util.Timer;
import java.util.TimerTask;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;

public final class Task extends TimerTask {

  private static Timer timer;
  //private static ui.V v;

  private static int input;
  private static String sinput;

  public static void main (String... arguments ) {
    TimerTask f  = new Task("Local:",20); 
    timer = new Timer();
    timer.scheduleAtFixedRate(f, 0, 10000);   
  }

  public Task(String sinput, int input) {
    this.input = input;
    this.sinput = sinput;
  }

  public void run() {
    System.out.println("Will freeze, dont freeze.....");
    //v = new ui.V(sinput);  loading a user interface
    //v.up(input); show the value
    try {
      Thread.sleep(4000); // wait 4 seconds
    } catch (InterruptedException ex) {
      Logger.getLogger(Task.class.getName()).log(Level.SEVERE, null, ex);
    }
    //v.killme(); // kill the display
    timer.cancel();
  }

} 
```

我也尝试了以下方法，但所有相同的结果系统都被冻结了，我必须手动关闭并打开 PC。

尝试0：失败

```
t = new java.util.Timer();
t.schedule(new TimerTask() {
      @Override
   public void run() {
    // same
   }
}, 0, 10000); 
```

尝试1：失败

```
t = new javax.swing.Timer(10000, new ActionListener() {
  public void actionPerformed(ActionEvent ae) {
    // same
  }
});
t.start(); 
```

尝试2：失败

```
new Thread(new Runnable() {
  public void run() {
   t = new javax.swing.Timer(10000, new ActionListener() {
    public void actionPerformed(ActionEvent ae) {
     // same
    }
   });
t.start();
  }
}).start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:40:12.790

奇怪，但自从我开始运行它如下：（仍然没有显示冻结）

```
button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {

        EventQueue.invokeLater(new Runnable() {

          @Override
          public void run() {
                ....here... timer seems ... less... risky....
            }
        });

    }
}); 
```

参考：

[https://stackoverflow.com/a/5500371/285594](https://stackoverflow.com/a/5500371/285594)

# c++ - C ++如何使用const将接口传递给类方法

> ID：11648663
> 
> 赞同：0
> 
> 时间：2012-07-25T11:27:19.030
> 
> 标签：c++, visual-c++

在使用 Visual Studio 2008 的本机 C++ 中，如何使用 const 将接口传递给类成员？执行以下操作会导致此错误：

错误 C2662：“IMyInterface::PublicMember1”无法将“this”指针从“const IMyInterface”转换为“IMyInterface &”

```
class IMyInterface
{
  virtual std::wstring PublicMember1() = 0;
  virtual int PublicMember2() = 0;
  virtual void Update(const IMyInterface & myObject) = 0;
}

class MyClass : public IMyInterface
{
   private:
      std::wstring privateMember1;
      int privateMember2;
   public:
      virtual std::wstring PublicMember1() { return privateMember1; }
      virtual int PublicMember2() { return privateMember2; }
      virtual void Update(const IMyInterface & myObject);
}

void MyClass::Update(const IMyInterface& myObject)
{
     privateMember1 = myObject.PublicMember1();
     privateMember2 = myObject.PublicMember2();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T11:28:56.820

将接口所需的方法声明为`const`

```
class IMyInterface
{
  virtual std::wstring PublicMember1() const = 0;
  virtual int PublicMember2() const = 0;
  virtual void Update(const IMyInterface & myObject) = 0;
} 
```

# jquery - 两段几乎相同的 jquery 代码工作方式不同

> ID：11648667
> 
> 赞同：0
> 
> 时间：2012-07-25T11:27:25.440
> 
> 标签：jquery, html

在示例中（参见链接），四个按钮中的三个打开了一个灯箱。顺序如下：

1.  用户点击
2.  背景变黑
3.  灯箱出现
4.  灯箱内容淡入

每次用户点击链接时都会发生这种情况，即使他们之前已经打开过该灯箱。对于其中两个链接（右上角和左下角），它工作得很好，但对于另一个（左上角），它在用户第一次点击时工作正常，但在关闭灯箱并重新打开后，内容已经存在并出现从右侧“飞入”。灯箱的代码是相同的，除了 ID 标签。

为什么会这样？！！

查看的链接是：

[http://testing.xenongroupadmin.com/whatis/pfi/#](http://testing.xenongroupadmin.com/whatis/pfi/#)

Jquery代码是：

```
$(document).ready(function(){
 $("a#show-whopanel").click(function(){
  $("#lightbox").fadeIn(300, function(){
   $("#who-panel").show(600, function(){
   $("#animation1").fadeIn(1000)
   });
  });
 });
 $("a#close-panel1").click(function(){
  $("#lightbox, #who-panel").fadeOut(300, function(){
   $("div#animation1").hide(300);
   }
  );
 });
});

$(document).ready(function(){
 $("a#show-whatpanel").click(function(){
  $("#lightbox").fadeIn(300, function(){
   $("#what-panel").show(600, function(){
   $("#animation2").fadeIn(1000)
   });
  });
 });
 $("a#close-pane2").click(function(){
  $("#lightbox, #what-panel").fadeOut(300, function(){
   $("div#animation2").hide(600);
   }
  );
 });
});

$(document).ready(function(){
 $("a#show-prosconspanel").click(function(){
  $("#lightbox").fadeIn(300, function(){
   $("#proscons-panel").show(600, function(){
   $("#animation3").fadeIn(1000)
   });
  });
 });
 $("a#close-panel3").click(function(){
  $("#lightbox, #proscons-panel").fadeOut(300, function(){
   $("div#animation3").hide(600);
   }
  );
 });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:47:30.443

我想到了！

事实证明 JQuery 代码没有问题。简单来说，在 HTML 标记中，用于使屏幕变黑的 div 元素位于第一个灯箱面板的 div*下方*，但在其他两个*上方。*我把它拿出来，把它移到顶部，嘿，Presto！- 有用！

# android - Android 帐号谷歌 getauthtoken 值 null

> ID：11648669
> 
> 赞同：1
> 
> 时间：2012-07-25T11:27:28.577
> 
> 标签：android, accountmanager

我的代码：

```
Account[] accts = mgr.getAccountsByType("com.google");
Account acct = accts[0];
System.out.println("account:" + acct);

AccountManagerFuture<Bundle> acc=mgr.getAuthToken(acct, OAUTH2_SCOPE, null, null,
                    null, null);
Bundle authTokenBundle = acc.getResult();
String authToken = authTokenBundle.get(AccountManager.KEY_AUTHTOKEN).toString();
System.out.println("authtoken:"+authToken); 
```

该代码每 1 天生效一次。身份验证令牌今天来了，但明天不会来，第二天它又可以工作了。一个很奇怪的问题。

我的`OAUTH2_SCOPE = "oauth2:https://www.googleapis.com/auth/userinfo.profile"`

该`getAuthToken()`函数返回空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T06:10:38.380

将 OAUTH@_SCOPE 的值用作“oauth2: [https://mail.google.com/](https://mail.google.com/) ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T08:03:07.837

这可能与在`Account`after上进行调用有关`accountManager.setAuthToken()`。

[在https://stackoverflow.com/a/19242193/2597978](https://stackoverflow.com/a/19242193/2597978)上查看我的答案

# android - configChanges="orientation" 不会在 Galaxy Nexus 上触发

> ID：11648671
> 
> 赞同：5
> 
> 时间：2012-07-25T11:27:33.387
> 
> 标签：android, orientation, galaxy-nexus

您好我有一个奇怪的错误，当我想在 Galaxy Nexus(4.0.4) 上触发方向更改时，它根本不会跳转到该`onConfigurationChanged(Configuration)`功能。在 HTC Desire(4.0.4) 上，它使用相同的代码没有任何问题。甚至在 720p 的模拟器上也能正常工作。我尝试更新到 Android 4.1，但我仍然遇到同样的问题。

有没有人有同样的问题或任何解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T11:35:06.140

我看到这两款设备都运行 Android 4.x，但请尝试`screenSize`按照我之前的回答[here](https://stackoverflow.com/a/11631017/716075)中所述添加价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:49:49.317

在清单中，在`<activity>`标签中添加`android:configChanges="orientation"`. 这告诉系统您的活动将自行处理方向更改，因此将触发 onConfigurationChanged()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T09:20:45.273

如果您之前调用`setRequestedOrientation(..)`过活动，`onConfigurationChanged(Configuration)`则不会被系统自动检测旋转触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T11:37:09.253

`screenSize`需要 Android 4.X 上的标志。尝试另一个 android 编译器生成器。

# javascript - 在 IE8+ 中追加元素的最有效方法是什么？

> ID：11648674
> 
> 赞同：3
> 
> 时间：2012-07-25T11:27:39.350
> 
> 标签：javascript, jquery, html, internet-explorer

我有一个复杂的网页，其中有很多被大量操作的元素。虽然这在 Chrome/FF 上运行得非常顺利，但 IE (8 + 9) 似乎经常在此页面上冻结。

在 IE 上运行比在其他浏览器上慢得多的代码的一个特定部分是我将新元素附加到页面：具体来说，我有 50 个（嵌套）元素，我附加到一个 documentFragment，然后最终我附加documentFragment 到实际文档中的某个元素。最后一个追加发生在 Chrome/FF 上，速度很快，但在 IE 中可能需要几秒钟以上。

我尝试使用 html() / innerHTML，这似乎只会让事情变得更糟（它们可能比 append()-ing 元素一个接一个更好，但 documentFragment 似乎确实有帮助）。问题是，我能做些什么呢？有没有更有效的方法可以在 IE 中插入这些元素？我是否遗漏了一些可能导致它们插入速度如此缓慢的东西？

谢谢。

**== 编辑 ==**

代码示例（不是 1:1，但这是我通常所指的）：

```
function insertContent(elementsCollection)
{
    var fragment = document.createDocumentFragment();

    for (var i=0; i < elementsCollection.length; i++)
    {
        fragment.appendChild($(collection[i])[0]);
    }

    $("#parentDiv").append(fragment);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:37:36.263

我一直使用（并推荐）

```
rootNode.replaceChild(newElement, oldElement) 
```

我没有遇到你在 IE/FF/Chrome/Safari 中提到的问题。我单独准备新的文档片段并一次性用新的节点替换现有节点，而不是一次构建活动的 DOM 树节点。

# cuda - CUDA SDK 示例在多 GPU 系统中引发各种错误

> ID：11648679
> 
> 赞同：7
> 
> 时间：2012-07-25T11:27:42.170
> 
> 标签：cuda, ubuntu-12.04, multi-gpu

我有一个运行 Ubuntu Precise 的 Dell Precision Rack，配备两个 Tesla C2075 和一个显示设备 Quadro 600。我最近在我的台式计算机上完成了一些测试，现在尝试将东西移植到工作站。

由于 CUDA 不存在，我根据[本指南](http://sn0v.wordpress.com/2012/05/11/installing-cuda-on-ubuntu-12-04/)安装了它，并根据[此建议](http://laurencedawson.com/upgrading-to-cuda-4.0)调整了 SDK Makefiles 。

我现在面临的是没有一个样本（我确实测试了 10 个不同的样本）正在运行。这些是我得到的错误：

* * *

```
[deviceQuery] starting...

./deviceQuery Starting...

 CUDA Device Query (Runtime API) version (CUDART static linking)

cudaGetDeviceCount returned 10
-> invalid device ordinal
[deviceQuery] test results...
FAILED

> exiting in 3 seconds: 3...2...1...done! 
```

* * *

```
[MonteCarloMultiGPU] starting...

CUDA error at MonteCarloMultiGPU.cpp:235 code=23510 (cudaErrorInvalidDevice) "cudaGetDeviceCount(&GPU_N)"MonteCarloMultiGPU
==================
Parallelization method  = threaded
Problem scaling         = weak
Number of GPUs          = 0
Total number of options = 0
Number of paths         = 262144
main(): generating input data...
main(): starting 0 host threads...
Floating point exception (core dumped) 
```

* * *

```
[reduction] starting...

reduction.cpp(124) : cudaSafeCallNoSync() Runtime API error 10 : invalid device ordinal. 
```

* * *

```
[simplePrintf] starting...

simplePrintf.cu(193) : CUDA Runtime API error 10: invalid device ordinal. 
```

* * *

正如您所看到的，大多数错误都指向 cudaGetDeviceCount 调用的问题，该调用返回错误代码 10。根据手册，问题是：

```
cudaErrorInvalidDevice: This indicates that the device ordinal supplied by the user does not correspond to a valid CUDA device. 
```

不幸的是，我能找到的唯一解决方案建议检查设备的电源插头。我这样做了，没有任何问题。重新启动工作站也无济于事。

我很乐意提供有关我的配置的更多详细信息。只需发表评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:28:20.247

由于对我最初问题的评论，我能够[找到](http://troylee2008.blogspot.de/2012/05/cudagetdevicecount-returned-38.html)解决方案。我按照 [本指南](http://wiki.ubuntuusers.de/rc.local)学习如何`rc.local`正确设置（不要忘记`chmod`你的脚本）。

# iphone - 如何转换成NSString？

> ID：11648680
> 
> 赞同：0
> 
> 时间：2012-07-25T11:27:41.697
> 
> 标签：iphone

我坚持使用 utf-8 到 NSString。我从网络服务获取这些数据：

```
{
    Description = "&#28450;&#23383;&#20206;&#21517;&#20132;&#12376;&#12426;&#25991;";
    Images =
    (
        {
            imageName = "0_25_07_2012_10_32_54_1343212374.jpg";
        }
    );
    Time = "11:00 am";
    actId = 290;
    actTitle = "&#28450;&#23383;&#20206;&#21517;&#20132;&#12376;&#12426;&#25991;";
} 
```

现在我怎样才能将`&#21517;`（名）这种代码转换为`NSString`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:44:45.933

我很确定您的网络服务有问题。如果 Web 服务响应是 JSON 或 XML 数据，那么 JSON 或 XML 解析器应该已经解码了特殊字符。由于没有，Web 服务错误地使用了 ASCII 范围之外的字符的双重解码。

最好的解决方案是在源头上修复它，即在 Web 服务中。

如果不能，请使用`stringByDecodingHTMLEntities`此[NSString 类别](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)中的方法，例如：

```
NSString* textValue = [response objectForKey: @"Description"];
textValue = [textValue stringByDecodingHTMLEntities]; 
```

您必须通过此方法运行每个字符串属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:46:24.543

您在此处拥有的代码称为数字字符引用。一般来说，它们与 UTF8 没有直接关系。

[有关您的问题的答案摘要，请参阅此问题](https://stackoverflow.com/questions/1105169/html-character-decoding-in-objective-c-cocoa-touch)

# c# - 如何使用 WriteEvent 将事件记录为关键事件

> ID：11648682
> 
> 赞同：2
> 
> 时间：2012-07-25T11:27:46.440
> 
> 标签：c#, .net, windows, event-log, event-viewer

我正在尝试使用以下方法将事件级别设置为关键：

```
WriteEvent(id, categoryName, EventSeverity.ErrorCritical, entry); 
```

但在事件日志中，它仅将事件级别显示为错误而不是严重。我还需要设置其他配置和参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:33:04.423

你的意思是`Microsoft.SharePoint.Administration.EventSeverity`？它由 ShP 使用并映射到它自己的事件日志。

使用`System.Diagnostics.EventLogEntryType`映射到 Windows 事件日志的正确方法：

```
Error
Warning
Information
SuccessAudit
FailureAudit 
```

# macos - 如何在 OSX 终端中获得滚动转换？

> ID：11648683
> 
> 赞同：2
> 
> 时间：2012-07-25T11:27:47.007
> 
> 标签：macos, vim, terminal

如何让终端（或 Visor/TotalTerminal）在打印出文本时平滑滚动。这样我就不会在显示 git diff 时完全失去位置感。`CTRL`或者，当使用-`D`和`CTRL`-在 vi​​m 模式下导航长差异时`U`。我不希望终端“跳”到一个新的地方，而是平稳地流向它。

（我用的是osx雪豹）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T13:00:16.773

你不能。

终端仿真器使用线条和字符作为最小单位，而不是显示器的像素。

将每个单独的字符视为终端的像素：就像您的显示器不能显示半个像素一样，您的终端也不能显示一个字符的 1/2 或 1/4 或 1/8。

平滑滚动是 GUI 领域的常态，因为文本（或任何有意义的信息）通常比 1 像素高很多。您可以隐藏其中的一部分而不会丢失太多信息。当然，要达到一定的门槛。

在 CLI 领域，最小的显示单位也是较小的信息位。它要么在那里，要么不在那里。

因此，平滑滚动（逐个像素）并没有真正的意义*，而且*实现起来似乎也不是一件容易的事。

# ssh - hmac-sha256 支持

> ID：11648684
> 
> 赞同：0
> 
> 时间：2012-07-25T11:27:48.473
> 
> 标签：ssh, hmac

从 linux 执行 ssh -c 3des -m hmac-sha256 时，会抛出错误消息 'unknown mac type-hmac256'。有人可以建议我如何使用 hmac256 算法吗？任何支持 hmac-sha256 的 ssh 客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:01:35.500

还有另一个链接说 - 它增加了对 SHA-2 系列安全哈希算法的支持。 [https://www.rfc-editor.org/rfc/rfc6668](https://www.rfc-editor.org/rfc/rfc6668) 您可以考虑通过此链接使用 OpenSSH 5.9 进行检查 [http://cvs.openbsd.org/openssh/txt/release-5.9](http://cvs.openbsd.org/openssh/txt/release-5.9)

# css - 如何在 JQGrid TreeGrid 中隐藏行之间的线

> ID：11648694
> 
> 赞同：1
> 
> 时间：2012-07-25T11:28:16.617
> 
> 标签：css, jqgrid

如何隐藏 JQGrid TreeGrid 之间的线条？

我试过了：

```
<table id="TreeGrid" style="border-bottom: 0px none;border-right: 0px none;">
    </table> 
```

但这对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:42:03.703

好的，现在想通了：

```
.ui-jqgrid tr.ui-row-ltr td { border-bottom-style: none; border-right-style: none;} 
```

我仍然不确定如何为#TreeGrid 指定样式...

终于落户

```
#TreeGrid td { border-bottom-style: none; border-right-style: none;} 
```

# joomla - 将 joomla 映射到旧数据库

> ID：11648695
> 
> 赞同：1
> 
> 时间：2012-07-25T11:28:19.987
> 
> 标签：joomla, joomla1.7

我有一个用于安装 joomla 1.7 的数据库。不幸的是，我丢失了保存在 htdocs 上的 Joomla 文件夹。我想安装另一个 Joomla 站点并使用旧数据库。我试图安装另一个 Joomla 站点并连接到我使用的旧数据库，但似乎正在创建一个新站点。有什么方法可以将 Joomla 网站映射到数据库？我不想创建另一个网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:04:07.270

安装新的 joomla 并在 configuration.php 中进行以下更改以使用旧数据库。

新joomla目录/configuration.php

```
public $dbtype = 'mysqli';

public $user = '**dbusername**';   // this will be database user name of old db

public $password = 'mypassword'; // your password to access old datbase

public $db = 'jml17';   // change it to old db

public $dbprefix = 'j17_'; // change it to your old db prefix. 
```

这会将您连接到旧数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:53:34.550

在 phpmyadmin 中尝试将新数据库重命名为不同的名称，然后将备份更改为当前使用的名称。还要检查是否存在一些缓存问题？

# java - 为什么在paintComponent()中使用gif动画时没有动画？

> ID：11648696
> 
> 赞同：7
> 
> 时间：2012-07-25T11:28:29.800
> 
> 标签：java, swing, jpanel, animated-gif, paintcomponent

我正在使用`paintComponent()`在背景上绘制 gif 动画图像`JPanel`。它显示了 gif，但没有动画。我使用 java 1.5，我知道我可以使用带有图标的标签。

**有谁知道为什么以及如何解决它？**

```
 private static class CirclePanel extends JPanel {

    ImageIcon imageIcon = new ImageIcon(BarcodeModel.class.getResource("verify.gif"));
    Point point = f.getLocation();
    protected void paintComponent(Graphics g) {
        Graphics gc = g.create();
        Graphics2D g2d = (Graphics2D) g.create();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.3f));
        g2d.setColor(Color.BLUE);
        g2d.drawImage(imageIcon.getImage(), getWidth() / 2, getHeight() / 2, null);
        g2d.drawRect(0, 0, getWidth(), getHeight());
        g2d.setStroke(new BasicStroke(10f,BasicStroke.CAP_ROUND,BasicStroke.JOIN_MITER));
        g2d.setFont(g.getFont().deriveFont(Font.BOLD | Font.ITALIC,15f));
        g2d.drawString("Wait Please ...",getWidth()/2-imageIcon.getIconHeight()/3,getHeight()/2+imageIcon.getIconHeight()+15);

        g2d.dispose();

} 
```

这是gif图像。
![在此处输入图像描述](../Images/35cbf7fd9a573259ff4d2738028a843c.png)

**编辑：**只需将图像观察器添加到 g2d.drawImage() 方法。

```
 g2d.drawImage(imageIcon.getImage(), getWidth() / 2, getHeight() / 2, this); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T11:34:02.777

原因是标准的 Java ImageIO API 只加载 gif 的第一张图像。怎么修？谷歌为 Java 提供了一个 Gif Loader，它可以加载 gif 的每个图像。然后你必须在正确的时间绘制正确的图像。另一种方法是使用不同的 png 文件代表动画的每次一帧。

**更新：**嗯......实际上，在做了一些研究之后，看起来你的方式实际上加载了动画 gif 的所有帧。原因是 ImageIcon 的方法`getImage()`总是返回第一张图像。

要修复它，你可以试试这个（我不确定它是否会工作......）

而不是使用`Grahpics.drawImage()`，使用`ImageIcon.paintIcon()`。像这样：

```
imageIcon.paintIcon(this, g2d, getWidth() / 2 - imageIcon.getIconWidth() / 2, getHeight() / 2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T12:10:03.257

图像观察者会处理它。您应该将观察者传递给`g2d.drawImage();`如下。

```
g2d.drawImage(imageIcon.getImage(), getWidth() / 2, getHeight() / 2, this); 
```

在我的例子中，'this' 指的是扩展 JPanel 的 CirclePanel，它可以是任何东西，例如，如果你使用 gif 作为按钮的图标，你应该使用按钮作为图像观察者。

# c# - 在 c# 中使控件仅在特定时间内可见

> ID：11648701
> 
> 赞同：0
> 
> 时间：2012-07-25T11:28:49.123
> 
> 标签：c#, controls

我正在开发一个需要以下要求的应用程序：

假设我的表单中有一个按钮和一个标签（最初的可见性设置为 false），并且用户单击该按钮，那么该标签应该显示一些我在按钮单击时分配给该标签的文本。但是这个标签应该只显示一段时间，比如大约 3 秒，然后它应该会自动消失。为此，如果我给：

```
private void button1_Click(object sender, EventArgs e)
    {
     label1.Visible=true;
     label1.Text= "Magic";
     Thread.Sleep(3000);
     label1.Visible=false;
    } 
```

此代码无助于达到目的。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T11:34:31.737

尝试用以下代码替换方法的最后两行：

```
System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
timer.Interval = 3000;
timer.Tick += (source, e) => {label1.Visible = false; timer.Stop();};
timer.Start(); 
```

在 WinForms 中使用 Thread.Sleep() 绝不是一个好主意。改用计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:32:53.790

`Create`一个带有 3s的[计时器](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)`Interval`，启动它，并在您的计时器 Tick 事件中设置`Visible`为。`false`也不要忘记停止计时器。

**永远不要**调用`Thread.Sleep`你的 UI 线程：应用程序将被阻塞，因为 UI 线程在睡眠时不会接受消息（用户点击...）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T11:32:57.427

```
// create a global _timer object
static Timer _timer; // From System.Timers

private void button1_Click(object sender, EventArgs e)
{

    label1.Text = "Magic";
    // Thread.Sleep(3000); // don't do Thread.Sleep()!
    label1.Visible = false;

    Start();
}

static void Start()
{
    label1.Visible = true;

    _timer = new Timer(3000); // Set up the timer for 3 seconds

    _timer.Elapsed += new ElapsedEventHandler(_timer_Elapsed);
    _timer.Enabled = true; // Enable it

}
static void _timer_Elapsed(object sender, ElapsedEventArgs e)
{
    label1.Visible = false;
    _timer.Stop();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T11:34:14.857

使用 Timer，也许是 Windows.Forms.Timer。您可能必须在需要和不需要时启用和禁用它。您当前的方式没有帮助，因为您使主 UI 线程进入睡眠状态。没用。

# web-services - Spring RestTemplate Client - 连接被拒绝异常

> ID：11648706
> 
> 赞同：12
> 
> 时间：2012-07-25T11:28:59.817
> 
> 标签：web-services, spring, rest, client

我是 web 服务的新手，并试图使用 RestTemplate 编写一个 RESTFul web 服务的客户端。我使用 org.springframework.http.converter.xml.MarshallingHttpMessageConverter 作为消息转换器，使用 org.springframework.oxm.xstream.XStreamMarshaller 作为编组器。

有没有办法进一步调试或找出这个问题的根本原因？

我的消费类是这样的——

```
@SuppressWarnings("unchecked")
public List<Deal> getClientInformation() throws RestClientException {
    return restTemplate.getForObject(webServiceURL, List.class); 
```

}

例外 ：

```
Exception in thread "main" org.springframework.web.client.ResourceAccessException: I/O error: Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:359)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:307)
at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:177)
at main.java.com.sample.consumer.DealConsumer.getClientInformation(Consumer.java:35)
at main.java.com.client.WebserviceConsumerTestClient.main(WebserviceConsumerTestClient.java:16) 
```

引起：java.net.ConnectException：连接被拒绝：连接在 org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:359)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-25T11:33:24.790

您尝试调用的 webServiceURL 无法访问。确保 webServiceURL 路径正确且正在侦听。

PS。还要检查服务器端是否存在防火墙问题。

Wireshark 可以帮助您进一步调试。

[http://www.wireshark.org/](http://www.wireshark.org/)

# php - YII CJUIdatepicker 不使用 RenderPartial 视图

> ID：11648707
> 
> 赞同：2
> 
> 时间：2012-07-25T11:29:00.107
> 
> 标签：php, jquery-ui, yii, yii-extensions

我不知道这是否是以前提出的问题，但我坚持使用此代码。

我曾经`Twitter Bootstrap Modal`显示弹出窗口。

现在在我的弹出窗口中，我包含了以下代码（在视图中）

```
<?php
         $this->widget('zii.widgets.jui.CJuiDatePicker', array(
        'name'=>'publishDate',
        'options'=>array(
            'showAnim'=>'fold',
        ),
        'htmlOptions'=>array(
            'style'=>'height:20px;'
        ),
    ));

?> 
```

现在的问题是我从 Controller 中将此模式称为

```
$this->renderPartial('addLaunch', array('model' => $model), false, true); 
```

如果我在主布局中添加，此日期选择器不工作模式但工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:23:01.727

有时 yii 小部件没有注册它的 js 和 css 文件，我仍然没有发现这种情况会发生，但它有一个解决方案，你应该在外部注册它的 js 文件。

我建议了一些解决方案来注册小部件的 js 和 css 文件。请看一下这个链接 [Include CSS,javascript file in Yii Framework](https://stackoverflow.com/questions/1998449/include-css-javascript-file-in-yii-framework/11558722#11558722)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T16:31:50.127

版本 1.1.16 有一个问题，如果您使用相同的更新 DOM ID，如果您单击另一个 ajax 链接会重复更新，它将停止工作。它第一次工作，但它会停止。回到版本 1.1.15 可以完美运行。

# regex - 匹配整个单词的正则表达式

> ID：11648708
> 
> 赞同：0
> 
> 时间：2012-07-25T11:29:04.760
> 
> 标签：regex

我正在尝试在 JavaScript 中使用正则表达式来匹配字符串中单词“icon-”的实例，并将整个附加单词返回到分隔符（空格）。字符串的一个例子是

```
ui-grid-ico-sort icon icon-up ui-icon-asc icon-user ui-icon ui-icon-triangle-1-n ui-sort-ltr 
```

在这种情况下，我试图只匹配“icon-up”和“icon-user”。

到目前为止，我已经尝试过 \bicon- 它似乎匹配 icon- 的每个实例，而不管它在一个单词中的位置（4 个匹配项）和 \bicon-[^'"]+ 它在第一个 icon 实例之后返回所有内容的 1 个匹配项-

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:32:09.813

```
(^|\s)icon-\S+ 
```

`icon-`匹配所有以下一个空格字符开头的单词。

您将需要删除前导空格字符（如果存在）。没有其他方法，因为 JavaScript 不支持后向断言。

**解释：**

```
(^|\s)  # Match start of string or whitespace
icon-   # Match icon-
\S+     # Match one or more non-whitespace characters. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:48:22.130

这是正则表达式：

```
\bicon-[^\b]+?\b 
```

通过使用 \b，此表达式还可以在以下情况下匹配“icon-up”：

图标,图标向上
图标,图标向上,图标向下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:30:25.430

使用这个正则表达式： `(^|\s)icon-\S+`

# android - 使用实现Checkable的根ViewGroup应用ListView的自定义列表项时，不能更改所选项目的颜色吗？

> ID：11648711
> 
> 赞同：0
> 
> 时间：2012-07-25T11:29:16.127
> 
> 标签：android, android-layout

我已经成功地将选定的*自定义列表项的**颜色*（其根未实现）从橙色更改为 system_blue，方法是为其 attr 背景分配： *`ViewGroup``Checkable``selector.xml`*

 *```
<selector>  
    <item android:state_pressed="true" 
        android:drawable="@color/system_blue"/>
    <item android:state_checked="true"
        android:drawable="@color/system_blue"/>
    <item android:drawable="@android:color/transparent"/> 
</selector> 
```

即使`state_checked`定义了大小写，但手指离开所选项目后，所选列表项的状态将不会保持。

现在自定义列表项的 root `ViewGroup implements Checkable`，因为我需要维护所选列表项的状态。Interface`Checkable`的成员函数`setChecked()`实现如下：

```
public void setChecked(boolean checked) {
    mChecked = checked;
    setBackgroundDrawable(checked ? new ColorDrawable(
    getResources().getColor(R.color.system_blue)) : null);
} 
```

现在，在手指离开选择项后，选择项的颜色可以保持为 system_blue。然而，当按下该项目时，颜色首先更改为默认橙色而不是 system_blue。我的 android 设备具有默认的橙色。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:43:58.287

尝试自己处理检查，将 listView 的选择模式设置为[CHOICE_MODE_NONE](http://developer.android.com/reference/android/widget/AbsListView.html#CHOICE_MODE_NONE)。

并处理listView的onItemClickListener中item的checked状态。所以你可以完全控制背景和状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:15:59.167

如果在 HoneyComb 及更高版本上工作，只需添加

```
?android:attr/activatedBackgroundIndicator 
```

作为父视图的背景。这是一个简单的修复:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:57:52.080

检查我今天做的这个例子就是这样做的：

[Github 上的代码](https://github.com/sabadow/ListMultiSelect-Android-Example/)

**编辑**

要在按下时更改项目颜色，需要为按下状态添加一个新项目，如下所示：

```
<item android:drawable="@drawable/gradient_bg_hover" 
    android:state_pressed="true"/> 
```*

# php - (Php) 创建一个带有多个选项但带有 MONTHNAME 和 YEAR 的搜索查询

> ID：11648712
> 
> 赞同：0
> 
> 时间：2012-07-25T11:29:17.427
> 
> 标签：php, mysql, database, search

所以我有一个表单，它有 3 个具有不同条件的下拉列表，一个是搜索月份 (mes)、年份 (ano) 和类型 (tipo_id)。

我想做的事，多亏了这里的许多问题，我才能进入这个地方，当你从 3 个下拉列表中选择一些东西，2 或 1 时，它会显示一个引用有关它的信息的表格，我可以做它，但只是对于tipo_id，我认为问题在于使用MONTHNAME和YEAR的方式在我的代码中使用，我想知道我怎样才能使它工作，在此先感谢

```
 // Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$mes = mysql_real_escape_string($_POST['mes']);
$ano = mysql_real_escape_string($_POST['ano']);
$tipo = mysql_real_escape_string($_POST['tipo_id']);

$meses = array( 
  Janeiro => 'January', 
  Fevereiro =>'February', 
  Março =>'March', 
  Abril =>'April', 
  Maio =>'May', 
  Junho =>'June', 
  Julho => 'July', 
  Agosto =>'August', 
  Setembro =>'September', 
  Outubro =>'October', 
  Novembro =>'November', 
  Dezembro =>'December' 
); 

$sql4 = "SELECT * FROM fluxo ";
$searches = array();
if ($mes  != '') $searches[] = " OR MONTHNAME(data) = '".$meses[$mes]."'";
if ($ano  != '') $searches[] = " OR YEAR(data) = '".$ano."'";
if ($tipo != '') $searches[] = " OR tipo = '".$tipo."'";
if (count($searches) > 0) {
   $sql4 .= " WHERE 1 " . implode(" AND ", $searches);

echo "sql4=$sql4\n";

//$sql4 = "SELECT tipo, movimento, valor, data FROM fluxo WHERE tipo = '".$tipo."' AND MONTHNAME(data) = '".$meses[$mes]."' AND YEAR(data) = '".$ano."' ";
//$result4=mysql_query($sql4); 

$result5 = mysql_query('SELECT SUM(valor) AS value_sum FROM fluxo GROUP BY tipo having count(tipo)>1'); 
$row5 = mysql_fetch_assoc($result5); 
$sum5 = $row5['value_sum'];

$n=1; 

echo "<p>Os seus resultados:<p>";

echo "<table border=0>";
echo "<tr bgcolor='#CCFFCC'>";
echo "<td style='width: 100px;'>Tipo</td>";
echo "<td style='width: 100px;'>Movimento</td>";
echo "<td style='width: 100px;'>Valor</td>";
echo "<td style='width: 100px;'>Data</td>";
echo "</tr>";

while($row = mysql_fetch_array($result4)){ 
    echo "<tr bgcolor='#CCCCCC'>";
    echo "<td style='width: 100px;'>".$row['tipo']."</td>";
    echo "<td style='width: 100px;'>".$row['movimento']."</td>";
    echo "<td style='width: 100px;'>".$row['valor']."</td>";
    echo "<td style='width: 100px;'>".$row['data']."</td>";
    echo "</tr>";

}

echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:33:51.460

这应该有效：

```
$sql4 = "SELECT * FROM fluxo ";
$searches = array();
if ($mes  != '') $searches[] = " MONTHNAME(data) = '".$meses[$mes]."'";
if ($ano  != '') $searches[] = " YEAR(data) = '".$ano."'";
if ($tipo != '') $searches[] = " tipo = '".$tipo."'";
if (count($searches) > 0) {
   $sql4 .= " WHERE 1 " . implode(" AND ", $searches);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:37:45.607

内爆后`$searches`，您最终会得到一个最多包含 3 个`WHERE`关键字的查询。删除前两个`WHERE`s 应该可以解决问题。

# java - Hibernate：从两个可能的地方查询实体的字段？

> ID：11648719
> 
> 赞同：0
> 
> 时间：2012-07-25T11:29:38.040
> 
> 标签：java, sql, hibernate

是否可以从 2 个可能的表中获取实体的字段？

例如：

```
 @Entity
   @Table(name = "TABLE_A")
   public class A{

     @Id
     @Column(name = "ID")
     @GeneratedValue(strategy = GenerationType.AUTO)
     private Long id;
   }

   @Entity
   @Table(name = "TABLE_B")
   public class B{

     @Id
     @Column(name = "ID")
     @GeneratedValue(strategy = GenerationType.AUTO)
     private Long id;
   }

@Entity
@Table(name = "TABLE_PARENT")
public class PARENT{

  // This field needs to be fetched from A table or from B table!!! by some
  // conditions
  @OneToOne
  @JoinColumn(name = "A_B_ID")
  private A a;                     
} 
```

Parent 类中的字段需要根据某些条件从 table_A 或 table_b 中获取！

任何想法将不胜感激！

澄清：如果 Parent 实际上指向 B 实例，我不想获取 B 的实例！每个类继承的表只在 A 的表中查找，因为我们在 Parent 类中指定了他的 A 类型字段！？

你有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:40:14.953

一种解决方案是从一个公共类继承`A`和引用`B`，例如`C`并`C`在`Parent`类中引用。草稿可以是：

```
@MappedSuperclass
public class AB {
    @Id
    private Integer id;
...
}

@Entity
public class A extends AB {
...
}

@Entity
public class B extends AB {
...
}

@Entity
public class Parent {
    ...
    @Id
    private Integer id;
    @OneToOne
    private AB ab;
} 
```

[文档第 2.2.4.1 节](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:39:36.450

您可以通过使用休眠继承功能来实现这一点；这是一个例子； [http://viralpatel.net/blogs/hibernate-inheritance-table-per-concrete-class-annotation-xml-mapping/](http://viralpatel.net/blogs/hibernate-inheritance-table-per-concrete-class-annotation-xml-mapping/)

# ruby-on-rails - Rails ActiveRecord 方法在不同的地方

> ID：11648727
> 
> 赞同：-6
> 
> 时间：2012-07-25T11:30:00.697
> 
> 标签：ruby-on-rails, ruby, activerecord, model

例如，我想在不同的地方使用 activerecord 方法

```
if ..something..
  Post.where(..something..)
else
  Post.where(..something..)
end

@posts = Post.all(:order => ..something..) 
```

这怎么可能？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:36:52.787

你可以这样做：

```
if ..something..
  @posts = Post.where(..something..)
else
  @posts = Post.where(..something..)
end

@posts = @posts.all(:order => ..something..) 
```

最好在 Rails 3 中这样做：

```
@posts = @posts.order(..something..) 
```

# android - 浮动页脚上的按钮不起作用

> ID：11648730
> 
> 赞同：1
> 
> 时间：2012-07-25T11:30:11.040
> 
> 标签：android, jquery-mobile

我是 Android 和 WebDev 的新手。我正在创建一个使用 jquery mobile 的网络应用程序。我有一个浮动页脚，上面有一个按钮。但是在我一直向下浏览包含在网络应用程序中的网页之前，该按钮将不起作用。我就是这样做的

```
<div data-role="footer" data-position="fixed" data-iscroll="scroller">
    <div class="center-wrapper">
            <a href="camera.html" data-role="button" data-icon="gear"> 
            Take Picture ! 
            </a>
    </div>
</div><!-- /footer --> 
```

# android - onItemSelected() 与嵌套开关...如何避免它？

> ID：11648741
> 
> 赞同：1
> 
> 时间：2012-07-25T11:30:47.710
> 
> 标签：android, spinner, switch-statement

对于我的 Android 项目，我准备了一个专用的类来侦听`onClick()`和事件（它是 MVC 的控制器），`onTouch()`并且`onItemSelected()`屏幕有几个`Spinner`对象。在这种情况下，当一个事件被触发时，算法必须知道 1）哪个`Spinner`被选中，2）哪个`Item`被选中。因此，它导致具有如下所示的嵌套开关。

```
@Override
public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
    switch(parent.getId()) {
    case R.id.spn1:
        switch (position) {
        case 0:
            // code
            break;
        case 1:
            // code
            break;
        case 2:
            // code
            break;
        }
    break;
    case R.id.spn2:
        switch (position) {
        case 0:
            // code
            break;
        case 1:
            // code
            break;
        case 2:
            // code
            break;
        }
    break;
    case R.id.spn3:
        switch (position) {
        case 0:
            // code
            break;
        case 1:
            // code
            break;
        case 2:
            // code
            break;
        }
    break;
    default:
    }
} 
```

下面发布的示例已经让我很头疼。我肯定很想知道是否有一些方法（也许是使用 OOP）来避免这种大混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:40:59.053

我会`Listener`为每个`View`.

```
public class MyClass extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        /* Necessary View fetching code omitted */
        mySpinner.setOnItemSelectedListener(new MySpinnerOnItemSelectedListener());
    }

    private class MySpinnerOnItemSelectedListener implements OnItemSelectedListener{

        @Override
        public void onItemSelected(AdapterView<?> parent, View v, int position, long id){ 
            /* Here you only have your inner switch statement */
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:45:01.813

`OnItemSelectedListener`您可以为每个微调器使用分隔符。

如果您不希望这样做，因为它们共享一些代码，我仍然会考虑在`onItemSelected`方法中使用一个开关来确定已单击哪个微调器，然后为每个微调器调用一个单独的方法，以执行您的实际项目转变。

但只要他们不共享任何代码，我建议为每个微调器使用不同的侦听器。我还将这些侦听器创建为内部类，尽管它会使您的类有点膨胀。

您也可以使用该`id`参数，只要您的适配器使用在所有微调器之间都不同的[稳定 ID 。](http://developer.android.com/reference/android/widget/Adapter.html#hasStableIds%28%29)大多数情况下并非如此，因此您仅限于上述两种可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:11:10.867

这取决于您想对这些微调器位置做什么。如果您对每个微调器位置做完全不同的事情，那么您将无法进一步优化。

在这种情况下，您可以做的最好的事情是为每个项目（或每个微调器，如果一个微调器在所有位置中执行类似的操作）创建并调用一个私有函数。

不要认为嵌套开关不好，它们执行速度快，易于阅读和维护。`case`您应该避免在每个块中放置太多代码。您应该改为调用私有函数。

# reporting-services - TFS - 为分层工作项生成报告

> ID：11648742
> 
> 赞同：3
> 
> 时间：2012-07-25T11:30:49.953
> 
> 标签：reporting-services, tfs, hierarchy, mdx

我有一个分层工作项链接到收集如下：

```
Parent-1
    Child-1
        sub-child-1
        sub-child-2
    Child-2
        sub-child-3
Parent-2
    Child-3
        sub-child-4 
```

现在基于上面的层次结构，我需要使用 SSRS 创建一个报告，以显示每个父工作项的子项和子项的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:49:42.893

我在 MSDN 论坛上发布了同样的问题，他们说我需要创建 SQL 查询来生成这种信息，[这是他们的答案](http://j.mp/N1qudh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:58:59.227

您可以使用以下方法在 SSRS 中构建所需的工作项层次结构：

*   TFS 分析多维数据集连接作为数据源
*   基于 [Work Item Tree] 维度的 MDX 查询构建的数据集
*   Report tablix 行组属性的正确配置

[您可以在此处](http://social.msdn.microsoft.com/Forums/en-US/tfsreporting/thread/0175235c-c378-4cd8-a755-b10b20c46ff2#3bcb03b2-4ad1-4a4a-832f-90bbf4a69a24)阅读我关于构建层次结构的详细答案。

此[博客文章](http://blog.davyknuysen.be/2010/04/16/parent-child-hierarchies-in-reporting-services/)也可能对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T22:32:30.610

我为我的组织创建了另一个可能有用的查询。它的输出：

```
Epic1
  -Feature1
     -User Story1
       -Task1
       -Task2
       -Task3
     -User Story2
       -Task1
       -Task2
   -Feature2
     -User Story1
       -Task1
       -Task2
       -Task3
     -User Story2
       -Task1
       -Task2

Epic2
  -Feature1
     -User Story1
       -Task1
       -Task2
       -Task3
     -User Story2
       -Task1
       -Task2
   -Feature2
     -User Story1
       -Task1
       -Task2
       -Task3
     -User Story2
       -Task1
       -Task2 
```

我们使用以下查询在 TFS 2015 中生成分层工作项：

```
;WITH    cte
          AS ( SELECT   DimTeamProject.ProjectNodeName ,
                        dimworkitem.System_WorkItemType ,
                        DimWorkItem.System_Id ,
                        FactWorkItemLinkHistory.TargetWorkItemID ,
                        DimWorkItem.System_Title,
                        DimWorkItem.System_State,
                        DimWorkItem.Microsoft_VSTS_Common_ActivatedDate,
                        DimWorkItem.Microsoft_VSTS_Scheduling_TargetDate,
                        DimWorkItem.System_CreatedDate,
                        DimWorkItemLinkType.LinkName,
                        TeamProjectSK,
                        dimworkitem.System_rev,
                           CurrentWorkItemView.Microsoft_VSTS_Scheduling_RemainingWork,
                           CurrentWorkItemView.Microsoft_VSTS_Scheduling_OriginalEstimate,
                           CurrentWorkItemView.Microsoft_VSTS_Scheduling_CompletedWork,
                           CurrentWorkItemView.Microsoft_VSTS_Scheduling_StoryPoints,
                           CurrentWorkItemView.AZDES_SprintPoints,
                           CurrentWorkItemView.System_AssignedTo,

                        Row_Number() over(Partition by dimworkitem.system_id,TeamProjectSK, FactWorkItemLinkHistory.TargetWorkItemID Order by dimworkitem.system_rev DESC ) rownum
               FROM     DimWorkItem ,
                        DimTeamProject ,
                        FactWorkItemLinkHistory,
                        DimWorkItemLinkType,
                        CurrentWorkItemView
               WHERE    DimWorkItem.TeamProjectSK = DimTeamProject.ProjectNodeSK 
                        AND DimWorkItem.System_Id = FactWorkItemLinkHistory.SourceWorkItemID
                        and DimWorkItemLinkType.WorkItemLinkTypeSK = FactWorkItemLinkHistory.WorkItemLinkTypeSK
                        AND CurrentWorkItemView.System_Id=DimWorkItem.System_Id
                        and CurrentWorkItemView.ProjectNodeSK=DimWorkItem.TeamProjectSK
                        /*    -To Test the Query using the project Name of our choice-    */
                        --AND DimTeamProject.ProjectNodeName ='Test Project Name Here'

                        AND DimWorkItem.System_State in ('ACTIVE','NEW')
                        /* -System Revisions are created when the entry is modified. Onlt the latest entry will have the below revised date-  */
                        AND dimworkitem.System_RevisedDate = '9999-01-01 00:00:00.000'
                        AND DimWorkItemLinkType.Linkname IN ( 'Parent',
                                                     'child' )
               GROUP BY DimTeamProject.ProjectNodeName ,
                        DimWorkItem.System_Id ,
                        FactWorkItemLinkHistory.TargetWorkItemID ,
                        DimWorkItem.System_Title ,
                        dimworkitem.System_WorkItemType,
                        DimWorkItem.System_State,
                        TeamProjectSK,
                        DimWorkItemLinkType.LINKName,
                        DimWorkItem.Microsoft_VSTS_Common_ActivatedDate,
                        DimWorkItem.Microsoft_VSTS_Scheduling_TargetDate,
                        DimWorkItem.System_CreatedDate,
                        dimworkitem.system_rev,
                           CurrentWorkItemView.Microsoft_VSTS_Scheduling_RemainingWork,
                           CurrentWorkItemView.Microsoft_VSTS_Scheduling_OriginalEstimate,
                           CurrentWorkItemView.Microsoft_VSTS_Scheduling_CompletedWork,
                           CurrentWorkItemView.Microsoft_VSTS_Scheduling_StoryPoints,
                           CurrentWorkItemView.AZDES_SprintPoints,
                           CurrentWorkItemView.System_AssignedTo
             )
    SELECT distinct t1.ProjectNodeName ,
                    t1.TeamProjectSK,
                    t1.System_Id requirement_Id ,
                    t1.System_WorkItemType,
                    t1.System_State,
                    t1.System_Title requirement_title ,
                    t2.System_Id Change_request_id ,
                    t1.LinkName,
                    t2.System_WorkItemType Change_Request_Type,
                    t2.TeamProjectSK,
                    t2.System_State change_request_system_state,
                    t2.System_Title Change_Request_Title,
                    t1.Microsoft_VSTS_Scheduling_OriginalEstimate,
                    t1.Microsoft_VSTS_Scheduling_RemainingWork,
                    t2.Microsoft_VSTS_Scheduling_CompletedWork,
                    t1.Microsoft_VSTS_Scheduling_StoryPoints,
                    t1.AZDES_SprintPoints,
                    t1.System_AssignedTo,

            t1.Microsoft_VSTS_Common_ActivatedDate,
            t1.System_CreatedDate,
            t1.Microsoft_VSTS_Scheduling_TargetDate,
            T1.rownum
    FROM    cte t1
            INNER JOIN cte t2 ON t1.TargetWorkItemID = t2.System_Id
                                  and t1.rownum = 1
                                  and t1.TeamProjectSK=t2.TeamProjectSK
                                  --and t1.System_Id=Test System id here
                                  --and t1.TeamProjectSK=Test Team Project SK here
                                --and  t1.projectnodename='Test Project Name Here'

    ORDER BY t1.System_Id; 
```

# android - 挂载 Android 模拟器镜像

> ID：11648748
> 
> 赞同：14
> 
> 时间：2012-07-25T11:31:17.957
> 
> 标签：android, image, emulation, mount

我正在尝试在具有 Android 2.1 的模拟器上分析 Android 恶意软件。我想在执行可疑应用程序后分析文件权限和指纹。我知道，我可以使用`adb shell`来获取这些信息，但我认为在执行例如 rootkit 之后我不能信任这些信息。

我认为防止rootkits隐藏的唯一方法是直接安装图像还是？我有以下文件：

```
ramdisk.img  snapshots.img  userdata-qemu.img  cache.img  system.img  userdata.img  zImage 
```

如何在 Ubuntu 上安装/提取它们（读取权限就足够了）？

使用 unyaffs 我可以提取`system.img`和`userdata.img`文件。simg2img 为所有文件返回“bad magic”。

谢谢亚历克斯

编辑：`userdata-qemu.img`作品 unyaffs2

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-05T13:44:42.917

你已经回答了你自己的问题，但我会扩大一点。Android sdk 自带系统镜像，例如：

```
$ cd android-sdk-linux/system-images/android-15/armeabi-v7a/
$ ls *.img
ramdisk.img  system.img  userdata.img

$ cd ~/.android/avd/<img name>.avd/
$ ls *.img
cache.img  sdcard.img  userdata.img  userdata-qemu.img 
```

但是，并非所有图像都属于同一类型：

```
$ file *.img
cache.img:         VMS Alpha executable
sdcard.img:        x86 boot sector, code offset 0x5a, OEM-ID "MSWIN4.1", sectors/cluster 4, Media descriptor 0xf8, sectors 2048000 (volumes > 32 MB) , FAT (32 bit), sectors/FAT 3993, reserved3 0x800000, serial number 0x17de3f04, label: "     SDCARD"
userdata.img:      VMS Alpha executable
userdata-qemu.img: VMS Alpha executable 
```

由于`sdcard.img`不包含额外的分区，因此可以直接挂载，无需偏移参数（如`-o loop,offset=32256`）：

```
$ fdisk -l sdcard.img
You must set cylinders.
You can do this from the extra functions menu.

Disk sdcard.img: 0 MB, 0 bytes
255 heads, 63 sectors/track, 0 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x00000000

     Device Boot      Start         End      Blocks   Id  System

$ sudo mount -o loop sdcard.img /mnt/ 
```

被描述为的其他图像文件`VMS Alpha executable`实际上是[yaffs2](http://en.wikipedia.org/wiki/YAFFS)文件。据我所知，它们不能直接安装，但可以使用两个实用程序[unyaffs](http://code.google.com/p/unyaffs/)或[unyaffs2 提取](http://code.google.com/p/yaffs2utils/)。

```
$ mkdir extract
$ cd extract
$ unyaffs ../userdata.img 
```

或者

```
$ unyaffs2 --yaffs-ecclayout ../userdata.img . 
```

`simg2img`请注意，在 android 源代码树中可以找到另一个实用程序，`./android_src/system/extras/ext4_utils/`它用于压缩 ext4 img 文件。但是，如果错误地应用于`yaffs2`图像，它会抱怨`Bad magic`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-10T16:09:33.547

如果有人最终在这里寻找有关使用的更多信息`simg2img`：

这是我需要挂载的文件：

```
$ file factoryfs.img 
factoryfs.img: data
$ unyaffs factoryfs.img 
Can't determine flash layout, perhaps not a yaffs2 image 
```

这就是我能够安装它的方式：

1.  安装 simg2img

    *   在较新版本的 Ubuntu 上，它以软件包的形式提供

        ```
        sudo apt install simg2img 
        ```

    *   在旧版本的 Ubuntu 上，您需要从源代码编译它

        1.  安装先决条件

            ```
            sudo apt install build-essential git zlib1g-dev 
            ```

        2.  下载并编译源码

            ```
            git clone https://android.googlesource.com/platform/system/core
            cd core/libsparse
            gcc -o simg2img -Iinclude simg2img.c sparse_crc32.c backed_block.c output_file.c sparse.c sparse_err.c sparse_read.c -lz 
            ```

2.  将稀疏图像文件解压缩为原始图像文件：

    ```
    simg2img /path/to/factoryfs.img /path/to/factoryfs.raw.img 
    ```

3.  挂载原始图像文件。在 Ubuntu 中，最简单的方法是在 Files 应用程序中右键单击文件 →**打开**方式→ **Disk Image Mounter**。或者使用命令行：

    ```
    sudo mkdir /mnt/factoryfs
    sudo mount /path/to/factoryfs.raw.img /mnt/factoryfs 
    ```

**注意：**这不适用于 boot.img，这是一种特殊情况： [如何提取 boot.img？](https://unix.stackexchange.com/a/65316/14436)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-21T15:06:24.640

我想在 Windows 上解压缩一个非稀疏 ext4 图像文件。simg2img 用于稀疏 ext4。Ext4 在定义上并不是稀疏的，这只是它的一个选项，但无论出于何种原因，对这个过程的每一个描述都是从这个假设开始的。无论如何，在我浪费了大量时间试图解决这个问题之后，DiskTool 以零努力为我做到了这一点。它也不会安装任何无关垃圾，并且在 Windows 10 上运行良好：

[http://sourceforge.net/projects/androidicsjbext/](http://sourceforge.net/projects/androidicsjbext/)

# jquery - goMap 清理和重置

> ID：11648749
> 
> 赞同：1
> 
> 时间：2012-07-25T11:31:21.207
> 
> 标签：jquery, google-maps, reset

我可以清理和/或完全重置 goMap 吗？我想删除用`$.goMap.createMarker`and创建的点`$.goMap.createPolyline`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:40:10.637

解决方案是：

**删除 DIV 数据**

```
$("#Map_Temp").removeData(); 
```

**并再次创建地图...**

```
$("#Map_Temp").goMap({
    latitude: XOXOXOX,
    longitude: XOXOXOX,
    zoom: 16,
    maptype: 'ROADMAP'
}); 
```

# file - unix 将尾部重定向到文件

> ID：11648752
> 
> 赞同：6
> 
> 时间：2012-07-25T11:31:46.273
> 
> 标签：file, unix, redirect, tail

我将来自 nc 输出的数据 24/7 小时存储在文件中。它是温度数据记录器。这个文件`amroutput`会随着时间变得非常大。（每 10 秒一行）。对于一个应用程序，我将在文件中包含最后一个条目`amr_last_output`。所以我使用：

```
 tail -f -n1 amroutput > amr_lastoutput. 
```

每次 tal 输出时，我`>`都会覆盖文件。`amr_lastoutput`在 mac osx 上，我们将 tail 的输出附加到输出文件中，就像在`>>`命令中一样。我能做些什么？

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:15:56.663

tail 的重定向“>”仅覆盖输出文件一次。我将 while 循环与 sleep 一起使用并定期运行 tail 命令。

谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:46:36.267

我正在等待您对我之前的评论的确认。但与此同时，我将假设是肯定的，并给你一个建议的解决方案。

放置一个！在 > 或 >> 重定向的末尾将关闭默认的“noclobber”开关，以防止覆盖现有文件：

```
tail -f -n1 amroutput >! amr_lastoutput 
```

如果这对您不起作用，请告诉我，我们可以尝试其他方法。

# c - OpenGL 无法使用 Visual C++ 编译器渲染场景

> ID：11648753
> 
> 赞同：1
> 
> 时间：2012-07-25T11:31:51.413
> 
> 标签：c, visual-c++, opengl

我正在尝试在 Visual C++ 中使用 OpenGL 构建六边形模型。我不知何故未能检索到正确的输出。

```
#include <windows.h>
#include <glut.h>
#include <math.h>

float x, inc = 3.14/6, pi = 3.14;

void RenderScene()
{   
    glColor3f(1,1,0);
    for ( x=0.0; x<2*pi; x=x+inc )
    {
        glBegin(GL_LINE_STRIP);
            glVertex2f(cos(x),sin(x));
        glEnd();
    }
}

void myDisplay(void)
{
    glEnable(GL_CULL_FACE);
    glEnable(GL_DEPTH_TEST);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glPushMatrix();
        RenderScene();
    glPopMatrix();
    glFlush();
}

void SetupRC(void)
{
    glClearColor(0.0, 0.0, 1.0, 1.0);
    glOrtho(-5.0,5.0,-5.0,5.0,-5.0,5.0);
}

void main(void)
{
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(640,480);
    glutInitWindowPosition(10,15);
    glutCreateWindow("Rofans Manao");
    glutDisplayFunc(myDisplay);
    SetupRC();
    glutMainLoop();
} 
```

以上是我的代码。我的代码以前可以工作。我相信我犯了一些看不见的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T11:39:50.040

您`RenderScene()`现在有以下循环：

```
for ( x=0.0; x<2*pi; x=x+inc )
{
    glBegin(GL_LINE_STRIP);
        glVertex2f(cos(x),sin(x));
    glEnd();
} 
```

我想你打算这样

```
glBegin(GL_LINE_STRIP);
for ( x=0.0; x<2*pi; x=x+inc )
{
    glVertex2f(cos(x),sin(x));
}
glEnd(); 
```

相反，为了出现某种形式的线带。

# php - Paypal SetExpressCheckout 返回令牌，然后在重定向时显示“此交易无效...”

> ID：11648754
> 
> 赞同：0
> 
> 时间：2012-07-25T11:31:56.400
> 
> 标签：php, curl, paypal

```
class ExpressCheckout {

static function PPHttpPost($methodName_, $nvpStr_) {
    require_once("DataClass.php");
    $API_Data = Data::GetPayPalData();

    // Set up your API credentials, PayPal end point, and API version.
    $environment = $API_Data['enviro'];
    $API_UserName = urlencode($API_Data['user']);
    $API_Password = urlencode($API_Data['pass']);
    $API_Signature = urlencode($API_Data['sig']);
    $API_Endpoint = "https://api-3t.paypal.com/nvp";
    if("sandbox" === $environment || "beta-sandbox" === $environment) {
        $API_Endpoint = "https://api-3t.$environment.paypal.com/nvp";
    }
    $version = urlencode('72.0');

    // Set the curl parameters.
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $API_Endpoint);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);

    // Turn off the server and peer verification (TrustManager Concept).
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);

    // Set the API operation, version, and API signature in the request.
    $nvpreq = "METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature$nvpStr_";

    // Set the request as a POST FIELD for curl.
    curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

    // Get response from the server.
    $httpResponse = curl_exec($ch);

    if(!$httpResponse) {
        exit("$methodName_ failed: ".curl_error($ch).'('.curl_errno($ch).')');
    }

    // Extract the response details.
    $httpResponseAr = explode("&", $httpResponse);

    $httpParsedResponseAr = array();
    foreach ($httpResponseAr as $i => $value) {
        $tmpAr = explode("=", $value);
        if(sizeof($tmpAr) > 1) {
            $httpParsedResponseAr[$tmpAr[0]] = $tmpAr[1];
        }
    }

    if((0 == sizeof($httpParsedResponseAr)) || !array_key_exists('ACK', $httpParsedResponseAr)) {
        exit("Invalid HTTP Response for POST request($nvpreq) to $API_Endpoint.");
    }

    return $httpParsedResponseAr;
}

static function send() {

require_once("DataClass.php");
$API_Data = Data::GetPayPalData();
// Set request-specific fields.
$paymentAmount = urlencode($API_Data['pay']);
$currencyID = urlencode($API_Data['currency']);         // or other currency code ('USD', 'EUR', 'JPY', 'CAD', 'AUD')
$paymentType = urlencode($API_Data['type']);            // or 'Sale' or 'Order'

$returnURL = urlencode($API_Data['return']);
$cancelURL = urlencode($API_Data['cancel']);
$bad = urlencode("MESS subscription");

// Add request-specific fields to the request string.
$nvpStr = "&CANCELURL=$cancelURL&REQCONFIRMSHIPPING=0&NOSHIPPING=1&PAYMENTREQUEST_0_AMT=$paymentAmount&PAYMENTREQUEST_0_ITEMAMT=$paymentAmount&PAYMENTREQUEST_0_TAXAMT=0&RETURNURL=$returnURL&L_BILLINGTYPE0=RecurringPayments&PAYMENTREQUEST_0_DESC=$bad&L_BILLINGAGREEMENTDESCRIPTION0=$bad&PAYMENTREQUEST_0_PAYMENTACTION=$paymentType&PAYMENTREQUEST_0_CURRENCYCODE=$currencyID";

// Execute the API operation; see the PPHttpPost function above.
$httpParsedResponseAr = ExpressCheckout::PPHttpPost('SetExpressCheckout', $nvpStr);

if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) {
    // Redirect to paypal.com.
    $token = urldecode($httpParsedResponseAr["TOKEN"]);
    $payPalURL = "https://www.paypal.com/webscr&cmd=_express-checkout&token=$token";
    if("sandbox" === $environment || "beta-sandbox" === $environment) {
        $payPalURL = "https://www.$environment.paypal.com/webscr&cmd=_express-checkout&token=$token";
    }
    //header("Location: $payPalURL"); //commented out to view token and parsed response
    return array($token, $httpParsedResponseAr);
} else  {
    return 'SetExpressCheckout failed: ' . print_r($httpParsedResponseAr, true);
}
}

} 
```

我上面的代码可以正常检索令牌（响应为 ACK = 'SUCCESS'），但是当我使用令牌重定向到贝宝时，我收到以下错误：

> 此交易无效。请返回收款人的网站以使用他们的常规结账流程完成您的交易。

我已经尝试了几种方法，在网上搜索，现在3天仍然没有运气。谁能看到我哪里出错了？提前致谢。

哦，这被称为：`var_dump($token = ExpressCheckout::send($_SESSION['email']));` `var dump()`用于在`header("Location: $payPalURL");`注释掉时查看令牌和响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:43:45.383

我试图将示例代码包装到一个类中，并提出了完全相同的问题。事实证明，令牌没有被写入重定向。

尝试使用 var_dump 获取令牌，然后在浏览器的地址栏中手动输入 url 和参数。

另一个想法：看起来 $environment 是在 PPHttpPost() 函数中初始化的，但不是在 send() 函数中初始化的。如果您使用的是沙盒环境，这可能就是问题所在。

# css - 字体系列：继承不适用于 IE

> ID：11648763
> 
> 赞同：0
> 
> 时间：2012-07-25T11:32:34.050
> 
> 标签：css, internet-explorer

我有 css 类并且我使用了一个属性：

```
font-family: inherit; 
```

但它不适用于 IE。它适用于 Mozilla。谁能建议我一个解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:45:35.087

字体家族：继承；支持>= IE 8

> **注意：** IE7 及更早版本不支持值“inherit”。IE8 需要一个!DOCTYPE。IE9 支持“继承”。（来自 w3school）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:44:52.920

IE7及之前不支持`:inherit`，还是说8+_

# jquery - 如何在使用 :not() 选择器单击超链接时执行操作

> ID：11648764
> 
> 赞同：0
> 
> 时间：2012-07-25T11:32:34.867
> 
> 标签：jquery, javascript-events

我希望链接上的所有点击都执行某个操作，但`mailto`链接除外。我有以下代码按预期工作。它首先将该函数附加到所有链接，然后将其从`mailto`链接中删除：

```
<a href="http://www.example.com">example.com</a>
<a href="mailto:someone@www.example.com">Someone</a>

<script type="text/javascript">
    $('a').on('click', function () {
        theAction();
    });
    $('a[href^="mailto"]').off('click');
</script> 
```

我想要相同的功能，但使用`:not()`选择器，因为它看起来更优雅。会怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T11:34:10.330

很简单：

```
$('a:not([href^="mailto"])').on(...); 
```

或者

```
$('a').not('[href^="mailto"]').on(...); 
```

看看文档：

*   [http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)
*   [http://api.jquery.com/not/](http://api.jquery.com/not/)

* * *

但是，如果您的页面上有很多链接，那么您绝对应该使用*事件委托*，正如 Utkanos 在[他的回答](https://stackoverflow.com/a/11648817/218196)中所建议的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T11:35:30.243

与其将事件附加到每个链接，不如委派它。这也使得过滤哪些触发和不触发它变得非常容易。

```
$('body').on('click', 'a:not([href^=mailto])', function(evt) {... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:34:55.293

```
$('a').not('a[href^="mailto"]').on('click', function () {
        theAction();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T11:35:26.013

Felix 解决方案很好，否则如果其他链接都是绝对以`http/https`协议开头的，请尝试简单地使用

```
$('a[href^="http"]').on('click', function () {
    theAction();
}); 
```

# java - EJB 3 存根生成

> ID：11648766
> 
> 赞同：6
> 
> 时间：2012-07-25T11:32:45.960
> 
> 标签：java, ejb

我有一个兼容 ejb-3 的 ejb，比如说

```
@Remote
interface Hai{
     String sayHai();
}
Stateless(name = "xxx", mappedname="yyy")
public class HaiImpl implements Hai{
    public String sayHai(){
        return "Hai";
    }
} 
```

我需要为这个 EJB 生成存根。但我不想使用 websphere 工具或 maven 工具。有没有办法使用jdk生成存根？

创建远程客户端时

```
 Hai hai = (Hai)ctx.lookup("yyy#com.zz.Hai");
 System.out.println(hai.sayHai()); 
```

可以在 weblogic 或 jboss 中工作，但是在 websphere 中，即使是 ejb 3 你也需要这样写

```
Object o = ctx.lookup("yyy");
Hai hai =    (Hai)javax.rmi.PortableRemoteObject.narrow(o,Hai.class);
System.out.println(hai.sayHai()); 
```

在这种情况下，如果存根不存在于客户端，它将引发异常，有一种方法可以使用 websphere ejb 存根生成器工具生成存根。但我不想使用任何平台特定的工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:27:44.700

不，您必须使用 WAS_HOME/bin/createEJBStubs。Java SDK 中包含的 rmic 命令（通常用于生成存根）不能用于未扩展 java.rmi.Remote 的“纯”EJB 3 远程接口。

请注意，如果您使用应用程序客户端容器 (WAS_HOME/bin/launchClient) 或您的“客户端”是另一台服务器，那么您不需要生成存根：容器将为您生成一个。如果您使用的是非托管瘦客户端，则只需要使用 createEJBStubs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T17:06:32.740

我为 createEJBStub 脚本创建了一个[maven-plugin 包装器。](https://github.com/lsiu/websphere-maven-plugin)

**为什么？**

这使我们能够构建测试 maven 项目，这些项目作为 CI 设置的一部分在部署后针对我们的应用程序运行。

更具体地说，与 maven 一起，这使我们的测试项目能够：

1.  利用 Maven 依赖管理将我们发布的 API jar 提取到我们的内部 nexus 存储库
2.  创建存根类作为“生成源”maven 生命周期的一部分
3.  使用 EJB 针对应用程序服务器运行 junit 测试用例以进行集成测试。

# seo - 让页面在谷歌上显示得更好

> ID：11648768
> 
> 赞同：-1
> 
> 时间：2012-07-25T11:32:50.960
> 
> 标签：seo, metadata, search-engine, meta-tags

嘿，我有一个网站已经运行了一段时间，但它没有元数据集。我添加了一些元数据，如语言、描述、关键字和标题。

我想知道的是，谷歌什么时候会更改其对该网站的记录并开始更好地对页面进行排名？

有谁知道任何有用的指南或类似的东西来解释这一点？任何其他搜索引擎优化技巧也将受到欢迎。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:03:46.987

这是一些谷歌搜索引擎优化指南...

[网站管理员 seo 指南](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35769) [网站管理员工具](https://www.google.com/webmasters/tools/home?hl=en) [Googlewebmastercentral](http://googlewebmastercentral.blogspot.fr/) [Google SEO 指南](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35291)

# .net - MVC 插件架构和实体框架

> ID：11648769
> 
> 赞同：1
> 
> 时间：2012-07-25T11:32:51.343
> 
> 标签：.net, asp.net-mvc, entity-framework, plugins

我正在构建一个应用程序如下；

数据库中只有一个表，域作为基本实体（Ipage），当公众查看时，它代表一个 html 页面。继承它是一个实体 (IPageBuilder)，它包含构建页面、管理视图所需的信息。这个概念是在管理端预渲染页面并将所有内容存储在一个表中。下面是这两个实体的接口类：

```
public interface IPage
{
    string BodyPreRender { get; set; }
    string ExcerptPreRender { get; set; }
    int ID { get; set; }
    bool IsPublished { get; set; }
    string Key { get; set; }
    string MetaTagsPreRender { get; set; }
    int Order { get; set; }
    string PageKey { get; set; }
}

public interface IPageBuild : IPage
{
    string Author { get; set; }
    string CreatedBy { get; set; }
    DateTime CreatedOn { get; set; }
    string Description { get; set; }
    string EditListItemPreRender { get; set; }
    string Html { get; set; }
    string Keywords { get; set; }
    string Language { get; set; }
    string MetaDescription { get; set; }
    DateTime? ReleasedOn { get; set; }
    string Title { get; set; }
    int Version { get; set; }
} 
```

我创建了一个插件管理器，它将发现一个包含插件描述符接口的 dll 并创建一个插件列表以供在应用程序中使用。这是插件描述符接口：

```
internal interface IPluginDescriptor
{
    Assembly Assembly { get; }
    string Author { get; }
    string AuthorUrl { get; }
    Type DomainType { get; }
    PlugInFactories Factories { get; }
    void Install();
    string Key { get; }
    string MenuName { get; }
    string Name { get; }
    string PageKey { get; }
    PluginRoute Route { get; }
    string SupportUrl { get; }
    void Uninstall();
    Version Version { get; }
} 
```

我想做的是在插件中创建一个域对象，它基于基本页面构建器类，从而允许插件创建和存储它想要的任何网页，例如：

```
public class Foo : IPageBuild
{
    public string FooInfo { get; set; }
} 
```

在应用程序启动中，我想在我的插件描述符中运行一个方法，调用它 install()，它将检查数据表并查看它是否有 FooInfo 列。那么完成这项任务的最佳方法是什么？提前致谢。

此外，我已将表中的列设置为：

*   Page_BodyPreRender,
*   Page_ExcerptPreRender,
*   ETC。，
*   Foo_FooInfo

我在用

*   .Net 框架 4.0
*   实体框架 4.3.1.0
*   System.Data.SqlServerCe.Entity4.0.0.0
*   System.Web.Mvc 3.0.0.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:55:42.833

自从我问这个问题以来已经过去了一段时间，所以我想我会尝试自己回答这个问题。基本上我转向 NHibernate 来解决这个问题。

# database - 如何在 Struts2+Hibernate 中从数据库中填充选择？

> ID：11648773
> 
> 赞同：0
> 
> 时间：2012-07-25T11:33:08.113
> 
> 标签：database, hibernate, select, struts2, auto-populate

我正在使用 Struts2+Hibernate。我在 JSP 页面中有一个**表单**，其中有一个**我需要从 Database 填充它的选择**。我已经实现了 DAO 类 BookDAO（selectBooks()、updateBook(Book book)）。我创建了 Action 类，在其中声明了 Book 的 ArrayList 和 BookDAO 类的对象。看来我需要在 Action 类中定义一个函数，该函数调用 selectBooks 并填充我的 ArrayList，但是**这个动作应该在加载我的 JSP 页面时自动调用**。在我的情况下是否需要 Ajax？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:25:06.790

JB Nizet 的回答很好，不过我建议采用稍微不同的方法。

将 ArrayList 赋值放在 execute 方法中的问题在于，它仅适用于该特定方法，如果添加了其他操作方法，则需要重新创建。

您最好将操作设为 Preparable 并添加一个 prepare 方法来执行所有数据库调用和列表分配。这样，您的所有数据都将在整个操作类中可用，而无需沿途复制代码。

将首先调用 prepare 方法，然后再调用操作中的任何其他方法。

```
public class MyAction extends ActionSupport implements Preparable{

    private ArrayList<Books> books;

    @Override
    public void prepare() throws Exception {
        this.books = bookDAO.selectBooks(); 
    }

    ...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:51:46.627

不，AJAX 不是必需的。在您的操作方法的代码中，初始化列表：

```
public String execute() {
    this.books = bookDAO.selectBooks(); 
    return SUCCESS;
} 
```

然后，JSP 页面将可以访问书籍列表。

# php - 在路由页面上如何使 Url 助手工作？

> ID：11648777
> 
> 赞同：1
> 
> 时间：2012-07-25T11:33:20.077
> 
> 标签：php, zend-framework, url-routing

我有一个路由到自定义模块的 url。我在我的 Bootstrap.php 中添加了这一行

```
$router->addRoute('forum-board', new Zend_Controller_Router_Route(
        'forum-board', array('module' => 'admin', 'controller' => 'users', 'action' => 'forumdisplay')
    )); 
```

路线运行良好！

但是，在我打电话时的论坛显示视图中：

```
<a href="<?= $this->url( array ( 'module' => 'admin', 
                'controller'=> 'users', 'action' => 'resetpass',
                'userid'=>$userid)); ?>">Reset</a> 
```

它不呈现 URL。

当我打开与以下相同的页面时：

```
http://zfProj12.local/admin/users/forumdisplay 
```

它呈现了正确的 url，但是在路由它们时，它并不像

```
http://zfProj12.local/forum-board 
```

有什么修复吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:07:58.407

当您希望`url()`视图助手根据您定义的路由进行渲染时，您可以按名称引用路由（例如，在视图脚本中）：

```
<a href="<?= $this->url(array('userid' => 'myuserid'), 'forum-board', true) ?>">Forum</a> 
```

**更新**

您对 url 帮助程序的调用表明您希望路由接受用户 ID 参数，但路由定义本身没有占位符。也许路线应该定义为：

```
$router->addRoute('forum-board', new Zend_Controller_Router_Route(
    'forum-board/:userid', array(
         'module' => 'admin', 
         'controller' => 'users', 
         'action' => 'forumdisplay',
     )
)); 
```

然后，当您使用 for 的值调用 url 帮助程序时`userid`，该值将插入到生成的 url 中。

# java - 如何将 RGB 值与其颜色名称对应？

> ID：11648778
> 
> 赞同：1
> 
> 时间：2012-07-25T11:33:21.543
> 
> 标签：java

java中是否有任何可能的方法允许程序员从RGB值中检索颜色名称。Ex : R:255, G:255, B: 0 为黄色。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:40:52.657

不，那里没有; 只有反过来。Color 类中有用于典型颜色的静态字段。

Intellij IDEA 有一个很好的功能，从某种意义上说，当您定义颜色时，实际颜色会出现在定义颜色的行的左侧（靠近行号）。单击此处可以选择颜色，R、G 和 B 的数量会根据所选颜色自动设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:41:09.593

您能做的最好的事情就是找到已经（基本上）实施了此地图的人。我不知道有人这样做过，但没有什么可以阻止你自己这样做。无法以编程方式严格确定颜色名称。

您可以执行以下操作：

```
Map<Color, String> colors = new HashMap<Color, String>();

public void populateColors() {
    colors.put(new Color(255, 000, 000), "Red");
    colors.put(new Color(000, 255, 000), "Green");
    colors.put(new Color(000, 000, 255), "Blue");
    colors.put(new Color(255, 255, 000), "Yellow");
    ...
}

public String getColorName(Color color) {
    if (!colors.containsKey(color)) {
        return "Unknown";
    }

    return colors.get(color);
} 
```

但也要注意这一点的局限性；如果您允许用户选择颜色（特别是如果您使用诸如颜色选择器之类的不精确工具而不是手动文本输入），如果他们碰巧选择`255, 254, 0`而不是`255, 255, 0`，那么他们将获得未知颜色（不是黄色，尽管事实上，它们在人眼看来是一样的）。有 256^3 = 16,777,216 种颜色。他们不可能都有名字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:43:05.137

不。考虑到仍然有无数未命名的颜色，不可能提供这种东西的可行实现。

您可以使用一些众所周知的颜色

颜色.黑色、颜色.青色等

[参考文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html)

# c# - 使用 ADO.NET 删除 DB 条目

> ID：11648779
> 
> 赞同：0
> 
> 时间：2012-07-25T11:33:22.713
> 
> 标签：c#, .net, database, entity-framework, ado.net

我有以下代码连接到我的数据库，并检查表中是否存在电子邮件地址，如果存在，它将删除它，如果不存在，它将添加它。

但是这两种选择都不起作用。两种操作都出现相同的错误：

> 无法删除该对象，因为它在 ObjectStateManager 中找不到。

编码：

```
protected OEntities database = new OEntities();

public string NewsletterSubscriptionValidation(string emailAddress)
{
    string validationMessage = "";
    Newsletter newsletter = new Newsletter();

    var identifier = database.Newsletters.Select(
        id => id.EmailAddress);

    if (identifier == null)
    {
        newsletter.EmailAddress = emailAddress;
        newsletter.Subscribed = true;

        database.Newsletters.AddObject(newsletter);
        database.SaveChanges();

        validationMessage = "You are now subscribed to our periodic Newsletter.";
    }
    else
    {
        newsletter.EmailAddress = emailAddress;
        newsletter.Subscribed = false;

        database.DeleteObject(newsletter);
        database.SaveChanges();

        validationMessage = "You have been unsubscribed from our periodic Newsletter.";
    }

    return validationMessage;
} 
```

我什至在这里以正确的方式添加/删除数据库？

# 解决方案

* * *

```
protected OEntities database = new OEntities();

public string NewsletterSubscriptionValidation(string emailAddress)
{
    string validationMessage = "";
    Newsletter newsletter = database.Newsletters.FirstOrDefault(
        nl => nl.EmailAddress == emailAddress);

    if (newsletter == null)
    {
        newsletter = new Newsletter();

        newsletter.EmailAddress = emailAddress;
        newsletter.Subscribed = true;

        database.AddToNewsletters(newsletter);
        //database.Newsletters.AddObject(newsletter);
        database.SaveChanges();

        validationMessage = "You are now subscribed to our periodic Newsletter.";
    }
    else
    {
        newsletter.EmailAddress = emailAddress;
        newsletter.Subscribed = true;

        database.AddToNewsletters(newsletter);
        //database.Newsletters.AddObject(newsletter);
        database.SaveChanges();

        validationMessage = "You have been unsubscribed from our periodi Newsletter.";
    }

    return validationMessage;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:36:07.653

您需要在删除之前附加

```
 database.Attach(newsletter); 
    database.DeleteObject(newsletter); 
    database.SaveChanges(); 
```

但您可能想选择更像这样的现有项目

```
Newsletter newsletter = database.Newsletters.FirstOrDefault(nl => nl.EmailAddress == emailAddress);
if (newsletter == null)
{
    newsletter = new Newsletter();
    ...
}
else
{
    database.Attach(newsletter); 
    database.DeleteObject(newsletter); 
    database.SaveChanges(); 
} 
```

# javascript - 在图像的边框之间切换并删除其他现有图像的边框

> ID：11648786
> 
> 赞同：0
> 
> 时间：2012-07-25T11:33:46.453
> 
> 标签：javascript, jquery

# 语境

我只想选择一个图像并删除其他现有图像的边框

现在可以像这样选择许多图像：

![在此处输入图像描述](../Images/432c852db98b3e843c066484dad6fad2.png)

我需要有关选择和取消选择单个图像的帮助。

# 我的代码

```
function clickpick(item) {

    for ( var i = 5; i < document.images.length; i++) {

        document.images[i].onclick = function() {

        if (this.style.borderWidth == '5px') {
            selectpic = '';
            $("#display-frame").find("*").css("border", "0");
        } else {
            this.style.border = '5px solid blue';
            selectpic = $(item).attr("url");
        }

    };
} 
```

图像是自动生成的

# html

```
<div class="mainpic"><img src="';path+=file.filepath+'" class="uploader-thumb-img" style="width: 108px; height: 120px; top: 0px; left: 0px; "/></div> 
```

更新：我想选择图片的 url 抱歉忘了提

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:40:54.237

# 解决方案

使用 jQuery[`.toggleClass()`](http://api.jquery.com/toggleClass/)函数。

**CSS**：

```
img { border: 0; }
img.highlight { border: 5px solid blue; } 
```

**JavaScript**：

```
var url;

$('img').click(function (e) {
    $('img.highlight').not(e.target).removeClass('highlight');
    $(this).toggleClass('highlight');
    url = $(this).attr('href');
});​ 
```

# 演示

[http://jsfiddle.net/7FAjD/2](http://jsfiddle.net/7FAjD/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:57:01.387

如果您想一次只选择一张图片，您可以尝试以下操作：

```
var $images = $('img');

$images.click(function () {
    $images.removeClass('highlight');
    $(this).addClass('highlight');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:47:39.533

或者你可以试试这样的：

```
<img src="http://www.placehold.it/200x200&text=5" onclick="clickpick(this)" /> 
```

JS：

```
function clickpick(item) {

        if (item.style.borderWidth == '5px') {
            item.style.border = '2px solid red';
        } else {
            item.style.border = '5px solid blue';
        }

} 
```

这是更新的[小提琴](http://jsfiddle.net/alex_ball/VchSE/2/)。

# mysql - 加入 3 个表（MySQL）

> ID：11648795
> 
> 赞同：1
> 
> 时间：2012-07-25T11:34:15.897
> 
> 标签：mysql, join, case

我想加入 3 个表（t1、t2、t3）。我需要保持 t1（项目及其属性）原样（左连接）。

表 t1 引用 t2 以便为每个 t1.item 检索更多属性。但是，在 t2 中可以有多个 t1.item 引用条目，每个条目都有单独的值，即。item1 (value1,value2), item2 (value3,value4), item1 (value5,value6) 等等。表 t2 包含对 t3 的引用 - t2 有一个名为“style”的列，其属性由需要在 t3 中查找的数字表示（即数字 1 --> property1、数字 2 --> property2 等）。对于手头的任务，我只需要参考编号为“1”的样式属性。以下代码似乎可以解决问题：

```
$result = mysql_query("SELECT * 
                       FROM 
                         t1 
                       LEFT JOIN 
                         (t2 INNER JOIN t3 ON t2.id= t3.id) 
                       ON t1.id=t2.id AND t2.type='1' 
                       ORDER BY t1.item $order "); 
```

问题是，仍然可以有两个或多个具有相同 t1 引用的项目具有相同的样式，即。item1 (value1, value2, style1), item1 (value3, value4, style1)。在这些项目中，我只想提取一项，即价值最高的一项。首先，我需要检查每个项目的值对并从中检索最高金额，然后我需要比较这两个项目的值。像这样的东西：

```
(CASE WHEN MAX(t2.column_value1) > MAX(t2.column_value2) 
      THEN t2.column_value1 
      ELSE t2.column_value2 END) 
```

我只是不知道如何让它发挥作用。任何帮助，将不胜感激。谢谢

更新：这似乎现在可以工作（不过，我仍然会感谢任何改进建议）：

```
 SELECT casinos.id, casinos.casino,
    bonus.amount, bonus.match, bonus_type_lookup.bonus_id,
    bonus_type_lookup.bonus_type 
    FROM casinos 
    LEFT JOIN 
    (bonus INNER JOIN bonus_type_lookup ON bonus.bonus_type =  bonus_type_lookup.bonus_id) ON casinos.id=bonus.id AND bonus.bonus_type='1' AND ((bonus.amount = (SELECT CASE WHEN MAX(bonus.amount) > MAX(bonus.match) OR (MAX(bonus.match) IS NULL) THEN MAX(bonus.amount) ELSE MAX(bonus.match) END FROM bonus WHERE casinos.id=bonus.id AND bonus.bonus_type='1')) OR (bonus.match = (SELECT CASE WHEN MAX(bonus.amount) > MAX(bonus.match) THEN MAX(bonus.amount) ELSE MAX(bonus.match) END FROM bonus WHERE casinos.id=bonus.id AND bonus.bonus_type='1'))) 
    GROUP BY casinos.casino 
    ORDER BY 
    CASE 
       WHEN bonus.amount > bonus.match THEN bonus.amount
       WHEN bonus.match IS NULL THEN bonus.amount
       ELSE bonus.match
    END DESC 
```

“GROUP BY Casino.casino(name)”语句似乎负责将结果限制为每个 unique_id 仅一行，以防有多个相等的值？示例：（row1 -> 赌场 A，注册，匹配：200，金额：50）；row2 -> 赌场 A，注册，匹配：50，金额：200）在这两种情况下，MAX（值）都是 200，但我只需要一个。我认为无论任何值如何，都只保留第一行。

# html - html 时事通讯中的 google webfonts

> ID：11648796
> 
> 赞同：8
> 
> 时间：2012-07-25T11:34:26.217
> 
> 标签：html, fonts, google-webfonts

我正在制作一封 html 电子邮件，我正在使用来自 google webfonts 的字体 Oswald。我使用这一行将它插入到 html 中：

```
<link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'> 
```

似乎该字体没有显示在谷歌邮件客户端上.. 有没有其他方法可以使用这种字体实现 html 邮件以便在谷歌邮件中显示它？

谢谢你，丹尼尔。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T17:50:51.727

显然它取决于客户端软件，但[这个链接](http://www.campaignmonitor.com/blog/post/3897/using-web-fonts-in-email)似乎对我有用。总之，包括这样的css：

```
<style>
    @import url(http://fonts.googleapis.com/css?family=Open+Sans);
</style> 
```

只需添加一个可靠的后备字体。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T11:57:12.317

您将无法执行此操作（在此答案时）。对不起。您可以管理的最好方法是改用图像，但在电子邮件中无法进行字体替换。

很多人不喜欢 HTML 电子邮件，而电子邮件客户端在显示 HTML 和 CSS 方面远远落后于浏览器。[电子邮件学](http://www.emailology.org/)很好地解释了这一切。我仍然使用表格来处理一些 HTML 电子邮件。这很可怕，但这就是目前的情况。

**更新**

如上所述，您现在可以将内联导入 HTML。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T12:07:51.687

如果您从逻辑上思考，它应该可以工作，但似乎邮件代理不允许这样做。可能他们在那里运行了一些过滤器。

1) 可能的解决方案是使用图像，但某些邮件代理默认不显示图像，除非您告诉他们这样做。

2) 更好的选择是使用 HTML5 和 CSS3，它们可能是用于时事通讯或任何网页的有效方式。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-25T11:43:48.867

不工作....

以 HTML 格式发送您的时事通讯。并使用链接标签来引用字体。然后使用 google 指定的名称。

->参考

```
<link href='http://fonts.googleapis.com/css?family=Henny+Penny' rel='stylesheet' type='text/css'> 
```

->使用

```
<p style="font-family: 'Henny Penny', cursive">
Your text goes here
<p> 
```

没用

# objective-c - 在 iOS 中获取错误的周数

> ID：11648800
> 
> 赞同：1
> 
> 时间：2012-07-25T11:34:37.470
> 
> 标签：objective-c, ios5, nsdate, nsdateformatter, nscalendar

我正在尝试在 iPhone 中获取周数。我正在使用这段代码

```
NSNumber* getWeek() {
    NSDate *currDate = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"w.ee"];
    NSString *dateString = [dateFormatter stringFromDate:currDate];
    NSNumberFormatter *weekNumber = [[NSNumberFormatter alloc] init];
    [weekNumber setNumberStyle:NSNumberFormatterDecimalStyle];
    NSNumber *week = [weekNumber numberFromString:dateString];
    [weekNumber release];
    return week;
 } 
```

但是，我有不同的结果，在模拟器上还可以，但是当我在 iPhone 上运行时，这让我得到了“0”IOS 5.0.1

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:01:34.820

使用字符串作为周数并不是获取此类信息的最佳方式。`NSCalendar`并且`NSDateComponents`专为这种计算而设计：

```
NSDate *currDate = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calendar components:NSWeekOfYearCalendarUnit|NSWeekdayCalendarUnit fromDate:currDate];
NSLog(@"%d %d", components.weekOfYear, components.weekday); 
```

您可以在日历调用（第 3 行）中指定组件列表，如示例注释中所示，只有指定的组件才能保证填充到`NSDateComponents`对象中。

# jquery - jQuery“属性以选择器开头”在 iFrame 中不起作用

> ID：11648801
> 
> 赞同：1
> 
> 时间：2012-07-25T11:34:38.780
> 
> 标签：jquery, iframe, selector

我有一个 iFrame。它的所有元素都已加载。无论如何，我无法通过 id/class/etc 的“部分”使用 jQuery 选择器来选择元素。

这是我的代码：

```
//Not working
$('#iFrameID').contents().find($('[id^="lodingImg"]')));

//Works 
$('[id^="lodingImg"]')) 
```

有谁知道这种类型的 jQuery 选择器是否在 iFrame 中不起作用。我最近读到 .live 也不能在 iframe 中工作。所以，我的问题是我做错了什么或者这是图书馆的限制？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:42:55.437

[`.find()`](http://api.jquery.com/find/)很乐意将选择器作为**字符串**，没有理由将该选择器包装在对 jQuery 函数的调用中。而且，事实上，可能有理由**不**这样做，因为我怀疑这就是导致您的代码无法工作的原因。

这段代码：

```
$('#iFrameID').contents().find($('[id^="lodingImg"]')); 
```

将在`$('#iFrameID').contents()`与找到的元素匹配的元素中查找`$('[id^="lodingImg"]')`- 这将在调用 Javascript 的父窗口上运行，而不是`<iframe>`元素，并且可能返回零元素。

只需调用：

```
$('#iFrameID').contents().find('[id^="lodingImg"]'); 
```

反而。

# postgresql - PostgreSQL 9.1 数组索引

> ID：11648805
> 
> 赞同：0
> 
> 时间：2012-07-25T11:34:47.447
> 
> 标签：postgresql, database-indexes

什么索引将提高表的数据库性能

```
CREATE TABLE my_table (
    word_set text[]
) 
```

对于请求`WHERE my_table.word_set @> '<some word>'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:43:56.263

> 在 my_table 上使用 GIN (word_set) 创建索引 idx_test；

检查 EXPLAIN ANALYZE 以查看是否使用了索引。当您的表几乎为空或没有足够的唯一数据时关闭 enable_seqscan。拥有索引并不意味着数据库将始终使用该索引：使用索引可能比顺序磁盘扫描慢。这一切都取决于。

# java - java.security.AccessControlException：访问被拒绝（java.io.FilePermission 文件读取）

> ID：11648806
> 
> 赞同：1
> 
> 时间：2012-07-25T11:34:51.397
> 
> 标签：java, security, applet

下面的代码提示输入文件名和位置的输入框。当我进入`file://C:/test/abc.tiff`时，我得到

```
java.security.AccessControlException: access denied (java.io.FilePermission \\c\test\abc.tiff read) 
```

代码片段

```
CMBDocument document = evt.getDocument();
    String docSaveFileName = (String) docToURL.get(document);
     System.out.println("docSaveFileName :"+docSaveFileName);
            docSaveFileName = docSaveFileName.replaceAll("servlet", "annotate");
            System.out.println("modified docSaveFileName :"+docSaveFileName);
            File tempFile = null;
            try {
                if (evt.getSaveAsNew() || document.isModified()) {
                    if (evt.getSaveAsNew()) {
                        docSaveFileName =
                            JOptionPane.showInputDialog(myGenDocViewer,
                                "Enter the name of the file to save the document:");
                    }
                    if (docSaveFileName == null) { // user cancelled
                        return;
                    }

                    currStreamingDocServices.setPreferredFormats(
                        new String[] { document.getMimeType()});

                    if (document.getCanWrite()) {
                        URL url = new URL(docSaveFileName);
                        OutputStream out = null;
                        String protocol = url.getProtocol();
                        String host = url.getHost();
                        // Use FileOutputStream if this URI is for a local file.
                        if (protocol.equals("file") 
                            && (host == null || host.length() == 0 || host.equals("localhost"))) {
                            out = new FileOutputStream(new File(url.getPath()));
                        }

                        else {
                            URLConnection urlCon = url.openConnection();
                            urlCon.setDoInput(false);
                            urlCon.setDoOutput(true);
                            urlCon.setUseCaches(false); // Enable tunneling.
                            if (urlCon instanceof HttpURLConnection) {
                                HttpURLConnection httpCon = (HttpURLConnection) urlCon;
                                httpCon.setRequestMethod("PUT");
                            }
                            urlCon.setRequestProperty("Content-type",document.getWriteMimeType());
                            out = urlCon.getOutputStream();
                        }
                        document.write(out);
                        out.close();
                        document.setModified(false);
                        document.setNew(false);
                        myGenDocViewer.setDocName(document, docSaveFileName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:21:06.413

> 我可以在不签署 jar 文件的情况下执行此操作吗？

肯定的事。插件 2 JRE 允许我们使用 JNLP API 服务从沙盒小程序访问本地文件系统。这是一个[演示。的文件服务](http://pscode.org/jws/api.html#fs)。

那个演示。是一个自由浮动的应用程序，但在一个小程序（没有源代码）中相同，请参阅[GIFanim](http://pscode.org/gifanim/#applet)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:57:20.430

您使用的是哪种应用程序中的代码？如果它是一个小程序，那么您将遇到沙盒问题：小程序无法读取或写入文件系统上的文件。

# google-maps - 中国的谷歌地图“真的被屏蔽了吗”？

> ID：11648815
> 
> 赞同：2
> 
> 时间：2012-07-25T11:35:24.127
> 
> 标签：google-maps

大家好，我在一个拥有大多数中国用户的网站上工作。问题是据报道谷歌地图对我们在中国的用户不起作用，因为它被屏蔽了。

我在网上搜寻了一个明确的答案，但似乎找不到一个，有没有人知道它是否被阻止。

当我使用中国代理时，我无法重现该问题，而且我也没有使用 https 进行通话。

//已解决的**问题**// 未被阻止，但是如果您要嵌入地图，则脚本会调用[https://maps.google](https://maps.google)被阻止，因此地图未显示。

感谢您接受的所有帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T11:39:43.490

网站**[https://en.greatfire.org/](https://en.greatfire.org/)**可用于从“中国防火墙”后面测试 URL。

与地图的连接**充其量**是不完整的，并且大部分时间都处于关闭状态。目前也下降了。

![报告-当前](../Images/bde247d46914f5c071abfa0a91d015d6.png)

[在](https://en.greatfire.org/blocked-websites)同一网站上也有一个列表。

澄清：`https://maps.google.com`被阻止，但`http://maps.google.com`不是。

![在此处输入图像描述](../Images/1b84865d587dd857436efd428fd831e6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:40:23.313

如果它现在没有被阻止，它可能在将来。为了安全起见，您现在应该避免使用谷歌地图

# asp.net-mvc - ASP.NET MVC 3/4-多视图单控制器

> ID：11648818
> 
> 赞同：0
> 
> 时间：2012-07-25T11:35:32.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在开发一个 MVC 网站，该网站有两个单独的移动和网络视图。背景工作是一样的。所以我想为两个视图使用相同的控制器。

以下是文件夹结构。

查看 -> 用于查看的文件夹。

```
 Customer -> This folder is for web

                 Index.cshtml  -> Customer listing view for web

    MobileCustomer-> This folder is for mobile 

                 Index. cshtml -> Customer listing view for mobile. 
```

现在，移动设备和 Web 的 UI 上的背景是相同的，但它们是不同的。所以我想为此使用相同的客户控制器。所以在asp.net mvc项目的Controller文件夹中。我有客户控制器，我想使用它。

但我希望每个手机的 URL 都不同。

localhost/customer/ -> 这将为客户加载正常视图

localhost/mobile/customer -> 这将为客户加载移动视图

如何使用 asp.net mvc 3 或 4 应用程序实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:38:26.897

ScottHa 在博客中介绍了一种[自定义视图引擎](http://www.hanselman.com/blog/NuGetPackageOfTheWeek10NewMobileViewEnginesForASPNETMVC3SpeccompatibleWithASPNETMVC4.aspx)，您可以使用该引擎将移动视图与桌面客户端视图分开，并基于用户代理为两者提供服务。NuGet 与 ASP.NET MVC 4 中的内置功能规范兼容，因此迁移对您来说会更容易。因此，如果您使用的是 ASP.NET MVC 3，请继续下载`MobileViewEngines`NuGet 并开始使用它。如果您使用的是 ASp.NET MVC4，那么它已经为您内置了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:42:47.420

跟进达林的回应。ASP.NET MVC4 内置了一个基于 MobileViewEngines 的“视图切换器”。

遗漏的一个重要细节是这些视图切换器首先检查是否存在 cookie 或其他变量，例如子域（视图首选项），然后再根据用户代理做出决定。这样，移动设备上的某人可以切换到桌面视图，反之亦然。

视图切换器与 ViewEngine 挂钩，因此当您有一个带有 Index 操作的客户控制器时，您可以设置规则，以便为移动设备呈现 Index.mobile.cshtml 视图。您可以通过使用专用视图的设置来创建自定义后缀。Index.iphone.cshtml 呈现移动设备特定的视图。

因此，本质上，使用 MVC4 中存在的新机制，您的控制器及其操作将正常运行，而视图引擎将呈现不同的视图。如果您想在您的场景中执行类似的操作，我建议您将 MobileCustomer 控制器拆分为一个区域 -> Mobile(Area)->CustomerController-> 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:52:05.710

我一直在浏览源代码，`ASP.NET MVC 4`发现一些有趣的东西可能会对你有所帮助。**这只是我的想法，我没有测试过！**

我们必须从内置功能中定制一些东西。

1.  从单独的文件夹中查找移动视图。

2.  只有当 url 包含*mobile*时，才必须呈现移动版本。

我们必须扩展`DefaultDisplayMode`该类以从我们的自定义文件夹中选择移动视图。`DefaultDisplayMode`正在`System.Web.WebPages`组装中。该`TransformPath`方法的基本实现将`virtualPath`from转换`/Views/Home/Index.cshtml`为`/Views/Home/Index.Mobile.cshtml`。

我们必须重写`TransformPath`将更改传递`virtualPath`的 ex 的方法。从`/Views/Home/Index.cshtml`到`/Views/MobileHome/Index.cshtml`.

```
public class CustomDisplayMode: DefaultDisplayMode
{
    // ...

    protected override string TransformPath(string virtualPath, string suffix)
    {
       if (String.IsNullOrEmpty(suffix))
       {
           return virtualPath;
       }

       // TO DO: modify the virtual path 
       // for ex. from /Views/Home/Index.cshtml to /Views/MobileHome/Index.cshtml

       return virtualPath;
    }
} 
```

我们必须从_Start设置我们的`CustomDisplayMode`to 。我们可以设置这样的，以考虑 url。`DisplayModeProvider``Application``ContextCondition`

```
DisplayModeProvider.Instance.Modes.Insert(0, new CustomDefaultDisplayMode("Mobile")
{
    ContextCondition = (context => context.GetOverriddenBrowser().IsMobileDevice 
                         && check context.Request.Url contains the Mobile segment)
}); 
```

# python - 如何确定文件是否在Python中是远程的

> ID：11648822
> 
> 赞同：7
> 
> 时间：2012-07-25T11:35:53.830
> 
> 标签：python

我想确定文件是否位于本地硬盘驱动器或 OSX 中从网络安装的驱动器上。因此，我希望生成类似于以下内容的代码：

```
file_name = '/Somewhere/foo.bar'
if is_local_file(file_name):
    do_local_thing()
else:
    do_remote_thing() 
```

我无法找到与`is_local_file()`上述示例类似的任何东西。理想情况下，如果有一个现有功能，我想使用现有功能，但如果没有，我怎么能自己实现它？我想出的最好的是以下，但这将安装的 dmgs 视为它们是远程的，这不是我想要的。我也怀疑我可能正在重新发明轮子！

```
def is_local_file(path):
    path = path.split('/')[1:]
    for index in range(1,len(path)+1):
        if os.path.ismount('/' + '/'.join(path[:index])):
            return False
    return True 
```

我有两个生成校验和的函数，其中一个使用多进程，这会产生开销，但如果网络连接速度较慢，则对于大文件来说更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:38:53.113

“我有两个生成校验和的函数，其中一个使用多进程，开始时会产生开销，但如果网络连接速度较慢，则对于大文件来说更快。”

那么你真正想要`is_local_file()`告诉你的只是“文件访问会比我想要的慢吗？”的代理措施。作为一种代理措施，由于上述所有令人困惑的原因（本地但虚拟化的磁盘、远程但速度极快的 NAS 等），它对于您真正想知道的内容的指示相对较差。

由于您要问一个几乎不可能以编程方式回答的问题，因此最好提供一个选项，就像明确表示“并行化此运行”的`-jobs`选项一样。`make`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:16:45.613

您可以使用现有代码（或尝试[如何找到文件所在的挂载点？](https://stackoverflow.com/questions/4453602/how-to-find-the-mountpoint-a-file-resides-on)）来查找文件的挂载点；然后读取`/proc/mounts`以查找设备和文件系统；`/proc/mounts`有格式

```
device mountpoint filesystem options... 
```

您可以使用该`filesystem`字段自动排除已知的网络文件系统，例如 afs、cifs、nfs、smbfs。否则，您可以查看设备；作为一个基本的启发式方法，如果设备是设备节点（`stat.S_ISBLK`）或者`none`文件系统可能是本地的；如果它是 URI 样式 ( `host:/path`)，那么它可能是远程的；如果它是实际文件，则文件系统是磁盘映像，您需要递归。

# android - Android 自定义 Listview 包含带有标题图像的不同子列表

> ID：11648823
> 
> 赞同：0
> 
> 时间：2012-07-25T11:35:59.820
> 
> 标签：android, android-listview

我想显示一个自定义列表视图，其中包含带有标题图像的不同列表（例如按字母顺序分组的联系人）。类似于此链接中显示的列表：[https](https://code.google.com/p/android-amazing-listview/) ://code.google.com/p/android-amazing-listview/ 而且，我想在运行时将项目添加到列表视图中。此外，想要相应地过滤列表视图。有什么建议么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:34:23.067

我使用我在问题中提到的相同链接完成了它:)
[https://code.google.com/p/android-amazing-listview/](https://code.google.com/p/android-amazing-listview/)

# spring - 用spring创建一个中央数据库服务

> ID：11648825
> 
> 赞同：0
> 
> 时间：2012-07-25T11:36:07.993
> 
> 标签：spring

如果我有一个 JAR 文件项目，其中包含多个数据库连接和几十个使用 Spring 3.1 配置的服务类，我该如何打包它并将其部署到我的 Jboss 7.1 服务器，以便我系统中的其他 35 个项目可以拥有客户端类作为接口的依赖项，然后自动装配服务？

这里的目标是做一些类似于 EJB3 的事情，我有一个处理数据库访问的服务项目，然后我的其他 35 个 war 文件使用该服务而不是创建自己的单独数据库连接。

我仍在阅读 IoC 容器文档，但在我看来，一切（目前）都针对包含在一个战争/耳朵/任何文件中的所有内容。我没有那种环境。

我如何包装这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:41:35.803

`JBOSS/server/<configuration>/lib`尝试按照此处的说明添加服务类及其接线在[哪里将共享库放置在 JBoss AS 5 中？](https://stackoverflow.com/questions/2108975/where-to-put-a-shared-library-in-jboss-as-5). 它们应该只加载一次并在所有应用程序之间共享。

# jquery - jquery隐藏/显示导致mouseleave事件

> ID：11648828
> 
> 赞同：0
> 
> 时间：2012-07-25T11:36:24.007
> 
> 标签：jquery, animation, mouseevent

我在我的网站中插入了一个悬停效果，基本上“单击此链接>”将转换为具有不同颜色的“单击此链接>”。

因为我使用 cufon，所以我用两个单独的 div 执行此操作，我首先显示新的，然后隐藏旧的并运行动画。

这很好用，当鼠标从顶部、左侧和右侧进入时，但是当鼠标从底部进入时，会出现闪烁并触发 mouseleave 事件。

我的猜测是隐藏是在演出之前完成的，并且容器 div 会在短时间内变空。

任何想法如何防止鼠标离开？

我的此类链接的 php 函数是这样的：

```
function link_arrowed($label,$font_size,$margin_to_arrow,$extended_margin,$inactive_color,$active_color){

    $html = "           <div class='arrowed_link' style='min-height:".$font_size.";'>
                             <input value='".$extended_margin."' class='extended_margin' type='text' style='display:none' hidden>

                            <div class='inactive_text' style='float:left;'>
                                <div style='float:left;margin-right:".$margin_to_arrow.";font-size:".$font_size.";color:".$inactive_color.";'>".$label."</div>
                                <div class='arrow_right' style='float:left;font-size:".$font_size.";color:".$inactive_color.";'>></div>
                            </div>

                            <div class='active_text' style='float:left;display:none;'>
                                <div style='float:left;margin-right:".$margin_to_arrow.";font-size:".$font_size.";color:".$active_color.";'>".$label."</div>
                                <div class='arrow_right' style='float:left;font-size:".$font_size.";color:".$active_color.";'>></div>
                            </div>
                        </div>
        ";

    return $html;

} 
```

我的js：

```
$(document).on('mouseenter','.arrowed_link', function(){

    var extended_margin = $(this).children('.extended_margin').val();

    $(this).children('.active_text').show();
    $(this).children('.inactive_text').hide();

    $(this).children('.active_text').children('.arrow_right').animate(
        {'margin-left': extended_margin}, 
        200, function(){
    });

});

$(document).on('mouseleave','.arrowed_link', function(){

    $(this).children('.active_text').children('.arrow_right').animate(
       {'margin-left': '0px'}, 
       200,
       function(){
           $(this).parent().siblings('.inactive_text').show();
           $(this).parent().hide();  
   }); 

}); 
```

# php - 在 PHP 中使用逗号创建 JS 对象

> ID：11648829
> 
> 赞同：2
> 
> 时间：2012-07-25T11:36:37.277
> 
> 标签：php, javascript

我正在尝试从 PHP 数组创建一个 JS 对象数组，但我正在努力寻找一种在每个对象之间插入逗号的方法。

这是我要输出的内容：

```
var things = [
    {
        a: "foo",
        b: "bar"
    },  // Comma on this line
    {
        a: "moo",
        b: "car"
    }   // No comma on this line
]; 
```

这是我到目前为止所拥有的：

```
var things = [
    <?php foreach ($things as $thing): ?>
    {
        a: "<?php echo $thing->getA(); ?>",
        b: "<?php echo $thing->getB(); ?>"
    }
    <?php endforeach; ?>
]; 
```

我想我可以诉诸一些丑陋的东西，比如`if`只运行一次的语句：

```
<?php
    $i = 1;
    if ($i == 1) {
        echo '{';
        $i++;
    } else {
        echo ',{';
    }
?> 
```

有没有更清洁/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T11:38:07.983

就像是...

```
$JSONData = json_encode($YourObject); 
```

还有解码...

```
$OriginalObject = json_decode($JSONData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:38:28.510

如果你有一个 PHP 数组并且想要在 JavaScript 中可用的东西，你可以使用`json_encode()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:39:09.337

你为什么不使用[json_encode](http://php.net/manual/en/function.json-encode.php)？

```
<?php
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

echo json_encode($arr);
?> 
```

上面的例子将输出： {"a":1,"b":2,"c":3,"d":4,"e":5}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:41:43.970

将所需的结构创建为 PHP 数组，然后使用 json_encode (http://php.net/manual/en/function.json-encode.php)。

```
$plainThing = array();

foreach ($things as $thing) {
    $plainThing[] = array('a' => $thing.getA(), 'b' => $thing.getB());
}

echo json_encode($plainThing); 
```

# android - Android：将样式应用于列表并设置在 AlertDialog 中显示的选定项目

> ID：11648830
> 
> 赞同：2
> 
> 时间：2012-07-25T11:36:37.633
> 
> 标签：android, list, styles, android-alertdialog, itemselector

我在 AlertDialog 中显示一个列表。我想用某种样式自定义列表（也许是自定义的）。还希望在警报对话框列表中选择一个项目。我使用了非常简单的代码：

```
 new AlertDialog.Builder(TrainsListActivity.this).setTitle(curTrainRoute.getName() + " to " + stationNames[which])
                .setItems(timeList, new DialogInterface.OnClickListener() {         
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                    }
                })

                .show(); 
```

我尝试搜索相同的内容，但找不到相同的任何资源。你能帮帮我吗？非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:12:55.047

这是您可以通过简单的步骤将选择器设置为列表视图的代码

```
AlertDialog alert = builder.create();
                                    alert.getListView().setSelector(R.drawable.listview_selector);
                                    alert.getListView().setBackgroundColor(Color.RED);
                                    alert.getListView().invalidate();

                                alert.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:47:18.163

`setView()`警报对话框的方法很有用，您可以将`ListView`对话框设置为自定义视图。

例如。

```
CustomDialogListAdapter adapter = new CustomDialogListAdapter();
        ListView list = new ListView(this);
        list.setAdapter(adapter);
        list.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                setTitle("item : " + arg2);
            }
        });

        final Builder dialogBuilder = new Builder(this);
        dialogBuilder.setTitle("Custom List Dialog");
        dialogBuilder.setView(list);        
        dialogBuilder.create().show(); 
```

您可以为列表创建自定义适配器，如下所示

```
class CustomDialogListAdapter extends BaseAdapter {

        private String[] data = { "People Names", "Dog Names", "Cat Names", "Fish Names" };
        private ArrayList<Boolean> checkboxStatus = new ArrayList<Boolean>();

        public CustomDialogListAdapter() {
            int count = data.length;
            for (int i = 0; i < count; i++)
                checkboxStatus.add(false);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;

            if(convertView == null) {
                convertView = getLayoutInflater().inflate(R.layout.raw_dialog_item, null);
                holder = new ViewHolder();
                holder.chk = (CheckBox) convertView.findViewById(R.id.chkbox);
                holder.chk.setOnCheckedChangeListener(checkboxListener);
                holder.txt = (TextView) convertView.findViewById(R.id.txtTitle);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.chk.setTag("" + position);
            holder.chk.setChecked(checkboxStatus.get(position));
            holder.txt.setText(data[position]);

            return convertView;
        }

        class ViewHolder {
            CheckBox chk;
            TextView txt;
        }

        private OnCheckedChangeListener checkboxListener = new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                int position = Integer.parseInt(buttonView.getTag().toString());
                checkboxStatus.set(position, isChecked);
            }
        };

        @Override
        public int getCount() {
            return data.length;
        }

        @Override
        public Object getItem(int position) {
            return data[position];
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

    } 
```

列表项的原始文件 (raw_dialog_item.xml)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:descendantFocusability="blocksDescendants" >

    <CheckBox
        android:id="@+id/chkbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/chkbox"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

# logging - Linux/Java 进程的集群管理器，日志收集

> ID：11648831
> 
> 赞同：1
> 
> 时间：2012-07-25T11:36:41.457
> 
> 标签：logging, cluster-computing, failover

我有一些想要在多台机器上运行的 Java 服务器（尽管 Java 实际上在这里无关紧要，它可以是任何可执行文件）。是否有一些集群管理软件可以让我说，例如“启动服务 A 的 3 个实例和服务 B 的 5 个实例”。如果一个节点死亡，请在另一台服务器上启动服务。

拥有某种管理控制台也很好，在那里我可以看到哪些服务器在工作，哪些服务在工作等等。（当然还有一个漂亮的仪表板，上面有很多绿色；））。或者至少一个 REST 接口可以轻松获取该信息。

更进一步，这样的集群管理器可以负责从服务中收集日志，并在其中任何一个出现错误时提醒管理员。或者这可能是一项单独的服务？

这样的事情存在吗？（当然最好是开源版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:04:33.930

我觉得[supervisord](http://supervisord.org/)可能对你有用吗？

# javascript - 如何将变量中的数据加载到 Jquery Mobile 的选择菜单中？

> ID：11648835
> 
> 赞同：0
> 
> 时间：2012-07-25T11:37:02.477
> 
> 标签：javascript, jquery, web-services, soap, jquery-mobile

我正在使用 ajax 调用从 Web 服务获取数据。我将它保存在一个变量中，我面临的问题是我需要显示我正在进入选择菜单的这些数据..我无法破解它。我的html代码。

```
<div data-role="page" id="requestPage">
<div data-role="fieldcontain">
<select id="select-choice-3" name="pid you need">
<option value="select-value" selected="selected">-- Select PID --</option>
// here i want my data to be
</select>
</div>
</div> 
```

JS代码

```
function content_Load(){
var soapMessage='<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><GetProjectByPeopleId xmlns="http://there.org/"><tmsUserId>' + TmsUserId +'</tmsUserId></GetProjectByPeopleId></soap:Body></soap:Envelope>'

$.ajax({
       url: "http://22.232.32.14/therewebservice/thereeatmswebservice.asmx?op=GetProjectByPeopleId",
       type: "POST",
       dataType: "xml",
       SOAPAction: "http://there.org/GetProjectByPeopleId",
       data: soapMessage,
       complete: endSaveProduct,
       contentType: "text/xml; charset=\"utf-8\""
       });
return false;
}
function endSaveProduct(xmlHttpRequest,status){

$(xmlHttpRequest.responseXML)
.find('Table')
.each(function()
      {
      var ProjectName =$(this).find('ProjectName').text();
// i am able to get ProjectName as my data, now i want it to get into the select menu for which i have written the code bellow but that's not working.
      var optionlist='';
      optionlist += '<option>' + ProjectName + '</option>';
      $("#select-choice-3").html(optionlist).selectmenu('refresh', true);
      window.location.href="#requestPage";

      });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:55:23.740

在我看来，在*endSaveProduct*函数中，当您迭代每个*'Table'*时，您：

1.  空白/清除变量选项列表（*optionlist = '';*），
2.  将 ProjectName 添加到变量选项列表（这是正确的，但由于您每次都将其空白，因此没有效果）
3.  用找到的 ProjectName 覆盖选择，
4.  导航到#requestPage。

如果我是正确的，这只会让您在循环完成后找到最后一个*“ProjectName”*，从而有效地为您提供只有一个选项的选择。尝试将 optionlist 变量、选项列表的实际填充以及在*each()*之外的重定向：

```
function endSaveProduct(xmlHttpRequest,status){
    var optionlist=''; //moved variable declaration here
    $(xmlHttpRequest.responseXML)
        .find('Table')
        .each(function()
        {
            optionlist += '<option>' + $(this).find('ProjectName').text() + '</option>'; //shortened it
        });
    //moved populating the optionlist here
    $("#select-choice-3").html(optionlist).selectmenu('refresh', true);
    window.location.href="#requestPage";
} 
```

我没有对此进行测试，但我认为这是问题所在。

此外，您正在覆盖默认选择的“--Select PID--”选项。要解决此问题，您还可以将选项列表定义重写为：

```
var optionlist = '<option value="select-value" selected="selected">-- Select PID --</option>'; 
```

或者，按照[joerajeev](https://stackoverflow.com/users/1490220/joerajeev)的建议，使用 .append() 而不是 html()。

# c - 在 C 中具有数组的结构的内存分配

> ID：11648836
> 
> 赞同：0
> 
> 时间：2012-07-25T11:37:13.367
> 
> 标签：c

我有一个包含数组的结构。如下所示：

```
struct Node
{
    int a;
    char a1[25];
}obj;

main()
{
    struct Node *p = malloc(sizeof(struct Node));
    p->a=10;
} 
```

我想知道是否为这段代码分配了两个不同的内存部分，一个来自堆栈用于存储结构节点，另一个来自堆用于存储指针指向的节点`p`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:38:30.447

这里没有为数组分配堆栈。内部的数组`struct Node`存储在堆上的一个连续块中。您可以通过 print 看到这一点`sizeof(struct Node)`，它至少等于：

```
sizeof(int) + sizeof(char) * 25 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T11:39:31.660

`p`是具有自动存储期限的对象；它的存储在大多数编译器的堆栈中。

它指向一个具有分配存储期限的结构对象；这个结构对象的存储在大多数编译器的堆中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:57:22.227

**编辑后：**

```
struct Node
{
    int a;
    char a1[25];
}obj; 
```

相反，我猜它将分配在数据部分中。这段代码被修改了一点点

```
#include <stdio.h>
#include <stdlib.h>

struct Node
{
    int a;
    char a1[25];
}obj;

int global_data;

int main()
{
   // struct Node *p = malloc(sizeof(struct Node));
   // p->a=10;

    obj.a = 10;

    return 0;
} 
```

当我们查看汇编代码时。

```
 .file   "ada.c"
        .comm   obj,32,32
        .comm   global_data,4,4
        .text
        .globl  main
        .type   main, @function
main:
.LFB0:
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        movq    %rsp, %rbp 
```

global_data 和 obj 都分配在同一位置。即未初始化的数据部分。将没有机会在堆中分配。因为没有调用 malloc()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:55:29.963

您应该注意到您只是在声明一个结构（结构节点）。

通过声明它，实际上并没有为它保留任何内存。您只是通知编译器存在这样的数据组织。

当你调用 malloc 时，你只保留一些内存来做你想做的任何事情。

现在，如果您要声明：

```
struct Node{
 .....
}myNode; 
```

在这种情况下，内存中的空间确实会分配给 myNode。

要回答您的后续问题，它既不会在堆栈中也不会在堆中分配。

**堆**可以随着内存分配而增长。**堆栈**可以随局部变量一起增长。这是一个不会改变大小的**全局变量，因此它可以放置在内存中称为****数据段**的固定位置。

这也是存储**静态变量**的地方。

为了更深入地了解这个主题，当您使用 Windows 或 Linux 等操作系统时，在您的程序运行之前，它会被复制到 RAM 内存中的某个位置。其中一部分将被称为**代码段**，只读代码所在的位置，一部分是数据段，这是该变量所在的位置。您的程序可以访问的其余 RAM 将可用于堆和堆栈。

在没有操作系统的嵌入式系统上，程序是直接从 Flash 运行的，所以它的代码段是在 Flash 中编程的。它的数据段分配给可用的 RAM（与堆栈共享）并且根本没有堆（您需要一些内存管理模块才能使堆概念有意义）

# c# - 双击时使用 Request.QueryString 传递值

> ID：11648837
> 
> 赞同：0
> 
> 时间：2012-07-25T11:37:13.543
> 
> 标签：c#, asp.net, gridview, request.querystring, rowdatabound

我有一个gridview，我想将一个值从行单元格传递到另一个页面。基于字符串的值，我可以运行特定的查询并填充另一个网格视图。我的问题是，当我双击该行时，它不会获取该值，但是，当我更改行单元格索引时，它将用于该行中的其他列。如果需要更多信息，请告诉我，谢谢。

```
protected void grdCowCard_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        string querystring = string.Empty;
        string id = e.Row.Cells[1].Text;

        //Session["selectedLactationEvent"] = "MMR";
        e.Row.Attributes["ondblclick"] = string.Format("doubleClick({0})", id);
        //won't pick up the value("MMR") at Row.Cells[1]
        //but will pick up the value("1") at Row.Cells[0]
    }
}

<script type="text/javascript">
    function doubleClick(queryString) {
        window.location = ('<%=ResolveUrl("LactationDetails.aspx?b=") %>' + queryString);
    }
</script> 
```

该值应基于此会话，然后用于确定使用哪种方法来填充网格视图。

```
Session["selectedLactationEvent"] = Request.QueryString["b"].ToString();

//string test = (string)(Session["selectedLactationEvent"]);
if ((string)(Session["selectedLactationEvent"]) == "MMR")
    GetExtraMMRdetails();
else if ((string)(Session["selectedLactationEvent"]) == "LAC")
    GetExtraLACdetails();
else
    GetExtraEBIdetails(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:09:58.427

我没有通过双击事件，而是在 gridview 中添加了一个按钮字段并创建了一个 OnRowCommand 事件。我创建了 EventID 和 EventType（gridview 中需要从中获取值的两列）DataKeyNames。在后面的代码中，在 OnRowCommand 事件中，我获取所选行的索引并获取该行上 EventID 和 EventType 的值。我在 url 中使用 QueryString 传递了值。在 LactationDetails 页面上，我然后请求查询字符串并使用值...

```
<asp:GridView ID="grdCowCard" runat="server" Width="100%" 
        DataKeyNames="EventID,EventType" HeaderStyle-BackColor="#008B00" 
        OnRowCreated="grdCowCard_RowCreated" Caption="Lactation Records" 
        OnRowCommand="grdCowCard_RowSelected">
        <Columns>
          <asp:ButtonField Text="Select" CommandName="Select"/>  
        </Columns>
    </asp:GridView>

protected void grdCowCard_RowSelected(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Select")
    {
        int RowIndex = int.Parse(e.CommandArgument.ToString());// Current row

        string id = grdCowCard.DataKeys[RowIndex]["EventID"].ToString();
        string eventType1 = grdCowCard.DataKeys[RowIndex]["EventType"].ToString();

        //grdCowCard.Attributes["ondblclick"] = string.Format("doubleClick({0})", id, eventType1);

        //id and eventType are passed to LactationDetails page, and used to determine which 
        //method to use and what data to retrieve
        Response.Redirect("LactationDetails.aspx?b=" + id + "&c=" + eventType1);
    }
} 
```

哺乳详情页面

```
Session["selectedMilkid"] = Request.QueryString["b"].ToString();
    string selectedEventType = Request.QueryString["c"].ToString(); 
```

# php - php preg_match 函数中的正则表达式

> ID：11648840
> 
> 赞同：0
> 
> 时间：2012-07-25T11:37:33.143
> 
> 标签：php, regex, digits

我有一个正则表达式模式

```
<?php 
if(preg_match("/shop[0-9]/", '/shop43')){
    echo "YES";
}
else
{
    echo "NO";
}
 ?> 
```

它正在工作，但是当我写

```
if(preg_match("/shop[0-9]/", '/shop43d')){
    echo "YES";
} 
```

它也在工作。问题是我需要在单词“shop”之后有一个数字，例如 shop1,shop2,...,shop123 我需要改变我的模式什么？）如果有人可以，我会非常感激给我一个链接，其中包含一些我在正则表达式中遇到的问题的例子。谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:39:57.450

试试这个模式：

```
/^\/shop[0-9]+$/ 
```

您可以简单地使用`\d`而不是`[0-9]`：

```
/^\/shop\d+$/ 
```

*说明*：

*   如`/`用于指示表达式的开始/结束，您必须对其进行转义（不指示表达式的结束） -> `\/`。

*   `^`锚点匹配应用正则表达式模式的字符串的开头。

*   `$`锚点匹配正则表达式模式应用到的字符串的末尾。

*   `+`重复上一个项目一次或多次。

[[在此处](http://www.regular-expressions.info/reference.html)查看有关 reg-exps 的更多信息。]

# c# - SignalR javascript 集线器方法在一段时间不活动后未在 IE 中触发

> ID：11648844
> 
> 赞同：1
> 
> 时间：2012-07-25T11:37:44.687
> 
> 标签：c#, .net, signalr

我有一个 SignalR (v0.5.2) Hub 向 JavaScript 客户端发送消息。

C＃

```
public Task SendData(ClassName classData){
    return Clients["groupid"].renderData(classData);
} 
```

javascript

```
var _client = $.connection.myHub;
_client.renderData = function(data){
    /* do stuff */
};

$.connection.hub.start({ transport:activeTransport }, function(){ }); 
```

一切正常，除了在 IE9 中一段时间​​不活动后，JavaScript 方法无法运行。

我查看了`/signalr/connect?transport=foreverFrame`IE9 开发人员工具中网络日志的响应正文，可以看到我收到了以下消息：

```
<script>r(c, {"MessageId":"54","Messages":[{"Hub":"myHub","Method":"renderData","Args":[....]]}],"Disconnect":false,"TimedOut":false,"TransportData":{"Groups":["LiveBid.999"]}});</script>
<div>{"MessageId":"54","Messages":[{"Hub":"myHub","Method":"renderData","Args":[....]]}],"Disconnect":false,"TimedOut":false,"TransportData":{"Groups":["LiveBid.999"]}}</div> 
```

然而 JavaScript 方法永远不会触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:41:57.160

在花了很多时间调试之后，事实证明是我的 Modernizr 文件的版本导致了问题。

我不太熟悉 Modernizer 的内部工作原理，但是我创建了一个只有 css/html5 元素功能的文件的自定义版本，目前这似乎适用于 SignalR 和 foreverFrame。

# google-drive-api - 接收访问令牌谷歌驱动器api，c#

> ID：11648847
> 
> 赞同：2
> 
> 时间：2012-07-25T11:37:52.300
> 
> 标签：google-drive-api

我正在使用 Google drive api 开发桌面应用程序。我正在使用 c#。在登录阶段，登录并允许访问后，我收到授权码，要求我将其复制粘贴到我的应用程序以交换授权码以访问令牌。是否有另一种方法来接收访问令牌，而无需用户复制并粘贴授权码。

提前感谢莫兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:03:50.313

对于桌面应用程序，另一种选择是让您的应用程序托管一个临时 Web 服务器并将其设置`redirect_uri`为`localhost:<PORT>`. 一旦用户批准访问，授权服务器将重定向到此 URI：您的应用程序必须处理请求、解析`?code=`查询参数并将其交换为 OAuth 2.0 凭据。

# css - 我应该在哪里包含重置 css 以避免现有 css 出现问题？

> ID：11648851
> 
> 赞同：0
> 
> 时间：2012-07-25T11:38:15.680
> 
> 标签：css, sass, css-reset

你好

我遇到了这个问题： ![](../Images/7ffc7fac6577f8c6e7f3eae6115db9cc.png) 为了解决它，我在此处包含了 reset.css 表单 - > [http://meyerweb.com/eric/tools/css/reset/reset.css](http://meyerweb.com/eric/tools/css/reset/reset.css)

现在我的网站看起来更糟了，因为一些边距是 0，它看起来像这样：

![](../Images/2c0acd7bf55f5566f8683d6f388c1993.png) 请。查看页脚 - 由于 reset.css，无法更改边距和填充。

我尝试先包含 reset.css，但没有帮助。

问题是 - 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:40:23.847

只需找出具体问题并手动解决，而不是将所有代码都包含在一个修复中。

对我来说，您的 ul 上似乎有边距，请执行 "navClass" { margin: 0; ，看看是否可以解决它

但是，为了将来参考，CSS 重置应该总是在你的 CSS 之前，否则它会覆盖你创建的

编辑：意识到您已经修复了导航，但想要修复页脚。只需为其添加边距/填充，您依赖的是默认值，您已将其设置为 0，因此您需要手动将其重新添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:43:59.147

**您应该首先**包含 reset.css 。然后用你需要的覆盖这些值。

因此，在您的实例中，您在制作 css 时一直依赖一些默认值。reset.css 改变了这些值，你的分页符。所以现在你应该手动设置这些值。例如，您需要在页脚中添加边距和内边距。

# c# - 从 C# 打开 Excel 文件

> ID：11648854
> 
> 赞同：1
> 
> 时间：2012-07-25T11:38:19.627
> 
> 标签：c#, excel, excel-interop

使用 Microsoft.Office.Interop.Excel 对象从 C# 处理 Excel 时遇到问题。

当我尝试打开一个文件以写入我已经在 Excel 中打开的文件时，问题就出现了。这最终会出错，然后在后台运行一个 Excel 实例。

在打开文件之前如何判断文件已经打开？

此外，处理 Excel 对象并因此终止 Excel 进程的约定是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:43:27.363

以下文章提供了一种检查文件是否已打开的好方法：

[有没有办法检查文件是否正在使用？](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)

这篇文章讲的是杀掉excel进程：

[杀死进程 Excel C#](https://stackoverflow.com/questions/9316141/kill-process-excel-c-sharp)

希望这些有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:53:57.393

您好，您必须在处理结束时处理您的 excel 对象（工作簿、应用程序类、使用范围、工作表）

```
 workbook.Close(false, workbookPath, null);
        applicationClass.Quit();

        while (Marshal.ReleaseComObject(usedRange) > 0)
        { }
        while (Marshal.ReleaseComObject(worksheet) > 0)
        { }
        while (Marshal.ReleaseComObject(workbook) > 0)
        { }
        while (Marshal.ReleaseComObject(applicationClass) > 0)
        { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T08:43:21.297

要打开已打开的 - 更多信息，只需在 MSDN 上键入 Workbooks.Open。这是保存示例，您只需覆盖（仍然打开）而不查询：o）， ***xlShared***和***xlLocalSessionChanges***是关键字。

```
 _xlsWorkbook.SaveAs(
                 targetFileName                                                     /* Filename */
                ,Excel_ForMissing.XlFileFormat.xlExcel8                             /* FileFormat */
                ,Missing.Value                                                      /* Password */
                ,Missing.Value                                                      /* WriteResPassword */
                ,Missing.Value                                                      /* ReadOnlyRecommended */
                ,Missing.Value                                                      /* CreateBackup */
                ,Excel_ForMissing.XlSaveAsAccessMode.xlShared                       /* AccessMode */
                ,Excel_ForMissing.XlSaveConflictResolution.xlLocalSessionChanges    /* ConflictResolution */
                ,false                                                       /* AddToMru */
                ,Missing.Value                                                       /* TextCodepage */
                ,Missing.Value                                                       /* TextVisualLayout */
                ,true                                                       /* Local */
            ); 
```

# c# - 带有引用类型和 GC 的结构？

> ID：11648856
> 
> 赞同：5
> 
> 时间：2012-07-25T11:38:23.860
> 
> 标签：c#, .net, struct, garbage-collection, heap-memory

我在想 ，

类的实例在堆上。（其中的值类型也在堆中）。

但是*相反*的情况呢？

**[这里](https://stackoverflow.com/questions/945664/can-structs-contain-references-to-reference-types-in-c-sharp)**有一个问题，但没有提及任何`GC`相关信息。

那么 - GC 如何处理这种情况？

```
public struct Point 
{
object o ;

   public int x, y;

   public Point(int p1, int p2) 
   {
   o = new Object();
      x = p1;
      y = p2;    
   }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T11:43:50.790

`Point`包括对堆上对象的引用。一旦不再`Point`存在与该引用一起存在的副本，这将有资格收集。注意到：

```
Point p1 = new Point(1,2);
Point p2 = p1; 
```

是 2 个副本，每个副本都引用堆上的**同一个**对象。如果这些点存储为某个对象上的字段，那么显然该对象的生命周期将至少与具有这些字段的对象一样长。如果这些点只是堆栈上的变量，那么它会变得更加复杂，因为 GC 可能会考虑是否会再次*读取*变量。如果不是，则该变量可能不会有效存在（或：它可能）。

路径可以是非常间接的，但它本质上归结为：GC 能否到达对象，从 GC 根开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T11:49:14.353

GC 确实在

*   GC 句柄（静态变量也是 GC 句柄的根）
*   所有线程堆栈
*   CPU 寄存器

在您的情况下，结构通常位于线程堆栈内，因此被搜索。如果它被装箱，则它作为伪对象驻留在托管堆上。但是你可以放心，这个东西被 GC 正确计数了。因为它确实包含一个对象，所以它不再是一个 blittable 类型，并且不能通过 PInvoke 传递给非托管代码。

PInvokes 存在一个问题，如果您将一个结构传递给它，即使未管理的调用仍在进行中，它也会被 GCed . 在释放模式下，GC 收集得更加积极。

**Edit1：** 作为类对象成员的结构不是特殊情况。GC 还将检查所有类字段以查找嵌入式结构中的类引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:55:09.400

struct 类型的存储位置最好被认为是用 Duck® 品牌胶带固定在一起的存储位置的集合；固定在一起的存储位置的性质将是结构的性质。如果一个结构体存储在栈中，那么它的字段将被存储在栈中；如果结构存储在堆对象字段中，则其字段将存储为该堆对象的一部分；等等。如果一个结构存储在一个可变的存储位置，它的字段（公共或私有）将是可变的（即使该结构不提供突变，将一个结构复制到另一个将通过用相应的字段覆盖其字段来改变后者前者的字段）。如果结构存储在不可变的存储位置，则其所有字段都是不可变的。

如果您以这种方式看待事物，将很容易理解结构的 GC 行为本质上与通过简单地将结构替换为单独的字段而获得的 GC 行为相同（该行为唯一重要的地方是“不寻常' 与数组一起使用，因为通常一个数组槽只保存一个项目而不是一组字段；不存在与结构类型的数组等效的非结构）。

# javascript - xml 跨域的 jsonp

> ID：11648861
> 
> 赞同：0
> 
> 时间：2012-07-25T11:38:34.853
> 
> 标签：javascript, jquery, jakarta-ee, jsonp

我正在尝试为 xml 跨域找到一种方法。[在谷歌搜索之后，我发现这可能是由 jsonp 完成的，但是在看到jsonp with jquery](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)和[Basic how-to for cross domain jsonp](https://stackoverflow.com/questions/5463256/basic-how-to-for-cross-domain-jsonp)之后，我并没有很好地了解它的工作方式。

我有一段 html 代码，如下所示：

```
<form id="f" name="f" method="POST" action="index.php">
<input type="text" id="t" name="t">
</form> 
```

在javascript部分：

```
if( typeof (xmlhttp)=="object")
    {
        xmlhttp["open"]("GET",pURL,true);
    }
} 
```

在哪里`pURL = index.php?p1="x"&p2="y"`

我尝试了一些方法，但它不起作用，所以我想知道如何更改以下代码以使其正确？

```
<script>
$.getJSON("http://domainXYZ.com.indexPHP?jsoncallback=?",
  {
    t: "inputValue"
  },
  function(data) {
    $.each(data, function(data){
      alert(data);
    });
  });</script> 
```

任何想法将不胜感激。

# sql-server - 创建函数来执行代码

> ID：11648862
> 
> 赞同：0
> 
> 时间：2012-07-25T11:38:36.193
> 
> 标签：sql-server, tsql, function, ssis

我通常不会使用函数来执行代码，但是我的老板坚持要我使用函数而不是 SP 来执行 SSIS 包。真的不知道为什么！

我需要创建一个将执行以下代码的函数，并且用户只需要在调用该函数时提供 SSIS 包名称。

```
declare @cmdtest varchar(200)
set @cmdtest = 'dtexec /f "C:\Users\Desktop\testpackage.dtsx"'
exec master..xp_cmdshell @cmdtest 
```

上面的代码将执行我的 testpackage.dtsx，现在我的函数必须只询问 SSIS 包名称并且必须是 varchar。

由于我对功能一无所知，有人可以告诉我这样做的最佳方法是什么。我假设需要使用标量函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:45:04.207

也许是这样的：

```
CREATE FUNCTION dbo.ExecutePackage
(
    @PackageName VARCHAR(30)
)
RETURNS BIT
AS 
BEGIN
    DECLARE @cmdtest varchar(200);
    SET @cmdtest = 'dtexec /f "C:\Users\Desktop\'+ @PackageName + '.dtsx"';
    EXEC master..xp_cmdshell @cmdtest;

    RETURN 1; --you could do some error checking and return either true or false - just a thought
END 
```

然后你执行它

```
SELECT dbo.ExecutePackage('testpackage'); 
```

# .net - 如何从 .net 中的 excel 文件导入/导出？

> ID：11648864
> 
> 赞同：-3
> 
> 时间：2012-07-25T11:38:42.473
> 
> 标签：.net, vb.net, excel, import, export

我想分别进行导入和导出。
导入会将数据从 excel 工作表获取到数据集中，而导出则相反，从数据集到 excel 文件
excel 文件/书可以包含多个工作表
（最好不通过 oledb）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:44:07.013

我没有这方面的经验，但已经有一个 API。你看过[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.11%29.aspx)吗？从我刚刚发送给您的链接来看，您可能想要的功能几乎都有。

# java - 使用alternatedocroot时无法通过glassfish访问外部资源

> ID：11648865
> 
> 赞同：1
> 
> 时间：2012-07-25T11:38:47.697
> 
> 标签：java, web-applications, resources, glassfish

我正在处理的应用程序部署在 Glassfish v3.1.1 中。我正在尝试使用备用文档根来提供来自战争之外的文件。

这是我在 glassfish-web.xml 中指定的内容

`<glassfish-web-app> <context-root>xyz</context-root> <property name="alternatedocroot_2" value="from=/new/\* dir=E:/xyz"/> </glassfish-web-app>`

静态文件存储在此位置：

```
E:\xyz\new 
```

部署后，当使用此 url 访问文件时，我得到 404 响应。

```
http://localhost:8080/xyz/new/1_RD_2.png 
```

我搜索了请求是如何匹配的，上面的代码似乎与[这里](https://blogs.oracle.com/jluehe/entry/alternate_docroots_and_local_resource)给出的匹配。但是，代码仍然不起作用。我在这里有什么遗漏或做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:51:40.860

上述配置是正确的。由于 web.xml 中提到的冲突 url 模式，代码工作正常

```
<servlet-mapping>
<servlet-name>JerseyTest</servlet-name>
<url-pattern>/*</url-pattern>
</servlet-mapping> 
```

将 web.xml 中的上述模式更改为

```
<url-pattern>/services/*</url-pattern> 
```

静态文件是可访问的。

# ruby-on-rails - 使用 windows 或 linux 开始使用 Ruby On Rails？

> ID：11648866
> 
> 赞同：11
> 
> 时间：2012-07-25T11:39:03.020
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我是 Ruby On Rails 的新手，我想知道哪个更适合使用它。Windows 或 Linux。我以前从未使用过 Linux，但我听说使用它会更好。像我这样的人是否有必要安装 linux 或者我可以使用 windows 并且结果与 linux 相同？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T12:26:19.547

如果您当前的开发机器运行的是 Windows，并且您现在无法访问 Linux 环境，请不要让这阻止您开始使用 Rails。*肯定*，*肯定*，*肯定*首先安装 DevKit（如果它还没有包含在 RubyInstaller 中）。请参阅[https://github.com/oneclick/rubyinstaller/wiki/Development-Kit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)。

如果您深入 Rails 开发，甚至开始以此为生，您将不可避免地转向在您的开发机器上使用 Linux。问题不在于 Rails，而是在 Windows 上难以或不可能安装的许多二进制 gem。

用于处理图像（即生成缩略图）的最流行的 Ruby 库是 RMagick，但尝试在 Windows 上安装它就足以让一个强壮的人哭泣。Paperclip*非常*适合处理图像和其他附件，但这也是一个问题。然后是一个流行的 JSON 解析库，它在 Windows 上也存在问题。Unicorn（一种流行的 Rails 服务器）根本无法在 Windows 上运行，而 Thin（我最喜欢的）也可能让您头疼。等等等等。

现在，您可以在 Windows 上进行 Rails 开发，但有时您会发现自己必须在远程服务器上测试代码，而不是在本地测试代码，这会浪费很多时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T11:47:44.260

Linux，毫不犹豫。如果你想在windows上用ruby on rails开发你会发现很多问题。一开始我已经尝试过使用Windows，这非常困难。因为我使用的是 Linux，所以它可以工作！一开始很难，但非常强大。

*   Linux非常强大；
*   大部分文档都在 UNIX 环境中；
*   这需要较少的配置；
*   你会有更少的错误；
*   每个工具都针对 UNIX 系统进行了优化；

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T14:29:47.630

是的，这个线程是一个旧线程，但我在这里表达您在使用 Ruby on Rails 时会在 Windows 平台上遇到的问题。建立正常的应用程序可能是“可以的”，但是，一旦您开始刮擦 , , , ... 的表面`sqlite3`，`ASCII Characters`您`Internationalisation for an application`的头发就会开始脱落，我的意思是字面意思。然而，如果你坚持使用 Mac 或 Linux (Ubuntu)，你会感到无敌，为项目感到自豪，进一步进步，而无需手动设置（gems'）本机扩展库，这太可怕了。

总之，让它在 Windows 上工作只是一场噩梦。无论你做了什么，这完全是你的决定。我希望一切安好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-25T12:19:49.523

这主要取决于您在每种环境中的舒适程度。我已经在 Windows 和 Linux 上开发了 4 年（因为我买不起 Mac），并且我发现 Windows 是最简单的设置，最近。Engineyard 发布了一个适用于 Windows 的[安装程序](http://railsinstaller.org/)，该安装程序是 Ruby、Rails、Git、Bundler、SQLite 和 DevKit 等的一体化安装程序。

Windows 用户习惯于使用 Engineyard 提供的简单安装程序，所以如果这听起来更像你习惯的那样，那就去吧。

Linux 为安装 Ruby on Rails 提供了更多在线支持。每个 linux 发行版在安装上都有细微的差别，所以我无法为您提供任何链接。您还可以找到安装 Git、SQLite 和 DevKit 的单独教程。

如果您更喜欢在终端中工作，那么我建议您投身于 Linux 开发。设置它可能需要比 Windows 更长的时间，但您会发现它对命令行更加友好（并且令人满意）。

设置 Rails 后，差异会迅速缩小。开发将更多地取决于您使用的 IDE 或文本编辑器。大多数都提供 Linux 和 Windows 版本。

如果您的重点主要是服务器端编程，那么 Linux 将是最好的研究对象。如果您更多地在客户端工作，那么我建议您使用 Windows（或 MacOS）。

我最好的建议是下载 VirtualBox 或其他一些 VM，然后尝试 Linux。它是免费的，并且只需要您一天左右的时间来安装和使用。如果您不喜欢它，请返回 Windows。

（由于 Bundler 的奇迹，我个人将两者结合使用）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T11:49:52.793

Linux 或 Mac。这是因为许多有用的 Ruby on Rails 的 Gems 尚未移植到 Windows，而且永远不会移植到 Windows（至少，我上次使用 Rails 时就是这样）。如果您最终在 Windows 上进行开发，您可能会发现自己不得不多次重新发明轮子。

# knockout.js - Knockout.js：如何绑定分层表单？

> ID：11648867
> 
> 赞同：0
> 
> 时间：2012-07-25T11:39:04.110
> 
> 标签：knockout.js

我在客户端表单操作 api 的引擎盖下使用了 knockout.js。它旨在操作由选项卡、字段集（包含在选项卡中）和单个表单控件（包含在字段集中）构建的“分层”表单。

我的策略是为每个组件创建一个单独的视图模型。我的问题是：我怎样才能最好地将模型状态“向下”传播到层次结构？（例如，当以编程方式禁用选项卡时，我还希望禁用所有包含的字段集及其表单控件）

我准备了一个 jsfiddle 来勾画我的第一种方法：

[http://jsfiddle.net/fbuchinger/bxNKg/4/](http://jsfiddle.net/fbuchinger/bxNKg/4/)

在 dom 方面，到目前为止一切看起来都很好，但我注意到该组的“可编辑”状态没有向下传播到表单控件的模型（`PRENAME.editable`属性仍然是`true`，尽管它应该是`false`）。有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:44:42.883

以下是一些可行的方法：

1.  将组应管理的控件传递给组构造函数。然后，设置对可编辑 observable 组的订阅，以将其传播给孩子。这是一个示例：http: [//jsfiddle.net/rniemeyer/ryKpS/](http://jsfiddle.net/rniemeyer/ryKpS/)

2.  将组传递给每个控件的构造函数，并订阅组的可编辑 observable 并更新这个孩子的可编辑 observable（我更喜欢 #1 而不是这个，因为当孩子不需要明确了解他们的父母时，这很好）。示例：http: [//jsfiddle.net/rniemeyer/qRCq4/](http://jsfiddle.net/rniemeyer/qRCq4/)

3.  使用 pub/sub 来同步值。我在这里有一个小型扩展库：[https](https://github.com/rniemeyer/knockout-postbox) ://github.com/rniemeyer/knockout-postbox 。您可以让您的小组在其可编辑属性更改时发布一条消息，然后让孩子订阅该主题。这样，父母和孩子就不需要直接相互引用。您可能需要考虑该主题以查看它是否需要包含组 ID 或其他内容以使其独一无二。示例：http: [//jsfiddle.net/rniemeyer/HC2jx/](http://jsfiddle.net/rniemeyer/HC2jx/)

# camera - 绕 X 轴旋转相机（three.js）

> ID：11648869
> 
> 赞同：1
> 
> 时间：2012-07-25T11:39:17.900
> 
> 标签：camera, rotation, three.js

我正在尝试将相机旋转到场景的 X 轴。
此时我的代码是这样的：

```
rotation += 0.05;
camera.position.y = Math.sin(rotation) * 500;
camera.position.z = Math.cos(rotation) * 500; 
```

这会使相机四处移动，但在旋转过程中会发生一些奇怪的事情，相机会翻转，或者它会跳过它所跟随的假想圆圈的某些部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:13:10.877

你只提供了一段代码，所以我必须对你在做什么做一些假设。

这段代码：

```
rotation += 0.05;
camera.position.x = 0;
camera.position.y = Math.sin(rotation) * 500;
camera.position.z = Math.cos(rotation) * 500;
camera.lookAt( scene.position ); // the origin 
```

将导致您所指的“翻转”，因为相机试图保持“正面朝上”，并且在经过“北极”时会迅速改变方向。

如果像这样偏移相机的 x 坐标，

```
camera.position.x = 200; 
```

相机行为对您来说会显得更自然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T21:13:41.960

Three.js 试图让相机朝上。当您沿 z 轴传递 0 时，它将“修复”相机的旋转。您可以手动检查和重置相机的角度。

```
camera.lookAt( scene.position ); // the origin
if (camera.position.z < 0) {
    camera.rotation.z = 0;
} 
```

我敢肯定这不是最好的解决方案，但如果其他人在玩 three.js 时遇到这个问题（就像我刚刚做的那样），它会更进一步。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-24T15:00:28.630

这对我有用，我希望它有帮助。

**绕 X 轴旋转：**

```
var x_axis = new THREE.Vector3( 1, 0, 0 );
var quaternion = new THREE.Quaternion;
camera.position.applyQuaternion(quaternion.setFromAxisAngle(x_axis, rotation_speed));
camera.up.applyQuaternion(quaternion.setFromAxisAngle(x_axis, rotation_speed)); 
```

**绕 Y 轴旋转：**

```
var y_axis = new THREE.Vector3( 0, 1, 0 );
camera.position.applyQuaternion(quaternion.setFromAxisAngle(y_axis, angle)); 
```

**绕 Z 轴旋转：**

```
var z_axis = new THREE.Vector3( 0, 0, 1 );
camera.up.applyQuaternion(quaternion.setFromAxisAngle(z_axis, angle)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-08T16:34:56.030

我想将相机移动到新位置，同时让相机查看特定对象，这就是我想出的[确保加载[tween.js](https://raw.githubusercontent.com/YaleDHLab/pix-plot/master/assets/js/tween.js) ]：

```
/**
* Helper to move camera
* @param loc Vec3 - where to move the camera; has x, y, z attrs
* @param lookAt Vec3 - where the camera should look; has x, y, z attrs
* @param duration int - duration of transition in ms
**/

function flyTo(loc, lookAt, duration) {
  // Use initial camera quaternion as the slerp starting point
  var startQuaternion = camera.quaternion.clone();
  // Use dummy camera focused on target as the slerp ending point
  var dummyCamera = camera.clone();
  dummyCamera.position.set(loc.x, loc.y, loc.z);
  // set the dummy camera quaternion
  var rotObjectMatrix = new THREE.Matrix4();
  rotObjectMatrix.makeRotationFromQuaternion(startQuaternion);
  dummyCamera.quaternion.setFromRotationMatrix(rotObjectMatrix);
  dummyCamera.up.set(camera)
  console.log(camera.quaternion, dummyCamera.quaternion);
  // create dummy controls to avoid mutating main controls
  var dummyControls = new THREE.TrackballControls(dummyCamera);
  dummyControls.target.set(loc.x, loc.y, loc.z);
  dummyControls.update();
  // Animate between the start and end quaternions
  new TWEEN.Tween(camera.position)
    .to(loc, duration)
    .onUpdate(function(timestamp) {
      // Slerp the camera quaternion for smooth transition.
      // `timestamp` is the eased time value from the tween.
      THREE.Quaternion.slerp(startQuaternion, dummyCamera.quaternion, camera.quaternion, timestamp);
      camera.lookAt(lookAt);
    })
    .onComplete(function() {
      controls.target = new THREE.Vector3(scene.children[1].position-0.001);
      camera.lookAt(lookAt);
    }).start();
} 
```

示例用法：

```
var pos = {
  x: -4.3,
  y: 1.7,
  z: 7.3,
};
var lookAt = scene.children[1].position;
flyTo(pos, lookAt, 60000); 
```

然后在你的`update()/render()`函数中，调用`TWEEN.update();`

[完整示例](https://bl.ocks.org/duhaime/b50c3230238ff88c1779cef1fe02f7a7)

# r - 在谷歌静态地图上离线绘制地图坐标

> ID：11648870
> 
> 赞同：3
> 
> 时间：2012-07-25T11:39:20.443
> 
> 标签：r, ggplot2, png, google-static-maps, ggimage

历史：从静态谷歌地图 png 中提取栅格数据，通过`ggimage`.

```
library (png)
library (ggmap)

rasterArray <- readPNG ("My.png")

x = c (40.702147,40.718217,40.711614)
y = c (-74.012318,-74.015794,-73.998284)

myData <- data.frame (x, y)

print (ggimage (rasterArray, fullpage = TRUE, coord_equal = FALSE) 
    + geom_point (aes (x = x, y = y), data = myData, colour = I("green"), 
      size = I(5), fill = NA)) 
```

我确实运行`dput`了，`rasterArray`但输出是 20 MB，不能在这里发布。
顺便说一句，[这是该静态地图的 URL：](http://maps.google.com/maps/api/staticmap?center=40.7106593333333,-74.0087986666667&zoom=15&size=640x640&maptype=terrain&format=png32&sensor=true&40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc)

`scale`问题：要在包含像素地图的 R 设备上绘制“GPS 坐标” ，我需要`data.frame`吗？

我看到了这个页面：[http](http://www-personal.umich.edu/~varel/rdatasets/Langren1644.html) : //www-personal.umich.edu/~varel/rdatasets/Langren1644.html 我需要按照他们在这里显示的方式进行缩放吗？

如果是，那么除了`scale`函数的手册页之外，我还需要了解什么才能完成这项工作？

我在错误的树上吠叫吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-25T15:13:45.463

我认为您的错误如下：

*   试图在图像上绘制地理数据，该图像不知道地图坐标
*   可能在数据框中转置您的纬度和经度

这是你应该如何做的，分两步：

1.  获取地图`get_map()`并将其保存到磁盘使用`save()`
2.  绘制数据`ggmap()`

首先，获取地图。

```
library (ggmap)

# Read map from google maps and save data to file

mapImageData <- get_googlemap(
  c(lon=-74.0087986666667, lat=40.7106593333333), 
  zoom=15
)
save(mapImageData, file="savedMap.rda") 
```

然后，在一个新会话中：

```
# Start a new session (well, clear the workspace, to be honest)

rm(list=ls())

# Load the saved file

load(file="savedMap.rda")

# Set up some data

myData <- data.frame(
    lat = c (40.702147, 40.718217, 40.711614),
    lon = c (-74.012318, -74.015794, -73.998284)
)

# Plot

ggmap(mapImageData) +
    geom_point(aes(x=lon, y=lat), data=myData, colour="red", size=5) 
```

![在此处输入图像描述](../Images/3c3b64e2ef755bc276539eb439e6822f.png)

# android - Android：在许多设备中哪里可以找到“未知来源”选项？

> ID：11648871
> 
> 赞同：6
> 
> 时间：2012-07-25T11:39:29.243
> 
> 标签：android, settings

我正在下载一个非市场安卓应用。如果未启用“未知来源”选项，我会向用户显示一个包含“设置按钮”的对话框。单击此按钮时，它会打开设置意图并允许用户检查“未知来源”选项。

```
Intent intent = new Intent(Settings.ACTION_APPLICATION_SETTINGS); 
```

但在某些设备中，“未知来源”选项位于安全设置中，而不是应用程序设置中。如何处理此类情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:21:31.327

> 但在某些设备中，“未知来源”选项位于安全设置中，而不是应用程序设置中。如何处理此类情况？

欢迎设备制造商更改“设置”中项目的组织方式，我们对此无能为力。欢迎您众包设备数据库以及关键设置的位置（如“未知来源”）所在的位置，然后使用该数据库来帮助驱动您的应用程序的行为，默认`ACTION_MANAGE_APPLICATIONS_SETTINGS`为那些不在数据库中的人。然而，除此之外，我们无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:45:03.670

尝试这个

```
 Intent intentSettings = new Intent();
 intentSettings.setAction(android.provider.Settings.ACTION_MANAGE_APPLICATIONS_SETTINGS);
 startActivity(intentSettings); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T02:12:26.373

这是您在
AOSP/CyanogenMod/Android 工厂映像（Nexus 设备）上访问未知来源的系统首选项的方式：

```
 private void launchSecuritySettings() {

     Intent launchSettingsIntent = new Intent(Settings.ACTION_SECURITY_SETTINGS);
     launchSettingsIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     startActivity(launchSettingsIntent);
     finish();
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-30T13:21:48.903

您可以禁用来自特定软件源的下载，但由于今天没有未知来源选项，因此一旦您允许它，它将永远存在。

安全选项不存在 有安全和位置，但不存在' 应用程序源在上面，不存在。

# java - 如何将哈希图的值转换为 String i Java

> ID：11648872
> 
> 赞同：1
> 
> 时间：2012-07-25T11:39:31.100
> 
> 标签：java, hashmap, tostring

我有一个`HashMap`. 我正在尝试检索该值并使用用户代码中的密钥打印它。

代码是：

```
lib.addbook(book2.getISBN(), book2);
Book ret = lib.getbook("978-81-291-1979-7");
System.out.println(ret); 
```

电流输出：

> O/P: LibraryPackage.Book@527c6768

我希望输出是一个字符串并显示实际值而不是书的地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T12:02:10.917

您必须在您的类中实现（并覆盖）该`toString()`方法`Book`，并指定您希望输出的内容。例如：

```
@Override
String toString()
{
  return this.author+": " + this.title;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:15:24.237

如果你不想重写 .toString() 方法，或者需要在不同的情况下以不同的方式表示它，commons-lang 有一个很好的实用程序：

这是基于反射构建字符串的调用：

```
String str = ToStringBuilder.reflectionToString(object); 
```

事实上，这是实现 .toString() 方法本身的好方法。此类的另一种替代用途是逐个字段地创建字符串：

```
String str = new ToStringBuilder(object)
    .append("field1", field1)
    .append("field2", field2)
    .toString(); 
```

# django - 根据其他字段在Django的用户模型中自动创建用户名

> ID：11648883
> 
> 赞同：5
> 
> 时间：2012-07-25T11:39:49.250
> 
> 标签：django, django-models, django-authentication, django-users

我一直在寻找最佳实践，但没有找到。我什至找不到其他人需要使用的解决方案。

我需要**根据他的其他数据**（名字和姓氏）生成用户的用户名，可选地在末尾附加整数，直到我得到唯一的用户名。

我非常喜欢在模型中这样做。有没有一些标准的方法来做到这一点？还是只适合形式？我一直在研究各种`User`模型方法以及信号的重载，但没有找到可以添加它的合适位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:05:16.243

一种可能的解决方案是通过[pre_save](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.pre_save)信号。

```
def my_callback(sender, **kwargs):
    obj = kwargs['instance'] 
    if not obj.id:
       username = get_unique_username(obj) # method that combines first name and last name then query on User model, if record found, will append integer 1 and then query again, until found unique username
       obj.username = username
pre_save.connect(my_callback, sender=User) 
```

# xml - Action Script 3.0 插入延迟

> ID：11648884
> 
> 赞同：0
> 
> 时间：2012-07-25T11:39:50.427
> 
> 标签：xml, actionscript-3, delay

我是 AS 新手，我正在尝试解决一些问题。

我有下一个脚本

```
var t:Date = new Date ();
var day=t.getDate();
var month=t.getMonth()+1;
var today=day+"."+month;
var u:Number = 0;

var b_persons:Array = new Array ();

var loader:URLLoader = new URLLoader(new URLRequest("bday.xml"));
var bday_file:XML = new XML();

loader.addEventListener(Event.COMPLETE, endLoad);

function endLoad(all_data:Event)

{
   bday_file = XML(all_data.target.data);

   for each (var person:XML in bday_file.Person) 
   {
      if (person.BD == today) 
      {
          b_persons.push(person.FIO);

          trace (b_persons.length);
      }
   }
}

function assign_txtBdayPerson()
{
    txtBdayPerson.text=b_persons[u];
    trace(b_persons[u]);
    u=u+1;
    if (u >= b_persons.length)
    {clearInterval(delay_assign_txtBdayPerson);}

}

trace ("Test"+b_persons.length);

if (b_persons.length != 0)
    {
        var delay_assign_txtBdayPerson = setInterval(assign_txtBdayPerson,3000);
    } 
```

我的 xml 文件有 2 个合适的条件，输出窗口显示下一个序列

测试 0 比 1 和最后 2

所以看起来

```
trace ("Test"+b_persons.length); 
```

早于

```
function endLoad(all_data:Event) 
```

完成了

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:02:18.343

如果您希望/需要`trace ("Test"+b_persons.length);`在 XML 加载并被解析后运行，您需要将其放置在 endload 或 endload 将在其函数结束时调用的函数中。

如果您不习惯事件，它们可能看起来不同且邪恶，但是一旦您习惯了它们，您会发现它们更容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:28:39.547

它发生了，因为这`trace ("Test"+b_persons.length);`是在与实际加载开始相同的“帧”中执行的。`endLoad()`当 XML 已加载时，回调至少在下一帧中执行。这就是 Flash 中异步流的本质。

# android - 在 android 中使用 SAX 解析器解析本地 xml 文件时出现 ExpatParser$ParseException

> ID：11648887
> 
> 赞同：1
> 
> 时间：2012-07-25T11:39:57.613
> 
> 标签：android, xml, xml-parsing, sax, android-xml

我正在尝试学习如何在 Android 中使用 SAX 解析器解析 xml 文件。

我放置了一个示例 xml 文件： res/xml/example.xml 这是 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<maintag>
    <item>
        <name>
            AndroidPeople
        </name>

        <website category="android" >
            www.androidpeople.com
        </website>
    </item>

    <item>
        <name>
            iPhoneAppDeveloper
        </name>

        <website category="iPhone" >
            www.iphone-app-developer.com
        </website>
    </item>
</maintag> 
```

这是主要的 Activity 类

```
package com.me.xml_trail;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.LinearLayout;
import android.widget.TextView;

public class XMLParsingExample extends Activity
{
    /** Create Object For SiteList Class */
    SitesList sitesList = null;

    SAXParserFactory spf;
    SAXParser sp;
    XMLReader xr;
    InputSource is;
    MyXMLHandler myXMLHandler;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);

        /** Create a new layout to display the view */
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(1);

        /** Create a new textview array to display the results */
        TextView name[];
        TextView website[];
        TextView category[];

        try
        {
            /** Handling XML */
            spf = SAXParserFactory.newInstance();
        }
        catch (Exception e)
        {
            Log.d("mytag","1 " + e);
        }

        try
        {
            sp = spf.newSAXParser();
        }
        catch (Exception e)
        {
            Log.d("mytag","2 " + e);
        }

        try
        {
            xr = sp.getXMLReader();
        }
        catch (Exception e)
        {
            Log.d("mytag","3 " + e);
        }

        try
        {           
            /** Send URL to parse XML Tags */
            is = new InputSource(getResources().openRawResource(R.xml.example));
            is.setEncoding("utf-8");
        }
        catch (Exception e)
        {
            Log.d("mytag","4 " + e);
        }

        try
        {
            /** Create handler to handle XML Tags ( extends DefaultHandler ) */
            myXMLHandler = new MyXMLHandler();
        }
        catch (Exception e)
        {
            Log.d("mytag","5 " + e);
        }

        try
        {
            xr.setContentHandler(myXMLHandler);
        }
        catch (Exception e)
        {
            Log.d("mytag","6 " + e);
        }

        try
        {
            xr.parse(new InputSource(is.getByteStream()));      
        }
        catch (Exception e)
        {
            Log.d("mytag","7 " + e);
        }

        /** Get result from MyXMLHandler SitlesList Object */
        sitesList = MyXMLHandler.sitesList;

        /** Assign textview array lenght by arraylist size */
        name = new TextView[sitesList.getName().size()];
        website = new TextView[sitesList.getName().size()];
        category = new TextView[sitesList.getName().size()];

        /** Set the result text in textview and add it to layout */
        for (int i = 0; i < sitesList.getName().size(); i++)
        {
            name[i] = new TextView(this);
            name[i].setText("Name = " + sitesList.getName().get(i));
            website[i] = new TextView(this);
            website[i].setText("Website = " + sitesList.getWebsite().get(i));
            category[i] = new TextView(this);
            category[i].setText("Website Category = " + sitesList.getCategory().get(i));

            layout.addView(name[i]);
            layout.addView(website[i]);
            layout.addView(category[i]);
        }

        /** Set the layout view to display */
        setContentView(layout);
    }
} 
```

这是我的日志猫

```
cscCountry is not German : BTU

 7 org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 0: not well-formed (invalid token)

 threadid=1: thread exiting with uncaught exception (group=0x40018578)

 FATAL EXCEPTION: main

 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.me.xml_trail/com.me.xml_trail.XMLParsingExample}: java.lang.NullPointerException

 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)

 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)

 at android.app.ActivityThread.access$1500(ActivityThread.java:117)

 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)

 at android.os.Handler.dispatchMessage(Handler.java:99)

 at android.os.Looper.loop(Looper.java:130)

 at android.app.ActivityThread.main(ActivityThread.java:3687)

 at java.lang.reflect.Method.invokeNative(Native Method)

 at java.lang.reflect.Method.invoke(Method.java:507)

 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)

 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)

 at dalvik.system.NativeStart.main(Native Method)

 Caused by: java.lang.NullPointerException

 at com.me.xml_trail.XMLParsingExample.onCreate(XMLParsingExample.java:113)

 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)

 ... 11 more 
```

问题出在 xr.parse(new InputSource(is.getByteStream())); 为什么我会得到这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:05:48.793

我通过更改解析 xml 的方式来修复它

```
InputStream response=context.getAssets().open("your.xml");

Xml.parse(response, Xml.Encoding.UTF_8,rootElement.getContentHandler()); 
```

[带有本地 XML 文件的 SAXParser](https://stackoverflow.com/questions/5948483/saxparser-with-local-xml-file)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-02T01:32:24.403

回到原来的问题，我也发现了这个错误。我将它追踪到 XML 输入，由于某种原因它为空。我最初尝试将 XML 解析为 r.xml.example.xml 下的本地资源，但失败了，即使来自[http://www.androidpeople.com/xml-parsing的代码示例](http://www.androidpeople.com/xml-parsing)

由于远程 XML 和本地 XML 生成了两个不同的结果，我知道这是问题的根源。在尝试多次解析 XML 文件后，我将其移至 R.raw.example.xml 并且它起作用了。

我不知道为什么，也不怀疑这是一个明确的答案。我唯一能想到的不同之处就是手动写出 XML。这可能是我从网站上复制的原始 XML 的编码错误。

环境：Intellij 12 Android SDK 4.03 Java 1.6 SDK

请注意，解析构成程序一部分的 XML 不需要请求新的权限。

# php - 代码在 PHP 5.4.3 中运行良好，但在 int 5.3.8 中运行良好

> ID：11648897
> 
> 赞同：0
> 
> 时间：2012-07-25T11:40:39.850
> 
> 标签：php

我有以下代码行在 PHP 5.3.1 和 5.3.8 中使用时会引发错误，并且我认为所有代码都是 5.3.x。只有当我将它上传到服务器时才注意到它，因为它在我的本地 PHP 5.4.3 上运行良好

```
if (isset($args[0]['field_date']['und'][0]['value']['date'])) {
  // Do stuff
} 
```

即将出现的错误是

> 不能在 my_module.module 第 9 行中使用字符串偏移作为数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:45:27.643

你是如何初始化的`$args`？在对其执行数组函数之前，您不能将其用作字符串。

[http://informationideas.com/news/2006/06/14/fatal-error-cannot-use-string-offset-as-an-array-in/](http://informationideas.com/news/2006/06/14/fatal-error-cannot-use-string-offset-as-an-array-in/)

# wso2 - 简单的 HTTPS 代码

> ID：11648898
> 
> 赞同：1
> 
> 时间：2012-07-25T11:40:39.990
> 
> 标签：wso2, wso2esb

您好我正在尝试使用以下代码通过 curl 将消息接收到端口 9090（在axis2.xml 中设置）上的 wso2 esb

```
`<proxy xmlns="http://ws.apache.org/ns/synapse" name="att2" transports="https"        
 statistics="enable" trace="enable" startOnLoad="true">  
 <target faultSequence="fileWriteSequence" endpoint="conf:/users">
  <outSequence>
     <send />
  </outSequence>
</target>
<parameter name="enableMTOM">false</parameter>
</proxy>' 
```

我正在使用的 curl 命令是：`curl -d this is a test" http://localhost:9090`

我没有在我的统计信息中看到该文件，并且 curl 命令返回的响应是“来自服务器的空回复”有什么想法吗？

# iphone - @implementation 类名 {}

> ID：11648900
> 
> 赞同：1
> 
> 时间：2012-07-25T11:40:47.743
> 
> 标签：iphone, objective-c, ios

我发现很少有这样的代码

```
#SOMECLASS.h
@interface SOMECLASS : SOMESUPERCLASS

@end

#SOMECLASS.m
    @implementation SOMECLASS {
        NSMutableArray *a;
        NSMutableArray *b;
        NSMutableArray *c;

        BOOL d;
    }

    @synthesize something;

    - (id)init
    {
        self = [super init];
        if (self) {
           //something
        }
        return self;
    } 
```

有人可以解释一下这实际上意味着什么吗？@implementation 然后'{'这里的一些变量声明'}'这是什么意思？在这里声明的变量的范围是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:44:30.597

这些是在类实现中声明的实例变量。有关官方文档，请参阅[Objective-C 编程语言](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-TPXREF126)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:49:34.713

在 class.h 中声明变量的位置取决于您

或像这样在 class.m 中：

```
 @implementation SOMECLASS {
    NSMutableArray *a;
    NSMutableArray *b;
    NSMutableArray *c;

    BOOL d;
} 
```

但是没有在 class.h 中声明的变量和方法对于其他类是隐藏的，所以大多数情况下你声明你在这里声明内部方法和变量。

# java - InvokeLater 冻结 GUI

> ID：11648907
> 
> 赞同：0
> 
> 时间：2012-07-25T11:41:04.360
> 
> 标签：java, multithreading, invokelater

我正在尝试使用多线程模拟一个简单的恒温器。恒温器应提高温度以达到用户要求的值，即下面代码中的“最大值”值。我有两个线程，一个负责提高温度，另一个负责降低温度。但减少的条件是它应该只在气体关闭时运行。但我在实施这个概念时遇到了问题。每次我按下向上按钮以增加所需的温度时，GUI 都会冻结。我怎么解决这个问题？

这就像一个线程持有锁并且不会释放它但是我怎么能注意到哪个呢？

```
`private volatile boolean isBoilerOn = false;
protected int Max, Current;
protected boolean isDone, isGasOn, isPumpOn;
private temperatureUp tempUp;
private temperatureDown tempDown;

public void setBoilerSatus(boolean status) {
    this.isBoilerOn = status;            
}

public boolean getBoilerStatus() {
    return this.isBoilerOn;           
}

private synchronized void setGasBoilerStatus() {
if(Max>Current)
    setBoilerSatus(true);
else
    setBoilerSatus(false);

notifyAll();
}

private void btnUpActionPerformed(java.awt.event.ActionEvent evt) {                                      
if(Max<=8)
{
    Max++;
    String strI = String.valueOf(Max);
    lblDesiredTemp.setText(strI);
    setGasBoilerStatus();
}
}                                     

private void btnDownActionPerformed(java.awt.event.ActionEvent evt) {                                        
if(Max>0)
{
    Max--;
    String strI = String.valueOf(Max);
    lblDesiredTemp.setText(strI);
    setGasBoilerStatus();
}
}                                       

private void formWindowActivated(java.awt.event.WindowEvent evt) {                                     
systemInitial();

tempUp = new temperatureUp();
tempDown = new temperatureDown();

tempUp.start();
tempDown.start();
}                                    

private synchronized void increaseTemeture() throws InterruptedException
{
while (!getBoilerStatus()) 
    wait();

if(Max>Current)
{
    Thread.sleep(4000);
    Current ++;
}

setGasBoilerStatus();
}

private synchronized void decreaseTemeture() throws InterruptedException
{
while(getBoilerStatus())    wait();

Thread.sleep(4000);
if(Current == 0 )
    return;

Current --;

setGasBoilerStatus();
}

private void systemInitial()
{
isGasOn = false;
Max = Current = 0;
}

class temperatureUp extends Thread 
{
@Override
public void run()
{
while(true)
{
    try
    {
        increaseTemeture();                    
    }
    catch(Exception ex)
    {
        StringWriter w = new StringWriter();
        ex.printStackTrace(new PrintWriter(w));
        txtLog.setText(w + "\n" + txtLog.getText());
    }
}
}
};

class temperatureDown extends Thread
{
@Override
public void run() 
{
    while(true)
    {
        try
        {
            decreaseTemeture();                    
        }
        catch(Exception ex)
        {
            StringWriter w = new StringWriter();
            ex.printStackTrace(new PrintWriter(w));
            txtLog.setText(w + "\n" + txtLog.getText());
        }
    }
}
};` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:12:27.090

*   不要`invokeLater()`用于启动/管理/停止`Background task` `setGasBoilerStatus(); ???`，你有问题`Concurency in Swing`

*   `SwingWorker`没有指定重复运行长任务，`Runnable#Thread`而是使用

*   如果您的任务很简单并且您只想运行一次此任务（从 JButtons 单击）然后使用`SwingWorker`

*   基本上可以`Event Dispatch Thread`从您的代码中调用，需要使用`invokeLater()`但仅用于更新 Swing JComponents，例如代码行`txtLog.setText(w + "\n" + txtLog.getText());`应包含在`invokeLater()`,

*   因为`setText()`是声明的，因为`Thread Safe`我看到了很多不正确的问题

*   `txtLog.setText(w + "\n" + txtLog.getText());`在即将`JTextArea`使用的情况下，`append()`而不是`setText(whatever + getText())`

*   为了更快地发布[SSCCE](http://sscce.org/)演示问题以获得更好的帮助，也许还有另一个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:52:10.750

发生这种情况是因为您没有正确使用 invokeLater 。看看这里：[Java AWT 线程](https://stackoverflow.com/questions/11572726/java-awt-threads/11572932#11572932)

# java - 在 Java 小程序中使对象移动平滑

> ID：11648911
> 
> 赞同：0
> 
> 时间：2012-07-25T11:41:25.357
> 
> 标签：java

嗨朋友们，我正在尝试编写一个简单的程序，该程序将平滑地向右、向左、向上和向下移动一个小方块。

实际上，正方形确实会在四个方向上移动，但是在尝试改变正方形的方向时会有明显的延迟。我计划最终编写一个类似于“砖块”游戏的小游戏，但为了做到这一点，我的对象必须平稳移动。有人可以就如何实现这一目标给我一些建议吗？

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseListener;

public class FutureGame extends Applet implements KeyListener{

int deltax; 
int deltay;

public void init(){

    deltax = 0;
    deltay = 0;
    this.addKeyListener(this);
}

@Override
public void keyPressed(KeyEvent ke) {

    if(ke.getKeyCode() == ke.VK_RIGHT){
        deltax = deltax +10;
    }

    if(ke.getKeyCode() == ke.VK_LEFT){
        deltax = deltax - 10;
    }

    if(ke.getKeyCode() == ke.VK_UP){
        deltay = deltay - 10;
    }

    if(ke.getKeyCode() == ke.VK_DOWN){
        deltay = deltay +10;
    }
    this.repaint();
}
@Override
public void keyReleased(KeyEvent arg0) {
    // TODO Auto-generated method stub

}
@Override
public void keyTyped(KeyEvent arg0) {
    // TODO Auto-generated method stub

}

public void paint(Graphics g){

    g.drawRect(deltax, deltay, 10, 10);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:44:34.063

如果您的线程（游戏的主要计算）睡眠/等待时间非常短，那么您的按键侦听器无法在这么短的时间内捕捉到您的击键。使这些线程等待时间更长，然后重试。我的意思是 try-catch 块中的东西。

你是直接画的。使用缓冲/双缓冲。

```
Changing the buffer is much more faster than changing the contents of screen. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:48:05.230

首先使用 paintComponent() 作为绘图方法，然后将 Graphics g 转换为 Graphics2D - 使其更加“Swingy”，最后但并非最不重要的是遵循 java2s.com 站点[java2s.com - Advanced Graphics - Smooth Moves中的代码](http://www.java2s.com/Code/Java/Advanced-Graphics/SmoothMoves.htm)

# jquery - jquery效果在phonegap iphone中不流畅

> ID：11648919
> 
> 赞同：1
> 
> 时间：2012-07-25T11:41:58.150
> 
> 标签：jquery, cordova

iphone上phonegap应用中jquery效果不流畅

我正在使用简单的脚本进行显示隐藏，但页面正在闪烁。

```
/* enter code here */
$( '#signupbtn1' ).live('click',function(event)
    {
       $('#header').slideUp('slow');
       $('#content').slideDown('slow');
}); 
```

知道为什么它不能正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:13:24.193

你试过[jquery.animte-enhanced](http://playground.benbarnett.net/jquery-animate-enhanced/)插件吗？它通过检测浏览器对 CSS3 动画的支持来加速动画。在 iOS 上，使用`translate3d`动画某些元素非常快，因为它受益于 GPU 加速。以前写过一些只依赖 CSS3 动画的动画库，在 iOS 上体验非常棒。但安卓会让你发疯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:04:37.460

类似的事情以前也发生在我身上。我试图为右侧的最后一个菜单项设置动画（像 Apple 这样的搜索框），一切都在闪烁。我所做的是更改`float:right`特定`position:absolute;right:0;`项目的 css 并添加`position:relative;`到动画的容器中。

希望这个技巧也对你有用！只需编辑定位以满足您的需求，但如果您想让某些东西正确滑入/滑出并保持在同一个地方，定位应该更能解决问题。

jQuery 建议使用 .on 而不是 live，因为 live 已被弃用，并且事件委托现在以非常不同的方式处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-15T12:15:35.943

我知道这个回复是在你最初提出这个问题多年之后，但是你的问题是在谷歌上寻求帮助时列出的少数问题之一。

所以这里是来自 Chrissilich [Blog 博客](http://chrissilich.com/blog/)的解决方案，解决方案是[修复断断续续的动画的解决方案](http://chrissilich.com/blog/fix-css-animation-slow-or-choppy-in-mobile-browsers/)

基本上，他建议将以下内容添加`-webkit-transform: translateZ(0);`到您尝试制作动画的元素中。

它对我很有效，就像对其他许多人一样。

# magento - 简单相关产品的 magento 显示“注册以在此产品有货时收到通知”链接

> ID：11648920
> 
> 赞同：4
> 
> 时间：2012-07-25T11:42:00.990
> 
> 标签：magento

我们如何为可配置产品的关联产品显示“注册以在该产品有货时收到通知”链接。

比如说，我们有一件 T 恤（一种可配置的产品），我们以 3 种尺寸出售它——中号、大号和超大号（简单的相关产品）。

当大尺寸缺货时，我们如何让用户订阅它以在它有货时通知它。

请注意，我已经在管理员中设置了此设置：

```
System > Configuration > Catalog > Allow Alert When Product Comes Back in Stock - Yes 
```

我注意到此警报的 url 是这样的（它是针对我商店中的一种简单产品的）：

```
http://localhost/mystore/index.php/productalert/add/stock/product_id/1/[some key]/[some key],,/ 
```

有什么方法可以直接调用这个 url，传递我们相关产品的产品 ID 吗？如果是这样，那么 URL 末尾的那些键呢？

请指导。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T07:57:49.820

I added this link beside the out-of-stock associated product:

```
http://localhost/mysite/index.php/productalert/add/stock/product_id/[associated_product_id]/uenc/[any_key]/ 
```

For e.g.

```
http://localhost/mysite/index.php/productalert/add/stock/product_id/17/uenc/MTM0MzcyMDk0Mw==/ 
```

It does my job.

Only thing is, after successfully adding the alert record, it redirects to home page, instead of same page as in normal case.

This is due to [any_key], if we could somehow encrypt current page url [the any_key] just like magento does, we can have it redirect to same page also, after successful saving of alert record. Any ideas?

## Thanks

Ok I got it finally!

The uenc key [any_key] is actually base64 encoding of current url.

So with the help of [https://github.com/carlo/jquery-base64](https://github.com/carlo/jquery-base64), I did:

```
var encodedUrl = $.base64.encode(window.location);

var redirectTo = 'http://localhost/mysite/index.php/productalert/add/stock/product_id/[associated_product_id]/uenc/' + encodedUrl + '/'; 
```

Hope this helps!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-17T13:40:10.193

Magento 获取网址的方法是：

`Mage::helper('productalert')->setProduct($_product)->getSaveUrl('stock')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-10T09:13:48.397

Magento 已经使用了从管理面板设置缺货的功能，不幸的是它仅限于某些情况，因此我们无法从管理面板进行设置，无论哪种方式你都可以在上面提到的代码中进行设置，但它是一项手动任务，不能用链接一次又一次地完成。所以我认为最好使用现成的扩展，以防您有特定要求为客户设置产品库存警报功能并且他们可以订阅它。这是 Magento 2 管理良好的扩展，它可以帮助您设置产品警报和注册/订阅功能以及更多管理员可管理的功能。链接到 Magento 2 的缺货通知扩展 - [https://www.mconnectmedia.com/out-of-stock-alert-magento2.html](https://www.mconnectmedia.com/out-of-stock-alert-magento2.html)

# silverlight - Silverlight MediaElement 灰度播放

> ID：11648927
> 
> 赞同：1
> 
> 时间：2012-07-25T11:42:44.030
> 
> 标签：silverlight, mediaelement, grayscale

是否可以将彩色视频播放为灰度？理想情况下，如果我可以立即在两种模式之间来回切换，那就太好了，就像在渲染引擎上应用过滤器一样。

对此有什么想法和经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:58:23.570

我相信这可能在 Silverlight 3 及更高版本中使用像素着色器功能更多信息可以在这里找到[http://blogs.msdn.com/b/synergist/archive/2009/05/14/alpha-video-with- silverlight-3-pixel-shaders.aspx](http://blogs.msdn.com/b/synergist/archive/2009/05/14/alpha-video-with-silverlight-3-pixel-shaders.aspx)和这里[http://forums.silverlight.net/t/135717.aspx/1](http://forums.silverlight.net/t/135717.aspx/1)

# knockout.js - 我怎样才能打破或继续淘汰赛的arrayforeach？

> ID：11648936
> 
> 赞同：19
> 
> 时间：2012-07-25T11:43:03.253
> 
> 标签：knockout.js

这是示例代码。我想打破（或继续）淘汰赛的 ko.util.arrayForEach。

```
ko.utils.arrayForEach(items, function (item) {
    if (...) break;
    if (...) continue;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T15:58:56.677

看起来你不能。这是arrayForEach的来源（来自KO GitHub页面上的[utils.js ）](https://github.com/SteveSanderson/knockout/blob/master/src/utils.js)

```
arrayForEach: function (array, action) {
    for (var i = 0, j = array.length; i < j; i++)
        action(array[i]);
}, 
```

**然而**， Knockout 提供`ko.utils.arrayFirst`了将针对我们数组中的每个项目执行一个函数并返回函数计算结果为 true 的第一个项目。与filteredItems 计算的observable 类似，我们可以创建一个从搜索字段返回第一个匹配项：

```
//identify the first matching item by name
viewModel.firstMatch = ko.computed(function() {
    var search = this.search().toLowerCase();
    if (!search) {
        return null;
    } else {
        return ko.utils.arrayFirst(this.filteredItems(), function(item) {
            return ko.utils.stringStartsWith(item.name().toLowerCase(), search);
        });
    }
}, viewModel); 
```

更多细节可以在这里找到[http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T11:48:09.690

似乎`ko.utils.arrayFirst`或`ko.utils.arrayFilter`将比您当前的方法更好地满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-16T15:09:46.080

只需使用**`ko.utils.arrayFirst`**它将在 and 上执行一个函数，`array`并在评估为 true时立即**返回/中断。**`function`

这是我最近使用的真实**示例**

```
this.updateElement = function (model) {
    ko.utils.arrayFirst(that.list(), function (m) {
        if (model.formId() === m.formId()) {
            m.description(model.description());
            m.status(model.status());
            m.type(model.type());
        }
    });
} 
```

更多细节可以在这里找到[http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)

# android - 带有标签的 Android 操作栏

> ID：11648938
> 
> 赞同：0
> 
> 时间：2012-07-25T11:43:13.540
> 
> 标签：android, tabs, android-actionbar, actionbarsherlock

我对 Android 和 Java 编程非常陌生。我想要做的是让 Actionbar 带有几个选项卡（最终 11 个）。我已经设法安装了 ActionBar Sherlock，但后来我被困在向操作栏添加标签的问题上。从我读到的内容看来，我还需要为每个选项卡添加单独的片段。是否有一个简单的解决方案如何使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:15:15.217

您不需要在操作栏中的每个选项卡都有一个片段。它应该就像在 xml 中定义您的菜单一样简单，然后在您的活动中使用您的菜单初始化操作栏。

例如你的 menu.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/my_menu_item"
          android:showAsAction="always|withText"
          android:title="Tab name here"/>
</menu> 
```

然后在您的活动中覆盖 onCreateOptionsMenu：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.my_menu, menu);
    return super.onCreateOptionsMenu(menu);
} 
```

然后，您需要覆盖 onOptionItemSelected 以响应按下选项卡时的响应：

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.my_menu_item:
                    //do something
        }
        return super.onOptionsItemSelected(item);
    } 
```

# ruby-on-rails - rhomobile 应用程序中的验证

> ID：11648940
> 
> 赞同：0
> 
> 时间：2012-07-25T11:43:31.953
> 
> 标签：ruby-on-rails, ruby, validation, rhomobile, rhodes

如何在 rhomobile 应用程序中执行验证；该模型不接受验证码。我已经执行了以下步骤：

1.  将 rh-validatable 和 json 添加到您的 build.yml 扩展中：

    *   json
    *   rh 可验证
2.  安装：

    *   cd rhodes_project_directory
    *   git clone git://github.com/artemk/rh-validatable.git extensions/rh-validatable
3.  在 application.rb 中要求“可验证”

4.  在模型中包含“可验证”

5.  将验证代码放入模型中，例如 validates_presence_of :name

由于我在模拟器中运行应用程序，因此我仍然收到错误并且无法找出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:53:05.873

您可以使用元数据的验证功能，例如：

:validation => { :regexp = "^.+$", :validators = [:required, :number, :currency, :email, :phone], :min_len = 0, :max_len = 100, :min_value = 10, :max_value = 1000 }

链接在这里：

[元数据验证](http://docs.rhomobile.com/rhosync/metadata#validation)

# git - 带有日期的 git ls 文件？

> ID：11648942
> 
> 赞同：7
> 
> 时间：2012-07-25T11:43:45.480
> 
> 标签：git

在 GitHub 上，每个文件夹页面都有这个不错的功能，它列出了文件名以及最后一次提交到该文件的时间。这类似于`ls -l`命令。

有没有办法从命令行模仿这种行为？就像是

```
git ls-files -l 
```

基于[**sjas 的回答**](https://stackoverflow.com/a/11649311)，这对我有用

```
ls | while read aa
do
  git log -1 --format="%ai  $aa" "$aa"
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:06:50.513

```
$ for a in $(ls); do git log --pretty=format:"%h%x09%an%x09%ad%x09$a" -1 -- "$a"; done
e76b    sjas    Tue Jul 24 21:55:20 2012 +0200  bashscripts/
68af    sjas    Wed Jul 25 13:49:26 2012 +0200  links
83c9    sjas    Tue Jul 24 15:21:09 2012 +0200  rndm/
aedf    sjas    Tue Jul 24 15:14:12 2012 +0200  temp/
a643    sjas    Tue Jul 24 21:48:19 2012 +0200  tips/
f71d    sjas    Tue Jul 24 19:26:20 2012 +0200  todo 
```

取自[https://stackoverflow.com/a/469238/805284](https://stackoverflow.com/a/469238/805284)

万一这看起来很奇怪：
我的 SHA1 通过`core.abbrev=4`在 my `.gitconfig`.

但也许你在这里有用：

```
$ for a in $(ls); do git log --pretty=format:"%h%x09$a%x09%s" -1 -- "$a"; done
e76b    bashscripts/   added pushd/popd/dirs shortcuts!!!
68af    links          fastcommit
83c9    rndm/          further cleanup
aedf    temp/          tempcommit
a643    tips/          added disk usage script and pushd/popd annotation
f71d    todo           fastcommit 
```

# android - 如何动态创建一个按钮并为其分配在styles.xml中定义的样式？

> ID：11648945
> 
> 赞同：6
> 
> 时间：2012-07-25T11:43:48.150
> 
> 标签：android, user-interface

我需要动态创建一个样式按钮。我想也许我应该这样做：

```
XmlPullParser parser = m_context.getResources().getXml(R.style.Button_Plain);
buttonStyle = Xml.asAttributeSet(parser);
Button btn = new Button (m_context, buttonStyle); 
```

但`getXml`抛出异常“请求资源失败，因为它很复杂”。有什么简单的方法可以做我需要的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:03:37.453

使用以下构造函数创建按钮对象：

[http://developer.android.com/reference/android/widget/Button.html#Button(android.content.Context](http://developer.android.com/reference/android/widget/Button.html#Button(android.content.Context) , android.util.AttributeSet, int)

```
public Button (Context context, AttributeSet attrs, int defStyle) 
```

并传递以下参数：

```
Button btn = new Button (m_context, null, R.style.Button_Plain); 
```

无需使用 XmlPullParser。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T07:24:40.797

它基本上是这样的：

`Button button = new Button(ContextActivity, null, R.style.whateverStyleYouHad);`

# iphone - 如何将 Char * 转换为十六进制值

> ID：11648947
> 
> 赞同：0
> 
> 时间：2012-07-25T11:43:54.860
> 
> 标签：iphone, objective-c, char, hex

我有一个需要转换为十六进制值的 char 数组

```
char* arrrr =[self mountLVparams:NULL :c :code_ward_arr];  

int size =strlen(arrrr); 
```

我正在尝试这个，但这没有发生

```
 NSData* data = [NSData dataWithBytes:arrrr length:sizeof(sizeof(unsigned char)*size)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:17:02.577

您不会将值“转换”为十六进制。十六进制只是计数或显示相同数字的不同方式。

```
if (0xFF==255)
{
  NSLog(@"255 equals 0xFF");
} 
```

现在查看下面的代码，它将您的字节数组转换为 int，然后显示并将 int 格式化为十六进制字符串。

```
-(void) convertData: (unsigned char*) data 
{
   int numBytes = sizeof(int);

   //convert array of bytes to NSData*
   NSData* binaryData = [[NSData alloc] initWithBytes: (void*) data length: numBytes];

   //read value of number stored in data, presuming it is an integer
   int number =  *((int*) data);

   //format number as a hex string
   NSString* hexString = [NSString stringWithFormat:@"%X",number];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:09:55.187

尝试这个：

```
NSString *inp = [NSString stringWithString:@"MmMmMm"];
char star = [inp characterAtIndex:3];
NSString *string = [NSString stringWithFormat:@"char:%c andHex:%x",[inp characterAtIndex:3],star];
NSLog(@"%@",string); 
```

在输出中查看是`"%@"`作为常规字符串。在字符串中，您将收到 char 的十六进制值。

```
char:m andHex:6d 
```

使用数组，您必须循环执行

# java - 不同类型的一个字段的Javabeans约定？

> ID：11648951
> 
> 赞同：-1
> 
> 时间：2012-07-25T11:43:59.593
> 
> 标签：java, spring, polymorphism, javabeans, setter

我可以`setSource()`为两种不同的参数类型（即`setSource(InputStream)`和）设置一个具有两个版本的设置器`setSource(TargetDataLine)`吗？

在内部，我持有`Object`基于 RTTI 的字段和调度处理中的值，但我想知道像 Spring 这样的 bean-realted 库是否会优雅地接受这样的设置器？即我能否将不同类型的值放入一个`source`bean 字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:47:37.990

这似乎不太对劲。返回什么`getSource()`？一个`Object`？如果是这样，我建议您`setSource()`接受`Object`.

显然这看起来太“通用”了，我想知道这个问题是否表明您的建模不正确，并且您需要两个专门的子类来处理不同的源类型。

如果做不到这一点，为什么不明确并拥有`setStreamSource()`/`setTargetDataLineSource()`具有正确的类型，并强制设置一个或另一个，但不能同时设置（但我仍然认为专业化是要走的路）。

# java - Linux 中的运行时执行问题

> ID：11648958
> 
> 赞同：0
> 
> 时间：2012-07-25T11:44:23.650
> 
> 标签：java, linux, terminal, runtime.exec

在我正在编写的应用程序中，我正在使用 Runtime.exec(...) 启动另一个应用程序（可运行的 JAR）。一切都在 Windows 中成功启动，但 Linux（特别是 CentOS 的某些安装 - 在 Ubuntu 中工作）一直给我一些问题。出于某种原因，辅助应用程序成功启动的唯一方法是我通过终端执行第一个应用程序。所有行为都按预期工作。但是，如果我通过双击第一个应用程序的图标（没有打开终端）启动第一个应用程序，启动第二个应用程序的按钮似乎什么也不做。我没有得到任何异常或错误输出 - 只是我的进度条闪烁，说它正在启动，然后什么也没有。我可以通过 jconsole 确认第二个应用程序的进程永远不会启动。

我看过关于 exec 方法的陷阱的常用链接文章（[http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)），但一直没能解决这个问题我在那里找到的任何东西都有问题。我实际上正在读取第二个进程的输出和错误流，因为我在它成功运行时看到了所有输出（在通过终端命令启动第一个应用程序之后）。不太了解 Linux 的更深层次的工作原理，我认为这听起来可能是输出流的权限问题之类的，但我不确定。

如果它有助于诊断问题，我正在使用命令： `rt.exec(new String[]{"\bin\bash", "-c", "java -jar myjarfile.jar myArg1 myArg2 ..."});` 由于这有效（取决于应用程序的启动方式），我不太担心这段代码有什么问题......

有人有什么建议吗？提前致谢！

编辑：解决方案是将目录修复为我试图运行的 JAR。通过 GUI 启动时，`user.dir`它指向包含我的应用程序的文件夹的父目录。由于我使用的是 Eclipse RCP，因此我的解决方案是 `String currDirPath = Platform.getInstallLocation().getURL().toString();`改用。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:17:09.963

由于您只是使用 jar 文件名 - myjarfile.jar - 而不是它的完整路径，这取决于当前的工作目录，可能会或可能不会找到 jar。尝试更改您的 exec 命令以使用 jar 的完整路径。您可以通过使用 rt.exec() 将“pwd”的输出写入文本文件来进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:03:07.553

代替

```
 rt.exec(new String[]{"\bin\bash", "-c", "java -jar myjarfile.jar myArg1 myArg2 ..."}); 
```

采用

```
rt.exec(new String[]{"\bin\bash", "-c", "/***path to java***/java -jar myjarfile.jar myArg1 myArg2 ..."}); 
```

# r - sst数据矩阵序列的循环或函数

> ID：11648959
> 
> 赞同：1
> 
> 时间：2012-07-25T11:44:23.733
> 
> 标签：r

我一直在寻找一种方法来按月从一系列海面温度 (sst) 矩阵中选择 R 范围内的值的频率。这些数据排列为 (sst, 80*40*172)，即北大西洋的 (sst, longitude,latitude,month)。我对这些频率很感兴趣，因为我使用它们来计算每个月 sst 范围内的表面积，例如 4°C 和 12°C 等温线之间。我经常使用 R 对时间序列和空间数据进行统计分析，但我不习惯编程，所以我的方法可能不是最有效的。我已经成功地提取了一个月内所有纬度的 sst 值 > 12 °C 的频率：

我来自 IRI/LDEO 气候研究网站的数据

```
dat <- read.table("c:/Temp/[Y+X]datatable.tsv", header=FALSE, sep="\t") 
```

第一个月的 5x5 样本矩阵

```
 Nov 1981    30.5000 31.5000 32.5000 33.5000
    9.50000     21.7906 21.9431 22.1324 22.1662
    8.50000     21.7267 21.8573 21.9981 21.8757
    7.50000     21.6644 21.7781 21.8960 21.7393
    6.50000     21.5989 21.7025 21.8044 21.6304 
```

我基本上跳过了经度，行标签我也打算在后面添加日期。首先，我将第一个月提取为矩阵 (t)，并应用两个自定义函数表面区域的纬度带 SA 和所有纬度带的表面积为月 MSA。

```
ro=2:81
co=2:41
t <- as.matrix(dat[ro,co]) 
```

然后

```
SA <- function (lat,tmu){
    l <- c(t[,lat]>=tmu,0)
    la <- as.data.frame(l)
    x  <- la[,1] 
    n  <- length(x)
    sau <- array(0,n)
    x. <- lat
    for (i in 1:n) sau[i] <- (x[i]*111.320)*(cos(x.*(3.1415/180))*111.320)
    s <- as.matrix(sum(sau))
}
MSA <- function(tmu){
    m <-1:40
    su <- array(0,0)
    for (i in 1:40) su[i] <-SA(m[i],tmu)
    ms <- as.data.frame(su)
    sa <- as.data.frame(colSums (ms))
    return(sa)
} 
```

函数 SA 和 MSA 或表面积 一个纬度 (lat) 条带 SA 的表面和月份 SAM 的所有条带的面积，用于温度上限 (tmu)。

来自函数 SA 的矩阵 (s) 对于纬度 (lat)（比如在 30°N）具有 sst> tmu（比如 12 °C）的表面积，来自函数 SAM 的矩阵 (sa) 具有所有纬度的总和（从30°N 到 70°N）。这完成了一个月的工作，我可以重复这些功能 12 次以获得年份或 16 年的 172 次这样：

我定义了一个起始纬度 (lat)，然后是 81 个经度单元 (st) 的步骤，以提取下一个和所需的温度；

```
lat= 30.5 
st=81 
t=12 
```

然后计算每个月的总表面积；

```
SA1 <- {
    i=0*st 
    t <- as.matrix(dat[ro+i,co])
    SA(lat,t)
    MSA(12)
}

SA2 <- {
    i=1*st 
    t <- as.matrix(dat[ro+i,co])
    SA(30.5,t)
    MSA(12)
} 
```

我的问题是是否有可能创建一个循环或一个函数来遍历所有月份，即 172 次，因此跳过重复 SA1、SA2...SA172。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:33:19.470

如果我理解您的问题，您的代码将简化为

```
#create some dummy data
lat <- 30:33
lon <- 6:9
sst <- array(rnorm(length(lat) * length(lon) * 12, mean = 21, sd = 4), 
    dim = c(length(lat), length(lon), 12), dimnames = list(lat, lon, 1:12))
#the actual code
SA <- function (test, tmu){
  colSums(test >= tmu) * 111.320 ^ 2 * 
     cos(as.numeric(rownames(test)) * (pi/180))
}
apply(sst, 3, SA, tmu = 21) 
```

如果这不正确，请让您的问题更清楚，并提供可[重现](https://github.com/hadley/devtools/wiki/Reproducibility)的输入和输出数据集。

# java - 在java中检测查询的正则表达式

> ID：11648960
> 
> 赞同：0
> 
> 时间：2012-07-25T11:44:25.590
> 
> 标签：java, regex

我正在尝试使用正则表达式搜索字符串。例如：这是我的示例字符串

```
 **if (c == 0) {
                count = 0;
                du.insert(ipAddress, c);
            } else {
                count = c;
            }
            getDate();
            String query1 = "select * from loginmaster where  username = '" + username + "' and password = '" + password + "' ;";
            //out.println(query1);
            //out.println(request.getParameter("Group1"));
            session.setAttribute("group", request.getParameter("Group1"));
            if (count < 3) {
                if (request.getParameter("Group1").equals("With")) {
                    LoginQuery q = new LoginQuery();
                    checked = q.Checker(query1);
                    if (checked == false) {
                        connection.getConnection();
                        connection.getDML("insert into attack values('"+ipAddress+"','"+date+"','Attack Detected')");
                    }
                }** 
```

我正在尝试使用正则表达式在此字符串中查找查询

```
String regExp = "\b(ALTER|CREATE|DELETE|DROP|EXEC(UTE){0,1}|INSERT( +INTO){0,1}|MERGE|SELECT|UPDATE|UNION( +ALL){0,1})\b"; 
```

和

```
String regExp = "(;|\\s)(exec|execute|select|insert|update|delete|create|alter|drop|rename|truncate|backup|restore)\\s"; 
```

但我没有得到任何输出或错误。

剩下的代码是：

```
 Pattern p = Pattern.compile(regExp, Pattern.CASE_INSENSITIVE);                
                while ((line = reader.readLine()) != null) {
                    Matcher m = p.matcher(line);
                    if (m.matches()) {
                        JOptionPane.showMessageDialog(this, "innnnnnnnnnn");
                        System.err.println(m.group(1));
                    }
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:04:52.233

由于**case mismatch** ，您的正则表达式将与输入字符串不匹配。

您的正则表达式以大写形式编写，但您的输入字符串包含小写匹配项。因此，要么使正则表达式**不区分大小写**，要么将其转换为**小写**。

顺便说一句，您的正则表达式无法分离查询`insert into attack ...`和方法：`du.insert(ipAddress, c);`

# php - 向网站用户添加 facebook/twitter 登录选项

> ID：11648961
> 
> 赞同：0
> 
> 时间：2012-07-25T11:44:28.693
> 
> 标签：php, mysql, facebook, twitter, login

用户详细信息保存在名为 user 的数据库表中，其中我有用户名和密码等字段。现在，我需要为用户提供使用 facebook 和 twitter 登录的额外选项。我知道如何处理这些身份验证，但我想不到的是 -

如何识别哪个FB用户账号与哪个本地用户账号相关？我该怎么做呢？

我不是在寻找代码，而是在寻找过程。我脑海中的过程有点如下 - 用户使用我网站的用户名和密码登录。然后他们可以添加 FB 或 Twitter 作为外部身份验证，当他们这样做时，我要求他们登录到 FB。成功登录 FB 后，我在 users 表中保存了一些唯一的 fb id（我不知道哪个尚未检查）。下次他们可以使用 FB 登录，因为我可以识别他们属于哪个本地记录。你会这样做吗？

你有什么建议？提前感谢您的投入。

PS - 我将添加多个网络（如linkedin 和其他），但目前仅限fb 和twitter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:54:32.180

一种方法是：@Registration

```
1\. Allow the user to register with Facebook, Twitter
2\. Once the process has completed, redirect the user to create a username on your site
3\. Using the email obtained from Facebook, Twitter, and username from local form, insert all this information into a db table.
4\. This will allow referencing between FB, TW, and local usernames 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:30:43.320

创建一个相互关联的表，其中包含用户 ID、Facebook 或 twitter 用户 ID、身份验证类型（facebook 或 twitter）。

# eclipse - Xtext 自动建议值

> ID：11648963
> 
> 赞同：0
> 
> 时间：2012-07-25T11:44:30.333
> 
> 标签：eclipse, dsl, xtext, xtend

我正在研究 Xtext 项目。我的变量声明需要功能。假设我正在使用我的 DSL，如下所示

```
LifeEra:Teenage
Age:(while cursor is here) 
```

我想知道自从 LifeEra 进入 Teenage 以来，我是否可以在这里弹出并建议 16。无论如何我可以做到这一点。

希望我的问题很清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T08:35:14.740

您确实可以为您的 DSL 自定义内容辅助。请参阅[http://www.eclipse.org/Xtext/documentation.html#contentAssist](http://www.eclipse.org/Xtext/documentation.html#contentAssist)和[http://zarnekow.blogspot.de/2011/06/customizing-content-assist-with-xtext.html](http://zarnekow.blogspot.de/2011/06/customizing-content-assist-with-xtext.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:54:14.357

据我了解，仅使用 Xtext 不可能从动态值完成代码。但是为您自己的 DSL 开发一个 Eclipse 插件可能会有所帮助。我找不到其他方法。

# php - 如何使用 php 读取压缩 URL 的内容

> ID：11648964
> 
> 赞同：1
> 
> 时间：2012-07-25T11:44:32.000
> 
> 标签：php, xml, parsing

我正在为我的一个项目使用 php。我有一个 URl，其中包含特定站点的 XML 集。URL 的格式为 www.sitefeed.com/somekey&&gZipCompress=yes。我想在不将其下载到我的服务器的情况下读取此文件的内容。

我尝试了 compress.zlib: 在 URL 前面，但它返回了一个空数组。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:00:08.967

如果你有你的 php 变量“allow_url_fopen”，你可以使用：

```
$lrc = gzopen($the_link, "r");
$text ="";
while(!gzeof($lrc)){
    $text .= gzread($lrc, 1024);
}
gzclose($lrc); 
```

如果没有，您可以使用 file_get_contents，甚至 curl 。

# string - 如何将字符串附加到数据集中的其他字符串？

> ID：11648968
> 
> 赞同：14
> 
> 时间：2012-07-25T11:44:43.057
> 
> 标签：string, powershell, append

我想用自定义字符串在数据集中附加几个字符串。

**例子**

数据集内容：

```
Test1
Test2
Test3 
```

附加后的结果：

```
Test1.com
Test2.com
Test3.com 
```

我是否必须使用正则表达式解析到每个 Test[n] 的末尾才能附加自定义字符串（`.com`）？有没有人有一个确切描述如何做到这一点的例子？

我正在从 SQL 表中读取数据并将值写入数据集，该数据集通过以下方式导出到 CSV：

```
$DataSet.Tables[0] | ConvertTO-Csv -Delimiter ',' -NotypeInformation |`% { $_ -replace '"','' } |  out-file  $outfile -Encoding "unicode" 
```

DataSet 包含字符串，例如：

```
Banana01
Banana02
Apple01
Cherry01
Cherry02
Cherry03 
```

我想做的事情是`.com`只附加到`Cherry01`,`Cherry02`和`Cherry03`, 并在附加后`.com`, 将其导出为 CSV 文件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-25T12:22:46.927

有很多方法。这里有几个：

```
# Using string concatenation
'Test1','Test2','Test3' | Foreach-Object{ $_ + '.com' }

# Using string expansion
'Test1','Test2','Test3' | Foreach-Object{ "$_.com" }

# Using string format
'Test1','Test2','Test3' | Foreach-Object{ "{0}{1}" -f $_,'.com' } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T12:00:24.657

你可以使用这样的东西：

示例 1

```
$t = "test"
$t = $t + ".com" 
```

示例 2

```
$test = @("test1","test2")

$test | ForEach-Object {
$t = $_ + ".com"
Write-Host $t} 
```

使用您添加的代码，我做到了这一点。我没有数据库来测试它，所以我手动创建了数据集，所以您可能只需将代码中的**$DataSet[0]更改为****$DataSet.Tables[0]**。

```
$DataSet[0] | ConvertTO-Csv -Delimiter ',' -NotypeInformation  | Foreach-Object{$T=$_
IF($T -match "(Cherry\d\d)"){$T = $T -replace "(Cherry\d\d)(.+)",'$1.com$2'};$T } |  out-file  $outfile -Encoding "unicode" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:38:52.527

`$array | %{if($_ -match "^Cherry\d\d"){$_ += ".com"};$_}`

# jboss7.x - 在 JBoss 中使用休眠验证器 JodaTime bean 验证约束

> ID：11648977
> 
> 赞同：5
> 
> 时间：2012-07-25T11:45:03.327
> 
> 标签：jboss7.x, jodatime, hibernate-validator

我们有一个使用 Joda DateTime 库的企业应用程序。该应用程序被部署到一个 JBoss 7.2.0 Alpha1 容器中。我们领域模型中的某些类在 DateTime 类型的字段上具有 @Past 注释。为了验证这些约束，我们想使用 hibernate-validator 提供的约束验证器。因此，我们在我们的 ear 文件的 MANIFEST.MF 中添加了一个依赖 'org.hibernate.validator'。我们使用的是 Joda 库的 2.0 版。因此我们把joda-time-2.0.jar文件打包到了我们的耳朵里。我们没有使用作为 JBoss 7 模块提供的 1.6.2 版本

验证具有 DateTime 字段的对象时，会引发以下异常：

```
10:51:41,140 ERROR [org.acme.GlobalExceptionHandler] (EJB default - 10) Exception caught by global exception handler: javax.validation.UnexpectedTypeException: No validator could be found for type: org.joda.time.DateTime
at org.hibernate.validator.engine.ConstraintTree.verifyResolveWasUnique(ConstraintTree.java:383) [hibernate-validator-4.2.0.Final.jar:4.2.0.Final]
at org.hibernate.validator.engine.ConstraintTree.findMatchingValidatorClass(ConstraintTree.java:364) [hibernate-validator-4.2.0.Final.jar:4.2.0.Final]
at org.hibernate.validator.engine.ConstraintTree.getInitializedValidator(ConstraintTree.java:313) [hibernate-validator-4.2.0.Final.jar:4.2.0.Final]
at org.hibernate.validator.engine.ConstraintTree.validateConstraints(ConstraintTree.java:144) [hibernate-validator-4.2.0.Final.jar:4.2.0.Final]
at org.hibernate.validator.engine.ConstraintTree.validateConstraints(ConstraintTree.java:117) [hibernate-validator-4.2.0.Final.jar:4.2.0.Final]
at org.hibernate.validator.metadata.MetaConstraint.validateConstraint(MetaConstraint.java:84) [hibernate-validator-4.2.0.Final.jar:4.2.0.Final]
at org.hibernate.validator.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:452) [hibernate-validator-4.2.0.Final.jar:4.2.0.Final] 
```

经过一些调试后，我们检测到在“ConstraintTree.findSuitableValidatorTypes”中对“TypeUtils.isAssignable(validatorType, type)”的调用失败，因为可用的验证器类型取自 JBoss 附带的 Joda 库，而不是 JBoss 附带的 Joda 库。打包在我们的ear文件中。

我想我们在类加载方面做错了。任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:03:53.440

您是否尝试将*jboss-deployment-structure.xml*添加到您的 ear 文件中？这样你应该能够排除 Joda 时间模块：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <deployment>
        <exclusions>
            <module name="org.joda.time"/>
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

另请参阅[https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T16:29:07.450

按照 Hardy 的想法，我解决了在应用程序的*WEB-INF文件夹中创建**jboss-deployment-structure.xml*的问题，其中包含以下内容：

 *```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <deployment>
        <exclusions>
            <module name="org.hibernate.validator" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

而不是排除*org.joda.time*我排除了*org.hibernate.validator*。我希望这也适用于你。*

# java - 将环境变量解析为 JNLP 文件中的参数

> ID：11648979
> 
> 赞同：2
> 
> 时间：2012-07-25T11:45:19.863
> 
> 标签：java, environment-variables, jnlp, java-web-start

我想知道是否有办法在 JNLP 文件中将 Windows 环境变量作为参数传递？

我有一个 JNLP 文件，我在其中指定了一个应传递给应用程序的 main 方法的参数。如果可能的话，我希望参数采用`%USERPROFILE%/dir/file`. 但是，当我尝试这样执行时，webstart 将 userprofile 作为文字值，而不是用环境变量替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:58:30.430

系统属性的值`user.dir`应该相当于`%USERPROFILE%`一个抽象文件路径。不要将 file 指定为 JNLP 程序参数，而是按如下方式获取它：

```
File file = new File(System.getProperty("user.dir"), "dir/file"); 
```

# search - Solr StandardTokenizerFactory 保留一个字符

> ID：11648982
> 
> 赞同：1
> 
> 时间：2012-07-25T11:45:35.807
> 
> 标签：search, solr, tokenize

在使用来自 solr/lucene 的 standardtokenizer 时，我想将一个字符保留为“@”符号，并让它发挥作用。那可能吗？我一直在使用不同的标记器，似乎这不是内置的。对吗？

# ruby-on-rails - 将 url 和路径更改为对象级回形针

> ID：11648985
> 
> 赞同：0
> 
> 时间：2012-07-25T11:45:42.717
> 
> 标签：ruby-on-rails, paperclip

我有一个具有附件的多态模型。例如：

Image : 多态模型 Product 和 Customer 是两个不同的模型，使用 Image 作为多态

图像模型具有名为 :file 的附件，该附件具有 :path 和 :url。我不想为产品和客户分享 :url 和 :path 。

我需要产品和客户模型的不同 url 和路径（即）我想根据对象类型区分 url 和路径。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:55:43.350

如果您需要产品和客户的不同图像，为什么首先使用多态关系（我假设？）？如果 ProductImage 和 CustomerImage 彼此无关（因为您需要区分 url 和路径？！）那么为什么不简单地将它们设为两个完全独立的模型呢？（或者，也许，如果合适，从一些共享基础继承）

# c# - .NET https 身份验证（pingdom api）

> ID：11648988
> 
> 赞同：1
> 
> 时间：2012-07-25T11:45:52.453
> 
> 标签：c#, .net, powershell

我必须从 Pingdom 接收 API。地址是[https://api.pingdom.com](https://api.pingdom.com)

当它是 https 时，我如何在 .NET 中进行 http 获取？谷歌没有给我任何工作:(

此致

更新：：

感谢您的帮助.. 尝试使用 PowerShell：

```
$NC = New-Object System.Net.NetworkCredential("USER", "PASS")
$CC = New-Object System.Net.CredentialCache
$CC.Add("api.pingdom.com", 443, "Basic", $NC)

$webclient = [System.Net.WebRequest]::Create("https://api.pingdom.com")
$webclient.Credentials = $CC
$webclient.PreAuthenticate = $true
$webclient.Method = "POST"

$webclient.GetResponse() 
```

我收到错误：使用“0”参数调用“GetResponse”的异常：“远程服务器返回错误：（401）未经授权。”

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:52:52.137

基本上，

> [http://www.pingdom.com/services/api-documentation-rest/](http://www.pingdom.com/services/api-documentation-rest/)
> 
> 用户凭据的身份验证方法是 HTTP 基本访问身份验证（通过 HTTPS 加密）。这意味着您将在每次提出请求时提供您的凭据。不使用会话。

HTTP 基本访问身份验证在此处和 MSDN 上都有详细记录。

这个答案连同 API 文档应该让你开始走上正确的道路。

> [https://stackoverflow.com/a/1127295/64976](https://stackoverflow.com/a/1127295/64976)
> 
> 假设您使用 WebRequest，则将 CredentialCache 附加到您的请求：

```
NetworkCredential nc = new NetworkCredential("user", "password");
CredentialCache cc = new CredentialCache();
cc.Add("www.site.com", 443, "Basic", nc); 
```

`CredentialCache`用于能够设置基本身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:55:35.283

您应该能够设置 webclient 的凭据，然后在需要登录的任何时候，它都会提供您提供的内容。

```
WebClient webClient = new WebClient();
webClient.Credentials = new System.Net.NetworkCredential("UserName", "Password", "Domain"); 
```

# javascript - 使用 jquery 选择特定的子元素？

> ID：11648990
> 
> 赞同：2
> 
> 时间：2012-07-25T11:45:59.473
> 
> 标签：javascript, jquery

我想从 $el.html 中选择特定的子元素，有两种类型的子元素，一种带有`<span>....</span>`，另一种有 span 类`<span class = "special">..</span>`，例如：

```
var orig = $(".example").html()
    ,$el = $(".example")
    ,text = $.trim($el.text())
    ,words = text.split(" ")
    ,html = "";

for (var i = 0; i < words.length; i++) {
    if (words[i] === "senior")
    html += "<span class='special'>" + words[i] + ((i+1) === words.length ? "" : " ") + "</span>";
    else
        html += "<span>" + words[i] + ((i+1) === words.length ? "" : " ") + "</span>";
   };
$el.html(html).children().hide().each(function(i){
 // if $('span.special')
  $(this).delay(i*200).fadeIn(700);
 // else (normal span)
  $(this).delay(i*600).fadeIn(900);
}).promise().done(function(){
       $('.example:first').html(orig)
    }) 
```

在我的“每个”调用中，如何区分有和没有类的跨度？

> 工作演示在这里：http: [//jsfiddle.net/6czap/15/](http://jsfiddle.net/6czap/15/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:50:31.950

我相信您正在寻找[`.hasClass`](http://api.jquery.com/hasClass/)：

```
$el.html(html).children().hide().each(function(i){
  if($(this).hasClass('special'))
      $(this).delay(i*200).fadeIn(700);
  else
      $(this).delay(i*600).fadeIn(900); 
}).promise().done(function(){
       $('.example:first').html(orig)
}); 
```

[**演示**](http://jsfiddle.net/6czap/16/)

但是，如果您只想淡入`.special`元素，请使用

```
$el.html(html).children('.special').hide().each(function(i){
  if($(this).hasClass('special'))
      $(this).delay(i*200).fadeIn(700);
}).promise().done(function(){
       $('.example:first').html(orig)
}); 
```

而是（参见[`.children`](http://api.jquery.com/children/)，[演示](http://jsfiddle.net/6czap/17/)）。

# jquery - Ruby on Rails：jquery Datepicker 备用字段格式更改

> ID：11648991
> 
> 赞同：0
> 
> 时间：2012-07-25T11:46:01.887
> 
> 标签：jquery, ruby-on-rails, ruby, datepicker, format

我正在尝试搜索日期，我的数据库中的格式是 2012-05-15。当我使用 datepicker 时，我有它，以便用户可以选择一个日期，然后显示为 15-05-2012。

我想搜索 2012-05-15 格式，而不改变查看者看到它的方式。我试图改变模型中的格式，但没有运气。

这是我的搜索视图：

```
<%= form_tag search_path, method: :get do %>
<%=  text_field_tag("start_date") %></br>
<%= submit_tag "Search", name: nil %>

<% end %> 
```

这是我的 application.js：

```
jQuery(function(){
    jQuery('#start_date').val("");
    jQuery('#start_date').datepicker({dateFormat: 'dd-mm-yy'});
}); 
```

我的控制器：

```
def search

@project_search = Project.search( params[:start_date].order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

   @project = Project.new(params[:project])

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

和我的模型：

```
def self.search(search_start_date) 
  return scoped unless search_start_date.present?
  where([start_date LIKE ?, "%#{search_start_date}%"])
end 
```

我尝试使用 jquery 选项，但没有运气。

```
jQuery(function(){
jQuery('#start_date').val("");
jQuery('#start_date').datepicker({altField: '#start_date2', dateFormat: 'yy-mm-dd'});

}); 
```

希望有人可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:51:41.307

更改`dateFormat`jQuery Datepicker 实例选项**将**改变用户查看日期的方式。

在你的模型中

```
def self.search(search_start_date) 
  return scoped unless search_start_date.present?
  search_start_date = Date.parse(search_start_date).strftime("%Y-%m-%d")
  where([start_date LIKE ?, "%#{search_start_date}%"])
end 
```

验证`search_start_date`' 的初始格式以确保它是其他的也应该被考虑。

# android - 每次在 getView 中，视图都会膨胀。findViewById(...) 执行了很多次。我用过 View Holder

> ID：11648995
> 
> 赞同：2
> 
> 时间：2012-07-25T11:46:42.453
> 
> 标签：android, android-view

```
public View getView(final int pos, View arg1, ViewGroup arg2) {

    ViewHolder holder;
    View view = arg1;

    if (arg1 == null) {
        holder = new ViewHolder();
        System.out.println("Inflating view");
        arg1 = mInflater.inflate(R.layout.inflatefreedownlod, arg2, false);
        holder.im = (ImageView) arg1.findViewById(R.id.imf1);
        holder.tv1 = (TextView) arg1.findViewById(R.id.tvf1);
        holder.tv2 = (TextView) arg1.findViewById(R.id.mini1);
        holder.tv3 = (TextView) arg1.findViewById(R.id.m1);
        arg1.setTag(holder);

    } else {

        holder = (ViewHolder) arg1.getTag();
    }

    holder.tv1.setText(NAME.get(pos).toString());
    holder.tv2.setText(contentName.get(pos).toString());
    holder.tv3.setText(minidescp.get(pos).toString());
    URL url1;

    try {

        url1 = new URL(imurl.get(pos).toString());
        bmp = BitmapFactory.decodeStream(url1.openConnection().getInputStream());
        holder.im.setImageBitmap(bmp);
        //bmp.recycle();

    } catch (Exception e) {
        e.printStackTrace();
    }

    arg1.setOnClickListener(new OnClickListener() {

                            @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            for (int i = 0; i < NAME.size(); i++)
                if (pos == i) {
                    getFreeContent(Cid.get(pos).toString(), Vid.get(pos).toString(), contentName.get(pos).toString());
                }

        }

    });

    return arg1;
} 
```

我看到显示 Inflating View 3 次的 logcat。当我在模拟器上测试它时，我在列表视图中显示了 3 个 LinearLayout。为什么我的观点每次都是空的？视图也每次都膨胀。我的代码有什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:18:59.490

如果您的列表中有三个项目，并且您的 中的三行在屏幕上有空间`ListView`，`getView()`则将使用 a 调用三次`null` `View`以创建这三行。您不能回收当前正在使用的行。

# xpath - JasperReports：带有 xml 子报告 xPath 的报告

> ID：11648996
> 
> 赞同：1
> 
> 时间：2012-07-25T11:46:47.023
> 
> 标签：xpath, jasper-reports

我有一个主报告，当一个组发生变化时，它会调用一个子报告。
我传递了两个 XML 文档，它们是主报表和子报表的不同数据源。
子报表正在打印，但每个子报表都会丢失数据的前 2 条记录。
我认为是一个错误的*xPath*表达式，但我尝试了几种解决方案，但没有一个适合我。

master的report jrxml文件片段：

```
<queryString language="xPath"><![CDATA[riepilogo-ec/dettagli/dettaglio]]></queryString>
<group name="GiroGroup" isStartNewColumn="false" isStartNewPage="false"
    isReprintHeaderOnEachPage="true" keepTogether="true">
    <groupExpression>
        <![CDATA[$F{giro}]]>
    </groupExpression>

    <groupFooter>
        <band height="20" isSplitAllowed="false">
            <subreport>
                <reportElement isPrintRepeatedValues="true" x="0" y="0" width="507" height="10"
                    isRemoveLineWhenBlank="true" backcolor="#ffcc99"> </reportElement>
                <subreportParameter name="REPORT_DATA_SOURCE">
                    <subreportParameterExpression>
                        <![CDATA[new net.sf.jasperreports.engine.data.JRXmlDataSource( $P{subTotale}).dataSource("totali/totale[@giro=" + $F{giro}+ "]/tot-cau")]]>
                        <!--<![CDATA[new net.sf.jasperreports.engine.data.JRXmlDataSource( $P{subTotale})]]>-->
                        <!--<![CDATA[new net.sf.jasperreports.engine.data.JRXmlDataSource( $P{subTotale}).subDataSource("/totali/totale[@giro=1]")]]>-->
                    </subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="XML_DATE_PATTERN">
                    <subreportParameterExpression>$P{XML_DATE_PATTERN}</subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="XML_NUMBER_PATTERN">
                    <subreportParameterExpression>$P{XML_NUMBER_PATTERN}</subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="XML_LOCALE">
                    <subreportParameterExpression>$P{XML_LOCALE}</subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="XML_TIME_ZONE">
                    <subreportParameterExpression>$P{XML_TIME_ZONE}</subreportParameterExpression>
                </subreportParameter>

                <subreportParameter name="pageNumberMaster">
                    <subreportParameterExpression>$V{PAGE_NUMBER}</subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="giro">
                    <subreportParameterExpression>$F{giro}</subreportParameterExpression>
                </subreportParameter>

                <subreportExpression class="net.sf.jasperreports.engine.JasperReport"
                    >$P{subReport}</subreportExpression>
            </subreport>

        </band>
    </groupFooter>
</group> 
```

分报告查询：

```
 <queryString language="xPath"><![CDATA[totali/totale/tot-cau]]></queryString> 
```

主要的数据：

```
<dettagli>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>1</cod-riv>
            <check-digit>G</check-digit>
            <desc-riv>FUSARO GIANCARLO</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.162,44 </forniture>
            <addebiti/>
            <rese>461,46 </rese>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>700,98 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>2</cod-riv>
            <check-digit>H</check-digit>
            <desc-riv>BENINI LAURA</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>785,16 </forniture>
            <addebiti/>
            <rese>250,92 </rese>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>534,24 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>4</cod-riv>
            <check-digit>J</check-digit>
            <desc-riv>CAMPOLONGO FLAVIO</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>7.472,82 </forniture>
            <addebiti/>
            <rese>443,84 </rese>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>7.028,98 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>5</cod-riv>
            <check-digit>K</check-digit>
            <desc-riv>LA COMETA S.N.C.</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>877,32 </forniture>
            <addebiti/>
            <rese>29,48 </rese>
            <accrediti/>
            <saldo-contabile>302,40 </saldo-contabile>
            <saldo-ec>847,84 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>68</cod-riv>
            <check-digit>V</check-digit>
            <desc-riv>BENINI DAVIDE</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.073,16 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile>1.507,56 </saldo-contabile>
            <saldo-ec>1.073,16 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>101</cod-riv>
            <check-digit>C</check-digit>
            <desc-riv>AMBROSI CARLA</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.127,34 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile>1.276,80 </saldo-contabile>
            <saldo-ec>1.127,34 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>110</cod-riv>
            <check-digit>L</check-digit>
            <desc-riv>JANA HAVRLANTOVA</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>579,06 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>579,06 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>228</cod-riv>
            <check-digit>Z</check-digit>
            <desc-riv>PIZZINI ARTURO</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>985,50 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>985,50 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>252</cod-riv>
            <check-digit>X</check-digit>
            <desc-riv>PERINA ROBERTO</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>5.099,76 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile>1.347,36 </saldo-contabile>
            <saldo-ec>5.099,76 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>279</cod-riv>
            <check-digit>Y</check-digit>
            <desc-riv>FASOLI GIUSEPPE</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>611,10 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>611,10 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>256</cod-riv>
            <check-digit>B</check-digit>
            <desc-riv>MIGLIORINI VITTORINA</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.077,66 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>1.077,66 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>309</cod-riv>
            <check-digit>C</check-digit>
            <desc-riv>CASTIONI SERGIO</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>8.302,44 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile>447,30 </saldo-contabile>
            <saldo-ec>8.302,44 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>310</cod-riv>
            <check-digit>D</check-digit>
            <desc-riv>EDICOLA MANCALACQUA SNC</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>716,40 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>716,40 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>332</cod-riv>
            <check-digit>Z</check-digit>
            <desc-riv>VILLABONI ANNA MARIA</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>571,68 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>571,68 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>376</cod-riv>
            <check-digit>R</check-digit>
            <desc-riv>ZARAMELLA NADIA</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>581,94 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>581,94 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>404</cod-riv>
            <check-digit>T</check-digit>
            <desc-riv>CASTIONI GIORGIO</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.508,94 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>1.508,94 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>405</cod-riv>
            <check-digit>U</check-digit>
            <desc-riv>CARTOLERIA AMBROSI DANIEL</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.029,42 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>1.029,42 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>395</cod-riv>
            <check-digit>K</check-digit>
            <desc-riv>EDERLE MIRELLA</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>304,20 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile>178,80 </saldo-contabile>
            <saldo-ec>304,20 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>486</cod-riv>
            <check-digit>X</check-digit>
            <desc-riv>RAGUSO ANTONIO</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>545,40 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>545,40 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>558</cod-riv>
            <check-digit>R</check-digit>
            <desc-riv>TROIANI SAS</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>3.741,66 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>3.741,66 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>514</cod-riv>
            <check-digit>Z</check-digit>
            <desc-riv>IL PUNTO DI COPPINI M.</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>959,22 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile>1.194,48 </saldo-contabile>
            <saldo-ec>959,22 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>515</cod-riv>
            <check-digit>A</check-digit>
            <desc-riv>GIOACHINI LAURA</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>5.450,30 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>5.450,30 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>624</cod-riv>
            <check-digit>F</check-digit>
            <desc-riv>GDO PRESS S.R.L.</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>190,08 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>190,08 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>700</cod-riv>
            <check-digit>D</check-digit>
            <desc-riv>MACH 2 AUTOGR.SCAL.NORD</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.118,52 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>1.118,52 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>701</cod-riv>
            <check-digit>E</check-digit>
            <desc-riv>MACH 2 AUTOGR.SCAL.SUD</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.118,52 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>1.118,52 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>1</giro>
            <cod-riv>814</cod-riv>
            <check-digit>N</check-digit>
            <desc-riv>MACH DUE C/O IL SOLE SOMM</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>785,16 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>785,16 </saldo-ec>
        </dettaglio>
        <dettaglio>
            <giro>2</giro>
            <cod-riv>259</cod-riv>
            <check-digit>E</check-digit>
            <desc-riv>EL GIORNALAR</desc-riv>
            <riporto/>
            <versamenti-acconti/>
            <riporto/>
            <forniture>1.051,20 </forniture>
            <addebiti/>
            <rese/>
            <accrediti/>
            <saldo-contabile/>
            <saldo-ec>1.051,20 </saldo-ec>
        </dettaglio>
</dettagli> 
```

子报表数据：

```
<totali>
    <totale giro="1">
        <tot-cau>
            <cod-cau-tot>5</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Resa Periodici Esteri</desc-cau-tot>
            <importo-cau>9,74 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>201</cod-cau-tot>
            <tipo-cau-tot>1</tipo-cau-tot>
            <desc-cau-tot>NS.FATTURA 20%</desc-cau-tot>
            <importo-cau>6.254,70 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>52</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Fornitura Periodici esteri</desc-cau-tot>
            <importo-cau>15,10-</importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>11</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>RESA X CESS.ATTIVITA'</desc-cau-tot>
            <importo-cau>79,18 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>38</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Diff. resa quotidiani</desc-cau-tot>
            <importo-cau>169,32 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>76</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Add.lavorazione extra</desc-cau-tot>
            <importo-cau>0,00 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>54</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Fornitura Quot./Illus.</desc-cau-tot>
            <importo-cau>30,54 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>2</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Resa Quotidiani</desc-cau-tot>
            <importo-cau>28,26 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>1</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Versamento</desc-cau-tot>
            <importo-cau>23.319,64 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>8</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Integrazione resa periodici</desc-cau-tot>
            <importo-cau>210,16 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>3</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Resa PERIODICI</desc-cau-tot>
            <importo-cau>353,72 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>46</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Versamento RID</desc-cau-tot>
            <importo-cau>19.439,04 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>4</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Resa Periodici esteri</desc-cau-tot>
            <importo-cau>332,32 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>41</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>ACCREDITO RESA FUORI BOLLA</desc-cau-tot>
            <importo-cau>3,00 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>51</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Fornitura PERIODICI</desc-cau-tot>
            <importo-cau>26.464,00 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>108</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Insoluto RID</desc-cau-tot>
            <importo-cau>200,00 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>50</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Fornitura Quotidiani</desc-cau-tot>
            <importo-cau>90,10 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>86</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>ADDEBITO CONTO DEPOSITO</desc-cau-tot>
            <importo-cau>21.205,66 </importo-cau>
        </tot-cau>
    </totale>
    <totale giro="2">
        <tot-cau>
            <cod-cau-tot>201</cod-cau-tot>
            <tipo-cau-tot>1</tipo-cau-tot>
            <desc-cau-tot>NS.FATTURA 20%</desc-cau-tot>
            <importo-cau>2.539,80 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>51</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Fornitura PERIODICI</desc-cau-tot>
            <importo-cau>27.180,72 </importo-cau>
        </tot-cau>
        <tot-cau>
            <cod-cau-tot>1</cod-cau-tot>
            <tipo-cau-tot>10</tipo-cau-tot>
            <desc-cau-tot>Versamento</desc-cau-tot>
            <importo-cau>7.196,26 </importo-cau>
        </tot-cau>
    </totale>
</totali> 
```

我看到如果我将子报表放在摘要中它可以工作，那么组页脚的问题，知道吗？

我尝试调试 Jasperreport 库，我看到何时调用 xPathExecuter.selectNodeList(document,selectExpression)

它返回正确数量的节点，但列表中的第一个节点不是 xml 文件中表示 xPath 表达式的第一个节点。

我怎样才能以正确的顺序获取节点？

# sftp - sudo 的 WinSCP 登录问题

> ID：11648997
> 
> 赞同：2
> 
> 时间：2012-07-25T11:46:53.310
> 
> 标签：sftp, openssh, tty, winscp

我正在尝试使用正确的用户名和密码使用 WinSCP 登录。

在*Environment> SFTP > SFTP Server*我已经指定`sudo /usr/lib/openssh/sftp-server`

在*会话*下，我输入*主机名*、*用户名*和*密码*。

当我点击登录时，我得到

> 连接已意外关闭。服务器发送命令退出状态 1。
> 
> 无法初始化 SFTP 协议。主机是否运行 SFTP 服务器？
> 
> sudo：不存在 tty，也没有指定 askpass 程序

这是完整日志的链接[http://pastebin.com/GcmpK2kj](http://pastebin.com/GcmpK2kj)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:25:49.477

确保您`sudo`对`sftp-server`. 并确保该`sudoers`选项`requiretty`已关闭。

详细说明在 WinSCP FAQ[登录后如何更改用户（例如 su root）？](https://winscp.net/eng/docs/faq_su)

# d3.js - D3中基于弧的文本对齐

> ID：11648999
> 
> 赞同：3
> 
> 时间：2012-07-25T11:46:56.477
> 
> 标签：d3.js, label

我正在尝试使用 D3 创建一个[径向轮毂和轮辐图](http://bl.ocks.org/3169420)( [http://bl.ocks.org/3169420](http://bl.ocks.org/3169420) )，它使用饼图的弧来表示与上下文节点之间的关系。换句话说，我正在尝试创建节点关系的 360 度视图。

![在此处输入图像描述](../Images/c4b950d362d1d83ae5e38ea7787058b0.png)

在上面的示例中，“节点 1”位于中心。我无法获取相关节点 #8 - #18 的文本节点名称来对齐“外部”轮子。有人知道最好的方法是什么吗？

我正在使用的代码如下所示......

```
 // Add node names to the arcs, translated to the arc centroid and rotated.
    arcs3.filter(function(d) {
      return d.endAngle - d.startAngle > .2; }).append("svg:text")
        .attr("dy", "5px")
        .attr("angle", function(d) { return angle(d); })
        .attr("text-anchor", function(d) { return angle(d) < 0 ? "start" : "end"; })
        .attr("transform", function(d) { //set text'ss origin to the centroid
           // Make sure to set these before calling arc.centroid
           d.innerRadius = (height/2); // Set Inner Coordinate
           d.outerRadius = (height/2); // Set Outer Coordinate
           return "translate(" + arc3.centroid(d) + ")rotate(" + angle(d) + ")";
         })
        .style("fill", "Black")
        .style("font", "normal 12px Arial")
        .text(function(d) { return d.data.name; });

    // Computes the angle of an arc, converting from radians to degrees.
    function angle(d) {
      var a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;
      return a > 90 ? a - 180 : a;
    } 
```

问题似乎是我需要评估放置节点标签的 X 和 Y 坐标。但是，我似乎无法正确找到/访问那些 X 和 Y 值。

提前感谢您提供的任何帮助。

我最好的，

坦率

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:34:59.537

这要感谢 Ger Hobbelt... 总之，角度函数需要参数化：

```
 function angle(d, offset, threshold) {
      var a = (d.startAngle + d.endAngle) * 90 / Math.PI + offset;
      return a > threshold ? a - 180 : a;
    } 
```

完整的答案可以在 d3.js Google Group 中找到：[https ://groups.google.com/forum/?fromgroups#!topic/d3-js/08KVfNmlhRo](https://groups.google.com/forum/?fromgroups#!topic/d3-js/08KVfNmlhRo)

我最好的，

坦率