# StackOverflow 问答 11374000-11374999

# html - 无法在带有 HTML5 的 IOS5 Safari 中重放缓存的视频

> ID：11374003
> 
> 赞同：1
> 
> 时间：2012-07-07T09:54:44.633
> 
> 标签：html, caching, ios5, video

我正在使用 HTML5 中的缓存视频在一个网站上工作。它在使用 Safari 的笔记本电脑上运行良好。当我使用 IOS 5 在移动 Safari 上进行测试时，我看到以下内容：

1.  网站在第一次加载时可以正常工作并播放视频。
2.  如果我想在我的 iPhone 上缓存 10 MB 的数据，我会收到提示。我说是。（Safari 中的缓存大小为 9.5 MB）移动 Safari 设置中的网站数据页面确认缓存了 9.5 MB。
3.  当我尝试在新选项卡中返回网站时，会加载 HTML 和图像，但对于视频，我会看到一个播放按钮，其中有一条线。

无论我打开还是关闭飞行模式，都会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:50:54.923

我有完全相同的问题。通过搜索，我看到了各种各样的东西，这些东西暗示了两件事之一。HTML5 cache.manifest 不允许视频，或者 mp4/m4v 视频以不同的名称缓存，然后在缓存后找不到。我希望有办法做到这一点，但我仍然没有找到任何东西。

# android - Android 中用于 RTL 的 AutoCompleteTextView

> ID：11374008
> 
> 赞同：1
> 
> 时间：2012-07-07T09:55:37.333
> 
> 标签：android

我有一个自动完成文本视图，它与英语完美配合，但我想将它用于波斯语/波斯语。

安卓支持吗？自动完成中的数据来自数据库。有人可以帮我完成这项工作吗？

请帮忙

欢呼佐尔夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:14:09.617

看到这个[帖子](https://stackoverflow.com/questions/10061091/how-can-i-support-farsi-persian-text-in-android)和[这个](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android/7962813#7962813)，它是关于如何在Android中支持波斯语/阿拉伯语等不同版本的语言，

# sql-server - 使用 UNION ALL 在 SQL Server 中创建视图

> ID：11374009
> 
> 赞同：8
> 
> 时间：2012-07-07T09:55:38.447
> 
> 标签：sql-server

请考虑以下示例：

```
CREATE VIEW VW_YearlySales
AS

SELECT 2011 AS YearNo, ProductID, SUM(Amount) FROM InvoiceTable2011
UNION ALL
SELECT 2012 AS YearNo, ProductID, SUM(Amount) FROM InvoiceTable2012
UNION ALL
SELECT 2013 AS YearNo, ProductID, SUM(Amount) FROM InvoiceTable2013

GO 
```

实际上不存在，我现在`InvoiceTable2013`不想创建它，它将在记录 2013 年的第一张发票时自动创建。

任何人都可以帮助我如何在执行之前指定一个条件来验证表的存在`UNION ALL`吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:43:01.177

正如其他人所说的那样，您无法通过视图实现此目的，因为 select 语句必须引用一组具体的表 - 如果其中任何一个表不存在，查询将无法执行。

在我看来，您的问题更为根本。显然，在概念上应该正好是 one `InvoiceTable`，不同日期的行。按年份将其分成不同的逻辑表可能是为了优化而进行的（除非列不同，我非常怀疑）。

在这种情况下，[分区](http://msdn.microsoft.com/en-us/library/ms345146%28v=sql.90%29.aspx)似乎是解决这个问题的方法（按年/季度/月对大表进行分区是典型的例子）。这将使您在`InvoiceTable`逻辑上拥有一个单一的，但指定 SQL Server 应该在幕后存储数据，就好像它是按年份拆分的不同表一样。您将获得两全其美 - 准确的模型和快速的性能 - 这使您的视图定义变得简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:06:08.063

不，据我所知，这是不可能的，您必须使用存储过程。在存储过程中，您可以验证表的存在性，并且根据该表的存在性，您可以更改 SQL。

**编辑：**

```
CREATE PROCEDURE GetYearlySales
AS

IF (EXISTS (SELECT *  
                 FROM INFORMATION_SCHEMA.TABLES  
                 WHERE TABLE_NAME = 'InvoiceTable2013')) 
BEGIN 

   SELECT 2011 AS YearNo, ProductID, SUM(Amount) FROM InvoiceTable2011 
   UNION ALL 
   SELECT 2012 AS YearNo, ProductID, SUM(Amount) FROM InvoiceTable2012 
   UNION ALL 
   SELECT 2013 AS YearNo, ProductID, SUM(Amount) FROM InvoiceTable2013

END
ELSE
BEGIN
   SELECT 2011 AS YearNo, ProductID, SUM(Amount) FROM InvoiceTable2011 
   UNION ALL 
   SELECT 2012 AS YearNo, ProductID, SUM(Amount) FROM InvoiceTable2012
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:32:10.920

看起来您希望每年都有一个表，并且您希望确保在不修改 SP 的情况下查询 SP。这有点冒险，您必须始终保持命名约定。在这种情况下，您需要做的是查询 table_name 的 informationschema 表，例如“InvoiceTable%”。获取表中的记录，然后遍历附加固定 SQL 的记录。然后像这里一样执行动态sql [http://www.vishalseth.com/post/2008/07/10/Dynamic-SQL-sp_executesql.aspx](http://www.vishalseth.com/post/2008/07/10/Dynamic-SQL-sp_executesql.aspx)

# programming-languages - “NONE”类型的含义是什么（如int，bool，string ...）

> ID：11374012
> 
> 赞同：0
> 
> 时间：2012-07-07T09:56:10.840
> 
> 标签：programming-languages, nonetype

我在一本书中看到过 NONE 类型，但没有任何解释......我知道这是某些语言中的一种类型，但我希望深入了解它！像虚空一样吗？还是像NULL？

这本书名为“编程语言概念和范式”（由 David A.Watt 撰写），它对多种语言以及彼此之间的差异有一个非常好的“广泛视野”。我们在哪些语言中使用 NONE（Python 除外）？nonetype 的目的不止一个吗？

谢谢！阿米海

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:58:26.587

Python 有一个`NoneType`for`None`值。`None`与`null`其他语言类似。

```
>>> type(None)
<type 'NoneType'> 
```

其他语言可能`None`用来表示其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:41:39.630

IMO，python 中的 NoneType 非常等同于其他语言中的 void-type，例如 C/C++。例子：

```
>>> def foo():
...     pass
... 
>>> type(foo())
<type 'NoneType'> 
```

函数 foo() 没有 return 语句，所以它就像 C/C++ 中的 void 返回函数。

# sql-server-2008 - Sql server not in 子句不起作用

> ID：11374022
> 
> 赞同：1
> 
> 时间：2012-07-07T09:58:39.083
> 
> 标签：sql-server-2008, common-table-expression, notin

为什么这在 sql server 2008 中没有给出任何记录？

```
;with pricedCategories as
(
    select * from Product.Category where CategoryID not in
    (select Parent_CategoryID from Product.Category)
)
select * from pricedCategories 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:10:27.140

当 CTE 内的子查询中有 NULL 值时，您的查询似乎不会返回值（如果我将 insert (1, NULL) 中的 NULL 替换为假设 (1, 0) 您的查询将起作用）。如果您想获取不是任何其他类别的父类别的类别，即使具有 NULL 值，您可以这样做：

```
DECLARE @Category TABLE (CategoryID INT, Parent_CategoryID INT)
INSERT @Category VALUES 
(1, NULL),
(2, 1),
(3, 1),
(4, 2)

;WITH pricedCategories AS
(
    SELECT * FROM @Category y WHERE NOT EXISTS 
    (SELECT Parent_CategoryID FROM @Category x 
     WHERE  x.Parent_CategoryID = y.CategoryID)
)
SELECT * FROM pricedCategories 
```

有趣的是，以下方法与您的问题中描述的方法相同：

```
;WITH pricedCategories AS
(
    SELECT * FROM @Category y 
    WHERE  y.CategoryID <> ALL(SELECT DISTINCT Parent_CategoryID FROM @Category)
)
SELECT * FROM pricedCategories 
```

您可以更改查询以使用 ISNULL 函数将 NULL 替换为从未用作 CategoryID 的某个数值，如下所示：

```
;WITH pricedCategories AS
(
    SELECT * FROM @Category WHERE CategoryID NOT IN
    (SELECT ISNULL(Parent_CategoryID, -1) FROM @Category)
)
SELECT * FROM pricedCategories 
```

但是随后表示“无”的 NULL 值将更改为 -1 的实际值，这是不正确的，您不应该使用它。

# html - 获取导航菜单下拉菜单，使其看起来像基本菜单项

> ID：11374025
> 
> 赞同：0
> 
> 时间：2012-07-07T09:59:10.127
> 
> 标签：html, css

我有这个 CSS 菜单：

[http://jsfiddle.net/7JC8t/](http://jsfiddle.net/7JC8t/)

如果您将鼠标悬停在“inostranstvo”上，您将看到其下方打开一个下拉菜单。我一直在尝试做但失败的是让下拉项目看起来像水平菜单中的项目。

因此，当用户将鼠标悬停在“inostranstvo”上时，显示的项目应该具有：与现有菜单项相同的宽度（最宽项目的宽度）、相同的高度和背景。

背景很简单，但我不能强制高度，我不知道如何对齐宽度。这没有任何作用：

```
#nav li:hover ul li{
    height:55px;
    line-height:55px;
    width:200px;
} 
```

宽度值是随机的，最重要的是高度，我似乎无法对列表项强加。另一方面，添加边框是可行的，但它会将其添加到红色背景区域内。我确信这不会很复杂，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:18:08.037

您是否尝试将子菜单 li 元素设置为“显示类型：块”？

我已将以下 css 添加到 JSFiddle 中，它似乎可以工作：

```
#nav li:hover ul li {
    display: block;
    background: #DE2211;
    border-bottom: 1px solid black;
} 
```

# objective-c - XPC 和跨架构 OSX 应用程序

> ID：11374027
> 
> 赞同：3
> 
> 时间：2012-07-07T09:59:33.203
> 
> 标签：objective-c, app-store, sandbox, xpc

对于我正在开发的桌面应用程序，我必须坚持使用 32 位框架。我正在寻找在适当的进程中运行框架并在 64 位进程中开发应用程序的其余部分的最佳途径。该应用程序还打算在 AppStore 中出售，因此它应该支持 Apple 沙盒。

我在考虑[XPC](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html)：它适合这些目的吗？为什么我在[与跨架构编程相关的 Apple 文档](http://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/64bitPorting/Cross-ArchitecturePluginSupport/Cross-ArchitecturePluginSupport.html#//apple_ref/doc/uid/TP40001064-CH225-SW7)中找不到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:33:54.227

> XPC：适合这些用途吗？

是的，XPC 应该在 32 位和 64 位进程之间正常工作。

> 为什么我在与跨架构编程相关的 Apple 文档中找不到它？

因为 XPC 是 10.7 中的新内容，而 64 位转换指南文档相当陈旧，自 10.6 以来[一直没有更新。](http://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/64bitPorting/revision_history/revision_history.html#//apple_ref/doc/uid/TP40001064-CH223-SW1)Apple 并不总是擅长更新旧文档。

# c# - ajax post不发送数据

> ID：11374031
> 
> 赞同：0
> 
> 时间：2012-07-07T10:00:13.597
> 
> 标签：c#, jquery, asp.net, post, ckeditor

我有这个 ajax 帖子：

```
$.ajax({
  url: Config.Proxy + "ContentPages.aspx?t=save",
  type: "POST",
  contentType: "application/x-www-form-urlencoded",
  data: {
    content: content,
    id: currentPageId,
    active: "true",
    subject: $('#txtSubject').val(),
    webid: webid
  },
  success: function (data, status) {
    // do something
  },
  error: function (xhr, desc, err) {
    // Do something
  }
}); 
```

我在 .NET 页面上发帖，因此我可以使用调试模式检查数据是否正确发送。我对不同的页面（其他 url，其他数据）使用与上面相同的代码。

当我运行应用程序并保存数据时，我没有进入调试模式。当我对其他页面使用相同的代码时，它工作正常。

我试图比较两个代码，但它们是相同的。我已经删除了一些数据项，但它仍然不起作用。

为什么？谁能给我一个提示？

谢谢

*   编辑 * 我知道为什么会这样：CKEditor。一旦我将变量“content”设置为 CKEditor 的内容并使用 post-call，调试模式就不再被调用。代码隐藏中的表单键也是 0。现在的问题是如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:55:32.440

就像我在原始帖子的编辑中所说：问题是由 CKEditor 的内容引起的。我认为 HTML 不是 AJAX 帖子中的解析器/加载/调用它的内容。所以，在一点帮助下（并且没有发布代码隐藏，这与问题无关）我想通了：

```
var content = escape(CKEDITOR.instances.editor1.getData()); 
```

将变量“内容”放在帖子的数据部分中，瞧！它就像一个魅力。

在后面代码中的接收 .NET 页面上，解码值：

```
(HttpUtility.UrlDecode(Request.Form.Get("content").NullSafeString()) 
```

不管怎么说，还是要谢谢你

# objective-c - Objective-C 方法覆盖/重载混淆

> ID：11374032
> 
> 赞同：3
> 
> 时间：2012-07-07T10:00:30.797
> 
> 标签：objective-c

关于是否可以在 Objective-C 中“重载”方法似乎存在一些争论/分歧。撇开在 Objective-C 中定义方法重载的术语与 C++ 中的术语相同（因为方法签名语法不同）是不可能的，我要特别问：以下哪些是允许的，哪些是不允许的？

1) 声明/实现这两种方法的类：

```
- (void) doSomethingWithObject:(ClassA*) object;
- (void) doSomethingWithObject:(ClassB*) object; 
```

2) 声明/实现这两种方法的类：

```
- (void) doSomethingWithObject:(ClassA*) object;
- (BOOL) doSomethingWithObject:(ClassA*) object; 
```

3) 声明/实现此方法的类：

```
- (void) doSomethingWithObject:(ClassB*) object; 
```

...当它的超类声明/实现这个方法时：

```
- (void) doSomethingWithObject:(ClassA*) object; 
```

（以及冲突返回值的类似物），当 A)`ClassB`从 下降`ClassA`和 B) 不是时。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T10:42:18.967

问题1：不可以：Objective-C 不包括方法名中的类型；没有损坏。它可能适用于 Objective-C++ —— 从来没有用过那么多。

问题2：一样。不会工作。

问题3：会工作。

编辑：一般来说，方法名称不包括任何类型，所以如果你剥离类型并且它们是相同的，那么它将被认为是相同的，因此不允许在同一个类中。同样，如果它在不同的类中，它将起作用，尽管如果调用中使用的类型和被调用的类型不完全一致，您可能会感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T06:05:26.870

您正在考虑 C++，其中编译器执行静态绑定，根据输入的类型确定要调用的实例方法。

Objective-C 不是这样工作的。相反，所有绑定在运行时都是动态的。有点像在 C++ 中声明为“虚拟”的所有方法。程序员负责传入适当的变量，这些变量以您的方法期望的方式响应。

如果您想要更健壮的行为，您的方法可以查询传入的对象是否响应某些选择器并基于此采取适当的操作。或者你的方法可以询问传入的对象是否是它期望的类型。同样，这一切都将在您的方法的运行时完成。不是由编译器。

所以答案是，声明为：

```
- (void) doSomethingWithObject:(id) object; 
```

...然后传入你喜欢的任何对象。

# safari - 当 Safari 中的选项卡未处于活动状态时，jPlayer 不会前进到下一个曲目

> ID：11374033
> 
> 赞同：1
> 
> 时间：2012-07-07T10:00:33.870
> 
> 标签：safari, tabs, focus, jplayer

出于某种原因，对于 Safari，而不是其他浏览器，当标签不在焦点上时，jPlayer 播放列表不会前进到下一个曲目，即不是当前标签。它只是在曲目的末尾暂停。这是其他人也观察到的问题，我想知道是否有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:55:26.430

这现在适用于最新版本的 Safari，即 Safari 6.0

# ios - TabBarController - 重新加载 SecondViewController

> ID：11374036
> 
> 赞同：1
> 
> 时间：2012-07-07T10:01:05.903
> 
> 标签：ios

我正在使用 Xcode 提供的模板制作 TabBarController 应用程序，并且每次单击它时都需要重新加载第二个视图控制器。我该怎么做呢 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:08:57.360

每当标签栏切换视图控制器时，`viewWillAppear`都会调用 viewcontroller 函数

所以在`viewWillAppear`函数中添加代码`UIViewController`

# ios - 从我的开发者帐户中删除设备以增加计数

> ID：11374039
> 
> 赞同：18
> 
> 时间：2012-07-07T10:01:45.510
> 
> 标签：ios, iphone-developer-program

是否可以删除设备以增加我的 Apple 开发者帐户中的设备数量？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-07T11:30:27.477

不会。删除设备不会（立即）增加您的可用设备数量。您必须等到您的苹果开发者帐户被更新，然后访问配置中心并点击设备。

您将看到这样的消息；

![在此处输入图像描述](../Images/185aa76748c78a7fba5a9faacf2db18a.png)

这是您今年修剪设备列表的唯一机会。单击要删除的设备，然后点击屏幕底部的“删除所选设备”。请注意，一旦您（或您的团队中具有足够权限的其他成员）添加设备 - 包括自动配置的设备，您将无法在今年余下的时间里再删除（您可以看出我是根据经验说话）这里不能吗？）

因此，如果您接近极限（并且不要忘记每年推出的新设备等），最好一次性删除很多，然后放回任何需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-14T13:33:34.003

Apple 文档中未明确说明的关键信息。实际删除某些旧设备的按钮实际上在您续订后的早晨可用。据我所知，实际付款发生在续订之前，而续订实际上直到到期的午夜才发生。除了在您可以实际删除的那一天不预先选择设备之外，禁用不会做任何事情或与删除过程有任何关系。

禁用不等于删除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-07T06:52:10.673

**您只能禁用设备。**

请注意，由`disabling the device the count remains same until the account membership is renewed.`

以下步骤禁用设备：

1.  去`Certificates, Identifiers & Profiles`

2.  转到`Devices list`（所有或特定设备，即 iPhone、iPad）

[![截图 1](../Images/53befcc742c76b357451884e8c5f4205.png)](https://i.stack.imgur.com/78GqS.png)

3.  点击`device name`。如果设备列表太长，您可以`search using search option`在右上角显示

[![截图 2](../Images/8daf0e8187fd0adc00be3ba31400536b.png)](https://i.stack.imgur.com/zq9ax.png)

4.  点击`Disable button`

[![截图 3](../Images/06eea1a40fb82a7f3e1cce44b3a6bbc8.png)](https://i.stack.imgur.com/HD8XL.png)

5.  请注意，*一旦您禁用设备，则与其关联的所有配置文件都将失效。仅当您的会员资格更新时，该设备才会从您的帐户中删除。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T10:11:18.987

是，但更新开发者订阅后将刷新设备数量

# iphone - Objective-C 排序字符串日期数组

> ID：11374040
> 
> 赞同：4
> 
> 时间：2012-07-07T10:01:52.577
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

我有一个由日期组成的数组，但作为`NSString`. 我如何对其进行降序排序？

编辑：我最终通过调整我的代码来使用 NSDate 因为使用其他方法在我的情况下不起作用

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T10:13:18.777

你可以使用`sortedArrayUsingFunction`，考虑下面的例子

```
NSString *str1 = @"03-07-2012";
NSString *str2 = @"01-07-2012";
NSString *str3 = @"02-07-2012";

NSArray *arr = [NSArray arrayWithObjects:str1, str2, str3, nil];
arr = [arr sortedArrayUsingFunction:dateSort context:nil];

//The date sort function
NSComparisonResult dateSort(NSString *s1, NSString *s2, void *context) {

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"dd-MM-yyyy"];

    NSDate *d1 = [formatter dateFromString:s1];
    NSDate *d2 = [formatter dateFromString:s2];

    return [d1 compare:d2]; // ascending order
    return [d2 compare:d1]; // descending order
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T10:20:06.307

将 NSString 日期隐蔽到 NSDate 对象，然后根据日期对数组进行排序

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]];
[dateFormatter setDateFormat:@"YYYY-MM-dd HH:mm:ss ZZZ"];

NSDate *date = [dateFormatter dateFromString:dateStr]; 

NSComparisonResult dateSort(NSString *s1, NSString *s2, void *context) {
    NSDate *d1 = [NSDate dateWithString:s1];
    NSDate *d2 = [NSDate dateWithString:s2];
    return [d1 compare:d2];
}

NSArray *sorted = [unsorted sortedArrayUsingFunction:dateSort context:nil]; 
```

# asp.net-mvc-3 - MVC3 代码优先：迁移和生成数据库

> ID：11374042
> 
> 赞同：0
> 
> 时间：2012-07-07T10:02:14.577
> 
> 标签：asp.net-mvc-3, entity-framework, code-first, dbmigrator

我有点迷失如何让实体框架与自动迁移一起工作。我想：

*   数据库不存在时自动创建
*   模型更改时要自动更新的数据库

对于后者，我使用的是 DbMigrator。它相当慢，所以我不想在每个请求都运行它，而且我在同一个应用程序中有多个数据库，所以它不能进入​​ Application_Start 这就是为什么我把它放在 Session_Start 中，如下所示：

```
 if (Session["started"] == null)
    {
        // this takes care of any database updates that might be necessary. 
        MigrationConfiguration configuration = new MigrationConfiguration();
        DbMigrator migrator = new DbMigrator(configuration);
        List<string> pm = migrator.GetPendingMigrations().ToList();
        if (pm.Count > 0)
        {
            migrator.Update();
        }
    }
    else
    {
        Session["started"] = "started";
    } 
```

不确定这是否是正确的方法，但它似乎有效，但是当它不存在时它实际上并没有生成数据库。它给了我一个“无法打开登录请求的数据库”db“”

我以前使用以下方法进行过此工作：

```
 Database.SetInitializer<DbContext>(new InitializerIfModelChange()); 
```

这会删除数据库并生成种子数据，这在数据库不存在时很好，但它也可以在数据库更改时触发（在这种情况下，我希望 DbMigrator 处理它）这之前在 Application_Start 但我不确定怎么办。恐怕会和 DbMigrator 冲突。为了实现前面描述的两件事，我将如何设置这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:12:41.950

`Update-Database`每当需要更改数据库时，我都会在包管理器中手动运行。最初，我使用`Database.SetInitializer`您创建数据库的方式，但现在已将其注释掉。

Checkout [Entity Framework 4.3 自动迁移演练](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)以获得更高级的帮助。

这应该适用于您想要的，然后如果您需要创建一个新数据库，只需`Database.SetInitializer<NewDBContext>(new NewDBInitializer());`像您一样添加，构建并运行。然后将其注释掉，这样它就不会在模型更改时运行，而是使用`Update-Database`包管理器中的命令。

# php - 如何使用水平滚动打印 div 的全部内容？

> ID：11374043
> 
> 赞同：-3
> 
> 时间：2012-07-07T10:02:26.550
> 
> 标签：php, javascript, css

我有一个有 20 列的 div，我想打印整个数据。

我使用了 window.print 但它仅适用于窗口的可见部分我使用了许多方法并在 Google 中搜索但找不到任何东西。

我想在一行中打印整个数据

任何人都可以提供同样的帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:07:32.933

您无法打印滚动部分。

您需要使用不同的样式表进行打印，其中没有应用滚动。

```
<link rel="stylesheet" type="text/css” href="sheet.css" media="print" /> 
```

# macos - Mac OS X 安装 emacs 不会自动加载某些库（？）

> ID：11374045
> 
> 赞同：1
> 
> 时间：2012-07-07T10:03:03.843
> 
> 标签：macos, emacs, osx-lion, toolbar, libraries

似乎 Mac OS X 上的某些 emacs 安装不会自动加载某些库。这是我正在谈论的一个具体示例：

当我评估 elisp 命令“（工具栏模式 -1）”时，我收到错误：“调试器进入 - Lisp 错误：（void-function tool-bar-mode）”

这只是一个例子。我收到类似的错误，例如“（滚动条模式 -1）”等。

好的，我使用的是哪些 emacs 安装？我注意到这个问题：

*   Mac OS X 10.6 和 10.7 附带的默认 emacs 22 安装
*   Emacs 23; Mac OS X 10.6 和 10.7 上的 MacPorts 和 Fink 安装
*   在 Mac OS X 10.6 和 10.7 上安装 emacs 24 MacPorts
*   注意：以上都是终端（即非窗口）emacs

我没有注意到以下安装的这个问题：

*   任何 linux 安装的 emacs 22+
*   基于 Cocoa 的 Emacs.app 安装（可在此处获得：[http](http://emacsformacosx.com/) ://emacsformacosx.com/ ）

为了解决这个问题，我不得不在我的“.emacs”文件中添加诸如“(require 'tool-bar)”之类的库调用，以防止错误。为什么会这样？这些安装之间有什么实际区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:24:40.640

如果您只是从命令行运行 Emacs，则无需关闭工具栏或滚动条，因为它们在该环境中不做任何事情——这些模式适用于 GUI。

但是，如果您需要用于 GUI 和 CLI 的 .emacs，请使用以下内容：

```
(if window-system
    (tool-bar-mode -1)) 
```

# c# - 如何在主应用程序工作时显示对话框？

> ID：11374046
> 
> 赞同：0
> 
> 时间：2012-07-07T10:03:08.317
> 
> 标签：c#, winforms, multithreading

我希望在主应用程序连接到数据库并获取初始数据时显示一个加载表单。因为这可能需要 5-10 秒，所以我想通知用户正在发生一些事情。

这就是我想出的：

```
frmStart _frmStart = new frmStart();
Thread t = new Thread(() => _frmStart.ShowDialog());
t.Start();
objDAL = new DBManager();
objDAL.conSTR = Properties.Settings.Default.conDEFAULT;
PrepareForm();
t.Abort(); 
```

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:49:15.997

不，这并不能解决冻结的 UI 问题，它只是将其覆盖。不完美的是，对话框的父级是桌面，很容易出现在冻结的窗口下方，因此根本不可见。并且对话框不是常规窗口的模式，因为它在另一个线程上运行。当用户开始点击非响应窗口时的失败模式非常难看，当 UI 线程恢复活动时，这些点击都会被调度。

有一些解决方法（您必须自己调用 SetParent 并禁用主窗口），但这只是解决了错误的问题。你不应该让 UI 线程阻塞超过一秒钟。使用 BackgroundWorker 完成繁重的工作，使用 RunWorkerCompleted 事件处理程序中的查询结果更新表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:10:01.840

如果您使用的是 WinForms，您可能想看看这个[A Pretty Good Splash Screen in C#](http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C)。如果您使用的是 WPF，您可以查看这个使用 WPF[实现启动画面](http://www.codeproject.com/Articles/38291/Implement-Splash-Screen-with-WPF)。

# session - 如何在 Vim 的状态栏中添加当前会话文件名？

> ID：11374047
> 
> 赞同：3
> 
> 时间：2012-07-07T10:03:30.847
> 
> 标签：session, vim

我最近将[sessionman](https://www.vim.org/scripts/script.php?script_id=2010)插件添加到我的 Vim 配置中，到目前为止我很喜欢它。

我知道`v:this_session`在使用会话时 Vim 设置为会话文件名，我想将它添加到我的状态行。不幸的是，`v:this_session`它包含完整的文件路径，而且它通常太长而无法放入状态行。

所以我的问题是：如何在没有完整路径的情况下提取文件名并将其`v:this_session`添加到我的状态行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T13:13:25.020

为此，Vim对文件的最后一个组件具有`:help filename-modifiers`类似功能。`:t`您可以将它们与`fnamemodify()`函数一起使用（或者`expand()`如果您想修改内置的 Vim 文件标识符，如`%`）：

```
:echo fnamemodify(v:this_session, ':t') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:21:36.983

由于正斜杠字符在所有操作系统的 Vim 中都用作路径分隔符，因此要从完整路径中获取文件名，提取路径的最后一个部分就足够了。为此，可以使用 `matchstr()`or`substitute()`函数：

```
substitute(t, '^.*/', '', '') 
```

或者

```
matchstr(t, '[^/]*$') 
```

# sql-server - 有没有“Unicode 排序规则”之类的东西？

> ID：11374051
> 
> 赞同：23
> 
> 时间：2012-07-07T10:04:03.603
> 
> 标签：sql-server, unicode, internationalization

或者如果没有，那么实际上是什么 Sql Server `collation`？也许我对排序规则（作为一个概念）的理解是错误的。

我不想将我的排序规则指定为希腊语、冰岛语甚至西欧语。我希望能够使用 Unicode 支持的任何语言。

（我正在使用 MSSQL 2005）

更新：好的，我重新表述这个问题：是否有通用的、独立于文化的排序规则可用于任何文化的文本？我知道它不会包含特定于文化的规则，例如匈牙利语中的 'ty' 或德语中的 ß=ss，但会提供一致的、大部分可接受的结果。

是否有任何*非*文化特定的排序规则？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T20:57:25.807

好吧，总是有一个像 Latin1_General_BIN2 这样的二进制排序规则。它以数字顺序存储代码点，这可以是任意的。虽然它不是特定于文化的（尽管有名字）。

听起来没有任何智能方法可以将来自多种语言/文化的数据排序在一起，因此您可以做的不是半生不熟的解决方案，而是按二进制值排序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T10:15:02.073

这是一篇了解什么是排序规则的好文章，简短而有趣：[SQL Server 和排序规则](http://www.databasejournal.com/features/mssql/article.php/3302341/SQL-Server-and-Collation.htm)。

排序规则可以让您对数据进行比较和排序。据我所知，没有什么比 Unicode 排序规则更好的了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-24T15:15:45.090

[Unicode 排序算法技术标准文档http://www.unicode.org/reports/tr10/](http://www.unicode.org/reports/tr10/)中有一个默认的 Unicode 排序规则，即“默认 Unicode 排序规则元素表 (DUCET)” 。

但是有人称它为默认的 Unicode 排序规则而不是 Unicode 排序规则，因为当然不止一种——例如匈牙利语的 unicode.org 图表 [http://www.unicode.org/cldr/charts/28/collat ​​ion/ hu.html](http://www.unicode.org/cldr/charts/28/collation/hu.html) 描述了 Unicode 字符的匈牙利排序规则与 DUCET 的不同之处。

由于提出了这个问题，SQL Server 排序规则变得更加支持 Unicode [https://docs.microsoft.com/en-us/sql/relational-databases/collat ​​ions/collat​​ion-and-unicode-support?view=sql-server -2017 年](https://docs.microsoft.com/en-us/sql/relational-databases/collations/collation-and-unicode-support?view=sql-server-2017)。同时，一些开源 DBMS 通过合并 ICU（Unicode 国际组件）库获得了支持 DUCET 和其他 Unicode 排序规则的能力。

# html - 使 html svg 对象也成为可点击的链接

> ID：11374059
> 
> 赞同：161
> 
> 时间：2012-07-07T10:05:16.187
> 
> 标签：html, object, svg, anchor

我的 HTML 页面中有一个 SVG 对象，并将其包装在一个锚点中，因此当单击 svg 图像时，它会将用户带到锚点链接。

```
<a href="http://www.google.com/">
    <object data="mysvg.svg" type="image/svg+xml">
        <span>Your browser doesn't support SVG images</span>
    </object>
</a> 
```

当我使用此代码块时，单击 svg 对象不会将我带到谷歌。在 IE8< 中，span 文本是可点击的。

我不想修改我的 svg 图像以包含标签。

我的问题是，如何使 svg 图像可点击？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2013-06-16T13:22:41.340

实际上，解决这个问题的最好方法是......在 <object> 标签上，使用：

```
pointer-events: none; 
```

*注意：安装了 Ad Blocker 插件的用户在悬停时会在右上角获得一个类似标签的 [Block]（与 Flash 横幅相同）。通过设置这个css，它也会消失。*

[http://jsfiddle.net/energee/UL9k9/](http://jsfiddle.net/energee/UL9k9/)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-04T16:51:22.900

我遇到了同样的问题并设法通过以下方式解决了这个问题：

使用设置为 block 或 inline-block 的元素包装对象

```
<a>
    <span>
        <object></object>
    </span>
</a> 
```

添加到`<a>`标签：

```
display: inline-block;
position: relative; 
z-index: 1; 
```

和`<span>`标签：

```
display: inline-block; 
```

和`<object>`标签：

```
position: relative; 
z-index: -1 
```

在此处查看示例：http: [//dabblet.com/gist/d6ebc6c14bd68a4b06a6](http://dabblet.com/gist/d6ebc6c14bd68a4b06a6)

通过此处的评论 20 找到[https://bugzilla.mozilla.org/show_bug.cgi?id=294932](https://bugzilla.mozilla.org/show_bug.cgi?id=294932)

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-08-02T13:40:49.893

想以此为荣，但我在这里找到了解决方案：

[https://teamtreehouse.com/forum/how-do-you-make-a-svg-clickable](https://teamtreehouse.com/forum/how-do-you-make-a-svg-clickable)

将以下内容添加到锚的 css 中：

```
a.svg {
  position: relative;
  display: inline-block; 
}
a.svg:after {
  content: ""; 
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left:0;
}

<a href="#" class="svg">
  <object data="random.svg" type="image/svg+xml">
    <img src="random.jpg" />
  </object>
</a> 
```

链接适用于 svg 和后备。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2013-10-23T22:30:11.280

你也可以在你的 SVG 底部贴上这样的东西（就在结束`</svg>`标签之前）：

```
<a xmlns="http://www.w3.org/2000/svg" id="anchor" xlink:href="/" xmlns:xlink="http://www.w3.org/1999/xlink" target="_top">
    <rect x="0" y="0" width="100%" height="100%" fill-opacity="0"/>
</a> 
```

然后只需修改链接以适应。我已经使用 100% 的宽度和高度来覆盖它所在的 SVG。这项技术的功劳归功于 Clearleft.com 上的聪明人——这是我第一次看到它使用的地方。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2013-07-25T10:46:55.120

理查德解决方案的简化。至少在 Firefox、Safari 和 Opera 中有效：

```
<a href="..." style="display: block;">
    <object data="..." style="pointer-events: none;" />
</a> 
```

有关其他解决方案，请参阅[http://www.noupe.com/tutorial/svg-clickable-71346.html](http://www.noupe.com/tutorial/svg-clickable-71346.html)。

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2012-07-07T10:59:30.593

最简单的方法是不使用 <object>。而是使用 <img> 标记，并且锚应该可以正常工作。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2014-08-06T16:10:47.603

要在所有浏览器中完成此操作，您需要结合使用@energee、@Richard 和@Feuermurmel 方法。

```
<a href="" style="display: block; z-index: 1;">
    <object data="" style="z-index: -1; pointer-events: none;" />
</a> 
```

添加：

*   `pointer-events: none;`使它在 Firefox 中工作。
*   `display: block;`让它在 Chrome 和 Safari 中运行。
*   `z-index: 1; z-index: -1;`使其在 IE 中也能正常工作。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-07-14T09:42:28.413

我也通过编辑 svg 文件解决了这个问题。

我将整个 svg 图形的 xml 包装在一个具有点击事件的组标签中，如下所示：

```
<svg .....>
<g id="thefix" onclick="window.top.location.href='http://www.google.com/';">
 <!-- ... your graphics ... -->
</g>
</svg> 
```

解决方案适用于所有支持对象 svg 脚本的浏览器。（对于不支持 svg 的浏览器，您的 object 元素中默认有一个 img 标签，您将覆盖所有浏览器）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-08-19T10:25:07.280

我尝试了这种干净简单的方法，似乎适用于所有浏览器。在 svg 文件中：

```
<svg>
<a id="anchor" xlink:href="http://www.google.com" target="_top">

<!--your graphic-->

</a>
</svg> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-05-10T16:50:46.737

我只是简单地使用

```
 <a href="#">
            <img src="../../assets/images/logo.svg" alt="">
        </a> 
```

除了我试图应用 :hover 状态外，它工作正常。把我带到这里的是当我使用

```
 <a href="#">
            <object data="../../assets/images/logo.svg" type="image/svg+xml" class="logo">
            </object>
        </a> 
```

我丢失了链接，并在 DevTools 中注意到该链接仍然出现在 SVG 周围，但 :hover 状态有效。利用 energee 的优雅答案，我的链接有效，但我当然失去了：悬停。所以看起来 object 标记对于将 :hover 更改应用于 SVG 来说并不是一个很好的解决方案。

我很好奇，你为什么不使用 img 标签来显示一个没有任何特殊添加的 SVG，比如 :hover？使用 img 标签也适用于 a 标签。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-04T14:32:34.500

只是不要使用`<object>`. 这是一个对我有用的解决方案`<a>`和`<svg>`标签：

```
<a href="<your-link>" class="mr-5 p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-white focus:outline-none focus:text-white focus:bg-red-700 transition duration-150 ease-in-out" aria-label="Notifications">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" 
    height="30"><path class="heroicon-ui" fill="#fff" d="M17 16a3 3 0 1 1-2.83 
    2H9.83a3 3 0 1 1-5.62-.1A3 3 0 0 1 5 12V4H3a1 1 0 1 1 0-2h3a1 1 0 0 1 1 
    1v1h14a1 1 0 0 1 .9 1.45l-4 8a1 1 0 0 1-.9.55H5a1 1 0 0 0 0 2h12zM7 12h9.38l3- 
   6H7v6zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
    </svg>
</a> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-15T07:08:18.070

这已经很晚了，但我想知道为什么[energee 的解决方案](https://stackoverflow.com/a/17133804/10896407)有效：具体来说，`<object>`元素如何影响其父元素。

### tl; dr您不能单击其中包含`<object>`元素的锚点，因为单击事件被`<object>`元素内部的任何内容捕获，然后不会将其冒泡。

[jsfiddle](https://jsfiddle.net/o6suxgrq/)

* * *

扩展原始问题中描述的症状：不仅`<object>`锚元素内的元素会导致锚变得不可点击，似乎作为**任何元素**`<object>`的子元素的元素都会导致, , 和事件（也可能是触摸事件）不要在父元素上触发，*（当您在**的边界矩形内单击时。）***`click``mousedown``mouseup`*`<object>`***

 **```
<span>
    <object type="image/svg+xml" data="https://icons.getbootstrap.com/icons/three-dots.svg">
    </object>
</span> 
```

```
document
    .querySelector('span')
    .addEventListener('click', console.log) // will not fire 
```

现在，`<object>`元素的行为有点“类似” `<iframe>`，因为它们将建立新的浏览上下文，*包括内容是`<svg>`文档时。*[`HTMLObjectElement.contentDocument`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLObjectElement/contentDocument)在 JavaScript 中，这通过和[`HTMLObjectElement.contentWindow`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLObjectElement/contentWindow)属性的存在表现出来。

这意味着，如果您向以下`<svg>`元素中的元素添加事件侦听器`<object>`：

```
document
    .querySelector('object')
    .contentDocument  // returns null if cross-origin: the same-origin policy
    .querySelector('svg')
    .addEventListener('click', console.log) 
```

然后单击图像，您将看到正在触发的事件。

然后很清楚为什么`pointer-events: none;`解决方案有效：

*   如果没有这种风格，任何`MouseEvent`被认为是“交互式”的（例如`click`and `mousedown`，但不是`mouseenter`）都会被发送到 内的嵌套浏览上下文`<object>`，**它永远不会冒泡出来。**

*   使用这种样式，`MouseEvent`s 不会`<object>`首先发送到 s，然后`<object>`s 的父元素将照常接收事件。

这也应该解释`z-index`解决方案：只要您可以防止`click`将事件发送到嵌套文档，单击应该按预期工作。

（在我的测试中，`z-index`只要父元素不是`inline`并且`<object>`被定位并且具有负数，该解决方案就可以工作`z-index`）

（或者，您可以找到一种方法来使事件备份）：

```
let objectElem = document.querySelector('object')
let svgElemt = objectElem.contentDocument.querySelector('svg')

svgElem.addEventListener('click', () => {
    window.postMessage('Take this click event please.')
    // window being the outermost window
})

window.addEventListener('message', console.log) 
```

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2012-07-07T10:08:41.713

使用 javascript 执行此操作并将`onClick`-attribute 添加到您的`object`-element：

```
<object data="mysvg.svg" type="image/svg+xml" onClick="window.location.href='http://google.at';">
    <span>Your browser doesn't support SVG images</span>
</object> 
```**

# eclipse - 导入类期间在 Eclipse 中发生错误

> ID：11374061
> 
> 赞同：0
> 
> 时间：2012-07-07T10:05:33.383
> 
> 标签：eclipse, spring, spring-mvc, eclipse-juno

我正在 Eclipse Juno 中开发 Spring MVC 项目。我的课程有几个包。一旦我从不同的包中使用了另一个类中的一个类，我在弹出消息中发生了这个错误：

```
An error has occurred. See error log for more details.
assertion failed: 
```

而且没有更多的信息。我应该在 Eclipse 中做什么来防止此类错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T09:56:49.910

首先阅读[什么是断言](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)。
并且看起来断言已启用，在禁用它后尝试运行程序。

# android - Adobe air android honeycomb/ics 强制关闭

> ID：11374072
> 
> 赞同：0
> 
> 时间：2012-07-07T10:07:50.687
> 
> 标签：android, apache-flex, air, flash-media-server, forceclose

我有一个视频应用程序（客户端 a），它通过 Flash 媒体服务器流式传输和接收音频。它还通过 adobe air 桌面应用程序（客户端 b）进行持续的服务器端轮询以保持参与度，该应用程序执行相同的操作。我遇到的问题是： - 90% 的时间当客户端 b 结束参与时，客户端 a 中的应用程序会关闭。- 5% 我已经看到应用程序在客户 a 结束参与时关闭。- 在姜饼中效果很好。不在蜂窝中+

调试不抛出任何东西，logcat 抛出消费者关闭输入的错误......我已将问题隔离到我的闪存媒体服务器类，但是我没有做任何与任何其他连接类不同的事情。

有没有人遇到过这个问题？就像我说的，它在姜饼中效果很好......任何指针都会很棒。我已经把头撞在墙上两个星期了，还在数着呢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:49:09.640

花了一段时间才找到问题，但最终它是 fms 服务器的问题。我每隔一段时间运行一个函数来检查用户时间戳等，但是当客户端 b 完成参与时，即使连接已经关闭，时间戳仍然试图运行并断开用户连接。一旦我解决了这个问题，问题就消失了。

这个问题如何不影响 android 2.x 设备仍然很奇怪......

这可能对许多人没有太大帮助，但是如果您确实看到您的应用程序强制关闭，并且您的应用程序收到的最后一条消息是 fms，请检查您在 .asc 文件中所做的事情在你的 fms 中。

不幸的是，我很难学到这一点，花了 3 周时间查看我的代码，认为这是它正在做的事情或某种错误......很高兴我错了！

# iphone - 当我点击下载按钮时，需要很长时间才能转到下一个屏幕

> ID：11374076
> 
> 赞同：0
> 
> 时间：2012-07-07T10:08:13.743
> 
> 标签：iphone

我是 iphone 新手，我有一点疑问。我正在处理 audioPlayer 项目在我的屏幕上我有一个按钮下载这是屏幕![我的初始屏幕右上角有一个下载按钮](../Images/afbd69795b33b2afb0c50b46c622b218.png)

当我们点击下载此代码执行

*   (IBAction)gotoProgressViewController:(id)sender { @try {

    ```
    //ShowProgressViewCont is initialized with the nibName
    showProgressViewController = [[ShowProgressViewCont alloc]initWithNibName:@"ShowProgressViewCont" bundle:nil];

    //UINavigationController is initialized with the rootViewController showProgressViewController
    navigationController = [[UINavigationController alloc]initWithRootViewController:showProgressViewController]; 

    //The transition style of the navigationController is set to UIModalTransitionStyleCrossDissolve
    navigationController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

    //Presents a modal view managed by the given view controller to the user.Here navigation Controller that manages the modal view.
    [self presentModalViewController:navigationController animated:YES]; 
    ```

    } @catch(NSException * e){NSLog(@"Exception At: %s %d %s %s %@", **FILE** , **LINE** , **PRETTY_FUNCTION** , **FUNCTION** ,e);}@finally{} }

然后单击下载后需要 5 到 6 秒才能出现下一个屏幕

![当我们在初始屏幕中单击下载按钮时，它将出现此屏幕](../Images/49b76d41569b82e5e962bd41af58eefa.png)

在这里它包括最初有下载图像

我的实际问题是，当我们在 2 或 3 秒内单击初始屏幕中的下载按钮时，我们可以减少反应时间吗？我想要第二个屏幕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:15:22.377

是的，您可以通过在第二个线程上下载图像来减少下载时间，请考虑这个示例[惰性表](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

它在第二个线程上下载图像，提高应用程序的响应能力

# java - 如何将java对象转换为C结构

> ID：11374077
> 
> 赞同：3
> 
> 时间：2012-07-07T10:08:14.783
> 
> 标签：java, c

如何将 Java 对象转换为 C 结构？我知道我可以用 XML 翻译数据，但我需要更快速、更简单的方法来做到这一点？有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:33:26.060

数据序列化是这里的流行词。

对于一个安静的令人印象深刻的技术列表，您可能想在这里阅读：[http ://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats](http://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats)

# c# - 如何隐藏在 Visual Studio 2010 C# 中创建的表？

> ID：11374083
> 
> 赞同：0
> 
> 时间：2012-07-07T10:08:43.933
> 
> 标签：c#

如何隐藏在 Visual Studio 2010 C# 中创建的表？我想要做的是隐藏表格（有点像时间表），并且只在用户点击其中一个日历日期时让它出现。我尝试使用 Visibility: hidden; 但是当我在设计视图上查看时，整个表都消失了。我需要帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:22:42.050

你的问题有点不清楚，但据我了解，这是你可以实现的：

在代码隐藏（C# .cs 文件）中，您可以使用 style 属性将表设置为隐藏，如下所示：

.aspx 文件

```
<table id="table1" runat="server">
......td's and tr's.....    
</table> 
```

.cs 文件在`Page_Load`

```
table1.Style.Add("display", "none"); 
```

这将允许您在设计模式下查看表格，并且当页面在客户端浏览器上呈现时`Table`将被隐藏。

***注意**：您不能`this.table1.Visible = false;`在代码隐藏中使用隐藏表格，因为在这种情况下表格永远不会到达客户端浏览器并且您根本无法显示表格，因此`table1.Style.Add("display", "none");`如果您想将表格发送到客户端的浏览器，您应该使用在隐藏模式。*

您可以在客户端使用 JQuery 或 Javascript 来显示表格。

因此，当用户单击日历日期时，您会调用 javascript 函数。此 javascript 函数将通过 Id 或类从**DOM获取****Table**对象，并通过设置显示它**`Style display``block`**

# java - 为什么这不想画不止一次？

> ID：11374084
> 
> 赞同：1
> 
> 时间：2012-07-07T10:08:54.973
> 
> 标签：java, opengl, lwjgl

我正在学习opengl，我想从一个变量中绘制50个纹理，这就是我所做的：在更新方法中：

```
public void update(){
    while(!Display.isCloseRequested()){
        input();
        for(int x = 0; x< 100; x++){
            block = new GrassBlock(x*32,10);
            block.draw();
        }
        Display.update();   
        Display.sync(60);
    }
} 
```

这就是我初始化openGL的方式：

```
 private void initGL(){
    glEnable(GL_TEXTURE_2D);
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glViewport(0, 0,640 , 480);
    glMatrixMode(GL_MODELVIEW);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0,640 , 480, 0, 1, -1);
    glMatrixMode(GL_MODELVIEW);
} 
```

这是 GrassBlock 的绘制方法：

```
@Override
public void draw() {
    grass.bind();
    glBegin(GL_QUADS);
    glTexCoord2f(0, 0);
    glVertex2f(100, 100);
    glTexCoord2f(1, 0);
    glVertex2f(100+grass.getTextureWidth(),100);
    glTexCoord2f(1,1);
    glVertex2f(100+grass.getTextureWidth(),100+grass.getTextureHeight());
    glTexCoord2f(0,1);
    glVertex2f(100,100+grass.getTextureHeight());
    glEnd();
} 
```

另外，我知道我不能将块创建放在更新方法中，因为它会循环，但是我将如何解决我可以从一个变量中绘制多个纹理的问题？

现在我只得到一个，它总是闪烁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:26:17.007

您可能忘记清除深度缓冲区

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
                            ^^^^^^^^^^^^^^^^^^^^^ 
```

此外，`initGL`实际上所有代码都属于重绘函数的开头。视口的尺寸应通过从图形系统请求窗口的大小来获取。

```
glViewport(0, 0,640 , 480);
glMatrixMode(GL_MODELVIEW); <<<<<<<<
glMatrixMode(GL_PROJECTION);
glLoadIdentity(); 
```

切换到模型视图矩阵没有任何作用，因为您在之后立即切换回投影。

在绘图函数开始时将所有矩阵重置为标识，以开始一个众所周知的状态是一种很好的做法。

# javascript - Javascript setTimeout 不起作用

> ID：11374095
> 
> 赞同：-1
> 
> 时间：2012-07-07T10:10:42.057
> 
> 标签：javascript, settimeout

我知道这个问题已经被问过很多次了，但是尽管搜索了 google 和 stackoverflow 并进行了各种尝试，但我还是找不到解决问题的方法。

这是我的 JS：

```
 function Redirect(id)
    {
        window.open("go.php?id=" + id, "_blank");
    }

    function LinkPop(id)
    {           
        xmlObj = new XMLHttpRequest();
        xmlObj.open("GET", "pop.php?id=" + id, false);
        xmlObj.send();

        document.getElementById(id).style.fontSize = xmlObj.responseText + "px";
        document.getElementById(id).title = "Clicked " + (xmlObj.responseText - 18) + " times";

        window.setTimeout(function(){Redirect(id);}, 2000);
    } 
```

除了 2 秒延迟和打开新页面外，一切正常。如您所见，我尝试了一个没有帮助的关闭。我希望我错过了一些非常基本的东西......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:42:44.050

您正在尝试打开一个弹出窗口。由于过去滥用此功能，所有现代浏览器都有弹出窗口阻止程序，除非在受限情况下，否则会阻止您这样做。

特别是，浏览器通常仅在直接响应与网页的交互（例如点击）时才允许弹出窗口。超时事件不是交互，即使它是为响应较早的交互而触发的，因此您将无法打开默认设置的窗口。

您可以立即打开弹出窗口（您可以尝试将其作为弹出窗口打开并稍后将其聚焦以将其带到前面，尽管这并不总是可靠的）。或者，可能更好的是，忘记弹出窗口，只在当前页面上做一个简单的重定向。

# jquery - jquery spin不替换表单的提交按钮

> ID：11374096
> 
> 赞同：1
> 
> 时间：2012-07-07T10:10:42.263
> 
> 标签：jquery, ruby-on-rails-3.2

我使用 spin.js 和 jquery.spin 插件来为我的 Web 应用程序中的 ajax 提交的项目显示一个旋转图标。

它适用于常规链接按钮。但是对于提交按钮，它没有显示，我不知道为什么。

这是代码：

形式：

```
=form_for(@resource, :url => add_comment_resource_path, :remote => true) do |f|
                =text_area_tag :comment,nil, :class => "span7", :rows => 3
                =f.submit "Add Comment", :class => "btn authorize spin" 
```

JS：

```
//= require spin.min
//= require jquery.spin

    $('.spin').live('click',function(){
        $(this).spin('small');
    }); 
```

当我单击提交按钮时，应显示一个旋转图标。我可以在页面上看到以下内容被插入到 html 中：

```
<input class="btn btn-small authorize spin" name="commit" type="submit" value="Add Comment">
    <div class="spinner" style="position: relative; z-index: 2000000000; left: 537px; top: 950px; " aria-role="progressbar"></input> 
```

似乎微调器图标嵌套在输入中，这就是它不显示的原因。我怎样才能让它显示呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:13:24.973

有错别字，改一下：

```
$('.spin').live('click',function(){ 
```

至：

```
$('.spinner').on('click',function(e){ // you can use `on()` instead of `live()` which is deprecated
   e.preventDefault() 
```

# asp.net-mvc - 字典的隐藏输入 在 ASP.NET MVC 3

> ID：11374097
> 
> 赞同：6
> 
> 时间：2012-07-07T10:10:53.107
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dictionary, hidden-field

我需要在 Post 操作中获取我的模型属性，因此需要为它们隐藏元素，但我的`Dictionary <string, string>`. 这是我的模型：

```
public class ViewModel{
 ...
 public ViewPart ViewPart { get; set; }
}

public class ViewPart {
 ...
 public Dictionary<string, string> Flags { get; set; }
} 
```

我的控制器：

```
Dictionary<string, string> flags = new Dictionary<string, string>();
flags.Add("kind", "Edit");
flags.Add("Command", "Save");
ViewModel model = new ViewModel(){ Flags  = flags };
return View(model); 
```

在视图中：

```
@foreach(var item in Model.ViewPart.Flags) { 
 <input type="hidden" id="ViewPart_Flags_@(item.Key)" value="@item.Value" name="ViewPart.Flags[@(item.Key)]" />
} 
```

我也试试这个：

```
@foreach(var item in Model.ViewPart.Flags) { 
  @Html.HiddenFor(modelItem => item)
} 
```

**更新** 发布操作：

```
[HttpPost]
public ActionResult MyPostAction(ViewModel model){
  //model.ViewPart.Flags is null
} 
```

但是在 Post 操作`Flags`中始终为空，为什么？我的错在哪里？有没有更好的方法将变量从视图传递到操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T11:08:26.810

如果要模型绑定到字典，则需要两个隐藏字段，一个用于 the `Key`，一个用于 the ：`Value`

```
var index = 0;
foreach (var item in Model.ViewPart.Flags)
{

    <input type="hidden" value="@item.Key" 
                         name="ViewPart.Flags[@(index)].Key"/>
    <input type="hidden" value="@item.Value" 
                         name="ViewPart.Flags[@(index)].Value"/>

    index++;
}
    <input type="submit" value="Save"/> 
```

请注意，您还需要一个运行索引来使模型绑定器满意。

或者，如果您不想运行，可以使用附加隐藏`Index`字段来解决：

```
foreach (var item in Model.ViewPart.Flags)
{

    <input type="hidden" value="@item.Key" 
                         name="ViewPart.Flags.Index"/>
    <input type="hidden" value="@item.Key" 
                         name="ViewPart.Flags[@(item.Key)].Key" />
    <input type="hidden" value="@item.Value" 
                         name="ViewPart.Flags[@(item.Key)].Value" />
}
    <input type="submit" value="Save"/>
} 
```

您可以在这两篇文章中找到很多关于模型绑定与集合的信息：

*   [用于模型绑定到数组、列表、集合、字典的 ASP.NET 有线格式](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)
*   [模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:52:40.497

将您的发布操作更改为此

```
[HttpPost]
public ActionResult MyPostAction(ViewModel model, ViewPart viewPart)
{
    model.ViewPart.Flags = viewPart.Flags;
} 
```

并在视图中使用

```
@foreach(var item in Model.ViewPart.Flags) { 
  @Html.HiddenFor(modelItem => item)
} 
```

如果这不起作用，请检查呈现的 HTML 的源并查看是否呈现了隐藏信息。我不确定是否`@Html.HiddenFor`可以使用`Dictionary`您可能需要像以前那样写出来，如果没有的话。

# c# - Castle Windsor Register by Convention - 如何注册基于实体的通用存储库？

> ID：11374102
> 
> 赞同：2
> 
> 时间：2012-07-07T10:11:50.087
> 
> 标签：c#, castle-windsor, castle

这应该是一个普遍的问题，我已经搜索但找不到任何解决方案，如果它是一个骗子，请指出适当的链接。

所以，我有一个通用存储库来支持几个实体，有一刻我像下面这样注册它：

```
public class ExpensiveServiceInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        Register<EntityA>(container);
        Register<EntityB>(container);
        //etc etc 
        //when there is a new one should register it manually
    }

    void Register<T>(IWindsorContainer container) where T : Entity
    {
        container.Register(Component.For<IRepository<T>>()
            .ImplementedBy<Repository<T>>()
            .LifeStyle.Transient);
    }
} 
```

注意：
Repository 位于`Repositories`namespace
Entities 位于`Entities`namespace 上，包括`Entity`所有实体的基类

它工作正常，但我认为它应该是一种更好的方法，更自动的方式使用约定注册，所以当我在我的项目中添加一个新实体时，windsor 会自动识别它，并为它注册存储库。还有一个问题，如何忽略`Entity`（基类）使其未在容器上注册。

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T10:43:50.853

你的意思是这样的？

```
container.Register(Component.For(typeof(IRepository<>))
            .ImplementedBy(typeof(Repository<>))
            .LifeStyle.Transient); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-15T10:00:49.747

请尝试此代码

```
var container = new WindsorContainer();

        container.Register(Component.For(typeof(ICustomGenericRepository<>))
        .ImplementedBy(typeof(CustomGenericRepository<>))
        .LifeStyle.Transient); 
```

# jquery - 为什么这个 jquery 移动示例不起作用？

> ID：11374107
> 
> 赞同：0
> 
> 时间：2012-07-07T10:12:23.113
> 
> 标签：jquery, jquery-mobile

谁能告诉为什么jquery mobile popup在这个例子中不起作用？

[http://jsfiddle.net/6tebj/1/](http://jsfiddle.net/6tebj/1/)

我希望此文本仅在单击链接时显示为弹出窗口...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:54:32.330

弹出窗口计划用于 Jquery mobile 1.2。您正在加载 jquery mobile 1.1 库。

参考：[https ://github.com/jquery/jquery-mobile/issues/3218](https://github.com/jquery/jquery-mobile/issues/3218)

# jsf - 如何在 gwt 或 jsf 中集成现成的 servlet？

> ID：11374108
> 
> 赞同：0
> 
> 时间：2012-07-07T10:12:40.303
> 
> 标签：jsf, gwt, jakarta-ee, servlets

我已经用 Java 制作了我的 servlet。但现在，我想做一些花哨的网页。我想过使用 GWT 或 JSF。但看起来我将不得不重复我在 Servlet 中所做的所有工作。我可以在 GWT 或 JSF 中使用我准备好的 servlet 而不必在我的 servlet 中进行大量更改吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:37:31.980

如果您需要这样做，那么您的 servlet 一开始就设计得很糟糕。听起来模型与 servlet 紧密耦合，而不是像 EJB/实体那样是独立的。除了重写代码以使您的模型在“普通” servlet/JSP webapp 和 JSF webapp（以及任何其他 MVC 框架）中都可重用之外，没有什么可做的。向您团队中更有经验的 Java EE 开发人员/架构师寻求必要的帮助。

# android - Phonegap onPause 事件不起作用

> ID：11374112
> 
> 赞同：1
> 
> 时间：2012-07-07T10:13:17.067
> 
> 标签：android, events, cordova, onpause, notificationmanager

我在phonegap下开发了一个android应用程序。我使用了本地通知插件。当应用程序活动暂停时，我试图从服务器获取通知。

我在javascript中试过：

```
document.addEventListener("pause", onPause, false); function onPause() {
// Handle the pause event

setInterval( function() {
    Ext.data.JsonP.request({
            url: 'http://convert4mobile.net/backend/API/qr/push.php',
            callbackKey: 'callback',
            success: function(data)
            {

                if(data.success == true)
                {
                    if (typeof plugins !== "undefined") {
              window.plugins.localNotification.add({
                        date : new Date(),
                        message : data.time+"\r\n"+data.msg,
                        ticker : "A new code was generated",
                        repeatDaily : false,
                        id : 4//data.uid
                });
                }
                }
            }
           });
} , 10000);} 
```

在我的主要活动中：

```
@Override  public void onBackPressed() { moveTaskToBack(true);  return;  } } 
```

每次按下后退按钮时暂停事件。

但是，当应用程序被后退按钮/结束通话按钮/屏幕锁定暂停时，暂停事件不起作用。我只是让它工作一次。

我错过了什么？

# android - 为什么旧的安卓手机无法运行新的 api 应用程序？

> ID：11374118
> 
> 赞同：0
> 
> 时间：2012-07-07T10:14:44.813
> 
> 标签：android, compiler-construction

这是一个愚蠢的问题，但我真的不明白为什么。代码最终编译成字节码，应该可以在所有 Dalvik VM 中运行。虽然 api 发生了变化，但 Dalvik VM 理解的字节码应该或多或少相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T10:16:01.217

因为您的应用没有捆绑 Android 框架。框架代码驻留在设备上。

这就是为什么要在旧的 Android 版本中使用某些较新的 API，您必须在 APK中包含[支持库。](http://developer.android.com/tools/extras/support-library.html)

android.jar 文件包含在构建路径中，供您的代码编译但不*导出*到 APK。如果要导出，那么设备上的每个应用程序都必须捆绑 Android 框架，这会导致不必要的膨胀，更不用说安全隐患了。

# css - 如何使一个单词相对于一个段落居中？

> ID：11374122
> 
> 赞同：0
> 
> 时间：2012-07-07T10:15:48.540
> 
> 标签：css

假设我有以下文本输入：

> ```
>  Essen Oxland Road, 34, LS4 7Du      
>  Leeds, United Kingdom 
> ```

我怎样才能样式显示为：

![在此处输入图像描述](../Images/6350426a43c614f68846b759c460f4f4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:34:12.947

`display:inline-block`与_`vertical-align:middle`

HTML

```
<span class="left">
    Essen
</span>
<span class="right">
    Oxland Road, 34, LS4 7Du<br>
    Leeds, United Kingdom
</span> 
```

CSS

```
span.left, span.right {
  display: inline-block;
  vertical-align: middle;
} 
```

[JS Bin 上的演示](http://jsbin.com/ohujip/2/)

请注意，`display:inline-block`在 IE7 及更低版本中无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:44:46.317

```
.left {
      float:left;
      line-height: 2.0;
      }

    <span class="left">
        Essen
    </span>
    <span>
        Oxland Road, 34, LS4 7Du<br>
        Leeds, United Kingdom
    </span> 
```

# ios - TTPhotoViewController 旋转后调整大小

> ID：11374123
> 
> 赞同：0
> 
> 时间：2012-07-07T10:15:50.203
> 
> 标签：ios, three20, ttphotoviewcontroller

当我推送一个 TTPhotoViewController (three20) 时，我得到了这个结果： [http ://twitpic.com/a4vr5f](http://twitpic.com/a4vr5f)

然后，我旋转设备并得到： [http ://twitpic.com/a4vra5](http://twitpic.com/a4vra5)

有人知道为什么three20不调整图片大小以获得全屏风景吗？以及如何解决？

谢谢

- -编辑 - -

图片的链接被颠倒了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:06:40.540

Because three20 preserves your picture's proportions. What is the size of your picture?

# jquery - 如何使用 jquery 的 CSS 属性？

> ID：11374130
> 
> 赞同：0
> 
> 时间：2012-07-07T10:17:07.743
> 
> 标签：jquery

我只是想重置我的 css，这似乎不起作用，尽管它遵循此处详述的相同结构：http: [//www.w3schools.com/jquery/css_css.asp](http://www.w3schools.com/jquery/css_css.asp)

```
function labelReset(){
    $(".year").css("color" : "#000", "opacity" : "0.5", "size" : "14px");
    $(".dot").css("background-color" : "#000", "width" : "7px", "height" : "7px");
}; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:18:00.773

你忘了使用括号`{}`：

```
 function labelReset(){
        $(".year").css({"color" : "#000", "opacity" : "0.5", "size" : "14px"});
        $(".dot").css({"background-color" : "#000", "width" : "7px", "height" : "7px"});
    }; 
```

对于单个属性：`.css( propertyName, value )`，对于多个属性：`.css( map )`，请检查[jQuery API css](http://api.jquery.com/css/)。

# javascript - 取消所有 Javascript 的 setTimeouts 和 setIntervals

> ID：11374131
> 
> 赞同：7
> 
> 时间：2012-07-07T10:17:26.443
> 
> 标签：javascript, jquery, animation

在给定的秒数后取消所有 JS setTimeout、setInterval 和 requestAnimationFrame 的正确方法是什么？

编辑：对不起，我应该解释更多！该代码来自数据库或某些 API，因此我无法跟踪超时、raf 或间隔 ID。所以我没有定时器的ID，我可以很容易地让你清除Interval 或clearTimeout 或cancelAnimationFrame。我知道我必须使用它们，但我不知道如何获取所有动画 ID（如果有的话）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-07T10:20:46.697

您需要保留您创建的每个间隔、超时和 requestAnimationFrame 的 Id 并`window.clearInterval(id)`对其进行调用等。

一个非常骇人听闻/蛮力的方法是这样的：

```
for (var i = 1; i < 99999; i++) {
    window.clearInterval(i);
    window.clearTimeout(i);
    window.mozCancelAnimationFrame(i); // Firefox
} 
```

但我不建议这样做。

**更新：**

在一定时间后执行此操作：

```
setTimeout(function () {
   for (var i = 1; i < 99999; i++) {
        window.clearInterval(i);
        window.clearTimeout(i);
        window.mozCancelAnimationFrame(i); // Firefox
    }
}, 3000); // After 3 seconds 
```

**更新 2：**

如果您不为每次超时等保留参考，我不相信有比蛮力方式更好的方法，所以为了更容易做到这一点（如[this SO answer](https://stackoverflow.com/a/958498/678801)所建议），您可以覆盖默认的 setInterval：

```
var intervals = new Array();
window.oldSetInterval = window.setInterval;
window.setInterval = function(func, interval) {
    intervals.push(oldSetInterval(func, interval));
}

// Now you can loop over intervals and clear them 
// one by one when ever you want to.

for (var interval in intervals) {
   window.clearInterval(interval);
} 
```

该示例显示了如何为 执行此操作`setInterval`，但当然也可以以相同的方式`setTimeout`完成`requestAnimationFrame`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:22:57.600

您需要获取对每个超时的引用（的返回值`setTimeout`），然后使用`clearTimeout()`您希望取消它们。与 setInterval 相同。

# c# - 其他对象引发的工作事件时的跨线程操作

> ID：11374134
> 
> 赞同：1
> 
> 时间：2012-07-07T10:17:41.553
> 
> 标签：c#, visual-studio-2010, thread-safety, multithreading

我有一个“userdetails”类，它有一个名为“detailschanged”的事件。每当用户详细信息更改时，都会引发它。
当我在我的新表单中创建一个新的“userdetails”对象（objUserDetails）时，我将订阅事件“detailschanged”以指示用户有关数据更改的信息。

```
objUserDetails.detailschanged += InformtoUser 
```

InformtoUser 是一种新形式的方法。在 InformtoUser 方法中，我正在访问表单的控件（比如标签的文本属性）。
访问控件时，我收到“跨线程操作”错误。
如何避免这种跨线程操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:31:57.827

这里的问题是线程安全：

> 对 Windows 窗体控件的访问本质上不是线程安全的。如果您有两个或更多线程操作控件的状态，则可能会强制控件进入不一致的状态。其他与线程相关的错误是可能的，例如竞争条件和死锁。确保以线程安全的方式执行对控件的访问非常重要。
> 
> 在不使用 Invoke 方法的情况下从创建控件的线程以外的线程调用控件是不安全的。

[`Control.Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)在对 Windows 窗体控件进行任何跨线程调用时需要使用。

例如：

```
delegate void SetTextCallback(string text);

private void SetText(string text)
{
    if (textBox.InvokeRequired)
    {    
        SetTextCallback d = new SetTextCallback(SetText);
        this.Invoke(d, new object[] { text });
    }
    else
    {
        textBox.Text = text;
    }
} 
```

或者：

```
this.Invoke((MethodInvoker) delegate {
    this.textBox.Text = "Some text here";
}); 
```

有关详细信息，您应该参阅**[如何：对 Windows 窗体控件进行线程安全调用](http://msdn.microsoft.com/en-us/library/ms171728.aspx)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:32:36.180

UI 控件只能从 UI 线程更新。如果您正在使用 WinForms，您应该这样做：

```
mycontrol.Invoke((MethodInvoker)(() =>
{
  mycontrol.Text="some text";
})); 
```

如果您在 WPF 中，那么您应该使用调度程序：

```
myControl.Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(() => myControl.Text = "")); 
```

# forms - 在 oracle 表单中创建一个隐藏的弹出文本项以接受值

> ID：11374135
> 
> 赞同：0
> 
> 时间：2012-07-07T10:17:52.047
> 
> 标签：forms, oracle, oracleforms

我正在尝试设置 Windows 的位置属性，在设计中我有四个箭头键用于上下左右。现在我的要求是，每当我单击向上按钮时，应该打开一个弹出文本并在输入值后要求输入 x 坐标值，它应该将该值向右或向左移动，无论它是给定的。

当我关闭表单并再次重新打开时，它应该在最后更改的位置打开，即它应该记住最后一个 xy 位置并在相同位置打开。

任何建议都会受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:02:53.363

我假设您`WHEN-BUTTON-PRESSED`在每个四个键中都使用触发器来打开一个弹出窗口。您可以将 x 和 y 坐标的值存储在包含`TAB_COORDINATES`和 列的表 ( )`X_COORD`中`Y_COORD`。每次用户输入 x 和 y 坐标时，您都可以使用该值简单地更新表中的列。现在在您的表单级触发器中`WHEN-NEW-FORM-INSTANCE`，您可以查询表格以查找 x 和 y 坐标并使用下面的代码进行设置。

```
set_window_property(winname,x_pos, x);
set_window_property(winname,y_pos, y); 
```

这样，当用户打开表单时，它将定位在表格中的 x 和 y 值处。请记住，此 x 和 y 值将在全局级别生效，即所有用户都将看到它在这些坐标处设置，除非您的应用程序具有在用户级别设置此类参数的特殊方法。

# java - 在spring mvc中处理多个表单

> ID：11374136
> 
> 赞同：1
> 
> 时间：2012-07-07T10:17:59.127
> 
> 标签：java, jsp, spring-mvc, tabs, contextmenu

在我的 jsp 中，我有多个包含单独表单的选项卡，请参见下图：

![在此处输入图像描述](../Images/b51cf3bb99df1b2dad71744789e41609.png)

问题：由于所有选项卡都存在于同一个 JSP 中，因此最多可达 1300 行。这是不容忽视的。

由于我使用的是spring mvc，我需要在返回视图时绑定所有4个对象（ABC，ABC SUB1，ABC SUB2，ABC SUB3），这也是不可接受的。

我正在考虑将整个页面分成 4 个不同的 jsp（包括基于需求或事件的 jsp），但仍然对我的解决方案不满意。

任何机构都可以给我任何其他解决方案......？？？？

谢谢 .....！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:24:51.373

使用 Ajax 一次只提交您需要的内容。

# sql - SQL 查询错误：SQLDMO

> ID：11374138
> 
> 赞同：0
> 
> 时间：2012-07-07T10:18:05.117
> 
> 标签：sql, sql-server-2008, sql-server-2005

以下是我的 SQL 查询，它在 SQL Server 2005 上运行良好，但在 SQL Server 2008 上，它会引发错误：

> sp_Security 错误：无法创建 SQLDMO 服务器对象

**SQL查询：**

```
DECLARE @object int
DECLARE @hr int
DECLARE @hack smallint
DECLARE @return varchar(255)
DECLARE @Results nvarchar(255)
DECLARE @server sysname
DECLARE @login sysname
DECLARE @tsql varchar(1500)

set @server = 'YOGESH\SQLEXPRESS'

EXEC @hr = sp_OACreate 'SQLDMO.SQLServer', @object OUT

IF @hr < 0
BEGIN
   RAISERROR('sp_Security error: Unable to create SQLDMO Server object', 0, 1)
   RETURN
END

EXEC @hr = sp_OASetProperty @object,'LoginSecure', 'False'

IF @hr < 0
BEGIN
   RAISERROR('sp_Security error: Unable to set LoginSecure', 0, 1)
   GOTO ExitProc
END

Print ' Security Audit for Server : ' + @server

set @tsql = 'DECLARE login_cursor CURSOR FOR SELECT loginname FROM master.dbo.syslogins order by loginname' 

exec (@tsql)

OPEN login_cursor

FETCH NEXT FROM login_cursor
INTO @login

WHILE @@FETCH_STATUS = 0
BEGIN
   set @hack = 0
   set @Results = 'Connect("' + @server +'","'+@login+'","'+@login+'")'

   EXEC @hr = sp_OAMethod @object, @Results

   IF @hr = 0
   begin
      print 'login : ' + @login + ' security problem with password ' + @login
      EXEC @hr = sp_OAMethod @object, 'Disconnect'

      set @hack = 1
   end

   IF (@hack = 0)
   begin
     set @Results = 'Connect("' + @server +'","'+@login+'","'+'")'

     EXEC @hr = sp_OAMethod @object, @Results

     IF @hr = 0
     begin
        print 'login : ' + @login + ' security problem with password NULL'

        EXEC @hr = sp_OAMethod @object, 'Disconnect'

        set @hack = 1
     end
   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:55:32.400

正如 hardmath 的评论中所引用的，Microsoft 不再随 SQL Server 2008 分发 SQL-DMO 库，而是使用 SQL SMO。即便如此，您仍然可以通过“Microsoft SQL Server 2005 向后兼容性组件”安装 SQL-DMO（您可以在[此页面](http://www.microsoft.com/en-us/download/details.aspx?id=16177)上找到该软件包的下载链接）。

这是启用不使用 SQL-DMO 的 SQL Server 登录的另一种方法：

```
USE [master]
GO
EXEC xp_instance_regwrite N'HKEY_LOCAL_MACHINE', N'Software\Microsoft\MSSQLServer\MSSQLServer', N'LoginMode', REG_DWORD, 2
GO 
```

我怀疑上述代码不适用于 SQL Server 2008 之前的 SQL Server 版本。

# c++ - 关于模板的 C++ 错误 LNK 1120

> ID：11374140
> 
> 赞同：-5
> 
> 时间：2012-07-07T10:18:22.330
> 
> 标签：c++, templates

> **可能重复：**
> [为什么在使用模板时会出现“未解析的外部符号”错误？](https://stackoverflow.com/questions/456713/why-do-i-get-unresolved-external-symbol-errors-when-using-templates)
> [使用模板链接错误](https://stackoverflow.com/questions/550219/link-error-using-templates)

我在两个文件“MyHeap.h”和“MyHeap.cpp”中有一个模板类“MyHeap”。在vs10中编译，ok。但是当我尝试在 main 中使用这个类时，发生了这个错误。我环顾四周，仍然无法自己解决这个问题。请帮我...

错误信息 >>

```
MyHeap<int> minHeap(MyHeap<int>::MaxHeap); 
```

错误1 error LNK2001: unresolved external symbol "public: __thiscall MyHeap::MyHeap(enum MyHeap::HeapType)" (??0?$MyHeap@H@@QAE@W4HeapType@0@@Z) D:\Document\Visual Studio 2010\Projects\C++\ConsoleCPP_Trivia\ConsoleCPP_Trivia\program.obj 错误2 error LNK1120: 1 unresolved externals D:\Document\Visual Studio 2010\Projects\C++\ConsoleCPP_Trivia\Debug\ConsoleCPP_Trivia.exe

```
MyHeap.h:
-----------------------------------------------------------
#pragma once

#include <vector>
using namespace std;

template <class T>
class MyHeap
{
public:
    static enum HeapType {CustomizedHeap, MaxHeap, MinHeap};

private:
    typedef bool (*COMP_FUNC)(const T&, const T&);
    COMP_FUNC _comp;
    HeapType _heapType;
    vector<T> _data;

public:
    MyHeap(HeapType heap_type = MaxHeap);
    MyHeap(COMP_FUNC compare_function);

    void add(const T& item);    
    T remove();
    bool isEmpty() const;
    void clear();

private:
    bool __compare(const T&, const T&);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:22:33.263

模板必须在头文件中定义。您不能在源文件和头文件中分离模板类/函数的实现。

原因是，模板是 C++ 的编译时“特性”，它们的实现必须在编译时可见。

# xml - 如何确保 Eclipse 自动检测 XML 文件？

> ID：11374142
> 
> 赞同：0
> 
> 时间：2012-07-07T10:18:23.487
> 
> 标签：xml, eclipse

怎么回事？

我的 Eclipse 没有为我提供 XML 文件的 XML 视图。另外，在包资源管理器中，XML 文件不会像那些那样突出显示。

当我打开 XML 文件时，Eclipse 会打开普通的文本视图。此外，如果文件显然是用 XML 编写的，并且它们具有 .xml 结尾。

我想要的是，Eclipse 为我提供了编辑器底部的选项卡切换器。通常用于在 XML 文件的设计/源视图之间切换，并带有特定于 XML 的突出显示。

如何确保 Eclipse 以后自动检测 XML 文件？

我在 Linux Mint 上运行 Eclipse 版本 3.7.0。

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:48:41.290

Eclipse 有多种风格，在基本安装中可能包含也可能不包含某些插件。您可能没有安装[Eclipse XML Editors 和 tools](http://www.eclipse.org/webtools/sse/)。

要安装 XML 工具，您只需打开*Help -> Install Updates*，在下拉列表中选择 Juno 更新站点[http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)并在下面的过滤器字段中键入“XML”。

在我看来，更好的选择是不使用 Mint 中打包的 Eclipse（因为大多数 Linux 发行版包含可怕的旧版本 Eclipse），而是直接从[http://eclipse.org/downloads/](http://eclipse.org/downloads/)下载它。您最终可能希望选择“Eclipse IDE for Java EE Developers”，因为它已经包含 XML 工具。

# java - 一种自动生成JButtons的方法？

> ID：11374143
> 
> 赞同：4
> 
> 时间：2012-07-07T10:18:30.040
> 
> 标签：java, swing, methods, jbutton

我目前是一个 Java 新手，编写一个程序，本质上是一个棋盘游戏，几乎与跳棋相同。不幸的是，这也意味着我需要一百个 JButton 用于棋盘格。我知道有一种方法可以自动生成 JButton，我已经看到它完成了。不过，我不知道我会怎么做。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T10:28:38.960

如果你想生成一个棋盘游戏，你应该使用`GridLayout`它来帮助你以最小的努力定位你的按钮。像这样的东西：

```
public JPanel createBoardGame()
    JPanel boardGame = new JPanel(new GridLayout(numberOfRows,numberOfColumns));
    for (int i=0; i<numberOfRows*numberOfColumns; i++) {
        boardGame.add(new JButton(""));
    }
} 
```

这是一篇不错的[文章](https://sites.google.com/site/drjohnbmatthews/buttons)，应该可以帮助您实现很多需求。

# vb.net - 如何使用 vb.net 重新排列 XML 的属性

> ID：11374145
> 
> 赞同：0
> 
> 时间：2012-07-07T10:19:45.873
> 
> 标签：vb.net, xmldom

我有一个带有一些属性的 xml，我想重新排列这些属性。而且我有不同属性的不同元素。我希望所有元素 'id' 作为我的第一个属性。

这里的小例子，

```
<item name="product" dep="DE" id="I001">Item</item> 
```

我想重新排列属性

```
<item id="I001" name="product" dep="DE">Item</item> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:36:14.757

```
Dim x As XElement = <item name="product" dep="DE" id="I001">Item</item>

x.ReplaceAttributes(x.Attributes("id").Concat(x.Attributes().Where(Function(a) a.Name <> "id"))) 
```

# iphone - 如何在通过情节提要添加的 UINavigationController 中设置 UINavigationItem 的颜色？

> ID：11374148
> 
> 赞同：2
> 
> 时间：2012-07-07T10:20:23.407
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar, uinavigationitem

我有一个设置，`storyboards`用于创建我的应用程序的结构。我使用 a `UINavigationController`，但是我想改变`UINavigationItem`苹果分配的默认蓝色的颜色。请有人建议在哪里执行此操作？我看了看，`IB`但没有显示该选项。我也考虑在我的一个类中设置它，但是我不确定在哪里，因为`UINavigationController`它没有手动初始化。

请问有人可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:23:56.490

您可以使用`UIAppearance`，如下

在您的 appdelegate`didFinishLaunchingWithOptions`添加以下行

```
[[UINavigationBar appearance] setTintColor:[UIColor greenColor]]; 
```

这会将导航栏的颜色更改为绿色

# c# - 如何使用 gmail 登录我的网站

> ID：11374150
> 
> 赞同：0
> 
> 时间：2012-07-07T10:20:42.033
> 
> 标签：c#, asp.net, vb.net

我的网站使用 facebook 帐户登录，我想使用 gmail 开发登录名。并将用户的数据保存到我的数据库中。如果您知道有关使用 gmail 登录的任何信息，请为我分享这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:22:00.470

使用 OAuth 怎么样？[谷歌有很多](https://developers.google.com/gdata/articles/oauth)关于你如何做到这一点的文章。还有[另一个](https://stackoverflow.com/questions/4380473/oauth-c-sharp-library-for-google-yahoo-twitter)关于 Google、Twitter 和 Yahoo 的 OAuth 库的问题。

[这是关于“如何在 Asp.Net 应用程序中集成 Google 身份验证”的教程](http://srinivasganaparthi.blogspot.se/2011/04/how-to-integrate-google-authentication.html)。

# php - 根据按钮单选的选择提交表单

> ID：11374155
> 
> 赞同：0
> 
> 时间：2012-07-07T10:21:24.897
> 
> 标签：php, radio-button

我正在为学校教育构建一个电子商务 Web 应用程序。客户可以在三种付款方式之间进行选择。比方说 Paypal、Moneybookers (Skrill) 和 Alertpay。这意味着：每个产品必须有三个“立即购买”按钮。以下是这些按钮的示例：

贝宝

```
<form action="https://www.paypal.com">
<input type="hidden" name="business" value="payment@mail.com">
<input name="submit" >
</form> 
```

警报支付

```
<form action="https://www.alertpay.com">
<input type="hidden" name="business" value="payment@mail.com">
<input name="submit" >
</form> 
```

赚钱的人

```
 <form action="https://www.moneybookers.com">
 <input type="hidden" name="business" value="payment@mail.com">
 <input name="submit" >
 </form> 
```

我的目的是在每件产品前只设置一个“立即购买”按钮。

单击该按钮后，客户将被重定向到一个页面，他们必须通过单选按钮选择一种付款方式。

选择后，他们将通过单击按钮提交选择，然后根据他们的选择，将登陆 Paypal 或 Alertpay 或 Moneybookers 网站。

我是 PHP 的新手，我知道这是可能的，但我不只是知道如何去做。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:32:31.400

为每个表单分配一个 ID。例如

```
<form id="paypal" action="https://www.paypal.com">
<input type="hidden" name="business" value="payment@mail.com">
<input name="submit" >
</form> 
```

然后将 radios 值设置为 Form Id。例如

```
<input type="radio" name="payMethod" value="paypal" class="paymentMethod" /> PayPal<br />
<input type="radio" name="payMethod" value="aleartPay" class="paymentMethod" /> Alert Pay<br />
<input type="radio" name="payMethod" value="moneyBookers" class="paymentMethod" /> Money Brookers<br /> 
```

然后单击按钮执行以下操作

```
var selectedMethodId = $(".paymentMethod:checked").val();
$('#'+selectedMethodId).submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:28:14.467

如果您想要一个页面，其中选定的单选按钮更改了`action`，`<form>`那么您将需要：

*   在选择单选按钮时将页面提交给服务器。返回的表单具有所需的`action`值。

*   `action`选择单选按钮时，使用一些 JavaScript 设置属性。这避免了等待新页面加载。

但是后一种方法确实需要一些代码来处理单选按钮选择事件，并且您需要考虑是否要支持禁用 JavaScript 的用户。

# groovy - 切换到 Groovy 2.0 时 Gradle 中的 ClassNotFoundException

> ID：11374157
> 
> 赞同：0
> 
> 时间：2012-07-07T10:21:38.927
> 
> 标签：groovy, gradle

我使用 Gradle 来管理 Groovy 项目。Groovy 设置为 1.8.6，然后我想切换到 Groovy 2.0。当我这样做时，我得到：

```
:compileGroovy

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileGroovy'.
> groovy/util/AntBuilder 
```

如果我从 STS 或命令行运行它，也会发生同样的事情。

有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T15:11:25.953

Ant 支持现在位于一个单独的模块中。您还需要添加依赖项`groovy-ant`。

# javascript - Extjs：将存储中的变量传递给控制器

> ID：11374162
> 
> 赞同：0
> 
> 时间：2012-07-07T10:22:07.540
> 
> 标签：javascript, extjs, datastore

我有一个从 Extjs 中的数据存储区呈现的自定义 View 对象：

```
Ext.define('MemOS.view.Shortcut', {
    extend: 'Ext.view.View',
    alias: 'widget.shortcut',

    name: 'shortcut',
    singleSelect: true,
    store: 'Apps',
    tpl: [
        '<tpl for=".">',
            '<div id="iconGroup" class="icon-wrap">',
                '<div id="icon" class="icon">',
                    '<img src="/images/icons/" />',
                '</div>',
                '<span> {appName} </span>',
            '</div>',
        '</tpl>'
    ],  
    itemSelector: 'div.icon',
    plugins: [
        Ext.create('Ext.ux.DataView.DragSelector', {}),
        //Ext.create('Ext.ux.DataView.Draggable', {})
    ],
}); 
```

我还有一个控制器，它带有一个事件，当双击商店中的商品时会调用该事件：

```
Ext.define('MemOS.controller.Shortcut', {
    extend: ('Ext.app.Controller'),
    stores: ['Apps'],
    views: ['Shortcut'],

    ref: [{
            ref: 'shortcut-one',
            selection: '',
            xtype: 'shortcut',
            autoCreate: true        
    }],

    init: function(){
        this.control({
            'shortcut': {
                itemdblclick: function(d, i, n, e) {
                    console.log('Display Value From Data Store Here');
                }
            }
        });
    },
}); 
```

我想做的是将被点击的项目的数据存储值传递给控制器​​，这样我就可以在警报框中显示适当的值。我的目标是稍后使用它根据用户点击打开特定的窗口/应用程序。

谁能帮我这个？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:57:41.767

同样，信息在文档中：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View-event-itemdblclick](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View-event-itemdblclick)

传递的第二个参数是记录，因此您可以使用 record.get() 访问记录中的任何值

```
itemdblclick: function(view, record) {
    console.log(record.get('nameOfField'));
} 
```

# ios - 使用 AVFoundation 访问图像和音频

> ID：11374164
> 
> 赞同：2
> 
> 时间：2012-07-07T10:22:30.237
> 
> 标签：ios, xcode, avfoundation

我正在使用 AVFoundation 访问图像和音频以制作视频。问题是当我为音频添加设备时。

```
AVCaptureDevice *audioDevice     = [AVCaptureDevice defaultDeviceWithMediaType: AVMediaTypeAudio];
AVCaptureDeviceInput * microphone_input = [AVCaptureDeviceInput deviceInputWithDevice:audioDevice error:nil];
AVCaptureAudioDataOutput * audio_output = [[AVCaptureAudioDataOutput alloc] init];
[self.captureSession2 addInput:microphone_input];
[self.captureSession2 addOutput:audio_output];
dispatch_queue_t queue2;
queue2 = dispatch_queue_create("Audio", NULL);
[audio_output setSampleBufferDelegate:self queue:queue2];
dispatch_release(queue2); 
```

和相机的图像。

```
AVCaptureDevice *cameraDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

//putting it on the input.
AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput deviceInputWithDevice:cameraDevice error:nil];

//selecting the Output. 
AVCaptureVideoDataOutput *captureOutput = [[AVCaptureVideoDataOutput alloc] init];

[self.captureSession addInput:captureInput];
[self.captureSession addOutput:captureOutput];
dispatch_queue_t    queue;
queue = dispatch_queue_create("cameraQueue", 0);
[captureOutput setSampleBufferDelegate:self queue:queue];
dispatch_release(queue); 
```

毕竟通过代表获得原始数据

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
   fromConnection:(AVCaptureConnection *)connection 
{   
if ([captureOutput isKindOfClass:[AVCaptureAudioDataOutput class]]) 
    [self sendAudeoRaw:sampleBuffer];
if ([captureOutput isKindOfClass:[AVCaptureVideoDataOutput class]]) 
    [self sendVideoRaw:sampleBuffer];} 
```

**获取图像原始数据的速度非常慢，大约每秒 2 张图像。我该如何改进它，因为我每秒查看大约 10-12 张图像。请帮忙**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-21T05:10:57.687

Do these four things to start:

Create a global queue, and don't release it until you deallocate the encapsulating object; specify 'serial' as the type of queue, and make the target the main queue:

```
_captureOutputQueue  = dispatch_queue_create_with_target("bush.alan.james.PhotosRemote.captureOutputQueue", DISPATCH_QUEUE_SERIAL, dispatch_get_main_queue()); 
```

Get the media type description from each sample buffer to determine whether the sample buffer contains audio or video data:

```
CMFormatDescriptionRef formatDescription = CMSampleBufferGetFormatDescription(sampleBuffer);
CMMediaType mediaType = CMFormatDescriptionGetMediaType(formatDescription);
if (mediaType == kCMMediaType_Audio)...
if (mediaType == kCMMediaType_Video)... 
```

Instead of sending the sample buffers to another class by a method call, make the other class the data output delegate; you're doubling the work, otherwise.

Finally, make sure you're running the AVSession in a queue of its own. Per Apple's documentation for AVCaptureSession:

> The `startRunning` method is a blocking call which can take some time, therefore you should perform session setup on a serial queue so that the main queue isn't blocked (which keeps the UI responsive). See [AVCam-iOS: Using AVFoundation to Capture Images and Movies](https://developer.apple.com/documentation/avfoundation/avcapturesession?language=objc) for an implementation example.

That includes any calls made to methods that configure the camera and, in particular, any that call the startRunning or stopRunning methods of AVCaptureSession:

```
dispatch_async(self.sessionQueue, ^{
    [self configureSession];
});

dispatch_async(self.sessionQueue, ^{
    [self.session startRunning];
});

dispatch_async(self.sessionQueue, ^{
    [self.session stopRunning];
}); 
```

If you cannot set the delegate as the class that processes the sample buffers, you may consider putting them on a queue to which both classes have access, and then passing a key:

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    static char kMyKey; // set key to any value; pass the key--not the sample buffer--to the receiver
    dispatch_queue_set_specific(((AppDelegate *)[[UIApplication sharedApplication] delegate].serialQueue,
                                &kMyKey,
                                (void*)CFRetain(sampleBuffer),
                                (dispatch_function_t)CFRelease); 
    });      
} 
```

In the receiver class:

```
dispatch_async(((AppDelegate *)[[UIApplication sharedApplication] delegate]).serialQueue, ^{
            CMSampleBufferRef sb = dispatch_get_specific(&kMyKey);
            NSLog(@"sb: %i", CMSampleBufferIsValid(sb));
}); 
```

# ios - 多个异步图像请求和分配给 NSArray

> ID：11374166
> 
> 赞同：1
> 
> 时间：2012-07-07T10:22:34.477
> 
> 标签：ios, xcode, asynchronous, uiimage

我努力解决应该是一个非常简单的问题，交叉手指将能够识别我的错误或提出更好的方法。

我要做的是从数组中检索多个 URL，然后为每个条目启动一个异步图像请求。这些请求将返回一个 UIView 对象，然后我将它们添加到另一个数组以供稍后在应用程序中使用。

它不起作用，我猜我的问题与循环初始化 AsyncImageView、分配给新数组以及进一步初始化的方式有关。

```
for (iccAssociatedMediaObject *media in self.mediaArray) {
    if ( [media.usage isEqualToString:@"360"]) {

        // >> Here we have the array entry we need this is a URL string
        NSLog(@"URL : %@", media.href);

        // >> Next I start an Async load of the images, a UIView is returned/created...
        HJManagedImageV *asyncImageView = [[HJManagedImageV alloc] initWithFrame:CGRectMake(0, 0, 620, 620)];
        [asyncImageView setBackgroundColor:[UIColor grayColor]];
        [asyncImageView showLoadingWheel];
        [asyncImageView setContentMode:UIViewContentModeScaleAspectFill];
        [asyncImageView.imageView setContentMode:UIViewContentModeScaleAspectFill];
        asyncImageView.url = [NSURL URLWithString:media.href];
        // asyncImageView.callbackOnSetImage = (id)self;

        // >> Next I add the UIView (asyncImageView) to an array for use later in the app
        [objMan manage:asyncImageView];

        // >> I think my problem relates to the HJManagedImageV initialization & reuse?????
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:51:19.773

为什么不在 For-In 循环之外分配它，然后每次通过循环时重新使用和重置它？

# ios - 如何将 NSDate 复制到 UIPasteboard？

> ID：11374169
> 
> 赞同：1
> 
> 时间：2012-07-07T10:22:37.980
> 
> 标签：ios, copy-paste, uipasteboard

根据我必须使用的文档

```
- (void)setValue:(id)value forPasteboardType:(NSString *)pasteboardType 
```

但我找不到 NSDate 的 UTI。我想复制原始 NSDate 本身以及格式化的字符串表示形式。

除了复制一个字符串之外，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:17:12.230

[Apple 文档](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1)对于如何引用属性列表对象（如 NSDate 对象）似乎相当模糊！

查看 MobileCoreServices 框架中的 UTCoreTypes.h，我想知道您是否可以使用 kUTTypeItem，因为它是基本类型——事实上，Apple 将其描述为“大多数事物的基本类型”？我也可能会尝试 kUTTypeContent ，因为它特别提到了粘贴板数据。

**编辑**

看起来好像其他人也有同样的问题 - 请参阅[此处的上一个线程](https://stackoverflow.com/questions/9164278/storing-nsarray-in-uipasteboard)并注意有关使用 NSPropertyListSerialization 的答案，虽然有点痛苦，但可能会让您将日期对象作为 plist 取回。

# java - JSP 会话不为空

> ID：11374178
> 
> 赞同：2
> 
> 时间：2012-07-07T10:24:07.803
> 
> 标签：java, jsp, session

我是 JSP 的新手，在我的 webapp 的特定页面上，我试图确定用户是否已登录。为此，我正在检查会话是否存在。如果会话不存在，那么我会将用户重定向到登录页面。

我对以下代码感到困惑

```
<%
if (null == session)
    out.println("session is null");
else
    out.println("session is not null");

if (null == request.getSession(false))
    out.println("request.getSession() is null");
else
    out.println("request.getSession() is not null");
%> 
```

在任何情况下都会产生以下输出：

```
session is not null request.getSession() is not null 
```

我不明白为什么会话存在，即使我没有创建它。如何检查用户是否登录？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T10:26:04.773

默认情况下，会话是由容器为您创建的。供 JSP 使用

```
<%@ page session="false" %> 
```

在您的 JSP 上禁用会话创建。

为了检查用户是否存在，您需要在用户登录后在服务器端的会话中放置一些令牌/密钥。像

```
request.getSession().setAttribute("usertoken","authenticated"); 
```

在 JSP 上只需检查属性是否存在而不是 null

```
if ("authenticated".equals(session.getAttribute("usertoken")) {
   // do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T10:41:12.067

每当有用户浏览您的网站时，就会有一个会话。检查用户是否登录不应该取决于“会话存在”，因为它们是非常不同的概念。

您可以在用户登录时将会话属性存储在会话对象中，并在他/她注销时将其删除。但我建议配置“基于容器的身份验证”，这样您就不需要在会话中存储任何属性，并且可以使用请求方法“getUserPrincipal()”和“getRemoteUser()”来了解用户是否登录。此外，这种身份验证被证明更安全，并且符合 JavaEE 原则。

要获取有关如何设置容器管理身份验证的一些说明，您可以查看 SO： [Performing user authentication in Java EE / JSF using j_security_check 中的另一个问题](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:29:46.810

您可以将用户设置为会话属性并检查其是否存在，而不是检查整个会话是否存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T11:11:54.237

Web 容器为每个用户会话保存一个唯一的会话标识符。当用户在 Web 应用程序中请求另一个页面时，会话标识符与 HttpSession 对象一起返回给 servlet。

HttpSession getSession() - 如果它是有效的，总是返回一个与这个请求关联的 httpsession 对象，如果无效将创建一个新的会话对象。

HttpSession getSession(boolean create) - 如果它有效则返回与此请求关联的 httpsession 对象，但如果无效则仅当“create”输入为“true”时才创建新的会话对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-13T09:49:59.650

我想在@jdevelop 的回答上再补充一点：

一旦您`<%@ page session="false" %>`在 JSP 页面中写入，`session`对象将直接变为不可用。这就是为什么您必须使用`request.getSession(false)`（当然您必须添加`null`检查）来访问会话对象的原因。

# jquery - 将 Jquery 与 PhoneGap 一起使用

> ID：11374185
> 
> 赞同：1
> 
> 时间：2012-07-07T10:25:17.207
> 
> 标签：jquery, cordova

我只是在测试 PhoneGap 快速入门之一的修改版本。我还引用了 JQuery。但是，当我想使用 Jquery 更改 div 的内容时，出现错误，但简单的警报就可以正常工作。

```
function querySuccess(tx, results) {
    var s = "";
    for (var i=0; i<len; i++){
        s += "Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data + "<br />"; 
    }

    //This cause an error
    //$("#cnt").html(s);

    //This works fine
    alert(s);
} 
```

你能告诉我我错过了什么吗？完整代码如下。

```
<!DOCTYPE html>
<html>
  <head>
  <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

        <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
        <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>        

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

        <script type="text/javascript" charset="utf-8">

            // Wait for PhoneGap to load
            //
            document.addEventListener("deviceready", onDeviceReady, false);

            // Populate the database 
            //
            function populateDB(tx) {
                tx.executeSql('DROP TABLE IF EXISTS DEMO');
                tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
                tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
                tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
            }

            // Query the database
            //
            function queryDB(tx) {
                tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
            }

            // Query the success callback
            //
            function querySuccess(tx, results) {
                var len = results.rows.length;
                console.log("DEMO table: " + len + " rows found.");
                var s = "";
                for (var i=0; i<len; i++){
                    console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data);
                    s += "Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data + "<br />"; 
                }

                $("#cnt").html(s);
                //alert(s);
            }

            // Transaction error callback
            //
            function errorCB(err) {
                console.log("Error processing SQL: "+err.code);
            }

            // Transaction success callback
            //
            function successCB() {
                var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
                db.transaction(queryDB, errorCB);
            }

            // PhoneGap is ready
            //
            function onDeviceReady() {
                var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
                db.transaction(populateDB, errorCB, successCB);
            }
            </script>
  </head>
  <body onload="onBodyLoad()">
      <h1>Example</h1>
      <p>Open Database</p>
      <div id="cnt">this</div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:50:56.760

该代码在设备和浏览器中都可以正常工作

[http://jsfiddle.net/dhavaln/ujKuF/](http://jsfiddle.net/dhavaln/ujKuF/)

正如您提到的 jquery 和 jquery mobile 的 CDN url，只需确保正确加载这些库，因为这是您使用 jquery 的唯一代码。

```
$("#cnt").html(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:08:06.673

**在 for 循环中粘贴此代码。**

$("#cnt").append(s);

# matlab - 如何更改 Plotyy 第二轴的颜色和字体大小？

> ID：11374186
> 
> 赞同：0
> 
> 时间：2012-07-07T10:25:34.960
> 
> 标签：matlab

我使用 MATLAB 的 plotyy 函数绘制了两条曲线：

```
[AX,H1,H2] = plotyy(voltage_span, amplitude,voltage_span, Ca_SR); 
```

问题是我无法更改第二个轴（右侧）的颜色和字体。下图是我的 plotyy 函数的输出。 ![在此处输入图像描述](../Images/f9a212580730e5e241c0ef15a7fb46ab.png)

MATLAB 帮助指出，要更改轴的标签，应使用以下内容：

```
set(get(AX(1),'Ylabel'),'String','Slow Decay') 
set(get(AX(2),'Ylabel'),'String','Fast Decay') 
```

所以，我尝试了以下命令（不起作用）：

```
set(get(AX(2),'YColor'),[1 0 1]); % MATLAB gives ERROR! Invalid handle object. 
```

如果输入 get(AX(2))，他们可以看到右轴的所有属性，这些属性似乎没有颜色属性。所以我想知道问题出在哪里以及如何更改右轴的颜色和字体大小（？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:39:34.370

要更改右轴的字体大小，请输入以下代码：

```
set(AX(2),'YColor', [1 0 0]); % Change the right Axis's color to red
set(AX(2),'FontSize', 20); % Change the right Axis's font size to 20 
```

“YColor”属性是右轴的颜色。Ax(2) 将手柄固定在右轴上（而 Ax(1) 固定在左轴上）。

您可能会问为什么以下内容不起作用：

```
set(get(AX(2),'YColor'),[1 0 1]); 
```

原因是“YColor”不是句柄，

```
get(AX(2),'YColor') 
```

只返回右轴的颜色（默认为浅绿色）：

```
>> get(AX(2), 'YColor')

ans =

         0    0.5000         0 
```

但是，要更改左轴的标签，您应该这样写：

```
set(get(AX(2),'Ylabel'),'String','Fast Decay') 
```

因为 'Ylabel' 属性实际上包含标签对象的句柄。

顺便说一句，要删除右轴的 XTicks，请执行以下操作：

```
set(AX(2),'XTick', []); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:30:53.070

```
set(AX(1), 'YColor', [0 1 0])
set(AX(2), 'YColor', [1 0 1]) 
```

# visual-studio-2010 - 得到最好的

> ID：11374191
> 
> 赞同：-1
> 
> 时间：2012-07-07T10:26:10.953
> 
> 标签：visual-studio-2010

我是 C# 编程的新手，我正在为一个正在创建 3 个问题测试的朋友做一个控制台应用程序。我需要获取前 5 名用户的姓名并显示他们的成绩，但我不知道该怎么做。你能帮我吗谢谢。这是代码：

```
string Name, yn;
int points = 0;
 do{
        Console.WriteLine("Please enter your fullname here:");
        Name = Console.ReadLine();
        Console.WriteLine(" ");

        Console.WriteLine("Hello " + Name + " Welcome to this simple test.");
        Console.WriteLine(" ");

        Console.WriteLine("1) What is 5 + 6?");
        Console.WriteLine("   a)10");
        Console.WriteLine("   b)30");
        Console.WriteLine("   c)11");
        Console.Write("Answer: ");
        string QAns1 = "C";
        string MyAns1 = Console.ReadLine().ToUpper();
        Console.Clear();
          if (MyAns1 == QAns1)
                {
                    Point++;
                }

        Console.WriteLine("2) What is the first letter of Apple?");
        Console.WriteLine("   a)A");
        Console.WriteLine("   b)c");
        Console.WriteLine("   c)a");
        Console.Write("Answer: ");
        string QAns2 = "A";
        string MyAns2 = Console.ReadLine().ToUpper();
        Console.Clear();
          if (MyAns2 == QAns2)
                {
                    Point++;
                }
       Console.WriteLine("3) What is the plural word of tooth?");
        Console.WriteLine("   a)tentacles");
        Console.WriteLine("   b)Teeth");
        Console.WriteLine("   c)tooths");
        Console.Write("Answer: ");
        string QAns3 = "B";
        string MyAns3 = Console.ReadLine().ToUpper();
        Console.Clear();
          if (MyAns3 == QAns3)
                {
                    Point++;
                }

        Console.WriteLine(" Mr. " + Name + " your final score is " + Point + "/10 ");
        Console.WriteLine(" Do you want to try again? ");
        yn = Console.ReadLine().ToUpper();
  }while (yn== "Y");
     Console.WriteLine("Thank you for using our program."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:35:36.143

有很多方法可以做到这一点，但为了让你开始，我在你的代码中添加了一些你可以玩的部分。

每场比赛结束后，您可以将分数和名称添加到集合中。

以人名为key的分数集合：

`var playedGames = new Dictionary<string, int>();`

然后当每场比赛结束时，您可以像这样将分数添加到集合中：

`playedGames.Add(Name, Point);`

然后，当没有更多比赛将要进行时，您可以按得分最高的人订购收藏并取出其中的 5 个，如下所示：

`var topScorers = playedGames.OrderByDescending(x => x.Value).Take(5);`

然后你可以打印出这 5 个顶级球员：

```
foreach (var topScorer in topScorers)
{
    Console.WriteLine("Congratulations {0} you made the highscore with {1}", 
        topScorer.Key, topScorer.Value);
} 
```

这是有关如何执行此操作的完整示例：

```
string Name, yn;
int points = 0;
var playedGames = new Dictionary<string, int>();
do
{
    var Point = 0;
    Console.WriteLine("Please enter your fullname here:");
    Name = Console.ReadLine();
    Console.WriteLine(" ");

    Console.WriteLine("Hello " + Name + " Welcome to this simple test.");
    Console.WriteLine(" ");

    Console.WriteLine("1) What is 5 + 6?");
    Console.WriteLine("   a)10");
    Console.WriteLine("   b)30");
    Console.WriteLine("   c)11");
    Console.Write("Answer: ");
    string QAns1 = "C";
    string MyAns1 = Console.ReadLine().ToUpper();
    Console.Clear();
    if (MyAns1 == QAns1)
    {
        Point++;
    }

    Console.WriteLine("2) What is the first letter of Apple?");
    Console.WriteLine("   a)A");
    Console.WriteLine("   b)c");
    Console.WriteLine("   c)a");
    Console.Write("Answer: ");
    string QAns2 = "A";
    string MyAns2 = Console.ReadLine().ToUpper();
    Console.Clear();
    if (MyAns2 == QAns2)
    {
        Point++;
    }
    Console.WriteLine("3) What is the plural word of tooth?");
    Console.WriteLine("   a)tentacles");
    Console.WriteLine("   b)Teeth");
    Console.WriteLine("   c)tooths");
    Console.Write("Answer: ");
    string QAns3 = "B";
    string MyAns3 = Console.ReadLine().ToUpper();
    Console.Clear();
    if (MyAns3 == QAns3)
    {
        Point++;
    }

    playedGames.Add(Name, Point);
    Console.WriteLine(" Mr. " + Name + " your final score is " + Point + "/10 ");
    Console.WriteLine(" Do you want to try again? ");
    yn = Console.ReadLine().ToUpper();
} while (yn == "Y");

var topScorers = playedGames.OrderByDescending(x => x.Value).Take(5);

foreach (var topScorer in topScorers)
{
    Console.WriteLine("Congratulations {0} you made the highscore with {1} in score!",
        topScorer.Key, topScorer.Value);
}
Console.WriteLine("Thank you for using our program.");

Console.ReadLine(); 
```

# mysql - 消息系统 MYSQL，获取最新回复的问题

> ID：11374192
> 
> 赞同：0
> 
> 时间：2012-07-07T10:26:11.717
> 
> 标签：mysql

我有一张桌子

message_id, to_id, from_id, 消息

我做了一个线程消息系统。我有 5 个人与 1 位成员交谈。

作为我看到的成员

会员 1 打招呼，会员 2 打招呼（我想让这个说最新的回复是您好）

成员 1 打招呼，成员 3 打招呼，成员 1 打招呼（我要这个打招呼）

成员 2 打招呼（我要这个打招呼）

现在，我只提供了一个 ID，即 member1 的 sessionid。我将如何展示我（member1）留下最新回复的场景 2。

我可以轻松做到

```
 SELECT * FROM messages WHERE to_id=$session_id ORDER BY message_id DESC LIMIT 1 
```

但这只会显示传入的消息。我需要显示传入和传出消息的最后一条。

你会建议什么查询？:\ 如果没有有效的方法，也许会改变表格？我第一次设置消息系统，欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:36:59.353

```
SELECT 
*
FROM messages 
WHERE to_id = $session_id
OR from_id = $session_id
ORDER BY message_id DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:18:38.590

您需要使用`UNION`运算符来检索最新的传入消息，并将最新的传出消息附加到该结果上：

```
SELECT * FROM messages WHERE to_id=$session_id ORDER BY message_id DESC LIMIT 1

UNION ALL

SELECT * FROM messages WHERE from_id=$session_id ORDER BY message_id DESC LIMIT 1 
```

# jquery - 从html文件中的js文件调用函数

> ID：11374195
> 
> 赞同：1
> 
> 时间：2012-07-07T10:26:27.737
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova

我有一个 html 文件。在单击按钮的那个文件中，我想调用一个 js 文件中的函数。怎么做？

这是我的html文件：

```
<!DOCTYPE html  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
   <title>Scrollable HTML table plugin for jQuery</title>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<title>jQuery Mobile: Demos and Documentation</title>

<link rel="stylesheet" href="../jquery.mobile/jquery.mobile-1.1.0.css" />
<link rel="stylesheet" href="../docs/assets/css/jqm-docs.css" />
<link rel="stylesheet" href="../docsdemos-style-override.css" />
<script type="text/javascript" charset="utf-8" src="../cordova-1.6.1.js"></script>
<script type="text/javascript" src="../jquery.mobile/jquery-1.7.2.min"></script>
<script type="text/javascript" charset="utf-8" src="../js/main.js"></script>
<script type="text/javascript" src="../jquery.mobile/jquery.mobile-1.1.0.js"></script>

</head>
<body  >

<!-- main login page -->
<div id="mypage" data-role="page" data-theme="a" data-ajax="false">

    <div data-role="header" align="center">
        <img border="0" src="../jquery.mobile/images/toplogo.png" />

    </div>

    <div data-role="content">

        <form id="loginForm" >
            <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br" >
                <label for="username">Username:</label> <input type="text"
                    name="username" id="username" value="" /> <label for="password">Password:</label>
                <input type="password" name="password" id="password" value="" /> <label
                    for="dob">Date of birth:</label> <input type="password"
                    type="password" name="dob" id="dob" value="" />
            </div>
            <div class="ui-body ui-body-a" >
                <fieldset class="ui-grid-a" data-theme="a" >
                    <div class="ui-block-a" data-theme="a">
                        <input type="submit" data-role="button" value="Login"
                            id="submitButton">
                    </div>
                    <div class="ui-block-b" data-theme="a">
                        <input type="reset" data-role="button" value="Cancel"
                            id="cancelButton"> 
                    </div>

                </fieldset>
            </div>
        </form>

    </div>
</div>

<!-- main menu -->

<script>

    console.log("clickkkkkkkkkkkkkkkkkkkk");
    $("#loginForm").on("submit",handleLogin);

</script> 
```

此 html 文件位于 www/UI 文件夹中。现在下面的 js 文件名为 main.js，它位于 www/js 文件夹中。其中包含handleLogin 函数。

```
function handleLogin()
{

 } 
```

如何从我的 html 文件中调用此函数。因为当我单击登录按钮时，会调用同一页面。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:35:54.870

调用同一页面是因为它正在提交表单。您需要取消此行为。

```
function handleLogin(evt) {
    evt.preventDefault();
    //do stuff here...
} 
```

注意`evt`论点。这会自动转发到任何事件回调 - 它是事件对象，其中包含有关触发事件的数据，并且必须引用它才能取消表单的默认操作。

**但是**，如果用户通过回车键提交表单，最好绑定到表单的提交事件而不是直接绑定到按钮。为此，请将您的 jQuery 更改为

```
$('#loginForm').on('submit', handleLogin); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:33:51.337

如果正确加载，代码应该可以工作`main.js`，你想要的[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)就像`submit`事件浏览器提交表单并且`handleLogin`函数没有执行一样。

> 如果调用该方法，则不会触发事件的默认动作。

```
$("#loginForm").on("submit",function(e){
   e.preventDefault();
   handleLogin()
}); 
```

# regex - 正则表达式接受从 0 到 100 的所有小数

> ID：11374196
> 
> 赞同：5
> 
> 时间：2012-07-07T10:26:34.557
> 
> 标签：regex

我想修改我现有的正则表达式，它接受从 0 到 99.99 的小数

```
\d{0,2}(\.\d{1,2})?$ 
```

我希望这被**接受**

```
100
100.0
100.00 
```

并且不应该**接受**

```
100.1
100.02
101 
```

谁能帮我修改上面的RE

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T10:34:42.593

我想最好将 100 的测试添加为特殊情况，使用`|`：

```
^(\d{0,2}(\.\d{1,2})?|100(\.00?)?)$ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-07T10:39:28.760

### 改为使用浮点比较

您已经有了使用正则表达式执行此操作的答案，但将其作为与边界条件的浮点比较来处理通常更有效。例如，使用 Ruby：

```
number = 99
number.to_f >= 0 and number.to_f <= 100
=> true

number = 100.01
number.to_f >= 0 and number.to_f <= 100
=> false 
```

在这些示例中，变量被转换为浮点数，以便正确比较字符串和整数，然后将浮点数与 0 和 100 的边界条件进行比较。它快速、易于编写并且（最重要的是）*易于阅读*.

你的旅费可能会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-28T08:46:08.530

从 00.00 到 99.99 为我工作

```
/^(?=.*\d)\d{0,2}(?:\.\d{0,2})?$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T10:35:20.493

```
100(\.0{1,2})?$|\d{0,2}(\.\d{1,2})?$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T10:37:11.280

```
(100(\.[0]{1,2})?|[0-9]{1,2}(\.[0-9]{1,2})?) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-20T20:04:55.013

```
^(0*(\d{1,2}(\.\d+)?)|\.\d+|100(\.0+$)?)$ 
```

这将适用于 0-100 之间的任何值，小数对大多数编程语言都有效

```
valid: 0, 0.2, .1, 0001.020, 9, 010, 100.0000
invalid: -1, 100.010, 1., ., empty 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-29T16:18:14.933

我想，这会帮助你 "^(100(.0{0,2}?)?$|([1-9]{0,1})([0-9]{1})((.[ 0-9]{0,2})|(\,[0-9]{0,2}))?)$"

它将匹配这之间的所有内容：0-100、0.0 - 100.0、0.00 - 100.00 以及所有这些都用逗号。

# jquery - 任何滑块未定义

> ID：11374200
> 
> 赞同：1
> 
> 时间：2012-07-07T10:27:02.747
> 
> 标签：jquery, anythingslider

我正在为相册使用 AnythingSlider jquery 插件，但在自定义它时遇到了一些问题。

滑块有效，但现在我想显示当前幻灯片编号和总数，并且在 Firebug 中出现错误。

脚本是这样的：

```
$(function() {

var current = $('#gallery').data('AnythingSlider').currentPage;
var pages = $('#gallery').data('AnythingSlider').pages;
$('.slides').append(current + '/' + pages);

$('#gallery').anythingSlider({
    appendBackTo: '.arrow-left',
appendForwardTo: '.arrow-right',
buildNavigation: false,
buildStartStop: false,
easing: 'linear',
resizeContents: false
    //expand: true
})
}); 
```

没有前 3 行它可以工作，但是 Firebug 说 $("#gallery").data("AnythingSlider") 是未定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:39:08.110

这是因为`data('AnythingSlider')`在插件初始化之前不可用，所以只需放置以下几行

```
var current = $('#gallery').data('AnythingSlider').currentPage;
var pages = $('#gallery').data('AnythingSlider').pages;
$('.slides').append(current + '/' + pages); 
```

这些行的底部

```
$('#gallery').anythingSlider({
    appendBackTo: '.arrow-left',
    appendForwardTo: '.arrow-right',
    buildNavigation: false,
    buildStartStop: false,
    easing: 'linear',
    resizeContents: false
   //expand: true
}); 
```

如果其他一切都正确，那么它应该可以工作。`data('AnythingSlider')`只有在插件初始化时才可用，因为这些数据将由这个插件添加，直到那时这些数据是`undefined`.

# xcode - 在可可应用程序中以 int 形式检索垃圾箱大小

> ID：11374202
> 
> 赞同：0
> 
> 时间：2012-07-07T10:27:32.760
> 
> 标签：xcode, cocoa, nstask, recycle-bin

可可应用程序是否可以将垃圾的大小作为 int 检索。这样做是`NSTask`正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:33:56.967

没有简单的方法可以做到这一点。尽管 Mac GUI 提供了一个统一的垃圾箱，但垃圾箱并不是只有一件事。每个卷都可以有一个单独的垃圾箱，并且卷可以来来去去。

此外，计算文件夹内容的大小可能非常耗时，因此这似乎不是一个好主意。

如果你真的想这样做，你会使用类似的东西枚举所有已安装的卷`-[NSFileManager mountedVolumeURLsIncludingResourceValuesForKeys:options:]`，将 URL 转换为`FSRef`s using ，从using传递for`CFURLGetFSRef()`获取卷参考号，使用传递for找到每个卷的垃圾箱，转换使用 得到URL的结果，使用传入数组为该 URL 创建一个目录枚举器，通过该枚举器枚举，将每个项目的作为，并累积这些s 的s。`FSRef``FSGetCatalogInfo()``kFSCatInfoVolume``whichInfo``FSFindFolder()``kTrashFolderType``folderType``FSRef``CFURLCreateFromFSRef()``-[NSFileManager enumeratorAtURL:includingPropertiesForKeys:options:errorHandler:``NSURLTotalFileAllocatedSizeKey``keys``NSURLTotalFileAllocatedSizeKey``NSNumber``-unsignedLongLongValue``NSNumber`

实际上，使用从 1 开始的 for `FSGetVolumeInfo()`、传递`kFSInvalidVolumeRefNum`for`volume`和索引来枚举卷可能更容易`volumeIndex`。你也会通过`kFSVolInfoNone`. `whichInfo`您将增加索引并重复直到它返回`nsvErr`。优点是这会直接为您提供卷参考号，因此您不必从 URL 转到`FSRef`卷参考号。缺点是这是一种更老式的 API。但是，您别无选择，只能使用这些 API，因为`FSFindFolder()`上述内容无可替代。

无论如何，当您枚举卷获取它们的垃圾文件夹时，您必须准备好遇到没有垃圾文件夹的卷。例如，网络安装的卷通常不会。

# c# - ScintillaNET 中的缩进和智能缩进

> ID：11374206
> 
> 赞同：2
> 
> 时间：2012-07-07T10:28:02.187
> 
> 标签：c#, .net, indentation, scintilla

有人可以描述我如何在 Scintilla.net 中进行缩进吗？

```
this.scintilla1.Indentation.SmartIndentType = ScintillaNet.SmartIndent.Simple; 
```

我很困惑需要做什么才能让它发挥作用。有人可以描述需要实现哪些事件处理程序才能使缩进起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T21:47:50.077

诀窍是设置`Indentation.IndentWidth`为`8`，如果`Indentation.TabWidth`也设置为`8`。

当然`Indentation.SmartIndentType`仍然必须设置为`Simple`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-14T13:16:22.107

对于希望添加缩进的人 - 请注意 ScintillaNET 3.x+ 没有内置到基本代码中的缩进。至少，在 3.6.3 中没有。

[有关将缩进命令直接发送到 Scintilla 的示例，](https://gist.github.com/Ahmad45123/f2910192987a73a52ab4)请参阅此消息。

有关 ScintillaNET 中的简单缩进系统的信息，请参阅[来自 jacobslusser（ScintillaNET 的维护者）的信息的此消息](https://github.com/jacobslusser/ScintillaNET/issues/35)。

# java - Jpype：“无法启动 AWT，因为 Java 是在第一个线程上启动的。”

> ID：11374211
> 
> 赞同：3
> 
> 时间：2012-07-07T10:29:00.057
> 
> 标签：java, jpype

我正在使用 Jpype 将 java 类用于 python 脚本。java 类涉及到 AWT 库的使用：这似乎是问题所在。

这是python脚本：

```
import jpype
import os.path
import threading

jarpath = os.path.join(os.path.abspath('.'), 'build/jar')
target=jpype.startJVM(jpype.getDefaultJVMPath(), "-Djava.ext.dirs=%s" % jarpath)
Capture = jpype.JClass('Capture')            # Capture is the class, contained in ./ folder
t = Capture(50,354,90,90,130,650,"num",36);  # create the instance
jpype.shutdownJVM() 
```

所以我只是想实例化这个类，然后退出。这是java类。我只报告导致错误的代码：

```
class Capture {

    public Capture(int x, int y, int width, int height, int mouseNextX, int mouseNextY, final String fnamestart, final int countmax) {
            //...
            images = new ArrayList<BufferedImage>();
            getImages(fnamestart,countmax);  //THIS is the problem
}

    // reference to getImages() method:
    public void getImages(String fname, int countmax) {

        images.clear();
        for(int i=0; i<=countmax; i++) {
            try {
                BufferedImage img = ImageIO.read(new File(fname+i+".bmp")); 
                images.add(img);
            } catch(IOException e) {
                images.add(null);
            }
         }
    }
} 
```

此代码在运行 python 脚本时引发以下错误：

```
 jpype._jexception.VirtualMachineErrorPyRaisable: java.lang.InternalError: Can't start
 the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is
 not specified in your application's Info.plist or on the command line 
```

长话短说，这是一个已知问题：Eclipse 有“自己的版本”，然后解决了。不幸的是，没有人谈到这个与 jpype 相关的问题。

我尝试了这些解决方案，但没有奏效：

*   在 python 脚本中，在启动 JVM 之前启动一个线程。然后在另一个线程中启动 JVM。

*   在 python 脚本中，使用参数启动 JVM `-XstartOnFirstThread`：

    ```
    target=jpype.startJVM(jpype.getDefaultJVMPath(), "-XStartOnFirstThread -Djava.ext.dirs=%s" % jarpath) 
    ```

*   在 java 代码中：使用 AWT 方法`invokeLater`，在构造函数中：

    ```
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            images = new ArrayList<BufferedImage>();
            getImages(fnamestart,countmax);
        }
    }); 
    ```

我真的不知道该怎么办，希望你能帮助我。谢谢，

乔瓦尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T13:07:34.483

使用此参数：

```
jpype.startJVM(jpype.getDefaultJVMPath(), '-Djava.awt.headless=true') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:04:18.987

`-XstartOnFirstThread`正是您必须确保**不在**命令行上的内容。在 python 中启动线程没有区别，问题在于 JVM 的线程。`invokeLater`也不会产生影响——AWT 运行循环必须在第一个线程上执行。这是一个 Cocoa-only 限制，所以我想你是在 Mac 上运行它。

现在，您应该通过准确查看用于启动 JVM 的命令行然后尝试追溯到根本原因（生成该命令行的代码）来搜索您的问题。JVM 正在由您无法直接控制的方法启动。

# objective-c - 如何解决 [__NSCFString _isResizable] 的运行时错误：无法识别的选择器发送到实例？

> ID：11374212
> 
> 赞同：5
> 
> 时间：2012-07-07T10:29:10.297
> 
> 标签：objective-c

我是 iphone 的初学者，在我的代码中由于未捕获的异常“NSInvalidArgumentException”而出现终止应用程序的运行时错误，原因：“-[__NSCFString _isResizable]：无法识别的选择器发送到实例 0x6e6e300”

我的代码是

```
- (void)viewDidLoad
{
    [super viewDidLoad];
     NSString *path=[[NSBundle mainBundle] pathForResource:@"Animalfile" ofType:@"plist"];
    NSDictionary *dict=[NSDictionary dictionaryWithContentsOfFile:path];
    NSArray *animal=[dict valueForKey:@"image"];
    NSLog(@"print:%@",dict);
    NSLog(@"hello:%@",animal);

    UIImage *img=[animal objectAtIndex:currentImage];
        [animalphoto setImage:img];

} 
```

给出适用于我的代码的任何建议和源代码......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T10:48:22.833

当您尝试将字符串视为图像时会出现问题：

```
UIImage *img = [animal objectAtIndex:currentImage]; 
```

数组中的值`animal`不能是图像，因为数组来自使用该方法`dict`从文件中读取的字典。[此方法将创建](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)[、](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)[、](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)[、](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)[、](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)[或](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)类型的对象。不在该方法可以创建的类型列表中，因此您的强制转换无效。`dictionaryWithContentsOfFile:`[`NSString``NSData``NSDate``NSNumber``NSArray``NSDictionary`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)`UIImage``dictionaryWithContentsOfFile:`

从错误消息看来，您得到的是一个`NSString`而不是`UIImage`. 检查该字符串的值以查看它所代表的内容：它可能是 URL、文件名或可用于获取图像的某种其他形式的标识符。根据字符串中的内容，更改程序以加载`img`而不是基于字符串的值。也许代码应该是

```
UIImage *img = [UIImage imageNamed:[animal objectAtIndex:currentImage]]; 
```

但是如果不知道字符串的值，就不可能确定。

# php - 访问根目录之外的 php 文件最安全的方法是什么？

> ID：11374226
> 
> 赞同：0
> 
> 时间：2012-07-07T10:31:53.117
> 
> 标签：php, security, include

我试图在 stackoverflow 和网络上的其他地方搜索这个。

似乎无法牢牢锁定表明这是最安全方式的答案。

我知道最安全的方法是在可能的情况下不在根目录中包含任何可以提供帮助的 php 文件。

所以，我想知道的是，如果我想包含一个存储在根目录之外的 php 文件，比如说，在另一个目录中，那么对我来说最安全的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:15:20.230

这不会直接回答您的问题，但也许它会让您以不同的方式看待您的应用程序结构。我认为包含来自 webroot 外部的文件是*不安全*的，这是一种误解。

相反，许多人的结构中，如果不是**全部**的话，他们的应用程序逻辑大部分都在该`public_html`目录或类似目录之外。特别是对于包罗万象的路由器类型系统。

你可以有这样的结构：

```
var
    www
        public
            something.js
            happy.jpg
            index.php
        application
            bootstrap.php
            AwesomeClass.php
            Router.php 
```

现在有了您`index.php`，您就可以找出应用程序的**真正**根源。

就像是：

```
define('WEB_ROOT', __DIR__);
define('APP_ROOT', dirname(__DIR__));
define('PHP_ROOT', APP_ROOT . DIRECTORY_SEPARATOR . 'application'); 
```

You now have constants that point to the real filesystem path of your public html directory and where your php files are, and can now safely include files like:

`include(PHP_ROOT . DIRECTORY_SEPARATOR . 'bootstrap.php');`

This is perfectly safe, and many people have apps structured like this. It also prevents people being able to browse to any php files you have laying around, in the event that you don't have any `.htaccess` or similar voodoo in place.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:56:59.673

根据您的问题，我相信您想防止目录遍历（人们试图让您的脚本包含 /etc/passwd 等）。

在请求的路径上使用[realpath 。](http://au.php.net/manual/en/function.realpath.php)这应该扩展所有`../`等`..`。

完成此操作后，您可以根据`realpath()`白名单检查返回的结果或将其限制在您自己的目录中并检查`file_exist()`:是否`file_exist('myfolder' . DIRECTORY_SEPERATOR . $resultFromRealPath())`。

# c# - 如何在windows窗体c#中更改工具条拆分按钮的背景颜色

> ID：11374229
> 
> 赞同：0
> 
> 时间：2012-07-07T10:32:08.517
> 
> 标签：c#, winforms, toolstripbutton

如何在 windows 窗体应用程序中更改工具条拆分按钮的背景颜色。背景颜色属性不起作用..这是设计器类中的代码..

```
 this.level.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(128)))), ((int)(((byte)(255)))), ((int)(((byte)(128)))));
        this.level.DisplayStyle = System.Windows.Forms.ToolStripItemDisplayStyle.Image;
        this.level.DropDownItems.AddRange(new System.Windows.Forms.ToolStripItem[] {
        this.autoToolStripMenuItem1,
        this.loadToolStripMenuItem1});
        this.level.Image = global::PACS.Properties.Resources.winlevel;
        this.level.ImageTransparentColor = System.Drawing.Color.Red;
        this.level.Margin = new System.Windows.Forms.Padding(1, 1, 1, 2);
        this.level.Name = "level";
        this.level.Size = new System.Drawing.Size(53, 43);
        this.level.Text = "Level";
        this.level.TextImageRelation = System.Windows.Forms.TextImageRelation.Overlay;
        this.level.Paint += new System.Windows.Forms.PaintEventHandler(this.Window_level_Paint);
        this.level.Click += new System.EventHandler(this.Window_level_Click); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:54:06.150

默认情况下，它的 BackColor 属性不起作用：根据此（[ToolStripSplitButton BackColor 不起作用](http://social.msdn.microsoft.com/Forums/en/winforms/thread/0a2d4936-d3d0-4212-b412-316c41ca45e5)），请按照以下两个步骤操作：

1) 将 BackgroundImage 设置为有效图像。没关系。我使用 1 像素 x 1 像素 BMP 作为本地资源。

2) 将 BackgroundImageLayout 设置为无。这就是为什么您在上面使用什么图像并不重要。

结果：

![在此处输入图像描述](../Images/c6262e7e4388d73b2561f8514279cce9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T12:12:50.773

您可以使用自定义渲染器，您可以在此[答案](https://stackoverflow.com/a/2097341/2651073)中找到类似问题`toolstrip`的示例。

# ruby-on-rails - 在 Adhearsion 之外的 Rails 应用程序上接收实时 Asterisk AMI 事件

> ID：11374232
> 
> 赞同：1
> 
> 时间：2012-07-07T10:32:16.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asterisk, asteriskami

我有一个 Rails 应用程序，我正在尝试通过 AMI 从我的星号获取实时事件。

我成功地创建了一个脚本来从 adhearsion 源代码发起调用，而无需创建新的 adhearsion 项目。

我创建了一个扩展 adhearsion 的 ManagerInterface 类并覆盖 event_message_received 方法的类。从 Rails CLI，如果有人打电话，我按 Enter 2 或 3 次，我得到了事件，但我必须干预才能得到它。

这是我的代码：

```
 class Astercall < Adhearsion::VoIP::Asterisk::Manager::ManagerInterface

  def initialize
    super(:host => "host", :username => "username", :password => "password", :events => true)
    connect!
  end

  def self.click_call(number, exten, name)
    # asterisk = connect()

    originate(:channel => "SIP/#{exten}", 
                        :context => "from-internal",
                        :exten => number,
                        :priority => "1",
                        :caller_id => "Calling  #{name}")
  end

  def event_message_received(event)
    if(event.kind_of? Adhearsion::VoIP::Asterisk::Manager::ManagerInterfaceEvent )
          puts event.inspect
    end
  end

end 
```

我是否必须运行后台进程才能做到这一点。如果我这样做，我该怎么做？？？？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:04:36.443

While it is possible to use the Adhearsion AMI classes outside of an Adhearsion app, it's not really a supported use. Part of what the Adhearsion app provides is the daemonization and eventing subsystems needed to help process the events received from Asterisk, neither of which is really necessary just for the origination as you were doing before. If you really insist on using the library outside of an Adhearsion app you will need to do more than just subclass the ManagerInterface. Just be careful: what you do *not* want to do (mostly for performance reasons) is to cause a new AMI connection to be created/torn down with each Rails web request.

I would strongly suggest that you use an Adhearsion app to process the events from AMI and then use something like DRb to handle communication between Rails and Adhearsion. This approach has worked very well for us in several situations where we needed Asterisk events to be accessible in Rails (for example, displaying call queue statistics).

# c# - 需要将哪些 xunit 二进制文件添加到源代码管理中？

> ID：11374238
> 
> 赞同：0
> 
> 时间：2012-07-07T10:33:04.053
> 
> 标签：c#, unit-testing, version-control, xunit

我想在我的项目中使用[xUnit](http://xunit.codeplex.com/)进行单元测试。我使用 Visual Studio 2010 作为我的 IDE。从他们的网站下载并解压 xUnit1.9 版本后，我看到至少 25 个不同的文件。有些是 .exe 、 .dll 、 .config 、 .xslt ...等。

我可以假设我只需要 "xunit.dll" 和 "xunit.gui.exe" 吗？用例是，如果我让其他人从存储库中签出代码，他们应该能够启动 xUnit GUI 并运行单元测试，而无需任何额外的下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:06:05.727

您可以尝试一下，看看它是否有效 :)，或者您可以运行 Dependency Walker ( [http://www.dependencywalker.com/](http://www.dependencywalker.com/) ) 来查看 xunit 可执行文件所依赖的 dll。

对于 .NET 文件[，ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)是一个开源选项，它做同样的事情，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:03:37.260

与其将这些二进制文件存储在源代码管理中，不如制作一个脚本来下载二进制文件并将脚本存储在源代码管理中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T11:43:57.353

您是否要节省存储空间..？
只需使用[nuget](http://geekswithblogs.net/WinAZ/archive/2011/03/18/a-gentle-introduction-to-nuget.aspx)来跟踪最新的[xUnit](http://nuget.org/packages/xunit)版本，而忘记应该保存哪些文件......

如果 ~3MB 太贵，您可以跳过`xunit.installer.exe`，以及所有您不使用的 GUI 运行程序（即，如果您在 64 位机器上运行 .Net 4，请仅保留`xunit.gui.clr4.exe`）。这样，您将只使用 ~1MB。

# ruby-on-rails - Rails 中的无表模型 JSON 序列化

> ID：11374240
> 
> 赞同：1
> 
> 时间：2012-07-07T10:33:19.283
> 
> 标签：ruby-on-rails, json

我有无表模型（如 #219 railscast 所示）：

```
class MyModel
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :attr1, :attr2, :attr3, :attr4

  private
    def initialize(attr1 = nil)
      self.attr1 = attr1
    end

    def persisted?
      false
    end
end 
```

然后我试图在控制器中呈现 JSON：

```
@my_model = MyModel.new
render json: @my_model.to_json(only: [:attr1, :attr2]) 
```

但它使用模型的所有属性呈现 JSON。

我试图添加

```
include ActiveModel::Serialization 
```

但它并没有改变呈现的 JSON。

如何仅使用无表模型的必要属性呈现 JSON？

我正在使用 Rails 3.2.3

**更新**

多谢你们。看来你几乎是对的。我结合了您的解决方案并得到了这个：

模型：

```
include ActiveModel::Serialization

...

def to_hash
  {
    attr1: self.attr1,
    attr2: self.attr2,
    ...
  }
end 
```

控制器：

```
render json: @my_model.to_hash.to_json(only: [:attr1, :attr2]) 
```

我真的不知道该接受谁的答案。

**更新 2**

突然出现了新的异样。属性之一是哈希数组。是这样的：

```
attr1: [[{name: "name", image: "image"}, {name: "name", image: "image"}],
        [{name: "name", image: "image"}, {name: "name", image: "image"}]] 
```

但现在它失去了所有内容，看起来像这样：

```
attr1: [[{}, {}], [{}, {}]] 
```

也许有人知道如何解决它？

**更新 3** :)

Erez Rabih 的回答有所帮助。使用`slice`而不是`to_json`解决问题。所以，最终的解决方案是：

```
render json: @my_model.to_hash.slice(:attr1, :attr2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:28:37.010

我知道这不是直截了当的，但怎么样：

```
render :json => @my_model.attributes.slice(:attr1, :attr2) 
```

您还需要将属性方法定义为：

```
def attributes
   {:attr1 => self.attr1.....}
end 
```

感谢您的评论弯曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:19:13.037

您可以按照[文档](http://api.rubyonrails.org/classes/ActiveModel/Serialization.html)的建议将您的初始方法（包括 AM 序列化模块）与 Erez 的方法混合使用。

```
class MyModel
    include ActiveModel::Serialization::JSON
    ....
    def attributes
       {:attr1 => self.attr1.....}
    end
    ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:25:10.587

我相信这是因为 Object::as_json 在内部调用（看看这个：[http](http://apidock.com/rails/Object/as_json) ://apidock.com/rails/Object/as_json ），它没有像 :only 或 :except 这样的选项，所以你可以覆盖方法 to_hash你的班级，例如：

```
def to_hash
  {:attr1 => self.attr1, :attr2 => self.attr2}
end 
```

和 to_json 会做你想要的。

当然，另一种选择是覆盖方法 to_json ...

# objective-c - 使用迭代和数组对一系列图像进行动画处理

> ID：11374241
> 
> 赞同：2
> 
> 时间：2012-07-07T10:33:21.200
> 
> 标签：objective-c, xcode4, nsmutablearray

我最近一直在玩 Xcode，却被这个愚蠢的问题困住了。需要帮忙！好的，我在支持文件名 1.jpg、2.jpg...69.jpg 中添加了 69 张图像。它们之所以如此命名，是因为将使用循环通过显示一系列图像来创建动画。这就是我所做的。头文件：

```
#import <UIKit/UIKit.h>

@interface myBitchViewController : UIViewController{
    NSMutableArray *images;
}

@property (retain, nonatomic) NSMutableArray *images;

@end 
```

和实现文件：

```
#import "myBitchViewController.h"

@implementation myBitchViewController

@synthesize images;

- (void)viewDidLoad {
    for (int imagenumber = 1; imagenumber <= 69; imagenumber++) {
        NSMutableString *myString = [NSMutableString stringWithFormat:@"%i", imagenumber];
        [myString stringByAppendingString:@".jpg"];
        [images addObject:[UIImage imageNamed:myString]];
    }
    CGRect frame = CGRectMake(0.0, 0.0, 320.0, 460.0);
    UIImageView *imageview = [[UIImageView alloc] initWithFrame:frame];
    imageview.animationImages = images;
    imageview.contentMode = UIViewContentModeScaleAspectFit;

    imageview.animationDuration = 3;

    imageview.animationRepeatCount = 0;

    [imageview startAnimating];

    [self.view addSubview:imageview];

    [imageview release];

    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

现在的问题是程序没有抛出任何错误，但是当模拟器运行时它只显示空白的灰色屏幕而不是动画。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:57:24.837

可能只是您`NSMutableArray* images;`从未创建过。顺便说一句，它不需要是一个属性，你应该将它创建为一个局部变量`viewDidLoad`- 否则每次视图加载时你都会不断地向它添加越来越多的图像。

# magento - Magento 如何修改搜索查询

> ID：11374244
> 
> 赞同：1
> 
> 时间：2012-07-07T10:33:48.737
> 
> 标签：magento

我为后端创建了一个自定义模块并将一些数据插入到我的自定义表中。现在我如何修改搜索查询，以便我的自定义表也出现在搜索中。

# javascript - html 5代码在使用phonegap的android上不起作用

> ID：11374246
> 
> 赞同：1
> 
> 时间：2012-07-07T10:33:59.593
> 
> 标签：javascript, android, html, cordova

```
<html>
  <head>
    <title>Cordova Offline Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Call onDeviceReady when Cordova is loaded.
    //
    // At this point, the document has loaded but cordova-1.9.0.js has not.
    // When Cordova is loaded and talking with the native device,
    // it will call the event `deviceready`.
    //

    function Network(){
        if(navigator.onLine)
            {
              alert('You are Online');
            }
        else
            {
              alert('You are Offline')
            }
     }
    </script>
  </head>
  <body >
  <input type="button" value="Check Network" onclick="Network()" />
  </body>
</html> 
```

我正在尝试使用 html 代码检查网络连接。如果我在本地机器上的 crome 上运行此代码，它可以工作，但为什么它不能在 android 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:46:55.053

它有一些特定于电话间隙的事件，您必须将其用于某些任务，例如互联网连接检查问题

这是一个示例，您可以通过它检查互联网连接

```
<!DOCTYPE html> 
```

navigator.network.connection.type 示例

```
<script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>
<script type="text/javascript" charset="utf-8">

// Wait for PhoneGap to load
// 
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is loaded and it is now safe to make calls PhoneGap methods
//
function onDeviceReady() {
    checkConnection();
}

function checkConnection() {
    var networkState = navigator.network.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';

    alert('Connection type: ' + states[networkState]);
}

</script> 
```

一个对话框将报告网络状态。

有关更多详细信息，请查看此 [Connection](http://docs.phonegap.com/en/1.0.0/phonegap_connection_connection.md.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:44:48.807

//只需在代码顶部添加以下行，现在检查它。

```
<!DOCTYPE HTML> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:39:44.990

`navigator.onLine`返回浏览器的在线状态，因此很少有浏览器提供将状态更改为离线工作的功能，如 IE 和 Firefox，只要连接到任何可用的网络，Chrome 就会为您提供 onLine true

[https://developer.mozilla.org/en/DOM/window.navigator.onLine](https://developer.mozilla.org/en/DOM/window.navigator.onLine)

为了确保您的设备真正连接到公共/私有网络，您应该执行一个简单的 AJAX 调用来检查目标机器是否可以访问。

我在我的一个应用程序中遵循了上述方法，我需要从 Device 连接到专用 VPN 网络，以确保所需的网络确实可用并基于此执行所需的代码。

# javascript - 用于 DOM 修改的高效 Javascript

> ID：11374247
> 
> 赞同：5
> 
> 时间：2012-07-07T10:34:02.807
> 
> 标签：javascript, html, dom, browser, reflow

比如说，我有一个要使用 Javascript 处理的 HTML 文件。例如：

*   添加一些 DOM 元素，例如`span`或`div`包装器。
*   稍微更改文档样式，例如基本字体大小、行高等。
*   使用连字符来添加`&shy;`实体。

什么是最有效的方法来做到这一点，即我想用最少的回流来做到这一点。

理想的情况是在第一个布局之前运行 JS 代码。这可能吗？我知道，在显示页面之前执行昂贵的脚本通常是一个坏主意，因为这会使页面在一段时间内看起来很空白，这是一种非常糟糕的体验。但是，我将需要它离线工作，这对我的项目来说不是问题。

或者，有没有办法一次性完成所有的 dom 修改，即在所有修改完成后触发回流？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T10:46:09.463

有几种方法。所有这些的主要目标是您最终导致一次 - 或至少尽可能少 - 回流/重绘。

**非 DOM 元素**

您可以在不附加到 DOM 的情况下使用元素，然后在所有内容设置完成后将所有内容附加在一起。

唯一的问题是如果您的代码需要引用偏移尺寸，因为尚未在 DOM 中的元素没有任何元素。

```
var container = document.createElement('section'); //not in the DOM yet
//do some extensive work here to prepare the doc
document.body.appendChild(container); //now we go to the DOM, causing a single re-paint 
```

**文档片段**

这个主题的一个更正式且可能改进的变体是**[文档片段](https://developer.mozilla.org/en/DOM/DocumentFragment)**，它带来了性能优势（显然）。它们实际上是第二个没有显示的独立 DOM。

**细绳**

可能所有这些中最快的方法是将您的文档构建为字符串。显而易见的含义是您不能在其上使用 DOM 方法，但如果您对字符串处理和 REGEX'ing（当然在 HTML 上不理想）感到满意，则值得考虑。

最后，如果速度至关重要，并且您有大量的计算或字符串处理工作要做，那么您可能想要利用网络工作者。这些不能直接与 DOM 对话，但您可以将任务外包给它们，而且至关重要的是，它们在单独的线程上异步工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T11:32:58.020

`documentElement`从 中删除`document`，对其进行修改并将其添加回`document`.

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>...</title>           
    </head>
    <body>
        <script type='text/javascript'>
var docElem = document.documentElement,
    parentNode = docElem.parentNode,
    nextSibling = docElem.nextSibling;
parentNode.removeChild(docElem); // reflow
// ...
docElem.lastChild.appendChild(docElem.ownerDocument.createElement('hr'));
// ...
parentNode.insertBefore(docElem, nextSibling); // reflow
        </script>
    </body>
</html> 
```

这会触发两次回流和零到两次额外的重绘。

[jsFiddle](http://jsfiddle.net/sttCs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:42:09.217

我相信由浏览器决定然后重排内容。他们尽量在脚本执行完成之前不这样做。这里需要注意的是，例如，当您将 div 附加到文档正文时，它会导致 DOM 重新计算。为此，您可以使用 documentFragment 附加元素，然后将自身分段到正文。虽然如果在您的情况下，您需要将 1 个元素附加到不同的容器，它不会有太大帮助。

额外阅读 documentFragment：[http ://ejohn.org/blog/dom-documentfragments/](http://ejohn.org/blog/dom-documentfragments/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-07T10:46:17.143

我认为你不能在页面加载之前处理样式或 DOM 元素。首先它加载然后你开始调整页面。我会隐藏加载页面并对其进行调整并显示。隐藏方法：

1.  一切都加载到屏幕 X/Y 坐标之外，然后你把它设置为 0,0
2.  内容页面数据具有样式的 DIV：显示：无或可见性：隐藏[http://www.w3schools.com/css/css_display_visibility.asp](http://www.w3schools.com/css/css_display_visibility.asp)在这里查看详细信息。
3.  它可以是你在 1 像素 iframe 内加载页面，你作为父页面所有者可以控制子页面。完成你的调整后，调整 iframe 的大小，隐藏它的框架。
4.  使用 Z 索引并将全尺寸非透明 DIV 黑色或白色隐藏在下面。准备好后将其删除

选择更适合您风格的。

# java - MacOS 10.7.4 上的 Java 系统托盘图标不显示动画 gif

> ID：11374252
> 
> 赞同：12
> 
> 时间：2012-07-07T10:34:19.437
> 
> 标签：java, macos, desktop, animated-gif, system-tray

我正在尝试使用 Java 让动画 gif 出现在 MACOS 系统托盘中。我有正确显示的 PNG 图标，但是一旦我尝试将图标设置为动画 gif（以便我可以显示旋转计时器），它就会变为空白并且在系统菜单托盘中什么也不显示。

根据 System Tray 类的 JavaDocs，如果给定 setImage 应该自动支持动画图像，但它没有指定图像格式或在系统托盘中获取动画图标所需的任何其他内容。

有谁知道如何让这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:17:58.767

这个问题很可能无法通过`java.awt.SystemTray`班级解决。您唯一的选择是尝试使用本机代码的[JDIC 。](http://en.wikipedia.org/wiki/Java_Desktop_Integration_Components)坦率地说，我不确定 JDIC 项目是否已经维护了，在网上很难找到信息......

在我的一个项目中，我使用 JDIC 来集成系统托盘。如果找不到任何其他资源，您可以使用它作为[起点](http://code.google.com/p/gwtai/source/browse/#svn/trunk/gwtaidemo/src/com/google/gwt/gwtai/trayicon/impl)并从那里获取[库。](http://code.google.com/p/gwtai/source/browse/#svn/trunk/gwtaidemo/lib)

# ios - 如何在 xCode 上使用代码常量更改图标文件？

> ID：11374258
> 
> 赞同：1
> 
> 时间：2012-07-07T10:35:36.883
> 
> 标签：ios, xcode, plist, application-settings

我正在构建一个具有免费版本和付费版本的应用程序。应用程序之间的区别只是代码中某个常量的定义行（它创建了需要在每个应用程序上添加的代码）。

我希望图标也根据此定义进行更改。有人知道我该怎么做吗？例如，我可以使用生成的代码在不同的 info.plist 文件之间进行选择吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:30:13.480

你想为你的精简版设置一个重复的目标。在这个次要目标中，它应该是相同的`PREPROCESSOR MACRO`，除了你添加的一个 like `LITE_VERSION`。它还应该指向不同的 info.plist

然后，在编译时的代码中，您可以`#ifdef LITE_VERSION`在为该目标编译时使用编译 Lite 代码与 Reg 代码。

# twitter-bootstrap - 是否有与 Twitter Bootstrap Less 文件集成的配色方案工具？

> ID：11374260
> 
> 赞同：2
> 
> 时间：2012-07-07T10:35:42.330
> 
> 标签：twitter-bootstrap

我知道我可以`bootstrap_and_overrides.css.less`在 Twitter Bootstrap css 文件中包含我可以用来覆盖颜色的文件。

但是，有没有办法让我使用在线配色方案生成器即时设置更少的变量？这样的工具非常适合开始为 Twitter Bootstrap 定制主题！

那里有任何已知的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:03:15.967

对于 css 和较少的输出，我只知道一种工具：[http](http://www.boottheme.com/#generatetheme)
://www.boottheme.com/#generatetheme 仅适用于 css：http: [//stylebootstrap.info](http://stylebootstrap.info)

# php - 如何制作这种网址：mail.google.com

> ID：11374265
> 
> 赞同：-1
> 
> 时间：2012-07-07T10:36:25.673
> 
> 标签：php, url

我不知道这部分域名的名称：**mail.google.com**

如何在我的 Web 应用程序中实现类似的功能？

请给我看一些教程。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:38:01.767

您不能在您的 Web 应用程序中执行此操作。您需要`A record`为您的子域名设置一个。如果您正在运行自己的 DNS 服务器，则可以使用 DNS 服务器的控制面板或编辑 BIND 的配置文件来完成此操作。

这个[简单的指南](http://www.debianhelp.co.uk/dnsrecords.htm)解释了不同类型的 DNS 记录。

# java - Android 模拟器（客户端）到电话（服务器）套接字连接

> ID：11374270
> 
> 赞同：3
> 
> 时间：2012-07-07T10:37:46.723
> 
> 标签：java, android, sockets, tcp

我目前正在尝试通过 TCP/IP 套接字连接来连接模拟器（客户端）和电话（服务器）。但不知何故它永远不会工作，但如果我尝试将模拟器（作为客户端/服务器）与内部java程序（作为客户端/服务器）连接起来，它工作正常，套接字连接也可以从电话到不在模拟器上的应用程序正常工作。我认为这与端口转发有关，所以我尝试了：

来自[如何将我的本地主机 IP 地址转发到 Android 模拟器](https://stackoverflow.com/questions/5064304/how-can-i-forward-my-localhost-ip-address-to-an-android-emulator)

```
telnet localhost 5554

redir add tcp:1337:12345 
```

但是当我用端口号 1337 和服务器端 12345 测试我的客户端时，它仍然无法正常工作，服务器代码不会 .accept() 客户端的请求。

以下是我的客户端（模拟器）和服务器（电话）代码，用于接受和设置 io 流

客户：

SERVER_IP 是本地 ip 地址

```
connection = new Socket(SERVER_IP, PORT);

private void setUpStreams() throws IOException {
            output = new ObjectOutputStream(connection.getOutputStream());
            output.flush();
            input = new ObjectInputStream(connection.getInputStream());
        } 
```

服务器：

那是为了接受用户私有 void acceptingUser() {

```
 try {
            ss = new ServerSocket(PORT, 10);
            connection = ss.accept();
            connected = true;
            osm.updateInChatStatus(1);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.i("serv", "Wasn't able to connect with any clients!: " + e);
        }
    } 
```

并且设置流与客户端的流非常相似。提前感谢您的建议和解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-20T16:50:09.307

要访问网络连接，需要在 AndroidManifest.xml 中设置权限

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bosch.adx.esidroid">
    <uses-permission android:name="android.permission.INTERNET" />
<application
-- 
```

# c# - 带单引号的 SQL 查询

> ID：11374271
> 
> 赞同：1
> 
> 时间：2012-07-07T10:37:49.613
> 
> 标签：c#, .net, sql, database

执行此查询时出现错误，因为列文本也可能包含带单引号的文本。我如何在没有任何错误的情况下使用此查询我的代码是

```
public bool updateCMStable(int id, string columnName, string columnText)
{
    try
    {
        string sql = "UPDATE  CMStable SET " + columnName + 
                      "='" + columnText + "' WHERE cmsID=" + id;
        int i = SqlHelper.ExecuteNonQuery(Connection.ConnectionString,
                                          CommandType.Text,
                                          sql);
        if (i > 0)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
    catch (Exception ee)
    {
        throw ee;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T10:39:12.483

您应该使用[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)，而不是在字符串中构造 SQL - 您当前的代码，除了单引号问题外，还容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响。

有一个限制是您尝试使用无法参数化的动态列名，但您仍然可以以更安全的方式使用动态 SQL。

我建议阅读Erland Sommarskog 的[The Curse and Blessings of Dynamic SQL以全面了解该主题。](http://www.sommarskog.se/dynamic_sql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:44:21.743

要修复您的代码，请使用附加单引号转义所有单引号。 **但是我同意 Oded... 您需要使用参数化查询，或者可能是存储过程。**

```
public bool updateCMStable(int id, string columnName, string columnText) 
{ 
   if(!string.IsNullOrEmpty))
   {
       switch(columnName)
       {
           // TODO: change 50 & 100 to the real sizes of your columns, 
           // and obviously the column names too...
           case "column1":
               if(columnText.Length > 50)
                   columnText = columnText.SubString(0, 50);
               break;
           case "column2":
               if(columnText.Length > 100)
                   columnText = columnText.SubString(0, 100);
               break;
           etc... 
        }
    }
    // replace single quote with double single quotes
    columnText = columnText.Replace("'", "''");
    string sql = string.Format("UPDATE CMStable SET {0} = '{1}' WHERE cmsID={2}", 
        columnName, 
        columnText, 
        id); 
    int i = SqlHelper.ExecuteNonQuery(Connection.ConnectionString, CommandType.Text, sql); 
    return (i > 0); 
} 
```

我对您的代码做了一些额外的更正。

1.  当您返回 true | 时，您可以简单地返回 if 语句的结果。错误的
2.  如果您只是将异常扔到 catch 块中，则不需要捕获异常
3.  如果你确实捕获了一个异常，对它做一些有意义的事情，并决定重新抛出它，单独使用`throw`它，或者你将重置堆栈跟踪。不要使用`throw ee`;
4.  如果它变得太不可读，请用 string.Format 替换 + 类型连接。

**编辑：**

您发布的错误正在发生，因为传入的数据长度大于列的指定长度。由于您使用的是动态 SQL，因此我能看到的唯一解决方法是使用 case 语句。每个字段可能有不同的大小，也可能没有，但必须截断字符串以适应以避免错误。如果所有字段大小都相同，则不需要 case 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:54:47.070

错误是

***“字符串或二进制数据将被截断。语句已终止”***

此错误的主要原因是您尝试保存任何值的列的长度较短，假设如果您的列是`varchar(100)`类型并且您尝试在其中保存一个 105 个字符的字符串，那么您将收到此错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T10:54:51.233

使用[LinqToSql](http://msdn.microsoft.com/en-us/library/bb425822.aspx)。拜托.. 上面列出的编写代码不是一个好主意的原因有很多——安全性、设计、理智....

Google LinqToSql 和“存储库模式”作为编写可维护、有用的数据交互的基本起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T11:07:57.673

试试这个：

```
public bool updateCMStable(int id, string columnName, string columnText)
{
    try
    {
        columnText=columnText.Replace("'","''")
        string sql = "UPDATE  CMStable SET " + columnName + 
                      "='" + columnText + "' WHERE cmsID=" + id;
        int i = SqlHelper.ExecuteNonQuery(Connection.ConnectionString,
                                          CommandType.Text,
                                          sql);
        if (i > 0)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
    catch (Exception ee)
    {
        throw ee;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-27T17:27:14.587

```
public bool updateCMStable(int id, string columnName, string columnText)
            {
                 try
                {
string sql = "UPDATE  CMStable SET '"+columnName+"' = '"+columnText+"' where cmdID='"+id+"'";
int i = SqlHelper.ExecuteNonQuery(Connection.ConnectionString,CommandType.Text,sql);
        if (i > 0)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
    catch (Exception ee)
    {
        throw ee;
    }
} 
```

# android - ListView 不显示数据

> ID：11374274
> 
> 赞同：0
> 
> 时间：2012-07-07T10:38:14.590
> 
> 标签：android

我已经按照[本](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)教程进行操作，但我无法弄清楚为什么模拟器没有显示这些项目。

这是我的列表活动：

```
public class MyListActivity extends ListActivity {

private Timer myTimer;
private boolean SetTimerOnResume=false;

private ArrayList<HashMap<String,String>> chat=new ArrayList<HashMap<String,String>>();

private LazyAdapter adapter;

static final String Key_username="username_key";
static final String Key_email="email_key";
static final String Key_messageText="messageText_key";
static final String Key_messageDate="messageDate_key";

     @Override
      public void onCreate(Bundle savedInstance) {
         super.onCreate(savedInstance);
            setContentView(R.layout.lists);

            HttpRequest httpRequest=new HttpRequest("ReturnNewChatsToAdmin", "admin", "You" , "zawalarsa", "muazzamalii@hotmail.com");  
            String data=httpRequest.ExecuteRequest();
            httpRequest.ExecuteRequest();

            try {

                 JSONArray jsonarr=new JSONArray(data);

                for(int i=0;i<jsonarr.length();i++)
                {   
                    HashMap<String,String> hashMap=new HashMap<String,String>();

                    hashMap.put(MyListActivity.Key_username, jsonarr.getJSONObject(i).getString("username"));
                    hashMap.put(MyListActivity.Key_email, jsonarr.getJSONObject(i).getString("email"));
                    hashMap.put(MyListActivity.Key_messageText, jsonarr.getJSONObject(i).getString("chatText"));
                    hashMap.put(MyListActivity.Key_messageDate, jsonarr.getJSONObject(i).getString("chatDate"));

                    chat.add(hashMap);

                }

            ListView lv=(ListView)findViewById(android.R.id.list);
            adapter=new LazyAdapter(this,chat);
            lv.setAdapter(adapter);

          lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

            }
          });

            }
            catch(JSONException e)
            {
            }
     }

} 
```

这是教程中所示的lazyadapter：

包 com.app.ServerClient;

公共类 LazyAdapter 扩展 BaseAdapter{

```
private Activity activity;
private ArrayList<HashMap<String,String>> hashmap;
private static LayoutInflater inflater=null;

public LazyAdapter(Activity activity,ArrayList<HashMap<String,String>> hashMaps)
{
    this.activity=activity;
    this.hashmap=hashMaps;
    LazyAdapter.inflater=(LayoutInflater)this.activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    return hashmap.size();
}

@Override
public Object getItem(int position) {
    return position;
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View view=convertView;

    if(convertView==null)
        view=inflater.inflate(R.layout.list_layout,null);

    TextView username=(TextView)view.findViewById(R.id.username);
    TextView email=(TextView)view.findViewById(R.id.email);
    TextView messageDate=(TextView)view.findViewById(R.id.chatdate);
    TextView messagetext=(TextView)view.findViewById(R.id.messagetext);

    HashMap<String,String> map=new HashMap<String, String>();
    hashmap.get(position);

    username.setText(map.get(MyListActivity.Key_username));
    email.setText(map.get(MyListActivity.Key_email));
    messageDate.setText(map.get(MyListActivity.Key_messageDate));
    messagetext.setText(map.get(MyListActivity.Key_messageText));

    return view;
}

} 
```

这是我的 list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:paddingLeft="16dp"
android:paddingRight="16dp" >

 <LinearLayout
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:orientation="horizontal" >

 <TextView
     android:id="@+id/username"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_weight="11.74"
     android:textColor="#FFFF00"
     android:textSize="17sp"
     android:textStyle="bold"
      />

 <TextView
     android:id="@+id/chatdate"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_weight="11.74"
     android:textColor="#FFFF00"
     android:textSize="17sp"
     android:textStyle="bold"
     />

 </LinearLayout>

 <TextView
 android:id="@+id/email"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
  />

 <TextView android:id="@+id/message" 
 android:layout_width="wrap_content" 
 android:layout_height="wrap_content"
 android:text="@string/Message"
 android:textStyle="bold"/>

<TextView android:id="@+id/messagetext" 
 android:layout_width="wrap_content" 
 android:layout_height="wrap_content"
 />

</LinearLayout> 
```

这是输出：

![](../Images/db76b6bb7b662673f108ad3109ca25b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:40:15.703

更改这些行

```
HashMap<String,String> map=new HashMap<String, String>();
hashmap.get(position); 
```

在

```
HashMap<String,String> map= hashmap.get(position); 
```

它会起作用的

# javascript - 按下按钮时启用 javascript 插件

> ID：11374275
> 
> 赞同：0
> 
> 时间：2012-07-07T10:38:15.150
> 
> 标签：javascript

我有一个网页，上面有一个按钮。
按下按钮时，我打算在`head`页面部分嵌入脚本以启用插件。我可以手动插入片段和我的插件，但我希望能够在按钮单击本身时执行此操作，以将其保留为我的用户的可选元素。
解决这个问题的方法是什么？

根据`@padde`的查询，脚本看起来像我在标题中包含的方式：

```
<script type="text/javascript" src="http://code.abc.com/farfalla.js"></script>
<script type="text/javascript" src="http://code.abc.com/postmessage.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:41:34.737

通常，您只需将脚本放在`<head>`标签内。然后，从包含的脚本中提取初始化代码并在单击按钮时运行它。

**编辑**

你也可以试试这个：

HTML

```
<button id="share-button">Share this</button> 
```

​ JavaScript

```
dynamicCode = 'alert("script loaded");'
scriptLoaded = false;

buttonClicked = function(e) {
    if( !scriptLoaded ) {
        var script = document.createElement('script');
        script.text = dynamicCode;
        document.getElementsByTagName('head')[0].appendChild(script);
        scriptLoaded = true;
    }

    alert("thanks for sharing");
};

button = document.getElementById('share-button');
button.onclick=buttonClicked; 
```

​</p>

您可以在其中加载`dynamicCode`Ajax 调用或任何您喜欢的内容。代码只加载一次。我已经为你整理了一个[jsfiddle](http://jsfiddle.net/5EWhK/)，所以你可以尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:48:23.617

使用 javascript 的 createElement() 并将其添加到 DOM

检查以下链接以获取更多信息：[http ://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS](http://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS)

如果您使用的是 jquery，那么您可以使用 $.getScript 来加载外部 js 文件。

```
$.getScript('filename.js',function(){
 //your code ...
}); 
```

# python - Django/python 查询集 - 将另一个“子”查询集作为项目添加到每个列表对象？

> ID：11374277
> 
> 赞同：3
> 
> 时间：2012-07-07T10:38:38.173
> 
> 标签：python, django, typeerror, django-queryset

如果这个问题的答案很明显，我深表歉意——我对 django/python 很陌生，到目前为止我还无法在搜索中找到解决方案。

我有一个简单的查询集，例如

```
members = LibraryMembers.objects.all() 
```

有了这个我可以做到：-

```
for m in members:
  member_books = LibraryBorrows.objects.filter(member_id=m[u'id']) 
```

我真正想要的是能够将结果序列化为 json，所以它看起来像这样：-

```
{
  "members":
  [
    {
      "id" : "1",
      "name" : "Joe Bloggs"
      "books":
      [
        {
          "name" : "Five Go Exploring",
          "author" : "Enid Blyton",
        },
        {
          "name" : "Princess of Mars",
          "author" : "Edgar Rice Burroughs",
        },
      ]
    }
  ]
} 
```

在我看来，显而易见的尝试是：-

```
for m in members:
  m[u'books'] = LibraryBorrows.objects.filter(member_id=m[u'id']) 
```

但是我收到 TypeError: 'LibraryBorrows' 对象不支持项目分配

有什么办法可以实现我所追求的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:49:07.200

Well`m`是一个`LibraryMember`对象，因此您将无法将其视为字典。作为旁注：大多数人不会以复数形式命名模型，因为它们只是*建模对象*的类，而不是对象的集合。

一种可能的解决方案是制作一个字典列表，其中包含您需要从两个对象中获取的值，例如在单行中：

```
o = [ { "id": m.id, "name": m.name, "books": [{"name": b.name, "author": b.author} for b in m.libraryborrows_set.all()] } for m in LibraryMembers.objects.all()] 
```

请注意，您可以使用[相关管理器](https://docs.djangoproject.com/en/1.2/ref/models/relations/)来获取给定成员的书籍。为了更清楚：

```
o = []
for m in LibraryMembers.objects.all():
   member_books = [{"name": b.name, "author": b.author} for b in m.libraryborrows_set.all()] 
   o.append( { "id": m.id, "name": m.name, "books": member_books } ) 
```

**编辑**：

序列化所有字段：

```
members = []
for member in LibraryMembers.objects.all():
    member_details = {}
    for field in member._meta.get_all_field_names():
        member_details[field] = getattr(member, field)
    books = []
    for book in member.librayborrows_set.all():
        book_details = {}
        for field in book._meta.get_all_field_names():
            book_details[field] = getattr(book, field)
        books.append(book_details)
    member_details['books'] = books
    members.append(member_details) 
```

我还发现了直到今天我才听说的 DjangoFullSerializers：

[http://code.google.com/p/wadofstuff/wiki/DjangoFullSerializers](http://code.google.com/p/wadofstuff/wiki/DjangoFullSerializers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:27:54.350

模型实例确实不是字典。现在，如果您想要字典而不是模型实例，那么`Queryset.values()`您的朋友就是 - 您将获得一个仅包含必填字段的字典列表，并且您避免了从数据库中检索不需要的字段和构建完整的模型实例的开销。

```
>> members = LibraryMember.objects.values("id", "name")
>> print members
[{"id" : 1, "name" : "Joe Bloggs"},] 
```

然后你的代码看起来像：

```
members = LibraryMember.objects.values("id", "name")
for m in members: 
    m["books"] = LibraryBorrows.objects.filter(
      member_id=m['id']
      ).values("name", "author") 
```

现在，您仍然需要为每个父行发出一个附加的数据库查询，这可能效率不高，具体取决于 LibraryMember 的数量。如果您有数百个或更多 LibraryMember，更好的方法是查询 LibraryBorrow，包括 LibraryMember 中的相关字段，然后根据 LibraryMember id 重新组合行，即：

```
from itertools import group_by

def filter_row(row):
    for name in ("librarymember__id", "librarymember__name"):
        del row[name]
    return row

members = []
rows = LibraryBorrow.objects.values(
    'name', 'author', 'librarymember__id', 'librarymember__name'
     ).order_by('librarymember__id')

for key, group in group_by(rows, lambda r: r['librarymember__id']):
    group = list(group)     
    member = {
      'id' : group[0]['librarymember_id'], 
      'name':group[0]['librarymember_name']
      'books' = [filter_row(row) for row in group] 
       }
    members.append(member) 
```

注意：这可以看作是过早的优化（如果你的数据库中只有几个 LibraryMember 的话），但是为一个查询和一些后处理交易数百或更多查询通常会对“现实生活”产生真正的影响数据集。

# random - 对等游戏中的随机对等选择算法？

> ID：11374283
> 
> 赞同：2
> 
> 时间：2012-07-07T10:39:20.387
> 
> 标签：random, selection, p2p, peer

我正在为 iPhone/iPad 开发一款使用 Apple 配对服务的扑克游戏。我将使用客户端-服务器拓扑，其中经销商是服务器。每手都会有一个新的服务器/经销商。然而，在初始经销商/服务器选择之前，游戏使用点对点拓扑，这让我陷入了两难境地。

如何快速有效地让所有玩家/对等方同意一个随机对等方作为初始经销商/服务器？

我目前正在对自己的方法进行故障排除，通过该方法我让每个对等方广播一个随机数。收到所有号码后，对它们进行排序，编号最小的对等方是初始经销商。但是，我遇到的问题（重复号码等）促使我找到更好的解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:22:31.263

您需要了解[Paxos](http://en.wikipedia.org/wiki/Paxos_%28computer_science%29)算法（即选举领导者）。

# silverlight - 如何跳转到 ListBox 的顶部？

> ID：11374289
> 
> 赞同：0
> 
> 时间：2012-07-07T10:39:57.393
> 
> 标签：silverlight, windows-phone-7

我有一个问题，我有一个带有列表框的应用程序，其中有很多项目，因此可以滚动。

当用户按下按钮时，会添加一个新项目。现在我需要执行以下操作：当用户按下按钮并添加新项目时，listBox 的视图应该跳到列表的顶部，这样用户如果向下滚动，就会再次位于顶部。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:23:26.853

是的，你可以做到。

查看[ListBox.ScrollIntoView](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.scrollintoview%28v=vs.95%29.aspx)方法。

# nginx - 缺少依赖项：php-common = 5.3.14-1.el5.remi

> ID：11374291
> 
> 赞同：1
> 
> 时间：2012-07-07T10:40:23.013
> 
> 标签：nginx, yum, php

我尝试为 NGINX 安装 PHP-FPM，然后使用 remi 存储库得到相同的错误。也许有版本与 php-common 合并，我该如何修复它。

```
yum --enablerepo=remi install php-fpm

Loaded plugins: fastestmirror, priorities
Loading mirror speeds from cached hostfile
* base: centos.mirror.transip.nl
* extras: centos.mirror.transip.nl
* remi: remi-mirror.dedipower.com
* updates: centos.mirror.transip.nl
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package php-fpm.x86_64 0:5.3.14-1.el5.remi set to be updated
--> Processing Dependency: php-common = 5.3.14-1.el5.remi for package: php-fpm
--> Finished Dependency Resolution
php-fpm-5.3.14-1.el5.remi.x86_64 from remi has depsolving problems
  --> Missing Dependency: php-common = 5.3.14-1.el5.remi is needed by package php-fpm-5.3.14-        1.el5.remi.x86_64 (remi)
Error: Missing Dependency: php-common = 5.3.14-1.el5.remi is needed by package php-fpm-        5.3.14-1.el5.remi.x86_64 (remi)
 You could try using --skip-broken to work around the problem
 You could try running: package-cleanup --problems
                    package-cleanup --dupes
                    rpm -Va --nofiles --nodigest
    The program package-cleanup is found in the yum-utils package. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:02:12.680

您需要先手动安装/更新 php-common。

试试这个：

```
 rpm -i http://rpms.famillecollet.com/enterprise/5/remi/x86_64/php-common-5.3.14-1.el5.remi.x86_64.rpm 
```

如果您遇到冲突（例如由于已经安装了早期版本），请使用

```
 rpm -i http://rpms.famillecollet.com/enterprise/5/remi/x86_64/php-common-5.3.14-1.el5.remi.x86_64.rpm --force 
```

可以像这样删除旧版本而不需要它的依赖项

```
 rpm -e --nodeps php-common-5.3.10-1.el5.remi.x86_64 
```

# xcode4.3 - 奇怪的行为 Xcode

> ID：11374292
> 
> 赞同：1
> 
> 时间：2012-07-07T10:40:27.657
> 
> 标签：xcode4.3

在我的视图控制器中，我有一个方法`-(void) showDescription: (id) description`，女巫做**了两件事**：

1.  在标签中显示描述
2.  并在视图中运行一个为视图提供 setNeedsDisplay 的方法。

**现在这是奇怪的事情：**

如果我从代码中的另一个方法调用 showDescription，它会转到 showdescription（我有一个 NSLog），读取描述 OK（另一个 NSLog），但不会更改标签或使用`setNeedsDisplay`（没有 NSLog）运行视图方法。

但是...如果我从按钮调用相同的方法，它就可以正常工作：放置 label.text 并重绘我的视图。

`showDescription`当我在视图方法中放置两个断点时，我实现了相同的行为。在第一种情况下，它不会转到视图方法，而在第二种情况下（UIAction）它会。

这有多奇怪？有人知道为什么吗？因为我迷路了……

非常感谢

克莱姆科尔

类：

*   GraphViewController：UIViewController
*   图形视图：UIView

******** *GraphViewController.m* ***** ** *** *******

 **```
 -(void) showDescription: (id) description
    {    
      NSString* text= [(NSString*) description copy];
      self.lableDescription.text=text; //display description in label
     [self.graphView redrawView];  
    }

    -(void)displayGraph
    {
        NSLog(@"GraphViewController.displayGraph");
        NSLog(@"self.programData %@",self.programData); //these work fine
        NSLog(@"description lable %@",self.programDescriptionData);

      [self showDescription:self.programDescriptionData];
        [self.graphView redrawView];

    }

    - (IBAction)redraw {
  NSLog(@"IBAction redraw");
  NSLog(@"myData %@",self.graphView.myData);
  [self showDescription:@"CCCC"];
  [self.graphView redrawView];

} 
```

***图视图.m* ***** ******

 **```
-(void)redrawView //public method
{
    NSLog(@"redrawView");
     [self setNeedsDisplay];
} 
```

我在 Lion 10.7.4 上使用 Xcode 4.3.3

这是发生的事情：

如果我调用 displayGraph，programData 和 programDescriptionData 很好。（NSLog 正确显示它）但是......它不会更改标签，也不会转到 redrawView（没有 NSLog redrawView）。

```
Here is the log:
2012-07-08 12:29:19.193 CalculatorGraph[2641:f803] GraphViewController.displayGraph
2012-07-08 12:29:19.194 CalculatorGraph[2641:f803] self.programData (
    22
)
2012-07-08 12:29:19.194 CalculatorGraph[2641:f803] description lable 22
2012-07-08 12:29:19.195 CalculatorGraph[2641:f803] text is 22 
```

现在，如果我按下按钮，一切似乎都可以工作：更新标签并重绘视图和视图中的 drawRect。看到我的问题了吗？

```
 2012-07-08 14:16:54.358 CalculatorGraph[2743:f803] IBAction redraw
2012-07-08 14:16:54.358 CalculatorGraph[2743:f803] myData <GraphViewController: 0x6d3f1f0>
2012-07-08 14:16:54.359 CalculatorGraph[2743:f803] text is CCCC
2012-07-08 14:16:54.359 CalculatorGraph[2743:f803] redrawView
2012-07-08 14:16:54.360 CalculatorGraph[2743:f803] redrawView
2012-07-08 14:16:54.362 CalculatorGraph[2743:f803] graphView.drawRect
2012-07-08 14:16:54.363 CalculatorGraph[2743:f803] data in graphView DrawRect is: <GraphViewController: 0x6d3f1f0> 
```

我的故事板的屏幕截图：请参阅我评论中的链接...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:13:27.960

你确定你的 IBOutlet 是 lableDescription 吗？可能是标签描述？另外：你可能永远不应该 "[self.graphView redrawView];"; 您应该改为“[self.graphView setNeedsDisplay:YES]”。“showDescription”是适当的方法名称吗？（你有“hideDescription”方法吗？）。****

# java - 序列化 java.lang.class

> ID：11374294
> 
> 赞同：0
> 
> 时间：2012-07-07T10:40:34.077
> 
> 标签：java, reflection, classloader, binary-serialization

我在数据库中持久化 Class 对象时遇到问题。

我尝试使用 object 将对象转换为字节数组`ObjectArrayOutputStream`，`ByteArrayOutputStream`如下所示并将其持久化为字节数组：

```
Class klazz = getClassForClassDef();
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(baos);
oos.writeObject(klazz);
baos.toByteArray(); 
```

但我收到如下所示的错误：

```
java.lang.ClassFormatError: Incompatible magic value 2901213189 in class file 
```

我认为构造字节数组的方式有问题。但我不知道如何创建`.class`类对象的正确等价物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:55:43.003

如果您真的想**存储`Class`本身**：

您可以在此处阅读更多相关信息：[https ://stackoverflow.com/a/2390763/1001027](https://stackoverflow.com/a/2390763/1001027)

如果您尝试**存储 Object**：

您正在`Class`为该方法使用 as 参数`writeObject`。而不是这个，你应该使用你拥有的实例。

* * *

```
// write the class
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(baos);
oos.writeObject(objectToSerialize);

// this you need to store
byte[] data = baos.toByteArray();

// read it again (just a test)
ByteArrayInputStream bais = new ByteArrayInputStream(data);
Object restored = new ObjectInputStream(bais).readObject();

// write what came from the deserialization
System.out.println(restored); 
```

在示例中，变量`objectToSerialize`将保存要存储的对象。

* * *

您确定要真正将 java 序列化对象存储到数据库中吗？有几个替代方案。您可以使用诸如 Hibernate 之类的 ORM 框架来创建正式模型。

如果您认为这太动态了，您可以使用 XML 序列化，例如 XStream 甚至 JSON 序列化，这会很好，因为它们是可读格式，这意味着您可以看到真正存储的内容，避免使用 Java 反序列化它应用程序只是为了检查状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:47:27.807

要序列化一个对象，您必须将对象本身而不是它的类写入流。此外，对象实例必须实现`Serializable`接口，并且其所有内部字段都应该是可序列化的或瞬态的。

在您的代码中，`oos.writeObject(klazz);`您不应该编写，而是`oos.writeObject(obj);`提供`obj`您要保存的对象实例。

但是，如果您尝试将 Java 对象存储到数据库中（我们正在谈论关系数据库，不是吗？）我会将对象映射到表，将其每个属性存储为列的值。这样，您将能够使用 SQL 和列的值执行搜索和连接，但您不能索引二进制字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T11:20:11.630

文件`.class`不是**序列化的 Class 对象**。这是完全不同的东西，您将无法使用任何简单的 Java 代码来生成它。但是，您为什么要这样做？您已经`.class`在磁盘上拥有该文件，这就是您的 Java 程序了解该类的方式。你为什么不直接复制那个`.class`文件？这只是找到它来自哪里（什么JAR）的问题。

# c++ - 将左值引用存储到动态分配的数组

> ID：11374296
> 
> 赞同：0
> 
> 时间：2012-07-07T10:40:44.513
> 
> 标签：c++

考虑以下类的自定义数组

```
template <typename element, unsigned int size>
class array
{
private:
    element (&data)[size];
public:
    array(element (&reference)[size]):data(reference){}
    array():data(new element [size]){} // This is where my problem arises
}; 
```

显然，在构造函数的初始化列表中，将右值表达式（*new-expression*）评估***为指针的右值而不是引用类型***。所以在MSVC（Microsoft Visual Studio 2012 RC）中提示关于从***element ****到***element (&)[size]***的类型转换的错误。

但是，我认为如果我可以将右值从指针转换为引用，它应该可以编译。有没有机会在构造函数的初始化列表中实现它？或者这一切都与 C++ 语言的原则相冲突？我已经调查了**reinterpret_cast**，但我发现唯一相关的规则是

> “T1 类型的***左值表达式***可以转换为对另一种类型 T2 的引用。结果是左值或 xvalue 引用与原始左值相同的对象，但类型不同。” - cppreference.com

这清楚地表明转换适用于***左值表达式***。

好的，我知道你现在可能会怎么想 - 为什么你需要这样的自定义数组类，你为什么不只是复合指针而不是有问题的引用？嗯...在知道最好的方法之前，您总是需要选择不同的方法，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:02:49.870

C++11 和右值引用是怎么回事？要获取指针指向的值的左值表达式，只需使用一元运算`*`符。从一开始它就是语言的一部分。你所要做的就是确保你得到一个指向数组的指针，而不是指向数组第一个元素的指针。

```
template <typename element, unsigned int size>
class array
{
private:
    element (&data)[size];
public:
    array() : data(*new element[1][size]) { }
    array(element (&reference)[size]) : data(reference) { }
}; 
```

正如 Mat 在他的评论中提到的，这里的无参数构造函数是一个非常糟糕的主意，因为内存不会被释放。希望拥有一个有效的代码示例可以让您进行一些实验并得出相同的结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:15:51.753

您根本没有在此代码中使用 R 值引用。`&&`r 值符号没有单一的用法。

**编辑：**

```
template <typename element, unsigned int size> 
class array 
{ 
private: 
    element (&data)[size]; 
    static element DefaultArrRef[size];
public: 
    //array(element (&reference)[size]):data(reference){} 
    array():data(DefaultArrRef){}
}; 

template <typename element, unsigned int size> 
element array<element,size>::DefaultArrRef[size]; 
```

# android - android CountDownTimer onStart

> ID：11374298
> 
> 赞同：3
> 
> 时间：2012-07-07T10:41:25.973
> 
> 标签：android, countdowntimer

我想节省 countDownTimer 开始工作的时间，有没有类似 onStart() 的方法？

```
timeToDirectAnswer = new CountDownTimer(25000, 1000) {

            @Override
            public void onTick(long millisUntilFinished) {
            }

            @Override
            public void onFinish() {
            }
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:44:11.837

计时器在`start()`调用它的那一刻开始滴答作响。您可以在任何地方获得当前时间`start()`。

# c# - 将页面缓存存储在不同位置而不是默认位置

> ID：11374302
> 
> 赞同：0
> 
> 时间：2012-07-07T10:42:56.770
> 
> 标签：c#, asp.net, caching

我想在我的 asp.net Web 应用程序上实现缓存的概念。它不是 MVC 应用程序。我已经学会了如何缓存页面（aspx）

```
<%@ OutputCache Duration="10" VaryByParam="none" Location="ServerAndClient" %> 
```

它正在捕捉页面。我想将缓存存储在某个不同位置的文件夹中，而不是默认位置。我不知道该怎么做。对于其他页面，文件夹会有所不同。有没有办法做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:52:21.783

默认情况下，当您使用 [OutputCache] 属性时，内容缓存在三个位置：Web 服务器、任何代理服务器和 Web 浏览器。您可以通过修改 [OutputCache] 属性的 Location 属性来精确控制缓存内容的位置。

您可以将 Location 属性设置为以下任一值：

· 任何

· 客户

· 下游

· 服务器

· 没有任何

· 服务器和客户端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:53:36.507

.Net 4 允许您创建自定义输出缓存提供程序

我了解您只想配置当前代码，以便缓存可以存储在特定文件夹中，但下面的文章为您提供了示例，显示您可以在配置文件中设置 cahcheLocation

此示例向您展示如何存储在物理磁盘文件[http://www.codeguru.com/csharp/.net/net_asp/article.php/c19835/Creating-a-Custom-Output-Cache-Provider-in-ASPNET -4.htm](http://www.codeguru.com/csharp/.net/net_asp/article.php/c19835/Creating-a-Custom-Output-Cache-Provider-in-ASPNET-4.htm)

# inotify - 将 vsftpd 与 inotify IN_CLOSE_WRITE 事件一起使用

> ID：11374305
> 
> 赞同：-1
> 
> 时间：2012-07-07T10:43:12.820
> 
> 标签：inotify, vsftpd

我正在尝试编写基于事件的 ftp 服务器，当一些用户上传任何文件时通知我（用户永远不会做任何删除或其他事情，他们只是上传）。带有 ftplets 的 Apache ftpServer 是我需要的，但它是基于 java 的，不能满足我的环境。所以我打算做的是运行`vsftpd`除它之外的另一个进程来监听`IN_CLOSE_WRITE`事件。完成`vsftpd`文件上传后关闭文件描述符时，我的进程将收到通知，我将执行一些适当的操作。我的问题是：

1.  我有可能错过任何文件上传吗？
2.  是否有可能`IN_CLOSE_WRITE`在其他情况下触发我得到不一致的文件而不是准备使用文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:28:55.310

1.  如果 incrond 服务崩溃或停止，您将在此期间失去通知
2.  `IN_CLOSE_WRITE`应该管用。

# objective-c - 何时覆盖 updateTrackingAreas

> ID：11374308
> 
> 赞同：1
> 
> 时间：2012-07-07T10:44:06.813
> 
> 标签：objective-c, cocoa, nsscrollview, nstrackingarea

所以我有一个相当大`NSScrollView`的几个自定义视图。在这些自定义视图中，我`-(void)updateTrackingAreas`像这样覆盖：

```
- (void)updateTrackingAreas
{    
    [self removeTrackingArea:trackingArea];

    trackingArea = [[NSTrackingArea alloc] initWithRect:[self bounds]
                                                options:(NSTrackingCursorUpdate |
                                                         NSTrackingActiveWhenFirstResponder |
                                                         NSTrackingInVisibleRect)
                                                  owner:self 
                                               userInfo:nil];

    [self addTrackingArea:trackingArea];
} 
```

但不知何故，我觉得这有点低效，因为我在 NSScrollView 中有大约 50 个自定义视图实例，一次只有大约 5 个可见，这样我正在更新不可见视图的跟踪区域。

所以我想如果视图不在 NSScrollView 的可见矩形中，我会跳过更新跟踪区域。就像是：

```
- (void)updateTrackingAreas
{
    if(!NSIntersectsRect([self frame], [[self superview] visibleRect]))
    {
        return;
    }

    // ...
} 
```

这似乎运作良好，但我不确定这是否安全。

有人对这个问题有什么建议吗？

# facebook - Facebook Graph API FQL 返回的结果少于预期

> ID：11374315
> 
> 赞同：4
> 
> 时间：2012-07-07T10:45:05.910
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试使用此 FQL 多查询获取我的朋友喜欢的页面：

```
{
    "query1": "SELECT uid2 FROM friend WHERE uid1 = me()",
    "query2": "SELECT uid, page_id, type FROM page_fan WHERE uid IN (SELECT uid2 FROM #query1)",
    "query3": "SELECT page_id, name, categories, type, page_url, pic_big FROM page WHERE page_id IN (SELECT page_id FROM #query2)"
}​ 
```

查询工作正常并返回结果。然而，它为 260 人返回了大约 2940 个页面，这远低于所查询的人的实际喜欢计数的总和。

我认为这可能是一个权限问题，并要求此列表中的一个人删除朋友应用程序的“访问喜欢、兴趣......”权限。在下一次运行中，她的页面和点赞不在返回的 JSON 中，但页面计数实际上增加了大约 10 或 20 条记录。

我在这里做错了吗？出于性能原因，我正在使用多查询。

使用 Graph API 资源管理器和 PHP SDK 都会发生这种情况：

```
$fql = urlencode($fqlQuery);
$response = $facebook->api("/fql?q={$fql}"); 
```

对这个问题有什么想法吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:59:06.543

Facebook 上有一项额外的隐私功能可能会限制您从某些人那里收到的结果。

该设置位于隐私设置中，称为 - **人们如何将您的信息带到他们使用的应用程序中**

它还给出了一个简短的描述 -

> 可以看到您的信息的人可以在使用应用程序时随身携带。使用此设置来控制人们可以随身携带的信息类别。

该设置中的选项之一是`"Activities, interests, things I like"`. 对于*我的*个人资料，此选项设置为关闭。因此，无论应用程序从我的朋友那里获得什么权限，该应用程序都无法看到我的“喜欢”。

我怀疑您的一些（更聪明的）用户像我一样禁用了此设置，这会阻止您的应用程序获取该信息。

顺便说一句，我认为此设置对于社交网络上的真正隐私至关重要。仅仅因为我的朋友可以看到我喜欢的页面，并不意味着我希望*他们*使用的任何应用程序也能够看到该信息。

# javascript - html-5 范围滑块最大值和最小值

> ID：11374316
> 
> 赞同：2
> 
> 时间：2012-07-07T10:45:07.533
> 
> 标签：javascript, jquery, html

我正在使用 html-5 滑块

```
 <input type="range" .. /> 
```

我想分别在其左侧和右侧滑动滑块`min`和值。`max`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:48:41.490

尝试

```
<input type="range" min="20" max="80" /> 
```

[**演示**](http://jsfiddle.net/G8Lzx/)

以下属性也可以应用于`input type="range"`

*   **max** - 指定允许的最大值
*   **min** - 指定允许的最小值
*   **step** - 指定合法的数字间隔
*   **value** - 指定默认值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:43:43.433

如果要在其左右显示`min`和值，只需在此处打印：`max`

```
10 <input type="range" min="10" max="20" /> 20 
```

您也可以使用 css，尽管它没有得到广泛支持。

```
input[type="range"]:before {
    content: attr(min) " ";
}
input[type="range"]:after {
    content: " " attr(max);
} 
```

# android - 在应用更新期间提高 Android API 级别

> ID：11374317
> 
> 赞同：14
> 
> 时间：2012-07-07T10:45:08.557
> 
> 标签：android, google-play

我现有的启动应用程序之一的 minSdkVersion 是 4，但现在我想提供一个更新，将 minSdkVersion 更改为 5。

我已经尝试过上传到市场上是好的，但是当这个更新真正推出时会发生什么？

设备达不到要求的用户怎么办？除了他们将来无法安装该应用程序外，是否有任何副作用？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-07T11:29:07.290

如果您在开发者控制台中“停用”旧的 apk 文件 - 您的应用程序将只能下载 API 5+。对于使用 API 4 且已安装应用程序的人不会有任何影响。

如果您将市场中的新旧 apk 都保持在“活动”状态，那么市场将为 API 4 的用户提供旧的 apk，为 API 5+ 的用户提供新的 apk。他们还将提供更新您的应用程序。

当您添加支持的版本少于旧版本的 apk 时，您将看到：

[http://take.ms/E0SYg](http://take.ms/E0SYg)

市场自行决定给用户什么 apk。

# java - Java Webstart 报告错误的引导加载程序选项

> ID：11374319
> 
> 赞同：4
> 
> 时间：2012-07-07T10:45:31.103
> 
> 标签：java, constants, java-web-start, bootloader

我在通过 Java Webstart 运行 Java RCP 应用程序时遇到问题。

这适用于团队中的其他人，但不适用于我。（你不只是喜欢那些问题吗）

我相信问题在于它正在下载应用程序的 32 位版本，而不是 64 位。

当我查看我机器上的 webstart .log 文件时，我可以看到以下内容。

```
!SESSION 2012-07-06 16:24:37.672 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.6.0_32
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_GB 
```

所以我认为问题是OS-win32，WS=win32。

我的机器是windows 7 64位。

有没有人对我应该如何进行有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:22:19.727

当打印运行 webstart 的 JVM 的环境变量时，引导加载程序常量似乎具有误导性：

操作系统：Windows 7 Arch：amd64

我们将问题追溯到未下载用户环境的相关 SWT jar（为了增加乐趣，这是通过 webstart 部署的 RCP 应用程序）。

在相关的 jnlp 文件中，我们有以下部分：

```
<resources os="Windows" arch="x86">
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_${org.eclipse.swt.win32.win32.x86.version}.jar"/>
</resources>
<resources os="Windows" arch="x86_64">
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_64_${org.eclipse.swt.win32.win32.x86.version}.jar"/>
</resources>

<resources os="Windows" arch="x86">
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_${org.eclipse.equinox.launcher.win32.win32.x86.version}.jar"/>
</resources>
<resources os="Windows" arch="x86_64">
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_${org.eclipse.equinox.launcher.win32.win32.x86.version}.jar"/>
</resources> 
```

对于大多数人来说这很好，因为 32 位 jre 会下载 x86 架构的资源，一切都很好。

David 机器上的问题是运行 64 位 JVM，它报告 arch 属性被报告为 amd64 而不是 x86_64（尽管它是 Intel cpu）。

将资源部分更改为如下所示可解决该问题：

```
<resources os="Windows" arch="x86">
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_${org.eclipse.swt.win32.win32.x86.version}.jar"/>
</resources>
<resources os="Windows" arch="x86_64">
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_64_${org.eclipse.swt.win32.win32.x86.version}.jar"/>
</resources>
<resources os="Windows" arch="amd64">
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_64_${org.eclipse.swt.win32.win32.x86.version}.jar"/>
</resources>

<resources os="Windows" arch="x86">
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_${org.eclipse.equinox.launcher.win32.win32.x86.version}.jar"/>
</resources>
<resources os="Windows" arch="x86_64">
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_${org.eclipse.equinox.launcher.win32.win32.x86.version}.jar"/>
</resources>
<resources os="Windows" arch="amd64">
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_${org.eclipse.equinox.launcher.win32.win32.x86.version}.jar"/>
</resources> 
```

# iphone - 在 cocos2D 中更改 CCSprite 的父级

> ID：11374320
> 
> 赞同：2
> 
> 时间：2012-07-07T10:45:32.690
> 
> 标签：iphone, cocos2d-iphone, parent, ccsprite

我是 cocos2Dm 的新手，我遇到了一个我无法解决的问题 到目前为止，我在图层中有 2 个精灵（我们称它们为表格），这是可触摸的，其中一个添加了其他精灵，即我想从一张桌子移动到另一张桌子，我正在识别我触摸的对象，并四处移动它们，我的问题是我无法将父级更改为另一张桌子，我试图从父级中删除对象以不同的方式并添加 no 新的父级，但它似乎不起作用，该对象是重复的，因为它没有被删除，我什至试图在触摸它时删除它们。我将对象存储在 _objectsToDrag 中并在 touchbegan 中调用此函数：

```
- (void) lookForObjectWithTouchLocation:(CGPoint)touchLocation
{
    for (RICCObject *object in _objectsToDrag) {
        if (CGRectContainsPoint(object.boundingBox, touchLocation)) { 
            _selectedObject = object;
        }
    }
    if (_selectedObject) {
        [self objectSelectedWithLocation:touchLocation];
    }
} 
```

然后使用 _selectedObject 移动它，这是问题吗？我应该使用 aributes 而不是数组中的本地对象吗？

欢迎任何帮助提前谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T11:21:25.767

要将派生自 CCNode 的类的实例（如 CCSprite、CCLabelTTF 等）从一个父节点移动到另一个父节点，请遵循以下过程：

```
// get yourNode in whatever way fits your implementation ...
CCNode* nodeToMove = yourNode;
// not cleaning up leaves actions running
[nodeToMove removeFromParentAndCleanup:NO];
// add the removed node to its new parent node
[newParentNode addChild:nodeToMove]; 
```

无论您存储节点的方式或位置如何，此过程都有效。

请注意，如果您看到重复的节点，您可以创建一个新节点而不删除旧节点，或者您有两个节点开始。在 cocos2d 中，一个 CCNode 只能有一个父节点，尝试将一个已经有父节点的节点添加到另一个节点会提示错误消息。如果您遇到重复的节点，分别从其父节点中删除一个节点仍将其保留在屏幕上，请首先尝试找出原因。这在正常情况下不会发生，除非您实际创建同一节点的多个版本。

# sql - 按关联记录数排序记录

> ID：11374321
> 
> 赞同：2
> 
> 时间：2012-07-07T10:45:53.803
> 
> 标签：sql, scope, ruby-on-rails-3.2

用户可以提交资源和发表评论。

我想通过选择提交资源和评论的用户来显示最“活跃”的用户，并将结果从提交资源和评论最多的用户排序到最少。

```
**Resource**
has_many :users, :through => :kits
has_many :kits
belongs_to :submitter, class_name: "User"

**User**
has_many :resources, :through => :kits
has_many :kits
has_many :submitted_resources, class_name: "Resource", foreign_key: "submitter_id"

**Kits**
belongs_to :resource
belongs_to :user

**Comments**
belongs_to :user 
```

我是 Rails 中这种 sql 的新手。我怎样才能得到这个记录集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:25:44.380

首先，您需要将评论关联添加到 User 模型：

```
has_many :comments 
```

有了这个，最简单的解决方案是这样做：

```
User.all.sort do |a,b|
   (a.submitted_resources.count + a.comments.count) <=> (b.submitted_resources.count + b.comments.count)
end 
```

这将变得非常慢，因此如果您想做得更好，您将需要添加计数器缓存。在迁移中：

```
def up
  add_column :users, :submitted_resources_count, :integer
  add_column :users, :comments_count, :integer

  User.reset_column_information

  User.find_each do |u| 
    u.update_attributes! \
      :submitted_resources_count => u.submitted_resources.count,
      :comments_count => u.comments.count
  end
end

def down
  add_column :users, :submitted_resources_count
  add_column :users, :comments_count
end 
```

运行此迁移后，您可以将原始查询更改为：

```
User.select('*, (submitted_resources_count + comments_count) AS activity_level').order('activity_level DESC') 
```

这将非常有效地以正确的顺序返回所有用户，并且作为奖励，每个用户将有一个名为的只读属性`activity_level`，该属性将给出确切的提交资源 + 评论计数。

# jquery - 将元素定位在视口之外，然后将其推入

> ID：11374330
> 
> 赞同：1
> 
> 时间：2012-07-07T10:47:30.323
> 
> 标签：jquery, viewport

**我想要的是：**

当页面加载时，元素应该是不可见的，无论视口有多大。一定时间后，我想让元素飞进来。

**到目前为止我所拥有的：** 这段代码（[http://jsfiddle.net/LdfZw/1/](http://jsfiddle.net/LdfZw/1/)）：

HTML

```
<div id="div1">
    <p>Lorem ipsum</p>
</div>​ 
```

CSS

```
#div1 {
    margin-left: 10%;
} 
```

jQuery

```
var  tenPercent = $( window ).width()*0.1;

$('#div1').css('margin-left',-tenPercent);

setTimeout(function() {
    $ ('#div1').animate({marginLeft : tenPercent},1000 );
    }, 1000 );​ 
```

**问题：**

实际上，这段代码存在不止一个问题。

*   它不适用于小窗口尺寸（见小提琴），为什么？
*   当元素飞入后调整窗口大小时，margin-left 当然不是新窗口大小的 10%。有解决办法吗？申请`.css("margin-left","10%");`似乎有点多余。也许有什么`resize();`？

*我真的很感激任何形式的帮助！*

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:54:08.140

为什么不绝对定位元素：

```
#div1 {
    left: -20%;
    position: absolute
}

setTimeout(function() {
    $('#div1').animate({left : 0},1000 );
}, 1000 ); 
```

[演示](http://jsfiddle.net/LdfZw/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:57:25.450

对于这个小效果，您的方法似乎很复杂。您可能想使用 JQueryUI 幻灯片效果[http://jsfiddle.net/nvEyc/](http://jsfiddle.net/nvEyc/)

否则，如果没有 JQuery UI，我会这样做：

[http://jsfiddle.net/uGXb3/](http://jsfiddle.net/uGXb3/)

由于使用了 % 值，因此适用于窗口调整大小。

基本上它的：

```
setTimeout(function() {
    $ ('#div1').animate({marginLeft : "10%"},1000 );
    }, 1000 );​ 
```

和

```
#div1 {
    margin-left:-100%;
}​ 
```

# php - javascript中Date.UTC函数的PHP等价物？

> ID：11374331
> 
> 赞同：2
> 
> 时间：2012-07-07T10:48:13.067
> 
> 标签：php, javascript, date, timestamp, utc

我从 MySQL 获取日期作为字符串（`Y-m-d`格式）。我需要使用[Highcharts](http://www.highcharts.com/)显示图表。Highcharts 使用 javascript[`Date.UTC`](http://www.w3schools.com/jsref/jsref_utc.asp)函数：

> 返回指定日期与 1970 年 1 月 1 日午夜之间的毫秒数。

```
data: [
    [Date.UTC(1970,  9, 27), 0   ],
    [Date.UTC(1970, 10, 10), 0.6 ],
    [Date.UTC(1970, 10, 18), 0.7 ],
    [Date.UTC(1970, 11,  2), 0.8 ],
    [Date.UTC(1970, 11,  9), 0.6 ], 
```

但我想避免使用 javascript 并在 PHP 中执行（将 JSON 对象 - 图表 - 分配给页面本身）。PHP中函数的等价物是什么`Date.UTC`（不管服务器日期区）？

```
$date      = '2012-07-07';
$millisecs = 1000 * unix_timestap_utc_regardless_server_zone($date); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:01:56.893

我会用

```
date_default_timezone_set('UTC');    
$today = date(getdate()); 
```

这会将 $today 设置为日期。

编辑：Niclas 也是对的，这就是我会做的。

编辑 2：如果您愿意，可以用 PHP 中的有效时间戳替换 getdate()...

编辑 3：对不起......误解......使用[strtotime()](http://php.net/manual/en/function.strtotime.php)制作一个有效的时间戳！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:57:57.960

你可以看看这个：

[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T10:24:43.243

获取 PHP 时间戳，然后通过*乘法转换为 Javascript 时间戳*

```
$phpTimestamp = $dateObject->getTimestamp();
$javascripTimestamp = $phpTimestamp * 1000; 
```

# android - Android中的古吉拉特语键盘

> ID：11374335
> 
> 赞同：3
> 
> 时间：2012-07-07T10:48:40.040
> 
> 标签：android

我需要在没有设备根的情况下开发古吉拉特语键盘，在我的应用程序中，我推荐了 [如何为 Android 开发软键盘？](https://stackoverflow.com/questions/3480715/how-to-develop-a-soft-keyboard-for-android/3480756#3480756) ，我无法得到正确的解决方案，所以请建议我如何做到这一点....

谢谢

# android - 无法从我们的网站在 Android 手机上下载 .apk

> ID：11374338
> 
> 赞同：0
> 
> 时间：2012-07-07T10:48:43.290
> 
> 标签：android

当我开始从我们的网站在手机（Google Nexus）上下载 .apk 时，会发生以下情况：

1.我得到代码中的重定向链接 2.开始下载应用程序，但下载完成后，我得到错误下载未完成（失败） 3.我得到错误页面，说页面不可用，我可以上网

这是下载链接的格式：/game.do?x=&y=&z=

早些时候，我能够下载具有相同代码的应用程序。.

如果您对问题有任何想法，请告诉我。

谢谢

Rakesh .apk 大小从 500KB 到 5MB 不等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:04:08.107

使用以下代码从服务器下载 apk 文件

```
private void download(){
    try {
        URL url = new URL("url from apk file is to be downloaded");
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.connect();

        File sdcard = Environment.getExternalStorageDirectory();
        File file = new File(sdcard, "filename.ext");

        FileOutputStream fileOutput = new FileOutputStream(file);
        InputStream inputStream = urlConnection.getInputStream();

        byte[] buffer = new byte[1024];
        int bufferLength = 0;

        while ( (bufferLength = inputStream.read(buffer)) > 0 ) {
            fileOutput.write(buffer, 0, bufferLength);
        } 
        fileOutput.close();

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

并参考下面的链接从 url 下载和安装 apk 文件。

[下载并安装 APK 文件](http://lovingandroid.blogspot.in/2011/10/download-and-install-app.html)

# javascript - 对象的闭包编译器问题

> ID：11374339
> 
> 赞同：4
> 
> 时间：2012-07-07T10:48:48.163
> 
> 标签：javascript, google-closure-compiler

我正在尝试在[google 闭包编译器](http://closure-compiler.appspot.com/home)中编译我的 Js 代码，但在此代码上出现错误

```
 var settings = {
                 providers: ['A', 'B', 'C'],
                 interface: 'basic16',
                 apikey: 'XXXXX-XXXXX-XXXXX-XXXXXXXXXX'
                 } 
```

错误是

```
JSC_PARSE_ERROR: Parse error. invalid property id at line 3 character 10
interface: 'basic16',
          ^
JSC_PARSE_ERROR: Parse error. syntax error at line 3 character 11
interface: 'basic16',
           ^
JSC_PARSE_ERROR: Parse error. syntax error at line 4 character 8
apikey: 'XXXXX-XXXXX-XXXXX-XXXXXXXXXX'
        ^ 
```

但是这段代码在任何浏览器（chrome、firefox、opera、safari、IE7、8、9）中都非常适合我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T11:01:44.100

MDN 声明该关键字`interface`保留供将来使用，不得用于属性/函数/变量名称。

[https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words)

问题是，MDN 还声明此关键字的使用仅在严格模式下受到限制。因此，即使在非严格模式下，当闭包编译器抱怨这一点时，我也不确定它是否在做正确的事情。这看起来更像是一个错误，但最好还是避免使用这些关键字。

但是，一种解决方案是将标识符简单地用引号括起来：

```
var settings = {
    providers: ['A', 'B', 'C'],
    'interface': 'basic16',
    apikey: 'XXXXX-XXXXX-XXXXX-XXXXXXXXXX'
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T16:03:53.470

Ecmascript 3 不允许关键字和保留关键字作为属性名称。Ecmascript 5 取消了这个限制（它们仍然不允许作为变量和函数名）。但是，编译器默认使用 ecmascript 3 模式。

# android - 删除或退格功能。我创建了一个按钮，但无法在我的编辑文本中执行删除/退格

> ID：11374340
> 
> 赞同：1
> 
> 时间：2012-07-07T10:48:53.377
> 
> 标签：android, android-edittext, backspace

我想一一删除我的edittext中的字符。我研究了很多，但有一些问题，请指教。这是我的示例代码。

我创建了一个删除按钮`"ImageButton buttonDelete;"// XML imageButton1` ，我的编辑文本是`"EditText display;"`

```
display = (EditText) findViewById(R.id.editText1);
        buttonDelete.setOnClickListener(new View.OnClickListener()
        {
             public void onClick() 
             {
               // Get edit text characters
                String textInBox = display.getText():
                //Remove last character//
                String newText = textInBox.substring(0, textInBox.length()-1);
                // Update edit text
                display.setText(newText); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:04:59.933

试试这个：

```
// Get edit text characters 
String textInBox = display.getText().toString(); 
if(textInBox.length() > 0)
{
  //Remove last character// 
  String newText = textInBox.substring(0, textInBox.length()-1); 
  // Update edit text 
  display.setText(newText); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-20T13:45:44.167

```
BtonBackSpace.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            String bs = null;
            if(Tfield.getText().length()>0){
                StringBuilder Strb = new StringBuilder(Tfield.getText());
                Strb.deleteCharAt(Tfield.getText().length() - 1);
                bs = Strb.toString();
                Tfield1.setText(bs );

            } 
```

# c# - 数组引用数组

> ID：11374344
> 
> 赞同：0
> 
> 时间：2012-07-07T10:49:47.323
> 
> 标签：c#, string, reference

我有三个字符串数组：

```
private readonly string[] PMCTableColumnNames = new string[] { "PMCIP", "Description", "Cam1ReferencePoints", "Cam2ReferencePoints", "DataserverIP" };
private readonly string[] PMDTableColumnNames = new string[] { "PMDIP", "Description" };
private readonly string[] PMDZonesTableColumnNames = new string[] { "PMDIP", "Description", "Zone" }; 
```

我想构造一个指向这些数组的数组：

```
private var[] ArrayReferences = new var[] { PMCTableColumnNames, PMDTableColumnNames, PMDZonesTableColumnNames }; 
```

当我将此（ArrayReferences）数组索引时，我想获取特定数组的所有元素，如下所示：

```
string[] _PMDTableColumnNames = ArrayReferences[1]; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T10:53:51.843

您可以创建一个数组数组：

```
private string[][] ArrayReferences; 
```

请注意，您必须`ArrayReferences`在构造函数中进行初始化，因为您无法在字段初始化程序中引用其他数组。IE

```
public class ClassName
{
    private readonly string[] PMCTableColumnNames = new string[] { "PMCIP", "Description", "Cam1ReferencePoints", "Cam2ReferencePoints", "DataserverIP" };
    private readonly string[] PMDTableColumnNames = new string[] { "PMDIP", "Description" };
    private readonly string[] PMDZonesTableColumnNames = new string[] { "PMDIP", "Description", "Zone" };

    private string[][] ArrayReferences;

    public ClassName()
    {
        ArrayReferences = new string[][] { PMCTableColumnNames, PMDTableColumnNames, PMDZonesTableColumnNames };
    }

    void SomeMethod()
    {
        string[] _PMDTableColumnNames = ArrayReferences[1];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:57:23.120

```
string[][] ArrayReferences = new [] { PMCTableColumnNames, PMDTableColumnNames, PMDZonesTableColumnNames }; 
```

要不就

```
var ArrayReferences = new [] { PMCTableColumnNames, PMDTableColumnNames, PMDZonesTableColumnNames }; 
```

应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:00:48.643

您可以简单地使用[ArrayList](http://msdn.microsoft.com/en-us/library/system.collections.arraylist%28v=vs.71%29.aspx)类来实现这种目的。

# html - Twitter Bootstrap - 隐藏列然后中心列

> ID：11374346
> 
> 赞同：0
> 
> 时间：2012-07-07T10:50:35.110
> 
> 标签：html, css, twitter-bootstrap

使用 Bootstrap 响应式 - HTML 看起来像......

```
<div class="row-fluid Center">
    <div id="divMapCanvas" class="span6">
        <div id="map_canvas">
        </div>
    </div>
    <div id="divMapPanel" class="span6">
        <div id="map_panel">
        </div>
    </div>
</div> 
```

测试网页： http: [//gfw.yyyz.net/Contact](http://gfw.yyyz.net/Contact)

我想做的是最初隐藏 divMapPanel`div`并使 divMapCanvas`div`居中在页面上。然后按下方向按钮后，divMapCanvas 将向左移动，并出现 divMapPanel。我试过仅仅隐藏 divMapPanel，但我无法让 divMapCanval 居中。

在此先感谢您的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:58:40.817

在包含画布的类的 div 上`span6`，您需要设置一个固定宽度（`width: 526px;`当我让它在您的示例页面上工作时我使用过，但您可以使用 % 代替，或者您有什么，但它不能设置为auto 这是默认设置），您还必须通过添加`float: none;`和来摆脱浮动`margin: 0 auto;`。

在`divMapPanel`您需要添加`display: none`, 以确保它不占用 DOM 中的任何空间。使用`visibility: hidden`例如将不起作用。

然后，当用户单击方向并且您想要并排显示两个元素时，您可以通过添加`float: left`etc. 来摆脱这些设置，并且两个元素应该并排显示。

# java - 如何在没有任何确定或取消选项的情况下仅显示 Java 中的普通消息？

> ID：11374350
> 
> 赞同：3
> 
> 时间：2012-07-07T10:51:30.270
> 
> 标签：java, swing, message, jdialog, jwindow

我想在我的应用程序运行时显示一些消息，而不在 Message Dialog Java swing 中提供任何选项，并且我的应用程序也使用此显示消息运行。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:01:35.020

听起来您想要一些不影响程序流程的弹出通知之类的东西？

如果是这样，以下可能有用：

*   [http://jcarrierpigeon.sourceforge.net/](http://jcarrierpigeon.sourceforge.net/)

# android - 为 Android 编译 libpurple

> ID：11374352
> 
> 赞同：2
> 
> 时间：2012-07-07T10:52:06.980
> 
> 标签：android, compilation, pidgin, libpurple

我想在 android 中实现 libpurple 以将所有 IM 聊天支持集成到 Android 应用程序，因为我正在使用以下链接来使用：

[在 Android 上编译 libpurple](http://developer.pidgin.im/wiki/GSoC2012/Android/compiling)

以下是 android 的存储库 [soc.2012.android android 存储库]

*   ( [http://hg.pidgin.im/soc/2012/michael/android/](http://hg.pidgin.im/soc/2012/michael/android/) )

但问题是，我已经下载了完整的存储库，但按照编译步骤中的建议，没有从服务器下载到我的 PC 的“ **android/workspace ”文件夹。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:00:34.907

要获取我运行的 Android 代码：

```
hg clone https://hg.pidgin.im/soc/2012/michael/android/ android 
```

这让我得到了文件夹 android 中整个存储库的副本。然后切换到 Android 分支，我将运行以下命令：

```
hg checkout soc.2012.android 
```

此时我可以看到包含 Android 工作区的文件夹。

# iphone - 计时器未在 viewWillAppear 方法中启动

> ID：11374353
> 
> 赞同：0
> 
> 时间：2012-07-07T10:52:20.477
> 
> 标签：iphone, cocoa-touch, ipad

我想`viewWillAppear`在调用方法时启动计时器。

它工作得很好，但是当我在这个当前视图上推送一个新视图时遇到了问题，它已经有一个计时器。当我弹出那个新视图并回想起来时，`viewWillAppear`我想像以前一样再次启动计时器。我拥有大部分技术，但找不到解决方案。

```
-(void)viewWillAppear:(BOOL)animated
 {
       [super viewWillAppear:animated];
       [NSThread detachNewThreadSelector:@selector(createTimer) toTarget:self withObject:self];
 }

 - (void)createTimer 
{       
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
  NSRunLoop* runLoop = [NSRunLoop currentRunLoop];

  gameTimer = [[NSTimer timerWithTimeInterval:1.00 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES] retain];
  [[NSRunLoop currentRunLoop] addTimer:gameTimer forMode:NSDefaultRunLoopMode];
  timeCount = 360; 
  [runLoop run];
  [pool release];

}

- (void)timerFired:(NSTimer *)timer 
{
   if(timeCount == 0)
   {
      [self timerExpired];
   } else {
      timeCount--;
       if(timeCount == 0) {
           [timer invalidate];
           [self timerExpired];
       }
    }
    timeLabel.text = [NSString stringWithFormat:@"%02d:%02d",timeCount/60, timeCount % 60];
}

- (void) timerExpired 
{
    //NSLog(@"Final == %@",arrayAnswers);
    //NSLog(@"Attempt == %d",[arrayAnswers count]);

    [gameTimer invalidate];
    gameTimer = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:28:03.290

好吧，根据经验，您的问题是计时器的线程。基本上，问题出在这里：

```
[NSThread detachNewThreadSelector:@selector(createTimer) toTarget:self withObject:self]; 
```

我不确定，但我相信您的代码并没有真正错误。我还没有弄清楚，但我猜 NSTimer 对象在使用时没有被激活`detachNewThreadSelector:`。尝试在主线程上执行计时器。

```
[self performSelectorOnMainThread:@selector(createTimer) withObject:nil waitUntilDone:NO] 
```

我已经这样做了，并得到了我想要的结果。

# objective-c - [NSRegularExpression stringByReplacingMatchesInString] 的意外行为

> ID：11374360
> 
> 赞同：2
> 
> 时间：2012-07-07T10:52:54.230
> 
> 标签：objective-c, regex, cocoa, nsregularexpression

我今天正在修补 Objective-C，但我遇到了一些奇怪的行为。基本上我试图从 NSString 替换所有非字母小写字符。我基本上归结为：

```
int main(int argc, const char * argv[])
{

  @autoreleasepool {
    NSError *error;
    NSRegularExpression *pattern = [[NSRegularExpression alloc] initWithPattern:@"/[^abcdefghijklmnopqrstuvwxyz]/" options:0 error:&error];
    NSString *replacableStuff = @"a b c\nd e";
    NSLog(@"%@", [pattern stringByReplacingMatchesInString:replacableStuff options:0 range:NSMakeRange(0, [replacableStuff length]) withTemplate:@""]);

  }
    return 0;
} 
```

但是，替换似乎从未发生过；运行此日志“abc\nd e”到日志事物。（我期待看到“abcde”。）我尝试了更简单的模式，例如`/[aeiou]/`，甚至只是`/a/`，但无论我尝试什么，stringByReplacingMatchesInString 方法似乎实际上并没有替换任何东西。我在看什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:13:00.253

您需要删除图案两侧的斜线。斜杠不是 cocoa 正则表达式中的元字符，因此与当前表达式匹配的字符串将是单个字母，两边都带有斜杠 - `/a/`、`/b/`、`/c/`等。

您还可以在角色类中使用*范围，如下所示：*

```
NSRegularExpression *pattern = [[NSRegularExpression alloc] initWithPattern:@"[^a-z]" options:0 error:&error]; 
```

# objective-c - 使用 HTML 解析器时出错

> ID：11374362
> 
> 赞同：0
> 
> 时间：2012-07-07T10:53:58.927
> 
> 标签：objective-c, ios, html-parser

我正在尝试使用 Objective-C--HMTL Parser (https://github.com/zootreeves/Objective-C-HMTL-Parser)。我仔细遵循了所有说明，在一个新项目中工作正常，但是当我尝试在另一个项目中使用它时，我得到了这些错误：

[错误截图](http://www.partisani.net/errore.jpg)

这两个项目的区别在于第二个我使用“libsqlite3.dylib”。

谢谢，路易吉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:00:24.443

似乎您没有正确导入 .m 文件，您需要检查 HTMLparser.m 是否包含在项目的编译源中

检查屏幕截图![在此处输入图像描述](../Images/f29e10dfbce6a0069d783f0944e9c69e.png)

编译源应包括`HTMLParser.m`

# c# - ArgumentNullException 未处理 出了什么问题？

> ID：11374367
> 
> 赞同：0
> 
> 时间：2012-07-07T10:54:49.550
> 
> 标签：c#, xml, xna, xml-serialization

我编写了一个类来加载 XML 文件，但我总是收到以下错误消息：

ArgumentNullException 未处理 此方法不接受此参数的 null。参数名称：纹理

我在 batch.Draw() 中收到错误消息：

```
public void Draw(SpriteBatch batch)
{
        batch.Draw(
                texture,
                position,
                null,
                Color.White,
                rotation,
                Vector2.Zero,
                scale,
                SpriteEffects.None,
                0f);
        } 
```

Sprite 类有什么问题？我在这里上传了我的项目：http: [//depositfiles.com/files/kj4an4ef7](http://depositfiles.com/files/kj4an4ef7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:04:57.390

问题是，正如错误所说，绘图代码中的变量为空`texture`。`Sprite`

问题的原因是：您调用该`Load()`方法从 XML 文件中加载精灵列表，但这不会重建类的`Texture`属性`Sprite`。因此，要修复您的错误，您也应该为每个精灵调用`Load()`。

这意味着，在类的`LoadContent()`方法中`Game1`，在该`sprites = Content.Load<List<Sprite>>("Levelinf");`行之后，执行以下操作：

```
foreach(Sprite sprite in sprites) {
    sprite.Load(Content);
} 
```

现在，每个精灵都会加载它的纹理。

PS：这更像是 C# /XNA 问题，而不是 XML 问题 :)

# c++ - 在运行时向对象添加函数集合

> ID：11374379
> 
> 赞同：1
> 
> 时间：2012-07-07T10:56:01.947
> 
> 标签：c++, delegation

id 喜欢做的是在我的代码中实现角色编程技术。我正在使用 C++。C++11 没问题。

我需要的是能够定义一组函数。此集合不能有状态。

这个集合的一些功能将被推迟/委托。

例如（仅用于说明：）

```
class ACCOUNT {
  int balance = 100;
  void withdraw(int amount) { balance -= amount; }
}

ACCOUNT savings_account;

class SOURCEACCOUNT {
  void withdraw(int amount); // Deferred.
  void deposit_wages() { this->withdraw(10); }
  void change_pin() { this->deposit_wages(); }
}

SOURCEACCOUNT *s;
s = savings_account; 

// s is actually the savings_account obj,
// But i can call SOURCEACCOUNT methods.
s->withdraw(...);
s->deposit();
s->change_pin(); 
```

我不想包含 SOURCEACCOUNT 作为 ACCOUNT 的基类并进行强制转换，因为我想模拟运行时继承。（ACCOUNT 不知道 SOURCEACCOUNT）

我愿意接受任何建议；我可以 extern 或类似 SOURCEACCOUNT 类中的函数吗？C++11 联合？C++11 呼叫转移？改变'this'指针？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:36:56.160

听起来您想创建一个`SOURCEACCOUNT`（或各种其他类），它引用 an`ACCOUNT`并具有封闭类委托的一些方法`ACCOUNT`：

```
class SOURCEACCOUNT{
  ACCOUNT& account;
public:
  explicit SOURCEACCOUNT(ACCOUNT& a):account(a){}
  void withdraw(int amount){ account.withdraw(amount); }
  // other methods which can either call methods of this class
  // or delegate to account
}; 
```

# django - 如何仅在某些情况下禁用 Django 的 csrf 保护？

> ID：11374382
> 
> 赞同：38
> 
> 时间：2012-07-07T10:56:32.933
> 
> 标签：django, api, csrf-protection

我正在尝试在 Django 中编写一个站点，其中 API URL 与面向用户的 URL 相同。但是我在处理使用 POST 请求和 CSRF 保护的页面时遇到了问题。例如，如果我有一个页面 /foo/add 我希望能够通过两种方式向它发送 POST 请求：

1.  作为最终用户（使用会话 cookie 进行身份验证）提交表单。这需要 CSRF 保护。
2.  作为 API 客户端（使用 HTTP 请求标头进行身份验证）。如果启用 CSRF 保护，这将失败。

我找到了各种禁用 CSRF 的方法，例如 @csrf_exempt，但这些都在整个视图中禁用它。有没有办法在更细粒度的级别启用/禁用它？还是我只需要从头开始实施自己的 CSRF 保护？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2015-06-30T10:40:46.167

# 调整`urls.py`

如果你在 中管理你的路由`urls.py`，你可以将你想要的路由包装起来[**`csrf_exempt()`**](https://docs.djangoproject.com/en/dev/ref/csrf/#django.views.decorators.csrf.csrf_exempt)，将它们从 CSRF 验证中间件中排除。

**例如，**

```
from django.views.decorators.csrf import csrf_exempt
urlpatterns = patterns(
    # ...
    # Will exclude `/api/v1/test` from CSRF 
    url(r'^api/v1/test', csrf_exempt(TestApiHandler.as_view()))
    # ...
) 
```

* * *

# 或者，作为装饰者

有些人可能会发现`@csrf_exempt`装饰器的使用更适合他们的需求

**例如，**

```
from django.views.decorators.csrf import csrf_exempt
from django.http import HttpResponse

@csrf_exempt
def my_view(request):
    return HttpResponse('Hello world') 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-07T11:33:30.503

Django 的 CSRF 保护文档中有一段标题为“[视图需要保护一个路径](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#view-needs-protection-for-one-path)”，它描述了一个解决方案。这个想法是`@csrf_exempt`在整个视图上使用，但是当 API 客户端标头不存在或无效时，然后调用一个用`@csrf_protect`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-12-18T09:33:03.410

如果您正在使用类基视图 (CBV) 并且想要使用 csrf_exempt 装饰器，则需要使用方法装饰器。

```
from django.utils.decorators import method_decorator
from django.views import View
from django.views.decorators.csrf import csrf_exempt

@method_decorator(csrf_exempt, name='dispatch')
class MyView(View):
    def post(self, request):
        pass  # my view code here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-18T01:47:00.393

就我而言，我使用 JWT 身份验证和 csrf_token 来获取某些视图。并且由于某些我不知道的原因，`csrf_exempt`当我将其设置为装饰器或将视图名称包装在 url 模式中时不起作用。

所以这就是我最终要做的。我覆盖了课堂上的`initialize_request`可用内容。`APIView`

```
class ClasssName(views.APIView):
    def initialize_request(self, request, *args, **kwargs):
       **setattr(request, 'csrf_processing_done', True)** 
        return super().initialize_request(request, *args, **kwargs)
```

# python - Scrapy 检索文本编码不正确，希伯来语为 \u0d5 等

> ID：11374393
> 
> 赞同：1
> 
> 时间：2012-07-07T10:58:21.793
> 
> 标签：python, unicode, encoding, scrapy

第一次使用这些东西。查看有关内部化/文本编码的所有其他 SOF 问题。

我正在做 Scrapy 教程，当我卡在这部分时：[提取数据](http://doc.scrapy.org/en/latest/intro/tutorial.html#extracting-the-data)，当我提取数据时，文本而不是希伯来语显示为一系列 \uXXXX。

[例如，您可以通过抓取此页面](http://israblog.nana10.co.il/blogread.asp?blog=167524&blogcode=13348970)来检查它；

```
scrapy shell http://israblog.nana10.co.il/blogread.asp?blog=167524&blogcode=13348970
hxs.select('//h2[@class="title"]/text()').extract()[0] 
```

这将检索

`u'\u05de\u05d9 \u05d0\u05e0\u05e1 \u05e4\u05d5\u05d8\u05e0\u05e6\u05d9\u05d0\u05dc\u05d9?'`

（无关：）如果您尝试在控制台中打印它，您会得到： `Traceback (most recent call last): File "<stdin>", line 1, in <module> File "C:\Python27\lib\encodings\cp437.py", line 12, in encode return codecs.charmap_encode(input,errors,encoding_map) UnicodeEncodeError: 'charmap' codec can't encode characters in position 0-1: cha racter maps to <undefined>`

尝试通过设置设置编码，尝试手动转换，基本上我觉得我什么都试过了。

（我已经尝试了大约 5 个番茄钟来解决这个问题！）

我该怎么做才能得到应该在那里的希伯来文文本：“ `מי אנס פוטנציאלי?`”

（免责声明：我刚刚进入第一个博客并在[http://Israblog.co.il](http://Israblog.co.il)上发布了我注意到的帖子，我与博客或博客所有者没有任何关系，我只是将其用作示例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:23:54.883

> 我该怎么做才能得到应该在那里的希伯来文文本：“מיאנספוטנציאלי？”

`test.py`：

```
# coding: utf-8

a = u'\u05de\u05d9 \u05d0\u05e0\u05e1 \u05e4\u05d5\u05d8\u05e0\u05e6\u05d9\u05d0\u05dc\u05d9?'
b = 'מי אנס פוטנציאלי?'

print a
print b 
```

结果：

```
vic@wic:~/projects/snippets$ python test.py 
מי אנס פוטנציאלי?
מי אנס פוטנציאלי?
vic@wic:~/projects/snippets$ 
```

如您所见，它们是相同的。它只是同一个 unicode 字符串的不同表示。所以不要担心它没有被正确刮掉。

如果要将其保存到文件中：

```
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
>>> a = u'\u05de\u05d9 \u05d0\u05e0\u05e1 \u05e4\u05d5\u05d8\u05e0\u05e6\u05d9\u05d0\u05dc\u05d9'
>>> a
u'\u05de\u05d9 \u05d0\u05e0\u05e1 \u05e4\u05d5\u05d8\u05e0\u05e6\u05d9\u05d0\u05dc\u05d9'
>>> f = open('test.txt', 'w')
>>> f.write(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)
>>> f.write(a.encode('utf-8'))
>>> f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:45:12.677

您是否尝试过将您从页面获得的信息存储在 json、xml 中时会得到什么。

我在少数几个站点上遇到了一些标志的问题，在大多数情况下，如果您不对检索到的数据做任何事情，它会正确存储，但是如果您尝试在控制台中将它们打印出来，您将无法获得正确的结果，或者如果你不使用 repr 会报错

```
print repr(data) 
```

我希望这会有所帮助，因为我知道编码问题的挫败感。

# rules - 条件中具有 AND、SEQ 或 OR 的 ECA/反应规则的 Drools

> ID：11374397
> 
> 赞同：1
> 
> 时间：2012-07-07T10:58:42.080
> 
> 标签：rules, drools, rule-engine, complex-event-processing

看来，Drools 在这里相当突出，所以我想我会问：

Drools 规则可以用于事件模式检测吗？
模式来自：`"Event_x" SEQ/AND/OR "Event_z"`。下面的示例指示了所需的用法。使用先前已知的 ID 标识事件。

```
rule "Rule x"
when 
      Event1 SEQ/AND/OR Event2
then
    System.out.println("Event1 SEQ/AND/OR Event2"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:34:07.320

是的。“and”和“or”直接用作条件元素：

```
rule X when
    Event1() and Event2()
...

rule Y when
    Event3() or Event4() 
```

它们显然可以组合、嵌套等...查看 Drools 文档了解详细信息。

在 Drools 5.4 之前，序列是使用诸如“之前”、“之后”等时间运算符定义的。例如：

```
rule Z when
    $e1 : Event1() and $e2 : Event2( this after $e1 )
... 
```

对于 Drools 5.5，计划了几种序列条件元素：

```
rule W when
    Event1() -> Event2()
... 
```

其中 -> 是后跟运算符，=> 严格遵循，等等。

细节：

[https://community.jboss.org/wiki/EventSequencing#4_Definition_Sequence_Conditional_Elements](https://community.jboss.org/wiki/EventSequencing#4_Definition_Sequence_Conditional_Elements)

# java - 显示 JFrame

> ID：11374399
> 
> 赞同：3
> 
> 时间：2012-07-07T10:59:33.540
> 
> 标签：java, swing, events, jframe

如果另一个窗口是在子类中启动的，我在弄清楚如何在另一个窗口关闭时打开一个窗口时遇到问题。这是我尝试使用的笨拙代码，但它停止了子类窗口的可见设置。也许是因为它在一个动作事件中，或者它正在停止主线程。

```
 tutorial = new tutorialWindow();
    this.setVisible(false);
    tutorial.setLocationRelativeTo(null);
    tutorial.setVisible(true);
    tutorial.setCurrentUser(users.getCurrentUser());

    while(tutorial.isOpen() == true ) {
    }
    this.setVisible(true);
    users.updateUser(tutorial.getCurrentUser()); 
```

我的想法是，它只会卡在代码部分中，直到另一个窗口关闭，然后当 tutorialWindow 的 Open 布尔值设置为 false 时会再次出现，因为它打破了 while 循环。

我确定这是使用正确线程的问题，或者可能是各种通知方法，但到目前为止我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T11:12:52.160

您可以使用[`WindowListener`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/WindowListener.html). 在下面的示例[`WindowAdapter`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/WindowAdapter.html)实现`WindowListener`中，我只是覆盖了该`public void windowClosed(final WindowEvent e)`方法，打开了第二个窗口。

```
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;

public class TestJFrame {

    public static void main(final String args[]) {
        JFrame jFrame1 = new JFrame();
        jFrame1.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        jFrame1.add(new JLabel("First JFrame"));
        jFrame1.pack();

        final JFrame jFrame2 = new JFrame();
        jFrame2.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        jFrame2.add(new JLabel("Second JFrame"));
        jFrame2.pack();

        jFrame1.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosed(final WindowEvent e) {
                jFrame2.setVisible(true);
            }
        });

        jFrame1.setVisible(true);

    }

} 
```

# java - JavaCV中传递给cvFindContours()的参数是什么？

> ID：11374400
> 
> 赞同：7
> 
> 时间：2012-07-07T10:59:46.150
> 
> 标签：java, c++, opencv, javacv

请有人解释一下`cvFindContours`方法以及它需要什么参数？

例如，下面是使用 OpenCV 的代码：

```
hierarchy = cv2.findContours(thresh, cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE) 
```

请问有人可以解释如何使用JavaCV编写这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T12:22:39.433

正如 Mohammad 提到的，这三个参数是**header_size**、**mode**和**method**。您可以按如下方式使用此方法

```
 IplImage src = cvLoadImage(path);//hear path is actual path to image
    IplImage grayImage    = IplImage.create(src.width(), src.height(), IPL_DEPTH_8U, 1);
    cvCvtColor(src, grayImage, CV_RGB2GRAY);
    cvThreshold(grayImage, grayImage, 127, 255, CV_THRESH_BINARY);
    CvSeq cvSeq=new CvSeq();
    CvMemStorage memory=CvMemStorage.create();
    cvFindContours(grayImage, memory, cvSeq, Loader.sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE); 
```

希望这可以帮助您理解这种方法。

# android - 应用程序启动时的Android auth-dialog

> ID：11374401
> 
> 赞同：1
> 
> 时间：2012-07-07T10:59:57.297
> 
> 标签：android, modal-dialog

我有一些问题。我正在尝试执行 auth-dialog，用户在其中输入 pass 以使用应用程序。输入我存储在 SharedPreferences 中的通行证。那么，第一个问题：从安全的角度来看，以这种方式存储密码是正确的想法吗？

第二个也是主要问题：这个对话框只能在应用程序启动时打开。现在它在 onCreate() - 方法中完成。但这不对，因为例如：我运行应用程序，输入 pass，单击确定按钮并关闭对话框。但是当我改变屏幕的旋转时，这个对话框再次打开，因为当我们旋转屏幕时，Activity 被破坏并且 onCreate() 方法再次被调用。那么，我应该在哪里放置打开我的身份验证对话框的代码，以便仅在应用程序启动时打开它？

感谢所有答案！

# java - scribe 1.3 share request to linkedin API 返回 401 - 未经授权

> ID：11374403
> 
> 赞同：3
> 
> 时间：2012-07-07T11:00:10.673
> 
> 标签：java, linkedin, scribe

我正在尝试从我的 Web 应用程序向我的linkedin 发送共享内容，但看起来我做错了什么。

这是我的java代码：

```
String payload = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"+
    "<share>" +
        "<comment>testing</comment>" +
        "<visibility><code>anyone</code></visibility>" +
        "</share>";

String PROTECTED_RESOURCE_URL = "http://api.linkedin.com/v1/people/~/shares";
        OAuthService service = new ServiceBuilder()
        .provider(LinkedInApi.class)
        .apiKey("XXXXXXXXX")
        .apiSecret("XXXXXXXXX")
        .debug()
        .build();
Scanner in = new Scanner(System.in);
Token requestToken = service.getRequestToken();

// here is for enter the confirmation code while i'm use ooB, use callback in future
System.out.println("Now go and authorize Scribe here:");
System.out.println(service.getAuthorizationUrl(requestToken));
System.out.println("And paste the verifier here");
System.out.print(">>");
Verifier verifier = new Verifier(in.nextLine());

Token accessToken = service.getAccessToken(requestToken, verifier);
OAuthRequest request = new OAuthRequest(Verb.POST, PROTECTED_RESOURCE_URL);
request.addPayload(payload);
service.signRequest(accessToken, request);
Response response = request.send(); 
```

一切看起来都在调试控制台中工作，但是当我尝试打印响应正文时，我得到了这个：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
  <status>401</status>
  <timestamp>1341657286653</timestamp>
  <request-id>4STP3FUGSG</request-id>
  <error-code>0</error-code>
  <message>[unauthorized]. OAU:XXXXXXX|3619482b-ea17-4382-8008-5b108e90c4a2|*01|*01:1341657286:wp7SeE6fAPIj5cSKfd3t+lZfwpE=</message>
</error> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T07:52:07.377

感谢 Pablo，在这种情况下，调试模式对我没有帮助，但是通过一些搜索，我发现了问题：

为这样的 Post 请求添加标头

```
 request.addHeader("Content-Length", Integer.toString(payload.length()));  
    request.addHeader("Content-Type", "text/xml"); 
```

# opencv - windows系统路径是什么？-关于Devcpp Opencv

> ID：11374406
> 
> 赞同：2
> 
> 时间：2012-07-07T11:00:29.873
> 
> 标签：opencv, path, system, dev-c++

我已经通过较旧的问题和使用谷歌调查了它，但我找不到我的问题的答案。

我一直在尝试让 devcpp 与 opencv2.1 一起工作。我配置了它`cmake`并生成了文件。`Mingw32-make`然后我通过 Windows 7 cmd用命令编译它。无论我尝试如何从 devcpp 链接东西，它都没有成功。它一直给我`cv::freecast(void)`错误。

我见过一些人在谈论设置系统路径的东西。那系统路径到底是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:33:05.133

当被问到时，您必须告诉 Windows 在哪里寻找 openCV 库。有两种选择：

1.  不要告诉 windows 在哪里寻找 .dll 并将它们放在与项目相同的文件夹中
2.  通过将它们添加到系统路径来告诉 Windows .dll 在哪里

[在“使用 Visual Studio 编译”第 3 点中，您](http://opencv.willowgarage.com/wiki/InstallGuide)可以了解如何操作。

# c++ - 比较指向 C++ 中给定值的指针

> ID：11374410
> 
> 赞同：3
> 
> 时间：2012-07-07T11:01:41.653
> 
> 标签：c++, pointers, comparison

我在 amd64 架构上。以下代码在“if”语句中被 g++ 编译器拒绝：

```
void * newmem=malloc(n);
if(newmem==0xefbeaddeefbeadde){ 
```

带有错误消息：

```
error: ISO C++ forbids comparison between pointer and integer [-fpermissive] 
```

我似乎找不到让它运行所需的魔法咒语（而且我不想使用 -fpermissive）。任何帮助表示赞赏。

背景：我正在寻找一个丑陋的错误，它在某些 STL 新操作中请求内存时使我的程序崩溃（至少 gdb 告诉我）。认为它可能是分配的内存块之一的一些内存溢出，不幸的是，与操作系统用来管理我的程序的内存列表的内存相邻，我迅速覆盖了 new()，new 加上它们的删除对应的例程增加了内存围栏；虽然应用程序仍然崩溃（所有围栏都完好无损（*叹气*）），但 gdb 现在告诉我：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000604f5e in construct (__val=..., __p=0xefbeaddeefbeadde, this=<optimized out>)
at /usr/include/c++/4.6/ext/new_allocator.h:108
108           { ::new((void *)__p) _Tp(__val); } 
```

我注意到指针**__p**的值是我用于我的一个内存栅栏 (0xdeadbeef) 的值的指针表示，因此我希望在我的 new() 中更早地捕捉到这一点，以尝试在我的程序。

附加说明：它崩溃的函数在崩溃之前完美地运行了几百万次（与几十个其他例程混合在一起，这些例程也都运行了几千到几百万次），使用 valgrind 似乎不是一个选项 atm，因为它需要我的程序崩溃前 6 小时和 11 Gb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:06:46.550

其中一个是整数，另一个是指针。也许一个丑陋的演员会做

```
if(newmem==(void*)0xefbeaddeefbeadde){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:16:22.580

对于您的问题：您有 2 个选项 - 将指针转换为 64 位数字或将数字转换为`void*`

* * *

对于背景：由于这花费的时间太长，*可能*是内存泄漏。因此，请尝试`valgrind`- 无需等待崩溃，只需运行您的程序`valgrind`并使用适当的选项即可。`valgrind`也可以帮助您捕捉未定义的行为。

Another thing - compile your program with `-O0` optimization level and with max level of debug symbols - `-ggdb3`. Also, if your executable does not generate a core dump, when this error occurs, make it generate. Then leave it working, while you're trying different approaches to catch the error.

In case you don't succeed, you'll at least have a (hopefully) nice core dump, that you can examine with `gdb your_exe the_core_dump`. Then, watch the core frame by frame, watch the variables, etc.

If it's not a memory leak, it could be a memory corruption somewhere, undefined behavior or something like this. If a good core dump is generated, you'll probably catch the error. Or, at least, it could give you useful information about the case.

另一件事，如果您生成核心转储（无论是好还是坏），这可能很有用 - 转储的大小。如果它太大（“大”的定义取决于你的程序），那么你很可能有内存泄漏（它可能是某种交叉引用问题，如果你使用智能指针，如果是这样 -`valgrind`不会捕获它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:37:55.817

那样可能行不通。下次您的程序运行时，`malloc`可能永远不会返回该值。您必须做其他事情，而不仅仅是检查 new 的返回**值**！

# java - 创建一个 java 应用程序以从另一个 java 应用程序获取信息

> ID：11374414
> 
> 赞同：1
> 
> 时间：2012-07-07T11:01:56.157
> 
> 标签：java

我有一个 java 应用程序，它生成信息并在屏幕上打印出这些信息。我的问题是获取这些信息并将它们传输到另一个 java 应用程序。这个应用程序有一个自己的 main。我知道它看起来太笼统但我不知道如何更好地解释这个案例研究

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T11:06:17.740

您的问题**是**笼统的，但这里有几个指针（从最底层到最全面）：

*   控制台中的[管道输出：](/questions/tagged/pipe "显示标记为“管道”的问题")

    ```
    $ java -jar first-app.jar | java -jar second-app.jar 
    ```

    在这种情况下，所有控制台输出`first-app`都将被重定向到`second-app`. 这需要两个应用程序在同一台机器上工作。以下所有解决方案都允许跨网络分发生产者和消费者。

*   [socket](/questions/tagged/socket "显示标记为“套接字”的问题") - Java 原生且很好地支持它们

*   [rmi](/questions/tagged/rmi "显示标记为“rmi”的问题") - 通过二进制协议进行 Java 到 Java 通信的事实标准，类似[rpc](/questions/tagged/rpc "显示标记为“rpc”的问题")
*   [web-services](/questions/tagged/web-services "显示标记为“网络服务”的问题") -基于[xml](/questions/tagged/xml "显示标记为“xml”的问题")的基于[http](/questions/tagged/http "显示标记为“http”的问题")、[soap](/questions/tagged/soap "显示标记为“肥皂”的问题")或[rest的协议](/questions/tagged/rest "显示标记为“休息”的问题")
*   [jms - 通过](/questions/tagged/jms "显示标记为“jms”的问题")*所谓的*消息代理异步发送消息
*   共享数据库/文件/内存，例如使用[hazelcast](/questions/tagged/hazelcast "显示标记为“hazelcast”的问题")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:07:25.173

您可以使用[files](http://docs.oracle.com/javase/tutorial/networking/index.html)，以便将您需要的数据保存在文件中，然后其他应用程序从文件中读取该数据。这是最简单的解决方案，在更复杂的场景中您可以使用[Socket](http://docs.oracle.com/javase/tutorial/networking/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:06:39.843

您可以使用套接字（这是两个进程可以相互通信的方式之一），您可以在此处找到示例：http: [//docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T11:06:49.420

在我看来，您正在寻找 IPC；进程间通信。

还有更多选项，但 Java RMI（远程方法调用）可以做到，它隐藏了低级套接字实现：[http ://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T11:08:24.827

如果您有第二个程序的源代码，您可能只需将第一个程序的输出重定向到您的第二个程序：[http://en.wikipedia.org/wiki/Redirection_(computing)](http://en.wikipedia.org/wiki/Redirection_%28computing%29)

# android - 使用 REST Api 的移动应用程序开发计划是个好主意吗？

> ID：11374416
> 
> 赞同：2
> 
> 时间：2012-07-07T11:02:05.893
> 
> 标签：android, ios, rest, architecture

我是移动原生应用程序开发的新手。

但我熟悉网络应用程序开发。

我打算先开发 iPhone Native App，然后再开发 Android Native App。

为了最大限度地减少工作量，我的计划是为我的应用程序开发 REST API。

API 服务器将处理数据库 CRUD 和会话，以便 Native App 调用

以抽象方式从数据库中获取数据。

以便我的 iOS、Android 等原生应用程序只使用那些 REST API

读取和写入照片、文本、LatLng 等。

我不确定这是开发本机应用程序的推荐方式。

也许与本机应用程序和数据库的直接通信会具有更好的性能，但我担心在每个其他本机应用程序版本中开发逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:40:12.227

是的，这是 Android 中很好的推荐方法。尽管 KSAOP2 在某些 android 应用程序中工作，但在 android 中没有对 SOAP 的官方支持。要实现客户端使用restful web svc，您需要在单独的线程中执行此操作。Android 4.x 不支持主线程中的网络连接。

iOS：如果 webapplciation 提供 RESTful webservice 或者你可以使用 SOAP，它可能会很好。在 SOAP 中连接到网络 url 会消耗更多内存。

RESTful 方法是除 SOAP 之外的普遍接受的 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:09:18.623

这种方法是完美的，我们也在我们的应用程序中这样做。通常我们这样做只是为了让客户端应用程序可以是任何应用程序，并且它可以通过REST API调用来使用您的数据库。

例如，您可以使用相同的 API Rest 调用创建 PHP 网站、Iphone 应用程序、Android 应用程序、BB 应用程序。

你在轨道上 InspiredJW ;)

谢谢， 吉格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T11:03:48.733

您的方法是正确的，不要让您的本机应用程序与远程数据库通信，而是如您所说，您应该添加一个 REST 层，并让您的应用程序与之通信。

# css - CSS 定位：容器总是离浏览器底部 60 像素，但可滚动

> ID：11374424
> 
> 赞同：0
> 
> 时间：2012-07-07T11:03:24.630
> 
> 标签：css, positioning

我试图在浏览器底部**上方**放置一个 60 像素的大型容器 div ，以便为视频流和静止图像腾出空间，与[这里](http://www.damienhirst.com/)的解决方案非常相似。

与常见的粘性/固定类型页脚不同，容器在访问页面和随后的浏览器调整大小时保持在其位置 - 但可以向上滚动以供想要浏览网站内容的用户使用。

查看示例站点，我可以看到 CSS 属性“top”在浏览器调整大小时发生变化，但我找不到完成此操作的*机制*。

我应该如何实现这种*弹性*？

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:14:03.537

您可以按照以下方式使用 Javascript 执行此操作

```
setTop = function(e) {
    document.getElementById('content').style.marginTop = window.innerHeight - 60;
};

window.onresize = setTop; 
```

完整的工作示例：

```
<html>
<head>
    <title>My Page</title>
    <style type="text/css" media="screen">
    #content {
      width: 80%;
      margin: 0 auto;
      border: 1px solid black;
      height: 100%;
    }
    </style>
</head>
<body>

<div id="content">
  Here is the content...
</div>

<script type="text/javascript" charset="utf-8">
  setTop = function(e) {
      document.getElementById('content').style.marginTop = window.innerHeight - 60;
  };

  setTop();
  window.onresize = setTop;
</script>

</body>
</html> 
```

# ruby - 规范测试基于 EventMachine (Reactor) 的代码

> ID：11374425
> 
> 赞同：6
> 
> 时间：2012-07-07T11:03:27.063
> 
> 标签：ruby, testing, amqp, eventmachine, minitest

我正在尝试整个`BDD`方法，并想测试我正在编写`AMQP`的香草应用程序的 -based 方面。`Ruby`在选择`Minitest`作为测试框架以平衡其功能和表现力而不是其他恰当命名的蔬菜框架之后，我开始编写这个规范：

```
# File ./test/specs/services/my_service_spec.rb

# Requirements for test running and configuration
require "minitest/autorun"
require "./test/specs/spec_helper"

# External requires
# Minitest Specs for EventMachine
require "em/minitest/spec"

# Internal requirements
require "./services/distribution/my_service"

# Spec start
describe "MyService", "A Gateway to an AMQP Server" do

  # Connectivity
  it "cannot connect to an unreachable AMQP Server" do

   # This line breaks execution, commented out
   # include EM::MiniTest::Spec

   # ...
   # (abridged) Alter the configuration by specifying
   # an invalid host such as "l0c@alho$t" or such
   # ...

   # Try to connect and expect to fail with an Exception
   MyApp::MyService.connect.must_raise EventMachine::ConnectionError
  end

end 
```

我已经注释掉了包含[em-minitest-spec gem](https://github.com/phiggins/em-minitest-spec)的功能，它应该强制规范在`EventMachine`反应器内运行，如果我包含它，我会遇到一个关于（我想）内联类等的更粗略的异常：`NoMethodError: undefined method 'include' for #<#<Class:0x3a1d480>:0x3b29e00>`.

我正在测试的代码，即该`connect`服务中的方法基于[这篇文章](http://www.hiringthing.com/2011/11/04/eventmachine-with-rails.html)，如下所示：

```
# Main namespace
module MyApp

  # Gateway to an AMQP Server
  class MyService

    # External requires
    require "eventmachine"
    require "amqp"

    # Main entry method, connects to the AMQP Server
    def self.connect

      # Add debugging, spawn a thread
      Thread.abort_on_exception = true
      begin
        @em_thread = Thread.new {
          begin
            EM.run do
              @connection  = AMQP.connect(@settings["amqp-server"])
              AMQP.channel = AMQP::Channel.new(@connection)
            end
          rescue
            raise
          end
        }

        # Fire up the thread
        @em_thread.join

        rescue Exception
          raise
        end
      end # method connect
  end
end  # class MyService 
```

整个“*异常处理*”只是试图将异常冒泡到我可以捕获/处理它的地方，这也无济于事，无论有没有`begin`and`raise`位，在运行规范时我仍然得到相同的结果：

`EventMachine::ConnectionError: unable to resolve server address`，这**实际上是**我所期望的，但`Minitest`与整个反应堆概念并没有很好地配合，并且因此未能通过测试`Exception`。

那么问题仍然存在：一个测试`EventMachine`相关的代码如何使用`Minitest`的规范机制？[另一个问题](https://stackoverflow.com/questions/10592131/testing-eventmachine-with-cucumber)也一直在徘徊`Cucumber`，也没有答案。

或者我应该专注于我的主要功能（例如消息传递和查看消息是否被发送/接收）而忘记边缘情况？任何见解都会真正有帮助！

当然，这一切都可以归结为我上面写的代码，也许这不是编写/测试这些方面的方式。可能！

关于我的环境的注意事项：（是的，`ruby 1.9.3p194 (2012-04-20) [i386-mingw32]`Win32 :>）`minitest 3.2.0`，，，，`eventmachine (1.0.0.rc.4 x86-mingw32)``amqp (0.9.7)`

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T15:39:41.137

*抱歉，如果此响应过于迂腐，但我认为如果您区分单元测试和验收测试，您将更轻松地编写测试和库。*

# BDD 与 TDD

注意不要将 BDD 与 TDD 混淆。虽然两者都非常有用，但当您尝试在验收测试中测试每个边缘情况时，它可能会导致问题。例如，BDD 是关于测试您尝试使用服务完成的工作，这与您对消息队列所做的事情有关，而不是连接到队列本身。在我看来，当您尝试连接到不存在的消息队列时会发生什么更适合单元测试的领域。还值得指出的是，您的服务不应该负责测试消息队列本身，因为这是 AMQP 的责任。

# BDD

虽然我不确定您的服务应该做什么，但我想您的 BDD 测试应该类似于：

1.  启动服务（如果需要，可以在测试中的单独线程中执行此操作）
2.  写一些东西到队列中
3.  等待您的服务响应
4.  检查服务结果

换句话说，BDD（或验收测试，或集成测试，无论你怎么想它们）可以将你的应用程序视为一个应该提供某些功能（或行为）的黑匣子。这些测试让您专注于您的最终目标，但更多的是为了确保一两个黄金用例，而不是应用程序的健壮性。为此，您需要分解为单元测试。

# TDD

当您进行 TDD 时，让测试在代码组织方面为您提供一些指导。很难测试创建新线程并在该线程内运行 EM 的方法，但单独对其中任何一个进行单元测试并不难。因此，请考虑将主线程代码放入可以单独进行单元测试的单独函数中。然后，您可以在对该方法进行单元测试时将该`connect`方法存根。此外，您可以测试当 AMQP 抛出错误时会发生什么（这是您的代码处理的责任），而不是测试当您尝试连接到坏服务器时会发生什么（测试 AMQP）。`AMQP.connect`在这里，您的单元测试可以排除抛出异常的响应。

# ios - 对于 .xib 文件，我如何知道文件的所有者是哪个类？

> ID：11374429
> 
> 赞同：2
> 
> 时间：2012-07-07T11:03:50.373
> 
> 标签：ios, interface-builder

通常，我们需要使用 .xib 的 File's Owner 类来连接出口和操作。

我如何知道每个 .xib 的文件所有者是哪个类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T11:06:52.550

选择xib，然后在左侧选择文件所有者

![在此处输入图像描述](../Images/54bef310ea724fba8a011b58176409d9.png)

在检查器的右侧，从左侧检查屏幕截图中选择第三个图标，这里是文件所有者的类

![在此处输入图像描述](../Images/5ec83c8c8430c45957d0e65bbca3f90b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:06:27.953

> 身份检查员

**(Cmd+Option+3)**并检查类名。

它将显示 xib 文件的所有者。

# asp.net-mvc - Html.ActionLink 和加载图像显示？

> ID：11374430
> 
> 赞同：0
> 
> 时间：2012-07-07T11:03:51.697
> 
> 标签：asp.net-mvc, jquery-ui, loading, actionlink

我正在显示一个带有下面链接的 jquery ui dilog。对话框在 2 秒后打开，我想显示一个 loding 图像，直到它打开。我怎样才能做到这一点？

```
@Html.ActionLink("Ekle", "AddCustomer", "Customer", routeValues: null, htmlAttributes: new { id = "AddCustomerLink", data_dialog_title = "Yeni Müşteri" }) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:17:26.493

请改用[Ajax.ActionLink](http://msdn.microsoft.com/en-us/library/dd493106.aspx)并指定[LoadingElementId](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions.loadingelementid.aspx)属性。

# jquery - 最大插件位置：绝对

> ID：11374431
> 
> 赞同：1
> 
> 时间：2012-07-07T11:03:52.787
> 
> 标签：jquery, html, css, position, slideshow

我正在使用 Maximage jquery 插件来创建全屏幻灯片。该插件允许您包含分层在背景图像顶部的 HTML 元素。我想使用 HTML 为每个图像提供标题，并将标题分层放在我的网站页脚顶部（与 Maximage 分开）。我尝试了各种定位，但找不到方法，由于元素的顺序，标题总是在页脚后面。有谁知道我该怎么做？在 maximage 插件呈现后，我的代码如下 -

```
<div role="main">
<img id="cycle-loader" src="img/ajax-loader.gif" style="display: none;">
<div id="maximage" class="mc-cycle" style="width: 1282px; height: 294px; overflow: hidden; display: block;">
   <div class="mc-image " data-href="" style="background-image: url("img/showcase/1-redmire.jpg"); position: absolute; top: 0px; left: 0px; display: block; z-index: 8; opacity: 1; width: 1282px; height: 294px;" title="">
      <div class="slide-caption">
         <p>Bespoke house in Mercaston, Derbyshire. Image produced for client issue.</p>
      </div>
   </div>
</div>
</div>
<footer>
   <a id="arrow_left" href=""></a>
   <a id="arrow_right" href=""></a>
   <div id="controls"></div>
</footer> 
```

和 CSS -

```
footer 
{ 
   bottom: 0px; 
   position: fixed; 
   width: 100%; 
   background: url(../img/bg-black.png) repeat; 
   color: #FFF; 
   height: 55px; 
   line-height: 55px; 
   border-bottom: 1px solid #333;  
}
.slide-caption 
{ 
   position: fixed; 
   z-index: 998; 
   bottom: 20px; 
   left: 20px; 
   color: #ffffff; 
   background: #000000; 
   padding: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:28:39.140

您的问题似乎与一般 HTML 样式限制有关。使用 z-indexes 时的一般规则是 z-index 文档树中位于同一级别的元素：因此在您的示例中，它将是 z-indexing`div[role="main"]`和 z-indexing `<footer>`。对于一些现代浏览器，这可以通过块级元素来完成，但是如果您试图准确地回退到旧浏览器或绝对定位元素（这就是 Henrik 无法复制您的问题的原因），则不一致。我不知道如何在绝对定位的父元素和子元素之间滑动外来元素......如果有人这样做，请告诉我。

我能看到的最简单的解决方案是将标题拉出并使用 jQuery 将其动态写入页脚。这可以通过 Cycle 的 before() 和 after() 动画回调（http://jquery.malsup.com/cycle/options.html）轻松完成。

我已经在 jsfiddle 中为您创建了一个示例：http: [//jsfiddle.net/eDR4v/1/](http://jsfiddle.net/eDR4v/1/)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:46:15.477

您提供的代码似乎可以完成这项工作，不是吗？当我将其插入 jsfiddle [http://jsfiddle.net/YemKf/](http://jsfiddle.net/YemKf/)时，标题显示在页脚上方。

# php - 在 Facebook 登录之前显示的 Codeigniter 视图文件

> ID：11374432
> 
> 赞同：0
> 
> 时间：2012-07-07T11:03:57.017
> 
> 标签：php, facebook, codeigniter

我已经成功地将 facebook connect 集成到我的 codeigniter 应用程序中，但是我遇到了一个奇怪的故障。

我的登录控制器中的过程如下：

1.  检查用户是否有 facebook 会话
2.  如果用户已登录 facebook 并已获得许可，则应将他重定向到我的应用程序上的个人资料页面
3.  如果没有会话，或者如果用户登录到 facebook 但没有授予权限，登录表单（查看文件）应该显示没有重定向

我面临的问题是，如果用户已登录 facebook 并已获得权限，并且如果他访问登录页面，登录表单会短暂显示，然后在一两秒钟后，他会被重定向到他的个人资料页面。为什么甚至显示登录表单？`$this->load->view('login_form');`在检查完上述所有内容后，所有代码都在控制器的最后一行执行。

所以现在，首先显示 login_form 视图文件，然后检查 facebook 会话，然后重定向。

添加了控制器代码：

```
$this->load->library('facebook');
$user = $this->facebook->getUser();
if($user)
        {   try{
                $fb_data = $this->facebook->api('/me');
            }
            catch(FacebookApiException $e)
            {
                error_log('from the login: ' . $e);
                $user = null;        
            }
        }
if($user)
{
//below line checks if facebook email is in database
if($this->ion_auth->email_check($fb_data['email'])
{
redirect('my_profile');
}
}
//user not logged in display login page
$this->load->view('login_form'); 
```

在我的登录表单上，我使用的是 facebook javascript 连接按钮。按下按钮打开 facebook oauth 对话框页面，执行后通过 javascript 刷新原始登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:08:38.133

```
$this->load->library('facebook');
$user = $this->facebook->getUser();
if($user)
        {   try{
                $fb_data = $this->facebook->api('/me');
            }
            catch(FacebookApiException $e)
            {
                error_log('from the login: ' . $e);
                $user = null;        
            }
        }
if($user)
{
//below line checks if facebook email is in database
if($this->ion_auth->email_check($fb_data['email'])
{
redirect('my_profile');
}
}else{
//user not logged in display login page
$this->load->view('login_form');
} 
```

代码仍在执行中，因为它没有被告知，试试这个看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:09:41.183

> 为什么甚至显示登录表单？

因为您执行了一个将 HTML 代码输出到浏览器的方法……？

> 毕竟代码 $this->load->view('login_form'); 在控制器的最后一行执行

*如果以前的条件加起来根本*不需要显示登录表单，为什么还要执行它？

# html - 是否需要关键字元标记？

> ID：11374438
> 
> 赞同：1
> 
> 时间：2012-07-07T11:04:20.327
> 
> 标签：html, meta-tags

html文档头中是否`keywords`需要元标记？

从文档结构的 W3 描述来看，在我看来并非如此：http: [//www.w3.org/TR/html401/struct/global.html](http://www.w3.org/TR/html401/struct/global.html)。但我找不到他们直接说的任何地方。

原因是我听到人们争论它应该始终存在。甚至是空的。我的问题不在于标签的有用性，而在于它是否需要或是否应该出于某种原因始终存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:05:27.610

不，这是 SSO 的一项古老技术。Web 浏览器基本上会忽略它。搜索引擎今天*可能*（大部分）忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:09:19.850

元`keywords`标记是并且一直是可选的。

如果元标记没有任何内容，请将其完全删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T11:19:31.293

元标记是可选的。暗示这一点的正式规则是 head 元素的内容模型，即除了 title 元素之外的所有子元素都是可选的。

# android - clicklistener 和 longclicklistener 在同一个按钮上？

> ID：11374444
> 
> 赞同：2
> 
> 时间：2012-07-07T11:05:07.390
> 
> 标签：android, onclick, actionlistener, phone-call, long-click

我正在创建一个呼叫/拨号按钮，当我单击该呼叫/拨号按钮时，将根据编辑文本中显示的输入进行呼叫。我设法做到了那部分。你们能告诉我我是否可以在同一个呼叫/拨号按钮上单击更长的时间，以便吐司可以出来要求用户选择其他东西？

我对“setOnLongClickListener”做了一些研究，但我不确定我是否可以将它组合在同一个呼叫/拨号按钮中？我已经附加了我设法做的工作拨号功能，想知道“setOnLongClickListener”是否可以在代码中的某个地方组合在一起？

```
 private void dialANumber() {

    try {
        buttonCall = (ImageButton) findViewById(R.id.imageButton2);
        buttonCall.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                if (display != null) {
                    Intent callNumber = new Intent();
                    callNumber
                            .setAction(android.content.Intent.ACTION_CALL);
                    callNumber.setData(Uri.parse("tel:" + display.getText()));
                    startActivity(callNumber);
                }
            }
        });

    } catch (ActivityNotFoundException anfe) {
        Log.e("DialANumber", "Dialing the number failed", anfe);

    } 
```

此代码正在运行。我希望可以在同一个呼叫/拨号按钮上进行更长的单击，以便该按钮可以正常单击以拨打电话，并且单击更长的时间以弹出敬酒。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T15:28:02.960

请注意，在长单击侦听器上返回“false”将使 UI 也将长单击响应为短单击。如果你想杀死它，请返回“true”。“真”表示“是的，我使用了这个事件”，“假”表示“无论我是否使用，环境也可以自由响应”。（我知道这一点是因为我刚刚在自己的应用程序中使用了 AkashG 的答案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:12:31.897

是的，您可以这样做：

XML 文件：

```
 <Button 
        android:id="@+id/call"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="CALL"/>

    <ImageButton 
        android:id="@+id/callBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"/> 
```

对于按钮单击事件：

```
 Button button=(Button) findViewById(R.id.call);
        button.setOnLongClickListener(new OnLongClickListener() {

            public boolean onLongClick(View v) {
                Toast.makeText(getBaseContext(), "Long CLick", Toast.LENGTH_SHORT).show();
                return false;
            }
        });

        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

             if (display != null) {
                Intent callNumber = new Intent();
                callNumber
                        .setAction(android.content.Intent.ACTION_CALL);
                callNumber.setData(Uri.parse("tel:" + display.getText()));
                startActivity(callNumber);
            }
            }
        }); 
```

对于图像按钮：

```
 ImageButton imageButton=(ImageButton) findViewById(R.id.callBtn); 
```

imageButton.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {
            if(check==false){
        Toast.makeText(getBaseContext(), "CLick", Toast.LENGTH_SHORT).show();
            }
        imageButton.setOnLongClickListener(new OnLongClickListener() {

            public boolean onLongClick(View v) {
                check=true;
            if(check){
                Log.d("bool", check+"");
                Toast.makeText(getBaseContext(), "Long CLick", Toast.LENGTH_SHORT).show();
                check=false;
            }
                return false;
            }
        }); 
```

在顶部声明这个（全局）：

```
boolean check=false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:16:47.740

带有 SimpleOnGestureListener 的 GestureDetector 将帮助您区分不同类型的印刷机。GestureDectector 是一个类，它可以读取不同类型的触摸事件（例如，单击和长按），并将它们发送到以不同方式处理每种类型的侦听器。这是 Detector 和 Listener 的文档。

[http://developer.android.com/reference/android/view/GestureDetector.html](http://developer.android.com/reference/android/view/GestureDetector.html)

[http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)

首先，设置你的 SimpleOnGestureListener，你需要重写的重要方法是`onSingleTapUp`and `onLongPress`。在您的`onCreate`中，创建一个引用您的侦听器的 GestureDetector 实例。然后，将一个`OnTouchListener`按钮附加到将事件发送到检测器的按钮上。你会希望它看起来像这样：

```
//Set up the Detector
GestureDetector.SimpleOnGestureListener myGestureListener = new GestureDetector.SimpleOnGestureListener()
{
    @Override
    public boolean onSingleTapUp(MotionEvent e)
    {
        //Your onClick code
        return false;
    }

    @Override
    public void onLongPress(MotionEvent e)
    {
        //Your LongPress code
        super.onLongPress(e);  
    }
};

//And make a variable for your GestureDetector
GestureDetector myGestureDetector;

...

@Override
onCreate(Bundle b)
{
    ...
    myGestureDetector = new GestureDetector(myActivity.this, myGestureListener);
    ...
}

...

//And finally, wherever you are setting up your button
button.setOnTouchListener(new View.OnTouchListener(){
    @Override
    public boolean onTouch(View view, MotionEvent motionEvent)
    {
         myGestureDetector.onTouchEvent(motionEvent);
         return false;
    } 
```

如果您想变得更花哨，该类可以解释许多其他类型的事件。GestureDetector 是一个非常好的类，可以做一些研究，它非常有用并且不太复杂。希望这可以帮助。

# javascript - 优化：使用ajax加载内容

> ID：11374450
> 
> 赞同：1
> 
> 时间：2012-07-07T11:05:39.370
> 
> 标签：javascript, jquery, ajax, optimization

我想听听您关于使用 ajax 优化内容加载的想法。接下来，我将提出几种方法，我会提出我自己的想法。

*   直接加载 html -**这允许轻松加载内容而无需进一步计算。更适合不受用户操作影响的内容或部分需要定期更新的内容**
*   从服务器获取 json 对象 -**似乎是在 json 对象中包含页面内容的好方法。允许通过将当前值与新对象进行比较来仅修改某些部分**
*   按部分（块）加载 -**似乎是最难更新的方式。您必须知道哪个部分已更改以及在何处加载它（对应该更改/更新的节点的特定 dom 访问）。此外，从计算的角度来看，似乎比获取 json 对象并“手动”创建标签或拥有我们将数据加载到其中的模板更容易**

那么，您如何看待每种方法？随意提出一种新方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:17:39.607

好吧，我在企业软件领域工作（仅仅作为顾问，而不是开发人员；））并且我多次看到第三种方法被广泛使用，因为它在页面的动态性方面更加灵活。

除此之外，从仅更新某些部分的角度来看，前两种方法似乎并不引人注目：即使在第二种情况下（使用 JSON），您也必须比较两个页面片段，我认为这是一种幼稚的方法（并且不那么可维护，我担心）。

但是您的问题缺少一些重要信息，例如您用于生成页面的内容。这在第一种情况下不太重要，因为您只是生成一个字符串（其中包含页面源代码），但在第三种情况下，如果您的 AJAX 加载代码干扰您正在使用的 HTML 模板引擎，它可能会变得一团糟。

我希望这会有所帮助，如果需要，请在问题中添加更多信息！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:01:31.697

把内容分成3个部分。

1.  HTML，而不是 db 缓存和 ajax
2.  db 缓存，而不是 ajax（内容更改周期是周期性的）
3.  db 缓存和 ajax（高 db 操作时间）

如果页面很慢，请分析它并更改为2或3。在使用ajax内容加载之前，您必须分析您的页面访问速度和db负载。

对于数据库缓存，我传递函数和参数。

```
$c1 = db_cache("main_top_naver_cache", 300, "naver_popular('naver_popular', 4)");
db_cache - php function(my own)
main_top_naver_cahce : cache name
300 : cache duration
naver('naver_popular',4) : php function and arguments 
```

这段代码是我的ajax内容加载方法。很简单。

[关联](https://stackoverflow.com/questions/11272731/how-to-change-php-functions-send-result-to-jquery-ajax)

我考虑ajax加载方法很多年了，上个月我得到了非常简单的代码。试试我的 ajax 内容加载代码。

```
<div id='main_b'>
// codes for ajax content loading...
// enter this code at the end of program.
// your home page is boosted.
<?
function remove_nr($str) {
$reg_e = array('/\n/', '/\r/', '/\"/', "/<\/script>/i"); 
$reg_p = array(' ', ' ', '\\"', "<\/SCRIPT>"); 
return preg_replace($reg_e, $reg_p, $str);
}
?>
<script type="text/javascript">
$("#main_b").html( " <? echo remove_nr(db_cache("main_top_naver_cache", 300, "naver_popular('naver_popular', 4)"))?> " );
</script> 
```

和我的 db_cache 代码。你可以分析一下。

```
function db_cache($c_name, $seconds=300, $c_code) {

    global $g4;

    $result = sql_fetch(" select c_name, c_text, c_datetime from $g4[cache_table] where c_name = '$c_name' ");
    if (!$result) {
        // 시간을 offset 해서 입력 (-1을 해줘야 처음 call에 캐쉬를 만듭니다)
        $new_time = date("Y-m-d H:i:s", $g4['server_time'] - $seconds - 1);
        $result['c_datetime'] = $new_time;
        sql_query(" insert into $g4[cache_table] set c_name='$c_name', c_datetime='$new_time' ");
    }

    $sec_diff = $g4['server_time'] - strtotime($result['c_datetime']);
    if ($sec_diff > $seconds) {

        // $c_code () 안에 내용만 살림 
        $pattern = "/[()]/";
        $tmp_c_code = preg_split($pattern, $c_code);

        // 수행할 함수의 이름
        $func_name = $tmp_c_code[0];

        // 수행할 함수의 인자
        $tmp_array = explode(",", $tmp_c_code[1]);

        if ($func_name == "include_once" || $func_name == "include") {

            ob_start();
            include($tmp_array[0]);
            $c_text = ob_get_contents();
            ob_end_clean();

        } else {

        // 수행할 함수의 인자를 담아둘 변수
        $func_args = array();

        for($i=0;$i < count($tmp_array); $i++) {
            // 기본 trim은 여백 등을 없앤다. $charlist = " \t\n\r\0\x0B"
            $tmp_args = trim($tmp_array[$i]);
            // 추가 trim으로 인자를 넘길 때 쓰는 '를 없앤다
            $tmp_args = trim($tmp_args, "'");
            // 추가 trim으로 인자를 넘길 때 쓰는 "를 없앤다
            $func_args[$i] = trim($tmp_args, '"');
        }
        // 새로운 캐쉬값을 만들고
        $c_text = call_user_func_array($func_name, $func_args);
        }

        // db에 넣기전에 slashes들을 앞에 싹 붙여 주시고
        $c_text1 = addslashes($c_text);

        // 새로운 캐쉬값을 업데이트 하고
        sql_query(" update $g4[cache_table] set c_text = '$c_text1', c_datetime='$g4[time_ymdhis]' where c_name = '$c_name' ");

        // 새로운 캐쉬값을 return (slashes가 없는거를 return 해야합니다)
        return $c_text;

    } else {

        // 캐쉬한 데이터를 그대로 return
        return $result['c_text'];

    }
} 
```

我在使用 5 年历史的 Web 服务器上运行 db 密集型网站 450,000 页/天，以使用 is 代码和许多其他 mysql 技巧提高速度。我的网络服务器有 1 个 CPU/4Core、RAM 12G、2 个 SATA HDD/Raid 1。

# python - Heroku：更改 requirements.txt 后出现“目录存在”错误

> ID：11374451
> 
> 赞同：2
> 
> 时间：2012-07-07T11:05:47.690
> 
> 标签：python, django, heroku

对于我使用的其中一个库，我正在尝试从`mercurial`存储库切换到`git`. 不幸的是，当我尝试使用新`requirements.txt`文件推送项目时，我得到了这个：

```
Obtaining django-storages from git+https://github.com/richleland/django-storages/#egg=django_storages (from -r requirements.txt (line 2))
  Directory /tmp/build_3lujzy9ddaetm/.heroku/src/django-storages already exists, and is not a git clone.
  The plan is to install the git repository https://github.com/richleland/django-storages/
What to do?  (i)gnore, (w)ipe, (b)ackup Exception:
Traceback (most recent call last):
...
EOFError: EOF when reading a line 
```

强制它以`push -f`相同的消息结束。我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:04:39.180

Heroku 团队通过推送一个新的 Python buildpack 来修复它，并使用`wipe`这种冲突的默认值。

# jquery - 仅在存在 div 类时单击并显示

> ID：11374452
> 
> 赞同：0
> 
> 时间：2012-07-07T11:05:51.667
> 
> 标签：jquery, jquery-selectors

我的老问题：[一页淡入淡出过渡逻辑](https://stackoverflow.com/questions/11373619/one-page-fadein-fadeout-transition-logic)

代码工作得很好，但我有一个问题。在我的导航系统中有带有子菜单的菜单，也就是下拉菜单。因此，如果单击没有内容但没有子菜单的菜单链接，则内容页面加载为空白，直到我单击实际具有内容类的内容。

这是一个简单的 jsFiddle 示例：http: [//jsfiddle.net/QuKhN/1/](http://jsfiddle.net/QuKhN/1/)

我希望它加载内容，只有当有与菜单链接 ID 对应的内容时。因此，如果在此示例中单击“联系我们”，我不希望它尝试加载名为“联系我们内容”的不存在的 div。

这可能吗？我用 hasClass() 函数尝试了几件事，但我没有成功。

感谢您花时间阅读和理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:09:35.987

您可以选择要显示的元素并使用长度属性来确保存在这样的元素。长度将大于零。

像这样的东西：

```
$("ul li a ").click(function(){
    var cls = $(this).attr('id');
    // Fade out the previous content no matter what
    $(".content").fadeOut(500);
    // Check if there is content to display using length
    if ($('.' + cls).length > 0) {
       // Will only display content if it exist
       $('.' + cls).delay(500).fadeIn(1000);
    }
    return false;
})​;​ 
```

这是一个工作示例：http: [//jsfiddle.net/QuKhN/2/](http://jsfiddle.net/QuKhN/2/)

**笔记：**

这取决于您不会在其他一些元素上使用这些类，但脚本的其余部分也是如此，所以我想在这种情况下会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:10:24.567

尝试`hasClass`：

```
$("ul li a ").click(function(){
    var cls = $(this).attr('id')
    $(".content").fadeOut(500);
    if($("div").hasClass(cls)){
       $('.' + cls).delay(500).fadeIn(1000);
    }
    return false;
})​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T11:12:15.190

你可以试试这个：

```
$("ul li a ").click(function() {
    var cls = $(this).attr('id')
    if ($('div.content.' + cls).length > 0) {  
        $(".content").fadeOut(500);
        $('.' + cls).delay(500).fadeIn(1000);
    }
    return false;
}) 
```

[演示](http://jsfiddle.net/QuKhN/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T11:13:25.197

```
$("ul li a").filter(function(){
    return $('.'+this.id).length>0;
}).click(function(){
    var cls = $(this).attr('id')

    $(".content").fadeOut(500);
    $('.' + cls).delay(500).fadeIn(1000);
    return false;
})​ 
```

[演示](http://jsfiddle.net/UYSqm/)

# tomcat - 在 Apache Tomcat 中生成 BIRT 报告时出错

> ID：11374455
> 
> 赞同：0
> 
> 时间：2012-07-07T11:06:18.683
> 
> 标签：tomcat, birt

我是 Eclipse 和 BIRT 的新手。

生成报告时出现此错误：

> 表（id = 4）：
> + 无法加载报表查询：4。为 ID 为 4 的报表元素生成报表文档时出错。（元素 ID：4）

我有谷歌，但我没有得到适当的解决方案。

这是我找到的一个解决方案

> 为 TOMCAT 安装数据驱动程序
> 
> 转到您的下载并打开 JTDS 数据驱动程序并查找`jtds-1.2.3.jar`文件。这是我们之前复制到 Eclipse 文件夹中的同一个文件。将其复制到
> 
> **`C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\Birt-Viewer\WEBINF\ platform\plugins\org.eclipse.birt.report.data.oda.jdbc_2.5.0.v20090605\drivers`**
> 
> 如果该`org.eclipse.birt.report.data.oda.jdbc_2.5.0.v20090605\drivers`文件夹不存在，只需创建它。

* * *

> 在 TOMCAT 下安装您的报告
> 
> 现在去获取你之前创建的报告，`AddressReport.rptdesign`从你保存它的地方，例如`C:\BIRT\ AddressReport.rptdesign`并将它复制到 Tomcat Web 服务器的 `C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\Birt-Viewer`文件夹中。

但是，我的计算机上没有文件夹`platform\plugins\org.eclipse.birt.report.data.oda.jdbc_2.5.0.v20090605\drivers`（如上面粗体部分所示）。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:48:06.387

我知道它已经过时了，但是如果其他人对此感到困惑。你需要把它放在de“lib”文件夹中，而不是“平台/插件”。旧版本使用“平台/插件”，新版本使用“lib”。

# silverlight - 如何创建图片？

> ID：11374468
> 
> 赞同：-1
> 
> 时间：2012-07-07T11:07:30.557
> 
> 标签：silverlight, windows-phone-7

嗨，我有一个关于 Windows Phone 7 应用程序的问题。

我想在应用程序中创建图片或区域，例如，我可以添加字体或其他元素，如圆圈。

谁能给我看一个例子或一些代码？还是不可能？我想要一个 silverlight 应用程序，而不是 XNA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:35:36.400

您可以使用[.NET Image Tools for Silverlight](http://imagetools.codeplex.com/)进行高级图像创建/操作。

# c# - SQL 结构存储、国家、地区和其他重要标准

> ID：11374469
> 
> 赞同：0
> 
> 时间：2012-07-07T11:07:32.140
> 
> 标签：c#, sql, sql-server, sql-server-2008, database-design

如果这有点宽泛，我很抱歉，但我已经研究了几天的结构，我似乎无法找出最干净和最有效的方法来做到这一点。我可以分享我现在创建的表格，但我真的认为它并不接近正确的图表应该是什么样的。

让我稍微描述一下我的问题：我有商店、国家、地区、类别。每个商店可以属于不同的国家/地区，从而实现商店分店操作。当然，一家商店也可以属于多个类别，例如，商店 X 可以同时属于 Food and Beverages 和 Night Clubs。一个国家将有多个地区和商店，一个商店可以有许多国家和地区。

我正在使用 C# 编写我的应用程序，并且创建数据层对象和类没有问题。但是我需要正确的 MSSQL 结构来根据给定的标准操作和过滤数据。

最重要的标准是：第一步是通过国家/地区，然后在该国家/地区内定位商店作为全球视图，然后根据该国家/地区内的地区和/或类别对商店进行排序很重要。

如果您需要我分享我现在拥有的东西，请告诉我，但是由于我在 Stack Overflow 上问这个问题，您可以猜到我做错了。

无论如何，如果您能对这个问题有所了解并解释应该如何正确完成事情，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T11:44:16.200

每当您有多对多关系时（例如，一个地区可能包含许多商店；一个商店可能包含许多地区），您将需要在这些实体之间使用交叉引用表。

我假设一个特定的地区可能只被一个国家所包含。以下是我将如何模拟您的方案：

```
countries(country_id [PK], name, ...)
districts(district_id [PK], country_id [FK], name, ...)
districts_has_stores(district_id [PK], store_id [PK])

stores(store_id [PK], name, ...)

categories_has_stores(category_id [PK], store_id [PK])
categories(category_id [PK], name, ...) 
```

在急诊室：

![ER图](../Images/701f0aa7eb02850c1a0e05a3213ce0be.png)

`districts_has_stores`并且`categories_has_stores`是表示实体之间多对多关系的交叉引用表。

基于此模型，您可以**检索特定国家/地区内的所有商店，并**使用以下 SQL 按地区名称对商店进行排序：

```
SELECT
    c.*
FROM 
    districts a
INNER JOIN 
    districts_has_stores b ON a.district_id = b.district_id
INNER JOIN
    stores c ON b.store_id = c.store_id
WHERE
    a.country_id = <country_id here>
ORDER BY
    a.name 
```

**检索每个国家/地区的商店数量：**

```
SELECT
    a.country_id, 
    COUNT(*) AS store_count
FROM
    districts a
INNER JOIN
    districts_has_stores b ON a.district_id = b.district_id
GROUP BY
    a.country_id 
```

编辑：根据您对此答案的评论，这是一个示例，说明如何**检索具有 category_id 的所有商店`1`**：

```
SELECT
    b.*
FROM
    categories_has_stores a
INNER JOIN
    stores b ON a.store_id = b.store_id
WHERE
    a.category_id = 1 
```

**检索特定 category_id( `1`) 中的所有商店并过滤结果以仅包括位于 Districts`4`或`5`**中的那些商店。

```
SELECT DISTINCT
    b.*
FROM
    categories_has_stores a
INNER JOIN
    stores b ON a.store_id = b.store_id
INNER JOIN
    districts_has_stores c ON b.store_id = c.store_id
WHERE
    a.store_id = 1 AND
    c.district_id IN (4,5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:50:33.393

![在此处输入图像描述](../Images/44f82c1d0d3489c7bc46345694aff391.png)

这很容易，你有 StoryCategory 来解决“许多商店可以有许多类别”的问题。District 和 Country 表允许您存储商店的位置。

我建议您查看以下文档以扩展您的数据库设计知识：

[多对多](http://en.tekstenuitleg.net/articles/software/database-design-tutorial/many-to-many.html)

[10 篇有用的文章](http://woork.blogspot.be/2008/09/10-useful-articles-about-database.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:22:33.693

您将有一个带有标识列的国家/地区表。每个商店都可以“成为”类别，您必须有~~一个关联表，它是~~商店表的子表，该表将具有商店 ID 和类别表中的 ID。每个商店都属于一个国家/地区，因此您的商店表将存储 Country 表中的国家/地区 ID。与 Category 类似，您的 District 表将有一个子表，其中存储 District 和 Country 的 ID（因为每个地区可以有多个国家/地区）

**存储表**

*   ID INT IDENTITY PK
*   类别 FK
*   FK 国家（它实际居住的地方，1 比 1）
*   FK区

**类别表**

*   ID INT IDENTITY PK

**StoreCategory 表**

*   StoreID FK
*   类别 ID FK

**国家表**

*   ID INT IDENTITY PK

**区表**

*   ID INT IDENTITY PK

**区国家表**

*   区号 FK
*   国家 ID FK

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T11:29:09.150

我认为下面应该适合你。

```
Countries
=========
CountryId, CountryName

Districts
=========
DistrictId, CountryId, DistrictName

Stores
=========
StoreId, DistrictId, Storename

Categories
=========
CategoryId, Categoryname

StoreCategories
=========
Storecategoryid, StoreId, CategoryId 
```

# php - 识别动态页面（由 PHP 从数据库创建）

> ID：11374473
> 
> 赞同：0
> 
> 时间：2012-07-07T11:08:22.413
> 
> 标签：php, content-management-system, codeigniter-2

*如果之前有人问过这个问题，请让我参考答案，我会很高兴..这是一个非常常见的问题，但是我无法从谷歌中找到解决方案*

我正在使用 codeigniter 用 PHP 开发一个网站。我有文章/帖子。这些帖子位于数据库中，当用户需要查看文章时，其所有相关数据都使用唯一的“Content_id”从数据库中提取，并动态地向用户呈现页面。但是，一旦将数据分派到视图并从该页面创建了一个 html 页面，我就无法找到生成该页面时使用了哪个“Content_id”。现在，如果用户在该页面上发表评论，我不知道将哪个“content_id”与该评论一起保存在评论表中，以便下次显示这篇文章时，也可以显示所有相关评论。

**我认为的一些解决方案如下**

1.  我可以使用 session 来存储这些数据吗？（但是我没有为那些未登录的用户使用会话......所以我可以为所有用户使用会话）

2.  在页面上使用带有隐藏字段的表单是否是一个可行的选择...... Wordpress 或其他 CMS 如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:03:46.613

为了实现您的目标，您的表格需要四列：

1.  唯一行号
2.  内容
3.  邮政编号
4.  发布日期（时间戳）

5.  唯一的行号是主键。自动递增它。

6.  内容是发布的消息。

7.  帖子编号是开始对话的帖子的行号。使其与对话的第一篇文章中的行号相同。它是被响应的帖子的行号。对对话的所有回复都将具有相同的帖子编号。

8.  发布日期是一个时间戳。它允许您在特定对话中组织帖子的顺序。

每个对话或 sub_conversation 都遵循此例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:09:10.313

我很遗憾地知道除了一个人之外没有人回答我的问题

这里的任何方法都是我在 1 句话中找到的解决方案**

> 页面不需要编号但内容需要编号......因此每个内容（文章，帖子等）都有一个内容ID，并且需要考虑该ID。

**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:25:25.993

通常，post id 无论如何都会作为 GET 变量传递。如果没有，隐藏输入就可以了。

# php - JS数组转PHP

> ID：11374475
> 
> 赞同：1
> 
> 时间：2012-07-07T11:08:25.960
> 
> 标签：php, arrays

接下来我有一个包含 Javascript 数组的字符串：

```
$array = "var Array = [
             { 'a' : 'val1', 'b': 1},
             { 'a' : 'val2', 'b': 2}
];"; 
```

如何将此字符串转换为下一个结构中的 PHP 数组：

```
$array[0] => array('a' => 'val1', 'b' => 1)
$array[1] => array('a' => 'val2', 'b' => 2) 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T11:14:01.180

这将**有助于**：

例子 ：

```
<?php
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

var_dump(json_decode($json));
var_dump(json_decode($json, true));

?> 
```

上面的示例将输出：

```
object(stdClass)#1 (5) {
    ["a"] => int(1)
    ["b"] => int(2)
    ["c"] => int(3)
    ["d"] => int(4)
    ["e"] => int(5)
}

array(5) {
    ["a"] => int(1)
    ["b"] => int(2)
    ["c"] => int(3)
    ["d"] => int(4)
    ["e"] => int(5)
} 
```

从[这里](http://php.net/manual/en/function.json-decode.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T11:28:15.730

您绝对应该考虑使用 json 在 php 和 js 之间进行代码通信。但是，我不知道你想用这个代码做什么，所以这就是你想要的（作为一般规则，你不想使用它）：

```
<?php

$str = 'var Array = [
             {"a": "val1", "b": 1},
             {"a": "val2", "b": 2}
];';

$matches = array();
preg_match("/^(var\s+)*([A-Za-z0-9_\.]+)\s*=\s*([^;]+);$/", $str, $matches);

print "<pre>";
var_dump($matches);
print "</pre>";

$array = json_decode($matches[3], true);

print "<pre>";
var_dump($array);
print "</pre>";
?> 
```

另请注意，我必须用双引号替换单引号才能工作，我不知道为什么必须这样做。

如果你说你为什么需要这个，你可能会得到更多的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:36:35.977

您应该为此使用 JSON。

请仔细查看我所做的差异，JSON 语法比 javascript 对象初始化器语法严格得多。

```
$array = '[
             { "a" : "val1", "b": 1},
             { "a" : "val2", "b": 2}
]';

$array = json_decode($array, true );

print_r($array);

/*
Array
(
    [0] => Array
        (
            [a] => val1
            [b] => 1
        )

    [1] => Array
        (
            [a] => val2
            [b] => 2
        )

)

*/ 
```

# java - Android：javac 与 Dalvik

> ID：11374477
> 
> 赞同：28
> 
> 时间：2012-07-07T11:09:06.063
> 
> 标签：java, android, javac, dalvik

我的理解是，Google 不喜欢 Oracle 在 Java ME 中使用 JRE 的许可政策，所以它只是使用自己的 JVM 规范重写了它，该规范*模仿*了 JRE，但行为略有不同，尤其是在提高效率和更安全。

所以，如果我的理解是正确的，这意味着当`javac`在一些 Java 源代码上运行并编译成“二进制”字节码时，兼容的 JVM 会解释不同于 Dalvik 的字节码（在某些情况下）。这是 Dalvik 与其他（兼容的）JVM 之间的内在差异。

如果到目前为止我所说的任何内容都不正确，请先纠正我！

现在，如果 Android 带有自己的编译器（它可能），并以不同的（Dalvik 兼容）方式编译 Java 源代码`javac`，那么我可以理解某些代码（未使用 Android SDK 编译）如何无法在安卓设备：

```
MySource.java --> javac --> MySource.class (JRE-compliant) --> JVM --> running Java app
MySource.java --> android-compiler --> MySource.class (Dalvik-compliant) --> Dalvik JVM --> running Android app 
```

但是，看起来你`javac`是用来编译 Android 应用程序的！？！？所以看起来我们有这个：

```
MySource.java --> javac --> MySource.class (JRE-compliant) --> JVM --> running Java app
MySource.java --> javac --> MySource.class (JRE-compliant) --> Dalvik JVM --> running Android app (???) 
```

如果`javac`是用来将所有源码编译成字节码，那为什么Dalvik不能运行某些类型的Java代码呢？

昨天我问了一个非常相似的问题，虽然它在技术上得到了回答（在重新阅读我的问题后，我发现我根本不够具体）没有人能够解释 Dalvik 固有的导致无法运行 Java 代码的原因来自 Google Guice 或 Apache Camel 等项目。有人告诉我，为了让 Camel 在 Dalvik 上运行，我必须获得 Camel 的源代码，然后它必须“使用 Android SDK 构建”，但我无法弄清楚这意味着什么或暗示什么.

以 Camel 为例，你有这个（简化的）：

```
RouteBuilder.java --> javac --> RouteBuilder.class --> jartool --> camel-context-2.9.jar --> JVM --> running Camel ESB
RouteBuilder.java --> javac --> RouteBuilder.class --> jartool --> camel-context-2.9.jar --> Dalvik JVM --> doesn't work !!! (???) 
```

显然，Dalvik JVM 内部发生了一些事情，阻止了它运行某些类型的 Java 代码。 **我试图了解哪些类型的 Java 代码在“输入”到 Dalvik JVM 时不会运行。**

**编辑：**在之前“*但 Camel 3.0 将在 Android 上运行！* ”我知道——不是我的问题！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-07T11:27:29.153

```
I'm trying to understand what types of Java code will not run when "fed" into the Dalvik JVM. 
```

**Dalvik JVM 在以下方面与其他 JVM 不同：**

*   它使用特殊的 DEX 格式存储应用程序二进制文件，而不是标准 Java 虚拟机使用的 JAR 和 Pack200 格式。谷歌声称 DEX 生成的二进制文件比 JAR 更小。我认为他们可以使用 Pack200 取得同样的成功，但他们决定在这方面走自己的路

*   Dalvik JVM 针对同时运行多个 JVM 进程进行了优化

*   Dalvik JVM 使用基于寄存器的体系结构与其他 JVM 的基于堆栈的体系结构，目的是加快执行速度并减少二进制文件大小

*   它使用自己的指令集（不是标准的 JVM 字节码）

*   可以在单个 JVM 进程中运行（如果需要）多个独立的 Android 应用程序

*   应用程序执行可以“自然地”跨越多个 Dalvik JVM 进程。为了支持这一点，它添加了：

    *   基于 Parcel 和 Parcelable 类的特殊对象序列化机制。从功能上讲，它与标准 Java Serializable 具有相同的目的，但会导致更小的数据占用空间，并且可能对类版本的差异更加宽容

    *   基于 Android 接口定义语言 (AIDL) 执行进程间调用 (IPC) 的特殊 Android 方式

*   在 Android 2.2 之前，Dalvik JVM 不支持 JIT 编译，这会对 Android 应用程序性能产生不利影响。在 2.2 中添加它显着提高了常用应用程序的执行速度

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-07T11:28:14.637

> 如果到目前为止我所说的任何内容都不正确，请先纠正我！

嗯，嗯……

*   对于移动环境，Dalvik VM 比 Java VM 具有技术优势，最显着的是积极使用写时复制内存共享，因此整个 VM 和标准类库在所有 Android SDK 应用程序进程之间共享，从而减少了每个进程的网络内存占用。有关更多信息，请参阅 user370305 的答案（在我总结时发布）。

*   作为 Android 应用程序构建过程的一部分，来自的字节码`javac`被交叉编译成 Dalvik 字节码。Java VM 不能执行 Dalvik 字节码，就像它不能执行 ; 的输出一样`/dev/random`。同样，Dalvik VM 无法执行 Java 字节码。

[这是我](http://commonsware.com/blog/Articles/what-is-dalvik.html)大约两年前的一篇博客文章，其中涉及其他要点。

> 如果使用 javac 将所有源代码编译成字节码，那为什么 Dalvik 不能运行某些类型的 Java 代码呢？

因为`javac`字节码输出是交叉编译的。交叉`dx`编译`javac`器`javac`（ （例如，GCJ），并且至少不能与 Java 7 中的任何新字节码一起使用。

> 没有人能够解释 Dalvik 的固有特性是什么使得无法运行来自 Google Guice 或 Apache Camel 等项目的 Java 代码

就个人而言，我从未使用过 Google Guice，尽管[Roboguice](http://code.google.com/p/roboguice/)可以在 Android 上运行。在您提出问题之前，我从未听说过 Apache Camel，并且很困惑地发现它不是 Perl 的 Java 端口。:-)

任何执行运行时 JVM 字节码生成的工具都不能在 Android 上运行，因为交叉编译器仅在编译时可用，而不是在运行时可用。此外，我不熟悉运行时 JVM 字节码生成工具使用的技术以及它们如何让 JVM 执行该字节码，因此我不知道 Android 中是否存在等效的钩子让 Dalvik 运行任意块 Dalvik 字节码。

但是，由于您拒绝确切说明您遇到问题的“来自 Google Guice 或 Apache Camel 等项目的 Java 代码”，并且由于我对这些项目并不十分熟悉，因此很难进一步评论。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-01-13T04:33:07.040

这张来自Android官方文档的图片说明了Android APK的构建过程，有助于理解java字节码和dalvik可执行文件的区别。 ![在此处输入图像描述](../Images/55aea519530ad2f8c9b79e155c20e1c8.png)

在这里，我举一个例子来说明一些差异。

你好.java

```
import java.io.*;
public class Hello {
    public static void main(String[] args) {
        System.out.println("hello world!!!!");
    }
} 
```

用于`javac`编译`Hello.java`成java字节码`Hello.class`

```
$ javac Hello.java 
```

然后使用`dx`android sdk 中的工具将 java 字节码转换`Hello.class`为`Hello.dex`

```
$ $ANDROID_SDK_ROOT/build-tools/21.1.2/dx --dex --output=Hello.dex Hello.class 
```

之后，用于`adb`放置Android 设备或模拟器。`Hello.class``Hello.dex`

```
$ adb push Hello.class /data/local/tmp/
$ adb push Hello.dex /data/local/tmp/ 
```

用于`adb shell`进入安卓设备的shell环境。然后使用命令`/system/bin/dalvikvm`执行我们刚刚创建的简单java`Hello.class`程序`Hello.dex`

```
$ dalvikvm -Djava.class.path=./Hello.class Hello
java.lang.NoClassDefFoundError: Hello
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: Didn't find class "Hello" on path: ./Hello.class
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    ... 1 mor
$ dalvikvm -Djava.class.path=./Hello.dex Hello   
hello world!!!! 
```

在上面的例子中，当我们使用 java 字节码时`Hello.class`，`dalvikvm`报错，如果我们将类更改为 dalvik 可执行文件`Hello.dex`，它会正常运行。

# java - android复制文件显示错误

> ID：11374481
> 
> 赞同：1
> 
> 时间：2012-07-07T11:09:22.927
> 
> 标签：java, android, file

它显示 07-07 16:34:48.270: W/System.err(6050): copy java.io.IOException 我已经获得了许可

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

文件复制代码：

```
 File file = new File("/mnt/sdcard/infobooks/");

            if (file.exists() == false) {
                file.mkdirs();
            }

            InputStream myInput = this.getAssets().open("Book4.pdf");
            String outFileName = Environment.getExternalStorageDirectory()+"/infobooks/Book4.pdf";
            File file2=new File(outFileName);
            file2.createNewFile();

            FileOutputStream myOutput = new FileOutputStream(outFileName);

            // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }

            // Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:08:22.317

从它的声音来看，您的错误与写入外部存储无关，而是与资产读取有关。资产目录中是否存在文件“Book4.pdf”？它有多大？你运行的是什么版本的安卓？曾经有一段时间，Android 在使用压缩时对资产中的文件大小有限制。在 Android 2.3 之前，AssetManager 无法读取大的压缩文件（大意味着在未压缩状态下超过 1MB）。解决这个问题的方法是不压缩文件（通过给它一个 aapt 跳过压缩的扩展名，例如 jpg 或 png），转到命令行构建，或者将文件拆分成更小的块，然后在设备上重新组合它们。

但是，如果没有完整的堆栈跟踪，我们无法真正知道错误的原因是什么。

# c# - C# Mail：为什么这个功能不能发送电子邮件？

> ID：11374484
> 
> 赞同：0
> 
> 时间：2012-07-07T11:10:17.047
> 
> 标签：c#, asp.net, sql-server-2008-r2

在基于 Web 的 ASP.NET 建议框程序中，管理员将能够使用所有者的用户名查看 GridView 控件中列出的所有建议。在 GridView 的最后一列中，将在此处列出状态。当管理员单击其中一个建议的状态时，将出现一个新的弹出窗口 (asp.net ajax ModalPopUpExtender)，其中列出所有可能的状态，例如：已执行、已批准...等。当管理员选择其中一种状态，建议的状态将在数据库中更新。一切正常。我现在要做的是，当用户更新任何建议的状态时，将向所有者发送一封电子邮件通知，告知其建议状态的更新。

我已经编写了 Mail 函数，但我不知道为什么它不发送任何电子邮件，并且在调试代码时出现此错误：

***使用未分配的局部变量“描述”***

我已经将它分配给数据库中 [Description] 列的值，但我不知道为什么会出现此错误。

**谁能帮我解决这个问题？**

我真的很难获得更新建议的用户名。仅供参考，我有以下数据库设计：

```
Employee Table: Username, Name... 
SafetySuggestionsLog: ID, Title, Description, Username, StatusID 
SafetySuggestionsStatus: ID, Status 
```

**ASP.NET 代码：**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                        AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="ID" 
                        width="900px" CssClass="mGrid" 
                        DataSourceID="SqlDataSource1" 
                        OnRowDataBound="GridView1_RowDataBound">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" CssClass="alt" />
            <HeaderStyle Font-Bold = "True" ForeColor="Black" Height="20px"/> 
            <Columns>
                <asp:BoundField DataField="ID" HeaderText="No." InsertVisible="False" 
                    ReadOnly="True" SortExpression="ID" />
                <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                <asp:BoundField DataField="Description" HeaderText="Description" 
                    SortExpression="Description" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Username" HeaderText="Username" 
                    SortExpression="Username" />
                <asp:BoundField DataField="DivisionShortcut" HeaderText="Division" 
                    SortExpression="DivisionShortcut" />
                <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type" />

                <%-- This to make status be opened and edited through the Ajax ModalPopUp Window --%>
                <asp:TemplateField HeaderText="Status">
                    <ItemTemplate>
                        <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                        OnClick="lnkSuggestionStatus_Click">
                        </asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <%--<asp:HyperLinkField HeaderText="Status" 
                    SortExpression="Status" />--%>
            </Columns>
            <RowStyle HorizontalAlign="Center" />
        </asp:GridView>

        <asp:Button runat="server" ID="btnModalPopUp" style="display:none" />

        <AjaxToolkit:ModalPopUpExtender ID="modalPopUpExtender1"
                                        runat="server" 
                                        TargetControlID="btnModalPopUp" 
                                        PopupControlID="pnlPopUp" 
                                        BackgroundCssClass="popUpStyle"
                                        PopupDragHandleControlID="panelDragHandle" 
                                        OkControlID="OKButton">
        </AjaxToolkit:ModalPopUpExtender>

        <asp:HiddenField ID="HiddenField1" runat="server"/>

        <asp:Panel runat="server" ID="pnlPopUp" CssClass="popUpStyle">

                    <asp:RadioButtonList ID="StatusList" runat="server" RepeatColumns="1" RepeatDirection="Vertical"
                                            RepeatLayout="Table" TextAlign="Right" DataSourceID="SuggestionStatusDataSource"
                                            DataTextField="Status" DataValueField="ID">
                        <asp:ListItem id="option1" runat="server" Value="ACTIONED" />
                        <asp:ListItem id="option2" runat="server" Value="APPROVED" />
                        <asp:ListItem id="option3" runat="server" Value="PENDING" />
                        <asp:ListItem id="option4" runat="server" Value="TRANSFERRED" />
                    </asp:RadioButtonList>
                    <asp:SqlDataSource ID="SuggestionStatusDataSource" runat="server"
                                        ConnectionString="<%$ ConnectionStrings:testConnectionString %>"
                                        SelectCommand="SELECT * FROM [SafetySuggestionsStatus]"></asp:SqlDataSource>

                    <asp:Button ID="confirmButton" runat="server" Text="Confirm" 
                                OnClientClick="javascript:return confirm('Are you sure you want to send an email notification about the safety suggestion to the owner?')" 
                                OnClick="btnSendStatus_Click" />

            <asp:Button ID="OKButton" runat="server" Text="Close" />
        </asp:Panel>
        </ContentTemplate>
        </asp:UpdatePanel> 
```

**代码隐藏：**

```
protected void lnkSuggestionStatus_Click(object sender, EventArgs e)
    {
        LinkButton lnkSuggestionStatus = sender as LinkButton;

        //var safetySuggestionsId = 

        //get reference to the row selected 
        GridViewRow gvrow = (GridViewRow)lnkSuggestionStatus.NamingContainer;

        //set the selected index to the selected row so that the selected row will be highlighted
        GridView1.SelectedIndex = gvrow.RowIndex;

        //This HiddenField used to store the value of the ID
        HiddenField1.Value = GridView1.DataKeys[gvrow.RowIndex].Value.ToString();
        //ViewState["Username"] = gvrow.Cells[4].Text;

        //show the modalPopUp
        modalPopUpExtender1.Show();
    }

    public void btnSendStatus_Click(object sender, EventArgs e) {
        //get the ID of the selected suggestion/row
        var statusID = StatusList.SelectedValue;
        var safetySuggestionsID = HiddenField1.Value;

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //For updating the status of the safety suggestion
        string updateCommand = "UPDATE SafetySuggestionsLog SET StatusID= @statusID where ID=@SafetySuggestionsID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))
            {
                cmd.Parameters.AddWithValue("@statusID", Convert.ToInt32(statusID));
                cmd.Parameters.AddWithValue("@SafetySuggestionsID", Convert.ToInt32(HiddenField1.Value));
                cmd.ExecuteNonQuery();
            }
            //reset the value of hiddenfield
            HiddenField1.Value = "-1";
        }

        GridView1.DataBind();

        SendSuggestionStatusToUser(safetySuggestionsID);
    }

    protected void SendStatusByEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml)
    {
        SmtpClient sc = new SmtpClient("MAIL.Aramco.com");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("pssp@aramco.com", "PMOD Safety Services Portal (PSSP)");

            // In case the mail system doesn't like no to recipients. This could be removed
            //msg.To.Add("pssp@aramco.com");

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = MessageBody;
            msg.IsBodyHtml = isBodyHtml;
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    }

    protected void SendSuggestionStatusToUser(string suggestionID)
    {
        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";

        string safetySuggestionID = suggestionID.ToString();
        //string username = ViewState["Username"].ToString();

        //The following connection is to get the username of the suggestion Owner
        //and append (@aramco.com) to it.
        using (SqlConnection conn = new SqlConnection(connString))
        {
            var sbEmailAddresses = new System.Text.StringBuilder(2000);

            //initiate the varibles that will be retreived from the database
            string username;
            string description;
            string status;

            // Open DB connection.
            conn.Open();

            string cmdText2 = @"SELECT Username, Description, Status FROM dbo.SafetySuggestionsLog SSL INNER JOIN SafetySuggestionsStatus SSS
                                ON (SSL.StatusID = SSS.ID) WHERE (SSL.ID = @safetySuggestionID)";
            using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
            {
                cmd.Parameters.AddWithValue("@SafetySuggestionID", Convert.ToInt32(HiddenField1.Value));
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    if (reader.Read())
                    {
                        username = reader["Username"].ToString();
                        description = reader["Description"].ToString();
                        status = reader["Status"].ToString();
                        sbEmailAddresses.Append(username).Append("aramco.com");
                    }
                }

                var sEMailAddresses = sbEmailAddresses.ToString();
                string body = @"Good day, &lt;br /&gt;&lt;br /&gt;
                                <b> We just would like to notify you that your following safety suggestion: </b>"
                                    + description +
                                    @"&lt;br /&gt;&lt;br /&gt;
                            has been.
                            &lt;br /&gt; &lt;br /&gt;&lt;br /&gt; &lt;br /&gt;
                            This email was generated using the &lt;a href='http://pmv/pssp/Default.aspx'&gt;PMOD Safety Services Portal (PSSP) &lt;/a&gt;. 
                            Please do not reply to this email.
                            ";
                SendStatusByEmail(sbEmailAddresses.ToString(), "", "Notification of Your Safety Suggestion", body, true);
                sbEmailAddresses.Clear();
                reader.Close();

            }

            conn.Close();
        }
    } 
```

***注意：我知道我不应该在这里发布冗长的代码，而是因为我想向您解释我的工作并获得您的帮助。***

**更新：**

我修改了关于将变量分配给 NULL 的代码，当我调试代码时，我发现阅读器不起作用并且它没有读取以下内容：

```
if (reader != null)
                {
                    if (reader.Read())
                    {
                        username = reader["Username"].ToString();
                        description = reader["Description"].ToString();
                        status = reader["Status"].ToString();
                        sbEmailAddresses.Append(username).Append("@aramco.com");
                    }
                } 
```

**更新 2：**

在该`SendSuggestionStatusToUser(string suggestionID)`方法中，我在以下行中添加了断点：

```
string safetySuggestionID = suggestionID.ToString(); 
```

我在以下行中添加了断点：

```
cmd.Parameters.AddWithValue("@safetySuggestionID", Convert.ToInt32(HiddenField1.Value)); 
```

我发现对于第一个，safetySuggestionID 从传递的值中获取数据。但是，对于第二个，值为`(HiddenField1.Value)`-1，我不知道为什么。此外，我为以下每一行添加了断点：

```
SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    if (reader.Read())
                    {
                        username = reader["Username"].ToString();
                        description = reader["Description"].ToString();
                        status = reader["Status"].ToString();
                        sbEmailAddresses.Append(username).Append("@aramco.com");
                    }
                } 
```

并且调试器在调试它们时没有经过它们。它直接转到

```
var sEMailAddresses = sbEmailAddresses.ToString(); 
```

我不知道为什么。任何的想法？请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:16:53.167

问题是变量`username`,`description`和`status`in`SendSuggestionStatusToUser`函数在您使用它们时并未**明确分配。**

也就是说，如果`reader == null`它们**没有**价值。

由于您*稍后*用于构造值，因此它可能`description`是*（*并且从未分配给）。这就是错误的含义。`body`*`null`*

 *一个简单的更改是明确地将它们分配给`null`空字符串或空字符串：

```
string username = null;
string description = null;
string status = string.Empty; 
```

* * *

更新：

我现在注意到您是如何构建您的电子邮件地址的：

```
sbEmailAddresses.Append(username).Append("aramco.com"); 
```

除非以`username`结尾，`@`否则**不会**生成有效的电子邮件地址。电子邮件地址之间也没有分隔符，所以我不知道这将如何工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:15:04.490

如果您的阅读器为空或不返回任何记录，您的用户名、描述、状态和 sbEmailAddress 将为空值。*

# php - 使用 google 帐户注册/登录 localhost 应用程序

> ID：11374487
> 
> 赞同：1
> 
> 时间：2012-07-07T11:11:30.620
> 
> 标签：php, ssl

我想在我的本地主机 Web 应用程序上使用“使用 google 帐户注册/登录”。我为此使用了 google 提供的 api，但它不起作用。

它给了我错误

> HTTP 错误：(0) 无法连接到主机

本地主机是否需要安全证书 (SSL) 才能使用 api？

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:18:06.980

我猜那是做不到的。您将需要一个域名或一些 DNS 条目，用于您尝试在其上集成 Google 登录的网站。

# ios - 出口连接和动作连接有什么区别？

> ID：11374488
> 
> 赞同：29
> 
> 时间：2012-07-07T11:11:33.003
> 
> 标签：ios, xcode

当我尝试在 xib 和文件所有者之间创建连接时，有几种类型可供选择：

*   出口连接
*   动作连接
*   出口收集连接

所有这些之间有什么区别？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-07-06T11:14:26.083

Outlet 和 Action 是 ViewController 与其 View 交互的方式（或连接/中介）。尽管它们在 iOS 相识的最初几天看起来很相似，但它们的用途不同：

**出口**：`ViewController talks to View by using Outlet`。View 中的任何对象（UILabel、UIButton、UIImage、UIView 等）都可以与 ViewController 建立 Outlet 连接。Outlet`@property`在 ViewController 中使用，这意味着：
- 您可以使用 outlet 设置对象的某些内容（如更新 UILabel 的文本、设置 UIView 的背景图像等）。
- 你可以从一个对象中得到一些东西（比如 UIStepper 的当前值、NSAttributedString 的当前字体大小等）

**Action**：（`View pass on messages about view to ViewController by using Action`或者用技术术语来说，ViewController 将自己设置为View`Target`中的 any `Action`）。Action 是`Method`ViewController 中的一个（与 ViewController 中的 Outlet 不同`@property`）。每当`Event`某个对象发生某些事情（任何）时（例如轻按 UIbutton），Action 就会将消息传递给 ViewController。Action（或Action方法）在收到消息后可以做一些事情。
注意：动作只能由 UIControl 的子对象设置；意味着你不能为 UILabel、UIView 等设置 Action。

**在哪里\何时使用 Outlet 或 Action：**
在刚接触 iOS 的最初几天，对 Action 和 Outlet 及其用法感到困惑是完全正常的。Outlet 和 Action 都可以完成一些小事情（比如获取按钮的文本/标题），但除此之外它们非常不同。使用其中一种或另一种时，请记住以上几点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-18T13:46:36.710

**当您想要更改控件的某些属性（即文本颜色或标签的文本大小）时，使用**Outlet 。****

 **当您想要检测触发器时使用**操作**，即按下按钮时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T11:27:39.710

插座为您的类（通常是视图控制器）提供对 xib 中子视图的引用。当用户激活时，该操作提供了一个由控件（通常也是 xib 上的子视图）调用的方法。

换句话说，出口让 obj-c 代码访问 IB 中的对象；而该操作使 xib 控制访问 obj-c 代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-25T22:58:36.460

[出口和行动可视化](https://i.stack.imgur.com/Nkc1I.png)

**Outlet 和 Action 连接**是 UIViewController 可以与其 UView 通信的直接方式。例如，当 View Controller 需要设置 UILabel 的文本时，它会通过 outlet 连接来完成。当点击 View 的 UIButton 对象时，它会使用操作连接将消息传递给 View Controller。这意味着在 View Controller 中创建的 outlet 被声明为 @property，并且通过声明方法来创建操作。

当您需要从代码向 Xcode 故事板中的用户界面对象发送消息时，将创建一个**出口连接。**对象可以是控件，例如按钮、滑块和开关，也可以是故事板中定义的任何其他对象，例如标签和进度条。例如，当您的代码确定标签应该显示一些文本时，代码会通过插座发送一条消息，告诉标签显示新文本。

当您需要从情节提要中的控件向您的代码发送消息时，将创建一个**操作连接。**控件是一种用户界面对象，当用户操作该对象时会产生动作或可见结果。例如，当用户点击一个按钮时，该按钮会向您的代码发送一条操作消息，告诉它执行适当的方法。可用于创建操作连接的其他控件示例是文本字段、滑块和开关。

参考资料： 1\. [https://medium.com/@GanChau/outlet-vs-action-connections-in-xcode-b5331fb233a1](https://medium.com/@GanChau/outlet-vs-action-connections-in-xcode-b5331fb233a1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T11:19:54.490

出口连接：是连接一个属性或实例变量，形成当前文件所有者实例到 xib，当这个 xib 将被反序列化时，将连接到文件所有者对象

出口动作：正在将目标/动作添加到从xib到所有者类的指定出口（视图）

插座集合：类似于插座，但它将一组视图连接到单个插座变量**

# oracle - 从 Oracle SQL 函数获取多个数组

> ID：11374489
> 
> 赞同：0
> 
> 时间：2012-07-07T11:11:40.040
> 
> 标签：oracle, function, plsql, oracle11g

这个问题可能听起来有点荒谬，但是是否可以从存储的函数中获取多个数组？例如：

```
CREATE OR REPLACE TYPE STRINGLISTT1 as table of varchar2(4000);
CREATE OR REPLACE TYPE STRINGLISTT2 as table of varchar2(4000);

create or replace function in_list(p_string in varchar2,p_delimiter in varchar2) 
      -- Returning two different arrays
      return StringListT, StringListT22 is 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T21:02:22.807

不，它不可能。

首先，不需要创建两个实际上相同的类型。这两种类型都是 varchar2(4000) 的表。所以创建一种类型并从中定义两个变量就足够了。

要处理返回多个类型/对象的函数，您可以创建一个容器对象，填充该对象并返回它。

所以创建类型：

```
CREATE OR REPLACE TYPE STRING_LIST as table of varchar2(4000); 
```

然后创建一个具有两个成员的对象类型，每个成员都是上述类型的列表

```
create or replace type TWO_STRING_LISTS as object
 (first_list STRING_LIST,
  second_list STRING_LIST 
 ); 
```

现在在您的函数中，您准备列表，创建一个对象并将列表放入其中，然后返回它：

```
create or replace function in_list(p_string in varchar2,p_delimiter in varchar2) 
      return TWO_STRING_LISTS is

 list1 STRING_LIST;
 list2 STRING_LIST;

begin

   //fill the lists

   return TWO_STRING_LISTS(list1,list2);
end; 
```

当您从 in_list 函数取回对象时，您可以访问列表。

```
declare
  TWO_STRING_LISTS lists;
begin

  //some code 
  ........ 

  lists := in_list(........);

//reference first list
   lists.first_list    .....

end; 
```

# objective-c - xcode 仪器在返回 char 指针时显示内存泄漏

> ID：11374494
> 
> 赞同：2
> 
> 时间：2012-07-07T11:12:04.540
> 
> 标签：objective-c, memory-leaks, char, xcode-instruments

我有一个返回字符串集合的函数。所有内存分配都在该函数内部完成，因为每次调用该函数时字符串的大小都会发生变化。使用这些字符串后，所有分配都被释放。但是，当我在带有泄漏测试仪器的模拟器上运行我的应用程序时，它会显示我实际`malloc`编辑 s.s 的位置`char*`。

我的困惑是，尽管我正确地释放了所有字符串，但它仍然被视为我的应用程序的泄漏吗？或者这是 xcode 仪器的错误观察？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:28:03.037

好吧，您使用的工具可能是正确的，或者它可能会给您带来误报。没有办法告诉您帖子中提供的信息...

一般来说，我倾向于假设调试工具给出的警告是有效的，直到我能证明不是这样。因此，在您的情况下，我将查看代码以找出调试工具标记它的原因，而不是仅仅将其视为无法解释的误报；当我处理我没有经验的东西时更是如此。

# php - 如何根据表标志过滤 CGridView 中的数据

> ID：11374498
> 
> 赞同：0
> 
> 时间：2012-07-07T11:12:49.373
> 
> 标签：php, yii

我是 yii 的新手，无法根据我的 DB 表的活动标志字段过滤 zii.widgets.grid.CGridView 中的数据。我只想显示活动标志为 0 的数据。

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'member-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
    'id',
    'f_name',
    'l_name',
    'dob',
    'gender',
    'location',
    'email',
    'active',
    array(
        'class'=>'CButtonColumn',
    ),
), 
```

));

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:46:33.017

在模型的 search() 方法中，您需要自定义[CDbCriteria](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)。

您需要添加：

```
$criteria->compare('active', 1); 
```

如果你想更高级，你可以创建一个[命名范围](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)并在 search() 方法中定义 ActiveDataProvider 时使用它，如下所示：

```
new CActiveDataProvider(Member::model()->active(),.....); 
```

范围是：

```
public function active()
{
    return array(
            'condition'=>$this->getTableAlias(false, false).'.active =1',
    );
} 
```

# c++ - LNK2001 尝试使用 Visual Studio C++CLI 项目中的 v8

> ID：11374507
> 
> 赞同：2
> 
> 时间：2012-07-07T11:14:26.483
> 
> 标签：c++, visual-studio-2010, c++-cli, v8

在构建一个尝试嵌入 v8 的简单 hello-world 风格项目时，我得到一个

> 错误 LNK2001: ""public: static class v8::Local __cdecl v8::String::New(char const *,int)" (?New@Str​​ing@v8@@SA?AV?$Local@VString@v8@@ @2@PEBDH@Z)"

我的项目设置有问题，我似乎无法弄清楚。这是我的源文件：

```
#include "stdafx.h"
#include "v8.h"

using namespace System;

#pragma unmanaged

void test()
{
    v8::Local<v8::String> source = v8::String::New("'Hello' + ', World'");
}

#pragma managed

int main(array<System::String ^> ^args)
{
    return 0;
} 
```

编译好像没问题，我添加了node 0.8.0项目的v8目录（node-v0.8.0\deps\v8\include）。在链接方面，我将这些库添加为附加依赖项。

```
node-v0.8.0\Release\lib\v8_base.lib
node-v0.8.0\Release\lib\v8_snapshot.lib 
```

我在 Windows 7 上，64 位。我的项目设置为构建 x64，node.js 也是如此（使用“Windows x64 安装程序”安装）。怎么了？

**更新**我认为在为 x64 构建时，我添加的附加依赖项被完全忽略（无论我添加与否，错误消息都是相同的）。但是在为 win32 构建时，我收到不同的错误消息。（顺便说一句：这是否意味着 lib 文件适用于 x86 而不是 x64 - 正如我所假设的那样 - 为什么链接器不告诉我？**更新**：dumpbin 告诉我，lib 文件确实适用于 x86）。

除了 v8_base 和 v8_snapshot 之外，链接器错误导致我添加

```
winmm.lib
ws2_32.lib 
```

这消除了所有“未解决的外部符号”错误。但现在我得到一个 LNK2005“已定义”错误：

```
エラー 1   error LNK2005: __matherr は既に LIBCMT.lib(_matherr_.obj) で定義されています。   c:\...\HelloC++CLIWorld\HelloC++CLIWorld\MSVCRTD.lib(merr.obj)  HelloC++CLIWorld 
```

我试过`/NODEFAULTLIB:LIBCMT`了，然后我得到一个 LNK2001“未解析的外部符号”：

```
エラー 1   error LNK2001: 外部シンボル "__HUGE" は未解決です。  c:\...\HelloC++CLIWorld\HelloC++CLIWorld\v8_base.lib(heap.obj)  HelloC++CLIWorld 
```

我也尝试了`/NODEFAULTLIB:MSVCRTD'，但后来我又得到了大量的 LNK2001。一个小小的选择：

```
エラー 1   error LNK2001: 外部シンボル "___native_dllmain_reason" は未解決です。    c:\...\HelloC++CLIWorld\HelloC++CLIWorld\MSVCMRTD.lib(mstartup.obj) HelloC++CLIWorld
エラー 2   error LNK2001: 外部シンボル "___native_vcclrit_reason" は未解決です。    c:\...\HelloC++CLIWorld\HelloC++CLIWorld\MSVCMRTD.lib(mstartup.obj) HelloC++CLIWorld
エラー 3   error LNK2001: 外部シンボル "___native_startup_state" は未解決です。 c:\...\HelloC++CLIWorld\HelloC++CLIWorld\MSVCMRTD.lib(mstartup.obj) HelloC++CLIWorld
エラー 4   error LNK2001: 外部シンボル "___native_startup_lock" は未解決です。  c:\...\HelloC++CLIWorld\HelloC++CLIWorld\MSVCMRTD.lib(mstartup.obj) HelloC++CLIWorld
エラー 5   error LNK2001: 外部シンボル ""extern "C" int __cdecl __wgetmainargs(int *,wchar_t * * *,wchar_t * * *,int,struct _startupinfo *)" (?__wgetmainargs@@$$J0YAHPAHPAPAPA_W1HPAU_startupinfo@@@Z)" は未解決です。 c:\...\HelloC++CLIWorld\HelloC++CLIWorld\MSVCMRTD.lib(ManagedMain.obj)  HelloC++CLIWorld 
```

怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:40:41.100

我想出了两件事：

*   Visual Studio 不会抱怨您作为附加依赖项添加到链接器设置的 lib 文件中的错误体系结构，而只是忽略该文件（我认为我正在以默认警告级别运行）
*   使用`dumpbin mylib.lib /headers|more`显示我认为是为 x64 构建的库实际上是为 x86 构建的

*正如我在问题的更新*部分中所写的那样，由于错误，我无法使 x86 构建工作，`LNK2005`但是当我针对 x64 v8 lib（或者更确切地说，包含 v8 的 node.lib）构建 x64 时，链接工作正常。

坏消息：在管理了编译步骤之后，现在是链接步骤，我得到了一个运行时异常，即使我按照我应该做的那样做

```
HandleScope handle_scope; 
```

before new'ing the `v8::String`. But that's for another question. For now, linking is solved, at least on x64\. Oh happy day!

# android - 当我在一个扩展 MapActivity 的类中使用 AsyncTask 单击按钮时如何显示进度对话框

> ID：11374508
> 
> 赞同：3
> 
> 时间：2012-07-07T11:14:26.990
> 
> 标签：android, inheritance, android-asynctask

我有一个程序可以搜索一些元素并在 GoogleMap 上显示这些元素。我想在所有在地图上设置各种地理点的程序结束之前显示一个进度对话框。

搜索我发现此代码在方法结束之前显示进度对话框。

```
 ProgressDialog dialog; 
private class Test extends AsyncTask<Void, Void, Void> { 

    @Override 
    protected void onPreExecute() { 
        dialog = new ProgressDialog(Main.this); 
        dialog.setMessage("Loading...."); 
        dialog.setIndeterminate(true); 
        dialog.setCancelable(true); 
        dialog.show(); 
    } 

    @Override 
    protected Void doInBackground(Void... voids) { 
        try { 
            runOnUiThread(new Runnable() { 
                public void run() { 

                } 
            }); 
            //your code 

    } 

    @Override 
    protected void onPostExecute(Void params) { 
        dialog.dismiss(); 
        //result 

    } 
} 
```

我必须添加异步任务的类是这样的：

```
public class FindItOnMap extends MapActivity{
static String[] foundResults;

@Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.ricerca_condominio);
         mapView = (MapView)findViewById(R.id.mapView);

         mapController = mapView.getController();

         mapView.setClickable(true);

         mapView.setBuiltInZoomControls(true);

         mapController.setZoom(12);

         myLocationOverlay = new MyLocationOverlay(this, mapView);
         List<Overlay> overlays = mapView.getOverlays();
         overlays.add(myLocationOverlay);
         myLocationOverlay.enableMyLocation();
                 ...........

         ((ImageButton) findViewById(R.id.btSearch)).setOnClickListener(mSearchListenerListener);

}

        OnClickListener mSearchListener = new OnClickListener() {
            public void onClick(View v) {
                    String Location=editorLocation.getText().toString();
                    String name=editorName.getText().toString();
                //static method that updates the lists foundResult
                search(name, location);
                //static method that use the static array foundResult to update the map
                updateMapWithResult();

            }
     }; 
```

当我点击一个按钮时，在返回解决方案之前需要时间的方法被调用

```
search(name, location);

updateMapWithResult(); 
```

问题是我的类扩展了 MapActivity，我不能使用多重继承来扩展另一个类。我该怎么做才能解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:01:33.143

所以算法不应该是棘手的。

因此，将您的 Class 实现为`AsyncTask` *Activity* Main *Class的**内部*类。然后我建议您在执行之前调用方法：*`show()``Task`*

 *```
progressDialog.show();
Test test = new Test();
test.execute(); 
```

**注意：**你不应该在方法中调用`show()`方法`onPreExecute``AsyncTask`

然后在你的方法*中*`onPostExecute`只需调用`dismiss()`解雇 *`ProgressDialog`*

 *```
@Override 
protected void onPostExecute(Void params) { 
   progressDialog.dismiss(); 
} 
```

现在它应该可以工作了。

* * *

这

```
@Override 
    protected Void doInBackground(Void... voids) { 
        try { 
            runOnUiThread(new Runnable() { 
                public void run() { 

                } 
            }); 
            //your code 

    } 
```

永远不要再这样做了！`doInBackground`方法是为**后台线程上的长任务***设计*的方法，在这种方法中你不应该，你不能，你不能更新你的！**`UI`**

 **为了更新您的`UI` `AsyncTask`报价方法，`onProgressUpdate`并且`onPostExecute`您应该尊重它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:24:33.093

如果您不想使用多重继承，您可以将您定义`AsyncTask`为内部类并使用`AsycTask`您定义的实例化对象来完成您的工作。像这样的东西：

```
public class FindItOnMap extends MapActivity {

static String[] foundResults;
private ProgressDialog dialog;

 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.ricerca_condominio);
     mapView = (MapView)findViewById(R.id.mapView);

     mapController = mapView.getController();

     mapView.setClickable(true);

     mapView.setBuiltInZoomControls(true);

     mapController.setZoom(12);

     myLocationOverlay = new MyLocationOverlay(this, mapView);
     List<Overlay> overlays = mapView.getOverlays();
     overlays.add(myLocationOverlay);
     myLocationOverlay.enableMyLocation();
             ...........

     ((ImageButton) findViewById(R.id.btSearch)).setOnClickListener(mSearchListenerListener);

     }

    OnClickListener mSearchListener = new OnClickListener() {
        public void onClick(View v) {
                String Location=editorLocation.getText().toString();
                String name=editorName.getText().toString();
             //Call the AsyncTask here
            new YourCustomAsyncTask().execute(new String[] {name, location});

        }

    private class YourCustomAsyncTask extends AsyncTask <String, Void, Void> { 

        @Override 
        protected void onPreExecute() { 
           dialog = new ProgressDialog(Main.this); 
           dialog.setMessage("Loading...."); 
           dialog.setIndeterminate(true); 
           dialog.setCancelable(true); 
           dialog.show(); //Maybe you should call it in ruinOnUIThread in doInBackGround as suggested from a previous answer
        } 

        @Override 
        protected Void doInBackground(String... strings) { 
           try { 

              search(strings[0], string[1]);

              runOnUiThread(new Runnable() { 
                 public void run() { 
                    updateMapWithResult(); //Or call it onPostExecute before progressDialog's dismiss. I believe this method updates the UI so it should run on UI thread
                 } 
               }); 

           } catch(Exception e) {
           }

        }

    @Override 
    protected void onPostExecute(Void params) { 
        dialog.dismiss(); 
        //result 

    } 

.....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:37:22.403

```
 public class FindItOnMap extends MapActivity{
static String[] foundResults;
 String Location;
 String name;
@Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.ricerca_condominio);
         mapView = (MapView)findViewById(R.id.mapView);
         mapController = mapView.getController();
         mapView.setClickable(true);
         mapView.setBuiltInZoomControls(true);
         mapController.setZoom(12);
         myLocationOverlay = new MyLocationOverlay(this, mapView);
         List<Overlay> overlays = mapView.getOverlays();
         overlays.add(myLocationOverlay);
         myLocationOverlay.enableMyLocation();
                 ...........

        ((ImageButton)findViewById(R.id.btSearch))  
                      .setOnClickListener(mSearchListenerListener);

        OnClickListener mSearchListener = new OnClickListener() {
            public void onClick(View v) 
         {
              Location=editorLocation.getText().toString();
              name=editorName.getText().toString();

    /*===You Just Go On to Call search(name,location) in the doInBackground part  
 and updateMapWithResult(); in the postExecute() part so that   
only after gettting the result from the search method,the updateMapWithResult();   
will be called in the Async Task like this...==*/

              new Test().execute();

        }
     };
}

    private class Test extends AsyncTask<Void, Void, Void> { 
    @Override 
    protected void onPreExecute() 
    { 
       dialog=ProgressDialog.show(YourClassContext,"Loading","",false);

    } 

    @Override 
    protected Void doInBackground(Void... voids)
    { 
    try 
    { 

      search(name, location);

    } 
    }); 

    } 

    @Override 
    protected void onPostExecute(Void params) 
    { 
       updateMapWithResult();
       dialog.dismiss(); 
    //result 

    } 
    } 
```****

# java - 在特定时间启动我的 Phonegap 应用程序（闹钟）

> ID：11374514
> 
> 赞同：6
> 
> 时间：2012-07-07T11:15:21.727
> 
> 标签：java, android, alarmmanager, phonegap-plugins

好的，所以我试图让我的 Phonegap 应用程序在特定时间启动，与闹钟功能相同。为此，我尝试编写自己的插件：

```
package de.ma;
import org.apache.cordova.api.PluginResult; 
import org.json.JSONArray;
import android.content.Intent;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.util.Log;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.os.Bundle;
import java.util.Calendar;
import android.os.SystemClock;
import com.phonegap.api.Plugin;

public class alarm extends Plugin {
@Override
public PluginResult execute(String arg0, JSONArray arg1, String arg2) {
    Calendar cal = Calendar.getInstance();
    // add 5 minutes to the calendar object
    cal.add(Calendar.SECOND, 5);
    Intent intent = new Intent(ctx, AlarmReciever.class);
    intent.putExtra("alarm_message", "O'Doyle Rules!");
    // In reality, you would want to have a static variable for the request code instead of 192837
    PendingIntent sender = PendingIntent.getBroadcast(this, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    // Get the AlarmManager service
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);

     return null;
}

} 
```

但是编译时出现3个错误：

1.  `AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);`原因：

    > ALARM_SERVICE 无法解析为变量 alarm.java

2.  `Intent intent = new Intent(ctx, AlarmReciever.class);`原因：

    > 构造函数 Intent(CordovaInterface, Class) 未定义 alarm.java

3.  `PendingIntent sender = PendingIntent.getBroadcast(this, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);`原因：

    > PendingIntent 类型中的方法 getBroadcast(Context, int, Intent, int) 不适用于参数 (alarm, int, Intent, int) alarm.java`

我的接收器 Java-File 被称为`AlarmReciever.java`.

如果有人看到我做错了什么，那么我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T07:42:26.417

就像@shaish 说的，首先要创建一个Context 引用，这样你就可以做Android 操作了：。

```
Context context = cordova.getActivity().getApplicationContext(); 
```

使用上下文创建 Intent，创建 PendingIntent 并获取系统服务。

```
Intent intent = new Intent(context, AlarmReciever.class);
...
PendingIntent sender = PendingIntent.getBroadcast(context, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);
...
AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE); 
```

另一个问题是 AlarmReceiver 类。它应该扩展广播接收器：

```
public class AlarmReceiver extends BroadcastReceiver {

    private static final String LOG_TAG = AlarmReceiver.class.getSimpleName();

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(LOG_TAG, "onReceive()");
    }
} 
```

你需要把它放到AndroidManifest.xml中：

```
 <application>
        ...
        <receiver android:name="de.ma.AlarmReceiver"/>
    </application> 
```

替代广播接收器，如果 AlarmReceiver 是一个活动，你可以只使用：

```
PendingIntent sender = PendingIntent.getActivity(context, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

直接启动您的活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T23:36:40.403

您用于警报服务的代码是为了在上下文中使用。你应该得到上下文（可能使用类似的东西：Context ctx = cordova.getActivity().getApplicationContext()。）

然后在 1 中，使用 ctx.getSystemService，在 3 中，不要传递 this，而是传递 ctx，而不是 ALARM_SERVICE，而是编写 Context.ALARM_SERVICE。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-20T09:21:31.917

您可以使用后台服务来执行此操作，该服务将在特定时间启动应用程序。

# java - java SQL异常分析

> ID：11374516
> 
> 赞同：0
> 
> 时间：2012-07-07T11:15:44.923
> 
> 标签：java, sql, jdbc, prepared-statement, sqlexception

```
 Connection con;
       PreparedStatement ps,p2;

       try
       {
           sqlquery = "...";
           ps=con.prepareStatement(sqlquery);
           ps.executeUpdate();

          // using ps2...some similar process.......
       }
       catch(SQLException sqlex)
       {
              System.out.print(sqlex.getMessage());
       } 
```

我有一个疑问，是否是

`Is it possible to find out the cause of the specific error made out by a query or update such that i can handle the situation other than just displaying the error message at output console (as here) displaying the cause ?`

例如：如果**pspreparedStatement由于重复输入或ps由于一些外键问题等而出错。那么我应该能够具体分析sql错误****`using SQLException object`*****这样我就可以相应地处理，而不仅仅是在输出控制台中显示错误消息*****

 ***我需要这个的原因是因为我想显示用户在通过 GUI 场景工作时所犯的错误（以防万一：这里是 java swing）他通过分析 SQLException 实例以交互方式所做的任何错误条目......

`In short , how to classify errors using a single SQLException instance`

**对不起，如果这个问题变得模棱两可或愚蠢..!!!**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:21:28.060

如果我理解正确，您需要方法`getSQLState`和`getErrorCode`类`SQLException`。

[在这里](http://docs.oracle.com/javase/tutorial/jdbc/basics/sqlexception.html)查看更多信息。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T11:45:22.243

当抛出 an 时，您可以使用实例 `SQLException`中的相关方法捕获错误状态、错误代码和特定消息。`SQLException`

1.  [`getErrorCode()`](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLException.html#getErrorCode%28%29),
2.  [`getSQLState()`](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLException.html#getSQLState%28%29),
3.  和任何例外的共同点`getMessage()`。

MySQL 在
[附录 C 中记录了各种常见错误和问题。错误、错误代码和常见问题](http://dev.mysql.com/doc/refman/5.6/en/error-handling.html)，您需要在`java`代码中使用并相应地处理它们。

正如*Vincenzo Maggio*[在他的回答中](https://stackoverflow.com/a/11374550/767881)提到的那样，您可以根据错误状态和代码[处理 SQL 异常。](http://docs.oracle.com/javase/tutorial/jdbc/basics/sqlexception.html)

请注意，这些错误状态，代码在不同的数据库实现中可能不一样。
可在[此处](http://www.dba-oracle.com/t_error_code_list.htm)找到各种 Oracle 错误代码（以 ORA 为前缀） 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T11:22:35.763

我认为解决此问题的最简单方法是使用 getErrorCode() 并基于一些预定义的代码映射到您预先定义的用户可读消息（在文件中或硬编码）获取错误代码（例如：1045） ) 以返回易于理解的消息。

一个通用的解决方案是解析 getMessage() 返回的消息，但我不认为 DBMS 抛出的异常有明确定义的语法，因此这样的解决方案不可行/可实施。***

# blackberry - 如何在 Blackberry Webworks 中使用 BBM？

> ID：11374518
> 
> 赞同：1
> 
> 时间：2012-07-07T11:15:59.463
> 
> 标签：blackberry, blackberry-webworks, bb-messenger

我正在开发一个需要在其中使用 BlackBerry Messenger (BBM) 的应用程序。由于我是 BlackBerry 开发的新手，所以我不知道该怎么做。

实际上，我浏览了很多网站，我才知道我需要安装**BBM SDK**。当我使用**BlackBerry Webworks**开发我的应用程序时，我想知道如何将**BBM**集成到**BB Webworks**中，另一件事是根据 BlackBerry 网站中的注释：**“BlackBerry Messenger 平台不支持 64 位 Java 或 Java 7."**

由于我使用的是**Windows 7（32 位版本）**，我认为安装在我桌面上的 Java 是 64 位的。那么，以下**BBM**在我的系统中是否有效，否则我需要使用 86 位的 Java。

由于我是这个开发的新手，任何小的帮助都将不胜感激。

# php - 单点登录 10 个不同的网站

> ID：11374519
> 
> 赞同：0
> 
> 时间：2012-07-07T11:16:09.853
> 
> 标签：php

我有 10 个具有不同 PHP 相关平台的网站，例如 Drupal、Joomla、Wordpress 和 Core PHP 等（甚至还包括子域）。

我想在 Core PHP 或任何框架中创建一个具有注册和登录功能的新网站。我想通过这个最新的网站实现单点登录功能。所以任何人都可以让我知道完成这个的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:15:00.773

如果您正在寻找与您的项目集成的预构建单点登录系统，您可能需要查看：

[http://barebonescms.com/documentation/sso/](http://barebonescms.com/documentation/sso/)

SSO 客户端可以作为插件集成到 Drupal、Joomla、WordPress 等。基本上，使用 SSO 服务器/客户端系统覆盖他们的登录系统。目前为它寻找插件有点困难，因为它是相对较新的软件。

# magento - 使用过滤器和/或复杂过滤器的 Magento 1.7 肥皂请求

> ID：11374525
> 
> 赞同：0
> 
> 时间：2012-07-07T11:17:34.863
> 
> 标签：magento, soap

我正在尝试使用过滤器和复杂过滤器通过使用肥皂从 magento 获取订单列表。以下 xml 片段显示了尚未设置参数的标准请求的结构。

Magento 1.7 Soap 客户端使用 Apache CXF 数据库中有项目...

* * *

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:Magento">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:salesOrderListRequestParam>
         <sessionId>?</sessionId>
         <filters>
            <!--Optional:-->
            <filter>
               <!--Zero or more repetitions:-->
               <complexObjectArray>
                  <key>?</key>
                  <value>?</value>
               </complexObjectArray>
            </filter>
            <!--Optional:-->
            <complex_filter>
               <!--Zero or more repetitions:-->
               <complexObjectArray>
                  <key>?</key>
                  <value>
                     <key>?</key>
                     <value>?</value>
                  </value>
               </complexObjectArray>
            </complex_filter>
         </filters>
      </urn:salesOrderListRequestParam>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

我尝试使用此请求和一个过滤器调用 api，如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:Magento">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:salesOrderListRequestParam>
         <sessionId>02ec011a4deef70a55104d8b229e0d41</sessionId>
         <filters>
            <!--Optional:-->
            <filter>
               <!--Zero or more repetitions:-->
               <complexObjectArray>
                  <key>customer_lastname</key>
                  <value>cook</value>
               </complexObjectArray>
            </filter>
            <!--Optional:-->
            <complex_filter>
               <!--Zero or more repetitions:-->
            </complex_filter>
         </filters>
      </urn:salesOrderListRequestParam>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

响应包含我希望的数据，来自库克先生的订单列表。到目前为止，一切都很好。

现在，在享受了如此巨大的成功（;-)）之后，我试图更上一层楼。在这种情况下，我尝试发送更多标准来聚合所需数据并从数据库中获取它。

因此，我尝试查找在某个日期之前创建的所有订单。以下 xml 显示了这种类型的请求：

* * *

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <ns2:salesOrderListRequestParam
            xmlns:ns2="urn:Magento">
            <sessionId>2b15208c5153189ed7477750c177716c</sessionId>
            <filters>
                <complex_filter>
                    <complexObjectArray>
                        <key>created_at</key>
                        <value>
                            <key>from</key>
                            <value>2012-07-06 12:55:51</value>
                        </value>
                    </complexObjectArray>
                </complex_filter>
            </filters>
        </ns2:salesOrderListRequestParam>
    </soap:Body>
</soap:Envelope> 
```

* * *

事实上，这个请求会在数据库中创建一个错误。这是magento创建的语句：

```
SELECT `main_table`.*, `billing_o_a`.`firstname`, `billing_o_a`.`lastname`, `billing_o_a`.`telephone`, `billing_o_a`.`postcode`, `shipping_o_a`.`firstname`, `shipping_o_a`.`lastname`, `shipping_o_a`.`telephone`, `shipping_o_a`.`postcode`, `billing_o_a`.`firstname` AS `billing_firstname`, `billing_o_a`.`lastname` AS `billing_lastname`, `shipping_o_a`.`firstname` AS `shipping_firstname`, `shipping_o_a`.`lastname` AS `shipping_lastname`, CONCAT(billing_o_a.firstname, ' ', billing_o_a.lastname) AS `billing_name`, CONCAT(shipping_o_a.firstname, " ", shipping_o_a.lastname) AS `shipping_name` FROM `mage_sales_flat_order` AS `main_table`
LEFT JOIN `mage_sales_flat_order_address` AS `billing_o_a` ON (main_table.entity_id = billing_o_a.parent_id AND billing_o_a.address_type = 'billing')
LEFT JOIN `mage_sales_flat_order_address` AS `shipping_o_a` ON (main_table.entity_id = shipping_o_a.parent_id AND shipping_o_a.address_type = 'shipping') WHERE (((from = ''))) 
```

显然这没有任何意义..没有“来自”列，发送日期隐藏在哪里以及为什么

...在哪里（（（来自=''）））

```
<complexObjectArray>
   <key>created_at</key>
   <value>
     <key>from</key>
     <value>2012-07-06 12:55:51</value>
   </value>
<complexObjectArray> 
```

异常 'Zend_Db_Statement_Exception' 并带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 /home/.../public_dev/lib/Zend/Db/Statement/Pdo 的第 3 行的“from = '')))' 附近使用正确的语法。 php:234

好吧，这里出了点严重的问题……

这是magento页面的示例片段：

```
<item xsi:type="ns1:complexFilter">
    <key xsi:type="xsd:string">protect_code</key>
    <value xsi:type="ns1:associativeEntity">
        <key xsi:type="xsd:string">in</key>
        <value xsi:type="xsd:string">a4ffa8</value>
    </value>
</item> 
```

也许有人有解决这个问题的线索！？

提前致谢...

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T18:07:45.650

而不是使用“from”或“to” - 您是否尝试过使用“gteq”和“lteq”？使用 PHP 进行测试时，它可以工作；但是您不能提供上限和下限，例如，

```
<complexObjectArray>
  <item>
   <key>created_at</key>
   <value>
     <key>gteq</key>
     <value>2012-07-06 12:55:51</value>
   </value>
  </item>
  <item>
   <key>created_at</key>
   <value>
     <key>lteq</key>
     <value>2013-07-06 12:55:51</value>
   </value>
  </item>
<complexObjectArray> 
```

# php - 如何在 php 中解析 JSON 谷歌地图 JSON

> ID：11374529
> 
> 赞同：0
> 
> 时间：2012-07-07T11:18:33.503
> 
> 标签：php, xml, json, parsing, google-maps

如何在 php 中解析 JSON 谷歌地图 JSON

我已经在 xml 中完成了，但坐标驱动方向并不像我使用 JSON 获得的那样完整，我们如何在 php 中使用 JSON 获得所有坐标驱动？

如果我们使用 xml

```
$xml = simplexml_load_file('http://maps.googleapis.com/maps/api/directions/xml?origin='.$origin.'&destination='.$dest.'&sensor=false');
$startlat = $xml->xpath("/DirectionsResponse/route/leg/step/start_location/lat");
$startlng = $xml->xpath("/DirectionsResponse/route/leg/step/start_location/lng");
$distanceeach = $xml->xpath("/DirectionsResponse/route/leg/step/distance/value");
$distance = $xml->xpath("/DirectionsResponse/route/leg/distance/value"); 
```

但是如何处理json？如果我们使用 xml，我希望我的变量 $startlat、$startlng 等包含相同的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:28:55.087

您可以检索JSON格式的数据，然后使用`json_decode()`函数构建`stdClass`对象，然后您可以递归遍历对象的属性将其转换`(array) $response`为this。

然后使用 Google Maps API 响应作为数组。您可以继续不转换为数组，并使用`stdClass`如下对象：

```
$response->DirectionsResponse->route->leg->step->start_location->lat; 
```

要获得正确的值，您始终`var_dump()`可以响应对象，并查看您想要获得的内容。

希望，这有帮助。

* * *

这是来自 Google Translate API 的使用 Google JSON 响应的代码......这与您需要的基本相同：

```
if (!is_null($json = json_decode(file_get_contents($url)))
{
    return $json->data->translations[0]->translatedText;
} 
```

就是这样...

# php - 使用 preg_replace 删除不需要的链接

> ID：11374532
> 
> 赞同：0
> 
> 时间：2012-07-07T11:19:14.057
> 
> 标签：php, parsing, preg-replace

我正在尝试删除这样的内容：

```
<a href="http://women.domain.com">women.domain.com</a> 
```

我认为应该是：

```
$this->tresc[$i][description]=preg_replace("/\<a(.*)href=(\"|')http:\/\/women\.domain\.com.*(\"|')(.*)\/\>/i", "",$this->tresc[$i][description]); 
```

但它不起作用。

对于图像，我使用它并且它工作得很好：

```
$this->tresc[$i][description]=preg_replace("/\<img(.*)src=(\"|')http:\/\/women\.domain\.com.*(\"|')(.*)\/\>/i", "",$this->tresc[$i][description]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:00:17.073

```
$pattern = '(\<a href=["|\']+[http(s)?:\/\/]+([a-z0-9\-]+[.]){1,}+[a-z]{2,4}+[\/]+(.*)+["|\']\>+(.*)+\</a\>)';
$string = "click <a href='http://subdomain.sitename.tld/somedir'>here</a>";

var_dump(preg_replace($pattern, "", $string)); // prints "string 'click ' (length=6)" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T11:39:11.747

```
$this->tresc[$i][description]=preg_replace("/\<a .*\>.*\<\/a\>/i", "", $this->tresc[$i][description]); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T18:03:48.507

```
$this->tresc[$i][description]=preg_replace("/<a href=\"(.*)\">/i", "",$this->tresc[$i][description]);
$this->tresc[$i][description]=preg_replace("/<\/a\>/i", "",$this->tresc[$i][description]); 
```

# git - 子文件夹的 Git 存储库

> ID：11374533
> 
> 赞同：1
> 
> 时间：2012-07-07T11:19:15.617
> 
> 标签：git, repository, subdirectory

我有一个项目，它有一个存储库。我有回购的根文件夹，

```
/A
  /A1
  /A2
/B
  /B1 
```

我想将 A 文件夹分离到一个不同的存储库中，然后我想要另一个存储库，它看起来与上面描述的完全一样，但是我希望文件夹 A 成为存储库的子模块，而不是文件夹 A创建的。这样 A 是一个独立的项目，另一个 repo 依赖于子模块 A，但也包含 B。

我该怎么做？还是我必须创建一个丢失所有提交的全新项目？

已经谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:34:23.193

您可以克隆存储库并用于`git filter-branch`从两个存储库中删除您不想要的历史记录。之后，您可以将 A 作为子模块添加到 B。

编辑：遵循 github 指南后，执行

`git filter-branch --tree-filter "rm -rf A" --prune-empty HEAD`从 B 中删除 A 的历史记录。

编辑：[这个](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)SO question 有一个全面的答案。

# java - 自动完成和内容辅助不会关闭 (Eclipse)

> ID：11374535
> 
> 赞同：3
> 
> 时间：2012-07-07T11:19:39.903
> 
> 标签：java, android, xml, eclipse, autocomplete

> 您好，我花了一个多小时试图在 Eclipse 中禁用 Android SDK 中的所有自动完成和建议。Android 使用 XML 和 Java 文件。目前我一直在处理 XML 文件，每次到达行尾时，我都会点击 [Enter]，但是会出现一个自动完成对话框，它会在行尾打印“样式”。
> 
> 任何帮助都会很棒，我一直在网上搜索并且一直在关闭一切：Windows -> Preferences -> Java -> Editor Windows -> Preferences -> XML -> XML Files -> Editor
> 
> 虽然我终于从弹出窗口中得到了结束标签和引号，但这种令人恼火和彻头彻尾的错误自动完成功能不断弹出。
> 
> 如果我缺少一些整体禁用开关，我会感到很愚蠢，但会感谢您的帮助。
> 
> 感谢您的所有帮助。

大家好！

我在 Eclipse 中使用 Java 和 XML 进行 Android 应用程序开发。

上面引用的文字与我遇到的完全相同的问题。不幸的是，这是在 2011 年 1 月的一个论坛上发布的，但没有收到任何回复，这让我想知道这个问题是否是一个尚未修复的错误。我尝试过使用*Eclipse 3.6.2、3.7.2、SR2，*并且如上所述，我在 Eclipse、Java、XML 等列出的每个平台中都禁用了与自动完成或内容辅助相关的所有选项......我花了大约两天时间弄乱各种设置并在线研究如何解决这个问题。

其他论坛的一般建议，同样的问题，不仅仅是 XML，几乎总是去`Window->preferences->[platform]->Editor->Content Assist (and/or) Typing`禁用相关选项。一半的人声称它解决了他们的问题，而另一半声称它没有。我碰巧在“不”人群中，因为我尝试过的一切都没有效果，即使在关闭并重新启动*Eclipse*之后，内容辅助和代码完成选项仍然被禁用，但它继续发生。我开始感到绝望，因为这真的限制了我的编码风格。

这是一个错误吗？还是我只是错过了什么？谢谢！

[![上述问题的屏幕截图](../Images/4dffd6ea3b8c0834d07e00d6eaac1c00.png)](https://i.stack.imgur.com/OcUoB.jpg)
[（来源：[fbcdn.net](https://sphotos.xx.fbcdn.net/hphotos-ash3/531730_481454708550536_866774212_n.jpg)）]

“style =”的自动插入似乎是我在 wrap_content 上键入结束引号后立即触发建议框的结果。之所以在按 Enter 后插入关键字“style”，是因为它是列表中的第一项。我不确定“建议框”是否是内容辅助。

![在此处输入图像描述](../Images/c9f2f842c2df67a8ef0d9d8b2b9e7237.png)

我已尝试禁用内容辅助，如下所示。但是当输入触发字符时，它继续给我弹出建议框。

![在此处输入图像描述](../Images/51604f4d80be88ec0e5f9daa1a110a9f.png)

对此的任何见解和/或帮助将不胜感激！

# android - Android AlarmManager 无法正常工作

> ID：11374537
> 
> 赞同：-1
> 
> 时间：2012-07-07T11:19:48.700
> 
> 标签：android, alarmmanager

据我所知，在启动应用程序 20 秒后，我应该在 Logcat 中看到日志“警报”，但它没有发生。我错过了什么？

```
public class MainActivity extends Activity {
    private PendingIntent pendingIntent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Intent intent = new Intent(MainActivity.this, MainActivity.class);
        pendingIntent = PendingIntent.getService(MainActivity.this, 1, intent, 1);

        AlarmManager manager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        manager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 20000, pendingIntent);

        Log.d("alarm", "alarm");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:37:00.590

似乎你应该使用

```
getActivity (Context context, int requestCode, Intent intent, int flags) 
```

正如您`Intent`指定的活动类，而不是服务。接下来，最后一个参数（标志）可以具有来自`PendingIntent`类中的常量的值。如前所述，第二个参数应该是`0`当前未使用的。请参阅[此](https://stackoverflow.com/questions/1082437/android-alarmmanager)问题以了解示例用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:34:55.640

尝试

```
pendingIntent = PendingIntent.getService(MainActivity.this, 0, intent, 0); 
```

第三个参数目前没有使用。检查[PendingIntent](http://developer.android.com/reference/android/app/PendingIntent.html#getService%28android.content.Context,%20int,%20android.content.Intent,%20int%29)

# python - 龙卷风不会在主管中干净地重新启动

> ID：11374543
> 
> 赞同：7
> 
> 时间：2012-07-07T11:20:14.660
> 
> 标签：python, tornado, supervisord

我正在使用 tornado 运行烧瓶应用程序，并且我有一个 shell 脚本，它做了一些工作，然后运行该应用程序。

```
#!/usr/bin/env bash
some_work
more_work
python /usr/share/theapp/theapp.py 
```

我使用主管来管理这个小脚本。启动工作正常（`sudo supervisorctl start theapp.sh`），但是当我想重新启动时，python 子进程不会退出并挂起，占用端口并阻止再次启动。我尝试添加陷阱以确保在脚本被主管停止时确实停止了 python 代码，但这没有奏效。我已经尝试为 gevent 的 wsgi 服务器切换龙卷风并且遇到了同样的问题。我应该怎么做这个小脚本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T19:03:44.577

TERM 信号仅发送到 bash 脚本`theapp.sh`，python 进程从不接收。您可以尝试`stopasgroup`supevisor 配置的程序部分中的选项，该选项与 bash（和其他 shell）处理信号的方式更兼容[1]。

[1] [http://www.vidarholen.net/contents/blog/?p=34](http://www.vidarholen.net/contents/blog/?p=34)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T09:42:57.090

或者，如果您的 shell 脚本只做准备工作，而在“真实”命令之后什么都不做，您可以将最后一行替换为

```
exec python /usr/share/theapp/theapp.py 
```

它将用 python 进程替换 shell 进程，因此后者直接获取信号，并具有额外的好处，即您没有空闲的 shell 进程一直在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:28:08.043

我在 supervisord 和 uwsgi 上遇到过类似的问题，但它也可能对 Tornado 有效。问题在于 Tornado 服务期望重新启动的信号。supervisord 发送的默认信号是 SIG_TERM （查看[docs](http://supervisord.org/configuration.html)中的 stopsignal ）。我不确定 Tornado 的预期，但您可以在 supervisord 配置中尝试更多选项，例如：

```
# /etc/supervisor.d/myprogram.ini
# http://supervisord.org/configuration.html#program-x-section-values
[program:myprogram]
command=/path/to/script/
....
stopsignal=INT 
```

或者

```
stopsignal=HUP 
```

# emacs - 为自动缩进代码编写自定义函数有什么好的*抽象*？

> ID：11374545
> 
> 赞同：4
> 
> 时间：2012-07-07T11:20:25.513
> 
> 标签：emacs, elisp, indentation, vim

这个月我花了一些时间与 Emacs Lisp 进行斗争，试图获得更好地满足我需求的自动缩进。令人惊讶的是，大多数缩进代码是多么低级。我只看到了很少的抽象，例如

*   搜索不在字符串或注释中的正则表达式的第一个实例

我怀疑还有更多有用的抽象可以帮助编写更易于理解和修改的缩进代码。（甚至我引用的抽象也可以改进为“重复将此函数应用于这些参数，直到函数返回 nil 或点不在字符串或注释中”。）

我正在使用 emacs，但我也用 vim 标记了这个问题，因为我会从任何地方汲取好主意。

如果你想编写干净的、设计良好的、模块化的、自定义的缩进函数，**你会使用什么抽象？** （我也很高兴看到指向您认为使用良好抽象或设计良好的代码的指针。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T12:19:11.197

听起来您正在寻找更高级别的东西，但是 macs 23 带有[SMIE](http://www.gnu.org/software/emacs/manual/html_node/elisp/SMIE.html)，它旨在一般地解决这个问题。但它适用于主要模式的开发人员，而不是修改现有的缩进行为。

**编辑**：主要的抽象似乎是

*   一个相当弱的运算符优先级解析器，辅以一个肮脏的技巧词法分析器

*   每个标记都有一个“虚拟缩进”的概念，如果开始一行，它就会出现在这个位置

*   每个标记都有一个“父”，它是封闭句法结构的开始。

进入成本似乎相当大，并且该软件附有此免责声明：

> 在实践中，[the] 默认缩进样式可能不够好。您将需要在许多不同的情况下对其进行调整。

（编辑结束）

* * *

你说的话：

> 搜索不在字符串或注释中的正则表达式的第一个实例

很容易通过调用`syntax-ppss`and来完成`re-search-backward`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:14:56.483

以编程方式在缓冲区中导航的不错的语言无关抽象是 sexp 和语法表：如果您的模式的语法表构建得很好，您可以使用`forward-sexp`and移动`scan-sexps`。我会说只在这些不起作用的情况下使用正则表达式，即使你最终确实使用了它们提供的值`re-search-forward`（见它的`BOUND`论点）。

也可以`syntax-ppss`用来轻松辨别是否在注释或字符串文字中，或处理字符转义情况。请参阅 Emacs Lisp 信息节点[语法表](http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-Tables.html)

诚然，sexp 可能对缩进 Lisp 很有效，因为一切都是一个列表，并且可以很容易地`(syntax-ppss)`提出诸如“深度是多少级`(point)`？”之类的问题。使用像 Ruby 这样的块分隔符`begin`，`end`你会进入疯狂的正则表达式领域。

因此，要`(syntax-ppss)`在其他语言中获得类似优点，您需要专门为它编写一个解析器。例如`ruby-mode`，实现了一个解析器，并查看`nxml-mode`了一个令人难以置信的例子。

另请注意，您可以做很多事情，`with-syntax-table`因为它允许您暂时从不同的角度查看缓冲区。它不是缩进，但考虑一下[http://github.com/joaotavora/autopair](http://github.com/joaotavora/autopair)中的这个例子，它允许我忽略一些括号类型

```
(defvar autopair-empty-syntax-table
  (let ((empty (make-syntax-table)))
    (dotimes (char 256)
      (let ((syntax-entry (aref empty char)))
        (when (and (consp syntax-entry)
                   (or (eq (car (string-to-syntax "("))
                           (car syntax-entry))
                       (eq (car (string-to-syntax ")"))
                           (car syntax-entry))))
          (modify-syntax-entry char "w" empty))))
    empty)
  "A syntax table no \"(\" or \")\" syntaxes")

(defun autopair-just-for-delim-syntax-table (delim)
  "A syntax table that has \"parenthesis\" syntax just for DELIM."
  (let* ((syntax-entry (aref (syntax-table) delim))
         (other-syntax-entry (and syntax-entry
                                  (cdr syntax-entry)
                                  (aref (syntax-table) (cdr syntax-entry)))))
    (when (consp other-syntax-entry)
      (let ((retval (make-syntax-table autopair-empty-syntax-table)))
        (aset retval delim syntax-entry)
        (aset retval (cdr syntax-entry) other-syntax-entry)
        retval)))) 
```

现在，在混合`[]`,`()`和`{}`情况的缓冲区中，要求`(syntax-ppss)`或`(with-syntax-table (autopair-just-for-delim-syntax-table ?{ ) (syntax-ppss))`后者只计算的地方是完全不同的`{}`。我不知道您要缩进哪种语言，但这可以帮助您在缩进 C 块方面做合理的工作，例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T20:48:50.190

我知道一些有用的内置原语：

*   缩进到
*   当前缩进

据我所知，有用的原语不是 emacs 的一部分：

*   转到上一个非空白行
*   行匹配-p（正则表达式）
*   inside-p（开始字符串关闭字符串）

随意完成这个列表 - 我没有找到很多关于 emacs 缩进的资源。

# android - 膨胀类片段时出错（作为 ListFragment）

> ID：11374547
> 
> 赞同：3
> 
> 时间：2012-07-07T11:21:02.290
> 
> 标签：android

尝试在选项卡中创建 ListFragment 时出现以下错误。我只是想在那个片段中有一个列表，没什么特别的.. 很抱歉，这更像是缺乏知识而不是错误，但我在这个问题上挂了 2 天，不知道我该怎么办否则再问你们。谢谢。

```
07-07 13:08:18.693: E/AndroidRuntime(19662): FATAL EXCEPTION: main
07-07 13:08:18.693: E/AndroidRuntime(19662): java.lang.RuntimeException: Unable to start activity ComponentInfo{com..bucp/com..bucp.MainActivity}: android.view.InflateException: Binary XML file line #63: Error inflating class fragment
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.os.Looper.loop(Looper.java:137)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.ActivityThread.main(ActivityThread.java:4441)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at java.lang.reflect.Method.invokeNative(Native Method)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at java.lang.reflect.Method.invoke(Method.java:511)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at dalvik.system.NativeStart.main(Native Method)
07-07 13:08:18.693: E/AndroidRuntime(19662): Caused by: android.view.InflateException: Binary XML file line #63: Error inflating class fragment
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.Activity.setContentView(Activity.java:1835)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at com..bucp.MainActivity.onCreate(MainActivity.java:21)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.Activity.performCreate(Activity.java:4465)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
07-07 13:08:18.693: E/AndroidRuntime(19662):    ... 11 more
07-07 13:08:18.693: E/AndroidRuntime(19662): Caused by: java.lang.ClassCastException: com..bucp.BanlistFragment cannot be cast to android.app.Fragment
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.Fragment.instantiate(Fragment.java:574)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.Fragment.instantiate(Fragment.java:549)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.app.Activity.onCreateView(Activity.java:4235)
07-07 13:08:18.693: E/AndroidRuntime(19662):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
07-07 13:08:18.693: E/AndroidRuntime(19662):    ... 25 more 
```

给定的第 63 行是片段的标签：

```
<fragment        
android:name="com..bucp.BanlistFragment"
android:id="@+id/banl_fragment"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:layout="@layout/banlist_fragment" /> 
```

片段文件本身包含：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:paddingLeft="8dp"
         android:paddingRight="8dp">

     <ListView android:id="@id/android:list"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="#00FF00"
               android:layout_weight="1"
               android:drawSelectorOnTop="false"/>

     <TextView android:id="@id/android:empty"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="#FF0000"
               android:text="No data"/>
</LinearLayout> 
```

而片段类只包含

```
@Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  ListAdapter myListAdapter = new ArrayAdapter<String>(
    getActivity(),
    android.R.layout.simple_list_item_1,
    month);
  setListAdapter(myListAdapter);
 }

 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
     View tmp_view = inflater.inflate(R.layout.banlist_fragment, container, false);
     ListView list = (ListView) tmp_view.findViewById(android.R.id.list);
  return list;
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T13:07:21.633

在堆栈跟踪中，您有：`Caused by: java.lang.ClassCastException: com.fr34kyd3v.bucp.BanlistFragment cannot be cast to android.app.Fragment`

我猜，也许您的 BanlistFragment 类从支持库（android.support.v4.app.Fragment）扩展了 Fragment，并且活动试图“本地处理”而不是支持库？为了获得比猜测更多的东西，请提供 BanlistFragment 的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:21:06.247

点-1

它认为应该像 as 和 BanlistFragment 应该扩展 Fragment

```
 @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
         View tmp_view = inflater.inflate(R.layout.banlist_fragment, container, false);
         ListView list = (ListView) tmp_view.findViewById(android.R.id.list);
      return tmp_view; //<------------------------------
     } 
```

点-2

作为宠物生命周期[http://developer.android.com/images/activity_fragment_lifecycle.png](http://developer.android.com/images/activity_fragment_lifecycle.png) onCreate 在 onCreateView 之前被调用所以

```
setListAdapter(myListAdapter); 
```

应该在 onCreateView 或在此之后调用函数...

# php - 为什么 $xa 未定义 switch 语句的变量？

> ID：11374553
> 
> 赞同：1
> 
> 时间：2012-07-07T11:21:55.360
> 
> 标签：php, switch-statement

将 $x 显示为未定义。我的 switch 语句有什么问题？

```
http://localhost/add.php?price_error=1

switch(isset($_GET['price_error']) && $_GET['price_error'] == $x){

            case 1:
                echo '<span class="error_msg">Discount price cannot be greater than original price</span><br/>';
                break;

            case 2:
                echo '<span class="error_msg">Discount cannot be less than 30% of original price</span><br/>';
                break;

            case 3:
                echo '<span class="error_msg">Discount price and original price cannot be greater than $30000 HKD</span><br/>';
                break;

            default: 
                false;
                break;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:24:41.180

这是因为您还没有定义`$x`变量（我假设您希望它保持`price_error`id）：

```
 $x = isset($_GET['price_error']) ? (int)$_GET['price_error'] : 0;
    switch($x) {
        case 1:
            echo '<span class="error_msg">Discount price cannot be greater than original price</span><br/>';
            break;

        case 2:
            echo '<span class="error_msg">Discount cannot be less than 30% of original price</span><br/>';
            break;

        case 3:
            echo '<span class="error_msg">Discount price and original price cannot be greater than $30000 HKD</span><br/>';
            break;

        default: 
            break;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:24:47.043

开关通常具有可变参数。

尝试：

```
if(isset($_GET['price_error']) && $_GET['price_error'] == $x){
    switch($x){ 
        //code
    }
} 
```

# asp.net - 正则表达式限制文本框中的输入

> ID：11374554
> 
> 赞同：0
> 
> 时间：2012-07-07T11:21:58.167
> 
> 标签：asp.net, regex, textbox

如何限制用户在 asp.net 的文本框中仅键入 4 个数值？我需要使用正则表达式验证请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:29:56.337

试试这个`asp.net`

```
<asp:TextBox runat="server" ID="txt" />

   <asp:RegularExpressionValidator runat="server" 
        ID="reg1" ValidationGroup="save" ControlToValidate="txt"
             ValidationExpression="^\d{4}$" ErrorMessage="Not 4 digits" />

<asp:Button runat="server" ID="Btn" Text="Clicker" ValidationGroup="save" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:26:30.350

如果此正则表达式匹配`^\d{4}$`，则用户仅输入 4 位数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:33:25.423

下面的代码验证从 0 位到 4 位。如果您想要 4 位数字，请按照 burn_LEGION 的示例 ^\d{0,4}$

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T11:36:11.107

皮特非常简单。在验证表达式中只需键入 ^\d{4}$。你会完成的。

# mysql - 如何在 MySQL 查询中将日期 YYYYMMDD 转换为 YY-MM-DD

> ID：11374557
> 
> 赞同：5
> 
> 时间：2012-07-07T11:22:47.883
> 
> 标签：mysql

我有一个 YYYYMMDD 或 20120101 格式的日期列。这是因为 SAP 以这种格式存储它，所以无法更改它。

如何在 MySQL 查询中将其转换为 YYYY-MM-DD 格式？在 DB2 中，我使用了一个 to_date() 函数。

在 MySQL 中，我正在尝试 STR_TO_STRING() 函数，但它返回“null”。

```
 SELECT STR_TO_DATE(VBAP.ERDAT,'%Y-%m-%d') FROM VBAP 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T11:26:03.137

这有效..

```
date_format(str_to_date(VBAP.ERDAT, '%Y%m%d'),'%Y-%m-%d') 
```

# sphinx - 生产服务器上的 Sphinx Search mysql 客户端

> ID：11374558
> 
> 赞同：0
> 
> 时间：2012-07-07T11:22:48.227
> 
> 标签：sphinx, thinking-sphinx, production, mysql

我想连接到生产服务器上的 SphinxQL 以在 mysql 数据库上执行 sphinx 查询，

**请注意，我通过远程连接到生产服务器终端（Ubuntu 10.04）中运行了以下命令。**

```
mysql -h 127.0.0.1 -P 9312

mysql -h 127.0.0.1 -P 9306

mysql -h <<my_production_ip_address>> -P 9312

mysql -h <<my_production_ip_address>> -P 9306 
```

**尝试将 /etc/mysql/my.cnf 中的 bind_address 更改为 my_production_ip_address。**

我想在我的生产服务器上运行 sphinx 查询以进行调试。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T15:20:37.120

请确保在 searchd {...} 部分下的 sphinx 配置文件（通常是 sphinx.conf）中有以下行：

```
listen = 9306:mysql41 
```

如果没有，请添加它并重新启动 Sphinx。

另请确保：

1.  Sphinx 守护进程 (searchd) 已启动并正在运行
2.  Sphinx 正在监听端口 9306（运行 netstat -anp | grep LIST ）
3.  防火墙配置为将网络连接传递到端口 9306（通常这样做）

希望这可以帮助。

# android - 下载扩展包以导入我的应用程序

> ID：11374559
> 
> 赞同：0
> 
> 时间：2012-07-07T11:22:50.037
> 
> 标签：android

我做了一个包含很多图像的应用程序，现在项目的大小是 28MB。所以我认为用户可以从我的 WebServer 下载这些图像，然后将其导入应用程序。我怎么能这样做？

PS 我不认为图像可以在 SD 卡中清晰可见

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:32:55.607

使用[扩展文件机制](http://developer.android.com/guide/google/play/expansion-files.html)。它是由 Android 团队设计来解决这个问题的。您可以将您的应用程序拆分为最多 50 MB 的应用程序 + 第一个文件中的 2 GB 数据 + 第二个文件中的 2 GB 数据。

一切都由谷歌市场管理，所以这应该是一个比使用自己的网络服务器更稳定的解决方案。

# jquery - 如何使用 jquery 在 MVC 中创建菜单下拉菜单？

> ID：11374561
> 
> 赞同：0
> 
> 时间：2012-07-07T11:23:03.240
> 
> 标签：jquery, asp.net-mvc-3, c#-4.0

我想做的是.....我有这样的菜单

```
 <div id="menucontainer">
            <ul id="menu">
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                <li>@Html.ActionLink("About", "About", "Home")</li>
                <li>@Html.ActionLink("NewMovies","NewMovies","Home")</li>
            </ul>
        </div> 
```

“NewMovies”菜单应该有一些电影列表。

现在我想使用 jquery 为“NewMovies”提供一个下拉菜单...有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:08:18.240

我建议您使用与默认 MVC3 菜单不同的东西。[在这里](http://www.tripwiremagazine.com/2012/03/jquery-menu-plugins.html)或[这里](http://www.1stwebdesigner.com/css/38-jquery-and-css-drop-down-multi-level-menu-solutions/)选择一个全新的 JQuery 菜单

这将很简单：

1.  添加一个新`partial view`的 html `_layout`，以便它可以在所有页面上。
2.  将`<div>`带有此菜单之一的 html 的标签放在`partial view`
3.  添加相关的**CSS**
4.  添加相关**JS**
5.  *可选*，如果菜单的信息来自数据库，你可以使用 a `Controller`and `JSON`call 来填充你的菜单，但这有点复杂

希望对你有帮助，祝你好运！

# mysql - MySQL查询结果下的时间是什么意思？

> ID：11374564
> 
> 赞同：1
> 
> 时间：2012-07-07T11:23:47.373
> 
> 标签：mysql, time, execute

这是机器只执行查询的时间还是包含时间机器显示查询的时间？

我问这个问题是因为我从我的计算机访问远程 MySQL 服务器，我收到的结果是 ~15 秒内 ~ 5000 条记录。但是我在这个远程 MySQL 服务器上由同一个用户做同样的事情，我在 ~0.02 秒内收到 5000 条记录。

为什么两个时间不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:35:37.633

需要更多时间的原因是

*   您远程执行查询
*   您在本地执行查询

当查询通过网络运行时，还需要考虑网络传输时间。您可以查看这篇文章以更好地了解[网络延迟](http://www.mysqlperformanceblog.com/2008/09/01/how-network-can-impact-mysql-operations/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:24:47.933

如果您真正想做的只是测量服务器执行时间，那么也许您想看看
[`SHOW PROFILES`](http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html).

例子：

```
mysql> set profiling = 1;

mysql> select count(*) from xyz;
+----------+
| count(*) |
+----------+
|    10697 |
+----------+
1 row in set (0.02 sec)

mysql> show profiles;
+----------+------------+--------------------------------+
| Query_ID | Duration   | Query                          |
+----------+------------+--------------------------------+
|        1 | 0.01904200 | select count(*) from xyz       |
+----------+------------+--------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:27:01.173

这意味着 DBMS 执行查询所需的时间（根据其查询计划）。

# netbeans - NetBeans：如何连接两个组件，使它们执行相同的动作？

> ID：11374565
> 
> 赞同：0
> 
> 时间：2012-07-07T11:23:53.267
> 
> 标签：netbeans, netbeans-7

我在 JForm 中创建了一个 JMenuItem 和一个 JButton。有没有一种简单的方法来连接它们，以便它们使用 Netbeans IDE 执行相同的操作？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:32:59.093

使用 a`javax.swing.Action`来实现逻辑（例如通过扩展`javax.swing.AbstractAction`），然后将操作分配给菜单项*和*按钮。两者都有一个以 Action 作为参数的构造函数。

启用/禁用该操作还将启用/禁用按钮和菜单项。

有关更多详细信息，请参阅[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/index.html)中关于使用操作的章节

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:37:58.970

它们都实现了 ItemSelectable。因此，您可以尝试创建一个实现 ItemListener 的控制器，实现其 itemStateChanged() 并将此侦听器添加到 JMenuItem 和 JButton（使用 addItemListener()）。

# html - 鼠标悬停在按钮上的问题

> ID：11374567
> 
> 赞同：5
> 
> 时间：2012-07-07T11:24:29.880
> 
> 标签：html, button, css, twitter-bootstrap

我正在使用 Twitter Bootstrap，将鼠标悬停在`btn-primary`按钮上时使用起来有些奇怪。

这是我的代码：

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
        <ul class="nav nav-pills">
      <li class="active">
        <a href="#">Home</a>
      </li>
      <li><a href="#">...</a></li>
      <li><a href="#">...</a></li>
      <li><a href="#" class="btn btn-primary btn-small">
                  <i class="icon-user icon-white"></i> Log In
                  </a>
              </li>
    </ul>
    </div>
  </div>
</div> 
```

这就是发生的事情：

**前**

![在此处输入图像描述](../Images/29a61412149a199cc0b54e7079d80bdb.png)

**悬停时**

![在此处输入图像描述](../Images/e95140e21a935c3987b22454ada03587.png)

* * *

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T12:53:51.130

2个解决方案，

*   简单：从 li 中删除 a href。优点：快速，无需维护。缺点：如果您需要下拉菜单，则不能这样做，可能会破坏设计。
*   首选：添加缺少的 css 类以支持 li 中的 btn。

> ```
> .navbar .nav > li > a.btn {
> display: inline-block; padding: 4px 10px 4px; margin: 5px 5px 6px; line-height: 18px;
> }
> 
> .navbar .nav > li > a.btn-primary,
> .navbar .nav > li > a.btn-primary:hover {
>    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
>   color: #ffffff;
> }
> 
> .navbar .nav > li > a.btn-primary:active {
>    color: rgba(255, 255, 255, 0.75);
> }
> 
>  .navbar .nav > li > a..btn-primary {
>   background-color: #0074cc;
>   background-image: -moz-linear-gradient(top, #0088cc, #0055cc);
>   background-image: -ms-linear-gradient(top, #0088cc, #0055cc);
>   background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0055cc));
>   background-image: -webkit-linear-gradient(top, #0088cc, #0055cc);
>   background-image: -o-linear-gradient(top, #0088cc, #0055cc);
>   background-image: linear-gradient(top, #0088cc, #0055cc);
>   background-repeat: repeat-x;
>   filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0088cc',endColorstr='#0055cc', GradientType=0);
>   border-color: #0055cc #0055cc #003580;
>   border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
>   filter: progid:dximagetransform.microsoft.gradient(enabled=false);
> }
> .navbar .nav > li > a.btn-primary:hover,
> .navbar .nav > li > a.btn-primary:active,
> .navbar .nav > li > a.btn-primary.disabled,
> .navbar .nav > li > a.btn-primary[disabled] {
>   background-color: #0055cc;
> }
> .navbar .nav > li > a.btn-primary:active,
> .navbar .nav > li > a.btn-primary.active {
>   background-color: #004099 \9;
> } 
> ```

# linux - 如何与实时进程和OOM杀手交朋友？

> ID：11374571
> 
> 赞同：0
> 
> 时间：2012-07-07T11:24:52.070
> 
> 标签：linux, out-of-memory, real-time

```
$ mlockall schedtool -R -p 4 -e ionice -c1 mplayer -really-quiet whatever.ogg
$ mempig
Killed 
```

播放器

*   以实时调度优先级运行
*   以实时 IO 优先级运行
*   将所有页面锁定在内存中

但是当我开始使用 OOM 杀手诱饵时，仍然会“剁碎”。

即使在 OOM 的情况下，还可以做些什么来使实时流程实时？（当然，“vm.overcommit_memory=2”除外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:44:50.860

这是一个老问题，所以我不会继续下去，但是，看看 /proc/pid/oom_adj 和 /proc/pid/oom_score

# opencv - 在 opencv 中尝试人脸识别演示时出错

> ID：11374573
> 
> 赞同：1
> 
> 时间：2012-07-07T11:25:22.660
> 
> 标签：opencv, ubuntu-12.04

我正在使用 ubuntu 12.04，并且我已经安装了 opencv 2.4（实际上，我安装了 ROS，opencv 随它一起安装）我正在尝试运行这个[演示](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html#eigenfaces-in-opencv)，但我收到了这个错误：

```
usama@ubuntu:~/Desktop/opencv/Advanced/Face Recognition$ g++ `pkg-config opencv --cflags`     face_recog.cpp  -o face_recog `pkg-config opencv --libs` 
face_recog.cpp: In function ‘int main(int, const char**)’:
face_recog.cpp:119:30: error: ‘class cv::FaceRecognizer’ has no member named ‘getMat’
face_recog.cpp:121:20: error: ‘class cv::FaceRecognizer’ has no member named ‘getMat’
facerecog.cpp:123:23: error: ‘class cv::FaceRecognizer’ has no member named ‘getMat’ 
```

任何想法，我怎样才能摆脱这个错误？我应该将opencv升级到新版本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:46:56.623

只有从 OpenCV 2.4.2 开始，您才能使用[cv::Algorithm](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=algorithm#algorithm)函数，例如`getMat(...)`cv [::FaceRecognizer](http://docs.opencv.org/modules/contrib/doc/facerec/facerec_api.html#id1)。（官方）OpenCV 2.4.0 和 OpenCV 2.4.1 中的[cv::FaceRecognizer](http://docs.opencv.org/modules/contrib/doc/facerec/facerec_api.html#id1)不是基于[cv::Algorithm](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=algorithm#algorithm)，因此 OpenCV 2.4.2 文档中的示例不适用于 OpenCV 2.4.0/ 2.4.1 发布。

所以是的，我建议更新到 OpenCV 2.4.2。它已于几天前正式发布，请参见[http://www.opencv.org](http://www.opencv.org)的新用户页面。

如果您无法更新 OpenCV，那么您可以尝试兼容 OpenCV 2.4.0/2.4.1 的演示：

*   [http://bytefish.de/dev/cpp/facerec_demo.cpp](http://bytefish.de/dev/cpp/facerec_demo.cpp)

或者你试试 libfacerec，它与 OpenCV 2.4.2 实现具有相同的接口：

*   [https://github.com/bytefish/libfacerec](https://github.com/bytefish/libfacerec)

这真的取决于你的 OpenCV 版本。如果您使用的是 OpenCV 2.3，请尝试 libfacerec 的 0.04 版本。但是，如果您已经在使用 OpenCV 2.4.2 并且遇到问题，请在官方 OpenCV 错误跟踪器上发布错误：

*   [http://code.opencv.org](http://code.opencv.org)。

万一你没有注意到。您还可以在以下方面询问 OpenCV 相关问题：

*   [http://answers.opencv.org/questions](http://answers.opencv.org/questions)

很多 OpenCV 专家都在哪里。

# apache - 在 Webmin 上设置 Wordpress

> ID：11374578
> 
> 赞同：1
> 
> 时间：2012-07-06T18:57:21.120
> 
> 标签：apache, installation

感谢您花时间查看这篇文章。

我已经在我的 Ubuntu (10.04 LTS) 上设置了一个本地 Wordpress 安装，它目前可以工作。

但是，我想让它在我的 webmin (1.580) 上作为 apache 网络服务器工作。我想知道是否有人以前做过这件事以及他们是如何让它工作的。

到目前为止，我在 webmin 上所做的事情： - 创建了一个启用 SSL 选项的新虚拟主机（端口 3251，随机选择） - 在全局配置下设置端口 - 应用并重新启动 Apache 网络服务器

当我对此进行测试时——我收到了一个内部服务器错误，所以我认为我需要更新 wp_options——所以我将“siteurl”和“home”的选项值设置为端口。但是我仍然收到同样的错误。

我想知道我还需要做什么才能使其正常工作。

### 阿帕奇错误日志：

> 由于可能的配置错误，请求超出了 10 个内部重定向的限制。如有必要，使用“LimitInternalRecursion”增加限制。

好像某处有循环？

### 重写日志（`RewriteLogLevel 3`）：

```
(2) [perdir /home/site/Website/web/] trying to replace prefix /home/site/Website/web/ with /web/
192.168.1.21 - - [06/Jul/2012:14:06:08 --0700] [guest-PC/sid#7f036c544db0][rid#7f036ca65790/initial/redir#10] 
(1) [perdir /home/site/Website/web/] internal redirect with /web/index.php [INTERNAL REDIRECT] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:47:23.650

该问题已从两个部分解决：需要设置“home”和“siteurl”的 wp_options。我已经做过了。然而，下一部分是机会 .htaccess 删除尾随反斜杠，因为 webmin 已经处理了它。

# entity-framework - Code First Entity Framework 和 Windows Azure SQL

> ID：11374583
> 
> 赞同：2
> 
> 时间：2012-07-07T11:26:52.820
> 
> 标签：entity-framework, azure, ef-code-first, code-first, azure-sql-database

我正在尝试将一个非常简单的代码优先示例从我的本地 SQL 移动到 Azure SQL，看起来我已经碰壁了。

这是我正在使用的简单代码：

```
public class Cat
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid ID { get; set; }
    public string Name { get; set; }
}

**Context class:**

public class CatDbContext : DbContext
{
    public PersonDbContext()
        : base("name=MyConnectionString")
    { }
    public DbSet<Cat> Cats { get; set; }
}

My connection string:
 <add name="MyConnectionString" connectionString="Server=tcp:xxxx.database.windows.net;Database=xxxx;User ID=xxxx@xxxx;Password=xxxx;Trusted_Connection=False;Encrypt=True;" providerName="System.Data.SqlClient" /> 
```

现在我有一个简单的控制台应用程序，它执行以下操作：

```
 CatDbContext db = new CatDbContext();
        db.Cats.Add(new Cat { Name = "Garfield", ID = Guid.NewGuid() });
        db.SaveChanges(); 
```

我在 db.SaveChanges(); 行遇到了一个异常。说：无效的对象名称'dbo.Cats'。

堆栈跟踪：

```
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
at System.Data.SqlClient.SqlDataReader.get_MetaData()
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter) 
```

并且没有创建表。如果有人能指出我正确的方向，我将非常感激，因为我不知道为什么会这样。

亲切的问候，奥德里斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:09:49.540

我今天使用 EF Code First 迁移完成了这项工作。它将最初创建您的表，并在将来启用数据库升级。有关详细信息，请参阅此[演练](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)。我认为这是推荐的方法。如果您在包管理器中收到 NullReferenceException，[请参见此处](https://stackoverflow.com/questions/9481784/null-reference-on-entity-framework-migration)。

[另一个提示](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/1e828c99-66a9-4094-87ec-e799bd619463/)（一直向下滚动）是您的连接字符串必须以 SQL Azure 主数据库为目标，但此信息可能已过时，我没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:51:25.020

似乎 Entity Framework 不会在代码优先的方法中为您创建 Azure SQL 表，因此您必须使用模型优先的方法，为数据模型生成 SQL 脚本，并通过可用的基于 Web 的 sql 管理器运行脚本在 Azure。

也建议更换

```
[id] uniqueidentifier not null, 
```

和

```
[id] uniqueidentifier not null default newid(), 
```

对于每个主键，因为数据库生成的键在其他情况下不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:16:22.107

CodeFirst 适用于 SQL Azure。

这曾经是 EF 4.1 的问题 (-) 请确保您使用的是最新版本的 EF（截至今日 NuGet 的 4.3.1）。还要确保您在连接字符串中指定的用户有足够的权限在目标数据库中创建数据库对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T08:25:11.013

在连接字符串中进行设置`PersistSecurityInfo=true`将授予本地计算机在 Azure 中创建数据库的权限。确保在创建数据库后将其删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-11T16:07:59.530

我遇到了同样的问题，设置 DB Initializer 是最终创建表的解决方案。
只需将以下内容放入`Global.asax.cs`：

```
Database.SetInitializer<MyContext>(new CreateDatabaseIfNotExists<MyContext>()); 
```

# c# - 为什么 asp.net 会话的过期时间早于其超时时间？

> ID：11374585
> 
> 赞同：2
> 
> 时间：2012-07-07T11:27:14.923
> 
> 标签：c#, asp.net, web-services, timeout

我有一个 Asp.net 网络服务。它有方法M1。M1 为每个会话创建一个文件夹。当会话过期时，我使用以下代码删除 global.asax 中的该文件夹。

```
void Session_End(object sender, EventArgs e)
    {
        try
        {
            System.IO.DirectoryInfo dirMyPacksFolder = new System.IO.DirectoryInfo(Utilities.getMyPacksFolder(Session));
            //dirMyPacksFolder.Parent.CreateSubdirectory("ended_" + Session.SessionID);
            if (dirMyPacksFolder.Exists)
            {
                dirMyPacksFolder.Delete(true);
            }
        }
        catch (Exception ex)
        {
            Utilities.logException("", ex);
        }
    } 
```

当我在浏览器中打开我的网络服务并调用 M1 时，它运行正常，并且在我设置的超时到期时间删除了该文件夹。但是当我第二次提交 web 服务的“调用”按钮时（在会话超时和文件夹被删除之后），它的会话**在我设置的超时之前立即****开始**（创建文件夹）并**结束**（删除文件夹） 。

 ****为什么会发生这种情况？**

如果我为每个方法调用打开一个新窗口（新会话），一切都很好。但是当我第二次单击“调用”按钮时出现问题。这类似于相同会话的缓存问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:28:49.453

看看[这个帖子](http://www.thecodeking.co.uk/2011/08/why-sessionend-is-sometimes-called.html)，我相信你的问题可能是相似的：

*   客户端为过期会话发送带有 Session Id 的 cookie
*   服务器创建一个新会话，重用客户端发送的 id
*   如果请求没有访问会话，则立即放弃会话。

您的 WebMethod 是否实际访问 Session 状态？如果没有，请尝试添加对虚拟会话变量的访问。

**更新：**

**Global.asax**中的这些代码行解决了这个问题：

```
 void Session_Start(object sender, EventArgs e)
 {
     Session["dummy"] = "dummy session for solving immediate session expire";
 } 
```

**更新 2**

就我个人而言，我不会在 Session_Start 中创建目录；相反，我有一个方法，类似于`EnsureMyPacksFolder`在尝试访问文件夹之前应用程序需要调用的方法。这看起来像下面这样，避免了对“虚拟”会话变量的需要，并且意味着该文件夹仅在实际需要时才创建。

全球.asax：

```
void Session_Start(object sender, EventArgs e)
{
     // No code needed in Session_Start
}

void Session_End(object sender, EventArgs e)
{
    if (Session["MyPacksFolder"] != null)
    {
        // Folder has been created, delete it
        // ... add code to delete folder as above
    }
} 
```

别的地方：

```
public static void EnsureMyPacksFolder()
{
    if (Session["MyPacksFolder"] == null)
    {
        // Add code to create MyPacksFolder that was previously in Session_Start

        Session["MyPacksFolder"] = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:45:19.617

您是否将以下内容添加到您的 WebMethods 中？

```
[WebMethod (EnableSession = true)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:52:56.540

如果您在 Web 服务路径下创建和删除文件夹，iis 会立即重新启动。看看这篇[文章](https://stackoverflow.com/questions/2248825/asp-net-restarts-when-a-folder-is-created-renamed-or-deleted)。**

# php - 如何传递变量以在表单上添加 if 条件

> ID：11374586
> 
> 赞同：2
> 
> 时间：2012-07-07T11:27:22.803
> 
> 标签：php, symfony, twig, symfony-forms

我正在使用 Symfony2。我有一个 EMPLOYEE 实体（其中有一个字符串字段“类别”）和一个合同实体。

所以，这是我的问题：

编辑员工后，我可以为他编辑合同。

如果员工属于类别 == '工人'，并且如果类别 = 'CEO'，我不想显示此字段，我想在我的合同表单中添加字段“薪水”。

这是我的 ContractType ：

 `````
class ContractType extends AbstractType
 {
    protected $employee;

    function __construct(MyBundle\Entity\Employee $employee = null) {
    $this->employee = $employee;
     }

    public function buildForm(FormBuilder $builder, array $options) {
    $builder
        ->add('startDate');

        if ($this->employee !== null && $this->employee->getCategory() == 'worker') 
        {
            $builder
           ->add('salary', 'money', array('currency' => 'USD', 'required' =>false));                            
        }

        elseif ($this->employee !== null && $this->employee->getCategory() == 'CEO') 
        {
            $builder->add('salary', 'hidden', array('required' => false));

        }
    }
} 
````  `这是我的 contract_form.html.twig ：

 `````
 {% if employee.category == 'worker'%}
   <tr>
    <td>{{ form_label(form.salary, "Salary : ") }}</td>
    <td>{{ form_widget(form.salary) }}</td>
   </tr>
 {% endif %} 
```

After editing a employee and setting him category=='worker', when I want to edit him a contract, I have the error :

 ````
 Method "salary" for object "Symfony\Component\Form\FormView" does not exist in MyBundle:Contract:contract_form.html.twig" 
````  `我被这个错误困住了，我不明白我的代码有什么问题

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:33:33.223

您要做的是根据您的员工实体动态构建您的合同表格。IMO，您应该使用解决此用例的表单事件。

[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:11:04.293

您必须在 FormView 对象上实现`buildView`和设置变量。这是一个关于如何从[`CollectionType`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/CollectionType.php#L49).`````

# php - 如何从一个数据库中选择并在单个查询中插入另一个数据库，在 php 中使用不同的数据库连接

> ID：11374589
> 
> 赞同：0
> 
> 时间：2012-07-07T11:27:37.227
> 
> 标签：php, mysql, phpmyadmin, mysqli

```
mysql_connect("localhost","root","");
mysql_select_db("database1");
mysql_query("INSERT INTO database2.categories (category_name,description,group_id,created)
  SELECT table1.name, table1.description, 12, UNIX_TIMESTAMP()
  FROM GiveArang_categories Where `p_id`= '225' "); 
```

我需要将数据插入到从第一个数据库中选择的第二个数据库中。两个数据库有不同的连接。它需要在 php 中在单个查询中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:48:24.927

这样做的唯一方法（据我所知）是通过两个单独的连接。

像这样的东西：

```
mysql_connect("localhost","root","");
mysql_select_db("database2");
mysql_query("INSERT INTO database2.categories (category_name,description,group_id,created)");
mysql_close();

mysql_connect("localhost","root","");
mysql_select_db("database1");
mysql_query("SELECT table1.name, table1.description, 12, UNIX_TIMESTAMP() FROM GiveArang_categories Where `p_id`= '225' ");
mysql_close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:34:41.017

不幸的是，在 MySql 中没有等效的 Oracle dblink（这是您在 Oracle 数据库中的单个查询中连接到另一个数据库所需的）。

另请参阅[此](https://stackoverflow.com/questions/6530252/database-link-between-two-mysql-servers-running-in-two-different-locations)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:35:49.473

您可以弹出一个[MySQL 代理](https://launchpad.net/mysql-proxy)来坐在您的服务器和数据库框之间，这将允许您将它们视为在同一台服务器上。然后，您可以`databasename.tablename`在查询中使用通过相同的连接来识别不同的数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-22T11:24:15.257

如果两个数据库都在同一个 mysql-server 上，你可以这样记：

```
mysql_connect("localhost","root","");
mysql_query("INSERT INTO database2.categories (category_name,description,group_id,created)
  SELECT database1.table1.name, database1.table1.description, 12, UNIX_TIMESTAMP()
  FROM database1.GiveArang_categories Where database1.GiveArang_categories.p_id= '225' "); 
```

# objective-c - 如何使用带有 AES 加密的十六进制十进制密钥？

> ID：11374591
> 
> 赞同：1
> 
> 时间：2012-07-07T11:27:42.193
> 
> 标签：objective-c, c, aes

我的问题是我需要使用以下十六进制密钥进行加密，但它假定它是一个字符串？

键 = 0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11

我曾尝试在 CCrypt 函数中使用 [key bytes] 而不是 keyptr，但它不起作用......

```
 - (NSData *)AES128EncryptWithKey:(NSString *)key theData:(NSData *)Data {

// 'key' should be 32 bytes for AES256, will be null-padded otherwise
char keyPtr[kCCKeySizeAES128]={'1'};; // room for terminator (unused) // oorspronkelijk 256
bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

// fetch key data
[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

NSLog(@"keyPtr %s",keyPtr);

NSUInteger dataLength = [Data length];

//See the doc: For block ciphers, the output size will always be less than or 
//equal to the input size plus the size of one block.
//That's why we need to add the size of one block here
size_t bufferSize = dataLength + kCCBlockSizeAES128;
void *buffer = malloc(bufferSize);

size_t numBytesEncrypted = 0;

CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionECBMode,
                                      keyPtr, 
                                      kCCKeySizeAES128, // oorspronkelijk 256
                                      nil, /* initialization vector (optional) */
                                      [Data bytes], 
                                      dataLength, /* input */
                                      buffer, 
                                      bufferSize, /* output */
                                      &numBytesEncrypted);

if (cryptStatus == kCCSuccess) {
    NSLog(@"Encrypt SUCCESS");
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
}

free(buffer); //free the buffer;
return nil; 
```

}

```
- (NSData *)AES128DecryptWithKey:(NSString *)key theData:(NSData *)Data{

// 'key' should be 32 bytes for AES256, will be null-padded otherwise
char keyPtr[kCCKeySizeAES128+1]; // room for terminator (unused) // oorspronkelijk 256
bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

// fetch key data
[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSASCIIStringEncoding];

NSUInteger dataLength = [Data length];

//See the doc: For block ciphers, the output size will always be less than or 
//equal to the input size plus the size of one block.
//That's why we need to add the size of one block here
size_t bufferSize = dataLength + kCCBlockSizeAES128;
void *buffer = malloc(bufferSize);

size_t numBytesDecrypted = 0;
CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionECBMode+kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES128, // oorspronkelijk 256
                                      NULL /* initialization vector (optional) */,
                                      [Data bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesDecrypted);

if (cryptStatus == kCCSuccess) {
    NSLog(@"Decrypt SUCCESS");
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
}

free(buffer); //free the buffer;
return nil; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:28:06.193

您可以使用`NSScanner`，如下所示：

```
NSString *keyStr = @"0x11,0x12,0x13,0x14,0x13,0x1a,0x1b,0x1c,0x1f,0x11,0x11,0x11,0x11,0x11,0x11,0xfe";
NSScanner *scan = [NSScanner scannerWithString:keyStr];
[scan setCharactersToBeSkipped:[NSCharacterSet characterSetWithCharactersInString:@","]];
unsigned int tmp;
char key[16];
for (int i = 0 ; i != 16 ; i++) {
    [scan scanHexInt:&tmp];
    key[i] = (char)tmp;
} 
```

此时，数组`key`包含从十六进制转换为字节的 16 个字节的密钥。

# cryptography - 为什么我们需要 Diffie Hellman？

> ID：11374592
> 
> 赞同：3
> 
> 时间：2012-07-07T11:27:46.890
> 
> 标签：cryptography, diffie-hellman

**Diffie–Hellman仅在**双方经过身份验证时才提供安全密钥交换。对于身份验证，双方使用公钥/私钥。因此，如果 A 方知道 B 方的公钥，那么 A 可以简单地使用该密钥来加密消息（或新的会话密钥）。为什么要使用单独的密钥交换算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:37:14.100

Diffie Hellman 旨在交换共享密钥。所以这个问题可以改写为：`Why would I want to use a shared key, when public/private key pairs offers encrpytion and ease of sharing public keys?`

共享密钥相对于公钥/私钥的好处是：

*   与公钥/私钥算法相比，共享密钥具有更快的算法，因此需要更少的处理能力。

*   如果证书颁发机构受到威胁，攻击者可能会在使用公钥/私钥加密时冒充：请参阅[DigiNotar 案例](http://en.wikipedia.org/wiki/Diginotar#Issuance_of_fraudulent_certificates)。

# c# - 确定是否从字节数组加载程序集

> ID：11374596
> 
> 赞同：1
> 
> 时间：2012-07-07T11:28:08.837
> 
> 标签：c#, reflection, .net-assembly

给定一个 Assembly 对象，如何判断这个程序集是否被加载`Assembly.Load(byte[])`？

目前，我使用`Module.FullyQualifiedName`. 根据 MSDN：

> 如果此模块的程序集是从字节数组加载的，则该模块的完全限定名称将为：<Unknown>。

但显然该值取决于系统的语言......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:56:49.667

怎么样`bool isFromBytes = module.FullQualifiedName.StartsWith("<")`

# android - Spring Social webapp的Android facebook登录

> ID：11374602
> 
> 赞同：4
> 
> 时间：2012-07-07T11:29:22.380
> 
> 标签：android, facebook, spring, spring-social

我目前正在使用 Spring Social 和 Spring Security 开发 Web 应用程序。在 Web 应用程序中，特定用户可以使用`ProviderSignInController`. 当工作人员成功通过 FB 进行身份验证时，他们也会以编程方式使用 Spring Security 登录我的本地 web 应用程序。这个概念改编自[spring-social-showcase](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase)。然后，Spring Social 允许经过身份验证的用户创建事件，这些事件也是在 facebook 页面上创建的。

现在我想编写一个 android 应用程序，使用户能够通过我的 Web 应用程序发布到我的留言簿并查看/创建事件。我现在的问题是如何实现我的安卓应用程序的登录。在我的 Web 应用程序中，`UsersConnectionRepository`将 facebook 帐户映射到本地帐户。我可以像从 Web 应用程序一样，简单地重用这些数据并从我的 android 应用程序登录吗？ 添加重定向到 facebook 登录页面`ProviderSignInController`的路径映射。`http://_webapp_/signin/facebook`这可以简单地通过 android 上的 WebView 来完成吗？

看着[spring-android-facebook-client](https://github.com/SpringSource/spring-android-samples/tree/master/spring-android-facebook-client)我很困惑。此示例似乎手动管理 OAuth 身份验证。但是我还没有弄清楚，当后台没有其他 Web 应用程序已经管理身份验证时，这是要走的路还是只是实现它的另一种可能性。

欢迎任何反馈。谢谢。

吉普

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T16:52:45.830

> 现在我想编写一个 android 应用程序，使用户能够通过我的 Web 应用程序发布到我的留言簿并查看/创建事件。

Android 客户端需要一种方法来登录您的 Web 应用程序，以便发布到安全的 RESTful 端点，而 OAuth 是执行此操作的好方法。Spring Security OAuth 是 Spring Security 的扩展，可以允许第三方移动或 Web 客户端与您的网站进行交互。

配置好 OAuth 服务器后，您可以在 Android 客户端中使用 Spring Social 创建自定义提供程序，以建立到您的网站的 OAuth 连接。在这种情况下，您的用户将使用他们的本地凭据对您的网站进行身份验证。连接后，您的 Android 应用程序可以将事件发布到您网站内的 RESTful 端点，再次使用您的自定义 Spring Social API 绑定。

在这种情况下，您的用户不会从 Android 应用程序向 Facebook 进行身份验证。这假设他们已经在您的网站上建立了一个帐户和与 Facebook 的连接。事实上，这就是 SpringSource [Greenhouse](https://github.com/SpringSource/greenhouse)参考应用程序的工作方式。

这使我们回到您问题的前一部分：

> 当工作人员成功通过 FB 进行身份验证时，他们也会以编程方式使用 Spring Security 登录我的本地 web 应用程序。

如果我理解正确，您要求授权您的 Android 客户端使用 Facebook 凭据访问您的第三方网站。虽然这当然是可能的，但目前不支持 Spring Social 和 Spring for Android。

另一种选择是考虑您的网站的移动版本。这样，Android 和其他移动设备就可以像从普通浏览器一样使用他们的 Facebook 凭据简单地登录到您的网站。UI 将更适合移动设备，并且会消除额外的 OAuth 服务器/客户端配置的额外复杂性。

最后，解决您问题的最后一部分。这确实是与前面部分不同的问题：

> 此示例似乎手动管理 OAuth 身份验证。

主要问题是 Spring Social 还不支持 Resource Owner Credentials Grant (ROCG)。添加此功能将简化在 Android 上为 Facebook 获取访问令牌的过程，因为您不必处理浏览器重定向。有关更多信息，请参阅此[Spring Social 问题](https://jira.springsource.org/browse/SOCIAL-305)。

由于缺少 ROCG，Spring for Android 示例应用程序说明了一种使用 Spring Social 获取访问令牌的方法。在这种情况下，它是客户端身份验证流程的修改版本。作为参考，Facebook 有一个有用的页面描述了所有可用的[身份验证方法](http://developers.facebook.com/docs/authentication/)。成功认证后，webview 重定向到一个 url，此时应用程序能够从该 url 检索访问令牌。

SpringSource 正在讨论如何在未来的版本中简化身份验证并改进 Spring Social 和 Spring for Android 之间的这部分集成。

# javascript - Firebug 控制台堆栈跟踪

> ID：11374603
> 
> 赞同：1
> 
> 时间：2012-07-07T11:29:24.610
> 
> 标签：javascript, firefox, firebug

如何使用 Firebug 的错误控制台获取堆栈跟踪？

我尝试了以下测试：

```
<!DOCTYPE html>
<html>
<head>

<script type = "text/javascript">

function f3() { console.trace(); }

function f2() { f3(); }

function f1() { f2(); }

</script>
</head>
<body onLoad = "f1()">
</body>
</html> 
```

这个测试简单地调用了 3 个不同的函数，创建了一个 3 层深的堆栈。第三个函数只是打印出一个堆栈跟踪。但是，Firebug 控制台不显示任何内容：

```
[07:26:47.955] GET http://mydomain.com/test.html [HTTP/1.0 200 OK 23ms] 
```

我还需要做些什么才能使堆栈跟踪正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:37:04.070

有趣的事实：当我运行您的代码时，我在 safari 中得到以下堆栈跟踪：

![在此处输入图像描述](../Images/9f92453c4551daf876a57354df287671.png)

但是当我运行这个

```
<!DOCTYPE html>
<html>
<head>
<body>
  <script type = "text/javascript">
    function f3() { console.trace(); }
    function f2() { f3(); }
    function f1() { f2(); }
    f1();
  </script>
</body>
</html> 
```

堆栈跟踪如下所示：

![在此处输入图像描述](../Images/28aa2a9d22af0633f44462417661fa66.png)

也许这里正在进行一些奇怪的优化？

# mysql - 复杂的 SQL 枢轴

> ID：11374606
> 
> 赞同：0
> 
> 时间：2012-07-07T11:29:45.907
> 
> 标签：mysql, sql, pivot-table

所以我有一个从 4 个表中选择数据的查询：

*   案例
*   分类法（包含有关分类法的标题和数据）
*   taxonomy_values（分类的可能值）
*   post_taxonomy_values（保存案例表中的 ID 和分类表中的 ID 以链接两者）

我试图从案例表中选择一行，然后获取所有分类名称及其值。这是我到目前为止所得到的：

```
select 
cases.title, cases.content, cases.status, taxonomies.title as 'taxonomy', taxonomy_values.value as 'taxonomy_value'

from cases, post_taxonomy_values, taxonomies, taxonomy_values 

where 
cases.slug = 'b-v-dpp' and
post_taxonomy_values.post = cases.id and
taxonomies.id = post_taxonomy_values.taxonomy and
taxonomy_values.id = post_taxonomy_values.value 
```

但这就是产生的结果： ![当前查询结果](../Images/4a3fc944366daf487b6a844e5002b81d.png)

所以基本上我想要的是采用分类名称并将它们设为列名，并将它们的值设置为返回行的一部分。

这是表的结构：

**案例：**

![案例表](../Images/131d21d44eb65e47fa207dc02b60a311.png)

**分类法：**

![分类表](../Images/e79ac02dd8a0f23fd7939b138695ae48.png)

**taxonomy_values**（'taxonomy' 引用分类表中的 ID）：

![taxonomy_values 表](../Images/03274aee47b293983d567591c41ae2ab.png)

**post_taxonomy_values**（'taxonomy' 引用分类表中的 ID，'value' 引用 taxonomy_values 表中的 ID）：

![post_taxonomy_values 表](../Images/15af5c444edf11da18f08ec1e4a1c0d4.png)

我已经编写并重新编写了这个查询，但我无法解决这个问题，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:44:59.977

这应该可以解决问题

```
select 
cases.title, cases.content, cases.status, 
max(case when post_taxonomy_values.post = cases.id and taxonomies.title = 'Tags' then taxonomies.title else '' end) as Tags,
max(case when post_taxonomy_values.post = cases.id and taxonomies.title = 'Tags' then taxonomy_values.value.value else '' end) as Tags_value,
max(case when post_taxonomy_values.post = cases.id and taxonomies.title = 'Court' then taxonomies.title else '' end) as Court,
max(case when post_taxonomy_values.post = cases.id and taxonomies.title = 'Court' then taxonomy_values.value.value else '' end) as Court_value,
.
.
.

from cases, post_taxonomy_values, taxonomies, taxonomy_values 
where 
cases.slug = 'b-v-dpp' and
taxonomies.id = post_taxonomy_values.taxonomy and
taxonomy_values.id = post_taxonomy_values.value
group by cases.title, cases.content, cases.status 
```

# ios - UIButton的点击动作？

> ID：11374608
> 
> 赞同：2
> 
> 时间：2012-07-07T11:30:07.770
> 
> 标签：ios, xcode

我正在关注一本书来学习 IO 编程。对于 UIButton，它应该有一个点击动作。但是我只看到了一些动作，比如着陆等。

另外，想知道为什么默认操作不是“touch down”而是“touchUpInside”

我正在使用 XCode 4.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T11:31:28.240

表示 iOS 中的单击操作，但是`touchUpInside`，因为单击是鼠标事件

touchUpInside, 表示用户在一个按钮上触摸，然后触摸，而他仍然在同一个按钮上，这是您想要点击按钮时的正常行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:37:20.253

在情节提要中，您可以右键单击`UIButton`并查看可用于 UIButton 的事件列表，然后根据您的要求选择适当的事件。

对于类似点击的操作，您可以使用`Touch Up Inside`事件。

# java - 是否存在评估 java 项目的 2 个不同 svn 版本之间“编程工作量”的指标？

> ID：11374609
> 
> 赞同：1
> 
> 时间：2012-07-07T11:30:09.817
> 
> 标签：java, svn, netbeans, netbeans-7, metrics

我正在将一个项目（以前由另一个程序员开发）升级到新版本。目的是实现新功能。该项目是用 Java 编写的，我使用 Netbeans 7.1.2 作为 IDE 和 Svn 作为版本控制软件。

是否存在一个插件或软件来分析项目的原始版本和我的上一个版本，给出我的一些努力的统计数据？（例如代码行总数、类总数等方面的差异）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:47:31.573

[StatSVN](http://statsvn.org/)非常擅长这一点！我在我的最后一个 Java 项目中使用它来查看我的团队的工作（谁在修复代码行，谁在添加新代码等等）

# php - Wordpress - category__in 未在 $wp_query 上列出 SEO 网址

> ID：11374616
> 
> 赞同：0
> 
> 时间：2012-07-07T11:31:52.713
> 
> 标签：php, wordpress

我有一个非常简单的插件：

```
add_action('pre_get_posts', 'post_page');

function post_page()
{

 global $wp_query;      
 if(is_category())
 {
    echo '<pre>';
    print_r($wp_query);
    exit;
 }

} 
```

我必须在我的插件中获取类别 ID。我没有 SEO 网址，但 category__in 没有 SEO 网址

没有 SEO 友好的 url（category__in 不为空）：

[http://phpxpert.com/?cat=3](http://phpxpert.com/?cat=3)

使用 seo 友好的 url（category__in 为空）：

[http://phpxpert.com/category/jquery/](http://phpxpert.com/category/jquery/)

为什么会发生这种情况，如何在我的插件中获取 post_id 和 category_ids？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:41:43.070

您可能会发现`category_name`变量中使用的类别。然后，您可以使用[`get_term_by`](http://codex.wordpress.org/Function_Reference/get_term_by)获取有关该类别的更多信息。

# c++ - 在 C++ 中读取格式化输入的最简单方法是什么？

> ID：11374617
> 
> 赞同：19
> 
> 时间：2012-07-07T11:31:57.320
> 
> 标签：c++, input, formatted

有没有办法读取这样的格式化字符串，例如`:48754+7812=Abcs`.

假设我有三个 stringz X、Y 和 Z，我想要

```
X = 48754 
Y = 7812
Z = Abcs 
```

两个数字的大小和字符串的长度可能会有所不同，所以我不想使用`substring()`或类似的东西。

是否可以给 C++ 一个像这样的参数

```
":#####..+####..=SSS.." 
```

所以它直接知道发生了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-07T11:40:50.297

```
#include <iostream>
#include <sstream>

int main(int argc, char **argv) {
  std::string str = ":12341+414112=absca";
  std::stringstream ss(str);
  int v1, v2; 
  char col, op, eq; 
  std::string var;
  ss >> col >> v1 >> op >> v2 >> eq >> var;
  std::cout << v1 << " " << v2 << " " << var << std::endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-07T11:35:25.930

一种可能性是[`boost::split()`](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/usage.html#id3184031)，它允许指定多个分隔符并且不需要事先知道输入的大小：

```
#include <iostream>
#include <vector>
#include <string>

#include <boost/algorithm/string.hpp>
#include <boost/algorithm/string/split.hpp>

int main()
{
    std::vector<std::string> tokens;
    std::string s(":48754+7812=Abcs");
    boost::split(tokens, s, boost::is_any_of(":+="));

    // "48754" == tokens[0]
    // "7812"  == tokens[1]
    // "Abcs"  == tokens[2]

    return 0;
} 
```

或者，使用[`sscanf()`](http://en.cppreference.com/w/c/io/fscanf)：

```
#include <iostream>
#include <cstdio>

int main()
{
    const char* s = ":48754+7812=Abcs";
    int X, Y;
    char Z[100];

    if (3 == std::sscanf(s, ":%d+%d=%99s", &X, &Y, Z))
    {
        std::cout << "X=" << X << "\n";
        std::cout << "Y=" << Y << "\n";
        std::cout << "Z=" << Z << "\n";
    }

    return 0;
} 
```

但是，这里的限制是`Z`必须在解析输入之前确定字符串 ( ) 的最大长度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-07T11:44:07.060

您可以使用`scanf`. 它并不过分 C++ - ish，但它用非常少的代码行就可以解决问题：

```
char a[101], b[111], c[121];
sscanf(":48754+7812=Abcs", ":%100[^+]+%110[^=]=%120s", a, b, c);
string sa(a), sb(b), sc(c);
cout << sa << "-" << sb  << "-" << sc << endl; 
```

这个想法是指定您使用非常有限的正则表达式语法读取的字符串所接受的字符。在这种情况下，第一个字符串被读取到加号，第二个字符串被读取到等号。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-07T11:40:04.780

例如。

```
#include <boost/regex.hpp>
#include <iostream>

int main()
{
   boost::regex re("\":(\\d+)\\+(\\d+)=(.+)\"");
   std::string example = "\":48754+7812=Abcs\"";
   boost::smatch match;
   if (boost::regex_match(example, match, re))
   {
      std::cout << "f number: " << match[1] << " s number: " << match[2] << " string: " << match[3]
      << std::endl;
   }
   else
   {
      std::cout << "not match" << std::endl;
   }
} 
```

第二个变体，仅适用于字符串。

```
#include <string>
#include <iostream>

int main()
{
   std::string s = "\":48754+7812=Abcs\"";
   std::string::size_type idx = s.find(":");
   std::string::size_type end_first = s.find("+", idx + 1);
   std::string f_number = s.substr(idx + 1, end_first - (idx + 1));
   std::cout << f_number << std::endl;
   std::string::size_type end_second = s.find("=", end_first + 1);
   std::string s_number = s.substr(end_first + 1, end_second - (end_first + 1));
   std::cout << s_number << std::endl;
   std::string::size_type string_end = s.find("\"", end_second);
   std::string str = s.substr(end_second + 1, string_end - (end_second + 1));
   std::cout << str << std::endl;
} 
```

# android - Android中的sqlite异常处理

> ID：11374620
> 
> 赞同：0
> 
> 时间：2012-07-07T11:32:29.477
> 
> 标签：android, sqlite

我正在开发一个在 sqlite 中存储一些数据的应用程序，同时创建表 android 会引发异常：

```
Failure 1 : Syntax error  near table1\. on Ox12d510 
```

我无法确定我做错了什么。源代码：

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class MySQLiteHelper extends SQLiteOpenHelper {

    public static final String DATABASE_NAME = "bedekar12.db";  
    public static final int DATABASE_VERSION = 1;

    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_1 = "column1";
    public static final String PRODUCT_NAME = "product_name";
    public static final String PRODUCT_CATEGORY = "product_category";
    public static final String ORDER_ID = "order_id";
    public static final String ORDER_DATE = "order_date";
    public static final String CUSTOMER_ID = "customer_id";
    public static final String TOTAL = "total";
    public static final String SALESMAN_ID = "salesman_id";
    public static final String ORDER_STATUS = "order_status";
    public static final String PRODUCT_ID = "product_id";
    public static final String PACKAGE_ID = "package_id";
    public static final String QUANTITY = "quantity";
    public static final String PACKGAGE = "package";
    public static final String WEIGHT = "weight";
    public static final String PRICE = "price";
    public static final String CUSTOMER_NO = "customer_no";
    public static final String CUSTOMER_NAME = "customer_name";
    public static final String CUSTOMER_ADD = "customer_add";
    public static final String CUSTOMER_CITY = "customer_city";
    public static final String CUSTOMER_REGION = "customer_region";
    public static final String CUSTOMER_POSTAL = "customer_postal";
    public static final String CONTACT = "contact";
    public static final String CUSTOMER_TITLE = "customer_title";
    public static final String CUSTOMER_PHONE = "customer_phone";
    public static final String CUSTOMER_EMAIL = "customer_email";
    public static final String LAT = "lat";
    public static final String LNG = "lng";
    public static final String EVENTS_DATE = "events_date";
    public static final String EVENTS_MSG = "events_msg"; 

    // 1\. News Table
    public static final String NEWS_TABLE = "news_table";
    public static final String NEWS_CREATE = "create table " + NEWS_TABLE + " ( "
                                        + COLUMN_ID + " integer primary key , "
                                        + COLUMN_1 + " text not null ); ";

    // 2\. product table
    public static final String PRODUCT_TABLE = "product_table";
    public static final String PRODUCT_CREATE = "create table " + PRODUCT_TABLE + " ( "
                                        + COLUMN_ID + " integer primary key , "
                                        + PRODUCT_ID + " text not null, "
                                        + PRODUCT_NAME + " text not null, "
                                        + PRODUCT_CATEGORY + " text not null ); "; 
    // 3\. order table
    public static final String ORDER_TABLE = "order_table";
    public static final String ORDER_CREATE = "create table " + ORDER_TABLE + " ( "
                                        + COLUMN_ID + " integer primary key, "
                                        + ORDER_ID + " text not null, "
                                        + ORDER_DATE + " text not null, "
                                        + CUSTOMER_ID + " text not null, "
                                        + TOTAL + " text not null, "
                                        + SALESMAN_ID + " text not null, "
                                        + ORDER_STATUS + " text not null ); ";

    // 4\. return order table
    public static final String RETURN_ORDER_TABLE = "return_order_table";
    public static final String RETURN_ORDER_CREATE = "create table " + ORDER_TABLE + " ( "
                                        + COLUMN_ID + " integer primary key, "
                                        + ORDER_ID + " text not null, "
                                        + ORDER_DATE + " text not null, "
                                        + CUSTOMER_ID + " text not null, "
                                        + TOTAL + " text not null, "
                                        + SALESMAN_ID + " text not null, "
                                        + ORDER_STATUS + " text not null ); ";

    // 5\. OrderDetails Table
    public static final String ORDER_DETAILS_TABLE = "details_table";
    public static final String ORDER_DETAILS_CREATE = "create table " + ORDER_DETAILS_TABLE + " ( "
                                        + COLUMN_ID + " integer primary key , "
                                        + ORDER_ID + " text not null, "
                                        + PRODUCT_ID + " text not null, "
                                        + PACKAGE_ID + " text not null, "
                                        + QUANTITY + " text not null, "
                                        + PRICE + " text );";

    // 6\. Return OrderDetails Table
    public static final String RETURN_ORDER_DETAILS_TABLE = "return_details_table";
    public static final String RETURN_ORDER_DETAILS_CREATE = "create table " + ORDER_DETAILS_TABLE + " ( "
                                        + COLUMN_ID + " integer primary key, "
                                        + ORDER_ID + " text not null, "
                                        + PRODUCT_ID + " text not null, "
                                        + PACKAGE_ID + " text not null, "
                                        + QUANTITY + " text not null, "
                                        + PRICE + " text );";

    // 7\. Package table
    public static final String PACKAGING_TABLE = "packaging_table";
    public static final String PACKAGING_CREATE = "create table " + PACKAGING_TABLE + " ( "
                                        + COLUMN_ID + " integer primary key, " 
                                        + PRODUCT_ID + " text not null, "
                                        + PACKAGE_ID + " text not null, "
                                        + PACKGAGE + " text not null, "
                                        + WEIGHT + " text not null, "
                                        + QUANTITY + " text not null, "
                                        + PRICE + " text not null );";

    // 8\. Customer table
    public static final String CUSTOMER_TABLE = "customer_table";
    public static final String CUSTOMER_CREATE = "create table " + CUSTOMER_TABLE + " ( "
                                        + COLUMN_ID + " integer primary key, "
                                        + CUSTOMER_NAME + " text not null, "
                                        + CUSTOMER_ADD + " text not null, "
                                        + CUSTOMER_CITY + " text not null, "
                                        + CUSTOMER_REGION + " text not null, "
                                        + CUSTOMER_POSTAL + " text not null, "
                                        + CONTACT + " text not null, "
                                        + CUSTOMER_TITLE + " text not null, "
                                        + CUSTOMER_PHONE + " text not null, "
                                        + CUSTOMER_EMAIL + " text not null, "
                                        + LAT + " text not null, "
                                        + LNG + " text not null ); ";

    // 9\. Event table;
        public static final String EVENTS_TABLE = "events_table";
        public static final String EVENTS_CREATE = "create table " + EVENTS_TABLE + " ( "
                                            + COLUMN_ID + " integer primary key, "
                                            + EVENTS_DATE + " text not null, "
                                            + EVENTS_MSG + " text not null ); ";

    public MySQLiteHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(NEWS_TABLE);
        db.execSQL(PRODUCT_TABLE);
        db.execSQL(ORDER_TABLE);
        db.execSQL(RETURN_ORDER_TABLE);
        db.execSQL(ORDER_DETAILS_TABLE);
        db.execSQL(RETURN_ORDER_DETAILS_TABLE);
        db.execSQL(PACKAGING_TABLE);
        db.execSQL(CUSTOMER_TABLE);
        db.execSQL(EVENTS_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int version1, int version2) {
        db.execSQL("DROP TABLE IF EXISTS " + NEWS_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + PRODUCT_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + ORDER_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + RETURN_ORDER_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + ORDER_DETAILS_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + RETURN_ORDER_DETAILS_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + PACKAGING_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + CUSTOMER_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + EVENTS_TABLE);
        onCreate (db);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:14:40.170

您在`onCreate`方法中使用了错误的字符串...您只提供表名，而不是创建表的字符串。

改变这个：

```
@Override 
public void onCreate(SQLiteDatabase db) { 
    db.execSQL(NEWS_TABLE); 
    db.execSQL(PRODUCT_TABLE); 
    db.execSQL(ORDER_TABLE); 
    db.execSQL(RETURN_ORDER_TABLE); 
    db.execSQL(ORDER_DETAILS_TABLE); 
    db.execSQL(RETURN_ORDER_DETAILS_TABLE); 
    db.execSQL(PACKAGING_TABLE); 
    db.execSQL(CUSTOMER_TABLE); 
    db.execSQL(EVENTS_TABLE); 
} 
```

对此：

```
@Override 
public void onCreate(SQLiteDatabase db) { 
    db.execSQL(NEWS_CREATE); 
    db.execSQL(PRODUCT_CREATE); 
    db.execSQL(ORDER_CREATE); 
    db.execSQL(RETURN_ORDER_CREATE); 
    db.execSQL(ORDER_DETAILS_CREATE); 
    db.execSQL(RETURN_ORDER_DETAILS_CREATE); 
    db.execSQL(PACKAGING_CREATE); 
    db.execSQL(CUSTOMER_CREATE); 
    db.execSQL(EVENTS_CREATE); 
} 
```

作为旁注，应调用所有主键`_id`以方便与 android 小部件一起使用。他们都希望这是主键的名称（它被编码到小部件中，因此当您执行列表之类的操作时，他们可以识别哪些数据来自哪些记录）。

最后一点，使用 id 的功能也更容易，`autoincrement`这样您就不必手动管理主键。

# mysql - 我怎么知道我的执行语句工作正常？

> ID：11374621
> 
> 赞同：0
> 
> 时间：2012-07-07T11:32:41.580
> 
> 标签：mysql, groovy

我是 Groovy 的新手，我有一个疑问。假设我正在做这样的事情：

```
db.execute '''
   //my sql commands
''' 
```

以编程方式，我怎样才能发现我的`execute`方法成功了？

我试过这样：

```
def status = db.execute '''
       //my sql commands
    ''' 
```

但即使数据已插入数据库（我在我的 mysql 客户端中查看过），`status`返回`false`. 这让我很困惑。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:24:20.553

我假设您使用的是[groovy.sql.Sql](http://groovy.codehaus.org/gapi/groovy/sql/Sql.html#execute%28java.lang.String%29)对象。如果您查看 execute() 方法的 API（之前链接过），它表示它将返回`false`行计数返回值或无结果返回值。

由于您提到了插入语句，请通过以下方式检查您的行数：

```
if (db.updateCount() > 0) { /* success! */ } 
```

# c++ - XML<->SQLite 数据转换 C++ Linux

> ID：11374624
> 
> 赞同：0
> 
> 时间：2012-07-07T11:32:58.370
> 
> 标签：c++, xml, sqlite

我必须将 XML 数据转换为 SQLite，然后对该 SQLite 数据运行一些查询并将查询结果转换回 XML。我们是否有任何 C++ 库来解决这个问题。我正在使用 Linux 操作系统。

问候，迪内什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:39:57.530

你试过libxml++吗？ [http://developer.gnome.org/libxml++-tutorial/stable/](http://developer.gnome.org/libxml++-tutorial/stable/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T15:54:40.303

我不知道有一个图书馆在做这一切，如果是这样，那将是非常复杂的。我很确定您将需要使用两个不同的库：一个执行 XML 解析/写入，另一个执行 SQL 事务。这样你会有一个更好的设计——**关注点分离**。

libxml 和 libsqlite 是两个示例，它们可能可以在您当前的发行版中快速安装。例如`sudo apt-get install libsqlite3-dev libxml2-dev`

然后你可能想要：

1.  打开 xml，解析成 C++ 对象并存储在容器中，例如 std::vector，关闭 xml。
2.  打开一个新的 sqlite 数据库，创建一个可能更多的表，迭代您的 C++ 对象容器，在迭代时将值插入表中；
3.  对新表执行选择查询并读取结果集，用于存储/编辑 C++ 对象的每个结果；
4.  创建一个新的 xml 根对象，迭代新的/修改的 C++ 对象，并为每个对象添加一个新的 xml 节点到根，将 xml 树写入一个新文件。

希望这可以帮助。

# jquery - 列排序中的 jqueryui portlet

> ID：11374630
> 
> 赞同：3
> 
> 时间：2012-07-07T11:33:37.833
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery UI[可排序的 portlet](http://jqueryui.com/demos/sortable/#portlets)。jqueryui 可排序页面指的是您附加了事件处理程序的文档，如果 portlet 从一列移动到另一列，recieve 函数会处理这些内容，如下所示：

```
 $( ".column" ).sortable({
        connectWith: ".column",
        placeholder: 'ui-state-highlight',
        handle: 'h6',
        revert: true,
        receive: function(event, ui) {
         console.log(ui.item);
        }, 
         over: function(event, ui){
             console.log(ui.item);
        } 
```

如上所述的`over`功能，我认为如果元素在同一列中向上/向下移动，我会记录下来。但这不会发生。

那么，当一个 portlet 在同一列中向上/向下移动时，我如何获得一个事件。

一个简单的小提琴[位于此处](http://jsfiddle.net/rUbQL/2/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T09:39:22.140

您似乎正在寻找[change](http://jqueryui.com/demos/sortable/#event-change)事件，该事件在可排序元素的位置更新时触发，即使在同一列中也是如此：

```
$(".column" ).sortable({
    connectWith: ".column",
    placeholder: "ui-state-highlight",
    handle: "h6",
    revert: true,
    receive: function(event, ui) {
        console.log(ui.item);
    },
    change: function(event, ui) {
        console.log(ui.item);
    }
}); 
```

[你会在这里](http://jsfiddle.net/rUbQL/3/)找到一个更新的小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:51:30.923

事件`sort`似乎等同于`over`事件，但在一个列中。和之间的区别在于`sort`，`change`它`sort`在您移动元素`change`时触发，在您放开鼠标且元素固定到其位置后触发。

```
sort : function (event, ui) {
    console.log(ui.item);
} 
```

这些事件在[jQuery UI 页面](http://jqueryui.com/demos/sortable/#event-sort)上有很好的记录。浏览它们中的每一个，看看哪个最适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:50:20.537

更改功能可以解决问题。

```
$( ".selector" ).sortable({
   change: function(event, ui) { ... }
});
Bind to the change event by type: sortchange.
$( ".selector" ).bind( "sortchange", function(event, ui) {
  ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T10:12:59.613

我已经[分叉](http://jsfiddle.net/pgeXS/23/)了您的代码段以满足您的要求，它仅使用更改事件来达到目的。

这里的诀窍是在更改之前和之后跟踪 portlet 的*列*。（通过`hasColumnChange`函数完成）

使用 change 事件的缺点是它似乎触发了两次，我不知道为什么，但它应该让你满意。

# php - 将数据插入联结表

> ID：11374633
> 
> 赞同：0
> 
> 时间：2012-07-07T11:34:16.660
> 
> 标签：php, sql, database-design, phpmyadmin, many-to-many

这是我目前的桌子设计 ![在此处输入图像描述](../Images/3448af9ca268f7f281a2910df6a95fd3.png)

我有一个多对多的关系。

例如，我在音乐家表中创建/插入了一个条目，我如何实际传递从它生成的主键 (id) 并立即将其插入到音乐家 x_instrument 表中的字段 player_id 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:45:35.533

假设你使用 mysqli，你会得到如果使用[insert_id](http://www.php.net/manual/en/mysqli.insert-id.php)函数：

```
$query = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";
$mysqli->query($query);

printf ("New Record has id %d.\n", $mysqli->insert_id); 
```

然后将此 ID 插入连接表中，就像将任何其他数据插入任何其他表中一样。

# objective-c - 如何创建具有 5 个视图的基于选项卡栏的程序

> ID：11374634
> 
> 赞同：2
> 
> 时间：2012-07-07T11:34:22.107
> 
> 标签：objective-c, ios, c

我对 ObjectiveC 比较陌生，但不是我在 C 和 Python 方面都有经验的编程。我想知道如何制作一个底部有标签栏的应用程序，五个视图都带有标签和一定数量的文本。然后，我还想在其中一个文件上迁移图像，并在背景中打开音频。有谁知道如何做到这一点，我也愿意接受将使用 C 作为程序一部分的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:42:52.193

查看[此视频教程](http://irockios.com/?p=32)，然后对其进行修改以添加额外的几个视图控制器以连接到您的`UITabBarController`. 我尽量避免在 XCode 中使用 Tab Bar 模板，因为您没有包含 Core Data 堆栈的选项。即使您可能不认为自己会使用 CD，但拥有它还是很不错的，而且从一个空的应用程序开始使用 IMO 会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:52:28.590

由于您是 XCode/Objective C 的新手，我建议您在 XCode 中选择“选项卡式应用程序”创建一个新项目，玩转并了解加载的项目。

默认情况下，当项目加载时，您将仅获得 2 个标签栏项目，但您可以添加更多视图控制器并将它们与标签栏控制器相关联，以获得总共 5 个视图

您还可以根据需要更改每个选项卡栏项目的图像和文本。

我认为看这个视频教程：http://youtu.be/aorBSWbhGEE[将](http://youtu.be/aorBSWbhGEE)有助于快速理解它。您可以在 Youtube 上搜索更多类似的视频

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:39:05.893

启动 Xcode 并选择 file->new->new project->Tabbed Application

# hadoop - hadoop map reduce hive猪hbase的实际使用

> ID：11374635
> 
> 赞同：0
> 
> 时间：2012-07-07T11:34:25.680
> 
> 标签：hadoop

您好，我正在学习 Hadoop，在阅读了网上找到的资料（教程、map reduce 概念、Hive、Ping 等）并开发了一些小应用程序后，我想了解这些技术的实际用法。

我们使用的基于 Hadoop 堆栈的日常软件有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:56:08.407

如果你使用互联网，你会受到 Hadoop/MapReduce 间接影响，从 Google 搜索到 FaceBook 再到 LinkedIn 等。这里有一些有趣的链接可以了解 Hadoop/MR 的广泛使用情况

[学术论文中的 Mapreduce 和 Hadoop 算法（第 4 次更新 - 2011 年 5 月）](http://atbrox.com/2011/05/16/mapreduce-hadoop-algorithms-in-academic-papers-4th-update-may-2011/)

[大数据改变一切的 10 种方式](http://gigaom.com/2012/03/11/10-ways-big-data-is-changing-everything/)

需要注意的一点是 Hadoop/MR 并不是解决所有问题的有效解决方案。考虑其他分布式编程模型，例如基于[BSP](http://en.wikipedia.org/wiki/Bulk_synchronous_parallel)的那些。

快乐 Hadooping !!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T16:49:04.267

[以下](http://hadoopdeveloperguide.blogspot.in/)是一些对初学者有帮助的示例 mapreduce 示例。 1.Word Count 2.SQL Aggregation using Map reduce 3.SQL Aggregation on multiple fields using Map reduce

网址 - [http://hadoopdeveloperguide.blogspot.in/](http://hadoopdeveloperguide.blogspot.in/)

# cocoa-touch - 获取带有子视图的视图

> ID：11374639
> 
> 赞同：0
> 
> 时间：2012-07-07T11:35:23.140
> 
> 标签：cocoa-touch, uiview, touch

我想要一个顶视图（UIView 的子类），它使用

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
... 
```

。H

```
@interface XView : UIView<UITableViewDataSource, UITableViewDelegate>

@property (nonatomic, strong) UITableView * tableView;

@end 
```

这很好用，如果视图是空的，但是一旦我插入（addSubview）让我们说一个 UITableView

```
- (id)initWithFrame:(CGRect)frame 
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        self.tableView = [[UITableView alloc] initWithFrame:self.frame];

        self.tableView.delegate = self;
        self.tableView.dataSource = self;

        [self addSubview:self.tableView];

    }
    return self;
} 
```

比 XView 里面的触摸方法没有被触发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:45:08.610

你要么需要继承你的 UITableView 或者使用 UITapGestureRecognizer 来解决这个问题。我个人会使用 UITapGestureRecognizer。

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapCode:)];
[self.tableView addGestureRecognizer:tap]; 
```

然后你可以在这里处理你的水龙头：

```
- (void)tapCode:(UITapGestureRecognizer *)recognizer
{
    // code goes here
} 
```

如果你继承 UITableView，你可以把你的 touchesBegan:withEvent 放在那里。

# jquery - Bootstrap - 存在多个按钮时的数据切换属性

> ID：11374642
> 
> 赞同：5
> 
> 时间：2012-07-07T11:35:27.477
> 
> 标签：jquery, css, twitter-bootstrap

我有几个按钮。当用户单击任何按钮时，我想给他一个按钮被单击的印象。

这是代码：

```
<table>
<thead>
<tr>
<th><button class="btn btn-danger" >Today</button></th>
<th><button class="btn btn-danger" >Tomorrow</button></th>
<th><button class="btn btn-danger" >DayAfterTomorrow</button></th>
</tr>
</thead>
</table> 
```

这在我有一个按钮时有效：

```
<button class="btn" data-toggle="button">Today</button> 
```

如果用户单击明天，则 data-toggle 属性仍然保留为今天按钮。相反，我想在单击另一个按钮时禁用 data-toggle 属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T12:56:05.597

您可以使用引导单选按钮功能来实现该效果。尝试这个：

```
<div data-toggle="buttons-radio">
    <button class="btn btn-danger">Today</button>
    <button class="btn btn-danger">Tomorrow</button>
    <button class="btn btn-danger">DayAfterTomorrow</button>
</div> 
```

演示：http: [//jsfiddle.net/u7Lg8/](http://jsfiddle.net/u7Lg8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:29:20.390

试试这样：

```
$('.btn').click(function(){
    //Removing `data-toggle` from all elements
    $('.btn').removeData('toggle');
    //Adding `data-toggle` on clicked element
    $(this).data('toggle','button');        
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T20:01:44.547

这是我为我的网站想出的（改进的唯一方法是不使用隐藏变量来存储最终值）

```
 $("input[name='dispatch']").change(function(){

            $(this).parent().siblings().removeClass('active btn-primary');
            $("#WantsDispatchService").val($(this).val());

        });
```

```
 <div class="btn-group btn-toggle  " data-toggle="buttons">
	<label class="btn btn-default btn-sm">
		<input name="dispatch" value="false" type="checkbox"> No
	</label>
	<label class="btn btn-default  btn-sm">

		<input name="dispatch" value="true" type="checkbox"> Yes
	</label>

</div>
<input type ="hidden" id="WantsDispatchService" name="WantsDispatchService" value="false"> 
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T12:20:26.517

您需要将按钮分组在 div 下并在组上设置数据切换。

[您可以在Twitter 引导按钮](http://twitter.github.com/bootstrap/javascript.html#buttons)的示例页面中看到它

```
<!-- Add data-toggle="buttons-checkbox" for checkbox style toggling on btn-group -->
<div class="btn-group" data-toggle="buttons-checkbox">
  <button class="btn">Left</button>
  <button class="btn">Middle</button>
  <button class="btn">Right</button>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-27T12:08:41.747

您可以使用`$().button('toggle')`通过 javascript 切换按钮状态。[*](http://getbootstrap.com/javascript/#buttons-methods)

就我而言；我不能使用分组按钮，它们在视觉上是相互分离的。

我检查是否按下了另一个按钮并使用 javascript 将其切换回来。这是我的解决方案：

```
$('#buttonA').click(function (e) {
    if ($('#buttonB').attr('aria-pressed') == 'true') {
        $('#buttonB').button('toggle');
    }
    e.preventDefault();
});

$('#buttonB').click(function (e) {
    if ($('#buttonA').attr('aria-pressed') == 'true') {
        $('#buttonA').button('toggle');
    }
    e.preventDefault();
}); 
```

# javascript - 悬停时的jQuery滚动文本

> ID：11374647
> 
> 赞同：1
> 
> 时间：2012-07-07T11:35:48.367
> 
> 标签：javascript, jquery

我有一个“a”元素，我想在悬停时向左滚动。为此，我删除了第一个字符并将其附加到字符串的末尾。

如何连续启动滚动功能？

鼠标进入元素 -> scroll() 被触发，直到鼠标离开元素或用户点击它。

html:

```
<a href="foo.htm" class="scrollthis">this text scrolls on hover</a> 
```

jQuery：

```
$(".scrollthis").hover(function(){
    scroll($(this));

});

function scroll(ele){

    var s = $(ele).text().substr(1)+$(ele).text().substr(0,1);
    $(ele).text(s);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:45:20.400

用于`setInterval()`从 mouseenter 重复调用它，然后`clearInterval()`在 mouseleave 上停止它：

```
var intervalID;
$(".scrollthis").hover(function(){
    var $this = $(this);
    intervalID = setInterval(function() {
       scroll($this);
    }, 100);
}, function() {
    clearInterval(intervalID);
}); 
```

请注意，您不需要`$(ele)`在`scroll()`函数中使用，因为`ele`它已经是一个 jQuery 对象：

```
function scroll(ele){
    var s = ele.text().substr(1)+ele.text().substr(0,1);
    ele.text(s);
} 
```

演示：http: [//jsfiddle.net/hTBZn/](http://jsfiddle.net/hTBZn/)

如果您使用方法的回调语法（或者甚至将这一行直接移动到代码中） ，您可以使您的`scroll()`函数更简洁：`.text()``.hover`

```
function scroll(ele){
    ele.text(function(i,val) { return val.substr(1) + val.substr(0,1); });
}​ 
```

演示：http: [//jsfiddle.net/hTBZn/1/](http://jsfiddle.net/hTBZn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:38:39.267

这是完整的代码，你可以[试试 jsfiddle](http://jsfiddle.net/dFEE6/)

```
function scroll(ele){
    var s = $(ele).text().substr(1)+$(ele).text().substr(0,1);
    $(ele).text(s);
}

scrollInterval = null;
function startScrolling(e) {
    if (!scrollInterval) {
        scrollInterval = setInterval(function(){
            scroll(e)
        },100);
    }
}

function stopScrolling(e) {
    clearInterval(scrollInterval);
    scrollInterval = null;
}

$(".scrollthis").hover(function(){
    startScrolling($(this));
});

$(".scrollthis").mouseout(function(){
    stopScrolling($(this));
});

$(".scrollthis").mousedown(function(){
    stopScrolling($(this));
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:46:01.177

**css**

```
 div.container{
      width: 130px;
    }
    div.title-holder {
      width: 130px;
      height:20px;
      text-align:center;
      background: silver;
      overflow:hidden;
        position: relative;
    }
    div.title-holder a {  
      position: relative;  
      white-space:nowrap;  
        left: 0px;
    }
    div.image{
        background: brown;
        width: 100%;
        height: 100px;
    }​ 
```

**html**

```
 <div class="container">
    <div class="title-holder">
        <a href="somelink.html">long text that needs to scroll, long text that needs to scroll, long text that needs to scroll</a>
    </div>
</div>​ 
```

**js**

```
 $(function(){
var scroll_text;
$('div.container').hover(
    function () {
        var $elmt = $(this);
        scroll_text = setInterval(function(){scrollText($elmt);}, 5);
    },
    function () {
        clearInterval(scroll_text);
        $(this).find('div.title-holder a').css({
            left: 0
        });
    }
);

    var scrollText = function($elmt){
        var left = $elmt.find('div.title-holder a').position().left - 1;
        left = -left > $elmt.find('div.title-holder a').width() ? $elmt.find('div.title-holder').width() : left;
        $elmt.find('div.title-holder a').css({
            left: left
        });
    };

});​ 
```

# html - 如何将 Skeleton CSS 样板分成 5 列？

> ID：11374652
> 
> 赞同：3
> 
> 时间：2012-07-07T11:36:22.430
> 
> 标签：html, css, fluid-layout, skeleton-css-boilerplate

我想从[http://getskeleton.com/](http://getskeleton.com/)的 Skeleton CSS 样板开始。 这是我第一次使用 960gs 模板设计和编写脚本，但我完全不明白。

根据一些教程，我了解页面宽度由 16 个列单元组成。例如，您可以将您的页面分为十个单元列和一个六单元列：

我直接从骨架 layout.css 中获取了以下代码：

```
 /* Base Grid */
.container .one.column,
.container .one.columns                     { width: 40px;  }
.container .two.columns                     { width: 100px; }
.container .three.columns                   { width: 160px; }
.container .four.columns                    { width: 220px; }
.container .five.columns                    { width: 280px; }
.container .six.columns                     { width: 340px; }
.container .seven.columns                   { width: 400px; }
.container .eight.columns                   { width: 460px; }
.container .nine.columns                    { width: 520px; }
.container .ten.columns                     { width: 580px; }
.container .eleven.columns                  { width: 640px; }
.container .twelve.columns                  { width: 700px; }
.container .thirteen.columns                { width: 760px; }
.container .fourteen.columns                { width: 820px; }
.container .fifteen.columns                 { width: 880px; }
.container .sixteen.columns                 { width: 940px; }

.container .one-third.column                { width: 300px; }
.container .two-thirds.column               { width: 620px; } 
```

问题是我想将我的页面分成 5 个部分（当然还有边距）......但是如何？我可以使用 3 列 5 次，但总共可以计算 15 列。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T12:45:40.560

您将无法从标准骨架版本 1.2 中获得五列。但是您可以在skeleton.css 中添加一些行：

```
/* Base Grid */
.container .one.column,
.container .one.columns                     { width: 40px;  }
.container .two.columns                     { width: 100px; }
.container .three.columns                   { width: 160px; }
.container .four.columns                    { width: 220px; }
.container .five.columns                    { width: 280px; }
.container .six.columns                     { width: 340px; }
.container .seven.columns                   { width: 400px; }
.container .eight.columns                   { width: 460px; }
.container .nine.columns                    { width: 520px; }
.container .ten.columns                     { width: 580px; }
.container .eleven.columns                  { width: 640px; }
.container .twelve.columns                  { width: 700px; }
.container .thirteen.columns                { width: 760px; }
.container .fourteen.columns                { width: 820px; }
.container .fifteen.columns                 { width: 880px; }
.container .sixteen.columns                 { width: 940px; }

.container .one-third.column                { width: 300px; }
.container .two-thirds.column               { width: 620px; }
.container .one-fifth.column                { width: 176px; }    /* <--- Right here */ 
```

跳到这里：

```
@media only screen and (min-width: 768px) and (max-width: 959px) {
    .container                                  { width: 768px; }
    .container .column,
    .container .columns                         { margin-left: 10px; margin-right: 10px;  }
    .column.alpha, .columns.alpha               { margin-left: 0; margin-right: 10px; }
    .column.omega, .columns.omega               { margin-right: 0; margin-left: 10px; }
    .alpha.omega                                { margin-left: 0; margin-right: 0; }

    .container .one.column,
    .container .one.columns                     { width: 28px; }
    .container .two.columns                     { width: 76px; }
    .container .three.columns                   { width: 124px; }
    .container .four.columns                    { width: 172px; }
    .container .five.columns                    { width: 220px; }
    .container .six.columns                     { width: 268px; }
    .container .seven.columns                   { width: 316px; }
    .container .eight.columns                   { width: 364px; }
    .container .nine.columns                    { width: 412px; }
    .container .ten.columns                     { width: 460px; }
    .container .eleven.columns                  { width: 508px; }
    .container .twelve.columns                  { width: 556px; }
    .container .thirteen.columns                { width: 604px; }
    .container .fourteen.columns                { width: 652px; }
    .container .fifteen.columns                 { width: 700px; }
    .container .sixteen.columns                 { width: 748px; }

    .container .one-third.column                { width: 236px; }
    .container .two-thirds.column               { width: 492px; }
    .container .one-fifth.column                { width: 137.6px; }    /*  <--- And Right der */
} 
```

顺便说一句，我省略了一些行。然后只需输入其中之一：

```
<div class="column one-fifth alpha">1</div>
<div class="column one-fifth">2</div>
<div class="column one-fifth">3</div>
<div class="column one-fifth">4</div>
<div class="column one-fifth omega">5</div> 
```

并完成，将在不久的将来添加示例。我个人认为 5 列网格太窄了，尽可能远离 4 列以上的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T14:49:25.330

这些是我发现的 Skeleton 最好的教程系列。他们真的帮助了我：[https ://www.youtube.com/watch?v=QFYkSqBvCAs](https://www.youtube.com/watch?v=QFYkSqBvCAs)

但是，如果您访问 Skeleton 主页，那里有一个网格系统演示。只需检查源代码，它会为您提供：

```
<div class="five columns alpha">Five</div> 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T12:35:35.730

以为我会用我的解决方案更新它。

对于具有基于百分比宽度的新 Skeleton 框架（当前为 V2.0.4），我正在试验并发现添加它对我有用。

```
.col-5.columns { 
    width: 16.3333333333%;
    padding-right: 10px;
} 
```

只需添加它来代替普通的列类，例如，

```
<div class="col-5 columns"> 
```

填充只是我的特殊情况的偏好。

虽然还没有发现任何问题。

# regex - 正则表达式替换记录中的最后 n 个分隔符

> ID：11374655
> 
> 赞同：0
> 
> 时间：2012-07-07T11:36:41.973
> 
> 标签：regex, replace, record

我有一个 csv 文件，其中包含如下记录：

```
^Tablete Internet^|GoClever|^TAB I71^|^Tableta GoClever TAB I71, InfoTMIC iMAPx220 1GHz MKV, MOV, VOB, DAT, WMV, AVI, 3GP, MP4, RM, RMVB, FLV, MKV, MOV, VOB, DAT, WMV, MP3!WAV!OGG!FLAC!APE!AAC, Conectori: 1x mini jack 3.5 mm, 2 porturi USB 2.0, 4000 mAh lithium-ion polymer 3.7V^!92.00!USD!w!24!0!Link!!^5 ron^!!|
Group|Prod|Den|Description!12!EUR!^wait time^!160!Modified!Link!^Spec Obs^!^tv none^!more!info| 
```

我需要替换最后 10 个“！” 从带有“|”的行的末尾 所以最后它看起来像：

```
^Tablete Internet^|GoClever|^TAB I71^|^Tableta GoClever TAB I71, InfoTMIC iMAPx220 1GHz MKV, MOV, VOB, DAT, WMV, AVI, 3GP, MP4, RM, RMVB, FLV, MKV, MOV, VOB, DAT, WMV, MP3!WAV!OGG!FLAC!APE!AAC, Conectori: 1x mini jack 3.5 mm, 2 porturi USB 2.0, 4000 mAh lithium-ion polymer 3.7V^|92.00|USD|w|24|0|Link||^5 ron^|||
Group|Prod|Den|Description|12|EUR|^wait time^|160|Modified|Link|^Spec Obs^|^tv none^|other|info| 
```

我试过：

```
sed 's/!\([^\^!]*\)!\([^!]*\)$/|\1|\2/' 
```

但这仅替换最后两次出现的“！”。如果我尝试

```
sed 's/!\([^\^!]*\)!\([^!]*\)!\([^!]*\)$/|\1|\2\3/' 
```

它不匹配任何东西......那么我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:29:31.727

给你[http://refiddle.com/2l5](http://refiddle.com/2l5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:48:42.967

我知道这不是最优雅的解决方案，但我设法做到了：

```
perl -npe 's/^(.*)!(.*)!(.*)!(.*)!(.*)!(.*)!(.*)!(.*)!(.*)!(.*)!(.*)$/$1|$2|$3|$4|$5|$6|$7|$8|$9|$10|$11/' 
```

谢谢！

# ruby-on-rails - RoR 邮件程序问题

> ID：11374663
> 
> 赞同：1
> 
> 时间：2012-07-07T11:37:52.603
> 
> 标签：ruby-on-rails, actionmailer

我试图在创建事件时向活动用户发送电子邮件。虽然这样做时我收到以下错误

```
Started POST "/events" for 124.149.85.178 at Sat Jul 07 13:15:03 +0200 2012
Processing by SchedulesController#create as HTML
  Parameters: {"utf8"=>"✓", "time"=>{"typedatetimeclassrequired"=>""}, "authenticity_token"=>"TntGzQ/plgGWKh66F74sDwUXCJVKrv0tYSfaOlUMiFE=", "schedule"=>{"user_id"=>[""], "event"=>"1", "team_id"=>"", "arrival_time"=>"", "time"=>"Sat, 07 Jul 2012 09:15 pm", "for"=>"", "against"=>"", "home_or_away"=>"", "location_id"=>"", "opponent_id"=>""}, "commit"=>"Create Schedule"}
  Rendered user_mailer/welcome_email.html.erb (0.4ms)

Sent mail to *******@westnet.com.au (60075ms)
Completed 500 Internal Server Error in 60213ms

Timeout::Error (execution expired):
  app/controllers/schedules_controller.rb:59:in `create'
  app/controllers/schedules_controller.rb:56:in `create' 
```

我的 schedule_controller 中有以下内容

```
def create
@schedule = Schedule.new(params[:schedule])
@user = User.find(current_user)

respond_to do |format|
  if @schedule.save
    UserMailer.welcome_email(@user).deliver
    format.html { redirect_to(schedules_url,
                              :notice => "#{event_display_c(@schedule.event)}  was successfully created.") }
    format.json { render :json => @schedule, :status => :created, :location => @schedule }
  else
    format.html { render :action => "new" }
    format.json { render :json => @schedule.errors, :status => :unprocessable_entity }
  end
end 
```

结尾

和我的邮件

```
 class UserMailer < ActionMailer::Base
  default :from => "notifications@**********"

  def welcome_email(user)
    @user = user
    @url  = "http://example.com/login"
    mail(:to => user.email, :subject => "Welcome to My Awesome Site")
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:10:51.343

看起来问题是您的电子邮件服务器配置错误。解决此问题取决于您的 ISP/服务器主机，但请查看[Ruby on Rails 指南](http://edgeguides.rubyonrails.org/action_mailer_basics.html#example-action-mailer-configuration)以获取有关设置内容的详细信息。如果您使用 GMail，还有配置服务器设置的步骤。

# objective-c - Core Data 将一对多关系与列表匹配

> ID：11374667
> 
> 赞同：0
> 
> 时间：2012-07-07T11:38:05.040
> 
> 标签：objective-c, ios, cocoa, core-data

与[这个问题](https://stackoverflow.com/questions/11346546/core-data-unsupported-predicate-with-all-and-in/11374645#11374645)相关，它出现了一个新问题：

假设我有这些属性：`[red, green, blue]`如何获取其部分或全部属性在列表中**但仅在此列表中**的对象？

```
* Object_1 (red, green, blue)
* Object_2 (red, green)
* Object_3 (red) 
```

这意味着不获取`Object_4 (red, green, blue, yellow)`，因为它有`yellow`不在列表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:40:21.647

您可以制作一个复合谓词，它可以添加您的 3 个谓词：

```
NSPredicate *predOne = [NSPredicate predicateWithFormat:@"color == %@",@"red"];
NSPredicate *predTwo = [NSPredicate predicateWithFormat:@"color == %@",@"blue"];
NSPredicate *predThree = [NSPredicate predicateWithFormat:@"color == %@",@"green"];
NSArray *allPredicates = [[NSArray alloc] initWithObjects:predOne,predTwo,predThree, nil];
NSPredicate finalPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:allPredicates]; 
```

# http-status-code-404 - 交响乐数据源错误

> ID：11374669
> 
> 赞同：1
> 
> 时间：2012-07-07T11:38:18.213
> 
> 标签：http-status-code-404, datasource, errordocument, symphony-cms

创建从我的任何部分中提取的数据源并按“创建数据源”时，出现以下错误：

```
Forbidden

You don't have permission to access /symph-page/symphony/blueprints/datasources/new/ on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

奇怪的是，如果我从系统中提取或提供自定义 xml，则数据源创建得很好，并且我没有收到之前的消息。在应该满足技术要求的服务器上运行 Symphony 2.3。我之前运行过 Symphony，从未遇到过此类问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:51:49.550

您可能还想确保您的 .htaccess 文件存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:08:57.130

听起来您需要更改`workspace/data-sources`目录文件权限，以便 Web 服务器用户可以将文件写入其中。

例如，在 Linux 服务器上（777 可能不是必需的，取决于您的网络服务器的配置）：

```
chmod 777 /symph-page/symphony/blueprints/datasources 
```

如果您通过 FTP 访问服务器，您的 FTP 客户端可能会让您这样做。

编辑：重新阅读您的问题，我想我说这是一个工作区写入权限问题是错误的。我不认识“蓝图”目录路径。此目录是否存在于您的安装中，并且您的网络服务器是否具有读取权限？

# sql - 在sql server中压缩二进制数据

> ID：11374670
> 
> 赞同：-1
> 
> 时间：2012-07-07T11:38:35.410
> 
> 标签：sql, sql-server, sql-server-2008

我**将图像****以二进制格式**存储在我的数据库（Sql Server 2008）中。表的字段数据类型是图像。

现在，我在该表中的行数超过了数百万。现在我想**压缩那个二进制数据。**

我已经搜索了一些解决方案，但它们是在表单级别上，这意味着我必须用 C# 或 VB.net 编写代码并将二进制数据带到该页面上。通过用代码压缩它们，我必须更新该特定记录。

但由于我有大量数据，在表单方面执行此过程很不方便，因为它可能需要大量时间。

所以我只想要一些**SQL 代码，**这样我就可以在我的数据库中**创建存储过程**，使用它我可以一次获取每一行，**直接压缩该二进制数据并更新**该特定行的获取列。

是否有任何方法可以在**SQL server 2008**上执行此过程。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:59:01.800

您可以使用 CLR：这是一个已经编写好的并准备推出的... [http://www.sqlmag.com/article/common-language-runtime-clr/using-large-clr-udts-in-sql-server- 2008年](http://www.sqlmag.com/article/common-language-runtime-clr/using-large-clr-udts-in-sql-server-2008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:45:03.430

如果您使用的是 SQL Server 2008 Developer 或 Enterprise Edition，则可以按照[MSDN 上的此处](http://msdn.microsoft.com/en-us/library/cc280449%28v=sql.100%29.aspx)所述启用压缩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T11:45:11.757

能不能不要`FILESTREAM`在 SQL Server 中使用该类型，服务器从 2008 年开始应该已经支持压缩。

查看[MSDN 文档](http://technet.microsoft.com/en-us/library/bb933993%28SQL.105%29.aspx)，您需要做的就是确保文件流位于压缩卷上并且它会即时发生。

# php - mysqli bind_param 未设置 $stmt->error 或 $stmt->errno

> ID：11374672
> 
> 赞同：4
> 
> 时间：2012-07-07T11:38:57.193
> 
> 标签：php, mysqli

根据 php 手册，您可以通过询问 $stmt->error 和 $stmt->errno 来检索任何准备好的语句方法中的错误，但是 bind_param 方法似乎永远不会将这些设置为错误，其他人可以确认吗？或者告诉我我错过了什么？

例如：

```
echo "Start\n";
$db = new mysqli('localhost','test','xxxxxx','test');

$val = 1;

$st = $db->prepare('insert into tblTest set field1=?');
if($st == false)
{
    printf("prepare: %s %d\n",$db->error,$st->errno);
}

$rs = $st->bind_param('is', $val);
if($rs == false)
{
    printf("bind_param: %s %d\n",$st->error,$st->errno);
}

$rs = $st->execute();
if($rs == false)
{
    printf("execute: %s %d\n",$st->error,$st->errno);
}

$rs = $st->close();
if($rs == false)
{
    printf("close: %s %d\n",$st->error,$st->errno);
}
echo "Finish\n"; 
```

从命令行运行上述显示：

```
Start
PHP Warning:  mysqli_stmt::bind_param(): Number of elements in type definition string doesn't match number of bind variables in test.php on line 14
bind_param: 0
execute: No data supplied for parameters in prepared statement 2031
Finish 
```

所以 php 将其视为警告，bind_param 返回 false，但未设置错误和 errno。执行也失败并正确设置了错误和错误号

这是一个错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T11:45:26.340

`MySQLi::error`并且`MySQLi::errno`是 RDBMS 返回给 PHP 的错误代码和消息的容器，*而不是*设置语句时 PHP 代码中遇到的错误。对（参数不足）的错误调用`bind_param()`显然不会与 RDBMS 通信，因此不会从 RDBMS 收到错误。

根据[文档](http://php.net/manual/en/mysqli-stmt.bind-param.php)，失败时`bind_param()`返回布尔值`FALSE`。所以你需要验证它是否被成功调用。

```
$rs = $st->bind_param('is', $val);
if ($rs) {
  $st->execute();
} 
```

# mapreduce - RavenDB MultiMapReduce Sum 没有返回正确的值

> ID：11374673
> 
> 赞同：1
> 
> 时间：2012-07-07T11:38:58.880
> 
> 标签：mapreduce, sum, ravendb

很抱歉这个冗长的查询，我决定添加整个测试，这样即使是新手也能更容易地帮助我完成整个大脑融化。

使用指令是：

```
using System.Collections.Generic;
using System.Linq;
using NUnit.Framework;
using Raven.Client;
using Raven.Client.Embedded;
using Raven.Client.Indexes; 
```

如果我太长，请留下反馈，但是如果我添加一个完整的测试可能会出什么问题？

```
[TestFixture]
public class ClicksByScoreAndCardTest
{
    private IDocumentStore _documentStore;

    [SetUp]
    public void SetUp()
    {
        _documentStore = new EmbeddableDocumentStore {RunInMemory = true}.Initialize();
        _documentStore.DatabaseCommands.DisableAllCaching();

        IndexCreation.CreateIndexes(typeof (ClicksBySearchAndProductCode).Assembly, _documentStore);
    }

    [TearDown]
    public void TearDown()
    {
        _documentStore.Dispose();
    }

    [Test]
    public void ShouldCountTotalLeadsMatchingPreference()
    {
        var userFirst = new User {Id = "users/134"};
        var userSecond = new User {Id = "users/135"};
        var searchFirst = new Search(userFirst)
                              {
                                  Id = "searches/24",
                                  VisitId = "visits/63"
                              };
        searchFirst.Result = new Result();
        searchFirst.Result.Rows = new List<Row>(
            new[]
                {
                    new Row {ProductCode = "CreditCards/123", Score = 6},
                    new Row {ProductCode = "CreditCards/124", Score = 4}
                });

        var searchSecond = new Search(userSecond)
                               {
                                   Id = "searches/25",
                                   VisitId = "visits/64"
                               };

        searchSecond.Result = new Result();
        searchSecond.Result.Rows = new List<Row>(
            new[]
                {
                    new Row {ProductCode = "CreditCards/122", Score = 9},
                    new Row {ProductCode = "CreditCards/124", Score = 4}
                });

        var searches = new List<Search>
                           {
                               searchFirst,
                               searchSecond
                           };

        var click = new Click
                        {
                            VisitId = "visits/64",
                            ProductCode = "CreditCards/122",
                            SearchId = "searches/25"
                        };

        using (var session = _documentStore.OpenSession())
        {
            foreach (var search in searches)
            {
                session.Store(search);
            }
            session.Store(click);
            session.SaveChanges();
        }

        IList<ClicksBySearchAndProductCode.MapReduceResult> clicksBySearchAndProductCode = null;
        using (var session = _documentStore.OpenSession())
        {
            clicksBySearchAndProductCode = session.Query<ClicksBySearchAndProductCode.MapReduceResult>(ClicksBySearchAndProductCode.INDEX_NAME)
                .Customize(x => x.WaitForNonStaleResults()).ToArray();
        }
        Assert.That(clicksBySearchAndProductCode.Count, Is.EqualTo(4));
        var mapReduce = clicksBySearchAndProductCode
            .First(x => x.SearchId.Equals("searches/25")
                        && x.ProductCode.Equals("CreditCards/122"));
        Assert.That(mapReduce.Clicks,
                Is.EqualTo(1));
    }
}

public class ClicksBySearchAndProductCode :
    AbstractMultiMapIndexCreationTask
        <ClicksBySearchAndProductCode.MapReduceResult>
{
    public const string INDEX_NAME = "ClicksBySearchAndProductCode";

    public override string IndexName
    {
        get { return INDEX_NAME; }
    }

    public class MapReduceResult
    {
        public string SearchId { get; set; }
        public string ProductCode { get; set; }
        public string Score { get; set; }
        public int Clicks { get; set; }
    }

    public ClicksBySearchAndProductCode()
    {
        AddMap<Search>(
            searches =>
            from search in searches
            from row in search.Result.Rows
            select new
            {
                SearchId = search.Id,
                ProductCode = row.ProductCode,
                Score = row.Score.ToString(),
                Clicks = 0
            });
        AddMap<Click>(
            clicks =>
            from click in clicks
            select new
            {
                SearchId = click.SearchId,
                ProductCode = click.ProductCode,
                Score = (string)null,
                Clicks = 1
            });
        Reduce =
            results =>
            from result in results
            group result by
                new { SearchId = result.SearchId, ProductCode = result.ProductCode }
                into g
                select
                    new
                    {
                        SearchId = g.Key.SearchId,
                        ProductCode = g.Key.ProductCode,
                        Score = g.First(x => x.Score != null).Score,
                        Clicks = g.Sum(x => x.Clicks)
                    };
    }
}
public class User
{
    public string Id { get; set; }
}

public class Search
{
    public string Id { get; set; }
    public string VisitId { get; set; }
    public User User { get; set; }

    private Result _result = new Result();

    public Result Result
    {
        get { return _result; }
        set { _result = value; }
    }

    public Search(User user)
    {
        User = user;
    }
}

public class Result
{
    private IList<Row> _rows = new List<Row>();

    public IList<Row> Rows
    {
        get { return _rows; }
        set { _rows = value; }
    }
}

public class Row
{
    public string ProductCode { get; set; }
    public int Score { get; set; }
}

public class Click
{
    public string VisitId { get; set; }
    public string SearchId { get; set; }
    public string ProductCode { get; set; }
} 
```

我的问题是我希望 Count 在该特定测试中是一个，但它似乎没有在 Click 地图中添加 Clicks，结果是 0 次点击。我很困惑，我确信我的问题有一个非常简单的解决方案，但我就是找不到它..

..希望有一个周末的战士可以把我带到他的翅膀下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T21:01:05.233

是的，对我来说，这是一次脑筋急转弯，但仍然如此。正确的 reduce 应该如下所示：

```
Reduce =
    results =>
    from result in results
    group result by
        new { SearchId = result.SearchId, ProductCode = result.ProductCode }
        into g
        select
            new
            {
                SearchId = g.Key.SearchId,
                ProductCode = g.Key.ProductCode,
                Score = g.Select(x=>x.Score).FirstOrDefault(),
                Clicks = g.Sum(x => x.Clicks)
            }; 
```

并非所有地图都将分数设置为非空值，因此我的原始版本存在以下问题：

```
Score = g.First(x => x.Score != null).Score 
```

* * *

心理笔记，使用：

```
Score = g.Select(x=>x.Score).FirstOrDefault() 
```

不要使用：

```
Score = g.First(x => x.Score != null).Score 
```

# ios - 删除 ... 来自 *.plist 文件 iPhone 脚本

> ID：11374684
> 
> 赞同：0
> 
> 时间：2012-07-07T11:40:46.107
> 
> 标签：ios, bash, plist

我想编写一个脚本，`dict`从 *.plist 文件中删除指定的脚本，但是我在互联网上找到的任何内容都不起作用。有没有办法做到这一点？我试过`sed`comman 但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:56:14.573

1.  将 plist 文件读入`NSDictionary`. [[文档]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDictionary/dictionaryWithContentsOfFile%3a)
2.  做一个`mutableCopy`得到一本你可以使用的字典。
3.  删除您要删除的项目
4.  将字典写回磁盘。[[文档]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/writeToFile%3aatomically%3a)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T12:20:05.597

Sed 是一个非常糟糕的工具。尝试 PlistBuddy，如果它存在于 iOS 上（它确实存在于 MacOS 上......）；它被称为 /usr/libexec/PlistBuddy，并允许您操作 plist 文件。

语法有点奇怪，但“条目”似乎是这样处理的：从 plist 文件的顶部开始；如果是数组，则指定要寻址的元素的索引，如果是字典，则指定要转到的键名。用冒号分隔这些规范。如果有空格，请在整个内容周围加上“”。

我的示例文件是这样的：

```
stieber@:~> cat foo.plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist SYSTEM "file://localhost/System/Library/DTDs/PropertyList.dtd">

<plist version="1.0">
  <array>
    <dict>
      <key>Sample 1</key>
      <array>
        <string>Sample String 1</string>
        <dict>
          <key>Sample 2</key>
          <string>Sample String 2</string>
        </dict>
      </array>
    </dict>
  </array> 
```

一个示例会话：

```
stieber@:~> /usr/libexec/PlistBuddy foo.plist
Command: print
Array {
    Dict {
        Sample 1 = Array {
            Sample String 1
            Dict {
                Sample 2 = Sample String 2
            }
        }
    }
}

Command: print "0:Sample 1:1"
Dict {
    Sample 2 = Sample String 2
}

Command: delete "0:Sample 1:1"
Command: print
Array {
    Dict {
        Sample 1 = Array {
            Sample String 1
        }
    }
} 
```

您也可以在命令行上或通过此处的文档提供命令。互动更容易玩:-)

# ios - 如何在 iOS 中使用幻灯片删除 SubView？

> ID：11374687
> 
> 赞同：1
> 
> 时间：2012-07-07T11:40:56.317
> 
> 标签：ios, uiview

我尝试使用以下代码添加带有动画的 SubView。没关系。

```
[self.view addSubview:pickerView];
    pickerView.frame = CGRectMake(0, 0, 320, 50);
    [UIView animateWithDuration:1.0 
                     animations:^{
                         pickerView.frame = CGRectMake(0, 152, 320, 260);
                     }]; 
```

而且我还想删除带有幻灯片动画的子视图，如上面的动画。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T11:49:12.280

你可以使用这个 animateWithDuration 完成块来删除视图

```
[UIView animateWithDuration:1.0 
                 animations:^{
                     pickerView.frame = //move it out of screen
                 } completion:^(BOOL finished) {
                     [pickerView removeFromSuperView];
                 }]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T11:58:57.197

```
[UIView animateWithDuration:.2 animations:^{
         pickerView.frame = CGRectMake(0, 0, 320, 50);   

        } completion:^(BOOL finished){
            [pickerView removeFromSuperView];          
        }]; 
```

# jqgrid - ASP MVC WEB Api JS表

> ID：11374690
> 
> 赞同：0
> 
> 时间：2012-07-07T11:41:40.040
> 
> 标签：jqgrid, datatables, asp.net-mvc-4

谁能指出我正确的方向？

我正在寻找将 DataTables.net 或 jqGrid 与源的 ASP MVC4 ApiController 操作一起使用。

我遇到的问题是我只返回一个对象数组.. 例如 [{"Name":"Brian", "Age" : "35"}, {"Name":"Jim", "Age" : "45 "}]

我不像示例那样格式化它，即使用 aaData 或字符串数​​组。谁能告诉我他们是如何克服这个问题的？

如果有人向我指出一个好例子的方向，我什至会满足于 jqGrid。tnx 布赖恩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:43:16.447

在 jqGrid 中这不是问题。您只需要定义描述[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)如何读取数据的 jsonReader。例如

查看[演示](http://www.ok-soft-gmbh.com/jqGrid/user1127858.htm)：

![在此处输入图像描述](../Images/678d94e3a3b4a6ac71bcff636b8c9488.png)

它用

```
jsonReader: {
    repeatitems: false,
    id: "Name",
    root:  function (obj) {
        return obj;
    }
} 
```

以及您发布的 JSON 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:15:10.820

要使用 ASP.NET Web API 的不同操作（发布、放置和删除）进行添加编辑删除操作，请查看以下示例： [http ://techbrij.com/1017/add-edit-delete-jqgrid-asp-net-web -api](http://techbrij.com/1017/add-edit-delete-jqgrid-asp-net-web-api)

# ios - 我必须在 iOS 编程中使用 release 进行内存管理吗？

> ID：11374692
> 
> 赞同：0
> 
> 时间：2012-07-07T11:42:02.303
> 
> 标签：ios, objective-c-blocks

我看到了下面的一段代码

```
 UIAlertView *alert = 
   [[UIAlertView alloc] initWithTitle :@”Hello World!” 
                                   message:@”iPhone, here I come!”  
                                  delegate :self
                         cancelButtonTitle:@”OK” 
                         otherButtonTitles:nil ];
   [alert show];
   [alert release]; 
```

我是否需要每次都调用 release，或者有没有办法像 java 或 .NET 中的垃圾收集一样自动管理内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:45:11.523

您可以使用 ARC（自动引用计数），它不是垃圾收集，而是一种编译器功能，让开发人员不必担心内存管理。

看看这个[问题](https://stackoverflow.com/questions/6385212/how-does-the-new-automatic-reference-counting-mechanism-work)和这个[链接](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)

简而言之，ARC 就像手动引用计数 (MRC) 一样，编译器会确定何时调用保留/释放。

您还可以将任何非 -ARC 项目转换为使用 XCode 中的 ARC（编辑->重构->转换为 Objective-C ARC）。您还可以选择性地将项目/文件设置为不使用 ARC（例如第三方代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:47:06.010

`Java`并且`.NET`是垃圾收集的平台，它们在自己的虚拟环境中运行。`Objective-C`建立在上面，`C`内存管理由开发人员处理。苹果引入了一个叫做`Automatic Reference Counting`( `ARC`) 的东西，它负责释放没有指向它们的对象，但无论如何`ARC`都不像垃圾回收。因此，您需要阅读内存管理规则以及/或如何`ARC`正确使用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:49:31.747

其他答案当然是正确的。如果您确实进行手动内存管理：您只需要释放通过名称以“alloc”、“copy”、“new”或“mutableCopy”开头的消息获得的对象。从消息返回的所有其他对象不属于您，也不需要释放。它们中的大多数都被添加到自动释放池中。您还应该遵循该约定并始终返回自动释放的对象（关于上面列出的例外情况）。

编辑：哦，还有一件事：由于这种自动释放行为，您需要保留要保留的对象，方法是将它们分配给类的保留属性或使用 [保留] 手动执行。遵循并记住这三个规则可以让你过得很好。

# java - 如何在 Equinox 中定义类路径目录？

> ID：11374694
> 
> 赞同：1
> 
> 时间：2012-07-07T11:42:40.387
> 
> 标签：java, classpath, osgi, bundle, equinox

有没有办法在 Eclipse Equinox 中将目录定义为每个包的类路径？这样我就可以将每个捆绑包的所有 3rd 方 jars/配置文件放入此目录中。我知道这可以通过单独定义每个罐子来完成，但我需要一种更简单的方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:06:54.200

你在考虑[目标平台](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fconcepts%2Ftarget.htm)吗？它是一个共享包池，可以包含在导入合适包的任何包的“OSGi 类路径”中。您可以在目标平台中包含单个包和整个文件夹。

在正常情况下，我会避免在您的 OSGi 包中嵌入过多的第三方 jar（即直接在包类路径中），因为在包之间共享公共实例更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:52:19.660

No. Each bundle has its own classpath that must be entirely contained within it.

# php - 使用 PHP 列出和预览目录中的图像

> ID：11374697
> 
> 赞同：1
> 
> 时间：2012-07-07T11:43:28.703
> 
> 标签：php, image

我正在尝试改进我网站的管理员面板。我需要预览缩略图文件夹中的图像，这样当我使用缩略图获取新闻时，我不必第二次上传图像。我找到了一个很棒的脚本，但我无法读取目录错误。这是脚本：

```
<?php
  // filetypes to display
  $imagetypes = array("image/jpeg", "image/gif", "image/png");

  // Original PHP code by Chirp Internet: www.chirp.com.au
  // Please acknowledge use of this code by including this header.

  function getImages($dir)
  {
    global $imagetypes;

    // array to hold return value
    $retval = array();

    // add trailing slash if missing
    if(substr($dir, -1) != "/") $dir .= "/";

    // full server path to directory
    $fulldir = "{$_SERVER['DOCUMENT_ROOT']}/$dir";

    $d = @dir($fulldir) or die("getImages: Failed opening directory $dir for reading");
    while(false !== ($entry = $d->read())) {
      // skip hidden files
      if($entry[0] == ".") continue;

      // check for image files
      $f = escapeshellarg("$fulldir$entry");
      $mimetype = trim(`file -bi $f`);
      foreach($imagetypes as $valid_type) {
        if(preg_match("@^{$valid_type}@", $mimetype)) {
          $retval[] = array(
           'file' => "/$dir$entry",
           'size' => getimagesize("$fulldir$entry")
          );
          break;
        }
      }
    }
    $d->close();

    return $retval;
  }

  // fetch image details
  $images = getImages("../images/thumbnails");

  // display on page
  foreach($images as $img) {
    echo "<div class=\"photo\">";
    echo "<img src=\"{$img['file']}\" {$img['size'][3]} alt=\"\"><br>\n";
    // display image file name as link
    echo "<a href=\"{$img['file']}\">",basename($img['file']),"</a><br>\n";
    // display image dimenstions
    echo "({$img['size'][0]} x {$img['size'][1]} pixels)<br>\n";
    // display mime_type
    echo $img['size']['mime'];
    echo "</div>\n";
  }
?> 
```

如果有人可以提供帮助，我真的很感激..

**编辑：**

```
<div style=" height: 200px; width: 600px; overflow: auto;">
<?PHP
 foreach(glob("../thumbnail/".'*') as $filename){
    echo "<div style=\"display:inline-table; font-size:10px; font-family:'Tahoma'; margin:5px;\">";
    echo "<img width=\"100px\" height=\"100px\" src=\"../thumbnail/$filename\"/>";
    echo "<br>".basename($filename) . "<br>";
    echo "</div>";
}
?>
</div> 
```

这种方法效果很好。无需使用复杂的脚本。无论如何，有人可以告诉我如何检查显示的小于 100px x 100px 的图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T16:40:31.823

```
<?PHP
 foreach(glob("../thumbnail/".'*') as $filename){
    list($width, $height, $type, $attr) = getimagesize("../thumbnail/".$filename);
    if($width>=100 || $height >=100) continue;
    $rest = substr($filename, 3);
?> 
```

应该这样做。。

# mysql - Mysql：查询表如下

> ID：11374704
> 
> 赞同：1
> 
> 时间：2012-07-07T11:44:34.863
> 
> 标签：mysql, concatenation, user-defined-functions, string-concatenation

我有下表：

```
|-------------------|
| id | Homephone    |
|-------------------|
| 1  | 454454125    |
| 2  | 47872154587  |
| 3  | 128795423    |
| 4  | 148784474    |
|-------------------| 
```

我在表中有大约 40.000 行。

我想将`Homephone`值格式化如下：

```
454-454-125 
478-721-545-87
128-795-423
148-784-474 
```

即在我想要的每3个数字之后`-`（连字符）。
如何使用 MySQL 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:43:31.323

基本上，您需要创建自己的函数（所谓的[UDF](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html) - 用户定义函数）并在表上运行它。
Andrew Hanna 在 MySQL Reference Manual 的[String Functions](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)章节中发布了一个不错的函数。我在那里修复了一个小错误（替换`WHILE (i < str_len) DO`为`WHILE (i <= str_len) DO`.
有两个步骤（两个 SQL 查询）：

1.  创建函数。它有三个参数：`str`- 要修改`pos`的字符串， - 插入到字符串中的字符的位置， - 要插入的`delimit`字符：

    ```
    DELIMITER //
    CREATE FUNCTION insert_characters(str text, pos int, delimit varchar(124))
    RETURNS text
    DETERMINISTIC
    BEGIN
        DECLARE i INT DEFAULT 1;
        DECLARE str_len INT;
        DECLARE out_str text default '';
        SET str_len = length(str);
        WHILE (i <= str_len) DO
            SET out_str = CONCAT(out_str, SUBSTR(str, i, pos), delimit);
            SET i = i + pos; 
        END WHILE;
        -- trim delimiter from end of string
        SET out_str = TRIM(trailing delimit from out_str);
        RETURN(out_str);
    END//
    DELIMITER ; 
    ```

2.  运行函数...

    *   ...用于测试目的（选择，无更新）：

        ```
        SELECT insert_characters(Homephone, 3, "-") AS new_phone FROM my_table; 
        ```

    *   ...更新记录：

        ```
        UPDATE my_table SET Homephone = insert_characters(Homephone, 3, "-"); 
        ```

请尝试逐行分析函数。这个例子可以帮助你理解这个主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:59:13.363

你需要为此写一个[udf](http://dev.mysql.com/doc/refman/5.0/en/adding-functions.html)

# android - ArrayAdapter 超越界限

> ID：11374705
> 
> 赞同：0
> 
> 时间：2012-07-07T11:44:37.403
> 
> 标签：android

我有一个`ArrayAdapter`充满`ArrayList`。每次我点击它的任何项目时，我都会重新填写`ArrayList`并发`notifyOnDataSetChange()`送到`adapter`. 但是由于我未知的原因，它在填充其项目`ArrayList`的方法中超出了范围。`getView()`我不明白为什么会这样。你们能解释一下`getView()`调用理论吗，所以我明白为什么会这样。提前致谢！

这里是：

```
class MAdapter extends ArrayAdapter<String> {
    public MAdapter(Context context, int textViewResourceId, List<String> objects) {
        super(context, textViewResourceId, objects);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.file_explorer_row, null);
    } else {

    }

        String txt = itemsList.get(position); // Out of bounds happens here
        if (!txt.equals("")) {
            TextView tt = (TextView) v.findViewById(R.id.file_explorer_tv_filename);
            tt.setText(txt);
        }

    return v;
} 
```

`itemsList`在外部类中声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:05:39.350

像这样改变

```
public View getView(int position, View convertView, ViewGroup parent) {         
        View view = convertView;
        if (view == null) 
        {              
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);          
            view = inflater.inflate(R.layout.file_explorer_row, parent, false);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:52:30.067

`String txt = itemsList.get(position);`
`itemsList.get(position)`返回一个整数值，并且您尝试将其存储在字符串中。这可能是原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:01:58.673

虽然我没有清楚地了解您的要求..我假设您正在重新填充整个 ArrayAdapter....

所以试试这个…………

**在将适配器设置为之前在 ListView 上使用 removeView() ...**

例如：

```
ListView.removeView(); 
ListView.setAdapter(yourAdapter); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T12:10:04.187

试试这个代码：

```
class MAdapter extends BaseAdapter {
    List<String> objects;
    Context context;
    public MAdapter(Context context,List<String> objects) {
        super();
        this.context=context;
        this.objects=objects;
    }

    public int getCount() {
        return objects.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    Holder holder;
    LayoutInflater vi;
    if (v == null) {
        holder=new Holder();
        vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.file_explorer_row, null);
        holder.tt= (TextView) v.findViewById(R.id.file_explorer_tv_filename);
        v.setTag(holder);
    } else {
        holder = (Holder) v.getTag();
    }
        String txt = objects.get(position); // Out of bounds happens here
        if (!txt.equals("")) {
            holder.tt.setText(txt);
        }

    return v;
}

static class Holder{
    TextView tt;
}
} 
```

# iphone - 类似自动作弊应用程序的 OCR

> ID：11374716
> 
> 赞同：-2
> 
> 时间：2012-07-07T11:45:33.410
> 
> 标签：iphone, ocr

我打算为 iPhone 编写一个简单的 OCR 引擎，例如“自动作弊”应用程序，它可以扫描“与朋友交流”的游戏板。我该怎么做呢？是否有任何源代码可供我根据需要使用和更改？我是这个 OCR 的新手。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:35:23.797

您需要查看[适用于 iPhone 的 OpenCV](http://www.eosgarden.com/en/opensource/opencv-ios/documentation/tutorial/)。这个问题：[关于形状识别的 iPhone OpenCV 教程](https://stackoverflow.com/questions/5738792/tutorial-for-iphone-opencv-on-shape-recognising)，有一些链接可以帮助你。请记住，如果您之前从未使用过 OpenCV，这不是一个容易开始的项目。祝你好运！

# c# - 如何找到具有列表项给定参数的列表项？

> ID：11374722
> 
> 赞同：0
> 
> 时间：2012-07-07T11:46:35.623
> 
> 标签：c#, linq, list, search

如何找到具有列表项给定参数的列表项？

我的清单定义为；

```
public List<Column0A> list0A = new List<Column0A>(); 
```

并具有以下项目；

```
list0A.Add(new Column0A(header.type, message.receieveTime, message.importance, message.data)); 
```

我已经根据我的列表在我的 GUI 上列出了所有 message.receiveTime。我真正想要的是；当用户单击 receiveTime 标签时，我想显示一个工具提示，其中显示列表项的（相同接收时间）所有数据，如下所示：

> 标题：header.type
> 
> 接收时间：receiveTime
> 
> 重要性：message.Importance
> 
> 数据：message.data

我怎样才能找到相同的receieveTime 列表实例？我应该使用 LINQ 吗？你能给我一个代码示例吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:08:57.780

我建议您使用 ID 而不是时间戳作为查找。如果此信息来自数据库，则这可能是主键字段。它使您的意图更清晰，并允许您在两个碰巧有相同时间时选择正确的信息。然后选择您的项目：

```
int theIdImLookingFor = //the one they just clicked on
Column0A myItem = list0A.Single(x => x.ID == theIdImLookingFor);
//display myItem's info in a tooltip 
```

（`Single`是一个 LINQ 扩展）如果您还不清楚，您应该研究、、 和之间的区别`Single`，然后选择适合您情况的那个。`First``SingleOrDefault``FirstOrDefault`

# gettext - php gettext 和 poedit - 使用或不使用构造函数会更快

> ID：11374723
> 
> 赞同：0
> 
> 时间：2012-07-07T11:46:45.437
> 
> 标签：gettext, poedit, php-gettext

我将一些属性及其选项存储在类 Attributes 中。

```
public static $ethnicity        = array(0 => '-', 
                                        1 => 'Asian',
                                        2 => 'Black / African descent',
                                        3 => 'East Indian',
                                        4 => 'Latino / Hispanic',
                                        5 => 'Middle Eastern',
                                        6 => 'Native American',
                                        7 => 'Pacific Islander',
                                        8 => 'White / Caucasian',
                                        9 => 'Other'); 
```

为什么我将它们保存在代码中而不是数据库中是另一回事。现在我对 poedit 有疑问，因为它无法读取动态翻译。我现在有两个选择：

a) 将所有数组值放入一个转储文件。此文件将仅由 poedit 解析器使用：

```
_('Asian'), _('Black / African descent'), ... 
```

通过这种方式，我可以通过以下方式调用视图中的翻译：

```
echo _(Attributes::$ethnicity[3])); 
```

b）我可以使用构造函数并从那里调用 gettext 。

```
class Attributes 
{ 

    public function __construct()
    {
        $this->ethnicity        = array(0 => _('-'), 
                                        1 => _('Asian'),
                                        2 => _('Black / African descent'),
                                        3 => _('East Indian'),
                                        4 => _('Latino / Hispanic'),
                                        5 => _('Middle Eastern'),
                                        6 => _('Native American'),
                                        7 => _('Pacific Islander'),
                                        8 => _('White / Caucasian'),
                                        9 => _('Other'));  
      //...      
    }                                    
} 
```

通过这种方式，我可以通过以下方式调用视图中的翻译：

```
$attr = new Attributes;
echo $attr->ethnicity[3]; 
```

**现在我的问题：**

假设将有大约 10 个这样的属性，平均有 40 个选项，所以这总共有 400 个数组对。以这种方式使用构造会以任何方式减慢应用程序吗？因为这意味着每次我调用构造函数时，都会为所有数组值调用 gettext，即使此属性值未显示在视图中。如果我不使用构造函数，那么只会为实际使用的单个属性值调用 gettext。

我做了ab测试，但很惊讶，因为没有任何区别。但我担心我一定会遗漏一些东西，因为我的感觉会说以这种方式调用构造函数会减慢速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:17:17.977

我个人会坚持使用解决方案 B，因为它更清洁，几个月后你仍然知道`$attr->ethnicity[3];` 它的作用。

如果您仍然不确定，请尝试做一些压力测试 - 尝试多次调用构造函数。但我的拙见是不会有显着差异。特别是如果您不需要在实时应用程序中多次调用它。gettext 旨在快速。

# jquery - jquery悬停标签，底部和顶部行，共享中央容器

> ID：11374728
> 
> 赞同：1
> 
> 时间：2012-07-07T11:47:21.147
> 
> 标签：jquery, tabs, hover

希望你好！

我这里有一个小项目要解决...

…我一直在玩并在这里设置了一个 jsfiddle 来说明所需的目标…</p>

...我已将标签元素定位在顶部和底部...顶部标签为绿色，底部标签为红色...</p>

...底部的红色标签行需要是不同的 CSS 类，因为我需要对它们应用不同的图形...</p>

..我有一个小提琴，但不确定绑定它以适应顶行选项卡的“moving_bg”类……和底行的“moving_bg-B”类。

…基本上是 8 个 UL 内容块，需要共享该中央容器：

[http://jsfiddle.net/AMCBP/](http://jsfiddle.net/AMCBP/)

…正如我们所见，我们应用了正确的 html 结构和 css，但是当使用底行选项卡时，UL 块不会滑过 UL 块编号 4。

...作为一个 jquery noob 任何帮助，非常感谢指针！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:10:19.723

问题是这样的：

```
 var background = $(this).parent().find(".moving_bg"); 
```

您只为一个类编写了动画，`.moving_bg`这是您的顶部选项卡，因此动画效果很好。您的底部选项卡具有`.moving_bg-B`类，因此没有为该类放置动画。

如果要同时使用顶部和底部选项卡动画，则需要使用两个类的联合。

```
 var background = $(this).parent().find(".moving_bg,.moving_bg-B"); 
```

在上面的代码中，我正在合并两个类。

为您更新 JSfiddle：http: [//jsfiddle.net/AMCBP/2/](http://jsfiddle.net/AMCBP/2/)

# validation - asp.net 代码无效验证

> ID：11374731
> 
> 赞同：1
> 
> 时间：2012-07-07T11:47:39.370
> 
> 标签：validation

我无法弄清楚这段代码到底出了什么问题。我是 asp.net 的新手。

```
<body>
    <form id="form1" runat="server">
    <div>
    <asp:TextBox ID="txt" runat="server" />
        <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
            ErrorMessage="RegularExpressionValidator" ValidationExpression="^\d{4}$"></asp:RegularExpressionValidator>

    </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:49:01.007

您缺少验证属性的控件。只需将其设置为 ControlToValidate ="txt"。像这样

```
 <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
            ErrorMessage="RegularExpressionValidator" ControlToValidate ="txt" ValidationExpression="^\d{4}$"></asp:RegularExpressionValidator> 
```

# deployment - 在 Windows Azure 中配置 SSL

> ID：11374733
> 
> 赞同：0
> 
> 时间：2012-07-07T11:48:23.097
> 
> 标签：deployment, ssl, azure

我是 Windows azure 的新手。我浏览了网页，但现在卡住了。这是我的问题。我已经部署了一个 Web 角色并上传了一个证书。我还配置了域名。

在控制面板证书名称是***.mydomain.com**。我的网站响应**mysubdomain.mydomain.com**。在我的天蓝色项目的属性中，在证书选项卡中，我添加了一个名为**Mydomain**的证书，并从控制面板复制粘贴了我的证书的指纹。

然后在端点选项卡中我添加了一个端点

```
   名称：端点2
   类型：输入
   公共端口：8080
   证书：Mydomain（我最近添加的那个）

```

然后我通过 Visual Studio 发布了这个项目。

但它不会通过 https 打开。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:04:04.497

我已经解决了这个问题。我不得不将公共端口从 8080 更改为 443，一切正常。

# c# - System.ComponentModel.Win32Exception：操作成功完成

> ID：11374735
> 
> 赞同：0
> 
> 时间：2012-07-07T11:48:25.013
> 
> 标签：c#, winforms, graphics

我正在创建一个带有多个面板的 Windows 窗体以使用 C# 显示图形。

```
try
{
    if (myBuffer != null)
        myBuffer.Dispose();
    myBuffer = currentContext.Allocate(this.panel1.CreateGraphics(), this.panel1.DisplayRectangle);
}
catch (Win32Exception ex)
{
    MessageBox.Show(ex.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

这是正在使用的代码。

我收到此错误**System.ComponentModel.Win32Exception: The Operation Complected successfully**同时从最小化状态最大化窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:09:38.703

BufferedGraphicsContext 类是一个应该在内部进行的实现细节。它没有足够的弹性来应对诸如为无形控件创建错误之类的错误。显然，它的异常报告也没有得到足够好的调试，这对于不会经常出错的代码来说并不少见。

显然，您这样做是为了双缓冲面板控件，默认情况下它们不是。只需创建您自己的控件，从 Panel 派生。向您的项目添加一个新类并粘贴如下所示的代码。编译并将添加到工具箱顶部的新控件拖放到表单上，替换现有的控件。

```
using System;
using System.Windows.Forms;

class BufferedPanel : Panel {
    public BufferedPanel() {
        this.DoubleBuffered = true;
    }
} 
```

# fonts - SVG 粗体、斜体和下划线未在 Image Magick 中呈现

> ID：11374739
> 
> 赞同：1
> 
> 时间：2012-07-07T11:48:43.330
> 
> 标签：fonts, svg, imagemagick, jquery-svg

我使用 SVG、jquery（keith woods 包装器）、Web 服务等创建了一个在线图形编辑器。它的工作方式与 Google Docs Drawing 应用程序相同。我已经对编辑器进行了编码以更改元素上的字体并且效果很好，除了当我使用 ImageMagick 或 Inkscape 生成图形（png 或 jpg）时，粗体、斜体和下划线对字体不起作用。但是，在网页中查看 SVG 时，粗体、斜体和下划线效果很好。

我对 Stack Overflow 进行了一些研究，有人指出 CSS 解释字体样式并为斜体添加倾斜字体，并为粗体添加描边。

我注意到使用 Google 文档绘图时，它们会生成文本路径。我认为这可能是一个很好的解决方案，只要我能找到一个函数或一种通过跟踪文本来生成路径的方法。我还没有尝试过这样的事情，而是想先来这里询问人们的意见。有没有其他人遇到过这个困难？如果是这样，你是如何克服它的？我见过有人建议使用 SVG 字体，但我对这个想法犹豫不决，因为显然在 FireFox 中不支持它，在 IE 中几乎没有？我必须说，让我的编辑器在所有浏览器中工作一直是一场噩梦，但我们已经跨越了许多障碍才能到达现在的位置，我不希望像字体这样简单的东西妨碍我们。

如果有人可以就此给我一些建议，将不胜感激，因为该系统在网络上运行，人们可以使用它，但粗体、斜体和下划线被禁用。

先感谢您

# jquery - 悬停效果jquery不起作用

> ID：11374745
> 
> 赞同：0
> 
> 时间：2012-07-07T11:49:03.173
> 
> 标签：jquery

我尝试使用以下代码进行悬停效果。但它不起作用请帮助我

脚本

```
$('.sha').hover(
  function () {
    $(this).next().children('div').css('display','block');
  }, 
  function () {
    $(this).next().children('div').css('display','none');
  }) 
```

HTML

```
<div class="listing_share_cont">
    <a href="#" class="sha">Share</a>
    <img src="images/listing_share_arrow_down.jpg" alt=" ">                 
    <div class="list_view_share_button_pop_up_cont">
        <div class="list_view_share_button_pop_up_cont_arrow">
            <img src="images/home_list_view_share_pop_arrow.png" alt=" " />
        </div>
        <div class="list_view_share_button_pop_up">
            <!-- Some images here -->
        </div>
    </div>
</div> 
```

CSS

```
.list_view_share_button_pop_up_cont { 
    float: left; left: 10px; position: absolute; top: 9px; width:285px; display:none;
}
.list_view_share_button_pop_up_cont_arrow {
    float:left; width:265px; margin:0 0 -4px 0;
}
.list_view_share_button_pop_up { 
    float:left; width:265px; background:#0474be; padding:8px 8px 4px 8px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:58:22.003

您要显示的`.sha`元素是悬停元素的兄弟。您可以使用[`siblings`](http://api.jquery.com/siblings/)选择该元素（请注意，您可以使用`show`and`hide`代替`css`）：

```
$('.sha').hover(function () {
    $(this).siblings(".list_view_share_button_pop_up_cont").show();
}, function () {
    $(this).siblings(".list_view_share_button_pop_up_cont").hide();
}); 
```

从那里，您可以将代码减少到只有一个回调，它使用[`toggle`](http://api.jquery.com/toggle/)：

```
$('.sha').hover(function () {
    $(this).siblings(".list_view_share_button_pop_up_cont").toggle();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:05:11.503

使用 .first() 和 nextAll 得到你想要的

```
$('.sha').hover(
  function () {
    $(this).nextAll("div").first().show();
  }, 
  function () {
    $(this).nextAll("div").first().hide();
  }) 
```

# objective-c - 如何在Objective c中存储常量数据？

> ID：11374746
> 
> 赞同：1
> 
> 时间：2012-07-07T11:49:06.170
> 
> 标签：objective-c, actionscript-3, data-structures, nsmutabledictionary, parse-platform

我是一名 AS3 游戏开发人员，他正试图了解 Obj-c。我不确定 Obj-c 的一件事是如何存储游戏数据。在 AS3 中，我会做这样的事情......

```
static var playerData:Object = {position:{startX:200, startY:200}}; 
```

我可以像这样轻松访问...

```
var x1:Number = playerData['Position']['startX']; 
```

或者，如果我有多行数据，我什至可以做这样的事情......

```
myData["runOnFrame" + currentImageIndex] 
```

我可以在哪里访问对象 runOnFrame1、runOnFrame2 等等。

我昨天问了一个关于如何设置上面的初始数据结构的问题，并得到了一些答案......

[我将如何在目标 c 中创建这个 AS3 数据结构？](https://stackoverflow.com/questions/11361155/how-would-i-create-this-as3-data-structure-in-objective-c)

但至少可以说，使用可变字典设置基本游戏数据的方式似乎有点冗长。

所以（最后）谈到这个问题，考虑到我通常如何在 AS3 中进行设置，我在 Obj-c 中设置游戏数据的最佳方式是什么？看来我的选择是...

1.  在上面的链接中使用可变字典方法

2.  设置一个将数据保存为基本变量的类，但是我不确定如何动态访问该类中的变量（例如我的 runOnFrame 示例）

3.  也许使用一个数组，但后来我失去了我认为的标签。

还是有更好的方法？XML？我在这个项目中使用 Parse，这看起来很棒，我想知道我是否应该直接使用 parse 存储我的数据，所以从一开始就从数据库访问所有数据，也许这将是一个很好的选择开始的事情。话虽如此，我知道我想将一些数据硬编码到游戏中，所以任何关于如何最好地做到这一点的想法都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:02:43.487

您对逐项初始化可变字典太长的观察当然是正确的。事实上，[即将发布的 Objective C 版本将为这项任务提供更好的语法](http://clang.llvm.org/docs/ObjectiveCLiterals.html)：

```
NSDictionary *playerData = @{ @"position" : @{@"startX":@200, @"startY":@200} }; 
```

但是，在这个漂亮的语法可用之前，您可以做一些事情：您可以准备一个很长的字典，将它作为*属性列表*保存在一个文件中，并用单次读取 plist 替换长的初始化代码，[这样回答您之前的问题](https://stackoverflow.com/a/3996273/335858)建议：

```
playerData = [NSMutableDictionary dictionaryWithContentsOfFile:@"playerdata.plst"]; 
```

# python - ValueError：Openerp 中没有对 stock.report_picking_list 的引用

> ID：11374751
> 
> 赞同：-3
> 
> 时间：2012-07-07T11:50:09.893
> 
> 标签：python, openerp

更新 openerp-server6.0 时出现以下错误。我在 Opensuse 操作系统上工作有什么帮助吗？

```
Traceback (most recent call last):
File "./openerp-server.py", line 121, in <module>
db,pool = pooler.get_db_and_pool(dbname, update_module=tools.config['init'] or         tools.config['update'], pooljobs=False)
File "workspace/openERP/src/openerp-server/bin/pooler.py", line 39, in get_db_and_pool
addons.load_modules(db, force_demo, status, update_module)
File "workspace/openERP/src/openerp-server/bin/addons/__init__.py", line 883, in load_modules
processed_modules.extend(load_module_graph(cr, graph, status, report=report,skip_modules=processed_modules))
File "workspace/openERP/src/openerp-server/bin/addons/__init__.py", line 748, in load_module_graph
load_init_update_xml(cr, m, idref, mode, kind)
File "workspace/openERP/src/openerp-server/bin/addons/__init__.py", line 641, in load_init_update_xml
tools.convert_xml_import(cr, m, fp, idref, mode=mode, **kwargs)
File "workspace/openERP/src/openerp-server/bin/tools/convert.py", line 975, in convert_xml_import
obj.parse(doc.getroot())
File "workspace/openERP/src/openerp-server/bin/tools/convert.py", line 865, in parse
self._tags[rec.tag](self.cr, rec, n)
File "workspace/openERP/src/openerp-server/bin/tools/convert.py", line 826, in _tag_record
f_val = _eval_xml(self,field, self.pool, cr, self.uid, self.idref)
File "workspace/openERP/src/openerp-server/bin/tools/convert.py", line 152, in _eval_xml
idref)
File "workspace/openERP/src/openerp-server/bin/tools/convert.py", line 146, in _process
idref[id]=self.id_get(cr, id)
File "workspace/openERP/src/openerp-server/bin/tools/convert.py", line 842, in id_get
res = self.model_id_get(cr, id_str)
File "workspace/openERP/src/openerp-server/bin/tools/convert.py", line 851, in model_id_get
return model_data_obj.get_object_reference(cr, self.uid, mod, id_str)
File "workspace/openERP/src/openerp-server/bin/tools/misc.py", line 823, in cached_result
result2 = fn(self2, cr, *args[:self.skiparg-2], **kwargs2)
File "workspace/openERP/src/openerp-server/bin/addons/base/ir/ir_model.py", line 609, in get_object_reference
data_id = self._get_id(cr, uid, module, xml_id)
File "workspace/openERP/src/openerp-server/bin/tools/misc.py", line 823, in cached_result
result2 = fn(self2, cr, *args[:self.skiparg-2], **kwargs2)
File "workspace/openERP/src/openerp-server/bin/addons/base/ir/ir_model.py", line 602, in _get_id
raise ValueError('No references to %s.%s' % (module, xml_id))
ValueError: No references to stock.report_picking_list 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:39:59.653

根据错误，您的报告标签似乎已从`report.xml`. 将此标签写入`stock/stock_report.xml`：

```
 <report id="report_picking_list" model="stock.picking" name="stock.picking.list" string="Packing list" rml="stock/report/picking.rml"/> 
```

然后更新库存模块。我相信您不会再收到此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T04:35:12.273

我已经检查了您的回溯，`report_picking_list`您的代码中缺少带有 XML 标识符的菜单，如果您正在使用代码，您可能已经删除了它，我已经添加了参考代码，您可以在其中找到它。

```
./stock/stock_report.xml:5:        
         <report id="report_picking_list" model="stock.picking" name="stock.picking.list" string="Packing list" rml="stock/report/picking.rml"/> 
```

如果您在单个数据库中遇到此问题，则意味着您已删除具有相同标识符的记录，因此`ir_model_data`您可以添加此命名记录，以便他们参考修复它。或者，如果它出现在所有数据库上，则使用新数据库检查意味着您的代码已被篡改，因此您可以重新检查您的代码。

问候。

# android - 如何在android中处理两个布局的两个活动

> ID：11374753
> 
> 赞同：0
> 
> 时间：2012-07-07T11:50:32.517
> 
> 标签：android, android-layout

在我的 Android 应用程序中，我有两个活动。

一个是`GmapsActivity`一个是`GmapsActivity1` 两个布局`login.xml`和`main.xml`

默认情况下，我想加载`login.xml`，然后在此我想调用`main.xml`不同的密码条件。但是当我打电话时`GmapsActivity1`应用程序崩溃了。这是我的代码示例`GmapsActivity`

```
public class GMapsActivity extends MapActivity {

EditText password;
Button   login;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.login);

        password=(EditText)findViewById(R.id.pass);
        login=(Button)findViewById(R.id.logbtn);

        login.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v)
            {
                Intent myIntent = null;
                if(password.getText().toString().equals("admin")) {
                myIntent = new Intent(getApplicationContext(), GMapsActivity.class);
                startActivity(myIntent);
                } else {
                Toast.makeText(getBaseContext(), "invalid password - try again",  Toast.LENGTH_SHORT).show();
                }

            }

        });

    }

    @Override
    protected boolean isRouteDisplayed() {

        return false;
    }

    } 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:59:51.830

添加这个

```
myIntent.setFlag(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:00:53.910

试试这个，并在你的`Manifest.xml`

```
login.setOnClickListener(new View.OnClickListener() { 

    public void onClick(View v) {               
      Intent intent = new Intent(GMapsActivity .this,YourActivityTwo.class);                        
      startActivity(intent);
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:04:56.303

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.login);

    password=(EditText)findViewById(R.id.pass);
    login=(Button)findViewById(R.id.logbtn);

    login.setOnClickListener(new OnClickListener(){
        public void onClick(View v)
        {
            Intent myIntent = null;
            if(password.getText().toString().equals("admin")) {
            myIntent = new Intent(GMapsActivity1.this, GMapsActivity.class);
            startActivity(myIntent);
            } else {
            Toast.makeText(getBaseContext(), "invalid password - try again",  Toast.LENGTH_SHORT).show();
            }

        }

    });

}

@Override
protected boolean isRouteDisplayed() {

    return false;
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T12:29:20.473

我可以在您的代码中看到您所在的位置，`GmapsActivity`并在登录按钮中单击您正在调用

```
myIntent = new Intent(getApplicationContext(), GMapsActivity.class);
                startActivity(myIntent); 
```

这意味着再次启动 GmapsAvtivity。作为 Intent 构造函数，将第二个参数作为 **另一个不同的活动名称**。

您应该按照以下步骤使其正常工作。

1) 创建一个活动 LoginActivity，在其中显示登录表单，在登录按钮上单击检查用户/ID/密码，如果正确，则调用 startActivity 和 startGmapsActivity。

2）创建GmapsActivity，并在登录屏幕后显示您想要显示的任何内容。

3) 在清单文件中注册这两个活动。

**永远不要在不推荐的同一活动中调用 setContentView 两次**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T18:51:04.493

好的，所以你有

**GMapsActivity.java**与**GmapsActivity1**与`login.xml` _**`main.xml`**

 **首先像这样改变你的清单

```
<application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".GMapsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" >
                    <category android:name="android.intent.category.LAUNCHER" >
                    </category>
                </action>
            </intent-filter>
        </activity>
        <activity
            android:name=".GmapsActivity1"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.LAUNCHER" >
                </category>
            </intent-filter>
        </activity>
    </application> 
```

那么你的**GMapsActivity.java**应该是这样的

```
@Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.login);

        //..some code here..
     }

@Override  
 public void onClick(View v) {  
  Intent i = new Intent(GMapsActivity.this, GmapsActivity1.class);  
  startActivity(i);  
 } 
```

最后你的**GmapsActivity1.java**应该是这样的

```
@Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

        //..some code here..
     } 
```

您也可以查看下面的简单教程以了解这一点

[**从 Android 中的 Activity 启动/加载 Activity**](http://rdcworld-android.blogspot.in/2012/04/start-activity-from-activity.html)

仍有疑问，请告诉我！！**

# php - 重定向到 codeigniter 中的引用 url

> ID：11374759
> 
> 赞同：17
> 
> 时间：2012-07-07T11:52:01.113
> 
> 标签：php, codeigniter, http-referer

在我的项目的消息系统中，当您收到来自用户的消息时，您会收到电子邮件警报，说另一个用户已发送消息以查看消息，请单击此处（即消息的 url）所以如果用户没有登录到系统他被重定向到登录页面，登录后它应该返回到引荐网址。我在核心文件夹中创建了一个basecontoller，并扩展了CI_controller，验证代码如下。

```
function authenticate($type = 'user')
    {
        if($type == 'user')
        {
            if($this->user_id)
            {
                // user is logged in. check for permissions now
            }
            else
            {
                // user isnt logged in. store the referrer URL in a var.
                if(isset($_SERVER['HTTP_REFERER']))
                {
                    $redirect_to = str_replace(base_url(),'',$_SERVER['HTTP_REFERER']);
                }
                else
                {
                    $redirect_to = $this->uri->uri_string();
                }            

                redirect('user/login?redirect='.$redirect_to);
                exit;
            }
        }

        if($type == 'admin')
        {
            if($this->session->userdata('admin_id') && $this->session->userdata('user_type') ==5)
            {
                // Admin is logged in
            }
            else
            {
                redirect('admin/login');
                exit;
            }
        }
    } 
```

引荐来源网址是“http://example.com/project/pm/view_conversation?id=11”现在的问题是我在 view_conversation 之前获得引荐来源网址并且无法获得 id 部分。

有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-13T18:15:53.497

这可以帮助：

CI 2+ [https://www.codeigniter.com/userguide2/libraries/user_agent.html](https://www.codeigniter.com/userguide2/libraries/user_agent.html)

CI 3+ [http://www.codeigniter.com/userguide3/libraries/user_agent.html](http://www.codeigniter.com/userguide3/libraries/user_agent.html)

以下解决方案适用于 Codeigniter 版本 3

```
$this->load->library('user_agent');
if ($this->agent->is_referral())
{
    echo $this->agent->referrer();
} 
```

更新：有关如何使用相同的 user_agent 库获取引荐来源信息的有趣且有用的信息
[https://www.tutorialandexample.com/user-agent-class/](https://www.tutorialandexample.com/user-agent-class/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-10T11:40:32.670

刚刚怎么样

```
redirect($_SERVER['HTTP_REFERER']); 
```

使用 php 的[`$_SERVER`](http://www.php.net/manual/en/reserved.variables.server.php)全局变量。

这对我有用！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-12T14:21:35.423

**将该代码放入您的登录控制器**

```
function index() {
    $this->load->library('user_agent');  // load user agent library

    //Set session for the referrer url
    $this->session->set_userdata('referrer_url', $this->agent->referrer() );  
} 
```

**登录后重定向代码**

```
// user is authenticated if referrer is there
if( $this->session->userdata('referrer_url') ) {
    //Store in a variable so that can unset the session
    $redirect_back = $this->session->userdata('referrer_url');
    $this->session->unset_userdata('referrer_url');
    redirect( $redirect_back );
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-26T07:45:01.327

因为你的 url 中有两个问号，所以浏览器会忽略第二个之后的 url 部分。使用[urlencode](http://php.net/manual/en/function.urlencode.php)重定向部分，如下所示：

```
redirect('user/login?redirect='.urlencode($redirect_to)); 
```

我已经测试过了，它是这样工作的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T08:50:29.923

默认情况下，CI 配置为忽略 URL 的查询部分（“？”之后的部分）。

请参阅：[http ://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

# hibernate - asm 和 hibernate 以及 cglib 的兼容性问题...？

> ID：11374761
> 
> 赞同：1
> 
> 时间：2012-07-07T11:52:19.177
> 
> 标签：hibernate, cglib

我正在获取 glassfish 服务器日志:,

```
SEVERE: Initial SessionFactory creation failed.java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V 
```

我正在使用netbeans。最近三天我很沮丧。

请帮助如何消除此错误..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:26:02.807

这意味着您的 asm 和 cglib 版本不同步。尝试降级您的 asm 库版本，看看是否有帮助。

# c# - SQLite 和删除命令

> ID：11374769
> 
> 赞同：2
> 
> 时间：2012-07-07T11:53:32.350
> 
> 标签：c#, sqlite

```
 bool ret = false;
        try
        {
            SQLiteConnection sqlConn = new SQLiteConnection("Data Source=" + m_dbName);
            sqlConn.Open();
            SQLiteCommand sqlComm = sqlConn.CreateCommand();
            sqlComm.CommandText = "DELETE FROM " + szTablename+" WHERE name="+name+"";            

            SQLiteDataAdapter sqlAdapter = new SQLiteDataAdapter(sqlComm);

            if (null == sqlAdapter)
            {
                ret = false;
            }
            else
            {
                ret = true;
            }
            sqlConn.Close();
            return ret;
        }
        catch (SQLiteException sqlEx)
        {
            Console.WriteLine(sqlEx.Message);
            return false ;
        } 
```

我有该代码可以删除 sqlite 数据库中的一行，但是单击删除按钮后什么也没做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:00:30.877

`DataAdapter`您可以直接执行命令，而不是使用 a ：

```
using(SQLiteConnection sqlConn = new SQLiteConnection("Data Source=" + m_dbName))
{
    sqlConn.Open();
    //create command

    sqlCommand.ExecuteNonQuery();
} 
```

`ExecuteNonQuery`除非你能明智地处理它们，否则你不应该吞下从方法中抛出的任何异常。您应该使用参数化查询，而不是通过连接字符串手动创建查询。如图所示，您还应该确保在完成使用后关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:56:12.767

尝试使用单引号：

```
sqlComm.CommandText = "DELETE FROM " + szTablename+" WHERE name='"+name+"'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-05T23:03:34.630

您是否尝试过 在查询中使用`like`而不是：`=`

```
sqlComm.CommandText = "DELETE FROM " + szTablename+" WHERE name="+name+"" 
```

像这样：

```
sqlComm.CommandText = "DELETE FROM " + szTablename+" WHERE name like "+name+"" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-07T15:23:44.127

```
using (SQLiteCommand com = new SQLiteCommand(con))
                {
                    com.CommandText = "DELETE FROM " + szTablename + " WHERE name='" + name + "';";
                    com.ExecuteNonQuery();
                    com.Dispose();
                } 
```

# javascript - 如何使 Twitter 流 API 与 jsOAuth 一起使用？

> ID：11374771
> 
> 赞同：0
> 
> 时间：2012-07-07T11:53:59.737
> 
> 标签：javascript, twitter, streaming, jsoauth

正如我在之前的问题的回答中所指出的那样： [Twitter APIs : update working, but filter doesn't](https://stackoverflow.com/questions/11372835/twitter-apis-update-working-but-filter-does-not)

.. `filter`API 是流式 API： [https ://dev.twitter.com/docs/streaming-apis](https://dev.twitter.com/docs/streaming-apis)

我想让 jsOAuth 与这些流 API 一起工作： [https ://github.com/bytespider/jsOAuth](https://github.com/bytespider/jsOAuth)

它适用于 REST API，如果有人制作（或知道如何制作）它适用于流式 API，请赐教！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:32:56.110

jsOauth 目前**不**支持流式 API，正如它自己的作者所证实的那样：

[https://github.com/bytespider/jsOAuth/issues/29#issuecomment-6841882](https://github.com/bytespider/jsOAuth/issues/29#issuecomment-6841882)

看起来我将不得不找到一个替代方案，直到下一个版本。

# windows-phone-7 - 将变量转换为字节数组

> ID：11374775
> 
> 赞同：1
> 
> 时间：2012-07-07T11:54:48.640
> 
> 标签：windows-phone-7

我想将视频转换为字节数组以供上传。

```
var videoInput = new Uri("/uploadNewVideo;component/test.mp4", UriKind.Relative); 
```

我正在尝试将字节数组作为参数上传到 php：

```
string a = "TRIAL";
string url = "phpURL?";
client.DownloadStringAsync(new Uri(url + "&uploadedfile=" + bytearray + "&name=" + a)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:39:06.347

首先，您使用错误的方法下载视频本身。而不是`DownloadStringAsync`，您需要使用[OpenReadAsync](http://msdn.microsoft.com/en-us/library/system.net.webclient.openreadasync%28v=vs.95%29.aspx)。这样您就可以访问传入的字节流。

此外，仅供参考，您将无法按照您的方式连接字节数组和字符串。

# java - 无法将数据发布到服务器，出现错误 java.io.IOException：服务器返回 HTTP 响应代码：415

> ID：11374777
> 
> 赞同：2
> 
> 时间：2012-07-07T11:55:09.067
> 
> 标签：java, curl, http-status-code-415

我无法将数据发布到服务器，得到错误为 . 但它在 curl 脚本中运行良好。

```
Error reading URL

        java.io.IOException: Server returned HTTP response code: 415 for URL: https://8.7.177.4/api/domains/amj.nms.mixnetworks.net/subscribers/9001?do_not_disturb=no
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
        at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
        at CurlAuthentication.authenticatePostUrl(CurlAuthentication.java:109)
        at CurlAuthentication.main(CurlAuthentication.java:134)
    Error reading URL 
```

下面是代码。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.io.StringWriter;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLSession;

public class CurlAuthentication {

    public void authenticatePostUrl() {

        HostnameVerifier hv = new HostnameVerifier() {

            @Override
            public boolean verify(String urlHostName, SSLSession session) {
                System.out.println("Warning: URL Host: " + urlHostName
                        + " vs. " + session.getPeerHost());
                return true;
            }
        };
        // Now you are telling the JRE to trust any https server.
        // If you know the URL that you are connecting to then this should
        // not be a problem
        try {
            trustAllHttpsCertificates();
        } catch (Exception e) {
            System.out.println("Trustall" + e.getStackTrace());
        }
        HttpsURLConnection.setDefaultHostnameVerifier(hv);
        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw);
        try {
            URL url = new URL("www.stackoverflow.com");

            String credentials = "user" + ":" + "password";
            String encoding = Base64Converter.encode(credentials.getBytes("UTF-8"));
            HttpsURLConnection  uc = (HttpsURLConnection) url.openConnection();
            uc.setDoInput(true); 
            uc.setDoOutput(true);
            uc.setRequestProperty("Authorization", String.format("Basic %s", encoding));
            uc.setRequestMethod("POST");
            uc.setRequestProperty("Content-Type", "application/xml");
            uc.setRequestProperty("Accept", "application/xml");
            uc.getInputStream();
            System.out.println(uc.getContentType());
            InputStream content = (InputStream) uc.getInputStream();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    content));
            String line;
            while ((line = in.readLine()) != null) {
                pw.println(line);
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
            pw.println("Invalid URL");
        } catch (IOException e) {
            e.printStackTrace();
            pw.println("Error reading URL");
        } catch (Exception e) {
            e.printStackTrace();
        }
        System.out.println(sw.toString());
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        CurlAuthentication au = new CurlAuthentication();
        au.authenticatePostUrl();
    }

    // Just add these two functions in your program

    public static class TempTrustedManager implements
            javax.net.ssl.TrustManager, javax.net.ssl.X509TrustManager {
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
        }

        public boolean isServerTrusted(
                java.security.cert.X509Certificate[] certs) {
            return true;
        }

        public boolean isClientTrusted(
                java.security.cert.X509Certificate[] certs) {
            return true;
        }

        public void checkServerTrusted(
                java.security.cert.X509Certificate[] certs, String authType)
                throws java.security.cert.CertificateException {
            return;
        }

        public void checkClientTrusted(
                java.security.cert.X509Certificate[] certs, String authType)
                throws java.security.cert.CertificateException {
            return;
        }
    }

    private static void trustAllHttpsCertificates() throws Exception {

        // Create a trust manager that does not validate certificate chains:

        javax.net.ssl.TrustManager[] trustAllCerts =

        new javax.net.ssl.TrustManager[1];

        javax.net.ssl.TrustManager tm = new TempTrustedManager();

        trustAllCerts[0] = tm;

        javax.net.ssl.SSLContext sc =

        javax.net.ssl.SSLContext.getInstance("SSL");

        sc.init(null, trustAllCerts, null);

        javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(

        sc.getSocketFactory());

    }

} 
```

我从上面的代码中做错了什么吗？我需要使用 curl 脚本来发布数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:20:58.680

好吧，正如[`Error 415`](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)已经说明的那样：

> 415 不支持的媒体类型
> 
> 请求实体具有服务器或资源不支持的媒体类型。例如客户端上传图片为image/svg+xml，但服务器要求图片使用不同的格式。

如果不知道服务器期望您向他发送什么规格，就很难说出您缺少什么。似乎您只想从服务器接收数据而不向他发送任何内容。

通过设置`uc.setRequestProperty("Content-Type", "application/xml");`，您告诉服务器您将一些 XML 数据[交给他](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)（您没有），他可能也不会预料到这一点，所以他给了您这个错误。

当您在 POST 数据中发送一些 urlencoded 数据时，请尝试将其设置为：

```
uc.setRequestProperty("Content-Type", "application/x-www-form-urlencoded; charset=utf-8"); 
```

# php - PHP 错误处理 - “errorHandler 缺少参数”

> ID：11374778
> 
> 赞同：0
> 
> 时间：2012-07-07T11:55:11.607
> 
> 标签：php, function, error-handling

我第一次尝试设置错误处理。
如果有错误，它确实可以工作并报告错误，但由于某种原因，它总是显示错误处理函数本身的“缺少参数”错误。请注意我的错误处理函数在一个单独的文件中，并且包含在索引页面中，我不确定这是否是问题：S

这是我的错误处理功能

```
function errorHandler($errno, $errstr, $error_file, $error_line) {

  if(isset($errstr)) {
    # There is an error, display it
    echo $errno." - ".$errstr." in ".$error_file." at line ".$error_line."<br>";
  } else {
    # There isn't any error, do nothing
    return false;
  }

}

// We must tell PHP to use the above error handler.
set_error_handler("errorHanlder"); 
```

这是索引页面

```
<!-- # Error Handler -->
<? if(errorHandler()) { ?>
<section id="error-handler">
  <?=errorHandler();?>
</section>
<? } ?> 
```

这是浏览器中的结果（请记住，没有 php 错误，所以这个错误处理程序不应该输出任何东西 - 这是我无法理解的

```
2 - Missing argument 1 for errorHandler(), called in index.php on line 20 and defined in inc/arcError.fnc.php at line 10
2 - Missing argument 2 for errorHandler(), called in index.php on line 20 and defined in inc/arcError.fnc.php at line 10
2 - Missing argument 3 for errorHandler(), called in index.php on line 20 and defined in inc/arcError.fnc.php at line 10
2 - Missing argument 4 for errorHandler(), called in index.php on line 20 and defined in inc/arcError.fnc.php at line 10 
```

知道为什么 PHP 会报告缺少的参数吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T11:58:09.250

您正在使用零参数调用该函数...

```
<?=errorHandler();?> 
```

为什么你仍然需要调用它？

您的代码中有几个拼写错误：将“Hanlder”替换为“Handler”。

没有必要这样做：

```
if(isset($errstr)) { 
```

出现错误时会自动调用您的错误处理函数（并且仅在这种情况下！）。$errstr 是这个函数的一个参数，它总是在函数执行时设置。

新代码：

```
function errorHandler($errno, $errstr, $error_file, $error_line) {
    # There is an error, display it
    echo "<section id='error-handler'>$errno - $errstr in $error_file at line $error_line</section><br>";
}

// We must tell PHP to use the above error handler.
set_error_handler("errorHandler"); 
```

# c# - DbContext 破坏了附加的实体：为什么？

> ID：11374779
> 
> 赞同：4
> 
> 时间：2012-07-07T11:55:21.547
> 
> 标签：c#, .net, entity-framework

我有一些这样的代码：

```
Activity[] GetAllActivities() {
  using (ScheduleContext ctx = new ScheduleContext())
    return ctx.Activities.AsNoTracking().ToArray();
} 
```

目标是对一些数据进行非常简单的内存缓存：`Activities`映射到一个数据库视图，该视图总结了我需要的所有内容。

如果我*省略* `AsNoTracking`返回的对象是不确定的损坏：返回对象的属性设置不正确，并且经常一个对象的属性值在其他对象的属性中重复。没有警告或异常；既不在 EF4.3.1 也不在 EF5rc2 上。CLR 4 和 4.5 候选版本都表现出相同的行为。

`Activity`对象非常简单；`int`仅由基本类型（ 、等）的非虚拟属性组成`string`，没有键，也没有与任何其他实体的关系。

这是预期的行为吗？我在哪里可以找到有关此的文档？

我知道一旦相关`DbContext`信息消失，显然更改跟踪就无法工作，但我很惊讶物化属性在没有警告的情况下被破坏。我主要担心我会`AsNoTracking`在更复杂的场景中忘记某个地方，并得到一些看似合理但错误的结果。

***编辑：***实体如下所示。谢谢乔纳森和克里斯托夫；确实有一列被推断为ID！

```
public class Activity
{
  public string ActivityHostKey { get; set; }
  public int ActivityDuration { get; set; }
  public int ActivityLastedChanged { get; set; }
  public string ActivityId { get; set; }//!!!
  public string ModuleHostKey { get; set; }
  public string ModuleName { get; set; }
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:02:33.663

我认为“经常一个对象的属性值在其他对象的属性中重复”并且`Activity`对象“并且没有键”是这里的关键信息（不是双关语）。

导入视图（显然没有主键）时，EF 会猜测主键是什么。如果随后启用了跟踪，它会使用该主键来确保在内存中只创建每个实体的一个副本。这意味着如果您为 EF 猜测为 PK 的字段加载具有相同值的两行，则第二行的值将覆盖第一行。

至于“非确定性损坏”的数据，这可能是因为数据库不保证返回行的顺序，并且它是 EF 中的“最后获胜”过程，所以如果记录的顺序从数据库中更改，保留其值的记录也会更改。

尝试将更多列标记为主键的一部分，或修改视图（或 EDMX 中的 DefiningQuery）以包含基于[ROW_NUMBER 函数](http://msdn.microsoft.com/en-us/library/ms186734.aspx)的列，以便您可以将其用作主键。

# java - 如何在java中将不同的日期格式转换为时间戳对象？

> ID：11374781
> 
> 赞同：1
> 
> 时间：2012-07-07T11:55:31.533
> 
> 标签：java, datetime, timestamp

我有以下代码将日期/日期时间的不同字符串表示形式转换为时间戳对象：

```
public class GeneralMethods {

    public static String[] formats = {"dd/mm/yyyy","mm/dd/yyyy hh:mm:ss","E MMM dd HH:mm:ss zzz yyyy"};

/**
 * a method to return timestamp object from string date in the formats 
 * {"dd/mm/yyyy HH:mm:ss","E MMM dd HH:mm:ss zzz yyyy","dd/mm/yyyy"} 
 * @param date: the date to format in string representation
 * @return timestamp object
 */
public static Timestamp timestampFormat(String date)
{
    Date dateObj = new Date(); 
    for(String format: formats)
    {
         try 
         {
             dateObj =  new SimpleDateFormat(format).parse(date);
                        System.out.println(dateObj.toString()); // for tracking

         }catch (ParseException e) 
         {

         }  
    }
    return new Timestamp(dateObj.getTime());

}

   // testing
   public static void main (String args[])
  {
    System.out.println(timestampFormat("05/31/2011 21:37:35"));
  }

} 
```

此代码的输出是：

```
Wed Jan 05 00:31:00 GMT 2011
Mon Jan 31 21:37:35 GMT 2011
2011-01-31 21:37:35.0 
```

如您所见，输出中的月份对于输入 05/31/2011 21:37:35 是错误的。这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:58:19.970

`mm`是分钟`MM`是几个月，所以你设置分钟和月份的模式默认设置为一月。

尝试将您的模式更改为`"dd/MM/yyyy", "MM/dd/yyyy hh:mm:ss"`

# zend-framework - 扩展 Yii Autoloader 以加载使用 Zend 约定命名的类

> ID：11374785
> 
> 赞同：0
> 
> 时间：2012-07-07T11:56:19.510
> 
> 标签：zend-framework, yii, kohana, autoload

我目前正在尝试使用 Yii 框架，但遇到了一些小问题。作为 Kohana 的重度用户，我习惯于根据 Zend 约定命名类。例如：

```
new Example_Foo_Bar; 
```

将在路径中引用一个类：

```
Example/Foo/Bar.php 
```

然而，在 Yii 框架中，自动加载器逻辑期望路径是：

```
Example/Foo/Example_Foo_Bar.php 
```

在它能够定位和加载类文件之前，这当然不适合我的用例。我已经尝试在 Yii 中使用命名空间，这已经达到了一定程度，但是当我尝试从命名空间类中引用 Yii 本机类（例如模型）时，它会尝试从当前命名空间加载模型，这是预期的，但肯定不是我在追求什么。

有谁知道如何扩展 Yii 自动加载机制，以便能够使用自己的约定和 Zend 约定加载类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:09:20.097

有一个扩展可以做到这一点：[zendautoloader](http://www.yiiframework.com/extension/zendautoloader)

# c - fgets() 中的包装函数

> ID：11374789
> 
> 赞同：1
> 
> 时间：2012-07-07T11:57:00.990
> 
> 标签：c, multidimensional-array, fgets, null-terminated

我正在寻找 c 编程方面的专家。提前致谢。

例子：

```
#include <stdio.h>
#include<stdlib.h>
#include<ctype.h>

void main()
{
char name[100][52],selection[2]="Y";
int x,nname=1;
float sales;

do
{
    printf("Enter name: ");
    fflush(stdin);
    fgets(name[nname],51,stdin); // i need put a wrapper in here
    printf("Enter sales: ");
    scanf("%f",&sales);
    if (sales<1000)
        printf("%s\tgood\n",name[nname++]);
    else
        printf("%s\tvry good\n",name[nname++]);
    printf("Enter another name?(Y/N)");
    fflush(stdin);
    fgets(selection,2,stdin);
    *selection=toupper(*selection);
}while(nname<=100 && *selection=='Y');
for(x=1;x<nname;x++)
    printf("%s\n",name[x]); // want print the result without(newline) /n

printf("END\n");
system("pause");
} 
```

如何打印名称而不用换行符分隔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:30:52.590

我用 GCC 4.4.1 - MinGW 编译它，它工作正常。它只发出警告。这是结果：

```
 warning: return type of 'main' is not 'int'|
||=== Build finished: 0 errors, 1 warnings ===| 
```

* * *

现在它可以按您的预期工作。

```
#include <stdio.h>
#include<stdlib.h>
#include<ctype.h>
#include <string.h> // strlen()

void main() {
    char name[100][52],selection[2]="Y";
    int x,nname=1;
    float sales;

    do {
        printf("Enter name: ");
        fflush(stdin);
        fgets(name[nname],51,stdin); // i need put a wrapper in here
        for (x=0; x<strlen(name[nname]); x++){ // this will discarge the \n
        if (name[nname][x] == '\n')
            name[nname][x] = '\0';
        }
        printf("Enter sales: ");
        scanf("%f",&sales);
        if (sales<1000)
            printf("%s\tgood\n",name[nname++]);
        else
            printf("%s\tvry good\n",name[nname++]);
        printf("Enter another name?(Y/N)");
        fflush(stdin);
        fgets(selection,2,stdin);
        *selection=toupper(*selection);
    } while(nname<=100 && *selection=='Y');
    for(x=1; x<nname; x++)
        printf("%s ",name[x]); // want print the result without(newline) /n

    printf("\nEND\n"); // inserted \n before END
    system("pause");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:00:55.927

只需使用

```
printf("%s ", name[x]); 
```

代替

```
printf("%s\n", name[x]); 
```

角色正在创建新的`\n`线条。

# 编辑

`fgets`显然将换行符读入缓冲区 - 您可以使用

```
name[nname][strlen(name[nname])-2] = '\0'; 
```

# mysql - 如何连接一张表中的两个长查询？

> ID：11374792
> 
> 赞同：0
> 
> 时间：2012-07-07T11:58:19.923
> 
> 标签：mysql, join

我有专栏

```
First name | last name | nr (individual number) | pref1 (preference1) | pref2 (preference2)| pref3(preference3) | situation | distance | sex 
```

一张表中有 100 条记录

在所有的结果中，我不能有裁员。这意味着当我在第一组结果中获得例如“2112”的单个编号（列“nr”）时，它不能显示在最后一个结果中。

```
SELECT DISTINCT nr FROM ap 
```

第一次查询的记录：

```
WHERE sex='F' and pref1='1' ORDER BY situation DESC, distance DESC
AND  WHERE (sex='F' and pref2='1' and situation= ' ' ) ORDER BY distance DESC
and WHERE (sex='F' and pref3='1' and situation= ' ' ) ORDER BY distance DESC
LIMIT 4 
```

然后我想加入第二个查询的结果：

```
WHERE sex='M' and pref1='2' ORDER BY situation DESC, distance DESC
AND WHERE (sex='M' and pref2='2' and situation= ' ' ) ORDER BY distance DESC
AND WHERE (sex='M' and pref3='2' and situation= ' ' ) ORDER BY distance DESC
LIMIT 7 
```

然后加入上次查询的所有记录：

```
WHERE sex='F' and pref1='3' ORDER BY situation DESC, distance DESC
AND WHERE (sex='F' and pref2='3' and situation= ' ' ) ORDER BY distance DESC
AND WHERE (sex='F' and pref3='3' and situation= ' ' ) ORDER BY distance DESC
LIMIT 10 
```

有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:03:56.603

尝试使用[UNION](http://www.java2s.com/Tutorial/MySQL/0040__Select-Query/UNIONJoins.htm)，这只是一个使用 UNION 的简单示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:04:58.833

```
SELECT DISTINCT nr FROM  
(select distinct nr from ap WHERE sex='F' and pref1='1' ORDER BY situation DESC,   distance DESC Union
select distinct nr from ap WHERE (sex='F' and pref2='1' and situation= ' ' ) ORDER BY distance DESC union
select distinct nr from ap WHERE (sex='F' and pref3='1' and situation= ' ' ) ORDER BY distance DESC union
LIMIT 4)
UNION
(select distinct nr from ap WHERE sex='M' and pref1='2' ORDER BY situation DESC,   distance DESC union
select distinct nr from ap WHERE (sex='M' and pref2='2' and situation= ' ' ) ORDER BY distance DESC union
select distinct nr from ap WHERE (sex='M' and pref3='2' and situation= ' ' ) ORDER BY distance DESC union
LIMIT 7
)
UNION
(select distinct nr from ap WHERE sex='F' and pref1='3' ORDER BY situation DESC,   distance DESC union
select distinct nr from ap WHERE (sex='F' and pref2='3' and situation= ' ' ) ORDER BY distance DESC union
select distinct nr from ap WHERE (sex='F' and pref3='3' and situation= ' ' ) ORDER BY distance DESC union
LIMIT 10
)) 
```

# hbase - 在 HBase 表中存储非键值对数据

> ID：11374805
> 
> 赞同：0
> 
> 时间：2012-07-07T11:59:41.987
> 
> 标签：hbase

使用HBase，我们可以保存大数据。但是这些数据必须是键值对。如何存储sql表中不是键值对的任何数据。如何将其保存在hbase表中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:19:41.517

HAdoop 中的 Hbase 是“NOSQL 格式”。Hive 支持 SQL 格式。您可以尝试在 Hive 中加载数据。在 Hbase 中，数据将是面向列的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:02:58.343

最简单的解决方案是使用 RDBMS 表的主键作为行键。其他列可以对应HBase表的不同列（一些或不同的列族）

# c++ - 定义双感叹号？

> ID：11374810
> 
> 赞同：17
> 
> 时间：2012-07-07T12:00:34.640
> 
> 标签：c++, boolean, logical-operators

我理解双感叹号的作用（或者我认为我理解），但我不确定它是如何在随机对象上定义的。例如在下面的代码片段中：

```
Assignment *a;
if (!getAssignment(query, a))
   return false;
hasSolution = !!a;

if (!a)
   return true; 
```

我怎么知道双感叹号会产生什么值？换句话说，它总是转换为 true 吗？错误的 ？或者你可以为它定义一个行为，比如执行一个方法来确定结果（对象如何知道在这种情况下如何行动）？由于所有这些感叹号的事情，我对这段代码有点困惑。任何解释都值得赞赏。

希望我很清楚，谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-07T12:03:31.817

`a`是一个指针。在 C++ 中，`nullptr`被定义为无效指针。`!pointer`将`nullptr`指针变为`true`，将非`nullptr`指针变为`false`. `!boolean`变成和。`true`_ _ 它会一直有效。`false``false``true`

`!(!a)`是一种有用的思考方式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-07T12:05:35.887

不要将其视为“双感叹号”，将其视为两个独立的运算符，一个运行在另一个的结果上。

对于所有原始类型，它将“工作”。 `!a`等价于`a == 0`, so`!!a`等价于`!(a == 0)`, 而后者又等价于`a != 0`.

对于用户定义的类型，除非它们重载，否则它不会编译`operator !`。但显然，在这种情况下，行为几乎可以是任何东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-07T12:10:58.880

`!!`不是 C++ 中的单个标记，而是简单地解析为应用`!`运算符两次。

由于`a`是指针而不是类类型的对象，`!`因此不能重载。它被定义为`true`如果`a`是空指针则返回，`false`否则返回。

第二个应用`!`简单地否定第一个的结果`!`。

表达式`!!a`等价于`a != 0`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-07T13:00:34.290

代码非常复杂。实际上，您想测试`getAssigment`方法是否成功以及分配的指针是否为非空。

代码测试，尽管以一种复杂的方式，利用弱类型，而不是试图接受显式性和 C++ 的强类型。因此，它不是惯用的 C++，而且比必要的更难理解。

特别是，不要`!!a`在 C++ 中使用。在 JavaScript 等弱类型语言中，这是一个既定的习惯用法，用于将值强制转换为布尔类型。但在 C++ 中，这*并不*常用。

`hasSolution`由于未定义或使用代码，因此尚不清楚代码的作用。但是，我*怀疑*代码应该等同于以下内容：

```
Assignment *a;
return getAssignment(query, a) and a == nullptr; 
```

（在 C++11 之前，您需要编写`0`而不是`nullptr`.）

但是，这段代码仍然暴露了一个糟糕的设计：为什么是`a`通过引用传递的？为什么不是返回值？更糟糕的`a`是，从来没有使用过，所以没有必要。如果`a`确实没有必要，则应完全省略。如果有必要，它应该是返回值。也就是说，原型`getAssignment`应该是这样的：

```
Assignment* getAssignment(the_type_of_query query); 
```

它应该简单地使用如下：

```
Assignment* a = getAssignment(query); 
```

此外，我怀疑这段代码实际上将内存所有权分配给了原始指针`a`。在现代 C++中[强烈建议不要这样做。](http://dl.dropbox.com/u/6101039/Modern%20C%2B%2B.pdf)要么不使用指针，要么使用智能指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T12:02:50.270

```
bool result = true; 
result = !!result; // result = true, e.g. !result is false, !!result is !false. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-07T12:25:20.593

没有“！！” 运算符，所以实际上该语句等价于：

hasSolution = !(!a);

因此，首先，在表达式“a”上调用 operator!()，然后在结果上调用另一个 operator!()。在我们的代码中，“a”是一个指向赋值的指针。C++ 定义了在指针类型上使用 operator!() 的特殊情况：它返回一个布尔值，如果指针为空则为真，否则为假。简而言之，与表达式相同（a == 0）。对 (!a) 的结果调用 operator!()，它是一个布尔值，只是简单地恢复结果，即如果 (!a) 为假则返回真，如果 (!a) 为真则返回假。

所以总而言之，(!!a) 返回与 (a != 0) 相同的结果。这是因为“a”是一个指针。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-07T18:58:12.710

记住双重否定 !!a 的最简单方法是将 a!=0 缩小到 1 并将 a==0 缩小到 0。这是在布尔上下文（即 C++）中是真还是假。

# cocoa - 表视图：viewForTableColumn：行：未调用

> ID：11374815
> 
> 赞同：6
> 
> 时间：2012-07-07T12:01:18.103
> 
> 标签：cocoa, nstableview, appkit

我是 AppKit 的新手，但不是 UIKit 的新手。
我尝试使用 an`NSTableView`并且我想以编程方式填充。

所以我实施

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    return 1;
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
    return nil;
} 
```

我将我的类设置为 Interface Builder 中的委托和数据源。
`numberOfRowsInTableView`被调用但`tableView:viewForTableColumn:row:`未被调用。

如果我添加

```
-(id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex{
    return @"toto";
} 
```

这个叫。

如果我理解，`tableView:viewForTableColumn:row:`则称为基于视图的表，`tableView:objectValueForTableColumn:row:`称为基于单元格的表。

如何定义我的表是基于视图的？

**编辑：** 好的......所以问题是我使用的是 10.6 和 tableView:viewForTableColumn:row: 从 10.7 开始可用。所以这意味着在 10.7 之前只有基于单元格的表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T14:24:25.983

在 Interface Builder 的 Attributes inspector 面板 (Cmd-Opt-4) 中，将 table view type 设置为 View Based。默认情况下它是基于单元格的。

您必须在左侧对象视图中或通过在编辑器中单击它来选择表视图。请注意，第一次在编辑器中单击它时，它将选择滚动视图，因此您必须第二次单击它才能选择表视图对象。

我相信您需要 Xcode 4.3 或更高版本的 OS X 10.7 SDK，因此需要基于视图的表格视图。

# c# - 另一个线程中的 KeyHook

> ID：11374817
> 
> 赞同：0
> 
> 时间：2012-07-07T12:01:25.907
> 
> 标签：c#, multithreading, hook, keyboard-hook, setwindowshookex

在我的 C# 应用程序中，我想做 keyhook，但是，当按下键时调用的方法在另一个线程中调用。这样就不会发生我的程序省略一个键的情况，因为我的应用程序正忙于其他事情。我怎样才能使它在另一个线程中？我发现信息表明，根据我创建钩子的线程，按下键时调用的方法将在该线程中调用，但这不会发生。不管我在哪个线程中钩住它，这个方法总是在主线程中被调用。请帮忙。这是我的代码大纲：

```
int HookProc(int code, int wParam, ref lParamStruct lParam)
{
    // ... this should be invoked in another thread - thread th, which I use to call SetWindowsHook
}
void SetWindowsHook()
{
    lpMsg msg = new lpMsg();

    PeekMessage(out msg, new IntPtr(0), 0, 0, PM_NOREMOVE);

    hhook = SetWindowsHookEx(WH_KEYBOARD_LL, HookProc, new IntPtr(0), 0);

    while (GetMessage(out msg, new IntPtr(0), 0, 0))
    {
        DefWindowProc(msg.hwnd, msg.message, msg.wParam, msg.lParam);
        if (abortThreadFlag)
            break;

    }
    UnhookWindowsHookEx(hhook);
} 
```

SetWindowsHook 是以这种方式调用的，但 id 不会强制在另一个线程中调用该方法：

```
 Thread th = new Thread(SetWindowsHook);
 th.Start() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:53:02.020

消息循环的重点是让 Windows 有机会调用您的挂钩过程。它没有其他方法可以调用您的代码。它不能闯入并强制你的线程运行代码，这会导致可怕的重入问题。挂钩过程只能在您的代码调用 GetMessage() 时运行。并将在该线程的上下文中运行。您可以通过查看 GetCurrentThreadId() 的返回值来验证这一点。

否则，使用线程无法解决慢速挂钩过程。在挂钩过程返回之前，Windows 不会分派任何其他输入事件。让它足够慢，Windows 将强行杀死钩子以恢复。考虑使用从线程安全队列中提供的工作线程，从而允许您的钩子过程快速返回。

# jquery - jquery.ajax 概述和向服务器发出请求

> ID：11374822
> 
> 赞同：0
> 
> 时间：2012-07-07T12:01:44.870
> 
> 标签：jquery

好吧，也许我已经阅读了太多关于这个主题的帖子，现在我很困惑。

有人可以简要概述一下为了在 Jquery 中发出 ajax 请求并获取调用结果而要遵循的过程。

我想问题 1 是你会选择在 javscript 上使用 jquery 来发出 xhr 请求吗？

我可以清楚地看到 javascript 方法是如何工作的，它很有意义并且易于理解。但是各种文章都指出了使用 jquery 的好处，声称

("#input_Field1").load("ajax_Request.php"); 是您进行异步调用所需的全部内容。

如果是这种情况，您应该如何处理 jquery.ajax 及其设置和全局事件处理程序，以及这对 .load 有何影响

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:11:53.547

jQuery 简化了发出 XHR 请求的 JavaScript，通常 AJAX 请求如下所示：

```
$.ajax({
    url: 'page.php',
    data: 'data=test',
    type: 'POST',
    success: function(data){
        // Do something
    }
}); 
```

在这里，您将值为 'test' 的变量 'data' 发布到 'page.php'，然后调用回调函数 success()，您可以对 page.php 返回的任何数据执行某些操作。

$.load() 有点不同，你可以简单地说：

```
$('#container').load('test.php'); 
```

'test.php' 的内容将被放入 ID 为 'container' 的元素中。所以在这里，您的问题的答案是肯定的，这就是您发出 AJAX 请求所需的全部内容。

在此处查看[$.load() 事件处理程序和变量](http://api.jquery.com/load/)，并在[此处查看 $.ajax](http://api.jquery.com/jQuery.ajax/)事件处理程序和变量。

# python - 子进程抓取 airodump-ng 的标准输出

> ID：11374825
> 
> 赞同：1
> 
> 时间：2012-07-07T12:02:11.390
> 
> 标签：python, python-3.x, subprocess

我正在尝试使用子进程从 airodump-ng 中获取标准输出，但没有成功。我认为我的代码会导致死锁。

```
 airodump = subprocess.Popen(['airodump-ng','mon0'],stdin=subprocess.PIPE,
                              stdout=subprocess.PIPE,
                              stderr=subprocess.PIPE)

    # wait for 15 seconds to find all networks
    time.sleep(15)

    # save the output
    o_airodump = airodump.stdout.read()
    os.kill(airodump.pid, signal.SIGKILL)
    # airodump.terminate
    print(o_airodump) 
```

如何避免这个问题。想不出一个干净的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:42:57.730

不要休眠并等待（这只会导致 airodump 阻塞在一个完整的管道缓冲区上）并且不要使用无限的 read()。communicate() 方法可以满足您的需要：

```
o_airodump, unused_stderr = airodump.communicate(timeout=15)
airodump.kill() 
```

注意：关于通信的超时参数是在 Python 3.3 中引入的，目前还没有*完全*推出。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:06:38.423

```
airodump.communicate() 
```

等待进程终止然后返回`(stdout, stderr)`

如果你真的推动你总是可以使用 ctypes 直接链接到 c 库。享受黑客攻击。

# android - 使用构造函数和 setter 方法将操作传递给 Android Intent

> ID：11374826
> 
> 赞同：0
> 
> 时间：2012-07-07T12:02:22.613
> 
> 标签：android, android-intent

我被写来运行简单的 android 相机应用程序以在 android 4 上运行它。

该代码最初将相机意图定义为

```
Intent cameraIntent = new Intent();
cameraIntent.setType(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
```

当我尝试运行此应用程序时，它抛出异常：-

07-07 12:44:09.755: E/AndroidRuntime(11533): android.content.ActivityNotFoundException: 没有找到处理 Intent { typ=android.media.action.IMAGE_CAPTURE } 的活动

但是，当我尝试通过如下定义“cameraIntent”来运行相同的程序时，它运行良好 -

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
```

我认为通过 setter 或通过构造函数将“动作”传递给意图是相同的。

但似乎并非如此，因为通过 setter 方法传递“动作”会引发异常，而通过构造函数将其传递给 new Intent 工作正常。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:07:02.817

此代码工作正常：

```
Intent cameraIntent = new Intent();
cameraIntent.setAction(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
```

代替

```
Intent cameraIntent = new Intent();
cameraIntent.setType(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
```

因为

[setType(String type)](http://developer.android.com/reference/android/content/Intent.html)用于：

> 设置显式 MIME 数据类型。

和

[setAction(String action)](http://developer.android.com/reference/android/content/Intent.html)用于：

> 设置要执行的一般操作。

# javascript - 如何在 javascript 应用程序、JSON 中存储和访问信息项？

> ID：11374827
> 
> 赞同：0
> 
> 时间：2012-07-07T12:02:23.487
> 
> 标签：javascript, jquery, json

我正在尝试存储小的描述并使用 jquery 在不同时间将它们调用到 div 中。有 50 条不同的数据。我想我会创建一个简单的 json 对象来存储我的信息。我想知道如何使用 javascript 访问数据？

我试过了，但它根本不起作用：

```
var myArray = JSON.parse(timeline_info);
var length = myArray.length;
alert(myArray.0[0]); 
```

这是我的 JSON：

```
var timeline_info = {
    0 : [1972,lorem ipsum blablabla,video address,],
    1 : [1972,lorem ipsum blablabla,video address,],
    2 : [1972,lorem ipsum blablabla,video address,],
    3 : [1972,lorem ipsum blablabla,video address,],
    4 : [1972,lorem ipsum blablabla,video address,],
    5 : [1972,lorem ipsum blablabla,video address,],
    6 : [1972,lorem ipsum blablabla,video address,],
    7 : [1972,lorem ipsum blablabla,video address,],
    8 : [1972,lorem ipsum blablabla,video address,],
    9 : [1972,lorem ipsum blablabla,video address,],
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:04:28.367

*   `timeline_info`不是 JSON 文本，它是 JavaScript 对象文字。
*   `{}`表示一个对象，而不是一个数组，由 . 表示`[]`。
*   数组或对象的末尾不应有尾随逗号。
*   字符串必须加引号。
*   自动分号插入有一些陷阱，避免它。

您已订购数据，请使用数组文字。

```
var i, timeline_info, length;
timeline_info = [
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"],
    [1972,"lorem ipsum blablabla","video address"]
];

length = timeline_info.length;
for (i = 0; i < length; i++) {
    console.log(timeline_info[i][0]); // 1972, 10 times.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:06:48.583

那[不是 JSON](http://jsonlint.com/)。尝试

```
var timeline_info = [
    {
        "year": 1972,
        "description": "lorem ipsum blablabla",
        "video": "video address"
    },
    {
        "year": 1972,
        "description": "lorem ipsum blablabla",
        "video": "video address"
    }
]; 
```

并使用`timeline_info[0].year`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:07:08.087

这里缺少一些东西。

1.  您应该用引号括起任何字符串文字。像这样 -
    `[1972,'lorem ipsum blablabla','video address']`

2.  您不应该在不需要它们的地方使用尾随逗号字符。您在每个数组条目的末尾有一个额外的逗号，并且在对象中的最后一个元素之后有一个额外的逗号。

* * *

这将是格式化对象的正确方法。

```
var timeline_info = {
    0 : [1970,'lorem ipsum blablabla','video address'],
    ...
    8 : [1978,'lorem ipsum blablabla','video address'],
    9 : [1979,'lorem ipsum blablabla','video address']
} 
```

现在`timeline_info[0][0]`将返回`1970`。

# android - 预先编写的 android 代码抛出 nullPointerException

> ID：11374829
> 
> 赞同：0
> 
> 时间：2012-07-07T12:02:44.467
> 
> 标签：android, nullpointerexception

我不知道为什么这段代码会抛出 nullPointerException。我没有编写这部分代码，我对这个员工很陌生。我尽力了，但找不到答案。

```
public class ProgramExamActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        
    setContentView(R.layout.main);
    setTitle("Screen #1");
}
public void onClick(View v) {       
    switch(v.getId()) {     
        case R.id.btn2:
                setContentView(R.layout.screen2);
                setTitle("Screen #2");
                break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:07:36.463

首先，这

```
setContentView(R.layout.screen2);
setTitle("Screen #2"); 
```

你不能，你不应该多次调用它。

其次，如果你想使用`OnClickListener`，你需要注册一些`widget`，并且在你的代码中有任何`widget`.

`View.OnClickListener`在您的情况下，如果您不想将*侦听器*作为匿名类使用，则您的类需要实现

```
public class Program... extends Activity implements View.OnClickListener { ... } 
```

然后你需要像这样注册它：

```
Button btn = (Button) findViewById(R.id.btn2);
btn.setOnClickListener(this); 
```

**注意：**如果你想`Activity`用不同的标题和内容开始另一个，你必须使用`Intents`和调用`startActivity()`。

有关[Intents](http://developer.android.com/reference/android/content/Intent.html)的更多信息，还有教程[Android: How to switch between Activities](http://www.warriorpoint.com/blog/2009/05/24/android-how-to-switch-between-activities/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:15:30.807

将点击事件的监听器添加为

```
public class ProgramExamActivity extends Activity implements OnClickListener{ 
```

然后，使用此侦听器注册您的组件。假设您想在任何按钮上添加点击，例如 btn1。然后在 OnCreate 中添加代码

```
btn1.setOnClickListener(ProgramExamActivity.this); 
```

# sql-server - 自引用表中的 Eclipselink 中的级联删除

> ID：11374831
> 
> 赞同：1
> 
> 时间：2012-07-07T12:02:54.340
> 
> 标签：sql-server, jpa, eclipselink

我试图将 JPA 中的删除级联到自引用表，但无论我做什么，我都会得到同样的错误。

```
@Entity
@Table(name="SYS_ACL", schema="dbo")
public class ACL implements Serializable {
private static final long serialVersionUID = 1L;
@EmbeddedId
protected AccessControlListPK accessControlListPK;

@JoinColumn(name = "ROLE_ID", referencedColumnName = "ID", nullable = false, insertable = false, updatable = false)
@ManyToOne(optional = false)
private Roletable roletable;

@JoinColumn(name = "VIEW_ID", referencedColumnName = "ID", nullable = false, insertable = false, updatable = false)
@ManyToOne(optional = false)
private PageMap pagemap;

@Column(name="PARENT_ROLE")
private Long parentrole;

@Column(name="PARENT_VIEW_ID")
private Long parentview;

@JoinColumns({
    @JoinColumn(name = "PARENT_ROLE", referencedColumnName = "ROLE_ID", nullable = true, insertable = false, updatable = false),
    @JoinColumn(name = "PARENT_VIEW_ID", referencedColumnName = "VIEW_ID", nullable = true, insertable = false, updatable = false)})
@OneToMany(cascade = CascadeType.ALL, orphanRemoval=true)
@PrivateOwned
private List<ACL> children = new LinkedList<ACL>(); 
```

这是我得到的错误：

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: The DELETE statement conflicted with the SAME TABLE REFERENCE constraint "SYSCCSSCNTRLLSTPRNTVWD". The conflict occurred in database "mydb", table "dbo.SYS_ACL" Error Code: 547 
```

数据库结构是这样的：

```
CREATE TABLE SYS_ACL (

VIEW_ID NUMERIC,
ROLE_ID NUMERIC,

PARENT_ROLE NUMERIC,
PARENT_VIEW_ID NUMERIC,

CONSTRAINT PK PRIMARY KEY (ROLE_ID, VIEW_ID),
CONSTRAINT FK1 FORIEGN KEY (VIEW_ID) REFERENCING VIEW_TABLE(ID),
CONSTRAINT FK2 FORIEGN KEY (ROLE_ID) REFERENICNG ROLE_TABLE(ID),
CONSTRAINT FKSELF FOREIGN KEY (PARENT_ROLE, PARENT_VIEW) REFERENCING SYS_ACL(ROLE_ID, VIEW_ID)); 
```

我可以使用递归方法首先删除孩子，但我想知道在 JPA 中是否可以这样做。我正在使用 GF 3.1 和 Eclipselink 2.3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:09:27.123

什么是 SQL 日志？

您的模型似乎过于复杂。您可能想要删除 AccessControlListPK 并在 @ManyToOnes 上放置一个 @Id。

您的问题可能是因为您在@OneToMany 上使用@JoinColumn，通常您会使用mappedBy 和@ManyToOne 逆，您似乎使用@Basuc 作为外键，删除这些和OneToMany 上的连接列并为父级定义一个@ManyToOne。

# javascript - 找到具有特定类名的 DOM 中的最后一个跨度

> ID：11374834
> 
> 赞同：0
> 
> 时间：2012-07-07T12:03:33.877
> 
> 标签：javascript, jquery

```
 <div class="comments_container clearfix">
 <hr />
<ul class="comment_struct">

      <li class="commenter_pic">
    <img src="images/im.jpg" alt="picture"/>
    <span class="button blue square likes">9 Likes</span>
      </li>
      <li class="comment_data">
           <ul class="post_info_options">
        <li class="commenter_name">Abc</li>
        <li class="comment"><p>hello how are you doing</p></li>
        <li class="time">
                        <span class="comment_time">12 June 2012<>
                       <span class="time_elapsed">7 hours ago</span>
          </li>
     <li class="options">
             <span><a href="#">Once More</a></span>
             <span><a href="#">Comment</a></span>
             <span><a href="#" class="comment_like">Like</a></span>
         </li>

     <li>

     </li>
 </ul>
</li>
<li class="delete_comment"><img src="images/Cancel.png" alt="delete_post"/></li>

   </ul>
   <br/>

    <ul class="comment_struct">

      <li class="commenter_pic">
    <img src="images/im.jpg" alt="picture"/>
    <span class="button blue square likes">9 Likes</span>
      </li>
      <li class="comment_data">
           <ul class="post_info_options">
        <li class="commenter_name">Abc</li>
        <li class="comment"><p>hello how are you doing</p></li>
        <li class="time">
                        <span class="comment_time">12 June 2012<>
                       <span class="time_elapsed">7 hours ago</span>
          </li>
     <li class="options">
             <span><a href="#">Once More</a></span>
             <span><a href="#">Comment</a></span>
             <span><a href="#" class="comment_like">Like</a></span>
         </li>

     <li>

     </li>
 </ul>
</li>
<li class="delete_comment"><img src="images/Cancel.png" alt="delete_post"/></li>

   </ul>
   <br/>

    <ul class="comment_struct">

      <li class="commenter_pic">
    <img src="images/im.jpg" alt="picture"/>
    <span class="button blue square likes">9 Likes</span>
      </li>
      <li class="comment_data">
           <ul class="post_info_options">
        <li class="commenter_name">Abc</li>
        <li class="comment"><p>hello how are you doing</p></li>
        <li class="time">
                        <span class="comment_time">12 June 2012<>
                       <span class="time_elapsed">7 hours ago</span>
          </li>
     <li class="options">
             <span><a href="#">Once More</a></span>
             <span><a href="#">Comment</a></span>
             <span><a href="#" class="comment_like">Like</a></span>
         </li>

     <li>

     </li>
 </ul>
</li>
<li class="delete_comment"><img src="images/Cancel.png" alt="delete_post"/></li>

   </ul>
   <br/> 
```

我有上面的 html 结构.. 所以从 $('.comments_container') 开始，我如何使用类'comment_time' 遍历 DOM 中的最后一个跨度。帮助将不胜感激。

可以使用 children() 进行遍历。但我想知道有没有更简单的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:05:58.007

您可以使用[:last](http://api.jquery.com/last-selector/)选择器：

```
var mySpan = $('.comments_container span.comment_time:last'); 
```

# python - Google App Engine：如何为 app.yaml 选择正则表达式

> ID：11374844
> 
> 赞同：2
> 
> 时间：2012-07-07T12:05:09.487
> 
> 标签：python, regex, google-app-engine

例如：我有子应用名称博客。所以，当用户想去博客的首页时，他会去：`localhost/blog`所以这个链接的正则表达式是：

```
-url: /blog
script:blog.app 
```

但是，例如，在这个应用程序中，还有一些其他的链接：`localhost/blog/X`例如：`localhost/blog/signup`或`localhost/blog/signin`.....而上面的正则表达式将不适合。如果我想使用这些链接，我必须再次更改：

```
-url: /blog/.*
script:blog.app 
```

但是这个正则表达式不适合`localhost/blog`. 当然，我可以将那些正则表达式组合在一起，但我觉得太方便了。我可以有一个正则表达式并适合两者。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:10:48.207

哦。我在 google 上发现这个正则表达式`app.yaml`与我使用的其他语言（如 Perl 或 Java 正则表达式库）相同。因此，对于需要上述答案的任何人，这是我的正则表达式：

```
- url: /blog(/.*)*
  script: blog.app 
```

说明： (character)* ：表示它可以有这些字符，也可以不适合上面的正则表达式。

所以, `/blog`, `/blog/`or `/blog/signup`or `/blog/signin`... 将适合。

@：对不起，如果我的问题看起来像垃圾邮件:)

# c# - 在 c# 中使用 linq to xml 格式拆分字符串数据并构建 xml 字符串

> ID：11374851
> 
> 赞同：-1
> 
> 时间：2012-07-07T12:06:35.077
> 
> 标签：c#, xml, linq

尝试使用 linq to xml 拆分字符串数据并构建为 xml 格式，但我在生成 xml 字符串时遇到了一些困难

```
mystring = {1:abcd}{2:efgh}{3:/r/n:12:mmm/r/n:65:nnn} 
```

所需输出：

```
<MESSAGE>
<BLOCK1>
<VALUE>abcd</VALUE>
</BLOCK1>
<BLOCK2>
<VALUE>efgh</VALUE>
</BLOCK2>
<BLOCK3>
<TAG>12</TAG>
<VALUE>mmm</VALUE>
<TAG>65</TAG>
<VALUE>nnn</VALUE>
</BLOCK3>
</MESSAGE> 
```

请就上述相同的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:26:26.227

```
mystring = {1:abcd}{2:efgh}{3:/r/n:12:mmm/r/n:65:nnn} 
```

*   首先使用正则表达式来获取括号的匹配模式。

`1:abcd` `2:efgh` `3:/r/n:12:mmm/r/n:65:nnn`

*   然后使用包含您的字符串的结果字符串构建您的 xml。您可能希望将所有 替换为`/r/n`空白，如`"3:/r/n:12:mmm/r/n:65:nnn".Replace("/r/n", "")`. 然后调用`.Split(':')`将其转换为数组。

*   从那里你将不得不开发你的逻辑来将字符串数组解析到你的节点中。如果值可以出现，`int.TryParse(string, out int value)`那么它会进入 TAG 元素，否则会进入 VALUE 元素。

*   当然，跳过任何空数组元素。`Split(':', StringSplitOptions.RemoveEmptyEntries)`如果您可以在结果数组中看不到它们，您可以在您的拆分中执行此操作。

# java - 无法从 jsp 调用小程序

> ID：11374852
> 
> 赞同：0
> 
> 时间：2012-07-07T12:06:37.867
> 
> 标签：java, jsp, netbeans, applet

*jsp 中的小程序标签：*

```
<%--<applet code ="applets/applet_1" height="500" width="500"/>--%>

<jsp:plugin type="applet" code="applet_1.class" codebase="web/WEB-INF/classes/applets"/>

<%--This tag is inside the jsp page which is index.jsp--%> 
```

![在此处输入图像描述](../Images/3f509651611cd407858bb1bc17d5dd4c.png)

为什么我看不到小程序？我使用 Netbeans 作为 IDE。

*我什至试过这个！*

![在此处输入图像描述](../Images/c8d60de5dbbc0d136a74cc961a5dea04.png)

并将标签更改为：

```
<jsp:plugin type="applet" code="applet_1.class" codebase="applets" height="300" width="300"/> 
```

但没有任何改变。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-07T13:13:24.493

尝试这个

```
<applet
    name="applet1"
    code="applet_1.class"
    codebase="/web/WEB-INF/classes/applets"
    width="300"
    height="300"

</applet> 
```

# jsf-2 - p：日历多个日期选择

> ID：11374855
> 
> 赞同：1
> 
> 时间：2012-07-07T12:06:49.597
> 
> 标签：jsf-2, primefaces

我正在尝试以这种方式使用 p:calender(primefaces 3.3) 实现多个日期选择功能。

```
<p:calendar  id="cal" showButtonPanel="true"  mode="inline"
    value="#{bean.dates}" selection="multiple"/> 
```

在 Backing bean 中，我以这种方式将日期作为数组：

```
private Date[] dates;
public Date[] getDates() {
    return dates;
}

public void setDates(Date[] dates) {
    this.dates = dates;

} 
```

但仍然无法选择多个日期。

根据这个博客[http://blog.primefaces.org/?p=391](http://blog.primefaces.org/?p=391)它可以工作。

我尝试以相同的方式实施。但没有奏效。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T07:35:28.530

您阅读的博客文章非常过时，当时primefaces的日历依赖于YUI，而现在它基于Jquery UI datepicker（不支持多选）

所以你不能用 primefaces current calendar 实现多个日期选择，但你可以谷歌一下，找到其他基于 jquery 的替代方案，

例如[jQuery UI Datepicker - 多个日期选择](https://stackoverflow.com/questions/1452066/jquery-ui-datepicker-multiple-date-selections)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T22:33:08.160

没有默认功能，但这是使用 2 个内联日历的解决方案

```
<p:commandButton id="test" type="button"/>                                  
<p:overlayPanel for="test">
    <p:outputLabel styleClass="ui-grid ui-grid-responsive">
        <div class="ui-grid-row">
            <div class="ui-grid-col-6">
                <p:calendar id="start" value="#{myModel.start}" navigator="true" pattern="dd/MM/yyyy" mode="inline">
                    <p:ajax event="dateSelect" update="end"/>
                </p:calendar>       
            </div>
            <div class="ui-grid-col-6">
                <p:calendar id="end" value="#{myModel.end}" navigator="true" pattern="dd/MM/yyyy" mode="inline" mindate="#{myModel.start}"/>        
            </div>
        </div>
    </p:outputLabel>                                    
</p:overlayPanel> 
```

# html - 在文件html顶部添加页脚

> ID：11374857
> 
> 赞同：0
> 
> 时间：2012-07-07T12:07:06.373
> 
> 标签：html, css

我正在尝试在 HTML 中添加页脚，并且我制作了这个可爱的函数，它为我创建了页眉。我希望能够避免在每个文档的末尾键入页脚（或在每个文档的末尾调用函数），所以我想使用 HTML 和 CSS 在底部呈现页脚但是被编码的 HTML 位于顶部。

我当前的布局看起来像这样

```
<body>
<div id="header">...</div>
<!-- INSERT FOOTER HERE -->
<div id="content">
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:24:36.870

有点奇怪的要求，但你去：

您可以使用 css 将页脚定位在底部。（位置：绝对；底部：0；等..）

或者您可以使用 javascript 删除页脚并将其附加到底部。（jQuery 示例：$('footer').appendTo('body')）。

# c++ - C++ 中用于大数的类型

> ID：11374859
> 
> 赞同：3
> 
> 时间：2012-07-07T12:07:18.267
> 
> 标签：c++

我想计算一个非常大的数组的反转次数，比如 200,000 个整数，我得到的数字非常大。这么大，它不能存储在一个`int`值中。

我得到的答案类似于 -8,353,514,212，而对于简单的情况它可以工作，所以我认为问题在于我用来存储反转次数的变量的类型。

我也试过了`long int`，输出是一样的，但是如果我尝试用`double`4.0755e+009 是输出。我不知道问题是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:21:02.477

1.  使用无符号数据类型
2.  使用`unsigned long`（通常为 2^32-1）或`unsigned long long`（通常为 2^64-1）

如需完整参考，请参阅[本文](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:53:42.307

如果编译器的本机类型不适合保存计算结果，您可以考虑使用 bignum 库。

快速搜索发现了这两个：

[http://www.ttmath.org/](http://www.ttmath.org/)

[http://gmplib.org/](http://gmplib.org/)

我也没有经验，但 gmp 似乎是围绕 SO 更受欢迎的选择，所以也许这就是你应该首先尝试的

# vb.net - Visual Basic 系统信息

> ID：11374861
> 
> 赞同：1
> 
> 时间：2012-07-07T12:07:26.307
> 
> 标签：vb.net, visual-studio, system-information

我想制作一个按钮并显示 Windows 的系统信息。我该怎么做？如何调用该信息？非常感谢。

有可能做这样的事情吗？

[http://s18.postimage.org/7zn5adst3/Memory.jpg](http://s18.postimage.org/7zn5adst3/Memory.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:18:30.920

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Shell("msinfo32.exe", AppWinStyle.NormalFocus)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-24T21:09:32.213

Shell 现在已更新，不再使用。所以，这个过程将是`process.start("msinfo32.exe", AppWinStyle.NormalFocus)`

# iphone - UIView 子类的 addsubview 不能在两个方向上工作

> ID：11374862
> 
> 赞同：0
> 
> 时间：2012-07-07T12:07:33.573
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

我正在使用`UIView`子类在我的`UIViewController`. 我`UIViewController`已经开始`UIView`并为其添加了详细信息`subview`。

这是我的代码。

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "DetailView.h"

@interface ViewController : UIViewController{
    AppDelegate *appDelegate;

    IBOutlet UILabel *lblAdd;

    IBOutlet UIView *viewDetail;

    DetailView *viewDetailfinal;
}
@property (nonatomic, retain) DetailView *viewDetailfinal;

-(IBAction) show;
-(IBAction) viewDetailHide;

@end

#import "ViewController.h"
#define detailPortraitWidth 478
#define detailPortraitHeight 899
#define detailLandscapeWidth 733
#define detailLandscapeHeight 642

#define viewDetailHeaderHeight 150

@implementation ViewController
@synthesize viewDetailfinal;

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    viewDetailfinal.curOrientation = [UIDevice currentDevice].orientation;
    return YES;
}
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
    BOOL isPortrait = UIDeviceOrientationIsPortrait(self.interfaceOrientation);
    if (isPortrait) {
        if (!viewDetail.isHidden) {

            [viewDetailfinal selfSetFrame:CGRectMake(0, viewDetailHeaderHeight, detailPortraitWidth , detailPortraitHeight-viewDetailHeaderHeight)];
            [viewDetailfinal loadCommonView];
        }
    }
    else{
        if (!viewDetail.isHidden) {
            [viewDetailfinal selfSetFrame:CGRectMake(0, viewDetailHeaderHeight, detailLandscapeWidth , detailLandscapeHeight-viewDetailHeaderHeight)];
            [viewDetailfinal loadCommonView];
        }
    }

}
-(IBAction) show{
    BOOL isPortrait = UIDeviceOrientationIsPortrait(self.interfaceOrientation);
    if (isPortrait) {
        if (viewDetail.isHidden) {
            viewDetail.hidden=NO;            
            [self.view addSubview:viewDetail];

            viewDetailfinal = [[DetailView alloc] initWithFrame:CGRectMake(0, viewDetailHeaderHeight, detailPortraitWidth, detailPortraitHeight-viewDetailHeaderHeight)];

            viewDetailfinal.curOrientation = UIDeviceOrientationPortrait;

            [viewDetail addSubview:viewDetailfinal];
            [viewDetailfinal loadCommonView];
        }
        else{
            viewDetailfinal.curOrientation = UIDeviceOrientationPortrait;
            [viewDetailfinal selfSetFrame:CGRectMake(0, viewDetailHeaderHeight, detailPortraitWidth, detailPortraitHeight-viewDetailHeaderHeight)];
        }
    }
    else{
        if (viewDetail.isHidden) {
            viewDetail.hidden=NO;

            [self.view addSubview:viewDetail];

            viewDetailfinal = [[DetailView alloc] initWithFrame:CGRectMake(0, viewDetailHeaderHeight, detailLandscapeWidth , detailLandscapeHeight-viewDetailHeaderHeight)];

            viewDetailfinal.curOrientation = UIDeviceOrientationLandscapeLeft;

            [viewDetail addSubview:viewDetailfinal];
            [viewDetailfinal loadCommonView];
        }
        else{
            viewDetailfinal.curOrientation = UIDeviceOrientationLandscapeLeft;
            [viewDetailfinal selfSetFrame:CGRectMake(0, viewDetailHeaderHeight, detailLandscapeWidth, detailLandscapeHeight-viewDetailHeaderHeight)];

        } 
    } 
}

-(IBAction) viewDetailHide{
    [viewDetailfinal releaseMemory];

    viewDetail.hidden=YES;
} 
```

// 我的详细视图

```
#import <UIKit/UIKit.h>

@interface DetailView : UIView{
    UIScrollView *scrlViewMain;
    UIDeviceOrientation curOrientation;
}
@property UIDeviceOrientation curOrientation;
@property (nonatomic, retain) UIScrollView *scrlViewMain;

-(void) selfSetFrame:(CGRect)frame;
-(void) releaseMemory;
-(void) loadCommonView;
@end

#define scrlViewMainX 0
#define scrlViewMainY 0
#define scrlViewMainWidth 468
#define scrlViewMainPortHeight 749
#define scrlViewMainLandHeight 492

@implementation DetailView
@synthesize scrlViewMain;
@synthesize curOrientation;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self setFrame:frame];
        scrlViewMain = [[UIScrollView alloc] init];
    }
    return self;
}
-(void) selfSetFrame:(CGRect)frame{
    [self setFrame:frame];
    if (curOrientation == UIDeviceOrientationPortrait || curOrientation == UIDeviceOrientationPortraitUpsideDown) {
        [self.scrlViewMain setFrame:CGRectMake(scrlViewMainX, scrlViewMainY, scrlViewMainWidth, scrlViewMainPortHeight)];
}
    else{
        [self.scrlViewMain setFrame:CGRectMake(scrlViewMainX, scrlViewMainY, scrlViewMainWidth, scrlViewMainLandHeight)];
}
    [self.scrlViewMain setContentSize:CGSizeMake(scrlViewMainWidth, 1500)];
}
-(void) loadCommonView {
    if (curOrientation == UIDeviceOrientationPortrait || curOrientation == UIDeviceOrientationPortraitUpsideDown) {
        [self.scrlViewMain setFrame:CGRectMake(scrlViewMainX, scrlViewMainY, scrlViewMainWidth, scrlViewMainPortHeight)];
    }
    else{
        [self.scrlViewMain setFrame:CGRectMake(scrlViewMainX, scrlViewMainY, scrlViewMainWidth, scrlViewMainLandHeight)];
}
    [self.scrlViewMain setBackgroundColor:[UIColor redColor]];
    [self addSubview:scrlViewMain];
}
-(void) releaseMemory{
    [scrlViewMain release];
    [self release];
}
@end 
```

我的问题是，当我隐藏详细视图并以不同方向打开详细视图时，我的视图变成了这样。

![在此处输入图像描述](../Images/2e22d19b9f21480ba00f70cfe20a4d89.png)

红色是`scrollview`. 任何人都可以检查此代码并让我知道问题所在。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:00:20.757

您需要添加 autoResizing 标志和掩码。试试这个：

```
scrlViewMain = [[UIScrollView alloc] init];
scrlViewMain.autoresizesSubviews = YES:
scrlViewMain.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

我建议您还查看有关 UIView 及其子类的这些属性的文档。蒙版可用于使您的视图与顶部或底部保持相同的相对位置，或者不取决于您如何使用它们。

# symfony - Symfony 和 Doctrine2 - 从注释中获取信息

> ID：11374867
> 
> 赞同：1
> 
> 时间：2012-07-07T12:08:15.700
> 
> 标签：symfony, doctrine-orm

我有一个`User`带有字段的实体`userName`（带有适当的 getter 和 setter），它映射到`user_name`table中的字段`users`。在`UserRepository`我从数据库中获取一条记录并且我有`$user`类`User`。如何找出表和字段名称`$user->userName`？我需要以某种方式从注释中获取信息。我发现此信息在 Doctrine2 缓存中，并且我找到[了 ClassMetadataInfo 类文档](http://www.doctrine-project.org/api/orm/2.2/class-Doctrine.ORM.Mapping.ClassMetadataInfo.html)，但我不知道如何将它们放在一起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T17:13:48.153

You should be able to get the class metadata of a specific class by doing so:

```
$entityManager->getClassMetadata(get_class($user)) 
```

# php - 以变 量值命名的 PHP 函数

> ID：11374868
> 
> 赞同：0
> 
> 时间：2012-07-07T12:08:20.267
> 
> 标签：php, html, function, variables

我有一个 PHP 函数，我需要创建它来执行存储在变量中的 PHP 或 HTML 代码。这是一个问题。另一个问题是该函数将被创建多次并且需要一个唯一的名称，所以我以它的名字命名了它，`$title`但我不确定这是否会从值创建函数`$title`或者它是否会创建一个名为的函数`$title`或者如果它不起作用。这是我的代码：

```
$title = $_POST['sogo_aso_name'];
$output = $_POST['sogo_aso_output']; 
```

这里有一些代码...

```
function $title ($output)
{
    //Some Code Here to execute $output...
} 
```

所以...这是我的问题。我不确定什么会干净地执行 $output 以便它可以显示在页面上。而且我不知道函数是否会以的值命名`$title`

谢谢你的帮助！

伊桑·布劳威尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:16:51.310

你可以`call_user_func`这样使用：

```
call_user_func($title, $output); 
```

但是更改一个函数的名称真的很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:30:12.637

不幸的是，您尝试做的事情是不可能的。如果您需要一个通用名称来为您的函数添加前缀，您可以创建命名空间。

```
namespace fArr {
    function func1 (args) {}
    function func2 (args) {}
} 
```

要调用它们，您可以使用：

```
namespace {
    fArr\func1($title, $output);
} 
```

通常，您希望避免创建完全匿名的函数。也许创建一个处理所有请求的标题和输出的函数。或者，使用 func 名称作为属性创建一个新对象，并将输出分配给它。

```
$title  = $_POST['sogo_aso_name'];
$output = $_POST['sogo_aso_output'];

// Store data in an object named after the value of $title
// Note that constant use of this can get very messy, and very confusing
$$title = (object) array('output' => $output); 
```

# php - 使用 AJAX 显示单独的 PHP 文档

> ID：11374872
> 
> 赞同：0
> 
> 时间：2012-07-07T12:09:11.810
> 
> 标签：php, jquery, html, ajax

代码没有显示我的 PHP 元素，我想知道为什么。

这是我正在使用的 HTML：

```
<div class="tablocation">

    <ul class="css-tabs">
      <li><a class="current" href="/wp-content/themes/blue-and-grey/uni-general.php">General</a></li>
      <li><a href="/wp-content/themes/blue-and-grey/uni-courses.htm">Courses</a></li>
      <li><a href="/wp-content/themes/blue-and-grey/uni-inthearea.htm">In the area</a></li>
      <li><a href="/wp-content/themes/blue-and-grey/uni-sportsandfacilities.htm">Sports & facilities</a></li>
    </ul>

    <div class="clear"></div>

    <div class="css-panes">
      <div style="display:block"></div>
    </div> 
```

以第一个实例为例，对于 uni-general.php - 它不会加载，但***.htm***的其他文件将加载。只要它是 PHP 文档，它就不会。

另外 - 下面是我用来加载文档的脚本。

```
<script>
    $(function() {
        $("ul.css-tabs").tabs("div.css-panes > div", {
        effect: 'ajax',
        onBeforeClick: function(event, i) {
        // get the pane to be opened
        var pane = this.getPanes().eq(i);

            // only load once. remove the if ( ... ){ } clause if
            // you want the page to be loaded every time
        if (pane.is(":empty")) {
            // load it with a page specified in the tab's href
            // attribute
            pane.load(this.getTabs().eq(i).attr("href"));
        }
        }
    });
    });
</script> 
```

如果需要，我可以提供 PHP 文档，但公平地说，我认为这不是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:14:27.207

从标准插件功能看不太自定义。

只需加载您的标签`$("ul.css-tabs").tabs();`

使用 jQuery UI，无论你有什么都`href`将通过选项卡中的 ajax 加载。

`*Fetch external content via Ajax for the tabs by setting an href value in the tab links.*`

[http://jqueryui.com/demos/tabs/#ajax](http://jqueryui.com/demos/tabs/#ajax)

# php - (PHP)：警告：include_once，无法打开流：权限被拒绝

> ID：11374874
> 
> 赞同：1
> 
> 时间：2012-07-07T12:09:19.893
> 
> 标签：php, mysql, xampp

我正在学习如何使用 Php 和 Mysql (XAMPP)编写**注册页面。**

现在，我在这个网站上下载了源代码：

> [http://net.tutsplus.com/tutorials/php/create-a-signup-form-with-email-confirmation/](http://net.tutsplus.com/tutorials/php/create-a-signup-form-with-email-confirmation/)

并试图确保它有效。但是打开时：

```
 http://localhost/source/index.php 
```

我收到以下警告：

```
Warning: include_once(C:\xampp\htdocs\source\inc\php\config.php) [function.include-once]: failed to open stream: Permission denied in C:\xampp\htdocs\source\index.php on line 3

Warning: include_once() [function.include]: Failed opening 'inc/php/config.php' for inclusion (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\source\index.php on line 3

Warning: include_once(C:\xampp\htdocs\source\inc\php\functions.php) [function.include-once]: failed to open stream: Permission denied in C:\xampp\htdocs\source\index.php on line 4

Warning: include_once() [function.include]: Failed opening 'inc/php/functions.php' for inclusion (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\source\index.php on line 4 
```

以下是我收到警告的行：

```
<?php

include_once 'inc/php/config.php';
include_once 'inc/php/functions.php';
.
. 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T11:05:33.690

替换这个：

```
include_once 'inc/php/config.php';
include_once 'inc/php/functions.php'; 
```

和

```
include_once dirname(__FILE__) . '/inc/php/config.php';
include_once dirname(__FILE__) . '/inc/php/functions.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:13:42.407

出于安全原因，大多数时候在 PHP 中禁用这样的完整路径，尝试将包含语句中的路径更改为相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-20T21:48:53.600

尝试将文件夹权限设置为“754”。只有文件夹权限。

# python - 当我们有一些未存储的字段时，我们如何使用 whoosh 模块更新索引文档？

> ID：11374875
> 
> 赞同：1
> 
> 时间：2012-07-07T12:09:38.250
> 
> 标签：python, field, whoosh, indexed

```
Schema(title=TEXT(analyzer=stem_ana, stored=True),
       content=TEXT(analyzer=stem_ana, vector=True),
       link=ID(stored=True),
       meta=TEXT(analyzer=stem_ana),
       path=ID(stored=True),
       scores=ID(stored=True),
       clicks=NUMERIC(stored=True),
       file_name=ID(unique=True)
) 
```

我无法检索该字段`content=TEXT(analyzer=stem_ana, vector=True)`

我不想在不改变其他字段的情况下更新内容，`clicks`我该怎么做？我不知道如何检索未存储的字段的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:57:39.093

whoosh 无法“就地”更新索引文档（想象一下一个字段变长了……）。

因此，您将从 whoosh 索引中检索文档（它将包括所有存储的字段）。如果您的字段没有存储在 whoosh 中而是保存在其他地方，您需要从这些其他地方检索它们并再次将它们添加到文档中。

然后调用 update_document(**fields) - whoosh 将使用唯一字段删除在这些字段中具有相同值的旧索引文档，然后索引新文档。

# ajax - Grails formRemote 重定向而不是仅仅调用方法

> ID：11374876
> 
> 赞同：1
> 
> 时间：2012-07-07T12:09:40.280
> 
> 标签：ajax, grails, redirect, groovy

我是 Grails 的新手，g:formRemote 命令遇到了一些问题。

我希望 ag:textArea 框向我的控制器发送消息并保存此消息。之后，应该通过formRemote **Ajax****更新**页面，以便消息出现在页面上。

 **但是 formRemote 调用不是更新页面，而是假定给定的 url 是一个真正的链接，并希望我重定向到这个（不存在的）.jsp 站点。
我想开始的方法在我的控制器中被调用

我尝试了许多在类似问题中提供的解决方案，但似乎这个问题与他们的不同

继承人的代码：

```
<div id="history">
    <g:render template="posts" collection="${ messages }" var="message" />
</div>
<div class="postMessageForm">
    <g:formRemote name="postChatMessage" url="[controller: 'meetingRoom', 
                  action: 'postMessage']" update="history">                             
    <div class="msg_box">
        <g:textArea name="message" value="" style="width: 630px"/><br/>
    </div>
    <div style="float: right;">
        <g:submitButton name="Send" style="width: 90px; height: 40px;"/>
    </div>
    </g:formRemote>
</div> 
```

这是在我的 MeetingRoomController 中调用的 Action：

```
def postMessage() {
if (params.message != "") {
    def thisUser = lookUpUser()
    def thisRoom = thisUser.joinedRoom
    def chatPost = new ChatPost(
        message: params.message,
        author: thisUser
    )
    thisRoom.addToChatHistory(chatPost)
}
//  def messages = currentChatHistory()
//  render template: 'posts', collection: messages, var: 'message' 
```

我在 Jeff Browns Twitter 教程中看到了这种方法。

我看到的可能失败：

*   注释掉的渲染模板命令与 Ajax 有关（当我不评论它时，唯一发生的事情是模板帖子将在重定向页面上呈现
*   Ajax 和 jQuery 的使用（但我不相信这可能是重点，因为我只使用了 g: 和 groovy 的东西，甚至还没有导入 jQuery 库）
*   使用 remoteFunction 可能会更容易（在这种情况下，我真的不知道如何让 remoteFunction 工作）

我希望这些信息足以让别人看到我错过了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:44:21.853

当在您的表单上单击提交按钮时，数据将发送到 formRemote 标记的 url 参数中列出的方法。然后您在该方法中，您会看到注释掉的渲染标记，该标记将数据输出回在 formRemote 标记的更新标记中提到的 div 中的 gsp 页面。

formRemote 依赖于 javascript 库来处理 grails 文档中提到的 ajax 内容：

> 7.7.1 Ajax 支持
> 
> 默认情况下，Grails 附带 jQuery 库，但通过插件系统提供对其他框架的支持，例如 Prototype、Dojo：http://dojotoolkit.org/、Yahoo UI：http://developer.yahoo.com/yui/ 和谷歌网络工具包。本节概括介绍 Grails 对 Ajax 的支持。要开始，请将此行添加到页面的标记中：
> 
> 您可以将 jQuery 替换为您已安装的插件提供的任何其他库。这是因为 Grails 支持自适应标签库。由于 Grails 的插件系统支持许多不同的 Ajax 库，包括（但不限于）：
> 
> jQuery Prototype Dojo YUI MooTools

所以删除历史 div 中的内容，取消注释 postMessage 方法中的两行，并包含引用的 javascript 库之一。**

# android - 设置输入法

> ID：11374878
> 
> 赞同：1
> 
> 时间：2012-07-07T12:09:59.673
> 
> 标签：android, android-input-method

我正在查看 InputMethodManager 类的 setInputMethod 函数，我看到它接收 2 个参数：令牌和输入法的 ID。我可以从 InputMethodInfo 类中获取 ID，但我不知道从哪里获取令牌。我可以从视图中获取的不是窗口令牌，而是另一种令牌，我该如何获取呢？谢谢。

# c# - 从 C# 中的数据集绑定项目后，在组合框中插入项目

> ID：11374880
> 
> 赞同：16
> 
> 时间：2012-07-07T12:10:06.293
> 
> 标签：c#, winforms, combobox

从数据集绑定组合框后，我必须在顶部插入“选择”。我试过[了，](https://stackoverflow.com/questions/8751701/winform-combobox-add-text-select-after-data-binding)但它不起作用。抛出错误“数据集没有任何强制转换定义”。我认为我没有正确使用它。评论代码是我尝试过但不起作用的部分。

```
cmbCategory.DataSource = dsCat.Tables[0];
cmbCategory.DisplayMember = "CategoryName";
cmbCategory.ValueMember = "ID";
// cmbCategory.Items.Add("Select");
// cmbCategory.SelectedText = "Select";
// cmbCategory.DataSource =(new object[] { "Select" }).Concat(this.liveReportingDalc.GetCategoriesByType(CategoryType.RegistrationType).Cast<object>()); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-07T13:16:50.533

您必须插入到要绑定数据的对象而不是组合框。您不能直接插入组合框。

你可以使用这个：

```
DataTable dt = new DataTable();

dt.Columns.Add("ID", typeof(int));
dt.Columns.Add("CategoryName");

DataRow dr = dt.NewRow();
dr["CategoryName"] = "Select";
dr["ID"] = 0;

dt.Rows.InsertAt(dr, 0);

cmbCategory.DisplayMember = "CategoryName";
cmbCategory.ValueMember = "ID";
cmbCategory.DataSource = dt;
cmbCategory.SelectedIndex = 0; 
```

这是一个非常直接的例子。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-07T12:21:45.193

`ComboBox`将项目绑定到数据源后，您无法将项目添加到其中。要从`ComboBox`绑定数据源中添加或删除项目，您必须通过数据源本身来完成。

您可以将 a 插入`DataRow`到您的表格中，它将自动添加到您的`ComboBox`. 尝试以下操作：

```
 DataRow dr = dsCat.Tables[0].NewRow();
 dr["CategoryName"] = "Select";
 dr["ID"] = 123;// Some ID
 dsCat.Tables[0].Rows.Add(dr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:13:06.543

```
// cmbCategory.DataSource =(new object[] { "Select" }).Concat(this.liveReportingDalc.GetCategoriesByType(CategoryType.RegistrationType).Cast<object>()); 
```

您也许可以做到这一点，但是您的语法在某种程度上是错误的。

也许您可以将其拆分直到弄清楚，然后将其压缩回内联函数。

```
List <object> catData = new List <object> { "Select" };

DataSet catByType = this.liveReportingDalc.GetCategoriesByType(CategoryType.RegistrationType);

foreach(DataRow oRow in catByType.Tables[0].Rows)
{ catData.Add(oRow.ItemArray[0]); } 
```

但要使其发挥作用，您需要巩固对从`GetCategoriesByType`函数返回的数据的理解。对象会是像“选择”这样的文本吗？

# jquery - 使用jquery将.htm加载到div中时出现特殊字符错误

> ID：11374881
> 
> 赞同：0
> 
> 时间：2012-07-07T12:10:09.170
> 
> 标签：jquery, load, special-characters

我正在使用 jQuery 将 .htm 文件加载到主页上的 div 中，但是当我这样做时，诸如 æ、ø 和 å 之类的特殊字符会变成“�”。关于如何显示的任何想法字符正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:13:59.937

使用以 开头的字符代码（例如：¢）

# asp.net - LinqDataSource 异常

> ID：11374882
> 
> 赞同：0
> 
> 时间：2012-07-07T12:10:12.673
> 
> 标签：asp.net, linq-to-sql, exception-handling

何从 Linq 数据源捕获 SQLExecption：

```
<asp:LinqDataSource ID="linq_tipo" runat="server" 
ContextTypeName="Linq_Clinica_Veterinaria" EntityTypeName="" 
TableName="tb_tipo_animals">
</asp:LinqDataSource> 
```

在引发 Application_Error() 之前，我能做到什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:42:58.183

像这样捕获异常：

```
protected void linq_tipo_Updating(object sender,
        LinqDataSourceUpdateEventArgs e) {
    if (e.SQLException != null)
    {
    //Handle the exception
        e.ExceptionHandled = true;//Set to true as you have handled the exception
    } } 
```

同样，您可以处理 Inserted、Deleted、Selecting 等事件。

# objective-c - Skype 推送通知“[人] 正在呼叫...”在通话结束时消失 - 如何做到这一点？

> ID：11374883
> 
> 赞同：2
> 
> 时间：2012-07-07T12:10:41.847
> 
> 标签：objective-c, ios, xcode, notifications, push

如果 iPhone 被锁定并且有人在 Skype 上呼叫，则会出现推送通知。我认为这是其他应用服务器发送的简单推送通知。

但是当通话结束时（我们没有回应，所以错过了通话）推送通知从锁屏上消失了！它不存储在通知中心或锁屏上的最近通知列表中。

那么如何做到这一点呢？如何实现**推送通知的调用**？

Skype 是否有特殊权限，还是普通开发人员也可以实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:21:26.513

不，他们没有。`Skype`使用 voip 并`Apple`允许使用位置、voip 和音频的应用程序在后台运行，因此`Skype`在`AppName-Info.plist`文件中设置`Required background modes`为`voip`，您看到的不是推送通知，而是由正在运行的应用程序控制的本地通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:20:22.850

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0]; 
```

它将删除通知。所以任何应用程序都可以做到。

# autocomplete - 自动完成无法在我们的 Web 应用程序登录表单上运行

> ID：11374886
> 
> 赞同：1
> 
> 时间：2012-07-07T12:10:59.877
> 
> 标签：autocomplete

我们公司有一个我们设计的网络应用程序。

设计 UI 的人不再对我们可用，我正试图在他的代码中找出一些东西。

由于某种原因，在登录窗口中，浏览器不会建议保存用户名和密码。

它不适用于 chrome 和 explorer，但它确实适用于 ForeFox。

这是登录窗口的链接：[https ://console.edge-bi.com/v29/login.html](https://console.edge-bi.com/v29/login.html)

我已经检查了自动完成的浏览器设置，它适用于任何其他网站。

你有什么建议吗？

# ios - 如何通过 iOS 应用在 Facebook 墙上发帖？

> ID：11374888
> 
> 赞同：0
> 
> 时间：2012-07-07T12:11:05.503
> 
> 标签：ios, xcode4, fbconnect

在我的应用程序中，我尝试使用本教程集成新的 FBconnect api，但是当我运行本教程源代码时，它会给我以下错误![在此处输入图像描述](../Images/8222e17c79badc99b2ca72c518654455.png)。

这是本教程的链接[http://gabriel-tips.blogspot.com/2011/10/how-to-post-on-facebook-wall-through.html](http://gabriel-tips.blogspot.com/2011/10/how-to-post-on-facebook-wall-through.html)。

我要求所有想要帮助我的人在回答我之前请检查本教程，bcz 我的工作与本教程中所做的相关。所以请指导我关于本教程。任何帮助都会得到帮助。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:09:46.950

忘记在网络上找到的旧教程和随机示例代码。[Facebook 有一个名为HackBook](https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook)的官方示例项目供您使用。它包括几个您可以剖析的工作示例。您应该下载它，阅读他们的说明，并确切了解如何在您的应用程序中实现 Facebook 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:37:18.240

有一个名为 AddThis 的 api。您可以使用该 api 在数百个社交网站（包括 twitter 和 Facebook）上共享任何内容。您将在此链接上获得文档和 api。

[http://www.addthis.com/](http://www.addthis.com/)

# jquery - jQuery a href 和按钮

> ID：11374893
> 
> 赞同：1
> 
> 时间：2012-07-07T12:12:24.493
> 
> 标签：jquery

说起来容易，`<a href>`一个按钮可以有同样的功能，但它不起作用。

这是我网站的示例链接：http: [//cocopop12.site11.com/search/](http://cocopop12.site11.com/search/)。这是一个 YouTube 插件，右侧有 2 个按钮，预览和选择。

问题是，如果您单击预览，它应该会播放 YouTube 视频。但它不起作用。代码如下。

这是链接（链接有效，我只是将其复制到缩略图上）：

```
<a class="videoThumb4" href="http://www.youtube.com/watch?v=' . $yValue['videoid'] . '">
' . $yValue['description'] . '
</a> 
```

这是我想在悬停时替换的按钮。

```
<input class="videoThumb4" onClick="location.href=\'http://www.youtube.com/watch?v=' . $yValue['videoid'] . '\'" type="button" name="previewSel" value="Preview" id="previewbut"> 
```

jQuery代码：

```
$(function() {
<!-- videoThumb is a css class found in the foreach list class="videoThumb". ytvideo is the holder ID set as div ID-->
$(".videoThumb4").ytplaylist({
    holderId: 'ytvideo4',
    html5: true,
    playerWidth: '520',
    autoPlay: false,
    sliding: false,
    listsliding: true,
    social: true,
    autoHide: false,
    playfirst: 0,
    playOnLoad: false,
    modestbranding: true,
    showInfo: false
});
});

// HOVER
$(document).ready(function(){
$("input[type=button]#previewbut, #selectbut").hide();
$("li#static").hover(
function() {
    $(this).find('#previewbut, #selectbut').fadeIn();
},
function() {
    $(this).find('#previewbut, #selectbut').fadeOut();
});
}); 
```

完整代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
<title>Youtube Search</title>
<meta name="description" content="youtube keyword playlist jquery and php Gdata Api version2" />
<meta name="copyright" content="www.cfconsultancy.nl" />
<meta name="web_author" content="Ceasar Feijen" />
<link rel="stylesheet" type="text/css" href="./css/index.css" />
<!-- Remove all above if you are including this file -->

<!-- Needed for the youtube player -->
<link rel="stylesheet" type="text/css" href="./css/youtubeplaylist.css" />

<!-- Example css playlist to the right. See example 3 -->
<link rel="stylesheet" type="text/css" href="./css/youtubeplaylist-right-with-thumbs.css" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="./js/jquery.youtubeplaylist-min.js"></script>
<script type="text/javascript">     
        $(function() {
            <!-- videoThumb is a css class found in the foreach list class="videoThumb". ytvideo is the holder ID set as div ID-->
            $(".videoThumb4").ytplaylist({
                holderId: 'ytvideo4',
                html5: true,
                playerWidth: '520',
                autoPlay: false,
                sliding: false,
                listsliding: true,
                social: true,
                autoHide: false,
                playfirst: 0,
                playOnLoad: false,
                modestbranding: true,
                showInfo: false
            });
        });

        // HOVER
        $(document).ready(function(){
            $("input[type=button]#previewbut, #selectbut").hide();
            $("li#static").hover(
            function() {
                $(this).find('#previewbut, #selectbut').fadeIn();
            },
            function() {
                $(this).find('#previewbut, #selectbut').fadeOut();
            });
        });

</script>

    <!-- CSS -->
    <style>
    /************** Code for Demo **************/

    /* Containing Element */
    /* Static Image Shown Before Hover */
    a#static{
      z-index:1;
        }
    input[type=button]#previewbut {
        background-color: #9B9B9B;
        color: #ffffff;
        text-decoration:none;
        border:0px;
        width:100px;

    }

    input[type=button]#previewbut {
        position: absolute;
        margin-top:-45px;
        margin-left:50px;

        cursor: pointer;
        font-size: 12px;
        line-height: 11px;
        padding: 10px 5px;
        text-decoration: none;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
        -moz-box-shadow: 1px 1px 2px #5C5C5C;
        -webkit-box-shadow: 1px 1px 2px #5C5C5C;
        box-shadow: 1px 1px 2px #5C5C5C;

    }
    input[type=button]#previewbut:hover {
        background-color: #007073;
        color: #ffffff;
        text-decoration:none;
    }
    input[type=button]#selectbut {
        background-color: #9B9B9B;
        color: #ffffff;
        text-decoration:none;
        border:0px;
    }

    input[type=button]#selectbut {
        position: absolute;
        margin-top:-45px;
        margin-left:170px;
        width:100px;

        cursor: pointer;
        font-size: 12px;
        line-height: 11px;
        padding: 10px 5px;
        text-decoration: none;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
        -moz-box-shadow: 1px 1px 2px #5C5C5C;
        -webkit-box-shadow: 1px 1px 2px #5C5C5C;
        box-shadow: 1px 1px 2px #5C5C5C;

    }
    input[type=button]#selectbut:hover {
        background-color: #007073;
        color: #ffffff;
        text-decoration:none;
    }

    </style>

</head>

<body>

<!-- Needed for the youtube player example 3 -->
<div class="youtubeplayer">
    <?php
    //if ( !isset( $_POST['subKW'] ) ) {
    ?>
    <h2>Search</h2>
    <form method="post" action="<?php echo htmlentities( $_SERVER['PHP_SELF'] ); ?>">
        Input keyword : <input type="text" name="kw" value=""> <br />
        <input type="submit" name="subKW" value="Search">
    </form>
    <?php
    //} else {
    ?>
    <h2>YT Playlist  <a href="index.php">Back</a></h2><!-- END  -->
    <div class="yt_holder yt_holder_right">
        <div id="ytvideo4"></div>
            <!--Up and Down arrow -->
            <div class="you_up"><img src="css/up_arrow.png" alt="+ Slide" title="HIDE" /></div>
            <div class="you_down"><img src="css/down_arrow.png" alt="- Slide" title="SHOW" /></div>
            <!-- END  -->
            <div class="youplayer ytplayerright">
            <ul class="videoyou videoytright">
            <?php
            //$kw = $_POST['kw'];
            //global $kw;
            // Use like this.
            include_once('class/class.youtubelist.php');
            //in this example a playlist
            //$video = new youtubelist('playlist');
            //Keywords
            $video = new youtubelist('keywords');
            $video->set_keywords( /*$kw*/ 'yoga' );         
            //This is the link to the playlist.
            //http://www.youtube.com/playlist?list=PLAEAD0FC99564BA7F
            //REMOVE the PL from the string if there is an PL after list=
            $video->set_playlist('AEAD0FC99564BA7F');
            $video->set_max(50);
            $video->set_order('none'); // to retrieve most actual video's
            $video->set_cachexml(false);
            $video->set_cachelife(86400);
            $video->set_xmlpath('./cache/');
            $video->set_start(1);
            // --Set text and description length
            $video->set_descriptionlength(85);
            $video->set_titlelength(25);

            if ( $video->get_videos() !=null ) {
                foreach ($video->get_videos() as $yKey => $yValue) {
                    echo '
                    <li id="static">
                        <p>' . $yValue['title'] . '</p>
                        <span class="time timeright">' . $yValue['time'] . '</span>

                        <a class="videoThumb4" href="http://www.youtube.com/watch?v=' . $yValue['videoid'] . '">
                            ' . $yValue['description'] . '
                        </a>
                        <!--<a class="videoThumb4" id="previewbut" href="http://www.youtube.com/watch?v=' . $yValue['videoid'] . '">
                            Preview
                        </a>-->

                        <a class="videoThumb4" id="previewbut" href="http://www.youtube.com/watch?v=' . $yValue['videoid'] . '">
                            Preview
                        </a>

                        <!--<input class="videoThumb4" onClick="location.href=\'http://www.youtube.com/watch?v=' . $yValue['videoid'] . '\'" type="button" name="previewSel" value="Preview" id="previewbut">-->

                        <input class="videoThumb4" type="button" name="selectSel" value="Select" id="selectbut">
                    </li>                   
                    ';
                }
            }else{
                echo '<li>Sorry, no video\'s found</li>';
            }
            ?>
            </ul>
        </div>
        <!-- Remove if you don't want the footer shadow -->
        <div style="height:0px; font-size:0em;clear:both;">&nbsp;</div>
        <div class="ytfooter ytfooterright">&nbsp;</div>
        <!-- END -->
    </div>

    <?php
    //}
    ?>

</div>
<!-- END youtube player -->

</body>
</html> 
```

# java - 在cql中创建列族？

> ID：11374895
> 
> 赞同：1
> 
> 时间：2012-07-07T12:12:51.107
> 
> 标签：java, jdbc, cassandra, cql

当我使用 cql 创建列族时，它给了我非常意想不到的输出。

```
public static void createColumnfamily()
    {
        try
        {
            Class.forName("org.apache.cassandra.cql.jdbc.CassandraDriver");
            Connection con = DriverManager.getConnection("jdbc:cassandra://192.168.1.32:9160/temp");
            String qry = "CREATE TABLE users(user_name varchar," +
                                            "password varchar," +
                                            "gender varchar," +
                                            "session_token varchar," +
                                            "birth_year bigint," +
                                            "PRIMARY KEY (user_name)" +
                                            ")";
            Statement smt = con.createStatement();
            smt.executeUpdate(qry);
            System.out.println("TABLE(column family) is created");
            con.close();
        }
        catch(Exception e)
        {
            System.out.println(" : " + e.getMessage());
        }

    } 
```

这是我得到的：第 1:132 行无关输入 ')' 期待 EOF

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:01:48.683

您正在使用 CQL 2，它不支持这种主键声明样式。如果您想以这种方式声明它，您应该使用 CQL 3，您可以通过在连接 URL 中请求该版本来完成：

```
DriverManager.getConnection("jdbc:cassandra://192.168.1.32:9160/temp?version=3.0.0"); 
```

但是，CQL 3 不仅仅为此所必需。正如 Steve Van Opstal 建议的那样，您可以简单地将`PRIMARY KEY`标记与列定义本身放在一起，因为您没有多组件主键。

```
CREATE TABLE users(
    user_name varchar PRIMARY KEY,
    password varchar,
    gender varchar,
    session_token varchar,
    birth_year bigint,
); 
```

如果您的 Cassandra 支持 CQL 3，则通常首选它，因为它是前进的方向，但如果您现在不想切换，您可以进行第二次更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:36:31.610

我在这里只看到两个可能的问题。

1.  该查询不接受您定义主键的方式

    试试这个：

    ```
     String qry = "CREATE TABLE users(user_name varchar PRIMARY KEY," +
                                        "password varchar," +
                                        "gender varchar," +
                                        "session_token varchar," +
                                        "birth_year bigint"
                                        ")"; 
    ```

2.  查询不接受 varchar 作为主键

    试试这个：

    ```
     String qry = "CREATE TABLE users(user_id int" +
                                        "user_name varchar," +
                                        "password varchar," +
                                        "gender varchar," +
                                        "session_token varchar," +
                                        "birth_year bigint," +
                                        "PRIMARY KEY (user_id)" +
                                        ")"; 
    ```

# php - 如何使用循环结构更新或插入数据到表中

> ID：11374896
> 
> 赞同：0
> 
> 时间：2012-07-07T12:12:56.787
> 
> 标签：php, mysql

请在这方面帮助我。我有两个数据库，一个跟踪用户和系统活动，另一个只跟踪用户活动。下面代码的目的是首先从第二个数据库中检索所有表。这些表具有以下列：

(id |date |debit |credit |number |description |accounttype |company_id)

这个想法是检索所有表，并且只检索它们的|借方|贷方|。列。这些字段 (|debit|credit|) 中已经有一些值。检索后，我应该能够更新或在可能的情况下对已从数据库检索到的任何或所有表进行新的插入。

下面是我写的代码。它可以正常检索，但不能进行插入或更新。请帮助我

同一页面调用自身。

```
//Connection and Extraction from DB

//DB Connection exists

//SQL Query

$sql = "show tables from $companyname";

$results = mysql_query($sql) or die(mysql_error());

$count = 1;

while($row = mysql_fetch_array($results))

{

 $results2 = mysql_query("SELECT * FROM `$row[0]` LIMIT 1") or die('Error'.mysql_error());

 while($row2 = mysql_fetch_array($results2))

 {

  $debit = $row2['debit'];

  $credit = $row2['credit'];

  echo "<tr><td>$count. </td><td width='30%'>".ucwords($row[0])."</td><td width='30%'>

<input type='text' name='debit' value='$debit' align='right'></td>

     <td width='30%'><input type='text' name='credit' value='$credit' align='right'></td></tr>";

 }

$count++;    

}

 //Insertion into DB  

if(isset($_POST['submit']))    {

//SQL Query

$sql3 = "show tables from $companyname";

$results3 = mysql_query($sql3) or die(mysql_error());

$count = 1;

while($row3 = mysql_fetch_array($results3))

{

    $results4 = mysql_query("SELECT * FROM `$row3[0]` LIMIT 1") or die('Error '.mysql_error());

        $debit = $_POST['debit'];

        $credit = $_POST['credit'];     

    while($row4 = mysql_fetch_array($results4))

    {

        $query = mysql_query("UPDATE `$row3[0]` SET `debit`= '$row4[debit]' , `credit`= '$row4[credit]' WHERE `id`=`$row4[id]`");

        echo "UPDATE `$row3[0]` SET `debit`= '$row4[debit]' , `credit`= '$row4[credit]' WHERE `id`=`$row4[id]` <br>";

        echo $num;

    }

$count++;         

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:47:45.067

1.  你的数据库设计很糟糕我应该将所有数据保存在一个模式中，通过使用 dubbel 字段主键由公司保持单独的 auto_increment

    ```
    CREATE TABLE company_transaktions (
        company_name VARCHAR(50) NOT NULL,
        id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT, 
        date DATE NOT NULL,
        debit FLOAT NOT NULL,
        credit FLOAT NOT NULL,
        number MENIUMINT NOT NULL,
        description TINYTEXT NOT NULL,
        accounttype TINYTEXT NOT NULL,
        company_id MEDIUMINT UNSIGNED NOT NULL, 
        PRIMARY KEY (company_name,id)
    ); 
    ```

    或者如果 company_id 是我认为的那样，你应该使用`PRIMARY KEY (company_id,id)`

2.  php问题

    您将 2 个 postdata 存储在 2 个变量中

    ```
    $debit = $_POST['debit'];
    $credit = $_POST['credit']; 
    ```

    但你从不使用它们，它们总是最后一行的值，因为它们都具有相同的名称。

    所以你需要做的第一件事是重命名你的输入：

    ```
    echo "<tr>\n";
    echo "<td>$count. </td>\n";
    echo "<td width='30%'>".ucwords($row[0])."</td>\n";
    echo "<td width='30%'><input type='text' name='{$row[0]}[debit]' value='$debit' align='right'></td>\n";
    echo "<td width='30%'><input type='text' name='{$row[0]}[credit]' value='$credit' align='right'>\n";
    echo "</td>\n";
    echo "</tr>"; 
    ```

    然后你可以在每个循环中获取正确的：

    ```
    $debit = mysql_real_escape_string($_POST[$row3[0]]['debit']);
    $credit = mysql_real_escape_string($_POST[$row3[0]]['credit']); 
    ```

    然后在您的查询中使用它们

    ```
    $result = mysql_query("UPDATE `$row3[0]` SET `debit`= '$debit' , `credit`= '$credit' WHERE `id`=`$row4[id]`"); 
    ```

# ruby-on-rails - form_tag with remote: true 不发出 ajax 请求

> ID：11374897
> 
> 赞同：17
> 
> 时间：2012-07-07T12:13:04.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我的应用程序中有许多不同的表单，它们都使用`remote: true`. 但是一个不能正常工作，因为它不使用 ajax 调用。

清理干净后是这样的：

```
<%= form_tag(upload_file_ajax_path, remote: true, multipart: true) do %>
  <%= file_field_tag(:file) %>
  <%= submit_tag("upload") %>
<%end%> 
```

标签看起来像：

```
<form accept-charset="UTF-8" action="/mycontroller/upload_file_ajax" data-remote="true" enctype="multipart/form-data" method="post">
  <input name="utf8" type="hidden" value="✓">
  <input name="authenticity_token" type="hidden" value="1234"></div>
  <input id="file" name="file" type="file">
  <input name="commit" type="submit" value="upload">
</form> 
```

和路线条目：

```
post "mycontroller/upload_file_ajax", as: "upload_file_ajax" 
```

但是在 Chrome 开发工具中检查调用，标题说：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

而不像其他形式看起来像：

```
Accept:*/*;q=0.5, text/javascript, application/javascript, application/ecmascript, application/x-ecmascript 
```

我将 js 文件添加到我的布局中

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %> 
```

即使我从 application.js 文件中删除所有 JS 代码（`//= require jquery`...除外），表单也无法正常工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-07T12:37:00.223

您不能使用 AJAX 进行文件上传。也就是说，正常情况下。

不过，有一个很棒的 gem，[Remotipart](https://github.com/JangoSteve/remotipart)，可以将此功能添加到您的远程表单中。

```
gem 'remotipart', '~> 1.0' 
```

在 application.js 中

```
//= require jquery.remotipart 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T12:39:14.670

您遇到的问题是由于 AJAX 请求无法提交文件。

您可以尝试使用[Jquery Form](http://malsup.com/jquery/form/)插件通过插件提供的 ajaxSubmit 方法通过 AJAX 请求上传文件

# apache-zookeeper - Apache ZooKeeper 的 Python 绑定

> ID：11374900
> 
> 赞同：0
> 
> 时间：2012-07-07T12:13:45.870
> 
> 标签：apache-zookeeper, python-bindings

有人能告诉我在哪里可以找到 Apache ZooKeeper 的“最新”Python 绑定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:17:10.993

它们位于[ZooKeeper SVN 存储库](http://wiki.apache.org/hadoop/ZooKeeper/HowToContribute)中。

# ios - 使用 OpenGL ES 2.0 着色器的平滑纹理线

> ID：11374902
> 
> 赞同：6
> 
> 时间：2012-07-07T12:13:46.300
> 
> 标签：ios, opengl-es, drawing, opengl-es-2.0, shader

我们有一个 iOS 绘图应用程序。目前，绘图是使用 OpenGL ES 1.1 实现的。我们使用一些算法来平滑线条，例如贝塞尔曲线。因此，当触摸事件发生时，我们从触摸事件点中获取一些点（基于算法）并绘制这些点。我们还为点使用画笔纹理以获得更自然的外观。

我想知道是否可以在 OpenGL ES 2.0 着色器中实现这些算法。类似于调用 OpenGL 函数来绘制由触摸点组成的线条，并在输出时呈现平滑的画笔纹理曲线。

![在此处输入图像描述](../Images/a159a20386bb2ebd9ef2bf2690c23b98.png)

这里的点 P0, P1, ... P4 是触摸事件和红色曲线上的点 - 输出点，对于 T，这样的步长使得曲线上两个相邻点之间的距离不大于 1 个像素。

这里是贝塞尔算法解释的链接： [贝塞尔曲线 - 维基百科，免费的百科全书](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)

任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T21:17:32.113

您不能在顶点着色器中生成新顶点（您可以在几何着色器中进行，而 ES 没有）。输出顶点的数量始终与输入顶点的数量相同，您只能更改它们的位置（当然还有其他属性）。

所以你必须画一条由足够多的顶点组成的线带，以保证曲线足够平滑。您可以做的是始终放入相同的线带，将曲线参数值 T 作为 1D 顶点位置。然后在着色器中，您使用此输入位置（参数值）使用 DeCasteljau 算法（或其他算法）计算曲线上的实际 2D/3D 位置，并将点 P0 到 P4 作为常量（统一变量）放入着色器中用 GLSL 术语）。

但我不确定这是否真的会给你带来任何东西，而不是仅仅计算 CPU 上的这些点并将它们放入动态 VBO 中。您节省的是将曲线点从 CPU 复制到 GPU 以及在 CPU 上进行计算，但另一方面，您的顶点着色器要复杂得多。需要评估哪种方法更好。如果您需要计算每帧的曲线点（因为控制点每帧都会改变）并且曲线的细节相当高，那么这可能不是一个坏主意。但除此之外，我认为它并不真正值得。而且您的着色器也不会那么容易地适应运行时不断变化的控制点/曲线度数。

但是再一次，你不能在 GPU 上放入 5 个控制点并生成 N 个曲线点。顶点着色器总是作用于单个顶点并产生单个顶点，就像片段着色器总是作用于单个片段（比如像素，尽管它还不是一个）并产生单个（或没有）片段.

# java - Spring安全空指针异常

> ID：11374904
> 
> 赞同：7
> 
> 时间：2012-07-07T12:14:06.830
> 
> 标签：java, spring, spring-security

我正在尝试将数据库中的用户映射到 Spring Security 用户，但运气不佳。我的 UserServiceImpl 如下（当我通过 servlet 调用它时，自动装配通常工作正常，但在 Spring Security 中使用时会抛出一个空指针......

```
@Service("userService")
@Transactional
public class UserServiceImpl implements UserService, UserDetailsService {

    protected static Logger logger = Logger.getLogger("service");

    @Autowired
    private UserDAO userDao;

    public UserServiceImpl() {
    }

    @Transactional
    public User getById(Long id) {
        return userDao.getById(id);
    }

    @Transactional
    public User getByUsername(String username) {
        return userDao.getByUsername(username);
    }

    @Override
    public UserDetails loadUserByUsername(String username)
            throws UsernameNotFoundException {

        UserDetails user = null;
        try {
            System.out.println(username);
            User dbUser = getByUsername(username);

            user = new org.springframework.security.core.userdetails.User(
                    dbUser.getUsername(), dbUser.getPassword(), true, true,
                    true, true, getAuthorities(dbUser.getAccess()));
        } catch (Exception e) {
            e.printStackTrace();
            logger.log(Level.FINE, "Error in retrieving user");
            throw new UsernameNotFoundException("Error in retrieving user");
        }

        // Return user to Spring for processing.
        // Take note we're not the one evaluating whether this user is
        // authenticated or valid
        // We just merely retrieve a user that matches the specified username
        return user;
    }

    public Collection<GrantedAuthority> getAuthorities(Integer access) {
        // Create a list of grants for this user
        List<GrantedAuthority> authList = new ArrayList<GrantedAuthority>(2);

        // All users are granted with ROLE_USER access
        // Therefore this user gets a ROLE_USER by default
        logger.log(Level.INFO, "User role selected");
        authList.add(new GrantedAuthorityImpl("ROLE_USER"));

        // Check if this user has admin access
        // We interpret Integer(1) as an admin user
        if (access.compareTo(1) == 0) {
            // User has admin access
            logger.log(Level.INFO, "Admin role selected");
            authList.add(new GrantedAuthorityImpl("ROLE_ADMIN"));
        }

        // Return list of granted authorities
        return authList;
    }
} 
```

我得到以下异常（第一行是 System.out）

```
dusername
java.lang.NullPointerException
    at org.assessme.com.service.UserServiceImpl.getByUsername(UserServiceImpl.java:40)
    at org.assessme.com.service.UserServiceImpl.loadUserByUsername(UserServiceImpl.java:50)
    at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:81)
    at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:132)
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:174)
    at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:94)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:194)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722) 
```

所以看起来我的 userDao 没有正确自动装配，但是当我从 servlet 调用服务层时它工作正常，只是在使用 Spring-Security 时显然不行。

第 40 行指 return userDao.getByUsername(username);

有谁知道如何让 userDao 通过@autowired 填充？正如我所说，当我通过 servlet 调用它时它工作得很好，而不是在尝试使用 spring-security 时。

有没有更简单的方法可以在 Spring-security 中映射用户和密码？

我的安全应用程序上下文如下...

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd"
                    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx">
<context:annotation-config />
<context:component-scan base-package="org.assessme.com." />

    <http pattern="/static/**" security="none" />
    <http use-expressions="true">
        <intercept-url pattern="/login" access="permitAll" />
        <intercept-url pattern="/*" access="isAuthenticated()" />
        <!-- <intercept-url pattern="/secure/extreme/**" access="hasRole('supervisor')" 
            /> -->
        <!-- <intercept-url pattern="/listAccounts.html" access="isAuthenticated()" 
            /> -->
        <!-- <intercept-url pattern="/post.html" access="hasAnyRole('supervisor','teller')" 
            /> -->
<!--        <intercept-url pattern="/*" access="denyAll" /> -->
        <form-login />
        <logout invalidate-session="true" logout-success-url="/"
            logout-url="/logout" />
    </http>

    <authentication-manager>
        <authentication-provider user-service-ref="UserDetailsService">
          <password-encoder ref="passwordEncoder"/>
        </authentication-provider>
</authentication-manager>
<context:component-scan base-package="org.assessme.com" /><context:annotation-config />
<beans:bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder" id="passwordEncoder"/>

<beans:bean class="org.assessme.com.service.UserServiceImpl" id="UserDetailsService" autowire="byType"/>

</beans:beans> 
```

我想我的问题是，为什么我的 userDao @Autowired 不能与 spring-security 一起使用，但在 servlet 中用于返回用户对象时它工作正常？例如，以下 servlet 可以正常工作...

为什么我的自动装配（因为它会引发 NPE）在通过 spring-security 时不起作用，但在从 servlet 调用时却可以正常工作？

编辑： - 添加

但现在我明白了

```
ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 9 in XML document from ServletContext resource [/WEB-INF/spring/security-app-context.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 9; columnNumber: 30; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'context:annotation-config'. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T12:39:50.323

您关心通过 bean 声明创建服务：

```
<beans:bean class="org.assessme.com.service.UserServiceImpl" id="UserDetailsService"/> 
```

因此，您需要通过设置属性将其配置为符合自动装配的条件`autowire`。默认为`No`。配置将如下所示：

```
<beans:bean class="org.assessme.com.service.UserServiceImpl" id="UserDetailsService"  autowire="byType" /> 
```

此外，您可以通过配置属性 autowire-candidate="true" 来指示此 bean 将参与其他 bean 自动装配过程。

检查[文档](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-factory-autowire)以找出最适合您的 bean 的策略，使其属性自动装配。我个人使用`byType`and `constructor`，但这实际上取决于您的要求。

另一种解决方案将在您的上下文`default-autowire="true"`标签中配置。`beans`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T12:49:14.823

我认为您只是错过了spring-security 上下文中的`<context:annotation-config/>`and 。`<context:component-scan base-package="..."/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T05:30:24.327

我只是注意到您将 xml 文件中的标记加倍。

```
<context:component-scan base-package="org.assessme.com" /><context:annotation-config /> 
```

让我们尝试删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T07:38:10.150

您所要做的就是将您的 security-app-context 替换为：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/security 
                http://www.springframework.org/schema/security/spring-security-3.1.xsd"
                xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx">

<context:annotation-config>
<context:component-scan base-package="org.assessme.com." />

<http pattern="/static/**" security="none" />
<http use-expressions="true">
    <intercept-url pattern="/login" access="permitAll" />
    <intercept-url pattern="/*" access="isAuthenticated()" />
    <!-- <intercept-url pattern="/secure/extreme/**" access="hasRole('supervisor')" 
        /> -->
    <!-- <intercept-url pattern="/listAccounts.html" access="isAuthenticated()" 
        /> -->
    <!-- <intercept-url pattern="/post.html"     access="hasAnyRole('supervisor','teller')" 
        /> -->
<!--        <intercept-url pattern="/*" access="denyAll" /> -->
    <form-login />
    <logout invalidate-session="true" logout-success-url="/"
        logout-url="/logout" />
</http>
<authentication-manager>
    <authentication-provider user-service-ref="UserDetailsService">
      <password-encoder ref="passwordEncoder"/>
    </authentication-provider>
</authentication-manager>
<context:annotation-config /> 
```

你错过了一些部分，我为你更正了。

# css - 2 级 CSS 下拉菜单 - 显示：无 不起作用

> ID：11374907
> 
> 赞同：0
> 
> 时间：2012-07-07T12:14:29.550
> 
> 标签：css, drop-down-menu

我设计了一个 2 级 CSS 下拉菜单。一切都很完美，除了一件事。我想要它，以便当我将鼠标悬停在顶部菜单项上时，会出现第一级下拉菜单，当我将鼠标悬停在该项目上时，请在第一级菜单中**按下**，然后出现第二级菜单项。但问题是当我将鼠标悬停在顶部菜单上时，所有子菜单都会出现。这意味着`display: none`不起作用。为什么会发生，解决方案是什么？

[jsfiddle.net](http://jsfiddle.net/infinity/2J4e3/)

HTML 代码

```
<ul id="nav">
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
  </ul>
 </li>
</ul> 
```

CSS 代码

```
ul#nav 
{
margin: 0;
padding: 0;
list-style: none;
text-align: center;
/*display: table-cell;
vertical-align: middle;*/
}
ul#nav li
{
float: left;
position: relative;
font-size: 16px;
background-color: orange;
}
ul#nav li li
{
font-size: 14px;
}
ul#nav ul 
{
margin: 0;
padding: 0;
list-style: none;
text-align: left;
display: none;
}
ul#nav li:hover ul 
{
display: block;
position: absolute;
}
ul#nav a:link, ul#nav a:visited
{
display: block;
width: 110px;
padding: 10px 5px;
text-decoration: none;
color: #000;
}
ul#nav ul a:link, ul#nav ul a:visited 
{
width: 135px;
}
ul#nav a:hover, ul#nav a:active
{
color: #fff;
}
ul#nav ul ul
{
position: absolute;
top: 0;
left: 100%;
display: none;
}
ul#nav ul li:hover ul
{
display: block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:16:14.883

改变这个

```
ul#nav li:hover ul 
{
display: block;
position: absolute;
} 
```

对此

```
ul#nav li:hover > ul 
{
display: block;
position: absolute;
} 
```

[例子](http://jsfiddle.net/2J4e3/1/)

基本上`ul#nav li:hover > ul`它只针对二级下拉菜单，所以当你将鼠标悬停在我们身上时，只会显示二级菜单，而隐藏第三级菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:21:13.227

这

```
li:hover ul 
```

将适用于所有后代`ul`。将其更改为：

```
li:hover>ul 
```

适用于直系后代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:25:13.347

使用直接子选择器`>`

[http://jsfiddle.net/2J4e3/2/](http://jsfiddle.net/2J4e3/2/)

# php - 如何使用 PHP 将大的 XML 文件拆分成更小的文件？

> ID：11374908
> 
> 赞同：4
> 
> 时间：2012-07-07T12:14:31.920
> 
> 标签：php, xml, split

我有超过 300 000 个条目的 XML 文件，我的脚本每天都必须解析这些条目。

xml的结构为：

```
<root>
     <item>
        <proper1></proper1>
        <proper2></proper2>
    </item>
</root> 
```

我需要将大 XML 文件拆分为较小的文件，以便我的 PHP 可以运行它们，目前它无法处理它，因为它使用了太多内存。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T12:45:11.020

很大程度上取决于您的 XML 文件结构。

例如，您可以执行以下操作（假设结构是您发布的结构，包括回车，否则事情会变得更复杂）：

**切线版本：如果格式“恰到好处”，则快速切片大型 XML 文件，**
*而如果文件格式不完全一样，则会崩溃和刻录*

```
$fp = fopen(XMLFILE, 'r');
$decl = fgets($fp, 1024);  // Drop the XML declaration '<?xml...?>'
$root = fgets($fp, 1024);  // Drop the root declaration
$n = 1;
while(!feof($fp)) {
    $tag = fgets($fp, 1024);
    if ('<item>' === $tag) {
        isset($gp) || trigger_error('Unexpected state');
        $gp = fopen("chunk{$n}.xml", 'w'); $n++;
        // Write the header of the file we saved from before
        fwrite($gp, $decl);
        fwrite($gp, $root);
    } else if ('</item>' === $tag) {
        fwrite($gp, $tag);
        fwrite($gp, '</root>');
        fclose($gp); unset($gp);
        continue;
    }
    if (!isset($gp)) {
        if ('</root>' === $tag /* EOF */) {
            break;
        } else {
            trigger_error('Unexpected state 2');
        }
    }
    fwrite($gp, $tag);
}
fclose($fp);
isset($gp) || trigger_error('Unexpected state 3'); 
```

这样做的主要好处是允许您“回收”您的 XML 解析脚本（实际上，您可以在关闭 $gp 后立即调用 XML 解析脚本，或者更好的是，根本不写入任何文件，而是将 fwrite 排入队列缓冲区，并使用该缓冲区调用脚本）。

另一个优点是能够在不同的子服务器之间“外包”文件，例如，由于 DNS 解析、DB 调用、HTTP/SOAP 调用、需要反馈等，XML 处理时间很长。在这种情况下，您可以根据 ($n % NUM_CLIENTS) 将文件保存在不同的子目录中，每个客户端一次可以获取一个文件，处理并删除它并继续。

然而，最好的方法是改写您的脚本，以便不将 XML 加载到内存中，而是使用 XML Parser 支持一次解析一点。

一种折衷方案是使用 XML Parser 对 XML 文件进行切片并将其“按原样”提供给您现有的脚本。

**XMLparse 版本：有效地对大型 XML 文件进行切片和切块，**
*而无需担心 XML 实际是如何组合在一起的*

xmlparse 函数通过回调工作，即您将数据输入到入口点 (xml_parse)，然后该入口点分析数据、拆分数据、将各个块路由到您定义的适当子函数。xml_parse 将处理编码和空白，从而使您无需处理相同的问题，这是上述代码中最大的缺点之一。xmlparse 核心本身不保存数据，因此即使对于千兆字节（或太字节）文件，我们也可以实现恒定内存实现。

因此，让我们看看如何重写 XMLParser 的代码，并通过拆分给定标签的一定数量的重复来分块大文件。

即，输入文件：

```
 <root><item>(STUFF OF ITEM1)</item><item>(STUFF OF ITEM2)/item>....ITEM1234...</root> 
```

输出文件：

```
 FILE1: <root><item>(1)</item><item>(2)</item>...(5)</root>
 FILE2: <root><item>(6)</item><item>(7)</item>...(10)</root>
 ... 
```

我们通过编写一个 XMLparser 来做到这一点，它将提取 N（这里 N=5）项中的每个“块”并将其提供给块处理器，在接收到...时，它将在标签之间包装它，添加一个 XML 标头，因此生成一个与原始大文件具有相同语法的文件，但只有五个项目。

为了保存在单独的文件中，我们跟踪块编号。

```
 function processChunk($lastChunk = false) {
         GLOBAL $CHUNKS, $PAYLOAD, $ITEMCOUNT;
         if ('' == $PAYLOAD) {
             return;
         }
         $xp = fopen($file = "output-$CHUNKS.xml", "w");
         fwrite($xp, '<?xml version="1.0"?>'."\n");
             fwrite($xp, "<root>");
                 fwrite($xp, $PAYLOAD);
             $lastChunk || fwrite($xp, "</root>");
         fclose($xp);
         print "Written {$file}\n";
         $CHUNKS++;
         $PAYLOAD    = '';
         $ITEMCOUNT  = 0;
    } 
```

xmlparse 函数需要回调：一个接收标记 OPENING，一个标记 CLOSING，一个获取内容，另一个获取任何内容。我们对什么都不感兴趣，所以我们只填充前三个处理程序。

```
 function startElement($xml, $tag, $attrs = array()) {
        GLOBAL $PAYLOAD, $CHUNKS, $ITEMCOUNT, $CHUNKON;
        if (!($CHUNKS||$ITEMCOUNT)) {
            if ($CHUNKON == strtolower($tag)) {
                $PAYLOAD = '';
            }
        }
        $PAYLOAD .= "<{$tag}";
        foreach($attrs as $k => $v) {
            $PAYLOAD .= " {$k}=\"" .addslashes($v).'"';
        }
        $PAYLOAD .= '>';
    }

    function endElement($xml, $tag) {
        GLOBAL $CHUNKON, $ITEMCOUNT, $ITEMLIMIT;
        dataHandler(null, "</{$tag}>");
        if ($CHUNKON == strtolower($tag)) {
             if (++$ITEMCOUNT >= $ITEMLIMIT) {
                 processChunk();
             }
        }
    }

    function dataHandler($xml, $data) {
        GLOBAL $PAYLOAD;
        $PAYLOAD .= $data;
    }

    function defaultHandler($xml, $data) {
        // a.k.a. Wild Text Fallback Handler, or WTFHandler for short.
    } 
```

为清楚起见，createXMLParser 函数是独立的

```
 function createXMLParser($CHARSET, $bareXML = false) {
            $CURRXML = xml_parser_create($CHARSET);
            xml_parser_set_option( $CURRXML, XML_OPTION_CASE_FOLDING, false);
            xml_parser_set_option( $CURRXML, XML_OPTION_TARGET_ENCODING, $CHARSET);
            xml_set_element_handler($CURRXML, 'startElement', 'endElement');
            xml_set_character_data_handler($CURRXML, 'dataHandler');
            xml_set_default_handler($CURRXML, 'defaultHandler');
            if ($bareXML) {
                xml_parse($CURRXML, '<?xml version="1.0"?>', 0);
            }
            return $CURRXML;
    } 
```

最后是进料循环，它打开 Mr. Big File 并将其发送到研磨机。

```
 function chunkXMLBigFile($file, $tag = 'item', $howmany = 5) {
         GLOBAL $CHUNKON, $CHUNKS, $ITEMLIMIT;

         // Every chunk only holds $ITEMLIMIT "$CHUNKON" elements at most.
         $CHUNKON   = $tag;
         $ITEMLIMIT = $howmany;

         $xml = createXMLParser('UTF-8', false);

         $fp = fopen($file, 'r');
         $CHUNKS  = 0;
         while(!feof($fp)) {
              $chunk = fgets($fp, 10240);
              xml_parse($xml, $chunk, feof($fp));
         }
         xml_parser_free($xml);

         // Now, it is possible that one last chunk is still queued for processing.
         processChunk(true);
    } 
```

然后我们调用机器：“将 test.xml 拆分为项目标签的 5 个实例”

```
 ChunkXMLBigFile('test.xml', 'item', 5); 
```

这个实现的运行速度大约是开始时愚蠢的分块器的五倍，但可以处理同一行中的标签，甚至可以扩展以验证 XML。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-07T12:28:47.827

请看这篇文章[PHP XML Parsing](http://www.ibm.com/developerworks/xml/library/x-xmlphp2/index.html)

1.  SAX 解析
2.  XML Reader [XMLReader](http://www.php.net/manual/en/class.xmlreader.php)拉解析器

最适合这份工作

阅读上面的文章尝试一些代码，你肯定会得到答案

# joomla - 错误插件未在 joomla 2.5 中运行？

> ID：11374910
> 
> 赞同：1
> 
> 时间：2012-07-07T12:14:41.823
> 
> 标签：joomla, joomla2.5

我有一个样本：

```
plugins
--shopping
  ----jcomments
  --------jcomment.php
  --------jcomment.xml 
```

在插件/购物/jcomments/jcomment.php

```
class plgShoppingJcomments extends JPlugin
    function plgShoppingJcomments(&$subject, $config){ 
         parent::__construct($subject, $config);
    }
    function onBeforeDisplayProductView(&$view) {
         die('test');       
    }
} 
```

我调用的组件 com_shopping 的 view.html.php

```
JPluginHelper::importPlugin('shopping');
$dispatcher =& JDispatcher::getInstance();
$dispatcher->trigger( 'onBeforeDisplayProductView', $view); 
```

但是我运行代码是这个插件不显示结果（die（“test”）），如何修复这个插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:21:09.570

试试这个... $dispatcher->trigger('onBeforeDisplayProductView', array($view)); （我只有 60% 的把握这会奏效：D）

# django - 无情的模板语法错误

> ID：11374911
> 
> 赞同：0
> 
> 时间：2012-07-07T12:14:43.087
> 
> 标签：django, google-app-engine, python-2.7, jinja2

**更新#7**：

我删除了第一行并将第二行放在它的位置，第二行是我从 jinja2 链接[jinja2 install docs](http://jinja.pocoo.org/docs/intro/#installation)复制的。但我仍然收到以下错误。

```
# from google.appengine.ext.webapp import template
from jinja2 import Template

  File "/Users/brian/googleapps/YouPoll/views.py", line 271, in get
    self.response.out.write(template.render(path, template_values))
NameError: global name 'template' is not defined
INFO     2012-07-08 22:43:53,053 dev_appserver.py:2952] "GET /?ID=testBSchott HTTP/1.1" 500 
```

这个 appengine 不久前使用模板文件中的非 django 代码工作。

此外，如果我在 gae 交互式控制台中执行以下代码，它可以工作，即使它包含我认为是 jinja2 而不是 django 独有的 {%- if ... -%} 代码。

```
from jinja2 import Template
template = Template('{%- if True -%}Hello {{ name }}!{% endif %}')
print template.render(name='John Doe') 
```

**更新#6**：

好的，我发现变量模板被定义了。它在下面。

```
jinja_environment.filters['datetimeformat'] = datetimeformat

class BaseHandler(webapp2.RequestHandler):

    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

    def render_template(
        self,
        filename,
        template_values,
        **template_args
        ):
        template = jinja_environment.get_template(filename)
        self.response.out.write(template.render(template_values)) 
```

**更新#5：**

这是我在views.py中的导入：

```
import jinja2
import os
import webapp2
import logging
import datetime
from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.ext.webapp import template
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.api import images
# from jinja2 import Environment, PackageLoader

from models import QA, PQ

TEMPLATE_DIR = os.path.join(os.path.dirname(__file__), 'templates')
jinja_environment = \
    jinja2.Environment(loader=jinja2.FileSystemLoader(TEMPLATE_DIR)) 
```

在我发布的一些代码中，我对 template_values 的使用如下。2 个导入提到 webapp，而不是 webapp2。但是，如果我将第一个更改为 webapp2，我会收到此错误。

```
 File "/Users/brian/googleapps/YouPoll/views.py", line 9, in <module>
    from google.appengine.ext.webapp2 import template
ImportError: No module named webapp2
INFO     2012-07-08 18:44:18,972 dev_appserver.py:2952] "GET /?ID=testBSchott HTTP/1.1" 500 
```

如果我删除该行，我会收到此错误。

```
 File "/Users/brian/googleapps/YouPoll/views.py", line 272, in get
    self.response.out.write(template.render(path, template_values))
NameError: global name 'template' is not defined
INFO     2012-07-08 18:30:52,733 dev_appserver.py:2952] "GET /?ID=testBSchott HTTP/1.1" 500 
```

你看到我能做些什么了吗？我提供了你需要的信息吗？

**更新#3**：如果我删除这 5 个 jinja2 序列/短语，则 html 表单可以正常工作。但是这 5 个序列/短语没有语法错误。他们过去工作得很好。我在第一次更新中添加了包含 django 的 Traceback，尽管我没有使用 django——只有 jinja。那么我还犯了什么错误？

在删除上面的序列/短语之前，我还在底部包含了我的 html 页面。

1

```
{% for choice in p.choices -%}
{% if not loop.first %}
,{% endif %}
 {% if loop.last %}
   &nbsp;or&nbsp;
 {% endif %}
 {{ choice }} 
{%- endfor %}. 
```

2 {% for selection in p.choices %} {% if not loop.first %} ,{% endif %} {% if loop.last %} 或 {% endif %} {{ choice }} {% endfor %} .

3

```
{{ q.answers|sum() }} 
```

4

```
q.date|datetimeformat('%d-%m-%Y') 
```

5

q.modified|datetimeformat('%d-%m-%Y')

**更新结束#3**

这句话出现在错误之前，工作正常。

```
 {% if p.purpose %}
   </p>
  <p> The purpose of this questionnaire is {{ p.purpose }}.
  </p>
   {% endif %} 
```

但是接下来的这个短语会引发错误（显然）。

```
{% for choice in p.choices -%}
{% if not loop.first %}
,{% endif %}
 {% if loop.last %}
   &nbsp;or&nbsp;
 {% endif %}
 {{ choice }} 
{%- endfor %}. 
```

接下来是错误。

**更新＃2**：如果我修改“错误”“for”语句，删除空间控制“-”，系统仍会转到下面的下一个错误，但“-”并不是真正的错误。

```
ERROR    2012-07-06 21:46:07,107 webapp2.py:1553] 'for' statements should use the format 'for x in y': for choice in p.choices -
Traceback (most recent call last): 
```

**更新#1**：

```
 File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/Users/brian/googleapps/YouPoll/views.py", line 272, in get
    self.response.out.write(template.render(path, template_values))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/template.py", line 89, in render
    t = _load_internal_django(template_path, debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/template.py", line 163, in _load_internal_django
    template = django.template.loader.get_template(file_name)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/loader.py", line 160, in get_template
    template = get_template_from_string(template, origin, template_name)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/loader.py", line 168, in get_template_from_string
    return Template(source, origin, name)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 158, in __init__
    self.nodelist = compile_string(template_string, origin)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 186, in compile_string
    return parser.parse()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 281, in parse
    compiled_result = compile_func(self, token)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/loader_tags.py", line 195, in do_extends
    nodelist = parser.parse()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 281, in parse
    compiled_result = compile_func(self, token)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/loader_tags.py", line 173, in do_block
    nodelist = parser.parse(('endblock', 'endblock %s' % block_name))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 281, in parse
    compiled_result = compile_func(self, token)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/defaulttags.py", line 684, in do_for
    " 'for x in y': %s" % token.contents)

TemplateSyntaxError: 'for' statements should use the format 'for x in y': for choice in p.choices -
INFO     2012-07-06 21:46:07,117 dev_appserver.py:2952] "GET /?ID=testBSchott HTTP/1.1" 500 - 
```

如果我从模板中删除该短语，则此短语会引发错误（在跳过其他一些（%ifs 和 {%fors ）之后）。

```
{% for q in qs|sort(attribute='seqnum') %} 
```

接下来是错误。

```
ERROR    2012-07-06 21:48:38,177 webapp2.py:1553] Invalid filter: 'sort'
Traceback (most recent call last):
...
TemplateSyntaxError: Invalid filter: 'sort'
INFO     2012-07-06 21:44:03,051 dev_appserver.py:2952] "GET /?ID=testBSchott HTTP/1.1" 500 - 
```

如果我从模板中删除该短语，则此短语会引发错误（在跳过其他一些（%ifs 和 {%fors ）之后）。

```
<td align="right"> {{ q.answers|sum() }} </td> 
```

如果我从模板中删除该短语，那么这个短语也会引发错误。

```
ERROR    2012-07-06 21:36:07,650 webapp2.py:1553] Invalid filter: 'sum'
Traceback (most recent call last):
...
TemplateSyntaxError: Invalid filter: 'sum' 
```

等等。这看起来像是其他问题的信号。但我没有头绪。这个模板之前工作了一点，但已经停止工作，所以我怀疑我的 python 代码中有一些错误是原因，但我无法想象从哪里开始寻找。

顺便说一句，当我使用 jinja2 时，Traceback 经常提到 Django，但我认为这无关紧要。

下面是我用来提供模板的 python 代码。我留下了日志信息以显示我所做的一些调试。

```
qs = db.Query(QA)
qs.ancestor(person)
qs.filter('deleteRequested =', False)
qs.run()
for item in qs:
    logging.info("2 seqnum %d" % item.seqnum)
for item in person.choices:
    logging.info("2 choice %s" % item )
logging.info("2 title %s" % person.title  )
logging.info("2 person.key()%s" % person.key())

# template_values = {'ID_id':person.key(), 
template_values = { 'p': person,
    'qs': qs
    }
path = os.path.join(TEMPLATE_DIR, 'table.html')
logging.info("Here After Revise" )
self.response.out.write(template.render(path, template_values)) 
```

**更新#4**：

以下是我失败的 html 页面的列表。

```
{% extends "base.html" %}
{% block content %}
<center>
    <h1>Make your preferences for <span class="emph">{{p.ID|escape}}</span> known here</h1>
   {% if p.title %}
  </center>
  <p><h2> The title of this questionnaire is: {{ p.title }}.</h2> </p>
  </center>
   {% endif %} 
  <br />

   <div id="inputdata">
   {% if p.purpose %}
  <p> The purpose of this questionnaire is: {{ p.purpose }}.
  </p>
   {% endif %} 
  <p>This is a participative preferences survey: you not only answer questions, you supply questions for all to answer.
  </p>
  <ol>
<li>
  To answer existing questions, click on the "Radio" button in the corresponding rows of the table: 
{% for choice in p.choices -%}
{% if not loop.first %}
,{% endif %}
 {% if loop.last %}
   &nbsp;or&nbsp;
 {% endif %}
 {{ choice }} 
{%- endfor %}.  
</li>
<li>
  After answering questions, at the bottom of the page click the "Submit" button to register you answers.
</li>
</ol>
  </div>
<br />
   <div id="inputdata">
  <p>To supply a new question or statement, click <a href="/add_question?ID={{ p.ID }}"><span class="emph">here</span></a>. At the present time there is no automated mechanism for editing or erasing an existing question.
  </p>
<br />
  <p>The question numbers (No's) are used to arrange the questions.  You place your question in the list with the number you choose.
  </p>
  </div>
   {% if not p.moreinfo == 'None' %}
   <p> {{ p.moreinfo }} 
   </p>
   {% endif %} 
<form action="table" method="post" enctype="multipart/form-data">
       <input type="hidden" name="ID" value="{{p.ID|escape}}"></input><br/>
  <table border="1" cellpadding="2" 
      cellspacing="0" class="sortable" id="unique-id">
 <thead> <tr> 
<td>No</td>
<td>Question</td>
<td> Total </td>
{% for choice in p.choices %}
<td bgcolor="#fef886"> {{ choice }} </td>
{% endfor %}
<td> Created </td>
<td> Last answered </td>
</tr></thead>

<tbody>
    {% if qs %}
{% for q in qs|sort(attribute='seqnum') %}
    <tr>
    <td align="right"> {{ q.seqnum }} </td>
    <td> {{ q.question }} </td>
    <td align="right"> {{ q.answers|sum() }} </td>
    {# <td> {{ q.total }} </td> #}
        {% for answer in q.answers %}
    <td bgcolor="#fef886"> 
        <input type="radio" name="{{q.seqnum}}" value="{{loop.index}}"
        />
        {{ answer }} 
    </td>
        {% endfor %}
<td>{{ q.date|datetimeformat('%d-%m-%Y') }}</td>
<td>{{ q.modified|datetimeformat('%d-%m-%Y')}}</td>
</tr>
{% endfor %}
{% endif %}
</tbody>
</table>
  <br />
   <div id="inputdata">
       <p>To remember your own choices, print this page before ReLoading</p>
  </div>
<center>
  <input type="submit" 
   name="Submit" 
   value="Submit" /> 
  </center>
  </form>   

<script src="/static/javascript/sorttable.js" type="text/javascript"></script>

{% endblock content %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:07:55.487

Wooble 通过评论摆脱`google.appengine.ext.webapp import template`并替换为 确实回答了这个问题`from jinja2 import Template`，但我也遇到了另一个错误，这可能导致了原始问题。我曾经使用过`self.response.out.write(template.render(path, template_values))`而不是`self.render_template('table.html', template_values )`在某一时刻。

关键问题是，当我认为我正在使用 jinja2 时，gae 正在使用 django，而 Wooble 强调了我在最初的问题中只是随便提到的那个事实。

（所以我希望 Wooble 得到这个答案的信任。）

# mysql - mysql count(*) 需要很长时间？有更好的选择吗？

> ID：11374913
> 
> 赞同：19
> 
> 时间：2012-07-07T12:14:57.143
> 
> 标签：mysql

```
mysql> select count(*) from id_renewal ;
+----------+
| count(*) |
+----------+
| 13633246 |
+----------+ 
```

执行输出需要 10 多分钟。这可以在服务器参数中调整吗？由于我应该每小时运行一次此查询以获取报告，因此对我的业务人员来说，查询耗时 10 分钟是不可行的......

像在 oracle 中一样保留内存的任何选项？

```
mysql> show variables like '%cache%';
+------------------------------+----------------------+
| Variable_name                | Value                |
+------------------------------+----------------------+
| binlog_cache_size            | 32768                |
| have_query_cache             | YES                  |
| key_cache_age_threshold      | 300                  |
| key_cache_block_size         | 1024                 |
| key_cache_division_limit     | 100                  |
| max_binlog_cache_size        | 18446744073709547520 |
| query_cache_limit            | 1048576              |
| query_cache_min_res_unit     | 4096                 |
| query_cache_size             | 134217728            |
| query_cache_type             | ON                   |
| query_cache_wlock_invalidate | OFF                  |
| table_definition_cache       | 512                  |
| table_open_cache             | 2048                 |
| thread_cache_size            | 16                   |
+------------------------------+----------------------+
14 rows in set (0.00 sec)

mysql> show global status like '%Qc%';
+-------------------------+-----------+
| Variable_name           | Value     |
+-------------------------+-----------+
| Qcache_free_blocks      | 118       |
| Qcache_free_memory      | 133367960 |
| Qcache_hits             | 71077421  |
| Qcache_inserts          | 137390744 |
| Qcache_lowmem_prunes    | 18066     |
| Qcache_not_cached       | 120209332 |
| Qcache_queries_in_cache | 427       |
| Qcache_total_blocks     | 990       |
+-------------------------+-----------+

mysql> select count(*) from idea_sub_renewal ;
+----------+
| count(*) |
+----------+
| 13633246 |
+----------+

top - 17:40:19 up 148 days, 17:51, 10 users,  load average: 0.83, 0.91, 1.00
Tasks: 257 total,   1 running, 251 sleeping,   0 stopped,   5 zombie
Cpu(s):  2.0%us,  0.6%sy,  0.0%ni, 97.1%id,  0.0%wa,  0.0%hi,  0.3%si,  0.0%st
Mem:   8167348k total,  8124120k used,    43228k free,    33928k buffers
Swap: 16386260k total,   709864k used, 15676396k free,  4615456k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                                          
26329 sym       19   0 1195m  64m 7456 S 13.3  0.8  66:34.40 java                                                                                                                              
12079 mysql     15   0 1725m 463m 4840 S  6.3  5.8  24227:57 mysqld                                                                                                                            
  477 sym       18   0  674m  62m 7260 S  1.0  0.8   2:25.59 java                                                                                                                              
26948 powerdev  16   0 12896 1232  824 S  0.7  0.0   0:07.90 top                                                                                                                               
18843 sym       19   0 1271m 494m 7364 S  0.3  6.2  10:19.89 java                                                                                                                              
26379 sym       21   0 1203m 299m 7464 S  0.3  3.8   1:36.90 java                                                                                                                              
29872 sym       18   0 1238m 869m 7816 S  0.3 10.9   7:42.33 java 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-12-17T10:18:43.757

InnoDB COUNT() 对百万行的表工作缓慢。但是，如果您不使用 WHERE，则可以使用 hack 来查看表中有多少行 - 使用 EXPLAIN。

```
mysql> explain select count(1) from history;
+----+-------------+---------+-------+---------------+-----------+---------+------+----------+-------------+
| id | select_type | table   | type  | possible_keys | key       | key_len | ref  | rows     | Extra       |
+----+-------------+---------+-------+---------------+-----------+---------+------+----------+-------------+
|  1 | SIMPLE      | history | index | NULL          | history_1 | 12      | NULL | 17227419 | Using index |
+----+-------------+---------+-------+---------------+-----------+---------+------+----------+-------------+
1 row in set (0.01 sec) 
```

在“行”列中，您可以看到行数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-28T07:53:54.310

尝试 select (distinct id) from tbl ， id beeing 主键字段。所以 mysql (8) 正在使用索引，没有不同的相同查询需要 16 秒来获取 100000 条记录，而不是 0.096 秒！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T12:16:11.560

尝试 ：：

```
Select count(1) from table 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T12:36:37.907

将 mysql 更改为最新版本，如 5.5.25 inno db。- myisam db 在更新和删除时可能会很慢

分发mysql数据和日志磁盘。- 磁盘负载分配非常重要

检查 key_buffer_size、read_buffer_size - 不查询缓存

将磁盘更改为 SSD - 提高速度

检查 mysql 日志以获取最大连接、慢查询和其他 - 清除每个日志时速度就会到来

显示...用于查看索引的表定义。

# ruby-on-rails-3.1 - 某些资产未在 Heroku 上显示

> ID：11374914
> 
> 赞同：3
> 
> 时间：2012-07-07T12:15:15.940
> 
> 标签：ruby-on-rails-3.1, heroku, asset-pipeline

我在我的应用程序中添加了一些新图像，它们在本地显示良好，但在 Heroku 上没有生产。生成的 CSS 引用是正确的：

```
background-image: url("glyphicons-halflings-white.png") 
```

最终链接到[http://www.photoramblr.com/assets/glyphicons-halflings-white.png](http://www.photoramblr.com/assets/glyphicons-halflings-white.png)

那里没有图片，但我过去上传的其他图片都在 /assets/... 下。例如[这个](http://www.photoramblr.com/assets/icon_thumbs_up-85aad0d2bc5cde2a13fee99b1efa0832.png)。有趣的是，如果我取出一长串数字，只留下原始文件名，图像是空白的......

资产预编译在部署时似乎工作正常，我刚刚尝试在服务器上手动运行资产：预编译，但仍然没有图像。

有什么想法吗？

更新：顺便说一句，看看我的`config/application.rb`：

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  # Bundler.require *Rails.groups(:assets => %w(development test))
  # If you want your assets lazily compiled in production, use this line
  Bundler.require(:default, :assets, Rails.env)
end

module PhotoRambler
  class Application < Rails::Application
    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'

    config.assets.initialize_on_precompile = false
    config.assets.compress = true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:05:00.813

确保将新资产签入源代码管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T16:34:01.330

奇怪的是，从 Rails 3.1 升级到 Rails 3.2.6 解决了我的问题。不知道为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T15:31:52.497

我正在使用 less/bootstrap，我在 CSS 中的图像编码如下：

```
background: image-url("delete.gif") no-repeat ; 
```

# c# - 我在什么情况下在 C# 中运行？

> ID：11374916
> 
> 赞同：8
> 
> 时间：2012-07-07T12:15:33.160
> 
> 标签：c#, .net, .net-4.0

我想知道...

当我有这样的代码时：

```
lock (obj)
{
    MyCode.MyAgent();
} 
```

可以`MyAgent`包含*识别*它在`lock`块下运行的代码吗？

关于什么：

```
for (int i=0;i<5;i++)
{
   MyCode.MyAgent();
} 
```

可以`MyAgent`包含*识别*它在`loop`块下运行的代码吗？

可以针对`using`块、`unsafe`代码等提出相同的问题...-您明白了...

这在 C# 中可能吗？

*这只是一个理论问题，我并不想实现任何目标……只是知识。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T12:40:33.480

这并非完全不可能，您可以使用 StackTrace 类来获取对调用方方法的引用，并使用 MethodInfo.GetMethodBody() 来获取该方法的 IL。

但是你永远不会得到这个可靠的，即时编译器的优化器会让你很难弄清楚调用的确切位置。方法体内联会使方法完全消失。循环展开将使您无法了解循环索引。优化器使用 cpu 寄存器来存储局部变量和方法参数，从而无法获得可靠的变量值。

更不用说反编译 IL 所涉及的锡箔咀嚼工作了。这些都远不及将参数传递给方法的简单性和速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T12:38:53.520

否（当然，除非代码明确将此信息转发给方法）。

这样做的原因是，诸如此类的概念不会被转换为保存在 IL 或元数据中的结构化信息，然后 CLR 可能会在运行时向您公开这些信息。将此与确实在元数据中编码的类进行对比，从而在运行时启用反射。

尝试保留这些信息会导致复杂性增加，当然还有额外的开销而没有任何好处，因为如果您需要程序保持这种状态，很容易在代码中实现这一点（要求这种状态是否是一个好主意是另一个问题） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:43:26.800

我不相信 .NET 支持您直接描述的功能，尽管您可以通过使用 StackFrame 获取当前调用堆栈并使用反射分析方法体等来获取该信息，但我不确定你能做到多么精确。

.NET 确实有用于同步的上下文，但不是您所询问的级别。例如，查看[System.ContextBoundObject](http://msdn.microsoft.com/en-us/library/system.contextboundobject.aspx)。

# c# - SqlClient 连接工厂管理，在 WCF 服务中使用 ninject

> ID：11374918
> 
> 赞同：1
> 
> 时间：2012-07-07T12:15:48.343
> 
> 标签：c#, wcf, ninject

我目前在我的 WCF 服务中遇到了这个问题。“在从池中获取连接之前经过的超时时间”

现在我明白了这个错误，我的问题是，使用 Ninject 在 WCF 服务中管理 Sql 连接的正确方法是什么。

我所做的就是这个。在绑定中我有

```
 Bind<IConnectionFactory>().To<ConnectionFactory>().InScope(c => OperationContext.Current); 
```

我的连接工厂看起来像这样。

```
public class ConnectionFactory : IConnectionFactory
{
    private string connectionString = ConfigurationManager.ConnectionStrings["SqlConnection"].ConnectionString;
    private SqlConnection sqlConnection;

    public SqlConnection GetOpenConnection()
    {
        if (sqlConnection == null)
            sqlConnection = new SqlConnection(connectionString);

        if (sqlConnection.State != ConnectionState.Open)
            sqlConnection.Open();

        return sqlConnection;
    }

    public void CloseConnection()
    {
        sqlConnection.Close();
    } 
```

每当我需要 Sql 连接时，我都会通过这样的 IoC 容器调用它。

```
 SqlConnection connection = IoC.Resolve<IConnectionFactory>().GetOpenConnection(); 
```

我的假设是，每当我处理相同的请求时，我都会从 Ninject 返回相同的连接，并且该请求生命周期内的所有连接调用都将获得相同的连接。基于错误，我假设这没有发生。有没有更好的方法来做到这一点？或者，对于带有 ninject 的 WCF 来说，什么是更好的连接管理范例？我觉得将连接工厂设为单例是错误的做法，但这只是我的直觉。

编辑：我想补充一点，我将连接注入到我的存储库中，就像这样

```
private readonly SqlConnection connection;

    public RandomRepository(IConnectionFactory connectionFactory)
    {
        connection = connectionFactory.GetOpenConnection();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:30:58.487

嗨，您可以安装 Ninject.Extensions.WCF 这为您提供了适当的 WCF 服务范围。然后，您可以`SqlConnection`直接将一个注入到您的类中，而无需使用您的连接工厂。只需使用具有适当范围的方法绑定即可。例如调用范围：

```
Bind<ISqlConnection>().ToMethod(ctx => ctx.Kernel.Get<IConnectionFactory>().GetOpenConnection()).InCallScope(); 
```

然后，当您的请求超出范围时，Ninject 将负责处理连接。

# android - 在屏幕上以像素为单位获取位图大小，而不是实际大小？

> ID：11374919
> 
> 赞同：0
> 
> 时间：2012-07-07T12:16:02.927
> 
> 标签：android, graphics

我有一个布局，顶部有一些水平滚动，底部有一些文本框，中间有任何空间，我用 ImageView 填充它。在那个 ImageView 中，我加载了一个位图。让我们将此 ImageView 称为**底部**。

现在，在该 ImageView 之上，我动态加载另一个 ImageView，用户可以通过拖动它来移动它。第二个 ImageView （**顶部**）有一个小图标，将覆盖在我的位图顶部并保存。将其视为徽标/水印。

两个 ImageView 都在一个相对布局中，所以我可以移动顶部布局。

现在我遇到的问题是我无法获取**底部**ImageView 中加载的位图的大小。

我尝试了以下方法：

```
DisplayMetrics om = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(om);
tv.setText("W:" + b.getScaledWidth(om) + " H:" + b.getScaledHeight(om)); 
```

但它不起作用，***b.getScaledWidth(om)***返回我的位图的实际宽度，而不是屏幕上的宽度，它应该是（如果是横向图像）480px，我是手机的屏幕大小上测试。

附加信息：为什么我需要这个是因为我在底部 ImageView 中显示的图像与 ImageView 的比例不同。所以我可以得到 ImageView 的大小，但是这个 ImageView 比图像本身大。因为我需要将顶部 ImageView 保持在底部 ImageView 中显示的图像边界内，所以我需要知道底部 ImageView 中图像的大小，而不是底部 View 本身的大小。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:18:06.747

我没有找到办法，所以我“手动”做了。

我用*MyImageView*类扩展了*ImageView*类，在*onMeasure*覆盖中我计算了比例因子，并根据我的*RelativeLayout*创建了一个表示坐标边界的*Rect*，其中是*MyImageView*。

 ***我之所以走这条路，是因为我在这里找到了一篇关于创建自己的*ImageView*类的帖子，但再也找不到链接了。

无论如何，在那之后我检查顶部 ImageView 的顶部/左侧位置，**并** *在*onTouch 方法中移动它时设置最大*位置*。***

# java - Java：如何使用表达式语言方法聚合（最小，最大，平均）集合元素属性？

> ID：11374922
> 
> 赞同：4
> 
> 时间：2012-07-07T12:16:44.817
> 
> 标签：java, aggregate-functions

我正在寻找一种简单的方法来对 Java 集合执行聚合函数以确定例如产品集合的最低价格。但我不想用纯 java 来做，而是某种可以由用户输入的 DSL / 脚本 / 表达式语言，因此需要尽可能简单。

假设我有以下对象结构：

```
Product:
id: product1
offers: [offer1, offer2]

Offer1:
id: offer1
data:
  price: 10.99
  shipCost: 3.99

Offer2:
id: offer2
data:
  price: 5.99
  shipCost: 3.99 
```

在上面的示例中，最终结果将是这样的：

```
minPriceOfProduct1 = 5.99 
```

现在我的应用程序的用户可以显示产品列表。对于每种产品，他希望获得最低价格，这是所有报价中的最低值。用户无权访问底层数据存储，因此不能选择 SQL。我们唯一拥有的是 java 对象。我希望用户使用某种表达语言来表达这一点。

目前，我能够将 Freemarker 代码片段应用于每个产品以获取数据或根据以下属性进行更多操作以计算新值：

```
<#if (item.isProduct() && item.offers??) >
   <#assign offerMinPrice = -1>
   <#list item.offers as o>
     <#if (offerMinPrice == -1 || ( o.data.priceCents?? && o.data.priceCents < offerMinPrice ) )>
       <#assign offerMinPrice=o.data.priceCents! >
     </#if> 
   </#list> 

   <#if offerMinPrice != -1>
       ${offerMinPrice}
   <#else>
       ${priceCents}
   </#if> 
<#else>
   ${priceCents!}
</#if> 
```

这行得通，但它是丑陋的代码，不仅让我的大脑流血。我宁愿有一些更简单的表达语言方法，看起来像这样：

```
minOffersPrice = min(product.offers.data.price) 
```

这对用户来说看起来要简单得多，并且应该在引擎盖下进行相同的聚合。

你想到了什么方法？通过网络搜索，我想到了以下几点：

*   MVEL 表达式语言[http://mvel.codehaus.org/MVEL+2.0+Operators](http://mvel.codehaus.org/MVEL+2.0+Operators)（好像没有解决聚合函数）
*   JoSQL [http://josql.sourceforge.net/](http://josql.sourceforge.net/)
*   诸如 lambda 表达式或闭包之类的东西
*   Java 中的 Rhino Javascript
*   结合 Java Reflections 或 apache commons beanutils 进行一些手动解析

谢谢克里斯托夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:15:57.363

LambdaJ 是一个使用纯 Java api 解决此问题的库：[https ://code.google.com/p/lambdaj/wiki/LambdajFeatures](https://code.google.com/p/lambdaj/wiki/LambdajFeatures)

```
Person maxAgePerson = selectMax(personsList, on(Person.class).getAge() ); 
```

where`selectMax`和是来自[Lambda](http://lambdaj.googlecode.com/svn/trunk/html/apidocs/ch/lambdaj/Lambda.html)类`on`的静态导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-11T14:48:45.867

[Java 8 流](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html)以相当流畅的语法提供了其中的一些功能：

```
import static java.util.Comparator.comparingBy;
/* ... */
BigDecimal minPrice = product1.offers.stream()
    .min(comparingBy(o -> o.data.price)); 
```

# android - Android：如何通过使用服务在后台运行应用程序来获取画布上的当前屏幕图像

> ID：11374924
> 
> 赞同：0
> 
> 时间：2012-07-07T12:16:57.283
> 
> 标签：android, bitmap, screen-scraping, screenshot, android-canvas

我是 Android 应用程序编程的新手，请提供一些帮助.. 提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:40:52.327

您的任何活动都可以吸引自己`Canvas`——在 SO 上有很多涵盖该技术的答案，例如：[如何截取屏幕截图并以编程方式共享它](https://stackoverflow.com/questions/10296711/androidtake-screenshot-and-share-it)

可以想象，您的服务可以要求您的活动将自己吸引到 a `Canvas`，但尚不清楚该服务存在的原因。

你的一个服务不能有任意的其他活动，那些不是你写的，以任何形式截图。

# mysql - 创建表语句中的 MySQL 语法错误

> ID：11374926
> 
> 赞同：-1
> 
> 时间：2012-07-07T12:17:14.210
> 
> 标签：mysql, create-table

我不太擅长 SQL 语句，对不起，我有一个声明：

```
CREATE TABLE app (  
    id INT NOT NULL AUTO_INCREMENT,  
    attachments LONGTEXT,  
    cc TEXT,  
    cc_full TEXT,  
    date TEXT NOT NULL,  
    from TEXT,  
    from_full TEXT NOT NULL,  
    headers TEXT NOT NULL,  
    html_body LONGTEXT,  
    mailbox_hash TEXT NOT NULL,  
    message_id TEXT NOT NULL,  
    reply_to TEXT,  
    subject TEXT NOT NULL,  
    tag TEXT,  
    text_body LONGTEXT,  
    to TEXT,  
    to_full TEXT NOT NULL, 
    PRIMARY KEY(id)
) 
```

不幸的是，我收到此错误：

> 错误（1064）：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'from TEXT, from_full TEXT NOT NULL, headers TEXT NOT NULL, html_body LONGTEXT, m' 附近使用正确的语法

我认为这可能是 ' `from`' 是保留字问题，所以我也将所有列名都用引号括起来，但仍然不高兴！

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:21:27.670

`date`并且`from`是任何 SQL 格式的保留字。始终使用反引号 ( **`** ) 将它们括起来，以使它们被接受。

参考：[MySQL 保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:19:53.803

FROM 是一个保留的 MySQL 关键字。将您的字段名称更改为其他名称。
你的`date`和`to`领域也是如此。

# jquery-ui - 在 jquery ui 对话框中应用数据表

> ID：11374929
> 
> 赞同：3
> 
> 时间：2012-07-07T12:18:31.913
> 
> 标签：jquery-ui, datatables

我有一个页面，我在其中使用带有数据表的 jqueryui 对话框。单击按钮时，对话框打开并显示表格内容。如果没有数据表，对话框将按预期执行。但是当数据表应用于表时，我无法得到预期的结果。所以我的问题是，最好的方法是什么？

对话框html：

```
<div id="customerDialog">
  <input type="button" id="selectCustomer" name="selectCustomer" value="Select" /> 
  <table id="custTable">
     <thead>
      <tr>
        <th>Id</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
        <th>Mobile</th>
      </tr>
    </thead>
    <tbody>

      <tr>
        <td><input type="radio" id="custId" name="custId" value="0" /></td>
        <td>x</td>
        <td>ye</td>
        <td>z@x.y</td>
        <td>000000000</td>
      </tr>
      <tr>
        <td><input type="radio" id="custId" name="custId" value="1" /></td>
        <td>x</td>
        <td>ye</td>
        <td>z@x.y</td>
        <td>000000000</td>
      </tr>
      <tr>
        <td><input type="radio" id="custId" name="custId" value="2" /></td>
        <td>x</td>
        <td>ye</td>
        <td>z@x.y</td>
        <td>000000000</td>
      </tr>
      <tr>
        <td><input type="radio" id="custId" name="custId" value="3" /></td> 
        <td>x</td>
        <td>ye</td>
        <td>z@x.y</td>
        <td>000000000</td>
      </tr>
      <tr>
        <td><input type="radio" id="custId" name="custId" value="4" /></td>
        <td>x</td>
        <td>ye</td>
        <td>z@x.y</td>
        <td>000000000</td>
      </tr>

    </tbody>
  </table>
</div> 
```

和我的jQuery代码：

```
$(document).ready(function() {
    $('#customerDialog').dialog({
        autoOpen: false,
        title: "Customers",
        show: "blind",
        hide: "explode",
        modal: true,
        width: 500
    });

    $('#custTable').dataTable({
        bJQueryUI: true
    });

    $('#selectCustomer').click(function() {
        var target = $(this);
        $('#customerDialog').dialog("open");
        $('#customerDialog').dialog("widget").position({
            my: 'left top',
            at: 'left bottom',
            of: target
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:28:59.403

OP的代码是正确的，实际上它是有效的。

![http://jsfiddle.net/nicolapeluchetti/CuvkR/](../Images/afce46b840aba6ff710b5a6eb50428d3.png)

解决方案：

[http://jsfiddle.net/nicolapeluchetti/CuvkR/](http://jsfiddle.net/nicolapeluchetti/CuvkR/)

```
$('#customerDialog').dialog({
    autoOpen: false,
    title: "Customers",
    show: "blind",
    hide: "explode",
    modal: true,
    width: 500
});

$('#custTable').dataTable({
    bJQueryUI: true
});

$('#selectCustomer').click(function() {
    var target = $(this);
    $('#customerDialog').dialog("open");
    $('#customerDialog').dialog("widget").position({
        my: 'left top',
        at: 'left bottom',
        of: target
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:54:32.730

我使用与大量使用 javascript 相同的技术。在您描述的这种情况下，通常的问题是 DOM 元素在您初始化插件时不存在（在这种情况下为数据表）。

是否通过 AJAX 调用加载对话框的内容？看起来并非如此，但您可能正在为我们简化代码。

如果是这样，那么您需要在您的 ready() 函数中使用这样的自定义事件

```
 $(document).on('datatable_loaded', function() {
        $('#custTable').dataTable({
            bJQueryUI: true
        });
    }); 
```

在您的 AJAX 成功回调中执行此操作

```
 $(document).trigger('datatable_loaded'); 
```

在此示例中，“datatable_loaded”是您自己抛出并捕获的任意字符串。如果您没有使用 AJAX 加载对话框内容，那么这种方法对您没有帮助，因为错误在其他地方。

# c# - C# 将 2 个数字 (INT) 加入 1 个更长的 INT

> ID：11374930
> 
> 赞同：0
> 
> 时间：2012-07-07T12:18:50.517
> 
> 标签：c#

这可能很有趣，但我真的不知道如何搜索以找到这个答案。

当我想加入字符串时，我总是使用这样的东西 "string = "something" + "somethingelse" "

但是如何用 INT 来做呢？:)

```
Random r = new Random();
int lvfirst = r.Next(485924948);
int lvsecond = r.Next(39);
int lvdone = lvfirst + lvsecond;
Globals.GlobalInt = lvdone; 
```

我尝试做一个 long int 但它似乎不起作用它说明了 Long 所以如果你能帮助我如何将这 2 个随机数加入 1？我需要 1 个最大随机数“48592494839”

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:25:40.757

这段代码有两个问题：

1.  “粘在一起”的两个输出`Next`不会为您提供目标范围内的随机值。数学不适用于字符串。
2.  它没有返回结果，而是将其存储在全局变量中。

如果您想要指定范围内的值，请使用

```
var result = (long) (r.NextDouble() * 48592494839); 
```

这仍然不适用于*任何*目标范围，但可以轻松满足您的特定要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:22:06.450

你可以这样做：

```
Random r = new Random();
int lvfirst = r.Next(485924948);
int lvsecond = r.Next(39);
long lvdone = Int64.Parse(lvfirst.ToString() + lvsecond.ToString());
Globals.GlobalInt = lvdone; 
```

基本上我们将所有的转换`ints`为一个字符串，它将第二个数字附加到第一个数字的末尾，然后我们将它转​​换回一个`int`.

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:24:41.097

你想添加或连接你的 int 吗？

如果你想连接，你可以尝试：

```
long lvdone = long.Parse(lvfirst.toString() + lvsecond); 
```

如果要添加它们并避免溢出：

```
long lvdone = ((long) lvfist) + lvsecond 
```

如果您的数字必须任意长，请尝试使用 Decimal 而不是 long

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-07T12:45:02.577

忽略随机的东西......这是连接数字的方法......

```
int a = 124;
int b = 101040507;

int digits = 32;
mask = 0x80000000;
while(a & mask == 0)
{
    digits--;
    mask= mask >> 1;
}

long result = b;
result = result << digits;
result = result | b; 
```

# sql-server - SQL Server：单独的查询在不到一秒的时间内返回，但将这些查询与 INTERSECT 组合需要 3 分钟

> ID：11374931
> 
> 赞同：0
> 
> 时间：2012-07-07T12:18:56.893
> 
> 标签：sql-server, full-text-search, intersect

我不确定这是 SQL Server 错误还是我的错误，但情况如下：

**查询 1**

```
select PK FROM PI_INFORM  WHERE RECORD_DATE>DATEADD(hour,-48, GETDATE()) 
```

这需要不到 0.5 秒并返回 20,000 条记录

**查询 2**

```
SELECT PK FROM dbo.getInformFullTextPKs('"HELLO"') 
```

这需要不到 1 秒的时间并返回 500 条记录

**问题** 如果我们用 INTERSECT 连接这两个查询，需要 3 分钟以上。执行计划显示一切都是使用 INDEX SEEK 执行的。

```
SELECT * FROM PI_INFORM WITH (NOLOCK)
WHERE PK IN (

select PK FROM PI_INFORM  WHERE RECORD_DATE>DATEADD(hour,-48, GETDATE())

INTERSECT

SELECT PK FROM PI_INFORM WHERE PK IN (SELECT PK FROM dbo.getInformFullTextPKs('"HELLO"'))
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:16:49.470

以下查询是等效的，应该运行得更快

```
SELECT * FROM PI_INFORM WITH (NOLOCK)
WHERE 
PK IN (SELECT PK FROM dbo.getInformFullTextPKs('"HELLO"')) AND 
 RECORD_DATE>DATEADD(hour,-48, GETDATE()) 
```

# java - 共享属性时的抽象类与接口

> ID：11374935
> 
> 赞同：0
> 
> 时间：2012-07-07T12:19:22.587
> 
> 标签：java, oop, inheritance, interface

我有一些在子类型层次结构中具有相同“级别”的类。我需要为每个实例创建一个 ID，我通常通过拥有一个包含静态 long 的父类来做到这一点，我只是为子类的每个实例递增它。

75% 的子类型代码是相同的——这让我更喜欢使用抽象类（通过接口）：

1) 我可以为 ID 创建者声明一个静态变量

2）我可以将代码放在父类中并在子类型中共享

这个对吗？我似乎很少使用接口。当子类型需要相同的方法但不同的实现时，以及当我不需要初始化要在子类型之间共享的属性（如 ID 创建者）时，我是否应该只使用接口？

同事们一直给我的印象是接口比继承更受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T12:25:10.350

如果您有不止一组需要生成 ID 的类，那么我不建议使用继承，因为它会限制重用。在那种情况下，为什么不构建一个单独的抽象来提供唯一 ID 生成服务呢？你会给它一个密钥，它会给你一个在所有使用相同密钥的调用中唯一的 ID。

```
public class IdGenerator 
{
  private IdGenerator() {} // no instantiation or subclassing
  private static final ConcurrentMap<String, AtomicLong> ids =
    new ConcurrentHashMap<String, AtomicLong>();

  public static long id(String key) {
    AtomicLong al = ids.get(key);
    if (al == null) {
      final AtomicLong newL = new AtomicLong(0);
      al = ids.putIfAbsent(key, newL);
      if (al == null) al = newL;
    }
    return al.getAndIncrement();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T12:33:59.087

[接口和抽象类](http://www.javaworld.com/javaqa/2001-04/03-qa-0420-abstract.html) **有不同的用途**。接口通常用于指定接口的用户看到如何使用它的**契约，而抽象类可能是接口的****部分实现**。

谈到你的属性共享问题，接口中声明的变量是**静态的，更重要的是最终**的，因为你需要一个你希望它递增的 ID，拥有该 ID 将不起作用，所以你现在拥有的和工作是公平的做法。

# twitter - 如何在 iPhone 应用中转发推文？

> ID：11374937
> 
> 赞同：0
> 
> 时间：2012-07-07T12:19:27.207
> 
> 标签：twitter

你好，我正在使用 twitter api 获取任何用户的 feed/tweets 现在我想转发一条推文，所以请帮助我，我如何以与 twitter 官方转发相同的方式转发它。我还没有使用 MGTwitterEngine 如何将它集成到我的应用程序中或告诉我其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:05:03.573

使用`ReTweet Intent` [https://dev.twitter.com/docs/intents#retweet-intent](https://dev.twitter.com/docs/intents#retweet-intent)

示例：[https ://twitter.com/intent/retweet?tweet_id=221635702067167232](https://twitter.com/intent/retweet?tweet_id=221635702067167232)

# javascript - 用于创建动态内容的变量的值

> ID：11374963
> 
> 赞同：1
> 
> 时间：2012-07-07T12:23:00.127
> 
> 标签：javascript, jquery, jquery-plugins

我不确定这是否可能。但我正在寻找一个动态评估变量值并将其粘贴到变量本身的位置的函数。

设想：

```
resources: resourcesSource, 
```

我的插件声明之一中有上述行。变量**resourcesSource**包含所需的 JSON 字符串。现在我想要的是这样的：

```
resources: evaluate(resourcesSource), 
```

在此之后，javascript应将其视为：

```
resources: [{'name': 'Adil Malik','id': '217_resid'},{'name': 'Adam Jones','id': '433_resid'},{'name': 'help team','id': '2056_resid'},] 
```

而不是像这样将变量放在那里：

```
resources: resourcesSource, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:28:15.703

您可以使用内置的 jQuery`$.parseJSON()`函数来执行此操作。虽然 if`resourcesSource`已经是一个 JSON 对象，但没有必要，因为它可以通过`resources`.

```
resources: $.parseJSON(resourcesSource),
... 
```

* * *

参考 - [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

> **描述：**
> 采用格式良好的 JSON 字符串并返回结果 JavaScript 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:21:03.777

如果要将 JSON 对象转换回字符串变量，则必须使用外部插件/函数为您执行此操作。

你可以看看这个版本 - [jQuery.stringify() 实用程序](https://gist.github.com/754454/)

使用它，您可以轻松地将 JSON 对象恢复为其字符串表示形式。

还有一点需要注意的是，您在对象中的最后一个元素之后有一个尾随逗号。

```
[
 {'name': 'Adil Malik','id': '217_resid'},  
 {'name': 'Adam Jones','id': '433_resid'},  
 {'name': 'help team','id': '2056_resid'}
] 
```

请注意删除了第三个元素之后的尾随逗号。

运行该`jQuery.stringify(a);`函数将返回该对象的字符串表示形式 -

> "[{"name":"Adil Malik","id":"217_resid"},{"name":"Adam Jones","id":"433_resid"},{"name":"帮助团队", "id":"2056_resid"}]"

# php - 让 $facebook->api 更快地加载并发布到相册以更快地上传？

> ID：11374965
> 
> 赞同：-1
> 
> 时间：2012-07-07T12:23:17.637
> 
> 标签：php, facebook, facebook-graph-api

我有以下代码。每次我加载此页面时，如果没有 user_id 信息，则需要 3-5 秒。我可以减少时间以使其加载更快吗？

```
$user_id = $facebook->getUser();
if ($user_id) {
echo "have user";
try {
    $user_profile = $facebook->api('/me','GET');
} catch (FacebookApiException $e) {
    error_log($e);
    $user_id = null;
}
$_SESSION['facebook']= $_SESSION;
$_SESSION['user_profile'] = $user_profile;
} else {
    echo "no user";
    $loginUrl   = $facebook->getLoginUrl(
    array(
      'scope'         => 'publish_stream, user_likes'
    )
    );
    echo "<script type='text/javascript'>top.location.href = '$loginUrl'; </script>";
} 
```

我还有以下代码可以将图像发布到用户相册。在它回显“成功”之前大约需要 4-8 秒。有什么办法让它更快？

```
//Session start
$user_profile = $_SESSION['user_profile'];
$user_id = $user_profile['id'];

// Do the wall post.
$msg_new = "hello";
$link = "XXXXYYYY";
$facebook->setFileUploadSupport(true);
$imgURL = "user_img/".$user_id.".jpg";
$args = array('message' => $msg_new.$link);
$args['image'] = '@' . realpath($imgURL);

$facebook->api('/me/photos', 'post', $args);
$result = "success";
echo $result; 
```

仅供参考：我正在本地主机上测试这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:38:49.377

> 仅供参考：我正在本地主机上测试这个。

然后请求可能由于（相对）较慢的互联网连接而延迟，通过与您的机器同时处理的其他请求（音乐流，p2p，...）等竞争。

我不会担心，一旦你把它放在一个“真正的”网络服务器上，看看它的行为，这可能比你的家用机器有更好的连接。如果那里仍然很慢，*那么*是时候进一步调查此事了。

# ios - iPhone 应用因 iCloud 数据存储指南而被拒绝

> ID：11374969
> 
> 赞同：18
> 
> 时间：2012-07-07T12:24:17.493
> 
> 标签：ios, iphone, app-store

由于涉嫌违反 iCloud 数据存储指南，我最近拒绝了对我的一个应用程序的重要错误修复更新。

这是我的应用程序存储数据的方式（自从我的应用程序的第一个版本于 2009 年获得批准以来一直没有问题）：

1.  启动时，它会将“starter”SQLite3 数据库从应用程序包复制到 Documents 文件夹。
2.  该数据库包含基本架构和一些示例数据，因此用户可以了解如何使用该应用程序。它很小 - 不到 3MB。
3.  用户未来的工作只保存在这个数据库文件中。他们可能会删除或保留样本，他们可能会添加大量自己的数据，但该数据库文件将始终存在。

今年早些时候的一次更新因为同样的原因被拒绝了，但是当我给他们上面的解释时，应用程序状态从“拒绝”变成了“审查中”，变成了“正在处理 App Store”。他们没有给我任何解释，所以我认为这只是审稿人的误解。

这一次，审阅者对我的解释做出了简单的回应，即非用户生成的数据不应存储在 iCloud 中，我的更新仍处于“拒绝”状态。

但我不明白我应该在这里做什么。因为所有用户的工作都保存在数据库中，所以我不能将其从 iCloud 备份中排除或将其存储在缓存文件夹中。此外，我无法真正将“用户生成”数据与“非用户生成”数据完全分开，因为该应用程序使用同一个数据库文件。尽管数据库的文件名和目录位置将保持不变，但初始的、非用户生成的数据将很快被用户自己的数据替换。

即使数据库中没有样本数据，任何由数据库支持的应用程序在启动时仍然必须生成一个空数据库——即使它唯一拥有的是应用程序的数据库模式。

这一定是一个非常普遍的问题，但不幸的是，我不能只关闭备份——用户在他们存储在我的应用程序中的数据上投入了大量工作，而 iCloud 备份对他们来说非常重要。

在这一点上我有什么选择？这是我能看到的：

1.  再次联系 Apple 并尝试解释发生了什么。

2.  我可以将文件的备份属性设置为 NO，然后仅在用户进行第一次更改时将其切换为 YES 吗？这在技术上可以吗，对苹果来说还可以吗？

3.  从数据库中删除我的示例数据。这对可用性真的很不利，并且会增加我的支持负担，但如果它能让我的更新获得批准，我愿意这样做。但是，我仍然需要在启动时创建一个存根数据库来保存空的数据库模式，所以我不确定这是否会对审批过程产生影响。

4.  哭。

有人有什么建议吗？我不得不想象有很多其他应用程序使用数据库的方式与我的方式相同，但没有仅禁用备份的选项。

同样令人沮丧的是，我所做的任何更改都需要另一轮测试和应用程序审查，这将使我的关键更新延迟 2 到 3 周。：/

**更新**：可能还有另一种选择：我可以简单地将文件保存在`Library/`而不是`Documents/`，因为他们的问题似乎与使用 Documents 文件夹有关吗？如果文件存储在 中，是否会备份文件`Library/`？

**更新2**：我发现最令人困惑的是任何数据库支持的应用程序（即使它使用Core Data，我假设）都必须创建一个至少包含应用程序架构的数据库文件。问题只是我的数据库太大了吗？因为我看不到任何数据库支持的应用程序如何避免在启动时创建数据库。

**更新 3**：我使用的是自定义 SQLite 交互层——不是核心数据。此外，示例数据包含初始图像，用户在开始使用应用程序时可能最终会删除这些图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:11:07.710

3MB 看起来像是存储在数据库中的大量样本数据。如果您提取图像并将对图像的引用存储在数据库中，那么您应该能够大大降低这种使用量。然后，您可以将数据库的图像获取器代码更改为以下内容：

```
- (UIImage *)image
{
    NSString *imageName = self.imageName;
    UIImage *image = [UIImage imageNamed:imageName];
    if (!image)
    {
        NSString *imageLibraryPath = ...;
        image = [UIImage imageWithPath:[imageLibraryPath stringByAddingPathComponent:imageName]];
    }
    return image;
}

- (void)setImage:(UIImage *)image
{
    [self setImageData:UIImagePNGRepresentation(image)];
}

- (void)setImageData:(NSData *)imageData
{
    NSString *imageLibraryPath = ...;
    NSString *fileName = self.uniqueId; //or something else, UUID maybe?
    NSString *filePath = [imageLibraryPath stringByAddingPathComponent:imageName];
    [imageData writeToFile:filePath atomically:YES]; // maybe dispatch_async this into the background?
    self.fileName = fileName;
} 
```

`self.fileName`将由您的数据库支持。

通过以这种方式减少数据存储，您应该能够获得批准，因为您不会在手机上存储相对大量的数据。图像也可以通过这种方式放在应用程序包中，根本不需要复制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T11:11:59.073

我有一个非常愚蠢的想法。但也许它是有效的。

您可以在启动时显示一个弹出窗口，询问“您希望我创建一些演示数据”。当用户点击“是”时，其用户生成数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T12:32:14.187

一种解决方法是从包中读取 SQL 文件，直到用户尝试编辑某些内容。然后复制过来。由于文件很小，它甚至不需要微调器。

我最近在一个应用程序上遇到了这个确切的问题。在我们的例子中，我们使用核心数据并在启动时复制 SQL 文件。

不幸的是，您必须针对 iOS 5。

[https://developer.apple.com/library/ios/qa/qa1719/_index.html](https://developer.apple.com/library/ios/qa/qa1719/_index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:30:45.187

### 使用您的“私有”SQL 数据访问层

由于您使用的不是Core Data，而是自定义访问层，我只能建议不要将“初始种子”数据库放在iCloud文件夹中，而是编写一个在运行时生成它的自定义过程（例如，当您第一次启动应用程序）。

最好的方法应该是将您的真实 SQL 文件放在通用应用程序包中，在 iCloud 共享文件夹之外。通过您的程序，您必须读取此文件的所有内容并在共享文件夹中重新创建一个克隆，以便此新文件将显示为用户生成的内容而不是捆绑内容。这将需要一些*无用*的开销，但我认为需要避免 Apple 拒绝您的应用程序。

如果可能的话，我建议您不要备份所有图像并将它们留在主包中，因为它们已经存在于每个下载的应用程序中，然后会无用地占用 iCloud 上的宝贵空间。尝试仅将绝对必要的内容放入 iCloud。

### 如果您计划同时使用 Core Data 和 iCloud。

首先，在 iCloud 中放置自定义 SQLite3 数据库文件是危险的，原因有两个，首先是如果您的应用程序同时在不同设备上使用，您将永远无法适当地处理不同数据之间的合并问题。

我不能在这里给你一个完整的解决方案，因为它需要太多的时间和空间。但我建议你看看今年 Apple WWDC 的 Session 227 演讲。他们谈到一起使用 Core Data 和 iCloud，还解决了您现在面临的相同问题（即通过 iCloud 进行初始数据库播种和同步）。如果您通过 Apple Developer 门户访问 WWDC 页面，您将能够获得示例项目的完整副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T20:41:04.107

只需添加以下属性，Apple 会让你通过（如果你不使用

```
 #include <sys/xattr.h>
    ...
    - (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
    {
    int result = -1;
    @try {
            const char* filePath = [[URL path] fileSystemRepresentation];
            const char* attrName = "com.apple.MobileBackup";
            u_int8_t attrValue = 1;
            result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    } @catch (NSException * e) {
            DebugLog(@"Exception: %@", e);
    }
    return result == 0;
    }

    - (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    ... 
    NSURL *storeUrl = [NSURL fileURLWithPath:storePath];
    [self addSkipBackupAttributeToItemAtURL:storeUrl];
    ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T13:37:20.310

CoreData 和两个持久存储应该是要走的路。但是对你来说，在第一次复制文件时设置 com.apple.MobileBackup 文件属性。在用户进行第一次修改后取消设置

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T15:46:27.033

作为最终解决方案，我建议使用 CoreData，将您的罐装数据作为额外的只读持久存储。

但是，与此同时，您需要一个简单、快速的解决方案。创建一个简单的屏幕，将样本数据加载到用户的数据库中。在“系统”或“工具”屏幕中放置一个链接，以便随时完成。

但是，具体来说，在应用程序首次运行时将其启动。您是在询问用户是否需要在文档中包含样本数据以及数据的大小，因此他们是创建文档的人。还提到可以随时删除或替换样本数据。

这应该会让你通过审查。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-09T14:40:37.347

如果您使用的是 Core Data，您可以将示例数据保存在应用程序包中。在与 docs 目录中的读/写存储相同的协调器上将其作为只读持久存储打开，Core Data 将确保保存时内容保持在正确的位置。这在 WWDC 2012 的“使用核心数据的最佳实践”视频中进行了解释。

如果您直接使用 SQLite，这并不容易，但您可以实现自己的逻辑来做同样的事情。

# android - 如何减小代码中的微调器字体大小？

> ID：11374975
> 
> 赞同：0
> 
> 时间：2012-07-07T12:25:00.120
> 
> 标签：android

实际上我需要通过代码减小微调器的字体大小，下面是我的代码：

```
 Spinner spiner2 = (Spinner) findViewById(R.id.Spinner2); 
  List<String> list = new ArrayList<String>();
  list.add("list 1"); 
  list.add("list 2");
  list.add("list 3"); 
  ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.trytry,list); 
  dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
  spiner2.setAdapter(dataAdapter); 
```

我创建了一个名为 trytry.xml 的 xml 文件，以便在 ArrayAdapter 中提及，但在 SetContentView 中我提到了 setContentView(R.layout.main); 我很困惑怎么做

我的trytry xml包含：

```
 <?xml version="1.0" encoding="utf-8"?>
 <Spinner xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >
<TextView 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:text="@+id/TextView01"    
    android:layout_width="wrap_content"   
    android:layout_height="wrap_content" 
    android:textSize="18dp"> 
</TextView> 
 </Spinner> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:31:18.563

用于`sp`测试尺寸`android:textSize="18sp"`

使用此代码

```
public class AndroidCustomSpinner extends Activity {

   String[] DayOfWeek = {"Sunday", "Monday", "Tuesday",
               "Wednesday", "Thursday", "Friday", "Saturday"};

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      Spinner mySpinner = (Spinner)findViewById(R.id.spinner);
      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                           R.layout.row, R.id.weekofday, DayOfWeek);
      mySpinner.setAdapter(adapter);
   }
} 
```

row.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

   <TextView
      android:id="@+id/weekofday"
      android:layout_width="wrap_content"
      android:textSize="18sp
      android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:40:11.897

几个问题正在发生。

首先，当你创建自己的布局时，它不应该以`android`. 这是为框架附带的布局保留的。对于您自己的布局，它应该是`R.id.trytry`.

其次，您需要将布局设置为关闭状态（在对适配器的初始调用中）和下拉资源，如果您希望它在打开时看起来相同。

它应该看起来像这样：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);              //  Set the layout for the whole screen
                // Other code here
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,R.layout.trytry,list);   
    dataAdapter.setDropDownViewResource(R.layout.trytry); 
} 
```

此外，您不能在微调器定义中添加视图。这给你错误。

微调器标记应该在您的 main.xml 中，如下所示：

```
<Spinner 
   android:layout_width="fill_parent"  
   android:layout_height="fill_parent" /> 
```

然后你的 trytry.xml 应该是这样的：

```
<TextView    
    xmlns:android="http://schemas.android.com/apk/res/android"    
    android:text="@+id/TextView01"       
    android:layout_width="wrap_content"      
    android:layout_height="wrap_content"    
    android:textSize="18dp"/> 
```

# wcf - WCF 流改变位置

> ID：11374976
> 
> 赞同：1
> 
> 时间：2012-07-07T12:25:08.397
> 
> 标签：wcf, streaming

我的客户端从另一个客户端获取流，但我的客户端只需要从该流的中间读取。

在 WCF 中，我得到的流无法转换为`FileStream`即使其他客户端在开始时创建了该流，就像`FileStream`他将流提供给我的客户端之前一样。

这就是为什么我的客户不能这样做：

```
Stream1.Read(Buffer, Middle_Of_Stream, Buffer.Length) 
```

**任何解决方案将不胜感激！**

*流媒体模式=流媒体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:00:12.297

您在客户端获得的流无法转换为文件流，因为它可能绑定到用于传输的*网络流。*服务器中的A`FileStream`不能（并且不应该，由于许多原因，安全性通常是其中之一）被客户端访问，因此 WCF 所做的是从文件流中读取，并将字节复制到网络流中。在客户端上，您会获得一个只读（且不可搜索）的流。

如果您想在客户端将其转换为文件流，您可以创建一个新文件（可能在 temp 目录上），然后将您在代理调用时获得的流保存到它。

# javascript - 如何使用 jquery.load 来检索 html/ 的一部分或完整的 html？

> ID：11374984
> 
> 赞同：0
> 
> 时间：2012-07-07T12:25:39.727
> 
> 标签：javascript, jquery, ajax, jquery-load

我正在尝试使用 jquery 的加载功能加载整个/部分 html。我知道这也可以使用 $.ajax() 来完成，但我想学习如何使用 jquery 的不同功能。

这是我当前的代码：

```
<ul>
    <li><a id="home" href="#">Home</a></li>
    <li><a id="contact" href="#">Contact</a></li>
    <li><a id="gallery" href="#">Gallery</a></li>
</ul>

<div id="result">

</div>

<script>
$(document).ready(function(e) {
    $("#gallery").click(function(e){
        $('#result').load('gallery.html');
        e.preventDefault();
    });
 });
</script> 
```

目前它不起作用，我也得到了这个 ![在此处输入图像描述](../Images/4f81a959be646b0763951b37d161aae4.png)

XMLHttpRequest 无法加载 file:///C:/Users/randel/Desktop/cis/gallery.html。Access-Control-Allow-Origin 不允许 Origin null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:28:24.743

jQuery 无法从您的文件系统中检索文件。您必须将您的项目移动到 Web 服务器或本地开发服务器，如 XAMPP 或类似服务器

除此之外，您的代码应该可以工作。只要记住把`e.preventDefault()`一切放在首位：

```
$("#gallery").click(function(e){
    e.preventDefault();
    $('#result').load('gallery.html');
}); 
```

# android - Android：新信息替换通知中的旧信息

> ID：11374986
> 
> 赞同：2
> 
> 时间：2012-07-07T12:26:00.680
> 
> 标签：android, notifications, notificationmanager

来自[Android](http://developer.android.com/reference/android/app/NotificationManager.html#notify%28java.lang.String,%20int,%20android.app.Notification%29)中的文档`NotificationManager`：

public void notify (int id, Notification notification) 发布要在状态栏中显示的通知。如果您的应用程序已经发布了具有相同 id 的通知并且尚未取消，它将被更新的信息替换。

```
it will be replaced by the updated information. 
```

我不想替换旧信息，我想要两个通知。注意：每个通知都有自己的 id：

```
notificationManager.notify(0, notification);
notificationManager.notify(1, notification); 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:33:00.797

堆叠通知

如果您的应用在另一个相同类型的通知仍处于挂起状态时创建了通知，请避免创建全新的通知对象。相反，堆叠通知。

堆叠的通知构建了一个摘要描述，并允许用户了解有多少特定类型的通知处于待处理状态。

[http://developer.android.com/design/patterns/notifications.html](http://developer.android.com/design/patterns/notifications.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:36:37.590

公共无效通知（字符串标签，int id，通知通知）

自：API 级别 5 发布要在状态栏中显示的通知。如果您的应用程序已经发布了具有相同标签和 id 的通知并且尚未取消，它将被更新的信息替换。

参数 tag 此通知的字符串标识符。可能为空。id 此通知的标识符。对 (tag, id) 在您的应用程序中必须是唯一的。notification 一个 Notification 对象，描述向用户显示什么。不得为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T06:22:04.463

试试这个：

```
private void notifyMe(String message) {
        NotificationManager nManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        NotificationCompat.Builder ncomp = new NotificationCompat.Builder(this);
        ncomp.setContentTitle(getResources().getString(R.string.notification_title));
        ncomp.setContentText(message);
        ncomp.setTicker(getResources().getString(R.string.notification_ticker));
        ncomp.setSmallIcon(R.drawable.ic_launcher);
        ncomp.setAutoCancel(true);      
        //nManager.notify((int) System.currentTimeMillis(), ncomp.build());
        nManager.notify(int(System.currentTimemillisec
), ncomp.build());
    } 
```

# c# - 升级到 v3.0.0 后出现 Castle ComponentRegistration 错误

> ID：11374987
> 
> 赞同：1
> 
> 时间：2012-07-07T12:26:15.220
> 
> 标签：c#, generics, castle

我继承了一个使用 Castle Windsor IoC 容器的代码库，由于另一个兼容性问题，我们最近被迫从 3.0.0 升级 v2.5.2 版本。

升级到 v3.0.0 后，我们的一个测试类中的以下扩展方法无法构建，并出现以下错误：

类型“TInterface”必须是引用类型，才能将其用作泛型类型或方法“Castle.MicroKernel.Registration.ComponentRegistration”中的参数“TService”

```
public static class ContainerExtensions
{
    /// <summary>
    /// Sets the registration expectation on the mocked container.
    /// </summary>
    /// <typeparam name="TInterface">The type of the interface.</typeparam>
    /// <typeparam name="TImplementation">The type of the implementation.</typeparam>
    /// <param name="container">The container.</param>
    public static void SetRegistrationExpectation<TInterface, TImplementation>(this IWindsorContainer container) where TImplementation : TInterface
    {
        Predicate<IEnumerable<IRegistration>> pred = regs =>
        {
            var reg = regs.OfType<ComponentRegistration<TInterface>>().FirstOrDefault();
            return reg != null && reg.Implementation == typeof(TImplementation);
        };

        container
            .Expect(c => c.Register(null))
            .IgnoreArguments()
            .Constraints(Rhino.Mocks.Constraints.Is.Matching(pred))
            .Repeat.Once();
    }
} 
```

所以看起来 ComponentRegistration 不能再使用接口了？查看文档后，我仍然不确定如何纠正？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:38:00.020

尝试为`where TInterface : class`您的方法添加约束：

```
public static void SetRegistrationExpectation<TInterface, TImplementation>(this IWindsorContainer container)
    where TInterface : class
    where TImplementation : TInterface 
```

It seems like `ComponentRegistration` generic constraints changed in 3.0.

# php - 数组分组按键 PHP CodeIgniter

> ID：11374988
> 
> 赞同：-4
> 
> 时间：2012-07-07T12:26:18.423
> 
> 标签：php, mysql, arrays, codeigniter

我的 PHP 代码有以下响应。

```
Array
(
[customer] => 402
[carat] => Array
    (
        [0] => 6
        [1] => 5
    )

[units] => Array
    (
        [0] => grams
        [1] => dwt
        [2] => dwt
    )

[weight] => Array
    (
        [0] => 5
        [1] => 3
        [2] => 6
    )

[our_payout] => Array
    (
        [0] => 15
        [1] => 9
        [2] => 60
    )

[sale_payout] => Array
    (
        [0] => 18
        [1] => 12
        [2] => 180
    )

[hidden_carat] => Array
    (
        [0] => 6
        [1] => 5
        [2] =>
    )

[hidden_unit] => Array
    (
        [0] => 1
        [1] => 2
        [2] => 2
    )

[carat_scale_price] => Array
    (
        [0] =>
        [1] =>
        [2] =>
    )

[sales_id] => Array
    (
        [0] =>
        [1] =>
        [2] =>
    )

[currency_rate_id] => Array
    (
        [0] =>
        [1] =>
        [2] =>
    )

[gold_price_id] => Array
    (
        [0] =>
        [1] =>
        [2] =>
    )

[taget_percentage] =>
[reference] => 0
[notes] =>
[unit] => 0
[customer_id] => 402
[total_items] => 2
[submit] =>
) 
```

我想加入`example [0] => grams`等等`[0] => 5 [0] => 16`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:04:22.320

我和史蒂夫在一起，我不确定你要什么。看起来您想转置该矩阵但仅用于某些键？假设您上面的原始数组位于变量 $arr 中，这可能会满足您的需求：

```
$lineItems = array();
$i = 0;
$allLineItemsHaveI = true;

while($allLineItemsHaveI) {
   $lineItems[$i] = array();
   foreach($arr as $key => $subArr) {
      if(array_key_exists($i, $subArr)) {
         $lineItems[$i][$key] = $subArr[$i];
      } else {
         $allLineItemsHaveI = false;
      }
   } 

   $i++;
}    

array_pop($lineItems); 
```

这是输出：

```
Array
(
    [0] => Array
        (
            [carat] => 6
            [units] => grams
            [weight] => 5
            [our_payout] => 15
            [sale_payout] => 18
            [hidden_carat] => 6
        )

    [1] => Array
        (
            [carat] => 5
            [units] => dwt
            [weight] => 3
            [our_payout] => 9
            [sale_payout] => 12
            [hidden_carat] => 5
        )

) 
```

另外，请查看：[Transposing multidimensional arrays in PHP](https://stackoverflow.com/questions/797251/transposing-multidimensional-arrays-in-php)

# java - Android：等待线程完成执行该方法

> ID：11374989
> 
> 赞同：2
> 
> 时间：2012-07-07T12:26:50.757
> 
> 标签：java, android, multithreading, download, wait

```
ExecutorService exec = Executors.newFixedThreadPool(8);
List<Future<Object>> results = new ArrayList<Future<Object>>();

// submit tasks
for(int i = 0; i < 8; i++) {
    results.add(exec.submit(new ThreadTask()));
}

...

// stop the pool from accepting new tasks
exec.shutdown();

// wait for results
for(Future<Object> result: results) {
    Object obj = result.get();
}

class ThreadTask implements Callable<Object> {

    public Object call() {
        // execute download
        ...
        return result;
    }
} 
```

上面的代码没有显示我预期的结果。更详细地说，我正在为 android 做一个下载管理器。这些线程用于分段下载文件。由于每个片段可能需要不同的下载时间，我认为这就是问题所在。

然后我尝试在方法中只使用一个简单的数字返回。然后线程开始给出预期的结果。

因此，作为一种解决方案，我想到了一种方法来等待所有线程完成执行。在上面的代码中，我如何等待所有线程完成它们的工作？我想我必须使用该`wait()`方法，但我不知道该怎么做。希望您能帮助解决这个问题。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T10:40:47.167

如果您需要一组线程在某个时候相遇 - 尝试使用“障碍”模式。

Java SE 有它的实现：java.util.concurrent.CyclicBarrier

来自 docs ：一种同步辅助工具，它允许一组线程相互等待以达到共同的障碍点。CyclicBarriers 在涉及固定大小的线程组的程序中很有用，这些线程组必须偶尔相互等待。屏障被称为循环的，因为它可以在等待线程被释放后重新使用。

CyclicBarrier 支持一个可选的 Runnable 命令，该命令在每个屏障点运行一次，在队伍中的最后一个线程到达之后，但在任何线程被释放之前。此屏障操作对于在任何一方继续之前更新共享状态很有用。

[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)

# jquery - 如何从ajax返回值

> ID：11374990
> 
> 赞同：0
> 
> 时间：2012-07-07T12:27:05.763
> 
> 标签：jquery, ajax

我已经使用jquery ajax从服务器获取值。当方法进入ajax成功或错误时，我需要返回值。如何做到这一点。请指导我。

```
$.ajax({
    cache: false,
    async: true,
    type: "GET",
    timeout:6000,
    dataType: "json",
    url:url +"log",
    data: { ContactEmail : $("#username").val()},
    contentType: "application/json;charset=utf-8",
    success: function (result) 
    {
        //Here I need to return the result and should get in another method
    },
    Error: function (e)
    {
        //Here I need to return the result and should get in another method
    }
}); 
```

**更新**

**例如** ，当我调用**checkNetConnection()**时，它**返回**值。我需要这样

```
function checkNetConnection() 
{
        var netresult=0;
        var networkState = navigator.network.connection.type;
        var states = {};
        states[Connection.UNKNOWN]  = 'Unknown connection';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI]     = 'WiFi connection';
        states[Connection.CELL_2G]  = 'Cell 2G connection';
        states[Connection.CELL_3G]  = 'Cell 3G connection';
        states[Connection.CELL_4G]  = 'Cell 4G connection';
        states[Connection.NONE]     = 'No network connection';
        if(states[networkState]=='Ethernet connection'||states[networkState]=='WiFi connection' || states[networkState]=='Cell 2G connection' || states[networkState]=='Cell 3G connection' || states[networkState]=='Cell 4G connection')
        {
            netresult=1;
        }
        else
        {
            netresult=0;
        }
        return netresult;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T12:30:47.037

您的代码有几个问题。您已指定`contentType: "application/json;charset=utf-8"`但未发送 JSON 请求。如果要发送 JSON 请求`JSON.stringify`，请对数据使用以下方法：

```
data: JSON.stringify({ ContactEmail : $("#username").val() }), 
```

如果不是，就去掉这个contentType，否则对服务端来说是模棱两可的。您的代码的另一个问题是错误回调被调用`error`，而不是`Error`。就获取结果而言，在成功回调中，它们将直接作为参数传递：

```
success: function (result) {
    // Here I need to return the result and should get in another method
    anotherMethod(result);
}, 
```

还应该注意的是，如果您的 Web 服务器设置了正确的内容类型响应标头，则传递给成功方法的参数将由 jQuery 自动解析为基础类型。因此，例如，如果您的服务器设置`Content-Type: application/json`并写入`{"foo":"bar"}`响应正文，您可以直接操作此对象：`alert(result.foo);`在此回调中，无需额外解析。如果您的 Web 服务器脚本写得不好并且没有设置正确的内容类型标头，例如它设置`Content-Type: 'text/html'`JSON 格式的字符串并将其写入响应正文，您可以使用`dataType: 'json'`参数强制 jQuery 解析为 JSON。但通常情况下，如果一切都正确，则不需要这样做。

现在，`error`回调不同了。它`xhr`作为参数传递对象，因此这次您必须将结果提取为字符串：

```
error: function(xhr) {
    anotherMethod(xhr.getResponseText());    
} 
```

如果这个字符串代表 JSON，你可以解析它：

```
error: function(xhr) {
    var result = $.parseJSON(xhr.getResponseText());
    anotherMethod(result);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:29:03.207

您的结果存储在变量`result`和`e`：

```
...
success: function (result) 
    {
        // result contains the results
        foo( results );
    },
    Error: function (e)
    {
        // e contains the error
        bar( e );
    }
...

// Function to do something with the returned results
function foo( someData ) {
  // do stuff
}

// Function to do something with the error
function bar( someErrorData ) {
  // do stuff
} 
```

查看数据的一种快速方法是使用 alert:`alert( results )`或`alert( e )`代替函数调用来显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:29:54.187

在成功方法`result`中是一个 json 对象，其中包含您从服务器发送的数据。

用于`console.log(result)`查看数据。

```
 success: function (result) 
            {
              console.log(result);
            },
            Error: function (e)
            {
            //Here I need to return the result and should get in another method
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T12:30:55.250

```
 success: function (result) 
            {

              alert(result.someobject); //someobject is returned by your JSON
            }, 
```

# android - Google 在现有 Android 应用程序中映射活动视图

> ID：11374992
> 
> 赞同：0
> 
> 时间：2012-07-07T12:27:12.210
> 
> 标签：android, eclipse, maps, implementation

我正处于 Eclipse 中 android 应用程序编程的初级阶段。我制作了一个带有主菜单的简单应用程序。

主菜单中的选项之一应该是“谷歌地图”视图。怎么可能呢？我必须从新项目和新模拟器开始，还是有办法在这个阶段实现地图？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T09:10:54.830

请参阅[本`MapView`教程](https://developers.google.com/maps/documentation/android/hello-mapview)。

我假设你现在在你的应用程序中有一个`Activity`类，你可以在你的项目中添加另一个类来实现`MapView`in.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T06:25:26.647

不，您不需要创建新项目。您可以在同一个应用程序中拥有任意数量的活动。使用意图，您可以调用这些活动。创建地图活动。按照下面给出的链接中的步骤创建相同的。

[https://www.youtube.com/watch?v=NHXa96-r8TY](https://www.youtube.com/watch?v=NHXa96-r8TY)

一切顺利...

# grails - 通过 URL grails groovy 传递 id

> ID：11374993
> 
> 赞同：1
> 
> 时间：2012-07-07T12:27:37.083
> 
> 标签：grails

我正在编写一个 grails 应用程序，我有`region`,`district`和`streams`. `region`contains `district`，表`region_id`的 a`foreign key`也是如此`district`。在其他仅查询与该关联的行的情况下`region`，我需要能够将 传递`id`给 URL。这是我的`UrlMappings.groovy`：

```
static mappings = {
        "/$controller/$action?/$id?"{
            constraints {
                // apply constraints here
            }
        }

        "/"(controller:"/user")
        "500"(view:'/error')
    } 
```

但是，然后我转到我创建的链接以转发到`district`控制器（默认是`list`我看到： `localhost:8080/project/district/list`，但它没有`region_id`，所以我期待`localhost:8080/project/district/list/region_id='1'?`或`localhost:8080/project/district/list/id='1'?` 有人可以帮我指出我的错误在哪里吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:29:42.503

`/$controller/$action?/$id?`意味着`params`地图将具有`id`来自 url 的值的属性。对于像这张地图这样的 url，`/project/district/list/5`返回 5 ( `assert params.id == 5`)。

您也可以使用以下 url: 调用您的操作，`/project/district/list?region_id=5`并为`params.region_id`.

如果您想使用不同的名称，`region_id`而不是 `id，并且不想将其作为查询参数传递，您可以制作自己的映射：

```
"/district/list/$region_id"(controller:"district", action: "list") 
```

在这种情况下，此 url 严格映射到控制器`district`和操作`list`，`params.region_id`并将返回 5`/project/district/list/5`

# image - WP7/Expression Blend：加载不同的图像

> ID：11374994
> 
> 赞同：0
> 
> 时间：2012-07-07T12:27:40.013
> 
> 标签：image, windows-phone-7, windows-8, expression-blend

我正在尝试制作一个简单的纸牌游戏。我已经在我的项目中加载了所有 10 张卡片，我想要做的是，如果我点击一个按钮，我想“显示”一张特定的卡片。我如何通过良好的编程实践来做到这一点。

我能做的是，制作 10 个 StoryBoard，然后在单击该按钮时加载我喜欢的那些。但这不是一个好习惯。我想要一个方法调用之类的东西，我只是用一个 ID 或它的“文件名”来调用图像文件。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:08:53.607

每次单击特定按钮时，您都可以创建一个 Storyboard 并更改该 Storyboard 的 Target。例如，假设您有牌：2、3、4、5 和 6。

如果您单击显示“2”（2 卡）的按钮，则以下代码将使您的 Storyboard 以该特定控件为目标：

```
Storyboard.SetTargetName(animation, 2Card); 
```

其中animation 是Timeline 对象，2Card 是您要设置动画的控件的名称。

# objective-c - 如何在屏幕上移动精灵？cocos2d

> ID：11374999
> 
> 赞同：0
> 
> 时间：2012-07-07T12:28:09.510
> 
> 标签：objective-c, animation, cocos2d-iphone

我有一个问题，我想制作一个动画，让我的 CCSprite 在屏幕上移动（Repeateforever），但对我来说最重要的是当我的对象穿过屏幕（例如一个球）并且它开始消失我想在屏幕的另一部分看到那部分，有可能吗？

库巴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:47:32.937

使用此代码：

```
CCSprite *sprite = [CCSprite spriteWithFile:@"Actor.png"];
[self addChild:sprite];

CGSize size = [[CCDirector sharedDirector] winSize];
sprite.position = ccp(0, size.height/2.0f);

id move      = [CCMoveTo actionWithDuration:2.0f position:ccp(size.width, size.height/2.0f)];
id moveBack  = [CCMoveTo actionWithDuration:2.0f position:ccp(0, size.height/2.0f)];
id sequence  = [CCSequence actions:move, moveBack, nil];
id repeate   = [CCRepeatForever actionWithAction:sequence];

[sprite runAction:repeate]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:55:42.343

您的意思是小行星式：物体离开屏幕一侧的区域并在正好相反的一侧进入屏幕。可能在两个（或全部四个）屏幕边框上部分显示。

是的，这是可能的，但不能不使用 2 或 4 个精灵。如果您的精灵只能向左/向右或向上/向下离开屏幕，则 2 个精灵就足够了。如果你想要一个完整的环绕屏幕边框类型的世界，你需要有 4 个精灵。

一般的想法是使用精灵的 contentSize 和屏幕大小来测试精灵是否（部分）离开了屏幕。然后在加或减屏幕宽度和/或高度的位置显示其他精灵，使它们看起来好像精灵从一个边框无缝环绕到另一个边框。

角落需要 4 个精灵。想象一下精灵的中心点正好在 0,0，这意味着精灵的右上四分之一被绘制在左下角。如果世界在屏幕边界处环绕，您应该会在左上角、右上角和右下角看到精灵的其他部分。

不，没有任何技巧可以让你只用一个精灵来做到这一点。您需要 2 或 4 个并将它们的位置与“主”精灵同步。

我曾经实现过这个。我将按原样发布更新“sprite doubles”属性的代码，不能保证，它不是复制粘贴解决方案。它确实显示了如何同步精灵的总体思路。双打存储在一个数组中，其中有四个：

```
-(void) updateSpriteDoublesProperties
{
    CCSprite* sprite = (CCSprite*)self.owner.node;

    for (int i = 0; i < kNumOpposingSprites; i++)
    {
        CCSprite* spriteDouble = spriteDoubles_->arr[i];
        spriteDouble.rotation = sprite.rotation;
        spriteDouble.scale = sprite.scale;
        spriteDouble.flipX = sprite.flipX;
        spriteDouble.flipY = sprite.flipY;

        CGPoint pos = self.owner.node.position;
        CGPoint oppositePosition = pos;

        if (i == 0 || i == 1)
        {
            if (pos.x > boundaryCenter_.x)
            {
                oppositePosition.x = pos.x - (boundary_.size.width - boundary_.origin.x);
            }
            else
            {
                oppositePosition.x = pos.x + (boundary_.size.width - boundary_.origin.x);
            }
        }
        if (i == 0 || i == 2)
        {
            if (pos.y > boundaryCenter_.y)
            {
                oppositePosition.y = pos.y - (boundary_.size.height - boundary_.origin.y);
            }
            else
            {
                oppositePosition.y = pos.y + (boundary_.size.height - boundary_.origin.y);
            }
        }

        spriteDouble.position = oppositePosition;
    }
} 
```