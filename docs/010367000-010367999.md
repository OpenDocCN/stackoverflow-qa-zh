# StackOverflow 问答 10367000-10367999

# android - Android：小部件文本适合小部件

> ID：10367000
> 
> 赞同：0
> 
> 时间：2012-04-28T19:50:31.417
> 
> 标签：android, android-widget, textview

我有一个`4*2 widget`which 包含一个`textView`which is `Fill_Parent`。我将 textSize 设置为`30dp`并且在我的`HTC Sensation`.

在 Galaxy mini 上，文本不适合，用户无法阅读文本，因为它只是太多的文本。

那么有什么提示或我可以做些什么来调整`textSize`以使我的文本适合吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:12:46.967

如果它太长，任何简单的修复都可以将[椭圆大小定义为 marquee](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aellipsize)。否则，我建议在运行时获取 TextView 的高度和宽度，如果它低于某个阈值，则将 textSize 设置为较小的值。

# android - Android 标签布局设计 - 最佳方法

> ID：10367002
> 
> 赞同：0
> 
> 时间：2012-04-28T19:50:48.830
> 
> 标签：android, android-layout, tabs

我正在开发一个应用程序，我想在选项卡式布局中放置两个活动。我需要第一个活动发送意图并以编程方式切换到第二个选项卡式活动的能力。这似乎是可能的，并在其他帖子中进行了概述：

[在 Android 的选项卡中启动活动](https://stackoverflow.com/questions/1306689/launching-activities-within-a-tab-in-android)

但是，这种方法似乎不可取，它使用了现在已弃用的 ActivityGroup。谁能推荐一个稳定的解决方案来满足我的设计需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:23:51.777

你可能想看看`ViewPager`支持库，再加上 [https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/library/src/com/viewpagerindicator/TabPageIndicator.java](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/library/src/com/viewpagerindicator/TabPageIndicator.java)

它将产生一个类似标签的界面，您可以在其中滑动。您可以通过调用显式更改正在显示的选项卡`viewPager.setCurrentItem(int)`。

# linux - Linux传入/传出数据包修改模块

> ID：10367007
> 
> 赞同：0
> 
> 时间：2012-04-28T19:51:21.120
> 
> 标签：linux, driver

任何人都可以给我一个链接到手册或linux内核驱动程序示例，它可以修改来自/到指定IP端口的传入/传出数据包？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T04:33:36.160

Kprobes 是您可以做到这一点的一种方式。这是一个使用具有网络功能的 kprobes 的模块：[https ://github.com/PanosSakkos/netlog](https://github.com/PanosSakkos/netlog)

# java - Android - 我如何在 SQL 数据库中搜索信息

> ID：10367010
> 
> 赞同：1
> 
> 时间：2012-04-28T19:51:57.160
> 
> 标签：java, android, sqlite

我想知道如何搜索存储在我的数据库中的特定信息。假设我想搜索存储在 iName 中的信息，我该怎么做？我需要做某种sql查询吗？对于这样一个基本问题，我很抱歉，但我对整个 android 场景都是新手。谢谢你

```
package f.s.l;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class HotOrNot {
public static final String KEY_ROWID ="_id";
public static final String KEY_NAME ="persons_name";
public static final String KEY_HOTNESS ="persons_hotness";

private static final String DATABASE_NAME ="HotOrNotdb";
private static final String DATABASE_TABLE ="peopleTable";
private static final int DATABASE_VERSION =1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

public DbHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            KEY_NAME + " TEXT NOT NULL, " +
            KEY_HOTNESS + " TEXT NOT NULL);"

            );

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
    onCreate(db);

}

}
public HotOrNot(Context c){
ourContext =c;
}
public HotOrNot open() throws SQLException{
ourHelper = new DbHelper(ourContext);
ourDatabase = ourHelper.getWritableDatabase();
return this;
}
public void close(){

ourHelper.close();
}
public long createEntry(String name, String hotness) {
// TODO Auto-generated method stub
ContentValues cv = new ContentValues();
cv.put(KEY_NAME, name);
cv.put(KEY_HOTNESS, hotness);
return ourDatabase.insert(DATABASE_TABLE, null, cv);

}
public String getData() {
// TODO Auto-generated method stub
String [] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_HOTNESS};
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
String result = "";

int iRow = c.getColumnIndex(KEY_ROWID);
int iName = c.getColumnIndex(KEY_NAME);
int iHotness = c.getColumnIndex(KEY_HOTNESS);

for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {

    result = result + c.getString(iRow) + " "+ c.getString(iName) + " " + c.getString(iHotness) + "\n";
}

return result;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T19:57:31.107

您需要编写一个像`getData()`您已经拥有的函数，但传递它的名称......例如：

```
public Cursor getData(String name) {
    ...
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NAME + "=?", new String[] { name }, null, null, null);
    ...
} 
```

# c - 为什么 pow(-infinity, positive non-integer) +infinity？

> ID：10367011
> 
> 赞同：14
> 
> 时间：2012-04-28T19:51:57.263
> 
> 标签：c, math, floating-point, standards, ieee-754

C99 附件 F（IEEE 浮点支持）这样说：

> `pow(−∞, y)`如果 y > 0 而不是奇数，则返回 +∞。

但是，比方说，(−∞) ^(0.5)实际上具有虚值 ±∞i，而不是 +∞。C99 自己的`sqrt(−∞)`返回 NaN 并按预期生成域错误。那么为什么`pow`需要返回+∞？

（大多数其他语言直接使用 C 库，或者在这种情况下像 Python 一样，复制标准要求的行为，因此实际上这不仅仅影响 C99。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T21:09:28.213

# c# - CookieContainer 手动 cookie 覆盖

> ID：10367013
> 
> 赞同：2
> 
> 时间：2012-04-28T19:52:09.060
> 
> 标签：c#, cookiecontainer

您好，我在设置一个 cookie 时遇到了小问题。我正在使用 HttpWebRequest 类来发送我的请求。我需要这个设置cookie的代码：

```
 CookieContainer myContainer = new CookieContainer();
    myContainer.Add(new Uri("address"), new Cookie("cookie", "val1,val2")); 
```

但这会引发错误

> cookie 的 'Value'='val1,val2' 部分无效。

我也尝试过 UrlEncoding cookie，例如：

```
 new Cookie("cookie", HttpUtility.UrlEncode("val1,val2")) 
```

但是cookie变成`Cookie: cookie=val1%2cval2`了被网页拒绝的那个。

我还尝试在值部分周围使用引号：

```
 new Cookie("cookie", "\"val1,val2\"")) 
```

但是这个也被网站拒绝了。

也许有人知道我如何手动将 cookie 值覆盖为我需要的值而不会触发错误？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T19:59:12.597

尝试：

```
new Cookie("cookie", HttpUtility.UrlEncode("val1%2Cval2")) 
```

%2C 就像一个逗号:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:02:07.230

这样做来设置cookie

```
new Cookie("cookie", Server.UrlEncode("val1,val2")) 
```

并用于`Server.UrlDecode`获取原始 cookie 值。

# php - php脚本一次只能作为两个客户端的服务器

> ID：10367015
> 
> 赞同：0
> 
> 时间：2012-04-28T19:52:27.050
> 
> 标签：php

我编写了以下脚本作为测试，它似乎一次只为两个客户端提供服务器：

```
<?php
$time = time();
$timediff = 0;

do
{
    $timediff = time() - $time;
    usleep(1);
}while($timediff <= 1);

echo date('G:i:s', $time)." - ".date('G:i:s', time()); 
?> 
```

LAMP 服务器的结果：

![灯结果](../Images/c9d2f5ca4e4aa993833f07f2c34ad8c6.png)

每个线程似乎同时正确`started`，由`result`（什么 php 回显）和每 2 个新线程确实需要额外的 2 秒（`time`）来完成。

每个脚本似乎需要 2 秒才能完成，然后提供以下 2 秒。这简直太愚蠢了，因为现在我有一台配备 12GB RAM 的四核 3.2 GHz 服务器无缘无故地让人们排队。值得一提的是，根据`htop`（系统监视器），apache2 只使用了两个 CPU 内核。

我在运行 lighttpd 和 php5-fpm 的 debian-squeeze 服务器上再次尝试了该脚本，这是一个完全不同的设置，但它给出了相同的结果。我不确定是编码不好还是其他什么..

我已经尝试过注释掉`usleep()`但得到了完全相同的结果，除了`htop`随后显示所有（两个）内核上的 CPU 使用率为 100% 的事实。使用 usleep`1`显示每个内核的使用率为 15%，使用 usleep 时每个内核的使用率`500`几乎没有达到 6%，这证实了服务器一次应该能够提供多于 2 个的页面。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:00:36.697

你究竟是如何运行这些测试的？如果您的基准测试软件仅同时执行 2 个请求，那么您一次只能获得 2 个请求是有道理的。

您可以尝试*ab*也称为*apache benchmark*。您可以使用参数设置同时请求的数量。

# java - 如何将“下一代”Java 数据对象样式与接口一起使用？

> ID：10367016
> 
> 赞同：0
> 
> 时间：2012-04-28T19:52:52.810
> 
> 标签：java, interface, immutability, field, encapsulation

我正在以以下风格编写我的大部分不可变数据对象，有时将其描述为[“下一代”](http://codemonkeyism.com/generation-java-programming-style/)或“功能性”：

```
public class Point {
   public final int x;
   public final int y;

   public Point(int x, int y) {
      this.x = x;
      this.y = y;
   }
} 
```

我想对接口指定的数据对象使用相同的样式：

```
public interface Point {
   public final int x;
   public final int y;
}

public class MyPoint {
   public MyPoint(int x, int y) {
      this.x = x;
      this.y = y;
   }
}

public class Origin {
   public Origin() {
      this.x = 0;
      this.y = 0;
   }
} 
```

但这在 java 中是不允许的，它在接口代码和实现中都会出错。

我可以将我的代码更改为

```
public interface Point {
   public int x();
   public int y();
}

public class MyPoint {
   private int mx, my;
   pulic MyPoint(int x, int y) {
      mx = x;
      my = y;
   }
   public int x() {return mx;}
   public int y() {return my;}
}

public class Origin {
   public int x() {return 0;}
   public int y() {return 0;}
} 
```

但它是更多的代码，我不认为它在 API 中给人几乎相同的简单感觉。

你能看出我的困境的出路吗？还是您个人使用第三种甚至更简单的样式？

（我对可变/不可变、getterSetter/new-style 或私有/公共字段的讨论并不感兴趣。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:04:53.870

我宁愿改用继承或委托

```
public class Point {
 public final int x;
 public final int y;

 public Point(int x, int y) {
   this.x = x;
   this.y = y;
 }
} 
```

遗产

```
public class MyPoint extends Point {
   public MyPoint (int x, int y) {
     super (x, y);
   }
   ....
}

public class Origin extends Point {
   public Origin () {
     super (0, 0);
   }
} 
```

# mysql - 处理数百万个 MySQL 行

> ID：10367018
> 
> 赞同：0
> 
> 时间：2012-04-28T19:53:04.120
> 
> 标签：mysql

我正在研究一种方法来记录我网站上每个用户的点击时间。

当我试图想办法解决这个问题时，我目前有 600,000 多条记录。

```
CREATE TABLE IF NOT EXISTS `clicktime` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `page` int(11) DEFAULT NULL,
  `user` varchar(20) DEFAULT NULL,
  `time` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=686277 ; 
```

我将不得不每页进行十次这样的搜索。我的博客一次显示十页的片段。

```
SELECT time 
FROM clicktime 
WHERE `page` = '112'
  AND `user` = 'admin' 
ORDER BY `id` ASC LIMIT 1 
```

看起来像是在吸引我的电话是`WHERE page = '112'`

我怎样才能使这项工作更快，每次通话最多需要 3 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T19:59:49.683

尽管这里有很多事情可能会更好（例如，当时是一个 bigint），但短期内对您有帮助的只是在您的`user`字段上添加一个索引。

# python - 比较python中的两个列表并返回匹配值的索引

> ID：10367020
> 
> 赞同：18
> 
> 时间：2012-04-28T19:53:11.507
> 
> 标签：python, list, match, indices

对于两个列表 a 和 b，如何获取两者中出现的值的索引？例如，

```
a = [1, 2, 3, 4, 5]
b = [9, 7, 6, 5, 1, 0]

return_indices_of_a(a, b) 
```

将返回`[0,4]`, 与`(a[0],a[4]) = (1,5)`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-28T19:55:19.727

最好的方法是创建`b`一个`set`，因为您只检查其中的成员身份。

```
>>> a = [1, 2, 3, 4, 5]
>>> b = set([9, 7, 6, 5, 1, 0])
>>> [i for i, item in enumerate(a) if item in b]
[0, 4] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T19:57:09.893

```
def return_indices_of_a(a, b):
  b_set = set(b)
  return [i for i, v in enumerate(a) if v in b_set] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-29T12:03:04.480

对于较大的列表，这可能会有所帮助：

```
for item in a:
index.append(bisect.bisect(b,item))
    idx = np.unique(index).tolist() 
```

一定要导入 numpy.

# mysql - 对一个表求和，其中列与另一个表匹配并连接结果

> ID：10367025
> 
> 赞同：0
> 
> 时间：2012-04-28T19:53:48.520
> 
> 标签：mysql, sql, subquery, sum

我一直在努力解决这个问题，并决定我不会很快解决这个问题！我在这里先向您的帮助表示感谢。喜欢这个地方。

我有 2 张桌子

**日期：**

```
date_id, user_id, cost, title, description 
```

**日期评级：**

```
date_id, user_id, rating 
```

我有多个具有相同`date_id`但不同`user_id`的条目。换句话说，同一日期的多个评级。评级为 1 或 -1。我想将所有评级与相同的评级一起添加`date_id`，然后将其加入我的匹配`DATE`表中。`date_id`这样我在桌子上就有了一个名为 rating 的列`DATE`。这样我就可以按评分排序。听起来很容易，但事实证明并不那么容易。我猜DBA不是我的菜！

编辑：MySQL 客户端版本：mysqlnd 5.0.8-dev - 20102224 - $Revision: 310735 $

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T20:04:46.220

你不能用这样的东西吗？我不是 MySQL 专家，请注意（我更喜欢 SQL Server）：

```
SELECT
     date_id, user_id, cost, title, description,
     (SELECT SUM(rating) FROM date_rating dr WHERE dr.date_id = d.date_id) AS 'Rating'
FROM 
     date d 
```

只是一个相关的子查询来获取它指定的每个日期的评分总和`date_id`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:06:43.020

您可以使用`GROUP BY`：

```
SELECT date.*, SUM(date_rating.rating) AS Rating
FROM date JOIN date_rating USING (date_id)
GROUP BY date_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T20:11:08.693

您必须使用 GROUP BY 来汇总评分。我忽略了您表格中的成本列。还有，user_id 列。这两个表之间似乎只有 date_id 相关。下面的查询是在 SQL Server 2012 中编写和测试的，但我认为 SELECT 语句仍应与 MySQL 一起使用，只需稍作更改。

*脚本*：

```
CREATE TABLE dbo.[date] 
(       
        [date_id]       INT             NOT NULL IDENTITY
    ,   [title]         VARCHAR(100)    NOT NULL
    ,   [description]   VARCHAR(100)    NOT NULL
);

CREATE TABLE dbo.[date_rating]
(       
        [date_id]       INT             NOT NULL
    ,   [user_id]       INT             NOT NULL
    ,   [rating]        INT             NOT NULL
);

INSERT INTO  dbo.[date] ([title], [description]) VALUES
    ('title 1', 'description 1'),
    ('title 2', 'description 2'),
    ('title 3', 'description 3');

INSERT INTO  dbo.[date_rating] ([date_id], [user_id], [rating]) VALUES
    (1, 100, 1),
    (1, 200, -1),
    (2, 200, -1),
    (1, 200, 1),
    (3, 200, 1),
    (1, 200, -1);

SELECT      d.[date_id]
        ,   d.[title]
        ,   d.[description]
        ,   SUM([rating]) AS ratings
FROM        dbo.[date]          d
INNER JOIN  dbo.[date_rating]   dr
ON          d.date_id           = dr.date_id
GROUP BY    d.[date_id]
        ,   d.[title]
        ,   d.[description]; 
```

*输出*：

```
date_id title   description    ratings
------- ------- -------------  -------
1       title 1 description 1    0
2       title 2 description 2   -1
3       title 3 description 3    1 
```

# delphi - 使用 Melander 的 DragDrop 套件时如何允许异常

> ID：10367026
> 
> 赞同：1
> 
> 时间：2012-04-28T19:53:52.230
> 
> 标签：delphi, exception, drag-and-drop

我正在尝试`TDropFileTarget`Melander[`DragDrop`](http://melander.dk/delphi/dragdrop/)套件的组件。目标是在拖放文件后执行某些任务。另外，如果在处理过程中出现问题，我想收到异常。

似乎`OnDrop`事件处理程序中引发的异常被吞没了。但是，即使我将`raise`语句放入组件的源代码中，我仍然无法收到异常。你能帮忙评论一下吗？

### 示例 dfm 文件。

```
 object Form4: TForm4
      Left = 0
      Top = 0
      Caption = 'Form4'
      ClientHeight = 270
      ClientWidth = 392
      Color = clBtnFace
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      OldCreateOrder = False
      PixelsPerInch = 96
      TextHeight = 13
      object edt1: TEdit
        Left = 56
        Top = 72
        Width = 257
        Height = 21
        TabOrder = 0
        Text = 'edt1'
      end
      object dropfiletarget2: TDropFileTarget
        DragTypes = [dtCopy, dtLink]
        OnDrop = dropfiletarget2Drop
        Target = edt1
        OptimizedMove = True
        Left = 56
        Top = 120
      end
    end 
```

### 示例文件。

```
 unit Unit4;

    interface

    uses
      Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
      Dialogs, DragDrop, DropTarget, DragDropFile, StdCtrls;

    type
      TForm4 = class(TForm)
        edt1: TEdit;
        dropfiletarget2: TDropFileTarget;
        procedure dropfiletarget2Drop(Sender: TObject; ShiftState: TShiftState; APoint:
            TPoint; var Effect: Integer);
      private
        { Private declarations }
      public
        { Public declarations }
      end;

    var
      Form4: TForm4;

    implementation

    {$R *.dfm}

    procedure TForm4.dropfiletarget2Drop(Sender: TObject; ShiftState: TShiftState;
        APoint: TPoint; var Effect: Integer);
    begin
      raise Exception.Create('Error Message');
    end;

    end. 
```

### 的原始代码`TCustomDropTarget.Drop`。

```
 function TCustomDropTarget.Drop(const dataObj: IDataObject; grfKeyState: Longint;
      pt: TPoint; var dwEffect: Longint): HResult;
    var
      ShiftState: TShiftState;
      ClientPt: TPoint;
    begin
      FScrollTimer.Enabled := False;

      // Protect resources against exceptions in OnDrop event handler.
      try
        // Refuse drop if we have lost the data object somehow.
        // This can happen if the drop is rejected in one of the other IDropTarget
        // methods (e.g. DragOver).
        if (not Enabled) or (FDataObject = nil) then
        begin
          dwEffect := DROPEFFECT_NONE;
          Result := E_UNEXPECTED;
        end else
        begin

          ShiftState := KeysToShiftStatePlus(grfKeyState);

          // Create a default drop effect based on the shift state and allowed
          // drop effects (or an OnGetDropEffect event if implemented).
          if (FTarget <> nil) then
            ClientPt := FTarget.ScreenToClient(pt)
          else
            ClientPt := pt;
          dwEffect := GetValidDropEffect(ShiftState, ClientPt, dwEffect);

          // Get data from source and generate an OnDrop event unless we failed to
          // get data.
          try
            if (FGetDataOnEnter or GetData(dwEffect)) then
            begin
              if (not AsyncTransfer) then
                DoDrop(ShiftState, ClientPt, dwEffect);
            end else
              dwEffect := DROPEFFECT_NONE;
            Result := S_OK;
          except
            // We must not allow exceptions to escape from any of the COM methods since
            // COM doesn't support exceptions.
            dwEffect := DROPEFFECT_NONE;
            Result := E_UNEXPECTED;
          end;
        end;

        if (DropTargetHelper <> nil) then
          DropTargetHelper.Drop(DataObj, pt, dwEffect)
        else
          if (FDragImageHandle <> 0) and (FTarget <> nil) then
            ImageList_DragLeave(FTarget.Handle);
      finally
        // clean up!
        if (not AsyncTransfer) then
        begin
          ClearData;
          FDataObject := nil;
          FTarget := nil;
        end;
        FDropTargetHelper := nil;
      end;
    end; 
```

### 修改后的代码`TCustomDropTarget.Drop`。

```
 function TCustomDropTarget.Drop(const dataObj: IDataObject; grfKeyState: Longint;
      pt: TPoint; var dwEffect: Longint): HResult;
    var
      ShiftState: TShiftState;
      ClientPt: TPoint;
    begin
      FScrollTimer.Enabled := False;

      try
        // Protect resources against exceptions in OnDrop event handler.
        try
          // Refuse drop if we have lost the data object somehow.
          // This can happen if the drop is rejected in one of the other IDropTarget
          // methods (e.g. DragOver).
          if (not Enabled) or (FDataObject = nil) then
          begin
            dwEffect := DROPEFFECT_NONE;
            Result := E_UNEXPECTED;
          end else
          begin

            ShiftState := KeysToShiftStatePlus(grfKeyState);

            // Create a default drop effect based on the shift state and allowed
            // drop effects (or an OnGetDropEffect event if implemented).
            if (FTarget <> nil) then
              ClientPt := FTarget.ScreenToClient(pt)
            else
              ClientPt := pt;
            dwEffect := GetValidDropEffect(ShiftState, ClientPt, dwEffect);

            // Get data from source and generate an OnDrop event unless we failed to
            // get data.
            try
              if (FGetDataOnEnter or GetData(dwEffect)) then
              begin
                if (not AsyncTransfer) then
                  DoDrop(ShiftState, ClientPt, dwEffect);
              end else
                dwEffect := DROPEFFECT_NONE;
              Result := S_OK;
            except
              // We must not allow exceptions to escape from any of the COM methods since
              // COM doesn't support exceptions.
              dwEffect := DROPEFFECT_NONE;
              Result := E_UNEXPECTED;
              raise; // <--- Why can't I get the exception
            end;
          end;

          if (DropTargetHelper <> nil) then
            DropTargetHelper.Drop(DataObj, pt, dwEffect)
          else
            if (FDragImageHandle <> 0) and (FTarget <> nil) then
              ImageList_DragLeave(FTarget.Handle);
        finally
          // clean up!
          if (not AsyncTransfer) then
          begin
            ClearData;
            FDataObject := nil;
            FTarget := nil;
          end;
          FDropTargetHelper := nil;
        end;
      except
        raise; // <--- Why can't I get the exception
      end;
    end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T03:14:38.587

您不能`Drop()`在应用程序代码中引发异常并捕获它。安德的原始评论很清楚：

```
// We must not allow exceptions to escape from any of the COM methods since
// COM doesn't support exceptions. 
```

`Drop()`is`TCustomDropTarget`的`IDropTarget.Drop()`接口方法的实现。`IDropTarget`方法在函数内部调用，该`DoDragDrop()`函数由启动拖动的应用程序调用。 `Drop()`在您的应用程序的进程中运行，但它不被您的应用程序调用。因此，即使引发异常是安全的（事实并非如此），您也没有地方可以放置`try/except`块来捕获异常，因为 COM 会检测到异常并作为失败返回给启动应用程序，不是你的应用程序。您唯一的选择是在`OnDrop`不引发异常的情况下处理事件处理程序中的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T06:45:29.133

另一种选择是 - 在您的 OnDrop 事件中 - 只需收集所需的数据（即，丢弃的文件）并将它们存储在应用程序的 TStringList 中，然后将消息发布到表单的消息队列以通知它丢弃.

这样，删除文件的实际处理将在程序的正常上下文中处理，因此您可以以正常方式处理异常。

# spring - 使用 SimpleJdbcCall 时如何访问结果集或使用 rowcallbackhandler

> ID：10367027
> 
> 赞同：2
> 
> 时间：2012-04-28T19:53:56.140
> 
> 标签：spring, spring-data

我需要编写一个通用代码，它可以调用任何给定的存储过程并使用元数据自动处理参数类型，这就是我使用 SimpleJdbcCall 和 MapSqlParameterSource 的原因。

问题在于我返回的数据是地图列表，但结果集可能很大，我需要直接访问结果集或以任何其他方式访问结果集，而我不会拥有整个列表在内存中映射，但在结果集移动到下一条记录后立即将记录刷新到流中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:07:11.533

该方法[`SimpleJdbcCall.returningResultSet()`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/simple/SimpleJdbcCall.html#returningResultSet%28java.lang.String,%20org.springframework.jdbc.core.RowMapper%29)允许您注册一个[`RowMapper`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/RowMapper.html)以一次处理一行结果集。

# python - 我可以在 Python 中使用正则表达式搜索特定行吗？

> ID：10367034
> 
> 赞同：0
> 
> 时间：2012-04-28T19:55:06.720
> 
> 标签：python, regex

我想用来`re.search()`在我选择的行上搜索模式，或者从我指定的行开始。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T19:57:01.233

当然：使用正常的字符串操作隔离该行并仅将该行传递给`re.search()`.

例如：

```
lines = data.split('\n')
a = re.search('regex', lines[3]) 
```

# backup - tar 是否忽略 --after-date 选项？

> ID：10367037
> 
> 赞同：5
> 
> 时间：2012-04-28T19:55:22.680
> 
> 标签：backup, tar

我想用 tar 做一个增量备份。我在 2012-04-08 进行了完整备份，后来我想备份在该日期之后创建或更改的所有文件。

所以我做了这样的事情：

```
cd /directory/I/wanted/to/back/up
tar --newer 2012-04-08 -cvnf "/backup/dir/$(date +%F).tar" 
```

过了一会儿，我意识到 tar 正在归档我知道自上次备份以来没有更改的文件。我检查了他们的修改日期，他们不应该被包括在内。

我不敢相信，所以我做了一个小测试：

```
cd ~
mkdir test
cd test
touch -t 201101010000 OLD
touch NEW
cd ..
tar -N 2012-01-01 -cvf test.tar ./test/*
tar -tf test.tar
ls -o ./test/ 
```

很明显， tar 似乎忽略了 -N、--newer 和 --after-date 选项。它已经归档了这两个文件，尽管我命名为 OLD 的文件是在 2012 年之前使用时间戳创建的。

我该如何帮助自己呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T20:27:56.260

您的日期格式必须是

```
tar --newer 20120408 
```

对于比 2012 年 4 月 8 日更新的文件。没有“-”！

或者你可以使用

```
TWODAYSAGO=`(date --date '2 days ago' --rfc-3339=seconds)`
tar -cz  --newer-mtime="${TWODAYSAGO}"  -f bakfile.tgz  /dir_to_backup 
```

# java - 查找整数是否为整数和之一的有效方法

> ID：10367038
> 
> 赞同：1
> 
> 时间：2012-04-28T19:55:24.947
> 
> 标签：java, arrays, optimization

这是一项学校作业，但是，要求是“以最高性能实施该程序”-这对我的口味来说是模糊的，因为我不知道内存是否会超过速度等等。但是我在寻找什么是否存在通过对输入数据进行一些智能操作来解决问题的“棘手”方法。

所以，问题来了：假设你有两个数组，A 和 B，编写一个函数，如果 B 中有这样的整数，则返回 1，它等于 A 的任何两个*后续*元素的总和。

下面是我的文案。请注意，我没有使用`Hashmap<Integer>`，因为我认为加速所需的内存是一个劣势，足以忍受 O(n * m) 速度作为我最坏的情况而不是 O(n)。

```
public static int arrayContainsSum(int[] a, int[] b)
{
    int offsetA = a.length - 1;
    int offsetB = offsetA;
    int index = b.length - 1;
    int result = 0;
    int tested;

    while (index >= 0)
    {
        if (offsetA > 0) a[offsetA] += a[--offsetA];
        else if (offsetA == 0) // This has a danger of overflowing the int
            a[offsetA--] = multiply(a);
        tested = b[index];
        if ((offsetA < 0 && tested != 0 && a[0] % tested != 0) ||
            offsetB == 0)
        {
            // No point to test this element as it doesn't 
            //divide the product of sums
            offsetB = a.length - 1;
            index--;
        }
        if (tested == a[offsetB--])
        {
            result = 1;
            break;
        }
    }
    return result;
}

private static int multiply(int[] input)
{
    int accumulator = input.length > 0 ? 1 : 0;
    for (int i : input)
        if (i != 0) accumulator *= i;
    return accumulator;
} 
```

有些事情我不关心：整数溢出（可能是乘法的结果）。我假设`array.length`与从局部变量中读取一样快。

但是，再一次，我的问题是“不能分析地解决这个问题吗？” 这意味着更高的效率？

PS。问题没有提到数组是否只包含唯一成员 - 对此没有限制。我还认为可以通过排序来优化（如果我检测到这种情况），`a`以便如果`b[x]`小于 中的最小元素`a`或大于 中的最大元素`a`，它将节省一些查找 - 但是，这又是会以增加复杂性为代价，可能不完全合理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:40:42.100

```
public static int arrayContainsSum(int[] a, int[] b) {
  final Set<Integer> sums = new HashSet<Integer>();
  for (int i = 0; i < a.length - 1; i++) sums.add(a[i] + a[i+1]);
  for (int x : b) if (sums.contains(x)) return 1;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:47:32.723

如有疑问，请使用蛮力。

好吧 - 当然，如果任务是编写一个高性能的解决方案，那可能还不够，但在优化解决方案之前，您需要一个解决方案。

```
val a = List (3, 9, 7, 4, 16)    
val b = List (29, 12, 21, 16, 18, 14) 

for (i <- (0 to a.length - 2); 
  j = i+1;
  if b.exists (_ == a(i)+a(j))) yield (a(i), a(j), a(i)+a(j)) 
```

它多久运行一次？外部循环从 1 运行到 array-length-1（这里是一个列表）以产生 i，j 只是后续元素。

但是对于 b 它总是贯穿整个数组，

如果按值对 b 进行排序，则可以在 b 中进行二进制查找。我猜规则中不允许使用 HashMap，因为您有两个数组。否则 HashMap 更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:13:11.227

除非您有超过 100 万个元素并且需要超过 1 秒，否则速度无关紧要。顺便说一句，您不想制作超过 100 万个元素的数组。

不幸的是，Java 版本高达 7 甚至不包含基本的集合操作。但是，您可以在[Google Guava](http://code.google.com/p/guava-libraries/)库中找到它们（该代码经过适当测试并且尽可能高效）。

假设您有 2 组 20 个元素，`a`并且`b`- 从 1 到 100 和 200 中随机选择。

```
a = RandomInteger[{100}, 20]
b = RandomInteger[{200}, 20] 
```

之后，您想找到`a`后续元素之和的集合中的哪些元素与`b`

```
ap = Table[Total[{a[[i]], a[[i + 1]]}], {i, 1, Length[a] - 1}]
Intersection[ap, b] 
```

例如：

```
{73,43,99,33,80,35,54,82,50,23,92,22,54,4,14,14,8,80,92,85}
{121,139,158,158,51,176,65,84,76,172,73,148,71,128,55,134,4,32,183,134}
{116,142,132,113,115,89,136,132,73,115,114,76,58,18,28,22,88,172,177}
{73,76,172} 
```

# html - 如何使表格（或类似表格的东西）跨 CSS 3 列流动？

> ID：10367044
> 
> 赞同：4
> 
> 时间：2012-04-28T19:56:38.577
> 
> 标签：html, css

我正在布置一本书的摘录，其中有很多文本和很多表格——棒球排行榜——跨越多个没有固定高度的 CSS 3 列。尤其是这个是一长串的金手套获奖者名单。但是当我在表格中格式化棒球数据时，它不会将自己分成列，所以我只得到一张长表。

也就是说，对于文字繁重的“页面”，我一直在做这样的事情，然后从摘录中粘贴 500 个单词，效果很好——</p>

```
-webkit-column-width: 205px;
-webkit-column-gap: 20px; 
```

对于表格，我希望它的行为如下所示：

```
-webkit-column-count: 2;
-webkit-column-gap: 20px; 
```

如何使表格数据与这些列很好地配合？用 DIV 制作类似表格的东西是我的最佳选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:33:37.620

您基本上需要从元素中删除表格显示并将每一行转换为具有`display:block;`“表格”的每个单元格`display:inline-block;`和所需宽度的东西。理论上，您可以在当前表上使用 CSS 执行此操作，以便它很好地降级，或者您可以将`<div>`s 与`<span>`s 或类似的东西一起使用。无论哪种方式，您都需要将表格从其当前显示模式分解为每行都是其自己的块元素。

**例子：**

```
table { display:block; }
tr { display:block; }
td { display:inline-block; }
    td.short { width:100px; }
    td. [etc...] 
```

# facebook - Facebook 服务器端身份验证流程：这是正确的“代码”吗？

> ID：10367049
> 
> 赞同：1
> 
> 时间：2012-04-28T19:57:16.107
> 
> 标签：facebook

我在 JS 客户端上使用 FB.login 并想在服务器上验证用户的身份。因此，客户端从 facebook 获得一个 signedRequest 并将其发送到服务器。服务器在句点上进行拆分，并将签名请求的第二部分解码为 json 对象。

当我将服务器端请求发送到

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
   &redirect_uri=YOUR_REDIRECT_URI
   &client_secret=YOUR_APP_SECRET
   &code=CODE_GENERATED_BY_FACEBOOK 
```

我解码的 json 看起来像：

```
{"algorithm":"HMAC-SHA256","code":"2.AQCPA_yfx4JHpufjP.3600.1335646800.1-5702286|l11asGeDQTMo3MrMx3SC0PksALj6g","issued_at":1335642445,"user_id":"5232286"} 
```

那是我需要的代码吗？需要B64编码吗？如果这不是代码，我应该使用什么代码？

_

## 我试过的：

我尝试使用的请求是：

```
https://graph.facebook.com/oauth/access_token?client_id=295410083869479&redirect_uri=https://squaredme.appspot.com/facebookredirect&client_secret=44f1TOPSECRETbb8e&code=2.AQCPA_yfx4JHpufjP.3600.1335646800.1-5702286|l11asGeDQTMo3MrMx3SC0PksALj6g 
```

但这会返回错误：

```
{"error":{"message":"Error validating verification code.","type":"OAuthException","code":100}} 
```

我不知道这是因为我使用了错误的代码，还是什么。值得注意的是，这是在我的本地开发服务器上运行的，而 squaredme.appspot.com 肯定不会解析到我的 IP。我不知道 facebook 是否会检查或检查什么 - 我假设我会收到更好的错误消息。感谢您的任何指导！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T20:10:54.800

你试图以某种方式将这两个流程结合在一起，这就是为什么事情不能很好地工作。

当 facebook 将您的应用程序 url 和签名请求发送到 iframe 中时，有两个选项，一个简单的选项是用户已经通过身份验证，然后签名请求将包含所有必要的数据（包括签名请求），然后您只需加载画布页面并使用 JS SDK 在那里获取访​​问令牌，但在这种情况下，不需要使用*FB.login*（因为它会打开一个弹出窗口并自动关闭它），您可以使用*[FB。 getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)*方法不会惹恼用户。

如果用户未通过身份验证，则签名请求将丢失使用图形 api 所需的内容。然后，您将用户重定向到[auth dialog](http://developers.facebook.com/docs/reference/dialogs/oauth/)，并且由于您已加载到 iframe 中，因此您需要返回一个 html 响应，该响应使用 javascript 重定向父窗口，例如：

```
top.location.href = "AUTH_DIALOG_URL"; 
```

使用完成后（接受或拒绝应用程序），他将被重定向到您作为参数添加到身份验证对话框的“redirect_uri”。如果用户接受了您的应用程序，那么您将在查询字符串中获得“代码”参数。然后，您获取代码，将其与您在问题中发布的访问令牌交换，然后将用户重定向回“apps.facebook.com/YOUR_APP”。

然后加载页面时，用户已经通过身份验证，您将获得完整签名的请求。

我希望这可以为您澄清事情，重新检查[服务器端流程](http://developers.facebook.com/docs/authentication/server-side/)，它几乎涵盖了所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:34:08.977

我也遇到了一些麻烦，然后我在 StackOverflow 中找到了解决方案。facebook提供了两种“代码”。一个来自客户端流生成的 cookie 中的 signedRequest。Facebook 的 JS SDK 处理这些代码并在不告诉我们任何内容的情况下获取访问令牌。

当您导航到 OAuth URL（服务器端流程）时，另一种类型的代码作为查询附加到您的重定向 URI (http://www.yoururl.com/index.php?code=AAAgyiaus...)。使用此代码，您可以转到令牌 URL 并获取您的访问令牌。

当您使用服务器端流程时，您需要在 OAuth URL 和 Token URL 中指示重定向 URI，并且它们必须完全相同，因此缺少斜杠或查询字符串可能会造成很多问题。

代码彼此不同。当您同时使用这两种东西时，似乎不可能使用 cookie 的已签名请求中的代码获取访问令牌。

*但是*，事实并非如此。神奇之处在于：signedRequest 的代码与 NO URI 相关联，因此只要 redirect_uri 是必填字段，您只需在导航到 Token URL 时将其传递为空白即可。

所以最终的解决方案是：**从cookie中获取signedRequest，在你的服务器中解析得到代码，然后读取Token URL**：

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
    &redirect_uri=&client_secret=YOUR_APP_SECRET
    &code=CODE_INSIDE_THE_SIGNED_REQUEST 
```

它看起来像一个黑客，所以我不知道它会工作多久，但它现在正在工作。

# c - 比较指向C中整数的指针

> ID：10367061
> 
> 赞同：-8
> 
> 时间：2012-04-28T19:58:52.403
> 
> 标签：c, pointers

我正在尝试通过链表搜索星号，但是每次我尝试使用 while 循环将头指针与星号进行比较时，程序将无法编译，说它无法将指针与整数进行比较

它在打印列表功能中： `while( pt != '*')`

```
/*
 *Description: Construction of a social network
 */

#include < stdio.h>
#include < strings.h>
#include < stdlib.h>
#define SIZE 30
#define PEOPLE_SIZE 20
#define PRINT_NETWORK 1
struct people   
{
        char name[SIZE];
        int age;
        char gender[SIZE];
        int idnumber;
        struct friendlist *friends;
};

typedef struct friendlist
{
        int friendsname[PEOPLE_SIZE];
        struct friendlist *next;
        struct people *person;
}node_t;

void scan_friends(FILE *input2, node_t *pt)
{
        char *friend_name;
        fscanf(input2,"%s", &pt->friendsname);
}

void  print_friends(node_t pt)
{
       printf("%s ", pt.friendsname);
}

void print_list(node_t *pt)
{
        int friendsname[PEOPLE_SIZE];
        struct friendlist *next;
        struct people *person;

}node_t;

void  print_friends(node_t pt) 
{
        printf("%s ", pt.friendsname);
}

void print_list (node_t *pt)
{ 
        if (pt==NULL)
                printf("The list is empty\n");
        else
        {                 // traversing the list
                while (pt!=NULL)
                {
                        while (pt != '*')
                       {
                                    print_friends(*pt);
                                    pt=pt->next;
                       }
                }
        }
}

int main(void)
{
    int choice=0;
    FILE *input; //pointer to people.dat

    FILE *input_friends;
    int i=0;
    struct people people[SIZE];
    struct friendlist friendlist[PEOPLE_SIZE];
    node_t *headp, *temp, *current=NULL;
    char user_name[SIZE];
    int user;

            input_friends=fopen("friends.dat", "r"); //opens friends file

            while(!feof(input_friends))
            {
                    // create a new list element
                    temp = (node_t *)malloc(sizeof(node_t));  // memory
                    scan_friends(input_friends, temp);    // initialization of element 
                    temp->next=NULL;     // setting pointer to null.

                    if (current==NULL)
                    {
                            headp=temp;  // setting the head of the list
                    }
                    else
                    {
                                current->next=temp;   // else connecting to previous
                        }
                        current=temp;   // updating the current element

                        i++;   // count number of elements added
                }
                fclose(input_friends);
                print_list(headp);                                    
        }

        printf("\n");
        return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T20:40:57.323

这是我认为您要发布的内容，但它仍然无法编译，因为您无法将指针与 char 进行比较

```
/*
 *Description: Construction of a social network
 */

#include <stdio.h>
#include <strings.h>
#include <stdlib.h>
#define SIZE 30
#define PEOPLE_SIZE 20
#define PRINT_NETWORK 1

struct people   
{
    char name[SIZE];
    int age;
    char gender[SIZE];
    int idnumber;
    struct friendlist *friends;
};

typedef struct friendlist
{
    int friendsname[PEOPLE_SIZE];
    struct friendlist *next;
    struct people *person;
} node_t;

void scan_friends(FILE *input2, node_t *pt)
{
    char *friend_name;
    fscanf(input2,"%s", &pt->friendsname);
}

void  print_friends(node_t pt)
{
    printf("%s ", pt.friendsname);
}

void print_list (node_t *pt)
{ 
    if (pt==NULL)
        printf("The list is empty\n");
    else
    {                 // traversing the list
        while (pt!=NULL)
        {
            while (pt != '*')
            {
                print_friends(*pt);
                pt=pt->next;
            }
        }
    }
}

int main(void)
{
    int choice=0;
    FILE *input; //pointer to people.dat

    FILE *input_friends;
    int i=0;
    struct people people[SIZE];
    struct friendlist friendlist[PEOPLE_SIZE];
    node_t *headp, *temp, *current=NULL;
    char user_name[SIZE];
    int user;

    input_friends=fopen("friends.dat", "r"); //opens friends file

    while(!feof(input_friends))
    {
        // create a new list element
        temp = (node_t *)malloc(sizeof(node_t));  // memory
        scan_friends(input_friends, temp);    // initialization of element 
        temp->next=NULL;     // setting pointer to null.

        if (current==NULL)
        {
            headp=temp;  // setting the head of the list
        }
        else
        {
            current->next=temp;   // else connecting to previous
        }
        current=temp;   // updating the current element

        i++;   // count number of elements added
    }
    fclose(input_friends);
    print_list(headp);                                    

    printf("\n");
    return(0);
} 
```

我的编辑将其归结为只有一个您需要自己解决的编译错误。它在第 47 行：

```
while (pt != '*') 
```

这当然不是你想要做的。

您想将什么与星号进行比较？名字？

考虑类似*的东西*

```
while (pt->person->name != '*') 
```

请注意，这仍然不起作用，因为您将 char 数组与单个 char 进行比较。但这应该会让你朝着你想去的方向前进，这取决于你想将星号与什么进行比较。请注意，这是您访问具有指针的结构成员的方式。

其他任何东西都只是结构的基础知识以及如何访问它们的成员。

# css - CSS 表格等距列

> ID：10367066
> 
> 赞同：1
> 
> 时间：2012-04-28T20:00:06.247
> 
> 标签：css, css-tables

我希望[它](http://jsfiddle.net/FJ6wX/)有等距的列。在旧版本中，它可以工作，但我还不知道有什么区别。如果我在 jsfiddle 中复制旧的 HTML 并应用相同的 CSS，它也不起作用，所以我假设缺少一些东西。

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:06:29.517

Html 和 Css 代码很好（只需在表格中包含 100% 的宽度）。

问题是图像的大小，如果图像大于单元格必须让其他单元格缩小的宽度。

检查此示例：http: [//jsfiddle.net/FJ6wX/3/](http://jsfiddle.net/FJ6wX/3/)`

# uitableview - UITableViewCell 中的自定义 UIImageView

> ID：10367069
> 
> 赞同：0
> 
> 时间：2012-04-28T20:00:35.420
> 
> 标签：uitableview, uiimageview, uigesturerecognizer, touchesbegan

我创建了一个 UIImageView 的子类来传递一些字符串。我还创建了一个 UITableViewCell 的自定义类，并将我的四个*UIStringImageView*放入其中。

我为缩略图 tableView 之类的画廊做了这个。然后我在每个 UIStringImageView 中添加了一个 UITapGestureRecognizer 来打开相应的图像。

现在我想在 UIStringImageView（不透明度）上添加一个覆盖层，以指示对单个 imageViews 的触摸。

这是我的代码（来自 UIStringImageView 的实现）：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    overlay = [[UIView alloc] initWithFrame:self.frame];
    [overlay setBackgroundColor:[UIColor colorWithWhite:0 alpha:0.5]];
    [self addSubview:overlay];
} 
```

代码工作正常。但我的问题实际上是，叠加层不在 imageViews 的顶部，而是有一个偏移量（从顶部和左侧）。每个视图的顶部偏移量都相同，并且每个 imageView 的左侧偏移量增加（从左到右）。

带有两个叠加层的屏幕截图（左起第一个和第二个 imageView，底行）： ![在此处输入图像描述](../Images/8e68bbad8c66d0ada3f10082d7155e3a.png)

有人可以帮我解决这个问题吗？非常感谢！朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:02:46.653

For everyone running into something like the same problem:

Using `self.bounds` instead of `self.frame` solved the issue.

# vb.net - vb.net 数据表到 List(of T) 3.5

> ID：10367071
> 
> 赞同：0
> 
> 时间：2012-04-28T20:01:47.457
> 
> 标签：vb.net, list, datatable

我搜索了一种将 dataTable 转换为 List(of T) 的方法。

在 .Net 3.5 上的 Vb.net 中

如果您知道如何操作，或者可能是这样做的人的链接。

保护你

* * *

我在 c# 上检查了这个（来自另一个堆栈问题）

```
public static IEnumerable<T> ToEnumerable<T>(DataTable dt, Func<DataRow, T> translator)
{
    foreach(DataRow dr in dt.Rows)
    {
       yield return translator(dr);
    }
} 
```

但我无法在 .net 3.5 上翻译 Func（我没有找到怎么做。或者好的库）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:06:54.297

您需要添加对以下程序集的引用：

C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Data.DataSetExtensions.dll

否则你不能调用 AsEnumerable() 方法。

Tim Schmelter 写了一个额外的提示：

您需要添加对 System.Data.DataSetExtensions.dll 的引用。在 VB.NET 中，您不需要显式调用它（Dim rows = (From row in dt).ToList）。

浆果

# python - M2Crypto - 从非标准文件导入密钥？

> ID：10367072
> 
> 赞同：1
> 
> 时间：2012-04-28T20:02:04.200
> 
> 标签：python, rsa, m2crypto

我有一个包含公共指数和模数的文件。它们不是 pem 或 xml 或 der 格式，它们只是写入偏移量的值。

如何使用 M2Crypto 制作公钥？我也有相同格式的私钥。我已经设法使用某人在 Stackoverflow 上发布的代码来生成一个带有 php 的 PEM 文件，但这似乎是一种非常荒谬的方法。

这也不是一次性的，我需要能够从这种格式的文件中读取公共指数和模数来检查签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:04:52.273

在这里非常感谢 Lars：http: [//blog.oddbit.com/2011/05/09/signing-data-with-ssh-agent/](http://blog.oddbit.com/2011/05/09/signing-data-with-ssh-agent/)

`e`是公共指数的 Python `long`。 `n`是公共模数的 Python `long`。

他发布的代码是：

```
import M2Crypto
key = M2Crypto.RSA.new_pub_key((
    M2Crypto.m2.bn_to_mpi(M2Crypto.m2.hex_to_bn(hex(e)[2:])),
    M2Crypto.m2.bn_to_mpi(M2Crypto.m2.hex_to_bn(hex(n)[2:])),
    )) 
```

hex 将生成一个 hex 字符串 sort `0xA45E`，所以他只是抓住 . 之后的所有内容`0x`。

我正在从文件中读取密钥，所以我没有那么长的时间。我最终使用：

```
import M2Crypto
from binascii import hexlify 
e = f.read(4)
n = f.read(0x80)
key = M2Crypto.RSA.new_pub_key((
    M2Crypto.m2.bn_to_mpi(M2Crypto.m2.hex_to_bn(hexlify(e))),
    M2Crypto.m2.bn_to_mpi(M2Crypto.m2.hex_to_bn(hexlify(n))),
    )) 
```

像魅力一样工作！

根据文档，接受的格式`new_pub_key`需要是

> OpenSSL 的 MPINT 格式 - 4 字节 big-endian 位计数，后跟适当的位数

我不确定这是否是一个错字，但对于我的（十六进制）指数`00010001`最终是`000003010001`. 我认为这是一个字节数，而不是位数。他们还剥离了第一个 0x00。我不知道这是标准还是因为它是一个空字节。

编辑：我想我对格式有了更好的理解。

如果第一个字节为负，则在开头添加一个零字节。如果有任何前导（在开头）零字节，它们将被剥离，除非第一个字节变为负数，在这种情况下，只剩下一个零字节。

一些例子：

```
未格式化：
\x23\x24\x25\x26
格式化：
\x00\x00\x00\x04\x23\x24\x25\x26
解释：
保留原样的字符串和打包的字节数

未格式化：
\x00\x23\x55\x35
格式化：
\x00\x00\x00\x03\x23\x55\x35
解释：
前导零字节被删除，字节数现在为 3

未格式化：
\x80\x43\x55\x27
格式化：
\x00\x00\x00\x05\x00\x80\x43\x55\x27
解释：
添加前导零字节，因为 \x80 是负数

未格式化：
\x00\xff\x43\x23
格式化：
\x00\x00\x00\x04\x00\xff\x43\x23
解释：
左前导零字节，因为 \xff 是负数

未格式化：
\x23\x53\66\x00
格式化：
\x00\x00\x00\x04\x23\x53\66\x00
解释：
字符串中剩余的尾随零字节

```

# java - Java 查找长的集合位

> ID：10367077
> 
> 赞同：1
> 
> 时间：2012-04-28T20:02:39.397
> 
> 标签：java

我有一个很长的号码。现在我想要的是（以伪代码给出），

```
for each two bits of that long

if the two bits == 11

then count++

(for example if number is "11 01 10 00 11" it will give count = 2) 
```

任何人都可以帮助我如何在 Java 中有效地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T20:04:06.530

```
public static int count11(long n) {
  int cnt = 0;
  while (n != 0) {
    if ((n & 3) == 3) cnt++;
    n >>>= 2;
  }
  return cnt;
} 
```

更有效的变体：

```
public static int count11(long n) {
  int cnt = 0;
  while (n != 0) {
    switch ((int)(n & 0x3F)) {
    case 0x3F: cnt += 3; break;
    case 0x3C: case 0x33: case 0xF: cnt += 2; break;
    case 0x30: case 0xC: case 3: cnt++;
    }
    n >>>= 6;
  }
  return cnt;
} 
```

# php - 配置phpmyadmin和mysql

> ID：10367080
> 
> 赞同：-1
> 
> 时间：2012-04-28T20:02:54.473
> 
> 标签：php, apache

我刚刚在我的 pc windows 7 64bit 上安装了 xampp，似乎一切都已成功安装，但是当我点击 phpMyAdmin 时，我在下图中收到如下错误 ![在此处输入图像描述](../Images/37f343304205f30394d9a9200af04a93.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:48:08.520

尝试禁用防火墙。如果可行，请考虑为它正确创建防火墙规则。

将来，这些问题最好在其他场所提出（考虑[serverfault.com](http://serverfault.com)或[webmasters.stackexchange.com](http://webmasters.stackexchange.com)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:34:30.810

打开命令行并输入：

```
mysql -u root -p 
```

输入密码（如果未设置密码，请关闭 -p 开关）。

如果你能进去，至少你知道 MySQL 运行正常。所以故障不存在。

检查 phpmyadmin 的 config.inc.php 文件。它可能设置了错误的登录机制，设置了错误的用户名/密码，或者使用了 3306 以外的端口号（MySQL 的默认值）。

还可以考虑尝试其他一些 wamp 包，例如：WampServer、UniformServer、ZWamp、WampDeveloper（商业）...

[http://en.wikipedia.org/wiki/Comparison_of_WAMPs](http://en.wikipedia.org/wiki/Comparison_of_WAMPs)

在那里你可能会有更好的运气。只需确保先卸载、删除并重新启动即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T20:10:23.293

检查 MySQL 是否已启动，而不仅仅是 Apache/PHP。

# uitableview - 在选项卡式应用程序中编辑表格视图

> ID：10367083
> 
> 赞同：0
> 
> 时间：2012-04-28T20:02:59.747
> 
> 标签：uitableview, uinavigationcontroller, uinavigationbar

我有一个选项卡式视图应用程序，它使用选项卡控制器作为根视图控制器。我拥有的视图之一是一个表格视图，我希望能够通过单击添加/编辑按钮进行编辑，该按钮将使所有单元格都可编辑并允许添加单元格。

在表格视图中，我添加了一个导航栏，并尝试使用以下代码在栏上创建一个按钮，按下该按钮将使所有单元格都可编辑：

```
- (void)viewDidLoad {
[super viewDidLoad];

UIBarButtonItem *editButton = [[UIBarButtonItem alloc]
                               initWithTitle:@"Delete"
                               style:UIBarButtonItemStyleBordered
                               target:self
                               action:@selector(toggleEdit:)];
self.navigationItem.rightBarButtonItem = editButton;          

}

-(IBAction)toggleEdit:(id)sender {

    [self.mTableView setEditing:!self.mTableView.editing animated:YES];

    if (self.mTableView.editing) 
        [self.navigationItem.rightBarButtonItem setTitle:@"Done"];
    else
        [self.navigationItem.rightBarButtonItem setTitle:@"Delete"];

} 
```

该代码不起作用，它不会在导航栏上生成按钮。我已经读过我应该使用导航控制器，但是如果我希望这一页（在我的选项卡式视图应用程序中）使用导航控制器，我如何让选项卡栏指向导航控制器作为选择选项？

----更新----- 好的，我制作了一个包含根视图控制器（标签栏控制器）的 nib 文件。标签栏控制器包含 2 个视图控制器和一个导航控制器，其中包含一个视图控制器。我将导航控制器中的视图控制器链接到包含表格视图的视图。当我运行程序并尝试单击 tableview 的选项卡时，我收到以下错误：

2012-04-29 17:23:28.116 ash[6778:f803]-[UIViewController tableView:numberOfRowsInSection:]：无法识别的选择器发送到实例 0x68bb8d0 2012-04-29 17:23:28.117 ash[6778:f803] ***终止应用程序由于未捕获的异常“NSInvalidArgumentException”，原因：“-[UIViewController tableView:numberOfRowsInSection:]：无法识别的选择器发送到实例 0x68bb8d0”

我的包含 tableview 的视图控制器是一个 UIViewController 实现

在其 m 文件中，它包含以下方法：

```
 #pragma mark -
    #pragma mark Table View Data Source Methods

    - (NSInteger)tableView:(UITableView *)tableView
     numberOfRowsInSection:(NSInteger)section {
        return [self.portfolioArray count];
     }

    - (UITableViewCell *)tableView:(UITableView *)tableView
            cellForRowAtIndexPath:(NSIndexPath *)indexPath {

       static NSString *SimpleTableIdentifier = @"CellTableIdentifier";
      static BOOL nibsregistered = NO;
      if (!nibsregistered) {
      UINib *nib = [UINib nibWithNibName:@"ASHInstrumentCell" bundle:nil];
      [tableView registerNib:nib forCellReuseIdentifier:SimpleTableIdentifier];
      nibsregistered = YES;
     }

     ASHInstrumentCell *cell = [tableView dequeueReusableCellWithIdentifier:
                         SimpleTableIdentifier];

      NSUInteger row = [indexPath row];

     cell.type.text = [portfolioArray objectAtIndex:row];

     return cell;
    }

    #pragma mark -
    #pragma mark Table Delegate Methods

    - (void)tableView:(UITableView *)tableView
    didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSUInteger row = [indexPath row];
    NSString *rowValue = [portfolioArray objectAtIndex:row];

    NSString *message = [[NSString alloc] initWithFormat:
                     @"You selected %@", rowValue];
    UIAlertView *alert = [[UIAlertView alloc]
                         initWithTitle:@"Row Selected!"
                         message:message
                         delegate:nil
                         cancelButtonTitle:@"Yes I Did"
                         otherButtonTitles:nil];
    [alert show];

   [tableView deselectRowAtIndexPath:indexPath animated:YES];
 }

 - (void)tableView:(UITableView *)tableView commitEditingStyle:                (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
        NSUInteger row = [indexPath row]
        [self.portfolioArray removeObjectAtIndex:row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]                 withRowAnimation:UITableViewRowAnimationAutomatic] ;
        } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:11:20.647

两点：首先，a`UINavigationController`是 的子类`UIViewController`，因此您可以创建一个 UINavigationController 的实例，其 rootViewController 是您的 tableViewController，并让 TabBarController 将导航控制器作为其选项卡之一进行管理。

还要注意 UIViewController 类已经有一个`editButtonItem`你应该使用的属性，而不是创建你自己的按钮：

```
 self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:30:51.683

好的，我想我知道我做错了什么。我为我的选项卡视图控制器创建了一个 nib 文件，并为此添加了视图控制器和导航控制器（它本身包含一个 tableview 控制器）。

我没有做的一件事是将正确的类类型分配给我的选项卡中的视图控制器。如果我创建了一个具有 IBOutlets 的自定义视图控制器类 firstviewcontroller 并且我没有在我的选项卡控制器 nib 中将视图控制器指定为 firstviewcontroller 类，我会得到那个奇怪的键值错误。

我遇到的第二个问题是选项卡视图控制器不会自动旋转，即使我想显示的所有视图都允许使用以下代码进行自动旋转：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        // Return YES for supported orientations
     return YES;
    } 
```

再次出现这种情况的原因是我没有将每个视图控制器的类（在我的 tabbedviewcontroller nib 文件中）指定为我希望它们显示的自定义类。

一旦我指定了他们的班级类型，一切就都到位了。

# c++ - Set() 和 Get() 的重载括号运算符

> ID：10367084
> 
> 赞同：2
> 
> 时间：2012-04-28T20:03:28.897
> 
> 标签：c++, string, object, operator-overloading

指示是：

MyString 对象应重载以下运算符：

1) 括号运算符应该被重载以替换之前赋值的 Set 和 Get 函数。请注意，两个实例都应在违反字符串数组边界时发出 exit(1) 。

我定义函数的 .cpp 文件：

```
 // My original set function to replace the character at the index passed in with the character passed in

 void MyString::Set(int index, char b)
 {
    if(String[index] == '\0')
    {
            exit(1);
    }
    else
    {

            String[index] = b;
    }

 }
 //original get function to get the character of the index passed in as argument
 char MyString::Get(int i)
 {

    if( String[i] == '\0')
    {
            exit(1);
    }
    else
    {
            return String[i];

    }
 } 
```

我如何将其转换为重载的 () 运算符函数？我得到的最多的是：

```
 MyString& MyString::operator()(const int index, const char b)
 {
    if(String[index] == '\0')
    {
            exit(1);
    }
    else
    {

            String[index] = b;
    }

}

char& MyString::operator()(const int i)
{

    if( String[i] == '\0')
    {
            exit(1);
    }
    else
    {
            return String[i];

    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:10:34.020

您的边界检查是错误的，但您已经在原始代码中遇到了这个问题。

您的`index`参数神秘地将 type 从 更改`int`为`const MyString&`，这看起来是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T20:13:42.457

Get 和 Set 以及 () 运算符的两个重载都以不适当（错误！）的方式检查字符串错误。请注意，如果字符串不是那么长，则字符串的第 i 个或第 n 个元素不能是 '\0'。如果您尝试读取超出当前字符串长度的内存，您可能会遇到读取访问冲突。

相反，您应该检查给定的索引是否小于字符串的长度，如果是，则返回该元素。否则，超出范围。

另一件事是，在 () 运算符的第一次重载中，您使用的是字符串对象来取消引用字符串数组，这没有多大意义。此外， b 应该是一个字符，而不是字符串，因为您只设置一个元素。

# javascript - 使用 if 语句生成不同的元素

> ID：10367086
> 
> 赞同：0
> 
> 时间：2012-04-28T20:03:49.277
> 
> 标签：javascript, regex, if-statement

如果元素的最后一个字母是字母或 1，我使用以下 javascript 代码生成不同的数字。但不知何故，无论它是否包含字母，else 的整个时间都会执行。我的错在哪里？？

```
if (document.getElementById(element)!=null && element.charAt(element.length-1)==/^[a-zA-Z]*$/) {
    var element = element+1;
}
else if (element.charAt(element.length-1)==1) {
    var element = element;
    var lastletter = element.charAt(element.length-1);
    lastletter++;
    var element = element.substring(0, element.length-1)+lastletter;
}
else {
    var element = element;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:06:52.073

使用`match`正则表达式查找替换。

**固定代码：**

```
if (document.getElementById(element) && 
    element.match(/[A-z]$/) { // <========
    var element = element+1;
}
else if (element[element.length - 1]) === '1') {  // <========
    var element = element;
    var lastletter = element.charAt(element.length-1);
    lastletter++;
    var element = element.substring(0, element.length-1)+lastletter;
}
else {
    var element = element;
}​ 
```

请注意，您的变量命名令人困惑。你最好从 更改`element`为`elementId`。

# themes - plone.app.theming 中的多个主题

> ID：10367087
> 
> 赞同：2
> 
> 时间：2012-04-28T20:04:03.730
> 
> 标签：themes, plone, diazo

我正在尝试将不同的 html（主题）应用到我的首页（index.html），而我的所有其他页面都将具有相同的主题（index_in.html）。我正在尝试这种方式，并想知道为什么它不起作用：

摘自我的 rules.xml：

```
 ...
    <theme href="index_in.html" css:if-content="#visual-portal-wrapper" />

    <rules css:if-content="#visual-portal-wrapper">

    <theme href="index.html" if-path="front-page"/>
    <theme href="index_in.html" />
    ... 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:17:20.633

尝试...

```
<rules css:if-content="#visual-portal-wrapper">
<theme href="index.html" if-path="front-page" />
<theme href="index_in.html" />
...
</rules> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T06:10:02.090

如果首页有#visual-portal-wrapper，那么第一个也将匹配并被使用。条件主题按它们出现的顺序进行尝试，并使用第一个匹配的主题。

# iphone - xcode自定义ttf字体不起作用

> ID：10367091
> 
> 赞同：31
> 
> 时间：2012-04-28T20:04:26.977
> 
> 标签：iphone, ios, xcode, fonts, label

好的，所以我一直在阅读 SO 并进行各种谷歌搜索，但我无法弄清楚为什么我的字体不起作用。

我认为我做的一切都是正确的，但是当我运行应用程序时，按钮上的文本以标准系统字体显示，而不是我导入的字体。我添加`NSLog(@"%@",[UIFont familyNames]);`以查看它是否在列表中，但它不在。这让我觉得我设置错了。

我希望有人可以**帮助我以自定义字体显示标签中的文本。** 感谢任何认为他们可能有任何建议的人！

***一步一步这就是我所做的。***

**第 1 步：**我从互联网上下载了 .ttf 文件。在我的取景器中，它看起来像： ![在此处输入图像描述](../Images/60af1a178751ee8ebeb03a88ccc8c5cd.png)

**第 2 步：**我将字体文件从 finder 拖到 XCode 中，并选中“将文件复制到项目文件夹”选项。所以在我的项目中我可以看到：

![在此处输入图像描述](../Images/3516130ef473c89a71c86411435fa215.png)

**第 3 步：**我在字体册中打开字体以查看真正的文件名是什么，我看到了： ![在此处输入图像描述](../Images/5043361b195f7d8b123f8f4461512b35.png)

**第 4 步：**我在 MyApp-Info.plist 文件中添加了一个密钥，其文件名来自 XCode，包括文件类型。它看起来像这样：

![在此处输入图像描述](../Images/798a27d80df57660d9b801d1a0d5705d.png)

**第 5 步：**然后在我的代码中我这样写：

```
UIButton *thisLevelButton = [UIButton buttonWithType:UIButtonTypeCustom];

[thisLevelButton setBackgroundImage:[UIImage imageNamed:@"ccLSButtonPlayed"] forState:UIControlStateNormal];
thisLevelButton.frame = CGRectMake(x, y, BUTTON_WIDTH, BUTTON_HEIGHT);
thisLevelButton.tag = j;
[thisLevelButton addTarget:self action:@selector(userSelectedButton:) forControlEvents:UIControlEventTouchUpInside];
[thisLevelButton.titleLabel setFont:[UIFont fontWithName:@"PressStartK" size:24]];
[thisLevelButton setTitle:[NSString stringWithFormat:@"%i",(j+1)] forState:UIControlStateNormal];

// add the button to the panel
[subScroll addSubview:thisLevelButton]; 
```

作为参考，这是字体系列列表中打印的内容：

```
(
    Thonburi,
    "Snell Roundhand",
    "Academy Engraved LET",
    "Marker Felt",
    "Geeza Pro",
    "Arial Rounded MT Bold",
    "Trebuchet MS",
    Arial,
    Marion,
    "Gurmukhi MN",
    "Malayalam Sangam MN",
    "Bradley Hand",
    "Kannada Sangam MN",
    "Bodoni 72 Oldstyle",
    Cochin,
    "Sinhala Sangam MN",
    "Hiragino Kaku Gothic ProN",
    Papyrus,
    Verdana,
    "Zapf Dingbats",
    Courier,
    "Hoefler Text",
    "Euphemia UCAS",
    Helvetica,
    "Hiragino Mincho ProN",
    "Bodoni Ornaments",
    "Apple Color Emoji",
    Optima,
    "Gujarati Sangam MN",
    "Devanagari Sangam MN",
    "Times New Roman",
    Kailasa,
    "Telugu Sangam MN",
    "Heiti SC",
    "Apple SD Gothic Neo",
    Futura,
    "Bodoni 72",
    Baskerville,
    "Chalkboard SE",
    "Heiti TC",
    Copperplate,
    "Party LET",
    "American Typewriter",
    "Bangla Sangam MN",
    Noteworthy,
    Zapfino,
    "Tamil Sangam MN",
    "DB LCD Temp",
    "Arial Hebrew",
    Chalkduster,
    Georgia,
    "Helvetica Neue",
    "Gill Sans",
    Palatino,
    "Courier New",
    "Oriya Sangam MN",
    Didot,
    "Bodoni 72 Smallcaps"
) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-28T20:46:37.787

我怀疑您尚未将字体文件添加到目标中，因此不会将其复制到应用程序的资源中。您的代码在这里工作正常，字体确实在字体系列列表中显示为“Press Start K”。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-25T23:20:14.973

另一种可能性是，当您尝试调用字体时，您可能会调用错误的字体名称。采用：

**斯威夫特 2.1+**

```
//Check which fonts available
for family: String in UIFont.familyNames()
{
   print("\(family)")
   for names: String in UIFont.fontNamesForFamilyName(family)
   {
       print("== \(names)")
   }
} 
```

**目标 C**

```
//Check which fonts available
for (NSString* family in [UIFont familyNames])
{
    NSLog(@"FONT %@", family);

    for (NSString* name in [UIFont fontNamesForFamilyName: family])
    {
        NSLog(@"  %@", name);
    }
} 
```

要找到您应该使用 UIFont(name: "yourFontName", size: 24.0) (swift) 或 [UIFont fontWithName:@"yourFontName" size:16.0f] (obj c) 的字体的实际名称。您添加到 plist 的自定义字体名称必须与目录中调用的任何文件（包括 .ttf 或 .otf）匹配，但引用字体的代码必须与您从此输出中获得的字体名称匹配。祝字体大师好运！

# jquery - 在父元素中查找元素第 n 个位置

> ID：10367094
> 
> 赞同：14
> 
> 时间：2012-04-28T20:04:44.927
> 
> 标签：jquery

如果我有这个：

```
<ul>
    <li><a href="#"></a>a</li>
    <li><a href="#"></a>b</li>
    <li><a href="#"></a>c</li>
    <li><a href="#"></a>d</li>
    <li><a href="#"></a>e</li>
</ul> 
```

假设我点击了第三个 li 项目（内容为“c”）。我怎样才能得到这个项目在“ul”父母中排名第三的信息？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-28T20:07:15.277

```
$('li').click(
    function () {
        alert($(this).index());
    }); 
```

在这里演示：http: [//jsfiddle.net/KyTP5/](http://jsfiddle.net/KyTP5/)

请注意，这为您提供了*从零开始的*索引。

# configuration - JBOSS：在哪里可以找到 jboss.xml

> ID：10367099
> 
> 赞同：0
> 
> 时间：2012-04-28T20:05:44.567
> 
> 标签：configuration, jboss

抱歉，如果我的问题似乎很愚蠢，但我在 Google 上找不到相关内容。

我需要为 JBoss 服务器配置一些东西（例如，为 EJB 设置 JNDI 名称...）。在我阅读过的教程（在互联网或书籍上）中，他们将这些信息配置为`jboss.xml`.

但是，我在 JBoss 文件夹中找不到这个文件。（也许在这里的某个地方，但我还没有找到。所以，请给我一个链接）。

之后，我想把它放到`jboss.xml`项目的 Web-INF 文件夹中。但是，这对我来说似乎很奇怪，因为当我创建 EJB 项目时，我没有看到 Web-INF 文件夹（它只是在我选择项目类型为 Web（动态|静态）项目时出现）。如果我的结论是正确的，请告诉我将`jboss.xml`EJB 项目放在哪里，例如。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:11:11.090

请通过链接了解如何配置所有类型的 EJB。 [EJB3-JBoss](http://docs.jboss.org/ejb3/app-server/tutorial/)

# jsf-2 - 如何使用 JBOSS 7 将项目的根目录重定向到 Primefaces+JSF2.0 应用程序中的特定页面

> ID：10367102
> 
> 赞同：1
> 
> 时间：2012-04-28T20:06:21.597
> 
> 标签：jsf-2, jboss, primefaces, jboss7.x

我有一个 Primefaces+JSF 网站，其主页是 localhost:81/Mywebapp/login.jsf

如果用户转到：localhost:81/Mywebapp/，我想将用户重定向到该主页，因此他不需要编写完整的 URL。

我怎样才能做到这一点？我想这是 JBoss 中的一些配置

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T20:23:31.560

实际上它应该在你的`web.xml`文件中，试着把它放在这个条目的结尾

```
<welcome-file-list>
    <welcome-file>/login.jsf</welcome-file>
</welcome-file-list> 
```

**编辑**

我还通过像这样创建一个新的 index.jsp 解决了这个问题

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <jsp:forward page="/login.jsf" />
</body>
</html> 
```

或者放一个带有这个元数据的 html 文件

```
 <meta http-equiv="Refresh" content= "0; URL=login.jsf"/> 
```

并将其中之一设置为您的欢迎文件。这些解决方案之一应该为您完成工作:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:28:15.910

您始终可以使用[PrettyFaces 之](http://ocpsoft.org/prettyfaces/)类的 URL 重写引擎来执行此操作。您必须在您的中激活它，`web.xml`然后定义如下重写规则：

```
<url-mapping id="login">
  <pattern value="/login" />
  <view-id value="/legacy/user/login.xhtml" />
</url-mapping> 
```

因为您明确提到`login.jsf`，我认为考虑包含一个为您执行此操作（以及许多其他事情）的安全框架是一个好主意。[Seam 安全](http://seamframework.org/Seam3/SecurityModule)为此提供了类型安全的注解：

```
@ViewConfig
public interface SeamPages
{
  static enum Pages0
  {
    @ViewPattern("/jsf/admin/important.xhtml")
    @UrlMapping(pattern="/admin/important")
    @LoginView("/jsf/access/loginRequired.xhtml")
    @AccessDeniedView("/jsf/access/accessDenied.xhtml")
    @RestrictAtPhase(PhaseIdType.RESTORE_VIEW)
    @LoggedIn
    ENUM0;
  }
} 
```

这将解决三个常见的要求：

*   该 URL`/yourApp/admin/important`将被重定向到 JSF 页面`/jsf/admin/important.xhtml`。
*   如果用户不是`@LoggedIn`，他将被重定向到`/jsf/access/loginRequired.xhtml`
*   如果用户无权访问他将被重定向到的页面`/jsf/access/accessDenied.xhtml`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T04:29:32.953

对不起第二个答案，评论中的格式并没有真正削减它：

```
 <welcome-file-list>
            <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
...
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>
...
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
        <url-pattern>*.jsf</url-pattern>
        <url-pattern>subdir/*</url-pattern>
    </servlet-mapping> 
```

彼得的回答应该可以正常工作，但如果您真的关心扩展（这并不重要），那么只需在 servlet 下添加您想要映射的位置。这会映射 *.xhtml、*.jsf 和 'subdir/' 下的任何内容。

```
If you had a hard file:
- index.xhtml

Myapp/index.xhtml and 
Myapp/index.jsf 
would map to the same file. xhtml is since your default suffix is xhtml 
```

老实说，我希望这对 Primefaces 2 有所帮助，我肯定会使用 xhtml，因为这是规范。使用 3 并没有那么重要，但我仍然使用 xhtml，因为它不是我通常在我的服务器上拥有的东西。

祝你好运（Petr 的转发技巧不是一个坏主意——它在困难的情况下真的很有帮助）

# javascript - 使用 jquery one() 函数作为 hack 来防止触发多个点击事件

> ID：10367112
> 
> 赞同：1
> 
> 时间：2012-04-28T20:07:01.180
> 
> 标签：javascript, jquery, javascript-events, onclick

我遇到了一个奇怪的问题，切换按钮的可见性似乎会影响在该按钮上调用点击事件的次数。

如果我使用：`$('button').on('click'...)`，单击按钮，只要在单击它之前完成整个页面加载，就会发生 1 次单击事件。相反，如果我通过 AJAX 加载包含按钮的页面片段，然后单击按钮，则该`on()`函数会触发多个单击事件，每次以这种方式加载页面时都会添加一个。

我可以通过使用来限制这些多次点击`$('button').one('click', ...`但我想知道这是否太hack-ish，最好先解决导致多次点击事件触发的原因。

在切换可见性-/+ AJAX 页面加载影响点击处理程序触发多少点击事件之前是否遇到过这个问题？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:14:43.003

我想这根本不是[因为 One() 的 jQuery Docs 的](http://api.jquery.com/one/)`hack-ish`第一行描述了这个函数的设计目的。

> 将处理程序附加到元素的事件。**每个元素最多执行一次处理程序。**

这很容易说它可以防止多次引发事件。

该函数的***内部工作原理***也与@mgraph 提到的相同，在文档中提到：

> 此方法的第一种形式与 .bind() 相同，只是处理程序在第一次调用后是未绑定的。jQuery 1.7 中引入的后两种形式与 .on() 相同，只是在委托元素第一次发生事件后删除了处理程序，无论选择器是否匹配任何内容。

**再详细一点——**

此方法通常使用/[将事件绑定](http://api.jquery.com/bind/)到处理程序，并且一旦事件发生一次且仅一次，它使用/[取消绑定事件](http://api.jquery.com/unbind/)`.bind()``.on()``.unbind()``.off()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:19:40.690

如果您通过 AJAX 加载元素，您希望使用 .on() 的绑定属性将其绑定到页面加载时存在的元素。例如，`$("body").on("click", "p", ...`不仅在页面加载时，而且在任何 AJAX 调用之后，都会将 click 元素绑定到 p 标签。如果您只是这样做`$("p").on("click", ...`，则只会在页面加载时将 click 事件绑定到 p 元素。因此，在第一个示例中，您选择要绑定到的元素的父元素（希望比主体更具体），然后在对 .on() 的调用中指定该元素。因此，在您的情况下，您可能想尝试，`$('body').on('click','button', ...)`.

哦，顺便说一句，从 jQuery 1.7 开始，.on() 和 .off() 方法更适合在 .bind() 和 .unbind() 元素上附加和删除事件处理程序。

# c# - 比较网络流读取的字符串

> ID：10367114
> 
> 赞同：0
> 
> 时间：2012-04-28T20:07:27.703
> 
> 标签：c#, sockets, stream

我正在编写一个请求用户输入命令的 telnet 管理系统。

我可以使用网络流从套接字读取它，但是当我将字符串与另一个字符串进行比较时，我找不到匹配项，我尝试了正则表达式 ..

所以这是我的代码：

```
while (!bit.Contains("\r") && !bit.Contains("\n") && !bit.Contains("."))
{
    bit = Encoding.ASCII.GetString(buffer);
    outputString += bit;
    stream.Read(buffer, 0, 1);
}

 // Read till user input ENTER

if ( outputString == "$edit" )
     // do something 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:18:04.547

很明显，您必须移动循环的第一行：

```
// init bit variable here
while (!bit.Contains("\r") && !bit.Contains("\n") && !bit.Contains("."))
{
    outputString += bit;
    stream.Read(buffer, 0, 1);

    bit = Encoding.ASCII.GetString(buffer);
} 
```

# php - 如何使用 preg_replace() 返回匹配值

> ID：10367117
> 
> 赞同：0
> 
> 时间：2012-04-28T20:07:50.267
> 
> 标签：php, regex

请问怎么做？

```
<?php
$string = '<inc="file.php">';
return preg_replace('#<inc\s*="\s*([a-zA-Z0-9\_]+)\">#',include("$1"),$string);
?> 
```

输出是返回 $1

我需要返回包含 file.php

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T20:11:18.277

如果您有 PHP 5.3 或更高版本：

```
<?php
$string = '<inc="file.php">';
return preg_replace_callback('#<inc\s*="\s*([a-zA-Z0-9\_]+)\">#', function($matches) {
    return include $matches[1];
}, $string);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:14:25.727

我不确定您要做什么，但请尝试使用`preg_match`over preg_replace。

如果您使用它，它会将匹配项收集到一个数组中，如下所示：

`preg_match('#<inc\s*="\s*([a-zA-Z0-9\_]+)\">#', $string, $matches);`

然后将匹配项存储在`$matches`数组中。然后，您可以使用`foreach`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T20:15:23.003

我认为应该是

```
return preg_replace('#<inc\s*="\s*([a-zA-Z0-9\_]+)\">#','include("'.$1.'")',$string); 
```

第二个参数应该是一个字符串。

# android - 带有 calendarView 的 Android 自我管理器

> ID：10367118
> 
> 赞同：2
> 
> 时间：2012-04-28T20:07:54.860
> 
> 标签：android, calendar

嗨，我正在尝试创建将响应 CalendarView 上单击日期的应用程序，将获取所选日期并将其显示在 textview 中，这是我的代码：

```
public class MyOrganiser1Activity extends Activity {
/** Called when the activity is first created. */
TextView dateView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    CalendarView calendas = (CalendarView)findViewById(R.id.calendarView1);

    dateView = (TextView)findViewById(R.id.dateView1);

    calendas.setOnDateChangeListener( new CalendarView.OnDateChangeListener() {
        private GregorianCalendar calendar;

        public void onSelectedDayChange(CalendarView view, int year, int month, int dayOfMonth) {
            this.calendar = new GregorianCalendar(year, month, dayOfMonth);

            SimpleDateFormat ss = new SimpleDateFormat("yyyy-MM-dd");
            String currentdate= ss.format(calendar);
            dateView.setText(currentdate);
         }
      }); 
} 
```

}

我的问题是：一旦我运行这段代码；我的应用程序崩溃。调试信息：“找不到 DataSetObservable.class 的 android.java”。然而; 我什至不知道上面的代码是否正确。

# r - R过滤掉一个子集

> ID：10367120
> 
> 赞同：-2
> 
> 时间：2012-04-28T20:08:02.507
> 
> 标签：r

我有一个 data.frame A 和一个 data.frame B ，其中包含 A 的子集

如何创建一个 data.frame C，它是 data.frame A 并且排除了 data.frame B？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:23:25.227

获取 A 中不在 B 中的行

```
C = A[! data.frame(t(A)) %in% data.frame(t(B)), ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T21:43:25.580

如果这个 B 数据集确实是第一个数据集的嵌套版本，则必须首先创建创建该数据集的索引。恕我直言，我们不应该讨论数据集之间的差异，而是否定最初创建 B 数据集的原始索引。这是我的意思的一个例子：

```
A <- mtcars
B <- mtcars[mtcars$cyl==6, ]
C <- mtcars[mtcars$cyl!=6, ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T20:44:34.497

如果 B 确实是 A 的子集，您可以检查：

```
if(!identical(A[rownames(B), , drop = FALSE], B)) stop("B is not a subset of A!") 
```

然后您可以按行名过滤：

```
C <- A[!rownames(A) %in% rownames(B), , drop = FALSE] 
```

或者

```
C <- A[setdiff(rownames(A), rownames(B)), , drop = FALSE] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T20:30:21.397

```
A <- data.frame(x = 1:10, y = 1:10)
#Random subset of A in B
B <- A[sample(nrow(A),3),]
#get A that is not in B
C <- A[-as.integer(rownames(B)),] 
```

相对于 mplourde 的答案的性能测试：

```
library(rbenchmark)
f1 <- function() A[- as.integer(rownames(B)),]
f2 <- function() A[! data.frame(t(A)) %in% data.frame(t(B)), ]
benchmark(f1(), f2(), replications = 10000, 
          columns = c("test", "elapsed", "relative"),
          order = "elapsed"
          )

  test elapsed relative
1 f1()   1.531   1.0000
2 f2()   8.846   5.7779 
```

查看行名的速度大约快 6 倍。两次转置调用会在计算上变得昂贵。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T05:59:01.533

这是两种`data.table`节省内存和时间的解决方案

```
render_markdown(strict = T)
library(data.table)
# some biggish data
set.seed(1234)
ADT <- data.table(x = seq.int(1e+07), y = seq.int(1e+07))

.rows <- sample(nrow(ADT), 30000)
# Random subset of A in B
BDT <- ADT[.rows, ]

# set keys for fast merge
setkey(ADT, x)
setkey(BDT, x)
## how CDT <- ADT[-ADT[BDT,which=T]] the data as `data.frames for fastest
## alternative
A <- copy(ADT)
setattr(A, "class", "data.frame")
B <- copy(BDT)
setattr(B, "class", "data.frame")
f2 <- function() noBDT <- ADT[-ADT[BDT, which = T]]
f3 <- function() noBDT2 <- ADT[-BDT[, x]]
f1 <- function() noB <- A[-as.integer(rownames(B)), ]

library(rbenchmark)
benchmark(base = f1(),DT = f2(), DT2 = f3(), replications = 3)

##   test replications elapsed relative user.self sys.self 
## 2   DT            3    0.92    1.108      0.77     0.15       
## 1  base           3    3.72    4.482      3.19     0.52        
## 3  DT2            3    0.83    1.000      0.72     0.11 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-28T21:22:41.667

这不是最快的，并且可能非常慢，但它是 mplourde 的替代方案，它考虑了行数据，并且应该适用于 flodel 批评的混合数据。它依赖于 qdap 包中的 paste2 功能，该功能尚不存在，因为我计划在下个月或 2 个月内发布它：

**粘贴2功能：**

```
paste2 <- function(multi.columns, sep=".", handle.na=TRUE, trim=TRUE){

    if (trim) multi.columns <- lapply(multi.columns, function(x) {
            gsub("^\\s+|\\s+$", "", x)
        }
    )

    if (!is.data.frame(multi.columns) & is.list(multi.columns)) {
        multi.columns <- do.call('cbind', multi.columns)
      }

    m <- if(handle.na){
                 apply(multi.columns, 1, function(x){if(any(is.na(x))){
                       NA
                 } else {
                       paste(x, collapse = sep)
                 }
             }
         )   
         } else {
          apply(multi.columns, 1, paste, collapse = sep)
    }
    names(m) <- NULL
    return(m)
} 
```

**# Flodel的混合数据集：**

```
A <- data.frame(x = 1:4, y = as.character(1:4)); B <- A[1:2, ] 
```

**# 我的方法：**

```
A[!paste2(A)%in%paste2(B), ] 
```

# jquery - 带有ajaxStop的jQuery AJAX中的递归调用函数

> ID：10367126
> 
> 赞同：2
> 
> 时间：2012-04-28T20:09:11.817
> 
> 标签：jquery, ajax

我有一个功能：

```
function primaj(){
$('#tmp').load('msg1.php');
$("#tmp").ajaxStop(function(){
        //do some code
   primaj();
  });
} 
```

我期望的是加载请求运行，并且当它完成再次调用该函数时。但是我看到每次调用该函数后，下一个调用次数都会翻倍，从 1 到 2 到 4 到 8 等等......

我的意图是对服务器进行持续加载调用，但如果我使用 setInterval 命令（有效），有时服务器需要更长的时间来响应，因此该函数是通过它自己调用的。

有没有办法知道ajax加载命令何时停止，然后再次调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:22:15.493

这很简单：

```
function primaj() {
    $('#tmp').load('msg1.php', primaj);
}​ 
```

您所做的是附加一个新的回调以在以后**每次**ajax 完成后运行。
虽然我的代码所做的是将回调设置为在**当前**ajax 完成后运行。

# ios - 尝试对多对多关系进行分组时出现“setPropertiesToFetch 中的多对多关系无效”错误

> ID：10367127
> 
> 赞同：5
> 
> 时间：2012-04-28T20:09:58.693
> 
> 标签：ios, uitableview, core-data, many-to-many, nsfetchedresultscontroller

我是 CoreData 的新手，我正在为未来的项目使用它。

我正在尝试显示按他/她的歌手分组的歌曲列表。一首歌可以被很多歌手唱，一个歌手可以唱很多首歌:-) 那是我的模型：

![在此处输入图像描述](../Images/ac912366cc11383d02d0ffc64e05f043.png)

然后我有一个多对多的关系。

当我尝试将 sectionNameKeyPath 设置为 songSingers.name 时，它​​会因错误而崩溃：

```
 'NSInvalidArgumentException', reason: 'Invalid to many relationship in setPropertiesToFetch: (songSingers.name)' 
```

为什么我收到此错误？下面是一些代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self addDummyData];

    NSError *anyError = nil;
    BOOL success = [self.fetchedResultsController performFetch:&anyError];

    if( !success ) NSLog(@"Error = %@", anyError);
}

- (void)addDummyData
{
    [self deleteAllObjects:@"Song"];
    [self deleteAllObjects:@"Singer"];
    [self deleteAllObjects:@"Lyric"];

    // Lyrics
    Lyric *l = [NSEntityDescription insertNewObjectForEntityForName:@"Lyric" inManagedObjectContext:managedObjectContext]; 
    l.name = @"Lyric 1";

    // Songs
    Song *s = [NSEntityDescription insertNewObjectForEntityForName:@"Song" inManagedObjectContext:managedObjectContext];
    s.name = @"Song 1";

    Song *s2 = [NSEntityDescription insertNewObjectForEntityForName:@"Song" inManagedObjectContext:managedObjectContext];
    s2.name = @"Song 2";

    Song *s3 = [NSEntityDescription insertNewObjectForEntityForName:@"Song" inManagedObjectContext:managedObjectContext];
    s3.name = @"Song 3";

    // Singers
    Singer *sg = [NSEntityDescription insertNewObjectForEntityForName:@"Singer" inManagedObjectContext:managedObjectContext];
    sg.name = @"Singer 1";

    Singer *sg2 = [NSEntityDescription insertNewObjectForEntityForName:@"Singer" inManagedObjectContext:managedObjectContext];
    sg2.name = @"Singer 2";

    // Relations
    sg.singerSongs  = [NSSet setWithObjects:s, s2, nil];
    sg2.singerSongs = [NSSet setWithObjects:s2, s3, nil];

    s.songSingers   =  [NSSet setWithObjects:sg, nil];    
    s2.songSingers  =  [NSSet setWithObjects:sg, sg2, nil];
    s3.songSingers = [NSSet setWithObjects:sg2, nil];    

    s.songLyric = l;
    s2.songLyric = l;

    NSError *anyError = nil;
    BOOL success = [managedObjectContext save:&anyError];
    if(!success)
    {
        NSLog(@"Error: %@", anyError);
    }

}
- (NSFetchedResultsController *)fetchedResultsController {
    if (!fetchedResultsController) 
    {
        NSFetchRequest *request = [[NSFetchRequest alloc] init];

        [request setEntity:[NSEntityDescription entityForName:@"Song" 
                                       inManagedObjectContext:managedObjectContext]];

        NSSortDescriptor *nameDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" 
                                                                       ascending:YES];
        NSSortDescriptor *singerDescriptor = [[NSSortDescriptor alloc] initWithKey:@"songSingers.name" 
                                                                       ascending:YES];

                                                                         ascending:YES];        

        [request setSortDescriptors:[NSArray arrayWithObjects:nameDescriptor,nil]];

        NSString *sectionNameKeyPath = @"songSingers.name";

        NSFetchedResultsController *myFetchedResultsController
            = [[NSFetchedResultsController alloc] initWithFetchRequest:request 
                                              managedObjectContext:managedObjectContext
                                                sectionNameKeyPath:sectionNameKeyPath 
                                                         cacheName:nil];

        myFetchedResultsController.delegate = self;
        self.fetchedResultsController = myFetchedResultsController;
    }

    return fetchedResultsController;
}
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Singer" 
                                              inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];

    NSError *anyError = nil;
    NSArray *fetchedObjects = [managedObjectContext executeFetchRequest:fetchRequest 
                                                                  error:&anyError];
    Singer *sg = [fetchedObjects objectAtIndex:section];
    return sg.name; 

} 
```

您可以看到我认为定义明确的虚拟数据“addDummyData”：^P

*   歌曲 1 和 2 是给歌手 1 的
*   歌曲 2 也适用于歌手 2
*   歌曲 3 是给歌手 2 的

谢谢

# java - Hibernate 4不创建表

> ID：10367128
> 
> 赞同：1
> 
> 时间：2012-04-28T20:10:02.133
> 
> 标签：java, spring-3, mysql5, hibernate-4.x

我正在使用 MySQL5，我的 applicationContext.xml 具有以下 bean：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/ems" />
    <property name="username" value="root" />
    <property name="password" value="admin" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hbm2ddl.auto">create</prop>
            <prop key="connection.url">jdbc:mysql://localhost:3306/ems</prop>
            <prop key="connection.username">root</prop>
            <prop key="connection.password">admin</prop>
            <prop key="connection.driver_class">com.mysql.jdbc.Driver</prop>
        </props>
    </property>
    <property name="mappingDirectoryLocations" value="/WEB-INF/resources/mappings" />
</bean> 
```

我用 MySQL Workbench 创建了一个名为“ems”的模式，但是当我在控制台中部署应用程序时，它会打印：

```
01:22:54,823 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-2) HHH000206: hibernate.properties not found
01:22:54,827 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-2) HHH000021: Bytecode provider name : javassist
01:22:54,841 INFO  [org.hibernate.cfg.Configuration] (MSC service thread 1-2) HHH000220: Reading mappings from file: C:\Development\JBoss-AS-7.1.0.Final\standalone\tmp\vfs\tempf3cbb10675b49730\EMSApplication.war-43fc183fcacfc03f\WEB-INF\resources\mappings\User.hbm.xml
01:22:56,884 INFO  [org.hibernate.dialect.Dialect] (MSC service thread 1-2) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
01:22:56,892 INFO  [org.hibernate.engine.jdbc.internal.LobCreatorBuilder] (MSC service thread 1-2) HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
01:22:56,901 INFO  [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (MSC service thread 1-2) HHH000399: Using default transaction strategy (direct JDBC transactions)
01:22:56,908 INFO  [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (MSC service thread 1-2) HHH000397: Using ASTQueryTranslatorFactory 
```

控制台也不例外。但是在模式 ems 中，表是空的，这意味着没有创建表。

User.hbm.xml 位于指定位置，即：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
  "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
  "http://www.jboss.org/dtd/hibernate/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="app.dev.ems.data.model.User" table="USER">
        <id name="id" column="ID">
            <generator class="native"/>         
        </id>
    </class>
</hibernate-mapping> 
```

User.java 也存在。

我正在使用 hibernate-core-4.1.1.Final 和 spring-orm-3.1.1.RELEASE。

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T21:02:58.190

我犯了一个错误：`<prop key="hbm2ddl.auto">create</prop>`应该是`<prop key="hibernate.hbm2ddl.auto">create</prop>`

# google-drive-api - 在 Google 云端硬盘中移动或浏览照片和电子邮件附件

> ID：10367132
> 
> 赞同：0
> 
> 时间：2012-04-28T20:10:47.650
> 
> 标签：google-drive-api

我们过去将文件作为附件保存在电子邮件中，并将图片保存在 Picasa 网络相册中。我们也可以从 Google Drive 中浏览这些内容吗？如果没有，我们可以将这些文件移动到我们的云端硬盘吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:04:18.497

这个问题不是关于 Google Drive SDK，而是关于 Google Drive 用户界面。这不是一个编程问题，因此不适合 Stack Overflow。

也就是说，我会仔细检查这是否是我们正在使用 Google Drive 开发的一项功能。

# mysql - UTF-8：在数据库中正确显示，但不是在 HTML 中，尽管 utf-8 字符集

> ID：10367133
> 
> 赞同：10
> 
> 时间：2012-04-28T20:10:48.477
> 
> 标签：mysql, html, utf-8, character-encoding

我使用 MySQL 5.1 并从 UTF-8 解码的 txt 文件中加载大约 270 万行到一个表中，该表本身被声明为`utf8_unicode_ci`，并且所有字符字段都被声明为`utf8_unicode_ci`，使用`LOAD DATA INFILE`...

在数据库本身中，字符似乎都是正确的，一切看起来都不错。但是，当我使用 php 打印它们时，字符显示为???，尽管我在 HTML 头中使用了 utf-8 声明：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
... 
```

在另一个表（使用 utf-8）中，我从提交的表单中插入文本，这些字符在数据库中奇怪地出现，但是当我使用`SELECT...`.

所以，我想知道：怎么了？字符是否`UTF-8`在数据库中正确显示或奇怪但当你`SELECT`再次显示它们时它们是否正常？或者问题出在哪里（将文件加载到数据库、HTML 或两者之间）？

非常感谢您的任何提示或建议！:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T15:32:34.623

注意：[MySQL 的`utf8`字符集是有限的，它只支持 BMP 中不超过三个字节的 Unicode 字符。你应该`utf8mb4`改用。](https://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)

*   确保在连接后将命令发送到 MySQL，然后再运行任何 MySQL 查询。~~`SET NAMES utf8`~~ `SET NAMES utf8mb4`
*   确保您的页面实际呈现为 utf-8（如果有 HTTP 标头[`Content-Type: text/html;charset=iso-8859-1`](http://lachy.id.au/log/2006/01/content-type)，浏览器不同意哪个应该获胜）。
*   阅读这篇文章：[在 Web 应用程序中从头到尾处理 Unicode](http://kunststube.net/frontback/)（但请记住在涉及 MySQL 的地方替换）`utf8`。`utf8mb4`

如果 phpMyAdmin 将您输入的数据显示为正确的 Unicode 文本，那么我敢打赌，您`SET NAMES utf8`在连接后没有这样做。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T23:02:22.863

连接到数据库后尝试使用此类代码，但在您接收数据之前

```
$db->query('set character_set_client=utf8');
$db->query('set character_set_connection=utf8');
$db->query('set character_set_results=utf8');
$db->query('set character_set_server=utf8'); 
```

# c# - 事件不是字段 - 我不明白

> ID：10367137
> 
> 赞同：52
> 
> 时间：2012-04-28T20:11:24.610
> 
> 标签：c#, events, field

在[深入的 C#](https://rads.stackoverflow.com/amzn/click/com/1935182471)（迄今为止的一本优秀书籍）中，Skeet 解释了*事件不是字段*。我多次阅读本节，但我不明白为什么这种区别有任何区别。

我是那些混淆事件和委托实例的开发人员之一。在我看来，它们是一样的。两者都不只是一种间接形式吗？我们可以同时多播。一个事件被设置为一个字段作为速记......当然。但是，我们正在添加或删除处理程序。将它们堆叠起来以在事件触发时调用。我们不是对委托做同样的事情，将它们堆叠起来并调用调用吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-29T00:09:14.243

其他答案基本上是正确的，但这是另一种看待它的方式：

> 我是那些混淆事件和委托实例的开发人员之一。在我看来，它们是一样的。

想起一句老话，见树不见林。我所做的区别是事件比委托实例的字段处于更高的“语义级别”。一个事件告诉该类型的消费者“嗨，我是一个喜欢在发生某事时告诉你的类型”。类型来源一个事件；这是其公共合同的一部分。

作为一个实现细节，该类如何选择跟踪谁有兴趣收听该事件，以及告诉订阅者事件正在发生的内容和时间，是该类的工作。它通常使用多播委托来执行此操作，但这是一个实现细节。这是一个非常常见的实现细节，将两者混淆是合理的，但我们确实有两个不同的东西：公共表面和私有实现细节。

类似地，属性描述了一个对象的语义：一个客户有一个名字，所以一个客户类有一个 Name 属性。您可能会说“他们的名字”是客户的属性，但您永远不会说“他们的名字”是客户的*字段*；这是特定类的实现细节，而不是关于业务语义的事实。属性通常实现为字段是类机制的私有细节。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-04-28T20:12:57.433

属性也不是字段，尽管它们感觉像它们。它们实际上是一对具有特殊语法的方法（getter 和 setter）。

事件类似地是一对具有特殊语法的方法（订阅和取消订阅）。

在这两种情况下，您的类中通常都有一个私有的“支持字段”，它保存由 getter/setter/subscribe/unsubscribe 方法操作的值。并且编译器为您生成支持字段和访问器方法的属性和事件都有一个自动实现的语法。

目的也是相同的：属性提供对字段的受限访问，其中一些验证逻辑在存储新值之前运行。并且事件提供对委托字段的受限访问，其中消费者只能订阅或取消订阅，不能读取订阅者列表，也不能一次替换整个列表。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-28T20:25:23.340

让我们考虑两种声明事件的方式。

要么使用显式`add`/`remove`方法声明事件，要么声明不使用此类方法的事件。

换句话说，您像这样声明事件：

```
public event EventHandlerType EventName
{
    add
    {
        // some code here
    }
    remove
    {
        // some code here
    }
} 
```

或者你这样声明：

```
public event EventHandlerType EventName; 
```

问题是，在某些方面它们是同一件事，而在其他方面，它们是完全不同的。

从外部代码的角度来看，即......发布事件的类之外的代码，它们是完全相同的东西。要订阅事件，请调用方法。要取消订阅，您需要调用不同的方法。

不同之处在于，在上面的第二个示例代码中，这些方法将由编译器为您提供，但是，它仍然是这样的。要订阅事件，您需要调用一个方法。

但是，在 C# 中执行此操作的语法是相同的，您可以执行以下任一操作：

```
objectInstance.EventName += ...; 
```

或者：

```
objectInstance.EventName -= ...; 
```

所以从“外部角度”来看，这两种方式并没有什么不同。

但是，在班级内部，却有所不同。

如果您尝试访问类中的`EventName`*标识符*，您实际上指的`field`是支持该属性的 ，**但前提是您使用未显式声明`add`/`remove`方法**的语法。

一个典型的模式是这样的：

```
public event EventHandlerType EventName;

protected void OnEventName()
{
    var evt = EventName;
    if (evt != null)
        evt(this, EventArgs.Empty);
} 
```

在这种情况下，当您引用 时`EventName`，您实际上是在引用保存类型*委托*`EventHandlerType`的字段。

但是，如果您已显式声明`add`/`remove`方法，则在类内部引用`EventName`标识符就像在类外部一样，因为编译器不能保证它知道存储订阅的字段或任何其他机制.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-28T20:25:48.007

事件是委托的*访问器。*就像属性是字段的访问器一样。使用完全相同的实用程序，它可以防止代码与委托对象混淆。就像属性有 get 和 set 访问器一样，事件也有 add 和 remove 访问器。

它的行为确实与属性有些不同，如果您不自己编写 add 和 remove 访问器，那么编译器会自动生成它们。包括一个存储委托对象的私有支持字段。类似于自动属性。

你不经常这样做，但这肯定不是不寻常的。.NET 框架通常这样做，例如 Winforms 控件的事件存储在[EventHandlerList](http://msdn.microsoft.com/en-us/library/system.componentmodel.eventhandlerlist.aspx)中，添加/删除访问器通过其 AddHandler() 和 RemoveHandler() 方法操作该列表。优点是*所有*事件（有很多）只需要类中的一个字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T10:14:05.810

我可以添加到以前的答案中，委托可以在命名空间范围内（类外）声明，事件只能在类内声明。这是因为委托是一个类！

另一个区别是，对于事件，包含类是唯一可以触发它的类。您可以通过包含类订阅/取消订阅它，但不能触发它（与委托相反）。因此，也许您现在可以理解为什么约定是将其包装在`protected virtual OnSomething(object sender, EventArgs e)`. 后代能够覆盖触发的实现。

# javascript - KineticJS onFrame 缓慢且生涩

> ID：10367140
> 
> 赞同：1
> 
> 时间：2012-04-28T20:11:45.027
> 
> 标签：javascript, kineticjs

基本上，如果我使用`stage.onFrame(function(frame){animationLayer.draw()});`然后我会得到一个生涩的动画，但如果我做类似`setInterval(draw, 25);`然后`animationLayer.draw();`在绘图中，那么我会得到一个很好的平滑动画。

我是在 KineticJS 上做错了什么，还是只是性能有点糟糕？我只是在旋转一个矩形，但它看起来很生涩。

chrome 比 firefox 更糟糕，但 firefox 仍然不是完全流畅。

任何人有任何想法为什么？

```
 var debug, stage, animationLayer;
    var sw, sh;
    var spinRect;

    var blobArray = [];

    window.onload = function() {
        debug = document.getElementById('debug');

        stage = new Kinetic.Stage({container: "kineticdiv", width: 700, height: 400});
        animationLayer = new Kinetic.Layer();    
        sw = stage.attrs.width;
        sh = stage.attrs.height;

        spinRect = new Kinetic.Rect({
            x: sw/4*3, 
            y: sh/2,
            width: 50, 
            height: 50,
            fill: "#eee", 
            stroke: "#777",
            strokeWidth: 2,
            centerOffset: {
                x: 25,
                y: 25
            }
        });

        var centerRect = new Kinetic.Rect({
            x: sw/4-5, 
            y: sh/2-5,
            width: 10, 
            height: 10,
            fill: "cyan",
            stroke: "black",
            strokeWidth: 2
        });

        animationLayer.add(spinRect);
        animationLayer.add(centerRect);
        stage.add(animationLayer);

        setInterval(update, 25); // 33 ms = 30 fps, 25 ms = 40 fps

        stage.onFrame(function(frame){animationLayer.draw()});
        stage.start();
    };

    function update()
    {
        spinRect.rotate(0.03); //Math.PI / 100); // even removed this for less calculations
        // animationLayer.draw() // smoother if I use this instead
    } 
```

谢谢

**编辑：**原来 Chrome 是这里的一些问题的罪魁祸首，最近的更新造成了一些麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T03:24:05.580

v3.9.4 将于今天晚些时候发布，其中有一些重要的动画和过渡改进。你觉得这个动画流畅吗？

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-animate-position-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-animate-position-tutorial/)

此外，如果您同时运行许多其他东西，动画可能会很生涩。看看这个使用 requestAnimFrame 的例子，看看这是否流畅（纯 JS，没有库）：

[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

# c# - C# WPF WebBroswer 控件：如何使用 JavaScript

> ID：10367143
> 
> 赞同：2
> 
> 时间：2012-04-28T20:12:04.813
> 
> 标签：c#, javascript, .net, wpf, webbrowser-control

我正在使用 WPF WebBrowser 控件，我想访问一些 JavaScript 函数，但存在问题。

我可以使用 InvokeScript 并执行 browser.InvokeScript("alert", "Hello");q 但是如何通过 ID 或 TAG 获取元素以及如何将该元素分配给 javascript var？

示例：Javascript：var elements = document.getElementsByTagName("embed"); 元素[0].doSomething();

C#：如何？

我尝试了一切，但没有任何效果。谁能帮我 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:10:45.313

很晚的答案，但如果其他人需要它：

直接 C#：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementsbytagname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementsbytagname.aspx)

```
HtmlElementCollection elems = webBrowser1.Document.GetElementsByTagName("embed");
foreach (HtmlElement elem in elems)
    {
        elem.InvokeMember("doSomething");
    } 
```

替代方案：http: [//msdn.microsoft.com/en-us/library/a0746166](http://msdn.microsoft.com/en-us/library/a0746166)

基本上你应该在 JS 中创建一个函数：

```
var myCustomFunc = function(tagName) {
  var elements = document.getElementsByTagName(tagName); elements[0].doSomething();
} 
```

然后从 C# 调用它

```
webBrowser1.Document.InvokeScript("myCustomFunc ", new String[] { "embed" }); 
```

变量“tagName”被替换为“embed”

# mysql - 使用mysql进行跨表删除

> ID：10367147
> 
> 赞同：1
> 
> 时间：2012-04-28T20:13:06.950
> 
> 标签：mysql, join, sql-delete

当我执行以下查询时：

```
DELETE FROM wp_postmeta 
    WHERE post_id 
        NOT IN (
            SELECT post_id 
            FROM wp_postmeta a 
            INNER JOIN wp_sl_posts b 
            ON a.post_id = b.id
            ) 
```

我收到一条错误消息：

```
You can't specify target table 'wp_postmeta' for update in FROM clause 
```

我有点知道为什么，但我真的不知道执行操作所需的语法。我已经根据这里和其他地方的答案尝试了一些不同的选择，但不是运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T20:17:17.940

尝试

```
DELETE wp_postmeta 
FROM wp_postmeta 
left outer JOIN wp_sl_posts b ON a.post_id = b.id
WHERE b.post_id is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:36:20.980

这基本相同，应该可以工作：

```
DELETE FROM wp_postmeta
WHERE post_id NOT IN (SELECT id FROM wp_sl_posts) 
```

# uml - 序列图应该由View对象、DB对象等组成？

> ID：10367149
> 
> 赞同：0
> 
> 时间：2012-04-28T20:13:29.127
> 
> 标签：uml

我阅读了很多文章，看到了很多图像，但我无法回答 View 类或 DB 类的对象应该包含在序列图中还是应该更概括的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:52:58.470

与序列中包含的操作设计相关的所有类都应该存在。

把太多的东西概括化，你就有可能错过重要的细节。我倾向于在我的序列中包含从 UI 元素一直到数据库的引用。如果您担心 View 和 DB 不固定，使用具体的 refs 会使您的图表不正确。这表明设计需要仔细观察！也许视图和中间层以及数据库和中间层之间的契约需要更好地定义。然后，您所要做的就是在通用图表中包含对合同的引用，并在每个实现的单独图表中包含更多细节。

[您可以在本介绍中看到许多人的深度。](http://www.agilemodeling.com/artifacts/sequenceDiagram.htm)

请记住，UML 应该是关于想法/设计的良好沟通。尽可能以最简单的方式传达所需的所有信息！

# objective-c - NSView 设置框架问题

> ID：10367151
> 
> 赞同：0
> 
> 时间：2012-04-28T20:13:43.203
> 
> 标签：objective-c, xcode, cocoa

我不知道为什么这段代码不起作用，但希望修复很简单，我希望有人能提供帮助。

我有 2 个函数，enterFullScreen 和 exitFullScreen。

在enterFullScreen方法中，我给Window的frame设置了一个NSView的frame，有全屏的效果，这就是我想要的。在此方法中，我存储旧帧，以便在 exitFullScreen 方法中可以将它们重新设置，但这不起作用。它没有任何效果。代码如下：

```
NSView oldView, oldViewContainer;

- (void) enterFullScreen:(NSView*)newView
{
    // Store original views
    oldView = newView;
    oldViewContainer = _newViewContainer;

    // Set new views to fit window
    [_newViewContainer setFrame:[_window.contentView frame]];    
    [newView setFrame:[_window.contentView frame]];
}

- (void) exitFullScreen:(NSView*)newView
{
    // Restore old views
    [_newViewContainer setFrame:[oldViewContainer frame]];
    [newView setFrame:[oldView frame]];
} 
```

输入全屏方法完全按预期工作，但由于某种原因，我无法将 2 个视图设置回其原始大小/位置。

我不知道是因为我不能只存储整个视图，还是原点导致问题？

我已经尝试了所有组合，如果有人可以提供帮助，我将非常感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:24:50.457

您不想将 oldView 设置为 newView，这会使它们成为相同的视图，因此当您将 newView 调整为全屏时，oldView 的框架也设置为全屏。您要保存旧框架，而不是视图，因此： oldFrame = newView.frame; （存储原始帧）

那么当你缩小尺寸时，

[新视图 setFrame:oldFrame];

# jsf - JSF 身份验证：无法拦截错误消息

> ID：10367152
> 
> 赞同：2
> 
> 时间：2012-04-28T20:13:46.343
> 
> 标签：jsf, login, primefaces, j-security-check

我开发了一个简单的登录表单，用于我的 JSF + PrimeFaces 页面：

```
<form action="j_security_check" method="post"> 
    <p:dialog modal="true" header="Login" widgetVar="loginDlg">
        <h:panelGrid columns="3" cellpadding="5">  
            <h:outputLabel for="j_username">Username:</h:outputLabel> 
            <h:inputText id="j_username" required="true" /> 
            <h:message for="j_username" /> 
            <h:outputLabel for="j_password">Password:</h:outputLabel> 
            <h:inputSecret id="j_password" required="true" /> 
            <h:message for="j_password" /> 
            <br /> 
            <h:commandButton value="Login" /> 
        </h:panelGrid>
    </p:dialog>                
</form> 
```

尝试使用空密码，但组件未捕获缺少的密码（这是必需的）`h:message`。我也转而`p:commandButton`认为问题可能出在按钮的 Ajax 行为中，但由于 PrimeFaces 抱怨 CommandButton 不在表单元素内，因此未呈现页面。容器抛出的异常是：

```
com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Access denied on empty password for user pippo 
```

总结一下，我有两个问题：

1.  为什么在提交表单之前丢失的密码不会产生消息？
2.  如何捕获 LoginException 并在对话框中显示错误消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T04:30:34.817

`j_security_check`请求由 Web 容器处理，而不是由 JSF 。这就解释了这 `required="true"`行不通。仅当您在与命令按钮关联的操作方法中使用 JSF`<h:form>`和编程登录时，它才有效。`HttpServletRequest#login()`

您可以做的最好的事情是配置一个`<form-error-page>`指向`web.xml`与`<form-login-page>`. 然后您可以检查请求是否已`j_security_check`自行转发，这意味着发生了登录错误。

```
<h:panelGroup rendered="#{requestScope['javax.servlet.forward.servlet_path'] == '/j_security_check'}">
    <h:outputText value="Unknown login, please try again" styleClass="error" />
</h:panelGroup> 
```

使用它而不是`<h:message>`.

至于为什么`<p:commandButton>`抱怨没有表格只是因为你没有使用`<h:form>`.

* * *

**与具体问题无关**，那个`<form>`（或者`<h:form>`当你决定切换到程序登录时）可以更好地放置在 的主体中`<p:dialog>`，而不是外部。JS的`<p:dialog>`can 被重新定位到 body 的末尾，这将导致它不再是一个表单。

# django - Tweepy 和流媒体

> ID：10367153
> 
> 赞同：0
> 
> 时间：2012-04-28T20:13:58.853
> 
> 标签：django, twitter, tweepy

我在玩 django 和 tweepy，我真的不知道如何使用[这个](http://answers.oreilly.com/topic/2605-how-to-capture-tweets-in-real-time-with-twitters-streaming-api/)关于 Streaming with django 的示例

我如何将流数据传递给我的上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:56:45.920

我建议您调查使用 websockets 来处理这种类型的事情，使用 django-websocket（或类似的东西）将链接的推文流脚本作为单独的服务运行，并将内容推送回打开的 html5 websocket。

# iis - 子虚拟目录中的 IIS URL 重写未重定向

> ID：10367154
> 
> 赞同：7
> 
> 时间：2012-04-28T20:14:00.147
> 
> 标签：iis, url-rewrite-module

我在“默认网站\orchard”上安装了 Asp.NET 应用程序...可在[http://localhost/orchard](http://localhost/orchard)访问，并且我想使用 URL 重写。我添加了规则：

```
<rewrite>
    <rewriteMaps>
        <rewriteMap name="Blogger">
            <add key="/aaa" value="/tags/tag1" />
        </rewriteMap>
    </rewriteMaps>
    <rules>
        <clear />
        <rule name="Rewrite rule1 for Blogger" stopProcessing="true">
        <match url=".*" />
            <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                <add input="{Blogger:{REQUEST_URI}}" pattern="(.*)" />
            </conditions>
            <action type="Redirect" url="{C:1}" appendQueryString="false" redirectType="Permanent" />
        </rule>
    </rules>
</rewrite> 
```

但是当我转到[http://localhost/orchard/aaa](http://localhost/orchard/aaa)时，返回错误 404 而不是重定向到[http://localhost/orchard/tags/tag1](http://localhost/orchard/tags/tag1)。

当我将我的 Web 应用程序放在网站重定向工作的根文件夹中时。[http://localhost/aaa](http://localhost/aaa)被重定向到[http://localhost/tags/tag1](http://localhost/tags/tag1)。

我做错了什么？

感谢帮助。

# javascript - 如何在没有 HTML 的情况下调用 javascript 中的函数？

> ID：10367164
> 
> 赞同：1
> 
> 时间：2012-04-28T20:15:19.070
> 
> 标签：javascript

这是功能

```
function seeHTML(elem){
var htmlTxt=document.getElementsByTagName('html')[0].innerHTML.toString();
elem.value=htmlTxt;
} 
```

打电话给我使用 HTML

```
<input type="button" value="See HTML" onclick="seeHTML(txt)"> 
```

如何从另一个函数调用它作为 document.write

```
document.write(seeHTML(txt)); 
```

-- 我是一个 javascript 初学者

但是我尝试了 document.write 但它打印了函数数据本身，它不使用该函数，如何要求它使用它然后打印返回（结果）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:20:19.337

```
function foo(element) {
    seeHTML(element);
}

function seeHTML(element) {
}

foo(document.getElementsById('element')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:27:35.350

在 JavaScript 代码中：

```
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", call_your_function_here);
</script> 
```

这里我们创建了一个事件监听器，这意味着当文档完全加载时，function() 将被调用，使用相同的方式可以将任何事件监听器添加到任何 DOM 对象，例如。你有一个按钮`id="test"`，`var btest = document.getElementById('test');`然后

```
btest.addEventListener('click', function() { //execute code if btest object was clicked }); 
```

最重要的是，您应该在文档完全加载时调用您的函数，因此将 替换为`call_your_function_here()`您的函数名称，如果您想引用您的函数嵌入的同一个按钮，请使用以下语法来引用按钮 DOM 对象：

```
var buttonObj = document.getElementById(buttonID); 
```

然后将 buttonObj 提供给函数的参数。

# jquery - 我正在使用这个滚动书签 js 脚本，为什么我的目标 ID 没有排队？

> ID：10367165
> 
> 赞同：0
> 
> 时间：2012-04-28T20:15:22.847
> 
> 标签：jquery

我在这个脚本上使用选项 B：[http ://www.dynamicdrive.com/dynamicindex5/bookmarkscroll.htm](http://www.dynamicdrive.com/dynamicindex5/bookmarkscroll.htm)

我的目标元素与 id 不一致。当您单击链接时，它应该滚动到 id 并显示在页面顶部...

```
bookmarkscroll.scrollTo('sectionb')

<a href="javascript:bookmarkscroll.scrollTo('sectionb')">Scroll to Section B</a> 
```

我应该提到我将它用于常见问题解答页面。

问题（超链接）在页面顶部是单行距的，答案在页面下方约 20 处。

为此，您是否需要为每个答案提供大量页面文本？

[链接到 pastebin](http://pastebin.com/stYyvWcv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:26:06.277

如果没有看到您的页面，在我看来最有可能的是在您滚动到的标题下方，您没有足够的内容（高度）来填满整个屏幕。因此，当您向下滚动时，滚动条会在标题与浏览器窗口顶部对齐之前到达底部。

尝试在该标题下方添加足够的段落以填满屏幕，看看是否有帮助。

# php - 我的查询中的 MYSQL 排序列

> ID：10367171
> 
> 赞同：1
> 
> 时间：2012-04-28T20:16:06.450
> 
> 标签：php, mysql

我一直在努力尝试让一堆数据在使用 PHP 整齐显示的表结构中工作，我必须说我遇到了困难。我终于能够调用这些列，这样如果我添加一个字段，它就会始终将它添加到我的表中，我希望这很容易管理。但是，当我最初设置表格时，我将其按随机顺序排列。现在，当我开始使用 DESCRIBE`table`时，它会以准确的顺序将它们提供给我，但我找不到更好地组织它们的方法。在我拥有的表格的数据库末尾说有月/年是没有意义的。

```
<?php 
require 'connect.php';
?>
<h3>Monthly Finances | <a href="new.php">Add New Month</a> </h3>
<table border="1" bordercolor ="#000000">
<tr>
<?php
$columns = "DESCRIBE  `month` ";
if($query_run_columns = mysql_query($columns)){
    $columnNames = array();
        while($column = mysql_fetch_assoc($query_run_columns)){
        echo '<th>'.$column['Field'].'</th>';
    }
}else{
    echo'sql error';
}

?>

<?php
$gatherdata = "SELECT `month`, `year`,`rent`,`electric`,`cable`,`cellphone`,`renters` FROM `month` ";
if($query_run = mysql_query($gatherdata)){

    while($row = mysql_fetch_assoc($query_run)){
        $rent = $row['rent'];
        $electric = $row['electric'];
        $cable = $row['cable'];
        $cellphone = $row['cellphone'];
        $renters = $row['renters'];
        $month = $row['month'];
        $year = $row['year'];

        echo '<tr>';
        echo '<td align="center">'.$month.'</td>';
        echo '<td algin="center">'.$year.'</td>';
        echo '<td align="center">'.$rent.'</td>';
        echo '<td align="center">'.$electric.'</td>';
        echo '<td align="center">'.$cable.'</td>';
        echo '<td align="center">'.$cellphone.'</td>';
        echo '<td align="center">'.$renters.'</td>';
        echo '</tr>';
    }
}else{
    echo 'query error';
}
?>
<br>View by month
</table>
<form action="index.php" method="GET">
<select name="months" value="all">
<?php
$gathermonths = "SELECT `month`, `year` FROM `month";

if($query_month_selector = mysql_query($gathermonths)){
    while($month_row = mysql_fetch_assoc($query_month_selector)){
        $month = $month_row['month'];
        $year = $month_row['year'];

        echo '<option value="'.$month.' '.$year.'">' .$month.' '.$year.'</option>';
    }
}
echo $_GET['months'];
?>
<input type="submit" value="View Selected Date"></input>
</select>
</form> 
```

我的代码远未完成或有序，但我一直在这个项目上懈怠，当我有更多时间时，我会更多地清理它。但是，如果您可以的话，请帮我介绍一种有效的组织方法，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:49:13.620

您的表是否包含索引/ID？

您可以通过“ORDER BY”轻松地按升序/降序排列它们

```
ALTER TABLE `table_name` ORDER BY `id` 
```

注意默认`ORDER BY`是升序。`DESC`如果你想下降，放在最后。

如果您希望您的 mysql 查询以良好的有序方式输出结果，您也可以`ORDER BY`在查询中使用：

```
$gathermonths = "SELECT `month`, `year` FROM `month` ORDER BY `month` DESC"; 
```

`GROUP BY`如果您想按月对结果进行分组，还有一些功能：

```
$gathermonths = "SELECT `month`, `year` FROM `month` GROUP BY `month`"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:06:14.647

您`DESCRIBE`可以使用[`mysql_fetch_field`](http://php.net/mysql_fetch_field). 然后列将始终与您在 上的顺序相同`SELECT`：

```
<?php
$gatherdata = "SELECT `month`, `year`,`rent`,`electric`,`cable`,`cellphone`,`renters` FROM `month` ";
if($query_run = mysql_query($gatherdata)){

    // Loop the columns to build the table headers
    echo '<table>';
    echo '<tr>';
    while ($i < mysql_num_fields($query_run)) {
        $field = mysql_fetch_field($query_run, $i);
        echo '<th>' . $field->name . '</th>';
        $i++;
    }
    echo '</tr>';

    // Your current data loop
    while($row = mysql_fetch_assoc($query_run)){
        // (...)
    }
    echo '</table>'
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T21:20:26.620

由于您已经指定了要获取的列，因此只需显式输出列标题而不是查询数据库。

相反，如果您想抽象 HTML 表生成代码以便它与任意 SQL 表一起使用（从而[将](http://en.wikipedia.org/wiki/Separation_of_concerns)数据访问与显示分开），请在生成列标题时记录列名，然后在输出时迭代此数组行。您也可以取消`$rent = $row['rent'];`分配，因为它们对您没有任何好处。使用 PDO：

```
/* data access */
$finances = $db->query('SELECT `month`, `year`,`rent`,`electric`,`cable`,`cellphone`,`renters` FROM `month`');

$columns = array();
for ($i = 0; $i < $finances->columnCount(); ++$i) {
    $meta = $finances->getColumnMeta($i);
    $columns[$meta['name']] = ucwords($meta['name']);
}

/* data display. Note this is completely independent of the type used to store 
   the colum & row data. All that matters are that $columns and $finances are 
   Traversable
 */
?>
<table>
  <thead>
    <tr>
      <?php foreach ($columns as $name => $label): ?>
        <th><?php echo $label ?></th>
      <?php endforeach ?>
    </tr>
  </thead>
  <tbody>
    <?php foreach ($finances as $monthly): ?>
      <tr>
        <?php foreach ($columns as $name => $label): ?>
          <td><?php echo $monthly[$name]; ?></td>
        <?php endforeach ?>
      </tr>
    <?php endforeach; ?>
  </tbody>
</table> 
```

错误处理和抽象到模块中留作练习。

# ruby-on-rails - 数组作为来自 Rails Select Helper 的参数

> ID：10367177
> 
> 赞同：1
> 
> 时间：2012-04-28T20:16:40.257
> 
> 标签：ruby-on-rails, ruby

我正在开发一个遗留项目，该项目使用`acts_as_taggable_on`它期望标签出现在数组中。我有一个选择框，允许用户在名为类别的字段中选择课程上的标签。批量分配创建的唯一方法是参数看起来像这样`params = {:course => {:categories => ['Presentation']}}`。我目前对这个助手有一个看法：

```
 <%= f.select 'categories', ['Presentation' , 'Round Table' , 'Demo', 'Hands-on'] %> 
```

这会给我一个像`params = {:course => {:categories => 'Presentation'}}`. 这不起作用，因为作为标记山墙的行为显然无法处理传递集合以外的任何内容。

我尝试更改`categories`为，`categories[]`但随后出现此错误：

```
undefined method `categories[]' for #<Course:0x007f9d95c5b810> 
```

有谁知道格式化我的选择标签以将数组返回到控制器的***正确方法？***我正在使用 Rails 3.2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:54:52.877

我没有使用acts_as_taggable_on，但也许这个简单的技巧适合你？你应该把它放在批量分配之前。

```
category = params[:course][:categories]
params[:course][:categories] = [category] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:56:10.253

如果您只允许选择一个标签，您可以这样做：

```
<%= f.select 'categories', [['Presentation'] , ['Round Table'] , ['Demo'], ['Hands-on']] %> 
```

每个item数组都有first作为显示值，last作为返回值，在这种情况下，它们都将返回相同的东西，因为当数组作为一个元素时，数组的第一个元素与最后一个元素相同.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:44:03.857

似乎 select 没有给你那个选项。

如果我理解正确，一种选择可能是改用 select_tag 并明确说明您希望在参数中选择的位置：

```
<%= select_tag 'course[categories][]', options_for_select(['Presentation' , 'Round Table' , 'Demo', 'Hands-on']) %> 
```

这应该以您需要的方式获得您的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T18:50:22.573

这是我用于我的一个项目的内容：

```
<% options = { include_blank: true } %>

<% html_options = { required: true, name: "#{f.object_name}[#{resource.id}][days][]" } %>

<%= f.select :days, DAYS, options, html_options %> 
```

如果没有`html_options[:name]`，Rails 会处理选择标签的名称并吐出类似

```
service[service_add_ons_attributes][11][days] 
```

但是我需要

```
service[service_add_ons_attributes][11][days][] 
```

所以我覆盖它。

希望有帮助。

# iphone - iPhone计算器十进制数字在输入时反转

> ID：10367179
> 
> 赞同：2
> 
> 时间：2012-04-28T20:17:12.857
> 
> 标签：iphone, objective-c, xcode, ios4, syntax

在做教程工作时，我花了很长时间来实现一个小数点，现在我有了一个在公式中有效的小数点，但问题是它反转了输入 - 例如。输入 1.4，计算器屏幕将其显示为 4.1 - 我知道这与我的变量管理有关.. 计划使用 BOOL 而不是浮点数..但是..任何接受者？

编码：

```
 - (IBAction) pressedDecimal: (id) sender
     {
       pressedDec = 1;
     }

    - (IBAction) pressedDigit: (id) sender 
     {
       if (pressedDec == 1) 
       {currentNumber = .1 * currentNumber + (double)[sender tag];
       calculatorScreen.text = [NSString stringWithFormat:@"%g",currentNumber];
      }
else

     {

       currentNumber =  currentNumber * 10 + (double)[sender tag];
       calculatorScreen.text = [NSString stringWithFormat:@"%g",currentNumber];
       pressedDec = 0;

      }
     }

  - (IBAction) pressedOperation: (id) sender 
   {
if (currentOperation == 0) result = currentNumber;
else {
    switch (currentOperation) {
        case 1:
            result = result + currentNumber;
            break;
        case 2:
            result = result - currentNumber;
            break;
        case 3:
            result = result * currentNumber;
            break;
        case 4:
            result = result / currentNumber;
            break;
        case 5:
            currentOperation = 0;
            break;

    }

}
currentNumber = 0;
calculatorScreen.text = [NSString stringWithFormat:@"%g",result];
if ([sender tag] == 0) result = 0;
currentOperation = [sender tag];
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T20:26:46.390

更仔细地考虑从您的代码中提取的内容：

```
currentNumber = .1 * currentNumber + (double)[sender tag]; 
```

（我不是很明确，因为如果我正确理解了这个问题，那么您这样做是为了学习，并且您必须思考的越多，您就会学得越好:-)。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T20:26:32.433

第 2 课：[Stanford iTunes U 教程](http://itunes.apple.com/us/itunes-u/developing-apps-for-ios-sd/id395631522)涵盖了构建一个简单的计算器。可能会有所帮助。无论哪种方式，它都是一个很棒的教程系列。

# c# - 在 ASPNET1.1 C# 中嵌入 JavaScript

> ID：10367185
> 
> 赞同：0
> 
> 时间：2012-04-28T20:17:37.603
> 
> 标签：c#, javascript, .net-1.1

我有一个 Web 应用程序，它需要脚本功能才能运行业务逻辑，而无需重新编译应用程序。

所以我的想法是使用 Javascript 引擎并从文件或数据库加载脚本并由 BL 运行实体以验证事物、执行逻辑等。

我一直在这里搜索很多问题，但找不到适用于 NET1.1 的问题。

有谁知道我可以用的吗？

我发现 JINT 看起来不错，但它是 NET2.0+。

我的另一个选择是使用 Boo（我在这里添加了一个问题，以了解它仅作为解释器的速度），但开发人员已经了解 JS，因此他们会更熟悉和更快。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:09:10.790

我刚刚发现 LuaInterface 1.3.0，它是支持在 Lua5.0 上运行的 NET1.1（LuaInterface 已经在 2.x 中）的最后一个版本。

所以我要和它一起去。

我很想做 Javascript，但不可能让它在 NET1.1 中运行，而且我的应用程序在不久的将来不会升级到 NET2.0。

# html - 列 BG 图像不会延伸到 100% 高度

> ID：10367188
> 
> 赞同：0
> 
> 时间：2012-04-28T20:17:57.170
> 
> 标签：html, css

我有一个带有背景图像的左列和另一个用于主体的背景图像，因此它填充了屏幕的其余部分。我在左列右侧有一个内容区域，它将垂直延伸到浏览器窗口之外。将左列设置为 100% 高度，一旦我向下滚动，左列的背景图像将不会超出屏幕的原始大小。是否有一种纯 css 方式让左列延伸超过浏览器窗口的原始高度，以匹配内容区域？

[http://ophilium.com/test/test.html](http://ophilium.com/test/test.html)

```
html {
    height: 100%;
}
body {
    height: 100%;
    background-image: url(../images/rightPanel.png);
    background-repeat: repeat;
    height: 100%;
}

#left {
    background-repeat: repeat-y;
    width: 207px;
    padding: 10px;
    float: left;
    height: 100%;
    background-image: url(../images/leftPanel.png);
}
#right {
    height: 500px;
    padding: 10px;
    min-width: 773px;
    float: left;
}
#container {
    position: relative;
    min-width: 1100px;
    height: 100%;
    background-repeat: repeat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:44:33.773

请查看演示[http://jsfiddle.net/n9Tcv/](http://jsfiddle.net/n9Tcv/)

```
var right_height = jQuery('#right').height();
var left_height = jQuery('#left').height();
jQuery('#left').height(right_height);​ 
```

你知道如何使用 jQuery 吗？如果您有任何疑问，请回复我，我会像这种情况一样执行此代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:49:03.433

如果我正确理解您的问题，您需要使用该`equal height columns`技术。谷歌搜索解决方案把我带到[这里](http://buildinternet.com/2009/07/four-methods-to-create-equal-height-columns/)和[这里](http://www.vanseodesign.com/css/equal-height-columns/)。在那里，您可能会找到使侧边栏与主要内容区域相同的不同方法。只需选择最好的一个:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:01:06.033

当您将 html 和 body 标记高度设置为 100% 时，它们都将它们的高度设置为浏览器窗口的内部高度，这意味着它们具有相同的值和**固定**值。并且由于您的 div #container 和 #left 是 body 元素的子元素并且相对于 body 元素，因此它们相应地设置了 100% 的高度，即内部高度。

此外，如果您需要一个问题的答案：那么为什么 div #right 扩展？，那是因为它没有扩展而是溢出。而且由于您没有告诉 body 或 #container 或 #right 将溢出属性设置为隐藏，因此它们都不会阻止这种浏览器行为。在这种情况下，您假设原始窗口高度是溢出导致的高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T20:20:45.660

将规则添加`background-attachment: fixed;`到您的`body`元素。

# java - java：内存不足错误的一般方法

> ID：10367193
> 
> 赞同：2
> 
> 时间：2012-04-28T20:18:36.867
> 
> 标签：java, multithreading, out-of-memory, polling

我一直在使用多个模块在 Java 上开展这个项目。很长一段时间以来，我偶尔会收到“java：Out Of Memory”错误！我对这个“流行”错误很陌生，想知道解决此类错误的**一般方法。**
此外，是否有行业接受的**标准工具**来帮助找出此类错误的原因？我项目中的模块包括来自第三方
的每分钟**轮询（使用 Web 服务）、****多线程**等。但是，这只是一个指针，我寻求一种通用方法，而不是针对我的项目非常具体的方法。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:46:56.853

有时您只是有一个使用大量内存的类，您需要增加堆大小或制定更节省空间的算法。其他时候它是一个泄漏，你需要尊重对象。

1.  运行`jvisualvm`（它包含在 JDK 中）。
2.  连接到您的进程并尝试在注意堆大小的同时重新创建内存不足错误。
3.  当内存变大时执行堆转储。按大小搜索最大的物体——通常这会给你带来罪魁祸首。
4.  查看依赖项以查看包含引用的内容。如果是内存泄漏，请确保取消引用不需要的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T20:26:52.380

> 此外，是否有行业接受的标准工具来帮助找出此类错误的原因？

是的，有诸如[VisualVM](http://visualvm.java.net/)和[YourKit](http://www.yourkit.com/overview/index.jsp)之类的内存分析器。我广泛使用后者，用于 CPU 和内存分析，并发现它非常有用。要了解它的功能，请查看此页面：[链接](http://www.yourkit.com/features/index.jsp#live_memory)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T20:28:29.263

如果不能增加可用内存，则必须减少消耗。

不要保留对执行时不需要的对象的引用（例如可以动态重新加载的数据），如果有必要，请重新设计流程（例如，不要并行处理所有对象并按顺序执行）以减少需要当时的记忆。垃圾收集应该为您完成其余的工作。

特别是如果您将大数据对象加载到内存中，请尽可能考虑使用流式处理方法。例如，如果您想通过它进行搜索，您不需要将整个文件加载到内存中。你可以一步一步来。

除了架构问题之外，您还可能遇到泄漏：保留对不再需要的对象的无意引用。由于它们被引用，垃圾收集器无法释放内存，并且您有时会耗尽内存。这可能是 OutOfMemoryExceptions 的#1 原因，它通常与`static`类的引用有关，因此在您第一次接触类后`static`通常不会[卸载s。](https://stackoverflow.com/questions/148681/unloading-classes-in-java)互联网上有很多关于查找/修复这些的文章，例如[How to Fix Memory Leaks in Java](http://olex.openlogic.com/wazi/2009/how-to-fix-memory-leaks-in-java/)

我知道的一种工具是[MAT](http://www.eclipse.org/mat/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T20:34:42.957

您可能有内存泄漏。找到它是一个挑战。Netbeans 有一些工具可以帮助您分析 VM。您可以在项目运行时分析您的项目并查看男性使用情况。Apache JMeter 也可以作为插件使用，或者您可以单独运行它。JMeter.apache.org

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T08:45:45.877

如果您经常遇到 OOM，请使用正确的选项启动 java，获取堆转储并使用 jhat 或 eclipse 中的内存分析器进行分析（http://www.eclipse.org/mat/）

```
 -XX:+HeapDumpOnOutOfMemoryError   -XX:HeapDumpPath=<path to dump file> 
```

# android - 尝试打开联系人列表时出现问题？

> ID：10367194
> 
> 赞同：0
> 
> 时间：2012-04-28T20:18:40.830
> 
> 标签：android, contacts, android-contacts

我在网上看到大量帖子显示“如何打开 Android 联系人列表”，但它们都已过时，有些代码甚至不再工作。

编辑：

现在有以下内容：

```
public class MessagePreview extends Activity {
final int PICK_CONTACT = 3;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button recipientContact = (Button) findViewById(R.id.buttonAddRecipient);

    recipientContact.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(Intent.ACTION_PICK,
                    ContactsContract.Contacts.CONTENT_URI);
            startActivityForResult(intent, PICK_CONTACT);
        }
    });

}

@Override
public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

    switch (reqCode) {
    case (PICK_CONTACT):
        if (resultCode == Activity.RESULT_OK) {
            Uri contactData = data.getData();
            Cursor c = managedQuery(contactData, null, null, null, null);
            if (c.moveToFirst()) {
                String name = c.getString(c
                        .getColumnIndexOrThrow(People.NAME));
                // TODO Whatever you want to do with the selected contact
                // name.
            }
        }
        break;
    }
}
 } 
```

没有错误，但它确实说

*   字段 Contacts.PeopleColumns.NAME 已弃用
    *   Contacts.People 类型已弃用
    *   字段 Contacts.PeopleColumns.NAME 已弃用
    *   Contacts.People 类型已弃用

在这条线上：

字符串名称 = c.getString(c.getColumnIndexOrThrow(People.NAME));

我必须在该行之后添加更多代码，但我不知道要添加什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:27:33.100

您正在尝试在另一个方法中定义一个方法。那是行不通的。请将您的定义移动`onActivityResult()`到您的`Activity`.

FWIW，[这是一个示例应用程序](https://github.com/commonsguy/cw-advandroid/tree/master/Contacts/Pick)，它选择在 Android 1.5-4.0.3 上工作的联系人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:30:58.220

```
String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                    ContactsContract.CommonDataKinds.Phone.NUMBER };
Cursor names = getContentResolver().query(contactData , projection, null, null, null);
int indexName = names.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
int indexNumber = names.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
names.moveToFirst();
do {
  String name   = names.getString(indexName);
  String number = names.getString(indexNumber);
} while (names.moveToNext()); 
```

在 onactivityforresults 上尝试此代码

# windows-phone-7 - 使用 RestSharp 对 Trello API 进行身份验证

> ID：10367197
> 
> 赞同：4
> 
> 时间：2012-04-28T20:19:20.020
> 
> 标签：windows-phone-7, oauth, restsharp, trello

我正在努力弄清楚如何从我的 Windows Phone 7 应用程序中使用 Trello 的 OAuth API 调用。除了[端点列表](https://trello.com/docs/gettingstarted/index.html#getting-a-token-from-a-user)之外，API 并没有真正记录在案。

这是我到目前为止所拥有的：

```
public void OnAuthenticateClicked(object sender, EventArgs e)
{
    const string consumerKey = "mykey";
    const string consumerSecret = "mysecret";
    const string baseUrl = "https://trello.com/1";

    var client = new RestClient(baseUrl) 
    {
        Authenticator = OAuth1Authenticator.ForRequestToken(consumerKey, consumerSecret)
    };
    var request = new RestRequest("OAuthGetRequestToken", Method.POST);
    var response = client.ExecuteAsync(request, HandleResponse);
}

private void HandleResponse(IRestResponse restResponse)
{
    var response = restResponse;
    Console.Write(response.StatusCode);
} 
```

我收到了`404`回复，所以很明显，有些地方不对劲。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T21:56:14.673

不使用`ExecuteAsync`似乎使它工作：

```
RestRequest request = new RestRequest("OAuthGetRequestToken", Method.POST);
IRestResponse response = client.Execute(request);
Console.Write(response.StatusCode); 
```

根据John Sheehan的[这篇文章](http://groups.google.com/group/restsharp/browse_thread/thread/2e8788f2c36cedc9)， “异步场景（SL 和 WP）中尚不支持 oAuth1” 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-03T15:37:26.880

我认为您的基本网址不正确。请尝试以下方法：

常量字符串 baseUrl = " [https://api.trello.com/1](https://api.trello.com/1) ";

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T20:44:35.213

将 OAuthGetRequestToken 替换为授权。

# c# - C#中的ListBox AllowHTML

> ID：10367199
> 
> 赞同：0
> 
> 时间：2012-04-28T20:19:31.160
> 
> 标签：c#

有没有办法在 ListBox 中为每个项目显示不同的 TextFormat/Style

例子：

Data1：**价值**
Data2：**价值世界**
Data3：**价值你好**

我试过了，但我不能用粗体显示下一个字符串

```
private void lbDetails_DrawItem(object sender, DrawItemEventArgs e)
    {
        e.DrawBackground();

        Rectangle rec = e.Bounds;

        string[] temp = lbDetails.Items[e.Index].ToString().Split(':');

        e.Graphics.DrawString(temp[0], 
            new Font("Arial",8, FontStyle.Regular),
            Brushes.Black, 
            rec, 
            StringFormat.GenericDefault);

        e.DrawFocusRectangle();
    } 
```

**解决方案**

```
private void lbDetails_DrawItem(object sender, DrawItemEventArgs e)
    {
        try
        {
            e.DrawBackground();

            string[] temp = lbDetails.Items[e.Index].ToString().Split(':');

            SizeF prevStr = e.Graphics.MeasureString(temp[0] + ": ", new Font("Arial", 8, FontStyle.Regular));
            SizeF nextStr = e.Graphics.MeasureString(temp[1], new Font("Arial", 8, FontStyle.Bold));

            RectangleF firstRec = new RectangleF(e.Bounds.X, e.Bounds.Y, prevStr.Width, prevStr.Height);
            RectangleF secondRec = new RectangleF(prevStr.Width, e.Bounds.Y, nextStr.Width, nextStr.Height);

            e.Graphics.DrawString(temp[0] + ": ",
                new Font("Arial", 8, FontStyle.Regular),
                Brushes.Black,
                firstRec,
                StringFormat.GenericDefault);

            e.Graphics.DrawString(temp[1],
                new Font("Arial", 8, FontStyle.Bold),
                Brushes.Black,
                secondRec,
                StringFormat.GenericDefault);

            //e.Graphics.DrawRectangle(Pens.Red, firstRec.X, firstRec.Y, firstRec.Width, firstRec.Height);

            e.DrawFocusRectangle();
        }
        catch (Exception ex)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:58:46.290

您需要绘制*两个*字符串，第二个使用粗体字。一个完整的例子：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
        listBox1.DrawMode = DrawMode.OwnerDrawFixed;
        listBox1.DrawItem += new DrawItemEventHandler(listBox1_DrawItem);
        listBox1.Items.AddRange(new object[] { "Data1: value", "Data2: hello world", "Data3: hello hello"});
    }

    void listBox1_DrawItem(object sender, DrawItemEventArgs e) {
        var box = (ListBox)sender;
        e.DrawBackground();
        if (e.Index < 0) return;
        string[] temp = box.Items[e.Index].ToString().Split(':');
        int size = (int)(TextRenderer.MeasureText(e.Graphics, temp[0], box.Font).Width + 0.5);
        var rc = new Rectangle(e.Bounds.Left, e.Bounds.Top, (int)size, e.Bounds.Height);
        var fmt = TextFormatFlags.Left;
        TextRenderer.DrawText(e.Graphics, temp[0] + ":", box.Font, rc, e.ForeColor, fmt);
        if (temp.Length > 1) {
            using (var bold = new Font(box.Font, FontStyle.Bold)) {
                rc = new Rectangle(e.Bounds.Left + size, e.Bounds.Top, e.Bounds.Width - size, e.Bounds.Height);
                TextRenderer.DrawText(e.Graphics, temp[1], bold, rc, e.ForeColor, fmt);
            }
        }
        e.DrawFocusRectangle();
    }
} 
```

产生：

![在此处输入图像描述](../Images/20336cebd8d92810ff17910584fe01a2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:36:13.923

您可以按照此[链接](http://forums.asp.net/t/1669523.aspx/1)中的说明进行操作。我知道你正在尝试不同的方法，但它可以帮助你。

还有另一个[链接](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/dacea8cd-963e-4a40-9af6-1495acf1d3c5)。此链接描述了如何在具有不同字体样式的 ListBox 中显示项目。

[这里还有其他很好的链接。](http://www.c-sharpcorner.com/UploadFile/sahuja/OwnerDrawListBox11212005014826AM/OwnerDrawListBox.aspx)

# makefile - 从 Makefile 重定向我的输出

> ID：10367200
> 
> 赞同：0
> 
> 时间：2012-04-28T20:19:33.013
> 
> 标签：makefile, g++, gnu-make

   使用我的 Makefile，我试图让我的所有对象和二进制文件最终都放在 Release 目录中。似乎我尝试过的每个排列都有一些错误，所以我正在寻求帮助。这就是我所拥有的，我需要知道如何改变它。谢谢。

```
BUILDDIR = Release
CXXFLAGS =      -O2 -g -Wall -fmessage-length=0
LDFLAGS=
HEADERS = $(wildcard *.h)
SOURCES = $(wildcard *.cpp)
OBJECTS = $(SOURCES:.cpp=.o)
LIBS =
EXECUTABLE= MyProgram

all:  $(HEADERS) $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) 
        $(CXX) $(LDFLAGS) $(OBJECTS) -o $@

clean:
        rm -f $(OBJECTS) $(EXECUTABLE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:04:39.803

修改这些行如下：

```
OBJECTS := $(SOURCES:%.cpp=$(BUILDDIR)/%.o)

EXECUTABLE := $(BUILDDIR)/MyProgram 
```

然后有两个选择。第一个是用来`vpath`定位需要编译成对象的源。第二种是使用显式模式规则：

```
$(BUILDDIR)/%.o : ./%.cpp
    $(CXX) $(CXXFLAGS) -o $@ -c $< 
```

# database - Entity Framework 4.3.1 Code First 关系在获取数据时不起作用

> ID：10367201
> 
> 赞同：2
> 
> 时间：2012-04-28T20:19:34.247
> 
> 标签：database, ef-code-first, relation, entity-framework-4.3

这是我第一次使用 Entity Framework 4.3.1 在 C# 中创建项目。我无法从锦标赛表中获取所有数据，确切地说是地址。

首先，这是我的 Code First 代码。当我运行它时，这 2 个表以正确的关系正确创建。我在这些类中定义了更多的列，但对于这个例子，我只展示了一些。

```
public class EFDbContext : DbContext
{
    public EFDbContext()
        : base("ApplicationServices")
    {
    }

    public DbSet<Tournament> tournaments { get; set; }
    public DbSet<Address> addresses { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }

    public class Tournament
    {
        [ScaffoldColumn(false)]
        public int TournamentId { get; set; }

        [Required(ErrorMessage="Tournament name is a required field")]
        public string Name { get; set; }

        [Required(ErrorMessage="Address is a required field")]
        public Address Address { get; set; }
    }

    public class Address
    {   
        [ScaffoldColumn(false)]
        public int AddressId { get; set; }

        [Required(ErrorMessage="Street name is a required field")]
        public string Street { get; set; }

        [Required(ErrorMessage="House number is a required field")]
        public string HouseNo { get; set; }
    }
} 
```

当我插入一个带有地址的新锦标赛并检查数据库是否使用了关系时，我可以看到它有效。锦标赛有一个指向新插入地址的 Address_AddressId 值。但是当我尝试通过这样做来获取信息时：

```
Tournament tournament = context.tournaments.Find(id); 
```

我调试它，我可以看到来自锦标赛的所有数据都在锦标赛对象中，除了地址。这设置为空，我完全不知道为什么。

你们能帮帮我吗？

在此先感谢，巴特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:01:22.083

您需要熟悉一下如何使用 Entity Framework 加载相关数据。介绍在这里：http: [//blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)这些是您需要知道的有效使用实体框架的基础知识。

您看到的行为是预期的。`Tournament.Address`当您仅加载父实体`Tournament`（`Find`在您的示例中）时，实体框架不会自动加载导航属性 - 比如- 。

加载相关数据基本上有三个选项：

*   急切加载：

    ```
    Tournament tournament = context.tournaments
        .Include(t => t.Address) // <- "eager loading"
        .SingleOrDefault(t => t.TournamentId == id); 
    ```

    我们将在一次往返和数据库查询中加载比赛和地址。

*   延迟加载：将您的导航属性标记为`virtual`：

    ```
    public virtual Address Address { get; set; } 
    ```

    当您加载锦标赛时， EF 将动态创建一个代理对象（派生自`Tournament`），该对象能够在您访问其属性之一时立即加载相关实体：

    ```
    Tournament tournament = context.tournaments.Find(id);
    string street = tournament.Address.Street; // second query to DB happens here 
    ```

*   显式加载：

    ```
    Tournament tournament = context.tournaments.Find(id);
    context.Entry(tournament).Reference(t => t.Address).Load();
    // second query to DB happens here 
    ```

    这类似于延迟加载，因为您还需要两次查询和数据库往返，但您可以明确控制何时`Address`加载。显式加载具有过滤或排序相关数据的选项（在导航集合的情况下），其他两个选项没有。

# css - 用于模块化大型 CSS 文件和聚合较小 CSS 文件的工具

> ID：10367203
> 
> 赞同：4
> 
> 时间：2012-04-28T20:19:41.060
> 
> 标签：css, browser, less, aggregation

我的站点有一个 mondo 大小的 CSS 文件，其中包含站点范围的 CSS 选择器。这个单一文件 ( **Mondo.css** ) 运行良好，因为我希望用户一次下载这个大文件。

但是，我最近制作了一个小部件控件，它公开了网站的一小部分功能，出于性能原因，我希望有一个较小的 CSS 文件 ( **Widget.css** )，它只公开小部件实际使用的 CSS 选择器。

有没有我可以使用*的运行时工具*（可能作为 Chrome、FF 或 IE 的浏览器插件）来*分析 CSS 依赖*项并帮助我从 Mondo.css 中分解出一个 Widget.css 文件？Widget.css 本质上将成为一个名为“ **Site.css** ”的新 CSS 文件的基类。

然后，我想要一个工具，它可以让我将 Widget.css（基类）和 Site.css（派生类）拼接到 Mondo.css（聚合类）中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:41:54.547

回答我自己的问题。Firefox的**“Dust Me Selectors”**插件几乎可以满足我的需要。它解析一个活动页面，并为您提供已使用和未使用的选择器的单独列表。

我可以手动浏览这个列表来做我需要做的事情。

[https://addons.mozilla.org/en-US/firefox/addon/dust-me-selectors/](https://addons.mozilla.org/en-US/firefox/addon/dust-me-selectors/)

[http://www.brothercake.com/dustmeselectors/](http://www.brothercake.com/dustmeselectors/)

# data-modeling - 什么是“订单行”？

> ID：10367206
> 
> 赞同：47
> 
> 时间：2012-04-28T20:20:24.990
> 
> 标签：data-modeling

我听了很多播客。在数据库或业务对象建模的上下文中，我经常听到“订单行”的表达。这似乎是某事的典型例子。我只是不知道是什么。

那么什么是“订单线”？它在典型示例中代表什么概念？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-28T20:24:25.163

它指的是通常由一个或多个行组成的“采购订单”，称为“订单行”。

由于地球上几乎每家企业都有类似的订单、采购和/或销售记录，因此只要数据库存在，它就一直是父子（或主从）关系的规范真实世界数据示例（四十多年了）。

它可能看起来像这样：

```
May Weller,    14-FEB-2011

    qty    Product          Price

      1    Hose, 50ft       $21.99
      4    Sprinkler        $33.78
      1    Gum              $ 1.10

Total                       $56.87 
```

这通常存储为 [ORDERS] 表中的一行和 [Order-Lines] 表中的三个附加行，它们都指向 [ORDERS] 中的父行。这可能看起来像这样：

**[订单] 表：**

```
OrderID:        14028
Customer:       May Weller
OrderDate:      14-FEB-2011 
```

**[OrderLines] 表：**

```
OrderLineID:    223011      223012      223013
OrderID:        14028       14028       14028
quantity:       1           4           1
Product:        Hose, 50ft  Sprinkler   Gum
Price:          21.99       33.78       1.10 
```

（注意：是的，我知道这还没有完全标准化）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-22T23:27:13.787

简而言之，[链接](http://en.termwiki.com/EN/order_line)将其定义为销售订单或采购订单的一部分，用于指定有关请求项目的详细信息。

包含详细信息的表格通常看起来像 RBarry 的 OrderLines 表格。

# android - View.Invisible - 图像留在屏幕上

> ID：10367211
> 
> 赞同：0
> 
> 时间：2012-04-28T20:21:22.167
> 
> 标签：android, xml, view, visibility

我试图设置我的 imageview 、 button 和 textview 的可见性。但是当我运行程序时它们仍然存在。我尝试了 View.GONE，但这只是删除了所有的 textview、imageview 和按钮。但我只想隐藏然后显示。

```
 list.setOnItemClickListener(new AdapterView.OnItemClickListener() 
            {
                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int position, long arg3) 
                {
                                                if(baglanti.DegerDogruMu() == true)
                        {
                            ekvar = true; **// If true there is an attachment**
                            gelen = baglanti.EkinIsmi();
                        }
                        else
                        {
                            ekvar = false; **// False = no attachment**
                        }

                                } 
```

**然后我把结果放在意图中。**

```
final Intent intent = new Intent(ListeleActivity.this, GoruntuleActivity.class);
intent.putExtra(ekvarmı, ekvar);
startActivity(intent); 
```

**另一个活动调用这个方法来添加“ekvar”**

```
 public void ListOnClicklendiginde(final int position , ArrayList<String> bodyliste , ArrayList<String> kimdenlist , ArrayList<String> konulist, boolean ekvarmı  , ArrayList<String> ekinismi)
        {
**// First I hide the "attachment things"**

   dosyaAdi.setVisibility(View.INVISIBLE);
        atacResim.setVisibility(View.INVISIBLE);
        ekButton.setVisibility(View.INVISIBLE);

**// If there is an attachment then visible the things. (I debug for the no attachment email and it fall the false so the statement is working ok)**

    if( ekvarmı == true)
                {
                    dosyaAdi.setVisibility(View.VISIBLE);
                    atacResim.setVisibility(View.VISIBLE);
                    ekButton.setVisibility(View.VISIBLE);

                }
                else
                {
                    dosyaAdi.setVisibility(View.INVISIBLE);
                    atacResim.setVisibility(View.INVISIBLE);
                    ekButton.setVisibility(View.INVISIBLE);
                }
                 } 
```

XML:

```
<RelativeLayout
        android:id="@+id/ekTablo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_x="8dp"
        android:layout_y="102dp" >

        <ImageView
            android:id="@+id/imageViewAttachment"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/ic_email_attachment" />

        <TextView
            android:id="@+id/dosyaAdi"
            android:layout_width="210dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ImageButton
            android:id="@+id/imageButtonEkIndir"
            android:layout_width="50dp"
            android:layout_height="16dp"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/dosyaAdi"
            android:src="@drawable/ic_indir" />

    </RelativeLayout> 
```

红色方块在图片上他们必须隐藏 ![红色方块](../Images/5e4ac5e600034ea47abcd336b81b1d4a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:15:45.970

尝试使您的视图**在 XML 中不可见**并像这样更改您的 Java 代码

```
if( ekvarmı == true)
            {
                dosyaAdi.setVisibility(View.VISIBLE);
                atacResim.setVisibility(View.VISIBLE);
                ekButton.setVisibility(View.VISIBLE);

            } 
```

# arduino - Arduino Mega 2560，如何获取板卡固件版本？

> ID：10367212
> 
> 赞同：1
> 
> 时间：2012-04-28T20:21:25.400
> 
> 标签：arduino

我正在尝试获取我的 Arduino 板使用的固件，但无法获取。我真正的问题是在我的板上上传闪烁示例时出现此错误：

avrdude：stk500_recv()：程序员没有响应

我正在使用 Fedora 16，内核 3.3

我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-12T05:36:29.713

我有一个[检测芯片签名](http://www.gammon.com.au/forum/?id=11633)的草图，包括获取引导加载程序的 MD5 和。实际上，这为您提供了固件的签名。一些已知签名显示为已知文件名。例如：

```
MD5 sum of bootloader = FB F4 9B 7B 59 73 7F 65 E8 D0 F8 A5 08 12 E7 9F 
Bootloader name: optiboot_atmega328 
```

您需要另一块板（例如 Uno）来运行草图。

并不是说这会解决您的整体问题（除非根本没有引导加载程序）。

您还会被告知保险丝设置，因此您可以检查是否设置了“将时钟除以 8”之类的保险丝。

# android - Android 自动调整位图大小

> ID：10367214
> 
> 赞同：0
> 
> 时间：2012-04-28T20:21:40.190
> 
> 标签：android, bitmap

我得到了一个 320 像素宽和 40 像素高的位图，但是我从加载这个资源和使用 bitmapFactory 解码得到的位图是 60 像素高。我在加载资源后立即检查高度，因此没有代码更改大小。

```
ZitEntity.setBitmap(BitmapFactory.decodeResource(this.getResources(),R.drawable.zit1));

public static void setBitmap(Bitmap bit)
{
    inputBitmap = Bitmap.createBitmap(bit);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T20:26:29.923

将您的图像移动到`res/drawable-nodpi/` http://developer.android.com/guide/practices/screens_support.html[以](http://developer.android.com/guide/practices/screens_support.html)获取更多信息。

# java - Java中的常量返回值

> ID：10367215
> 
> 赞同：8
> 
> 时间：2012-04-28T20:21:41.447
> 
> 标签：java

我来自 C++ 背景，想知道 Java 的不可变特性。函数的返回值可以指定为 const 吗？（表示返回值不能修改）

同样对于奖励积分，在 c++ 中，函数定义可以后缀为 const 以声明该函数不会修改任何类级别的值。这在Java中也可以吗？（这意味着根据定义，函数将无法在内部更改其类状态）

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T20:23:54.847

不，Java`final`与 C++ 的`const`. 你不能做任何你要求的事情。

要使对象不可变，或多或少取决于您来强制执行它（而不是像在 C++ 中那样获得编译器的帮助）。来自[http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html)：

> 以下规则定义了创建不可变对象的简单策略。...
> 
> 1.  不要提供“setter”方法——修改字段或字段引用的对象的方法。
> 2.  使所有字段`final`和`private`.
> 3.  不允许子类覆盖方法。最简单的方法是将类声明为`final`. 更复杂的方法是`private`在工厂方法中制作构造函数和构造实例。
> 4.  如果实例字段包含对可变对象的引用，则不允许更改这些对象：
>     *   不要提供修改可变对象的方法。
>     *   不要共享对可变对象的引用。永远不要存储对传递给构造函数的外部可变对象的引用；如有必要，创建副本并存储对副本的引用。同样，在必要时创建内部可变对象的副本以避免在方法中返回原始对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-28T16:41:39.083

不，实际上没有办法在任何地方创建不可变对象。如果你想要一些不可变的东西，它必须在整个树上都是不可变的（最终的）。

例如，以下示例在每个地方（根目录除外）都使用了 final 但仍然无法阻止任何更改：

```
public class justAnInt {
    public int a = 0;
    public int b = 0;
}

// -----------------------------------

public class AliasProblem{
    private final justAnInt var = new justAnInt();
    final justAnInt getVar()
    {
        return var;
    }

    public static void main(String argv[])
    {
        final AliasProblemObject = new AliasProblem();
        final justAnInt localVar = AliasProblemObject.getVar();
        localVar.a = 19;
        System.out.println("object: " + object.getVar().a);
        System.out.println("local: " + localVar.a);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T19:07:16.923

我认为您可以返回对象数据的副本以供阅读，从而保护它们不被修改。但是额外的副本似乎是不可变的一个很好的代价。

# android - 为什么我的 Android logcat 日志在设备启动时丢失？

> ID：10367218
> 
> 赞同：1
> 
> 时间：2012-04-28T20:21:50.667
> 
> 标签：android, logcat, boot

我正在尝试使用我的应用解决用户手机上的问题。本质上，小部件在设备启动时无法更新。该用户现在向我发送日志文件（通过出色的[CatLog](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat)捕获）。但是，在启动时，当我应该看到 20-30（就像我在手机上所做的那样）时，我只在此用户日志中看到两个调试日志语句。奇怪的是，这两个语句位于执行更新的各种进程和代码的中间，因此它肯定已经执行了我的一些日志语句。关于为什么缺少其中一些陈述的任何想法？该用户手机上发生了很多事情，并且许多进程被操作系统杀死。那么我是否应该假设其中一些日志从未被记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:41:48.527

首先，在 android 中的日志是一个循环日志，这意味着如果你有很多日志记录在那里，那么旧​​的语句将被覆盖。您为什么不使用自定义解决方案，例如用于 android 的 microlog [http://code.google.com/p/microlog4android/](http://code.google.com/p/microlog4android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:50:06.917

您可以使用 command `logcat | grep 'YOURTAG'`，仅显示您的应用程序日志。它可以通过任何终端模拟器完成，或者使用 Android Debug Bridge (adb)

# android - Android：集成 Skiller 或 Swarm 的教程

> ID：10367226
> 
> 赞同：2
> 
> 时间：2012-04-28T20:23:19.947
> 
> 标签：android, social

我创建了一个应用程序，其中包含一些不同的游戏，并且我希望能够为用户提供与朋友一起玩的选项。我还想合并一个消息传递系统。我进行了搜索和搜索，并且遇到了一些不同的社交服务，例如 Skiller 和 Swarm。我唯一的问题是，我找不到任何教程来帮助我将它们集成到我的应用程序中。在开发过程中，我一直在自学，但在弄清楚如何使用 API 中提供的信息方面，我还不是最好的。我真的需要一些教程来帮助我解决这个问题。

有谁知道任何有关于 Skiller 或 Swarm 或类似的教程的网站/书籍？我愿意把工作放在学习上，但我找不到起点。

另外 - 如果有人使用过这些服务之一并且可以推荐一些东西，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:12:12.297

我来自斯基勒，很乐意帮助您解决任何问题。**您可以在Stackoverflow**中发布您的问题，发送电子邮件至**developers@skiller-games.com**。

此外，如果您在我们的网站上注册为开发人员并下载了 SDK，您会在此处找到：
1\. Javadoc - 包含所有 API 详细信息。
2\. 入门文档 - 说明应如何逐步使用 API。
3\. 三个游戏示例项目 - 如果需要，您可以将其导入并运行或复制/粘贴代码到您的游戏中。

我们上传了新版本的 Android SDK，其中包含更好的代码示例、更简单的 API 以及实时工具、挑战等新功能……

享受！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T20:29:05.753

我是 AddonDetector 的开发人员之一，为了集成社交游戏/交友等，我们发现了一些服务，除了这些服务之外，还可`Skiller`以为 Android 开发人员做这些事情：

[贝托](http://beintoo.com)

[HeyZap](http://www.heyzap.com)

[OpenFeint](http://www.openfeint.com)

[木瓜手机](http://www.papayamobile.com)

[计分循环](http://www.scoreloop.com)

也许这会对你有所帮助？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:39:29.733

[Swarm](http://swarmconnect.com)文档有几个不同的教程，具体取决于所需的集成和定制级别。为了快速集成，您可以按照从[设置指南](http://swarmconnect.com/admin/docs/setup)开始的教程进行操作，然后您可以从那里移动到涵盖其他社交功能的部分。如果您正在寻找全面的东西，这里有一个将 Swarm 集成到Android SDK 附带的[Lunar Lander 示例中的指南。](http://swarmconnect.com/admin/docs/lunarlander_basic)最后，如果您正在寻找创建完全自定义的外观和感觉，您可以遵循完全开源[的 Kiss The Fish 教程](http://swarmconnect.com/admin/docs/kissthefish)。

# mysql - 嵌套记录的 SQL 查询

> ID：10367229
> 
> 赞同：2
> 
> 时间：2012-04-28T20:23:34.393
> 
> 标签：mysql, sql

给定一个表中的记录在同一个表中有父级，并且这些父级有自己的父级，如果不同的记录可以有不同数量的父级，那么什么查询会得到我请求记录的所有父级的记录。

示例：我有记录 4 的 id 并想要获取所有父记录 (1,2,3)。当然我可以得到记录 4，看看谁是父母然后去获取记录 3，看看谁是父母然后去获取记录 2，直到我得到的记录没有父母，但是有没有一个查询可以让我得到所有记录？

```
Example Table:
ID | Type | Parent ID
----------------------------
1  |Master|
2  |Sub 1 | 1
3  |Sub 2 | 2
4  |Sub 3 | 3
5  |Master| 
6  |Sub 1 | 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:58:18.527

如果您假设一个固定的最大深度级别，则可以表示层次结构。例如，在这个示例中，我假设不超过四个深度级别。如果没有用于递归评估的公用表表达式，则除了这种类型的解决方案或使用变量之外，没有单一的查询方法。

```
Select T1.Id, T1.Type
    , Concat( Coalesce( Concat(Cast(T4.Id As char(10)),','),'')
        , Coalesce( Concat(Cast(T3.Id As char(10)),','),'')
        , Coalesce( Concat(Cast(T2.Id As char(10)),','),''))
        As Hierarchy
From ExampleTable As T1
    Left Join ExampleTable As T2
        On T2.Id = T1.ParentId
    Left Join ExampleTable As T3
        On T3.Id = T2.ParentId
    Left Join ExampleTable As T4
        On T4.Id = T3.ParentId 
```

# php - CSS背景中的PHP

> ID：10367236
> 
> 赞同：0
> 
> 时间：2012-04-28T20:24:23.040
> 
> 标签：php, css

我这里有这行 CSS 代码...

```
background-image:url(upload/<?php echo $array['image']; ?>); 
```

但是该死的东西不起作用，我得到的只是一个空白屏幕，图像在数据库中，也在服务器上的正确文件中。PHP 不能与 CSS 一起使用吗？

这不是 CSS 文件

提前致谢，J

这是完整的代码行...

```
<div style="width:100%; position:relative; margin:0 auto; padding-top:80px; height:350px; background-image:url(upload/<?php echo $array['image']; ?>); background-repeat:no-repeat; background-size:100%; text-align:center; padding-bottom:40px;"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:39:27.613

第1步：

我想你只是错过了报价，`url('something')` 所以应该是这样的：

```
<div style="width:100%; position:relative; margin:0 auto; padding-top:80px; height:350px; background-image:url('upload/<?php echo $array['image']; ?>'); background-repeat:no-repeat; background-size:100%; text-align:center; padding-bottom:40px;"> 
```

第 2 步：如果这不起作用，请向我们显示准确的输出，而不仅仅是“它不起作用”，复制显示页面的部分源代码，以便我们查看值是否打印正确，例如

第 3 步：如果还是不行，我建议你使用某些浏览器的“检查元素”功能来查看问题所在。我可以建议 Firefox 的 Firebug 扩展

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T20:25:55.790

在 CSS 文件中？~~不。~~（编辑 - 见评论）：在技术上可能是可行的，但看起来仍然像一个有很多缺点的计划。

在 PHP（或其他，如 html 模板）生成的输出中内联：是的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T20:33:35.203

PHP 不在乎它与什么一起工作。你可以将它用于 CSS 文件、JS 文件、图像，以及任何你想要的 oyu。这里重要的是脚本有一个扩展名，您的网络服务器将识别为 PHP，并且发送了正确的 mime 类型的标头。

如果您将 CSS 嵌入到您的 html 中，那么它应该更容易。如果它不起作用，那么您需要验证获取的输出文件是否确实正确以及选择器是否确实正确。首先尝试对`background-image`属性进行硬编码，看看是否可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T20:37:59.030

您的服务器很可能没有对 HTML 文件使用 php 解释器。将 html 文件的后缀更改为 .php，它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T20:42:52.543

只需将您当前的 .css 文件设置为 .php （或任何 PHP 将执行的文件，.php 将保证工作），然后让服务器将其声明为正确的 MIME 类型。扩展实际上并不重要。

blah.php（以前是 blah.css）

```
<?php
header('Content-type: text/css');
?>
.thing {blah;}
.other {blah;}
body {
     background-image:url(upload/<?php echo $array['image']; ?>);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-28T20:43:23.213

如果你想要一个动态的“css”文件，你可以创建一个 php 文件并处理变量。为了使其最佳化，`header("Content-type: text/css");`在抛出任何东西之前包含，然后放置你的 css 规则，并添加你的变量。

您现在可以调用您的文件`<link rel="stylesheet" type="text/css" href="your_php_file.php">`，也可以处理参数，例如`<link rel="stylesheet" type="text/css" href="your_php_file.php?layout=minimal">`

你最终的 php 将是这样的：

```
<?php
    header("Content-type: text/css");
?>

    body{
            width: 0px; // your coded rules 
            background: url(upload/<?php echo $array['image']; ?> // the dynamic one
    } 
```

是否在路径中添加引号都没有关系。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-28T20:26:28.310

不，PHP 不适用于 CSS，但使用模板引擎，`str_replace`或者`preg_replace`您可以`<style>`在 HTML 中的标签中输出 CSS。虽然这不是最好的主意。

# ruby-on-rails - 如何在 Ruby on Rails 中禁用对用户友好静态页面的默认救援？

> ID：10367239
> 
> 赞同：0
> 
> 时间：2012-04-28T20:25:04.207
> 
> 标签：ruby-on-rails

目前，当发生运行时错误时，我的开发环境会在页面上产生错误，但是当我在测试/生产服务器上时，它会产生用户友好的错误。我想要测试站点中的实际错误。有什么地方可以禁用它吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:01:43.650

这是一个配置设置。尝试设置

config.consider_all_requests_local = true

在 /config/environments/production.rb 和 /config/environments/test.rb

正如持有人指出的那样，在公共环境中这样做应该小心，因为它可能会暴露有关您的应用程序的敏感信息。

# mysql - 使用带有状态检查的 3 个表的棘手 SQL 语句

> ID：10367247
> 
> 赞同：0
> 
> 时间：2012-04-28T20:26:17.357
> 
> 标签：mysql, sql

也许有人可以对我一整天都在与之抗争的声明有所了解:)

我有 3 张桌子

**假期**

```
holidayID | userID | dateFrom   | dateTo
1         |      1 | 2012-01-01 | 2012-01-01
2         |      1 | 2012-01-15 | 2012-01-20 
```

**地位**

```
statusID | holidayID | statusText
1        |         1 | accepted
2        |         2 | declined 
```

**用户设置**

```
id | userID | HolidaysAllowed
1  |      1 | 20 
```

我想要做的是得到以下结果

**结果**

```
HolidaysAllowed | HolidaysLeft (Allowed - Taken) | HolidaysTaken (Sum of Holidays)
20              |                             19 |      1 
```

如果我不说明状态，我可以获得所有三列 - 这是我得到的最接近的

```
SELECT 
IFNULL(SUM( IF(  h.dateTo = h.dateFrom, 1, DATEDIFF( h.dateTo, h.dateFrom ) ) ), 0) AS holidaysTaken, 
IFNULL(us.HolidaysAllowed - ( SUM(  IF(  h.DateTo = h.DateFrom, 1, DATEDIFF( h.DateTo, h.dateFrom ) ) ) ), 0) AS holidaysLeftover, 
us.HolidaysAllowed
FROM userSettings us 
LEFT JOIN holiday h 
ON h.userID = 1 
JOIN status s 
ON s.holidayID = h.holidayID AND s.statusID = 1 
WHERE 
us.userID = 1
GROUP BY h.userID; 
```

主要问题是，如果没有 statusID = 2 的假期，则结果列 1 和 2 为 0（这是正确的）但第 3 列（HolidaysAllowed）为 NULL（不正确，因为它需要始终从表 UserSettings 返回值） . 仅当至少有 1 条记录（假期）具有正确的状态时，上述查询才会返回正确的响应......我做错了什么？:)

它只是让我发疯:)提前感谢您的帮助！非常感激！

**更新**

感谢所有评论的人......预期结果如下获取所有状态= 1（即接受）的假期，然后根据允许的假期计算假期统计数据。IE

总共 20 天，接受 1 个假期 = 还剩 19 天

再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T22:12:08.137

```
SELECT u.userID, u.HolidaysAllowed,
u.holidaysAllowed - 
COALESCE( 
    (SELECT SUM( DATEDIFF( h1.dateTo, h1.dateFrom) + 1) 
         FROM holiday h1 
         INNER JOIN status s1
         ON s1.holidayID = h1.holidayID
         WHERE h1.userID = u.userID
         AND s1.statusID = 1
     ), 0) AS HolidaysLeft,
COALESCE( 
    (SELECT SUM( DATEDIFF( h2.dateTo, h2.dateFrom) + 1) 
         FROM holiday h2 
         INNER JOIN status s2
         ON s2.holidayID = h2.holidayID
         WHERE h2.userID = u.userID
         AND s2.statusID = 1
     ), 0) AS HolidaysTaken
FROM userSettings u
; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:29:46.867

以下查询不考虑周末。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!2/a5267/6)

*脚本*：

```
CREATE TABLE Holiday 
(       
        holidayid   INT         NOT NULL AUTO_INCREMENT
    ,   userid      VARCHAR(20) NOT NULL 
    ,   dateFrom    DATETIME    NOT NULL 
    ,   dateTo      DATETIME    NOT NULL 
    ,   PRIMARY KEY(holidayid)
);

CREATE TABLE Status
(       
        id          INT         NOT NULL AUTO_INCREMENT
    ,   holidayid   INT         NOT NULL
    ,   statusid    INT         NOT NULL
    ,   PRIMARY KEY(id)
);

CREATE TABLE UserSettings
(       
        id              INT     NOT NULL AUTO_INCREMENT
    ,   userid          INT     NOT NULL
    ,   HolidaysAllowed INT     NOT NULL
    ,   PRIMARY KEY(id)
);

INSERT INTO  Holiday (userid, dateFrom, dateTo) VALUES
    (1, '2012-04-01', '2012-04-03'),
    (2, '2012-04-04', '2012-04-05'),
    (2, '2012-04-07', '2012-04-09'),
    (3, '2012-04-09', '2012-04-12'),
    (3, '2012-04-16', '2012-04-16'),
    (1, '2012-04-19', '2012-04-22');

INSERT INTO  Status (holidayid, statusid) VALUES
    (1, 2),
    (2, 1),
    (3, 1),
    (4, 1),
    (5, 2),
    (6, 2);

INSERT INTO  UserSettings (userid, HolidaysAllowed) VALUES
    (1, 5),
    (2, 10),
    (3, 7),
    (4, 6);

SELECT  u.userid
    ,   u.HolidaysAllowed
    ,   u.HolidaysAllowed - COALESCE(hol.HolidaysTaken, 0) AS HolidaysLeft
    ,   COALESCE(hol.HolidaysTaken, 0) AS HolidaysTaken
FROM
(
    SELECT          h.userid
                ,   ABS(SUM(
                      CASE 
                        WHEN statusid = 1 THEN DATEDIFF(dateTo, dateFrom) + 1
                        ELSE 0 END
                    )) HolidaysTaken

    FROM            UserSettings    us
    LEFT OUTER JOIN Holiday         h
    ON              us.userid       = h.userid
    LEFT OUTER JOIN Status          s
    ON              s.holidayid     = h.holidayid
    GROUP BY        h.userid
)                   hol
RIGHT OUTER JOIN    UserSettings u
ON                  u.userid = hol.userid; 
```

*输出*：

```
USERID HOLIDAYSALLOWED HOLIDAYSLEFT HOLIDAYSTAKEN
------ --------------- ------------ -------------
1             5              5            0
2            10              5            5
3             7              3            4
4             6              6            0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:11:13.447

```
SELECT B.HolidaysAllowed AS HolidaysAllowed,
       B.HolidaysAllowed-A.HolidaysTaken AS HolidaysLeft,
       A.HolidaysTaken AS HolidaysTaken
FROM
(
 SELECT A.userID,SUM(CASE WHEN DATEDIFF(A.dateTo,A.dateFom)=0
                          THEN 1
                          ELSE DATEDIFF(A.dateTo,A.dateFom)
                    ) AS HolidaysTaken
 FROM Holiday A,Status B
 WHERE A.holidayID = B.holidayID
   AND A.statusText='accepted'
 GROUP BY useID
) A,
UserSettings B
WHERE A.userID = B.userID; 
```

# c# - 动态生成的查询？

> ID：10367261
> 
> 赞同：0
> 
> 时间：2012-04-28T20:27:36.860
> 
> 标签：c#, linq

我想知道是否可以动态执行以下查询。

```
 var perms = from a in matrix[0]
                    from b in matrix[1]
                    from c in matrix[2]
                    select new[] { a, b, c}; 
```

矩阵是一个动态对象，无论矩阵尺寸如何，我都希望有相同的查询工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:39:53.383

您可以使用聚合器完成此操作：

```
IEnumerable<IEnumerable<int>> l = new[] { Enumerable.Empty<int>() };
var perms = matrix.Aggregate( l, (accumulator, seq) =>
  from a in accumulator from s in seq select a.Concat( new[] { s } ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:58:38.803

是否有必要将矩阵声明为`dynamic`？我认为这段代码可以如你所愿：

```
 var matrix = new int[3][] { new int[] { 1 }, new int[] { 2, 2 }, new int[] { 3, 3, 3 } };
 var perms = from a in matrix[0]
             from b in matrix[1]
             from c in matrix[2]
             select new[] { a, b, c }; 
```

# objective-c - Initializer 元素不是编译时常量错误

> ID：10367267
> 
> 赞同：0
> 
> 时间：2012-04-28T20:28:19.120
> 
> 标签：objective-c, cocoa-touch, compiler-errors

我正在实施[`IIViewDeckController`](https://github.com/Inferis/ViewDeck)到我的应用程序中。

当我尝试替换 IBAccount 以转到该屏幕时，出现错误：

> Initializer 元素不是编译时常量

代码的第一部分是我现在拥有的，并且`UIViewController`来自`IIViewDeckController`我想用来加载的`FirstAccountViewController`。

```
-(IBAction)account{
    FirstAccountViewController* ab=[[FirstAccountViewController alloc] init];
    [self.navigationController pushViewController:ab animated:YES];
    UIViewController* leftController = [[UIViewController alloc] init]; 
}

UIViewController* leftController = [[FirstAccountViewController alloc] init]; 
IIViewDeckController* deckController =  [[IIViewDeckController alloc] initWithCenterViewController:self.centerController leftViewController:leftController
                                                                           rightViewController:rightController]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:54:06.197

你在这里声明了全局变量：

```
UIViewController* leftController =
    [[FirstAccountViewController alloc] init]; 
IIViewDeckController* deckController =
    [[IIViewDeckController alloc] initWithCenterViewController:self.centerController leftViewController:leftController rightViewController:rightController]; 
```

并且您正在尝试在没有上下文的情况下初始化它们（例如，您传递的参数 - 应该没有 global `self`）。

你不想要一个全局变量，你不能这样声明它，因为它不能在这个上下文中正确初始化，而且因为它在 C 和 ObjC 中格式不正确。

在这种情况下，我建议使用 ivar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:38:28.180

```
UIViewController* leftController = [[FirstAccountViewController alloc] init]; 
IIViewDeckController* deckController =  [[IIViewDeckController alloc] initWithCenterViewController:self.centerController leftViewController:leftController rightViewController:rightController]; 
```

是的，那是错误的——如果你想在启动时初始化全局变量（尽管你根本不建议使用全局变量），你需要使用一个 initalizer 函数：

```
UIViewController *leftController;
IIViewDeckController *deckController;

__attribute__((constructor))
void __init()
{
    leftController = [[FirstAccountViewController alloc] init]; 
    deckController =  [[IIViewDeckController alloc] initWithCenterViewController:self.centerController leftViewController:leftController rightViewController:rightController];

} 
```

# c++ - 在C++中调用基类的ostream友元函数

> ID：10367271
> 
> 赞同：6
> 
> 时间：2012-04-28T20:28:36.803
> 
> 标签：c++, iostream

所以，我有两个课程：

```
class Base {
    private:
        int number;
    public:
        friend ostream & operator<<(ostream & output, const Base &n);
}

ostream & operator<<(ostream & output, const Base &n) {
    output<<n.a<<endl;
    return output;
}

class Child : Base {
    private:
        int second;
    public:
        friend ostream & operator<<(ostream & output, const Child &n);

}

ostream & output<<(ostream & output, const Child &n) {
    output<<n.second<<Base:: ????<<endl;
    return output;
} 
```

我的问题是，如何从子类调用基类的友元函数来输出其内容：

```
output<<n.second<<Base:: ????<<endl 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T20:36:46.360

```
output<<n.second<<static_cast<const Base&>(n)<<endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T20:40:52.467

如果你不喜欢铸造：

```
ostream & operator<<(ostream & output, const Child &n) {
    const Base& b(n);

    output<< n.second << b << endl;
    return output;
} 
```

顺便说一句，一般来说，最好将`std::endl`流式传输给调用者。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T20:49:02.440

实际上......我会提出一个替代方案。

没有虚拟方法的基类没有什么意义，所以让我们只添加一个虚拟方法:)

```
class Base {
public:
  virtual void print(std::ostream& out) const { /**/ }

};

inline std::ostream& operator<<(std::ostream& out, Base const& b) {
    b.print(out); return out;
} 
```

现在，我们在派生类中重写它：

```
class Derived: public Base {
public:
    virtual void print(std::ostream& out) const override {
        out << /* specific */;
        this->Base::print(out); /* base */
    }
}; 
```

# photoshop - Photoshop图案程序

> ID：10367275
> 
> 赞同：0
> 
> 时间：2012-04-28T20:28:56.123
> 
> 标签：photoshop

假设我没有 Photoshop，但我想用图像制作图案文件 (.pat)。是否有任何类型的 API 可以做到这一点。我在网上搜索过，但没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:07:12.327

@chrene Hrm....有趣。如果我理解正确的话，我以前做过类似的事情，请查看：[www.generatorx.no](http://www.generatorx.no) / 或[www.artofillusion.org](http://www.artofillusion.org) / 或者这种东西是艺术家为艺术家创造的软件。我不确定你所说的算法是什么意思，但如果你的意思是这样的：www.processing.org/ 你肯定可以通过那个平台做到这一点。祝你好运，我希望我有所帮助。我在处理方面进行了相当广泛的工作，所以如果您有任何其他问题，请告诉我。小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:44:24.190

Paint Shop Pro Photo X2、CorelDRAW Graphics Suite、ACD Systems Canvas 11 都是您可以使用和查看 .pat 文件的程序。至于创建 .pat 文件，我确信 Corel 有能力制作它们。

# java - 如何捕获 parseInt 抛出的 NumberFormatException

> ID：10367276
> 
> 赞同：4
> 
> 时间：2012-04-28T20:29:00.260
> 
> 标签：java, parseint, numberformatexception

我被这个问题困住了~：

**Integer.parseInt 方法将数字字符串转换为它表示的 int 数字。**

```
public static int parseInt (String s)
             throws NumberFormatException 
```

**解释如何捕获 parseInt 抛出的异常，并用代码示例说明你的答案。**

到目前为止，我想到的答案是：

```
try
{
   System.out.println("incorrect");

}

catch (NumberFormatException n)
{
   System.out.println("WRONG! This is not a number");
} 
```

我感觉这个答案是错误的，因为上面的代码只会在 main 方法中使用，我不确定如何在以下情况下捕获异常：

```
public static int parseInt (String s)
             throws NumberFormatException. 
```

我已经查看了 parseInt 方法的 java API 并查看了各种研究并尝试编写代码，但是由于我缺乏理解，我仍然在努力做到这一点。

如果有人可以帮助我，我将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T20:31:40.677

由于这是作业，我只是给你一个提示：你必须*调用*该方法，并用适当的`try`-`catch`块包围调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T20:31:53.650

```
 String numStr = "15A";
try {
  int num = Integer.parseInt(numStr);
} catch (NumberFormatException nfe) {
  // not a number
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T20:38:45.693

这很简单，

*   在 try 块中，您尝试做某事。因此，您尝试将字符串的值解析为数字。在 try 块中，您可以编写任意数量的语句。
*   当这不能正常工作时，您有一个 catch 块，您可以在其中对发生的某些异常做出反应（例如，您告诉用户出了点问题）
*   另外还有一个 finally 块，它总是执行，是否发生异常没有区别

我希望这有帮助。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T20:39:22.097

捕获（在 Java 中称为捕获）异常不是发生在抛出它的方法内（`parseInt`在您的示例中），而是发生在调用它的地方。`Integer.parseInt(someString)`因此，当您在 try-block 中添加时，您的示例会很好。

# django - mp3 发送正常，但 mp4 不发送（Django 和 X-Sendfile）

> ID：10367279
> 
> 赞同：0
> 
> 时间：2012-04-28T20:29:08.390
> 
> 标签：django, mp3, mp4, x-sendfile

在我的网页上单击播放后，从服务器发送了一个 mp3 文件，在浏览器中只看到发送了 3 个请求。我添加到响应 X-Sendfile 标头中，响应到达时没有它，所以我了解 mod_xsendfile 配置正常。

**奇怪的是，当我在mp4**上单击播放时，浏览器开始发送**数百个**请求，电影开始并卡住了！此处的响应中没有“X-Sendfile”标头...

如果我将 cideo 元素中的源更改为其他站点的某个 mp4 文件 - 一切正常（电影运行顺利且只有几个请求）。

*问题是什么？*

### 一些代码...

HTML：

```
<video id="videoId" preload="none" controls="controls" width="300px" height="286px" src="url/of/file.mp4">
    Sorry, unable to play video.
</video> 
```

.ht 访问：

```
<filesMatch "\.(mp3|ogg|mp4)$">
    XSendFile on
</filesMatch> 
```

响应标头：（mp4）

```
Accept-Ranges:bytes
Connection:Keep-Alive
Content-Disposition:filename=fileName.mp4
Content-Length:1392497
Content-Range:bytes 8382477-9774973/9774974
Content-Type:video/mp4
Date:Sat, 28 Apr 2012 20:27:07 GMT
Keep-Alive:timeout=5, max=100
Last-Modified:Sat, 14 Apr 2012 12:47:10 GMT
Server:Apache 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:31:19.740

问题是...... MP4文件的编码！

# algorithm - 如何对不随排列变化的数字进行哈希处理？

> ID：10367282
> 
> 赞同：2
> 
> 时间：2012-04-28T20:29:28.403
> 
> 标签：algorithm, hash

我需要一个算法来为一个整数生成一个唯一的哈希，而不是固定长度，这样它就独立于数字的排列。

比如，123、321、312、213...的哈希值应该是一样的。（忽略前导零）

我试图将每个数字都提高到自身并总结。喜欢，

```
Hash(321) = 3**3 + 2**2 + 1**1 
```

现在，我不确定它是否会产生冲突，而且对于大量数据来说，当然存在性能问题。有什么选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T20:33:30.477

一种选择：对数字进行排序。123、321、312 和 213 都转到 123。

另一种选择：使用每个数字的计数向量作为散列。123、321、312 和 213 都转到 [0,1,1,1,0,0,0,0,0,0]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:33:11.507

您只需要任何散列函数（让我们使用 md5）和一种可交换连接事物的方法。取每个数字的哈希值，然后用交换方法将它们连接起来。例如，如果我选择 md5 和加法，那么我可以 md5 每个数字并添加结果哈希。如果我选择使用 sha1 和乘法，这会给我一个不同的结果，但它仍然具有您想要的属性。碰撞的问题更难......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T20:33:23.550

只需使用交叉和作为算法

# eclipse - m2eclipse 无法找到 C:\Program Files\Java\jre6\..\lib\tools.jar

> ID：10367286
> 
> 赞同：5
> 
> 时间：2012-04-28T20:30:43.897
> 
> 标签：eclipse, maven, java, m2eclipse

我有一个问题，关于我的 Eclipse 的 jdk/jre 使用。我知道这个问题在这里被问了很多次并回答了很多次，我研究了很长一段时间可能出现的问题。我实际上没有找到任何东西，所以我会再问你一次。也许我错过了一些东西（如果是的话，我希望这不会令人尴尬:)

我的问题是，当我运行 mvn clean install 时，我收到一条错误消息，指出 m2eclipse 插件是“无法在以下位置找到 Javac 编译器：C:\Program Files\Java\jre6..\lib\tools.jar ”。

我检查的第一件事是是否在 Eclipse 中配置了正确的 JRE。所以我切换到 Window > Preferences > Java > Installed JREs 并检查所选的 jre 是否是我的 jdk 文件夹中的 jre。情况就是这样。

我检查了 eclipse.ini 并在其中添加了一个 -vw 标志。现在看起来像：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
 org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vm
"%JAVA_HOME%\bin\javaw.exe"
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx384m 
```

%JAVA_HOME% 解析为 C:\Program Files\Java\jdk1.6.0_24。因为它包含一个空格，所以我用引号包围了 vw 路径。为了检查路径是否真的正确，我试过了

```
C:\Windows\System32>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.6.0_24 
```

这告诉我这是正确的。我还尝试在启动 Eclipse 时传递 -vw 选项。所以启动eclipse的命令是

```
D:\Programs\eclipse\eclipse.exe -vm "%JAVA_HOME%\bin\javaw.exe" 
```

我还测试了使用 %JAVA_HOME% 表示法或编写完整路径时是否存在差异（没有区别）。

当我转到帮助 > 关于 Eclipse > 安装详细信息 > 配置时，我得到的 eclipse 配置如下所示：

```
__wbp.gwt.useWebKit=true
awt.toolkit=sun.awt.windows.WToolkit
veclipse.application=org.eclipse.ui.ide.workbench
eclipse.buildId=M20120208-0800
eclipse.commands=-os
win32
-ws
win32
-arch
x86_64
-showsplash
-launcher
D:\Programs\eclipse\eclipse.exe
-name
Eclipse
--launcher.library
D:\Programs\eclipse\\plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110    502\eclipse_1406.dll
-startup
D:\Programs\eclipse\\plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.overrideVmargs
-exitdata
3e30_64
-product
org.eclipse.epp.package.java.product
-vm
C:\Program Files\Java\jdk1.6.0_24\bin\javaw.exe
eclipse.home.location=file:/D:/Programs/eclipse/
eclipse.launcher=D:\Programs\eclipse\eclipse.exe
eclipse.launcher.name=Eclipse
eclipse.p2.data.area=@config.dir/../p2/
eclipse.p2.profile=epp.package.java
eclipse.product=org.eclipse.epp.package.java.product
eclipse.startTime=1335643108722
eclipse.vm=C:\Program Files\Java\jdk1.6.0_24\bin\javaw.exe
eclipse.vmargs=-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx384m
-XX:MaxPermSize=256m
[...] 
```

我还尝试使用位于 %JAVA_HOME%\jre\bin\ 中的 javaw.exe，它也不会改变任何内容。

有点奇怪的是，如果我删除对 j​​re 的引用，即 jdk 中未包含的引用，在 Window > Preferences > Java > Installed JREs 中我收到一条错误消息，提示“指定的 JRE 安装确实不存在”。

有谁知道我做错了什么？我想我尝试了任何事情来让它发挥作用，根据其他文章，我发现我做得对。

顺便说一句：我做了一些 Maven“更新项目依赖项”和“更新依赖项”工作，所以我没有得到任何错误。唯一没做的就是重启电脑...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-02T13:40:21.350

1.  转到 Windows --> 已安装的 JRE
2.  选择已安装的 JRE 并单击编辑
3.  将 JRE 主目录更改为 PATH_TO_YOURJDK\jre（以前是 PATH_TO_YOUJRE）
4.  这对我有用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T11:15:54.217

我想出了一个似乎可行的解决方法。这并不是我希望的解决方案，但至少我现在可以使用 maven。

我在与 jdk 和 jre 文件夹相同的文件系统中创建了一个新文件夹。我将它命名为 lib 并将 tools.jar 文件从 jdk 复制到其中。

此外，我从 java SE 的“普通”eclipse 切换到 Java EE 的 eclipse（我正在使用 EJB）。eclipse 的版本是我们从大学获得的版本，所以我不知道是否安装了我错过在我的（java SE）eclipse 上安装的插件。

现在它似乎可以工作，但如果有人有可能以更优雅的方式解决该问题的解决方案，请告诉我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T07:29:47.470

看到[这个答案](https://stackoverflow.com/questions/5079523/running-j2ee-eclipse-in-a-vm-unable-to-find-a-javac-compiler)。它建议您需要将 PATH 设置为指向 Java bin 目录。在我自己的情况下，这是设置的：

```
D:\workspace>echo %PATH%
C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;
C:\Windows;C:\Windows\System32\Wbem; ...
C:\Program Files\Java\jdk1.7.0_02\bin; ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-28T05:58:39.040

我注意到这已经是一个老问题了，但是有一个更好的解决方案。首先，Eclipse 会询问“Installed JREs”，但实际上您应该在此处提供 JDK。就像提到的 Styler 一样，但不是单独导入 tools.jar，而是在“已安装的 JRE”中定义 JDK。然后它会从“基本 java”中找到所需的一切，而不需要额外的导入来构建路径（你也不应该将任何东西移入或移出 JDK 文件夹，这可能会破坏软件的可移植性）。另请注意，选择“项目”>“ Java编译器”时，有一个选项：“启用项目特定设置”。如果您选择了此选项，则它可能指定要使用的“JRE”与您在“窗口”>“首选项”>

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-08T05:46:05.007

编辑：您提到您在构建路径中引用了 JDK 中的 JRE。那么您是否注意到 tools.jar 也不**在**此 JRE 文件夹中？tools.jar 仅包含在 /lib 文件夹中。不是 JDK 中的 JRE。

这在我的项目中也不断出现。无论出于何种原因，Eclipse 一直告诉我它无法找到 tools.jar。我已经为这个项目修复了几次，今晚它又回来了。以下是我如何一劳永逸地修复它。

原因是您的 Java 构建路径中包含的库中有 JRE6。但是 tools.jar 不包含在任何 JRE 中，您需要从 JDK 中导入 tools.jar。

只需转到 Properties for -> Java Build path -> Libraries (Tab) -> Add External JARs.. 并在 /lib 文件夹中选择您的 JDKs tools.jar 文件，即可解决问题。见下图。

![在此处输入图像描述](../Images/3249cb5a4cc8de158d4927c2198cb814.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-17T14:33:11.657

问题在于你的定义`JAVA_HOME`

```
C:\Windows\System32>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.6.0_24 
```

什么时候应该

```
C:\Windows\System32>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.6.0_24\jre 
```

变量 JAVA_HOME 应该指向 Java Runtime 目录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-20T07:45:23.413

以下是帮助我解决问题的步骤列表。

**第 1 步：“属性”（窗口）：**

右键单击您的项目-> 属性-> Java 构建路径-> JRE 系统库（选择）-> 编辑。

**第 2 步：“JRE 系统库”（窗口）：**

备用 JRE（选择并选择 JRE）-> 已安装的 JRE（单击）。

**第 3 步：“首选项（过滤）”（窗口）**

在“已安装的 JRE”下选择 JRE -> 编辑（单击）

**第 4 步：“编辑 JRE”（窗口）**

单击“添加外部 JAR”

**第 5 步：“JAR 选择”（窗口）**

选择'tools.jar'（在JDK->lib下）-->'Open'->'Finish'-->'OK'-->'Finish'-->'OK'。

我们很高兴！希望这可以帮助..

# r - 使用 knitr 从 R 中编写 html

> ID：10367293
> 
> 赞同：7
> 
> 时间：2012-04-28T10:46:26.163
> 
> 标签：r, reporting, knitr

也许我错过了显而易见的事情，但我一直在努力寻找以下示例：我想使用`knitr`包将我在 R 中的分析报告写入 html 文件。我已经找到了这个`stitch()`功能，但是最好能更好地控制哪些结果和图被写入 html 而哪些不是。原则上，我希望能够编写以下代码：

```
# some dummy code
library(ggplot)
data <- read.table('/Users/mydata', header=TRUE)
model <- lm(Y~X*Y, data)

# write this result to html:
summary(model) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T17:22:57.737

我想我不完全了解您缺少什么，但这是我制作的一个最小示例。运行这个

```
library(knitr)
knit("r-report.html") 
```

还有例子。

```
<HTML>
<HEAD>
  <TITLE>Analyzing Diamonds!</TITLE>
</HEAD>

<BODY>
<H1>Diamonds are everywhere!</H1>

<!--begin.rcode echo=FALSE

## Load libraries, but do not show this
library(ggplot2)
library(plyr)
testData <- rnorm(1)
end.rcode-->

This is an analysis of diamonds, load the data.<p>
<!--begin.rcode echo=TRUE, fig.keep="all"
# Load the data
data(diamonds)
# Preview
head(diamonds)
end.rcode-->

Generate a figure, don't show code <p>
<!--begin.rcode echo=FALSE, fig.align="center", dev="png"
# This code is not shown, but figure will output
qplot(diamonds$color, fill=diamonds$color) + 
  opts(title="A plot title")
end.rcode-->

Show some code, don't output the figure<p>
<!--begin.rcode echo=TRUE, fig.keep="none"
# Show the code for this one, but don't write out the figure
ggplot(diamonds, aes(carat, price, colour=cut)) + 
  geom_point(aes(alpha=0.9))
end.rcode-->

And the value testData: <!--rinline testData --> inside a text block.

</BODY>
</HTML> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T20:26:35.150

在我看来，在 R 中编写 HTML 比编写模板和它要费力得多`knit()`（@dready 给出了一个不错的例子）。代码会相当难看，你会看到很多“猫”跳来跳去。你最终可能会得到这样的结果：

```
sink('test.html') # redirect output to test.html
cat('<h1>First level header</h1>\n')
cat('<pre>')
summary(mtcars)
cat('</pre>\n')
sink()
browseURL('test.html') 
```

无论如何，在这种情况下，还有另一个包`R2HTML`可能更合适。

# python - 什么在这个 python 代码中产生“TypeError 字符映射必须返回整数......”？

> ID：10367302
> 
> 赞同：21
> 
> 时间：2012-04-28T20:32:42.820
> 
> 标签：python, google-app-engine, typeerror

拜托，有人可以帮我写下面的代码吗？当我运行它时，日志说：

```
return method(*args, **kwargs)
  File "C:\Users\CG\Documents\udacity\rot13serendipo\main.py", line 51, in post
    text = rot13(text)
  File "C:\Users\CG\Documents\udacity\rot13serendipo\main.py", line 43, in rot13
    return st.translate(tab)
TypeError: character mapping must return integer, None or unicode
   INFO     2012-04-28 20:02:26,862 dev_appserver.py:2891] "POST / HTTP/1.1" 500 - 
```

我知道错误必须在 rot13() 中。但是当我在 IDE 中运行此过程时，它可以正常工作。

这是我的代码：

```
import webapp2

form= """
  <html>
  <head>
    <title>Unit 2 Rot 13</title>
  </head>

  <body>
    <h2>Enter some text to ROT13:</h2>
    <form method="post">
      <textarea name="text"
                style="height: 100px; width: 400px;"></textarea>
      <br>
      <input type="submit">
    </form>
  </body>

  </html> """

def rot13(st):
    import string
    tab1 = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
    tab2 = 'nopqrstuvwxyzabcdefghijklmNOPQRSTUVWXYZABCDEFGHIJKLM'
    tab = string.maketrans(tab1, tab2)
    return st.translate(tab)

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(form)

    def post(self):
        text = self.request.get("text")
        text = rot13(text)
        self.response.out.write(text)

app = webapp2.WSGIApplication([('/', MainHandler)],
                          debug=True) 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-28T20:37:49.920

这可能是因为文本是作为 unicode 输入的：

```
>>> def rot13(st):
...     import string
...     tab1 = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
...     tab2 = 'nopqrstuvwxyzabcdefghijklmNOPQRSTUVWXYZABCDEFGHIJKLM'
...     tab = string.maketrans(tab1, tab2)
...     return st.translate(tab)
... 
>>> rot13('test')
'grfg'
>>> rot13(u'test')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 6, in rot13
TypeError: character mapping must return integer, None or unicode
>>> 
```

这个问题涵盖了您需要的内容：

*   [如何让 str.translate 使用 Unicode 字符串？](https://stackoverflow.com/questions/1324067/how-do-i-get-str-translate-to-work-with-unicode-strings)

如果您确定 unicode 字符串不重要，我想您可以：

```
return str(st).translate(tab) 
```

# font-face - IE 不打印 font-face (8)

> ID：10367311
> 
> 赞同：0
> 
> 时间：2012-04-28T20:33:48.967
> 
> 标签：font-face

我想在字体系列中打印我的标题，每个系统都不支持。我使用了以下“字体生产者”建议的代码：

```
<div id="header-ds">
<div id="h1div">
<h1 id="h1">
<sup>lastminute-hinterher.de/</sup>
<span id="h1ds" style="font-family: Delicious, sans-serif;">dark-side</span>
</h1>
</div>
</div> 
```

样式表的区域——我已经和一位朋友谈过，他向我推荐了其他文件类型 eot 和 svg。

```
@font-face {
font-family: Delicious;
src: url('FancyCardText.eot');
src: url('FancyCardText.ttf') format('truetype'),
url('FancyCardText.svg#font') format('svg');
font-weight:bold;
} 
```

在 FF (11) 中完美运行 - 在 IE (8) 中，字母以普通的无衬线字体打印。其他浏览器尚未测试。

谢谢您的帮助。

# mysql - 锁定mysql表列

> ID：10367312
> 
> 赞同：0
> 
> 时间：2012-04-28T20:34:06.427
> 
> 标签：mysql, locking

是否可以锁定mysql表中的选定列，例如table1的列：col1，col2，其中col1将被锁定，现在可以在col2打开进行更新时进行更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:40:37.750

听起来您想要的是防止 col1 中的值被更新。如果是这种情况，那么您可能希望考虑在 table1 上使用带有 BEFORE UPDATE 子句的 UPDATE[触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)，并实现只允许更新 col2 中的值但不允许更新该触发器中的 col1 的逻辑。

# excel - Excel 快捷方式打开最新安装的版本

> ID：10367313
> 
> 赞同：2
> 
> 时间：2012-04-28T20:34:17.593
> 
> 标签：excel

首先是的，我在另一个板上发布了这个，但我给了他们足够的时间来回答，但没有收到。

快捷方式是否有可能能够执行他们安装的最新版本的 MS Excel？这样，人们就不需要为每个版本的 Excel 打开同一个文档的不同快捷方式。谢谢！

例如 Excel 2007 快捷方式使用“C:\Program Files\Microsoft Office\Office12\EXCEL.EXE”

Excel 2003 快捷方式使用“C:\Program Files\Microsoft Office\OFFICE11\EXCEL.EXE”

如果用户拥有的最新版本是 2007，那么我希望快捷方式使用 2007。如果用户拥有的最新版本是 2003，那么我希望它使用 2003。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:33:57.533

如果`LatestExcel.bat`包含以下内容，单击它会产生您想要的效果。

```
@echo off
if exist "C:\Program Files\Microsoft Office\Office12\EXCEL.EXE" GOTO L2007
if exist "C:\Program Files\Microsoft Office\Office11\EXCEL.EXE" GOTO L2003
echo "Excel not installed"
pause
GOTO End
:L2007
Call "C:\Program Files\Microsoft Office\Office12\EXCEL.EXE"
GOTO End
:L2003
Call "C:\Program Files\Microsoft Office\Office11\EXCEL.EXE"
:End 
```

**替代解决方案**

`CALL`，我在第一个解决方案中使用，将控制权交给另一个批处理文件或程序，但在该批处理文件或程序完成后收回控制权。这就是为什么`CMD.EXE`保持活跃。我以为我记得一个切换控制的批处理命令，但我找不到它；我一定在考虑另一种脚本语言。

顺便提一句。如果您使用 Google 搜索“Windows 批处理文件命令”，您会看到一系列网站，这些网站提供批处理文件命令的教程或语法。但是，我通常使用命令`Help` `Pause`或`Help Copy` `Pause`.

对于这个解决方案，我创建了两个快捷方式，一个用于 Excel 2003，一个用于 Excel 2007，并将它们放置在 Temp 中。`PickLatestExcel.bat`我使用以下语句创建了批处理文件。我在常规文件夹和桌面上尝试了它，在这两种情况下它都移动了正确的快捷方式文件并重命名了它`Excel`。

我不知道您的操作环境，但也许这两个解决方案会让您了解使用批处理文件可以实现什么。

```
rem @echo off
if exist "C:\Program Files\Microsoft Office\Office12\EXCEL.EXE" GOTO L2007
if exist "C:\Program Files\Microsoft Office\Office11\EXCEL.EXE" GOTO L2003
echo "Excel not installed"
pause
GOTO End
:L2007
Copy "C:\Windows\Temp\Excel2007.lnk" Excel.lnk
GOTO End
:L2003
Copy "C:\Windows\Temp\Excel2003.lnk" Excel.lnk 
:End 
```

# php - 如何在 PHP 中使用 IF（或其他）语句来查找 MYSQL 表？

> ID：10367316
> 
> 赞同：-1
> 
> 时间：2012-04-28T20:34:45.513
> 
> 标签：php, mysql

我对 PHP 很陌生，所以如果这似乎是一个愚蠢的问题，我深表歉意。我正在使用带有 MYSQL 数据库的 PHP 代码。

我基本上有下面的代码，它有一个 HTML 菜单，其链接由 PHP 变量生成。这是主页（此文件以“pg1”结尾）。如果有一个同名但以“pg2”结尾的文档，我希望该文件检查我的 MYSQL 数据库。我正在创建两个变量，一个最后带有 pg1($fpname1)，另一个带有 pg2($fpname2)。然后如何让它在我的数据库中查找名称 = $fpname2 的表？我知道，如果它找到表，我可以放一个“else”，然后是我想包含在菜单链接中的 html。

这是到目前为止的相关代码：

```
$fpname1 = $web_user."ID".$web_number."webID_"."pg1".".php";
$fpname2 = $web_user."ID".$web_number."webID_"."pg2".".php";

?>
<div class="menu">
<ul>
<li><a href="<?php echo $fpname1; ?>">Home</a></li>
</ul>
</div> 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:39:08.440

我想你有一个 information_schema 数据库。其中有一个名为 TABLE 的表。因为所有的 table_names 都被保留了。因此，如果您在数据库 information_schema 中进行查询： SELECT table_schema FROM TABLES where table_name = example 如果 table_schema 为空，则没有表，否则存在该表所在的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:37:55.313

`SELECT * FROM table WHERE page LIKE '%variable%'`

然后您将检查查询返回的行数，如果该数字大于 0，则至少返回 1 页，否则永远找不到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T08:32:47.797

看起来你的数据库设置是错误的。
您必须将所有页面存储在一张表中，而不是很多。

您正遭受 SQL 注入的直接后果。以及过于复杂和不可维护的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T20:40:11.540

```
SELECT * FROM table WHERE page LIKE '%pg_.php' 
```

`pg0`这将选择范围之间的所有页面`pg9`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-28T20:38:36.480

您必须使用该`mysql_num_rows`功能。

```
$fetch = mysql_query("SELECT * FROM example") or die(mysql_error());
$count = mysql_num_rows($fetch); 
```

[http://www.tizag.com/mysqlTutorial/index.php](http://www.tizag.com/mysqlTutorial/index.php)

# jquery - 不显示幻灯片图像标题

> ID：10367317
> 
> 赞同：0
> 
> 时间：2012-04-28T20:34:48.170
> 
> 标签：jquery, slideshow, caption

我有一个 jQuery 幻灯片，通过从图像的 alt 和标题文本中获取文本，在每张幻灯片上显示一个标题。唯一的问题是，当幻灯片中的图像没有标题/替代时，我根本不希望它显示标题。

请参阅此处的示例代码：http: [//jsfiddle.net/MCdyC/](http://jsfiddle.net/MCdyC/)

我知道我需要进行 IF 语句测试以查看图像标题/alt 是否为空白，但我尝试的任何方法都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:42:34.660

尝试以下方式：

```
var title = $('.showimage').attr('title');
var alt = $('.showimage').attr('alt');

if (typeof title !== 'undefined' && title !== false && typeof alt !== 'undefined' && alt !== false)​ {

    // WRAP YOUR WHOLE FUNCTION IN HERE

    } else {

    // WRAP YOUR WHOLE FUNCTION IN HERE WITHOUT THE SHOW CAPTION FUNCTION

}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:43:45.283

```
if($('ul.slideshow li.show').find('img').attr('title')!="")
{
    $('#slideshow-caption h3').html($('ul.slideshow li.show').find('img').attr('title'));
} 
```

这是一些示例片段，可帮助您入门。

# java - 如何使用 Ebean 自动 DDL 生成定义 mysql 引擎或默认字符集

> ID：10367323
> 
> 赞同：2
> 
> 时间：2012-04-28T20:36:36.157
> 
> 标签：java, mysql, playframework, playframework-2.0, ebean

我正在使用带有 Ebean 的 Play 2.0 框架。它会自动生成 DDL 脚本。我想为所有创建的表设置 mysql 引擎和默认字符集。

我无法弄清楚如何使用注释添加“Engine=Innodb DEFAULT CHARSET utf8”。

有没有一种简单的方法可以做到这一点，或者我应该使用[play evolutions](http://www.playframework.org/documentation/2.0/Evolutions/)手动创建表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:52:45.087

AFAIK，您更好的选择是使用 Play！演变。

但是对于 utf8 部分，您可以在连接 URL 中使用类似这样的内容：

```
jdbc:mysql://localhost:3306/SCHEMA_NAME?characterEncoding=UTF-8 
```

但是对于 InnoDB 部分，我没有任何想法，而是使用 Play！演变:(

在标准 JPA 中，您应该使用方言，例如`org.hibernate.dialect.MySQLInnoDBDialect`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:06:54.840

UTF-8 和 innoDB ：

```
jdbc:mysql://localhost:3306/SCHEMA_NAME?characterEncoding=UTF-8&sessionVariables=storage_engine=InnoDB 
```

# javascript - 在没有特定于浏览器的 xml 解析器的情况下用 javascript 解析 XML？

> ID：10367330
> 
> 赞同：0
> 
> 时间：2012-04-28T20:38:03.063
> 
> 标签：javascript, xml

我正在使用 PhoneGap 构建一个移动应用程序。我不是一个非常有经验的 Web 开发人员，我刚刚成功地将我的第一个（！）XMLHttpRequest 发送到远程服务器并检索了一个 XML 文档，所有这些都来自 iPod。但现在我必须用 JavaScript 解析 XML，而我以前从未这样做过。显然浏览器特定的解析器是不可能的，因为这不会发生在浏览器中。我看到的另一个建议是使用 JQuery，但我想知道是否有任何其他方法可能更直接或更可取，以我没有想到的其他方式。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:40:59.397

假设文档使用正确的 Content-Type 提供，那么任何实现 XMLHttpRequest 的浏览器都将`responseXML`使用 XML DOM 填充该对象的填充。

您不需要手动解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:54:14.997

我认为我最近在 SO 上看到的[这个具体答案](https://stackoverflow.com/questions/649614/xml-parsing-in-javascript/8412989#8412989)可能对您有所帮助（您可以阅读整篇文章，我很确定您会找到答案）。

如果您决定最终还是使用 JQuery，我认为这里有一个很好的解释来说明如何使用它来遍历[XML](http://www.compoc.com/tuts/)。但是，请注意，它依赖于 DOM innerHTML 方法并且不会自己进行解析，因此在 XML 节点中包含 HTML 内容等情况可能会出现问题。

希望这有帮助，祝你好运！

**更新**：很抱歉，我刚刚再次阅读了您的问题并意识到您没有在浏览器中运行，不知道我是怎么错过的。在那种情况下，我不完全确定我的回答是否很有帮助，只是我不熟悉 PhoneGap：/

# sorting - 如何使用 Gremlin 对 Noe4j 结果进行排序和限制？

> ID：10367331
> 
> 赞同：11
> 
> 时间：2012-04-28T20:38:10.450
> 
> 标签：sorting, graph, neo4j, gremlin

这是您可以使用 Gremlin 对 Neo4j 图表中的结果进行排序（排序）的方式：

```
g.v(id).out('knows').sort{it.name} 
```

或者

```
g.v(id).out('knows').sort{a,b -> a.name <=> b.name} 
```

这是如何使用偏移/跳过和限制来限制结果：

```
g.v(id).out('knows')[0..9] 
```

但是，如果您结合排序和限制

```
g.v(id).out('knows').sort{it.name}[0..9] 
```

它会抛出一个错误......

```
javax.script.ScriptException: groovy.lang.MissingMethodException: No signature of method: java.util.ArrayList$ListItr.getAt() is applicable for argument types: (groovy.lang.IntRange) values: [0..9]
Possible solutions: getAt(java.lang.String), getAt(int), next(), mean(), set(java.lang.Object), putAt(java.lang.String, java.lang.Object) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T20:47:05.057

我花了一段时间才弄清楚，像*sort*这样的原生 Groovy 方法不会返回 Pipes，而是返回迭代器、可迭代对象等。因此，要将其中一个对象转换回 Pipeline 流，您需要使用**_()**：

```
g.v(id).out('knows').sort{it.name}._()[0..9] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:50:08.727

我有类似的问题，但有`except(sth).unique()`和限制`[0..5]`。就我而言：

错误：

```
except(xxx).unique()[0..5] 
```

工作正常：

```
except(sth).unique().findAll()[0..5] 
```

也适用于 sort{}：

```
.unique().findAll().sort{it.sth}[0..5] 
```

（Alexei Tenitski 的回答也很好）

# ruby-on-rails - Ruby on Rails：关联

> ID：10367333
> 
> 赞同：0
> 
> 时间：2012-04-28T20:38:33.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我对 ROR 很陌生，所以我现在被这个问题困住了。

我正在使用文章和模板设置应用程序。我想创建包含许多文章的模板，并且可以将相同的文章分配给几个不同的模板。因此，当您创建模板时，我想将文章分配给它。您会认为直接使用 has_many 关联，但我认为这不能解决我的问题。

我想将文章分配给多个模板，所以我认为在这里使用某种链接表就可以了。

但我不知道如何在rails中做到这一点！或者我应该寻找什么样的解决方案。

有没有人可以建议我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:14:09.317

您可以创建链接模型articles_template

```
rails generate model articles_template 
```

引用文章和模板

```
class CreateArticlesTemplates < ActiveRecord::Migration
  def change
    create_table :articles_templates do |t|
      t.references :article
      t.references :template
      t.timestamps
    end
  end
end 
```

然后在模型articles_template中设置关联

```
class ArticlesTemplate < ActiveRecord::Base
  belongs_to :article
  belongs_to :template
end

class Article < ActiveRecord::Base
  has_many :articles_templates
  has_many :templates, :through => :articles_templates
end

class Template < ActiveRecord::Base 
  has_many :articles_templates
  has_many :articles, :through => articles_templates
end 
```

恕我直言，这是最佳实践，因为您可以在链接模型和表中添加一些额外的功能。（更多关于[这里](http://blog.hasmanythrough.com/2006/4/20/many-to-many-dance-off)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:48:51.657

尝试检查[has_and_belongs_to_many上的内容](https://stackoverflow.com/questions/6689540/how-to-set-up-a-typical-users-habtm-roles-relationship)

本质上，转到控制台并输入

> $ rails g 模型文章标题：字符串正文：文本
> 
> $ rails g 模型模板名称：字符串 some_other_attributes：类型等
> 
> $ rails g 迁移 create_articles_templates

然后使用以下命令编辑 create_articles_templates：

```
class CreateArticlesTemplates < ActiveRecord::Migration
  def up
    create_table :articles_templates, :id => false do |t|
      t.integer :template_id, :article_id
    end
  end

  def down
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T20:42:36.273

您在寻找`has_and_belongs_to_many`关联吗？

[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

# actionscript-3 - Flex SWFLOADER.CONTENT 很奇怪

> ID：10367334
> 
> 赞同：1
> 
> 时间：2012-04-28T20:38:35.770
> 
> 标签：actionscript-3, apache-flex, flash-builder4.5, flashbuilder4

创建完成事件后无法在远程服务器上工作。在本地工作正常。

在此处输入代码

```
 protected function completed():void
                {
                    myloader.visible=true;
                    //clearInterval(interval);
                    Alert.show("Timer");
                    Alert.show("Timer"+myloader.content);
                    var mc:AVM1Movie=AVM1Movie(myloader.content);
                    mc.x=-189;
                    mc.y=0;
                    mc.scaleX=0.75;
                    mc.scaleY=0.65;

                } 
```

 `我正在加载 Facebook 视频。我已经设置了 crossdomain.xml 还设置了 allowscriptaccess 和 allownetworking 。如果我在这里遗漏了什么，请有人帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:43:41.687

尝试 ：

```
protected function completed(event:*):void
                { 
````

# objective-c - CoreGraphics：如何确定 PDF 文件的目录中是否有条目？

> ID：10367336
> 
> 赞同：0
> 
> 时间：2012-04-28T20:38:44.560
> 
> 标签：objective-c, pdf, core-graphics, cgpdfcontext

我试图找出 PDF 是否有链接/目标/大纲条目。我使用这样的代码（Monotouch，但在 ObjC 中应该类似）：

```
public bool HasOutlineEntries()
{
    CGPDFDictionary oCatalogDic = oPdfDoc.GetCatalog ();
    CGPDFDictionary oOutlinesDic = null;

    oCatalogDic.GetDictionary ("Outlines", out oOutlinesDic);
    if(oOutlinesDic != null && oOutlinesDic.Count > 0)
    {
        return true;
    }
    return false;
} 
```

不幸的是，即使文档没有任何（可见）条目，这也总是返回 true。（oOutlinesDic.Count 将为 2）。当我获得字典中条目的详细信息时，我总是会找到两个没有名称和描述的条目以及一个未知目标。

有没有更好的方法来找到我正在寻找的东西？还是我应该总是减去 2？

# database - 测试运行时 Django 测试数据库看起来是空的

> ID：10367338
> 
> 赞同：19
> 
> 时间：2012-04-28T20:38:47.157
> 
> 标签：database, django, testing

我有一个使用本地 PostgreSQL 服务器的 Django 项目。我正在使用调试器来调试我遇到的一些奇怪的错误。当调试器在其中一项测试中停止时，我尝试查看测试数据库。我看到了这个新数据库（test_project1），并且所有的方案都按应有的方式定义。但是所有的桌子都是空的。

我知道表格不是空的：

*   我使用了一个夹具，一些测试已经运行并返回了数据。
*   后测试创建了一个新用户并返回 201 状态代码。

然而，当我尝试使用`pgAdmin3`or访问数据库时，我看不到任何数据`psql`。

知道这里发生了什么吗？Django 是否使用某种复杂的缓存机制？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-29T05:38:40.940

Django将每个测试`TestCase`都[包装在自己的事务](https://docs.djangoproject.com/en/dev/topics/testing/#testcase)中。因此，当您通过 ORM 发出请求时，您的数据库不会被使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-02T22:45:22.030

`django.test.TestCase`可以通过继承 from`django.test.TransactionTestCase`而不是来避免正在使用的数据库事务`TestCase`。然后数据将在数据库中可见。

您可能只想在调试时临时执行此操作，以便`django.test.TestCase`在其余时间获得性能优势。

Django 文档：
[django.test.TransactionTestCase](https://docs.djangoproject.com/en/3.1/topics/testing/tools/#transactiontestcase)
[django.test.TestCase](https://docs.djangoproject.com/en/3.1/topics/testing/tools/#testcase)

# objective-c - 编译器错误阻止 iOS 项目编译

> ID：10367344
> 
> 赞同：1
> 
> 时间：2012-04-28T20:39:42.413
> 
> 标签：objective-c, ios, flickr, cs193p

我正在完成 itunes u 的 cs193p 作业 4（2011 年秋季斯坦福 iOS 开发课程）

任务是创建一个 flickr 应用程序 - 他们提供一个名为 flickrfetcher 的 flick 助手类。

我已经复制了 flickrfetcher .h 和 .m 文件（可从[http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/assignments/FlickrFetcher.zip](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/assignments/FlickrFetcher.zip)获得），包括 .h我的视图控制器中的文件。

该项目编译良好，直到我调用 flickrfetcher 类，此时我得到 2 个错误：

> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_FlickrFetcher”，引用自：flickrthingViewController.o ld 中的 objc-class-ref：找不到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

现在在进行了一些搜索之后，我发现偶尔会提到类似的事情，唯一真正有意义的建议是我需要添加 coredata 框架。我已经做到了。它仍然不起作用。

我的系统没有任何问题，就像我下载了课程中演示的示例项目一样，它使用相同的库，编译和运行都很有趣。（顺便说一下，它不包括 coredata

我什至尝试将这些文件从那个项目复制到我的，以防万一有一些细微的差别。还是行不通。

我希望（并假设）这是一些愚蠢的小事。

我正在运行最新版本的 xcode，但对于接下来要尝试什么一无所知！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T20:44:00.483

`FlickrFetcher.m`在项目导航器中选择文件。现在在右侧栏中，在“目标会员”下，勾选您的应用名称旁边的框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T20:45:48.150

选择您的目标并查看构建阶段选项卡。打开编译源部分并检查 FlickrFetcher.m 是否存在。如果没有，请添加它。

# php - 发布后处理 cron 作业

> ID：10367349
> 
> 赞同：1
> 
> 时间：2012-04-28T20:40:40.087
> 
> 标签：php, image, cron

我试图找出最好的方法来做到这一点。现在我允许用户发布主要包含文本的提交，但它也使用嵌入来获取提交的相关缩略图。

Embedly 显着降低了这些 POST 的速度，所以我想基本上只是放置一个默认缩略图（就像 reddit 一样），然后运行一个脚本的 cron 作业，该脚本遍历所有具有默认缩略图的字段，然后嵌入运行更新缩略图，因此用户不必等待所有图像处理发生。

这是最好的方法吗？或者还有其他我忽略的方式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:44:31.487

将 URL 添加到数据库（队列）并让 cron 作业运行一个文件，该文件获取队列中的下一个 URL 并从中生成缩略图。

如果您看到队列开始增长，则需要更频繁地运行 cron 作业。

# java - 缺少 Twitter 模板

> ID：10367350
> 
> 赞同：0
> 
> 时间：2012-04-28T20:40:40.053
> 
> 标签：java, spring, spring-social

我正在使用 eclipse 创建一个 twitter 应用程序，但在 maven 依赖项中找不到 TwitterTemplate。这是我的pom文件。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>ddd</groupId>
  <artifactId>assignment7</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>assignment7</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
<repositories>
<repository>
    <id>springsource-repo</id>
    <name>SpringSource Repository</name>
    <url>http://repo.springsource.org/release</url>
    </repository>
</repositories>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
 <groupId>org.springframework</groupId>
 <artifactId>spring-context</artifactId>
 <version>3.1.1.RELEASE</version>
</dependency> 
<dependency>
 <groupId>org.springframework.social</groupId>
 <artifactId>spring-social-core</artifactId>
 <version>1.0.1.RELEASE</version>
</dependency> 
  </dependencies>
</project> 
```

到目前为止，这是我在eclipse上写的

```
package ddd.assignment7;
public class App {
    public static void main( String[] args )
    {   
        String consumerKey = "xxx"; // The application's consumer key
        String consumerSecret = "xxx"; // The application's consumer secret
        String accessToken = "xxx"; // The access token granted after OAuth authorization
        String accessTokenSecret = "xxx"; // The access token secret granted after OAuth authorization
        Twitter twitter = new TwitterTemplate(consumerKey, consumerSecret, accessToken, accessTokenSecret);

}
} 
```

我需要的是 TwitterTemplate 类，但在 Maven 依赖项中找不到它。我应该怎么办？我对java很陌生，我真的很困惑我应该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:23:37.100

[TwitterTemplate](http://static.springsource.org/spring-social-twitter/docs/1.0.1.RELEASE/api/org/springframework/social/twitter/api/impl/TwitterTemplate.html)打包到单独的工件`spring-social-twitter`中，因此要使其可用，请将以下内容添加到您的`pom.xml`：

```
<dependency>
    <groupId>org.springframework.social</groupId>
    <artifactId>spring-social-twitter</artifactId>
    <version>1.0.1.RELEASE</version>
</dependency> 
```

（顺便说一句，1.0.2.RELEASE 可用）

# bash - 如何递归目录树以首先对较低的目录进行操作，然后对最高的目录进行操作？

> ID：10367352
> 
> 赞同：0
> 
> 时间：2012-04-28T20:40:54.023
> 
> 标签：bash, find, rsync, zsh

我需要编写一个脚本，将文件移动到目标位置（关闭卷），删除原始文件和目录，然后将它们移回原始位置，同时保留所有属性。

这个概念在算法上相当简单，但是当我使用 rsync 时，我遇到的真正问题是正确地递归树。

到目前为止，这似乎`rsync -axvvES --remove-source-files source_directory /destination/`是复制文件的最有效解决方案，但是，如前所述，由于大小限制，我不能简单地允许 rsync 递归树本身。最终我认为`find`可以用来向下钻取然后允许`rsync`运行，但是**为了实现这个目标****，我怎样才能先下降到最低点呢？`find`**

更新：

最终，这似乎令人满意地解决了这个问题：

```
echo -e "Moving over... "
rsync -axvES --remove-source-files ${SRC_FILE_AND_PATH} ${DESTINATION_PATH}/
echo -e "Bringing back... "
rsync -axvES --remove-source-files ${DESTINATION_PATH}/${SRC_BASENAME} ./ 
```

它确实将文件夹留在工作目录中，但是由于它确实在移回时正确覆盖了初始文件夹上的属性，因此令人满意，最后我可以 rm 剩余的空目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:44:38.600

该[`find`](http://man.cx/find)命令有一个`-depth`开关，使其行为符合您的要求。

# ruby-on-rails - Rails：每天运行一个 feedreading 脚本 (1h)。建议？

> ID：10367355
> 
> 赞同：1
> 
> 时间：2012-04-28T20:41:01.703
> 
> 标签：ruby-on-rails

我正在 Rails 中开发一个网站，每天必须运行一次脚本。该脚本读取 xml-feeds 并更新数据库。我正在使用 Rails 3.1.1 并在 Heroku 上运行该网站。

为了让脚本在运行时不会完全杀死网站，我有哪些选项？添加一个测功机我认为可以解决它，但非常昂贵，特别是因为当我运行脚本时它在外部并不真正需要。

我可以在另一个数据库上运行脚本并复制它吗？后台运行？简而言之，我有什么选择？

编辑：我在这里不是很清楚。我的问题是尽可能少地影响网络服务器/数据库，而不是运行脚本（无论何时等）。我计划在夜间运行脚本以尽可能少地影响，但我仍然不希望网站在那一小时内完全关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:56:16.297

这在很大程度上取决于脚本的性能特征。如果 CPU 密集度很高但影响很小，那么我不会担心：当使用 heroku 调度程序之类的东西时，作业在单独的测功机中运行。由于它是一个单独的测功机，它不会影响您正在服务请求的其他测功机。

大量的数据库使用是另一回事。您的数据库具有有限数量的 IO、缓存、CPU 等，如果您正在努力推动它（大量写入通常比大量读取更糟糕，因为这些缓存缓存），那么您可能会降低其他测功机的性能。

也可以完全停止网站工作 - 如果您的工作最终锁定了应用程序的其余部分试图访问的行/表，那么您的网络测功机将被阻止，直到您的工作释放这些锁定。

如果您在遍历提要时逐一解析提要和更新的数据库行，那么您可能会没事：就锁定争用而言，大量的小写入/读取比大量写入/读取要好，我认为您不会' 将很难击中数据库，因为听起来您主要是从索引列一次加载一行，进行一些 ruby​​ 计算，然后更新单行。

如果您确实发现性能下降到无法接受的程度，并且如果读取了瓶颈，那么一种出路是拥有一个读取从属设备（也称为副本，或者在 heroku 中说一个[追随者](https://devcenter.heroku.com/articles/heroku-postgresql)）。简而言之，这是一个单独的、只读的数据库服务器，用于跟踪主数据库服务器（因此它始终是最新的）。您对此服务器所做的任何事情都不会影响您的主数据库，因此您可以放心查询。

如果问题是您需要执行的写入次数，这对您没有帮助。在某种程度上，这可以通过切换到更强大的数据库服务器来解决（有代价）。对于某些使用模式，不同类型的数据存储（例如 mongo、redis）有时比关系数据库更合适。有时可以设计出一些性能热点，但显然你是考虑这一点的最佳人选。

这一切都非常抽象——你真正知道的唯一方法就是尝试。设置您的应用程序的副本，启动此任务并查看性能如何下降（如果您不担心一次性影响，或者对真实应用程序执行此操作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:46:11.597

查看用于 rails的[feedzirra](https://github.com/pauldix/feedzirra)插件。当您想要进行饲料处理时，它非常棒。

还检查[时](https://github.com/javan/whenever)宝石。安装它，并创建一个经常运行的模型方法来处理您的提要。

这样，您的 Web 服务器就完全脱离了循环，这不会影响服务请求。然而，数据库是另一回事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T23:06:58.517

我推荐你 gem [resque](https://github.com/defunkt/resque)和[resque-scheduler](https://github.com/bvandenbos/resque-scheduler)。我在生产中使用它们，开发和测试非常简单方便（参见[resque_spec](https://github.com/leshill/resque_spec)）

我知道heroku 非常支持redis。你可以试试 gem [heroku-scheduler](https://github.com/clmntlxndr/heroku-scheduler)。我没有使用它，但认为它也很酷；）

[什么时候](https://github.com/javan/whenever)也很棒。我提出了一个替代方案。这是你的选择

# python - 是否可以只更新 pypi 索引中的详细信息，而不重新创建包？

> ID：10367358
> 
> 赞同：3
> 
> 时间：2012-04-28T20:41:28.040
> 
> 标签：python, package, bitbucket, easy-install, pypi

我正在 bitbucket 中开发一个 python 包，并希望在 pypi 中对其进行索引。每当我有新的下载时，我所做的操作似乎效率很低，这引发了这个问题。

1.  我已经使用上传了一个新包到 pypi
    `python setup.py register sdist upload`
2.  然后我将新包配置为也出现在 bitbucket 的下载中。
3.  现在我想更新 pypi 下载 URL 以指向 bitbucket。

（3）可以在我完成（1），（2）之后完成而不重新创建包吗？
在不生成两次包的情况下这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:23:08.363

PyPi 元数据更改可以通过简单地`python setup.py register`再次执行该步骤来完成，因此您可以简单地编辑 setup.py 以更改下载 URL，然后重复注册步骤。

请记住，easy_install、pip 等自动安装工具通常可以扫描下载 url 链接到的页面以获取最新的可下载分发（根据版本编号标准），因此您无需显式链接到您的分发文件.

如果您要这样做，我还建议您手动转到 PyPi 并删除或隐藏您上传的旧源代码分发，以便新用户不会获得包含旧 setup.py 的版本。

# c# - ASP 页面的组合框

> ID：10367359
> 
> 赞同：1
> 
> 时间：2012-04-28T20:41:38.403
> 
> 标签：c#, javascript, asp.net, ajax, combobox

我陷入困境，如果有人帮忙，我将不胜感激。我正在尝试在我的 asp 页面中使用组合框，但我发现所有使用 ajax 的组合框都有其他选择吗？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:50:53.907

[`<select>`](http://www.w3schools.com/TAGS/tag_select.asp)在您的经典 asp 代码中使用 HTML 标记怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:56:52.767

`$` `$`像这个列表项 一样使用 ASP.NET DropDownList 控件 1`$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T18:43:46.650

这不是退出组合框...

ASP 是两组控件： 1：文本框和按钮 2：下拉列表和按钮

按钮单击事件 hide(self) 和 show(other)。

```
 <div class="control-group">
            <asp:Label ID="Label8" class="control-label" runat="server" Text="Company"> </asp:Label>
            <div class="row">
                <div class="col-md-12 ">
                    <asp:TextBox ID="txtCompanyName" class="control-label" runat="server" 
                        CssClass="form-control btn-group"
                        Width="240px"
                        AutoCompleteType="Disabled">
                    </asp:TextBox>
                    <asp:LinkButton ID="btnCompanySearch"
                        runat="server"
                        CssClass="btn btn-primary"
                        ToolTip="Company dropdown list" OnClick="btnCompanySearch_Click">
                        <span class="glyphicon glyphicon-search"></span>
                    </asp:LinkButton>
                </div>

                <div class="col-md-12">
                    <asp:DropDownList ID="ddlCompanyName" runat="server"
                        CssClass="form-control btn-group"
                        Width="240px"
                        AutoPostBack="true" Visible="false"
                        OnSelectedIndexChanged="ddlCompany_SelectedIndexChanged">
                    </asp:DropDownList>
                    <asp:LinkButton ID="btnCompanyText"
                        runat="server"
                        CssClass=" btn btn-primary"
                        Visible="false"
                        ToolTip="Enter company manually" OnClick="btnCompanyText_Click">
                        <span class="glyphicon glyphicon-font"></span>
                    </asp:LinkButton>

                </div>
            </div>
        </div> 
```

而背后的代码...

```
protected void ddlCompany_SelectedIndexChanged(object sender, EventArgs e)
{
    txtCompanyName.Text = ddlCompanyName.SelectedValue == "-1" ? string.Empty: ddlCompanyName.SelectedValue; 
    btnCompanyText_Click(this, EventArgs.Empty);
}
protected void btnCompanySearch_Click(object sender, EventArgs e)
{
    Search(false);
    ddlCompanyName.Focus();
}
protected void btnCompanyText_Click(object sender, EventArgs e)
{
    Search(true);
    txtCompanyName.Focus();
}
private void Search(bool bVal)
{
    txtCompanyName.Visible = bVal;
    btnCompanySearch.Visible = bVal;
    btnCompanyText.Visible = !bVal;
    ddlCompanyName.Visible = !bVal;
} 
```

# inheritance - Codea 可以使用继承吗？

> ID：10367360
> 
> 赞同：0
> 
> 时间：2012-04-28T20:41:45.923
> 
> 标签：inheritance, lua, codea

[是否可以在Codea](http://twolivesleft.com/Codea/)中使用继承？虽然我对 Lua 还很陌生，但通过一些快速的谷歌搜索，看起来做[继承和多态](http://lua-users.org/wiki/ObjectOrientationClosureApproach)[的方法](http://lua-users.org/wiki/ObjectOrientationClosureApproach)有点“[涉及](http://lua-users.org/wiki/MetamethodsTutorial)”。有什么技术可以安全地与 Codea 的 Lua 托管引擎一起使用吗？

* * *

这是一个简单的可运行测试，我正在尝试开始工作。我的超类：

```
Superklass = class()

function Superklass:init(x,y)
    self.x = x
    self.y = y
end

function Superklass:debug()
    print(string.format("(%d, %d)", self.x, self.y))
end 
```

一个子类：

```
Ship = class()

function Ship:init(x, y)
    -- you can accept and set parameters here
    print('ship:init() called')

    self = Superklass(x,y) -- ???
    print('attempting to call self:debug()')
    self:debug() -- works! prints  
    print('ok!')
end

function Ship:draw()
    print('ship:draw() called')

    print('attempting to call self:debug()')
    self:debug()
    print('ok')
end 
```

和程序入口点：

```
-- initial setup
function setup()
    ship = Ship(HEIGHT/2, WIDTH/2)
end

-- called once every frame
function draw()
    ship:draw()
end 
```

* * *

这是运行的输出：

```
ship:init() called
attempting to call self:debug()
(384, 375)
ok!
ship:draw() called
attempting to call self:debug()
error: [string "Ship = class()..."]:16: attempt to call method 'debug' (a nil value)
Pausing playback 
```

我敢肯定这是非常幼稚的——但我希望能在 Codea 的上下文中发挥作用的方向上的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:32:06.880

只是为了给出一个可行的解决方案（Codea 中的类继承）并指出一些陷阱。首先，我应该注意 Codea 以 Tab 顺序加载类，因此超类的选项卡必须在子类的选项卡*之前*。我建议[在 Codea 论坛上查看此主题](http://twolivesleft.com/Codea/Talk/discussion/96/class-inheritances/p1)。它讨论了下面的技术，并提供了一些关于底层机制的见解。

首先，我们定义一个超类*AbstractSprite*，其构造函数采用 (x,y) 坐标。它提供了一种方法**调试**来将此坐标回显到控制台。

```
AbstractSprite = class()

function AbstractSprite:init(x,y)
    self.position = vec2(x,y)

    print("new AbstractSprite created")
end

function AbstractSprite:debug()
    print(string.format("(%d,%d)", self.position.x, self.position.y))
end 
```

接下来，我们定义一个实现类*Ship*，它实现了一个调用*super的自定义***调试**，演示了如何向上移动类层次结构。

 *```
Ship = class(AbstractSprite)

function Ship:init()
    AbstractSprite.init(self)
    print("new Ship created")
end

function Ship:debug()
    print("I am a ship, calling my superclasses' methods!")
    AbstractSprite.debug(self)
end 
```

程序入口点。我们创建了一个*Ship*和一个“原始” *AbstractSprite*，分别调用 debug ：

```
function setup()
    ship = Ship()
    ship:debug()

    asteroid = AbstractSprite(150, 200)
    asteroid:debug()
end 
```

和控制台输出：

```
new AbstractSprite created
new Ship created
I am a ship, calling my superclasses' methods!
(0,0)
new AbstractSprite created
(150,200) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:19:35.750

免责声明：我是[middleclass](http://github.com/kikito/middleclass)的作者，Lua 的 OO-lib。

您在第一个示例中指出的基于闭包是一个很好的智力练习，但它几乎没有实用价值。在 Lua 中，使用表格可以更好地实现面向对象（正如您的第二个示例所指出的示例所暗示的那样） - 它以更快的速度提供等效的功能。唯一的区别是语法。

有很多库使用标准的基于表的方法在 Lua 中执行 OO。你可以在这里找到一个列表：

[http://lua-users.org/wiki/ObjectOrientedProgramming](http://lua-users.org/wiki/ObjectOrientedProgramming)

使用中间类，你的代码会变成这样：

```
require 'middleclass'

-- middleclass needs the class name as a parameter
SuperClass = class('SuperClass') -- I don't see the point of using a K here, BTW

function SuperClass:initialize(x,y) -- initialize instead of init
    self.x = x
    self.y = y
end

function SuperClass:debug()
    print(string.format("(%d, %d)", self.x, self.y))
end
--

Ship = class('Ship', SuperClass) -- notice that we put the superclass here

function Ship:initialize(x, y) -- initialize instead of init again
    -- you can accept and set parameters here
    print('ship:initialize() called')

    self = SuperClass.initialize(self,x,y) -- notice the extra self and initialize here
    print('attempting to call self:debug()')
    self:debug() -- works! prints  
    print('ok!')
end

function Ship:draw()
    print('ship:draw() called')

    print('attempting to call self:debug()')
    self:debug()
    print('ok')
end 
```*

# ruby - 选择 Aptana 识别的 ruby 版本？

> ID：10367362
> 
> 赞同：0
> 
> 时间：2012-04-28T20:42:11.433
> 
> 标签：ruby, aptana

我在 ubuntu 中使用 RVM 来处理 ruby​​ 版本，我有两个版本的 ruby​​，1.8,7 和 1.9.2。我选择了 RVM 的 1.8.7，但 aptana 无法识别此更改，它仍在使用 1.9.2。当我重新启动它时，还是一样。

如何更改 Aptana 识别的 ruby​​ 版本？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:49:56.337

我通过带有附加选项“默认”的简单命令解决了

```
rvm use 1.8.7 --default 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T06:30:59.463

对于 Windows 用户：

安装您要切换到的版本（例如 From `Ruby200-x64`to `Ruby22-x64`）。将路径附加到`Ruby22-x64`（例如`C:\Ruby22-x64\bin`）。Aptana 总是使用最新的。

注意：您可能需要重新启动 PC。

# node.js - 使用 Mongoskin（node.js 和 mongodb）进行更新

> ID：10367363
> 
> 赞同：5
> 
> 时间：2012-04-28T20:42:15.787
> 
> 标签：node.js, mongodb, upsert

我正在学习 node.js 和 mongodb。我在我的应用程序中使用 mongoskin 模块，但我似乎无法让“upsert”功能正常工作。

我已经阅读了 github 上的（相当不透明的）mongoskin 指南。这是我到目前为止所尝试的：

```
// this works.  there's an insert then an update.  The final "x" is "XX".
db.collection("stuff").insert({a:"A"}, {x:"X"});
db.collection("stuff").update({a:"A"}, {x:"XX"});

// this does NOT work.  I thought it would do an upsert, but nothing.
db.collection("stuff").update({b:"B"}, {y:"YY"}, true); 
```

如何创建“如果不存在则更新或插入”功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T21:00:55.460

我没有尝试过，但根据这里的文档：[https](https://github.com/guileen/node-mongoskin#inherit-updating) ://github.com/guileen/node-mongoskin#inherit-updating和这里：[https ://github.com/christkv/node-mongodb-native/ blob/master/docs/insert.md](https://github.com/christkv/node-mongodb-native/blob/master/docs/insert.md)，它看起来像是`options`第三个参数，它应该是一个对象，如下所示：

```
db.collection("stuff").update({b:"B"}, {y:"YY"}, {upsert:true}); 
```

# postgresql - 从 S3 挂载一个 postgresql 数据库

> ID：10367364
> 
> 赞同：1
> 
> 时间：2012-04-28T20:42:21.580
> 
> 标签：postgresql, amazon-s3, amazon-ec2

我正在寻找一种将 postgresql 数据库热“挂载”到正在运行的 postgresql 实例的方法。那就是我有一个包含表空间的亚马逊 S3 块，我可以将该块安装到运行 postgresql 的 EC2 实例并启动数据库吗？（无需重新启动实例，因为它已经在为其他数据库提供服务）。

运行多个 postgres 实例并在我挂载卷时启动它们会是更好的策略吗？即 db 和 postgresql 实例之间的一对一关系。

这是一个相关的问题，但答案有些不完整：

[将表空间从一个 postgresql 实例复制到另一个](https://stackoverflow.com/q/2114363/252385)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:59:04.553

我发现这样做的最好方法确实是运行多个 Postgresql 实例。值得注意的是，Ubuntu 有一些内置的 postgres 集群管理功能（如果您显然使用的是 Ubuntu，则不确定其他 Debian ......）。看看他们：

```
pg_createcluster
pg_dropcluster
pg_lsclusters 
```

# c++ - 如何让我的 C++ 程序在 Unix 上编译？

> ID：10367367
> 
> 赞同：0
> 
> 时间：2012-04-28T20:42:39.183
> 
> 标签：c++, linux, unix, g++

我正在使用 C++ 编写一个学校项目，并且正在使用我们学校的 unix 服务器按照教授的指示编写它。我正在使用 vim 和 g++ 进行编译。

这个项目是建立在另一个项目 Lab0 的基础上，在 TA 的帮助下我没有遇到任何问题，但不得不做一些奇怪的事情来构建它（#include LinkedSortedList.cpp 文件位于 LinkedSortedList.h 的底部）。班上的每个人都用#include .cpp 文件做了这些奇怪的事情。

首先，这里是编译好的 Lab0 文件和#includes：

（这篇文章没有在我的 makefile 中显示我的标签，但它们就在那里！）

生成文件：

```
main: *.cpp *.h

g++ -o LSL main.cpp

clean:

rm -f *.o LSL* 
```

Lab0（构建的那个）是这样的：

文件：

main.cpp（未模板化）：

```
#include "LinkedSortedList.h"
#include <iostream>
using namespace std; 
```

SortedList.h（模板）：没有

LinkedNode.h（模板）：

```
#include <iostream>
using namespace std; 
```

LinkedSortedList.h（模板）：

```
#include "SortedList.h"
#include "LinkedNode.h"
#include <iostream>
using namespace std;

#include "LinkedSortedList.cpp" // At the bottom fo this file above the #endif to get the program to compile from what the TA told me to do for lab0 due to the templated class. 
```

LinkedSortedList.cpp（模板）：没有

构建和运行这个项目没有问题。

这是我的问题：

下面是lab1，我遇到问题的那个Lab1 使用了Lab0 中的所有文件，只是添加了Employee.h 和Employee.cpp。

Lab1（不会构建的）是这样的：

文件：

实验室1.cpp：

```
#include <iomanip>
#include <iostream>
#include <string>
#include <fstream>
#include <sstream>
#include <stdexcept>
#include "Employee.h"
#include "LinkedSortedList.h" 
```

SortedList.h（模板）：没有

LinkedNode.h（模板）：

```
#include <iostream>
using namespace std; 
```

LinkedSortedList.h（模板）：

```
#include "SortedList.h"
#include "LinkedNode.h"
#include "Employee.h"
#include <iostream>
using namespace std;

#include "LinkedSortedList.cpp" // At the bottom fo this file above the #endif to get the program to compile from what the TA told me to do for lab0 due to the templated class. 
```

LinkedSortedList.cpp（模板）：没有

Employee.h（未模板化）：

```
#include <iostream>
#include <sstream>
using namespace std; 
```

Employee.cpp（未模板化）：

```
#include <stdio.h>
#include <string.h> 
```

（这篇文章没有在我的 makefile 中显示我的标签，但它们就在那里！）

```
makefile:

main: *.cpp *.h

g++ -o LSL lab1.cpp

clean:

rm -f *.o LSL* 
```

我得到的错误：

这是我遇到的错误。似乎没有看到 Employee.cpp/Employee.h 文件。有任何想法吗？？

`unixserver:Lab1> make g++ -o LSL lab1.cpp /tmp/ccamnaqx.o: In function `createRecord()': lab1.cpp:(.text+0x3fb): undefined reference to`Employee::Employee()' lab1.cpp:(.text+0x477): undefined reference to `Employee::setLastName(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)' lab1.cpp:(.text+0x4f2): undefined reference to`Employee::setFirstName(std::basic_string, std::allocator >)' lab1.cpp:(.text+0x589): undefined reference to `Employee::setId(int)' lab1.cpp:(.text+0x5ce): undefined reference to`Employee::setSalary(int)' lab1.cpp:(.text+0x60e): undefined reference to `Employee::setDepartment(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)' lab1.cpp:(.text+0x67c): undefined reference to`Employee::setPhoneNumber(std::basic_string, std::allocator >)' lab1.cpp:(.text+0x6ea): undefined reference to `Employee::setAddress(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)' lab1.cpp:(.text+0x758): undefined reference to`Employee::setHireDate(std::basic_string, std::allocator >)' lab1.cpp:(.text+0x7c6): undefined reference to `Employee::setEmailAddress(std::basic_string, std::allocator >)' collect2: ld returned 1 exit status make: *** [main] Error 1`

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:47:04.120

您必须编译`Employee.cpp`并将其链接到可执行文件中：

```
g++ -o LSL lab1.cpp Employee.cpp 
```

可能也是如此`LinkedSortedList.cpp`（它的目的对我来说并不完全清楚）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T20:47:13.063

您的第二个项目的 makefile 仅编译 lab1.cpp 而不是您的其他 cpp 文件。您还需要考虑另外两个（Employee.cpp 和 LinkSortedList.cpp）。

另外，请在此站点上了解如何正确格式化代码。 [https://stackoverflow.com/editing-help](https://stackoverflow.com/editing-help)

# wolfram-mathematica - 在 Mathematica 中以非科学形式打印小数

> ID：10367386
> 
> 赞同：1
> 
> 时间：2012-04-28T20:45:56.983
> 
> 标签：wolfram-mathematica, decimal, precision, mathematica-7

我想以`3*10^-9`非科学形式打印所代表的数字：`0.000000003`。我怎样才能做到这一点？ `NumberForm[N[3*10^-9], {Infinity, 10}]`不起作用。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T20:57:43.217

```
AccountingForm[3\. 10^-9, NumberSigns -> {"-", ""}]
AccountingForm[-3\. 10^-9, NumberSigns -> {"-", ""}]

(* 0.000000003 *)
(* -0.000000003 *) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T00:11:11.873

我认为以下方式是您“应该”这样做的方式。

```
NumberForm[N[3*10^-9], ExponentFunction -> (Null &)] 
```

像这样设置的 ExponentFunction 选项只是指定您不需要任何指数。（您也可以使用该选项将输出限制为某些幂的指数。）

（我正在使用 Mathematica 7.0 。）

# java - Java Hadoop：如何创建以输入文件为输入文件并给出每个文件中行数的输出的映射器？

> ID：10367389
> 
> 赞同：5
> 
> 时间：2012-04-28T20:46:12.017
> 
> 标签：java, hadoop, mapreduce, distributed

我是 Hadoop 新手，我已经设法运行 wordCount 示例：[http ://hadoop.apache.org/common/docs/r0.18.2/mapred_tutorial.html](http://hadoop.apache.org/common/docs/r0.18.2/mapred_tutorial.html)

假设我们有一个包含 3 个文件的文件夹。我希望每个文件都有一个映射器，这个映射器只会计算行数并将其返回给减速器。

然后，reducer 将每个映射器的行数作为输入，并将所有 3 个文件中存在的总行数作为输出。

所以如果我们有以下3个文件

```
input1.txt
input2.txt
input3.txt 
```

映射器返回：

```
mapper1 -> [input1.txt, 3]
mapper2 -> [input2.txt, 4]
mapper3 -> [input3.txt, 9] 
```

减速器将输出

```
3+4+9 = 16 
```

我已经在一个简单的 java 应用程序中完成了这个，所以我想在 Hadoop 中完成它。我只有一台计算机，想尝试在伪分布式环境上运行。

我怎样才能做到这一点？我应该采取哪些正确的步骤？

我的代码应该在 apache 的示例中看起来像这样吗？我将有两个静态类，一个用于映射器，一个用于减速器？还是我应该有 3 个类，每个映射器一个？

如果你能指导我完成这个，我不知道该怎么做，我相信如果我设法编写一些代码来做这些事情，那么我将来能够编写更复杂的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T19:06:40.113

除了 sa125 的答案，您可以通过不为每个输入记录发出记录来极大地提高性能，而只是在映射器中累积一个计数器，然后在映射器清理方法中发出文件名和计数值：

```
public class LineMapper extends Mapper<LongWritable, Text, Text, LongWritable> {
    protected long lines = 0;

    @Override
    protected void cleanup(Context context) throws IOException,
            InterruptedException {
        FileSplit split = (FileSplit) context.getInputSplit();
        String filename = split.getPath().toString();

        context.write(new Text(filename), new LongWritable(lines));
    }

    @Override
    protected void map(LongWritable key, Text value, Context context)
            throws IOException, InterruptedException {
        lines++;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T21:34:43.117

我注意到您使用的是 0.18 版本的文档。[这是 1.0.2](http://hadoop.apache.org/common/docs/current/api/overview-summary.html)（最新）的链接。

第一个建议 - 使用 IDE（eclipse、IDEA 等）。这真的有助于填补空白。

在实际的 HDFS 中，您无法知道每个文件的位置（不同的机器和集群）。无法保证 X 行甚至与 Y 行驻留在同一个磁盘上。也不能保证 X 行不会被拆分到不同的机器上（HDFS 以块的形式分布数据，通常每个 64Mb）。**这意味着您不能假设同一个映射器将处理整个文件。您可以确保每个文件都由同一个 reducer 处理**。

由于从映射器发送的每个键的减速器都是唯一的，所以我这样做的方法是使用文件名作为映射器中的输出键。此外，映射器的默认输入类是`TextInputFormat`，这意味着每个映射器将自己接收一整行（由 LF 或 CR 终止）。然后，您可以从映射器发出文件名和数字 1（或其他与计算无关的）。然后，在 reducer 中，您只需使用循环来计算文件名被接收的次数：

# 在映射器的 map 函数中

```
public static class Map extends Mapper<IntWritable, Text, Text, Text> {

  public void map(IntWritable key, Text value, Context context) {
    // get the filename
    InputSplit split = context.getInputSplit();
    String fileName = split.getPath().getName();

    // send the filename to the reducer, the value
    // has no meaning (I just put "1" to have something)
    context.write( new Text(fileName), new Text("1") );
  }

} 
```

# 在 reducer 的 reduce 函数中

```
public static class Reduce extends Reducer<Text, Text, Text, Text> {

  public void reduce(Text fileName, Iterator<Text> values, Context context) {
    long rowcount = 0;

    // values get one entry for each row, so the actual value doesn't matter
    // (you can also get the size, I'm just lazy here)
    for (Text val : values) {
      rowCount += 1;
    }

    // fileName is the Text key received (no need to create a new object)
    context.write( fileName, new Text( String.valueOf( rowCount ) ) );
  }

} 
```

# 在驱动程序/主要

您几乎可以使用与 wordcount 示例相同的驱动程序 - 请注意，我使用了新的 mapreduce API，因此您需要调整一些东西（`Job`而不是`JobConf`等）。当我阅读它时，[这真的很有帮助。](http://www.slideshare.net/sh1mmer/upgrading-to-the-new-map-reduce-api)

请注意，您的 MR 输出将只是每个文件名及其行数：

```
input1.txt    3
input2.txt    4
input3.txt    9 
```

如果您只想计算所有文件中的总行数，只需在所有映射器中发出相同的键（而不是文件名）。这样就只有一个 reducer 来处理所有的行计数：

```
// no need for filename
context.write( new Text("blah"), new Text("1") ); 
```

您还可以将处理每个文件行数的输出的作业链接起来，或者做其他花哨的事情——这取决于您。

我留下了一些样板代码，但基础知识就在那里。一定要检查我，因为我是从记忆中输入的大部分内容.. :)

希望这可以帮助！

# javascript - 使用 jQuery 和 CSS 居中对象

> ID：10367395
> 
> 赞同：0
> 
> 时间：2012-04-28T20:47:05.343
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 CSS 和 jQuery 将绝对定位的对象水平居中。jQuery 是必要的，因为对象具有不同的宽度。将鼠标悬停在我的 jsFiddle 中的图标上，看看我的意思。

[jsFiddle在这里](http://jsfiddle.net/3Cb9A/)

现在我`left: 50%`应用了一个属性，但我需要做一个负数`margin-left`，即对象宽度的一半。这是我的代码，不知道为什么它不起作用：

**jQuery**

```
$('.tooltip').each(function() {
      $(this).css('margin-left', '-'+($(this).width() / 2)+'px');
}​ 
```

**CSS**

```
.toolbar .tooltip {
    position: absolute;
    left: 50%;
    margin-top: 8px;
    padding: 3px 8px;
    display: none;
}

.toolbar li:hover .tooltip {
    display: block;
} 
```

**HTML**

```
<ul class="toolbar">
    <li><img alt="Undo" src="undo.gif" /><span class="tooltip">Undo</span></li>
    <li><img alt="Redo" src="redo.gif" /><span class="tooltip">Redo</span></li>
    <li><img alt="Help" src="help.gif" /><span class="tooltip">Help</span></li>
    <li><img alt="Feedback" src="feedback.gif" /><span class="tooltip">Feedback</span</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T20:56:37.227

未封闭代码错误，[这里更新代码](http://jsfiddle.net/3Cb9A/1/)

顺便说一句，它有填充，所以你应该使用“outerWidth”而不是“width”。你可以[在这里更正代码](http://jsfiddle.net/3Cb9A/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:02:15.393

根据块的宽度，我进行了`left`相应的设置。

```
$('.tooltip').each(function() {
    // Assuming button block width is 32px.
    $(this).css('left', (32 - ($(this).width())) / 2+'px');
}​);​ 
```

[http://jsfiddle.net/3Cb9A/3/](http://jsfiddle.net/3Cb9A/3/)

# php - Symfony 2 资产。看不到单个 css 或 js 文件

> ID：10367397
> 
> 赞同：1
> 
> 时间：2012-04-28T20:47:26.310
> 
> 标签：php, symfony, assetic

当我在 layout.html.php 中添加这样的行时：

```
<?php foreach ($view['assetic']->stylesheets(
    array('@AnglerBackendBundle/Resources/public/css/*')
    ) as $url
    ): ?>
    <link rel="stylesheet" href="<?= $view->escape($url) ?>" />
<?php endforeach ?> 
```

配置：

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        yui_css:
             jar: %kernel.root_dir%/java/yuicompressor.jar
        yui_js:
             jar: %kernel.root_dir%/java/yuicompressor.jar 
```

我看到 5 个标签链接到 5 个资源，但根据 Symfony 2 文档，我应该只看到一个文件。我做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:55:27.150

只是将答案放在实际答案中：

你需要改变这个： $kernel = new AppKernel('prod', true);

为此： $kernel = new AppKernel('prod', false);

第二个参数是调试参数。如果调试关闭，Assetic 只会写入一个文件。

# c++ - 对象未在向量中正确存储/检索（C++）

> ID：10367399
> 
> 赞同：1
> 
> 时间：2012-04-28T20:47:56.383
> 
> 标签：c++, object, vector

我是一个完整的 C++ 初学者。我正在尝试做一些看起来很基本的事情：创建某个类的对象，将其存储在向量中，然后输出该对象的值。目前，无论我存储什么字符，它都会输出一个矩形字符。这是代码：

```
#include <iostream>
#include <string>
#include <cstdlib>
#include <conio.h>
#include <time.h>
#include <windows.h> 
#include <vector>
#include <algorithm>
#include <map>
using namespace std;

class terrainType
{
    public:
        string name;
        char symbol;
        int freq;
        terrainType(string,char,int);
};
terrainType::terrainType(string name, char symbol, int freq)
{
    name=name;
    symbol=symbol;
    freq=freq;
}

int main()
{
    vector<terrainType> terrainTypes;
    terrainType dirt("dirt",'.',1);
    terrainTypes.push_back(dirt);
    cout << terrainTypes[0].symbol;
    return 0;
} 
```

任何建议或背景信息表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T20:49:25.723

您在构造函数中的三个分配实际上是无操作的（您将每个变量分配给它自己）：

```
terrainType::terrainType(string name, char symbol, int freq)
{
    name=name;
    symbol=symbol;
    freq=freq;
} 
```

问题是您有两个称为`name`的东西，并且您希望编译器找出`name=name`左侧指的是其中一个，而右侧指的是另一个。

解决此问题的最简洁方法是更改​​为构造函数，如下所示：

```
terrainType::terrainType(string name, char symbol, int freq)
: name(name),
  symbol(symbol),
  freq(freq)
{
} 
```

语言的规则是这样的，这将具有预期的含义。

另一种选择是避免使用相同的标识符来引用成员和函数参数：

```
terrainType::terrainType(string name_, char symbol_, int freq_)
{
    name=name_;
    symbol=symbol_;
    freq=freq_;
} 
```

另一种选择是使用前缀成员访问`this->`：

```
terrainType::terrainType(string name, char symbol, int freq)
{
    this->name=name;
    this->symbol=symbol;
    this->freq=freq;
} 
```

# xamarin.ios - 应用程序在后台时未出现 UILocalnotification

> ID：10367400
> 
> 赞同：1
> 
> 时间：2012-04-28T20:47:56.883
> 
> 标签：xamarin.ios

我有一个单点触控应用程序，它有一个计时器并从服务器获取数据。收到数据后，我想在状态栏上显示通知。当应用程序处于前台时，它运行良好。当应用程序在后台时，计时器和通知都不起作用

请帮助我纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:59:40.537

让您的应用程序在后台运行很容易，在 info.plist 中添加用于位置更新的应用程序寄存器，为显着位置更改创建一个 CLlocation 单例寄存器，您就完成了，每次发生显着位置更改时，您的应用程序都会复活

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T04:37:32.247

When you have an App with registers for location updates it seems to always run in the background to a certain extent, as you get significan location changes and you get the enter/exit regions, so you app is running code or is being waken up to run code... the problem is that the UILocalnotification doesn't trigger a sound and alert consitently ( but all the calls are displayed in the notification center... ) The big problem here is that the significan location changes, and the enter/exit regions are useless if you can not notify your user reliably.... is CFUserNotificationDisplayAlert() the only solution to trigger an alert to the user... ? does it work ? will your app be rejected if you use it ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T20:54:36.213

当 iOS 应用程序转换到挂起（即后台）状态时，它会停止其计时器并禁用 locl 通知（并执行更多与内存优化相关的操作）。当您的应用程序在后台时显示用户警报的一种可能的解决方案（仅限 JB）是运行一个服务器（真正的 unix 服务器，它不会被应用程序后台处理！）并使用未记录的 CFUserNotificationDisplayAlert() 函数（只是谷歌它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T11:29:04.263

我得到这个工作如下：（不是一个好的设计，但一个工作的）在 info.plist 中添加了位置支持，创建一个位置管理器并继续请求位置服务。在同一个循环中安排 UIlocalnotification 。

它完美地工作。:)

注意：一个问题是它会给用户一个提示，因为“这个应用程序使用你的位置，你想允许吗”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T01:06:00.303

你最好的机会是通过在后台请求一个宽限期来稍微延长你的应用程序的生命周期。只要您在此时间范围内收到此消息，您就可以发布通知。

您可以通过调用 UIApplication.BeginBackgroundTask 来执行此操作。这将使您运行一点，并且您传递的方法将在您的宽限期用完之前不久被调用。

# php - phpexcel excel数据插入问题

> ID：10367407
> 
> 赞同：0
> 
> 时间：2012-04-28T20:48:59.003
> 
> 标签：php, mysql, database, phpexcel

我有一个包含 15 列和 248 行的 excel 文件。我想将此excel文件数据插入数据库。为此，我选择 PHPExcel 脚本。使用此脚本，我已成功将 14 列数据插入到数据库表中。但是每个单元格中的 html 标记或代码中包含 15 列名称“描述”。当我尝试沿其他 14 列上传它时，只插入了 92 条记录而不是 248 条。没有 15 列，其他人成功插入 248 行。我正在分享我的代码，让我知道问题出在哪里。谢谢

```
>include($HTTP_SERVER_VARS["DOCUMENT_ROOT"]."/my_session.php");<br>
>require_once($HTTP_SERVER_VARS["DOCUMENT_ROOT"]."/includes/Classes/PHPExcel/IOFactory.php");

>$filetype = $_FILES["file"]["type"];<br>
$filename = $_FILES["file"]["name"];<br>
$filetmp = $_FILES["file"]["tmp_name"];<br>
$Ext = strrchr($filename,".");<br>
//set_time_limit(3000);

>$objReader = new PHPExcel_Reader_CSV();<br>
$objPHPExcel = $objReader->load("ebay.csv");<br>

>foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {<br>
    $worksheetTitle     = $worksheet->getTitle();<br>
    $highestRow         = $worksheet->getHighestRow(); <br>
    $highestColumn      = $worksheet->getHighestColumn(); <br>
    $highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);<br>
    $nrColumns = ord($highestColumn) - 64; <br>
>for ($row=2; $row<=$highestRow; $row++) {<br>
        $item_name = $worksheet->getCellByColumnAndRow(3, $row)->getValue();<br>
        $condition = $worksheet->getCellByColumnAndRow(4, $row)->getValue();<br>
        $Category = $worksheet->getCellByColumnAndRow(7, $row)->getValue();<br>
        $Quantity = $worksheet->getCellByColumnAndRow(11, $row)->getValue();<br>
        $StartPrice = $worksheet->getCellByColumnAndRow(14, $row)->getValue();<br>
        $BuyItNowPrice = $worksheet->getCellByColumnAndRow(15, $row)->getValue();<br>
        $Duration = "365";<br>
        $ItemID = $worksheet->getCellByColumnAndRow(29, $row)->getValue();<br>
        $objPHPExcel->getActiveSheet()->getCell('A1')->getValue();<br>
        $PostageServices1 = $worksheet->getCellByColumnAndRow(95, $row)->getValue();<br>
        $PostageCost1 = $worksheet->getCellByColumnAndRow(96, $row)->getValue();<br>
        $PostageServices2 = $worksheet->getCellByColumnAndRow(101, $row)->getValue();<br>
        $PostageCost2 = $worksheet->getCellByColumnAndRow(102, $row)->getValue();<br>
        $PostageServices3 = $worksheet->getCellByColumnAndRow(106, $row)->getValue();<br>
        $PostageCost3 = $worksheet->getCellByColumnAndRow(107, $row)->getValue();<br>
        $DispatchTimeMax = $worksheet->getCellByColumnAndRow(122, $row)->getValue();<br>
        $ReturnsAcceptedOption = $worksheet->getCellByColumnAndRow(195, $row)->getValue();<br>
        $AdditionalDetails = $worksheet->getCellByColumnAndRow(202, $row)->getValue();<br>
        $item_description = stripslashes($worksheet->getCellByColumnAndRow(30, $row)->getValue());<br>

>insertInto("INSERT INTO mytable (`item_name`,`condition`,`Category`,`Quantity`,`StartPrice`,`BuyItNowPrice`,`Duration`,`item_code`,`PostageServices1`,`PostageCost1`,`PostageServices2`,`PostageCost2`,`PostageServices3`,`PostageCost3`,`DispatchTimeMax`,`ReturnsAcceptedOption`,`AdditionalDetails`) VALUES ('$item_name','$condition','$Category','$Quantity','$StartPrice','$BuyItNowPrice','$Duration','$ItemID','$PostageServices1','$PostageCost1','$PostageServices2','$PostageCost2','$PostageServices3','$PostageCost3','$DispatchTimeMax','$ReturnsAcceptedOption','$AdditionalDetails')");
}
}<br> 
```

描述单元格包含 html 元素，即 table、p、b 字体等...每个 excel 单元格都很重，因此我需要适当的方法来处理 html。phpexcel中是否有任何函数或方法可以处理此html单元格数据并将其从excel中获取并从头到尾插入数据库？如果是，请给我至少一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:32:52.763

如果您确定 Description 只是一个包含 html 标记的文本字符串，那么您应该对其进行转义（或使用准备好的语句）。这是因为字符串可以包含引号字符，并且是在数据库中使用文本字符串**时**的标准做法，与 PHPExcel 无关。

# actionscript-3 - 如何让角色跳跃？

> ID：10367411
> 
> 赞同：1
> 
> 时间：2012-04-28T20:49:13.697
> 
> 标签：actionscript-3, flash, flash-cs5

这是我第一次需要在我的游戏中使用它。我想让角色跳跃。我一直试图得到这个结果大约一个小时，但没有运气=（我使用的是 AS3，并且闪存 CS5.5。到目前为止，我所做的所有代码都是根据键盘输入使字符向左和向右移动。有人可以帮忙吗？

到目前为止，这是我的代码：

```
public class Dodgeball extends MovieClip
{
    public var character:Character;
    public var rightDown:Boolean = false;
    public var leftDown:Boolean = false;
    public var speed:Number = 3;
    public var timer:Timer;

    public function Dodgeball()
    {

        character= new Character();
        addChild(character);

        stage.addEventListener(KeyboardEvent.KEY_DOWN, myKeyDown);
        stage.addEventListener(KeyboardEvent.KEY_UP, MyKeyUp);
        timer = new Timer(24);
        timer.addEventListener(TimerEvent.TIMER, moveClip);
        timer.start();

    }
    public function myKeyDown(event:KeyboardEvent):void
    {
        if (event.keyCode == Keyboard.RIGHT)
        {
        rightDown = true;

            if(character.currentLabel != "walkingRight")
            {
                character.gotoAndStop ("walkingRight");
            }
        }
        if (event.keyCode == Keyboard.LEFT)
        {
            leftDown = true;
                if (character.currentLabel != "backingUp")
                {
                    character.gotoAndStop("backingUp");
                }
        }
    }
    public function MyKeyUp(event:KeyboardEvent):void
    {
        if(event.keyCode == Keyboard.RIGHT)
        {
            character.gotoAndStop("standing");
            rightDown = false;
        }
        if (event.keyCode == Keyboard.LEFT)
        {
            character.gotoAndStop("standingLeft");
            leftDown = false;
        }
    }
    public function moveClip(event:TimerEvent):void
    {
        if (rightDown)
        {
            character.x += speed;
        }
        if (leftDown)
        {
            character.x -=speed;
        }
        event.updateAfterEvent();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:01:28.937

我要做的是创建角色跳跃的补间动画。然后在该帧上调用 gotoAndPlay，并在补间的最后一帧停止，或者在“静止”帧上调用 gotoAndStop，或者任何表示中性位置的帧。

```
 if (event.keyCode == Keyboard.SHIFT)
   {
       character.gotoAndPlay("simpleJump");
       jumpDown = false;
   } 
```

这将为您提供对外观和感觉的最大动画控制。您也可以以编程方式执行此操作，但就个人而言，我建议不要这样做。设置它需要更少的时间，您可以稍后调整和改进跳跃动画。您可以根据目标附近的物体等制作几种类型的跳跃动画。

我也会改变这些东西：

```
if(character.currentLabel != "walkingRight") 
```

通过定义一个新函数，您可以在其中拥有可以完成某事的时间和地点的所有规则，以便在您的控制逻辑中，您只需调用

```
if(characterCan(character,"walkright")) ... 
```

其中 characterCan(String) 是一种检查这是否可行的方法。例如，如果你在跳跃和射击，你显然不能正确行走，所以最后，你将不得不开始在这些 if 语句中添加逻辑片段，它会变得一团糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:07:00.367

您可以在这里找到一种方法：[http](http://www.actionscript.org/forums/showthread.php3?t=256009) ://www.actionscript.org/forums/showthread.php3?t=256009就像您的`speed`变量一样，`grav`确定字符的垂直位置。

```
var grav:Number = 10;
var jumping:Boolean = false;
var jumpPow:Number = 0;

stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
stage.addEventListener(Event.ENTER_FRAME, update);

function onKeyDown(evt:KeyboardEvent):void
{
    if(evt.keyCode == Keyboard.UP)
    {
        if(jumping != true)
        {
            jumpPow = -50;
            jumping = true;
        }
    }   
}

function update(evt:Event):void
{
    if(jumping)
    {
        player_mc.y += jumpPow;
        jumpPow += grav;

        if(player_mc.y >= stage.stageHeight)
        {
            jumping = false;
            player_mc.y = stage.stageHeight;
        }
    }
} 
```

编辑：杰森的方法很好，但我不确定如果你打算进行某种碰撞检测它是否有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T21:15:02.263

一个非常简单的方法是同时具有垂直速度和水平速度。当用户按下“UP”或“JUMP”时，将 y speed 设置为负值并在你的 movieClip 函数中更新它。当角色到达一定高度时，反转速度。

使用重力和加速度看起来更好，但这是一个非常好的起点。查看运动学方程，了解如何使角色加速。

```
public var originalY;

public function myKeyDown(event:KeyboardEvent):void
{
    if (event.keyCode == Keyboard.UP && vSpeed == 0)
    {
        originalY = character.y;
        ySpeed = -1;
    }
}

public function moveClip(event:TimerEvent):void
{
    if (vSpeed != 0)
    {
        character.y += vSpeed;

        /* make the character fall down after reaching max jump height */
        if(originalY - character.y > jumpHeight) {
            vSpeed = vSpeed * -1;
        }

        /* level the character after he's hit the ground (so he doesn't go through) */
        else if(character.y >= originalY) {
            character.y = originalY;
            vSpeed = 0;
        }
    }
} 
```

# c++ - 最终链接失败：包含 windows.h 时的参数无效

> ID：10367413
> 
> 赞同：3
> 
> 时间：2012-04-28T20:49:20.453
> 
> 标签：c++, windows, linker, g++, mingw

我已经为在 Windows 上开发的 C++ 设置了带有 CDT 的 MinGW 和 Eclipse。一切都很好，直到我`#include <windows.h>`。一旦我这样做，我就会收到链接器错误消息`c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: final link failed: Invalid argument`，其中开头的路径解析为`C:/MinGW/mingw32/bin/ld.exe`.

我不知道错误消息试图告诉我什么......所以请帮我解密它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:58:59.577

因为我实际上不同意 Lol4t0 的观点，即这里过于本地化，所以这是一个丑陋的答案：重新安装 G++ 解决了这个问题。

我认为问题也可能是我可能第一次忘记安装[此处](http://yongshin.blogspot.de/2005/11/how-to-use-cdt-and-mingw-for-eclipse.html)列出的一个部件（我从哪里得到它）......但现在我认识到该链接已完全弃用（2005）。所以无论如何都应该使用另一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:52:19.027

也许您缺少命令行上的链接参数之一。

`-lgdi32 -lkernel32 -luser32`例如，如果您使用在中声明的任何 WinAPI 函数，您可能想要添加`<windows.h>`

由于您在 Eclipse 中遇到错误，请在此处添加这些库（gdi32、kernel32、user32）：

> 项目属性 -> C/C++ 构建 -> 设置 -> GCC 链接器 -> 库 -> “添加库”

（这是取自[eclipse cdt 命令行输入](https://stackoverflow.com/questions/2203533/eclipse-cdt-command-line-input)）

# python - 删除功能

> ID：10367414
> 
> 赞同：12
> 
> 时间：2012-04-28T20:49:21.600
> 
> 标签：python

我正在尝试创建一个函数来删除另一个函数。

```
 def delete_function(func):
    del func 
```

是我到目前为止所拥有的，但由于某种原因它不起作用。

```
def foo():
    print("foo")
delete_function(foo) 
```

似乎没有奏效。我知道一个人可以很容易地做到这一点，只是

```
del(foo) 
```

但我正在尝试以不同的方式来做这件事。如何？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T20:57:34.527

删除一个函数并不是你对函数本身做的事情。这是你对它所在的命名空间所做的事情。（就像从列表中删除数字 3 不是你对数字 3 所做的事情，这是你对列表所做的事情。）

假设你说

```
def foo(x): return 1
bar = foo 
```

然后（或多或少）你有两个名字，`foo`和`bar`，对于完全相同的功能。现在假设您调用`delete_function(foo)`or `delete_function(bar)`。*完全相同的东西*，即一个函数对象，被传递给`delete_function`. 但是您真正想要删除的是名称`foo`或`bar`与该对象之间的关联——并且没有可能的方法`delete_function`（无论您如何定义它）可以知道它是您想要删除的还是其他东西`foo`。`bar`

（嗯......实际上，有。你可以做一些令人讨厌的hacky事情，让代码`delete_function`知道更多关于它是如何被调用的。但甚至不要考虑考虑它们。）

所以。您的选择如下。(1) 刚才提到的讨厌的东西。不。(2) 传递`delete_function`的不是函数对象，而是有关函数名称和您要从中删除它的事物的信息。这是丑陋和笨拙的。(3) 不要打扰。

我强烈推荐#3，*除非*你这样做的唯一原因是更多地了解 Python 的工作原理。在后一种情况下，一个好的起点可能是[http://docs.python.org/reference/executionmodel.html](http://docs.python.org/reference/executionmodel.html)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-28T20:58:04.607

由于`foo`是全局变量，您可以将其从全局定义中删除：

```
def delete_func(func):
    del globals()[func.func_name] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-28T20:54:20.810

它只是行不通。

本质上，您要做的是调用者的名称空间。

试试这个：

```
print "0", locals()
def foo(): pass
print "1", locals()
del foo
print "2", locals() 
```

注意

1.  0 和 2 处的当地人 dict 是相同的，而 1 处几乎是相同的 - 除了它有`foo`.
2.  `del`是语句而不是函数

如果你`del`在函数中执行`delete_function()`，基本上你的函数中的赋值被删除（这是无效的，因为函数立即终止），而调用者保留赋值。

严格来说，`del`不会删除对象，而只是从名称到对象的赋值。一旦不再引用对象，它们就会被“自动”删除（垃圾收集）。

它可以通过检查堆栈帧并将要删除的名称作为字符串传递来完成您尝试执行的操作，但它将是一个 PITA。

也许你试试

```
del locals()['foo'] 
```

或者

```
locals()['foo'] = 42 
```

? 但我认为它并不能保证它真的修改了真正的本地人字典，它还不如对副本进行操作，从而保持无效......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-21T20:10:08.157

如果您使用的是 python 3，这应该可以工作：

```
def foo():
    return 'foo'

del foo 
```

# javascript - 你如何在 coffescript 中同时做一个 require 和一个函数？

> ID：10367417
> 
> 赞同：-2
> 
> 时间：2012-04-28T20:49:29.720
> 
> 标签：javascript, coffeescript

我需要这样做：

```
require('./config/enviroment.js')(app, express); 
```

但是我不知道该怎么做。。

我试过：

```
require './config/routes.js'(app, routes) -> 
```

我得到

```
require('./config/routes.js'(app, routes)(function() {})); 
```

但我认为这不是我想要的。

我也试过这个

```
require './config/enviroment.js'(app, express) 
```

但我明白了

```
 require('./config/enviroment.js'(app, express)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:01:44.877

有几种方法可以调用作为另一个函数的返回值的函数：

```
f(args1) args2
f(args1)(args2)
(f args1) args2
(f args1)(args2) 
```

所以在你的具体情况下：

```
require('./config/enviroment.js') app, express
require('./config/enviroment.js')(app, express)
(require './config/enviroment.js') app, express
(require './config/enviroment.js')(app, express) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T21:03:23.080

你完全可以这样做。

咖啡脚本：

```
 env = require('./config/enviroment.js')(app, express) 
```

编译为：

```
 var env;
 env = require('./config/enviroment.js')(app, express); 
```

记住它只是 Javascript。

# objective-c - 制作屏幕外可拖动视图（如 iOS 5 通知中心）

> ID：10367423
> 
> 赞同：4
> 
> 时间：2012-04-28T20:50:25.097
> 
> 标签：objective-c, cocoa-touch, uigesturerecognizer, uipangesturerecognizer, notificationcenter

我想制作一个最初在屏幕左侧不可见的视图。当手指从屏幕的最左侧平移时，左侧出现并跟随手指。我的意思是完全像 iOS 5 中的通知中心，但在左侧......

这是我想要的图片：http: [//i.imgur.com/Bb6tC.png](http://i.imgur.com/Bb6tC.png)

我的问题是下面的视图上有一个滚动视图，并且 PanGestures 正在干扰......

我试图在下面的视图中仅在定义的区域上捕捉触摸，如下所示：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

UIViewController *touchedVC = (UIViewController *)[gestureRecognizer.view nextResponder];  

CGPoint point = [touch locationInView:touchedVC.view]

if (point.x < SIDE_VIEWS_HANDLE_SIZE)) {
    return YES;
} 
```

我也使用了委托方法

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

但是，我仍然无法让所有这些平移手势不相互干扰......请问有什么想法吗？:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:57:02.197

结帐[ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)。他们已经为这种类型的视图做了大量工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:39:30.063

我还必须继承 UIScrollView 来捕获它的 UIGestureRecognizer 代表。

# android - 编写一个登录屏幕，如默认的 android 模式锁

> ID：10367424
> 
> 赞同：1
> 
> 时间：2012-04-28T20:50:29.550
> 
> 标签：android

我想为我的新应用程序编写一个登录屏幕，例如 android 的默认模式锁。有没有办法做到这一点？有没有图书馆可以帮助做到这一点？

提前致谢。

# python - 如何处理 Python 包中的相对导入

> ID：10367431
> 
> 赞同：3
> 
> 时间：2012-04-28T20:53:00.833
> 
> 标签：python

我正在开发一个 Python 项目，其布局大致如下

```
project/
    foo/
        __init__.py
        useful.py
        test/
            __init__.py
            test_useful.py 
```

test_useful.py 尝试导入 project.foo.useful 以便它可以测试它，但是当我说“python project/foo/test/test_useful.py”时它不起作用，但如果我将它复制到我当前的目录并运行“python test_useful.py”。

在开发过程中处理这些导入的正确方法是什么？一旦安装，这似乎不会成为问题，因为它将位于 PYTHONPATH 中。我应该使用 distutils 创建一个 build/ 文件夹并将其添加到我的 PYTHONPATH 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:16:53.113

请考虑使用 distutils/setuptools 使您的项目可以以 Python 标准方式安装。（提示：您需要创建一个与 'foo' 目录平行的 setup.py 文件，也称为包。）

这样做还允许您使用许多常见的 Python 测试框架（nose、py.test 等）来收集和运行测试，其中大多数此类框架会自动确保 'foo' 是一个可导入的包运行测试。您的 test_useful.py 测试可以毫无问题地导入“foo.useful”。

从您的示例目录结构中还值得注意的是，似乎通常建议您的测试目录不是 Python 包。即删除 test/ **init** .py 文件。该框架将确保测试是可运行的，并且不将其作为一个包将有助于确保它仅在源发行版中分发，而不是在二进制发行版中（可能不需要它的地方。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:19:00.413

首先，您需要将 PYTHONPATH 设置为包含“项目”或“项目”的父级。这在您开发时也很重要:-)

然后你应该能够使用绝对导入：

```
from project.foo import useful 
```

其次，我建议不要通过执行模块来运行测试，而是安装 py.test (pip install pytest)。然后，您将能够使用相对导入，只要您的 py.test 调用足够通用（即“py.test foo”可以工作，但“py.test foo/test/test_useful.py”不会）。我仍然建议您*不要*在测试中使用相对导入。

# c# - 有没有办法让我的“文件关联”不被应用程序打开？

> ID：10367432
> 
> 赞同：0
> 
> 时间：2012-04-28T20:53:16.600
> 
> 标签：c#, visual-studio-2010, file, associations

我为我的项目做了一些文件关联。它会生成多种类型的文件。但是在部署之后，当单击应用程序生成的文件时，它们会“打开”/“运行”应用程序，我该如何禁用它？

底线我不希望它为我“运行”应用程序。

提前谢谢你 我正在使用 C# Visual Studio 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:00:22.450

您可以通过运行`assoc .<ext> = ""`命令在命令行中执行此操作：

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\User>assoc .txt
.txt=txtfile

C:\Documents and Settings\User>assoc .txt = ""
.txt = ""

C:\Documents and Settings\User> 
```

您还可以创建一个批处理文件来清除您需要的所有扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:01:45.373

有两个角度可以解决这个问题：

1.  在客户端机器中，您的安装程序可以更改和重置 Windows 注册表中的文件关联
2.  当资源管理器使用您的应用程序打开一个文件时，它会以该文件作为参数调用该程序。您的应用程序可以检查是否提供了参数，在这种情况下您可以退出应用程序或显示错误消息

# ruby-on-rails - 在 Rails 中运行远程开发环境

> ID：10367433
> 
> 赞同：2
> 
> 时间：2012-04-28T20:53:33.277
> 
> 标签：ruby-on-rails

我工作的公司目前在专用远程服务器上有一个 Rails 3 应用程序。当前的开发环境是本地机器。

我们正在尝试建立一些基础设施来雇佣一些承包商，以便能够远程进行一些开发。显然这不适用于我们当前的开发设置，因为它是本地的。

我在想我可以将开发和测试代码放在单独的子域中，即

test.mydomain.com 和 dev.mydomain.com。

这是一个小型（但不断增长的）项目，在任何给定时间，我们不会有超过一个开发人员在我们的系统上进行一两个更改。我们从较小的增强功能开始，然后逐步发展到更大的增强功能。

我的问题是，部署承包商能够远程安全访问的开发系统的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:41:32.333

通常的做法是让开发人员仍然在他们自己的系统上进行本地开发，使用版本控制系统 (VCS) 克隆代码，例如[git](http://git-scm.com/)。然后，您可以从他们给您的位置“拉”新代码，或者允许他们将代码“推送”到您给他们的位置。不过，很可能会设置一个“暂存”服务器，在部署到“实时”服务器之前，将应用程序部署为附加检查；Rails 允许您设置任意数量的环境（“开发”、“生产”、“测试”是默认设置，但可以添加更多），或者您可以使用忽略这些设置并使用不同方法的部署解决方案（例如[Heroku](http://www.heroku.com/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:20:35.613

你需要有源代码控制，最好是 svn，然后在任何你想要的地方访问那个源代码。为承包商和您自己提供用户 ID 和密码，以访问 svn 并使用您/承包商的 PC 上的本地开发数据库安装本地开发环境。任何人都可以部署到 dev。环境。或仅当他/她具有身份验证时才用于生产环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T05:43:05.857

我正在做类似的事情。我们使用 GIT 来管理代码。为了管理这些不同的环境，我认为使用 GIT 工作流程非常棒，但下一步是配置一个远程数据库以供所有开发人员访问。他们只需要通过 git 提取代码，一旦您能够在 yaml 中配置远程数据库，每个人都会同步，因为您正在同一个“开发”数据库上开发。

# c++ - 从同一解决方案导入 MS Visual Studio 中的库

> ID：10367436
> 
> 赞同：2
> 
> 时间：2012-04-28T20:53:58.037
> 
> 标签：c++, visual-studio, dependencies, solution

所以我在这里有我的解决方案文件，其中包含 4 个项目。

*   *项目 A*是一个被编译成*.lib*的库。
*   *项目 B*是一个变成*.exe*的程序。

*我已将Project A*设置为*Project B*的依赖项，并且包括

```
#pragma comment(lib,"terrain.lib") 
```

放入使用该库的*项目 B中的文件中。*

尽管两个项目都被编译到同一个*Debug* / *Release*文件夹中，MSVCC 告诉我

```
1>LINK : fatal error LNK1104: File "terrain.lib" could not be opened.
// <freely translated from German, could mean "not found"> 
```

这：

```
#pragma comment(lib,"../Debug/terrain.lib") 
```

可以，但是我必须更改它才能发布。

*使用#ifdef*是唯一有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:13:17.763

您需要在项目设置中指定库路径（链接器设置中的“附加库目录” - 至少在 vc2008 中），用于调试和发布配置。您可以使用 ${ConfigurationName} 和 ${SolutionDir} 等宏，因此在项目中指定路径应该很容易。

此外，使用链接器设置而不是`#pragma comment`.

# visual-studio-2010 - 简单的 VSIX 入门？

> ID：10367439
> 
> 赞同：1
> 
> 时间：2012-04-28T20:54:08.033
> 
> 标签：visual-studio-2010, vs-extensibility, visual-studio-macros, visual-studio-extensions

我在 VS 2010 中创建了一些宏，现在我想迁移它们，使它们成为 VSIX 并将它们发布到库中。

它们建立在[`DTE`](http://msdn.microsoft.com/en-us/library/aa300825.aspx)VS 宏编辑器中提供的对象实例之上。

如何实施？

对象的替代品是什么[`DTE`](http://msdn.microsoft.com/en-us/library/aa300825.aspx)？

**更新** 我还想配置扩展，以便当它安装在用户机器上时，它还应该安装一个键盘快捷键，当按下它时，它应该在扩展中运行该方法。
请注意，目前我正在使用一个空白扩展项目，除了包含要触发的方法的代码文件和*.vsixmanifest*文件之外，没有其他文件。我已经发布了一个单独的上述问题：[如何创建运行 VSIX 方法的快捷方式？](https://stackoverflow.com/questions/10392622/how-to-make-a-shortcut-to-run-a-vsix-method)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:05:18.877

您仍然可以将 DTE 作为 VSIX 扩展的一部分进行引用。只需添加对 EnvDTE 程序集的引用。[这里](http://msdn.microsoft.com/en-us/library/68shb4dw%28v=vs.100%29.aspx)有关于如何获取对象的说明。如果你有一个`IServiceProvider`，你也`GetService(typeof(SDTE))`可以得到它。

# drupal-7 - 使用 Drupal 7 视图，将 2 种内容类型的数据字段合并到单行

> ID：10367440
> 
> 赞同：1
> 
> 时间：2012-04-28T20:54:09.640
> 
> 标签：drupal-7, views, drupal-views, relationship

我一直在寻找几天的解决方案，但没有任何运气。

这是设置：

```
TV Shows (vocabulary): show-1, show-2, show-3, ...

Episodes (content type)            Schedule (content type)
  - title                            - date/time episode airs
  - episode code <.................> - episode code
  - reference to TV Show term 
```

1）首先，我试图创建一个“视图”，它采用“电视节目”术语（或 id）的参数，并在此基础上列出与该节目相关的所有剧集以及这些剧集何时播出未来。

一个大问题是内容类型“时间表”的节点没有链接到电视节目，因此所有这些都被立即排除在外。有没有办法根据输入显示与剧集相关的所有“时间表”？

2) 这个谜题的第二部分是反其道而行之，即给定一天的 Views，然后列出该天内的所有计划节点。并且由于每个调度节点都包含一个链接回“剧集”的“剧集代码”，因此从“剧集”节点获取具有匹配“剧集代码”的相应信息。

听起来这两种情况都需要将两个单独的视图组合在一起，但这是否可能？

**注意：**当我说“剧集代码”链接这两种内容类型时，并不是真正的链接。我尝试在两种内容类型中只使用一个标记为“剧集代码”的文本字段。我还尝试创建一个词汇表“剧集”，其中包含术语的剧集代码，然后让两种内容类型都包含“剧集”词汇表的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:53:24.670

当您创建其中一个视图时（要么显示给定分类的所有剧集，要么显示给定时间的所有剧集）——是的，这些听起来确实像两个单独的视图——只要确保您展开视图的“**高级**”部分。继续添加“**关系**”，以便您可以访问所引用内容类型的字段。

例如，假设您正在创建您的第一个视图。在这种情况下，它将是情节的视图，您将使用分类术语的存在作为**过滤器**。为了能够显示 1) 存在于剧集内容类型中的字段和 2) 存在于引用的时间表内容类型中的字段，您必须向视图 添加适当的**关系。**

1.  在视图的“高级”部分中，添加适当的关系。它可能会说类似“实体引用：引用实体：通过 field_schedule 引用的内容实体的桥梁”。选择与您的参考字段名称匹配的一个，因为我只是猜测它是 field_schedule 这里。
2.  **在该关系的设置屏幕上，在“标识符**”字段中填写您容易理解的内容，例如“引用的计划节点”。
3.  **现在开始在“字段**”部分添加您希望视图返回的字段。
4.  当您到达属于引用内容类型（不是您开始使用的剧集内容类型）的字段时，继续并选择该字段使用您在“**关系**”下拉列表中的步骤 2 中创建的关系。添加该字段后，它将在第二个设置屏幕中可用。
5.  最后，如果您希望它们看起来像所有字段都在一行中，请使用“表格”显示。

现在 Drupal 将知道您正在尝试显示来自引用节点的字段，而不是它正在查看的当前剧集节点。

这有点令人困惑，但我希望它是有道理的。这是在视图中链接引用节点的方法——使用关系。

# html - 我正在编写一个不会粘的便签

> ID：10367443
> 
> 赞同：0
> 
> 时间：2012-04-28T20:54:16.540
> 
> 标签：html, css

我想为我的网站做一个便签，根据它有多少文本来改变它的长度，这些是图形

[http://www.smackjeeves.com/images/uploaded/comics/a/9/a9bb813fajYqH.png](http://www.smackjeeves.com/images/uploaded/comics/a/9/a9bb813fajYqH.png)

[http://img2.smackjeeves.com/images/uploaded/comics/e/a/eafa194f44yHh.png](http://img2.smackjeeves.com/images/uploaded/comics/e/a/eafa194f44yHh.png)

[http://www.smackjeeves.com/images/uploaded/comics/4/f/4fcc68191cLbT.png](http://www.smackjeeves.com/images/uploaded/comics/4/f/4fcc68191cLbT.png)

我看了一些例子，这是我的 div 的 CSS 代码

```
 #sticky-note 
 {
  background-image:url('http://www.smackjeeves.com/images/uploaded/comics/a/9/a9bb813fajYqH.png'), 
                   url('http://img2.smackjeeves.com/images/uploaded/comics/e/a/eafa194f44yHh.png'),
                   url('http://www.smackjeeves.com/images/uploaded/comics/4/f/4fcc68191cLbT.png');
  background-position: top, center, bottom;
  background-repeat:no-reapeat, repeat-y, no-repeat;
  padding: 10px;
  max-width: 170px;
  text-align: center;
 } 
```

但它不起作用，我希望中间图形垂直重复，顶部和底部的图形在顶部保持相同，帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:56:47.070

使用三个单独的 div，一个包含顶部的页眉，一个包含底部的页脚，以及一个延伸中间的内容。

# security - 在内部保持密码长度一致并保持盐的秘密？

> ID：10367448
> 
> 赞同：1
> 
> 时间：2012-04-28T20:55:49.333
> 
> 标签：security, cryptography, passwords, salt, sha

在存储密码时，据说 Salt 不需要保密，它的唯一目的是保持所有 Hash 的唯一性。也有人说限制密码长度不是一个好习惯，但考虑这个例子：

在散列之前，我们确保纯文本版本在内部始终为 128 个字符，方法是将用户输入修剪为最多 100 个字符，然后附加额外的字符作为我们的盐。

因此，如果用户输入 20 个字符，我们将附加 108 个随机字符作为盐。如果用户输入 100，我们追加 28，依此类推。关键是，纯文本版本的长度应该是 128 个字符。在代码中它可能看起来像这样：

```
$salt   = generate_salt($pass); // length varies as explained above
$hash   = hash('sha512', $pass.$salt); 
```

这样，我们在散列之前的“纯文本”将始终为 128 个字符。

我们将 $hash 存储在服务器 A 上，并将 $salt 存储在服务器 B 上。

现在让我们假设攻击者获得了对哈希数据库（服务器 A）的访问权限并设法反转了哈希。对他来说看起来不错，但他看到的纯文本版本（或反向哈希）看起来仍然像哈希，因为它有 128 个字符。由于他不知道盐，他永远不会知道原始密码。

作为一个额外的挑战，由于 SHA512 产生 128 个字符，他也永远无法确定他是否已经到达纯文本版本，因为（如前所述）纯文本版本看起来像哈希。乍一看，他可能认为这是一个迭代版本，如果是这样，他可能会继续迭代，可能会无限期地迭代。

这种方法有什么问题吗，因为在哈希反转的情况下，保持盐的秘密可以提供额外的安全性，并且保持纯文本长度统一可以说增加了混淆层？

注意：这当然假设您的应用程序有多个失败的登录检测/预防。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:06:36.377

**首先，除非你真的知道你在做什么，否则不要发明你自己的加密系统。**

使用现有的（如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)、[bcrypt](http://codahale.com/how-to-safely-store-a-password/)或 scrypt ），它们比简单的加盐散列具有优势，因为它们使用更多的 CPU 时间（全部三个）和/或内存（后两个），这使得并行化变得昂贵。

哈希中的盐只能防止彩虹表，而不是暴力攻击！

如果攻击者设法*反转哈希*，他将获得`$pass.$salt`（因此，密码）的知识。

salt 的目的是避免廉价地创建彩虹表，也就是说，攻击者不仅要计算每个可能密码的哈希值并将它们与您的数据库进行比较，还必须对每个不同的 salt 执行此操作。

保持盐的秘密具有使攻击更加昂贵的理论优势，因为攻击者还必须为每个可能的密码尝试所有可能的盐。

然而，在实践中，一旦他可以访问服务器 A，他可能就能够访问服务器 B。

如果某些东西*看起来像哈希*可能并不重要。一旦服务器受到威胁，攻击者可能会发现使用了哪些混淆技术。

附带说明：`SHA-512`产生 512 位输出，即 64 个 ASCII 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:08:45.250

这种方法的第一个问题是您正在实现自己的加密代码。这几乎总是一个坏主意。加密很难，而且很容易以微妙的方式搞砸，并且其他人已经投入了大量时间和精力来实现基于它们的加密原语和服务，因此您不必这样做。但是，为了争论，我们假设您确实需要这样做:-)。

第二件事是你截断了用户的输入——丢掉了宝贵的熵——根本没有任何好处。您已准备好生成多达 128 个字符的盐；为什么不总是这样做并将它们（连同密码）输入您的哈希？你通过截断得到什么？我看到的唯一答案是，据说原始密码“看起来像哈希，因为它是 128 个字符”，但这根本不是真的；您的加盐密码仍然以实际密码数据开头，这通常看起来与哈希非常不同。

第三件事——这可能只是我未能正确读懂你的想法——是不清楚你的这些盐是从哪里来的。您将它们描述为“随机的”，并说攻击者不会知道它们；但是您的身份验证系统如何获取它们？看起来它们是从密码中派生的，但在这种情况下，加盐加散列只是一个稍微复杂一点的散列函数，你并没有真正获得任何东西。

您显然拒绝（或者可能没有遇到）的一般原则是：*始终设计密码系统，假设攻击者知道他们可能知道的一切，包括您的所有源代码*。这是一个很好的原则，你不应该拒绝它。依靠一个小的“额外的混淆层”不会很好地为您服务；在最坏的情况下，它会更容易出现错误（通过使系统复杂化）并引起虚假的安全感。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:05:04.757

*盐不需要保密，它的唯一目的是保持所有哈希唯一*

它还使得暴力破解哈希表“更慢”，因为您需要为每个哈希 + salt 组合每行尝试一次，而不是只为整个表尝试一个哈希（' select * from passwords where hash =' xxx''）

*保持盐的秘密可以提供额外的安全性，并且保持纯文本长度统一可以说增加了混淆层？*

您的“反向哈希”看起来像哈希这一事实并没有增加真正的额外安全性（它实际上只是默默无闻的安全性）。您的网络服务器将需要连接到服务器 A**和**服务器 B（用于验证用户/密码组合），因此当该服务器受到威胁时，所有希望都将丢失。

您可能感兴趣的一篇[文章是 Jeff Atwood 的这篇博](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)文。（编辑：发布了错误的编码恐怖链接）

# build - 将指定的构建系统设置为 sublime text 2 上文件类型的默认值

> ID：10367452
> 
> 赞同：3
> 
> 时间：2012-04-28T20:56:32.123
> 
> 标签：build, system, sass, sublimetext2

我安装了包[SASS](https://github.com/n00ge/sublime-text-haml-sass)和[SCSS](https://github.com/kuroir/SCSS.tmbundle/)。SCSS 提供语法高亮，而 SASS 提供我需要的 scss 构建系统。我的问题是，如果构建设置为自动，如果我按 ctrl+b，它不会构建 scss 文件，所以我必须总是返回并重新选择该选项。有没有办法让构建系统成为 scss 的自动构建系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T05:33:39.713

使用构建系统设置它并使用 F7 启动： [http](http://readthedocs.org/docs/sublime-text-unofficial-documentation/en/latest/file_processing/build_systems.html?highlight=build) ://readthedocs.org/docs/sublime-text-unofficial-documentation/en/latest/file_processing/build_systems.html?highlight=build有关设置的更多信息向上。

更新的答案

复制以下内容：

```
{
  "cmd": ["sass", "--update", "$file:${file_path}/${file_base_name}.css", "--stop-on-error", "--no-cache"],
  "selector": "source.sass, source.scss",
  "line_regex": "Line ([0-9]+):",
  "osx":
  {
    "path": "/usr/local/bin:$PATH"
  },

  "windows":
  {
    "shell": "true"
  }

} 
```

在 Sublime Text 中，转到 Tools > Build System > New Build System > Paste 给它一个名字。答对了。

**更简单的方法**

[Sublime 中的 SASS 支持](http://aspirecode.com/how-to-add-sass-support-in-sublime-text/)

[添加对几乎所有内容的支持。](http://addyosmani.com/blog/custom-sublime-text-build-systems-for-popular-tools-and-languages/)

**最简单的方法**

不需要的时候为什么要DIY。

每次保存时都想在打开的浏览器中更新网站吗？

1.  一般来说，必须安装 Ruby Git 和 Python。
2.  安装 Node.js。(win) 从主站点下载的 .msi 运行良好，包括 npm 现在您可以访问“gem”和“npm”包管理器。现在事情变得容易了，尽管我不妨长篇大论地写出来。

3.  罗盘：

    gem update --system gem install compass // 现在可以使用此命令构建基于 sass 的项目 compass create myFirstWebsite // ..installs in "/myFirstWebsite"..

4.  安装 Grunt 客户端（全局标志）

    npm install grunt-cli -g

现在可以访问丰富的 Grunt 自动化软件包，即：

```
npm grunt-contrib-jshint --save-dev 
```

“dev”标记 - 仅适用于您的本地项目（当前和子文件夹），在 package.json 中列为“devDependency”，这意味着它不会与您的项目打包在发行版/产品版本中

1.  是时候做一些简单的真棒了……约曼

    npm 安装哟 -g

安装 yeoman（yo 命令）一堆其他必需品和 Bower - twitter 对 Node / Gem 等的响应 Bower 负责包依赖项。

**和真棒？**

```
// make a new folder. cd into it, and type:
yo webapp

// There are multiple 'generators' you can install with yo.
// webapp is the one most suitable for front-end dev / web app building

// other things you might want before you start.. maybe underscore:
bower install underscore
// adds '_' to the set-up as a dependency

// These commands will brighten your day:
grunt test      
// comprehensive testing of app
grunt server    
// This part you'll love! Starts server and launches app in browser
// - includes live-refreshing... save a file, and all required builds etc
// are preformed (damn fast) and automatically refreshes browser.
// Yup, 'grunt server' = project-wide equiv to 'compass watch'
grunt
// Build application for deploy. Not only do you get minification and concatenation;
// also optimize all your image files, HTML, compile your CoffeeScript and Compass files, 
// if you're using AMD, will pass those modules through r.js so you don't have to. 
```

# actionscript-3 - flash/AS3 netstream 加载/缓冲非常慢，我错过了什么？

> ID：10367469
> 
> 赞同：0
> 
> 时间：2012-04-28T20:58:32.710
> 
> 标签：actionscript-3, netstream

我的自定义电影播放器​​使用以下代码播放视频。剪辑开始播放需要很长时间，但一旦播放，您可以直接跳到结尾。我有一种感觉，在缓冲区和预加载如何工作方面我缺少一些知识。有人可以按正确的方向发送我吗？

```
private function init(e:Event = null):void {
    connection = new NetConnection();
    connection.addEventListener(NetStatusEvent.NET_STATUS, doNetStatus);
    connection.addEventListener(IOErrorEvent.IO_ERROR, doIOError);
    connection.addEventListener(SecurityErrorEvent.SECURITY_ERROR, doSecurityError);
    connection.connect(null);
    stream = new NetStream(connection);
    stream.addEventListener(AsyncErrorEvent.ASYNC_ERROR, doAsyncError);
    stream.addEventListener(NetStatusEvent.NET_STATUS, doNetStatus);
    stream.addEventListener(IOErrorEvent.IO_ERROR, doIOError);
    stream.client = this;
    video = new Video(1024, 576);
    mc = new MovieClip();
    mc.addChild(video);
    stage.addChild(mc);
    mc.addEventListener(MouseEvent.CLICK, onClick);
    video.attachNetStream(stream);
    stream.bufferTime = 5;
    stream.receiveAudio(true);
    stream.receiveVideo(true);
    stream.play(SITEURL + vidID +".mp4");
} 
```

您可以在此处查看播放器的运行情况：http: [//joon.be/serve/ngjd_player.swf](http://joon.be/serve/ngjd_player.swf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:38:19.263

显然视频没有流式传输，因为我需要在它们上运行 QT FastStart。这解决了问题，netstream 现在按预期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T12:04:16.870

您可以下载`qt-faststart.exe`然后在管理员命令 promt 中运行：

```
qt-faststart.exe "source.mp4" "fixed.mp4" 
```

10 分钟长的视频大约需要 15-30 秒。学分：[https ://articulate.com/support/article/mp4-movie-doesnt-begin-playing-until-it-has-fully-downloaded](https://articulate.com/support/article/mp4-movie-doesnt-begin-playing-until-it-has-fully-downloaded)

我还尝试了这个免费的开源转换器 HandBrake 并`Web Optimized`选中。（花了 10 分钟来转换）

# php - 在php中用cURL替换AJAX

> ID：10367471
> 
> 赞同：0
> 
> 时间：2012-04-28T20:58:39.410
> 
> 标签：php, javascript, ajax, curl, http-headers

我有一些简单的情况，但对我来说，目前看起来非常艰难。

我正在尝试废弃一个使用 AJAX 调用来获取数据的网络。

> [http://www.economia-nmx.gob.mx/normasmx/index.nmx](http://www.economia-nmx.gob.mx/normasmx/index.nmx)

在检查适当的选项并按下`submit`按钮后，有一个表格。发送一个 ajax 调用，作为响应，数据打印在页面上。没有 JSON 参与其中。

使用 firebug 和 web 开发工具，我可以看到引用 URL、参数和 cookie 以及其他涉及的内容，Firebug 中的请求标头看起来像

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Cookie  JSESSIONID=cYJtPcYGYs2dM12QXgD3vGfnnQFVX3cTzfFbYLwWBkmXv4m47jh1!924382716
Host    www.economia-nmx.gob.mx
Referer http://www.economia-nmx.gob.mx/normasmx/index.nmx
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20100101 Firefox/11.0
consultasvarias.nmx http://www.economia-nmx.gob.mx/normasmx/consulta.nmx 
```

有人可以告诉我，我怎样才能卷曲页面（在 php 中）？

我必须在 CURl 中发送什么数据？

或者我必须生成完整的请求标头？

我必须为此设置哪些 CURL 选项？

请指导我并感谢您的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:04:15.590

您应该尝试模仿 ajaxrequest。

您可以模仿的参数：

```
$data = array('name' => 'Foo', 'id'=>'Bar'); 
curl_setopt($ch, CURLOPT_URL, 'http://localhost/upload.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data); 
```

您可以从检查[curl 上的 phpmanual 开始](http://www.php.net/manual/en/function.curl-exec.php)

# php - 如何在上传到文件系统时避免使用相同的图像名称

> ID：10367473
> 
> 赞同：1
> 
> 时间：2012-04-28T20:58:47.947
> 
> 标签：php, mysql, image, upload, unique

我有一个表格，用户可以在其中上传图片作为注册过程的一部分。但我的问题是，使用相同名称保存图像名称的用户在查看个人资料图片时可能会导致一些问题。如何在上传到文件系统时使图片名称唯一..

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T21:01:21.437

我建议使用以下方案之一：

*   使文件名成为用户名/用户 ID 的函数
*   使文件名成为随机值
*   使文件名成为文件内容的函数（例如 MD5 校验和）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:09:21.117

如果这有帮助

```
$t = uniqid();
$filename='user-'.$t;
echo $filename; // user-1335601088 (always a different name) 
```

# c++ - 如何将 unsigned int 放入 char 数组并将其提取回来

> ID：10367476
> 
> 赞同：4
> 
> 时间：2012-04-28T20:59:01.920
> 
> 标签：c++, c, bit-manipulation, memcpy

有人可以解释为什么这不起作用吗？我试图将一个 unsigned int 放入一个 char 缓冲区，然后将其取回另一个 unsigned int。

```
 1 #include<stdio.h>
  2 #include<string.h>
  3 int main(){
  4   unsigned int tester = 320;
  5   char buffer[512];
  6   memset(buffer,0,512);
  7   memcpy(buffer,&tester,sizeof(unsigned int));
  8   /*buffer[0]|=tester;
  9   buffer[1]|=(tester>>8);
 10   buffer[2]|=(tester>>16);
 11   buffer[3]|=(tester>>24);*/
 12   unsigned int tested;
 13   memcpy(&tested,buffer,sizeof(unsigned int));
 14 
 15   /*tested|=(buffer[3]<<24);
 16   tested|=(buffer[2]<<16);
 17   tested|=(buffer[1]<<8);
 18   tested|=(buffer[0]);*/
 19   printf("\n %d\n",tested);
 20 } 
```

当我做 memcpy 它工作。但是当我采用按位方法时，它不起作用。有趣的是，当我将缓冲区大小设置为 20 时，它可以工作。但是当我使用大缓冲区，甚至 50 时，它总是以按位方式打印 368。memcpy 再次正常工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T21:04:19.713

当您在第 12 行声明 test 时，`unsigned int tested;`它应该初始化为零`unsigned int tested =0;`此外，使用 -Wuninitialized 或 -Wall 进行编译会警告您测试的未初始化。

# xcode - 有没有办法在其他视图中播放和停止声音？

> ID：10367480
> 
> 赞同：2
> 
> 时间：2012-04-28T21:00:26.970
> 
> 标签：xcode, xcode4

我是 XCode 的新手。我想在多个视图中播放一种声音，如何在其他视图中停止并播放相同的声音。

# lisp - 如何在 LISP 中将两个大整数相乘

> ID：10367485
> 
> 赞同：-2
> 
> 时间：2012-04-28T21:01:12.317
> 
> 标签：lisp, common-lisp

给定一个 n 位整数和一个 m 位整数。如何使用列表、数组或任何其他 lisp 特定数据类型在 LISP 中将它们相乘？

例如;

> a(1)a(2)...a(n)
> 
> b(1)b(2)...b(m)

结果为；

> r(1)r(2)...r(m+n)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T21:12:47.603

Common Lisp 已经有原生的[bignums](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)。你为什么不使用它们？

您基本上不必特别声明任何东西，它们“神奇地”发生：

```
 % sbcl
 This is SBCL 1.0.56.0.debian, an implementation of ANSI Common Lisp.

 * (defun fact (n) (if (< n 1) 1 (* n (fact (- n 1)))))
 FACT

 * (fact 50)
 30414093201713378043612608166064768844377641568960512000000000000 
```

因此，使用 Common Lisp，您基本上不必费心......

### 附加物

而高效的bignum算法是一个*非常困难的问题*；高效算法比简单算法具有更好的复杂性；您可以找到解释它们的困难书籍（基础数学非常困难）。另请参阅[此答案](https://stackoverflow.com/a/8758423/841108)。

如果你想做一个有竞争力的 bignum 实现，准备好几年努力工作，把它做成博士论文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T09:18:16.977

一个简单的算法就是模仿你在手动计算乘法时所做的事情：

```
 123 x
  456 =
  ---
  738
 615
492
-----
56088 
```

第一步是实现乘以单个“数字”（例如`123 x 6 = 738`）。

之后，移位当然是微不足道的（只需滑动列表中的元素），因此可以使用加法功能完成乘法运算。

请注意，这不是计算两个大数的乘积的最快方法（例如，参见[Karatsuba 算法](http://en.wikipedia.org/wiki/Karatsuba_algorithm)）。

PS：思考如何手动计算两个大数的乘积也解释了一些“惊人”的结果，例如 111111111*111111111 = 12345678987654321

```
 111111111 x
         111111111 =
         ---------
         111111111
        111111111
       111111111
      111111111
     111111111
    111111111
   111111111
  111111111
 111111111
 -----------------
 12345678987654321 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T21:10:06.573

```
(* 1234567890123456789123456789 1234567890123456789123456789) 
```

大整数是 Common Lisp 原生的。

# php - $_session 值计数器

> ID：10367487
> 
> 赞同：0
> 
> 时间：2012-04-28T21:01:12.900
> 
> 标签：php, session, counter

我有一个测验，使用这样的会话将结果发送到 result.php 页面

```
 {
        $_SESSION['result'] = 'Correct Answer!';
    }else{
        $_SESSION['result'] = 'Wrong Answer!';
    } 
```

在 session.php 页面上，我想要一个计数器来计算所有“正确答案！” 和“错误的答案！” . 最终我还试图计算算术以显示正确和错误结果的百分比以及基于此计数器的总分..

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:05:58.297

计数器初始化（可以在每次步进前执行）：

```
if(!isset($_SESSION['correctAnswers'])
    $_SESSION['correctAnswers'] = 0;
if(!isset($_SESSION['wrongAnswers'])
    $_SESSION['wrongAnswers'] = 0; 
```

计数器步进：

```
if(...) {
    $_SESSION['result'] = 'Correct Answer!';
    $_SESSION['correctAnswers'] += 1;
}else{
    $_SESSION['result'] = 'Wrong Answer!';
    $_SESSION['wrongAnswers'] += 1;
} 
```

分数：

```
$correctAnswers = $_SESSION['correctAnswers'];
$totalAnswers = $_SESSION['wrongAnswers'] + $correctAnswers;
if($totalAnswers > 0)
    $score = $correctAnswers / ($totalAnswers) * 100;
else 
    $score = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:04:30.840

这不只是想要存储回答的问题数和正确回答的问题数的简单案例吗？

如果是这样，正确答案的百分比是`($correctCount / $totalCount) * 100`

# php - 尝试进行 php/mysql 搜索，需要将字符串分解为数组并搜索

> ID：10367491
> 
> 赞同：0
> 
> 时间：2012-04-28T21:01:37.517
> 
> 标签：php, mysql, arrays, search

我的用户将搜索词放在输入字段中。我正在使用的脚本将其存储在 $find 变量中。然后它像这样搜索mysql：

```
"select * from mytable WHERE title LIKE '%$find%' or description LIKE '%$find%'"; 
```

我希望能够提取结果，即使标题中有 1 个单词，描述中有另一个单词，目前还没有发生。所以.. 我猜我需要将 $find 变量分解成一个带有函数的数组。之后，我将如何在 mysql 中进行搜索？由于我永远不知道搜索中有多少单词（他们可能决定一次搜索 8 个单词），我如何在 mysql 查询中引用数组？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:07:56.270

您应该使用 FULLTEXT 索引并在其上构建适当的[布尔搜索查询](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)。

没有它你可以达到你想要的效果，但是与使用 FULLTEXT 索引相比，这会很慢。您将不得不使用`explode`来获取单词列表，然后建立一个`WHERE`类似的条件`concat(title, description) LIKE '%word1%' AND concat(title, description) LIKE '%word2%'`。

（在我的第一个答案中，我说没有 FULLTEXT 就不可能达到这种效果。我错了，编辑了这个答案。）

# c# - 显示多列图

> ID：10367500
> 
> 赞同：1
> 
> 时间：2012-04-28T21:02:41.130
> 
> 标签：c#, wpf, charts

我目前正在处理 ac# wpf 项目，我想在其中向用户显示图表。我正在使用 WPF C# .net 4 并使用内置的图表库，但我找不到任何关于我希望它使用的图表类型的信息。下面的屏幕截图是我正在寻找的图表类型。 ![在此处输入图像描述](../Images/ab2cad82abeeb60d7467607e4dc89b7a.png)

我有一个单独的柱形图，即每个月有一个柱形图，而不是每个月能有 2 个柱形图。

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:34:48.037

你有正确的图表，你只需要添加另一个系列：

```
<chartingToolkit:Chart
  Title="Debits and credits"
  DataContext="{StaticResource MyDataCollection}">
  <chartingToolkit:ColumnSeries
    Title="Credits"
    ItemsSource="{Binding}"
    IndependentValuePath="Month"
    DependentValuePath="Credit" />
  <chartingToolkit:ColumnSeries
    Title="Debits"
    ItemsSource="{Binding}"
    IndependentValuePath="Month"
    DependentValuePath="Debit" />
</chartingToolkit:Chart> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:09:24.347

根据您的描述，很难准确地确定您想要什么，但如果我不得不猜测，我会说您想要一个堆积条形图。这样，您可以有一个单条，其中借方堆叠在贷方之上或贷方堆叠在贷方之上。

顺便说一句，我不知道这是否对你有帮助，但我最近研究了一些 WPF 图表控件，用于我参与的一个非常重要的制造应用程序。我发现 Visifire 是我在比较成本时能找到的最好的 WPF 控件到特征。而且我和他们没有任何关系。

# perl - 动态填充哈希：一个文件中的键和另一个文件中的值

> ID：10367505
> 
> 赞同：-3
> 
> 时间：2012-04-28T21:03:12.867
> 
> 标签：perl, file, file-io, hash

所以我有一个带有以下行的文本文件：

> 123456789

但后来我有第二个文件：

> 987654321

那么我怎样才能使第一个文件的内容`keys`成为哈希，而第二个文件的值`values`呢？（每个字符都是一个键/值）

我应该将每个文件存储到不同的数组中，然后以某种方式合并它们吗？我该怎么做？还要别的吗？

老实说，我会给你我尝试过的代码，但我一点也不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:13:02.273

您可以使用散列片。

如果每一行都是一个键/值：（s///r需要5.14，但可以很容易地为早期版本重写）

```
my %h;
@h{ map s/\s+\z//r, <$fh1> } = map s/\s+\z//r, <$fh2>; 
```

如果每个字符都是键/值：

```
my %h;
{
   local $/ = \1;
   @h{ grep !/\n/, <$fh1> } = grep !/\n/, <$fh2>;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T21:08:04.330

只需[打开](http://perldoc.perl.org/functions/open.html)两个文件并同时[逐行读取它们](http://perldoc.perl.org/functions/readline.html)：

```
use strict; use warnings;
use autodie;

my %hash;
open my $keyFile, '<', 'keyfileName';
open my $valueFile, '<', 'valuefileName';

while(my $key = <$keyFile>) {
   my $value = <$valueFile>;
   chomp for $key, $value;       
   $hash{$key} = $value;
} 
```

当然，这只是一个关于它如何工作的快速草图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:47:09.953

OP提到每个字符都是一个键或值，我认为你的意思是输出应该是一个像`( 1 => 9, 2 => 8, ... )`. OP还问：

> 我应该将每个文件存储到不同的数组中，然后以某种方式合并它们吗？我该怎么做？

这正是这个答案的工作原理。这`get_chars`是一个读取每个文件、拆分每个字符并返回该数组的函数。然后使用`zip`from[`List::MoreUtils`](http://p3rl.org/List%3a%3aMoreUtils)创建哈希。

```
#!/usr/bin/env perl

use strict;
use warnings;

use List::MoreUtils 'zip';

my ($file1, $file2) = @ARGV;

my @file1chars = get_chars($file1);
my @file2chars = get_chars($file2);

my %hash = zip @file1chars, @file2chars;

use Data::Dumper;
print Dumper \%hash;

sub get_chars {
  my $filename = shift;
  open my $fh, '<', $filename 
    or die "Could not open $filename: $!";

  my @chars;
  while (<$fh>) {
    chomp;
    push @chars, split //;
  }
  return @chars;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T22:34:16.267

迭代器疯狂：

```
#!/usr/bin/env perl

use autodie;
use strict; use warnings;

my $keyfile_contents = join("\n", 'A' .. 'J');
my $valuefile_contents = join("\n", map ord, 'A' .. 'E');

# Use get_iterator($keyfile, $valuefile) to read from physical files

my $each = get_iterator(\ ($keyfile_contents, $valuefile_contents) );

my %hash;
while (my ($k, $v) = $each->()) {
    $hash{ $k } = $v;
}

use YAML;
print Dump \%hash;

sub get_iterator {
    my ($keyfile, $valuefile) = @_;

    open my $keyf, '<', $keyfile;
    open my $valf, '<', $valuefile;

    return sub {
        my $key = <$keyf>;
        return unless defined $key;
        my $value = <$valf>;
        chomp for grep defined, $key, $value;
        return $key => $value;
    };
} 
```

输出：

```
C:\temp> 年
---
答：65
乙：66
C: 67
D: 68
E: 69
楼：~
格：~
哈：~
我：~
J：~
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-28T21:12:15.940

我会写

```
my %hash = ('123456789' => '987654321'); 
```

# javascript - 需要帮助在 Javascript 中查找/遍历 dom

> ID：10367509
> 
> 赞同：3
> 
> 时间：2012-04-28T21:03:51.743
> 
> 标签：javascript, dom

我敢肯定这是一个多余的问题，但我已经找了一个小时左右，空手而归，所以希望有人能帮忙......

寻找一种在搜索“鸡”（或任何值）时使用 JS（不是 jquery）返回下面 li 的类的方法。

```
<li class='113252'>
    <span>Chicken</span>
</li> 
```

所以希望javascript在给定span值时返回li类（在本例中为Chicken）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T21:29:13.580

尝试这个：

```
var spanArray = document.getElementsByTagName('span');

for (var i=0; i<spanArray.length; i++) {
    if(spanArray[i].innerHTML.toUpperCase() === 'CHICKEN')
    {
        alert(spanArray[i].parentNode.className);
        break;
    }
} 
```

现在，我更熟悉 jQuery，但似乎在此处链接的小提琴中工作：http: [//jsfiddle.net/FranWahl/fCzYc/2/](http://jsfiddle.net/FranWahl/fCzYc/2/)（更新以包括`break;`匹配后的建议）

您可以为 the 添加更多类型检查`parentNode`以确保它是 an`li`等等，但这应该可以帮助您入门。

另外，我完全不确定这在大文档中的效率如何。

**编辑**
阅读了一些评论后，我更新了上面的代码，以包括[ajax333221](https://stackoverflow.com/users/908879/ajax333221)建议的中断。

[丹尼斯](https://stackoverflow.com/users/850833/dennis)提到最好打电话`getElementByTagName`给`ul`. 鉴于你可以有一个`li`没有 a`ul`我在这里添加它作为单独的代码，因为我不确定 OP 是否有`ul`标签。

针对每个查询的代码（[此处](http://jsfiddle.net/FranWahl/EJNXB/2/)`ul`为 jsFiddle ）

```
var ulArray = document.getElementsByTagName('ul');
var parentFound = false;

for (var i = 0; i < ulArray.length; i++) {
    var spanArray = ulArray[i].getElementsByTagName('span');

    for (var i = 0; i < spanArray.length; i++) {
        if (spanArray[i].innerHTML.toUpperCase() === 'CHICKEN') {
            alert(spanArray[i].parentNode.className);
            parentFound = true;
            break;
        }
    }

    if(parentFound)
    {
        break;
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:09:40.330

这绝不是完全完整的，这就是你应该寻找图书馆的原因，但它做了两件事：

1.  递归遍历子元素（从文档的 BODY 开始），找到提供的文本
2.  递归遍历父元素找到提供的父元素标签，一旦找到就会返回该父元素的类

JSFiddle：http: [//jsfiddle.net/vol7ron/bttQN/](http://jsfiddle.net/vol7ron/bttQN/)

```
function getParentClass(element, parentTag){
   if (element.tagName == parentTag.toUpperCase())
       return element.className;
   return getParentClass(element.parentNode,parentTag);
}

window.findParentClass = function (text,tagName){
    var elements = document.getElementsByTagName('body');
    for (var n=elements.length; n--;){
        var foundClass = (function searchNextChild(el){
            if (!el.children.length) {
                if (el.textContent == text) 
                   return getParentClass(el,tagName);
                return;
            }
            for (var i=0, n=el.children.length; i<n; i++)
               return searchNextChild(el.children[i]);
        })(elements[n]);

        return foundClass;
    }
}; 
```

示例调用：

```
alert( findParentClass('Chicken','li') ); 
```

# javascript - getJSON 错误 - 不知道哪里出错了

> ID：10367510
> 
> 赞同：1
> 
> 时间：2012-04-28T21:03:56.870
> 
> 标签：javascript, json, jquery

在其他一些堆栈用户的帮助下，我想出了这个：

[http://jsfiddle.net/9ywLq/](http://jsfiddle.net/9ywLq/)

我想使用一个外部 json 文件并想出类似的东西：

[http://jsfiddle.net/RCB9M/](http://jsfiddle.net/RCB9M/)

我现在链接的文件是：[http](http://www.lofiz.co.uk/afba/songkickwidget/testjsondata.json) ://www.lofiz.co.uk/afba/songkickwidget/testjsondata.json但这最终会变成一个 Songkick JSON 输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:06:03.990

您是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的受害者。出于安全原因，浏览器默认会阻止跨域获取的 JSON。如果您需要跨域获取数据，则必须实现服务器端代理，或者使用[JSONP](http://en.wikipedia.org/wiki/JSONP)（如果数据也以该格式提供）。如果源不提供 JSONP 格式的数据，我相信你可以利用[YQL](http://developer.yahoo.com/yql/)来转换它。

JSONP 资源：http: [//www.ibm.com/developerworks/library/wa-aj-jsonp1/](http://www.ibm.com/developerworks/library/wa-aj-jsonp1/)

**更新：**您的 URL 将被称为：

```
​$(function(){
  var url = "https://api.songkick.com/api/3.0/artists/253846/calendar.json?apikey=HlgKnFaq9qYO1h9T&jsoncallback=?";
  $.getJSON(url, function(data){
    // Do what you want to do with the return data within this callback
    console.log(data);        
  });
});​ 
```

**更新 2：**

我已更新您的[JSFiddle](http://jsfiddle.net/9ywLq/3/)以使用`getJSON()`. 我还冒昧地进行了一些其他更改：

1.  我修改了您定义月份名称数组的方式，使其更具可读性。
2.  `.getDay()`在 JavaScript 中用于返回星期几（0 = 星期日，1 = 星期一等等），因为我相信你想要一个月中的哪一天，你应该使用它`.getDate()`来代替。请参阅我的 JSFiddle。

# c++ - 自日期以来的 C++11 天数

> ID：10367511
> 
> 赞同：3
> 
> 时间：2012-04-28T21:04:11.630
> 
> 标签：c++, time, c++11

我需要将日期存储在平面文件中。是否有任何简单的方法可以使用 C++11 中的标准库获取自特定日期（例如自公元 1 年以来）以来的天数？我唯一知道的是：

*   获取 std::tm 结构，将所有时间值设置为 0
*   将其转换为 std::time_t （我还不知道正确的方法）
*   除以 time_t 得到一天的分辨率

我可以更轻松地执行它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:50:28.793

你说的开始听起来很合理。[您可以使用mktime](http://www.cplusplus.com/reference/clibrary/ctime/mktime/)将 struct tm 转换为 time_t 。请注意，mktime 根据系统/环境设置将其输入解释为本地时间，并且没有不依赖于“额外”库的广泛可用的 UTC 对应物，但这对您来说可能不是问题。

# ios - 将 facebook api 集成到 iOS 应用程序

> ID：10367513
> 
> 赞同：1
> 
> 时间：2012-04-28T21:04:18.360
> 
> 标签：ios, facebook

我尝试浏览本教程[Facebook 教程](http://developers.facebook.com/docs/mobile/ios/build/#register)

```
% ~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh 
```

我的问题：这个命令应该通过终端运行，但是在哪里？

我已将 git clone facebook api 制作到桌面，现在它位于桌面文件夹中。

我需要执行哪个操作来运行上述命令行。

我的意思是诸如（cd Desktop -> cd facebook-ios-sdk ...）之类的操作

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T22:28:26.863

**它只是在您的链接本身中给出.. 与其使用脚本并以如此复杂的方式将 facebook-ios-sdk 包含到您的项目中，不如您只查看本注释的最后一行。是的。您可以将其拖放到您的 xcode 项目文件夹中。**

**创建 iOS Facebook SDK 静态库**

如果您创建一个启用了自动引用计数 (ARC) 的 iOS 应用程序，那么您应该使用 iOS Facebook SDK 的静态库版本，而不是从 src 文件夹中拖入文件。iOS Facebook SDK 的最新版本包含一个 shell 脚本，您可以运行该脚本来构建静态库。您可以通过命令行调用脚本目录下的 build_facebook_ios_sdk_static_lib.sh 构建脚本来执行此操作，例如：

```
% ~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh 
```

这将在 /lib/facebook-ios-sdk 文件夹下创建静态库（例如 ~/facebook-ios-sdk/lib/facebook-ios-sdk）。**然后，您可以将 facebook-ios-sdk 文件夹拖到应用程序 Xcode 项目中以包含 iOS Facebook SDK 静态库。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:56:31.457

我为此苦苦挣扎了很长时间，所以解决方法是，只需粘贴以下内容：

~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh

进入你的终端，然后回车。一切都准备就绪，您将拥有一个新的“lib”文件夹，其中包含“facebook-ios-sdk/lib/facebook-ios-sdk”目录。

希望这可以帮助！

# emacs - 如何在自动配对模式下插入 $$ 并将光标放在它们之间

> ID：10367524
> 
> 赞同：7
> 
> 时间：2012-04-28T21:05:50.390
> 
> 标签：emacs, elisp

我经常使用 AuCTeX 来制作我的乳胶文件，所以我经常使用美元`$`符号。

如果启用了[自动配对](http://code.google.com/p/autopair/)次要模式，则当您插入 a 时，`(`它会自动插入 a `)`（有一些例外情况不会，例如，如果您在 a 之后插入它`\`，但我喜欢例外情况）并将光标放在它们之间，所以你有`(<cursor>)`，现在如果你输入`a+b)`，你得到`(a+b)`而不是`(a+b))`。

我希望有类似的行为`$`，只有在`TeX-mode`我启用时才有效`autopair-mode`。

我尝试将以下内容添加到我的 .emacs 中：

```
(add-hook 'TeX-mode-hook
       #'(lambda ()
             (push '(?$ . ?$)
                    (getf autopair-extra-pairs :everywhere)))) 
```

但由于某种原因它不起作用。

问题是您通常有很多表达`$...$`，当您插入单个 时`$`，之前的所有文本`$`都会得到错误的颜色，这很烦人，然后在您关闭初始`$`文本之后，初始文本`$`得到修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:02:33.923

不确定 AuCTeX，但这适用于`latex-mode`

```
(eval-after-load "tex-mode" '(modify-syntax-entry ?$ "\"" latex-mode-syntax-table)) 
```

不确定 AuCTeX 的正确语法表是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T04:36:30.250

仅供参考，我在 Github 上有用于自动配对美元符号和乳胶中的 \[\] 的代码。

[https://github.com/tomathan/autopair-latex/blob/master/autopair-latex.el](https://github.com/tomathan/autopair-latex/blob/master/autopair-latex.el)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:40:59.103

我的解决方案与 event_jr 的解决方案基本相同（我尝试过，但对我不起作用）。要点是更改 $ 的语法条目，使其特征为 " (字符串)。检查[http://code.google.com/p/autopair/issues/detail?can=1&start=0&num=100&q的最后=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=18](http://code.google.com/p/autopair/issues/detail?can=1&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=18)

# java - Java 中的光谱减法 - 使用 JMathLib

> ID：10367532
> 
> 赞同：2
> 
> 时间：2012-04-28T21:07:22.397
> 
> 标签：java, android, signal-processing, subtraction, spectral

我是 Android 和 DSP 的新手。我正在实施光谱减法算法谢谢

我的目标是在电话流缓冲区上使用此算法

我试图弄清楚如何从我正在使用的光谱减法的 Matlab 实现中实现此代码。

Matalb 代码：

```
function Seg=segment(signal,W,SP,Window)

% SEGMENT chops a signal to overlapping windowed segments
% A= SEGMENT(X,W,SP,WIN) returns a matrix which its columns are segmented
% and windowed frames of the input one dimentional signal, X. W is the
% number of samples per window, default value W=256\. SP is the shift
% percentage, default value SP=0.4\. WIN is the window that is multiplied by
% each segment and its length should be W. the default window is hamming
% window.
% 06-Sep-04
% Esfandiar Zavarehei

if nargin<3
    SP=.4;
end
if nargin<2
    W=256;
end
if nargin<4
    Window=hamming(W);
end
Window=Window(:); %make it a column vector

L=length(signal);
SP=fix(W.*SP);
N=fix((L-W)/SP +1); %number of segments

Index=(repmat(1:W,N,1)+repmat((0:(N-1))'*SP,1,W))';
hw=repmat(Window,1,N);
Seg=signal(Index).*hw; 
```

我的问题是我应该使用 JMathLib 来实现像“repmat”这样的函数，它是一个矩阵复制函数，还是应该以另一种方式实现它。记得我在基于 Android 的智能手机上运行。谢谢吉拉德

# iphone - 无法通过 YAJLiOS 解析 json 数据

> ID：10367537
> 
> 赞同：4
> 
> 时间：2012-04-28T21:08:54.127
> 
> 标签：iphone, objective-c, ios, xcode, yajl

起初我试图访问我的应用程序文件夹中的本地文件：

```
 NSData *data = [NSData dataWithContentsOfFile:
                                      [@"countries.json" stringByExpandingTildeInPath]]; 
```

结果始终为 NULL

然后我试图检查文件是否存在：

```
 NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString* foofile = [documentsPath stringByAppendingPathComponent:@"countries.json"];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:foofile]; 
```

它不存在，我使用以下代码访问我的 json 文件：

```
 NSString *data1 = [[NSBundle mainBundle] pathForResource:@"countries" ofType:@"json"];
    NSData *data2 = [[NSData alloc] initWithContentsOfFile:data1]; 
```

它获取文件但是当我尝试解析它时：

```
 NSDictionary *dict1 =[data2 yajl_JSON]; 
```

我收到一个错误：

```
 [NSConcreteData yajl_JSON]: unrecognized selector sent to instance 0x6838d60 
```

* * *

**我的问题是下一个**：

*   有没有机会将 NSData 转换为 NSConcreteData？

*   我是否使用正确的方法来访问数据？

* * *

Api 文档 - [http://gabriel.github.com/yajl-objc/](http://gabriel.github.com/yajl-objc/)

我的 Xcode 构建阶段的屏幕截图：

![在此处输入图像描述](../Images/82f213e6c1772cfc1d170a31764c19e1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T23:13:13.707

根据 YAJL 文档，您尝试调用的方法确实存在。

那只剩下一个选择；您还没有完全链接到 YAJL 框架。

确保它显示在您的 App 目标的链接框架/库列表中，就像`CFNetwork.framework`在我的示例中显示的那样。

![在此处输入图像描述](../Images/53fa2c8c7698edd475d5b9477ae8b7c0.png)

由于您尝试调用的方法实际上是某个**类别**的一部分`NSData`，因此请确保您将其包含`-ObjC`在您的**Other Linker Flags**中。

![在此处输入图像描述](../Images/e9a54ae765fef9657440ebc848f6263a.png)

[来自 Apple 的技术问答](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)。

> 此标志使链接器加载定义了 Objective-C 类或类别的库中的每个目标文件。虽然此选项通常会导致更大的可执行文件（由于加载到应用程序中的附加目标代码），但它将允许成功创建包含现有类的类别的有效 Objective-C 静态库。

# cocoa - 如何覆盖方法的一小部分？

> ID：10367538
> 
> 赞同：0
> 
> 时间：2012-04-28T21:08:55.673
> 
> 标签：cocoa

目前，我在课堂上有这些方法，它们似乎工作正常。我想创建一个继承这些方法的子类。我遇到的问题是，在第三种方法（shiftViewUpForKeyboard）中，我希望 if 语句是不同的 UITextField（镜像是当前示例）。我已经读过要覆盖子类中的方法，您基本上必须使用新编码完全复制它，但是如果我只想更改那个小部分，那么最好的方法是什么？先感谢您。

```
- (void) viewWillAppear:(BOOL)animated {

[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(shiftViewUpForKeyboard:)
                                             name: UIKeyboardWillShowNotification
                                           object: nil];
[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(shiftViewDownAfterKeyboard)
                                             name: UIKeyboardWillHideNotification
                                           object: nil];

}

- (void) viewDidDisappear:(BOOL)animated {
[[NSNotificationCenter defaultCenter] removeObserver: self
                                                name: UIKeyboardWillShowNotification
                                              object: nil];
[[NSNotificationCenter defaultCenter] removeObserver: self
                                                name: UIKeyboardWillHideNotification
                                              object: nil];

}

- (void) shiftViewUpForKeyboard: (NSNotification*) theNotification;
{
if(mirror.isEditing == YES)
{

CGRect keyboardFrame;
NSDictionary* userInfo = theNotification.userInfo;
keyboardSlideDuration = [[userInfo objectForKey: UIKeyboardAnimationDurationUserInfoKey] floatValue];
keyboardFrame = [[userInfo objectForKey: UIKeyboardFrameBeginUserInfoKey] CGRectValue];

UIInterfaceOrientation theStatusBarOrientation = [[UIApplication sharedApplication] statusBarOrientation];

if UIInterfaceOrientationIsLandscape(theStatusBarOrientation)
    keyboardShiftAmount = keyboardFrame.size.width;
else 
    keyboardShiftAmount = keyboardFrame.size.height;

[UIView beginAnimations: @"ShiftUp" context: nil];
[UIView setAnimationDuration: keyboardSlideDuration];
self.view.center = CGPointMake( self.view.center.x, self.view.center.y - keyboardShiftAmount);
[UIView commitAnimations];
viewShiftedForKeyboard = TRUE;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:37:07.370

在任何情况下，如果您不想复制子类中的完整方法并添加您的小定制，我看到的唯一其他可能的方法是更改​​原始类。为此，我可以提出两种可能性：

1）您可以在原始类中创建一个名为：

```
-(UITextField *)keyboardShiftTextField
```

然后在这个类中替换

```
mirror.isEditing
```

代码：

```
[[self keyboardShiftTextField] isEditing]
```

在这种情况下，两个类之间的唯一区别在于新方法的实现，对于原始类来说，这将是：

```
-(UITextField *)keyboardShiftTextField {
return mirror;
}
```

而在子类中，这将返回正确的文本字段。

2）第二种方法更优雅，因为它需要定义委托模式。这需要一些代码开销，但我们将为您提供更大的灵活性。此外，如果创建子类的唯一原因只是重写这第三个方法，那么使用委托模式可以完全避免创建子类，因为“自定义”工作将由委托完成。如果要覆盖的方法数量不止一个，您仍然可以通过将所有需要自定义的部分移至协议部分来使用此机制。这对于 Obj-C 和 Cocoa 来说是一种相当常见的技术，它在许多情况下限制了对某些类的需求。通常，当您想提供不同的功能时，您会使用子类，但在您的情况下，您并没有提供不同的功能，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:15:49.323

通常的方法是[http://en.wikipedia.org/wiki/Template_method_pattern](http://en.wikipedia.org/wiki/Template_method_pattern)：只提取在类之间变化的方法的一部分，使其成为一个单独的方法，并在子类中覆盖它。

[EDITED to add ...] 另一种方法——如果没有看到你的更多代码，我无法判断它是否可以在这里正常工作——将改变传递给方法的参数（或选择它基于传递给方法的参数或其他类似的东西）。（然后，您通常会使用其他机制而不是继承+多态性来获得您想要的效果，具有相似行为的多个事物：它们将是同一类的实例，但提供不同的数据。）

# c++ - Visual C++ 撤消和重做操作

> ID：10367544
> 
> 赞同：0
> 
> 时间：2012-04-28T21:09:44.533
> 
> 标签：c++, visual-c++, c++-cli, undo-redo

我正在尝试在 Visual-C++ 中制作一个相当大的应用程序，现在我正在尝试添加撤消/重做功能。

有相当多的事件（按钮单击、标签文本更改等），我想找到一种方法来撤消/重做，而无需向每个函数添加代码。例如，我想要一个可以读取完成的每个事件并自动存储它的类。然后在我的撤消/重做事件中，我可以获取存储的最新操作。

如果那不可能，我不会介意其他方式。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:20:24.687

声明一个代表两个操作的类 - 撤消和重做。同时创建该类的两个向量。

对于要应用撤消/重做的每个操作，将该类的实例推送到撤消向量中。应该有与要撤消的操作一样多的派生类。

例如，如果单击按钮将背景绘制为绿色，则创建一个类实例，其 undo 方法将背景绘制为先前的颜色，其 redo 方法将背景绘制为绿色，并将其填充到撤消向量中。当您撤消时-您弹出最后一个类实例并调用其撤消方法，该方法会将背景绘制为以前的颜色。然后你把它推到重做向量。

当您重做时，您将类实例的重做向量弹出顶部并调用其重做方法，然后将其填充回撤消向量。

有一些极端情况（边界），遇到时你会解决它们.. :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:53:25.480

我试图在一个小型实验库中实现类似的目标：[https](https://github.com/d-led/undoredo-cpp) ://github.com/d-led/undoredo-cpp 。它包含一个`TransactionStore`类似于*CodeChords 人*建议的实现。您可能需要真正为每个可撤消对象添加功能，并注意对象生命周期，以防您的操作涉及对象构造或销毁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T21:43:04.450

您的所有事件是否都通过某种队列？默认情况下，在 c++ 中没有这样的队列（有一个 Windows 操作系统级别的事件队列，但它可能已经在 c++-cli 中管理并且无法使用，并且您没有指出这是否与您的问题密切相关），可能有一些我不知道的其他构造。

如果您有一些中央队列，那么只需在事件通过时捕获事件并知道如何撤消每个操作。如果没有中央队列，那么我认为没有比更改每个可撤消函数以创建某种撤消对象并将其存储在某种撤消队列中更容易的方法了。

在没有大型中央工作队列的纯 .net 或 C++ 环境中，我将创建一个是和撤消条目的类，它实现一个方法/成员函数来撤消和另一个重做/完成工作。但是对于撤消功能，这可能只是一个 .net 委托或 ac 样式的函数指针，以及一个参数列表。如果您创建一个动作撤消/重做类，它可以是一个模板或泛型，用于存储指向 do 和 undo 函数的指针/委托，以及最初调用时的参数列表。

这些可以运行以撤消已完成的操作。它们将被插入到某种队列容器中，容器的种类似乎并不重要，只要它保留顺序，您应该为您的应用程序选择最好的 std、.net 或其他容器。当您不再需要它们时，您可以丢弃旧的。执行时，必须删除最后插入队列的条目以保持一致性。

如果您还需要重做功能，那么您完成的操作队列必须是可迭代的，并且使用具有可撤销/重做所需操作的方法/成员函数的类是最简单的。您将拥有某种迭代器、指针、索引或标记，指示您撤消了多远。每次请求撤消时，您必须向后移动标记（按时间顺序更早）并在队列中的该点执行撤消命令。如果请求重做，则指示的当前项执行其重做指令，然后迭代器向前（按时间顺序）通过队列，或者如果您位于队列中最前面的项，则忽略（我假设）。

如果您想深入研究，但您没有办法表明您想要这样做，您可以将您的应用程序集中在操作队列周围。您可能不需要更改实现此方法的函数。您的用户界面（我假设，可以很容易地成为您的 API）功能，将操作（支持执行和撤消）插入队列，然后命令队列执行。如果它们的副作用是已知的并且是可逆的，则您不必更改现有功能。但是，您需要更改所有调用者以执行操作而不是直接调用，并且您需要编写执行撤消操作的对应项。

# php - 在 php 中使用对象有什么性能优势吗？

> ID：10367545
> 
> 赞同：0
> 
> 时间：2012-04-28T21:09:48.577
> 
> 标签：php, arrays, oop, object

最近我正在研究这个话题，一些文章作者声称由于 php 的 oop 和类系统实际上是 hacks 和 hooks，因此 php 是一种脚本语言。

我想知道这如何反映在性能方面。

数组和对象之间是否存在显着的性能差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:16:23.877

如果使用 php5 对象比数组稍快，但在大多数情况下差异可以忽略不计

这是性能测试的链接： [http ://aggregation.novaak.net/?q=node/227](http://aggregation.novaak.net/?q=node/227)

# c++ - C++ 使用 GTK+ 制作 2D 游戏图形

> ID：10367547
> 
> 赞同：4
> 
> 时间：2012-04-28T21:10:07.153
> 
> 标签：c++, user-interface, graphics, gtk

我对使用 C++ 和 GTK+ 制作 GUI 密集型策略游戏很感兴趣。我想知道将 2D 游戏图形添加到 GTK 程序中的可行性。基本上，我想要一个游戏屏幕之类的东西，具有可交互的 2D 图形，两侧是菜单，并且能够导航到仅是 GUI 的其他屏幕。

请注意，我以前从未使用过 GTK，也没有编写过 GUI（也没有图形）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T09:42:03.560

GTK当然*可以*，但是您必须问自己是否使用了正确的工具来完成这项工作。使用更适合动画并与 GTK 集成的 Clutter；或者更好的是，使用游戏编程工具包。

[这](http://chrislord.net/index.php/2010/07/29/pill-popping-and-happy-wombats/)是使用 Clutter 编写的两个非密集型概念验证游戏的示例，带有指向其源代码的链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T09:47:37.683

这是可能的。前段时间我用 GTK 和 Vala 做过。这是我写的[一篇博客文章。](http://interhacker.wordpress.com/2011/12/07/hacking-in-vala/)基本上，它与您使用 Java 和 Swing 制作的游戏非常相似。只需覆盖`expose`信号并为常规重绘创建一个`timer`。[这](http://zetcode.com/tutorials/pygtktutorial/snake/)是一篇关于在 PyGTK 中开发 2D Snake 游戏的文章。

在伪代码中，您为游戏基础设施所做的一切就是：

```
start()
{
    tick_timer( 1.0 / FPS );
    load_all_sprites_etc();
}

tick()
{
    update();
    game_board.expose(); // game_board is a GTKWidget, preferably a DrawingArea
}

expose_event()  // connected to game_board
{
    drawing_code();
}

update() 
{
    game_physics();
    game_logic();
} 
```

# c# - 加载具有条件字符串格式的数据绑定的 XAML 失败

> ID：10367548
> 
> 赞同：2
> 
> 时间：2012-04-28T21:10:10.147
> 
> 标签：c#, wpf, xaml, string-formatting, xamlreader

我正在使用加载 XAML `XamlReader`，当我使用条件字符串格式进行数据绑定时，我无法加载它。为了确保我没有犯任何语法错误，我在独立的 WPF 应用程序中尝试了条件格式。这是我用于验证的 XAML：

```
<Window
  x:Class="WpfApplication.Window"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <TextBlock Text="{Binding Value, StringFormat={}{0:;#,##0.00;}}"/>
</Window> 
```

和代码隐藏：

```
public partial class Window {

  public Window() {
    InitializeComponent();
    DataContext = this;
  }

  public Decimal Value { get { return -1234567.89M; } }

} 
```

正如预期的那样，数值显示时不带负号（如果值为零或正，则不显示）。

但是，我想使用以下方式加载 XAML `XamlReader`：

```
var xaml = @"<TextBlock
  xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation""
  Text=""{Binding Value, StringFormat={}{0:;#,##0.00;}}""/>";
var textBlock = (TextBlock) XamlReader.Parse(xaml); 
```

是相同的`TextBlock`，但是，调用`XamlReader.Parse`失败并出现异常：

```
System.Windows.Markup.XamlParseException 发生
  Message='标记扩展结束后出现意外的标记。' 行号“3”和行位置“40”。
  来源=PresentationFramework
  行号=3
  线位置=40
  堆栈跟踪：
       在 System.Windows.Markup.XamlReader.RewrapException（异常 e，Uri baseUri）
       在 System.Windows.Markup.XamlReader.Load（XmlReader 阅读器，ParserContext parserContext，XamlParseMode parseMode）
       在 System.Windows.Markup.XamlReader.Load（XmlReader 阅读器）
       在 System.Windows.Markup.XamlReader.Parse（字符串 xamlText）
       在 WpfApplication\Window.xaml.cs:line 17 中的 WpfApplication.Window..ctor()
  内部异常：System.Xaml.XamlParseException
       Message='标记扩展结束后出现意外的标记。' 行号“3”和行位置“40”。
       源 = System.Xaml
       行号=3
       线位置=40
       堆栈跟踪：
            在 MS.Internal.Xaml.Parser.MePullParser.d__0.MoveNext()
            在 MS.Internal.Xaml.Parser.XamlPullParser.d__6f.MoveNext()
            在 MS.Internal.Xaml.Parser.XamlPullParser.d__14.MoveNext()
            在 MS.Internal.Xaml.Parser.XamlPullParser.d__7.MoveNext()
            在 MS.Internal.Xaml.Parser.XamlPullParser.d__0.MoveNext()
            在 MS.Internal.Xaml.NodeStreamSorter.ReadAheadToEndOfAttributes()
            在 MS.Internal.Xaml.NodeStreamSorter.ReadAheadAndSortCtorProperties()
            在 MS.Internal.Xaml.NodeStreamSorter..ctor（XamlParserContext 上下文，XamlPullParser 解析器，XamlXmlReaderSettings 设置，Dictionary`2 xmlnsDictionary）
            在 System.Xaml.XamlXmlReader.Initialize（XmlReader givenXmlReader、XamlSchemaContext schemaContext、XamlXmlReaderSettings 设置）
            在 System.Xaml.XamlXmlReader..ctor（XmlReader xmlReader、XamlSchemaContext schemaContext、XamlXmlReaderSettings 设置）
            在 System.Windows.Markup.XamlReader.Load（XmlReader 阅读器，ParserContext parserContext，XamlParseMode parseMode）
       内部异常：

```

`{}{0:;#,##0.00;}`如果我用`';#,##0.00;'`加载成功替换晦涩的字符串格式。不幸的是，我需要的另一种格式（用于正值的格式）是`'#,##0.00;;'`，并且由于某种未知的原因，如果值为负，它不会作为条件格式。（它显示带有符号的负数，而不是像它应该做的那样不显示任何东西。“括号”版本没有这个问题。）

`XamlReader.Parse`所以我的问题是，当我使用相同的 XAML 构建 WPF 应用程序时，当使用相同的条件字符串格式可以正常加载 XAML 时，为什么我不能在数据绑定中使用带括号的条件字符串格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:22:49.130

这不是实际问题的答案，但这可能对您有所帮助。当 Binding 定义为标签而不是标记扩展时，加载是可以的：

```
var xaml = @"<TextBlock
  xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"">
  <TextBlock.Text>
    <Binding Path=""Value"" StringFormat=""0:;#,##0.00;""/>
  </TextBlock.Text>
</TextBlock>"; 
```

# dns - 通过 DNS 区域文件配置 Google Apps

> ID：10367550
> 
> 赞同：0
> 
> 时间：2012-04-28T21:10:47.887
> 
> 标签：dns, google-apps, zone

我在设置 DNS 以在特定域上使用 Google Apps 时遇到问题。我可以轻松地为通过某些控制面板（例如 GoDaddy）控制的域设置 DNS，但是对于通过服务器上的区域文件控制的域，我遇到了问题。

如果我配置区域文件如下：

```
MYDOMAIN.COM.    3600    IN    SOA    some.domaincontrol.com.    name.mail.com (
            2012041904
            28800
            7200
            604800
            3600
            )
; A Records
@    3600    IN    A    000.000.000.000

; CNAME Records
mail    3600    IN    CNAME    ghs.google.com
calendar    3600    IN    CNAME    ghs.google.com
docs    3600    IN    CNAME    ghs.google.com
www    3600    IN    CNAME    @
test    3600    IN    CNAME    @

; MX Records
@    3600    IN    MX    1    ASPMX.L.GOOGLE.COM
@    3600    IN    MX    5    ALT1.ASPMX.L.GOOGLE.COM
@    3600    IN    MX    5    ALT2.ASPMX.L.GOOGLE.COM
@    3600    IN    MX    10    ASPMX2.GOOGLEMAIL.COM
@    3600    IN    MX    10    ASPMX3.GOOGLEMAIL.COM

; TXT Records
@    3600    IN    TXT    "google-site-verification=blah-blah-12345"

; NS Records
@    3600    IN    NS    some.domaincontrol.com
@    3600    IN    NS    another.domaincontrol.com 
```

然后由 Google Apps 和一些 DNS 查询站点（如网络工具）报告的 MX 记录具有域本身的后缀：

```
MX    1    ASPMX.L.GOOGLE.COM.MYDOMAIN.COM
MX    5    ALT1.ASPMX.L.GOOGLE.COM.MYDOMAIN.COM
MX    5    ALT2.ASPMX.L.GOOGLE.COM.MYDOMAIN.COM
MX    10    ASPMX2.GOOGLEMAIL.COM.MYDOMAIN.COM
MX    10    ASPMX3.GOOGLEMAIL.COM.MYDOMAIN.COM 
```

此外，“邮件”、“文档”和“日历”子域不会被重定向到 Google Apps。

我还尝试了 MX 记录的以下配置，希望这能正确指向外部（Google）邮件交换：

```
; MX Records
3600    MX    1    ASPMX.L.GOOGLE.COM.
3600    MX    5    ALT1.ASPMX.L.GOOGLE.COM.
3600    MX    5    ALT2.ASPMX.L.GOOGLE.COM.
3600    MX    10    ASPMX2.GOOGLEMAIL.COM.
3600    MX    10    ASPMX3.GOOGLEMAIL.COM. 
```

但这导致 Google Apps 和 DNS 查询没有检索到任何 MX 记录。DNS 区域文件中出现某种错误配置

如何通过区域文件正确配置域以正确指向外部 MX 和 CNAME lcoations？尤其是 Google Apps？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:26:54.613

Sandman 在[Serverfault](https://serverfault.com/questions/384143/google-apps-config-via-dns-zone-file)上回答了，我已经重复了这个问题。

原始问题的原因：记录上缺少尾随点。（查看链接了解更多详情）。

# android - 无法在设备 'emulator-5554 上安装 project.apk

> ID：10367552
> 
> 赞同：2
> 
> 时间：2012-04-28T21:11:06.767
> 
> 标签：android, android-emulator

连续3次失败！这可能是什么原因？自上次运行（成功）以来，我对项目进行了重大更改，那么我的代码中的某些东西会导致它崩溃吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:30:27.983

请发布任何其他相关的错误。

以下是一些可以尝试的事情：

关闭并重新启动 adb：

1.  打开命令提示符（开始 > 运行 > cmd）
2.  输入 adb kill-server 然后回车
3.  输入 adb devices 然后回车

彻底清理并重建您的项目。如果您使用的是 Eclipse：

1.  单击顶部的项目菜单，转到清理
2.  选择您的项目，然后单击确定

我确定你已经这样做了，但也尝试重新启动你的 IDE。

这听起来可能很愚蠢，但请确保您的 AVD 正在运行（并且没有被锁定）。

# python - 在由 RadioMenuItems 组成的菜单中（错误地）选择了多个项目

> ID：10367557
> 
> 赞同：0
> 
> 时间：2012-04-28T21:11:37.960
> 
> 标签：python, pygtk, gtk3, pygobject

在我的小型 PyGObject/GTK3 应用程序中，我尝试创建一个由`RadioMenuItem`s 组成的（子）菜单。

我在主窗口中创建如下菜单`__init__`：

```
menu_item = None
self.menu = Gtk.Menu()
self.menu_items = {}
for i in range(1,5):
   menu_item = Gtk.RadioMenuItem(menu_item)
   menu_item.set_label(str(i))
   self.menu_items[i] = menu_item
   self.menu.append(self.menu_items[i])
   self.menu_items[i].connect("activate",
                        self.on_menu_select,
                        i)
   self.menu_items[i].show() 
```

然后在`button_press_event`处理程序中使用

```
def button_press(self, widget, event, data=None):
    for i in range(1,5):
        self.menu_items[i].set_active(False)
    self.menu_items[2].set_active(True)
    self.menu.popup(None, None, None, None,
                            event.button, event.time) 
```

当我第一次打开菜单时，菜单项“2”是唯一选择的。当我然后 - 例如 - 选择菜单项“3”并再次打开菜单时，菜单项 2 和 3 都被选中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T09:38:23.980

You have to put the radio menu items in a group with each other, or else they won't know to deselect themselves when another one is selected:

```
self.menu = Gtk.Menu()
self.menu_items = list()
group = []
for i in range(1,5):
    menu_item = Gtk.RadioMenuItem.new_with_label(group, str(i))
    group = menu_item.get_group()
    self.menu_items[i] = menu_item
    self.menu.append(menu_item)
    menu_item.connect("activate", self.on_menu_select, i)
    menu_item.show()

self.menu_items[2].set_active(True) 
```

请注意，此行选择项目编号 2，您不必自己做，因此您的按钮按下处理程序可以简单地是：

```
def button_press(self, widget, event, data=None):
    self.menu.popup(None, None, None, None,
                    event.button, event.time) 
```

# php - 导入后 Opencart 重新缓存产品页面

> ID：10367558
> 
> 赞同：0
> 
> 时间：2012-04-28T21:11:40.460
> 
> 标签：php, caching, opencart

我有在 opencart 中导入 xml 提要的代码。我可以在导入之前清除缓存，但在我想为产品页面重新创建缓存之后。

我看到 catalog/product/getProducts 使用

```
$this->cache->set('product.' . (int)$this->config->get('config_language_id') . '.' . (int)$this->config->get('config_store_id') . '.' . (int)$customer_group_id . '.' . $cache, $product_data); 
```

但我找不到类似于缓存的单个产品页面的类似内容

```
$this->response->setOutput($this->render()); 
```

无论如何在产品数据循环中生成和缓存产品页面？如果我无法编写代码，我只想设置 $_GET 并调用 index.php 或使用 curl，尽管我想避免带宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:25:27.710

尝试通过 require 包含站点根目录的 index.php 会导致函数重新声明问题。尝试通过新的前端调度新操作会导致在管理员内部调用目录操作出现问题。

我最终做的是对本地主机的 curl 调用。

```
 http://localhost/index.php?route=product/product&product_id=1234567890 
```

# c++ - C++ Win32：Windows 7 下的快速文字处理式文本渲染

> ID：10367570
> 
> 赞同：2
> 
> 时间：2012-04-28T21:13:02.810
> 
> 标签：c++, windows-7, richtext, wordprocessingml

应用户请求，我的（目前为 C#）应用程序从 SQL Server 数据库中读取大量富文本（目前为 .NET FlowDocument XAML 格式）并显示出来。

我为此使用了 C# RichTextBox，它可以工作，但整个过程太慢了（整个应用程序响应速度不是很快）。我想用原生 C++ 重新制作所有东西。

在 Windows 7 中获得快速富文本渲染的最佳方法是什么？

我会欢迎建议

1) 在要使用的文本 API 上（Direct2D/DirectWrite 或 GDI 或其他？使用字形或更高级别的函数？），

2）还有关于如何将富文本存储在内存中以适应上下滚动文本流、插入文本中间等。

谢谢。

# jquery - 在点击事件jQuery上移动背景

> ID：10367575
> 
> 赞同：2
> 
> 时间：2012-04-28T21:13:22.940
> 
> 标签：jquery

我有这个 HTML：

```
<ul id="nav">
  <li id="menu1">item 1</li>
  <li id="menu2">item 2</li>
  <li id="menu3">item 3</li>
</ul>

<div id="arrow">&nbsp;</div> 
```

该列表具有 CSS 设置：`display: inline`在活动菜单项下是一个指向活动菜单项的箭头。

箭头的默认 CSS 设置是：

```
#arrow {
  background: url('./arrow-up.png') no-repeat 10px 0;
} 
```

默认情况下将箭头放置在下方`item 1`。

我创建了以下 jQuery 代码，但它似乎不起作用。当我单击链接并且箭头不移动时，什么也没有发生。

```
$(document).ready(function(){

  $("#menu1").click(function(){
      $("#arrow").animate({
          background: url('./arrow-up.png') no-repeat 10px 0
      }, 1500 );
  });

  $("#menu2").click(function(){
      $("#arrow").animate({
          background: url('./arrow-up.png') no-repeat 90px 0
      }, 1500 );
  });

  $("#menu3").click(function(){
      $("#arrow").animate({
          background: url('./arrow-up.png') no-repeat 180px 0
      }, 1500 );
  });
}); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:17:38.847

你应该使用这个插件： http: [//www.protofunc.com/scripts/jquery/backgroundPosition/](http://www.protofunc.com/scripts/jquery/backgroundPosition/)

```
$('#menu1').click(function(){
    $('#arrow')
        .animate({backgroundPosition:'10px 0'});
}); 
```

# ruby-on-rails-3 - 通过 url 从另一个模型/控制器保存图像，而不是形成帖子

> ID：10367576
> 
> 赞同：0
> 
> 时间：2012-04-28T21:13:28.060
> 
> 标签：ruby-on-rails-3, paperclip

另一位团队成员编写了允许用户使用 http 表单和 Rails Paperclip gem 上传照片的功能。

我目前正在开发从用户 Facebook 相册导入照片列表的功能。

我目前有一个需要保存的 Facebook 图片 URL 列表。我可以让rails下载它们并保存到一个位置，但我不知道如何触发回形针过程。

在我的代码中添加从 URL 下载图像的最佳位置在哪里？

任何想法表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:53:19.413

我发现以下问题可以回答我的问题。

[回形针直接通过 url 获取图像](https://stackoverflow.com/questions/4830122/paperclip-fetch-image-directly-via-url)

这是我为保存图像所做的工作：

```
 photo = Photo.new
      photo.picture_from_url("http://image_url_here..")
      photo.name = "photo_name"
      photo.description = "photo_description"
      photo.user_id = current_user.id
      photo.album_id = album_id
      photo.save 
```

我在照片模型中有这个功能。注意，*图片*是回形针使用的图像域。

```
def picture_from_url(url)
    self.picture = open(url)
end 
```

# linux - 通过 nfs 共享 mmap 文件？

> ID：10367577
> 
> 赞同：7
> 
> 时间：2012-04-28T21:13:29.040
> 
> 标签：linux, memory-management, shared-memory, mmap, nfs

**方案 A**：

> 为了在同一主机上运行的两个进程之间共享一个读/写内存块，Joe 从两个进程映射同一个本地文件。

**方案 B**：

> 为了在两个不同主机上运行的两个进程之间共享一个读/写内存块，Joe 在主机之间通过 nfs 共享一个文件，然后从两个进程中映射共享文件。

有人尝试过场景 B 吗？场景 B 中出现的哪些额外问题不适用于场景 A？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T02:21:27.453

如果没有一些额外的操作，Mmap 不会共享数据。

如果您更改文件的 mmaped 部分中的数据，则更改将仅存储在内存中。它们不会被刷新到文件系统（本地或远程），直到[`msync`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/msync.html)或 munmap 或关闭甚至决定 OS 内核及其 FS。

When using NFS, locking and storing of data will be slower than if using local FS. Timeouts of flushing and time of file operations will vary too.

[On the sister site](https://serverfault.com/questions/340296/how-do-i-speed-up-and-cache-mmap-file-access-over-nfs-on-linux) people says that NFS may have poor caching policy, so there will be much more I/O requests to the NFS server comparing I/O request count to local FS.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T19:35:38.283

You will need byte-range-lock for correct behavior. They are available in NFS >= v4.0\.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:58:08.003

我会说场景 B 有各种各样的问题（假设它按照评论中的建议工作）。最明显的是标准并发问题 - 2 个进程共享 1 个资源而没有任何形式的锁定等。这可能会导致问题......不确定 NFS 在这方面是否有自己的特殊怪癖。

假设您可以以某种方式解决并发问题，您现在依赖于维护稳定（和快速）的网络连接。显然，如果网络中断，您可能会错过一些更改。这是否重要取决于您的架构。

我的想法是这听起来像是在不同机器上共享一块内存的简单方法，但我不能说我听说过它正在完成，这让我觉得它不是那么好。当我想到在 procs 之间共享数据时，我会想到 DB、消息传递或专用服务器。在这种情况下，如果您将一个 proc 设为 master（处理并发并拥有该概念 - 即无论这个人说什么是数据的最佳副本），它可能会起作用......

# r - 来自 RandomForest 的 R 意外 NA 输出

> ID：10367579
> 
> 赞同：2
> 
> 时间：2012-04-28T21:13:44.187
> 
> 标签：r, random-forest, na

我正在使用一个有很多 NA 的数据集。我知道前 6 列没有任何 NA。由于第一列是 ID 列，因此我将其省略。

我运行以下代码以仅选择在响应列中具有值的行：

```
sub1 <- TrainingData[which(!is.na(TrainingData[,70])),] 
```

然后，我使用以下代码将 sub1 用作 randomForest 中的数据集：

```
set.seed(448)
RF <- randomForest(sub1[,c(2:6)], sub1[,70]
    ,do.trace=TRUE,importance=TRUE,ntree=10,,forest=TRUE) 
```

然后我运行这段代码来检查 NA 的输出：

```
> length(which(is.na(RF$predicted)))
[1] 65 
```

如果输入的数据是干净的，我无法弄清楚为什么我会得到 NA。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T21:24:00.697

我认为你应该使用更多的树。因为`predicted`值是袋外集的预测。如果树的数量非常少，则袋外集合中永远不会出现某些情况，因为该集合是随机形成的。

# php - 如何连接多个表以根据给定条件获取结果？

> ID：10367580
> 
> 赞同：1
> 
> 时间：2012-04-28T21:13:49.013
> 
> 标签：php, mysql, sql

我已经看这个太久了，我的大脑感觉就像意大利面条。有人可以帮我解决几个问题吗？

*表*：

```
Presentation
------------
id          int 
name        varchar 
fk_template int     (references template.id)

Template
--------
id          int 
name        varchar 

Position
--------
id          int 
zorder      int     (if it is the 1st, 2nd, 3rd position of the given template)
fk_template int     (references Template.id)

Asset
-----
id          int 
name        varchar 
description varchar 

AssetForPresentation
--------------------
fk_asset        int  (references Asset.id)
fk_presentation int  (references Presentation.id)
fk_position     int  (references Position.id) 
```

我*认为*此时我需要问的基本上是“给我所有的资产和他们在这个模板中的位置”。

你看，当一个 Presentation 被带来时，它有一个特定的 Template。每个模板都有指定的 Positions，每个 Position 都持有一个 Asset 或 NULL。

我需要能够为演示文稿使用的特定模板引入所有资产及其各自的位置。**我将如何查询类似的东西？**

我希望这对你有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:28:36.113

根据您在问题中描述的内容，您需要获取给定模板的所有资产。我已经创建了表结构，但没有在表上定义关系约束，而是在制定查询时使用了它们。

您可以将`Asset`表连接到`AssetForPresentation`表。通过 AssetForPresentation 表，可以加入`Presentation`和`Position`表。`Template`可以通过`Position`表来建立与 的关系。因此，将*Template*表连接到*Asset*表以获取所有匹配的记录。

您可以在下面的链接中查看演示。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!2/6a762/7)

希望有帮助。

脚本：

```
CREATE TABLE Presentation
(
        id          INT         NOT NULL AUTO_INCREMENT
    ,   name        VARCHAR(30) NOT NULL
    ,   PRIMARY KEY (id)
);

CREATE TABLE Template
(
        id          INT         NOT NULL AUTO_INCREMENT
    ,   name        VARCHAR(30) NOT NULL
    ,   PRIMARY KEY (id)
);

CREATE TABLE Position
(
        id          INT         NOT NULL AUTO_INCREMENT
    ,   zorder      INT         NOT NULL 
    ,   fk_template INT         NOT NULL 
    ,   PRIMARY KEY (id)
);

CREATE TABLE Asset
(
        id          INT         NOT NULL AUTO_INCREMENT
    ,   name        VARCHAR(30) NOT NULL
    ,   description VARCHAR(30) NOT NULL
    ,   PRIMARY KEY (id)
);

CREATE TABLE AssetForPresentation
(
        fk_asset        INT         NOT NULL
    ,   fk_presentation INT         NOT NULL
    ,   fk_position     INT         NOT NULL
);

INSERT INTO Presentation (name) VALUES
    ('presenation 1'),
    ('presenation 2');

INSERT INTO Template (name) VALUES
    ('template 1'),
    ('template 2');

INSERT INTO Position (zorder, fk_template) VALUES
    (1, 1),
    (2, 2);

INSERT INTO Asset (name, description) VALUES
    ('asset 1', 'asset description 1'),
    ('asset 2', 'asset description 2');

INSERT INTO AssetForPresentation (fk_asset, fk_presentation, fk_position) 
VALUES
    (1, 1, 1),
    (1, 2, 1),
    (2, 2, 1),
    (2, 2, 2);

SELECT              *
FROM                Asset A
RIGHT OUTER JOIN    AssetForPresentation AP
ON                  A.id = AP.fk_asset
RIGHT OUTER JOIN    Presentation P
ON                  P.id = AP.fk_presentation
RIGHT OUTER JOIN    Position PO
ON                  PO.id = AP.fk_position
RIGHT OUTER JOIN    Template T
ON                  T.id = PO.fk_template
WHERE               T.id = 1; 
```

*输出*：

```
ID NAME    DESCRIPTION         FK_ASSET FK_PRESENTATION FK_POSITION ZORDER FK_TEMPLATE
-- ------- ------------------- -------- --------------- ----------- ------ -----------
1  asset 1 asset description 1    1            1            1          1        1
1  asset 1 asset description 1    1            2            1          1        1
2  asset 2 asset description 2    2            2            1          1        1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T21:30:40.870

我认为您遇到困难的部分是桌面上`JOIN`的两个条件。`AssetForPresentation`

```
SELECT
  a.id,
  a.name,
  a.description
FROM Presentation AS p
JOIN Template AS t
  ON p.fk_template = t.id
LEFT JOIN Position AS pos
  ON pos.fk_template = t.id
LEFT JOIN AssetForPresentation AS afp
  ON afp.fk_presentation = p.id
  AND afp.fk_position = pos.id
LEFT JOIN Asset AS a
  ON a.id = afp.fk_asset
WHERE p.id = 123
ORDER BY pos.zorder ASC 
```

# macos - 在 Mac OS X 中阻止对文件夹或文件的访问

> ID：10367581
> 
> 赞同：1
> 
> 时间：2012-04-28T21:13:50.727
> 
> 标签：macos, cocoa, security, passwords

有没有办法阻止对 MacOS X 中某些特定文件或文件夹的访问，以便在系统范围内通过密码保护它？我想在基于 Cocoa 的程序中使用它，但在此之前我只想知道至少一般可能的方法来完成它。据我所知，POSIX 文件访问系统不允许使用密码保护某些内容。我正在考虑使用专用密码创建其他用户帐户，然后将此用户设置为具有`chmod`. 在终端中它似乎可以工作，但我认为这是一种非常糟糕的方式，因为这是一种权限问题。您需要为此更改终端中的用户。如果想通过 Finder 等常规应用程序访问它，我认为这是无法做到的。那么有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:30:20.767

要创建受密码保护的“文件夹”，您可以使用加密的磁盘映像并将其安装在您需要该文件夹的位置。该命令`hdiutil`可用于创建、挂载、卸载等此类磁盘映像。使用该`-plist`选项可以轻松地`hdiutil`从 Objective-C 驱动命令。

# c# - 将 Kinect 方法从 Beta 2 转换为版本 1

> ID：10367582
> 
> 赞同：1
> 
> 时间：2012-04-28T21:13:59.557
> 
> 标签：c#, kinect

所以我已经将`getDisplayPosition`Kinect SDK 的 beta 版转换为完整版。这是我现在拥有的

### 原本的

```
 private Point getDisplayPosition(Joint joint)
    {
        float depthX, depthY;
        nui.SkeletonEngine.SkeletonToDepthImage(joint.Position, out depthX, out depthY);
        depthX = Math.Max(0, Math.Min(depthX * 320, 320));  //convert to 320, 240 space
        depthY = Math.Max(0, Math.Min(depthY * 240, 240));  //convert to 320, 240 space
        int colorX, colorY;
        ImageViewArea iv = new ImageViewArea();
        // only ImageResolution.Resolution640x480 is supported at this point
        nui.NuiCamera.GetColorPixelCoordinatesFromDepthPixel(ImageResolution.Resolution640x480, iv, (int)depthX, (int)depthY, (short)0, out colorX, out colorY);

        // map back to skeleton.Width & skeleton.Height
        return new Point((int)(skeleton.Width * colorX / 640.0), (int)(skeleton.Height * colorY / 480));
    } 
```

### 我的版本

```
private Point getDisplayPosition(Joint joint)
    {
        float depthX, depthY;
        KinectSensor sensor = kinectSensorChooser1.Kinect;
        DepthImageFormat depth = DepthImageFormat.Resolution320x240Fps30;
        depthX = 320;
        depthY = 240;
        sensor.MapSkeletonPointToDepth(joint.Position, depth);
        depthX = Math.Max(0, Math.Min(depthX * 320, 320));
        depthY = Math.Max(0, Math.Min(depthY * 240, 240));
        int colorX, colorY;
        colorX = 320;
        colorY = 240;

        return new Point((int)(skeleton.Width * colorX / 640.0), (int)(skeleton.Height * colorY / 480));
    } 
```

基本上我想知道我的版本是否会和原版做同样的事情，如果没有，如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:15:51.767

这就是我所做的，它对我有用（这与你的非常相似） - 我希望它有所帮助：

### 我的版本

```
private Point getDisplayPosition(DepthImageFrame depthFrame, Joint joint)
{ 
    float depthX, depthY;        
    DepthImagePoint depthPoint = kineticSensor.MapSkeletonPointToDepth(joint.Position, depthImageFormat);

    depthX = depthPoint.X;
    depthY = depthPoint.Y;

    depthX = Math.Max(0, Math.Min(depthX * 320, 320));
    depthY = Math.Max(0, Math.Min(depthY * 240, 240));

    int colorX, colorY;
    ColorImagePoint colorPoint = depthFrame.MapToColorImagePoint(depthPoint.X, depthPoint.Y, sensor.ColorStream.Format);
    colorX = colorPoint.X;
    colorY = colorPoint.Y;

    return new Point((int)(skeleton.Width * colorX / 640.0), (int)(skeleton.Height * colorY / 480));
} 
```

# java - Long 上的 Java 位操作 - 删除一些位

> ID：10367584
> 
> 赞同：1
> 
> 时间：2012-04-28T21:14:24.887
> 
> 标签：java

我有一个很长的号码。现在，我想做的是以下内容：

```
long l = "001000......10001100000" (bits representation) 
```

我需要从左侧删除它的第 3^位和第 4^位（*即*10）并将剩余的 62 位转换为长

```
long newl = "0000......10001100000" (bits representation) 
```

任何人都可以帮助我在 Java 中有效地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:18:06.483

您通常通过使用掩码来*设置*位；`OR`您可以通过使用掩码的补码来*清除*位：`AND`

```
long mask = 3L << 60; // 001100...
long newl = l & ~mask;     // Clear the bits in the mask. 
```

如果您要删除这些位（并将值有效地缩短为 62 位），那么您可以试试这个：

```
long topBits = ((3L << 62) & l) >> 2; // Top 2 bits, shifted right
long bottomBits = (~(15L << 60) & l); // Bottom 60 bits
long newl = topBits | bottomBits; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:17:58.583

如果您将位列表作为字符串，则只需从该字符串中删除第 3 位和第 4 位，然后使用`Long.parseLong(string, 2)`.

# java - 萨克斯英雄错误

> ID：10367585
> 
> 赞同：0
> 
> 时间：2012-04-28T21:14:53.250
> 
> 标签：java, android

我正在使用 sax 解析器来获取 xml 数据，下面的代码导致我的应用程序崩溃。

```
 try {
        url = new URL("The URL");
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
   // RssFeed feed = null;
    try {
        feed = RssReader.read(url);
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

看起来它正在崩溃`feed = RssReader.read(url);`它在我的 evo 上运行良好，但是当我将它安装在我的英雄上时，会发生以下错误

```
04-28 15:57:53.458: E/AndroidRuntime(2749): Uncaught handler: thread main exiting due to uncaught  exception
04-28 15:57:53.589: E/AndroidRuntime(2749): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mlgw.mlgwapp/com.mlgw.mlgwapp.TipsActivity}: java.lang.StringIndexOutOfBoundsException
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2596)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:2411)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:648)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.widget.TabHost.setCurrentTab(TabHost.java:320)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:379)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.View.performClick(View.java:2364)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.View.onTouchEvent(View.java:4179)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.View.dispatchTouchEvent(View.java:3709)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:874)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1695)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1116)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.app.Activity.dispatchTouchEvent(Activity.java:2068)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1679)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1697)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.os.Looper.loop(Looper.java:123)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.app.ActivityThread.main(ActivityThread.java:4595)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at java.lang.reflect.Method.invokeNative(Native Method)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at java.lang.reflect.Method.invoke(Method.java:521)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at dalvik.system.NativeStart.main(Native Method)
04-28 15:57:53.589: E/AndroidRuntime(2749): Caused by: java.lang.StringIndexOutOfBoundsException
04-28 15:57:53.589: E/AndroidRuntime(2749):     at java.lang.String.substring(String.java:1646)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at nl.matshofman.saxrssreader.RssHandler.endElement(RssHandler.java:67)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at org.apache.harmony.xml.ExpatParser.endElement(ExpatParser.java:159)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at org.apache.harmony.xml.ExpatParser.append(Native Method)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:506)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:467)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:329)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:286)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at nl.matshofman.saxrssreader.RssReader.read(RssReader.java:43)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at com.mlgw.mlgwapp.TipsActivity.onCreate(TipsActivity.java:57)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-28 15:57:53.589: E/AndroidRuntime(2749):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2544) 
```

请帮忙！！

这是我的 RssHandler 类

```
package nl.matshofman.saxrssreader;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

import org.xml.sax.Attributes;
import org.xml.sax.helpers.DefaultHandler;

public class RssHandler extends DefaultHandler {

private RssFeed rssFeed;
private RssItem rssItem;
private StringBuilder stringBuilder;

@Override
public void startDocument() {
    rssFeed = new RssFeed();
}

/**
 * Return the parsed RssFeed with it's RssItems
 * @return
 */
public RssFeed getResult() {
    return rssFeed;
}

@Override
public void startElement(String uri, String localName, String qName, Attributes attributes) {
    stringBuilder = new StringBuilder();

    if(qName.equals("item") && rssFeed != null) {
        rssItem = new RssItem();
        rssItem.setFeed(rssFeed);
        rssFeed.addRssItem(rssItem);
    }
}

@Override
public void characters(char[] ch, int start, int length) {
    stringBuilder.append(ch, start, length);
}

@Override
public void endElement(String uri, String localName, String qName) {

    if(rssFeed != null && rssItem == null) {
        // Parse feed properties

        try {
            String methodName = "set" + qName.substring(0, 1).toUpperCase() + qName.substring(1);
            Method method = rssFeed.getClass().getMethod(methodName, String.class);
            method.invoke(rssFeed, stringBuilder.toString());
        } catch (SecurityException e) {
        } catch (NoSuchMethodException e) {
        } catch (IllegalArgumentException e) {
        } catch (IllegalAccessException e) {
        } catch (InvocationTargetException e) {
        }

    } else if (rssItem != null) {
        // Parse item properties

        try {
            if(qName.equals("content:encoded")) 
                qName = "content";
            String methodName = "set" + qName.substring(0, 1).toUpperCase() + qName.substring(1);
            Method method = rssItem.getClass().getMethod(methodName, String.class);
            method.invoke(rssItem, stringBuilder.toString());
        } catch (SecurityException e) {
        } catch (NoSuchMethodException e) {
        } catch (IllegalArgumentException e) {
        } catch (IllegalAccessException e) {
        } catch (InvocationTargetException e) {
        }
    }

} 
```

好的，我补充说现在有这个

```
04-28 18:49:35.189: E/AndroidRuntime(3780): Uncaught handler: thread main exiting due to uncaught exception
04-28 18:49:35.328: E/AndroidRuntime(3780): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mlgw.mlgwapp/com.mlgw.mlgwapp.TipsActivity}: java.lang.IllegalArgumentException
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2596)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:2411)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:648)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.widget.TabHost.setCurrentTab(TabHost.java:320)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:379)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.View.performClick(View.java:2364)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.View.onTouchEvent(View.java:4179)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.View.dispatchTouchEvent(View.java:3709)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:874)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1695)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1116)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.app.Activity.dispatchTouchEvent(Activity.java:2068)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1679)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1697)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.os.Looper.loop(Looper.java:123)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.app.ActivityThread.main(ActivityThread.java:4595)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at java.lang.reflect.Method.invokeNative(Native Method)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at java.lang.reflect.Method.invoke(Method.java:521)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at dalvik.system.NativeStart.main(Native Method)
04-28 18:49:35.328: E/AndroidRuntime(3780): Caused by: java.lang.IllegalArgumentException
04-28 18:49:35.328: E/AndroidRuntime(3780):     at java.util.Random.nextInt(Random.java:221)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at com.mlgw.mlgwapp.TipsActivity.onCreate(TipsActivity.java:71)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-28 18:49:35.328: E/AndroidRuntime(3780):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2544)
04-28 18:49:35.328: E/AndroidRuntime(3780):     ... 30 more 
```

现在似乎与我正在使用的圆形功能有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:40:55.940

堆栈跟踪会告诉您错误的原因：

```
Caused by: java.lang.StringIndexOutOfBoundsException
     at java.lang.String.substring(String.java:1646)
     at nl.matshofman.saxrssreader.RssHandler.endElement(RssHandler.java:67) 
```

实际错误发生在`java.lang.String.substring()`您的代码之外，因此您无法修复任何内容。但下一行告诉你在哪里`substring`被调用。`RssHandler.java`在第 67 行，在方法中`endElement`

那应该是：

```
String methodName = "set" + qName.substring(0, 1).toUpperCase() + qName.substring(1) 
```

字符串索引是它们的字符，因此您可以访问`qName`它，尽管它是空的，并且您不能仅从第一个字符或从第一个字符开始构建子字符串。

为了防止崩溃，你可以做

```
if (qName != null && qName.length() > 0) {
    String methodName = "set" + qName.substring(0, 1).toUpperCase() + qName.substring(1);
    Method method = rssFeed.getClass().getMethod(methodName, String.class);
    method.invoke(rssFeed, stringBuilder.toString());
} 
```

您应该查看 XML 并找出为什么存在不符合预期格式的 qName。

也`localName`可能更好地检查，因为 is 的限定名称 `<xsl:template />`而`xsl:template`本地名称是 just `template`。

# c# - 为什么 System.Random 连续多次给出“1”，然后不是一段时间，然后又是？

> ID：10367587
> 
> 赞同：23
> 
> 时间：2012-04-28T21:15:22.953
> 
> 标签：c#, .net, random

不知道如何解释这一点，所以标题几乎描述了这个问题。

Random 不会在循环的每个部分都重新初始化。它是一个类的静态成员，我总是从其他类调用它。

我没有使用自定义种子。

初始化代码为：

```
 public static Random random = new Random();

        for (int x = 0; x < 75; x++)
        {
            if (main.random.Next(11) == 1)
            {
                tiles[heightMap[x] - 1][x] = 4;
                tiles[heightMap[x] - 2][x] = 4;
                tiles[heightMap[x] - 3][x] = 4;
                tiles[heightMap[x] - 4][x] = 4;
                tiles[heightMap[x] - 5][x] = 4;
                tiles[heightMap[x] - 5][x - 1] = 5;
                tiles[heightMap[x] - 6][x - 1] = 5;
                tiles[heightMap[x] - 6][x] = 5;
                tiles[heightMap[x] - 5][x + 1] = 5;
                tiles[heightMap[x] - 6][x + 1] = 5;
            }
        } 
```

这（我知道这不是一个好方法 - 它是基本的和临时的）生成一棵树。

然而，我的地形通常看起来像这样，有许多聚集的树：

☁☁☁☁☁☁☁☁☁☁

任何人都可以深入了解为什么会这样吗？有比使用 System.Security.Cryptography.Random 类更好的选择吗？

我预计每棵树平均有 9 个间隙，但它更像是 7 棵树，然后是 3 棵树紧密地聚集在一起。

![在此处输入图像描述](../Images/07ba8e496622da628188ea876697a70a.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-28T21:27:38.220

这是一个概率误解；你所知道的是，**在任何时候**，在下一个槽中得到一棵树的机会是，假设均匀分布，11 分之一。

因此，获得 0 差距的机会是 1/11

因此，获得 1 的差距的机会是 10/11 * 1/11

因此，获得 2 差距的机会是 10/11 * 10/11 * 1/11

ETC

所有这些 10/11 加起来（嗯，*乘*起来）！因此，让我们编写一个实用程序：

```
decimal accountedFor = 0M;
for (int i = 0; i <= 20; i++)
{
    decimal chance = 1M / 11M;
    for (int j = 0; j < i; j++) chance *= 10M / 11M;
    accountedFor += chance;
    Console.WriteLine("{0:00}: {1:00.0%}\t({2:00.0%})", i, chance, accountedFor);
} 
```

这使：

```
00: 09.1%       (09.1%)
01: 08.3%       (17.4%)
02: 07.5%       (24.9%)
03: 06.8%       (31.7%)
04: 06.2%       (37.9%)
05: 05.6%       (43.6%)
06: 05.1%       (48.7%)
07: 04.7%       (53.3%)
08: 04.2%       (57.6%)
09: 03.9%       (61.4%)
10: 03.5%       (65.0%)
11: 03.2%       (68.1%)
12: 02.9%       (71.0%)
13: 02.6%       (73.7%)
14: 02.4%       (76.1%)
15: 02.2%       (78.2%)
16: 02.0%       (80.2%)
17: 01.8%       (82.0%)
18: 01.6%       (83.6%)
19: 01.5%       (85.1%)
20: 01.4%       (86.5%) 
```

这解释了小差距的偏见。笔记; 当我们达到 20 大小的差距时，我们进入了低于 1.5% 的机会领域，并且已经占了所有可能结果的 85% - 剩余的 15% 将分散在无穷大的其余部分（即差距大小为 13212 是可能的，但不太可能）。

所以这是一个模拟：

```
int[] gapCounts = new int[21];

int gap = 0;
// simulate a few gaps using your algo
var random = new Random();
for (int x = 0; x < 100000; x++)
{
    if (random.Next(11) == 1)
    { // count that gap
        gapCounts[gap]++;
        gap = 0;
    }
    else
    {
        gap++;
        if(gap >= gapCounts.Length)
        { // just skip anything too large, sorry
            gap = 0;
        }
    }
}

decimal total = gapCounts.Sum();
for(int i = 0 ; i < gapCounts.Length ; i++)
{
    Console.WriteLine("{0:00}: {1:00.0%}", i, gapCounts[i] / total);
} 
```

没有任何输出**，这些值每次运行都会改变**：

```
00: 11.0%
01: 09.4%
02: 08.6%
03: 07.9%
04: 07.3%
05: 06.5%
06: 05.4%
07: 05.4%
08: 04.7%
09: 04.5%
10: 04.4%
11: 03.4%
12: 03.5%
13: 03.0%
14: 02.9%
15: 02.4%
16: 02.5%
17: 02.2%
18: 01.9%
19: 01.5%
20: 01.7% 
```

# ruby - 用 Ruby Regex 匹配逗号分隔的列表

> ID：10367589
> 
> 赞同：1
> 
> 时间：2012-04-28T21:15:47.700
> 
> 标签：ruby, regex, oniguruma

给定以下字符串，我想匹配列表的元素和冒号后的其余部分：

> 富，酒吧，巴兹：某事

即我期望前三个匹配组是“foo”、“bar”、“baz”。没有逗号，也没有冒号。元素的最小数量是 1，并且可以有任意多个。假设没有空格和小写。

我已经尝试过了，它应该可以工作，但由于某种原因没有填充所有匹配组：

`^([a-z]+)(?:,([a-z]+))*:(something)`

这与 \1 中的 foo 和 \2 中的 baz （或任何最后一个元素）相匹配。我不明白为什么我没有得到 bar 的匹配组。

有任何想法吗？

编辑：Ruby 1.9.3，如果这很重要。

EDIT2：Rubular 链接：[http ://rubular.com/r/pDhByoarbA](http://rubular.com/r/pDhByoarbA)

EDIT3：在末尾添加冒号，因为我不只是想匹配列表。抱歉，问题过于简单化了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T21:21:46.610

这个表达对我有用：`/(\w+)/i`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:34:26.103

如果你想用正则表达式来做，这个怎么样？

```
(?<=^|,)("[^"]*"|[^,]*)(?=,|$) 
```

这匹配逗号分隔的字段，包括逗号出现在带引号的字符串中的可能性，例如`123,"Yes, No"`. [正则表达式为此。](http://regexr.com?30q34)

更详细地说：

```
(?<=^|,)       # Must be preceded by start-of-line or comma
(
    "[^"]*"|   # A quote, followed by a bunch of non-quotes, followed by quote, OR
    [^,]*      # OR anything until the next comma
)
(?=,|$)        # Must end with comma or end-of-line 
```

使用类似于 Python's 的东西`re.findall()`，它返回字符串中所有不重叠的匹配项（如果重要的话，从左到右工作。）不要将它与你的等价物一起使用，`re.search()`或者`re.match()`只返回找到的第一个匹配项。

（注意：这实际上在 Python 中不起作用，因为后视`(?<=^|,)`不是固定宽度。Grr。欢迎对此提出建议。）

* * *

编辑：使用非捕获组来使用行首或逗号，而不是向后看，它在 Python 中工作。

```
>>> test_str = '123,456,"String","String, with, commas","Zero-width fields next",,"",nyet,123'
>>> m = re.findall('(?:^|,)("[^"]*"|[^,]*)(?=,|$)',test_str)
>>> m
['123', '456', '"String"', '"String, with, commas"',
 '"Zero-width fields next"', '', '""', 'nyet', '123'] 
```

* * *

编辑 2：Python 的[Ruby 等价物](https://stackoverflow.com/questions/80357/ruby-match-all-occurrences-of-a-regex)`re.findall(needle, haystack)`是`haystack.scan(needle)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:20:44.833

对于这种情况，也许`split`会是更好的解决方案？

```
'foo,bar,baz'.split(',')
=> ["foo", "bar", "baz"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-28T15:40:39.413

如果我正确解释了您的帖子，您希望在冒号 (:)*之前用逗号分隔所有内容。*

合适的正则表达式是：

```
[^\s:]*(,[^\s:]*)*(:.*)? 
```

这应该找到您正在寻找的一切。

# html - 制作用于在文本气球中显示用户评论的灵活 CSS 布局的麻烦

> ID：10367591
> 
> 赞同：2
> 
> 时间：2012-04-28T21:15:49.660
> 
> 标签：html, css

我正在构建一个网站，该网站显示用户放置的评论的垂直堆叠列表。文本应该出现在一个基本上显示用户姓名的文本气球中，在文本下方，最后在文本气球页脚中，它显示两个链接并向右浮动，一个时间戳。

由于设计/布局不是我的事，我花了一些痛苦的日子才用纯 CSS（要求）实现这一点，我设法使列表看起来非常整齐。为此，我尝试研究 Google 和 Twitter 用来显示他们的视频和推文的 CSS，并尝试从中提取一些有用的东西。但是，我注意到他们的 CSS 和 HTML 非常庞大，我质疑他们是否以“正确”的方式进行操作，或者他们是否发现这是使其在所有类型的设备上良好显示的唯一可能性。（也许有人可以对此有所了解吗？）结论是它对我来说不是很有用。

然而，结果感觉并不好，而且很“敏感”（一点都不灵活）；例如，当我调整窗口大小或在平板电脑上打开页面时，它看起来很恶心；包裹并显示在头像图像下的文本块...

**问题 1：**正如我所提到的，我一直在研究/研究大型网站（如 YouTube、Twitter 和 FaceBook）如何做类似的事情，而我认为 HTML/CSS 看起来有点混乱。有人分享这种想法/意见吗？

**问题 2：**有人可以为我提供一个好的起点，即 HTML/CSS 示例（最好在 JSFiddle 左右），用于以下内容：

![在此处输入图像描述](../Images/c3d4ef93f9e1473e3f0a348abbce5ef2.png)

**一些备注：**

*   不应使用任何图像（除了头像图像之外）
*   不应使用表格；仅 Div 和/或 HTML-5 语义（例如页眉、页脚、文章等）
*   CSS/HTML 布局应该非常灵活，可以适当地自我调整。在图像上，您可以知道我希望它如何在不同的场景中显示。
*   在 IE、FireFox、Safari 和 Chrome 的最新版本中应该可以很好地显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T22:03:37.357

鉴于以下标记：

```
<div class="wrap">
    <img src="http://davidrhysthomas.co.uk/img/dexter.png" />
    <div class="comment" data-owner="Dexter">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque lacus lacus, blandit sit amet iaculis sodales, eleifend ut massa. Mauris arcu felis, facilisis sed bibendum et, tristique tincidunt dolor. Cras a hendrerit nisl. Maecenas accumsan, urna at aliquam blandit, ipsum erat pellentesque urna, et interdum mauris lacus et tellus.</p>
        <ol class="postscript"> <!-- links and timestamp -->
            <li><a href="#">link 1</a></li>
            <li><a href="#">link 2</a></li>
            <li class="date">3 days ago</li>
        </ol>
    </div>
</div>​ 
```

以及以下 CSS：

```
div.wrap {
    width: 90%;
    margin: 0 auto 1em auto;
    position: relative; /* the image will be absolutely-positioned relative to this */
}

div.wrap:first-child {
    margin-top: 1em; /* just for aesthetic reasons, adjust or remove, to taste */
}

div.comment {
    font-size: 1em;
    position: relative; /* the arrow on the left side of the div positioned relative to this element */
    margin-left: 60px; /* allows a 10px gutter for the arrow to fit into */
    border-radius: 0.75em 0.75em 0.75em 0.75em;
    background-color: #ccc;
    line-height: 1.4em;
    font-family: Helvetica; /* or whatever... */
}

div.comment::before { /* requires a fairly modern browser */
    content: attr(data-owner); /* displays the name of the comment-owner */
    border-radius: 0.75em 0.75em 0 0;
    background-color: #ccc;
    display: block;
    text-indent: 10%; /* adjust to taste */
    border-bottom: 3px solid #999;
}

div.comment::after { /* again, requires a fairly modern browser */
    content: ''; /* this property is necessary, even if only an empty string */
    position: absolute;
    top: 50%;
    left: 0;
    border: 10px solid transparent;
    border-right: 10px solid #ccc; /* forms the 'arrow' */
    margin: -10px 0 0 -20px;
}

div.comment p { /* or whatever, adjust to taste */
    width: 80%;
    margin: 0 auto 1em auto;
    padding-bottom: 1em;
}

img {
    position: absolute;
    top: 50%;
    width: 50px;
    float: left;
    border-radius: 10px;
    margin-top: -25px;
}​

p + ol.postscript {
    width: 80%;
    font-size: 0.8em;
    margin: -0.5em auto 0 auto;
}
ol.postscript::after {
    content: '';
    height: 0.5em;
    display: block;
    clear: both;
}
ol.postscript li {
    float: left;
    margin-right: 0.5em;
}
ol.postscript li.date {
    float: right;
    margin-right: 0;
}

.wrap a:link,
.wrap a:visited {
    color: #333;
    text-decoration: none;
    border-bottom: 1px solid #333;
}

.wrap a:hover,
.wrap a:active,
.wrap a:focus {
    color: #f00;
    border-bottom: 1px solid #f00;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/smp87/2/)。

* * *

**针对有效评论进行了**编辑，如下所示：****

 ***   我认为屏幕阅读器不会读取属性，这意味着将 data-owner 的内容放在它自己的元素中可能会更好，而不是属性。

*   一个小问题（也如上所述）[屏幕阅读器不会阅读 CSS 生成的内容]（一个小问题（如上所述）屏幕阅读器不会阅读 CSS 生成的内容，并且评论作者在我看来是一个必不可少的内容，应该是屏幕阅读器用户可以访问。）在我看来，评论作者是屏幕阅读器用户应该可以访问的基本内容。

鉴于合理的建议，我已经替换了`.comment::before`元素，添加了一个离散的`h2`：

```
<div class="wrap">
    <img src="http://davidrhysthomas.co.uk/img/dexter.png" />
    <div class="comment" data-owner="Dexter">
        <h2 class="owner">Dexter</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque lacus lacus, blandit sit amet iaculis sodales, eleifend ut massa. Mauris arcu felis, facilisis sed bibendum et, tristique tincidunt dolor. Cras a hendrerit nisl. Maecenas accumsan, urna at aliquam blandit, ipsum erat pellentesque urna, et interdum mauris lacus et tellus.</p>
        <ol class="postscript">
            <li><a href="#">link 1</a></li>
            <li><a href="#">link 2</a></li>
            <li class="date">3 days ago</li>
        </ol>
    </div>
</div> 
```

并附加了以下CSS（代替原来的`.comment::before`）：

```
div.comment p {
    width: 80%;
    margin: 0 auto 1em auto;
} 
```

[修订 JS Fiddle](http://jsfiddle.net/davidThomas/smp87/3/)。**

# grails-plugin - Grails 安装可搜索插件时出错

> ID：10367592
> 
> 赞同：0
> 
> 时间：2012-04-28T21:15:50.803
> 
> 标签：grails-plugin

当我尝试在 grails 应用程序中安装可搜索插件时，我被告知 grails 无法解析以下依赖项：

```
 ::::::::::::::::::::::::::::::::::::::::::::::
    ::          UNRESOLVED DEPENDENCIES         ::
    ::::::::::::::::::::::::::::::::::::::::::::::
    :: org.grails.plugins#searchable;0.6.3: java.lang.NullPointerException at org.apache.ivy.plugins.resolver.AbstractResolver.initRepositoryCacheManagerFromSettings(AbstractResolver.java:396)
    :::::::::::::::::::::::::::::::::::::::::::::: 
```

Grails 版本是 2.0.3

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:23:26.340

您是否尝试从 zip 文件安装它？这可能是由[GRAILS-9006](http://jira.grails.org/browse/GRAILS-9006?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)引起的，它阻止插件通过本地目录安装，将在 Grails 2.0.4 中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:26:11.250

尝试取消注释 BuildConfig.groovy 中的 mavenCentral 行，然后再次尝试安装插件。

```
 //mavenLocal()
    mavenCentral()
    //mavenRepo... 
```

# javascript - Heroku(Cedar) + Node + Express + Jade 子目录中的客户端 javascript 文件在本地与 foreman+curl 一起工作，但在推送到 Heroku 时不能

> ID：10367600
> 
> 赞同：11
> 
> 时间：2012-04-28T21:17:29.590
> 
> 标签：javascript, node.js, heroku, express, pug

我对 node 和 heroku 很陌生，我怀疑这是某种简单的权限问题等，但我似乎无法找到它。

我的 web.js 文件所在的根目录下一级的子目录中有几个纯 JavaScript 文件。我的 web.js 文件中有一行来指定目录

```
app.use('/heatcanvas',express.static(__dirname+'/heatcanvas')); 
```

如果我使用 Heroku Foreman 在本地运行我的应用程序，我会在运行以下 curl 命令时得到预期的 js 响应

```
 curl localhost:5000/heatcanvas/heatcanvas.js 
```

但是，当我推送到 Heroku 并在浏览器中点击相应的实时网址时

```
www.example.com/heatcanvas/heatcanvas.js 
```

我收到以下信息：

```
 Cannot GET /heatcanvas/heatcanvas.js 
```

如果我检查 Firebug 和/或 Heroku 日志，我会发现这些文件实际上出现了 404 错误，即使路径应该与本地正在执行的操作相匹配。还值得一提的是，第三方 javascript 也很好，只有当 script 标签的 src 属性指向我的站点时，才会出现问题。我需要做什么才能使我的脚本可用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T14:00:47.137

我建议您使用**process.cwd()**值来获取特定目录

```
process.env.PWD = process.cwd() 
```

在你的**web.js的最开始**

让您轻松访问文件。

你可以做

```
app.use('/heatcanvas',express.static(process.env.PWD+'/heatcanvas')); 
```

而不是使用

```
__dirname 
```

**警告：**确保在 web.js 的根目录执行 web.js（Heroku web.js 是这样执行的）

# c++ - C++中的向量初始化

> ID：10367605
> 
> 赞同：1
> 
> 时间：2012-04-28T21:17:57.530
> 
> 标签：c++, stl, vector, declaration, stdvector

我在我的代码中使用向量。

导致错误的行如下：

```
vector<Node> alt_seq ;
alt_seq = vector<Node>(1000);
for(int j=0; j<alt_cf.getNoOfNodes(i); j++)
{
    Node temp_node = *alt_itr;
    alt_itr++;
    alt_seq.push_back(temp_node);
    } 
```

该行：

```
 alt_seq.push_back(temp_node); 
```

导致运行时错误。但是，如果我用一些初始大小初始化向量，如下所示：

```
vector<Node> alt_seq(1000) ; 
```

在这种情况下，代码可以正常工作。但是我不想给出初始大小，因为向量中的对象数量将在运行时变化。请帮我。我是 C++ 新手。

供您参考完整的方法功能在这里：

[http://pastebin.com/2dUFEui5](http://pastebin.com/2dUFEui5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:31:30.907

您的`Node`类有一个`CombinedFragment*`名为`cfrag`. 如果您没有定义自己的复制 ctor 和赋值运算符，这将创建悬空引用。`Node`此外，如果负责分配/解除分配，则需要适当的 dtor 来防止泄漏`cfrag`。如果您不想深度复制`CombinedFragment`，可以使用`shared_ptr`.

此外，默认的 ctor`Node`可能甚至不需要在那里（它`cfrag`处于未初始化状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:22:16.347

我可以看到一个问题；当您声明 1000 个`vector`对象然后执行 a`push_back`时，您将添加到向量的末尾，即您尝试添加的对象位于 1001、1002.... 等等。如果声明 1000 个`vector`对象不会给您运行时错误，我会首先查看默认定义是什么（因为前 1000 个节点对象具有默认值），因为这不是错误并与我尝试加载的实际数据进行比较。希望这可以帮助。

# c++ - 赋值 = 运算符重载

> ID：10367609
> 
> 赞同：0
> 
> 时间：2012-04-28T21:18:07.333
> 
> 标签：c++, operator-overloading, cascade, assignment-operator

请帮助完成赋值重载函数的执行。

这是说明：

赋值运算符 (=) 将源字符串复制到目标字符串中。请注意，目标的大小需要调整为与源的大小相同。

加法 (+) 和赋值 (=) 运算符都需要能够进行级联操作。这意味着`String3 = String1 + String2`，或者`String1 = String2 = String3`应该工作。

这是我的 .cpp 文件：

```
 int MyString::Length()
 {
       int counter(0);

       while(String[counter] != '\0')
       {
            counter ++;
       }
     return (counter);
 }

MyString& MyString::operator=(const MyString& rhs)
{

        if(this != &rhs)
        {

                delete [] String;
                String = new char[rhs.Length()];

             for(int i = 0; i <rhs.Length()+1 ; i++)
            {       
                  String[i] = rhs.String[i];
            }       

        }
        return *this;

} 
```

在 main.cpp 文件中通过以下方式调用它：

字符串1=字符串2=字符串3；

我觉得好像我错过了什么。救命！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T21:27:09.750

查看[复制和交换习语](https://stackoverflow.com/questions/5787495/how-does-the-copy-and-swap-idiom-work-during-self-assignment/5787637#5787637)。

您的代码的问题之一是它不是异常安全的。
它甚至不满足[基本的异常保证](https://stackoverflow.com/questions/88573/should-i-use-an-exception-specifier-in-c/89790#89790)。

如果它在新操作期间抛出，您的对象将处于完全无法使用的状态。如果事实处于危险状态，因为如果在堆栈展开期间由于异常调用析构函数，您将获得未定义的行为，因为析构函数将`String`第二次调用 delete。

对象上的所有方法都应分三个阶段执行：

1.  做所有可以扔但不改变对象的工作。
    *   因此，如果您确实抛出该对象，则该对象处于良好状态。
2.  以异常安全的方式将您在 (1) 中创建的数据与对象数据交换。
    *   这就是为什么`swap(`) 方法是不抛出的
3.  整理并删除。
    *   哪个可以抛出，因为对象再次处于一致状态。

复制和交换习语将这些步骤很好地封装在一种易于使用的技术中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T21:31:30.843

我想`String`是一个`char*`. 那么，作为新长度的 ，或许`Size`需要设置为新字符串 rhs 的长度。所以它应该是`rhs.Size`，而不是 this->Size ，这很可能是这种情况。请注意，在 char 数组大小中也应考虑终止空字符。

之后您可以进入循环，再次处理所有字符和终止空字符。鉴于我们不知道是什么`counter`并假设它是没有空字符的新字符串长度（因此，+ 1 占它），我想循环没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T16:57:26.137

在开始赋值运算符重载之前，让我们看一下 C++ 中的运算符重载。在面向对象的编程中，运算符重载（不太常见的称为 operator ad hoc 多态性）是多态性的一种特殊情况，不同的运算符根据其参数有不同的实现。运算符重载通常由语言、程序员或两者定义。使用运算符重载是因为它允许开发人员使用更接近目标域的符号进行编程，并允许用户定义的类型与语言中内置的类型具有相似级别的句法支持。例如，在科学计算中很常见，它允许使用与纸上相同的语法来操作数学对象的计算表示。可以使用函数调用来模拟对象重载。

现在我们如何重载赋值运算符（=），

在我们完成这个赋值运算符重载之后，我们将能够分配我们自定义数据类型的两个变量。让我们看看下面的例子：

```
// Operator overloading in C++
//assignment operator overloading
#include<iostream>
using namespace std;

class Employee
{
private:
int idNum;
double salary;
public:
Employee ( ) {
    idNum = 0, salary = 0.0;
}

void setValues (int a, int b);
void operator= (Employee &emp );

};

void Employee::setValues ( int idN , int sal )
{

salary = sal; idNum = idN;

}

void Employee::operator = (Employee &emp)  // Assignment operator overloading function
{
salary = emp.salary;
}

int main ( )
{

Employee emp1;
emp1.setValues(10,33);
Employee emp2;
emp2 = emp1;        // emp2 is calling object using assignment operator

} 
```

现在让我们解释一下重载“=”运算符的代码，我们使用函数“setValues”将值分配给“idN”和“sal”，该函数是“Employee”类的公共成员函数，现在我们的重点是定义为“operator =”的重载函数。在这个函数中，我们将薪水的值赋值给同一个类的另一个变量，这样我们就可以直接在我们的 main() 函数中使用赋值运算符。现在你可以在main()中看到，我们有两个Employee类型的变量emp1和emp2，我们可以在最后一行代码中直接使用赋值运算符，这都是因为赋值运算符重载或运算符“=”的运算符重载”。

*   查看更多信息：http: [//www.programmingtunes.com/overloading-assignment-operator-in-c/](http://www.programmingtunes.com/overloading-assignment-operator-in-c/)

# c - char 的按位移位数组

> ID：10367616
> 
> 赞同：13
> 
> 时间：2012-04-28T21:19:33.237
> 
> 标签：c, bit-manipulation

我有一个字符数组，我正在尝试按位右移`>>`，然后`&`使用另一个数组。我想我对如何做到这一点有错误的想法。

我想，即使它是一个字符数组，只是说明`my_array >>= 1`会改变一切，但我收到一个错误：`"error: invalid operands to binary >> (have ‘char[8]’ and ‘int’)"`

我试图做的按位比较是用一个类似大小的数组启动到所有“0”......因为我得到：`"error: invalid operands to binary & (have ‘char *’ and ‘char *’)"`

我是否需要将这些数组转换为其他东西才能移动和比较？

对不起，我不是很清楚......到目前为止，所有的好建议，我想我越来越意识到没有超级简单的方法可以做到这一点。更具体地说，我要做的是将整个字符数组的位右移 1，将右移的位添加到数组的最左侧，与另一个相同大小的数组进行按位比较。

从技术上讲，比较不必是数组与数组......我只需要这些位。在尝试进行移位/比较之前将数组转换为其他内容会更容易吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T21:27:13.760

您必须逐元素移动和比较。

```
for(i = 0; i < len; ++i)
    array[i] >>= 3; 
```

例如。如果你想将移出一个元素的位移动到下一个元素，它会更复杂，比如你向右移动，然后

```
unsigned char bits1 = 0, bits2 = 0;
for(i = len-1; i >= 0; --i) {
    bits2 = array[i] & 0x07;
    array[i] >>= 3;
    array[i] |= bits1 << 5;
    bits1 = bits2;
} 
```

沿另一个方向遍历数组，因为您需要来自下一个更高插槽的位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T21:35:00.417

```
/** Shift an array right.
 * @param ar The array to shift.
 * @param size The number of array elements.
 * @param shift The number of bits to shift.
 */
void shift_right(unsigned char *ar, int size, int shift)
{
    int carry = 0;                              // Clear the initial carry bit.
    while (shift--) {                           // For each bit to shift ...
        for (int i = size - 1; i >= 0; --i) {   // For each element of the array from high to low ...
            int next = (ar[i] & 1) ? 0x80 : 0;  // ... if the low bit is set, set the carry bit.
            ar[i] = carry | (ar[i] >> 1);       // Shift the element one bit left and addthe old carry.
            carry = next;                       // Remember the old carry for next time.
        }   
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T21:27:38.850

您只能移动该数组的成员，即 char（或 int）。你不能移动整个数组。移位`my_array`尝试对数组类型（或指向 char 的指针）执行移位操作，这是不可能的。改为这样做：

```
for (i = 0; i < size; i++) {
  my_array[i] >>= 1;
} 
```

此外，您必须小心使用字符，因为它们通常是有符号的，并且包含负值的字符将从左侧带上“1”而不是零。所以你最好使用无符号字符。

**编辑：** 上面的代码很简单。如果您打算将整个数组右移，而不仅仅是每个字节，那么您需要“手动”将每个 LSB 复制到其右侧字节的 MSB。循环阅读 Richard Pennington 的回答。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-28T21:27:06.237

您必须一一移动数组中的条目。（如果您想比较其中两个，则需要逐个元素地进行。）

如果您希望从每个字符上移出的位会移到下一个字符中，那么您也需要手动处理。

如果您想要转移到下一个字节的行为，并且不介意使您的代码令人讨厌、不可移植且容易出错，您可以获取指向数组的指针，将其转换为类似`unsigned long long *`,取消引用它并移动结果整数，然后再次将其存储回来。

但是，如果这是您想要的行为，那么您应该使用整数而不是 a`char[8]`开头。

（如果您可以更多地说明您的实际目标，那么可能会有更多有用的答案。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-28T21:27:31.387

如果要对数组进行移位/OR/XOR/AND/等操作，应该循环执行，不能直接对数组执行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-30T12:47:35.210

```
/**
 * shift a number of bits to the right
 *
 * @param   SRC         the array to shift
 * @param   len         the length of the array
 * @param   shift       the number of consecutive bits to shift
 *
*/
static void shift_bits_right(uint8_t SRC[], uint16_t len, uint32_t shift) {
    uint32_t i = 0;

    uint8_t start = shift / 8;
    uint8_t rest = shift % 8;
    uint8_t previous = 0;

    for(i = 0; i < len; i++) {
        if(start <= i) {
            previous = SRC[i - start];
        }
        uint8_t value = (previous << (8 - rest)) | SRC[i + start] >> rest;
        SRC[i + start] = value;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-14T07:01:08.327

我知道这是老话题，但我对可用的答案不满意，这是我最近写的东西，它允许您指定可以移动的位数，并且其中有简单的 XOR 加密。

```
//https://github.com/ashvin-bhuttoo/CryptoTest/blob/master/CryptoTest/Crypto.cpp
//CRYPTO CONFIGURATION PARAMETERS
#define BIT_SHIFT 3
#define XOR_KEY 0x3C
#define ENABLE_XOR_VARIANCE true
////////////////////////////////

int get_rs_mask(int shift)
{
    switch (shift)
    {
    case 0:
        return 0x00;
    case 1:
        return 0x01;
    case 2:
        return 0x03;
    case 3:
        return 0x07;
    case 4:
        return 0x0F;
    case 5:
        return 0x1F;
    case 6:
        return 0x3F;
    case 7:
        return 0x7F;
    default:
        throw "get_rs_mask -> Error, shift argument outside legal range 0-7";
    }
}

void shift_right(char* buf, int msg_len, int shift)
{
    unsigned char tmp = 0x00, tmp2 = 0x00;
    for (int k = 0; k <= msg_len; k++)
    {
        if (k == 0)
        {
            tmp = buf[k];
            buf[k] >>= shift;
        }
        else
        {
            tmp2 = buf[k];
            buf[k] >>= shift;
            buf[k] |= ((tmp & get_rs_mask(shift)) << (8 - shift));

            if (k != msg_len)
                tmp = tmp2;
        }
    }
}

int get_ls_mask(int shift)
{
    switch (shift)
    {
    case 0:
        return 0x00;
    case 1:
        return 0x80;
    case 2:
        return 0xC0;
    case 3:
        return 0xE0;
    case 4:
        return 0xF0;
    case 5:
        return 0xF8;
    case 6:
        return 0xFC;
    case 7:
        return 0xFE;
    default:
        throw "get_ls_mask -> Error, shift argument outside legal range 0-7";
    }
}

void shift_left(char* buf, int msg_len, int shift)
{
    char tmp = 0x00, tmp2 = 0x00;
    for (int k = msg_len; k >= 0; k--)
    {
        if (k == msg_len)
        {
            tmp = buf[k];
            buf[k] <<= shift;
        }
        else
        {
            tmp2 = buf[k];
            buf[k] <<= shift;
            buf[k] |= ((tmp & get_ls_mask(shift)) >> (8 - shift));

            tmp = tmp2;
        }
    }
}

void crypt(char* buf, int msg_len, bool decrypt = false)
{
    if (!decrypt)
    {
        shift_right(buf, msg_len, BIT_SHIFT);
        for (int k = 0; k < msg_len; k++)
        {
            buf[k] = buf[k] ^ XOR_KEY ^ k * (ENABLE_XOR_VARIANCE ? 2 : 0);
        }
        buf[msg_len] = '\0';
    }
    else
    {
        for (int k = 0; k < msg_len; k++)
        {
            buf[k] = buf[k] ^ XOR_KEY ^ k * (ENABLE_XOR_VARIANCE ? 2 : 0);
        }
        shift_left(buf, (msg_len)-1, BIT_SHIFT);
    }
} 
```

# uitableview - UITableView 与核心数据按时间排序，而不是按字母顺序

> ID：10367622
> 
> 赞同：1
> 
> 时间：2012-04-28T21:20:24.817
> 
> 标签：uitableview, core-data, time

我正在开发一个使用 Core Data 和 UITableView 的应用程序。我注意到的是，当我添加一个新的 TableView 条目时，单元格似乎按字母顺序排列。有没有办法让单元格在我添加它们时（从上到下）而不是按字母表排序。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:04:53.393

您应该为您的核心数据实体（类型 NSDate）添加一个时间戳字段。然后，您可以在获取请求上使用简单的排序描述符来对实体进行适当的排序。

例如，在您创建实体后...

```
NSDate *now = [NSDate date];
[myNewEntity setValue:now forKey:@"timestamp"]; 
```

然后，在您的获​​取请求中...

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"MyEntity"];
NSSortDescriptor *sortByTimestamp = [NSSortDescriptor sortDescriptorWithKey:@"timestamp" ascending:YES];
fetchRequest.sortDescriptors = [NSArray arrayWithObject:sortByTimestamp]; 
```

# android - Android：将未显示的操作项附加到图标而不是上下文菜单

> ID：10367624
> 
> 赞同：0
> 
> 时间：2012-04-28T21:20:32.903
> 
> 标签：android

我找到了一个如何使用带有 actionBar 的上下文菜单的示例。此示例等待点击电话菜单按钮。但我想让它附加到图标或更好的活动名称。谢谢

```
 public class menu extends Activity {

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
           MenuInflater inflater = getMenuInflater();
           inflater.inflate(R.menu.menu_fragen, menu);
           return true;
        }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:28:16.193

> 在标志和标题之后是一个下拉菜单指示器。

`onCreateOptionsMenu()`这与or无关`onOptionsItemSelected()`。要设置它`Spinner`：

1.  获取您的`ActionBar`通过`getActionBar()`

2.  致电`setNavigationMode(ActionBar.NAVIGATION_MODE_LIST)`_`ActionBar`

3.  当用户`setListNavigationCallbacks()`在`ActionBar`_`SpinnerAdapter``Spinner`

# c# - C# 中的 StringBuilder Append 与 AppendFormat 效率

> ID：10367625
> 
> 赞同：0
> 
> 时间：2012-04-28T21:20:33.640
> 
> 标签：c#

在 C# 中，1 还是 2 哪个更有效？

```
StringBuilder sb = new StringBuilder();
sb.Append("my string " + myVar + " my string");     // 1
sb.AppendFormat("my string {0} my string", myVar);  // 2 
```

我猜这个问题也可以改写：

```
string y = "my string " + myVar + " my string";              // 1
string x = String.Format("my string {0} my string", myVar);  // 2 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-28T21:46:46.187

.NET Framework 的版本在这里很重要，因为*StringBuilder.Append*和*StringBuilder.AppendFormat*的实现在各个版本之间可能会有很大差异。在 .NET Framework 4 下，(1) 比 (2) 快，但由于连接（并因此复制）（子）字符串导致的开销，它仍然效率低下。这甚至比 (1) 快 2 倍：

```
StringBuilder sb = new StringBuilder();
sb.Append("my string");
sb.Append(myVar);
sb.Append(" my string"); 
```

**更新**：
使用以下测试：

```
static void Main(string[] args)
{
    string myVar = "abcdef";
    Stopwatch stopwatch = Stopwatch.StartNew();

    for (int j = 0; j < 10000; j++)
    {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 10000; i++)
        {
            //UNCOMMENT ONE OF THESE TESTS
            //Test1
            sb.Append("my string " + myVar + " my string");

            //Test2
            //sb.AppendFormat("my string {0} my string", myVar);

            //Test3
            //sb.Append("my string ");
            //sb.Append(myVar);
            //sb.Append(" my string");
        }
    }
    stopwatch.Stop();
    Console.WriteLine(stopwatch.ElapsedMilliseconds + " ms");
} 
```

我在我的计算机上测量了这些结果（Intel Core2 Q9400、Windows Server 2008 x64、.NET Framework 4.0、发布模式）：

*   测试1：10401 毫秒
*   测试2：20262 毫秒
*   测试 3：5771 毫秒

# ruby - Rails 启动很慢

> ID：10367627
> 
> 赞同：-2
> 
> 时间：2012-04-28T21:20:39.800
> 
> 标签：ruby, ruby-on-rails-3

我有一台带有 2 个 2GHz 处理器和 4go 内存的 PC。我使用 Ubuntu 12.04，Windows 和 Ubuntu 11.10 也是如此。我将 RVM 与 ruby​​-1.9.3-p194-perf 和 rails 3.2.3 一起使用。当我加载我的 Rails 应用程序时，它需要一些时间，我认为这不正常。

这是一些例子：

```
time rails new speed_test
...
real    0m7.240s
user    0m4.484s
sys     0m0.184s

time rails g scaffold Articles title:string description:text
...
real    0m4.910s
user    0m4.052s
sys     0m0.348s

time rake db:migrate
...
real    0m4.172s
user    0m3.716s
sys     0m0.244s

time rake
...
real    0m15.981s
user    0m14.045s
sys     0m1.048s 
```

这是一些简短的命令，但是经过数百次测试，它很长，即使使用 spork 也是如此。我的处理器在测试期间使用了 20/30%。

更新：通过这个项目的测试：[https](https://github.com/railsfrance/railsfrance.org) ://github.com/railsfrance/railsfrance.org大约需要 6 分钟。你有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:43:25.430

不，这是意料之中的。加载所有 Rails 和您的应用程序需要时间。例如，在我的应用程序中，加载开发环境需要大约 7 秒的实时时间，因此任何与应用程序一起工作的命令都*必须*至少花费这个时间。您的加载时间似乎*更快*，因为您的应用程序更小或您的计算机更快。

与 SSD 相比，额外的处理能力可能不太可能产生巨大的影响。

另外，请注意，比较诸如`rails new`（可能会像它一样访问互联网`bundle install`）、`rake`（运行您的测试）或`rake db:migrate`（可能会或可能不会做事）之类的东西大多是没有意义的。

您通常可以通过减少所需的 gem 数量来缩短启动时间。

# mysql - 如何允许用户使用 sql UPDATE 语句编辑帖子？

> ID：10367628
> 
> 赞同：0
> 
> 时间：2012-04-28T21:20:44.293
> 
> 标签：mysql, sql, database

我试图让用户编辑他们发布的内容。内容分为标题和正文两部分。它也有一个类别，但我不想让他们编辑它。所以这里是假设更新对标题的任何更改的代码：

> $sql = "更新
> 
> 话题
> 
> SET topic_subject = " .mysql_real_escape_string($_POST['topic_subject']) . "
> 
> 在哪里
> 
> topic_id = " .mysql_real_escape_string($_GET['id']);

更新内容的代码具有相同的格式。我从页面的 url 中获取 id，一旦他们在编辑页面上单击提交，表单就会调用包含此代码的页面。它给了我这个错误：

> 插入数据时出错。请稍后再试。
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“WHERE topic_id =”附近使用正确的语法

我不是 SQL 专家，也不知道问题出在哪里。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:36:37.410

您的字符串值周围缺少单引号：

```
$subject = mysql_real_escape_string($_POST['topic_subject']);
$topic_id = (is_numeric($_GET['id']) ? $_GET['id'] : 'NULL');
$sql = "
    UPDATE topics
    SET topic_subject = '$subject'
    WHERE topic_id = $topic_id
"; 
```

我的代码还假设`topic_id`是一`int`列，所以我正在检查该值是否为数字而不是转义它。

# java - 用数字命名类的新实例

> ID：10367633
> 
> 赞同：2
> 
> 时间：2012-04-28T21:21:30.340
> 
> 标签：java

我正在尝试创建一个类的新实例，我想这样命名它们

vektor1 vektor2 vektor3 等等。作为计算源，我想使用属于 for 循环的 i 的值。这是我为此使用的 for 循环

```
for(int i=0; i<5;i++){
        System.out.println ("Bitte geben sie die erste Koordinat der "+(i+1)+". Vektor ein");
        double k1=scan.nextDouble();

        System.out.println ("Bitte geben sie die zweite Koordinat der "+(i+1)+". Vektor ein");
        double k2=scan.nextDouble();

        System.out.println ("Bitte geben sie die dritte Koordinat der "+(i+1)+". Vektor ein");
        double k3=scan.nextDouble();

        vektor.add(new Vektor3Dcomparable(k1,k2,k3));
    } 
```

在这里，我想在将其添加到 ArrayList 之前命名类的实例。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:24:27.213

你需要区分*变量*和*对象*。变量有名字——对象通常没有。`double`values 当然没有，除非你`Vektor3Dcomparable`有一个特定的名字，否则这里没有什么可做的。

假设`vector`事先是空的，您已经在*某种程度上*将引用与计数器相关联 - 之后您可以使用：

```
Vektor3Dcomparable vektor = vektor.get(2); 
```

例如。如果您可以更清楚地了解您想用这些“名称”做什么，我们可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:19:14.827

进行`Vektor3Dcomparable`覆盖`Object.toString()`以返回所需的对象名称。

```
@Override public String toString() { 
  return "Mein 3D Vektor Nummer " + ind; 
} 
```

如果要分配特定名称，则必须将该名称（或索引号，在您的情况下）传递给构造函数，以及您的`k1, k2, k3`.

```
 final double[] k = new double[3];
  for (int i=0; i<5; i++) {
    for (int j = 0; j < 3; j++) {
      System.out.println ("Bitte geben sie die " + 
          (j == 1? "ers" : j == 2? "zwei" : "drit") +
          "te Koordinat der "+(i+1)+". Vektor ein");
      k[j] = scan.nextDouble();
    }
    vektor.add(new Vektor3Dcomparable(k[0], k[1], k[2], i));
  } 
```

# objective-c - 目标c中的（NSString）*名称和（NSString *）名称有什么区别

> ID：10367634
> 
> 赞同：2
> 
> 时间：2012-04-28T21:21:35.930
> 
> 标签：objective-c, nsstring

我不明白何时使用（NSString *）名称以及何时使用（NSString）*名称。我希望有一个人可以帮助我/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:26:10.383

括号构成强制转换运算符。也就是说`(NSString*) name`，编译器应该解释`name`为指向 NSString 的指针；而`(NSString) *name`意味着编译器应该将取消引用的值（即值`name`指向的值）解释为 NSString。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T21:26:18.640

您永远不需要使用`(NSString)*name`. `NSString *`是一种类型：指向`NSString`. 所以在这样的方法声明中：

```
- (NSString *)capitalisedString: (NSString *)string 
```

每次`(NSString *)`出现都表示“后面的东西有类型`NSString *`”。第一个表示方法的返回值是一个`NSString`实例，第二个表示参数的类型`string`是一个`NSString`实例。

此讨论也适用于强制转换，即当您告诉编译器将变量视为特定类型时。因为`NSString *`是一个类型，你会这样转换：

```
id object = //...
NSString *myString = (NSString *)object; 
```

# ruby-on-rails - ruby on rails 解析字符串并将结果输出到现有表中

> ID：10367635
> 
> 赞同：0
> 
> 时间：2012-04-28T21:21:41.167
> 
> 标签：ruby-on-rails, string

我有一个包含名称的文本，每个名称都写在两个撇号之间。例如：

```
'James' is the best player we had since 'Jane' left 
```

我需要从文本中提取所有这些名称并将它们插入到我的数据库中的一列中。我是 Rails 的新手，我想知道如何最好地解析这段文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:31:23.857

```
"'James' is the best player we had since 'Jane' left".scan(/\'(\w+)\'/).flatten 
#=> ["James", "Jane"] 
```

# spring-mvc - 我应该使用哪个 GUI 框架/组件。我正在使用带有 Java 的 Spring MVC 并打算创建 Web 应用程序

> ID：10367636
> 
> 赞同：0
> 
> 时间：2012-04-28T21:21:44.640
> 
> 标签：spring-mvc

我应该使用哪个 GUI 框架/组件。我正在使用带有 Java 的 Spring MVC 并打算创建 Web 应用程序

我一直在寻找类似于 primefaces 的东西。但似乎primefaces 只适用于spring web flow。我相信只能使用 spring web flow 创建特定类别的应用程序，这可能是使用带有 spring 的 primefaces 的负面因素。

我可以使用 jquery，但 jquery 在快速创建网页方面不如 primefaces...

谢谢你们的帮助。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:53:14.517

我建议您将 Thymeleaf [ [http://www.thymeleaf.org](http://www.thymeleaf.org) ] 视为模板引擎，与单纯的 jQuery 或（如您所说的您认为它有点太简单）jQuery + 主干.js （即一个 javascript MVC 框架）[ [http://documentcloud.github.com/backbone/](http://documentcloud.github.com/backbone/) ]

客户端将被这两个 js 库很好地覆盖，并且 thymeleaf 的 javascript 内联功能会稍微简化集成......

# android - 连接到 Ajax 聊天的 Android 应用

> ID：10367639
> 
> 赞同：0
> 
> 时间：2012-04-28T21:21:55.630
> 
> 标签：android, ajax, chat

我想创建（或至少尝试）一个连接到我在论坛上的聊天的 Android 应用程序，以便我的用户能够在移动设备上聊天。有人可以为我指出正确的方向以获取有关如何操作的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:47:31.540

我假设您需要 Ajax，因为您已经拥有执行此操作的 html/css/js 代码。在这种情况下，通过[PhoneGap](https://build.phonegap.com/apps)输入您的Web 代码，您就有了一个可以满足您需求的Android 应用程序。

# c# - 使用运行时文件名 P/调用本机 DLL

> ID：10367641
> 
> 赞同：2
> 
> 时间：2012-04-28T21:22:10.273
> 
> 标签：c#, pinvoke, dllimport

出于版本控制的原因，能够在本机 C++ dll 上使用 p/invoke 将是有益的，其文件名将在运行时确定，如下所示：

```
[DllImport(myDllFilename)]
private static extern void MyInvokedMethod(); 
```

不幸`[DllImport]`的是，它是一个属性，需要一个常量表达式。是否有任何其他选项可以解决此错误？

我知道我可以在不同的文件夹中使用相同名称的文件并在运行时加载正确的文件，但是能够使用不同名称的文件对于我的情况来说是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:23:50.080

没有解决方法。您将需要使用 LoadLibrary 和 GetProcAddress。这真的一点都不好玩，所以如果可行的话，我会尽量避免那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:26:22.493

要实现您想要的，您需要 PInvoke 几件事（`LoadLibrary`并且`GetProcAddress`- 请参阅下面的链接）......它被称为“后期绑定本机代码”......使用它并不容易/推荐，但它是可能的......

一些带有解释、示例和源代码的相关链接：

*   [http://blogs.msdn.com/b/junfeng/archive/2004/07/14/181932.aspx](http://blogs.msdn.com/b/junfeng/archive/2004/07/14/181932.aspx)
*   [http://www.codeproject.com/KB/cs/dyninvok.aspx](http://www.codeproject.com/KB/cs/dyninvok.aspx)
*   [http://pinvoke.net/default.aspx/kernel32/GetPROcAddress.html](http://pinvoke.net/default.aspx/kernel32/GetPRocAddress.html)
*   [http://www.pinvoke.net/default.aspx/kernel32.loadlibrary](http://www.pinvoke.net/default.aspx/kernel32.loadlibrary)

# asp.net-mvc-3 - 无法以 mvc 模式加载远程网页

> ID：10367642
> 
> 赞同：0
> 
> 时间：2012-04-28T21:22:12.607
> 
> 标签：asp.net-mvc-3, jquery

我可以成功地将本地页面加载到模式预览中：

```
 $('.preview-button').click(function () {
                 $('#dialog').dialog('open');
                 $('#dialog').load("@Url.Action("Index", "LatestNews", new {area = "Home"})");
             }); 
```

但我无法加载远程网页，例如“http://www.example.com/home/php”。此外，当模态页面的嵌入内容中的链接被点击时，用户完全离开了模态。

1.  如何在 mvc (jquery modal) 中嵌入远程网页？
2.  当用户单击模态中嵌入的远程页面中的链接时，如何使用户保持在模态中？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:06:24.363

```
<script>
$('.preview-button').click(function () {
$('#dialog').dialog('open').html('<iframe id="modalIframeId" width="100%" height="100%" marginWidth="0"
 marginHeight="0" frameBorder="0" scrolling="auto" />');
 $("#modalIframeId").attr("src","http://www.blahblahblah.com/default.asp");
                return false;
            });
        });
     </script>

<div id="dialog" title="Dialog Title" /> 
```

# php - 尝试对多列全文 mysql 搜索的结果进行排序

> ID：10367646
> 
> 赞同：0
> 
> 时间：2012-04-28T21:22:51.347
> 
> 标签：php, mysql, sql, database

我正在使用一个有 10 列的表。第一个是一个宽泛的类别，接下来的 9 个是随着您的上升而变得更加具体的概念。所有行都有一个类别和至少 1 号属性，但从那里开始可能是空白的。

我正在尝试编写一个查询，该查询首先按类别中的结果数分组，然后按可能的最高属性对关键字全文搜索结果进行排序。因此，具有 30 个实例的猫将排在具有 10 个实例的猫之前。但是在该类别中，具有第 9 个属性的所有结果都将位于第 9 列为空的结果之前的顶部。

下面是两个主要的代码，显示我在这方面的位置：

```
$sql = "选择 *,
        MATCH (SubCat09Name) 反对 ('".$keyword."') AS res9,
        MATCH (SubCat08Name) 反对 ('".$keyword."') AS res8,
        MATCH (SubCat07Name) 反对 ('".$keyword."') AS res7,
        MATCH (SubCat06Name) 反对 ('".$keyword."') AS res6,
        MATCH (SubCat05Name) 反对 ('".$keyword."') AS res5,
        MATCH (SubCat04Name) 反对 ('".$keyword."') AS res4,
        MATCH (SubCat03Name) 反对 ('".$keyword."') AS res3,
        MATCH (SubCat02Name) 反对 ('".$keyword."') AS res2,
        MATCH (SubCat01Name) 反对 ('".$keyword."') AS res1,
        MATCH (Category) 反对 ('".$keyword."') AS res15
        来自材料分类
    在哪里
     MATCH (SubCat09Name, SubCat08Name, SubCat07Name, SubCat06Name, SubCat05Name, SubCat04Name, SubCat03Name, SubCat02Name, SubCat01Name, Category) 反对 ('".$keyword." IN BOOLEAN MODE')
        按 res15 DESC、res9 DESC、res8 DESC、res7 DESC、res6 DESC、res5 DESC、res4 DESC、id DESC LIMIT 25000 排序";

```

并且：

```
    foreach($mvres 作为 $res){
    if(strlen($res->Category) > 1 || strlen($res->SubCat01Name) > 1 || strlen($res->SubCat02Name) > 1 || strlen($res->SubCat03Name) > 1 || strlen($res->SubCat04Name) > 1 || strlen($res->SubCat05Name) > 1 || strlen($res->SubCat06Name) > 1 || strlen($res->SubCat07Name) > 1 || strlen( $res->SubCat08Name) > 1 || strlen($res->SubCat09Name) > 1){

    if($catHead != $res->Category){$response .= '';}
    if($catHead != $res->Category){$response .= 'id.'" class="categoryHead">'.$res->Category.' ';}

    $response .= '';
    $response .= 'id.'" class="taxID">id: id.'">'.$res->id.'';
    if(strlen($res->SubCat01Name) > 0){$response .= ''.$res->Category.'';}
    if(strlen($res->SubCat09Name) > 0){$response .= '09:'.$res->SubCat09Name.'';}
    if(strlen($res->SubCat08Name) > 0){$response .= '08:'.$res->SubCat08Name.'';}
    if(strlen($res->SubCat07Name) > 0){$response .= '07:'.$res->SubCat07Name.'';}
    if(strlen($res->SubCat06Name) > 0){$response .= '06:'.$res->SubCat06Name.'';}
    if(strlen($res->SubCat05Name) > 0){$response .= ' 05:'.$res->SubCat05Name.'';}
    if(strlen($res->SubCat04Name) > 0){$response .= ' 04:'.$res->SubCat04Name.'';}
    if(strlen($res->SubCat03Name) > 0){$response .= ' 03:'.$res->SubCat03Name.'';}
    if(strlen($res->SubCat02Name) > 0){$response .= '02:'.$res->SubCat02Name.'';}
    if(strlen($res->SubCat01Name) > 0){$response .= ' 01:'.$res->SubCat01Name.'';}
    $response .= '';

    $catHead = $res->类别；
    if($catHead != $mvres[$i+1]->Category){$response .= '';}
    $i++;
    }
    }

```

我知道这个数据库设计太简陋了。所以这也是我的问题的一部分；打破类别表并索引原始表是否值得？它有 84,000 行，这就是我得到它的方式。

请任何专家的见解非常感谢！

此外，我发现添加`+`or`-`到 my`$keyword`并没有所需的布尔效果。我也希望它能够工作......

* * *

更新：

好吧，我对以下内容感到非常满意：

```
SELECT * FROM stufftaxonomy
    在哪里
     匹配（类别）反对（'".$keyword."' 在布尔模式下）||
     MATCH (SubCat01Name) 反对 ('".$keyword."' 在布尔模式下) ||
     MATCH (SubCat02Name) 反对 ('".$keyword."' 在布尔模式下) ||
     MATCH (SubCat03Name) 反对 ('".$keyword."' 在布尔模式下) ||
     MATCH (SubCat04Name) 反对 ('".$keyword."' 在布尔模式下) ||
     MATCH (SubCat05Name) 反对 ('".$keyword."' 在布尔模式下) ||
     MATCH (SubCat06Name) 反对 ('".$keyword."' 在布尔模式下) ||
     MATCH (SubCat07Name) 反对 ('".$keyword."' 在布尔模式下) ||
     MATCH (SubCat08Name) 反对 ('".$keyword."' 在布尔模式下) ||
     MATCH (SubCat09Name) 反对 ('".$keyword."' 在布尔模式下)
        按类别 ASC 排序，
        长度(SubCat09Name) + 长度(SubCat08Name) + 长度(SubCat07Name) + 长度(SubCat06Name) + 长度(SubCat05Name) + 长度(SubCat04Name) + 长度(SubCat03Name) + 长度(SubCat02Name) + 长度(SubCat01Name) DESC，
        SubCat09Name ASC, SubCat08Name ASC, SubCat07Name ASC, SubCat06Name ASC, SubCat05Name ASC, SubCat04Name ASC, SubCat03Name ASC, SubCat02Name ASC, SubCat01Name ASC
        限制 25000

```

如果单级属性按字母顺序排列，我会更高兴。

# facebook - Facebook 页面爬虫/访问令牌

> ID：10367647
> 
> 赞同：1
> 
> 时间：2012-04-28T21:22:52.887
> 
> 标签：facebook, api, authorization

我很清楚这个话题已经被非常深入地讨论过（我一整天都阅读了很多）。

不过，FB 允许我为非商业、非公立研究型大学项目创建前端爬虫的可能性有多大？

我的爬虫应该反复查找数量非常有限的特定公共粉丝页面，并收集匿名数据，例如粉丝数量、状态更新及其喜欢的数量和评论数量。

我想展示的是媒体页面中的哪些主题是“喜欢”和讨论最多的，以及随着时间的推移如何发展。我知道 FB 的受限 TOS。感谢您对此的意见。

第二个问题涉及技术方法/授权：读取粉丝页面的粉丝数量、状态更新和每个人的点赞数——我什至可以将 API/OpenGraph 用于这样的爬虫吗？我认为要阅读页面墙，您需要不惜一切代价获得访问令牌，因此我想通过应用程序实现自动“爬虫”是不可能的（因为应用程序只对用户的操作做出反应，并且不能像 cron 作业一样行事） ?

如您所见，我对 FB 开发和逻辑还很陌生。非常感谢您的专业知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:45:24.333

如果您主要针对公共页面，那么您应该没问题。

您需要有一个 facebook 应用程序，然后您可以从您的程序[中作为应用程序进行身份验证](http://developers.facebook.com/docs/authentication/applications/)。您将获得一个应用令牌，您应该可以使用它来抓取公共页面数据。

如果您检查[页面对象](http://developers.facebook.com/docs/reference/api/page/)的文档，您将在表（字段和连接）中看到*权限*列中的大部分内容是“无访问令牌或用户 access_token”或“任何有效的 access_token 或用户 access_token”，如果你有应用令牌，你很好。

另外，我认为您会对此感兴趣，Page 对象具有“talking_about_count”字段。

所以，是的，你可以做到，至少大部分都可以。至于 TOS，由于所有这些都完全可以，并且直接来自他们的官方文档，所以没有问题。

# c# - WCF 回调实现

> ID：10367648
> 
> 赞同：-6
> 
> 时间：2012-04-28T21:22:58.740
> 
> 标签：c#, wcf, wcf-callbacks

我很难理解回调在使我们的客户也成为服务以及我们的服务也成为客户的基本方式上的优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:42:41.557

我可以给你一个很大的优势。我们有一个涉及客户端 (WPF) 和 Windows 服务的应用程序。通常，客户端调用服务（通过 WCF）来检索和/或保存数据等。但是，有时我们希望服务向客户端发送消息，以通知客户端它需要执行某个操作（如关机或向用户显示一条消息 - 可以是任何东西）。回调是完美的。

# ruby-on-rails - 指南针未在 Rails 3.2 中导入扩展

> ID：10367649
> 
> 赞同：1
> 
> 时间：2012-04-28T21:23:00.060
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, compass-sass

我正在尝试在当前的 sass 文件中导入指南针扩展名。

```
# /app/assets/stylesheets/application/base.css.sass
@import "compass/css3/border-radius" 
```

问题是刷新页面时出现以下错误。

```
Completed 500 Internal Server Error in 161ms

ActionView::Template::Error (File to import not found or unreadable: compass/css3/border-radius.
Load path:     Sass::Rails::Importer(/Users/user/Sites/site/app/assets/stylesheets/application/base.css.sass)
  (in /Users/user/Sites/site/app/assets/stylesheets/application/base.css.sass)): 
```

出于某种原因，它没有获得指南针扩展的路径。在 Gemfile 我有

```
gem 'compass'
gem 'sass-rails',   '~> 3.2.3'
gem 'haml-rails' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:49:34.327

嗯有几件事：

1）我相信 compass-rails 是最新的指南针 gem，在你的 gemfile 中试试这个：

```
group :assets do
  gem 'sass-rails'
  gem 'compass-rails'
  # other gems like uglifier and coffee go here as well
end 
```

2）我在我的项目中使用圆角并且没有问题，如果上面没有解决它，请尝试导入所有的css3 mixin。

```
@import "compass/css3"; 
```

有这些运气吗？

# jquery - joomla 模块中的手风琴，用于从 jumi 插入的表单

> ID：10367650
> 
> 赞同：0
> 
> 时间：2012-04-28T21:23:02.523
> 
> 标签：jquery, joomla, module, mootools, accordion

这个我有点麻烦。手风琴的插件似乎都是文章。我有一个相当简单的表单，它包含在一个 .php 文件中，该文件通过 jumi 引用包含在模块中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:16:54.213

在accordian 文章中，只需添加该模块的位置（别名）。假设我们有一个带有 alias 的 Jumi 模块`foo`。只需在文章编辑器中输入：

```
{loadposition foo} 
```

# java - Java - 在已经排序的列表上调用 sort() 是 O(1) 操作吗？

> ID：10367651
> 
> 赞同：6
> 
> 时间：2012-04-28T21:23:04.473
> 
> 标签：java, sorting

`Collections.sort(list)`检查是否已经`list`排序，或者是否出于其他原因可能是 O(1)？或者，在调用/向列表中添加元素时对标志*进行排序*并将其设置为/
是个好主意吗？*`true``false``sort()`*

 ** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T21:26:56.993

如何不查看列表就确定是否已排序？不会的`O(1)`。确定列表是否已排序至少需要`O(n)`.

这意味着 If`Collections.sort`确实费心检查列表是否首先排序，每个排序操作平均需要`O(n) + O(n log n)`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-28T21:36:16.960

事实上，在 Java7 中，Java 已经从合并排序切换到[TimSort](http://en.wikipedia.org/wiki/Timsort)（以首先为 cpython 实现它的 python 开发人员 Tim Peters 命名）来处理一些排序任务。

虽然不是 O(1)，但使用 TimSort 对已排序或​​部分排序的列表进行排序比对完全随机数据集进行排序更有效（因为后者没有比`O(n log n)`比较排序更有效的方法，但对于不是随机数据）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T21:26:46.563

不可能是 O(1)，你无法检查集合的排序是否比 O(n) 快。有一面旗帜应该没问题，但如果不知道你到底在做什么，就很难确定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-28T21:28:00.357

一般来说，对已经排序的列表进行排序并不会使其更快（除了像冒泡排序这样的简单排序）在某些情况下，预排序会更慢。

在 Collections.sort() 的情况下，对已排序列表进行排序并不快。*

# r - 在 R 中结合旋转和未旋转图

> ID：10367655
> 
> 赞同：1
> 
> 时间：2012-04-28T21:23:39.950
> 
> 标签：r, lattice

我正在尝试在 R 中组合两个图表（使用格子），一个箱线图和一个条形图。我希望盒子和栏都是垂直的。对于条形图，我会使用该`horizontal=FALSE`选项。但是对于箱线图，我知道我不能使用该选项。在[这篇文章](https://stackoverflow.com/questions/8053360/vertical-box-percentile-plot-with-lattice-panel-bpplot)中，我将使用水平箱线图并将其旋转到垂直。

因此，我没有想要组合的一张旋转图和一张未旋转图。这是我尝试过的：

```
library(lattice)

mydata <- data.frame(
      methods = c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),
      savings = c(38.1677115678,40.0271480111,3.0658967834,8.55162576,54.5599157619,52.5120636113,6.0234897727,8.1064331259,63.9865435108,64.7867073871,3.8590732507,7.7348316433,49.7059967478,53.8979070884,2.497892375)
      )
attach(mydata)
png("test.png", width=800, height=600)

h1 = barchart( savings ~ methods, data=mydata, horizontal=FALSE,
               ylab = "", main = "Predicted Savings",
               scales=list(y=list(labels=c("","","","","","","","","","","","","",""),tick.number=10))
             )

require(grid)
grid.newpage()
pushviewport(viewport(angle = 90, name = "VP"))
h2 =  bwplot(savings, xlim=c(0,100),
      xlab=list(label="predicted savings", fontsize=14),
      scales = list(x = list(tick.number=10)), draw.in = "VP"
      )
print( h2,newpage=FALSE, position=c(0.15, 0.95, 0.85, 1.2), more=TRUE)
print(h1, newpage=FALSE, position=c(0.20, 0.00, 1.00, 1.0), more=TRUE) 
```

这是结果。我的条形图也旋转了。我想，因为我在绘制条形图时不使用 `draw.in = "VP"`选项，所以我不会让它旋转。但显然我错了。有没有办法让下面的条形图不旋转。

![在此处输入图像描述](../Images/c0d9dc0c1f536bf27ecfcea0caede08c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:36:39.547

目前，您正在旋转的视口中绘制这两个图。您需要在绘制 h1 之前使用 upViewport()，或者在推送视口之前简单地绘制它：

```
grid.newpage()
print(h1, newpage=FALSE, position=c(0.20, 0.00, 1.00, 1.0), more=TRUE)
pushViewport(viewport(angle = 90, name = "VP"))
h2 =  bwplot(savings, xlim=c(0,100),
      xlab=list(label="predicted savings", fontsize=14),
      scales = list(x = list(tick.number=10)), draw.in = "VP"
      )
print( h2,newpage=FALSE, position=c(0.15, 0.95, 0.85, 1.2), more=TRUE) 
```

# java - Servlet 在 Mac 上使用美国国际键盘获得奇怪的字符

> ID：10367661
> 
> 赞同：4
> 
> 时间：2012-04-28T21:24:30.647
> 
> 标签：java, servlets, character-encoding, special-characters

我有一个简单的表格，我可以在其中输入一些字符。这些字符被发送到执行 getBytes 并打印字节的 servlet。“ã”的正确 UTF-8 字节是 -61 和 -93，但我得到 -52 和 -93。:(

我尝试了一切来理解和解决这个问题，但没有任何效果。我机器上的所有东西都应该是 UTF-8，所以我怀疑这与我使用了 20 年的美国国际键盘有关。

有没有聪明的灵魂知道-52和-93来自哪里？

固定在码头上：请参阅下面的答案。

Tomcat 上的故障：[如何让 tomcat 从我的 Mac 键盘上理解 MacRoman (x-mac-roman) 字符集？](https://stackoverflow.com/questions/10369014/how-to-get-tomcat-to-understand-macroman-x-mac-roman-charset-from-my-mac-keybo)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T21:37:10.773

那就是[Mac OS 的罗马字符编码](http://en.wikipedia.org/wiki/Mac_OS_Roman)。（0xBB == -52。）

需要检查的一些事项：

*   `getBytes(string, "UTF-8")`和`new String(bytes, "UTF-8")`。
*   表单应该以 UTF-8: 发送`response.setContentType("text/html; charset="UTF-8");`。在 JSP 中`<%@page pageEncoding="UTF-8"%>`
*   `<form action="..." accept-charset="UTF-8">`

* * *

***由于所有这些都没有帮助：***

在您的 Web 应用程序 (web-xml) 中设置[请求过滤。](http://wiki.apache.org/cocoon/RequestParameterEncoding)

* * *

***pom.xml 中的编码：***

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>...</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
        <encoding>${project.build.sourceEncoding}</encoding>
    </configuration>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>...</version>
    <configuration>
        <encoding>${project.build.sourceEncoding}</encoding>
    </configuration>
</plugin>
...
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T23:33:14.517

好的，经过 8 个小时（严重！）后，看起来让这个正常工作的唯一方法是：

问题之一是：bad maven build encoding 类文件的编译。

```
export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8
mvn clean install 
```

和：

```
 <%@page pageEncoding="UTF-8" %> 
```

现在：

无法在 pom.xml 中传递后一个选项。

这是一个悬而未决的答案：[为 clojure 源文件启用 UTF-8 编码](https://stackoverflow.com/questions/1431008/enabling-utf-8-encoding-for-clojure-source-files)

# javascript - 如何从特定节点创建 DOMSelection 对象？

> ID：10367662
> 
> 赞同：0
> 
> 时间：2012-04-28T21:24:34.380
> 
> 标签：javascript, webkit, dom-selection

我的 javascript 不是那么好，所以我只能希望这是有道理的。我想创建一个 DOMSelection 对象，就像从

```
window.getSelection() 
```

从节点的点击。所以可以说我有这样的jQuery监听器设置：

```
$("#target").click(function() {
    var sel = createSelectionFromNode(this);
}); 
```

我只希望范围是从节点的开头到节点的结尾。是否有捷径可寻？我专门找WebKit兼容的解决方案，可以忽略IE。谢谢你的帮助。

示例：http: [//jsfiddle.net/8j4Bf/](http://jsfiddle.net/8j4Bf/)

在示例中，单击文本应返回一个 DOMSelection 对象，如：

```
DOMSelection
anchorNode: Text
    attributes: null
    baseURI: "http://jsfiddle.net/8j4Bf/"
    childNodes: NodeList[0]
    data: "HTML"
    firstChild: null
    lastChild: null
    length: 4
    localName: null
    namespaceURI: null
    nextSibling: null
    nodeName: "#text"
    nodeType: 3
    nodeValue: "HTML"
    ownerDocument: HTMLDocument
    parentElement: HTMLSpanElement
    parentNode: HTMLSpanElement
    prefix: null
    previousSibling: null
    textContent: "HTML"
    wholeText: "HTML"
    __proto__: Text
anchorOffset: 0
baseNode: Text
baseOffset: 0
extentNode: Text
extentOffset: 0
focusNode: Text
    attributes: null
    baseURI: "http://jsfiddle.net/8j4Bf/"
    childNodes: NodeList[0]
    data: "HTML"
    firstChild: null
    lastChild: null
    length: 4
    localName: null
    namespaceURI: null
    nextSibling: null
    nodeName: "#text"
    nodeType: 3
    nodeValue: "HTML"
    ownerDocument: HTMLDocument
    parentElement: HTMLSpanElement
    parentNode: HTMLSpanElement
    prefix: null
    previousSibling: null
    textContent: "HTML"
    wholeText: "HTML"
    __proto__: Text
focusOffset: 0
isCollapsed: true
rangeCount: 1
type: "Caret" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:33:21.003

你在寻找类似 document.getSelection() 的东西吗？我有点困惑，所以我提前道歉。

例子：

[http://jsfiddle.net/8j4Bf/1/](http://jsfiddle.net/8j4Bf/1/)

[https://developer.mozilla.org/en/DOM/document.getSelection](https://developer.mozilla.org/en/DOM/document.getSelection)

# c - 指针地址值的变化

> ID：10367663
> 
> 赞同：1
> 
> 时间：2012-04-28T21:24:43.593
> 
> 标签：c, pointers

我测试了一个写在下面的小程序。我的问题是为什么指向值的指针和指向第一个指针的指针之间存在 12 个字节的差异。但是如果您查看其他指针地址，则只有 8 个字节的差异每次。我多次执行这个程序，总是看到这个差异。谁能解释我可能是什么原因？提前谢谢..

```
#include<stdio.h>
#include<stdlib.h>

int main(void)
{
        int val;
        int *ptr;
        int **ptrptr;
        int ***ptrptrptr;
        int ****ptrptrptrptr;
        int *****ptrptrptrptrptr;

        val=10;
        ptr=&val;
        ptrptr=&ptr;
        ptrptrptr=&ptrptr;
        ptrptrptrptr=&ptrptrptr;
        ptrptrptrptrptr=&ptrptrptrptr;

        printf("Value-%d\n",val);
        printf("Value address - %d\n",ptr);
        printf("Pointer address - %d\n",ptrptr);
        printf("Pointer Pointer Address -%d\n",ptrptrptr);
        printf("Pointer Pointer Pointer Address -%d\n",ptrptrptrptr);
        printf("Pointer Pointer Pointer Pointer Address -%d\n",ptrptrptrptrptr);

        return 0;
} 
```

结果是：

```
Value-10
Value address - -1308521884
Pointer address - -1308521896
Pointer Pointer Address --1308521904
Pointer Pointer Pointer Address --1308521912
Pointer Pointer Pointer Pointer Address --1308521920 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T21:29:10.513

这只是您的编译器选择的堆栈布局，可能是出于对齐原因。事情很可能仍然适用于其他布局。

旁注，您应该使用`%p`打印地址。

# iphone - 如何告诉您的 viewController 进行更新并将其传递给具有更新细节的对象？

> ID：10367670
> 
> 赞同：1
> 
> 时间：2012-04-28T21:26:30.560
> 
> 标签：iphone, objective-c, ios, xcode

我有面向对象编程的一般工作知识，我目前正在尝试使用带有故事板的 Xcode 4.2 在 Objective C 中创建一个交互式小说程序。

我有一个实例化页面对象的 storyController 类和一个需要显示页面的 viewController 类。我的基本问题是我的 storyController 告诉 viewController 更新它的文本以显示新页面对象的文本的最佳方法。我的直觉告诉我，我的 storyController 需要调用 viewController 上的一个方法并传递给它一个页面对象。但是，我不确定如何引用视图控制器，因为它似乎是由情节提要自动创建和链接的（我没有看到 appDelegate 中实例化的 viewController）。

我读过这篇文章：[http](http://www.iphonedevsdk.com/forum/iphone-sdk-development/54859-sharing-data-between-view-controllers-other-objects.html) ://www.iphonedevsdk.com/forum/iphone-sdk-development/54859-sharing-data-between-view-controllers-other-objects.html ，它似乎解决了这个问题。我可以在我的 appDelegate 上创建一个共享对象，并使用 KVN 或 NSNotification 告诉视图控制器检查它。

我也一直在阅读代表和协议作为可能的解决方案。

因此，考虑到这些可能不同的方法，最好告诉我的 viewController 更新自身并将包含更新的对象传递给它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:30:57.130

我建议查看[UIPageViewController 类](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)，这可能会为您完成很多繁重的工作，具体取决于您的应用程序的具体情况。这个类本质上是一个包含多个viewControllers的控制器类。每个托管的 viewController 本质上都成为您书中的一个“页面”。

[这是一个使用 UIPageViewController 的教程。](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

如果这种方法不适用于您的应用程序，我仍然建议为您的书的每个“页面”使用单独的 viewController 实例，并使用 segues 处理页面之间的转换。

# visual-studio - 链接到 VS 中的静态 0MQ 库

> ID：10367678
> 
> 赞同：12
> 
> 时间：2012-04-28T21:27:16.447
> 
> 标签：visual-studio, static-libraries, static-linking, zeromq

这可能是一个 Visual Studio 问题，最重要的是......
我正在尝试使用 VS10 和 ZeroMQ 2.2.0构建[一个 0MQ C++ 示例。](http://zguide.zeromq.org/cpp:wuserver)
我下载了[Windows 源代码](http://download.zeromq.org/zeromq-2.2.0.zip)并尝试按照[这些说明](http://lists.zeromq.org/pipermail/zeromq-dev/2011-September/013150.html)静态构建 0MQ。具体来说：

*   切换到发布
*   对于解决方案中的所有 7 个项目：
    *   设置`General\Configuration Type`为`Static library (.lib)`
    *   设置`C/C++\Code Generation\Runtime Library`为`Multi-threaded (/MT)`
    *   添加`ZMQ_STATIC`到`C/C++\Preprocessor\Preprocessor Definitions`
*   更新了`zmq.h`，`zmq_utils.h`因此如果`_MSC_VER`和`ZMQ_STATIC`被定义，那么`DLL_EXPORT`也将被定义

此时 0MQ 似乎构建良好。

*   创建了一个空的控制台项目：
    *   切换到发布
    *   使用上面链接的示例添加了一个 cpp 文件
        *   更改`random`为`rand`, `srandom`to`srand`和`snprintf`to`_snprintf`
    *   设置`C/C++\Code Generation\Runtime Library`为`Multi-threaded (/MT)`
    *   将`...\zeromq-2.2.0\include`文件夹添加到`C/C++\General\Additional Include Directories`
    *   添加`...\zeromq-2.2.0\builds\msvc\Release\*.lib`到`Linker\Input\Additional Dependencies`

但是我仍然收到以下链接错误：

```
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_bind
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_close
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_errno
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_init
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_msg_data
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_strerror
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_socket
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_msg_init_size
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_term
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_msg_close
1>zmqexp.obj : error LNK2001: unresolved external symbol __imp__zmq_send 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-29T12:41:01.063

您也应该`ZMQ_STATIC`在`C/C++\Preprocessor\Preprocessor Definitions`“空控制台项目”中添加。否则，当您编译应用程序时，`ZMQ_EXPORT`in`zmq.h`被定义为`__declspec(dllimport)`，因此，MSVC 会查找`__imp__zmq_*`符号而不是`zmq_*`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-30T18:37:12.543

我有类似的错误 - 不是在尝试静态链接时，而是只是尝试创建一个 ZMQ 项目并为 dll 链接 .lib 'stubs'。

就我而言，这是因为我试图将 64 位库链接到 32 位项目中。我下载了错误的版本。当我得到正确的，即 x86 而不是 x64 时，它就起作用了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T07:26:17.440

静态链接对您来说很重要吗？[如果没有，您可以在此处](https://stackoverflow.com/questions/6719699/linker-problem-with-zeromq-and-visual-c-2008)尝试 elnino_9 的第二个答案。详细阐述 elnino_9 的答案：

*   下载[源代码](http://download.zeromq.org/zeromq-2.2.0.zip)并解压缩到某个本地文件夹（比如 C:\dev\zeromq）。
*   转到 C:\dev\zeromq-2.2.0\builds\msvc 并打开 msvc.sln 解决方案。MS2010 将从 VS2008 升级到 VS2010 项目
*   构建所有项目。
*   构建应生成以下两个文件：
    *   C:\dev\zeromq\lib\libzmq.lib - 这是您需要在项目的链接器选项中引用的内容
    *   C:\dev\zeromq_boaz\builds\msvc\Release\libzmq.dll - 您需要将其复制到与项目可执行文件相同的文件夹才能运行它（如果您的构建配置为“调试”，则路径将是 C:\dev\zeromq\builds\msvc\ *Debug* \libzmq.dll)
*   创建您的解决方案和项目。请执行下列操作：
    *   在解决方案资源管理器中，右键单击您的项目，然后选择“属性”（在最底部）。
    *   导航到“C/C++ --> 常规 --> 附加包含目录”并添加 C:\dev\zeromq\include。这将引用 0MQ 的头文件。
    *   导航到“链接器-->输入-->附加依赖项”并将完整路径添加到上一步中的“libzmq.dll”文件。
    *   构建您的项目 - 现在应该没有错误了。
*   将“libzmq.dll”复制到与您的可执行文件相同的文件夹中——您的项目现在应该可以运行了。

一些评论：

*   我不确定您为什么需要引用“libzmq.lib”文件。可执行文件不需要它（您可以删除它，它仍然会运行，因为必要的逻辑驻留在 dll 中）。有人可以解释一下吗？
*   请注意示例中针对 Windows 用户的一个警告 - 第二个绑定语句 ( `publisher.bind("ipc://weather.ipc");`) 将导致异常。正如[这里](http://zguide.zeromq.org/page:all#Unicast-Transports)所解释的（虽然在细则中），Windows 不支持进程间传输。

**编辑**

我认为我的第一条评论的答案可以在[MSDN](http://msdn.microsoft.com/en-us/library/253b8k2c%28v=vs.100%29.aspx)中找到：

> “在编译或汇编调用可执行文件的源代码时，DLL 函数调用会在目标代码中生成一个外部函数引用。要解析这个外部引用，应用程序必须链接到由DLL 的制造商。”

# visual-studio-2010 - 我可以在 Visual Studio 2010 中使用吗？

> ID：10367681
> 
> 赞同：0
> 
> 时间：2012-04-28T21:27:30.073
> 
> 标签：visual-studio-2010, xhtml, doctype, html-validation

我正在研究 asp.net 中的项目，并且在其中使用 javascript。我需要在 javascript 代码块中使用 getComputedStyle，但在 Visual Studio 2010 中是不可能的。为什么？我试图`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 4.01 Transitional//EN" "http://w3.org/TR/html4/loose.dtd"/>`在文件中包含，但仍然无法使用 getComputedStyle。在 Visual Studio 中，Tools->Options->Text Editor->HTML->Validation->Target 中有一个选项，我可以选择 HTML 4.01，但它并没有解决我的问题。这个问题与 javascript 或 DOCTYPE 版本有关吗？

我应该怎么办？

# javascript - Javascript：在对象文字的函数内部定义的事件侦听器使代码失效

> ID：10367687
> 
> 赞同：1
> 
> 时间：2012-04-28T21:28:01.713
> 
> 标签：javascript, addeventlistener, object-literal, dead-code

我创建了以下代码 [http://jsfiddle.net/N65yS/41/](http://jsfiddle.net/N65yS/41/) ..

我的问题是这个..当我点击'draw'按钮时，它第一次工作..成功点击按钮不会调用监听器。为什么会发生这种情况......事件侦听器和对象文字有什么问题......为什么会发生这种奇怪的行为？

我已经给出了适当的评论和一些有用的警报消息（请不要对警报消息投反对票：P）..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T21:42:09.243

在这一行

```
document.body.innerHTML += elm; 
```

您正在向文档中添加另一个元素。然而！这条线的作用是

```
document.body.innerHTML = document.body.innerHTML + elm; 
```

浏览器获取文档的整个 HTML 标记并向`elm`其添加标记。然后，当您分配给 时`document.body.innerHTML`，浏览器会从文档**中删除**所有元素，然后**解析**表达式`document.body.innerHTML + elm`并将其中的所有元素**再次****添加**到文档中。

 **这意味着不仅`elm`添加了新元素，而且首先删除了文档正文中的所有其他元素，然后再次将它的新实例添加到文档中。**在这个过程中，所有的事件监听器都丢失了！**事实上，在旧的 IE 中，这些分离的事件监听器甚至会导致内存泄漏。**

# php - 如何在 php 中像这样转换这个 img 代码（正则表达式模式）

> ID：10367688
> 
> 赞同：0
> 
> 时间：2012-04-28T21:28:29.140
> 
> 标签：php, html, regex, youtube

这是我的 HTML 代码：

```
<img src="http://img.youtube.com/vi/ErIRt52MOkE/0.jpg" class="mceItem" alt="ErIRt52MOkE"/> 
```

我想像这样转换这段代码：

```
<iframe title="YouTube video player" width="640" height="390" src="http://www.youtube.com/embed/ErIRt52MOkE" frameborder="0" allowfullscreen></iframe> 
```

这是我的模式：（`Message: preg_replace() [function.preg-replace]: Unknown modifier 'v'`）

```
<img(?=[^>]+?class="mceItem")(?=[^>]+?alt="[\w]+?")[^>]+?img.youtube.com/vi/([\w]+?)/0.jpg[^>]*?/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:38:26.550

尝试这个：-

```
<?php
  preg_match_all('%youtube\.com\/vi\/([^\/]+)%','<img src="http://img.youtube.com/vi/ErIRt52MOkE/0.jpg" class="mceItem" alt="ErIRt52MOkE"/>',$matches);

  print_r($matches);

  $outputStr = '<iframe title="YouTube video player" width="640" height="390" src="http://www.youtube.com/embed/'.$matches[1][0].'" frameborder="0" allowfullscreen></iframe>';

  echo $outputStr;
?> 
```

# ruby-on-rails - Rails 3，will_paginate，随机，重复记录，Postgres，setseed 失败

> ID：10367690
> 
> 赞同：5
> 
> 时间：2012-04-28T21:29:09.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, random, will-paginate

我有一个带有属性的电影数据库。我想以随机顺序将查询的一批电影返回到带有分页的模板。我正在使用 will_paginate。我尝试了以下方法：

```
## MoviesController

movies = Movie.get_movies(query_string)   # a method in Movie model that takes in 
                                          # a query_string and fetches movies 
                                          # with user-set params

@movies = movies.order('random()').page(params[:page]).per_page(16) 
```

这很好用，除了电影从一页到另一页重复。此问题的解决方案已在[此处](https://stackoverflow.com/questions/7395418/rails-random-activerecord-while-paginating)和[此处](https://stackoverflow.com/questions/810267/paginate-through-a-randomized-list-of-blog-posts-using-will-paginate)发布。这些链接解释说，因为**random()**种子在页面之间重置，没有一致性并且**OFFSET**变得无用。它们为 MySQL 用户提供了很好的解决方案，因为它的**rand(n)**函数需要一个种子**n**。然而，Postgres 并没有这样做。在**ORDER**中发出 **random()**之前，您必须在**SELECT**中声明**setseed(n)**。

 ******所以我尝试了postgres的方式来设置种子：

```
@movies = movies.select('setseed(.5)').order('random()').page(params[:page]).per_page(16) 
```

奇怪的是，它返回了完全没有属性的 Movie 对象。以下是从模板中提出的：

> 电影中的 ActiveModel::MissingAttributeError#action
> 
> > 缺少属性：some_movie_attribute

我对此进行了调试，一旦堆栈到达 action_controller/metal，@movies 包含：

`[#<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >, #<Movie >]`

电影对象的数量 (18) 对应于从查询返回的电影数量。

我还尝试了以下方法，通过删除随机顺序方法来查看**setseed(n)是否是问题：**

```
@movies = movies.select('setseed(.5)').page(params[:page]).per_page(16) 
```

这将返回与上面列出的相同的非属性 Movie 对象。因此，似乎**setseed(n)**确实是问题所在。

我尝试了几种解决方法，例如：

```
# MoviesController

movies = Movie.get_movies(query_string)
shuf_movs = movies.shuffle  ## effectively turns shuf_movs into an array

@movies = shuf_movs.paginate(:page => params[:page], :per_page => 16) 
```

这也返回了包含重复电影的页面。*我认为这是因为分页需要*对对象进行排序，并且不能在 Array#shuffle 中设置种子。因此，我尝试编写自己的随机化代码，该代码将临时存储要在 Movie 对象中排序的 id。（请原谅草率的代码）：

```
# Movie model

attr_accessor :rand_id

# MoviesController

movies = get_movies(query_string)
movies_count = movies.count
r = Random.new
nums = []
rand_movs = []
id = 1
while nums.count != movies_count
  num = r.rand(0..movies_count - 1)
  if !(nums.include?(num))
    movie = movies[num]
    movie.rand_id = id
    rand_movs << movie
    nums      << num
    id += 1
  end
end

@movies = rand_movs.sort_by { |a| a.rand_id }.paginate(:page => params[:page], :per_page => 16) 
```

这仍然会在不同的页面中产生重复的电影。在这一点上，我意识到 will_paginate 不会在调用**paginate**之前接受您排序的内容。所以我尝试了这个：

```
@movies = rand_movs.paginate(:order => 'rand_id', :page => params[:page], :per_page => 16) 
```

这仍然重复记录。**:order -> 'rand_id'**被忽略，因为**:order**仅在处理 ActiveRecord 对象时才重要，而不是数组。

因此，**setseed(n)**似乎是我使用 will_paginate 实现随机非重复记录的唯一希望。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-29T08:04:54.917

不是 postgres 人，但......我会尝试

```
Movie.connection.execute "select setseed(0.5)"
Movie.where(...).order('random()').page(params[:page]).per_page(15) 
```

关于`Array#shuffle`不带种子，它使用`Kernel.rand`，因此您可以使用`Kernel.srand`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:37:00.097

尝试将字段数组传递给`select`：

```
@movies = movies.select(['setseed(.5)', 'some_movie_attribute']).order('random()').page(params[:page]).per_page(16) 
```

某些结果是 using `some_movie_attribute`，您的查询未选择该结果，因此不可用。将其添加为选择字段之一应该可以解决这个问题。******

# tomcat - Tomcat 6 context.xml 是否有 XML 模式？

> ID：10367696
> 
> 赞同：13
> 
> 时间：2012-04-28T21:29:49.510
> 
> 标签：tomcat, xsd, context.xml

NetBeans 非常支持显示 XML 中可用的节点和属性，但它需要加载模式。Tomcat 的上下文容器 XML 是否有一个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-29T09:46:40.397

抱歉，没有。context.xml 没有 XML 架构。

# java - Java通过套接字传输多个文件

> ID：10367698
> 
> 赞同：25
> 
> 时间：2012-04-28T21:30:09.143
> 
> 标签：java

好的，尝试通过套接字传输指定的文件目录，从 arraylist 中删除目录对象，因此只剩下文件，然后通过同一个套接字将它们一一传输。这里的arraylist 只填充了文件，没有目录。下面分别是客户端和服务器的接收和发送代码。代码运行良好，没有错误，除了所有数据都被写入第一个文件。后续文件在服务器文件夹中创建，但它们是 0 字节。任何投入将不胜感激。

这是接收文件的服务器代码

```
public void receive(){

    try {
        DataInputStream dis = new DataInputStream(new BufferedInputStream(socket.getInputStream()));
        DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));
//read the number of files from the client
        int number = dis.readInt();
        ArrayList<File>files = new ArrayList<File>(number);
        System.out.println("Number of Files to be received: " +number);
        //read file names, add files to arraylist
        for(int i = 0; i< number;i++){
            File file = new File(dis.readUTF());
            files.add(file);
        }
        int n = 0;
        byte[]buf = new byte[4092];

        //outer loop, executes one for each file
        for(int i = 0; i < files.size();i++){

            System.out.println("Receiving file: " + files.get(i).getName());
            //create a new fileoutputstream for each new file
            FileOutputStream fos = new FileOutputStream("C:\\users\\tom5\\desktop\\salestools\\" +files.get(i).getName());
            //read file
            while((n = dis.read(buf)) != -1){
                fos.write(buf,0,n);
                fos.flush();
            }
            fos.close();
        }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    }

} 
```

这是发送文件的客户端代码

```
public void send(ArrayList<File>files){

    try {
        DataInputStream dis = new DataInputStream(new BufferedInputStream(socket.getInputStream()));
        DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));
        System.out.println(files.size());
//write the number of files to the server
        dos.writeInt(files.size());
        dos.flush();

        //write file names 
        for(int i = 0 ; i < files.size();i++){
            dos.writeUTF(files.get(i).getName());
            dos.flush();
        }

        //buffer for file writing, to declare inside or outside loop?
        int n = 0;
        byte[]buf = new byte[4092];
        //outer loop, executes one for each file
        for(int i =0; i < files.size(); i++){

            System.out.println(files.get(i).getName());
            //create new fileinputstream for each file
            FileInputStream fis = new FileInputStream(files.get(i));

            //write file to dos
            while((n =fis.read(buf)) != -1){
                dos.write(buf,0,n);
                dos.flush();

            }
            //should i close the dataoutputstream here and make a new one each time?
        }
        //or is this good?
        dos.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-29T07:37:33.487

您正在读取套接字，直到`read()`返回 -1。这是流结束条件 (EOS)。EOS 在对等方关闭连接时发生。不是当它完成写入一个文件时。

您需要在每个文件之前发送文件大小。您已经对文件计数做了类似的事情。然后确保您为该文件读取了那么多字节：

```
String filename = dis.readUTF();
long fileSize = dis.readLong();
FileOutputStream fos = new FileOutputStream(filename);
while (fileSize > 0 && (n = dis.read(buf, 0, (int)Math.min(buf.length, fileSize))) != -1)
{
  fos.write(buf,0,n);
  fileSize -= n;
}
fos.close(); 
```

`readUTF()`您可以将所有这些都包含在一个循环中，该循环在throws时终止`EOFException`。相反，当然您必须在发送数据之前致电发送`writeUTF(filename)`方。`writeLong(filesize)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T07:37:57.027

我是这样做的，效果很好，你可以看看：

**发送**

```
byte[] done = new byte[3];
String str = "done";  //randomly anything
done = str.getBytes();
for (int i = 0; i < files.size(); i++) {
    System.out.println(files.get(i).getName());
    FileInputStream fis = new FileInputStream(files.get(i));
    while ((n = fis.read(buf)) != -1) {
        dos.write(buf, 0, n);
        System.out.println(n);
        dos.flush();
    }
    //should i close the dataoutputstream here and make a new one each time?                 
    dos.write(done, 0, 3);
    dos.flush();
}
//or is this good?
dos.close(); 
```

**收到**

```
for (int i = 0; i < files.size(); i++) {
    System.out.println("Receiving file: " + files.get(i).getName());
    //create a new fileoutputstream for each new file
    fos = new FileOutputStream("C:\\users\\tom5\\desktop\\salestools\\" + files.get(i).getName());
    //read file
    while ((n = dis.read(buf)) != -1 && n != 3) {
        fos.write(buf, 0, n);
        fos.flush();
    }
    fos.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-24T22:14:03.100

我已经创建了一个服务器和客户端。他们正在建立连接，之后服务器每秒发送 1MB 的文本文件。服务器和客户端代码如下。我测试了很长时间，发现没有数据丢失。我已经修改了上面的答案。

服务器代码：

```
package com.dd.server;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.concurrent.TimeUnit;

public class Server {

public static void main(String[] args) throws InterruptedException {
    try {
        byte[] done = new byte[3];
        String str = "done";  //randomly anything
        done = str.getBytes();
        ServerSocket ss = new ServerSocket(5000); 
        Socket socket = ss.accept();
        byte[] mybytearray = new byte[4096];
        OutputStream os = socket.getOutputStream();

        TimeUnit.SECONDS.sleep(5);
        while(true) {
            DataOutputStream dos = new DataOutputStream(os);
            File myFile= new File("I:\\MY-LEARNINGS\\JAVA\\Workspace\\server\\src\\com\\dd\\server\\gistfile1.txt");
            dos.writeUTF(myFile.getName());     
            dos.writeLong(myFile.length());
            FileInputStream fis = new FileInputStream(myFile);  
            BufferedInputStream bis = new BufferedInputStream(fis);
            DataInputStream dis = new DataInputStream(bis);
            int read;
            System.out.println("---------File Writing started----------");
            int count = 0;
            while((read = dis.read(mybytearray)) != -1){
                dos.write(mybytearray, 0, read);
                dos.flush();
                ++count;
                System.out.println("Writing sub component of file. Step : "+count);
            }
            System.out.println("---------File Writing ended----------");
            System.out.println("Flushing data DONE command sent.");
            dis.close();
            bis.close();
            fis.close();
            TimeUnit.SECONDS.sleep(1);
            System.out.println("File transfer has been completed.");
            dos.write(done, 0, 3);
            dos.flush();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
  }
} 
```

客户代码：

```
 package clientcom.dd.clent;

 import java.io.DataInputStream;
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
 import java.net.Socket;

public class Client {

public static void main(String[] args) {
    try {
        Socket socket = new Socket("127.0.0.1", 5000);
        InputStream in = socket.getInputStream();
        DataInputStream dis = new DataInputStream(in);
        while(true) {
            FileOutputStream fos = 
                    new FileOutputStream("I:\\MY-LEARNINGS\\JAVA\\Workspace\\client\\"+System.currentTimeMillis()+"-data.txt");
            int read = 0;
            byte[] mybytearray = new byte[4096];
            while ((read = dis.read(mybytearray)) != -1 && read != 3) {
                fos.write(mybytearray, 0, read);
                fos.flush();
            }
            fos.close();
            //System.out.println("The value of read : "+read);
           // System.out.println("File has been received successfully.");
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

# entity-framework - EF4.3 将 viewbag 项链接到 viewmodel

> ID：10367706
> 
> 赞同：1
> 
> 时间：2012-04-28T21:31:17.353
> 
> 标签：entity-framework, c#-4.0, razor, viewbag

我的锦标赛控制器中有以下操作方法：

```
 public ActionResult Edit(int id) {
        EditTournamentViewModel viewModel = new EditTournamentViewModel {
            Tournament = _tournamentService.GetTournamentByID(id),
            TournamentDivisions = _divisionService.GetTournamentDivisions(id).ToList()
        };

        ViewBag.SportID = new SelectList(_sportService.GetSports(), "SportID", "Name");
        ViewBag.CountryID = new SelectList(_countryService.GetCountries(), "CountryID", "Name");

        return View(viewModel);
    } 
```

这两个 viewbag 项目是将被填充的选择列表。当我使用 firebug 检查页面时， SelectList 的名称为`ViewBag.SportID`is `SportID`，这是我所期望的。但我希望将在那里选择的值输入到我的 viewModel`SportID`的属性中。`Tournament`所以名字应该是`Tournament.SportID`。

我不明白如何实现这一点，我无法像这样在 Razor 中更改 SelectList 的名称：

```
 <div class="editor-field"> 
            @Html.DropDownList("SportID", "Select a sport", new { name = "Tournament.SportID" } )
            @Html.ValidationMessageFor(t => t.Tournament.Sport) 
        </div> 
```

这是我认为的代码：

```
 <div class="editor-field"> 
            @Html.DropDownList("SportID", "Select a sport")
            @Html.ValidationMessageFor(t => t.Tournament.Sport) 
        </div> 
```

我可以采取的解决方案不是`Tournament`在我的视图模型中拥有一个属性，而是可以复制各个属性，然后使用自动映射器，但我想知道是否有修复而不必这样做（当然，除非我在做什么被认为是非常糟糕的做法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:53:42.970

你试过了吗

```
@Html.DropDownListFor(m => m.Tournament.SportID, ViewBag.SportID, "Select a sport") 
```

?

（例如，如果您需要 Tournament.SportId 的实际值进行更新，您可以只查看 SelectList 的不同构造函数并在“ViewBag 创建”中更改它）

更正：

```
SelectList sportList = ViewBag.SportID;

@Html.DropDownListFor(m => m.Tournament.SportID, sportList, "Select a sport") 
```

# networking - 转发代理到 WLAN 接入点的网关

> ID：10367712
> 
> 赞同：3
> 
> 时间：2012-04-28T21:31:32.417
> 
> 标签：networking, proxy, wifi

在我们的网络中，代理服务器用于让所有客户端（都是 Windows XP 计算机）访问互联网。现在，我们要设置一个无线局域网，让人们可以将自己的手机、电脑等连接到互联网。但是，如果我们只是将无线接入点连接到我们的网络，每个人都必须在他们的设备上配置代理服务器。我该怎么做，WLAN 路由器可以充当使用代理服务器的 Internet 网关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:34:57.740

您可以将所有发往端口 80 的流量 NAT 到代理机器。这是所谓的**强制**或**拦截**代理。

例如，如果您有一个 RouterOS 路由器，您只需添加一条规则

```
/ip firewall nat add action=dst-nat chain=dstnat disabled=no dst-port=80 protocol=tcp to-addresses=<proxy IP address> 
```

如果您代理除 HTTP 之外的其他协议，您将对它们更改端口执行相同的操作。

许多代理解决方案可以在拦截模式下运行（例如，您的机器具有两个网络接口，可以过滤所有通过的流量）。请参阅[本教程](http://www.cyberciti.biz/tips/linux-setup-transparent-proxy-squid-howto.html)以使用 Squid 进行设置。

否则，如果您已经有代理服务器，则可以通过在接入点和网络之间放置路由器或运行路由软件的服务器来使用上述解决方案，例如 Vyatta 或 Mikrotik RouterOS（商业但非常强大），一些开放式-源/免费软件路由器/防火墙分发（pfSense，Openwall，m0n0wall，...）甚至是普通的 OpenBSD（带有 pf 防火墙）/Linux（带有 iptables）来达到预期的效果。

一旦你获得了直通路由，如上所述设置代理 NAT 应该非常简单。

您应该考虑在您的接入点连接的路由器上应用此设置，因为它可能会为您省去设置新机器的麻烦。

# mysql - MySQL慢查询：统计文章，按类别分组，有什么办法优化？

> ID：10367716
> 
> 赞同：1
> 
> 时间：2012-04-28T21:32:53.203
> 
> 标签：mysql, query-optimization, explain

有没有办法优化这个查询？它需要超过 2.5 秒。

```
SELECT articles.categories_id,
    COUNT(articles.id) AS count
FROM articles
WHERE articles.created >= DATE_SUB(NOW(), INTERVAL 48 HOUR)
GROUP BY articles.categories_id
ORDER BY count DESC

CREATE TABLE IF NOT EXISTS `articles` (
  `id` int(11) NOT NULL,
  `categories_id` int(11) NOT NULL,
  `feeds_id` int(11) NOT NULL DEFAULT '0',
  `users_id` int(11) NOT NULL DEFAULT '1',
  `title` varchar(255) CHARACTER SET utf8 NOT NULL,
  `sefriendly` varchar(255) CHARACTER SET utf8 NOT NULL,
  `body` text CHARACTER SET utf8,
  `source` varchar(255) CHARACTER SET utf8 DEFAULT NULL,
  `created` datetime NOT NULL,
  `edited` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `fingerprint` varchar(32) CHARACTER SET utf8 NOT NULL,
  `type` int(1) NOT NULL DEFAULT '1' COMMENT '1 => Feed fetched article\n2 => User submitted article',
  `description` varchar(255) CHARACTER SET utf8 DEFAULT NULL,
  `keywords` text CHARACTER SET utf8,
  `status` int(1) NOT NULL DEFAULT '0' COMMENT '0 => Passive\n1 => Active\n2 => Pending',
  PRIMARY KEY (`id`),
  KEY `categories_id` (`categories_id`) USING BTREE,
  KEY `feeds_id` (`feeds_id`) USING BTREE,
  KEY `users_id` (`users_id`) USING BTREE,
  KEY `fingerprint` (`fingerprint`) USING BTREE,
  KEY `title` (`title`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_turkish_ci ROW_FORMAT=COMPACT; 
```

我已经使用缓存，所以在代码方面没有问题。

这是解释 sql 结果：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  articles    index   NULL    categories_id   4   NULL    120411  Using where; Using temporary; Using file sort 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:40:19.487

您可以通过在`created`. 这将有助于为您的 WHERE 子句提供服务：

```
WHERE articles.created >= DATE_SUB(NOW(), INTERVAL 48 HOUR) 
```

相反，创建一个覆盖索引可能是有利的，`(created, categories_id)`这样查询所需的所有数据都可以在索引中使用。

请注意，`id`此查询不需要 的值，因为 COUNT 只关心该值是 NULL 还是 NOT NULL，但`id`在表定义中被定义为 NOT NULL。`COUNT(*)`使用or`COUNT(1)`代替它可能是一个好主意，`COUNT(id)`因为这样可以保证给出相同的结果。但我希望 MySQL 足够智能，可以自动为您进行这种优化。

我不认为您可以避免文件排序，因为您正在对聚合结果进行排序，而这无法被索引。

# java - 在新游戏中清除我的 JFrame 和 JPanel

> ID：10367722
> 
> 赞同：4
> 
> 时间：2012-04-28T21:34:02.340
> 
> 标签：java, swing, jframe, jpanel

我有一个简单的 JPanel 用于井字游戏，画线......所以 TTT 类扩展了 JPanel，并在里面保存了一个 GameLogic 对象。

一切都很好，应用程序是 Main 添加 TTT 的 JFrame，一切都很好。

但是，当我想重新开始一个新游戏时，
我在我的 TTT 中调用“重新启动”，这基本上是这样的：gameLogic = new GameLogic(); &重绘();

现在我的数据数组很干净，它应该只画线..

无论如何Windows都没有改变。

我已经尝试了一切，但没有运气。有什么建议么？

游戏板.java：

```
public class GameBoard extends javax.swing.JPanel {
private GameBoardLogic GameLogic;

//.....

public void Restart()
{
    GameLogic = new GameBoardLogic();
    removeAll();
    repaint();
} 
```

主.java：

```
public class Main {
private static GameBoard TTT;
private static JFrame application;

public static void main(String[] args) {

    application = new JFrame("Tic-Tac-Tow");
    TTT = new GameBoard();
    application.add(TTT);
    application.setSize(350, 350);
    application.setVisible(true);
    //.....

    if ( JOptionPane.showConfirmDialog(null, "Do you want to play again?") == 
                                                 JOptionPane.YES_OPTION )
    {
        application.removeAll();
        TTT.Restart();
        application.add(TTT);
        application.validate();
     } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T21:38:31.887

这对我有用

```
panel.removeAll();
//add your elements
revalidate();
repaint(); 
```

# igraph - python的igraph

> ID：10367723
> 
> 赞同：1
> 
> 时间：2012-04-28T21:34:03.870
> 
> 标签：igraph

我对如何读取/写入 igraph 的 Python 模块感到非常困惑。我现在正在尝试的是：

```
g = igraph.read("football.gml")
g.write_svg("football.svg", g.layout_circle() ) 
```

我有一个 football.gml 文件，这段代码运行并编写了一个名为 football.svg 的文件。但是当我尝试使用 InkScape 打开它时，我收到一条错误消息，指出无法加载文件。这是编写代码的正确方法吗？可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:44:36.887

该`write_svg`功能已被弃用；即使您没有适用于 Python 的 Cairo 模块，它也只是作为一种允许从 igraph 导出 SVG 的快速技巧。它已经有一段时间没有维护了，所以你可能遇到了一个错误。

如果你有 Python 的 Cairo 模块（在大多数 Linux 系统上，你可以简单地从适当的包中安装它），你可以简单地这样做：

```
igraph.plot(g, "football.svg", layout="circle") 
```

这将使用 Cairo 的 SVG 渲染器，它可能会生成正确的结果。如果由于某种原因无法为 Python 安装 Cairo 模块，请在[https://bugs.launchpad.net/igraph](https://bugs.launchpad.net/igraph)上提交错误报告，以便我们进行调查。

（更好的是，即使您设法使用 使其工作，也请提交错误报告`igraph.plot`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T23:08:16.530

晚了几年，但也许这会对某人有所帮助。

该`write_svg`函数似乎无法正确转义 & 符号。Texas A&M 在其标签中有一个 & 符号 - InkScape 可能会因为它看到`&`而不是看到而感到困惑`&amp;`。只需`football.svg`在文本编辑器中打开来修复它，你就应该是金子了！

# python - 您如何从 Python 排序中获取数据并在元组上执行一些数学运算而不会弄乱排序顺序？

> ID：10367726
> 
> 赞同：0
> 
> 时间：2012-04-28T21:34:26.310
> 
> 标签：python, sorting, tuples, iterable-unpacking

我正在编写一个脚本来列出目标目录中最大的 20 个文件。获得文件后，我会对大小进行一些数学运算，以应用正确的人类可读的大小信息，即 Kb、Mb、Gb。

然而，这使排序变得混乱。我怎样才能做到这一点，并保持排序顺序不变？

```
#! /usr/bin/env python

import operator, os, sys

args = sys.argv
if len(args) != 2:
    print "You must one enter one directory as an argument."
    sys.exit(1)
else:
    target = args[1]

data = {}
for root, dirs, files in os.walk(target):
   for name in files:       
       filename = os.path.join(root, name)
       if os.path.exists(filename):
            size = float(os.path.getsize(filename))
            data[filename] = size

sorted_data = sorted(data.iteritems(), key=operator.itemgetter(1), reverse=True)
total = str(len(sorted_data))

while len(sorted_data) > 20:
    sorted_data.pop()

final_data = {}
for name in sorted_data:
    size = str(name[1])
    if size >= 1024:
        size = round(float(size) / 1024, 2)
        if size >= 1024:
            size = round(size / 1024, 2)
            if size >= 1024:
                size = round(size / 1024, 2)
                size = str(size) + "Gb"
            else:
                size = str(size) + "Mb"
    else:
        size = str(size) + "Kb"
    final_data[name] = size

print "The 20 largest files are:\n"
for name in final_data:
    print str(final_data[name]) + " " + str(name)
print "\nThere are a total of " + total + " files located in " + target 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:39:43.603

您的问题是您创建了一个全新的字典来存储修改后的文件大小数据。因为该字典不包含有关文件大小的任何信息，并且因为字典不以任何固定顺序存储其信息，所以您会丢失排序顺序。但恢复起来很简单；简单地遍历`sorted_data`而不是遍历`final_data`，使用`final_data`来访问人类可读的文件大小。所以是这样的：

```
for filename, size in sorted_data:
    print filename, final_data[filename] 
```

但是更好的解决方案是将您的人类可读的字符串生成代码放入一个函数中！

```
def human_readable_size(size):
    # logic to convert size
    return hr_size 
```

现在您甚至不必创建字典：

```
for filename, size in sorted_data:
    print filename, human_readable_size(size) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:59:31.127

我知道您已经有了解决方案，我只是很无聊，想看看我是否可以再清理一下您的逻辑。这是您的代码的简化版本。

我想说真的，只是不要打扰听写，它们在这里没有任何好处。

```
import operator, os, sys

if len(sys.argv) != 2:
  sys.exit(1)

target = sys.argv[1]

vals = []
for root, dirs, files in os.walk(target):
  names = (os.path.join(root, name) for name in files)
  vals.extend([ (name, float(os.path.getsize(name)))
                for name in names if os.path.exists(name)])

vals = sorted(vals, key=operator.itemgetter(1), reverse=True)

converted = []
for name, size in vals[0:20]:
  if size >= 1024*1024*1024:
    unit = "Gb"
    size /= 1024*1024*1024
  elif size >= 1024*1024:
    unit = "Mb"
    size /= 1024*1024
  elif size >= 1024:
    unit = "Kb"
    size /= 1024
  else:
    unit = "b"
  converted.append((name, "%.2f"%size + unit))

for name, size in converted:
  print size + " " + name 
```

# java - 安卓：NAT穿越？

> ID：10367727
> 
> 赞同：10
> 
> 时间：2012-04-28T21:34:38.987
> 
> 标签：java, android, networking, p2p, nat

在我看来，较新的 Android 设备在 NAT 之后运行，其中本地地址是内部运营商或 LAN 地址，公共地址是路由器或运营商分配的外部地址。

然而，较新的手机使用网络接口返回的地址与访问 IP 检测服务时不同。

因此，通过直接 P2P SocketChannels 连接本身就失败了。

针对 Android 平台设计的此问题是否有任何常见的解决方法？谁能澄清是什么导致了这种类似 NAT 的安全问题？

任何指向 Java NAT 遍历**教程**或**示例**（**不是**论文或论文）的链接也将被视为有帮助（因为我不太确定如何在 Java 中实现它）。

我当然也会接受任何人提供的任何其他解决方案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T22:45:02.353

Almost every phone or PC you will ever touch won't have a static public IP address, and therefore will require NAT traversal. It's not because of the device; the carrier or ISP put routers between your device and the public internet. Depending on your application, usually there are NAT-traversal libraries you can use, such as [ice4j](http://code.google.com/p/ice4j/) or [STUNT](http://nutss.gforge.cis.cornell.edu/stunt.php).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-30T23:59:15.683

我在自己的项目中这样做，发现这个问题并不复杂。

这是 node.js 中一个非常简单的 UDP 回显服务器

```
var dgram = require('dgram');

var socket =
    dgram.createSocket('udp4');

socket
    .on('listening', function()
    {
        var address = socket.address();
        console.log('socket listening ' +
            address.address + ':' + address.port);
    })
    .on('error', function(err)
    {
        console.log('socket error:\n' + err.stack);
        socket.close();
    })
    .on('message', function(message, rinfo)
    {
        console.log('message: ' + message + ' from ' +
            rinfo.address + ':' + rinfo.port);

        var msg = new Buffer(rinfo.address + ':' + rinfo.port);
        socket
            .send(msg, 0, msg.length,
                rinfo.port, rinfo.address,
                function(err, bytes)
                {
                    //socket.close();
                });

    })
    .bind(15000); 
```

android 客户端只需向该节点服务器发送一条消息

```
System.out.println("UDP hole punching=======================");

class IOth extends Thread {
    @Override
    public void run() {

        String sendMsg = "UDP hole punching";
        byte[] buf = sendMsg.getBytes();
        DatagramPacket packet;

        System.out.println(HPremoteHost); // node server IP
        System.out.println(HPremotePort); // 15000
        try {
            packet = new DatagramPacket(buf, buf.length, InetAddress.getByName(HPremoteHost), HPremotePort);
            ds.send(packet);
        } catch (Exception e) {
            System.out.println("error================");
            System.out.println(e);
        }
    }
}
IOth io00 = new IOth();
io00.start(); 
```

Android Client UDP listener 通过 UDPholepunching 获取通用 msg 和你自己的 Global ip&port

```
class IOLoop extends Thread {
    @Override
    public void run() {
        try {
            String msg = "Native.UDPserver.open";
            SocketAddress sockAddress;
            String address;
            byte[] buf = new byte[1024];
            DatagramPacket packet = new DatagramPacket(buf, buf.length);
            while (true) {
                try {
                    ds.receive(packet);
                    sockAddress = packet.getSocketAddress();
                    address = sockAddress.toString();

                    msg = new String(buf, 0, packet.getLength());

                    System.out.println(msg + "  received !!! by " + address);

                    // this case is UDP HolePunching reaction
                    if (address.equals(HPaddress1)) {
                        System.out.println(msg + "hole punched");

                        // So you can obtain own Global ip& port here.
                        // exchange this information
                        // `remoteHost` `remotePort` to another client
                        // with some method (signaling server)
                    }
                } catch (IOException e) {
                }
            }
        } catch (Exception e) {
        }
    }
}
IOLoop io00 = new IOLoop();
io00.start(); 
```

Android 客户端 UDP 发送方使用其他客户端的 IP`remoteHost` `remotePort`

```
class IOth extends Thread {
    @Override
    public void run() {
        String sendMsg = "This is a test message";
        byte[] buf = sendMsg.getBytes();
        DatagramPacket packet;

        try {
            packet = new DatagramPacket(buf, buf.length, InetAddress.getByName(remoteHost), remotePort);
            ds.send(packet);
        } catch (Exception e) {
        }
    }
}
IOth io00 = new IOth();
io00.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T20:18:38.797

看[http://sourceforge.net/projects/jnat-pmplib/](http://sourceforge.net/projects/jnat-pmplib/) 是java中NAT-PMP的一个实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T22:20:42.237

我已经设法通过转发您在路由器连接期间使用的套接字来建立套接字。它对我有用。

**更新**

如果您使用的是 Windows (ipconfig)，请通过 cmd.exe 查找您的 IP 地址；如果您使用的是 Linux (ifconfig)，请通过终端会话查找您的 IP 地址。然后通过浏览器连接到它，应该有一个安全部分。转到端口转发并打开您在建立 ServerSocket 和 Socket 时使用的端口。使用 TCP 作为协议。请注意，这仅适用于您尝试从您的 wlan 外部进行连接的情况。

# php - 多语言 .htaccess 重定向到子域

> ID：10367732
> 
> 赞同：1
> 
> 时间：2012-04-28T21:35:02.700
> 
> 标签：php, .htaccess, redirect, seo

我有一个 PHP 多语言网站（西班牙语、英语、法语），主要语言是英语。

如果`$_SESSION['idm']`设置为“en”，它会加载一个带有翻译的文件。

我想这样设置：

**如果用户语言是西班牙语**

`www.mydomain.com`和`mydomain.com`->`es.mydomain.com`

`www.mydomain.com/video.php?id=3`->`es.mydomain.com/video.php?id=3`

**如果用户语言是法语**

`www.mydomain.com and mydomain.com`->`fr.mydomain.com`

`www.mydomain.com/video.php?id=3`->`fr.mydomain.com/video.php?id=3`

**如果不是以上任何一项**

`www.mydomain.com and mydomain.com`->`en.mydomain.com`

`www.mydomain.com/video.php?id=3`->`en.mydomain.com/video.php?id=3`

我该怎么做，而且，这个好的 SEO 明智吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T22:04:28.433

在 PHP 中：

```
// check if the current domain is the generic one
$req_domain = $_SERVER['SERVER_NAME']; 
if ($req_domain == 'www.mydomain.com' || $req_domain == 'mydomain.com') {
  $subdomains = array ('fr' => 'fr.mydomain.com',
                       'es' => 'es.mydomain.com',
                       'en' => 'en.mydomain.com');

  // get the language from the session variable (if set), or use default
  $lang = 'en'; // default language
  if ( isset($_SESSION['idm']) && isset($subdomains[$_SESSION['idm']]) )
    $lang = $_SESSION['idm']; // selected language

  // redirect while maintaining the complete request URI
  header('Location: http://' . $domains[$lang] . $_SERVER['REQUEST_URI']);
  exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:38:58.617

对于 SEO 来说，它比您当前基于会话的方法更好，该方法对搜索引擎隐藏语言变化。

一项细微的更改是在主域上保留默认语言 (en)。

为了使其发挥最佳效果：

确保页面上的链接是相对的，这样您就不会在每次点击时导致重定向。

将 hreflang 元数据添加到页面以指示翻译的位置。

不要强迫人们使用一种语言。确保它们可以轻松更改。

# c++ - 多个查找集

> ID：10367734
> 
> 赞同：3
> 
> 时间：2012-04-28T21:35:28.690
> 
> 标签：c++, boost, boost-multi-index

我需要一个数据结构，但我不确定该选择什么。从根本上说，我的需求与 类似`std::set`，只是我需要同时在同一数据上根据多个不同的比较器进行查找。

现在我决定去买一些kludge-a`std::map<float, std::unordered_set<T>>`然后a `std::unordered_map<T, std::unordered_set<T>*>`。这应该允许 O(log N) 查找 a`float`和 O(1) 查找/删除 a `T`。

有没有更好的数据结构可以使用？这上面写满了“hack”。

顺便说一句，这段代码对*性能*非常关键，所以非常感谢快速的东西。

编辑：我一直在戳，`boost::multi_index`这就是我到目前为止所得到的：

```
boost::multi_index_container<
    NodeType,
    boost::multi_index::indexed_by<
        boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>, decltype(node_comparator)>,
        boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>
    >
> open_set(
    boost::make_tuple(node_comparator)
); 
```

`node_comparator`in_scope lambda在哪里。但是试图编译它会导致一些光荣的错误。

```
1>d:\backups\code\boost_1_47_0\boost\multi_index\detail\node_type.hpp(56): error C2903: 'node_class' : symbol is neither a class template nor a function template
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\apply_wrap.hpp(49) : see reference to class template instantiation 'boost::multi_index::detail::index_node_applier::apply<IndexSpecifierIterator,Super>' being compiled
1>          with
1>          [
1>              IndexSpecifierIterator=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>,
1>              Super=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\bind.hpp(207) : see reference to class template instantiation 'boost::mpl::apply_wrap2<F,T1,T2>' being compiled
1>          with
1>          [
1>              F=boost::multi_index::detail::index_node_applier,
1>              T1=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>,
1>              T2=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\apply_wrap.hpp(49) : see reference to class template instantiation 'boost::mpl::bind2<F,T1,T2>::apply<U1,U2>' being compiled
1>          with
1>          [
1>              F=boost::multi_index::detail::index_node_applier,
1>              T1=boost::mpl::_2,
1>              T2=boost::mpl::_1,
1>              U1=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>,
1>              U2=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\apply.hpp(63) : see reference to class template instantiation 'boost::mpl::apply_wrap2<F,T1,T2>' being compiled
1>          with
1>          [
1>              F=boost::mpl::bind2<boost::multi_index::detail::index_node_applier,boost::mpl::_2,boost::mpl::_1>,
1>              T1=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>,
1>              T2=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\aux_\preprocessed\plain\reverse_iter_fold_impl.hpp(82) : see reference to class template instantiation 'boost::mpl::apply2<F,T1,T2>' being compiled
1>          with
1>          [
1>              F=boost::mpl::bind2<boost::multi_index::detail::index_node_applier,boost::mpl::_2,boost::mpl::_1>,
1>              T1=boost::multi_index::detail::hashed_index_node<boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>>,
1>              T2=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\mpl\reverse_iter_fold.hpp(43) : see reference to class template instantiation 'boost::mpl::aux::reverse_iter_fold_impl<N,First,Last,State,BackwardOp,ForwardOp>' being compiled
1>          with
1>          [
1>              N=2,
1>              First=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,0>,
1>              Last=boost::mpl::v_iter<boost::mpl::vector2<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,2>,
1>              State=boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>,
1>              BackwardOp=boost::mpl::bind2<boost::multi_index::detail::index_node_applier,boost::mpl::_2,boost::mpl::_1>,
1>              ForwardOp=boost::mpl::protect<boost::mpl::arg<1>>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\multi_index\detail\node_type.hpp(70) : see reference to class template instantiation 'boost::mpl::reverse_iter_fold<Sequence,State,BackwardOp>' being compiled
1>          with
1>          [
1>              Sequence=boost::multi_index::indexed_by<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,
1>              State=boost::multi_index::detail::index_node_base<NodeType,std::allocator<NodeType>>,
1>              BackwardOp=boost::mpl::bind2<boost::multi_index::detail::index_node_applier,boost::mpl::_2,boost::mpl::_1>
1>          ]
1>          d:\backups\code\boost_1_47_0\boost\multi_index_container.hpp(75) : see reference to class template instantiation 'boost::multi_index::detail::multi_index_node_type<Value,IndexSpecifierList,Allocator>' being compiled
1>          with
1>          [
1>              Value=NodeType,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>,
1>              Allocator=std::allocator<NodeType>
1>          ]
1>          c:\repo\render\render\sim\simcontext.cpp(264) : see reference to class template instantiation 'boost::multi_index::multi_index_container<Value,IndexSpecifierList>' being compiled
1>          with
1>          [
1>              Value=NodeType,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::ordered_non_unique<boost::multi_index::identity<NodeType>,Wide::Sim::`anonymous-namespace'::<lambda8>>,boost::multi_index::hashed_unique<boost::multi_index::identity<NodeType>>>
1>          ] 
```

这只是第一个；有很多，但我很清楚 Visual Studio 倾向于让一个错误导致 9999999 更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:44:44.137

您可以尝试的一件事是`weak_ptr`在您的`unordered_set`, 和`shared_ptr`您的元素中使用 a 。当你破坏元素时，`weak_ptr`会留下一个 NULL。您需要一些方法来垃圾收集`weak_ptr`容器中的那些 NULL 条目，但该成本可能很容易摊销。这样，您根本就不需要使用第二个索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:52:40.967

`multi_index`是赢家。不幸的是`dirkgently`作为评论发布，而不是回答，或者我会接受它。

# iphone - ICU 在 iOS 上的 MessageFormat

> ID：10367735
> 
> 赞同：2
> 
> 时间：2012-04-28T21:35:43.767
> 
> 标签：iphone, ios, icu

据我了解，iOS 在后台使用 ICU。我想为涉及数字和复数的字符串访问 ICU 的 MessageFormat 的功能，例如，

```
There {0,choice,0#are no files|1#is one file|1<are {0,number,integer} files}. 
```

iOS 是否公开此功能？如果是这样，我该如何使用它？我以为我可以写

```
[NSString stringWithFormat: "There {0,choice,0#are no files|1#is one file|1<are {0,number,integer} files}.", n]; 
```

或者

```
[NSString stringWithFormat: "There {0,plural, =0{are no files}=1{is one file}other{are %ld files}}.", n]; 
```

但是这些格式（分别为 ICU4J 和 ICU）不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:03:45.160

iOS 和 OS X 一样，确实包含`/usr/lib/libicucore.dylib`. 但是，它在任一操作系统上都不是受支持的公共 API。有关如何在 OS X 上使用它以及潜在问题的说明，请参阅[这条旧消息。](http://lists.apple.com/archives/xcode-users/2005/Jun/msg00633.html)

在 iOS 上，我猜还有一个额外的问题是 Apple 可能会拒绝您的应用程序使用不受支持的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T22:06:14.467

[stringWithFormat](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)的格式规则不包括 ICU 格式。您需要为此类事情调用不同的函数。AFAIK iOS 不公开与 ICU MessageFormat 兼容的 NSString API。

但是，鉴于您确实有权访问 API（通过公开公开或将 ICU 的自定义构建与您的应用程序捆绑在一起），要使此类消息格式正常工作，ICU 库必须有权访问以下资源文件：

*   包含您感兴趣的语言环境的选择数据
*   更新到足以支持您尝试使用的选择格式

有关详细信息，请参阅[ICU 文档](http://userguide.icu-project.org/formatparse/messages)。

# matlab - MATLAB 的 PDF 输出并包含在 LaTeX 中

> ID：10367738
> 
> 赞同：2
> 
> 时间：2012-04-28T21:36:14.913
> 
> 标签：matlab, pdf, latex

我正在 MATLAB 中以 PDF 格式打印一些数字，并且可以使用 Fedora 16 上的 Evince PDF 查看器很好地查看它们。

但是，当我尝试将它们包含在 LaTeX (TeXLive 2011) 中时，出现错误

```
!pdfTeX error: /usr/local/texlive/2011/bin/x86_64-linux/pdflatex (file ./caroti
d_amp_mod_log.pdf): xpdf: reading PDF image failed 
```

但是，我可以使用在 Mathematica 中生成的示例 PDF 图像并将其包含在内，这告诉我问题出在 MATLAB 生成的 PDF 上，而不是一般的 PDF 上。

可能与`set(0,'defaultfigurepaperpositionmode','auto')`我放入`startup.m`文件中的内容有关，以便页面自动适应图像？

**编辑：**我只是尝试使用`saveas(figure(1), 'filename.pdf')`而不是`print(figure(1), 'filename.pdf')`它工作正常，但该`PaperPositionMode`属性被忽略。有什么办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T22:52:25.780

终于发现问题了。打印图像的正确方法是使用`print(handle, '-dformat', 'filename')`语法。

因此，对于 PDF，我们需要`print(figure(1), '-dpdf', 'myfigure')`. 有关更多信息，请参阅有关图形文件格式的MATLAB[文档。](http://www.mathworks.com/help/techdoc/ref/print.html#f30-534567)

使用`print(figure(1), 'filename.pdf')`仍然会产生一个有效的 PDF 供查看，但它不能包含在 LaTeX 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:47:27.393

您可以尝试使用 pdfpages

或 pgf

包括pdf文件。但是，您只需要使用 pdflatex，就像您现在所做的那样。

# java - 按下按钮后每 3 秒更新一次 JTextFields 文本

> ID：10367742
> 
> 赞同：1
> 
> 时间：2012-04-28T21:36:40.513
> 
> 标签：java, swing, timer, jbutton, jtextfield

所以我想要做的是，当我按下按钮时，JTextField 文本开始每 3 秒更新一次新值。我已经尝试过线程睡眠方法，但它会在睡眠时间冻结整个程序，并且在它结束后文本字段会获取最新的输入。所以这里是我想要做的更好解释的例子。

只要有可用值，我就会每 3 秒按下 JButton 将数字放入 JTextFiel 中。我不希望它附加新文本，只需用新文本替换旧文本。有人知道我该怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:45:15.813

您应该使用[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html).

```
final Timer updater = new Timer(3000, new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        // update JTextField
    }
});
JButton button = new JButton("Click me!");
button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        updater.start();
    }
}); 
```

`Timer`不会阻塞事件调度线程（就像那样），因此`Thread.sleep`它不会导致您的程序变得无响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:48:21.657

你不能在 EDT 睡觉。您可以使用 swingworker（更好的解决方案）或执行以下操作：

```
//sleep in new thread
new Thread (new Runnable() {
    public void run() {
        Thread.sleep(3000);
         //update UI in EDT
         SwingUtilities.invokelater(new Runnable()  {
              public void run() {updateYourTextHere();}
          });
    }
}).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:43:56.123

您需要在单独的线程上完成“工作”。在这里查看一些答案：[Java GUI Not changed](https://stackoverflow.com/questions/10345591/java-gui-not-changing/10345633#10345633)

# msbuild - 使用 Mono 和 MonoDevelop 多目标 C# 项目文件

> ID：10367743
> 
> 赞同：8
> 
> 时间：2012-04-28T21:36:43.870
> 
> 标签：msbuild, mono, monodevelop, xbuild

我有一组 csproj 文件，它们都引用同一组源文件，但目标数据略有不同，因此我需要将项目文件分开。例如，同一项目有 WinPhone、XBox、Desktop、MonoTouch 变体。

对于真正重复的内容，例如要编译的 .cs 文件列表，我想将列表合并到一个文件中，这样我就不必一直确保所有变体保持同步。我最初尝试通过从 .csprojs 中删除源并将它们放入由所有 csprojs 导入的 .targets 文件来执行此操作，但这会使源文件从 VS 和 MonoDevelop 中消失。

我的第二次尝试是将桌面 csproj 文件作为主要文件，并让所有变体通过一些条件逻辑导入 csproj。这使源文件可以从主 csproj 编辑，并且它们可以构建到所有风格中。现在 Visual Studio 理解了我想要做什么，但 MonoDevelop 无法构建它。在 MonoDevelop 解决方案中，核心 DLL 的 iOS 版本显示为灰色并显示“（未内置在活动配置中）”

我也尝试过构建 csproj 和解决方案，这似乎解决了 MonoDevelop 遇到的问题，但在解决单点触控程序集相关的其他问题上遇到了麻烦。我曾以为 MonoDevelop 使用了 xbuild，但也许不是？

由于这在 Windows msbuild 中有效，因此它似乎是 Mono 中的错误或不支持的功能。或者也许有更好的方法来解决整个场景......我想我会在这里问。

具体来说，我的 Core.iOS.csproj 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project
    xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
    DefaultTargets="Build"
    ToolsVersion="4.0" >
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>10.0.0</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{AE37B15F-F4BE-48DE-9F20-F00A601EC89E}</ProjectGuid>
    <ProjectTypeGuids>{6BC8ED88-2882-458C-8E55-DFD12B67127B};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
    <AssemblyName>Core.iOS</AssemblyName>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="monotouch" />
  </ItemGroup>
  <Import Project=".\Core.csproj" />
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
</Project> 
```

我的 Core.csproj 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project
    xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
    DefaultTargets="Build"
    ToolsVersion="4.0">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Core</RootNamespace>
  </PropertyGroup>
  <!-- Using AssemblyName's presence to check for whether this is imported. --> 
  <PropertyGroup Condition=" '$(AssemblyName)' == '' ">
    <ProductVersion>8.0.50727</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{FC495BD8-11B1-46B0-A9DE-F245A0CBEE94}</ProjectGuid>
    <AssemblyName>Core</AssemblyName>
    <SignManifests>false</SignManifests>
  </PropertyGroup>

  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <!-- properties similar to Debug -->
  </PropertyGroup>
  <ItemGroup Condition=" '$(Platform)' == 'AnyCPU' ">
    <Reference Include="System" />
    <Reference Include="System.Core" />
  </ItemGroup>
  <Import Condition=" '$(AssemblyName)' == 'Core' " Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <ItemGroup>
    <Compile Include="[...]" />
    <Compile Include="[...]" />
  </Project> 
```

而且，就像我说的，在将 VS Express 用于 WinPhone 和 XBox360 项目时，这种变化似乎可以正常工作。这是应该工作的东西吗？有一个更好的方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T03:48:04.597

简短的回答：

这不起作用，因为虽然 MonoDevelop 使用 MSBuild 文件格式，但它还没有为所有项目类型使用真正的 MSBuild/xbuild 引擎。我建议使用链接而不是包含。

完整背景：

MonoDevelop 有一个旧的内部构建引擎，它源自 SharpDevelop 1.0 构建引擎，即它早于 MSBuild 的存在。我们正在迁移到 MSBuild，但这已经经历了几个阶段，尚未完成。

几年前，MonoDevelop 将其项目*文件格式转换*为与 Visual Studio 兼容的 MSBuild 子集。这是通过将已知的 MSBuild 属性和项序列化/反序列化到 MD 的内部项目模型中来完成的，但使用旧的构建引擎进行构建。这意味着任何仅使用可从 Visual Studio UI 访问的功能的 MSBuild 项目都可以正常工作。但是，它不支持只能通过手动编辑 MSBuild XML 访问的更高级的 MSBuild 功能。

后来 MD 获得了使用 xbuild/MSBuild 构建引擎的实验性支持，但当时 xbuild 还不成熟，它没有针对所有项目类型的 MSBuild 目标。它仍然处于试验阶段，新项目类型（MonoTouch 等）的构建代码是使用 MD 内部构建引擎编写的。

Visual Studio 需要支持 Mono for Android，因此必须有 MSBuild 目标。我们没有为两个构建引擎编写和维护构建代码，而是完成了 xbuild 和 MonoDevelop 的 MSBuild 引擎集成，因此它可以用于 Android 项目的 Mono。但是，我们无法在 MD 中默认启用 xbuild 构建引擎，因为许多其他项目类型还没有 xbuild 目标。相反，我们允许项目插件在每个项目类型的基础上强制使用 xbuild 引擎。

这基本上是当前状态 - xbuild 引擎用于 Android 项目的 Mono，以及 iPhone Binding 项目和 PLP 项目等较新的项目类型，建议用于新项目类型。但在撰写本文时，尚未迁移诸如 MonoTouch、MonoMac、ASP.NET 等较旧的项目类型。

# qt - 无法在qt中打开输出文件

> ID：10367746
> 
> 赞同：2
> 
> 时间：2012-04-28T21:37:18.017
> 
> 标签：qt

我正在使用 Qt Creator 2.4.1 并且遇到了一个非常烦人的问题。

当我调试我的项目时，我经常遇到以下错误：

```
:-1: error: cannot open output file debug\qtrbdclient.exe: Permission denied
:-1: error: collect2: ld returned 1 exit status 
```

解决它的唯一方法是关闭 Qt Creator 并再次运行它。我真的无法理解为什么它会一次又一次地发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T21:59:59.507

最可能的原因是程序仍在运行。确保所有正在运行的实例都已关闭。您可以使用任务管理器或[进程资源管理器](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)来捕获应用程序的任何打开句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:55:13.903

检查应用程序体验是否正在运行，它必须是。这会在 Windows 7 上导致此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T15:13:07.957

当我尝试编译发布版本时收到此消息。问题是包含新图形的资源文件。再次删除图形后，Qt 可以再次打开输出文件。我改变了图形，它再次工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T20:41:23.947

我在进行 Hello World QML 练习时偶然发现了这个问题。本质上，我没有将我的 UI 元素放在 Window 标签中。当我运行应用程序时，它不会打开应用程序窗口；因此，无法关闭它们或知道它正在运行。

检查位于窗口 > 输出窗格 > 应用程序输出（通常在底部）的应用程序输出。停止按钮应为红色且处于活动状态。在再次运行之前单击它。

[![在此处输入图像描述](../Images/d48cef4f55a2d1ba51f95c2981df4b80.png)](https://i.stack.imgur.com/SgN9A.jpg)

错误代码：

```
Rectangle {
    width: 360
    height: 200
    ...
} 
```

正确代码：

```
Window {
    visible: true
    width: 360
    height: 200
    Rectangle {
        anchors.fill: parent
        ...
    }
} 
```

# xslt - xpath:number 为“0”返回 false

> ID：10367749
> 
> 赞同：4
> 
> 时间：2012-04-28T21:37:42.040
> 
> 标签：xslt, xpath, numbers, xslt-1.0

我有一个`xsl:variable`可以是空字符串或数字的。所以我这样评价它：

```
<xsl:if test="number($var)"><node att="{number($var)}" /></xsl:if> 
```

如果`var`是空字符串，这有效，但如果是，它具有相同的`var`效果`0`：

从 -2 到 2：

```
<node att="-2" />
<node att="-1" />
<node att="1" />
<node att="2" /> 
```

这是一个错误吗？是否有不同版本的`number`功能也可以捕获`0`？我真的需要在`or $var = '0'`我的`test`陈述中添加内容吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T22:33:32.417

**这完全符合[XPath 规范](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-boolean)**：

根据定义`boolean(0)`是`false()`

**你想要**：

```
<xsl:if test="number($var) = number($var)">
  <node att="{number($var)}" />
</xsl:if> 
```

**说明**：

```
number($x) = number($x) 
```

正是`true()`何时`$x`可转换为一个数字。

如果`$x`不能转换为数字，则上述比较的两边都评估为`NaN`，并且根据定义`NaN`不等于任何值，包括`NaN`.

**注意**：

如果您想检查是否`$var`为*integer*，请使用：

```
<xsl:if test="floor($var) = $var">
  <node att="{$var}" />
</xsl:if> 
```

或者，或者：

```
<xsl:if test="not(translate($var, '0123456789', ''))">
  <node att="{$var}" />
</xsl:if> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T21:49:38.070

[如果节点值为数字](https://stackoverflow.com/questions/3854345/xpath-test-if-is-number)，则取自XPath 测试
针对[NaN](http://msdn.microsoft.com/en-us/library/ms256038.aspx)测试该值：

```
<xsl:if test="string(number(myNode)) != 'NaN'">
    <!-- myNode is a number -->
</xsl:if> 
```

这是一个较短的版本：

```
<xsl:if test="number(myNode) = myNode">
    <!-- myNode is a number -->
</xsl:if> 
```

```
<xsl:if test="number(0)"> 
```

表达式 number(0) 被评估为布尔值 false() - 因为根据定义

布尔值（0）为假（）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T07:48:00.907

在 XPath 2.0 中，尝试使用诸如`$var castable as xs:integer`or之类的表达式`$var castable as xs:double`。

# c++ - `Scheduler::_singleton'的多重定义，两次导入标题

> ID：10367750
> 
> 赞同：2
> 
> 时间：2012-04-28T21:37:48.003
> 
> 标签：c++, head

我有一个小问题，我知道它的原因，但不知道它的解决方案。

我有一个小单例类，其头文件是

```
#ifndef SCHEDULER_H_
#define SCHEDULER_H_

#include <setjmp.h>
#include <cstdlib>
#include <map>
#include <sys/time.h>
#include <signal.h>
#include "Thread.h"

class Scheduler {
public:
    static Scheduler * instance();
    ~Scheduler();

    int threadSwitcher(int status, bool force);
    Thread * findNextThread(bool force);
    void runThread(Thread * nextThread, int status);

    void setRunThread(Thread * thread);
    void setSleepingThread(Thread * thread);
    void setTimer(int num_millisecs);
    std::map<int, Thread *> * getSuspendedThreads() const;
    std::map<int, Thread *> * getReadyThreads() const;
    Thread * getSleepingThread() const;
    Thread * getRunningThread() const;
    Thread * getThreadByID(int tid) const;
    const itimerval * getTimer() const;
    const sigset_t * getMask() const;

    void pushThreadByStatus(Thread * thread);
    Thread * extractThreadByID(int tid);

private:
    Scheduler();
    sigset_t _newMask;
    sigjmp_buf _image;
    static Scheduler * _singleton;
    std::map<int, Thread *> * _readyThreads;
    std::map<int, Thread *> * _suspendedThreads;
    Thread *_sleepingThread;
    Thread * _runThread;
    itimerval _tv;
};

Scheduler * Scheduler::_singleton = 0;

#endif /* SCHEDULER_H_ */ 
```

现在当然我将这个头文件导入`Scheduler.cpp`到另一个文件中`other.cpp`

问题是在 other.cpp 我不断得到

```
../otherfile.cpp:47: multiple definition of `Scheduler::_singleton' 
```

我知道它是因为我两次导入相同的标题 - 我该如何解决？`_singletone`是静态的，必须保持静态。为什么包括警卫没有帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:44:03.937

`_singleton`是`static`您的类的成员，您需要在类声明之外显式定义它。如果您在标头中这样做 - 就像您所做的那样 - 并将该标头包含在多个源文件中，链接器会找到同一符号的多个定义，因此它会抱怨。所以解决办法就是把这个静态成员定义移动到对应的源文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:38:54.133

将此行移至您的 CPP 文件之一：

```
Scheduler * Scheduler::_singleton = 0; 
```

# python - 在终端中运行 python 脚本，没有打印或显示 - 为什么？

> ID：10367751
> 
> 赞同：3
> 
> 时间：2012-04-28T21:37:56.973
> 
> 标签：python, terminal

经历 Learn Python the Hard Way，第 25 课。

我尝试执行脚本，结果是这样的：

```
myComp:lphw becca$ python l25 

myComp:lphw becca$ 
```

终端中没有打印或显示任何内容。

这是代码。

```
def breaks_words(stuff): 
    """This function will break up words for us."""
    words = stuff.split(' ')
    return words 

def sort_words(words):
    """Sorts the words."""
    return sorted(words)

def print_first_word(words):
    """Prints the first word after popping it off."""
    word = words.pop(0)
    print word

def print_last_word(words):
    """Prints the last word after popping it off."""
    word = words.pop(-1)
    print word

def sort_sentence(sentence): 
"""Takes in a full sentence and returns the sorted words."""
    words = break_words(sentence)
    return sort_words(words)

def print_first_and_last(sentence):
    """Prints the first and last words of the sentence."""
    words = break_words(sentence)
    print_first_word(words)
    print_last_word(words)

def print_first_and_last_sorted(sentence):
    """Sorts the words then prints the first and last one."""
    words = sort_sentence(sentence)
    print_first_word(words)
    print_last_word(words) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T21:42:37.780

您所有的代码都是函数定义，但您从不**调用**任何函数，因此代码不做任何事情。

用`def`关键字定义一个函数 just*定义了一个 function*。它不运行它。

例如，假设您的程序中只有此功能：

```
def f(x):
    print x 
```

您是在告诉程序，无论何时调用`f`，都希望它打印参数。但是你实际上并没有告诉它你*想*调用它`f`，只是当你调用它时要做什么。

如果要在某个参数上调用函数，则需要这样做，如下所示：

```
# defining the function f - won't print anything, since it's just a function definition
def f(x):
    print x
# and now calling the function on the argument "Hello!" - this should print "Hello!"
f("Hello!") 
```

所以如果你想让你的程序打印一些东西，你需要对你定义的函数进行一些调用。调用什么以及使用什么参数取决于您希望代码做什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:51:18.227

您可以在交互模式下执行该文件

```
python -i l25 
```

然后在 python 提示符下调用你的函数

```
words = ["Hello", "World"]
print_first_word(words) 
```

请安装[ipython](http://ipython.org/)以获得更好的用户交互

# iphone - 为视网膜显示优化的精灵

> ID：10367755
> 
> 赞同：2
> 
> 时间：2012-04-28T21:38:36.793
> 
> 标签：iphone, css-sprites, retina-display

我正在构建一个响应式网站，所以我一直在阅读有关移动设备和 iphone 上的 css sprites 的信息。我找到[了这篇文章](http://brianistech.wordpress.com/2011/05/11/ios-retina-sprites/)，我认为这是正确的技术，但解释可能会更好。我最终得到了这个：

[http://jsfiddle.net/H9FcH/](http://jsfiddle.net/H9FcH/)

有人能告诉我在iphone上看起来是否还可以吗？我不确定那 50%。另外，有人有更好的文章吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T22:09:15.617

`background-size`您为启用 Retine 的设备指定的属性应包含**非 Retina 精灵**的大小，即 Retina 精灵的一半宽度和一半高度。它应该是整个精灵的大小，而不是精灵中单个图标的大小。

**更新小提琴：http:** [//jsfiddle.net/jhogervorst/qr5fs/2/](http://jsfiddle.net/jhogervorst/qr5fs/2/)

**屏幕截图（视网膜）：http:** [//i.stack.imgur.com/sIDnE.png](http://i.stack.imgur.com/sIDnE.png)

**CSS：**

```
@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
       only screen and (min--moz-device-pixel-ratio: 1.5),
       only screen and (min-resolution: 240dpi) {
        .action {
            background-image: url(http://dl.dropbox.com/u/13823768/masonry/img/test-sprite2x.png);
            -moz-background-size: 153px 64px;
            -o-background-size: 153px 64px;
            -webkit-background-size: 153px 64px;
            background-size: 153px 64px;
        }
} 
```

# php - 为 » 赋予风格

> ID：10367757
> 
> 赞同：0
> 
> 时间：2012-04-28T21:38:47.923
> 
> 标签：php, html, css

我怎样才能写出这个角色的风格：`&raquo;` 有可能吗？或者我必须写信`<span class="class_name">&raquo;</span>`来设置这个符号的样式？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:41:00.200

您不能使用 CSS 设置单个符号的样式，所以正如您所说，您必须将其包装在 span 或其他可样式元素中并在其上进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:41:09.307

您不能使用 CSS 选择文本片段。只有元素和伪元素。根据上下文，[`:first-letter`](http://www.w3.org/TR/CSS21/selector.html#first-letter)最有希望能够与之匹配。

您可能必须添加要选择的元素。它不必是一个跨度或有一个类。

使用/`<q>`然后添加引号字符本身可能是一种更好的方法。`:before``:after`

# c++ - 在 C++ 应用程序中使用非本地数据/媒体文件 (gtkmm)

> ID：10367759
> 
> 赞同：2
> 
> 时间：2012-04-28T21:38:52.060
> 
> 标签：c++, autotools, automake, gtkmm

我开始使用 gtkmm（GTK+ GUI 工具包的 C++ 绑定）用 C++ 编写的声谱分析工具（灵感来自[spek](http://spek-project.org)）。我想我现在应该知道如何做到这一点，但是......

我的目录结构是 a-la-GNOME，例如`src/`, `data/`, `po/`, `man/`。需要我询问的具体情况是使用 GTK UI 管理器，该管理器将位于`data/ui`. 对于这种特定情况，我希望能够以独立于安装的方式从此文件加载用户界面（例如，文件的加载不依赖于`make install`; 可执行文件可以运行[并加载 UI 文件]从`src/`运行后`make`[因此将源代码编译成相同的可执行文件]或其安装前缀）。我将如何在我的源代码中引用 UI 文件（请记住，文件的加载不是通过创建文件对象（`fopen(...)`）来执行的，而是通过将文件位置作为字符串参数传递给`(UIManager).add_ui_from_file(...)`）？

除了 UI 文件的这种特殊情况，我将如何使用自动工具构建过程对文件（即数据库、INI 文件、XML 模式）进行类似的引用？是否有一段相关的 Automake 代码可以快速设置项目以使用这种类型的目录结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:45:03.933

只需尝试使用这两个文件（以未安装的优先）：

```
if(!(UIManager).add_ui_from_file(../data/ui/mygui))
   (UIManager).add_ui_from_file(/incalled/location/mygui) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:16:35.643

在Glom中，我创建了一个辅助函数来尝试两个位置，两个位置都在Makefile.am中定义（如果你只有一个Makefile.am，这更简单，通过使用非递归automake，这更简单）： [http ://git.gnome.org/browse/glom/tree/glom/glade_utils.h#n38](http://git.gnome.org/browse/glom/tree/glom/glade_utils.h#n38)

# java - Java Swing/AWT - 使用上下文菜单绘制对象

> ID：10367762
> 
> 赞同：2
> 
> 时间：2012-04-28T21:39:13.350
> 
> 标签：java, swing, drawing, contextmenu, awt

我想做一个类似于图表编辑器的东西——一个允许用户在画布上创建、查看和编辑一堆形状的应用程序。我的 GUI 基本上包含三个部分 - 一个标准的 JMenuBar，右侧的一个 JPanel 用于显示有关形状的信息，旁边的一个 JPanel 应该用于可视化形状。

除此之外，我还有一个定义形状的包。为简单起见，假设只有一个 Square，包含以下信息：画布上的坐标、大小、用户定义的名称和描述、颜色。项目的主类（JFrame 的扩展）包含 Squares 列表。

现在，我可以通过简单地使用 drawrect 等在 JPanel 中绘制形状来可视化这些形状，但我想创建一个交互式编辑器 - 如果用户右键单击可视化形状，则会弹出一个上下文菜单允许他移动它，更改其属性或完全删除形状。单击 JPanel 中的空白点将允许用户（再次通过菜单）创建新形状。

有没有一种自动化的方法来做到这一点，而不是手动保持一个矩阵将画布的每个像素映射到某个形状并在右键单击时检查它？一个我可以说的地方，例如，在 JPanel 中绘制这个并在点击时做一些事情......一个相关的问题，当我在 JPanel 中编辑形状时，如何访问主应用程序类中的 Square/Circle 列表，这样我真的可以改变吗？我想这很简单，但现在我不知道该怎么做。

请指出我正确的方向，任何东西都会受到赞赏，提示，示例，相关教程的链接......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:07:51.580

正如@eugener 所建议的，实现[`Shape`](http://docs.oracle.com/javase/6/docs/api/java/awt/Shape.html)接口的类有一个`contains()`对此有用的方法。[`GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)是一个示例，说明了您提到的几个功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:03:48.863

完成此操作的最常见方法是允许形状确定点是否在形状内。希望您的代码是面向对象的，并且您的每种形状都是一个类。

您所要做的就是`boolean isInside( point: Point)`为每个形状定义一个方法。一旦你有了这些，你所要做的就是以反向 z 顺序（从上到下）遍历形状，然后查看鼠标点击点的位置。如果它不借给任何形状 - 您单击了画布。获得此信息后，您可以显示适当的菜单。

希望这可以帮助

# java - 从叶子创建一个总和树

> ID：10367765
> 
> 赞同：3
> 
> 时间：2012-04-28T21:39:52.680
> 
> 标签：java, tree, binary-tree

好的，我得到了一堆叶子 10,9,7,8，我需要从它们中创建一个总和树 ![在此处输入图像描述](../Images/57f273f3de1a4c0c278513457298634f.png)

我需要找到圈出的总和。

这个问题实际上是一个重量问题，我可以一次选择两个元素来添加它们，它们的组合权重是组合元素所做的工作，我必须继续这样做，直到所有权重组合在一起，同时做最少的量工作，但我把它变成了这个，因为我认为这是解决它的方法。

这是解决这个问题的最好方法还是有更好的方法？

创建这棵树并计算这些节点的总和的最快方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:20:43.493

使用[堆栈机](http://en.wikipedia.org/wiki/Stack_machine)。推叶子，直到堆栈有 2 个元素。弹出这些元素，添加（sub、mult、div 等）它们，然后推送结果。继续这样做，直到输入没有更多元素。最终结果在栈顶。该算法以和树相同的顺序进行算术运算。

```
code                stack
--------------------------
push 10             10$        
push 9              9, 10$     

pop a               10$
pop b               $
push a+b            19$

push 7              7, 19$
push 8              8, 7, 19$

pop a               7, 19$
pop b               19$
push a+b            15, 19$

pop a               19$
pop b               $
push a+b            34$

done                34$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:29:32.113

## 贪婪的解决方案：

1.  将所有叶子放入优先队列（首先出现最小权重）。
2.  当队列包含多棵树时，拉出两棵最小权重的树，将它们连接起来，然后将联合树插入到队列中。
3.  当队列仅包含一棵树时，这就是您的解决方案。

## 贪婪的解决方案有效：

给定从叶子构建的任何二叉树，每个叶子`depth*weight`都对总工作/成本做出贡献。（其中叶子的深度是从根到叶子的路径的长度，例如

```
 18
  /  \
  3   15
/  \ /  \
1  2 4  11
       / \
       5  6 
```

叶子 1、2 和 4 的深度为 2，叶子 5 和 6 的深度为 3。）

因此，对于任何给定形状的树，当最轻的叶子最深时，总成本最小。因此，当第一步是将两个最轻的叶子连接到一棵新树时，就会达到最低成本树。

当一些叶子已经加入时，构建树的总成本是（到目前为止的成本）+（考虑非单棵树作为叶子的构建最便宜的树的成本）。

所以在最小成本树中，通过上面的推理，两个最轻的“叶子”必须在最深的层次，因此可以连接起来形成一个新的子树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T16:28:13.273

这是使用Java的实现

```
public static int sumTree(BinaryTreeNode<Integer> node) {
    if (node == null) {
        return 0;
    }
    int oldVal = node.getData();
    node.setData(sumTree(node.getLeft()) + sumTree(node.getRight()));

    return oldVal + node.getData();
} 
```

这是测试用例

```
@Test
public void sumTreeTest() {
    BinaryTreeNode<Integer> bt = BinaryTreeUtil.<Integer>fromInAndPostOrder(new Integer[]{8,-2,-4,10,7,6,5}, new Integer[]{8,-4,-2,7,5,6,10});
    BinaryTreeUtil.sumTree(bt);
    List<Integer> result = new ArrayList<Integer>();
    BinaryTreeUtil.printInOrder(bt, result);
    assertThat(result.toArray(new Integer[0]), equalTo(new Integer[]{0, 4, 0, 20, 0, 12, 0}));
    //System.out.println(Arrays.toString(result.toArray()));
} 
```

# ruby - 如何将项目 readme.md 读入 user.github.com 站点？

> ID：10367769
> 
> 赞同：3
> 
> 时间：2012-04-28T21:40:36.603
> 
> 标签：ruby, scripting, github, jekyll

Github 现在可以为项目自动生成页面。太棒了 - 它读取项目根目录中的 readme.markdown 文件并使用模板创建一个整洁的站点。

但是缺少的是 user.github.com 页面。无论如何（自动或通过传递配置文件）读取我所有当前的 GitHub 项目自述文件并推送到 user.github.com 模板系统的站点设计？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:24:32.283

'user.github.com' 站点是通过[GitHub Pages](http://pages.github.com/)构建的。它们是独立的存储库，其名称与它们将出现的域相匹配。例如，我的 github 用户名是“alanwsmith”。我有一个名为“alanwsmith.github.com”的存储库，它通过 jekyll 进行处理，可在以下位置获得：http: [//alanwsmith.github.com/](http://alanwsmith.github.com/)。

由于它们是独立且有效的存储库，因此 GitHub 不会对它们应用任何自动化。通过 jekyll 的处理只输出站点。它不会与 repo 本身的内容混淆。如果您想自动列出您的 user.github.com 域上的所有项目自述文件，您必须构建自己的流程来收集文件并将它们放入源代码库中。

当然，您的个人用户页面（例如[https://github.com/alanwsmith](https://github.com/alanwsmith)而不是[http://alanwsmith.github.com/](http://alanwsmith.github.com/)）列出了您的存储库。这些链接指向各个项目页面，正如您所提到的，这些页面显示自述文件。我认为这与 GitHub 在这个时间点上做你想做的事情一样接近。

*有关 GitHub Pages 的更多详细信息，请参阅[GitHub Pages 帮助部分](http://help.github.com/pages/)。*

# ios - UserInteractionEnabled 是否像 UIView 层次结构的 Alpha 一样工作？

> ID：10367772
> 
> 赞同：1
> 
> 时间：2012-04-28T21:40:53.117
> 
> 标签：ios, uiview

我知道，如果我将父 UIView 的 Alpha 设置为 0，那么它的所有子项也是“不可见的”。将父 UIView 的 UserInteractionEnabled 设置为 NO 是否也会影响其子级？换句话说，让 superView 不可触碰会使它的 subView 不可触碰吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T01:46:32.397

是的，但方式不同。基本上，如果您将 UIView.userInteractionEnable 设置为 NO，它将不再处理触摸事件，这意味着它不会将事件传递给子视图。但是，您可以将子视图的 userInteractionEnable 设置为 NO，而不会影响父视图或对等视图。

# php - 两个简单的mysql查询

> ID：10367779
> 
> 赞同：1
> 
> 时间：2012-04-28T21:41:20.960
> 
> 标签：php, mysql

我是 mysql 和 php 的菜鸟，只想问我这样做是否正确：

1.  我想从“lastTurn”超过 12 小时的表中选择。这是正确的方法吗。我最关心 12 小时的时间戳

    `$queryQuit = mysql_query("SELECT match_id, lastTurn FROM active_matches WHERE matchStatus=0 AND noticeSent < 2 AND lastTurn < NOW() - INTERVAL 12 HOUR");`

2.  我使用 Asihttprequest 向服务器发送数据。如果我发送一个 int，是否需要在它进入数据库之前对其进行转换？

    ```
    //score is an int
    $score = mysql_real_escape_string($_POST['score']); 

    //Update a table where the field is an int 
     "UPDATE hiscore SET score=score + '$score' WHERE username='$username'" 
    ```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:46:56.400

1.  这看起来是正确的

2.  如果要确保保存整数，则需要强制转换为 int

代码示例：

```
$score = mysql_real_escape_string((int) $_POST['score']); 
```

或者

```
$score = mysql_real_escape_string(intval($_POST['score'])); 
```

# web - 网站上的端口转发

> ID：10367780
> 
> 赞同：0
> 
> 时间：2012-04-28T21:41:23.413
> 
> 标签：web, portforwarding

我是这个领域的菜鸟，所以请帮助我理解这一点：我在端口 8080 上启动了我的 Web 应用程序。我认为如果我转发端口 8080 并从 Web 浏览器输入：myexternalipadress:8080/Index.html 它应该打开我的网站。请告诉我为什么我错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:52:31.033

啊，在你家托管一个网站确实是一件有趣的事情。以我的经验，这是我解决问题的方法。

1.确保您的服务器配置正确。

*   启动服务器应用程序
*   如果您的客户端和服务器是同一台机器，请确保您可以在 localhost 上访问服务器
*   从 LAN 上的另一台计算机访问服务器，使用您的服务器 lan ip。192.168.?.?:8080
*   如果您无法从 LAN 上的另一台计算机访问它，则可能是服务器上的防火墙问题

2.确保您的网络配置正确

*   这就是端口转发发挥作用的地方。找出服务器的 LAN ip 并登录到路由器。
*   告诉您的路由器将端口（在本例中为 8080）转发到服务器 LAN ip 地址。
*   通过告诉你的朋友访问你的服务器来测试它（WAN_IP：8080 在网络浏览器中）

# ruby - Ruby 扫描正则表达式将不匹配可选

> ID：10367781
> 
> 赞同：0
> 
> 时间：2012-04-28T21:41:49.390
> 
> 标签：ruby, regex

拿这个字符串。

```
a = "real-ab(+)real-bc(+)real-cd-xy"
a.scan(/[a-z_0-9]+\-[a-z_0-9]+[\-\[a-z_0-9]+\]?/)
=> ["real-ab", "real-bc", "real-cd-xy"] 
```

但是为什么下一个字符串什么都没有呢？

```
a = "real-a(+)real-b(+)real-c"
a.scan(/[a-z_0-9]+\-[a-z_0-9]+[\-\[a-z_0-9]+\]?/)
=> [] 
```

我怎样才能让两个字符串都输出到一个 3 计数数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:52:00.050

您混淆了括号（用于分组）和方括号（用于字符类）。你要

```
a.scan(/[a-z_0-9]+-[a-z_0-9]+(?:-[a-z_0-9]+)?/) 
```

`(?:...)`创建一个非捕获组，这是您在这里需要的。

此外，除非您想明确禁止大写字母，否则您可以写成`\w`“字母、数字或下划线”的简写：

```
a.scan(/\w+-\w+(?:-\w+)?/) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:48:57.853

```
a.scan(/[a-z_0-9]+\-[a-z_0-9]+/) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:52:53.830

为什么不简单呢？

```
a.scan(/[a-z_0-9\-]+/) 
```

# c# - MVC3 & html 表单。如何从 URL 获取参数？

> ID：10367782
> 
> 赞同：-1
> 
> 时间：2012-04-28T21:42:01.907
> 
> 标签：c#, asp.net-mvc

我以前没有做过 Web 应用程序，但我熟悉 C#，并且正在尝试使用 MVC3 创建一个网站。我有一个带有 HTML 表单的页面，我将其设置为使用 GET 方法，并在提交时转到新页面。新页面可以正常加载，并且 URL 中的参数如下所示：

```
http://localhost:55751/Home/ClassAdded?Semester_Fall=Summer&Ticket=123&Year=2012 
```

在这个新页面上，如何从 URL 获取参数以在 C# 中使用它们？本质上，我只想获取这些参数并将它们放入数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:53:39.113

看看[http://www.asp.net/mvc/pluralsight](http://www.asp.net/mvc/pluralsight)以获得一个不错的小介绍。

最简单的方法是定义您的模型并拥有一个强类型视图，该视图会将模型的实例发送到控制器。在那里，您将（非常容易）将接收到的模型实例存储到数据库中（为此使用实体框架或 Linq 数据上下文，尽管最新的人们会使用 EF）。

没有真正的魔法，只需了解 MVC 模式，然后了解它是如何在 MVC 3 中实现的......

ps：我不认为这个问题会得到-1，当然他可以在谷歌上一试......但*耸耸肩*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T21:46:46.433

我建议您阅读一些书籍：[http](https://rads.stackoverflow.com/amzn/click/com/1430210079) ://www.amazon.com/Pro-ASP-NET-Framework-Steven-Sanderson/dp/1430210079 。您需要使用操作参数。

# php - PHP 日期字符串格式

> ID：10367790
> 
> 赞同：9
> 
> 时间：2012-04-28T21:42:34.173
> 
> 标签：php, cakephp, date

我有一个字符串 mm-dd-yyyy，它是从表单中获取的，我想将其存储在数据类型 DATE（yyyy-mm-dd）的数据库中。

如何格式化字符串并将其保存在数据库中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T21:43:32.240

```
$new_format = date("Y-m-d", strtotime('04-28-2012')); 
```

或者

```
$date = new DateTime('04-28-2012');
$new_format = $date->format('Y-m-d'); 
```

或 PHP 5.5+

```
$new_format = (new DateTime('04-28-2012'))->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-28T21:56:02.387

尝试

```
$date = DateTime::createFromFormat("m-d-Y", '02-15-2012');
echo  $date->format('Y-m-d H:i:s') , "\n"; 
```

输出

```
2012-02-15 23:54:52 
```

# php - 如何在我的搜索字段中添加预测文本以从 mysql 数据库中搜索数据？

> ID：10367792
> 
> 赞同：1
> 
> 时间：2012-04-28T21:42:38.070
> 
> 标签：php, mysql, phpmyadmin, mysql-management

如何在我的搜索字段中添加预测文本以从 mysql 数据库中搜索数据？我有一个包含大量信息的数据库，我想搜索特定的名称和短语，但不是猜测单词或文本，而是希望搜索字段为我提示单词或短语，以便我可以选择它。

# objective-c - 对象指针问题

> ID：10367793
> 
> 赞同：0
> 
> 时间：2012-04-28T21:42:38.100
> 
> 标签：objective-c, cocoa, nsarray

我有另一个问题要问你，我相信我已经知道为什么它不起作用，但我不知道如何解决它......

我有一个使用 MutableNSArray 的数据库数组对象。我们称之为“数据库”。这是一个 DatabaseRecord 类型的对象数组。我还有另一个名为 CurrentRecord 的 DatabaseRecord 对象，它是我从用户界面操作的活动对象。当我在数据库中添加一个新条目时，我调用：

```
[Database addObject: CurrentRecord]; 
```

完成更改后，我将数据库中添加的记录替换为：

```
[Database replaceObjectAtIndex: <index> withObject: CurrentRecord]; 
```

我刚刚意识到 CurrentRecord 是一个指针，定义为：

```
DatabaseRecord *CurrentRecord; 
```

我相信正在发生的事情是数据库中的每一个新条目都将自己设置为 CurrentRecord 的值。同样，当我更改 CurrentRecord 时，NSArray 中的所有对象都会相应地修改自己，所以我留下了一个数据库，比如 100 条完全相同的记录。

我想要做的基本上是将 CurrentRecord 的值复制到 MutableNSArray 中的适当对象中。

我确信有一个简单的解决方法，例如不传递指针，但我不太确定如何继续。我希望我的问题很清楚......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T22:04:59.870

> 完成更改后，我会替换数据库中添加的记录

如果您要更改数组中已有的记录，则无需替换任何内容。做这个：

```
DatabaseRecord *currentRecord;

currentRecord = [database objectAtIndex:someIndex];
currentRecord.name = @"tom";
currentRecord.location = @"los angeles";

currentRecord = [database objectAtIndex:someOtherIndex];
currentRecord.name = @"harry";
currentRecord.location = @"new york"; 
```

现在您刚刚更改了数据库中两条记录的内容——无需替换任何内容。你可以这样做的原因是它`currentRecord`只是一个指向已经存在的对象的指针。

如果要修改数组中的每条记录，可以执行以下操作：

```
for (currentRecord in database) {
    // make changes to currentRecord here
    // no need to replace the record in the array -- it's already there!
} 
```

另一方面，当您向数据库添加新记录时，您需要确保每次都创建新对象。您可以通过复制现有对象或每次自己实例化一个新对象来做到这一点：

```
for (int i = 0; i < 10; i++) {
    currentRecord = [[DatabaseRecord alloc] init];
    [database addObject:currentRecord];
    // add [currentRecord release]; for non-ARC builds
} 
```

或者：

```
currentRecord = [[DatabaseRecord alloc] init];
for (int i = 0; i < 10; i++) {
    [database addObject:[currentRecord copy]];
    // make the previous line [database addObject: [[currentRecord copy] autorelease]]; for non-ARC builds
} 
```

如果您不使用 ARC，则需要适当地释放您创建的对象，如上面的注释所示。

> 我确信有一个简单的解决方法，例如不传递指针

没有。在 Objective-C 中引用对象的*唯一方法是通过指针。*不过，修复并不难——您只需要更好地理解指针是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T22:04:01.587

所以问题是 NSArray 中的一切都是一样的，对吧？您应该使用[NSCopying](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html)协议和

```
[Database addObject: [CurrentRecord copy]]; 
```

# objective-c - 计算问题

> ID：10367796
> 
> 赞同：0
> 
> 时间：2012-04-28T21:43:12.687
> 
> 标签：objective-c, ios, xcode

谁能看看我处理下面计算的方式是否有问题？即使答案实际上是正确的，我似乎在运行时也得到“你得分 0”。

```
- (void)countGain{
int gain = 0;
int percentage;
if ([answer objectForKey:@"1"] == [usrAnswer objectForKey:@"1"]) {
    gain += 1;

}
percentage = (gain / 10) * 100;

NSString *scored = [[NSString alloc] initWithFormat:@"You scored %d",percentage];
score.text = scored;
rangenans.text = [answer objectForKey:@"1"];

[scored release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:44:37.183

这是整数运算。尝试：

```
percentage = gain * 10; 
```

或者

```
percentage = (gain * 10 ) / 100; 
```

或者

```
percentage = ((float)gain / 10) * 100; 
```

请注意，在上述任何一项中，“百分比”只有 10 个选项，因此`percentage = gain * 10;`更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:57:06.753

这样做有什么意义：

```
percentage = (gain / 10) * 100; 
```

采用

```
percentage = gain * 10; 
```

休息看起来不错。你不应该除以整数。如果你得到 3/10 并且这是 int 值怎么办？

在条件改变

```
if([answer objectForKey:@"1"] == [usrAnswer objectForKey:@"1"]) 
```

到：

```
if([[answer objectForKey:@"1"] isEqualToString:[usrAnswer objectForKey:@"1"]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:31:53.350

问题是您正在尝试比较 NSStrings 和 == 比较字符串的 assresses。您想比较它们的值

例如

```
NSString *correct = @"Yes";
NSString *answer = ..... from some entry; 
```

然后这两个 NSString 将指向不同的内存位。

要与用户回复比较，您需要使用[isEqualToString:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-isEqualToString_)方法比较值

例如 `gain += [correct isEqualToString:answer] ? 1 : 0;`

在您的代码中 == 每次都失败，因此增益始终为 0。因此从未发生过 int 除法问题 - 但当增益变为 1 时会出现等。

# c# - 用总和填充数组/列表

> ID：10367797
> 
> 赞同：-2
> 
> 时间：2012-04-28T21:43:15.060
> 
> 标签：c#, sum

如何使用不超过 10 的总和填充数组或列表？我可以使用 3 个数组来执行此操作，其中 2 个数组包含答案不高于 10 的随机数，以及第 3 个数组包含答案。

但这是一种丑陋的做法。

为了更清楚我想要什么：

```
1 + 1 = 2
5 + 5 = 10
3 + 2 = 5 
```

等等等等

用户一开始只能看到 1 + 1。当时间到了，用户可以看到答案。

那么有没有人有另一种解决方案，然后我将要试用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:07:09.713

您很可能正在尝试做这样的事情。这已编译但未经测试。注意到如何使用随机数生成器和减法创建这些对。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {

        struct addition_pairs{
            public int first;
            public int second;
        }

        static void Main(string[] args)
        { 

         List<addition_pairs> main_list;
         main_list = new List<addition_pairs>();
       //TODO call populate_list and choose how many sets you want.

        }

        private void populate_list(int how_many, List<addition_pairs> list)
        {
            for (int i = 0; i < how_many; i++)
            {
                Random random = new Random();
                int randomNumber1 = random.Next(0, 10);
                addition_pairs insert = new addition_pairs();
                insert.first = randomNumber1;
                insert.second = random.Next(0, 10-randomNumber1);
                list.Add(insert);
            }

        }
    }
} 
```

编辑：已修复，因此每次 LOL 都不会增加到 10。我通过了数学我保证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T22:02:32.430

您可以使用二维数组。

```
int numSums = 4;
int[,] sums = new int[numSums,3];

// 1 + 1 = 2
sums[0,0] = 1;
sums[0,1] = 1;
sums[0,2] = sums[0,0] + sums[0,1];

// 5 + 5 = 10
sums[1,0] = 5;
sums[1,1] = 5;
sums[1,2] = sums[1,0] + sums[1,1];

// 3 + 2 = 5
sums[2,0] = 3;
sums[2,1] = 2;
sums[2,2] = sums[2,0] + sums[2,1];

// 2 + 2 = 4
sums[3,0] = 2;
sums[3,1] = 2;
sums[3,2] = sums[3,0] + sums[3,1]; 
```

你也可以使用一个类来达到最干净的效果。

```
private List<Equation> sums = new List<Equation>();

public MyConstructor() {
    sums.Add(new Equation(5, 5));
    Console.WriteLine (sums[0].a + " + " + sums[0].b  + " = " + sums[0].sum);
}

private class Equation {
    public int a;
    public int b;

    public int sum { 
        get { return a + b; } 
    }

    public Equation(int a, int b) {
        this.a = a;
        this.b = b;
    }
} 
```

# c# - 将视图从不同的 ViewModel 添加到 MainWindow？

> ID：10367798
> 
> 赞同：1
> 
> 时间：2012-04-28T21:43:16.563
> 
> 标签：c#, wpf, mvvm, observablecollection

我有一个 MainWindow，我在其中将所有视图加载到具有画布的 ItemControls 中。

在我的 MainWindowViewModel 中，我可以使用绑定到 ItemControl 的 ObservableCollection 添加一个视图。

但是现在我还想从已经在 MainWindow 中的不同 View 的 ViewModel 中将 View 添加到 MainWindow。

我怎样才能做到这一点。从过去的 5 小时开始，我尝试了很多，但都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:42:10.647

您应该看看 Prism 的[区域](http://www.google.com/search?q=prism%20regions)基础设施。您可以使用它或创建自己的等价物。

# jquery - jQuery破碎的href

> ID：10367806
> 
> 赞同：-3
> 
> 时间：2012-04-28T21:43:57.280
> 
> 标签：jquery, jquery-mobile

我有一个 jQuery Mobile 应用程序。该应用程序从后端提取 JSON 数据并将其呈现给用户。

从最近两天开始，我遇到了一个奇怪的问题。在向用户展示数据时，我正在尝试使用`<a href="url"></a>`标签。这是一行非常简单的代码，我只是不明白这么简单的东西有什么问题。

## 代码片段

```
$.each(obj, function(entryIndex, entry) {
            //some code
         html += '<a href="retrieveDetails.jsp?reference=' + entry.reference + '"><h3 class="term">' + entry['name'] + '</h3></a>';
         //some more code
      }); 
```

## 问题

当我尝试单击超链接时，我在 FireBug 控制台中看到以下错误。

```
j.data("page") is undefined
animationComplete()jquery....min.js (line 54)
error() 
```

## 我在用什么？

```
<script src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0a4/jquery.mobile-1.0a4.min.js"></script> 
```

如果有人可以指导我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:19:08.407

这里有几件事。

*   您正在使用 JQM 的旧的不稳定版本。升级到最新的稳定版本。
*   我怀疑您链接到的页面不包含带有 data-role="page" 的 div。这可能是错误说 j.data("page") 未定义的原因。当 JQM(jQuery mobile) 抓取您的其他页面时，它会查找具有该数据属性的 div。那是它插入原始页面dom的部分。

这是 JQM 在将新页面插入 dom 时查找的 div 示例。

```
<div data-role="page">
    <div data-role="content">
        <h1>Hello World</h1>
    </div>
</div> 
```

# node.js - 我正在创建一个静态 node.js 服务器

> ID：10367811
> 
> 赞同：1
> 
> 时间：2012-04-28T21:44:18.473
> 
> 标签：node.js

我正在创建一个静态 node.js 服务器，它只提供指定目录中的纯 html、css 和 javascript。我试图让服务器读取每个子目录并将 url 路由到它指定的文件。但是它只读取根目录。

```
var fs = require('fs');

var array = fs.readdirSync(__dirname);
function getAllSub(array){
    for (i = 0; i < array.length; i++){
    if (array[i].indexOf(".") == (-1))
        {                     
            array = array.concat(array[i] + "/" + fs.readdirSync(__dirname + "/" +     array[i]));
        }
    if (array[i].indexOf("/") != (-1)){
        var foldcon = array[i].substr(array[i].indexOf("/") + 1);
        var folder = array[i].substr(0, array[i].indexOf("/"));
        foldcon = foldcon.split(",");
        for (n = 0; n < foldcon.length; n++){
            foldcon[n] = folder + "/" + foldcon[n]
            if (foldcon[n].indexOf(".") == (-1)){ 
                console.log([foldcon[n]]);
                foldcon[n] = getAllSub([foldcon[n]]);          

            }
        }
        array.splice(i, 1, foldcon);

    }

}

return array;
}
array = getAllSub(array);
console.log(array); 
```

现在，此代码读取目录并识别文件数组中的项目是否为文件夹，但是它不会将子目录中的文件正确添加到数组中。现在它有点无限递归，我真的不知道如何阻止它。这并不是我实际要使用的东西，我只是认为这将是一个很好的项目，可以向自己介绍 node.js 的基础知识

已编辑^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:30:50.040

我知道已经很晚了，但这是读取子文件夹中文件路径的递归解决方案的正确答案：

```
var fs = require("fs");

/**
 * Recurse through a directory and populate an array with all the file paths beneath
 * @param {string} path         The path to start searching
 * @param {array} allFiles      Modified to contain all the file paths
 */
function readdirSyncRecursive(path, allFiles) {
    var stats = fs.statSync(path);
    if (stats.isFile()) {
        // base case
        allFiles.push(path);
    } else if (stats.isDirectory()) {
        // induction step
        fs.readdirSync(path).forEach(function(fileName) {
            readdirSyncRecursive(path + "/" + fileName, allFiles);
        });
    }
}

var allFiles = [];
readdirSyncRecursive("/path/to/search", allFiles);
console.info(allFiles); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T21:51:44.093

```
 var fs = require('fs');

var array = fs.readdirSync(__dirname);
for (i = 0; i < array.length; i++){
    if (array[i].indexOf(".") == (-1))
    {
        // you need to use the return value from concat
        array = array.concat(array[i] + "/" + fs.readdirSync(__dirname + "/" + array[i]));
        console.log('if executed');
    }

}
console.log(array); 
```

# annotations - 半自动注释工具 - 如何找到 RDF 三元组

> ID：10367815
> 
> 赞同：6
> 
> 时间：2012-04-28T21:44:41.103
> 
> 标签：annotations, rdf, named-entity-recognition, named-entity-extraction

我正在为医学文本开发一个半自动注释工具，我完全迷失在寻找用于注释的 RDF 三元组。

我目前正在尝试使用基于 NLP 的方法。我已经研究过斯坦福 NER 和 OpenNLP，它们都没有用于提取疾病名称的模型。

我的问题是：* 如何创建一个新的 NER 模型来提取疾病名称？我可以从 OpenNLP 或 Standford NER 那里获得任何帮助吗？* 除了 NLP 之外，还有另一种方法可以从文本中提取 RDF 三元组吗？

任何帮助，将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T14:53:06.473

我用 OpenNLP 和 LingPipe 做了一些类似于你需要的东西。我发现 LingPipe 的基于字典的精确分块足以满足我的用例并使用它。此处提供的文档：http: [//alias-i.com/lingpipe/demos/tutorial/ne/read-me.html](http://alias-i.com/lingpipe/demos/tutorial/ne/read-me.html)

你可以在这里找到一个小演示：

*   [https://github.com/castagna/nerdf](https://github.com/castagna/nerdf)

如果地名词典/字典方法对您来说不够好，您可以尝试创建自己的模型，OpenNLP 也有用于训练模型的 API。文档在这里： http: [//opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.namefind.training](http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.namefind.training)

从自然语言中提取 RDF 三元组是与识别命名实体不同的问题。NER 是一个相关的，也许是必要的步骤，但还不够。要从自然语言中提取 RDF 语句，您不仅需要识别语句的主语和宾语等实体。但是您还需要识别这些实体的动词和/或关系，还需要将它们映射到 URI。

# ruby - 类方法（红宝石）

> ID：10367817
> 
> 赞同：0
> 
> 时间：2012-04-28T21:44:45.873
> 
> 标签：ruby, class-method

你能告诉我为什么这不起作用吗？

下面的代码正确输出 student1 和 student2，但我无法让类方法在 student3 上工作。

我要做的就是分配一个类方法`.create_with_species`，其中物种属性=“人类”。

但是，当我运行程序时，我收到“局部变量或方法`sex`未定义”的错误。我是新手，我无法弄清楚我做错了什么！

我的理解是，由于我在 Initialize 方法中确定了“性别”，我应该能够在类方法中使用它，例如`create_with_species`. 我尝试在类方法中明确定义性别， as `student.sex = sex`，但仍然遇到相同的错误。

```
class Students

  attr_accessor :sex, :age, :species

  def self.create_with_species(species)
    student = Students.new(sex,age)
    student.species = species
    return student
  end

  def initialize(sex, age)
    @sex = sex
    @age = age
    puts "----A new student has been added----"
  end

end

student1 = Students.new("Male", "21")
puts student1.sex
puts student1.age
puts

student2 = Students.new("Female", "19")
puts student2.sex
puts student2.age

student3 = Students.create_with_species("human") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:48:33.940

就语法而言，您必须使用`@sex`and`@age`而不是`sex`and `age`。否则它们不会被解释为实例属性。

但是您确实意识到代码的逻辑被破坏了吗？我知道您想使用静态工厂方法模式，但这不是您应该这样做的方式，因为当您调用该方法`@sex`并且`@age`这些变量是实例属性而不是类属性时它是 nil 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:53:01.847

`sex`并且`age`没有定义。你的意思是使用类变量吗？使用`@age`or`@sex`将导致 nils，因为没有设置类属性并且尚未创建实例，因此也没有设置实例变量。您无需`Students.new`在`create_with_species`. `new`就足够了，因为您的范围是`Students`. 我认为你最好传递一个哈希对象来初始化，然后在那里设置物种变量。如果没有明确分配，它将为零，或者你可以有一个默认值。

尝试这个：

```
class Students

  attr_accessor :sex, :age, :species

  def initialize(options)
    @sex = options[:sex]
    @age = options[:age]
    @species = options[:species]
    puts "----A new student has been added----"
  end

end

student1 = Students.new(:sex => "Male", :age => "21")
puts student1.sex
puts student1.age
puts student1.species
puts

student2 = Students.new(:sex => "Female", :age => "19")
puts student2.sex
puts student2.age

student3 = Students.new(
    :sex => "Hermi", :age => "2", :species => "alien"
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T21:55:23.797

`@sex`并且`@age`是实例属性。您不能在类方法中使用它们（它们是什么意思？）。你已经写了 just `sex`and `age`inside `create_with_species`，但又一次：这些应该指的是什么？（在实例方法中，它们将被调用访问器，但此时没有实例可以调用访问器。）

考虑：当你说

```
student3 = Students.create_with_species("human") 
```

`sex`这个新的`age`学生对象应该得到什么？你没有指定任何。

# ruby-on-rails - Ubuntu 未检测到 Rails 安装

> ID：10367818
> 
> 赞同：2
> 
> 时间：2012-04-28T21:44:48.567
> 
> 标签：ruby-on-rails, ruby, ubuntu, installation

在升级包破坏了我上次安装后，我最近重新安装了 Ubuntu 12.04。我一直在按照[这个演练](http://rails.vandenabeele.com/blog/2011/11/26/installing-ruby-and-rails-with-rvm-on-ubuntu-11-dot-10/)来恢复 Rails 并继续处理我现有的项目。我已经安装了`rvm`，列出的所有软件包`rvm requirements`，以及我所有的开发工具（例如，`vim`、`git`等）。

`rails`但是，无论我是否正在尝试，我都会卡在命令上`rails (n,s,g)`，并返回错误消息

```
$ rails
The program 'rails' is currently not installed.  You can install it by typing:
sudo apt-get install rails 
```

我已经做了以下事情：

```
$ gem install rails
Successfully installed rails-3.2.3
1 gem installed 
```

但是根据以下检查，它仍然没有安装。

```
$ which gem
/home/eyoung/.rvm/bin/gem
$ which ruby
/home/eyoung/.rvm/bin/ruby
$ which rails
(no output) 
```

我无计可施；关于发生了什么的任何想法？

额外细节：
操作系统：Ubuntu 12.04 x86_64
软件包：RVM 安装了 Ruby 1.9.3p194 w/openssl 和 Rubygems
`ruby`并且`gem`在系统上`$PATH`

**编辑：**应要求，

```
$ gem list rails
*** LOCAL GEMS ***
rails (3.2.3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:58:43.643

由于`rails`安装了 gem 并且所有其他路径看起来都正确，您需要设置`rvm`使用该 ruby​​ 作为您的默认版本。它将正确设置所有路径，以便您可以使用您的宝石和`rails`命令。

```
rvm use 1.9.3 --default 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:53:07.573

我也更新到 12.04，也遇到了这个问题。经过相当多的挠头，我决定重新安装rvm。

参考[上一个问题](https://stackoverflow.com/questions/9056008/installed-ruby-1-9-3-with-rvm-but-command-line-doesnt-show-ruby-v/9056395#9056395)。

# c# - 字符串连接/覆盖？

> ID：10367821
> 
> 赞同：2
> 
> 时间：2012-04-28T21:45:44.403
> 
> 标签：c#, string, concatenation

这是一个读取 CSV 文件的程序，将值添加到字典类，然后分析文本框中的字符串以查看是否有任何单词与字典条目匹配。它会将缩写词（LOL、ROFL 等）替换为它们的真实单词。它通过将输入的文本拆分为单个单词来匹配字符串。

```
 public void btnanalyze_Click(object sender, EventArgs e)
    {
        var abbrev = new Dictionary<string, string>();
        using (StreamReader reader = new StreamReader("C:/Users/Jordan Moffat/Desktop/coursework/textwords0.csv"))
        {
            string line;
            string[] row;

            while ((line = reader.ReadLine()) != null)
            {
                row = line.Split(',');

                abbrev.Add(row[0], row[1]);
                Console.WriteLine(abbrev);
            }
        }

        string twitterinput;
        twitterinput = "";
        // string output;
        twitterinput = txtInput.Text;
        {
            char[] delimiterChars = { ' ', ',', '.', ':', '\t' };

            string text = twitterinput;

            string[] words = twitterinput.Split(delimiterChars);

         string merge;
            foreach (string s in words)
            {
                if (abbrev.ContainsKey(s))
                {
                    string value = abbrev[s];

                    merge = string.Join(" ", value);
                }

                    if (!abbrev.ContainsKey(s))
                    {
                        string not = s;
                        merge = string.Join(" ", not);
                    }

                        ;
                        MessageBox.Show(merge);

                } 
```

到目前为止的问题是最终的字符串被输出到一个文本框中，但只在它覆盖时打印最后一个单词。这是一项大学作业，因此我正在寻找正确方向的推动力，而不是实际答案。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:52:41.543

`string.Join()`接受一组字符串，将它们连接在一起并返回结果。但是在您的情况下，该集合仅包含一项：`value`, 或`not`.

为了使您的代码正常工作，您可以使用以下内容：

```
merge = string.Join(" ", merge, value); 
```

但是由于字符串的工作方式，这会很慢，所以你应该`StringBuilder`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:37:02.887

Better to User `StringBuilder` Class for such purpose

[http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:52:27.803

这就是问题：

```
string not = s;
merge = string.Join(" ", not); 
```

您只是将单个元素（最新的）与空格分隔符连接起来，从而覆盖您之前放入`merge`.

如果您想坚持使用字符串，则需要使用`Concat`将新单词附加到输出中，但这会很慢，因为您每次都在重新创建字符串。`StringBuilder`使用它来创建输出会更有效。

如果您的作业要求您使用`Join`来构建输出，那么您需要在`words`循环遍历数组时替换数组中的目标词。但是，为此，您需要使用其他一些循环机制，而不是`foreach`因为它不允许您修改要循环的数组。

# concurrency - 在 Ada 任务中创建过程或函数

> ID：10367823
> 
> 赞同：2
> 
> 时间：2012-04-28T21:45:57.430
> 
> 标签：concurrency, parallel-processing, task, ada

我正在 Ada 中创建以下任务，我希望它包含一个告诉我缓冲区计数的过程。我怎样才能做到这一点？

```
package body Buffer is

  task body Buffer is

    size: constant := 10000; -- buffer capacity
    buf: array(1.. size) of Types.Item;
    count: integer range 0..size := 0;
    in_index,out_index:integer range 1..size := 1;

  begin
    procedure getCount(currentCount: out Integer) is
    begin   
      currentCount := count;
    end getCount;   

    loop
      select
        when count<size =>
          accept put(item: in Types.Item) do
            buf(in_index) := item;
          end put;
          in_index := in_index mod size+1;
          count := count + 1;
        or
          when count>0 =>
            accept get(item:out Types.Item) do
              item := buf(out_index);
            end get;
            out_index := out_index mod size+1;
            count := count - 1;
        or
          terminate;
      end select;
    end loop;
  end Buffer;

end Buffer; 
```

当我编译这段代码时，我得到一个错误

> 声明必须在“开始”之前

参考`getCount`过程的定义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T11:59:06.667

声明必须在“开始”之前，并且您的“getCount”声明*在*“开始”之后。重新定位它：

```
procedure getCount(currentCount: out Integer) is
begin   
    currentCount := count;
end getCount;   

begin 
```

但说真的，请注意垃圾神的建议。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T04:53:36.327

直接的问题是您指定了一个[*子程序主体*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-6-3.html) ~~，而没有首先[](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-6-1.html)~~*在[*任务主体*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-9-1.html)*的已处理语句序列*部分中指定相应的~~[*子程序声明*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-6-1.html)~~。它应该放在*声明部分，如此*[处](https://stackoverflow.com/a/10371954/230513)所示。[](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-9-1.html)*

 ***更大的问题似乎是创建有界缓冲区，[*受保护的类型*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-9-4.html)似乎更适合。示例可以在[*§II.9 Protected Types*](http://www.adaic.org/resources/add_content/standards/95rat/rat95html/rat95-p1-2.html#9)和[*§9.1 Protected Types*](http://www.adaic.org/resources/add_content/standards/95rat/rat95html/rat95-p2-9.html#1)中找到。在`protected type Bounded_Buffer`中，您可以添加一个

```
function Get_Count return Integer; 
```

拥有这样的身体：

```
function Get_Count return Integer is
begin
   return Count;
end Get_Count; 
```***

# wmi - PowerShell错误wmi

> ID：10367829
> 
> 赞同：1
> 
> 时间：2012-04-28T21:46:59.380
> 
> 标签：wmi

嗨，我是 power shell 的新手，我似乎无法让这个脚本运行它是在工作组中的计算机上使用命令提示符远程执行命令这是我得到脚本的错误如下我正在运行脚本一台win 7机器我想远程执行的机器是windows xp sp3防火墙关闭并且com设置设置为默认的身份验证设置和识别模拟和帮助会很棒

这是错误 Invoke-WmiMethod ：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）在 C:\Users\Kevin\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1:57 char:40 + $newproc = Invoke-WmiMethod <<<< -class Win32_process -name Create ` + CategoryInfo : NotSpecified: (:) [Invoke-WmiMethod], UnauthorizedAccessException + FullyQualifiedErrorId : System.UnauthorizedAccessException,Microsoft.PowerShell.Commands.InvokeWmiMethod

```
$command = Read-Host " Enter command to run" 
    $user = "\Administrator"
    $Domainname = $HostName +$user
    $login = Get-Credential $domainname

        [string]$cmd = "CMD.EXE /C " +$command 
                        } 
  process { 
        $newproc = Invoke-WmiMethod -class Win32_process -name Create `
            -ArgumentList ($cmd) -EnableAllPrivileges -ComputerName $HostName -authentication Packetprivacy -Impersonation 3 -Credential $login 
        if ($newproc.ReturnValue -eq 0 ) 
                { Write-host -foregroundcolor Green "Command $($command) Ran Sucessfully on $($HostName)"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:07:34.970

我认为这是因为 Get-Credential 不会将密码传递给 Invoke-WmiMethod 的 -credential。我通过使用“convertto-securestring”创建凭证密码来做到这一点

我知道它不像您必须以纯文本形式输入密码那样安全，但如果您是唯一使用该脚本进行维护的人，或者这样......这没什么大不了的。

尝试这个：

```
$command = Read-Host " Enter command to run" 
$pass = ConvertTo-SecureString "yourpassword" -Force -AsPlainText
$Domainname = 'Domain'
$user = '\administrator'
$login = $Domainname + $user
$cred = (New-Object -TypeName System.Management.Automation.PSCredential -ArgumentList $login, $pass)

        [string]$cmd = "CMD.EXE /C " +$command 
                        } 
  process { 
        $newproc = Invoke-WmiMethod -class Win32_process -name Create `
            -ArgumentList ($cmd) -EnableAllPrivileges -ComputerName $HostName -authentication Packetprivacy -Impersonation 3 -Credential $cred
        if ($newproc.ReturnValue -eq 0 ) 
                { Write-host -foregroundcolor Green "Command $($command) Ran Sucessfully 
```

# php - MYSQL+无法从 PHP 连接

> ID：10367831
> 
> 赞同：2
> 
> 时间：2012-04-28T21:47:35.213
> 
> 标签：php, mysql

我正在使用 nginx、PHP 和 MYSQL。我设置了一个数据库和一个用户，我可以通过 MySQL CLI 客户端选择它：

```
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 52
Server version: 5.1.61-0+squeeze1 (Debian)
mysql> use cinema
Database changed 
```

但是，当我尝试从我的 php 脚本连接到它时，它似乎不起作用：

```
<?php
$link = mysql_connect('localhost', 'root', '************');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?> 
```

输出是：

```
Could not connect: Access denied for user 'root'@'localhost' `(using password: NO)` 
```

( ***** ** *****当然是我的真实密码...)。

有谁知道为什么它说`(using password: NO)`虽然我在我的代码中明确使用了一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T21:50:59.363

可能是[mysql安全模式](http://www.php.net/manual/en/ini.core.php#ini.sql.safe-mode)打开了，然后密码字段被忽略了。

# ruby-on-rails - 如何为诸如 Vacuum 之类的 gem 运行示例代码？

> ID：10367833
> 
> 赞同：3
> 
> 时间：2012-04-28T21:48:02.643
> 
> 标签：ruby-on-rails, ruby, gem, vacuum

我是 Rails 新手，希望建立一个使用亚马逊产品 API 的网站。我习惯于在 PHP 中使用 API，但如果可能的话，我热衷于迁移到 Ruby。

我一直在尝试各种 Amazon 产品 API gem、Ruby/AWS、Amazon-ECS，现在还有 Vacuum。然而，我坚持的一个问题是如何实际使用他们在自述文件中建议的代码。

例如，真空：

[https://github.com/hakanensari/vacuum/](https://github.com/hakanensari/vacuum/)

它提到了以下代码：

```
req = Vacuum.new :product_advertising

req.configure do |config|
  config.key    'key'
  config.secret 'secret'
  config.tag    'tag'
end

req.build operation:    'ItemSearch',
      search_index: 'Books',
      keywords:     'Deleuze'
res = req.get

res.valid? or raise res.code

p res.body 
```

不确定将这段代码放在哪里，我为测试应用程序设置了一个控制器并将其放在那里。但是它在第一行失败了，说没有定义真空（它作为 gem 安装在 gemfile 中，我已经运行了 bundle install）。

我可能正在做一些愚蠢但易于修复的事情，并且非常感谢任何建议。

D

编辑：

感谢 x1a4，下面的代码应该替换上面的配置块：

```
req.configure do |config|
  config.key =    'key'
  config.secret = 'secret'
  config.tag =    'tag'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T20:05:47.263

感谢 x1a4，下面的代码应该替换上面的配置块：

```
req.configure do |config|
  config.key =    'key'
  config.secret = 'secret'
  config.tag =    'tag'
end 
```

# java - 如何通过使用另一个组合框摆动来控制组合框

> ID：10367834
> 
> 赞同：4
> 
> 时间：2012-04-28T21:48:09.493
> 
> 标签：java, swing

I have two combo box the items first one is (women and men).I want when user select women in first combo box the list of women's dress will appear in second combo box and when men is selected the list of men's dress will appear in第二个。可以通过使用 JCombo 框来实现此功能吗？如果是的话，我该怎么做，请给我一个例子。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T22:26:15.217

在[如何使用组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)和[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)中查看如何使用模型。根据第一个组合框中的选择 - 重建、过滤或替换第二个组合框的模型。您可以使用/扩展[DefaultComboBoxModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/DefaultComboBoxModel.html) - 由`JComboBox`. 例如考虑这个片段：

```
final JComboBox genderComboBox = null;
final JComboBox itemComboBox = null;

final DefaultComboBoxModel hisModel = new DefaultComboBoxModel(new String[]{"a", "b", "c"});
final DefaultComboBoxModel herModel = new DefaultComboBoxModel(new String[]{"x", "y", "z"});

genderComboBox.addActionListener (new ActionListener () {
    public void actionPerformed(ActionEvent e) {
        if ("Men".equals(genderComboBox.getSelectedItem())){
            itemComboBox.setModel(hisModel);    
        } else {
            itemComboBox.setModel(herModel);    
        }
    }
}); 
```

或者，在第一个组合中选择后，您可以手动重建第二个组合中的项目，即：使用`JComboBox`方法`removeAllItems()`和`addItem()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T21:52:15.013

您必须**将事件侦听器添加到第一个组合框**。这样您就可以知道它的选择何时发生变化，您可以询问它并用适当的数据填充您的第二个组合框。

更多信息位于[http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#listeners](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#listeners)

# iphone - 从 Mac OS 访问已连接 iPhone 的运动传感器的输出

> ID：10367838
> 
> 赞同：0
> 
> 时间：2012-04-28T21:48:42.937
> 
> 标签：iphone, macos, sensors, motion

我正在编写一个使用运动传感器的 iPhone 应用程序，为了进行舒适的编程和测试，我想从我正在编程的 MacBook 访问连接的 iPhone 中这些传感器的输出。这样我就可以移动我的 iPhone 并在我的显示器上可视化或打印一些值，而不是在 iPhone 中。有没有可能，如果有，怎么做？

谢谢。

# email - 跟进使用VBA发送邮件

> ID：10367841
> 
> 赞同：9
> 
> 时间：2012-04-28T21:49:03.173
> 
> 标签：email, vba, excel

这是关于使用 VBA 发送电子邮件的几条消息的后续。

大多数建议使用 Outlook、CDO 或 MAPI：

```
Set appOL = CreateObject("Outlook.Application") 

Set msgOne = CreateObject("CDO.Message") 

Set mapi_session = New MSMAPI.MAPISession 
```

但显然 Outlook 会要求我更改我们的工作组安全设置，而 CDO 和 MAPI 会要求我添加 DLL 或其他东西。

我正在尝试使用 Excel 来组织工作中的小组作业，但我无法以任何方式修改其他人的计算机。

有没有更简单的方法从 Excel 宏发送电子邮件？
我所需要的只是消息正文中没有附件的一段文本。

整个星期我都在浏览 Google、MSDN 和 StackOverflow，但我被困在一艘无处可去的慢船上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T22:19:48.477

基于 Marc 提到的内容，这是一个**久经考验**的版本。

```
Option Explicit

Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, _
ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, _
ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long

Sub SendMail()
    Dim objMail As String
    Dim oMailSubj, oMailTo, oMailBody As String

    On Error GoTo Whoa

    oMailSubj = "YOUR SUBJECT GOES HERE"
    oMailTo = "ABC@ABC.COM"
    oMailBody = "BLAH BLAH!!!!"
    objMail = "mailto:" & oMailTo & "?subject=" & oMailSubj & "&body=" & oMailBody

    ShellExecute 0, vbNullString, objMail, vbNullString, vbNullString, vbNormalFocus

    Application.Wait (Now + TimeValue("0:00:03"))
    Application.SendKeys "%s"

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

**跟进**

> > > 谢谢（你的）信息。我已经排除了 ShellExecute，因为它将整个参数字符串限制为 250 个字符，而我需要大约 2000 个字符来发送消息。但看起来 SE 是在我的情况下真正可行的唯一选择。– Humanoid1000 7 小时前

这是我在下面的评论中提到的“可怕（*我喜欢 JFC 所说的方式！！！*）”方式，效果很好:) 顺便说一句，我只有 Outlook 作为我的默认客户端，所以我已经用它进行了测试。

**代码**

```
Option Explicit

Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, _
ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, _
ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long

Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Sub SendMail()
    Dim objMail As String
    Dim oMailSubj As String, oMailTo As String
    Dim i As Long
    Dim objDoc As Object, objSel As Object, objOutlook As Object
    Dim MyData As String, strData() As String

    On Error GoTo Whoa

    '~~> Open the txt file which has the body text and read it in one go
    Open "C:\Users\Siddharth Rout\Desktop\Sample.Txt" For Binary As #1
    MyData = Space$(LOF(1))
    Get #1, , MyData
    Close #1
    strData() = Split(MyData, vbCrLf)

    Sleep 300

    oMailSubj = "YOUR SUBJECT GOES HERE"
    oMailTo = "ABC@ABC.COM"
    objMail = "mailto:" & oMailTo & "?subject=" & oMailSubj

    ShellExecute 0, vbNullString, objMail, vbNullString, vbNullString, vbNormalFocus

    Sleep 300

    Set objOutlook = GetObject(, "Outlook.Application")
    '~~> Get a Word.Selection from the open Outlook item
    Set objDoc = objOutlook.ActiveInspector.WordEditor
    Set objSel = objDoc.Windows(1).Selection

    objDoc.Activate

    Sleep 300

    For i = LBound(strData) To UBound(strData)
        objSel.TypeText strData(i)
        objSel.TypeText vbNewLine
    Next i

    Set objDoc = Nothing
    Set objSel = Nothing

    '~~> Uncomment the below to actually send the email
    'Application.Wait (Now + TimeValue("0:00:03"))
    'Application.SendKeys "%s"

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

**快照**

包含消息的文本文件

![在此处输入图像描述](../Images/fbf2ec355c2e0d527fdfaf0594eecd1b.png)

发送前的电子邮件

![在此处输入图像描述](../Images/7d3faf131b2b1a5563cc20788545d649.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T21:58:04.093

您可能可以使用该`Shell`命令。

```
Shell("mailto:username@isp.com") 
```

如果 Outlook 是您的默认电子邮件程序，我认为 windows 会正确解释它（它是从 windows 运行对话框中完成的，但不确定是否来自 VBA）。试试看。我现在不在 Excel 面前。

查看“mailto”的参数以了解如何将主题和正文添加到该字符串。

**更正：** 这只会生成电子邮件，但不会发送。无视我的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:37:50.400

这是最终结果：

原来，`SendMail()`在家工作但不在工作中，而是`CreateObject("Outlook.Application")`在工作中工作。

我的安全设置不是 Outlook 的问题，这是一个普通的错字。

无论哪种方式，对于其他迷失在这个主题上的人来说，这个页面上都有很多很好的信息。

# asp.net - 获取选定文本 asp.net 自定义服务器控件

> ID：10367847
> 
> 赞同：1
> 
> 时间：2012-04-28T21:50:48.553
> 
> 标签：asp.net, custom-controls, custom-server-controls, servercontrols, asp.net-customcontrol

我需要通过javascript获取自定义控件中的最新文本集。当我试图从服务器控件中获取选定的文本时，它总是返回默认文本而不是修改后的文本。如何在 servercontrol 中保留 javascript 设置的最新值？以下是供您参考的完整代码..

**服务器控制1.cs**

```
[assembly: WebResource("ServerControl1.Scripts.JScript1.js", "text/javascript")]
namespace ServerControl1
{
[DefaultProperty("Text")]
[ToolboxData("<{0}:ServerControl1 runat=server></{0}:ServerControl1>")]
public class ServerControl1 : WebControl
{
    public List<string> ListItems
    {
        get
        {
            return ViewState["items"] as List<string>;
        }
        set
        {
            ViewState["items"] = value;
        }
    }

    public string Text
    {
        get
        {
            return (FindControl("middleDiv").FindControl("anchorID") as HtmlAnchor).InnerText;
        }
        set
        {
            ((FindControl("middleDiv").FindControl("anchorID") as HtmlAnchor)).InnerText = value;
        }
    }

    protected override void CreateChildControls()
    {
        base.CreateChildControls();

        HtmlGenericControl selectedTextContainer = new HtmlGenericControl("div");
        selectedTextContainer.ClientIDMode = System.Web.UI.ClientIDMode.Static;
        selectedTextContainer.ID = "middleDiv";

        HtmlAnchor selectedTextAnchor = new HtmlAnchor();
        selectedTextAnchor.ClientIDMode = System.Web.UI.ClientIDMode.Static;
        selectedTextAnchor.ID = "anchorID";
        selectedTextAnchor.HRef = "";
        selectedTextContainer.Controls.Add(selectedTextAnchor);

        HtmlGenericControl unList = new HtmlGenericControl("ul");

        foreach (string item in ListItems)
        {
            HtmlGenericControl li = new HtmlGenericControl("li");
            HtmlAnchor anchor = new HtmlAnchor();
            anchor.HRef = "";
            anchor.Attributes.Add("onclick", "updateData()");
            anchor.InnerText = item;
            li.Controls.Add(anchor);
            unList.Controls.Add(li);
        }

        selectedTextContainer.Controls.Add(unList);
        Controls.Add(selectedTextContainer);

        ChildControlsCreated = true; 
    }

    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);
        string resourceName = "ServerControl1.Scripts.JScript1.js";

        ClientScriptManager cs = this.Page.ClientScript;
        cs.RegisterClientScriptResource(typeof(ServerControl1), resourceName);
    }
 }
} 
```

**JScript1.js**

```
function updateData() {
var evt = window.event || arguments.callee.caller.arguments[0];
var target = evt.target || evt.srcElement;
var anchor = document.getElementById("anchorID");
anchor.innerText = target.innerText;
return false;
} 
```

**测试页代码隐藏**

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack)
  {
     List<string> items = GetDataSource();
     ServerControl1.ListItems = items;
     ServerControl1.Text = "Select ..";
  }
}
protected void ClientButton_Click(object sender, EventArgs e)
{
   string selectedText = ServerControl1.Text;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:32:07.397

The server won't get your client changes unless you POST the changes to him. Your HtmlAnchors are being rendered in HTML as `<a>` controls, and these type of controls won't POST anything to the server.

You're going to need an `<input>` control to input the changes into the server (that's why they're called input controls after all). I suggest an `<input type=hidden>` to hold the value of the `anchor.innerText` and keeps its state.

Your Javascript function needs to be modified so it updates the `anchor.innerText` AND updates the hidden input value as well. This way when the page gets posted back to the server you can retrieve the updated and client-modified value from the hidden field.

First you need to define as private fields your `selectedTextAnchor` and the `hiddenField` you are going to insert. This is because you need to access them in your CreateChildControls method as well as in the getter and setter of yout Text property. Much in the way the partial designer classes define the controls you want to have available in code-behind.

**ServerControl.cs**

```
private HtmlAnchor selectedTextAnchor;
private HtmlInputHidden hiddenField; 
```

In the CreateChildControls method you need to insert the hidden field.

You'll notice I removed the use of ClientIDMode.Static. Using that mode would make your client controls to have the same fixed IDs and Javascript might get confused when you have multiple copies of your ServerControl in a page, and thus losing the reusable purpose of a custom control.

Instead, you need to provide your Javascript function with the ClientID's of the controls it needs to modify. **The key here is that you need to attach your controls to the Control's hierarchy BEFORE you try to get their ClientID's.**

As soon as you do `this.Controls.Add(dummyControl)`, you're making dummyControl to become a part of the Page and its `dummyControl.ClientID` will be suddenly changed to reflect the hierarchy of the page you're attaching it into.

I changed the order at which your controls are attached to the Control's collection so we can grab their ClientID's at the time we build the onclick attribute and pass the parameters so your Javascript function knows which anchor and hiddenField to affect.

**ServerControl.cs**

```
protected override void CreateChildControls()
{
    base.CreateChildControls();

    // Instantiate the hidden input field to include
    hiddenField = new HtmlInputHidden();
    hiddenField.ID = "ANCHORSTATE";

    // Insert the hiddenfield into the Control's Collection hierarchy
    // to ensure that hiddenField.ClientID contains all parent's NamingContainers
    Controls.Add(hiddenField);

    HtmlGenericControl selectedTextContainer = new HtmlGenericControl("div");
    // REMOVED: selectedTextContainer.ClientIDMode = System.Web.UI.ClientIDMode.Static;
    selectedTextContainer.ID = "middleDiv";

    selectedTextAnchor = new HtmlAnchor();
    // REMOVED: selectedTextAnchor.ClientIDMode = System.Web.UI.ClientIDMode.Static;
    selectedTextAnchor.ID = "anchorID";
    selectedTextAnchor.HRef = "";
    selectedTextContainer.Controls.Add(selectedTextAnchor);

    // Insert the selectedTextContainer (and its already attached selectedTextAnchor child) 
    // into the Control's Collection hierarchy
    // to ensure that selectedTextAnchor.ClientID contains all parent's NamingContainers
    Controls.Add(selectedTextContainer);

    HtmlGenericControl unList = new HtmlGenericControl("ul");

    foreach (string item in ListItems)
    {
        HtmlGenericControl li = new HtmlGenericControl("li");
        HtmlAnchor anchor = new HtmlAnchor();
        anchor.HRef = "";

        // The updateData function is provided with parameters that will help
        // to know who's triggering and to find the anchor and the hidden field.
        // ClientID's are now all set and resolved at this point.
        anchor.Attributes.Add("onclick", "updateData(this, '" + selectedTextAnchor.ClientID + "', '" + hiddenField.ClientID + "')");
        anchor.InnerText = item;
        li.Controls.Add(anchor);
        unList.Controls.Add(li);
    }

    selectedTextContainer.Controls.Add(unList);
} 
```

Note the use of the keyword `this` in the updateData function, it'll help us to grab the object that is triggering the action. Also note that both Id's are passed as strings (with single quotes)

The Javascript function would need to be modified so it updates the anchor and the hidden input field.

**JScript1.js**

```
 function updateData(sender, anchorId, hidFieldId) {
            // Update the anchor
            var anchor = document.getElementById(anchorId);
            anchor.innerText = sender.innerText;
            // Update the hidden Input Field
            var hidField = document.getElementById(hidFieldId);
            hidField.value = sender.innerText;
            return false;
        } 
```

The last thing to do is change the way you are setting and getting your Text property.

When you **GET** the property you need to check if it's a Postback, and if it is, then you want to check if among all the info that comes from the browser there is your HiddenInputField. You can grab all the info coming from the client right at the Request object, more specifically, in the Request.Form.

![Request.Form.AllKeys](../Images/40b40ca75aa6487aa49f0102a73b9468.png)

All enabled input controls on your page will be part of the Request.Form collection, and you can get their values by using `Request.Form[anyInputControl.UniqueID]`. Note that the key used for this object is the UniqueID, NOT ClientID.

Once you get your client-modified value from the hidden input, you assign its value to the `selectedTextAnchor`, otherwise it'll go back to the original "Select..." text.

When you **SET** the property, you just need to assign it to the `selectedTextAnchor`.

In **both GET and SET** you need to call `EnsureChildControls()`, which will actually call your `CreateChildControls()` to make sure that your `selectedTextAnchor` and `hiddenField` controls are instantiated before you try to get some of their properties. Pretty much the same way that it's done in [Composite Controls](http://msdn.microsoft.com/en-us/library/aa719734%28v=vs.71%29.aspx).

**ServerControl.cs**

```
public string Text
{
    get
    {
        EnsureChildControls();
        if (this.Page.IsPostBack)
        {
            string HiddenFieldPostedValue = Context.Request.Form[hiddenField.UniqueID];
            // Assign the value recovered from hidden field to the Anchor
            selectedTextAnchor.InnerText = HiddenFieldPostedValue;
            return HiddenFieldPostedValue;
        }
        else
        {
            return selectedTextAnchor.InnerText;
        }
    }
    set
    {
        EnsureChildControls();
        selectedTextAnchor.InnerText = value;
    }
} 
```

This way you can have a control that recognizes the changes made in client. Remember that server won't know any change in client unless you notice him.

Another approach would be to notice the server everytime you click a link through an ajax request, but this would require a whole new different code.

Good luck!

# asp.net - 是否可以允许匿名用户仅浏览文件夹中的几个文件

> ID：10367850
> 
> 赞同：1
> 
> 时间：2012-04-28T21:51:13.330
> 
> 标签：asp.net, web-config

我想让匿名用户只浏览几个文件，如 default.aspx、aboutus.aspx、contactus.aspx 等。有没有办法将所有这些文件名写在一个地方，否则我将不得不一次又一次地重复下面的代码对于所有文件？

```
<location path="Default.aspx">
<system.web>
  <authorization>
    <allow users="*"  />
  </authorization>
</system.web> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:09:16.627

无法在单个位置元素中指定多个路径。我认为你要求做的是这样的：

```
<location path="Default.aspx,aboutus.aspx,contactus,aspx">
    <system.web>
        <authorization>
            <allow users="*"  />
        </authorization>
    </system.web>
</location> 
```

不幸的是，我不相信这是可能的。

您有几种方法可以做到这一点。

A) 多次指定 location 元素，一个用于您希望允许匿名访问的每个文件：

```
<location path="Default.aspx">
    <system.web>
        <authorization>
            <allow users="*"  />
        </authorization>
    </system.web>
</location>
<location path="aboutus.aspx">
    <system.web>
        <authorization>
            <allow users="*"  />
        </authorization>
    </system.web>
</location>
<location path="contactus,aspx">
    <system.web>
        <authorization>
            <allow users="*"  />
        </authorization>
    </system.web>
</location> 
```

B) 将您希望允许匿名访问的所有文件放在一个单独的目录中，就像上面提到的 Admirer 一样。

C）您可能想探索使用文件授权而不是 URL 授权。使用文件授权，您可以将 Windows ACL 权限直接分配给文件。可以将您想要保护的文件分配给一个 Windows 帐户，并将您希望允许匿名访问的文件分配给另一个 ACL 帐户。然后，您的任务是使用 ASP.Net 模拟来映射来自匿名访问请求的请求，以在只能访问未受保护文件的 Windows 帐户的安全上下文中执行，并将来自经过身份验证的请求的请求映射到 Windows 帐户有权访问所有文件。

我不确定您是否想走这条路，因为简单地多次复制“位置”元素可能要容易得多，对于要公开给匿名访问的每个资源一次。但是，如果您确实想研究这个，[这里](http://msdn.microsoft.com/en-us/library/ff647404.aspx)或[这里有一些很好的资源](http://www.west-wind.com/weblog/posts/2005/Feb/24/Using-programmatic-Impersonation-from-an-ASPNET-Page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:04:32.083

我认为您可以根据文件夹名称进行分组。看看这个[http://weblogs.asp.net/gurusakar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx)

# asp.net-mvc-4 - PartialView() 不返回带下划线的视图

> ID：10367852
> 
> 赞同：5
> 
> 时间：2012-04-28T21:51:18.207
> 
> 标签：asp.net-mvc-4, asp.net-mvc-partialview

模板控制器：

这有效：

```
 return PartialView("_Create"); 
```

但这不起作用：

```
return PartialView(); 
```

asp.net mvc 约定实际上应该检查具有控制器名称=>“模板”的视图文件夹，并检查与操作名称相同的视图=>“创建”。

这对于返回 View() 有效。为什么 return PartialView() 不只考虑下划线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-12T23:18:38.493

这个答案专门针对 ASP.NET MVC5。它可能需要稍作修改才能与其他版本的 MVC 一起使用，但它通常应该是适用的。

要`return Partial(model)`在部分名称上使用下划线，您需要一个自定义视图引擎。幸运的是，这是一个非常简单的自定义视图引擎。

```
public class CustomRazorViewEngine : RazorViewEngine
{
    public CustomRazorViewEngine()
    {
      var underScored = new[] { "~/Views/{1}/_{0}.cshtml", "~/Views/{1}/_{0}.vbhtml" }

      PartialViewLocationFormats = underScored.Union(PartialViewLocationFormats).ToArray();
    }
} 
```

以下格式是共享视图的默认模式：

```
~/Views/Shared/{0}.cshtml
~/Views/Shared/{0}.vbhtml 
```

如果你愿意，你也可以包括这些的替代品。如果您特别想只提供带有下划线的文件，请删除联合并仅使用：`PartialViewLocationFormats = underScored;`

这与剃刀视图引擎有关，如果这是您选择的引擎，我认为它可以与 webforms 视图引擎相媲美。

最后，您需要将其注册为视图引擎：

```
public class Startup
{
    public void Configuration(IAppBuilder app)
    {
        //View Engines
        ViewEngines.Engines.Remove(ViewEngines.Engines.Single(x => x is RazorViewEngine));
        ViewEngines.Engines.Add(new CustomRazorViewEngine()); 
```

该类`Startup`特定于 MVC5，这在版本之间会略有不同。您可以在其他版本中将 App_Start 文件与 webactivator 或 global.asax 一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T19:31:40.050

局部视图应该以下划线开头只是一个命名约定。但奇怪的是 /mvc 引擎不会搜索带有下划线的部分视图。

1.  所以你必须明确地说`return PartialView("_Create")`。
    或者
2.  打破命名约定，使您的代码中没有字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T12:24:45.310

在网上阅读完这篇文章后，对于为什么 _ 应该存在/是否应该存在，意见分歧很大。

我认为**这不是 asp.net mvc 命名约定**，并且证明框架本身并不遵守这一点。（正如您在问题中指出的那样）

_ 的来源来自 webmatrix/asp.net，其中 _ 用于不能直接提供给用户的资源。

唯一**可以**添加前缀的是可重用组件的视图，例如 _layout，可能还有 _nav 或 _datepicker

**Razor 无论如何都删除了部分视图的概念（因为与.aspx**和**.ascx**之间没有类似的区别，在 razor 中，无论如何都是**.cshtml**）。

# android - html5/android 触摸取消

> ID：10367854
> 
> 赞同：6
> 
> 时间：2012-04-28T21:51:34.090
> 
> 标签：android, html

我尝试在 html5 上为移动设备开发一个界面。我尝试使用 touchstart/touchmove/touchend/touchcancel 跟随运动。但是当我尝试跟随运动时，我总是很快就会有 au 'touchcancel' 并且没有更多的 touchmove ......

当我尝试这个时：http: [//miniapps.co.uk/code/touchcancel/](http://miniapps.co.uk/code/touchcancel/) 它工作得很好，我没有任何问题。

但我认为问题来自干扰我的画布的网络浏览器的运动。你知道我能解决这个问题吗？

// 我试图解释更多： - 这是我的测试代码： http: [//frys.free.fr/mNaissance/test.html](http://frys.free.fr/mNaissance/test.html) 这是我尝试使用手机制作的“拼图”拼图代码。我有一个“日志” div hunder 文本。当我在灰色画布上做“touchmove”时，我有一个非常快的“touchcancel”并且不再有“touchmove”是不是更清楚？对不起我糟糕的英语！

感谢帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T10:35:02.807

我相信我找到了原因 - Android 浏览器（以及适用于 Android 4.0+ 的 Chrome）认为您正在尝试滚动，因此它会触发 touchcancel 事件。你应该做的是

```
event.preventDefault(); 
```

在您正在捕获的 touchmove 事件上。

# java - Jar 有灰屏，不渲染显示像素等

> ID：10367857
> 
> 赞同：0
> 
> 时间：2012-04-28T21:51:47.023
> 
> 标签：java, jar, screen, executable-jar

我正在尝试将我当前的项目导出为 jar 以进行测试，但是当我将其导出为外部 jar 时，它在我的计算机上运行良好，但在我朋友的计算机上它只显示灰色屏幕。

我的导出设置如下： 库处理 - 将所需的库提取到生成的 JAR 中。

关于为什么它不起作用的任何想法？

显示的内容：http: [//i.stack.imgur.com/ArObt.png](http://i.stack.imgur.com/ArObt.png)

这些像素也在屏幕上以恒定的循环水平移动，但由于显而易见的原因，您看不到这一点（这是一张图片 xD）。

顺便说一下，这是来自我的电脑，但在另一台电脑上，它只是一个灰屏。

IDE：Eclipse 我们都使用相同的操作系统。（Windows 7）程序在运行和调试模式下都运行良好，没有抛出异常。Jar 在我的电脑上运行良好。

主类： http: [//pastebin.com/fFcPsqnm](http://pastebin.com/fFcPsqnm)

# python - 使用 python + urllib2 传递 json-data 时，Github-api 给出 404

> ID：10367859
> 
> 赞同：4
> 
> 时间：2012-04-28T21:51:56.900
> 
> 标签：python, json, post, urllib2, github-api

我有以下代码，它应该执行在 github 上创建新下载的第一部分。它应该使用 POST 发送 json 数据。

```
jsonstring = '{"name": "test", "size": "4"}'
req = urllib2.Request("https://api.github.com/repos/<user>/<repo>/downloads")
req.add_header('Authorization', 'token ' + '<token>')
result = urllib2.urlopen(req, jsonstring) 
```

如果我`, jsonstring`从 中删除`urlopen()`，它不会失败，并为我提供可用下载列表。但是，如果我尝试发布 json 字符串，则会收到 404 错误。

问题必须与json有关，或者在我发送它的方式上，但我无法弄清楚问题是什么。的字符串在`<...>`实际代码中是正确的，我只是从帖子中删除了它们

我在命令行上尝试了大致相同`curl`的方法，但身份验证方法略有不同，并且成功了。

**测试：**

作品（返回想要的json）：

```
curl -u "user:password" --data "json..." https://api.github.com/repos/<user>/<repo>/downloads 
```

作品：

```
curl -H 'Authorization: token <token>' https://api.github.com/ 
```

不起作用（返回“无效凭据”）：

```
curl -H 'Authorization: token <invalid_token>' https://api.github.com/ 
```

不起作用（“未找到”）：

```
curl -H 'Authorization: token <valid_token>' --data "json..." https://api.github.com/repos/<user>/<repo>/downloads 
```

这似乎不是特定于 python 代码的问题。json POST 数据似乎很好，OAuth 令牌授权似乎（至少部分）有效。但是当这些放在一起时，它就停止工作了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:03:03.390

我终于可以解决了，为什么它不起作用。

我没有正确设置授权令牌的授权范围。我使用的令牌没有被“授权”进行任何修改，并且使用它的每个尝试修改某些内容（添加下载）的操作都失败了。

我必须在授权中添加正确的范围才能使其工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T22:36:52.910

我已经提供了一个关于如何在没有任何身份验证的情况下将 JSON 数据发布到 V3 API 的答案，但是当您发现最初的问题是没有正确设置您的 OAUTH 令牌时，我想我会提供一个编程解决方案来获取一个（此实现在每次运行脚本时都会获得一个令牌，而实际上它只会执行一次，并且令牌将存储在本地）。

```
import urllib2
import json
import getpass
import base64

# Generate a token from the username and password.
# NOTE: this is a naive implementation. Store pre-retrieved tokens if possible.
username = 'pelson'
passwd = getpass.getpass() # <- this just puts a string in passwd (plaintext)

req = urllib2.Request("https://api.github.com/authorizations")

# add the username and password info to the request
base64string = base64.encodestring('%s:%s' % (username, passwd)).replace('\n', '')
req.add_header("Authorization", "Basic %s" % base64string)

data = json.dumps({"scopes":["repo"], "note":"Access to your repository."})
result = urllib2.urlopen(req, data)
result = json.loads('\n'.join(result.readlines()))
token = result['token'] 
```

一旦你有了这个令牌，它就可以用于任何“repo”范围的操作。让我们向存储库添加一个新问题：

```
# add an issue to the tracker using the new token
repo = 'name_of_repo'
data = json.dumps({'title': 'My automated issue.'})
req = urllib2.Request("https://api.github.com/repos/%s/%s/issues" % (username, repo))
req.add_header("Authorization", "token %s" % token)
result = urllib2.urlopen(req, data)

result = json.loads('\n'.join(result.readlines()))
print result['number'] 
```

希望对某人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T22:01:15.937

v3 github api 有一个很好的功能，它可以将 markdown 转换为 html。请求此信息不需要身份验证，因此它是一个很好的示例，可以在深入研究更棘手的身份验证世界之前尝试。

[API 文档](http://developer.github.com/v3/markdown/)状态：

> 渲染任意 Markdown 文档
> 
> POST /markdown 输入
> 
> text 必需的字符串 - 要呈现的 Markdown 文本

甚至给出一个要转换的降价字符串的例子：

```
{"text": "Hello world github/linguist#1 **cool**, and #1!"} 
```

鉴于此信息，让我们为该降价的 html 化版本构建一个 urllib2 请求。

```
import urllib2
import json

data = {"text": "Hello world github/linguist#1 **cool**, and #1!"}
json_data = json.dumps(data)

req = urllib2.Request("https://api.github.com/markdown")
result = urllib2.urlopen(req, json_data)

print '\n'.join(result.readlines()) 
```

结果是一些代表降价的html。

鉴于此示例，在发布您的请求时导致 404 的不是 JSON，而是更可能是身份验证（正如您已经回答的那样）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T20:22:24.423

数据不应该是 URL 编码的，而不是 JSON 吗？尝试：

```
data = {"name": "test", "size": "4"}
req = urllib2.Request("https://api.github.com/repos/<user>/<repo>/downloads")
req.add_header('Authorization', 'token ' + '<token>')
result = urllib2.urlopen(req, urllib.parse.urlencode(data)) 
```

# computer-architecture - 计算最佳加速

> ID：10367860
> 
> 赞同：2
> 
> 时间：2012-04-28T21:51:58.057
> 
> 标签：computer-architecture

我一直在为我的计算机体系结构课程进行之前的考试，但我得到了一个不正确的答案，我如何计算可能的最佳加速？我知道关于可以加快多少程序的限制，我只是不确定论坛（他的问题是 b 部分）。任何帮助都将被赞成，非常感谢谢谢！

> 1.  （6 分）为了加速应用程序，提出了两个增强功能，加速比如下：
>     　　Speedup [1] = 25
>     　　Speedup [2] = 15
>     
>     
>     
>     增强 1 可用于 40% 的指令，增强 2 可用于 30% 的指令。两个增强不重叠。
>     
>     
>     
>     a) 如果同时应用这两种增强功能，加速是多少？
>     
>     
>     
>     b) 如果你不断改进这两个增强功能，你能达到的最佳加速是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:01:10.367

与其试图记住一个公式，不如使用常识。想象一下，可加速代码的两个部分都可以*无限*加速：也就是说，根本不需要时间。会留下什么？需要多少时间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:03:38.823

设`t`为总运行时间，然后：

（a）由于您不要求本节，因此我为将来的读者提供了完整的解决方案。
`t' = modified run time = 0.4t / 25 + 0.3t / 15 + 0.3t = 0.336t`,
因此,`speedup = t/t' = t / 0.336t ~= 2.97`

(b) 问题要求不断推进这些加速，因此您无法改进整个程序。**[然后，根据阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)**，您可以获得的最佳加速受到连续的、不可改进的部分的限制。阿姆达尔定律说，最大加速将是**`1/SEQUENTIAL_PART`**你的情况下的顺序部分是什么？确保你明白为什么。

阿姆达尔定律的思想是，假设你可以将改进部分加速到无限加速，总加速仍然会受到未改进部分的限制。

# python - Python with 语句

> ID：10367863
> 
> 赞同：0
> 
> 时间：2012-04-28T21:52:10.627
> 
> 标签：python, with-statement

我正在阅读[PEP 343](http://www.python.org/dev/peps/pep-0343/)并尝试举一些例子。但我现在还不是很清楚。特别是因为我有一个错误：

```
>>> def f():
...     return 'f'
... 
>>> with f(): # or as f
...     print f() # or f
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: __exit__ 
```

确实，该函数没有方法`__exit__`。那么如何使用`with`语句呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:55:58.097

如果要将 with 语句与函数一起使用，可以使用[contextlib.contextmanager](http://docs.python.org/library/contextlib.html)装饰器。

[文档](http://docs.python.org/library/contextlib.html)中的示例：

```
from contextlib import contextmanager

@contextmanager
def tag(name):
    print "<%s>" % name
    yield
    print "</%s>" % name

>>> with tag("h1"):
...    print "foo"
...
<h1>
foo
</h1> 
```

# iphone - 在网页上显示 iPhone 应用程序下载次数

> ID：10367872
> 
> 赞同：0
> 
> 时间：2012-04-28T21:52:57.603
> 
> 标签：iphone, ios, app-store-connect

我想在网页上显示一个 iPhone 应用程序的下载次数。

我希望这是自动的。顺便说一句，我构建了应用程序。

这可能吗？是否有我应该知道的 JSON REST API？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:12:57.890

这需要是一个企业应用程序，托管在您的网站上。 **如果 iPhone 应用程序在 iTunes Store 中，这是不可能的。**

如果它在您的网站上，那么制作计数器非常容易。请参阅[此](https://stackoverflow.com/questions/2997482/how-to-create-file-download-counter)Stackoverflow 帖子。

您当然可以在 Itunes Connect 中为您的个人应用程序找到您的应用程序的下载次数，但这对自动计数器没有用处。

还有一种方法可以根据应用排名粗略估计下载量。请参阅[本文](http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1924044)(d_iPad=9,525*rank^(-0.903) d_iPhone=52,511*rank^(-0.944))，尽管方法可能会根据 App Store 中的应用程序数量而变化。

# struts - 基于地图值struts2在jsp中禁用单选按钮

> ID：10367879
> 
> 赞同：0
> 
> 时间：2012-04-28T21:53:27.357
> 
> 标签：struts, radio-button

我正在尝试使用从我的 bean 中的映射返回的布尔值来禁用/启用 jsp 页面中的单选按钮。

类片段：

```
public class Options{
   private String optionId;
   private Map<String,Boolean> negativeMap;

   public setNegativeMap(Map<String,Boolean> negativeMap){

   .......

} 
```

JSP 片段：

```
<input id="radioClick<s:property value=optionId"/> type="radio" disabled="%{negativeMap[optionId]}" /> 
```

我在正确的轨道上吗？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:30:33.573

拜托，我认为您的 JSP 片段在 "value=optionId"/>" 附近是错误的：

```
<input id="radioClick<s:property value=optionId"/> type="radio" disabled="%{negativeMap[optionId]}" /> 
```

您的 JSP 片段应该是这样的：

```
<input id="radioClick<s:property value=optionId/>" type="radio" disabled="%{negativeMap[optionId]}" /> 
```

# java - Android蓝牙启用错误

> ID：10367882
> 
> 赞同：0
> 
> 时间：2012-04-28T21:53:37.383
> 
> 标签：java, android, bluetooth

我正在开发一个具有蓝牙功能的安卓应用程序。但我有一个问题。我正在使用以下代码

```
 BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

   if (mBluetoothAdapter == null) {

  // Device does not support Bluetooth

    tv.setText("Device is not there");

   setContentView(tv);

   }
   else
   {
       if (!mBluetoothAdapter.isEnabled()) {
            Intent enableBtIntent = new    Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        }
   tv.setText("Device is there");
   setContentView(tv);
   } 
```

我收到错误

```
 if (!mBluetoothAdapter.isEnabled()) {

 Intent enableBtIntent = new    Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);

 startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        } 
```

每当我尝试运行该代码时，我的应用程序都会通过显示带有“强制关闭”按钮的消息框而崩溃。错误在哪里，我还没有弄清楚。请帮忙。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:11:25.517

您的清单中是否有正确的权限？您需要指定您的应用将使用蓝牙：

```
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

在您的清单文件中。如果使用 Eclipse，清单文件将命名为 AndroidManifest.xml，并且在您的项目文件夹中可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:58:54.530

assalaamu alaykum akhi。我对 android 很陌生，但是......你的清单中有这样的东西吗？

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
`boolean hasBluetooth = (mBluetoothAdapter == null);`

if (hasBluetooth && !mBluetoothAdapter.isEnabled()) 
```

# ruby - ruby 语法是什么意思？

> ID：10367888
> 
> 赞同：1
> 
> 时间：2012-04-28T21:54:45.403
> 
> 标签：ruby, printf

```
task('google:rankings' => :environment) do
  def find_item uri, query
    search = Google::Search::Web.new do |search|
      search.query = query
      search.size = :large
      search.each_response { print '.'; $stdout.flush }
    end
    search.find { |item| item.uri.downcase.include?(uri.downcase) }
  end

  def rank_for query, domain
    print "%35s " % query
    if item = find_item(domain, query)
      puts " #%d" % (item.index + 1)
    else
      puts " Not found"
    end
  end

  Campaign.all.each do |campaign|
    campaign.keywords.each do |keyword|
      rank_for keyword.set, Domain.find(campaign.domain_id).name if (keyword.set)
    end
  end
end 
```

这个花絮在 rake 任务中。当 rake 任务运行时，控制台窗口会实时更新，如下所示：

> 关键字。
> 
> 关键字...
> 
> 关键字.....未找到

我不太清楚发生了什么`#%d`？它是如何使点的打印多次发生的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T21:58:36.370

的第 4 行（或任何行）没有打印这些点`rank_for`。它们被`search.each_response`前面传递到几行的块打印出来。

在`#%d`中， the`#`只是 a`#`而 the`%d`是 C-ish 格式代码，意思是“在此处插入一个整数值”。

# ruby - 在 `%': 数组不能被强制转换为 Fixnum (TypeError) 试图减少 Ruby 代码的行数

> ID：10367889
> 
> 赞同：0
> 
> 时间：2012-04-28T21:55:10.503
> 
> 标签：ruby, string

尝试使用 target.write 将 5 行减少到 1 时出现上述错误：

```
target.write("%s \n %s \n %s \n") % [line1, line2, line3]
# target.write("\n")
# target.write(line2)
# target.write("\n")
# target.write(line3)
# target.write("\n") 
```

注释部分运行（当第一行是`target.write(line1)`，但这不是。

为什么第一行与写出注释掉的六行不同？这是整个脚本：

```
filename = ARGV.first
script = $0

puts "We're going to erase #{filename}."
puts "If you don't want that hit control C"
puts "If you do want that hit execute or return"

print "? "
STDIN.gets

puts "Opening the file..."
target = File.open(filename, 'w')

puts "Truncating the file. Goodbye!"
target.truncate(target.size)

puts "Now I'm going to ask you for three lines."

print "line1: "; line1 = STDIN.gets.chomp()
print "line2: "; line2 = STDIN.gets.chomp()
print "line3: "; line3 = STDIN.gets.chomp()

puts "I'm going to write these to the file."

target.write("%s \n %s \n %s \n") % [line1, line2, line3]
# target.write("\n")
# target.write(line2)
# target.write("\n")
# target.write(line3)
# target.write("\n")

puts "And finally we close it"
target.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:58:48.890

该`target.write`行的右括号位于错误的位置。尝试

```
target.write("%s \n %s \n %s \n" % [line1, line2, line3]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:59:01.613

你的括号是错误的。你有什么：

```
target.write("%s \n %s \n %s \n") % [line1, line2, line3] 
```

相当于做：

```
a = target.write("%s \n %s \n %s \n")
a % [line1, line2, line3] 
```

因此，您想要的是：

```
target.write("%s \n %s \n %s \n" % [line1, line2, line3]) 
```

# android - 捕捉异常膨胀的布局

> ID：10367891
> 
> 赞同：1
> 
> 时间：2012-04-28T21:55:36.210
> 
> 标签：android, layout, exception-handling, inflate

我正在尝试充气

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
<Item  android:id="@+id/ltArr"
    android:layout_alignParentLeft="true"
    android:icon="@android:drawable/arrow_up_float"/>
<TextView android:id="@+id/ImText"
    android:layout_toRightOf="@id/ltArr"/>
<Item  android:layout_alignParentRight="true" 
    android:layout_toRightOf="@id/ImText"
     android:icon="@android:drawable/arrow_down_float"/>
</RelativeLayout> 
```

在我调用 addTextView 的过程中，它位于 try catch 块中

```
try{
    addTextView("Showtext", intID, addtothisLayout);
    }catch (Exception ex){} 
```

当在 addText 过程中对上面的布局进行膨胀时，上面捕获了一个异常，执行被发送回调用过程中的 catch

```
void addTextView(String showTxt,integer id,  ViewGroup addtoparent)
{
View itemview = View.inflate(this, R.layout.itemlayout, addtoparent); //this causes the exception
..
..
} 
```

为什么抛出异常时我看不到 ex 变量中的任何内容？

我在尝试一些愚蠢的事情吗？

我如何查看异常的内容？当调试器通过它时，我尝试检查异常 ex 变量，但它没有任何内容。如果我在过程中使用 SQL。我会专门抛出 SQLException ，这样我就可以看到错误描述，但在这里我不知道要抛出什么......？

通过删除 try catch 子句，我在 LogCat 中找到了对资源不可用异常的引用。但是我如何在 try ex var 中捕捉这些描述？我必须抛出特定的异常吗？

好的，这就是我的答案，我试图检查变量的声明并且需要在代码块中放置一些东西。“ex.toString()”

```
catch (Exception ex){
            ex.toString();
        } 
```

感谢大家非常及时的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:07:12.743

当我在 AVD 2.3.3 模拟器上运行它时，我得到：

```
04-28 22:03:36.537: E/AndroidRuntime(395): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.android.tests/com.android.tests.TestsActivity}: android.view.InflateException: Binary XML file line #5: Error inflating class Item 
```

也就是说，“项目”不被识别为视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:04:14.870

如果你想膨胀整个布局，而不仅仅是其中的一个视图，你必须使用：

```
getLayoutInflater().inflate(... 
```

getLayoutInflater() 是一个 Activity 的方法

# ios - UILabel AutoResize 将文本的顶部截断

> ID：10367893
> 
> 赞同：3
> 
> 时间：2012-04-28T21:56:00.810
> 
> 标签：ios, cocoa-touch, text, uikit, uilabel

我有一个 UILabel 与它的父视图一起自动调整大小。标签已打开 AdjustsFontSizeToWidth 并且最小文本大小为 0 - 所以基本上它会尝试将所有文​​本适合 UILabel 的任何大小。

我遇到的问题是垂直文本被截断。所以是的，标签正在将其字体大小调整为标签的宽度，但文本对于标签来说太高了，因此一些文本被截断了。

有没有办法解决这个问题，以便显示所有文本、全高和全宽？

我附上一张图片来说明我的意思。红色框是父视图，紫色框是 UILabel。

谢谢你的帮助。

![文字被截断](../Images/d29798430004131916541eaf9641aa6c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:36:32.077

您正在自动调整的是宽度而不是高度。高度是您必须根据您将使用的最大字体大小手动调整的东西。如果最大（分配的初始）字体大小适合高度，那么较小的字体大小也会自动调整后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:32:58.723

我怀疑 Lefteris 是对的，最小文本大小侧重于控件宽度的字体大小。但是请注意，如果您希望它调整字体大小以适应，您需要一个非零的 minFontSize。请参阅[minimumFontSize](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/minimumFontSize)注释。还可以查看各种[NSString UIKit Additions](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html)，它们可用于获取适合您的文本所需的控件大小，并以编程方式相应地调整您的 UILabel 的大小（即框架）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T11:33:29.967

在我的情况下，在被剪裁和压扁的标签下有一个虚假的视图垂直居中。这以某种方式优先于标签的 1000 抗压优先级。虽然控制台上没有关于冲突的警告。但是视图调试器有一些帮助。

# database - 在 MVC3 EF 中动态生成数据库

> ID：10367897
> 
> 赞同：1
> 
> 时间：2012-04-28T21:56:39.110
> 
> 标签：database, asp.net-mvc-3

我的连接字符串如下所示：

```
<add name="MyDbContext"
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;Database=MyDb;User Instance=false"
     providerName="System.Data.SqlClient" /> 
```

根据用户提供的 url 动态设置数据库的最佳方法是什么？换句话说，我将如何动态更改 MyDb 参数？我将 MVC3 与 Entity Framework 和 SQL Express 一起用作数据库服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:05:17.613

你试过这个构造函数 DbContext(String) 吗？

# c# - 图形笔 1 边宽？

> ID：10367904
> 
> 赞同：1
> 
> 时间：2012-04-28T21:57:57.130
> 
> 标签：c#, graphics2d

我正在使用 DrawElipse 方法绘制两个圆（内圆和外圆）。

我已经创建了两个名为 OuterPen 和 InnerPen 的笔对象，并正在使用 OuterPen 创建外圈，并使用 InnerPen 创建内圈。

我面临的问题是，当我将外笔的大小增加到 10px 时，它会与内圈重叠并且内圈被隐藏。

如何向外而不是向内增加 OuterPen 的大小，使其不与内圈重叠？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T02:59:33.977

您可以根据新笔的大小按比例增大外圈，例如：

```
private void button1_Click_1(object sender, EventArgs e)
{
    DrawCircles(int.Parse(textBox1.Text));
}

private void DrawCircles(int size)
{
    Bitmap b = new Bitmap(300, 300);
    using (Graphics g = Graphics.FromImage(b))
    {
        Pen p = new Pen(Brushes.Red, size);
        Pen p2 = new Pen(Brushes.Blue, 1);
        g.DrawEllipse(p, 10 - size / 2, 10-size / 2, 200 + size, 200 + size);
        g.DrawEllipse(p2, 12, 12, 196, 196);
        g.Save();
    }
    pictureBox1.Image = b;
} 
```

# windows - 使用 Nvidia 显卡安装 AMD OpenCL CPU 驱动程序

> ID：10367905
> 
> 赞同：3
> 
> 时间：2012-04-28T21:57:58.727
> 
> 标签：windows, driver, opencl, nvidia, amd-processor

我多次看到这个问题，但从未找到 Windows 的答案。我最近将我的 CUDA 代码移植到 OpenCL。当使用 ATI 卡进行测试时，Catalyst 驱动程序包含一个 CPU OpenCL 驱动程序，因此我可以在 CPU 上运行 OpenCL 代码。使用 NVIDIA 卡进行测试时，没有 CPU 驱动程序。

问题是：使用 Nvidia 卡运行时如何安装（和部署）CPU 驱动程序？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T20:19:24.410

要在 CPU 上使用 OpenCL，您不需要任何驱动程序，您只需要支持 CPU 的 OpenCL 运行时，它（在 AMD/ATI 的情况下）是[APP SDK](http://developer.amd.com/sdks/amdappsdk/pages/default.aspx)的一部分。无论您拥有什么 GPU，都可以安装它。您的最终用户还必须安装 APP SDK：目前，[无法](http://devgurus.amd.com/message/1280710#1280710)仅安装 OpenCL 运行时。

如果你有 Intel CPU，你最好试试[Intel OpenCL SDK](http://software.intel.com/en-us/articles/vcsource-tools-opencl-sdk/)，它有单独的安装程序。但是，AMD APP SDK 在 Intel CPU 上运行良好，但请注意反之亦然。

# javascript - 使用 sammy.js 将数据发布到 php 脚本

> ID：10367908
> 
> 赞同：1
> 
> 时间：2012-04-28T21:58:18.023
> 
> 标签：javascript, sammy.js

我试图通过将数据发送到 php 脚本来创建联系表单，以从 sammy.js 应用程序中的表单发送邮件。我已将其设置如下，但它不起作用。谁能解释为什么并让我朝着正确的方向修复它？谢谢！

html表单：

```
<form class="form-horizontal" action="#/submitcontact">
    <fieldset>
        <div class="control-group">

            <label class="control-label" for="input01">Your Name:</label>
            <div class="controls">
                <input type="text" class="input-xlarge" id="from-name">
                    <p class="help-block">Nice to know who the message is from.</p>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="input01">Your Email:</label>
            <div class="controls">
                <input type="text" class="input-xlarge" id="from-email">
                <p class="help-block">Supply an email so I can reply.</p>
            </div>
        </div>
        <div class="control-group"> 
            <label class="control-label" for="input01">Your Message:</label>
            <div class="controls">
                <textarea class="input-xlarge" id="from-msg"></textarea>
                <p class="help-block">Including a message is always nice.</p>
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
            <button type="submit" class="btn" style="position:relative;float:center;">Send!</button>
            </div>
        </div>
        </div>
    </fieldset>
</form> 
```

在提交时将其发布到路线#/submitcontact：

```
 this.post('#/submitcontact', function(context) {
            $.post("mail.php", this.params,
                function(data) {
                    alert("Data Loaded: " + data);
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:43:28.340

Try passing each value to function post. Modify the code like this:

```
context = $('form').serialize();
$.post('#/submitcontact', function(context) {
            $.post("mail.php", this.params,
                function(data) {
                    alert("Data Loaded: " + data);
            });
        }); 
```

Maybe this could work.

# jquery - 窗口预加载器在 jquery 中出现延迟

> ID：10367909
> 
> 赞同：0
> 
> 时间：2012-04-28T21:58:26.900
> 
> 标签：jquery, preloader

嗨，我正在尝试向我的页面添加预加载器，但发生的情况是当您进入窗口时页面加载器未加载。它正在等待窗口加载，然后它也显示加载器... 。 我怎样才能解决这个问题？这是我的代码：

```
$(window).load(function(){
$("#all").hide();
var wh = $(window).height();
$("#loader").show();
$("#all").hide();
$("#loader").css("height",wh);
$("#loader").delay(4000).fadeOut(400);
$("#all").delay(4020).fadeIn(400);
}); 
```

所以简而言之，首先我可以实际看到页面，然后加载程序进来！！！我不知道如何解决这个问题，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T22:02:04.003

`window.load`在整个页面加载之前不会触发。尝试使用[document.ready](http://api.jquery.com/ready/)。[http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)也可能对您有所启发。

如果`document.ready`您还不够早，请默认显示加载程序，然后在您想要的位置隐藏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:14:43.460

我会这样写代码：

```
 $(document).ready(function() {
        var wh = $(window).height();
        $("#all").hide();
        $("#loader").css("height",wh);
        $('#loader').show('slow', function() {
        $("#loader").delay(4000).fadeOut(400);
        $("#all").delay(4020).fadeIn(400);
      });
  }); 
```

这将首先加载页面，并将隐藏页面上除自定义加载器之外的所有内容。然后休息你知道的。您还可以使用 animate 函数来调用自定义延迟加载程序。

# c# - 我得到异常类型加载异常可能是什么？

> ID：10367911
> 
> 赞同：0
> 
> 时间：2012-04-28T21:58:38.547
> 
> 标签：c#

我添加了 3 个 dll 作为参考： Google.Apis ， Google.Apis.Translate.v2 ， System.Runtime.Serialization

在 Form1 我有一行：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();

            Translator.translate(new TranslateInput());

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

现在异常错误出现在 Translator 类的第一行： 引发错误的行是：`var service = new TranslateService { Key = GetApiKey() };`

类代码是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Web;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Json;
using Google.Apis.Util;
using Google.Apis.Translate.v2;
using Google.Apis.Translate.v2.Data;
using TranslationsResource = Google.Apis.Translate.v2.Data.TranslationsResource;

public class Translator 
{ 
    public static string translate(TranslateInput input) 
    { 
        // Create the service. 
        var service = new TranslateService { Key = GetApiKey() };
        string translationResult = "";

// Execute the first translation request. 
        Console.WriteLine("Translating to '" + input.TargetLanguage + "' ...");
        TranslationsListResponse response = service.Translations.List(input.SourceText, input.TargetLanguage).Fetch();
        var translations = new List<string>();
        foreach (TranslationsResource translation in response.Translations) 
        { 
            translationResult = translation.TranslatedText;
        } 
        return translationResult;
    } 
    private static string GetApiKey() 
    {
        return "AIzaSyCjxMe6RKHZzd7xSfSh2pEsBqUdXYm5tA8"; // Enter Your Key 
    } 
}

/// <summary>
/// User input for this example.
/// </summary>
[Description("input")]
public class TranslateInput
{
    [Description("text to translate")]
    public string SourceText = "Who ate my candy?";
    [Description("target language")]
    public string TargetLanguage = "fr";
} 
```

错误是：

无法从程序集“Google.Apis，版本=1.1.4497.35846，文化=中性，PublicKeyToken=null”加载类型“Google.Apis.Discovery.FactoryParameterV1_0”。

试图谷歌寻求帮助，还试图将项目类型更改为 x64 平台，但没有帮助。所以我把它放回x86

我有 windows 7 64bit visual studio c# 2010 pro .net 4.0 配置文件客户端。

无法弄清楚错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:14:00.777

上述消息中报告的此错误是由于解决方案或项目的 bin\Debug 文件夹中的本地副本造成的。即使您尝试清理您的解决方案，此类副本仍将继续存在。

为了避免这种情况发生，您必须通过在项目属性中添加引用路径来强制 Visual Studio 引用正确的 DLL。不幸的是，如果您的解决方案中有多个项目，则必须一个接一个地设置项目的参考路径，直到完成。

如果您想知道如何设置参考路径，请遵循以下简单说明：

1.选择你的项目，右击，然后点击“属性”；2.在项目属性中，点击“参考路径”；3.文件夹，键入或浏览到您的DLL的正确位置，单击[添加文件夹]。

您将需要针对每个 DLL 可能拥有的许多不同位置执行这些步骤。考虑在相同项目属性的 Build 选项卡下设置输出路径，以便您可以将每个 DLL 输出到同一目录中，从而确保您在同一位置找到所有最新构建，从而简化您的引用。

请注意，这只能是此错误的一个原因。但可以肯定的是，这与上述程序集的错误副本有关。

# c++ - 二叉搜索树删除

> ID：10367912
> 
> 赞同：1
> 
> 时间：2012-04-28T21:58:45.150
> 
> 标签：c++, tree, binary-search-tree

我目前正在使用 C++ 编写二叉搜索树，并且已经到了必须编写删除/删除函数的阶段（使用递归方法`x = change(x)`）。我有两个选择：

*   停在待删除节点的父节点处；

*   到达要删除的节点，然后调用将
    返回父节点的函数

> 方法 1：更便宜，更多代码
> 
> 方法2：更少的代码，更昂贵

您认为哪种方法更好，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:32:57.003

我不同意这是你唯一的两个选择。

我认为一个更简单的解决方案是询问每个节点是否应该删除它。如果它决定是，则将其删除并返回应替换它的新节点。如果它决定不，那么它会返回自己。

```
// pseudo code.
deleteNode(Node* node, int value)
{
    if (node == NULL) return node;

    if (node->value == value)
    {
        // This is the node I want to delete.
        // So delete it and return the value of the node I want to replace it with.
        // Which may involve some shifting of things around.
        return doDelete(node);
    }
    else if (value < node->value)
    {
        // Not node. But try deleting the node on the left.
        // whatever happens a value will be returned that
        // is assigned to left and the tree will be correct.
        node->left = deleteNode(node->left, value);
    }
    else
    {
        // Not node. But try deleting the node on the right.
        // whatever happens a value will be returned that
        // is assigned to right and the tree will be correct.
        node->right = deleteNode(node->right, value);
    }
    // since this node is not being deleted return it.
    // so it can be assigned back into the correct place.
    return node;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:31:30.643

我发现为树数据结构编写函数的最有效形式通常是以下伪代码格式。

```
 function someActionOnTree() {
         return someActionOnTree(root)
    }

    function someActionOnTree (Node current) {
         if (current is null) {
              return null
         }
         if (current is not the node I seek) {
              //logic for picking the next node to move to
              next node = ...

              next node = someActionOnTree(next node)
         }
         else {
              // do whatever you need to do with current
              // i.e. give it a child, delete its memory, etc
              current = ...
         }
         return current;
    } 
```

这个递归函数在数据结构的顶点集上递归。对于算法的每次迭代，它要么寻找一个节点来递归函数，然后用算法在该节点上的迭代值覆盖数据结构对该节点的引用。否则，它会覆盖节点的值（并可能执行一组不同的逻辑）。最后，该函数返回对参数节点的引用，这对于覆盖步骤至关重要。

这通常是我为 C++ 中的树数据结构找到的最有效的代码形式。这些概念也适用于其他结构 - 您可以使用这种形式的递归，其中返回值始终是对数据结构平面表示中固定点的引用（基本上，始终返回应该在您所在位置的任何内容） '正在看）。

这是这种风格在二叉搜索树删除函数中的应用，以修饰我的观点。

```
function deleteNodeFromTreeWithValue( value ) {
     return deleteNodeFromTree(root, value)
}

function deleteNodeFromTree(Node current, value) {
     if (current is null) return null
     if (current does not represent value) {
          if (current is greater than my value) {
               leftNode = deleteNodeFromTree(leftNode, value)
          } else {
                rightNode = deleteNodeFromTree(rightNode, value)
          }
      }
      else {
           free current's memory
           current = null
      }
      return current
} 
```

显然，还有很多其他方法可以编写此代码，但根据我的经验，这已成为最有效的方法。请注意，覆盖指针并没有真正影响性能，因为硬件已经缓存了节点。如果您正在考虑提高搜索树的性能，我建议您研究专门的树，例如自平衡树（AVL 树）、B 树、红黑树等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:12:00.390

最好的方法是遍历要删除的节点的父节点，然后删除该子节点。最终使用这种方法你总是访问子节点，因为你总是必须确认子节点是你想要删除的节点。

# vb.net - VB 2008 中的数据类型不匹配

> ID：10367914
> 
> 赞同：2
> 
> 时间：2012-04-28T21:58:53.330
> 
> 标签：vb.net, visual-studio-2008, ms-access, ado.net, oledb

大家好，我有一个问题。当我尝试在我的程序中使用这段将供应商添加到数据库中的代码时，我遇到了数据类型不匹配错误。据我所知，供应商的状态造成了错误。

我将如何在数据库中存储名为`radActive`和的单选按钮的值`radInactive`？我应该使用`Boolean`还是`String`? 我使用 Microsoft Access 作为我的数据库，并且字段`Status`设置为`Yes/No`.

这是代码。

```
Public Sub SupplierInsertData()

    Dim conn As OleDb.OleDbConnection
    Dim cmd As OleDb.OleDbCommand

    Dim SupplierType As String
    Dim Status As Boolean

    'Check for supplier type
    If frmDatabaseSupplier.radLocal.Checked = True Then

        SupplierType = "Local"

    ElseIf frmDatabaseSupplier.radForeign.Checked = True Then

        SupplierType = "Foreign"

    End If

    'Check for supplier status
    If frmDatabaseSupplier.radActive.Checked = True Then

        Status = True

    ElseIf frmDatabaseSupplier.radInactive.Checked = True Then

        Status = False

    End If

    'For inserting of data in the database.
    Dim cmdString As String = "INSERT INTO Supplier(SupplierLastName, SupplierFirstName, SupplierMiddleInitial, " & _
                              "SupplierCompany, SupplierType, SupplierStreetAddress, SupplierCity, SupplierContactNumber, SupplierEmail, " & _
                              "Status)" & _
                              "VALUES('" & frmDatabaseSupplier.txtSupplierLastName.Text & "','" & frmDatabaseSupplier.txtSupplierFirstName.Text & "','" & frmDatabaseSupplier.txtSupplierMiddleInitial.Text & "','" _
                              & frmDatabaseSupplier.txtSupplierCompany.Text & "','" & SupplierType & "', '" & frmDatabaseSupplier.txtSupplierStreetAddress.Text & "','" & frmDatabaseSupplier.txtSupplierCity.Text & "','" _
                              & frmDatabaseSupplier.txtSupplierContactNumber.Text & "','" & frmDatabaseSupplier.txtSupplierEmail.Text & "','" & Status & "')"

    conn = New OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\ProjectAnalysisSystem.accdb")

    cmd = New OleDb.OleDbCommand(cmdString, conn)

    conn.Open()
    cmd.ExecuteNonQuery()
    conn.Close()

End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:55:11.473

尝试更改代码的最后一部分。
您应该使用参数将文本框或变量的值传递给数据库引擎。
并且不要忘记将 OleDbConnection 等一次性对象封装在`using`语句中。

```
Dim cmdString As String = "INSERT INTO Supplier(SupplierLastName, SupplierFirstName, SupplierMiddleInitial, " & _ 
                          "SupplierCompany, SupplierType, SupplierStreetAddress, SupplierCity, SupplierContactNumber, SupplierEmail, " & _ 
                          "Status)" & _ 
                          "VALUES(@supplierName, @supplierFirst, @supplierMiddle, @supplierCo, @supplierType, @supplierStreet, @supplierCity, " & _
                          "@supplierContact, @supplierMail, @status)"
Using conn As New OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\ProjectAnalysisSystem.accdb")
    Dim cmd As OleDbCommand = New OleDb.OleDbCommand(cmdString, conn))
    cmd.Parameters.AddWithValue("@supplierName", frmDatabaseSupplier.txtSupplierLastName.Text)
    cmd.Parameters.AddWithValue("@supplierFirst", frmDatabaseSupplier.txtSupplierFirstName.Text)
    cmd.Parameters.AddWithValue("@supplierMiddle", frmDatabaseSupplier.txtSupplierMiddleInitial.Text)
    cmd.Parameters.AddWithValue("@supplierCo", frmDatabaseSupplier.txtSupplierCompany.Text )
    cmd.Parameters.AddWithValue("@supplierType", SupplierType)
    cmd.Parameters.AddWithValue("@supplierStreet", frmDatabaseSupplier.txtSupplierStreetAddress.Text)
    cmd.Parameters.AddWithValue("@supplierCity", frmDatabaseSupplier.txtSupplierCity.Text)
    cmd.Parameters.AddWithValue("@supplierContact", frmDatabaseSupplier.txtSupplierContactNumber.Text)
    cmd.Parameters.AddWithValue("@supplierMail", frmDatabaseSupplier.txtSupplierEmail.Text)
    cmd.Parameters.AddWithValue("@status", Status) '<- Here the status var is correctly identified as a boolean, not as a string
    conn.Open() 
    cmd.ExecuteNonQuery() 
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:13:19.183

您遇到数据类型不匹配错误，因为您`INSERT statement`尝试为`Status`数据类型为“是/否”的字段存储字符串值。

这不是真正的 VB.Net 问题。如果您在 VBA 中尝试相同的操作，您会从 Access 的数据库引擎中得到相同的错误。这是下面 VBA 过程的输出。

```
INSERT INTO Supplier (Status)
VALUES('True')
Error -2147217913 (Data type mismatch in criteria expression.) 
```

步骤 ...

```
Public Sub Ju_chan()
    Dim cmdString As String
    Dim Status As Boolean
    Dim strMsg As String

On Error GoTo ErrorHandler

    Status = True
    cmdString = "INSERT INTO Supplier (Status)" & vbCrLf & _
        "VALUES('" & Status & "')"
    Debug.Print cmdString
    CurrentProject.Connection.Execute cmdString

ExitHere:
    On Error GoTo 0
    Exit Sub

ErrorHandler:
    strMsg = "Error " & Err.Number & " (" & Err.Description _
        & ")"
    Debug.Print strMsg
    GoTo ExitHere
End Sub 
```

请理解，这并不是要让您远离使用参数。我只是想澄清你为什么会收到这个错误。

# ruby - 带有 Eruby 的 Apache 无法正确解析 require 语句

> ID：10367922
> 
> 赞同：1
> 
> 时间：2012-04-28T22:00:29.277
> 
> 标签：ruby, apache2, require, eruby

我最近用 eruby 配置了 Apache 并运行了一些 rhtml 页面。我有一个`globalfunctions.rb`文件，我希望该文件可供我在网站上运行的所有页面使用。

但是，我有一个问题：在 rhtml 中放置一个 require 语句会使其中断并返回错误 500。这是页面的代码：

```
<html>
<head>
    <title>Home | Quantum Software</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<%
require './globalfunctions.rb'
%>
<div class="contentBox">

</div>
</body>
</html> 
```

和全局函数文件：

```
def get_file_name()
    return File.basename(__FILE__)
end

def new_nav_link( target, title )
    currentFileName = get_file_name()

    if target == currentFileName
        puts %Q@<a href="#{target}" class="selected">#{title}</a>@
    else
        puts %Q@<a href="#{target}">#{title}</a>@
    end
end 
```

最后，这是 error.log 的最后几行：

```
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] :
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] no such file to load -- ./globalfunctions.rb
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103]  (
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] LoadError
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] )
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] --- generated code ---
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "<html>\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "<head>\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "\\t<title>Home | Quantum Software</title>\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "\\t<link rel=\\"stylesheet\\" type=\\"text/css\\" href=\\"style.css\\" />\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "</head>\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "<body>\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103]
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] require "./globalfunctions.rb"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "<div class=\\"contentBox\\">\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "</div>\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "</body>\\n"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] print "</html>"
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] ----------------------
[Fri Apr 27 23:22:59 2012] [error] [client 174.252.185.103] Premature end of script headers: eruby
[Fri Apr 27 23:23:24 2012] [error] an unknown filter was not added: includes
[Fri Apr 27 23:23:24 2012] [error] an unknown filter was not added: includes
[Fri Apr 27 23:24:04 2012] [error] an unknown filter was not added: includes
[Fri Apr 27 23:27:03 2012] [error] an unknown filter was not added: includes 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:12:33.930

打印出`$LOAD_PATH`并`Dir.pwd`在您的 rhtml 文件中：

```
<!-- For example like this -->
<p>
  The load path is: <br />
  <%= $LOAD_PATH.join("<br />\n") %>
</p>
<p> 
  The current working directory is: <%= Dir.pwd %>
</p> 
```

您可能会发现`Dir.pwd`Ruby 解释器的当前工作目录 ( ) 与 rhtml 文件的位置不同。所以 Ruby 找不到`globalfunctions`，因为它只在`$LOAD_PATH`.

在这种情况下，您需要使用绝对路径来要求您的文件，例如：

```
require '/var/www/mypages/globalfuntions' 
```

或者，或者将您的`globalfuntions.rb`要么放在指向的任何目录中，要么放在`$LOAD_PATH`指向的地方`Dir.pwd`（Ruby 解释器的当前工作目录）。

# facebook - 寻找 API 调用来阻止应用程序 ID

> ID：10367923
> 
> 赞同：0
> 
> 时间：2012-04-28T22:00:45.877
> 
> 标签：facebook, facebook-graph-api, block

我一直在寻找正确的 API 调用来通过应用程序 ID 阻止应用程序，但是我还没有找到它。实际上，我非常确定这是不可能的（出于显而易见的原因，Facebook 收入就是其中之一），但是我想知道是否有人知道一种方法，即使是通过 URL 调用（'https://www.facebook.com /apps/block.php?id=' + APPID + '&action=block' 不再正常工作，如果有的话。）

基本上，我一直在制作一个 ruby​​ 脚本，以帮助用户通过应用程序 ID 阻止垃圾邮件和通常不需要的应用程序，该脚本几乎完成了，但是我需要一种能够真正阻止应用程序的方法！如果有人可以给我一些帮助，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:05:57.550

参考[https://developers.facebook.com/docs/reference/api/application/#banned](https://developers.facebook.com/docs/reference/api/application/#banned)

**创建/禁止**

> 您可以通过向 APP_ID/banned?uid=USER_ID1,USER_ID2 使用应用程序访问令牌（即使用应用程序密钥创建的令牌，而不是如上所述的应用程序页面访问令牌）发出 HTTP POST 请求来禁止应用程序的用户。您可以指定以下参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:06:57.937

这不可能（并且可能/希望永远不会）通过 API 实现。有太多的理由让它保持这种状态。您不希望应用程序相互阻止...

这对您来说可能听起来像是一个表演障碍，但事实并非如此！生成报告，说明为什么最好阻止/删除/报告某些应用程序的原因，并将其显示给用户，指导他们如何执行此操作。

# c# - 单击按钮时刷新 SQLDataReader

> ID：10367925
> 
> 赞同：1
> 
> 时间：2012-04-28T22:00:50.873
> 
> 标签：c#, sql, database, sqldatareader

与标题相同并使用 C#。有人知道怎么做吗？我有一堆数据读入列表框，但除非我重新启动 Windows 窗体，否则数据不会刷新。有人知道如何在按钮单击事件上刷新它吗？

```
 {

                SqlConnection conn = new SqlConnection();
                conn.ConnectionString = (@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\John\Desktop\DB\DB\DB\setup.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
                conn.Open();

                SqlCommand cmd = new SqlCommand
                ("SELECT PEOPLE " + "FROM Workers", conn);

                try
                {
                    SqlDataReader sdr = cmd.ExecuteReader();

                    while (sdr.Read())
                    {
                        listBox1.Items.Add(sdr["people"].ToString());
                    }

                    sdr.Close();
                }

                catch (SqlException ex)
                {
                    MessageBox.Show(ex.Message);
                }

                finally
                {
                    conn.Close();
                }

            } 
```

这是 Windows 形式的加载。所以我想在我的表单上添加一个按钮来刷新列表框项目列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:32:51.407

添加方法

```
private void ShowPeople()
{
    // Put your code;
} 
```

然后在您的按钮单击中使用相同的

```
private void Button_Click(object sender,EventArgs e)
{
    ShowPeople();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:20:53.863

要通过按下按钮重新加载 sqldatareader 上的数据（至少我猜您的意思是使用“刷新”一词进行设置），您只需使用您已经使用的相同代码再次访问数据库。但这里重要的一点是，您使用的是糟糕的设计。因此，我指出了一篇文章（阅读 30 分钟），它极大地帮助了我改进我的代码，从而摆脱了代码重复。

请阅读：http: [//imar.spaanjaars.com/416/building-layered-web-applications-with-microsoft-aspnet-20-part-1](http://imar.spaanjaars.com/416/building-layered-web-applications-with-microsoft-aspnet-20-part-1)

阅读完本文后，我将向您保证，您将更好地了解如何在应用程序中访问数据库中的数据

# c# - WPF 无法访问嵌套控件

> ID：10367926
> 
> 赞同：4
> 
> 时间：2012-04-28T22:00:58.380
> 
> 标签：c#, .net, wpf, xaml

想知道在代码隐藏中访问嵌套控件是否有任何技巧？

给定一些 XAML

```
<UserControl>    
    <textbox />
    <DataGrid Name="MyGrid">
        <Columns>
            <Column field=ABC>
                <EditType>
                    <ComboBox Name="myCombo1"/> 
```

我可以访问 this.MyGrid 但不能访问 this.myCombo1 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:26:21.030

每次我遇到这个问题时，我都可以通过使用[`x:Name`](http://wpf.2000things.com/2010/10/15/95-xname-vs-name/)而不是来解决它[`Name`](http://msdn.microsoft.com/en-us/library/ms752290.aspx)。在您的情况下，这可能不是问题，但请尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:46:11.813

在简单的情况下，您可以使用元素的名称访问元素，但看起来组合框是数据模板的一部分，您可以在运行时使用[VisualTreeHelper](http://msdn.microsoft.com/ru-ru/library/system.windows.media.visualtreehelper.aspx)使用可视化树，但如果您正确使用 mvvm 和代码，通常不需要直接访问元素。您能否提供有关一般问题或测试项目的更多信息以重现问题？

# javascript - IE9 createTreeWalker - 不支持这样的接口

> ID：10367928
> 
> 赞同：3
> 
> 时间：2012-04-28T22:01:16.743
> 
> 标签：javascript, dom

如果任何元素的 ID 已经在我的 XHTML 应用程序中，我的 treewalker 只是为了防止加载 AJAX 加载的内容。

IE9 一直给我“不支持这样的界面”。我知道其中一个参数是对函数的引用。我不需要任何花哨的东西，我只想无条件地迭代所有元素。我需要改变什么？“xml”是一个有效的元素对象。

第一次尝试...

```
var walker = document.createTreeWalker(xml,NodeFilter.SHOW_ELEMENT,null,false); 
```

第二次尝试...

```
var walker = document.createTreeWalker(xml,NodeFilter.SHOW_ELEMENT,function() {return NodeFilter.FILTER_ACCEPT;}, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:12:10.693

[MDN 文档](https://developer.mozilla.org/en/DOM/document.createTreeWalker)将此作为示例显示（已修改以适合您的情况）：

```
var walker = document.createTreeWalker(
    xml,
    NodeFilter.SHOW_ELEMENT,
    { acceptNode: function(node) { return NodeFilter.FILTER_ACCEPT; } },
    false
); 
```

# python - 创建一组原子的列表

> ID：10367929
> 
> 赞同：7
> 
> 时间：2012-04-28T22:01:32.943
> 
> 标签：python, set

假设我有一个这样的原子数组：

```
['a', 'b', 'c'] 
```

（长度可以是任意的）

我想创建一个可以用它们制作的集合列表：

```
[  
    ['a'], ['b'], ['c'],  
    ['a', 'b'], ['a', 'c'], ['b', 'c'],  
    ['a', 'b', 'c']  
] 
```

是否可以在 python 中轻松完成？

也许这很容易做到，但我自己没有得到它。
谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T22:06:20.677

这对我来说听起来像[`powerset`](http://docs.python.org/library/itertools.html#recipes)：

```
def powerset(iterable):
    "powerset([1,2,3]) --> () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)"
    s = list(iterable)
    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T22:15:18.280

简单的。使用`itertools.combinations()`：

```
from itertools import combinations

atom = list('abc')

combs = [i for j in range(1, len(atom) + 1) for i in combinations(atom, j)] 
```

产生：

```
[('a',), ('b',), ('c',), ('a', 'b'), ('a', 'c'), ('b', 'c'), ('a', 'b', 'c')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T22:59:50.430

你也可以这样做：

```
from itertools import product
masks = [p for p in product([0, 1], repeat=len(data))]
combs = [[x for i, x in enumerate(data) if mask[i]] for mask in masks] 
```

# c++ - C++ - 如何找到矩阵的秩

> ID：10367930
> 
> 赞同：1
> 
> 时间：2012-04-28T22:01:52.593
> 
> 标签：c++, matrix, linear-algebra, rank

我很难想出程序可以找到矩阵等级的方法。特别是，我不完全理解如何确保程序能够捕获所有导致依赖关系的线性组合情况。

如何解决这个问题的一般思路是我感兴趣的。但是，如果您想更进一步地回答，我专门寻找仅关于方阵的解决方案。代码也将在 C++ 中。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:15:19.880

一般流程：

```
matrix = 'your matrix you want to find rank of'

m2 = rref(matrix)

rank = number_non_zero_rows(m2) 
```

哪里`rref(matrix)`是你的普通高斯消除的函数

`number_non_zero_rows(m2)`是一个函数，对具有非零条目的行数求和

您对所有导致依赖关系的线性组合情况的关注都通过`rref`（高斯消除）步骤得到解决。顺便说一句，无论矩阵的维度如何，这都有效。

# java - 构造函数中的语法错误。关键字类被使用然后被移除

> ID：10367931
> 
> 赞同：-1
> 
> 时间：2012-04-28T22:02:02.100
> 
> 标签：java, swing, user-interface, object

我正在做一个GUI界面。当我创建一个对象时，我收到一条错误消息，任何人都可以看到我忘记做什么了吗？错误消息位于 MainApp 中为子类构建对象的注释下。提前致谢。我犯了一个错误，将类（类是java中的关键字）放在构造函数中：然后删除了公共类子类（）类以防止发生错误。

//导入。//主应用程序。

```
import javax.swing.JFrame;

public class MainApp 
{

    public static void main(String[] args)
    {
        //Building an object for subClass.
        subClass class = new subClass();
        class.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        class.setSize(275,275);
        class.setVisible(true);

    }
}

//Imports.
//subclass.

import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;

//
public class subClass extends JFrame 
{
    private JLabel item1;

    //
    public subClass() 
    {
        // Sets the Title of the window.
        super("Title");
        // Sets the layout of the window. FlowLayout is the default layout.
        setLayout(new FlowLayout());

        item1 = new JLabel("This is a sentence.");
        item1.setToolTipText("This is going to show up on hover.");
        add(item1);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T22:03:49.320

```
 subClass class = new subClass(); 
```

`class`是一个 Java 关键字。您不能将其用作标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:04:06.057

`class`是保留字。您只能在定义类或访问类文字时使用它。将您的变量重命名为不同的名称，例如`clazz`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:37:12.660

我犯了一个错误，将类（类是java中的关键字）放在构造函数中：public class subClass() {

# android - AlertDialog 的自定义列表视图

> ID：10367934
> 
> 赞同：5
> 
> 时间：2012-04-28T22:02:10.303
> 
> 标签：android, listview, android-alertdialog

我试图让我的 AlertDialog 具有自定义列表视图，但似乎无法让它显示或运行而不会出现错误。

```
 private void buildDialog(){

        int selectedItem = -1; //somehow get your previously selected choice
        LayoutInflater inflater = ((LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE));
        View customView = inflater.inflate(R.layout.listview, null, false);
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setView(customView);
        builder.setTitle("Select Weapon").setCancelable(true);
        builder.setSingleChoiceItems(inventory, selectedItem, "Desc", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which)
            { 
                ListView lv = ((AlertDialog) dialog).getListView();
                itemId = lv.getAdapter().getItemId(which);
                new changeEQ().execute();
            }
        });

        dialog = builder.create();
    } 
```

这是我的 AlertDialog 但无法弄清楚要添加什么来获得我的自定义布局、列表视图和列表行。我在网上查看了指南，但它们显示的内容似乎对我没有用。IE 我一定做错了什么。

编辑：更改代码以包含答案，但屏幕上显示的内容没有变化。没有错误但外观没有变化。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T22:16:43.443

如果您有要传递给 AlertDialog 的自定义布局，请尝试：

```
LayoutInflater inflater = ((LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE));
View customView = inflater.inflate(R.layout.custom_dialog, null, false);
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setView(customView); 
```

如果要定义侦听器，请尝试：

```
ListView list = (ListView) customView.findViewById(R.id.listView1);
list.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // Do as you please
    }
}); 
```

# java - 多个 JLabel MouseListeners

> ID：10367937
> 
> 赞同：-1
> 
> 时间：2012-04-28T22:03:03.440
> 
> 标签：java, image, swing, jpanel, jlabel

我正在尝试将几个 JLabels 添加到 JPanel 以及使用循环的鼠标侦听器。这些 JLabel 将具有鼠标侦听器，以便在单击时更改其图标（使用 label.setIcon()）。但是，我一次只想“选择”一个。因此，我需要他们知道何时单击了另一个标签，以便它知道在选择新标签之前自行关闭。但是，我的问题是，因为我使用循环添加这些标签，所以它们都具有相同的 MouseListener。

谁能教我一个简单的方法来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:06:38.733

这是一个简短的示例，您可以如何实现它（请注意，我没有使用图标，而是更改了标签）：

```
public class MouseListenerExample extends JFrame {

    public static class MyMouseListener extends MouseAdapter {
        private static final Collection<JLabel> labels = new ArrayList<JLabel>();
        private final JFrame frame;

        public MyMouseListener(JFrame frame, JLabel label) {
            this.frame = frame;
            labels.add(label);
        }

        @Override
        public void mouseClicked(MouseEvent e) {
            for (JLabel label : labels) {
                String text = label.getText();
                if (text.startsWith("X ")) {
                    label.setText(text.substring(2));
                }
            }
            JLabel currentLabel = (JLabel) e.getComponent();
            currentLabel.setText("X " + currentLabel.getText());
        }

    }

    public MouseListenerExample() {
        super("MouseListener Example");
        Container c = getContentPane();
        c.setLayout(new FlowLayout());
        for (int i = 0; i < 10; i++) {
            JLabel jLabel = new JLabel("Label " + i);
            c.add(jLabel);
            jLabel.addMouseListener(new MyMouseListener(this, jLabel));
        }
        pack();
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);
    }

    public static void main(String[] args) {
        new MouseListenerExample();
    }
} 
```

主要思想是，您`MouseListener`为每个标签创建一个新标签，但在每个侦听器的范围之外保留一个标签列表（在此示例中，我只使用一个`static`变量，但您也可以在框架中拥有一个包含标签列表的字段.

# language-agnostic - 奎因是什么意思？

> ID：10367941
> 
> 赞同：6
> 
> 时间：2012-04-28T22:03:43.177
> 
> 标签：language-agnostic, definition, self-reference, quine

所以我只是在维基百科上看到了[奎因](http://en.wikipedia.org/wiki/Quine_(computing))这个词，无法弄清楚它到底是什么意思。我对此感到困惑。它有什么实际用途吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T22:07:06.720

Quine 本质上是一个输出自己的源代码的命令。不，它真的没有任何实际用途。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-17T21:41:56.750

quine 在以下情况下很有用：

*   程序化编译

> 目标代码可以直接序列化到磁盘，尽管它前面有一个 cookie 和版本。但是在运行时编译 Scheme 时，您需要一个 Scheme 值：例如，一个已编译的过程。为此，为了不破坏抽象，Guile 在塔底定义了一种伪语言：

```
Value 
```

> 编译为值将目标代码加载到一个过程中，并唤醒沉睡的巨人。
> 
> 也许这种奇怪可以用例子来解释：compile-file 默认编译为目标代码，因为它生成的目标代码必须存在于 Guile 运行时之外的贫瘠世界中；但 compile 默认为编译为 value，因为它的产品重新进入了 Guile 世界。
> 
> 确实，编译过程可以无限期地在这些不同的世界中循环，如下面的 quine 所示：

```
((lambda (x) ((compile x) x)) '(lambda (x) ((compile x) x))) 
```

*   安全检查：

> 在 Omniture 案例中，攻击者需要在 cookie 中添加 quine，然后强制 eval 使用 cid 的新值
> 
> 使用精心制作的 gzip 文件（附件是一个解压到自身的 quine），可以让 tar(1) 调用无限链的 gzip 压缩器，直到运行 tar(1) 的机器上的所有内存都被耗尽或另一个资源限制开始了。

*   自我转变

> 本质上，其直观（和有效）的内容是程序可以使用自己的源代码作为变量，即向编程语言添加程序操作自身（其​​源代码）的能力并不会增加其表达能力。所以存在一个压缩自己的listing的程序；存在一个打印自己的 MD5 校验和的程序（这比查找包含其 MD5 校验和的程序（实际上是任何文件）要容易得多

*   独立的两层架构

> 如果您的数据和数据库代码没有存储在同一个地方，您可能会丢失其中一个，从而使另一个无用。

*   自我保护

> TiddlyWiki 是一个不寻常的实用 quine 示例：正是这种生成自己的源代码副本的能力是 TiddlyWiki 独立保存对自身所做更改的能力的核心。

*   证明

> 如果“quine”的意思是“一个使用自己的源代码作为输入的自动机”，那么哥德尔或多或少地使用了一个quine来证明他的不完备性定理，图灵用一个来证明停止问题是不可计算的，汤普森用一个来证明访问所有软件和编译器的源代码不足以在其中找到后门，Steve Russell 通过将 McCarthy 的 Lisp quine 编码为（709？）汇编，大约发明了函数式编程语言，John von Neumann 预测自繁殖生命形式一般会变成quines，并且随着DNA的发现被证明是正确的。
> 
> 因此，如果 quines 对生命的存在、哥德尔的不完备性定理、停止问题的不可计算性的证明以及函数式编程语言的存在负责，我将它们提名为所有程序中最具历史意义的类别。

*   非结构化循环

> Muriel 没有传统的控制结构。相反，Muriel 有一个命令来用给定的字符串替换当前正在运行的 Muriel 程序，然后运行它。这导致了一种编程方法，在这种方法中，程序必须对自身进行 quine 才能执行任何类型的循环。

**参考**

*   [Guile 参考手册：编译器塔](https://www.gnu.org/software/guile/manual/html_node/Compiler-Tower.html)

*   [有头脑的安全博客：上帝拯救（Omniture）Quine](http://blog.mindedsecurity.com/2011/04/god-save-omniture-quine.html)

*   [不可抗拒的节目 | Lambda the Ultimate：Quines 是历史上最重要的程序！](http://lambda-the-ultimate.org/node/2984#comment-45380)

*   [TiddlyWiki：奎因](http://tiddlywiki.com/#Quine)

*   [libarchive 问题 #660：使用精心制作的 gzip 文件可能会拒绝服务](https://github.com/libarchive/libarchive/issues/660)

*   [奎因数据库](https://github.com/gfredericks/quinedb)

*   [Quines（自我复制程序）](http://www.madore.org/~david/computers/quine.html#sec_fp)

*   [奎因-罗塞塔密码](https://rosettacode.org/wiki/Quine)

*   [两个人口比例的比较| R 教程](http://www.r-tutor.com/elementary-statistics/inference-about-two-populations/comparison-two-population-proportions)

*   [穆里尔 - 埃索朗](https://esolangs.org/wiki/Muriel)

*   [纯 lambda 演算中的 quine](https://cs.stackexchange.com/questions/21367/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T22:05:39.827

不，这不是一个有用的东西，它只是一种风格的练习，一些程序员喜欢......

# ipad - performSegueWithIdentifier 失败 presentPopoverFromBarButtonItem 无法从没有窗口的视图中呈现弹出框

> ID：10367949
> 
> 赞同：1
> 
> 时间：2012-04-28T22:04:38.150
> 
> 标签：ipad, ios5, storyboard

我有一个主/详细视图，它通过情节提要 segue 打开一个弹出视图。主视图控制器的导航栏上有一个添加按钮，可以正常工作。

我添加了一种编辑模式，通过在编辑模式下选择表格单元格来调用相同的弹出框。它从 [self performSegueWithIdentifier:@"addQuery" sender:self] 失败；陈述。弹出窗口中的 viewDidLoad 被调用，但之后抛出异常。

我没有调用 presentPopoverFromBarButtonItem - 它似乎来自 performSegueWithIdentifier。

毫无疑问，主视图控制器有一个窗口 - 单击该视图的表格单元格以启动失败的整个过程。

弹出框是导航控制器序列的开始，这可能是问题的一部分。当它真正被按钮调用时，一切正常，只是试图以编程方式调用它失败了。

我尝试更改 performSegueWithIdentifier 的“发件人”无济于事。

我怀疑这个问题与没有被按钮调用的 segue 有关，我不知道如何伪造它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:55:51.103

ipad popover segue 的工作方式似乎存在一些错误 - 请参阅[Wayne Hartman 的博客文章](http://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx)

一个简单的测试显示 viewWillAppear 在 vi​​ewDidLoad 之后被调用。

我想我理解这个问题......还没有找到解决方案。

调用方法的顺序是...

1.  [启动转场]
2.  viewDidLoad
3.  prepareForSegue
4.  视图将出现

我将我的初始化代码移到 viewWillAppear 方法中——它起作用了。

一般来说，我觉得在 viewWillAppear 而不是 viewDidLoad 中初始化可能是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:28:57.640

我有个类似的问题：

我正在使用 UIDocumentInteractionController 在 Kaynote 应用程序中打开一个 kaynote 文档。我正在使用相同的代码：

```
[docController presentOpenInMenuFromBarButtonItem:_actionBarButtonItem animated:YES]; 
```

上面的代码是从 actiobBarButtonItem 打开弹出窗口，其中包含我想用来打开文件的应用程序选项。如果我从 DetailViewController 得到相同的东西，我会收到与该线程的作者相同的错误消息：“无法从没有窗口的视图中呈现弹出框”

**我能够为我的问题找到一个快速的解决方案**。我不确定它是否与您的相关。我没有使用“presentOpenInMenuFromBarButtonItem”，而是使用了“presentOpenInMenuFromRect”，仅此而已。您只需要定义弹出框出现的正确位置

# character - 限制 JTextField 字符输入

> ID：10367951
> 
> 赞同：1
> 
> 时间：2012-04-28T22:05:06.320
> 
> 标签：character, limit, document, jtextfield

因此，我在整个互联网上进行了搜索，在每个主题中，我都找到了限制 JTextField 输入的解决方案。

```
public class FixedDocument extends PlainDocument {
  private int limit;
  // optional uppercase conversion
  private boolean toUppercase = false;

  FixedDocument(int limit) {
   super();
   this.limit = limit;
   }

  FixedDocument(int limit, boolean upper) {
   super();
   this.limit = limit;
   toUppercase = upper;
   }

  public void insertString (int offset, String  str, AttributeSet attr) throws BadLocationException {
   if (str == null){
       return;
   }
    if ((getLength() + str.length()) <= limit) {
     if (toUppercase) str = str.toUpperCase();
     super.insertString(offset, str, attr);
     }
   }
} 
```

但我对该代码有疑问。此代码行“super.insertString(offset, str, attr);” 给我错误：

```
no suitable method found for insertString(int,java.lanf.String,javax.print.attribute.AttributeSet)
 method javax.swing.text.PlainDocument.insertString(int,java.lang.String,javax.text.AttributeSet) is not applicable
  (actual argument javax.printattribute.AttributeSet cannot be converted to javax.swing.text.AttributeSet by method invocation conversion) 
```

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:09:50.767

您的问题是您导入了错误的 AttributeSet 类。您正在导入`javax.print.attribute.AttributeSet`，何时应该导入`javax.swing.text.AttributeSet`，并且错误消息几乎可以告诉您这一点。同样，我自己，我会为此使用 DocumentFilter，因为它就是为此而构建的。

# java - GWT：mvn 目标期间的高资源使用率

> ID：10367957
> 
> 赞同：2
> 
> 时间：2012-04-28T22:07:01.433
> 
> 标签：java, gwt

我注意到 mvn-gwt 操作期间内存和 CPU 使用率很高，尤其是在编译阶段。内存使用量猛增。我只想知道这是否正常以及是否其他人正在经历这种情况。

我当前的 JVM 设置是`-Xms64m -Xmx1280m -XX:MaxPermSize=512m`

![GWT 编译期间的内存使用情况](../Images/f4c19e3e33bfd1009603b278298ad5e1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T22:23:14.053

我认为这很正常。因为 GWT 中的编译阶段确实非常耗费资源。GWT 提供了一个更大的库（在 gwt-user.jar 中），必须在编译期间对其进行分析，以及许多需要大量内存和处理能力的编译器优化。因此，GWT 编译器在内部使用大量内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:24:02.293

是的，这很正常。它源于谷歌在编写 gwtc 命令（gwtc = GWT Compile）时的 CPU 利用率非常高。

我认为这很好，因为 CPU 的权衡通常是内存使用，这对我来说更有价值。

（我不为谷歌工作:-)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T13:59:44.457

GWT 编译器有一个 localWorkers 设置，告诉它要使用多少个内核。内核越多，它将使用的内存就越多。如果您使用的是 Eclipse 插件，它默认只使用一个（我相信）。但是 Maven 插件默认使用你机器上的所有核心（即，如果你有一个四核，它将使用`localWorkers 5`.

有趣的是，我一直在遵循这里的建议：http: [//josephmarques.wordpress.com/2010/07/30/gwt-compilation-performance/](http://josephmarques.wordpress.com/2010/07/30/gwt-compilation-performance/)，它说这`localWorkers 2`是内存使用和速度的理想设置。这样我的机器在编译过程中不会死机，速度差异很小。

# javascript - Firefox 与 Firefox Mobile (Fennec)：是否存在可检测到的 javascript 差异？

> ID：10367959
> 
> 赞同：0
> 
> 时间：2012-04-28T22:07:07.717
> 
> 标签：javascript, firefox, detection, fennec

我试图找到移动设备支持但桌面版 Firefox 不支持的 javascript 元素，反之亦然。我对用户代理的差异不感兴趣。CSS 支持之间的差异也可能有帮助。您知道检测差异的可靠方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:08:59.730

-moz-touch-enabled CSS 媒体查询仅适用于移动设备。还有一些其他特定于移动设备的 api。[https://developer.mozilla.org/en/Mobile/Firefox_Mobile_for_developers](https://developer.mozilla.org/en/Mobile/Firefox_Mobile_for_developers)

# php - PHP：我能保证 date('s') 总是返回一个唯一的值吗？

> ID：10367962
> 
> 赞同：-4
> 
> 时间：2012-04-28T22:07:32.117
> 
> 标签：php, datetime

如果这个问题有问题，请原谅我。可能这是一个非常愚蠢的问题，但需要确切地知道。

```
$t = date('s'); // s for second
echo mkTime($t); // 1335629750 
```

上面的代码是否总是返回一个唯一的数字，我认为它会返回我当前的时间戳（只有第二个），这对于每个用户来说都是唯一的，我错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:09:12.023

1.  只需使用`time()`就足以获取当前时间戳

2.  每个用户的时间戳不是唯一的，并且不能被依赖为唯一值，因为如果同时调用多个用户可以获得相同的时间戳

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:12:00.497

不，当前时间戳不是唯一的。如果您需要一些独特的东西，请使用 PHP 的函数[uniqid](http://php.net/manual/en/function.uniqid.php)。它根据当前时间（以微秒为单位）生成唯一标识符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T22:10:12.910

不，如果您在同一秒内多次调用它（在同一个脚本中或在两个不同的请求中），它不会是唯一的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T22:10:24.083

是的，脚本在同一秒内运行两次？这根本不是不可能的。因此，您完全不能保证获得一个唯一的号码。如果您需要一些独特的东西，请创建一个（半）随机数，将每个使用的数字保存在数据库/数据文件中，并检查该数字是否在每次之前都使用过。

# ios - Facebook ios注销方法不起作用

> ID：10367964
> 
> 赞同：1
> 
> 时间：2012-04-28T22:07:52.173
> 
> 标签：ios, facebook

我已经使用这种方法在应用程序中注销 facebook

```
- (void)fbDidLogout {
    // Remove saved authorization information if it exists
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"]) {
        [defaults removeObjectForKey:@"FBAccessTokenKey"];
        [defaults removeObjectForKey:@"FBExpirationDateKey"];
        [defaults synchronize];
    }
    NSLog(@"logout success!");
} 
```

此方法已被调用，但是当我重新启动应用程序时，facebook 仍然知道我的最新授权。

我的完整实施

我为 facebook 实例创建单例对象。

这是我的经理.h

```
#import <Foundation/Foundation.h>
#import "FBConnect.h"

@interface FacebookManager : NSObject <FBSessionDelegate> {
    Facebook *facebook;
}
@property (nonatomic, strong) Facebook *facebook;

+ (FacebookManager *)sharedInstance;
- (void)initWithAppID:(NSString *)appID;

@end 
```

这是单身 facebookmanager .m

```
#import "FacebookManager.h"

@implementation FacebookManager
@synthesize facebook;

static FacebookManager *_sharedInstance = nil;

+ (FacebookManager *)sharedInstance {
    @synchronized(self) {
        if (!_sharedInstance) {
            _sharedInstance = [[FacebookManager alloc] init];
        }
    }
    return _sharedInstance;
}

- (void)initWithAppID:(NSString *)appID {
    facebook = [[Facebook alloc] initWithAppId:appID andDelegate:self];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"]
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }
    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    }
}

- (void)fbDidLogout {
    // Remove saved authorization information if it exists
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"]) {
        [defaults removeObjectForKey:@"FBAccessTokenKey"];
        [defaults removeObjectForKey:@"FBExpirationDateKey"];
        [defaults synchronize];
    }
    NSLog(@"logout success!");
}

@end 
```

在 appDelegate 我接下来做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    fbManager = [FacebookManager sharedInstance];
    [fbManager initWithAppID:@"myappid"];

... (some other code)

} 
```

还将此代码添加到应用委托：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [fbManager.facebook handleOpenURL:url]; 
}

- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[fbManager.facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[fbManager.facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];    
} 
```

在其他视图控制器中，我将此方法称为注销：

```
- (IBAction)logoutFacebook:(id)sender {
    FacebookManager *fbManager = [FacebookManager sharedInstance];
    [fbManager.facebook logout];
} 
```

同样在 plist 我添加了所需的 url 方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T05:36:29.767

**将Facebook.m**代码修改为此，这对我有用。

```
-（无效）注销：（id）委托{

    self.sessionDelegate = 委托；
    [_accessToken 释放];
    _accessToken = nil;
    [_expirationDate 发布];
    _expirationDate = 无；

    NSHTTPCookieStorage *cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    NSArray *facebookCookies = [cookies cookiesForURL:[NSURL URLWithString:@"http://login.facebook.com"]];
    对于（facebookCookies 中的 NSHTTPCookie* cookie）{
        [cookies deleteCookie:cookie];
    }

    //添加这个。
    for (NSHTTPCookie *_cookie in cookies.cookies){
        NSRange domainRange = [[_cookie domain] rangeOfString:@"facebook"];
        如果（域范围。长度 > 0）{
            [cookies deleteCookie:_cookie];
        }
    }

    if ([self.sessionDelegate respondsToSelector:@selector(fbDidLogout)]){
        [_sessionDelegate fbDidLogout];
    }
}

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T23:24:25.857

“当我重新启动应用程序时，Facebook 仍然知道我的最新授权”是什么意思？这是否意味着您的 FB 访问令牌仍然有效？您仍然看到 userdefaults 值吗？究竟是什么？

如果您的意思是当您再次触发 FB 登录时，它会自动再次登录，那么是的，**如果您在 iOS 中安装了 Facebook APP，则用户必须手动退出 FB 应用程序才能切换帐户。**

如果未安装 FB 应用程序，则 SSO 应在启动注销后提示用户再次登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T10:05:09.263

这似乎是带有 sso/oauth 2.0 的 ios sdk api 的工作方式。即使在清除令牌后我也无法完全注销，也无法从应用程序切换用户。必须去FB应用切换用户

作为一种解决方法，更改 Facebook.m 中的行并禁用 safariAuth

// [self authorizeWithFBAppAuth:YES safariAuth:YES];

```
 [self authorizeWithFBAppAuth:NO safariAuth:NO] 
```

但是每次授权时都必须输入用户名和密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T16:24:28.220

在 Facebook.m 中，添加以下代码以删除 m.facebook.com 域中的 cookie。

```
- (void)invalidateSession {

   ...
    NSArray* facebookMCookies = [cookies cookiesForURL:
                                [NSURL URLWithString:@"https://m.facebook.com"]];

    for (NSHTTPCookie* cookie in facebookMCookies) {
        [cookies deleteCookie:cookie];
    }

  ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T13:44:57.013

我已经成功尝试了这段代码：

```
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cachesDirectory = [paths objectAtIndex:0];
NSLog(@"cache dir %@", cachesDirectory);
NSError *error = nil;
for (NSString *file in [fm contentsOfDirectoryAtPath:cachesDirectory error:&error]) {
    BOOL success = [fm removeItemAtPath:[NSString stringWithFormat:@"%@/%@", cachesDirectory, file] error:&error];
    if (!success || error) {
        NSLog(@"Error delete file: %@, %@", file, error);
    } else {
        NSLog(@"Deleted file: %@", file);
    }
} 
```

# c++ - 在 C++ 中的堆上创建结构数组

> ID：10367966
> 
> 赞同：0
> 
> 时间：2012-04-28T22:08:22.913
> 
> 标签：c++, arrays, structure, heap-memory

我需要在堆上声明一个结构数组，然后将数据从堆栈上的并行数组和计算传输到每个结构中。我宣布

```
struct Grades
{
    string  studentName;
    int     scores[4];
    double  average;
};

....

Grades *art1301 = new Grades;

....

(art1301 + i)->studentName = names[i];

for((int i = 0 ; i < 5 ; i++ )
(art1301 + i)->scores[j] = exams[i][j];

(art1301 + i)->average = average; 
```

我的程序访问第一条记录，但它在访问第二条记录的第一个字段后崩溃。我不明白为什么它适用于第一张唱片，但在第二张唱片中间死了？我是否正确访问了结构？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:16:43.443

要分配一个数组，您需要 的数组形式`new`，带方括号：

```
Grades *art1301 = new Grades[200];
//                          ^^^^^ 
```

数组大小可以是动态确定的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:11:37.627

您不是为数组分配内存，而是仅为一个元素分配内存。

正如有人在评论中所说，关键在于`new Grades`说明

此外，除非您`i`之前声明了另一个变量（这是一种不好的做法），否则该代码不会编译，因为`(art1301 + i)->studentName = names[i];`找不到变量`i`

# python - 更新 Django 模型中的字段模式

> ID：10367968
> 
> 赞同：0
> 
> 时间：2012-04-28T22:08:36.653
> 
> 标签：python, mysql, django

我正在尝试从模型中的以下内容更新字段键：

```
name = models.CharField(max_length=255, unique = True) 
```

到：

```
name = models.CharField(max_length=255, unique = False) 
```

但是我需要在不丢失任何当前数据的情况下更新 mysql 数据库。我该怎么做呢？我试过`$ python manage.py syncdb`了，但它似乎没有更新密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T22:15:49.403

那是因为`syncdb` [不这样做](https://docs.djangoproject.com/en/dev/ref/django-admin/#syncdb)。它只会创建新表，但如果您的模型发生更改，则不会更改现有表。

在开发环境中，要在更改模型后更新数据库，您可以使用`python manage.py reset appname`清空数据库，然后`syncdb`再次使用。

否则，您必须使用[South](http://south.aeracode.org/docs/about.html)等工具。South 用于处理迁移，但在模型更改时也会更改数据库。

还有[django-evolutions 可以满足](http://code.google.com/p/django-evolution/)您的需求，但我仍然推荐 South，因为它的迁移功能几乎总是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:29:13.963

您可以使用[PHPMyAdmin](http://www.phpmyadmin.net/home_page/index.php)并从此字段中删除唯一索引。

# php - substr_count 不适用于新行？

> ID：10367971
> 
> 赞同：1
> 
> 时间：2012-04-28T22:09:04.030
> 
> 标签：php, newline, substr

这让我发疯，它一直返回 0

```
substr_count('df
d
fd
f
df', '\n'); 
```

如果我使用像“d”这样的字母，它可以正常工作

```
substr_count('df
d
fd
f
df', 'd'); 
```

任何人都可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T22:10:40.617

您需要对控制字符使用双引号：

```
var_dump(substr_count('df
d
fd
f
df', "\n")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T22:10:53.207

'\n' 与 "\n" 不同。'\n' 是由斜杠和字母“n”组成的文本，而“\n”是换行符。

建议您阅读 PHP 手册中有关字符串的[相关部分](http://uk.php.net/manual/en/language.types.string.php)，特别是其中涉及单引号和双引号字符串的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:15:00.793

除了 Alix 和 Mark：请使用`PHP_EOL`代替`\n`. 换行符在不同的平台（Windows/Linux/Mac）上有所不同，但`PHP_EOL`总是正确的。有关该主题的更多信息，请参阅此问题：[何时使用 PHP 常量“PHP_EOL”？](https://stackoverflow.com/questions/128560/when-do-i-use-the-php-constant-php-eol)

# android - Android Tabhost 保存选项卡的状态

> ID：10367974
> 
> 赞同：2
> 
> 时间：2012-04-28T22:09:15.483
> 
> 标签：android, android-tabhost, fragment

我有一个 Android 应用程序，其主要活动是 tabhost。

如何保存每个选项卡的状态？现在，如果我从选项卡 A 开始，在选项卡中打开一个新的 Fragment C，转到选项卡 B，然后返回选项卡 A，我只看到原来的选项卡 A。

选项卡 A --> 片段 C

选项卡 B

如何制作它以便我可以看到 backstack 选项卡？

一般来说，如果我修改选项卡的状态，我希望能够离开它，返回并查看修改后的状态。

当我切换标签时，我目前正在分离和附加片段。这是错误的方法吗？问题是别的吗？

谢谢！

# atk4 - addCondition 与 addQuickSearch

> ID：10367976
> 
> 赞同：0
> 
> 时间：2012-04-28T22:09:17.487
> 
> 标签：atk4

我有一个条件，我总是在 init 上添加一些模型。这是一个授权条件。当我添加具有此条件的模型的网格并添加快速搜索时，我得到了意外的行为。这两个条件都存在，一个是我添加的，一个是通过快速搜索生成的，但它们与“或”连接，因此没有任何作用。

我认为条件应该像这样联系在一起：

```
select * from my_model
where 
 (condition_added_with_addCondition1) AND (condition_added_with_addCondition2) 
 AND (condition_from_quicksearch1 or condition_from_quicksearch2) 
```

在我的示例中，我使用了两次 addCondition 并使用 addQuickSearch 添加了两个搜索框。

# php - 如何防止钻石形状的问号出现？

> ID：10367979
> 
> 赞同：1
> 
> 时间：2012-04-28T22:10:11.033
> 
> 标签：php, html, character-encoding

我搜索了 StackOverFlow 并找到了类似的问题，但没有任何东西能回答我的特殊情况，所以我想把这个作为一个新问题来问。

当我从文本框将条目插入数据库时​​，我使用 mysql_real_escape_string(); 然后当我显示信息时，我使用 htmlspecialchars();

我使用 UTF-8 作为字符集。我们正在使用 HTML5 格式。数据库的排序规则默认设置为 latin1_swedish_ci，所以我使用了它。对于所有表，其设置为 latin1_swedish_ci。对于表中的所有字段，我们使用 utf8_general_ci。

例如，这是显示时的外观：

```
 �Who are you?� he asked his iPhone. �I am a humble 
   personal assistant,� the device replied, bringing the biggest... 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T22:13:40.337

您的问题是排序规则设置，确保它是数据库、表格和文本字段的 utf8 之一（如 utf8_general_ci）。

此外，请确保您也将连接字符集设置为 UTF-8：

```
SET NAMES utf8; 
```

# python - 如何在 Tornado 中使用 POST 方法？

> ID：10367981
> 
> 赞同：22
> 
> 时间：2012-04-28T22:10:18.760
> 
> 标签：python, post, tornado

我正在尝试使用 Tornado 启动服务器并向其发布字符串。我找到了很多关于如何在处理程序类中编写 post 方法的示例，但没有关于如何编写 post 请求的示例。我当前的代码确实会导致 post 方法执行，但 get_argument 没有获取数据——它只是每次都打印默认的“未收到数据”。我究竟做错了什么？

我的代码如下所示：

```
class MainHandler(tornado.web.RequestHandler):
    def post(self):
        data = self.get_argument('body', 'No data received')
        self.write(data)

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":

    def handle_request(response):
        if response.error:
            print "Error:", response.error
        else:
            print response.body
        tornado.ioloop.IOLoop.instance().stop()

    application.listen(8888)    
    test = "test data"
    http_client = tornado.httpclient.AsyncHTTPClient()
    http_client.fetch("http://0.0.0.0:8888", handle_request, method='POST', headers=None, body=test)
    tornado.ioloop.IOLoop.instance().start() 
```

将我要发送的字符串放入“body”参数中是正确的做法吗？在我见过的一些示例中，例如[这里](https://stackoverflow.com/questions/7754936/post-to-tornado-server)，似乎人们创建了自己的参数，但是如果我尝试向请求中添加新参数，例如

```
http_client.fetch("http://0.0.0.0:8888", handle_request, method='POST', headers=None, data=test) 
```

我只是收到一条错误消息“TypeError: **init** () got an unexpected keyword argument 'data'”

谢谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-29T01:51:31.590

> 似乎人们创建了自己的参数

不完全的。从文档：

> 获取（请求，**kwargs）
> 
> 执行一个请求，返回一个 HTTPResponse。
> 
> 请求可以是字符串 URL 或 HTTPRequest 对象。如果它是一个字符串，我们使用任何额外的 kwargs 构造一个 HTTPRequest： HTTPRequest(request, **kwargs)

（[链接](http://www.tornadoweb.org/en/stable/httpclient.html#tornado.httpclient.HTTPClient.fetch)）

所以kwargs实际上是来自[这个方法](http://www.tornadoweb.org/en/stable/httpclient.html#tornado.httpclient.HTTPRequest)。

无论如何，问题的实质：如何发送 POST 数据？你在正确的轨道上，但你需要对你的 POST 数据进行 url 编码并将其用作你的 body kwarg。像这样：

```
import urllib
post_data = { 'data': 'test data' } #A dictionary of your post data
body = urllib.urlencode(post_data) #Make it into a post request
http_client.fetch("http://0.0.0.0:8888", handle_request, method='POST', headers=None, body=body) #Send it off! 
```

然后获取数据：

```
data = self.get_argument('data', 'No data received') 
```

# php - 查询日历数组时出现奇怪的数据库错误

> ID：10367993
> 
> 赞同：0
> 
> 时间：2012-04-28T22:12:00.197
> 
> 标签：php, database, codeigniter

我有一个来自事件表的“事件”数据库，它从我的数据库中选择一个 eventid、年、月、日，以便在日历中创建动态链接。

这是我的控制器：

```
$this->load->model('Sitemodel');
$month=date('n');
$year=date('Y');
$datearray=$this->Sitemodel->get_dates($month,$year);

$baseurl=base_url('site/event').'/';
foreach ($datearray as $datee) {
       $dateeday=$datee['dtDay'];
       $datacalendar[$dateeday]= $baseurl.$datee['eventid'];
}
$data['calenderinfo']=$this->calendar->generate($year,$month,$datacalendar);
$data['events']=$this->Sitemodel->get_10_all_events();

$this->load->view('index',$data); 
```

这是我的模型：

```
function get_dates($month,$year){
   $sql="SELECT eventid, DAY(dateof) AS dtDay, MONTH(dateof) AS dtMonth, YEAR(dateof) AS dtYear FROM event WHERE MONTH(dateof)=? AND YEAR(dateof)=?";
   $result=$this->db->query($sql,array($month,$year));
   return $result->result_array();
} 
```

我得到的错误是：

```
A Database Error Occurred

Error Number: 1054

Unknown column 'date' in 'order clause'

SELECT * FROM (`event`) ORDER BY `date` desc LIMIT 10

Filename: C:\wamp\www\event\system\database\DB_driver.php

Line Number: 330 
```

我无法调试该错误，因为当我知道它必须是我的控制器/模型中的某些东西时，它会链接回 DB_driver。

我的事件表（列名）的数据库结构是：

eventid,eventtype,description,dateof(日期类型)

如果显示了我的控制器/模型/视图的错误行，我通常可以弄清楚这一点，但它在系统级别显示了一个错误，这完全让我失望。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:25:11.813

产生错误的查询发生在您发布的代码之外的其他地方。它可能是根据您的模式文件从模型调用中生成的。检查您的架构文件，看看它是否有`date`引用而不是`dateof`.

这是 ORM 的缺点之一，您可以整天编辑模式，但是如果您不更新模式配置文件并重新构建模型，那么各种事情都会中断。

# wcf - 我需要什么地址才能在我的计算机上公开托管一个宁静的 WCF 服务？

> ID：10367999
> 
> 赞同：0
> 
> 时间：2012-04-28T22:12:20.427
> 
> 标签：wcf, rest, uri

我已经构建了一个 wcf Web 服务，并且通过使用我的私有 IP 地址让它在我的本地机器上运行良好。但是，当我尝试在另一个网络上访问它时，浏览器无法连接。我知道有一个公共 IP 地址并已尝试切换到该地址，但我自己的计算机和其他网络上的计算机都出现故障。

我正在使用的代码是：

```
WebServiceHost host = new WebServiceHost(typeof(serviceSetup), new Uri("http://PublicIp:8000"));
ServiceEndpoint ep = host.AddServiceEndpoint(typeof(serviceContract), new WebHttpBinding(), "/");
ep.Behaviors.Add(new WebHttpBehavior());
host.Open();
/*
WebServiceHost myHost = new WebServiceHost(typeof(serviceSetup), new Uri("http://PrivateIP:8000"));
ServiceEndpoint myep = myHost.AddServiceEndpoint(typeof(serviceContract), new WebHttpBinding(), "/");
myep.Behaviors.Add(new WebHttpBehavior());
myHost.Open();
*/ 
```

我究竟做错了什么？它是像防火墙块这样的非代码问题吗？还是我不了解 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:51:38.197

问题是我在一个路由器后面，它阻止我的计算机托管在公共 IP 地址上。解决方案是将路由器上的端口映射到我的计算机，以便我的应用程序可以接收传入的请求。非常感谢 Mark Hall 在评论中为我指出了正确的方向。