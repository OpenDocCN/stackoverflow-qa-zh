# StackOverflow 问答 11993000-11993999

# java - MySQL - Java SSL 连接抛出错误

> ID：11993002
> 
> 赞同：0
> 
> 时间：2012-08-16T18:08:05.330
> 
> 标签：java, mysql, ssl, connection

我正在尝试使用以下程序通过 SSL 从 Java 连接到 MySQL DB。

```
public class MySQLJDBC {

 public static void main(String[] args) throws ClassNotFoundException, SQLException {
  Class.forName("com.mysql.jdbc.Driver");
  String m_host = "localhost";
  String m_port = "3306";
  String m_db = "test";
  boolean isSSL = true;
  String dbUrl = "jdbc:mysql://" + m_host + ":" + m_port + "/" + m_db + "?noDatetimeStringSync=true&verifyServerCertificate=false&useSSL=" +String.valueOf(isSSL);
  String m_user = "root";
  String m_pass = "Pass";
  System.setProperty("javax.net.ssl.keyStore","D:/content/dev/connectors/Database (JDBC)/2011.1/src/mykeystore.jks");
  System.setProperty("javax.net.ssl.keyStorePassword","password");
  System.setProperty("javax.net.ssl.trustStore","D:/content/dev/connectors/Database (JDBC)/2011.1/src/mystore.jks");
  System.setProperty("javax.net.ssl.trustStorePassword","password");
  DriverManager.getConnection(dbUrl, m_user, m_pass);
  System.out.println(System.getProperty("javax.net.ssl.keyStore"));
 }
} 
```

如果我安装了客户端密钥库，这将引发以下异常。

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

Last packet sent to the server was 328 ms ago.
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
 at java.lang.reflect.Constructor.newInstance(Unknown Source)
 at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
 at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074)
 at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2104)
 at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:729)
 at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:46)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
 at java.lang.reflect.Constructor.newInstance(Unknown Source)
 at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
 at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:302)
 at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:283)
 at java.sql.DriverManager.getConnection(Unknown Source)
 at java.sql.DriverManager.getConnection(Unknown Source)
 at MySQLJDBC.main(MySQLJDBC.java:20)
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

Last packet sent to the server was 328 ms ago.
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
 at java.lang.reflect.Constructor.newInstance(Unknown Source)
 at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
 at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074)
 at com.mysql.jdbc.ExportControlled.transformSocketToSSLSocket(ExportControlled.java:102)
 at com.mysql.jdbc.MysqlIO.negotiateSSLConnection(MysqlIO.java:4357)
 at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1302)
 at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2032)
 ... 12 more
Caused by: java.net.SocketException: Software caused connection abort: socket write error
 at java.net.SocketOutputStream.socketWrite0(Native Method)
 at java.net.SocketOutputStream.socketWrite(Unknown Source)
 at java.net.SocketOutputStream.write(Unknown Source)
 at com.sun.net.ssl.internal.ssl.OutputRecord.writeBuffer(Unknown Source)
 at com.sun.net.ssl.internal.ssl.OutputRecord.write(Unknown Source)
 at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecordInternal(Unknown Source)
 at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(Unknown Source)
 at com.sun.net.ssl.internal.ssl.Handshaker.sendChangeCipherSpec(Unknown Source)
 at com.sun.net.ssl.internal.ssl.ClientHandshaker.sendChangeCipherAndFinish(Unknown Source)
 at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverHelloDone(Unknown Source)
 at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(Unknown Source)
 at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Unknown Source)
 at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Unknown Source)
 at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)
 at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
 at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source)
 at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source)
 at com.mysql.jdbc.ExportControlled.transformSocketToSSLSocket(ExportControlled.java:87)
 ... 15 more 
```

如果我注释掉密钥库行，就会发生连接。

```
//System.setProperty("javax.net.ssl.keyStore","D:/content/dev/connectors/Database (JDBC)/2011.1/src/mykeystore.jks");
//System.setProperty("javax.net.ssl.keyStorePassword","password");, 
```

然后连接发生得很好。我的问题是，

1.  知道为什么我在指定此密钥库时收到此错误吗？
2.  我不想要相互身份验证。因此我想对服务器说不要验证客户端证书。这有什么财产吗？

任何答案表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:16:56.267

1.  如果它在没有密钥库的情况下工作而不是在它的情况下工作，（a）其中的内容有问题，并且（b）无论如何你都不需要它。

2.  如果您不想发送客户端证书，请不要指定包含一个的密钥库。

# extjs - Extjs4：如何在多个商店或模型之间共享数据？

> ID：11993003
> 
> 赞同：9
> 
> 时间：2012-08-16T18:08:09.650
> 
> 标签：extjs, extjs4

我是 Ext 的新手，我正在努力找出模型商店和代理。

服务器返回一个大型 JSON 对象。例如。

```
{ 
    "responseHeader":{ 
        "status":0, 
        "QTime":12, 
        "params":{ 
            "facet":"true", 
            "facet.limit":"40" 
        }
    },
    "response":{
        "numFound":3806,
        "start":0,
        "docs":[ 
            { 
                //Lots of fields
                "id":"1234",
                ...
                //Some array properties
                "testfield":[ 
                    "",
                    ""
                ],
                ...
            }
        ]
    },
    "facet_counts":{
        "facet_queries":{
            "email":3806
        },
        "facet_fields":{
           "emailaddress":{ 
            },
            "subject":{
                "candles":136,
                "filter":130 
            },
            "fromemail":{ 
            },
           //...
        },
        "facet_dates":{ },
        "facet_ranges":{}
    },
    "highlighting":{
        "some doc id":{
            "emailtext":[ " Tel.: blah blah <em>blah</em>" ],
            "combined":[ "<em>Email</em> To: blah blah blah" ]
        }
    }
} 
```

我不想多次加载这些数据，我想从这个对象中获取数据，例如 docs 对象，并将其放入网格中。然后拉出另一部分放入选择框。

我如何加载这些数据一次，然后从中创建模型和存储以提供给网格和选择框？

从我读到的代理持有服务器响应？所以我尝试在商店外创建一个代理。认为我可以将同一个代理与多个商店一起使用。

```
var myProxy1 = Ext.create('Ext.data.proxy.Proxy', {
    type: 'ajax',
    url : '../test',
    reader: {
        type: 'json',
        root: 'responseHeader'
    }
}); 
```

但是当我将 myProxy1 传递给商店时

```
Ext.define('Test', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'status', type: 'int'},
        {name: 'QTime',  type: 'int'},
        {name: 'param',  type: 'auto'}
    ]
});

var myStore = Ext.create('Ext.data.Store', {
    model: 'Test',
    proxy: myProxy1,
    autoLoad: true,
    listeners:{
        load: function( ths, records, successful, operation, eOpts ){
            debugger;
        }
    }
}); 
```

它不起作用。load 事件永远不会被触发。没有加载数据。我可以看到代理发出了请求，我看到了来自服务器的响应，但它没有加载。

如果我将代理内联，它会加载。

```
var myStore = Ext.create('Ext.data.Store', {
    model: 'Test',
    proxy:{
       type: 'ajax',
       url : '../test',
       reader: {
         type: 'json',
         root: 'responseHeader'
       }
    },
    autoLoad: true,
    listeners:{
        load:function( ths, records, successful, operation, eOpts ){
         debugger;
        }
    }
}); 
```

我在想我可以有一个代理，将它附加到多个商店，然后在加载商店之前更改它的阅读器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T22:09:17.080

您几乎就在那里，尽管我很确定您已经理解了这一切，但为了其他人的利益，请允许我为您的问题提供扩展答案和稍微修改的解决方案。

定义：

*   **模型**- 主要定义记录具有的字段。
*   A **Store** - 保存记录的集合。
*   **代理**-通过选定的方法（Ajax、Direct 等）促进服务器通信，并在关联存储或模型发生更改时映射 CRUD（创建/读取/更新/销毁）操作。
*   A **Reader** - 告诉代理如何解释服务器返回的数据。
*   **网格**或**组合框**- 可以显示商店记录。

您的情况并不少见 - 虽然默认情况下 ExtJS 分别加载每个存储，但应用程序可能希望通过单个读取调用一次加载各种存储；例如，当渲染一个依赖于商店的组件时，它依赖于另一个商店。

您的代码离实现这一目标不远，但这是我的做法。实际上，当加载“主”（任务）存储时，服务器响应还携带“从”（标签）存储的数据，然后手动加载到该“从”存储。

“从”存储（注意`autoload: false`且无读取操作）：

```
Ext.define('DL.store.Tags', {
    extend: 'Ext.data.Store',    
    model: 'DL.model.Tag',

    // Notice the tags are actually returned when the tasks are loaded and loaded into this store by the TasksStore.
    autoLoad: false, 
    autoSync: true,

    proxy: {
        type: 'direct',

        api: {
            create:  Tags.Create,
            update:  Tags.Update,
            destroy: Tags.Destroy,
        },

        reader: {
            type: 'json',
            root: 'tags'
        }        
    },    

}); 
```

然后是“主”商店：

```
Ext.define('DL.store.Tasks', {
    extend: 'Ext.data.TreeStore',    
    model: 'DL.model.Task',

    autoLoad: true,   
    autoSync: true,

    root: {
        text: 'Root',
        id: null,
        expanded: true
    },

    proxy: {
        type: 'direct',

        api: {
            create:  Tasks.Create,
            read:    Tasks.Read,
            update:  Tasks.Update,
            destroy: Tasks.Destroy,
        },

    },

    onProxyLoad: function( aOperation )
    {
        // A read request for tasks will also return the user tags.
        // So feed these tags into their store.
        var iResult = aOperation.response.result,
            iTagsStore = Ext.StoreManager.lookup( 'Tags' );

        if ( Ext.isDefined( iResult.tags ) )
            iTagsStore.loadRawData( iResult );

        // We need this line for "Tasks" store to load its own data
        this.callParent(arguments);       
    }
}); 
```

基本上它所做的只是获取服务器响应的一部分并将其手动加载到“从”存储中。

PHP服务器端代码（用于任务读取操作）涉及：

```
return array(
    'success'  => true,
    'children' => $iNodes,
    'tags' => $iTags            
); 
```

`children`“主”存储的阅读器根在哪里，`tags`然后是加载到“从”存储中的附加数据。

我希望你能研究如何将这些概念应用到你的代码中。

# python - 在python中使用不同字段的不同顺序对元组进行排序

> ID：11993004
> 
> 赞同：3
> 
> 时间：2012-08-16T18:08:16.360
> 
> 标签：python, sorting, tuples

假设我们有一个包含 5 个元组的列表：

```
(a, b , c, d, e) 
```

让列表为 student_tuples。

我希望对不同字段的列表进行排序。

下面提到的命令

```
sorted(student_tuples, key=itemgetter(2,4,0,1)) 
```

将对**所有**字段的列表按升序排序。

下面提到的命令

```
sorted(student_tuples, key=itemgetter(2,4,0,1), reverse=true) 
```

**将按所有**字段的降序对列表进行排序。我正在寻找的是**对不同字段的不同顺序的列表进行**排序。有没有一种简单的方法可以做到这一点。

根据答案，该技术可用于任何语言

谢谢，古吉

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T18:18:54.923

如果值是数字，您可以使用以下方法轻松完成此操作`lambda`：

```
sorted(student_tuples, key=lambda x: (x[2],x[4],-x[0],x[1]))
                                                #^ This field will be 
                                                #  in descending order 
```

如果在 lambda 函数内部不能轻易取反顺序，则需要依靠 python 排序的稳定性，再排序几次：

```
s = sorted(student_tuples, key=itemgetter(1))
s.sort(key=itemgetter(0),reversed=True)
s.sort(key=itemgetter(2,4)) 
```

[我在这个答案](https://stackoverflow.com/a/11732149/748858)中更深入地解释它。

证明我上面的答案完成了同样的事情（使用数字输入）：

```
import random
def rand_tuple():
    """ Return a random 5-tuple """
    return tuple( random.random() for _ in range(5) )

#100 random 5-tuples
lst = [ rand_tuple() for _ in range(100) ] 

#sort the list using method 1
sorted_lst = sorted(lst, key = lambda x: (x[2],x[4],-x[0],x[1])) 

#sort the list in place using method 2
lst.sort(key = itemgetter(1))  #<- Rightmost tuple element first!!!
lst.sort(key = itemgetter(0), reversed = True)
lst.sort(key = itemgetter(2,4))

print (lst == sorted_lst) #True -- Results are the same :-) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:23:42.197

您可以创建一个具有有意义的属性名称的类，而不仅仅是数字索引；如果你给它`__cmp__`（python 2.x）或`__eq__`加上`__lt__`@total_ordering（python 3.x），那将很容易排序。

另一种选择是保留元组，将它们转换为列表，并否定您需要反向排序的任何数字字段。您可以对字符串执行此操作，但不如数字那么整洁。

元组排序速度快的部分原因是它们不是超级灵活。

# php - 如何在介绍文本之外提取 Joomla 介绍图像，以使其显示在特色页面的标题和其他信息的左侧？

> ID：11993006
> 
> 赞同：0
> 
> 时间：2012-08-16T18:08:25.407
> 
> 标签：php, html, css, joomla, blogs

我正在尝试在 Joomla 上为我的特色文章页面实现自定义布局，以便使用我在 Photoshop 上制作的自定义设计制作一个不错的博客布局。

这是我想要实现的外观：http: [//i48.tinypic.com/2ztbx54.png](http://i48.tinypic.com/2ztbx54.png)

这是我现在得到的样子：http: [//i49.tinypic.com/1ibn5w.png](http://i49.tinypic.com/1ibn5w.png)

其余的布局不会有问题，因为它很容易修改，但是，我现在卡住的问题是介绍图像。我希望它位于文章标题的左侧，一些信息和介绍文本，如第一张图片所示。

是否可以从介绍文本中提取图像以便将其放置在需要的地方？

帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:40:08.670

首先，我的评论只是一个玩笑。

现在，对于问题：您的图像位于 div 中`item column-1`，而它应该位于 div 上方（的容器`item column-1`）中，即`items-row cols-1 row-0`.

所以这：

```
<img src="/images/Articles/macbookpro-review-01-top.jpg" width="200" height="200" alt="macbookpro-review-01-top" style="float: left;"> 
```

不能进去，`<div class="items-row cols-1 row-0">`或者`<dl class="article-info">`你正在做什么。

它需要位于外部 div 中。所以应该在`<div class="items-row cols-1 row-0">`. 所以像这样：

```
<div class="items-row cols-1 row-0">
  <img src="/images/Articles/macbookpro-review-01-top.jpg" width="200" height="200" alt="macbookpro-review-01-top" style="float: left;">
//...and the rest of your stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:30:13.877

在您的 css 文件中添加以下代码以帮助您开始：

```
.article-info {
    float:right;
}
h2 { 
    text-align: right; 
}
.item.column-1 img {
    margin-top: -50px;
}
.article-info-term { 
    padding-left: 40px; 
} 
```

另外，带走`margin: 0px;`您添加到图像中的内容。

这将是结果：

[http://i735.photobucket.com/albums/ww355/lodder16/stack_image.png](http://i735.photobucket.com/albums/ww355/lodder16/stack_image.png)

希望这可以帮助

# solr - 使用查询更新 solr 文档？

> ID：11993007
> 
> 赞同：3
> 
> 时间：2012-08-16T18:08:29.110
> 
> 标签：solr

在 solr 文档中，有使用查询删除文档的选项，如下所示：

```
<delete><query>*:*</query></delete>
<delete><query>id:298253</query>
<query>entitytype:BlogEntry</query></delete> 
```

但是，我找不到任何关于基于查询更新文档的参考资料。这可能与 solr 中的更新有关吗？基本上我想更新与查询匹配的所有文档的值。

就像是`update prop1=val1, prop2=val2 where ( prop3 < val3 and prop4=val4 )`

谢谢，
-Vineel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:28:09.730

请记住，对于 Solr 中的部分更新文档，它们需要被存储。这增加了索引大小。检查[这个](http://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/)以获得一些背景

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:02:10.490

[Solr 4.0](http://wiki.apache.org/solr/Solr4.0)版本中添加了更新文档的功能，该版本本周刚刚进入 Beta 版。我不确定是否能够根据查询更新文档，但您可以在[Solr 用户列表](http://lucene.apache.org/solr/discussion.html)中询问。不幸的是，我还没有机会探索 4.0 版本以了解原子更新是如何工作的。

# c# - c#中的winapi声明

> ID：11993009
> 
> 赞同：0
> 
> 时间：2012-08-16T18:08:30.637
> 
> 标签：c#, winapi

有人可以告诉我如何在 c# 中声明 winapi？我有这个错误：

```
Error   1   The name 'WinApi' does not exist in the current context bla bla bla... 
```

排队：

```
 WinApi.OpenProcess(WinApi.PROCESS_ALL_ACCESS, 0, (uint)aProc[0]); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T18:10:58.507

如果您没有使用提供这些方法和常量的库，则需要使用[Platform Invocation Services (P/Invoke)](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)自己实现它们。

例如：

```
public static class WinApi {
    public const int PROCESS_ALL_ACCESS = /* whatever the value is */;

    [DllImport("kernel32.dll")]
    public static extern IntPtr OpenProcess(int dwDesiredAccess,
        bool bInheritHandle, int dwProcessId);
} 
```

# c# - 无法读取配置部分“autofac”

> ID：11993010
> 
> 赞同：1
> 
> 时间：2012-08-16T18:08:34.833
> 
> 标签：c#, continuous-integration, autofac

我们使用单元测试来测试`Autofac`用于注入所有依赖项和实例化对象的组件。我们使用配置文件中的 auto 部分进行配置。在命令行内和通过命令行`MSTest`运行得非常好。`Visual Studio`

但是，在我们将单元测试通过`MSTestRunner`插件运行`Jenkins`以继续构建目的之后，以下异常是通过了：

> “System.ArgumentException：无法读取配置部分'autofac'。在 Autofac.Configuration.ConfigurationSettingsReader..ctor(String sectionName)”

这是之前[提出的类似问题](http://code.google.com/p/autofac/issues/detail?id=247)，并已得到修复。

`autofac`我们使用的版本是`2.6.3.862`.

谢谢

# ruby-on-rails-3 - 在 Rails 3 中复制记录

> ID：11993012
> 
> 赞同：10
> 
> 时间：2012-08-16T18:08:52.403
> 
> 标签：ruby-on-rails-3, activerecord, model, clone, duplicate-data

我的 Rails 3 应用程序中有一个处方模型。我正在尝试找出允许复制记录的最佳方法，但允许用户在保存之前“查看”副本。

我已经阅读了一些关于 SO（例如[这个](https://stackoverflow.com/questions/2070250/clone-a-k-a-duplicate-a-record)）的问题/答案，它们解释了如何复制/克隆记录然后保存它 - 但没有一个解释如何在保存之前显示表单。

读取 Rails API 似乎可以使用[克隆](http://edgeapi.rubyonrails.org/classes/ActiveResource/Base.html#method-i-clone)方法。

阅读[其他问题](https://stackoverflow.com/questions/60033/what-is-the-easiest-way-to-duplicate-an-activerecord-record?lq=1)和答案表明这是可以做到的，但除了以下示例代码之外没有示例代码：

```
new_record = old_record.dup 
```

我目前正在使用的控制器代码如下（模型没有任何关系）：

```
 # POST /prescriptions
  # POST /prescriptions.json
  def create
    @prescription = Prescription.new(params[:prescription])
    @prescription.localip = request.env['REMOTE_ADDR']
    @prescription.employee = @prescription.employee.upcase

    respond_to do |format|
      if @prescription.save
        format.html { redirect_to @prescription, notice: 'Prescription was successfully created.' }
        format.json { render json: @prescription, status: :created, location: @prescription }
      else
        format.html { render action: "new" }
        format.json { render json: @prescription.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我将从视图链接到此克隆操作：

```
<%= link_to "Create another like this?", clone_prescription_url(@prescription), :method => :put %> 
```

像这样向我的控制器添加一个动作就这么简单吗？

```
def clone
 @prescription = Prescription.find(params[:id])
 @prescription.dup
 @prescription.save
end 
```

抱歉，如果上面的代码完全错误，我正在努力解决它！我已经看到[有人](https://stackoverflow.com/questions/8555488/rails-duplicate-record-not-rendering-new?rq=1)完全按照我想要通过克隆实现的目标 - 但不是在保存前进行编辑。

正在复制的用户在保存后将无权编辑记录。它纯粹用于初始数据输入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T07:55:50.093

为此，您将不得不创建 Prescription 类的新实例。“dup”有效，但您假设它会覆盖现有记录。只有以 bang(!) 结尾的方法才会这样做。

您的代码应该是：

```
def clone
 @prescription = Prescription.find(params[:id])
 @new_prescription = @prescription.dup
 @new_prescription.save
end 
```

或者

```
def clone
 @prescription = Prescription.find(params[:id]).dup
 @prescription.save
end 
```

这不是测试 :id 未找到的时间。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-17T07:57:20.227

如果您希望克隆操作允许用户在保存（AKA 创建）之前查看副本，那么它几乎就像“新”操作，除了已经填写了字段。

因此，您的克隆方法可能是对新方法的修改：

```
def new
  @prescription = Prescription.new()
end
def clone
  @prescription = Prescription.find(params[:id]) # find original object
  @prescription = Prescription.new(@prescription.attributes) # initialize duplicate (not saved)
  render :new # render same view as "new", but with @prescription attributes already filled in
end 
```

然后，他们可以在视图中创建对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T13:14:22.300

我正在寻找克隆现有记录的逻辑。我不得不稍微修改 ronalchn 发布的逻辑，因为当它尝试执行克隆的第二条语句时，我收到了一个批量分配错误，因为它试图复制我的 attr_accessible 列表中不包含的 id、created_at、updated_at。这就是我修改逻辑以使其使用我的模型在我的应用程序中工作的方式：

```
@old_event = Event.find(params[:id]) # find original object
@event = Event.new
@event.field_1 = @old_event.field_1 (statement for each field in attar_accessible)
render :new # render same view as "new", but with @prescription attributes already filled in 
```

# javascript - 升级到 jQuery 1.8 后的 Highcharts 缩放问题

> ID：11993014
> 
> 赞同：4
> 
> 时间：2012-08-16T18:09:04.560
> 
> 标签：javascript, jquery, highcharts

我使用 Highcharts 2.2.5 绘制了一些面积图和条形图。

我刚刚将我的应用程序升级到 jQuery 1.8 并开始测试我的所有图表。一切看起来都不错，但是当我放大面积图时，我收到大量（字面意思是数百）JavaScript 错误，说“ `Error: Problem parsing d=0.99030204037363`”（数字有时会发生变化`d=1`），并且在屏幕上我看到的只是图表所在的一堆点。重置缩放也不起作用（产生更多错误，没有结果）。此时唯一的办法是重新加载页面。

我尝试在网上寻找 HC 2.2.5 和 jQuery 1.8 之间的任何冲突，但找不到任何东西。切换回 jQuery 1.7.2 解决了这个问题，但仍然必须向前看……

任何帮助表示赞赏，盖伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:05:43.790

在github上报告错误后，根据@MrObrian的建议，我得到了这样的回复：

> 它已经在下一个版本中修复 - 请参阅 [http://jsfiddle.net/highcharts/GJ4wR/](http://jsfiddle.net/highcharts/GJ4wR/)。我们现在正在对该代码进行最终测试，希望在下周之前完成。

所以我所要做的就是等待 1 周 :)

# css - IE9 总是在我的 DEV 服务器上恢复到 IE7 标准，而不是在 PROD 中

> ID：11993015
> 
> 赞同：4
> 
> 时间：2012-08-16T18:09:04.617
> 
> 标签：css, html, internet-explorer, quirks-mode

我有一个 HTML5 站点，当在我的 DEV 服务器上以 IE9 查看时，它始终默认为 IE7 标准并且看起来很糟糕。使用开发人员工具，我可以手动将文档模式切换到 IE9 标准（页面默认），然后页面看起来不错。但是，PROD 中的同一页面显示它默认为 IE9 标准。

IE浏览器显示“兼容性图标”时，是否意味着存在CSS或HTML问题？因为该图标仅显示在网站的 PROD 版本上。

我会添加标签 x-ua-compatible 标签，但它一定不是最佳实践，因为它没有被 W3C 验证。添加标签是修复的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:14:54.513

兼容模式设置上有一个复选框，上面写着“使用 Intranet 站点的兼容模式”。尝试在客户端的 IE 上将其设置为关闭。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T17:11:03.023

如果我们在 DEV 环境中，我们最终添加了一个动态检查来设置元标记，并且不理会 PROD 框，它似乎工作正常。感谢 Lucero 和 pst 的帮助。

# jquery - 我想使用 JQuery 制作一个自动滑动图片库

> ID：11993016
> 
> 赞同：-5
> 
> 时间：2012-08-16T18:09:08.453
> 
> 标签：jquery, jquery-plugins

我想使用JQuery插件[http://slidesjs.com/](http://slidesjs.com/)制作一个自动滑动图片库，但我不知道如何操作slide.js文件使其定时，有没有人有使用这个插件的经验，我我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:12:33.720

以下是如何自定义动画持续时间（以毫秒为单位）：

```
$("#slides").slides({
    fadeSpeed: 350
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:11:00.673

```
 $("#slides").slides({
    play: 5000
  }); 
```

将每 5 秒更换一次幻灯片。您无需更改核心插件，只需查看网站上的选项/文档即可。

# mysql - VARCHAR 不接受带有非数字字符的字符串

> ID：11993017
> 
> 赞同：0
> 
> 时间：2012-08-16T18:09:16.107
> 
> 标签：mysql, sql, facebook, varchar, facebook-access-token

我正在尝试将 Facebook 访问令牌存储在我的 MySQL 数据库中。我已将该字段设置为采用长度为 255 的 VARCHAR，它可以接受数字字符串，但如果字符串包含任何非数字字符，则它会失败。有谁知道为什么会发生这种情况？我似乎无法在任何地方找到任何其他发生这种情况的案例。我唯一能想到的可能与此设置“latin1_swedish_ci”有关。

我用来输入数据的函数如下：

```
// Insert the extended access token into the database
function setUserAccessToken($_uid, $_accTok){
        $sql = "UPDATE `user_core` SET `acc_tok`=$_accTok WHERE `id` = $_uid";

        $_result = mysql_query($sql);
        if($_result){
            echo ("Successful!");   
        }
        else
        {
            echo ("Failed!");
        }
} 
```

先谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:12:02.373

您缺少引号：

```
$sql = "UPDATE `user_core` SET `acc_tok`='$_accTok' WHERE `id` = $_uid"; 
```

# c# - 可以从@Page 访问会话变量，但不能从基础类访问

> ID：11993018
> 
> 赞同：0
> 
> 时间：2012-08-16T18:09:15.937
> 
> 标签：c#, asp.net, session, variables, session-variables

当用户登录时，我的代码使用`System.Web.HttpContext.Current.Session["customer_ref"]`,设置一个 Session 变量`HandleUserLogin()`。

我在下面的课程中这样做，`SessionManager`：

**会话管理器.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

/// <summary>
/// Summary description for Session
/// </summary>
public class SessionManager
{
    public string customer_ref;
    public bool logged_in = false;

    public SessionManager()
    {

        //
        // NULL REFERENCE EXCEPTION CAUSED HERE
        //
        //
        // Check to see if the user is logged in (is a customer reference set?)
        if (System.Web.HttpContext.Current.Session["customer_ref"] != null)
        {

            // The user is logged in
            logged_in = true;
        }

    }

    public bool HandleUserLogin(string username, string password)
    {
        if ((!string.IsNullOrEmpty(username)) && (!string.IsNullOrEmpty(password)))
        {
            // Check that the username and password are valid
            if ((!string.IsNullOrEmpty(username)) && (password == "password"))
            {
                // Generate a new session ID
                // TODO: Find out how to.

                // Set the session variables
                System.Web.HttpContext.Current.Session["customer_ref"] = username;

                // Set the variables of this Session object for future use
                this.customer_ref = username;

                // Set the logged in status to true
                this.logged_in = true;

                return true;
            }
            else
            {
                // Username and password are incorrect
                return false;
            }
        }

        // The username or password was not entered
        return false;
    }

    public void HandleUserLogout()
    {
        System.Web.HttpContext.Current.Session["customer_ref"] = null;

        // Unset the variables in the SessionManager object
         this.customer_ref = string.Empty;

         // Set the logged in status to false
         this.logged_in = false;
    }
} 
```

一旦设置了这个 Session 变量，我很高兴能够使用以下代码在页面上显示它，并且我设置它的值看起来很好。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" EnableSessionState="True" %>

<!DOCTYPE html>

<html>

<head>
</head>
<body>
            <%
                // 
                // WRITE THE CUSTOMER REFERENCE FROM THE SESSION
                //
                Response.Write(System.Web.HttpContext.Current.Session["customer_ref"]);
             %>

</body>
</html> 
```

但是，我无法从另一个称为的页面访问它，因为当我调用我的类时`dashboard.aspx`它会抛出一个尝试在构造时访问 Session 变量。`NullReferenceException``SessionManager()`

`dashboard.aspx`这是,的代码`dashboard.aspx.cs`：

**仪表板.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="dashboard.aspx.cs" Inherits="dashboard" MasterPageFile="~/Design.master" EnableSessionState="True" %>

<asp:Content ID="customer" ContentPlaceHolderID="CustomerInfo" runat="server">              
    <div class="customer_name"><% Response.Write(customer.customer_name); %></div>
    <div class="customer_account_number">Account number: <% Response.Write(customer.customer_ref); %></div>
</asp:Content>

<asp:Content ID="outstanding_orders" ContentPlaceHolderID="Content" runat="server">

    <div class="content_left_title_wrapper">
        <h2 class="content_left_title">Your Outstanding Orders</h2>
    </div>

    <table id="outstanding_orders" cellpadding="0" cellspacing="0">
    <colgroup span="4"></colgroup>
    <colgroup span="1" class="view_link_col"></colgroup>
        <tr>
            <th><div>Order Number</div></th>
            <th><div>Date Placed</div></th>
            <th><div>Total Cost</div></th>
            <th><div>Order Status</div></th>
            <th></th>
        </tr>

        <% 
            // Loop through all of the outstanding orders for the customer
            foreach (OrderSummary order_item in outstanding_orders)
            {
        %>

        <tr>
            <td><div><% Response.Write(order_item.order_number); %></div></td>
            <td><div><% Response.Write(order_item.uk_order_date); %></div></td>
            <td><div>£<% Response.Write(order_item.order_total); %></div></td>
            <td><div>Incomplete</div></td>
            <td><div><a href="orderlines.aspx?orderno=<% Response.Write(order_item.order_number); %>" class="order_detail_link">Detail<br /><img src="images/design/view_order_arrow.png" /></a></div></td>
        </tr>   

        <%
            }
        %>                  

    </table>

</asp:Content> 
```

**仪表板.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using IBMU2.UODOTNET;
using System.Xml.Linq;

public partial class dashboard : System.Web.UI.Page
{
    // Get the users session
    SessionManager session = new SessionManager();

    // Create a new connection to the database
    ReflexDatabase db_con = new ReflexDatabase();

    // Blank list to hold the orders
    public List<OrderSummary> outstanding_orders = new List<OrderSummary>();

    public XDocument test { get; set; }

    public Customer customer;

    // OnInit is called before the page loads (See internet for ASP.NET Page Lifecycle)
    protected override void OnInit(EventArgs e)
    {

        if (session.logged_in == false)
        {

            // I've tried it here, and it won't redirect
            Response.Redirect("default.aspx");
        }

    }

    protected void Page_Load(object sender, EventArgs e)
    {

            try
            {

                // Create the customer as a Customer object
                customer = new Customer(session.customer_ref);

                // Query the TOELINE database
                XDocument customer_orders = db_con.Query(String.Format("LIST TOEHEAD BY.DSND ORDERNO WITH CUSREF = \"{0}\" AND ORDERSTATUS < 50 ORDERNO DATEONFILE T.VAL.TO.INV ORDERSTATUS TOXML ELEMENTS", customer.customer_ref));

                test = customer_orders;

                // Use LINQ to pipe the data in to OrderSummary objects
                var linqQuery = from n in customer_orders.Element("ROOT").Descendants("TOEHEAD")
                                select new OrderSummary
                                {
                                    //order_number = n.Element("ORDERNO").Nodes()..ToString(),
                                    order_number = n.Descendants("ORDERNO").First().Value,
                                    us_order_date = n.Descendants("DATEONFILE").First().Value,
                                    order_total = n.Descendants("T.VAL.TO.INV").First().Value
                                };

                // Add all of the items to the list of orders outstanding for the customer
                foreach (OrderSummary linqItem in linqQuery)
                {
                    outstanding_orders.Add(linqItem);
                }

            }
            finally
            {
                // Close the session to prevent hogging of sessions
                db_con.CloseSession();
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:38:04.227

您已将`SessionManager`. `Page`这意味着初始化程序将在 Page 处理程序运行 Page 构造函数之前运行（我认为）。

这发生在`Session`被添加到 HttpContext 对象之前。

尝试更改此行：

```
SessionManager session = new SessionManager(); 
```

至

```
SessionManager session = null; 
```

然后在（例如） OnInit 方法中新建它（另外，不要忘记调用`base.OnInit()`）：

```
protected override void OnInit(EventArgs e)   
{   
    session = new SessionManager();
    if (session.logged_in == false)   
    {   
        Response.Redirect("default.aspx");   
    }   
    base.OnInit(e);
} 
```

如果这将成为您的身份验证方案，您可能不想创建其他页面可以从中派生的自定义 BasePage 类型。这样，您不必将相同的代码复制到需要用户登录的所有页面。

或者（正如我已经在对您的上一个问题的回答中写的那样）您可以继续使用[自定义 MembershipProvider](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29)实现身份验证，并让框架处理所有管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:38:13.797

创建仪表板（页面）对象后，会立即创建 SessionManager 的实例。您可以将其更改为：

```
// Get the users session
    SessionManager session = null;

...

protected override void OnInit(EventArgs e)
    {
        session = new SessionManager();

..
} 
```

或者您可以采用此逻辑，并将其放在自己的方法中，而不是构造函数中

```
 public bool IsLoggedIn()
    {
    if (System.Web.HttpContext.Current.Session["customer_ref"] != null)
    {

        // The user is logged in
        logged_in = true;
    }
    } 
```

有几个选项，但问题是因为 SessionManager 类的构造函数正在调用 Session，但它尚未创建。

# c# - WMI (ManagementObjectSearcher) 查询是否需要提升信任？

> ID：11993019
> 
> 赞同：1
> 
> 时间：2012-08-16T18:09:24.427
> 
> 标签：c#, permissions, windows-services, wmi

所以我需要找到我配置的 DNS 服务器。

我使用[`ManagementObjectSearcher`](http://msdn.microsoft.com/en-us/library/system.management.managementobjectsearcher.aspx)on进行 WMI 查找[`Win32_NetworkAdapterConfiguration`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394217%28v=vs.85%29.aspx)。

这在开发中运行良好。`NETWORK SERVICE`在特权较低的帐户（例如）下作为服务运行时它仍然可以工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:57:49.047

安全性和 WMI 受到相当的限制，我相信您指的是`ImpersonationLevel`&`AuthenticationLevel`设置。远程 WMI 更加棘手，但请看一下：

模拟级别： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa393852 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393852(v=vs.85).aspx)

身份验证级别： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa393851 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393851(v=vs.85).aspx)

以下内容可用于提升 WMI 的提升权限（在 VBS 和 CMD 中）并检索 DNS 设置，因此我假设您可以在其他语言中执行相同操作：

**VBS**

```
Set oWMI = GetObject("winmgmts:{impersonationLevel=impersonate,authenticationLevel=pktPrivacy}!\\.\root\cimv2")
Set oQRY.ExecQuery("select DcSiteName,DnsForestName,DomainName from Win32_NTDomain")` 
```

**命令**

```
wmic /implevel:Impersonate /authlevel:Pktprivacy /namespace:\\root\cimv2 path win32_ntdomain get /all /format:list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:24:02.133

从[“MSDN 标题为访问 WMI 命名空间”部分](http://msdn.microsoft.com/en-us/library/windows/desktop/aa822575%28v=vs.85%29.aspx)：

> Authenticated Users、LOCAL SERVICE 和 NETWORK SERVICE 的默认访问权限为：
> 
> *   执行方法
> *   完全写入
> *   启用帐户

请注意，[如果您的进程未在提升的安全性下运行，您可能无法访问某些功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa826699%28v=vs.85%29.aspx)。

另请注意，[某些操作也需要提升权限](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390428%28v=vs.85%29.aspx)（特别是在处理安全描述符时）。

# python - 使用 GAE/Django 在 Test Shop 上安装自定义应用程序

> ID：11993021
> 
> 赞同：1
> 
> 时间：2012-08-16T18:09:29.793
> 
> 标签：python, django, google-app-engine, shopify

我在使用 django 和应用程序引擎在我的测试商店安装自定义应用程序时遇到了一些麻烦。我在 github 上为应用程序引擎项目 (https://github.com/shopify/shopify_django_app) 下载了适当的 zip 文件。

我使用回调 url 在合作伙伴管理员上创建了应用程序

```
http://localhost:8000/login/finalize 
```

SHOPIFY_API_KEY = '6a17608.......'

SHOPIFY_API_SECRET = '1fddc.......'

现在我加载它并受到登录页面的欢迎。

现在发生了两件事之一。

我输入[https://crooks-and-sons5046.myshopify.com](https://crooks-and-sons5046.myshopify.com)（测试店），它会将我发送到我所做的合作伙伴登录表单并登录。然后它只是将我重定向到我的商店管理页面，它不会像我在在线演示示例中看到的那样显示安装框架。

或者我输入 crooks-and-sons5046 并从服务器返回 500 错误，显示异常值：
无法连接“str”和“NoneType”对象异常位置：/Users/timwhitaker/gae/mfshopify/shopify/session。 __computed_pa​​ssword 中的 py
，第 87 行

这是相关行

```
return md5(self.secret + self.token).hexdigest() 
```

我的 api 密钥和密钥都输入到 shopify_settings.py 中，所以这让我相信没有为会话创建令牌。

此处的在线演示[https://shopify-django-example.appspot.com/](https://shopify-django-example.appspot.com/)非常适合我，而且我没有弄乱包含的 zip 中的任何文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:29:41.023

您的 Shopify 应用程序是否配置为使用旧版或 OAuth 身份验证？我认为应用引擎的示例应用 zip 文件已经很老了，所以可能只适用于旧版身份验证。

但是，shopify_django_app 项目的主分支已更新为支持 Shopify 的 OAuth。这与更新版本的 shopify_python_api 一起需要更新以使用 OAuth 身份验证。

# java - java.util.NoSuchElementException 即使输入文件有数据

> ID：11993022
> 
> 赞同：0
> 
> 时间：2012-08-16T18:09:32.993
> 
> 标签：java

我编写了这段代码来找出输出，我正在使用运行时在 servlet 中运行它。即使我检查了输入文件有一些数据，它也会显示 java.util.NoSuchElementEception：

```
public class Sec1q10 {

static int fact(int n) {
    int p = 1;
    if (n != 1) {
        p = n * fact(n - 1);
    }
    return p;
}

public static void main(String args[]) {
    try {
        System.out.println("first");
        Scanner in = new Scanner(new FileReader("F:/sem5/algorithm/in.txt"));
        String no = in.next();
        int n = Integer.parseInt(no);
        System.out.println(n);
        int s = 0;
        while (n != 0) {
            s += fact(n);
            n--;
        }
        System.out.println("sum=" + s);
        String s1 = "" + s + "here";

        PrintWriter out;
        System.out.println(s1);
        out = new PrintWriter("F:/sem5/algorithm/out.txt");

        out.write(s1);
        System.out.println(s1);

    } catch (Exception ex) {
        System.out.println("Exception: " + ex);
    }

}
} 
```

我什至在 cmd 上运行它，它毫无例外地显示输出，但没有在文件 F:/sem5/algorithm/out.txt 中写入任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:09:46.617

我能想到的只是目录不存在。你确定有吗？如果没有，您应该手动制作，或使用该`.mkdir()`功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:51:43.743

`PrintWriter`写入后在输出文件中查看结果

```
 PrintWriter out;
    System.out.println(s1);
    out = new PrintWriter("F:/sem5/algorithm/out.txt");
    try
    {
       out.write(s1);
       System.out.println(s1);
    }
    finally
    {
       out.close();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:13:28.820

每当您使用`Scanner`该类时，您应该实际测试以确保输入正在等待您，然后再尝试使用这些`hasNextXXXXX()`方法读取它。

尝试这个：

```
String no; 

while(in.hasNext())
{
    no = in.next();

    //.....
} 
```

问题不在于您的输入文件没有任何数据，而在于您的输入文件用完了数据，因为您不断地阅读。如果你在什么都没有的时候尝试阅读，你会得到一个`NoSuchElementException`

# javascript - Firefox 中的 AJAX 回调失败

> ID：11993040
> 
> 赞同：0
> 
> 时间：2012-08-16T18:11:14.443
> 
> 标签：javascript, jquery, asp.net-ajax

该页面包含手风琴控件，可在点击时展开和收缩。当它展开时，它应该显示数据库中的记录。当我第一次打开页面时它工作正常。但它在刷新时失败。这在 IE 中运行良好，仅 Firefox 存在问题。在刷新它在 Firefox 中失败。我尝试在页面加载时给“hPanelLoaded”一个值“FALSE”。仍然无法正常工作。似乎刷新 FF 无法获得“hPanelLoaded”的值，它说“$("hPanelLoaded") 为空”。

这是页面结构。MainPage.aspx 正在调用 Control > hPanelLoaded.ascx 正在调用 > hPanelLoaded.js。

知道我在做什么错误。

这是代码

@@@@@@@@@@ 这是在 hPanelLoaded.ascx 中。@@@@@@@@@@@@

```
<input type="hidden" id="hPanelLoaded" /> 
```

@@@@@@@@@@ 这是在 hPanelLoaded.js 中。@@@@@@@@@@@@

```
function loadPanel1() {
    try {
        if ($('hPanelLoaded').value != 'TRUE') {
            grdarts.callback();
            $('hPanelLoaded').value = 'TRUE'
        }
     // else {
              //  alert('INSIDE ELSE');
              //  $('hPanelLoaded').value = 'FALSE';
           // }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:15:10.360

你的选择器应该是

```
$('#hPanelLoaded') 
```

因为您是按 id 选择的（注意添加`#`）

# objective-c - 无法将 NSDictionary Deserialized 从 .Net Web 服务返回的 Json 保存到 Plist

> ID：11993041
> 
> 赞同：0
> 
> 时间：2012-08-16T18:11:16.233
> 
> 标签：objective-c, json, plist

我有一个 .net 网络服务，它以这种格式返回 Json 数据：

```
 NSDictionary *json = [NSJSONSerialization JSONObjectWithData:dataPlist options:NSJSONReadingMutableContainers error:&errorJson];

[
{
    "MEMBERID": "xxx",
    "PREFIXINFORMAL": "Mr.",
    "FIRSTNAME": "xxx",
    "MIDDLENAME": "xxxx",
    "LASTNAME": "xxxx",
    "SUFFIX": xxxx
} 
```

]

我将此 NSDictionary 保存到 plist 的代码：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *path = [documentsDirectory stringByAppendingPathComponent:@"boardMemberInfo.plist"];
        NSDictionary *test = [NSDictionary dictionaryWithObject:@"test" forKey:@"test"];
        for(NSDictionary *item in json) {
            BOOL success = [item writeToFile:path atomically:YES];
            if(success) {
                NSLog(@"Success Saving New plist");
            } else {
                NSLog(@"Failure Saving New plist");
            }
        } 
```

[item writeToFile...] 和 [json writeToFile...] 都不起作用。但是，简单的 [test writeToFile...] 有效。我错过了什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:32:38.967

您可以做的最好的事情是分解您的保存过程并使用 NSError 来了解问题所在：

```
 for(NSDictionary *item in json) {
        NSError *error;
        NSData *serializedData = [NSPropertyListSerialization dataWithPropertyList:item format:… options:… error:&error];
        if (!serializedData) { NSLog(@"Can't serialize data: %@", error); continue; }
        if (![serializedData writeToFile:path options:… error:&error]) {
            NSLog(@"Can't write to %@: %@", path, error);
        } else {
            NSLog(@"Success Saving New plist");
        }
    } 
```

# javascript - 如何在javascript中检查数组的元素是否相同（超过2个元素）

> ID：11993042
> 
> 赞同：0
> 
> 时间：2012-08-16T18:11:27.783
> 
> 标签：javascript, arrays, compare

我试图确保电话号码不是所有相同的字符，例如 1111111111 我使用的代码有效，但必须有更简洁的方式。我试过循环，但一次只比较两个连续的字符。这就是我现在使用的：

```
if (MainPhone.value != "")
            {               
                if ((MainPhone.value == 1111111111) || (MainPhone.value == 2222222222) || (MainPhone.value == 3333333333) || (MainPhone.value == 4444444444) || (MainPhone.value == 5555555555) || (MainPhone.value == 6666666666) || (MainPhone.value == 7777777777) || (MainPhone.value == 8888888888) || (MainPhone.value == 9999999999) || (MainPhone.value == 0000000000))
                {
                window.alert("Phone Number is Invalid");
                MainPhone.focus();
                return false;
                }
            } 
```

我为其他人的问题找到了此建议，但无法使其发挥作用。

```
var dup = MainPhone.value.split('');
if all(dup == dup(1)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:21:20.857

我会尝试这样的事情：

```
var phone = '11111211';
var digits = phone.split('').sort();
var test = digits[0] == digits[digits.length - 1]; 
```

只需对数组进行排序并比较第一个和最后一个元素..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:31:35.117

您可以使用这样的正则表达式来检查所有字符是否相同：

```
^(.)\1*$ 
```

例子：

```
var phone = '11111111';

if (/^(.)\1*$/.test(phone)) {
  alert('All the same.');
} 
```

演示：http: [//jsfiddle.net/Guffa/3V5en/](http://jsfiddle.net/Guffa/3V5en/)

* * *

正则表达式的解释：

```
^   = matches start of the string
(.) = captures one character
\1  = matches the first capture
*   = zero or more times
$   = matches end of the string 
```

因此，它捕获第一个字符，并匹配其余字符（如果它们相同）。

# cordova - Cordova/PhoneGap 照片文件大小

> ID：11993043
> 
> 赞同：11
> 
> 时间：2012-08-16T18:11:37.280
> 
> 标签：cordova

全部，

我正在尝试使用PhoneGap/Cordova 2获取照片的文件大小（即不是尺寸，而是磁盘中的实际文件大小）。到目前为止，我能弄清楚的唯一方法是通过base64转换，然后是基本的b64 字符串字节的算术运算。但是，我想知道是否有更优雅的方法来获取文件大小。TIA。

澄清：它必须在 iOS 5 和 Android 2.3 上运行。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-17T03:16:29.603

是的，如果你有来自 Camera.getPicture 命令的图像的 URL，你可以将它传递给 window.resolveLocalFileSystemURL 命令，该命令的成功回调是用 FileEntry 对象调用的。然后调用 FileEntry 的“file”方法，该方法使用 File 对象调用成功回调，然后您可以查看 File 对象的 size 属性。

就像是....

```
function takePhoto() {
    navigator.camera.getPicture(gotPhoto, onError, { quality: 50,
        destinationType: navigator.camera.DestinationType.FILE_URI,
        sourceType: navigator.camera.PictureSourceType.CAMERA });
}

function gotPhoto(imageUri) {
    window.resolveLocalFileSystemURI(imageUri, function(fileEntry) {
        fileEntry.file(function(fileObj) {
            console.log("Size = " + fileObj.size);
        });
    });
} 
```

这应该可以，但我只是在脑海中写下了代码。

# php - 为什么这个 php 脚本在 Firefox 中可以正常工作，但在 Safari 或 Opera 中却不行？

> ID：11993046
> 
> 赞同：1
> 
> 时间：2012-08-16T18:11:49.323
> 
> 标签：php, firefox, safari, opera

我有一个脚本，可以将分类广告的表单数据邮寄给我。昨天我下班时，它工作得很好。现在它只在 FireFox 中工作，我在 Opera 和 Safari 中都收到了我的“else”声明“我们在发送您的邮件时遇到错误，请通知 XXXX@XX.COM”，这对我来说毫无意义。

是什么导致了这个错误，为什么它在某些浏览器中失败但在其他浏览器中工作？

```
 <script language="javascript">
function submitt()
{
setTimeout('document.paypal.submit()',1000);
}
</script>

<?php 
 $to = "XXX@XXX.com" ; 
 $from = $_REQUEST['email'] ; 
 $name = $_REQUEST['Name'] ; 
 $headers = "From: $from"; 
 $subject = "Classified Tests"; 

 $fields = array(); 
 $fields{"Name"} = "Name";  
 $fields{"email"} = "Email"; 
 $fields{"Phone"} = "Phone"; 
 $fields{"Address"} = "Street Address";
 $fields{"City"} = "City";  
 $fields{"State"} = "State"; 
 $fields{"Zip"} = "Zip Code"; 
 $fields{"Classification"} = "Classification"; 
 $fields{"Ad-Headline"} = "Headline"; 
 $fields{"Ad-Content"} = "Ad Content"; 
 $fields{"Words"} = "Word Count"; 
 $fields{"Weeks"} = "Weeks to Run"; 
 $fields{"WordCount"} = "Total Words"; 
 $fields{"Rate"} = "Word Rate"; 
 $fields{"GrossAmountDue"} = "Gross Amount"; 
 $fields{"NonProfit"} = "Non Profit Ad?"; 

$item_name   = $_POST['item_name'];
$amount   = $_POST['amount'] ; 
$currency_code  = $_POST['currency_code'];
$no_shipping = $_POST['item_number'];
$shipping = $_POST['item_number'];
$cmd   = $_POST['cmd'];
$bn  = $_POST['bn'];
$no_note = $_POST['item_number'];
$lc   = $_POST['lc'];
$business   = $_POST['business'];

 $body = "This Ad has been submitted:\n\n"; foreach($fields as $a => $b){   $body .= sprintf("%20s: %s\n",$b,$_REQUEST[$a]); } 

 if($from == '') {print "You have not entered an email, please go back and try again";} 
 else { 
 if($name == '') {print "You have not entered a name, please go back and try again";} 
 else { 
 $send = mail($to, $subject, $body, $headers); 
 if($send) 
 {print "Your Ad has been submitted, redirecting to paypal."; echo "<SCRIPT LANGUAGE='javascript'>submitt();</SCRIPT>";} 
 else 
 {print "We encountered an error sending your mail, please notify XXX@XXX.com"; } 
 }
}

 ?> 

<form action="https://www.paypal.com/cgi-bin/webscr" id="paypal" target="_self" name="paypal" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="XXXXXXXXXXXX">
<input type="hidden" name="lc" value="US">
<input type="hidden" name="item_name" value="Classified Ad">
<input type="hidden" name="amount" id="Amount" value="">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="button_subtype" value="services">
<input type="hidden" name="no_note" value="0">
<input type="hidden" name="cn" value="Add special instructions to the seller:">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="shipping" value="0.00">
<input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHosted">
</form> 
```

是什么导致了这个错误，为什么它在某些浏览器中失败但在其他浏览器中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:07:54.170

如果您从您自己的电子邮件地址发送它并带有`PHP_EOL`.

```
mail("XXX@XXX.com", "subject", "body", "From: Me" . PHP_EOL); // 'From' can be anything 
```

见[PHP: `mail`- 手册](http://php.net/manual/en/function.mail.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:24:00.430

首先尝试评论中的建议，然后尝试使用以下 JavaScript 代码：

```
<script type="text/javascript">
function submit()
{
setTimeout(function(){document.paypal.submit();},1000);
}
</script> 
```

我将提交代码包装在匿名函数中，而不是字符串中，这里鼓励这样做：[Efficient JavaScript - Dev.Opera](http://dev.opera.com/articles/view/efficient-javascript/?page=2#timeouts)。

此外，不推荐使用 using `<script language=`，**您**应该`type`改用 ( `text/javascript`)。请参阅[`script`-MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/Script)。

# perl - 字符串列表中的随机字符串

> ID：11993047
> 
> 赞同：1
> 
> 时间：2012-08-16T18:11:53.147
> 
> 标签：perl, awk

我有一个字符串列表，我想从该列表中随机选取字符串。你能帮我用perl或awk吗？

字符串列表：

```
John
Peter
Adam
Mike
Charlie
Sanders
William
... 
```

输出：

```
Peter
Mike
Sanders
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:42:36.387

我假设您在文件中有这些名称。

```
use File::Slurp qw(read_file);
use List::Util qw(shuffle);
print for (shuffle read_file 'the_input_file_name' )[0..499]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:43:13.437

该[`List::Util`](https://metacpan.org/module/List%3a%3aUtil)模块提供了一个`shuffle`运算符。它也是一个核心模块，因此不需要安装

```
use strict;
use warnings;

use List::Util 'shuffle';

open my $fh, '<', 'string_list.txt' or die $!;
my @names = <$fh>;

print for (shuffle @names)[0..499]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:34:23.053

用你的单词创建一个文件，每行一个新单词。然后运行此脚本以从列表中选择一个选定的单词数（下面的示例显示 5）。

```
#!/usr/bin/perl -l

sub random_words {
$random_items = $_[0];

open(DB, 'random-words.db');
@words = <DB>;
close DB;

    for ($i=0; $i < $random_items; $i++) {
        $random_index = int(rand(@words));
        $random_word = $words[$random_index];
        $random_word =~ s/\R//g;
        print $random_word;
    }
}

random_words(5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:53:31.717

```
print splice(@a,rand(@a),1),"\n" while @a; 
```

其中@a 我们的列表 ge 我的@a = qw/ 约翰彼得亚当迈克查理桑德斯威廉/；

# javascript - 在 ASP.NET c# 中重定向到另一个页面之前显示 ClientScript 警报？

> ID：11993048
> 
> 赞同：4
> 
> 时间：2012-08-16T18:11:56.033
> 
> 标签：javascript, asp.net, alert, response.redirect, clientscript

我要在这里解决一个问题...

我正在开发一个系统，我不断向用户显示消息，例如......我正在添加一个新客户端，我输入所有数据并按保存，在 C# 上我所做的是完成所有保存过程，然后我用...

```
ClientScript.RegisterStartupScript(this.GetType(), "Mensaje", "alert('Client Saved Successfully');", true); 
```

就是这样......最终会显示消息，因为我住在同一个站点（因为如果我想添加另一个客户，我必须留在 sme 站点，而不是让我回到我的主屏幕）或至少我不是在告诉系统进行重定向...

然而，这是另一个例子......

如果我要编辑客户端，我将被重定向到编辑屏幕，输入所有更改并单击 SAVe，在 C# 上我执行所有过程以保存更改，然后我使用上面的客户端脚本，并且然后 ...

```
this.Response.Redirect("~/Main.aspx"); 
```

但是，我注意到如果我使用 Response.Redirect 我将不再在同一页面中，警报将不会显示给用户......

这是我经常遇到的问题，我想知道有什么办法可以解决这个问题……

谢谢你，我希望你能帮助我

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T18:21:50.043

这就是我的项目：

```
public static void jsAlertAndRedirect(System.Web.UI.Page instance, string Message, string url)
{
    instance.Response.Write(@"<script language='javascript'>alert('" + Message + "');document.location.href='" + url + "'; </script>");
} 
```

我从页面中这样使用它：

```
HTMLHelper.jsAlertAndRedirect(this, "This is an alert.", ResolveUrl("~/Default.aspx")); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:18:07.233

```
 string  strScript = "<script>"+"alert('The User has been added successfully.');";
                strScript += "window.location='AdminPanel.aspx';";
                strScript += "</script>";
        Page.ClientScript.RegisterStartupScript(this.GetType(), "Startup", strScript); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T14:08:29.220

```
 string strScript = "&lt;script &gt;alert('The User has been added successfully.');                 window.location='AdminPanel.aspx';&lt; /script &gt;";
 Page.ClientScript.RegisterStartupScript(this.GetType(), "Startup",strScript); 
```

# javascript - 使用媒体查询在背景图像上设置不透明度

> ID：11993057
> 
> 赞同：0
> 
> 时间：2012-08-16T18:12:37.200
> 
> 标签：javascript, css

我有几个 div，每个都有一个背景图像。我正在使用响应式和自适应 CSS，当我的 div 宽度**小于**某个大小（760 像素 btw）时，文本和一些带有样式的表格变得难以阅读/看到，背景图像在它们后面移动（背景图像位于文本/表格的最右侧，如果宽度**超过**760 像素，则不显眼......）。因此，当视口的宽度达到 760px 或更少时，我只希望背景图像具有不透明度......

我怎么做？

所以我的 CSS 是这样开始的：

```
@media screen and (max-width: 760px){
   background: #cdcdcd url("/images/back.jpg") no-repeat top right;
    /*How do I set the opacity of only the background?*/
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:29:34.610

您无法更改背景图像的不透明度，除非您将其移动到单独的容器中。

您可以更改的只是 BG 颜色的不透明度，使用`rgba()`：

```
background: rgba(0, 0, 0, .5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:49:22.023

您不能只为背景设置不透明度，而是为整个元素设置不透明度。您可以设置背景**颜色**的不透明度（有关示例，请参见[**Zoltan 的答案**](https://stackoverflow.com/a/11993279/1494505)）。

* * *

您可以在图像上设置白色`<div>`并更改其不透明度。

```
<div class="yourImage">
    <div class="imageCover"></div>
</div> 
```

```
.yourImage {
  background: url(http://blog.stackoverflow.com/wp-content/uploads/stackoverflow-logo-300.png);
  width: 300px;
  height: 83px;
}
.imageCover {
  background: #fff;
  width: 300px;
  height: 83px;
  opacity: .5;
} 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/fu1NtHdj)**

*但是，如果您的图像后面没有干净的背景，这将不起作用。*

# java - Java教程中的编译错误

> ID：11993060
> 
> 赞同：0
> 
> 时间：2012-08-16T18:13:22.217
> 
> 标签：java, compilation

```
public class HelloWorldSWT {

public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setText("Hello world!");
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) display.sleep();
    }
    display.dispose();
}

} 
```

输出：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    Display cannot be resolved to a type
    Display cannot be resolved to a type
    Shell cannot be resolved to a type
    Shell cannot be resolved to a type

    at HelloWorldSWT.main(HelloWorldSWT.java:10) 
```

我是 Java 新手，我已经尝试过这些但仍然无法正常工作：

指令告诉我：你会得到编译错误。右键单击 Java 编辑器并选择 Source > Organize Imports，然后保存您的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:22:41.187

首先，您必须将适当的库添加到您的项目中（在您的情况下***为 swt-gtk-xyjar***）。

然后，您的 IDE 将有可能为您计算出正确的导入。

# jquery - jQuery - 数组元素上的迭代 + addClass

> ID：11993066
> 
> 赞同：2
> 
> 时间：2012-08-16T18:14:15.687
> 
> 标签：jquery, arrays, loops, addclass

我有：

```
 $('#a1').addClass('play');
    $('#a3').addClass('play');
    $('#a5').addClass('play');  
    $('#a16').addClass('play');
    $('#b3').addClass('play'); 
```

所以决定最好使用类似的东西：

```
var doString="m7,m7,a1,b2,c3,p16,o15,n14,d8,e7,g5,i4,l4,n6,o8,n10,m11,k12,i11,i13,k15,l16,f9";
var strArray1 = doString.split(",");
console.log(doString);
console.log(strArray1);

$.each(strArray1, function(i, elem) { 
    console.log(elem); 
    $('#'+elem+').addClass('play'); // not working
}); 
```

但是无法确定将类添加到每个元素的正确参数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T18:15:24.090

```
$.each(strArray1, function(i, val) { 

    // i => index(0,1,..)
    // val => m7,m7,a1,...

    $( '#' + val ).addClass('play'); 
}); 
```

***或者***

```
$.each(strArray1, function() { 

    // this[0] => m7,m7,a1,...

    $( '#' + this[0] ).addClass('play'); 
}); 
```

### 编辑后（您的代码）

```
$.each(strArray1, function(i, elem) { 
    console.log(elem); 
    $('#'+elem+').addClass('play'); // not working
}); 
```

`$('#'+elem+')`应该在 哪里`$('#'+ elem )`。

### 在这里，您必须`+'`从选择器中删除尾随，然后将其完美。

# ios - Phonegap 2.0 , Cordova 外部链接

> ID：11993067
> 
> 赞同：2
> 
> 时间：2012-08-16T18:14:15.783
> 
> 标签：ios, cordova

我有一种情况，我在谷歌上花了很多时间却没有成功。

我想在我的应用程序（IOS）中打开类似的外部链接

`"<a href="http://google.com" target="_blank">External Link</a>"`在 safari 中打开而不是 web 视图。我在“Cordova.plist”中设置的地方

`OpenAllWhitelistURLsInWebView : true`

因为我的应用程序中也有一些 iframe，我想让用户保持在 web 视图中而不是离开应用程序。

我不知道为什么 target="_blank" 不起作用，在这里：

[https://build.phonegap.com/blog/access-tags](https://build.phonegap.com/blog/access-tags)它说：

" **在 iOS 上，如果一个域被列入白名单，一个链接将接管整个 webview，除非链接的目标是 _blank，在这种情况下它将在浏览器中打开。如果不是，它将在设备上记录错误，而站在用户的角度什么都不做。** ”

我也尝试使用JS方式，

```
window.open('http://www.google.com', '_blank'); 
```

没有成功:(

PS：*我确实在外部主机中设置了所有链接*

我很感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:33:42.653

您需要的是 MainViewController.m 中的这个迷人者

```
- (BOOL)webView:(UIWebView *)theWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSURL *url = [request URL];

// Intercept the external http requests and forward to Safari.app
// Otherwise forward to the PhoneGap WebView
if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]) {
    [[UIApplication sharedApplication] openURL:url];
    return NO;
}
else {
    return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:22:30.853

它适用于我使用以下设置：

Cordova.plist：

```
OpenAllWhitelistURLsInWebView: false

external Hosts: google.com 
```

代码中的链接：

```
< a target='_blank' href='http://maps.google.com/maps?q=something'> 
```

希望它也对你有用:)

# c++ - 获取函数地址时的奇怪行为

> ID：11993071
> 
> 赞同：0
> 
> 时间：2012-08-16T18:14:35.883
> 
> 标签：c++, debugging, visual-c++, function-pointers, memory-address

我又一次面临着对我的代码进行轻微修改的挑战，以适应一些编写不佳的代码的不可修改的库。

经过数小时的研究（在发现您无法将任何类型的状态传递给函数指针之后），我需要在将 EAX 重置为 0xCCCCCCCC 的函数头中删除 ASM 字节。

通过使用内置的 VC++ 调试器获取函数的“地址”并在作弊引擎中手动创建一个字节数组（这对这类事情非常有用），它成功提取了字节，我可以 NOP 5字节序列手动。

但是，以编程方式执行此操作有点不同。

当我执行以下任何操作时，地址明显高于调试器报告的地址，这给了我一个指向错误字节的指针。

```
unsigned int ptr = reinterpret_cast<unsigned int>(testhack);
unsigned char* tstc = (unsigned char*)&testhack;
FARPROC prc = GetProcAddress(GetModuleHandle("mod.dll"), "testhack"); // Still
                    // returns the incorrect address (same as the previous two) 
```

调试器在做什么来找到正确的地址？如何以编程方式找到正确的地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:49:58.450

大概函数地址在 DLL 中。在这种情况下，您所看到的是加载程序将例如的地址重新定位到加载程序`&testhack`的内存的正确位置。调试器可能已经知道重定位，并且会自动为您处理这些问题，允许您修改字节。

不幸的是，我不知道有任何机制可以解决这个问题，但是如果你静态链接地址将在链接时而不是运行时固定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:55:03.310

弄清楚了。

完全忘记了（我相信被称为）查找表。我收到的地址是指向查找表条目的指针，它是一个简单的 5 字节无条件 JMP，指向*真正的*函数体。我所要做的就是获取偏移量，将其添加到查找表条目的末尾，然后我就有了正确的地址。

这是到达函数正确起始地址的代码。

```
// Get the lookup table address
const char* ptr = (const char*)&testhack;
// Get the offset (+ 1 byte retrieved as a long)
unsigned int offset = (unsigned int)(*((unsigned int*)(ptr + 1)));
// Add to the original look up pointer, +5 (the offset starts after the
//    end of the instruction)
const char* tst = (const char*)(ptr + offset + 5); 
```

`tst`然后持有正确的地址！

到目前为止，调用 ASM 指令将指向包含函数指针的结构的指针放入 EAX。通常，回调函数会重置 EAX。但是，我已经应用了这个 hack 并且 NOP 删除了那部分。函数内的第一行代码创建一个本地指针，然后内联汇编`mov [ptr],eax`将地址放入指针中。然后我可以正常使用指针。

# sql - SQL Server 中是否有按全文索引上包含函数中匹配单词的数量进行排序

> ID：11993073
> 
> 赞同：3
> 
> 时间：2012-08-16T18:14:46.743
> 
> 标签：sql, sql-server-2008

我在数据库中有一个包含项目描述的表。我希望能够让用户输入一个搜索词并返回至少有一个匹配的行，按他们拥有的匹配数降序排列。

我不知道这是否可能，我无法通过谷歌搜索找到答案，所以我来这里。

基本上如果用户输入“truck blue with gold two tone”，就会生成：

```
 SELECT * FROM MyItemsTable 
    WHERE contains(Description, 'truck or blue or with or gold or two or tone') 
```

并让该返回按匹配的单词数排序。

任何建议将不胜感激。这张表会随着时间变得非常大，所以效率也在我的脑海中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:56:18.810

这似乎工作得很好，非常感谢 Gordon Linoff。

```
SELECT * FROM MyItemsTable m
INNER JOIN
CONTAINSTABLE(MyItemsTable, Description, 'truck or blue or with or gold or two or tone') AS l     ON m.MyItemsTable=l.[KEY] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:07:22.107

**[参考](http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/)**

以防您有**“卡车蓝配金色两音”之**类的唱片。您可以使用以下查询。

```
SELECT * FROM 
MyItemsTable as t
JOIN CONTAINSTABLE(MyItemsTable , Description,'"truck"') fulltextSearch
ON
t.[Id] = fulltextSearch.[KEY] 
```

这也将带来这个记录。

# ruby-on-rails - Rails & Javascript：奇怪的 404s.... 也许是爬虫？

> ID：11993074
> 
> 赞同：0
> 
> 时间：2012-08-16T18:14:49.097
> 
> 标签：ruby-on-rails, web-crawler

这可能是一个模糊的问题，但似乎某些机器人正在抓取我的网站并且做得非常糟糕。它似乎是从我的应用程序 js 文件中猜测 ID 并将其放入 url，例如：

```
Couldn't find Post with id=keypress 
```

更奇怪的是，HTTP 引用者被列为 application.js。

有谁之前经历过这个吗？关于如何阻止这些爬虫的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:29:12.247

如果它是合法的爬虫，您可以通过将robot.txt 文件放在您的根域目录中来停止它 - [http://en.wikipedia.org/wiki/Robots_exclusion_standard](http://en.wikipedia.org/wiki/Robots_exclusion_standard)

您将在 robots.txt 文件中包含以下文本：

```
User-agent: *
Disallow: /YOUR_PATH_TO_FILE/application.js 
```

您还可以将此标签添加到页面标题中：

```
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW"> 
```

如果是恶意爬虫，这当然不会阻止它。对于不尊重 robots.txt 的爬虫，您可以采取其他方法，但这取决于您使用的网络服务器。

# java - 静态方法和实例方法的区别

> ID：11993077
> 
> 赞同：95
> 
> 时间：2012-08-16T18:15:22.147
> 
> 标签：java, static, static-methods, non-static

我只是在阅读教科书中给我的文字，我不确定我是否理解它在说什么。它基本上告诉我静态方法或类方法包括“修饰符”关键字静态。但我真的不知道这意味着什么？

有人可以用非常简单的术语向我解释什么是静态或类方法吗？

另外，我可以简单解释一下 Instance 方法是什么吗？

这是他们在教科书中给我的：

> 静态修饰符的存在与否具有重要的实际意义。一旦 Java 处理了它所属的类的定义，就可以调用和执行公共类方法。实例方法并非如此。在调用和执行公共实例方法之前，必须为其所属的类创建一个实例。要使用公共类方法，您只需要该类。另一方面，在您可以使用公共实例方法之前，您必须拥有该类的实例。
> 
> 在另一个方法的定义中调用静态方法的方式根据两个方法是否属于同一个类而有所不同。在上面的例子中，factorial 和 main 都是 MainClass 类的方法。结果，在 main 的定义中调用 factorial 只是引用了方法名称“factorial”。

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-08-16T18:18:50.693

Java 的基本范式是您编写类，并且这些类被实例化。实例化的对象（类的实例）具有与它们相关联的属性（成员变量），这些属性会影响它们的行为；当实例执行其方法时，它将引用这些变量。

但是，特定类型的所有对象可能具有完全不依赖于成员变量的行为。这些方法最好是静态的。由于是静态的，因此不需要类的实例来运行该方法。

您可以这样做来执行静态方法：

```
MyClass.staticMethod();  // Simply refers to the class's static code 
```

但要执行非静态方法，您必须这样做：

```
MyClass obj = new MyClass();  //Create an instance
obj.nonstaticMethod();  // Refer to the instance's class's code 
```

在更深层次上，编译器将一个类放在一起时，会收集指向方法的指针并将它们附加到类。当这些方法被执行时，它会跟随指针并在远端执行代码。如果一个类被实例化，则创建的对象包含一个指向“虚拟方法表”的指针，该指针指向继承层次结构中该特定类要调用的方法。但是，如果方法是静态的，则不需要“虚拟方法表”：对该方法的所有调用都会转到内存中完全相同的位置以执行完全相同的代码。因此，在高性能系统中，如果您不依赖实例变量，最好使用静态方法。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-07-03T11:24:26.887

未声明为静态的方法和变量称为实例方法和实例变量。要引用实例方法和变量，您必须先实例化该类，这意味着您应该首先创建该类的对象。对于静态您不需要实例化类，您可以使用句号访问具有类名的方法和变量在 (.)

**例如：**

```
Person.staticMethod();           //accessing static method. 
```

对于非静态方法，您必须实例化该类。

```
Person person1 = new Person();   //instantiating
person1.nonStaticMethod();       //accessing non-static method. 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-04-02T18:17:54.850

## 静态方法和实例方法的区别

1.  实例方法是需要在调用它之前创建其类的对象的方法。静态方法是Java中无需创建类对象即可调用的方法。

2.  静态方法是用 static 关键字声明的。实例方法不带 static 关键字。

3.  静态方法意味着它将作为类的单个副本存在。但是实例方法存在多个副本，具体取决于为该类创建的实例数量。

4.  可以使用类引用来调用静态方法。使用对象引用调用实例或非静态方法。

5.  静态方法不能直接访问实例方法和实例变量。实例方法可以直接访问静态变量和静态方法。

参考：[geeksforgeeks](http://www.geeksforgeeks.org/static-methods-vs-instance-methods-java/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-16T18:24:12.727

静态方法，变量属于整个类，而不仅仅是一个对象实例。静态方法，变量与整个类相关联，而不是与类的特定实例相关联。每个对象将共享静态方法、变量的公共副本。无论从中创建多少对象，每个类只有一个副本。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-22T15:35:07.303

**实例方法**=> 在特定类的特定实例上调用。方法想知道它是在哪个类上调用的。它发生的方式有一个名为“this”的不可见参数。在“this”内部，我们已经为实例类的成员设置了值。“这”不是一个变量。这是一个值，您无法更改它，并且该值是对呼叫接收者的引用。 **例如：**您致电维修人员（实例方法）来修理您的电视（实际节目）。他带有工具（'this'参数）。他配备了修理电视所需的特定工具，他也可以修理其他东西。

在**静态方法**中 => 没有“this”之类的东西。 **例如：**同一修理工（静态方法）。当你打电话给他时，你必须指定要打电话给哪个修理工（比如电工）。他只会来修你的电视。但是，他没有工具来修复其他事情（没有“this”参数）。

**静态方法**通常对于不需要来自类实例（来自“this”）的任何数据的操作很有用，并且可以仅使用它们的参数来执行它们的预期目的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-06-22T04:27:12.297

简而言之，静态方法和静态变量是类级别，而实例方法和实例变量是实例或对象级别。

这意味着无论何时创建实例或对象（使用 new ClassName()），该对象都将保留其自己的实例变量副本。如果您有五个相同类的不同对象，您将有五个不同的实例变量副本。但是所有这五个对象的静态变量和方法都是相同的。如果您需要创建的每个对象都使用一些通用的东西，请将其设为静态。如果您需要一种不需要特定于对象的数据来工作的方法，请将其设为静态。静态方法仅适用于静态变量或将根据传递的参数返回数据。

```
class A {
    int a;
    int b;

    public void setParameters(int a, int b){
        this.a = a;
        this.b = b;
    }
    public int add(){
        return this.a + this.b;
   }

    public static returnSum(int s1, int s2){
        return (s1 + s2);
    }
} 
```

在上面的示例中，当您将 add() 调用为：

```
A objA = new A();
objA.setParameters(1,2); //since it is instance method, call it using object
objA.add(); // returns 3 

B objB = new B();
objB.setParameters(3,2);
objB.add(); // returns 5

//calling static method
// since it is a class level method, you can call it using class itself
A.returnSum(4,6); //returns 10

class B{
    int s=8;
    int t = 8;
    public addition(int s,int t){
       A.returnSum(s,t);//returns 16
    }
} 
```

在第一类中， add() 将返回特定对象传递的数据总和。但是静态方法可用于从任何不独立的类（如果有任何特定实例或对象）中获取总和。因此，对于只需要参数才能工作的泛型方法，可以将其设为静态以使其保持干燥。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-19T05:35:49.190

对象的行为取决于该类的变量和方法。当我们创建一个类时，我们为它创建一个对象。对于静态方法，我们不需要它们，因为静态方法意味着所有对象都将具有相同的副本，因此不需要对象。例如：

```
Myclass.get(); 
```

在实例方法中，每个对象都有不同的行为，因此它们必须使用对象实例调用方法。例如：

```
Myclass x = new Myclass();
x.get(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-16T00:20:34.693

如果方法的状态不应该改变或者它不会使用任何实例变量。

您想在没有实例的情况下调用方法。

如果它仅适用于提供给它的参数。

实用函数是静态方法的良好实例。即 math.pow()，这个函数不会改变不同值的状态。所以它是静态的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-06T08:28:11.873

**实例方法与静态方法**

1.  实例方法可以直接访问实例方法和实例变量。

2.  实例方法可以直接访问静态变量和静态方法。

3.  静态方法可以直接访问静态变量和静态方法。

4.  静态方法不能直接访问实例方法和实例变量。他们必须使用对对象的引用。并且静态方法不能使用 this 关键字，因为没有“this”可以引用的实例。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-05T10:28:15.750

静态方法与实例方法

构造函数：

```
const Person = function (birthYear) {
  this.birthYear = birthYear;
} 
```

实例方法 -> 可用

```
Person.prototype.calcAge = function () {
  2037 - this.birthYear);
} 
```

静态方法 -> 不可用

```
Person.hey = function(){
  console.log('Hey')
} 
```

班级：

```
class PersonCl {
    constructor(birthYear) {
      this.birthYear = birthYear;
    } 

    /**
     * Instance Method -> Available to instances
     */
    calcAge() {  
        console.log(2037 - this.birthYear);
    }

    /**
     * Static method -> Not available to instances
     */
    static hey() { 
        console.log('Static HEY ! ');
    }
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-08-16T18:20:13.687

放置在函数前面的 static 修饰符意味着该函数仅存在一个副本。如果静态修饰符没有放在函数前面，那么对于该类的每个对象或实例，都会生成该函数的新副本。:) 变量也是如此。

# django - Django Book OUTDATE CSRF 保护

> ID：11993082
> 
> 赞同：0
> 
> 时间：2012-08-16T18:15:28.090
> 
> 标签：django, django-csrf

您好，我是一个新手，试图使用 django 注册一些用户，我一直在阅读 Django Book 并且正在阅读关于注册的章节，[http://www.djangobook.com/en/2.0/chapter14/](http://www.djangobook.com/en/2.0/chapter14/)当我这样做时指示我明白了

禁止 (403)

CSRF 验证失败。请求中止。帮助

失败原因：

```
CSRF token missing or incorrect. 
```

通常，当存在真正的跨站点请求伪造时，或者未正确使用 Django 的 CSRF 机制时，可能会发生这种情况。对于 POST 表单，您需要确保：

```
Your browser is accepting cookies.
The view function uses RequestContext for the template, instead of Context.
In the template, there is a {% csrf_token %} template tag inside each POST form that targets an internal URL.
If you are not using CsrfViewMiddleware, then you must use csrf_protect on any views that use the csrf_token template tag, as well as those that accept the POST data. 
```

您看到此页面的帮助部分是因为您的 Django 设置文件中有 DEBUG = True 。将其更改为 False，将仅显示初始错误消息。

您可以使用 CSRF_FAILURE_VIEW 设置自定义此页面。

**我将 {% csrf_token %} 模板标签放在**post 标签内，它仍然给我这个错误。谢谢

```
#  views.py
#  
#  Copyright 2012 Talisman <KlanestroTalisman@gmail.com>
from django.shortcuts import render_to_response
from django import forms
from django.contrib.auth.forms import UserCreationForm
from django.http import HttpResponseRedirect

def home (request):
    return render_to_response('FirstTemplate.html',)

def register(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            return HttpResponseRedirect("/books/")
    else:
        form = UserCreationForm()
    return render_to_response("register.html", {
        'form': form,
    }) 
```

形式

```
{% extends "base.html" %}

{% block title %}Create an account{% endblock %}

{% block content %}
  <h1>Create an account</h1>

  <form action="" method="post"{% csrf_token %}>
      {{ form.as_p }}
      <input type="submit" value="Create the account">
  </form>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:00:10.410

Djangobook 使用了相当旧的 django 版本，您可能使用的是较新的版本，我已经尝试了这些信息，并且 csrf 部分肯定是过时的，因为他们对较新版本中的处理方式进行了一些修改，请将您的 django 版本与本书相匹配版本，这个错误的一些常见原因（除了pahko提到的中间件）是

1.  不在模板中使用 csrf_token 标记
2.  不使用 RequestContext 类 - 用 RequestContext 替换 Context

像这样

```
from django.template import RequestContext 
```

并在渲染语句中

```
return render_to_response("home/index.html", c, context_instance=RequestContext(request)) 
```

注意：在上述语句中使用您自己的模板路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:23:36.090

尝试将其放入 settings.py 中的中间件配置中

```
MIDDLEWARE_CLASSES = (
    'django.middleware.csrf.CsrfViewMiddleware',
) 
```

希望能帮助到你

# informix - 仅表单查找

> ID：11993084
> 
> 赞同：1
> 
> 时间：2012-08-16T18:15:28.777
> 
> 标签：informix, 4gl

如何在 Informix 4GL 中创建仅表单查找？我正在使用表单画家和informix SE。任何帮助，将不胜感激。我尝试创建表单，但在选择选项时该字段为空。我想我错过了这种关系或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:29:50.820

FORMONLY 相当于 isql 执行屏幕中的 DISPLAYONLY。为什么不在属性部分定义数据库列并为每列使用 NOUPDATE 属性，或者使用 BEFORE EDITUPDATE OF tabname, ABORT？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:53:32.310

由于 I4GL 不附带表单绘制器，因此了解如何使用它的唯一方法是阅读表单绘制器的手册，或通过试验。

我也不完全确定您所说的 FORMONLY 查找是什么意思？它可以是许多项目中的任何一个。但基础是表单中的字段`FORMONLY.fieldname TYPE xyz`是`xyz`适当的类型。您使用 CONSTRUCT 或 INPUT 将数据放入该字段；您处理输入以进行查找。INPUT 更适合精确值查找；CONSTRUCT 将允许更灵活的查询。

由于您没有展示您尝试过的内容，也没有说明您正在使用哪种表格画家，因此很难进一步提供帮助。

（我注意到您在 IIUG（[国际 Informix 用户组](http://www.iiug.org/)）邮件列表中也针对“经典”提出了这个问题。）

# javascript - 我的 javascript 代码的问题在哪里？

> ID：11993086
> 
> 赞同：-5
> 
> 时间：2012-08-16T18:15:43.887
> 
> 标签：javascript, xml, ajax, xmlhttprequest

好的，所以我正在尝试使用 javascript HTTPRequest 来加载一个名为“chem_vocab.xml”的 XML 文档。但是，每当我尝试执行该功能时，什么都不会发生。我放置了几行 alert() ，这样我就可以看到我的故障发生在哪里。之间似乎存在一些问题：

```
alert("Beginning Loading"); 
```

和

```
alert("XML Loaded"); 
```

该页面将正确提示“正在加载...”，但不会提示“已加载 XML”。我的问题在哪里？

```
function load_vocab(){
alert("Beginning Loading...");
var xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","chem_vocab.xml",true);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

alert("XML loaded");

var x=xmlDoc.getElementsByTagName("wordlist")[0];
x= x.getElementsByTagName("word")[0];
word = x.getElementsByTagName("spelling")[0].childNodes[0].nodeValue;
definition = x.getElementsByTagName("definition")[0].childNodes[0].nodeValue;

alert("XML parsing successful");

document.getElementById('spelling').innerHTML = word;
document.getElementById('definition').innerHTML = definition; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T18:21:23.053

你的代码：

```
xmlhttp.open("GET","chem_vocab.xml",true);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
```

您的 Ajax 请求是异步的。因此，您*无法*`.responseXML`在发送后立即读取该属性。**（的值`xmlDoc`将为空/未定义。）**您必须在`readystatechange`回调中执行此操作。

由于您似乎没有使用 Ajax 的经验，因此请考虑使用第三方 Ajax 库（例如 jQuery 或[miniajax](http://code.google.com/p/miniajax/) ，如果您不使用通用库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:21:35.550

```
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      xmlDoc=xmlhttp.responseXML; 

      alert("XML loaded");

      var x=xmlDoc.getElementsByTagName("wordlist")[0];
      x= x.getElementsByTagName("word")[0];
      word = x.getElementsByTagName("spelling")[0].childNodes[0].nodeValue;
      definition = x.getElementsByTagName("definition")[0].childNodes[0].nodeValue;

      alert("XML parsing successful");
      document.getElementById('spelling').innerHTML = word;
      document.getElementById('definition').innerHTML = definition;
    }
  } 
```

您的代码是异步的。您必须等待响应才能执行此操作`xmlDoc=xmlhttp.responseXML;`。所以你需要为事件添加一个事件处理程序`onreadystatechange`，以便你有响应。这就是上面代码的作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:24:58.637

您异步调用并期望它同步返回。使用此代码使调用非阻塞，因此您永远不会加载响应。

```
xmlhttp.open("GET","chem_vocab.xml",true); // True means non-blocking, you need a listener 
```

因此，这将始终为空。

```
xmlDoc=xmlhttp.responseXML; 
```

[根据本文档进行](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest?redirectlocale=en-US&redirectslug=Using_XMLHttpRequest)快速而肮脏的修复。

```
xmlhttp.open('GET', 'chem_vocab.xml', false);
xmlhttp.send(); // because of "false" above, will block until the request is done 
                // and status is available. Not recommended, however it works for simple cases.

if (xmlhttp.status === 200) {
  console.log(request.responseText);
  xmlDoc=xmlhttp.responseXML;
} 
```

# eclipse - Eclipse 视图部分中的 ExpandBar

> ID：11993088
> 
> 赞同：2
> 
> 时间：2012-08-16T18:15:44.890
> 
> 标签：eclipse, eclipse-plugin

我正在尝试将扩展栏添加到 Eclipse 视图部分。当我单击展开按钮时，我希望视图部分将展开栏下方的项目向下移动并显示展开的项目。当前发生的是扩展栏项目只是在扩展栏下方的项目下方消失。有什么想法吗？

```
final ExpandBar expandBar = new ExpandBar(parent, SWT.NONE);
expandBar.setBackground(SWTResourceManager.getColor(SWT.COLOR_WIDGET_LIGHT_SHADOW));
expandBar.setSpacing(0);
fd_toolBar.top = new FormAttachment(expandBar, 6);
FormData fd_expandBar = new FormData();
fd_expandBar.top = new FormAttachment(0, 62);
fd_expandBar.left = new FormAttachment(0, 3);
expandBar.setLayoutData(fd_expandBar);
formToolkit.paintBordersFor(expandBar);

final ExpandItem xpndtmWarningDetails = new ExpandItem(expandBar, SWT.NONE);
xpndtmWarningDetails.setExpanded(true);
xpndtmWarningDetails.setText("Warning Details");

final Composite composite_1 = new Composite(expandBar, SWT.NONE);
composite_1.setBackground(SWTResourceManager.getColor(SWT.COLOR_YELLOW));
xpndtmWarningDetails.setControl(composite_1);
formToolkit.paintBordersFor(composite_1);
xpndtmWarningDetails.setHeight(xpndtmWarningDetails.getControl().computeSize(SWT.DEFAULT, SWT.DEFAULT).y);

Label lblTest = new Label(composite_1, SWT.NONE);
lblTest.setBounds(10, 10, 55, 15);
lblTest.setText("Test");

expandBar.addExpandListener(new ExpandListener(){

    @Override
    public void itemCollapsed(ExpandEvent e) {
        expandBar.setSize(expandBar.getSize().x, xpndtmWarningDetails.getHeaderHeight());
        parent.layout(true);
    }

    @Override
    public void itemExpanded(ExpandEvent e) {
        expandBar.setSize(expandBar.getSize().x, 300);
        expandBar.layout(true);
        parent.layout(true);
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:46:19.520

我认为 ExpandBar 像在这个例子中一样使用时效果最好......

[http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet343.java](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet343.java)

...几个扩展条堆叠在一起，没有其他任何东西混合在一起。

我认为您正在寻找的功能可以通过 ExpandableComposite 对象来完成。这取决于您的 ViewPart 中还发生了什么。

这是 ExpandableComposite 的一个简单示例。

```
package com.amx.designsuite.rcp;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Text;
import org.eclipse.ui.forms.widgets.ExpandableComposite;
import org.eclipse.ui.forms.widgets.FormToolkit;
import org.eclipse.ui.forms.widgets.ScrolledForm;
import org.eclipse.ui.forms.widgets.TableWrapLayout;

public class ExpandableCompositeExample extends Composite {

/**
 * Create the composite.
 * @param parent
 * @param style
 */
public ExpandableCompositeExample(final Composite parent, int style) {
    super(parent, style);
    FormToolkit toolkit;

    toolkit = new FormToolkit(parent.getDisplay());
    final ScrolledForm form = toolkit.createScrolledForm(parent);
    form.setText("Title for Form holding Expandable Composite (optional)");
    TableWrapLayout layout = new TableWrapLayout();
    form.getBody().setLayout(layout);

    ExpandableComposite expandableCompsite = toolkit.createExpandableComposite(form.getBody(), ExpandableComposite.TREE_NODE | ExpandableComposite.SHORT_TITLE_BAR);
    toolkit.paintBordersFor(expandableCompsite);
    expandableCompsite.setText("Expandable Composite Title (Optional)");
    expandableCompsite.setExpanded(true);

    Text txtMyNewText = toolkit.createText(expandableCompsite, "Text to show when composite is expanded", SWT.NONE);
    expandableCompsite.setClient(txtMyNewText);
}

@Override
protected void checkSubclass() {
    // Disable the check that prevents subclassing of SWT components
}
} 
```

# python - AssertionError: No api proxy found for service "xmpp"

> ID：11993092
> 
> 赞同：1
> 
> 时间：2012-08-16T18:15:55.317
> 
> 标签：python, google-app-engine, xmpp, webrtc

我正在尝试在没有 dev_appserver.py 的情况下运行 gae 应用程序，并出现以下错误 AssertionError: No api proxy found for service "xmpp"

```
room = webrtc.Room.get_by_key_name(room_key) 
```

我在 app.yaml inbound_services 中找到：-channel_presence

如何在 application.py 中直接启用 channel_presence

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:59:11.290

除非另有说明，否则 App Engine SDK 中包含的库仅适用于 App Engine 环境。您不能只导入 App Engine SDK 中包含的 XMPP 库并期望它在非 GAE 应用程序中工作。

# php - phpass CheckPassword 使用不同的盐？

> ID：11993095
> 
> 赞同：1
> 
> 时间：2012-08-16T18:15:58.710
> 
> 标签：php, passwords, phpass

我有一个带有用户区和管理区的站点。在管理区域，我有一个用于创建用户的页面和一个用于创建管理员的页面。在用户和管理员页面上，我使用以下代码对密码进行哈希处理：

```
$hasher = new PasswordHash(8, false);
$password = $HTTP_POST_VARS['password'];
$hash = $hasher->HashPassword($password);
$HTTP_POST_VARS['password'] = $hash; 
```

对于用户页面，检查密码的代码是：

```
$hasher = new PasswordHash(8, false);
$check = $hasher->CheckPassword($password, $arrData[$conf['PASSWORD']['FIELD']]);
if ($check) {
    //login...
} 
```

这工作得很好。我的用户密码经过哈希处理，它正确地检查了密码。我在管理员登录页面上使用了相同的代码，但是它不起作用。它从数据库中提取正确的信息，但是当使用 CheckPassword 时，密码不匹配。我认为这可能与加盐有关，因为密码的开头部分似乎是相同的。

顺便说一句，我使用的是 PHP 4.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:27:13.880

> 我认为这可能与加盐有关，因为密码的开头部分似乎是相同的。

我不知道您为什么会这样认为，但是密码**哈希**(!) 的开头部分应该是相同的。bcrypt 创建的散列使用模块化 crypt 格式，它不仅包含散列值，还包含使用的散列函数、轮数和已用于创建散列值的盐的指示符。那是相同的部分。另请参阅我从以下位置复制此信息的相关问题：

*   [Phpass - 无法访问所有密码的危险？](https://stackoverflow.com/q/6465063/367456)

这可能无法回答您的问题，但希望能为您澄清一些细节，以免您看错地方。

* * *

> 我现在将数据库设置为允许 50 个字符。有谁知道最长的哈希 phpass 会生成吗？

这取决于使用的哈希函数。在Phpass 的作者*[如何管理 PHP 应用程序的用户和密码一文中，​​给出了以下示例 Mysql 数据库模式：](http://www.openwall.com/articles/PHP-Users-Passwords)*

```
create database myapp;
use myapp;
create table users (user varchar(60), pass varchar(60)); 
```

你看这里，这是一个`VARCHAR(60)`. 这意味着最多 60 个字符就足够了。

从另一个角度来看，Wordpress 也使用 Phpass 并且[具有以下密码列定义](http://codex.wordpress.org/Database_Description)：

```
user_pass VARCHAR(64) 
```

这意味着 64 个字符对他们来说应该足够了。但是请记住，Wordpress 也支持其他哈希，所以这可能只是一个通用值，而不是 Phpass 特定的。

另见：

*   [便携式 PHP 密码哈希框架](http://www.openwall.com/phpass/)（我认为这是最低限度的必读，如果您想了解更多信息，请阅读它）
*   [便携式（PHPPass）密码哈希。我应该使用它们吗？](https://stackoverflow.com/questions/5343611/portable-phpass-password-hashes-should-i-use-them)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:28:51.640

我想我想通了。存储管理员密码的表没有存储整个哈希。我不敢相信我之前没有意识到这一点。

我现在将数据库设置为允许 50 个字符。有谁知道最长的哈希 phpass 会生成吗？

# ios - 如何使用 StoryBoard 在 iPad 上的 Popover 中显示 UIDatePicker？

> ID：11993096
> 
> 赞同：5
> 
> 时间：2012-08-16T18:16:02.070
> 
> 标签：ios, ipad, uidatepicker, popover, uitextfielddelegate

我已经实现了在弹出框内显示日期选择器，以编程方式执行它，如[UIPopover 中的 UIDatePicker](https://stackoverflow.com/questions/7341835/uidatepicker-in-uipopover?rq=1)所示。

但是我一直在尝试在界面生成器中执行此操作，我已经创建了一个名为 DatePickerViewController.m 的视图控制器，其中包含一个 DatePicker 及其相应的 IBoulet

```
#import <UIKit/UIKit.h>

@interface DatePickerViewController : UIViewController
@property (strong, nonatomic) IBOutlet UIDatePicker *birthdayDatePicker;

@end 
```

![StoryBoard 中 DatePickerViewController.m 中的 DatePicker](../Images/830544cf957dd442fd3f3c8e97c7a0d6.png)

然后我需要在编辑生日文本字段时将其显示在弹出窗口中。所以我使用以下代码

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    //Assign DatePicker to Birthday TextField
    //build our custom popover view
    DatePickerViewController* popoverContent = [[DatePickerViewController alloc] init];
    //resize the popover view shown
    //in the current view to the view's size
    popoverContent.contentSizeForViewInPopover = CGSizeMake(320, 216);

    // dismiss existing popover
    if (self.popoverControllerBirthday)
    {
        [self.popoverControllerBirthday dismissPopoverAnimated:NO];
        self.popoverControllerBirthday = nil;
    }

    //create a popover controller with my DatePickerViewController in it
    UIPopoverController *popoverControllerForDate = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
    //Set the delegate to self to receive the data of the Datepicker in the popover
    popoverControllerForDate.delegate = self;
    //Adjust the popover Frame to appear where I want
    CGRect myFrame =textField.frame;
    myFrame.origin.x = 260;
    myFrame.origin.y = 320;

    //Present the popover
    [popoverControllerForDate presentPopoverFromRect:myFrame 
                                          inView:self.view 
                        permittedArrowDirections:UIPopoverArrowDirectionDown 
                                        animated:YES];
    self.popoverControllerBirthday = popoverControllerForDate;
    return NO; // tells the textfield not to start its own editing process (ie show the keyboard)

} 
```

而且我还在我当前的 ViewController 中导入了自定义 DatePickerViewController

```
#import "DatePickerViewController.h" 
```

但它没有显示弹出框内的日期选择器。

![在此处输入图像描述](../Images/8173e43ffd705177e733021f4654afb8.png)

有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T17:41:04.383

您可能希望通过以编程方式创建 ViewController 和 DatePicker 来避免情节提要中的所有工作：

```
//build our custom popover view
UIView *v = [[UIView alloc] init];
CGRect pickerFrame = CGRectMake(0, 0, 320, 216);
UIDatePicker *pView=[[UIDatePicker alloc] initWithFrame:pickerFrame];
pView.datePickerMode = UIDatePickerModeDate;

self.datePicker = pView;
[v addSubview:self.datePicker];

UIViewController *popoverContent = [[UIViewController alloc]init];
popoverContent.view = v;

//resize the popover view shown
//in the current view to the view's size
popoverContent.contentSizeForViewInPopover = CGSizeMake(320, 216);

// dismiss existing popover
if (self.pcDatePicker)
{
    [self.pcDatePicker dismissPopoverAnimated:NO];
    self.pcDatePicker = nil;
}

//create a popover controller with my DatePickerViewController in it
UIPopoverController *popoverControllerForDate = [[UIPopoverController alloc] initWithContentViewController:popoverContent];

//Set the delegate to self to receive the data of the Datepicker in the popover
popoverControllerForDate.delegate = self;

//Adjust the popover Frame to appear where I want
CGRect myFrame = sender.frame;//CGRectMake(SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2, 320,     200);
myFrame.origin.x = 260;
myFrame.origin.y = 320;

//Present the popover
[popoverControllerForDate presentPopoverFromRect:myFrame
                                          inView:self.view
                        permittedArrowDirections:UIPopoverArrowDirectionAny
                                        animated:YES];

self.pcDatePicker = popoverControllerForDate; 
```

然后使用委托方法获取日期：

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    self.startDate = self.datePicker.date;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T19:07:58.450

解决了

我所要做的就是实例化 StoryBoard 日期选择器视图控制器，例如：

```
...
DatePickerViewController* popoverContent = [[DatePickerViewController alloc] init];

popoverContent =[[UIStoryboard storyboardWithName:@"MainStoryboard"
                                         bundle:nil]
               instantiateViewControllerWithIdentifier:@"DatePickerVC"];
//resize the popover view shown
//in the current view to the view's size
popoverContent.contentSizeForViewInPopover = CGSizeMake(320, 216);
... 
```

其中标识符在 StoryBoard 属性检查器中设置

![在哪里设置视图控制器标识符](../Images/c561e3de9b6432353d83604216dcaa99.png)

现在显示了

![现在显示来自 DatePickerViewController 的 DatePicker](../Images/d602f3d3d34a381d11695d58db041083.png)

# c# - 为 WPF 应用程序设计大容量市场数据服务

> ID：11993097
> 
> 赞同：3
> 
> 时间：2012-08-16T18:16:08.957
> 
> 标签：c#, .net, wpf, wcf

我想用 WPF 应用程序使用的虚构大量数据（期权交易）创建自己的迷你项目，以更好地理解设计实时系统的设计概念和考虑因素，并想了解哪种类型使用的技术和方法。请不要提及 Tibco 等第三方解决方案 - 这是出于学习目的。我的意图是 WPF 应用程序每 5 秒刷新一次它的 UI

在设计我的虚构市场数据服务器时，考虑到高容量性能是一个标准，我想到了一些快速的想法 - 多播 UDP（这是否太低级/不好的方向？），使用队列的消息传递架构，例如 MSMQ 或RabbitMQ，一个远程服务主机，客户端应用程序通过 WCF TCP 绑定或 Web 服务发起请求。

我的一个想法是客户维护自己的本地队列并订阅定价服务器使用消息传递解决方案广播的主题？或者，也许服务器会将数据平等地广播给所有客户端，然后让客户端在本地过滤和整理数据？在人们的经验中，每种方法的优缺点是什么，我在这里错过了其他方法吗？我想这归结为 - 客户端应该提取数据还是服务器应该将数据推送给他们？

另一个问题是 - 这些消息将采用什么有线格式？我主要习惯于使用丰富的业务对象类，分为存储库层、域模型（带有用于验证和工作流逻辑的方法）和简单的服务层。我是否仍然可以利用这种方法并仍然保持我的性能目标，或者我是否需要创建更轻量级的数据有效负载格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:39:59.043

在进行网络级优化之前，我会从更高层开始设计这样的系统。

RabbitMQ 为路由消息提供了不同类型的交换。将所有消息广播到每个客户端（扇出交换）的方法在 RabbitMQ 服务器端稍微快一点，但这仅适用于低容量消息并且客户端通过高速链路（例如本地千兆以太网）连接。相反，使用直接或局部交换可能会显着降低您的网络延迟。您可以在 RabbitMQ 网站上阅读有关交换类型的更多信息。

您的最后一个问题是关于线格式的。从理论上讲，RabbitMQ 允许任何字符串（甚至二进制）有效负载，因此它的问题是尝试将更多信息压缩到更少的字节中。以我的经验，只要您的消息不通过网络数据包 MTU，压缩或选择聪明的编码方案的收益是微不足道的。

一般来说，想想你在每次优化上花费了多少时间，以及预期的投资回报率是多少。IMO 一些优化比其他优化更有用。如果我是你，我会非常仔细地查看 RabbitMQ 配置参数。例如，看看您是否可以使用每个进程的消息队列设置 rabbit MQ 服务器。

# c++ - Dll 注入 - 在另一个进程中编写本机代码

> ID：11993098
> 
> 赞同：3
> 
> 时间：2012-08-16T18:16:27.610
> 
> 标签：c++, .net, interop, dll-injection

[好的，所以我对C++ Dll Injection](https://stackoverflow.com/questions/1777526/c-dll-injection)的第 3 步有疑问，即：

> *使用 CreateRemoteThread()。您可以将其`LoadLibrary()`作为入口点，将步骤 1 和 2 中的文件路径作为参数。老实说，这有点 hacky，但是如果您要注入 DLL，那么您已经很 hacky。另一种技术是使用步骤 1 和 2 将一些机器代码加载到远程进程中并**指向它**。*

所以我的问题是：在我使用 分配内存`VirtualAllocEx`并使用 编写代码之后`WriteProcessMemory`，我该如何调用`CreateRemoteThread`——我的意思是第四个和第五个参数是什么？

我的代码：

```
AllocatedMem = VirtualAllocEx(Proc, IntPtr.Zero, code.Length,
    AllocationType.Reserve | AllocationType.Commit, MemoryProtection.ReadWrite);

WriteProcessMemory(Proc, AllocatedMem, code, code.Length, IntPtr.Zero);

CreateRemoteThread(Proc, IntPtr.Zero, 0, AllocatedMem,
    IntPtr.Zero, 0, IntPtr.Zero); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:22:50.833

来自[`MSDN Documentation`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437%28v=vs.85%29.aspx)：

```
HANDLE WINAPI CreateRemoteThread(
 _In_   HANDLE hProcess,
 _In_   LPSECURITY_ATTRIBUTES lpThreadAttributes,
 _In_   SIZE_T dwStackSize,
 _In_   LPTHREAD_START_ROUTINE lpStartAddress,
 _In_   LPVOID lpParameter,
 _In_   DWORD dwCreationFlags,
 _Out_  LPDWORD lpThreadId
); 
```

因此，您的第 4 个参数应该是指向 的指针`LoadLibrary`，而第 5 个参数应该是要运行的代码。

**更新**

例子：

```
LoadLibAddy = GetProcAddress(GetModuleHandle("kernel32.dll"), "LoadLibraryA"); 

CreateRemoteThread(
  Proc, 
  IntPtr.Zero, 
  0,
  LoadLibAddy,
  AllocatedMem, 
  0, 
  IntPtr.Zero
); 
```

注意：您需要调用附加功能，并且您的“代码”应该是本机 DLL 的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:25:08.557

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437(v=vs.85).aspx)

```
HANDLE WINAPI CreateRemoteThread(
  _In_   HANDLE hProcess,
  _In_   LPSECURITY_ATTRIBUTES lpThreadAttributes,
  _In_   SIZE_T dwStackSize,
  _In_   LPTHREAD_START_ROUTINE lpStartAddress,
  _In_   LPVOID lpParameter,
  _In_   DWORD dwCreationFlags,
  _Out_  LPDWORD lpThreadId
); 
```

hProcess 是应在其中创建线程的进程的句柄。

lpThreadAttributes 可以为 NULL 以指定“使用默认值”

dwStackSize 可以为零以指定“使用默认值”

lpStartAddress 是线程将开始执行*的 FOREIGN PROCESS中的地址*

lpParameter 是在外部进程中传递给ThreadMain 的参数（即在外部进程中，假设lpStartAddress 使用WINAPI 调用约定调用，lpParameter 作为唯一参数）。

dwCreationFlags 可以为零。

lpThreadId 应该是一个指向 DWORD 的指针，如果成功则接收线程 ID。

如果将 lpStartAddress 设置为 LoadLibraryW 的地址，并将 lpParameter 设置为*在 FOREIGN PROCESS*中指向 L"foo.dll" 的指针，那么当线程在外部进程中启动时，它将立即调用 LoadLibraryW(L"foo.dll") in外部进程，允许您从 DllMain 内部运行代码。

# wordpress - WordPress 帖子标题最大字符长度

> ID：11993099
> 
> 赞同：0
> 
> 时间：2012-08-16T18:16:30.090
> 
> 标签：wordpress

我有一个基于 WordPress 的应用程序，它必须容纳很长的帖子标题。我是否正确理解 WP 帖子标题受实际 VARCHAR 列类型的限制（5.0.3 之后的 MySQL 为 65,535 字节）并且如此长的标题不会影响性能？

我刚刚做了一些初步测试，似乎长标题不是问题，有人知道有什么不利影响吗？

（注意：请注意这不是一个典型的博客站点，在这种情况下，WP 被用作自定义 CMS）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:40:12.310

我想我会回答我自己的问题，除非有人证明我错了。

> 自 3.0 版以来，除了“varchar”字段的实际 MySql 限制之外，实际帖子标题字符长度没有限制。但是，如果使用了漂亮的永久链接（即：/%category%/%postname%/），那么建议清理可能的冗长 url。

# c++ - 错误 C2143：语法错误：在“*”之前缺少“{”

> ID：11993101
> 
> 赞同：0
> 
> 时间：2012-08-16T18:16:46.390
> 
> 标签：c++, c

```
struct reprVectorsTree;

#ifdef __cplusplus
extern "C" {
#endif

typedef reprVectorsTree * RHandle;
RHandle create_reprVectorsTree(float **, int , int );
void free_reprVectorsTree(RHandle);
float*  work_decode(RHandle , bool*, int);

#ifdef __cplusplus
}
#endif 
```

我根据这里的答案写了接口头文件 [How to use c++ objects in c?](https://stackoverflow.com/questions/11971063/how-to-use-c-objects-in-c) ，但我得到语法错误？缺什么？

----编辑----我把它改成了

```
struct reprVectorsTree;

#ifdef __cplusplus
extern "C" {
#endif

typedef struct reprVectorsTree * RHandle;
RHandle create_reprVectorsTree(float **, int , int );
void free_reprVectorsTree(RHandle);
float*  work_decode(RHandle , bool *, int);

#ifdef __cplusplus
}
#endif 
```

现在我在 float* 行上收到以下错误

```
error C2143: syntax error : missing ')' before '*'
error C2081: 'bool' : name in formal parameter list illegal
error C2143: syntax error : missing '{' before '*'
error C2059: syntax error : ','
error C2059: syntax error : ')' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T18:18:48.783

尝试：

```
typedef struct reprVectorsTree * RHandle; 
```

您不能只使用结构，就好像它是没有 typedef 的 C 中的类型（例如`typedef struct reprVectorsTree;`）

编辑：假设您使用的是最近的 C 编译器，您还需要`#include <stdbool.h>`使用该类型，或者只使用 an来代替。`bool``int`

# winapi - 文本在文本框中的位置

> ID：11993106
> 
> 赞同：3
> 
> 时间：2012-08-16T18:17:32.190
> 
> 标签：winapi, vb6

嗨，我有一个包含一些文本的文本框。我正在寻找复制红色拼写错误曲线类型的行为。

使用 WinAPI 我可以

*   绘制 2 点之间的曲线。
*   找出要“弯曲”的单词的高度和宽度。

什么是 api 调用（或者如果它不仅仅是一个 api 调用，则可能是方法）来查找该单词在文本框中的位置，以便我可以将 siggle 定位在它的下方。

此外，我需要捕获哪些消息以确保重绘曲线。我目前只使用 WM_PAINT，这显然不够好。

编辑（2012 年 9 月 3 日）：仅供参考，这是我到目前为止的工作。需要大量改进，但显示基本原则

[https://gist.github.com/3607272](https://gist.github.com/3607272)

很多谢谢

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:33:07.317

可能有用的是使用自动调整大小的标签。确保标签和文本框中的字体相同。

1.  检测包含拼写错误单词的句子之前的行数。
2.  `vbcrlf`使用您从问题 1 中获得的数字换行符 ( ) 填充标签标题。
3.  将拼写错误行中的单词（直到拼写错误的单词）附加到标签标题中。
4.  标签大小现在应该与拼写错误的单词的开头相同。

示例文本：

`This is my first line.
And my second line.
And over here i have my mispeled word.`

标签标题输出应该是（忽略点，它们是空行）：

`.
.
And over here i have my`

标签的高度和宽度应与文本框中的位置相匹配，除非您有滚动条。如果文本框有边框，那么您应该为高度和宽度添加一个固定值以获得完全匹配。

# ios - MPMoviePlayerViewController 在 iOS 4.2 中立即自行关闭

> ID：11993107
> 
> 赞同：1
> 
> 时间：2012-08-16T18:17:35.207
> 
> 标签：ios, mpmovieplayercontroller, ios-4.2, ios4, mpmovieplayer

我展示了一个带有以下代码的 MPMovieViewController：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Tutorial" ofType:@"m4v"];

// If path is NULL (the resource does not exist) return to avoid crash
if (path == NULL)
    return;

NSURL *url = [NSURL fileURLWithPath:path];

MPMoviePlayerViewController *mpViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
mpViewController.moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
mpViewController.moviePlayer.shouldAutoplay = YES;

// NOTE: This can crash the app in the Simulator. This is a known bug
// in xcode: http://stackoverflow.com/a/8317546/472344
[self presentMoviePlayerViewControllerAnimated:mpViewController]; 
```

这在 iOS 4.3 及更高版本中运行良好，但我已经有人在运行 iOS 4.2.1 的设备上对其进行了测试，并且电影播放器​​视图控制器出现，但立即自行关闭。我在文档中找不到任何可以解释这一点的东西。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:30:52.850

这听起来很像电影内容本身的不兼容。

我怀疑 iOS 4.2.1 设备是 iPhone 3G。3G 不像最近的型号那样支持那么多的编解码器。

iOS4.2.1（及以下）的 iPhone 3G 不支持 Main Profile，只支持 Baseline Profile。

长话短说，您尝试播放的视频与设备不兼容，您需要使用 H264 的基线配置文件重新编码。

下面是 Apple 完成的兼容性与编码矩阵。尽管这标题为 HTTP Streaming Encode Recommendations，但它仍然适用于非流式传输（渐进式下载）和本地播放。

![在此处输入图像描述](../Images/587aaac5cb77a5f84cd70b71a8d602df.png)

# python - 什么会阻止过滤器返回 0？

> ID：11993112
> 
> 赞同：3
> 
> 时间：2012-08-16T18:17:59.537
> 
> 标签：python, filter, boolean

当我尝试过滤`[1,2,0,3,8]`时，`if x < 3: return x`我最终得到`[1,2]`. 为什么`0`不包含在此列表中？

```
def TestFilter(x):
    if x < 3: 
        return x

a = [1,2,0,3,8]
b = filter(TestFilter, a)
print b 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T18:23:41.710

每次您的函数返回`True` [filter()](http://docs.python.org/library/functions.html#filter)时，都会将原始列表中的当前元素添加到新列表中。Python 认为`0`是`False`和任何其他数字是`True`。因此，您将希望返回函数`True`而不是数字。

```
def TestFilter(x):
    if x < 3: 
       return True 
```

**编辑：**这是一个 lambda 示例：

```
a = [1, 2, 3, 0, 4, 8]
print filter(lambda x: x < 3, a) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T18:27:35.370

过滤时，您希望返回 True 或 False。这就是你想要的：

```
def TestFilter(x):
    return x < 3 
```

当您使用它进行过滤时，您将获得您正在寻找的结果。

# cakephp-2.1 - Cakephp $this->Auth->loggedIn() 并不总是有效

> ID：11993114
> 
> 赞同：1
> 
> 时间：2012-08-16T18:18:09.133
> 
> 标签：cakephp-2.1

我正在使用 cakephps Auth 组件登录到我的网站。当我正确输入我的用户名和密码时，它会让我登录。然后当我使用loggedIn（）检查我是否已登录时，返回true非常不一致。这是我的 AppController，我在其中将 loggedIn() 设置为稍后使用的变量：

```
<?php

App::uses('Controller', 'Controller');
App::uses('File', 'Utility');
App::uses('AuthComponent', 'Component');

class AppController extends Controller {
    public $components = array(
        'Session',
        'Auth'=>array(
            'loginRedirect'=> array('controller'=>'users', 'action'=>'index'),
            'logoutRedirect'=> array('controller'=>'users', 'action'=>'index'),
            'authError' =>"You can't access that page",
            'authorize'=> array('Controller')
        )

    );
    //determines what logged in users have access to
    public function isAuthorized($user){
        return true;
    }
    //determines what non-logged in users have access to
    public function beforeFilter(){
        $this->Auth->allow('index','view');
        $this->set('logged_in', $this->Auth->loggedIn());
        $this->set('current_user', $this->Auth->user());
    }

} 
```

这是我使用'logged_in'的一些代码

```
<?php if($logged_in): ?> //this only returns true some of the time
      Welcome <?php echo $current_user['username']; ?>. <?php echo  $this->Html->link('Logout', array('controller'=>'users', 'action'=>'login')); ?>

<?php else: ?>
   <?php echo  $this->Html->link('Login', array('controller'=>'users', 'action'=>'logout')); ?>
<?php endif; ?> 
```

这是我的登录名（）：

```
public function login(){
    if($this->request->is('post')){
        if($this->Auth->login()){  //this returns true every time
            $this->redirect($this->Auth->redirect());

        }else{
            $this->Session->setFlash('Your username and/or password is incorrect');
        }
    } 
```

}

我曾尝试调用 $this->Auth->loggedIn() 而不是使用 $logged_in 但我收到无法找到 Auth Helper 的错误。如果需要更多信息来回答我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:26:58.260

将这些行移到 beforeRender()

```
 $this->set('logged_in', $this->Auth->loggedIn());
    $this->set('current_user', $this->Auth->user()); 
```

除此之外，您的代码似乎没有任何问题。Auth->login() 将始终返回 true 的注释仅在您将任何参数传递给 login() 方法时发生，但您显示的代码没有。

# google-chrome - Chrome 扩展：关闭 Chrome 后关闭背景页面

> ID：11993115
> 
> 赞同：7
> 
> 时间：2012-08-16T18:18:11.257
> 
> 标签：google-chrome, google-chrome-extension, notification-area

我有一个带有背景页面的扩展程序，默认情况下，这会导致 Chrome 在您关闭所有窗口后持续存在，并将 Chrome 图标放在系统托盘中。我想避免这种情况——我不希望我的扩展程序在关闭所有 Chrome 窗口后导致 Chrome 进程持续存在，我也不希望 Chrome 出现在系统托盘中。

根据[我能找到的唯一文档](http://support.google.com/chrome/bin/answer.py?hl=en&answer=1184722 "只有我能找到的文档")，这表明*用户*可以在所有扩展中全局设置此选项，但这不是我想要做的。我希望扩展不张扬/不引人注目，并且不想改变用户的浏览器行为。有谁知道如何在保留拥有背景页面的能力的同时做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T00:12:26.770

**更新**

使用清单版本 2，您现在可以运行[非持久的事件页面](http://developer.chrome.com/extensions/event_pages.html)。事件页面与背景页面非常相似，但仅在扩展需要时加载。

事件页面文档中关于在清单中设置非持久事件脚本的示例：

```
{
  "name": "My extension",
  ...
  "background": {
    "scripts": ["eventPage.js"],
    "persistent": false
  },
  ...
} 
```

[这是关于将 Chrome 扩展程序迁移到清单版本 2](http://developer.chrome.com/extensions/tut_migration_to_manifest_v2.html)的教程。

* * *

**旧答案**

目前，如果您的扩展在 manifest.json 文件中定义了背景，它将在 Chrome 启动之前运行，并在 Chrome 的所有窗口关闭后继续运行。除非用户像您提到的那样更改他们的设置。未来版本的 Google Chrome 可能会支持不同的功能，但作为开发者的您目前无法解决此问题。

[背景清单文档](http://developer.chrome.com/extensions/manifest.html#permissions)的摘录

> 让 Chrome 早起晚关，让应用程序和扩展程序的寿命更长。
> 
> 当任何已安装的托管应用程序、打包应用程序或扩展程序具有“后台”权限时，Chrome 会在用户登录其计算机后立即运行（不可见）——在用户启动 Chrome 之前。“后台”权限还使 Chrome 继续运行（即使在其最后一个窗口关闭后），直到用户明确退出 Chrome。

# java - Java中的高效方法参数

> ID：11993116
> 
> 赞同：5
> 
> 时间：2012-08-16T18:18:47.177
> 
> 标签：java

我仍然是java的初学者，我对传递参数的有效方法有疑问。在方法中传递对象时，传递对象的某些部分是否更有效，或者根本不重要？例如，假设我有一个 Person 对象，它具有多个属性（姓名、身高、性别、位置、头发颜色等），并且我有一个需要处理其中两个属性的方法。当我将信息传递给方法时，它是否节省了我的内存、处理时间等以仅传递所需的信息（如名称和位置），还是与仅传递整个 person 对象相同？

是：

```
public void getNamePlace(String name, String location){
\\\\work here
} 
```

任何不同的效率方面：

```
public void getNamePlace(Person person){
\\\\work here and get the name location in the method
} 
```

非常感谢您的帮助。如果这是一个愚蠢的问题，我很抱歉，但我正在努力找出解决这个问题的最佳心态。谢谢你。

ps我更多地考虑方法调用本身。它是如何工作的。单独来看，是：

public void getNamePlace(String name, String Location) --> 比传递的位数和使用的内存多 --> public void getNamePlace(Person person)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T18:23:56.173

您正在传递参考值。您传递的值越多，完成的工作就越多。

这是一个*可测量*的差异吗？从技术上讲，是的——但在*极端情况*下是微不足道的（例如，另一个参数是另一个字节码，仅此而已。性能和类大小的差异非常小。）

这是一个*明显*的区别吗？不。

这里的心态是，过早的优化，*特别是*在这个级别，是不需要处理的。

其他人指出，*可读性*和数据问题更为重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:23:18.723

它“根本不重要”。在 Java 中，您只需将对象的引用（作为值）传递给函数。这是一个非常小的数据类型，它告诉虚拟机对象在内存中的位置。

看看[Java是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)一个很好的答案;）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T18:23:38.700

当你使用这个：

```
public void getNamePlace(Person person){
   \\\\work here and get the name location in the method
} 
```

除了对 type 的实际对象的引用（松散意义上的“指针”）之外，实际上没有任何东西传递给该方法`Person`。不会复制成员，因为您正在指示方法“您可以在此内存位置找到所需的一切”。

因此，从技术上讲，传递有限数量的字段`person`实际上比传递“整个人”更糟糕（尽管差异并不明显）。:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-16T18:25:14.953

java中的对象是通过引用传递的。简短的回答是只传递你的对象。

长答案是对象引用是 32 位或 64 位，具体取决于您的 java 安装。64 位的数量是 JVM 的典型填充大小的两倍（在某些情况下，即使在 64 位系统上通常也是 32 位）。取消引用引用会产生少量开销，但 JIT 编译器通常会将其优化为恒定量，而不是重复命中。此外，您总是必须在某个时候取消引用它，无论是在函数内部还是外部。您不妨只保存堆栈空间并通过引用传递对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T18:26:20.163

您正在使用`getNamePlace(String,String)`而不是传递一个额外的地址`getNamePlace(Person)`。

`Person`Java在传递对象时不会对其进行复制；它通过了参考。

同样，Java 在传递字符串时不会复制它们；它通过了引用。

您会注意到显着的性能差异吗？不。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-16T18:26:55.377

考虑到时间和效率，这并不重要。

但是**，如果您想编写可读的代码，这确实很重要**。- 将逻辑连接的项目分组为它们所代表的对象总是很好的

例如：

```
writeLetterTo(person); 
```

比这**要**好得多：

```
writeLetterTo(name, surname, address, city, country); 
```

如果只有所有这些参数可以以某种方式从人对象中获取。

另一个例子：

```
addTwoPionts(x1, x2, y1, y2); // ugly
addTwoPoints(point1, point2); // far better 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-16T18:28:26.730

除了方法参数之外，您还应该调整几件事：

```
public void getNamePlace(Person person){
    \\\\work here and get the name location in the method
} 
```

养成正确的习惯

*   `getNamePlace`什么都不返回时的方法名称不符合约定。`getXXXX`应该返回值。
*   由于`getNamePlace`将对其进行操作，`Person`因此它应该在类本身中定义，然后您无需传递任何参数。
*   **最后回答你的问题**，你不应该太在意这种*微优化*，所以最初在语言学习图中......它几乎没有任何区别。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-16T18:26:49.977

我个人不会太在意这个。如果您真的非常关心性能，您可能应该考虑使用较低级别的语言。正如其他人所说，两者之间实际上没有任何性能差异，尤其是在仅传递变量时。

如果您确实遇到性能问题，我怀疑您的代码中还有许多其他地方会减慢您的速度，而不是参数传递。

# java - 如何获取二维列表数组中的所有第一个元素？

> ID：11993120
> 
> 赞同：0
> 
> 时间：2012-08-16T18:18:56.293
> 
> 标签：java

假设我有一个 2D 列表数组，我声明为 -

```
ArrayList<ArrayList<String>> seqList;
seqList = new ArrayList<ArrayList<String>>(); 
```

该列表包含以下元素 -

```
[Mod5], [Mod5], [Mod5]
[Mod5, Mod10], [Mod5, Mod10]
[Mod5, Mod10, Mod8], [Mod5, Mod10, Mod8], [Mod5, Mod10, Mod8] 
```

我想提取所有行的第一个元素并将其保存在另一个列表中，即结果应该 `[Mod5], [Mod5, Mod10], [Mod5, Mod10, Mod8]` 是有没有可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T18:20:58.900

当然有——一个简单的循环就可以了：

```
ArrayList<String> res = new ArrayList<String>();
for (ArrayList<String> s : seqList)
    res.add(s.get(0)); 
```

请注意，上面的代码假定列表不为空。如果该假设不成立，请在获取初始元素之前添加一个空列表检查。

# powershell - 使用 Powershell 更改 Windows 更新设置

> ID：11993125
> 
> 赞同：3
> 
> 时间：2012-08-16T18:19:18.770
> 
> 标签：powershell, windows-update

我正在使用 Windows Server 2008 r2，并尝试配置 PowerShell 脚本以更改要下载的 Windows 更新的设置，但让我选择安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:04:11.383

您可以使用以下命令直接从注册表中执行此操作：

```
Set-ItemProperty -Path "HKLM:\SOFTWARE\Policies\Microsoft\Windows\WindowsUpdate\AU\AUoptions" -Name newproperty  -Value "4" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-21T01:10:57.233

```
Set-ItemProperty -Path "HKLM:\SOFTWARE\Policies\Microsoft\Windows\WindowsUpdate\AU" -Name AUOptions -Value 3 
```

2 = 下载前通知。

3 = 自动下载并通知安装。

4 = 自动下载和预定安装。（仅当 ScheduledInstallDay 和 ScheduledInstallTime 的值存在时才有效。）

5 = 需要自动更新，但最终用户可以配置它。

[https://docs.microsoft.com/de-de/security-updates/windowsupdateservices/18127499](https://docs.microsoft.com/de-de/security-updates/windowsupdateservices/18127499)

# coffeescript - Coffeescript 属性错误：第 5 行的解析错误：意外的 '{

> ID：11993126
> 
> 赞同：1
> 
> 时间：2012-08-16T18:19:21.153
> 
> 标签：coffeescript

我在 Coffeescript 中有这段代码

```
window.App = new Backbone.Marionette.Application
Models: {}
Collections: {}
Views: {}
Views.Layouts: {}
Routers: {} 
```

我正在尝试获取此 javascript 代码

```
window.App = new Backbone.Marionette.Application({
Models: {},
Collections: {},
Views: {},
Views.Layouts: {},
Routers: {}
}); 
```

我收到此错误：错误：第 5 行解析错误：意外'{

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:29:25.060

我认为这就是你想要做的：

```
window.App = new Backbone.Marionette.Application
  Models: {}
  Collections: {}
  Views: 
      Layouts: {}
  Routers: {} 
```

# asp.net-mvc - 在部分视图中使用导航属性获取错误 CS1061（mvc razor 实体框架）

> ID：11993128
> 
> 赞同：0
> 
> 时间：2012-08-16T18:19:29.877
> 
> 标签：asp.net-mvc, entity-framework, razor, ienumerable

嗨，我从控制器调用局部视图时收到错误 CS1061。我正在使用包含 Mvc 和 EF 的单独项目的解决方案。

我的模型是一个**Menu**和**MenuItem**实体（缩写为 EF）：

```
public partial class Menu : EntityObject
{
#region Propiedades primitivas
public global::System.Int32 Id
public global::System.String Name
#region Propiedades de navegación
[EdmRelationshipNavigationPropertyAttribute("DAL_EF_Model", "MenuMenuItem", "MenuItem")]
    public EntityCollection<MenuItem> MenuItems 
```

...

```
public partial class MenuItem : EntityObject
{
#region Propiedades primitivas
public global::System.Int32 Id
public global::System.String Name
public global::System.String ActionName
public global::System.String ControllerName
public global::System.String Url 
```

...

控制器是：...

```
 [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult MenuLayout(string name)
    {
        if (db.Menus.Count<Menu>() > 0 &&
            db.MenuItems.Count<MenuItem>() > 0)
        {
            //var todos = new MenuV();
            //todos = db.Menus.ToList();
            List<Menu> otros = db.Menus.ToList();
            foreach (var opcion in db.Menus)
            {
                List<Menu> menu = db.Menus
                    .Include("MenuItems")
                    .ToList();
                    //.Single<Menu>(m => m.Name == opcion.Name);
                return PartialView("_MenuLayout", menu);
            }
            return PartialView("_MenuLayout", null);
        }
        else
        {
            return PartialView("_MenuLayout", null);
        }
    } 
```

...

和部分视图_MenuLayout.cshtml：

```
@model IEnumerable<DAL_EF.Menu>
<div id="accordion">
 <div><h3><a href="#"> ERP </a></h3>
   @{
    if (Model != null)
    {
        <div><ul>
        @foreach (var item in Model.MenuItems)
        {
            <li id="@item.Name">@Html.ActionLink(
            @item.Name,
            @item.ActionName,
            @item.ControllerName)</li>
        }
        </ul></div>
    }
}
 </div> 
</div> 
```

错误发生在

```
IEnumerable<DAL_EF.Menu> 
```

如果我使用

```
.Single<Menu> 
```

从控制器和部分视图接收

```
 DAL_EF.Menu 
```

它工作正常。

完整的错误信息是：

```
 {"_MenuLayout.cshtml(21): error CS1061: 'System.Collections.Generic.IEnumerable<DAL_EF.Menu>' no contiene una definición de 'MenuItems' ni se encontró ningún método de extensión 'MenuItems' que acepte un primer argumento de tipo 'System.Collections.Generic.ICollection<DAL_EF.Menu>' (¿falta una directiva using o una referencia de ensamblado?)"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:11:50.257

```
@model IEnumerable<DAL_EF.Menu> 
```

这指定您的模型是 IEnumerable< DAF_EL.Menu > 类型。但是，您正在使用模型，就好像它是 DAL_EF.Menu 类型一样。

```
@foreach (var item in Model.MenuItems) 
```

正如错误消息所说，IEnumerable< DAL_EF.Menu >（这是您的模型）没有名为 MenuItems 的属性，因为它是一大堆菜单，而不仅仅是一个菜单。

你可能想要这样的东西，循环遍历模型中的每个菜单，然后循环遍历每个菜单中的每个 MenuItem。

```
@foreach (Menu menu in Model)
{
    @foreach(var item in menu.MenuItems)
    {
        .. do your stuff ..
    }
} 
```

# android - MediaRecorder 以纵向模式拍摄视频

> ID：11993129
> 
> 赞同：8
> 
> 时间：2012-08-16T18:19:34.580
> 
> 标签：android, video, orientation, mediarecorder

我正在尝试制作自定义视频应用程序。Iwork 仅使用清单**2.2 (API 8) 中的设置。**

一切顺利，但我不明白为什么纵向模式视频与横向模式没有区别。

为了检测设备改变方向，我在 surfaceChanged() 中使用此代码

```
 if (mCamera != null) {

        Camera.Parameters p = mCamera.getParameters();

        try {
            mCamera.stopPreview();
        } catch (Exception e) {
            // TODO: handle exception
        }

        int previewWidth = 0;
        int previewHeight = 0;

        if (mPreviewSize != null) {
            Display display = ((WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
            int rotation = display.getRotation();

            switch (rotation) {
            case Surface.ROTATION_0:
                previewWidth = mPreviewSize.height;
                previewHeight = mPreviewSize.width;
                mCamera.setDisplayOrientation(90);
                break;

            case Surface.ROTATION_90:
                previewWidth = mPreviewSize.width;
                previewHeight = mPreviewSize.height;
                mCamera.setDisplayOrientation(0);
                break;

            case Surface.ROTATION_180:
                previewWidth = mPreviewSize.height;
                previewHeight = mPreviewSize.width;
                mCamera.setDisplayOrientation(270);
                break;

            case Surface.ROTATION_270:
                previewWidth = mPreviewSize.width;
                previewHeight = mPreviewSize.height;
                mCamera.setDisplayOrientation(180);
                break;
            }

            p.setPreviewSize(previewWidth, previewHeight);
            mCamera.setParameters(p);
        }
    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();
    } catch (Exception e) {
        Log.d(TAG, "Cannot start preview.", e);
    }
} 
```

奇迹般有效。如果我旋转设备表面改变方向，调用surfaceChanged，其中相机设置为适当的DisplayRotation。

问题是以后如何确定视频是以横向模式还是纵向模式捕获的。正如我得到的所有视频都是以横向拍摄的。它不依赖于仅影响预览过程的 setDisplayOrientation。

也在探索这个问题时，我注意到如果使用标准相机应用程序，它会将特殊标签写入视频文件（在 MediaInfo 中看到）：**旋转：90**用于人像拍摄的视频。

但 MediaRecorder 类没有。

似乎这就是问题所在。有人要解决这个问题吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-26T21:21:14.637

找到了 ！确实，您可以更改预览，可以标记视频，但是无法实际更改视频...（可能是速度问题或其他问题）

```
camera.setDisplayOrientation(90); 
```

要旋转预览，然后

```
recorder.setOrientationHint(90); 
```

要将视频标记为 90° 旋转，则手机会在阅读时自动旋转视频。

所以你所要做的就是

```
 camera = Camera.open();
        //Set preview with a 90° ortientation
        camera.setDisplayOrientation(90);
        camera.unlock();

        holder = getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        recorder = new MediaRecorder();
        recorder.setCamera(camera);
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        recorder.setOutputFile(getVideoFolder()+rnd.nextString()+".mp4");
        recorder.setPreviewDisplay(holder.getSurface());
        //Tags the video with a 90° angle in order to tell the phone how to display it
        recorder.setOrientationHint(90);

        if (recorder != null) {
            try {
                recorder.prepare();
            } catch (IllegalStateException e) {
                Log.e("IllegalStateException", e.toString());
            } catch (IOException e) {
                Log.e("IOException", e.toString());
            }
        }

        recorder.start(); 
```

希望能帮助到你 ;-）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-06T05:13:15.797

camera.setDisplayOrientation(90) 不适用于所有设备。以下解决方案在不同设备中完美运行，并且还处理棉花糖运行时权限。

> 见 setCameraRotation 方法

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;
    public static int rotate;
    private Context mContext;

    public CameraPreview(Context context, Camera camera) {
        super(context);
        mCamera = camera;
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        mContext = context;
    }

    public void surfaceCreated(SurfaceHolder holder) {
        try {
            // create the surface and start camera preview
            if (mCamera != null) {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            }
        } catch (IOException e) {
            Log.d(VIEW_LOG_TAG, "Error setting camera preview: " + e.getMessage());
        }
    }

    public void refreshCamera(Camera camera) {
        if (mHolder.getSurface() == null) {
            // preview surface does not exist
            return;
        }
        // stop preview before making changes
        stopPreview();
        // set preview size and make any resize, rotate or
        // reformatting changes here
        setCamera(camera);

        // start preview with new settings
        startPreview();
    }

    public void stopPreview(){
        try {
            if(mCamera != null)
            mCamera.stopPreview();
        } catch (Exception e) {
            // ignore: tried to stop a non-existent preview
            e.printStackTrace();
        }
    }

    public void startPreview(){
        try {
            if(mCamera != null) {
                mCamera.setPreviewDisplay(mHolder);
                mCamera.startPreview();
            }else{
                Log.d(VIEW_LOG_TAG, "Error starting camera preview: " );
            }
        } catch (Exception e) {
            Log.d(VIEW_LOG_TAG, "Error starting camera preview: " + e.getMessage());
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.
        refreshCamera(mCamera);
    }

    public void setCamera(Camera camera) {
        //method to set a camera instance
        mCamera = camera;
        /**
         * add camera orientation and display rotation according to screen landscape or portrait
         */
        setCameraRotation();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        if(mCamera != null){
            mCamera.release();
        }

    }

    public void setCameraRotation() {
        try {

            Camera.CameraInfo camInfo = new Camera.CameraInfo();

            if (VideoCaptureActivity.cameraId == 0)
                Camera.getCameraInfo(Camera.CameraInfo.CAMERA_FACING_BACK, camInfo);
            else
                Camera.getCameraInfo(Camera.CameraInfo.CAMERA_FACING_FRONT, camInfo);
            int cameraRotationOffset = camInfo.orientation;
            // ...

            Camera.Parameters parameters = mCamera.getParameters();

            int rotation = ((Activity)mContext).getWindowManager().getDefaultDisplay().getRotation();
            int degrees = 0;
            switch (rotation) {
                case Surface.ROTATION_0:
                    degrees = 0;
                    break; // Natural orientation
                case Surface.ROTATION_90:
                    degrees = 90;
                    break; // Landscape left
                case Surface.ROTATION_180:
                    degrees = 180;
                    break;// Upside down
                case Surface.ROTATION_270:
                    degrees = 270;
                    break;// Landscape right
            }
            int displayRotation;
            if (camInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
                displayRotation = (cameraRotationOffset + degrees) % 360;
                displayRotation = (360 - displayRotation) % 360; // compensate
                // the
                // mirror
            } else { // back-facing
                displayRotation = (cameraRotationOffset - degrees + 360) % 360;
            }

            mCamera.setDisplayOrientation(displayRotation);

            if (camInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
                rotate = (360 + cameraRotationOffset + degrees) % 360;
            } else {
                rotate = (360 + cameraRotationOffset - degrees) % 360;
            }

            parameters.set("orientation", "portrait");
            parameters.setRotation(rotate);
            mCamera.setParameters(parameters);

        } catch (Exception e) {

        }
    }

} 
```

现在准备正确旋转的媒体录像机，以便录制的视频以正确的方向播放。

> mediaRecorder.setOrientationHint(CameraPreview.rotate);

私人布尔prepareMediaRecorder（）{

```
 mediaRecorder = new MediaRecorder();

    mCamera.unlock();
    mediaRecorder.setCamera(mCamera);

    mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    mediaRecorder.setOrientationHint(CameraPreview.rotate);

    mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_LOW));

    mediaRecorder.setOutputFile(filePath);
    mediaRecorder.setMaxDuration(15000); // Set max duration 15 sec.
    mediaRecorder.setMaxFileSize(10000000); // Set max file size 1M

    try {
        mediaRecorder.prepare();
    } catch (IllegalStateException e) {
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        releaseMediaRecorder();
        return false;
    }
    return true;

} 
```

您可以下载完整的示例[https://github.com/umesh-kushwaha/Android_Video_Recording_portrait](https://github.com/umesh-kushwaha/Android_Video_Recording_portrait)

# c++ - 是否为成员变量自动调用默认构造函数？

> ID：11993134
> 
> 赞同：17
> 
> 时间：2012-08-16T18:19:56.480
> 
> 标签：c++, constructor, header

说我有这门课：

```
//Awesome.h
class Awesome
{
    public:
        Awesome();
    private:
        membertype member;
}

//Awesome.cpp
#include "Awesome.h"

Awesome::Awesome()
:member()
{
} 
```

`member()`如果我在构造函数的初始化列表中省略了，构造`Awesome`函数`member`会被自动调用吗？并且仅当我不包含`member`在初始化列表中时才调用它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-16T18:22:58.587

是的。当初始化列表中未给出变量时，默认自动构造。

*默认构造*意味着，如果`membertype`是 a `class`or `struct`，则默认构造，如果是内置数组，则默认构造每个元素，如果是内置类型，**则不执行初始化**（除非`Awesome`对象具有静态或线程本地存储持续时间）。最后一种情况意味着成员变量可以（并且通常会）包含不可预测的垃圾，以防`Awesome`对象在堆栈上创建或在堆上分配。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-16T18:30:11.033

从§ 8.5

> 如果没有为对象指定初始化器，则该对象是默认初始化的；如果不执行初始化，则具有自动或动态存储持续时间的对象具有不确定的值。[注意：具有静态或线程存储持续时间的对象是零初始化的，请参见 3.6.2。——尾注]

**更新以供将来参考**：进一步默认初始化的含义定义为

> 默认初始化 T 类型的对象意味着：
> —*如果 T 是（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认值，则初始化是非良构的构造函数）*；
> — 如果 T 是数组类型，则每个元素都是默认初始化的；
> — 否则，不执行初始化。
> 如果程序要求对 const 限定类型 T 的对象进行默认初始化，则 T 应是具有用户提供的默认构造函数的类类型。

此外，它与初始化的值不同，指的是：-

> 对 T 类型的对象进行值初始化意味着：
> — 如果 T 是具有用户提供的构造函数（12.1）的（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（并且初始化如果 T 没有可访问的默认构造函数，则格式错误）；
> — 如果 T 是没有用户提供的构造函数的（可能是 cv 限定的）非联合类类型，则该对象是零初始化的，如果 T 的隐式声明的默认构造函数是非平凡的，则调用该构造函数。
> — 如果 T 是一个数组类型，那么每个元素都是值初始化的；
> — 否则，对象被零初始化。

# asp.net - 在 IE8 中打印时 Password 类型的 TextBox 为空

> ID：11993135
> 
> 赞同：0
> 
> 时间：2012-08-16T18:19:56.490
> 
> 标签：asp.net, printing, textbox, passwords

我有一个表单，其中有一个密码类型的文本框作为表单的签名。用户输入密码进行签名，因此实际文本不应显示，而是点。打印时，文本框仍需要包含点以表明它已被签名。但是在 IE 8 中打印时，该框是空白的。Firefox 会打印这些点，但它需要在 IE 中工作。

如果有帮助，这是基本的文本框代码。

```
<asp:TextBox ID="TextBox1" runat="server" textmode="Password"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:34:53.533

`<input type="password" />`出于安全原因，IE 不打印。也就是说，在文本框中输入内容并不是在几乎每个司法管辖区“签署”文件（只是说......）。

我建议您使用 Javascript 来检测密码字段是否输入了文本，并向该页面添加一条消息，说明它已被输入？

# apache-flex - FLEX PLM 与 Windchill 的集成

> ID：11993136
> 
> 赞同：0
> 
> 时间：2012-08-16T18:19:59.860
> 
> 标签：apache-flex, ptc-windchill

有人知道什么是 FLEX PLM 与 Windchill 的集成。

我需要快速学习它，因为这将在我们的一个项目中实现。其中使用的编程语言是什么？我对此知之甚少。

提前致谢！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:17:41.350

FlexPLM 是 PTC 的产品生命周期管理解决方案，可满足鞋类和服装行业的需求。此解决方案基于 Windchill，它是一个 j2ee 应用程序。有关 FlexPLM 的更多信息，请参阅[PTC University Learning Exchange](http://learningexchange.ptc.com/tutorials/by_sub_product/sub_product_id:6)

希望这可以帮助，

里卡多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-09T08:12:17.877

**不支持以类似于 Creo/Windchill 集成或 FlexPLM AI 集成的方式直接集成 CAD 软件 支持库对象的关联/参考文档 支持将 CAD 数据纳入产品规范**

*两者都是 PLM 产品，您可以将 ALM 与 PLM 集成。*

例如。带有 PTC Windchill 的 ALM Integrity Lifecycle Manager

如果你想做这里是[youtube 视频链接](https://www.youtube.com/watch?v=ayfXILRUkZ4)

# memory-management - 如何更改内核 2.6.3x (ubuntu 10.04) 中的 free_pages_high 和 free_pages_low

> ID：11993138
> 
> 赞同：0
> 
> 时间：2012-08-16T18:20:05.613
> 
> 标签：memory-management, kernel, swap

有谁知道我如何在 ubuntu 机器上更改 linux 内核的 kswapd min_pages 和 high_pages ？

可以在 /proc/sys/vm/min_free_kbytes 上更改 min_pages，但我找不到如何更改其他参数。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:52:52.017

显然，使用 /proc/sys/vm/min_free_kbytes 可以自动设置所有值。[http://mariosmarduch.ulitzer.com/node/431838/mobile](http://mariosmarduch.ulitzer.com/node/431838/mobile)

# java - JFace 向导在最后一页显示数据

> ID：11993142
> 
> 赞同：1
> 
> 时间：2012-08-16T18:20:12.323
> 
> 标签：java, swt, jface

我有一个带有 3 个 WizardPages 的向导，每个页面都有保存用户输入的小部件，我需要添加最后一页，保存用户输入的所有信息。

我不知道该怎么做，因为 4 个页面是同时创建的。

```
Public Wizard(){
    addPage(new Page1()) ;
    addPage(new Page2()) ;
    addPage(new Page3()) ;
    addPage(new PageSummary()) ;

} 
```

如何根据前几页中输入的内容更改 PageSummary 控件？

编辑：我找到[了一个帖子](https://stackoverflow.com/a/954542/1192335)，它完全符合我的要求，使用该`onEnterPage()`方法看起来很聪明，这是我尝试过的方法：

```
public class NewEquipementSummaryPage extends WizardPage {
    public void createControl(Composite parent) {
    // composite to hold widgets 
    Composite composite = new Composite(parent, SWT.NONE) ;

    // composite layout 
    GridLayout gl = new GridLayout(2, false) ;
    composite.setLayout(gl) ;

    // making widgets 
    createWidgets(composite) ;
    setControl(composite) ;
}

    public void onEnterPage() {
    TypeEquipementPage typePage = (TypeEquipementPage) getWizard().getPage(TypeEquipementPage.PAGE_NAME) ;
    CompanySellerPage companyPage = (CompanySellerPage) getWizard().getPage(CompanySellerPage.PAGE_NAME) ;
    EquipementUserPage userPage = (EquipementUserPage) getWizard().getPage(EquipementUserPage.PAGE_NAME) ;

    if(typePage.types[0].getSelection() == true)
        typeEquipementLabel.setText("Poste de travail") ;
    else
        typeEquipementLabel.setText("Peripherique") ;

    marqueEquipementLabel.setText(typePage.marquesCombo.getText()) ;
    descriptionEquipementLabel.setText(typePage.descriptionField.getText()) ;

    if(companyPage.companyExistButton[0].getSelection() == true) {
        companyNameLabel.setText(companyPage.companiesCombo.getText()) ;
    }
    else{
        companyNameLabel.setText(companyPage.companyNameField.getText()) ;
        companyAdressLabel.setText(companyPage.companyAdressField.getText()) ;
        companyNumberLabel.setText(companyPage.companyNumberField.getText()) ;
    }

    if( !(userPage.sharedEquipementButton.getSelection()) )
        useOfEquipementLabel.setText("Utilisateur") ;
    else
        useOfEquipementLabel.setText("Bureau") ;

    pack() ;
} 
```

最后使用 pack() 方法，我在编译时出错（找不到符号）

没有它，页面中什么也没有出现..我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T16:26:17.847

尝试覆盖`DialogPage#setVisible`并从那里`NewEquipementSummaryPage`调用：`onEnterPage`

```
public void setVisible(boolean visible) {

    super.setVisible(visible);

    if (visible) {

        onEnterPage();
    }
} 
```

（以及按照`composite.pack()`SoboLAN 的回答中的建议更改）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:58:57.090

我想你想要`composite.pack ()`的，不只是`pack ()`。为此，请将`composite`变量作为`private`字段存储在您的类中（以便您可以在`onEnterPage`方法中访问它）。

# macos - 从通知中心删除应用程序

> ID：11993145
> 
> 赞同：21
> 
> 时间：2012-08-16T18:20:32.597
> 
> 标签：macos, osx-mountain-lion, nsusernotification

嘿，我正在制作一个小型可可应用程序并在 Mountain Lion 中使用新的通知中心 API。但是，我的应用程序现在与日历、消息等一起出现在通知中心设置中。

因为只是我在玩，我希望它现在从列表中消失，但无论如何我都找不到删除它，尝试了几件事，将其拖出，按住 alt+右键单击等等。有谁知道填充该列表的（可能是一个）plist 可以位于哪里？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-25T11:48:44.887

我被困在同一条船上。

虽然我不认为从通知中心清除已注册的应用程序是记录在案的步骤，但显然有一些设置可以做到这一点。这是我发现的。此数据不存储在 plist 中，而是存储在 sqlite 数据库中。

如果你看`~/Library/Application Support/NotificationCenter/<id>` （在我的例子中，我在 NotificationCenter 下只有一个目录），你会`<id>.db`在该目录下看到一个文件。

^(**编者按**：[Hofi](https://stackoverflow.com/users/472790/hofi)指出，**由于 macOS 10.10**表示 SQLite 数据库可以在 shell 命令返回的目录中找到
`$(getconf DARWIN_USER_DIR)com.apple.notificationcenter/db`，命名为`db`.)

在里面戳，我看到了像`app_info`, `app_source`,`presented_notifications`等这样的表。此外，模式包括一个如下所示的清理触发器：

```
CREATE TRIGGER app_deleted AFTER DELETE ON app_info
BEGIN
    DELETE FROM scheduled_notifications     WHERE app_id=old.app_id;
    DELETE FROM presented_notifications     WHERE app_id=old.app_id;
    DELETE FROM presented_alerts                WHERE app_id=old.app_id;
    DELETE FROM notifications                   WHERE app_id=old.app_id;
    DELETE FROM app_push                        WHERE app_id=old.app_id;
    DELETE FROM app_loc                     WHERE app_id=old.app_id;
     DELETE FROM app_source                 WHERE app_id=old.app_id;
END; 
```

使用 sqlite3 客户端，如果您执行

```
select * from app_info; 
```

第一列是`app_id`您的应用程序，第二列是您的应用程序的 bundleid。根据 bundleid 查找您的应用程序。然后做一个

```
delete from app_info where app_id = <app_id> 
```

您使用上面的 select 命令找到的正确 app_id 在哪里。

令人沮丧的是，在这样做之后，一切都留在了 NotificationCenter（中心和系统偏好设置）中。我必须注销并重新登录才能看到更改生效，但幸运的是，我的多个测试应用程序现在消失了；-)

如果有人知道一种不那么复杂的方式，我会全神贯注。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-05-17T21:00:37.000

突出显示列表中的应用程序，然后按`fn`+`backspace`或`del`/`delete`如果您的键盘上有它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-07T17:19:19.353

如果您删除应用程序（可能还需要清空垃圾箱）并注销并重新登录，它会从列表中删除。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-08T14:52:18.330

当我陷入困境时，以下可能是严厉的方法似乎对我有用。它避免更改 AppID/等。至少。

1.  退出 XCode
2.  `rm -rf ~/Library/Developer/Xcode/DerivedData/*`
3.  `killall usernoted`
4.  `killall NotificationCenter`
5.  `rm ~/Library/Application Support/NotificationCenter/*`
6.  打开系统偏好设置→通知（这似乎重新启动了一切）

此方法不需要重新启动/注销。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-10T10:33:25.370

我遇到了 BetterTouchTool 在卸载后没有从通知中心消失的问题。不幸的是，这里提到的方法对我不起作用，但我最终想通了。

对于任何无法使其在 High Sierra 下工作的人：

1.  在终端中，导航到 NotificationCenter 文件夹：

    ```
    cd $(getconf DARWIN_USER_DIR)/com.apple.notificationcenter/ 
    ```

2.  使用 pwd 获取路径并复制到剪贴板（应该类似于 /var/folders/c3/289nmdsd2cz68yd5p47k553w0000gn/0/com.apple.notificationcenter）

    ```
    pwd 
    ```

3.  在 finder 中，转到文件夹 (cmd+shift+g) 并粘贴路径
4.  找到包含 db 文件的文件夹并将整个文件夹拖到垃圾箱（我只有一个名为“db2”的文件夹）
5.  清空垃圾桶！（这很重要，没有它就无法在我的机器上工作）
6.  注销并再次登录

可能有一种更优雅的方式，但这对我有用。请注意，由于某种原因，数据库会使用仍然存在于 db 表中的 application_id 进行重建（顺便说一句，在 High Sierra 上调用它`app`而不是调用`app_id`），但是该条目从通知中心消失了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-23T16:17:35.013

我只是重命名了 NotificationCenter 文件夹中的文件，然后重新启动。创建了一个新文件，其中仅填充了默认应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T18:47:07.130

更改您正在使用用户通知进行调用的项目中的代码

```
[[NSUserNotificationCenter defaultUserNotificationCenter] removeAllDeliveredNotifications]; 
```

从您的应用委托的方法`-applicationDidFinishLaunching:`。这将从用户通知中心删除所有用户通知。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-07T14:04:07.527

您可以从 Xcode 轻松完成此操作。

打开`Organizer`，然后选择`Projects`顶部的选项卡。您将在左侧看到所有应用程序的列表。对于您要删除的任何应用程序，从左侧菜单中选择它并`Delete...`选择`Derived Data`.

这仍然会保留通知中心中的所有用户设置，以及通知本身。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-09T22:08:32.967

1.  转到查找器
2.  在“本机”选项卡下搜索 Macintosh HD
3.  单击应用程序
4.  按 Shift + Command + G
5.  输入 ~/library
6.  单击应用程序支持
7.  点击通知中心
8.  将唯一存在的文件拖到废纸篓
9.  退出所有正在进行的应用程序
10.  清空垃圾桶
11.  重新开始

太棒了！根据个人经验，该应用程序已永久删除到您的通知中心。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-25T15:09:33.800

我试图删除通知，但在我的情况下，准确地说是针对网站 (9to5mac)。我可以在系统偏好设置中看到它 | 通知并将其设置为禁用，但我继续收到通知。我终于弄明白了。对于网站，您必须进入 Safari，然后进入 Safari Preferences | 网站，然后是通知，然后找到该网站并将其设置为拒绝或完全删除它。我在这里删除了 9to5mac，一旦删除，它也从一般通知中心消失了，真是太棒了！但至少有办法。

同样从我的搜索中，我也使用 sqlite 浏览器打开了通知数据库文件，但找不到我的网络通知“应用程序”，因此您必须在 Safari 中删除/禁用它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-09T16:03:32.373

对于 macOS Catalina，可以通过以下方式找到 db 的路径`lsof -p $(ps aux | grep -m1 usernoted | awk '{ print $2 }')| awk '{ print $NF }' | grep 'db2/db$' | xargs dirname`

# slider - 无法摆脱幻灯片下方的黑色像素

> ID：11993152
> 
> 赞同：1
> 
> 时间：2012-08-16T18:21:18.140
> 
> 标签：slider, slideshow, flexslider, singlepage

在[这个网站上](http://www.alliedouglass.com/20120521_index.html)，我遇到了一个问题：黑色像素位于主页 flexslider 图像轮播的左下角。

我似乎无法摆脱它，但它似乎与`ul`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:25:08.260

打开您的样式表并更改：

```
.slides:after {
 clear: both;
 content: ".";
 display: block;
 height: 0;
 line-height: 0;
} 
```

进入：

```
.slides:after {
 clear: both;
 content: "";
 display: block;
 height: 0;
 line-height: 0;
} 
```

您还应该查看[css content 属性](http://www.w3schools.com/cssref/pr_gen_content.asp)

# java - 如何设置 GWT 单元格背景颜色

> ID：11993154
> 
> 赞同：0
> 
> 时间：2012-08-16T18:21:21.670
> 
> 标签：java, gwt, styles, cell

我想更改 gwt 单元格列的背景颜色属性。问题是这种颜色可以在每次渲染单元格时发生变化（背景颜色取决于单元格的值）。

我已经尝试覆盖 TextColumn 的单元格样式名称方法，如下所示：

```
@Override
public String getCellStyleNames(final Context context, final Object data) {
if (my_condition) return "a custom style";
else return "default style"; // or null...
} 
```

好吧，您当然知道它只是向属性添加了一个类名，因此由于静态 css 文件定义，我不能使用它“动态”设置颜色。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:42:20.853

~~如果您使用的是 Grid，则可以使用 CellFormatter。例如 grid.getCellFormatter().setStyleName(row, column, "dynamicStyleName");~~

对于“颜色”属性的动态更新，我建议扩展 TextCell（并将其传递给“TextColumn”构造函数）。像这样的东西：

```
public class CustomCell extends TextCell<String> {

  interface Template extends SafeHtmlTemplates {
    @Template("<div style=\"color:{0}\">{1}</div>")
    SafeHtml div(String url, String text);
  }

  private static Template template;

  public CustomCell () {
    if (template == null) {
      template = GWT.create(Template.class);
    }
  }

  @Override
  public void render(Context context, String value, SafeHtmlBuilder sb) {
    String color = "red";
    if (value != null) {
      // The template will sanitize the URI.
      sb.append(template.div(color, value));
    }
  }
}

public class CustomColumn<T> extends TextColumn<T> {

  public CustomColumn() {
    super(new CustomCell());
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T23:30:16.997

由于您没有提供您正在使用的组件的详细信息，因此我将给出一个通用建议，以尝试找出您可能需要使用哪些属性。

我使用 eclipse 并建议使用 GWT Designer 来帮助您处理 POC 内容。它可以帮助我了解我可能想要使用哪些属性：

*   GWT 设计器参考： [https ://developers.google.com/web-toolkit/tools/download-gwtdesigner](https://developers.google.com/web-toolkit/tools/download-gwtdesigner)

*   如何使用 GWT Designer 的示例：
    [https ://developers.google.com/web-toolkit/tools/gwtdesigner/tutorials/loginmanager](https://developers.google.com/web-toolkit/tools/gwtdesigner/tutorials/loginmanager)

# qt - Qt Multi-Touch 与 qTUIO 和 mtdev2tuio 嵌入式 linux

> ID：11993156
> 
> 赞同：1
> 
> 时间：2012-08-16T18:21:26.037
> 
> 标签：qt, embedded-linux, touchscreen, multi-touch, qtembedded

我有一个嵌入式 linux 项目，我想在其中使用 Qt 的多点触控。我一直在看 qTUIO ( [https://github.com/x29a/qTUIO](https://github.com/x29a/qTUIO) )，它看起来很棒。

我交叉编译了 qTUIO 库并部署到板上。

我还交叉编译并部署了 TUIO“服务器”的要求：

*   [http://bitmath.org/code/mtdev/](http://bitmath.org/code/mtdev/)
*   [http://liblo.sourceforge.net/](http://liblo.sourceforge.net/)
*   [http://repo.or.cz/w/mtdev2tuio.git](http://repo.or.cz/w/mtdev2tuio.git)

在板上，我启动了“服务器”：

```
./mtdev2tuio /dev/input/touchscreen osc.udp://127.0.0.1:3333/
Sending OSC/TUIO packets to osc.udp://127.0.0.1:3333/ 
```

为了确保它正在读取输入设备，我还做了以下操作，当我在触摸屏上移动手指时看到了“名称解析失败”：

```
./mtdev2tuio /dev/input/touchscreen osc.udp://localhost:3333/
Sending OSC/TUIO packets to osc.udp://localhost:3333/
...
OSC error -3: Temporary failure in name resolution
OSC error -3: Temporary failure in name resolution
OSC error -3: Temporary failure in name resolution
OSC error -3: Temporary failure in name resolution
OSC error -3: Temporary failure in name resolution
... 
```

然后我在板上运行了 qTUIO 版本的“pinchzoom”示例，它的运行如下所示：

```
# ./pinchzoom -qws
graphicsview initialized 
listening to TUIO messages on UDP port 3333 
```

所以我有一个服务器声称正在解释我的触摸并将它们发送 UDP 到端口 3333，而 qt 应用程序声称正在读取这些 TUIO 事件并将它们传递给 Qt。当我触摸屏幕时，没有任何反应。有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:56:48.283

你能真正启动一个网络记录器（如 tcpdump、Wireshark）并查看 OSC 数据包是否真的从你的服务器发送？

错误

> OSC 错误 -3：名称解析暂时失败

看起来像是服务器端的问题，因此要消除客户端作为错误源，请选择与您不同的服务（跟踪器）。[http://tuio.org/?software](http://tuio.org/?software)有一个很好的概述，如果你身边有一个 Android Fon，试试[http://code.google.com/p/tuiodroid/](http://code.google.com/p/tuiodroid/)来模拟 OSC 数据包。

现在给客户。qTUIO 实际上远未完成，因此很有可能它是罪魁祸首。测试数据包是否被正确接收和转发的一个好方法是查看代码中重载的 event() 方法，看看它是否触发，如果是，使用哪种类型。我只能告诉你，使用 CCV 1.4 作为跟踪器可以正常工作。此外，如果可能，请使用绘画示例，因为它实际上将触摸事件转换为绘画事件，减少了可能出错的魔法。

在嵌入式领域工作只是为错误源添加了另一种特殊的味道。你可能有字节序问题吗？时间问题？

您能否提供有关您正在使用的库、操作系统、硬件等版本的更多信息？

我很乐意更新这篇文章以提供一个真正的解决方案，一旦清楚，是什么组件导致了错误。祝你好运！

# ajax - AJAX 在一台计算机上运行， 但在另一台计算机上运行

> ID：11993159
> 
> 赞同：1
> 
> 时间：2012-08-16T18:21:35.783
> 
> 标签：ajax

好的，我在一个高尔夫俱乐部网站上工作，当您更改俱乐部的条件时，它应该使用 AJAX 更改价格。它适用于我的计算机和 Firefox 版本（14.0.1），但它只是将我兄弟的计算机和 Firefox 版本（14.0.1）的价格更改为 0.00 美元。一旦将其更改为 0.00 美元，他的计算机上将不再更改。我们只在 Firefox 上遇到过这个问题。有谁知道为什么会这样做？

我在想它可能与 XMLHttpRequest() 有关，但是当它是相同版本的浏览器时，它可以在一台计算机上运行而不是另一台计算机上运行是没有意义的。

这是Javascript文件。

```
var xmlHttp

function GetXmlHttpObject()
{
var xmlHttp=null;
try
  {
  // Firefox, Opera 8.0+, Safari
  xmlHttp=new XMLHttpRequest();
  }
catch (e)
  {
  // Internet Explorer
  try
    {
    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
    }
  catch (e)
    {
    xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
  }
return xmlHttp;
}

function quantityPrice(ClubType, Make, Model, ShaftType, Condition, Qty)
{ 
xmlHttp=GetXmlHttpObject();
if (xmlHttp==null)
  {
  alert ("Sorry, your browser does not support this website. Your browser needs to be upgraded to newer version.");
  return;
  } 
var url="includes/getPriceViaQuantity.php";
url=url+"?ClubType="+ClubType;
url=url+"&Make="+Make;
url=url+"&Model="+Model;
url=url+"&ShaftType="+ShaftType;
url=url+"&Condition="+Condition;
url=url+"&Qty="+Qty;
xmlHttp.onreadystatechange=quantityChangePrice;
xmlHttp.open("GET",url,true);
xmlHttp.send(null);
}

function quantityChangePrice() 
{ 
if (xmlHttp.readyState==4)
{ 
document.getElementById("quote").innerHTML=xmlHttp.responseText;

}
}

function ironsetPrice(ClubType, Make, Model, ShaftType, Condition, Qty, MakeUp)
{ 
xmlHttp=GetXmlHttpObject();
if (xmlHttp==null)
  {
  alert ("Sorry, your browser does not support this website. Your browser needs to be upgraded to newer version.");
  return;
  } 
var url="includes/getPriceViaMakeUp.php";
url=url+"?ClubType="+ClubType;
url=url+"&Make="+Make;
url=url+"&Model="+Model;
url=url+"&ShaftType="+ShaftType;
url=url+"&Condition="+Condition;
url=url+"&Qty="+Qty;
url=url+"&MakeUp="+MakeUp;
xmlHttp.onreadystatechange=ironsetChangePrice;
xmlHttp.open("GET",url,true);
xmlHttp.send(null);
}

function ironsetChangePrice() 
{ 
if (xmlHttp.readyState==4)
{ 
document.getElementById("quote").innerHTML=xmlHttp.responseText;

}
} 
```

# objective-c - 如何访问 textLabel 框架

> ID：11993162
> 
> 赞同：-1
> 
> 时间：2012-08-16T18:21:53.507
> 
> 标签：objective-c, ios, uitableview

我正在尝试检查 TableViewCell 的 textLabel 框架的位置。（最终我会想检查一个水龙头是否在这个框架内）。

```
MyCell *c = [self tableView:self.tableView cellForRowAtIndexPath:indexPath];
NSLog(@"%@ is in rect: %@ ", c.textLabel.text, NSStringFromCGRect(c.textLabel.frame)); 
```

这给了我这样的日志：

> 984943658 是正确的：{{0, 0}, {0, 0}}

名称部分工作正常（文本是那个数字），但为什么它给我的框架是 0？我可以在屏幕上看到文字，所以它必须在一个框架中 - 为什么我看不到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:04:39.900

您调用`tableView:cellForRowAtIndexPath:`表视图数据源委托的方法。这将创建一个新的表格视图单元格。

你可能想打电话

```
[self.tableView cellForRowAtIndexPath:indexPath]; 
```

它返回索引路径处的单元格（如果它是可见的）。

# asp-classic - 服务器经典asp的文件路径

> ID：11993165
> 
> 赞同：1
> 
> 时间：2012-08-16T18:22:14.567
> 
> 标签：asp-classic, iis-7.5, filepath

```
<%
virtPath = "\\mnbv00ww7044832\central engineer\OH\OSP Engineering\ATHN\2011"
''#virtPath = "C:\central engineer\OH\OSP Engineering\ATHN\2011"
dim fs
set fs=Server.CreateObject("Scripting.FileSystemObject")
if fs.FolderExists(virtPath) then
  response.write(virtPath & " exits !!!")   
else
  response.write(virtPath & "does not exist")
end if
set fs=nothing
%> 
```

根据此代码，当我将路径指定为 C:... 时，该文件夹存在，但是当我尝试通过计算机名称访问该文件夹时，它表明该文件夹不存在。我几乎尝试了我能想到的所有方法，但由于某种原因我找不到解决方案。基本上我需要访问另一台计算机上的文件夹。

谢谢尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:17:04.840

首先，不清楚您是否理解不能简单地将“\mnbv00ww7044832”替换为“c:”。但是，假设您实际上在“中央工程师”文件夹中创建了一个名为“中央工程师”的网络文件共享。

您需要确保用于访问共享的用户安全令牌不仅可以访问文件夹，还可以访问共享。

# iphone - NSNotification 观察者开销

> ID：11993167
> 
> 赞同：1
> 
> 时间：2012-08-16T18:22:20.437
> 
> 标签：iphone, ios5, nsnotificationcenter

只是想知道，有没有人有一次激活大量 NSNotification 观察者的经验？

观察者的开销是多少？例如，一次运行 50 或 100 或更多的观察者是否合理？

我有一个应用程序，它显示来自数据库的媒体滚动列表，我想将 NSNotificationCenter 实现为一种可扩展的方法来监听各个媒体片段并将它们分配给正确的 UIView

干杯，道格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:18:46.517

如果在后台处理通知，则不会产生开销。如果您在一个线程中处理 NSNotification，那么任何一个观察者都可能对其处理不当，这将导致线程阻塞。如果该线程恰好是主线程（在您的情况下是），则应用程序将冻结。

这取决于处理通知的方式。发送通知不是开销，它们只是 50 -100 次方法调用，就像任何其他方法一样。（我的应用中有 5000 种方法）。问题在于它的处理方式。如果每个观察者长时间阻塞通知，则无能为力。我会建议使用 NSNotification 队列而不是[NSNotification 队列](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationQueue_Class/Reference/Reference.html#//apple_ref/occ/cl/NSNotificationQueue)

如果时间允许，我还建议参考[阅读苹果关于对象通信的文章。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:26:02.300

我将在这个问题上听取 J2theC 的建议。

我目前正在改变设计模式以使用委托方法来防止任何冻结..

感谢您的反馈！

# php - 微软动态 crm 2011 和 php

> ID：11993169
> 
> 赞同：0
> 
> 时间：2012-08-16T18:22:25.113
> 
> 标签：php, dynamics-crm, dynamics-crm-2011

我被分配了一项全新的任务，我不知道从哪里开始（好吧，我当然是从这里开始的，当然是谷歌）基本上我需要从我的网站（网络表单）发送联系信息，并将数据插入到微软的潜在客户联系人信息中动态CRM 2011。

有谁知道如何使用 PHP 连接？我听说使用 nusoap PHP 库是可能的，但首先我想听取你们所有人的建议，任何想法，链接帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:25:07.980

您最好的选择是创建一个真正轻量级的 .net Web 服务来与之交互。如果您想使用更多 PHP/CRM 2011 交互，从长远来看，这将为您提供最大的灵活性。

或者，这适用于本地环境： http: [//phpmscrm.codeplex.com/](http://phpmscrm.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:22:24.443

我也遇到了同样的情况，并且花费了很多资源。主要问题是 MS Dynamics CRM 2011 根据 CRM 系统的部署方法使用不同的身份验证逻辑。

我找到的解决方案如下：

1.  承诺：

    *   [Paul 的回答中的PHP MSCRM](http://phpmscrm.codeplex.com/)运行良好 [已测试]。
    *   [php-动态-crm-2011](http://code.google.com/p/php-dynamics-crm-2011/)
2.  在线客户关系管理：

    *   [PHP-Dynamics-Online-CRM-2011-SOAP-Class](https://github.com/Ben-Speakman/PHP-Dynamics-Online-CRM-2011-SOAP-Class)是在线 CRM 的选项之一。
    *   [PHP2CRMOnline](http://www.microsoft.com/en-us/download/details.aspx?id=23416)是 Dynamics CRM 2011 开发人员培训工具包的示例资源。您可以从中找到它`<extract path>/Labs/CRMOnlinefromPHP`。
3.  面向 Internet 的部署 (IFD)：

    *   这种身份验证方法的解决方案很难找到。以下文章可能会为您提供有关此问题的线索。
        [使用 IFD 身份验证从 PHP 连接到 Microsoft Dynamics Crm 4.0 Web 服务](http://www.zenithies.org/articles/1/connect-to-microsoft-dynamics-crm-4-0-web-service-from-php-using-ifd-authentication.html)
    *   php-dynamics-crm-2011 也在考虑同样的[问题](http://code.google.com/p/php-dynamics-crm-2011/issues/detail?id=2)，但仍然不适用于我们托管的 CRM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:55:26.650

我很久以前也有过同样的情况。我需要的信息保存在 MySQL 数据库中。对我来说，解决方案是定期轮询该数据库。如果没有可用的数据库，我建议您在（SQLite 是轻量级且非常有用）上创建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T21:38:55.933

我在这里创建了一个基本库来连接到 Dynamics 2011 的在线版本：

[https://github.com/Ben-Speakman/PHP-Dynamics-Online-CRM-2011-SOAP-Class](https://github.com/Ben-Speakman/PHP-Dynamics-Online-CRM-2011-SOAP-Class)

# multithreading - 实体框架 4.3 和线程

> ID：11993170
> 
> 赞同：1
> 
> 时间：2012-08-16T18:22:25.767
> 
> 标签：multithreading, entity-framework, entity-framework-4, entity-framework-4.1

在线程中的 Entity Framework 4.3 中运行查询时出现以下错误。

```
The ObjectContext instance has been disposed and can no longer be used for operations that require a connection. 
```

下面是我的线程开始的地方，它在`var item = _gamesRepository.Get(gameIncludes, q => q.Id == gameId);`. 我做错了什么还是应该使用不同的方法？

```
public void ProcessGame(int gameId)
        {
            new Thread(() =>
            {
                Expression<Func<Game, object>>[] gameIncludes = {
                                                                q => q.DivisionGameTeamResults,
                                                                q => q.DivisionGameTeamResults.Select(g => g.DivisionBracketGameParticipant),
                                                                q => q.DivisionGameTeamResults.Select(g => g.DivisionTeamPoolGame),
                                                                q => q.DivisionGameTeamResults.Select(g => g.DivisionTeamPoolGame.DivisionTeamPool),
                                                                e => e.DivisionGameTeamResults.Select(q => q.DivisionBracketGameParticipant.DivisionBracketGame.DivisionBracketGameParticipants.Select(t => t.DivisionBracketGameParticipantTeam.DivisionTeam.Team)),
                                                                e => e.DivisionGameTeamResults.Select(q => q.DivisionBracketGameParticipant.DivisionBracketGame.DivisionLoserBracketGameParticipants.Select(d => d.DivisionBracketGameParticipantPool.DivisionPool)),
                                                                e => e.DivisionGameTeamResults.Select(q => q.DivisionBracketGameParticipant.DivisionBracketGame.DivisionLoserBracketGameParticipants.Select(d => d.DivisionBracketGameParticipantTeamPool.DivisionTeamPool.DivisionTeam)),
                                                                q => q.DivisionGameTeamResults.Select(d => d.DivisionTeamPoolGame.DivisionTeamPool.DivisionPool.Division.Event.Members),
                                                                q => q.DivisionGameTeamResults.Select(d => d.DivisionBracketGameParticipant.DivisionBracketGame.BracketPart.DivisionBracketPart.DivisionBracket.Division.Event.Members)
                                                            };
                var item = _gamesRepository.Get(gameIncludes, q => q.Id == gameId);

                if (item != null)
                {
                    if (item.DivisionGameTeamResults.All(d => d.DivisionTeamPoolGame != null))
                    {
                        // Pool Game
                        _divisionBracketsService.ProcessPoolGame(item);
                    }
                    else if (item.DivisionGameTeamResults.All(d => d.DivisionBracketGameParticipant != null))
                    {
                        // Bracket Game
                        _divisionBracketsService.ProcessBracketGame(item);
                    }

                    UnitOfWork.Commit();
                }

            }).Start();
        } 
```

**更新**：

我进行了必要的更改来解决该问题。

```
var gamesRepository = DependencyResolver.Current.GetService<IGamesRepository>();
var divisionBracketsService = DependencyResolver.Current.GetService<IDivisionBracketsService>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:00:31.810

存储库和工作单元应该归您的线程所有，原因有两个：

*   EF 不是线程安全的 - 在线程之间共享上下文可能会导致您错误地认为您可以在同一个上下文实例上执行并发操作，但您通常不能。这在 EF6 中可能会发生变化，其中`async`将实施支持，但当前版本仅用于单线程处理。
*   如果您在线程之间共享上下文，则必须确保拥有该上下文的线程不会在依赖于该上下文的任何其他线程完成其处理之前释放该上下文 - 这是您当前的问题。这意味着您的调用线程应该等待您的处理线程完成。

# mysql - 删除 MYSQL 中非常非常相似的行

> ID：11993171
> 
> 赞同：0
> 
> 时间：2012-08-16T18:22:28.893
> 
> 标签：mysql, sql

在 PHPMYAdmin 中，我正在运行一个网络爬虫。网络爬虫偶尔会获取相同的网址。在网络爬虫中，它已经索引了数千个链接，我不想要重复的链接。有没有办法删除 SQL 中的相似行（唯一的区别是 id 字段）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:38:09.190

`DELETE`除了具有最大 id 的 URL（最新）之外，您可以使用所有 URL：

```
DELETE    a 
FROM      tbl a
LEFT JOIN (
          SELECT   MAX(id) AS id 
          FROM     tbl 
          GROUP BY url
          ) b ON a.id = b.id
WHERE     b.id IS NULL 
```

完成此操作后，最好在 url 字段上设置唯一约束：

```
ALTER TABLE tbl ADD UNIQUE idx_unique_url (url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:35:28.223

如果你的表被命名`the_table`并且它的字段是`id`（一个唯一的字段）和`url`，那么你可以写：

```
DELETE
  FROM the_table
 WHERE id NOT IN
        ( SELECT *
            FROM ( SELECT MIN(id)
                     FROM the_table
                    GROUP BY url
                 ) t
        )
; 
```

（如果您还有其他字段，并且只想删除除 之外的*所有*字段都相同的行`id`，那么只需将这些字段与`GROUP BY`一起添加到子句中`url`。）

# html - 使 UIWebView 不要像这样破坏单词

> ID：11993172
> 
> 赞同：0
> 
> 时间：2012-08-16T18:22:31.170
> 
> 标签：html, uiwebview, mobile-safari, line-breaks, ios

我有一个 UIWebView，它的内容是从本地 HTML 文件加载的。它包含这样的词：`abc}defg`. UIWebView 可能会将其“自动连字”成 2 行：

```
blah blah blah abc}
defg. 
```

有没有办法定制它只用空格换行？

内置的 Safari 浏览器 (iOS 5.1.1) 具有相同的行为。`abc}defg`如有必要，它也会分成2 行。

类似`<nobr>`这些词的标签。（标签本身需要做大量的替换，大大降低了性能。）

# html - 将下拉列表更新到 Telerik

> ID：11993175
> 
> 赞同：0
> 
> 时间：2012-08-16T18:22:41.427
> 
> 标签：html, asp.net-mvc, telerik, telerik-mvc

我有一个带有几个下拉列表的表单，如下所示：

```
<table>
            <tr>
                <th>
                    Student Number
                </th>
                <td>
                    <input type="text" id="StudentNumber" />
                </td>
            </tr>
            <tr>
                <th>
                    Student Type
                </th>
                <td>
                    <select id="StudentType">
                        <option value="Select">Select</option>
                        <option value="Freshman">Freshman</option>
                        <option value="Sophomore">Sophomore</option>
                        <option value="Junior">Junior</option>
                        <option value="Senior">Senior</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>
                    Status
                </th>
                <td>
                    <select id="Status">
                        <option value="Select">Select</option>
                        <option value="Enrolled">Enrolled</option>
                        <option value="Dropped">Dropped</option>
                        <option value="Probation">Probation</option>
                        <option value="Suspended">Suspended</option>
                    </select>
                </td>
            </tr>
</table> 
```

我想将 HTML 下拉列表转换为 Telerik 下拉列表。将控件转换为 Telerik 需要什么？这是我第一次使用 Telerik。任何例子都会很有帮助

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:51:09.643

如果您只想使用问题中的静态数据，可以这样做：

```
@(Html.Telerik().DropDownList()
  .Name("StudentType")
  .Items(items =>
    {
      items.Add().Text("Select").Value("Select");
      items.Add().Text("Freshman").Value("Freshman");
      items.Add().Text("Sophmore").Value("Sophmore");
      items.Add().Text("Junior").Value("Junior");
      items.Add().Text("Senior").Value("Senior");
    })
) 
```

有关使用动态数据的演示，请参阅[Telerik 的组合框/下拉演示](http://demos.telerik.com/aspnet-mvc/razor/combobox)。

# php - Facebook 获取我的活动

> ID：11993180
> 
> 赞同：1
> 
> 时间：2012-08-16T18:22:51.590
> 
> 标签：php, events, facebook-graph-api

我正在尝试将我被邀请（回复而不是回复）的 Facebook 事件存储到我的个人数据库中。

我已经创建了一个 facebook 应用程序，并且正在使用带有 PHP SDK 的 facebook API。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:11:20.867

事件可以通过图形 api 访问，其 url 如下：

```
https://graph.facebook.com/<user_id>/events?access_token=<user_access_token>

```

要完成这项工作，您必须请求`user_events` [许可](http://developers.facebook.com/docs/authentication/permissions/)。[有关文档](http://developers.facebook.com/docs/reference/api/event/)中图形 api 中的事件对象的更多信息。

# php - 使用 jquery Validation 对字段名称添加验证

> ID：11993183
> 
> 赞同：1
> 
> 时间：2012-08-16T18:23:11.470
> 
> 标签：php, javascript, jquery, validation, jquery-plugins

我有一个由带有 for/loop 的 php 脚本动态构建的表单：

```
<form id="formDay">
    {loop="$elenco"}
        <input type="text" name="day[{$value.day}][date]">
    {/loop}
</form> 
```

我尝试以这种方式验证此表格

```
$('#formDay').validate({
    rules: {
        "input[name^='day']": {
            required: true,
            date: true
         }
    }
}); 
```

但不起作用，因为它找不到以“day”开头的字段。是否可以使用此插件（http://docs.jquery.com/Plugins/Validation）解决此问题？

更新1：对不起，我错了：我想写“day”而不是“giornata”；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:52:54.843

我相信您只需在您的 php 代码中添加“所需日期”类即可。验证插件也可以这样工作！

```
<form id="formDay">
    {loop="$elenco"}
        <input type="text" class="required date" name="day[{$value.day}][date]">
    {/loop}
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:51:24.887

```
$("input[name^=test]").each(function() {
    test1 = $(this).attr('name');
    console.log(test1);
}); 
```

# android - 返回需要很长时间

> ID：11993197
> 
> 赞同：1
> 
> 时间：2012-08-16T18:23:50.950
> 
> 标签：android, performance, audio-recording

在子活动中，我使用 MediaRecorder 录制了一些音频，并有两个按钮：第一个按钮将开始录制，第二个按钮将返回其父活动。但是，每次我点击返回按钮时，都需要很长时间才能返回到主要活动的视图。我在返回按钮回调中的代码是：

```
public void onClick(View arg0) {        
        if (arg0.getId() == R.id.startRecord) 
        {
           StartRecording();
        } 

        else if (arg0.getId() == R.id.goBack) 
       {
       if(mediaRecorder!=null)
           {
             mediaRecorder.stop();
             mediaRecorder.release();
             mediaRecorder = null;
           }
       this.finish();

       }
   } 
```

父活动的`onCreate()`方法只启动几个按钮并为它们设置监听器方法。我真的不明白为什么回去行动会花很长时间。一个值得一提的现象是，如果我不先录制，而是先点击返回按钮，它会很快返回到父活动。只有在我录制了一些音频后才会出现较长的响应时间。我确实上传了录制的音频，但是我将上传放在了一项`AsyncTask`任务中，上传工作完成后我可以获得反馈。在我看到反馈后，甚至等待一段时间后，返回按钮仍然需要很长时间才能让我回到主要活动。有人对此有建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:56:17.633

您可以覆盖后退按钮，尽管从我所看到的情况来看，似乎很多开发人员对这个想法并不友好。

```
@Override
public void onBackPressed() {
   mediaRecorder.stop();
   mediaRecorder.release();
   mediaRecorder.reset();
   mediaRecorder = null;
} 
```

看看这是否适合你。

* * *

更好的是，这样的东西可能更有用，这样您就可以轻松地调用该`stop()`方法：

```
public void onClick(View arg0) {        
    if (arg0.getId() == R.id.startRecord) {
        StartRecording();
    } else if (arg0.getId() == R.id.goBack) {
        if(mediaRecorder!=null) {
        stopRecording();
    }
    this.finish();
}

public void stopRecording() throws IOException {
    mediaRecorder.stop();
    mediaRecorder.release();
    mediaRecorder.reset();
    mediaRecorder = null;
}

@Override
public void onBackPressed() {
   stopRecording();
} 
```

# android - 从 Android ImageButton 中删除阴影

> ID：11993198
> 
> 赞同：-1
> 
> 时间：2012-08-16T18:23:50.653
> 
> 标签：android, button, shadow

如何从 Android 中的 ImageButton 中删除阴影？

包含影子的底层资源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:52:06.033

阴影根本不在 ImageButton 上，它是在我在 Eclipse 中创建图标集时添加到图像本身的。通过重新创建没有形状的图标集，阴影被消除了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:27:01.657

尝试将透明颜色设置为 ImageButton 的 android:shadowColor 属性。

# jquery - AJAX JQuery 请求不起作用

> ID：11993200
> 
> 赞同：2
> 
> 时间：2012-08-16T18:23:55.240
> 
> 标签：jquery, html, ajax

我正在尝试通过 JQuery 发送 AJAX 请求。

这是我的 JQuery 代码：

```
$(document).ready(function() {
    $("#login").submit(loginh);

    function loginh() {
        console.log("Sending request");
        var dat = {
            "ucCustomer": {
                "ucLoginRequest": {
                    "customerId": "8a6a7d82392bdaa701392bdabb3a0013",
                    "userName": "0.34705725672258025@mars.com",
                    "password": "23456"
                }
            }
        };
        console.log(JSON.stringify(dat));
        var d = JSON.stringify(dat);

        $.ajax({
            headers: {
                "Content-Type": "application/json",
                "X-Message-Sending-PartnerId": "UNICREDIT",
                "X-Message-Type": "ucCustomerLoginRequest",
                "X-App-UserId": "UNICREDIT",
                "X-App-DeviceFingerPrint": "abc"
            },
            type: "POST",
            url: "http://localhost:8010/UniCreditMobileService/services/ucms/customer",
            data: d,
            success: function(data) {
                alert(data);
                console.log("success: " + data);
            }
        });
    }
}); 
```

我在 java 中编写了一个 JUnit 测试用例，这个请求工作正常。同样，我尝试使用 chrome 浏览器的 Dev-HTTP 插件发送请求，它工作正常。但是，我的 JQuery 代码不起作用。

当我启动 html 页面时没有任何反应。我没有回复。我正在使用 Firebug 控制台检查从服务器收到的响应。

请帮我解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:25:51.690

试试这个：

```
function loginh(event) {
  event.preventDefault();

  // all your codes
} 
```

其中，`event`是按事件传递给`loginh`函数的参数`submit`，这***[`.preventDefault()`](http://api.jquery.com/event.preventDefault)***将*停止表单的默认提交行为*，从而停止 AJAX 提交。

# python - 字符串比较时忽略大小写

> ID：11993206
> 
> 赞同：9
> 
> 时间：2012-08-16T18:24:06.487
> 
> 标签：python, equals

如果我有两个变量，a 和 b，它们可以是整数、浮点数或字符串。

`True`如果它们相等，我想返回（如果是字符串，则忽略大小写）。

尽可能 Pythonic。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T18:28:15.783

这是我能想到的最pythonic。请求宽恕比请求许可更好：

```
>>> def iequal(a, b):
...    try:
...       return a.upper() == b.upper()
...    except AttributeError:
...       return a == b
... 
>>> 
>>> iequal(2, 2)
True
>>> iequal(4, 2)
False
>>> iequal("joe", "Joe")
True
>>> iequal("joe", "Joel")
False 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T18:32:30.160

这个怎么样，没有isinstance（皱眉）：

```
def equal(a, b):
    try:
        return a.lower() == b.lower()
    except AttributeError:
        return a == b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-17T13:31:38.240

```
>>> def equals_ignore_case(a,b):
...   return a.upper() == b.upper()
...
>>> equals_ignore_case("hello","Hello")
True 
```

# c# - 如何用 SQL 表填充 DataTable

> ID：11993211
> 
> 赞同：14
> 
> 时间：2012-08-16T18:24:36.740
> 
> 标签：c#, .net, sql, datatable

我目前正在我的 Page_Load 中使用以下代码创建和读取 DataTable

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["AllFeatures1"] == null)
    {
        Session["AllFeatures1"] = GetData();
    }
    table = (DataTable)Session["AllFeatures1"];
    DayPilotCalendar1.DataSource = Session["AllFeatures1"];
    DayPilotNavigator1.DataSource = Session["AllFeatures1"];

    if (!IsPostBack)
    {
        DataBind();
        DayPilotCalendar1.UpdateWithMessage("Welcome!");
    }

    if (User.Identity.Name != "")
    {
        Panel1.Visible = true;
    }
} 
```

我想知道如何转换此代码以便从 SQL 查询中读取？我正在试验下面的代码，但我不确定如何连接它们，以便我的页面加载中的数据表填充下面的 SQL 命令。

```
SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["BarManConnectionString"].ConnectionString);
conn.Open();
string query = "SELECT * FROM [EventOne]";

SqlCommand cmd = new SqlCommand(query, conn);

DataTable t1 = new DataTable();
using (SqlDataAdapter a = new SqlDataAdapter(cmd))
{
    a.Fill(t1);
} 
```

我被困在：

```
table = (DataTable)Session["AllFeatures1"]; 
```

我希望它是`t1 = (DataTable)Session["AllFeatures1];`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-16T18:33:41.403

是的`SqlDataReader`有效数据源`DataTable`。因此，您只需要这样做：

```
public DataTable GetData()
{
    SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["BarManConnectionString"].ConnectionString);
    conn.Open();
    string query = "SELECT * FROM [EventOne]";
    SqlCommand cmd = new SqlCommand(query, conn);

    DataTable dt = new DataTable();
    dt.Load(cmd.ExecuteReader());
    conn.Close();
    return dt;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-16T18:35:20.983

您可以创建返回给定 sql 查询的数据表的方法：

```
public DataTable GetDataTable()
{
SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["BarManConnectionString"].ConnectionString);
conn.Open();
string query = "SELECT * FROM [EventOne] ";

SqlCommand cmd = new SqlCommand(query, conn);

DataTable t1 = new DataTable();
using (SqlDataAdapter a = new SqlDataAdapter(cmd))
{
    a.Fill(t1);
}
return t1;
} 
```

现在可以这样使用：

```
table = GetDataTable(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-16T18:32:13.293

您需要修改该方法`GetData()`并在那里添加您的“实验”代码，然后返回`t1`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-24T03:56:39.957

上面的答案是正确的，但是如果您需要将参数传递到查询中，我想我会通过提供一种方法来扩展另一个答案。

`SqlDataAdapter`快速简单，但仅在您使用静态请求填充表格时才有效，即：没有参数的简单`SELECT`。

这是我的方法，但使用参数来控制我在表中需要的数据。我用它来填充一个`DropDownList`.

```
//populate the Programs dropdownlist according to the student's study year / preference
DropDownList ddlPrograms = (DropDownList)DetailsView1.FindControl("ddlPrograms");
if (ddlPrograms != null)
{
    using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ATCNTV1ConnectionString"].ConnectionString))
    {
        try
        {
            con.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = con;
            cmd.CommandText = "SELECT ProgramID, ProgramName FROM tblPrograms WHERE ProgramCatID > 0 AND ProgramStatusID = (CASE WHEN @StudyYearID = 'VPR' THEN 10 ELSE 7 END) AND ProgramID NOT IN (23,112,113) ORDER BY ProgramName";
            cmd.Parameters.Add("@StudyYearID", SqlDbType.Char).Value = "11";
            DataTable wsPrograms = new DataTable();
            wsPrograms.Load(cmd.ExecuteReader());

            //populate the Programs ddl list
            ddlPrograms.DataSource = wsPrograms;
            ddlPrograms.DataTextField = "ProgramName";
            ddlPrograms.DataValueField = "ProgramID";
            ddlPrograms.DataBind();
            ddlPrograms.Items.Insert(0, new ListItem("<Select Program>", "0"));
        }
        catch (Exception ex)
        {
            // Handle the error
        }
    }
} 
```

享受

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-15T08:51:32.397

您可以像下面的代码一样填写您的数据表。我还在运行时使用具有所有连接的预定义 XML 文件来获取连接。

```
 public static DataTable Execute_Query(string connection, string query)
    {
        Logger.Info("Execute Query has been called for connection " + connection);
        connection = "Data Source=" + Connections.run_singlevalue(connection, "server") + ";Initial Catalog=" + Connections.run_singlevalue(connection, "database") + ";User ID=" + Connections.run_singlevalue(connection, "username") + ";Password=" + Connections.run_singlevalue(connection, "password") + ";Connection Timeout=30;";
        DataTable dt = new DataTable();
        try
        {
            using (SqlConnection con = new SqlConnection(connection))
            {
                using (SqlCommand cmd = new SqlCommand(query, con))
                {
                    con.Open();
                    using (SqlDataAdapter da = new SqlDataAdapter(cmd))
                    {
                        da.SelectCommand.CommandTimeout = 1800;
                        da.Fill(dt);
                    }
                    con.Close();
                }
            }
            Logger.Info("Execute Query success");
            return dt;
        }
        catch (Exception ex)
        {
            Console.Write(ex.Message);
            return null;
        }
    } 
```

# mongodb - MongoDB“限制”运算符负值

> ID：11993212
> 
> 赞同：7
> 
> 时间：2012-08-16T18:24:38.043
> 
> 标签：mongodb

运算符的负值`limit`是什么意思？

[http://www.mongodb.org/display/DOCS/Aggregation+Framework+-+](http://www.mongodb.org/display/DOCS/Aggregation+Framework+-+) $limit

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Blimit%28%29%7D%7D](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Blimit%28%29%7D%7D)

当我这样做时，Mongo 会返回相同的文档，`limit(1)`或者`limit(-1)`??

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T20:36:21.577

如果限制数为负数，则通常数据库将返回该数量的结果并关闭游标 - 本质上是返回一批结果，并且无法获取该查询的进一步结果。

至于不太一般的情况，如果负限制值超过[批处理大小](http://docs.mongodb.org/manual/reference/method/cursor.batchSize/)（特别是最大批处理大小），则无论是否达到限制，都会返回批处理并关闭游标。因此，如果限制太高，则单个批处理规则胜过指定的限制。

如果限制为正，您可以让光标保持打开状态以接收更多结果并继续迭代，直到光标耗尽。

有关批处理和游标的更多信息，请查看此处：

[http://docs.mongodb.org/manual/core/cursors/#cursor-batches](http://docs.mongodb.org/manual/core/cursors/#cursor-batches) [http://docs.mongodb.org/manual/reference/method/cursor.limit/#negative-values](http://docs.mongodb.org/manual/reference/method/cursor.limit/#negative-values)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2019-11-07T01:08:05.513

您必须将限制的负值发送到 mongodb，例如：

```
 const options = {
        page: req.query.page || 0,
        limit: -20,
    }; 
```

# wpf - 使列表框中的单个项目可选

> ID：11993213
> 
> 赞同：1
> 
> 时间：2012-08-16T18:24:42.173
> 
> 标签：wpf

我有一个列表框，其中一些项目应该是可选择的，而其他项目不应该是可选择的。

列表框使用数据模板并具有由触发器启动的动画。我可以在 listboxItem 上设置一个附加属性来执行此操作，但我不知道如何在数据模板中执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:28:11.703

例如使用`ItemContainerStyle`绑定`IsEnabled`。

# javascript - 提交表单时如何防止iPad键盘死机？

> ID：11993222
> 
> 赞同：1
> 
> 时间：2012-08-16T18:25:24.283
> 
> 标签：javascript, jquery, forms, ipad, submit

我有一个奇怪的问题：

我有一个搜索，当我在 iPad 上提交时，它不会隐藏键盘，而是会暂停它，直到加载搜索结果。

因此，只要我在键盘上按 Enter，iPad 就会在打开键盘的情况下死机，只有当搜索完成时，键盘才会隐藏并且结果开始出现。

现在我的脚本正在监听`change`事件以触发功能，例如有问题的搜索表单，这可能是问题所在。

**问题：**
是否有一种适用于所有设备的代码方法来触发表单提交，所以我的键盘首先消失然后搜索开始？

感谢您的投入！

**编辑：**
我的按钮：

```
 <input type="text" value="" id="searchField" data-type="search" placeholder="Suche" class="ui-input-text ui-body-c"> 
```

我的脚本处理它：

```
$('#searchField').keypress(function(e){
     if(e.which == 13){

        $('#searchField').trigger('blur');
        loadMulti( "yes" );
        return false;
        }
    }); 
```

嗯。我想整个事情......不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:31:11.633

据我所知，ipad 键盘在模糊时会自动消失。没有发布代码，但我的猜测是您的脚本在查询完成后会变得模糊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:04:57.090

好的 ol`setTimout`节省了一天：

```
window.setTimeout(function(){
     loadMulti( "yes" );
     },10); 
```

似乎触发 Ajax 表单提交确实使整个页面停滞不前，因为我有我的模糊触发器以及我的加载微调器从内部激活`loadMulti`，这会触发我的 Ajax 表单提交。两者都没有出现，所以我最终想为什么不为所有设置设置超时，隐藏键盘然后触发该功能。

工作......即使有5毫秒。

# javascript - Node.js 应该通知哪个用户

> ID：11993223
> 
> 赞同：0
> 
> 时间：2012-08-16T18:25:34.633
> 
> 标签：javascript, mysql, node.js, real-time

我在我的网站上建立了一个通知系统。我有一些成员团体。当某个组的成员发布内容时，应通知同一组的其他成员。用户刷新页面时会出现通知。然而，世界正在实时运行。谷歌搜索这个问题向我推荐了 Node.js（不确定是最好的方法）。我现在可以：创建服务器，连接到数据库，查询数据库，使用 socket.io 向所有连接的客户端发送广泛的消息......
但到目前为止我无法做/理解的是指定哪些用户应该传递消息（通知）。
环顾四周，这种方式看起来是我想要的：

```
var socket = io.listen(server);
socket.on('connection', function(client) {
  client.on('message', function(msg) {
    broadcast(msg); // broadcast message to all clients
    // OR
    socket.clients[session_id].send(msg); // send message to one client
  });

  client.on('disconnect', function( ) {
    console.log('Client Disconnected.');
  });
}); 
```

不知道session_id是什么，和用户登录时创建的session_id一样吗？真的厌倦了寻找一些直接的解决方案，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:34:34.840

创建房间，多个客户端可以是多个房间的一部分，一个房间中的客户端可以广播给房间的所有其他成员。

假设您的消息中有一个房间名称和一个数据正文

```
socket.on('connection', function(client) {
    client.on('message', function(msg) {
        // broadcast message to all clients
        io.sockets.in(msg.room).emit(msg.data);
        // OR
        socket.clients[session_id].send(msg); // send message to one client
    });

    client.on('disconnect', function( ) {
        console.log('Client Disconnected.');
    });
}); 
```

[https://github.com/LearnBoost/socket.io](https://github.com/LearnBoost/socket.io) 这个应该有一些例子

[http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/](http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/) 这是一个很好的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:35:14.353

Socket.IO 超级好用。
在这里查看文档：[https ://github.com/learnboost/socket.io/](https://github.com/learnboost/socket.io/)

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.join('justin bieber fans');
  socket.broadcast.to('justin bieber fans').emit('new fan');
  io.sockets.in('rammstein fans').emit('new non-fan');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:28:54.703

这是来自 socket.io 文档的示例：

**存储与客户端关联的数据**

有时有必要存储与会话期间所需的客户端关联的数据。

**服务器端**

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.on('set nickname', function (name) {
    socket.set('nickname', name, function () { socket.emit('ready'); });
  });

  socket.on('msg', function () {
    socket.get('nickname', function (err, name) {
      console.log('Chat message by ', name);
    });
  });
}); 
```

**客户端**

```
<script>
  var socket = io.connect('http://localhost');

  socket.on('connect', function () {
    socket.emit('set nickname', prompt('What is your nickname?'));
    socket.on('ready', function () {
      console.log('Connected !');
      socket.emit('msg', prompt('What is your message?'));
    });
  });
</script> 
```

# html - 按钮中的换行符？

> ID：11993224
> 
> 赞同：0
> 
> 时间：2012-08-16T18:25:40.223
> 
> 标签：html, css, web

我有一个使用锚标签和 display:block 制作的按钮；（所以整个按钮都在 cickable 中）

我想在按钮中添加一个换行符（出于造型目的），并通过 display:block; 财产。问题是显示按钮的部分：块；属性被分配变得不可点击。

这是我的代码：

**HTML**

```
<a href="#">
   <span class="top">Connected To</span>
   <span class="bottom">Relationships</span>
</a> 
```

**CSS**

```
 a{
      display:block;
      padding:5px 20px;
    }
    .top{
      display:block;
      font-size:15px;
    }
    .bottom{
      font-size:25px;
      font-weight:bold;
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:29:15.947

尽管这段代码可能比它需要的更复杂，[但它工作得很好](http://jsfiddle.net/z49c7/)。也许您的问题出在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:19:38.377

是否有任何奇怪的行高设置可以应用于 cufon 样式？

# javascript - 使用 if - JS 将文件类型附加到 url

> ID：11993227
> 
> 赞同：0
> 
> 时间：2012-08-16T18:26:03.660
> 
> 标签：javascript, if-statement, getjson, jpeg, file-type

我正在从 Reddit API 中提取并使用以下内容填充画廊：

```
$.getJSON("http://www.reddit.com/r/pics.json?jsonp=?",
function(data) {

    var imageurl1 = data.data.children[0].data.url;
    var imagecaption1 = data.data.children[0].data.title;;
    var commentlink1 = "http://www.reddit.com" + data.data.children[0].data.permalink;} 
```

（然后我将它输入一个数组）

90% 的永久链接是 imgur.com jpg ......所以我可以将图像直接输入到我放置它的位置。但是，有时它只是普通的 url，最后没有 jpg 位，会破坏图像。

仅当 .jpg 扩展名不存在时，如何添加它？

即 IF permalink = imgur.com/abc.jpg，什么都不做，但如果 permalink = imgur.com/abc 让它成为 imgur.com/abc.jpeg ？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:28:50.953

```
if(!imageurl1.match(/\.jpg$/))
  imageurl1 += '.jpg' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:29:08.130

另一种方法，不区分大小写，并且它还寻找`.jpeg`扩展名：

```
if( (/\.jpe?g$/i).test(imageurl1) === false )
    imageurl1 += '.jpg' 
```

# git - 无法执行 git tf 命令

> ID：11993228
> 
> 赞同：4
> 
> 时间：2012-08-16T18:26:03.970
> 
> 标签：git, tfs, git-tf

我刚刚设置了 git-tf，但我遇到了一个问题。

这是我收到的错误：

```
> git tf help
line 23: exec: cmd: not found
fatal: 'tf' appears to be a git command, but we were not
able to execute it. Maybe git-tf is broken? 
```

这是命令提示符的屏幕截图：

![git-tf 错误](../Images/a4951c986a48b96ae2d8b1cd43ec561d.png)

我按照包含`Git-TF_GettingStarted.html`文件中显示的安装说明进行操作，但似乎无法使其正常工作。我做错了什么？

**编辑** 我还安装了 cygwin 并在我的 PATH 上。也许这会给 git-tf 造成混乱？（从 PATH 中删除 cygwin 无济于事）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T18:57:31.247

这看起来像是`git-tf`Windows 上 sh 脚本中的一个错误，我们假设 %WINDIR% 在您的路径中，而我们应该在`cmd.exe`尝试启动它时提供完整路径。

在我们为此发布修复程序之前，您可以执行以下两项操作之一：

1.  添加`%WINDIR%\system32`到您的路径。

2.  编辑`git-tf`和更改第 23 行。而不是简单`exec`的 'ing `cmd`，适当的行（在 mingw32 中）应该是：

    ```
    exec "$WINDIR/system32/cmd.exe" //C "$0.cmd" "$@" 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:00:48.697

%COMSPEC% 中的 "\" 会与 windows cmdline 或 mingw32 下的 "git tf" 混淆

```
if [ "$PLATFORM" = "cygwin" ]; then
    COMSPEC_U=`cygpath -u "$COMSPEC"`
    GITTF_CMD=`cygpath -w "$0.cmd"`
    exec "$COMSPEC_U" /C "$GITTF_CMD" "$@"
elif [ "$PLATFORM" = "mingw32" ]; then
#   exec "$COMSPEC" //C git-tf.cmd "$@"
    exec "C:/WINDOWS/system32/cmd.exe" //C git-tf.cmd "$@"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:11:20.643

我不知道是我安装的 Cygwin 版本还是什么，但我遇到了同样的问题，上述解决方案不起作用。问题在于 $0 替换具有 unix 样式路径，并且 cmd.exe 被阻塞。

为了修复它，我更改了这一行：

```
exec $COMSPEC //C "$0.cmd" "$@"
```

对此：

```
exec $(cygpath $COMSPEC) /C $(cygpath --windows "$0.cmd") "$@"
```

这可能只适用于 Cygwin。我从未使用过 MinGW32，我不确定它的 cygpath 实用程序是否完全一样。

# azure - 工人角色在机器上翻译成什么

> ID：11993229
> 
> 赞同：0
> 
> 时间：2012-08-16T18:26:06.463
> 
> 标签：azure, azure-worker-roles

我很难找到有关 Worker 角色实际上是什么的信息。例如，Web 角色是一个在 IIS 中自动部署和配置的 asp.net Web 应用程序。您可以在 IIS 中查看应用程序文件。我在哪里可以看到 Worker 角色文件？是windows服务吗？还有谁在运行 Worker 角色进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:32:24.610

辅助角色的代码通常是带有`Run`方法的 .NET 程序集。VM 上的进程调用您的`Run`方法并期望它永远运行（永不返回）。您可以在文件夹中看到 VM 上的二进制`\approot`文件，通常在`e:`驱动器上。

顺便说一句，Web 角色具有相同的功能。如果您在 Visual Studio 中创建 Web 角色，您将看到`WebRole.cs`，它实现了与辅助角色相同的接口。不同之处在于，在 Web 角色中，您还将配置一个或多个网站，正如您所提到的，这些网站在 IIS 下配置和运行。

# javascript - 如何在 Maven 构建中跳过 JSLint 目标？

> ID：11993231
> 
> 赞同：0
> 
> 时间：2012-08-16T18:26:17.603
> 
> 标签：javascript, maven

我想使用 maven-javascript-plugin 设置一个 maven javascript 项目。到目前为止，这工作正常，但现在我在压缩版本中添加了 DOJO 工具包。当我开始构建过程时，DOJO 工具包没有通过 jslint 测试并且构建过程停止。

有人可以告诉我如何在构建中跳过 jslint 目标吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:07:20.910

您应该能够配置 jslint-plugin 并[使用 "jslint:jslint" 的 "excludes" 参数](http://mojo.codehaus.org/jslint-maven-plugin/jslint-mojo.html#excludes)。

您可能需要[完全指定 jslint 插件配置](http://mojo.codehaus.org/javascript-maven-tools/javascript-maven-plugin/usage.html)；我还没有证实这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T13:06:15.310

也许不太适合问题本身，但如果想完全禁用`jslint`，可以选择将其绑定到不存在的阶段：

```
<build>
    <pluginManagement>
        <!-- Disable jslint for all phases -->
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jslint-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-jslint</id>
                        <phase>process-sources-unbind</phase>
                    </execution>
                    <execution>
                        <id>default-test-jslint</id>
                        <phase>process-test-sources-unbind</phase>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

# php - 字符串和算术运算的 PHP 连接

> ID：11993240
> 
> 赞同：7
> 
> 时间：2012-08-16T18:27:25.527
> 
> 标签：php, programming-languages, weak-typing

不久前我开始学习 PHP，我遇到了这个问题：

```
<?php

$a = 1;
$b = 2;

echo "$a * $b  = " . $a * $b;
echo "<br />";

echo "$a / $b  = " . $a / $b;
echo "<br />";

echo "$a + $b  = " . $a + $b;
echo "<br />";

echo "$a - $b  = " . $a - $b;
echo "<br />"; 
```

我得到以下输出：

```
1 * 2 = 2
1 / 2 = 0.5
3
-1 
```

输出中的最后两行不是我所期望的。

为什么是这样？如何评估这些表达式？我正在努力更好地理解这种语言。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T18:33:44.917

发生这种情况是因为串联运算符的[优先级](http://php.net/manual/en/language.operators.precedence.php)高于加法或减法运算符，但乘法和除法的优先级高于串联。

所以，你真正在执行的是：

```
echo ("$a + $b  = " . $a) + $b;
echo ("$a - $b  = " . $a) - $b; 
```

在第一种情况下，它变成了这样：

```
"1 + 2 = 1" + $b 
```

哪个 PHP 尝试转换`"1 + 2 = 1"`为数字（因为[类型 juggling](http://php.net/manual/en/language.types.type-juggling.php)）并得到 1，将表达式转换为：

```
1 + 2 
```

这就是你得到 3 的原因。同样的逻辑可以应用于减法条件。

相反，如果您在计算周围加上括号，您将获得所需的输出。

```
echo "$a + $b  = " . ($a + $b);
echo "$a - $b  = " . ($a - $b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:33:51.160

连接优先于加法和减法，但不是乘法或除法。所以

```
echo "$a + $b  = " . $a + $b; 
```

相当于

```
echo ("$a + $b  = " . $a) + $b; 
```

PHP 忽略了第一部分，因为很难将其转换为数字，只剩下`+ $b`.

如果你使用括号，你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:36:41.920

好吧，您发现了非常奇怪的行为，但是:)

从算术运算符中，除法和乘法具有最高优先级，因此它们在连接之前被评估。

虽然添加和提取的优先级较低，所以首先评估左侧部分，然后添加/提取到右侧部分。但是 PHP 试图从字符串中提取数值，只有第一个字符是这样的，所以它用它来做。

# ruby - ruby 中的数据库连接池

> ID：11993241
> 
> 赞同：7
> 
> 时间：2012-08-16T18:27:25.833
> 
> 标签：ruby, sinatra

我刚开始使用 Ruby，我正在使用 Sinatra，但找不到在请求之间共享数据库连接的方法。

我来自 Java Web 开发，你必须做的基本事情之一就是汇集数据库连接，所以我确信 Ruby 中存在类似的东西，但我就是找不到。

ActiveRecord 和 DataMapper 提供此功能，但我不需要 ORM，只想进行常规 SQL 查询。

是否有针对 Sinatra 的特定方法或针对所有基于 Rack 的应用程序的通用方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:35:22.403

要保持连接，您只需要创建一个实例变量（无论如何，Sinatra 应用程序只是对象）或全局变量。或者为您管理连接的课程。我见过的大多数 Ruby 数据库库都是数据库适配器或只是客户端。

```
@db = Mysql2::Client.new #... 
```

或全局变量：

```
$db = Mysql2::Client.new #... 
```

连接池只是在应用程序的生命周期内跨多个线程/光纤共享少量连接的一种方式。据我所知，JVM Java 并不共享进程之间的连接。

但是，有一个通用[的 Ruby 连接池库](https://github.com/mperham/connection_pool)。

# ruby - .push 在数组中时出现意外的 tASSOC

> ID：11993245
> 
> 赞同：0
> 
> 时间：2012-08-16T18:27:44.780
> 
> 标签：ruby, arrays

当我在代码编辑器中输入下一行时，我收到了一个`Unexpected tASSOC error`. 据我了解，这是因为我正在使用`=>`运算符。

```
@inserts.push("'#{:userid=>userid}', '#{:name=>name}'") 
```

我想要的是`@inserts`该位置`[x]`包含例如`'001' , 'name'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:34:43.740

我认为您在滥用符号和哈希表示法。试试这条线：

```
@inserts.push("'#{userid}', '#{name}'") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:56:54.603

这不是有效的 Ruby，解析器给你一个错误。你的意思可能是：

```
@inserts.push(:userid => userid, :name => name) 
```

# jquery - 如何使用 jQuery UI 自动完成在带有按钮的下拉框中显示自定义数据（图像）（模拟组合框效果）

> ID：11993246
> 
> 赞同：0
> 
> 时间：2012-08-16T18:27:53.423
> 
> 标签：jquery, jquery-ui, combobox, jquery-autocomplete

我正在使用 jQuery UI 自动完成小部件并使用“自定义数据和显示”示例格式化输出以在下拉列表中包含图像及其名称。它工作得很好。我正在尝试模拟组合框效果，只要右侧有一个三角形按钮，它会下拉所有选项 - 包括图像。将这个 Combobox 模拟与一个按钮一起使用可以下拉每个项目的“值”......但是我如何让这个按钮下拉自定义数据 [“.data("autocomplete") 中的格式化输出。 _renderItem = function(ul, item)..."]?

这是我的代码：

```
 $(function() {

    function log( message ) {
    $( "<div/>" ).text( message ).prependTo( "#log" );
    $( "#log" ).scrollTop( 0 );
    }

    $.ajax({
        url: "order-prints.xml",
        dataType: "xml",
        success: function( xmlResponse ) {
            var mydata = $( "print", xmlResponse ).map(function() {
                return {
                    value: $( "name", this ).text(),
                    id: $( "id", this ).text(),
                    name: $( "name", this ).text(),
                    icon: $( "icon", this ).text()
                };
            }).get();

        var $myinput = $( "#project" ).autocomplete({
            source: mydata,
            minLength: 0,
            select: function( event, ui ) {
                log( ui.item ?
                    "SELECTED: " + ui.item.name + ", ID: " + ui.item.id + ", ICON: " + ui.item.icon :
                    "Nothing selected, input was " + this.value );
                $( ".project-icon" ).attr( "src", "folder/slideshow2/thumbs/" + ui.item.icon );
                $( "#project-id" ).val( ui.item.id );
            }

        })

//-- begin button to drop down all options  
        .addClass("ui-widget ui-widget-content ui-corner-left");

$("<button type='button'>&nbsp;</button>")                     
.attr("tabIndex", -1)                     
.attr("title", "Show All Items")                     
.insertAfter($myinput)                     
.button({                         
    icons: {                             
        primary: "ui-icon-triangle-1-s"                         
    },                         
    text: false                     
})                     
.removeClass("ui-corner-all")                     
.addClass("ui-corner-right ui-button-icon")                   
.click(function() {                         
   if ($myinput.autocomplete("widget").is(":visible")) {
    $myinput.autocomplete( "close" );
         return;                         
    }                                              
    $(this).blur();                                                 
    $myinput.autocomplete("search", "");                         
    $myinput.autocomplete.focus();                     
})
//-- end button to drop down all options

            .data( "autocomplete" )._renderItem = function( ul, item ) {
        var imgsrc = "folder/slideshow2/thumbs/";
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( "<a><div class='project-container'>" + item.name + ", " + item.id + "<img class='project-icon' src='" + imgsrc + item.icon + "'>" + "</div></a>" )
            .appendTo( ul );
    };

        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:30:14.727

我现在可以通过将“$($myinput)”添加到 _renderItem 来正常工作，如下所示：

```
$($myinput).data( "autocomplete" )._renderItem = function( ul, item ) {
        var imgsrc = "folder/slideshow2/thumbs/";
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( "<a><div class='project-container'>" + item.name + ", " + item.id + "<img class='project-icon' src='" + imgsrc + item.icon + "'>" + "</div></a>" )
            .appendTo( ul );
    }; 
```

# sql - SQL - 可能的动态 SQL 连接问题？

> ID：11993247
> 
> 赞同：0
> 
> 时间：2012-08-16T18:28:06.227
> 
> 标签：sql, dynamic, join, merge

我已经研究了几个小时的动态连接，并且在解决这个问题时遇到了问题。我将 XML 提要数据批量加载到临时 SQL 表中，然后从临时表中添加/更新生产表。但是，我也尝试使用条件逻辑在必要时保留数据。下面的代码基本上是对 Merge() 方法的复制，仅在 SQL Server 2008 及更高版本中可用（生产服务器为 2005）。具体来说，我需要在此查询中实现的条件逻辑是，如果临时表的 [eMail] 字段不为空，则更新生产表中的该字段。否则，不要更新生产服务器中的 [eMail] 字段（为了保存数据）。这是我尝试过的，由于语法不正确而无法工作：

```
UPDATE rt
SET rt.[AccountID] = tmp.[AccountID],
  rt.[CustNbr] = tmp.[CustNbr],
  rt.[ClientID] = tmp.[ClientID],
  rt.[ClientX] = tmp.[ClientX],
  rt.[CorpID] = tmp.[CorpID],
  rt.[fName] = tmp.[fName],
  rt.[lName] = tmp.[lName],
  rt.[Position] = tmp.[Position],
  rt.[eMail] = tmp.[eMail],
  rt.[ClientNotes] = tmp.[ClientNotes],
  rt.[DeptID] = tmp.[DeptID]
 FROM AccountClient rt
 IF(SELECT eMail FROM AccountClientTemp) <> ''
     INNER JOIN AccountClientTemp tmp
        ON  tmp.[fName] = rt.[fName]
        and tmp.[lName] = rt.[lName]
        --and tmp.[eMail] = rt.[eMail]
        and tmp.[Position] = rt.[Position]
        and tmp.[DeptID] = rt.[DeptID]
ELSE
    INNER JOIN AccountClientTemp tmp
        ON  tmp.[fName] = rt.[fName]
        and tmp.[lName] = rt.[lName]
        and tmp.[eMail] = rt.[eMail]
        and tmp.[Position] = rt.[Position]
        and tmp.[DeptID] = rt.[DeptID]
INSERT INTO AccountClient
        ([AccountID], [CustNbr], [ClientID], [CorpID], [fName], [lName], [Position],
         [eMail], [ClientNotes], [DeptID])
        SELECT  tmp.[AccountID], tmp.[CustNbr], tmp.[ClientID], tmp.[CorpID], tmp.[fName], tmp.[lName],
        tmp.[Position], tmp.[eMail], tmp.[ClientNotes], tmp.[DeptID]
        FROM AccountClientTemp tmp
        LEFT JOIN AccountClient rt
            ON tmp.[fName] = rt.[fName]
            and tmp.[lName] = rt.[lName]
            and tmp.[eMail] = rt.[eMail]
            and tmp.[Position] = rt.[Position]
        WHERE rt.[fName] IS NULL
         and rt.[lName] IS NULL
         and rt.[eMail] IS NULL
         and rt.[Position] IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:56:44.080

您不能在查询中间放置“if”语句。因此，您的更新应如下所示：

```
UPDATE rt
    SET rt.[AccountID] = tmp.[AccountID],
        rt.[CustNbr] = tmp.[CustNbr],
        rt.[ClientID] = tmp.[ClientID],
        rt.[ClientX] = tmp.[ClientX],
        rt.[CorpID] = tmp.[CorpID],
        rt.[fName] = tmp.[fName],
        rt.[lName] = tmp.[lName],
        rt.[Position] = tmp.[Position],
        rt.[eMail] = (case when tmp.[eMail] = '' then rt.eMail else tmp.eMail end),
        rt.[ClientNotes] = tmp.[ClientNotes],
        rt.[DeptID] = tmp.[DeptID]
    FROM AccountClient rt
         INNER JOIN AccountClientTemp tmp
         ON  tmp.[fName] = rt.[fName] and
             tmp.[lName] = rt.[lName] and
             (tmp.[eMail] = rt.[eMail] or tmp.eMail = '') and
             tmp.[Position] = rt.[Position] and
             tmp.[DeptID] = rt.[DeptID]; 
```

乍一看，INSERT 看起来不错。

# php - RSS 提要发布日期的正确格式是什么？

> ID：11993258
> 
> 赞同：42
> 
> 时间：2012-08-16T18:28:43.213
> 
> 标签：php, rss

我无法让我的 RSS 提要的日期正确运行。你知道展示它的正确日期是什么吗？

我将它存储在一个名为 creation_date 的字段中，格式如下：2012-08-14 10:17:12

然后我抓住它：

```
$pubDate = $article[creation_date]; 
```

然后我转换它：

```
$pubDate= date("Y-m-d", strtotime($pubDate)); 
```

然后在我的项目标签中放置它：

`<pubdate>'.date("l, F d, Y", strtotime($pubDate)).'</pubdate>`

有什么我没有看到的吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-07-29T08:43:55.500

PHP 日期函数已经有一种格式化 pubDate (RFC 2822) 兼容日期的方法：

```
date('r', $timestamp); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-23T00:30:41.633

解决了：

```
$pubDate = $article[creation_date]; 
$pubDate= date("D, d M Y H:i:s T", strtotime($pubDate)); 
```

然后在我的回显代码中：

```
 <pubDate>'.$pubDate.'</pubDate> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-04-07T07:22:01.700

请参阅[RSS 2.0 规范](http://validator.w3.org/feed/docs/rss2.html)`pubDate`中的定义：

> RSS 中的所有日期时间都符合[**RFC 822 的日期和时间规范**](http://www.w3.org/Protocols/rfc822/#z28)，但年份可以用两个字符或四个字符（首选四个）表示。

以下是有效 RFC822 日期时间的示例：

```
<pubDate>Wed, 02 Oct 2002 08:00:00 EST</pubDate>

<pubDate>Wed, 02 Oct 2002 13:00:00 GMT</pubDate>

<pubDate>Wed, 02 Oct 2002 15:00:00 +0200</pubDate> 
```

另请参阅有[问题的 RFC 822 日期时间值](http://validator.w3.org/feed/docs/warning/ProblematicalRFC822Date.html)。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-09T13:57:54.140

使用这种格式：`D, d M Y H:i:s O`. 见[http://php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

或者使用 DateTime 常量更容易使用：`DateTime::RSS`

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-11-20T19:12:35.807

Rss`pubDate`使用[RFC 2822 标准](https://www.ietf.org/rfc/rfc2822.txt)。`php`您可以通过调用[日期](http://php.net/manual/en/function.date.php)`r`函数的参数来实现这一点，即：

```
<?php
$pubDate= date('r', time());
echo "<pubDate>$pubDate</pubDate>";
# <pubDate>Thu, 20 Dec 2022 02:46:11 UTC</pubDate>
?> 
```

* * *

如果您更喜欢[DateTime](http://php.net/manual/en/class.datetime.php)类，请使用：

```
$pubDate = new DateTime();
echo $pubDate->format(DateTime::RSS); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-19T20:10:23.210

**`DateTime`**对象呢**（*PHP 5 >= 5.2.0*）**

```
\DateTime::createFromFormat(\DateTime::RSS, $RSSDate); // converting RSS date to object 
```

或者

```
date(\DateTime::RSS, $timestamp); // formatting timestamp to RSS time 
```

或两者

```
$dto = \DateTime::createFromFormat(\DateTime::RSS, $RSSDate);
date('d-M-Y H:i:s', $dto->getTimestamp()); // formatting RSS date to anything you want 
```

甚至更好

```
$dto = \DateTime::createFromFormat(\DateTime::RSS, $RSSDate);
$formattedDate = $dto->format('d-M-Y H:i:s'); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-04-20T11:08:05.030

虽然接受的答案`("D, d M Y H:i:s T")`在大多数情况下都按预期工作，但并非 100% 正确。在多语言情况下，此字符串可能会给出不符合 RFC 标准的非英文文本。要始终确保使用英文版本，请使用`"r"`.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-10-08T15:02:34.307

最简单的方法是使用 DATE_RSS 预定义常量（自 PHP 5.1.0 起可用）。

```
$pubDate = date(DATE_RSS, strtotime($pubDate)); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-12T06:05:53.793

我用过这样的：

```
$item->date = date('D, d M Y H:i:s GMT', strtotime($myBlogPublishedTime)); 
```

[我的 hp RSS 样本](http://www.matao.me/news/rss/rss.xml)

# android - 图库视图未显示更新的 SD 卡

> ID：11993261
> 
> 赞同：0
> 
> 时间：2012-08-16T18:28:50.143
> 
> 标签：android, android-gallery

我有一个画廊活动，在 onCreate 方法中设置图像的文件路径以显示如下：

```
 // Set up an array of the Thumbnail Image ID column we want
            String[] projection = {MediaStore.Images.Media._ID};
            // Create the cursor pointing to the SDCard
            cursor = managedQuery( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                    projection, // Which columns to return
                    MediaStore.Images.Media.DATA + " like ? ",
                    new String[] {"%LC/images%"},  
                    MediaStore.Images.Media._ID + " DESC");

            // Get the column index of the Thumbnails Image ID
            columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);

            ga.setAdapter(new GallAdapter(this,cursor,columnIndex));

public class GallAdapter extends BaseAdapter {
        public Cursor cursor;
        private int columnIndex;
        private Context context;
        int imageBackground;
        String url;
        Uri uri;
        int originalImageId;
        int imageID;
        int columnData;
        ViewGroup myp;
        ImageView d;

        public GallAdapter(Context ctx, Cursor cur, int cIn ) {
            context = ctx;
            columnIndex = cIn;

            cursor = cur;
        }

        @Override
        public int getCount() {

            return cursor.getCount();
        }

        @Override
        public Object getItem(int position) {

            return position;
        }

        @Override
        public long getItemId(int position) {

            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            myp = parent;
            View v;
            if(convertView ==null){
                v = LayoutInflater.from(context).inflate(R.layout.galitem, parent, false);
            }else{
                v = convertView;
            }

            ImageView photo = (ImageView) v.findViewById(R.id.imageView);
            ImageView border = (ImageView) v.findViewById(R.id.borderView);
            d = (ImageView) v.findViewById(R.id.delView);

            // Move cursor to current position
            cursor.moveToPosition(position);

            // Get the current value for the requested column
            imageID = cursor.getInt(columnIndex);
            // obtain the image URI
            uri = Uri.withAppendedPath( MediaStore.Images.Media.EXTERNAL_CONTENT_URI, Integer.toString(imageID) );
            url = uri.toString();
            // Set the content of the image based on the image URI
            originalImageId = Integer.parseInt(url.substring(url.lastIndexOf("/") + 1, url.length()));
            Bitmap b = MediaStore.Images.Thumbnails.getThumbnail(context.getContentResolver(),
                            originalImageId, MediaStore.Images.Thumbnails.MINI_KIND, null);
            photo.setImageBitmap(b);

            photo.setScaleType(ImageView.ScaleType.FIT_CENTER); 
            d.setTag(uri);
            d.setOnClickListener(new OnClickListener(){

                public void onClick(View v) {

                    String path = getRealPathFromURI((Uri) v.getTag());
                    alertBox("Warning!", "Are you sure you want to delete this photo?", path, v);

                }

            });

            return v;
        }

    } 
```

问题是它没有在画廊中显示最新的图像，有时它什么也不显示，或者有时它显示不再存在的旧图像

# actionscript-3 - 这是做什么的 var index_num:Number= 1; var numFrames:int = this.dances_mc.totalFrames; (AS3)

> ID：11993265
> 
> 赞同：0
> 
> 时间：2012-08-16T18:28:57.707
> 
> 标签：actionscript-3

我有一点问题......我正在尝试为我的朋友们做大学的 flash 项目.. 这实际上很容易，但我基本上不了解 AS3，因为我停止使用 flash 代替全职编码一些几年前。无论如何，它必须在明天早上，所以如果有人为我破解这段代码，我（和我可怜的朋友）将永远负债累累..

这条线有什么作用：

var numFrames:int = this.dances_mc.totalFrames;

在时间轴的第一帧有一个叫做 dances_mc 的符号，其中有 5 帧左右和一个停止功能。这些框架中的每一个都包含不同的文本和图像。有一个完整的演示，其中按钮导致文本和图像发生变化，并在最后循环。

文件中的 AS 如下所示：

```
trace("movie starts"+this.dances_mc.totalFrames);

var index_num:Number= 1;
var numFrames:int = this.dances_mc.totalFrames;

// Your code goes here

stop(); 
```

我需要编写一个事件处理程序，每次按下按钮时显示下一个舞蹈。然后改进事件处理程序，以便在显示最后一支舞后，按下按钮将再次显示第一支舞。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:39:35.003

有问题的行告诉您该影片剪辑中有多少帧，因此您可以知道何时循环回第一帧。

代替你的//你的代码在这里：

```
function nextDance(e:MouseEvent = null):void {
    index_num++;  //increment your current index when the button is clicked
    if(index_num > numFrames){  //if your index is higher than the total amount of frame, go back to the first one
        index_num = 1;
    }
    this.dances_mc.gotoAndStop(index_num); //go to the frame of the new current index;
}

yourButton.addEventListener(MouseEvent.CLICK,nextDance,false,0,true); 
```

# wordpress - 在循环中检索缩略图 url

> ID：11993268
> 
> 赞同：0
> 
> 时间：2012-08-16T18:29:05.947
> 
> 标签：wordpress, wordpress-theming

嗨，我正在尝试将一个滑块集成到我的 wordpress 主题中。这是我到目前为止所拥有的：

```
<?php 
                            $slider_query = new WP_Query(array(
                                        'posts_per_page'=>'5'
                            ));

                            if($slider_query->have_posts()):
                                while($slider_query->have_posts()):
                                    $slider_query->the_post();
                                        if(function_exists('has_post_thumbnail') && has_post_thumbnail()){
                                            the_post_thumbnail();
                                        }
                                 endwhile;
                            endif; 
```

?>

虽然这确实有效并检索了图像，但我需要能够重命名 url，因为我必须设置为标题存储的不同标题属性。

有人知道检索缩略图网址的方法吗？

**编辑：**我也尝试使用获取 URL

```
$url = wp_get_attachment_image_src(the_post_thumbnail()); 
```

但出于某种原因，查询返回 10 个链接 img，我只将其设置为 5。奇怪的是偶数图像没有来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:47:24.023

尝试使用`wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'wanted-size' );`. （替换`wanted-size`为正确的尺寸）。

更多关于`get_post_thumbnail_id` [这里](http://codex.wordpress.org/Function_Reference/get_post_thumbnail_id)。

# ios - 使用 .xib 和支持类初始化 UIView 的正确方法

> ID：11993269
> 
> 赞同：9
> 
> 时间：2012-08-16T18:29:06.927
> 
> 标签：ios, objective-c, uiview, initialization

我有一些自定义创建的 UIViews，它们使用 .xib 文件进行布局，并使用支持类进行额外设置。我使用 alloc/init 创建这些类，并在我的自定义 init 方法中调用 loadNibNamed，但这样做会导致内存泄漏。有人指出 alloc 部分实际上创建了一个泄漏的 self 对象，所以我将我的 init 方法调整为这个：

```
- (id)init 
{
    [self autorelease];
    self = [[[[NSBundle mainBundle] loadNibNamed:@"AssignmentView" owner:nil options:nil] lastObject] retain];
    [self setupBranding];

    UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
    [self addGestureRecognizer:tapRecognizer];
    [tapRecognizer release];

    return self;
} 
```

但是，现在当我运行分析代码时，我收到此警告“返回'self'，而它未设置为'[（super or self）init ...]'的结果”。所以我的问题是使用支持类进行自定义 UIViews 的正确方法是什么？

既然有人问我，我就使用了上面的代码，如下所示：

```
AssignmentView * assignmentView = [[AssignmentView alloc] init];
[self.view addSubview:assignmentView]; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T00:20:56.847

从中获取视图 -`[NSBundle loadNibNamed:owner:options:],`然后设置其框架以匹配您的视图边界。通常，您还希望在调整其父视图大小时调整 nib 中的视图大小。

我们有一个带有这些添加的 UIView 类别：

```
- (UIView *)viewFromNib
{
    Class class = [self class];
    NSString *nibName = NSStringFromClass(class);
    NSArray *nibViews = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:nil];
    UIView *view = [nibViews objectAtIndex:0];
    return view;
}

- (void)addSubviewFromNib
{
    UIView *view = [self viewFromNib];
    view.frame = self.bounds;
    [self addSubview:view];
} 
```

然后我们的 -initWithFrame: 方法如下所示：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self addSubviewFromNib];
    }
    return self;
} 
```

只需确保 nib 与该类具有相同的名称即可。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-17T00:22:40.120

你会考虑使用便捷的构造函数风格吗？

```
+ (AssignmentView *)assignmentView
{
    AssignmentView *result = [[[NSBundle mainBundle] loadNibNamed:@"AssignmentView" owner:nil options:nil] lastObject];
    [result setupBranding];

    UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
    [result addGestureRecognizer:tapRecognizer];
    [tapRecognizer release];

    return result;
} 
```

它为您提供了构建视图时所需的灵活性，但不会导致内存泄漏或警告。

# .net - Windows 2008R2 不支持无窗口 ActiveX 控件 - 适用于 Windows 7

> ID：11993272
> 
> 赞同：0
> 
> 时间：2012-08-16T18:29:12.777
> 
> 标签：.net, winforms, com, activex, windows-server-2008-r2

我有一个使用旧版供应商 com 对象的 Windows 窗体应用程序。我已经注册了ocx。VS2010项目成功引用axFOO dll。该代码在 Windows 7 上运行的 Visual Studio 中工作。安装项目安装正确，如果安装在我的本地 PC (win7) 上，它可以工作。当我尝试在 windows 2008 VM 上安装时，安装成功，当执行使用该对象的应用程序部分时，它会失败并出现以下错误：

> 无法获取“xx”控件的窗口句柄。不支持无窗口 ActiveX 控件。

我已经注册了 ocx 文件。我找到了几篇关于 Vista 和 DEP 的文章。Win7和win2008没有什么区别。我现在使用命令关闭了 DEP

```
bcdedit.exe /set {current} nx AlwaysOff 
```

这没有帮助。

应用程序是用 C# 编写的。有什么建议么？我更习惯 ASP.net。COM对我来说是新的。谢谢。

此外，我已经确定在 Initialize 方法期间在此处触发了异常：

```
 ((System.ComponentModel.ISupportInitialize)(this.myCtrl)).EndInit(); 
```

更多细节：我在 Win2008 机器上安装了 VS 2010，试图让两者更相似，但没有运气。在 VS2010 调试模式下运行也会出现同样的问题。- 发生异常时不会在 VS 中停止。虽然我没想到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:54:43.490

把它放在这里以防它帮助别人。不完全是答案..

我发现了我的问题。使用 procmon。

因此，这与所述错误无关。执行 com 对象的用户对我不知道它需要使用的文件夹没有 IO 权限。

# java - @javax.persistence.Column（可更新=假）

> ID：11993274
> 
> 赞同：10
> 
> 时间：2012-08-16T18:29:19.167
> 
> 标签：java, jakarta-ee, jpa, java-ee-6

如果我将一个字段定义为不可更新，这是否意味着该字段根本无法更新？我想做的是在保存整个实体对象时阻止该字段更新，但仍然能够编写显式更新该字段的查询。这可能吗？

我正在使用 Hibernate 和 MySQL，但我更喜欢编写可移植的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T18:33:43.203

如[文件所述](http://docs.oracle.com/javaee/6/api/javax/persistence/Column.html#updatable%28%29)，设置仅影响持久性提供程序*生成*`updatable=false`的SQL UPDATE 语句：

 *> 该列是否包含在持久性提供程序生成的 SQL UPDATE 语句中。

您仍然可以编写这样的 SQL 更新语句来更新该列中的值。此功能在 JPA 规范中定义，并非特定于 Hibernate/MySQL。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:34:06.523

```
@javax.persistence.Column( updatable=false ) 
```

映射的列不能使用 HQL 或通过休眠方法更新。如果您需要**更新数据库中的值，您应该编写本机 SQL。**

如果我从逻辑上看，它不应该让你在你说的时候更新`updatable=false`*

# iframe - selenium webdriver无法识别iframe内的对象

> ID：11993275
> 
> 赞同：4
> 
> 时间：2012-08-16T18:29:22.493
> 
> 标签：iframe, webdriver

我编写了一个用于切换到框架并将一些值发送到文本框的代码。在编写代码时它对我有用。现在它正在识别对象并且它没有传递值。请让我知道为什么它失败了。

Getobject 方法使用 xpath 查找元素，xpath 存储在属性文件中。

```
getobject("ForgotClaimNumber_Link").click();
driver.switchTo().frame(driver.findElement(By.id("fancybox-frame")));
WebDriverWait wait = new WebDriverWait(driver,100);
wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//*[@id='txtClaimNum']")));
getobject("ClaimNumber_Edit").sendKeys("5200098863");
getobject("Find_Button").click(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:31:11.170

我认为您需要先切换到框架，然后才能向其发送其他命令。不要认为您可以切换到一个框架，然后在一个命令中使用 find 元素。您将需要知道框架名称或 ID。一旦你知道你可以执行操作。完成框架后，您需要返回主窗口（退出框架）

driver.switchTo().frame("在此处输入 ID 或名称"); driver.findElement(By.id("ID"));

# java - 如何在 Java 中组织图形和绘图

> ID：11993280
> 
> 赞同：1
> 
> 时间：2012-08-16T18:29:43.273
> 
> 标签：java, swing, graphics, awt

我一直在使用 Java 图形编程，我觉得我理解它是如何工作的。

我不喜欢/尚未掌握的一件事是如何管理在面板上绘制大量图形（形状、图像等）。

我目前正在阅读的所有书籍/教程都已将您想要完成的所有绘图放入 paintCompnents/paint 函数中。前任，

```
public void paint(Graphics g){
    //do stuff here....
} 
```

事情是我有太多想要画的东西，以至于将一堆代码放在一个函数中很难看，难以阅读，并且难以管理/编辑......

我了解 OOP，但我是图形编程的新手。我应该如何管理我想在画布上绘制的所有“数据”（确切地说是 JPanel）。我目前正在调用 paint(..) 方法中的函数。前任，

```
public void paint(Graphics g){
    drawCars(g, x,y,wid,len,etc,etc);
} 
```

然后...

```
drawCars(Graphics g, int x, int y, int wid, etc etc){
    g.drawSomething(x,y,wid,len,)
    g.drawAnotherThing(x+90,y+60,etc, etc);
} 
```

然后问题出在我的 JPanel 类中，我必须管理所有这些杂散功能。

这仅用于绘制“一页”的东西..我无法想象必须切换视图或游戏屏幕，在那里我可以在页面上制作一堆动画..

我只是在寻找有关如何在 java 中组织由 paint() 方法绘制的代码的方向，所以我不会疯狂地看着我的旧工作。任何教程、书籍（尤其是免费的）或**好的**代码都将非常感激。

到目前为止，我发现的一切都是关于教你“可以”用图形/graphics2D/java 做什么，但我正在寻找专家建议的组织/风格提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:42:04.177

为您绘制的逻辑事物（例如汽车）开设课程。每个对象都会知道它需要知道的所有内容，以便像位置、大小和颜色一样进行自我绘制。如果你让所有这些对象实现一个通用接口，你就可以把它们放在一个列表中。当需要绘制它们时，您遍历列表并调用每个对象的绘制方法。

除了该文档之外，绘图代码也很好，因此对于每个绘图语句，都可以清楚地知道它是实际绘图的哪一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:41:49.277

把它洒了，在 g 中调用一个可以绘制某个部分的方法。如果你画的是房子而不是drawRect，等等

```
drawRoof(g);
drawDoor(g); 
```

然后在这些你有像drawRect这样的凌乱的东西......

这有帮助吗？我可能会误解您在寻找什么...

# javascript - 选择所有没有绑定到给定函数的元素？

> ID：11993281
> 
> 赞同：3
> 
> 时间：2012-08-16T18:29:45.223
> 
> 标签：javascript, jquery

如果我将函数分配给变量*foo*，有没有办法选择所有没有绑定到*foo*的元素，因为它们是通过类似的结构分配的`$('.elementsWithClass').click(foo)`？

我的动机是我们有 ajax 请求替换部分 DOM，我需要一种简单的方法来重新绑定不基于 .live/.on 的事件处理程序，因为我们正在控制应用程序某些部分的事件冒泡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:39:50.637

关于这样做的动机，因为它们被分配了`$(".elementsWithClass").click(foo)`，你应该在 DOM 更新后重新选择它们。

```
$("#container").load("/new/content.html", function() {
    $(this).find(".elementSWithClass").click(foo);
}); 
```

既然他们需要反弹，那就意味着他们已经被替换了，这意味着根据他们是否有处理程序来选择他们没有任何好处。

# c++ - Valgrind 挂起，没有输出

> ID：11993283
> 
> 赞同：9
> 
> 时间：2012-08-16T18:29:57.153
> 
> 标签：c++, memory-management, valgrind

对于我正在尝试为我一直在研究的一个类编写代码的方法，我正在尝试从文件中读取双精度值，并使用这些数值在程序内部动态设置一些数组。

我想检查，至少到我来的时候，我是否有内存泄漏。然而，启动`valgrind`只是挂起，`valgrind`似乎工作相当繁重，因为 cpu 负载很高，但即使我现在已经等待了一段时间，也没有生成输出。我翻阅了手册的页面，但找不到有用的东西。我编译了 valgrind-3.8.0 并现在使用它。我以我一直以来的方式发射它

```
valgrind --leak-check=yes --log-file=valgrind_log ./binary_to_execute args_if_any 
```

我也找不到对谷歌搜索这个悬挂问题有用的东西。关于这种悬挂行为的原因有什么想法吗？

编辑 1：这是应用程序的 time 命令的计时输出

47740

```
real    0m1.299s
user    0m1.116s
sys     0m0.176s 
```

编辑2：这是一个与我遇到的问题或多或少相同的链接，

[有类似问题的消息](http://www.mail-archive.com/valgrind-developers@lists.sourceforge.net/msg01743.html)

编辑3：我注意到有趣的事情，如果我要读取的文件大小很大，就会出现这个问题，如果文件的大小相对较小，就不会出现这种挂起，这对我来说也很奇怪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T22:32:34.770

大文件表明有更多工作要做。所以 valgrind 需要更多的时间。Valgrind 真的*很*慢。

您可以使用世界上最好的调试器轻松调试它：printf()（只是半开玩笑。）只需在主循环的每次迭代之前或之后打印一些东西。如果它没有出现，valgrind 真的挂在某个地方。您的 printf() 语句的周到放置应该显示它挂起的确切位置（如果它实际上是挂起而不是缓慢的话。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T14:12:54.520

1.  也许你的程序主线程没有退出
2.  等待 valgrind 退出

# php - 带回声的空格（php）

> ID：11993287
> 
> 赞同：0
> 
> 时间：2012-08-16T18:30:25.857
> 
> 标签：php, whitespace

我有一个空格问题，当我将数据库中的某些内容回显到文本区域时，它会添加一些空格。

当我使用 trim() 时，它只会删除开头的空格，但仍有一些空格。我只是无法绕过它。

```
echo trim("[quote=".name($msg['naam'])."]\n".$msg['bericht']."[/quote]\n"); 
```

我像这样用jQuery加载引用的消息

```
function quoteMessage(pid){
    $("#post2").addClass("click");
    $(".label").addClass("hidden");
    $.post('/action-handler.php', { action: 'quote_message', pid: pid}, function(response) {
        if(response != 'ERR'){
            $('#post2').val($('#post2').val()+response);
        } else {
            $('#response').css('display', 'block');
            $("#response").append("<p class='good display-error'>An unexpected error occurred.</p>");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:31:56.330

当然，您的 html 代码是这样的：

```
<textarea>

<?php echo $value ?>

</textarea> 
```

然后你的文本区域内有空白区域。你应该写：

```
<textarea><?php echo $value ?></textarea> 
```

[在这里](http://jsfiddle.net/YaSzn/)查看一个活生生的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:38:20.287

你可以正则表达式来删除额外的空格？

```
 $no_whitespace = preg_replace('/\s+/', ' ', $value); 
```

这会将所有空格变成一个空格。

# python - 具有非 ascii 字符的字节字符串文字

> ID：11993289
> 
> 赞同：7
> 
> 时间：2012-08-16T18:30:31.770
> 
> 标签：python, unicode, encoding, internationalization

显然，我可以在 Python 2.7 中做到这一点：

```
value = '國華' 
```

似乎 Python 正在使用一种编码将字符串文字中的字符编码为字节字符串。那是什么编码？是 中定义`sys.getdefaultencoding()`的编码，源文件的编码，还是别的什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T04:16:32.773

`getdefaultencoding`与源文件或终端的编码无关。它是用于将字节字符串隐式转换为 Unicode 字符串的编码，在 Python 2.X 上应始终为“ascii”（在 Python 3.X 上为“utf8”）。

在 Python 2.X 上，脚本中未声明编码的代码行会产生错误：

```
SyntaxError: Non-ASCII character '\x87' in file ... 
```

实际的非 ASCII 字符可能会有所不同，但如果没有编码声明，它将无法工作。在 Python 2.X 上使用非 ASCII 字符*需要*编码声明。编码声明*必须与*源文件编码匹配。例如：

```
# coding: utf8
value = '國華' 
```

当保存为 cp936 时产生：

```
SyntaxError: 'utf8' codec can't decode byte 0x87 in position 9: invalid start byte 
```

当编码正确时，字节字符串中的字节就是源文件中的字节，因此它将包含字符的编码字节。当 Python 解析 Unicode 字符串时，使用声明的源编码将字节解码为 Unicode。请注意在 cp936 控制台上打印 UTF-8 字节字符串和 Unicode 字符串时的区别：

```
# coding: utf8
value = '國華'
print value,repr(value)
value = u'國華'
print value,repr(value) 
```

输出：

```
鍦嬭彲 '\xe5\x9c\x8b\xe8\x8f\xaf'
國華 u'\u570b\u83ef' 
```

字节字符串包含两个字符的 3 字节 UTF-8 编码，但由于 cp936 终端不理解字节序列，因此显示不正确。Unicode 打印正确，字符串包含从源文件的 UTF-8 字节解码的 Unicode 代码点。

注意声明和使用与终端匹配的编码时的区别：

```
# coding: cp936
value = '國華'
print value,repr(value)
value = u'國華'
print value,repr(value) 
```

输出：

```
國華 '\x87\xf8\xc8A'
國華 u'\u570b\u83ef' 
```

字节字符串的内容现在是两个字符的 2 字节 cp936 编码（'A' 等同于 '\x41'）并且由于终端理解 cp936 字节序列而正确显示。Unicode 字符串包含与前一个示例相同的两个字符的 Unicode 代码点，因为源字节序列是使用声明的 Unicode 源编码解码的。

如果脚本具有正确的源编码声明并使用 Unicode 字符串作为文本，它将显示正确的字符¹而不管终端编码²。`UnicodeEncodeError`如果终端不支持该字符而不是显示错误的字符，它将抛出一个。

最后一点：除非另有声明，否则 Python 2.X 默认为 'ascii' 编码，并且如果编码支持非 ASCII 字符，则允许在字节字符串中使用它们。Python 3.X 默认为 'utf8' 编码（因此请确保保存在该编码中或以其他方式声明），并且**不允许**在字节字符串中使用非 ASCII 字符。

¹如果终端字体支持该字符。
²如果终端编码支持该字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:35:01.610

```
value = b'國華' 
```

是没有意义的（`b`在 Python 2.x 中隐含） - 为什么你想要一个包含*字符的**字节*字符串？Python 只是以您的终端/编辑器使用的任何编码来复制字节。你想要的是一个*字符串*：

 **```
value = u'國華' 
```

在源代码文件（与交互式 shell 相对）中，不要忘记通过在文件开头添加以下行来[声明编码：](http://www.python.org/dev/peps/pep-0263/)

```
# -*- coding: utf-8 -*- 
```**

# python - Tkinter 中真正的自定义字体

> ID：11993290
> 
> 赞同：20
> 
> 时间：2012-08-16T18:30:36.803
> 
> 标签：python, fonts, tkinter

我正在 Tkinter 中制作一个界面，我需要自定义字体。不仅仅是，比如说，一定大小的 Helvetica 或其他字体，还有任何给定平台上通常可用的字体以外的字体。这将作为图像文件或（最好）Truetype字体文件或类似文件与程序一起保存。我不想在每台要使用该程序的机器上安装所需的字体，我只想将它们与程序放在同一目录中。

tkFont 模块看起来应该做这样的事情，但我看不出它会将文件名用于运行程序的系统通常无法访问的字体的位置。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-06-03T21:44:14.820

有一种方法可以在 Windows 上将外部字体导入 Tkinter。

完成这项工作的关键代码是以下函数：

```
from ctypes import windll, byref, create_unicode_buffer, create_string_buffer
FR_PRIVATE  = 0x10
FR_NOT_ENUM = 0x20

def loadfont(fontpath, private=True, enumerable=False):
    '''
    Makes fonts located in file `fontpath` available to the font system.

    `private`     if True, other processes cannot see this font, and this 
                  font will be unloaded when the process dies
    `enumerable`  if True, this font will appear when enumerating fonts

    See https://msdn.microsoft.com/en-us/library/dd183327(VS.85).aspx

    '''
    # This function was taken from
    # https://github.com/ifwe/digsby/blob/f5fe00244744aa131e07f09348d10563f3d8fa99/digsby/src/gui/native/win/winfonts.py#L15
    # This function is written for Python 2.x. For 3.x, you
    # have to convert the isinstance checks to bytes and str
    if isinstance(fontpath, str):
        pathbuf = create_string_buffer(fontpath)
        AddFontResourceEx = windll.gdi32.AddFontResourceExA
    elif isinstance(fontpath, unicode):
        pathbuf = create_unicode_buffer(fontpath)
        AddFontResourceEx = windll.gdi32.AddFontResourceExW
    else:
        raise TypeError('fontpath must be of type str or unicode')

    flags = (FR_PRIVATE if private else 0) | (FR_NOT_ENUM if not enumerable else 0)
    numFontsAdded = AddFontResourceEx(byref(pathbuf), flags, 0)
    return bool(numFontsAdded) 
```

在`loadfont`使用字体文件的路径（可以是`.fon`、`.fnt`、`.ttf`、`.ttc`、`.fot`、`.otf`、`.mmm`、`.pfb`或中的任何一个`.pfm`）调用后，您可以像任何其他已安装的字体一样加载字体`tkFont.Font(family=XXX, ...)`。并在您喜欢的任何地方使用它。[有关详细信息，请参阅[MSDN](https://msdn.microsoft.com/en-us/library/dd183327(VS.85).aspx) ]

这里最大的警告是字体的家族名称不一定是文件的名称。它嵌入在字体数据中。与其尝试解析名称，不如在字体浏览器 GUI 中查找它并将其硬编码到您的应用程序中可能会更容易。**编辑**：或者，根据下面 patthoyt 的评论，查找它`tkFont.families()`（作为最后一项，或者更可靠地，通过比较加载字体之前和之后的系列列表）。

我在[digsby](https://github.com/ifwe/digsby/blob/f5fe00244744aa131e07f09348d10563f3d8fa99/digsby/src/gui/native/win/winfonts.py#L15) ( [license](https://github.com/ifwe/digsby/blob/f5fe00244744aa131e07f09348d10563f3d8fa99/LICENSE) ) 中找到了这个功能；`unloadfont`如果您想在程序完成执行之前删除字体，则在那里定义了一个函数。（您也可以仅依靠`private`设置在程序结束时卸载字体。）

对于任何感兴趣的人，[这里](http://code.activestate.com/lists/tcl-core/8157/)是几年前在 [TCLCORE] 上对此主题的讨论。更多背景知识：[MSDN 上的字体](https://msdn.microsoft.com/en-us/library/dd162470(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-04-21T21:02:13.657

这在 Windows 上对我有用，但在 linux 上似乎不起作用：

```
import pyglet,tkinter
pyglet.font.add_file('file.ttf')

root = tkinter.Tk()
MyLabel = tkinter.Label(root,text="test",font=('font name',25))
MyLabel.pack()
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-16T21:41:27.697

如果不借助特定于平台的 hack，就无法将外部字体文件加载到 Tkinter 中。Tkinter 没有内置任何东西来支持它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-16T19:10:02.583

我发现[了这个讨论](http://www.python-forum.org/pythonforum/viewtopic.php?f=4&t=4981)，他们介绍了如何使用一行文本作为图像并使用 PIL 将其放置到窗口中。那可能是一个解决方案。

[我在tkFont 手册页](http://www.tcl.tk/man/tcl8.5/TkCmd/font.htm)中找不到使用 tkFont 导入捆绑字体的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-24T23:08:53.517

这对我来说是一个简单的解决方案：

```
import pyglet, tkinter
pyglet.font.add_file("your font path here")
#then you can use the font as you would normally 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-01T09:14:56.337

对于 linux，我能够将`otf`我拥有的字体文件安装到系统字体目录中：

```
mkdir /usr/share/fonts/opentype/my_fonts_name
cp ~/Downloads/my_fonts_name.otf /usr/share/fonts/opentype/my_fonts_name/ 
```

我发现这个主目录有效，并最终改用它：

```
mkdir ~/.fonts/
cp ~/Downloads/my_fonts_name.otf ~/.fonts/ 
```

在任何一种情况下，我都可以使用字体名称的字符串来加载它（如所有 tkinter 文档所示）：

```
# unshown code
self.canvas = tk.Canvas(self.data_frame, background="black")
self.canvas.create_text(event.x, event.y, text=t, tags='clicks', 
                        fill='firebrick1',
                        font=("My Fonts Name", 22)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-28T19:04:40.680

[tkextrafont](https://github.com/TkinterEP/python-tkextrafont)在我看来是最轻量级和最简单的，它在 PyPI 上为 Windows 和 Linux 提供了预构建的轮子。例子：

```
import tkinter as tk
from tkextrafont import Font

window = tk.Tk()
font = Font(file="tests/overhaul.ttf", family="Overhaul")
tk.Label(window, text="Hello", font=font).pack()
window.mainloop() 
```

# hbase - HBase：有效地列出与给定前缀匹配的给定行的列

> ID：11993294
> 
> 赞同：1
> 
> 时间：2012-08-16T18:30:55.710
> 
> 标签：hbase

我正在尝试使用 HBase Java 客户端尽可能高效地回答以下问题：

> 对于给定的行和给定的列族，哪些限定符具有特定前缀？

我可能会使用 a`QualifierFilter`和 a `BinaryPrefixComparator`。这行得通吗？我的直觉是，应该可以在不发送这些列的相应单元格内容的情况下做到这一点，对吧？想`KeyOnlyFilter`在这里工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:09:49.147

这就是我要工作的地方。 `KeyOnlyFilter`和 一样出色地工作，`ColumnPrefixFilter`据我所知，这相当于`QualifierFilter`and `BinaryPrefixComparator`。

```
Scan scan = new Scan(MY_ROW, getSuccessor(MY_ROW))
                .addFamily(MY_COLFAM)
                .setMaxVersions(1)
                .setFilter(
                    new FilterList(
                        Operator.MUST_PASS_ALL, Arrays.<Filter>asList(
                            new KeyOnlyFilter(),
                            new ColumnPrefixFilter(MY_PREFIX)
                        ))); 
```

Where`getSuccessor()`是一个仅在末尾添加空字节的函数。

# php - 为什么当我抛出异常时，Doctrine 2 的自动加载器会尝试获取异常实体？

> ID：11993301
> 
> 赞同：1
> 
> 时间：2012-08-16T18:31:29.677
> 
> 标签：php, exception, doctrine-orm

这是相关代码：

```
throw new Exception("Message"); 
```

这是我收到的错误消息：

> 致命错误：require() [function.require]: 无法打开所需的 'C:\wamp\www\drupal-7.15\sites\all\modules\dbManip\Entities\Exception.php' (include_path='.;C:\ wamp\bin\php\php5.3.13\pear\') 在 C:\wamp\bin\php\php5.3.13\pear\Doctrine\Common\ClassLoader.php 第 163 行

我相信 Doctrine 正在尝试加载`Exception`类定义，就好像它只是我的另一个实体一样，但据我所知，`Exception`它是 PHP 原生的（我使用的是 PHP 5.3.13）。我的理论是我在自动加载器方面做错了什么，但我不确定是什么。这是我对自动加载器的看法：

```
use Doctrine\ORM\Tools\Setup;

require_once("Doctrine/ORM/Tools/Setup.php");
Setup::registerAutoloadPEAR();

$classloader = new Doctrine\Common\ClassLoader('Entities', __DIR__);
$classloader->register(); 
```

我在这里做错了什么？`Exception`如果没有教义的自动加载器尝试加载实体，如何使用抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:37:08.470

这是 PHP 在玩。不是教义。

当您在命名空间中声明文件时，它将为文件中提到的所有类使用相同的命名空间。要指示 Exception 类来自根命名空间，您必须使其显式。

```
throw new \Exception("Message"); 
```

# sql - 带有 parentID 的数据库设计

> ID：11993303
> 
> 赞同：1
> 
> 时间：2012-08-16T18:31:41.807
> 
> 标签：sql

我想在 sql db 中创建以下层次结构。这就是我所拥有的。它是正确的还是有更简单的方法。另外我如何查询它以显示相同的层次结构？

```
Services
    Property
        Residential
            To let
                Purchase
                Accommodation
                Maintenance
                Plumbers
                Electricians
                Carpenters
       Industrial
    To let
                 Purchase
                 Accommodation
                 Maintenance
                 Plumbers
                 Electricians
                 Carpenters 
```

桌子`CategoryType`

```
CategoryTypeID CategoryName
1   Services
2   Products
3   Main
4   MainSub
5   Sub
6   Sub1 
```

桌子`Category`

```
CateogryID      CategoryName   CategoryTypeID  ParentID
1       Property    Service
2       Residential Main        1
3        To let     MainSub 2
4       Purchase    Sub     3
5       Accommodation Sub       4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:38:47.517

您的模式可能有效，但众所周知，在尝试表示分层数据时，RDBMS 很难使用。您要么很难更新表，要么查询它的效率非常低。如果您要使用此类数据，我的建议是考虑嵌套集模型。

[http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)

[http://www.evanpetersen.com/item/nested-sets.html](http://www.evanpetersen.com/item/nested-sets.html)

有一点学习曲线，但这是值得的。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:19:32.930

使用每个级别的表对层次结构进行建模。自下而上：

Expense 表包含 Purchase、Accomodation、Maintenance 等行和一个指向 Ownership 表的 ID 字段的字段。

Ownership 表包含 ToBuy 和 ToLet 行以及指向 BuildingType 表的 ID 字段的字段。

BuildingType 表包含 Residential 和 Industrial 行以及指向 AssetType 表的字段。

AssetType 表包含 rows 属性和其他内容。

等等。

这称为 3 范式建模。

# iphone - 隐藏 UIView 的最快方法（setHidden:YES vs setAlpha:0）

> ID：11993306
> 
> 赞同：0
> 
> 时间：2012-08-16T18:31:52.470
> 
> 标签：iphone, performance, uiview

我的目标很简单：使视图隐藏或可见。我正在考虑这样做的两种方法是切换 UIView 的 setHidden 或切换 UIView 的 alpha 从 0 到 1。这是一个示例：

```
// set myView hidden
[myView setHidden:YES];
// vs
[myView setAlpha:0];

// set myView visible
[myView setHidden:NO];
// vs 
[myView setAlpha:1]; 
```

这可能听起来有点迂腐，但我的问题是关于 UIView 的 setHidden: vs UIView 的 setAlpha: 的性能，其中 alpha 仅为 0 或 1，其中 0 隐藏视图，1 使其可见。鉴于 alpha 仅为 0 或 1，在计算上更改视图的 alpha 是否比隐藏或显示视图更昂贵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:36:57.767

通过一些测量尝试一下：

```
NSDate *startDate = [NSDate date];

// your code

NSDate *finishDate = [NSDate date];
NSTimeInterval executionTime = [finishDate timeIntervalSinceDate:startDate];
NSLog(@"Execution took %f seconds", executionTime); 
```

但老实说，我认为不会有值得关注的差异。

# git - git - 撤消对单个文件的更改而不显示在历史记录中

> ID：11993308
> 
> 赞同：2
> 
> 时间：2012-08-16T18:32:04.873
> 
> 标签：git

两次提交前，我不小心用受法律保护的图片更改了一张免费图片（好吧，我不允许分发该图片）。我还没有推送到github。如何撤消对图片所做的这些更改，使其不会出现在提交历史记录中？仿佛这张照片从未改变过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:51:47.397

使用`git rebase -i HEAD~2`. 当系统提示您要执行的操作时，对于您需要更改的提交，请将“pick”替换为“edit”。这将允许您编辑您指定的提交，这意味着编辑整个提交，而不仅仅是消息。

（或者，如果您根本不需要该提交，只需删除包含错误提交的行。变基将完成并使其不会发生提交。在这种情况下，无需阅读其余部分。 )

当您启动变基时（通过保存并退出您正在使用的任何编辑器），您将收到如下提示：

```
Stopeed at 98ad8ac... Add an image I really oughtn't add.
You can amend the commit now, with

        git commit --amend

Once you are satisfied with your changes, run

        git rebase --continue 
```

所以就这样做吧！对提交进行所需的更改（即删除非免费图像，将免费图像放回原处），然后运行`git commit --amend`​​. 那将用新的提交替换您的错误提交。

（替代方案：`git reset HEAD^`此时运行。这将使它好像没有发生提交，但提交中的所有更改都将在您的工作副本中，因此您可以根据需要暂存/退出/任何更改。然后`git commit`照常运行。）

然后运行`git rebase --continue`，Git 会在你的第一个提交之上应用你的第二个提交，你的历史将只包含正确的修复，而不是 duff 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:33:28.300

`git commit --amend`是你的朋友。

如果您需要在历史记录中进一步进行更改，那么`git rebase --interactive`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T18:53:55.167

你可以做到`git revert <commit>`，但它仍然会出现在历史中。

`git reset --hard <commit>`如果它没有被推送，那么你可以通过两次提交来放弃更改..

# c - 在条件下使用数组

> ID：11993312
> 
> 赞同：3
> 
> 时间：2012-08-16T18:32:21.870
> 
> 标签：c, arrays

我想检查条件中的数组。让我们看下面这个简单的代码：

```
#include <stdio.h>
int main()
{
    int array[] = {1,2,3,4,5}; // initializing an array
    if(array[] == {1,2,3,4,5}) // using as condition
    {
         printf("worked");
    }
    else printf("not worked");

    return 0;
} 
```

但它给出了一个错误：

```
In function 'main':|
C:\Python32\Untitled4.c|5|error: expected expression before ']' token|
||=== Build finished: 1 errors, 0 warnings ===| 
```

那么我应该如何在条件下使用数组呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:44:22.483

如果你有一个现代 C 编译器，至少是 C99，你可以使用复合文字和函数来进行比较：

```
if(memcmp(array, (int[]){1,2,3,4,5}, sizeof array) == 0) {
   printf("worked");
} 
```

*   这里`memcmp`（内存比较）比较两个指针指向的数据。
*   `(int[]){1,2,3,4,5}`是复合文字，类型为 in `()`，然后是初始化器 in ，`{ }`就像在变量声明中一样。
*   当像在这样的表达式中使用时，这两个数组被转换为指向它们的第一个元素的指针

*编辑：*正如 Eric 正确评论的那样，`memcmp`只有当您的数组的基本类型（这里是`int`）没有填充位或字节时，它才是有效的比较。因为`int`这在当今并不常见，所以我所描述的在通常的平台上都很好。如果有一天您有其他更复杂的数据类型，您将不得不为该类型的数组编写自己的比较函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:39:14.137

另一个不同的例子是“你可以用 分配`=`，但不能`==`与`struct`类型比较。

```
struct S {
    int array[5];
};

struct S a = { { 1, 2, 3, 4, 5 } };
struct S b;

b = a; /* assignment ok */
if (b == a) { /* equality not ok */ } 
```

> 那么我应该如何在条件下使用数组呢？

~~您可以使用[`memcmp`](http://linux.die.net/man/3/memcmp).~~

 ~~```
if (memcmp(b.array, a.array, sizeof(b.array)) == 0) { /* ... */ } 
```~~ 

**编辑：**请注意，`memcmp`执行两个内存位置的逐字节比较。正如 Eric 指出的那样，如果您的对象具有不同值的填充位，或者您的类型具有相同值的多个位表示，则`memcmp`可能会产生误报。

~~在实践中，通过以标准化方式初始化对象（例如，在进行成员分配之前使用内存）`memset`来避免这个问题。`0`~~ **编辑：** **即便如此，比较通过`memcmp`仍可能产生假阴性。执行比较的最大可移植方式是将每个对应的成员相互比较。（[点击链接了解血腥细节](https://stackoverflow.com/q/11994513/315052)。）**

您可以创建一个辅助函数来简化此操作：

```
/* API as memcmp, but memory treated like array of int, remainder bytes ignored */
int memcmp_int (const void *a, const void *b, size_t sz) {
    const int *aa = a;
    const int *bb = b;
    while (sz >= sizeof(int)) {
        if (*aa < *bb) return -1;
        if (*aa > *bb) return 1;
        ++aa;
        ++bb;
        sz -= sizeof(int);
    }
    return 0;
} 
```

然后，可以非常简单地修改代码：

```
if (memcmp_int(b.array, a.array, sizeof(b.array)) == 0) { /* ... */ } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T18:33:41.673

这种格式：

```
int array[]={1,2,3,4,5}; 
```

只能在*初始化*或数组或结构中使用。这称为*聚合初始化*。这不能用于一般表示数组。

此外，您不能用于`==`比较 C 中的数组或结构。

要对您的条件进行编码，您需要检查每个值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T18:46:25.103

您需要遍历数组。一个简单的循环如下所示：

```
#include <stdio.h>
int main()
{
    int array[] = {1,2,3,4,5}; //initializing an array
    int iter = 0;
    for (; iter < sizeof(*array); iter++){
        printf("Iteration: %i\n", iter);
        // TOOD: Add your condition here
    }
    return 0;
} 
```

# css - 不同浏览器之间的滚动条不一致

> ID：11993317
> 
> 赞同：1
> 
> 时间：2012-08-16T18:32:36.427
> 
> 标签：css, scrollbar

浏览器：http: [//666kb.com/i/c6fufhslm58tzh66k.jpg](http://666kb.com/i/c6fufhslm58tzh66k.jpg) 铬：http: [//666kb.com/i/c6fufwh0ebfrcgwi4.jpg](http://666kb.com/i/c6fufwh0ebfrcgwi4.jpg)

php代码：

```
echo"<div id='anamain'>";
echo"<iframe frameborder=0 scrolling=yes width=100% height=100% src='duello.php'></iframe>";
echo"</div>"; 
```

CSS代码：

```
#anamain
{
    position:absolute;
    background-color:#f2f2f2;
    left:25%;
    top:205px;
    border-width:1px;
    width:50%;
    height:auto;
    color:#9db4bd;
} 
```

我该如何解决这个差异问题？我想要 Chrome 视图的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:35:58.910

每个浏览器的页面元素默认状态略有不同。通常，使用“CSS 重置”来减轻这些差异。

查看[http://www.cssreset.com/](http://www.cssreset.com/)了解更多信息

话虽如此，重置样式表并不能解决所有差异。有些元素只是在不同的浏览器中表现不同，**尤其是**当您处理被称为 Internet Explorer 的那种疯狂的、吃孩子的越轨行为时。

了解这一点，出于您的目的，您可以使用 css`overflow`属性强制滚动条

```
#anamain
{
    /* ... previous styles ... */
    overflow: scroll;
    /* OR overflow: hidden; to hide */
    /* OR overflow-y: scroll; */
    /* OR overflow-x: scroll; */
} 
```

针对您的问题，看起来您实际上需要将`overflow`样式应用于 iframe，而不是包含 div。我整理了一个样本：

[http://jsfiddle.net/WqJYG/](http://jsfiddle.net/WqJYG/)

如您所见，将`overflow: hidden;`样式应用于包装 div 和 iframe 可确保您不会获得任何滚动条。

**文档**

*   `overflow`在 MDN - [https://developer.mozilla.org/en-US/docs/CSS/overflow](https://developer.mozilla.org/en-US/docs/CSS/overflow)
*   `overflow-y`- [https://developer.mozilla.org/en-US/docs/CSS/overflow-y](https://developer.mozilla.org/en-US/docs/CSS/overflow-y)
*   `overflow-x`- [https://developer.mozilla.org/en-US/docs/CSS/overflow-x](https://developer.mozilla.org/en-US/docs/CSS/overflow-x)

# c - gcc：不链接文件

> ID：11993318
> 
> 赞同：2
> 
> 时间：2012-08-16T18:32:38.227
> 
> 标签：c, gcc, linker

我有 main.c、snmpy.c、snmpy.o 和一个 makefile。我通过命令行在 Linux 服务器上运行它。这是所有这些...

主.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "snmpy.h"

int main(void) {

   char* message = sayHello();

   printf("%s", message);

   return 0;
} 
```

snmpy.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "snmpy.h"

char* sayHello(){

   char* hiya = "Hello!!\n";

   return hiya;

} 
```

snmpy.h：

```
char* sayHello(); 
```

生成文件：

```
# Compiler
CC = /usr/bin/gcc

# Name of program
PROG = snmpy

# The name of the object files
OBJS = snmpy.o main.o

# All the header and c files
SRCS = main.c snmpy.c
HDRS = snmpy.h

# Add -I to the dir the curl include files are in
CFLAGS = -c -g -std=c99 -Wall

# Build the executable file
$(PROG): $(OBJS)
        $(CC) $(CFLAGS) $(OBJS) -o $(PROG)

# Seperately compile each .c file
main.o: main.c snmpy.h
        $(CC) $(CFLAGS) -c main.c

snmpy.o: snmpy.c snmpy.h
        $(CC) $(CFLAGS) -c snmpy.c

# Clean up crew
clean:
        rm -fv core* $(PROG) $(OBJS)

cleaner: clean
        rm -fv #* *~ 
```

当我编译它时，它给了我这个错误：

```
/usr/bin/gcc -c -g -std=c99 -Wall snmpy.o main.o -o snmpy
gcc: snmpy.o: linker input file unused because linking not done
gcc: main.o: linker input file unused because linking not done 
```

不知道发生了什么事情是我做的不对，或者我没有安装什么东西。我是制作文件的菜鸟。我有一段时间没做过了。

提前致谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T18:34:21.247

回覆：

```
/usr/bin/gcc -c -g -std=c99 -Wall snmpy.o main.o -o snmpy 
```

命令中的`-c`选项表示**编译**（但不链接）。其结果将是`.o`（对象）文件。

尝试不带 的命令`-c`，它应该链接并创建您的`snmpy`可执行文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:40:43.240

通过做：-

```
# Build the executable file
$(PROG): $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) -o $(PROG) 
```

因为也`CFLAGS`包含`-c`你说过要`-c`在链接阶段使用的一个。

你真的想要：-

```
$(PROG): $(OBJS) 
```

Make应该为您完成其余的工作。

你也可能会失去`*.o`目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T18:36:26.617

您需要失去`-c`进行完整链接的选项。这`-c`只会导致源文件被编译成`*.o`文件。

这就是`man gcc`电话所说的关于该`-c`选项的内容

> **-c** 编译或汇编源文件，但不链接。链接阶段根本没有完成。最终输出是每个源文件的目标文件形式。
> 
> 默认情况下，源文件的目标文件名是通过将后缀 .c、.i、.s 等替换为 .o 来创建的。
> 
> 无法识别的输入文件，不需要编译或汇编，将被忽略。

# android - ListView.setFooterView(v) 页脚更改在 VIewPager 显示的 ListView 中不可见

> ID：11993320
> 
> 赞同：3
> 
> 时间：2012-08-16T18:32:42.290
> 
> 标签：android, android-layout

我打电话

```
listView.setFooterView(v) 
```

但看不到任何变化。现在我应该补充一点，listView 位于添加到 ViewPager 中的视图（不是框架）内。

因此，包含 listView 的 View 位于视图寻呼机内。如果我在视图之间来回切换，那么我会看到变化，但不会。到目前为止，我已经尝试使包括整个 ViewPager 在内的大多数内容无效，但它仍然没有显示。

我有内部活动布局：

```
 <android.support.v4.view.ViewPager
android:id="@+id/viewPager"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@color/white"
android:layout_weight="1"
/> 
```

然后我有三个页面，每个页面如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/listListDisplayer1"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<ListView
    android:id="@+id/listMyList1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:cacheColorHint="#00000000"
    android:fastScrollEnabled="true" />

<include layout="@layout/advertisement" />

</FrameLayout> 
```

所以我有上面的视图，并立即在主要活动的 onCreate() 中创建它们。

```
 MyPageAdapter extends ViewPagerAdapter{

      int getCount() {
           return 3;
      }

       public Object instantiateItem(View collection, int position) {

        View view=null;

        switch (position) {
            case 0:
                view = getMyView1();
                break;
            case 1:
                view = getMyView2();
                break;
            case 2:
                view = getMyView2();
                break;
        }

        if ((view != null) && ((ViewPager) collection).findViewById(view.getId()) == null)
        {

          ((ViewPager) collection).addView(view, 0);
        }

        return view;
    }

    private View getMyView1()
    {   
        return mMyView1;
    }

    private View getMyView2()
    {
        return  mMyView2;
    }

    private View getMyView3()
    {
        return mMyView3;
    }

    @Override
    public void destroyItem(View view, int arg1, Object arg2) {
        ((ViewPager) view).removeView((View) arg2);

    }

    @Override
    public void finishUpdate(View view) {

    }

    @Override
    public boolean isViewFromObject(View view, Object arg1) {
        return view == ((View) arg1);

    }

    @Override
    public void restoreState(Parcelable parcel, ClassLoader classLoader) {
    }

    @Override
    public Parcelable saveState() {

        return null;
    }

    @Override
    public void startUpdate(View view) {

    }

} 
```

我将更新几行......

```
 private class PageChangeListener implements OnPageChangeListener {

    @Override
    public void onPageScrollStateChanged(int scrollState) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageSelected(int pageNum) {
        Logout.debug("pageSelected :"+pageNum); 
        if (pageNum == 0)
        {
            prepareMyView1();
        }
        else if (pageNum == 2)
        {
           prepareMyView2();
        }
        else if (pageNum == 3)
        {
            prepareMyView3();
        }
    }

}

    private void prepareMyView1()   // each is like this setting adapter on ListView
{   
    setMyList1Adapter();
}

     private void prepareMyView2()   // each is like this setting adapter on ListView
{   
    setMyList2Adapter();
} 
```

所以我希望改变 addFooterView 的影响 | 立即可见。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T21:13:07.267

解决这个问题的方法是先添加页脚视图，然后设置适配器。如果首先设置了适配器，然后添加了页脚视图，它现在会显示出来。但是，可以在不重置适配器的情况下使用 removeFooterView(v)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:35:35.930

您应该在 ViewPager 的适配器上调用 notifyDataSetChanged()。

# maven - mvn jetty:run throwing java.util.zip.ZipException: 无效的条目大小

> ID：11993324
> 
> 赞同：4
> 
> 时间：2012-08-16T18:33:01.823
> 
> 标签：maven, maven-jetty-plugin

我试图在码头运行一个非常基本的项目（它基本上是一个没有任何功能的线框，只是一些 maven 依赖项）。为此，我使用 mvn jetty 插件：

```
mvn jetty:run 
```

但是在服务器开始启动后我得到了这个异常：

```
[INFO] Starting jetty 7.4.0.v20110414 ...
2012-08-16 13:25:22.237:INFO::jetty-7.4.0.v20110414

java.util.zip.ZipException: invalid entry size (expected 3313 but got 2163 bytes)
at java.util.zip.ZipInputStream.readEnd(ZipInputStream.java:386)
at java.util.zip.ZipInputStream.read(ZipInputStream.java:156)
at java.util.jar.JarInputStream.read(JarInputStream.java:195)
at java.util.zip.ZipInputStream.closeEntry(ZipInputStream.java:100)
at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:78)
at java.util.jar.JarInputStream.getNextEntry(JarInputStream.java:130)
at java.util.jar.JarInputStream.getNextJarEntry(JarInputStream.java:167)
at org.eclipse.jetty.webapp.JarScanner.matched(JarScanner.java:153)
at org.eclipse.jetty.util.PatternMatcher.matchPatterns(PatternMatcher.java:82)
at org.eclipse.jetty.util.PatternMatcher.match(PatternMatcher.java:64)
at org.eclipse.jetty.webapp.JarScanner.scan(JarScanner.java:75)
at org.eclipse.jetty.webapp.MetaInfConfiguration.preConfigure(MetaInfConfiguration.java:75)
at org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:406)
at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:435)
at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:180)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:58)
at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:226)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:164)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:58)
at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:226)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:58)
at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:93)
at org.eclipse.jetty.server.Server.doStart(Server.java:253)
at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:67)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:58)
at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:468)
at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:408)
at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:589)
at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375) 
```

这对我来说听起来像是某个地方的损坏的罐子，但我不知道如何进行，这是我第一次使用码头。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T23:18:02.780

正如我所怀疑的，这个问题是由于 JAR 文件损坏造成的。我的解决方案是清除我的本地存储库（删除**.m2/repository**文件夹的内容）并执行：

```
mvn clean install 
```

在解决了所有依赖项之后，它就像一个魅力一样运行。

您还应该确保在启动 jetty 之前，实际上将应用程序编译到输出文件夹（在我的例子中是一个名为***war的文件夹）。***

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:39:18.763

我发现了以下内容：[如何以编程方式复制 jar 文件](http://javahowto.blogspot.com/2011/07/how-to-programmatically-copy-jar-files.html)

这篇文章说：

> 当源 jar 文件中的文本文件条目包含一些非 ASCII 字符（例如 ^I ^Z ^D ^C）时，通常会发生这种情况。一些常见的文件是 META-INF/COPYRIGHT.html、META-INF/LICENSE.txt 等，可能是因为这些文件是在非 ASCII 编辑器中创建的，但保存为文本文件。在 vi 或 vim 中打开它们以查看这些违规字符。

也许这是错误的原因。

# jquery - Chrome 扩展 webrequest 网络 xhr 异常

> ID：11993329
> 
> 赞同：2
> 
> 时间：2012-08-16T18:33:23.727
> 
> 标签：jquery, google-chrome-extension, xmlhttprequest, webrequest

我正在尝试编写一个 chrome 扩展，将某些请求路由到另一个。我找到了一些关于如何做到这一点的资源，并且我已经完成了一半的工作。这是扩展代码：

```
var requestRoutingTable = { 
    'some/url/i/want/to/catch' : 'libs/TVKeyValue.js'
};
chrome.webRequest.onBeforeRequest.addListener(function(details){
    for (var key in requestRoutingTable){
        if (details.url.indexOf(key) != -1){
            console.log('redirecting to: ' + chrome.extension.getURL(requestRoutingTable[key]));
            return {redirectUrl: chrome.extension.getURL(requestRoutingTable[key])};
        }   
    }   
}, {urls: ["<all_urls>"]}, ["blocking"]); 
```

为了测试这是否有效，我在 jQuery 中编写了以下内容并加载了扩展：

```
$.getScript('some/url/i/want/to/catch', function(script, textStatus, jqXHR){
    // this doesn't get here!
} 
```

症状：

*   我看到扩展代码中的 console.log 被触发
*   我看到实际文件是通过 chrome 扩展加载的（通过开发人员工具中的网络选项卡）

问题：

回调不会被触发。可疑的是，原始请求仍处于“待处理”状态。

这个扩展的重点是为某些请求放置一些存根/模拟响应。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T01:05:21.870

我相信这可能是 Chrome 扩展的问题，我已将其报告为可能的错误：

[http://code.google.com/p/chromium/issues/detail?id=145074](http://code.google.com/p/chromium/issues/detail?id=145074)

# mysql - MYSQL查询，如果在两个日期之间进行条件连接

> ID：11993331
> 
> 赞同：0
> 
> 时间：2012-08-16T18:33:33.757
> 
> 标签：mysql, join, if-statement

因此，我有一个现有的 Mysql 查询，该查询非常激烈，类似于：

```
SELECT CURRENT.*, PROGRAMS.NAME 
FROM CURRENT 
LEFT JOIN PROGRAMS ON CURRENT.PID = PROGRAMS.ID 
ORDER BY PID ASC 
```

现在，我想使用这个查询来做其他事情，因为我已经在访问我的数据库了。我有第三个名为“TIMEWINDOWS”的表，我将如何使用此查询根据它是否在 Start_Time 和 End_Time 之间以及查询中已经存在的所有其他内容返回一组 tinyint（0 或 1）？

非常感谢您的帮助。

TimeWindows 表包含以下内容：

```
ID               int(11) PK
PID              int(11)   <-- Can join on this from any of the other tables.
ALL_DAY          tinyint(1)
START_DATE       date
END_DATE         date
EARLIEST   time
LATEST     time
NOTICE       int(11)
LATEST  time
MAX int(11)
MIN int(11)
PROBABLE_START   time
PROBABLE_END     time 
```

我想检查它是否在开始和结束日期之间，如果是则返回一个布尔值，但我似乎找不到这样做的方法，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:22:39.807

```
SELECT CURRENT.*, PROGRAMS.NAME, 
  CASE WHEN t.ID IS NULL THEN 0 ELSE 1 END AS BetweenStartEnd
FROM CURRENT 
  LEFT JOIN PROGRAMS ON CURRENT.PID = PROGRAMS.ID 
  LEFT JOIN TIMEWINDOWS t ON (t.PID = CURRENT.PID 
    AND DATE_FORMAT(NOW(), '%Y-%m-%d') > START_DATE 
    AND DATE_FORMAT(NOW(), '%Y-%m-%d') < END_DATE
  )
ORDER BY PID ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:21:33.130

我认为您缺少一些信息来为您提供代码示例，但请查看此页面，它可能会有所帮助：

[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)

# scala - 从 C# 角度看的 Scala 泛型——更高种类的类型？

> ID：11993337
> 
> 赞同：1
> 
> 时间：2012-08-16T18:33:50.380
> 
> 标签：scala

愚蠢的问题...

我正在使用 C# 泛型编写一些东西，感觉我发现了一个缺点，并且它可能会在 Scala 中使用更高种类的类型来克服，我只是模糊地熟悉。

这是代码：

```
public void Subscribe<P, T>(Action<T> callback) where P : ISubscriberProvider<T> 
```

*（提供者可能是一个不好的术语......我认为它可能真的是一个工厂）*

所以问题是我必须在签名中同时提供 P 和 T。相反，我想要类似的东西：

```
public void Subscribe<P<T>>(Action<T> callback) where P : ISubscriberProvider<T> 
```

这不是有效的语法。

这对 Scala 有效吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T18:46:10.577

我不知道 C#，但它看起来像

```
def subscribe[T, P <: SubscriberProvider[T]](fun: T => Unit): Unit 
```

但是该类型`P`并未在参数或返回类型中的任何地方使用，因此不确定您可以使用它。

# windows - 在 Windows 和 Linux 之间运行 Jack

> ID：11993346
> 
> 赞同：2
> 
> 时间：2012-08-16T18:34:16.333
> 
> 标签：windows, linux, networking, audio, jack

*我需要两个系统运行，系统 A 上的麦克风实时*连接到系统 B 上的扬声器，反之亦然。

我目前设置了三个系统：

*   软呢帽

    *   杰克工作正常
*   Ubuntu
    *   杰克在识别麦克风时遇到问题
*   视窗
    *   杰克工作正常

我可以很好地在两个 linux 系统之间连接 Jack，但是由于 ubuntu 系统在麦克风方面存在插孔问题，我试图让 Windows 与它们中的任何一个进行通信，但到目前为止无济于事。我试过用谷歌搜索，但人们似乎要么说“它有效！” 或“它有问题！” 没有提供细节。

是否有使用 netjack W<->L 的规范方法？

非常感谢我能得到的**任何帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:28:48.457

你可以试试[jacktrip](https://ccrma.stanford.edu/groups/soundwire/software/jacktrip/)，它有一个实验性的[windows客户端](https://ccrma.stanford.edu/~jcaceres/tmp/jacktrip-windows/)。

人们还报告说[soundjack](http://www.carot.de/soundjack/) .eu 应该很好用，但我从未测试过它（并且在他们的网站上找不到 linux 客户端）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-15T04:23:10.870

我能够使用 netjack2 从 Windows 到 Linux 进行音频播放。我在这里写了一篇小文章：[https ://gist.github.com/kotarou3/3813bbf7833a0e4618f7fbe8a377872d](https://gist.github.com/kotarou3/3813bbf7833a0e4618f7fbe8a377872d)

此处部分引用供后人参考：

> # 将音频从 Windows 流式传输到 Linux
> 
> 在 Ubuntu 16.04 和 Windows 10 Redstone 1 上测试
> 
> 两个盒子需要在同一个网络上（这样多播数据包可以在它们之间传递）
> 
> ## 安装
> 
> ### Linux
> 
> 1.  [设置 JACK（使用Cadence](http://kxstudio.linuxaudio.org/Applications:Cadence)轻松完成）
> 
> ### 视窗
> 
> 1.  在 Windows机器上安装 JACK 和[ASIO Bridge](http://vb-audio.pagesperso-orange.fr/Cable/)
> 2.  运行`regsvr32 32bits\JackRouter.dll`并`regsvr32 64bits\JackRouter.dll`从 JACK 安装目录
> 3.  修改`32bits\JackRouter.ini`并`64bits\JackRouter.ini`匹配您的频道和示例配置
> 4.  （可选）将 ASIO Bridge ( *Hi-Fi Audio* ) 输入设置为默认播放设备
> 
> ## 跑步
> 
> 1.  在 Linux 上启动 netjack2 服务器`jack_load netmanager`（可能也可以添加到`.jackdrc`它以自动加载）
> 2.  在 Windows 上运行 JACK NetDriver（它在开始菜单中），或者`jackd -R -d net`
> 3.  一个名为 Windows 主机名的新设备应该出现在 Linux JACK 配线架上（如果您使用的是 Cadence，则为[Catia ）。](http://kxstudio.linuxaudio.org/Applications:Catia)按照您认为合适的方式连接它（注意：如果您有 2 个以上的通道，则通道可能无法按预期匹配）。
> 4.  运行 ASIO Bridge（也在开始菜单中），打开 ASIO，并将 ASIO 设备设置为 JackRouter
> 5.  ASIO Bridge 应该在 Windows JACK 接线板中自动设置到系统设备的路由。您可以仔细检查 qjackctl （开始菜单中的*Jack Control ）→* *Connections* 并连接它们，如果没有

我想这可以通过使用 Windows 的麦克风到扬声器环回功能（它在 Windows 10 的麦克风配置中）进一步适应从 Windows 获取麦克风输入，尽管以更多延迟为代价。基本上让 Windows 将麦克风发送到 ASIO Bridge 输入。

# php - 我想更改此功能中的分隔符

> ID：11993350
> 
> 赞同：1
> 
> 时间：2012-08-16T18:34:25.233
> 
> 标签：php, preg-replace

这个函数

```
function genTags($tags,$sep=',')
{

    $tags = preg_replace(array('/ ,/','/, /'),',',$tags);
    $tags = preg_replace( "`[,]+`" , ",", $tags);
    $tag_array = explode($sep,$tags);
    foreach($tag_array as $tag)
    {
        if(isValidtag($tag))
        {
            $newTags[] = $tag;
        }

    }

    if(is_array($newTags))
        $tagString = implode(',',$newTags);
    else
        $tagString = 'no-tag';
    return $tagString;
} 
```

生成由“，”分隔的标签，要更改哪些标签之间有空格，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:38:39.910

`implode`将调用中的逗号更改为空格：

```
$tagString = implode(' ', $newTags); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:38:11.293

改变

```
$tagString = implode(',',$newTags); 
```

至

```
$tagString = implode(' ',$newTags); 
```

# javascript - ext.window 打开时禁用鼠标单击网格 extjs 3

> ID：11993352
> 
> 赞同：2
> 
> 时间：2012-08-16T18:34:30.973
> 
> 标签：javascript, extjs, extjs3

我有一个 Ext.GridPanel 和一个 Ext.Window 用于更改网格面板的单击行的值。我想做的是禁用网格上的鼠标单击（左右），直到打开 ext 窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:40:59.587

我不清楚您是否在窗口打开或关闭时说禁用，正如您在标题和问题之间所说的那样。

但是，如果您指的是窗口何时打开，最好的办法是使窗口模态化，因此当窗口打开时，下面的网格会被屏蔽。

只需将以下内容添加到您的窗口配置中

```
{
  ...
  modal: true,
  ..
} 
```

# knockout.js - 如何使用 knockout.js 将页面绑定到集合中的项目

> ID：11993360
> 
> 赞同：0
> 
> 时间：2012-08-16T18:35:04.377
> 
> 标签：knockout.js

我有一个视图模型（调查），它有一个成员（questions.current），它是一个指向当前问题的索引器。每个问题都有一个需要绑定到屏幕的属性 (.text)。这是场景：

```
survey.questions.current.text
survey.questions.movenext() 
```

我希望屏幕上的文本显示当前问题的文本值。随着我的前进，我希望此文本能够自动更新。

处理它的一种方法是拥有一个（ko.observable）survey.questions.currentText 属性，该属性在执行 movenext 或 moveprevious 函数时自动更新。但是，这可能不是最干净的方法，因为我还有其他值（包括与单个问题相关的选择）也需要在屏幕上更新，并且我不想为每个属性创建重复项。

将 text 属性设为 observable 是不合适的，因为问题文本永远不会改变。当前选择的问题发生了变化，需要触发屏幕上项目的更新。

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:52:28.523

`with`绑定是一种选择，如此处所示，在这个[小提琴](http://jsfiddle.net/tyrsius/7c6cV/)中。由于`currentQuestion`是可观察的，因此虚拟元素将随之更新，即使绑定到不可观察的属性也是如此。

```
<!-- ko with: currentQuestion-->
    <span data-bind="text: text"></span>
<!-- /ko -->​ 
```

我不知道您实际上是如何更改选择的，所以我只是将它绑定到 a `select`，但是您可以根据需要进行选择。

# c# - ASP.Net Web Api - ApiExplorer 不包含任何 ApiDescriptions

> ID：11993361
> 
> 赞同：14
> 
> 时间：2012-08-16T18:35:05.867
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api, asp.net-mvc-apiexplorer

我正在尝试在我的 Web 服务的控制器中实现 Options 方法，该方法将返回一条消息，其中包含与控制器关联的 URI 端点的有效 HTTP 方法。我的 Options 方法如下所示：

```
public HttpResponseMessage Options()
{
    var resp = new HttpResponseMessage();
    resp.Content = new StringContent("");

    var apiExplorer = GlobalConfiguration.Configuration.Services
        .GetApiExplorer();

    foreach (ApiDescription api in apiExplorer.ApiDescriptions)
    {
        resp.Content.Headers.Add("Allow", api.HttpMethod.Method);
    }

    return resp;
} 
```

我已经在一个带有 Get、Post 和 Delete 方法的控制器内部的全新 Web Api 项目（含义：未更改的路由）中尝试了上述方法。正如预期的那样，返回“允许：GET、POST、DELETE”的响应。但是，我遇到了麻烦，将其添加到我正在处理的更大项目中。在较大的项目中，ApiExplorer 中的 ApiDescriptions 列表不包含任何元素。为什么是这样？我怀疑这是由于已实施的自定义路由，尽管这种怀疑的唯一依据是以下链接：

[http://forums.asp.net/t/1821651.aspx/1](http://forums.asp.net/t/1821651.aspx/1)

有没有其他人经历过这个空的 ApiDescription 列表？如果是这样，你找到补救措施了吗？

注意：我使用的是 MCV 4 RC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-04T09:31:24.700

如果您使用 Glimpse，您可能必须禁用它的路由检查器：

```
<glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">
  <logging level="Off" />
  <tabs>
    <ignoredTypes>
      <add type="Glimpse.AspNet.Tab.Routes, Glimpse.AspNet" />
    </ignoredTypes>
  </tabs>
  <inspectors>
    <ignoredTypes>
      <add type="Glimpse.AspNet.Inspector.RoutesInspector, Glimpse.AspNet" />
    </ignoredTypes>
  </inspectors>
</glimpse> 
```

Glimpse 创建破坏 HostedHttpRouteCollection 枚举的 RouteProxies： [https ://github.com/mono/aspnetwebstack/blob/master/src/System.Web.Http.WebHost/Routing/HostedHttpRouteCollection.cs](https://github.com/mono/aspnetwebstack/blob/master/src/System.Web.Http.WebHost/Routing/HostedHttpRouteCollection.cs)

我知道该链接适用于单声道，但标准.Net 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:46:10.103

您应该考虑升级到昨天发布的 WebApi 的 RTM，然后查看昨天也发布的新发布的[ASP.NET WebApi 帮助页面（预览版）](http://blogs.msdn.com/b/yaohuang1/archive/2012/08/15/introducing-the-asp-net-web-api-help-page-preview.aspx)。

> 此软件包会自动为您网站上的 Web API 生成帮助页面内容。您的帮助页面的访问者可以使用此内容来了解​​如何调用您的 Web API。帮助页面生成的所有内容都可以使用 ASP.NET MVC 和 Razor 完全自定义。

它正在幕后实现 ApiExplorer。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T13:25:04.693

这个问题的解决方案是在**ProjectName\Areas\HelpPage\Controllers\HelpController.cs** 中注释如下构造函数：

```
 public class HelpController : Controller
        {
            private const string ErrorViewName = "Error";

    //        public HelpController()
    //            : this(GlobalConfiguration.Configuration)
    //        {
    //        }

    //        public HelpController(HttpConfiguration config)
    //        {
    //            Configuration = config;
    //        }

            /// <summary>
            /// GlobalConfiguration By default
            /// </summary>
            protected static HttpConfiguration Configuration
            {
                get { return GlobalConfiguration.Configuration; }
            }

            public ActionResult Index()
            {
                ViewBag.DocumentationProvider = Configuration.Services.GetDocumentationProvider();
                return View(Configuration.Services.GetApiExplorer().ApiDescriptions);
            }
.... 
```

不调用默认构造函数；

第二种方法是通过在默认构造函数上添加此属性 **[InjectionConstructor]**来注入默认构造函数，如下所示：

```
public class HelpController : Controller
    {
        private const string ErrorViewName = "Error";

         [InjectionConstructor]
        public HelpController()
            : this(GlobalConfiguration.Configuration)
        {
        }

        public HelpController(HttpConfiguration config)
        {
            Configuration = config;
        }

        /// <summary>
        /// GlobalConfiguration By default
        /// </summary>
        protected static HttpConfiguration Configuration { get; private set; }
.... 
```

# c#-4.0 - C# 控制台应用程序错误“非静态字段、方法或属性需要对象引用”

> ID：11993371
> 
> 赞同：-3
> 
> 时间：2012-08-16T18:35:33.850
> 
> 标签：c#-4.0

> 错误 1 ​​非静态字段、方法或属性 'ConsoleApplication_FileTest.Program.GetAverageSalary(string)' C:\Users\Dawn\documents\visual studio 11\Projects\ConsoleApplication_FileTest\ConsoleApplication_FileTest\Program.cs 需要对象引用98 24 控制台应用程序_文件测试

```
static void Main(string[] args)
{

    Dictionary<string, double> averages = new Dictionary<string, double>();
    string filename = "c:\\test.txt";
    averages = GetAverageSalary(filename)
} 
```

======================

```
 Dictionary<string, double> GetAverageSalary(string filename)
        {
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:41:41.677

方法`GetAverageSalary`不是`static`。您必须将其更改为

```
static Dictionary<string, double> GetAverageSalary(string filename) 
```

# php - 检查 Wordpress 中是否存在自定义字段

> ID：11993373
> 
> 赞同：1
> 
> 时间：2012-08-16T18:35:41.763
> 
> 标签：php, wordpress, custom-fields

这是我关于 Stack Overflow 的第一个问题，请耐心等待。

我有一个`WordPress`安装了高级自定义字段插件的站点。该站点有一个自定义帖子类型，其中附加了各种 ACF 自定义字段。

并非所有自定义字段都是必需的，一些自定义字段也被分组到它们自己的表格结构中。

我需要检查 2 个自定义字段中的任何一个是否有内容，以及它们是否显示表格。

我`PHP`的能力相当有限，但我做了一些研究，它应该可以工作，但事实并非如此。

代码如下：

```
<?php if (get_field( 'meeting_documents_agendas' && 'meeting_documents_minutes')) : ?>

    <?php if ( get_field( 'meeting_documents_agendas' ) ) : ?>
        <a href="<?php echo get_field('meeting_documents_agendas');?>">Download file</a>
    <? endif ?>

    <?php if ( get_field( 'meeting_documents_minutes' ) ) : ?>
        <a href="<?php echo get_field('meeting_documents_minutes');?>">Download file</a>
    <? endif ?>

<? endif ?> 
```

基本上没有显示任何内容，即使我在这些自定义字段中有内容。

代码对吗？这可能是一个`WordPress`错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T18:50:42.097

尝试

```
<? if (get_field('meeting_documents_agendas') || get_field('meeting_documents_minutes')): ?> 
```

这意味着：如果设置了一个或两个字段，则显示表格。

不要使用`&&`，因为这意味着必须设置**两个字段。**使用`get_field()`两次，因为您希望逻辑链接 的**结果**，`get_fields()`而不是参数本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-30T22:33:25.717

这对我也很有帮助。虽然我的问题有点不同，因为我使用的是 sub_fields。我需要代码来检查两个 sub_fields 是否都有数据。

这是我的代码。

```
<?php if (get_sub_field( 'additional_link_url' ) && get_sub_field('additional_link_text') ) : ?>
			  <br /><a target="_blank" href="<?php echo get_sub_field('additional_link_url')['url']; ?>"><?php echo get_sub_field('additional_link_text'); ?></a>

<?php endif; ?>
```

# c# - 尝试使用 Workgroup Server 上的 PrincipalContext 进行连接会返回无效用户。

> ID：11993374
> 
> 赞同：0
> 
> 时间：2012-08-16T18:35:42.450
> 
> 标签：c#, winforms, windows-server

我想创建一个应用程序来编辑服务器上的用户帐户。

服务器不使用仅 AD 本地帐户。

我使用以下代码连接远程服务器：

```
try
{
    PrincipalContext oPrincipalContext = new PrincipalContext(ContextType.Machine, "192.168.123.110", null, ContextOptions.Negotiate, "Administrator", "password");
    try
    {
        MessageBox.Show(oPrincipalContext.ConnectedServer);
        GroupPrincipal oGroupPrincipal = GroupPrincipal.FindByIdentity(oPrincipalContext, "Goetter");
        try
        {
            // perform operations here
        }
        finally
        {
            oGroupPrincipal.Dispose();
        }
    }
    finally
    {
        oPrincipalContext.Dispose();
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

每当我尝试这个时，我都会得到一个异常，即用户和/或密码未经授权，与我使用的用户无关。Administrator 是内置的 Admin 用户帐户。

`PrincipalContext`仅适用于 AD 还是也适用于本地帐户？我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:43:44.207

```
using(PrincipalContext oPrincipalContext = new PrincipalContext(ContextType.Machine, computer.Name, null, ContextOptions.Negotiate, Settings.UserName, Settings.UserPassword))
using(GroupPrincipal oGroupPrincipal = GroupPrincipal.FindByIdentity(oPrincipalContext, Settings.AdministratorsGroup))
{
    // perform operations here
} 
```

更改您的代码并将其包装在**using**语句中，否则您在尝试调用 Dispose() 方法时可能会遇到一些错误，原因是您尝试处理连接时可能已经关闭。

如果您使用 ActiveDirectory，您可以在此处使用此代码并尝试任一示例

示例 1

如果您使用 .NET 3.5，则可以使用 System.DirectoryServices.AccountManagement 命名空间并轻松验证您的凭据：

```
// create a "principal context" - e.g. your domain (could be machine, too)
using(PrincipalContext pc = new PrincipalContext(ContextType.Domain, "YOURDOMAIN"))
{
    // validate the credentials
    bool isValid = pc.ValidateCredentials("myuser", "mypassword");
} 
```

示例 2

```
using System.Security;
using System.DirectoryServices.AccountManagement;

public struct Credentials
{
    public string Username;
    public string Password;
}

public class Domain_Authentication
{
    public Credentials Credentials;
    public string Domain;

    public Domain_Authentication(string Username, string Password, string SDomain)
    {
        Credentials.Username = Username;
        Credentials.Password = Password;
        Domain = SDomain;
    }

    public bool IsValid()
    {
        using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, Domain))
        {
            // validate the credentials
            return pc.ValidateCredentials(Credentials.Username, Credentials.Password);
        }
    }
} 
```

上面的公共 bool IsValid() 方法应该适用于您要查找的内容。

[看看 PrincipalContext.ValidateCredentials](http://msdn.microsoft.com/en-us/library/bb154889.aspx)

对于您的 FindByIdentity 部分，您可以尝试以下替换代码

```
string strName = System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
// This is here because of a .Net error that gets 0x80005000 on "isUser = user.IsMemberOf(groupU);"
string domainName = strName.Split('\\')[0]; 
var pc = new PrincipalContext(ContextType.Domain, domainName); 
```

附加参考链接 StackOverFlow Post [ContextType.Machine](https://stackoverflow.com/questions/11463353/getting-file-permissions-across-the-network)

# python - Google App Engine 的管道损坏错误

> ID：11993381
> 
> 赞同：1
> 
> 时间：2012-08-16T18:36:22.993
> 
> 标签：python, google-app-engine

我在使用 gae/python 时遇到了一个损坏的管道错误，而且我能找到的解决方案似乎都不适用于我的情况。（例如，下面的问题类似，但它取决于提交与按钮的使用，这不是我的问题）。

[Google App Engine 和 jQuery Ajax 导致 Broken Pipe 错误](https://stackoverflow.com/questions/4878523/google-app-engine-jquery-ajax-causes-a-broken-pipe-error)

这是我的javascript：

```
var testVar = [1,2]

function testFun() {
    jQuery.post("http://localhost:8084",testVar.toString(), function()
    {
        console.log( "post ok" );
    }
)
document.write(testVar)
} 
```

这是HTML：

```
<!doctype html>

<html>

<head>
<title>Experiment</title>
<meta charset="utf-8" />
<style type="text/css">  </style>
<script type="text/javascript" src="lib/jquery/jquery-1.4.2.js"></script>
<script src="js/posttestjs.js"></script>

</head>

<body>

<input id = "start_button" type="button" onclick= "testFun()" value="begin"> 

</body>

</html> 
```

这是我的蟒蛇：

```
from google.appengine.ext import db
import webapp2
import logging

class data(webapp2.RequestHandler):
    def post(self):
        logging.info('CHECK1')
        self.response.out.write("""<html><body> CHECK2 </body></html>""")

app = webapp2.WSGIApplication([('/', data)] , debug = True) 
```

我得到的错误是这样的：

```
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line     284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line     310, in process_request
    self.finish_request(request, client_address)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line     323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-        default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver.py", line     2630, in __init__
BaseHTTPServer.BaseHTTPRequestHandler.__init__(self, *args, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 640, in __init__
    self.finish()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line     693, in finish
    self.wfile.flush()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in     flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

最后，这是我的 .yaml 文件：

```
application: posttestjs
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /static
  static_dir: static
- url: /.*
  script: posttestjs.app 
```

我在日志中看到CHECK1，所以我认为帖子接收正常，但响应不起作用。

如果相关：我使用的是 firefox 和 python 2.7.3。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:06:10.220

奇怪的是，当我开始将发布的数据放入 GAE 数据存储时，问题就消失了。我看不出有什么好的理由可以解决这个问题，但它似乎已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:47:02.410

查看我的一个工作示例（一个在 dev_appserver 上工作的示例），我注意到两件事。这是我所做的（稍微简化）：

```
jQuery.post("/", {'key': 47}, function(response) {
   ...
}); 
```

首先，我没有传递明确的端口。在您的情况下，除非您使用 dev_appserver 运行，否则您`--port 8084`将无法连接。

其次，我正在传递一个字典，你正在传递一个列表。[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)并没有说传递列表有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T02:57:02.067

据我所知，这是一条评论：

```
self.response.out.write("""<html><body> CHECK2 </body></html>""") 
```

那些应该是单引号。

# html - 获取多个变量到一个 URL 地址

> ID：11993383
> 
> 赞同：0
> 
> 时间：2012-08-16T18:36:25.710
> 
> 标签：html

我已经设置了一个页面，其中包含 5 个不同的变量，这些变量将由 html 中的保管箱选择。我试图让 Get QPE 按钮使用所有选择的变量，并将它们插入到网址中以创建地图。但网址显示参数为“未定义”- [http://nmq.ou.edu/cgi-bin/tools_QPE.cgi?1+0+2+undefined+undefined+undefined+undefined+0+0+34.50+ -114.00+32.50+800+632+4101+0+0+1+0+Q2RAD_HSR+Q2RAD_HSR_GC+未定义+英文+无+CNTY](http://nmq.ou.edu/cgi-bin/tools_QPE.cgi?1+0+2+undefined+undefined+undefined+undefined+0+0+34.50+-114.00+32.50+800+632+4101+0+0+1+0+Q2RAD_HSR+Q2RAD_HSR_GC+undefined+english+none+CNTY)。如何让文件读取我的选择？这是我拥有的变量和 JS 之一的代码。

```
<p>QPE - Gauge Adj. Radar<br></p>
Select data ending date, time and timestep:<br>

<form name="SelectURL6" id="SelectURL6">
<select name="ME">
  <option VALUE="1" selected> January </option>
  <option VALUE="2"> February </option>
  <option VALUE="3"> March </option>
  <option VALUE="4"> April </option>
  <option VALUE="5"> May </option>
  <option VALUE="6"> June </option>
  <option VALUE="7"> July </option>
  <option VALUE="8"> August </option>
  <option VALUE="9"> September </option>
  <option VALUE="10"> October </option>
  <option VALUE="11"> November </option>
  <option VALUE="12"> December </option></select>
<select name="DE">
  <option VALUE="1" selected> 1 </option>
  <option VALUE="2"> 2 </option>
  <option VALUE="3"> 3 </option>
  <option VALUE="4"> 4 </option>
  <option VALUE="5"> 5 </option>
  <option VALUE="6"> 6 </option>
  <option VALUE="7"> 7 </option>
  <option VALUE="8"> 8 </option>
  <option VALUE="9"> 9 </option>
  <option VALUE="10"> 10 </option>
  <option VALUE="11"> 11 </option>
  <option VALUE="12"> 12 </option>
  <option VALUE="13"> 13 </option>
  <option VALUE="14"> 14 </option>
  <option VALUE="15"> 15 </option>
  <option VALUE="16"> 16 </option>
  <option VALUE="17"> 17 </option>
  <option VALUE="18"> 18 </option>
  <option VALUE="19"> 19 </option>
  <option VALUE="20"> 20 </option>
  <option VALUE="21"> 21 </option>
  <option VALUE="22"> 22 </option>
  <option VALUE="23"> 23 </option>
  <option VALUE="24"> 24 </option>
  <option VALUE="25"> 25 </option>
  <option VALUE="26"> 26 </option>
  <option VALUE="27"> 27 </option>
  <option VALUE="28"> 28 </option>
  <option VALUE="29"> 29 </option>
  <option VALUE="30"> 30 </option>
  <option VALUE="31"> 31 </option></select>
<select name="YE">
  <option SELECTED value="2012">2012</option>
  <option value="2011">2011</option></select>
<select name="TE">
  <option VALUE="7" selected>12:00 Midnight</option>                  <option VALUE="8">1:00 AM</option>                  
  <option VALUE="9">2:00 AM</option>
  <option VALUE="10">3:00 AM</option>                  
  <option VALUE="11">4:00 AM</option>
  <option VALUE="12">5:00 AM</option>                  
  <option VALUE="13">6:00 AM</option>
  <option VALUE="14">7:00 AM</option>                  
  <option VALUE="15">8:00 AM</option>
  <option VALUE="16">9:00 AM</option>                  
  <option VALUE="17">10:00 AM</option>
  <option VALUE="18">11:00 AM</option>                  
  <option VALUE="19">12:00 Noon</option>
  <option VALUE="20">1:00 PM</option>                  
  <option VALUE="21">2:00 PM</option>
  <option VALUE="22">3:00 PM</option>                  
  <option VALUE="23">4:00 PM</option>
  <option VALUE="24">5:00 PM</option>
  <option VALUE="0">6:00 PM</option>                  
  <option VALUE="1">7:00 PM</option>
  <option VALUE="2">8:00 PM</option>                  
  <option VALUE="3">9:00 PM</option>
  <option VALUE="4">10:00 PM</option>                  
  <option VALUE="5">11:00 PM</option>
  <option VALUE="6">12:00 PM</option></select>   
<select name="TS">
  <option VALUE="1">1-hour</option>
  <option VALUE="3">3-hour</option>
  <option VALUE="6">6-hour</option>
  <option VALUE="12">12-hours</option>
  <option SELECTED value="24">24-hours</option>
  <option VALUE="48">48-hours</option>
  <option VALUE="72">72-hours</option></select><br><br>
<input type="button" value="Get QPE Map" id="submit">
    </form>

    <script language="JavaScript" type="text/javascript">
function listen(event, elem, func) {
  if (elem.addEventListener) return elem.addEventListener(event, func, false);
  else return elem.attachEvent('on' + event, func);    
}

var form = document.getElementById('SelectURL6'),
    btn = document.getElementById('submit');
listen('click', btn, function() {
    var selectElems = form.getElementsByTagName('select'),
    TE = TE+7;
    if (ME==12 && DE==31 && TE>24){
        return (YE==YE + 1 && ME==1 && DE==1 && TE==TE -24);
    }
    if (DE==31 && TE>24){
        return (ME==ME + 1 && DE==1 && TE==TE - 24);
    }
    if (DE==30 && ME==4 && TE==24){
        return (ME==ME + 1 && DE==1 && TE==TE - 24);
    }
    if (DE=30 && ME==6 && TE==24){
        return (ME=ME + 1 && DE==1 && TE==TE - 24);
    }
    if (DE==30 && ME==9 && TE==24){
        return (ME==ME + 1 && DE==1 && TE==TE - 24);
    }
    if (DE==30 && ME==12 && TE==24){
        return (ME==ME + 1 && DE==1 && TE==TE - 24);
    }
    if (TE>24){
        TE==TE - 24 && DE==DE + 1
    }
    get_qpe(selectElems);
});

function get_qpe(elems) {
    var url = '',
        YE, ME, DE, TE, TS, val = 0,
        names = [],
        thisElem;
    for (var i = 0; i < elems.length; i += 1) {
        thisElem = elems[i];
        names.push(thisElem.getAttribute('name'));
        val = thisElem.options[thisElem.selectedIndex].value;
        switch (names[i]) {
        case 'YE':
            YE = val;
            break;
        case 'ME':               
            ME = val;
            break;
        case 'DE':
            DE = val;
            break;
        case 'TE':
            TE = val;
            break;
        case 'TS':
            TS = val;
            break;
        }
    }
    url = "http://nmq.ou.edu/cgi-bin/tools_QPE.cgi?1+0+2+" + YE + "+" + ME + "+" + DE + "+" + TE + "+0+0+34.50+-114.00+32.50+800+632+4101+0+0+1+0+Q2RAD_HSR_GC+Q2RAD_HSR_GC+" + TS + "+english+none+CNTY";
    window.open(url);
}
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:57:04.330

由于您没有将任何参数传递给`get_qpe()`函数，因此这些变量将作为`undefined`. 试试这个：

将您的按钮更改为以下内容：

```
<input type="submit" value="Get QPE Map" id="submit"> 
```

然后添加以下 JavaScript：

```
function listen(event, elem, func) {
  if (elem.addEventListener) elem.addEventListener(event, func, false);
  else if (elem.attachEvent) {
    var r = elem.attachEvent("on" + event, func);
    return r;
  }
}

listen('load', window, function() {
  var form = document.getElementById('SelectURL6'),
      btn = document.getElementById('submit');

  function get_qpe(elems) {
    var url = '',
        o = {},
        val = 0,
        names = [],
        thisElem;
    for (var i = 0; i < elems.length; i += 1) {
      thisElem = elems[i];
      names.push(thisElem.getAttribute('name'));
      val = thisElem.options[thisElem.selectedIndex].value;
      o[names[i]] = parseInt(val);
    }
    o.TE = o.TE + 7;
    if (o.ME === 12 && o.DE === 31 && o.TE > 24) {
      o.YE = o.YE + 1;
      o.ME = 1;
      o.DE = 1;
      o.TE = o.TE - 24;
    } else if (o.DE === 31 && o.TE > 24) {
      o.ME = o.ME + 1;
      o.DE = 1;
      o.TE = o.TE - 24;
    } else if (o.DE === 30 && o.ME === 4 && o.TE === 24) {
      o.ME = o.ME + 1;
      o.DE = 1;
      o.TE = o.TE - 24;
    } else if (o.DE === 30 && o.ME === 6 && o.TE === 24) {
      o.ME = o.ME + 1;
      o.DE = 1;
      o.TE = o.TE - 24;
    } else if (o.DE === 30 && o.ME === 9 && o.TE === 24) {
      o.ME = o.ME + 1;
      o.DE = 1;
      o.TE = o.TE - 24;
    } else if (o.DE === 30 && o.ME === 12 && o.TE === 24) {
      o.ME = o.ME + 1;
      o.DE = 1;
      o.TE = o.TE - 24;
    } else if (o.TE > 24) {
      o.TE = o.TE - 24;
      o.DE = o.DE + 1;
    }
    url = "http://nmq.ou.edu/cgi-bin/tools_QPE.cgi?1+0+2+" + o.YE + "+" + o.ME + "+" + o.DE + "+" + o.TE + "+0+0+34.50+-114.00+32.50+800+632+4101+0+0+1+0+Q2RAD_HSR+Q2RAD_HSR_GC+" + o.TS + "+english+none+CNTY";
    window.open(url);
  }
  listen('click', btn, function() {
    var selectElems = form.getElementsByTagName('select'),
        i = 0;
    get_qpe(selectElems);
  });
}); 
```

这是您可以参考的[jsFiddle 。](http://jsfiddle.net/9dM4Q/7/)

# mysql - 查询需要 30 多分钟 -- 我怎样才能加快速度？（包括解释和架构）

> ID：11993389
> 
> 赞同：9
> 
> 时间：2012-08-16T18:36:50.780
> 
> 标签：mysql, sql

目标：**按地区显示每个种族和年份的种族数据占总数的百分比。**

问题：查询需要超过 30 分钟才能运行。我想把这个时间缩短到 10 秒以下。是否有另一种策略来解决我没有想到的这个问题？

询问：

```
SELECT field_data_field_district_id.field_district_id_value as district_id, year, race, ROUND(SUM(count)/(
SELECT SUM(count)
FROM school_data_race_ethnicity_raw as school_data_race_ethnicity_raw_inner
INNER JOIN field_data_field_school_id as field_data_field_school_id_inner ON field_data_field_school_id_inner.field_school_id_value = school_data_race_ethnicity_raw_inner.school_id
INNER JOIN field_data_field_district as field_data_field_district_inner ON field_data_field_district_inner.entity_id = field_data_field_school_id_inner.entity_id
INNER JOIN field_data_field_district_id as field_data_field_district_id_inner ON field_data_field_district_inner.field_district_nid = field_data_field_district_id_inner.entity_id
WHERE field_data_field_district_id_inner.field_district_id_value = field_data_field_district_id.field_district_id_value and
school_data_race_ethnicity_raw_inner.year = school_data_race_ethnicity_raw.year
) * 100 ,2) as percent 
FROM school_data_race_ethnicity_raw
INNER JOIN field_data_field_school_id ON field_data_field_school_id.field_school_id_value = school_data_race_ethnicity_raw.school_id
INNER JOIN field_data_field_district ON field_data_field_district.entity_id = field_data_field_school_id.entity_id
INNER JOIN field_data_field_district_id ON field_data_field_district.field_district_nid = field_data_field_district_id.entity_id
GROUP BY district_id, year, race 
```

解释：

```
+----+--------------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+
| id | select_type        | table                                | type | possible_keys                | key                | key_len | ref                                                                | rows  | Extra                           |
+----+--------------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+
|  1 | PRIMARY            | field_data_field_district_id         | ALL  | entity_id                    | NULL               | NULL    | NULL                                                               |   685 | Using temporary; Using filesort |
|  1 | PRIMARY            | field_data_field_district            | ref  | entity_id,field_district_nid | field_district_nid | 5       | rocdocs_main_drupal_7.field_data_field_district_id.entity_id       |     3 | Using where; Using index        |
|  1 | PRIMARY            | field_data_field_school_id           | ref  | entity_id                    | entity_id          | 4       | rocdocs_main_drupal_7.field_data_field_district.entity_id          |     1 |                                 |
|  1 | PRIMARY            | school_data_race_ethnicity_raw       | ALL  | NULL                         | NULL               | NULL    | NULL                                                               | 97098 | Using where; Using join buffer  |
|  2 | DEPENDENT SUBQUERY | field_data_field_district_id_inner   | ALL  | entity_id                    | NULL               | NULL    | NULL                                                               |   685 | Using where                     |
|  2 | DEPENDENT SUBQUERY | field_data_field_district_inner      | ref  | entity_id,field_district_nid | field_district_nid | 5       | rocdocs_main_drupal_7.field_data_field_district_id_inner.entity_id |     3 | Using where; Using index        |
|  2 | DEPENDENT SUBQUERY | field_data_field_school_id_inner     | ref  | entity_id                    | entity_id          | 4       | rocdocs_main_drupal_7.field_data_field_district_inner.entity_id    |     1 |                                 |
|  2 | DEPENDENT SUBQUERY | school_data_race_ethnicity_raw_inner | ref  | year                         | year               | 4       | func                                                               | 32366 | Using where                     |
+----+--------------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+ 
```

表：

school_data_race_ethnicity_raw -（约 100,000 行）

```
mysql> show create table school_data_race_ethnicity_raw;
+--------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table                          | Create Table                                                                                                                                                                                                                                                                                                                                                                                                  |
+--------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| school_data_race_ethnicity_raw | CREATE TABLE `school_data_race_ethnicity_raw` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `school_id` varchar(255) NOT NULL,
  `year` int(11) NOT NULL,
  `race` varchar(255) NOT NULL,
  `count` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `school_id` (`school_id`,`year`),
  KEY `year` (`year`,`race`),
  KEY `school_id_2` (`school_id`)
) ENGINE=MyISAM AUTO_INCREMENT=97099 DEFAULT CHARSET=latin1 |
+--------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

field_data_field_school_id - 大约。5000 行

```
mysql> show create table field_data_field_school_id;
+----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table                      | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
+----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| field_data_field_school_id | CREATE TABLE `field_data_field_school_id` (
  `entity_type` varchar(128) NOT NULL DEFAULT '' COMMENT 'The entity type this data is attached to',
  `bundle` varchar(128) NOT NULL DEFAULT '' COMMENT 'The field instance bundle to which this row belongs, used when deleting a field instance',
  `deleted` tinyint(4) NOT NULL DEFAULT '0' COMMENT 'A boolean indicating whether this data item has been deleted',
  `entity_id` int(10) unsigned NOT NULL COMMENT 'The entity id this data is attached to',
  `revision_id` int(10) unsigned DEFAULT NULL COMMENT 'The entity revision id this data is attached to, or NULL if the entity type is not versioned',
  `language` varchar(32) NOT NULL DEFAULT '' COMMENT 'The language for this data item.',
  `delta` int(10) unsigned NOT NULL COMMENT 'The sequence number for this data item, used for multi-value fields',
  `field_school_id_value` varchar(255) DEFAULT NULL,
  `field_school_id_format` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`entity_type`,`entity_id`,`deleted`,`delta`,`language`),
  KEY `entity_type` (`entity_type`),
  KEY `bundle` (`bundle`),
  KEY `deleted` (`deleted`),
  KEY `entity_id` (`entity_id`),
  KEY `revision_id` (`revision_id`),
  KEY `language` (`language`),
  KEY `field_school_id_format` (`field_school_id_format`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Data storage for field 234 (field_school_id)' |
+----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

field_data_field_district - 大约。5000 行

```
mysql> show create table field_data_field_district;
+---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table                     | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
+---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| field_data_field_district | CREATE TABLE `field_data_field_district` (
  `entity_type` varchar(128) NOT NULL DEFAULT '' COMMENT 'The entity type this data is attached to',
  `bundle` varchar(128) NOT NULL DEFAULT '' COMMENT 'The field instance bundle to which this row belongs, used when deleting a field instance',
  `deleted` tinyint(4) NOT NULL DEFAULT '0' COMMENT 'A boolean indicating whether this data item has been deleted',
  `entity_id` int(10) unsigned NOT NULL COMMENT 'The entity id this data is attached to',
  `revision_id` int(10) unsigned DEFAULT NULL COMMENT 'The entity revision id this data is attached to, or NULL if the entity type is not versioned',
  `language` varchar(32) NOT NULL DEFAULT '' COMMENT 'The language for this data item.',
  `delta` int(10) unsigned NOT NULL COMMENT 'The sequence number for this data item, used for multi-value fields',
  `field_district_nid` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`entity_type`,`entity_id`,`deleted`,`delta`,`language`),
  KEY `entity_type` (`entity_type`),
  KEY `bundle` (`bundle`),
  KEY `deleted` (`deleted`),
  KEY `entity_id` (`entity_id`),
  KEY `revision_id` (`revision_id`),
  KEY `language` (`language`),
  KEY `field_district_nid` (`field_district_nid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Data storage for field 221 (field_district)' |
+---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

field_data_field_district_id - 大约：1000 行

```
mysql> show create table field_data_field_district_id;
+------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table                        | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
+------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| field_data_field_district_id | CREATE TABLE `field_data_field_district_id` (
  `entity_type` varchar(128) NOT NULL DEFAULT '' COMMENT 'The entity type this data is attached to',
  `bundle` varchar(128) NOT NULL DEFAULT '' COMMENT 'The field instance bundle to which this row belongs, used when deleting a field instance',
  `deleted` tinyint(4) NOT NULL DEFAULT '0' COMMENT 'A boolean indicating whether this data item has been deleted',
  `entity_id` int(10) unsigned NOT NULL COMMENT 'The entity id this data is attached to',
  `revision_id` int(10) unsigned DEFAULT NULL COMMENT 'The entity revision id this data is attached to, or NULL if the entity type is not versioned',
  `language` varchar(32) NOT NULL DEFAULT '' COMMENT 'The language for this data item.',
  `delta` int(10) unsigned NOT NULL COMMENT 'The sequence number for this data item, used for multi-value fields',
  `field_district_id_value` varchar(255) DEFAULT NULL,
  `field_district_id_format` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`entity_type`,`entity_id`,`deleted`,`delta`,`language`),
  KEY `entity_type` (`entity_type`),
  KEY `bundle` (`bundle`),
  KEY `deleted` (`deleted`),
  KEY `entity_id` (`entity_id`),
  KEY `revision_id` (`revision_id`),
  KEY `language` (`language`),
  KEY `field_district_id_format` (`field_district_id_format`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Data storage for field 218 (field_district_id)' |
+------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ 
```

注意：我唯一可以更改的表是 school_data_race_ethnicity_raw，因为其他表是由 drupal 生成的。

```
mysql> explain SELECT field_data_field_district_id_inner.field_district_id_value,
    ->             school_data_race_ethnicity_raw_inner.year,
    ->             SUM(count) as total
    ->         FROM school_data_race_ethnicity_raw as school_data_race_ethnicity_raw_inner
    ->         INNER JOIN field_data_field_school_id as field_data_field_school_id_inner 
    ->             ON field_data_field_school_id_inner.field_school_id_value 
    ->                 = school_data_race_ethnicity_raw_inner.school_id
    ->         INNER JOIN field_data_field_district as field_data_field_district_inner 
    ->             ON field_data_field_district_inner.entity_id 
    ->                 = field_data_field_school_id_inner.entity_id
    ->         INNER JOIN field_data_field_district_id as field_data_field_district_id_inner 
    ->             ON field_data_field_district_inner.field_district_nid 
    ->                 = field_data_field_district_id_inner.entity_id
    ->     GROUP BY field_district_id_value, year
    -> ;
+----+-------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+
| id | select_type | table                                | type | possible_keys                | key                | key_len | ref                                                                | rows  | Extra                           |
+----+-------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+
|  1 | SIMPLE      | field_data_field_district_id_inner   | ALL  | entity_id                    | NULL               | NULL    | NULL                                                               |   773 | Using temporary; Using filesort |
|  1 | SIMPLE      | field_data_field_district_inner      | ref  | entity_id,field_district_nid | field_district_nid | 5       | rocdocs_main_drupal_7.field_data_field_district_id_inner.entity_id |     3 | Using where; Using index        |
|  1 | SIMPLE      | field_data_field_school_id_inner     | ref  | entity_id                    | entity_id          | 4       | rocdocs_main_drupal_7.field_data_field_district_inner.entity_id    |     1 |                                 |
|  1 | SIMPLE      | school_data_race_ethnicity_raw_inner | ALL  | NULL                         | NULL               | NULL    | NULL                                                               | 97098 | Using where; Using join buffer  |
+----+-------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:15:15.760

这个怎么样：

```
SELECT field_data_field_district_id.field_district_id_value as district_id,
    x.year,
    race,
    ROUND(SUM(count)/(x.total) * 100 , 2) as percent 
FROM school_data_race_ethnicity_raw
INNER JOIN field_data_field_school_id 
    ON field_data_field_school_id.field_school_id_value 
        = school_data_race_ethnicity_raw.school_id
INNER JOIN field_data_field_district 
    ON field_data_field_district.entity_id 
        = field_data_field_school_id.entity_id
INNER JOIN field_data_field_district_id 
    ON field_data_field_district.field_district_nid 
        = field_data_field_district_id.entity_id
INNER JOIN (
    SELECT field_data_field_district_id_inner.field_district_id_value,
            school_data_race_ethnicity_raw_inner.year,
            SUM(count) as total
        FROM school_data_race_ethnicity_raw as school_data_race_ethnicity_raw_inner
        INNER JOIN field_data_field_school_id as field_data_field_school_id_inner 
            ON field_data_field_school_id_inner.field_school_id_value 
                = school_data_race_ethnicity_raw_inner.school_id
        INNER JOIN field_data_field_district as field_data_field_district_inner 
            ON field_data_field_district_inner.entity_id 
                = field_data_field_school_id_inner.entity_id
        INNER JOIN field_data_field_district_id as field_data_field_district_id_inner 
            ON field_data_field_district_inner.field_district_nid 
                = field_data_field_district_id_inner.entity_id
    GROUP BY field_district_id_value, year
) x ON x.field_district_id_value = field_data_field_district_id.field_district_id_value 
    AND x.year = school_data_race_ethnicity_raw.year
GROUP BY district_id, x.year, race 
```

我基本上将计算每个地区/年度总数的查询从 SELECT 中移到另一个 JOIN 中。

解释：

```
+----+-------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+
| id | select_type | table                                | type | possible_keys                | key                | key_len | ref                                                                | rows  | Extra                           |
+----+-------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+
|  1 | PRIMARY     | field_data_field_district_id         | ALL  | entity_id                    | NULL               | NULL    | NULL                                                               |   773 | Using temporary; Using filesort |
|  1 | PRIMARY     | field_data_field_district            | ref  | entity_id,field_district_nid | field_district_nid | 5       | rocdocs_main_drupal_7.field_data_field_district_id.entity_id       |     3 | Using where; Using index        |
|  1 | PRIMARY     | field_data_field_school_id           | ref  | entity_id                    | entity_id          | 4       | rocdocs_main_drupal_7.field_data_field_district.entity_id          |     1 |                                 |
|  1 | PRIMARY     | <derived2>                           | ALL  | NULL                         | NULL               | NULL    | NULL                                                               |  1902 | Using where; Using join buffer  |
|  1 | PRIMARY     | school_data_race_ethnicity_raw       | ref  | year                         | year               | 4       | x.year                                                             | 32366 | Using where                     |
|  2 | DERIVED     | field_data_field_district_id_inner   | ALL  | entity_id                    | NULL               | NULL    | NULL                                                               |   773 | Using temporary; Using filesort |
|  2 | DERIVED     | field_data_field_district_inner      | ref  | entity_id,field_district_nid | field_district_nid | 5       | rocdocs_main_drupal_7.field_data_field_district_id_inner.entity_id |     3 | Using where; Using index        |
|  2 | DERIVED     | field_data_field_school_id_inner     | ref  | entity_id                    | entity_id          | 4       | rocdocs_main_drupal_7.field_data_field_district_inner.entity_id    |     1 |                                 |
|  2 | DERIVED     | school_data_race_ethnicity_raw_inner | ALL  | NULL                         | NULL               | NULL    | NULL                                                               | 97098 | Using where; Using join buffer  |
+----+-------------+--------------------------------------+------+------------------------------+--------------------+---------+--------------------------------------------------------------------+-------+---------------------------------+
9 rows in set (4 min 0.59 sec) 
```

# ios - 用于 iOS 的私有 API，用于杀死其他应用程序

> ID：11993390
> 
> 赞同：2
> 
> 时间：2012-08-16T18:36:54.993
> 
> 标签：ios, iphone-privateapi

您是否知道任何允许杀死（而不是挂起）其他应用程序的 iOS 私有 API？

我对私有 API 很好，但它应该在被监禁的设备上工作。

通常的免责声明：这是针对内部企业应用程序的。我知道它不会被 AppStore 接受。

# javascript - 选中和取消选中 javascript 中的复选框

> ID：11993392
> 
> 赞同：1
> 
> 时间：2012-08-16T18:37:01.747
> 
> 标签：javascript, html, javascript-events

我有一个脚本可以检查并选中表单中的所有框，我的问题是我只希望它只影响我的复选框，但它也会影响我的单选按钮。

这是我的 javascript

```
 <script>

checked=false;
function checkedAll (frm1) {
    var aa= document.getElementById('frm1');
     if (checked == false)
          {
           checked = true
          }
        else
          {
          checked = false
          }
    for (var i =0; i < aa.elements.length; i++) 
    {
     aa.elements[i].checked = checked;
    }
      }
</script> 
```

这是我的html

```
<form id ="frm1">
<input type="checkbox" name="chk1">
<input type="radio" name="chk1">
<input type="checkbox" name="chk2">
<input type='checkbox' name='checkall' onclick='checkedAll(frm1);'>
</form> 
```

我想知道是否有办法只检查复选框而不是单选按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:38:58.613

```
for (var i =0; i < aa.elements.length; i++) 
{
    if (aa.elements[i].type == "checkbox") {
        aa.elements[i].checked = checked;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:42:39.210

您可以遍历表单元素并检查“类型”属性。或者，您可以使用 jQuery 之类的 javascript 库，它可以更轻松地选择特定类型的元素。

```
var elLength = document.MyForm.elements.length;

for (i=0; i<elLength; i++)
{
    var type = MyForm.elements[i].type;
    if (type=="checkbox" && MyForm.elements[i].checked){
        alert("Form element in position " + i + " is of type checkbox and is checked.");
    }
    else if (type=="checkbox") {
        alert("Form element in position " + i + " is of type checkbox and is not checked.");
    }
    else {
    }
} 
```

在 jQuery 中它将是：

```
$("input[type='checkbox']).each(function(chk) {
    chk.checked = !chk.checked;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:00:59.797

您可以使用[jquery](http://jquery.com)。在您的编辑器中使用下面的 html 代码。它工作正常！

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js">    </script>
</head>
    <form id="myform">  
       <input type="checkbox" />chk1  
       <input type="checkbox" />chk2<br/>    
       <input type="radio" />radio1<br/>       
       <a style="cursor:pointer" onclick="ch()">check/uncheck</a>
    </form>
</body></html> 
```

这个脚本：

```
 <script>
    function ch(){
        $("form#myform input[type='checkbox']").each(function(chk) {
            this.checked = !this.checked;
        });        
    }
 </script> 
```

# iphone - 有没有办法访问通知中心显示的通知？

> ID：11993393
> 
> 赞同：0
> 
> 时间：2012-08-16T18:37:07.367
> 
> 标签：iphone, ios, nsnotificationcenter, nsnotification

我有一种待办事项本地通知，可以正常触发。

因此，例如，如果 2 个通知已触发，则徽章编号变为 2。

现在我也喜欢在用户**直接启动应用程序**时处理这些通知- 而不是通过通知中心。

所以徽章编号为 2，用户**单击应用图标启动应用**，应用应该知道通知中心中有哪 2 个通知。

虽然我知道如何在它们触发之前获取所有预定的通知 - 有没有一种方法可以访问通知中心中存在的所有通知，因为它们已经触发。

由于用户也可以直接从通知中心清除通知，因此实际上无法从应用程序内部跟踪通知中心中显示的通知。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:41:44.360

iOS 不支持应用程序查询通知中心中有哪些通知。通知是发给用户而不是应用程序的通知（至少在用户对其采取行动之前）。

# image-processing - 在不使用重映射的情况下将 OpenCV 中的每个像素向右移动（1px）？

> ID：11993395
> 
> 赞同：2
> 
> 时间：2012-08-16T18:37:12.390
> 
> 标签：image-processing, opencv, remap

我想将图像中的每个像素向右移动 1px，下面是我用来进行重映射转换的地图。

这种方法需要比它应该做这样一个简单的转换更多的时间。有我可以使用的 cv 函数吗？还是我只是把图片分成2张图片，一张是src.cols-1像素宽，另一张是1px宽，然后复制到新的图片上？

```
void update_map()
{
    for( int j = 0; j < src.cols; j++ ){
       for( int i = 0; i < src.rows; i++ ){
         if (j == src.cols-1)
             mat_x_Rotate.at<float>(i,j) = 0;
         else
            mat_x_Rotate.at<float>(i,j) = j + 1;
            mat_y_Rotate.at<float>(i,j) = i;
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T19:19:57.597

你可以做些什么来提高你的表现：

*   为此目的，重新映射是矫枉过正的。直接复制像素比定义整个重映射转换然后使用它更有效。
*   切换循环顺序：遍历行，然后是列。（OpenCV`Mat`以行优先顺序存储，因此首先迭代列对缓存*非常*不友好）
*   用于`Mat::ptr()`直接访问同一行中的像素，作为 C 样式数组。（这是一个很大的性能胜利 using `at<>()`，它可能会检查每次访问的索引）
*   将您的`if`语句从内部循环中取出，并`0`单独处理列。

* * *

作为替代方案：是的，如上所述，将图像拆分为多个部分并复制到新图像可能与直接复制一样有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-05T10:21:18.020

```
Mat Shift_Image_to_Right( Mat src_in, int num_pixels)
{
    Size sz_src_in = src_in.size();
    Mat img_out(sz_src_in.height, sz_src_in.width, CV_8UC3);

    Rect  roi;
    roi.x = 0;
    roi.y = 0;
    roi.width = sz_src_in.width-num_pixels;
    roi.height = sz_src_in.height;

    Mat crop;

    crop = src_in(roi);

    // Move the left boundary to the right
    img_out =  Scalar::all(0);
    img_out.adjustROI(0, 0, -num_pixels, 0);
    crop.copyTo(img_out);
    img_out.adjustROI(0, 0, num_pixels, 0);

    return img_out;
} 
```

# php - IF语句中括号的区别是什么？

> ID：11993404
> 
> 赞同：1
> 
> 时间：2012-08-16T18:37:48.627
> 
> 标签：php, javascript

我在处理 PHP 和 javascript 时注意到，仍在学习 btw，以下似乎产生了相同的结果。

```
 if( ( $A==0 ) && ( $B==0 ) ){}

        if( $A==0 && $B==0 ){} 
```

这在编程中的正确术语是什么，以便我可以了解更多信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T18:48:03.313

括号确定进行比较的顺序。您的示例是一个非常简单的示例，根本不需要括号，但是请看类似这样的示例

```
if ($a == 0 || $b == 0 && $c == 0 || $dd == 0) 
```

这实际上相当于

```
if ($a == 0 || ($b == 0 && $c == 0) || $dd == 0) 
```

因为`&&`在 PHP 中首先被评估，因为它的优先级高于`||`

在大多数情况下，当你有复杂的条件时，你要确保使用括号，如果不是为了得到正确的操作顺序，那么至少要让代码阅读器清楚你想要做什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T18:40:54.957

该术语称为运算符优先级。

[http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T18:43:15.237

由于*[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)*规则，这两行是相同的。

`==`优先于运算`&&`符。

额外的（不必要的）括号有时用于使语句更清晰，有时因为作者不知道优先级，或者由于*[巫术编程而使用](http://catb.org/jargon/html/V/voodoo-programming.html)*

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-16T18:41:12.033

正如@asawyer 所说，操作顺序。

来源：[http ://en.wikipedia.org/wiki/Order_of_operations#Programming_languages](http://en.wikipedia.org/wiki/Order_of_operations#Programming_languages)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-16T18:44:40.163

在您的具体示例中没有区别，但是，在某些情况下 paranthethis 会产生很大的不同。

例子：

```
if(a == 0 && (b == 0 || c == 0)) {
    // do something
} 
```

如果您注意到，在这种情况下，只有 3 个变量中的 2 个必须为 0

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-16T18:46:41.077

称为运算符优先级

```
if( ( $A==0 ) && ( $B==0 ) ){}

if( $A==0 && $B==0 ){} 
```

在您的示例中，两条线的评估相同。基本上括号中的东西会首先被处理。当你有类似的东西时可以更好地注意到这一点：

```
 if( ( $A==0  && $C!= 1) && ( $B==0 || $D >0) ){} 
```

在上面的例子中。首先评估和**内部** 的条件，然后根据主要符号评估结果。`( $A==0 && $C!= 1)``( $B==0 || $D >0)``&&`

所以假设：

```
( $A==0  && $C!= 1) evaluated to TRUE 
```

和

```
( $B==0 || $D >0) evaluated to FALSE 
```

条件

```
if( ( $A==0  && $C!= 1) && ( $B==0 || $D >0) ){} 
```

变成

```
if( ( TRUE) && ( FALSE) ){} 
```

最终自然会评估为 FALSE

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-16T18:48:12.543

您看到的是基于**Order of Operations**的额外括号。括号用于覆盖通常的顺序。举个数学例子：

```
7 + 2 * 4 + 3 
```

将首先`2 * 4`评估为 8，给出：

```
7 + 8 + 3 
```

乘法的优先级高于加法，因此首先计算它。您可以使用括号覆盖它：

```
(7 + 2) * 4 + 3 
```

在这种情况下，要评估的第一个操作是加法，给出：

```
9 * 4 + 3 
```

`if`同样的原则也适用于语句中的按位、布尔和比较运算符。比较运算的优先级高于布尔运算符，因此如果您有，例如：

```
1 == 4 || 7 > 3 
```

将首先评估比较，给出

```
false || true 
```

许多程序员习惯于“安全地”编程，在比较前后加上括号：

```
(1 == 4) || (7 > 3) 
```

在某种程度上，这使代码看起来更干净，并保证首先评估比较。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-16T18:46:44.137

括号在处理多个时使用`&&`，`||`也称为`and`and `or`。这很像数学，如果您有等式 2+4*2=10，这是因为您在加法之前进行了乘法运算。其中 (2+4)*2=12 因为括号让你做加法。

所以简而言之，括号在 if 操作中具有最高优先级。

我希望这会让你更清楚。祝你今天过得愉快。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-21T18:40:22.543

如果您想同时检查两个条件，则应该组合这两个参数，但是通过使用两个不同的括号集将它们分开，您正在检查 if 语句中每个循环的每个条件。

# azure - aspnet_regsql 和部署到 Azure

> ID：11993405
> 
> 赞同：0
> 
> 时间：2012-08-16T18:37:57.597
> 
> 标签：azure, asp.net-authentication

我对 Azure 很陌生，正在尝试部署一个已经存在的 MVC 3 网站（我迟到了这个项目）。

它具有成员信息（表应该从 aspnet_regsql 生成）并将这些表链接到特定于应用程序的表。为了让它进入工作状态，我需要插入某种形式的“默认数据”，因为代码确实（不幸的是）对数据库中应该包含的内容做出了一些假设。

不用麻烦，我有一个应用程序可以创建默认数据库并插入所需的数据。然后我可以将它导入 Azure，这不起作用，因为 Azure 需要聚集索引。这是因为 aspnet_regsql 创建了一些非集群的身份验证表键，所以我现在不得不更改这些表作为使主键集群化的过程的一部分。

我只是想知道 aspnet_regsql 是否由于 Azure 要求聚集索引而被某种方式取代？我在这里错过了一个技巧还是正在编写一个脚本来修改这些索引的聚类是明智的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:23:38.953

在这里其他地方找到了解决方案：

[http://support.microsoft.com/kb/2006191/de](http://support.microsoft.com/kb/2006191/de)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:37:47.273

如果您使用通用提供程序，则不需要脚本。

查看[汉塞尔曼的帖子](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)。如果您使用 SQL Server、Compact Edition 或 Windows Azure 数据库，通用提供程序将管理数据库创建

有很多对更新脚本的引用，包括我自己的博客上不再需要的一些。

# linux - 安装 ISO 时 perl 代码中断

> ID：11993415
> 
> 赞同：1
> 
> 时间：2012-08-16T18:38:20.670
> 
> 标签：linux, perl

我已经构建了一个表单（使用 JavaScript、jQuery、PHP 和 HTML），它使非技术人员可以轻松地编写和触发创建包含 CentOS Linux 的 ISO 映像和与之一起构建的公司应用程序的命令。这是带有示例变量的实际命令。

```
./test.pl --verbose --output tvmTEST.iso --virtual --isv 4.1.5.1.4147.8.0  --64bit --netproto static --hostname tvmTEST --address 192.168.5.235 --netmask 255.255.255.0 --gateway 192.168.5.252 --nameserver 192.168.5.21,192.168.5.2 
```

这个确切的命令在以 root 身份登录并成功创建 ISO 时从 shell 触发时正常工作。但是，它不能通过 GUI 工作。该表单正确地组合了命令并将其传递给我正在调用 perl 程序的 PHP 代码。我在shell中测试了由PHP程序组成的命令，它创建了ISO！这是构建 ISO 映像[的 perl 程序。](https://gist.github.com/82e81240a3ec2a996fb6)当通过表单触发时，它作为用户 apache 运行。但是，它在第​​ 665 行死亡，它说：

```
system("sudo mount -o loop $c{centosiso} $mp") and die; 
```

我尝试打印传递给`system()`上面的字符串并打印：

```
sudo mount -o loop /tmp/test.pl-cache/CentOS-5.4-x86_64-bin-1of7.iso /mnt/CentOS 
```

所以，我尝试通过 shell 触发这个命令，它实际上安装了 ISO！但是，权限`/mnt/CentOS`更改为`755`。我不清楚为什么？请注意，我`sudo`在上面那一行中使用和不使用它进行了测试。

而且，在此之前，权限`/mnt/CentOS`设置为`777`，所有者设置为`apache`！这些权限是我的表单不起作用的原因吗？我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:35:35.660

您也可以尝试使用[`qx( … )`](http://p3rl.org/qx)周围的命令而不是使用系统功能。

这个操作符告诉 Perl 在 shell 中运行命令。我曾经发生过`system`在运行相同命令的情况下会失败的情况`qx`。

我更喜欢这种解决方案，而不是试图找出系统命令为何如此顽固。

一个很好的区别是，while`system`将返回命令的退出值，并`qx`返回命令的输出，因此您可以将结果分配给变量并打印以进行调试。

# c++ - error C2275 RHandle: 非法使用这种类型作为表达式

> ID：11993416
> 
> 赞同：1
> 
> 时间：2012-08-16T18:38:21.853
> 
> 标签：c++, c, visual-studio

我得到错误：

> C2275 RHandle：非法将此类型用作表达式

...当我编译这个时：

```
int main(){
    int i,j;
    float** tree;
    tree = (float**)malloc(15 * sizeof(float*));
    for( i = 0; i < 15; i++) 
        tree[i] = (float*)malloc(2 * sizeof(float));
    for(i = 0; i < 15; i++)
        for( j = 0; j < 2; j++)
            tree[i][j] = 2;

    RHandle h = create_reprVectorsTree(tree, 8, 2); // error at this line
    // ...
} 
```

我的界面如下所示：

```
struct reprVectorsTree;

#ifdef __cplusplus
extern "C" {
#endif

typedef struct reprVectorsTree * RHandle;
RHandle create_reprVectorsTree(float **, int , int );
void free_reprVectorsTree(RHandle);
float*  work_decode(RHandle , int *, int);

#ifdef __cplusplus
}
#endif 
```

我按照[这个问题](https://stackoverflow.com/questions/11971063/how-to-use-c-objects-in-c)的例子。

我在 Visual Studio 2008 上编译。

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:45:23.137

只是一个猜测，但如果它被编译为 C89，你就不能像这样在范围的中间声明一个变量。

```
int main(){
int i,j;
float** tree;
RHandle h;
tree = (float**)malloc(15 * sizeof(float*));
for( i = 0; i < 15; i++) 
    tree[i] = (float*)malloc(2 * sizeof(float));
for(i = 0; i < 15; i++)
    for( j = 0; j < 2; j++)
        tree[i][j] = 2;    
h = create_reprVectorsTree(tree, 8, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:48:37.640

你开始你的代码

```
#include "my_header.h" 
```

当然，使用您的接口文件的任何名称？正如所写，编译器没有任何办法知道什么`RHandle`意思。

请不要总结代码。错误通常出现在您“知道*正确”的部分，而在摘要中省略。

# build - 未定义对 `gcry_check_version' 的引用，怎么了？

> ID：11993417
> 
> 赞同：1
> 
> 时间：2012-08-16T18:38:31.283
> 
> 标签：build, makefile, cmake, centos

**制作..**

**制作**

**然后未能建立。**

**错误信息如下：**

```
[ 96%] Building C object src/gui/curses/CMakeFiles/weechat-curses.dir/gui-curses-color.o
[ 97%] Building C object src/gui/curses/CMakeFiles/weechat-curses.dir/gui-curses-key.o
[ 97%] Building C object src/gui/curses/CMakeFiles/weechat-curses.dir/gui-curses-main.o
[ 98%] Building C object src/gui/curses/CMakeFiles/weechat-curses.dir/gui-curses-mouse.o
[ 99%] Building C object src/gui/curses/CMakeFiles/weechat-curses.dir/gui-curses-term.o
[100%] Building C object src/gui/curses/CMakeFiles/weechat-curses.dir/gui-curses-window.o
Linking C executable weechat-curses
../../core/libweechat_core.a(wee-network.o): In function `network_init':
wee-network.c:(.text+0x1c): undefined reference to `gcry_check_version'
wee-network.c:(.text+0x30): undefined reference to `gcry_control'
wee-network.c:(.text+0x44): undefined reference to `gcry_control'
collect2: ld returned 1 exit status
make[2]: *** [src/gui/curses/weechat-curses] Error 1
make[1]: *** [src/gui/curses/CMakeFiles/weechat-curses.dir/all] Error 2
make: *** [all] Error 2 
```

我的操作系统是centos 5.3，我应该安装哪个软件包才能成功构建这个软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:23:11.860

显然您正在尝试链接一个可执行的、缺少的 libgcrypt 库。

见[http://www.gnu.org/software/libgcrypt/](http://www.gnu.org/software/libgcrypt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:11:45.657

我有同样的问题，发现了这个。由于我使用的是代码块，我发现：

*   转到设置>编译器和调试器
*   链接器设置
*   由于库已经安装 --> 添加以下链接库：
*   /usr/local/lib/libgpg-error.so
*   /usr/local/lib/libgcrypt.so

这修复了编译器错误。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T02:36:48.397

在 Ubuntu 15.04 上，libgcrypt.h 安装在 /usr/include 中（通过存储库包），我只需要更改编译器设置。这应该适用于 Ubuntu 14.04/14.10，并且可能适用于其他 Debian。

我在 Code::Blocks 上，所以我的指示是针对这个的。有关更多信息，请参阅[文档](https://www.gnupg.org/documentation/manuals/gcrypt/Building-sources.html#Building-sources)。

1.  转到设置 -> 编译器... -> 全局编译器设置
2.  在“编译器设置”选项卡上，单击“其他选项”，然后在顶部放置`'libgcrypt-config --cflags\'`（`'`实际上应该是一个反引号，但 SO 有奇怪的格式......）
3.  在“链接器设置”选项卡上，在“其他链接器选项：”下，放在顶部`'libgcrypt-config --libs\'`（同样，用反引号代替`'`）。
4.  单击确定并编译您的项目。

# jquery - 防止滚动时触发多次点击事件

> ID：11993419
> 
> 赞同：3
> 
> 时间：2012-08-16T18:38:42.323
> 
> 标签：jquery, scroll

我试图在滚动时触发点击事件。就像滚动顶部的左侧导航和向下滚动的右侧导航一样，我试图通过以下方式实现它

```
$('#elem').bind('mousewheel', function(e){
     if(e.delta < 0) {
         //scroll left
         $(".left-nav").trigger("click");
     }else {
         //scroll right
         $(".left-nav").trigger("click");
     }
     return false;
 }); 
```

但点击事件被触发多次。无论滚动速度如何，请帮助我只触发一次点击事件。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:47:47.987

尝试这个：

```
var busy = false;
$('#elem').bind('mousewheel', function(e){
    if (!busy) {
        busy = true;
        if(e.delta < 0) {
           //scroll left
           $(".left-nav").trigger("click");
        } else {
           //scroll right
           $(".left-nav").trigger("click");
        }
    }
 return false;
 }); 
```

然后在您的点击功能完成后将“忙”设置为“假”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:43:44.423

那是因为滚动事件是连续触发的。因此，如果您滚动鼠标滚轮然后停止，那不等于一个事件。尝试在您的鼠标滚轮处理程序中放置一个`console.log("mouse scrolled")`，您很快就会明白我的意思。

你将需要以一种或另一种方式妥协来完成你正在尝试的事情。我建议`setTimeout`在您的处理程序中使用并在超时持续时间后触发`click`事件（在`setTimeout`回调中）。如果第二个滚动事件在第一个到期之前出现，请取消第一个并重新启动它。这相当于用户滚动，然后停止滚动……然后触发`click`.

*- 编辑 -*

这是相反的方法 - 触发您捕获的第一个鼠标滚轮事件的单击，然后忽略其余事件，直到用户停止滚动至少`n`几毫秒，例如 500 毫秒。可能看起来粗略（意思是“未经测试”）...

```
var scrolled = false,
    scrollTimeout;

$('#elem').bind('mousewheel', function(e){
    // absorb scroll
    e.preventDefault();

    // Scrolled yet?
    if(!scrolled){
        // Note they've scrolled
        scrolled = true;
        // Click appropriate nav
        $(e.delta < 0 ? '.left-nav' : '.right-nav').trigger("click");
    }

    // Reset the timer
    clearTimeout(scrollTimeout);

    // If the user stops scrolling for 500 millis, they can trigger click w/ next scroll
    scrollTimeout = setTimeout(function(){
        scrolled = false;
    }, 500);
} 
```

干杯

# java - 屏幕重新定向期间的Android片段重用

> ID：11993420
> 
> 赞同：0
> 
> 时间：2012-08-16T18:38:46.540
> 
> 标签：java, android, android-fragments

我在为 ICS 使用片段时有些挣扎。我有一个片段（称为 AnalysisFragment），它进行了大量的数字运算工作，读入一个文件，然后对其执行一些计算。大部分工作都是在 onActivityCreated 中启动的，因为我需要在工作之前查阅应用程序的设置文件，而这又需要有上下文，它可以通过 Activity 访问，在调用 onActivityCreated 之前不一定可用。

好吧，每当我旋转显示器时，这项工作似乎又完成了（两次！）。在我的 LogCat 中，我看到 onDestroyView 和 onDestroy 发生（一次），然后是 onCreate、onCreateView 和 onActivityCreated（两次），它们都与 AnalysisFragment 相关。

显然，为不同方向重新绘制屏幕的工作必须重新完成，但有什么办法可以避免第二次（更不用说第三次）的数字运算工作？

我可能应该补充一点，每当用户选择要分析的新文件时，我都会实例化 AnalysisFragment 的新副本，如下所示

```
public static AnalysisFragment newInstance
(
    String ndsFileName,
    ViewIndicator viewIndicator
)
{
    AnalysisFragment analysisFragment = new AnalysisFragment( );

    Bundle bundle = new Bundle( );
    bundle.putString( "nds_file_name", ndsFileName );
    bundle.putString( "view_indicator", viewIndicator.toString( ) );
    analysisFragment.setArguments( bundle );

    return analysisFragment;
} 
```

但是，在重新定位期间，Android 必须为我做这件事。关闭我创建的实例后，它会使用相同的捆绑包为新的屏幕方向实例化另一个实例。最终，onActivityCreated 在新实例上被调用，我的代码不再读取它刚才读取的同一个文件并重新进行数字运算。

任何见解将不胜感激...

# teamcity-7.0 - TeamCity Windows 托盘通知程序卡在“已登录”

> ID：11993422
> 
> 赞同：28
> 
> 时间：2012-08-16T18:38:50.440
> 
> 标签：teamcity-7.0

当我在我的 Windows 8 虚拟机上运行 Windows 托盘通知程序时，如果我将鼠标悬停在系统托盘中的程序图标上，它仍然停留在“已登录”消息上，除了强制用任务管理器关机。我设置了运行 TeamCity 测试服务器的正确地址，但它似乎无法连接。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-17T07:40:46.893

通过以下步骤修复它：

*   通过安装程序修复（这会清除保存的登录数据）
*   登录到另一台运行 Teamcity 6.5.3 的服务器 - 这有效
*   再次注销并登录到我们的主 teamcity 服务器（运行 7.1） - 托盘通知程序再次工作

很奇怪！仅当您也可以访问第二台服务器时，上述解决方法才有效。

**编辑**：我在 Jetbrains 论坛上开始的线程上发布了两个进一步的解决方法，因此我将在此处重新发布它们以使其他人受益。

解决方案1：

*   在任务管理器中杀死正在运行的托盘通知程序
*   打开 regedit，在 HKEY_CURRENT_USER\Software\JetBrains\TeamCity\WindowsTray\Login 中，将“S”属性更新为`http://192.168.1.1:8080` （替换为真实 IP 地址，不带引号，尾随 / 似乎很重要）
*   打开IE，进入队城网站
*   登录，勾选“记住我”</li>
*   当 IE 打开并连接到 TeamCity 时，启动托盘通知程序。
*   从“登录”变为已连接大约需要 15 秒。

解决方案2：

打开 IE，选择 Internet 选项，安全选项卡，将 TeamCity 服务器地址添加到受信任列表中。

请注意，我没有亲自测试过这两种方法，只是将它们发布在这里以获取信息，因为其他人发现它们有效。希望这可以帮助！

自从将服务器升级到 7.1.1 后，我再也没有出现这个问题。看起来它已根据尤金在此线程其他地方的评论进行了修复。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T02:01:56.083

此问题绝对是托盘通知程序中的错误。

它没有弹出登录凭据，所以

1.  先登陆IE
2.  检查记住我 - 尝试保存凭据
3.  关闭 IE/启动通知程序
4.  应该会成功

亨利威尔逊在他们的论坛上发布了[答案。](http://devnet.jetbrains.net/message/5466193#5466193)希望它很快得到修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-28T08:33:47.290

我遇到了类似的问题，唯一的区别是它卡在“正在加载...”而不是“登录...”中。

我在“HKEY_CURRENT_USER\Software\JetBrains\TeamCity\WindowsTray\Login”中的 URL 中添加了一个斜杠，但它没有帮助，所以我删除了整个树“HKEY_CURRENT_USER\Software\JetBrains\TeamCity”。重新启动应用程序后，它再次询问 URL。

我在服务器上使用 8.0.5。托盘通知在关于窗口中报告“build NA”...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T01:09:43.420

我有这个：

Windows 7 - 64 位，TeamCity Pro 7.1（内部版本 23907）

所有其他效果与上述相同。

上面的建议对我不起作用，但它确实允许我重新输入服务器地址..问题仍然存在。

对我有用的是删除然后重新安装在“程序文件”而不是默认的“程序文件（x86）”中。有几个原因可以解释为什么不需要这种修复，但它确实有效，我很高兴。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-08T17:50:40.283

这对我有用：

*   在 Internet Explorer 中打开 CI-Server URL
*   从 CI 服务器注销
*   重新启动托盘通知程序（可能通过 Taskamanger 杀死）
*   重新登录

ps不确定它是否相关，但为了完整性：
我还在Internet Explorer→Internet选项中的受信任站点中添加了CI-Server URL（如本答案所述：[https](https://stackoverflow.com/a/12001721/1520422) ://stackoverflow.com/a/12001721/1520422 )

# oauth - 为什么这个 twitter oauth API 令牌请求失败

> ID：11993423
> 
> 赞同：0
> 
> 时间：2012-08-16T18:38:53.257
> 
> 标签：oauth

[注意：以下所有 oauth 令牌/秘密都是随机创建的；它们不是我的实际令牌/秘密]

```
 `curl -o /tmp/test.txt 'https://api.twitter.com/oauth/request_token?
oauth_timestamp=1345141469&
consumer_key=UEIUyoBjBRomdvrVcUTn&oauth_access_token_secret=YePiEkSDFdYAOgscijMCazcSfBflykjsEyaaVbuJeO&oauth_access_token=47849378%2drZlzmwutYqGypbLsQUoZUsGdDkVVRkjkOkSfikNZC&oauth_nonce=1345141469&
consumer_secret=rUOeZMYraAapKmXqYpxNLTOuGNmAQbGFqUEpPRlW&
oauth_version=1%2e0&
oauth_signature_method=HMAC%2dSHA1&oauth_signature=H0KLLecZNAAz%2bXoyrPRiUs37X3Zz%2bAcabMa5M4oDLkM'` 
```

`[为了清楚起见，我添加了换行符；实际命令是一行]`

 `假设所有其他数据都是有效的，为什么上面的命令会产生“无法验证 oauth 签名和令牌”（即使我使用我的真实数据）？

特别是，我的签名“H0KLLecZNAAz%2bXoyrPRiUs37X3Zz%2bAcabMa5M4oDLkM”是无效的，还是我做的事情根本上是错误的。

我用来生成这个的程序：

```
#!/bin/perl
使用摘要::SHA；

%twitter_auth_hash = (
"oauth_access_token" => "47849378-rZlzmwutYqGypbLsQUoZUsGdDkVVRkjkOkSfikNZC",
"oauth_access_token_secret" => "YePiEkSDFdYAOgscijMCazcSfBflykjsEyaaVbuJeO",
"consumer_key" => "UEIUyoBjBRomdvrVcUTn",
"consumer_secret" => "rUOeZMYraAapKmXqYpxNLTOuGNmAQbGFqUEpPRlW"
);

# 如果未注释，则拉取我的实际数据
# 需要“bc-private.pl”；

$twitter_auth_hash{"oauth_signature_method"} = "HMAC-SHA1";
$twitter_auth_hash{"oauth_version"} = "1.0";
$twitter_auth_hash{"oauth_timestamp"} = time();
$twitter_auth_hash{"oauth_nonce"} = time();

对于 $i (keys %twitter_auth_hash) {
  推(@str,"$i=".urlencode($twitter_auth_hash{$i}));
}

$str = join("&",@str);

#要签名的东西
$url = "获取 $str";

# 签名
$sig = urlencode(Digest::SHA::hmac_sha256_base64($url, "rUOeZMYraAapKmXqYpxNLTOuGNmAQbGFqUEpPRlW&YePiEkSDFdYAOgscijMCazcSfBflykjsEyaaVbuJeO"));

# 完整的 URL 包括签名
$furl = "https://api.twitter.com/oauth/request_token?$str&oauth_signature=$sig";
# system("curl -o /tmp/testing.txt '$furl'");

打印 "FURL: $furl\n";
打印“STR：$str\n”；
打印 "SIG: $sig\n";

子网址代码{
  我的（$str）=@_；
  $str=~s/([^a-zA-Z0-9])/"%".unpack("H2",$1)/iseg;
  $str=~s/ /\+/isg;
  返回 $str;
}

```

注意：我意识到失败还有许多其他可能的原因，但当前的问题是：我是否正确发送了参数并且我是否正确计算了签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:26:52.130

Twitter 要求您[为请求令牌执行 POST](https://dev.twitter.com/docs/auth/implementing-sign-twitter)。`

# asp.net - ASP.NET MVC3 | CheckBoxFor(m => m.Go) 未选中，即使我的 Model.Go 为真

> ID：11993424
> 
> 赞同：0
> 
> 时间：2012-08-16T18:38:54.810
> 
> 标签：asp.net, html, asp.net-mvc-3, razor, checkbox

我对正在发生的事情感到非常困惑。所以 Go 是一个布尔变量，在我的模型中 Go 当前结果为真。为什么这两个会导致不同的值？

```
@Html.TextBoxFor(m => m.Go); 
@Model.Go;
@Html.CheckBoxFor(m => m.Go); 
```

@Html.TextBoxFor(m => m.Go) 结果为 FALSE
@Html.CheckBoxFor(m => m.Go) 结果为 UNCHECKED 框（当我预期为选中框时）
@Model.Go 结果为 TRUE（我期望发生的事情）

@Html.TextBoxFor(m => m.Go) 怎么会是假的？
以及
为什么 @Html.CheckBoxFor(m => m.Go) 会导致一个 UNCHECKED 框。非常感谢！

我的控制器

```
 [HttpPost]
    public ActionResult IXT_FS_LeakCheckAnode(IXT_FS_LeakCheckAnodeModel model, string buttontype)
    {
        model.FormObject = new FormSubmitObject();
        // If the Go has been hit, set the FormObject go be true also.
        if (model.Go) { model.FormObject.go = true; }
        // Add values if necessary, If its not on a submit it will be okay, because it     will not submit in the model.
        List<string> list = new List<string>();
        list.Add("SNT" + model.MainSerial);
        list.Add("USR" + model.BadgeID);
        list.Add("TMS" + 0);

        model.FormObject.MainSerial = model.MainSerial; // Sets the main serial

        model.FormObject = mm.submitGetFormHelper(model.FormObject, "XFA", list, ModelState.IsValid, buttontype);
        if (model.FormObject.checkmsg == "go_pass")       // Update header info.
        {
            model.TubeType = model.FormObject.form_values_dict["TUT"];
            model.FormObject.go = true;
            model.Go = true;
        }
        else if (model.FormObject.checkmsg == "get_pass")  // Update the empty filled.
        {
            model.BadgeID = model.FormObject.form_values_dict["USR"];
            model.MainSerial = model.FormObject.form_values_dict["SNT"];

            // Grabs the TMS double value and converts it into a Time Stamp.
            double latestDate_dbl = Convert.ToDouble(model.FormObject.form_values_dict["TMS"]);
            DateTime latestDate = mm.parseTimeStamp(latestDate_dbl);
            model.LatestDate = "Completed on: " + latestDate.ToString();
            ViewData["Error"] = model.FormObject.errormsg;
        }
        else if (model.FormObject.checkmsg == "submit_pass" || model.FormObject.checkmsg == "clear_pass")// Clear form and let operator submission passed. or clear button
        {
            ModelState.Clear();
            IXT_FS_LeakCheckAnodeModel clear_model = new IXT_FS_LeakCheckAnodeModel();
            return View(clear_model);
        }

        ViewData["Error"] = model.FormObject.errormsg;

        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:41:11.927

更有可能的是，您在 ViewBag 或 ViewData 中有一个名为 Go 的东西，它正在干扰事物。在渲染时，MVC 更喜欢模型状态而不是模型值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:45:51.433

我相信对于布尔值，您可能应该考虑使用复选框而不是文本框。如果您尝试：

```
@Html.EditorFor(m=>m.Go) 
```

# ruby-on-rails - 联系表格未定义的方法错误 Rails

> ID：11993426
> 
> 赞同：0
> 
> 时间：2012-08-16T18:38:55.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在尝试创建一个联系表格，该表格将直接通过电子邮件发送到 gmail 帐户。

为此，我使用了本教程：[Rails 联系表](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)

我遇到的问题是它抛出了以下错误：

```
undefined method `[]' for nil:NilClass 
```

我已经完全按照本教程进行操作，因此代码都可以在上面的链接中看到。

任何建议将不胜感激！谢谢

**更新完全错误**

联系人中的 NoMethodError#new

```
 Showing C:/Sites/jobapp_v2/app/views/contact/new.html.erb where line #1 raised:

   undefined method `[]' for nil:NilClass

  Extracted source (around line #1):

   1: <%= form_for @message, :url => contact_path do |form| %>
   2:   <fieldset class="fields">
   3:   <div class="field">
   4:     <%= form.label :name %>

   Rails.root: C:/Sites/jobapp_v2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T02:14:21.247

这对我有用：

删除您的联系路线，并将其替换为：

```
 resources :contacts, only: [:new, :create] 
```

# forms - 在 Symfony 2 Forms Framework 中处理提交的数据很热门？

> ID：11993427
> 
> 赞同：0
> 
> 时间：2012-08-16T18:38:57.087
> 
> 标签：forms, mongodb, symfony

我有一些与某些类别相关的 MongoDB 文档。类别以树状结构存储在 MongoDB 文档中，每个类别都有顺序 ID。在我的实体文档中，我有一个字段，我想在平面数组而不是树中存储类别 ID 数组。在带有 Doctrine ORM 的 Symfony 1.4 中，可以在字段的验证器对象或整个表单的验证器中操作提交的数据。我可以完全将提交的数据转换为不同的数组并将其传递给对象。如何在 Symfony 2 Forms Framework 中操作数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:57:55.263

我认为 DataTransformers 是您所需要的。你可以在官方 symfony 文档中找到一个说明如何使用它的食谱条目：http: [//symfony.com/doc/current/cookbook/form/data_transformers.html](http://symfony.com/doc/current/cookbook/form/data_transformers.html)

# c++ - 来自dll的C ++访问冲突调用函数

> ID：11993429
> 
> 赞同：3
> 
> 时间：2012-08-16T18:39:01.467
> 
> 标签：c++, visual-c++, dll

我正在开发一个使用标准 PKCS#11 访问智能卡的应用程序。目前，该应用程序在 Ubuntu 和 OS X 上都运行良好。现在我将它移植到 Windows，但是每当我从运行时链接的 pkcs#11 库中调用函数时，我都会收到“访问冲突”异常.

下面我尝试重现我的代码的 SSCCE（异常发生的地方用注释标识）。

```
void * libraryHandle = NULL;
CK_RV   rv;
CK_C_GetFunctionList pC_GetFunctionList;
CK_FUNCTION_LIST_PTR functions;

libraryHandle = LoadLibrary(L"C:\\WINDOWS\\system32\\pteidpkcs11.dll");
if (libraryHandle == NULL)
{
    printf("Library not loaded\n");
    exit(1);
}

pC_GetFunctionList = (CK_C_GetFunctionList) GetProcAddress((HMODULE)libraryHandle, "C_GetFunctionList");

if (pC_GetFunctionList == NULL)
{
    printf("Function not loaded\n");
    FreeLibrary((HMODULE)libraryHandle);
    exit(1);
}

rv = (*pC_GetFunctionList) (&functions);
assert(rv == CKR_OK);
printf("Point A\n");

if(functions == NULL)
{ 
    printf("Functions not loaded\n");
    FreeLibrary((HMODULE)libraryHandle);
    exit(1);        
}

printf("%u - %u\n",functions->version.major, functions->version.minor); // Prints without problems
rv = (*functions->C_Initialize) (NULL_PTR); //THIS IS THE PLACE WHERE I AM GETTING THE ACCESS VIOLATION
assert(rv == CKR_OK);

//printf("Point B\n");

FreeLibrary((HMODULE)libraryHandle); 
```

当我调试应用程序时，结构“CK_FUNCTION_LIST_PTR 函数”似乎是有效的。

有谁知道是什么导致了这个异常？

我正在使用 Visual Studio 2010 Ultimate 和 Windows XP SP3。

谢谢！

（PS：我已经尝试使用库中的“GetProcAddress”加载函数“C_Initialize”，并且成功了）

- - 编辑

CK_FUNCTION_LIST 定义

```
struct CK_FUNCTION_LIST {

  CK_VERSION    version;  /* Cryptoki version */

/* Pile all the function pointers into the CK_FUNCTION_LIST. */
/* pkcs11f.h has all the information about the Cryptoki
 * function prototypes. */
#include "pkcs11f.h"

}; 
```

完整标题： [http ://www.rsa.com/rsalabs/node.asp?id=2133](http://www.rsa.com/rsalabs/node.asp?id=2133)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:59:00.410

从该图像来看，您似乎`CK_FUNCTION_LIST_PTR`对可执行文件和 DLL 之间的结构布局存在某种分歧。确保可执行文件和 DLL 都使用相同的编译器设置等进行编译。

的定义（包括任何周围的编译指示/宏）是`CK_FUNCTION_LIST_PTR`什么？`sizeof(CK_FUNCTION_LIST_PTR)`如果您从可执行文件和 DLL 内部（例如，在 DLL 中）打印出它的值，是否相同`C_GetFunctionList()`？

# javascript - 如何从服务器数据创建“添加到日历”iCal 链接（.ics 文件）并将其发送回我的 webApp？

> ID：11993435
> 
> 赞同：2
> 
> 时间：2012-08-16T18:39:44.603
> 
> 标签：javascript, jquery, jersey, jax-rs

我正在做一些原型设计，我希望有人能帮助我。我正在尝试创建一个`Add event to calendar`链接，该链接将下载并打开 iCal 文件 (.ics)，以便他们可以将其添加到他们的日历中。

我们使用 Jax-RS 和 Jersey 和 tomcat 作为容器，我有这个`iCal4j`包。客户端是 jQuery/backbone。

1.  我不确定哪种是返回数据的正确方法。如果我应该在返回之前创建一个 ics 文件并将其存储在某个地方，或者从 iCal4j 发回一个 CalendarOutputter 文件流？
2.  如果我确实创建了一个 ics 文件，我在哪里存储它？WEB-INF 文件夹？如何？
3.  如果返回文件流，Jax-RX 的正确 @Produces(?) 是什么？

谢谢，雷

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:59:08.987

您不应创建文件来返回数据。您应该能够直接返回您的日历对象。尝试类似：

```
@GET
@Path("calendar")
@Produces("text/calendar")
public Response generateCalendar() {
  Calendar calendar = new Calendar();
  // Generate your calendar here
  ResponseBuilder builder = Response.ok();
  builder.header("content-disposition", "attachment;filename=calendar.ics");
  builder.entity(calendar.toString());
  return builder.build();
} 
```

# c++ - C++ 类模板：非内联成员函数中的冗余？

> ID：11993436
> 
> 赞同：0
> 
> 时间：2012-08-16T18:39:46.683
> 
> 标签：c++, templates

我刚开始学习 C++，正在查看有关模板的在线教程。

我正在查看的示例：

```
 // class templates
    #include <iostream>
    using namespace std;

    template <class T>
    class mypair {
        T a, b;
      public:
        mypair (T first, T second)
          {a=first; b=second;}
        T getmax ();
    };

    template <class T>
    T mypair<T>::getmax ()
    {
      T retval;
      retval = a>b? a : b;
      return retval;
    }

    int main () {
      mypair <int> myobject (100, 75);
      cout << myobject.getmax();
      return 0;
    } 
```

我不完全理解的是标题`getmax()`：

`template <class T> T mypair<T>::getmax ()`

几个问题：

是否可以在成员函数定义中包含比在模板类中更少或更多的模板参数？那么，如果`mypair`实际上接受了`class T`and `class U`，那么当你定义 时`getmax`，是否可以只`class T`作为模板参数传递？

如果不是这种情况，那么拥有`class T`and是多余的`mypair<T>`吗？既然你不能有不同的模板参数吗？

抱歉，如果这不完全清楚。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:46:11.233

当你声明你的模板类`mypair`时，你实际上是在声明*三个*相当独立的模板：一个用于 的类模板`mypair`、一个用于`mypair::mypar`构造函数的函数模板和一个用于`mypair::getmax`成员函数的函数模板。Thise 模板当然不是完全不相关的，因为`getmax`它是 的成员`mypair`，但它们仍然具有很大程度的独立性。它们是独立实例化的，它们可以独立专门化。

例如，您可以`mypair::getmax`在不专门化的情况下显式专门化`mypair`。这意味着您所谈论的内容确实没有冗余。的定义`mypair::getmax`是一个[相当]*独立*的函数模板的定义。该函数模板的“基本”定义必须与类模板共享其模板参数的数量和类型（因此“更少或更多”问题的答案是“否”），但它们仍然是属于的模板参数到函数模板。

但是，您根本不需要提供“基本”定义`mypair::getmax`。您已经在类中声明了它，因此如果您愿意，可以完全省略“基本”定义并立即继续定义专业化

```
template<> int mypair<int>::getmax() {
  // whatever
}

template<> double mypair<double>::getmax() {
  // whatever
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:42:36.763

是的，在更高级的情况下可以有不同数量的模板参数。不过，现在，就这样写吧。

# c++ - 仅标头 C++ 库的 Git 存储库布局？

> ID：11993437
> 
> 赞同：1
> 
> 时间：2012-08-16T18:39:48.787
> 
> 标签：c++, git

我想以一种便于我和其他人将它们包含在其他项目中的方式组织一组 C++ 头文件。将这些项目中的更改合并到原始文件中也应该很容易。
目前，我有大约 30 个头文件、大约 20 个带有单元测试的文件和大约 15 个带有使用示例的文件，这些文件在 Doxygen 文档中被部分引用。代码主要在 Linux 上开发，但应该是平台无关的（至少在理论上）。

我最初组织文件的想法是这样的（假设项目的名称是`xyz`）：

```
xyz/
xyz/examples/
unit_tests/
README 
```

然后，在另一个项目中使用它的最简单方法是将`xyz/`子目录复制到您自己的源目录并在您的项目中包含这样的头文件：

```
#include "xyz/something.h" 
```

这样做的一个优点是不需要在您的构建系统中添加路径，它应该无需更改即可工作。

`git submodule`将文件放在子目录中的一个缺点是在和中更难使用`git subtree`。特别是，`git subtree split`如果仅将存储库的子目录用作子树，则不起作用。（然而，这可能会成为另一个 SO 问题......）

我查看了其他几个（仅标头）存储库，通常它们的文件位于`include/`、`include/xyz/`或`src/`仅位于存储库的根目录中。

您的经验是什么，您的首选布局是什么？
你会建议什么工作流程？
你会使用`git submodule`或`git subtree`完全不同的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:46:03.890

将您的公共 API 头文件作为单独的存储库。然后你可以将它作为一个子模块包含在你的库代码和测试中。此外，您的图书馆用户会将其作为子模块包含在他们的存储库中。

# ruby-on-rails - 将 rails 更新到特定版本

> ID：11993439
> 
> 赞同：10
> 
> 时间：2012-08-16T18:39:52.243
> 
> 标签：ruby-on-rails, ruby, gem

如何将 Rails 更新到特定版本？我的本地机器上有 Rails 3.2.2，但我需要更新到 3.2.3 版本。

如果我执行`gem update rails`，它将更新到最新版本 3.2.6。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T18:42:57.293

```
gem install rails --version=3.2.3 
```

或者使用捆绑器。在 Gemfile 中写入：

```
gem 'rails', '3.2.3' 
```

并在rails根目录中执行

```
bundle install 
```

# php - html应该在php之后分层吗

> ID：11993445
> 
> 赞同：-3
> 
> 时间：2012-08-16T18:40:35.650
> 
> 标签：php, html

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我的网站运行良好，直到我转移到 hostgator 服务器，但切换后我发现每个页面都有错误。

`Cannot modify header information - headers already sent by (output started at /home/flip/public_html/index.php)`

我打开了我的代码，我读了一些以前不放 html 的地方`<?php ?>`

我的代码是这样开始的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<?php 
@session_start();
include_once("includes/connection.php");
$id=$_SESSION['user_id'];
    if(!isset($_SESSION['user_id']))
    {
      header("location:index.php");
    }
        if (!isset($_GET["event"])) {
            $caseVar = "share";
        } else {
            $caseVar = $_GET["event"];
        }
?> 
```

它在以前的服务器中运行良好，但是当我切换到新服务器时，它开始在每一页中给出标题错误。但后来我把它放在`doctype`后面`<?php ?>`，它开始像以前一样工作。我真的很想知道为什么会发生这种情况。以前不能编写 html `<?php ?>` ，每次从服务器切换到服务器时我都必须更改代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:43:47.990

`header()`输出开始后不能调用函数。如果要确保在调用 a 之前没有输出开始，请`header()`使用输出缓冲区`ob_start()`然后`ob_end_flush()`打印输出并清除缓冲区。

仅供参考，`session_start()`是一种`header()`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:42:58.213

在 php 页面顶部调用 session_start() 之前，不能有任何 html。`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">`在结束 php 标记之后放置`?>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:43:07.553

你应该只搜索错误，这是一个非常常见的问题

问题是：您只能发送一次标头，如果您输出任何内容，则需要标头。

所以你的线

```
header("location:index.php"); 
```

如果你先输出一些东西（比如空格，或者在你的情况下是这个完整的行：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

会话也是如此：它需要发送标头。

# ruby-on-rails - Rails habtm 嵌套选择在编辑时没有正确的选择值

> ID：11993448
> 
> 赞同：0
> 
> 时间：2012-08-16T18:40:39.997
> 
> 标签：ruby-on-rails, select, nested, has-and-belongs-to-many, selected

我的 RoR 项目中有以下模型：scope 和 project_scopes。

项目`has_many :scopes, through: :project_scopes`。还有项目`accepts_nested_attributes_for :project_scopes`。

我通过几个选择将范围添加到项目中：

**项目/_form.html.haml**

```
= form_for(@project) do |f|
  = f.fields_for :project_scopes do |builder|
    = render 'project_scope_fields', f: builder
  = link_to_add_fields 'Add scopes', f, :project_scopes 
```

**项目/project_scope_fields.html.haml**

```
= f.select :scope_id, options_from_collection_for_select(@scopes, "id", "name"), {include_blank: true, class: "project_scopes"}
= f.hidden_field :_destroy 
```

这成功地创建了具有所有范围的项目。当我单击编辑时，它呈现相同的表单并显示所有范围选择，但它们没有正确的选择值。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:08:23.040

查看[options_from_collection_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-option_groups_from_collection_for_select)的文档：它需要 4 个参数，最后一个是选定的选项。你不提供那个。尝试这个：

```
= f.select :scope_id, options_from_collection_for_select(@scopes, "id", "name", @project.scope) 
```

或者干脆使用[collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)助手：

```
= f.collection_select(:scope_id, @scopes, :id, :name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:39:11.437

尝试以下操作（我假设您设置`attr_accessible`正确）：

```
= f.select :scope_id, @scopes.map{|s| [s.name, s.id]}, {include_blank: true, class: "project_scopes"} 
```

顺便说一句 -`Scope`可能不是最好的型号名称。

# sql - SQL 从文本列中获取数字行

> ID：11993461
> 
> 赞同：0
> 
> 时间：2012-08-16T18:41:25.057
> 
> 标签：sql, db2

如何查看 DB2 SQL 查询中的文本字段是否为非数字？

我在表中有一个文本字段列，我只想查询 100% 数字的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:38:16.787

假设该字段长 10 位（如我的），这将是解决方案。

```
WHERE
  (  
     SUBSTRING(ID_NUM,1,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,2,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,3,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,4,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,5,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,6,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,7,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,8,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,9,1,OCTETS) BETWEEN '0' AND '9'
  OR SUBSTRING(ID_NUM,10,1,OCTETS)BETWEEN '0' AND '9'
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:39:59.257

[来自： http](http://db2portal.blogspot.com.es/2006/03/returning-only-numeric-data.html) ://db2portal.blogspot.com.es/2006/03/returning-only-numeric-data.html的智能解决方案：

```
SELECT *
FROM TABLENAME
WHERE UCASE(VAR) = LCASE(VAR); 
```

（您还应该检查不包含特殊字符，如`-`, `.`, `(`, ... ）

另一个：

```
SELECT *
FROM TABLENAME
WHERE TRANSLATE(VAR4,'##########','1234567890') = '####'
; 
```

对我来说最好的：

```
SELECT *
FROM Table
WHERE TRANSLATE(Field,
' ',
'0123456789,. '
) = ''
AND Field <> '' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T16:49:44.627

我发现此查询可以更好地识别非数字列。

```
select  a.* from table a where (substring(testcol,1,1) 
not in ('1','2','3','4','5','6','7','8','9','0') 
or substring(testcol,2,1) not  in ('1','2','3','4','5','6','7','8','9','0') 
or substring(testcol ,3,1) not in ('1','2','3','4','5','6','7','8','9','0') 
or substring(testcol,4,1) not in ('1','2','3','4','5','6','7','8','9','0') 
or substring(testcol,5,1) not in ('1','2','3','4','5','6','7','8','9','0') 
or substring(testcol,6,1) not in ('1','2','3','4','5','6','7','8','9','0') 
or substring(testcol,7,1) not in ('1','2','3','4','5','6','7','8','9','0') 
or substring(testcol ,8,1) not in ('1','2','3','4','5','6','7','8','9','0')) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T19:08:12.997

从 mytable 中选择 myfield where isumeric(myfield)

# c - 在 Linux 中，如何在现有类中使用 device_create？

> ID：11993467
> 
> 赞同：13
> 
> 时间：2012-08-16T18:41:48.293
> 
> 标签：c, linux, linux-kernel, device-driver

**注意：**我现在列出这个问题，我*不*反对更改实现（例如，将类的创建移动到公共区域）如果它使事情变得更容易......我只是不确定怎么做。**:尾注**

我有两个 linux 内核模块，我正在尝试为它们更新 /sys 条目。在谷歌和其他资源上搜索，我看到了很多代码：

```
static dev_t MyDev;
static struct class *c1;

static int __init start_func(void)
{
    ...
    MyDev = MKDEV(nMajor, MINOR_VERSION);
    register_chrdev_region(MyDev, 1, MODULE_NAME);
    c1 = class_create(THIS_MODULE, "chardrv");
    device_create(c1, NULL, MyDev, NULL, MODULE_NAME);
    .... 
```

我已经为我的第一个模块验证了这段代码是否有效，并且它正确地创建了一个：

```
/sys/class/chardrv/<MODULE_NAME> 
```

入口。我想知道的是如何在现有课程中创建设备。换句话说，我的一个模块创建了这个新的 chardrv 类，现在我希望我的另一个模块也能够在同一类下注册它的设备。

我不能再次调用 class_create() （在第二个模块中），因为“chardrv”类已经存在......

所以我可以检查 /sys/class/chardrv 是否存在，这可以帮助我决定是否需要调用 class_create()，这不是问题。让我们在这里放一些伪代码来澄清一下：

```
if ( path "/sys/class/chardrv" does not exist)
    new_class = class_create("chardrv")
else
    new_class = some how get class "chardrv" handle, or properties, or whatever
device_create(new_class, ...) 
```

因此，按照这个例子，如果我的类已经存在，并且我只想**从第二个模块**将我的新设备添加到其中，我假设我需要创建一个类结构并以某种方式使用正确的“chardrv 类”属性填充它然后调用device_create 和以前一样，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-03T18:02:41.603

要`device_create`在同一个类中使用该函数，只需将一个指向同一个类的指针传递给它。

由于您想调用`device_create`与创建类的模块不同的模块，因此您需要导出指向类的指针的符号。您可以使用`EXPORT_SYMBOL`宏来执行此操作。

* * *

例如：

**模块1.c**：

```
extern struct class *c1;    /* declare as extern */
EXPORT_SYMBOL(c1);          /* use EXPORT_SYMBOL to export c1 */

static dev_t mod1_dev;
static int __init start_func(void)
{
        ...
        /* define class here */
        c1 = class_create(THIS_MODULE, "chardrv");

        /* create first device */
        device_create(c1, NULL, mod1_dev, NULL, "mod1_dev");
        ....
} 
```

**模块2.c**

```
extern struct class *c1;    /* declare as extern */

static dev_t mod2_dev;
static int __init start_func(void)
{
        ...
        /* c1 is defined in module 1 */

        /* create second device */
        device_create(c1, NULL, mod2_dev, NULL, "mod2_dev");
        ....
} 
```

注意：您需要在**module2**之前插入**module1 ，因为类指针是在****module1**中定义和导出的。

 ****这应该创建您期望的目录：

*   `/sys/class/chardrv/mod1_dev`
*   `/sys/class/chardrv/mod2_dev`

* * *

顺便说一句，如果您`Invalid parameters`在尝试加载第二个模块时遇到错误，您可能需要[在 Makefile中](https://stackoverflow.com/questions/16360689/invalid-parameters-error-when-trying-to-insert-module-that-accesses-exported-s)[添加`KBUILD_EXTRA_SYMBOLS`](https://stackoverflow.com/questions/16360689/invalid-parameters-error-when-trying-to-insert-module-that-accesses-exported-s)一行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T23:37:24.490

要遵循您的示例代码，您只需`device_create()`再次调用，传递相同的类，例如：

```
MyDev = MKDEV(nMajor, MINOR_VERSION);
register_chrdev_region(MyDev, 1, MODULE_NAME);
c1 = class_create(THIS_MODULE, "chardrv");
device_create(c1, NULL, MyDev, NULL, MODULE_NAME);
...
device_create(c1, NULL, MyDev2, NULL, "mydev2"); 
```

您绝对不需要检查路径以确定类是否已创建。您正在代码中创建它，因此`c1 == NULL`如果需要，只需测试或使用标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-06T17:25:01.913

只需在第一个模块的模块初始化函数中创建类，使用 EXPORT_SYMBOL 导出 -global - 类符号并从另一个模块中使用它。

由于该类的所有者是您的第一个模块，因此每次向该类添加设备时，第一个模块的引用计数器都会增加：当有人使用它时，您无法卸载它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T19:15:45.757

Linux 内核不允许这样做。这是您将得到的错误。

```
**[  865.687824] kobject_add_internal failed for net with -EEXIST, don't try to register things with the same name in the same directory.  
[  865.687835] Pid: 6382, comm: insmod Tainted: P        W  O 3.2.16.1JeshuLinux #1  
[  865.687840] Call Trace:  
[  865.687849]  [<c1584382>] ? printk+0x2d/0x2f  
[  865.687859]  [<c12a5438>] kobject_add_internal+0x138/0x1d0  
[  865.687869]  [<c12a5a11>] kset_register+0x21/0x50  
[  865.687879]  [<c137b63d>] __class_register+0xcd/0x1b0  
[  865.687888]  [<f8d0a0aa>] hello_init+0x4a/0x80 [sysfs_Dev]  
[  865.687897]  [<c1003035>] do_one_initcall+0x35/0x170    
[  865.687909]  [<f8d0a060>] ? enable_show+0x40/0x40 [sysfs_Dev]    
[  865.687919]  [<c10928d0>] sys_init_module+0x2c0/0x1b50    
[  865.687941]  [<c159485f>] sysenter_do_call+0x12/0x28    
[  865.687947] Registering Class Failed**  

If you want to understand sysfs read: [mochel.pdf](www.kernel.org/pub/linux/kernel/people/mochel/doc/papers/ols-2005/mochel.pdf) 
```****

# ios - iOS Cocoa Touch vImage 二次采样

> ID：11993468
> 
> 赞同：2
> 
> 时间：2012-08-16T18:41:53.667
> 
> 标签：ios, accelerate-framework, vimage

我正在使用 Cocoa Touch 中的 vImages，在我的情况下，它基本上是 ARGB-float-Arrays，我需要进行二次采样。使用 vImage 函数进行低通滤波没有问题，但我如何选择一个 2x2 像素（假设我想按因子 2 进行二次采样）？当然我可以使用 vDSP stride 函数，但这仅适用于水平子采样，而不适用于垂直子采样。

我希望以下内容能阐明我打算做什么。我希望选择所有标有 X 的像素，如下图所示：

```
X O X O X O
O O O O O O
X O X O X O
O O O O O O
X O X O X O
O O O O O O 
```

但由于内存是线性的，我的数组看起来像这样：

```
X O X O X O O O O O O O X O X O X O O O O O O O X O X O X O O O O O O O 
```

如何以合理的方式执行子采样？

编辑：我正在寻找一种有效的方法来对存储为一维浮点数组（包括负值）的给定位图进行二维下采样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:30:28.453

现实情况是，当您进行这种二次采样时，实际上并没有什么聪明的事情可以做。跨步内存访问不允许使用很多技巧来快速运行，因此您使用的任何库代码基本上等同于您可能在几分钟内编写的 C 代码。我会使用一个简单的 C 实现。

我相信这可以在 GPU 上相当有效地完成，但除非您的数据已经在 GPU 上下文中，否则这不会是性能上的胜利。如果您必须首先将数据传输到那里，那么该成本将超过实际操作中的任何性能节省。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:31:09.867

我一直这样做 - 你需要知道图像宽度。因此，您有一个指针，并且每隔一个像素取一行，然后将指针撞到整行，然后开始每隔一个像素取行，直到到达行的末尾，然后再将指针撞到整行。

对我来说，我通常将图像渲染到位图上下文中，所以我知道每个像素的字节数、像素宽度和每行的字节数（为了碰撞指针，但对你来说它可能只是宽度 x每像素字节数）。

编辑：对不起，我不清楚。给定 x 列和 y 行的位图，您创建一个新的 CGBitMapContext，并使用上面的示例获取“每隔一个”像素并将其写入这个新上下文。现在，如果您在问题中所说的像素正是您想要的像素，那么您就有了第二个位图。使用该位图，您现在可以应用您想要的任何进一步处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:09:56.353

由于内存是线性的，让我们将源矩阵解释为双倍宽度和一半高度的矩阵：

```
X O X O X O  O O O O O O
X O X O X O  O O O O O O
X O X O X O  O O O O O O 
```

使用交错复制 (stride = 2) 后，我们有：

```
X X X  O O O
X X X  O O O
X X X  O O O 
```

然后使用`vDSP_mmov`将左侧子矩阵复制到结果子矩阵。

可以使用交错复制（第一阶段）的`vDSP_zvmov`功能，但它没有针对浮点数进行优化。可能`vDSP_vsadd`使用`0`as scalar param 会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T02:16:57.260

我意识到这主要是一个“如何使用指针”的问题。但是，您计划执行的操作不会产生高质量的图像。它看起来会像素化，一些细节会被放大，而另一些则会丢失。

幸运的是，图像重采样技术是一个很好的研究领域，这里有很多选择。

如果你在 GPU 上，你描述的操作只是 OpenCL 或 OpenGL 中最近的采样方法，所以如果你在那里，你可以计算你想要的坐标并选择最近的。线性采样方法可能会更好看。

如果你在 CPU 上，那么你有一些选择。如果数据保存在 CGImageRef 中，则可以将其渲染为 CGBitmapContextRef 并进行缩放，以将图像的大小在每个维度上减小两倍。我相信这会给你线性重采样，但这个细节应该在某处可用。

如果数据位于 C 数组中，则 vImageScale_ARGBFFFF() 是您的朋友。只需创建一个 1/2 高度和 1/2 宽度的新缓冲区，然后使用该函数将其下采样到正确的值。这将使用 Lanczos 重采样，它有点慢但看起来更好。（它可能更适合浮点数据，我假设您选择它是因为您想要高保真度。）Lanczos 内核具有将低通滤波和下采样组合为单通道的优势，因此要做的事情更少。

# objective-c - 获取项目中包含的图像的文件名

> ID：11993469
> 
> 赞同：2
> 
> 时间：2012-08-16T18:41:57.357
> 
> 标签：objective-c, xcode, project

我在我的 Xcode 项目中添加了许多图像：图标、主背景、默认（用于启动屏幕）、占位符等。我可以将所有这些图像的名称放入一个数组中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T18:47:45.647

这应该在您的应用程序文件夹中返回一个包含所有 png 的数组。

```
[[NSBundle mainBundle] pathsForResourcesOfType:@"png" inDirectory:nil]; 
```

注意* 数组包含路径。如果您只想在`- (NSString *)lastPathComponent`该数组的特定索引上使用名称，即

```
NSString *imgName = [[imgArray objectAtIndex:0]lastPathComponent]; //myImage.png 
```

# javascript - 关于 CSS 高度的 JavaScript If Else 语句

> ID：11993474
> 
> 赞同：1
> 
> 时间：2012-08-16T18:42:33.440
> 
> 标签：javascript, css, if-statement

这是我的代码

```
<!doctype html>

<html>
<head>
    <meta charset="utf-8">
    <script src="js/jquery-1.7.2.min.js"></script>
<style>
div{
border:2px solid black;
width:200px;
min-height:300px;
}
</style>
</head>
<body>
<div>
    <p id="demo">This will change</p>
    <input type="button" value="OK" onclick="myFunction()"/>
</div>
<script>
$(document).ready(function()
{
    $("input").click(function()
    {
        if($("div").height("300px") === true){
            document.getElementById("demo").innerHTML="HELLO WORLD!";
        }
    });
});
</script>
</body>
</html> 
```

我想做的是这样，如果 div 高度等于 300px，“这将改变”段落将在单击按钮时变为 Hello World。抱歉，这是我第一次使用 javascript

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T18:44:33.227

`$("div").height("300px")`设置 的高度，`div`如果高度等于 300px，则不返回 true。

你要`$('div').height() === 300`

[http://api.jquery.com/height/](http://api.jquery.com/height/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:49:35.230

我马上就注意到了几件事。首先，.height 函数返回不带“px”的数值。其次，您在 .height 函数中放置了一个值，这意味着您将其值设置为“300px”。最后，您正在使用 === 运算符，该运算符仅在类型和值相同时才返回 true。相反，试试这个：

```
if($("div").height() == 300) 
```

另一方面，您最终会希望提供您的输入和 div id 并通过这些 id 访问它们，以防您的标记以后有多个。

# joomla - Joomla 2.5 模板语言覆盖不起作用

> ID：11993477
> 
> 赞同：3
> 
> 时间：2012-08-16T18:42:37.667
> 
> 标签：joomla, joomla2.5

我如何需要为我的模板指定语言覆盖才能使用 Joomla！使用它？

它是 COM_STORELOCATOR 组件的特定语言标签。

```
<languages folder="language">
    <language tag="en-GB">en-GB/en-GB.tpl_XXX.ini</language>
</languages> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:55:50.013

**选项1**

具有覆盖的文件应位于此处：

```
/language/overrides/en-GB.override.ini 
```

您可以直接从 Joomla! 管理模板覆盖！后端。

转到扩展 > 语言管理器 > 覆盖

**选项 2**

检查[Joomla 中“mgirardis”提出的解决方案！论坛](http://forum.joomla.org/viewtopic.php?f=629&t=639128#p2757196)：

> 您创建文件夹：`[TEMPLATE_NAME]/language/overrides`
> 
> 并在其中放入包含所有所需覆盖的文件： 您希望覆盖的语言`zz-ZZ.override.ini`在哪里。`zz-ZZ`
> 
> 然后在`templateDetails.xml`你添加（在标签内`<languages>`；我把这个标签放在这里只是为了说明这个想法）：
> 
> ```
> <languages>
>     <language tag="overrides">language/overrides/zz-ZZ.override.ini</language>
> </languages> 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:58:12.480

我不会覆盖这样的东西。我通常在我的语言文件中添加一个特定于组件的前缀以避免冲突。例如，您的标题将是：

```
echo JTEXT::_("SL_TITLE"); 
```

# android - Android：写入蓝牙输出失败

> ID：11993479
> 
> 赞同：1
> 
> 时间：2012-08-16T18:42:38.523
> 
> 标签：android, bluetooth

我的应用程序使用蓝牙连接来远程控制机器人，但我无法写入它（向机器人发送字节），因为我遇到了一个非常奇怪的致命错误。

这是我处理蓝牙连接的应用程序类，我需要把它放在那里，因为多个活动使用该连接（当时只有一个）。代码取自 BluetoothChat 示例。

```
public class BluetoothRemoteControlApp extends Application {
    // . . .

    private class ConnectThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final BluetoothDevice mmDevice;

        // . . .

        public void run() {
            try {
                // blocking function, error is here
                mmSocket.connect();
            } catch (IOException e) {
                try {
                    mmSocket.close();
                } catch (IOException e2) {
                    e2.printStackTrace();
                }
                connectionFailed();
                return;
            }

            synchronized (BluetoothRemoteControlApp.this) {
                mConnectThread = null;
            }

            // start connected thread
            connected(mmSocket, mmDevice);
        }
    }

    private class ConnectedThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        // . . .

        public void write(byte[] buffer) {
            try {
                mmOutStream.write(buffer);
                communicationHandler.obtainMessage(BT_WRITE, -1, -1, buffer).sendToTarget();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    public void write(String data) {
        byte[] out = data.getBytes();
        // Create temporary object
        ConnectedThread r;
        // Synchronize a copy of the ConnectedThread
        synchronized (this) {
            r = mConnectedThread;
        }
        // Perform the write unsynchronized
        // This is where my app fails (commenting here makes my app run)
        r.write(out);
    }

    // . . .
} 
```

具体来说，我的应用程序在函数`r.write(out);`内部失败。`write(String data)`我从另一个使用手机加速度计的活动中调用它，如下所示：

```
public class AccelerometerControl extends Activity implements SensorEventListener {
    BluetoothRemoteControlApp appState;

    // . . .

    protected void onCreate(Bundle savedInstanceState) {
        // . . .

        appState = (BluetoothRemoteControlApp) getApplicationContext();
    }

    public void onSensorChanged(SensorEvent event) {
        // . . .

        // send data to robot
        appState.write("s,"+wheelLeft+","+wheelRight);
    }
} 
```

我得到的错误日志是这样的：

```
08-16 21:33:39.471: E/AndroidRuntime(13644): FATAL EXCEPTION: main
08-16 21:33:39.471: E/AndroidRuntime(13644): java.lang.NullPointerException
08-16 21:33:39.471: E/AndroidRuntime(13644):    at com.bluetooth.BluetoothRemoteControlApp.write(BluetoothRemoteControlApp.java:212)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at com.bluetooth.activities.AccelerometerControl.onSensorChanged(AccelerometerControl.java:170)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at android.hardware.SensorManager$ListenerDelegate$1.handleMessage(SensorManager.java:580)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at android.os.Looper.loop(Looper.java:137)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at android.app.ActivityThread.main(ActivityThread.java:4424)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at java.lang.reflect.Method.invokeNative(Native Method)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at java.lang.reflect.Method.invoke(Method.java:511)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-16 21:33:39.471: E/AndroidRuntime(13644):    at dalvik.system.NativeStart.main(Native Method) 
```

我不明白出了什么问题， NullPointerException 很酷，但对我没有多大帮助。第 212 行是该`r.write(out);`行。

# 编辑

问题是内部`ConnectThread`没有`mmSocket.connect();`进一步（它是一个阻塞函数）。我的连接没有建立，但也没有失败，因此`mConnectedThread`从未创建。尝试写入`null`对象时出现 NullPointerException。

对于这个新问题，我能想到的唯一解决方案是创建一个超时线程，然后进行某种“握手”，以便我的手机将我的设备识别为合法机器人，以防用户选择了错误的设备。

# c# - 我如何返回列表 从我的角度来看一个控制器？

> ID：11993483
> 
> 赞同：0
> 
> 时间：2012-08-16T18:42:51.100
> 
> 标签：c#, asp.net-mvc, razor

我对下面的代码有一个愿景，我的想法是返回一个 HttpPost UserRoles 列表。我的 UserRole 模型如下：

```
idUser
idRole 
```

我能怎么做？

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>UserRole</legend>

       @Html.Label("Select User:") @Html.DropDownList("UserList", String.Empty)
        @{            
            foreach (var item in ViewBag.Roles)
            {
               <div id="@item.NameLower">
                   <b>@item.Name</b>
                   <input type="checkbox" value="@item.NameLower" />
               </div>

            }
        }
        <p>
            <input type="submit" value="Create"/>
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to list", "Index")
</div> 
```

我的控制器：

```
public ActionResult Create()
    {
        ViewBag.Roles = db.roles.ToList();
        ViewData["UserList"] = new SelectList(db.users, "Id", "Nome");

        return View();
    } 
```

还有我的数据库：
![http://img12.imageshack.us/img12/3227/userrole.jpg](../Images/75d88ec48a4acc6e6d983ab54ed83625.png)

我创建 de ViewModel，例如：

```
namespace Sacer.ViewModels
{
    public class UserRoleModel
    {
        public List<User> usuario
        {
            get
            {
                return db.users.ToList();
            }
        }

        private SacerContext db = new SacerContext();
        public List<Role> role
        {
            get
            {
                return db.roles.ToList();
            }
        }
    }
}` 
```

和我的控制器`

```
public ActionResult Create()
        {
            ViewData["ListaUsuarios"] = new SelectList(db.users, "Id", "Nome");        
            var model = new UserRoleModel();
            return View(model);
        } 
```

我的观点：

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>UserRole</legend>

        @Html.Label("Selecione o Usuário:") @Html.DropDownList("ListaUsuarios", String.Empty)
        @{
                foreach (Sacer.Models.Role role in Model.role)
                {
                    <div>
                        <input type="checkbox" value="@role.NomeMinusculo" name="Roles" /> @role.Nome
                    </div>
                }                  
         }
        <p>
            <input type="submit" value="Criar" onclick="GerarLista" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Voltar à lista", "Index")
</div> 
```

但是，我如何在表 userRoles 中插入？

# regex - 从文件中获取特定内容

> ID：11993488
> 
> 赞同：1
> 
> 时间：2012-08-16T18:43:04.993
> 
> 标签：regex, perl

我有以下格式的数据。

```
##############################
# A_Data
##############################
A_Data += data1
data2
data3
data4

###############################
# B_Data
###############################
B_Data += data5
data6

###############################
# C_Data
###############################
C_Data += data7 
```

我想单独提取数据，例如：

```
A_Data (e.g.Array)
data1
data2
data3
data4 
```

对于 B_data 和 C_Data 也是如此，以便我可以单独显示它。使用我的脚本，我可以得到

```
A_Data += data1
data2
data3
data4

B_Data += data5
data6

C_Data += data7 
```

我知道它的多线模式的情况，我用谷歌搜索了很多次，但我无法得到它。请帮我解决这个问题，因为我是新来在 perl 中使用正则表达式。

到目前为止我所尝试的：

我将文件数据放在一个数组中，然后尝试应用正则表达式

```
@array1;
for (my $i=0;$i < $length;$i++)
{
    $data[$i]=~ s/#.*//;
    #$data[$i]=~ /[A_Data](.*?)[B_Data]/;  ## trying to get data in between those two data.
    print $data[$i]."\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:53:46.913

解决方案取决于您的数据文件的精确格式，但这适用于您提供的示例

```
use strict;
use warnings;

open my $fh, '<', 'data_file.txt' or die $!;

my $tag;
my $data;

while (<$fh>) {
  chomp;
  s/#.*//;
  next unless /\S/;
  $tag = $1 if s/^(\w+)\s*\+=\s*//;
  push @{ $data->{$tag} }, $_ if $tag;
}

use Data::Dump;
dd $data; 
```

**输出**

```
{
  A_Data => ["data1", "data2", "data3", "data4"],
  B_Data => ["data5", "data6"],
  C_Data => ["data7"],
} 
```

# java - 使用参数化方法的 JUnit 测试

> ID：11993491
> 
> 赞同：0
> 
> 时间：2012-08-16T18:43:08.333
> 
> 标签：java, junit

这是一个单元测试类：

```
MyUnitTestSetup myUnitTestSetup ;

public void setUp(String myParam){
  myUnitTestSetup = new MyUnitTestSetup(myParam);
}

@Test
public void test1(){
  setUp("value1");
  //do some stuff with myParam = "value1";
}

@Test
public void test2(){
  setUp("value2");
  //do some stuff with myParam = "value2";
} 
```

我想用“value1”执行test1，用“value2”执行test2。参数化单元测试不方便，因为它们会为“value1”和“value2”执行 test1，为“value1”和“value2”执行 test2，这不是我想要的。

我虽然关于：

*   每次进行测试时调用 setup 方法。
*   使用@Rule 注释：

    ```
    static String myParam;
    MyUnitTestSetup myUnitTestSetup ;

    @Before
    public void setUp(){
      myUnitTestSetup = new MyUnitTestSetup(myParam);
    }

    @Rule
    public TestRule rule = new TestRule() {     
        @Override
        public Statement apply(final Statement base, final Description desc) {
            return new Statement() {
                @Override
                public void evaluate() throws Throwable {
                    if(desc.getMethodName().equals("test1"))
                        myParam = "value1";
                    ...
                }
            };
        }
    }

    @Test
    public void test1(){
      //do some stuff with myParam = "value1";
    }

    @Test
    public void test2(){
      //do some stuff with myParam = "value2";
    } 
    ```

但我想知道是否有更清洁和更智能的方式来做到这一点。我会想到类似的东西：

```
MyUnitTestSetup myUnitTestSetup ;

@Before
public void setUp(String myParam){
  myUnitTestSetup = new MyUnitTestSetup(myParam);
}

@Test(myParam="value1")
public void test1(){
  //do some stuff with myParam = "value1";
}

@Test(myParam="value2")
public void test2(){
  //do some stuff with myParam = "value2";
} 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:01:06.120

我在这里错过了什么吗？为什么不将其设置为测试调用中的第一件事或调用设置内容的方法。

```
@Test
public void test1(){
  myParam = "value1"; //set the value?
  ...
}

@Test
public void test2(){
  setupMyParam("value2"); // or this?
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:07:38.607

不确定使用[TestNG](http://testng.org)是否适合您，但如果可以，TestNG 允许您 1）直接将参数传递给测试方法，以及 2）为每个类定义任意数量的数据提供者。例如：

```
@DataProvider
public Object[][] dp1() {
    return new Object[][] {
        new Object[] { "value1"};
    }
}

@Test(dataProvider = "dp1")
public void test1(String value) {
    // will receive "value1"
}

@DataProvider
public Object[][] dp2() {
    return new Object[][] {
        new Object[] { "value2"};
    }
}

@Test(dataProvider = "dp2")
public void test2(String value) {
    // will receive "value2"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T22:42:22.080

看看[JUnitParams](https://code.google.com/p/junitparams/)库。有了它，您可以：

```
@Test
@Parameters({ new MyUnitTestSetup("value1") })
public void test1(MyUnitTestSetup myUnitTestSetup1) {
  // do some stuff with myUnitTestSetup1
}

@Test
@Parameters({ new MyUnitTestSetup("value2") })
public void test2(MyUnitTestSetup myUnitTestSetup2) {
  // do some stuff with myUnitTestSetup2
} 
```

# c# - 以图形方式显示 oracle sql 表中的数据

> ID：11993495
> 
> 赞同：0
> 
> 时间：2012-08-16T18:43:18.227
> 
> 标签：c#, asp.net, oracle

我已经使用 ASP.Net 以编程方式创建了一个图表，现​​在我只需要弄清楚如何连接到一个 oracle sql 开发人员数据库并检索数据来填充图表。

我会使用 OleDb 方法（见下文）以及其他一些逻辑吗？

```
 using System.Data.OleDb;
      OleDbConnection myConnection = new OleDbConnection;();
      myConnection.ConnectionString = myConnectionString;
      myConnection.Open();
      //execute queries, etc
      myConnection.Close(); 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:49:27.690

[http://justins-fat-tire.blogspot.com/](http://justins-fat-tire.blogspot.com/)

我有一些代码示例展示了如何使用存储过程来填充数据集/表并获取对象数据的通用列表。如果您使用的是原始 sql，则需要稍微修改命令对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:52:38.977

您将使用 DataTable 作为图表的数据源。为此，您首先需要填充表格。

```
public void Populate()
{
    Datatable data = GetData();

    foreach(DataRow r in data.Rows)
    {
        /// Populate chart using data
    }
}

public DataTable GetData()
{
    try
    {
    OleDbConnection myConnection = new OleDbConnection;();
    myConnection.ConnectionString = myConnectionString;
    myConnection.Open();

    OleDbCommand myCommand = myConnection.CreateCommand();

    //Set commandtype and text here.
    myCommand.CommandType = SOMETYPE;
    myCommand.CommandText = "SOMETEXT";

    OleDbDataReader reader = myCommand.ExecuteReader();

    DataTable t = new DataTable();
    t.Load(reader);

    return t;
    }
    catch (Exception e)
    {
        throw e;
    }
    finally
    {
        myConnection.Close();
    }
} 
```

# android - 以编程方式呼叫联系人？

> ID：11993496
> 
> 赞同：0
> 
> 时间：2012-08-16T18:43:37.697
> 
> 标签：android, android-intent

我正在编写一些代码，可以让我从主屏幕呼叫联系人。是的，我正在这里重新制作轮子

```
Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + <name here>));
    startActivity(callIntent); 
```

我需要弄清楚“这里的名字”要输入什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:49:51.067

```
Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + 0555555555));
    startActivity(callIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:47:17.353

把电话号码放在那里就行了。

# php - 在 MySQL 数据库中哪里可以找到 system.info

> ID：11993498
> 
> 赞同：0
> 
> 时间：2012-08-16T18:43:43.347
> 
> 标签：php, mysql, database

我正在服务器上安装一个 php 网站，但我收到以下错误，我真的不知道如何解决这个问题。我在哪里可以找到/编辑这个 system_info 文件它的实际含义是什么。

我的数据库只有domain_db2，我该如何摆脱这个错误。

> 数据库错误：无效的 SQL：从 system_info 中选择 *；MySQL 错误：表 'thedomain_db2.system_info' 不存在

更新：这些是我在运行 Install.php 时遇到的错误

> 警告：require_once(./install/init.php) [function.require-once]：无法打开流：第 27 行的 /home/thedomain/public_html/user12/scripts/old_install/install_cls.php 中没有这样的文件或目录
> 
> 致命错误：require_once() [function.require]：在 /home 中打开所需的 './install/init.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') 失败/thedomain/public_html/user12/scripts/old_install/install_cls.php 在第 27 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:48:41.297

您的数据库中似乎缺少您正在安装的软件应用程序所需的表（system_info）。如果您正在安装的软件没有安装文件或类似文件，则您必须手动制作此表。我不能告诉你怎么做，这取决于应用程序的需要。（如果您提到要安装的软件的名称，也许会有所帮助。）

# matlab - 用字符分隔但不删除它

> ID：11993504
> 
> 赞同：1
> 
> 时间：2012-08-16T18:44:09.433
> 
> 标签：matlab

我有一个如下所示的文本文件：

```
(a (bee (cold down))) 
```

如果我加载它使用

```
c=textscan(fid,'%s'); 
```

我明白了：

```
'(a'
'(bee'
'(cold'
'down)))' 
```

我想得到的是：

```
'('
'a'
'('
'bee'
'('
'cold'
'down'
')'     
')'
')' 
```

我知道我可以通过在 textscan 中指定 'Delimiter' 来用 '(' 和 ')' 分隔，但是我会丢失这个我想保留的字符。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:24:07.213

AFAIK，没有罐装例程能够保留任意分隔符。你必须自己做：

```
string = '(a (bee (cold down)))';

bo = string == '(';
bc = string == ')';
sp = string == ' ';

output = cell(nnz(bo|bc|sp)+1,1);
j = 1;

for ii = 1:numel(string)
    if bo(ii) 
        output{j} = '(';
        j = j + 1;

    elseif bc(ii) 
        output{j} = ')';
        j = j + 1;

    elseif sp(ii) 
        j = j + 1;

    else
        output{j} = [output{j} string(ii)];

    end
end 
```

这可能可以改进——不断增长的字符数组将阻止循环被 JIT 处理。该数组`bc | bo | sp`包含所有信息来矢量化这个东西，我只是不知道这个时候如何......

尽管如此，它应该给你一个开始的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:51:20.753

说明`%s`符表示您想要字符串，您想要的是单个字符。改用 `%c`.

```
c=textscan(fid,'%c'); 
```

**如果您也想保持文字完整，请更新**，然后您将需要使用说明符加载您的文本`%s`。加载文本后，您可以使用正则表达式（不是我的强项）解决此问题，也可以编写自己的解析器，然后单独解析每个单词并将括号和单词保存到新的单元格数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:55:19.030

Matlab有一个`strtok`类似C的函数，它的格式是：

```
token = strtok(str)
token = strtok(str, delimiter)
[token, remain] = strtok('str', ...) 
```

还有一个字符串替换功能`strrep`：

```
modifiedStr = strrep(origStr, oldSubstr, newSubstr) 
```

我要做的是修改原始字符串`strrep`以添加分隔符，然后使用`strtok`. 由于您已经将字符串扫描到`c`：

```
c = (c,'(','( '); %Add a space after each open paren
c = (c,')',' ) '); % Add a space before and after each close paren
token = zeros(10); preallocate for speed
i = 2;
[token(1), remain] = strtok(c, ' ');
while(remain)
    [token(i), remain] = strtok(c, ' ');
    i =i + 1;
end 
```

为您提供您请求的每个字符串的线性标记数组。

`strtok`参考： http: [//www.mathworks.com/help/techdoc/ref/strtok.html](http://www.mathworks.com/help/techdoc/ref/strtok.html)

`strrep`参考： http: [//www.mathworks.com/help/techdoc/ref/strrep.html](http://www.mathworks.com/help/techdoc/ref/strrep.html)

# java - 告诉 ThreadPoolExecutor 何时应该继续

> ID：11993505
> 
> 赞同：0
> 
> 时间：2012-08-16T18:44:12.097
> 
> 标签：java, multithreading, port, threadpool, threadpoolexecutor

我必须通过某个端口将一组文件发送到几台计算机。事实是，每次调用发送文件的方法时，都会计算目标数据（地址和端口）。因此，使用循环为每个方法调用创建一个线程，并在方法调用周围加上一个 BindException 的 try-catch 语句来处理程序试图使用已经在使用的端口的情况（不同的目标地址可能通过同一端口接收消息）告诉线程等待几秒钟然后重新启动重试，并继续尝试直到不抛出异常（成功执行传送）。我不知道为什么（尽管当我第一次看到它时我就猜到了），Netbeans 警告我在循环中休眠一个 Thread 对象不是最佳选择。[这个链接到另一个 stackoverflow 帖子，看起来很有趣](https://stackoverflow.com/questions/3535754/netbeans-java-new-hint-thread-sleep-called-in-loop)（我从未听说过[ThreadPoolExecutor 类](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)）。我一直在阅读该链接和 API 以尝试改进我的程序，但我还不太确定我应该如何在我的程序中应用它。有人可以帮忙吗？

编辑：重要代码：

```
 for (Iterator<String> it = ConnectionsPanel.list.getSelectedValuesList().iterator(); it.hasNext();) {
        final String x = it.next();
        new Thread() {

            @Override
            public void run() {
                ConnectionsPanel.singleAddVideos(x);
            }
        }.start();
    }

    private static void singleAddVideos(String connName) {
    String newVideosInfo = "";

    for (Iterator<Video> it = ConnectionsPanel.videosToSend.iterator(); it.hasNext();) {
        newVideosInfo = newVideosInfo.concat(it.next().toString());
    }

    try {
        MassiveDesktopClient.sendMessage("hi", connName);
        if (MassiveDesktopClient.receiveMessage(connName).matches("hello")) {
            MassiveDesktopClient.sendMessage(newVideosInfo, connName);
        }
    } catch (BindException ex) {
        MassiveDesktopClient.println("Attempted to use a port which is already being used. Waiting and retrying...", new Exception().getStackTrace()[0].getLineNumber());
        try {
            Thread.sleep(MassiveDesktopClient.PORT_BUSY_DELAY_SECONDS * 1000);
        } catch (InterruptedException ex1) {
            JOptionPane.showMessageDialog(null, ex1.toString(), "Error", JOptionPane.ERROR_MESSAGE);
        }
        ConnectionsPanel.singleAddVideos(connName);
        return;
    }

    for (Iterator<Video> it = ConnectionsPanel.videosToSend.iterator(); it.hasNext();) {
        try {
            MassiveDesktopClient.sendFile(it.next().getAttribute("name"), connName);
        } catch (BindException ex) {
            MassiveDesktopClient.println("Attempted to use a port which is already being used. Waiting and retrying...", new Exception().getStackTrace()[0].getLineNumber());
            try {
                Thread.sleep(MassiveDesktopClient.PORT_BUSY_DELAY_SECONDS * 1000);
            } catch (InterruptedException ex1) {
                JOptionPane.showMessageDialog(null, ex1.toString(), "Error", JOptionPane.ERROR_MESSAGE);
            }
            ConnectionsPanel.singleAddVideos(connName);
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:17:19.697

你的问题不是很清楚 - 我知道你想重新运行你的任务直到它成功（没有 BindException）。为此，您可以：

*   尝试在不捕获异常的情况下运行您的代码
*   从未来捕获异常
*   如果任务失败，请稍后重新安排任务

简化的代码如下 - 添加错误消息并根据需要进行优化：

```
public static void main(String[] args) throws Exception {
    ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(corePoolSize);
    final String x = "video";
    Callable<Void> yourTask = new Callable<Void>() {
        @Override
        public Void call() throws BindException {
            ConnectionsPanel.singleAddVideos(x);
            return null;
        }
    };
    Future f = scheduler.submit(yourTask);
    boolean added = false; //it will retry until success
                           //you might use an int instead to retry
                           //n times only and avoid the risk of infinite loop
    while (!added) {
        try {
            f.get();
            added = true; //added set to true if no exception caught
        } catch (ExecutionException e) {
            if (e.getCause() instanceof BindException) {
                scheduler.schedule(yourTask, 3, TimeUnit.SECONDS); //reschedule in 3 seconds
            } else {
                //another exception was thrown => handle it
            }
        }
    }
}

public static class ConnectionsPanel {

    private static void singleAddVideos(String connName) throws BindException {
        String newVideosInfo = "";

        for (Iterator<Video> it = ConnectionsPanel.videosToSend.iterator(); it.hasNext();) {
            newVideosInfo = newVideosInfo.concat(it.next().toString());
        }

        MassiveDesktopClient.sendMessage("hi", connName);
        if (MassiveDesktopClient.receiveMessage(connName).matches("hello")) {
            MassiveDesktopClient.sendMessage(newVideosInfo, connName);
        }

        for (Iterator<Video> it = ConnectionsPanel.videosToSend.iterator(); it.hasNext();) {
            MassiveDesktopClient.sendFile(it.next().getAttribute("name"), connName);
        }
    }
} 
```

# yii - 未定义属性“ClassName.RelationName”的 Many_Many 关系失败

> ID：11993506
> 
> 赞同：0
> 
> 时间：2012-08-16T18:44:13.037
> 
> 标签：yii

基本上，我想建立表“城市”和“图像”之间的关系。它们都有一个 ID 列，该列受第三个名为 city_images 的表的约束。这是中间表格的结构：

```
CREATE TABLE IF NOT EXISTS `cities_images` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cityId` int(11) NOT NULL,
  `imageId` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `imageId` (`imageId`),
  KEY `cities_images_ibfk_2` (`cityId`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

ALTER TABLE `cities_images`
  ADD CONSTRAINT `cities_images_ibfk_2` FOREIGN KEY (`cityId`) REFERENCES `cities` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `cities_images_ibfk_1` FOREIGN KEY (`imageId`) REFERENCES `images` (`id`) ON DELETE CASCADE ON UPDATE CASCADE 
```

我有两个适用于城市和图像表的模型。

Cities.php 内部的关系：

```
'citiesImages' => array(self::MANY_MANY, 'CitiesImages', 'cities_images(id,cityId)'), 
```

Images.php 中的关系：

```
'citiesImages' => array(self::MANY_MANY, 'CitiesImages', 'cities_images(id,imageId)'), 
```

我正在 CitiesController 中尝试使用以下内容进行测试操作：

```
$cities = Cities::model()->findByPk(2);
var_dump($cities->images);exit; 
```

但这会导致错误：

> 未定义属性“Cities.images”。

请注意，有一个 ID=2 的城市，并且ities_images 中有一行 cityId=2 和 imageId=1。图像表中还有一行 ID=1，所以我不明白为什么我无法访问与给定城市关联的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:52:55.470

您只是引用了错误的名称。应该：

```
$cities = Cities::model()->findByPk(2);
var_dump($cities->citiesImages);exit; 
```

因为这就是它在 Cities.php 模型中的设置方式。

更新：

是的，您需要简单地更改模型以指向正确的模型：

城市.php：

```
'citiesImages' => array(self::MANY_MANY, 'Images', 'cities_images(imageId,cityId)'), 
```

图片.php：

```
'citiesImages' => array(self::MANY_MANY, 'Cities', 'cities_images(cityId,imageId)'), 
```

# jquery - 仅在单击第一个链接后显示模态对话框

> ID：11993514
> 
> 赞同：0
> 
> 时间：2012-08-16T18:44:39.970
> 
> 标签：jquery, modal-dialog

我有这个链接，点击它时会出现一个模式对话框。

```
<a href="#" id="addtoteam">
    Add to Team
</a> 
```

这是点击链接后会出现的对话框，

```
$('#addtoteam').click(function(event){
      event.preventDefault();
      var url = '<?php echo BASEURL;?>';
      var teamID = '<?php echo $_SESSION['User']['Team']['id']?>';
      var playerID = $(this).attr('player-id');
      $( "#dialogbox" ).dialog({ 
        autoOpen: true,
        buttons: { 
                  "Use Registration Credits": function(){ 
                    // execute something here before redirecting it to another page, perhaps perform the updating of the registration_credits of each team here
                    window.location = url + '/administration/add_to_team/' + playerID +'/'+ teamID +'/?credit=1'; 
                  },
                  "Pay Extra Charge": function() { 
                  //$(this).dialog("close"); 
                    window.location = url + '/administration/add_to_team/' + playerID +'/'+ teamID +'/?proceed=1';
                  },
                  "Cancel": function() { $(this).dialog("close"); } 
                },
        width: 800
      });
    }); 
```

现在这是可行的，但它只适用于第一个链接。你看我的链接是一个列表，每一行都有一个看起来像这样的链接，

```
`abc| def| ghi| Add to Teamlink`
`123| 456" 789| Add to Team link` and so on. 
```

困扰我的是，当我单击`abc| def| ghi| Add to Team link`链接时，会出现模式对话框，但如果我单击第一个链接以外的任何链接，则不会出现该框。我的代码似乎有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:48:46.010

由于您没有提供更多信息，我只是猜测您的问题是您`id`为所有链接设置相同（`addtoteam`）

必须是唯一的`id`，因此您应该改用类选择器

```
<a href="#" class="addtoteam">
    Add to Team
</a>

$('.addtoteam').click(function(event){....} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:48:47.623

您需要使用类名而不是 ID 来选择所有“添加到团队”链接。

```
<a href="#" class="addtoteam">
    Add to Team
</a>

<a href="#" class="addtoteam">
    Add to Team
</a>

<a href="#" class="addtoteam">
    Add to Team
</a> 
```

JS：

```
$('.addtoteam').click(function(event){
    //code
}); 
```

# objective-c - 来自字符串的 UIControlEvents 变量

> ID：11993516
> 
> 赞同：0
> 
> 时间：2012-08-16T18:44:54.007
> 
> 标签：objective-c, ios, xcode, nsstring, uicontrolevents

`UIControlEvents`是否可以从 a`NSString`或类似变量创建变量？例如，我可能有一个`NSString`被调用的，它与变量`UIControlEventTouchUpInside`的 typedef 之一相同。`UIControlEvents`

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:51:00.520

如果我理解它是如何正常工作的，UIControlEvents 枚举如下：

```
enum {
   UIControlEventTouchDown           = 1 <<  0,
   UIControlEventTouchDownRepeat     = 1 <<  1,
   UIControlEventTouchDragInside     = 1 <<  2,
   UIControlEventTouchDragOutside    = 1 <<  3,
   UIControlEventTouchDragEnter      = 1 <<  4,
   UIControlEventTouchDragExit       = 1 <<  5,
   UIControlEventTouchUpInside       = 1 <<  6,
   UIControlEventTouchUpOutside      = 1 <<  7,
   UIControlEventTouchCancel         = 1 <<  8,

   UIControlEventValueChanged        = 1 << 12,

   UIControlEventEditingDidBegin     = 1 << 16,
   UIControlEventEditingChanged      = 1 << 17,
   UIControlEventEditingDidEnd       = 1 << 18,
   UIControlEventEditingDidEndOnExit = 1 << 19,

   UIControlEventAllTouchEvents      = 0x00000FFF,
   UIControlEventAllEditingEvents    = 0x000F0000,
   UIControlEventApplicationReserved = 0x0F000000,
   UIControlEventSystemReserved      = 0xF0000000,
   UIControlEventAllEvents           = 0xFFFFFFFF
}; 
```

所以再一次，这是如果我正确理解这一点，如果我错了，请纠正我，但你应该能够制作一个变量整数并将其传递给控制事件，如下所示：

```
 int myVariable = 64;
    [myButton addTarget:self action:@selector(mySelector) forControlEvents:myVariable]; 
```

[有关按位左移](http://www.techotopia.com/index.php/Objective-C_Operators_and_Expressions)的说明，请参阅此链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:51:31.320

您必须创建自己的字典才能从一个映射到另一个：

```
NSDictionary * const controlEventTypesFromStrings = @{
     @"UIControlEventTouchDown" : @(UIControlEventTouchDown),
     @"UIControlEventTouchDownRepeat" : @(UIControlEventTouchDownRepeat),

     //etc. 
```

[这是仍然较新的[Clang 文字语法](http://clang.llvm.org/docs/ObjectiveCLiterals.html)；您当然可以使用旧/标准制作字典`[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithUnsignedInteger:UIControlEventTouchDown], @"UIControlEventTouchDown", ...`]

然后用你的字符串，你会`NSNumber`从字典中得到一个：

```
NSNumber * eventTypeNum = controlEventTypesFromStrings[stringDescribingControlEvent];
UIControlEvents eventType = [eventTypeNum unsignedIntegerValue]; 
```

[如果您不使用新的下标语法，则`NSNumber`可以通过检索来完成。`objectForKey:`]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-08T13:05:44.147

下面是一些描述 UIControlEvents 位掩码中位的快速代码：

```
- (NSString *)describeEvents:(UIControlEvents)event {
    NSDictionary *events = @{@0: @"UIControlEventTouchDown",
                             @1: @"UIControlEventTouchDownRepeat",
                             @2: @"UIControlEventTouchDragInside",
                             @3: @"UIControlEventTouchDragOutside",
                             @4: @"UIControlEventTouchDragEnter",
                             @5: @"UIControlEventTouchDragExit",
                             @6: @"UIControlEventTouchUpInside",
                             @7: @"UIControlEventTouchUpOutside",
                             @8: @"UIControlEventTouchCancel",

                             @12: @"UIControlEventValueChanged",
                             @13: @"UIControlEventPrimaryActionTriggered",

                             @16: @"UIControlEventEditingDidBegin",
                             @17: @"UIControlEventEditingChanged",
                             @18: @"UIControlEventEditingDidEnd",
                             @19: @"UIControlEventEditingDidEndOnExit"};

    NSMutableString *result = [[NSMutableString alloc] init];
    for(int i = 0; i<sizeof(UIControlEvents) * CHAR_BIT; i++) {
        if((event & ((NSUInteger)1 << i)) != 0) {
            NSString *eventName = [events objectForKey:[NSNumber numberWithInt:i]];
            if(!eventName)
                eventName = [NSString stringWithFormat:@"%i", i];

            if(result.length > 0)
                [result appendString:@", "];
            [result appendString:eventName];
        }
    }

    return result;
} 
```

示例输出：

```
[self describeEvents:UIControlEventTouchCancel] // UIControlEventTouchCancel

[self describeEvents:UIControlEventAllTouchEvents] // UIControlEventTouchDown, UIControlEventTouchDownRepeat, UIControlEventTouchDragInside, UIControlEventTouchDragOutside, UIControlEventTouchDragEnter, UIControlEventTouchDragExit, UIControlEventTouchUpInside, UIControlEventTouchUpOutside, UIControlEventTouchCancel, 9, 10, 11

[self describeEvents:UIControlEventAllEvents] // UIControlEventTouchDown, UIControlEventTouchDownRepeat, UIControlEventTouchDragInside, UIControlEventTouchDragOutside, UIControlEventTouchDragEnter, UIControlEventTouchDragExit, UIControlEventTouchUpInside, UIControlEventTouchUpOutside, UIControlEventTouchCancel, 9, 10, 11, UIControlEventValueChanged, UIControlEventPrimaryActionTriggered, 14, 15, UIControlEventEditingDidBegin, UIControlEventEditingChanged, UIControlEventEditingDidEnd, UIControlEventEditingDidEndOnExit, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31 
```

# jquery - 如何向 JqueryTe（文本编辑器插件）添加新按钮

> ID：11993522
> 
> 赞同：5
> 
> 时间：2012-08-16T18:45:36.803
> 
> 标签：jquery, textarea

如何将自定义按钮添加到**JqueryTe**编辑器插件：

```
add button: <center>string</center>
add button: add image url <img src="string" /> 
```

[代码.google.com/](http://code.google.com/p/jqueryte/)

[jqueryte.com](http://jqueryte.com)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:29:30.600

插件初始化后，你可以做..

```
var newButton = $('<a class="myButton" unselectable="on" />');
$('#someContainer .jqte_Panel').append(newButton);

newButton.on('click', function(){
 //new functionality
}); 
```

# symfony-forms - 在 symfony2 中设置 DateTime 的语言

> ID：11993523
> 
> 赞同：0
> 
> 时间：2012-08-16T18:45:43.623
> 
> 标签：symfony-forms

有没有办法让 Symfony2 翻译表格中的月份？

现在我有一个用英语选择月份快捷方式的选项，我想用西班牙语选择它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:49:22.547

这有点老了，但这可能会帮助其他人在这篇文章上绊倒。

我认为这与 Symfony2 本身无关，但您可能想要做的是在 PHP 中设置正确的语言环境。看到这篇文章：[https ://stackoverflow.com/a/4976419](https://stackoverflow.com/a/4976419)

如果您的系统上有西班牙语语言环境，`setLocale`就可以了。

但请注意，这[`date()`](http://de3.php.net/manual/en/function.date.php)不是区域设置感知的。如上面的帖子所示，您应该[`strftime()`](http://de3.php.net/manual/en/function.strftime.php)改用。

# c# - 如何检测无响应的 UI 更新？

> ID：11993530
> 
> 赞同：5
> 
> 时间：2012-08-16T18:46:11.123
> 
> 标签：c#, .net, wpf, multithreading

假设我有一个 WPF 应用程序，其中我有以下架构：

[工作线程] -> [队列 1] -> [队列管理器线程] -> [队列 2] -> [UI 线程]

Worker 正在侦听来自某个服务的数据并在不确定的时间（可能每秒多次或每隔几秒几次）接收该数据，然后将其排队到队列 1，然后是队列管理器，具体取决于UI 线程可能会决定提高/降低数据项排队到队列 2 的速率，UI 线程使用队列 2 来更新 UI，可能会丢弃一些项目，以免在事件发生时压倒 UI 线程接收太多消息（例如，它可能决定检查每条数据消息的时间戳，如果消息之间的差异比 UI 更新的最后一个数据项至少早 5 秒，则仅将其排入队列 2）

UI 线程将有一个计时器，该计时器触发一个设置间隔，以使用队列 2 中的新数据更新 UI。我想要做的是确定 UI 更新自身的速度以测量它在为了节流，例如增加/减少关于多久更新一次 UI 的计时器间隔

假设我的 UI 有很多控件（网格、图表等）都绑定到我的 UI shell 中队列 2 上不同的过滤/分组数据子集，并且在更新这些控件时 UI 开始变得无响应并在更新之间冻结，我怎么能检测到从代码中了解如何/何时增加/减少 UI 更新的间隔？基本上，我如何测量跨绑定到数据的所有控件重新绑定整个 UI 需要多长时间？

顺便说一句，这是一个好的设计还是可以改进？还有其他我可以考虑的策略吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:07:22.390

有 2 个线程……主 UI 线程……和渲染线程……你可能需要同时查看这两个线程以确定应用程序的响应能力……并决定如何节流。

## 测量你的帧率

您可以观看 ETW 事件，或自己处理 CompositionTarget.Rendering 并计算帧数……这是监视渲染线程……如果这是丢帧，那么它可能会告诉您您的系统负担过重……您可以相应地限制您的后台工作。

*   [http://blogs.msdn.com/b/jgoldb/archive/2008/09/26/etw-event-tracing-in-wpf.aspx](http://blogs.msdn.com/b/jgoldb/archive/2008/09/26/etw-event-tracing-in-wpf.aspx)

*   [为什么WPF中的帧率不规则且不限于显示器刷新？](https://stackoverflow.com/questions/5812384/why-is-frame-rate-in-wpf-irregular-and-not-limited-to-monitor-refresh)

## 使用计时器安排工作

您可以使用 @HenkHolterman 提到的 DispatcherTimer 来监视 UI 线程上的负载，方法是让它以低于 Normal 的优先级运行，例如 Background ....当在 UI 线程上处理/处理计时器事件时.. ..然后你可以释放/告诉你的后台工作人员做下一项工作。

但是要小心...如果您的计时器间隔太小...并且您的系统过载...那么您可能会积累计时器消息...所以当您的事件处理程序被调用时...您可能会这样做工作量太大（除非您记录了上次调用它的时间）。

*   [DispatchTimer - 如果前一个刻度仍在运行，则防止触发刻度事件](https://stackoverflow.com/questions/7807824/dispatchtimer-prevent-the-tick-event-to-be-triggered-if-the-previous-tick-is-s)

## 在 UI 线程上执行委托

或者，您可以让一个委托在 UI 线程上以特定优先级（例如通常为背景）运行。

如果您使用 Dispatcher.BeginInvoke....，那么工作将被放入队列中，并在所有更高优先级的工作完成后执行。（异步）。

如果您使用 Dispatcher.Invoke...，那么您的线程将被阻塞，直到您正在调用的 Dispatcher 中所有更高优先级的工作都已完成，然后您的委托将执行。

（您的后台工作人员会在完成其工作单元后执行此操作，然后委托会告诉您的后台工作人员执行下一个工作单元）。

这可能比 DispatchTimer 更好，因为您可以消除一些延迟......即使用计时器将具有取决于计时器间隔的延迟。

*   [http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/DispatcherExamples.htm](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/DispatcherExamples.htm)

然后根据你的发现，你可以调整下一个工作单元。

## 监控各种系统性能计数器

如果您真的想变得复杂，那么您可以从应用程序内部监控各种性能计数器，例如内存使用、GC 集​​合等......并动态限制您所做的工作量。

*   [http://www.codeproject.com/Articles/38438/Monitoring-Process-Statistics-in-C-WPF](http://www.codeproject.com/Articles/38438/Monitoring-Process-Statistics-in-C-WPF)

## Dispatcher 的一些背景知识

*   [http://weblogs.asp.net/pawanmishra/archive/2010/06/06/understanding-dispatcher-in-wpf.aspx](http://weblogs.asp.net/pawanmishra/archive/2010/06/06/understanding-dispatcher-in-wpf.aspx)

*   [http://msdn.microsoft.com/en-us/magazine/cc163328.aspx](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:59:08.323

我会简单地删除 QueueManager 和 Queue2。

您只需要一个 WPF Dispatcher Timer（而不是 Timers.Timer），它每隔几毫秒检查一次输入。您可以静态配置该超时。
然后使 Queue1 成为阻塞队列以限制上游的任何内容。

## 编辑

Dispatcher Timer 可以以[特定的优先级](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)启动。选择一个较低的值，例如 Background 或 ContextIdle，您将永远不会超载 GUI。
然后只需确保计时器不会咬掉超过它可以咀嚼的东西。一次只有 1 个（或几个）项目。调整这部分，以便 GUI 将尽可能多地处理，但仅此而已。运行时调整是免费的，因为您与调度程序相关联。

并且（仅在需要时）您可以使用 `Queue1 = new BlockingCollection<MyItemType>(MaxItems)` 该队列以防止溢出。

# javascript - 为什么 chrome 和 firefox 在下载超小的 javascript 文件时比 curl 慢 10 倍？

> ID：11993531
> 
> 赞同：2
> 
> 时间：2012-08-16T18:46:22.310
> 
> 标签：javascript, apache, http, iis, web

我在一个 Web 应用程序上工作，其中开发环境从本地 Web 服务器加载了大约 500 个 js 文件（我已经尝试过 IIS 和 apache）。这些文件在 prod 中进行了优化，但对于开发来说，这就是我们所拥有的。我知道还有其他战略选择可能会阻止加载这么多 js 文件的需要，但目前我无法控制。我想做的是加快这些请求。我是否疯狂地认为这些请求中的每一个都只需要 10 毫秒，所以整个请求可能需要 5 秒（10 毫秒 * 500 个请求）？目前 chrome 和 firefox 都报告说这些请求大约需要 100 毫秒（即使是 304 秒）。

我把它缩小到最小的公分母并创建了一个 1 行 js 文件。我通过 firefox 和 chrome 向该文件发出请求，并且每个报告都需要> 100ms。不过，奇怪的是，当我从 curl 发出相同的请求时，它只需要 5 毫秒：

```
$ curl 'http://10.222.139.56:81/js/ben.js' -o /dev/null -w '%{time_total}'
0.005 
```

是什么赋予了？我认为卷曲数是正确的？为什么 chrome 和 firefox 需要更长的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:03:28.170

我的猜测是，对于 Firefox 和 Chrome 加载的每个 js 文件，报告的时间包括文件的浏览器解析、缓存等。即使是单行文件也需要少量的工作来处理。另一方面，curl 只是拉下内容并保存到磁盘或标准输出。该操作要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T17:02:17.833

我的答案很简单：饼干。

在作为“Content-Type:application/json”的单个 json 文件中，Chrome 的网络选项卡始终显示 ~1400 毫秒，而 curl 为 ~300 毫秒（即使设置了浏览器用户代理）。浏览器应该几乎不需要解析这个，因为我禁用了我的漂亮打印插件，并在 Chrome 的开发工具中检查了“禁用缓存”。

最后我在一个隐身窗口中尝试了它，并看到了与 Curl 相同的时间结果。然后我回到原来的窗口并删除了cookies，没有别的，并且得到了同样的速度提升。我终于意识到我的 Web 应用程序在对另一个验证它的服务的请求中使用了特定的身份验证 cookie。

# arrays - 使用从 JSON 中提取的循环填充数组

> ID：11993539
> 
> 赞同：0
> 
> 时间：2012-08-16T18:46:49.430
> 
> 标签：arrays, for-loop, getjson, populate

我想用从 getJSON 函数中提取的数据填充对象数组。

我目前正在逐个对象地做它，但知道使用 for 循环会更干净......

这是getJSON：

```
$.getJSON("http://www.reddit.com/r/pics.json?jsonp=?",
    function(data) {

        var imageurl1 = data.data.children[0].data.url;
        var imagecaption1 = data.data.children[0].data.title;;
        var commentlink1 = "http://www.reddit.com" + data.data.children[0].data.permalink;

        var imageurl2 = data.data.children[1].data.url;
        var imagecaption2 = data.data.children[1].data.title;
        var commentlink2 = "http://www.reddit.com" + data.data.children[1].data.permalink;

       } 
```

这是我使用数据的数组

```
var lightboximages = [
 { 
    src: imageurl1,
    caption: imagecaption1,
    comments: commentlink1
 }, { 
    src: imageurl2,
    caption: imagecaption2,
    comments: commentlink2
 }] 
```

任何有关循环的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:55:10.573

未经测试，但这是一个想法：

```
$.getJSON("http://www.reddit.com/r/pics.json?jsonp=?",
    function(data) {
       var lightboxArray = [];
       for (var i=0; i<data.data.children.length; i++) {
           var child = data.data.children[i];
           var lightboxObj = {"src":child.data.url, "caption":child.data.title, "comments":child.data.permalink};
           lightboxArray.push(lightboxObj);
       }
       // now call some function to process the array we've built
    }); 
```

# android - 如何在 Android 2.2 中使用正则表达式忽略变音符号？

> ID：11993542
> 
> 赞同：0
> 
> 时间：2012-08-16T18:47:17.523
> 
> 标签：android, diacritics

我需要使用 Android 2.2 (API 8)，我已经看到它`Normalizer.normalize(text, Normalizer.Form.NFD)`只能从 Android API 9 获得。

我可以在我的正则表达式中添加什么来忽略重音符号？

```
SpannableStringBuilder stringBuilder = new SpannableStringBuilder(text);

for (String keyword : keywords.keySet()) {

    String caseInsensitiveRegex = "(?i)\\b" + keyword + "\\b";
    Pattern pattern = Pattern.compile(caseInsensitiveRegex);
    Matcher m = pattern.matcher(stringBuilder);

    while (m.find()){

        // Do some stuff

    }

} 
```

感谢您的帮助；）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T18:54:33.283

> 仅适用于 Android API 9

Android 是开源项目。没有什么可以阻止您获取 API 9 的那一部分并直接放入您的应用程序中，因此您将不再依赖 API，我目前在您的情况下没有看到任何障碍。

# javascript - 当使用 Google Maps V3 可以看到多个世界副本时显示多个自定义标记

> ID：11993543
> 
> 赞同：1
> 
> 时间：2012-08-16T18:47:19.253
> 
> 标签：javascript, google-maps, google-maps-api-3, map

我创建了一个自定义的 OverlayView，它使用类似于在[此处](http://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/canvaslayer/?r=377)找到的方法来容纳一个画布元素。一切都在相应地工作，但我正在寻找一些关于如何处理可以在较低缩放级别看到多个版本的情况的建议。目前我像这样翻译我的画布元素：

```
this.topLeft = new google.maps.LatLng(bounds.getNorthEast().lat(), bounds.getSouthWest().lng());
var divTopLeft = projection.fromLatLngToDivPixel(this.topLeft);
this.canvas.style[this.cssTransformPrefix] = 'translate(' + Math.floor(divTopLeft.x) + 'px,' + Math.floor(divTopLeft.y) + 'px)'; 
```

要定位和绘制我的自定义标记之一，我使用以下方法：

```
var scale = Math.pow(2, map.zoom);
var offset = mapProjection.fromLatLngToPoint(this.centerPoint);

this.pxTopLeft.x = Math.floor(offset.x*scale);
this.pxTopLeft.y = Math.floor(offset.y*scale);

var worldPoint = mapProjection.fromLatLngToPoint(marker.position());
marker.draw(Math.floor(-this.pxTopLeft.x + worldPoint.x*scale), Math.floor(-this.pxTopLeft.y + worldPoint.y*scale)); 
```

使用这种行为，当用户平移地图时，我的画布渲染标记将从一个世界实例捕捉到下一个世界实例。相反，我想要实现的是类似于原生谷歌标记行为的东西，其中标记为世界的每个表示绘制一次。不幸的是，无法使用原生 Google 标记。我怎样才能做到这一点？

# c# - 动态加载程序集的应用程序配置

> ID：11993546
> 
> 赞同：13
> 
> 时间：2012-08-16T18:47:40.770
> 
> 标签：c#, reflection, app-config

我正在尝试将模块动态加载到我的应用程序中，但我想为每个模块指定单独的 app.config 文件。

假设我对主应用程序有以下 app.config 设置：

```
<appSettings>
  <add key="House" value="Stark"/>
  <add key="Motto" value="Winter is coming."/>
</appSettings> 
```

我使用的另一个用于加载的库`Assembly.LoadFrom`：

```
<appSettings>
  <add key="House" value="Lannister"/>
  <add key="Motto" value="Hear me roar!"/>
</appSettings> 
```

两个库都有一个实现相同接口的类，方法如下：

```
public string Name
{
    get { return ConfigurationManager.AppSettings["House"]; }
} 
```

`Name`并且确实从主类和加载的程序集类输出调用`Stark`。

有没有办法让主应用程序使用它自己的 app.config 并且每个加载的程序集都使用它们的？配置文件的名称在输出中是不同的，所以我认为这应该是可能的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-18T00:19:53.223

好的，这是我最终得到的简单解决方案：在实用程序库中创建以下函数：

```
public static Configuration LoadConfig()
{
    Assembly currentAssembly = Assembly.GetCallingAssembly();
    return ConfigurationManager.OpenExeConfiguration(currentAssembly.Location);
} 
```

在动态加载的库中使用它，如下所示：

```
private static readonly Configuration Config = ConfigHelpers.LoadConfig(); 
```

无论该库如何加载，它都使用正确的配置文件。

**编辑：** 这可能是将文件加载到 ASP.NET 应用程序中的更好解决方案：

```
public static Configuration LoadConfig()
{
    Assembly currentAssembly = Assembly.GetCallingAssembly();
    string configPath = new Uri(currentAssembly.CodeBase).LocalPath;
    return ConfigurationManager.OpenExeConfiguration(configPath);
} 
```

要在构建后复制文件，您可能需要将以下行添加到 asp 应用程序的构建后事件（从库中提取配置）：

```
copy "$(SolutionDir)<YourLibProjectName>\$(OutDir)$(Configuration)\<YourLibProjectName>.dll.config" "$(ProjectDir)$(OutDir)" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:57:19.793

据我所知，您需要单独的应用程序域才能使 app.config 单独工作。AppDomainSetup 的创建允许您指定要使用的配置文件。这是我的做法：

```
try
{
  //Create the new application domain
  AppDomainSetup ads = new AppDomainSetup();
  ads.ApplicationBase = Path.GetDirectoryName(config.ExePath) + @"\";
  ads.ConfigurationFile = 
    Path.GetDirectoryName(config.ExePath) + @"\" + config.ExeName + ".config";
  ads.ShadowCopyFiles = "false";
  ads.ApplicationName = config.ExeName;

  AppDomain newDomain = AppDomain.CreateDomain(config.ExeName + " Domain", 
    AppDomain.CurrentDomain.Evidence, ads);

  //Execute the application in the new appdomain
  retValue = newDomain.ExecuteAssembly(config.ExePath, 
    AppDomain.CurrentDomain.Evidence, null);

  //Unload the application domain
  AppDomain.Unload(newDomain);
}
catch (Exception e)
{
  Trace.WriteLine("APPLICATION LOADER: Failed to start application at:  " + 
    config.ExePath);
  HandleTerminalError(e);
} 
```

获得所需效果的另一种方法是在编译到每个 DLL 中的资源文件中实现配置值。配置对象上的简单接口将允许您切换查看 app.config 与查看资源文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T20:53:58.410

如果您稍微更改代码，它可能会起作用：

```
public string Name
{
    get { 
        Configuration conf = ConfigurationManager.OpenExeConfiguration("library.dll");
        return conf.AppSettings.Settings["House"].Value; 
    }
} 
```

# python - 获取会话信息并放入 django 表单

> ID：11993550
> 
> 赞同：2
> 
> 时间：2012-08-16T18:47:49.900
> 
> 标签：python, django, django-forms

此表单不应发布，它正在获取当前从上一个设置页面保存的内容。但是，在我设置的这一点上：我只是想获取会话信息并保存它。如果用户决定更改他们的信息。

到目前为止我已经尝试过：

*   `request.session['form_data'] = user_info_form.cleaned_data`只有在`form.is_valid()`持有时才有效。
*   `request.session.get['single_input_variable_name']`不适用于列表、字典或元组。

我的下一步行动是什么？

```
if request.method == 'POST':
...
else:
    profile = Profile.objects.get(user=request.user)
    initial = {}
    initial['first_name'] = request.user.first_name
    initial['last_name'] = request.user.last_name
    initial['email'] = request.user.email
    if profile:
        initial['about'] = profile.about
        initial['country'] = profile.country
    user_info_form = UserInfoForm(initial=initial)
context['user_info_form'] = user_info_form
context['profile'] = profile 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:51:16.373

差不多好了; 尝试

```
request.session['form_data'] = user_info_form.data 
```

无论表单是否有效，这都会被填充。然后，您可以在后续请求中将其放回表单中：

```
user_info_form = UserInfoForm(request.session['form_data']) 
```

# iphone - APNS 和 iOS 5 通知中心

> ID：11993551
> 
> 赞同：0
> 
> 时间：2012-08-16T18:47:52.143
> 
> 标签：iphone, ios5, apple-push-notifications

我正在使用 iOS 5 和推送通知（带有通知栏）。

我收到了 5 条通知中心提供的通知。当我点击其中任何一个时，应用程序就会启动，并且会在 application:didFinishLaunchingWithOptions 中看到有效负载字典。此后，与该应用程序相关的所有其他通知都会从通知中心消失。

我想知道我是否可以实现以下任何一项

*   我可以让未读（未点击）通知在通知列表中可用（供以后查看）。
*   当我点击任何一个未读通知时，我可以在 application:didFinishLaunchingWithOptions 中获取所有未读通知的有效负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:13:09.253

为了在您的应用程序从其中一个启动后保留在通知中心中，它们的有效负载需要包含一个徽章编号，并且您的应用程序需要避免将其徽章计数器设置为 0，直到它想要清除其所有通知通知中心。

除了启动您的应用程序的消息之外，没有其他方法可以访问 APNS 消息的通知负载。如果您需要该数据（特别是考虑到不能保证 APNS 交付），一般最佳实践是从您自己的 Web 服务中单独检索它。

# c# - “用户已登录”HttpContext 或请求数据库

> ID：11993552
> 
> 赞同：1
> 
> 时间：2012-08-16T18:47:57.567
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, session-cookies

所以，我在一个巨大的 .NET MVC 3 系统中工作。尽可能多的用户可以同时登录。我只是在用 HttpContext 写一种“嘿，还有人用这个键登录”的方式。但是，这是最佳做法吗？查询数据库更好吗？

我写的是：

```
 MvcApplication.SessionsLock();

        if (!force && MvcApplication.Sessions.Values.Any(p => p.ID.Equals(acesso.id_usuario.ToString(CultureInfo.InvariantCulture)) && p.Valid))
            throw new BusinessException("There's another user logged with this key. Continue ?");

     MvcApplication.SessionsUnlock(); 
```

我们的我可以查询我的数据库..也许是饼干？任何想法，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:35:52.450

## 贮存

该数据库为这些信息提供了一个集中的、持久的位置。您可能会使用自定义数据结构，或者 ASP.Net SQL 会话可能会满足您的要求（更多内容见下文）。

没有一种确定性的方法可以始终准确地知道用户会话何时结束。例如，您可以监听 Session End 事件，但它只会在进程内会话中触发，并且根本不保证触发（例如操作系统可能崩溃）。

无论如何，如果您正在构建一个“巨大的系统”，如您所说，您不应该设计反对使用进程内会话，因为它不会向上扩展。开始考虑更具可扩展性的基于 SQL 的会话状态（并且可能为您提供足够的信息来大致确定有多少用户处于活动状态）。

## 会话赞成/反对

> 我想知道会话是否是一个好习惯。那段代码有效。但我一直在阅读很多文章，反对在 ASP.NET MVC 应用程序上使用会话。

至于 Session 是好事还是坏事 - 一如既往 - 这取决于它的使用方式。正确设计的 MVC 应用程序可以呈现相当复杂的视图，而无需保留状态。部分原因在于对 AJAX 的强大支持（无需重新加载页面）和优雅的模型绑定（可以采用复杂的 Request.Form 并将其变成完整的模型）。

相反，将重复使用的信息的小片段放入会话状态，使用它来避免向客户端发送敏感数据，使用它来使用户流更顺畅等，本质上没有错。

请注意高安全性场景中的[会话固定攻击。](https://www.owasp.org/index.php/Session_fixation)会话可能不合适和/或可能需要进一步手动保护。

需要注意的一件事是 ASP.Net 对会话进行了锁定。当一次发出多个请求时，这可能会导致非常实际的性能问题。通常，这不是问题，但考虑一个包含十几个 AJAX 小部件的页面，这些小部件都从使用会话的控制器或端点请求数据。这些将相互竞争（第一手经验）。

*   [非锁定进程内 ASP.NET 会话状态存储](https://stackoverflow.com/questions/3666556/a-non-locking-in-process-asp-net-session-state-store)

*   [https://stackoverflow.com/a/2327051/453277](https://stackoverflow.com/a/2327051/453277)

MVC 提供了一种简单的方法来将控制器标记为只需要对 Session 进行只读访问，从而消除了这个问题。但是，任何对 Session 的读/写活动仍将被序列化，因此请相应地进行计划。

## 业务注意事项

从业务的角度来看，知道会话已经过期并不总是很重要，因为工作已经停止（您是否关心他们停止使用该站点，或者他们的会话超时？）这可以通过检查最后修改的时间戳来可靠地解决关于实体并警告用户。警告，不要锁定。在我看来，您应该很少/从不基于 Web 应用程序中的登录/注销来锁定记录（太容易陷入锁定状态）。

# .htaccess - 如何将过期标头添加到 Google、Twitter 和 Facebook js 文件？

> ID：11993554
> 
> 赞同：1
> 
> 时间：2012-08-16T18:48:06.723
> 
> 标签：.htaccess

我进行了 yslow 测试，想知道过期标头有 f 级，但我设置了过期标头，后来我知道 js 文件不在我的服务器中，如何将过期标头添加到来自 twitter 的外部 js 文件和 facebook，我的 apache 版本是 2，

```
http://www.google-analytics.com/ga.js
https://apis.google.com/js/plusone.js
http://search.twitter.com/search.json?q=from:rgvzoomin+OR+from:Samanthaprabhu2+OR+from:NameisNani+OR+from:purijagan+OR+from:harish2you+OR+from:charmmeofficial+OR+from:nandinireddy4u+OR+from:sneha_ullal+OR+from:trishtrashers+OR+from:LakshmiManchu+OR+from:shrutihaasan+OR+from:RanaDaggubati+OR+from:geneliad+OR+from:urstruelybunny+OR+from:urstrulyMahesh+OR+from:Ileana_Dcruz+OR+from:allarinaresh+OR+from:ramsayz+OR+from:prakashraaj+OR+from:Actor_Siddharth+OR+from:richyricha+OR+from:iamnagarjuna+OR+from:ssrajamouli&callback=TweetTick&rpp=5
http://platform.twitter.com/widgets.js
http://gobnf.org/i/wm/buttons/wm_super.gif
http://cdn.api.twitter.com/1/urls/count.json?url=http%3A%2F%2Fwww.tolly2day.com&callback=twttr.receiveCount 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:54:53.830

您无法控制与这些文件一起发送的标头，因为它们不是从您的服务器发送的。您只能控制您在本地托管的文件的标题。

# mysql - 嵌套的 MySQL 查询

> ID：11993556
> 
> 赞同：0
> 
> 时间：2012-08-16T18:48:14.327
> 
> 标签：mysql, sql, nested

我目前有以下查询：

```
select min(nw_lpdTEMP) AS Min_Lkpmp_Temp_C,
  max(nw_lpdPH) AS Max_Lkpmp_PH,
(select format(nw_uvttlflw,7) from tag_history 
  where from_unixtime(floor(unix_timestamp(t_stamp)/60)*60)
  Between '2012-07-01 00:00:00' AND '2012-07-01 23:59:59' order by nw_bpdcl2 limit 1) as Min_GPM, 
  format(min(nw_bpdcl2),7) as Min_Chlorine_Residual,
(select format(nw_uvttlflw,7) from tag_history
  where from_unixtime(floor(unix_timestamp(t_stamp)/60)*60)
  Between '2012-07-01 00:00:00' AND '2012-07-01 23:59:59' order by nw_bpdcl2 desc limit 1) as Max_GPM,
  format(max(nw_bpdcl2),7) as Max_Chlorine_Residual from tag_history 
  where from_unixtime(floor(unix_timestamp(t_stamp)/60)*60) 
  Between '2012-07-01 00:00:00' AND '2012-07-01 23:59:59' 
```

我想看看我是否可以添加以下查询，它返回 24 小时之间每分钟一加仑流量​​ (nw_uvttlflw) 的总和。我可以运行自己尝试添加到上述查询的（总和查询）查询，它会返回我想要的内容。我当前的问题是尝试将其与上述查询嵌套，因此它将总和（nw_uvttlflw）作为原始较大查询中的最后一列返回。（对不起，我对嵌套 SQL 查询缺乏高质量的格式，因为我不是最精通冗长的查询）

我要附加的查询在这里：

```
select format(sum(nw_uvttlflw),7) as Total_flow from tag_history
where from_unixtime(floor(unix_timestamp(t_stamp)/60)*60) 
Between '2012-07-01 00:00:00' AND '2012-07-01 23:59:59'; 
```

非常感谢您的时间和精力。一段时间以来，我一直试图将其拼凑在一起，但无法使我的语法正确。谢谢

-标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:03:24.963

这是你要找的吗？

```
select min(nw_lpdTEMP) AS Min_Lkpmp_Temp_C,
  max(nw_lpdPH) AS Max_Lkpmp_PH,
  (select format(nw_uvttlflw,7) from tag_history 
    where from_unixtime(floor(unix_timestamp(t_stamp)/60)*60)
    Between '2012-07-01 00:00:00' AND '2012-07-01 23:59:59' order by nw_bpdcl2 limit 1) as Min_GPM, 
  format(min(nw_bpdcl2),7) as Min_Chlorine_Residual,
  (select format(nw_uvttlflw,7) from tag_history
    where from_unixtime(floor(unix_timestamp(t_stamp)/60)*60)
    Between '2012-07-01 00:00:00' AND '2012-07-01 23:59:59' order by nw_bpdcl2 desc limit 1) as Max_GPM,
  format(max(nw_bpdcl2),7) as Max_Chlorine_Residual,
  (select format(sum(nw_uvttlflw),7) from tag_history
    where from_unixtime(floor(unix_timestamp(t_stamp)/60)*60) 
    Between '2012-07-01 00:00:00' AND '2012-07-01 23:59:59') as Total_flow
from tag_history 
where from_unixtime(floor(unix_timestamp(t_stamp)/60)*60) 
  Between '2012-07-01 00:00:00' AND '2012-07-01 23:59:59' 
```

# ios - 一个视图是否可以安全地添加到多个其他视图中，如果可以，那么 removeFromSuperView: 在这种情况下会做什么？

> ID：11993557
> 
> 赞同：7
> 
> 时间：2012-08-16T18:48:20.230
> 
> 标签：ios

我想知道如果 UIView 对象的单个实例同时添加为多个其他视图的子视图会发生什么。如果 UIView:removeFromSubview: 被调用，那么它是从所有超级视图中删除还是仅从当前显示的视图中删除？

背景：

我有一个类似状态栏的视图对象，需要在几个不同的其他视图中显示（每个其他视图由其自己的视图控制器管理）。

[即 a) 用户在一个视图中，b) 发生了一些事情使类似状态栏的视图出现，c) 用户切换到另一个视图 d) 状态栏在新视图中仍然可见 e) 状态栏会在一段时间后过期并从网站上消失。等等]

最初，我通过根据需要添加/删除它作为窗口的子视图来实现这一点，这是由单例管理的。然而，由于某些动画的一些复杂性，我将其添加为每个视图控制器的每个主视图的子视图。请注意，没有多个副本

当需要删除视图时，我调用它的 removeFromSuperview:，一切都运行良好。

但是我想知道删除视图的情况如何，是完全删除还是我需要做其他事情？

例如，视图可能会根据需要通过调用 addSubview 添加到 N 个视图控制器的视图中（如果该视图控制器实际启动，它只会添加到每个视图控制器）但是当它被删除时，我只调用 removeFromSuperview: 的视图当前加载的视图控制器，并非所有可能已添加到的视图控制器。

下次我导航到其中一个其他视图控制器时，即使我没有显式调用 removeFromSuperView，它也可以在没有视图的情况下正常显示。

正如我所说，一切正常，但是在我的脑海中，我觉得可能缺少一些东西？

希望这是可以理解的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T18:59:43.593

您只能将其添加到一个视图中。文档是你的朋友！

> *   (void)addSubview:(UIView *)view：视图只能有一个父视图。如果视图已经有一个超级视图并且该视图不是接收者，则此方法会在使接收者成为其新的超级视图之前删除先前的超级视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:00:04.530

从我的角度来看，必须将相同的视图添加到不同的父视图（更重要的是，来自不同的视图控制器）表明设计存在问题......

但是，如果您真的（真的）需要，我一直认为一个视图实例可以有一个且只有一个父视图......此外，您可以通过`[myView superview]`消息访问它，它为您提供 UIView 实例而不是数组。 ..它可能会在添加到新的超级视图之前自动从其旧父级中删除？

关于设计，每次你需要一个新的并且有一个单例来管理他们的状态/逻辑时，如何创建它？

祝你好运！

# spotify - libspotify：给定艺术家和专辑的重复搜索结果

> ID：11993559
> 
> 赞同：0
> 
> 时间：2012-08-16T18:48:30.957
> 
> 标签：spotify

我注意到搜索结果可能会返回给定艺术家和专辑的多张专辑，并且这些专辑的发行年份相同。例如，搜索**艺术家：“Foster The People”专辑：Torches**返回 5 张专辑，其中 4 张看起来相同（相同的发行年份、相同的专辑名称、相同的艺术家和专辑的相同曲目）虽然专辑 uri 不同. 我可以假设第一个（顶部）始终是最近添加或发布的吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:59:36.740

可能不是。但是，只要发布年份相同，添加的顺序和日期就无关紧要。

您应该检查结果以查看专辑的每个版本中有多少曲目可供用户使用，因为它可能因地区而异，并且通常会因 URI 而异。我们目录中经常发生的情况是，同一张专辑的多个版本发布到不同的地区，但仍会出现在搜索结果中。

总结一下：

*   顺序并不重要。
*   您应该向用户显示包含最多可用曲目的专辑。

您也可以在我们自己的桌面客户端中看到这一点。如果您在客户端查看艺术家[Rihanna](http://open.spotify.com/artist/5pKCCKE2ajJHZ9KAiaK11H)，您会在专辑“Talk That Talk”的标题后面看到一个小箭头按钮。如果单击该按钮，您将在 Spotify 上看到该专辑的所有版本。默认情况下，客户端只会向您显示拥有最多可用曲目的那个。

# asp.net-mvc-3 - MVC3 razor Webgrid - 删除后保留页面

> ID：11993564
> 
> 赞同：1
> 
> 时间：2012-08-16T18:48:54.027
> 
> 标签：asp.net-mvc-3, razor, webgrid, razor-grid

在我的 MVC3 razor 页面上，我使用 webgrid 来显示大约 100 多条记录的列表。

我将页面大小设置为 10，并且分页和排序工作正常。我唯一的问题是在我的页面上我在 webgrid 上有一个“删除”超链接。当我单击“删除”时，它将删除记录并重新加载页面。但是当重新加载页面时它会返回到 page1

例如，如果我在 page4 上并单击“删除”，它会删除该记录并进入 page1，但我想保留在 page4 本身中。关于如何实现这一目标的任何建议。

```
public ViewResult Index(int? page, string sort)
        {
            var startPage = 0;
            if (page.HasValue && page.Value > 0)
            {
                startPage = page.Value - 1;
            }
            vm.Employees = GetAllEmployeeData(startPage, vm.PageSize, sort);
            vm.TotalRecords = context.TableEmployee.Count();            
            return View(vm);
        }

public IEnumerable<Employees> GetAllEmployeeData(int page, int records, string sort)
        {

            IEnumerable<Employees> EmployeeData = null;

            EmployeeData = context.TableEmployee.Where(e => e.IsActivated == true)
               .Select(e => new Employees{ EmpID = e.EmpID, Name= e.Name, Joiningdate = e.Joiningdate , Department = e.DeptName}).AsEnumerable<Employees>();

            switch (sort)
            {
                case "Department":
                    EmployeeData = EmployeeData .OrderBy(r => r.Department);
                    break;
                case "JoiningDate":
                    EmployeeData = EmployeeData .OrderBy(r => r.JoiningDate);
                    break;
                default:
                    EmployeeData = EmployeeData .OrderBy(r => r.Name);
                    break;
            }

            EmployeeData  = EmployeeData .Skip(page * records).Take(records).ToList();
            return EmployeeData ;

        }

 public ActionResult DeleteSelectedEmployee(int empId)
        {

            ContentsViewModel model = new ContentsViewModel();
            int timelineItemId = 0;
           EmployeeData E = context.TableEmployee.Find(empId);
            context.TableEmployee.Remove(E);
            context.SaveChanges();

            return RedirectToAction("Index");
        } 
```

这是我的网络网格

```
@{var webgrid = new WebGrid(canPage: true, rowsPerPage: Model.PageSize, canSort: true, ajaxUpdateContainerId: "grid");
          webgrid.Bind(Model.Employees, rowCount: Model.TotalRecords, autoSortAndPage: false);
          webgrid.Pager(WebGridPagerModes.Numeric);
            @webgrid.GetHtml(tableStyle: "webgridTable", htmlAttributes: new { id = "grid" },

                           columns: webgrid.Columns(
                           webgrid.Column("Name", "Name"),
                           webgrid.Column("Department", "Department"),

                      webgrid.Column("JoiningDate", "Join Date", format: @<text>@item.JoiningDate.ToString("dddd, MMMM d, yyyy")</text>),

                                                                                                      webgrid.Column(header: "Action", format: (item) => Html.ActionLink("Edit", "Edit", new { empId = item.EmpID })),
                                                                                                   webgrid.Column(format: (item) => Html.ActionLink("Delete", "Delete Record", new { empId = item.EmpID }))

                                                                                               ));
        } 
```

# javascript - javascript 切换到 jQuery 慢速切换幻灯片

> ID：11993567
> 
> 赞同：0
> 
> 时间：2012-08-16T18:49:18.187
> 
> 标签：javascript, jquery

你好，我有一个可以很好切换的子弹树，但我想做一个在 jquery 中看起来很漂亮的滑动切换......你能帮忙吗？

javascript:

```
function toggle(id) {
    var e = document.getElementById(id);
    if (e.style.display == '')
        e.style.display = 'none';
    else
        e.style.display = '';
} 
```

html:

```
<ul style="text-align: left;">
    <li>
        <a href="#" onclick="toggle('node1')">All</a> <input type="checkbox" name="sors" value="A" checked="checked"/>
        <ul id="node1" style="display:none">
            <li>
                <a href="#" onclick="toggle('node2')">Organic</a>
                <ul id="node2" style="display:none">
                    <li>MCA <input type="checkbox" name="sors" value="A" checked="checked"/></li>
                    <li>MCB <input type="checkbox" name="sors" value="A" checked="checked"/></li>
                </ul>
            </li>
            <li>COMM &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" name="sors" value="A" checked="checked"/></li>
            <li>DMISA &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" name="sors" value="A" checked="checked"/></li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:57:12.237

```
function toggle(id) {
  $('#' + id).slideToggle();
} 
```

[**现场示例**](http://jsfiddle.net/maucr/)

[幻灯片切换文档](http://api.jquery.com/slideToggle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:52:14.187

请参阅 jquery 的`show`和`hide`函数。您可以以毫秒为单位向它们传递一个值，以动画显示/隐藏。

# c++ - 如何编写适用于矢量或地图迭代器的自定义算法

> ID：11993575
> 
> 赞同：2
> 
> 时间：2012-08-16T18:50:01.050
> 
> 标签：c++, stl, map

我想编写自己的算法（实际上只是一个函数），它需要一系列迭代器。如果迭代器来自地图，我想使用数据 (iterator->second) 值。如果迭代器像向量或列表一样“正常”，我只想使用取消引用的迭代器值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:30:32.787

我认为，价值获取者的想法就在这里，但你可以在没有`c++11`和没有结构的情况下实现它，只使用函数：

```
template <typename T> 
const T& get(const T& t)
{
    return t;
}

template <typename T, typename V>
const V& get(const std::pair<T,V>& t)
{
    return t.second;
}

int main()
{
    std::vector<int> v = {1};
    std::cout << get(*v.begin());

    std::cout << "\n----\n";

    std::map<int, std::string> m;
    m.insert(std::make_pair(0, "sss"));
    std::cout << get(*m.cbegin());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T19:00:52.753

您可以创建一个 value-getter 类来提取您感兴趣的值。请注意，如果您将`pair`s 存储在任何容器中（它转换所有`pair`s，无论是否在地图中），这种方法都不起作用。我认为只接受“常规”迭代器并让它成为调用者的工作来适当地转换映射迭代器将是一种更清晰的方法（如对您问题的评论中所建议的那样。）

```
template<typename T>
struct get {
  static auto val(const T& t) -> const T&
  {
    return t;
  }
};

template<typename U, typename V>
struct get<std::pair<U, V>> {
  static auto val(const std::pair<U, V>& p) -> const V&
  {
    return p.second;
  }
};

// use like
get<decltype(*iter)>::val(*iter); 
```

便利功能可能如下所示：

```
template<class T>
auto getval(const T& t) -> decltype(get<T>::val(t))
{
  return get<T>::val(t);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T18:52:17.743

您可以根据输入重载函数：

```
void foo(const std::vector<int>::iterator& it1, const std::vector<int>::iterator& it2) 
{
   //use *it
}
void foo(const std::map<int,int>::iterator& it1, const std::map<int,int>::iterator& it2)
{
   //use it->second
} 
```

编辑：

我认为这是最接近您想要实现的目标：

```
template <typename T, typename X>
void foo(T const& x, X const& y)
{

}

template <typename T, typename S>
void foo(const typename std::map<T,S>::iterator& x, const typename std::map<T,S>::iterator& y)
{

}

int main()
{
    std::map<int,int> x;
    std::vector<int> y;
    foo(x.begin(), x.end()); //will call second version
    foo(y.begin(), y.end()); //will call first version
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T19:19:11.463

一个特质应该可以解决问题。首先是类型推导助手：

```
template <typename Iter>
typename iter_value<Iter>::value_type & iter_deref(Iter it)
{
    return iter_value<Iter>::deref(it);
} 
```

我们需要的是这样的：

```
template <typename Iter>
class iter_value
{
    template <typename T> struct aux
    {
        typedef T type;
        static type & deref(Iter it) { return *it; }
    };
    template <typename U, typename V> struct aux<std::pair<U const, V>>
    {
        typedef V type;
        static type & deref(Iter it) { return it->second; }
    };

    typedef typename std::iterator_traits<Iter>::value_type type;

public:
    typedef typename aux<type>::type value_type;

    static value_type & deref(Iter it)
    {
        return aux<type>::deref(it);
    }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T18:57:47.093

您可以创建一个从迭代器中提取值的函数。然后你可以根据迭代器的类型重载它。您可以在算法中使用该函数。假设->的向量`ints`和映射，它可能如下所示：`string``int`

```
int getValue(const std::vector<int>::iterator& it)
{
    return *it;
}

int getValue(const std::map<std::string, int>::iterator& it)
{
    return it->second;
} 
```

然后算法可以使用该函数`getValue()`从迭代器中获取一个值。

# android - normal Activity switching to TabActivity

> ID：11993577
> 
> 赞同：0
> 
> 时间：2012-08-16T18:50:10.663
> 
> 标签：android

I have 2 activity: A, B. The first is an normal Activity and the second an TabActivity. Inside A i have a clickable button that make an intent to call the TabActivity the output showing black screen..how to show the UI of both the screens?tell me the solution?i need code please help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:53:18.540

阅读文档：

[http://developer.android.com/reference/android/app/Activity.html#StartingActivities](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

或使用本教程：

[http://www.androidcompetencycenter.com/2009/03/tutorial-how-to-start-a-new-activity/](http://www.androidcompetencycenter.com/2009/03/tutorial-how-to-start-a-new-activity/)

# gpu - 将 emgu 代码转换为 GPU

> ID：11993589
> 
> 赞同：-2
> 
> 时间：2012-08-16T18:51:20.707
> 
> 标签：gpu, emgucv

我是 GPU 编程的新手，在使用 GPU 之前我没有经验，我有一些功能，我必须转换这些功能以便它们在 GPU 中运行，cpu 版本运行良好，我使用 emgucv 进行图像操作. 我的代码在下面给出，请帮助我。

```
public static Image Highlight(Image image)
    {
      if (image == null)
      {
        throw new ArgumentNullException("image");
      }

      using (Image<Bgr, byte> originalImage = ConvertToEmgu(image))
      using (Image<Bgr, byte> resavedOriginalImage = ConvertToEmgu(ResaveImageWithGivenCompression(image)))
      using (Image<Bgr, byte> errorLevelImage = (originalImage - resavedOriginalImage) * scalingFactor)
      {
        return errorLevelImage.ToBitmap();
      }
    }

    private static Image<Bgr, byte> ConvertToEmgu(Image image)
    {
      using (Bitmap bitmap = new Bitmap(image))
      {
        return new Image<Bgr, byte>(bitmap);
      }
    }

    private static Image ResaveImage(Image image)
    {
      EncoderParameters jpegEncoderParameters = new EncoderParameters(1);
      ImageCodecInfo jpegWithGivenCompressionFormat = GetEncoderInfo("image/jpeg");

      jpegEncoderParameters.Param[0] = new EncoderParameter(Encoder.Quality, compressionQuality);

      using (MemoryStream resavedImageStream = new MemoryStream())
      {
        image.Save(resavedImageStream, jpegWithGivenCompressionFormat, jpegEncoderParameters);

        return Image.FromStream(resavedImageStream);
      }
    }

    private static ImageCodecInfo GetEncoderInfo(string mimeType)
    {
      ImageCodecInfo[] encoders = ImageCodecInfo.GetImageEncoders();

      return encoders.FirstOrDefault(encoder => encoder.MimeType == mimeType);
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T04:06:56.993

*   首先，您需要一个至少支持 CUDA 2.0 的显卡。
*   然后你必须从 NVidia 安装 CUDA 驱动程序。搜索 CUDA 工具包。
*   然后你需要在你的项目中包含 CUDA dll（就像你对 Opencv dll 所做的那样）
*   然后你需要使用 CV.GPU 命名空间
*   然后用适当的 GPU 版本替换所有函数。在您的代码中，我没有看到任何 OpenCV 函数，因此没有什么可替换的。（但我可能会遗漏一些）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:23:57.343

请查看以下网站以回答您的问题

[http://opencv.willowgarage.com/wiki/OpenCV_GPU](http://opencv.willowgarage.com/wiki/OpenCV_GPU) http://opencv.itseez.com/doc/tutorials/tutorials.html [http://blog.cuvilib.com/2011/03/22/how-to-构建-opencv-2-2-with-gpu-cuda-on-windows-7/](http://blog.cuvilib.com/2011/03/22/how-to-build-opencv-2-2-with-gpu-cuda-on-windows-7/)

# jquery - jquery .append() 不工作

> ID：11993597
> 
> 赞同：0
> 
> 时间：2012-08-16T18:52:07.497
> 
> 标签：jquery

我正在尝试将一些文本附加到动态创建的 div 中。我在 .each() 函数中执行此操作。文本未附加的问题。有人可以帮我解决这个问题。这就是我想要做的

```
 $('<div class="window" id="window'+i+'" />')
                .append($('<p id="country'+i+'">').text($(this).find('COUNTRY').text()))
                .appendTo('body');
                var j = 0;
                $(this).find('TO').each(function(){
                    var $name = $(this).text();
                    alert("@@@@@@@@@@@@@@@@@@@@::::"+$name);
                    j +=1;
                    $('<#id="window'+i+'" />').append($('<p id="to'+j+'">Test</p>'));
                }); 
```

请帮助我，让我知道我哪里出了问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T18:53:41.983

这个元素是什么？

```
$('<#id="window'+i+'" />') 
```

你的意思是：

```
$('#window'+i) 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:54:12.327

你的选择器是错误的。它应该是

```
$('div[id="window'+i+'"]').append($('<p id="to'+j+'">Test</p>')); 
```

或者因为你有一个 id 只需使用 ID 选择器

```
$('#window' + i) 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:58:24.610

看来您的问题在于这一点：

```
$(this).find('COUNTRY').text() 
```

我猜“国家”是`id`您正在寻找的元素？如果是这样，请尝试：

```
$(this).find('#COUNTRY').text() 
```

同样，这个选择器：

```
$(this).find('TO') 
```

可能需要更改为

```
$(this).find('#TO') 
```

这取决于是否`'COUNTRY'`和`'TO'`是 ID、类等。最后，正如其他人指出的那样：

```
$('<#id="window'+i+'" />') 
```

是一个无效的选择器。如果您尝试创建一个元素，您需要：

```
$('<div id="window'+i+'" />') 
```

如果您尝试选择现有元素，请尝试：

```
$('#window'+i) 
```

# google-chrome - chrome的字典自动完成扩展？

> ID：11993602
> 
> 赞同：5
> 
> 时间：2012-08-16T18:52:30.590
> 
> 标签：google-chrome, autocomplete, google-chrome-extension

我试着用谷歌搜索，但我没有任何运气。是否有用于拼写的 chrome 自动完成扩展？就像我在 Eclipse 中键入时一样

```
System.out.pri 
```

然后 CTRL+SPACE 会弹出一个带有`print`,`println`等的菜单。

我希望这是 chrome 的扩展，但不是用于编程单词，而是用于英语单词。例如我输入

```
isol 
```

然后按CTRL+SPACE，它会弹出一个菜单，其中包含以“isol”开头的单词（例如isolated）。

那么这已经存在还是我必须自己写？

# emacs - 刷新 gnus 中的摘要缓冲区

> ID：11993603
> 
> 赞同：14
> 
> 时间：2012-08-16T18:52:30.500
> 
> 标签：emacs, gnus

当我阅读消息时，`gnus`我希望新消息`*Summary*`到达时动态显示在我的缓冲区中。目前我必须回到`*Group*`缓冲区然后`INBOX`再次选择...有没有办法刷新`*Summary*`缓冲区而不返回`*Group*`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T21:48:35.657

在摘要缓冲区中使用`/ N`, 即`gnus-summary-insert-new-articles`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-02T10:00:44.440

你想做的就是`M-g`我想的。它将获取已删除的文章。此快捷方式绑定到`gnus-summary-rescan-group`.

基本上它会退出组，要求新文章然后再次选择组。

# jquery - jQuery函数在窗口调整大小时触发但不是在页面加载时触发

> ID：11993604
> 
> 赞同：3
> 
> 时间：2012-08-16T18:52:31.510
> 
> 标签：jquery, resize, onload, centering, fluid-layout

我发现了这个 jQuery 代码，它允许在水平和垂直方向上都没有固定尺寸的 div 居中。它适用于窗口的高度和宽度。因此，当我调整窗口大小时，div 仍然在窗口中居中。

我的问题是，现在，除非我先调整窗口大小，否则它不起作用。因此，如果我只是加载页面，除非我手动调整窗口大小，否则 div 不会居中。

当然，这并不理想。所以我试图找到解决方法。但是我的 jQuery 技能非常有限，我现在被卡住了。

这是我正在处理的页面：http: [//dev.manifold.ws/test2/](http://dev.manifold.ws/test2/)（尝试调整窗口大小以查看我正在描述的内容）

这是我正在使用的 jQuery：

```
$(document).ready(function(){

$(window).resize(function(){

    $('.img-holder').css({
        position:'absolute',
        left: ($(window).width() - $('.img-holder').outerWidth())/2,
        top: ($(window).height() - $('.img-holder').outerHeight())/2
    });

});
// This is suppose to initially run the function but it doesn't seem to work
$(window).resize();

}); 
```

有谁知道如何解决这个问题？谢谢！

-汤姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:56:10.027

```
$(document).ready(function(){
    doResize();
    $(window).on('resize', doResize);
});

function doResize() {
    $('.img-holder').css({
        position:'absolute',
        left: ($(window).width() - $('.img-holder').outerWidth())/2,
        top: ($(window).height() - $('.img-holder').outerHeight())/2
    });
} 
```

[**小提琴**](http://jsfiddle.net/MQqD8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:56:38.233

尝试这个：

```
function adoptToSize() {
    $('.img-holder').css({
        position:'absolute',
        left: ($(window).width() - $('.img-holder').outerWidth())/2,
        top: ($(window).height() - $('.img-holder').outerHeight())/2
    });
}

$(document).ready(adoptToSize);
$(window).resize(adoptToSize); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:57:38.640

为什么不

```
$(document).ready(function() { 
    resize();
});

$(window).resize(function(){
    resize();    
});

function resize() {
    $('.img-holder').css({
        position:'absolute',
        left: ($(window).width() - $('.img-holder').outerWidth())/2,
        top: ($(window).height() - $('.img-holder').outerHeight())/2
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:58:02.567

尝试这个。你不能像这样调用回调函数。

$(文档).ready(函数(){

$(窗口).resize(函数(){

```
$('.img-holder').css({
    position:'absolute',
    left: ($(window).width() - $('.img-holder').outerWidth())/2,
    top: ($(window).height() - $('.img-holder').outerHeight())/2
}); 
```

});

```
$('.img-holder').css({
    position:'absolute',
    left: ($(window).width() - $('.img-holder').outerWidth())/2,
    top: ($(window).height() - $('.img-holder').outerHeight())/2
}); 
```

});

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T19:03:35.393

请记住，这[`$(document).ready`](http://api.jquery.com/ready/)发生在 DOM 准备好之后，但**在所有内容加载之前**。

当您第一次触发调整大小功能时，您`<img />`可能尚未加载...
尝试使用文档的`load`事件或图像的加载事件。

然而，这里最好的解决方案是给图像一个固定的大小：

```
<img src="img/test.jpg" style="width:800px;height:519px;" /> 
```

或者：

```
.img-holder img {width:800px;height:519px;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T19:04:31.143

尝试类似：

```
+function($, window){
  var resizeWin = function(){
      $('.img-holder').css({
          position:'absolute',
          left: ($(window).width() - $('.img-holder').outerWidth())/2,
          top: ($(window).height() - $('.img-holder').outerHeight())/2
      });
  }

  $(function(){ resizeWin() });
  $(window).bind('resize',resizeWin);
}(jQuery, window, undefined); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-28T16:45:44.927

同时绑定 load 和 resize 事件，如下所示：

```
$(window).on('load resize', function () {
// your code
}); 
```

希望这可以帮助。

# python - 如何重写一个简单的分词器以使用正则表达式？

> ID：11993606
> 
> 赞同：1
> 
> 时间：2012-08-16T18:52:46.447
> 
> 标签：python, regex, rewrite, tokenize, lexer

这是第一次编写的标记器的优化版本，它工作得相当好。辅助标记器可以解析此函数的输出以创建更具体的分类标记。

```
def tokenize(source):
    return (token for token in (token.strip() for line
            in source.replace('\r\n', '\n').replace('\r', '\n').split('\n')
            for token in line.split('#', 1)[0].split(';')) if token) 
```

我的问题是：*如何简单地用`re`模块编写？*以下是我无效的尝试。

```
def tokenize2(string):
    search = re.compile(r'^(.+?)(?:;(.+?))*?(?:#.+)?$', re.MULTILINE)
    for match in search.finditer(string):
        for item in match.groups():
            yield item 
```

**编辑：**这是我从标记器中寻找的输出类型。解析文本应该很容易。

```
>>> def tokenize(source):
    return (token for token in (token.strip() for line
            in source.replace('\r\n', '\n').replace('\r', '\n').split('\n')
            for token in line.split('#', 1)[0].split(';')) if token)

>>> for token in tokenize('''\
a = 1 + 2; b = a - 3 # create zero in b
c = b * 4; d = 5 / c # trigger div error

e = (6 + 7) * 8
# try a boolean operation
f = 0 and 1 or 2
a; b; c; e; f'''):
    print(repr(token))

'a = 1 + 2'
'b = a - 3 '
'c = b * 4'
'd = 5 / c '
'e = (6 + 7) * 8'
'f = 0 and 1 or 2'
'a'
'b'
'c'
'e'
'f'
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:13:05.017

我可能离这里很远-

```
>>> def tokenize(source):
...     search = re.compile(r'^(.+?)(?:;(.+?))*?(?:#.+)?$', re.MULTILINE)
...     return (token.strip() for line in source.split('\n') if search.match(line)
...                   for token in line.split('#', 1)[0].split(';') if token)
... 
>>> 
>>> 
>>> for token in tokenize('''\
... a = 1 + 2; b = a - 3 # create zero in b
... c = b * 4; d = 5 / c # trigger div error
... 
... e = (6 + 7) * 8
... # try a boolean operation
... f = 0 and 1 or 2
... a; b; c; e; f'''):
...     print(repr(token))
... 
'a = 1 + 2'
'b = a - 3'
'c = b * 4'
'd = 5 / c'
'e = (6 + 7) * 8'
'f = 0 and 1 or 2'
'a'
'b'
'c'
'e'
'f'
>>> 
```

如果适用，我会将其`re.compile`排除在`def`范围之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:01:23.277

这是基于您的 tokenize2 函数的一个：

```
def tokenize2(source):
    search = re.compile(r'([^;#\n]+)[;\n]?(?:#.+)?', re.MULTILINE)
    for match in search.finditer(source):
        for item in match.groups():
            yield item

>>> for token in tokenize2('''\
... a = 1 + 2; b = a - 3 # create zero in b
... c = b * 4; d = 5 / c # trigger div error
... 
... e = (6 + 7) * 8
... # try a boolean operation
... f = 0 and 1 or 2
... a; b; c; e; f'''):
...     print(repr(token))
... 
'a = 1 + 2'
' b = a - 3 '
'c = b * 4'
' d = 5 / c '
'e = (6 + 7) * 8'
'f = 0 and 1 or 2'
'a'
' b'
' c'
' e'
' f'
>>> 
```

# c# - 开发密码保护usb写访问的程序

> ID：11993608
> 
> 赞同：1
> 
> 时间：2012-08-16T18:52:53.350
> 
> 标签：c#, usb

在我工作的地方，我们的计算机上有敏感数据需要保留在那里，但我们会定期更新数据，因此我们需要一种方法来禁止复制到闪存驱动器但允许从闪存驱动器复制到计算机。目前我们正在使用 Windows 注册表项 StorageDevicePolicies-->writeprotect(1) 执行此操作，但由于任何具有计算机知识的人都可以撤消此操作，因此它不够安全。我搜索但在网上找不到任何东西，所以我决定自己开发它。问题是我没有任何使用硬件的经验，我主要用 c sharp 开发数据库应用程序。因此，我将不胜感激 c sharp 中的解决方案，但任何可以提供帮助的东西都会受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:25:28.590

如果他们具有管理员权限，那么您编写的任何 C# 程序都可以像更改注册表项一样容易地被关闭。真正的解决方案是修改用户权限，并可能在需要将数据复制到机器时删除闪存驱动器功能并使用网络共享。

如果有的话，我可能只是用一个不起眼的名字做一个服务，它会定期轮询注册表项以查看它是否被翻转，如果它已经通知 IT 人员，然后他们将征用计算机、闪存驱动器和事件日志（显示该用户更改了注册表项），然后将它们和日志提交给管理人员。这假设员工已被彻底且频繁地警告说，从机器上复制数据是严格违反规则的。有时，用户不清楚 IT 障碍究竟是管理不善的 IT 还是公司政策。

或者，如果它被更改，您可以让服务强制返回，但随后反复试验将允许具有管理员权限的用户发现需要关闭哪个服务以防止这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:28:24.053

我怀疑您是否可以访问网络，因为您正在使用闪存驱动器复制数据。但是即使您没有网络，您仍然可以使用此方法（但管理员仍然可以绕过它）。

组策略具有您正在寻找的确切设置。只需打开[Group Policy Snap-in](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/gpedit_start.mspx?mfr=true)，然后在`Computer Configuration`or下`User Configuration`（如果您希望它分别应用于计算机或用户（如果您希望它在一台计算机上但仅应用于某些用户，则需要设置[环回处理](http://gps.cloudapp.net/Default.aspx?PolicyID=348)）然后去`\Administrative Templates\System\Removable Storage Access\`

在该文件夹中，您可以启用以下设置：

*   CD 和 DVD：拒绝写入访问
*   自定义类：拒绝写访问
*   软盘驱动器：拒绝写访问
*   可移动磁盘：拒绝写入访问
*   磁带机：拒绝写访问
*   [WPD 设备](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463541.aspx)：拒绝写访问

如果您在域中，则可以这样做，即使用户是计算机的本地管理员，他们也无法禁用该设置，除非他们也是域管理员。如果您不在域中，任何管理员用户都可以禁用它。

# html - 非常基本的rails link_to问题

> ID：11993611
> 
> 赞同：0
> 
> 时间：2012-08-16T18:53:00.627
> 
> 标签：html, ruby-on-rails, erb

大家好，我有一个尝试使用以下代码创建的删除链接：

```
 <%= link_to 'Delete', element, method: :delete, data: { confirm: 'Are you sure?' } %> 
```

但是，生成的链接是 /element.id ，其中 id 是整数 id。我将如何改变它。到 / 对不起，我知道这是非常基本的，但我找不到任何文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:00:17.623

尝试这个

```
 <%= link_to 'Delete', destroy_modelname_path(element), method: :delete, data: { confirm: 'Are you sure?' } %> 
```

替换`modelname`为您的模型名称。

在您的应用程序的终端中运行`rake routes`以查看所有路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:56:10.527

我猜问题出在 中`config/routes.rb`，它应该包含对 的引用`element`，例如：

```
resources :element 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:07:23.403

路由文件有问题。您的路由例程似乎在 :format 的位置写入 id。

# xaml - 本地资源（类）在我的 xaml 文件中不可用

> ID：11993612
> 
> 赞同：0
> 
> 时间：2012-08-16T18:53:00.463
> 
> 标签：xaml, windows-8, winrt-xaml

我有一个扩展 GridView 的类。我想在我的 xaml 文件中使用它。它有命名空间`MyApplication`，所以我输入了 xaml

```
<Page
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:MyApplication" 
```

谢谢我想用

```
<local:VariableGridView Grid.Column="1" x:Name="listView"> 
```

它有效，但我得到了错误

```
Error   6   The name "VariableGridView" does not exist in the namespace "using:MyApplication". 
```

我不明白为什么我会得到这个。我已经多次重建项目，但我仍然得到这个。

// 编辑

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using SignDictionary.Model;
using Windows.Foundation;
using Windows.UI;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Media;

namespace MyApplication
{
public class VariableGridView : GridView 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:04:06.533

您是否尝试过将您的 using 语句更改为：

```
xmlns:local="clr-namespace:MyApplication" 
```

这就是这个控制似乎存在的地方。

# php - 递归更改数组中的键

> ID：11993613
> 
> 赞同：1
> 
> 时间：2012-08-16T18:53:10.820
> 
> 标签：php, recursion

我有这个`trimmer`功能，它递归地修剪数组中的所有值（人们无缘无故地放了很多空格！）：

```
function trimmer(&$var) {
    if (is_array($var)) {
        foreach($var as &$v) {
            trimmer($v);
        }
    }
    else {
        $var = trim($var);
    }
}
trimer($_POST); 
```

**问题：**我想添加新功能：我希望此功能还可以将`_`键中的所有（下划线）转换为空格。我知道如何转换键（`str_replace('_', ' ', $key)`），但我很难让它以这种递归方式工作......

**输入：**

```
$_POST['Neat_key'] = '   dirty value '; 
```

**预期结果：**

```
$_POST['Neat key'] = 'dirty value'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:09:20.940

不幸的是，没有办法在循环数组时替换数组的键。这是语言的一部分，解决它的唯一方法是使用临时数组：

```
$my_array = array(
    'test_key_1'=>'test value 1     ',
    'test_key_2'=>'        omg I love spaces!!         ',
    'test_key_3'=>array(
        'test_subkey_1'=>'SPPPPAAAAACCCEEESSS!!!111    ',
        'testsubkey2'=>'    The best part about computers is the SPACE BUTTON             '
    )
);
function trimmer(&$var) {
    if (is_array($var)) {
        $final = array();
        foreach($var as $k=>&$v) {
            $k = str_replace('_', ' ', $k);
            trimmer($v);
            $final[$k] = $v;
        }
        $var = $final;
    } elseif (is_string($var)) {
        $var = trim($var);
    }
}
/* output
array (
        'test key 1'=>'test value 1',
        'test key 2'=>'omg I love spaces!!',
        'test key 3'=>array (
                'test subkey 1'=>'SPPPPAAAAACCCEEESSS!!!111',
                'testsubkey2'=>'The best part about computers is the SPACE BUTTON'
        )
)
*/ 
```

试试看：[http ://codepad.org/A0N5AU2g](http://codepad.org/A0N5AU2g)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T20:34:39.363

这是一个老歌，但我只是看到它相关：

```
function trimmer(&$var) {
    if (is_array($var)) {
        foreach($var as &$v) {
            trimmer($v);
        }
        // only additional code
        $var = array_combine(str_replace('_', ' ', array_keys($var)), $var);
    }
    else {
        $var = trim($var);
    }
} 
```

但现在更好的是[array_walk_recursive()](http://php.net/manual/en/function.array-walk-recursive.php)。

# amazon-ec2 - 用于处理需求峰值的 EC2

> ID：11993614
> 
> 赞同：3
> 
> 时间：2012-08-16T18:53:13.147
> 
> 标签：amazon-ec2, scalability, load-balancing

我正在为一个执行一些 CPU 密集型工作的移动应用程序编写后端。我们预计该应用程序在大多数情况下不会有大量使用，但偶尔会出现高需求高峰。我在想我们应该做的是保留几个 24/7 的服务器来处理低需求流量的稳定状态，然后根据需要添加和删除 EC2 实例来处理峰值。移动应用程序将首先访问一个简单的负载平衡服务器，该服务器在所有可用的处理服务器之间进行简单的循环用户分配。负载均衡器将处理启动新的 EC2 实例并根据需要将其关闭。

一些问题：

我以前从未写过这样的东西，这听起来像是一个好策略吗？

处理启动和关闭新 EC2 实例的最佳方式是什么？我在想我可以提前创建 X 个实例，根据需要设置它们（安装软件等），然后停止每个实例。然后负载均衡器将根据需要启动和停止实例（例如通过[boto](https://github.com/boto/boto/)）。我认为这应该比尝试创建新实例并通过脚本或其他方式安装所有内容要快得多，也更容易。好主意？

我在这里担心的一件事是关闭并重新打开 EC2 实例的成本。我查看了 AWS 使用报告，但难以理解。我可以看到启动一个停止的实例是一项潜在的昂贵操作。但似乎因为我只是启动一个停止的实例而不是从头开始配置一个新实例，所以它应该不会太糟糕。听起来对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T18:57:48.597

这是一个非常合理的策略。我之前用过成功。

您可能希望将[Elastic Load Balancing](http://aws.amazon.com/elasticloadbalancing/) (ELB) 与[Auto Scaling](http://aws.amazon.com/autoscaling/)结合使用。从概念上讲，两者应该解决这个确切的问题。

当我在 2010 年左右这样做时，ELB 在某些类型的 HTTP 请求方面遇到了一些问题，导致我们无法使用它。我知道这些问题已经解决。

由于 ELB 不是一个选项，我们根据需要从 EBS 快照手动启动实例，并手动将它们添加到 NGinX 负载均衡器。这当然可以使用 AWS API 实现自动化，但我们的峰值是如此可预测（月底），以至于我们只是指派某人启动新实例，而没有解决自动化任务。

当一个实例停止时，我相信您支付的唯一成本是支持该实例及其数据的 EBS 存储。除非您的实例关联了大量数据，否则 EBS 存储费用应该是最低的。自从我上次使用 AWS 以来，也许事情已经发生了变化，但如果这发生了很大变化，我会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:03:24.697

首先关于成本，实例是从头开始还是从停止状态开始对成本没有影响。您需要为您在一段时间内使用的计算单元数量付费。

其次，您要执行的操作称为自动缩放。您要做的是设置一个启动配置，指定您将使用的 AMI（以及您正在使用的任何用户数据配置、您将使用的 ELB 和可用性区域、最小和最大实例数等）。您使用该启动配置设置扩展组。然后设置扩展策略以确定将附加到组的扩展操作。然后将云监视警报附加到每个策略以触发扩展操作。

您没有保留服务器连接到 ELB 或类似的东西。一切都基于创建单个 AMI，该 AMI 用作您需要的服务器的模板。

您应该在下面的链接中阅读有关自动缩放的信息：

[http://aws.amazon.com/autoscaling/](http://aws.amazon.com/autoscaling/)

# xml - Xpath CDATA 等于

> ID：11993617
> 
> 赞同：0
> 
> 时间：2012-08-16T18:53:35.377
> 
> 标签：xml, xpath

我有以下 XML 架构

```
<xml>
    <series>
      <title lang="en">XQuery Kick Start</title>
      <author>James McGovern</author>
      <year>2003</year>
      <a>
          <b>
            <c><![CDATA[ Foo ]]></c>
          </b>
      </a>
    </series>

    <series>
      <title lang="en">XQuery Kick Start</title>
      <author>James McGovern</author>
      <year>2003</year>
      <a>
          <b>
            <c><![CDATA[ Bar ]]></c>
          </b>
      </a>
    </series>
</xml> 
```

我正在尝试获取值为**foo**`series`的值。如果没有包含在 CDATA 中，我可以使用以下 xpath 找到它，但由于 CDATA 不起作用 - 我如何找到值为foo**的**？`c`**`c``/xml/series/a/b[c="Foo"]/../..``series``c`**

 ****谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:45:10.263

CDATA 部分不会出现在由 XPath 操作的数据模型中。你是对的，你的 XPath 没有找到你想要的节点，但不是 CDATA 部分让事情出错。谓词`[c="Foo"]`正在寻找`c`字符串值为“ `Foo`”的元素，但此处没有这样的节点：您的`c`元素的字符串值为“ `Foo`”和“ `Bar`”（即，“Foo”和“Bar”的前后各有一个空格处）。

尝试`/xml/series/a/b[contains(c,"Foo")]/../..`或`/xml/series/a/b[normalize-space(c) = "Foo"]/../..`，我认为你会得到你所期望的。****

# android - 如何将用户输入的动态文本添加到android中的画布？

> ID：11993623
> 
> 赞同：1
> 
> 时间：2012-08-16T18:54:00.487
> 
> 标签：android, android-layout, android-canvas, android-edittext, android-styles

我正在制作一个应用程序，用户在其中输入一些文本，并且该文本必须显示在图像上的矩形上（就像图像上的便签条，它可以在图像上拖动并调整大小）。我对android很陌生，我真的找不到通过书籍和谷歌在android中这样做的方法。我一直在使用 html 设计应用程序，在 html 中，我们可以根据需要设置文本框的样式并将其添加到页面的任何位置。但在这里我无法配置编辑文本来做同样的事情。但我无法使编辑文本像笔记棒一样，并使其可动态拖动和重新调整大小。我还尝试使用 canvas.drawrect() 仅绘制一个矩形......但是如何动态地向其中添加文本是我无法弄清楚的。我不是要完整的代码.. 但是请大家给我一个正确的方向，这样我就可以尝试并尝试找出方法。现在我被严重卡住了。下图显示了笔记棒的外观......

![在此处输入图像描述](../Images/4cc50bb161d377533ac71889ddd01822.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:19:55.920

如果您不需要将它实际绘制在画布本身上，则使用 E​​ditText 小部件并将它和您的图像都放在 RelativeLayout 中可能是可行的方法。您可以设置 EditText 的最大高度和宽度，或者让它包裹高度以使其随文本扩展，等等。只需确保 EditText 小部件在图像之后添加到 RelativeLayout，因此它位于顶部。

# php - php - 来自数组的导航/子导航结构

> ID：11993628
> 
> 赞同：2
> 
> 时间：2012-08-16T18:54:20.680
> 
> 标签：php, arrays, navigation

我正在尝试创建一个类似于脚本的“插件”，用于添加到“菜单数组”......我会直接进去......

假设我像这样启动一个导航项目：

```
$sections->add_section('dashboard');
$DashBoardSection = $sections->load_section('dashboard');
$DashBoardSection->set_role(NULL);
$DashBoardSection->set_nav_item(array(
    'identifier' => 'dashboard',
    'text' => 'Dashboard',
    'url' => NULL,
    'position' => NULL
)); 
```

首先创建一个新部分并获取其实例。

然后，我们将设置一个“角色”，我们将在其中进行测试，以查看用户是否经过身份验证，可以查看。

set nav 项只是存储数组。标识符是对项目的引用（它用于我们想要添加子项目时），除了“位置”之外的所有标准，它说明它在导航中的位置，即 NULL 是顶级，array('topnav','subnav ') 将是 topnav->subnav->dashboard。

作为测试，这可以存储如下：

```
Array
(
    [0] => Array
        (
            [identifier] => dashboard
            [text] => Dashboard
            [url] => 
            [position] => 
        )
[1] => Array
    (
        [identifier] => dashboard2
        [text] => Dashboard2
        [url] => 
        [position] => Array
            (
                [0] => dashboard
            )

    )

) 
```

我的问题是我如何把它变成以下结构：

```
Array
(
    [0] => Array
    (
        [identifier] => dashboard
        [text] => Dashboard
        [url] => 
        [position] => 
        [children] => Array
            (
                [0] => Array
                    (
                        [identifier] => dashboard2
                        [text] => Dashboard2
                        [url] => 
                    )
            )
    )
) 
```

把我的头发拉到这个上面，非常感谢任何帮助。

问候

我目前有

```
public function build_navigation( $role ){
    $role = (int)$role;
    $nav  = array();
    foreach( $this->sections as $section ) {
        if( $section->get_role() === NULL || $section->get_role() === $role ) {
            $nav_array = $section->get_nav();
            foreach( $nav_array as $key => $nav_item ) {
                if( $nav_item['position'] === NULL ) {
                    $nav[$nav_item['identifier']] = $nav_item;
                }elseif( is_array( $nav_item['position'] ) ){
                    #...#
                }
            }
        }
    }
    return $nav;
} 
```

**编辑**

想象一下这是给定的数组（它可以是任何顺序）

```
Array
(
    [0] => Array
        (
            [identifier] => dashboard_child2
            [text] => Dashboard Child 2
            [url] => 
            [position] => Array
                (
                    [0] => dashboard
                )

        )

    [1] => Array
        (
            [identifier] => dashboard_child_child_1
            [text] => Dashboard Child Child 1
            [url] => 
            [position] => Array
                (
                    [0] => dashboard
                    [1] => dashboard_child1
                )

        )

[2] => Array
    (
        [identifier] => dashboard_child1
        [text] => Dashboard Child 1
        [url] => 
        [position] => Array
            (
                [0] => dashboard
            )

    )

[3] => Array
    (
        [identifier] => dashboard
        [text] => Dashboard
        [url] => 
        [position] => 
    )

[4] => Array
    (
        [identifier] => dashboard2
        [text] => Dashboard2
        [url] => 
        [position] => Array
            (
                [0] => dashboard
            )

    )

) 
```

需要格式化为：

```
Array
(
    [dashboard] => Array
        (
            [text] => Dashboard
            [url] => 
            [children] => Array
                (
                    [dashboard_child2] => Array
                        (
                            [text] => Dashboard Child 2
                            [url] => 
                        )
                    [dashboard_child1] => Array
                        (
                            [text] => Dashboard Child 1
                            [url] => 
                            [children] => Array
                                (
                                    [dashboard_child_child_1] => Array
                                        (
                                            [text] => Dashboard Child Child 1
                                            [url] => 
                                        )
                                )
                        )
                    [dashboard2] => Array
                        (
                            [text] => Dashboard2
                            [url] =>
                        )
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:03:31.540

您需要一个将标识符映射到它的子数组的临时数组，以便您可以将其添加到那里。

如果我没看错，那么当您添加父级时，您已经有类似的东西了：

```
$nav[$nav_item['identifier']] = $nav_item; 
```

* * *

> *编辑：*添加父母需要一些谨慎，如评论中指出的那样：

```
$node = &$nav[$nav_item['identifier']];
$children = isset($node['children']) ? $node['children'] : array();
$node = $nav_item;
$node['children'] = $children;
unset($node); 
```

* * *

只需添加到孩子然后：

```
foreach($nav_item['position'] as $identifier)
{
    $nav[$identifier]['children'][] = $nav_item;
} 
```

您也可以使用对象，而不是数组，这样您就不会复制太多数据（或者您可以稍后更改它），但是，只是想，这不一定是解决您的问题所必需的，因此可能需要稍后再做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:03:54.357

这是我对这个问题的看法，通过递归解决。

您可以使用多个位置（我想这就是它是一个数组的原因），如果找到至少一个位置，它将忽略丢失的位置，但如果每个位置都丢失，它会抱怨。

```
function translate($in) {

    $out = array();

    // first pass, move root nodes to output
    foreach ($in as $k => $row) {
        if (!$row['position']) {
            $out[$row['identifier']] = $row;
            unset($in[$k]);
        }
    }

    // while we have input
    do {
        $elements_placed = 0;
        // step trough input
        foreach ($in as $row_index => $row) {
            foreach ($row['position'] as $pos) {
                // build context for the node placing
                $data = array(
                    'row' => $row,
                    'in'  => &$in,
                    'row_index' => $row_index,
                    'elements_placed' => &$elements_placed,
                    'pos' => $pos,
                );
                // kick of recursion
                walker($out, $data);
            }
        }
    } while ($elements_placed != 0);
    if (count($in)) {
        trigger_error("Error in user data, can't place every item");
    }
    return $out;
}

function walker(&$out, $data) {
    foreach ($out as &$row) {
        // it looks like a node array
        if (is_array($row) && isset($row['identifier'])) {
            // if it has children recurse in there too
            if (isset($row['children'])) {
                walker($row['children'], $data);
            }

            // it looks like a node array that we are looking for place the row
            if ($row['identifier'] == $data['pos']) {
                if (!isset($row['children'])) {
                    $row['children'] = array($data['row']['identifier'] => $data['row']);
                } else {
                    $row['children'][$data['row']['identifier']] = $data['row'];
                }
                // report back to the solver that we found a place
                ++$data['elements_placed'];
                // remove the row from the $in array
                unset($data['in'][$data['row_index']]);
            }
        }
    }
}

$in = array (
    array (
        'identifier' => 'secondlevelchild2',
        'text' => 'secondlevelchild2',
        'url' => '',
        'position' => array (
            'dashboard2',
        ),
    ),
    array (
        'identifier' => 'secondlevelchild',
        'text' => 'secondlevelchild',
        'url' => '',
        'position' => array (
            'dashboard2',
        ),
    ),
    array (
        'identifier' => 'dashboard',
        'text' => 'Dashboard',
        'url' => '',
        'position' => '',
    ),
    array (
        'identifier' => 'dashboard2',
        'text' => 'Dashboard2',
        'url' => '',
        'position' => array (
            'dashboard', 'home',
        ),
    ),
    array (
        'identifier' => 'thirdlevelchild',
        'text' => 'thirdlevelchild',
        'url' => '',
        'position' => array (
            'secondlevelchild2',
        ),
    ),
);

$out = translate($in);
var_export($out); 
```

在它的当前形式中，一旦放置它们，它就不会从节点数组中删除`identifier`或键。`position`

# ios - ios - iPad 模拟器的高度似乎太高了

> ID：11993630
> 
> 赞同：0
> 
> 时间：2012-08-16T18:54:25.827
> 
> 标签：ios, ios5, storyboard

我听从了这个问题的建议： [Converting Storyboard from iPhone to iPad](https://stackoverflow.com/questions/8465769/convert-storyboard-from-iphone-to-ipad)

它起作用了，但我的 iPad 屏幕似乎太高了……可能高了 150%。用户必须向下滚动才能看到 UITabBar。

有人会碰巧知道为什么会发生这种情况以及如何解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:03:09.707

听起来模拟器对于您的显示器来说太大了。尝试转到“窗口”菜单并将比例更改为更小的值。您也可以尝试将设备设置为非视网膜 iPad。

[![窗口菜单](../Images/4addd729e3e46f7ab7b486118109ec6c.png)](https://i.stack.imgur.com/v8xrm.png)

# php - 模拟没有 PHP 的 PHP 包含

> ID：11993631
> 
> 赞同：6
> 
> 时间：2012-08-16T18:54:29.027
> 
> 标签：php, javascript, html, url, include

我想在多个页面上包含相同的导航菜单，但是我没有 PHP 支持，也不能以任何其他方式影响我的服务器。

我想避免简单地将 html 复制并粘贴到所有页面上，因为这会使更新菜单变得很痛苦。

我能想到的两个选项如下：

1）让所有内容都存在于一个页面上，然后根据附加到 url 的关键字确定要显示的内容：

```
example.com/index?home
example.com/index?news 
```

2）包含一个javascript文件，该文件具有写出菜单并在每个页面上调用该函数的功能

```
function setupMenu() {
    $("#nav").html("<ul class='nav'><li>home</li><li>news</li></ul>");
} 
```

使用选项 1，更新过程将包括在一页上编辑一个导航菜单

使用选项 2，更新将意味着更改 javascript 文件中的函数

我对选项 1 的担忧是该页面必须加载许多不需要显示的内容。我对选项 2 的关注可能看起来微不足道，但代码可能会变得混乱。

有什么理由这样做会比另一种更好吗？还是我缺少第三个更好的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T19:10:02.340

你有几个选择，每个都有自己的优点和缺点：

*   服务器端包含，或 SSI。如果您没有 PHP，那么您很可能也没有 SSI，并且此选项需要对您的 .htaccess 文件进行一些令人讨厌的处理。查看 Dominic P. 的答案以获取 SSI 的文章。SSI 优于 JavaScript 或 Frames 的好处是它不需要用户启用 JS（很多用户没有启用），而且它也不存在任何导航困难。

*   帧。您可以使用[标准框架](http://www.w3.org/TR/html4/present/frames.html)将导航放在其自己的单独文件中，并且使用正确的样式将是无缝的。您还可以使用[iframe](http://www.w3schools.com/tags/tag_iframe.asp)将导航放置在网站的任意部分，例如侧边栏或其他任何地方。框架，特别是标准框架的缺点是它们往往会使书签、链接和前进/后退按钮的行为变得奇怪。从好的方面来说，框架不需要浏览器合规性或服务器支持。

*   JavaScript。您可以参考任何其他答案以获得对 JS 解决方案的出色解释，尤其是在您使用 jQuery 时。但是，如果您的网站在其他方面不够动态，以至于您的用户希望启用 JavaScript，这将意味着您的大量观众根本看不到菜单 - 很糟糕，肯定的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T18:57:02.910

是的，使用 .load jQuery ajax 函数

```
$('#result').load('ajax/menu.html'); 
```

* * *

这样你的代码就会保持干净，你可以像 PHP 一样在单独的 HTML 文件中编辑包含。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T19:00:06.537

您应该为此任务考虑 AJAX。包括第三方库，如 jQuery，并在占位符中加载单独的 HTML 文件，按 ID 定位它们。

例如，在您的主 HTML 页面中：

```
<div id="mymenu"></div> 
```

此外，在您的主 HTML 中，但在 HEAD 部分中：

```
$('#mymenu').load('navigation.html'); 
```

但最好的选择是切换到支持 PHP 或任何其他服务器端包含的主机。这会让你的生活轻松很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T18:57:12.350

查看[服务器端包含](http://en.wikipedia.org/wiki/Server_Side_Includes)。我对它们没有太多经验，但据我回忆，它们旨在解决您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-13T17:12:37.890

您可以使用 HTML 导入[http://w3c.github.io/webcomponents/spec/imports/](http://w3c.github.io/webcomponents/spec/imports/)

[这是来自http://www.html5rocks.com/en/tutorials/webcomponents/imports/](http://www.html5rocks.com/en/tutorials/webcomponents/imports/)的示例

`warnings.html`包含

```
 <div class="warning">
    <style scoped>
      h3 {
        color: red;
      }
    </style>
    <h3>Warning!</h3>
    <p>This page is under construction</p>
  </div>

  <div class="outdated">
    <h3>Heads up!</h3>
    <p>This content may be out of date</p>
  </div> 
```

然后`index.html`可以包含

```
<head>
  <link rel="import" href="warnings.html">
</head>
<body>
  ...
  <script>
    var link = document.querySelector('link[rel="import"]');
    var content = link.import;

    // Grab DOM from warning.html's document.
    var el = content.querySelector('.warning');

    document.body.appendChild(el.cloneNode(true));
  </script>
</body> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T18:56:53.567

服务器端包括：[http ://www.freewebmasterhelp.com/tutorials/ssi/](http://www.freewebmasterhelp.com/tutorials/ssi/)

# php - 如何在表单提交时停止页面刷新

> ID：11993644
> 
> 赞同：2
> 
> 时间：2012-08-16T18:55:22.420
> 
> 标签：php, javascript, jquery, html

我有一个在提交时自动刷新页面的表单，我尝试添加：

`onSubmit="return false;"`到表单元素，但是当您单击提交时，表单只是停止并且没有任何反应。

我不介意页面刷新太多，但表单位于页面底部，刷新将您带回顶部。所以我尝试了这种方法：

`<form name='test' method='POST' action="index.php" onSubmit="window.scrollTo(5000,500);">`

这适用于一瞬间，但其他东西会覆盖它（不确定是什么）

我也尝试过使用 php:`header.location`只是为了获得“标头已发送”错误。

有问题的网站可以在[这里](http://www.kg-stores.com/kineticgroup_website_redesign_working/)看到，表格在最底部。

我使用的唯一两个可以预见任何冲突的 jquery 库是 nicescroll 和（更可能的）航点，但我对它们都进行了挖掘，但找不到任何冲突的问题。

如果有人知道保持表单功能但停止刷新页面的方法，那就太好了谢谢

编辑：阅读下面的答案后，看起来我将不得不使用 ajax 来完成这个，我完全没有使用 ajax 的经验，所以我会看看是怎么回事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T18:57:22.877

在这种情况下，您似乎需要通过***AJAX***提交方式。在这种情况下，您可以使用 jQuery***[`$.ajax()`](http://api.jquery.com/ajax)***方法来执行此操作。下面的示例：

***HTML***

```
<form name='test' method='POST' action="index.php"> 
```

***jQuery***

```
$('form[name=test]').submit(function(e) {
   e.preventDefault();
   window.scrollTo(5000,500);

   // a sample AJAX request
   $.ajax({
     url : this.action,
     type : this.method,
     data : $(this).serialize(),
     success : function(response) {

     }
   });
}); 
```

在这里，***[`.preventDefault()`](http://api.jquery.com/event.preventDefault)***用于在表单提交时停止页面刷新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:59:09.510

为什么不将表单提交到隐藏的 IFRAME？

```
<iframe name="myiframe" style="display: none;"></iframe>
<form name='test' method='POST' action="index.php" target="myiframe">
  ...
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:58:36.050

使用 AJAX 而不是普通的表单提交怎么样？

# java - 中断 BitmapFactory.decodeStream

> ID：11993645
> 
> 赞同：1
> 
> 时间：2012-08-16T18:55:33.217
> 
> 标签：java, android, multithreading, inputstream, bitmapfactory

假设我们有一个工作线程，它`BitmapFactory.decodeStream`使用一些连接流进行调用，如下所示：

```
Bitmap bitmap = BitmapFactory.decodeStream(new URL(imgUrl).openConnection().getInputStream(), null, someUnrelatedOptions); 
```

现在我们需要立即终止该线程以回收`BitmapFactory`已分配的任何内存。我们不能等待它完成太久，因为 UI 线程需要内存。这个例子被简化了，所以让我们不要详细说明为什么必须这样做。我正在寻找这种方法的解决方案，而不是另一种方法。

我们不能残忍地杀死线程，因为它也在做一些其他的事情，我们有可能会泄露一些东西。唯一干净的方法是使用`workerThread.interrupt()`.

不幸的是，BitmapFactory 并不关心线程是否被中断并继续工作。显然，我正在检查`Thread.currentThread().isInterrupted()`它存在之后的权利，但这还不够。在非常慢的互联网连接上，加载图像可能需要数年时间，这将冻结应用程序（请记住，UI 线程正在等待）。

所以问题是 - 当线程被中断时我如何`BitmapFactory`停止？我的想法是包装`InputStream`in custom `FilterInputStream`，覆盖每个函数（实际上并不多），并在每个函数中检查线程是否被中断。如果是，扔一些`IOException`. `BitmapFactory`一旦尝试从中提取一些数据，这种方式就会停止`InputStream`，这应该足够了。有没有更好的方法？如果不是，我应该`close()`在投掷之前调用流`IOException`吗？

还有一点注意：正在等待额外内存的 UI 线程正在显示 nice `ProgressBar`，因此如果工作线程需要一两秒钟才能终止，这不是问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-19T05:04:01.453

在对非常大的 jpeg 资产进行本机处理期间关闭 Bitmap.decodeStream 的输入流时，我在 ART 上遇到了 sigsegv 错误。这个功能是必不可少的，因为它使用了非常强大（和易变）的原生解码器。

我通过首先将输入流包装在 BufferedInputStream 中，然后将其传递给 decodeStream 来解决它。

要可靠地中断 decodeStream，请关闭 BufferedInputstream (bis)：

```
bis.mark(0); //Otto von?
bis.reset();
bis.close(); 
```

这将立即残酷地停止本机解码器，从 decodeStream 生成一个堆栈跟踪，您可以捕获它（不会崩溃）。

根本问题在于本机解码器，在过早关闭操作之前重置流似乎可以解决与内存相关的崩溃。

应该有一种明显的方法来可靠地中断解码器，这需要太多疯狂的实验才能解决。希望它会在本机层得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:01:03.253

我认为您可以在UI线程中调用 someUnrelatedOptions->requestCancelDecode() 来取消解码，尽管不能保证取消解码。

Google 关键字“bitmapfactory requestCancelDecode decodeStream url openconnection”（不带引号）您可以找到示例代码，例如在[Android Gallery3D app](http://www.java2s.com/Open-Source/Android/android-platform-apps/Gallery3D/com/cooliris/media/UriTexture.java.htm)中。

问候

陈子腾

# fibonacci - 应用非过程和非对象错误

> ID：11993648
> 
> 赞同：0
> 
> 时间：2012-08-16T18:55:56.423
> 
> 标签：fibonacci, oz

```
declare
fun {Factorial N}
   local FactorialAux in
      fun {FactorialAux N Product}
     if N == 0 then Product
     else {FactorialAux N-1 {fibo N}|Product}
     end
      end
      {FactorialAux N nil}
   end
end

fun {fibo N}
   if N==1 then 1
   else if N==2 then 1
    else {fibo N-1}+{fibo N-2}
    end
   end
end

{Browse {Factorial 3}} 
```

我的代码打印斐波那契数列表。如果 N = 4，则它打印前四个斐波那契数列表这是我的代码，其中我收到问题标题中所述的错误。感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:58:57.550

变量必须以 Oz 中的大写字母开头。过程和函数名称始终是变量，因此它们也必须以大写字母开头。

你的函数`fibo`应该被调用`Fibo`。当然，所有的调用也`fibo`必须修复。

# jquery - 列表视图中的 jQuery 脚本图像

> ID：11993656
> 
> 赞同：0
> 
> 时间：2012-08-16T18:56:25.830
> 
> 标签：jquery, ajax, list, class, mobile

这段代码有什么问题：

```
$.each(items, function(i, item) {
                $('<li />').append(
                    $('<a />').attr('data-index', i).attr('href', '#').append(
                        $('<img />').text('src=',item.imageurl), // THIS LINE
                        $('<h3 />').text(item.title).addClass('ui-li-heading'),
                        $('<p />').text(item.subtitle).addClass('ui-li-desc')
                    )
                ).appendTo($listElem).trigger('create');
            }); 
```

我看不到任何图像片段。标题和描述工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:58:21.270

```
$('<img />').text('src=',item.imageurl), // THIS LINE 
```

应该

```
$('<img />').attr('src',item.imageurl), // THIS LINE 
```

# java - 接口参数类型中的交互

> ID：11993657
> 
> 赞同：1
> 
> 时间：2012-08-16T18:56:34.910
> 
> 标签：java

我试图将请求的基本实现作为接口函数的参数类型。

然后让各种类扩展基本请求类以赋予请求对象更具体的含义。

但是 Java 需要确切的类作为参数，并且不尊重由该基类扩展的类。

```
public interface MyInterface{
   public String getValue(BaseRequest req);
}

public class MyInterfaceImpl implements MyInterface{
   public String getValue(SpecificRequest req){ //Java will give a compile error here.
      //Impl
   }
}

public interface BaseRequest{
   int requiredA;
   int requiredB;
   //setter and getters for A and B
}

public class SpecificRequest extends BaseRequest{
   int specificValC;
   //setter and getters for C
} 
```

实现这种模式的最佳方法是什么？还是我设计的有点太多了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T19:01:05.627

您可以使用泛型实现类似的目标。

```
public interface MyInterface<R extends BaseRequest> {
   public String getValue(R req);
}

public class MyInterfaceImpl implements MyInterface<SpecificRequest> {
   public String getValue(SpecificRequest req){ 
      //Impl
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:09:58.680

当您实现一个接口时，编译器会确保您的实现与声明相符，即您不能将参数类型缩小到派生类。

但是，您可以传入派生类：

```
 public class MyInterfaceImpl implements MyInterface {
       public String getValue(BaseRequest req){ 
           // ...
       }
   }

   ... 
   // calling your method
   MyInterface provider = ...
   SpecificRequest request = ...
   provider.getValue(request); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:59:31.460

好吧，如果您将接口声明为接受`BaseRequest`java 的接口，不会让您将其范围缩小到 some `SpecificRequest`，这些是 OOP 的基础。如果你真的需要这个接口，你应该向我们展示你将要创建的接口的其他实现示例。我的意思是很难看出你的设计的意义在于你是否做得太多。

# .net - Elmah 和 Web 部署 - 每次部署后都会清除错误日志

> ID：11993661
> 
> 赞同：2
> 
> 时间：2012-08-16T18:56:46.240
> 
> 标签：.net, asp.net-mvc-3, elmah

每次我从 Visual Studio 发布我的 MVC 3 项目时，Elmah 的日志文件都会被覆盖。有没有办法防止这种情况发生？我已经尝试将我的 app_data 文件夹排除在发布之外，但它没有任何效果。

# sql-server - 在动态 SQL 中将 CONVERT 与数据表列一起使用

> ID：11993666
> 
> 赞同：1
> 
> 时间：2012-08-16T18:56:57.483
> 
> 标签：sql-server, dynamic-sql

我有以下动态查询来检查今天的日期是否在数据表`FTOStartDate`之间。`FTOEndDDate`

我收到以下错误：

> *消息 207，级别 16，状态 1，第 18 行
> 无效的列名称“FTOStartDate”。
> 消息 207，级别 16，状态 1，第 19 行
> 无效的列名称“FTOEndDate”。*

我查看的所有示例都在转换函数中使用了一个变量；我需要使用数据表中的列名。

谢谢，布拉德

```
SET @env = dbo.GetSQLEnvironment();
SET @assigned_claim_table = 'grp_clm_ops_d' + @env + '.dbo.cauDCMFToAssign';

SET @sql = 'SELECT DCMNumber,  FTOStartDate ' + 
           'FROM ' + @assigned_claim_table + ' ' +
           'WHERE '  + CONVERT(VARCHAR(10), GETDATE(), 110) + 
           ' NOT BETWEEN ' + CONVERT(VARCHAR(10), FTOStartDate, 110) + 
           'AND ' +  CONVERT(VARCHAR(10), FTOEndDate, 110) + ' '

EXEC sp_executesql @sql; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:04:02.617

为什么不这样做：

```
SET @sql = 'SELECT DCMNumber,  FTOStartDate ' + 
           'FROM ' + @assigned_claim_table + ' ' +
           'WHERE CONVERT(VARCHAR(10), GETDATE(), 110) NOT BETWEEN ' + 
           ' CONVERT(VARCHAR(10), FTOStartDate, 110) AND CONVERT(VARCHAR(10), FTOEndDate, 110)' 
```

SQL Server 在动态查询中运行转换没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:03:58.177

如果没有基础定义，@assigned_claim_table 中命名的表似乎不包含 FTOStartDate 和 FTOEndDate 列。

也就是说，即使表格有，查询也会产生错误的结果，因为 110 是美国格式的 M/D/Y，因此比较无法正常工作；ISO 112 是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:20:32.713

我意识到您已经解决了眼前的问题，但我只想补充一点，如果表中的列是任何日期/时间类型，那么所有这些转换都是绝对不必要的。你可以很容易地做到：

```
SET @sql = 'SELECT DCMNumber,  FTOStartDate FROM ' 
  + @assigned_claim_table 
  + ' WHERE GETDATE() NOT BETWEEN FTOStartDate AND FTOEndDate;'; 
```

如果它们不是日期/时间，则：

```
SET @sql = 'SELECT DCMNumber,  FTOStartDate FROM ' 
  + @assigned_claim_table 
  + ' WHERE GETDATE() NOT BETWEEN CONVERT(DATETIME, FTOStartDate)
      AND CONVERT(DATETIME, FTOEndDate);'; 
```

如果您试图从列中剥离时间，这样做比将字符串转换为不明确的格式更安全：

```
SET @sql = 'SELECT DCMNumber,  FTOStartDate FROM ' 
  + @assigned_claim_table 
  + ' WHERE GETDATE() NOT BETWEEN DATEDIFF(DAY, 0, FTOStartDate)
      AND DATEDIFF(DAY, 0, FTOEndDate);'; 
```

不是那样，`BETWEEN`也不`NOT BETWEEN`是一个好主意——就像你的 110 格式一样，这是模棱两可的，容易被误解。

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

# jaxb - 可重用的 complexType，以及 xml-registry、xml-element-decl 的用法

> ID：11993667
> 
> 赞同：1
> 
> 时间：2012-08-16T18:57:01.123
> 
> 标签：jaxb, jaxb2, moxy

我有以下**TimePeriodType**

```
<xs:simpleType name="UnitOfTimePeriodType">
    <xs:restriction base="xs:token">
        <xs:enumeration value="Months"/>
        <xs:enumeration value="Days"/>
        <xs:enumeration value="Years"/>
    </xs:restriction>
</xs:simpleType>
<xs:complexType name="TimePeriodType">
    <xs:sequence>
        <xs:element name="Length" type="digit1-3"/>
    </xs:sequence>
    <xs:attribute name="unitOfLength" type="UnitOfTimePeriodType" use="optional" default="Months"/>
</xs:complexType> 
```

它被用于多种类型，如下所示

```
<xs:complexType name="USAddressType">
    <xs:complexContent>
        <xs:extension base="AddressType">
            <xs:sequence>                   
                <xs:element name="LengthAtAddress" type="TimePeriodType" minOccurs="0"/>
            </xs:sequence>
        </xs:extension>
    </xs:complexContent>
</xs:complexType>

<xs:complexType name="CanadaAddressType">
    <xs:complexContent>
        <xs:extension base="AddressType">
            <xs:sequence>
                <xs:element name="LengthAtAddress" type="TimePeriodType" minOccurs="0"/>
            </xs:sequence>
        </xs:extension>
    </xs:complexContent>
</xs:complexType> 
```

所以，下面的实例 xml

```
<LengthAtAddress unitOfLength="Months">
    <Length>36</Length>
</LengthAtAddress> 
```

应该映射到以下pojo

```
public abstract class AbstractAddress
{
    protected int lengthAtAddress;
    protected UnitOfLengthType unitOfLengthAtAddress;

    public int getLengthAtAddress()
    {
        return lengthAtAddress;
    }

    public UnitOfLengthType getUnitOfLengthAtAddress()
    {
        return unitOfLengthAtAddress;
    }

    //setters
} 
```

我想我应该在使用**外部映射时使用****xml-registry**和**xml-element-decl**的组合。无法弄清楚我们的方式。任何帮助表示赞赏。

 ****使固定**

```
<xml-element java-attribute="lengthAtAddress" xml-path="LengthAtAddress/Length/text()"/>
    <xml-element java-attribute="unitOfLengthAtAddress" xml-path="LengthAtAddress/@unitOfLength">
    <xml-java-type-adapter value="com.equifax.ic.platform.sts.domain.transformation.response.CommonsEnumAdapter"/>
</xml-element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:12:48.247

您可以使用 MOXy 的`@XmlPath`扩展或 MOXy 的外部映射文档中的等效项。

```
@XmlPath("LengthAtAddress/Length/text()")
public int getLengthAtAddress()
{
    return lengthAtAddress;
} 
```**

# python - python salesforce beatbox：beatbox._beatbox.SoapFaultError：'INVALID_FIELD'

> ID：11993670
> 
> 赞同：1
> 
> 时间：2012-08-16T18:57:04.783
> 
> 标签：python, salesforce, beatbox

我正在使用[beatbox](http://www.pocketsoap.com/beatbox/)从 Python 连接到 Salesforce，它工作正常，直到我尝试添加日期约束。

当我添加 CreatedDate 约束时，它失败了

```
File "/Library/Python/2.7/site-packages/beatbox/_beatbox.py", line 332, in post
    raise SoapFaultError(faultCode, faultString)
beatbox._beatbox.SoapFaultError: 'INVALID_FIELD' "INVALID_FIELD: from Assets__c where CreatedDate > 2012-08-08 ^ ERROR at Row:1:Column:1061 value of filter criterion for field 'CreatedDate' must be of type dateTime and should not be enclosed in quotes" 
```

*   如何发送一个 datetype 对象来查询和解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:26:42.163

刚刚意识到，它需要 SFDC 方式的日期格式 -`2012-08-15T00:00:00+00:00`

参考 - [http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_select_dateformats.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_select_dateformats.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:15:34.530

这将为您提供一个日期时间对象：

```
import datetime

def return_datetime(year, month, day):
    return datetime.datetime(year, month, day)

date = return_datetime(2012, 8, 12) 
```

# python - 在 Python 中测试电子邮件实现

> ID：11993671
> 
> 赞同：2
> 
> 时间：2012-08-16T18:57:05.627
> 
> 标签：python, unit-testing, email

假设电子邮件实现与本文中接受的答案一样简单[，](https://stackoverflow.com/questions/348392/receive-and-send-emails-in-python)那么为实现编写单元测试的最佳方法是什么？（作为测试实施的一部分，我不想向有效的收件人发送电子邮件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:26:09.790

首先，您可以粗略地将[单元测试](http://en.wikipedia.org/wiki/Unit_testing)称为您所描述的内容。单元测试通常是指测试尽可能小的代码片段（没有任何网络活动和 I/O 支持）。

[因此，您可以编写一个单元测试来使用模拟](http://en.wikipedia.org/wiki/Mock_object)和[存根](http://en.wikipedia.org/wiki/Method_stub)测试消息发送单元，而无需通过网络发送实际消息。使用 mock 模拟不同方式的消息发送结果：

*   消息发送正确
*   发送消息时收到超时
*   延迟发送的消息

您谈论的案例通常称为[集成测试](http://en.wikipedia.org/wiki/Integration_testing)，当您测试应用程序不同部分之间的交互时，在您的案例中：*邮件服务器*和*消息发送者*。

因此，要测试您可以执行以下操作：

1.  启动您的消息发送功能。
2.  使用[poplib](http://docs.python.org/library/poplib.html)或[imaplib](http://docs.python.org/library/imaplib.html)模块检查邮件是否到达您的邮箱。

以下是 poplib 工作原理的示例：

```
import getpass, poplib

M = poplib.POP3('localhost')

M.user(getpass.getuser())       # Assuming that mailbox has your OS user/pass
M.pass_(getpass.getpass())

numMessages = len(M.list()[1])

for i in range(numMessages):
    for j in M.retr(i+1)[1]:
        print j 
```

这是一个如何使用[poplib](http://docs.python.org/library/poplib.html)检索消息的示例（无耻地取自 poplib 的官方文档）。同样，您可以使用[imaplib](http://docs.python.org/library/imaplib.html)。这取决于您的邮件服务器支持哪些技术。

> **笔记！**您必须记住，编写测试并不总是那么简单。您的代码必须适合单元测试，例如，当您想测试邮件发送时，您的发送函数/类必须使用消息发送对象（在我们的例子中为 SMTP）调用/初始化，在测试期间可以模拟（用模拟对象替换） .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T19:19:01.163

首先，**使负责发送/接收的部分可插拔**。只需确保您可以切换负责将消息连接/发送/接收到/从服务器的类/函数/对象。

其次，**使这部分成为真实的东西**。确保这个类/函数/对象将尽可能接近原始类/函数/对象的行为（采用相同的参数，抛出相同的错误）。

第三，**在测试中伪造这部分的不同行为**。此类在不同测试中的不同行为可能包括：

*   正确发送，
*   延迟发送，
*   连接超时，
*   接收成功，

并且，根据您的模块的实际用途（以及它的灵活性，例如，如果它可以被其他人用于编码），您还可以包括以下行为：

*   传递错误参数时出错，
*   在这里发现了广泛的其他例外：http: [//docs.python.org/library/smtplib.html](http://docs.python.org/library/smtplib.html)

这**在很大程度上取决于您的模块的功能**。您需要测试它是否正确执行这些操作。不要测试`smtplib`模块，因为它已经被测试覆盖了。不要测试与你的模块无关的东西——只测试它所做的事情。您的模块的某些部分可能是不可测试的——在这种情况下，您有两个选择：将它们更改为可测试，或者保持原样（由于各种原因，它有时是最合理的选择）。

# clojure - Clojure 中控制流的时间——ScheduledThreadPoolExecutor 的陷阱？

> ID：11993675
> 
> 赞同：3
> 
> 时间：2012-08-16T18:57:15.813
> 
> 标签：clojure, scheduled-tasks, clojure-java-interop

我正在学习 Clojure 中的并发性。

[我在http://dev.clojure.org/display/design/Scheduled+Events](http://dev.clojure.org/display/design/Scheduled+Events)遇到了一个索赔（Stuart Serra？），声明：

> *   Clojure 函数不能在没有阻塞或 Java 互操作的情况下将时间用于控制流
> *   Java 互操作 (ScheduledThreadPoolExecutor) 不知道线程本地绑定

我不理解这些说法，请澄清一下，也许是一个例子。具体来说：

*   ScheduledThreadPoolExecutor 有什么问题？由于我正在启动一个新的（绿色）线程，因此我不希望每个线程的绑定能够继续。
*   我可以安排一个普通的 Clojure 函数，那么是什么阻止我将所需的绑定作为词法封闭的上下文发送？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:01:33.030

好的，我想我明白了。

假设你试试这个：

```
(def pool (atom nil))

(defn- thread-pool []
    (or @pool
        (reset! pool (ScheduledThreadPoolExecutor. 1))))

(def ^:dynamic *t* 0)

(binding [*t* 1]
    (future (println "first example:" *t*)))

(binding [*t* 1]
    (.schedule (thread-pool) (fn [] (println "second example:" *t*)) 0 
               TimeUnit/SECONDS))

(binding [*t* 1]
    (.schedule (thread-pool) (bound-fn [] (println "third example:" *t*)) 0
               TimeUnit/SECONDS)) 
```

输出将是：

```
first example: 1
second example: 0
third example: 1 
```

在第一种情况下，future 宏用私有函数 binding-conveyor-fn 包装主体，它将调用线程的绑定框架保留在词法范围内，并在调用包装函数之前恢复它。

在第三种情况下，bound-fn 将调用线程的绑定推送到框架上，执行函数体，然后弹出绑定。

在第二种情况下，没有人保存每个线程的绑定——Java 类当然不知道它们，因此我们将其放到*t* Var 的根值。

我希望有人会觉得这很有趣。

# windows - 在 Windows 8 桌面程序中检测键盘是否存在

> ID：11993680
> 
> 赞同：2
> 
> 时间：2012-08-16T18:57:23.203
> 
> 标签：windows, windows-8

对于 Metro 应用程序，有 Windows.Devices.Input.KeyboardCapabilities.KeyboardPresent。Windows 8 桌面程序有没有办法检测物理键盘是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T03:43:58.547

这有点繁琐，我不知道我提出的方法是否适用于所有情况，但这是我最终使用的方法：

1.  使用 SetupDiGetClassDevs 查找所有键盘设备。
2.  使用 SetupDiGetDeviceRegistryProperty 读取一些键盘设备属性以忽略 PS/2 键盘
3.  检查触摸支持，因为 Win 8 触摸设备似乎总是有一个额外的 HID 键盘设备。

PS/2 端口的问题之一是它们始终显示为键盘设备，即使没有插入任何东西。我只是通过假设没有人会使用 PS/2 键盘来解决这个问题，然后我将它们过滤掉了. 我已经包括两个单独的检查来尝试确定键盘是否为 PS/2。我不知道其中一个有多可靠，但是对于我测试过的机器来说，两者似乎都可以正常工作。

另一个问题 (#3) 是当 Windows 8 机器支持触控时，它们有一个额外的 HID 键盘设备，您需要忽略它。

PS：我刚刚意识到，我的代码使用“缓冲区”类进行属性查询。我将其省略以仅保留相关代码，但您需要用一些适当的缓冲区/内存管理替换它。

```
#include <algorithm>
#include <cfgmgr32.h>
#include <Setupapi.h>
#include <boost/tokenizer.hpp>
#include <boost/algorithm/string.hpp>

struct KeyboardState
{
    KeyboardState() : isPS2Keyboard(false)
    {   }

    std::wstring deviceName; // The name of the keyboard device.
    bool isPS2Keyboard;      // Whether the keyboard is a PS/2 keyboard.
};

void GetKeyboardState(std::vector<KeyboardState>& result)
{
    LPCWSTR PS2ServiceName = L"i8042prt";
    LPCWSTR PS2CompatibleId = L"*PNP0303";
    const GUID KEYBOARD_CLASS_GUID = { 0x4D36E96B, 0xE325,  0x11CE,  { 0xBF, 0xC1, 0x08, 0x00, 0x2B, 0xE1, 0x03, 0x18 } };

    // Query for all the keyboard devices.
    HDEVINFO hDevInfo = SetupDiGetClassDevs(&KEYBOARD_CLASS_GUID, NULL, NULL, DIGCF_PRESENT);
    if (hDevInfo == INVALID_HANDLE_VALUE)
    {
        return;
    }

    //
    // Enumerate all the keyboards and figure out if any are PS/2 keyboards.
    //
    bool hasKeyboard = false;
    for (int i = 0;; ++i)
    {
        SP_DEVINFO_DATA deviceInfoData = { 0 };
        deviceInfoData.cbSize = sizeof (deviceInfoData);
        if (!SetupDiEnumDeviceInfo(hDevInfo, i, &deviceInfoData))
        {
            break;
        }

        KeyboardState currentKeyboard;

        // Get the device ID
        WCHAR szDeviceID[MAX_DEVICE_ID_LEN];
        CONFIGRET status = CM_Get_Device_ID(deviceInfoData.DevInst, szDeviceID, MAX_DEVICE_ID_LEN, 0);
        if (status == CR_SUCCESS)
        {
            currentKeyboard.deviceName = szDeviceID;
        }

        //
        // 1) First check the service name. If we find this device has the PS/2 service name then it is a PS/2
        //    keyboard.
        //
        DWORD size = 0;
        if (!SetupDiGetDeviceRegistryProperty(hDevInfo, &deviceInfoData, SPDRP_SERVICE, NULL, NULL, NULL, &size))
        {
            try
            {
                buffer buf(size);
                if (SetupDiGetDeviceRegistryProperty(hDevInfo, &deviceInfoData, SPDRP_SERVICE, NULL, buf.get(), buf.size(), &size))
                {
                    LPCWSTR serviceName = (LPCWSTR)buf.get();
                    if (boost::iequals(serviceName, PS2ServiceName))
                    {
                        currentKeyboard.isPS2Keyboard = true;
                    }
                }
            }
            catch (std::bad_alloc)
            {
            }
        }

        //
        // 2) Fallback check for a PS/2 keyboard, if CompatibleIDs contains *PNP0303 then the keyboard is a PS/2 keyboard.
        //
        size = 0;
        if (!currentKeyboard.isPS2Keyboard && !SetupDiGetDeviceRegistryProperty(hDevInfo, &deviceInfoData, SPDRP_COMPATIBLEIDS, NULL, NULL, NULL, &size))
        {
            try
            {
                buffer buf(size);
                if (SetupDiGetDeviceRegistryProperty(hDevInfo, &deviceInfoData, SPDRP_COMPATIBLEIDS, NULL, buf.get(), buf.size(), &size))
                {
                    std::wstring value = (LPCWSTR)buf.get();

                    // Split the REG_MULTI_SZ values into separate strings.
                    boost::char_separator<wchar_t> sep(L"\0");
                    typedef boost::tokenizer< boost::char_separator<wchar_t>, std::wstring::const_iterator, std::wstring > WStringTokenzier;
                    WStringTokenzier tokens(value, sep);

                    // Look for the "*PNP0303" ID that indicates a PS2 keyboard device.
                    for (WStringTokenzier::iterator itr = tokens.begin(); itr != tokens.end(); ++itr)
                    {
                        if (boost::iequals(itr->c_str(), PS2CompatibleId))
                        {
                            currentKeyboard.isPS2Keyboard = true;
                            break;
                        }
                    }
                }
            }
            catch (std::bad_alloc)
            {
            }
        }

        result.push_back(currentKeyboard);
    }
}

bool IsNonPS2Keyboard(const KeyboardState& keyboard)
{
    return !keyboard.isPS2Keyboard;
}

bool HasKeyboard()
{
    std::vector<KeyboardState> keyboards;
    GetKeyboardState(keyboards);

    int countOfNonPs2Keyboards = std::count_if(keyboards.begin(), keyboards.end(), IsNonPS2Keyboard);

    // Win 8 with touch support appear to always have an extra HID keyboard device which we
    // want to ignore.
    if ((NID_INTEGRATED_TOUCH & GetSystemMetrics(SM_DIGITIZER)) == NID_INTEGRATED_TOUCH)
    {
        return countOfNonPs2Keyboards > 1;
    }
    else
    {
        return countOfNonPs2Keyboards > 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-28T10:33:32.203

在 Windows 10 上，此 API 是 UWP API 的一部分，[可以](https://docs.microsoft.com/en-us/windows/apps/desktop/modernize/desktop-to-uwp-enhance)从桌面应用程序调用。

要从 C#（或其他 .NET 语言）调用它，您需要添加一些对项目文件的引用：

```
<Reference Include="System.Runtime.WindowsRuntime" />
<Reference Include="Windows.Foundation.FoundationContract">
  <HintPath>C:\Program Files (x86)\Windows Kits\10\References\10.0.16299.0\Windows.Foundation.FoundationContract\3.0.0.0\Windows.Foundation.FoundationContract.winmd</HintPath>
  <Private>False</Private>
</Reference>
<Reference Include="Windows.Foundation.UniversalApiContract">
  <HintPath>C:\Program Files (x86)\Windows Kits\10\References\10.0.16299.0\Windows.Foundation.UniversalApiContract\5.0.0.0\Windows.Foundation.UniversalApiContract.winmd</HintPath>
  <Private>False</Private>
</Reference> 
```

第一个引用将针对 GAC 进行解析，另外两个在您的 VS 安装中（如果需要，您可以选择不同的版本）。将 Private 设置为 False 意味着不部署这些程序集的本地副本。

```
Console.WriteLine(new Windows.Devices.Input.KeyboardCapabilities().KeyboardPresent != 0 ? "keyboard available" : "no keyboard"); 
```

在 C++ 中，您可以执行以下操作：

```
#include <roapi.h>
#include <wrl.h>
#include <windows.devices.input.h>

#pragma comment(lib, "runtimeobject")

int APIENTRY wWinMain(
    _In_ HINSTANCE hInstance,
    _In_opt_ HINSTANCE hPrevInstance,
    _In_ LPWSTR lpCmdLine,
    _In_ int nCmdShow)
{
    RoInitialize(RO_INIT_MULTITHREADED);
    {
        INT32 isKeyboardAvailable;
        Microsoft::WRL::ComPtr<ABI::Windows::Devices::Input::IKeyboardCapabilities> pKeyboardCapabilities;
        Microsoft::WRL::Wrappers::HStringReference KeyboardClass(RuntimeClass_Windows_Devices_Input_KeyboardCapabilities);
        if (SUCCEEDED(RoActivateInstance(KeyboardClass.Get(), &pKeyboardCapabilities)) &&
            SUCCEEDED(pKeyboardCapabilities->get_KeyboardPresent(&isKeyboardAvailable)))
        {
            OutputDebugStringW(isKeyboardAvailable ? L"keyboard available\n" : L"no keyboard\n");
        }
    }
    RoUninitialize();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-12T23:02:19.873

简单：查看 HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\kbdclass

# node.js - 如何使用同一个 Twitter 应用程序使用来自一个域的多个主机名进行 Twitter 身份验证？

> ID：11993681
> 
> 赞同：5
> 
> 时间：2012-08-16T18:57:23.730
> 
> 标签：node.js, twitter, express, twitter-oauth, passport.js

我的 DNS 将两个主机名发送到同一个 IP：

*   方舟信息
*   www.theark.info

我在我的 Twitter 应用程序中使用`theark.info`. 什么是确保我可以使用相同的 Twitter 应用程序进行 Oauth 的最佳方法`www.theark.info`，因为我目前收到一个错误：

> 内部服务器错误

在我的 DNS`CNAME www`中，我的 DNS 中有一个指向`theark.info`

也许我需要在请求中使用 Express 和 Javacsript 来操作 DOM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:24:51.580

您不能更改 Twitter（或任何其他 OAuth 提供商），它们都只提供一个回调到一个域。[一个简单的解决方案是将所有请求从http://domain.com](http://domain.com)重新路由到[http://www.domain.com](http://www.domain.com)，这样所有访问者都会在验证之前访问 www.domain.com。您应该能够在您的 DNS 上或使用 req.header 重定向服务器端执行此操作：

```
app.get('/*', function(req, res, next) {
  if (req.headers.host.match(/^www/) !== null ) {
    res.redirect('http://' + req.headers.host.replace(/^www\./, '') + req.url);
  } else {
    next();     
  }
}) 
```

[从这个答案](https://stackoverflow.com/questions/7013098/node-js-www-non-www-redirection)复制。

使用 passport.js 进行身份验证时，尝试指定回调 url：

```
passport.use(new TwitterStrategy({
    consumerKey: auth_keys.twitter.consumerKey,
    consumerSecret: auth_keys.twitter.consumerSecret,
    callbackURL: auth_keys.twitter.callbackURL
  },
  function(token, tokenSecret, profile, done) {
    process.nextTick(function () {
      User.twitterAuth({ profile: profile }, function (err, user) {
        return done(err, user);
      });
    });
  }
)); 
```

并确保 callbackURL 与 Twitter 中配置的完全相同。如果您在 localhost 上运行 node 进行开发，请尝试两个不同的密钥文件并在 twitter 上创建另一个身份验证应用程序，并将 127.0.0.1:3000 作为回调地址。您可以切换开发和生产的关键文件：

```
if (app.get('env') == 'development') {
  auth_keys = require('./lib/keys_dev');
} 
if (app.get('env') == 'production') {
  auth_keys = require('./lib/keys_live');
} 
```

# ruby-on-rails - Rails 3.2 (ActiveRecord) 关联顺序与急切加载和排序

> ID：11993683
> 
> 赞同：0
> 
> 时间：2012-08-16T18:57:28.523
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, arel

我在 Rails 中遇到了这种我在文档中似乎找不到的行为。

看来，如果您将 ActiveRecord 查询复杂化到将底层 SQL 集中到“复杂”查询中（见下文），则它不遵守关联中指定的排序。

这是我的示例模型：

```
class Article < ActiveRecord::Base
  belongs_to :user
  has_many :categories, :order => :name
  attr_accessible :title, :user_id, :user
end 
```

如果我执行“简单”查询，我可以获得按名称排序的关联类别：

```
> Article.includes(:categories).first.categories.map &:name
  Article Load (0.1ms)  SELECT "articles".* FROM "articles" LIMIT 1
  Category Load (0.2ms)  SELECT "categories".* FROM "categories" WHERE "categories"."article_id" IN (11) ORDER BY name
 => ["category 3059", "category 3212", "category 3240", "category 3651", "category 4371", "category 5243", "category 6176", "category 6235", "category 6468", "category 654", "category 6804", "category 6892", "category 7026", "category 8929", "category 9653"] 
```

您可以看到类别的名称按预期顺序排列（注意：由于数据库对字符串的排序方式，我希望 3 位数编号的类别按字母顺序排列）。

下一个示例是一个更复杂的查询，使用另一个关联属性进行排序：

```
> Article.includes(:user, :categories).order('users.name').first.categories.map &:name
  Article Load (0.3ms)  SELECT DISTINCT "articles".id FROM "articles" LEFT OUTER JOIN "users" ON "users"."id" = "articles"."user_id" LEFT OUTER JOIN "categories" ON "categories"."article_id" = "articles"."id" ORDER BY users.name LIMIT 1
  SQL (0.2ms)  SELECT "articles"."id" AS t0_r0, "articles"."title" AS t0_r1, "articles"."user_id" AS t0_r2, "articles"."created_at" AS t0_r3, "articles"."updated_at" AS t0_r4, "users"."id" AS t1_r0, "users"."name" AS t1_r1, "users"."created_at" AS t1_r2, "users"."updated_at" AS t1_r3, "categories"."id" AS t2_r0, "categories"."name" AS t2_r1, "categories"."article_id" AS t2_r2, "categories"."created_at" AS t2_r3, "categories"."updated_at" AS t2_r4 FROM "articles" LEFT OUTER JOIN "users" ON "users"."id" = "articles"."user_id" LEFT OUTER JOIN "categories" ON "categories"."article_id" = "articles"."id" WHERE "articles"."id" IN (16) ORDER BY users.name
 => ["category 5023", "category 728", "category 3306", "category 8170", "category 5957", "category 7190", "category 4427", "category 3435", "category 1274", "category 7251", "category 7368", "category 682", "category 2918"] 
```

如您所见，当 AR 将查询集中到其“复杂”SQL 查询之一时，`categories`关联就会丢失。

这种行为是预期的吗？它是否记录在我无法找到的某个地方？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:55:12.197

这里的问题是：您正在执行连接并通过“users.name”对其进行排序。

当您进行连接时，您将 2 个表放在一起，任何排序都会影响整个连接表。

由于您无论如何都要进行 2 个查询，所以我会这样写：

```
Article.includes(:user, :categories).order('users.name').first.categories.order(:name).map &:name 
```

或者更好的是，使用采摘方法。它只返回一列值：

```
Article.includes(:user, :categories).order('users.name').first.categories.order(:name).pluck(:name) 
```

这样您就不必加载所有类别属性来列出它们的名称。=)

PS：

如果要进行双重排序，可以将两个参数传递给 order：

```
Article.includes(:user, :categories).order('users.name', 'categories.name') 
```

我没有写整个查询，因为我不明白你到底想恢复什么。如果你解释得更多，我可以试一试。到目前为止，我了解到您正在尝试获取属于第一个用户的文章的所有类别，按名称排序，按名称排序。但对我来说，如果没有上下文，这个查询没有多大意义。

# google-maps - 谷歌地图偏离中心/切断

> ID：11993684
> 
> 赞同：3
> 
> 时间：2012-08-16T18:57:36.183
> 
> 标签：google-maps, google-maps-api-3

我有一张正在创建的地图，它的一部分似乎被切断或偏离中心。我试过添加`google.maps.event.triggerr(map, 'resize')`，它仍然被切断。有任何想法吗？

```
<script language="JavaScript">
 var map;
      function initialize() {
        var mapOptions = {
          zoom: 15,
          center: new google.maps.LatLng(<?=$lat?>, <?=$long?>),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
      };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
      }
      //google.maps.event.trigger(map, 'resize');
      google.maps.event.addDomListener(window, 'load', initialize);

</script> 
```

![在此处输入图像描述](../Images/15f09dfec8e71d7969c957a261b24f55.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:24:31.963

在触发调整大小事件之前，确保显示地图的 div 具有大小。

# android - Android WebView：从资源加载是否仍需要 Internet 权限？

> ID：11993686
> 
> 赞同：1
> 
> 时间：2012-08-16T18:57:38.330
> 
> 标签：android, resources, android-webview, android-permissions

我正在编写一个小型 Android 游戏，并使用 WebView 从打包资源中读取 HTML 文件。

如果打包的 HTML 文件没有引用 Internet 上的任何资源，是否还需要在权限文件中包含 Internet 访问权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:06:51.430

不，根据[文档](http://developer.android.com/reference/android/Manifest.permission.html#INTERNET)，只有使用套接字才需要互联网许可。您可以将 HTML 数据读入字符串并使用[loadData](http://developer.android.com/reference/android/webkit/WebView.html#loadData%28java.lang.String,%20java.lang.String,%20java.lang.String%29)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:07:12.630

不，只要您的内容（html 文件）不需要来自网络的任何内容（如远程图像），访问 file:// 没有互联网权限就应该是安全的。不过需要注意的是：与您在这里询问相比，您自己测试所需的时间要少得多。

# javascript - 使用 url 编码转换特殊字符 (é è ë)

> ID：11993689
> 
> 赞同：2
> 
> 时间：2012-08-16T18:57:55.347
> 
> 标签：javascript, function, urlencode

我正在制作一个功能，用户的电子邮件客户端只打开一个预填充的内容（javascript）。

问题是我在转换特殊字符时遇到问题，因此它们可以正确显示到电子邮件客户端（通过 url 传递的内容）。

我写了一个函数，但是在做了 a 之后`console.log()`我发现它甚至不会转换字符（可能是因为我试图用 a 替换`char`a `string`）。

```
function url_encode(item)
{
    for (i in item)
    {
        a = item[i]
        switch (a)
        {
            case "À": a='%C0';
            break;
            case "È": a='%C8';
            break;
            case "É": a='%C9';
            break;
            case "Ê": a='%CA';
            break;
            case "à": a='%E0';
            break;
            case "è": a='%E8';
            break;
            case "é": a='%E9';
            break;
            case "ê": a='%EA';
            break;
            case "ë": a='%EB';
            break;  
        }
        item[i] = a;
        console.log(item[i])
    }
    return item;
} 
```

任何人都找到了成功的方法或有一个想法（或修复）为什么这不能按预期工作？

编辑：`encodeURI`函数不支持`é`和`è`字符（在法语中使用很多），结果为`Ã©`and `Ã¨`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T19:39:45.123

这个可以吗？

```
var url_encode = function ( url ) {
    return url.split( '' ).map(function ( c ) {
        return /[ÀÈÉÊàèéêë]/.test( c ) ? '%' + c.charCodeAt( 0 ).toString( 16 ).toUpperCase() : c;
    }).join( '' );
}; 
```

**现场演示：http:** [//jsfiddle.net/v2He6/](http://jsfiddle.net/v2He6/)

（注意：您需要为 IE8 进行[polyfill](https://github.com/kriskowal/es5-shim) `.map()`。）

例子：

```
url_encode( 'ABCÀDEFè' ) // "ABC%C0DEF%E8" 
```

# javascript - 将另一个站点的特定 div 加载到我的 div

> ID：11993692
> 
> 赞同：0
> 
> 时间：2012-08-16T18:57:58.713
> 
> 标签：javascript, jquery, jsfiddle

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

我搜索此代码以从另一个站点加载特定的 div 任何人都可以在 jsfiddle 中为此代码编写示例？？？

```
 $.ajax({
url: 'http://something.com',
type: 'GET',
success: function(res) {
var loadIt = $j(res.responseText).find('#divname').html();
$('#m').html(loadIt);
}
}); 
```

如果是更好的方法?????

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T19:01:55.303

您可以使用 JQuery 加载方法。试试看：$('#m').load(url);

# c - 在C中将有符号整数转换为无符号整数

> ID：11993697
> 
> 赞同：3
> 
> 时间：2012-08-16T18:58:23.417
> 
> 标签：c, embedded

我正在尝试将两个 8 位数字组合成一个无符号整数，但无论我使用什么类型的转换，结果仍然是有符号数。该代码使用飞思卡尔微处理器 MC9S08LH64 的 CodeWarrior 10.1 编译。

我试过的东西不起作用 - 移动并添加两个 8 位数字，然后在每一步都将它们强制转换为无符号整数。- union/struct 将两个 8 位类型组合起来，并将结果编号转换为 unsigned int。- 使用无符号整数指针（下面的代码）

```
unsigned int acquire_sensor_voltage_internal_adc()
{ //this is internal ADC
     unsigned int result;
     unsigned int* data_ptr;
     char print_buffer [50];
     int_convert cvt;
    //internal adc collecting counts of input voltage
    //______________________________________________

    //writing to ADCSC1A initiate the conversion sequence
    ADCSC1A= 0x09;
    while(!ADCSC1A_COCOA){}

    cvt.parts.p0 = ADCRHA;
    cvt.parts.p1 = ADCRLA;
    data_ptr = &cvt.int_number;
    result = (unsigned int)*data_ptr;

    sprintf(print_buffer,"here!!!>>>>>>>%d\r\n",result);
    serial_sendString(print_buffer,strlen(print_buffer));
    //_______________________________________________
    return (unsigned int) result;
}

//definition of int_convert from.h file
typedef union{
unsigned int int_number;
struct{
    unsigned char p0;
    unsigned char p1;
}parts;
}int_convert; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:02:58.617

你可以试试：

```
result = ((unsigned)ADCRHA) << 8 | (unsigned)ADCRHB; 
```

然后使用正确的格式说明符`%u`而不是`%d`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:06:46.250

如果您想查看无符号的，则必须使用无符号格式来打印该值。`%d`不是正确的格式。使用`%u`，你会看到它`unsigned`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:07:50.940

您正在打印`result`为有符号整数，因为您`%d`使用`printf`. 用于`%u`指示无符号整数（或者`%x`如果您想要十六进制打印输出）。

```
sprintf(print_buffer, "here!!!>>>>>>>%u\r\n", result); 
```

顺便说一句，使用按位运算而不是联合将两个字节转换为单个`unsigned int`. 这样，您的代码将更易于移植到`unsigned`超过两个字节的其他编译器。假设`L`and `H`in `ADCRLA`and`ADCRHA`表示“低”和“高”：

```
result = (ADCRHA << 8) & ADCRLA; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:40:38.727

你不需要把事情过度复杂化。这适用于任何 HC08：

```
unsigned int ADC_result = *(unsigned int*) &ADCRHA; 
```

HC08 架构保证对 ADC 的两次读取是同步的，它使用内部硬件缓冲区在读取高位字节后立即保存低位字节。

# facebook - 为什么 Facebook 为事件返回 null end_time？

> ID：11993698
> 
> 赞同：1
> 
> 时间：2012-08-16T18:58:23.523
> 
> 标签：facebook, facebook-graph-api, facebook-fql

当我使用 fql 查询 Facebook 的 256996217750754 eid 时，它返回 end_time 为空：

`SELECT eid, name, pic_small, pic_big, pic_square, pic, host, description, start_time, end_time, creator, update_time, location, venue, privacy from event where eid=256996217750754`

返回：

```
...
"start_time": "2012-09-01T22:00:00-0400",
"end_time": null,
... 
```

但是，当我查询图表时，它返回准确：

`https://graph.facebook.com/256996217750754?access_token=<access_token>`

返回：

```
...
start_time: "2012-09-01T22:00:00",
end_time: "2012-09-02T01:00:00",
... 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:24:56.410

`end_time`当事件没有定义可选的结束时间时为 null。此外，当我查询该事件的图表时，我看不出`end_time`哪个与返回 null 的 FQL 一致：

```
{
   "id": "256996217750754",
   "owner": {
      "name": "Buffalo Wings & Rings Morrisville, NC",
      "category": "Restaurant/cafe",
      "id": "136674116345739"
   },
   "name": "UFC 151 on Pay Per View - Jones vs. Henderson",
   "description": "Main Card -\nJones vs Henderson\nJohnson vs Castillo\nMizugaki vs Hougland\nSiver vs Yagin\nLineker vs Urushitani\nPrelims - \nCruickshank vs Martinez\nRoller vs Volkmann",
   "start_time": "2012-09-01T22:00:00-0400",
   "timezone": "America/New_York",
   "location": "Buffalo Wings & Rings Morrisville, NC",
   "venue": {
      "id": "136674116345739"
   },
   "privacy": "OPEN",
   "updated_time": "2012-08-02T14:37:21+0000"
} 
```

我用了：

```
https://graph.facebook.com/256996217750754?access_token=AAACEdEose... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:06:55.220

我相信 Donn Lee 是部分正确的。根据 Facebook 开发者[文章](https://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)，“end_time”始终是为事件定义的。但是，这将在 2012 年 10 月 30 日之前消失。

请注意 Donn Lee 对图表的反应与我自己的反应之间的差异。

我的回复禁用了“事件时区”：

```
...
"start_time": "2012-09-01T22:00:00-0400",
"end_time": null,
... 
```

Donn Lee 的回复，可能启用了“事件时区”：

```
...
"start_time": "2012-09-01T22:00:00-0400",
... 
```

此设置可在 Facebook 应用程序的“高级”设置页面的“迁移”下找到：

![在此处输入图像描述](../Images/c1a9e4d7378d9cd427a120725d3afaeb.png)

# 结论

看来我需要迁移我的代码以支持 Facebook 的[新事件时间约定](https://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)：

1.  **处理带有偏移量**的 ISO-8601
***   如果没有指定，则期望没有“end_time”。**

# opengl-es - GLSL texture2D() 总是返回 (0, 0, 0, 1)

> ID：11993701
> 
> 赞同：2
> 
> 时间：2012-08-16T18:58:29.787
> 
> 标签：opengl-es, opengl-es-2.0

我对此感到非常困惑。我正在尝试渲染到屏幕外纹理，以便我可以执行一些后期处理，但甚至无法让该纹理未经修改地绘制到屏幕上。我目前的目标是 iPhone 模拟器上的 OpenGL ES 2.0。

我已将问题缩小到返回 vec4(0, 0, 0, 1) 的 GLSL 的 texture2D() 函数，因为如果我用任何常量颜色替换该调用，屏幕就会填充指定的颜色。创建纹理，绑定到纹理单元 0，分配其存储空间，将其 min 和 mag 过滤器设置为 NEAREST，并将 sampler2D uniform 设置为 0。

我尝试删除所有渲染到纹理代码并显式初始化其数据，我得到相同的结果，如果直接定位屏幕帧缓冲区，我得到我期望的图像，所以我相当有信心纹理的数据是都是由我尝试从中采样的时间定义的。

我已经尝试确保我的纹理在渲染时没有绑定到任何纹理单元，但这并没有什么不同。

我也尝试过 glEnable(GL_TEXTURE_2D) 但我的印象是 ES 2.0 不再重要了。无论如何它没有帮助。

我实际上是在围绕 OpenGL ES 2.0 使用我自己的瘦 C++ 包装器库，但是如果您对 OpenGL ES 2.0 非常了解，那么无论如何都应该清楚这段代码中发生的事情。对于代码不是普通的 OpenGL，我深表歉意；我的下一个调试步骤是在没有我的包装库的情况下重新编写代码。我只是想知道我是否犯了一些无论如何都会跳出来的愚蠢错误。

但是，我在最后一次 drawArrays 调用我设置的所有状态变量之前添加了普通的 OpenGL glGet*() 查询，并且一切都按预期设置。

代码中唯一不太明显的部分是 Smart<> 对象。它们只是简单地包装 GL 对象引用和引用数组，并在它们的析构函数中调用它们关联的 glDelete*()。

```
#include <tsvl/vec.hpp>
using namespace tsvl;

#include <tsgl2/Context.hpp>
#include <tsgl2/Smart.hpp>
using namespace tsgl2;

#include <array>
#include <exception>
#include <string>
using namespace std;

#define SHADER_SOURCE(text) "#version 100\n" #text

namespace {

const AttributeLocation vertexPositionAttributeLocation(0);

const string vec2PassthroughVertexShaderSource = SHADER_SOURCE(
  attribute vec2 vertexPosition;
  void main() {
    gl_Position = vec4(vertexPosition, 0, 1);
  }
);

const string greenFragmentShaderSource = SHADER_SOURCE(
  void main() {
    gl_FragColor = vec4(0, 1, 0, 1);
  }
);

const string combineTexturesFragmentShaderSource = SHADER_SOURCE(
  precision highp float;

  uniform vec2 screenSize;
  uniform sampler2D samplers[1];

  void main() {
    vec2 texCoord = gl_FragCoord.xy / screenSize;
    gl_FragColor = texture2D(samplers[0], texCoord);
  }
);

const vec2 vertices[] = {
  vec2(-0.9f, -0.9f),
  vec2( 0.9f, -0.9f),
  vec2( 0.0f,  0.9f),
};
const int vertexCount = sizeof(vertices) / sizeof(vertices[0]);

const vec2 screenCorners[] = {
  vec2(-1.0f, -1.0f),
  vec2( 1.0f, -1.0f),
  vec2( 1.0f,  1.0f),
  vec2(-1.0f,  1.0f),
};
const int screenCornerCount = sizeof(screenCorners) / sizeof(screenCorners[0]);

} // unnamed namespace

void drawDemoScene(int screenWidth, int screenHeight) {
  FramebufferRef screenFramebuffer = Framebuffer::currentBinding();

  //

  Smart<array<TextureRef, 8>> renderTextures(Context::genTextures<8>());
  Smart<array<FramebufferRef, 8>> renderFramebuffers(Context::genFramebuffers<8>());

  Context::setActiveTextureUnit(TextureUnit(0)); // My wrapper translates this to GL_TEXTURE0
  Texture2D::bind(renderTextures.get()[0]);
  Texture2D::setStorage(TextureFormat::RGBA8, IntRect::Size(screenWidth, screenHeight));
  Texture2D::setMinificationFilter(TextureMinificationFilter::NEAREST);
  Texture2D::setMagnificationFilter(TextureMagnificationFilter::NEAREST);

  Framebuffer::bind(renderFramebuffers.get()[0]);
  Framebuffer::ColorAttachment::set(renderTextures.get()[0], FramebufferTextureTarget::TEXTURE_2D);
  if (Framebuffer::status() != FramebufferStatus::COMPLETE)
    throw exception();

  //

  vertexPositionAttributeLocation.enableAttributeArray();

  Smart<ShaderRef> vec2PassthroughVertexShader(Context::createShader(ShaderType::VERTEX));
  vec2PassthroughVertexShader->setSource(vec2PassthroughVertexShaderSource);
  vec2PassthroughVertexShader->compile();
  if (!vec2PassthroughVertexShader->compileWasSuccessful())
    throw exception();

  Smart<ShaderRef> greenFragmentShader(Context::createShader(ShaderType::FRAGMENT));
  greenFragmentShader->setSource(greenFragmentShaderSource);
  greenFragmentShader->compile();
  if (!greenFragmentShader->compileWasSuccessful())
    throw exception();

  Smart<ShaderRef> combineTexturesFragmentShader(Context::createShader(ShaderType::FRAGMENT));
  combineTexturesFragmentShader->setSource(combineTexturesFragmentShaderSource);
  combineTexturesFragmentShader->compile();
  if (!combineTexturesFragmentShader->compileWasSuccessful())
    throw exception();

  Smart<ProgramRef> vec2PassthroughGreenProgram(Context::createProgram());
  vec2PassthroughGreenProgram->attach(*vec2PassthroughVertexShader);
  vec2PassthroughGreenProgram->attach(*greenFragmentShader);
  vec2PassthroughGreenProgram->bindAttributeToLocation(
      "vertexPosition", vertexPositionAttributeLocation);
  vec2PassthroughGreenProgram->link();
  vec2PassthroughGreenProgram->validate();
  if (!vec2PassthroughGreenProgram->validationWasSuccessful())
    throw exception();

  Smart<ProgramRef> combineTexturesProgram(Context::createProgram());
  combineTexturesProgram->attach(*vec2PassthroughVertexShader);
  combineTexturesProgram->attach(*combineTexturesFragmentShader);
  combineTexturesProgram->bindAttributeToLocation(
      "vertexPosition", vertexPositionAttributeLocation);
  combineTexturesProgram->link();
  combineTexturesProgram->validate();
  if (!combineTexturesProgram->validationWasSuccessful())
    throw exception();

  UniformLocation screenSizeUniformLocation =
      combineTexturesProgram->locationOfUniform("screenSize");
  UniformLocation samplersUniformLocation =
      combineTexturesProgram->locationOfUniform("samplers");

  //

  Context::setColorClearValue(0.0f, 0.0f, 0.0f, 0.0f);
  Context::setLineWidth(2.0f);
  Context::setViewport(IntRect(0, 0, screenWidth, screenHeight));
  Context::useProgram(*vec2PassthroughGreenProgram);

  Framebuffer::bind(renderFramebuffers.get()[0]);

  vertexPositionAttributeLocation.setAttributeArrayPointerAndStride(
      DONT_NORMALIZE, 2, AttributeLocation::ArrayDataType::FLOAT, vertices, 0);

  Context::clear(CLEAR_COLOR_BUFFER);
  Context::drawArrays(DrawMode::LINE_LOOP, 0, vertexCount);

  //

  Context::enableBlending();
  Context::setBlendFuncs(SourceBlendFunc::SRC_ALPHA, DestBlendFunc::ONE_MINUS_SRC_ALPHA);
  Context::setColorClearValue(1.0f, 1.0f, 1.0f, 1.0f);
  Context::setViewport(IntRect(0, 0, screenWidth, screenHeight));
  Context::useProgram(*combineTexturesProgram);

  Framebuffer::bind(screenFramebuffer);

  vertexPositionAttributeLocation.setAttributeArrayPointerAndStride(
      DONT_NORMALIZE, 2, AttributeLocation::ArrayDataType::FLOAT, screenCorners, 0);

  screenSizeUniformLocation.setUniformValue(vec2(screenWidth, screenHeight));
  samplersUniformLocation.setUniformValue(TextureUnit(0)); // Even though setActiveTextureUnit()
                                                           // translated this to GL_TEXTURE0
                                                           // It stays plain int 0 here.

  Context::clear(CLEAR_COLOR_BUFFER);
  Context::drawArrays(DrawMode::TRIANGLE_FAN, 0, screenCornerCount);
} 
```

你可以在这里看到我的包装器库是如何实现的：[https ://github.com/jbat-es/tsgl2](https://github.com/jbat-es/tsgl2)

编辑：

好的，我用普通的 OpenGL 写了一个非常精简的版本，它有同样的问题：

```
void drawDemoScenePlainGL(int screenWidth, int screenHeight) {
  GLuint texture;
  glGenTextures(1, &texture);

  glBindTexture(GL_TEXTURE_2D, texture);
  int data[320][460];
  memset(data, 0xFF, 320*460*sizeof(int));
  glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, screenWidth, screenHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, data);
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
  glBindTexture(GL_TEXTURE_2D, 0);

  //

  glEnableVertexAttribArray(0);

  GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);
  const char* source = vec2PassthroughVertexShaderSource.c_str();
  int sourceLength = vec2PassthroughVertexShaderSource.length();
  glShaderSource(vertexShader, 1, &source, &sourceLength);
  glCompileShader(vertexShader);

  GLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);
  source = combineTexturesFragmentShaderSource.c_str();
  sourceLength = combineTexturesFragmentShaderSource.length();
  glShaderSource(fragmentShader, 1, &source, &sourceLength);
  glCompileShader(fragmentShader);

  GLuint program = glCreateProgram();
  glAttachShader(program, vertexShader);
  glAttachShader(program, fragmentShader);
  glBindAttribLocation(program, 0, "vertexPosition");
  glLinkProgram(program);

  GLuint screenSizeUniformLocation = glGetUniformLocation(program, "screenSize");
  GLuint samplersUniformLocation = glGetUniformLocation(program, "samplers");

  //

  glClearColor(1, 1, 1, 1);
  glUseProgram(program);
  glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, screenCorners);
  glViewport(0, 0, screenWidth, screenHeight);

  glActiveTexture(GL_TEXTURE0);
  glBindTexture(GL_TEXTURE_2D, texture);

  glUniform2f(screenSizeUniformLocation, screenWidth, screenHeight);
  glUniform1i(samplersUniformLocation, 0);

  glClear(GL_COLOR_BUFFER_BIT);
  glDrawArrays(GL_TRIANGLE_FAN, 0, screenCornerCount);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T22:18:56.407

纹理环绕模式默认为 GL_REPEAT，它只支持二次幂纹理。只需添加

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

解决问题。

# php - 如果我创建值为 020 的变量，它会变成 16？

> ID：11993703
> 
> 赞同：0
> 
> 时间：2012-08-16T18:58:30.913
> 
> 标签：php, variables, zero

> **可能重复：**
> [php 数组在键值 07 和 08 上表现异常](https://stackoverflow.com/questions/4750781/php-array-behaving-strangely-with-key-value-07-08)

在 PHP 中，当我创建 $myvar = 020 并回显 $myvar 我得到 16 为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T18:59:38.127

因为如果你在一个数字前加上一个 0，PHP 会假设你在以 8 为基数工作，而以 8 为基数的 20 是以 10 为基数的 16。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:02:38.023

因为开始`0`告诉`020`php 它是一个八进制

更多示例

```
$a = 1234; // decimal number
$a = -123; // a negative number
$a = 0123; // octal number (equivalent to 83 decimal)
$a = 0x1A; // hexadecimal number (equivalent to 26 decimal) 
```

查看此 php[手册](http://php.net/manual/en/language.types.integer.php)以获取更多说明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:02:36.510

这就是所谓的整数表示[http://www.php.net/manual/en/language.types.integer.php](http://www.php.net/manual/en/language.types.integer.php)。

```
echo 0b11111; // binary, introduced in PHP 5.4
echo 31; // duh
echo 0x1f; // hexadecimal
echo 037; // octal 
```

# django - Django prefetch_related 导致 M2M 关系中的额外查询

> ID：11993707
> 
> 赞同：0
> 
> 时间：2012-08-16T18:58:41.443
> 
> 标签：django, django-models

我有以下型号：

Person 模型与 Questions 有多对多 (M2M) 关系。

```
class Person(models.Model):
    name = models.CharField(max_length=100)
    questions = models.ManyToManyField(Question, related_name='persons') 
```

我从 Django 调试工具栏中看到，当我发出：

```
persons = Person.objects.filter(name="Foo").prefetch_related("questions") 
```

它执行 2 个查询，一个到 Person 表，另一个到 Questions 表，但除外。

但是，如果我遍历模板中的列表，则会对 Person 的每一行进行额外的选择查询。

```
{% for person in persons %}
{{ person.name }}
   {%  for question in person.questions.all %}
       {{ question.text }}
   {% endfor %}
{% endfor %} 
```

这是问题的第二个 SQL，所以预取肯定是有效的，但不知何故，它需要额外的查询来显示每个问题。

```
SELECT ("myapp_person_questions"."person_id") AS "_prefetch_related_val", 
"myapp_question"."id", "myapp_question"."asker_id", 
 "myapp_question"."question", "myapp_question"."timestamp" 
INNER JOIN "myapp_person_questions" ON ("myapp_question"."id" = 
 "myapp_person_questions"."question_id") WHERE              
 "myapp_person_questions"."person_id" IN (1, 2, 3, 4) ORDER BY 
 "myapp_question"."timestamp" DESC

SELECT "myapp_question"."id", "myapp_question"."asker_id", 
"myapp_question"."question", "myapp_question"."timestamp" FROM 
"myapp_question" INNER JOIN "myapp_person_questions" 
ON ("myapp_question"."id" = "myapp_person_questions"."question_id") 
WHERE "myapp_person_questions"."person_id" = 1 ORDER BY "myapp_question"."timestamp" DESC 
```

我禁用了所有 custom `Manager`，所以我很确定没有在`QuerySet`.

需要注意的一件事是我自己没有明确生成连接表，这可能是问题吗？（使用`through`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:00:56.960

我遇到了同样的问题：每次我尝试引用我认为我在查询中撤回的内容时，我都在执行额外的查询！我想我找到了解决方案。为了防止对*每个实例*进行额外的查找，您可以扩展您的 prefetch_related 以包含您需要的查找表。实际上，这会产生*一个查询*，但它不会产生 10,000 个查询，假设您有 10,000 人您正在尝试访问。

```
 students = Person.objects.select_related('gender',
                                             'old_race',
                                             'ethnicity',
                                             'father_education_level',
                                             'mother_education_level',
                                             ).prefetch_related('personethnicity_set',
                                                                'personethnicity_set__ethnicity',
                                                                'studentsemester_set',
                                                                'studentsemester_set__semester',
                                                                'studentsemester_set__first_mode_admission',
                                                                'studentsemester_set__classification',
                                                                'studentsemester_set__academic_status',
                                                                'studentsemester_set__studentsemestermajor_set',
                                                                'studentsemester_set__studentsemestermajor_set__major_type',
                                                                'studentsemester_set__studentsemestermajor_set__major',
                                                                'studentsemester_set__studentsemestermajor_set__major__registrar_school').filter(ftic_cohort=oursem).order_by('-studentsemester__semester__ccyys') 
```

在上面的代码中，我可以使用 select_related 为我的人员记录获取所有查找表（一对一）。然后，我可以使用 prefetch_related （关于 personethnicity 和 studentsemester）来获取我的多对多，*并且*我可以通过执行 personethnicity__ethnicity 等来获取与这些多对多表一起使用的查找表。

在一个大约有 8000 名学生的查询中，我只用这段代码执行了 15 个 SQL 查询。然后我通过这样做（在我的情况下，在学生中的螺柱循环内）引用我的预取字段，如下所示：

```
studict['ethnicities'] = ''
for myeth in stud.personethnicity_set.all(): 
    studict['ethnicities'] += str(myeth.ethnicity) + ' ' 
```

希望这可以帮助。

# hibernate - 带有 Hibernate Validator 的 Spring MVC 不显示来自 messages.properties 的错误

> ID：11993708
> 
> 赞同：0
> 
> 时间：2012-08-16T18:58:47.200
> 
> 标签：hibernate, validation, spring-mvc, properties

我在显示错误消息时遇到问题。我使用 Spring MVC 并发送对象 UserForm 之类的表单，并且我想使用 Hibernate 验证器，这是可行的，但我看不到任何错误消息。

这是表单 home.jsp

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<html>
<head>
<link rel="stylesheet" type="text/css"
    href="./resources/styles/style.css" media="screen" />
    <title>Home</title>
</head>
<body>
<h1>
    User Form 
</h1>

<form:form action="addUser" commandName="userform" method="get">
    <table>
        <tr>
            <td>Name: </td>
            <td><form:input path="name"/></td>
            <td><form:errors path="name" cssClass="error"/></td>
        </tr>
        <tr>
            <td>Text: </td>
            <td><form:textarea path="text"/></td>
            <td><form:errors path="text" cssClass="error"/></td>
        </tr>
         <tr>
            <td colspan="2">
                <input type="submit" value="Send"/>
            </td>
         </tr>
    </table>
</form:form>
</body>
</html> 
```

有我的控制器 UserController 处理上面的表单

```
 package cz.solution.controllers;

   import java.util.Date;
import javax.validation.Valid;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import cz.morosystems.form.UserForm;
import cz.morosystems.tools.JobSheduler;

@Controller
public class UserController {

    @RequestMapping(value="/", method=RequestMethod.GET)
    public String showMyform(Model model) {
        model.addAttribute("userform", new UserForm());
        return "home";
    }  

    @RequestMapping(value = "/addUser")
    public String showFilledForm(@Valid @ModelAttribute("usermessage") UserForm userform, BindingResult result,
                        Model model) {
        userform.setDate(new Date());
        model.addAttribute("userform", userform);
        if(result.hasErrors()){           
            return "/home";
        }else{
            return "displayUser";
        }

    } 
} 
```

用于处理来自 home.jsp 的表单的 UserForm

```
package cz.solution.form; 

import java.util.Date;    
import org.hibernate.validator.constraints.NotEmpty;    

public class UserForm {
    @NotEmpty
    private String name;
    @NotEmpty
    private String text;
    private Date date;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

} 
```

我将此添加到 servlet-context.xml

```
<beans:bean class="org.springframework.context.support.ResourceBundleMessageSource" id="messageSource">
        <beans:property name="basename" value="messages" />
    </beans:bean> 
```

我在文件夹 src/main/resources 中有 messages.properties

```
NotEmpty.userForm.name = Name is required!
NotEmpty.userForm.text = Text is required! 
```

当输入之一为空时，将再次显示表单但没有错误消息。我尝试添加到用户窗体

```
@NotEmpty(message="Name is required")
    private String name; 
```

但再次没有成功。感谢所有提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:00:57.750

解决了！在方法 showFilledForm 中，在 @ModelAttribute 后面给出 @Valid

# c# - 为什么在使用 EntityFramework 编辑关系时出现错误？

> ID：11993709
> 
> 赞同：0
> 
> 时间：2012-08-16T18:58:49.603
> 
> 标签：c#, entity-framework, linq-to-entities

我有三个 EntityFramework (4.3) 对象，一个成员、地址和一个状态。它们看起来像这样：

```
public class Member
{
    public int Id { get; set; }
    public virtual Address Address { get; set; }
    /*other properties removed for brevity*/
}

public class Address
{
    public int Id { get; set; }
    public virtual State State { get; set; }
    /*other properties removed for brevity*/
}

public class State
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Abbreviation { get; set; }
    public virtual ICollection<Address> Address { get; set; }
} 
```

当我更新地址关系时，一切正常。请参见下面的代码：

```
[HttpPost]
public ActionResult Update(MemberUpdateModel model)
{
    if (!ModelState.IsValid)
    {
        model.SetStateSelectList(_db, model.SelectedStateId);
        return View(model);
    }

    _db.Entry(model.Member).State = EntityState.Modified;
    _db.Entry(model.Member.Address).State = EntityState.Modified;

    _db.SaveChanges(); // works

    return RedirectToAction("Index");
} 
```

然后我添加了地址/状态关系的更新，如下所示：

```
[HttpPost]
public ActionResult Update(MemberUpdateModel model)
{
    if (!ModelState.IsValid)
    {
        model.SetStateSelectList(_db, model.SelectedStateId);
        return View(model);
    }

    _db.Entry(model.Member).State = EntityState.Modified;
    _db.Entry(model.Member.Address).State = EntityState.Modified;

    // added for address/state relationship
    var selectedState = _db.States.FirstOrDefault(q => q.Id == model.SelectedStateId);
    model.Member.Address.State = selectedState;

    _db.SaveChanges();

    return RedirectToAction("Index");
} 
```

当我们运行上面的代码时，我们得到以下错误：

```
Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.OptimisticConcurrencyException: Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries. 
```

我做错了什么导致这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:21:53.440

“OptimisticConcurrencyException”在这里看起来是一个有意义的线索。[这个讨论](https://stackoverflow.com/questions/1836173/entity-framework-store-update-insert-or-delete-statement-affected-an-unexpec)可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:10:20.337

我们将更新操作更改为首先查询现有数据，然后使用发布的数据更新对象。

```
[HttpPost]
public ActionResult Update(MemberUpdateModel model)
{
    if (!ModelState.IsValid)
    {
        model.SetStateSelectList(_db, model.SelectedStateId);
        return View(model);
    }

    var newModel = new MemberUpdateModel();
    newModel.Member = _db.Members.Include("Address").FirstOrDefault(q => q.Id == model.Member.Id);
    newModel.Member.Address.State = _db.States.FirstOrDefault(q => q.Id == model.SelectedStateId);

    bool success = TryUpdateModel(newModel);
    if (success)
    {
        _db.SaveChanges();
    }
    else
    {
        throw new Exception("TryUpdateModel() Failed");
    }

    return RedirectToAction("Index");
} 
```

这很好用。

# grails - 在 RememberMeServices-Grails/Spring Security 中获取会话

> ID：11993710
> 
> 赞同：0
> 
> 时间：2012-08-16T18:58:53.297
> 
> 标签：grails, spring-security, grails-plugin

我有一个实现 RememberMeServices 和 LogoutHandler 接口的类。我已打开会话固定并可以选择将会话创建为 true。当我尝试使用 loginSuccess 方法获取会话时

RequestContextHolder.currentRequestAttributes().getSession()

我收到一条错误消息

```
java.lang.IllegalStateException: setAttribute: Session already invalidated
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1273)
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1238)
    at org.apache.catalina.session.StandardSessionFacade.setAttribute(StandardSessionFacade.java:130)
    at org.codehaus.groovy.grails.web.servlet.mvc.GrailsHttpSession.setAttribute(GrailsHttpSession.java:210)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:229)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:128)
    at com.teslagovernment.security.TabulaeRememberMeServices.loginSuccess(TabulaeRememberMeServices.groovy:70)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.successfulAuthentication(AbstractAuthenticationProcessingFilter.java:294)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
    at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:167) 
```

如何获取当前会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:34:11.790

Without seeing your actual code and not know the grails version you're using. It sounds to me like you're trying to get the session from the "loginSuccess" method of some Controller? If so, isn't the session simply available as "session" without calling that RequestContextHolder stuff? You should have access to it just like the "request" object and simply stuff data into it like a map:

```
session.foo = "bar" 
```

# matlab - 需要使用切比雪夫多项式基础拟合多项式

> ID：11993722
> 
> 赞同：10
> 
> 时间：2012-08-16T18:59:46.957
> 
> 标签：matlab, curve-fitting, polynomial-math, least-squares

`polyfit`我一直在使用 matlab中的函数将线性最小二乘多项式拟合到数据中。根据我的阅读，这使用标准多项式基础（单项式基础）。我已经读过使用切比雪夫多项式基础进行拟合会导致更大的数值稳定性，所以我想这样做。matlab有这个选项吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T19:06:00.080

我将在这里假设您想要第一类切比雪夫多项式。据我所知，Matlab 没有这个内置的。不过，自己编写代码很容易。Chebyshev 多项式仅在 [-1,1] 上定义，因此首先您必须将 x 数据映射到此范围。然后使用递归关系生成切比雪夫多项式[http://en.wikipedia.org/wiki/Chebyshev_polynomials#Definition](http://en.wikipedia.org/wiki/Chebyshev_polynomials#Definition)

> T_(n+1)(x) = 2xT_(n)x - T_(n-1)(x)

如果`x`是您的横坐标并且`y`您的数据点生成您的观察矩阵`A`（这相当于单项式的 Vandermonde 矩阵），用于一次`n`多项式拟合，使用：

```
n = degree;
m = length(x);
%% Generate the z variable as a mapping of your x data range into the 
%% interval [-1,1]

z = ((x-min(x))-(max(x)-x))/(max(x)-min(x));

A(:,1) = ones(m,1);
if n > 1
   A(:,2) = z;
end
if n > 2
  for k = 3:n+1
     A(:,k) = 2*z.*A(:,k-1) - A(:,k-2);  %% recurrence relation
  end
end 
```

`b`那么您可以使用矩阵除法为您的解决方案参数（近似系数）求解线性系统

```
b = A \ y 
```

您必须记住的是，当您评估近似值时，您必须在评估之前将该值映射到区间 [-1,1]。这些系数仅在`x`您为近似值提供的初始范围内有效。您将无法评估初始`x`范围之外的近似值（在有效意义上）。如果你想这样做，你应该使用比你的数据更宽的间隔，这样当你使用变换将点内部映射到那个时，你的点将始终位于 [-1,1] 中，因此对近似值的评估是有效的.

我已经有一段时间没有使用 matlab 了，所以新版本实际上可能有一个内置函数可以为你完成所有这些工作。我上次使用它时不是这种情况，如果所有其他方法都失败了，上面将允许您使用切比雪夫基础（第一类）生成最小二乘多项式近似值

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T19:47:53.150

我认为您正在寻找[Chebfun](http://www.chebfun.org/)工具箱。除其他外，它使用 Chebychev 点和 Chebychev 插值重载[polyfit函数。](http://www.mathworks.com/matlabcentral/fileexchange/23972-chebfun/content/chebfun/examples/stats/html/LeastSquares.html)

除了上述内容，您始终可以自己编写代码。这并不难。编辑：参见 mathematician1975 的帖子 :)。EDIT2：更新了 chebfun 网站。

# sql - SQL - 转置间隔

> ID：11993723
> 
> 赞同：3
> 
> 时间：2012-08-16T18:59:55.233
> 
> 标签：sql, intervals, gaps-and-islands

我正在尝试解决一个 SQL 问题（甚至不知道这是否可能）。让我试着解释一下。

我们希望将一个表中基于日期（间隔）的记录“范围”转置到另一个表中，该范围将作为 FROM/TO 结构保存。

例如，我们有以下起始表结构：

```
ID DATE
100  11-08-2012
100  12-08-2012
100  13-08-2012
100  17-08-2012
100  18-08-2012
101  01-09-2012
... 
```

我们想要下表作为结果：

```
ID   FROM_DATE   TO_DATE
100  11-08-2012  13-08-2012
100  17-08-2012  18-08-2012
... 
```

间隔保存在 FROM/TO 字段中，在单个日期间隔的情况下，两个字段中保存相同的日期。

有没有办法使用 SQL 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:41:19.197

这在任何支持 ROW_NUMBER() 的数据库中使用纯 SQL（无过程或用户定义函数）是非常可行的。这是一个带有[sql fiddle](http://www.sqlfiddle.com/#!3/f84f2/3)的 SQLSERVER 2008 实现。

```
-- Create a virtual table with 2 rows that is used to convert a single row
-- into 2 rows when the range is only a single day
with events as (
  select 'start' event 
  union all 
  select 'stop' event
),
-- Sort the data by date, partioning by ID, and assign a row number
sorted_dates as ( 
  select id, 
         dt, 
         row_number() over(partition by id order by dt) sorted_rownum
    from t
),
-- Find the dates that begin and end the ranges. Assign new row numbers
-- so that the START and STOP row numbers are always consecutive.
-- Convert a date that both starts and ends the range into two rows.
pruned_dates as (
  select d1.id, 
         e.event, 
         d1.dt,
         row_number() over(partition by d1.id order by d1.sorted_rownum, e.event) pruned_rownum
    from sorted_dates d1
    -- Look for a previous date that is the same day or 1 day earlier
    left outer join sorted_dates d0
      on d1.id=d0.id
     and d1.sorted_rownum  = d0.sorted_rownum+1
     and datediff(d, d0.dt, d1.dt)<=1
    -- Look for a next date that is the same day or 1 day later.
    left outer join sorted_dates d2
      on d1.id=d2.id
     and d1.sorted_rownum = d2.sorted_rownum-1
     and datediff(d, d1.dt, d2.dt)<=1
    -- Identify the record as a START date if there does not exist a prior date
    -- that is the same date or 1 day earlier.
    -- Identify the record as a STOP date if there does not exist a subsequent
    -- date that is the same date or 1 day later.
    left outer join events e
      on (d0.id is null and e.event='start')
      or (d2.id is null and e.event='stop')
   -- Ignore records that have not been identified as START or STOP records.
   where e.event is not null
)
-- Pair the START and STOP records and report the results
select d1.id,
       d1.dt from_date,
       d2.dt to_date
  from pruned_dates d1
  join pruned_dates d2
    on d1.id=d2.id
   and d1.pruned_rownum = d2.pruned_rownum-1
 where d1.event='start'
; 
```

使用支持 LEAD() 和 LAG() 的数据库，该解决方案更简单、更高效。这是带有[sql fiddle](http://www.sqlfiddle.com/#!6/f84f2/11)的 SqlServer 2012 实现。

```
-- Create a virtual table with 2 rows that is used to convert a single row
-- into 2 rows when the range is only a single day
with events as(
  select 'start' event
  union all
  select 'stop' event
),
-- Use LAG() to get the previous date and LEAD() to get the next date.
-- The previous and/or next date may not exist, or it may be more than 
-- one day away.
dates as(
  select id,
         dt,
         lag(dt,1,'01/01/1900')  over(partition by id order by dt) prev_dt,
         lead(dt,1,'12/31/9999') over(partition by id order by dt) next_dt
    from t
),
-- Discard rows where both the previous and next dates are <= 1 day away.
-- Identify the remaining rows as either START or STOP.
-- Convert any date that both starts and stops a range into 2 rows.
-- For each remaining row, use LEAD() to get the subsequent remaining row.
-- At this point there are valid rows that have START in FROM and STOP in TO,
-- but also invalid rows that have STOP in FROM and NULL or START in TO. But
-- the invalid rows are required for LEAD() to give the correct value.
pruned_dates as(
  select id,
         event,
         dt from_date,
         lead(dt,1) over(partition by id order by dt, event) to_date
    from dates d
    join events e
      on (e.event='start' and datediff(d,prev_dt,dt)>1)
      or (e.event='stop'  and datediff(d,dt,next_dt)>1)
)
-- Filter out the unwanted rows, preserving the rows with START in FROM
-- and STOP in TO.
select id,
       from_date,
       to_date
  from pruned_dates
 where event='start' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:08:19.430

有可能的。您需要使用嵌套查询。

如果你会解释日期选择的逻辑，我可以试着给你一个更好的例子

例如：

```
SELECT A.ID, MIN(date) as FROM_DATE, max(date) as TO_DATE FROM ( select ID, DATE FROM sourceTable) group by A.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:14:03.323

嗯，这行得通，但它有点乱。

```
SELECT id, date1 AS 'StartDate', 
    MAX(CASE WHEN date < ISNULL(date2,'1/1/2050') THEN date END) AS 'EndDate'
FROM table1
JOIN (
    SELECT *
    FROM (
        SELECT ROW_NUMBER() OVER (ORDER BY t1.date) AS rn1, t1.id AS 'id1', t1.date AS 'date1' 
        FROM table1 t1
        LEFT OUTER JOIN table1 t2
            ON t1.id = t2.id AND DATEDIFF(dd,t1.date,t2.date) = -1
        WHERE t2.date IS NULL
        ) AS sub1

    LEFT OUTER JOIN (
        SELECT ROW_NUMBER() OVER (ORDER BY t1.date) AS rn2, t1.id AS 'id2', t1.date AS 'date2'
        FROM table1 t1
        LEFT OUTER JOIN table1 t2
            ON t1.id = t2.id AND DATEDIFF(dd,t1.date,t2.date) = -1
        WHERE t2.date IS NULL
        ) AS sub2 ON id1 = id2 AND rn1 = rn2 - 1

    ) AS sub ON id=id1
GROUP BY id, date1 
```

基本上，我将表格加入到自身中，并且只获取没有对应的先前连续日期的日期。这给了我每个范围的开始日期。然后我将该查询加入自身，但加入行号 - 1 以将第二个日期偏移一个，因此每个开始日期都与下一个开始日期在一行中。最后，我发现每个开始日期小于下一个开始日期的最大日期。

这是创建测试表的代码。您需要在其中放入一些数据：

```
CREATE TABLE [dbo].[table1](
    [pk] [int] IDENTITY(1,1) NOT NULL,
    [id] [varchar](10) NULL,
    [date] [datetime] NULL
) ON [PRIMARY] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T21:26:42.550

I assume SQL Server.

```
with 
    pairs(id,start,finish) as (
        select
            id1.Id as ID,id1.[Date] as start,id2.date as finish 
        from
            IdDate as id1 
            inner join IdDate id2 
            on id1.id=id2.id and DATEADD(DAY,1,id1.Date)=id2.date),
    starters(id,start) as (
        select
            pair1.id,pair1.start
        from
            pairs as pair1
        where
            pair1.start not in (select finish from pairs)),
    finishers(id,finish) as (
        select
            pair1.id,pair1.finish
        from 
            pairs as pair1
        where
            pair1.finish not in (select start from pairs))
select 
    s.id,s.start,finishers.finish 
from 
    starters as s, finishers 
where 
    finishers.finish > s.start and 
    (finishers.finish < (select MIN(start) from starters where start>s.start) or 
     (s.start=(select max(start) from starters) and 
      finishers.finish > (select MAX(start) from starters where start=s.start))) 
```

Input

```
100 2012-08-11 00:00:00.000
100 2012-08-12 00:00:00.000
100 2012-08-13 00:00:00.000
100 2012-08-17 00:00:00.000
100 2012-08-18 00:00:00.000
100 2012-09-01 00:00:00.000
100 2012-09-02 00:00:00.000
100 2012-09-03 00:00:00.000
100 2012-09-04 00:00:00.000
100 2012-09-05 00:00:00.000 
```

Output

```
id  start   finish
100 2012-08-11 00:00:00.000 2012-08-13 00:00:00.000
100 2012-08-17 00:00:00.000 2012-08-18 00:00:00.000
100 2012-09-01 00:00:00.000 2012-09-05 00:00:00.000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T19:05:58.597

我认为这不可能直接在查询中实现。您需要用高级语言编写一些代码或为其编写程序。

在这种情况下，您只需要简单地获取特定 ID 的行，按日期（？）对它们进行排序并获取结果的第一行和最后一行。您现在可以填充`FROM_DATE`并`TO_DATE`使用此逻辑。

# javascript - 从 DOM 中移除上一次点击

> ID：11993727
> 
> 赞同：0
> 
> 时间：2012-08-16T19:00:11.167
> 
> 标签：javascript, jquery

我有一个 5 dt 标签，带有不同的 id 和 span 标签。每个跨度标签都有相同的图像。例如：

我在每个 dt 下都有一个保存图标。当用户点击它时 - 它变为非保存图标。

现在，如果我在第一个 dt 上并单击保存图标，它会更改为非保存，那很好。当我转到第二个 dt 并单击它的保存图标时，它会更改为非保存图标，它也可以，但我需要删除第一个 dt 中的非保存图标并更改为保存图标。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:43:37.443

我不知道您的代码是什么样的，但也许以下内容会对您有所帮助： HTML：

```
<table>
  <tr id="buttons">
    <td></td><td></td><td></td>
  </tr>
</table> 
```

CSS：

```
.safe {
  background: url(../safe.jpg) no-repeat 0 0;
}
.non-safe {
  background: url(../unsafe.jpg) no-repeat 0 0;
} 
```

JavaScript：

```
var buttons = document.getElementById("buttons").getElementsByTagName("td"),
    i = 0,
    len = buttons.length;

for ( ; i < len; i++) {
  buttons[i].addEventListener("click", function() {
    for (i = 0; i < len; i++) {
      var button = buttons[i];
      if (button === this) { this.className = "safe";
      } else { button.className = "non-safe"; }
    }
  }, false);
} 
```

您还可以搜索“事件委托”以获得更高级的技术：

为 td 元素的共同祖先元素添加一个监听器，而不是每个添加一个监听器。

# php - $_GET 不工作

> ID：11993730
> 
> 赞同：7
> 
> 时间：2012-08-16T19:00:37.500
> 
> 标签：php

我无法让我的 $_GET 工作。它适用于我在服务器上拥有的所有其他站点，但不适用于此站点。该网站是 osCommerce，我正在运行 PHP 5。

```
if (($HTTP_GET_VARS['image'] ==0) && ($products['products_image_lrg'] != '')) {
    //do something
}; 
```

我也试过

```
echo $_GET['image'] 
```

它仍然无法正常工作。它只是给了我未定义的索引。

URL 如下所示：`/blah.php?image=2`

我已将页面剥离到裸露的仍然无法正常工作，请参见下文

```
<?php

    echo $HTTP_GET_VARS['image'];
    echo $_GET["image"];
    echo "<br />";
?> 
```

我明白了

```
Notice: Undefined variable: HTTP_GET_VARS in \popup_image.php on line 3 Notice: Undefined index: image in \popup_image.php on line 4 
```

我一直在做更多的挖掘工作，它看起来像是 oscommerce 中的一个问题，不允许它读取

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T22:14:13.607

您忘记在您的 mod 重写规则中添加[QSA（查询字符串附加）](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)标志。如果没有这个标志，在重写之前添加到您的 url 的任何查询字符串都将被丢弃，以支持添加到重写规则的新查询字符串，尽管它仍然会在浏览器顶部的栏中可见。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T19:14:29.620

1.  以下内容*应*适用于 PHP 5.x：

    *   HTTP： `http://myserver/blah.php?image=2`

    *   PHP（blah.php？）：

        if (isset($_GET['image'])) { $idx=$_GET['image']; // 应该是“2” }

2.  我假设您正在尝试从“blah.php”访问“$_GET[]”。如果没有，您需要将 URL 传递给您正在调用的页面。

3.  `print_r($_GET)`或者`var_dump($_GET)`是个好主意。碰撞也是如此`error_reporting(NNN)`。

4.  一个*更好*的主意是创建一个虚拟页面 phpinfo.php：

    *   phpinfo.php：

        `<?php phpinfo (); ?>`

    *   http查询：

        `http://myserver/phpinfo.php?image=2`

    问：phpquery() 会在任何地方显示“图像”URL 吗？？？

5.  最后，这是一个类似的案例，结果证明是 PHP 安装问题：

    *   [http://social.expression.microsoft.com/Forums/en-IE/web/thread/4a36ab6f-98c7-4a29-b9d7-06fd79c4b0c6](http://social.expression.microsoft.com/Forums/en-IE/web/thread/4a36ab6f-98c7-4a29-b9d7-06fd79c4b0c6)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T19:03:15.597

首先，尝试查看 $_GET 数组的完整打印结果：

```
print_r($_GET); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:30:00.087

你的“图像”是一个文件吗？如果是这样，那么它应该在`$_FILES`不`$_GET`...

做`print_r($_GET);`和`print_r($_FILES);`

你看到了什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T07:18:37.120

也请检查您的 .htaccess，也许某些重写规则正在破坏您的 GET 参数。见[https://stackoverflow.com/a/6656450/216084](https://stackoverflow.com/a/6656450/216084)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-16T12:35:14.570

这是旧的，但我只是偶然发现了同样的问题并找到了一个简单的解决方法。我使用的是一个简短的 php 标签 ( `<?....?>`)。一旦我将其更改为`<?php....?>`，我的 $_GET 又开始工作了。我不知道为什么只有这个受到短标签的影响，但它已修复。希望这对其他人有帮助...

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-16T19:30:52.307

我总是倾向于使用类似的东西：

```
$image = isset($_GET['image']) ? $_GET['image'] : FALSE; 
```

# ios - 从 UISlider 保存数据

> ID：11993737
> 
> 赞同：0
> 
> 时间：2012-08-16T19:01:01.217
> 
> 标签：ios, uislider

我有一个小费计算器，用户可以根据他们的满意度自定义设置百分比小费。例如 3 部分 uisegmented 控制拆分具有良好、良好和公平的满意度。他们之前设置了他们的自定义小费百分比，但我不知道如何在他们下次打开应用程序时保存该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:07:55.327

最简单的方法是使用[NSUserDefaults](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)。然后保存一个值，你只需要写

```
[[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithFloat:percentage] forKey:@"percentage"]; 
```

然后要取回值，您只需要编写

```
float percentage = [[[NSUserDefaults standardUserDefaults] valueForKey:@"percentage"] floatValue]; 
```

# xml - 如何从 Excel 表中解析层次结构 XML

> ID：11993742
> 
> 赞同：0
> 
> 时间：2012-08-16T19:01:20.903
> 
> 标签：xml, excel-interop, xmltextwriter

我正在尝试使用 C# 和 XmlTextWriter 解析下面提供的 XML 文件

例子：

```
<ChessBoard>
<King>
    <Bishop>
        <Soldier/>
    </Bishop>
</King>
<Queen>
    <Tower/>
</Queen>
</ChessBoard> 
```

来自 Excel 工作簿，其中每个元素都包含一张幻灯片，第一列是其子元素的列表。如果（何时）解释不清楚，则链接到示例 Excel 工作簿:)：https: [//www.yousendit.com/download/TEhYc0x3NDQrV3h1a3NUQw](https://www.yousendit.com/download/TEhYc0x3NDQrV3h1a3NUQw)

我事先不知道用户将制作多少张纸或元素/子项的数量，因此解析需要是动态的。

如果有人能指出我正确的方向，那将不胜感激。如果需要，如果有人想将其用作起点，我可以提供到目前为止的（非工作）代码。

提前致谢！

编辑——到目前为止的代码

```
 Excel.Application xlApp;
        xlApp = new Excel.Application();
        Excel.Workbook xlWorkBook = null;
        Excel.Worksheet xlWorkSheet;
        Excel.Range range;
        try
        {

            string str = string.Empty;
            xlWorkBook = xlApp.Workbooks.Open(Excel_location + @"\Tree.xls",
             Type.Missing, Type.Missing, Type.Missing, Type.Missing,
             Type.Missing, Type.Missing, Type.Missing, Type.Missing,
             Type.Missing, Type.Missing, Type.Missing, Type.Missing,
             Type.Missing, Type.Missing);

            using (XmlTextWriter writer = new XmlTextWriter(@"Tree.xml", Encoding.UTF8))
            {

                int rCnt = 0;// rCnt = row count
                writer.WriteStartDocument();

                Excel.Sheets sheets = xlWorkBook.Worksheets;
                Excel.Range sheetrange = xlWorkSheet.UsedRange;

                List<Excel.Worksheet> Sheets = new List<Excel.Worksheet>();
                foreach (Excel.Worksheet s in xlWorkBook.Worksheets)
                {
                    Sheets.Add(s);
                }

                 bool first = true;
                 foreach (Excel.Worksheet s in Sheets)
                {
                    if (first)
                    {
                        first = false;
                    sheetrange = s.UsedRange;
                    writer.WriteStartElement(s.Name);
                    for (rCnt = 1; rCnt <= sheetrange.Rows.Count; rCnt++)
                    {
                        string root = (string)(sheetrange.Cells[rCnt, 1] as Excel.Range).Value2.ToString();
                        writer.WriteStartElement(root);
                        foreach (Excel.Worksheet childsheet in Sheets)
                        {
                            if (childsheet.Name == root)
                            {

                                Excel.Range childsheetrange = childsheet.UsedRange;
                                for (int crCnt = 1; crCnt <= childsheetrange.Rows.Count; crCnt++)
                                {
                                    str = (string)(childsheetrange.Cells[crCnt, 1] as Excel.Range).Value2.ToString();
                                    writer.WriteStartElement(str);
                                    foreach (Excel.Worksheet child2sheet in Sheets)
                                    {
                                        if (child2sheet.Name == str)
                                        {
                                            Excel.Range child2sheetrange = child2sheet.UsedRange;
                                            for (int ccrCnt = 1; ccrCnt <= child2sheetrange.Rows.Count; ccrCnt++)
                                            {
                                                string str2 = (string)(child2sheetrange.Cells[ccrCnt, 1] as Excel.Range).Value2.ToString();
                                                writer.WriteStartElement(str2);
                                                writer.WriteEndElement();
                                            }
                                        }
                                    }

                                    writer.WriteEndElement();
                                }

                            }
                        }
                        writer.WriteEndElement();
                    }
                    writer.WriteEndElement();
                }
                }

            }
            xlWorkBook.Close(false, Excel_location + @"\Tree.xls", null);
            xlApp.Quit();
        }

        catch (Exception)
        {
            xlWorkBook.Close(false, Excel_location + @"\Tree.xls", null);
            xlApp.Quit();
            throw;
        } 
```

很明显，上面的代码提出了一个“小”问题；当有超过 2 个子项时，事情将无法正常工作：D 当然我可以添加 25 个 foreach 循环，但我想要一个更复杂的解决方案.. 那么，如何更改代码以便它可以使用任意数字子元素？

# soap - 如何解码这个字符串？

> ID：11993745
> 
> 赞同：-1
> 
> 时间：2012-08-16T19:01:46.307
> 
> 标签：soap, encoding, utf-8

我正在使用 SOAP，并且收到了以下 XML 值。

```
<Name>&#xD0;&#x98;&#xD0;&#xBC;&#xD1;&#x8F;&#xD0;&#x98;&#xD0;&#xBC;&#xD1;&#x8F;&#xD0;&#x98;&#xD0;&#xBC;&#xD1;&#x8F;&#xD0;&#x98;&#xD0;&#xBC;&#xD1;&#x8F; &#xD0;&#x98;&#xD0;&#xBC;&#xD1;&#x8F;&#xD0;&#x98;&#xD0;&#xBC;&#xD1;&#x8F;&#xD0;&#x98;&#xD0;&#xBC;&#xD1;&#x8F;&#xD0;&#x98;&#xD0;&#xBC;&#xD1;&#x8F;</Name> 
```

发件人告诉我这是俄语，但我不知道如何解码。当我在 .net 中对其进行解码时，我得到的只是“？？？？？？”

这甚至是一个有效的编码字符串吗？这叫什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:21:15.367

这对我来说看起来像 html-entities。要对其进行解码，您需要源编码。例如 KOI8-R

你可以试试这个工具： http: [//2cyr.com/decode/](http://2cyr.com/decode/?lang=en) ?lang=en 这是一个通用的在线西里尔语解码器

# c# - 用 json 数据填充下拉列表（c#）

> ID：11993748
> 
> 赞同：-4
> 
> 时间：2012-08-16T19:01:54.200
> 
> 标签：c#, json, string, foreach

```
hi its my json string. 
```

> {"state":true,"datas":{"5577":"Adana","5548":"Adapazari","5568":"Afyon","5572":"Ahmetli","5638":"Ak \u00e7aabat","5653":"Aksaray","5521":"Akseki","5564":"Ak\u015fehir","5527":"Alanya","5729":"Alibeyk\u00f6y","5536 ":"Anamur","5510":"安卡拉","5535":"安塔利亚","5563":"Argithani","5713":"Ata\u015fehir","5727":"Ata\u015fehir ( 后宫)","5524":"Avsallar","5606":"Aydin","5538":"Aydincik","5683":"Balikesir","5569":"Banaz","5719":"Bandirma","5640":"Be\u015fikd\u00fcz\u00fc","5605":"Bey\u015fehir","5633":"Bilecik","5743":"博德鲁姆","5550 ":"Bolu","5584":"Bolvadin","5590":"Bor","5581":"Bozh\u00fcy\u00fck","5537":"Bozyazi","5645":"Blancak", "5579":"布尔萨","5511":"Cihanbeyli","5585":"\u00c7akmak","5614":"\u00c7ar\u015famba","5567":"\u00c7ay","5737":" \u00c7erkezk\u00f6y","5658":"\u00c7ifteler","5533":"\u00c7olakli","5736":"\u00c7orlu","5609":"\u00c7orum","5708":"Dazkiri","5646":"Delice","5543":"Demirta\u015f","5596":"Denizli","5742":"Didim","5597":"Dinar"," 5671":"D\u00f6rtyol","5712":"D\u00fczi\u00e7i","5599":"E\u011firdir","5648":"Elmada\u011f","5583":"Emirda\u011f" ,"5555":"Erdemli","5558":"Ere\u011fli","5560":"Ermenek","5670":"Erzin","5728":"Esenler","5582":"Eski\ u015fehir","5644":"Espiye","5652":"E\u015fmekaya","5641":"Eynesil","5617":"Fatsa","5517":"Federasyon","5709":"加济安泰普","5542":"Gazipa\u015fa","5546":"Gebze","5600":"Gelendost","5691":"Gemlik","5619":"Giresun"," 5665":"G\u00f6lba\u015fi","5642":"G\u00f6rele","5539":"G\u00fclnar","5738":"G\u00fcneyyurt","5622":"后宫"," 5680":"Hatay","5611":"Havza","5601":"H\u00fcy\u00fckyolu","5562":"Ilgin","5598":"Isparta","5580":"\u0130neg \u00f6l","5673":"\u0130skenderun","5545":"\u0130stanbul","5576":"\u0130zmir","5547":"\u0130zmit","5528":"K.karabekir","5731":"K.mara\u015f","5720":"Karacabey","5529":"Karaman","5559":"Karapinar","5612":"Kavak"," 5549":"Kayna\u015fli","5593":"Kayseri","5692":"Kemalpa\u015fa","5664":"Kemer","5602":"Kireli","5607":"Kirikkale" ,"5554":"Kizkalesi","5525":"Konakli","5508":"Konya","5573":"Kula","5514":"Kulu","5515":"Kulu makasi", "5701":"Ku\u015fadasi","5632":"K\u00fctahya","5520":"Maden","5544":"Mahmutlar","5523":"Manavgat","5557":"Mersin","5610":"Merzifon","5760":"Milas","5761":"Mu\u011fla","5522":"Murti\u00e7i","5540" :"Mut","5594":"Nazilli","5654":"Nev\u015fehir","5591":"Ni\u011fde","5710":"Nurda\u011fi","5618":"Ordu" ,"5688":"Orhangazi","5711":"Osmaniye","5634":"Pamukova","5672":"Payas","5588":"Pozanti","5574":"Salihli"," 5613":"Samsun","5631":"Sandikli","5703":"Sel\u00e7uk","5534":"Serik","5541":"Sertavul","5518":"Seydi\u015fehir","5531":"Side","5551":"Silifke","5744":"S\u00f6ke","5565":"Sultanda\u011fi","5651":" Sultanhani","5608":"Sungurlu","5552":"Susano\u011flu","5689":"Susurluk","5621":"\u015e.karaa\u011fa\u00e7","5578":"Tarsus ","5513":"Tav\u015fan\u00e7ali","5739":"Teke​​li","5615":"Terme","5643":"Tirebolu","5676":"Topbo\u011fazi","5620 ":"特拉布宗","5575":"Turgutlu","5759":"Turgutreis","5587":"Uluki\u015fla","5570":"U\u015fak","5616":"\u00dcnye","5639":"Vakfikebir","5687":"Yalova","5762":"Yata\u011fan","5512":"Yeniceoba makasi","5592":"Ye\ u015filhisar","5589":"曾根"}}

我如何添加项目，下拉列表

```
foreach (XXXX in YYYY)
            {
                DropDownList1.Items.Add(new ListItem("Adana", "5577"));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:10:35.657

使用[Json.Net](http://json.codeplex.com/)

```
var response =  JsonConvert.DeserializeObject<Response>(json);
foreach(var item in response.datas)
{
    DropDownList1.Items.Add(new ListItem(item.Value, item.Key));
}

public class Response
{
    public bool state;
    public Dictionary<string, string> datas;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:08:17.053

您必须首先将 json 反序列化为字典 [http://www.codeproject.com/Tips/79435/Deserialize-JSON-with-C](http://www.codeproject.com/Tips/79435/Deserialize-JSON-with-C) ，然后在字典中迭代以填充您的 DropDownList1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:05:44.607

这应该有助于：

[http://www.hanselman.com/blog/NuGetPackageOfTheWeek4DeserializingJSONWithJsonNET.aspx](http://www.hanselman.com/blog/NuGetPackageOfTheWeek4DeserializingJSONWithJsonNET.aspx)

反序列化 json 数据，然后对其进行迭代。

# actionscript-3 - 从外部 swf 获取 MovieClip 的命名子项

> ID：11993749
> 
> 赞同：2
> 
> 时间：2012-08-16T19:01:54.410
> 
> 标签：actionscript-3, flash, variables, loading, hierarchy

我正在做一个 Flash 项目，其中我有一个带有一堆艺术资产的 swf。但是，它们不在舞台上，只是在库中，并链接到我编写的代码。

我有一个想要实例化的类，但是在构造它时我不断收到一个引用错误。

这是 swf/fla 库的设置方式

```
[MovieClip]ButtonPopup, Linkage:com.packagename.ButtonPopup
[MovieClip]popup_btn, Linkage: none 
```

popup_btn 是 Popup 的子代，在 Flash CS5.5 IDE 中恰当地命名为 _popup_btn（带有由 Flash Builder 生成的名为 popup_btn 的 getter）。这是弹出类：

```
package com.packagename.ButtonPopup {

    public class ButtonPopup extends Popup {
        public Popup() {
            addClickListeners(popup_btn);
        }

        protected function get popup_btn():MovieClip {
            return this["_popup_btn"];
        }
    }
}

package com.packagename.Popup {
    public class Popup extends MovieClip {
        public Popup() {

        }

        protected function addClickListeners(mc:MovieClip) {
            //add click listeners
        }
    }
} 
```

我的主要 swf 看起来像这样：

```
public MainClass() {
    var loader:Loader = new Loader();
    loader.load(new URLRequest("assets.swf"));
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadArtComplete);
}

function loadArtComplete (e:Event):void {
    var popup_class:Class = e.target.applicationDomain.getDefinition("com.packagename::Popup");
    var popup_mc:MovieClip = new popup_class() as MovieClip;

    addChild(popup_mc);
} 
```

可悲的是，我收到一条错误消息`var popup_mc:MovieClip = new popup_class() as MovieClip`：

```
ReferenceError: Error #1056: Cannot create property _popup_btn on com.packagename.Popup
    at flash.display::Sprite/constructChildren()
    at flash.display::Sprite()
    at flash.display::MovieClip()
    at com.packageName.Popup() [file path]
    at com.packageName.MainClass/loadArtComplete() [filepath] 
```

如果我在 Flash IDE 中保留 popup_btn 未命名，我不会收到错误消息，但是我无法引用 MovieClip（用于添加点击侦听器等），所以这是一个不可行的解决方案。

有人对在这里做什么有任何想法吗？我可以不实例化一个“复杂”的影片剪辑，而是必须一个接一个地实例化每个子影片剪辑吗？

编辑：经过更多测试，看起来它与问题类不是直接从 MovieClip 继承，而是从另一个类（从 MovieClip 继承）这一事实有关。我更新了源代码以反映这一点。我仍然不知道是不是这样（如果不是从 MovieClip 继承会导致问题）。但我们会看到的。

谢谢，
-Esa

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:10:48.277

有两种解决方案：将您的课程设置为动态：

```
public dynamic class ButtonPopup extends Popup 
```

那么你就不会出现flash错误

或者

您需要在 ButtonPopup 类中创建一个名为“_popup_btn”（使用 SimpleButton 或 MovieClip 键入）的公共 var，然后 Flash 将使用您的 popup_btn 实例设置此 var。

# jquery - 在选择元素中使用箭头键更改事件

> ID：11993751
> 
> 赞同：1
> 
> 时间：2012-08-16T19:02:00.257
> 
> 标签：jquery, html

在选择元素（组合）中，当元素失去焦点时执行更改事件，是否可以在使用箭头键更改组合时执行更改事件？

我尝试在所有组合中生活：

```
$('select').live('keyup',function(e) {
  if ([33, 34, 35, 36, 37, 38, 39, 40].indexOf(e.keyCode) != -1)
  {                 
        ///obj.blur();
        obj.change();
        ///obj.focus();     
  }
}); 
```

使用 firefox 工作，但在 chromium 中使用箭头键启动两个更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:21:05.227

当使用键更改值时，您同时触发了`change`事件和事件，并且由于事件触发了事件，因此该事件被触发两次，一次来自元素的原始更改，一次来自触发事件。`keyup``select``keyup``change``select``change``keyup`

为了避免触发它两次，你可以检查事件`originalEvent`或类似的东西，但简单的解决方案是使用一个保持足够长的标志，不会两次执行相同的东西：

```
var flag=true;

$('select').on({
    keyup: function(e){
        flag=false;
        if ([33, 34, 35, 36, 37, 38, 39, 40].indexOf(e.which) !=-1) $(this).trigger('change');
        setTimeout(function() {flag=true}, 200);
    },
    change: function(e) {
        if (flag) {
            //do stuff here
        }
    }
}); 
```

请注意，这`Array.indexOf()`不是跨浏览器！

# javascript - iPad“复制”事件处理程序

> ID：11993752
> 
> 赞同：3
> 
> 时间：2012-08-16T19:02:06.650
> 
> 标签：javascript, iphone, ipad, jquery-mobile, event-handling

无论如何，我们可以将事件处理程序附加到`copy`iPad/iPhone 中的事件吗？

![在此处输入图像描述](../Images/a6bdc190fee2c0d459a7a5ee3566295c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:28:39.953

我尝试`oncopy`了在几乎所有标准浏览器中都有效的事件。幸运的是它也可以在 iPad 上运行。

```
//Since there is no "copy" method exposed by jQuery I am using "on" method
$(document).on('copy', function(){
    //Copy event triggered
}); 
```

同样`cut`，`paste`事件也有效。

注意：`document`如果您只想处理一个特定容器的事件，即使这样也可以。

```
$('containerSelector').on('copy', function(){

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T09:17:16.887

根据[规范（链接）](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)，iOS 中不支持复制/粘贴事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T22:16:34.580

来晚了，但我看到了两种方法：

*   如果监听输入的复制事件，只需向（[http://www.w3schools.com/jsref/event_oncopy.asp](http://www.w3schools.com/jsref/event_oncopy.asp)）添加一个`oncopy`属性`<input>`

*   如果在任何 DOM 元素（可以是整体`document`，但任何其他 DOM 元素，包括`input`）上监听复制事件，则将事件监听器添加到“复制”：

    ```
    document.addEventListener("copy", callback); 
    ```

# java - 尝试设置 Web 服务客户端时出现“前缀为空”错误

> ID：11993758
> 
> 赞同：0
> 
> 时间：2012-08-16T19:02:36.007
> 
> 标签：java, web-services, wsdl, rad, qnames

我有一个 WSDL 和一些用于生成 JAX-WS Web 服务客户端的模式文件。当我尝试获取客户端的实例时，我得到了这个堆栈跟踪：

```
原因：java.lang.IllegalArgumentException：指定的前缀为空。
    在 com.ibm.xml.xlxp.api.stax.msg.StAXMessageProvider.throwIllegalArgumentException（StAXMessageProvider.java:42）
    在 com.ibm.xml.xlxp.api.stax.XMLStreamReaderImpl.getNamespaceURI(XMLStreamReaderImpl.java:721)
    在 com.ibm.xml.xlxp.api.stax.XMLInputFactoryImpl$XMLStreamReaderProxy.getNamespaceURI(XMLInputFactoryImpl.java:212)
    在 com.sun.xml.internal.ws.util.xml.XMLStreamReaderFilter.getNamespaceURI(XMLStreamReaderFilter.java:242)
    在 com.sun.xml.internal.ws.wsdl.parser.ParserUtil.getQName(ParserUtil.java:78)
    在 com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parsePortTypeOperationInput(RuntimeWSDLParser.java:721)
    在 com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parsePortTypeOperation(RuntimeWSDLParser.java:694)
    在 com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parsePortType(RuntimeWSDLParser.java:668)
    在 com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parseWSDL(RuntimeWSDLParser.java:305)
    在 com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:136)
    在 com.sun.xml.internal.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:227)
    在 com.sun.xml.internal.ws.client.WSServiceDelegate.(WSServiceDelegate.java:190)
    在 com.sun.xml.internal.ws.client.WSServiceDelegate.(WSServiceDelegate.java:160)
    在 com.sun.xml.internal.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:92)
    在 javax.xml.ws.Service.(Service.java:67)
...

```

在我看来，Service 类试图将 WSDL 解析为其初始化的一部分，然后由于某些前缀为空而失败。该行`at com.sun.xml.internal.ws.wsdl.parser.ParserUtil.getQName(ParserUtil.java:78)`表明它在解析 QName 时遇到问题。创建服务时，QName 设置如下：

```
new QName("http://www.mycompany.ca/some/schema/MyService", "MyService") 
```

错误信息虽然不是很清楚。之前是否需要前缀`"MyService"`或者是否需要对 WSDL 进行更改（我不是 WSDL 所有者，因此很难将更改推送给其他团队）。

（WAS 7.0 的环境是 RAD 7.5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:05:11.617

如果您检查堆栈跟踪的详细信息，您会注意到问题出在 WSDL 中的端口类型操作输入的名称上：

```
<wsdl:definitions .... > 
  <wsdl:portType .... >
    <wsdl:operation>
       <wsdl:input message="qname"/>    <--- your problem is here
    </wsdl:operation>
  </wsdl:portType >
</wsdl:definitions> 
```

# salesforce - Visualforce 中的 Apex SOQL 子查询

> ID：11993760
> 
> 赞同：3
> 
> 时间：2012-08-16T19:02:45.127
> 
> 标签：salesforce, apex-code, visualforce, soql, force.com

我正在查看在 Visualforce 页面中显示子查询 SOQL 查询。这是我的 SOQL 表达式。

```
public ApexPages.StandardSetController setCon {
        get {
            if(setCon == null) {
                setCon = new ApexPages.StandardSetController(Database.getQueryLocator(
                    [SELECT Contact.Id, Opportunity.Id, Contact.FirstName, Contact.LastName, Contact.Phone,Contact.Account.Name, Contact.Email,Contact.Last_Contacted__c,Contact.Membership_Type__c,Opportunity.Call_Disposition__c, Opportunity.Sales_Stage__c,Opportunity.Name, Opportunity.CloseDate, Opportunity.StageName, Opportunity.CreatedDate FROM OpportunityContactRole where Opportunity.OwnerId=:Userinfo.getUserId()]));
            }
            return setCon;
        }
        set;
    } 
```

它收到一条消息“标准集控制器不支持 OpportunityContactRole”。所以我试图从帐户中获取机会和联系信息......

所以我的 SOQL 查询更改为：

```
SELECT Name, (SELECT Name, Phone, Email, Last_Contacted__c, Contact.Membership_Type__c FROM Account.Contacts) , (SELECT Call_Disposition__c, StageName, CreatedDate, CloseDate FROM Account.Opportunities) FROM Account where Id=:UserInfo.getUserId()]) 
```

但现在在我的 Visualforce 页面中，我无法访问子查询字段：

```
<apex:page controller="SalesRepPageControllerV3" tabstyle="contact" sidebar="false" showChat="true" >
   <apex:form id="theForm">
    <apex:sectionHeader title="Sales Rep Page for {!$User.FirstName}"/>
      <apex:pageBlock id="innerblock" mode="edit"> 
         <apex:pageMessages />

        <apex:pageBlock id="innerblock">  
        <apex:pageBlockSection id="pagesection">  
            <apex:pageBlockTable value="{!ContactOpportunity}" var="co" id="pageblocktable">
              <apex:column headerValue="Created Date" value="{!co.Opportunity.CreatedDate}"/>  
              <apex:column headerValue="First Name" value="{!co.Contact.FirstName}"/>  
              <apex:column headerValue="First Name" value="{!co.Contact.LastName}"/>
              <apex:column headerValue="Phone" value="{!co.Contact.Phone}"/>
              <apex:column headerValue="Account Name" value="{!co.Contact.Account.Name}"/>
              <apex:column headerValue="Email" value="{!co.Contact.Email}"/>
              <apex:column headerValue="Last Contacted" value="{!co.Contact.Last_Contacted__c}">
              </apex:column>

                <apex:column headerValue="Membership Type" value="{!co.Contact.Membership_Type__c}"/>
                <apex:column headerValue="Call Disposition">
                    <apex:inputField value="{!co.Opportunity.Call_Disposition__c}"/>
                </apex:column>
                <apex:column headerValue="Sales Stage">
                    <apex:inputField value="{!co.Opportunity.Sales_Stage__c}"/>
                </apex:column>         
            </apex:pageBlockTable>
           </apex:pageBlockSection>

        </apex:pageBlock>
        <apex:pageBlockButtons >
           <apex:commandButton value="Save" action="{!save}" reRender="pageblocktable"/>
           <apex:commandButton value="Cancel" action="{!cancel}"  reRender="pageblocktable"/>
        </apex:pageBlockButtons>  
     </apex:pageBlock>
     <apex:panelGrid columns="2">
              <apex:commandLink action="{!previous}">Previous</apex:commandlink>
              <apex:commandLink action="{!next}">Next</apex:commandlink>
    </apex:panelGrid>
    </apex:form>   
</apex:page> 
```

它不了解 co.Opportunity 和 co.Contact，因为它不是帐户。如果我将其更改为 co.Opportunities 或 co.Contacts 它是一个 Arraylist 只能通过重复访问。

apex:repeat 的问题是它没有我需要排序的列标题值。如果有人可以帮助，请告诉我如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:54:39.760

严重编辑...

我认为您不能为此使用标准设置控制器。使用自定义控制器，我可以获得当前用户的机会联系人的综合列表：

![在此处输入图像描述](../Images/2867f9481f6d358ce785c5dcbad781e3.png)

页：

```
<apex:page controller="TestQueryController">
  <apex:form >
    <apex:pageBlock >
        <apex:pageBlockTable value="{!opportunities}" var="co">
            <apex:column value="{!co.Opportunity.CreatedDate}"/>
            <apex:column value="{!co.Contact.FirstName}"/>
            <apex:column value="{!co.Contact.LastName}"/>
            <apex:column headerValue="Stage">
                <apex:inputField value="{!co.Opportunity.StageName}"/>
            </apex:column> 
        </apex:pageBlockTable>
    </apex:pageBlock>
  </Apex:form>
</apex:page> 
```

控制器：

```
public with sharing class TestQueryController {
    List<OpportunityContactRole> myOCR;

    public List<OpportunityContactRole> getOpportunities() {
        if (myOCR == null) {
            myOCR = [SELECT Contact.Id, Opportunity.Id, Contact.FirstName, Contact.LastName, Contact.Phone,
                Contact.Account.Name, Contact.Email, Opportunity.Name, 
                Opportunity.CloseDate, Opportunity.StageName, Opportunity.CreatedDate 
                FROM OpportunityContactRole where Opportunity.OwnerId=:Userinfo.getUserId()];
        }
        return myOCR;
    }
} 
```

您将需要在您的自定义字段中进行替换。如果您需要排序，[这篇博](http://salesforcesource.blogspot.com/2008/11/adding-sorting-capability-to.html)文提供了一种方法，尽管您可以使用包装类和 Apex [Comparable](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_comparable.htm#apex_comparable)接口避免重复访问数据库。最后，您需要实现自己的保存逻辑。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:27:26.920

您拥有的是每个嵌套查询的内部表。pageblocktable 只能遍历单个表。

按照下面的代码示例。在 Account 列表中选择您的帐户，然后使用一个 pageblocktable 和两个嵌套的 pageblocktable 遍历列表。

控制器

```
public List<Account> _accounts;
public list<Account> Accounts { 
    get { 
        if (_accounts == null) { 
            _accounts = [SELECT Name, (SELECT Name, Phone, Email, Last_Contacted__c, Contact.Membership_Type__c FROM Account.Contacts) , (SELECT Call_Disposition__c, StageName, CreatedDate, CloseDate FROM Account.Opportunities) FROM Account where Id=:UserInfo.getUserId()];
        }
        return _accounts;
    }
} 
```

视觉力量

```
<apex:pageBlockTable value="{!Accounts}" var="acc" id="pageblocktable">

    <apex:column headerValue="Account Name" value="{!acc.Name}"/>  

    <apex:pageBlockTable value="{!acc.Opportunities}" var="ops" id="opportunities">
        <apex:column headerValue="Created Date" value="{!ops.CreatedDate}"/>        
        <apex:column headerValue="Call Disposition">
            <apex:inputField value="{!ops.Call_Disposition__c}"/>
        </apex:column>
        <apex:column headerValue="Sales Stage">
            <apex:inputField value="{!ops.Sales_Stage__c}"/>
        </apex:column>         
    </apex:pageBlockTable>
    <apex:pageBlockTable value="{!acc.Contacts}" var="con" id="contacts">
        <apex:column headerValue="First Name" value="{!con.FirstName}"/>  
        <apex:column headerValue="First Name" value="{!con.LastName}"/>
        <apex:column headerValue="Phone" value="{!con.Phone}"/>
        <apex:column headerValue="Account Name" value="{!con.Account.Name}"/>
        <apex:column headerValue="Email" value="{!con.Email}"/>
        <apex:column headerValue="Last Contacted" value="{!con.Last_Contacted__c}" />       
        <apex:column headerValue="Membership Type" value="{!con.Membership_Type__c}"/>
    </apex:pageBlockTable>

</apex:pageBlockTable> 
```

# javascript - js/jQuery 将标签值移动到默认值

> ID：11993761
> 
> 赞同：0
> 
> 时间：2012-08-16T19:02:50.313
> 
> 标签：javascript, jquery, markup

我想使用 jQuery/js 执行以下操作：

1.  获取表单输入标签的值
2.  将这些标签作为输入本身的值
3.  隐藏标签

很简单。因为我不想打字

```
$('firstname input').val('First Name');
$('lastname input').val('Last Name');
$('street input').val('Street');
$('city input').val('City'); 
```

等等，我怎样才能从每个元素中提取标签并将其粘贴到该元素的输入框中？

这是 HTML 的略微缩写版本：

```
<form action="/" method="post" id="user-register-form" accept-charset="UTF-8">
<div>
    <div id="customreg">
        <div class="firstname">
            <div class="form-item form-type-textfield form-item-first-name">
                <label for="edit-first-name">
                    First Name 
                    <span class="form-required" title="This field is required.">*</span>             </label>
                <input type="text" id="edit-first-name" name="first_name" value="" size="24" maxlength="128" class="form-text required" />
           </div>
       </div>
       <div class="lastname">
           <div class="form-item form-type-textfield form-item-last-name">
               <label for="edit-last-name"> 
                   Last Name 
                   <span class="form-required" title="This field is required.">*</span>
               </label>
               <input type="text" id="edit-last-name" name="last_name" value="" size="24" maxlength="128" class="form-text required" />
           </div>
       </div>
    </div>
    <input type="submit" id="edit-submit--3" name="op" value="Join!" class="form-submit" />
         <input type="hidden" name="form_build_id" value="form-5DDdSC4UFk_YPJIfuJgMhC4215CYJneg9PBDdetJtDQ" />
         <input type="hidden" name="form_id" value="custreg_user_register_form" />
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:06:35.487

如果您`label`的 s 具有与 的 ID 匹配的适当`for`属性`input`，请使用以下命令：

```
$('input').val(function(){
    return $('label[for=' + this.id + ']').hide().text();
}); 
```

这是小提琴：http: [//jsfiddle.net/LBEWK/](http://jsfiddle.net/LBEWK/)

* * *

如果您将标签包裹在`input`s 周围，请使用以下命令：

```
$('input').each(function() {
    var $this = $(this),
        $label = $this.parent();

    $this.val( $label.text() );
    $label.replaceWith( $this );
}); 
```

这是小提琴：http: [//jsfiddle.net/tswkV/](http://jsfiddle.net/tswkV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:43:52.710

这将是最短的解决方案：

```
$('input').siblings('label').each(function(index){ 
    var $this = $(this);
    $this.hide();
    $this.siblings('input').each(function(index){
        $(this).val($($this[index]).text());
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:10:13.283

```
$.each($('label'), function() { 
    $('#' + $(this).attr('for')).val($(this).text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:06:17.867

查看 HTML 会有所帮助，但如果我们假设标签直接出现在输入之前，您可以这样做。

```
$('#myForm label + input').val(function() {
    return $(this).prev().text();
}).prev().hide(); 
```

适用于看起来像这样的 HTML。

```
<form id="myForm">
    <label>first</label><input><br>
    <label>last</label><input><br>
    <label>phone</label><input>
</form> 
```

如果输入被包装，您可以这样做。

```
$('#myForm label > input').val(function() {
    var txt = $(this.parentNode).text();
    this.previousSibling.data = "";
    return txt;
}).unwrap(); 
```

像这样使用 HTML。

```
<form id="myForm">
    <label>first<input></label><br>
    <label>last<input></label><br>
    <label>phone<input></label>
</form> 
```

# c# - 如何调用 IEnumerable

> ID：11993764
> 
> 赞同：2
> 
> 时间：2012-08-16T19:03:01.723
> 
> 标签：c#, types

我有一个子程序：

```
private static IEnumerable<IEnumerable<T>> permutations<T>(IEnumerable<T> source)
{
    var c = source.Count();
    if (c == 1)
        yield return source;
    else
        for (int i = 0; i < c; i++)
            foreach (var p in permutations(source.Take(i).Concat(source.Skip(i + 1))))
                yield return source.Skip(i).Take(1).Concat(p);
    } 
```

那么如何在main函数中调用呢？

```
static void Main(string[] args)
{
    string input = "abcdefghijk";
    IEnumerable<string> summary;
    summary= permutations<string>(IEnumerable<string> input);// obviously wrong, but how??
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:19:34.570

调用函数很简单，你只需要：

```
permutations(input) 
```

这将为您提供一个字符序列序列的结果。要将内部转换`IEnumerable<char>`为字符串，只需使用`Select`.

```
summary = permutations(input).Select(chars => new string(chars.ToArray())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:09:07.980

您可以通过两种方式调用它：

```
permutations<char>(input); 
```

或者

```
permutations(input); 
```

第二次调用使用**编译器类型推断**，因此您不必指定**T**。

接着：

```
 foreach (var outerEnumerator in permutations(test))
        {
            foreach (var singleChar in outerEnumerator)
            {
                Console.WriteLine(singleChar);
            }
        } 
```

以及具有显式类型和良好格式的版本（每个单词在单独的行中）：

```
 foreach (IEnumerable<char> outerEnumerator in permutations(test))
        {
            foreach (char singleChar in outerEnumerator)
            {
                Console.Write(singleChar);
            }
            Console.WriteLine();
        } 
```

现在我们知道要做什么方法了：

```
 var test = "test";
        foreach (IEnumerable<char> testPermutation in permutations(test))
        {
            var permutationString = new string(testPermutation.ToArray());
            Console.WriteLine(permutationString);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:06:16.190

```
summary = permutations(input); 
```

除非排列在不同的类别中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:06:45.543

由于您不能`IEnumerable`直接实例化 a，**因此您必须传入一个实现此接口的类**（一种流行的选择是使用 a`List`来保存数据）。

.NET 框架会**自动将字符串解释为字符数组**( `char[]`)，它实现`IEnumerable`(ie `IEnumerable<char>`)。这就是为什么您可以将字符串直接传递到方法中的原因，如下所示：

```
static void Main(string[] args)
{
    string input = "abcdefghijk";
    var summary = permutations(input);
} 
```

上面的代码是正在发生的事情的更显式版本的简写，可以用下面的代码来描述，它有一个显式匹配方法签名的方法调用`permutations`。

```
static void Main(string[] args)
{
    string input = "abcdefghijk";

    IEnumerable<char> inputArray = input.ToCharArray();

    IEnumerable<IEnumerable<char>> summary = permutations(inputArray);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-16T19:06:53.487

最简单的方法是创建一个列表`string`

```
List<string> strArr = new List<string>();
strArr.Add("firstItem");
strArr.Add("secondItem");
strArr.Add("thirdItem");
IEnumerable<IEnumerable<string>> summary = permutations<string>(strArr); 
```

# sql - 这个 varchar2 列数据 Oracle 有什么问题

> ID：11993774
> 
> 赞同：-1
> 
> 时间：2012-08-16T19:03:28.857
> 
> 标签：sql, oracle

我有一个 SELECT 语句：

```
SELECT * 
FROM TABLE1 t1,TABLE2 t2 
WHERE t1.tid=t2.tid 
    AND t1.Col21 IN   ('103271','103280','107114','108083','116762','118462','119233','120562','125833','129706') 
```

这不会返回任何数据，但我知道 Col21 中有所有上述值的记录。

我试过 trim(Col21) 但仍然没有数据。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:17:58.973

首先，为了安心，请验证`Col21`此查询中是否有匹配的行。

```
SELECT * 
  FROM TABLE1 t1
 WHERE t1.Col21 IN ('103271','103280','107114','108083','116762','118462',
                    '119233','120562','125833','129706') 
```

如果返回行，那么您提供的查询没有返回任何内容的原因是由于连接了`TABLE2`. 也许您打算进行外部联接？如果是这样，请尝试以下操作：

```
SELECT * 
  FROM TABLE1 t1,TABLE2 t2 
 WHERE t1.tid=t2.tid(+)
   AND t1.Col21 IN ('103271','103280','107114','108083','116762','118462',
                    '119233','120562','125833','129706') 
```

`t2.tid`这将允许在没有`TABLE2`对应于 in 的行的地方出现空值`TABLE1`，保证`TABLE1`总是返回所有匹配的行。

# .htaccess - htaccess DirectoryIndex 和捕获 url 参数

> ID：11993776
> 
> 赞同：1
> 
> 时间：2012-08-16T19:03:34.240
> 
> 标签：.htaccess, url-rewriting

需要一些有关 url 重写的快速帮助。

当前在 htaccess 文件中使用以下内容：

```
DirectoryIndex /index.php?Screen=Home&Category=1 
```

如果我们点击`www.website.com`它会加载 ->`/index.php?Screen=Home&Category=1`并且我们不会显示丑陋的 url。

然而，我们想要捕获 url 参数，但它们被发送到 404。所以如果你导航到`www.website.com/?param=1`它不起作用。我们没有捕获 url 参数并将其附加到目录索引字符串。

所以我们想`www.website.com/?param=1`打`/index.php?Screen=Home&Category=1&param=1`

我们尝试使用：

```
RewriteRule ^/\?(.*)$ /index.php?Screen=Home&Category=1&%1 [L] 
```

但是没有运气...

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:15:37.203

您无法匹配`RewriteRule`表达式中的查询字符串。但是使用该`QSA`标志基本上可以满足您的要求：

```
RewriteRule ^/?$ /index.php?Screen=Home&Category=1 [L,QSA] 
```

# php - 如何重写动态 URL？

> ID：11993780
> 
> 赞同：2
> 
> 时间：2012-08-16T19:03:46.587
> 
> 标签：php, url, mod-rewrite

> **可能重复：**
> [.htacces 创建友好的 URL。需要帮助](https://stackoverflow.com/questions/3033407/htacces-to-create-friendly-urls-help-needed)

我需要帮助了解如何为带有动态参数的 URL 显示漂亮的 URL。

在我的网站上，当您单击产品链接时，它会将您带到带有此 URL 的页面：[http ://example.com/products?id=1002](http://example.com/products?id=1002)

如何将其更改为显示[http://example.com/products/1002](http://example.com/products/1002)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:40:53.983

第 1 步：更改您的页面，使您生成的产品链接如下所示：`http://example.com/products/1002`. 您控制此内容，您可以生成您想要的任何链接。如果您正在使用某种框架，它甚至可能具有执行此操作的内置机制。

第 2 步：将其添加到文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^products/(.+?)/?$ /products/?id=$1 [L] 
```

# ios - iOS 添加旋转手势和捏/缩放

> ID：11993781
> 
> 赞同：3
> 
> 时间：2012-08-16T19:03:53.857
> 
> 标签：ios, uigesturerecognizer, gesture-recognition, uipinchgesturerecognizer

我正在像这样设置我的识别器。请注意，虽然我将识别器添加到 self.view，但实际上是 self.container 正在被转换（这是一个子视图）。

```
UIPinchGestureRecognizer *twoFingerPinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingerPinch:)];
twoFingerPinch.delegate = self;
[self.view addGestureRecognizer:twoFingerPinch];

UIRotationGestureRecognizer *rotate = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(handleRotate:)];
rotate.delegate = self;
[self.view addGestureRecognizer:rotate]; 
```

捏/缩放本身就可以正常工作：

```
- (void)twoFingerPinch:(UIPinchGestureRecognizer *)recognizer 
{

CGFloat scale = _lastScale * recognizer.scale;

CGAffineTransform tr = CGAffineTransformScale(self.view.transform, scale, scale);
self.container.transform = tr;

if (recognizer.state == UIGestureRecognizerStateEnded)  {
    _lastScale = scale;
    return;
}
} 
```

但是我很难添加轮换：

```
- (IBAction)handleRotate:(UIRotationGestureRecognizer *)recognizer {
//recognizer.view.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
//recognizer.rotation = 0;

CGFloat rotation = _lastRotation * recognizer.rotation;

self.container.transform = CGAffineTransformRotate(self.view.transform, recognizer.rotation);
recognizer.rotation = 0;

if (recognizer.state == UIGestureRecognizerStateEnded)  {
    _lastRotation = rotation;
    return;
}
} 
```

当我添加旋转识别器时，旋转工作但捏/缩放被破坏（从非常小到大的随意跳跃）。我怎样才能解决这个问题，让他们都工作？

# php - Blogger API - 创建帖子后获取 URL

> ID：11993784
> 
> 赞同：0
> 
> 时间：2012-08-16T19:03:57.687
> 
> 标签：php, api, google-api, blogger

我正在使用博客 API 在我的博客博客上创建一篇文章。

这是基于此处的示例代码：

[http://framework.zend.com/svn/framework/standard/trunk/demos/Zend/Gdata/Blogger.php](http://framework.zend.com/svn/framework/standard/trunk/demos/Zend/Gdata/Blogger.php)

我可以成功创建帖子并返回 postid。

我想知道如何从返回的 postid 获取新创建的帖子的 URL（永久链接或非永久链接）？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:00:14.147

就在我发表评论后，我找到了解决方案。

示例中的`$createdPost`变量将有一个名为 的方法`getAlternateLink`。像这样使用它：

```
$altLink = $createdPost->getAlternateLink();
$url = $altLink->getHref(); 
```

我发现这是一个简单的循环：

```
foreach (get_class_methods($createdPost) AS $method) {
  echo '<br>' . $method;
  try {
    if (strpos($method, 'get') !== FALSE) { echo ': '; var_dump($createdPost->$method()); }
  } catch (Exception $e) {

  }
} 
```

这将回显每个包含 get 的方法的结果。有很多设置方法，但这不是你需要的。还有其他 get 方法可以为您提供编辑、评论的链接

# python - numpy数组梯度和matplotlib quiver的倒序

> ID：11993790
> 
> 赞同：4
> 
> 时间：2012-08-16T19:04:25.340
> 
> 标签：python, numpy, matplotlib

我正在使用 numpy 1.6 和 matplotlib 1.1.1，试图从我拥有的标量场生成速度场。到目前为止，我正在生成我的标量数据：

```
 num_samples = 50
    dim_x = np.linspace(self.min_x, self.max_x,num_samples)
    dim_y = np.linspace(self.min_y, self.max_y,num_samples)
    X, Y = np.meshgrid(dim_x, dim_y)

    len_x = len(dim_x)
    len_y = len(dim_y)

    a = np.zeros([len_x, len_y], dtype=float)
    for i, y in enumerate(dim_y):
        for j, x in enumerate(dim_x):
            a[i][j] = x*y # not exactly my function, just an example 
```

然后我得到渐变：

```
 (velx,vely) =  np.gradient(a) 
```

在 numpy 文档中，velx 是向量场的 x 分量，vely 是向量场的 y 分量。检查 matplotlib 的文档，我使用 quiver 使用箭头绘制矢量场。它指出 velx 和 vely 是向量场的 x 分量和 y 分量：

```
 fig0 = plt.figure()
    ax = fig0.add_subplot(111)
    Q = ax.quiver(X,Y, velx, vely )
    plt.show() 
```

这给出了速度场的错误结果：

![标量场的错误结果](../Images/52013e0dfa0cbe5a6737c34f45c3ccb2.png)

图表看起来不错的唯一方法是，如果我在 quiver 上反转组件：

```
 Q = ax.quiver(X,Y, vely, velx )#WHY??? 
```

![正确的结果](../Images/b130b6d4f02426a6e86d8229d559c4e3.png)

我怀疑这类似于行或列排序，但我无法弄清楚 np.gradient 的输出是否反转，或者 quiver 是否反转。所有一维问题都按预期工作。谢谢！

编辑：为了更清楚这是如何反转的，更改函数

```
a[i][j] = x*y 
```

到

```
a[i][j] = x*x 
```

梯度应该在 x 方向，随着 x 的增加而增加。结果仍然是错误的：如果我使用

```
Q = ax.quiver(X,Y, velx, vely ) 
```

我明白了

![还是错了](../Images/25fd7cc8b674040f4f55e52ba71a5544.png)

如果我把它倒过来

```
Q = ax.quiver(X,Y, vely, velx ) 
```

我明白了

![对](../Images/cb99d3f1ef81882356371d96355d4a9e.png)

也许有一个更蟒蛇（和正确！）的方式来做到这一点......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:10:17.280

我认为你是对的，（这是一个数组排序问题）。 `a`构建为`a[yidx,xidx]`但是当你采用渐变时，你会这样做： `velx, vely = np.gradient(a)`当你应该做`vely, velx = np.gradient(a)`. 由于沿第 0 轴的梯度应该给你`vely`（大概`d/dy(a) = vely`）？- 除非我遗漏了什么（在这种情况下，我会很乐意删除这个答案）。

另请注意，我认为您可以`a`在没有嵌套列表的情况下构建“”：

```
a = X*Y 
```

它也应该适用于更复杂的功能......

# javascript - 在另一个函数中调用 ui 函数时出错

> ID：11993796
> 
> 赞同：0
> 
> 时间：2012-08-16T19:04:45.743
> 
> 标签：javascript, jquery, jquery-ui

我很难尝试从其他函数内部调用函数：

```
$('#edit_wgt_contact_form').modal();
//Widgets creation
function createWidget(type){
    $('#edit_wgt_contact_form').modal();
} 
```

第一次调用“$('#edit_wgt_contact_form').modal()”按预期工作，但函数内部的调用返回错误“$("#edit_wgt_contact_form").modal 不是函数”。

（当然 createWidget 函数在脚本的其他部分被调用）。

这只是一个例子，我在我的应用程序的不同部分遇到了同样的问题，我只是不知道发生了什么。

有人可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:41:50.757

我发现这是由于 JQuery 的双重包含。此代码来自的页面有一个加载另一个页面的 ajax 调用，它再次包含 JQuery。

这是此处记录的已知错误：http: [//bugs.jquery.com/ticket/12136](http://bugs.jquery.com/ticket/12136)

感谢所有贡献的人！

# ios - 带有静态单元格的 UITableView，没有 cellForRowAtIndexPath。如何设置清晰的背景？

> ID：11993798
> 
> 赞同：29
> 
> 时间：2012-08-16T19:04:52.640
> 
> 标签：ios, xcode, cocoa-touch, uitableview

我有一个静态的 UITableView，一切都在 Storyboard 上。在 cellForRowAtIndexPath 我只是使用

```
return [super tableView:tableView cellForRowAtIndexPath:indexPath]; 
```

并且桌面视图效果很好。但是我想将单元格背景设置为 [UIColor clearColor] 我该怎么做？该表有 30 个单元格，每个单元格都不同。

谢谢

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-16T19:12:25.603

我不完全确定这是否可行，因为我从未尝试过使用`super`它来管理单元格。如果您的代码适用于`super`，那么您应该能够避免这样做来设置背景颜色：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [super tableView:tableView cellForRowAtIndexPath:indexPath];
    cell.backgroundColor = [UIColor clearColor];
    return cell;
} 
```

无论哪种方式，在我看来，这都是一种奇怪的做事方式。`UITableView`通常，根据默认的样板代码，在方法本身中创建和重用单元格，而无需调用`super`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-16T19:13:10.533

试试这个委托方法：

```
- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
 cell.backgroundColor = [UIColor clearColor];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:11:10.723

您可以设置一个方法并在 viewDidLoad 中调用它，以便获取所有单元格并对它们做任何您想做的事情，您可以使用它：

```
NSArray *visibleIndexPaths = [self.tableView indexPathsForVisibleRows]; 
```

获取当前可见单元格的所有索引路径

然后通过以下方式迭代它们

```
UITableViewCell *cell = nil;
for (int i = 0; i < 30; i++) {
  cell = [self.tableView cellForRowAtIndexPath:[visibleIndexPaths objectAtIndex:i]];
  // Do your setup
} 
```

您还可以参考[此 Apple 开发人员文档](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html)“**静态行内容技术**”部分

# c# - C# 将文本添加到现有文本文件

> ID：11993800
> 
> 赞同：0
> 
> 时间：2012-08-16T19:05:07.907
> 
> 标签：c#

在我的应用程序中，我有一个注册表单。当他们提交表单时，我希望它从这些文本框中获取值并将它们合并到文本文档的某些部分中。所以代码需要读取文本文件，在正确的位置插入数据，然后保存为新文件。我一直在阅读如何使用它，`.split('symbol')`所以也许这会起作用。

例如：user123123.txt，我的名字是 {namebox}。我 {agebox} 岁。 `namebox = Amy` `agebox = 21`

我真的不知道该怎么做。我已经尝试使用该`string.format()`函数，但无法弄清楚如何让它读取文本文件并将值插入我需要的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:09:36.000

就像是：

```
// giving name = "Marvin", age = "23"
var name = "Marvin"; 
var age = 23;

var text = File.ReadAllText("c:\\path\\to\\file");
var result = text.Replace("{name}", name).Replace("{age}", age);
File.WriteAllText("c:\\path\\to\\anotherFile", result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T19:09:27.400

只需使用[`string.Replace`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)几次。

```
string newString = "My name is {namebox}. I am {agebox}"
                   .Replace("{namebox}", txtName.Text)
                   .Replace("{agebox}", txtAgeBox.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:12:43.780

这个逻辑可以实现如下：

```
public static string CustomFormat(string format, Dictionary<string, string> data)
{
    foreach (var kvp in data)
    {
        string pattern = string.Format("{{{0}}}", kvp.Key);
        format = format.Replace(pattern, kvp.Value);
    }
    return format;
} 
```

客户端代码：

```
const string format = "My name is {namebox}. I am {agebox} years old.";
var input = new Dictionary<string, string>
    {
        { "namebox", "Jon Doe" },
        { "agebox", "21" }
    };
string s = CustomFormat(format, input); 
```

# r - R将data.frame中的值与变量匹配

> ID：11993803
> 
> 赞同：1
> 
> 时间：2012-08-16T19:05:21.540
> 
> 标签：r, compare

我正在尝试搜索 data.frame 并在几列之外的同一行中获取一个值。我已经输入了文件，但剩下的就是搜索变量。在那，我不知道如何开始。在我下面包含的表格的小样本中，我需要搜索并在 id 中找到一个值（存储为变量）（这将是唯一的）并将该值返回给一个新变量，这可以用于图表标题。

```
id,cov
2A,50
2b,3
8f,12 
```

我想我可能不得不使用这样的东西：

```
 comparison <- compare(s,search,allowAll=TRUE) 
```

但我希望有人对此事有一些建议或指导，以限制我的失误

```
#Got the cov column
m<-data.frame(MNS=c(mns$cov))
head(m)
    MNS
1 50
2 3
3 12
#Got the id column
s<-data.frame(SPL=c(mns$id))
#The value that I would like to search for
search<-'2b'
head(search)
[1] "2b"
#My attempt to find it
see<-mns[mns$id=='search',]
head(see)
 [1] sample_id                              
 [2] meanCov                                            
<0 rows> (or 0-length row.names) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:14:41.270

我想你在追求这样的事情

```
mns[msn$id == "2b", "cov"] 
```

# 更新了新评论

```
msn[msn$id == search, "cov"] 
```

或者

```
msn[msn$id %in% search, "cov] 
```

# javascript - 在 Facebook 的朋友墙上发帖不会生成通知

> ID：11993805
> 
> 赞同：1
> 
> 时间：2012-08-16T19:05:28.770
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在使用 FB.api 发布到朋友的墙上......这是代码：

```
 function postToWallFB(friendId, postMsg, name, link, description, picture){
    var opts = {
        message : postMsg,
        name : name,
        link : link,
        description : description,
        picture : picture
    };

    FB.api('/'+friendId+'/feed', 'post', opts, function(response)
    {

            if (!response || response.error)
            {
                alert('Error');                 
            }
            else
            {
                alert('Ok');

            }

    }); 
} 
```

该功能运行良好...图像和一切都在我朋友的墙上正确显示...但是当我使用收到帖子的帐户输入时，它不会在我的界面左上角的按钮中显示任何通知。

有人知道发生了什么吗？

# objective-c - 将 int 转换为缩短的格式化字符串

> ID：11993806
> 
> 赞同：5
> 
> 时间：2012-08-16T19:05:33.577
> 
> 标签：objective-c, cocoa-touch, string-formatting

用户将输入一个美元值作为`int`，我想将结果转换为一个缩短的格式化字符串。因此，如果用户输入 1700，字符串将显示“$1.7k”。如果用户输入 32600000，字符串将显示“$32.6m”。

**更新**

这是我到目前为止的代码。它似乎适用于大约 10k 的数字。我会为更大的数字添加更多 if 语句。但是有没有更有效的方法来做到这一点？

```
NSNumberFormatter *nformat = [[NSNumberFormatter alloc] init]; 
[nformat setFormatterBehavior:NSNumberFormatterBehavior10_4]; 
[nformat setCurrencySymbol:@"$"]; 
[nformat setNumberStyle:NSNumberFormatterCurrencyStyle]; 
double doubleValue = 10200; 
NSString *stringValue = nil; 
NSArray *abbrevations = [NSArray arrayWithObjects:@"k", @"m", @"b", @"t", nil] ; 

for (NSString *s in abbrevations) 
{ 

    doubleValue /= 1000.0 ; 

    if ( doubleValue < 1000.0 ) 
    { 

        if ( (long long)doubleValue % (long long) 100 == 0 ) { 
            [nformat setMaximumFractionDigits:0]; 
        } else {                 
            [nformat setMaximumFractionDigits:2]; 
        } 

        stringValue = [NSString stringWithFormat: @"%@", [nformat stringFromNumber: [NSNumber numberWithDouble: doubleValue]] ]; 
        NSUInteger stringLen = [stringValue length]; 

        if ( [stringValue hasSuffix:@".00"] ) 
        {                
            // Remove suffix 
            stringValue = [stringValue substringWithRange: NSMakeRange(0, stringLen-3)];             
        } else if ( [stringValue hasSuffix:@".0"] ) { 

            // Remove suffix 
            stringValue = [stringValue substringWithRange: NSMakeRange(0, stringLen-2)]; 

        } else if ( [stringValue hasSuffix:@"0"] ) { 

            // Remove suffix 
            stringValue = [stringValue substringWithRange: NSMakeRange(0, stringLen-1)];         
        } 

        // Add the letter suffix at the end of it 
        stringValue = [stringValue stringByAppendingString: s]; 

        //stringValue = [NSString stringWithFormat: @"%@%@", [nformat stringFromNumber: [NSNumber numberWithDouble: doubleValue]]  , s] ; 
        break ; 
    }    
}  

NSLog(@"Cash = %@", stringValue); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T20:53:46.637

```
unsigned long long value = 1700llu;
//value = 32600001llu;
//value = UINT64_MAX;

NSUInteger index = 0;
double dvalue = (double)value;
//Updated to use correct SI Symbol ( http://en.wikipedia.org/wiki/SI_prefix )
NSArray *suffix = @[ @"", @"k", @"M", @"G", @"T", @"P", @"E" ];

while ((value/=1000) && ++index) dvalue /= 1000;

NSString *svalue = [NSString stringWithFormat:@"$%.*f%@",
                    //Use boolean as 0 or 1 for precision
                    (int)(dvalue < 100.0 && ((unsigned)((dvalue - (unsigned)dvalue) * 10) > 0)),
                    dvalue, [suffix objectAtIndex:index]];
NSLog(@"Value: %@", svalue); 
```

* * *

**ARC 本地化版本**

```
unsigned long long value = 1700llu;
//value = 32600001llu;
//value = UINT64_MAX;

NSUInteger index = 0;
double dvalue = (double)value;
//Updated to use correct SI Symbol ( http://en.wikipedia.org/wiki/SI_prefix )
NSArray *suffix = @[ @"", @"k", @"M", @"G", @"T", @"P", @"E" ];

while ((value/=1000) && ++index) dvalue /= 1000;

NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
//Germany Example
[formatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"de-de"]];
//Set fractional digits to 0 or 1
[formatter setMaximumFractionDigits:(int)(dvalue < 100.0 && ((unsigned)((dvalue - (unsigned)dvalue) * 10) > 0))];

NSString *svalue = [[formatter stringFromNumber:[NSNumber numberWithFloat:dvalue]]
                    stringByAppendingString:[suffix objectAtIndex:index]];

NSLog(@"Value: %@", svalue); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-28T21:06:19.347

如果你想要一个具有自动调整宽度的字符串，你可以使用：

```
+(NSString*)numberWithShortcut:(NSNumber*)number
{
    unsigned long long value = [number longLongValue];

    NSUInteger index = 0;
    double dvalue = (double)value;

    NSArray *suffix = @[ @"", @"K", @"M", @"B", @"T", @"P", @"E" ];

    while ((value /= 1000) && ++index) dvalue /= 1000;

    NSString *svalue = [NSString stringWithFormat:@"%@%@",[NSNumber numberWithDouble:dvalue], [suffix objectAtIndex:index]];

    return svalue;
} 
```

# r - 一次从矩阵中选择特定元素

> ID：11993810
> 
> 赞同：10
> 
> 时间：2012-08-16T19:05:47.953
> 
> 标签：r, matrix

有没有一种方法可以一次从矩阵中选择一堆预先指定的元素？具体来说，假设我有以下矩阵：

```
 58        59        60       62        63        64
58  0.000000  3.772139  6.367721 8.978718 12.197210 13.401126
59  3.772139  0.000000  3.755554 5.935946  9.592700 11.664533
60  6.367721  3.755554  0.000000 5.999409  9.324764 11.991269
62  8.978718  5.935946  5.999409 0.000000  3.810169  6.762802
63 12.197210  9.592700  9.324764 3.810169  0.000000  3.796884
64 13.401126 11.664533 11.991269 6.762802  3.796884  0.000000 
```

我想选择单元格 [1,2]、[2,3]、[3,4]、[4,5]、[5,6]。我意识到我可以通过索引引用它们，在这种情况下我可以运行：

```
mymatrix[c(2,9,16,23,30)] 
```

不过这点后面看代码就不是很清楚了。有没有办法一次输入实际的（行、列）引用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T19:14:48.700

可以使用 2 个列矩阵进行索引。将这些行号和列号转换为有效的 R 对象（而不是 Matlab 样式的表达式）后：

```
> idxs <- gsub("\\]",")", gsub("\\[", "c(",  "[1,2], [2,3], [3,4], [4,5] ,[5,6]") )
# I edited the string value that idxs returned:
> midx <- rbind( c(1,2), c(2,3), c(3,4), c(4,5) ,c(5,6) )
> mat <-  matrix(scan(), nrow=6)  
1:  0.000000  3.772139  6.367721 8.978718 12.197210 13.401126
7:   3.772139  0.000000  3.755554 5.935946  9.592700 11.664533
13:   6.367721  3.755554  0.000000 5.999409  9.324764 11.991269
19:   8.978718  5.935946  5.999409 0.000000  3.810169  6.762802
25:  12.197210  9.592700  9.324764 3.810169  0.000000  3.796884
31:  13.401126 11.664533 11.991269 6.762802  3.796884  0.000000
37: 
Read 36 items
> mat[midx]
[1] 3.772139 3.755554 5.999409 3.810169 3.796884 
```

如果您的目标是索引可以更普遍地完成的超对角线：

```
> mat[col(mat)==row(mat)+1]
[1] 3.772139 3.755554 5.999409 3.810169 3.796884 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T19:10:38.393

针对您的具体情况的解决方案是选择子矩阵并使用`diag`函数：

```
R> diag(x[-ncol(x),-1])
[1] 3.772139 3.755554 5.999409 3.810169 3.796884 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-25T03:50:36.223

与上面发布的类似的解决方案，但处理具有行向量和列向量的情况（这是我遇到此线程时的问题）如下：

```
> rows <- c(1,2,3,4,5)
> cols <- c(2,3,4,5,6)
> call <- cbind(rows,cols)
> 
> mat[call]
[1] 3.772139 3.755554 5.999409 3.810169 3.796884 
```

# c# - 添加 和 在 asp.net 代码隐藏页面中

> ID：11993812
> 
> 赞同：4
> 
> 时间：2012-08-16T19:05:52.993
> 
> 标签：c#, asp.net, newline, add, code-behind

我正在以编程方式向页面添加标签（代码隐藏文件 c#）

```
Label label1 = new Label();
label1.Text = "abc";
this.Page.Form.FindControl("ContentPlaceHolder1").Controls.Add(label1);

Label label2 = new Label();
label2.Text = "def";
this.Page.Form.FindControl("ContentPlaceHolder1").Controls.Add(label2); 
```

我想在这些标签之间添加 hr 和 br。怎么做？

```
this.Page.Form.FindControl("ContentPlaceHolder1").Controls.Add("<hr/>"); 
```

不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T19:15:56.507

```
Label label1 = new Label();
    label1.Text = "Test 1";
    form1.Controls.Add(label1);

    form1.Controls.Add(new Literal() { ID="row", Text="<hr/>" } );

    Label label2 = new Label();
    label2.Text = "Test 2";
    form1.Controls.Add(label2);

Output:
Test 1
---------------------------------------------------------------------------------
Test 2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T19:11:30.713

添加一个[`LiteralControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.literalcontrol.aspx)：

```
this.Page.Form.FindControl("ContentPlaceHolder1")
    .Controls.Add(new LiteralControl("<hr/>")); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-16T19:12:28.907

您可以使用[HtmlGenericControl](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)

```
 var hrControl = new HtmlGenericControl("hr")
 this.Page.Form.FindControl("ContentPlaceHolder1").Controls.Add(hrControl); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-16T19:11:12.907

您可以使用文字控件

```
Literal c = new Literal();
c.Text = "<hr />; 
```

# ruby-on-rails - Rails - 组合来自不同表的范围

> ID：11993815
> 
> 赞同：0
> 
> 时间：2012-08-16T19:05:59.947
> 
> 标签：ruby-on-rails, named-scope

我在不同（并且有些关联）模型上有几个范围

```
class Alarm
   has_one :site #use mac_address field in Alarm and Site as key / foreign key

   scope :any_network, lambda{ joins(:network) } #more complex stuff can be done :-)
   #etc
end

class Network
   has many :permissions
   has_many :sites

   scope :has_permission, lambda{|level, user| #etc - returns a list of networks that a                  
                                               # user has the `level` permission for }

   #etc
end

class Permission
    has_one :network, :user
    #etc -uses a flags field to hold permision levels
end 
```

所以我可以

```
Alarm.any_network 
```

这会产生

```
SELECT `alarm`.* FROM `alarm` INNER JOIN `site` ON 
`site`.`mac_address` = `alarm`.`mac_address` INNER JOIN `network` ON 
`network`.`id` = `site`.`network_id` 
```

我能做到

```
Network.has_permission('manager',1) 
```

这会产生

```
SELECT `network`.* FROM `network` INNER JOIN `permission` ON 
`permission`.`network_id` = `network`.`id` 
WHERE (permission.user_id = 1 and permission.flags && 8) 
```

这就是它应该的样子。

我无法解决的是如何加入这两个范围以生成源自用户具有适当权限的任何网络的所有警报的集合。类似的东西

```
SELECT `alarm`.* FROM `alarm` INNER JOIN `site` 
ON `site`.`mac_address` = `alarm`.`mac_address` 
INNER JOIN `network` ON `network`.`id` = `site`.`network_id` 
INNER JOIN `permission` ON `permission`.`network_id` = `network`.`id` 
WHERE (permission.user_id = 1 and permission.flags && 8) 
```

我尝试链接范围（无法使其工作）并且我尝试合并范围（显然是错误的做法！）

任何想法——这几天我一直在扯头发。

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:37:14.557

乍一看，我想像这样，但很难说，因为你没有给我们`Site`模型：

```
Alarm.includes(:site => {:network => :permissions}).where(['permissions.flags' && ?', 8], 'permissions.user_id' => 1) 
```

这显然是未经测试的，很难准确地说，但这里是发生了什么的要点：

1.  渴望加载站点、网络和权限
2.  强制执行您在理论 SQL 语句中概述的条件。

仅供参考，我不记得这种多重条件是否`where`像我上面使用的那样工作，但也许它会让你的轮子转动！

# c# - 使用 RestSharp 传递对象

> ID：11993817
> 
> 赞同：1
> 
> 时间：2012-08-16T19:06:07.663
> 
> 标签：c#, rest, restsharp

我正在使用 C# 和 RestSharp 库连接到 Web 服务。

远程服务器要求我传递一个名为 obj 的对象，该对象具有两个属性：login 和 pword。

因此，传递给 Web 服务的 JSON 对象应如下所示：

```
obj={"login":"myusername","pword":"mypassword"} 
```

但是，我还没有找到一种简单的方法来实现这一点。

如果我使用：

```
request.AddParameter("login","myusername");
request.AddParameter("pword","mypassword"); 
```

然后将这两个参数分别传递给 Web 服务。我还尝试使用这两个属性创建一个名为 obj 的对象。然后使用

```
request.AddObject(obj); 
```

但是，这会导致 Web 服务调用的输出相同——两个元素分别传递。

如何让 RestSharp 创建具有这两个属性的单个对象？

编辑：

我想出了一种方法来完成这项工作。可能有更好的方法来做到这一点，但这确实有效。

首先创建一个包含数据的对象：

```
var obj = new LoginRequest {login = login, pword = pword}; 
```

然后，您可以使用以下内容：

```
request.AddParameter("obj",request.JsonSerializer.Serialize(obj)); 
```

这将生成一个 JSON 对象，其中包含传递给 Serialize 方法的对象的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T19:16:07.293

你可以使用`request.AddBody(obj);`.

# javascript - Javascript将对象从包含文件传递到页面

> ID：11993822
> 
> 赞同：0
> 
> 时间：2012-08-16T19:06:23.013
> 
> 标签：javascript, jquery, object, instance

我创建了一个 javascript 对象和一个函数来构建该对象的一个​​新实例。我现在需要在我的页面上使用这个对象但没有任何运气，我觉得我错过了一些东西。

**JS 包含文件**

```
function MyObject() {
    this.ID = 0;
    this.Name = "";
}

function GetObject(param1, param2) {
    //ajax call to get json string
    $.ajax({ //leaving out details this part works
    success: function(data) {
        var jsonData = $.parseJSON(data.d);

        var myObj = new MyObject();
        myObj.ID = jsonData[0].ID;
        myObj.Name = jsonData[0].Name;

        return myObj;
    });
} 
```

这个调用工作正常，但是当我尝试访问我得到的页面上的数据时`undefined`

**页**

```
<script type="text/javascript">
    $(function() {
        var o = GetObject(1, 2);
    });
</script> 
```

我能够通过将 DOM 对象传递给函数并将其分配到那里来使其工作。

```
function GetObject(param1, param2, domObj) {
    //ajax call to get json string
    $.ajax({ //leaving out details this part works
    success: function(data) {
        var jsonData = $.parseJSON(data.d);

        var myObj = new MyObject();
        myObj.ID = jsonData[0].ID;
        myObj.Name = jsonData[0].Name;

        domObj.text(myObj);
    });
} 
```

但是，这对我的应用程序不起作用，因为我要提取很多对象，并且只想在页面上引用它们。我错过了什么？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:09:14.843

就这样辞职吧`GetObject`：

```
function GetObject(param1, param2, callback) {
    //ajax call to get json string
    $.ajax({ //leaving out details this part works
    success: function(data) {
        var jsonData = $.parseJSON(data.d);

        var myObj = new MyObject();
        myObj.ID = jsonData[0].ID;
        myObj.Name = jsonData[0].Name;

        // pass myObj via callback function parameter
        return callback( myObj );
    });
} 
```

现在这样称呼它：

```
$(function() {
     var  o = {};
     GetObject(1, 2, function(response) {
         o = response;
     });
}); 
```

由于内部`GetObject`有***ajax***请求*（异步过程）*和ajax`success`函数执行后返回的对象，所以需要借助`callback`函数。

# c# - 对象中的所有字段未发送到 WCF 服务...MVC3

> ID：11993830
> 
> 赞同：0
> 
> 时间：2012-08-16T19:07:13.927
> 
> 标签：c#, wcf

我的 WCF 应用程序中有一个类，其中包含属性：

```
 [DataContract(Namespace = "http://www.ramquest.com/types")]
      public class NewOrderPropertyDto
      {
        [DataMember]
        public int ID { get; set; }
        [DataMember]
        public string Description { get; set; }
        [DataMember]
        public string Address { get; set; }
     } 
```

我使用它来将数据传输到 WCF 服务。我在主应用程序中填充 NewOrderPropertyDto 对象中的所有字段并将其发送到 WCF 方法：

```
 var dto = new NewOrderPropertyDto();
  dto.ID = 1;
  dto.Description = "test";
  dto.Address = "123 my street";
  var wcfService = new ServicesClient();
  wcfService.GetData(dto); 
```

WCF 方法如下所示：

```
 public bool GetData(NewOrderPropertyDto data)
    {
      var id = data.ID; //ID is 1 as expected
      var addy =   data.Address; //the Address field is null
   } 
```

当数据到达 WCF 服务时，只有地址字段为空。有没有人遇到过这种情况？另外，是否有一个工具可以用来查看零位发生的位置？谢谢

# javascript - Android 浏览器在“双击”滚动后停止渲染画布

> ID：11993835
> 
> 赞同：1
> 
> 时间：2012-08-16T19:07:31.697
> 
> 标签：javascript, android, html, canvas, scroll

我有一个全屏网络应用程序在 Android v2.3.6 的 Nexus One 上运行。我已尽我所能防止滚动。我正在打电话`preventDefault()`并`stopPropagation()`参加以下活动：

```
document.addEventListener('touchmove', eventCanceller, false );
document.addEventListener('touchstart',eventCanceller, false );
document.addEventListener('touchend',eventCanceller, false );
document.addEventListener('wheel',eventCanceller, false );
document.addEventListener('mousewheel',eventCanceller, false );
document.addEventListener('DOMMouseScroll',eventCanceller, false );

window.addEventListener('touchmove',eventCanceller, false );
window.addEventListener('touchstart',eventCanceller, false );
window.addEventListener('touchend',eventCanceller, false );
window.addEventListener('wheel',eventCanceller, false );
window.addEventListener('mousewheel',eventCanceller, false );
window.addEventListener('DOMMouseScroll',eventCanceller, false );

canvas.addEventListener('click',eventCanceller, false);
canvas.addEventListener('dblclick',eventCanceller, false); 
```

在我处理它们之后，我还将停止传播并防止这些事件的默认值。

```
canvas.addEventListener('touchstart',handleEvent, false);
canvas.addEventListener('touchmove',handleEvent, false);
canvas.addEventListener('touchend',handleEvent, false); 
```

该应用程序正常工作，并且所有意外滚动都被抑制。除此之外，如果我快速进行两次或多次小滑动，URL 栏会向下滚动并且画布上的所有渲染都会停止。没有javascript错误，调试显示应用程序继续运行，我的draw函数继续被调用，它认为它仍然有一个有效的2DContext，但是屏幕被冻结了。如果我使用轨迹球滚动屏幕，渲染会重新开始。我在 Kindle Fire 上看到的完全一样。在该设备上，如果我切换到/退出全屏模式，渲染会重新开始。

有什么方法可以抑制我在“双击”上看到的这种冻结/滚动效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:33:12.110

我有过这个。

它可能在 Android 4.1 上已修复（显然与触摸事件有关的很多事情都是）。

在我现在正在开发的 android 2.3 上，我有一个令人作呕的解决方法，那就是我这样做。

```
 // force a reflow of the canvas in case it has hung (on android)
    canvas.width = canvas.width-1;
    canvas.width=canvas.width+1; 
```

我目前每帧都这样做（无论如何我只以 20fps 的速度运行），而且它似乎工作正常。

总的。

# html - 防止 iPad 移动 Safari 通过 CSS 截断内容

> ID：11993836
> 
> 赞同：2
> 
> 时间：2012-08-16T19:07:35.910
> 
> 标签：html, css, ipad, mobile-safari

遇到 iPad 截断内容的问题。

虽然宽度超过了 iPad 的分辨率，但我不明白为什么它只是不添加水平滚动而不是截断。

任何关于如何最好地适应这一点的见解将不胜感激。

该网站在[这里](http://www.feelbadforme.com) ，并附有截图。

这可能是有问题的代码的一部分：

```
#wrapper {
position:relative;
width: 1180px;
margin: 0 auto;
} 
```

![iPad 截图](../Images/3831ecb8c495f437c93b1def64a995f0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:26:54.610

如果你`overflow:hidden`从你的包装 div 中删除，你会得到你想要的外观。我刚刚在我的新 iPad 上使用[Adob​​e Shadow](http://labs.adobe.com/technologies/shadow/)的远程检查（[演示）确认了这一点。](http://tv.adobe.com/watch/adc-presents/remote-inspection-with-adobe-shadow/)完成此操作后，您需要使用元标记恢复视口剪辑以防止滚动： `<meta content="width=768px, minimum-scale=1.0, maximum-scale=1.0" name="viewport">`

`<body>`有趣的是，代码中的某些内容限制了元素的宽度。追踪这一点可能会产生更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:09:05.670

假设您正在编辑的是您的网页，而不是 ipad 的错...在您的 css 中，我建议将宽度设置为自动或 100% 以尝试补救？

Ipad 的屏幕不是 1024 像素，小于您设置的吗？根据其他代码，您可能会强制它比屏幕允许的更宽？

也请按照上面的建议。直到他指出来才注意到这一点。

# mysql - Mysql中如何将数据合并到一个临时表中

> ID：11993837
> 
> 赞同：3
> 
> 时间：2012-08-16T19:07:38.613
> 
> 标签：mysql, select, temp-tables

我有一张很大的桌子，叫做`paypal_ipn_orders`. 在这张表中，我有 2 个重要的信息位，一行称为`item_name`，一行称为`sort_num`。我想使用某些参数从中提取记录`paypal_ipn_orders`并将它们放入一个名为`temp_table`. 我知道如何选择记录如下

```
SELECT `item_name`, `sort_num` 
FROM `paypal_ipn_orders`
WHERE `packing_slip_printed` = 0
AND LOWER(`payment_status`) = `completed`
AND `address_name` <> '' 
```

该查询选择了我想要移动到临时数据库的所有记录，我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:10:41.523

使用 MySQL 的[Insert Into Select](http://www.brightcherry.co.uk/scribbles/mysql-insert-select-example/)我在临时表的列中添加了通用数据类型，您需要找出表中的实际数据类型并使其相同。

```
CREATE TEMPORARY TABLE temp_table (
    item_name varchar(50), 
    sort_num int
);

INSERT INTO temp_table (item_name, sort_num)
SELECT `item_name`, `sort_num` 
FROM `paypal_ipn_orders`
WHERE `packing_slip_printed` = 0
AND LOWER(`payment_status`) = `completed`
AND `address_name` <> '' 
```

# php - 将一个表链接到第二个表并将数据从第一个表多次提取到第二个表

> ID：11993843
> 
> 赞同：0
> 
> 时间：2012-08-16T19:08:04.363
> 
> 标签：php, mysql

我有 2 张桌子 1 用于位置和 1 用于员工。在位置表中，我有 3 个字段：contact1、contact2 和 partner。我需要这些中的每一个从员工表中选择姓名、电子邮件和电话号码并显示出来。我似乎只能让它一次拉一个联系人。这是我所拥有的

```
SELECT officelocations_tbl.*, staff_tbl.*, city_tbl.*, state_tbl.*
FROM officelocations_tbl
JOIN city_tbl ON officelocations_tbl.cityID = city_tbl.cityID
JOIN state_tbl ON officelocations_tbl.stateID = state_tbl.stateID
JOIN staff_tbl ON staff_tbl.staffID = officelocations_tbl.contact1 
```

那只显示办公室信息和我希望它做这样的事情的一个联系人

```
SELECT officelocations_tbl.*, staff_tbl.*, city_tbl.*, state_tbl.*
FROM officelocations_tbl
JOIN city_tbl ON officelocations_tbl.cityID = city_tbl.cityID
JOIN state_tbl ON officelocations_tbl.stateID = state_tbl.stateID
JOIN staff_tbl ON staff_tbl.staffID = officelocations_tbl.contact1
JOIN staff_tbl ON staff_tbl.staffID = officelocations_tbl.contact2
JOIN staff_tbl ON staff_tbl.staffID = officelocations_tbl.partner 
```

但是这样做会给我一个错误

警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源......

是否有另一种方法通过使用人员 ID 并将其链接到另一个表中的三个不同字段来列出它们？

我在这里尝试了解决方案[如何正确使用联接/子查询从多个表中选择数据？(PHP-MySQL)](https://stackoverflow.com/questions/11175901/how-to-select-data-from-multiple-tables-using-joins-subquery-properly-php-mysq)但它无法识别 from 部分中的第二个 select 语句。我还尝试了 concat ，它说它不是有效的 sql 查询，内部连接也是如此。我正在使用 php/mysql 数据库。我在上面发布的消息是我在使用该页面上的任何示例时不断收到的消息。唯一改变的是错误所在的行。

我正在考虑只创建 4 个单独的 sql 语句。我知道有一种方法可以做到这一点，但我尝试过的方法似乎不起作用。

感谢您的任何帮助。

在下面提供帮助后编辑

好的，所以我让它显示，但有一个小问题，当我告诉它显示 sf1 的联系信息时，它只显示 2 个条目，而应该有 13 个条目。我总共有 29 个位置我希望能够显示并非所有位置都有contact1 或contact2，但都有合作伙伴。这是我为反映您的建议而编辑的代码：

```
 $sql_locations = "SELECT officelocations_tbl.*, 
                  sf1.firstName AS c1Firstname, sf1.lastName AS c1lastName, sf1.middleInitial AS c1middleInitial, sf1.suffix AS c1suffix, sf1.accredations AS c1accredations,
                  sf2.firstName AS c2Firstname, sf2.lastName AS c2lastName, sf2.middleInitial AS c2middleInitial, sf2.suffix AS c2suffix, sf2.accredations AS c2accredations,
                  sf3.firstName AS c3Firstname, sf3.lastName AS c3lastName, sf3.middleInitial AS c3middleInitial, sf3.suffix AS c3suffix, sf3.accredations AS c3accredations,
                  city_tbl.*, state_tbl.*
                FROM officelocations_tbl
                  JOIN city_tbl ON (officelocations_tbl.cityID = city_tbl.cityID)
                  JOIN state_tbl ON (officelocations_tbl.stateID = state_tbl.stateID)
                  JOIN staff_tbl sf1 ON (sf1.staffID = officelocations_tbl.contact1)
                  JOIN staff_tbl sf2 ON (sf2.staffID = officelocations_tbl.contact2)
                  JOIN staff_tbl sf3 ON (sf3.staffID = officelocations_tbl.partner)";
                $result_loc = mysql_query($sql_locations);

                while ($db_field = mysql_fetch_assoc($result_loc)) {
                    if ($db_field['c2Firstname'] == ""){
                        print $db_field['officeName'] . "<BR>";
                        print $db_field['address1'] . "<BR>";
                        print $db_field['cityName'] . ", " . $db_field['state_abreviation'] . " " . $db_field['zipCode']."<BR>";
                        print $db_field['c1Firstname'] . " " . $db_field['c1lastName'] . " ". $db_field['c1middleInitial'] . " ". $db_field['c1suffix']. " ". $db_field['c1accredations'] . "<BR><BR><BR><BR>";
                        print $db_field['c3Firstname'] . " " . $db_field['c3lastName'] . " ". $db_field['c3middleInitial'] . " ". $db_field['c3suffix']. " ". $db_field['c3accredations'] . "<BR>";
                    }else if ($db_field['c2Firstname'] != ""){
                        print $db_field['officeName'] . "<BR>";
                        print $db_field['address1'] . "<BR>";
                        print $db_field['cityName'] . ", " . $db_field['state_abreviation'] . " " . $db_field['zipCode']."<BR>";
                        print $db_field['c1Firstname'] . " " . $db_field['c1lastName'] . " ". $db_field['c1middleInitial'] . " ". $db_field['c1suffix']. " ". $db_field['c1accredations'] . "<BR>";
                        print $db_field['c2Firstname'] . " " . $db_field['c2lastName'] . " ". $db_field['c2middleInitial'] . " ". $db_field['c2suffix']. " ". $db_field['c2accredations'] . "<BR>";
                        print $db_field['c3Firstname'] . " " . $db_field['c3lastName'] . " ". $db_field['c3middleInitial'] . " ". $db_field['c3suffix']. " ". $db_field['c3accredations'] . "<BR><BR><BR><BR>";

                    } 
```

我确实试图让 if 语句说

```
 if ($db_field['c1Firstname'] != "" && $db_field['c2Firstname'] == "") 
```

但它似乎也没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:12:45.317

您在没有后缀的情况下多次加入 staff_tbl，请尝试以下操作：

```
SELECT officelocations_tbl.*, 
  sf1.FirstName AS c1Firstname, 
  sf2.FirstName AS c2Firstname, 
  sf3.FirstName AS partnerFirstname, 
  city_tbl.*, state_tbl.*
FROM officelocations_tbl
  JOIN city_tbl ON (officelocations_tbl.cityID = city_tbl.cityID)
  JOIN state_tbl ON (officelocations_tbl.stateID = state_tbl.stateID)
  LEFT OUTER JOIN staff_tbl sf1 ON (sf1.staffID = officelocations_tbl.contact1)
  LEFT OUTER JOIN staff_tbl sf2 ON (sf2.staffID = officelocations_tbl.contact2)
  LEFT OUTER JOIN staff_tbl sf3 ON (sf3.staffID = officelocations_tbl.partner) 
```

当然，您必须为您想要的所有列添加 sf1.[column2] AS c1Column2、sf2.[column2] AS c2Column2、sf3.[column2] AS partnerColumn2 等等`JOINS`。

`echo mysql_error();`您可以在运行后立即看到您的确切错误`mysql_query()`

其他读者注意：我根据以下问题编辑了我的答案

# ios - 在 iPhone 上播放歌曲时通过麦克风检测噪音

> ID：11993844
> 
> 赞同：13
> 
> 时间：2012-08-16T19:08:10.333
> 
> 标签：ios, iphone, audio, fft, noise

我正在制作一个应该播放简单音轨的应用程序，并让我知道在播放曲目时附近是否有任何噪音。这是通过在 iPhone 的扬声器上播放歌曲时从麦克风进行现场录音来完成的。任何不属于音乐播放的声音都被定义为噪音。

实现此功能的最简单方法是什么？

我已经在网上对其进行了广泛的研究，但我找不到任何可以为这个特定问题提供解决方案的东西。尽管它可能是我读到的不同技术的组合，但最终将成为解决方案。

**我已经实现**
的东西同时播放歌曲和录制音频。

**我尝试过的事情**
注意：由于我们鼓励添加我们已经尝试过的内容，因此我添加了以下部分。但我绝不是说这是解决问题的正确方法，这只是我尝试过的。

我破解了 aurioTouch2 示例应用程序：我所做的是播放歌曲一次并记录快速傅立叶变换值（以相当低的采样率保持记录的数据量较低）。然后当再次播放曲目时，我基本上会计算（每个时间步长）使用实时回放 fft 数据和记录的 fft 数据构建的输出图之间的相关系数（所以当你放应用程序处于 fft 模式）。
这种“有点”有效。当房间中有过多的声音/噪音时，相关系数明显较低，但它不是很敏感，并且还取决于记录 fft 数据时使用的音量级别。最后，我认为这可能不是最好的方法。

有人认为这是可能的吗？如果是这样，最好的方法是什么？
请询问您是否需要更多说明！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:21:28.843

您只想知道，环境中有多少噪音，并且您有两个信号，原始信号和记录信号？那么你的解决方案就很好了。您需要同步信号并找到一些数字，这会给您带来相似性。您甚至可以避免 fft 并使用原始信号（在适当的演示中）。

自相关是同步信号的好方法。Autocorellation-index 是一个数字，可以为您提供相似度。

当然，如果音量越低，噪音（相对于音乐）就越大，影响越大。由于您应该能够检测到音量，因此您应该能够添加一些校正因子。但由于这是一个“自然”问题，我猜每个算法都会有这个问题。

另一种解决方案是从记录的信号中减去原始信号，然后你应该得到噪声作为两个信号的差异。然后你也有噪音的力量......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T16:37:09.503

最后我们决定不在应用程序中执行此操作。我有一个演示工作，我首先对歌曲进行校准，收集一组最主要的频率，对环境房间噪音做同样的事情，并在歌曲播放时在决策过程中使用这些频率。它工作得很好，虽然我觉得它仍然需要很多调整。以我对音频相关编程的有限知识，这是我能做的最好的事情:)

# php - 如何在数据库操作之前验证域对象数据？

> ID：11993847
> 
> 赞同：0
> 
> 时间：2012-08-16T19:08:17.140
> 
> 标签：php, model-view-controller, domain-object

我将使用一个抽象（简单）的示例来说明问题：`CarDomainObject`，如下：（示例mysql数据类型列在成员旁边）

```
class carDomainObject extends DomainObjectAbstract {

    public $uid;                //int
    public $make;               //varchar
    public $model;              //varchar
    public $productionDate;     //timestamp
    public $doors;              //tinyint

} 
```

```
class DomainObjectAbstract {

    public function setData(array $data=array())
    {
        foreach ($data as $key => $value)
        {
            if ( ! empty($key))
            {
               $this->$key = $value;
            }
        }
    }

    //if $val is not passed, checks for ANY set value,
    //  else checks that $this->$val is set (dirty)
    public function isDirty($val=false)
    {
        foreach(get_object_vars($this) as $key => $property)
        {
            if( ! is_null($property) && ( ! $val || $key == $val))
            {
                return true;
            }
        }
        return false;
    }

} 
```

假设我们要在数据库中插入一辆新车，所以我们设置一些值：

```
$carDomainObject->setData(array('make' => 'ford', 'model' => 'taurus')); 
```

现在未设置的值仍然是`NULL`，这对于该`isDirty()`方法很有效。此模式不适用于将对象（已像上面那样初始化，只有某些值）插入数据库时​​，其中`NULL`可能不是列的有效值。

**所以，我的问题是：**我们如何验证域对象中的每个数据片段是否已准备好插入数据库？我看到它的方式有几个选项：

1.  如果我们对成员变量使用默认值（`0`对于 int、`''`对于 varchar 等），那么`isDirty()`会变得更加复杂，因为空值检查是不够的。但是，检查是否能够插入数据变得微不足道，因为可以毫无问题地插入默认值

2.  如果我们坚持使用`NULL`默认值，那么`isDirty()`保持相当简单，但确保数据为数据库做好准备变得复杂。

3.  单独验证每个变量，这取决于 DO 会很快变得丑陋。

4.  在 MySQL 中使用默认值 - 对我来说不是一个真正的选项，但通常是一个有效的选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:41:40.277

> [我感觉你参加了[这篇文章的](https://stackoverflow.com/a/10988966/727208)一部分，但误解了问题，在那里解决了。]

您似乎正在尝试确定模型是否有效，然后再保存。但是你的结构有缺陷：

1.  如果您使用单个 setter，那么当您尝试添加越来越多的条件时，此 setter 将变得越来越复杂。此外，通过避免为每个参数设置单独的设置器，您失去了实际验证参数的能力。

    当您为域对象设置无效值时，它应该创建内部错误状态。

2.  您的验证假定所有值都必须不为空。如果他们可以`NULL`呢？如果值符合业务规则，而不是数据库设置的约束，则参数验证应检查。

3.  当 mapper 试图在数据库中存储无效值时，会导致错误。如果您使用正确设置的 PDO 实例，它将引发异常。你如何处理那个异常，那是你的选择。域对象不负责数据库中的数据完整性。

# android - Android：从字符串解析简单的数学公式

> ID：11993849
> 
> 赞同：1
> 
> 时间：2012-08-16T19:08:19.897
> 
> 标签：android

我让用户在 EditText 字段中输入数字，但我希望他们也能够在字段中输入 100+32+10。我只希望简单的表达式，常见的四个函数。事实上，只是添加也会减少它。

就加法而言，我想拆分字符串并自己做并不难，但我很想知道是否有一个库可以更干净地做我想做的事情。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:14:02.367

有大量的 Java 表达式库。

我在 Android 上使用[JEXL](http://commons.apache.org/jexl/)没有任何问题，但还有很多其他选择。

全面的 EL 可能超出您的需要；基本上世界上的每个人都编写了简单的表达式解析器，它们可能足以满足您的需求，或者自己编写一个快速的解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:12:07.170

只是为了让大家知道，我通过编写这几行代码解决了我的问题：

```
public float calculateBillAmount(String expression){

    String delim = "\\+";
    String[] stringTokens = expression.split(delim);
    float result = 0;

    for (int i = 0; i < stringTokens.length; i++)   {
        result += Float.parseFloat(stringTokens[i]);
    }

    return result;
} 
```

# javascript - 重置更改模型事件的集合？

> ID：11993850
> 
> 赞同：0
> 
> 时间：2012-08-16T19:08:23.673
> 
> 标签：javascript, model-view-controller, backbone.js

我有这个主干脚本，它有一个视图和一个充当控制器的模型，以及一个从服务器获取数据的集合`url: '/search/:term'`。

```
 var Items = Backbone.Collection.extend({
          initialize: function(terms){
            this.fetch();
        }
          url: 'search/:term'
    });

   var Controller = Backbone.Model.extend({
       defaults:{
        term: ""
     },
      initialize: function(opts){

        this.on('change:term', function(term){
            console.log(this.get("term"));
          // every time term changes i want to refresh the collection with the new data
          // so it will fetch data from url:'search/ + term'
        }); 
```

有人可以帮我解决这个问题吗？谢谢。} });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:22:59.830

在主干上下文中，视图充当控制器（从 mvc 中读取控制器）。你能尝试做这样的事情吗？

```
YourView = Backbone.View.extend({
  events : { 
    'change #dom-id' : 'handleChange' //function to fire when you change the dom
  },
  initialize: function(){
    this.collection.bind("reset", updateView); //when collection is done, updateView fires
  }, 
  render: function(){
    //do your render logic here, use a template etc.. //initial rendering
  },
  handleChange : function(changeEvent){
    //get value from dom-element, tell the collection to 
    //fetch again with the new term
  },
  updateView : function(){
    //Code that fires when the collection is done fetching 
  }
}); 
```

# vim - 如何在 Vim 中删除（不剪切）？

> ID：11993851
> 
> 赞同：211
> 
> 时间：2012-08-16T19:08:24.257
> 
> 标签：vim, copy-paste

如何删除一行而不将其放入我的默认缓冲区？

例子：

```
line that will be copied.

line that I want to be substitued with the previous one. 
```

我正在尝试做的事情：

```
yy
dd
p 
```

但是 Vim 将最近复制的字符串替换为已删除（剪切）的字符串。我知道我可以使用像, `"1yy`, `dd`then之类的缓冲区`"1p`，但是我总是忘记将复制的字符串放在缓冲区中，然后我需要先粘贴我的内容（将被复制的行），然后删除我想要的内容（我想要的行用前一个代替。）

如何在不复制的情况下真正删除 Vi(m) 中的文本？

另一个相关问题是如何在插入模式下转发删除单词？我想要类似于`Ctrl`+的东西`w`。

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-12-18T15:52:32.810

**黑洞寄存器** `"_`可以解决问题，但有一个更好的解决方案：

当您使用`p`命令输入该行时，您将粘贴（易失性）**默认寄存器** `""`的内容，该寄存器已被`dd`. 但是您仍然可以从 (non volatile) **yank register 粘贴** `"0`，不会被 delete 命令覆盖`dd`。

因此，这些是您要根据您的示例使用的命令：

```
yy
dd
"0p 
```

* * *

## 回答 #2

> 赞同：177
> 
> 时间：2012-08-16T19:13:18.920

使用“黑洞寄存器”，`"_`真正删除一些东西：`"_d`。
用于`"_dP`粘贴某些内容并保留以供进一步粘贴。

对于第二个问题，您可以使用`<C-o>dw`. `<C-o>`用于在不离开*插入*模式的情况下执行普通命令。

当然，您可以设置自己的映射以节省输入。我有这些：

```
nnoremap <leader>d "_d
xnoremap <leader>d "_d
xnoremap <leader>p "_dP 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-08-16T19:23:30.210

那是我不喜欢 vim 的地方之一......我最终映射`dd`到我的 .vimrc 中的黑洞寄存器，从那以后生活一直很好：

```
nnoremap d "_d
vnoremap d "_d 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2015-05-24T13:15:32.460

以下映射将产生：

*   d => "删除"
*   领导者 d => “切”

```
nnoremap x "_x
nnoremap d "_d
nnoremap D "_D
vnoremap d "_d

nnoremap <leader>d ""d
nnoremap <leader>D ""D
vnoremap <leader>d ""d 
```

此外，将“leader”键设置为逗号是一个很好的做法，例如：

```
let mapleader = ","
let g:mapleader = "," 
```

这两个片段将使“，d”成为您的新剪切命令。

如果您想将这些映射与共享系统剪贴板配置一起使用，请参阅[https://github.com/pazams/d-is-for-delete的更多详细信息](https://github.com/pazams/d-is-for-delete)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-08-16T19:13:08.947

您可以使用它`"_d`来防止内容覆盖您拉动的文本。您可以将删除或删除的文本存储在您想要的任何寄存器中`"`，并且`_`是“黑洞”寄存器，您可以在其中发送您不关心的内容。

有关更多信息，您可以键入`:help "_`或`:help deleting`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-25T02:11:55.307

我`noremap ' "_`在我的 .vimrc 中使用

这保持了 的行为`dd`，所以我可以像以前一样使用它来剪切。

但是当我真的想删除某些东西时，只需使用前缀`'`。例如：`'dd`,`'dw`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-18T00:33:22.377

我结束了

```
nnoremap p "0p
nnoremap P "0P
vnoremap p "0p
vnoremap P "0P
vnoremap x "0x
nnoremap x "0x 
```

始终从 0 寄存器而不是未命名的寄存器粘贴。在可视模式下使用`x`删除到 0 寄存器。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-11-03T14:41:51.110

```
yy
Vx
p 
```

在可视模式下，`x`会删除所选内容，因此如果要删除整行，请先按`V`选择可视模式下的行，然后按`x`删除所选内容。

# jaxb - CXF Jaxb 编组：性能下降

> ID：11993855
> 
> 赞同：1
> 
> 时间：2012-08-16T19:08:27.797
> 
> 标签：jaxb, cxf

我正在为我的 Web 服务使用 CXF：JAXB。典型的输出 xml 大小为 7-8mb。在尝试进行负载测试时，我发现当通过应用程序请求接近 30 个并发服务时，我猜只有编组会发生的 CXF 部分需要接近 30-35 秒，这是在应用程序部分完成之后.

应用程序 -> CXF

我正在使用默认的东西来启用编组部分。JAXB 的版本是 (jaxb-impl-2.1.3.jar,jaxb-api-2.1.jar )，CXF 是 2.3.2 。

当我开始发送一个空的 xml 响应与一个完整的响应相比时，我开始知道这种延迟，同时仍在运行应用程序部分，我看到差异约为 30-35 秒。

我该如何解决这个问题：更改 JAXB 的解析器，例如 SAX、Stax 会有所帮助。

# c# - 读取每个特定节点的所有 XML 子节点

> ID：11993857
> 
> 赞同：5
> 
> 时间：2012-08-16T19:08:48.313
> 
> 标签：c#, linq

我需要阅读`Child Nodes`我的所有`<Imovel>`标签，问题是我的 XML 文件中有多个（一个）`<Imovel>`标签，每个标签之间的区别`<Imovel>`是一个名为 ID 的属性。

这是一个例子

```
<Imoveis>
   <Imovel id="555">
      <DateImovel>2012-01-01 00:00:00.000</DateImovel>
      <Pictures>
          <Picture>
              <Path>hhhhh</Path>
          </Picture>
      </Pictures>
      // Here comes a lot of another tags
   </Imovel>
   <Imovel id="777">
      <DateImovel>2012-01-01 00:00:00.000</DateImovel>
      <Pictures>
          <Picture>
              <Path>tttt</Path>
          </Picture>
      </Pictures>
      // Here comes a lot of another tags
   </Imovel>
</Imoveis> 
```

我需要读取每个标签的所有`<Imovel>`标签，并且在我在`<Imovel>`标签中进行的每次验证结束时，我需要进行另一次验证。

所以，我想我需要做 2 （两个）`foreach`或 a`for`和 a `foreach`，我不太了解，`LINQ`但请按照我的示例

```
XmlReader rdr = XmlReader.Create(file);
XDocument doc2 = XDocument.Load(rdr);
ValidaCampos valida = new ValidaCampos();

//// Here I Count the number of `<Imovel>` tags exist in my XML File                        
for (int i = 1; i <= doc2.Root.Descendants().Where(x => x.Name == "Imovel").Count(); i++)
{
    //// Get the ID attribute that exist in my `<Imovel>` tag
    id = doc2.Root.Descendants().ElementAt(0).Attribute("id").Value;

    foreach (var element in doc2.Root.Descendants().Where(x => x.Parent.Attribute("id").Value == id))
    {
       String name = element.Name.LocalName;
       String value = element.Value;
    }
} 
```

但是效果不是很好，在我的`foreach`声明中因为我的`<Picture>`标签，她的父标签没有 ID 属性。

有人可以帮我做这个方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T19:15:54.677

您应该可以使用两个 foreach 语句来做到这一点：

```
foreach(var imovel in doc2.Root.Descendants("Imovel"))
{
  //Do something with the Imovel node
  foreach(var children in imovel.Descendants())
  {
     //Do something with the child nodes of Imovel.
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-29T01:12:48.887

尝试这个。System.Xml.XPath 会将 xpath 选择器添加到 XElement。使用 xpath 查找元素更快更简单。

您不需要 XmlReader 和 XDocument 来加载文件。

```
XElement root = XElement.Load("test.xml");

foreach (XElement imovel in root.XPathSelectElements("//Imovel"))
{
  foreach (var children in imovel.Descendants())
  {
     String name = children.Name.LocalName;
     String value = children.Value;

     Console.WriteLine("Name:{0}, Value:{1}", name, value);
  }

   //use relative xpath to find a child element
   XElement picturePath = imovel.XPathSelectElement(".//Pictures/Picture/Path");
   Console.WriteLine("Picture Path:{0}", picturePath.Value);
} 
```

请包括

```
System.Xml.XPath; 
```

# sql-server - 我需要检查 CHAR 字段中的数字

> ID：11993859
> 
> 赞同：0
> 
> 时间：2012-08-16T19:08:56.013
> 
> 标签：sql-server, sql-server-2008, constraints

如何检查 a 中的字段`table`以验证该`CHAR(X)`字段是否仅包含数字、和 X 位并返回每个故障`not NULL`的特定值？`error`我能想到的任何东西都非常笨拙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:29:36.297

尝试使用`TRY_CONVERT`语法检查 null 的数据验证

```
SELECT TRY_CONVERT(int,'21245') 
```

类似下面的内容可能有助于匹配不正确的字段

```
SELECT * FROM  Table_1 where LTRIM(RTRIM(fieldname)) like '%[^0-9]%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:43:41.607

## 结果集

```
insert into CheckConstraint(Digit)values(1) //Failed

insert into CheckConstraint(Digit)values('ws') //Failed

insert into CheckConstraint(Digit)values(12345) //Passed 
```

## 为此，您的表应该是这样的，以避免 Nullable 值

```
CREATE TABLE CheckConstraint
(
  Digit Char(5) Not Null
) 
```

## 创建函数

```
Create FUNCTION Validations() RETURNS INT AS BEGIN
  DECLARE @ret INT  = 0 ;
  SELECT @ret = IsNull(COUNT(Digit), 0) FROM CheckConstraint 
  WHERE Digit not like '[0-9]%'
  RETURN IsNUll(@ret, 0);
END; 
```

## 避免非数字字符的约束

```
alter TABLE CheckConstraint
  add CONSTRAINT CheckValidations CHECK ((dbo.Validations() = 0)); 
```

## 避免少于或多于 5 个字符的约束

```
ALTER TABLE [dbo].CheckConstraint
ADD CONSTRAINT [MinLengthConstraint] CHECK (DATALENGTH(Digit) = 5) 
```

# php - 在 CakePHP 中显示最新评论（站点范围内）——正确的方法是什么？

> ID：11993864
> 
> 赞同：0
> 
> 时间：2012-08-16T19:09:24.220
> 
> 标签：php, cakephp

我需要有一个站点范围的侧边栏，其中包含 5 条对文章的最新评论。我应该在默认布局中使用带有 requestAction + 缓存的元素还是可以以更简单的方式实现？我使用 CakePHP 2.2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:21:13.953

无需使用 requestAction，只需将代码放入`AppController`'s`beforeFilter`方法中，然后将侧边栏放入布局中。

# sql - heroku activerecord 查询错误

> ID：11993867
> 
> 赞同：0
> 
> 时间：2012-08-16T19:09:33.220
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, postgresql

我目前在 Heroku 上有一个应用程序，它不断地从这个 ActiveRecord 查询中抛出错误。

```
if category == "-1"
    where('category_id IS null')
else
    where('category_id IS ?', category)
end 
```

'category_id IS null 的第一个查询可以正常工作，但第二个查询会引发这样的错误：

```
2012-08-16T18:58:03+00:00 app[web.1]:
2012-08-16T18:58:03+00:00 app[web.1]:
2012-08-16T18:58:03+00:00 app[web.1]: Started GET "/items?cpath=4" for 204.154.121.30            at 2012-08-16 18:58:03 +0000
2012-08-16T18:58:08+00:00 app[web.1]:
2012-08-16T18:58:08+00:00 app[web.1]: ActiveRecord::StatementInvalid (PGError: ERROR:  syntax error at or near "4"
2012-08-16T18:58:08+00:00 app[web.1]: LINE 1: SELECT COUNT(*) FROM "items"  WHERE (category_id IS 4)
2012-08-16T18:58:08+00:00 app[web.1]:                                                             ^
2012-08-16T18:58:08+00:00 app[web.1]:   app/controllers/items_controller.rb:30:in `index'
2012-08-16T18:58:08+00:00 app[web.1]: : SELECT COUNT(*) FROM "items"  WHERE (category_id IS 4)):
2012-08-16T18:58:08+00:00 app[web.1]:
2012-08-16T18:58:08+00:00 app[web.1]:
2012-08-16T18:58:08+00:00 app[web.1]: cache: [GET /items?cpath=4] miss
2012-08-16T18:58:08+00:00 app[web.1]:   Processing by ItemsController#index as HTML
2012-08-16T18:58:08+00:00 app[web.1]:   Parameters: {"cpath"=>"4"}
2012-08-16T18:58:08+00:00 app[web.1]: Completed 500 Internal Server Error in 3ms
2012-08-16T18:58:08+00:00 heroku[router]: GET yisifahan.herokuapp.com/items?cpath=4 dyno=web.1 queue=0 wait=0ms service=
5026ms status=500 bytes=728
2012-08-16T18:58:08+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-08-16T18:58:08+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-08-16T18:58:09+00:00 heroku[web.1]: Process exited with status 137 
```

有谁知道如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:15:58.310

`where(category_id: category)`改为与数据库无关。

您在开发环境中有 mysql 或 sqlite 吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:16:32.343

我相信`IS`比较运算符对相等无效。（http://www.postgresql.org/docs/9.2/static/functions-comparison.html）

所以你的片段应该看起来像：

```
if category == "-1"
  where('category_id IS null')
else
  where('category_id = ?', category)
end 
```

老实说，您应该对这些情况进行一些测试来检查您的代码。它不应该这样进入服务器。我还建议您在开发环境中使用 postgres 数据库，以便确保您的代码对其架构有效。

# php - php %（mod 函数）在大数上变为负数。如何摆脱它？

> ID：11993869
> 
> 赞同：9
> 
> 时间：2012-08-16T19:09:37.467
> 
> 标签：php

如何正确使用 % 不会得到负面结果？

```
<?php 
    $x = 1103515246*12345;
    echo $x." ".decbin($x)."</BR>";
    $y = $x % (1 << 15);
    echo $y." ".decbin($y)."</BR>";
?> 
```

输出：

```
13622895711870      11010011110111000001011001111110

-27010              11111111111111111001011001111110 
```

解决

`$y = bcmod($x,(1 << 15));`解决问题。感谢您的快速帮助！这是我的第一个问题！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T19:12:12.697

问题是，当`$x`你使用`integer``float``int``%`

尝试使用`BCMath`大数字代替

# html - CSS代码到文本上方的边距空间仅不影响背景？

> ID：11993870
> 
> 赞同：7
> 
> 时间：2012-08-16T19:09:39.130
> 
> 标签：html, css, text, alignment, margin

我有一个同时具有背景图像和文本的类，我试图找出一种方法来操纵仅文本上方的空间，使用“边距”标签将改变整个事物的位置（图像+文本） ，我只需要控制文本。

text-indent 让我对水平间距有一些控制，我需要一些东西来更好地控制文本上方和下方的空间，只有当这种东西存在时。

这是 CSS 类：

```
.contactb { float:left; margin:0 5px 0 0; padding:0 0; background:url(images/contact_b.png) top no-repeat; display:block; width:108px; height:57px; font-family: 'hand-webfont'; color:black; font-size:17px; } 
```

这是HTML代码：

```
<li><a href="contact.html" class="contactb">Contact</a></li> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T19:10:50.070

您正在寻找的只是“填充”。

```
.myClass {
 padding-top:10px
 padding-bottom:10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:33:20.357

这是我认为您正在尝试做的一个工作示例：http: [//jsfiddle.net/yhV78/](http://jsfiddle.net/yhV78/)

诀窍：

1.  创建一个包含您的背景图像的 div（在我的情况下，背景是兔子）
2.  创建一个包含您的内容的内部 div（或一系列 div）。您可以通过调整内部 div 上的填充或通过相对定位和绝对定位的组合来定位它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-30T11:41:25.617

诀窍是将 padding 与[background-origin](http://www.w3schools.com/cssref/css3_pr_background-origin.asp)结合起来......虽然，它仅在支持 CSS3 的浏览器中受支持（不支持较旧的 IE 版本：< IE9）

这

**背景来源：边框框；**

加上适当的**填充**对我来说很好......（背景原点的默认值是填充框，这就是原因，单独填充对你不起作用......）

# computer-science - 乔姆斯基范式转换

> ID：11993871
> 
> 赞同：1
> 
> 时间：2012-08-16T19:09:42.397
> 
> 标签：computer-science, chomsky-normal-form

我需要你尽快的帮助。我应该转换为乔姆斯基范式。

```
S -> 01S | XY

X -> 110Y | 0 | ε

Y -> YY | 1 
```

我尝试过很少，但我总是卡住，因为我有这些混合部件，例如 110Y ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-25T08:57:04.610

有点晚了，但还是尽快：

开始语法：

```
S → 01S | XY
X → 110Y | 0 | ε
Y → YY | 1 
```

将串联拆分为单独的产生式：

```
S → 01S
S → XY
X → 110Y
X → 0
X → ε
Y → YY
Y → 1 
```

删除 epsilon（内联`X`）：

```
S → 01S
S → 110YY
S → 0Y
S → Y
Y → YY
Y → 1 
```

删除生产`S → Y`：

```
S → 01S
S → 110YY
S → 0Y
S → YY
S → 1
Y → YY
Y → 1 
```

用右侧有符号的新产生式替换所有终端符号：

```
S → ABS
S → BBAYY
S → AY
S → YY
S → 1
Y → YY
Y → 1
A → 0
B → 1 
```

打破所有右侧有两个以上非终结符号的产生式：

```
S → CS
S → DE
S → AY
S → YY
S → 1
Y → YY
Y → 1
A → 0
B → 1
C → AB
D → BB
E → AF
F → YY 
```

然后你就完成了。

# python - Python：为什么我的列表在我没有实际更改时会更改？

> ID：11993878
> 
> 赞同：5
> 
> 时间：2012-08-16T19:10:11.253
> 
> 标签：python, list, alias

新手有问题，所以请温柔：

```
list = [1, 2, 3, 4, 5]
list2 = list

def fxn(list,list2):
    for number in list:
        print(number)
        print(list)
        list2.remove(number)
        print("after remove list is  ", list, " and list 2 is  ", list2)
    return list, list2

list, list2 = fxn(list, list2)
print("after fxn list is  ", list)
print("after fxn list2 is  ", list2) 
```

这导致：

```
1
[1, 2, 3, 4, 5]
after remove list is   [2, 3, 4, 5]  and list 2 is   [2, 3, 4, 5]
3
[2, 3, 4, 5]
after remove list is   [2, 4, 5]  and list 2 is   [2, 4, 5]
5
[2, 4, 5]
after remove list is   [2, 4]  and list 2 is   [2, 4]
after fxn list is   [2, 4]
after fxn list2 is   [2, 4] 
```

我不明白为什么当我只做`list2.remove()`而不是做时 list 会发生变化`list.remove()`。我什至不确定要使用什么搜索词来弄清楚。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T19:11:35.483

发生这种情况的原因可以在这里找到：

```
mlist = [1,2,3,4,5]
mlist2 = mlist 
```

第二个语句“指向” `mlist2`（`mlist`即，它们都引用*同一个*列表对象）并且您对其中一个所做的任何更改都会反映在另一个中。

要制作副本，请尝试以下操作（使用切片操作）：

```
mlist = [1,2,3,4,5]
mlist2 = mlist[:] 
```

如果您对切片表示法感到好奇，这个 SO 问题[Python Lists(Slice method)](https://stackoverflow.com/questions/10621021/python-listsslice-method)将为您提供更多背景知识。

*最后*，作为标识符使用不是一个好主意，`list`因为 Python 已经将这个标识符用于它自己的数据结构（这就是我`m`在变量名前面添加“”的原因）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T19:11:49.943

那是因为在你完成 assignment 之后`list`和`list2`都指的是同一个列表`list2=list`。

试试这个，看看它们是指相同的对象还是不同的对象：

```
id(list)
id(list2) 
```

一个例子：

```
>>> list = [1, 2, 3, 4, 5]
>>> list2 = list
>>> id(list)
140496700844944
>>> id(list2)
140496700844944
>>> list.remove(3)
>>> list
[1, 2, 4, 5]
>>> list2
[1, 2, 4, 5] 
```

如果您确实想创建`list`不`list2`引用原始列表而是列表副本的副本，请使用切片运算符：

```
list2 = list[:] 
```

一个例子：

```
>>> list
[1, 2, 4, 5]
>>> list2
[1, 2, 4, 5]
>>> list = [1, 2, 3, 4, 5]
>>> list2 = list[:]
>>> id(list)
140496701034792
>>> id(list2)
140496701034864
>>> list.remove(3)
>>> list
[1, 2, 4, 5]
>>> list2
[1, 2, 3, 4, 5] 
```

另外，不要`list`用作变量名，因为最初`list`是指类型列表，但是通过定义您自己的`list`变量，您隐藏了`list`引用类型列表的原始变量。例子：

```
>>> list
<type 'list'>
>>> type(list)
<type 'type'>
>>> list = [1, 2, 3, 4, 5]
>>> list
[1, 2, 3, 4, 5]
>>> type(list)
<type 'list'> 
```

# apache-flex - 如何在 Flex 中查找对象的样式继承？

> ID：11993882
> 
> 赞同：2
> 
> 时间：2012-08-16T19:10:17.607
> 
> 标签：apache-flex, styles, flex4, flex-spark

我想知道哪些 CSS 样式正在影响我的 UIComponent 以及从何处影响。

所以解决方案将列出给定组件的样式和值：

```
<s:Label id="myLabel" />

<s:Group id="myLabel" fontFamily="Tahoma"/>
    <s:Label id="myOtherLabel" />
</s:Group> 
```

然后代码：

```
var styles:Object = StyleManager.getStyles(myLabel);
trace(styles); 
```

fontFamily - Arial
颜色 - 0
fontSize - 12
textAlign - 左
等

然后我可以找出风格从哪里获得它的价值：

```
var styleParent:Object = StyleManager.getStyle(myLabel, "fontFamily");
trace(styleParent); // "s|Label" declaration or global? 
```

并且样式查找：

```
var styleParents:Array = StyleManager.getStyleInheritence(myOtherLabel, "fontFamily");
trace(styleParent); // inline which overrides "s|Group fontFamily" which overrides "s|Label" which overrides global 
```

当我说覆盖时，我的意思是特异性。内联 fontFamily 声明比标签父组上的内联 fontFamily 声明更具体，后者比 s|Label 类型声明更具体，后者比全局 fontFamily 声明更具体。

此图像让您了解 Firebug 如何为您提供所选对象的样式信息：

![在此处输入图像描述](../Images/412b026a9d6c2f074542a2a59679c129.png)

**例如：**

```
var myInheritenceChain:Array = getStylesInheritanceForTarget(myButton);

trace(myInheritanceChain); // output is an array of 

[0] {subject:instance, type:inline, styles: {fontFamily:"Noteworthy", color:"blue"}
[1] {subject:spark.components.Button, type:type, styles: {fontFamily:"Bidoni", color:"red"...}
[2] {subject:#myButton, type:id, styles: {fontFamily:"Futura", color:"green"}
[3] {subject:.myClassStyle, type:class, styles: {fontFamily:"Times New Roman", color:"yellow"...}
[4] {subject:global, type:something, styles: {fontFamily:"Helvetica", color:"black"...}
[5] {subject:*, type:something, styles: {fontFamily:"Bauhaus", color:"black"...} 
```

这样您就可以看到为什么以及如何将样式（例如 fontFamily）设置为它设置的值，如下所示：

```
var myInheritenceChain:Array = getStylesInheritanceForTarget(myButton, "fontFamily"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:09:02.163

您可以创建`package mx.styles`. 复制到这个包文件 StyleProtoChain、CSSStyleDeclaration、CSSMergedStyleDeclaration 并实现你在这个类中需要的功能。

例如，您可以覆盖

```
override mx_internal function addStyleToProtoChain(chain:Object,
                                          target:DisplayObject,
                                          filterMap:Object = null):Object
{
    // If we have a local style, then add only it to the chain. It will
    // take are of adding its parent to the chain.
    // If then is no style, but a parentStyle, then add the parent Style
    // to the chain.
    if (style)
        return style.addStyleToProtoChain(chain, target, filterMap);
    else if (parentStyle)
        return parentStyle.addStyleToProtoChain(chain, target, filterMap);
    else
        return chain;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:37:43.857

您可以使用静态 ObjectUtil.toString() 方法来调试组件的继承样式，以显示组件的继承样式属性。

演示： [http ://blog.flexexamples.com/2007/12/24/displaying-a-combobox-controls-inherited-styles-in-flex/](http://blog.flexexamples.com/2007/12/24/displaying-a-combobox-controls-inherited-styles-in-flex/)

```
<mx:Script>
        <![CDATA[
            import mx.utils.ObjectUtil;

            private function init():void {
                textArea.text = ObjectUtil.toString(comboBox.inheritingStyles);
            }
        ]]>
    </mx:Script> 
```

# c# - Linq to Entities 使用不正确的参数

> ID：11993883
> 
> 赞同：1
> 
> 时间：2012-08-16T19:10:21.600
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我已经为此工作了将近 9 个小时，只是不明白发生了什么。我创建了一个高级查询生成器，允许用户将部分添加到他们的 where 子句中。我的计划是利用延迟执行。问题是我一直得到 0 作为我知道有记录的东西的计数。更令人费解的是，只有在我有超过 1 个查询时才会发生这种情况。因为我不能给你我的数据模型和我所有的代码，所以我总结了一下，这里是一个基本的代码示例：

```
 string foo = "smith";
        var result = context.claims.AsQueryable();
        var temp = from p in result
                   where p.Prescription.Patient.last_name.Contains(foo)
                   select p;
        foo = "jo";
        temp = from p in temp
               where p.Prescription.Patient.first_name.Contains(foo)
               select p;
        int count = temp.Count(); 
```

现在，我的期望是，这会给我一个返回结果的查询，其中患者的姓氏类似于“%smith%”，名字类似于“%jo%”。但是，这是执行的查询：

```
 exec sp_executesql N'SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM     [dbo].[claim] AS [Extent1]
    INNER JOIN [dbo].[Prescription] AS [Extent2] ON [Extent1].[prescriptionId] = [Extent2].[id]
    LEFT OUTER JOIN [dbo].[Patient] AS [Extent3] ON [Extent2].[patient_id] = [Extent3].[id]
    LEFT OUTER JOIN [dbo].[Prescription] AS [Extent4] ON [Extent1].[prescriptionId] = [Extent4].[id]
    LEFT OUTER JOIN [dbo].[Patient] AS [Extent5] ON [Extent4].[patient_id] = [Extent5].[id]
    WHERE ([Extent3].[last_name] LIKE @p__linq__0 ESCAPE N''~'') AND ([Extent5].[first_name] LIKE @p__linq__1 ESCAPE N''~'')
)  AS [GroupBy1]',N'@p__linq__0 nvarchar(4000),@p__linq__1 nvarchar(4000)',**@p__linq__0=N'%jo%',@p__linq__1=N'%jo%**' 
```

从执行的查询可以看出，我没有得到预期的结果。相反，它将 linq 查询上的两个参数都设置为变量的最后一个值设置的值。

有人可以解释为什么会这样吗？我找到了一种解决方法，但它并不漂亮。我必须为每个可能的列声明一个变量并将该变量 = 设置为该值，然后在 linq 语句中使用该变量：

```
 string foo = "smith", foo2 = "jo";
        var result = context.claims.AsQueryable();
        var temp = from p in result
                   where p.Prescription.Patient.last_name.Contains(foo)
                   select p;
        temp = from p in temp
               where p.Prescription.Patient.first_name.Contains(foo2)
               select p;
        int count = temp.Count(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:51:03.560

```
int count = result.Count(x=> x.Prescription.Patient.last_name.Contains(foo) && 
                             x.Prescription.Patient.first_name.Contains(foo2)); 
```

或者

```
var result = (from p in result
              where (p.Prescription.Patient.last_name.Contains(foo) && 
                     p.Prescription.Patient.first_name.Contains(foo2))
              select p).Count(); 
```

还可以看看使用[PredicateBuidler](http://www.albahari.com/nutshell/predicatebuilder.aspx)动态组合表达式谓词。如果您需要动态构建混合 && 和 || 的复杂查询，它会很有用。

# c# - ASP.NET 项目中弹出窗口的全局设置在哪里？

> ID：11993884
> 
> 赞同：-1
> 
> 时间：2012-08-16T19:10:21.437
> 
> 标签：c#, javascript, asp.net, html, css

我从一个已经离开我的小组的小组成员那里继承了一个项目，我一直遇到弹出窗口问题。我一次又一次地检查了我的整个项目，但我找不到全局设置弹出窗口设置的设置。

网站上的所有弹出窗口都设置为特定的高度和宽度，并关闭工具栏、菜单栏、调整大小功能。

我检查过：site.master、site.master.cs、home.aspx、home.aspx.cs、所有 javascript/html、CSS、.js 文件……等等，但没有任何改变弹出窗口设置。我应该寻找另一个配置弹出窗口的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:14:47.077

在您的 javascript 文件 ( `*.js`) 中搜索对`window.open(`. 第三个参数是设置对象，它控制打开的窗口的属性。

如果它引用一个变量而不是硬编码字符串，请在您的 javascript 文件中搜索该变量的声明。

# jsf-2 - 你如何使用 DefaultTreeNode(nodeType, data, parentNode)？

> ID：11993898
> 
> 赞同：3
> 
> 时间：2012-08-16T19:11:27.537
> 
> 标签：jsf-2, primefaces

你如何使用 DefaultTreeNode(nodeType, data, parentNode)？

基本上，如果我这样做：

```
treeChild = new DefaultTreeNode("action", data, treeParent); 
```

我的树视图是空白的。

如果我改用这个：

```
treeChild = new DefaultTreeNode(data, treeParent); 
```

然后我的树视图显示。

DefaultTreeNode(nodeType, data, parentNode) 坏了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:30:54.507

我相信我找到了解决方案。这里是：

1 - 在 tree.xhtml 中，我必须为每个节点类型包含一个带有**treeNode元素的****树元素。**

 **```
<p:tree id="treeSingle" 
    value="#{treeBean.root}" 
    var="node"
    selectionMode="single"
    selection="#{treeBean.selectedNode}"
    dynamic="true"
    style="width:98%;height:100%;">
    <p:treeNode type="#{treeBean.LEAF_TYPE}">
       <h:outputText value="#{node}" />
    </p:treeNode>
    <p:treeNode type="#{treeBean.ACTION_TYPE}">
       <h:outputText value="#{node}" />
    </p:treeNode>
    <p:treeNode type="#{treeBean.VALUE_TYPE}">
       <h:outputText value="#{node}" />
    </p:treeNode>
</p:tree> 
```

2 - 然后在 tree.xhtml 中，我还必须为每个节点类型定义菜单，如下所示：

```
<p:contextMenu for="treeSingle" nodeType="#{treeBean.LEAF_TYPE}">
    <p:menuitem value="View" actionListener="#{treeBean.displaySelectedSingle}" icon="ui-icon-search" update=":infoMessages"/>
    <p:menuitem value="Delete" update="treeSingle" actionListener="#{treeBean.deleteNode}" icon="ui-icon-close"/>
</p:contextMenu>
<p:contextMenu for="treeSingle" nodeType="#{treeBean.ACTION_TYPE}">
    <p:menuitem value="Execute" actionListener="#{treeBean.execute}" update=":infoMessages"/>
</p:contextMenu>
<p:contextMenu for="treeSingle" nodeType="#{treeBean.VALUE_TYPE}">
    <p:menuitem value="Edit" actionListener="#{treeBean.edit}" icon="ui-icon-edit" update=":infoMessages"/>
    <p:menuitem value="Delete" update="treeSingle" actionListener="#{treeBean.deleteNode}" icon="ui-icon-close"/>
</p:contextMenu> 
```

3 - 然后在我的 TreeBean 中，我像这样公开了以下属性：

```
private static final String LEAF_TYPE  = "leaf";
private static final String ACTION_TYPE = "action";
private static final String VALUE_TYPE = "value";

public String getLEAF_TYPE(){
    return LEAF_TYPE;
}
public String getACTION_TYPE(){
    return ACTION_TYPE;
}
public String getVALUE_TYPE(){
    return VALUE_TYPE;
} 
```

4 - 最后在 TreeBean 中，我创建了这样的节点：

```
TreeNode node = new DefaultTreeNode(ACTION_TYPE, data, parentNode); 
TreeNode node = new DefaultTreeNode(LEAF_TYPE, data, parentNode); 
TreeNode node = new DefaultTreeNode(VALUE_TYPE, data, parentNode); 
```**

# twitter-bootstrap - 引导弹出窗口

> ID：11993903
> 
> 赞同：29
> 
> 时间：2012-08-16T19:11:48.120
> 
> 标签：twitter-bootstrap

我不确定 boostrap 是如何实现 popover 的。我已经包含了 bootstrap.js，它有一个名为 Popover（大写 P）的函数，但在他们的示例中，他们使用：

```
$('#example').popover(options) 
```

现在，他们说它需要包含工具提示，但我不知道这意味着什么。他们的示例都包含一堆 .js 文件，我认为实际上它们都打包在一起。

由于我正处于概念验证阶段，我正试图让它第一次正常工作，所以我不关心文件大小或缓存。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-16T19:19:25.020

[这是一个非常简单的例子](http://www.w3resource.com/twitter-bootstrap/popover-example.html)：

```
<html> 
   <head>
       <link href="http://w3resource.com/twitter-bootstrap/twitter-bootstrap-v2/docs/assets/css/bootstrap.css" rel="stylesheet"> 
   </head>
   <body>
      <div class="container">
         <div class="well">
            <a href="#" id="example" class="btn btn-success" rel="popover" data-content="It's so simple to create a tooltop for my website!" data-original-title="Twitter Bootstrap Popover">hover for popover</a>
         </div>
      </div>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <script src="http://w3resource.com/twitter-bootstrap/twitter-bootstrap-v2/js/bootstrap-tooltip.js"></script>
      <script src="http://w3resource.com/twitter-bootstrap/twitter-bootstrap-v2/js/bootstrap-popover.js"></script>
      <script>
      $(function (){
         $("#example").popover();
      });
      </script>
   </body>
</html> 
```

该示例还包括您需要的工具提示 JavaScript。只需查看页面的来源。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-16T22:03:18.643

[项目主页上的下载](http://twitter.github.com/bootstrap/assets/bootstrap.zip)中包含的**bootstrap.js**版本已经包含编译到其中的所有插件。这包括**bootstrap-tooltip.js**和**bootstrap-popover.js**。

 ****`Popover`是 jQuery 插件的构造函数对象，但您不需要直接实例化它。

该插件将扩展 jQuery，添加方法`$.fn.popover()`，调用时将创建一个 Popover 对象的实例并将其附加到您选择的元素。可以使用 . 在您的元素（例如`id="elem"`）上访问该对象`$('#elem').data('popover')`。

这是一个简单的[JSFiddle](http://jsfiddle.net/mmfansler/Br4Zg/)，它演示了一种创建弹出窗口的方法，基本上使用您在 OP 中的内容，`$('#elem').popover()`.

* * *

**更新：** [带有 Bootstrap v.3 的 JSFiddle](http://jsfiddle.net/Br4Zg/620/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-21T09:40:45.310

为什么 popover 和 tooltip 在 bootsrap 中不起作用？

答案是弹出框或工具提示初始化代码`$("#myButton").popover();`应该放在`<script src="js/jquery-1.10.1.min.js"></script>;`和 下`<script src="js/bootstrap.min.js"></script>`。

就像下面的过程。我想会好的。

```
<button type="button" id="myPopover" class="btn btn-default" data-toggle="popover" data-placement="right" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." data-original-title="" title="">
      Popover on Right
</button>

<script src="js/jquery-1.10.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/main.js"></script>

<script type="text/javascript">
      $('#myButton').tooltip();
      $('#myPopover').popover();
</script> 
```****

# mysql - 选择表中完成的最新事务

> ID：11993905
> 
> 赞同：0
> 
> 时间：2012-08-16T19:11:53.303
> 
> 标签：mysql

我有这个疑问，

```
$sql = "
          select 
            old_team_id
          from
            transfers
          where
            player_id = $player_id and
            transferid = latest_transfer_id
      "; 
```

我有一个名为 transfer 的表，在我的表中有一个`transferid`字段，我想要的是当我运行查询时，它将`old_team_id`从`transfers`表中选择`transferid`最新的 transferid。这可能吗？如果是，我的查询缺少什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:13:28.707

要获得最大行中的值，`transferid`您可以使用`ORDER BY`and `LIMIT`：

```
SELECT old_team_id
FROM transfers
WHERE player_id = $player_id
ORDER BY transferid DESC
LIMIT 1 
```

# file-upload - 在浏览器中将代码文件上传到 GitHub

> ID：11993906
> 
> 赞同：2
> 
> 时间：2012-08-16T19:11:53.370
> 
> 标签：file-upload, github

我不想安装 github 的客户端，我知道你可以在线编辑代码文件，但你可以上传/创建它们吗？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:03:34.500

您可以使用您的 GitHub 帐户登录[Prose.io](http://prose.io/)，它至少允许直接编辑现有代码和文档，以及创建新的代码文件。它无法初始化新的存储库（无论如何还没有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:13:52.710

简短的回答：不，你不能。

更长的答案：您不需要 github 客户端将东西上传到 github，只需 git :)

# c - gettoken 函数 - 不明确的程序 (K&R)

> ID：11993908
> 
> 赞同：0
> 
> 时间：2012-08-16T19:12:07.247
> 
> 标签：c, return, kernighan-and-ritchie

我有几个问题，所以我会在评论中输入数字，以便更容易找到有问题的行。

[1] 如何将 char *p 分配给实际上不存在的令牌变量？

[2] 为什么我们不在这里放 '\0'，在其他 if 条件下做了什么？

[3] 为什么我们只将 () 复制到令牌字符串中？在 [] 和字母数字字符的情况下我们不这样做吗？

[4] 这些返回命令很奇怪 IMO -> 首先：为什么它看起来不像返回 PARENS，其次：当它返回 tokentype = '(' 它是一个字符时，为什么函数 gettoken 被声明为返回整数？

[5] SUPPOSING part: let input be (abc) then: ( 导致函数返回 tokentype '(' abc enter if condition (isalpha(C)) and the last ) 退出导致 ungetch 的条件。它是否遵循主要的 else 条件那么我的演练正确吗？

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#define MAXTOKEN 100
enum { NAME, PARENS, BRACKETS };
void dcl(void);
void dirdcl(void);
int gettoken(void);
int tokentype; /*type of last token  ALSO [4] !!! */
char token[MAXTOKEN]; /*last token string */
char name[MAXTOKEN]; /*identifier name */
char datatype[MAXTOKEN]; /*data type = char, int, etc. */
char out[1000];

main() /* convert declaration to words */
{
    while (gettoken() != EOF) {    /* 1st token on line */
        strcpy(datatype, token);   /* is the datatype */
        out[0] = '\0';
        dcl();            /* parse rest of line */
        if (tokentype != '\n')
            printf("syntax error\n");
        printf("%s: %s %s\n", name, out, datatype);
    }
    return 0;
}

int gettoken(void) /* return next token */
{
    int c, getch(void);
    void ungetch(int);
    char *p = token;        /* [1] */
    while ((c = getch()) == ' ' || c == '\t')
        ;
    if (c == '(') {
        if ((c = getch()) == ')') {
            strcpy(token, "()");            /* [2][3] */
            return tokentype = PARENS;           /* [4] */
        } else {
            ungetch(c);
            return tokentype = '(';
        }
    } else if (c == '[') {
        for (*p++ = c; (*p++ = getch()) != ']'; )
            ;
        *p = '\0';
        return tokentype = BRACKETS;
    } else if (isalpha(c)) {
        for (*p++ = c; isalnum(c = getch()); ) /* SUPPOSING [5] */
            *p++ = c;
        *p = '\0';
        ungetch(c);
        return tokentype = NAME;
    } else
        return tokentype = c;
}

/* dcl: parse a declarator */
void dcl(void)
{
    int ns;
    for (ns = 0; gettoken() == '*'; ) /* count *'s */
        ns++;
    dirdcl();
    while (ns-- > 0)
        strcat(out, " pointer to");
}

/* dirdcl: parse a direct declarator */
void dirdcl(void)
{
    int type;
    if (tokentype == '(') {
        dcl();
        if (tokentype != ')')
            printf("error: missing )\n");
    } else if (tokentype == NAME) /* variable name */
        strcpy(name, token);
    else
        printf("error: expected name or (dcl)\n");
    while ((type=gettoken()) == PARENS || type == BRACKETS)
        if (type == PARENS)
            strcat(out, " function returning");
        else {
            strcat(out, " array");
            strcat(out, token);
            strcat(out, " of");
        }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:41:07.863

1)`token`确实存在，但它是一个定义为的全局变量`char token[MAXTOKEN];`

2）`strcpy()`从源复制终止的0字节，所以我们不需要手动做

3）这似乎是对文字字符串的特殊情况处理`()`- 一些括号之间没有任何内容，而不是处理我们有的情况`( some stuff )`

4）根据（3），PARENS 看起来像是一组空括号的标记类型，而当我们在它们之间有某些东西时，返回`(`并`)`分别作为特定的 s`tokentype`

5）不确定我是否遵循您的要求，但是，由于右括号似乎没有特殊情况，因此它似乎采用了最后一个`else`分支，返回`tokentype = c`

# playframework - Ebean复杂连接

> ID：11993911
> 
> 赞同：1
> 
> 时间：2012-08-16T19:12:16.157
> 
> 标签：playframework, playframework-2.0, ebean

我大部分时间都得到 Ebean，但我该怎么做：

```
select s.id, s.name, s.city, b.date
from seat s
left join booking b on (s.id = b.listing_id)
  and b.date >= '2011-09-05' 
```

如果不是 join ( `and b.date >= '2011-09-05'`) 上的第二个条件，那会很容易......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-01T20:00:31.510

如果存在于类座位中，与预订的多对多（或单对多）关系，并且如果预订中的字段日期是日期类型，则此代码可能有效：

```
Finder<XXX, Booking> finder = new Finder<>(XXX.class, Booking.class);
DateFormat dateFormat = new SimpleDateFormat("YYYY-MM-dd");
FIND
   .fetch("seat")
   .where()
   .ge("date", dateFormat.parse("2011-09-05"))
   .findList() 
```

# javascript - jQuery Ajax - 意外令牌：

> ID：11993913
> 
> 赞同：2
> 
> 时间：2012-08-16T19:12:23.753
> 
> 标签：javascript, jquery, json, api

我正在尝试向[此 URL](http://hndroidapi.appspot.com/news/format/json/page/)发出 AJAX GET 请求并处理 JSON 响应。如果您直接访问该 URL，它就可以工作。我也尝试通过[Hurl It](http://hurt.it)运行它，[它也可以工作](http://hurl.it/hurls/98417427b23fa1d963487dcc11211fe791727aba/e0346a991588ba2966dcfcf43de592447565a1d0)。

我不知道为什么我不能通过 jQuery 向它发出`JSON`/`JSONP`请求。

我最初尝试做出 JSON 响应，但得到：

```
XMLHttpRequest cannot load http://hndroidapi.appspot.com/news/format/json/page/. Origin http://hackernews.dev is not allowed by Access-Control-Allow-Origin. 
```

因此，我尝试了 JSONP，并得到

```
Uncaught SyntaxError: Unexpected token :  hndroidapi.appspot.com:1 
```

第 1 行是整个 JSON 响应，在一行中，但**没有**包含在回调中。因此，这个 API 似乎不支持 JSONP。

因此，我能做些什么来解决这个问题吗？不幸的是，我有点难过，似乎没有办法解决这个问题。

我的代码如下：

```
var ajaxReq = $.ajax({
  url: "http://hndroidapi.appspot.com/news/format/json/page/",
  dataType: "jsonp" 
});
ajaxReq.done(function(d) {
  console.log("DONE", d);
});
ajaxReq.error(function(d) {
  console.log("ERROR", d);
}); 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:13:59.087

出于安全原因，您不能向提供网页的站点以外的站点发出 AJAX 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:17:43.763

尝试使用[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)，不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:29:34.860

该api绝对不支持JSONP（除非我遗漏了一些东西，对python不太熟悉）：[https](https://github.com/glebpopov/Hacker-News-Droid-API/blob/master/Formatter.py) ://github.com/glebpopov/Hacker-News-Droid-API/blob/master/Formatter.py你唯一的选择此时是使用 YQL 或服务器端代理

# python - Python Regex：转义反向引用

> ID：11993917
> 
> 赞同：0
> 
> 时间：2012-08-16T19:12:29.540
> 
> 标签：python, regex, escaping, set, backreference

这是我的情况：

```
re.sub(r'([^\\])', r'\1[\W\1]*', string) 
```

我想在 (itself) 之后附加 [\W(itself)] 是很简单的，因为它自己是一组字符（可以是特殊的）。这就是为什么我需要将它放在一个集合中以去除所有特殊含义。但是，我的组可以是一个 SET。我知道嵌套集不起作用。如何转义/删除方括号以安全地将我的组放入集合中？

我的另一个尝试是改用 \1(\W|\1)* ，但我需要转义组中的字符而不转义组中可能的方括号。我该怎么做？

这是一个两难的选择。我不知道如何解决这个问题以及该走哪条路。请帮忙。

非常感谢你。

编辑：我跳过了一步。在匹配一个字符但 \（[^\] 部分）并用解释的表达式替换后，我有时需要用一组相似的字符替换它。所以，'a' 变成了 '[a@]'，'s' 变成了 '[s5$]'，等等......这个问题真的是错误的。但是我解决了这个问题，所以如果你仍然试图从我之前写的东西中理解，请不要:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:07:05.573

您可以使用函数作为[`re.sub`](http://docs.python.org/library/re.html#re.sub). [`re.escape`](http://docs.python.org/library/re.html#re.escape)这将允许您在执行替换之前调用您的匹配项：

```
def escape_repl(match):
    return '{0}[\W{0}]*'.format(re.escape(match.group(1)))

re.sub(r'([^\\])', escape_repl, string) 
```

例子：

```
>>> print re.sub(r'([^\\])', escape_repl, '[^$]')
\[[\W\[]*\^[\W\^]*\$[\W\$]*\][\W\]]* 
```

我认为这就是你想要做的，但你的问题有点不清楚。如果这不是您想要的，请提供一些示例字符串和预期结果。

# java - 跨越数据库中多个模式的事务

> ID：11993921
> 
> 赞同：3
> 
> 时间：2012-08-16T19:12:44.637
> 
> 标签：java, oracle

我有一个连接，它对 Oracle 数据库的两个不同模式中的对象执行 DML。我完成了一个涉及 in 对象的事务`schema A`，然后开始第二个事务来处理`schema B`. 如果在处理第二个事务时发生任何错误，我想回滚两个事务的更改。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:28:31.620

如果您希望同时提交或回滚对两个模式所做的更改，则需要使用单个事务。**一旦提交了第一个事务，如果第二个事务失败，则无法**将其回滚（当然，您可以使用闪回技术，但涉及更多）。但是，如果您对在两个模式上所做的工作使用单个事务，您将获得您希望所有更改都以原子方式提交或回滚的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:26:02.207

设置您的`Connection`，使其不会自动提交（默认情况下），例如：

```
conn.setAutoCommit(false); 
```

然后您可以针对第一个模式运行 DML，并使用相同的连接对象针对第二个模式运行您的 DML。如果出现故障，则将所有内容回滚，例如：

```
conn.rollback(); 
```

否则，如果一切成功，则提交：

```
conn.commit(); 
```

# ruby - 需要一个红宝石数组在编程时不关闭

> ID：11993923
> 
> 赞同：0
> 
> 时间：2012-08-16T19:12:52.987
> 
> 标签：ruby

我正在 Aptana (ruby IDE) 中创建一个程序，并在 ruby​​ 数组上进行大量数学运算，并且经常添加更多数学运算，从结果中创建变量。从那里做更多的数学，等等。然而，每次我运行我的脚本时，它首先必须重新读取我的文件（几兆字节）并将其放入数组中。这需要时间。

现在我对编程真的很陌生，所以我对一般编程的工作原理仍然缺乏一些了解。但是我该如何解决这个问题呢？

如果我猜测这将如何完成。我会说也许将我的程序分成 2 个文件并在不停止的情况下运行第一个数组。另一个 ruby​​ 文件将使用数组文件。我不知道那会怎么做。

我接近解决方案了吗？

另外我希望你注意到我说我正在开发 aptana。我什至没有尝试正常运行我的脚本。我假设在那里我会遇到完全相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:37:03.700

您可能可以使用 irb 来执行此操作。也就是说，您启动 ruby​​ 解释器，并且如果您的数组本身没有改变，您加载一次数组。之后，您可以针对该数组运行操作。

您可以通过将代码复制到文件中来永久捕获更改，或者您可以将算法/数学写入脚本文件并重复将文件加载到解释器中以访问解释器中的新方法或重写方法。

“[在 IRB rub​​y​​ 上加载文档](https://stackoverflow.com/questions/6408534/loading-documents-on-irb-ruby)”可能会帮助您了解这是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:40:49.490

任何让进程保持运行并从另一个进程读取/写入它的方法都将比仅在脚本启动时读取数据并在脚本完成时将其写出要复杂得多。仅仅为了避免读取和写入几兆字节的数据，管理多个进程并不值得。

我不确定您当前是如何写出和读取文件的，但一个不错的选择是使用[Ruby 的内置 YAML 支持](http://yaml.org/YAML_for_ruby.html)。

序列化：

```
require 'yaml'

arr = [1, 2, 3, 4]

arr.to_yaml(File.new('test.yml', 'w')) 
```

反序列化：

```
require 'yaml'

arr = YAML::load(File.new('test.yml', 'r'))

p arr

# => [1, 2, 3, 4] 
```

显然，您仍然必须每次都加载数组，但至少您不必为数组中已经计算的值重复所有数学运算。

# c# - 有向图顶点子集的拓扑排序

> ID：11993934
> 
> 赞同：1
> 
> 时间：2012-08-16T19:13:39.813
> 
> 标签：c#, algorithm, graph-theory, directed-graph, directed-acyclic-graphs

我正在用 C# 4.0 编写一个程序，我将其抽象为以下内容（我提到了该语言，以便您知道我必须使用哪些库；没有第三方库）：

* * *

让`S = { s1, s2, s3, ..., sn }`.

对于所有`si`,`sj`在`S`, `i != j`, 函数`f(si, sj)`是 的一个元素`{ true, false }`。调用这个函数`f`非常昂贵，但是应该尽可能少地调用。

给定集合`T = { t1, t2, t3, ..., tm }`的一个非空子集`S`，计算一个序列，该序列`U = u1, u2, u3, ..., uo`包含 的所有元素`T`，`f(ui, uj) == false`对于 all `i < j`，`f(ui, s') == false`对于 all`i`和`s'`in `S - U`。您可以假设存在这样的序列。

* * *

虽然这与学校无关（这是为了工作），但我*更希望*得到最少的帮助，让我找到你能想到的最佳解决方案，这样我就可以了解更多:)

* * *

提示（一些我想过的东西：）

1.  **您需要至少访问每个节点一次。**在and中 考虑`T = { t }`and`f(t, s') == false`的情况。在这种情况下，一次也足够了。`s'``S - T``|S| >= 2`

2.  最少`U`必须计算。这种计算可以用以下形式表示： 一个`|S|x|S|`邻接矩阵，其条目为

    *   `?`： 我不知道
    *   `1`： 取决于。
    *   `0`: 不依赖。
    *   `-`: 我不在乎。

考虑一下这一点（我正在通过一个示例来查看是否存在最佳潜在检查序列的模式以帮助开发算法）。 `S = { a, b, c, d, e }` `T = { a, b, c }`（由星星表示）：

```
 a  b  c  d  e
   ----------------
*a | -  -  -  ?  ?
*b | -  -  -  ?  ?
*c | -  -  -  ?  ?
 d | -  -  -  -  ?
 e | -  -  -  ?  - 
```

`U = { a, b, c }`最初。对角线是`-`因为`f`在其操作数相等时未定义。由于`a`和已经在集合中，`b`因此`c`是否有人依赖它们并不重要，因此`-`.

`f(a, d)`由于对称性，`f(a, e)`, , `f(b, d)`, `f(b, e)`, `f(c, d)`,`f(c, e)`都是平等的候选者。假设我们选择`f(a, d)`它返回 false。我们的表格现在看起来像这样：

```
 a  b  c  d  e
   ----------------
*a | -  -  -  0  ?
*b | -  -  -  ?  ?
*c | -  -  -  ?  ?
 d | -  -  -  -  ?
 e | -  -  -  ?  - 
```

情况1：`U = { a, b, c }`

要找出这一点，我们可以通过 3 次检查来做到这一点，如果幸运的话，检查`f(b, d)`, `f(c, d)`并且`f(e, d)`让它们都成为`false`。

案例二：`U = { a, b, c, d, e }`

要找出这一点，我们可以通过 2 次检查来完成，如果幸运的话，检查`f(b, d)`并`f(a, e)`让它们都返回`true`。

*（我还没有完全想好这些，我要去吃饭了。感谢大家阅读！）*

案例3：`U = { a, b, c, d }`

案例4：`U = { a, b, c, e }`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T19:51:43.383

我的理解是，您希望从子集 T 中的任何节点开始可以访问的所有节点...如果这是您的意思，您可以试试这个...

1.  用所有节点填充字典（将节点作为键，将访问的布尔值作为值（将此值作为假开始））
2.  用子集 T 中的节点填充队列（添加它们时在字典中搜索它们并将它们标记为已访问）
3.  选择队列中的第一个元素检查您可以从中访问的节点，在字典中搜索是否已访问，如果已访问则跳过，如果没有，将它们添加到队列并将它们设置为已访问，删除队列的第一个元素
4.  重复 3 直到队列中没有项目

您可以从 t 开始访问的节点子集是您在字典中标记的节点

希望能帮助到你...

# ruby-on-rails - 基于 GET 参数的 Rails 路由

> ID：11993937
> 
> 赞同：3
> 
> 时间：2012-08-16T19:13:56.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想要这样一个路由表：

```
"/search" => "search#home" # Without GET params, call action "home".
"/search?*" => "search#result" # Call "result" action when search has params. 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:20:59.560

一种方法是使用[高级约束](http://guides.rubyonrails.org/routing.html#advanced-constraints)。

检查是否存在查询字符串。我认为你需要把它放在回家路线之前。

（这都是未经测试/未经证实的。）

# java - GAE 1.7 JSF 2 部署问题

> ID：11993941
> 
> 赞同：0
> 
> 时间：2012-08-16T19:14:14.870
> 
> 标签：java, google-app-engine, jsf, jsf-2, web-deployment

我按照本指南制作了一个 JSF 2.1 项目并将其部署到 Google App Engine：

[https://sites.google.com/a/wildstartech.com/adventures-in-java/Java-Platform-Enterprise-Edition/JavaServer-Faces/javaserver-faces-21/configuring-javaserver-faces-21-to-在 google-app-engine-using-eclipse 上运行](https://sites.google.com/a/wildstartech.com/adventures-in-java/Java-Platform-Enterprise-Edition/JavaServer-Faces/javaserver-faces-21/configuring-javaserver-faces-21-to-run-on-the-google-app-engine-using-eclipse)

我在本地运行它时运行良好，但是当我尝试在 GAE 部署应用程序时，出现以下错误：

`Uncaught exception from servlet java.lang.UnsupportedClassVersionError: com/sun/faces/config/WebConfiguration at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:163) at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548) at org.mortbay.jetty.servlet.Context.startContext(Context.java:136) at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250) at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:202) at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:171) at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:123) at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477) at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) at com.google.tracing.TraceContext.runInContext(TraceContext.java:695) at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251) at java.lang.Thread.run(Thread.java:679)`

怎么了？我正在考虑这个新的 1.7 JDK 负责它。在本地运行时，我需要使用“-XX:-UseSplitVerifier”来正确构建项目。也许 GAE JDK 正在使用其他规范构建它并导致此问题。我真的不知道。

主要问题是：我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:03:21.200

[在此处](https://developers.google.com/appengine/docs/java/overview)引用文档

Java 运行时环境

App Engine 使用 Java 6 虚拟机 (JVM) 运行 Java 应用程序。App Engine SDK 支持 Java 5 及更高版本，Java 6 JVM 可以使用使用 Java 6 之前的任何版本的 Java 编译器编译的类。

所以是的，JDK 1.7 版本有问题。在 1.6 中编译你的项目，你应该没问题！

# php - 搜索多种内容类型

> ID：11993943
> 
> 赞同：1
> 
> 时间：2012-08-16T19:14:22.673
> 
> 标签：php, mysql, performance, wordpress

这是我一直在努力解决的一个问题的概括。我的情况是我有一个 WordPress 网站，其中包含多种“帖子类型”（例如文章、博客帖子、产品等）。按照现在的惯例，我想在不同的类别中显示每种帖子类型的搜索结果。

我遇到的问题是构建搜索。我应该为每种帖子类型运行单独的数据库查询，还是应该运行一个大查询并通过 PHP 将所有内容分开？我倾向于倾向于后者，但我遇到的问题是分页。我可能不必`LIMIT`在查询上设置任何内容，因为如果我有来自一种帖子类型的多个匹配项，则搜索不会返回来自其他帖子类型的任何结果。

那么，从性能和一般最佳实践的角度来看，最好是有一个没有`LIMIT`子句的大查询，还是为每个搜索运行多个查询？

*注意：这类似于我不久前在 WordPress Stack Exchange 网站上提出[的问题。](https://wordpress.stackexchange.com/q/51187/9802)我当时接受了多查询解决方案，但我仍然对此不确定。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:19:55.580

以我的经验，通常最好让数据库做尽可能少的工作，让 PHP 做大部分繁重的工作。它通常更快。

所以，我会尝试做两个非常简单的查询（每个表一个），然后用 PHP 代码合并/排序它们。

如果您的数据集非常大，或者您的网络主机很垃圾，那么您的 PHP 脚本可能会耗尽内存……然后，只有这样，开始寻找正确的方法是个好主意在 MySQL 中（我怀疑临时表可能是正确的查看位置）。

但是如果你遇到了 PHP 的性能限制，那么我怀疑你在 MySQL 中所做的任何事情实际上都会变得更慢，你必须改变你的数据库结构以获得良好的性能。一种方法是保留现有的表结构，但有第三个表，其中包含所有表中的重复数据 - 仅用于搜索，以及一些代码以使所有内容保持同步。

例如，我们有一个表格，其中包含网站用户上传的每个 pdf 文档，我们有另一个表格，其中包含*任何文档中的每个单词*，以及它们之间的多对多链接表。

每当上传一个新的 pdf 时，我们都会找到其中的每个单词，并将记录插入到链接表中。这样，我们实际上不必在 PDF 文档中进行搜索，我们只搜索经过结构化以允许快速搜索的索引表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:56:09.550

对于这种类型的搜索，我愿意使用[Solr](http://lucene.apache.org/solr/)之类的解决方案进行索引。您可以使用此类解决方案做很多事情，并且它们与以通用方式搜索的用户类型非常匹配。

# javascript - JQuery Validation - 仅对一个字段禁用 onfocusout

> ID：11993947
> 
> 赞同：7
> 
> 时间：2012-08-16T19:14:40.620
> 
> 标签：javascript, jquery, jquery-validate

有没有办法使用 Jquery 验证插件忽略 5 个表单字段中的一个表单字段的“onfocusout”属性？

我的意思是，Jquery 验证插件当前验证该表单字段的元素 onblur。我希望插件不要只对一个表单字段这样做。它可以为其他表单字段保留该验证。

我怎样才能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T19:47:22.753

`onfocusout`您可以在传递给`.validate()`方法的选项中覆盖事件处理程序。覆盖的版本应该处理哪个元素，如果它不是您要排除的字段，则回退到默认行为：

```
$('#test').validate({
    rules: {
        "field1": "required",
        "field2": "required",
        "field3": "required"
    },
    onfocusout: function (element, event) {
        if (element.name !== "field2") {
            $.validator.defaults.onfocusout.call(this, element, event);
        }
    }
}); 
```

有关完整演示，请参阅此[jsFiddle](http://jsfiddle.net/EZwqL/)。

# magento-1.6 - Magento 在产品视图页面上显示该类别中的所有产品

> ID：11993953
> 
> 赞同：3
> 
> 时间：2012-08-16T19:15:04.800
> 
> 标签：magento-1.6

我正在尝试自定义我的产品登录页面，以包含同一类别中所有其他产品的所有可滚动视图。我几乎就在那里，但它显示了所有类别的产品，而不仅仅是您正在查看的当前产品所在的类别。下面是我添加到我的产品 view.phtml 中的代码，它为我提供了我的产品可滚动的容器。任何人都可以帮助我将其限制为仅显示当前类别中的产品吗？可以在[产品视图页面查看其中一个产品页面的示例](http://myclosetbycartdesigns.com/darla.html)

版本是magento 1.6.1

我的产品视图定制在这里

```
<div class="coll_container">
<!-- "previous page" action -->
<a class="prev browse left"></a>
<div id="collection" class="scrollable">

<?php                        
$cat_id = Mage::getModel('catalog/layer')->getCurrentCategory()->getId(); // set      current category id
$category = Mage::getModel('catalog/category')->load($cat_id);
$productCollection = Mage::getResourceModel('catalog/product_collection')
                         ->addCategoryFilter($category);

$products = $category->getProductCollection()->addCategoryFilter($category)->addAttributeToSelect('*');
?>

<ul>

<?php foreach ( $products as $_product ): ?>
<li class="item"><?php if($_product->isComposite() || !$_product->isSaleable()):   ?>     
<?php endif; ?>
      <a class="item-link" href="<?php echo $_product->getProductUrl() ?>"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->keepAspectRatio(true)->keepFrame(false)->resize(150,225) ?>" alt="<?php echo $this->htmlEscape($_product->getName()) ?>" width="150" height="225" /></a>

     <div class="tooltip">
                    <span class="indicator"><!-- --></span>
                    <div class="tooltip-content">
                <a href="<?php echo $_product->getProductUrl() ?>"><?php echo   $this->htmlEscape($_product->getName()) ?></a>
            <!-- Price -->
       <p class="price"> <?php echo $this->getPriceHtml($_product, true) ?>    </p>        
        </div><!-- End Tooltip content -->
        </div><!-- End Tooltip -->
   </li>
<?php endforeach; ?> 
</ul>

</div><!-- End Collection -->
<!-- "next page" action -->
<a class="next browse right"></a>

</div><!-- End coll_container --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T22:30:07.137

除了两次获取集合的冗余（`$productCollection`并且`$products`，后者用于循环）之外，您的代码将正常工作，并且集合将仅包含当前类别的产品，**前提**是您的登录页面被重写为

```
catalog/category/view/id/<id> OR
catalog/product/view/id/<id>/category/<id> 
```

但不是，如果它们被重写为

```
catalog/product/view/id/<id> 
```

这是因为`Mage_Catalog_Model_Layer::getCurrentCategory()`取决于是否`current_category`设置了注册表项。如果`current_category`未设置，则该方法返回当前商店的根类别 id，这解释了为什么您会看到*所有*类别的产品：

```
public function getCurrentCategory()
{
    $category = $this->getData('current_category');
    if (is_null($category)) {
        if ($category = Mage::registry('current_category')) {
            $this->setData('current_category', $category);
        }
        else {
            $category = Mage::getModel('catalog/category')->load($this->getCurrentStore()->getRootCategoryId());
            $this->setData('current_category', $category);
        }
    }

    return $category;
} 
```

在 Magento OOB 中，注册表项`current_category`将设置在不同的位置，但在您的情况下，只有这两个是感兴趣的：

```
Mage_Catalog_CategoryController::_initCatagory()*
Mage_Catalog_Helper_Product::initProduct() 
```

前者通常只由

```
Mage_Catalog_CategoryController::viewAction() 
```

后者在几个地方被调用，其中包括

```
Mage_Catalog_ProductController::viewAction() 
```

但仅在这种情况下，如果传递了`catalog`类似的参数。`catalog/<id>`

### 重写

解决您的问题的一种可能性是为您的登录页面添加重写

```
catalog/product/view/id/1/category/3 
```

风格`target_path`.

如果您只有少数产品，您可以使用管理后端中的“URL 重写管理”手动执行此操作。

如果你有很多产品，你也可以通过[程序](https://stackoverflow.com/questions/11956200/rewrite-dynamic-magento-url/11962433#11962433)来做。

### 直接使用产品的类别 ID

解决此问题的另一种可能性是，直接从正在查看的产品中获取类别 ID 并使用它来过滤集合：

```
$aCategoryId = $this->getProduct()->getCategoryIds();
if (!$aCategoryId) {
    echo "This product is not assigned to any categories.";
}
$iCategoryId = $aCategoryId[0];
$oCategory = Mage::getModel('catalog/category')->load($iCategoryId);
$oProductCollection = $oCategory
    ->getProductCollection()
    ->addCategoryFilter($oCategory)
    ->addAttributeToSelect('*')
    ->addFieldToFilter('entity_id', array('neq' => $this->getProduct()->getId()));
foreach ($oProductCollection as $oProduct) {
    var_dump($oProduct->getName());
} 
```

请注意，我添加了一个过滤器以从集合中排除查看的产品本身。

* * *

[* 这不是错字，它实际上是写成 a `_initCatagory`，`_initCategory`至少在 CE 1.6.2 中没有（还没有检查过其他人）]

# visual-studio-2010 - qt编程时VS2010报错

> ID：11993960
> 
> 赞同：2
> 
> 时间：2012-08-16T19:15:38.887
> 
> 标签：visual-studio-2010, qt

我有一个关于在 Microsoft Visual Studio 2010 中使用 Qt 的问题。

我已经安装了 Visual Studio、Qt 和 Qt VS2010 插件。一切正常，我可以编译简单的程序。只有一件事不能正常工作。

当我在 VS2010 编辑器中编写代码时，我收到诸如“错误：标识符 QApplication 未定义”之类的错误。或“错误：无法打开源文件 QApplication”。我正在使用的代码是

```
#include <QApplication>
#include <QtGui>

int main(int argc, char *argv[]) {
    QApplication a(argc, argv);
    test w;
    w.show();
    return a.exec();
} 
```

我认为这与将代码检查器链接到 Qt 的源文件有关，但我在 VS2010 的某处找不到此选项。

问候，

# c# - 方法必须有返回类型 (C#)

> ID：11993964
> 
> 赞同：2
> 
> 时间：2012-08-16T19:15:45.440
> 
> 标签：c#, methods, return

所以我一直在关注 C# 这本书。

[http://www.robmiles.com/c-yellow-book/Rob%20Miles%20CSharp%20Yellow%20Book%202011.pdf](http://www.robmiles.com/c-yellow-book/Rob%20Miles%20CSharp%20Yellow%20Book%202011.pdf) 第 81-82 页我从那里获取此代码并从第 82 页添加另一种方法，结果是：

```
using System;      

enum AccountState
{
    New,
    Active,
    UnderAudit,
    Frozen,
    Closed
};

struct Account
{
    public AccountState State;
    public string Name;
    public string Address;
    public int AccountNumber;
    public int Balance;
    public int Overdraft;
};
class Bankprogram
{
    public static void Main()
    {   
        Account RobsAccount;    
        RobsAccount.State = AccountState.Active;    
        RobsAccount.Name = "Rob Miles";    
        RobsAccount.AccountNumber = 1234;    
        RobsAccount.Address = "his home";       
        RobsAccount.Balance = 0;    
        RobsAccount.Overdraft = -1;    
        Console.WriteLine("name is " + RobsAccount.Name);    
        Console.WriteLine("balance is : " + RobsAccount.Balance );      
    }
    public void PrintAccount(Account a)
    {
        Console.WriteLine ("Name" + a.Name);    
        Console.WriteLine ("Address :" + a.Address);    
        Console.WriteLine ("Balance:" + a.Balance);
    }

    PrintAccount(RobsAccount);
} 
```

但我得到一个错误：方法必须有返回类型。指的是“PrintAccount(RobAccount);”

我知道以前有人问过这个问题，但没有一个看起来与我的问题相似。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T19:19:00.107

问题是编译器认为这`PrintAccount(RobsAccount);`是一个方法定义，这就是为什么需要返回类型。

您必须在另一个方法中调用该方法，不能在 void 上调用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T19:19:35.130

## 有2个问题

**问题 1：**您的方法调用直接在类中。它必须在方法内部。我们在类中声明方法，而不是调用它们。

**问题2：**静态方法在静态方法中被调用，所以你的`PrintAccount`方法也应该是静态的。

**解决方案：**这应该是类结构。

```
//Previous code as it is
class Bankprogram
{
    public static void Main()
    {   
        //Previous code as it is
        PrintAccount(RobsAccount);
    }
    public static void PrintAccount(Account a)
    {
        //Method code as it is
    }  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:23:36.787

```
PrintAccount(RobsAccount); 
```

您希望何时准确调用该函数？您已将它放在类定义的中间（这就是您收到错误的原因）。您希望在程序启动时调用它吗？你的类的第一个实例是什么时候创建的？这没有意义；类是对象的模板。

如果你想调用一个方法，你必须从另一个方法中调用（暂时不考虑静态初始化）。因此，删除该行，然后在 main...

```
static void Main(...) 
{
    PrintAccount();
} 
```

另请注意，您的设计很奇怪。您已经在`Bankprogram`类中定义了 main （为什么？）并且*一切*都是静态的。您是否只打算允许一个帐户，其中该帐户的每个属性都经过硬编码？似乎不是很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:21:04.883

问题是您在类中有代码，而不是在方法中。

将该行移到`Main`方法中：

```
using System; 

enum AccountState
{
  New,
  Active,
  UnderAudit,
  Frozen,
  Closed
};

struct Account
{
    public AccountState State;
    public string Name;
    public string Address;
    public int AccountNumber;
    public int Balance;
    public int Overdraft;
};

class Bankprogram
{

  public static void Main()
  {   
    Account RobsAccount;

    RobsAccount.State = AccountState.Active;

    RobsAccount.Name = "Rob Miles";

    RobsAccount.AccountNumber = 1234;

    RobsAccount.Address = "his home";

    RobsAccount.Balance = 0;

    RobsAccount.Overdraft = -1;

    Console.WriteLine("name is " + RobsAccount.Name);

    Console.WriteLine("balance is : " + RobsAccount.Balance );

    PrintAccount(RobsAccount);

  }

  public void PrintAccount(Account a)
  {
    Console.WriteLine ("Name" + a.Name);

    Console.WriteLine ("Address :" + a.Address);

    Console.WriteLine ("Balance:" + a.Balance);
  }

} 
```

旁注：代码将 a`struct`用于数据对象，其中 a`class`是合适的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T19:29:58.397

这里有两个问题；

*   您正在尝试从类中调用您的 PrintAccount 方法，而不是从任何方法中。那显然行不通。
*   您的 PrintAccount 方法不是静态方法，因此只能在您的类被实例化时访问。这意味着您将无法从 main 函数中调用它。

尝试更改以下两件事：

*   使您的 PrintAccount 成为静态方法
*   从您的主方法调用 PrintAccount 方法。

您的代码将如下所示：

```
public static void Main()
{   
    Account RobsAccount;
    RobsAccount.State = AccountState.Active;
    RobsAccount.Name = "Rob Miles";
    RobsAccount.AccountNumber = 1234;
    RobsAccount.Address = "his home";
    RobsAccount.Balance = 0;
    RobsAccount.Overdraft = -1;
    Console.WriteLine("name is " + RobsAccount.Name);
    Console.WriteLine("balance is : " + RobsAccount.Balance );
    PrintAccount(RobsAccount);
}

public static void PrintAccount(Account a)
{
    Console.WriteLine ("Name" + a.Name);
    Console.WriteLine ("Address :" + a.Address);
    Console.WriteLine ("Balance:" + a.Balance);
} 
```

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T19:18:38.270

首先，您试图`PrintAccount()`在任何其他方法之外调用方法！看来这是一个错字。

其次，`PrintAccount()`方法必须是静态的（它属于`Bankprogram`类），它是从静态`Main()`方法调用的。

```
class Bankprogram
{
    public static void Main()
    {   
        Account RobsAccount;

        RobsAccount.State = AccountState.Active;

        RobsAccount.Name = "Rob Miles";

        RobsAccount.AccountNumber = 1234;

        RobsAccount.Address = "his home";

        RobsAccount.Balance = 0;

        RobsAccount.Overdraft = -1;

        Console.WriteLine("name is " + RobsAccount.Name);

        Console.WriteLine("balance is : " + RobsAccount.Balance );

        PrintAccount(RobsAccount); // This line has been moved.
    }

    // This method has become STATIC!
    public static void PrintAccount(Account a)
    {
        Console.WriteLine ("Name" + a.Name);

        Console.WriteLine ("Address :" + a.Address);

        Console.WriteLine ("Balance:" + a.Balance);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T19:20:07.363

大概是笔误吧。不知道是你的还是书里的。

调用`PrintAccount`应该在 BankProgram 类的方法中进行。如所写，调用在任何方法之外，这是一个错误。
此外，如果从 Main 内部调用 PrintAccount 方法，也应该是静态的，因为要调用实例成员方法，您需要创建 BankProgram 类的实例

```
class Bankprogram 
{ 
    public static void Main() 
    {    
        Account RobsAccount; 
        RobsAccount.State = AccountState.Active; 
        RobsAccount.Name = "Rob Miles"; 
        RobsAccount.AccountNumber = 1234; 
        RobsAccount.Address = "his home"; 
        RobsAccount.Balance = 0; 
        RobsAccount.Overdraft = -1; 
        Console.WriteLine("name is " + RobsAccount.Name); 
        Console.WriteLine("balance is : " + RobsAccount.Balance ); 
        PrintAccount(RobsAccount);

        // OR - if you really want to keep NON STATIC the method PrintAccount
        // BankProgram bp = new BankProgram();
        // bp.PrintAccount(RobsAccount);
    } 

    public static void PrintAccount(Account a) 
    { 
        Console.WriteLine ("Name" + a.Name); 
        Console.WriteLine ("Address :" + a.Address); 
        Console.WriteLine ("Balance:" + a.Balance); 
    } 
} 
```

# c - PCRE - 偏移向量，3 的倍数？

> ID：11993966
> 
> 赞同：7
> 
> 时间：2012-08-16T19:15:53.667
> 
> 标签：c, regex, pcre

我正在学习 PCRE，但我不明白为什么偏移向量必须是 3 的倍数。这是来自 pcredemo.c （`rc`结果来自`pcre_exec()`）：

```
/* The output vector wasn't big enough */

if (rc == 0) {
    rc = OVECCOUNT / 3;
    printf("ovector only has room for %d captured substrings\n", rc - 1);
}

/* Show substrings stored in the output vector by number. Obviously, in a real
 * application you might want to do things other than print them. */

for (i = 0; i < rc; i++) {
    char *substring_start = subject + ovector[2 * i];
    int substring_length = ovector[2 * i + 1] - ovector[2 * i];
    printf("%2d: %.*s\n", i, substring_length, substring_start);
} 
```

在我看来，ovector 存储`str1_start, str1_end, str2_start, str2_end, ...`，所以数组可以保存 OVECCOUNT/2 个字符串。为什么是 OVECCOUNT/3？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T19:38:05.367

[手册](http://linux.die.net/man/3/pcreapi)：

> 向量的前三分之二用于传回捕获的子字符串，每个子字符串使用一对整数。**向量的剩余三分之一在匹配捕获子模式时由 pcre_exec() 用作工作区，并且不可用于传回信息。**在 ovecsize 中传递的数字应该始终是三的倍数。如果不是，则向下舍入。

# vb.net - 从网站 VB.NET 的一部分获取文本

> ID：11993967
> 
> 赞同：2
> 
> 时间：2012-08-16T19:15:53.297
> 
> 标签：vb.net, http, google-weather-api

我需要知道如何从 VB.NET 代码中复制网站的一部分（文本）。例如，我有这个“站点”： [https](https://www.google.ro/search?sugexp=chrome,mod=8&sourceid=chrome&ie=UTF-8&q=my+location) ://www.google.ro/search?sugexp=chrome,mod=8&sourceid=chrome&ie=UTF-8&q= my+location 如何复制包含我的位置的部分？

或者......我有这个 http 代码（我认为） - 它有点复杂： [http](http://www.google.com/ig/api?weather=Bucharest) ://www.google.com/ig/api?weather= Bucharest 我想获取今天的信息（最小，最大，湿度，风等...）

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:19:08.263

考虑使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。它提供了一种从其他网站获取和解析数据的简单方法。您应该能够使用它轻松获取所需的部分数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:27:04.523

下载网页，将其存储在文本框 ( `text1.text = Inet1.OpenURL("http://www..."`) 或字符串中。

使用 vb.nets 字符串操作函数从字符串中提取数据。

[http://msdn.microsoft.com/en-us/library/aa903372(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa903372(v=vs.71).aspx)

[http://www.thevbprogrammer.com/VBNET_04/04-08-StringHandling.htm](http://www.thevbprogrammer.com/VBNET_04/04-08-StringHandling.htm)

下面的示例代码从网站中提取 IP 地址。

```
Option Explicit
' Add Microsoft Internet Transfer Control

Dim pubIPA As String, pos1 As Long, pos2 As Long, str As String

Private Sub Form_Load()
    str = Inet1.OpenURL("http://api.externalip.net/ip/", icString)
    pos1 = InStr(str, "var ip =")
    pos1 = InStr(pos1 + 1, str, "'", vbTextCompare) + 1
    pos2 = InStr(pos1 + 1, str, "'", vbTextCompare)
    pubIPA = Mid$(str, pos1, pos2 - pos1)
    MsgBox pubIPA, vbInformation
    Unload Me
End Sub 
```

[http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/105605a1-4d1a-4bc8-8a13-c9cc6748065e](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/105605a1-4d1a-4bc8-8a13-c9cc6748065e)

[http://www.dreamincode.net/forums/topic/95117-get-string-between-2-values/](http://www.dreamincode.net/forums/topic/95117-get-string-between-2-values/)

[http://www.example-code.com/vb/findSubstring.asp](http://www.example-code.com/vb/findSubstring.asp)

[http://www.dreamincode.net/forums/topic/66912-finding-a-string-within-a-string/](http://www.dreamincode.net/forums/topic/66912-finding-a-string-within-a-string/)

[http://www.dotnetperls.com/indexof-vbnet](http://www.dotnetperls.com/indexof-vbnet)

# oop - 获取对象属性的字符串表示的最佳方法

> ID：11993973
> 
> 赞同：1
> 
> 时间：2012-08-16T19:16:04.103
> 
> 标签：oop

这是一个软件设计/最佳实践问题。方便地获取对象属性的字符串值的最优雅方法是什么？

考虑这个例子：

我有一个将数值保存为整数的模型。

```
class Person {
   integer time_of_birth; // unix timestamp
   integer gender; // 1 - male, 2 - female
   integer height; // number of millimeters
   integer weight; // number of grams
   string name;
} 
```

要创建有意义的视图（例如 HTML 页面），我需要以人类可读的形式输出数字信息 - 字符串。到目前为止，我通过添加返回非字符串属性的字符串表示的方法“attributename_str()”来做到这一点。

```
method time_of_birth_str() {
   return format_date_in_a_sensible_manner(this.time_of_birth);
}

method gender_str() {
   if this.gender == 1 return 'male';
   if this.gender == 2 return 'female';
}

method height_str(unit, precision) {
   if unit == meter u = this.height/some_ratio;
   if unit == foot u = this.heigh/different_ratio;
   return do_some_rounding_based_on(precision,u);
} 
```

问题是 - 有没有更好的方法来做到这一点，而无需创建大量的格式化方法？也许是一个单一的静态格式化方法？你如何进行这种数值格式化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:52:01.620

我认为您无法摆脱单一的格式化方法，因为不同的属性有不同的要求。但是一些指导方针可以让你的生活更轻松：

**将视图代码与模型代码分开：**有一个单独的`PersonView`类来返回适合您的 HTML 输出的信息：

```
public class PersonView {
  private Person person;

  public String getTimeOfBirth() {
    return formatDate(person.getTimeOfBirth());
  }

  ...
} 
```

**使用强类型属性而不是原语：**

*   使用日期对象而不是整数时间戳。
*   为性别而不是整数创建一个枚举。
*   使用单位而不是假定单位的整数创建身高和体重类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:46:20.553

所以你在这里有一个人对象，他们负责很多事情：
1）格式化日期
2）在标志和字符串之间转换性别
3）转换测量值

将您的对象限制为一组相关职责是最佳实践。我会尝试为其中的每一个创建一个新对象。

事实上，如果我严格遵守[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，我什至会推荐一个用于在各种值之间进行转换的 Measurement 类（在此处存储您的转换常量），以及另一个负责以漂亮方式格式化它的 MeasurementPrinter 类（例如 6 英尺、2 英寸或 6 英尺 2 英寸等）。

只是给你一个具体的例子来说明我的意思

```
 public class Person {
   private Height height;
 }

 public class Height {
   private static final double FT_TO_METERS = // just some example conversion constants

   private int inches;

   public double toFeet() {
     return inches / IN_PER_FEET;
   }

   public double toMeters() {
     return toFeet() * FT_TO_METERS;
   } 
```

所以现在人们对转换测量一无所知。

现在就像我说的，我什至可以制作一个打印机对象，例如：

```
 public class HeightPrinter {

     public void printLongFormat(Height height) 
     {
       print(height.getFeet() + " feet, " + height.getInches() + " inches");
     }

     public void printShortFormat(Height height) 
     {
       print(height.getFeet() + "', " + height.getInches() + "\"");
     }
   } 
```

# php - 通过属性名称获取 XML 值

> ID：11993974
> 
> 赞同：3
> 
> 时间：2012-08-16T19:16:11.773
> 
> 标签：php, xml, simplexml, ncbi

> **可能的重复：**
> [SimpleXML 中的属性值选择](https://stackoverflow.com/questions/551246/attribute-value-selection-in-simplexml)
> [SimpleXML：选择具有特定属性值的元素](https://stackoverflow.com/q/992450/367456)

我正在解析一个 XML 文档并寻找一个特定的 ID。ID 值在属性“pii”下的 ArticleId 元素中提供。原始 XML：

```
<ArticleIdList>
    <ArticleId IdType="pubmed">12676398</ArticleId>
    <ArticleId IdType="pii">S0020729202004460</ArticleId>
</ArticleIdList> 
```

这是整个文档供参考：[http ://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=12676398&retmode=xml&rettype=abstract](http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=12676398&retmode=xml&rettype=abstract)

使用 simplexml_load_file()，我遍历文档以获取值。以下是我如何访问 ArticleId 元素：

```
$xml_PubmedArticle->PubmedData->ArticleIdList->ArticleId; 
```

问题是 ArticleId 中的属性是随机的。一些 ArticleId 元素在第二个元素中包含“pii”值（如下所示），其他记录在第二个元素中具有不同的属性（“doi”）。

```
SimpleXMLElement Object
(
    [ArticleId] => Array
        (
            [0] => 12676398
            [1] => S0020729202004460
        )
) 
```

变化：

```
SimpleXMLElement Object
(
    [ArticleId] => Array
        (
            [0] => 1234
            [1] => ABC123
            [2] => S002012345678
        )
) 
```

我正在寻找“S0002...”ID，它在原始 XML 中由属性“pii”标识。

我应该如何检查/获取基于特定属性的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:31:42.217

几种方法：

```
foreach ($xml_PubmedArticle->PubmedData->ArticleIdList->ArticleId as $id) {
   foreach ($id->attributes() as $name => $value) {
      if ($value == 'pii') {
         //FOUND!
      }
   }
} 
```

..或者很简单的xpath

```
$xml_PubmedArticle->xpath('PubmedData/ArticleIdList/ArticleId[@IdType="pii"]'); 
```

更具体的 xpath 更快。

另请注意，第一个选项将仅迭代第一个选项*，* `ArticleIdList`因为 XPath 将返回它找到的所有项目的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:23:02.770

您可以使用以下方法通过属性值访问特定元素`xpath`：

```
echo $xml_PubmedArticle->xpath('//ArticleIdList/ArticleId[@IdType="pii"]')[0]; 
```

另请参阅手册中的[*Basic SimpleXML Usage*](http://php.net/simplexml.examples-basic)。

一个相关的问题是：[simplexml，返回具有相同标签的多个项目](https://stackoverflow.com/questions/11976453/simplexml-returning-multiple-items-with-the-same-tag)

# c# - OpenXML：Excel，提取单元格文本和图像/图片数据

> ID：11993979
> 
> 赞同：4
> 
> 时间：2012-08-16T19:16:45.460
> 
> 标签：c#, image, excel, openxml, xlsx

我正在编写代码以将单元格中的单元格和图片/图像从 Excel 文档中提取到数据库中。

使用此代码，我可以获得不是图片的单元格值。

但是，Cell 对象中没有图片。请注意，每一行都以图像开头。

```
A1- Picture
B1- Text
C1- Text and so on. 
```

如何从“A”列获取图像？

```
 WorkbookPart wbPart = document.WorkbookPart;
        var workSheet = wbPart.WorksheetParts.FirstOrDefault();

        foreach (Row r in workSheet.Worksheet.Descendants<Row>())
        {
            //Note only has Colum B,C. Not A as A has an image???
            foreach(Cell c in r.ChildElements)
            {
                foreach(object o in c.ChildElements)
                {
                    Console.WriteLine(c.CellReference + " " + o.ToString());
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:34:55.007

```
 [Test]
    public void IterateThruImages()
    {
        WorkbookPart wbPart = document.WorkbookPart;
        var workSheet = wbPart.WorksheetParts.FirstOrDefault();

        foreach (ImagePart i in workSheet.DrawingsPart.ImageParts)
        {
            var rId = workSheet.DrawingsPart.GetIdOfPart(i);

            Stream stream = i.GetStream();
            long length = stream.Length;
            byte[] byteStream = new byte[length];
            stream.Read(byteStream, 0, (int)length);

            var imageAsString = Convert.ToBase64String(byteStream);
            Console.WriteLine("The rId of this Image is '{0}'",rId);
        }
    }

    [Test]
    public void GetImageRelationshipIdAndImageOfThatId()
    {
        string row = "1";
        string col = "0";

        WorkbookPart wbPart = document.WorkbookPart;
        var workSheet = wbPart.WorksheetParts.FirstOrDefault();

        TwoCellAnchor cellHoldingPicture = workSheet.DrawingsPart.WorksheetDrawing.OfType<TwoCellAnchor>()
             .Where(c => c.FromMarker.RowId.Text == row && c.FromMarker.ColumnId.Text == col).FirstOrDefault();

        var picture = cellHoldingPicture.OfType<DocumentFormat.OpenXml.Drawing.Spreadsheet.Picture>().FirstOrDefault();
        string rIdofPicture = picture.BlipFill.Blip.Embed;

        Console.WriteLine("The rID of this Anchor's [{0},{1}] Picture is '{2}'" ,row,col, rIdofPicture);

        ImagePart imageInThisCell = (ImagePart)workSheet.DrawingsPart.GetPartById(rIdofPicture);

    } 
```

# ios - 如何安全地将 CGFloat 设置为 int？

> ID：11993981
> 
> 赞同：23
> 
> 时间：2012-08-16T19:16:48.763
> 
> 标签：ios, math, floating-point, floating-accuracy, floating-point-precision

我经常需要将 a 设置为 a 或 ceil`CGFloat`以`int`计算数组索引。

我永久看到的问题`floorf(theCGFloat)`or`ceilf(theCGFloat)`可能存在浮点不准确的问题。

那么如果 my `CGFloat`is`2.0f`但在内部它被表示为`1.999999999999f`或类似的东西怎么办。我做得到`floorf`，`1.0f`这又是一个浮动。然而，我必须将这个野兽转换为 int，这可能会引入另一个问题。

是否有最佳实践如何将 a 放置或放置到`float`某个位置，以`int`使类似的东西`2.0`永远不会意外地落地，`1`而类似的东西`2.0`永远不会意外地放置在天花板上`2`？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-12-15T09:41:35.640

**快速补充答案**

我将此添加为那些来这里寻找如何使用`floor`和`ceil`使用`CGFloat`（就像我一样）的人的补充答案。

```
var myCGFloat: CGFloat = 3.001
floor(myCGFloat) // 3.0
ceil(myCGFloat) // 4.0 
```

如果`Int`需要 an，则可以将其强制转换为一个。

```
var myCGFloat: CGFloat = 3.001
Int(floor(myCGFloat)) // 3
Int(ceil(myCGFloat)) // 4 
```

**更新**

不再需要使用 C`floor`和`ceil`函数。您可以将 Swift`round()`与[舍入规则](https://stackoverflow.com/a/34785079/3681880)一起使用。

```
var myCGFloat: CGFloat = 3.001
myCGFloat.round(.down) // 3.0
myCGFloat.round(.up) // 4.0 
```

如果您不想修改原始变量，请使用`rounded()`.

**笔记**

*   适用于 32 位和 64 位架构。

**也可以看看**

*   [如何舍入 CGFloat](https://stackoverflow.com/a/34785079/3681880)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-16T19:33:36.247

你的问题有几个误解。

> > 如果我的 CGFloat 是 2.0f 但在内部它表示为 1.999999999999f 怎么办

不可能发生；2.0 和所有相当小的整数一样，具有浮点的精确表示。如果你`CGFloat`是`2.0f`，那么它真的是 2.0。

> > 像 2.0 这样的东西永远不会意外地被限制到 2

2.0的上限*是*2；还可能是什么？

* * *

我认为您真正要问的问题是“假设我进行的计算会产生不精确的结果，在数学上*应该*恰好是 2.0，但实际上要少一些；当我应用`floor`该值时，我得到 1.0 而不是 2.0- ——我该如何预防？”

这实际上是一个相当微妙的问题，没有一个“正确”的答案。你是如何计算输入值的？你打算怎么处理结果？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T19:27:23.753

编辑 - 阅读评论，了解为什么这个答案不正确:)

将 a`float`转换为 an`int`是隐含的`floorf`ie `(int)5.9`is `5`。如果你不介意那就投吧:)

如果你想四舍五入，那么只需`ceilf`在四舍五入之后转换 - 转换的结果根本不会引入任何错误（或者，如果你愿意，在转换之前添加一个，即 `(int)(5.9+1)' is '6 ' - 与四舍五入相同）。

要四舍五入，只需添加 0.5 - `(int)(5.9+0.5)`is `6`but `(int)(5.4+0.5)`is `5`。虽然我只会使用`roundf(5.9)`:)

# sql - SQL 触发器拆分为常量和条件

> ID：11993982
> 
> 赞同：0
> 
> 时间：2012-08-16T19:16:50.293
> 
> 标签：sql, triggers, relational-database, rdbms

我在这个问题上一头雾水，因为我对数据库知识知之甚少，但是 RDBMS 触发器可以用常量和条件分割，例如，在同一个触发器中使用多个“WHEN”语句吗？我被要求研究这个话题，坦率地说，我什至不知道从哪里开始。我没有任何“真实”代码要发布，只是从具有更多数据库经验的用户那里寻找一些理论见解。提前感谢您的洞察力。

示例代码：

```
 CREATE TRIGGER REORDER
 AFTER UPDATE OF ON_HAND, MAX_STOCKED ON PARTS
 REFERENCING NEW AS N
 FOR EACH ROW
 WHEN (N.ON_HAND < 0.10 * N.MAX_STOCKED)
 BEGIN ATOMIC
 WHEN (N.ON_BCK_ORDR < N.CUST_ORDERED)
 VALUES(ISSUE_SHIP_REQUEST(N.MAX_STOCKED - N.ON_HAND, N.PARTNO));
 END 
```

;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:26:16.593

不知道你在问什么。我认为您需要了解创建触发器的语法。尝试谷歌搜索 oracle、MSSQL、MySQL、PostgreSQL 数据库的“创建触发器”语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:40:03.040

在 CASE 语句中使用时，触发器可以包含多个“WHEN”谓词，如下所示：

```
CREATE TRIGGER trg
BEFORE UPDATE OF dept_salary
ON employee_wages

BEGIN
   CASE
      WHEN INSERTING THEN
         DBMS_OUTPUT.PUT_LINE('Inserting');
      WHEN UPDATING ('salary') THEN
         DBMS_OUTPUT.PUT_LINE('UPDATING SALARY');
      WHEN DELETING THEN
         DBMS_OUTPUT.PUT_LINE('DELETING');
   ENDCASE
END 
```

# objective-c - PhotoScroller 示例中的无限循环

> ID：11993985
> 
> 赞同：1
> 
> 时间：2012-08-16T19:17:04.543
> 
> 标签：objective-c, ios, photo-gallery

因此，我正在修改 Apple 的 PhotoScroller 示例，并尝试添加无限循环功能，即：当用户滚动到最后一张图片时，接下来会显示第一张。

为此，我将 contentSize 宽度乘以 100（假死循环），将最后需要的页面索引也乘以 100，并使用假索引（索引模 self.imageCount）来显示正确的图像，如下：

```
- (CGSize)contentSizeForPagingScrollView {
    // We have to use the paging scroll view's bounds to calculate the contentSize, for the same reason outlined above.
    CGRect bounds = pagingScrollView.bounds;
    double rightBounds = bounds.size.height;
    // return CGSizeMake(bounds.size.width * [self imageCount], rightBounds); // no infinite loop
    return CGSizeMake(bounds.size.width * [self imageCount] * 100, rightBounds); // with infinite loop
}

- (void)tilePages 
{
    // Calculate which pages are visible
    CGRect visibleBounds = pagingScrollView.bounds;
    int firstNeededPageIndex = floorf(CGRectGetMinX(visibleBounds) / CGRectGetWidth(visibleBounds));
    int lastNeededPageIndex  = floorf((CGRectGetMaxX(visibleBounds)-1) / CGRectGetWidth(visibleBounds));
    firstNeededPageIndex = MAX(firstNeededPageIndex, 0);
    // lastNeededPageIndex  = MIN(lastNeededPageIndex, [self imageCount] - 1); // no infinite loop
    lastNeededPageIndex  = MIN(lastNeededPageIndex, [self imageCount] * 100 - 1); // with infinite loop

    // Recycle no-longer-visible pages 
    for (ImageScrollView *page in visiblePages) {
        if (page.index < firstNeededPageIndex || page.index > lastNeededPageIndex) {
            [recycledPages addObject:page];
            [page removeFromSuperview];
        }
    }

    [visiblePages minusSet:recycledPages];

    int fakeIndex = firstNeededPageIndex;
    // add missing pages
    for (int index = firstNeededPageIndex; index <= lastNeededPageIndex; index++) {
        fakeIndex = index % self.imageCount;
        if (![self isDisplayingPageForIndex:fakeIndex]) {
            ImageScrollView *page = [self dequeueRecycledPage];
            if (page == nil) {
                page = [[ImageScrollView alloc] init];
            }
            [self configurePage:page forIndex:fakeIndex];
            [pagingScrollView addSubview:page];
            [visiblePages addObject:page];
        }
    }
} 
```

因此，只要 index == fakeIndex，图片就可以正常显示，但是一旦循环超过该点，例如：index = 5，fakeIndex =1，页面将保持黑色并且不再显示图像。

但是，我可以使用控制台看到，当调用 [self configurePage:page forIndex:fakeIndex] 时，会获取正确的图像名称。

如果有人可以花一点时间调查原始示例代码（http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html），并找出问题所在，那就太好了.

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:41:27.043

问题在于：

```
- (CGRect)frameForPageAtIndex:(NSUInteger)index {
    // We have to use our paging scroll view's bounds, not frame, to calculate the page placement. When the device is in
    // landscape orientation, the frame will still be in portrait because the pagingScrollView is the root view controller's
    // view, so its frame is in window coordinate space, which is never rotated. Its bounds, however, will be in landscape
    // because it has a rotation transform applied.
    CGRect bounds = pagingScrollView.bounds;
    CGRect pageFrame = bounds;
    pageFrame.size.width -= (2 * PADDING);
    pageFrame.origin.x = (bounds.size.width * index) + PADDING;
    // pageFrame.origin.y -= 44;
    return pageFrame;
} 
```

该框架将 fakeIndex 作为水平原点的乘数，因此新的页面框架被放置在第一个页面框架的顶部。通过将 fakeIndex 和 index 都传递给 [self configurePage:page forIndex:fakeIndex]，我可以将索引作为水平原点的乘数传递，这样新的页面框架就会是正确的。

# ruby - Google API 客户端错误：Google::APIClient::ClientError

> ID：11993986
> 
> 赞同：3
> 
> 时间：2012-08-16T19:17:09.230
> 
> 标签：ruby, google-drive-api, google-api-client

我已将 Google Drive 与我的应用程序集成在一起，直到今天它都运行良好。我没有更改任何代码或客户端 ID，现在在我们网站上授权 GDrive 时出现此错误：

Google::APIClient::ClientError

无法在以下位置检索发现文档：[https ://www.googleapis.com/discovery/v1/apis/oauth2/v2/rest](https://www.googleapis.com/discovery/v1/apis/oauth2/v2/rest)

我正在使用 Ruby Google Api 客户端，这是引发错误的代码：

```
require 'google/api_client'

      gclient ||= (begin
      client = Google::APIClient.new
      client.authorization.client_id = Rails.application.config.gdrive_client_id
      client.authorization.client_secret = Rails.application.config.gdrive_client_secret
      client.authorization.redirect_uri = "#{request.protocol}#{Rails.application.config.host_url}/users/auth/gdrive"
      client.authorization.access_token = auth_token.token
      client.authorization.scope = [
        "https://www.googleapis.com/auth/drive",
        "https://www.googleapis.com/auth/userinfo.email",
        "https://www.googleapis.com/auth/userinfo.profile"
      ]
      client
    end)
    result = gclient.execute!(
      :api_method => 'oauth2.userinfo.get',
      :version => 'v2'
    ) 
```

错误出现在“result = gclient.execute！”。Google Ruby API 客户端库有什么变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:45:01.637

不 - Ruby 库中没有任何变化。这是由于 Google 在[https://www.googleapis.com/discovery/v1/apis](https://www.googleapis.com/discovery/v1/apis)提供的网络服务发生了变化。

我知道这一点，因为我今天从 python API 库中遇到了同样的问题。

我找到了一个部分解决方法，即避免使用发现服务并直接点击 URL。OAuth2 用户信息服务的 URL 是

[https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=USER_TOKEN_HERE](https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=USER_TOKEN_HERE)

这不是一个很好的长期解决方案，但希望能在谷歌修复他们的发现服务之前让你坚持下去。

更新 - 看起来它现在已经备份（截至 8 月 16 日，太平洋标准时间 2:07）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:48:33.487

这里曾经有

{“id”：“oauth：v2”，“名称”：“oauth”，“版本”：“v2”...}

在[https://www.googleapis.com/discovery/v1/apis](https://www.googleapis.com/discovery/v1/apis)

它现在不在那里。~~那就是问题所在。~~

这是问题的一个症状。

# actionscript-3 - flex4.6中的这个动态掩码

> ID：11993989
> 
> 赞同：1
> 
> 时间：2012-08-16T19:17:19.590
> 
> 标签：actionscript-3, apache-flex

我需要为组件制作一个**动态蒙版**，如下图所示。这些白色圆圈会出现在不同的地方。黑色区域将有内容，白色区域将是透明区域（您可以根据需要更改颜色）。

不知道如何制作这个面具。有什么帮助吗？

![在此处输入图像描述](../Images/eeec6cee621f74dd5dc0f7dd70bd5fb1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:57:40.317

这是一个使用 a`BitmapImage`和它的`maskType`属性来执行此操作的应用程序。请注意，此技术仅适用于扩展 Spark类`BitmapImage`的组件和其他组件。`GraphicElement`

该类`GraphicElement`定义了一个`maskType`属性，如果将其设置为`MaskType.LUMINOSITY`将执行与“正常”屏蔽相反的操作。掩蔽对象中没有绘制任何内容的区域将显示底层对象。蒙版对象中绘制了某些东西的区域将是透明的。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="onCreationComplete()"
               backgroundColor="#0">
    <fx:Script>
        <![CDATA[
            import spark.core.MaskType;

            protected function onCreationComplete():void
            {
                var circles:Array = [
                    { x:25, y:25, radius:20 },
                    { x:100, y:100, radius:50 },
                    { x:200, y:50, radius:25 } ];

                var circleSprite:Sprite=new Sprite();
                drawMaskCircles(circles, circleSprite.graphics);
                image.mask=circleSprite;
                image.maskType=MaskType.LUMINOSITY;
            }

            private function drawMaskCircles(circles:Array, g:Graphics):void
            {
                var l:int = circles.length;
                g.clear();
                g.beginFill(0);
                for (var i:int=0; i<l; i++)
                {
                    var o:Object = circles[i];
                    g.drawCircle(o.x, o.y, o.radius);
                }
                g.endFill();
            }

        ]]>
    </fx:Script>

    <s:BitmapImage id="image" source="klimt12-hp.jpg"/>

</s:Application> 
```

如果您想将此方法用于`GraphicElement`非`BitmapImage`. 例如，假设您想屏蔽扩展的组件`VGroup`：

```
// assuming component that extends VGroup is a variable named: vgroup
var bmd:BitmapData = new BitmapData(vgroup.width, vgroup.height);
bmd.draw(vgroup);

// now we have captured a snapshot of the component
// show this to the user with a BitmapImage
var vgroupImage:BitmapImage=new BitmapImage();
vgroupImage.source = bmd;

// now apply the circleSprite (created in the code above) as the mask
vgroupImage.mask = circleSprite;
vgroupImage.maskType = MaskType.LUMINOSITY;
addElement(vgroupImage); 
```

# c# - DataGrid 行选择并打印其数据

> ID：11993990
> 
> 赞同：1
> 
> 时间：2012-08-16T19:17:38.713
> 
> 标签：c#, sql, wpf

我的dataGrid中有一些行，当我选择其中一个并打印它的数据时，只会打印数据库的第一个图像而我只需要打印所选行的图像，这个片段在cmd.CommandText上有错误......，如何我可以改进吗？

```
private void Print_Click(object sender, RoutedEventArgs e)
    {
        System.Windows.Controls.PrintDialog printDialog = new System.Windows.Controls.PrintDialog();
        if (printDialog.ShowDialog() == true)
        {                
            DrawingVisual dv = new DrawingVisual();
            var dc = dv.RenderOpen();

            SqlConnection con = new SqlConnection();
            con.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=D:\Database\Data.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
            SqlCommand cmd = new SqlCommand();
            BitmapImage bmp = new BitmapImage();

            cmd.Connection = con;
            con.Open();

            cmd.CommandText = "Select Picture from Personnels where Name= " + grdPersonnel1.SelectedItem;

            bmp.CacheOption = BitmapCacheOption.OnLoad;
            bmp.BeginInit();
            bmp.StreamSource = new System.IO.MemoryStream((Byte[])cmd.ExecuteScalar());
            bmp.EndInit();
            dc.DrawImage(bmp, new Rect(140, 170, 150, 150));

            dc.DrawText(new FormattedText("Name:", CultureInfo.GetCultureInfo("en-us"), FlowDirection,
                 new Typeface(new System.Windows.Media.FontFamily("Courier New"), FontStyles.Normal, FontWeights.Bold,
                     FontStretches.Normal), 12, System.Windows.Media.Brushes.Black), new System.Windows.Point(700, 180));
            dc.DrawText(new FormattedText(txtName.Text, CultureInfo.GetCultureInfo("en-us"), FlowDirection,
                  new Typeface(new System.Windows.Media.FontFamily("Courier New"), FontStyles.Normal, FontWeights.Normal,
                      FontStretches.Normal), 11, System.Windows.Media.Brushes.Black), new System.Windows.Point(550, 180));

            dc.Close();

            printDialog.PrintVisual(dv, "Print");
        }

<Image VerticalAlignment="Center" HorizontalAlignment="Center" Stretch="Fill" Name="PictureBox"
                   Source="{Binding Picture}" DataContext="{Binding Path=SelectedItem, ElementName=grdPersonnel1}" Opacity="2">
</Image> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:28:54.583

我不知道 grdPersonel1 是什么类型的控件，但您应该查看 SelectedItem 是否为字符串...如果不是，您可能需要 SelectedValue 或 SelectedItem.Text（在名称字段中包含您想要的字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:24:22.083

我假设 grdPersonnel1 是您的 DataGrid，项目是该网格属于 Personnel 类型，并且该 Personnel 具有 Name 属性。如果这是正确的，试试这个：

```
cmd.CommandText = "Select Picture from Personnels where Name= " + (grdPersonnel1.SelectedItem as Personnel).Name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:20:31.580

我解决了它：

```
private void Print_Click(object sender, RoutedEventArgs e)
{
    System.Windows.Controls.PrintDialog printDialog = new System.Windows.Controls.PrintDialog();
    if (printDialog.ShowDialog() == true)
    {                
        DrawingVisual dv = new DrawingVisual();
        var dc = dv.RenderOpen();

         SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=D:\Database\Database.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
            SqlCommand cmd = new SqlCommand();

            BitmapImage bmp = new BitmapImage();
            cmd.CommandText = "Select Picture from Database where Code=@Code";
            cmd.Parameters.Add("@Code", SqlDbType.NVarChar, 30);
            cmd.Parameters["@Code"].Value = this.txtCode.Text;
            cmd.Connection = con;
            con.Open();

            bmp.CacheOption = BitmapCacheOption.OnLoad;
            bmp.BeginInit();
            bmp.StreamSource = new System.IO.MemoryStream((Byte[])cmd.ExecuteScalar());
            bmp.EndInit();
            dc.DrawImage(bmp, new Rect(140, 170, 150, 150));

        dc.DrawText(new FormattedText("Name:", CultureInfo.GetCultureInfo("en-us"), FlowDirection,
             new Typeface(new System.Windows.Media.FontFamily("Courier New"), FontStyles.Normal, FontWeights.Bold,
                 FontStretches.Normal), 12, System.Windows.Media.Brushes.Black), new System.Windows.Point(700, 180));
        dc.DrawText(new FormattedText(txtName.Text, CultureInfo.GetCultureInfo("en-us"), FlowDirection,
              new Typeface(new System.Windows.Media.FontFamily("Courier New"), FontStyles.Normal, FontWeights.Normal,
                  FontStretches.Normal), 11, System.Windows.Media.Brushes.Black), new System.Windows.Point(550, 180));

        dc.Close();

        printDialog.PrintVisual(dv, "Print");
    } 
```

# javascript - 页面在 Chrome、Firefox 和 IE 中运行良好，但在 iPad Safari 上会导致闪烁或崩溃

> ID：11993993
> 
> 赞同：3
> 
> 时间：2012-08-16T19:17:45.790
> 
> 标签：javascript, jquery, html, ipad, mobile-safari

我正在尝试使用 jQuery 和 CSS3 创建内容滑块。

[这](http://jsfiddle.net/ngwyQ/87/)是我的代码。页面在 Chrome 中运行良好，在 Firefox 中几乎可以正常运行，并且在 IE 中可以正常工作（但几乎没有效果）。

但它在 iPad Safari 中不起作用......

当页面在 iPad Safari 中完成加载时，页面开始闪烁（持续，永远不会完成），然后浏览器崩溃！

但是我找不到[我的滑块](http://jsfiddle.net/ngwyQ/87/)的哪个部分有问题，我不知道问题到底是什么......

对不起，如果我的代码很乱，但我找不到问题所在，所以我不能举一个更简单的例子......

* * *

**更新**

我的代码有`window.resize`jQuery 事件，我在`CorrectPages()`里面调用。

我已将此代码放在该事件的第一行：`alert("windowResize" + window.innerWidth + " , " + window.innerHeight);`

在 PC 中，在我调整窗口大小之前没有警报。但在 iPad 中，警报在页面加载后开始。这些是 iPad 上的消息：

```
windowResize1767 , 1074
windowResise1767 , 2078
windowResize2099 , 4136
windowResize2099 , 8355
windowResize2099 , 17004
windowResize2099 , 34735
... 
```

* * *

**更新 2**

正如 ahmadali 所说，现在我们解决了之前的问题。[这是我的固定代码](http://jsfiddle.net/ngwyQ/101)。但是现在，还有另一个问题：当页面加载时，Safari 会报错`window.innerWidth`并且`window.innerHeight`.

当页面加载时，它看起来是正确的，但随后，它发生了变化。这是片刻之后的结果： ![在此处输入图像描述](../Images/699ea20f9290f0e4161af6f95020b851.png)

你的想法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:52:40.443

马赫迪，

我看不出任何明显的东西，但效率可能是个问题。一大堆改进是可能的。

以下是一些通用指针：

*   将 globals`beginX`等`beginY`放在`$(document).ready(function(){...})`闭包内。
*   尽量减少查找 DOM 节点的需要 - 缓存 jQuery 对象并尽可能使用方法链。
*   .removeclass() 将删除多个空格分隔的类。无需单独声明
*   `$("#d_page" + i + " #overlay")`令人担忧。ids 应该是唯一的，为什么不呢`$("#overlay")`？`$(".... .overlay")`
*   让 jQuery 方法`.eq()`和`.not()`做一些艰苦的工作。
*   给页面 class="page"。让`$pages = $(".page")`，`$("#d_page" + i.toString())`则应简化为`$pages.eq(i)`。这种类型的许多表达式将简化。

通过逐步改进，我设法将功能`correctPages()`从大约 170 多行减少到仅 26 行。

这就是我最终的结果：

```
function correctPages() {
    var $pages = $(".page"),//relies on pages having class="page"
        prefix = (isLandscape(window.innerWidth, window.innerHeight)) ? 'd_landscape_activepage_' : 'd_portrait_activepage_',
        classes = ["whitebackground", prefix+"1", prefix+"2", prefix+"3", prefix+"4"].join(' '),
        $np = [$pages.eq(currentPage), $pages.eq(nextPage(currentPage)), $pages.eq(nextPage(nextPage(currentPage))), $pages.eq(nextPage(nextPage(nextPage(currentPage))))];
    $pages.removeClass(classes);
    $pages.find(".overlay").css({top:0, opacity: 0.6});//relies on overlays having class="overlay"
    $pages.not($np[0]).not($np[1]).not($np[2]).addClass(prefix+"1");
    $pages.not($np[2]).removeClass(prefix+"5").addClass("transition");
    $pages.eq(prevPage(currentPage)).addClass(prefix+"2");
    $np[0].addClass(prefix+"3").find(".overlay").css("opacity", "0.1");
    $np[1].addClass(prefix+"4");
    $np[2].addClass(prefix+"5");
    $np[isNext ? 2 : 3].removeClass("transition");
    setTimeout(function() {
        $np[2].addClass("transition");
    }, 100);
    $(".articlecontent").css("background", "rgba(250,250,250,0)");
    $(".d_landscape_activepage_3 .articlecontent").css("background", "rgba(250,250,250,1)");
    $(".d_portrait_activepage_3 .articlecontent").css("background", "rgba(250,250,250,1)");
    correctDivs();
    $("#d_pagefix").css("opacity", "0");
    setTimeout(function() {
        $np[0].find(".overlay").css("top", "10000px");
    }, 400);
} 
```

此代码未经测试，因此可能不是 100% 正确，但应该为您提供一些关于如何改进它的线索。

# 编辑

作为 resize 事件持续重新触发的解决方法，请尝试动态分离和重新附加 resize 处理程序。

代替 ：

```
$(window).resize(function() {
    correctPages();
}); 
```

和 ;

```
function attachResizeHandler() {
    $(window).on('resize', resizeHandler);
}
function resizeHandler() {
    $(window).off('resize');
    correctPages();
    setTimeout(attachResizeHandler, 600);
} 
```

我选择了 600 毫秒，因为它比正确页面或校验哈希代码中的最长超时时间稍长。根据触发不需要的调整大小事件的确切原因，您可能会侥幸逃脱。

在代码的其他地方，替换所有实例：

```
`correctPages();` 
```

和 ：

```
`resizeHandler();` 
```

`resizeHandler`然后在页面加载时`checkhash();`调用初始附件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T04:48:38.733

好吧，我和 Mahdi 用 iPad 对代码进行了很多测试，最后我们明白问题出在`JqueryMobile`. 我有这个代码

```
$(window).resize(function() {
  $('#log').append('<div>Handler for .resize() called.</div>'+$(window).height()+","+$(window).width());
});​ 
```

并且当我在 iPad 中不添加引用的情况下运行它时`JqueryMobile`，页面不会更改，并且页面中没有添加任何内容[（代码）](http://jsfiddle.net/pV3Za/1/)。

`JqueryMobile`但是当我在 iPad 中添加引用来运行它时，它总是添加新的页面大小[（代码）](http://jsfiddle.net/pV3Za/2/)。

我认为`JqueryMobile`对于多平台网络程序员来说，这是一个非常重要的错误。我[在这里](https://github.com/jquery/jquery-mobile/issues/4857)报告了。

# c - 如何从 Haxe 访问 Alchemy/C 函数

> ID：11993995
> 
> 赞同：1
> 
> 时间：2012-08-16T19:17:52.413
> 
> 标签：c, flash, haxe, swc, alchemy

我正在写一个针对 Flash 的 Haxe 项目。我们已经许可了一个用 C 编写的库，它作为 Alchemy 编译的 SWC 提供。

我可以弄清楚编译选项（我认为），我更关心的是：

*   我要导入什么？
*   这些功能只是可用还是我需要“加载”它们？
*   将调用哪些函数？
*   我是否需要将参数从一种数据类型转换为另一种数据类型？等等

我之前没有使用 Flash 或 Alchemy 的经​​验。

谢谢！

# javascript - 你能创建一个只有一页的完整网站吗？

> ID：11993996
> 
> 赞同：1
> 
> 时间：2012-08-16T19:17:56.737
> 
> 标签：javascript, css, xhtml

你能创建一个只有一页的完整网站吗？

所以使用 XHTML、CSS 和 JavaScript。您可以更改网页的内容和结构。你能否建立一个网站（通常会有多个页面），但实际上将其全部捆绑到一个页面中，并使用 JavaScript 彻底改变网页的结构和内容，以至于它本质上是一个新的信息页面？

您能否让浏览器打开浏览器将显示的初始信息集，然后使用[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)加载其余信息以显示其余网页。这实用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:19:28.527

[绝对](http://en.wiktionary.org/wiki/definately)，是的。试试看吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:19:58.450

是的当然。一种方法是使用诸如[骨干网](http://backbonejs.org)之类的东西。它希望默认与服务器端 RESTful API 通信，但它也可以使用 html5 存储，这就是它的[示例 todo 应用程序](http://documentcloud.github.com/backbone/examples/todos/index.html)所做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:20:09.063

是的，使用 Ajax。

其实这是微软的 ASP.Net MVC 4 专门支持的一种应用类型（ [Singe Page App ）。](http://www.asp.net/single-page-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:20:40.887

你可以做到，但你为什么要这样做？它会扼杀任何对良好搜索引擎优化的尝试。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T18:03:55.883

出于可访问性的原因，完全有可能，但这是个坏主意。如果有人关闭了 Javascript，他们将无法查看单个页面网站的多个页面。我建议您使用 PHP 构建站点。您可以实现相同的“一页”想法，但使用[包含](http://php.net/manual/en/function.include.php)文件的函数`.inc`。要获得多页效果，您所要做的就是更改 URL 中的变量。例如：

```
http://www.example.com/index.php             <- index
http://www.example.com/index.php?page=faq    <- FAQs
http://www.example.com/index.php?page=login  <- login
... 
```

只需使用新字符串更改`$_REQUEST`变量`page`即可呈现多个页面。允许您执行此操作的 PHP 代码如下所示：

```
<?php
...
$page = $_REQUEST['page'];
if(isset($page)){
    if(file_exists($page.".inc"))
        include($page.".inc");
    else
        echo "Page does not exist. Try Again.";
else
    include('main.inc');
...
?> 
```

包含在各种`.inc`文件中的是与网站各个页面相对应的 HTML 代码。

# c# - Linq - 使用 linq 在三个字段之间按一排序（日期时间）

> ID：11993997
> 
> 赞同：1
> 
> 时间：2012-08-16T19:18:00.403
> 
> 标签：c#, linq, datetime, sql-order-by

我有以下课程：

```
public class Operacao : Valor<Operacao>
{
    public DateTime DataDeAdicao { get; set; }
    public DateTime? DataDeAlteracao { get; set; }
    public DateTime? DataDeExclusao { get; set; }
} 
```

我所有的主要类都继承自这个类。

我需要一个使用`linq`, 的查询来返回按这三个字段之间的最大日期排序的值。

我尝试了类似以下的方法：

```
.OrderBy(f => new[] { f.Operacao.DataDeAdicao, f.Operacao.DataDeAlteracao, f.Operacao.DataDeExclusao }.Max()) 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:26:22.727

```
IEnumerable<Operacao> collection  = ...;
var ordered = collection
    .OrderBy(op => new[] {op.DataDeAdicao, op.DataDeAlteracao, op.DataDeExclusao}.Max()); 
```

# c# - 如何在 C#(ASP.NET) 的 google oauth 中获取访问令牌？

> ID：11993999
> 
> 赞同：-1
> 
> 时间：2012-08-16T19:18:17.397
> 
> 标签：c#, asp.net, google-api, oauth-2.0

我正在使用 C#。我成功获得了授权码，但我不知道如何获得访问令牌。我更喜欢[谷歌网站](https://developers.google.com/accounts/docs/OAuth2WebServer)。但是，我不知道如何在 C#(ASP.net) 中应用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:40:23.220

我已成功使用 dotnetopenauth 库（在 SO 中使用它）来访问 Google 的服务。我建议不要使用您自己的令牌管理器，而是使用现有的令牌管理器并将其扩展到您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:05:37.270

Google Drive SDK 包含一个完整的 ASP.NET MVC 示例，您可以将其用作参考：

[https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-13T21:05:55.897

试试这样。

```
String client_id = "<OAUTH_client_id >";
String client_secret = "<OAUTH_client_secret>";

var BaseAddress = "https://adddress.com";
var httpClient = new HttpClient() { BaseAddress = new Uri(BaseAddress) };

var creds = $"client_id={client_id}&client_secret{client_secret}&grant_type=client_credentials";
httpClient.DefaultRequestHeaders.Accept.Clear();
httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/x-www-form-urlencoded"));
var content = new StringContent(creds, Encoding.UTF8, "application/x-www-form-urlencoded");
var response = httpClient.PostAsync("/oauth2/token", content).Result;
var jsonContent = response.Content.ReadAsStringAsync().Result;

var tokenObj = JsonConvert.DeserializeObject<BearerViewModel>(jsonContent);
var token = tokenObj.access_token; 
```