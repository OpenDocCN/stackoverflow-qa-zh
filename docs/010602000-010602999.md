# StackOverflow 问答 10602000-10602999

# single-sign-on - 汇合 TicketValidationException 上的 CAS

> ID：10602001
> 
> 赞同：2
> 
> 时间：2012-05-15T13:40:37.187
> 
> 标签：single-sign-on, cas, confluence

您好我正在尝试为 Confluence 创建一个暂存服务器，我克隆了 VM 并更新了 Confluence 设置。现在登录后我得到

```
 javax.servlet.ServletException: org.jasig.cas.client.validation.TicketValidationException: 
            ticket 'ST-224-7T1R0Olcgf3BJfvwOjJ3-cas' not recognized
Referer URL

https://sso.server.com:8445/cas/login?service=https%3A%2F%2F10.1.1.59%3A8443%2Fhomepage.action 
```

原来的 Confluence 仍然有效，但 Staging one 错误我们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:06:37.853

这是一个错误，但有一个解决方法。请参阅：[http](http://www.liferay.com/community/forums/-/message_boards/message/13347927) ://www.liferay.com/community/forums/-/message_boards/message/13347927 。

概括：

1.  禁用使用条款（控制面板 > 门户设置 > 用户 > 需要使用条款）
2.  禁用密码提醒查询。将该行放入`users.reminder.queries.enabled=false`文件 portal-ext.properties 中。

我和你有同样的问题，试过这个食谱，它奏效了。祝你好运！

# javascript - 将一些数据转换为 json 格式，但不确定它是否工作

> ID：10602004
> 
> 赞同：1
> 
> 时间：2012-05-15T13:40:55.650
> 
> 标签：javascript, json, format

我正在尝试获取 div 的属性并尝试将其放入 json 格式。例如，如果我有一个 div 并且它的属性是：

```
api="something" data-page="5" data-tag="blah" 
```

所以我试图把它以这种格式放在 json 中：

```
{"api":"getArticles","parameters":{"param1":"value 1","param2":value2... }} 
```

这是我到目前为止编写的代码，但我不确定我是否做得对，因为它返回 [object Object]。如何检查我所做的是否正确并以上述形式查看 json 数组？

JSfiddle 链接：http: [//jsfiddle.net/ithril/mCNbW/4/](http://jsfiddle.net/ithril/mCNbW/4/)

```
var arr = $("div").get(0).attributes, attributes = [];
var l;
var attrinames;
var attrivalues;
var api;
for(var i = 0; i < arr.length; i++) {
    if(arr[i].name.indexOf("data-")==0){
        l=arr[i].name.lastIndexOf("data-",0)+"data-".length; 
        attrinames=arr[i].name.substr(l);
if(attrinames!="apicall"){
    attrivalues=arr[i].value;
    attributes.push({attrinames:attrivalues});
}
else 
    api=attrivalues;
}
}
var json=[]
    json.push({"api":api,"parameters":attributes});
alert(json);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<div class="divload" data-apicall="anything.php" link="" data-page="5" data-tag="stuff">
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:43:31.223

不要使用`alert(variable)`. 请改用[`console.log(variable)`](http://jsfiddle.net/mCNbW/5/)调试器。点击 F12 并查看控制台选项卡以查看`console.log()`. 另外，我会避免命名变量`json`，因为有一个名为`JSON`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:47:51.983

`JSON.stringify(data)`将序列化对象中包含的数据。

请参阅更新[的 jsFiddle](http://jsfiddle.net/mCNbW/6/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:48:22.937

随心所欲地构建 JS 对象，然后将其传递给 JSON stringtifier，如下所示： [https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

不要试图为自己构建一个 stringfier，因为你会犯错误，最好使用库或构建的东西。

JSON 格式是文本，并且您正在构建一个对象，您需要使用 json 格式将该对象序列化为文本。

通常它看起来像这样：

`JSON.stringify(data)`

# javascript - 如何使用 node-mongodb-native 在 mongodb find() 的回调中返回临时集合？

> ID：10602007
> 
> 赞同：1
> 
> 时间：2012-05-15T13:41:16.613
> 
> 标签：javascript, node.js, mongodb

有没有办法从 find() 操作而不是游标返回临时集合？我正在使用 node-mongodb-native 驱动程序，我想对 find() 操作的结果运行 mapReduce。像这样的东西：

```
client.open(function(err) {
    client.collection(collectionName, function(err, collection) {
        collection.find( {days_since_epoch: {$gte: query.begin}).toArray(function(err, docs) {
            // Need to run a mapReduce here on the results
            // Preferably on a temporary collection instead of the default cursor or array above
       });
    });
}); 
```

可能有更好的方法来做到这一点，所以我也愿意。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:52:58.810

不，但是 map-reduce 函数需要一个查询，所以你不需要 find :)

[http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#mapreduce](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#mapreduce)

# javascript - 如何将 twitcker.com“Twitter Ticker”插入 Google 协作平台？

> ID：10602012
> 
> 赞同：0
> 
> 时间：2012-05-15T13:41:30.950
> 
> 标签：javascript, html

在我们安全的 Google 网站上，我尝试使用[http://twitcker.com](http://twitcker.com)插入“Twitter Ticker” 。Twitcker 使用 Javascript 创建代码，而 Google 协作平台不使用 Javascript，只使用 HTML。我确实找到了一个“转换器”网站，Google 小工具编辑器[https://developers.google.com/gadgets/docs/tools#GGE](https://developers.google.com/gadgets/docs/tools#GGE)将 Javascript 转换为 HTML。但是当我试图将它作为一个小工具插入我的谷歌网站时，它没有出现，因为（我认为）是一个试图插入安全谷歌网站的不安全的“Twitter Ticker”。我按照我在 (https://sites.google.com/site/mori79/html-gadgets) 上找到的说明进行了操作。仅供参考：当我将“Twitter Ticker”插入我的 iGoogle 页面时，它看起来还不错。帮助！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:43:34.267

Twitcker 还有一个安全的 HTTPS 连接。你知道吗？也许在你得到的输出代码中使用 HTTPS:// 前缀再试一次。

# flash - 静态常量错误 [Flash]

> ID：10602017
> 
> 赞同：1
> 
> 时间：2012-05-15T13:41:41.267
> 
> 标签：flash, static, constants

引用静态常量，出现错误：

```
TypeError: Error #1009:
    at global$init()[StoneBlock.as:3]
    at Block$cinit()
    at global$init()[Block.as:3]
    at Main()[Main.as:10] 
```

样本。

主类：

```
public class Main extends Sprite 
{
    public function Main()
    {
        trace(Block.STONE.id);
    }
} 
```

块类：

```
public class Block 
{
    public static const BEDROCK:Block = new Block(1);
    public static const STONE:Block = new StoneBlock(2);

    public var id:int;

    public function Block(id:int)
    {
        this.id = id;
    }
} 
```

石块类：

```
public class StoneBlock extends Block 
{
    public function StoneBlock(id:int) 
    {
        super(id);
    }
} 
```

请告诉我如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:07:07.283

不确定您要做什么。

你不能这样做吗？

```
public static const BEDROCK_ID:int = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:30:04.823

我相信这是因为静态常量的绑定是在第一次提到该类时创建的。你可以尝试做：

```
trace(Block.STONE, Block.STONE.id); 
```

或者类似的东西。从技术上讲，它应该按原样工作，但是在首先构造哪个类（Block 或 StoneBlock）时可能涉及一些竞争条件。

**编辑**

我想得越多，我就越相信这是竞态条件，运行时在构造 Block 类的同时尝试构造 StoneBlock 类（即尚未构造），但 StoneBlock 要求 Block 在其构造时存在。不幸的是，看起来您必须将常量重做为将根据请求返回值的 getter：

```
public static const STONE:Block = new StoneBlock(2);
>>>>>
private static var _stone:Block;
public static function get STONE():Block
{
    if (!_stone) _stone = new StoneBlock(2);
    return _stone;
} 
```

因为通过这种方式，您将能够将依赖类的实例化推迟到它所依赖的类完全构建的时间。不是一个很好的解决方案，但看起来你没有太多选择。

# android - 无法覆盖活动的 OnCreate

> ID：10602019
> 
> 赞同：0
> 
> 时间：2012-05-15T13:41:48.637
> 
> 标签：android, android-activity, overriding, oncreate

我有 2 个活动，一个是 MainActivity，另一个是 ReadActivity。

每当我从 MainActivity 启动 ReadActivity 时，Activity 都会启动，但它什么也没显示，只有 Manifest 文件中的 android:label 值。

在我调查时，我尝试在 ReadActivity 中放置一个日志，但我注意到 OnCreate 方法没有被调用，因为我忘记了覆盖该方法，但是当我将“@Override”放在 OnCreate 方法上方时，我得到了以下错误：

“ReadActivity 类型的方法 OnCreate(Bundle) 必须覆盖或实现超类型方法”。

我不明白这一行有什么问题，我已经检查了很多次，将代码与其他应用程序的代码进行了比较，但我似乎无法覆盖它。谁能帮我？以下是我的项目的代码。

**主要活动**

```
package com.rangga.elearning.ngaji;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.View.OnClickListener;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity{
    /** Called when the activity is first created. */

    TextView txtLogo, txtVersion;
    Button btnRead, btnIndex, btnAbout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.main);

        //Typeface font =  Typeface.createFromAsset(getAssets(), "assets/Schoolbell.ttf");

        txtLogo = (TextView) findViewById(R.id.txtLogo);
        txtVersion = (TextView) findViewById(R.id.txtVersion);
        btnRead = (Button) findViewById(R.id.btnRead);
        btnIndex = (Button) findViewById(R.id.btnIndex);
        btnAbout = (Button) findViewById(R.id.btnAbout);

        /* txtLogo.setTypeface(font);
        txtVersion.setTypeface(font);
        btnRead.setTypeface(font);
        btnIndex.setTypeface(font);
        btnAbout.setTypeface(font); */

        btnRead.setOnClickListener(new View.OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                callIntent();
            }
        });
    }

    public void callIntent(){
        Intent i = new Intent(this, ReadActivity.class);
        startActivity(i);
    }
} 
```

**阅读活动**

```
package com.rangga.elearning.ngaji;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;

public class ReadActivity extends Activity{

    private static String TAG = "ReadActivity";

    @Override
    public void OnCreate(Bundle savedInstanceState){        

        Log.i(TAG, "ReadActivity dimulai");
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.read);          
    }

} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.rangga.elearning.ngaji"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7"
              android:targetSdkVersion="7"
              android:maxSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name=".ReadActivity"
            android:label="Baca"
            android:screenOrientation="landscape">

        </activity>
    </application>

</manifest> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:45:38.263

`onCreate()`不是`OnCreate()`。此外，您的清单不包含`Intent`您的`ReadActivity`.

# maven-plugin - 有没有办法在我的 pom 文件中指定描述符而不是单独的 xml 文件？

> ID：10602029
> 
> 赞同：0
> 
> 时间：2012-05-15T13:42:09.837
> 
> 标签：maven-plugin, maven-assembly-plugin

使用 maven 程序集插件时，我可以`configuration`在 pom 文件内的节点（或类似节点）中指定描述符，而不必创建 assembly.xml 文件吗？

我需要它来在一个目录（及其子目录）中包含 jar 文件，我可以在一行中指定类似的东西`<include>**/*.jar</include>`

另外，我需要让其他项目的开发人员来做这件事，这就是为什么我不想有一个单独的文件，而只是要求他们在配置插件时包含这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:03:36.610

简短的回答 - 你不能。但是，您可以将您的程序集插件配置和此描述符放入团队中所有项目使用的父 pom 中，这样其他开发人员就不必再这样做了。

# playn - PlayN.Net 在 HTML 中返回空字符串

> ID：10602032
> 
> 赞同：0
> 
> 时间：2012-05-15T13:42:17.077
> 
> 标签：playn

我无法理解我在使用 PlayN.net 时遇到的问题。也许这是微不足道的，但由于我对基于网络的东西很陌生，所以我有点卡住了，所以我希望这里有人能启发我:)

我的问题：我想从我的游戏中访问一个 servlet，它可以工作，但只能在 java 中使用。Html 给了我一个空字符串。

简单的 Servlet：

```
public class Servlet1 extends HttpServlet {
   protected void doGet(HttpServletRequest request, HttpServletResponse response)
      throws ServletException, IOException
   {
      PrintWriter writer = response.getWriter();
      writer.println("test");
      writer.close();
   }
} 
```

和简单的电话：

```
PlayN.net().get("http://localhost:8080/Test", new Callback<String>() {
            @Override
            public void onSuccess(String result) {
                System.out.println("YAY "+result);
            }
            @Override
            public void onFailure(Throwable cause) {
                System.out.println("BUH");
            }
        }); 
```

所以就像我说的，java 打印“YAY test”，HTML 打印“YAY”，我不知道为什么。我尝试在另一台服务器（不是本地主机）上运行 servlet，但反应相同。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:25:04.063

在浏览器 (HTML) 中，您必须使用“同源策略”：请参阅[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

建议的解决方案和解决方法：

[PlayN 客户端与服务器的协作](https://stackoverflow.com/questions/9053798/collaboration-from-playn-client-with-server)

[为什么 net().get 成功返回空字符串](https://stackoverflow.com/questions/10413576/why-net-get-on-success-return-empty-string)

# c# - 如何使用 Access 使用三个不同的表显示值

> ID：10602034
> 
> 赞同：1
> 
> 时间：2012-05-15T13:42:30.933
> 
> 标签：c#, ms-access

```
OleDbDataAdapter dt = new OleDbDataAdapter("select UserName from UserInfo where User_ID = (select User_ID from Groupmem_info where Group_ID=(select Group_Member_ID from GroupInfo where Group_ID ='" + grp.Text + "'", con); 
```

我们可以在需要显示三个链接表中的用户名的访问中使用这种代码吗？组和用户的相互 id 将在组成员信息表中。

请建议如何检索用户名，我想在`datagridview`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:55:25.867

更有效的方法是将 SQL 语句更改为内部联接并使用参数化查询来避免 SQL 注入攻击：

```
OleDbDataAdapter adapter = new OleDbDataAdapter();
OleDbCommand command;

// Create the SelectCommand.
command = new OleDbCommand("select UserName from UserInfo ui  join Groupmem_info gi on ui.User_ID =ui.User_ID where gi.Group_ID = ? ", con);

command.Parameters.Add("GroupID", OleDbType.Integer);//assuming it's an integer
adapter.SelectCommand = command; 
```

现在您可以调用`Fill`并将网格`OleDbDataAdapter`的属性设置为`DataSource`您填写的任何表格：

```
youGrid.DataSource=yourDataTable; 
```

# java - 如何在 Android 上捕获即时消息流量？

> ID：10602036
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:42:35.270
> 
> 标签：java, android, android-service, instant-messaging

我想要一个可以从市场上下载并作为服务运行的应用程序，用于捕获和归档 Android 设备上的以下流量：Facebook Messenger、Twitter、Google Talk、MSN、AOL 和 Yahoo IM。

有没有办法在不生根手机或开发自定义 ROM 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:00:35.193

由于应用程序本身不会公开消息，因此您需要捕获网络流量并尝试从中读取信息。但是，如果应用程序传输加密的消息（https 等），则可能是不可能的。

Packetcapture 需要`tcpdump`设备或 Android 4+ 上的 root 和（或类似）以及类似[tPacketCapture中的 VPN 服务](http://forum.xda-developers.com/showthread.php?t=1578974)

我不相信通过 VPN 服务捕获数据包是可能的，因此在未来的 Android 版本中可能会再次被阻止。

> 如何在 Android 上捕获即时消息流量？

所以基本上你不能在标准应用程序中做到这一点，除非信使应用程序提供了一个 API 来做到这一点。

# winforms - 为我在 VS 2010 的工具箱中添加的每个 DateTimePicker 控件设置默认的 Format 属性值

> ID：10602042
> 
> 赞同：0
> 
> 时间：2012-05-15T13:43:02.077
> 
> 标签：winforms, properties, format, controls, datetimepicker

我正在针对具有多个日期字段的数据库构建数据库应用程序。我正在使用绑定到我的 Windows 窗体中的这些字段的 DateTimePickers。

默认情况下，每当我在 Visual Studio 2010 中通过拖放将 DateTimePicker 控件添加到我的表单时，该`Format`属性都会设置为`Long`. 我希望 DateTimePicker 始终以`Short`格式出现。

是否可以编辑 VS 2010 工具箱中提供的模板控件而无需创建自定义控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:54:31.520

也许您可以创建一个派生自 DateTimePicker 的 UserControl，然后以这种方式设置 Format 的默认值。:)

# python - 为什么 python 在套接字对象的实例化中也接受 `proto` 时使用 SOCK_STREAM 或 SOCK_DGRAM 指定 IPv4 或 IPv6？

> ID：10602044
> 
> 赞同：1
> 
> 时间：2012-05-15T13:43:08.340
> 
> 标签：python, sockets, networking

为什么 python 在套接字对象的实例化中指定 IPv4 或 IPv6`SOCK_STREAM`或`SOCK_DGRAM`当它还接受协议号参数时（nrs 4 和 41，请参阅 [协议号列表](http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xml)）？（如`proto`）`socket.socket([family[, type[, proto]]])`这不是使`family`论点无用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:14:06.467

没有。您链接到的协议列表中的第 4 和 41 号明确说明了“IPv4 封装”和“IPv6 封装” 例如，您将使用带有 IPV6 封装的 IPv4 来生成数据包，然后在上游解封装（除非这实际上不是一个词），例如IPv6 over IPv4 隧道

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:23:47.143

`proto`在此上下文中是指要使用的第 4 层 (L4) 协议。这很可能是`IPPROTO_TCP`(TCP) 或`IPPROTO_UDP`(UDP)。实际上，您不太可能需要非常频繁地显式传递这些参数，因为 IP 通常`SOCK_STREAM`意味着 TCP 并`SOCK_DGRAM`意味着 UDP。

但是，如果您想在程序中使用原始套接字实现 ICMP 支持，它可能会派上用场。然后你会通过`SOCK_RAW`and `IPPROTO_ICMP`。另外，请记住，这是基于 Berkeley 套接字 API，它旨在处理的不仅仅是 IP 网络（查看模块中的所有其他`AF_*`内容`socket`以了解它支持的内容）。

相比之下，IPv4/IPv6 是第 3 层 (L3) 协议，独立于 TCP/UDP 工作。

编辑：

至于为什么您在该列表中看到 IPv4/IPv6 封装，它是为了支持[IP in IP](http://en.wikipedia.org/wiki/IP_in_IP)或[6in4](http://en.wikipedia.org/wiki/6in4)等协议。您不太可能在程序中直接处理这些机制。

# java - Java 有向图框架

> ID：10602045
> 
> 赞同：0
> 
> 时间：2012-05-15T13:43:08.667
> 
> 标签：java, user-interface, graph

我需要以图形方式表示有向图，并可以在单击节点时定义事件。

但是图书馆需要是免费的，因为它是出于专业目的，我不会幸运地得到一个付费的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:51:56.930

请参阅[Java 图形库](https://stackoverflow.com/questions/10022289/java-graph-library)

[jGraph](http://www.jgraph.com/jgraph.html)和[JUNG](http://jung.sourceforge.net/)都在 BSD 下获得许可。

# insert - FMDB sqlite 插入失败

> ID：10602046
> 
> 赞同：4
> 
> 时间：2012-05-15T13:43:13.210
> 
> 标签：insert, fmdb

来自非 SQL 背景，我创建了一个名为 test 的简单表，其中包含 3 个字段：

```
 NSString *testtable = @"create table if not exists test(testid integer primary key, userid integer, contentid text)";
if (![db executeUpdate:testtable]) {
    NSLog(@"create test, %d:%@", [db lastErrorCode], [db lastErrorMessage]);
    return NO;
} 
```

当我向表中插入记录时，出现 exc_bad_access 错误：

```
 if (![db executeUpdate:@"insert into test values(?,?,?)", NULL, 1, @"HELLO"]) {
    NSLog(@"insert test, %d:%@", [db lastErrorCode], [db lastErrorMessage]);
    return NO;
} 
```

如果我将列 'userid' 类型从整数更改为文本，这会很好。我在控制台上使用 sqlite 命令测试表，它也运行良好。你们有什么感想？谢谢...

我尝试另一种方法来处理这个问题：

```
 if (![db executeUpdate:@"insert into test values(?,?,?)", NULL, [NSNumber numberWithInt:1], @"HELLO"]) {
    NSLog(@"testint, %d:%@", [db lastErrorCode], [db lastErrorMessage]);
    return NO;
} 
```

然后它工作。我说不出原因……也许 fmdb 只支持对象插入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:39:40.777

我相信 FMDB 需要对象来替换 ? 和 int 不是对象。将 1 更改为`[NSNumber numberWithInt:1]`

另外，你在哪里打开你的数据库，你有这样的东西吗？

```
db = [FMDatabase databaseWithPath:writableDBPath];

    if ([db open]) { 
```

之后立即添加`[db setTraceExecution:TRUE];`，它会为您记录您的 SQL 文本。

可以先创建您的 SQL NSString，然后插入您的 int，然后让 FMDB 运行您已经填充的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:45:49.177

executeUpdate：仅支持作为占位符值传递的对象。您可以使用 executeQueryWithFormat: 如果您希望使用 printf 样式参数（您可以使用 %d 来表示您的号码）。不过，我个人会坚持使用对象，因为 executeQueryWithFormat: 无论如何都会最终将值转换为对象。

# c - 时间函数在c中不起作用

> ID：10602048
> 
> 赞同：0
> 
> 时间：2012-05-15T13:43:22.187
> 
> 标签：c, datetime

我使用以下代码段来获取系统时间。但它会导致分段错误。请帮忙。

```
printf("Time : %s\n", System("time"));
return 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:45:18.880

请改用以下代码：

```
time_t t;
time(&t);
printf("%s", ctime(&t)); 
```

这将解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:45:10.620

我假设你的意思是`system()`而不是`System()`.

您似乎期望这`system()`将返回一个字符串，其中包含命令打印到终端的任何内容。它不这样做。实际上，`system()`返回子进程的退出代码。

获取当前时间的最简单方法是使用以下`time()`函数：

```
NAME
       time - get time in seconds

SYNOPSIS
       #include <time.h>

       time_t time(time_t *t);

DESCRIPTION
       time()  returns  the  time  since  the  Epoch (00:00:00 UTC, January 1,
       1970), measured in seconds.

       If t is non-NULL, the return value is also stored in the memory pointed
       to by t. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T13:46:11.820

system() 函数返回一个退出状态（一个 int），而不是一个字符串。调用`system("time")`将时间打印到标准输出。如果这就是你想要的，只需使用

```
 system("time"); 
```

你得到一个段错误，因为 int 0，当解释为 printf 的指针时`%s`是一个 NULL 指针。取消引用 NULL 指针是未定义的行为，分段错误是这种未定义行为的一种可能性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T13:45:13.797

system ( [) 函数](http://linux.die.net/man/3/system)返回一个整数，while`%s`表示您要打印一个字符串。系统函数返回的不是`time`程序的结果，而是退出值。

# java - 使用kettle扩展，并发问题

> ID：10602049
> 
> 赞同：1
> 
> 时间：2012-05-15T13:43:26.243
> 
> 标签：java, mysql, database, data-warehouse, kettle

我假装扩展我的应用程序，并且该过程的某些部分包括由一些处理客户端同时运行水壶作业，在某些点转换需要在某些共享表上执行组合查找（假设“clients_table”），该表快速增长是由于所有可能的客户都是未知的，因此它们被插入作为显示。在此表上同时执行作业（假设 2 个，但可能不止于此，每个客户端每个客户端）的组合查找，由于我想在插入非现有客户端时出现“重复的条目键 xxx”错误（当组合查找时），它会出现并发问题没有在表中找到它们来检索它的 ID）。事实上，每次处理客户端执行水壶作业时都会转移新客户端，因此上述问题很常见。我想知道我是否打破了水壶哲学或者我遗漏了一些东西，我读过关于使水壶转换事务性，这可能是我的解决方案，因为我认为正在发生的事情是组合查找步骤不是事务性的？给我一些想法。

PS：我正在使用 Kettle 4.2 和 MySql 5.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:04:52.163

我最终为kettle 做了我自己的事务组合查找插件（带有缓存管理），因为它使整个转换事务变得多么昂贵。

# jquery - 基于Wordpress主题文件有条件加载js文件

> ID：10602056
> 
> 赞同：0
> 
> 时间：2012-05-15T13:43:33.700
> 
> 标签：jquery, wordpress, wordpress-theming

如何确定是否调用了 Wordpress 主题文件？例如，每次加载archive.php时，我想有条件地在页脚添加一个js文件。

我目前在functions.php中使用类似的东西来加载全局js。如何调整以便根据调用的 Wordpress 文件加载额外的 js？

```
//Use Google CDN to load jQuery
function use_google_jquery() {
    if (!is_admin()) {
        // comment out the next two lines to load the local copy of jQuery
        wp_deregister_script('jquery');
        wp_register_script('jquery', 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js', false, '1.7.2', true);
        wp_enqueue_script('jquery');

        // load a JS file from my theme: js/default.js
        wp_enqueue_script('my_script', get_bloginfo('template_url') . '/js/default.js', array('jquery'), '1.0', true);      
    }   }   add_action('init', 'use_google_jquery'); 
```

编辑和注意： [特定 Wordpress 页面上的 JS](https://stackoverflow.com/questions/3482521/how-do-i-load-jquery-for-only-one-specific-page-in-my-wordpress-theme)适用于给定页面，但我正在寻找给定模板文件，例如 archive.php 并加载到页脚中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:09:32.807

使用以下函数 is_single()、is_archive()、is_page()、is_home()

# objective-c - 将行插入 UITableView 而不更改先前内容的位置

> ID：10602058
> 
> 赞同：0
> 
> 时间：2012-05-15T13:43:42.217
> 
> 标签：objective-c, ios, uitableview

我正在尝试在表格的开头插入一行，但我想保持以前内容的位置（类似于加载更多推文时的 Twitter 应用程序），目前我正在使用以下代码：

```
- (void) insertObject: (id) object
{
    [_objects insertObject: object atIndex: 0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:index inSection:0];
    [[self tableView] insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:08:45.783

我不确定我是否完全理解这里的问题。也就是说，如果您真的只想在表格顶部插入一个新行，那么为什么不能执行以下操作：

```
- (void) insertObject: (id) object
{
    [_objects insertObject: object atIndex: 0]; // Add the new object to the array (position 0)
    [self.tableView reloadData]; // Reload the data in the table
} 
```

**注意：**这是基于这样的假设，即在填充表中的数据时，您会按顺序遍历数组中的每个对象。

# c# - 将 displayname 属性作为参数传递

> ID：10602061
> 
> 赞同：4
> 
> 时间：2012-05-15T13:43:47.377
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

对于以下 ActionLink 调用：

```
@Html.ActionLink("Customer Number", "Search", new { Search = ViewBag.Search, q = ViewBag.q, sortOrder = ViewBag.CustomerNoSortParm, }) 
```

我正在尝试传入@model.CustomerNumber 的标签以生成“客户编号”文本，而不必显式传递它。参数是否有 @Html.LabelFor(model => model.CustomerNumber) 的等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:49:27.400

没有这种开箱即用的助手。

但是编写一个自定义的非常容易：

```
public static class HtmlExtensions
{
    public static string DisplayNameFor<TModel, TProperty>(
        this HtmlHelper<TModel> html, 
        Expression<Func<TModel, TProperty>> expression
    )
    {
        var htmlFieldName = ExpressionHelper.GetExpressionText(expression);
        var metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
        return (metadata.DisplayName ?? (metadata.PropertyName ?? htmlFieldName.Split(new[] { '.' }).Last()));
    }
} 
```

然后使用它（在将定义它的命名空间带入范围之后）：

```
@Html.ActionLink(
    "Customer Number", 
    "Search", 
    new { 
        Search = ViewBag.Search, 
        q = ViewBag.q, 
        sortOrder = ViewBag.CustomerNoSortParm, 
        customerNumberDescription = Html.DisplayNameFor(model => model.CustomerNumber)
    }
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:47:48.803

是的，但它很丑。

```
ModelMetadata.FromLambdaExpression(m => m.CustomerNumber, ViewData).DisplayName 
```

您可能希望将其包装在扩展方法中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-13T00:42:37.103

有一个更简单的答案，伙计们！您只需要通过将“[0]”添加到“m => m.CustomerNumber”来引用第一行索引值！（而且，是的，即使没有值行，这也会起作用！）

```
 Html.DisplayNameFor(m => m[0].CustomerNumber).ToString() 
```

将其放入您的操作链接中：

```
@Html.ActionLink(Html.DisplayNameFor(m => m[0].CustomerNumber).ToString(), "Search", new { Search = ViewBag.Search, q = ViewBag.q, sortOrder = ViewBag.CustomerNoSortParm, }) 
```

小菜一碟！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-24T07:06:32.547

嘿，很老的线程，但我得到了一个更好更简单的答案：

```
@Html.ActionLink(Html.DisplayNameFor(x=>x.CustomerName), "Search", new { Search = ViewBag.Search, q = ViewBag.q, sortOrder = ViewBag.CustomerNoSortParm, }) 
```

# c# - 如何使用 Visual C# Express 打开 Microsoft Word 并显示包含邮件合并的特定 .doc？

> ID：10602064
> 
> 赞同：0
> 
> 时间：2012-05-15T13:44:01.540
> 
> 标签：c#, visual-studio-2010, ms-word, mailmerge

我的应用程序更新数据库上的项目，然后打开邮件合并文档，这些文档填充了数据库表中的字段。

我已将 .docs 保存到网络驱动器，但我之前两次打开它们的尝试都返回了不同的错误；任何一个词都告诉我尝试打开文件时出错，或者它告诉我该文件正在由我自己使用并且被锁定以进行编辑。

下面分别介绍两种方法：

```
//method1
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.FileName = "WINWORD.EXE";
startInfo.Arguments = fileName;
Process.Start(startInfo);

//method 2 (a simplified version of the first)
Process.Start(fileName); 
```

是否有其他方法可以使用 C# 打开这些 Microsoft Word 文档，或者上述方法有什么明显错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:54:35.463

您的两种方法都应该有效......但这是另一种尝试。也许你会得到更好的错误信息。

```
var type = Type.GetTypeFromProgID("Word.Application");
dynamic word = Activator.CreateInstance(type);
word.Visible = true;
word.Documents.Open(@"C:\test.docx"); 
```

# python - 在 Django 中关注 twitter 之类的用户，你会怎么做？

> ID：10602071
> 
> 赞同：14
> 
> 时间：2012-05-15T13:44:33.143
> 
> 标签：python, django, database-design, twitter, django-models

我正在玩 Django/python 中的关系，我想知道你们如何在用户和他的追随者之间以及追随者与他追随的用户之间建立关系。

很想看看你的意见...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-15T14:48:50.830

首先，您应该了解如何[存储有关用户的附加信息](https://docs.djangoproject.com/en/1.3/topics/auth/#storing-additional-information-about-users)。它需要另一个与一个用户有关系的模型，即“个人资料”模型。

然后，您可以使用 M2M 字段，假设您使用[django-annoying](https://github.com/skorokithakis/django-annoying)，您可以这样定义您的用户配置文件模型：

```
from django.db import models

from annoying.fields import AutoOneToOneField

class UserProfile(models.Model):
    user = AutoOneToOneField('auth.user')
    follows = models.ManyToManyField('UserProfile', related_name='followed_by')

    def __unicode__(self):
        return self.user.username 
```

并像这样使用它：

```
In [1]: tim, c = User.objects.get_or_create(username='tim')

In [2]: chris, c = User.objects.get_or_create(username='chris')

In [3]: tim.userprofile.follows.add(chris.userprofile) # chris follows tim

In [4]: tim.userprofile.follows.all() # list of userprofiles of users that tim follows
Out[4]: [<UserProfile: chris>]

In [5]: chris.userprofile.followed_by.all() # list of userprofiles of users that follow chris
Out[5]: [<UserProfile: tim>] 
```

另外，请注意，您可以检查/重用[django-subscription](https://github.com/subsume/django-subscription)、[django-actstream](https://github.com/justquick/django-activity-stream)、[django-social](https://github.com/yourlabs/django-social)等应用程序（可能更难使用）...

您可能想查看[通知](http://djangopackages.com/grids/g/notification/)和[活动](http://djangopackages.com/grids/g/activities/)的 django 包，因为它们都需要一些关注/订阅数据库设计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:04:41.643

我会这样做：

```
class Tweeter(models.Model):  
    user = models.ManyToManyField('self', symmetrical=False, through='Relationship')

class Relationship(models.Model):  
    who = models.ForeignKey(Tweeter, related_name="who")
    whom = models.ForeignKey(Tweeter, related_name="whom") 
```

在贝壳里，

> 在 [1] 中：t = Tweeter()
> 
> 在 [2] 中：t.save()
> 
> 在 [3] 中：f = Tweeter()
> 
> 在 [4] 中：f.save()
> 
> 在 [5] 中：r=Relationship()
> 
> 在[6]中：r.who=t
> 
> 在[7]中：r.whom=f
> 
> 在 [8] 中：r.save()
> 
> 在[18]：Relationship.objects.all()[0].who.id
> Out[18]：1L
> 
> In [19]：Relationship.objects.all()[0].whom.id
> Out[19]：2L

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:15:41.587

编辑：正如评论者所建议的，使用 ManyToManyField 更有意义。用户可以有 0-x 个用户关注者，用户可以关注 0-x 个用户。

[https://docs.djangoproject.com/en/1.3/ref/models/fields/#manytomanyfield](https://docs.djangoproject.com/en/1.3/ref/models/fields/#manytomanyfield)

无需进入代码，无需多说。

# javascript - Javascript - 使用不同的 QueryString 重新加载页面

> ID：10602076
> 
> 赞同：7
> 
> 时间：2012-05-15T13:44:53.983
> 
> 标签：javascript, javascript-events

我想使用在 URL 中传递不同参数的 JavaScript 重新加载页面。

我的页面名称是 test1.aspx，我使用的是：

```
window.location="test1.aspx?user=abc&place=xyz"; 
```

它不工作......！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T13:45:43.640

`window.location`是一个对象。您需要访问其`href`上的属性，如下所示：

```
window.location.href="test1.aspx?user=abc&place=xyz"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:47:31.540

如果您需要发送动态值，那么

```
var user = "abc";
var place = "xyz";

window.location.href = "test1.aspx?user=" + user + "&place=" + place; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T13:09:42.603

```
window.location = "path page?user=" + $("#txtuser").val(); 
```

# c# - 保持 Tab 对 PostBack 的关注

> ID：10602083
> 
> 赞同：0
> 
> 时间：2012-05-15T13:45:13.817
> 
> 标签：c#, asp.net, tabs, html-lists

我有一个带有 4 个选项卡控件的 asp.net 页面，每个选项卡都使用以下 html（更改每个选项卡的 ID 等）：

```
 <ul id="ulTabs">
    <li class="displayItem" id="liSummary" style="display: block"><a ref="#divSummary">
       <span style="font-weight: bold; color: #4b6c9e">Margin Analysis Summary</span>
    </a></li></ul> 
```

我遇到的问题是，在两个选项卡上我有 GridViews 打开一个新的模式/屏幕。然后关闭此模态/屏幕时，页面刷新并且焦点自动返回到第一个选项卡，无论打开模态/屏幕时选择了哪个选项卡。

关于如何将焦点设置到当前选项卡的任何想法？我在不同的链接上尝试了一些解决方案，但到目前为止一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:50:26.977

`HiddenField`当打开的选项卡更改时，将当前打开的选项卡的 ID 存储在 a中。

然后在加载时（刷新后）打开由存储在隐藏字段中的 ID 表示的选项卡。

当我过去使用 jquery 选项卡时，我已经使用 javascript 和 jquery 完成了此操作，并且效果非常好。事实上，如果它有帮助，[这里是使用 jquery 的方法](https://stackoverflow.com/questions/3720796/staying-on-current-jquery-tab-across-post-back/7915342#7915342)。我相信您将能够根据自己的需要对其进行调整（或者如果您在页面后面的代码中完成所有操作，那么它会更容易）。

# oracle - 如何将 Oracle View 迁移到 Teradata

> ID：10602085
> 
> 赞同：1
> 
> 时间：2012-05-15T13:45:15.317
> 
> 标签：oracle, migration, views, etl, teradata

我正在从事 Oracle 到 Teradata 的迁移项目。

这些表已使用数据阶段作业迁移。

如何将 Oracle 视图迁移到 Teradata？

由于两个数据库的 SQL 语句不同，直接脚本复制不起作用

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:33:09.350

`DECODE()`Oracle 函数作为 Oracle UDF 库的一部分在 Teradata Developer Exchange下载[部分](http://downloads.teradata.com/download/extensibility/teradata-udfs-for-popular-oracle-functions)提供。否则，您在示例中使用 DECODE 函数的方式与 ANSI`COALESCE()`函数的行为方式相同：

```
COALESCE(t.satisfaction, 'Not Evaluated') 
```

需要注意的是，`COALESCE()`函数的数据类型必须是隐式兼容的，否则会报错。因此，t.satisfaction 至少需要`CHAR(13)`或`VARCHAR(13)`为了`COALESCE()`评估。如果不是，您可以显式转换操作数。

```
COALESCE(CAST(t.satisfaction AS VARCHAR(13)), 'Not Evaluated') 
```

如果您的使用`DECODE()`包含比示例中更多的评估，我建议实施 UDF 或用更标准的评估`CASE`语句替换它。话虽如此，在 Teradata 14（或 14.1）中，您会发现 Teradata 中缺少的许多 Oracle 功能将作为标准功能提供，以帮助简化从 Oracle 到 Teradata 的迁移路径。

# java - 奇怪的地板四舍五入

> ID：10602087
> 
> 赞同：1
> 
> 时间：2012-05-15T13:45:16.233
> 
> 标签：java, double, rounding

> **可能重复：**
> [将小数位移动到双精度](https://stackoverflow.com/questions/4937402/moving-decimal-places-over-in-a-double)

我在Java中遇到了这个奇怪的问题，我有以下代码：

```
double velocity = -0.07;
System.out.println("raw value  " + velocity*200 );
System.out.println("floored value  " + Math.floor(velocity*200) ); 
```

我有以下输出：

```
raw value  -14.000000000000002
floored value  -15.0 
```

那些 0002 搞砸了一切，顺便说一句，不应该有那个 traling 2，我认为它应该在小数点后全为零，我可以摆脱那个 2 吗？

更新：感谢您的帮助，伙计们，您知道有什么方法可以在 BigDecimal 对象上进行四舍五入而不调用 doubleValue 方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:57:34.157

因为`floor(-14.000000000000002)`确实是`-15`！

你看，`floor`被定义为小于或等于参数的最大整数。由于`-14.000000000000002`不是整数，向下最接近的整数*是* `-15`。

好吧，现在让我们弄清楚为什么`-0.07 * 200`不完全是`-14`. 这是因为浮点数的内部表示在 base 中`2`，因此分母不是 的幂的分数不能`2`以 100% 的精度表示。（就像您不能将 1/3 表示为小数位数有限的小数一样。）因此， 的值`velocity`不完全是`-0.07`. （当编译器看到常量`-0.07`时，它会默默地用一个非常接近`-0.07`但实际上不等于的二进制分数替换它。）这就是为什么`velocity * 200`不完全是`-14`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:51:34.513

来自[浮点指南](http://floating-point-gui.de/basic/)：

> **为什么我的数字，比如 0.1 + 0.2 加起来不是很好的 0.3 轮，而是得到一个奇怪的结果，比如 0.30000000000000004？**
> 
> 因为在内部，计算机使用的格式（二进制浮点）根本无法准确表示 0.1、0.2 或 0.3 之类的数字。
> 
> 当代码被编译或解释时，你的“0.1”已经被四舍五入到该格式中最接近的数字，这会在计算发生之前导致一个小的舍入误差。

如果您需要精确加起来等于特定预期值的数字，则不能使用`double`. 阅读链接到的网站了解详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T13:47:44.233

使用 BigDecimal... 上面的问题是一个众所周知的舍入问题，它与有限内存计算机上使用的表示方案有关。问题是答案在二进制（即基数 2）系统中是重复的（即像 1/3 = 0.33333333... 带十进制）并且无法正确呈现。一个很好的例子是 1/10 = 0.1，即 0.000110011001100110011001100110011... 二进制。在某个点之后，1 和 0 必须结束，从而导致感知错误。

希望你不是在研究对生命至关重要的东西......例如[http://www.ima.umn.edu/~arnold/disasters/patriot.html](http://www.ima.umn.edu/~arnold/disasters/patriot.html)。28人因四舍五入而丧生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T13:49:26.870

Java double 遵循 IEEE 754 浮点算法，它不能以无限的精度表示每一个实数。这个轮回是正常的。您无法在内部表示中摆脱它。您当然可以使用 String.format 来打印结果。

# spring-mvc - 将一个jsp文件夹重定向到另一个jsp文件夹在spring mvc 2.5中不起作用

> ID：10602090
> 
> 赞同：0
> 
> 时间：2012-05-15T13:45:31.087
> 
> 标签：spring-mvc

我有一个关于将页面一个文件夹重定向到另一个 jsp 页面文件夹的问题。我定义`viewResolver`：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"><value>org.springframework.web.servlet.view.JstlView</value></property> 
    <property name="prefix"><value>/jsp/</value></property>
    <property name="suffix"><value>.jsp</value></property>
</bean> 
```

但我的文件夹结构是

```
WEB-ROOT
      |__JSP
              |__user
                      |_userdashboardpage.jsp
     |__loginpage.jsp
     |__web.xml 
```

当使用验证器界面登录用户页面时，我正在尝试验证用户详细信息，例如用户名、密码。但是，如果在输入空白详细信息时发生任何错误，则会发生错误并重定向同一页面，即`loginpage`使用`getFormView`具有bean`prefix`属性的方法。`viewResolver`

但是错误没有显示在同一页面中。容器看`/jsp/loginpage`。但是我的页面有外部`jsp`文件夹。如果我正在删除前缀，那么它会显示错误。

那么如何将页面一个文件夹 jsp 重定向到另一个文件夹 jsp 或 web-root 到`jsp>user>userdashboard.jsp`. 如何在这种情况下显示错误。我可以去链视图解析器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:23:47.647

您的`prefix`属性`InternalResourceViewResolver`不应该比 JSP 层次结构的顶部更深。由于并非所有 JSP 都在 下`/jsp`，因此不能使用它作为前缀。

所以删除该`prefix`属性，并使用适当的视图名称。因此，要使用，您应该从控制器`jsp/user/userdashboardpage.jsp`返回视图名称。`jsp/user/userdashboardpage`要使用`loginpage.jsp`，返回就好`loginpage`。

> 我可以去链视图解析器吗？

`InternalResourceViewResolver`不可以。由于 servlet API 的工作方式，不能链接多个。

# java - 在 iFrame 中添加 GWT 应用程序的问题

> ID：10602099
> 
> 赞同：3
> 
> 时间：2012-05-15T13:45:47.307
> 
> 标签：java, gwt, iframe, gwt2, gwt-2.3

我有一个`GWT`应用程序，我想通过以下方式将其**URL**嵌入到另一个网页中`iFrame`：

```
<iframe src="http://127.0.0.1:8888/myProject.html?gwt.codesvr=127.0.0.1:9997"/> 
```

但是我遇到了错误。

如果我在**[Firefox](http://www.mozilla.org/en-US/firefox/new/)**中浏览它：

`Permission denied to access property 'href'`（来自萤火虫控制台）

如果我用**[chrome](http://www.google.com/chrome)**浏览它：

弹出一个对话框说：`Plugin failed to connect to Development Mode server at 127.0.0.1:9997`

我研究了很多，但一切都是徒劳的。

使用*GWT*的开发模式。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:51:29.013

好的，如果有人因为遇到 [同样的问题而来到这里并想知道发生了什么，](http://xkcd.com/979/) 我将总结一下我们所拥有的。

我不确定，但我认为问题是因为互联网浏览器不允许访问`url`不在主页域中的站点（如果它能够这样做，就会发生非常糟糕的事情），除非你让他们这样做所以。

它被称为跨域访问策略，因此有两种处理方式

1.  最简单的 - gwt 和外部 html 必须具有相同的主机。
2.  让 gwt 插件从外部 html 上下文运行，它在[此处](https://stackoverflow.com/questions/2646544/debug-gwt-inside-facebook-iframe/3283940#3283940)和[此处](http://code.google.com/p/google-web-toolkit/issues/detail?id=4468)进行了描述，但由于某种原因它无法正常工作。我们仍然不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T07:56:43.707

我的解决方法（Ubuntu，GWT 2.5.1）是替换：

```
__gwt_HostedModePlugin -> parent.__gwt_HostedModePlugin
window.top -> window.parent 
```

在托管.html

# python - 表达式在 Windows 上匹配，但在 Mac 上不匹配

> ID：10602102
> 
> 赞同：1
> 
> 时间：2012-05-15T13:46:01.880
> 
> 标签：python, regex, cross-platform, cinema-4d

下面的正则表达式

```
\s*([\w_]*)\s*(,\s*|=\s*(\d*)\s*,)\n 
```

匹配以下行（**附加**换行符）

```
 _FIRST_ELEMENT_      = 10000, 
```

在 Windows 上，但不在 Mac 上。我使用它的环境是使用 CPython 2.6 解释器的 Cinema 4D（3D 软件）的 Python 实现。

有人能够为我做一个快速测试，因为我没有 Mac。但是他没有时间为我做更多的测试。

在两个平台（Win/Mac）上，相同的代码已经在 Cinema 4D 的脚本窗口中进行了测试。

```
import re
enum_match = re.compile('\s*(\w*)\s*(,\s*|=\s*(\d*)\s*,)\n')
line = '  _FIRST_ELEMENT_      = 10000,\n'
match = enum_match.match(line)

if not match:
    print "Regex did not match."
else:
    print match.groups() 
```

Windows 上的输出：

```
('_FIRST_ELEMENT_', '= 10000,', '10000') 
```

Mac 上的输出：

```
Regex did not match. 
```

我唯一能想到的是Mac 上`_`不包含下划线 ( ) 。`\w`

**你知道为什么正则表达式在 Windows 上匹配而在 Mac 上不匹配吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:58:19.360

改用这个：

```
 enum_match = re.compile('\s*(\w*)\s*(,\s*|=\s*(\d*)\s*,)$') 
```

Mac OS X 和 Windows 使用不同的字符来标记文本文件中的行尾；您的文件似乎使用了 Windows 版本。'\n'，我相信，它与运行代码的操作系统使用的字符匹配，这可能不是文件中使用的字符。在正则表达式中使用 '$' 而不是 '\n' 应该可以在任一操作系统下工作（即使这种解释并不完全正确）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:52:42.170

我认为换行符`\n`是问题所在，因为它在所有系统上都不相同。

你可以做一些更一般的事情，比如

```
\s*([\w_]*)\s*(,\s*|=\s*(\d*)\s*,)(?:\r\n?|\n) 
```

这将`\r`与可选的`\n`后续匹配，或者仅匹配`\n`，我认为这将涵盖当今用作换行符序列的所有组合。

# java - 使用 java dom 从 xml 文档中单独解析文本的可能方法

> ID：10602109
> 
> 赞同：0
> 
> 时间：2012-05-15T13:46:14.940
> 
> 标签：java

我需要从 xml 文件中单独接收所有文本，以接收我使用此代码的特定标签。但我不确定如何解析 XML 中的所有文本，因为 XML 文件不同，我不知道它们的根节点和子节点，但我只需要 xml 中的文本。

```
try {

        DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                .newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(streamLimiter.getFile());
        doc.getDocumentElement().normalize();

        System.out.println("Root element :"
                + doc.getDocumentElement().getNodeName());
        NodeList nList = doc.getElementsByTagName("employee");
        System.out.println("-----------------------");

        for (int temp = 0; temp < nList.getLength(); temp++) {

            Node nNode = nList.item(temp);
            if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                Element eElement = (Element) nNode;

                NodeList nlList = eElement.getElementsByTagName("firstname")
                        .item(0).getChildNodes();

                Node nValue = (Node) nlList.item(0);

                System.out.println("First Name : "
                        + nValue.getNodeValue());

            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:13:29.110

在这篇文章中引用[jsight 的](https://stackoverflow.com/users/1432/jsight)回复：[Getting XML Node text value with Java DOM](https://stackoverflow.com/questions/773012/getting-xml-node-text-value-with-java-dom)

```
import java.io.ByteArrayInputStream;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

class Test {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws Exception {
    String xml = "<add job=\"351\">\n"
        + "    <tag>foobar</tag>\n"
        + "    <tag>foobar2</tag>\n"
        + "</add>";
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    ByteArrayInputStream bis = new ByteArrayInputStream(xml.getBytes());
    org.w3c.dom.Document doc = db.parse(bis);
    Node n = doc.getFirstChild();
    NodeList nl = n.getChildNodes();
    Node an, an2;

    for (int i = 0; i < nl.getLength(); i++) {
        an = nl.item(i);
        if (an.getNodeType() == Node.ELEMENT_NODE) {
        NodeList nl2 = an.getChildNodes();

        for (int i2 = 0; i2 < nl2.getLength(); i2++) {
            an2 = nl2.item(i2);
            // DEBUG PRINTS
            System.out.println(an2.getNodeName() + ": type (" + an2.getNodeType() + "):");
            if (an2.hasChildNodes()) {
            System.out.println(an2.getFirstChild().getTextContent());
            }
            if (an2.hasChildNodes()) {
            System.out.println(an2.getFirstChild().getNodeValue());
            }
            System.out.println(an2.getTextContent());
            System.out.println(an2.getNodeValue());
        }

        }
    }
    }
} 
```

输出：

```
#text: type (3):
foobar
foobar
#text: type (3):
foobar2 
```

根据您的问题调整此代码，它应该可以工作。

# php - How to parse nested JSON arrays in Objective C

> ID：10602111
> 
> 赞同：1
> 
> 时间：2012-05-15T13:46:22.157
> 
> 标签：php, objective-c, arrays, json, parsing

I have [this](http://pastebin.com/q3WuveXD) JSON tree and I need to group the arrays by category key. (In this example,: "","1","2","3" and "serf" are value names for categories.) I'm serializing JSON using NSJSONSerialization but can't parse it the way I want to. Here is some of my code:

```
NSData *data2=[NSData dataWithContentsOfURL:url2];
result2=[NSJSONSerialization JSONObjectWithData: data2
                                        options: NSJSONReadingMutableContainers
                                          error: nil];
NSLog(@"button data: %@", result2);
for (NSDictionary *strh in [result2 objectForKey:@"template"]) {
    //the json struct above is called result2 here
    //now i need to parse any category with their names..           
} 
```

**Related:** [Here](https://stackoverflow.com/questions/10580300/how-to-send-array-of-array-using-json) is my question about how to create multidimentional arrays with key-value matching in PHP.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:45:50.310

Looking at the output, you have a dictionary with a key called `template` and a key called `version`. the object for the key `template` is itself a dictionary containing keys for your categories. The following code:

```
id foo = [[result2 objectForKey: @"template"] objectForKey: @""]; 
```

will set `foo` to an array containing the items with id's 52, 19, 2, 22.

Categories 1, 2 ,3 are more tricky because it's not obvious whether the keys are numbers or strings. They are probably strings, since keys in JSON have to be strings, so

```
id bar = [[result2 objectForKey: @"template"] objectForKey: @"1"]; 
```

will set `bar` to an array containing the items with id's 28, 1, 25.

# apache - mod_rewrite 删除所有域的 www

> ID：10602113
> 
> 赞同：1
> 
> 时间：2012-05-15T13:46:27.870
> 
> 标签：apache, mod-rewrite, multiple-domains, no-www

我有多个域都指向同一个网站，根据您进入网站的域，将确定将选择哪些类别。

为此，我必须将任何 Mod_Rewrite 代码放在我的 apache2/sites-available/primarydomain 文件中。

该网站有可能托管数百个域，因此我需要一个系统，我不必为每个域的可能性编写排除规则。

我在网上看到了这个建议

```
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC] 
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

但这对我不起作用。

有没有任何正则表达式大师知道这是否可以实现？

继承人希望:-)

# java - 如果一个字符串没有绘制在另一个字符串上，如何检查Java？

> ID：10602118
> 
> 赞同：0
> 
> 时间：2012-05-15T13:46:41.227
> 
> 标签：java, drawstring

我在 JPanel 上绘制了一些字符串，但我不想将这些字符串相互绘制。

如何检查面板上的某个点是否有字符串？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:51:16.373

您需要跟踪所有字符串及其位置，然后用于`java.awt.FontMetrics`计算字符串的边界框。然后你所要做的就是检查边界框是否有交集。

# c# - 控制 SQL 数据库中的重复项

> ID：10602120
> 
> 赞同：0
> 
> 时间：2012-05-15T13:46:42.973
> 
> 标签：c#, sql

我创建了一个用于控制和记录非接触式卡片的应用程序。当卡片压在读卡器上时，我的应用程序会记录卡片的序列号（如果读取了序列号，则说明卡片工作正常）并将其存储到本地 SQL 数据库中。

所有这一切都很好，只有一个我无法解决的错误。我将序列号列标记为主键，这样如果读取同一张卡，就会抛出异常，表明该特定卡已被记录。

不断发生的奇怪事情是，这个异常恰好被抛出 6 次（每次），然后它停止出现，重复的卡片被记录为正常的卡片。造成这种情况的原因是什么，是否有其他方法可以控制输入并警告用户重复。

我在 VS 2010 和 SQL Server 2005 中使用 C# 创建我的应用程序，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:02:41.683

我会建议你另一种方法

让插入中断来检查重复项并不是一个好主意。

只需在使用 select 插入之前检查重复项，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:20:42.347

根据 Jesters 的建议，我建议您创建一个存储过程，首先检查数据是否存在，如果存在则返回 BIT 0，如果不存在则插入数据并返回 BIT 1。

然后在您的代码隐藏中，您可以调用它并检查结果，真值表示数据已插入，假值表示已存在。

这使您的应用程序免于引发异常等，并且通常使程序结构更加稳固，因为您首先不允许错误发生。

如果您的表已正确索引，则在尝试插入之前检查数据是否存在不应影响性能。

# actionscript-3 - as3 for 循环“楼梯”

> ID：10602122
> 
> 赞同：0
> 
> 时间：2012-05-15T13:46:50.430
> 
> 标签：actionscript-3, for-loop

我有一个非常简单的问题。我试图通过循环并将各个部分放在舞台上来制作一组上升的楼梯。

```
for(i= 0; i<20 ;i++){
  var platform:Platform=new Platform("floor" +i,{width:20,height:20,x:20*i,y:i*20});
  trace("added")
  add(platform);
} 
```

这会创建上述“楼梯”模式，但有人能以递减的方式告诉我我做错了什么吗？我确定这很简单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:00:51.843

你想要的可以通过随着 x 位置的增加而减少 y 位置来实现。例如`i * 20`，您可以将其设置为 ，而不是将 y 设置为`400 - i * 20`。

# encoding - XOR、MD5 和 Base64 编码问题

> ID：10602125
> 
> 赞同：1
> 
> 时间：2012-05-15T13:47:00.833
> 
> 标签：encoding, base64, md5, xor

我需要获取前 16 个字符是**TZxy2o2h2I2NMVR+**的值，我有一个公式。公式是这样的：`Base64(XOR("KonstantaZaLDAP", MD5(521009)) + XOR(521009, "KonstantaZaLDAP"))`或者一句话：

我有两个价值观：

1.  `int radID = 521009`
2.  `String konst = "KonstantaZaLDAP"`

第一步是对konst和konst的MD5哈希值进行异或运算>>`XOR(kost, MD5(radID))`

其次，我需要对 radID 和 konst >> 应用 XOR 操作`XOR(radID, konst)`。

之后，我应该连接第一步和第二步中的值 >>`XOR(kost, MD5(radID)) + XOR(radID, konst)`并最终 Base64 编码连接的值。那就是`Base64(XOR(konst, MD5(radID)) + XOR(radID, konst))`。

我试图达到想要的价值，无论我做什么，前 13 个字符都是正确的，然后就全错了。我得到的值是**TZxy2o2h2l2NMfUfpPmJNA==**

谁能帮忙！？

# sql - SQL - 返回两个时段之间的不同小时数

> ID：10602127
> 
> 赞同：0
> 
> 时间：2012-05-15T13:47:07.403
> 
> 标签：sql, sql-server-2008, date, distinct

我有以下一段 SQL，它返回两个日期之间的所有不同日期。

```
SELECT DISTINCT convert(char(10), date, 120) as StartDate from table1 WHERE  
id = @id and date > @StartDate 
```

但是我需要返回两个日期之间的不同日期和时间。

IE

> 2011-12-18 13:00:00.000
> 
> 2011-12-18 14:00:00.000
> 
> 2011-12-18 17:00:00.000
> 
> 2011-12-19 10:00:00.000
> 
> 2011-12-19 12:00:00.000
> 
> 2011-12-19 13:00:00.000

希望有人可以协助更改查询以执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:56:54.197

```
SELECT DISTINCT DATEADD(HH,DATEDIFF(HH,0,DATE),0) as StartDate 
from table1 
WHERE   id = @id and date > @StartDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:03:45.157

```
declare @myDates table(d datetime);
INSERT INTO @myDates VALUES('2011-12-18 13:00:00.000')
, ('2011-12-18 14:00:00.000')
, ('2011-12-18 17:00:00.000')
, ('2011-12-19 10:00:00.000')
, ('2011-12-19 12:00:00.000')
, ('2011-12-19 13:00:00.000');

; WITH a AS (
    SELECT d, r=ROW_NUMBER()OVER(ORDER BY d)
    FROM @myDates
)
SELECT StartDate=CONVERT(VARCHAR(10),a1.d,120)
, EndDate=CONVERT(VARCHAR(10),a2.d,120)
, HoursDiff=DATEDIFF(hh,a1.d,a2.d)
FROM a a1
INNER JOIN a a2 
  ON a2.r=a1.r+1 
  AND CONVERT(VARCHAR(10),a1.d,120)<>CONVERT(VARCHAR(10),a2.d,120); 
```

结果：

```
StartDate  EndDate    HoursDiff
---------- ---------- -----------
2011-12-18 2011-12-19 17 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:58:45.693

我会做以下事情：

```
SELECT DISTINCT left(convert(varchar, date, 120), 13) as starthour
from table
WHERE   id = @id and date > @StartDate 
```

您还可以使用 SQL Server 中的 datepart() 函数得出类似的结果。在其他数据库中，最好使用 extract(from)。

# c# - 禁用取消选择项目的功能

> ID：10602128
> 
> 赞同：2
> 
> 时间：2012-05-15T13:47:10.847
> 
> 标签：c#, listview, windows-8, windows-runtime, winrt-xaml

有没有办法禁用在 ListView 中删除项目的功能？我有一个 SplitPage，当我取消选择左侧 ListView 中的选定项目时，右侧的内容会因为丢失数据绑定而消失。我不要那个。我尝试将 ListView selectedItem 设置回最后一个选择但快照模式下的后退按钮不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:04:37.327

您可以将选择模式设置为无并将您的 ItemTemplate 设置为重新设置样式的 ToggleButton。然后，您可以将每个按钮的 Enabled 属性绑定到项目视图模型，并分别控制每个按钮的启用情况。

# sql - 在 SQL 中使用自定义函数访问 VBA

> ID：10602129
> 
> 赞同：2
> 
> 时间：2012-05-15T13:47:11.470
> 
> 标签：sql, ms-access, vba

我需要使用基于表单控制值在我的 vba 中构建的一些 sql 打开查询或记录集或其他内容（数据表视图）。我的数据中有“多对多”关系（有点）。假设我们有一个 Person 表、一个 Pet 表和一个 ID Pet_Person 表。我想在一行返回的数据中列出我的 People 及其所有宠物的串联字符串。所以....

```
Row    Person       Pets
1      Kim          Lucius, Frodo, Cricket, Nemo
2      Bob          Taco 
```

我搜索了一下，发现您可以在 VBA 中编写函数以从 SQL 中调用。所以。这就是问题所在。我有很多记录，一旦打开，我无法在数据表视图/查询/任何内容中移动，而每次单击一行时都会调用该连接函数。我只需要在最初运行 sql 时调用它一次……比如快照或其他东西。

我不太熟悉 Access 和可能性。我已经尝试了一些我在网上找到的东西，它们都具有相同的结果......当我接触到结果数据集时，就会调用连接函数。

我尝试的最后一件事看起来像：

```
With db
        Set qdf = .CreateQueryDef("Search Results", q)
        DoCmd.OpenQuery "Search Results", , acReadOnly
        .QueryDefs.Delete "Search Results"
End With 
```

StackOverflow 真的从来没有正确格式化我的东西。可能是用户错误....哦，好吧。

编辑：

**哦，Bart S。** 谢谢你，但你离开得太早了，我无法理解答案是否存在。谢谢你。

**哦，雷姆。** 是的，我看到了你的帖子。我用了你的帖子。我在做这个项目时使用了你的许多帖子。为什么访问不支持我习惯于使用 MySQL 的所有 SQL 函数，我不知道。你是这个网站的一个很好的补充。我应该把它和我的问题联系起来，但咖啡还没有开始。

我有我的连接函数，我在 sql 中调用它。我正在使用 docmd 打开它以打开该记录集或查询或其他任何内容。但这是我的问题（我可能是通过一次尝试太多解决方案自己创建的，或者我可能会忽略某些东西）......**每次我触摸生成的数据集/查询/事物时，它都会一直调用该函数**并且有太多的数据无法发生；我看沙漏太多了。我很肯定这是因为我打开它的方式。这旨在成为搜索表单屏幕事物的结果。我想我需要在访问中创建另一个表单并用我生成的记录集填充它。我想这就是你们告诉我的。我不知道。这是一个奇怪的例子。但是......你知道使用Excel，当你编写某种内联函数来为每一行获取一些值时......然后你对值进行特殊的复制和粘贴（而不是函数）......我需要那个。因为这个函数（显然不是在 Excel 中）必须查询并且每次单击一行时重新应用都需要很长时间（我认为如果单击一行，它实际上是在重新查询每一行，几乎就像它一样' s 重新运行 sql 什么的）。就像 NIN/Depeche Mode 的歌曲 Dead Souls... 它一直在呼唤我/它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:52:37.227

我总是这样做：

```
Dim strSql As String

strSql = "SELECT * FROM table WHERE field=something;"
Set rs = CurrentDb.OpenRecordSet(strSql) 
```

然后使用 RS 执行操作。可能有更好的方法。例如，您可以直接在 Access 中创建查询并从 VBA 中调用它。

在循环记录集时，您可以连接字符串：

```
Dim strResult As String
While (Not rs.EOF)
  strResult = strResult & rs!yourfield
WEnd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T03:34:35.770

以下是一些应对不断重新加载数据问题的想法和策略：

1.  确保您的查询设置为`snapshot`. 表格也一样。
    这当然会使数据成为只读的，但它可能会有所帮助。

2.  将查询结果缓存到本地表中，然后显示/绑定该表而不是查询本身。
    这将使用户在执行查询并保存到本地表时最初等待更长的时间，但由于所有数据都是本地的，不需要重新计算，因此之后界面会更加流畅。

    *   创建一个本地表`localPetResult`（在客户端），其中包含与查询匹配的所有字段。

    *   与其将查询本身绑定到数据表表单，不如将其绑定`localPetResult`到它，然后在表单的 VBA 模块中处理 OnLoad 事件：

        ```
        Private Sub Form_Load()
            ' Remove all previous data from the local cache table '
            CurrentDb().Execute "DELETE FROM localPetResult"

            ' Define the original query '
            Dim q as String
            q = q & "SELECT Row, "
            q = q & "       Person, "
            q = q & "       Coalesce(""SELECT PetName FROM Pets WHERE Person='"" & [Person] & ""',"","") AS PetNames "
            q = q & "FROM MyData"

            ' Wrap the query to insert its results into the local table '
            q = "INSERT INTO localPetResult " & q

            ' Execute the query to cache the data '
            CurrentDb().Execute q
        End Sub 
        ```

        一个你有它的工作，你可以通过多种方式改进它以使其更好（冻结屏幕并显示沙漏，在计算数据后将 ersult 表动态绑定到表单等）

3.  缓存每次调用合并函数的结果。
    我用它来计算每条记录的连接一次，然后将结果存储在字典中，字典的键是记录的 ID。相同 ID 的后续计算只是从字典中提取，而不是重新计算。

    例如，将以下内容添加到 VBA 模块。我假设您也使用[Remou 的 Coalesce 功能](https://stackoverflow.com/questions/92698/combine-rows-in-access-2007/93863#93863)。

    ```
     Option Compare Database
        Option Explicit

        ' A Scripting.Dictionary object we'll use for caching '
        Private dicCache As Object

        ' Call to initialise/reset the cache before/after using it '
        Public Sub ResetCoalesceCache()
            If Not (dicCache Is Nothing) Then
                dicCache.RemoveAll
            End If
        End Sub

        ' Does the Same as Coalesce() from Remou, but attempts to '
        ' cache the result for faster retrieval later '
        Public Function Coalesce2(key As Variant, _
                                  sql As String, _
                                  sep As String, _
                                  ParamArray NameList() As Variant) As Variant

            ' Create the cache if it hasn't been initialised before '
            If dicCache Is Nothing Then
                Set dicCache = CreateObject("Scripting.Dictionary")
            End If

            If IsNull(key) Then
                 ' The key is invalid, just run the normal coalesce '                                       
                 Coalesce2 = Coalesce(sql, sep, NameList)
            ElseIf dicCache.Exists(key) Then
                ' Hurray, the key exists in the cache! '
                Coalesce2 = dicCache(key)
            Else
                ' We need to calculate and then cache the data '
                Coalesce2 = Coalesce(sql, sep, NameList)
                dicCache.Add(key, Coalesce2)
            End If

        End Function 
    ```

    然后，在查询中使用它：

    ```
     ' first clear the cache to make sure it doesn't contain old '
        ' data that could be returned by mistake '
        ResetCoalesceCache

        ' Define the original query '
        Dim q as String
        q = q & "SELECT Row, "
        q = q & "       Person, "
        q = q & "       Coalesce2([Row], ""SELECT PetName FROM Pets WHERE Person='"" & [Person] & ""',"","") AS PetNames "
        q = q & "FROM MyData"

        ' Bind to your form or whatever '
        ... 
    ```

# localization - App Store - 具有许多资产的应用程序的“每种语言”版本

> ID：10602131
> 
> 赞同：0
> 
> 时间：2012-05-15T13:47:20.463
> 
> 标签：localization, app-store

我们即将发布一款具有多种语言本地化功能的应用程序。关键是本地化不仅针对 UI，还针对应用程序的许多资产（离线视频和图像，每种语言大约 200MB）。

该应用程序有 50 个关卡，我们希望免费发布该应用程序，其中包含 3 节课程，因此用户在决定购买其余关卡之前无需下载资产。

显然，我们不希望将应用程序发送到 20MB 以上，并通过 3 节课将其发送到 500MB。特定语言是一个重要问题，因为这是一个语言学习应用程序，所以我们不希望它成为用户必须处理的东西，他需要一种语言，仅此而已。

我们可以为每种语言上传特定语言的版本，否则会被视为向应用商店发送垃圾邮件？

谢谢沙妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:06:53.183

是的，你可以做到这一点，而且很多公司都这样做。例如，在 App Store 中搜索“Gengo Wordpower”，您会发现一家公司的许多应用程序只是具有不同的词汇文件。

# c# - 应用程序不会因未处理的异常而死？

> ID：10602132
> 
> 赞同：4
> 
> 时间：2012-05-15T13:47:22.110
> 
> 标签：c#, .net, winforms

如果我的应用程序以我无法处理的异常结束，我希望它向用户显示错误消息并退出。问题是向用户显示了一个异常对话框，其中包含详细信息、继续和退出选项，如果用户单击继续，则应用程序会在我不想要的“某些”状态下保持活动状态。

为了用最少的代码复制它，我刚刚创建了一个 Windows 窗体应用程序，添加了一个按钮，然后为按钮单击代码编写了：

```
throw new ApplicationException("I must crash now!!!"); 
```

当从 Debug 文件夹、Release 文件夹启动编译的 exe 或从复制到其他地方的 Release 文件夹启动 exe 时（以防 pdb 文件导致问题）并单击按钮，我会看到详细信息 / 继续 /退出对话框，如果我说继续，应用程序将保持活动状态。如何防止出现继续选项？

我的计算机（Vista、Visual Studio 2008、Visual Studio 2010，使用 VS2010 创建测试应用程序）以及用户计算机（Windows 7）上都有这种行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:03:55.407

捕获异常并显示您想要避免的对话框的是 Windows 窗体。您可以使用[Application.SetUnhandledExceptionMode](http://msdn.microsoft.com/en-us/library/ms157905.aspx)方法将 Windows 窗体配置为不执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:50:51.007

您需要为事件编写一个事件处理程序`AppDomain.UnhandledException`，在其中向用户显示更好的错误消息。

[http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

但请记住，异常可能意味着系统处于未定义状态，因此即使您的错误对话框也可能无法显示……您需要能够正常崩溃。

在您的应用程序的起点：

```
static void Main() {
    AppDomain currentDomain = AppDomain.CurrentDomain;
    currentDomain.UnhandledException += errorHandler;
    // Then start your app!
}

static void errorHandler(object sender, UnhandledExceptionEventArgs args) {
    // Show the user some error, but be prepared for disaster...
    // Examine the args.ExceptionObject (which is an Exception)
} 
```

# facebook - 如何跟踪 twitter 关注我们和 facebook 喜欢我们？

> ID：10602133
> 
> 赞同：0
> 
> 时间：2012-05-15T13:47:23.873
> 
> 标签：facebook, twitter, facebook-like, twitter-follow

是否可以跟踪喜欢我们或在网站上关注我们的用户。我还想跟踪是否有人不关注或不喜欢我们。如果有api或任何技巧可以做到这一点？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:39:33.807

查看 edge.create 事件 - 在此处查看更多信息：[https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

> edge.create - 当用户喜欢某物时触发（fb:like）。
> 
> edge.remove - 当用户不喜欢某物时触发（fb:like）。

关于捕获 twitter 事件 - 请参见此处：[https ://dev.twitter.com/docs/intents/events](https://dev.twitter.com/docs/intents/events)

*   包括 widgets.js

> ```
> <script type="text/javascript" charset="utf-8">
>   window.twttr = (function (d,s,id) {
>     var t, js, fjs = d.getElementsByTagName(s)[0];
>     if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
>     js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
>     return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
>   }(document, "script", "twitter-wjs"));
> </script> 
> ```

*   当用户单击 Tweet 按钮时绑定到事件：

> ```
> twttr.events.bind('click', function(event) {
>     var click_type = event.region;
> }); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:25:44.443

avs099 是正确的，该链接将提供一些很好的信息。但我想我会发布一些进一步的信息来帮助其他人，因为他们找到了这个链接。

我使用该`FB.init()`函数调用一个设置函数，该函数为`edge.create`and创建回调函数`edge.remove`。

```
FB.Event.subscribe('edge.create',
function(response) {
    alert('You liked the URL: ' + response);
    //ajax back to the server.
    var xmlhttp;
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("POST", "YourCapturePage.php", true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send(response + "&add=1");
}); 
```

然后，YourCapturePage.php 或任何处理页面可以解析响应并将记录添加到您的数据库后端，以跟踪给定页面上您喜欢按钮的使用情况。响应包含有关喜欢哪个页面的信息。然后你可以为`edge.remove`.

# jquery - 当列为空和“”值时，jqGrid 对 JS 中的一列求和

> ID：10602135
> 
> 赞同：3
> 
> 时间：2012-05-15T13:47:27.573
> 
> 标签：jquery, jqgrid, sum

[我在这篇文章](https://stackoverflow.com/questions/5121350/jqgrid-access-cell-data-while-it-is-being-edited)中找到了一种在 javascript 中对 jqGrid 列求和的好方法，如下所示：

```
var total = $('#grid_id').jqGrid('getCol','col_name',false,'sum'); 
```

这很好，但我遇到的问题是我想要求和的列有时有空格而不是数字，并且`total`上面示例中的变量返回`NaN`.

有谁知道如何调整这个功能，使空白就像一个零？

谢谢！

** 更新 **

正如 Oleg 在评论中指出的那样，您需要在 colModel 中使用格式化程序。一旦我把它`formatter: 'number'`放在我的 colModel 中，所有的空格都被填充为零，它就可以工作了！请参阅示例代码：

```
$("#grid_id").jqGrid({
    url:'ajax_script.php?sql=' + sql1,
    height: 275,
    shrinkToFit: true,
    width: 800,
    datatype: 'xml',
    mtype: 'POST',
    colNames:["Customer","Job", "Sched QNTY Sell","Sched Total Sell"],
    colModel:[
        {name:"Customer",index:"Customer",width:"16"},
        {name:"JobNum",index:"JobNum",width:"16"},
        {name:"Sched Qnty Sell",index:"Sched Qnty Sell",width:"20", formatter: 'number'},
        {name:"Sched Total Sell",index:"Sched Total Sell",width:"20", formatter: 'number'}
    ],
    rowNum:10000,
    sortname: 'Customer',
    sortorder: 'asc',
    viewrecords: true,
    gridview: true,
    caption: 'Scheduled to Bill',
    footerrow : true,
    altRows : true,
    gridComplete: function(){
        $(this).jqGrid('footerData','set',{'Customer':'TOTALS:'});
        var colnames = $(this).jqGrid('getGridParam','colModel');
        for (var i = 2; i < colnames.length; i ++){
            var tot = $(this).jqGrid('getCol',colnames[i]['name'],false,'sum');
            var ob = [];
            ob[colnames[i]['name']] = tot;
            $(this).jqGrid('footerData','set',ob);
        }
    }
}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T09:50:37.083

如果您不想在空列上显示这些零，可以使用**unformat选项：**

```
{ name:"Column Name", index:"Column Index", width:"20", unformat: unformatNullColumn, formatter: 'number' }

function unformatNullColumn(cellvalue, options) {
    return (parseFloat(cellvalue) || 0);
} 
```

在这个[答案](https://stackoverflow.com/a/9128370/612847)中解释得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:42:38.917

jqGrid 首先使用 unformatter（如果您为列定义格式化程序）或仅获取`innerHTML`并解码 HTML（字符“<”可以以“<”形式编码）从列的单元格中获取数据。然后使用 jqGrid`parseFloat`将数据转换为数字。最后将汇总数字。

我认为最好的方法是在填充网格之前修剪数据。如果您不能在服务器端执行此操作，则可以使用`beforeProcessing`回调。

# jquery - maskedinput 不适用于百分比

> ID：10602136
> 
> 赞同：0
> 
> 时间：2012-05-15T13:47:29.113
> 
> 标签：jquery

我在输入上使用 maskinput.js。当我在值后面加上百分号时，加载页面时，什么都没有显示。如果没有百分号，则显示。谁能让我知道发生了什么以及如何解决它？谢谢

[http://jsfiddle.net/C4CeR/1/](http://jsfiddle.net/C4CeR/1/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
<title>Mask</title> 

<script src="http://code.jquery.com/jquery-latest.js"></script> 
<script src="http://yii-framework-tutorial.googlecode.com/svn-history/r3/assets/fb2a00e4/jquery.maskedinput.js" type="text/javascript"></script>

<script> 
 $(function(){$(".percent").mask("99%");});
 $(function(){$(".number").mask("99");});
</script>

</head>

<body>
 <input type="text" name="margin" class="percent" value="12" />
 <input type="text" name="number" class="number" value="12" />
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:49:19.070

从我在这里看到的情况来看，它似乎`mask`需要一个数字，并且不会将百分比识别为数字。

**解决方案：**不要在你的数字后面加上百分号。如果该数字以某种方式生成为百分比，则用类似的东西去掉百分号`myNumber = myNumber.split("%")[0]`。

# c# - 在不使用太多内存的情况下将文件上传到 SQL Server

> ID：10602140
> 
> 赞同：0
> 
> 时间：2012-05-15T13:47:44.827
> 
> 标签：c#, .net, sql-server, file-io

我正在使用 SQL Server 2008 和`FileStream`数据类型在数据库中保存大文件。

到目前为止一切正常，但问题是我的上传方法如下所示：

```
public static void UploadFileToDatabase(string location)
{
   FileStream fs = new FileStream(location, FileMode.Open, FileAccess.Read);

   byte[] data = new byte[fs.Length];

   fs.Read(data, 0, System.Convert.ToInt32(fs.Length));
   fs.Close();

   SaveToDatabaseMethod(data)

   data = null;
} 
```

显然我将文件保存在内存中，然后将它们上传到服务器，我认为这是一个非常糟糕的做法，所以无论如何我至少可以限制所需的内存量吗？

就我而言，最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:48:56.470

Filestream 有一个 WriteByte 方法

[写字节](http://msdn.microsoft.com/en-us/library/system.io.filestream.writebyte.aspx)

[请参阅插入数据示例](http://msdn.microsoft.com/en-us/library/cc716724.aspx)

不确定这是最佳实践，因为它会降低内存但会增加步骤。需要测试一下。如果整个文件未加载，则需要逻辑将其退出。

# asp.net - 文本输入以在屏幕键盘上显示大写

> ID：10602146
> 
> 赞同：3
> 
> 时间：2012-05-15T13:48:12.100
> 
> 标签：asp.net, .net, html, css, html-input

该网站正在安卓平板电脑上使用。我在输入的 css 类中包含以下内容：

```
text-transform: uppercase; 
```

这样做的作用是输入的字母在输入中显示为大写。但这不会导致屏幕键盘出现大写字母。即使在输入中键入大写字母，键盘字母也会显示为小写字母。所以问题不在于功能太多，因为输入时文本是大写的。它更多的是为了一致性，并为使用小写键盘输入大写字母的用户创造一种无缝的感觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:39:42.617

我想知道是否`pattern="[A-Z]*"`会这样做，因为根据[https://stackoverflow.com/a/1677517/51685](https://stackoverflow.com/a/1677517/51685) `pattern="[0-9]*"`在 iOS 上触发仅数字模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:33:10.767

我想你会发现这是不能在 CSS 中设置的东西，而是必须使用 SDK 在专用应用程序中设置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T14:37:23.320

我不确定Android，但在网页上，您可以使用 .onblur() javascript 使它们成为 JavaScript。因此，当字段焦点退出时，它将执行

# oracle - 如何为 oracle 数据库视图创建注释

> ID：10602148
> 
> 赞同：7
> 
> 时间：2012-05-15T13:48:22.957
> 
> 标签：oracle, views, code-documentation

我真的很想为视图创建一个评论，并简要说明其用途。不幸的是，无法在 oracle 中为视图创建评论。此功能仅适用于可用的表、列和物化视图。我想知道您如何描述您的数据库视图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T14:02:59.780

尝试：

```
comment on table <name> is 'text'; 
```

该命令适用于视图。例如：

```
CREATE OR REPLACE VIEW MY_VW AS
  SELECT 1 FROM DUAL;

COMMENT ON TABLE MY_VW IS 'Clever comment.'; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T14:06:16.227

也可以在 VIEWs 上创建评论：

```
COMMENT ON TABLE view_name ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-22T06:47:06.473

只需使用：

```
Comment on table 'view Name' is  ' Comment ...'; 
```

如果使用视图代替 SQL，Oracle 会为 COMMENT 命令抛出错误“无效对象类别”。

物化视图：我们可以简单地评论使用：

```
Command on Materialized view "View name" is  'Comment ...'; 
```

# iphone - NSLocalizedDescription=Could not authenticate with OAuth.. 使用 twitvid 目标 c 库时出错

> ID：10602151
> 
> 赞同：2
> 
> 时间：2012-05-15T13:48:25.213
> 
> 标签：iphone, objective-c, video, twitter

我正在使用下面的代码通过 twitvid 网站上传图片。但我收到错误

代码初始化。

```
- (void)awakeFromNib
{
    [super awakeFromNib];
    self.tv = [TwitVid twitVidWithSource:TwitVid_APP_ID
                                delegate:self];
} 
```

这是上传图片的代码。

```
- (NSString *)authenticationHeaderForKey:(NSString *)key secret:(NSString *)secret URL:(NSString *)URL
{
    OAConsumer *consumer =  [[OAConsumer alloc] initWithKey:OAUTH_CONSUMER_KEY
                                                     secret:OAUTH_CONSUMER_SECRET];

    OAToken *token =  [[OAToken alloc] initWithKey:key
                                            secret:secret];

    OAMutableURLRequest *theRequest = [[OAMutableURLRequest alloc] initWithURL:[NSURL URLWithString:URL]
                                                                       consumer:consumer
                                                                         token:token
                                                                         realm:nil
                                                             signatureProvider:nil];
    [consumer release];
    [token release];
    [theRequest prepare];
    [theRequest autorelease];
    return [theRequest valueForHTTPHeaderField:@"Authorization"];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *authHeader = [self authenticationHeaderForKey:OAUTH_TOKEN_KEY
                                                     secret:OAUTH_TOKEN_SECRET
                                                        URL:SERVICE_PROVIDER];

    self.alertView = [[[UIAlertView alloc] initWithTitle:@"Uploading"
                                                 message:@"\n \n"
                                                delegate:self
                                       cancelButtonTitle:@"Cancel"
                                       otherButtonTitles:nil] autorelease];

    if ([[info valueForKey:UIImagePickerControllerMediaType] isEqualToString:(id)kUTTypeMovie]) {
        //Video
        self.alertView.title = @"Uploading Video";
        NSString *mediaPath = [[info valueForKey:UIImagePickerControllerMediaURL] path];
        self.uploadRequest = [tv uploadWithMediaFileAtPath:mediaPath
                                                    offset:0
                                                   message:@"Your message"
                                                   mediaID:nil
                                                playlistID:nil
                                         vidResponseParent:nil
                                                  userTags:nil
                                               geoLatitude:nil
                                              geoLongitude:nil
                                                      tags:nil
                                                categoryID:nil
                                               description:nil
                                                     title:nil
                           xVerifyCredentialsAuthorization:authHeader
                                      xAuthServiceProvider:SERVICE_PROVIDER];
    }
    else {
        //Picture
        self.alertView.title = @"Uploading Picture";
        UIImage *editedImage = [info valueForKey:UIImagePickerControllerEditedImage];
        NSString *imagePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"image.jpg"];
        [[NSFileManager defaultManager] removeItemAtPath:imagePath error:nil];
        [[NSFileManager defaultManager] createFileAtPath:imagePath
                                                contents:UIImageJPEGRepresentation(editedImage, 0.8)
                                              attributes:nil];

        self.uploadRequest = [tv uploadPicWithMediaFileAtPath:imagePath
                                                      message:@"Your message"
                                                      mediaID:nil
                                                     userTags:nil
                                                  geoLatitude:nil
                                                 geoLongitude:nil
                                                         tags:nil
                                                   categoryID:nil
                                                  description:@"Image description"
                                                        title:@"Image title"
                              xVerifyCredentialsAuthorization:authHeader
                                         xAuthServiceProvider:SERVICE_PROVIDER];
    }

    [self.alertView show];

    [self dismissModalViewControllerAnimated:YES];
} 
```

这是 twitvid 网站提供的确切代码。我只更改我的应用程序名称键。

现在它显示如下错误

```
'uploadPic' REQUEST '1i1gc0hr' DID FAIL WITH ERROR: Error Domain=TVErrorBackendDomain Code=1001 "Could not authenticate with OAuth." UserInfo=0x18ca10 {NSLocalizedDescription=Could not authenticate with OAuth.} 
```

现在我很困惑，用户没有登录。这是如何工作的？

请帮我在 twitvid 上上传图片或视频。

我正在使用这个库：[http ://twitvid.pbworks.com/w/file/fetch/44841746/TwitVidSDK-iOS.zip](http://twitvid.pbworks.com/w/file/fetch/44841746/TwitVidSDK-iOS.zip)

提前致谢。

希瓦姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:52:03.950

你已经发布了请求，要么在类级别，即属性，要么试试这个

```
OAMutableURLRequest *theRequest = [[[OAMutableURLRequest alloc] initWithURL:[NSURL URLWithString:URL]
                                                                       consumer:consumer
                                                                         token:token
                                                                         realm:nil
                                                             signatureProvider:nil] autorlease];

    return [theRequest valueForHTTPHeaderField:@"Authorization"]; 
```

# java - do while 循环中的条件测试

> ID：10602153
> 
> 赞同：0
> 
> 时间：2012-05-15T13:48:28.370
> 
> 标签：java

我有一个包含 do while 循环的程序。我需要测试是否出现两种情况之一。第一个是currentPlayerEnergy 不等于0。第二个是quit 不成立。代码如下：

```
do
{
        switch(answer)
        {
            case 'w':   System.out.println("Walk");
                        break;

            case 'b':   System.out.println("Buy");
                        break;

            case 'c':   System.out.println("Change Character");
                        break;

            case 'r':   currentPlayerEnergy = 0;
                        break;

            case 'q':   quit = true;
                        break;
        }

}
while ( (currentPlayerEnergy > 0) || (quit != true ) ); 
```

请注意，我只是在测试 currentPlayerEnergy 在“r”的情况下变为零。我理解这个问题，java 读取测试并说如果当前能量不为零，则继续执行该块，但它不会检查退出是否已变为真。我使用了错误类型的循环吗？我应该使用其他操作数而不是逻辑或吗？非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:49:48.043

> 我应该使用其他一些运算符 [tor] 来代替逻辑或吗？

是的，要使用的正确运算符是逻辑“AND”（`&&`）：

```
while ( (currentPlayerEnergy > 0) && !quit ); 
```

我也改成`(quit != true)`了`!quit`，但这种变化纯粹是风格上的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:08:31.153

你在这里告诉程序：

```
 while ( (currentPlayerEnergy > 0) || (quit != true ) ); 
```

如果两个布尔表达式之一为真，则停留在一段时间内。

只有当两者都为假时，它才会继续。你会希望逻辑完全按照[aix](https://stackoverflow.com/users/367273/aix) 所说的那样做：

```
while ( (currentPlayerEnergy > 0) && !quit ); 
```

请注意 (!quit) 只是 (quit != true) 的简写形式

# javascript - 使用 javascript 从单个 Chrome 选项卡下载图像

> ID：10602155
> 
> 赞同：0
> 
> 时间：2012-05-15T13:48:37.887
> 
> 标签：javascript, image, download

我在网上看到了这个脚本：

```
javascript:(function(){function I(u){var t=u.split('.'),e=t[t.length-1].toLowerCase();return {gif:1,jpg:1,jpeg:1,png:1,mng:1}[e]}function hE(s){return s.replace(/&/g,'&amp;').replace(/>/g,'&gt;').replace(/</g,'&lt;').replace(/"/g,'&quot;');}var q,h,i,z=open().document;z.write('<p>Images linked to by '+hE(location.href)+':</p><hr>');for(i=0;q=document.links[i];++i){h=q.href;if(h&&I(h))z.write('<p>'+q.innerHTML+' ('+hE(h)+')<br><img src="'+hE(h)+'">');}z.close();})() 
```

它会在新选项卡中公平地打开您在其地址栏中运行脚本的选项卡的所有图像。但是那个新选项卡作为一个选项卡打开`about:blank`，当我按 Ctrl+S 下载页面时，因此在该选项卡中打开了所有图像，我希望不会发生。

Ctrl+S 不起作用`about:blank`，我有点希望有一些方法可以下载在这种选项卡中打开的那些图像。我该怎么做呢？JavaScript中有什么方法可以实现这一点吗？

我在网上搜索，找到了`wget`，但我并没有真正明白。有没有更简单的方法可以使用 javascript 从选项卡中下载图像？

# php - php mysql inner join - 获取特定行

> ID：10602159
> 
> 赞同：0
> 
> 时间：2012-05-15T13:48:49.303
> 
> 标签：php, mysql, join

这是我从一个表中获取模型信息并从另一个表中获取单张图片的查询。我必须对此查询进行哪些更改才能获得 ORDER BY sort DESC 的图片？在图片表中，有一个名为“排序”的字段。每行字段的默认值为 0。但一个随机行的值为 1。我想获取该特定行。但是，我不想使用 WHERE sort=1，因为即使在没有行的排序值为 1 的情况下，仍应获取一行。

```
 $sql="SELECT tc.id,tc.alias,tc.firstname,tci.imagename 
          FROM ".$pre."models tc
          INNER JOIN ".$pre."model_images tci ON tc.id=tci.userid 
          WHERE activated=1 AND sex=$sex AND city=$city AND published=1
          GROUP BY tc.id ORDER BY firstname ASC"; 
```

先感谢您！

* * *

使用解决：

```
 SELECT tc.id,tc.alias,tc.firstname, 
    (SELECT imagename FROM  ".$pre."model_images WHERE userid= tc.id 
    ORDER BY sort DESC LIMIT 1) AS imagename
    FROM ".$pre."models tc
    WHERE tc.activated=1 AND tc.sex=1 AND tc.city=2 AND tc.published=1
    ORDER BY tc.firstname ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:55:08.523

你也应该把它放在你的 WHERE 子句中。不过要注意的一点是要小心使用列名的方式。最好告诉他们属于哪个表。

所以这：

```
WHERE activated=1 AND sex=$sex AND city=$city AND published=1 
```

应该：

```
WHERE tc.activated=1 AND tc.sex=$sex AND tc.city=$city AND tc.published=1 
```

然后只需将“排序”列添加到其中：

```
WHERE tc.activated=1 AND tc.sex=$sex AND tc.city=$city AND tc.published=1 AND tci.sort=1 
```

如果没有返回结果，则确保有符合要求的记录。因为查询没有问题。尝试将您的查询打印到屏幕等，以查看每个变量是否都有值。

编辑：

您应该丢失 GROUP BY。

```
SELECT tc.id,tc.alias,tc.firstname,tci.imagename 
FROM ".$pre."models tc
INNER JOIN ".$pre."model_images tci ON tc.id=tci.userid 
WHERE tc.activated=1 AND tc.sex=$sex AND tc.city=$city AND tc.published=1 AND tci.sort=1 
```

# java - 实现接口的类不起作用，因为“类不是抽象的，不会覆盖抽象方法......”。错误是什么？

> ID：10602160
> 
> 赞同：1
> 
> 时间：2012-05-15T13:48:49.760
> 
> 标签：java, interface, interface-implementation

Java教程中有一个[“实现接口”的例子。](http://docs.oracle.com/javase/tutorial/java/IandI/usinginterface.html)我已经重复了这个例子，但它不起作用。`RectanglePlus`NetBeans 在类声明的左侧显示错误。错误是：

> rectangleplus.RectanglePlus 不是抽象的，不会覆盖 rectangleplus.Relatable 中的抽象方法 isLargerThan(rectangleplus.Relatable)

我做了和教程中写的一样的。为什么显示错误？这是我对该项目的实施。

1.  该项目的名称是`RectanglePlus`。
2.  包的名称是`rectangleplus`。

项目中的第一个文件是 Interface `Relatable`：

```
package rectangleplus;

public interface Relatable {
   int isLarger(Relatable other);   
} 
```

项目中的第二个文件是`RectanglePlus`带有辅助类的主类`Point`：

```
package rectangleplus;

public class RectanglePlus implements Relatable {

    public int width = 0;
    public int height = 0;
    public Point origin;

    // four constructors
    public RectanglePlus() {
        origin = new Point(0, 0);
    }
    public RectanglePlus(Point p) {
        origin = p;
    }
    public RectanglePlus(int w, int h) {
        origin = new Point(0, 0);
        width = w;
        height = h;
    }
    public RectanglePlus(Point p, int w, int h) {
        origin = p;
        width = w;
        height = h;
    }

    // a method for moving the rectangle
    public void move(int x, int y) {
        origin.x = x;
        origin.y = y;
    }

    // a method for computing
    // the area of the rectangle
    public int getArea() {
        return width * height;
    }

    // a method required to implement
    // the Relatable interface
    public int isLargerThan(Relatable other) {
        RectanglePlus otherRect 
            = (RectanglePlus)other;
        if (this.getArea() < otherRect.getArea())
            return -1;
        else if (this.getArea() > otherRect.getArea())
            return 1;
        else
            return 0;               
    }

   public static void main(String[] args) {
      // TODO code application logic here
   }
}

class Point {
   int top;
   int left;
   int x;
   int y;

   public Point(int t, int l) {
      top = t;
      left = l;
   }
} 
```

为什么教程示例中没有提到抽象？教程示例应该在没有 mitakes 的情况下工作吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:50:47.683

在接口中，您声明了方法`isLarger`，但在您声明的类中将`isLargerThan`一个更改为另一个名称，它会正常运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:50:57.757

您没有正确实现接口`isLarger()`中的方法`Relatable`。重命名该`isLargerThan(Relatable other)`方法，使其看起来像这样：

```
@Override
int isLarger(Relatable other) {
} 
```

使用注释是个好主意`@Override`，它可以让您捕捉到问题中的错误。

# visual-studio-2010 - SVN工作副本升级失败

> ID：10602161
> 
> 赞同：1
> 
> 时间：2012-05-15T13:48:50.660
> 
> 标签：visual-studio-2010, svn, ankhsvn, working-copy

在我的 VS 解决方案中，我有旧工作副本格式的项目。当我尝试使用 AnkhSVN 升级它时，我收到了这个错误：

```
SharpSvn.SvnMalfunctionException: Subversion reported a malfunction 'parent_node || entry->schedule == svn_wc_schedule_normal' on line 1666 of '..\..\..\subversion\libsvn_wc\entries.c'.
   at ?A0xa69717b0.sharpsvn_malfunction_handler(Int32 can_return, SByte* file, Int32 line, SByte* expr)
   at svn_client_upgrade(SByte* , svn_client_ctx_t* , apr_pool_t* )
   at SharpSvn.SvnClient.Upgrade(String path, SvnUpgradeArgs args)
   at Ankh.Commands.UpgradeWorkingCopy.<>c__DisplayClass2.<OnExecute>b__0(Object sender, ProgressWorkerArgs a)
   at Ankh.ProgressRunnerService.ProgressRunner.Run(Object arg) 
```

有人遇到过这个问题吗？有什么解决办法吗？

# java - 无法强制我的 JSP 模块应用程序显示结果。

> ID：10602164
> 
> 赞同：0
> 
> 时间：2012-05-15T13:49:02.173
> 
> 标签：java, jsp

试图显示页面。页面假设在所有情况下都是相同的，除了一个。在这种情况下，我使用选择条件以不同的参数显示它。但是我得到了参数，但表的其余部分是空的。怎么了？

```
<div id="detailsTabs">
<ul>
    <li><a href="#tabs-1"><fmt:message key="paymentDetails.tab.senderReciver" /> </a></li>
    <li><a href="#tabs-2"><fmt:message key="paymentDetails.tab.additionalInfo" /> </a></li>
</ul>
<c:choose>
    <c:when test="${.... == '....'}">
        <div id="tabs-1">
            <div class="groupHead">
                <fmt:message key="paymentDetails.section.sender1" />
            </div>
        </div>
    </c:when>
    <c:otherwise>
        <div id="tabs-1">
            <table style="width: 100%">
                <tr>
                    <td class=" horizontalGroup" style="width: 50%">
                        <table class="horizontalGroupContainer" style="width: 100%; height: 100%">
                            <tr>
                                <td class="horizontalGroup ui-widget ui-widget-content ui-corner-all" style="vertical-align: top; width: 100%">

                                    <div class="groupHead">
                                        <fmt:message key="paymentDetails.section.sender" />
                                    </div>
                                    <table class=" datatable">
                                        <tr class="even2">
                                            <td class="label"><fmt:message key="paymentDetails.label.senderBranchNr" /></td>
                                            <td class="data">${paymentDetails.senderBranchNr}</td>
                                        </tr>
                                        <tr class="odd2 ">
                                            <td class="label"><fmt:message key="paymentDetails.label.senderAccountNr" /></td>
                                            <td class="data">${paymentDetails.senderAccountNr}</td>
                                        </tr>
                                        <tr class="even2">
                                            <td class="label"><fmt:message key="paymentDetails.label.senderName" /></td>

                                            <td class="data groupElement">${paymentDetails.senderName_1}<br /> ${paymentDetails.senderName_2}<br />
                                                ${paymentDetails.senderName_3}<br /> ${paymentDetails.senderName_4}<br />
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </c:otherwise>
</c:choose>
<div id="tabs-2">
    <div id="section_additionalInfo">
        <tiles:insertAttribute name="section_additionalInfo" />
    </div>
</div> 
```

# python - 使用 Fabric 库的动态主机和并行任务

> ID：10602165
> 
> 赞同：12
> 
> 时间：2012-05-15T13:49:08.990
> 
> 标签：python, ssh, automation, fabric, paramiko

有没有办法在多个并行任务之间动态修改主机？这就是我到目前为止所拥有的。

```
def init_hosts():
    env.hosts = [host1,host2,host3,host4]

@parallel
def task_1():
    if condition is False:
        env.hosts.remove(env.host)

@parallel
def task_2():
    run('uname -s') 
```

显然我缺少一些`env`参数，但我只想`task_2`在满足`task_1`. 似乎`task_2`的主机列表在启动时被初始化，因为它在`env.hosts`定义的初始列表中的所有主机上运行`init_hosts()`。我还尝试动态修改和构建角色定义，但结果相同。

编辑：另外，有没有办法设置一个并行执行队列，以便并行执行多个并行任务而不是顺序执行？

编辑：通过让每个任务返回输出并解析输出以构建一个新的主机列表以传递给 execute()，我设法获得了我想要的最终结果：

```
def init_hosts():
    env.hosts = [host1,host2,host3,host4]

@parallel
def task_1():
    if condition is False:
        return False
    else:
        return True

@parallel
def task_2():
   run('uname -s')

def run_tests():
   results = execute(task_1)
   successful_hosts = [k for k in results.iterkeys() if results[k]]
   execute(test_2, hosts=successful_hosts) 
```

这行得通，但由于许多原因它很糟糕。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T19:54:26.627

并行执行使用分叉，因此不共享（返回）状态更改。因此，在一个并行运行的任务中更改环境变量，不会影响该任务运行的任何其他实例，也不会更改在调用之前全局设置的任何内容。

如果 task_1 所做的只是检查，为什么不将这个逻辑合并到 task_2 中呢？

# php - 在应用程序中实施（安全）Api 密钥

> ID：10602170
> 
> 赞同：2
> 
> 时间：2012-05-15T13:49:25.517
> 
> 标签：php, security, web-applications, sniffing, api-key

我编写了一个 Web 应用程序，并希望允许其他开发人员从中获取信息。

我正在使用的服务器不是那么糟糕并且无法处理那么多请求，因此我们的想法是生成 API 密钥并将其分配给想要查询我们信息的每个人。使用 Api 密钥，我可以限制每日请求，也许还可以收集一些统计数据，看看哪些信息对其他开发人员真正有用。

问题是，我担心它的安全方面。由于 Api 密钥将被发送到我们的服务器（通过 GET/POST 等），因此有人可以使用 wireshark 嗅探请求并轻松获取开发人员 API 密钥，对吧？

我考虑过生成一个密钥和一个 API 密钥。然后我可以指示其他开发人员将它们连接起来并将其哈希发送到我们的 API。然后我会验证哈希是否有效并允许请求......但是同样的问题会持续存在。黑客仍然可以嗅探该哈希并代表其他开发人员的应用程序发出请求。

所以我的问题是

*   我怎样才能避免这个问题？
*   或者更好的是，我的担忧是否有效？这是一个真正的问题吗？
*   是否有更好、更安全的方式来允许访问我的信息，而不会使其他开发人员过于复杂？

你们有什么感想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:58:29.343

关于嗅探，您的问题可以通过服务器上的 HTTPS 解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:56:09.710

我认为您正在尝试在这里解决许多不同的问题。

如果您的目标是限制对服务器的请求数量，您应该创建一个限制机制。这很重要，但我会基于 IP 地址而不是许可证密钥 - 单个许可用户可能会用大量请求淹没您的系统。您可以通过 IP 地址进行节流，而无需实施许可机制。

如果你想创建一个许可方案，你需要了解密码学等——这是一个不平凡的问题。例如，您如何阻止合法用户与所有朋友共享他们的许可证密钥？您如何阻止黑客窃取您的密钥并与他的所有朋友共享？

有许多解决方案 - 它们都给您的用户带来了一定程度的痛苦。例如，您可以在 HTTPS 上运行您的服务；这会停止窥探，但会降低性能。您可以为您的服务发行“令牌”，在使用一定次数后过期；获取新令牌需要加密交换（可能会检查您的 IP 地址）。您可能需要“挑战/响应”类型的逻辑（包括 IP 地址验证）。所有这些步骤都让您的用户生活更加困难；他们可能不会非常感谢您为他们必须做的额外工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:10:25.577

如果您想限制访问+潜在的一些使用率限制，那么在 API 上进行一些身份验证绝对是有意义的。如果您使用 API 密钥并希望避免嗅探，那么 HTTPS 绝对是最佳选择。如果这不是一个选项，那么您还可以使用像 oAuth 1.0 (http://oauth.net/core/1.0/) 或 Amazon AWS 身份验证这样的散列式身份验证。这些通过向您的 API 用户颁发 ID 和 Secret 来工作。他们通过将秘密插入消息正文、计算哈希并在请求中包含哈希（不是秘密）来使用客户端的秘密。在传入端，您将哈希与对消息内容执行的相同操作进行比较，其中包含特定的秘密。

这意味着您可以验证发件人，而不必通过网络发送密钥（请注意，内容仍然不安全 - 但您避免在每次请求时通过网络传递密钥）。缺点是开发人员实现起来很复杂。即使您使用有库的 oAuth 1.0 模式，也有点开销。

我在 3scale 工作，我们的一些工具也可能会有所帮助 - 我们的系统提供 API 密钥、oAuth 秘密共享以及开箱即用的 API 速率限制（http://www.3scale.net 和 PHP 库在这里：[https ://github.com/3scale/3scale_ws_api_for_php](https://github.com/3scale/3scale_ws_api_for_php)）。

# c++ - 多平台多处理？

> ID：10602173
> 
> 赞同：3
> 
> 时间：2012-05-15T13:49:30.040
> 
> 标签：c++, process, c++11, pthreads, openmp

我想知道为什么在新的 C++11 中他们添加了线程而不是进程。

他们不能围绕平台特定的功能做一个包装吗？

关于最便携的多处理方式有什么建议吗？叉子（）？开放MP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:21:31.020

如果您可以使用 Qt，那么[`QProcess`](http://qt-project.org/doc/qt-4.8/QProcess.html)类可能是一个优雅的平台独立解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T14:16:58.403

如果您想以可移植的方式执行此操作，我建议您避免`fork()`直接调用，而是编写自己的库函数，该函数可以映射到可用的系统的组合`fork()`和`exec()`系统上。如果你小心，你可以使你的函数具有与[`CreateProcess()`](http://msdn.microsoft.com/en-us/library/ms682425.aspx)Win32 相同或相似的语义。

与基于 Windows 的系统相比，UNIX 系统在进程和进程管理方面往往采用完全不同的方法，因此除了最简单的包装器之外的所有东西都可移植并非易事。

当然，如果你有可用的 C++11 或 Boost，我会坚持下去。如果您没有任何全局变量（无论如何这通常是一件好事）并且没有以任何其他方式设置和共享数​​据，那么现代系统上线程和进程之间的实际差异很小。您创建的所有线程都可以以与进程相同的方式彼此独立地取得进展。

如果消息传递适合您的任务或批处理调度程序系统，您可以查看一个 MPI 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T16:26:04.310

我正在使用[Boost Interprocess](http://www.boost.org/doc/libs/1_55_0/doc/html/interprocess.html)。

它不提供创建新进程的可能性，但是一旦它们存在，它就允许它们进行通信。

在这种特殊情况下，我可以从 shell 脚本创建我需要的进程。

# sql-server-2008 - 商店数据库设计

> ID：10602175
> 
> 赞同：0
> 
> 时间：2012-05-15T13:49:32.797
> 
> 标签：sql-server-2008

我正在尝试将我的数据库设计为事务表（TransactionId（PK），ItemListNoId（FK），StoreId（FK），Date，EmployeeId（FK））可以访问ItemList表中的产品列表（ItemListNo（PK） , UPC(FK)), 但是; 我将遇到无法输入具有相同 ItemNoList 编号的条目的问题。所有列类型都是 int 类型。

我无法完全找到解决这个问题的方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:12:56.430

您可以尝试在表中创建另一列，将`ItemList`其称为其他名称（例如 ItemID）。将其设置为`INT NOT NULL IDENTITY`，并将主键更改为该而不是 ItemListNo。

# html - 使用 padding-left 时文本不会正确换行

> ID：10602179
> 
> 赞同：11
> 
> 时间：2012-05-15T13:49:36.310
> 
> 标签：html, css

左侧菜单中的每个链接都有`padding-left: 15px;`其原因，因此我可以添加背景图像（蓝色箭头）。

但是现在，当文本换行时（请参阅“绘画、版画和水彩画”），它会忽略填充。

搜了一圈后，我根本找不到任何类似的案例，是不是因为我做错了？

如果我目前所拥有的一切都很好，我该如何解决包装问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-15T13:51:41.783

填充仅适用于块级元素。分配您的菜单`a`元素 a`display:block;`或`display:inline-block;`让它们正确响应填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:53:27.147

您应该将填充放在 div 上 - [http://jsfiddle.net/qHGrJ/1/](http://jsfiddle.net/qHGrJ/1/)

填充不适用于 span 样式元素。或者，您可以在链接上使用 display:block 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:52:47.213

鉴于您使用这些锚点的方式，您只需将它们设置为`display:block`.

标记此菜单的更理想方法（特别是因为您使用的是 HTML5）是使用`menu`包含链接列表的标记。

```
<menu>
 <ul>
  <li><a href="myMenuItem.html">My Menu Item</a></li>
  <li><a href="mySecondMenuItem.html>My Second Menu Item</a></li>
</ul>
</menu> 
```

这更具语义性，并且还为您提供了`li`' 作为添加边距的钩子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:52:47.757

将 display:block 添加到您的锚点。我建议不要使用 inline-block，因为它不完全支持跨浏览器（我相信 IE7 及以下版本）。

像这样在 view.css 的第 13 行添加显示块

```
#auction_cat_menu p a{ padding-left:15px; white-space:pre-wrap; display: block;} 
```

# php - Joomla 1.5.24：为什么用户会被注销？

> ID：10602183
> 
> 赞同：1
> 
> 时间：2012-05-15T13:49:57.513
> 
> 标签：php, session, joomla

我们在 Joomla 1.5.24 上有一个网站。

问题是用户在尝试查看除主页以外的任何页面时会被注销。

例如：

*   用户登录。
*   一切都很好。
*   用户希望查看站点上的任何其他页面。
*   用户不再登录。

登录没有问题，今天才出现这个问题。我们没有更改任何配置或插件评级。

我在[joomla 官方网站](http://www.joomla.org/)上看到，如果“记住我”插件的评级不在“系统遗留”或“系统缓存”之前，用户可能会被注销。但这不是我们的情况。我检查了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:47:57.977

如果在错误开始发生之前没有发生任何重大事件，则可能是您的缓存有问题。尝试使用[Cache Cleaner 清除 Joomla 的缓存。](http://extensions.joomla.org/extensions/core-enhancements/performance/cache/9495)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:52:22.257

万一有人会遇到类似的问题。这是解决方案和一些解释。

问题出在数据库连接中。我们将一个模块放在我们有自己的代码的地方。&其中一位开发人员初始化了一个新的数据库连接，并且会话因此而丢失。所以请确保您没有使用相同的 $db 变量名。我们通过逐行检查索引页面并调试每个步骤发现了这个错误。

希望它会节省其他开发人员的时间:)

# c# - 使用 Control.Invoke 死锁？

> ID：10602184
> 
> 赞同：0
> 
> 时间：2012-05-15T13:50:00.977
> 
> 标签：c#, winforms, task-parallel-library

我正在 VS2010 Ultimate 中使用 TPL 构建应用程序。大多数情况下，当我从 UI 的线程调用 DoRepresentation() 时，我运行该应用程序时它会变得无响应。

```
void DoRepresentation()
{
  Parallel.ForEach(cgs, loopOptions, g =>
  {
    UpdateRepresentation(g);
  });
}

void UpdateRepresentation(object g)
{
  view.Invoke(new Action(() =>
  {
    representation = new MyRepresentation(g);
  }));
} 
```

我不知道为什么应用程序变得无响应。我陷入僵局了吗？

在*MyRepresentation 中*，我对 OpenGL 进行了一些调用。

*view*是 Form1（主窗体）内的一个 Control。

当应用程序变得无响应时，我从 VS IDE 暂停它，这是我得到的信息

**在“并行任务”窗口中，我得到以下信息：**

```
ID  Status       Message<br>
1    ?Waiting   Task1 is waiting on object: "Task2"<br>
2    ?Waiting   No waiting information available<br> 
```

**在“调用堆栈”窗口中，我得到以下信息：**

```
[In a Sleep, wait, or join]<br>
[External Code]<br>
Test.dll!Render.DoRepresentation()<br>
App1.exe!Form1.Button1_Click<br> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T14:28:53.953

是的，您遇到了僵局。`Parallel.ForEach()`它的作用是使用一个或多个线程（包括当前线程）运行迭代，*然后*阻塞当前线程，直到所有迭代完成。

这意味着如果您`DoRepresentation()`从 UI 线程调用，您会遇到死锁：UI 线程正在等待其他线程上的迭代完成，而其他线程正在等待`Invoke()`完成，如果 UI 线程被阻塞，则不会发生这种情况.

此外，在您的情况下，使用`Parallel.ForEach()`没有任何意义（假设这是您的实际代码）：您`new MyRepresentation()`在 UI 线程上运行。

我不明白代码到底在做什么（似乎它`representation`在每次迭代中都会覆盖），但我认为你应该`ForEach()`从后台线程运行。这意味着`DoRepresentation()`将在完成工作之前返回，因此`Invoke()`将正常工作。

一般来说，长时间阻塞UI线程并不是一个好主意，所以你应该在另一个线程上运行任何耗时的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:56:59.677

您可以使用 BeginInvoke 而不是 Invoke Method。如果您仍然需要，那么您可以锁定一个对象并确保在实现之前无法从其他线程访问它。

使用开始调用方法

```
void UpdateRepresentation(object g)
{
  view.BeginInvoke( new Action(() =>
  {
    representation = new MyRepresentation(g);
  }));
} 
```

使用锁

```
void UpdateRepresentation(object g)
{
lock(this) 
{
 view.Invoke(new Action(() =>
  {
    representation = new MyRepresentation(g);
  }));
}

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-27T16:42:26.347

此评论适用于我的特定应用程序，它是 C# 中的 Windows 应用程序：使用锁对我也不起作用，并且应用程序只是冻结了。 `BeginInvoke`工作，但我不喜欢异步更新 UI 控件的效果。

我最终将主进程作为一个单独的线程 ( `System.Threading.Tasks.Task`) 启动，它会启动并立即让我重新控制主线程。之后，在循环等待其他几个任务结束执行时，我还不得不插入这一行：`System.Windows.Forms.Application.DoEvents()`以使系统能够处理队列中等待的所有消息。现在它适用于我的应用程序。可能有另一种方法可以给这只猫剥皮，但现在可以了。

# android - 在android中创建动态表。新观点与充气机

> ID：10602188
> 
> 赞同：2
> 
> 时间：2012-05-15T13:50:16.000
> 
> 标签：android, dynamic-tables

我想在android中创建动态表（自定义行数和列数）。最小 SDK 为 3.0

我想通过以下两种方式之一来装箱：

1) 通过创建新的 TextView

```
TableRow tr = ....;

for ( i = 0; i < NumOfRows .... ) {
    TextView tv = new TextView(this);
    tv.setLayoutParams(...);
    tv.setText("Text I wanna to see");
    tr.add(tv);
} 
```

2) 通过充气机

```
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

for ( i = 0; i < NumOfRows .... ) {
    TextView tv = (TextView) mInflater.inflate(R.layout.my_cell_layout, null, false)
                    .findViewById(R.id.my_cell_item);
    tv.setText("Text I wanna to see");
    tr.add(tv);
} 
```

3）你的方式:)

什么更快？我应该选择什么？`enter code here`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:11:56.597

一切按照您的要求，哪个更好。

来自链接[http://www.aslingandastone.com/2010/dynamically-sharing-android-views/](http://www.aslingandastone.com/2010/dynamically-changing-android-views/)

因为可以在 XML 或代码中创建布局，所以您可能无需进行动态 XML 布局加载就可以做到。话虽如此，我认为为什么要这样做有一些明显的优势：

代码清洁度。在代码中做除了基本布局之外的任何事情都会变得非常混乱，非常快。代码重用。使用一两行代码将 XML 布局扩展为指定视图非常容易。创建代码内布局所需的对象会导致不必要的垃圾收集。根据 Android Designing for Performance 文章，“尽可能避免创建短期临时对象”。属性可用性。在 XML 布局中定义视图会公开对象方法并不总是可用的属性。

* 可能的缺点：

与在代码中定义布局相比，进行 XML 布局需要更多时间，尤其是在只有一两个界面元素需要更改的情况下。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:08:38.923

要找出哪个更快，请实现这两种方法并使用方法分析实用程序 TraceView。话虽如此，在进行更改时维护 XML 文件比修改代码更容易。所以，如果我是你，我更喜欢技术#2。

# php - 移动优化网站

> ID：10602189
> 
> 赞同：2
> 
> 时间：2012-05-15T13:50:18.260
> 
> 标签：php, css

我必须开发适用于 Android、Iphone 和 Blackberry 的移动优化网站以及适用于台式机和平板电脑的网站。我们知道所有设备的屏幕分辨率各不相同。我的头指示我为所有设备开发一个站点，并根据设备动态更改 css。. 有人知道如何创建这样的网站吗？是否有任何框架或 cms 可用于此？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:54:56.857

我建议您查看“响应式网站”。这就是你想要的技术。

例如[http://responsejs.com/](http://responsejs.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:57:13.403

您可以使用媒体查询来根据屏幕大小、分辨率等更改 css（请参阅[此处的示例](http://css-tricks.com/css-media-queries/)）。

至于框架……也许你可以试试[http://www.getskeleton.com/](http://www.getskeleton.com/)或 jQuery mobile。

不过，我建议您不要使用纯 CSS 来为移动网站和非移动网站设置样式。您应该尽量减少移动设备的 DOM 以减少下载时间。对于完整的网站来说，这不是什么大问题，它可以从更丰富的 DOM 中受益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:57:47.190

尝试使用适应。它将允许您为不同的设备宽度范围指定不同的样式表。

[http://adapt.960.gs/](http://adapt.960.gs/)

我建议不要使用媒体查询，因为不同设备上的所有浏览器都不支持它们。在这里查看以进一步阅读-> [http://www.miqrogroove.com/blog/2012/dont-use-min-width-media-queries/](http://www.miqrogroove.com/blog/2012/dont-use-min-width-media-queries/)

# mongodb - 有没有办法强制尊重模式？

> ID：10602190
> 
> 赞同：1
> 
> 时间：2012-05-15T13:50:18.917
> 
> 标签：mongodb, rdbms, nosql

首先，我想说我真的很喜欢`NoSQL`&`MongoDB`但我对它的`schema-less`方面有一些主要的担忧。

假设我有 2 张桌子。**员工**和**电影**。

而且...我有一个非常愚蠢的`data layer`/`framework`有时喜欢将对象保存在错误的表中。

所以有一天，一个`Movie`被保存在`Employees`表中。像这样：

```
> use mongoTests;
switched to db mongoTests
> db.employees.insert({ name : "Max Power", sex : "Male" });
> db.employees.find();
{ "_id" : ObjectId("4fb25ce6420141116081ae57"), "name" : "Max Power", "sex" : "Male" }
> db.employees.insert({ title : "Fight Club", actors : [{ name : "Brad Pitt" }, { name : "Edward Norton" }]});
> db.employees.find();
{ "_id" : ObjectId("4fb25ce6420141116081ae57"), "name" : "Max Power", "sex" : "Male" }
{ "_id" : ObjectId("4fb25db834a31eb59101235b"), "title" : "Fight Club", "actors" : [ { "name" : "Brad Pitt" }, { "name" : "Edward Norton" } ] } 
```

这是非常错误的。

让我们切换上下文，考虑**Movies**和**CreditCards**（无论出于何种原因，在这种情况下，信用卡将以明文形式存储在数据库中）。这是大错特错？

1.  该代码可能会爆炸，因为它试图使用一个对象结构并接收另一个完全未知的结构。

2.  更糟糕的是，该代码确实有效，并且网上商店的访问者实际上在“租电影”列表中看到了信用卡信息。

有什么内置的东西可以防止这种威胁发生吗？像某种方式来“强制”仅对某些表尊重架构？

或者有什么方法可以强制 MongoDB 强制使用模式？（不能在表中创建新字段等）

***编辑：对于那些认为我在拖钓的人，我真的不是，这对我和我的团队来说是一个重要的问题，因为无论我们是否要使用 NoSQL，这是一个重大决定。***

感谢，并有一个愉快的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:58:07.120

无模式方面是主要的优点之一。

具有模式的数据库并不能完全消除此类问题 - 例如，使用 RDBMS 的系统中可能存在错误，该错误将错误的数据放入错误的字段/表中。

恕我直言，更大的问题是，这种错误是如何通过开发、测试和投入生产的？！

话虽如此，您可以设置一个过程来检查集合中文档的“模式”（例如，查看新添加的文档，检查它们是否具有您希望在其中看到的字段）-然后标记以进行调查。这里有这样一个工具（node.js）（我想，我从来没有用过）：

[http://dhendo.github.com/node-mongodb-schema-validator/](http://dhendo.github.com/node-mongodb-schema-validator/)

**编辑：**
对于那些将来发现这个问题的人，所以我评论中的链接不会被忽视，这里有一个 jira 项目：http: [//jira.mongodb.org/browse/SERVER-3536](http://jira.mongodb.org/browse/SERVER-3536)

# css - 这个复合 CSS 选择器是什么意思？

> ID：10602191
> 
> 赞同：5
> 
> 时间：2012-05-15T13:50:19.620
> 
> 标签：css, css-selectors

```
 .btnBlue.btnLtBlue 
```

这是否意味着具有两个类的元素？`btnBlue`和`btnLtBlue`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:51:03.160

是的。当两个类名像这样连接时，这意味着元素必须同时具有两个类才能应用该规则

# parallel-processing - 并行合并排序

> ID：10602195
> 
> 赞同：-1
> 
> 时间：2012-05-15T13:50:33.080
> 
> 标签：parallel-processing, openmp, pascal

我在我的并行语言中使用了帕斯卡。（我不喜欢它，但是强制。）所以

合并排序与 fork & join 并行不起作用，有人可以告诉我为什么吗？

这是我的代码：

```
program parrallelmergesort;
architecture shared(100);
const 
    n=100;(*big array*)
    size=10;
var 
    t,globalCounter:integer;
    unsorted:array[1..n] of integer;

procedure CallMerge(var lower,mid,high:integer);
    var 
        i,j,k,count:integer;
        S:array[1..n] of integer;
BEGIN
    i:=lower;
    j:=mid+1;
    k:=lower;
    count:=high-lower+1;
    while (i<=mid) and (j<=high) do
        begin
            if unsorted[i]<unsorted[j] then
                begin
                    S[k] :=unsorted[i];
                    i :=i+1;
                end
            else
                begin
                    S[k] :=unsorted[j];
                    j :=j+1;
                end;
            k:=k+1;
        end;
    if i>mid then
        begin
            while j<=high do
                begin
                    S[k] :=unsorted[j];
                    j :=j+1;
                    k :=k+1;
                end;
        end
    else if j>high then
        begin
                while i<=mid do
                begin
                    S[k] :=unsorted[i];
                    i :=i+1;
                    k :=k+1;
                end;
        end;
    for t:=lower  to high do
            unsorted[t] :=S[t];
end;

procedure CallMergeSort(bottom,up:integer);
    var middle,nextOfMiddle:integer;
begin
    if up>bottom then
    begin
        middle := (up+bottom) div 2;
        nextofMiddle :=middle+1;
        fork CallMergeSort(bottom,middle);
        fork CallMergeSort(nextOfMiddle,up);
        join;join;
        CallMerge(bottom,middle,up);
    end;

end;

begin
    unsorted[1] :=4; unsorted[2] :=3; unsorted[3] :=10; unsorted[4] :=5;   unsorted[5] :=0;
    unsorted[6] :=1; unsorted[7] :=8; unsorted[8] :=6;  unsorted[9] :=11;  unsorted[10] :=12;
    CallMergeSort(1,size);
    for globalCounter:=1 to size do
     writeln(unsorted[globalCounter]);
    readln;
end. 
```

我应该什么时候使用 fork ？在 CallMergeSort（递归）之前？

**最后几行是帕斯卡的主要功能。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:23:21.843

不要在 rec 函数中调用 fork 并加入。只需从主要呼叫他们两次。

# jquery - 每 6 个 LI 的 JQuery 添加类

> ID：10602197
> 
> 赞同：2
> 
> 时间：2012-05-15T13:50:37.683
> 
> 标签：jquery

我似乎对这个 jquery 代码有问题。

我想在第一个然后每 6 个添加一个类

*   的......我得到了第 1 和第 6，但在第三轮中，它在第 11 轮而不是第 12 轮。

    ```
    Here is the code:Query:

    $('ul li:nth-child(5n+1)').addClass("red").text("Here");

    Here is the css:

    li { background-color:blue; }
    .red{ background-color: red; } 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:53:25.890

这应该适合你：

```
$('ul li:first, ul li:nth-child(6n)').addClass("red").text("Here"); 
```

# java - 如何在 Java 中使用 HttpGet 在 REST 调用中传递空格

> ID：10602215
> 
> 赞同：14
> 
> 时间：2012-05-15T13:51:32.393
> 
> 标签：java, https, sms, uri, sms-gateway

我正在使用他们的 REST API 向 SMS 网关发送呼叫。当我发送一个像“你好”这样的简单词时，一切都很好，但是如果我添加一个空格，那么我就有麻烦了。这是因为 URI 不能包含空格。

做我需要做的事情的正确方法是什么？

```
HttpClient httpclient = new DefaultHttpClient();
try {
    HttpGet httpget = new HttpGet("http://www.example.com/SecureREST/SimpleSMSsend?PhoneNumber=123&Message=hello how are you?");
httpget.addHeader(new BasicHeader("Accept", "application/json"));

// Create a response handler
ResponseHandler<String> responseHandler = new BasicResponseHandler();
String responseBody = httpclient.execute(httpget, responseHandler);
System.out.println("----------------------------------------");
System.out.println(responseBody);
System.out.println("----------------------------------------");
} finally {
httpclient.getConnectionManager().shutdown();
} 
```

导致 IllegalArgumentException：

```
Exception in thread "main" java.lang.IllegalArgumentException
at java.net.URI.create(Unknown Source)
at org.apache.http.client.methods.HttpGet.<init>(HttpGet.java:69)
at main.main(main.java:36)
Caused by: java.net.URISyntaxException: Illegal character in query at index 97: https://www.example.com/SecureREST/SimpleSMSsend?PhoneNumber=123&Message=Hello, how are you?
at java.net.URI$Parser.fail(Unknown Source)
at java.net.URI$Parser.checkChars(Unknown Source)
at java.net.URI$Parser.parseHierarchical(Unknown Source)
at java.net.URI$Parser.parse(Unknown Source)
at java.net.URI.<init>(Unknown Source)
... 3 more 
```

**编辑：正如 alexey28 所建议的，我正在使用编码器，这就是我现在所做的：**

```
String query = "?PhoneNumber=123&Message=Hello, how are you?";
String host = "https://www.example.com/SecureREST/SimpleSMSsend";
String encodedUrl = host + URLEncoder.encode(query,"utf-8");
HttpGet httpget = new HttpGet(encodedUrl); 
```

但是结果是

```
Exception in thread "main" org.apache.http.client.HttpResponseException: **Bad Request**
at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:67)
at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:54)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:735)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:709)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:700)
at main.main(main.java:47) 
```

我在这里做错了什么？

请求编码后：执行请求[https://www.example.com/SecureREST/SimpleSMSsend%3FPhoneNumber%3D123%26Message%3DHello%2C+how+are+you%3F](https://www.example.com/SecureREST/SimpleSMSsend%3FPhoneNumber%3D123%26Message%3DHello%2C+how+are+you%3F)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-15T13:57:09.437

在发送之前使用 URLEncoder 对 URL 参数值进行编码：

```
String restUrl = URLEncoder.encode("You url parameter value", "UTF-8"); 
```

它将用正确的 URL 替换所有符号，包括空格 -> '+'

# windows - 本地文件 blob 保存

> ID：10602222
> 
> 赞同：1
> 
> 时间：2012-05-15T13:51:42.093
> 
> 标签：windows, azure, save, blob, local

我对这个 Windows Azure Blob 存储有点坚持。

我有一个接收文件路径（本地）的控制器。

所以在网页上我做了这样的事情：

http:...?filepath=C:/temp/myfile.txt

在 Web 服务上，我想获取此文件并将其放在 blob 服务上。当我在本地启动它时没有问题，但是当我发布它时，无法获取文件。我总是得到：遇到错误：找不到路径“C：/temp/myfile.txt”的一部分。

有人能帮我吗。有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:55:50.400

首先，我想说要获得适当的帮助，您需要对您的问题提供更好的描述。“在网络服务上”是什么意思？它是一个似乎与您的部分问题描述相匹配的 WCF Web 角色。但是，大多数 Web 服务使用[http://whatever.cloudapp.net/whatever.svc](http://whatever.cloudapp.net/whatever.svc)以及[http://whatever.cloudapp.net/whaterever.aspx?whatever](http://whatever.cloudapp.net/whaterever.aspx?whatever) （如果添加）。你有没有在你的应用程序中做过类似的事情。

您还在代码中提到了控制器，这让我认为它是一个基于 MVC 的 Web 角色应用程序。

我正在写以上信息，以帮助您下​​次更好地提出您的问题。

最后，根据您提供的内容，您正在从本地文件系统 (C:\temp\myfile.txt) 读取文件并上传到 Azure Blob。这将在计算模拟器中工作，并且肯定会在 Windows Azure 中失败，因为：

在您的 Web 角色代码中，您将无权在 C:\ 驱动器上写入，这就是文件不存在并且您收到错误的原因。最好的办法是使用 Azure 本地存储在其中写入任何内容，然后使用本地存储读取文件，然后上传 Azure Blob。Azure 本地存储旨在写入来自 Web 角色的任何内容（您将拥有写入权限）。

最后，我还担心您的应用程序设计，因为 Azure VM 没有持久化，因此有一个解决方案可以写入 VM 中的任何位置并不好，您可能需要在不使用系统内存的情况下直接写入 Azure 存储（如果可能的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:53:28.257

您是否验证该文件存在于 Azure 服务器上？

# sql - Linq to SQL 插入 - ID 不递增

> ID：10602227
> 
> 赞同：0
> 
> 时间：2012-05-15T13:51:54.767
> 
> 标签：sql, linq-to-sql

我正在学习 MVC2，我正在尝试创建一个数据请求管理系统。有点像票务系统。一个简单的问题，在我的 mvc 控制器类中，我有一个后期创建

```
 [HttpPost]
    public ActionResult Create(Request request)
    {

        if (ModelState.IsValid)
        {
            try
            {
                // TODO: Add insert logic here
                var db = new DB();
                db.Requests.InsertOnSubmit(request);

                db.SubmitChanges();
                return RedirectToAction("Index");
            }
            catch
            {
                return View(request);
            }

        }
        else
        {
            return View(request);
        }

    } 
```

好的，这非常简单，我添加了我的视图，一旦我创建了一行，我就会在我的主键行中获得第一个 0。然后它不会再增加了，我去添加另一行，catch 将我返回到我所在的同一视图。似乎主键 int id 没有增加。

你如何在这里自动增加 id（类型 int）？我有点困惑为什么 MVC 不处理这个，因为它是主键类型 int。它只会生成 id = 0 的第一行，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:57:17.963

您的 ID 列需要设置为 SQL server 表中的[标识](http://msdn.microsoft.com/en-us/library/ms186775.aspx)列。

您还应该`DB`在以下位置创建数据上下文`using`：

```
using(var db = new DB())
{
  db.Requests.InsertOnSubmit(request); 

  db.SubmitChanges(); 
  return RedirectToAction("Index"); 
} 
```

否则你会到处乱接连接；并且比早期构建的 Windows 产生更多的内存泄漏（嗯，取决于你的流量；））

# ajax - 当asp.net-mvc 3中出现异常时下载文件但返回Ajax响应

> ID：10602229
> 
> 赞同：2
> 
> 时间：2012-05-15T13:51:56.403
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, download

我的控制器中有以下代码：

```
public ActionResult downloadFile()
    {
        try
        {
            FileStream fs = new FileStream(helper.getFileLoc(), FileMode.Open);
            string mimeType = "Text File";
            FileStreamResult f = File(fs, mimeType, "myFile.txt");
            return f;
        }
        catch
        {
            return PartialView("_errorFile");
        }
    } 
```

我想下载一个文件，但如果出现异常，我想在我的错误 div 中呈现部分视图。

问题是，如果我使用`@Html.ActionLink`调用该方法，我可以正确下载文件，但如果出现异常，我会被重定向到仅包含部分视图的页面。

另一方面，如果我使用`@Ajax.ActionLink`，我会在该 div 中正确处理异常，但如果没有异常，我会在文件中获取文本而不是下载。

有什么办法可以做我想做的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:35:42.903

到目前为止，我发现的最佳方法是分两个阶段执行下载：第一个阶段可以通过 AJAX 调用，并检查潜在的错误原因。如果第一个返回一个 go-ahead 消息，则 javascript 将更`window.location`改为“已确认”下载 URL。

这种方法不能很好地处理特殊情况，例如在这两个请求之间网络驱动器被拉出服务器的情况。但它应该优雅地处理最常见的问题，比如用户无权下载请求的文件。

# c - 为什么在 jmps 足够时调用？

> ID：10602231
> 
> 赞同：11
> 
> 时间：2012-05-15T13:51:59.807
> 
> 标签：c, gcc, assembly, x86

我有两个文件：

```
#include <stdio.h>

static inline void print0() { printf("Zero"); }
static inline void print1() { printf("One"); }
static inline void print2() { printf("Two"); }
static inline void print3() { printf("Three"); }
static inline void print4() { printf("Four"); }

int main()
{
    unsigned int input;
    scanf("%u", &input);

    switch (input)
    {
        case 0: print0(); break;
        case 1: print1(); break;
        case 2: print2(); break;
        case 3: print3(); break;
        case 4: print4(); break;
    }
    return 0;
} 
```

和

```
#include <stdio.h>

static inline void print0() { printf("Zero"); }
static inline void print1() { printf("One"); }
static inline void print2() { printf("Two"); }
static inline void print3() { printf("Three"); }
static inline void print4() { printf("Four"); }

int main()
{
    unsigned int input;
    scanf("%u", &input);

    static void (*jt[])() = { print0, print1, print2, print3, print4 };
    jt[input]();
    return 0;
} 
```

我希望它们被编译成几乎相同的汇编代码。在这两种情况下都会生成跳转表，但第[一个文件](http://ideone.com/378wv)中的调用由 表示`jmp`，而[第二个](http://ideone.com/DC6oh)文件中的调用由`call`. 为什么编译器不优化`call`s？是否可以提示 gcc 我希望看到`jmp`s 而不是`call`s？

编译`gcc -Wall -Winline -O3 -S -masm=intel`，GCC 版本 4.6.2。GCC 4.8.0 产生的代码略少，但问题仍然存在。

**UPD**：定义`jt`为`const void (* const jt[])() = { print0, print1, print2, print3, print4 };`并制作函数`static const inline`没有帮助：http: [//ideone.com/97SU0](http://ideone.com/97SU0)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T14:03:19.900

编译器编写者有*很多*工作要做。显然，他们优先考虑回报最大和最快的工作。

Switch 语句在各种代码中都很常见，因此对它们执行的任何优化都会对许多程序产生影响。

这段代码

```
jt[input](); 
```

不太常见，因此在编译器设计者的 TODO 列表中要长得多。也许他们还没有（还）发现尝试优化它是值得的？这会为他们赢得任何已知的基准吗？或者改进一些广泛使用的代码库？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T13:57:36.240

因为函数指针数组是可变的。编译器决定它不能假设指针不会改变。您可能会发现 C++ 的程序集不同，和/或将 jt 设为 const。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T13:56:56.840

我的猜测是，这种优化与您在: 优化器意识到它可以捎带嵌入到您的..函数中的返回值`return`之后立即有一个语句的事实有关，并减少到; CPU 在选定的内部命中用作从.`switch``print0``print4``call``jmp``ret``printN``main`

尝试在切换*后*`jmp`插入一些代码以查看编译器是否会替换为`call`.

```
#include <stdio.h>

static inline void print0() { printf("Zero"); }
static inline void print1() { printf("One"); }
static inline void print2() { printf("Two"); }
static inline void print3() { printf("Three"); }
static inline void print4() { printf("Four"); }

int main()
{
    unsigned int input;
    scanf("%u", &input);

    switch (input)
    {
        case 0: print0(); break;
        case 1: print1(); break;
        case 2: print2(); break;
        case 3: print3(); break;
        case 4: print4(); break;
    }
    /* Inserting this line should force the compiler to use call */
    printf("\nDone");
    return 0;
} 
```

**编辑：** 您在[ideone](http://ideone.com/FBHuZ)上的代码有`jmp`一个不同的原因：它相当于：

```
static const char* LC0 ="Zero";
static const char* LC1 ="One";
static const char* LC2 ="Two";
static const char* LC3 ="Three";
static const char* LC4 ="Four";

int main()
{
    unsigned int input;
    scanf("%u", &input);

    switch (input)
    {
        case 0: printf(LC0); break;
        case 1: printf(LC1); break;
        case 2: printf(LC2); break;
        case 3: printf(LC3); break;
        case 4: printf(LC4); break;
    }
    printf("\nDone");
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T15:09:32.437

第一种情况（通过`switch()`）为我创建了以下内容（Linux x86_64 / gcc 4.4）：

```
 400570:       ff 24 c5 b8 06 40 00    jmpq   *0x4006b8(,%rax,8)
[ ... ]
  400580:       31 c0                   xor    %eax,%eax
  400582:       e8 e1 fe ff ff          callq  400468 <printf@plt>
  400587:       31 c0                   xor    %eax,%eax
  400589:       48 83 c4 08             add    $0x8,%rsp
  40058d:       c3                      retq
  40058e:       bf a4 06 40 00          mov    $0x4006a4,%edi
  400593:       eb eb                   jmp    400580 <main+0x30>
  400595:       bf a9 06 40 00          mov    $0x4006a9,%edi
  40059a:       eb e4                   jmp    400580 <main+0x30>
  40059c:       bf ad 06 40 00          mov    $0x4006ad,%edi
  4005a1:       eb dd                   jmp    400580 <main+0x30>
  4005a3:       bf b1 06 40 00          mov    $0x4006b1,%edi
  4005a8:       eb d6                   jmp    400580 <main+0x30>
[ ... ]
Contents of section .rodata:
[ ... ]
 4006b8 8e054000 p ... ] 
```

请注意，`.rodata`内容`@4006b8`是打印的网络字节顺序（无论出于何种原因......），该值`40058e`在`main`上面 - arg-initializer/`jmp`块开始的地方。那里的所有`mov`/`jmp`对都使用八个字节，因此是`(,%rax,8)`间接的。因此，在这种情况下，序列为：

```
jmp <to location that sets arg for printf()>
...
jmp <back to common location for the printf() invocation>
...
call <printf>
...
retq 
```

这意味着编译器实际上已经*优化了*调用`static`站点——而是将它们全部合并到一个单一的内联`printf()`调用中。这里使用的表格是`jmp ...(,%rax,8)`指令，*程序代码*中包含的表格。

第二个（使用显式创建的表）为我执行以下操作：

```
0000000000400550 <print0>:
[ ... ]
0000000000400560 <print1>:
[ ... ]
0000000000400570 <print2>:
[ ... ]
0000000000400580 <print3>:
[ ... ]
0000000000400590 <print4>:
[ ... ]
00000000004005a0 <main>:
  4005a0:       48 83 ec 08             sub    $0x8,%rsp
  4005a4:       bf d4 06 40 00          mov    $0x4006d4,%edi
  4005a9:       31 c0                   xor    %eax,%eax
  4005ab:       48 8d 74 24 04          lea    0x4(%rsp),%rsi
  4005b0:       e8 c3 fe ff ff          callq  400478 <scanf@plt>
  4005b5:       8b 54 24 04             mov    0x4(%rsp),%edx
  4005b9:       31 c0                   xor    %eax,%eax
  4005bb:       ff 14 d5 60 0a 50 00    callq  *0x500a60(,%rdx,8)
  4005c2:       31 c0                   xor    %eax,%eax
  4005c4:       48 83 c4 08             add    $0x8,%rsp
  4005c8:       c3                      retq
[ ... ]
 500a60 50054000 00000000 60054000 00000000  P.@.....`.@.....
 500a70 70054000 00000000 80054000 00000000  p.@.......@.....
 500a80 90054000 00000000                    ..@..... 
```

再次注意，当 objdump 打印数据部分时，字节顺序颠倒了——如果你把它们转过来，你会得到函数地址`print[0-4]()`。

编译器通过间接调用目标`call`- 即表使用*直接在`call`指令*中，并且表已_显式地创建为数据。

**编辑：**
如果您像这样更改源：

```
#include <stdio.h>

static inline void print0() { printf("Zero"); }
static inline void print1() { printf("One"); }
static inline void print2() { printf("Two"); }
static inline void print3() { printf("Three"); }
static inline void print4() { printf("Four"); }

void main(int argc, char **argv)
{
    static void (*jt[])() = { print0, print1, print2, print3, print4 };
    return jt[argc]();
}
```

创建的程序集`main()`变为：

```
0000000000400550 <main>:
  400550:       48 63 ff                movslq %edi,%rdi
  400553:       31 c0                   xor    %eax,%eax
  400555:       4c 8b 1c fd e0 09 50    mov    0x5009e0(,%rdi,8),%r11
  40055c:       00
  40055d:       41 ff e3                jmpq   *%r11d 
```

哪个看起来更像你想要的？

这样做的原因是您需要“无堆栈”函数才能执行此操作 - 尾递归（通过`jmp`而不是从函数返回`ret`）只有在您已经完成所有堆栈清理或不需要时才有可能做任何事情，因为您在堆栈上没有什么要清理的。编译器可以（但不需要）选择在最后一次函数调用之前进行清理（在这种情况下，最后一次调用可以由 进行`jmp`），但这只有在您返回从该函数获得的值或“返回`void`“。而且，如前所述，如果您实际*使用堆栈*（就像您的示例对`input`变量所做的那样），则没有什么可以使编译器强制以尾递归结果的方式撤消此操作。

**编辑2：**

第一个示例的反汇编，具有相同的更改（`argc`而不是`input`强制`void main`- 没有标准一致性评论，请这是一个演示），导致以下汇编：

```
0000000000400500 <main>:
  400500:       83 ff 04                cmp    $0x4,%edi
  400503:       77 0b                   ja     400510 <main+0x10>
  400505:       89 f8                   mov    %edi,%eax
  400507:       ff 24 c5 58 06 40 00    jmpq   *0x400658(,%rax,8)
  40050e:       66                      data16
  40050f:       90                      nop
  400510:       f3 c3                   repz retq
  400512:       bf 3c 06 40 00          mov    $0x40063c,%edi
  400517:       31 c0                   xor    %eax,%eax
  400519:       e9 0a ff ff ff          jmpq   400428 <printf@plt>
  40051e:       bf 41 06 40 00          mov    $0x400641,%edi
  400523:       31 c0                   xor    %eax,%eax
  400525:       e9 fe fe ff ff          jmpq   400428 <printf@plt>
  40052a:       bf 46 06 40 00          mov    $0x400646,%edi
  40052f:       31 c0                   xor    %eax,%eax
  400531:       e9 f2 fe ff ff          jmpq   400428 <printf@plt>
  400536:       bf 4a 06 40 00          mov    $0x40064a,%edi
  40053b:       31 c0                   xor    %eax,%eax
  40053d:       e9 e6 fe ff ff          jmpq   400428 <printf@plt>
  400542:       bf 4e 06 40 00          mov    $0x40064e,%edi
  400547:       31 c0                   xor    %eax,%eax
  400549:       e9 da fe ff ff          jmpq   400428 <printf@plt>
  40054e:       90                      nop
  40054f:       90                      nop 
```

这在一种方式上更糟（做*两个* `jmp`而不是一个），但在另一种方式上更好（因为它消除了`static`函数并内联代码）。在优化方面，编译器几乎做了同样的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T15:59:02.880

您是否分析了不同的代码？我认为可能会提出间接调用*已*优化的论点。以下分析是使用针对 x64 平台 (MinGW) 的 GCC 4.6.1 完成的。

如果您查看`jt[input]()`使用时会发生什么，调用会导致执行以下代码序列：

*   对`printX()`函数之一的间接调用
*   该`printX()`函数为 设置参数`printf()`，然后
*   跳转到`printf()`
*   调用将`printf()`直接返回到`间接调用的站点。

共有3个分支。

当您使用 switch 语句时，会发生以下情况：

*   为每种情况间接跳转到一些自定义代码（内联`printX()`调用）
*   `printf()`“案例处理程序”为调用加载适当的参数
*   来电`printf()`
*   调用将`printf()`返回到“案例处理程序”
*   跳转到开关的出口点（除了一个内联退出代码的案例处理程序 - 其他案例跳转到那里）

总共有 4 个分支（一般情况下）。

在这两种情况下，你都有： - 一个间接分支（一个是调用，另一个是跳转） - 一个分支到`printf()`（一个是跳转，另一个是调用） - 一个分支返回到调用站点

但是，当使用该`switch`语句时，会有一个额外的分支到达开关的“结束”（在大多数情况下）。

现在，如果您实际分析事物，处理器可能会比间接调用更快地处理间接跳转，但我猜即使是这种情况，基于开关的代码中使用的附加分支仍然会推动尺度赞成通过函数指针调用。

* * *

对于那些感兴趣的人，这里是使用生成的汇编程序`jk[input]();`（两个示例都是使用针对 x64 的 GCC MinGW 4.6.1 编译的，使用的选项是`-Wall -Winline -O3 -S -masm=intel`）：

```
print0:
    .seh_endprologue
    lea rcx, .LC4[rip]
    jmp printf
    .seh_endproc

// similar code is generated for each printX() function
// ...

main:
    sub rsp, 56
    .seh_stackalloc 56
    .seh_endprologue
    call    __main
    lea rdx, 44[rsp]
    lea rcx, .LC5[rip]
    call    scanf
    mov edx, DWORD PTR 44[rsp]
    lea rax, jt.2423[rip]
    call    [QWORD PTR [rax+rdx*8]]
    xor eax, eax
    add rsp, 56
    ret 
```

这是为基于开关的实现生成的代码：

```
main:
    sub rsp, 56
    .seh_stackalloc 56
    .seh_endprologue
    call    __main
    lea rdx, 44[rsp]
    lea rcx, .LC0[rip]
    call    scanf
    cmp DWORD PTR 44[rsp], 4
    ja  .L2
    mov edx, DWORD PTR 44[rsp]
    lea rax, .L8[rip]
    movsx   rdx, DWORD PTR [rax+rdx*4]
    add rax, rdx
    jmp rax
    .section .rdata,"dr"
    .align 4
.L8:
    .long   .L3-.L8
    .long   .L4-.L8
    .long   .L5-.L8
    .long   .L6-.L8
    .long   .L7-.L8
    .section    .text.startup,"x"
.L7:
    lea rcx, .LC5[rip]
    call    printf
    .p2align 4,,10

.L2:
    xor eax, eax
    add rsp, 56
    ret

.L6:
    lea rcx, .LC4[rip]
    call    printf
    jmp .L2

     // all the other cases are essentially the same as the one above (.L6)
     // where they jump to .L2 to exit instead of simply falling through to it
     // like .L7 does 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T18:04:26.720

`call`后一个函数的代码在间接函数和后续函数之间没有任何作用`ret`吗？如果间接调用的地址计算使用后一个函数需要保留其值的寄存器，我不会感到惊讶（这意味着它必须在计算之前保存该值，并在一段时间后恢复它）。虽然可以在间接调用之前移动寄存器恢复代码，但编译器只能在已被编程为合法机会的情况下执行此类代码移动。

此外，虽然我认为这并不重要，但我建议例程不应该如此，`inline`因为编译器将无法以这种方式执行它们。

# c# - 将 DateTime 与 ASP.NET MVC 和 SQL Server 进行比较

> ID：10602232
> 
> 赞同：0
> 
> 时间：2012-05-15T13:52:03.907
> 
> 标签：c#, sql-server, asp.net-mvc, sql-server-ce

我正在尝试创建一个强类型的模型和视图。这部分代码应该返回以联系我们形式发送的“电子邮件”列表。

我想退回今天发送的所有表单提交。SQL Server 2008 数据类型是`datetime`. 所以我的`DateTime`模型中有一个字段。

```
public ActionResult ResultTable()
{
    CombinedReport report = new CombinedReport();

    report.emails = report.db.ContactEmails.Where(w => w.FormInserted.Equals(DateTime.Today)).ToList();
    return PartialView(report);
} 
```

当我为本地内置 SQL Server CE 运行此配置时，它运行良好。

当我为运行 SQL Server 2008 的实际数据库设置它时，它不起作用。

通过一些反复试验，并查看我程序其他部分的代码，我注意到 C# 实现`DateTime`包含`12:00:00AM`作为日期的一部分，并且当它与 SQL 进行比较时，它会发送确切的时间.

它不会让我将 a`DateTime`与字符串进行比较，因此我什至无法将“today”格式化为字符串。

我在这里实例化的 CombinedReport 模型只是特定页面的视图模型，并不直接映射到数据库（“ContactEmails”会）。

让我保持强类型视图和模型的最佳前进方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:56:20.177

如果您只想比较值的*日期*部分，则应明确说明：

```
DateTime today = DateTime.Today;
report.emails = report.db.ContactEmails
                         .Where(w => w.FormInserted.Date == today)
                         .ToList(); 
```

现在，您使用的 LINQ 的风格是否支持该`Date`属性是另一回事 - 但这就是我要尝试开始的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:29:04.103

如果您使用的是 EF，请使用以下[`EntityFunctions.TruncateTime`](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.truncatetime.aspx)方法：

```
.Where(w => EntityFunctions.TruncateTime(w.FormInserted).Equals(DateTime.Today)) 
```

# hibernate - Hibernate List 键没有默认值

> ID：10602235
> 
> 赞同：0
> 
> 时间：2012-05-15T13:52:09.257
> 
> 标签：hibernate, list

我在休眠时遇到了一些麻烦。我想在 CollaborateableImpl 对象中存储一个 Transaction 对象列表。

所以我的 CollaborateableImpl 的休眠配置文件如下所示：

```
<class name="CollaborateableImpl" table="Collaborateable">
<id name="id" type="int" column="id">
    <generator class="increment" />
</id>

<property name="name" column="name" type="string" not-null="true" />
<property name="keywords" column="keywords" type="string"/>

<!--  Transactions -->
<list name="transactions" table="Transaction" lazy="false" cascade="all"  fetch="select">
    <key>
        <column name="Collaborateable_id" />
   </key>
   <index column="idx"/>
   <one-to-many class="TransactionImpl" />

</list>
</class> 
```

我的交易配置文件：

```
<class name="TransactionImpl" table="Transaction">
<id name="id" type="string" column="id">
    <!-- Generator is not needed, since the id is generated with uuid on client -->
</id>

<map name="vectorClock" table="VectorClockEntry" cascade="delete">
    <key column="Transaction_id" />
    <map-key column="User_id" type="int" />
    <element column="value" type="long" />
</map>
</class> 
```

所以我创建了一个 CollaborateableImpl 对象，用 session.save(collaborateableImpl) 存储这个对象。一切正常。所以现在我想将一个 TransactionImpl 对象添加到 Collat​​eImpl 对象的 Transaction 列表中。

```
TransactionImpl t = new TransactionImpl();
Session session = HibernateUtil.getSessionFactory().openSession();
Transaction tx = session.beginTransaction();
            collaborateableImpl.addTransaction(t);
            session.update(c);
        tx.commit();
        session.flush();
        session.close(); 
```

不幸的是抛出了一个异常：java.sql.SQLException: Field 'Collaborateable_id' doesn't have a default value

我明白，hibernate 想说什么，但我不知道如何解决这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:34:04.080

我找到了解决方案，我需要在 Transaction 配置文件中定义一个 Tag：

```
<many-to-one name="collaborateable" class="CollaborateableImpl" fetch="select">
        <column name="Collaborateable_id" not-null="true" />
</many-to-one> 
```

# java - 计算圆是否与矩形重叠

> ID：10602250
> 
> 赞同：0
> 
> 时间：2012-05-15T13:53:18.617
> 
> 标签：java, geometry, 2d

> **可能重复：**
> [圆矩形碰撞检测（交叉点）](https://stackoverflow.com/questions/401847/circle-rectangle-collision-detection-intersection)

如何计算圆形的形状是否与矩形的形状重叠（均为 2D）？

我对这两者的信息是圆心和它的半径，矩形左上角的顶点和它的宽度和高度。如果您有基于其他表示的其他解决方案，那也可以。另外：我正在用 Java 编程，有什么有用的类吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-15T13:55:59.143

对于离圆心最近的角，计算角到圆心的距离。如果它小于半径，则形状重叠。

# objective-c - 如何在 Xcode 中更改故事板的背景颜色？

> ID：10602253
> 
> 赞同：11
> 
> 时间：2012-05-15T13:53:26.450
> 
> 标签：objective-c, ios, xcode

我在 Xcode 中使用白色文本（标签），目前我看不到它们，因为情节提要的背景也是白色的。如何更改情节提要的外观？

澄清一下，我不希望我的文本改变颜色，我只想改变故事板的外观，以便我可以更轻松地开发。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-15T14:04:34.667

如果您指的是视图控制器中的白色：

*   选择视图
*   转到检查员（右面板，第 4 项）
*   更改背景颜色字段（剖面视图）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:04:52.697

我不确定你能做你想要达到的目标。我对您的最佳建议是创建一个深色`UIView`，您可以将其放在`UILabel`. 一旦你很高兴你已经`UILabel`按照你想要的方式进行了设置，你就可以删除`UIView`.

# c# - 在 C# Datagridview 中将列背景颜色更改为默认值

> ID：10602259
> 
> 赞同：1
> 
> 时间：2012-05-15T13:53:36.710
> 
> 标签：c#, datagridview

我有`Datagridview`一些列和一些数据。现在，当我单击一个按钮时，它会变为编辑模式，用户可以在其中更改某些列中的数据。

Datagridview 本身具有交替的行背景色，但在编辑模式下，可编辑的列是完全白色的。为了实现这一点，我使用以下内容：

`column1.CellTemplate.Style.BackColor = Color.White;`

现在，当用户完成编辑时，行必须像开始时一样。有人可以告诉我一些代码如何将列完全更改为默认值，并使用交替的行背景颜色。
一些信息：我在设计器中而不是在代码中设置颜色，所以我什至不知道如何设置交替背景色，我仅在 2 个月前开始使用 C#。

也许解决方案很简单，但我不知道......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:04:59.643

已解决：我只是将 Style 设置为未更改的列的样式：

`Column1.CellTemplate.Style = Column2.CellTemplate.Style;`

第 2 列没有改变，所以在我的情况下这是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:09:34.453

所以基本上，你首先在设计器中设置交替行。而且点击一个按钮后，就可以编辑了，单元格样式就变了？好吧，在我看来，通过这段代码，你打破了交替着色。

Datagrid 提供`CellEndEdit`事件，所以我建议您注册到此事件，并在事件触发后，只需在后面的代码中设置备用行样式。[您将在此处](http://msdn.microsoft.com/en-us/library/txth0a6h.aspx)找到有关此主题的更多信息。

其他选项可能是注册`EditModeChanged`事件，然后检查属性`EditMode`是否具有您要求的值。还有更多选择。但我会选择第一个。这能解决您的问题吗？

# c++ - 如何在 C++ 中获取当前进程 ID 和机器名称

> ID：10602260
> 
> 赞同：3
> 
> 时间：2012-05-15T13:53:37.603
> 
> 标签：c++

在 C# 中，获取当前进程 ID 和机器名称很简单：

```
int processID = Process.GetCurrentProcess().Id;
string machineName = Environment.MachineName; 
```

如何在本机 C++ 中检索它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T13:58:13.110

正如您评论的平台是 Windows 7，WINAPI 提供[GetCurrentProcessId()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683180%28v=vs.85%29.aspx)和[GetComputerName()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724295%28v=vs.85%29.aspx)。

简单示例`GetComputerName()`：

```
const int BUF_SIZE = MAX_COMPUTERNAME_LENGTH + 1;
char buf[BUF_SIZE] = "";
DWORD size = BUF_SIZE;

if (GetComputerNameA(buf, &size)) // Explicitly calling ANSI version.
{
    std::string computer_name(buf, size);
}
else
{
    // Handle failure.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T13:55:22.263

`getpid()`&& `gethostname()`- 用于`man`了解它们的所有信息...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-29T05:52:39.850

```
#ifdef _WIN32
 return GetCurrentProcessId(); 
#else
 return ::getpid();
#endif 
```

# javascript - 当用户键入/擦除时，使文本字段中的提示消失/重新出现

> ID：10602262
> 
> 赞同：3
> 
> 时间：2012-05-15T13:53:44.810
> 
> 标签：javascript, jquery, html

有谁知道我怎样才能在我的搜索栏中产生这样的效果： [https ://www.dropbox.com/help](https://www.dropbox.com/help)

`<input type="text" name="input">`

我的意思是文本消失和动态出现的 onFocus 和 onBlur 效果。

谢谢各位！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:57:47.120

他们在 color 属性上使用 CSS 动画：

摘自他们的[main.css](https://www.dropbox.com/static/26927/css/main.css)：

```
.sick-input.focused label{ color:#ccc;transition:color .2s linear 0;
                           -webkit-transition:color .2s linear 0;
                           -moz-transition:color .2s linear 0 } 
```

* * *

`:focus`您可以使用前面提到的定义在输入字段上使用伪选择器来模拟效果。

* * *

如果由于某种原因我不够清楚:)

[http://jsfiddle.net/d9CMR/](http://jsfiddle.net/d9CMR/)

* * *

**更强大的解决方案：**

[http://jsfiddle.net/d9CMR/3/](http://jsfiddle.net/d9CMR/3/)

* * *

**更新（适当的颜色变化）：**

[http://jsfiddle.net/d9CMR/6/](http://jsfiddle.net/d9CMR/6/)

* * *

**来源：**

*HTML*

```
<input type="text" name="input" data-default="fubar">​ 
```

*CSS*

```
input { color:#333; }    
input:focus { color:#ccc;transition:color .2s linear 0;
              -webkit-transition:color .2s linear 0;
              -moz-transition:color .2s linear 0 }
input.typing { color:#333; }​ 
```

*脚本*

```
$(function(){
    var input = $('input[name="input"]'),
        defaulttext = input.attr('data-default');

    input.val(input.attr('data-default'));

    input.on('focus', function(){
        if(input.val() != defaulttext)
            input.addClass('typing');
        else
            input.removeClass('typing');

    }).on('keydown', function(){        
        if(defaulttext == input.val()) input.val('');

        input.addClass('typing');
    }).on('blur', function(){
        if(input.val() == '') input.val(defaulttext);

        that.removeClass('typing');
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T14:33:18.377

试试这个 - 使用来自 Dropbox 网站的 HTML 和 CSS ....

HTML：

```
<div class="sick-input" id="anonymous_element_3">
    <label for="search-input">Type your question here</label>
    <input type="text" id="search-input" name="search_string" value="" tabindex="1">
</div> 
```

CSS：

```
.sick-input label {
    font-size: 16px;
    position: absolute;
    left: 8px;
    top: 6px;
    cursor: text;
    pointer-events: none;
    color: #777;
}

.sick-input.populated label {
    display: none;
}
input {
    border-radius: 3px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    -moz-box-shadow: 0 0 0 #000, inset 0 3px 3px #eee;
    -webkit-box-shadow: 0 0 0 #000, inset 0 3px 3px #eee;
    box-shadow: 0 0 0 #000, inset 0 3px 3px #eee;
    font-size: 16px;
    border: 1px solid #BFBFBF;
    padding: 5px;
    width: 500px;
}
.sick-input.focused label {
    color: #ccc;
    transition: color .2s linear 0;
    -webkit-transition: color .2s linear 0;
    -moz-transition: color .2s linear 0;
} 
```

JavaScript：

```
$('#search-input').keyup(function() {
    if ($(this).val() === '') {
        $('.sick-input').removeClass('populated');
    } else {
        $('.sick-input').addClass('populated');
    }   
})

$('#search-input').focus(function() {
    $('.sick-input').addClass('focused');
});

$('#search-input').blur(function() {
    $('.sick-input').removeClass('focused');
}); 
```

[这里的工作示例](http://jsfiddle.net/d9CMR/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:22:29.527

[这](http://jsfiddle.net/SU5ZA/)是一个例子：

HTML

```
<div>
    <label for="search">Search this site</label>
    <input type="text" id="search" placeholder="Search this site" />
</div> 
```

CSS

```
body { padding: 20px; }

div { position: relative; }
div label { position: absolute; left: 8px; top: 4px; color: #666; z-index: 2; font: 11px arial; }
div input { position: absolute; padding: 3px 6px; border: 1px solid #ddd; border-radius: 2px; z-index: 1; font: 11px arial; }
.populated label { display: none; } 
```

Javascript

```
$('input').on('keydown keypress keyup', function(e) {
    if($('input').val() == '') {
        $('div').removeClass('populated');
    }
    else {
        $('div').addClass('populated');
    }
}); 
```

如果你不想使用`placeholder`属性，那么使用[这个](http://jsfiddle.net/SU5ZA/1/)：

HTML

```
<div>
    <label for="search">Search this site</label>
    <input type="text" id="search" value="Search this site" />
</div> 
```

Javascript

```
$('input').on('keydown keypress keyup', function(e) {
    if($('input').val() == '') {
        $('div').removeClass('populated');
    }
    else {
        $('div').addClass('populated');
    }
}).on('focus', function(e) {
    var $this = $(this);
    if($this.val() == $this.data('placeholder')) {
        $this.val('');
    }

}).on('blur', function(e) {
    var $this = $(this);
    if($this.val() == '') {
        $this.val($this.data('placeholder'));
    }    
}).data('placeholder', $('input').val()); 
```

如果您不想使用字段`value`属性，`input`那么[这](http://jsfiddle.net/SU5ZA/2/)可能会有所帮助：

HTML

```
<div>
    <label for="search">Search this site</label>
    <input type="text" id="search" value="" />
</div> 
```

CSS

```
body { padding: 20px; }

div { position: relative; }
div label { position: absolute; left: 8px; top: 4px; color: #666; z-index: 2; font: 11px arial; }
div input { position: absolute; padding: 3px 6px; border: 1px solid #ddd; border-radius: 2px; z-index: 1; font: 11px arial; }
.populated label { display: none; }
.focused label { color: #aaa; } 
```

Javascript

```
$('input').on('keydown keypress keyup', function(e) {
    if($('input').val() == '') {
        $('div').removeClass('populated');
    }
    else {
        $('div').addClass('populated');
    }
}).on('focus', function(e) {
    $('div').addClass('focused');
}).on('blur', function(e) {
    $('div').removeClass('focused');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:58:17.787

您还可以使用具有**类似**效果的 html5 placeholder="" 属性。

并为旧版浏览器使用 jquery 后备：[https ://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T13:58:50.333

你能试试这个

Javascript代码

```
function txtblur()
{
    document.getElementById('txtval').value="";
}
function textblur()
{
    document.getElementById('txtval').value="Enter word to search";
} 
```

HTML 文本框代码

```
<input type="text" class="tbct" name="txtval" id="txtval" value="Enter word to search" onfocus="txtblur()"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T14:10:46.443

如果高度或宽度已知，您还可以将包含所需文本的背景图像精灵设置到输入字段，并且只需调整 onfocus 和 onblur 事件的背景位置。

# c# - 休眠 HbmM 映射到 Xml

> ID：10602263
> 
> 赞同：4
> 
> 时间：2012-05-15T13:53:47.240
> 
> 标签：c#, nhibernate, mapping-by-code

我正在使用 NHibernate 代码映射来映射类。

有时，为了调试我的 NHibernate 配置，我需要准确检查传递给 NHibernate 的设置是什么，并且按代码调试映射非常困难。

有什么方法可以将生成的 HbmMapping 转换回 Xml 文件，就像手动输入一样？

如果问题出在我的映射中，这将对诊断有很大帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:55:57.727

**选项1**

请注意，这会将 XML 写入您的 BIN 文件夹，从而导致 IIS 池回收，因此请运行一次，然后将`WriteAllXmlMapping`行注释掉！

```
var mapper = new ModelMapper();
mapper.AddMappings(typeof(CmsMeta).Assembly.GetTypes());

//This will write all the XML into the bin/mappings folder
mapper.CompileMappingForEachExplicitlyAddedEntity().WriteAllXmlMapping(); 
```

**选项 2**

这将为您提供一个可以添加断点的大型 XML 文件。

```
var mapper = new ModelMapper();
mapper.AddMappings(typeof(CmsMeta).Assembly.GetTypes());
var mapping = mapper.CompileMappingForAllExplicitlyAddedEntities();

//you could add a breakpoint here! 
var mappingXml = mapping.AsString(); 
```

来源来自我前段时间写的[一篇博文。](http://puredotnetcoder.blogspot.co.uk/2011/07/view-xml-generated-when-mapping-by-code.html)

# c# - 使用 Moq 来验证调用是否以正确的顺序进行

> ID：10602264
> 
> 赞同：69
> 
> 时间：2012-05-15T13:53:47.973
> 
> 标签：c#, unit-testing, nunit, moq, sequential

我需要测试以下方法：

```
CreateOutput(IWriter writer)
{
    writer.Write(type);
    writer.Write(id);
    writer.Write(sender);

    // many more Write()s...
} 
```

我已经创建了一个起订量`IWriter`，并且我想确保`Write()`以正确的顺序调用这些方法。

我有以下测试代码：

```
var mockWriter = new Mock<IWriter>(MockBehavior.Strict);
var sequence = new MockSequence();
mockWriter.InSequence(sequence).Setup(x => x.Write(expectedType));
mockWriter.InSequence(sequence).Setup(x => x.Write(expectedId));
mockWriter.InSequence(sequence).Setup(x => x.Write(expectedSender)); 
```

但是，第二次调用`Write()`in `CreateOutput()`（写入`id`值）会抛出一条`MockException`消息“ *IWriter.Write() 调用失败，模拟行为严格。模拟上的所有调用都必须有相应的设置。* ”。

我还发现很难找到任何明确的、最新的 Moq 序列文档/示例。

我做错了什么，或者我不能使用相同的方法设置序列吗？如果没有，有没有我可以使用的替代方案（最好使用 Moq/NUnit）？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-15T22:08:46.037

[在同一 mock 上使用 MockSequence](http://code.google.com/p/moq/issues/detail?id=291)时存在错误。它肯定会在 Moq 库的后续版本中修复（您也可以通过更改`Moq.MethodCall.Matches`实现手动修复它）。

如果您只想使用 Moq，那么您可以通过回调验证方法调用顺序：

```
int callOrder = 0;
writerMock.Setup(x => x.Write(expectedType)).Callback(() => Assert.That(callOrder++, Is.EqualTo(0)));
writerMock.Setup(x => x.Write(expectedId)).Callback(() => Assert.That(callOrder++, Is.EqualTo(1)));
writerMock.Setup(x => x.Write(expectedSender)).Callback(() => Assert.That(callOrder++, Is.EqualTo(2))); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T14:33:15.833

我已经设法得到我想要的行为，但它需要从[http://dpwhelan.com/blog/software-development/moq-sequences/下载第 3 方库](http://dpwhelan.com/blog/software-development/moq-sequences/)

然后可以使用以下命令测试该序列：

```
var mockWriter = new Mock<IWriter>(MockBehavior.Strict);
using (Sequence.Create())
{
    mockWriter.Setup(x => x.Write(expectedType)).InSequence();
    mockWriter.Setup(x => x.Write(expectedId)).InSequence();
    mockWriter.Setup(x => x.Write(expectedSender)).InSequence();
} 
```

我添加了这个作为答案，部分是为了帮助记录这个解决方案，但我仍然对单独使用 Moq 4.0 是否可以实现类似的东西感兴趣。

我不确定 Moq 是否仍在开发中，但是用`MockSequence`. 或在 Moq 中包含 moq-sequences 扩展来解决问题会很高兴。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-31T16:11:35.737

我编写了一个扩展方法，它将根据调用顺序进行断言。

```
public static class MockExtensions
{
  public static void ExpectsInOrder<T>(this Mock<T> mock, params Expression<Action<T>>[] expressions) where T : class
  {
    // All closures have the same instance of sharedCallCount
    var sharedCallCount = 0;
    for (var i = 0; i < expressions.Length; i++)
    {
      // Each closure has it's own instance of expectedCallCount
      var expectedCallCount = i;
      mock.Setup(expressions[i]).Callback(
        () =>
          {
            Assert.AreEqual(expectedCallCount, sharedCallCount);
            sharedCallCount++;
          });
    }
  }
} 
```

它通过利用闭包对作用域变量的工作方式来工作。因为 sharedCallCount 只有一个声明，所以所有的闭包都会引用同一个变量。使用 expectedCallCount，循环的每次迭代都会实例化一个新实例（而不是简单地在闭包中使用 i）。这样，每个闭包都有一个 i 的副本，其范围仅限于自身，以便在调用表达式时与 sharedCallCount 进行比较。

这是扩展的一个小单元测试。请注意，此方法在您的设置部分中调用，而不是在您的断言部分中。

```
[TestFixture]
public class MockExtensionsTest
{
  [TestCase]
  {
    // Setup
    var mock = new Mock<IAmAnInterface>();
    mock.ExpectsInOrder(
      x => x.MyMethod("1"),
      x => x.MyMethod("2"));

    // Fake the object being called in order
    mock.Object.MyMethod("1");
    mock.Object.MyMethod("2");
  }

  [TestCase]
  {
    // Setup
    var mock = new Mock<IAmAnInterface>();
    mock.ExpectsInOrder(
      x => x.MyMethod("1"),
      x => x.MyMethod("2"));

    // Fake the object being called out of order
    Assert.Throws<AssertionException>(() => mock.Object.MyMethod("2"));
  }
}

public interface IAmAnInterface
{
  void MyMethod(string param);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-09-25T23:25:41.520

最简单的解决方案是使用[Queue](https://msdn.microsoft.com/en-us/library/system.collections.queue(v=vs.110).aspx)：

```
var expectedParameters = new Queue<string>(new[]{expectedType,expectedId,expectedSender});
mockWriter.Setup(x => x.Write(expectedType))
          .Callback((string s) => Assert.AreEqual(expectedParameters.Dequeue(), s)); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-29T16:59:58.190

最近，我为 Moq 整合了两个功能：VerifyInSequence() 和 VerifyNotInSequence()。他们甚至可以使用 Loose Mocks。但是，这些仅在 moq 存储库分支中可用：

[https://github.com/grzesiek-galezowski/moq4](https://github.com/grzesiek-galezowski/moq4)

并等待更多评论和测试，然后再决定它们是否可以包含在官方最小起订量中。但是，没有什么能阻止您以 ZIP 格式下载源代码，将其构建为 dll 并试一试。使用这些功能，您需要的序列验证可以这样编写：

```
var mockWriter = new Mock<IWriter>() { CallSequence = new LooseSequence() };

//执行必要的调用

mockWriter.VerifyInSequence(x => x.Write(expectedType));
mockWriter.VerifyInSequence(x => x.Write(expectedId));
mockWriter.VerifyInSequence(x => x.Write(expectedSender));

```

（请注意，您可以根据需要使用其他两个序列。松散序列将允许您要验证的序列之间的任何调用。StrictSequence 不允许这样做，StrictAnytimeSequence 就像 StrictSequence（在已验证的调用之间没有方法调用），但允许任意数量的任意调用之前的序列。

如果您决定尝试此实验功能，请在以下位置发表您的想法： [https ://github.com/Moq/moq4/issues/21](https://github.com/Moq/moq4/issues/21)

谢谢！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-31T15:20:22.047

我刚刚遇到了类似的情况，并且受到公认答案的启发，我使用了以下方法：

```
//arrange
var someServiceToTest = new SomeService();

var expectedCallOrder = new List<string>
{
    "WriteA",
    "WriteB",
    "WriteC"
};
var actualCallOrder = new List<string>();

var mockWriter = new Mock<IWriter>();
mockWriter.Setup(x => x.Write("A")).Callback(() => { actualCallOrder.Add("WriteA"); });
mockWriter.Setup(x => x.Write("B")).Callback(() => { actualCallOrder.Add("WriteB"); });
mockWriter.Setup(x => x.Write("C")).Callback(() => { actualCallOrder.Add("WriteC"); });

//act
someServiceToTest.CreateOutput(_mockWriter.Object);

//assert
Assert.AreEqual(expectedCallOrder, actualCallOrder); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-28T13:33:00.953

`Moq`有一个鲜为人知的特性`Capture.In`，它可以捕获传递给方法的参数。有了它，您可以像这样验证调用顺序：

```
var calls = new List<string>();
var mockWriter = new Mock<IWriter>();
mockWriter.Setup(x => x.Write(Capture.In(calls)));

CollectionAssert.AreEqual(calls, expectedCalls); 
```

如果你有不同类型的重载，你也可以为重载运行相同的设置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-15T14:03:55.000

我怀疑 expectedId 不是你所期望的。

但是，在这种情况下，我可能只是编写自己的 IWriter 实现来验证......可能会容易得多（以后更容易更改）。

很抱歉没有直接起订量建议。我喜欢它，但还没有这样做。

您是否可能需要在每个设置结束时添加 .Verify() ？（这真的是一个猜测，虽然我很害怕）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-29T05:18:34.303

我的场景是没有参数的方法：

```
public interface IWriter
    {
    void WriteA ();
    void WriteB ();
    void WriteC ();
    } 
```

所以我使用`Invocations`属性`Mock`来比较所谓的：

```
var writer = new Mock<IWriter> ();

new SUT (writer.Object).Run ();

Assert.Equal (
    writer.Invocations.Select (invocation => invocation.Method.Name),
    new[]
        {
        nameof (IWriter.WriteB),
        nameof (IWriter.WriteA),
        nameof (IWriter.WriteC),
        }); 
```

您还可以附加`invocation.Arguments`以检查带有参数的方法调用。

失败消息也比仅仅更清楚`expected 1 but was 5`：

```
 expected
["WriteB", "WriteA", "WriteC"]
    but was
["WriteA", "WriteB"] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-28T14:02:07.397

我参加这个聚会迟到了，但我想分享一个对我有用的解决方案，因为似乎所有引用的解决方案都无法按顺序多次验证***相同的方法调用（使用相同的参数）。***除了引用的错误之外，[Moq 问题 #478](https://github.com/moq/moq4/issues/748)已在没有解决方案的情况下关闭。

提出的解决方案利用`MockObject.Invocations`列表来确定顺序和相同性。

```
public static void VerifyInvocations<T>(this Mock<T> mock, params Expression<Action<T>>[] expressions) where T : class
{
    Assert.AreEqual(mock.Invocations.Count, expressions.Length,
        $"Number of invocations did not match expected expressions! Actual invocations: {Environment.NewLine}" +
        $"{string.Join(Environment.NewLine, mock.Invocations.Select(i => i.Method.Name))}");

    for (int c = 0; c < mock.Invocations.Count; c++)
    {
        IInvocation expected = mock.Invocations[c];
        MethodCallExpression actual = expressions[c].Body as MethodCallExpression;

        // Verify that the same methods were invoked
        Assert.AreEqual(expected.Method, actual.Method, $"Did not invoke the expected method at call {c + 1}!");

        // Verify that the method was invoked with the correct arguments
        CollectionAssert.AreEqual(expected.Arguments.ToList(),
            actual.Arguments
                .Select(arg =>
                {
                    // Expressions treat the Argument property as an Expression, do this to invoke the getter and get the actual value.
                    UnaryExpression objectMember = Expression.Convert(arg, typeof(object));
                    Expression<Func<object>> getterLambda = Expression.Lambda<Func<object>>(objectMember);
                    Func<object> objectValueGetter = getterLambda.Compile();
                    return objectValueGetter();
                })
                .ToList(),
            $"Did not invoke step {c + 1} method '{expected.Method.Name}' with the correct arguments! ");
    }
} 
```

# c - C：二叉树搜索法

> ID：10602265
> 
> 赞同：1
> 
> 时间：2012-05-15T13:53:49.493
> 
> 标签：c, recursion

我正在尝试使用递归函数使用二叉树（不，它不是二叉搜索树，只是二叉树）来制作搜索方法。如果数据在二叉树上，我希望它返回节点，如果不是，我希望它返回一个`NULL`值。我已经制作了搜索功能，并且它完美地完成了它的工作。但问题是，该函数似乎不会返回节点。

这是`struct`二叉树的：

```
struct data
{
    int number;
    struct data *left, *right;
}*root = NULL; 
```

这是我正在谈论的搜索功能：

```
data* search(struct data *node, int key)
{
    if(node == NULL)
        return NULL;
    else
    {
        printf("\n%d %d -", node->number, key);

        if(node->number== key)
            return node;

        search(node->left, key);
        search(node->right, key);
    }
} 
```

当我像这样调用搜索函数时：`search(root, 6);`它表示它正在返回一个`NULL`值，尽管我已经将一个`6`数字推入二叉树（并且搜索函数`return node;`也停在该行，所以我假设该函数是返回一个`NULL`。）

[我在这里](http://www.cprogramming.com/tutorial/lesson18.html)看到了二叉树的教程 ，使用并更改了一些代码，但它仍然是一样的。我在这里拼命寻求帮助:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:58:31.940

~~您的函数将始终返回`NULL`，除非顶部节点包含键。~~您的函数不会对其递归调用的结果做任何事情；事实上，控制流可能会在没有命中`return`语句的情况下“掉线”。

您应该检查递归调用的返回值，并在适当的时候传递它们：

```
if (node == NULL)
    return NULL;
else if (node->number == key)
    return node;
else {
    data *left = search(node->left, key);
    return left? left: search(node->right, key);
} 
```

注意“三元运算符”（if-then-else 表达式）`?:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:59:35.327

除非您使用您的返回值，否则它不会返回搜索到的节点`search`

把它改成这样。

```
data* search(struct data *node, int key)
{
  if(node == NULL)
    return NULL;
  else
  {
    printf("\n%d %d -", node->number, key);

    if(node->number== key)
        return node;
    struct data *tmp;
    tmp = search(node->left, key);
    /* node found ? */
    if (tmp)
        return tmp;
    tmp = search(node->right, key);
    /* node found ? */
    if (tmp)
        return tmp;
  }
  /* search didn't find anything */
  return NULL;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:00:26.587

您永远不会真正返回递归调用搜索的结果。

您需要检查这些调用的返回值，如果他们找到了节点，则返回它

```
data* search(struct data *node, int key)
{
    data* found = NULL;

    if(node == NULL)
        return NULL;

    printf("\n%d %d -", node->number, key);

    if(node->number== key)
        return node;

    found = search(node->left, key);
    if (found)
        return found;

    found = search(node->right, key);
    if (found)
       return found;

    return NULL;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:08:07.317

有一种更简单、更有效的方法来制作二叉树，那就是简单地使用向量/数组。

i 是访问您的向量的 int 。向右走，i=i*2。向左走，i=i*2+1。他们永远不会共享同一个地点，并假设每个地点的分配均等。

# c# - 我可以访问刚刚在 C# 中创建的 HTML 控件的高度/宽度吗？

> ID：10602269
> 
> 赞同：3
> 
> 时间：2012-05-15T13:53:58.290
> 
> 标签：c#, .net, htmlcontrols

我正在使用此代码从后面的代码创建 DIV 控件-

```
System.Web.UI.HtmlControls.HtmlGenericControl dynDiv =
    new System.Web.UI.HtmlControls.HtmlGenericControl("DIV");
dynDiv.ID = "dynDivCode";
dynDiv.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Gray");
dynDiv.InnerHtml = "I was created using Code Behind";
this.Controls.Add(dynDiv); 
```

创建后，我想访问它的高度和宽度。有可能这样做吗？还是此时它没有在屏幕上呈现以使其属性可访问？

### 编辑：我想访问新创建的 div 的（DIV1）宽度，但我也想根据 DIV1 的宽度更改我创建的另一个 div（DIV2）控件的宽度。所以我想读取和修改 2 个不同 div 标签的宽度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:11:14.660

尚未建立“宽度”；这将完全取决于客户端如何呈现。您可以获取/设置 CSS“样式”属性，或获取/设置在呈现元素时正确设置元素样式的 CSS 类。

您应该能够完成您尝试使用 CSS 执行的操作，但如果一切都失败了，您可以使用 Javascript (jQuery) 获取渲染大小并使用它来调整其他 DIV 的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:13:13.697

我会添加一个 .css 文件，然后使用百分比来获得一个好的 UI 假设我们通过它的 id`div1`和`div2`

您在 .css 文件中的类应如下所示

```
#div1 {
    width: 55%;
    height: 50%;
}

#div2 {
    width: 45%;
    height: 50%;
} 
```

然后，将它们包装在另一个 div 中，让我们调用它`wrappedDiv`并使用像素来正确设置大小，在 .css 文件中添加这个其他类。

```
#wrappedDiv {
    width: 1024px;
    height: 768px;
} 
```

`<head>`记得在页面的标签上添加.css文件

```
<link href="~/Content/myNewStyles.css" rel="stylesheet" type="text/css" /> 
```

# jsp - WebSphere 6.1 - 预编译 jsps 但在我访问页面之前找不到类文件

> ID：10602270
> 
> 赞同：1
> 
> 时间：2012-05-15T13:53:59.163
> 
> 标签：jsp, websphere

我对预编译 JSP 的理解是应用程序服务器应该在启动时创建已编译的（.class 文件），而不是在用户第一次访问页面时创建。

我已经将 EAR 部署到 WebSphere 6.1，我已经在 WebSphere 控制台上启用了“预编译 JavaServer Pages 文件”，但是在我第一次访问该页面之前，我无法在应用程序服务器的文件系统上看到 jsp 的 .class。我只是通过执行以下操作来非常粗略地搜索类文件：

```
find . -name "*addUser*" -print

./profiles/AppSrv01/temp/mytestqaNode01/MYTEST_QA2/Border_Community/web.war/WEB-INF/jsp/admin/countries/_addUser.class 
```

从 WAS_HOME

我是否误解了预编译的作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:35:22.513

部署*后*是否启用了标志？我问是因为文档提到如果您尝试修改已部署的 webapp，则必须编辑文件

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fuweb_jspcompile.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fuweb_jspcompile.html)

“您只能在安装或更新包含 Web 模块的应用程序时在此面板上指定 JSP 编译器选项。安装应用程序后，您必须编辑 Web 模块的 WEB-INF/ibm-web-ext 的 JSP 引擎配置参数.xmi 文件以更改其 JSP 编译器选项。”

# java - Java SQL 中结果集的自动关闭

> ID：10602271
> 
> 赞同：3
> 
> 时间：2012-05-15T13:54:04.993
> 
> 标签：java, sql, jdbc

考虑以下代码

```
ResultSet rs = null;
Statement st = null;
try {
  //do somehting
 } catch (Exception e){
  //do something
 } finally {
     if(st != null){
       try {
       st.close();
       } catch (SQLException e) {
            log.error("Exception while closing statement: " + e);
       }
    }
 } 
```

问题是当我们关闭语句时，它会关闭结果集还是我们需要像这样显式关闭结果集

```
if(rs != null){
   try {
   rs.close();
   } catch (SQLException e) {
        log.error("Exception while closing result set: " + e);
   }
} 
```

我以为关闭语句会自动关闭结果集，但是如果我没有明确关闭结果集，FindBugs 会抛出以下警告

> 此方法可能无法清理 java.sql.ResultSet

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:56:05.420

[当 Statement 对象关闭时，其当前的 ResultSet 对象（如果存在）也将关闭。](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#close%28%29)

[这](https://stackoverflow.com/questions/103938/resultset-not-closed-when-connection-closed)和[这](http://www.theserverside.com/discussions/thread.tss?thread_id=41036)表明 Oracle 可能有问题，您可能必须显式关闭`ResultSet`. 但同样，根据 Javadocs，这应该不是问题。因此，警告，也许。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:57:25.057

您不能指望 ResultSet 会自动关闭，这取决于驱动程序的实现以及它的合规程度。最好的策略是明确关闭 ResultSet。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:54:37.493

当您关闭语句或连接时，默认情况下它的所有子项也应该关闭。

# javascript - 发送到服务器的（数量）cookie 取决于什么？

> ID：10602273
> 
> 赞同：0
> 
> 时间：2012-05-15T13:54:23.283
> 
> 标签：javascript, web-applications, cookies

在使用 struts 开发 Web 应用程序时，我遇到了以下情况。

考虑以下链接：

`<s:a href="action1.action" id="link1" ></s:a>`和`<s:a href="#" id="link2" onclick="submitData();"></s:a>`

函数`submitData()`定义如下：

```
function submitData(){

      var var1="x"
      $("#targetDiv").load("action1.action",{someVar:var1 });

} 
```

我在点击链接时发现发送给操作的 cookie 数量是不同的。什么会导致这种差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:02:32.597

根据 cookie 的定义，其中一些可以设置为在不同的 URL 路径中工作：

> cookie 域和路径定义了 cookie 的范围——它们告诉浏览器 cookie 应该只针对给定的域和路径发送回服务器。如果未指定，它们默认为所请求对象的域和路径...

[维基百科关于 cookie 的文章](http://en.wikipedia.org/wiki/HTTP_cookie)

# python - 在 IDLE 中运行模块时，Python-Pygame 总是崩溃且无响应

> ID：10602274
> 
> 赞同：1
> 
> 时间：2012-05-15T13:54:25.340
> 
> 标签：python, crash, pygame

我对 Pygame 甚至 Python 还是很陌生，但我知道当其中的某些内容不正确时，它会在 Python Shell 中显示一些文本，告诉您有一些错误。我实际上遇到了很多，这一次，它终于运行并显示了窗口，但它没有响应。我知道我的整个代码中可能存在一些错误，所以请随时纠正我（请解释一下，因为我对这些东西还是新手）。

代码在下面，但如果它可以帮助，如果你要求它，我会看看我是否也可以发布文件。无论如何，这是代码：

```
#import Modules
import os, sys
import pygame
from pygame.locals import *

background_img="C:/Users/JM/Documents/Python/Pygame_Alpha/background_img.jpg"
cursor_img="C:/Users/JM/Documents/Python/Pygame_Alpha/pygameCursor.png"

def load_image(img_file, colorkey=None):
    file_pathname = os.path.join("\Users\JM\Documents\Python\Pygame_Alpha",img_file)

    try:
        image = pygame.image.load(file_pathname).convert_alpha()

    except pygame.error, message:
        print "Can't load image:", file_pathname
        raise SystemExit, message

    image = image.convert()

    if colorkey is not None:
        if colorkey is -1:
            colorkey = image.get_at((0,0))
    image.set_colorkey(colorkey, RLEACCEL)

    return image, image.get_rect()

#Main character's position and movements
char_x,char_y = 0,0
char_go_x,char_go_y = 0,0

#Main char class
class char(pygame.sprite.Sprite):
 """Main Character"""
     def __init__(self):
        pygame.sprite.Sprite.__init__(self)#call Sprite initializer
        self.image, self.rect = load_image("char_img.png", -1)
        self.jumping = 0

    def update(self):
        self.rect.midtop = char_x,char_y
        if self.jumping == 1:
        self.rect.move_ip(-35,-3)

    def char_no_jump(self):
        self.jumping = 0

    pygame.init()
    pygame.display.set_caption("pygame_Alpha")
    screen = pygame.display.set_mode((800,480),0,32)
    background = pygame.image.load(background_img).convert()
    cursor = pygame.image.load(cursor_img).convert_alpha()

    char = char()

    clock = pygame.time.Clock()
    millisec = clock.tick()
    sec = millisec/1000.0

    char_fall = sec*25
    jump = sec*50

    #blit the background
    screen.blit(background,(0,0))

    #Main Loop
    while 1:

       #Tell pygame not to exceed 60 FPS
       clock.tick(60)

       #Events
       for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()

            #Events triggered when a key/s is/are pressed
            if event.type == KEYDOWN:
                if event.key == K_ESCAPE:
                    pygame.quit()
                    sys.exit()
                elif event.key == K_UP or event.key == K_w:
                    char.jumping = 1

                elif event.key == K_DOWN or event.key == K_s:
                    char_go_y += 1
                elif event.key == K_LEFT or event.key == K_a:
                    char_go_x -= 0.5                
                elif event.key == K_RIGHT or event.key == K_d:
                    char_go_x += 0.75
                    if char_x > 800:
                        char_x = 0

            #Events triggered when a key/s is/are released
            if event.type == KEYUP:
                if event.key == K_UP or event.key == K_w:
                    char_go_y += 1
                elif event.key == K_DOWN or event.key == K_s:
                    char_go_y = 0
                elif event.key == K_LEFT or event.key == K_a:
                    char_go_x = 0
                    if char_x < 0:
                    char_x = 0
                elif event.key == K_RIGHT or event.key == K_d:
                    char_go_x = 0
                    if char_x > 700:
                    char_x = 0

        char.update()
        while char_y < 200:
        char_go_y += char_fall

        if char_y > 200:
        char_y = 200

        #Update values of position of Main Char
        char_x += char_go_x
        char_y += char_go_y

        #Position Variables of Cursor Image, setting its values equal to cursor pos, and blit it to screen
        cursor_x,cursor_y = pygame.mouse.get_pos()
        cursor_x -= cursor.get_width()/2
        cursor_y -= cursor.get_height()/2
        screen.blit(cursor,(cursor_x,cursor_y))

        pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:57:28.817

唔...

```
while char_y < 200:
           char_go_y += char_fall 
```

除非你有一些我没有看到的有趣的别名，如果 char_y < 200（它应该在开始时，它总是因为你正在更新 char_go_y。

如果这不是问题，仍然建议添加一些打印来确定它是否通过循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:05:01.600

运行时空闲时是否有任何错误消息？每当屏幕冻结时，您就会出现问题，但是在不知道错误消息的情况下很难确定是什么。也许打开图片有问题，您应该尝试将 .convert() 放在图片文件名的末尾，但这只是猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:08:22.777

调用 pygame.quit 和 sys.exit 可能会导致问题。通常你在 pygame 中永远不需要它们。

代替：

```
#Main Loop
while 1:

   #Tell pygame not to exceed 60 FPS
   clock.tick(60)

   #Events
   for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit() 
```

做这个

```
#Main Loop
done = False
while not done:
   clock.tick(60)

   for event in pygame.event.get():
        if event.type == QUIT:
            done = True
        if event.type == KEYDOWN:
            if event.key == K_ESC:
                done = True 
```

# mysql - 如何在一定时间内从其他表中选择具有 COUNT 的表上的行？

> ID：10602278
> 
> 赞同：0
> 
> 时间：2012-05-15T13:54:32.450
> 
> 标签：mysql, sql

我有这些表：

```
users
-----
id                  INT
name                VARCHAR(20)
email               VARCHAR(40)

user_fans
----------
id                  INT
user_id             INT  /* linked to users.id */
fan_id              INT  /* linked to users.id */
time_created        INT  /* unix timestamp */ 
```

我可以使用以下查询从`users`带有附加字段的表中获取所有行`num_fans`

```
SELECT u.id, u.name, u.email, COUNT(f.id) AS num_fans
FROM users u
LEFT JOIN user_fans f ON u.id=f.user_id
GROUP BY u.id, u.name, u.email
ORDER BY num_fans DESC 
```

问题是我需要`num_fans`在一段时间内得到。我试过这个查询

```
SELECT u.id, u.name, u.email, COUNT(f.id) AS num_fans
FROM users u
LEFT JOIN user_fans f ON u.id=f.user_id
WHERE f.time_created > UNIX_TIMESTAMP('2012-5-1 00:00:00')
GROUP BY u.id, u.name, u.email
ORDER BY num_fans DESC 
```

但是上面的查询只会返回已经有粉丝的用户。我希望其他用户也返回 num_fans=0。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:58:11.357

将条件移至`on`：

```
SELECT u.id, 
       u.name, 
       u.email, 
       COUNT(f.id) AS num_fans 
FROM users u LEFT JOIN user_fans f 
             ON u.id=f.user_id 
             and f.time_created > UNIX_TIMESTAMP('2012-5-1 00:00:00') 
GROUP BY u.id, u.name, u.email ORDER BY num_fans DESC 
```

***更新***
（添加了对@Gardon Dave 建议的解释）

你所拥有的和这之间的区别是：

在您的查询中，您在`WHERE`子句中有条件。这在加入之后应用，（将此视为加入顶部的过滤）。如果一行不符合这个条件，它将被淘汰。表中没有条目的外部连接行将`user_fans`不满足此条件（值将为 NULL）。

中的条件`on`将仅将用户表连接到表的子集`user_fans`- 外部连接发生在此过滤之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:00:20.903

尝试将 is null 添加到条件：

```
SELECT u.id, u.name, u.email, COUNT(f.id) AS num_fans  
FROM users u  
LEFT OUTER JOIN user_fans f ON u.id=f.user_id  
WHERE f.time_created is null or f.time_created > UNIX_TIMESTAMP('2012-5-1 00:00:00')  
GROUP BY u.id, u.name, u.email  
ORDER BY num_fans DESC 
```

# mysql - DECIMAL(x,0) 有什么用？

> ID：10602283
> 
> 赞同：9
> 
> 时间：2012-05-15T13:54:40.943
> 
> 标签：mysql

在 DECIMAL(M, D) 列中，MySQL 提供了 D 范围为 0 到 30 的选项。

是否有一个微妙的原因让我错过了 0 的选项？小数点后没有任何内容的小数不是整数吗？

何时以及为什么要指定没有小数位的 DECIMAL？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T14:09:08.107

[DECIMAL 类型](https://dev.mysql.com/doc/refman/5.6/en/fixed-point-types.html)的数字范围比 INTEGER 或 BIGINT 大得多。您可以在 DECIMAL(65, 0) 中存储的最大数字是 65 个九。BIGINT 中的最大数字是 18446744073709551615。

DECIMAL(x, 0) 对于小数字来说通常要贵一些。如果您的数字在其中之一的范围内，请考虑使用定义的[INTEGER 类型。](https://dev.mysql.com/doc/refman/5.6/en/integer-types.html)

* * *

DECIMAL(x, 0) 字段的字节存储要求取决于`x`以下公式：

```
Storage = x / 9 + Leftover
Leftover = round_up((x % 9) / 2) (i.e., about half of the leftover digits) 
```

您可以在 MySQL 手册中阅读有关数字类型存储[要求的](https://dev.mysql.com/doc/refman/5.6/en/storage-requirements.html#id693943)更多信息并自行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:17:24.037

除了允许存储大于 的值外，如果您愿意`BIGINT`，还可以使用：`DECIMAL(x,0)`

*   允许范围内的值`-9, ... , +9`：使用`DECIMAL(1,0)`（使用 1 个字节）

*   允许范围内的值`-99, ... , +99`：使用`DECIMAL(2,0)`（使用 1 个字节）

*   允许范围内的值`-999, ... , +999`：使用`DECIMAL(3,0)`（使用 2 个字节）

*   允许范围内的值`-9999, ... , +9999`：使用`DECIMAL(4,0)`（使用 2 个字节）

...

*   允许范围内的值`-999999999, ... , +999999999`：使用`DECIMAL(9,0)`（使用 4 个字节）

...等（最多`DECIMAL(65,0)`使用 29 个字节）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:13:09.483

在 biging 中，您只能存储不大于 18 446 744 073 709 551 615 的数字。这是 20 位，但在 DECIMAL 中，您甚至可以指定要存储的 65 位。同样使用 int 你不能直接将位数限制为一个低数字（例如一个）。所以它更灵活，如果你需要在现有的数据库上扩展它，那就更容易了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-26T11:46:08.023

在 Mysql 中，Decimal(3,2) 表示总共 3 位数字和小数点后 2 位数字，如 3.42

Decimal(3,0) 表示总共 3 位，小数点后没有数字，如 345 即使你在小数的括号中写了超出给定范围的内容，Mysql 也会自动将它们更新为 000 或 999。

# facebook - 如何在 Facebook 上分享单个产品图片

> ID：10602285
> 
> 赞同：0
> 
> 时间：2012-05-15T13:54:55.633
> 
> 标签：facebook

我有产品列表页面。我想显示每个产品的共享链接，并且我想共享单个产品图像。我怎样才能做到这一点 ？

我相信元没有帮助，因为我需要分享个人产品形象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:19:51.090

为每个图像创建自己的按钮，从 JS SDK [https://developers.facebook.com/docs/reference/javascript/FB.ui/](https://developers.facebook.com/docs/reference/javascript/FB.ui/) onclick 调用 FB.UI， 传入消息所需的变量

因此，对于每个图像，html 可能类似于：

`<img src="path-to-image" title="title" data-uri="path-to-full-product" />`

然后使用像 jquery 这样的库，您可以拥有以下脚本

```
 $('img').click(function(){
      var $this = $(this);
      var obj = {
      method: 'feed',
      link: $this.data('uri'),
      picture: $this.attr('src'),
      name: $this.attr('title'),
      caption: 'Your caption here',
      description: 'Your description here.'
    };
    function callback(response) {
     alert( "Post ID: " + response['post_id']);
    }

    FB.ui(obj,callback);
 }); 
```

带有示例的更多信息在这里：

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

你可以在这里使用 JS-SDK

[https://developers.facebook.com/tools/console/](https://developers.facebook.com/tools/console/)

# windows-phone-7 - 禁用在我的网络视图中滑动以获取全景图

> ID：10602288
> 
> 赞同：0
> 
> 时间：2012-05-15T13:54:59.847
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我开始在 WP7 上编码。

对于我在这个平台上的第一个应用程序，我没有太多工作要做，只是创建一个全景图，在每个项目中显示 web 视图。

我的问题是我希望我的全景图接收到水平滑动手势，而我的 webviews 接收到其余的触摸事件。

有人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:39:28.210

到目前为止，我认为没有人找到`WebBrowser`在全景或枢轴中托管 a 的方法。例如，请参阅以下问题：

[全景图内的地图在平移地图时移动全景图](https://stackoverflow.com/questions/4199232/map-inside-panorama-moves-the-panorama-when-panning-map)

[WP7 Pivot 控件和 WebBrowser 控件](https://stackoverflow.com/questions/5417293/wp7-pivot-control-and-a-webbrowser-control)

到目前为止，我管理的最好的方法是[抑制 WebBrowser 控件的平移和缩放](http://www.scottlogic.co.uk/blog/colin/2011/11/suppressing-zoom-and-scroll-interactions-in-the-windows-phone-7-browser-control/)- 但我还没有找到将触摸交互重新路由到托管全景/枢轴的方法。

# formal-verification - Max-SMT 求解器如何工作？

> ID：10602295
> 
> 赞同：2
> 
> 时间：2012-05-15T13:55:33.657
> 
> 标签：formal-verification, satisfiability

SMT 求解器是为处理类似于 SAT 的可满足性而开发的。众所周知，SAT 也是可满足性的，并且提出了 SAT 的变体。其中之一是 max-SAT。所以我想问一下是否存在 max-SMT 求解器，如果存在，它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T22:48:27.080

用于使 max-SMT 工作的技术之一如下：

*   增加/制定输入以允许计算模型（分配）中评估为 True 的子句数量。调用这个新公式**F**，并让变量**K**保持计数。

*   通过重复调用求解器以获得 K 的不同固定值，**对****F**执行二进制搜索以获得**K**的最佳（最大）可能值。

 **例如，在**F**上运行求解器以及子句***(K = 20)***。

*   **如果是 SAT，将K**的值加倍并使用***(K = 40)***运行求解器。

*   如果是 UNSAT，将**K的值减半并使用*****(K = 10)***运行求解器。

逐步迭代接近**K**的最大可能值。

我知道 Yices 使用类似的东西（至少它曾经使用过），但是可能会添加其他一些优化/启发式方法。

其他求解器可能使用不同的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T23:34:45.187

据我所知，[Yices](http://yices.csl.sri.com/slides-afm-tutorial.pdf)确实支持 max-SMT。他们的[论文](http://yices.csl.sri.com/tool-paper.pdf)（[存档副本](https://web.archive.org/web/20120902185940/http://yices.csl.sri.com/tool-paper.pdf)）描述了它的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T23:29:38.030

我知道 3 个重要的策略。所有这些都归结为解决一系列 SAT 问题。我根据必须满足的硬约束和加权软约束制定了我的答案，当总结起来给你 MAX-SAT 的目标时。

### 线性搜索

对于给定的一组（正加权）子句，您有一个最低目标。最小目标为 0 意味着硬约束部分是可满足的，这是 MAX-SAT 解决方案甚至存在的先决条件。

在一个步骤中，您尝试证明严格大于上一步目标的最小目标。假设我们有 3 个加权为 2、3、7 的软约束。您将首先尝试证明（硬约束 + 权重为 2 的约束），如果成功，您知道 MAX-SAT 目标的下限为 2。严格优于 2 的最小下界将是 3。因此，您将尝试证明（硬约束 + 权重为 2 的约束）如果这也是 SAT 则 (hc + 2 + 3) 然后 (hc + 7) 然后 ( hc + 7 + 2) 然后 (hc + 7 + 3) 然后 (hc + 7 + 3 + 2)。

如果您在任何时候遇到 UNSAT，这意味着上一步是最大值。

### 二进制搜索

如果您考虑与其权重相关的 SAT 问题，您可能会认为按顺序解决它们是一种浪费，因为在许多情况下，以前的作业没有用。因此，您可以尝试一种称为二进制搜索的方法。这个想法是你在体重秤的中间选择一个问题，如果它是SAT你可以丢弃所有权重比它弱的问题，如果它是UNSAT你可以丢弃所有权重比它高的问题。使用它，您可以在 O(log(n)) 中找到最佳值，而不是预期的 O(n/2)，其中 n 是不同权重组合的数量。

然而，这种方法与线性搜索相比并不像您最初想象的那样有利。事实证明，UNSAT 实例往往比 SAT 实例更耗时。基于二进制搜索的 MAX-SAT 求解器在任何时候都有更糟糕的行为，即您不知道求解器何时会停止，并且它必须返回在此之前找到的最佳实例。任何时间的行为对于许多现实世界的应用程序来说都很重要。

### 核心驱动搜索

核心驱动搜索基本上是一种反向线性搜索，它会遇到很多 UNSAT 实例，但是为了弥补这一点，它可以从求解器获取额外信息，这可能有助于它跳过许多中间问题。

核心驱动搜索可以访问冲突的核心。因此，如果求解器点击 UNSAT，它会得到一个子句来表达存在的矛盾。它现在可以使用该子句并使用它来排除一些加权软约束。通过检查给定该子句中哪些是不可满足的，它可以降低目标的上限，然后在该范围内再次尝试，直到达到 SAT。如果它知道（因为它采用了最大的可行目标）当前的上限就是目标。

### 概括

对于 MAX-SAT，通常将您的问题作为一系列 SAT 问题来解决。您可能还可以想到一些涉及这些的混合策略。然而，这个问题有一些不同的角度，将来可能会很有趣。

使用权重引导对所有目标值进行一次搜索的方法（如在混合整数线性规划中所做的那样）并不常见。这主要是因为 braniac MILP 方法无法在 SAT 中通常发现的大小的工业实例上运行，分配将如何影响软约束并不总是很明显，并且由宽松解决方案提供的分支启发式方法是在两个值之间进行选择时不太有用（MAX-SAT 可以表述为 0-1 整数线性规划）。

Jakob Nordström 目前围绕求解器 RoundingSAT 做了一些有趣的工作，它使用一种称为伪布尔编程的形式，可以编码与 0-1 ILP 和 MAX-SAT 相同的问题。PB 优化具有比 SAT 求解器使用的 CNF 更强的输入格式，是否可以用两项而不是指数项来编码鸽洞约束。然而，如果一个 PBO 求解器被赋予一个 CNF 作为输入，它就不能做任何更复杂的推理，最终成为一个 SAT 求解器，它认为每个冲突传播的时间更长。SAT由速度恶魔主导。

[Fahiem Bacchus（多伦多大学）的 SAT for Optimization](https://www.youtube.com/watch?v=6GiYmZB-eJw)是一个关于更多技术细节的较长形式的演示文稿。**

# python - 如何遍历一系列空间？

> ID：10602307
> 
> 赞同：0
> 
> 时间：2012-05-15T13:56:20.723
> 
> 标签：python, text, loops, justify

好的，所以我正在尝试获取输入文本文件并像 microsoft word 或任何其他文字处理器一样证明它的合理性。我已经得到文本来做字符对齐栏的最后一行。我试图弄清楚如何遍历最后一行中的每个空格并插入 a`' '`以使最后一个最后一个达到指定的长度。

如果我尝试：

```
for ' ' in new:
    insert(new,' ',find(' ')) 
```

本着 python 教给我的简单风格的精神，我得到了一个不可迭代的错误。因此代码循环中的while。但这只会在第一个空格处插入所有空格。

还有没有办法让这个程序通过文字而不是字符来证明？

我使用“Lorem ipsum ...”段落作为我的默认文本。

任何帮助表示赞赏。

完整代码：

```
inf = open('filein.txt', 'r')
of = open('fileout.txt', 'w')

inf.tell()

n = input('enter the number of characters per line: ')

def insert(original, new, pos):
  #Inserts new inside original at pos.
  return original[:pos] + new + original[pos:] 

try:
    print 'you entered {}\n'.format(int(n))
except:
    print 'there was an error'
    n = input('enter the number of characters per line: ')
else:
    new = inf.readline(n)
    def printn(l):

        print>>of, l+'\n'
        print 'printing to file',
        print '(first char: {} || last char: {})'.format(l[0],l[-1])

    while new != '': #multiple spaces present at EOF
        if new[0] != ' ': #check space at beginning of line
            if new[-1] != ' ': # check space at end of line
                while (len(new) < n):
                    new = insert(new,' ',(new.find(' ')))
                printn(new)

        elif new[0] == ' ':
            new = new.lstrip() #remove leading whitespace
            new = insert(new,' ',(new.find(' ')))
            while (len(new) < n):
                new = insert(new,' ',(new.find(' ')))
            printn(new)

        elif new[-1] == ' ':
            new = new.rstrip() #remove trailing whitespace
            new = insert(new, ' ',(new.rfind(' ')))
            while (len(new) < n):
                new = insert(new,' ',(new.rfind(' ')))
            printn(new)       

        new = inf.readline(n)

    print '\nclosing files...'
    inf.close()
    print 'input closed'
    of.close()
    print 'output closed' 
```

输入：

```
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. 
```

如果行长 n == 37

输出：

```
Lorem ipsum dolor sit amet, consectet
ur adipisicing elit, sed do eiusmod t
magna aliqua. Ut enim ad minim veniam
, quis nostrud exercitation ullamco l
consequat. Duis aute irure dolor in r
cillum dolore eu fugiat nulla pariatu
non proident, sunt in culpa qui offic
ia deserunt mollit anim id est laboru
m                                   . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:04:24.120

```
for ' ' in new:
    insert(new,' ',find(' ')) 
```

你累了分配给一个文字。像这样试试

```
for x in new:
    if x == ' ':
        insert(new, x, find(' ')) 
```

看看它是否有效？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:04:28.093

我在理解你想要做什么时遇到了一些麻烦......看起来你*可能*想要这个`textwrap`模块（[http://docs.python.org/library/textwrap.html](http://docs.python.org/library/textwrap.html)）。如果这不是您想要的，请告诉我，我会很乐意删除此答案...

**编辑**

这是做你想做的吗？

```
s="""Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute 
irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla 
pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
deserunt mollit anim id est laborum."""

import textwrap

print textwrap.fill(s,37) 
```

**编辑2**

在这种情况下，我会将您的字符串分解为每 N 个块长的子字符串，将这些字符串一个接一个地存储在一个列表中，然后我将在一天结束时 "\n".join(list_of_strings) 。不过，我不会对其进行编码，因为我怀疑这是家庭作业。

# delphi - 检查变量是否为零的最佳方法？

> ID：10602310
> 
> 赞同：26
> 
> 时间：2012-05-15T13:56:41.630
> 
> 标签：delphi, pointers

所有程序都应该做的一个常见条件是检查变量是否被赋值。

采取以下陈述：

**(1)**

```
if Assigned(Ptr) then
begin
  // do something
end; 
```

**(2)**

```
if Ptr <> nil then
begin
  // do something
end; 
```

`Assigned(Ptr)`和 和有什么不一样`Ptr <> nil`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-15T14:17:58.320

它通常是一样的......除了你检查一个功能......

```
function mfi: TObject;
begin
  Result := nil;
end;

procedure TForm1.btn1Click(Sender: TObject);
type
  TMyFunction = function: TObject of object;
var
  f: TMyFunction;
begin
  f := mfi;

  if Assigned(f) then
  begin
    ShowMessage('yes'); // TRUE
  end
  else
  begin
    ShowMessage('no');
  end;

  if f <> nil then
  begin
    ShowMessage('yes');
  end
  else
  begin
    ShowMessage('no');  // FALSE
  end;
end; 
```

使用第二种语法，它将检查函数的结果，而不是函数本身......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T13:59:57.783

就性能而言，没有区别。我个人更喜欢第二种形式，因为我发现人类可以更快地解析含义。

# c# - 将 sqldatasource 字符串插入参数的默认值设置为 "" 创建 NULL 错误

> ID：10602312
> 
> 赞同：1
> 
> 时间：2012-05-15T13:56:47.667
> 
> 标签：c#, asp.net, sql-server-2008

我有一个非空 nvarchar(MAX) 的插入参数，我使用以下方法设置它：

```
sds_accountDetail.InsertParameters["firstName"].DefaultValue = ""; 
```

但它仍然说*“无法将值NULL插入'firstName'列”*，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:09:24.663

通过在字符串中附加一个空格来“解决”它：

```
sds_accountDetail.InsertParameters["firstName"].DefaultValue = " "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T14:49:58.927

我只是在寻找这个问题的解决方案，我遇到了这个页面作为第一个谷歌结果。我知道这个问题是从 2012 年开始的，但我决定发帖是为了其他人也有同样的问题。解决这个问题的“正确”方法是将`ConvertEmptyStringToNull`问题的属性设置`Parameter`为`false`。它可以在 .aspx 文件中完成，如下所示：

```
<InsertParameters>
    <!-- (...) -->
    <asp:Parameter Name="firstName" ConvertEmptyStringToNull="false" />
    <!-- (...) -->
</InsertParameters> 
```

或在代码隐藏中，如下所示：

```
sds_accountDetail.InsertParameters["firstName"].ConvertEmptyStringToNull = false; 
```

# javascript - 如何使用 jquery 获取调用 div 的事件

> ID：10602318
> 
> 赞同：0
> 
> 时间：2012-05-15T13:56:59.770
> 
> 标签：javascript, jquery, fancybox

我有几个 div，单击它们会打开一个带有文本字段的花式框，该文本字段接收一条消息，然后保存表单。当我想重用它时，这不起作用，即对多个表单使用相同的函数和代码。它总是假装是第一个按钮。每次我使用它时，它运行回调函数的次数都会增加。有谁知道我做错了什么？我尝试添加 each()，但没有帮助。

我很抱歉简短的解释，看代码时更清楚了（注意：我使用console.log作为输出）：http: [//jsfiddle.net/EvYvc/11/](http://jsfiddle.net/EvYvc/11/)

基本上：我不知道是什么元素调用了 click 函数并获取它的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:01:17.340

我不是 FancyForm 插件方面的专家。但我认为您正在多次绑定 click 事件，因为您将它绑定在`beforeShow`处理程序中。

尝试自行绑定 click 事件：

[http://jsfiddle.net/h8sVY/](http://jsfiddle.net/h8sVY/)

```
$(".reason_submit2").each(function() {
    $(this).fancybox({
        openEffect: 'none',
        closeEffect: 'none',
        'modal': true
    });
});

$(".fancyConfirm_ok").click(function() {
    $.fancybox.close();
    // etc...
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:28:37.490

几个变化，

1.  您需要在 beforeShow 之外绑定点击处理程序
2.  我认为您无法识别`reason_submit2`在 beforeShow 中单击了哪个链接

或者，我为链接定义了 2 个 var 和一个单击处理程序，该处理程序将存储`name`和`form`，稍后将在`fancyConfirm_ok`

**完整代码：**

```
$(function() {
    var r2sName = '', r2sForm = '';
    $(".reason_submit2").fancybox({
        openEffect: 'none',
        closeEffect: 'none',
        'modal': true
    }).click(function () {
        var $this = $(this);
        r2sName = $this.data("name");
        r2sForm = $this.data("form");        
    });

    jQuery(".fancyConfirm_ok").click(function() {
        $.fancybox.close();

        console.log('form : ' + r2sForm);
        console.log('name : ' + r2sName);
        console.log('message : ' + $("[name=reason2]").val());

        $($(".reason_submit2").data("form")).append($("<input>").attr("type", "hidden").attr("name", "reason").val($("#reason").val()));
        $($(".reason_submit2").data("form")).append($("<input>").attr("type", "hidden").attr("name", $(".reason_submit2").data("name")));
        //document.forms[$(".reason_submit2").data("form")].submit();
    });
}); 
```

[**演示**](http://jsfiddle.net/skram/EvYvc/13/)

其他技巧是在 click 处理程序中向 clicked 链接添加一个类，并使用该类来获取`name`and `form`inside `fancyConfirm_ok`，但我个人觉得这样更好。

# php - PHP：用另一个关联多维数组的值构建数组

> ID：10602319
> 
> 赞同：1
> 
> 时间：2012-05-15T13:57:03.667
> 
> 标签：php, arrays, multidimensional-array, associative-array

我有一个数组，我们称之为 $menus，它包含如下内容：

```
Array(
    [Main] => Array (
        [menu_name] => Main
        [title] => Main Menu
    )
    [Nav] => Array (
        [menu_name] => Navigation
        [title] => Navigation Menu
    )
    [Custom] => Array (
        [menu_name] => User Custom Menu
        [title] => My Menu
    )
) 
```

……等等。

我需要创建一个只包含菜单名称列表的新数组。所以如果我要得到，比如说，只是导航菜单的名字，我会做

```
$module_menu_name = $menus [Nav][menu_name]; 
```

现在 $module_menu_name = "导航"，对吗？

但是如何获取关联数组中每个项目的 menu_name 呢？

就像是：

```
$menu_names = Array();
foreach($menus as $menu){
    $module_menu_names[] => ???['menu_name'];
} 
```

...这就是我卡住的地方。我在那些问号的地方放什么？这甚至是构建这个数组的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:00:35.113

```
$menu_names = Array();
foreach($menus as $menu){
    $menu_names[] = $menu['menu_name'];
} 
```

像这样？

在您的 foreach 中， $menu 返回第二级数组。要访问“menu_name”，只需获取第二级数组的值并将其放入您的 $menu_names 数组中。

**注意：**我将您的 $module_menu_names 数组更改为 $menu_names，因为这似乎就是您想要做的。如果没有，只需将 foreach 循环中的 $menu_names 更改为 $module_menu_names。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:02:12.757

```
$menu_names = Array();
foreach($menus as $menu){
    $menu_names[] = $menu['menu_name'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:02:17.173

你需要这个。

```
$array = array();
foreach($menus as $menu) {
    $array['nav']['menu_name'][] = $menu['menu_name'];
} 
```

因为您的数组中会有多个菜单，您可以像这样调用菜单

```
//this will return the first menu in an array
$module_menu_name = $array['nav']['menu_name'][0]; 
```

更改数字索引号，您可以从数组中获取所需的菜单。

# c# - 在 C# 中反序列化 XML 元素的存在以布尔

> ID：10602320
> 
> 赞同：13
> 
> 时间：2012-05-15T13:57:03.917
> 
> 标签：c#, xml, deserialization, xml-deserialization

我正在尝试将 Web 服务中的一些 XML 反序列化为 C# POCO。我已经为我需要的大多数属性都工作了，但是，我需要根据元素是否存在来设置 bool 属性，但似乎看不到如何做到这一点？

一个示例 XML 片段：

```
<someThing test="true">
    <someThingElse>1</someThingElse>
    <target/>
</someThing> 
```

一个示例 C# 类：

```
[Serializable, XmlRoot("someThing")]
public class Something
{
    [XmlAttribute("test")]
    public bool Test { get; set; }

    [XmlElement("someThingElse")]
    public int Else { get; set; }

    /// <summary>
    /// <c>true</c> if target element is present,
    /// otherwise, <c>false</c>.
    /// </summary>   
    [XmlElement("target")]
    public bool Target { get; set; }
} 
```

这是我正在处理的实际 XML 和对象层次结构的一个非常简化的示例，但演示了我想要实现的目标。

我读过的与反序列化空/空元素相关的所有其他问题似乎都涉及 using `Nullable<T>`，这不能满足我的需要。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T14:12:00.047

一种方法是使用不同的属性来获取元素的值，然后使用 Target 属性来获取该元素是否存在。像这样。

```
[XmlElement("target", IsNullable = true)]
public string TempProperty { get; set; }

[XmlIgnore]
public bool Target
{
    get
    {
        return this.TempProperty != null;
    }
} 
```

因为即使存在空元素，TempProperty 也不会为空，所以`true`如果`<target />`存在，Target 将返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:19:15.970

你能解释一下为什么你不想使用可为空的类型吗？
当你在你的 poco 中定义一个 int（而不是 int？）属性时，它并不真正代表底层的 xml，你只会得到这些变量的默认值。
如果您假设您不会在您的 xml 中获得值为 0 的空/空字符串或整数，您可以使用 Balthy 为您的每个属性建议的方法，或[使用此处描述的方法](https://stackoverflow.com/a/9673208/1394380)

一般来说，如果你真的希望你的类代表底层数据，我认为创建一个模式来描述你的 xml，并基于它生成类，同时使用可为空的类型是一个更好的主意。

# php - jquery-如何在准备好的文档中运行 ajax？

> ID：10602323
> 
> 赞同：2
> 
> 时间：2012-05-15T13:57:09.690
> 
> 标签：php, jquery

当我的页面加载但没有显示任何信息时，我正在尝试使用 ajax 加载信息，有人能发现我做错了什么吗？

```
$(document).ready(function (){
    $.ajax({                                      
      url: 'ajax_load.php',              
      type: "post",          
      data: "artist=<?php echo $artist; ?>",
      dataType: 'html',                
      beforeSend: function() {
          $('#current_page').append("loading..");
          },
      success: finished(html),
   });
});

function finished(result) {
    $('#current_page').append(result);
}; 
```

ajax_load.php 包含：

```
<?php

if(isset($_POST['artist'])) {
   $artist = $_POST['artist'];
   echo $artist;
}

echo "test";

?> 
```

页面的html部分很好

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T13:59:31.657

您需要将`success`选项的值更改为对函数的引用：

```
$(document).ready(function (){
    $.ajax({                                      
      url: 'ajax_load.php',              
      type: "post",          
      data: "artist=<?php echo $artist; ?>",
      dataType: 'html',                
      beforeSend: function() {
          $('#current_page').append("loading..");
          },
      success: finished //Change to this
   });
}); 
```

当前，您正在设置`success`为 的返回值`finished`，即`undefined`。如果您检查浏览器控制台，您可能会收到“未定义不是函数”的错误。

# c# - 从 ID 列表计算页码

> ID：10602326
> 
> 赞同：0
> 
> 时间：2012-05-15T13:57:24.320
> 
> 标签：c#

我正在分页一些数据，并且我有一个`long`s 列表，其中包含数据集中每个元素的 ID。现在，我有这样的事情：

```
List<long> TheListOfIDs = {23,435,6635,4224,546,756,23,542....}; 
```

`TheListOfIDs`实际上包含数千个 ID。每页数据包含 20 个元素。我正在编写一个函数，它接收 a`long`并返回 ID 所在的页码。例如，在示例数据中，ID 号`435`位于第二个位置，因此它是前 20 个元素的一部分，因此位于第 1 页。

如果我写

```
int ThePageNumber = TheListOfIDs.IndexOf(TheID) / 20; 
```

这在所有情况下都有效吗？

更新编辑：列表中的每个元素都是唯一的，并且函数中传递的 ID 肯定在列表中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:06:52.887

您应该检查 id 列表中不存在 id 的情况。这是Java代码：

```
public int getPage(List<Long> ids, Long id)
{
    int index = ids.indexOf(id);
    if (index == -1) 
        return -1; // the id does not exist in the list
    return (index / 20) + 1; // the page number should start from index 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:08:22.973

使用[MoreLinq](http://morelinq.googlecode.com/)。[批次](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/Batch.cs)：

```
var pagebatches = TheListOfIDs.Batch(20); 
```

pagebatch 的元素最多包含 20 个项目。每个项目对应一个页码。

pagebatches 的最后一个元素可能包含剩余的项目 (<=20)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:00:21.860

我建议编写不同案例的单元测试。我想到的是：

*   第一页的第一页
*   最后一页的最后
*   第一页中间
*   中间页的第一页
*   中间页最后
*   中间页中间

如果你的代码通过了这些测试，我认为你没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:21:51.933

你说位置 2 在第 1 页上，但是 2/20 = 0，所以不，它不会起作用。

但你可以做

```
int ThePageNumber = (TheListOfIDs.IndexOf(TheID) + NumIDsInEachPage - 1) / NumIDsInEachPage ; 
```

# flash - 删除火花按钮中的额外空间

> ID：10602333
> 
> 赞同：0
> 
> 时间：2012-05-15T13:57:40.377
> 
> 标签：flash, button, actionscript, flex-spark

如何删除火花按钮中的额外空间？

[![一只忙碌的猫](../Images/67a7c467e6b65a403e6e8e0a9ef150c3.png)](https://i.stack.imgur.com/XaTdJ.png)
[（来源：[turboimagehost.com](http://s4d3.turboimagehost.com/t/11861499_button.png)）]

所以我需要图像或文本完全从按钮的左边框开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:06:02.683

您需要为您的 Button 定义一个新的皮肤。CSS：

```
s|Button {
   skinClass:ClassReference("skins.MySkin");
} 
```

MySkin.mxml 将是一个副本`Flex\frameworks\projects\spark\src\spark\skins\spark\ButtonSkin.mxml`

然后，您可以更改或添加被调用对象的`left="10"`值并设置其值。`labelDisplay``BitmapImage``iconDisplay``left`

# tridion - Tridion OData/CDS 示例

> ID：10602334
> 
> 赞同：1
> 
> 时间：2012-05-15T13:57:40.563
> 
> 标签：tridion

有人可以指出一些使用 Tridion 的 OData 内容交付 Web 服务的示例代码吗？我在 sdltridionworld.com 上找到了几篇文章，但它们非常基础。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:18:25.357

尝试这个：

[http://blog.building-blocks.com/using-the-sdl-tridion-2011-odata-content-delivery-service-to-display-dynamic-content](http://blog.building-blocks.com/using-the-sdl-tridion-2011-odata-content-delivery-service-to-display-dynamic-content)

如果这没有帮助，正如其他人所建议的那样，请在您的问题中更具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:09:34.363

您能否更具体地回答您的问题？正如“Puf”所提到的，如果你能提供一些背景信息和你想要完成的事情，你可能会得到更精确的答案。

话虽如此，这里是您可以查看的示例代码（.net）的[链接。](http://blog.building-blocks.com/using-the-sdl-tridion-2011-odata-content-delivery-service-to-display-dynamic-content)

# java - 将额外数据从 Activity 传递到 Intent

> ID：10602335
> 
> 赞同：0
> 
> 时间：2012-05-15T13:57:42.830
> 
> 标签：java, android, android-intent, android-activity

我正在调用一个`Activity`using an `Intent`，并且我需要`Activity`在初始化时将变量传递给那个。在 iOS 上，您可以使用该`initWithNibName`方法使用自定义初始化。如何在 Android 上实现类似的事情？

这是我创建一个`Intent`...的代码

```
Intent myIntent = new Intent(webPush.this, webPushActivity.class);
startActivity(myIntent); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:01:15.903

```
Intent myIntent = new Intent(webPush.this, webPushActivity.class);
myIntent.putExtra("mystring",strValue)' <<---put String here 
startActivity(myIntent); 
```

在第二个活动中......

```
String str = getIntent.getExtras().getString("mystring");<<get string in second class 
```

并检查这个

[如何在 Android 应用程序的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:01:24.283

您可以将额外的数据放入 Intent...

```
myIntent.putExtra("exampleString","This is some extra data");
myIntent.putExtra("exampleNumber",1234); 
```

当您调用 时`Intent`，它会启动`Activity`。`Activity`在, like的主要方法之一中`onCreate()`，您可以访问`Intent`并从中获取额外内容，就像这样......

```
Intent callingIntent = getIntent();
String exampleString = callingIntent.getStringExtra("exampleString");
int exampleNumber = callingIntent.getIntExtra("exampleNumber"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:01:17.503

您可以为意图设置额外内容：

```
myIntent.putStringExtra("First key", 1);
myIntent.putStringExtra("Second key", "some string"); 
```

然后在新的活动中得到它

```
Int extraInt = getIntent().getIntExtra("First key");    
String extraString = getIntent().getStringExtra("Second key"); 
```

在[Intent 文档中查看更多信息](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:02:29.980

这可以通过额外的意图来完成。例如：

```
int variable = 6;
Intent myIntent = new Intent(webPush.this, webPushActivity.class);
myIntent.PutExtra("stringLabel", variable);
startActivity(myIntent); 
```

# java - 如何在 Hibernate 4 实体上设置事件侦听器？

> ID：10602342
> 
> 赞同：3
> 
> 时间：2012-05-15T13:58:08.087
> 
> 标签：java, spring, hibernate, listener

我正在使用 Spring 3.1.0.RELEASE 和 Hibernate 4.0.1.Final。我想在从数据库加载实体 bean 时调用它的事件侦听器，但我不知道应该使用什么事件。我像这样在我的 DAO 中加载我的实体

```
@Repository("eventFeedsDao")
public class EventFeedsDaoImpl implements EventFeedsDao {

    ...
    @Autowired
    private SessionFactory sessionFactory;

    ...

    @Override
    public EventFeed findById(final Integer id) { 
        EventFeed eventFeed = null;
        final Session session = sessionFactory.getCurrentSession();
        final Criteria crit = session.createCriteria(EventFeed.class).add(Restrictions.eq("id", id));
        final List<EventFeed> results = crit.list();
        if (results != null && results.size() > 0) { 
            eventFeed = results.get(0);
        }   // if
        return eventFeed;       
    }   // findById 
```

这是我尝试设置事件接线的方式...

```
@Component
public class HibernateEventWiring {

    @Autowired
    private SessionFactory sessionFactory;

    @Autowired
    private EventMavenLoadListener listener;

    @PostConstruct
    public void registerListeners() {
        EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory)
            .getServiceRegistry().getService(EventListenerRegistry.class);
        registry.getEventListenerGroup(EventType.LOAD).appendListener(listener);
    }
} 
```

我的听众班级如下......

```
@Component
public class EventMavenLoadListener implements LoadEventListener {

    ...

    @Override
    public void onLoad(final LoadEvent event, final LoadType loadType) throws HibernateException {
        if(EventFeed.class.getName().equals(event.getEntityClassName())){
            EventFeed entity = (EventFeed) event.getInstanceToLoad();
            entity.setNetUtilsService(netUtilsService);
        }   // if
    }

} 
```

但永远不会调用“onLoad”事件。我究竟做错了什么？我应该使用另一个事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:58:26.053

出于某种我仍然无法理解的原因，EventType.PRE_LOAD 事件类型是要走的路。这行得通。

```
@Component
public class HibernateEventWiring {

    @Autowired
    private SessionFactory sessionFactory;

    @Autowired
    private EventMavenLoadListener listener;

    @PostConstruct
    public void registerListeners() {
        final EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory)
                .getServiceRegistry().getService(EventListenerRegistry.class);
        registry.getEventListenerGroup(EventType.PRE_LOAD)
                .appendListener((PreLoadEventListener) listener);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:41:59.750

load 事件仅在单独加载实体时触发（session.get、初始化代理、获取渴望一对一的关联）。

然而，加载前和加载后事件遵循 JPA 定义的行为，并在加载实体数据之前和之后发生，无论“数据加载”如何发生。

这是一个坏名声冲突的案例。

顺便说一句，Hibernate 4 中指定事件侦听器的首选方法是使用 org.hibernate.integrator.spi.Integrator。请参阅[http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#integrators](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#integrators)

# drupal-7 - 覆盖自定义内容页面标记 Drupal 7

> ID：10602346
> 
> 赞同：0
> 
> 时间：2012-05-15T13:58:15.087
> 
> 标签：drupal-7, overriding, content-type

虽然我在这里看到了关于这个主题的一些“干净”的答案，但在我的情况下它仍然不起作用，如下所示：在具有完全自定义主题的 Drupal 7 中，我创建了一个带有机器名称的自定义内容cco_product。我想覆盖为此内容类型生成的页面的页面标记。根据文档，我已经尝试过基于 /module/system/page.tpl.php 的 tmemes 文件夹中的 page--cco_product.tpl.php，但是我在此文件顶部的 Hello world 没有显示。感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:56:22.620

首先，尝试清理缓存，如果没有帮助，我可以建议您查看页面的模板数组。也许您的模块之一或您的自定义主题会覆盖这样的模板数组：

```
function MYTHEME_preprocess_page(&$variables, $hook) {   
   //Add multiple suggestions for pages based on Node
   if(arg(1) == 3) {  //For node 3
    $variables['theme_hook_suggestions'][] =  'page__contact';
   } if(arg(1) == 4) {   //For node 4
    $variables['theme_hook_suggestions'][] =  'page__about';
   }
} 
```

# java - 如何使用两个项目共享的常量？

> ID：10602347
> 
> 赞同：1
> 
> 时间：2012-05-15T13:58:16.417
> 
> 标签：java, android, eclipse

我创建了一个相互通信的服务和一个应用程序：它们位于不同的包中，并通过 IPC（特别是通过 AIDL）进行通信。在通信期间交换的对象是`Bundle`类型的，其中每个字段都与一个`String`键相关联：因此，服务和应用程序都必须“共享”（即使用）相同的键。

因此，我考虑定义一些常量来使用上述键，例如在一个类中，然后在服务和应用程序中使用这些常量。我想到的唯一选择是创建第三个项目并在第三个项目中定义具有公共常量的类：只需将此项目导出为 jar 文件并将其添加到其他两个项目（即服务和应用程序）。

还有其他选择吗？

# dojo - dijit.form.FilteringSelect css

> ID：10602358
> 
> 赞同：0
> 
> 时间：2012-05-15T13:58:42.097
> 
> 标签：dojo, dijit.form

我想不通。了解如何在 dijit.form.FilteringSelect 下拉框中设置文本样式。默认情况下，文本是黑色的，背景也是黑色的，所以你只能在悬停时看到文本（白色悬停框）。

我想将文本更改为白色，然后悬停黑色。

这是我的html

```
<select dojoType="dijit.form.FilteringSelect" id="mapLayout" name="mapLayout">
    <option value="Landscape8x11" selected="selected">8 1/2 x 11 Landscape</option>
    <option value="Portrait8x11">8 1/2 x 11 Portrait</option>
</select> 
```

这是我的CSS（不起作用）

```
#mapLayout{
    color: #ffffff;
}; 
```

再试一次（不起作用）

```
.claro .dijitTooltipContainer .dijitInputInner{
    color: #ffffff !important;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:17:51.790

试试这个

```
.dijitComboBoxMenu .dijitMenuItem {
 color: #FFFFFF;
}

.dijitComboBoxMenu .dijitMenuItemHover {
 color: #000000;
} 
```

# javascript - 如何使用基于另一个下拉列表的数组填充下拉列表，在MVC中使用jquery

> ID：10602362
> 
> 赞同：0
> 
> 时间：2012-05-15T13:59:02.130
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, drop-down-menu

我有两个`dropdownlistfor`，第二个应该根据第一个的值填充一个数组`dropdownlist`

我试图在[这里遵循 Darins Answer，](https://stackoverflow.com/questions/4458970/cascading-drop-downs-in-mvc-3-razor-view/4459084#4459084)但我无法让第二个`dropdownlistfor`工作并充满我的数组。我的第二个`Dropdownlisfor`没有被填满，相反，它消失了。

这是我使用 JSON 的脚本

```
 <script type="text/javascript">
    $(function () {
        $('#teamname').change(function () {
            var selectednametext = $(this).find("option:selected").text();
            $.getJSON('@Url.Action("TeamName")', { TeamName: selectednametext }, function (persons) {
                var selectedpersons = $('#personname');
                selectedpersons.empty();
                $.each(persons, function (index, person) {
                    selectedpersons.append(
                    $('<option/>')
                        .attr('value', person.name)
                        .text(person.name)
                );
            });
        });
    });
});
</script> 
```

这是我`DropdownListfor`的看法：

```
<p>Team</p>
        <div class="editor-field" id="teamname">
            @Html.DropDownListFor(model => model.TeamName, Model.Teams, "Select Team", new { @class = "selectstyle" })
            @Html.ValidationMessageFor(model => model.TeamName)
        </div>
        <p>Person</p>
        <div class="editor-field" id="personname">
            @Html.DropDownListFor(model => model.PersonName, Model.Person, "Select Person", new { @class = "selectstyle", @disabled = "disabled" })
            @Html.ValidationMessageFor(model => model.PersonName) 
```

这就是我的数组是如何填充到我的控制器中的：

```
public ActionResult TeamName(string teamname)
    {
        if (teamname == "Team A")
        {
            System.Collections.ArrayList teamArray = new System.Collections.ArrayList();

            new ConsultantContext(new Uri("http://foo/persons"), ConsultantContext.Format.Json)
            .Consultant
            .Where(x => x.Team == "Team A")
            .OrderBy(x => x.DisplayName)
            .ToList()
            .ForEach(item =>
            {
            teamArray.Add(item.DisplayName);
            });

            return Json(teamArray, JsonRequestBehavior.AllowGet);   
        }// and same goes with arrays for Team B and Team C 
```

感谢您提供各种帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:03:21.933

`$('#teamname')`与您的下拉列表的 id 不匹配。确保您在标记中分配了相同的 id：

```
@Html.DropDownListFor(
    model => model.TeamName, 
    Model.Teams, 
    "Select Team", 
    new { id = "teamname", @class = "selectstyle" }
) 
```

选择器也是如此`$('#personname');`。您应该修复您的标记，以便这些选择器对应于您的 DOM 元素。

还有你为什么用`ArrayList`？那是史前的。使用强类型集合：

```
public ActionResult TeamName(string teamname)
{
    var consultants = new ConsultantContext(
        new Uri("http://foo/persons"), 
        ConsultantContext.Format.Json
    )
    .Consultant
    .Where(x => x.Team == teamname)
    .OrderBy(x => x.DisplayName)
    .ToList()
    .Select(x => new 
    {
        name = x.DisplayName
    });

    return Json(consultants, JsonRequestBehavior.AllowGet);   
} 
```

# html - 在 DotNetNuke 中兼容 X-UA

> ID：10602364
> 
> 赞同：2
> 
> 时间：2012-05-15T13:59:14.687
> 
> 标签：html, internet-explorer, dotnetnuke, x-ua-compatible

有没有办法在 DotNetNuke 站点的 .ascx 中实现 X-UA 兼容：IE=edge,chrome=1 行代码？或者还有其他地方可以实现吗？

目前，我有：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

在 DNN 声明/服务器调用下。这是正确的吗？

谢谢！

编辑：

事实证明，添加

```
<![CDATA[<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" >]]> 
```

到 doctype.xml 文件将起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:14:28.177

您可以使用[40Fingers Skin Helper](http://stylehelper.codeplex.com/)将该`<meta>`标签添加到页面头部。安装后，您将在页面上注册它，如下所示：

```
<%@ Register TagPrefix="fortyfingers" TagName="STYLEHELPER" Src="~/DesktopModules/40Fingers/SkinObjects/StyleHelper/StyleHelper.ascx" %> 
```

然后您可以将其添加到您的皮肤中，如下所示：

```
<fortyfingers:STYLEHELPER AddToHead='<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">' runat="server" /> 
```

DNN 也有自己的`Meta`皮肤对象，但目前[它只公开`name`和`content`，而不是`http-equiv`](http://support.dotnetnuke.com/Default.aspx?p=2&i=18662)（类似地，如果您需要添加名称/内容元标记，皮肤助手`AddMetaTags`也提供了一个属性）。

# jquery - 弹跳div不起作用

> ID：10602365
> 
> 赞同：1
> 
> 时间：2012-05-15T13:59:17.293
> 
> 标签：jquery, jquery-ui, slide, bounce

在我的应用程序中，我有一个隐藏到 90% 的 div。如果单击您看到的部分，则会显示 div 的其余部分。div 向下滑动 200px，当它全部向下时，我希望它反弹几次。下面是代码，但由于某种原因，弹跳不起作用。

如果有人可以帮助我，我将不胜感激！

```
 var boxDown = false;

    $('#uploadContainer').click(function(){
        if (boxDown === false) {
            $(this).animate({
                'marginTop': "+200px"
            });
            $(this).effect("bounce", { times:3 }, 300);

            boxDown = true;
        }
        else {
            $(this).animate({
                'marginTop': "-=200px"
            });

            boxDown = false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:04:19.390

就个人而言，我会使用 jQuery 缓动功能： http: [//gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

看`easeOutBounce`那个

你像这样使用它：

```
 $('#my-item').animate(
    { 
        'margin-top': -110
    }, 1000, 'easeOutBounce'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:11:03.630

不确定这是否是您想要的效果，它对我来说是弹跳的：http: [//jsfiddle.net/drAXv/](http://jsfiddle.net/drAXv/)

我猜你没有实现[.ready()](http://api.jquery.com/ready/)函数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:11:00.337

**它应该像预期的那样工作，神圣的红胡子......**

查看描述您的代码的这个[jsFiddle](http://jsfiddle.net/veNwd/13/)。所有工作都按预期进行。

也许你没有加载 jQuery UI？

# php - 在超过 1000 行的结果集上获取 HTTP 500 内部服务器错误、Web 服务 PHP/NuSOAP

> ID：10602370
> 
> 赞同：0
> 
> 时间：2012-05-15T13:59:28.160
> 
> 标签：php, web-services, resultset, nusoap

我用两种方法处理一个小型 web 服务，一切都运行良好，直到 resulset 返回超过 1000 行。

我知道我必须在这里放一些代码，但是项目非常机密，所以我只放了基本的 Nosuap 对象参数。

```
$namespace = 'urn:server';
$server = new nusoap_server;
$server->configureWSDL('SOME_NAME', $namespace);
$server->wsdl->schemaTargetNamespace = $namespace;
$server->register('ws_consultar_reclamos',
array('fechas' => 'tns:fechas_array'),
array('return' => 'tns:reclamacion_array'),
$namespace,
'urn:server#ws_consultar_reclamos',
'rpc',
'encoded'); 
```

我再说一遍，在结果集超过 1000 行之前，一切都运行良好。

我将 PHP 与 NuSOAP 一起使用。

我必须更改任何配置以接受更大的结果集吗？

请帮助我，我的时间不多了。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:15:18.493

如果您还没有这样做，请激活日志记录：

```
error_reporting  =  E_ALL
log_errors = On 
```

您是否尝试过增加 php.ini 中的内存限制？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:50:36.933

脚本可能会超时。也许尝试将脚本超时设置得更高

```
set_time_limit(); 
```

[设置时间限制（）](http://php.net/manual/en/function.set-time-limit.php)

或在您的 php.ini 文件中修改它。它的默认值为 30，因此如果您将其更改为 60 并且突然 1000 行工作，这可能是您的问题。5 分钟应该是一个安全的赌注，但如果让用户等待那么久，那就祝你好运了。

# python - 整数和字符串冲突

> ID：10602373
> 
> 赞同：0
> 
> 时间：2012-05-15T13:59:31.763
> 
> 标签：python, string, loops, integer, raw-input

目前，我正在处理一项任务，该任务要求我创建一个程序，用户在该程序中输入一个 0-4 之间的数字。然后程序会检查用户输入的数字并输出特定的字符串。比如用户输入4，程序会输出“80或以上：Level 4”

问题是用户也应该能够退出程序。我决定创建程序，所以如果用户输入的内容不是空白的（当输入！=“”:) 程序将运行，但如果他们决定点击进入程序将结束。

这是我到目前为止提出的代码：

```
def get_level():
    level = raw_input("Enter a number from 0-4 (Press <Enter> to quit): ")
    return level

def check_mark(level):
    if int(level) == 4:
        print "80 or above: Level 4"
    elif int(level) == 3:
        print "70 - 79: Level 3"
    elif int(level) == 2:
        print "60 - 69: Level 2"
    elif int(level) == 1:
        print "50 - 59: Level 1"
    elif int(level) == 0:
        print "Below 50: Level 0"
    else:
        print "ERROR: out of range"

def output(level):
   while level != "":
        level = raw_input("Enter a number from 0-4 (Press <Enter> to quit): ")
        check_mark(level)
        print

def main():
    user_level = get_level()
    user_mark = check_mark(user_level)
    print
    program_output = output(user_level)

main() 
```

我很清楚这个问题与 raw_input 只接受字符串这一事实有关，这就是激活“while level！=”“：”语句的原因。我尝试通过在每个级别之前放置 int() 运算符来解决这个问题。问题是如果用户输入空白，它会与输入冲突，因为它会检查输入是否为整数。反正就是这样。

所以我希望有人能指导我找到解决这个问题的方法。将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:03:01.787

您可能想要下一个循环代码：

```
def output(level):
   level = raw_input("Enter a number from 0-4 (Press <Enter> to quit): ")
   while level != "":
        check_mark(level)
        level = raw_input("\nEnter a number from 0-4 (Press <Enter> to quit): ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:05:48.613

我不认为验证输入有任何捷径。所以用户可以输入“”或整数。如果用户输入字母会发生什么？

我会验证所有输入以进行相应处理，这样程序就不会中断

```
# check for blank
if level == '':
  # exit for user

# validate input if not exit
try:
  level_int = int(level)
except ValueErrror:
  # integer not inputed

if not (0 <= level_int <= 4):
  # check that input is between 0  4
  # out of range 
```

`check_mark`或者您可以在调用时检查预期`main`

# c# - 在 LINQ 语句中出现“枚举未产生结果”错误？

> ID：10602374
> 
> 赞同：0
> 
> 时间：2012-05-15T13:59:34.257
> 
> 标签：c#, linq, entity-framework-4

我在中继器中有一个中继器。我在父中继器的`ItemDataBound`事件上绑定内部中继器`myEventDetails list()`。我正在`myEventDetails list()`里面`page_load`。

所以当我使用以下 linq 查询时，我得到了

> “枚举没有结果”

并且内部中继器具有空值。

```
protected void parentRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{

        Repeater inner = (Repeater)(e.Item.FindControl("innerRepeater"));

        var allEvents = from x in myEventDetails
                   where x.event_name == "test"
                   select new
                   {
                       EventName = x.event_name,
                       EventID = x.event_id
                   };

        inner.DataSource = allEvents;
        inner.DataBind();
    }
} 
```

当我调试时，我将值输入到`myEventDetails list()`. 所以它不是空的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:01:09.413

`event_name == "test"`它表示您的`myEventDetails`收藏中没有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:49:14.583

是因为您没有匹配正确的文本吗？尝试使用 ToLower

```
 where x.event_name.ToLower() == "test" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:04:10.173

尝试调用`ToList()`：

```
inner.DataSource = allEvents.ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:18:31.757

myEventDetails 来自哪里？它是类上的字段/属性吗？

您可以将 allEvents.ToList() 分配给另一个变量，看看是否有帮助？我之前遇到过类似这样的奇怪问题，似乎可以通过这样做来解决......我从来没有完全弄清楚为什么，但值得一试。

# javascript - Validate.js - 常规类型错误=“文本”

> ID：10602377
> 
> 赞同：0
> 
> 时间：2012-05-15T13:59:38.243
> 
> 标签：javascript, jquery, forms, validation

我在使用 validate.js 时遇到问题

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

所有输入都完美无缺，例如`<input type="email" class="required" />`

我的问题是

我想正常显示验证， `<input type="text" class="required" />`因此如果用户选择并离开输入，***则会显示 this field is required***。

我都试过`$("#confirm_add").validate();`了

`$("#confirm_add").validate({`
`rules: {`
`user[first_name]: "required"`
`}`
`});`

我可以实现这种效果的唯一方法是在输入中包含 minlength="2" ，但我不想使用它，

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:47:11.697

[如此处](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)所述，您需要用括号括起来的字段名称。如果你有这个 html：

```
<input type="text" name="user[first_name]" /> 
```

你需要在你的规则中：

```
...
  'user[first_name]': {
      required: true
  }
... 
```

至于让它立即显示验证的问题，默认情况下它不会那样工作，所以你必须在之后添加代码来处理它，使用[valid](http://docs.jquery.com/Plugins/Validation/valid)方法：

```
$('#firstname').blur(function(){
    $(this).valid();
}); 
```

在这里查看所有操作：http: [//jsfiddle.net/ryleyb/NVZr8/](http://jsfiddle.net/ryleyb/NVZr8/)

请注意，如果您所做的只是设置`required`，则没有理由使用规则对象，只需`class="required"`在输入中设置。

# model-view-controller - knockout.js - 从模型的子列表中添加/删除项目

> ID：10602378
> 
> 赞同：0
> 
> 时间：2012-05-15T13:59:38.733
> 
> 标签：model-view-controller, foreach, knockout.js, ko.observablearray

我有一个 foreach 模板在页面上显示作业列表。在每项工作中，我都有一份工作说明清单。我在设置适当的 observable 以允许在视图中更新工作说明时遇到问题。

这是 jsFiddle 的链接：http: [//jsfiddle.net/b3B8p/](http://jsfiddle.net/b3B8p/)

或者，这里是它的代码。我不确定是将子列表的可观察数组放入 Job 对象本身还是放入 View ...

```
<div data-bind="foreach: jobs">
    <div>
        <div class="jobContainer">
            <label data-bind="text: JobTitle"></label> 
            <label data-bind="text: CompanyName"></label>
            <div class="jobDetails" data-bind="visible: expanded">
                <label data-bind="text: City"></label>
                <label data-bind="text: State"></label>
                <div data-bind="foreach: Notes">
                    <label data-bind="text: Text"></label>               
                </div> 
            </div>                           
        <div>
        <a href="#" data-bind="click: $parent.toggle, text: linkLabel">Expand</a> 
        <a href="#" data-bind="click: $parent.addNote">Add Note</a>  
    </div>    
</div>    

function JobNote() {
    this.Text = "some text!";       
}

function Job() {
    this.JobTitle = ko.observable("some job");
    this.CompanyName = ko.observable("some company");
    this.City = ko.observable("some city");
    this.State = ko.observable("some state");
    this.Notes = ko.observableArray([
       new JobNote(),
       new JobNote(),       
    ]);

    this.someValue = ko.observable().extend({ defaultIfNull: "some default" });

    this.expanded = ko.observable(false);

    this.linkLabel = ko.computed(function () {
        return this.expanded() ? "collapse" : "expand";
    }, this);      
};

var viewModel = function () {
    this.jobs= ko.observableArray([
        new Job(),
        new Job(),
        new Job(),
        new Job(),
        new Job(),
        new Job(),
        new Job(),
        new Job(),
        new Job(),        
        new Job(),
    ]);

    this.toggle = function (item) {
        item.expanded(!item.expanded());
    }

    this.addNote = function(job) {
         // what should go in here?
    }    
};

ko.applyBindings(new viewModel());​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:41:31.177

正如 Niko 在这种情况下所说，我会将方法添加到类中。像这样。

```
function Job() {
    var self = this;

    this.JobTitle = ko.observable("some job");
    this.CompanyName = ko.observable("some company");
    this.City = ko.observable("some city");
    this.State = ko.observable("some state");

    this.Notes = ko.observableArray([
       new JobNote(),
       new JobNote(),       
    ]);

    this.someValue = ko.observable().extend({ defaultIfNull: "some default" });

    this.expanded = ko.observable(false);

    this.linkLabel = ko.computed(function () {
        return this.expanded() ? "collapse" : "expand";
    }, this);   

    this.toggle = function () {
        self.expanded(!self.expanded());
    };

    this.addNote = function () {
        self.Notes.push(new JobNote());
    }    
}; 
```

这使一切都保持良好和封装。

希望这可以帮助。

# java - 替换列表中的对象 when Object is a List? Java Hello again stackoverflow, I have a question concerning List of Objects. I have tried out writing some things, but can't find it though. How do I find an Object in a list of objects, w 问问题 问问题 2012-05-15T14:00:02.707 605 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Hello again stackoverflow, I have a question concerning List of Objects. I have tried out writing some things, but can't find it though. How do I find an Object in a list of objects, when these objects are lists of its own? this is what i have so far: Recipe is a List of: {modification[], ingredients[], recipeBookName, recipeName} public void removeFromBook(Recipe recipeName) { recipes = getRecipes(); emptyRecipe = getEmptyPage(recipeBookName); Now, I want to replace a Recipe which has a recipeName, by the emptyRecipe. I think it will be something like: for(r in recipes) { if(r.recipeName == recipeName) { list.replace(Recipe, emptyRecipe) } else { } } any ideas? :) here's my constructor for the Recipe class: public String[] modifications; public String[] ingredients; public String recipeName; public String partOfRecipeBook; public Recipe(String recipeName, String[] modifications, String[] ingredients, String recipeBookName){ setRecipeModifications(modifications); setRecipeIngredients(ingredients); setRecipeName(recipeName); setRecipeBookName(recipeBookName); } Your approach looks fine, except that you should compare strings with equals: if(r.recipeName.equals(recipeName)) { Now an even easier way would be to store your recipes in a Map: Map <string, recipe="">recipes = new HashMap<string, recipe="">(); recipes.put("Pizza with Lobster", new Recipe()); when you want to replace a recipe: recipes.put("Pizza with Lobster", emptyRecipe); and the old recipe has been replaced. javalistobject 4 2 回答 2 This answer is useful 2 Using a List with Objects in it (of which some are arrays) is not the best way it would be better to define a new object Recipe and use that. public class Recipe { private List <ingredient>ingredients; private List <modification>modifications; private String bookName; private String book; } Then replacing in ingredients is a lot simpler. e.g. give recipe a function like public void replaceIngredent(Ingredient oldIngredient, Ingredient newIngredient) { int index = ingredients.indexOf(oldIngredient); if (index != -1) { ingredients.remove(index); ingredients.add(index, newIngredient); } } 于 2012-05-15T14:10:18.563 回答 This answer is useful 2 您的方法看起来不错，除了您应该将字符串与等号进行比较： if(r.recipeName.equals(recipeName)) { 现在更简单的方法是将您的食谱存储在地图中： Map <string, recipe="">recipes = new HashMap<string, recipe="">(); recipes.put("Pizza with Lobster", new Recipe()); 当您想替换配方时： recipes.put("Pizza with Lobster", emptyRecipe); 旧配方已被替换。 于 2012-05-15T14:05:28.810 回答 Related 0 jquery - Jquery Mobile - 多页 - getElementById 不起作用 2 android - 巨大的形式：我如何在Android中做到这一点？ 1 c# - 超链接上的阴影效果 1 maven - Twitter4j 通过 maven - 缺少类 1 ios - 我可以将图像保存到 Ipad 上的本地照片目录吗？ 5 javascript - 带有 Infowindows 的 Google Maps API 多个标记 1 perl - 使用 perl DBI 和 postgresql 的连接池 2 java - 如何创建 RHQ 插件？ 2 python - 不使用 sudo 运行特定进程 1 javascript - 使用PhoneGap 将数据从Symbian 设备传输到服务器？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string,></string,></modification></ingredient></string,></string,>

> ID：10602385
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, list, object

Hello again stackoverflow, I have a question concerning List of Objects.

I have tried out writing some things, but can't find it though. How do I find an Object in a list of objects, when these objects are lists of its own?

this is what i have so far:

Recipe is a List of: {modification[], ingredients[], recipeBookName, recipeName}

```
public void removeFromBook(Recipe recipeName) {
    recipes = getRecipes();
    emptyRecipe = getEmptyPage(recipeBookName); 
```

Now, I want to replace a Recipe which has a recipeName, by the emptyRecipe. I think it will be something like:

```
for(r in recipes) {
    if(r.recipeName == recipeName) {
        list.replace(Recipe, emptyRecipe)
    } else {

    }
} 
```

any ideas? :)

here's my constructor for the Recipe class:

```
 public String[] modifications;
public String[] ingredients;
public String recipeName;
public String partOfRecipeBook;

public Recipe(String recipeName, String[] modifications, String[] ingredients, String recipeBookName){
    setRecipeModifications(modifications);
    setRecipeIngredients(ingredients);
    setRecipeName(recipeName);
    setRecipeBookName(recipeBookName);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:10:18.563

Using a List with Objects in it (of which some are arrays) is not the best way it would be better to define a new object Recipe and use that.

```
public class Recipe {
    private List<Ingredient> ingredients;
    private List<Modification> modifications;
    private String bookName;
    private String book;
} 
```

Then replacing in ingredients is a lot simpler. e.g. give recipe a function like

```
public void replaceIngredent(Ingredient oldIngredient, Ingredient newIngredient) {
    int index = ingredients.indexOf(oldIngredient);
    if (index != -1) {
        ingredients.remove(index);
        ingredients.add(index, newIngredient);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:05:28.810

您的方法看起来不错，除了您应该将字符串与等号进行比较：

```
if(r.recipeName.equals(recipeName)) { 
```

现在更简单的方法是将您的食谱存储在地图中：

```
Map<String, Recipe> recipes = new HashMap<String, Recipe>();
recipes.put("Pizza with Lobster", new Recipe()); 
```

当您想替换配方时：

```
recipes.put("Pizza with Lobster", emptyRecipe); 
```

旧配方已被替换。

# c# - StructureMap 和泛型 - 如何指定默认构造函数？

> ID：10602386
> 
> 赞同：3
> 
> 时间：2012-05-15T14:00:03.493
> 
> 标签：c#, generics, inversion-of-control, structuremap

我有一个通用接口：

```
public interface IRepository<T> { ... } 
```

我有一个这样的实现：

```
public class Repository<T> {
    public Repository<T>() { ... }
} 
```

StructureMap (v 2.6.3) 配置如下：

```
For(typeof(IRepository<>)).Use(typeof(Repository<>)); 
```

当我尝试`IRepository<Something>`从 StructureMap 中取出一个时，我得到了`Repository<Something>`预期的结果。**万岁！**

现在我添加了第二个构造函数，实现如下所示：

```
public class Repository<T> {
    public Repository<T>() { ... }
    public Repository<T>(string database) { ... }
} 
```

当我尝试获取`IRepository<Something>`now 时，我得到一个异常，因为它默认尝试使用带有参数的新构造函数。**嘘！**

如何更改我的 StructureMap 配置，以便它知道使用无参数构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T11:44:44.707

您可以通过使用 [DefaultConstructor] 属性标记您希望 StructureMap 使用的构造函数来实现此目的。正如您在[StructureMap 文档](http://docs.structuremap.net/ConstructorAndSetterInjection.htm)中看到的那样，默认情况下它是贪婪的。

# objective-c - 保存带有照片的字符串并返回它们

> ID：10602387
> 
> 赞同：0
> 
> 时间：2012-05-15T14:00:12.140
> 
> 标签：objective-c, uiimagepickercontroller, asihttprequest

我在图像视图顶部有一个标签。每次有人按下按钮时，标签都会填充来自服务器的字符串。我有一个按钮，调用选择器从选择器中选择一张照片，但标签显然保持为空..

我怎样才能确保字符串将与照片一起保存，当我用选择器调用它时，它会再次填充标签......

我需要一些提示/帮助...

我正在使用 ASIHTTPREQUEST 异步调用来填充标签...所以它不会挂断...这是最佳做法对吗？还是我应该使用带有格式的 nsurl 和 nsstring ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:02:00.497

您可以使用 imageview 的标签并将每个字符串与 image view 的标签一起存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:10:39.853

这里有些不清楚：-

1>从客户端您可以向服务器发送一个请求，其中包含已更改的图像并获取相应的字符串（在表中您可能必须为每个图像存储字符串）。

2>您可以使用字典来存储每个相应图像名称的键（字符串）并将其存储在字典中，如果您想要持久存储，您可以使用 coredata 或 sqlite。

为了确保图像和字符串同时显示，您可以显示一个活动指示器。

# c# - .net 对象大小填充？

> ID：10602388
> 
> 赞同：10
> 
> 时间：2012-05-15T14:00:14.517
> 
> 标签：c#, .net, .net-4.0, clr

[msdn](http://msdn.microsoft.com/en-us/library/eahchzkf%28v=vs.100%29.aspx)说

> sizeof 运算符只能在不安全的代码块中使用。虽然可以使用 Marshal.SizeOf 方法，但此方法返回的值并不总是与 sizeof 返回的值相同。

和

> Marshal.SizeOf 返回类型被编组后的大小，而 sizeof 返回由公共语言运行时分配的大小，包括任何**填充**。

我曾经读过这本书：*c# via clr（第 522 页）*

那 ： ![在此处输入图像描述](../Images/a513d6cc9853bc94eed51d6c40a13a7e.png)

问题 ：

1）这里提到的填充：

![在此处输入图像描述](../Images/6e111d4953ff9a7d77738f1afb7aeb77.png)

和书中提到的**一样吗？**

和

2）如果我有对象类型`Person`- 我怎么知道它在内存中的**真实大小？**

## 编辑-我为什么需要那个？

请[注意](http://msdn.microsoft.com/en-us/library/dd997372.aspx)：

他们有阅读记录的样本：

```
 using (var accessor = mmf.CreateViewAccessor(offset, length))
            {

                int colorSize = Marshal.SizeOf(typeof(MyColor)); //<--------HERE
                MyColor color;

                for (long i = 0; i < length; i += colorSize)
                {
                    accessor.Read(i, out color);
                    color.Brighten(10);
                    accessor.Write(i, ref color);
                }
            }
        } 
```

如果报告的尺寸`MARSHAL.sizeOF`不是**这样**的尺寸`sizeOF`-我应该选择**哪个**？一定要准确！！

根据这个样本，他们不考虑填充，他们应该......（或不......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:20:02.773

这可能看起来不诚实 - 但从内存映射文件的角度来看，您感兴趣的大小与内存中该对象的大小不同。它们可能被称为内存映射文件，但在 .Net 中，这并不一定意味着与本机代码中的完全相同 *。**（不过，底层实现仍然相同——逻辑内存的一部分映射到文件的一部分，因此名称仍然正确）*

`sizeof`返回物理内存中对象的正确大小，包括任何填充字节等。因此，如果您需要知道本机内存术语中对象的确切大小，请使用它（但这*不适*用于内存映射文件我稍后会解释）。

正如文档所说，`Marshal.SizeOf`从.Net的角度报告对象的大小，不包括两个隐藏的数据项；仅由运行时使用。

您复制的示例使用`Marshal.SizeOf`，因为填充值*仅与内存中的物理对象*相关。当对象被序列化时，只有*逻辑*.Net 数据被序列化。当对象再次加载回来时，这两个填充值会根据当时运行时的状态重新分配。例如，类型指针可能不同。序列化它们是没有意义的。这就像将本机指针（不是偏移量）序列化到磁盘一样 - 它指向的数据下次不太可能出现在同一个地方。

Ergo - 如果你想知道 100 个`Color`对象的数组在物理内存中的使用量 - 使用`sizeof`；如果您想知道相同数据的内存映射文件有多大，请使用`Marshal.SizeOf`.

# graph - 为什么 BFS 比 DFS 更适合并行化？

> ID：10602392
> 
> 赞同：6
> 
> 时间：2012-05-15T14:00:21.720
> 
> 标签：graph, depth-first-search, breadth-first-search, parallel-processing

我读过 BFS 算法比 DFS 更适合并行实现。我很难理解为什么这应该是真的直觉。谁能解释一下？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:52:30.713

BFS 是传播边界的过程。“传播”意味着将所有未访问的相邻顶点推入队列，并且它们可以**独立**处理。

在 DFS 中，顶点是沿着 A->B->C 的方向一个一个地访问的。访问B必须在访问C之前发生。这是一个不容易并行化的顺序过程。

但事实是 BFS 和 DFS 都很难并行化，因为所有处理节点都必须知道全局信息。访问全局变量总是需要节点之间的同步和通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:49:34.690

一般来说，有一些关于**DFS**和**BFS**的好信息：

*   [广度优先搜索和深度优先搜索](http://www.ics.uci.edu/~eppstein/161/960215.html)
*   [BFS和DFS之间的区别](http://www.differencebetween.net/technology/difference-between-bfs-and-dfs/)
*   [广度优先搜索/深度优先搜索动画](http://www.cs.sunysb.edu/~skiena/combinatorica/animations/search.html)
*   [DFS 和 BFS 有什么区别？](http://www.programmerinterview.com/index.php/data-structures/dfs-vs-bfs/)

特别是[动画](http://www.cs.sunysb.edu/~skiena/combinatorica/animations/search.html)展示了**BFS**如何使用更多的并行概念。我认为**BFS可以并行实现，但****DFS**没有并行解决方案。 **DFS**是一种线性算法，每个子节点调用一次。

# sql-server-2008 - 需要查询优化建议

> ID：10602400
> 
> 赞同：0
> 
> 时间：2012-05-15T14:00:43.537
> 
> 标签：sql-server-2008, query-optimization

我编写了一个脚本，执行大约需要 15 个小时。我需要一些查询优化技术或建议以使此脚本尽可能快...如果有人可以提供帮助，请查看脚本：

```
declare @max_date date
declare @client_bp_id int

Select @max_date=MAX(tran_date) from All_Share_Txn

DELETE FROM Client_Share_Balance

DECLARE All_Client_Bp_Id CURSOR FOR
SELECT Bp_id FROM  Client       --Take All Client's BPID 
    OPEN All_Client_Bp_Id
    FETCH NEXT FROM All_Client_Bp_Id
        INTO @client_bp_id
    WHILE @@FETCH_STATUS = 0
    BEGIN

    Insert Client_Share_Balance(Bp_id,Instrument_Id,Quantity_Total,Quantity_Matured,Quantity_Pledge,AVG_Cost,Updated_At,Created_At,Company_Id,Created_By,Updated_By)
    select @client_bp_id,Instrument_Id,
       sum(case when Is_buy='True' then Quantity when Is_buy='False'  then -quantity end), --as Total Quantity
       sum(case when Mature_Date_Share <= @max_date then (case Is_buy when '1' then quantity when '0' then -quantity end) else 0 end),  --as Free Qty
       ISnull((select sum(case pu.IsBuy when '1' then -pu.quantity else pu.quantity end) from
            (Select * from Pledge UNION Select * from Unpledge) pu
                where pu.Client_Bp_id=@client_bp_id and pu.Instrument_Id=t1.Instrument_Id and pu.Txn_Date<=@max_date
                group by pu.Client_Bp_id,pu.Instrument_Id),0),  -- as Pledge_Quantity
       dbo.Avg_Cost(@client_bp_id,Instrument_Id), --as Avg_rate
       GETDATE(),GETDATE(),309,1,1

    from All_Share_Txn t1
    where Client_Bp_id=@client_bp_id and Instrument_Id is not null 
    group by Instrument_Id
    having sum(case Is_buy when '1' then quantity when '0' then -quantity end)<> 0
    or sum(case when Mature_Date_Share <= @max_date then (case Is_buy when '1' then quantity when '0' then -quantity end) else 0 end) <> 0

    FETCH NEXT FROM All_Client_Bp_Id
        INTO @client_bp_id

END

CLOSE All_Client_Bp_Id
DEALLOCATE All_Client_Bp_Id 
```

只需要验证代码是否可以更有效地编写..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:08:49.273

如果我理解你的代码。光标是代码中的瓶颈。所以我会跳过光标并做这样的事情：

```
Insert Client_Share_Balance(Bp_id,Instrument_Id..)
select Client_Bp_id,
......
from All_Share_Txn t1
where EXISTS(SELECT NULL FROM Client WHERE Client_Bp_id=t1.Bp_id) 
and Instrument_Id is not null 
group by Instrument_Id,Client_Bp_id
....... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T18:43:04.550

1.  将 * 替换为您的 ColumnNames **`Select * from Pledge`**。它应该像
    **`Select Instrument_Id from Pledge`**

2.  排除光标的使用。

3.  `Pledge`和`Unpledge`表中是否有唯一记录，如果有，`UNION ALL`应该使用。因为它与`UNION`

4.  插入`All_Share_Txn`in的记录`Local Temporary Table`。

5.  创建另一个`Local Temporary table`将基于 Instrument_Id 列和 具有“总数量”信息的字段`Instrument_Id`。现在评估基于 Switch case 的条件并在此表中插入 Quantity Information 的记录。请注意，当您为此上下文提取信息时，请使用在步骤 3 中创建的本地临时表。

6.  创建另一个`Local Temporary table`将根据 Instrument_Id 列和`Instrument_Id`. `Free Qty`现在评估基于 Switch 案例的条件并在此表中插入信息记录。请注意，当您为此上下文提取信息时，请使用在步骤 3 中创建的本地临时表。

7.  `Local Temporary table`根据 Instrument_Id 列和.创建另一个将具有字段“Pledge_Quantity”信息的字段`Instrument_Id`。`Pledge_Quantity`现在评估基于 Switch 案例的条件并在此表中插入信息记录。请注意，当您为此上下文提取信息时，请使用在步骤 3 中创建的本地临时表。

8.  `Local Temporary table`根据 Instrument_Id 列和.创建另一个具有“Avg_rate”信息的字段`Instrument_Id`。`Avg_rate`现在评估基于 Switch 案例的条件并在此表中插入信息记录。请注意，当您为此上下文提取信息时，请使用在步骤 3 中创建的本地临时表。

9.  现在，借助在步骤 3、4、5、6、7 中创建的表之间的连接。您可以立即获得结果集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:53:37.013

除非您关心您正在读取 COMMITTED 数据，否则您可以告诉 SQL Server 按原样查看数据，而不对对象持有任何锁...与 WITH (NOLOCK) 的行为基本相同，但 Microsoft 建议不要使用对象提示并让 SQL Server 决定要使用的最佳锁定方法。无需“担心”数据是否提交，这大大加快了获取数据的速度。

将此添加到查询的顶部

SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED -- 在连接级别设置，不是一次性的 GO

[请参阅此链接 事务隔离级别](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

接下来，请检查您的唯一 id 列上是否有聚集索引。如果它们只有唯一的约束，那仍然会给您留下堆而不是表。堆基本上是零散的混乱。（你可能知道这些东西，只是提一下）接下来，确保你在 WHERE ORDER BY GROUP HAVING... 中使用的所有列都有非聚集索引，并包括经常返回的列；顺便说一句，这会消耗更多的磁盘空间。如果您使用的是企业版或更高版本，请使用压缩索引和表。

我会在表上运行 UPDATE STATISTICS WITH FULLSCAN 来为 SQL Server 提供最新最好的统计信息。顺便说一下，重建聚集索引将为您完成此操作，您还可以告诉仅更新数据统计信息以帮助加快此过程，因为如果您的表有数百万行，则可能需要一段时间。

您受到的最大性能影响是您对汇总结果进行分组这一事实。SQL Server 将扫描、使用工作表、排序……一切都在寻找索引，这一切都是因为没有索引可用于帮助您的 GROUP BY、HAVING 等。

有时我们在这件事上别无选择，但是有一些技巧，比如创建一个#temporary 表（或表对象，是的，你可以在两者上创建索引）并用预先计算的结果填充它，确保这个#temporary 表可以加入。当您使用 ORDER BY、GROUP BY、HAVING 时，除非您使用一列或多列并使用 SUM 或标量值用户定义函数之类的聚合，否则它会很慢 - 取决于您定义为慢的内容 :) 但是你确实说过你认为它应该更快。

需要查看任何 SQL Server 实例的一些基本设置：

1.  tempdb 应该具有与内核相同数量的文件，所有相同的大小和使用 MB 的所有相同增长率，而不是 %。如果您有 8 个以上的内核，我最多只能选择 8 个文件。修改后重启实例；你必须这样做，但我推荐它。

    示例：12 核。

    ```
    tempdb.mdf      size= 1024MB   growby= 256MB
    tempdb2.ndf  size= 1024MB   growby= 256MB
    (etc)
    tempdb8.ndf size= 1024MB   growby= 256MB 
    ```

2.  与您的数据库相同。如果您需要添加更多文件，请使用推荐的大小设置并重建所有聚集索引，这会将数据分散到文件中，因为它将重建数据的物理结构。

3.  不要让 SQL Server 占用所有内存！将其限制设置为 total_avail_phys_memory 减去 2GB（为 O/S 留下大量内存）

4.  不要只使用主文件组；将您的数据和索引分开到它们自己的文件组中。如果可以，将索引放在 RAID 10 驱动器上，将数据放在 RAID 5 或 6 上。

5.  确保通过维护计划或通过滚动您自己的脚本，为 SQL Server 用户数据库提供他们所需的维护。

6.  RAID 5 上的数据、RAID 10 上的日志、RAID 10 上的 Tempdb - 每个 LUN（驱动器号）都应该有专用的心轴（驱动器）

我希望这些建议是有帮助的，如果它们对实例的整体性能有帮助的话。

# php - 需要使用datatable jquery删除搜索字段

> ID：10602402
> 
> 赞同：2
> 
> 时间：2012-05-15T14:00:44.943
> 
> 标签：php, jquery, csv, datatables

> **可能重复：**
> [无论如何要删除 jquery 数据表插件中的搜索栏和页脚](https://stackoverflow.com/q/1920600/352449)

我很新来实现数据表来对我的列进行排序。现在，如果我单击列标题，记录将按升序和降序排序。但我不想要任何搜索字段，因为我有一个自定义搜索框。现在我找不到如何删除搜索选项。另外，在获取记录后，我想将记录导出到 csv 文件中。根据当前记录（升序或降序）怎么做？请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T17:23:26.687

要从表中删除搜索字段：

**查询**

```
$('table').dataTable({"bFilter": false}); 
```

**CSS**

```
.dataTables_filter {
  display: none;
} 
```

您可以在此处阅读有关个性化 jQuery DataTables 的所有信息[！](http://datatables.net/examples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-23T07:11:04.067

```
$.extend(true, $.fn.dataTable.defaults, {
    "searching": false
}); 
```

# java - 编译具有重叠依赖项的类

> ID：10602403
> 
> 赞同：0
> 
> 时间：2012-05-15T14:00:47.273
> 
> 标签：java, compilation, dependencies

我有两节课。布局和电路板。

布局具有我在 Board 类中使用的静态变量。

另外，我在 Layout 类中实例化 Board。

我无法在命令行中编译它。javac *.java 确实可以工作，但它会引发异常。这个怎么处理？？

布局类

```
public class Layout{

  public static int hellovar = 1;

  public static void main(String args[]){
    Board b = new Board();
    b.calculate();
  }
} 
```

板级

```
public class Board {
  public void calculate(){
    int i = Layout.hellovar++;
    System.out.println(i);
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:08:35.007

我没有看到任何导入语句，如果没有编译错误输出，这很难说。如果您提及您的包装结构会有所帮助。以下对我有用（仅供参考，使用 Ubuntu Linux，Java 1.6.0_25）：

```
$> javac *.java
$> java Layout
1 
```

你可以发布你的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:14:16.367

这是依赖问题。

但以下编译：

```
javac Board.java Layout.java 
```

虽然这不能编译

```
javac Layout.java Board.java 
```

让我检查一下依赖问题并给你一个解释

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:15:59.587

一个技巧是使用具有单个 javac 任务的 ANT 脚本，例如 -

```
<javac sourcepath="" 
       srcdir="${src}"
       destdir="${build}" >
<include name="**/*.java"/>
</javac> 
```

# c++ - 为什么在调用基类复制构造函数（C++）时将派生类类型作为参数传递？

> ID：10602412
> 
> 赞同：1
> 
> 时间：2012-05-15T14:01:12.497
> 
> 标签：c++, copy-constructor

关于何时调用基类的复制构造函数，我们有以下形式：

```
DerivedClass ( const DerivedClass& obj ) : BaseClass ( obj ) 
{ 
// ... 
} 
```

我只是不明白为什么我们将派生类的对象传递给基类复制构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:04:21.227

你还想通过什么？因为唯一的其他选择是从空中变出的魔法小马。

这是一个典型的“隐藏在对父级的引用后面的真实类型”的东西。基类的复制 ctor 具有签名`base(const base&)`。它不关心您是否传递了最派生类型、半派生类型或基类型。它只看到它关心的部分，即`base`，而没有其他内容，因此它可以正常工作。

当然，这只适用于使用公共继承派生的类型，这形成了两者之间的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:05:50.777

看起来对派生类对象的引用正在被传递，但实际上它将被*隐式向上*转换，这将产生对基类子对象的引用。

实际上，您引用的代码与此代码完全等效：

```
DerivedClass ( const DerivedClass& obj ) :
    BaseClass ( static_cast<const BaseClass&>( obj ) )
{ 
// ... 
```

后一个代码是完全合理的——它通过将一个对已构造的其他对象的基子对象的引用传递给基类子对象构造函数来调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:24:46.623

派生类的对象具有“派生类的属性”+“基类的属性”

当我们要创建派生类的副本时，我们调用派生类的复制构造函数。本质上，我们想将“派生类的属性”+“基类的属性”复制到新对象。

派生类属性的副本由派生类复制构造函数负责。要复制基类的属性，我们需要显式调用基类复制构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:03:01.547

如果你没有，基类会从哪里复制？

A`DerivedClass` *是 a* `BaseClass`，因此它可以隐式转换为对 a 的引用`BaseClass`并在`BaseClass`复制构造函数中用于复制。

所以`BaseClass(const BaseClass&)`负责复制 的成员`BaseClass`并`DerivedClass(const DerivedClass&)`负责复制 的成员`DerivedClass`。

这样做可以避免在`BaseClass`派生自它的每个类中复制复制构造函数中的复制代码，并避免在修改基类时损坏。

# xcode - Xcode：表格视图复选标记

> ID：10602415
> 
> 赞同：0
> 
> 时间：2012-05-15T14:01:16.710
> 
> 标签：xcode, uitableview, uiviewcontroller, tableview, xcode4.3

我想知道如何检查表格视图中的某些单元格。有人知道该怎么做吗？我想要，当用户按下一个单元格时，会出现一个复选标记，如果用户再次按下它会再次消失。用户应该可以一次检查多个单元格；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:10:34.190

您可以将`accessoryType`属性设置`UITableViewCell`为`UITableViewCellAccessoryCheckmark`。您只需要保留一个`BOOL`变量，让您可以在 和 之间进行`UITableViewCellAccessoryNone`更改`UITableViewCellAccessoryCheckmark`。

编辑 1 -

这样做的代码-

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    UITableViewCell *tableCell = [tableView cellForRowAtIndexPath:indexPath];
    BOOL isSelected = (tableCell.accessoryType == UITableViewCellAccessoryCheckmark);

    if (isSelected) {
        tableCell.accessoryType = UITableViewCellAccessoryNone;
    }
    else {
        tableCell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

# php - 获取数组形式simplexml xpath查询结果中的字符串

> ID：10602419
> 
> 赞同：1
> 
> 时间：2012-05-15T14:01:24.133
> 
> 标签：php, simplexml

我正在使用 xml，现在使用 simplexml 和 xpath，当我回显 xpth 查询的结果时，它会回显字符串，但我需要在数组中获取该字符串，但是当尝试在数组中复制时，它会以 simplexml 对象的形式出现，喜欢

```
object(SimpleXMLElement)#237 (1) {
  [0]=>
  string(69) "Hallituksen esitykset uusiksi Yle-laeiksi eduskunnan kÃ¤siteltÃ¤viksi"
} 
```

只是想要“Hallituksen esitykset uusiksi Yle-laeiksi eduskunnan kÃ¤siteltÃ¤viksi”这里是代码，

```
 $xml = "<?xml version='1.0' encoding='UTF-8' standalone='yes'?>" . $pageBlocks['news'];
        $xmldata = simplexml_load_string($xml);

        $result = $xmldata->xpath('/blocks/block/items/item/strong');

        $feeddata = array();

        while (list(, $node) = each($result)) {
            $feeddata [] = $node[0];
        }

        foreach ($feeddata as $data){
            var_dump($data);
        } 
```

如何解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:03:15.067

要将其作为字符串获取，只需通过 将其强制转换`(string)`，这将在内部调用 SimpleXMLElement`__toString()`以返回字符串表示形式。顺便说一句，这也是你隐含地发生的事情`echo`。

```
while (list(, $node) = each($result)) {
    $feeddata [] = (string)$node[0];
} 
```

# java - 如何使用资源路径访问 jar 的内容？

> ID：10602423
> 
> 赞同：2
> 
> 时间：2012-05-15T14:01:37.463
> 
> 标签：java, url, jar

我的问题如下：我正在尝试访问 Jar 中的类文件。我在包“com.msgxsd”中有一个罐子“dumb.jar”。jar 在类路径上，如果我尝试这样做

```
InputStream is = this.getClass().getClassLoader()
            .getResourceAsStream("com/msgxsd/dumb.jar"); 
```

然后我得到一个jar的输入流，没有问题。

当我尝试为 jar 中的文件获取输入流（或 URL）时，就会出现问题。所有 jar 包含（显然除了清单）是文件“DummyClass1.class”。

我已经尝试了以下所有方法：

`InputStream is = this.getClass().getClassLoader() .getResourceAsStream("DummyClass1.class");`

`InputStream is = this.getClass().getClassLoader() .getResourceAsStream("dumb.jar!/DummyClass1.class");`

但返回的输入流始终为空。我也试过

```
URL url = this.getClass().getResource("DummyClass1.class");
URL url = this.getClass().getResource("dumb.jar!/DummyClass1.class"); 
```

但返回的 URL 为空。

我已经查看了与访问 Jar 中的文件有关的每一个问题，但是建议的解决方案（如上所示）对我不起作用。

我想要的只是能够为 jar 中的“DummyClass1.class”获取一个 InputStream（或者理想情况下是一个 URL），这样我就可以以某种方式构造一个 File 实例。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:12:39.637

尝试

```
InputStream is = this.getClass().getClassLoader().getResourceAsStream("dumb.jar/DummyClass1.class"); 
```

可能在 jar 中指定 DummyClass1.class 位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:39:31.250

您要做的最简单的事情是移动您的 jar，使其直接包含在类路径中，或者更改您的类路径以将“com/msgxsd”也包含为顶级条目。在任何一种情况下`DummyClass`，标准都会加载`ClassLoader`，您可以`getResourceAsStream("DummyClass1.class")`按照您已经建议的方式进行操作。

如果无法以这种方式更改您的类路径，那么您需要`JarInputStream`按照上面@Micky 的建议或在这个[更完整的答案](https://stackoverflow.com/a/5788396/991432)中创建一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:19:42.663

尝试

```
is = this.getClass().getClassLoader().getResourceAsStream("com/msgxsd/dumb.jar!/DummyClass1.class") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:12:20.823

试试这个（对不起，如果有错别字，我只是从头顶输入代码而没有尝试）：

```
int index = path.indexOf('!');
if (index == -1) return url.openStream();
String jarPath = path.substring(0, index);
File jarFile = new File(new URL(jarPath).toURI());

if (!jarFile.exists()) return null;

String filePath = path.substring(index + 1);
if (filePath.startsWith("/")) {
    filePath = filePath.substring(1);
}

JarFile jar = new JarFile(jarFile);
return jar.getInputStream(jar.getJarEntry(filePath)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T14:22:32.583

我要做的是使用 a`JarInputStream`直接访问 jar 文件的内容。然后遍历`JarEntry`集合，直到找到要查找的文件并从流中读取它。像这样的东西：

```
JarInputStream jarIn = new JarInputStream(this.getClass().getClassLoader() .getResourceAsStream("com/msgxsd/dumb.jar"));  
JarEntry entry = jarIn.getNextJarEntry(); 
```

现在使用`jarIn`read 方法读取文件。

# c++ - 如何在 C++ TBB 中创建线程池？

> ID：10602429
> 
> 赞同：2
> 
> 时间：2012-05-15T14:02:00.580
> 
> 标签：c++, tbb

我可能没有正确测量这个，但我有一些我正在玩的简单代码。我不认为它是一个线程池，因为如果我使工作单元非常大，那么 cpu 会达到 190-199%（我有双核），但如果我降低工作单元，但这些单元比我的 cpu 多得多以 140-160% 的速度运行程序。

我认为正在发生的是线程没有被池化，而是在需要时被销毁/创建，当工作负载较小时，这会使程序变慢。我`tbb::task_scheduler_init`用来控制线程的数量，但我不知道如何告诉 tbb 让线程保持活动状态。

这里有一些代码来说明这个问题：

```
#include <iostream>
#include <list>
#include <tbb/task.h>
#include <tbb/task_group.h>
//#include <stdlib.h>
#include "tbb/task_scheduler_init.h"
#include <boost/thread.hpp>

using namespace tbb;

long fib(long a)
{
    if (a < 2) return 1;

    return fib(a - 1) + fib(a - 2);
}

class PrintTask
{
public:
    void operator()()
    {
        //std::cout << "hi world!: " <<  boost::this_thread::get_id() << std::endl;

        fib(10);
    }
};

int main()
{
    tbb::task_scheduler_init init(4); //creates 4 threads
    task_group group;

    for (int i = 0; i < 2000000; ++i)
    {
        group.run(PrintTask());
        //std::cout << i << std::endl;
    }

    std::cout << "done" << std::endl;
    group.wait();

    return(0);
} 
```

如果将 fib 更改为 40-45，每个线程的工作量会变大，因此会达到全速，但如果使用当前设置，那么工作量会非常小，但它会完成很多工作。

注意：我注意到可能相关的一件事是，在上述情况下，它完全使用了我的记忆（4 场免费）。经济放缓可能与此有关吗？另外为什么这个程序会占用所有内存？它将它存储在内存中是什么，如果我只是调用线程，是不是有一个队列告诉它运行多少次，或者它是否将整个线程保存在内存中运行？

我阅读了教程，但仍然对其行为感到困惑（尽管我确实得到了预期的结果）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T17:34:20.210

你不应该太担心 CPU 利用率，而应该看看执行时间和加速与顺序。

关于 tbb，您需要了解以下几点：

您可以认为调度任务的开销基本上是恒定的（不完全是，但已经足够接近了）。您安排的工作量越小，就越接近这个常数。如果你接近这个常数，你将看不到加速。

当他们找不到工作时，线程也会空闲。我猜当您调用“fib(10)”时，调用 run 的成本和必要的任务分配正在接近实际执行工作的成本。

更具体地说，如果您确实有 2000000 个项目具有相同的任务，您可能应该调用 parallel_for 或 parallel_for_each。

-瑞克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T19:37:01.520

只是为了强调 Rick 的最后一点，state的[文档](http://threadingbuildingblocks.org/uploads/81/91/Latest%20Open%20Source%20Documentation/Reference.pdf)`task_group`：

> 注意：为单个 task_group 创建大量任务是不可扩展的，因为任务创建成为串行瓶颈。如果创建多于少量的并发任务，请考虑改用 parallel_for (4.4) 或 parallel_invoke (4.12)，或将生成构建为递归树。

我实际上会添加`parallel_do`到该列表中，因为它可能适用于您不知道的任务数量的前期用例。它的参数包括一个可以添加更多任务的“feeder”；但再次注意文档中的评论不是一次处理一项任务。选择性报价：

> 设计你的算法，使主体经常添加不止一项工作。...为了实现加速， B::operator() 的粒度需要至少约为 100,000 个时钟周期。否则，parallel_do 的内部开销会淹没有用的工作。

如果您正在寻找重要的 TBB 示例（超出`parallel_for`和[教程](http://threadingbuildingblocks.org/uploads/81/91/Latest%20Open%20Source%20Documentation/Tutorial.pdf)等），TBB[模式手册](http://threadingbuildingblocks.org/uploads/81/91/Latest%20Open%20Source%20Documentation/Design_Patterns.pdf)非常好。

# html - 带有元标记的“赞”按钮

> ID：10602430
> 
> 赞同：0
> 
> 时间：2012-05-15T14:02:02.163
> 
> 标签：html, facebook, facebook-like, facebook-opengraph, meta-tags

我知道这篇文章一定很常见，但我一直在阅读有关带有元标记的“赞”按钮，所有网站都说得差不多，

现在我正在做一个例子，只是为了在我的时间线上查看带有格式的帖子

```
<meta property="fb:admins" content="546941686"/>
<meta property="fb:app_id" content="269696529779484" />
<meta property="og:type" content="product" />
<meta property="og:title" content="ShakeM PLayer" />
<meta property="og:description" content="ShakeM description about the new shake" />
<meta property="og:image" content="http://shakemdev.brickmakers.de/Public/Images/shakem_logo.png" />
<meta property="og:url" content="http://shakemdev.brickmakers.de/Multimedia/Player/Details/1133" /> 
```

和我体内的代码

```
<body>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=269696529779484";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="http://shakemdev.brickmakers.de/Multimedia/Player/Details/1161" action="like" data-send="false" data-width="200" data-show-faces="true" ></div> 
```

这是我的时间轴中的按钮和结果，我看不到标题或描述，也看不到图像:(我做错了什么这是一个全新的 html

[http://impormaq.mx/like.html](http://impormaq.mx/like.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:13:48.583

我认为你错过了一个小点。Facebook 需要有一个像这样的 div：

```
<div id="fb-root"></div> 
```

有必要在您的`<script>`. 我认为没有它，facebook 将无法工作。

您可能还需要调用该功能，`FB.init()`但我认为这并不总是必要的。所以首先尝试`<div>`.

# regex - 如何在R中转义问号？

> ID：10602433
> 
> 赞同：14
> 
> 时间：2012-05-15T14:02:11.983
> 
> 标签：regex, r

我正在尝试 grep 字符串向量，其中一些包含问号。

我在做：

`grep('\?',vectorofStrings)` 并收到此错误：

`Error: '\?' is an unrecognized escape in character string starting "\?"`

如何确定“？”的正确转义过程

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-15T14:04:26.393

你也必须逃跑`\`：

```
vectorOfStrings <- c("Where is Waldo?", "I don't know", "This is ? random ?")
grep("\\?", vectorOfStrings)
#-----
[1] 1 3 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T14:06:08.823

使用`\\`or`fixed = TRUE`参数，如：

```
vectorofStrings <-c("hello.", "where are you?",  "?")

grep('\\?',vectorofStrings)
grep('?',vectorofStrings, fixed=TRUE) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-15T14:04:43.533

我猜`\`它在 R 中用作普通的字符串转义字符，因此将文字传递`\`给`grep`您可能需要`\\?`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T12:51:51.527

在 windows grep 下，我没有反斜杠转义的运气。但我设法通过以下方式使其工作：

```
grep [?]{3} * 
```

也就是说，我将问号括在字符类括号（`[`和`]`）中，这使得特殊含义无效。该`{3}`部分与问题无关，我用它找到了3个连续的问号。

# c# - 必须声明标量变量

> ID：10602439
> 
> 赞同：4
> 
> 时间：2012-05-15T14:02:30.867
> 
> 标签：c#, sql

当我尝试在我的应用程序中执行以下非查询 sql 命令时，我总是收到错误消息 -

> 必须声明标量变量“@RateID”

我有点不知所措，为什么我会收到这个错误。这是我的代码：

```
string sqlText = "INSERT INTO tblRates (RateID, IPName, RateName, Rate, DateFrom, DateTo, Active) " +
                 "VALUES (@RateID, @IPName, @RateName, @Rate, @DateFrom, @DateTo, @Active);";

SqlCommand sqlCom = new SqlCommand(sqlText);
sqlCom.Parameters.Add("@RateID", SqlDbType.Int);
sqlCom.Parameters.Add("@IPName", SqlDbType.Text);
sqlCom.Parameters.Add("@RateName", SqlDbType.Text);
sqlCom.Parameters.Add("@Rate", SqlDbType.Decimal);
sqlCom.Parameters.Add("@DateFrom", SqlDbType.Date);
sqlCom.Parameters.Add("@DateTo", SqlDbType.Date);
sqlCom.Parameters.Add("@Active", SqlDbType.Bit);

this._rateID = NextID();

sqlCom.Parameters["@RateID"].Value = this._rateID;

if (this._ipName == "All")
{
   sqlCom.Parameters["@IPName"].Value = DBNull.Value;
}
else
{
   sqlCom.Parameters["@IPName"].Value = this._ipName;
}

sqlCom.Parameters["@RateName"].Value = this._rateName;
sqlCom.Parameters["@Rate"].Value = this._rate;
sqlCom.Parameters["@DateFrom"].Value = this._dateFrom;
sqlCom.Parameters["@DateTo"].Value = this._dateTo;

this._active = true;
sqlCom.Parameters["@Active"].Value = this._active;

cSqlQuery cQ = new cSqlQuery(sqlText, "non query"); 
```

当我逐行执行时，我看到参数`@RateID`已成功添加到`sqlCommand`对象中，该方法`NextID`正确返回了一个整数值，该整数值被接受为参数的值`Value`，`@RateID`但是当我对它执行非查询时，`SqlCommand`我得到了上述错误。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T14:09:17.050

您正在设置`sqlCom`对象 - 代码看起来不错。

但后来：看来你只是在这里执行 SQL 命令：

```
cSqlQuery cQ = new cSqlQuery(sqlText, "non query"); 
```

不使用您以前拥有的所有设置代码！为什么？

参数和所有内容都包含在`sqlCom`对象中 - 但您`cSqlQuery`似乎并没有真正查看该对象 - 只是 SQL 语句本身......

如果你改用这条线会发生什么：

```
sqlCom.ExecuteNonQuery(); 
```

这是否毫无例外地工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:13:09.347

您似乎将 sqlText 传递给您的 cSqlQuery 对象，但我相信您需要传递命令（sqlCom）。

我不确切知道 cSqlQuery 是如何工作的，但是传递 sqlText 并不好。

# jquery - Bootstrap scrollspy 工作很奇怪

> ID：10602445
> 
> 赞同：3
> 
> 时间：2012-05-15T14:02:55.337
> 
> 标签：jquery, twitter-bootstrap, scrollto, zurb-foundation

嗨，我在基础框架中使用 Bootstrap Scrollspy。

到目前为止，我设法让 scrollspy 工作，但不像它应该的那样。

scrollspy 正确更改导航的状态，但不完全更改指定的 div。

scrollspy 应该更改导航的第一个 div 容器运行良好，但随后容器的偏移量增加，最后 scrollspy 更改它在 nomansland 中的状态，而不是在 div 顶部。

当站点加载时，scrollspy 显示最后一个导航条目而不是第一个？

我想这是基于百分比的布局。你怎么看？

你可以在这里找到开发页面：

[http://dekonstruktiv.ch/static_sheggendorn/](http://dekonstruktiv.ch/static_sheggendorn/)

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:42:05.043

在 scrollspy 初始化后，似乎有一些元素被添加到页面中。加载完所有内容后，您将需要调用刷新。

```
$('[data-spy="scroll"]').each(function () {
    var $spy = $(this).scrollspy('refresh')
}); 
```

# cmake - CMake - 添加全局构建步骤（不特定于任何项目）

> ID：10602447
> 
> 赞同：0
> 
> 时间：2012-05-15T14:02:59.477
> 
> 标签：cmake

有没有办法用 CMake 添加“全局”构建步骤？每次构建执行一次且不绑定到任何特定项目的一种。

将它添加到 ZERO_CHECK 项目中会起作用，但我不知道是否/如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:39:06.870

[如果您对"empty-target-solution"](https://stackoverflow.com/a/10603603/147808)不满意，可以使用 CMake 的*安装*工具，它内置了时间戳检查功能，可以根据需要仅复制新文件。但是你的用户[必须明确地运行安装目标，除非你做了一些](http://www.cmake.org/pipermail/cmake/2011-March/043408.html)可能不是你想要的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:04:35.627

看起来这样做的唯一方法是添加一个空目标并将构建步骤添加到它。它不漂亮，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:50:57.810

向顶级 CMakeLists.txt 添加内容？听起来您对 CMake 的使用感到困惑，这就是标题所暗示的内容以及 CMake 项目在 VS 中的工作方式。

这个全局构建步骤到底应该做什么？

# intellij-idea - 如何阻止标签在 IntelliJ IDEA 中重新排序？

> ID：10602453
> 
> 赞同：37
> 
> 时间：2012-05-15T14:03:07.543
> 
> 标签：intellij-idea

每次我单击 IntelliJ IDEA 中的某个选项卡时，它都会重新排序所有选项卡。当我了解标签的顺序时，我发现这非常烦人，然后它会切换。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-09T14:14:59.513

这真的很烦人也很可悲，因为这个问题是从 2009 年开始的，至今仍未解决。我测试了多种配置并找到了合适的解决方案。

对于我的解决方法和更直观的行为，请转到**Settings -> Editor Tabs**

*   放置：右或左（应检查并冻结**单行中的显示选项卡）**
*   检查**在编辑器选项卡中显示目录以获取非唯一文件名**
*   将**Tab 限制**更改为**20**或您想要的值
*   检查**关闭不常用的文件**
*   检查**激活最近打开的选项卡**

应用并关闭窗口。然后转到菜单栏：**Window -> Editor Tabs**，如果选中，请取消选中**Alphabetical Mode**。此更改允许您通过拖放重新排列选项卡，并且新选项卡将附加在活动选项卡之后。这也很烦人，因为大多数编辑器会将其附加到列表的末尾。
也许您更喜欢**字母模式**，但排序不一致，因为文件的只有一个目录（最近的目录）正在评估排序。父文件夹和父文件夹，... 被忽略。

仍然有一个烦人的行为，当您将标签栏放在顶部/底部时会更烦人。使用右/左时，您仍然会遇到同样的问题，但是您会获得更多空间，并且垂直列表不会很快让您烦恼；）

*   使用**单行**时，您只能水平/垂直滚动，您无法滚动出活动选项卡，您必须更改活动选项卡才能进一步滚动。
*   当在选项卡末尾使用**单行时，是一个图标，它以疯狂的顺序显示消失的选项卡，当您激活另一个选项卡时它会更改顺序。**

通过顶部/底部放置，您会得到另一个烦人的行为：

*   当您放置顶部/底部栏而不使用**单行**时，在大多数情况下，当您在选项卡之间切换时，顺序会发生变化，这对我来说是最烦人的行为。

*在 IntelliJ Cardea 上测试*

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-15T15:20:03.617

此行为由 Java Look&Feel 定义，您可以将 Look&Feel 更改为不重新排序选项卡行的选项，或启用**在单行中显示选项卡**的选项（或将选项卡设置为显示在右侧/左侧而不是最佳）。

另请参阅[相关的错误报告](http://youtrack.jetbrains.com/issue/IDEA-22546)。

# search - 如何从typo3中的solr扩展返回搜索结果？

> ID：10602460
> 
> 赞同：0
> 
> 时间：2012-05-15T14:03:23.850
> 
> 标签：search, solr, typo3

我正在尝试将插件用于错字 3 中的 solr 扩展，根据[这些说明](http://forge.typo3.org/projects/extension-solr/wiki/Setup_the_Solr_Extension)，一切都顺利进行，除了现在没有任何查询返回任何结果。我确实检查了列表模块并发现了开发日志警告消息：**未找到 TYPO3SEARCH 标记。从 class.tx_solr_typo3pagecontentextractor.php 第 91 行调用。** 对此的任何帮助将不胜感激。以下是 [apache solr 索引报告](http://imgur.com/nO5yL)的快照 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:02:28.493

我需要在您的网站上有这些评论：

```
<!--TYPO3SEARCH_begin-->
   .... content
<!--TYPO3SEARCH_end--> 
```

告诉 solr 扩展是什么内容，所以它不会索引你的菜单、页眉或页脚。您的模板中可能有多个标记`TYPO3SEARCH_begin/end`。

# windows-installer - 如何找到windows安装程序的版本号？

> ID：10602461
> 
> 赞同：1
> 
> 时间：2012-05-15T14:03:35.443
> 
> 标签：windows-installer

我试图找出我们产品先前版本的 Windows 安装程序版本号。

好像和产品版本号有点不一样，有没有办法查出windows installer的版本号是什么？如果我使用 Orca 查看 MSI，MSI 的属性中似乎有一个产品版本，例如 1.2.1234.5，那会是 Windows 安装程序版本号吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T06:52:40.830

在安装过程中，Windows Installer 版本存储在[VersionMsi](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372493%28v=vs.85%29.aspx)属性中。请注意，3.1 版存储为 3.01，4.5 版存储为 4.05。

如果要确定计算机上的 Windows Installer 版本，只需检查文件夹中的**msi.dll**文件`C:\Windows\system32`。

# asp.net - 自动关闭网页

> ID：10602466
> 
> 赞同：0
> 
> 时间：2012-05-15T14:03:49.467
> 
> 标签：asp.net

我有一个网络应用程序，我需要运行一些代码来每天发送电子邮件。我已将代码放在网页中。我希望使用批处理文件打开此网页（并使用 Windows 任务调度程序安排每天运行它），然后在任务完成后自动关闭它。任务完成后如何自动关闭网站。? 这是我的第一个网络应用程序，所以请多多包涵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:11:30.317

您可以尝试使用 javaScript，使用以下代码调用函数：

```
function closeWindow(){ window.close(); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:24:30.860

据我了解，您希望运行计划任务，将请求发送到您页面的 url，以便您可以发送邮件。但是您想每次都启动和停止 Web 服务器吗？

没必要。而是让它运行，http 是无状态的，所以在服务器接收到请求并将其路由到您的应用程序之前什么都不会发生。

无需担心任何执行，如果您有某种服务或异步任务正在运行？

但如果不是，那么您只需安排一个任务并使用脚本向 url 发出请求。我们在办公室有一个方便的 .vbs 脚本来实现这一点。

```
Call LogEntry()

Sub LogEntry()

        On Error Resume Next

        'Declare variables
        Dim objRequest
        Dim URL

        Set objRequest = CreateObject("Microsoft.XMLHTTP")

        'Put together the URL link appending the Variables.
        URL = "http://example.com/my_daily_update"

        'Open the HTTP request and pass the URL to the objRequest object
        objRequest.open "POST", URL , false

        'Send the HTML Request
        objRequest.Send

        'Set the object to nothing
        Set objRequest = Nothing

End Sub 
```

但我同意@aquinas（在评论中）可能会尝试将逻辑移动到您可以执行的控制台应用程序。

**希望我能正确理解你。**

# javascript - 选中复选框时提交表单

> ID：10602470
> 
> 赞同：42
> 
> 时间：2012-05-15T14:04:02.920
> 
> 标签：javascript, forms, search, checkbox

选中复选框时有没有办法提交表单？

```
<form id="formName" action="<?php echo $_SERVER['PHP_SELF'];?>" method="get">
    <input type ="checkbox" name="cBox[]" value = "3">3</input>
    <input type ="checkbox" name="cBox[]" value = "4">4</input>
    <input type ="checkbox" name="cBox[]" value = "5">5</input>
    <input type="submit" name="submit" value="Search" />
</form>

<?php
    if(isset($_GET['submit'])){
        include 'displayResults.php';
    }
?> 
```

这就是我目前所拥有的，但是当用户选中或取消选中复选框时，我想提交没有提交按钮的表单。有什么帮助吗？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-05-15T14:06:43.833

`onChange`通过向输入标签添加属性来使用 JavaScript

```
<input onChange="this.form.submit()" ... /> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-15T14:08:07.577

是的，这是可能的。

```
<form id="formName" action="<?php echo $_SERVER['PHP_SELF'];?>" method="get">
    <input type ="checkbox" name="cBox[]" value = "3" onchange="document.getElementById('formName').submit()">3</input>
    <input type ="checkbox" name="cBox[]" value = "4" onchange="document.getElementById('formName').submit()">4</input>
    <input type ="checkbox" name="cBox[]" value = "5" onchange="document.getElementById('formName').submit()">5</input>
    <input type="submit" name="submit" value="Search" />
</form> 
```

通过添加`onchange="document.getElementById('formName').submit()"`到每个复选框，您将在任何时候更改复选框时提交。

如果你对 jQuery 没问题，它会更容易（而且不引人注目）：

```
$(document).ready(function(){
    $("#formname").on("change", "input:checkbox", function(){
        $("#formname").submit();
    });
}); 
```

对于表单中的任意数量的复选框，当“更改”事件发生时，表单就会被提交。如果您通过该方法动态创建更多复选框，这甚至会起作用`.on()`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-15T09:58:22.663

我已经搞砸了大约四个小时，并决定与您分享。

您可以通过单击复选框来提交表单，但奇怪的是，在 php 中检查提交时，您希望在选中或取消选中复选框时设置表单。但事实**并非如此**。**只有在您实际选中**复选框时才会设置表单，如果您取消选中它，它将不会被设置。复选框输入类型末尾的“选中”一词将导致复选框显示已选中，因此如果您的字段被选中，则必须像下面的示例一样反映这一点。当它被取消选中时，php 会更新字段状态，这将导致选中的单词消失。

您的 HTML 应如下所示：

```
<form method='post' action='#'>
<input type='checkbox' name='checkbox' onChange='submit();'
<?php if($page->checkbox_state == 1) { echo 'checked' }; ?>>
</form> 
```

和PHP：

```
if(isset($_POST['checkbox'])) {
   // the checkbox has just been checked 
   // save the new state of the checkbox somewhere
   $page->checkbox_state == 1;
} else {
   // the checkbox has just been unchecked
   // if you have another form ont the page which uses than you should
   // make sure that is not the one thats causing the page to handle in input
   // otherwise the submission of the other form will uncheck your checkbox
   // so this this line is optional:
      if(!isset($_POST['submit'])) {
          $page->checkbox_state == 0;
      }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T14:15:57.300

```
$(document).ready(
    function()
    {
        $("input:checkbox").change(
            function()
            {
                if( $(this).is(":checked") )
                {
                    $("#formName").submit();
                }
            }
        )
    }
); 
```

虽然最好为每个复选框添加类并执行

```
$(".checkbox_class").change(); 
```

这样您就可以选择哪些复选框提交表单，而不是全部提交。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-21T14:54:27.547

您可以通过 JavaScript 中的简单方法单击复选框来提交表单。在表单标签或输入属性中添加以下属性：

```
 onchange="this.form.submit()" 
```

例子：

```
<form>
      <div>
           <input type="checkbox">
      </div>
</form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-27T04:39:45.030

选中复选框后提交表单

```
$(document).ready(function () {   
$("#yoursubmitbuttonid").click(function(){           
                if( $(".yourcheckboxclass").is(":checked") )
                {
                    $("#yourformId").submit();

                }else{
                    alert("Please select !!!");
                    return false;
                }
                return false;
            }); 
}); 
```

# c# - 检查服务器的 Internet 连接和在线状态

> ID：10602473
> 
> 赞同：0
> 
> 时间：2012-05-15T14:04:15.093
> 
> 标签：c#, windows-phone-7, httpwebrequest

```
 public static bool CheckOnlineStatus()
    {

        WebRequest request = WebRequest.Create("http://www.energy.ch");
        WebResponse response = request.getResponse();
        if (response == null || response.StatusCode != HttpStatusCode.OK)
        {
        }

        return true;
    } 
```

我想使用上面的代码检查 Internet 连接并检查服务器是否在线。但是VS2010说Webrequest中没有Methode getResponse的定义。（与 StatusCode 的响应相同的问题。）有人可以看到我的错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:09:46.343

`WebRequest.GetResponse`Silverlight 上不存在。您必须使用异步方法`BeginGetResponse`和`EndGetResponse`.

对于 StatusCode，您必须首先将 WebResponse 转换为 HttpWebResponse：

```
var response = (HttpWebResponse)request.EndGetResponse(asyncResult); 
```

# c# - 在 ftp 服务器上上传文件时出错

> ID：10602480
> 
> 赞同：0
> 
> 时间：2012-05-15T14:04:41.833
> 
> 标签：c#, asp.net

请帮帮我，我有一个很大的问题。

我想使用asp.net c#在godaddy ftp服务器上上传一个文件。当我在 Visual Studio 中运行应用程序时，文件在 ftp 服务器上成功创建，但是，当我直接使用 (www.domain/page.aspx) 之类的 url 创建此文件时，我收到此错误（使用 asp.net 4.0）：

> 无法连接到远程服务器

当我使用 asp.net 3.5 时出现此错误：

> 请求“System.Net.WebPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型的权限失败。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:24:00.207

确保您使用的凭据可以访问 FTP。此外，您的网址可能类似于[ftp://www.domain.com/](ftp://www.domain.com/)

这是我过去使用的一些 FTP 代码。

```
public class FTP
{
    private String Username { get; set; }
    private String Password { get; set; }
    private String Host { get; set; }
    private Int32 Port { get; set; }

    public FTP(String username, String password, String host, Int32 port)
    {
        Username = username;
        Password = password;
        Host = host;
        Port = port;
    }

    private Uri BuildServerUri(string Path)
    {
        return new Uri(String.Format("ftp://{0}:{1}/{2}", Host, Port, Path));
    }

    /// <summary>
    /// Upload a byte[] to the FTP server
    /// </summary>
    /// <param name="path">Path on the FTP server (upload/myfile.txt)</param>
    /// <param name="Data">A byte[] containing the data to upload</param>
    /// <returns>The server response in a byte[]</returns>
    private byte[] UploadData(string path, byte[] Data)
    {
        // Get the object used to communicate with the server.
        WebClient request = new WebClient();

        try
        {
            // Logon to the server using username + password
            request.Credentials = new NetworkCredential(Username, Password);
            return request.UploadData(BuildServerUri(path), Data);
        }
        finally
        {
            if (request != null)
                request.Dispose();
        }
    }

    /// <summary>
    /// Load a file from disk and upload it to the FTP server
    /// </summary>
    /// <param name="ftppath">Path on the FTP server (/upload/myfile.txt)</param>
    /// <param name="srcfile">File on the local harddisk to upload</param>
    /// <returns>The server response in a byte[]</returns>
    public byte[] UploadFile(string ftppath, string srcfile)
    {
        // Read the data from disk
        FileStream fs = new FileStream(srcfile, FileMode.Open);
        try
        {
            byte[] FileData = new byte[fs.Length];

            int numBytesToRead = (int)fs.Length;
            int numBytesRead = 0;
            while (numBytesToRead > 0)
            {
                // Read may return anything from 0 to numBytesToRead.
                int n = fs.Read(FileData, numBytesRead, numBytesToRead);

                // Break when the end of the file is reached.
                if (n == 0) break;

                numBytesRead += n;
                numBytesToRead -= n;
            }

            numBytesToRead = FileData.Length;

            // Upload the data from the buffer
            return UploadData(ftppath, FileData);
        }
        finally
        {
            if (fs != null)
                fs.Close();
            if (fs != null)
                fs.Dispose();
        }
    }
} 
```

# cakephp-1.3 - simple CakePHP router to JSON

> ID：10602483
> 
> 赞同：1
> 
> 时间：2012-05-15T14:04:53.647
> 
> 标签：cakephp-1.3

In CakePHP 1.3 I have this router in *routes.php*:

```
Router::connect('/listing/*', array('controller' => 'items', 'action' => 'index')); 
```

My question is, how can I create an `html-form` with submit action to *www.mysite.com/listing.json*?

This is the form I currently have in the folder *app/views/items/index.cpt*.

```
$this->Form->create( 'Item' ); // HTML: <form action="/listing" method="post"> 
```

I tried to change the submit-action to "*listing.json*", but it didn't work because "*/items/*" is being prepend, and I don't want that.

```
$this->Form->create( 'Item', array( 'action' => 'listing.json' ) ); // HTML: <form action="/items/listing.json" method="post"> 
```

++

In other words, I want the form action to be like this: any idea?

```
<form action="listing.json" method="post"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:50:41.053

First you will need to configure your router to handle .json.

`Router::parseExtensions('json');`

Then do the form creation like this.

`$this->Form->create( 'Item', array('url' => array('controller'=>'items', 'action'=>'index', 'ext' => 'json')));`

I believe this would work.

But... There's a problem with what you are trying to do. Even though you mark the submit URL as a *.json, it doesn't mean you will be posting a json request. With this change, the only thing you would be doing is posting a html form to a url named as a *.json.

# algorithm - 在队列中渲染实体？

> ID：10602484
> 
> 赞同：5
> 
> 时间：2012-05-15T14:04:56.393
> 
> 标签：algorithm, rendering, game-engine

我正在研究游戏引擎架构，我遇到了一个实现，其中场景图中的每个节点都放置在特定队列（不透明、透明、正交等）中，队列以特定顺序呈现：不透明、透明, 正交。这种技术/算法是否有名称以供进一步研究？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T18:23:34.073

我不知道您提到的整体排序是否有名称，但我会假设透明队列是从最远到最近排序的，这称为 Alpha 排序（或[透明排序](http://www.opengl.org/wiki/Transparency_Sorting)）。不透明对象不需要这个，因此它们可以先行或与透明对象一起排序，但不必费心对它们进行排序显然更快，因为您可以让深度缓冲所有相关工作。

# c# - 更改连接字符串

> ID：10602486
> 
> 赞同：-2
> 
> 时间：2012-05-15T14:05:04.080
> 
> 标签：c#, winforms, deployment, connection-string, application-settings

当我将 myProg.exe 安装到客户端计算机时，我必须调整 connectionString。

所以我打开文件 MyProg.exe.config，并修改了 connectionString，但它不起作用。

然后我找到了这篇[文章](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=FR-FR&k=k%28APPLICATIONSETTINGSOVERVIEW%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29&rd=true)。现在的问题是，当我将访问权限修改为公共时，我无法编译/部署它。

我的 App.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>

    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="FrontEnd_Offline.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <system.windows.forms jitDebugging="true" />
  <connectionStrings>
    <add name="Soft8Exp_ClientConnStr" connectionString="Data Source=xxxxx;Initial Catalog=xxxxx;User ID=sa;Password=xxxxx" providerName="System.Data.SqlClient" />
    <add name="Soft8Exp_ClientEntities" connectionString="metadata=res://*/Domain.Entite_T.csdl|res://*/Domain.Entite_T.ssdl|res://*/Domain.Entite_T.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=xxxxx;initial catalog=xxxxx;user id=sa;password=xxxxx;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="FrontEnd_Offline.Properties.Settings.Soft8Exp_ClientConnectionString" connectionString="Data Source=xxxxx;Initial Catalog=xxxxx;User ID=sa;Password=xxxxx" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <applicationSettings>
    <FrontEnd_Offline.Properties.Settings>
      <setting name="NO_ORDRE" serializeAs="String">
        <value />
      </setting>
    </FrontEnd_Offline.Properties.Settings>
  </applicationSettings>
</configuration> 
```

和类连接：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;

using System.Data;
using System.Configuration;

namespace FrontEnd_Offline.Domain
{
    class Connexion : IDisposable 
    {
        public SqlConnection conn;
        public SqlConnection GetConnected()
        {
            try
            {
                String strConnectionString = ConfigurationManager.ConnectionStrings["Soft8Exp_ClientConnStr"].ConnectionString;
                conn = new SqlConnection(strConnectionString);
            }
            catch (Exception excThrown)
            {
                conn = null;
                throw new Exception(excThrown.InnerException.Message, excThrown);
            }

            // Ouverture et restitution de la connexion en cours
            if (conn.State == ConnectionState.Closed) conn.Open();
            return conn;
        }

        public Boolean IsConnected
        {
            get { return (conn != null) && (conn.State != ConnectionState.Closed) && (conn.State != ConnectionState.Broken); }
        }

        public void CloseConnection()
        {
            // Libération de la connexion si elle existe
            if (IsConnected)
            {
                conn.Close();
                conn = null;

            }

        }

        public void Dispose()
        {
            CloseConnection();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:06:55.717

您一开始并没有说您使用的是 ClickOnce。那里的情况有所不同：配置文件存储在用户的配置文件中。您不能更改文件后缀（仅通过您的应用程序进行用户设置）。

要使用新的连接字符串更新 ClickOnce 程序，我建议如下：

1.  创建一个名为“SettingsUpgradeNeeded”的新用户设置，并`true`在设置设计器中将其设置为
2.  将以下代码添加到应用程序的启动代码（Program.cs 或 App.cs）

    ```
    if (Properties.Settings.Default.SettingsUpgradeNeeded)
    {
        Properties.Settings.Default.Upgrade();
        Properties.Settings.Default.SettingsUpgradeNeeded = false;
        Properties.Settings.Default.Save();
    } 
    ```

3.  发布新的更新。

更改连接的另一种方法是（如果您只在代码中使用，这更可取`SqlConnection`）：

1.  停止使用该`ConnectionStrings`部分
2.  为每个连接参数创建一个设置（例如：数据库服务器、数据库名称等）
3.  使用`SqlConnectionStringBuilder`从这些设置生成连接字符串

**编辑**
您希望用户能够更改连接参数：

1.  为连接数据库所需的每个参数创建一个**用户设置**（例如：服务器、数据库、故障转移伙伴、用户名、身份验证方法等）
2.  创建一个对话框，您可以在其中配置这些值
3.  使用`SqlConnectionStringBuilder`从这些值创建连接字符串
4.  将该连接字符串用于所有数据库连接

例子：

```
SqlConnectionStringBuilder sb = new SqlConnectionStringBuilder();
sb.DataSource = Properties.Settings.Default.DBServerName;
sb.InitialCatalog = Properties.Settings.Default.DBDatabaseName;
sb.IntegratedSecurity = Properties.Settings.Default.DBUseIntegratedSecurity;
if (!sb.IntegratedSecurity)
{
    sb.UserId = Properties.Settings.Default.DBUserName;
    sb.Password = Properties.Settings.Default.DBPassword;
}

using (SqlConnection conn = new SqlConnect(sb.ConnectionString))
{
    ...
} 
```

我会在 Program.cs 或可以从 .cs 文件`App`返回连接字符串的类中生成一个静态属性`SqlConnectionStringBuilder`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T14:08:05.720

你的意思是连接字符串到你的数据库吗？如果是这样，它应该在您的数据库连接类中进行更改。如果您的数据库也存储在本地，则本地设备上的 connectionString 应该类似于普通路径。像这样：

```
"C:\\Some_location\\database.extension" 
```

扩展名取决于您使用的数据库类型，将此字符串更改为数据库的位置。

# ruby-on-rails-3 - 通过 assets:precompile assets pipeline 为 IE 拆分 css 文件的最佳方法是什么

> ID：10602487
> 
> 赞同：6
> 
> 时间：2012-05-15T14:05:05.537
> 
> 标签：ruby-on-rails-3, asset-pipeline, ruby-on-rails-3.2

我正在使用 CristianPeters[的](https://github.com/ChristianPeters)[CssSplitter 模块](https://gist.github.com/2398394)。我希望在 assets:precompile 任务期间发生拆分，到目前为止我成功的唯一方法是修补 Sprockets::StaticCompiler。希望有更好的方法来做到这一点。

我很感激任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:43:10.453

如果您正在专门为 IE 编写样式表，最好不要将它们全部连接在一起。因此，我将有一个主清单文件，我将在其中将所有常规样式表文件一起加载，并使用条件注释为 IE 提供 1/2/3 个清单 (http://www.quirksmode. org/css/condcom.html）：

```
<%= stylesheet_link_tag :application %> // main manifest
<!--[if IE 6]>
<%= stylesheet_link_tag :ie6 %> // ie6 manifest
<![endif]-->
<!--[if IE 7]> .... 
```

以这种方式，我可以确保 CSS 加载性能不会在非 IE 浏览器中受到损害，并且我的 IE 特定样式表不会被加载到它们无论如何都不应该加载的各种版本（IE6 IE7 中的更正，p.ex.）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:09:20.557

遇到这个问题时，我只是将清单拆分为 2 ：

*   基数为 1（重置、推特引导程序，...）和
*   另一个用于特定于应用程序的 CSS

# batch-file - 打开 Tor 浏览器和几个网站的批处理文件

> ID：10602490
> 
> 赞同：0
> 
> 时间：2012-05-15T14:05:16.517
> 
> 标签：batch-file, tor, tor-browser-bundle

我正在尝试获取一个批处理文件来打开 tor，但我有浏览器捆绑包，它在技术上不是软件，所以我不知道如何使用批处理文件启动它。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-11T01:16:29.900

我在桌面上放了一个 Tor 的快捷方式，然后运行它。

创建 Tor 的快捷方式，并在批处理文件中输入：

开始 "" "C:\Users\%USERNAME%\Desktop\SHORTCUT.lnk" "site1" "site2" "

只需将 SHORTCUTNAME 替换为快捷方式的名称，将 site1 和 site2 替换为您想要的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T21:29:05.853

解压后的包里面是“App/tor”——也就是tor二进制文件。但是，了解您为什么要单独启动 tor 会更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T13:50:02.633

好吧，我知道如何在批处理文件中运行 internet 命令，但不知道如何运行自定义选择。

尝试下载 firefox（网络浏览器）（很棒），然后下载 Fox 选项卡上的添加。当您打开新标签时，它允许您从自己的预制捆绑包中选择一个网站。

很抱歉无法回答问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:21:06.223

您可以使用 PUSHD 命令进入浏览器文件夹，然后使用 START 命令执行程序。

我希望我有所帮助。

# c++ - 如何检查对象是否在数组中？

> ID：10602491
> 
> 赞同：0
> 
> 时间：2012-05-15T14:05:16.680
> 
> 标签：c++, arrays, function, pointers

我知道如果数组中甚至没有对象，仍然有一些地址。但是我想找到解决方案来检查我们将询问的特定索引下是否有对象。我需要有这样的机制来向多边形添加新点。但在此之前，我需要知道如果有对象，对象的计数器是否应该增长或保持相同的值。也许我应该尝试用 填充所有数组`NULL`？

**主文件**

```
#include <iostream>
#include "punkt.h"
#include "wielokat.h"

using namespace std;

int main(int argc, char *argv[])
{
    Punkt  p1("p1", 10, 20); // 10x20
    Punkt  p2("p2", 1, 1);   //1x1

    Wielokat w1 ("square", 4);

    w1.set(p1,0);
    w1.set(p2,0);
    w1.showWielokat();

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

**维洛卡特.cpp**

```
#include "punkt.h"
#include "wielokat.h"
#include <iostream>

using namespace std;

void Wielokat::increase(int n)
{
    m_ilosc = m_ilosc + n;
    m_tab = new Punkt * [m_ilosc];  
    cout<<"Dodaj "<<m_ilosc<<endl;
}

void Wielokat::decrease(int n)
{
    m_ilosc = m_ilosc - n;
    if(m_ilosc<0){ m_ilosc=0;}
    m_tab = new Punkt * [m_ilosc]; 
    cout<<"Odejmij "<<m_ilosc<<endl;
}
void Wielokat::set(Punkt p, int pos)
{
    //How to check if there was already object ?
    m_tab[pos] = new Punkt(p);
    m_counter++;
}

void Wielokat::showWielokat()
{
    for(int i=0; i<m_counter; i++){
        m_tab[i]->show();
    }

}
void Wielokat::crash(int pos){
    //after delete all elements moved one by one to the left side
    delete m_tab[pos];
    for(int i=pos; i<m_ilosc; i++){
        m_tab[i]=m_tab[pos+1];
    }
}
double Wielokat::getParimeter(){
    //here is function whih will count circuit 
} 
```

**维洛卡特.h**

```
class Wielokat {

    public:

    Wielokat(char* nazwa, int ilosc):m_nazwa(nazwa), m_ilosc(ilosc) 
    {
        m_tab = new Punkt * [m_ilosc]; 
        m_counter = 0;
    }

    Wielokat(const Wielokat& p): m_ilosc(p.m_ilosc), m_nazwa(strdup(p.m_nazwa))
    {}

    ~Wielokat()
    {
        for(int i=0; i<m_counter; i++){
            delete m_tab[i];
        }
        delete m_tab;
    }

    //Function:
    void increase(int n);
    void decrease(int n);
    void set(Punkt p, int pos);
    void crash(int pos);  //delete
    void showWielokat();
    double getParimeter();

    private:
    Punkt **m_tab;  //our tab of elemenst
    char* m_nazwa;
    int m_ilosc;
    int m_counter;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T14:06:48.077

您正在使用 C++ 进行编码，这意味着您可以拥有一个`std::vector<Punkt>`（或一个`std::vector<Punkt*>`，如果需要多态性）。不要重新发明轮子；用它。

使用`std::vector`所有手动分配代码根本不需要，您可以检查有多少元素`vec.size()`。

**更新：**好的，所以你不能使用`vector`，因为这是家庭作业。

另一种解决方案是在初始化数组时将其内存清零，然后`m_tab[i] == 0`在尝试使用 object 之前检查是否`i`。使用[`memset`](http://www.cplusplus.com/reference/clibrary/cstring/memset/)，看起来像

```
// WARNING! INCOMPLETE/BUGGY CODE!
m_tab = new Punkt* [m_ilosc];
memset(m_tab, 0, m_ilosc * sizeof(m_tab[0])); 
```

而且由于您是从类中的两个地方执行此操作，因此您应该将此逻辑移动到一个单独的`private`方法中。

关于不完整/错误的部分，上面的这两行有一些问题：

1.  “旧”数组（如果存在）不是`delete[]`d；这是内存泄漏。
2.  应将“旧”数组（如果存在）中的值复制到新数组；事情现在的样子，他们只是迷失了。

您应该在下一步修复这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:09:26.907

如果您需要检查集合中的值，最好使用关联容器，例如来自 STL的 a`map`或 a 。`set`我从您的代码中看不出有任何理由可以很容易地交换它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:11:13.240

除了 Jon 的建议之外，C++ 不会牵着你的手，所以你需要显式维护数组中的有效元素：要么通过 a) 使用 max-valid-index 要么 b) 使用`NULL`无效条目的值（最好同时使用两者）

*注意*： using`NULL`仅适用于在数组中存储指针。否则，您将需要一个无效值（例如`Punkt`，坐标太大/太小）

# spring - 授权失败后grails spring安全重定向

> ID：10602494
> 
> 赞同：0
> 
> 时间：2012-05-15T14:05:35.343
> 
> 标签：spring, security, grails

我有一个请求，如果用户未能在方法调用中授权，我们需要将他重定向到特定页面

用例 用户可以只用姓名和电子邮件在系统上注册，但后来当他尝试执行某些操作时，他需要填写整个配置文件。

我们将使用 HAS_FULL_PROFILE 角色保护方法

它基于授权，而不是身份验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:44:01.823

不太确定问题是什么，但听起来您想使用 URL 映射结合配置文件来控制事物。

试试[这个](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html#5.2%20Simple%20Map%20in%20Config.groovy)链接。设置您的 URL 映射，以便只有具有 HAS_FULL_PROFILE 的用户才能到达某些区域，直到他们将他们的个人资料“升级”到这个区域。

# jquery - jquery - 如何为此选择，获取计数并获取所选组中的当前位置

> ID：10602497
> 
> 赞同：0
> 
> 时间：2012-05-15T14:05:49.667
> 
> 标签：jquery

我有一组像这样标记的 img 框

我想得到一个计数并拥有这个：

```
<div data-location-id="6" class="img-box-set">my img</div> 
```

我有：

```
var location_id = $(this).data('location-id');
// fixed per comment #1 below
var count_of=$('.img-box-set[data-location-id='+location_id+']').length;
alert("here is count_of" + count_of); 
```

但长度总是返回 0。我在选择器或长度属性上做错了吗？

另外，假设我有 4 个，我将如何确定我所处的位置（基于 0 或基于 1）？

谢谢

**编辑＃1** 所以我认为这可行，但不是（根据@jack）和索引文档。（更新 - 这确实有效；有语法错误）

```
var index_box=$('.img-box-set[data-location-id='+location_id+']').index(this);
alert("here is the index" + index_box); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:08:11.270

如果你真的想在 上搜索`.data()`，你可以这样做：

```
var count = $('.img-box-set')
    .filter(function() {
        return $(this).data('location-id') == location_id;
    })
    .length 
```

通过使用返回位置[`.index()`](http://api.jquery.com/index/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:11:33.793

```
$(".img-box-set").each(function(index,value){

   alert(index);// The position of image box set

   var location_id = $(this).data('location-id');
   var count_of=$('.img-box-set[data-location-id="'+location_id+'"]').length;
   alert("here is count_of" + count_of);

}); 
```

如果你想知道所有的长度，`.img-box-set`那么你可以简单地写

`$(".img-box-set").length`在函数中

**位置**

你可以在你的函数中运行

```
 var elem_id =$(this).attr("id");
 var pos=-1; 
  $(".img-box-set").each(function(index,value){ 

     if($(this).attr("id")==elem_id){
        pos=index;
     }
});
alert(pos); 
```

选择器可以是`$(".img-box-set")`或`$('.img-box-set[data-location-id="'+location_id+'"]')` 根据您的要求。

# python - Numpy从指定点查找3d坐标距离

> ID：10602500
> 
> 赞同：0
> 
> 时间：2012-05-15T14:05:59.800
> 
> 标签：python, loops, numpy

我正在寻找到 python 中指定点的 3D 距离。现在，我正在使用 for 循环。但是计算起来有点慢。

这是python代码：

```
 for i_y in xrange(0,500,100):
        y = round(i_y/100.00,2)

        for i_x in xrange(0, 800, 1):
            x = round(i_x/100.00,2)

            for i_z in xrange(500, 0, -1):
                z = round(i_z/100.00,2)

                    for key in specifiedPoints.keys():
                    a = specifiedPoints[key]

                        subx1 = x-a.p1.x
                        suby1 = y-a.p1.y
                        subz1 = z-a.p1.z
                        subx2 = x-a.p2.x
                        suby2 = y-a.p2.y
                        subz2 = z-a.p2.z
                        subx3 = x-a.p3.x
                        suby3 = y-a.p3.y
                        subz3 = z-a.p3.z

                        distver1 = math.sqrt(subx1*subx1+suby1*suby1+subz1*subz1)
                        distver2 = math.sqrt(subx2*subx2+suby2*suby2+subz2*subz2)        
                        distver3 = math.sqrt(subx3*subx3+suby3*suby3+subz3*subz3)

                        if distver1 <= 1 or distver2<=1 or distver3<=1:
                            print "close point:", x, y, z 
```

我做了很多工作，但我找不到一个清晰的教程来显示 numpy 中的相等循环。

如何在 numpy 中进行此操作以加速循环？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:03:41.530

我会看，`scipy.spatial.distance`尤其是`cdist`and`pdist`方法：

[http://docs.scipy.org/doc/scipy/reference/spatial.distance.html](http://docs.scipy.org/doc/scipy/reference/spatial.distance.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:14:53.987

您的 arange 函数可以直接返回您为 x、y 和 z 计算的值，这将节省大量计算。根本不需要 round 函数。您运行循环 5*800*500 = 2.000.000 次，每次除以 100 并舍入。最好这样做：

```
 for y in np.arange(0,5,1):
        for x in np.arange(0,8,0.01):
            for z in np.arange(5,0,-0.01): 
```

将点收集在一个数组中，如下面的代码所示。

```
 point = np.array([x,y,z])
    a1 = np.array([a.p1.x,a.p1.y,a.p1.z])
    a2 = np.array([a.p2.x,a.p2.y,a.p2.z])
    a3 = np.array([a.p3.x,a.p3.y,a.p3.z])

    if np.linalg.norm(point-a1) <=1:
        print point
        continue
    if np.linalg.norm(point-a2) <=1:
        print point
        continue
    if np.linalg.norm(point-a3) <=1:
        print point
        continue 
```

最好将点直接存储为对象指定点 [key] 中的 numpy 数组，而不是在每个循环中一次又一次地收集它们。这将为您提供以下代码：

```
 point = np.array([x,y,z])

    if np.linalg.norm(point-a.p1) <=1:
        print point
        continue
    if np.linalg.norm(point-a.p2) <=1:
        print point
        continue
    if np.linalg.norm(point-a.p3) <=1:
        print point
        continue 
```

# javascript - user.js如何在firefox中工作详细

> ID：10602504
> 
> 赞同：1
> 
> 时间：2012-05-15T14:06:09.200
> 
> 标签：javascript, firefox, configuration

我想知道首选项文件为用户提供了多少权力[以及`user.js`它](https://developer.mozilla.org/en/Preferences/A_brief_guide_to_Mozilla_preferences#Preferences_files)如何更详细地工作我试图用谷歌搜索该信息，但我找不到任何描述性很强的东西。

据我所知，user.js 是一个 javascript 文件，它在浏览器启动时执行一次，并覆盖之前设置的所有首选项。

我感兴趣的是您是否可以使用可以在其他 javascript 文件中使用的任何逻辑。

`if-else`放在这个文件中时，简单的语句会被执行吗？它是否能够使用在浏览器中执行时可用的javascript函数（如`setTimeout`）？你能像其他js文件一样使用构造吗？我的意思是编写自己的函数和变量等。

或者 js 这个名字是骗人的，没有任何 js 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:07:27.363

据我所知，您只能从*user.js调用**pref()*和 *user_pref()* 函数。我尝试根据星期几做一些有条件的偏好，但是所有没有与这些函数一起标注的行都被忽略了。

 *当时，我也找不到任何关于这个文件使用的好文档，但是对于我的测试，该文件的使用仅限于这两个功能。

对于可以通过 .XPI 包添加自定义 user.js 文件的系统管理员非常有用，但不适用于做花哨的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:37:41.020

它看起来就像一个 JavaScript 文件。曾几何时，在 Netscape 3 和 4 中它实际上是，但现在它只是一个具有 .js 扩展名和非常受限制的语法的文件，由单独的（非 JS）解析器解析并且不以任何方式执行。*

# iphone - iphone：动画停止时删除CALayer，CALayer在消失前闪烁

> ID：10602505
> 
> 赞同：14
> 
> 时间：2012-05-15T14:06:15.813
> 
> 标签：iphone, core-animation, calayer

*   在 XCode 中创建一个简单的项目
*   设置视图以接收多点触控事件
*   在 touchesBegan 中响应，检测到触摸事件时创建 CALayer
*   为 CALayer 制作不透明淡出动画
*   当动画停止时，从父级移除 CALayer

期望：CALayer 正常消失

实际：CALayer 在消失前闪烁（闪烁）

完整源代码：

```
@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.view.multipleTouchEnabled = YES;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch* touch in touches) {
        CGPoint p = [touch locationInView:self.view];

        //NSLog(@"touch=%@ p=%@", touch, NSStringFromCGPoint(p));

        CALayer *layer = [CALayer layer];
        layer.position = p;
        layer.bounds = CGRectMake(0, 0, 70, 70);
        layer.cornerRadius = 30;
        layer.masksToBounds = NO;
        layer.backgroundColor = [UIColor colorWithRed:102.0/255.0 green:156.0/255.0 blue:255.0/255.0 alpha:0.8].CGColor;
        layer.shouldRasterize = YES;

        CABasicAnimation *fadeOutAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
        fadeOutAnimation.fromValue = [NSNumber numberWithFloat:1.0];
        fadeOutAnimation.toValue = [NSNumber numberWithFloat:0.0];
        fadeOutAnimation.duration = 0.5;
        fadeOutAnimation.delegate = self;
        fadeOutAnimation.removedOnCompletion = NO;
        [fadeOutAnimation setValue:layer forKey:@"parentLayer"];
        [layer addAnimation:fadeOutAnimation forKey:@"opacity"];

        [self.view.layer addSublayer:layer];
    }
}

- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag {
    if(flag) {
        CALayer *layer = [theAnimation valueForKey:@"parentLayer"];
        if(layer) {
            layer.opaque = NO;
            layer.opacity = 0.0;
            //layer.hidden = YES;
            //NSLog(@"The layer object was: %@ (%@)", layer, [layer name]);
            [layer removeFromSuperlayer];
            [layer removeAllAnimations];
        }
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-16T07:59:58.040

**tl; dr：**`fillMode`在将动画`kCAFillModeForwards`添加到图层之前，将动画设置为或将值更改为最终值。

* * *

基本动画只是动画期间的视觉动画，不会改变实际值。当您将动画设置为在完成后不被删除时，这意味着该图层仍将动画对象作为其动画之一进行引用。然而，它已经运行了它的动画。

动画外观（填充模式）的默认行为是`kCAFillModeRemoved`，这意味着在动画持续时间之后，图层看起来就像动画从未发生过一样。通过将填充模式更改为`kCAFillModeForwards`或`kCAFillModeBoth`您可以使图层看起来好像图层保持在动画的结束状态。

*您可以在动画开始时做同样的事情，`kCAFillModeBackwards`但它主要适用于您为动画设置开始时间的情况。*

因此，要使动画看起来像动画的最终状态，您可以将填充模式设置为`...Forwards`而不删除动画，或者将图层的实际值更改为您希望它们在添加之前的值动画到视图。这将更改值，然后从旧值动画到新值。

# html - 960gs 行槽

> ID：10602508
> 
> 赞同：0
> 
> 时间：2012-05-15T14:06:33.737
> 
> 标签：html, css, 960.gs

我刚刚开始使用 960 网格系统进行开发，但是我对如何控制行之间的排水沟有点迷茫。目前，以下代码将简单地将两个 grid_5 框堆叠在一起，没有装订线。

```
<div class="grid_5">
Test 1
</div>
<div class="clear"></div>
<div class="grid_5">
Test 2
</div> 
```

960 gs 的所有示例都经过格式化，以便所有行都有一个很好的一致垂直间距。有谁知道这是如何实现的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:15:19.950

通过查看[960gs 演示](http://960.gs/demo.html)，您可以看到定义`margin`在`text.css`：

```
p, dl, hr, h1, h2, h3, h4, h5, h6, ol, ul, pre, table, address, fieldset, figure {
    margin-bottom: 20px;
} 
```

# nhibernate-mapping - 错误：没有持久性：web.BackEndModel.TeamDetailsDb

> ID：10602513
> 
> 赞同：0
> 
> 时间：2012-05-15T14:06:59.763
> 
> 标签：nhibernate-mapping

我试图在我的项目中运行 Nhibernate，但它通过一个错误“没有持久性：web.BackEndModel.TeamDetailsDb”是我的解决方案探索。

我的项目层次结构

> 解决方案：NhibernateClient
> 
> 项目：网络
> 
> ```
> folder : BackEndModel
> 
>   File : TeamDetailsDb.cs
> 
> folder : Controller
> 
> folder : model
> 
> folder : view 
> ```
> 
> 文件：web.hbm.xml

这是我用来保存数据的一段代码

```
NHibernate.Cfg.Configuration cfg = new NHibernate.Cfg.Configuration();
            cfg.SetProperty("dialect", "NHibernate.Dialect.MySQLDialect");
            cfg.SetProperty("connection.driver_class", "NHibernate.Driver.SqlClientDriver");
            cfg.SetProperty("connection.connection_string", "Data Source=.;Initial Catalog=OPLsite;Integrated Security=True");
            //cfg.SetProperty("proxyfactory.factory_class", "NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu");
           // cfg.AddAssembly("");
            ISessionFactory sessionFactory = cfg.BuildSessionFactory();
            ISession session = sessionFactory.OpenSession();
            ITransaction transaction = session.BeginTransaction();

            TeamDetailsDb command = new TeamDetailsDb();
            command.OwnerName = collection["OwnerName"];
            command.TeamName = collection["TeamName"];
            session.Save(command);
            transaction.Commit();
            session.Close(); 
```

这是我的 web.hbm.xml

```
 <?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   namespace="web.BackEndModel.TeamDetailsDb"
                   assembly="web">

  <class name="TeamDetailsDb" table="TeamDetails">
    <id name="id" column="id" type="int">
      <generator class="identity"></generator>
    </id>
    <property name="OwnerName"  column="OwnerName" type="String"/>
    <property name="TeamName"   column="TeamName"  type="String"/>
    <mapping resource="web.hbm.xml" assembly="web" />
  </class>
</hibernate-mapping> 
```

这是我的网络配置文件..

```
 <configSections>
    <section  name="nhibernate" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>

  <nhibernate>
    <add key="hibernate.connection.provider" value="NHibernate.Connection.DriverConnectionProvider" />
    <add key="hibernate.dialect" value="NHibernate.Dialect.MsSql2000Dialect" />
    <add key="hibernate.connection.driver_class" value="NHibernate.Driver.SqlClientDriver" />
    <add key="hibernate.connection.connection_string" value="Data Source=myServer;Initial Catalog=myDatabase;Persist Security Info=True;" />
  </nhibernate> 
```

我的团队DetailsDb.cs

我对此很陌生，请帮助我，请因为我的时间不多了....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:30:29.480

是的，谢谢大家，我发现它不起作用的原因我改变了

```
cfg.SetProperty("dialect", "NHibernate.Dialect.MySQLDialect"); 
```

至

```
cfg.SetProperty("dialect", "NHibernate.Dialect.MsSql2008Dialect"); 
```

我也将*Web.hbm.xml*更改为*TeamDetailsDb.hbm.xml*

现在我的 TeamDetailsDb.hbm.xml 是

```
 <?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   namespace="web.BackEndModel"
                   assembly="web">

  <class name="TeamDetailsDb" table="TeamDetails">
    <id name="id" column="id" type="int">
      <generator class="identity"></generator>
    </id>
    <property name="OwnerName"  column="OwnerName" type="String"/>
    <property name="TeamName"   column="TeamName"  type="String"/>

  </class>
</hibernate-mapping> 
```

# java - 使用 itext 在 pdf 中添加复选标记

> ID：10602514
> 
> 赞同：0
> 
> 时间：2012-05-15T14:07:02.717
> 
> 标签：java, itext

我正在使用 iText（java 库）生成 PDF 文件。在这里我有一段我必须打勾

```
PdfPCell cell95 = new PdfPCell(new Paragraph((new Chunk('\u2713', FontFactory.getFont(FontFactory.HELVETICA, 11, Font.BOLD, new BaseColor(0,0,0)))))); 
```

我正在使用它，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:28:30.950

您不能将 unicode 直接用于 PDFPCell。

相反，创建复选标记的图像并将其插入 PDFPCell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:09:27.500

[此 stackoverflow 帖子](https://stackoverflow.com/questions/6014211/itext-arabic-font-coming-as-question-marks)和[itext-questions 中的此项目](http://www.mail-archive.com/itext-questions@lists.sourceforge.net/msg55952.html)表明您需要使用 unicode 字符集而不是默认的 Windows CP1252 字符集创建字体 - 尝试使用`getFont`编码说明符的重载：

```
FontFactory.getFont(FontFactory.HELVETICA, BaseFont.IDENTITY_H, 11, Font.BOLD, new BaseColor(0,0,0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:48:50.467

使用此代码：

```
 String FONT = "C:/dev/dejavu-fonts-ttf-2.33/ttf/DejaVuSans.ttf";
    FontSelector selector = new FontSelector();
    BaseFont base = BaseFont.createFont(FONT, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
    selector.addFont(FontFactory.getFont(FontFactory.HELVETICA, 12));
    selector.addFont(new Font(base, 12));
    Phrase ph = selector.process(text);
    document.add(new Paragraph(ph)); 
```

这里的重点是 1) 设置 BaseFont.IDENTITY_H; 2）只有一些字体提供“复选标记”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-07T09:40:57.180

try this solved. Download the dejavu-sans from [https://www.fontsquirrel.com/fonts/dejavu-sans](https://www.fontsquirrel.com/fonts/dejavu-sans). and keep it in local.

use the below code to write tick symbol into PDF doc.

```
 private static void writeUsingIText() {

    Document document = new Document();

    try {

        PdfWriter.getInstance(document, new FileOutputStream(new File(FILE_NAME)));

        //open
        document.open();

        Paragraph p = new Paragraph();
        p.add("This is my paragraph 1");
        p.setAlignment(Element.ALIGN_CENTER);

        document.add(p);

        Paragraph p2 = new Paragraph();
        p2.add("This is my paragraph 2"); //no alignment

        document.add(p2);

        Font f = new Font();
        f.setStyle(Font.BOLD);
        f.setSize(8);

        document.add(new Paragraph("This is my paragraph 3", f));

        document.add(new Paragraph("This is my tick mark ", f));

        String FONT = "C:\\Users\\<username>\\Documents\\DejaVuSans.ttf";
        FontSelector selector = new FontSelector();
        BaseFont base = BaseFont.createFont(FONT, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
        selector.addFont(FontFactory.getFont(FontFactory.HELVETICA, 12));
        selector.addFont(new Font(base, 12));
        char tickSymbol=10003;
        String text = String.valueOf(tickSymbol);
        Phrase ph = selector.process(text);
        document.add(new Paragraph(ph));

        //close
        document.close();

        System.out.println("Done");

    } catch (FileNotFoundException | DocumentException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

# vbscript - 在 Windows 中检查端口可用性的 VBS 脚本

> ID：10602516
> 
> 赞同：2
> 
> 时间：2012-05-15T14:07:09.917
> 
> 标签：vbscript, wmi, network-protocols

我正在尝试检查某个软件的先决条件。我有一组脚本可以检查磁盘空间、内存可用性等内容。

我需要创建一个脚本来检查某些端口是否打开并且可以访问。我正在使用 WMI 检查其他网络配置项，但找不到任何有关检查端口可用性的参考。

任何人有任何想法，我可以找到一个 WMI 构造来让我查看和管理端口或任何其他关于如何构建新脚本来检查端口可用性的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:40:54.203

所以我找到了一个人不久前制作的脚本。它使用 netStat。应该可以在几乎任何 Windows 机器上工作。我想我对使用 WMI 的渴望蒙蔽了双眼。

```
Sub PortMonitor (strCommand2)

  Set StdOut = WScript.StdOut
  Set objShell = CreateObject("WScript.Shell")
  set objScriptExec = objShell.Exec (strCommand2)

  strPingResults = LCase(objScriptExec.StdOut.ReadAll)

  if len (strPingResults) > 0 then
     WScript.Echo "Established!"
  End if
end Sub

Dim strcommand
strCommand = "cmd /C ""netStat -n |find ""127.0.0.1:1137"" | find ""ESTABLISHED"""""
Call PortMonitor (strCommand) 
```

操作：[http ://www.experts-exchange.com/OS/Microsoft_Operating_Systems/Server/2003_Server/Q_27476065.html#](http://www.experts-exchange.com/OS/Microsoft_Operating_Systems/Server/2003_Server/Q_27476065.html#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:42:47.217

使用`cmd.exe`和`netstat`：

```
D:\ :: type openports.bat
@echo off
for /f "tokens=2" %%i in ('netstat -an -p tcp ^| findstr ABH') do (
        for /f "delims=: tokens=2" %%p in ("%%i") do (
                echo %%p
        )
)

D:\ :: openports.bat
80
135
445
... 
```

`netstat`请注意，这适用于德语版本的`ABHÖREN`; 对于英语，它可能类似于`LISTENING`，因此您必须将 替换为`findstr ABH`适当的英语表达。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-23T09:49:52.950

稍微不一样 ：

```
Function PortIsOpen(port)
    PortIsOpen = False
    Set StdOut = WScript.StdOut
    Set objShell = CreateObject("WScript.Shell")
    Set objScriptExec = objShell.Exec("cmd /C ""netstat -ano -p tcp | find "":" & port & " "" "" ")
    strPingResults = objScriptExec.StdOut.ReadAll
    If Len(strPingResults) > 0 Then PortIsOpen = True
End Function

Msgbox PortIsOpen("135") 
```

# eclipse-plugin - 是否可以为 Eclipse XML 编辑器实现自定义组件？

> ID：10602520
> 
> 赞同：1
> 
> 时间：2012-05-15T14:07:17.520
> 
> 标签：eclipse-plugin, eclipse-rcp

我们开发了一个基于复杂 XML 结构的业务网络框架。尤其是我们的全限定 ID 给 XML 模型增加了很多噪音。我们希望通过 Eclipse 的可视化编辑器增强来减少和分离不同的 ID。

我们有一个简单的方法，Eclipse 应该隐藏那些复杂的 ID 并将它们标记为给定的类型。我们有引用不同类型的 ID，因此我们可以对这个模型中的按钮进行不同的着色，并且可以很好地查看那些减少的 ID。

我们已经有一个自己的 XML 编辑器，它支持跨文件共享的 ID 自动完成。当我们能够实现这个概念时，那就太好了。

单击或悬停时，“按钮”应扩展到其复杂的 ID。第二个模拟图像显示展开状态，第一个模拟图像显示折叠状态。

![模拟富编辑器示例](../Images/58c40d7285e283fbe9f59eb18a483c19.png)

是否有任何想法，如果这甚至可以在 Eclipse RCP 中实现？从哪里开始？也许这个例子有点做作。我们希望扩展此功能并对这些“按钮”有更多想法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:00:00.563

可以使用 Eclipse 插件实现您自己的 Eclipse XML 编辑器。您可以扩展任何现有的 Eclipse 文本编辑器。

可以获得 Eclipse XML 编辑器的源代码，并扩展该源代码以满足您的需要。这也将被部署为 Eclipse 插件。

我认为不可能使用 Eclipse 扩展向 Eclipse XML 编辑器添加功能。

# c# - C# 枚举或 int 常量

> ID：10602526
> 
> 赞同：7
> 
> 时间：2012-05-15T14:07:34.207
> 
> 标签：c#

我有一组代表状态的值（ON，OFF，READY，...）。这些值也作为 int 字段存储在数据库中，所以我想知道最佳实践是否会说使其成为枚举或只是类上的一堆 const int 类型。

枚举似乎很适合人类阅读/编码，但它似乎隐藏了一个事实，即值映射到哪些整数很重要（否则从数据库检索的值将被实例化为不正确的状态）。稍后有人可能会进来，为枚举或其他东西添加一个新值，然后把整个事情扔掉。

哪种方法更好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T14:10:04.103

我认为`enum`仍然是可读性的最佳选择。但是，由于它的值存储在数据库中，您应该明确指定值：

```
enum State { On = 1, Off = 2, Ready = 3}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T14:10:54.963

有人添加新的枚举值与新的常量 int 有何不同？

请记住，您可以将枚举设置为特定的整数值。

拥抱可读性！

作为额外的奖励，您现在可以使用强类型来防止恶作剧，例如

```
Widget.state = 474; 
```

其中 474 与数据库中的状态不对应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:11:38.793

我会使用枚举并确保它很好地记录了枚举对应的表。

一堆 const int 的危险在于，该类型没有传达有效值是什么的指示，并且有人可以很容易地分配任何旧值。您的代码的恶意用户仍然可以通过强制转换来做到这一点，但您无法阻止某些人在自己的脚下开枪......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:18:06.793

如果您的值很少会改变，或者如果您在编辑和重新编译代码方面没有问题，那么请确保使用枚举并明确声明每个整数值。否则，我将创建一个从数据库中提取值的对象包装器（如果您担心性能，您可以随时缓存这些值）。然后与该对象包装器进行所有比较。除非您可以确保数据库中的值不会在不使用代码中的枚举更新代码的情况下发生变化，否则这只是易变且有风险的。如果你真的很喜欢冒险并且想开始发布代码，你可以用它做一些很酷的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T14:10:38.137

您也可以自己确定 Enum 中的值，即：

```
enum STATE {ON=2, OFF=9, READY=14}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T14:17:21.960

我会说枚举。它们为您提供了将机器格式转换为人类可读格式的选项。确保以这种方式很好地记录它

```
///Summary
/// About State Enum
///Summary
enum State : int
{ 
    ///Summary
    /// About Off Enum Value 
    ///Summary
    Off = 0, 
    ///Summary
    /// About On Enum Value
    ///Summary
    On,
    ///Summary
    /// About Ready Enum Value
    ///Summary
    Ready
}; 
```

无需为每个成员分配价值。从 0 开始，rest 将自动递增。

由于您的枚举是关于开/关的，因此您可以以布尔方式使用它。0 代表假或关，1 代表真或开。

您还可以将您的枚举转换为 int

```
int value = (int)State.On; // value will have 1 
```

将数据库中的值保存为 int。在检索时你可以这样做

```
State st = (State)int.Parse(mydatabasevalue); 
```

# jquery - 如何将 jQuery 脚本用于多个部门？

> ID：10602530
> 
> 赞同：1
> 
> 时间：2012-05-15T14:07:40.933
> 
> 标签：jquery, fade

我希望第一张照片淡出到下一张照片`mouseenter`并反转`mouseleave`。我想为多个 id 使用 jQuery 脚本

```
<script type="text/javascript">
$('#picone1').mouseenter(function(){
   $('#picone1').fadeToggle(500);
   $('#pictwo1').fadeToggle(500);
});
$('#pictwo1').mouseleave(function(){
   $('#picone1').fadeToggle(500);
   $('#pictwo1').fadeToggle(500);
});
</script>
<div id="fade">
   <img src="two.gif" width="100" height="100" id="pictwo1" style="display:none;"/>
   <img src="one.gif" width="100" height="100" id="picone1"/>
</div>
<div id="fade">
   <img src="two.gif" width="100" height="100" id="pictwo2" style="display:none;top: 300px;" />
   <img src="one.gif" width="100" height="100" id="picone2" style="top: 300px;" />
</div> 
```

如果我使用

```
$('#picone1,#picone2').mouseenter(function(){ 
```

如何仅淡化`div`鼠标进入的区域？

有没有其他或更好的脚本来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:13:43.677

在 jQuery 里面的任何事件回调都是`this`指触发事件的 DOM 元素。所以如果你这样做：

```
 $('#picone1, #picone2').mouseenter(function() {
     // $(this) refers to whichever div was entered, so you can do:
     $(this).fadeToggle(500);
     $(this).prev('img').fadeToggle(500); // get previous IMG in the DOM and fade
 }); 
```

我建议您是否经常这样做以提供图像类而不是 ID，因此您可以做类似`$('img.before')`的事情并相对参考其他 img。

# php - 重新加载父 shadowbox iframe 页面而不丢失 POST 数据

> ID：10602534
> 
> 赞同：0
> 
> 时间：2012-05-15T14:07:45.190
> 
> 标签：php, javascript, shadowbox

我有一个页面，用户可以在其中通过 POST 编辑带有过滤器的列表中的图片。当用户编辑某些内容时，它会在 shadowbox 窗口中打开。然后使用此代码提交父页面重新加载：

```
<script type="text/javascript">
noty({"text":"<?php if (isset($_GET["id"])){ echo "Foto modificada con éxito!"; }else{ echo "Foto creada con éxito!"; } ?>","layout":"center","type":"success","animateOpen":{"height":"toggle"},"animateClose":{"height":"toggle"},"speed":500,"timeout":5000,"closeButton":false,"closeOnSelfClick":true,"closeOnSelfOver":false, onClose:cerrar});
function cerrar(){
    window.parent.open('index.php?sec=galerias_de_fotos', '_self');
}
</script> 
```

问题是，当我重新加载父页面时，我丢失了 POST 值，因此过滤器丢失了。我需要在关闭影子框后刷新父页面而不丢失过滤器。

我也试过：

```
function cerrar(){
  parent.location.reload();
  parent.Shadowbox.close();
} 
```

这适用于重新加载但不适用于维护 POST 值。罕见的是，如果我用 F5 重新加载，POST 值会保持但不是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:01:00.657

一种解决方案是在会话中保存 post 值。

# wpf - WPF ListBox 将一般样式应用于 ListBoxItems

> ID：10602535
> 
> 赞同：0
> 
> 时间：2012-05-15T14:07:47.393
> 
> 标签：wpf, listbox

我是否可以在列表框声明中说所有项目都具有这种样式？目前我必须告诉每一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:23:45.183

您可以设置 ItemTemplate：

```
<Window.Resources>
    <Style x:Key="SomeControlStyle" TargetType="SomeControl" >
        <Setter Property="BorderThickness" Value="2"/>
    </Style>

    <DataTemplate x:Key="ADataTemplate">
        <SomeControl Style="{StaticResource SomeControlStyle}"/>
    </DataTemplate>
</Window.Resources>

<ListBox ItemsSource="{Binding}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <SomeControl Style="{StaticResource SomeControlStyle}"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

或者：

```
<ListBox ItemsSource="{Binding}" ItemTemplate="{StaticResource ADataTemplate}"/> 
```

# c# - 如何在 nhibernate 的查询中添加 groupby？

> ID：10602543
> 
> 赞同：5
> 
> 时间：2012-05-15T14:08:15.727
> 
> 标签：c#, asp.net, sql, nhibernate, queryover

我如何将 groupby Id 添加到这个休眠代码中，因为我是新手，有很多方法，但没有一个适合我。

```
.Select(Projections.Sum(() => ServiceOrderItem.WorkTime), 
    Projections.ProjectionList().Add(Projections.Property(
        () => ServiceOrder.Id).WithAlias(() => TechnicianWorkTime.Id))
    ) 
```

ProjectionList 中将会有更多...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T15:57:56.183

你可以使用`SelectList`它：

```
query.SelectList(list => list
  .SelectGroup(() => ServiceOrder.Id)
  .SelectSum(() => ServiceOrderItem.WorkTime)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T07:47:25.943

你也可以这样做：

```
objQuery = objQuery.SelectList(list => list.SelectGroup((x => x.Id))); 
```

# java - javac 错误：方法没有覆盖或实现超类型中的方法

> ID：10602544
> 
> 赞同：0
> 
> 时间：2012-05-15T14:08:21.140
> 
> 标签：java, compiler-errors

我遇到了 java 编译器的一个非常奇怪的行为。

我有一个 maven 项目，它可以在 Mac OS X 上完美编译，但在 Linux 上，当它找到与超类方法相关的 @Override 时，会出现“方法不会覆盖或实现超类型的方法”错误。

例如，我有课：

```
public abstract class State<M extends OperationApplication, R extends UnaryRelation<? extends Object>> implements BehaviorModelVisitable, Serializable {
    public abstract State<M, R> transform(StateAbstractionTransformer<M, R> transformer);
} 
```

我得到了与@Override 相对应的上述错误：

```
public final class AbstractState extends State<ActualObserverApplication, UnaryRelation<? extends Object>> {
    @Override
    public State<ActualObserverApplication, UnaryRelation<? extends Object>> transform(StateAbstractionTransformer<ActualObserverApplication, UnaryRelation<? extends Object>> transformer) {
} 
```

如何让它在运行 Hudson 的 Linux 机器上正确编译？那台机器有

```
javac 1.6.0_26 
```

# cordova - Phonegap 插件与相机冲突

> ID：10602549
> 
> 赞同：1
> 
> 时间：2012-05-15T14:08:33.083
> 
> 标签：cordova, phonegap-plugins

我正在使用 Phonegap 开发一个应用程序。我已经安装了子浏览器和电子邮件编辑器插件，它们在模拟器和手机上都可以正常工作，但是如果我从手机库中选择一个图像，然后尝试共享该图像，则任何一个插件都不起作用。

Xcode 给我以下错误：

WebKit 在 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate:Source type must be UIImagePickerControllerSourceTypeCamera 中丢弃了一个未捕获的异常

上面的任何帮助将不胜感激。

谢谢

# git - 如何在 Console2 中为选项卡创建快捷方式？

> ID：10602557
> 
> 赞同：8
> 
> 时间：2012-05-15T14:08:53.567
> 
> 标签：git, tabs, shortcut, git-bash, console2

在 Console2 中，我有 2 个选项卡。第一个称为“Console2”，它是默认选项卡。第二个称为“Git Bash”，它是 Git Bash CMD 的 Console2 替代品。

我想为“Git Bash”选项卡创建一个快捷方式。所以每次我点击这个快捷方式。我使用“Git Bash”选项卡打开 Console2。当前的 Console2 默认选项卡是“Console2”，我希望保持这种状态。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T21:50:46.937

[我在这里](https://sourceforge.net/projects/console/forums/forum/143117/topic/5278234/index/page/1)的 Console2 论坛上找到了解决方案

要为选项卡创建快捷方式，请创建 Windows 快捷方式，并将 Target 字段设置为

> "C:\path\to\Console.exe" -t "选项卡名称"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T18:40:08.510

另一种方法是使用批处理文件

使用以下内容创建一个 yadayada.bat 文件：

```
start /d "D:\.....\Desktop\Console2" Console.exe -t "tab1" -t "tab2" -t "tab3" 
```

# jquery - jquery计算列的总和然后添加到现有的总数

> ID：10602561
> 
> 赞同：1
> 
> 时间：2012-05-15T14:09:18.820
> 
> 标签：jquery

我在这里看到了很多例子，其中总和是从数量和价格列中计算出来的，并且总和会在表格的底部相加。

我正在使用这个想法，但想更进一步。在这个[小提琴](http://jsfiddle.net/aaronk85/k8amK/1/)中，我有一个名为 country 的额外列，底部有一个单独的表格，列出了国家/地区及其年度总数。我希望能够向数量字段添加一个值，并让它更新总和和年度总计。例如，如果我在 FIN 行中输入 1，总和将为 2.45，每年的总数为 247.45。

我不认为我可以硬编码一个变量，例如

```
var $fin= 245; 
```

因为第二个表中的数据会随着实际销售额的变化而变化，但这个页面仅供用户快速预测，所以我不确定解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:59:13.293

此代码可以帮助您入门

```
var countryValue = parseFloat($("#totalsTable td:contains('" + countryText + "')").next().text()) + sum;
$("#totalsTable td:contains('" + countryText + "')").next().text(countryValue); 
```

'#totalsTable' 是添加到底部表格的 ID。

如果表结构保持不变，使用“包含”和“下一个”选择器可能会停止工作。

我希望这有帮助。

# mysql - 一张桌子 vs 多张桌子

> ID：10602562
> 
> 赞同：3
> 
> 时间：2012-05-15T14:09:20.447
> 
> 标签：mysql, database-design, database-schema, conventions

我有以下表格： - 帖子 - 文件 - 事件 - 文档

每个帖子、文件、事件、文档都可以有评论。

什么是更好的数据库方案，**为什么**？

**第一个解决方案**

*   评论表（comment_id、author_id、comment）
*   4个表来创建关系（posts_comments（post_id，comment_id），files_comments（file_id，comment_id），events_comments（event_id，comment_id），documents_comments（document_id，comment_id））

**第二种解决方案**

*   评论表（comment_id、author_id、comment）
*   items_comments (comment_id, parent_type (enum['post', 'file', 'event', 'document']), parent_id)

什么是更好的解决方案，或者我应该使用两者中的哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:27:34.987

想要/需要一个评论表可能有真正的原因。例如，它会使查看给定用户的所有评论变得更简单。此外，搜索所有评论会更简单（在一张表上放置一个 FTS 索引就完成了）。

另一方面，如果没有令人信服的理由将评论保留在单个表格中，则可能存在第三种（而且相当明显）的解决方案。

为每个项目（帖子、事件、文件、文档）创建一个单独的评论表。在那种情况下定义和描述 RI 关系将非常简单。此外，如果您经常键入临时查询，它可能会使其更简单。例如

```
 select * from documents d left join doc_comments c 
                           on d.id = c.docid 
                           where d.id=42; 
```

这些都可能与您的情况无关或不重要，但可能值得考虑。

一个额外的随机想法：OP 中的两种解决方案都有一种“感觉”，即它们定义了多对多关系（例如，评论可以属于多个项目）。假设这不是理想的情况，可以通过适当的唯一索引来防止它，......但仍然......它具有最初的外观，这似乎可能导致可能的混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:16:16.597

我更喜欢第一个解决方案。那里的 Sql 语句更简单。在我看来，它更符合数据库规范化

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T19:52:03.857

为了完整起见，我应该提到另一种可能性 - 继承（又名泛化或（子）类别层次结构）：

![在此处输入图像描述](../Images/d2dd2348e96d46c2bfa533f7e68f09d4.png)

# java - Java - GUI 将相同的按钮添加到两个不同的面板

> ID：10602564
> 
> 赞同：1
> 
> 时间：2012-05-15T14:09:25.987
> 
> 标签：java, user-interface

```
public class Test extends JFrame {
    public Test() {
        JButton jbt1 = new JButton("Java");
        JButton jbt2 = new JButton("Programming");
        JPanel p1 = new JPanel();
        JPanel p2 = new JPanel();
        JPanel p3 = new JPanel();
        p1.add(jbt1);
        p2.add(jbt2);
        p3.add(jbt1);

        add(p1, BorderLayout.NORTH);
        add(p2, BorderLayout.SOUTH);
        add(p3, BorderLayout.CENTER);
    }
    public void main(String[] args) {
        Test f = new Test();
        f.setVisible(true);
    }
} 
```

输出是：

爪哇

## 编程

我所期待的：

爪哇

爪哇

## 编程

为什么???????p3中的jbt1在哪里？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:15:17.113

Java GUI 组件是分层布局的，每个组件只能有一个父级。通过将组件添加到容器中，任何旧的父引用都会丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:20:11.897

但是你可以：

```
public static void main(String[] args) {

    Action javaAction = new JavaAction();

    JPanel p1 = new JPanel();
    JPanel p3 = new JPanel();
    p1.add(new JButton(javaAction));
    p3.add(new JButton(javaAction));
}

private static final class JavaAction extends AbstractAction {

    JavaAction() {
        super("Java");
    }

    public void actionPerformed(ActionEvent e) {

        // put your code here

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:18:57.857

调用结构如下

```
 p1.add(jbt1); //jbt1 added to p1
    p2.add(jbt2); //jbt2 added to p2
    p3.add(jbt1);  //jbt1 added to p3 
```

jbt1 不再包含在同一个容器中，因此您会得到您提到的输出。它的父级实际上从 p1 变为 p3。

如果您希望包含具有相同功能的按钮，则可以将操作侦听器重定向到相同的方法。

但是，必须单独创建按钮。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:13:56.190

您不能将相同的组件添加到不同的容器中。只有最新的`add`才能工作。一个组件只能同时有一个父级。当您将组件添加到 Container 时，Container 将自动从其先前的父级中删除该组件（如果存在）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T14:18:14.503

可以只将组件添加到一个容器，但没有什么能阻止您创建 2 个不同的按钮并将相同的 eventListener 附加到它们，以便它们在单击时以相同的方式响应。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-06T09:52:29.273

您不能添加相同的按钮，但您可以为按钮添加相同的功能..因此它们充当相同的按钮。

# ruby-on-rails - 如何从 ActiveRecord 记录返回绑定？

> ID：10602566
> 
> 赞同：0
> 
> 时间：2012-05-15T14:09:27.710
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一些代码存储在一个字符串中，我想在特定记录的上下文中运行它。

我想做这样的事情：

```
class Dog < ActiveRecord::Base
  # has the attributes name and age
end

a_dog = Dog.first

some_code = "puts name"

eval some_code, a_dog.get_binding 
```

这将打印第一只狗的名字。我知道`get_binding`方法不对，但我认为这个名字说明了我想要做什么。

另外，我知道我*不应该这样*做，我只想知道是否有办法:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:13:45.397

您可以使用[instance_eval](http://apidock.com/ruby/BasicObject/instance_eval)方法在接收器的上下文中评估代码字符串。

```
a_dog = Dog.first
a_dog.instance_eval('puts name')
snuppy
 => nil 
```

# ruby - 开发 gem 时如何使用“调试器”和“撬”？（红宝石）

> ID：10602570
> 
> 赞同：2
> 
> 时间：2012-05-15T14:09:42.693
> 
> 标签：ruby, testing, gem, bundler, gemspecs

我正在开发一个 gem，我的 Gemfile 看起来像这样：

```
source :rubygems

gemspec

group :development, :test do
  gem "pry"
  gem "debugger"
  gem "rake"
end 
```

但是，我不希望人们在运行测试时必须安装`pry`，`debugger`但我也希望能够在我的测试中要求它们（因为我正在运行以 为前缀的测试`bundle exec`，并且我无法在我的加载路径中获取它们如果它们不在 Gemfile 中）。我如何实现这一目标？

另外，何时将我用于开发的 gem 放入 gemspec 中，何时将它们放入 Gemfile？我真的不知道有什么区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T21:15:39.553

您可以将 gems 作为开发依赖项添加到 gemspec 中，如下所示：

```
Gem::Specification.new do |s|
  # ...
  s.add_development_dependency 'pry'
  s.add_development_dependency 'debugger'
  s.add_development_dependency 'rake'
end 
```

这些只会在使用 gem 时安装，而不是在安装 gem 本身时安装。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-02T19:04:37.417

正如@andrew-vit 所说，您可以将其作为开发依赖项添加到您的 gem 规范中

```
Gem::Specification.new do |spec|
   #...
   spec.add_development_dependency "pry"
   spec.add_development_dependency "debugger"
   #...
end 
```

由于这将是一个开发依赖项，因此您不想将其添加`require 'pry'`到您的主 gem 应用程序中，因此只需将其添加到您的`spec_helper.rb`或任何您的测试设置文件中。

```
require 'rspec'
require 'vcr'
require 'pry'
#... 
```

然后，当您运行规范时，您仍然可以将您`binding.pry`的代码添加到沙箱的代码中。在推送代码之前确保您的规范运行。这样，如果它中断，您会看到您忘记了代码中的断点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:43:36.347

我找到了解决方案。我可以把它们分组。

```
source :rubygems

gemspec

group :development, :test do
  gem "rake"
end

gem "debugger", :group => :debugger
gem "pry",      :group => :pry 
```

这样，贡献者可以选择不安装它们：

```
bundle install --without debugger pry 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-07T17:35:31.863

对我来说，上述答案的混合似乎有效。我目前正在运行 ruby​​ 2.2.4 并将其添加到 .gempsec：

```
s.add_development_dependency 'pry-byebug'
s.add_development_dependency 'rake' 
```

这对我来说`spec_helper.rb`：

```
require 'pry' 
```

不确定这是否对任何人有帮助。

# javascript - 将图像设置为背景

> ID：10602572
> 
> 赞同：0
> 
> 时间：2012-05-15T14:09:47.623
> 
> 标签：javascript, html, image, background

我想制作一个有一些图片的网站，当我点击一张图片时，我希望它成为网站的背景图片，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:11:37.487

类似于以下内容：

```
<img src="myimage.jpg" onClick="document.body.style.backgroundImage = 'url('+this.src+')';;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:12:43.190

这可以按照以下方式轻松完成：

jQuery：

```
$(function(){
    $("#imageId").click(function() {
        var myImage = $("img", this).attr("src");
        $("body").css("background", "url('" + myImage + "')");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:16:46.497

如果您知道如何使用 JQuery，这应该很容易：

```
$('#divTagId').click(function()
{
  $("html").css("background-image", "url(/myimage.jpg)");  
}); 
```

# xslt - Xslt 空白命名空间

> ID：10602573
> 
> 赞同：0
> 
> 时间：2012-05-15T14:09:49.667
> 
> 标签：xslt, namespaces

我有 xml 我想按原样复制（检查 xmlns="" 和标签。我想按原样创建。总计算被照顾。只有这个问题。它是有效的。仍然客户希望预期的格式像任何帮助都非常感谢。

```
 **Input.xml**

 <Employees>
   <employee>
    <dept>1</dept>
    <sec></sec>
     </employee>
      <employee>
       <dept>2</dept>
           <sec></sec>
        </employee>
        </Employees> 
```

预期的

```
 <Employees xmnls="1.2" xmlns:xsi="3" xsi:schemalocation="4">
                <totalemp>2</totalemp>
               <employee>
                 <dept>1</dept>
                  <sec></sec>
                 <employee>
                  <employee>
                       <dept>2</dept>
                              <sec></sec>
                     <employee>
                    </Employees> 
```

实际的

```
 <Employees>
                          <totalemp>2</totalemp>
                           <employee xmlns="">
                            <dept>1</dept>
                              <sec/>
                            </employee>
                             <employee>
                               <dept>2</dept>
                                  <sec/>
                               <employee>
                              </Employees> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:03:49.697

除非我误解了您的要求，否则您可以匹配**Employees**元素，并输出一个添加了所需命名空间的新元素。您还需要匹配其他元素，并在它们上指定默认命名空间以避免`xmlns=''`出现。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="*">
      <xsl:element name="{local-name()}" namespace="1.2">
         <xsl:apply-templates select="@*|node()"/>
      </xsl:element>
   </xsl:template>

   <xsl:template match="@*|text()|comment()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Employees">
      <Employees xmlns="1.2" xmlns:xsi="3" xsi:schemalocation="4">
         <xsl:apply-templates select="@*"/>
         <totalemp>
            <xsl:value-of select="count(employee)"/>
         </totalemp>
         <xsl:apply-templates select="node()"/>
      </Employees>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
<Employees xmnls="1.2" xsi:schemalocation="4" xmlns:xsi="3">
   <totalemp>2</totalemp>
   <employee>
      <dept>1</dept>
      <sec/>
   </employee>
   <employee>
      <dept>2</dept>
      <sec/>
   </employee>
</Employees> 
```

# android - 使用 MapView 返回活动，使用点维护以前的叠加层，向这些叠加层添加新点

> ID：10602575
> 
> 赞同：1
> 
> 时间：2012-05-15T14:09:55.313
> 
> 标签：android, android-mapview, itemizedoverlay

*请忍受我的冗长描述并通读。这很简单，我需要你的帮助:)*

LogIn 活动从服务器获取地图点并启动地图活动，将 JSON 字符串传递给地图活动，地图活动读取事件并将它们的点添加到叠加层。

我创建了一个在后台运行的服务，当新点出现在服务器上时，一旦用户单击通知，它们就会被添加到地图中。单击后，它会启动 Maps 活动以将点添加到现有点（服务再次将 JSON 字符串传递给 Maps 活动）

这里的问题是 Maps 活动不断被创建（onCreate() 每次运行），并且所有以前的点都从地图中删除，因为所有叠加层、mapview 等都被重新创建，就好像它是第一次运行它但是之前的点没有被添加，因为它们是通过登录屏幕传递的，而现在显然没有运行。

如何在不删除以前的点的情况下向地图添加点？

非常感谢！

# jquery - 使用 Jquery 从多个复选框中仅选择一个复选框的 Rails 问题

> ID：10602576
> 
> 赞同：0
> 
> 时间：2012-05-15T14:09:58.433
> 
> 标签：jquery, ruby-on-rails, checkbox, user-experience

我知道我应该从用户体验的角度使用单选按钮，但有人告诉我使用复选框。这是 HAML 的要点：[https](https://gist.github.com/2701998) ://gist.github.com/2701998 。

如您所见，有一个“检查”复选框，一个“信用卡”复选框，然后是 4 个信用卡选项。理想情况下，用户只能选择支票或信用卡，如果他们选择信用卡，他们只能选择四种信用卡类型（Visa、Amex、Discover 或 Mastercard）中的一种。

这是我当前的代码，它没有做任何事情。任何帮助是极大的赞赏。

```
var checkboxes = $(':checkbox.payment-split);

checkboxes.click(function(){

  var self = this;

  checkboxes.each(function(){

    if(this!=self) this.checked = ''

  })

}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:41:59.013

```
var $check_boxes = $('input[type=checkbox]');
$check_boxes.click(function() {
  $check_boxes.prop('checked', false);
  $(this).prop('checked', true);
} 
```

# android - 无法将 USB 驱动程序设置为在 Galaxy Nexus 中进行调试

> ID：10602578
> 
> 赞同：3
> 
> 时间：2012-05-15T14:10:06.377
> 
> 标签：android, usb, driver

我在尝试在三星 Galaxy 中调试时遇到问题。我已按照[Android 开发人员](http://developer.android.com/sdk/oem-usb.html#WinXp)中的说明下载了[三星 USB 驱动程序](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW)，但是当我要更新驱动程序时，我不知道该选择哪个文件夹。SAMSUNG/USB DRIVERS 中有 26 个文件夹。

另外，我在编辑**android-sdk-windows\usb_driver\android_winusb.inf的**[其他帖子](https://stackoverflow.com/questions/1848567/adb-samsung-galaxy)中看到了解决方案，但是那个文件夹在哪里？

 **我的操作系统是 WinXP SP3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T09:28:07.780

我终于决定安装[Kies](http://www.samsung.com/au/support/usefulsoftware/KIES/JSP)并且 adb 现在可以识别我的 Galaxy Nexus。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:39:11.400

[http://forum.xda-developers.com/showthread.php?t=1830108](http://forum.xda-developers.com/showthread.php?t=1830108)处的说明对我有用。我只需要按照“Android 引导加载程序接口驱动程序”部分之前的说明进行操作。三星网站上提供的 USB 驱动程序未被识别为我的 Galaxy Nexus 的有效驱动程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T17:12:14.403

在设备管理器中更新驱动程序软件后，只需输入路径`C:\Program Files\SAMSUNG\USB Drivers`即可。这对我有用。

在设备管理器上：

*   右键单击设备驱动程序
*   '更新驱动程序软件'
*   单击“浏览我的计算机以查找驱动程序软件”
*   把路径放在它要求的地方`C:\Program Files\SAMSUNG\USB Drivers`

首先，如果您还没有这样做，您应该从[三星网站](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW)下载 USB 驱动程序。**

# java - 通过远程访问未找到 java web start jar 文件

> ID：10602580
> 
> 赞同：3
> 
> 时间：2012-05-15T14:10:11.700
> 
> 标签：java, java-web-start, filenotfoundexception

我在远程运行 Java Web Start 应用程序时遇到了问题。在本地运行时，没有这种问题。问题是，jar 文件未部署到本地临时文件夹（jnlp 文件已正确部署），因此向 Java 控制台抛出 FileNotFound 异常。

任何人都可以帮忙吗？

索引.html：

```
<body>
<!-- ... -->
<script src=
  "http://www.java.com/js/deployJava.js"></script>
<script>
    // using JavaScript to get location of JNLP
    // file relative to HTML page
    var dir = location.href.substring(0,
        location.href.lastIndexOf('/')+1);
    var url = dir + "myapp.jnlp";
    deployJava.createWebStartLaunchButton(url, '1.6.0');
</script>
<!-- ... --> 
```

jnlp 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="" href="">
<information>
    <title>mytitle</title>
    <vendor>mycompany</vendor>
    <offline-allowed/>
</information>
<resources>
    <!-- Application Resources -->
    <j2se version="1.6+" href=
       "http://java.sun.com/products/autodl/j2se"/>
    <jar href="myapp.jar"
        main="true" />

</resources>
<application-desc
     name="My Application">
 </application-desc>
 <update check="background"/> 
```

Java 控制台抛出：异常：

```
com.sun.deploy.net.FailedDownloadException: Unable to load resource: file:/C:/DOCUME~1/myhome/LOCALS~1/Temp/myapp.jar
at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResource(Unknown Source)
at com.sun.javaws.LaunchDownload$DownloadTask.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

包装异常：

```
java.io.FileNotFoundException: C:\DOCUME~1\myhome\LOCALS~1\Temp\myapp.jar (The system cannot find the file specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileInputStream.<init>(Unknown Source)
at sun.net.www.protocol.file.FileURLConnection.connect(Unknown Source)
at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
at com.sun.deploy.net.BasicHttpRequest.doGetRequest(Unknown Source)
at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResource(Unknown Source)
at com.sun.javaws.LaunchDownload$DownloadTask.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:04:40.213

您*必须*为 href 和 codebase 指定正确的值，Java Web Start 才能正常工作。原因是启动器可以选择调用一个新的 JVM，给定一个 JNLP 脚本的缓存副本，而与原始脚本没有任何联系。

# php - CakePHP mysql 选择月份中的某一天

> ID：10602581
> 
> 赞同：0
> 
> 时间：2012-05-15T14:10:17.420
> 
> 标签：php, mysql, cakephp-1.3

我希望写得正确，因为我的英语不是很好。我会从 MySQL 中只选择一个月中的哪一天，但给我写了一个错误。

**控制器**

```
$fields = array('id', 'nazov','DAY(datum) AS day','datum');
$data = $this->udalost->find('all',array('conditions'=>'MONTH(datum) = '.$month.' AND YEAR(datum) = '.$year,'fields'=>$fields,'order'=>'datum ASC'));
$this->set('data',$data); 
```

**看法**

```
echo $data["day"]; 
```

**错误**

```
Notice (8): Undefined index: day [APP\views\udalosti\calendar.ctp, line 4] 
```

**MySQL**

```
CREATE TABLE `udalost` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `nazov` VARCHAR(255) DEFAULT NULL,
  `datum` datetime DEFAULT NULL,
  `text` text,
  `created` datetime DEFAULT NULL,
  `modified` datetime DEFAULT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM 
```

你能告诉我哪里有错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:37:14.137

尝试在您的视图中调试**$data ：**

```
debug($data); 
```

如果调用 find 方法，通常会得到一个多维数组。

还写这样的条件：

```
$data = $this->udalost->find('all',
    array(
        'conditions'=> array(
            'MONTH(datum) = '.$month,
            'YEAR(datum) = '.$year
        ),
        'fields'=>$fields,
        'order'=>'datum ASC'
     )
); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:42:39.697

您没有索引“den”，但您尝试使用它。（calendar.ctp，第 4 行）。

# python - Python For Loop 来自如何像计算机科学家一样思考

> ID：10602583
> 
> 赞同：-1
> 
> 时间：2012-05-15T14:10:21.663
> 
> 标签：python, loops, for-loop

我偶然发现了“如何像计算机科学家一样思考”中的一个新练习。（打开文档@http [://www.openbookproject.net/thinkcs/python/english2e/ch07.html](http://www.openbookproject.net/thinkcs/python/english2e/ch07.html)）

希望收到一些关于这方面的指导：

```
prefix="JKLMNOPQ"
suffix="ack"

for letter in prefix:
    print letter + suffix 
```

你会得到 Jack、Kack、Lack、Mack、Nack、Oack、Pack & Qack。

我应该修改什么以便得到 Ouack 和 Quack 而不是 Oack 和 Qack？

为了学习，我尝试的是：

```
prefix="JKLMNOPQ"
suffix="ack"

for letter in prefix:
  if letter = "O" or "U":
    print letter + "u" + suffix
  else:
    print letter + suffix 
```

正如大多数人第一眼看到的那样，所犯的语法错误是在 if 函数调用中使用 = 而不是 == 。

感谢您的及时帮助，我非常感谢他们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:13:07.543

给定的示例依赖于这样一个事实，即在迭代时，字符串会给出其每个单独的字符。由于您希望某些前缀具有两个字符，因此您必须将字符串分解为每个字符的单独字符串并添加所需的`u`位置。

```
prefixes=["J", "K", "L", "M", "N", "Ou", "P", "Qu"]
suffix="ack"

for letters in prefixes:
    print letters + suffix 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T14:13:14.193

我不会为你解决这个问题，但会给你一个提示：[该`if`语句](http://www.openbookproject.net/thinkcs/python/english2e/ch04.html#index-2)可能会派上用场。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:15:32.783

```
prefix = "JKLMNOPQ"
suffix = "ack"

for letter in prefix:
    if letter == 'O' or letter == 'Q':
      print "".join((letter, 'u', suffix))
    else:
      print "".join((letter, suffix))

Jack
Kack
Lack
Mack
Nack
Ouack
Pack
Quack 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T14:18:17.433

查找两个前缀（Q 和 O），然后添加 'u'，否则像以前一样打印

```
for letter in prefix:
   if letter in ['Q', 'O']:
      print letter + 'u' + suffix
   else:
      print letter + suffix 
```

产量：

```
Jack
Kack
Lack
Mack
Nack
Ouack
Pack
Quack 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T15:36:43.277

这是正则表达式解决方案：

```
import re
prefix="JKLMNOPQ"
suffix="ack"
names=[re.sub("([OQ])","\\1u",p) + suffix for p in prefixes]
print "\n".join(names) 
```

我认为指定的问题是纠正输入，即这不是关于输入如何糟糕的问题，应该是 ["J","K","L","M","N","Ou ","P","Qu"] 之类的。通常，正则表达式替换可能是修复字符串输入的好方法。如果您打算“更像计算机科学家那样思考”，我还建议您尝试尽可能多地使用列表推导来掌握它们，并将输出视为一个单独的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T09:47:42.797

使用地图函数和正则表达式

```
RX = lambda x: re.sub("(O|Q)","\\1u",x)
map(RX,[x+suffix for x in prefix]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-27T21:06:39.650

解决方案：

```
prefixes = 'JKLMNOPQ'
suffix = 'ack'

for letter in prefixes:
    while True:
        if letter == 'O':
            print letter + 'u' + suffix
            break
        if letter == 'Q':
            print 'Quack' # just another solution of the print statement
            break
        print letter + suffix
        break 
```

我喜欢破坏东西；）

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2012-05-15T14:17:20.240

如果我理解这个问题（即如何只为 Q/O 前缀添加 u），你最终会得到如下结果：

```
for letter in prefix:
     word = letter
     if letter in ["O","U"]:
        word += "u"
     print word . suffix 
```

# java - Jsoup，在超时和 404 之间确定

> ID：10602591
> 
> 赞同：2
> 
> 时间：2012-05-15T14:10:50.857
> 
> 标签：java, jsoup

我试图弄清楚如何检查 url 是否为 404 或是否超时的逻辑。我好像想不通！

这是我到目前为止所拥有的：

```
while (i < retries){
            try {
                response = Jsoup.connect(url)
                        .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                        .timeout(10000)
                        .execute();
                success = true;
                break;
            } catch (IOException e) {
                success = false;
            }
            System.out.println("Attempt " + i + " " + url);
            i++;
        }
    }

    public int getUrlStatus(){
        if(success){
            int statusCode = response.statusCode();
            return statusCode;
        }else {
            return 404;
        }
    } 
```

据我所知，如果页面超时，这将告诉我页面 404 不是。我该如何检查呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:33:21.937

连接时可以捕获`SocketTimeoutException`：

```
 try {
                response = Jsoup.connect(url)
                        .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                        .timeout(10000)
                        .execute();
                success = true;
                break;
            } catch (SocketTimeoutExceptione) {
                success = false;
            System.out.println("Timeout occured");
            } 
```

# php - PHP 任何带有字符串的东西

> ID：10602597
> 
> 赞同：0
> 
> 时间：2012-05-15T14:11:03.910
> 
> 标签：php

我正在制作打开目录并在文件中写入内容的 php 脚本。问题出在目录中。目录名称不固定，每次都会更改名称“dir + some random number”。

有什么方法可以制作这样的东西我需要那个功能“任何东西”

```
<?php
$directory = "files/dir".anything()."/other..";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:12:11.867

当然...首先检查您想要的目录是否存在。如果不创建它。

```
<?php
    // check if dir exists, if not create it
    if(!is_dir("files/dir".anything()."/other.."))
        mkdir("files/dir".anything()."/other..");

    // ... rest of code here
    $directory = "files/dir".anything()."/other..";
?> 
```

函数anything 是dir + 一些随机数。只需使用php随机...

```
// this function returns a random number from 0 to 100000
function random()
{
    echo rand(0, 100000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:18:49.443

除非我错过了什么，否则你不能做

```
function anything(this $str){} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:25:11.677

在混淆之后，您似乎想要创建一个函数，该函数将创建一个唯一的文件名，然后将其应用于目录路径，使用 rand() 不会获得唯一的 id，因为[rand()](http://php.net/manual/en/function.rand.php)有时不是那么 rand，加上每个当你制作一个新文件时，它会降低一个新的随机文件的机会。使用[uniqid()](http://php.net/manual/en/function.uniqid.php)和 md5 它将从 uniqid/microtime 创建一个 128 位 alpha 数字散列，返回相同散列的几率非常小，甚至没有：

所以你应该做类似的事情：

```
<?php 
/**
 * Function to create 128bit unique hash string.
 * 
 * @return string
 */
function anything(){
    return md5(uniqid(rand(), true));
}

/*
You should store value in a variable if you need to use it further along
or in the future.
*/
$uniq_token = anything();

$directory = "files/".$uniq_token."/other..";
?> 
```

您需要存储`$uniq_token`在数据库中的某个位置，否则在尝试检索 ect 时您将失去对该文件/文件夹的引用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T14:13:47.780

我在这里错过了什么吗？

编写一个`anything`返回任何你想要的函数的函数。这是非常基本的 PHP 编码。

# java - 在 Apache Camel 中同步 Exchange 副本

> ID：10602598
> 
> 赞同：0
> 
> 时间：2012-05-15T14:11:05.350
> 
> 标签：java, activemq, apache-camel

根据 Apache Camel 中 onCompletion() 事件的文档，此处使用了交换的副本，并且处理在单独的线程中运行。显然这在使用 EventNotifierSupport 时也是如此，因为我在处理器中设置了一些交换属性，然后我有一个类似于

```
public void notify(EventObject event) throws Exception {

    if (event instanceof ExchangeCompletedEvent) {
    //..get exchange properties and print them using event.getExchange()
    }
} 
```

看来我在处理器中设置的属性在此“已完成事件”中不可用，就像我在 DSL 中使用 onComplete() 时它们不可用一样。

如何合并到交换的明显副本，以便我可以可靠地获取在路由的其他处理器中设置/修改的属性？

谢谢

德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T17:09:51.983

实际上，在参与交换的处理器中添加的属性在这两个回调中都可用，即 in`onCompletion()`和`EventNotifierSupport#notify()`.

演示此行为的最小示例可以通过 `EventNotifierSupport`在`CamelContext`.

```
// Create listener
EventNotifierSupport eventNotifierSupport = new EventNotifierSupport(){

  @Override
  public void notify(EventObject event) throws Exception {
    if (event instanceof ExchangeCompletedEvent) {
      assert ((ExchangeCompletedEvent) event).getExchange().getProperties().containsKey("ADDED");
    }
  }

...

}

// Register listener in CamelContext
CamelContext camelContext = new DefaultCamelContext();
camelContext.getManagementStrategy().addEventNotifier(eventNotifierSupport); 
```

如果您使用处理器创建一个路由，该[处理器](http://camel.apache.org/processor.html)将属性设置为发送给它的消息......

```
camelContext.addRoutes(new RouteBuilder() {

  @Override
  public void configure() throws Exception {
    from("direct:start").process(new Processor() {
      @Override
      public void process(Exchange exchange) throws Exception {
        exchange.getProperties().put("ADDED","ADDED");
      }
    });
  }

});
camelContext.start();
camelContext.createProducerTemplate().sendBody("direct:start", "addPropertyToMe"); 
```

...您会看到侦听器中的断言总是通过。这与 Camel 文档一致，即交易完成后（即交易已被修改），交易的副本将被发送给侦听**器**。

你的问题出在其他地方。如果您向我提供一个在处理器中设置属性但在回调中丢失的情况的最小示例，我会为您提供帮助。

# java - 为什么第一个 HQL 查询比其他查询花费更长的时间？

> ID：10602610
> 
> 赞同：0
> 
> 时间：2012-05-15T14:11:31.183
> 
> 标签：java, mysql, hibernate, hql

我正在对 JDBC 和 Hibernate（使用 JPA）性能进行基准测试，并连续多次运行相同的查询。我注意到第一个查询（使用 JDBC 和 Hibernate）比其他查询运行时间更长。

我已经禁用了 mysql 缓存，所以我相信它不应该是特定于 mysql 的。可以吗？我还在每个（HQL）查询之间清除 EntityManager。

有人能指出我为什么第一个查询比其他查询花费更长的时间吗？

日志： http: [//pastebin.com/fwNbqaMD](http://pastebin.com/fwNbqaMD)

谢谢您的反馈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:15:25.313

我猜是因为您的程序的运行时优化。

在每次运行期间，都会收集代码的分析信息，并且 JIT 优化器会应用优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:34:07.613

以下可能是几个可能的原因。

1.  连接池。
2.  准备好的陈述。
3.  DB引擎预热/初始化。

在任何一种情况下，第一次迭代都比休息要做的更多。

例如，对于准备好的语句，查询计划是第一次构建并缓存以在后续执行中重用。

# mysql - MySQL - 不在（.... 大量项目 ... ），它会扩展吗？

> ID：10602611
> 
> 赞同：1
> 
> 时间：2012-05-15T14:11:32.420
> 
> 标签：mysql, database

我将尝试访问记录，但会使用如下语法排除具有 id 列表的记录：

`WHERE id NOT IN (1,3,4,6,7, ...`

随着我的数据库变大，ID 列表也会变大。有一天我会遇到问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:19:52.447

考虑将要排除的 id 列表存储在不同的表中，然后使用以下 SQL：

```
WHERE id NOT IN (select id from excluded_ids); 
```

`id`在列上放置索引以`excluded_ids`实现可伸缩性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:18:42.210

根据您声明的需要，我通常倾向于避免在这种情况下使用长列表，它需要一个单独的表和一个子选择。

从[MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html#function_in)：

> IN 列表中值的数量仅受 max_allowed_pa​​cket 值的限制。

因此检查[max_allow_packet](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_max_allowed_packet)值，以确保一旦此列表变得非常大，您的语句不会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:15:44.927

我刚刚在我自己的数据库上运行了一个测试——它有大约 800 万行，我排除了其中大约 10 行。运行时间为 25 秒。我认为这意味着它不可扩展；）

# solr - SOLR 3.6 和查询时连接

> ID：10602612
> 
> 赞同：1
> 
> 时间：2012-05-15T14:11:33.133
> 
> 标签：solr

solr 3.6 是否支持加入？根据[http://java.dzone.com/articles/apache-lucene-and-solr-36](http://java.dzone.com/articles/apache-lucene-and-solr-36)确实如此，但是当我尝试按照[http://wiki.apache.org/solr/上的教程执行任何连接时加入](http://wiki.apache.org/solr/Join)我得到的只是一个错误“未知查询类型'加入'”。它是否需要以某种方式启用，或者它在 3.6 版本中根本不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:18:02.850

[在http://wiki.apache.org/solr/Join](http://wiki.apache.org/solr/Join)上有一个`Solr4.0`标记

它在 3.6 中不可用

另见[http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene](http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene) `there is a possibility that it will also be included in Lucene 3.6`

我想它不包括在内

# java - 使用 profiler4j 进行分析

> ID：10602614
> 
> 赞同：0
> 
> 时间：2012-05-15T14:11:37.133
> 
> 标签：java, profiling, call-graph

我想使用 profiler4j 来分析我调用 2 个方法的简单 java 程序。我会对调用图视图感兴趣。我按照以下链接运行分析器。

```
http://profiler4j.sourceforge.net/#Tutorial 
```

当我尝试运行探查器时

`java -javaagent:profiler4j-1.0-beta2/agent.jar test/MainController`

我得到了教程链接中显示的输出。但我必须按 ctrl+c 才能再次出现提示。（我使用 linux）然后我尝试运行 console.jar 以查看产生的输出。

```
java -jar profiler4j-1.0-beta2/console.jar 
```

但我在输出中看不到任何内容。谁能告诉我我做错了什么？我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:18:58.670

Profiler4j 是一个相当古老的项目。从 Java 6 开始，JDK 中包含了[JVisualVM](http://visualvm.java.net/)，它具有出色的[分析器](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/profiler.html)。

# jquery - 我自己的个人 Div 100% 高度克星 - jquery 选项卡

> ID：10602617
> 
> 赞同：2
> 
> 时间：2012-05-15T14:11:43.663
> 
> 标签：jquery, css, html

在你有自己的“我怎样才能让 div 扩展到 100% 的高度”问题之前，你似乎在这里什么都不是，这是我的问题——（我希望它是原创的和有帮助的）。

参考我迄今为止的尝试[http://jsfiddle.net/prQcc/3/](http://jsfiddle.net/prQcc/3/) - 我在 jquery 选项卡中有两个 div 作为并排的列。我希望这些 div 扩展到 jquery 选项卡的高度。我最接近的是你在小提琴中看到的 - 列 div 扩展，但到“页面”的高度，而不是包含 Tab div 的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:31:20.787

您的高度被`#tabs-1`设置为`#tabs`，但在其顶部`#tabs`有一个`ul`占用空间，因此`#tabs-1`被.`#tabs``ul`

将您的位置更改`#tabs-1`为绝对不正确`#tabs` [可以解决问题](http://jsfiddle.net/prQcc/9/)，尽管填充和边框`#tabs`会创建一个仍然出现的小滚动条。对于现代浏览器，[最简单的纠正方法](http://jsfiddle.net/prQcc/12/)是使用`box-sizing`：

```
#tabs {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

# php - 如何正确创建分页？

> ID：10602618
> 
> 赞同：0
> 
> 时间：2012-05-15T14:11:44.050
> 
> 标签：php, wordpress

我有这个查询来检索帖子：

```
<?php 
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$the_query = new WP_Query(array('category__not_in' => array(8), 'paged' => $paged)); ?> 
```

这个分页：

```
global $wp_query;

$big = 999999999; // need an unlikely integer

echo paginate_links( array(
    'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
    'format' => '?paged=%#%',
    'current' => max( 1, get_query_var('paged') ),
    'total' => $wp_query->max_num_pages
) ); 
```

复制自：[http ://codex.wordpress.org/Function_Reference/paginate_links](http://codex.wordpress.org/Function_Reference/paginate_links)

但它确实有效，分页`1 2 3 4 5 6`始终具有相同的链接（在我第一次单击页面后），并且记录未正确显示....因为我有 13 页（我从中读取`max_num_pages`）结果，但是第二次之后我看不到任何其他结果。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:43:18.647

改变这个：

```
$wp_query->max_num_pages 
```

这样

```
$the_query->max_num_pages 
```

# sencha-touch - 后退按钮停留在 Ext.navigation.View 上的 setActiveItem 之后

> ID：10602621
> 
> 赞同：1
> 
> 时间：2012-05-15T14:11:52.197
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个 Ext.navigation.View，我想在单击按钮时返回，所以我在控制器中编写了以下代码：

```
this.getBuzz().setActiveItem(0); 
```

它可以工作，但是后退按钮留在导航栏中，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:16:15.453

`setActiveItem()`不是设计用于`Ext.navigation.View`

基本上你不需要为你的后退按钮附加监听器，更多细节请参见：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View](http://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View)

实际上，返回时调用的方法是：`yourView.pop()`

# iphone - 从Objective C上的静态方法调用非静态方法

> ID：10602628
> 
> 赞同：4
> 
> 时间：2012-05-15T14:12:14.253
> 
> 标签：iphone, objective-c, static

如何从同一对象中的静态方法调用非静态方法？

在静态方法内部：如果我使用`[ClassName nonStaticMethod]` 或如果我使用`[self nonStaticMethod]` 我会收到警告：找不到类方法'+isTrancparentImageWithUrl:'（返回类型默认为'id'）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T14:21:15.393

一种解决方案（也是极具争议的）解决方案是将您的类转换为单例实现，然后将所有静态方法转换为常规方法。

例如，如果你有一个名为 FileManager 的类，并且在那里你有一个看起来像的方法

```
+ (NSString *) getDocumentsDirectory 
```

无论出于何种原因，您想从内部调用非静态方法，您都需要将实现更改为类似这样

```
+ (FileManager *)sharedInstance {
    // Singleton implementation
    static FileManager* instance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        instance = [[FileManager alloc] init];
    });
    return instance;
}

- (NSString *) getDocumentsDirectory 
```

而不是打电话

```
[FileManager getDocumentsDirectory]; 
```

你会打电话给

```
[[FileManager sharedInstance] getDocumentsDirectory]; 
```

您不想创建单例有几个原因，但是，这超出了我的回复范围:)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T14:22:36.910

你需要创建类的对象来调用非类方法，你需要一个实例来调用这些方法，这就是为什么这些方法被称为实例方法。

从类方法调用将`[self instanceMethod]`不起作用，因为`self`在类方法中指向类而不是任何实例。[在这里](http://allforios.wordpress.com/2011/12/24/self-in-static-method-is-objective-c-a-sane-language/)您可以找到有关使用`self`类方法的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:13:21.867

你不能

您可以在实例方法中调用静态方法/变量，但不能以其他方式调用。

原因很简单，静态方法绑定到类，而不是类的实例（对象）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:13:45.177

您可以创建当前类的实例，然后在其上调用它，但不建议这样做。静态方法不能调用非静态方法——静态上下文中没有“this”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T14:15:40.320

Objective-C中没有`static`方法。如果要调用`[Class method]`它，则称为类方法（就 ANSI C 而言不是静态的）

但是，您可能会发现`Singleton`模式很有用：[http ://cocoadev.com/wiki/SingletonDesignPattern](http://cocoadev.com/wiki/SingletonDesignPattern)

（基本上，您持有对象的静态共享实例）

编辑： `[ClassName instanceMethod]`-`nonStaticMethod`没有为`ClassName`. 它是为`ClassName`对象（实例）定义的，所以你不能使用它（它不存在），应用程序可能会崩溃。

`[self instanceMethod]`- 你也不能使用它，因为在调用类方法时，没有 -`self`因为没有对象（实例）。您可以使用我在上面发布的单例模式来解决它。

# javascript - 所有选项卡 chrome 扩展的屏幕截图

> ID：10602633
> 
> 赞同：5
> 
> 时间：2012-05-15T14:12:35.553
> 
> 标签：javascript, google-chrome, google-chrome-extension

我是新手，我需要知道如何同时获取所有选项卡的屏幕截图，我使用了函数 chrome.tabs.captureVisibleTab 但作为参数窗口，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:47:20.900

您必须打开窗口中的每个选项卡`tabs.update`并捕获它。

```
function captureWindowTabs(windowId, callbackWithDataUrlArray) {
    var dataUrlArray = [];

    // get all tabs in the window
    chrome.windows.get(windowId, {populate:true}, function(windowObj) {
        var tabArray = windowObj.tabs;

        // find the tab selected at first
        for(var i = 0; i < tabArray.length; ++i) {
            if(tabArray[i].active) {
                var currentTab = tabArray[i];
                break;
            }
        }

        // recursive function that captures the tab and switches to the next
        var photoTab = function(i) {
            chrome.tabs.update(tabArray[i].id, {active:true}, function() {
                chrome.tabs.captureVisibleTab(windowId, {format:"png"}, function(dataUrl) {
                    // add data URL to array
                    dataUrlArray.push({tabId:tabArray[i].id, dataUrl:dataUrl});

                    // switch to the next tab if there is one
                    if(tabArray[i+1] != undefined) {
                        photoTab(i+1);
                    }
                    else {
                        // if no more tabs, return to the original tab and fire callback
                        chrome.tabs.update(currentTab.id, {active:true}, function() {
                            callbackWithDataUrlArray(dataUrlArray);
                        });
                    }
                });
            });
        }
        photoTab(0);
    });
}

// get all tabs in the current window
captureWindowTabs(chrome.windows.WINDOW_ID_CURRENT, function(dataArray) {
    for(var i = 0; i < dataArray.length; ++i) {
        alert(dataArray[i].dataUrl); // log to the background page or popup
    }
}); 
```

# ruby-on-rails-3 - 如何将所有路由映射到 Rails 中的子域

> ID：10602637
> 
> 赞同：0
> 
> 时间：2012-05-15T14:12:50.963
> 
> 标签：ruby-on-rails-3, rails-routing

我有一个实时的 Rails 应用程序。现在我想将它们全部重新路由到一个子域 dev.mydomain.com。

例如，当前路径`mydomain.com/users/1`应变为`dev.mydomain.com/users/1`。我页面中的所有链接也应该有效。

我该怎么做？

非常感谢。

编辑：我想这样做的原因是因为我想对访问者隐藏我的应用程序，并将他们重定向到不同的登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:25:49.487

您可以执行以下操作

1.  在您的 config/lib 目录中创建一个名为 subdomain.rb 的文件，然后将其添加到其中

    ```
    class Subdomain
        def self.matches?(request)
            if request.subdomain == "www" || request.subdomain.blank? || request.subdomain.empty? || request.subdomain.nil?
                false
            else
                true
            end
        end
    end 
    ```

然后在你的 routes.rb 中你可以这样做

```
 require 'subdomain'

    DemoApp::Application.routes.draw do

        constraints(Subdomain)  do
            constraints(:subdomain => 'dev') do
                resources :users
                root :to => "someother#page"
            end
        end

        root :to => "default#index"

        # and any other routes you would like to expose to www or no subdomain.
    end 
```

要运行我的应用程序，我倾向于使用[pow.cx](http://pow.cx/)，我会推荐相同的。

# android - Android - CustomAdapter 不断循环

> ID：10602638
> 
> 赞同：0
> 
> 时间：2012-05-15T14:12:51.087
> 
> 标签：android, android-listview, android-custom-view

我很好奇 CustomAdapter 继续循环同样的事情是正常的吗？例如，我有 3 行来自数据库的记录，我想将它们显示在我的列表中。一旦我使用 customAdapter 显示，它将循环相同的东西 3 次。意味着如果我有 10 行 if 记录，它将循环 10 次 * 10 条记录 = 100 次循环。如果这样，我的程序肯定会耗尽内存。有什么解决办法吗？我已附上我的日志，如下所示。如果您注意到“~~ row id~~ 0”，它会保持相同的循环 3 次。

```
 public class ViewMsgMain extends ListActivity{

// Retrieve member id from local database
String memberid = FypGeneral.LOGINMEMBERID;
SharedPreferences sp_memberid;
int memid;

String sender_id="", content_type = "", content_path = "", content_id = "", imageaudio_id = "", content_date="";
String over_contentid = "", uploaded_content_id = "", receiver_id = "", read_status = "", 
        sender_member_image="", imageAudio_image="";
InputStream inputstream = null;
StringBuilder stringbuilder = null;
String result = null;

//  retrieved message
String retrieveMsgId[] , uploaded_content_type[];
private LayoutInflater mInflater;
private Vector<RowData> data;
RowData rd;
CustomAdapter adapter;
int pos=1;
String content_type_split[];
String content_date_split[];
String sender_member_image_split[], uploaded_content_id_split[];
String content_path_split[], content_id_split[];
String imageAudio_image_split[];

Bitmap bitmap;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewmsglist);

    //===================================================
    // Get member id from local database
    sp_memberid = getSharedPreferences(memberid, MODE_PRIVATE);
    if(sp_memberid.contains("memberid")==true)
    {memid = sp_memberid.getInt("memberid", 0);}
    Log.e("homepage member id == ", "~ "+memid);
    //===================================================

    try{
        //http post
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://localhost/project/viewmessage.php?memberid="+memid);
        //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); //encode a list of NameValuePair objects suitable for HTTP calls
        HttpResponse response = httpclient.execute(httppost); // to make an HTTPPOST call with the HttpClient
        HttpEntity entity = response.getEntity();
        inputstream = entity.getContent();
    }
    catch(Exception e){
        Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
    }

    //Convert response to string  
    try
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputstream,"UTF-8"));

        stringbuilder = new StringBuilder();

        String line = null;

        while ((line = reader.readLine()) != null) 
        {
            stringbuilder.append(line + "\n");
        }

        inputstream.close();

        result = stringbuilder.toString();
    }
    catch(Exception e)
    {
        Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
    }
    //END Convert response to string   
    try{
        JSONArray jArray = new JSONArray(result);
        JSONObject json_data=null;
        if(jArray.length() == 0)
        {
            Toast.makeText(getApplicationContext(), "Tiada mesej", Toast.LENGTH_SHORT).show();
        }
        else
        {
            for(int i=0;i<jArray.length();i++)
            {
                json_data = jArray.getJSONObject(i);
                content_type = content_type + json_data.getString("uploadedcontenttype")+",";
                content_path = content_path+"http://localhost/project/"+(String) json_data.getString("contentpath")+",";
                imageAudio_image = imageAudio_image + json_data.getString("imageaudiopath")+",";
                //r.add(json_data.getString("member_id") + json_data.getString("member_name") + json_data.getString("member_usernamepath"));
                content_id = content_id + json_data.getString("contentid")+",";
                imageaudio_id = imageaudio_id + json_data.getString("imageaudioid")+",";
                content_date = content_date + json_data.getString("contentdate")+",";
                over_contentid = over_contentid + json_data.getString("overallid")+",";
                uploaded_content_id = uploaded_content_id +  json_data.getString("uploadedcontentid")+",";
                sender_id = sender_id +  json_data.getString("senderid")+",";
                receiver_id = receiver_id + json_data.getString("receiverid")+",";
                read_status =read_status + json_data.getString("readstatus")+",";
                sender_member_image = sender_member_image + "http://localhost/project/www/"+json_data.getString("memberimage")+",";
            }
        }
        Log.e("retrieved ", "~ "+content_type + "@ " +  " # "+ content_path + " $ "+ sender_id);
    }
    catch(JSONException e1){
        Toast.makeText(getApplicationContext(), "Tiada mesej", Toast.LENGTH_SHORT).show();
        Log.e("erroe ", e1.toString() );
        //Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
    } catch (ParseException e1) {
        Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
    }

    // Split the data retrieved from database
    content_type_split = content_type.split(",");
    content_path_split = content_path.split(",");
    content_id_split = content_id.split(",");
    content_date_split = content_date.split(",");
    sender_member_image_split = sender_member_image.split(",");
    uploaded_content_id_split = uploaded_content_id.split(",");
    imageAudio_image_split = imageAudio_image.split(",");

    mInflater = (LayoutInflater) getSystemService(
            Activity.LAYOUT_INFLATER_SERVICE);
    data = new Vector<RowData>();
    for(int i=0;i<content_type_split.length;i++){

        try {
            rd = new RowData(i,content_type_split[i],content_date_split[i]);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        data.add(rd);
    }
    CustomAdapter adapter = new CustomAdapter(this, R.layout.list,
            R.id.title, data);
    setListAdapter(adapter);
    //getListView().setTextFilterEnabled(true);
}

public void onListItemClick(ListView parent, View v, int position,
        long id) {
    // Show details in another page
    Intent viewMsgIntent = new Intent(ViewMsgMain.this, ViewMsgDetails.class);
    viewMsgIntent.putExtra("content_type", content_type_split[position]);
    viewMsgIntent.putExtra("content_path", content_path_split[position]);
    viewMsgIntent.putExtra("sender_member_image", sender_member_image_split[position]);
    viewMsgIntent.putExtra("imageAudio_image", imageAudio_image_split[position]);
    startActivity(viewMsgIntent);
}
private class RowData {
    protected int mId;
    protected String mTitle;
    protected String mDetail;
    RowData(int id,String title,String detail){
        mId=id;
        mTitle = title;
        mDetail=detail;
    }
    @Override
    public String toString() {
        Log.e("rowdata",mId+" "+mTitle+" "+mDetail);
        return mId+" "+mTitle+" "+mDetail;
    }
}
private class CustomAdapter extends ArrayAdapter<RowData> {

    public CustomAdapter(Context context, int resource,
            int textViewResourceId, List<RowData> objects) {               

        super(context, resource, textViewResourceId, objects);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {   

        ViewHolder holder = null;
        TextView title = null;
        TextView detail = null;
        ImageView i11=null;
        ImageView i112=null;
        RowData rowData= getItem(position);
        Log.e("content_type_split.length ", "## "+content_type_split.length+"   ~~ row id~~   "+ rowData.mId);
        if(null == convertView){
            convertView = mInflater.inflate(R.layout.list, null);
            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        }
        holder = (ViewHolder) convertView.getTag();
        title = holder.gettitle();
        title.setText(rowData.mTitle);
        detail = holder.getdetail();
        detail.setText(rowData.mDetail);                                                     

        i11=holder.getImage();
        if(content_type_split[rowData.mId].equals("1"))
        {
            i11.setImageResource(R.drawable.imageicon2);
        }
        else if(content_type_split[rowData.mId].equals("2"))
        {
            i11.setImageResource(R.drawable.audioicon2);
        }
        else if(content_type_split[rowData.mId].equals("3"))
        {
            i11.setImageResource(R.drawable.videoicon2);
        }

        Log.e("get view ," , " ~ "+sender_member_image_split[rowData.mId]);

        i112=holder.getImage2();
        try {
            Log.e("enter bitmap ", "yes");
            bitmap = BitmapFactory.decodeStream((InputStream)new URL(sender_member_image_split[rowData.mId]).getContent());
            i112.setImageBitmap(bitmap);

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return convertView;
    }
    private class ViewHolder {
        private View mRow;
        private TextView title = null;
        private TextView detail = null;
        private ImageView i11=null;
        private ImageView i112=null; 

        public ViewHolder(View row) {
            mRow = row;
        }
        public TextView gettitle() {
            if(null == title){
                title = (TextView) mRow.findViewById(R.id.title);
            }
            return title;
        }     

        public TextView getdetail() {
            if(null == detail){
                detail = (TextView) mRow.findViewById(R.id.detail);
            }
            return detail;
        }
        public ImageView getImage() {
            if(null == i11){
                i11 = (ImageView) mRow.findViewById(R.id.img);
            }
            return i11;
        }

        public ImageView getImage2() {
            if(null == i112){
                i112 = (ImageView) mRow.findViewById(R.id.img2);

            }
            return i112;
        }
    }
} 
```

}

**日志**

```
 05-15 21:59:52.660: E/content_type_split.length(7388): ## 3   ~~ row id~~   0
            05-15 21:59:52.670: D/dalvikvm(7388): GC_CONCURRENT freed 352K, 11% free 9318K/10439K, paused 2ms+3ms
            05-15 21:59:52.690: E/get view ,(7388):  ~ http://localhost/project/www/username/kids.jpg
            05-15 21:59:52.690: E/enter bitmap(7388): yes
            05-15 21:59:52.720: W/System.err(7388): Error reading from ./org/apache/harmony/awt/www/content/image/jpeg.class
            05-15 21:59:52.740: E/content_type_split.length(7388): ## 3   ~~ row id~~   1
            05-15 21:59:52.740: E/get view ,(7388):  ~ http://localhost/project/www/username/1_2012512080548_DSC00701.JPG
            05-15 21:59:52.740: E/enter bitmap(7388): yes
            05-15 21:59:52.790: W/System.err(7388): Error reading from ./org/apache/harmony/awt/www/content/image/jpeg.class
            05-15 21:59:52.810: D/dalvikvm(7388): GC_FOR_ALLOC freed 562K, 14% free 9034K/10439K, paused 23ms
            05-15 21:59:52.810: I/dalvikvm-heap(7388): Grow heap (frag case) to 9.477MB for 614416-byte allocation
            05-15 21:59:52.850: D/dalvikvm(7388): GC_FOR_ALLOC freed <1K, 14% free 9633K/11079K, paused 22ms
            05-15 21:59:52.880: E/content_type_split.length(7388): ## 3   ~~ row id~~   2
            05-15 21:59:52.890: E/get view ,(7388):  ~ http://localhost/project/www/username/kids.jpg
            05-15 21:59:52.890: E/enter bitmap(7388): yes
            05-15 21:59:52.930: W/System.err(7388): Error reading from ./org/apache/harmony/awt/www/content/image/jpeg.class
            05-15 21:59:52.950: E/content_type_split.length(7388): ## 3   ~~ row id~~   0
            05-15 21:59:52.950: E/get view ,(7388):  ~ http://localhost/project/www/username/kids.jpg
            05-15 21:59:52.950: E/enter bitmap(7388): yes
            05-15 21:59:52.980: W/System.err(7388): Error reading from ./org/apache/harmony/awt/www/content/image/jpeg.class
            05-15 21:59:52.990: E/content_type_split.length(7388): ## 3   ~~ row id~~   1
            05-15 21:59:52.990: E/get view ,(7388):  ~ http://localhost/project/www/username/1_2012512080548_DSC00701.JPG
            05-15 21:59:52.990: E/enter bitmap(7388): yes
            05-15 21:59:53.040: W/System.err(7388): Error reading from ./org/apache/harmony/awt/www/content/image/jpeg.class
            05-15 21:59:53.060: D/dalvikvm(7388): GC_FOR_ALLOC freed 1064K, 19% free 9034K/11079K, paused 23ms
            05-15 21:59:53.100: E/content_type_split.length(7388): ## 3   ~~ row id~~   2
            05-15 21:59:53.100: E/get view ,(7388):  ~ http://localhost/project/www/username/kids.jpg
            05-15 21:59:53.100: E/enter bitmap(7388): yes
            05-15 21:59:53.130: W/System.err(7388): Error reading from ./org/apache/harmony/awt/www/content/image/jpeg.class
            05-15 21:59:53.170: D/dalvikvm(7388): GC_CONCURRENT freed 820K, 19% free 9033K/11079K, paused 2ms+2ms
            05-15 21:59:53.170: E/content_type_split.length(7388): ## 3   ~~ row id~~   0
            05-15 21:59:53.180: E/get view ,(7388):  ~ http://localhost/project/www/username/kids.jpg
            05-15 21:59:53.180: E/enter bitmap(7388): yes
            05-15 21:59:53.210: W/System.err(7388): Error reading from ./org/apache/harmony/awt/www/content/image/jpeg.class
            05-15 21:59:53.230: E/content_type_split.length(7388): ## 3   ~~ row id~~   1
            05-15 21:59:53.240: E/get view ,(7388):  ~ http://localhost/project/www/username/1_2012512080548_DSC00701.JPG
            05-15 21:59:53.240: E/enter bitmap(7388): yes
            05-15 21:59:53.280: W/System.err(7388): Error reading from ./org/apache/harmony/awt/www/content/image/jpeg.class
            05-15 21:59:53.320: D/dalvikvm(7388): GC_CONCURRENT freed 268K, 13% free 9640K/11079K, paused 3ms+2ms
            05-15 21:59:53.330: E/content_type_split.length(7388): ## 3   ~~ row id~~   2
            05-15 21:59:53.350: E/get view ,(7388):  ~ http://localhost/project/www/username/kids.jpg
            05-15 21:59:53.350: E/enter bitmap(7388): yes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T01:47:51.207

正如 Dheeresh Singh 所说，问题不应该是调用 getView() 的次数。尽管这确实突出了可能的问题。因为 getView() 可以并且将被无数次调用，所以 getView() 中的代码需要高效。您对 getView() 的实现有几个问题。

1) 内存不足问题 (OOM) 很可能是由位图引起的。

*   当您完成位图时，它没有被正确处理，因为即使在 getView() 退出后它仍然驻留在内存中。这就是 Android 中位图的本质。调用 bitmap.recycle() 将释放此内存并应防止 OOM。

*   调整位图大小或降低分辨率可以提高内存使用率。

2) 每次运行 getView() 时，*每次*都下载并解码所需的位图。

*   这是不可取的，因为这些密集任务在 UI 线程上运行（活动在其上运行，并且所有 ui 更改都必须发生在该线程上）。如果完成这些任务的时间超过约 5 秒，Android 会将应用程序标记为停止并发出应用程序无响应 (ANR)。即使没有发生 ANR，ListView 的滚动性能也会很糟糕。

*   为了解决这个问题，下载、解码和位图更改（如果需要）这些任务应该发生在另一个线程中（如[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)）。一个典型的场景是，当您需要位图时，您会触发 AsyncTask 或向位图处理线程发出请求。作为线程请求的一部分，应该提供一个侦听器，以便当位图在位图线程上准备就绪时，它将使用侦听器向 UI 线程发出信号以更新 ImageView。这个实现并不简单，但对于健壮的 Android 应用程序来说是必需的。

*   一个重要的旁注：不要将 Activity 泄漏给其他线程。当发生泄漏并且 Activity 被 Android 销毁时（这种情况经常发生并且由于各种原因，方向变化就是其中之一），由于实例存在于另一个线程中，因此无法对 Activity 进行垃圾收集。然后，Android 会启动一个新的 Activity 实例，而死掉的 Activity 仍然存在。最终会发生 OOM。例如，在为位图线程创建侦听器时，不要将 ImageView（因为它具有 Activity 上下文）作为侦听器的一部分——除非您在 Activity 的 onDestroy() 中从位图线程中显式删除侦听器。这与 AsyncTask 不同 - 只需处理 onPostExecute() 中的所有 ui 更改。

    [事件侦听器中的内存泄漏](https://stackoverflow.com/questions/5002589/memory-leakage-in-event-listener)

*   应该使用缓存来避免重复下载和处理位图。一种可能的实现方式是使用[LruCache](http://developer.android.com/reference/android/util/LruCache.html)作为内存缓存，使用[DiskLruCache](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#disk-cache)作为磁盘缓存。

    [http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

3) ViewHolder 使用。

*   我不确定在其 ViewHolder 中引用“convertView”是否有用。这个循环引用的唯一用途是实现 getter，尽管这对于快速执行 getView() 来说效率略低。这将是 ViewHolder 作为 Activity 的内部类而不是 CustomAdapter 的典型实现。

    ```
    private class CustomAdapter extends ArrayAdapter<RowData> {

        public CustomAdapter(Context context, int resource,
                int textViewResourceId, List<RowData> objects) {               

            super(context, resource, textViewResourceId, objects);
        }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {   

            ViewHolder holder = null;
            RowData rowData= getItem(position);
            Log.e("content_type_split.length ", "## "+content_type_split.length+"   ~~ row id~~   "+ rowData.mId);
            if(null == convertView){
                convertView = mInflater.inflate(R.layout.list, null);
                holder = new ViewHolder(convertView);
                convertView.setTag(holder);
                holder.title = (TextView) convertView.findViewById(R.id.title);
                holder.detail = (TextView) convertView.findViewById(R.id.detail);
                holder.i11 = (ImageView) convertView.findViewById(R.id.img);
                holder.i112 = (ImageView) convertView.findViewById(R.id.img2);

            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.title.setText(rowData.mTitle);
            holder.detail.setText(rowData.mDetail);                                                     

            if(content_type_split[rowData.mId].equals("1"))
            {
                holder.i11.setImageResource(R.drawable.imageicon2);
            }
            else if(content_type_split[rowData.mId].equals("2"))
            {
                holder.i11.setImageResource(R.drawable.audioicon2);
            }
            else if(content_type_split[rowData.mId].equals("3"))
            {
                holder.i11.setImageResource(R.drawable.videoicon2);
            }

            Log.e("get view ," , " ~ "+sender_member_image_split[rowData.mId]);

            try {
                Log.e("enter bitmap ", "yes");
                bitmap = BitmapFactory.decodeStream((InputStream)new URL(sender_member_image_split[rowData.mId]).getContent());
                holder.i112.setImageBitmap(bitmap);

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return convertView;
        }
    }

    private class ViewHolder {
        TextView title = null;
        TextView detail = null;
        ImageView i11=null;
        ImageView i112=null;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:20:14.003

请看这个答案

[多次调用自定义列表视图适配器 getView 方法，并且顺序不一致](https://stackoverflow.com/questions/2618272/custom-listview-adapter-getview-method-being-called-multiple-times-and-in-no-co)

这不是问题，绝对不能保证调用 getView() 的顺序或调用次数。

# android - ViewPager 以编程方式滚动

> ID：10602644
> 
> 赞同：14
> 
> 时间：2012-05-15T14:12:58.093
> 
> 标签：android, android-viewpager

我有一个简单的`ViewPager`. 是否有任何可能性以通常的动画每五秒钟以编程方式滚动一次？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-15T14:25:34.420

看一下`ViewPager.setCurrentItem(int)`并将其与 a`TimerTask`或 a结合使用`Handler`。

例子：

```
final ViewPager viewPager = ...;
final Handler h = new Handler(Looper.getMainLooper());
final Runnable r = new Runnable() { 
    public void run() {
        viewPager.setCurrentItem(0, true);
        h.postDelayed(r, 5000); 
    }
};
h.postDelayed(r, 5000); 
```

请务必在适当的时候取消可运行对象。

# php - 输入保存文本区域值的键

> ID：10602647
> 
> 赞同：3
> 
> 时间：2012-05-15T14:13:03.647
> 
> 标签：php, jquery, ckeditor

嗨，我有 ckeditor 和一个按钮，用于使用 ajax 保存 ckeditor 文本。

```
<textarea id="editor1" name="editor1"></textarea>
<input type="button" name="send" id="send" value="Send" onclick="save()"> 
```

我想要删除按钮，当按下 ajax 键时输入保存文本（运行保存功能），但是当在 ckeditor 换行符中按下 enter 时。以及如何使用输入交换按钮？

```
<textarea id="editor1" name="editor1"></textarea>
if (enter press in any where web page ) do save(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T20:02:08.943

重要的部分是 CKEditor 中的内容是 iframe，因此那些尝试检查当前文档上的按键的解决方案将失败。

使用 CKEditor 事件并且不依赖任何外部库，解决方案就这么简单：

```
var editor = CKEDITOR.replace('editor1');  

editor.on('key', function(ev) {
   if (ev.data.keyCode==13)
   {
       ev.cancel();
       console.log('enter');
   }       
}); 
```

你可以在这里测试它：http: [//jsfiddle.net/zjkSR/](http://jsfiddle.net/zjkSR/) （看看你的控制台）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:40:52.907

这是我不久前为一个网站创建的代码，它允许您在输入时提交，但是将允许您按住 shift+enter 来创建一个新行（作为自动提交应该的文本区域）。

它是使用 jQuery 编写的。

```
 var  TextBox = $('.autosubmit');
    var code =null;
    // on keypress do this
    TextBox.keyup(function(e)
    {
        // get keycode
        code= (e.keyCode ? e.keyCode : e.which);
        // if keycode is 13 (enter)
        if (code == 13 && e.shiftKey) {
            var content = this.value;
            var caret = getCaret(this);
            this.value = content.substring(0,caret)+"\n"+content.substring(carent,content.length-1);
            event.stopPropagation();
        } else if (code == 13) {
            $(this).closest("form").submit();
        }
    });

    function getCaret(el) {
      if (el.selectionStart) {
         return el.selectionStart;
      } else if (document.selection) {
         el.focus();

       var r = document.selection.createRange();
       if (r == null) {
        return 0;
       }

        var re = el.createTextRange(),
        rc = re.duplicate();
        re.moveToBookmark(r.getBookmark());
        rc.setEndPoint('EndToStart', re);

        return rc.text.length;
      }  
      return 0;
     } 
```

但是，我不确定它是否可以在 CK Editor 中工作。最好的方法是将这样的内容添加到您的配置文件中：

```
config.keystrokes = 
[
    [ CKEDITOR.ALT + 121 /*F10*/, 'toolbarFocus' ],
    [ CKEDITOR.ALT + 122 /*F11*/, 'elementsPathFocus' ],

    [ CKEDITOR.SHIFT + 121 /*F10*/, 'contextMenu' ],

    [ CKEDITOR.CTRL + 90 /*Z*/, 'undo' ],
    [ CKEDITOR.CTRL + 89 /*Y*/, 'redo' ],
    [ CKEDITOR.CTRL + CKEDITOR.SHIFT + 90 /*Z*/, 'redo' ],

    [ CKEDITOR.CTRL + 76 /*L*/, 'link' ],

    [ CKEDITOR.CTRL + 66 /*B*/, 'bold' ],
    [ CKEDITOR.CTRL + 73 /*I*/, 'italic' ],
    [ CKEDITOR.CTRL + 85 /*U*/, 'underline' ],

    [ CKEDITOR.ALT + 109 /*-*/, 'toolbarCollapse' ],
    [ 13, 'save'] // note this line
]; 
```

这将`save`在输入时添加事件，但将保留其他默认击键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:19:30.527

您需要做的是使用 jQuery 捕获`keyup`or`keydown`事件，并检查是否是按下的回车键`keyCode`。`event`

例如：

```
$('body').on('keyup', function(event){
    if (event.keyCode===13)
    {
        alert('enter key pressed!');
        save();
    }
}); 
```

Javascript keyCode 参考：[http ://asquare.net/javascript/tests/KeyCode.html](http://asquare.net/javascript/tests/KeyCode.html)

编辑：哎呀，误读的问题 - 请参阅更新的答案。将选择器更改为目标正文而不是文本区域，但正如@KevinB 所说，这可能是个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:22:18.320

```
$(document).ready(function () { 
    //set up the editor instance for ckeditor
    var editor = CKEDITOR.replace(
       'editor1',
        {
            toolbar:
            [
                ['Source'],
                ['Cut', 'Copy', 'PasteText'],
                ['Undo', 'Redo', '-', 'SelectAll', 'RemoveFormat'],
                ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink'], ['SpecialChar']
            ]
        }
    );    

    $('body').on('keypress', function (e) {
        if (e.target.id !== "editor1" && (e.keyCode ? e.keyCode : e.which) === 13) 
        {
            alert(e.target.id); // jquery ajax  save function
        }
    });
});

<textarea id="editor1" rows="5" cols="50"></textarea> 
```

# cakephp - 在 CakePHP 中使用 AuthComponent 阻止未登录用户的页面

> ID：10602653
> 
> 赞同：0
> 
> 时间：2012-05-15T14:13:11.340
> 
> 标签：cakephp, authentication, cakephp-2.0, cakephp-2.1

这是我的项目：

我有一个可供用户或管理员使用的网站。我创建了诸如索引、视图等方法……这些视图必须可供用户和管理员访问。我也有admin_index、admin_edit等方法。它们必须由管理员查看。

目前所有用户页面都是公开的，管理页面受登录保护。我也想要求登录用户页面。唯一的公共页面是**/users/login**。

如何使用 AuthComponent 做到这一点？

当我输入：

```
public function beforeFilter() { 
   $this->Auth->allow('login');
} 
```

我有一个重定向循环。

谢谢您的帮助

* * *

我仍然有问题。这是我的代码。

应用控制器

```
class AppController extends Controller {
    public $helpers = array('Text', 'Form', 'Html', 'Session', 'Cache');

    public $components = array(
        'Session', 
        'Auth' => array(
            'loginAction'   => array('controller' => 'users', 'action' => 'login', 'admin' => false),
            'loginRedirect' => array('controller' => 'index', 'action' => 'index', 'admin' => true),
            'logoutRedirect'=> array('controller' => 'users', 'action' => 'login', 'admin' => false),
        )
    );

    public function beforeFilter() {
        $this->Auth->allow('login');
    }
} 
```

还有我的用户控制器

```
class UsersController extends AppController {

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow(array('login', 'logout'));
    }

    public function login(){

        if(isset($_SESSION['Auth']['User'])){
            return $this->redirect($this->Auth->redirect());
        }

        if($this->request->is('post')){
            if($this->Auth->login()){
                return $this->redirect($this->Auth->redirect());
            } else{
                $this->Session->setFlash('Identifiants incorrects', 'notif');
            }
        }
    }

    public function logout() {
        $this->Session->setFlash('Vous êtes déconnecté', 'notif', array('type' => 'success'));
        $this->redirect($this->Auth->logout());
    }
} 
```

我仍然有重定向循环。我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:43:16.047

这段代码也有问题：

```
class AppController extends Controller {
public $helpers = array('Text', 'Form', 'Html', 'Session', 'Cache');

    public $components = array(
        'Session', 
        'Auth' => array(
            'loginAction'   => array('controller' => 'users', 'action' => 'login', 'admin' => false),
            // Change controller = index to controller = users
            //'loginRedirect' => array('controller' => 'index', 'action' => 'index', 'admin' => true),
            'loginRedirect' => array('controller' => 'users', 'action' => 'index', 'admin' => true),
            'logoutRedirect'=> array('controller' => 'users', 'action' => 'login', 'admin' => false),
        )
    );

    public function beforeFilter() {
        $this->Auth->allow('login');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:19:13.340

最好的方法是使用 ACL，但是，如果您仍然只想使用 AuthComponent，我建议您照常使用 beforeFilter() 但此外，我还会在此处添加一个已登录检查，例如：

```
public function beforeFilter(){
    parent::beforeFilter();

    if($this->Auth->user()){
        $this->Auth->allow('*');
    }else{
        $this->Auth->allow('login');
    }
} 
```

如果您仍想仅使用 AuthComponent 更进一步，您可以设置更多检查，例如：

```
 // group_id = 2 is for users who are paid subscribers for example
    // and group_id = 1 is for administrators
    if($this->Auth->user('group_id') == 1){
        $this->Auth->allow('*');
    }elseif($this->Auth->user('group_id') == 2 ){
        $this->Auth->allow('paidcontent','video','photo','etc');
    }elseif($this->Auth->user()){
        $this->Auth->allow('index','view');
    }else{
        $this->Auth->allow('login');
    } 
```

上面的代码未经测试。如果您需要任何进一步的帮助，请告诉我

# iphone - 如何忽略 NSFetchedResultsController 中的 sortDescriptor

> ID：10602656
> 
> 赞同：1
> 
> 时间：2012-05-15T14:13:14.087
> 
> 标签：iphone, ios, nsfetchedresultscontroller, nssortdescriptor

我正在使用`NSFetchedResultsController`检索数据`UITableView`。但问题是我必须使用`sortDescriptor`with `NSFetchedResultsController`。我不想对我的数据进行排序，我想按照我在表中插入它们的顺序在表中显示数据。

有没有办法处理这个任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T17:02:09.410

如果您希望您的数据按插入顺序排序，那么您需要一个字段来记录此顺序。

一个很好的方法是`creationDate`为您的对象添加一个属性，然后使用该`awakeFromInsert`方法自动记录插入时间。

```
- (void)awakeFromInsert
{
    [super awakeFromInsert];
    [self setValue:[NSDate date] forKey:@"creationDate"];
} 
```

现在，当您想按插入顺序对它们进行排序时，您已经准备就绪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T07:13:16.583

感谢您的回答。我添加了另一个名为排序号的属性并以这种方式实现：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
chapterSN = [userDefaults objectForKey:@"sortingNumber"];
if (chapterSN == Nil) {
    NSInteger chapterSortingValue = 0;
    chapterSN = [NSNumber numberWithInteger:chapterSortingValue];
    [userDefaults setValue:chapterSN forKey:@"sortingNumber"];
 }
 else {
     NSInteger chapterSortingValue = [chapterSN integerValue];
     chapterSortingValue = chapterSortingValue+1;
     chapterSN = [NSNumber numberWithInteger:chapterSortingValue];
     [userDefaults setValue:chapterSN forKey:@"sortingNumber"];
 } 
```

# javascript - 为什么这个脚本可以在 FF 和 IE 中运行，但不能在 Google Chrome 中运行？

> ID：10602660
> 
> 赞同：2
> 
> 时间：2012-05-15T14:13:22.837
> 
> 标签：javascript, jquery, html, google-chrome

我有一个在 Firefox 和 IE 8/9 中运行良好的脚本。但它在谷歌浏览器中不起作用。

这是我的脚本：

```
// At first I have a link at position x=500,y=400
<a href="http://www.google.de">TestLink</a>

<script type="text/javascript">
function clicklink()
{
elementa = document.elementFromPoint(500, 400);
window.elementa.click();
}

window.setTimeout("clicklink()", 5000);

</script> 
```

我必须用该`ElementFromPoint`方法解决这个问题，因为链接是从另一端动态生成的链接。所以我不能使用它的`id`or `class`。

我愿意接受 Javascript、jQuery、php 或任何其他解决方案。

编辑：我还使用此脚本检查了它是否是正确的位置

```
<script type="text/javascript">
function change_color_of_link()
{
elementb = document.elementFromPoint(500, 400);
elementb.style.color = 'red';
}

window.setTimeout("change_color_of_link()", 5000);

</script> 
```

Chrome JS 控制台给了我这个错误： Uncaught TypeError: Object # has no method 'click'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:16:11.897

该`click()`方法不是标准的一部分，也不存在于 Chrome 中。

相反，设置`location = elementa.href`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:24:03.343

我不明白你想做什么。

但是，如果您只需要/想知道锚点何时被“点击”并且可以“围绕”链接操作 html，您可以将锚点包装在 div 中吗？

使用 jQuery：

```
$(document).ready(function(){

  $("#theDIV a").on("click",function(){
       //do your stuff here
  });
}); 
```

我的意思是，如果您可以放置​​一个 DIV 或通过 ID 知道一个包含链接的 DIV，它可以帮助您。

# c# - 为受密码保护的提要编写 RSS 阅读器，连接超时

> ID：10602661
> 
> 赞同：1
> 
> 时间：2012-05-15T14:13:23.380
> 
> 标签：c#, .net-4.0

在这一点上，我只是想从网站上得到回应。这是我的代码：

```
private void GetFeed(string userName, string password, string url)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    request.PreAuthenticate = true;
    request.Timeout = 1000;

    NetworkCredential netCred = new NetworkCredential(userName, password);
    request.Credentials = netCred;

    try
    {
        WebResponse wr = request.GetResponse();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

我的用户名和密码*绝对*正确，我已经检查了四次，所以这与我的连接方式有关。我认为我的代码非常简单，但如果我需要解释什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:18:34.577

下载并熟悉[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具，以了解如何准确地将浏览器发布的内容发布到网站上。可能是该站点需要某些 cookie 或其他标头。

请参阅[HttpWebRequest POST 数据](https://stackoverflow.com/questions/10541270/httpwebrequest-post-data/10541342#10541342)

# ruby-on-rails - 简单的照片画廊宝石

> ID：10602662
> 
> 赞同：6
> 
> 时间：2012-05-15T14:13:28.797
> 
> 标签：ruby-on-rails, gem

有没有实现简单照片库的rails gem。

所需的功能如下：

*   将照片整理到相册；
*   管理界面，允许一次上传多张照片，编辑标题和描述。

我找到了[http://balderapp.com/](http://balderapp.com/)，但这是一个应用程序（不是宝石）。此外，由于标签、位置等原因，它很重。这些模型可能会干扰我项目中的现有事物。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T10:43:35.800

参考以下

1.  [http://rubygems.org/gems/spud_photos](http://rubygems.org/gems/spud_photos)。

2.  [http://rubygems.org/gems/gallerize](http://rubygems.org/gems/gallerize)。

和第一个一起去。详细文档在这里：[https](https://github.com/gregawoods/spud_photos) ://github.com/gregawoods/spud_photos 。

# python - 如何在python中绘制随机形状？

> ID：10602663
> 
> 赞同：3
> 
> 时间：2012-05-15T14:13:29.143
> 
> 标签：python, shape

我想使用 python 在图像中以随机颜色绘制随机形状。python中是否存在任何模块来绘制随机形状，如不同大小和形状的多边形并混合在一起形成新形状等

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:18:22.947

对于创建/修改图像，[Python Imaging Library](http://www.pythonware.com/products/pil/)可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:26:46.603

由于不确定您要完成什么，以下代码是一个简单示例，说明如何生成随机形状并将它们显示在窗口中。它创建一个`tkinter`根对象，设置一个`Canvas`用于显示的对象，并在程序运行的每一秒内随机创建和显示多边形。

```
from tkinter import *
from random import *

class Application(Canvas):

    X_OFFSET = 40
    Y_OFFSET = 40
    FILL = 'blue'
    LINE = 'black'

    @classmethod
    def main(cls):
        root = Tk()
        surface = cls(root)
        surface.grid()
        surface.after_idle(surface.draw_shape)
        root.mainloop()

    def draw_shape(self):
        x = randrange(int(self['width']) - self.X_OFFSET)
        y = randrange(int(self['height']) - self.Y_OFFSET)
        points = [(x + randrange(self.X_OFFSET), y + randrange(self.Y_OFFSET))
                  for point in range(randint(3, 10))]
        self.create_polygon(points, fill=self.FILL, outline=self.LINE)
        self.after(1000, self.draw_shape)

if __name__ == '__main__':
    Application.main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:59:54.753

[Cairo](http://cairographics.org/pycairo/)可能对跨平台 GUI 或[SVG](http://codeboje.de/pysvg/)有用，如果您只想在浏览器中使用它。

# asp.net - 应将 Web 应用程序的哪些部分移至 Azure 中的 WorkerRole

> ID：10602665
> 
> 赞同：1
> 
> 时间：2012-05-15T14:13:35.267
> 
> 标签：asp.net, azure, cloud, soa

应将 Web 应用程序的哪些部分移至 Azure 中的 WorkerRole？

我看到一个网站的明确用途，说转换的 mp3，但是磨坊 ASP.NET 网站的运行呢？CRUD 操作（例如）现在应该由 WorkerRole 处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:21:29.710

虽然之前在其他 SO 问题中已经多次回答了这个问题：Web 和 Worker 角色本质上是启用或不启用 IIS 的 Windows Server 2008 实例。在考虑将任务转移到 Worker 角色（甚至是另一个 Web 角色）时，它归结为性能和扩展。

如果您觉得您的后台操作会消耗大量内存和 CPU，并可能影响网站性能，那么将这些操作转移到不同的角色并独立扩展该角色。然后，您可以使用 Azure 队列创建工作项以供不同角色使用（或在内部终结点、服务总线或其他技术上使用 WCF 服务）。

将任务组合到单个 Web 角色中将节省初始成本，因为您总共可以部署一个或两个实例。那时您只需要按步调缩放所有内容。

# android - Android - 连接 MySQL 数据库的最安全方式

> ID：10602666
> 
> 赞同：2
> 
> 时间：2012-05-15T14:13:40.277
> 
> 标签：android, mysql, security, database-connection, http-post

我正在开发一个使用与网站相同的 MySQL 服务器的 Android 应用程序。

我想在我的应用程序中连接到数据库，我之前通过在服务器上放置一些 PHP 文件并使用 HTTP 发布并以 json 格式检索响应来完成此操作。我不知道为什么——我不是专家——但这对我来说似乎不是一个非常安全的方法。

使用 SOAP 或 REST 网络服务对我来说看起来更安全，但我不知道如何将它们部署在服务器上（服务器不是我的，我不想玩弄太多）。

那么对我来说最安全的方法是什么？

如果我使用 PHP 脚本，我应该将数据库凭据存储在 PHP 脚本中还是我的应用程序中并将它们传递给 PHP 脚本？这些最安全的是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:19:59.217

您选择的“信封技术”对安全性没有影响。在安全架构方面，普通的 php 页面、类似 REST 的架构和 SOAP 服务都是相同的——您仍然通过相同的通道发送和接收完全相同的信息。它只是以不同的方式*包裹起来*。没有提供额外的保护。

至于您的凭据，最好将它们存储在位于 Web 服务器文档根目录之外的文件中 - 如果单独的漏洞允许您的网站文件被枚举或读取，这会限制您的暴露。您的 PHP 程序可以`require_once`使用凭证文件。

如果用户可以存储特定于他们的信息，您将需要使用身份验证和授权来确保一个用户不能代表另一个用户行事。

哦，不要让 GET 请求更改您的数据。要求所有状态更改或破坏性操作只能通过 POST 请求执行。这将限制预缓存请求或重放请求的用户代理/代理以及浏览您网站的用户/搜索机器人对您的数据造成损害的风险。

# entity-framework - 如何在使用 Entity Framework 4.1 创建的生产中的现有数据库上使用迁移？

> ID：10602680
> 
> 赞同：12
> 
> 时间：2012-05-15T14:14:50.913
> 
> 标签：entity-framework, entity-framework-migrations

我有一个使用 Entity Framework 4.1 Code First 创建的生产系统。现在，我已经升级到 4.3 并且需要应用迁移，但是我需要涵盖几个用例：

1.  新开发人员需要使用种子数据从头开始创建的数据库。（该`Seed()`方法还应用了一些唯一索引。）
2.  生产环境只需要应用未应用的更改。（但请记住，此数据库是在 EF 4.1 中创建的，它没有迁移。）

如何创建迁移和初始化程序（或初始化程序）以涵盖这两种情况？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-15T20:33:52.667

由于您的生产数据库是使用 EF 4.1 创建的，因此您需要做一些工作以使其准备好与[Migrations](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)一起使用。从在开发环境中运行的当前生产代码的副本开始。**确保 dev 数据库不存在。**

1.  升级项目以使用带有迁移的 EF 4.3（或更高版本）并创建初始迁移以快照生产当前的样子。

    ```
    Update-Package EntityFramework
    Enable-Migrations
    Add-Migration InitialCreate 
    ```

2.  用匹配的迁移代码替换您的数据库初始化程序。

    对于种子数据，将其添加到文件的`Seed()`方法中`Migrations\Configuration.cs`。请注意，与`Seed()`初始化程序中的方法不同，此方法每次`Update-Database`调用时都会运行。它可能需要更新行（重置种子数据）而不是插入它们。该[`AddOrUpdate()`](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.idbsetextensions.addorupdate)方法可以对此有所帮助。

    由于您现在可以使用 Migrations 创建独特的缺陷，因此您应该将它们添加到`Up()`InitialCreate 迁移的方法中。您可以`CreateTable()`使用该[`Index()`](http://msdn.microsoft.com/en-us/library/hh829365)方法或通过调用该[`CreateIndex()`](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.dbmigration.createindex)方法将它们链接到调用中。

    您现在可以使用[MigrateDatabaseToLatestVersion](http://msdn.microsoft.com/en-us/library/hh829293)初始化程序在初始化期间运行迁移。

3.  获取一个脚本来引导您的生产环境。

    ```
    Update-Database -Script 
    ```

    从生成的脚本中，您将想要删除几乎所有内容，因为这些表已经存在。您需要的部分是`CREATE TABLE [__MigrationHistory]`and`INSERT INTO [__MigrationHistory]`语句。

4.  （可选）删除该`EdmMetadata`表，因为它不再需要。

Once you do these things, you should be good to go with Migrations. New developers can run `Update-Database` to create the database from scratch, and you can run `Update-Database` (or use the Migrations initializer) against production to apply additional migrations there.

# linux - Linux 磁盘清理

> ID：10602683
> 
> 赞同：-3
> 
> 时间：2012-05-15T14:15:05.923
> 
> 标签：linux, kernel, src

有什么理由将文件保存在 /usr/src 中吗？我不编译我的内核。

由于我的大多数 linux 实例都在虚拟机上，因此将磁盘空间保持在最低水平很重要。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:11:32.270

我一直认为不删除 wild 非常有帮助，而是保留在您的数据包管理器上并删除您不需要的数据包。

具体来说，内核源代码几乎总是不需要，但对文档很有帮助。

取决于您拥有的系统：如果您拥有基于 RPM 的系统，

```
rpm --queryformat='%{SIZE}\t%{NAME}\n' -qa |sort -n 
```

可以帮助识别占用大量空间的数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:22:56.890

我想说，如果您不打算重新编译该内核，您可以摆脱它并节省一些空间。

# asp.net-mvc-3 - 仅当我给出其选项卡的选定索引时，才加载 jquery ui 选项卡下的 jqgrid

> ID：10602684
> 
> 赞同：0
> 
> 时间：2012-05-15T14:15:07.720
> 
> 标签：asp.net-mvc-3, jquery-ui, jqgrid

```
$("#tabs").tabs({
        show: function (event, ui) {
            if (ui.index == 1){
                $.get('/Account/SomeView', function (data) {
                    //alert(data);
                    $('#tabs-2').html(data);
                });

            }
        },
        selected: 0,
    });

    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">TAB 1</a></li>
            <li><a href="#tabs-2">TAB 2</a></li>
            <li><a href="#tabs-3">TAB 3</a></li>
        </ul>
        <div id="tabs-1">
            @{ Html.RenderPartial("View"); }
        </div>
        <div id="tabs-2">

        </div>
        <div id="tabs-3">
           @{ Html.RenderPartial("View2"); }
        </div>
    </div> 
```

问题是当我`selected:1`没有问题 ajax 数据用于网格加载时，但是当我这样做`selected:0 or 2`并移动到选项卡 2 即索引选项卡索引 1 时，我看到空白没有网格，尽管来自服务器的数据即将到来。

`//alert(data);`我已经调试过，每次单击第二个选项卡时，来自服务器的数据都是我想要的，但为什么没有填充网格。

在 jquery ui tab docs 我读过这个 `Any component that requires some dimensional computation for its initialization won't work in a hidden tab, because the tab panel itself is hidden via display: none so that any elements inside won't report their actual width and height (0 in most browsers).`

这与我的问题有关吗？或者可能是什么问题？

**更新**：这是我输入警报（数据）时得到的数据

```
<script type="text/javascript">
jQuery(document).ready(function () {
jQuery('#office').jqGrid({
autowidth:false,
caption:'office Grid',
datatype:'json',
emptyrecords:'No Records Found',
gridview:true,
height:150,
pager:'#Officepager',
pgbuttons:false,
pgtext:'',
rowNum:-1,
sortname:'City',
toolbar:[true,'bottom'],
url:'/Account/GetOffice/',
editurl:'/Account/ModifyOffice/',
viewrecords:true,
width:'1160',
colModel: [
{
name:'OfficeId',
hidden:true,
label:'Id',
index:'OfficeId',
editable:true,
editrules:{edithidden:true},
editoptions:{disabled:'disabled'}
},{
name:'OfficeName',
label:'Office Name',
index:'OfficeName',
editable:true,
editrules:{required:true},
},{

name:'CompanyName',
label:'Company Name',
width:50,
index:'CompanyName',
editable:true,
edittype:'select',
editoptions:{value:getCompanyName()}
},{
name:'Address1',
hidden:true,
label:'Address 1',
index:'Address1',
editable:true,
editrules:{edithidden:true,required:true},
},{
name:'Address2',
hidden:true,
label:'Address 2',
index:'Address2',
editable:true,
editrules:{edithidden:true},
},{
name:'Address',
label:'Address',
index:'Address',
editable:false,
},{
name:'City',
label:'City',
index:'City',
editable:true,
},{
name:'State',
hidden:false,
label:'State',
index:'State',
editable:true,
editrules:{required:true},
}]

});
jQuery('#office').jqGrid('navGrid',"#Officepager",{edit:true,add:true,del:true,search:false,refresh:true},{width:550,closeAfterEdit:true,beforeShowForm:function(FrmGrid_office){$('#tr_OfficId').css('display','none');},afterSubmit:processAddEdit},{width:550,beforeShowForm:function(FrmGrid_office){$('#tr_OfficId').css('display','none');},reloadAfterSubmit:true,errorTextFormat:errorHandle,afterSubmit:processAddEdit}); 
jQuery('#office').jqGrid('filterToolbar', {stringResult:true, searchOnEnter:false});
});
</script>

<table id="office"></table><div id="Officepager"></div>
<script>
function getCompanyName() {
    var mbsCompName = $.ajax({
        url: '/Account/GetCompanyName',
        async: false
    }).responseText;
    return mbsCompName.substring(1, mbsCompName.length - 1);
}
function errorHandle(data) {
    return '<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>' +
        "<strong>Error:<strong></br>Status: '" + data.statusText + "'. Error code: " + data.status;

}
function processAddEdit(response, postdata) {
    var json = response.responseText;
    var result = eval("(" + json + ")");
    return [result.sc, result.msg, null];
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:03:18.717

html 加载完成时调用 jqgrid 函数。

```
 load: function(event, ui) {
        $(ui.panel).delegate('a', 'click', function(event) {
            $(ui.panel).load(this.href, function(){
                $("#gridpanel").jqugrid({
                       ..................................
               })
            });
            event.preventDefault();
        });
    } 
```

# javascript - 在另一个函数调用之前验证 JSON 响应

> ID：10602690
> 
> 赞同：0
> 
> 时间：2012-05-15T14:15:19.167
> 
> 标签：javascript, json

```
var jsonData = Model.CheckData(); 
```

// 如果我得到响应，我必须将响应传递给下面的以下函数。

```
if (!jsonData) {
    Ti.API.warn("JsonData");
    SendRes(jsonData);
} 
```

我面临的问题是，在我首先得到响应之前，函数已经被执行。它应该按顺序发生。

**注意**：我不能`SendRes`在我的 Json 上调用该函数`OnLoad`，因为它在不同的类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:20:18.133

我假设`Model.CheckData()`是一个 AJAX 调用。ajax 完成后，您可以给它一个回调。您必须修改该调用以接受回调：

```
//pass a callback to CheckData
Model.CheckData(function(jsonData){
    //do something with jsonData
    if (!jsonData) {
        Ti.API.warn("JsonData");
        SendRes(jsonData);
    }
});

//while in the CheckData function
function CheckData(callback){
    ...ajax call...
    //execute this on receive where "response" is your JSON
    callback(response);
} 
```

# jquery-mobile - 在 Jquery Mobile 中动态加载可折叠集

> ID：10602694
> 
> 赞同：0
> 
> 时间：2012-05-15T14:15:24.533
> 
> 标签：jquery-mobile, html

我正在尝试在 JQuery Mobile 中使用 ajax 调用动态加载嵌套的可折叠集。出于某种原因，可折叠的 div 最终显示在同一级别上；不是分层的或嵌套的。

这是代码：

```
 $('#pp-home').live("pageinit", function(){
        //Get Colleges
        $.ajax({url: "parent.php?action=xyz", 
            success:function(data){
                $(data).find('college').each(function(){
                    $('#colleges_div').append(
                        "<div id='col_"+$(this).attr('id')+"' data-role='collapsible' data-theme='c'>"+
                            "<h3>"+$(this).text()+"</h3><p>ssss</p>"+
                        "</div>"
                    );
                    //Get data
                    $.ajax({url:"children.php?action=xyz", 
                        success:function(data){
                            $(data).find('dept').each(function(){
                                $("#col_"+$(this).attr('cid')).append(
                                    "<div data-role='collapsible' data-theme='a' data-mini='true'>"+
                                        "<h3>"+$(this).text()+"</h3><p>ssss</p>"+
                                    "<div>"
                                );
                            $("#col_"+$(this).attr('cid')).trigger('create');
                            }); 
                        }
                    });
                });
                $('#colleges_div').trigger('create');
            }
        });     
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T23:26:13.060

可折叠内容的方法是：

```
$( ".selector" ).trigger( "collapse" ); 
$( ".selector" ).trigger( "expand" ); 
```

查看更多：http: [//jquerymobile.com/demos/1.2.0/docs/content/content-collapsible.html](http://jquerymobile.com/demos/1.2.0/docs/content/content-collapsible.html)

对于 Collapsible-set，您有：

```
$( ".selector" ).collapsibleset( "refresh" ); 
```

查看更多：http: [//jquerymobile.com/demos/1.2.0/docs/content/content-collapsible-set.html](http://jquerymobile.com/demos/1.2.0/docs/content/content-collapsible-set.html)

我目前在一条类似的船上，但试图在可折叠集中嵌套一个可折叠列表：http: [//jsfiddle.net/MqDFt/3/](http://jsfiddle.net/MqDFt/3/)

查看可能产生的 HTML，我认为您缺少定义为可折叠集的父级。格式应为：

```
<div data-role="collapsible-set" id="parent1">
  <div data-role="collapsible" id="child1">
    <h3>Header Title 1</h3>
    <p>ssss</p>
  </div>
  <div data-role="collapsible" id="child2">
    <h3>Header Title 2</h3>
    <p>ssss</p>
  </div>
</div> 
```

然后当你调用 $("#parent1").collapsibleset("refresh") 时，它应该会正确显示。

# java - 有没有办法使用 Eclipse 列出某个类的所有 equals() 调用？

> ID：10602696
> 
> 赞同：10
> 
> 时间：2012-05-15T14:15:27.033
> 
> 标签：java, eclipse, class, equals

我目前面临以下问题：

我有一个特定的类，其中 equals() - 方法被覆盖。但是我不确定它是否曾经被使用过（在我或我的一个同事项目中）。有没有办法找出来？当我搜索引用时，它只是给了我对 Object equals() - 方法的所有引用（相当多）。肯定有比扫描所有这些更简单的方法......

有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T14:18:48.420

您要求 Eclipse 解决一项不可能完成的任务。

要确定是否调用了特定的覆盖方法不是*静态可判定*的，这就是 Eclipse 过度近似响应的原因。

假设你有一些领域`Object o`并且你在某个时候做`o.equals(...)`。要确定是否`o`可以引用一个`YourClass`对象，您需要确定`o`每个可能的执行路径的运行时类型，这根本无法静态完成。

不可能的原因与编译器拒绝以下代码的原因非常相似：

```
Object o = "hello";
System.out.println(o.length()); 
```

您可以做的最好的事情可能是通过设置断点或通过从 equals 方法中抛出例如 UnsupportedOperationException 来调试您的程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-13T11:05:01.867

似乎java在这方面被打破了。因此，您需要努力做到这一点，并希望抓住所有事件。

*   创建班级的副本
*   删除旧类
*   通过一一重命名来修复所有编译器错误。
*   查找类用作地图键的情况
*   寻找类的集合（ indexOf(), contains() ）
*   查找对类的 equals() 或 hashCode() 的调用
*   希望你没有错过什么

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:18:17.250

我想不出一种纯粹通过静态分析可靠地做到这一点的方法（我怀疑是否存在）。

一种*可能*有用的实用方法是在方法的第一行设置断点`equals()`，然后在 Eclipse 调试器中启动程序。每当调用该方法时，Eclipse 都会中断调试器。此时，您将能够检查调用堆栈以查看谁调用了该方法。

要有效地做到这一点，您必须了解哪些代码路径可以调用该方法。如果您无法触发该方法，这并不能证明没有人使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:20:38.390

在 Eclipse -> Package explorer 或 Outline 视图中选择方法名称，然后单击 F4。或者，您可以选择方法 -> 右键单击​​ -> 打开调用层次结构
这将显示在您的工作区中调用此方法的所有成员。希望这可以帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T14:27:24.907

如何修改覆盖的等于：

```
log.debug // Whatever you want
return this == obj; 
```

哪个给你经典的 Object equals ？或者如果你扩展了某个类，也许是 super.equals？

# silverlight - 如何在编程 XAML 定义中定义按钮单击处理程序

> ID：10602697
> 
> 赞同：3
> 
> 时间：2012-05-15T14:15:28.170
> 
> 标签：silverlight, button, silverlight-4.0, datagrid

我正在为 Silverlight 4 中的用户控件中的数据网格动态创建列，该控件工作正常。数据网格的第一列是一个按钮，因此我使用以下代码为 DataGrid 添加 DataTemplate：

```
DataGridTemplateColumn templateColumn = new DataGridTemplateColumn();
templateColumn.Header = "Search";
StringBuilder sb = new StringBuilder(); 
sb.Append("<DataTemplate ");
sb.Append("xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' ");
sb.Append("xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'>");
sb.Append("<Button Name='searchBtn' Width='25' Height='20' Click='performFastSearch' >");
sb.Append("<Image Source='http://localhost/SiteAssets/img/Homepage/ribbon_top_right.png'  Stretch='None' />");
sb.Append("</Button>");
sb.Append("</DataTemplate>");

templateColumn.CellTemplate = (DataTemplate)XamlReader.Load(sb.ToString()); 
```

如果我将 Click="performFastSearch" 部分留在外面，但在添加它时会因“crossappdomainmarshaledexception”而中断，则该代码有效。

这是我应该尝试添加点击处理程序方法还是应该使用其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:37:46.617

您正在使用的 XAML 语法（在其中为 Click 事件指定命名方法）仅适用于在用户控件中定义 XAML 的情况，在这种情况下，Visual Studio 生成的代码将自动连接您的单击处理程序。当您在代码中创建 XAML 时，您必须在生成此按钮时找到它并自行连接单击处理程序。

呈现每一行时，处理加载事件以找到 Button 然后连线。这篇[博文可能会对您有所帮助](http://live.mscommunity.net/blogs/damirdobric/archive/2011/02/03/how-to-register-button-clickhandler-of-button-in-datagrid-in-templatecontrol.aspx)：

```
 void grid_LoadingRow(object sender, DataGridRowEventArgs e) 
    { 
        var btnCol =  
        m_DataGrid.Columns.FirstOrDefault(
                c => c.GetValue(FrameworkElement.NameProperty) as string == "m_BtnColumn");

        FrameworkElement el = btnCol.GetCellContent(e.Row);

        Button btn = el as Button;

        if (btn != null) 
        {    
            btn.Click -= new RoutedEventHandler(btn_Click); 
            btn.Click += new RoutedEventHandler(btn_Click); 
        } 
    }

    void btn_Click(object sender, RoutedEventArgs e) 
    { 

    } 
```

# android - 带有远程服务器的 Android 应用内：如何获取所有购买的经过验证的列表

> ID：10602717
> 
> 赞同：0
> 
> 时间：2012-05-15T14:16:31.183
> 
> 标签：android, in-app-purchase, in-app-billing

我正在实现对存储在我的服务器上的文件的应用内购买。

这个想法是将经过验证的列表（如**RESTORE_TRANSACTIONS**返回）发送到服务器，并返回用户购买的可用项目。但是文档说：

**“注意：仅当您的应用程序首次安装在设备上或您的应用程序已从设备中删除并重新安装时，您才应使用 RESTORE_TRANSACTIONS 请求类型。”**

所以我猜测**RESTORE_TRANSACTIONS**的不断使用是一个坏主意。

但是不再有返回完整列表的请求。像在地下城示例中那样将购买保存在数据库中并不安全。

是否存在另一种获取经过验证的购买清单的方法，或者**RESTORE_TRANSACTIONS**的使用是否合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:51:59.903

如果您过于频繁地使用 RESTORE_TRANSACTIONS，则该帐户可能会被暂时阻止。所以只能在第一次运行或定期使用它。如果您想在每次应用程序运行时使用服务器检查项目，请使用非托管项目并让您的服务器跟踪每个用户的项目。然后，您可以根据需要随时给家里打电话。

至于在本地数据库中购买不安全，这只是根设备上的问题，您可以将数据库混淆为添加/更改项目并不简单。

# c# - 如何检查文件是否在 C# 中的任何文件夹及其所有子文件夹中？

> ID：10602718
> 
> 赞同：0
> 
> 时间：2012-05-15T14:16:33.563
> 
> 标签：c#, file, subdirectory

我有这个代码

```
foreach (syncspec.Attribute attr in attributes)
{
      string fullPath = location + "\\" + attr.link;
      if (File.Exists(fullPath))
} 
```

我正在检查一个已知位置，下面列出了一个示例完整路径

```
// fullPath = "C:\\Users\\matt\\Desktop\\shard\\all/file30005" 
```

我想要做的是查看所有文件夹和所有文件夹中的任何子文件夹......关于如何实现这一点的任何想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:20:24.920

```
System.IO.Directory.GetFiles(location, attr.link, SearchOption.AllDirectories); 
```

通过 MSDN 阅读有关 GetFiles 的更多信息：http: [//msdn.microsoft.com/en-us/library/ms143316](http://msdn.microsoft.com/en-us/library/ms143316)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:22:47.383

你的朋友是

```
DirectoryInfo.GetFiles("filename", SearchOption.AllDirectories); 
```

如本例所示：

```
DirectoryInfo info = new DirectoryInfo(location);
FileInfo[] results = info.GetFiles(attr.Link, SearchOption.AllDirectories);
foreach(FileInfo fi in results)
    .... 
```

请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms143327)以供参考

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:25:34.013

您可以按照其他人的建议使用 GetFiles(..) 或使用这样的递归方法（顺便说一句，完全有效的解决方案）：

```
bool FileExists(string path, string filename)
{
  string fullPath = Path.Combine(path, filename);
  return File.Exists(fullPath) && Directory.GetDirectories(path).All(x => FileExists(x, filename));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:28:41.470

首先不要在路径上使用简单的连接，而是使用[Path.Combine](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)：

```
string parentDirPath = Path.Combine(location , attr.link); 
```

其次，对于遍历所有子目录，可以使用

[Directory.EnumerateDirectories](http://msdn.microsoft.com/en-us/library/dd383304.aspx)

例子：

```
foreach (var dir in  Directory.EnumerateDirectories(parentDirPath))
{
     //do something here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T14:32:56.853

这个解决方案有点重，但我使用它的一个变体，因为它允许您在搜索并继续时捕获任何异常。 `GetFiles()`如果遇到没有权限遍历的目录，将完全出错。

检查这个：[安全文件枚举](http://tom-shelton.net/index.php/2010/01/02/using-extension-methods-and-the-win32-api-to-efficiently-enumerate-the-file-system/)

# java - 模仿浏览器行为

> ID：10602721
> 
> 赞同：0
> 
> 时间：2012-05-15T14:16:39.450
> 
> 标签：java, html, selenium, browser, dom-events

我正在获取网页的 htmldump。但我没有得到运行时由 Javascript 加载的内容。

模仿浏览器行为并提取 htmldump 的最佳方法是什么，这正是我们在浏览器上看到的。

我们正在使用 Java，人们之前使用过 selenium，但它似乎存在速度问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:28:51.217

如果您使用的是 .Net，则可以使用[WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)控件。

根据 MSDN：

> 使用户能够在表单内导航网页。

您可以通过编程方式控制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:51:22.590

你可以试试[HtmlUnit](http://htmlunit.sourceforge.net/)。它是一个支持 javascript 的无头浏览器，所以它应该能够做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T22:46:16.530

如果您乐于使用 firefox 或 chrome，Selenium 会很快。还有一种方法可以无头运行 Selenium（不是我做过），它也可以提供足够快速的解决方案。否则，有一些帖子和博客（[例如](http://saucelabs.com/blog/index.php/2011/02/speed-up-your-selenium-tests/)）可以解决提高 Seleniums 性能速度的问题。另一种选择是查看 WatiN，尽管这也在 .Net 中，就像 WebBrowser 的 seth flowers 建议一样。

# jquery - ASP.NET MVC 3 不生成验证数据属性

> ID：10602723
> 
> 赞同：1
> 
> 时间：2012-05-15T14:16:44.767
> 
> 标签：jquery, asp.net-mvc-3, jquery-plugins

我有一个巨大的表单，我根据视图（部分）和视图模型进行拆分。

主窗体视图包含对以下内容的调用：

```
@Html.Partial("Educations", @Model) 
```

部分视图通过循环 @Model 呈现自身，为每条记录生成一个 Div 行（TextBox 不是 TextBoxFor 或任何其他 Html 助手）。

发生的情况是，没有为局部视图生成验证数据属性。

不过需要注意的是，一旦我动态加载主表单视图，我会执行以下操作：

```
(function ($) {

$.fn.updateValidation = function () {
    var form = this.find("form")
        .removeData("validator")
        .removeData("unobtrusiveValidation");

    $.validator.unobtrusive.parse(form);

    return this;
}; 
```

})(jQuery);

此外，局部视图包含一个添加更多行的按钮。当我添加额外的行时，那些新添加的行正在被验证，因为我手动注入数据验证。

现在的问题是，加载表单时呈现的行没有任何数据验证属性，因此即使调用上述插件重新初始化不显眼的验证，也无济于事。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:48:16.530

尝试在局部视图中添加表单上下文：

```
@model MyViewModel
@{
    ViewContext.FormContext = new FormContext();               
}

...
@Html.EditorFor(x => x.Foo) 
```

`Html.TextBoxFor`如果没有在 a 中使用HTML 助手，`Html.BeginForm`它们将不会发出 HTML5 data-* 属性。`FormContext`如果有 a在范围内，它们只会发出这些属性。

# asp-classic - 重用同一个变量

> ID：10602725
> 
> 赞同：1
> 
> 时间：2012-05-15T14:16:47.760
> 
> 标签：asp-classic, vbscript

有没有一种方法可以设置要在相同的**fs fo**和**x**中重用的 dim 变量。还是每次在页面上运行代码时都必须创建一个唯一变量？

```
<%
itemnum = 1
dim fs,fo,x

fs=Server.CreateObject("Scripting.FileSystemObject")
set fo=fs.GetFolder(Server.MapPath("/images"))

...
%> 
```

下一节...

```
<%
itemnum = 1
dim fs,fo,x

fs=Server.CreateObject("Scripting.FileSystemObject")
set fo=fs.GetFolder(Server.MapPath("/videos"))

...
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:42:28.550

您只需要在页面顶部调暗一次，然后就可以根据需要多次重复使用它（只要您的代码具有相同的范围，就无需重新调暗/重新创建 fso 对象（页面/ 一组包含)) - 即使你进出 asp 块。

示例（全部在一个 asp 文件中）：

```
<%
'#### Declare objects and initialise FSO (only has to be done once per request)
dim fs,fo,x 
set fs = Server.CreateObject("Scripting.FileSystemObject") 
%>
bla bla bla
<%
set fo=fs.GetFolder(Server.MapPath("/images")) 
'Do something with the images folder
%>
bla bla bla
<%
set fo=fs.GetFolder(Server.MapPath("/videos")) 
'Do something with the videos folder
%>
bla bla bla
<%
'#### Cleanup
set fo = Nothing
set fs = Nothing
%> 
```

# c++ - Xcode/LLVM catch 子句与派生类型不匹配

> ID：10602726
> 
> 赞同：5
> 
> 时间：2012-05-15T14:16:56.690
> 
> 标签：c++, xcode, exception-handling, llvm

在 gcc 4.2 中，这有效：

```
#include <stdexcept>
#include <iostream>

int main() {
    try {
        throw std::runtime_error("abc");
    } catch (const std::exception& ex) {
        std::cout << ex.what();
    }
} 
```

在 Xcode 4.3.2（带有 LLVM 3.1 的 iOS，-std=c++11）中，这失败了`terminate called throwing an exception`，永远不会到达该`NSLog(…)`行：

```
#include <stdexcept>

int main() {
    try {
        throw std::runtime_error("abc");
    } catch (const std::exception& ex) {
        NSLog(@"%s", ex.what());
    }

    return UIApplicationMain(argc, argv, nil, nil);
} 
```

但这有效：

```
#include <stdexcept>

int main() {
    try {
        throw std::runtime_error("abc");
    } catch (const std::runtime_error& ex) {
        NSLog(@"%s", ex.what());
    }

    return UIApplicationMain(argc, argv, nil, nil);
} 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:24:17.107

gcc 是正确的：

> 15.3p3*处理程序*是匹配异常对象的类型`E`，如果
> 
> *   ... 或者
> *   处理*程序*的类型为*cv* `T`或*cv* `T&`并且`T`是 的明确公共基类`E`，或
> *   ...

这听起来像是一个 xcode 错误（而且是一个令人惊讶的基本错误！）

# c - C的printf中的数字分组

> ID：10602729
> 
> 赞同：6
> 
> 时间：2012-05-15T14:16:59.637
> 
> 标签：c, printf, grouping, digit

我希望输出带有千位分隔符（逗号或空格）的大数——与[如何在 3 位分组中显示数字](https://stackoverflow.com/questions/1872094/how-to-display-numeric-in-3-digit-grouping)但`printf`在 C 中使用（GNU，99）中的基本相同。

如果 printf 本身不支持数字分组，我该如何使用类似的东西来实现这一点`printf("%s", group_digits(number))`？

它必须支持负整数，最好也支持浮点数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T14:23:26.783

如果您可以使用[POSIX printf](http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html)，请尝试

```
#include <locale.h>
setlocale(LC_ALL, ""); /* use user selected locale */
printf("%'d", 1000000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-08T10:59:48.770

这是一种紧凑的方法：

```
// format 1234567.89 -> 1 234 567.89
extern char *strmoney(double value){
    static char result[64];
    char *result_p = result;
    char separator = ' ';
    size_t tail;

    snprintf(result, sizeof(result), "%.2f", value);

    while(*result_p != 0 && *result_p != '.')
        result_p++;

    tail = result + sizeof(result) - result_p;

    while(result_p - result > 3){
        result_p -= 3;
        memmove(result_p + 1, result_p, tail);
        *result_p = separator;
        tail += 4;
    }

    return result;
} 
```

例如，调用`strmoney(1234567891.4568)`返回字符串`"1 234 567 891.46"`。`separator`通过更改函数顶部的变量，您可以轻松地将空格替换为另一个分隔符（例如逗号） 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-28T11:42:08.497

一种格式化千位分隔符的安全方法，支持负数：

因为VS < 2015没有实现snprintf，所以需要这样做

```
#if defined(_WIN32)
    #define snprintf(buf,len, format,...) _snprintf_s(buf, len,len, format, __VA_ARGS__)
#endif 
```

进而

```
char* format_commas(int n, char *out)
{
    int c;
    char buf[100];
    char *p;
    char* q = out; // Backup pointer for return...

    if (n < 0)
    {
        *out++ = '-';
        n = abs(n);
    }

    snprintf(buf, 100, "%d", n);
    c = 2 - strlen(buf) % 3;

    for (p = buf; *p != 0; p++) {
        *out++ = *p;
        if (c == 1) {
            *out++ = '\'';
        }
        c = (c + 1) % 3;
    }
    *--out = 0;

    return q;
} 
```

示例用法：

```
size_t currentSize = getCurrentRSS();
size_t peakSize = getPeakRSS();

printf("Current size: %d\n", currentSize);
printf("Peak size: %d\n\n\n", peakSize);

char* szcurrentSize = (char*)malloc(100 * sizeof(char));
char* szpeakSize = (char*)malloc(100 * sizeof(char));

printf("Current size (f): %s\n", format_commas((int)currentSize, szcurrentSize));
printf("Peak size (f): %s\n", format_commas((int)currentSize, szpeakSize));

free(szcurrentSize);
free(szpeakSize); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-11T23:02:11.257

我自己的 unsigned int64 版本：

```
char* toString_DigitGrouping( unsigned __int64 val )
{
    static char result[ 128 ];
    _snprintf(result, sizeof(result), "%lld", val);

    size_t i = strlen(result) - 1;
    size_t i2 = i + (i / 3);
    int c = 0;
    result[i2 + 1] = 0;

    for( ; i != 0; i-- )
    {
        result[i2--] = result[i];
        c++;
        if( c % 3 == 0 )
            result[i2--] = '\'';
    } //for

    return result;  
} //toString_DigitGrouping 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-12T16:57:19.480

```
#include <stdio.h>

int main() {
    char str[50];
    int len = 0;   
    scanf("%48[^\n]%n", str, &len);

    int start = len % 3;

    for(int i = 0; i < len; i++) {        
        if(i == start && i != 0) {
            printf(" ");
        } else if((i - start) % 3 == 0 && i != 0) {
            printf(" ");
        }    
        printf("%c", str[i]);
    }   

   return 0;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-12T17:00:55.803

```
#include <stdio.h>

void punt(int n){
    char s[28];
    int i = 27;
    if(n<0){n=-n; putchar('-');} 
    do{
        s[i--] = n%10 + '0';
        if(!(i%4) && n>9)s[i--]=' ';
        n /= 10;
    }while(n);
    puts(&s[++i]);
}

int main(){

    int a;
    scanf("%d",&a);
    punt(a);

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-15T16:37:29.863

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

char *commify(char *numstr){
    char *wk, *wks, *p, *ret=numstr;
    int i;

    wks=wk=strrev(strdup(numstr));
    p = strchr(wk, '.');
    if(p){//include '.' 
        while(wk != p)//skip until '.'
            *numstr++ = *wk++;
        *numstr++=*wk++;
    }
    for(i=1;*wk;++i){
        if(isdigit(*wk)){
            *numstr++=*wk++;
            if(isdigit(*wk) && i % 3 == 0)
                *numstr++ = ',';
        } else {
            break;
        }
    }
    while(*numstr++=*wk++);

    free(wks); 
    return strrev(ret);
}

int main(){
    char buff[64];//To provide a sufficient size after conversion.
    sprintf(buff, "%d", 100);
    printf("%s\n", commify(buff));
    sprintf(buff, "%d", 123456);
    printf("%s\n", commify(buff));
    sprintf(buff, "%.2f", 1234.56f);
    printf("%s\n", commify(buff));
    sprintf(buff, "%d", -123456);
    printf("%s\n", commify(buff));
    sprintf(buff, "%.2lf", -12345678.99);
    printf("%s\n", commify(buff));
    return 0;
} 
```

添加：

```
/*
char *strrev(char *str){
    char c,*front,*back;

    for(front=str,back=str+strlen(str)-1;front < back;front++,back--){
        c=*front;*front=*back;*back=c;
    }
    return(str);
}
*/ 
```

# scala - Scala 按多个字段排序

> ID：10602730
> 
> 赞同：13
> 
> 时间：2012-05-15T14:17:05.280
> 
> 标签：scala

这个问题可能很愚蠢，但是我找不到示例，也无法弄清楚。

我想`Person`按姓氏、名字和中间名的顺序比较两个班级。这是脑死的方法：

```
def compare(that: Person): Int = {
  val last: Int = lastName.compare(that.lastName)
  if (last != 0) last
  else {
    val first: Int = firstName.compare(that.firstName)
    if (first != 0) first
    else middleName.compare(that.middleName)
} 
```

我知道有一些更聪明的方法可以做到这一点（可能使用`Ordering`），但我不能指望它。

托德

一旦我意识到如何在 Ordering 中访问正确的东西，我就明白了这一点。

```
def compare(that: Person): Int = {
  Ordering.Tuple3(Ordering.String, Ordering.String, Ordering.String).compare(
     (lastName, firstName, middleName),
     (that.lastName, that.firstName, that.middleName))
} 
```

我很确定我可以用更少的显式来逃避，但这很有效并且相当紧凑。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-15T14:19:17.720

## 选项 1：排序依据

使用该`sortBy`方法，这可能非常简单：

```
case class Person(first: String, middle: String, last: String)
val personList = List(Person("john", "a", "smith"), Person("steve", "x", "scott"), Person("bill", "w", "smith"))
personList.sortBy{ case Person(f,m,l) => (l,f,m) } 
```

## 选项 2：扩展 Ordered[Person]

通过扩展`Ordered[Person]`，该类将知道如何对自己进行排序，因此我们可以免费获得`sorted`、`min`和之类的东西`max`：

```
case class Person(first: String, middle: String, last: String) extends Ordered[Person] {
  def compare(that: Person): Int =
    (last compare that.last) match {
      case 0 => 
        (first compare that.first) match {
          case 0 => middle compare that.middle
          case c => c
        }
      case c => c
    }
}

val personList = List(Person("john", "a", "smith"), Person("steve", "x", "scott"), Person("bill", "w", "smith"))
personList.sorted
personList.min
personList.max 
```

## 选项 3：隐式排序

如果您使用隐含的`Ordering`, ，那么您会得到`sorted`,`min`等，而不会将该特定顺序绑定到您的原始类。这种解耦可能很方便，也可能很烦人，具体取决于您的具体情况。

```
case class Person(first: String, middle: String, last: String)

implicit val ord = new Ordering[Person] { 
  def compare(self: Person, that: Person): Int =
    (self.last compare that.last) match {
      case 0 => 
        (self.first compare that.first) match {
          case 0 => self.middle compare that.middle
          case c => c
        }
      case c => c
    }
}

val personList = List(Person("john", "a", "smith"), Person("steve", "x", "scott"), Person("bill", "w", "smith"))
personList.sorted
personList.min
personList.max 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-07-29T14:06:49.800

如果您使用的是 scala 2.13+，则可以使用`Ordering.by`and `orElseBy`。这是相当明确的。

```
case class Person(first: String, middle: String, last: String)

implicit val ordering: Ordering[Person] = Ordering.by[Person, String](_.first)
   .orElseBy(_.middle)
   .orElseBy(_.last)

val list = List(Person("john", "a", "smith"), Person("steve", "x", "scott"), Person("bill", "w", "smith"))

list.sorted 
```

# javascript - x-webkit-speech：onwebkitspeechchange 没有重置值

> ID：10602736
> 
> 赞同：1
> 
> 时间：2012-05-15T14:17:23.720
> 
> 标签：javascript, html, input, webkit

我正在尝试使用 onwebkitspeechchange 事件重置我的输入值，以便仅保留语音文本的值。

`onclick`在小麦克风上删除了文字

单击对话框后弹出并将值重置为初始文本

代码：

```
<input name="s" type="text" x-webkit-speech="" id="s" value="What are you looking for?" onfocus="if (this.value == 'What are you looking for?') {this.value = '';}" onwebkitspeechchange="if (this.value == 'What are you looking for?') {this.value = '';}" onblur="if (this.value == '') {this.value = 'What are you looking for?';}"> 
```

我知道 onblur 事件正在这样做，但我怎样才能为 onwebkitspeechchange 例外，所以只有语音区域？

不能使用占位符属性（不适用于 ie 9）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:34:01.360

我遇到了同样的问题，并使用了一个简单的 JS 函数。这是我的解决方案：

```
<input x-webkit-speech="x-webkit-speech" onwebkitspeechchange="webkitSpeechChange(this);" name="myinput" value="<?php echo $this->__('Search entire store here...') ?>" class="search-query" />
<script type="text/javascript">
    //<![CDATA[
    function webkitSpeechChange(input) {
        input.value = input.value.replace('<?php echo $this->__('Search entire store here...') ?>', '');
    }
    //]]>
</script> 
```

where`<?php echo $this->__('Search entire store here...') ?>`应该是您的默认值。

希望这可以帮助 ：）

# asp.net-mvc-3 - ActionResult 参数空控件

> ID：10602741
> 
> 赞同：0
> 
> 时间：2012-05-15T14:17:31.713
> 
> 标签：asp.net-mvc-3, razor, null, actionresult, url-parameters

我如何控制 ActionResult 空参数？我正在尝试对 id 可空但不起作用。

控制器：

```
public ActionResult Languages(int id)
{
    if(id==null)
    {
      id = 0;
    }
    var query = from n in se.Languages
                orderby n.Language ascending
                select n;
    return View(query.Skip(id * 10).Take(10));
} 
```

全球.ASAX：

```
 routes.MapRoute(
        null,
        "{controller}/{action}", // URL with parameters
        new { controller = "Home", action = "Languages" } // Parameter defaults
    );

    routes.MapRoute(
        null,
        "{controller}/{action}/page/{id}", // URL with parameters
        new { controller = "Home", action = "Languages", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:19:48.467

一个`int`不可为空的尝试

```
public ActionResult Languages(int? id)

if(!id.HasValue)
    //... 
```

或者有

```
public ActionResult Languages(int id = 0) 
```

或者您可以在路由中提供默认值

```
routes.MapRoute(
    null,
    "{controller}/{action}/page/{id}", // URL with parameters
    new { controller = "Home", action = "Languages", id = 0 } // Parameter defaults
); 
```

# javascript - 用句点替换字符串不起作用

> ID：10602743
> 
> 赞同：0
> 
> 时间：2012-05-15T14:17:43.053
> 
> 标签：javascript

我正在尝试混淆网页上的电子邮件地址。我有一个将 @ 转换为*xy*并将句点转换为*yy*的正则表达式。那行得通。我有一个 js 在提交页面以将它们转换回来时执行，但这不起作用。该脚本是：

```
function undo(){
    var oldfield = document.getElementById('hchtest').value;
    var newfield = oldfield.replace("_xy_", "@");
    var nu2field = newfield.replace("_yy_", "\.");

    document.getElementById('hchtst2').value = nu2field;
} 
```

无效的语句是 var nu2field = newfield.replace( *yy* , ".");

我已经尝试了我能想到的所有组合（例如，没有转义字符，作为正则表达式等），但没有任何乐趣。

我也想知道它是否可以通过消除多步骤替换来使它变得优雅。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:20:42.787

您不需要`.`在字符串中转义。`.replace(/_yy_/g,'.')`应该可以正常工作。

此外，您可以链接替换：

```
document.getElementById('hchtst2').value =
    document.getElementById('hchtest').value.replace(/_xy_/g,'@').replace(/_yy_/g,'.'); 
```

但是如果原始字符串包含`_xy_`or会发生什么`_yy_`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:19:29.460

你不想要这个吗？为什么会有额外的下划线？

```
var newfield = oldfield.replace("xy", "@");
var nu2field = newfield.replace("yy", "\."); 
```

无论如何，这是另一个解决方案：

```
var newfield = oldfield.split("xy").join("@");
var nu2field = newfield.replace("yy").join("."); 
```

还有一个单行：

```
var newfield = oldfield.split("xy").join("@").split("yy").join("."); 
```

# javascript - 在公共存储库中隐藏密钥

> ID：10602747
> 
> 赞同：5
> 
> 时间：2012-05-15T14:17:53.833
> 
> 标签：javascript, security, api, encryption

我正在开发一个开源 javascript 应用程序，我正在尝试与第三方 API（特别是 github）进行交互。我试图只保留我的整个应用程序客户端，所以我真的没有服务器可以回退或存储隐藏文件。作为 OAuth 过程的一部分，我需要提供为我的 api 密钥提供的密钥。我不应该发布或共享此密钥。

我想出了以下解决方案：

1.  使用三重 DES 和密码短语加密密钥。
2.  将加密版本放在我的存储库中的某个地方。
3.  当我需要通过 Oauth 进行身份验证时，提示输入密码并恢复密钥。
4.  一旦知道，将机密存储在本地存储中以避免将来出现提示。

我本质上是在存储密钥的转换版本。我想这对我来说是我必须从用户那里获取密码而不是完整的密钥。它应该比随机字节更容易记住。

这足够安全吗？它不是一个超级关键的应用程序，但我想尽我所能保护我被告知不要分享的东西。有没有比 3DES 更好的方法来以可逆方式加密密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:13:06.783

这个解决方案的问题是应用程序必须包含代码（可能还有密钥）来解密它。最好的解决方案是根本不放入存储库。

大多数应用程序将此类数据存储在版本控制软件忽略的配置文件中。然后包含一个带有假密钥的示例配置文件以及如何重命名文件和获取自己的 api 密钥的说明。

一个很好的例子是[wordpress 的配置文件](http://core.svn.wordpress.org/trunk/wp-config-sample.php)中的“Authentication Unique Keys and Salts”。部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:57:18.993

这听起来足以保守一些秘密。虽然 Triple DES 有点过时了。

我会使用 X 轮 SHA-256 来散列密码，然后使用该散列作为 AES-256 密钥。

# wcf - 使用 WCF 设置 nillable=false

> ID：10602749
> 
> 赞同：1
> 
> 时间：2012-05-15T14:18:01.410
> 
> 标签：wcf, wsdl

是否可以使用 WCF 在 wsdl 中将字符串上的 nillable 的默认值更改为 false？我找不到任何开箱即用的属性或设置，但是是否可以通过自己使用属性来以某种方式扩展 WCF？或者有没有更好的方法？我需要将我的一些字符串属性标记为 nillable=false，但不是全部。

例如：

```
[DataMember]
[Nillable(false)]
public string MyData{ get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T13:27:49.057

您必须编写自己的 WsdlExportExtension 来实现这一点。

这是一个示例：

```
public class WsdlExportBehavior : Attribute, IContractBehavior, IWsdlExportExtension
{
    public void ExportContract(WsdlExporter exporter, WsdlContractConversionContext context)
    { }

    public void ExportEndpoint(WsdlExporter exporter, WsdlEndpointConversionContext context)
    {
        var schemaSet = exporter.GeneratedXmlSchemas;

        foreach (var value in schemaSet.GlobalElements.Values)
        {
            MakeNotNillable(value);
        }

        foreach (var value in schemaSet.GlobalTypes.Values)
        {
            var complexType = value as XmlSchemaComplexType;
            if (complexType != null && complexType.ContentTypeParticle is XmlSchemaSequence)
            {
                var sequence = complexType.ContentTypeParticle as XmlSchemaSequence;
                foreach (var item in sequence.Items)
                {
                    MakeNotNillable(item);
                }
            }
        }
    }

    private static void MakeNotNillable(object item)
    {
        var element = item as XmlSchemaElement;
        if (element != null)
        {
            element.IsNillable = false;
        }
    }

    public void AddBindingParameters(ContractDescription description, ServiceEndpoint endpoint, BindingParameterCollection parameters)
    { }

    public void ApplyClientBehavior(ContractDescription description, ServiceEndpoint endpoint, ClientRuntime client)
    { }

    public void ApplyDispatchBehavior(ContractDescription description, ServiceEndpoint endpoint, DispatchRuntime dispatch)
    { }

    public void Validate(ContractDescription description, ServiceEndpoint endpoint)
    { }
} 
```

并将 [WsdlExportBehavior] 应用于您的服务类。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:53:00.473

```
[DataMember(IsRequired=True)] 
```

我相信这应该做吗？

# javascript - 在 GWT JSNI 中调用 JCrop

> ID：10602751
> 
> 赞同：1
> 
> 时间：2012-05-15T14:18:06.423
> 
> 标签：javascript, gwt, jsni, jcrop

我正在尝试进行与此 JavaScript 片段等效的 JSNI 调用：

```
jQuery(function($) {
    $('#target').Jcrop();
}); 
```

我相信我已经正确地导入了库，但我似乎无法正确地从 JSNI 调用这个函数。使用以下方法时：

```
public static final native void initializeJCrop() /*-{
    $wnd.jQuery(function($) {
        $('#target').Jcrop();
    });
}-*/; 
```

抛出以下异常：

> 引起：com.google.gwt.core.client.JavaScriptException: (TypeError): $("#target").Jcrop 不是函数

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-15T14:35:57.210

使用 JSNI 调用外部函数的语法与简单的 JavaScript 有点不同。

您必须提供完整的包/类参考以及被调用函数的参数类型/类（由于您的没有任何参数，您不必担心）尝试更改调用以包含JCrop 所在的*包*和*类*被定义为。假设定义 JCrop 的类的位置是“api.jcrop”

那么你的电话必须是

```
 @api.jcrop::JCrop()() 
```

而不是 JCrop()

当然，包名称是假设的，您必须检查包含定义的类的正确位置。

符号@ 是必需的。jcrop 是包含定义的类，而 JCrop() 是函数本身。

JCrop 之后的第一个括号表示函数的参数类型，而第二个括号提供传递参数的值。正如我所说，在你的情况下两者都是空的。

如果您有兴趣，可以[在此处阅读有关参数的更多信息](http://courses.coreservlets.com/Course-Materials/pdf/ajax/GWT-JSNI.pdf)

希望这能解决你的问题

# java - java，将非本地文件放在一个zip中

> ID：10602753
> 
> 赞同：1
> 
> 时间：2012-05-15T14:18:10.557
> 
> 标签：java, file, zip

```
byte[] buf = new byte[1024];//time to make zip file
    String zipName="name.zip";
    ZipOutputStream out = new ZipOutputStream(new FileOutputStream(zipName));

    for(int i=0; i<copy.length; i++){//put all pdfs in the zip
        FileInputStream zipFile = new FileInputStream(copy[i]);
        out.putNextEntry(new ZipEntry(copy[i]));
        int len;
        while((len=zipFile.read(buf))>0){
            out.write(buf, 0, len);             
        }
        out.closeEntry();
        zipFile.close();
    }   
out.close(); 
```

copy 是一个字符串数组，其中包含我想要的每个文件的文件路径（例如 C:\files\test.pdf）。它可以毫无例外地编译和运行，并创建 zip 文件夹，但所述 zip 文件夹中没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:23:50.250

修复它，如果其他人需要它，发布答案。

```
out.putNextEntry(new ZipEntry(files[i].getName())); 
```

files 是一个文件数组（我用来创建副本）。

# codeigniter - file_put_contents 给我一个特定的错误

> ID：10602771
> 
> 赞同：0
> 
> 时间：2012-05-15T14:18:55.517
> 
> 标签：codeigniter, download, gd, gd2, imagelibrary

我正在使用 CodeIgniter 开发一个项目。当我尝试从远程服务器下载图像时，出现以下错误：

错误：

```
Message: file_put_contents(): supplied resource is not a valid stream resource 
```

导致错误的代码：

```
 $newImg = resizeImageFrontDimensions($uploadData, UPLOAD_DEFAULT_IMGTHUMB50, UPLOAD_DEFAULT_IMGTHUMB50);

            $imageWhiteFilled = addImageWhiteSpaces(UPLOAD_DEFAULT_IMGTHUMB50, $fileType, DIR_SCREENS . $newImg);
            file_put_contents(DIR_SCREENS, $imageWhiteFilled); 
```

在 addImageWhiteSpaces 中：

```
function addImageWhiteSpaces($imageSize, $fileType, $fileName)
{   
    switch($fileType)
    {
        case DEFAULT_IMAGE_FILETYPE_PNG:
            $image1 = imagecreatefrompng($fileName);
            break;
        case DEFAULT_IMAGE_FILETYPE_JPG:
            $image1 = imagecreatefromjpeg($fileName);
            break;
        case DEFAULT_IMAGE_FILETYPE_JPEG:
            $image1 = imagecreatefromjpeg($fileName);
            break;
        case DEFAULT_IMAGE_FILETYPE_GIF:
            $image1 = imagecreatefromgif($fileName);
            break;      
    }

    $image1_x       = imagesx($image1);
    $image1_y       = imagesy($image1);

    if($image1_x > 500 && $image1_y > 500)
        return $fileName;
    else 
    {
        switch ($imageSize) 
        {
            case  UPLOAD_DEFAULT_IMGTHUMB50: 
                $image_bg = imagecreatefrompng(PATH_MEDIA_IMG . 'white_bg_50.png');
                break;
            case  UPLOAD_DEFAULT_IMGTHUMB74:
                $image_bg = imagecreatefrompng(PATH_MEDIA_IMG . 'white_bg_74.png');
                break;
            case UPLOAD_DEFAULT_IMGTHUMB114:
                $image_bg = imagecreatefrompng(PATH_MEDIA_IMG . 'white_bg_114.png');
                break;
            case UPLOAD_DEFAULT_IMGTHUMB300:
                $image_bg = imagecreatefrompng(PATH_MEDIA_IMG . 'white_bg_300.png');
                break;
            case UPLOAD_DEFAULT_IMGTHUMB500:
                $image_bg = imagecreatefrompng(PATH_MEDIA_IMG . 'white_bg_500.png');
                break;
        }

        $image_bg_x     = imagesx($image_bg);
        $image_bg_y     = imagesy($image_bg);

        $imageStart_x   = 0;
        $imageStart_y   = 0;

        if($image_bg_y > $image1_y)
            $imageStart_y   = ($image_bg_y - $image1_y) / 2;

        if($image_bg_x > $image1_x)
            $imageStart_x   = ($image_bg_x - $image1_x) / 2;

        imagecopy($image_bg, $image1, $imageStart_x, $imageStart_y, 0, 0, $image1_x, $image1_y);

        // Output the image.
//      header("Content-type: image/png");
//      imagejpeg($image_bg);
        return $image_bg;
    } 
```

虽然我收到此错误，但正在下载图像。但是因为它给出了上面的错误，我下载了图像并且不能继续剩下的代码。任何可能的解决方案或理由对我来说都是一个保险库。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:23:31.717

既然您使用的是codeigniter，那么这个怎么样？

[http://codeigniter.com/user_guide/libraries/file_uploading.html](http://codeigniter.com/user_guide/libraries/file_uploading.html)

[http://codeigniter.com/user_guide/libraries/image_lib.html](http://codeigniter.com/user_guide/libraries/image_lib.html)

为什么你要硬编码你正在使用的框架已经提供的东西？

# c# - 书签适用于 IE 和 FireFox，不适用于 Chrome 或 Safari

> ID：10602779
> 
> 赞同：1
> 
> 时间：2012-05-15T14:19:23.943
> 
> 标签：c#, javascript, html, function, bookmarks

抱歉，这似乎是一个新手问题，但这是在我正在开发的网站上，并且对 javascript 不太熟悉。这个功能应该允许我为页面添加书签，但它只适用于 IE 和 FF，不适用于 Chrome 或 Safari。

```
function bookmark_us(){
var titleElement = document.getElementsByTagName('title')[0]
if (window.sidebar) // firefox
    window.sidebar.addPanel(document.title, window.location.href, "");
else if(window.opera && window.print){ // opera
    var elem = document.createElement('a');
    elem.setAttribute('href',window.location.href);
    elem.setAttribute('title',document.title);
    elem.setAttribute('rel','sidebar');
    elem.click();
}
else if(document.all)// ie
    window.external.AddFavorite(location.href, document.title);
} 
```

这是调用该函数的图像：

```
 <div class="bookmark">
             <a href="javascript:bookmark_us();" onclick=""><img src="images/bookmark_button.png" alt="" /></a>
        </div> 
```

如果我缺少任何其他相关代码来帮助解决这个问题，请告诉我，我会立即发布。谢谢大家！

# git - Git是否可以检索仅存在于某个分支中的标签列表？

> ID：10602780
> 
> 赞同：8
> 
> 时间：2012-05-15T14:19:24.130
> 
> 标签：git, tags, branch

我想知道在 Git 中是否可以检索标签列表（很像`git tag`命令的结果），但该列表应该仅限于某个分支。

如果这是可能的，任何人都可以解释这是如何完成的吗？也许有一些模式匹配的魔法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T14:48:04.580

我认为这会做你想要的：

```
 git log --pretty='%H' <branch> |
   xargs -n1 git describe --tags --exact-match 2>/dev/null 
```

这用于`git log`获取分支中的提交列表，然后将它们传递`git describe`给查看它们是否对应于标签。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-07T12:02:09.083

`--merged`使用新的 git 标签选项（在 git 2.7+，2015 年第四季度）可以使用另一种方法

```
git tag --merged <abranchname> 
```

请参阅[Karthik Nayak (](https://github.com/KarthikNayak) [)的](https://github.com/KarthikNayak)[提交 5242860](https://github.com/git/git/commit/5242860f548d1869ac2779726ad496f0ae8ab5ca)，...（2015 年 9 月 10 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 8a54523](https://github.com/git/git/commit/8a54523f0f70134327e7b2a625b1777c796b07d5))^(中，2015 年 10 月 5 日）)[`KarthikNayak`](https://github.com/KarthikNayak)
^([`gitster`](https://github.com/gitster))

tag.c：实现“--merged”和“--no-merged”选项

> 使用 ' `ref-filter`' API 将 ' `--merged`' 和 ' `--no-merged`' 选项实现到 ' `tag.c`' 中。
> 
> *   ' `--merged`' 选项允许用户仅列出合并到命名提交中的标签。
> *   ' `--no-merged`' 选项允许用户仅列出未合并到命名提交中的标签。
> 
> 如果没有提供对象，则假定`HEAD`为对象。

# javascript - 我自己的函数像 onclick 一样触发

> ID：10602781
> 
> 赞同：0
> 
> 时间：2012-05-15T14:19:28.133
> 
> 标签：javascript

我认为标题不是很适应，但我不知道该放什么。如果需要，请对其进行编辑。

我想要的很奇怪，但请不要投反对票。我想创建自己的函数，该函数将被这样调用：`<input type="text" onMyFunction="alert('hi');" />`

如果不可能，请告诉它，我将其作为最佳答案进行检查。

PS：如果可行，该函数将被永久调用，并且在该函数中我会`if`在开头放置一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:31:42.577

您可以使用纯 JavaScript 来做到这一点，但 jQuery 更简单：

```
<input id="someId" type="text" />

$('#someId').bind('myCustomEvent', function(event) {
  alert('hi');
}); 
```

并在代码的其他地方触发它：

```
$("#someId").trigger('myCustomEvent'); 
```

更多信息在这里：[http ://dailyjs.com/2009/11/14/jquery-custom-events/](http://dailyjs.com/2009/11/14/jquery-custom-events/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:31:29.380

如果我理解这一点，您希望在调用您的 javascript 函数时发生一些事情。为什么不把你想要发生的事情放在你的实际功能中呢？

```
<script type="javascript/text">
function MyFunction(){
// some code
alert('hi');
</script> 
```

我不确定您所说的永久调用是什么意思，但在上面的代码中，每次调用您的函数时都会发生一个显示 hi 的警报，类似于您在问题中描述的内容，但使用不同的实现。

至于实际使用 onMyFunction="alert('hi')"，我不相信这是可能的，因为 onClick、onload 和 onmouseover 事件是内置的。所以除非你编写正确实现 onMyFunction 的额外代码，否则我不会没有办法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:37:46.150

您遇到的问题是浏览器没有意识到它是其中的一个功能。它是一个字符串，使它成为函数的唯一方法是将其分配为函数。

一种方法是在文档准备好或加载时，您在文档中查询具有该属性的元素并重新分配它。

**HTML**

```
<input id="foo1" type="text" onMyFunction="alert(this.value);" value="1"/>
<input id="foo2" type="text" onMyFunction="alert(this.value);" value="2"/>​ 
```

**JavaScript**

```
var winLoad = window.onload;
window.onload = function(){
    var i, 
        elem,
        fncStr,    
        elems = document.querySelectorAll("[onMyFunction]");

    if (winLoad) {
        winLoad();
    }

    for (i=0;i<elems.length;i++) {
        elem = elems[i];
        fncStr = elem.getAttribute("onMyFunction");
        elem.onMyFunction = new Function(fncStr);        
    }

    var tb1 = document.getElementById("foo1");
    tb1.onMyFunction();​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
} 
```

[此处运行的示例](http://jsfiddle.net/jgpV8/)

此代码使用并非所有浏览器都支持的[querySelectorAll 。](https://developer.mozilla.org/en/DOM/document.querySelectorAll)

# tabs - 如何在选项卡中使用 ViewPagers？

> ID：10602787
> 
> 赞同：0
> 
> 时间：2012-05-15T14:19:37.797
> 
> 标签：tabs, android-fragments, android-viewpager, horizontal-scrolling

![在此处输入图像描述](../Images/791aeb61b9cc8d129086c001781683a2.png)

我正在尝试为每个选项卡添加一个 ViewPager 以显示图像。对于启动的第一个选项卡，一切都很好。在自定义 FragmentStatePagerAdapter 的帮助下获取片段。我在 CreateTabContent 方法中实例化一个新的 ViewPager 对象。

在显示第一个选项卡的内容后，单击选项卡 2 时会出现问题。我在新的 ViewPager 对象上设置了一个新的 FragmentStatePagerAdapter 对象。同样，getCount、getItem、getItemPosition 等所有方法都能正常执行，但对象未附加到 ViewPager。

在检查 hierarchviewer 时，我发现没有创建 NoSaveStateFrameLayout 对象。

谢谢。

注意：我已经实现了 notifyDataSetChanged。

出现问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:00:46.167

我找到了解决方案。我再次仔细检查了hierarchyviewer，发现NoSaveStateFrameLayout 对象应该附加到下一个选项卡的ViewPager 被附加到第一个ViewPager。因此，当使用以下代码单击下一个选项卡时，我在选项卡 1 上分离了 ViewPager：

```
FrameLayout frameLayout  = mTabHost.getTabContentView();
frameLayout.removeViewAt(index); 
```

现在，只有一个 ViewPager 对象存在并且一切正常。

# objective-c - 有界设备和无界设备有什么区别？

> ID：10602790
> 
> 赞同：3
> 
> 时间：2012-05-15T14:19:42.600
> 
> 标签：objective-c, ios, ios5, core-bluetooth, bluetooth-lowenergy

我是 iOS 和 BLE 的新手，如果这个问题非常基本，请多多包涵。

有界设备和无界设备有什么区别？我正在与`CBCentralManager`iOS 中的 BLE 合作，我正在尝试弄清楚如何通过`CBCentralManager`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T19:38:55.603

你不需要做任何不同的应用程序，如果需要，iOS 将处理绑定。

有界连接以某种方式与 iOS 设备“配对”。一旦有界，它们将不会与任何其他设备通信。边界由操作系统 (iOS) 控制。当需要有界连接的设备与 iOS 设备通信时，iOS 设备将显示一个警报视图，询问您是否希望连接到该设备。

无限制的设备不断广播它们的服务，并允许任何 iOS 设备连接到它。该设备不会绑定到特定的 iOS 设备，并且可以在其他时间自由连接到另一个 iOS 设备。这是大多数 BT4.0 传感器的正常/推荐方法。

对于这两种情况，应用程序通常会存储 UUID，以便下次可以建立与同一设备的连接。

注意：尽管不受限制的设备不会与 iOS 设备“配对”，但它们在任何时候都只会与单个 iOS 设备通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T22:21:06.913

我认为这里的正确术语是“bonded”而不是“bounded”。

非绑定外围设备将连接到任何试图发现它并建立连接的 Central。

绑定的外围设备之前已经配对并将自动连接。

当外围设备和中央设备之间存在配对时，它就被绑定了

# powershell - C# 的 PowerShell 等效代码

> ID：10602794
> 
> 赞同：0
> 
> 时间：2012-05-15T14:19:52.240
> 
> 标签：powershell

我是 PowerShell 的新手，并且一直在努力将以下 C# 代码转换为 Powershell。

```
var vmDoc = XDocument.Load(vmStream);
var vmElement = vmDoc.Descendants(ns + "entry")
        .Descendants(ns + "content");
var vmId = vmElement.Descendants().Descendants(nsData + "VirtualMachineID").FirstOrDefault(); 
```

我试过下面的代码，但它从来没有奏效

```
$vmElement = vmDoc.Descendants(ns + "entry")
    $_.Descendants($ns + "content")
$vmId = $vmElement.Descendants().Descendants($nsData + "VirtualMachineID").FirstOrDefault() 
```

希望有人可以帮助我！！

提前致谢！

拉玛尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:27:10.610

看起来您只是误解了 C# 中的换行符。换行符没有任何意义，为了便于阅读，通常将长行延续到另一行。您`$_`在第 3 行错误地使用了 powershell“此管道”变量。

```
$vmElement = vmDoc.Descendants(ns + "entry").Descendants($ns + "content")
$vmId = $vmElement.Descendants().Descendants($nsData + "VirtualMachineID").FirstOrDefault() 
```

~~**编辑**：查看了该[方法的](http://msdn.microsoft.com/en-us/library/bb353813.aspx)[文档后`Descendants`](http://msdn.microsoft.com/en-us/library/bb353813.aspx)，尚不清楚您的原始 C# 代码是否也可以工作。该方法返回一个`IEnumerable<XElement>`不会公开方法的`Descendants()`方法。~~

~~我建议您在尝试转换为 Powershell 之前专注于获取有效的 C# 代码。~~

这可能会对您有所帮助：[在 Powershell v2 中使用扩展方法是否有更简单的方法](https://stackoverflow.com/questions/431727/is-there-an-easier-way-of-using-extension-methods-in-powershell-v2)
而这个：[http ://dougfinke.com/blog/index.php/2007/08/07/using-xmllinq-in-powershell/](http://dougfinke.com/blog/index.php/2007/08/07/using-xmllinq-in-powershell/)

# regex - 从tomcat访问日志中获取最大和最小时间

> ID：10602802
> 
> 赞同：1
> 
> 时间：2012-05-15T14:20:18.153
> 
> 标签：regex, sed, awk

我的 tomcat 访问日志如下所示：

```
247.134.70.3 - - [07/May/2012:17:53:58 +0000] 93 "POST /maker/www/jsp/pulse/Service.ajax HTTP/1.1" 200 2 -  "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; .NET4.0E)"
247.134.70.3 - - [07/May/2012:17:53:58 +0000] 140 "POST /maker/www/jsp/pulse/Service.ajax HTTP/1.1" 200 2 - "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; .NET4.0E)"
... 
... 
```

datetime 时间戳后面的数字表示服务器端处理时间 ms。我需要一个特定请求的最大和平均时间，例如“POST /maker/www/jsp/pulse/Service.ajax”十分钟。这可能使用 sed、awk 还是我需要更多逻辑的东西，例如 python？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:34:36.957

```
awk -F '[ "]' '{requests[$8 $9] += $6; count[$8 $9]++; if ($6 > max[$8 $9]) {max[$8 $9] = $6}} END {for (request in requests) {print requests[request], count[request], requests[request] / count[request], max[request], request}}' inputfile 
```

在不同的行上分开：

```
awk -F '[ "]' '{
    requests[$8 $9] += $6; 
    count[$8 $9]++; 
    if ($6 > max[$8 $9]) {
        max[$8 $9] = $6
    }
} 
END {
    for (request in requests) {
        print requests[request], count[request], requests[request] / count[request], max[request], request
    }
}' inputfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:37:39.000

```
awk -F '[][ ]' -v start="07/May/2012:17:50:00" -v stop="07/May/2012:18:00:00" '
    start <= $5 && $5 < stop {
        split($0, arr, /"/)
        req = arr[2]
        count[req] += 1
        total[req] += $8
        if ($8 > max[req]) max[req] = $8
    }
    END {
        for (req in count) {
            print req
            print "  num entries: " count[req]
            print "  avg time: " total[req]/count[req]
            print "  max time: " max[req]
        }
    }
' logfile 
```

鉴于您的小样本，这将输出：

```
POST /maker/www/jsp/pulse/Service.ajax HTTP/1.1
  num entries: 2
  avg time: 116.5
  max time: 140 
```

# c# - c#单个项目中不同文件夹下的多个web.config文件？

> ID：10602804
> 
> 赞同：1
> 
> 时间：2012-05-15T14:20:23.633
> 
> 标签：c#, web-config

我们可以在 c# 的单个项目中拥有多个 web.config 文件吗？如果是，那么它有什么好处？假设我有一个项目 ABC，它下面有三个文件夹。现在 ABC 有了它的 web.config 文件，ABC 下的每个文件夹也是如此。所以总共有 4 个 web.config 文件。那么当我运行项目时会输出什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:29:09.003

是的，您可以在单独的文件夹中有多个 web.config 文件。它们可用于在每个文件夹的基础上启用/禁用模块。您甚至可以将这些文件夹中的每一个设置为单独的网站，甚至是子站点，它们使用父 web.config 中的一些模块和子站点 web.config 中的一些模块。

我过去写过一篇关于使用 BlogEngine.NET 作为主站点并在子站点中配置 web.config 文件的博客文章。它可能对您有所帮助： [http ://markschlegel.com/post/2011/11/26/BlogEngineNET-a-sub-site!.aspx](http://markschlegel.com/post/2011/11/26/BlogEngineNET-a-sub-site!.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:24:17.847

你当然可以。默认的 MVC 3 项目模板就是一个例子。该站点有一个 web.config，Views 文件夹中有一个用于处理视图的呈现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:24:25.267

是的你可以。ASP.NET MVC 项目模板这样做是为了限制浏览`Views`文件夹。

# asp.net-mvc - 由 ASP.NET MVC 在暂存中生成的错误 url

> ID：10602805
> 
> 赞同：0
> 
> 时间：2012-05-15T14:20:24.957
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7

我遇到了奇怪的行为，无法找到发生了什么，希望有人能给出一个想法。于是就有了简单标准的路线图：

```
 routes.MapRoute("Category",
         "category/{categoryName}/{id}",
          new {
                controller = MVC.PublicProduct.Name, 
                action = MVC.PublicProduct.ActionNames.Index, 
                id = 1
              }); 
```

事情是，而不是生成这个：

```
http://staging/category/sunglasses/14 
```

它给：

```
http://staging/?action=index&controller=publicproduct&id=14&categoryname=sunglasses 
```

奇怪的是：
1）如果我在地址栏中输入正确的 url，它可以工作
**2）它的行为只有在暂存、本地机器（也是 IIS7）和生产中，它按预期工作，所以我猜它是某种 IIS环境。**

更新：如何生成 url 的示例之一：

```
<a href="@Url.Action(MVC.Basket.Index())">My Cart</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:58:33.097

从 IIS 和磁盘中删除站点并创建新站点解决了问题，幸运的是这是暂存的，所以没有人受到伤害。

# php - 删除重复数组

> ID：10602808
> 
> 赞同：-2
> 
> 时间：2012-05-15T14:20:32.553
> 
> 标签：php, arrays, duplicates, multidimensional-array

我有以下数组：

```
$t[0] = array('one'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));
$t[1] = array('two'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));
$t[2] = array('one'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));
$t[3] = array('three'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4)); 
```

我想从上面的数组中删除重复的数组，结果应该是：

```
$t[0] = array('one'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));
$t[1] = array('two'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));
$t[2] = array('three'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4)); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:21:27.420

```
$t[0] = array('one'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));
$t[1] = array('two'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));
$t[2] = array('one'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));
$t[3] = array('three'=>array('a'=>2,'b'=>3,'c'=>2,'e'=>4));

$array = array();
foreach ($t as $key=>$value) {
    if (!in_array ($value, $array)) {
        $array [$key] = $value;
    }
}
print_r ($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:37:21.327

据我了解，您想要做的是从**多维**数组中删除重复的**键。**

 **这样的事情应该可以解决问题：

```
$new_array = array();
foreach($t as $array) {
    foreach($array as $k => $v) {
        if(!array_key_exists($k, $new_array)) {
            $new_array[$k] = $v;
        }
    }
} 
```**

# python - Python中的成对Kullback Leibler（或Jensen-Shannon）散度距离矩阵

> ID：10602811
> 
> 赞同：3
> 
> 时间：2012-05-15T14:20:40.457
> 
> 标签：python, matrix, distance, metrics

我有两个矩阵 X 和 Y（在我的大多数情况下它们是相似的）现在我想计算所有行之间的成对 KL 散度并将它们输出到矩阵中。例如：

```
X = [[0.1, 0.9], [0.8, 0.2]] 
```

然后，该函数应获取`kl_divergence(X, X)`并计算两个 X 矩阵的每对行的成对 Kl 散度距离。输出将是一个 2x2 矩阵。

在 Python 中已经有一些实现了吗？如果没有，这应该很容易计算。我想要某种矩阵实现，因为我有很多数据并且需要保持运行时尽可能低。或者，Jensen-Shannon 熵也很好。最终这对我来说甚至是一个更好的解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T14:48:32.737

请注意，[KL 散度](http://en.wikipedia.org/wiki/Kullback%E2%80%93Leibler_divergence)本质上是 P(i) 和 log(P(i)/Q(i)) 的点积。因此，一种选择是为 P(i) 和 log(P(i)/Q(i)) 形成一个[numpy](http://numpy.scipy.org/)数组的列表，每个要计算的 KL 散度为一行），然后执行点积.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-14T22:10:04.310

有一个名为 dit 的新（ish）库，它实现了 JSD，以及互信息和许多其他距离度量：

```
import dit
foo = dit.Distribution(['A','B','C'],[0.5,0.5,0.0])
bar = dit.Distribution(['A','B','C'],[0.1,0.0,0.9])
dit.divergences.jensen_shannon_divergence([foo,bar])
0.80499327350549388 
```

文档可能需要做一些工作，但看起来很有希望。

[http://docs.dit.io/en/latest/generalinfo.html#quickstart](http://docs.dit.io/en/latest/generalinfo.html#quickstart)

# java - 在 OSGi Bundle 中使用 SwingUtilities.invokeLater 时找不到类

> ID：10602814
> 
> 赞同：0
> 
> 时间：2012-05-15T14:20:51.357
> 
> 标签：java, swing, osgi, event-dispatch-thread, invokelater

（编辑：问题已解决 - 请参阅最后的详细信息）

我想在 OSGi Bundle 中创建`JFrame`一个Swing。`WindowAdapter`当我使用 执行此操作`SwingUtilities.invokeLater`时，`WindowAdapter`找不到该类。没有`invokeLater`它就可以工作。

我需要做什么才能`WindowAdapter`在使用时发现`invokeLater`？`invokeLater`在 OSGi 环境中不合适吗？

细节：

我使用自定义启动器启动 Apache Felix 框架实例，安装包并启动它。我的包的启动方法如下所示：

```
public void start(BundleContext arg0) throws Exception {
    myFrame = new MyFrame();
    myFrame.open();
} 
```

这是 MyFrame 类：

```
public class MyFrame {
    JFrame mainFrame;

    public void open() {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                openImpl();
            }
        });
        // If called like this it works:
        // openImpl();
    }

    public void openImpl() {
        mainFrame = new JFrame("Title");
        mainFrame.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
        WindowAdapter wa = new WindowAdapter() {
        };
        mainFrame.addWindowListener(wa);
        mainFrame.setSize(800, 600);
        mainFrame.setLocationRelativeTo(null);
        mainFrame.setVisible(true);
    }
} 
```

这是我的捆绑清单：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.2
Created-By: 1.7.0_03-b05 (Oracle Corporation)
Built-By: Rainer Schwarze
Bundle-Name: DummyBdl
Bundle-Description: Dummy Bundle
Bundle-Vendor: admaDIC
Bundle-Version: 0.0.1
Bundle-Activator: dummybdl.Activator
Import-Package: org.osgi.framework, javax.swing
Export-Package: dummybdl.api
Export-Service: dummybdl.Provider 
```

这是我得到的堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1432)
    at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:72)
    at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1843)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at dummybdl.MyFrame.openImpl(MyFrame.java:24)
    at dummybdl.MyFrame$1.run(MyFrame.java:16)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

作为一个 OSGi 新手，我尝试了几件事来修复它，但到目前为止找不到解决方案。那么为什么不在 StackOverflow 上提出我的第一个问题 :-)

编辑：

调试了半个小时后发现问题完全出在我的身上：我的代码`openImpl`在 EDT 调用之前停止了 OSGi 框架。

因此 Apache Felix 框架将`BundleWiringImpl`实例（参见堆栈跟踪）标记为已处理。当我`openImpl`在 EDT 中被调用时，`BundleWiringImpl.getClassLoader`返回，`null`因为它被标记为已处置。最终这会导致 NPE。（我应该采取额外的步骤来发布我的 Felix 加载程序的 50 行，这可能会使错误变得明显。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:50:48.003

~~*答案*`WindowAdapter`您尝试使用的类位于 中`java.awt.event`，但您没有导入该包。~~编辑：这似乎并没有解决问题（见评论），但下面的背景故事仍然存在。

*背景故事*你的清单看起来是手工制作的，我建议你不要那样做（你会犯错误，而且保持清单很好地同步很麻烦）。如果您使用的是 Eclipse，请查看[bndtools](http://bndtools.org/) ，或者对于任何其他环境，请查看普通的[bnd 。](https://github.com/bndtools/bnd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:51:31.750

`openImpl`我的代码在 EDT 中被调用之前停止了 OSGi 框架。

没有`invokeLater` `openImpl`在我的其他代码关闭 OSGi 框架之前立即被调用。由于`invokeLater`调用`openImpl`被安排在稍后和“稍后”发生之前，我的代码关闭了 OSGi 框架。

`BundleWiringImpl`在这种情况下，Apache Felix 框架将实例（参见堆栈跟踪）标记为已释放。当我`openImpl`在 EDT 中被调用时，`BundleWiringImpl.getClassLoader`返回，`null`因为它被标记为已处置。最终这会导致 NPE。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T12:09:01.640

堆栈跟踪包含一些安全检查“ProtectionDomain,..doIntersectionPrivilege”。您是否尝试过禁用 SecurityManager。您可以使用以下 VM 选项禁用它：

-Djava.security.manager=

也看这里： [如何禁用 Java 安全管理器？](https://stackoverflow.com/questions/762459/how-to-disable-java-security-manager)

# javascript - 使用 jquery 或 javascript 对 div 数据进行排序

> ID：10602817
> 
> 赞同：0
> 
> 时间：2012-05-15T14:21:10.253
> 
> 标签：javascript, jquery, sorting

我试图以不同的方式对一些 DIVS 进行排序，但我很迷茫。我一直在尝试一些东西，但我不知道如何让它工作。我有以下格式的 div 数据。我有一个带有排序选项的下拉列表，例如按价格、距离和创建日期等排序。从下拉列表中选择一个选项时，应该对 div 数据进行相应的排序和显示。示例是我选择按价格排序，然后数据应按排序顺序显示，因为价格从低到高开始。

我需要你的指导。

```
<div id="contentContainer">
  <div id="content">
      <div>
        <div class="price">120</div>
        <div class="dateDiv">2012-05-09 20:39:38.0</div>
        <div class="distance">20 mile</div>
      </div>

      <div>
        <div class="price">123</div>
        <div class="dateDiv">2012-05-10 20:39:38.0</div>
        <div class="distance">30 mile</div>
      </div>

      <div>
        <div class="price">100</div>
        <div class="dateDiv">2012-05-11 20:39:38.0</div>
        <div class="distance">50 mile</div>
      </div>

      <div>
        <div class="price">124</div>
        <div class="dateDiv">2012-05-12 20:39:38.0</div>
        <div class="distance">60 mile</div>
       </div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:40:58.497

按价格排序的示例：

```
$('#content div.price').map(function () {
  // map sort-value and relevant dom-element for easier handling
  return {val: parseFloat($(this).text(), 10), el: this.parentNode};
}).sort(function (a, b) {
  // a simple asc-sort
  return a.val - b.val;
}).map(function () {
  // reduce the list to the actual dom-element
  return this.el;
}).appendTo('#content'); // < inject into parent node 
```

演示：http: [//jsfiddle.net/QmVsD/1/](http://jsfiddle.net/QmVsD/1/)

* * *

几点注意事项：

*   第一张地图并不是真正需要的，但它使排序回调更简单。
*   您需要为不同的数据类型（例如日期、字符串）提供不同的 compare-callbacs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:23:11.147

你所拥有的实际上是一个表，所以使用一个表和一个现有的表排序器。

当您拥有表格数据时，使用它没有任何`<table>`问题，这就是您所拥有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:34:43.727

生成的 HTML 是表示的一部分*，*而排序操作是数据*模型*的一部分。您应该在代码中将这两个概念分开。

在您的情况下，将数据存储在数组（数据模型）中。当您只想向用户显示数据时，请将其放在 div 或 table html 中。在布局 html 之前进行排序。当用户从下拉列表中选择排序选项时，清空`#contentContainer`，对数据数组进行排序，重新生成新排序数据的 html 并将其插入到`#contentContainer`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:13:55.787

我刚刚对此进行了测试，它对我来说效果很好。之后，您将决定如何处理阵列。:)

 `````
$(document).ready(function () {
var priceItems = $('.price');
var arr = new Array();
for (var i = 0; i < priceItems.length;i++) {
var tempInt = priceItems[i].innerHTML;
tempInt = parseInt(tempInt);
arr.push(tempInt);
}
arr.sort()  
}); 
````  `您现在需要的只是使用您的阵列。``

# silverlight - Silverlight OOB 应用程序的 SIP 堆栈

> ID：10602818
> 
> 赞同：0
> 
> 时间：2012-05-15T14:21:13.240
> 
> 标签：silverlight, silverlight-4.0, sip, pjsip

我想知道将 SIP 堆栈与 silverlight OOB 应用程序集成的可能解决方案。有没有办法在任何当前的 Silverlight 应用程序中显示来电显示信息？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T22:58:08.643

我的 C# SIP 堆栈可以在 Silverlight 中本地运行，但请注意，由于 Silverlight 不支持 UDP，因此您必须使用 SIP over TCP。您可以在[http://sipsorcery.codeplex.com/SourceControl/changeset/view/73596](http://sipsorcery.codeplex.com/SourceControl/changeset/view/73596)找到它，查看 sipsorcery-silverlight 解决方案。

# jquery - Internet Explorer 中的 jQuery 兼容性问题和未定义的结果

> ID：10602819
> 
> 赞同：1
> 
> 时间：2012-05-15T14:21:14.187
> 
> 标签：jquery, explorer, attr

我编写了一个在 Opera 和 Firefox 中正常工作的 jQuery 脚本，但是 Internet Explorer 有问题。

当我开始测试脚本时，它 `alert ( prlvg.attr('prl') );`在 Opera 和 Firefox 中返回正确的文本，但在资源管理器中返回`undefined`

我之前的步骤在`prlvg`那里：

```
var top = $('a[prl]:first').offset().top; 
var vwtmbs = $('a[prl]').filter(function(){
    var offsetW = $(this).offset().top - $(window).scrollTop();
    return(offsetW <= window.innerHeight );
});

prlvg = vwtmbs.last();
alert ( prlvg.attr('prl') ); 
```

如何解决问题？谢谢。

**更新：**似乎问题在于`window.innerHeight`IE `undefined`，之后的所有代码也未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:04:01.140

7 到 10 的 Internet Explorer 可以很好地处理您的自定义属性：http: [//jsfiddle.net/xpjcU/](http://jsfiddle.net/xpjcU/)。

除此之外，我会避免在您的 HTML 中使用这样的自定义属性。相反，如果要存储有关元素的额外信息，请使用[`data-`属性：](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)

```
<p data-prl="foo">Bar</p> 
```

然后，您可以通过 与自定义数据进行交互[`$.data()`](http://api.jquery.com/data/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:59:37.030

您的 Explorer 版本可能不会采用您的自定义`attr`. 我建议你在这样的类中通过它：并用or`class="prl_foo"`选择它`$(a).hasClass(...)``$("a[class^='prl_']")`

# aptana3 - 未显示错误，文件缓存时出现（拒绝访问）错误

> ID：10602825
> 
> 赞同：1
> 
> 时间：2012-05-15T14:21:40.347
> 
> 标签：aptana3

我有一个项目位于需要 Windows 7 机器上的管理员访问权限的目录中。如果我打开文件并编辑它，我可以保存它而不会收到错误。但是，如果我随后直接从文件系统打开文件，或使用“系统编辑器”选项，则不存在更改。

如果我使用 Java Eclipse 包做同样的事情，当我尝试保存它时它会给我一个错误。

我只能假设 Aptana Studio 正在某处缓存保存？即使我关闭 Aptana Studio 并重新启动计算机，缓存的更改仍然可见。但是从项目的“位置：”路径查看文件时找不到。

# c# - 从字符串行解析 GUID

> ID：10602827
> 
> 赞同：3
> 
> 时间：2012-05-15T14:21:48.120
> 
> 标签：c#, regex, parsing

我有不同的选择如何将我的 GUIDS 存储为字符串行。

```
1\. Accessibility|5102d73a-1b0b-4461-93cd-0c024738c19e
2\. 5102d73a-1b0b-4461-93cd-0c024738c19e;#5102d73a-1b0b-4461-93cd-0c024733d52d
3\. |;#5102d73a-1b0b-4461-93cd-0c024738c19e;#SharePointTag|5102d73a-1b0b-4461-93cd-0c024733d52d
3\. Business pages|;#5102d73a-1b0b-4461-93cd-0c024738cz13;#SharePointTag|5102d73a-1b0b-4461-93cd-0c024733d52d 
```

你们能帮我想想如何解析这个标签并最终得到Guids类型的列表吗？也许正则表达式可以在这种情况下有所帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:52:31.320

看起来您正在使用托管元数据、术语库 ID 和术语集 ID :)

只需使用常规正则表达式（下面的“p”变量）：

```
string c1 = "Accessibility|5102d73a-1b0b-4461-93cd-0c024738c19e";
string c2 = "5102d73a-1b0b-4461-93cd-0c024738c19e;#5102d73a-1b0b-4461-93cd-0c024733d52d";
string c3 = "|;#5102d73a-1b0b-4461-93cd-0c024738c19e;#SharePointTag|5102d73a-1b0b-4461-93cd-0c024733d52d";
string c4 = "Business pages|;#5102d73a-1b0b-4461-93cd-0c024738cz13;#SharePointTag|5102d73a-1b0b-4461-93cd-0c024733d52d";
string p = @"([a-zA-Z0-9]{8}[-][a-zA-Z0-9]{4}[-][a-zA-Z0-9]{4}[-][a-zA-Z0-9]{4}[-][a-zA-Z0-9]{12})";

MatchCollection mc;

Console.WriteLine("#1");
mc = Regex.Matches(c1, p);
foreach (var id in mc)
    Console.WriteLine(id);

Console.WriteLine("#2");
mc = Regex.Matches(c2, p);
foreach (var id in mc)
    Console.WriteLine(id);

Console.WriteLine("#3");
mc = Regex.Matches(c3, p);
foreach (var id in mc)
    Console.WriteLine(id);

Console.WriteLine("#4");
mc = Regex.Matches(c4, p);
foreach (var id in mc)
    Console.WriteLine(id); 
```

输出：

```
#1
5102d73a-1b0b-4461-93cd-0c024738c19e
#2
5102d73a-1b0b-4461-93cd-0c024738c19e
5102d73a-1b0b-4461-93cd-0c024733d52d
#3
5102d73a-1b0b-4461-93cd-0c024738c19e
5102d73a-1b0b-4461-93cd-0c024733d52d
#4
5102d73a-1b0b-4461-93cd-0c024738cz13
5102d73a-1b0b-4461-93cd-0c024733d52d
Press any key to continue... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T14:29:20.780

```
var possibleGuids = myString.Split("|;#".ToCharArray(), 
                                   StringSplitOptions.RemoveEmptyEntries);
Guid g;
foreach(var poss in possibleGuids)
{
  if(Guid.TryParse(poss, out g))
  {
      // g contains a guid!
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:28:25.730

```
string sContent = "your data"; // any of your four forms of input
string sPattern = @"([a-z0-9]*[-]){4}[a-z0-9]*";

MatchCollection mc = Regex.Matches(sContent, sPattern );

foreach (var sGUID in mc)
{
    // Do whatever with sGUID
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:24:37.730

例如，您可以拆分字符串

```
 "fist|second".Split('|') 
```

一旦获得 GUID 字符串，您就可以使用

```
 Guid = new Guid(myString); 
```

对于第一行

```
var guid = new Guid("Accessibility|5102d73a-1b0b-4461-93cd-0c024738c19e".Split("|")[1]); 
```

对于二线

```
var myArray = "5102d73a-1b0b-4461-93cd-0c024738c19e;#5102d73a-1b0b-4461-93cd-0c024733d52d".Split(';');
var guid1 = new Guid(myArray[0]);
var guid2 = new Guid(myArray[1].Replace('#','')); 
```

所以你可以这样继续..

# java - 搜索存储在 Quartz 调度程序的 DBJobStore 中的现有作业时的问题

> ID：10602829
> 
> 赞同：2
> 
> 时间：2012-05-15T14:21:55.190
> 
> 标签：java, quartz-scheduler

我正在使用 Quartz 调度程序的 DB Job Store 来定期安排我的运行。为了获得所有现有的工作及其状态，我使用以下代码：

```
 for(String jobGroupName : scheduler.getJobGroupNames() {
        for(String jobName : scheduler.getjobNames(jobGroupName) {
            JobDetail jobDetail = scheduler.getJobDetail(jobName, jobGroupName);
            Trigger[] triggers = scheduler.getTriggersOfJob(jobName, jobGroupName); 
            Trigger trigger = triggers[0];
            int jobState = scheduler.getTriggerState(trigger.getName(), trigger.getGroup());
        } 
    } 
```

我还实现了作业接口，如下所示

```
 public class jobImpl implements Job {
        public void execute(JobExecutionContext arg) {
          // My Code 
        }
    } 
```

每当我调用获取现有作业及其状态的代码（第一个代码示例）时，都会触发 jobImpl 中的 execute 方法。

有人可以帮我解决这个问题吗？

@托马斯

这是堆栈跟踪：

```
 java.lang.NullPointerException 
      [junit] at com.JobImpl.execute(JobImpl.java:24)                 
      [junit] at org.quartz.core.JobRunShell.run(JobRunShell.java:216) 
      [junit] at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549) 
```

# java - 在运行时重新编译对象

> ID：10602832
> 
> 赞同：0
> 
> 时间：2012-05-15T14:22:05.870
> 
> 标签：java, oop, compilation, runtime, reloading

我正在用java开发一个项目，在运行主文件后，一些java文件被更改，如果我在同一执行期间再次运行该文件，输出不会显示java文件中所做的更改

例如有 2 个文件。Main.java 和 file1.java

**main.java**

```
public static void main(string[] argv)
{

    file1 obj = new file1();
    obj.view();
        Scanner in = new Scanner(System.in);
        String x = in.nextLine();
    //before entering any value i manually updated the content of file1.java
    obj = new file1();
    obj.view();
} 
```

**file1.java**（更新前）

```
public class file1
{

    public void view()
    {

        system.out.println("This is test code!!");
    }

} 
```

**file1.java** (更新后)

```
public class file1
{

    public void view()
    {

        system.out.println("That was done for Testing!!");
    }

}

Output :
This is test code!!

This is test code!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:28:53.747

您必须重新编译代码才能看到更改。

你可以做的是用java编译一个字符串（从文件中读取它之后）并通过反射调用类的方法。

[这里](http://www.java2s.com/Tutorial/Java/0120__Development/CompileString.htm)是关于如何以编程方式编译字符串的分步指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:30:52.017

更新 Java 文件不会影响 JVM 执行的运行时指令。

当编译 Java 应用程序时，.java 源代码文件被编译成 .class 文件，其中包含字节码指令，这些指令又由 JVM 解释。当 JVM 需要一个类时，它会通过一个称为类加载器的特殊对象将适当的 .class 文件加载到内存中。

将此应用于您的示例 - 当您第一次引用 File1 类时，JVM 会将 File1 类加载到内存中。该类的内存表示将持续存在，直到类加载器被销毁或 JVM 重新启动。JVM 看不到 file1.java 类的任何更改 - 首先是因为类加载器不会重新加载定义，其次是因为在重新编译 file1.java 类之前定义不会改变。

要在运行时更改对象的行为，您可以使用反射 API，请参见[此处](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:39:32.943

您无需编译源代码即可完成与您的示例接近的任何操作。

```
public class MyView 
{
   String the_string;
   public MyView   (String string) { the_string = string; }
   public void setString (String string) { the_string = string; }
   public void view () { system.out.println (the_string); } 
}

public static void main(string[] argv)
{

    MyView obj = new MyView("This is test code!!");
    obj.view();
        Scanner in = new Scanner(System.in);
        obj.setString (in.nextLine());
    obj.view();
} 
```

# jquery - ie7位置绝对错误

> ID：10602834
> 
> 赞同：1
> 
> 时间：2012-05-15T14:22:18.217
> 
> 标签：jquery, css, internet-explorer-7, jquery-animate, css-position

考虑以下在所有现代浏览器中运行良好的代码。

CSS：

```
 .container {
        width: 400px;
        height: 150px;
        border: solid 1px #CCC;
        position: relative;
        margin: 20px auto;
        overflow: hidden;
    }

    .toc {
        position: absolute;
        bottom: 1px;
    }

    .sections {
        width: 800px;
    }

    .item {
        float: left;
        width: 400px;
        height: 150px;
        position: relative;
        margin-left: 0px;
    } 
```

标记：

```
<div class="container">
<div class="toc">
    <a data-rank="0" href="javascript:;">1</a><a data-rank="1" href="javascript:;">2</a>
</div>
<div class="sections">
    <div class="item" data-rank="0">
        <h1>1: Hello World</h1>
    </div>
    <div class="item" data-rank="1">
        <h2>2: Hello World</h2>
    </div>
</div>
</div> 
```

JS：

```
$(document).ready(function() {
    $('a').on("click",function(e) {
        var $target = $(e.target);
        var s = $target.attr('data-rank');

        $('.sections').animate({ marginLeft : + -(s * 400) + "px"}, 1200);
    });
}); 
```

问题：在 IE7 中，“toc-div”和“sections-div”一样是动画的。将其位置更改为相对位置而不是绝对位置，它将起作用，但是我无法将其放置在我想要的位置。

我非常感谢一个解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T06:35:22.983

另一种解决方案是添加：

```
zoom: 1; 
```

它有助于错误的定位和消失的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T18:16:46.090

尝试将以下内容添加到 .toc css

```
left: 0; 
```

我正在我的 VM IE7 上进行测试，它似乎可以工作。此外，使用提供的代码，我认为我无法单击 FF 11 中的链接，我必须添加 z-index。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:32:46.870

这是一个解决方案。像这样使用滚动 div移动`toc`容器的外部......

```
<body>
<div class="toc">
    <a data-rank="0" href="javascript:;">1</a>&nbsp;<a data-rank="1" href="javascript:;">2</a>
</div>
<div class="container">
<div class="sections">
    <div class="item" data-rank="0">
        <h1>1: Hello World</h1>
    </div>
    <div class="item" data-rank="1">
        <h2>2: Hello World</h2>
    </div>
</div>
</div> 
```

然后修改 CSS 以使其`toc`出现在您想要的位置...

```
.toc {
    position: relative;
    top: 165px;
} 
```

# java - 如何提示用户输入有效的手机号码？

> ID：10602849
> 
> 赞同：2
> 
> 时间：2012-05-15T14:23:16.910
> 
> 标签：java, android

我目前正在开发一个 Android 防盗应用程序，我是 Android 开发的新手。我的应用程序可以远程锁定丢失的手机，所以在配置时，用户需要输入一个有效的电话号码，但我如何确定输入的电话号码是否有效？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:38:43.573

-选项一：从 sim 卡中读取（获取）电话号码（如果可用，并非所有运营商都启用此功能）

-选项二：如果SIM卡改变（SIM序列号）锁定手机并发送短信到另一个电话号码（因为小偷会扔掉SIM卡）

-选项三：使用 WHatApp android 应用程序用来识别一个人（向指定的电话号码发送短信并检测传入的短信）选项 3 似乎有点复杂，因为您需要一个带有短信网关的服务器端。

好吧，这就是我想到的。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:27:42.683

我相信除非你打电话，否则不可能验证电话号码是否存在。您可以创建一个程序，应用程序将呼叫输入的电话号码，并为其连接计时。如果连接持续时间超过 X 秒，则它是有效的电话号码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:27:58.600

如果您连接数据库，请与电话号码进行比较以在字段中输入电话号码。我希望能帮助你。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T11:17:58.293

我为一个客户做了一个项目，提出了同样的场景。这是我们得出的结论。

> 向号码输入发送短信，并要求该号码发送短信代码作为回复。

```
eg. CONFIRM 
```

1.  如果该号码有效并且用户知道，他会打电话给他们并要求他们回短信。
2.  如果号码有效且正在使用，则消息将被传递。

客户同意上述方案。除非你有一个非常大的工作号码数据库（经常更新），否则它将是一个绕过解决方案。

# c# - 我如何计算并显示下载每个文件需要多少时间？

> ID：10602854
> 
> 赞同：0
> 
> 时间：2012-05-15T14:23:40.803
> 
> 标签：c#

```
public void GetAllImages()
        {

            // Bing Image Result for Cat, First Page
            string url = "http://www.bing.com/images/search?q=cat&go=&form=QB&qs=n";

            // For speed of dev, I use a WebClient
            WebClient client = new WebClient();
            string html = client.DownloadString(url);

            // Load the Html into the agility pack
            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            doc.LoadHtml(html);

            // Now, using LINQ to get all Images
            /*List<HtmlNode> imageNodes = null;
            imageNodes = (from HtmlNode node in doc.DocumentNode.SelectNodes("//img")
                          where node.Name == "img"
                          && node.Attributes["class"] != null
                          && node.Attributes["class"].Value.StartsWith("sg_t")
                          select node).ToList();*/

           var imageLinks = doc.DocumentNode.Descendants("img")
    .Where(n => n.Attributes["class"].Value == "sg_t")
    .Select(n => HttpUtility.ParseQueryString(n.Attributes["src"].Value)["amp;url"]).ToList();

            foreach (string node in imageLinks)
            {
                y++;
                //Console.WriteLine(node.Attributes["src"].Value);
                richTextBox1.Text += node + Environment.NewLine;
                Image t = DownloadImage(node);
                t.Save(@"d:\test\" + y.ToString("D6" + ".jpg"));

            }

        }

        public Image DownloadImage(string _URL)
        {
            Image _tmpImage = null;

            try
            {
                // Open a connection
                System.Net.HttpWebRequest _HttpWebRequest = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(_URL);

                _HttpWebRequest.AllowWriteStreamBuffering = true;

                // You can also specify additional header values like the user agent or the referer: (Optional)
                //_HttpWebRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)";
                //_HttpWebRequest.Referer = "http://www.google.com/";

                // set timeout for 20 seconds (Optional)
                _HttpWebRequest.Timeout = 60000;

                // Request response:
                System.Net.WebResponse _WebResponse = _HttpWebRequest.GetResponse();

                // Open data stream:
                System.IO.Stream _WebStream = _WebResponse.GetResponseStream();

                // convert webstream to image
                _tmpImage = Image.FromStream(_WebStream);

                // Cleanup
                _WebResponse.Close();
                _WebResponse.Close();
            }
            catch (Exception _Exception)
            {
                // Error
                Console.WriteLine("Exception caught in process: {0}", _Exception.ToString());
                return null;
            }

            return _tmpImage;
        } 
```

现在只是为了使用richTextBox1，我必须在其中显示剩余的下载时间以及下载需要多长时间。

有没有更快的方法来下载文件或 httprequest 是否足够好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:32:25.383

您可以并行下载它们：

Parallel.ForEach(imageLinks, node => {
Image t = DownloadImage(node); lock(y) { t.Save(@"d:\test\" + (y++).ToString("D6" + ".jpg" )); } }

或者，如果您在 ASP.NET 应用程序中下载它们，您最好通过 ajax 调用从客户端下载它们。

# wcf - 为什么托管在 Windows 服务内的 WCF 服务会在一段时间后死掉

> ID：10602862
> 
> 赞同：0
> 
> 时间：2012-05-15T14:24:13.623
> 
> 标签：wcf

我使用 C# 在 Windows 服务中托管了 WCF 服务。它工作正常，我能够从客户端应用程序与 WCF 服务进行通信。

但问题是如果我让客户端空闲 10 分钟左右，然后尝试再次连接，我会收到以下错误

> 服务器堆栈跟踪：
> 在 System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposedOrNotOpen()
> 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:45:40.513

关闭的不是 Windows 服务，而是您的客户端代理。

你说你让客户闲着。你不应该这样做。提出请求后，您应该关闭客户端。然后在需要时打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T15:10:29.877

当您的服务绑定[ReceiveTimeout](https://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.receivetimeout(v=vs.110).aspx)设置保留其默认值（10 分钟）时，就会发生这种情况。

要将其设置为“永远”，您可以在配置文件中设置：

```
ReceiveTimeout = "infinite" 
```

或通过代码：

```
binding.ReceiveTimeout = TimeSpan.MaxValue; 
```

# mysql - MySQL回滚重复键

> ID：10602866
> 
> 赞同：2
> 
> 时间：2012-05-15T14:24:18.977
> 
> 标签：mysql, transactions, innodb, commit, rollback

我期待在出现错误时使用事务和回滚（如重复键或其他）。

当我禁用自动提交并且出现错误时，即使不应该提交事务也已提交。

这是我的代码：

```
CREATE TABLE `Users` (
  `user_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `Miscs` (
  `misc_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`misc_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

SET @@AUTOCOMMIT = 0;

BEGIN;
    INSERT INTO Miscs ( misc_id ) VALUES('1');
    INSERT INTO Users ( user_id ) VALUES('1');
    INSERT INTO Miscs ( misc_id ) VALUES('2');
COMMIT;

BEGIN;
    INSERT INTO Miscs ( misc_id ) VALUES('3');
    INSERT INTO Users ( user_id ) VALUES('2');
    INSERT INTO Miscs ( misc_id ) VALUES('4');
COMMIT;

BEGIN;
    INSERT INTO Miscs ( misc_id ) VALUES('5');
    INSERT INTO Users ( user_id ) VALUES('1');
    -- should stop, rollback the transaction and skip to the next/last
    INSERT INTO Miscs ( misc_id ) VALUES('6');
COMMIT;

-- last transaction
BEGIN;
    INSERT INTO Miscs ( misc_id ) VALUES('7');
    INSERT INTO Users ( user_id ) VALUES('4');
    INSERT INTO Miscs ( misc_id ) VALUES('8');
COMMIT;

SET @@AUTOCOMMIT = 1; 
```

但结果很奇怪：

```
Users :
1
2
3

Miscs :
1
2
3
4
5
6
7
8 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:26:53.383

在应用程序中，我会写这样的东西 -

```
START TRANSACTION
TRY
  INSERT
  INSERT
  INSERT
  COMMIT
CATCH
  ROLLBACK 
```

但是 MySQL 没有 TRY-CATCH 子句。我可以通过[DECLARE EXIT HANDLER](http://dev.mysql.com/doc/refman/5.5/en/declare-handler.html)语句向您建议 -

```
 BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION  ROLLBACK;
    START TRANSACTION;
      INSERT INTO Miscs ( misc_id ) VALUES('1');
      INSERT INTO Users ( user_id ) VALUES('1');
      INSERT INTO Miscs ( misc_id ) VALUES('2');
    COMMIT;
  END;

  BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION  ROLLBACK;
    START TRANSACTION;
      INSERT INTO Miscs ( misc_id ) VALUES('3');
      INSERT INTO Users ( user_id ) VALUES('2');
      INSERT INTO Miscs ( misc_id ) VALUES('4');
    COMMIT;
  END;

  BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION  ROLLBACK;
    START TRANSACTION;
      INSERT INTO Miscs ( misc_id ) VALUES('5');
      INSERT INTO Users ( user_id ) VALUES('1');
      -- should stop, rollback the transaction and skip to the next/last
      INSERT INTO Miscs ( misc_id ) VALUES('6');
    COMMIT;
  END;

  BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION  ROLLBACK;
    START TRANSACTION;
      INSERT INTO Miscs ( misc_id ) VALUES('7');
      INSERT INTO Users ( user_id ) VALUES('4');
      INSERT INTO Miscs ( misc_id ) VALUES('8');
    COMMIT;
  END; 
```

从存储过程运行此代码，因为在 MySQL 中，无法在脚本中使用 DECLARE 处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-02T23:51:33.460

看到[这个链接](https://dev.mysql.com/doc/refman/5.7/en/innodb-error-handling.html)

> 如果您没有在语句中指定 IGNORE 选项，则重复键错误会回滚 SQL 语句。

# javascript - 关于请求动画帧的问题

> ID：10602868
> 
> 赞同：7
> 
> 时间：2012-05-15T14:24:25.557
> 
> 标签：javascript, css, frontend, parallax, requestanimationframe

我正在尝试构建一个视差站点，它会在滚动站点时移动一些元素。但是，在阅读[了 Paul Irish 的这篇文章](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)之后，我没有使用*滚动事件侦听*器，而[这段视频](http://www.youtube.com/watch?v=Vp524yo0p44)说滚动侦听器有点错误。我的问题是：`requestAnimationFrame`

1.  它在 Chrome 中看起来很流畅，但在 Firefox 中闪烁严重。我在这里做错了吗？
2.  *我的代码实际上是否比使用普通滚动事件侦听*器占用更多资源？每次我玩这个代码时，我都能听到我的笔记本电脑风扇在燃烧。

我的文件位于[http://www.socialbuzz.com.au/index.html](http://www.socialbuzz.com.au/index.html)，请滚动到页面底部以查看正在从 javascript 操作的元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T02:37:29.123

您应该有一个滚动事件触发 requestAnimationFrame 循环。滚动事件本身不会触发 requestAnimationFrame。你应该有类似 var scrolling = true; 的东西。发生这种情况时，请运行您的 requestAnimationFrame 循环，该循环引用来自滚动事件的事件数据。完成后，您需要对滚动事件进行去抖动以关闭循环，这是一件苦差事，但结果是值得的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T14:45:37.633

你*不是*在表演动画；也就是说，您不会在*没有用户交互的情况下连续*修改图形。您对页面的操作*仅*在用户滚动时发生，并且在用户停止滚动后不会继续。因此，使用 没有任何好处`requestAnimationFrame`，您应该坚持使用简单的事件处理程序。

的目的`requestAnimationFrame`是为连续动画提供最佳行为；它的任何优点都不适用于这里。如果循环`requestAnimationFrame`的每一步都以某种方式更新图形，那么在循环内部什么都不做的循环是完全合适的，但是由于当用户不滚动时没有任何变化，所以循环什么都不做，只会浪费 CPU 时间.

*应该*使用的一个示例`requestAnimationFrame`是，如果您的元素故意落后于滚动并在片刻后赶上。追赶动画应该在`requestAnimationFrame`从滚动事件处理程序开始的循环中完成，并且*当追赶完成时，该循环应该自行停止*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T09:52:45.237

我有过类似的经历，在玩了很多鼠标移动侦听器并`setInterval`增加动画步骤的频率之后，我又回到只是使用`onscroll`并发现在 FF10 和 FF 15 上它工作得很好。

也许我的要求和你的不一样——它是一个跟踪滚动条的元素，所以 onscroll 是改变盒子位置的提示。它落后并且在 FF 上很生涩，但在 WebKit 和 IE 上运行良好。我发现它`onscroll`在 FF 上的触发频率不如在 Chrome/IE 上那样频繁。

当我最初尝试这个时，它会在 FF 5 或 6 上。使用鼠标移动侦听器或频繁间隔，我能够增加调用手柄滚动功能的频率 - 但这实际上具有使定位看起来更不稳定的效果。现在在 10 ESR 和 15 上使用 onscroll 似乎对我有用，也许他们修复了一些问题。

# dynamic - wicket - 表格 - 在不完全刷新表格的情况下动态插入行

> ID：10602871
> 
> 赞同：0
> 
> 时间：2012-05-15T14:24:32.037
> 
> 标签：dynamic, datatable, wicket

我一直在玩 Wicket 一段时间，在我收到的最新要求之一中指定我应该在表格中显示一些数据，我想知道在我的情况下最好的解决方案是什么：DataTable、DataView ，……？

我的情况是什么？该表应显示当前用户或其他连接到应用程序的用户从同一页面上的表单提交的新行，而无需刷新整个表以减少传输的数据量。

你的观点是什么？

# c# - 正则表达式查找特定的 url 类型

> ID：10602878
> 
> 赞同：0
> 
> 时间：2012-05-15T14:24:47.450
> 
> 标签：c#

我将如何编写正则表达式来查找以下类型 URL 的匹配项：

> [https://domain.com/account/hello/username121/23424323-EEA1419](https://domain.com/account/hello/username121/23424323-EEA1419)

在上面的 domain.com/account/hello/ 中总是一样的，username121 和最后一个字符串改变了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:26:33.050

也许像下面这样

`https://domain.com/account/hello/[a-z0-9]+/[0-9]+-[A-Z0-9]+`

这假设只有用户名和最后一部分更改

# iphone - 通过Segue从view1切换到view2时如何避免刷新view1

> ID：10602879
> 
> 赞同：0
> 
> 时间：2012-05-15T14:24:51.413
> 
> 标签：iphone, uiview, segue, ios5.1, uistoryboardsegue

我有 2 个视图，并通过模态 segue（全屏、交叉溶解）从 view1 切换到 view2。

当我使用我定义的按钮转到 view2 并返回 view1 时，view1 中的所有图像都将重置为其默认值。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:38:40.313

在这里，如果您在您的 XIB 中获取 2 个视图，然后如果您使用按钮单击事件处理此视图，则非常容易.... 表示在单击按钮隐藏后设置您的视图后，首先从 xib 获取 2 个视图view1 并显示 view2 等等......就像......

如果你想使用动画，它的工作就像下面......

```
-(IBAction)btnView1_Clicked:(id)sender{
[UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:appDelegate.window cache:YES];
        [UIView commitAnimations];
       view1.hidden=FALSE;
       view2.hidden=TRUE;
}

-(IBAction)btnView2_Clicked:(id)sender{
[UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:appDelegate.window cache:YES];
        [UIView commitAnimations];
      view1.hidden=TRUE; 
      view2.hidden=FALSE;

} 
```

在这里你可以用这个逻辑来讨论你的观点......希望，这对你有帮助...... :)

# java - 如果值是 ArrayLists，是否可以对 HashMap 使用 values 方法？

> ID：10602880
> 
> 赞同：1
> 
> 时间：2012-05-15T14:24:53.590
> 
> 标签：java, arraylist, hashmap

我被困在试图让一些东西在任务中发挥作用。我有一个`HashMap<Integer, ArrayList<Object>>`调用`sharedLocks`，我想检查是否可以在 HashMap 的任何 ArrayList 中找到某个值。

以下代码显然不起作用，因为`Object[]`无法转换为`ArrayList[]`，但它是我想要的一般功能的演示。

```
ArrayList[] values = (ArrayList[]) sharedLocks.values().toArray();
boolean valueExists = false;
for (int i = 0; i < values.length; i++) {
    if (values[i].contains(accessedObject)) {
        valueExists = true;
    }
} 
```

有没有办法让我检查 HashMap 中的每个 ArrayList 的某个值？在这种情况下，我不确定如何使用 HashMaps 的 values 方法。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:31:14.590

[`HashMap.values()`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#values%28%29)返回一个`Collection`。您可以遍历集合，而无需将其转换为数组（或列表）。

```
for (ArrayList<Object> value : sharedLocks.values()) {
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:27:23.977

HashMap 有点特别，因为它根本没有索引可供参考……

你想要做的，是先把 HashMap 变成一个集合，然后用一个迭代器遍历这个集合。

每当你在 HashMap 中获得一个 ArrayList 时，你就会循环遍历 arrayList 中的每个元素，然后如果你找到它就跳出来 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:27:10.717

**使用将`toArray`数组作为参数的方法。**

这使用您指定的数组来填充数据，并维护类型，因此您不需要进行类型转换。此外，您应该在定义中保留泛型`<Object>`。

```
ArrayList<Object>[] values =
     sharedLocks.values().toArray(new ArrayList<Object>[sharedLocks.size()]); 
```

要考虑的另一件事是多个线程是否可以修改 this `HashMap`。在这种情况下，您需要将这行代码同步到`HashMap`并确保所有修改也同步。这将确保其他线程不会修改`.size()`调用和`.toArray()`调用之间的内容，这是可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:27:23.657

你不需要数组：

```
boolean valueExists = false;
for (ArrayList<Object> value : sharedLocks.values()) {
    if (value.contains(accessedObject)) {
        valueExists = true;
        break;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T14:28:23.277

为什么不遍历地图中的所有值：

```
for (ArrayList<Object> list : sharedLocks) {
  if (list.contains(accessedObject)) {
    // ...
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T14:29:01.920

这是一个通过哈希映射进行迭代的示例的链接。使用它来拉出每个数组列表，然后将其扩展为然后在数组列表的每个元素中搜索给定条目。

[http://www.java-examples.com/iterate-through-values-java-hashmap-example](http://www.java-examples.com/iterate-through-values-java-hashmap-example)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T14:30:18.663

您将需要使用嵌套的 foreach 循环。

```
foreach(every element in the hashmap) {
 foreach(every element in arraylist) {
   // do comparision
 }
} 
```

你可能只是摆脱了一个 foreach 循环和一个 keyExists() 调用或其中的一些东西。我无法从脑海中回忆起 API。

# html - 字体库是二进制程序吗？

> ID：10602883
> 
> 赞同：0
> 
> 时间：2012-05-15T14:25:05.663
> 
> 标签：html, pdf, fonts, render

我想知道用于 PDF 或 HTML 文本渲染的字体库是否是主应用程序调用的二进制应用程序。例如，要编译开源 PDF 渲染库，您还需要编译 freetype 库。这个库是否是二进制程序的集合，它们通过他们认为方便的技术绘制字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:49:18.167

字体库不是可执行的应用程序，它们只是一堆数据。基本上，字体文件根据线条和曲线定义了每个字形的外观（它有点复杂，但这就是想法）。Freetype 是一个开源可执行库，能够解析字体文件，然后使用解析的字体数据在图形表面上渲染文本。

# c++ - 为什么 MPI 不提供序列化接口？

> ID：10602884
> 
> 赞同：0
> 
> 时间：2012-05-15T14:25:11.327
> 
> 标签：c++, performance, serialization, mpi, protocol-buffers

MPI 是消息传递接口，但是当您要发送一个对象时，您必须在 MPI_Send 之前进行序列化。

MPI 向开发者公开了通信功能，并提供了大量的接口来满足它。但是为什么 MPI 不提供序列化呢？

我知道序列化不属于 MPI，不知道序列化技术还有什么值得优化的地方吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:19:16.887

MPI 是一种独立于平台的消息传递标准，它的操作越简单，它的可移植性就越高。由于这种简单性，大多数 MPI 库都支持异构架构——您可以在具有不同内部数据表示甚至不同 ABI 的 16、32 和 64 位机器的混合集群上运行应用程序。

C++ 对象的序列化既不简单也不可移植。您始终可以使用您最喜欢的 C++ 序列化库并使用 MPI 消息交换它生成的 blob。MPI 中甚至还有一种特殊类型可以按原样发送二进制数据 - `MPI_BYTE`。

此外，即将发布的 MPI 标准版本 3.0 中将完全删除对 C++ 的支持，并鼓励 C++ 程序员改用 C 函数。

# mysql - SELECT 语句的 WHERE 子句中列名的通配符？

> ID：10602888
> 
> 赞同：0
> 
> 时间：2012-05-15T14:25:20.503
> 
> 标签：mysql, sql, database, select, wildcard

是否可以在 WHERE 子句中指定的列名中使用通配符？我想选择一些东西，但前提是一堆列匹配某个值（在这种情况下为 1）。例如：

```
SELECT COUNT(id) FROM records WHERE *_check = 1 
```

我有一堆以 _check 作为后缀的列，使用与上述代码类似的东西会非常好（这不起作用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:32:38.080

您可以查询 information_schema 以获取一个查询中的列

```
SELECT column_name FROM information_schema.columns
WHERE table_schema = 'foo'
 AND table_name = 'bar'
 AND column_name LIKE '%_check' 
```

并根据结果构建您的查询（伪代码）

```
query = "SELECT COUNT(id) FROM records WHERE ";

foreach columName in columnNames
   query = query + " " + column_name + " = 1 OR "
next

query = TrimLastOr(query); 
```

但我不建议这样做，因为 mysql information_schema 查询的性能很差，因为它们从磁盘读取每个查询。

更好：使用返回的视图

```
SELECT id FROM records WHERE col1_check=1 or col2_check=2 ... 
```

因此您可以在多个位置的逻辑中使用它，并且只需要在添加另一`_check`列时更新视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:28:51.937

不。

如果你想做这样的事情，你需要动态 SQL 的等价物。

# visual-studio - Visual Studio 使用 XSLT 自动生成 XML 文档

> ID：10602889
> 
> 赞同：0
> 
> 时间：2012-05-15T14:25:23.033
> 
> 标签：visual-studio, xslt, documentation, xmldocument

我将 VS.Net 设置为在构建时自动生成带有 XMLDoc 注释的 XML。这是通过项目的构建属性完成的。我还有一个 XSLT 来设置 XML 样式。

有没有办法让VS在生成时将xml样式表附加到文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:11:32.060

您应该能够使用 System.IO 对象。尤其是 StreamReader 和 StreamWriter，但也可能是 File（它有一个 .Append 函数）。

# git - 是更好地使用 git fetch upstream 还是我可以单独克隆父（别人的）repo？

> ID：10602891
> 
> 赞同：0
> 
> 时间：2012-05-15T14:25:26.927
> 
> 标签：git, github

我分叉了一个我必须处理的 git hub 项目，git hub fetch upstream 将提供什么优势，因为我可以通过在单独的文件夹中更新它来跟踪该项目，我觉得这是更简单的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:46:37.270

整理我之前的回答：

如果您是回购所有者的朋友或有合适的工作关系（或他们积极鼓励），您通常只会克隆回购，这样当您推迟工作的新分支时不会引起任何不安。这样可以避免分支膨胀问题。

当您对这项工作感兴趣并想尝试一些东西而无需先获得“许可”时，您往往会分叉一个 repo，这是 DVCS 系统的好处之一。fork 过程还（自动）为您在 github 服务器上的本地工作提供了一个存档位置。

这将取决于您的 [项目] 工作流程样式，例如[git-scm.com/book/en/Distributed-Git-Distributed-Workflows](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows)或[nvie.com/posts/a-successful-git-branching-model](http://nvie.com/posts/a-successful-git-branching-model/)。

使用分叉可以让您公开准备一个不错的分支（提交系列），并保存所有 WIP（正在进行的工作）分支的副本。作为个人分叉，人们并不期望所有分支都被打磨——看看你感兴趣的回购已经做了多少分叉，并查看他们的 WIP 以查看模式（或反模式；- )

# service - NT 服务 BadImageFormat，但在表单应用程序下工作

> ID：10602893
> 
> 赞同：0
> 
> 时间：2012-05-15T14:25:32.003
> 
> 标签：service, x86, badimageformatexception

我们有一个遗留表单应用程序，它运行一堆 32 位 C++ 代码以及托管代码，其中大部分是 x86 构建的（但不是全部）。表单应用程序工作正常。我们正在将功能/代码移植到 Windows 服务中。该服务在尝试执行特定代码路径时抛出错误的图像格式异常。

我们无权访问所有托管代码构建。

关于如何解决这个问题的任何建议。

提前感谢账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:58:23.190

解决了这个问题。

服务端有两个问题。实际的服务可执行文件是构建的 AnyCPU 。此外，在构建服务时，我总是将主代码放在 dll 中，以允许控制台/表单应用程序对其进行测试。该 dll 还内置 AnyCPU。正在运行的表单应用程序是 x86 构建的。

# xaml - Windows 8 中的 ScrollViewer：始终显示垂直滚动条

> ID：10602896
> 
> 赞同：4
> 
> 时间：2012-05-15T14:25:49.320
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

如何总是在滚动查看器中显示垂直滚动条？

它会在几秒钟内消失，但我想让滚动在滚动可用时一直可见

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:57:30.037

我认为 Windows 8 Consumer Preview 中的控件可能存在错误，因为以下内容应该正常工作：

```
<ScrollViewer
    Style="{StaticResource VerticalScrollViewerStyle}"
    VerticalScrollBarVisibility="Visible"
    Template="{StaticResource ScrollViewerControlTemplate1}"> 
```

作为一种解决方法，您可以修改 ScrollViewer 的模板：

```
<ScrollViewer
    Style="{StaticResource VerticalScrollViewerStyle}"
    Template="{StaticResource ScrollViewerControlTemplate1}"> 
```

...在一些 ResourceDictionary 的其他地方 - 删除了“NoIndicator”VisualState 的修改后的标准 ScrollViewer 模板。

```
 <ControlTemplate
        x:Key="ScrollViewerControlTemplate1"
        TargetType="ScrollViewer">
        <Border
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup
                    x:Name="ScrollingIndicatorStates">
                    <VisualState
                        x:Name="TouchIndicator">
                        <Storyboard>
                            <FadeOutThemeAnimation
                                TargetName="ScrollBarSeparator" />
                            <ObjectAnimationUsingKeyFrames
                                Storyboard.TargetName="VerticalScrollBar"
                                Storyboard.TargetProperty="IndicatorMode"
                                Duration="0">
                                <DiscreteObjectKeyFrame
                                    KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>TouchIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames
                                Storyboard.TargetName="HorizontalScrollBar"
                                Storyboard.TargetProperty="IndicatorMode"
                                Duration="0">
                                <DiscreteObjectKeyFrame
                                    KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>TouchIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState
                        x:Name="MouseIndicator">
                        <Storyboard>
                            <FadeInThemeAnimation
                                TargetName="ScrollBarSeparator" />
                            <ObjectAnimationUsingKeyFrames
                                Storyboard.TargetName="VerticalScrollBar"
                                Storyboard.TargetProperty="IndicatorMode"
                                Duration="0">
                                <DiscreteObjectKeyFrame
                                    KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>MouseIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames
                                Storyboard.TargetName="HorizontalScrollBar"
                                Storyboard.TargetProperty="IndicatorMode"
                                Duration="0">
                                <DiscreteObjectKeyFrame
                                    KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>MouseIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Grid
                Background="{TemplateBinding Background}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition
                        Width="*" />
                    <ColumnDefinition
                        Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition
                        Height="*" />
                    <RowDefinition
                        Height="Auto" />
                </Grid.RowDefinitions>
                <ScrollContentPresenter
                    x:Name="ScrollContentPresenter"
                    Grid.RowSpan="2"
                    Grid.ColumnSpan="2"
                    ContentTemplate="{TemplateBinding ContentTemplate}"
                    Margin="{TemplateBinding Padding}" />
                <ScrollBar
                    x:Name="VerticalScrollBar"
                    Grid.Column="1"
                    IsTabStop="False"
                    Maximum="{TemplateBinding ScrollableHeight}"
                    Margin="1,0,0,0"
                    Orientation="Vertical"
                    Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                    Value="{TemplateBinding VerticalOffset}"
                    ViewportSize="{TemplateBinding ViewportHeight}"
                    HorizontalAlignment="Right" />
                <ScrollBar
                    x:Name="HorizontalScrollBar"
                    IsTabStop="False"
                    Maximum="{TemplateBinding ScrollableWidth}"
                    Margin="0,1,0,0"
                    Orientation="Horizontal"
                    Grid.Row="1"
                    Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                    Value="{TemplateBinding HorizontalOffset}"
                    ViewportSize="{TemplateBinding ViewportWidth}" />
                <Rectangle
                    x:Name="ScrollBarSeparator"
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="1,1,0,0"
                    StrokeThickness="1"
                    Fill="{StaticResource ScrollBarTrackBrush}"
                    Stroke="{StaticResource ScrollBarTrackBorderBrush}" />
            </Grid>
        </Border>
    </ControlTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:11:01.170

在 Blend 中：您可以通过编辑 VerticalScrollBar 的模板使其可见，该模板是 ScrollViewers 模板的一部分，它本身是 ListBox 模板的一部分。

将**VerticalScrollBar 的 Visibility 设置为 Visible**，将其**不透明度设置为 100%**然后它将永久可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T22:04:45.970

我只用 HTML/CSS/JavaScript 开发了商店应用程序，我在那里遇到了同样的问题。

即使将光标移开，我也希望滚动条始终显示。

我在 CSS 中找到了这个解决方案：

```
div#overflowableDiv{
  overflow-y: auto;
  -ms-overflow-style: scrollbar;
} 
```

**请参阅：http:** [//msdn.microsoft.com/en-us/library/windows/apps/hh441298.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh441298.aspx)

# java - java.lang.ClassNotFoundException: com.mysql.jdbc.Driver (在 jre 的库中)

> ID：10602899
> 
> 赞同：2
> 
> 时间：2012-05-15T14:26:04.937
> 
> 标签：java, mysql, jdbc, driver

我已将 mysql-connector-java-5.1.18-bin.jar 添加到 jre 和 jdk 库中。这是：

```
C:\Windows\system32>javap java.io.Bits
    Compiled from "Bits.java"
    class java.io.Bits extends java.lang.Object{
        java.io.Bits();
        static boolean getBoolean(byte[], int);
        static char getChar(byte[], int);
        static short getShort(byte[], int);
        static int getInt(byte[], int);
        static float getFloat(byte[], int);
        static long getLong(byte[], int);
        static double getDouble(byte[], int);
        static void putBoolean(byte[], int, boolean);
        static void putChar(byte[], int, char);
        static void putShort(byte[], int, short);
        static void putInt(byte[], int, int);
        static void putFloat(byte[], int, float);
        static void putLong(byte[], int, long);
        static void putDouble(byte[], int, double);
    }

    C:\Windows\system32>javap com.mysql.jdbc.Driver
    ERROR:Could not find com.mysql.jdbc.Driver 
```

但是当我显示同一个文件的直接类路径时，没关系。

```
C:\Windows\system32>javap -classpath "B:\Java\Tools\mysql-connector-java-5.1.18\
mysql-connector-java-5.1.18\mysql-connector-java-5.1.18-bin.jar" com.mysql.jdbc.
Driver
Compiled from "Driver.java"
public class com.mysql.jdbc.Driver extends com.mysql.jdbc.NonRegisteringDriver i
mplements java.sql.Driver{
    public com.mysql.jdbc.Driver()       throws java.sql.SQLException;
    static {};
} 
```

当我使用[Thilo 的答案](https://stackoverflow.com/questions/1010919/adding-files-to-java-classpath-at-runtime)动态加载驱动程序时，问题就开始了。没有 IOException。但是在字符串上`Class.forName(driver).newInstance()`我有`ClassNotFoundException`例外。将 jar 添加到 jre 后，没有任何变化。那有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:31:05.250

*将 jar 添加到 jre 之后*到底是什么意思？我担心`mysql-connector-java-5.1.18-bin.jar`没有正确添加到类路径中。仅当该类`ClassNotFoundException`不存在于可搜索的类路径中时才抛出。JDK 附带的所有 jar 都是引导类，可供 java 加载它们。然而，所有第三方类都需要在可搜索的系统或应用程序级别的类路径中设置，以便 java 可以加载指定的类参数。

在您的命令提示符下尝试以下命令并执行您的 java 类。

```
set mysqljar="absolute-path-to\mysql-connector-java-5.1.18-bin.jar"  
set classpath=%classpath%;.;%mysqljar% 
```

只要这个 jar 在可搜索的类路径中可用，所有类加载器都可以从 jar 中找到并加载类。尝试此更改并运行 Thilo 的示例，它应该可以工作。

还可以在[***此处***](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/migration.html#clspath)[**阅读有关命令行的类路径的更多**](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/migration.html#clspath)*信息。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:35:03.903

如果你从命令行编译你的代码，请要求`javac`使用 mysql driver jar using `-cp`option。像下面这样的东西应该工作：

```
C:\MyProject>javac -cp "B:\Java\Tools\mysql-connector-java-5.1.18\mysql-connector-java-5.1.18\mysql-connector-java-5.1.18-bin.jar" MyClass.java 
```*

# linux - 在 unix 中为 unix-layman 运行带有解释器的 r 脚本或命令

> ID：10602900
> 
> 赞同：13
> 
> 时间：2012-05-15T14:26:05.587
> 
> 标签：linux, r, shell, unix

我是 unix 的外行，到目前为止我在 Windows 中使用 R。例如，我在我的 R 会话（在 R gui 中）中键入以下内容。

```
# this is a my funny example script 
X <- 1:10
Y <- 21:30
plot(X, Y)
myfun <- function (x){
              x1 <- x^0.2
              return (x1)
             }
myfun(X) 
```

在两种情况下，如何在 unix shell 中实现这一点 -

（1）通过interpeter直接在命令行中（2）创建脚本并运行脚本。

考虑到我是 unix 的外行，请提供步骤。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-15T15:16:55.533

假设您将脚本保存在一个名为 的简单文本文件中，您可以通过在提示符`so.R`下键入来在 Linux/Unix 下运行它。`R`一旦进入 R 输入

```
 source('so.R') 
```

在 R 环境中执行脚本（假设 so.R 文件与您发出此命令时位于同一目录中）。

要从 Linux/Unix 命令行运行脚本，请使用以下命令：

```
 R CMD BATCH so.R 
```

请注意，当我在 R 中运行脚本时，我得到了要显示的图，但是从 Linux 命令行它没有显示。我怀疑它会很快显示然后消失，因此您必须查找一个 R 命令以使其在显示绘图后暂停。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T22:54:58.567

下面的示例显示了在 shell 脚本中运行 R 代码的两种方法。如果脚本通过 source() 函数加载到交互式 R 会话，这两个示例也将定义函数而不执行它们。

第一个示例允许您像向任何其他 shell 脚本一样提供参数，但不会将额外的 R 选项传递给 R（因为 Rscript 将“--args”作为参数之一提供给 R）。

第二个示例允许您提供额外的 R 选项，但会生成（无害的）警告消息，除非您将“--args”作为脚本参数之一。除非您有特殊要求，否则最好避免使用此版本。

原型-Rscript.r

```
#!/usr/bin/env Rscript
# Prototype R script for use at command line in Linux, Mac OS X, UNIX

# References:
#   Manual "A Introduction to R", available via help.start() from the R Console
#   Appendix "B.1 Invoking R from the command line" in "A Inroduction to R",

showArguments <- function(argv)  {
    print(argv)
    0
}

if ( ! interactive() )  {
    # set some error return codes
    SCRIPT_ERROR <- 10                      # see documentation for quit()
    SCRIPT_ARG_ERROR <- SCRIPT_ERROR + 1

    # Define ARGV as script path concatenated to script arguments
    ARGV <- commandArgs(FALSE)          # start with all the arguments given to R
    scriptPath <- sub("^--file=", "", grep("^--file=", ARGV, value=TRUE)) [[1]]
    ARGV <- c(scriptPath, commandArgs(TRUE))

    if (length(ARGV) < 2)   {
        cat(file=stderr(), sep="",
            "Usage: ", ARGV[[1]], " [ options ] item ...\n",
            "       Do something with item\n",
            "       See script for details\n")
        quit(save="no", status=SCRIPT_ARG_ERROR)
    }
    quit(save="no", status=showArguments(ARGV))
} 
```

原型-shellscript.r

```
#!/usr/bin/env R --slave --vanilla --quiet -f
# Prototype R script for use at command line in Linux, Mac OS X, UNIX

# References:
#   Manual "A Introduction to R", available via help.start() from the R Console
#   Appendix "B.1 Invoking R from the command line" in "A Inroduction to R",

showArguments <- function(argv)  {
    print(argv)
    0
}

if ( ! interactive() )  {
    # set some error return codes
    SCRIPT_ERROR <- 10                      # see documentation for quit()
    SCRIPT_ARG_ERROR <- SCRIPT_ERROR + 1

    # Define ARGV as the arguments given to this script (after argument “-f”)
    ARGV <- commandArgs(FALSE)          # start with all the arguments given to R
    ARGV <- ARGV[(grep("-f", ARGV) [[1]] + 1):length(ARGV)]
    if ( any(grepl("--args", ARGV) ))   {   # remove arguments intended only for R
        ARGV <- c(ARGV[[1]], commandArgs(TRUE))
    }

    if (length(ARGV) < 2)   {
        cat(file=stderr(), sep="",
            "Usage: ", ARGV[[1]], " [ R_options ] --args [ options ] item ...\n",
            "       Do something with item\n",
            "       See script for details\n")
        quit(save="no", status=SCRIPT_ARG_ERROR)
    }
    quit(save="no", status=showArguments(ARGV))
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T00:19:10.247

我从您提出问题的方式猜测您可能通过 SSH 连接到一台 linux 机器？或者您在常用的笔记本电脑/PC 上安装了 Ubuntu。

假设是第二种情况：打开终端并输入`sudo apt-get install r-base`. 然后键入`R`。然后输入

```
X <- 1:10
Y <- 21:30
plot(X, Y)
myfun <- function (x){
              x1 <- x^0.2
              return (x1)
             }
myfun(X) 
```

由于您的问题是关于`unix`vs`linux`而不是`R`，您也可以尝试[http://unix.stackexchange.com](http://unix.stackexchange.com)。关于 linux 和 unix 之间的区别有很多话要说，但您可能需要知道的是：[下载 Ubuntu](http://www.ubuntu.com/download/desktop)，将其刻录到光盘上，然后使用 CD 驱动器中的光盘重新启动计算机。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-30T18:35:14.870

如果您的程序要处理单个数据集，那么 simple-r 可能是解决方案：

[http://code.google.com/p/simple-r/](http://code.google.com/p/simple-r/)

它专为简单的统计分析而设计，作为 Linux 命令行的一部分。例如，如果想绘制一些数据，'r -p data.txt' 就可以了；获得相关系数：'r cor data.txt'就足够了。

# jquery - jQuery 和验证插件

> ID：10602903
> 
> 赞同：1
> 
> 时间：2012-05-15T14:26:15.833
> 
> 标签：jquery, jquery-validate

我有一个下拉菜单`answerYesNo_1`。如果用户选择“是”选项，我想强制用户在`answerYesNoText_1`字段中输入有效的货币值。我如何链接这两个规则？我在这里有点麻烦。下面的代码在选择是选项时进行验证。但是，我可以输入像“asdad”这样的值，它会通过。好像我想说，是的，它是必需的，是的，去做测试。

```
rules: {
            answerYesNoText_1: { required : { depends:function(){ if ($('#answerYesNo_1').val() == 'yes') {  
                if ( /^\$?[0-9][0-9\,]*(\.\d{1,2})?$|^\$?[\.]([\d][\d]?)$/.test($('#answerYesNoText_1').val()) != true ) {          
                    return true;}  }  } 
                                            }
                                }
    }, 
```

这是我的领域：

```
 <select name="answerYesNo_1" id="answerYesNo_1" style="width:60px; font-size:11px;">
     <option value=""></option>
     <option value="yes">Yes</option>
     <option value="no">No</option>
 </select>
 <input type="text" name="answerYesNoText_1" id="answerYesNoText_1" class="answers" value="" maxlength="60" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:49:05.623

一种方法是使用掩码强制用户输入有效的货币数字。我一直在使用 maskmoney 并且效果很好。

[https://github.com/plentz/jquery-maskmoney](https://github.com/plentz/jquery-maskmoney)

```
if($('#answerYesNo_1 option:selected').val() == 'yes'){
   $("#answerYesNoText_1").maskMoney();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:15:16.167

我要做的是在选择“ Yes”时将OnChange事件处理程序添加到Select元素中，该元素将添加验证类，并在没有时删除该类。您可能每次都必须重新初始化表单验证对象，但至少验证会以这种方式“链接”起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:28:36.007

试试这个来检查输入是否是一个数字，而不是你去那里的那个令人难以置信的过于复杂的正则表达式：

```
if (!isNaN(parseFloat($('#answerYesNoText_1').val()))) {
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T03:02:15.203

我认为最好将`required`有效的货币规则分开，例如：

```
rules: {
    answerYesNoText_1: {
        required: function(){
            if ($('#answerYesNo_1').val() == 'yes'){
                return true;
            }
            return false;
        }
    }
} 
```

`$.validator.addMethod`并使用给定您的正则表达式正确的货币值检查添加验证规则。

# c# - 字符串中的 ToDecimal 未返回预期结果

> ID：10602904
> 
> 赞同：-3
> 
> 时间：2012-05-15T14:26:23.563
> 
> 标签：c#, vb.net, type-conversion, cultureinfo

我有以下值`48.81`，它来自数据库的字符串，我需要将其转换为十进制，我正在使用：

```
Dim Seconds As Decimal = Convert.ToDecimal((Coordinate.Substring(4, 5)), CultureInfo.InvariantCulture) 
```

我正在接收`4881D`，我需要`48,81`

有任何想法吗？我以为`CultureInfo.InvariantCulture`会帮我解决这个问题

**编辑**

坐标值为`675900.244`。我像这样“拆分”它：

```
Dim Degress As Integer = Coordinate.Substring(0, 2),
Dim Minutes As Integer = Coordinate.Substring(2, 2),
Dim Seconds As Decimal = Convert.ToDecimal((Coordinate.Substring(4, 5)), CultureInfo.InvariantCulture),
Dim Position As Enumerations.EnumCoordinatesPosition = Coordinate.Substring(9, 1) 
```

**编辑**

![显示错误](../Images/4ccf33a2d3ba7355cec1cbb48b10fc8d.png)

**编辑**

![显示坐标](../Images/4e02b4a66451d5530ed68b482a98727b.png)

**编辑** 这是数据库中坐标的值

![显示 DB 中的坐标值](../Images/4e72def02ea5182ec8c9e02a24404163.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:10:35.630

问题在于变量`databaseCoordinate`，它包含逗号而不是点。InvariantCulture 使用逗号分隔数字组，并使用点作为十进制符号。要查看这一点，请执行以下代码：

```
//outputs '.'
Console.WriteLine(CultureInfo.InvariantCulture.NumberFormat.NumberDecimalSeparator);
//outputs ',' 
Console.WriteLine(CultureInfo.InvariantCulture.NumberFormat.NumberGroupSeparator); 
```

你可以做些什么：

1.  在解析之前用点替换逗号 - 然后您的所有代码都将按预期工作。
2.  `Convert.ToDecimal`为这样的方法指定小数分隔符：

    ```
    decimal Seconds = Convert.ToDecimal((Coordinate.Substring(4, 5)), new NumberFormatInfo { NumberDecimalSeparator = "," }); 
    ```

3.  为所有带有坐标的 DB 条目编写更新脚本 DB，以使用点作为十进制符号。

**示例**- 此代码给出了您期望的结果：

```
string Coordinate = "100948.811"; //Note the dot instead of comma
int Degress = Convert.ToInt32(Coordinate.Substring(0, 2)); //10
int Minutes = Convert.ToInt32(Coordinate.Substring(2, 2)); //9
decimal Seconds = Convert.ToDecimal((Coordinate.Substring(4, 5)), CultureInfo.InvariantCulture); //48.81 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T14:35:24.307

从数据库接收到的值存在问题；你的方法也有问题。

首先，如果您期望一个十进制值，则将其作为十进制存储在数据库中。

其次，您正在尝试解析一个至少应包含 9 个字符的字符串。你所拥有的只有 5 个字符。

`(Coordinate.Substring(4, 5))`在这里，您声明您期望至少 9 个字符；你所拥有的只有 5 个字符。

# c# - OOP 和 C# 中密封抽象类的真正用途是什么？

> ID：10602908
> 
> 赞同：3
> 
> 时间：2012-05-15T14:26:53.527
> 
> 标签：c#, oop

我得到了密封抽象类的示例代码。我只是知道密封抽象类的用途。必须扩展的抽象和密封关键字防止扩展类。所以当类被密封和抽象时，它可以被扩展和实例化。那么密封抽象类的真正用途是什么？

有人告诉我这将解决静态类的目的。如果可能，请在需要将类设计为密封抽象类时，用少量示例代码和场景讨论密封抽象类的使用。

```
sealed abstract class BaseBook : IBook
{
private string _title;

public virtual string Author
{
    get
    {
        Console.WriteLine("Base book GET!");
        return _title;
    }
    set
    {
        Console.WriteLine("Base book SET!");
        _title = value;
    }
}

public string Title
{
    get;
    set;
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T14:30:43.557

此代码不会编译。一个类不能是抽象的和密封的。这没有任何意义：

[`CS0418 - 'BaseBook': an abstract class cannot be sealed or static`](http://msdn.microsoft.com/en-us/library/32twkh69.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T14:30:21.343

MSDN：`It is not permitted to use the abstract modifier with a sealed class.`

链接：http: [//msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx)

希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-15T14:30:28.830

C# 不允许您拥有一个既密封又抽象的类。它不会编译。对于静态类（只有静态方法的类），将其标记为静态以防止意外实例化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T14:31:27.503

根本没有用，因为它不存在。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T14:32:03.527

首先，你不能`sealed abstract`在 C# 中声明一个类，这是非法的

> 所以当类被密封和抽象时，它可以被扩展也可以被实例化

不，相反；它既不能被继承也不能被实例化......

# r - 将回归模型与 R 进行比较

> ID：10602915
> 
> 赞同：4
> 
> 时间：2012-05-15T14:27:24.530
> 
> 标签：r, stata

**R**中是否有可用的工具来生成可发布的回归表？我正在写一篇课程论文，我需要在其中比较几个回归模型，如果我可以让它们嵌套在像[这样的一个](http://repec.org/bocode/e/estout/advanced.html#advanced501)表中，我会很高兴，来自`estout`Stata 包。

我已经检查过[`xtable`](http://cran.r-project.org/web/packages/xtable/vignettes/xtableGallery.pdf)，但无法达到相同的结果。任何提示将不胜感激。

这是我的想法：

![多重嵌套回归](../Images/f958cbee362e7fc97069f218e40f7573.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:49:05.320

您可能想要`mtable`“memisc”包中的功能。它具有关联的 LaTeX 输出参数：

```
==========================================================================
                                              Model 1   Model 2   Model 3 
--------------------------------------------------------------------------
Constant                                     30.628***  6.360*** 28.566***
                                             (7.409)   (1.252)   (7.355)  
Percentage of population under 15            -0.471**            -0.461** 
                                             (0.147)             (0.145)  
Percentage of population over 75             -1.934              -1.691   
                                             (1.041)             (1.084)  
Real per-capita disposable income                       0.001    -0.000   
                                                       (0.001)   (0.001)  
Growth rate of real per-capita disp. income             0.529*    0.410*  
                                                       (0.210)   (0.196)  
--------------------------------------------------------------------------
sigma                                          3.931     4.189     3.803  
R-squared                                      0.262     0.162     0.338  
F                                              8.332     4.528     5.756  
p                                              0.001     0.016     0.001  
N                                             50        50        50      
========================================================================== 
```

这是你得到的 LaTeX 代码：

```
texfile123 <- "mtable123.tex"
write.mtable(mtable123,forLaTeX=TRUE,file=texfile123)
file.show(texfile123)
#------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Calls:
% Model 1:  lm(formula = sr ~ pop15 + pop75, data = LifeCycleSavings) 
% Model 2:  lm(formula = sr ~ dpi + ddpi, data = LifeCycleSavings) 
% Model 3:  lm(formula = sr ~ pop15 + pop75 + dpi + ddpi, data = LifeCycleSavings) 
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tabular}{lcD{.}{.}{7}cD{.}{.}{7}cD{.}{.}{7}}
\toprule
&&\multicolumn{1}{c}{Model 1} && \multicolumn{1}{c}{Model 2} && \multicolumn{1}{c}{Model 3}\\
\midrule
Constant                                    &  & 30.628^{***} &&  6.360^{***} && 28.566^{***}\\
                                            &  &  (7.409)     &&  (1.252)     &&  (7.355)    \\
Percentage of population under 15           &  & -0.471^{**}  &&              && -0.461^{**} \\
                                            &  &  (0.147)     &&              &&  (0.145)    \\
Percentage of population over 75            &  &  -1.934      &&              &&  -1.691     \\
                                            &  &  (1.041)     &&              &&  (1.084)    \\
Real per-capita disposable income           &  &              &&   0.001      &&  -0.000     \\
                                            &  &              &&  (0.001)     &&  (0.001)    \\
Growth rate of real per-capita disp. income &  &              &&  0.529^{*}   &&  0.410^{*}  \\
                                            &  &              &&  (0.210)     &&  (0.196)    \\
\midrule
sigma                                       &  &     3.931    &&     4.189    &&     3.803   \\
R-squared                                   &  &     0.262    &&     0.162    &&     0.338   \\
F                                           &  &     8.332    &&     4.528    &&     5.756   \\
p                                           &  &     0.001    &&     0.016    &&     0.001   \\
N                                           &  &    50        &&    50        &&    50       \\
\bottomrule
\end{tabular} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T18:02:37.623

R wikibook 有一些关于 R 中生产质量输出的良好资源。

我认为 wikibook 中列出的 Paul Johnson 的这个功能正是您正在寻找的：

[http://pj.freefaculty.org/R/WorkingExamples/outreg-worked.R](http://pj.freefaculty.org/R/WorkingExamples/outreg-worked.R)

我编辑了该函数以供自己使用，以使用 booktabs 格式并允许具有额外属性的模型：

[http://chandlerlutz.com/R/outregBkTabs.r](http://chandlerlutz.com/R/outregBkTabs.r)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:09:17.860

`xtable`可以做到这一点，但它有点黑客。

取两个线性模型，命名为 lm.x 和 lm.y。

如果您使用以下代码：

`myregtables <- rbind(xtable(summary(lm.x)), xtable(summary(lm.y)))`

`xtable`然后将生成一个包含两个回归模型的表。如果您`\hline`在 LaTeX 中添加一个（或两个），那么它应该看起来不错。这两个模型仍然只有一个标签和标题。正如我所说，它有点像一个 hacky 解决方案。

# jquery - jQuery + 滑块插件：具有可变宽度图像的固定宽度连续滑块

> ID：10602917
> 
> 赞同：0
> 
> 时间：2012-05-15T14:27:28.633
> 
> 标签：jquery, plugins, loops, slideshow, continuous

我有一组图像，所有图像的高度相同但宽度不同。我需要保持固定宽度，并且我需要图像无限循环地向左滑动。我还需要图像来填充容器宽度，以便显示部分图像。滚动将分步进行（例如 200 像素）并以设定的时间间隔进行。

我浏览了很多 jQuery 幻灯片插件，包括 Cycle、NivoSlider、EasySlider 和其他六个。但我所见过的似乎都没有让我确切地知道客户需要它做什么。我不需要可点击的导航或居中。只是一个连续的幻灯片，以设定的宽度步长和设定的间隔滚动。

我在想，就连续循环部分而言，我可以等到最左边的图像消失。最初，我尝试只使用`append()`，但是当最左边的移动到最后时，幻灯片会跳动。于是我就试着把它`append()`一个`clone()`到最后`$('#slides').children()`，然后`remove()`从头开始`$('#slides')`。

到目前为止，我有：

```
<div id="outer" style="width:300px;">
    <div id="slides">
        <img src="/images/slide1.jpg" alt="" style="height:150px;width:200px;" />
        <img src="/images/slide2.jpg" alt="" style="height:200px;width:200px;" />
        <img src="/images/slide3.jpg" alt="" style="height:150px;width:200px;" />
        <img src="/images/slide4.jpg" alt="" style="height:300px;width:200px;" />
    </div>
</div> 
```

和

```
/* some code ideas taken from easySlider */
(function($){
    $.fn.stepSlider = function() {
        var slideInterval;

        this.each(function() {
            // this will be the width of $('#slides')
            var width = 0;
            // shortcut I saw in easySlider code; liked it, used it.
            var o = $(this);
            // set width of $('#slides') based on total width of child images
            o.children().each(function(){width+=$(this).width();});

            function scroll() {
                o.children().each(
                    function(index){
                        // slide each of the children to the left by 150px
                        $(this).animate({'left':'-=150'}, 2000);
                    }
                );

                // after children have been animated() left, check to see
                // if the left-most child has gone out of sight
                if (o.children(':first-child').position().left + o.children(':first-child').width() < 0) {
                    // cloning the first child now
                    var el = o.children(':first-child').clone(true);
                    // removing the first child
                    o .children(':first-child').remove();
                    // trying to reset the css('left') of all of the children now that the first
                    // element is supposed to be gone
                    o.children().css('left', o.children(':first-child').position().left + o.children(':first-child').width());
                    // appending the clone()
                    o.append(el);
                }
            }

            slideInterval = setInterval(function(){scroll();}, 2000);
        });
    }
})(jQuery); 
```

滑动工作。但是将第一张图像移到最后会导致幻灯片跳动。然后事情就开始崩溃到完全停止的地步。

非常感谢任何见解。不，我对 jQuery 并不完全陌生，但是是的：这是我第一次尝试插件。

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:34:57.080

我建议您可以使用 scrollTo 插件（或自己编写）。以下内容会将一个区域滚动 300 像素，因此无论您在其中放置什么都没关系。您必须管理该区域的位置和宽度，以便在最后停止或根据需要进行操作。

[滚动到： http](http://demos.flesler.com/jquery/scrollTo/) ://demos.flesler.com/jquery/scrollTo/

JSFiddle：http: [//jsfiddle.net/YZ9vA/2/](http://jsfiddle.net/YZ9vA/2/)

```
 $(document).ready(function(){
    var areaWidth = 0, x=0;        
    $('#slideshow img').each(function() {
        areaWidth = areaWidth + $(this).width();
    });
    $('#slideshow').width(areaWidth);

    function ScrollMe() {
     x += 300;
     $('#sliders').scrollTo({top:0, left:x},800);

     }

   setInterval(ScrollMe,1000);

});​ 
```

原答案：

我对您的建议是使用将永远重复的 jquery 循环。不是循环图像，而是循环 div，您可以将这些宽度设置为 200 像素，并且可以根据需要放置内部的图像（居中，宽度 100% 等）。

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

```
#slides, #slides div {width:200px;height:300px}
#slides img {width:100%;height:100%}  

<div id="slides">
    <div><img src="/images/slide1.jpg" alt="" style="" /></div>
    <div><img src="/images/slide2.jpg" alt="" style="" /></div>
    <div><img src="/images/slide3.jpg" alt="" style="" /></div>
    <div><img src="/images/slide4.jpg" alt="" style="height:300px;width:200px;" /></div>
<!-- I left the last inline style on, you can use that to override or use css externally -->
</div>

$('#slides').cycle({fx:'scrollHorz', 
                   continuous: 1, 
                   easeIn: 'linear',
                   easeOut: 'linear'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:43:31.730

所以感谢所有 lucuma 的帮助，我有一些工作。

**CSS：**

```
<style type="text/css">
    #outer  {height: 250px; width: 760px; overflow:hidden;}
    #mid    {height: 250px; width: 760px; overflow:hidden;}
    #slides {height: 250px; width: auto; overflow:hidden;}
    #slides img {float: left; height: 250px;} /* height specified just for clarity */
</style> 
```

**HTML：**

我不得不将#slides div 包装在另外两个 div 中，而不是一个。只有一个包装器，scrollTo 插件最终将 div 设置为 100% 宽度，而不是遵守我的 760px 约束。由于时间关系，我没有进一步研究这个。我刚刚添加了额外的 div 并称之为一天。

```
<div id="outer">
    <div id="mid">
        <div id="slides">
            <img src="images/image1.jpg" alt="" style="width:760px;" />
            <img src="images/image2.jpg" alt="" style="width:529px;" />
            <img src="images/image3.jpg" alt="" style="width:720px;" />
            <img src="images/iamge4.jpg" alt="" style="width:563px;" />
            <!-- my live version has 16 total images -->
        </div>
    </div>
</div> 
```

**JavaScript：**

```
<script type="text/javascript" src="scripts/jquery.scrollTo.min.js"></script>
<script type="text/javascript">
    $(function(){
        var areaWidth = 0, x = 0, lelements=$('#slides img').length * -1;

        /* This is the same essential functionality that I had in my original post
         * to set the width of the images container
         */
        function setWidth() {
            $('#slides img').each(function() {
                areaWidth = areaWidth + $(this).width();
            });
            $('#slides').width(areaWidth);
        }

        /* This is also essentially what I was doing before: checking
         * to see if an image is no longer viewable. It appends a clone
         * to the $('#slides'), but it differs from my original idea by
         * not trying to remove any :first element.
         * So $('#slides img').length will continue to increase as the
         * program runs. I was trying to avoid this, but in reality, it
         * probably doesn't matter a ton unless someone is watching the
         * same page for quite a long time.
         */
        function checkIt() {
            $('#slides img').slice(lelements).each(function() {
                if ($(this).position().left + $(this).width() < 0) {
                    $(this).clone().appendTo($('#slides'));
                }
            });
        }            

        /* This is where we use Flesler's scrollTo plugin to handle the motion.
         * I changed scrollTo({}, 3000) to scrollTo({}, {duration: 1000})
         * to slow the transition speed.
         */
        function scrollMe() {
            $('#outer').scrollTo({top:0, left:x}, {duration:1000});

            /* x += 300 was the first line in scrollMe(), but ended up
             * resulting in a 600px slide for the first transition,
             * so I moved it here. The first transition takes longer
             * to occur, but all other transitions are fine
             */
            x += 300;

            checkIt();
            setWidth();
        }

        setInterval(scrollMe, 3000);  
    });
</script> 
```

我必须做的另一件事是确保我的第一张幻灯片是全宽（760 像素）。如果小于这个值，那么第二个图像最初是不可见的，然后它会突然出现在容器的左侧空间中，*然后*会发生滚动。随后的所有图像都很好。显然，让第一张图像填满整个宽度会消除该伪影。

**再次感谢 lucuma - 你帮了很多忙！**

# java - 使用 Jcodemodel 生成导入

> ID：10602919
> 
> 赞同：2
> 
> 时间：2012-05-15T14:27:31.927
> 
> 标签：java, jakarta-ee, maven-3

我正在尝试使用 Jcodemodel 生成 java 代码。

1.  如何使用 Jcodemodel 生成所需的导入语句？

2.  类实现接口时如何自动生成接口方法的实现？

    例如：

    ```
    interface Act {

       void act();

    } 
    ```

    使用Jcodemodel，如何在实现类中生成接口方法？我是否需要使用 JMethod 编写方法？有没有其他方法可以自动生成实现方法？

3.  如何为类生成所需的导入？

请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T13:57:32.053

您应该使用该方法

```
JClass importedClass= codeModel.ref("example.com.impl.MyClass"); 
```

并确保`example.com.impl.MyClass`在您的类路径中。在生成的java源码中，`import example.com.impl.MyClass`会自动为你添加语句。

# php - 如何在 symfony2 的表单类中隐藏标签？

> ID：10602923
> 
> 赞同：52
> 
> 时间：2012-05-15T14:27:48.503
> 
> 标签：php, forms, class, symfony

我知道您可以在 twig 中拆分表单并选择不为特定字段呈现标签，但我不禁认为您必须能够从表单类中执行此操作。options 数组中的 'label' 键可让您将此值更改为您喜欢的任何值，但传递 false 或空字符串只会返回字段名称（参见下面的示例，其中 'roles' 呈现为标签）。

```
$builder
            ->add('roles', 'entity', array(
                'class' => 'Acme\UserBundle\Entity\Role',
                'label' => '' 
            ));

$builder
            ->add('roles', 'entity', array(
                'class' => 'Acme\UserBundle\Entity\Role',
                'label' => false 
            )); 
```

奇怪的是，通过一个空的空间（感觉很脏）似乎会渲染一个完全空的标签，即使在查看源代码时也没有空间。任何人都可以阐明最佳方法，甚至为什么空白空间似乎有效吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-03-19T02:22:20.907

从 Symfony 2.2 开始，您可以使用属性的值来避免`<label>`渲染：`false``label`

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('Name', null, array('label' => false))
    ;
} 
```

[资源](https://github.com/symfony/symfony/commit/36e455680549bfe9fa5b1282e95bb9b36f2220be#src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-07-17T14:58:38.793

> 将“视图”规范与“模型”分开

如果您按照接受的答案说：

```
$builder
        ->add('Name', null, array('label' => false))
    ; 
```

您的表单不可重复使用。特别是如果您的表单出现在多个位置（或将来可能出现）。

如果您不想呈现表单标签，最好在**Twig**中进行（假设您使用 Twig）。

而不是渲染`{{ form_row(form.name) }}`，而是单独渲染每个元素并排除`form_label`

前任。

```
{{ form_errors(form.name) }}
 {# {{ form_label(form.name) }} <-- just dont include this #} 
{{ form_widget(form.name) }} 
```

如果以后您希望在表单的一个实例中添加标签，而不是在另一个实例中，则只需添加`{{ form_label(form.name) }}`就足够了；改变`array('label' => true)`会在哪里打开标签

如果你用一个衬里渲染你的表单，`{{ form(form) }}`那么你应该看看[symfony 文档](http://symfony.com/doc/current/book/forms.html#form-rendering-template)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-05-19T17:30:32.870

只需将 {'label':false} 添加到您的 form_row()

```
{{ form_row(form.name, {'label':false}) }} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T16:50:20.410

要隐藏我的标签，我必须只渲染字段的小部件，而不是标签，例如

```
{{ form_widget(edit_form.event) }}
{{ form_rest(edit_form) }} 
```

带有空格的 ' ' 标签的问题在于，它仍然呈现存在并影响页面的 html 输入。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-15T23:11:44.193

我不太明白你的问题，但以显示标签名称的形式，我个人喜欢这样：

```
 $builder
        ->add('role', 'text') 
```

在我的树枝上：

```
 <tr>
        <td>{{ form_widget(form.role) }} </td>
        <td>{{ form_label(form.role, "Name of Label") }}</td>
    </tr>
    <tr>
        <td>{{ form_errors(form.role) }}</td>
    </tr> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-29T09:21:59.720

这应该可以工作（尽管它不是一个非常干净的解决方案）

```
$builder
        ->add('roles', 'entity', array(
            'class' => 'Acme\UserBundle\Entity\Role',
            'label' => ' ' 
        )); 
```

（注意刻度之间的空间）

# c++ - C++ - 从类外部访问类的私有成员

> ID：10602927
> 
> 赞同：3
> 
> 时间：2012-05-15T14:28:17.023
> 
> 标签：c++, private, scoping

我想知道是否有任何方法可以从班级外部访问班级的私人成员。我会解释我的问题。

我有一个 .hpp 文件，其中包含类的定义以及它的私有成员和公共函数（这是我想要导出的唯一一个）。在对应的 .cpp 中，我必须使用一些“支持”功能，该功能需要访问 .hpp 中定义的类的私有成员。

这是我的代码的一部分：

--- .hpp ---

```
namespace vision {
class CameraAcquisition {

    /* MEMBERS */
    CvSize size;
    CvCapture *device;
    CvScalar hsv_min,hsv_min2,hsv_max,hsv_max2;

    /* METHODS */

public:
    CameraAcquisition();
    ~CameraAcquisition();
    int findBall();
};
} 
```

--- .cpp ---

```
#include "CameraAcquisition.hpp"

using namespace vision;

IplImage *grabFrame() {
     // code here
}

IplImage *convertToHSV(IplImage *origin) {
// code here
}

IplImage *calculateThresholdedImage(IplImage *converted) {
// code here
} 
```

我需要的是让这三个函数访问CameraAcquisition 类的成员。有什么办法吗？任何建议将不胜感激。谢谢你们

编辑对不起，我在这里忘记了一条重要信息。在源文件中，findBall() 必须调用这些方法。我定义了这些方法以使代码更易于阅读。我不能在类定义中声明这些方法，因为我不想导出它们。如果我在“私有”块中声明它们一切正常，但可能不正确（我看不出提供带有私有方法的头文件的意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:29:31.130

如果创建了这些成员`private`并且您需要访问它们，那么您做错了什么，所以我的建议是**您不要**.

现在让我们严肃点——有一些方法——**免责声明：并非所有方法都是安全的、便携的或保证工作的：**

1)**预处理器滥用**

```
#define class struct
#define private public
#include "CameraAcquisition.h"
#undef class
#undef private 
```

2）**假课**

```
class MyCameraAcquisition {
public: //<--- public in your class
    /* MEMBERS */
    CvSize size;
    CvCapture *device;
    CvScalar hsv_min,hsv_min2,hsv_max,hsv_max2;

    /* METHODS */

public:
    CameraAcquisition();
    ~CameraAcquisition();
    int findBall();
};

CameraAcquisition prvt;
MyCameraAcquisition publ = (MyCameraAcquisition&) prvt; 
```

3) litb 发布的**模板滥用-** [http://bloglitb.blogspot.com/2010/07/access-to-private-members-thats-easy.html](http://bloglitb.blogspot.com/2010/07/access-to-private-members-thats-easy.html)

实际上，令人惊讶的是，这个是符合标准的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:30:37.253

您不应该**想要**访问对象的私有成员。考虑提供外部代码可以用来影响私有成员变量的公共 getter/setter 成员函数

或者，您可以使您的支持函数成为该类的成员，因此它可以自动访问私有成员。

如果你*真的*想访问私有成员，你可以使用`friend`关键字将另一个类或函数声明为当前类的朋友

```
class A
{
  int a; // private
  friend class B;
  friend void f(A*);
}; 
```

这里类`B`（即它的成员函数）和自由函数`f`都可以访问`A::a`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:30:46.397

在 CameraAcquisition 类中使用 getter

IE

`CVSize getSize() { return size; }`

`CvCapture* getDevice { return device; }`

ETC...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:32:10.280

您总是可以通过添加类定义将它们声明为朋友：

```
friend IplImage * ::grabFrame(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-27T17:51:11.263

使用的编译器是 Visual Studio 2015
这种方法不推荐但有效。
让我们考虑下课

```
class mydata
{
    private:
    int x;
    public:
    mydata(int no)
    {
        x=no;
    }
} 
```

只有数据成员存储在类对象中。现在我可以`x`使用以下功能访问。据我所知，`class mydata`它只有一个变量，它必须是`int x`.

```
int getx(mydata *d)
{
    return ((int*)d)[0];

    /*
    How did this work?
    -> d is pointing to the mydata object. 
    as I typecasted it to int* it will be considered as int array.
    Of that array (which has lenght 1) access the first element.
    */
} 
```

如果还有另一个变量，可以说`y`type `DATATYPE`。
现在，要访问 y，我们必须计算它与对象基础的偏移量。

通常数据的存储顺序与您声明它的顺序相同。
此外，在类中存在异构数据类型的情况下，还需要考虑结构填充。我想建议您深入阅读 struct padding。

我们可以得到 y 为

```
myclass *ptr =new myclass();
int offset_y=//whatever offset of y in number of bytes from base of object of perticular class;
char *byte_ptr_y=((char*)ptr)[offset_y];
DATATYPE y=*((DATATYPE*)byte_ptr_y); 
```

# c++ - 创建具有多个数据类型的 C++ 队列？

> ID：10602928
> 
> 赞同：0
> 
> 时间：2012-05-15T14:28:18.413
> 
> 标签：c++

我以为我做对了，但它似乎不起作用。我基本上是在试验一个队列，它适用于一种数据类型，但现在我正在尝试添加多个（最后我想要一个 int 和一个 int 列表）。

这是代码：

```
#include <iostream>
#include <queue>
using namespace std;

int main()
{
    struct product {
      int x;
      int y;
    } ;

   queue<product> q;
   q.push(100, 100);
   q.push(200, 100);
   q.push(300, 100);
   q.push(400, 100);

   cout << "Size of the queue: " << q.size() << endl;

   while (!q.empty()) {
       cout << q.front() << endl;
       q.pop();
   }

} 
```

它在没有结构的情况下工作，但显然它只接受队列中每个项目的一个变量。有没有办法拥有多个项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:48:15.583

该`queue::push`方法需要一个参数，该参数必须是队列的类型。试试这样：

```
queue<product> q;
q.push(product(100, 100));
q.push(product(200, 100));
q.push(product(300, 100));
q.push(product(400, 100)); 
```

您还必须为您的结构定义一个构造函数：

```
struct product {
  int x;
  int y;
  product(int _x, int _y) : x(_x), y(_y) {}
} ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T14:58:54.843

我*认为*为模板类型指定的类型不能是本地定义。改成：

```
struct product {
  int x;
  int y;
} ;

int main()
{ 
```

正如其他人已经说过的，添加一个`product`接受两个参数的构造函数：

```
struct product {
    int x;
    int y;
    product(int a_x, int a_y) : x(a_x), y(a_y) {}
};

...

q.push_back(product(100, 100)); 
```

您还可以重载`operator<<`以输出 a `product`：

```
std::ostream& operator<<(std::ostream& a_out, const product& a_p)
{
    a_out << "product(" << a_p.x << ", " << a_p.y << ")";
    return a_out;
}

while (!q.empty()) {
    cout << q.front() << endl;
    q.pop();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:46:51.457

这是您的主要外观。注意构造`product(int i, int j)`函数的添加，以及构造函数在添加元素时的使用`q`。

```
int main ()
{
    struct product {
      int x;
      int y;

      product (int i, int j) : x(i), y(j) {}
    } ;

   queue<product> q;
   q.push(product (100, 100));
   q.push(product (200, 100));
   q.push(product (300, 100));
   q.push(product (400, 100));

   cout << "Size of the queue: " << q.size() << endl;

   while (!q.empty()) {
       cout << q.front().x << ", " << q.front().y << endl;
       q.pop();
   }

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T14:47:48.180

`q.push(100, 100)`无效，`queue::push()`只接受一个参数。您将需要推送 a `product`：

```
product p(100, 100);
q.push(p); 
```

然后你在队列中都有 100 个（存储在产品结构中）。

如果你想同时存储 a`product1`和 a `product2`，你将需要一个通用的基础结构来扩展和存储指针（指向基础）而不是值本身（以避免切片）。此时你不妨使用`class`而不是`struct`

# javascript - 如何使用正则表达式或 jquery 检索 url 的最后一部分

> ID：10602936
> 
> 赞同：0
> 
> 时间：2012-05-15T14:28:36.840
> 
> 标签：javascript, jquery, regex

我有一个网址

```
/stars/planets/usa/en/universe/planet_stars.html
```

我需要得到`planets_stars.html`. 我如何单独获得最后一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:39:25.977

使用纯 JavaScript：

```
var url = "/stars/planets/usa/en/universe/planet_stars.html";
var page = url.substring(url.lastIndexOf("/")+1); 
```

**编辑：**子字符串方法的第二个参数可选，在这种情况下不需要。所以，我删除了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:30:54.713

这里既不需要 jQuery 也不需要正则表达式：

```
url.split('/').pop(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:30:41.107

或者只是 JavaScript。

```
var parts = url.split('/');

var lastpart = parts[parts.length -1]; 
```

您也可以像 jmar 所说的那样使用 pop() ，只需记住在执行此操作时会将其从数组中删除，因此您不能在同一个数组上两次使用 pop 方法并获得相同的值。

# jquery - 自定义 jQuery 表单验证，挂钩附加检查

> ID：10602946
> 
> 赞同：0
> 
> 时间：2012-05-15T14:28:54.057
> 
> 标签：jquery, validation

我正在使用 jQuery 创建自己的验证器（不使用 jQuery 自己的验证器），我想让一个验证器在许多不同的表单上工作而不更改代码。

因此，我当前的验证器必须提交并检查字段。所以它会处理所有正常情况。如果表单不包含已验证的字段之一，它会忽略该字段。

它工作得很好，除了极少数情况下表单有一个额外的字段会有一些独特的验证，我希望能够将它添加到 PHP 文件本身，而不是我的标准验证器所在的 JS 文件。

**扩展我的验证器以添加自定义验证检查的最佳方法是什么？** 我需要集成它，因为我希望首先收集所有验证错误，然后输出一个包含所有错误的警报框，包括来自我的标准验证器和每个页面上分别添加的自定义扩展验证。

对于某些上下文，我包含了一些代码片段，但主要是伪代码：

**myvalidator.js：**

```
$('form[data-validator=custom]').live('submit', function(e) {
  // Then checks if the field exists and validates
  $('[data-validate]').each(function() {
        // Check each field that has data-validate="email" for example
  });

  // If there are errors, add error message to one variable
  // At the end of the validation, display one alert with all the collected errors
  if(errors > 0) {
        alert(error_string);
        return false;
  }
} 
```

**form9312.html**

```
<form data-validator="custom">
  <input type="text" name="email" data-validate="email" /> <!-- standard validation -->
  <input type="text" name="blarg" data-validate-custom="blarg" /> <!-- needs custom -->
  <input type="submit" />
</form>
<script type="text/javascript">
  // Add custom validation here
  // How?
  function validate_blarg() {
        // If it passes validation, return true;
        // If it fails, return an error message: "Blarg must be 5 characters long."
  }
</script> 
```

谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:41:22.693

从概念上讲，您可以拥有一个带有自定义验证方法名称的 data-method 属性。

你可以在这里看到一个例子：http: [//viralpatel.net/blogs/2009/01/calling-javascript-function-from-string.html](http://viralpatel.net/blogs/2009/01/calling-javascript-function-from-string.html)

就个人而言，这是我将使用 jQuery validate 的地方，因为该级别的配置已经构建，并且您的方法似乎正在重新发明轮子。您希望 jQuery 验证不做的事情是什么？

# svn - NetBeans 7.1 和 Subversion 1.7

> ID：10602948
> 
> 赞同：0
> 
> 时间：2012-05-15T14:28:56.053
> 
> 标签：svn, netbeans, netbeans-7.1

我们正在将版本控制从一些旧的 VCS 转移到 SVN，以便于与 IDE 集成（我们同时使用 NetBeans 和 IBM RAD）。

为此，我使用 SlikSVN 为 win64 设置了一个本地存储库，并使用命令启动了一个服务器`svnserve -d -r c:\repo\test`。我用用户密码对定义了一个基本组（不允许匿名访问）。我的授权如下：

```
[groups]
li_users=alessandro

[/]
@li_users=rw 
```

然后，我在 RAD（配备 Subclipse 1.8）和 NetBeans 上创建了一个测试项目，并尝试将其导入到新创建的存储库中，结果如下：

*   在 RAD 上，我通过 file:///c:/repo/test 和 svn://localhost/ 访问/导入存储库没有任何问题。
*   在 NetBeans 上，我可以使用 file:///c:/repo/test 导入项目“TestProject”，但无法使用 svn://localhost/ 链接。在我看到使用项目名称的导入评论页面和目录建议后，它给了我这个错误：`org.tigris.subversion.javahl.ClientException: URL 'svn://localhost/TestProject' doesn't exist`

有趣的是，当我以任何方式浏览我的存储库时，包括单击导入向导上的“浏览”按钮，它会显示“TestProject”目录，我无法创建另一个同名的目录。此外，如果我创建（使用“进入新文件夹”）并尝试使用另一个目录，它会给我同样的错误。

那里有什么问题？我搜索了一下，这似乎是 NetBeans 的一个错误，但我找不到解决这个错误的方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:40:09.897

显然，回退到 Subversion 1.6 是唯一的出路，至少在 NetBeans 赶上 1.7 之前是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:56:21.100

如果您不介意遇到一些错误，您可以尝试 Netbeans 的开发分支（7.2 Beta）它捆绑了 SVN 1.7。出于这个原因，我同时安装了 7.1.2 和 7.2 Beta...

# c++ - stringstream 可以解析这样的东西吗？

> ID：10602949
> 
> 赞同：0
> 
> 时间：2012-05-15T14:28:56.807
> 
> 标签：c++, stl

我有如下所示的数据字符串：

```
b = bool
i = int
sINT: = string whose length is INT followed by a : then the string
m = int message id. 
```

例子：

```
m133s11:Hello Worldi-57989b0b1b0 
```

这将是：

```
Message ID 133
String 'Hello World' length 11
int -57989
bool false
bool true
bool false 
```

STL中有什么东西可以轻松解析吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:13:01.473

是的：

```
std::stringstream   data("m133s11:Hello Worldi-57989b0b1b0");
while(parse(data))
{
   // 1 item was correctly removed from the stream
}

std::istream& parse(std::istream& data)
{
    char format;
    data >> format;

    switch(format)
    {
        case 'i':   int value;  data >> value;break;
        case 'm':   int id;     data >> id;   break;
        case 'b':   bool value; data >> value; break;
        case 's':
        {
            std::size_t   size;
            char          x = '0';
            data >> size >> x;
            if ((!data) || (x != ':'))
            {   // Something went wrong
                data.setstate(std::ios_base::iostate::badbit);
            }
            else
            {
                std::string  value(size, ' ');
                data.read(&value[0], size);
            }
            break;
        }
    }
    return data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:36:11.277

不是直接的。鉴于它的复杂性，除非您想将其全部作为字符串抓取并根据上下文进行拼接，否则我会说您最好使用[boost::regex](http://www.boost.org/doc/libs/1_49_0/libs/regex/doc/html/index.html)来搜索您的模式。

# ruby-on-rails - 创建一个返回参数和重定向的嵌入式图像链接？

> ID：10602960
> 
> 赞同：0
> 
> 时间：2012-05-15T14:29:43.827
> 
> 标签：ruby-on-rails, ruby

这是我到目前为止所拥有的：

```
<`%= link_to image_tag("category_images/beef.jpg"),(:category => "beef"),
    http://localhost:3000/food/beef" %>` 
```

我已经尝试了这个想法的多种变体，并且一直在互联网上寻找潜在的解决方案，但是在实现所有提到的要求方面似乎一切都失败了？

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:42:21.010

尝试这个：

```
<%= link_to "http://localhost:3000/food/beef?#{ { category: "beef" }.to_param }" do %>
  <% image_tag("category_images/beef.jpg") %>
<% end %> 
```

# css - 字体在mac上看起来很奇怪

> ID：10602963
> 
> 赞同：2
> 
> 时间：2012-05-15T14:29:49.097
> 
> 标签：css, macos

我已经开发了一个网站 [http://yournextleap.com/work-with-yournextleap](http://yournextleap.com/work-with-yournextleap) 在`<p>`标记下所有具有 #333 的字体，它在 Firefox 和其他浏览器甚至 Windows 上的 safari 中看起来都很好，但是当我在 mac pc 上看起来相同时，它看起来很淡的灰色，谁能帮帮我，谢谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:33:44.870

您将`font-weight`设置为 100，这*非常*轻。当我将它更改为 200 时，它在 Chrome OS X 上更容易阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:34:24.350

使用不同的字体。这就是你所能做的，更大，更宽，更重......

```
font-weight:normal; 
```

此外，有些人可能会争辩说字体颜色的#333 是一个设计缺陷。

# ember.js - 如何观察 Ember.Object 中的 Array 字段？

> ID：10602964
> 
> 赞同：2
> 
> 时间：2012-05-15T14:29:54.357
> 
> 标签：ember.js

我有这个代码（[http://jsfiddle.net/stephane_klein/gyHmS/2/](http://jsfiddle.net/stephane_klein/gyHmS/2/)）：

```
App = Ember.Application.create({});

App.Item = Ember.Object.extend({
    title: null,
    parent: null
});

App.MyList = Ember.Object.extend({
    title: null,
    content: [],
    changed: function() {
        console.log('here');
    }.observes('content')
});

App.list = App.MyList.create({
    title: "foobar",
    content: [
        App.Item.create({
            item: "item1"
        }),
        App.Item.create({
            item: "item2"
        })
    ]
});
console.log(App.list.content);

App.list.content.pushObject(
    App.Item.create({
        item: "item3"
    })
);
console.log(App.list.content); 
```

为什么永远不会调用“console.log('here')”？

当 App.Item 插入 App.MyList 时，我想设置 App.Item.parent。我不知道如何观察 App.MyList.content 字段。

谢谢你的帮助。

最好的问候，斯蒂芬

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:47:54.860

您没有更改 content 属性，您只是将一个对象推入其中。你有两个解决方案：

*   您可以观察内容的每一项（使用`.observes('content.@each')`），但请注意，该方法可能会被多次调用
*   或手动通知此属性已更改（使用`this.notifyPropertyChange('content')`）

这是第一个解决方案：[jsfiddle using @each](http://jsfiddle.net/PjUhM/)

这是第二个解决方案：[jsfiddle using notifyPropertyChange](http://jsfiddle.net/sKg9v/)

您还必须注意您不应该直接使用，`App.list.content`而是应该使用`App.list.get('content')`。如果您想了解更多信息，请查看[Roy Daniels 撰写的这篇文章。](http://ud3323.github.com/2012/02/15/ember-controllers-and-the-runloop.html)

**编辑**

请注意使用`@each`略有变化。Ember.Array#@each[文档](http://emberjs.com/api/classes/Ember.Array.html#property__each)说：

> 返回一个特殊对象，可用于观察数组上的各个属性。只需获取此对象的等效属性，它将返回一个自动映射到成员对象上的命名键的可枚举。
> 
> 如果您只想查看添加或删除到数组中的任何项目，请使用 [] 属性而不是 @each。

让我们看一个例子：

```
App.Post = Ember.Object.extend({
  createdAt: null
});

App.Blog = Ember.Object.extend({
  posts: null,

  init: function() {
    this._super();
    this.set 'posts', [];
  },

  newerPost: function() {
    return this.get('posts').sortBy('createdAt').get('firstObject');
  }.property('posts.@each.createdAt'),

  postsCount: function() {
    return this.get('posts.length');
  }.property('posts.[]')
}); 
```

`newerPost`需要观察 each 的特定属性`posts`，而`postsCount`只需要知道`posts`数组何时更改。

# php - 如何适应Paginator CakePHP2？

> ID：10602965
> 
> 赞同：1
> 
> 时间：2012-05-15T14:29:58.880
> 
> 标签：php, cakephp-2.0

如何调整到Paginator CakePHP2？

我有这样的参考 [http://third.loc/home/index/page:2](http://third.loc/home/index/page:2)

```
 <div class="paging">
                <?php

                echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
                echo $this->Paginator->numbers(array('separator' => ''));
                echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
                ?>
            </div> 
```

以及如何做到这一点是如此 [http://third.loc/home/page:2/](http://third.loc/home/page:2/)

以至于看不到动作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:45:25.630

这对我有用：

**路由.php**

```
Router::connect('/home/page::page', array('controller' => 'homes', 'action' => 'index')); 
```

# c - free() 崩溃，但前提是分配了超过一定大小的内存

> ID：10602966
> 
> 赞同：3
> 
> 时间：2012-05-15T14:30:01.890
> 
> 标签：c, malloc, free, mpi

我在我的 mpi 程序中释放分配的内存时遇到一个奇怪的问题：

这是一个为我产生错误的代码示例：

```
void *out, *in;
int cnt = 2501; //if cnt<=2500: works perfectly. cnt>2500: crashes at free!

if((out = malloc(cnt * sizeof(double))) == NULL) 
    MPI_Abort(MPI_COMM_WORLD, MPI_ERR_OP);
if((in = malloc(cnt * sizeof(double))) == NULL) 
    MPI_Abort(MPI_COMM_WORLD, MPI_ERR_OP);

//Test data generation
//usage of MPI_Send and MPI_Reduce_local
//doing a lot of memcpy, assigning pointer synonyms to in and out, changing data to in and out

free(in);    //crashes here with "munmap_chunk(): invalid pointer" 
free(out);   //and here (if above line is commented out) with "double free or corruption (!prev)" 
```

我使用 valgrind 运行它：

```
 mpirun -np 2 valgrind  --leak-check=full --show-reachable=yes  ./foo 
```

并得到以下信息：

```
==6248== Warning: ignored attempt to set SIGRT32 handler in sigaction();
==6248==          the SIGRT32 signal is used internally by Valgrind
cr_libinit.c:183 cri_init: sigaction() failed: Invalid argument

==6248== HEAP SUMMARY:
==6248==     in use at exit: 0 bytes in 0 blocks
==6248==   total heap usage: 1 allocs, 1 frees, 25 bytes allocated
==6248== 
==6248== All heap blocks were freed -- no leaks are possible
==6248== 
=====================================================================================
=   BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES
=   EXIT CODE: 134 
```

关于如何追踪此错误的任何想法？请注意，它仅在 cnt>2500 时出现！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:58:45.217

如果您使用的是 GNU glibc，则可以在运行程序之前将环境变量 MALLOC_CHECK_ 设置为 2，以启用对内存分配调用的额外检查 — 详情请[点击此处](http://www.gnu.org/software/libc/manual/html_node/Heap-Consistency-Checking.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-05T15:21:22.747

你上面的消息，

> 警告：忽略在 sigaction() 中设置 SIGRT32 处理程序的尝试；Valgrind cr_libinit.c:XXX cri_init: sigaction() failed: Invalid argument 在内部使用 SIGRT32 信号

与 MPI（我的是 mpich-3.1.4-9）使用 BLCR 检查点库（我的是 blcr-0.8.5）有关

当我不支持 BLCR（运行“mpiexec -info”并查看“可用的检查点库”行）时，Valgrind 在我的测试阶段运行良好。

当我重新编译我的 MPI 以支持 BLCR（用于检查点实验）时，Valgrind 心脏病发作了。他完全停止了工作。

这个错误（正如程序员所说的那样）非常糟糕，因为显然这两个程序使用相同的信号来中断您正在运行的程序，而且他们不能这样做。（在我们的例子中，用于 MPI 的 BLCR 首先得到了它，现在 Valgrind 被留在空中行走）。

我将尝试在同一台机器上运行两个不同的 MPI 安装（一个支持 blcr，一个不支持），我希望我能在 Valgrind 和 Checkpoint 之间愉快地交替。

更新：

即使 Checkpoint 本身正在运行，也无法运行任何 mpiexec 并行可执行文件（它们之前正在运行的程序）。Mpiexec 命令本身在我使用（编译入）检查点库 BLCR 时崩溃。

**解决方案：**

**我重新编译了没有**BLCR 支持的 MPI (mpich-3.1.4-9) （我完全放弃了 BLCR）并安装了 DMTCP 检查点解决方案（dmtcp-2.4.4），它不仅可以透明地工作，而且比 BLCR 更快（您将在参考书目中找到基准）。

**现在一切都按预期运行:) 并且检查点作业的处理也正确完成。**将来我将对 DMTCP 进行更多的重度测试（我将使用本地文件，这些文件将具有来自并行程序的重度/活动 IO）。

PS。我还发现 mpich 已经完全从他们的发行版中删除了 BLCR（2016 年 7 月）。

# javascript - 谷歌分析如何跟踪用户退出

> ID：10602968
> 
> 赞同：1
> 
> 时间：2012-05-15T14:30:04.073
> 
> 标签：javascript, google-analytics

我一直在检查谷歌分析。他们非常有效地跟踪用户退出。

我编写了一个代码来处理窗口的 onbeforeunload 事件上的一些服务器端代码，以跟踪用户何时关闭浏览器，但这非常不可靠，脚本并不是每次都被触发。

谷歌使用什么方法来有效地跟踪这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:32:46.660

在我的理解中没有。它只跟踪新的综合浏览量。

因此，用户在页面 A 上的时间是通过他开始查看页面 A 和开始查看页面 B 之间的时间来衡量的。因此，Google 无法衡量您在页面 B 上花费的时间（如果这是您访问的最后一页）。

[有关页面停留时间](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1006924)的 GA 帮助页面的更多信息

**更新**当用户在过去 5 分钟内没有活动时，实时访问结束。[来源](https://stackoverflow.com/questions/8330780/how-does-google-analytics-real-time-works)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:37:43.163

我真的不知道谷歌是如何做到的，但最简单的解决方案可能是时间戳，然后用户加载网站，然后他左键单击没有您的域名的链接，而目标不是`_blank`。
当然，他们只是观看所有强大的 cookie，然后您的页面被关闭，但并不是每个人都让他们的浏览器吃掉它们 :)

# asp.net - DropDownList RequiredFieldValidator 不工作

> ID：10602971
> 
> 赞同：2
> 
> 时间：2012-05-15T14:30:21.420
> 
> 标签：asp.net, validation

我的asp.net 网页中有一个DropDownList。RequiredFieldValidator 不工作。感谢您查看我的代码。

```
<asp:DropDownList ID="Organization" runat="server"
    DataSourceID="OrganizationList"
    DataTextField="OrgName" DataValueField="OrgCode" CausesValidation="True">
</asp:DropDownList>

<asp:SqlDataSource ID="OrganizationList" runat="server"
    ConnectionString="<%$ ConnectionStrings:MembershipDB %>"
    SelectCommand="Admin_GetOrganizationDropDown" 
    SelectCommandType="StoredProcedure"></asp:SqlDataSource>

<asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidatorOrg"
    ControlToValidate="Organization"
    ErrorMessage="Organization is required." 
    Display="Dynamic" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T14:37:10.963

如果你还没有完成它，你应该有一个值，这意味着你没有选择任何东西。像这样：

```
 Organization.Insert(0,new ListItem("--Select--","0")); 
```

然后你需要告诉`asp:RequiredFieldValidator`检查你不允许的值。所以 InitialValue 的值应该是 0。像这样：

```
<asp:RequiredFieldValidator InitialValue="0" 
```

然后`--Select--`选择选项并尝试提交页面。`asp:RequiredFieldValidator`意志燃烧。

**编辑**

我不喜欢您展示的那段 sql 的外观：

```
Select Distinct 
    'name' As [OrgCode],'Please Select' As [OrgName] 
FROM [MedOrganization] 
Union All 
SELECT [OrgCode], [OrgName] FROM [MedOrganization] 
```

不是性能良好的 sql 代码。你可以这样做：

```
Select
    'name' As [OrgCode],'Please Select' As [OrgName] 
Union All 
SELECT [OrgCode], [OrgName] FROM [MedOrganization] 
```

为什么使用`distinct`那里？当您可以像上面那样选择时。回到问题。您可以尝试将`InitialValue`设置设置为`name`这样：

```
<asp:RequiredFieldValidator InitialValue="name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T22:10:20.470

以下工作不会强制*选择/请选择*进入干净的组织集合：

```
<asp:DropDownList ID="ddlOrganization" runat="server" CssClass="sel_box" />
<asp:RequiredFieldValidator ID="rfvOrganization" ControlToValidate="ddlOrganization" InitialValue="" ValidationGroup="vgOrganization" runat="server" Display="None" meta:resourceKey="rfvOrganization" /> 
```

不是`InitialValue=""`。

HTH。

# magento - Magento 1.7 - 以编程方式设置客户组价格

> ID：10602972
> 
> 赞同：8
> 
> 时间：2012-05-15T14:30:25.367
> 
> 标签：magento

在 magento 的最新版本（1.7）中，有一个设置客户团体价格的选项，但是我找不到任何关于如何以编程方式执行此操作的文档。我尝试了以下代码，但没有成功。有人知道如何设置客户团体价格吗？

```
 $_product->setCustomerGroupId($_price->getCustomerGroupId());
$_product->setGroupPrice($price);
$_product->save(); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T19:19:59.833

如果您实际上使用的是 magento 对象（而不是 api），这些是我发现的行为。希望应用程序有意义，无论您如何获取数据。

```
// get my product 
$product = Mage::getModel('catalog/product')->load(x);
// the group data is expecting an array of arrays that look like.. 
// array ('website_id'=>y, 'cust_group'=>z, 'price'=>n)
$groupPricingData = array (
  // for website 2, customer group 2
  array ('website_id'=>2, 'cust_group'=>2, 'price'=>10),
  // for all websites, not logged in
  array ('website_id'=>0, 'cust_group'=>0, 'price'=>15)
);
$product->setData('group_price',$groupPricingData);
$product->save(); 
```

在此示例中，它将替换该产品的所有先前组定价，因此同样明智。

```
$product->setData('group_price',array());
$product->save(); 
```

将取消团体定价。

我注意到的另一种与在您正在更新的产品上设置商店 ID 相关的行为将导致附加组价格。这样，如果您要为特定商店上传一堆团体定价，您不必担心会丢失针对另一家商店的团体定价。

```
// add a pricing to store 4
$product = Mage::getModel('catalog/product')->setStoreId(4)->load(1234);
$product->setData('group_price',array (
    array (
        "website_id" => 3,
        "cust_group" => 4,
        "price" => 99
    )));
$product->save();

// add a pricing to store 1
$product = Mage::getModel('catalog/product')->setStoreId(1)->load(1234);
$product->setData('group_price',array (
    array (
        "website_id" => 1,
        "cust_group" => 2,
        "price" => 105
    )));
$product->save();

// remove group pricing from store 2
$product = Mage::getModel('catalog/product')->setStoreId(2)->load(1234);
$product->setData('group_price',array ());
$product->save(); 
```

如果您正在处理单个商店的批量团体定价，这很方便，但不要影响其他商店的团体定价。我不知道这是否是最简单的机制，但到目前为止它对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T20:00:46.007

好吧，我终于想通了，对于那些正在寻找解决方案的人：您需要制作一组数据，包括 website_id、cust_group、price 和如果需要删除。这在新的 magento 版本（v1.7）中可用

```
 $group_prices = array(); if(isset($price_data['delete'])) {
                                $group_prices[] = array(
                                    "website_id" => Mage::getModel('core/store')->load($price_data['store_id'])->getWebsiteId(),
                                    "cust_group" => $price_data['customer_group_id'],
                                    "all_groups" => false,
                                    "delete" => true
                                );
                            } else {
                                $group_prices[] = array(
                                    "website_id" => Mage::getModel('core/store')->load($price_data['store_id'])->getWebsiteId(),
                                    "cust_group" => $price_data['customer_group_id'],
                                    "all_groups" => false,
                                    "price" => $price_data["price"]
                                );
                            } 
```

# asp.net - 在网格视图中通过 id 获取数据

> ID：10602974
> 
> 赞同：1
> 
> 时间：2012-05-15T14:30:33.887
> 
> 标签：asp.net

我有一个包含论坛线程的表，线程名称是一个链接，一旦单击它将 thread_id 传递到评论页面，我需要知道如何显示所有带有传递的 thread_id 的评论？

试过：

```
<asp:SqlDataSource ID="CommentsDataSource" runat="server"
SelectCommand="select * from comments where thread_id=@thread_id" >
<SelectParameters>
    <asp:QueryStringParameter Name="@thread_id" QueryStringField="thread_id" Runat="Server" />
</SelectParameters>
</asp:SqlDataSource>

<asp:GridView ID="GridView1" runat="server">
    <Columns>
        <asp:BoundField DataField="comment" HeaderText="Comment" />
    </Columns>
</asp:GridView> 
```

但它不起作用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:34:11.433

您可以在数据源中使用从 QueryString 读取的参数。例如，这里是一个`SqlDataSource`使用`thread_id`查询字符串参数（假设您的链接导航到类似`Comments.aspx?thread_id=123`：

```
<asp:SqlDataSource ID="CommentsDataSource" runat="server"
    SelectCommand="select * from comments where thread_id=@thread_id" ...>
    <SelectParameters>
        <asp:QueryStringParameter Name="@thread_id" QueryStringField="thread_id" />
    </SelectParameters>
</asp:SqlDataSource>

<asp:GridView ID="CommentsGrid" runat="server"
    DataSourceID="CommentsDataSource" ... 
```

# iphone - 移动时，UINavigationBar 下的区域不再可触摸

> ID：10602983
> 
> 赞同：0
> 
> 时间：2012-05-15T14:30:53.250
> 
> 标签：iphone, objective-c, uinavigationcontroller, touch, uinavigationbar

我有一个可见的 UINavigationBar。当我将此元素移出屏幕时，下面的区域不再接受触摸。

知道为什么会发生这种情况以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:17:29.707

当您`navigationBar`通过设置自定义`frame`来移动它时，您是否更改`frame`了 contentView 的`UINavigationController`？

如果没有，则`navigationBar`可能会看到下面的部分，但不在`navigationController`contentView 内，因此不会检测到对其的触摸。

# javascript - 仅使用 JS 解析 JS

> ID：10602990
> 
> 赞同：1
> 
> 时间：2012-05-15T14:31:15.053
> 
> 标签：javascript, maps

我有下面的 JS 代码，它创建像`(47.624718,-122.356133)`

```
var point = new GLatLng(
  parseFloat(markers[i].getAttribute(\"lat\")),
  parseFloat(markers[i].getAttribute(\"lng\"))
); 
```

只使价值 JUST `47.624718 -122.356133`？我怎样才能使用js`replace()`函数来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:44:48.653

只需使用对象方法：

```
point.lat() + ' ' + point.lng() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:44:57.830

```
output = point.lat() + ' ' + point.lng(); 
```

见这里：[https ://developers.google.com/maps/documentation/javascript/v2/reference#GLatLng](https://developers.google.com/maps/documentation/javascript/v2/reference#GLatLng)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:36:00.003

您可以使用 3 个链式`replace()`调用：

```
point = point.replace("(", "").replace(")", "").replace(",", " "); 
```

它将用空字符串替换左右括号，用单个空格替换逗号。

# android - android 异步套接字（android 应用程序作为服务器等待客户端连接）

> ID：10602991
> 
> 赞同：1
> 
> 时间：2012-05-15T14:31:15.880
> 
> 标签：android, sockets, networking, asynchronous, nio

我试图在 android 应用程序（作为服务器）和在 windows 上运行的基于 java 的客户端之间实现 tcp 套接字连接。*（下面的简短版本，没有代码）*

我使用一些传感器监听器来实现游戏运动（每个人都知道这种基于传感器的赛车游戏运动。

我已经为此目的实施了一项服务，该服务是从第一个活动开始的。该服务实现如下（我只是粘贴相关的代码片段，而不是整个类）：

```
public class ServerService extends Service {

    ConnectionHandler conHandler;

    @Override
    public void onCreate() {
        startListener();
    }

    private void startListener() {
        conHandler = new ConnectionHandler(this);
        conHandler.execute();
    }

    private void sendMessage(String s)
    {
        conHandler.write(s);
    }

    public void messageNotify(String s) {
        //Log.d("receivedMessage", s);
    }    
} 
```

ConnectionHandler 类：

```
public class ConnectionHandler extends AsyncTask<Void, Void, Void>{

    public static int serverport = 11111;
    ServerSocket s;
    Socket c;
    ConnectionListening conListening;
    ConnectionWriting conWriting;
    DataOutputStream dos;
    DataInputStream dis;
    ServerService server;

    public ConnectionHandler(ServerService server)
    {
        this.server = server;
    }

    @Override
    protected Void doInBackground(Void... params) {

        try {
            Log.i("AsyncTank", "doInBackgoung: Creating Socket");
            s = new ServerSocket(serverport);
        } catch (Exception e) {
            Log.i("AsyncTank", "doInBackgoung: Cannot create Socket");
        }
        try {
                    //this is blocking until client connects
            c = s.accept();
            Log.d("ConnectionHandler", "client connected");
            dis = new DataInputStream(c.getInputStream());
            dos = new DataOutputStream(c.getOutputStream());
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
            conWriting = new ConnectionWriting(this.c, this.dos);
            conWriting.execute();
            conListening = new ConnectionListening(this.c, this.dis, this.server);
            if(this.c != null)
            {
                Timer timer = new Timer();
                timer.schedule(conListening, 0, 10);
            }

            Log.i("AsyncTank", "doInBackgoung: Socket created, Streams assigned");
        return null;
    }

    public void write(String s)
    {
        conWriting.writeToStream(s);
    }

    public void messageNotify(String s) {
        // TODO method stub 
    }   

} 
```

ConnectionHandler 与 ConnectionWriting 类似地实现为 AsyncTask，因此 tcp 方法的阻塞不会影响整个通信。客户端能够向服务器发送消息。因为我不知道这条消息什么时候到达，所以我使用每 10 毫秒执行一次的 TimerTask 来检查是否有新消息。

ConnectionWriting 如下所示：

```
public class ConnectionWriting extends AsyncTask<Context, Void, Boolean>{

    public DataOutputStream dos;
    Socket c;

    public ConnectionWriting(Socket c, DataOutputStream dos) {
        this.dos = dos;
        this.c = c;
    }

    @Override
    protected Boolean doInBackground(Context... params) {
        return true;
    }   

    public void writeToStream(String s) {
        try {
            if (c != null){
                //Log.i("AsynkTask", "writeToStream");
                dos.writeBytes(s+"\n");
                dos.flush();
                Log.i("AsynkTask", "write: " +s);
            } else {
                Log.i("AsynkTask", "writeToStream : Cannot write to stream, Socket is closed");
            }
        } catch (Exception e) {
            Log.i("AsynkTask", "writeToStream : Writing failed");
        }
    }

} 
```

和 ConnectionListening 类： public class ConnectionListening extends TimerTask{

```
 public DataInputStream dis;
    Socket c;
    ServerService server;

    public ConnectionListening(Socket c, DataInputStream dis, ServerService server)
    {
        this.c = c;
        this.dis = dis;
        this.server = server;
    }

    @Override
    public void run() {
        String message = "";
        try {
            if (c != null) {
                //Log.i("AsynkTask", "readFromStream : Reading message");
                message = dis.readLine();
                Log.i("AsynkTask", "read: " + message);
            } else {
                Log.i("AsynkTask", "readFromStream : Cannot Read, Socket is closed");
            }
        } catch (Exception e) { 
            Log.i("AsynkTask", "readFromStream : Writing failed");
        }

        if(message != null)
        {
            this.server.messageNotify(message);
        }

    }

} 
```

我选择这种复杂的异步方式，因为服务器几乎是连续向客户端发送数据，并且存在客户端必须将数据发送回来的情况。使用 tcp 套接字的传统方式，不可能实现非阻塞通信，这意味着如果服务器正在发送（写入），读取功能阻塞，我永远不会收到客户端消息。

**简而言之：** 我测试了我的方法，但服务器总是先发送他的数据，然后再获取客户端消息。它不是异步的！？：-/

也许任何人都可以帮助我解决这个问题。或者有没有更简单的方法来实现这种方法？通信必须是异步的！并且必须自动完成读取（我试图用这种轮询方法来实现）。

我读过我可以使用一个线程进行读取，一个线程用于写入，但是我在使用写入功能（不知道如何在正在运行的线程中调用函数）和在我的活动中调用函数时遇到了问题。

我感谢每一个帮助！

问候

# powershell - 创建一个批处理脚本以自动解压缩音乐并创建目录以将其放入

> ID：10602993
> 
> 赞同：1
> 
> 时间：2012-05-15T14:31:19.533
> 
> 标签：powershell, mp3, id3, batch-file

我想创建一个脚本来自动解压缩音乐专辑并在 Windows 7 上为它们创建一个新目录。

我还希望脚本将文件元数据与从某个音乐站点提取的数据进行比较，以确保 ID3 标签中填充了准确的数据。

像 Powershell 这样的东西就足够了吗？我只喜欢指向正确方向的手指。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:44:27.513

[DotNetZip](http://www.codeplex.com/DotNetZip)将允许您从 PowerShell 执行此操作。它不是单行的，但该库将允许您编写所需的 PowerShell 脚本。

[Tag lib](http://download.banshee.fm/taglib-sharp/)将允许您使用 ID3Tag。[示例](http://huddledmasses.org/editing-media-tags-from-powershell/)：

```
[Reflection.Assembly]::LoadFrom( (Resolve-Path ".\taglib-sharp.dll") )
$media = [TagLib.File]::Create("C:\Users\Joel\Music\Audity\The Language I Think In-Music of My Heart.ogg")
# Write out the current album name
$media.Tag.Album 
# Set the album name to the name of the directory
$media.Tag.Album = ([IO.FileInfo]$media.Name).Directory.Name
# Save the new album name into the file
$media.Save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:52:16.917

您可以下载[7zip](http://www.7-zip.org/download.html)用于解压缩。以下命令可用于解压缩专辑：

```
7z.exe x -oOutputDir AlbumArchive(.zip, .rar, .7z, etc) 
```

我对 ID3 检查器和诸如此类的东西不太熟悉，所以对于您问题的这一部分，我将推迟到另一个。

# c# - 旧代码库中的新 COM 组件不公开新属性

> ID：10602994
> 
> 赞同：0
> 
> 时间：2012-05-15T14:31:22.047
> 
> 标签：c#, vb.net, visual-studio, com-interop, gac

我自己回答这个问题，因为我在任何地方都找不到答案，这是我最喜欢的在线编程参考。希望它可以帮助别人。

我维护一个使用第三方 COM 组件的 WinForms 应用程序。我们最近升级到具有一些附加属性/功能的新版本组件（所有旧属性都完好无损），但我无法让 Visual Studio 检测到新属性。它的行为非常像挂在对旧版本组件的引用上。以下是我尝试清除它的步骤：

*   删除了使用组件的表单（首先复制代码）。此表单上的唯一控件是第三方组件。
*   删除了对旧组件的引用
*   删除解决方案目录中的 bin 和 obj 文件夹，以便在我添加新控件时新创建 PIA
*   卸载旧组件，安装新组件
*   打开解决方案，添加对新组件的引用
*   向应用程序添加了一个表单，将组件拖放到表单上并给它与旧控件相同的名称（这样就不必重构应用程序的其余部分
*   将表单代码粘贴回原位

那时，应用程序将编译并运行，但我无法让 Intellisense 检测新属性，如果我将它们放置在适当的位置，应用程序将无法编译。我尝试过的任何方法都不会显示新属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:31:49.517

当我们部署应用程序时，我们将组件的 PIA 安装到 GAC。好吧，在我的 PC 上运行了应用程序的安装程序后，我在 GAC 中有一份 PIA 的副本，这就是 Visual Studio 在编译时使用的那个。在将其从 GAC 中删除并重新创建 PIA 后，新属性开始显示。

# jquery - 当我使用 ajax 渲染 Scroller 部分时，iScroll 不起作用

> ID：10602997
> 
> 赞同：1
> 
> 时间：2012-05-15T14:31:28.550
> 
> 标签：jquery, html, iscroll

我遇到了一个奇怪的问题。

如果我使用“for循环”将html渲染到滚动部分，一切正常。

但是当我使用 ajax 将我的数据呈现到滚动部分时。iScroll 不起作用（无法滚动）。

这是我的网址：http: [//yuanwang.sinaapp.com/8505/item.html](http://yuanwang.sinaapp.com/8505/item.html)

您可以复制我的代码并自己尝试。

打开 item.js 并尝试运行“for循环”，你可以看到一切运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:52:18.207

您是否尝试过在通话的成功功能中设置 iScroll `.ajax()`？看起来您正在尝试在各种定时事件之后进行各种调用迭代，但我认为如果*在*函数`loaded`中添加所有 DOM 元素后进行设置，您会发现更多成功。 *`.success()`*

 *也许是这样的：

```
for ...
    for ...
        $('#thelist').append("<li>"+ co...
    }
}
myScroll = new iScroll('wrapper'); 
```

**更新**：

或者在添加完所有内容后调用您的`loaded()`函数。

完全披露：我从未使用过 iScroll，因此您的实现中可能存在我不会注意到的错误。在`myScroll`创建`iScroll`. 我不知道。

如果这不能解决您的情况，请告诉我。*