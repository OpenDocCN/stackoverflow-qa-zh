# StackOverflow 问答 10414000-10414999

# java - 使用 Apache ANT 以编程方式执行带有 plpgsql 函数的 sql 脚本失败

> ID：10414001
> 
> 赞同：0
> 
> 时间：2012-05-02T12:42:24.167
> 
> 标签：java, sql, postgresql, ant

我需要以编程方式执行 SQL 脚本。该脚本定义了一个函数，该函数根据其版本升级 postgreSQL 数据库。它看起来像这样：

```
create or replace function update_auto_increment(version varchar(20)) returns integer
as $$
declare 
 v integer;
begin
 v := cast(version as int);
 if v < 590 then
 -- some upgrade code here
 v := 590;
 raise notice 'Updated base to version %', v;
 end if;
 return v;
end;
$$ language plpgsql;

select update_auto_increment(value) from info where name = 'version';

drop function update_auto_increment(varchar(20)); 
```

然后我准备一个 ANT 任务并执行它：

```
SQLExec task = new SQLExec();
Project project = new Project();
project.init();
task.setProject(project);
task.setTaskType("sql");
task.setTaskName("sql");
task.setSrc(new File("updateScript.sql"));
task.setDriver(driver);
task.setPassword(password);
task.setUserid(username);
task.setUrl(connectionURL);
task.execute(); 
```

遇到 $$ 时执行过程失败：

```
org.postgresql.util.PSQLException: ERROR: syntax error (near: "$")
position: 91
at org.apache.tools.ant.taskdefs.SQLExec.execute(SQLExec.java:672) 
```

（错误消息已本地化，我尝试将其翻译成英文）。所以，问题是：如何以编程方式执行包含函数定义的 SQL 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:02:56.323

很可能 SQLExec 正在拆分作为`;`SQL 中默认语句终止字符的语句。

在你的情况下，这种分裂不应该发生。

你可能会尝试使用这样的东西：

```
task.setDelimiterType(SQLExec.DelimiterType.ROW);
task.setDelimiter("/"); 
```

然后将文件中的 SQL 语句用`/`单行分隔：

```
create or replace function update_auto_increment(version varchar(20)) returns integer
as $$
declare 
 v integer;
begin
 v := cast(version as int);
 if v < 590 then
 -- some upgrade code here
 v := 590;
 raise notice 'Updated base to version %', v;
 end if;
 return v;
end;
$$ language plpgsql;
/

select update_auto_increment(value) from info where name = 'version'
/

drop function update_auto_increment(varchar(20))
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T15:28:27.760

除了[a_horse_with_no_name 的答案](https://stackoverflow.com/a/10417471/770346)之外，您还需要将 替换为`$$`标记形式`$foo$`。

更多关于美元引用的字符串：[http ://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)

# android - Android 上视图的亚像素定位/渲染

> ID：10414002
> 
> 赞同：2
> 
> 时间：2012-05-02T12:42:28.800
> 
> 标签：android

在 Android 3.0 及更高版本上，可以使用 setX / setY 方法（或 setTranslationX / setTranslationY）指定 View 的绝对位置。这些方法采用浮点参数。

虽然可以在子像素坐标中指定视图的位置，但 Android 似乎不会使用坐标的小数部分来渲染视图，至少默认情况下不会。

这与 iOS 上的行为不同，如下图所示（放大 400%）：

![例子](../Images/d304c3fff52f8affd050007dca72a890.png)

在这里，我添加了两个 UIImageViews (iOS) / ImageViews (Android)。上一个使用整数坐标定位，而下一个使用半像素坐标定位。在 Android 上，视图在渲染之前被清楚地捕捉到最近的整数坐标。是否有可能获得与 iOS 相同的行为？

我承认在这个特定的例子中，Android 提供了最好的视觉质量。但我尝试启用亚像素渲染的动机是实现更流畅的动画（在两个坐标之间转换视图时）。特别是对于低/中 DPI 设备上的慢速动画，在动画期间视图总是捕捉到最近的整数坐标是非常明显的。在 iOS 上，像这样的动画总是显得如丝般顺滑。

顺便说一句，这是一个游戏。它在图形上非常简单，如果可能的话，我想避免使用 OpenGL，但我不愿意放弃我可以在 iOS 上获得的丝般流畅的 60fps 动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:51:46.263

由于 Android 是基于 java 的渲染提示可以针对图形上下文进行调整。这可能会对图形性能产生重大影响。

# php - PHP 肥皂必须了解

> ID：10414003
> 
> 赞同：2
> 
> 时间：2012-05-02T12:42:31.770
> 
> 标签：php, zend-framework, soap

我在 Zend 框架中有一个肥皂服务器，并在请求到达soap_server 之前添加了一个过滤器来解析标头并允许 wsse。这工作正常。

昨天我接到一个电话，标题中 Security 元素的属性为 MustUnderstand=1。然后，soap_server 会抛出：header not understand。

是否可以采取一种解决方法让 zend_soap_server 忽略标头上的 mustunderstand=1 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T18:25:44.447

只需实现一个称为 Attribute 的函数，如果不需要，则在其中不执行任何操作。

不要在其中使用“return”语句，因为它可以在不处理正文的情况下返回消息

例子

```
<SOAP-ENV:Header>
    <wsa5:To SOAP-ENV:mustUnderstand="true">http://www.xxx.yyy.zzz/</wsa5:To>
    <wsa5:Action SOAP-ENV:mustUnderstand="true">someData</wsa5:Action>
</SOAP-ENV:Header> 
```

您必须实现这样的类：

```
Class MySoapServer{
    private $bar;
    private $foo;

    public function To( $data )
    {
        $this->bar = $data;
    } 

    public function Action( $data )
    {
         //do Nothing!
    } 

    public function Method1( $message )  
    {
         //....
         return $returnedValues;
    }

} 
```

# visual-studio - Visual Studio 11 Express for Windows 8 仅适用于 WinRT？

> ID：10414006
> 
> 赞同：3
> 
> 时间：2012-05-02T12:42:39.020
> 
> 标签：visual-studio, visual-studio-express, visual-studio-2012

我可以在 Visual Studio 11 Express for Windows 8 中构建常规 .NET 应用程序吗？我找不到常见的项目模板，例如控制台应用程序、类库或 Windows 窗体应用程序。

对于这类项目，是否存在或将存在另一个 Express？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:02:38.067

不，当前的 beta VS11 Express 版本仅支持创建 Metro 应用程序。RTM 版本是否会支持旧式应用程序需要一个水晶球。我对此表示怀疑。

如果要创建旧版应用程序，则需要使用 VS2010 Express 版本。

# asp.net-mvc-3 - 使用 Azure 缓存时会话变量未更新

> ID：10414014
> 
> 赞同：1
> 
> 时间：2012-05-02T12:43:17.670
> 
> 标签：asp.net-mvc-3, session, azure, session-variables, azure-caching

我编写了托管在 Azure 中的 MVC 3 应用程序。我正在使用会话变量来存储我长期运行的进程之一的 http 调用之间的更新状态信息。然后使用它来更新进度条。这些值可以很快改变。

这在使用 InProc 会话提供程序时效果很好。但是，每当我更改为使用 Azure 缓存会话提供程序时，会话变量都不会从长时间运行的进程中更新。

我现在正在更改内容以直接使用缓存变量，这似乎到目前为止有效。

为什么在缓存中使用 Session 时以下方法不起作用，但 InProc 很好？

例如，我设置可能在一个控制器 ActionResult 中启动会话变量

```
Session["OPERATION_PROGRESS"] = 0; 
```

然后我得到一个会话的句柄，比如

```
HttpSessionStateBase session = Session; 
```

并将其传递给我的长期运行过程，例如

```
LongRunningProcess.Go(session); 
```

然后在 LongRunningProcess 方法中，它将在使用传递的会话对象完成任务时更新会话变量。

```
passedSession["OPERATION_PROGRESS"]=10; 
```

Web 客户端调用一个进度页面，该页面将会话变量值传回以更新进度条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:31:09.613

根据我最近阅读的有关会话提供程序的内容，我怀疑正在发生的事情是在初始化长时间运行的请求的请求完成后，会话提供程序释放了它对会话信息的锁定，从而有效地断开了它。来自[MSDN](http://msdn.microsoft.com/en-us/library/ms178587.aspx)：

> 在请求结束时，如果会话状态值已被修改，则 SessionStateModule 实例调用 SessionStateStoreProviderBase.SetAndReleaseItemExclusive 方法将更新后的值写入会话状态存储。

仍然有一个对象可供您交谈（这就是为什么您的长时间运行的过程仍然有效的原因），但是对该对象的任何更改都不会发送到持久层（这就是后续请求不会获取这些更改的原因）。

我在类似情况下所做的是在请求开始时生成请求 ID 并在 azure 表中创建一行，并将其作为分区键（但您可以使用任何您喜欢的存储），将此 ID 传递给 long运行进程并将此 ID 返回给客户端。长时间运行的过程只是更新表中的这一行。所有后续的进度请求都在此请求 ID 中传递，查找它很简单。为了防止表变得太大，在发现进程完成的请求中，它会删除该行。

如果您要使用 azure 表存储，则对这个系统的改进是使用当前时间滴答作为分区键，并使用另一个唯一 ID 作为行键。通过这种方式，很容易找到在表中比应有的时间更长的行并将其清除。

# python - 列表列表的处理

> ID：10414018
> 
> 赞同：2
> 
> 时间：2012-05-02T12:43:26.193
> 
> 标签：python, list

我正在处理列表列表

输入：

```
x = [['a','a','a'],['b','b','b'],['c','c','c'],['d','d','d']] 
```

并正在寻找输出：

```
s = ['a_b_c_d','a_b_c_d','a_b_c_d'] 
```

请让我知道如何使用列表理解来做到这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T12:45:43.427

```
>>> x = [['a','a','a'],['b','b','b'],['c','c','c'],['d','d','d']]
>>> map('_'.join, zip(*x))
['a_b_c_d', 'a_b_c_d', 'a_b_c_d'] 
```

……虽然@aix 的列表理解更易于列表理解。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-02T12:45:34.517

```
In [6]: x = [['a','a','a'],['b','b','b'],['c','c','c'],['d','d','d']]

In [7]: ['_'.join(s) for s in zip(*x)]
Out[7]: ['a_b_c_d', 'a_b_c_d', 'a_b_c_d'] 
```

根据要求，这使用列表推导。请参阅@eumiro 的答案，了解`map()`我认为同样好的基于 - 的解决方案。

# php - 如何防止 Magento 中的订单取消

> ID：10414019
> 
> 赞同：1
> 
> 时间：2012-05-02T12:43:28.747
> 
> 标签：php, magento

我创建了一种自定义支付方式，其中的订单网格在安装此支付扩展程序后，有另一列显示来自支付网关的订单状态。

要求是网格中的订单在处于某些特定支付网关状态（例如**已交付**、正在**处理**等）时不应被取消。当支付网关状态为**待处理时，它应该被取消**

我需要对支付网关进行 api 调用，要求取消订单。如果订单处于**待处理**状态，则订单将被取消。如果订单未挂起，API 会抛出带有错误代码和错误消息的响应，表示订单无法取消。

有一个 PHP-Library 可以处理所有的 API 调用。当我在上述情况下调用cancelOrder API服务时，如果无法取消订单，PHP库会使用API​​的错误代码作为异常代码并将错误消息作为异常消息来引发异常。

为此，我实现了一个处理 Order_save_before 事件的观察者。在观察者中，我编写了使用 PHP 库的 cancelOrder() 方法（内部进行 cancelOrder api 调用）的代码，当支付网关的状态处于**挂起**状态时，订单将被取消，如果无法取消，则会引发异常。

如果我打开由我的付款方式创建的单个订单并通过单击**取消按钮**取消订单，则异常会级联并显示在顶部，给出无法取消订单的异常消息。

但是当我尝试通过选择订单从订单网格中取消订单时，从下拉菜单中选择取消并点击提交，页面被重定向到异常页面，说**发生了异常**。在这种情况下，我不明白如何撤消或防止取消订单并处理异常。我的代码如下所示。

```
public function cancelOrderObserver(Varien_Event_Observer $Observer)
{
try
   {
        //code that cancels order if it is pending else throws exception saying cannot cancel order;
   }
catch (Exception $e){
    Mage::throwException(Mage::helper('adminhtml')->__($e->getMessage()));
} 
```

请帮助我。

如果您需要有关此问题的更多解释，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:02:03.873

```
order_cancel_after 
```

不适合您的需求，因为在此阶段订单已被取消。

我会尝试类似的东西

```
order_save_before 
```

在那里你应该检查订单是否被取消。并取消它以防万一。

## 更新 1

好吧，我“取消”的主要观点是回滚在 ->cancel() 调用期间采取的操作。

目前我想到了其他选择。您可以尝试观察 predispatch 呼叫（如果 massCancel 操作存在以下事件）并与您的服务检查是否可以取消订单。如果没有，则从请求中删除订单。像这样的东西。但我不确定这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T17:42:04.843

sales_order_save_before 事件：

`$_order->setActionFlag(Mage_Sales_Model_Order::ACTION_FLAG_CANCEL, false);`

# iphone - cocos2d : 旋转一个精灵，使其朝向屏幕的中心

> ID：10414023
> 
> 赞同：0
> 
> 时间：2012-05-02T12:43:50.293
> 
> 标签：iphone, xcode, cocos2d-iphone, rotation, sprite

所以我每秒在随机位置创建一个精灵。我想要的是精灵朝向屏幕的中心。例如，如果我每秒在随机位置创建一个人体，我希望他的头部朝向屏幕中心。谢谢 :) 对不起我的英语我是法国人 :/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:49:23.267

```
CGPoint screenCenter = ...; // set it manually or from device screen size
CGPoint direction = ccpSub (screenCenter, yourHuman.position);
yourHuman.rotation = CC_RADIANS_TO_DEGREE (ccpToAngle (direction)); 
```

我不确定旋转角度，所以也许你需要

`yourHuman.rotation = -CC_RADIANS_TO_DEGREE (ccpToAngle (direction));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:29:30.617

```
CCPoint pos1 = [yourHuman position];
CCPoint pos2 = screenCenter;

    float theta = atan((pos1.y-pos2.y)/(pos1.x-pos2.x)) * 180 * 7 /22;

    if(pos1.y - pos2.y > 0)
    {
        if(pos1.x - pos2.x < 0)
        {
            [yourHuman setRotation:(-90-theta)];
        }
        else if(pos1.x - pos2.x > 0)
        {
            [yourHuman setRotation:(90-theta)];
        }       
    }
    else if(pos1.y - pos2.y < 0)
    {
        if(pos1.x - pos2.x < 0)
        {
            [yourHuman setRotation:(270-theta)];
        }
        else if(pos1.x - pos2.x > 0)
        {
            [yourHuman setRotation:(90-theta)];
        }
    } 
```

这个完成了。将此代码保存在方法中。并使用它.. :) 希望这会有所帮助..

# android - 无法在android中获取服务+通知

> ID：10414024
> 
> 赞同：0
> 
> 时间：2012-05-02T12:43:55.027
> 
> 标签：android, service, notifications

我有一个连接到数据库的 Android 应用程序。我想编写一个后台线程来不断更新数据库中的数据，并且我想将更新的数据显示为通知我该怎么做？例如，在 Skype 中，如果我们收到新消息，我们将收到正确的通知......就像我想做的那样......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:18:46.343

这可以通过以下方式完成。您`Activity`应该包含以下内容：

```
//the method which changes the data in the database
changeDataBD(params) {
    new Thread(new Runnable() { 
        changingDataDB(params);
    }).start();
}

//create an handler
private final Handler myHandler = new Handler();

private void changingDataDB(params) {
    //.... changing of data in DB according to passed params

    //update the UI using the handler and the runnable
    myHandler.post(updateRunnable);

}

final Runnable updateRunnable = new Runnable() {
    public void run() {
        //call the activity method that updates the UI
        updateUIandShowNotification();
    }
};

private void updateUIandShowNotification() {
      // ... update the data on UI
      // ... show a notification
} 
```

您还可以创建一个监听器来监视数据库中的更改。它应该启动这个线程。

# xml - 将 web.config 样式的 xdt 转换应用于项目中的其他 XML 文件

> ID：10414033
> 
> 赞同：2
> 
> 时间：2012-05-02T12:44:33.137
> 
> 标签：xml, asp.net-mvc, web-config, transform, xdt-transform

我们的项目中有一个 XML 配置文件，需要更改才能发布。我们一直非常成功地使用 web.config 转换。在为不同的构建目标发布时，是否可以将此类转换应用于我们项目/解决方案中的其他 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:27:57.140

[app.config 转换 Visual Studio Add in](http://sedodream.com/2011/08/17/AppconfigTransformVisualStudioAddIn.aspx)正是我想要的。

# regex - 在 actionscript 正则表达式中指定 unicode 范围

> ID：10414034
> 
> 赞同：3
> 
> 时间：2012-05-02T12:44:38.837
> 
> 标签：regex, actionscript-3, apache-flex, actionscript

我一直在尝试编写一个匹配所有 unicode 单词字符的正则表达式，例如：

```
/[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\w]/gi 
```

但这完全失败并且不匹配任何东西。我尝试了各种表达式，似乎只要我尝试指定一个范围，它就会失败。有谁比我幸运？

我希望 actionscript 能提供类似 \p{L} 的东西，但如果有类似的东西，我在文档中找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:59:30.570

您可以将 String.fromCharCode 与 unicode 字符一起使用，然后范围将在正则表达式中正常工作。这是使用原始问题的示例：

```
var exp:RegExp = new RegExp("[" + generateRangeForUnicodeVariables(0x00A0, 0xD7FF) + generateRangeForUnicodeVariables(0xF900, 0xFDCF) + generateRangeForUnicodeVariables(0xFDF0, 0xFFEF) + "\w]", "gi");

private function generateRangeForUnicodeVariables(var1:Object, var2:Object):String
{
   return String.fromCharCode(var1) + "-" + String.fromCharCode(var2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:24:29.827

这一直是一个问题，我找不到任何已解决的信息，之前在：

[将输入限制为指定语言](https://stackoverflow.com/questions/7561916/restrict-input-to-a-specified-language)

和

[如何在 RegExp 中指定 unicode 范围？](http://forums.adobe.com/message/3941906)

我知道这是一个 hack，但它确实可以在 JavaScript 中使用，因此您可以使用 ExternalInterface 在那里进行测试并将结果传回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:29:47.573

唔。看起来这不是关于范围，而是关于多字节字符。

这有效：

```
 var exp:RegExp = new RegExp("[\u00A0-\u0FCF]", "gi");
 var str:String = "\u00A1 \u00A2 \u00A3 \u00A3";
 trace("subject:", str);
 trace("match:", str.match(exp)); 
```

这不会：

```
 var exp:RegExp = new RegExp("[\u00A0-\u0FD0]", "gi");
 var str:String = "\u00A1 \u00A2 \u00A3 \u00A3";
 trace("subject:", str);
 trace("match:", str.match(exp)); 
```

无论如何，您可以使用将字符串转换为匹配模式的 RegExp 构造函数。

# java - 解析“多部分/替代”内容类型

> ID：10414035
> 
> 赞同：2
> 
> 时间：2012-05-02T12:44:39.050
> 
> 标签：java, email, jakarta-mail, mime, multipart

我正在使用 javamail api 从收件箱文件夹中获取未读邮件，问题是`'multipart/alternative'`当我打电话时我得到了奇怪的内容类型`Message.getContentType()`。
此外，当我将消息（来自）的内容向下`Object`转换为类时，`Multipart`我得到一个异常

`Exception in thread "main" java.lang.classCastException: com.sun.mail.imap.IMAPInputStream cannot be cast to javax.mail.Multipart at............`

我只想获取电子邮件的内容并将其存储在数据库中。

```
 subject  = messages[j].getSubject();                                
        System.out.println(messages[j].getContentType());
        if(messages[j].getContent() instanceof Multipart)
        {                                  
            Multipart mime = (Multipart) messages[j].getContent();

            for (int i = 0; i < mime.getCount(); i++)
            {
                BodyPart part = mime.getBodyPart(i);
                content += part.getContent().toString();
            }
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:36:42.500

Multipart/alternative 并不奇怪；事实上，这很常见。电子邮件客户端通常使用它来创建同一消息的两个版本，一个是纯文本，另一个是 HTML。首先，您的电子邮件客户端必须检测到消息是多部分/替代的，它可以通过在标头部分中找到这些标头来做到这一点：

```
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary=some-boundary 
```

其次，它必须解析每个可选的正文部分，检查它们的标题以查看它想要处理哪个（或哪些），然后执行此操作。

```
--some-boundary
Content-Type: text/plain

...The plain text version of the email goes here...

--some-boundary
Content-Type: text/html

<html>...The html version of the content goes here...</html>

--some-boundary-- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:03:53.240

您可能会遇到[此处](https://forums.oracle.com/forums/thread.jspa?threadID=2369993&tstart=0)描述的相同问题。

请注意，multipart/alternative 是一种完全正常的类型，如此[处](http://www.oracle.com/technetwork/java/javamail/faq/index.html#sendmpa)所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T12:26:08.210

我在使用 Android JavaMail 阅读邮件附件时遇到了类似的问题。我已通过添加以下代码行来修复此错误。MailCap有问题，javamail找不到multipart/mixed部分的handler，所以需要加上这个位。这解决了我的问题。希望它可以帮助那里的人。

```
MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
CommandMap.setDefaultCommandMap(mc); 
```

干杯!

# java - wsit-client.xml 不修改 wsdl？

> ID：10414036
> 
> 赞同：1
> 
> 时间：2012-05-02T12:44:40.920
> 
> 标签：java, jax-ws, java-metro-framework, wsit

我们需要调用一个 Web 服务，在一个 wsdl 和多个技术文档中进行了描述。

Web 服务提供商表示他们支持 OASIS（ws-security，[http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0.pdf](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0.pdf)）。但是，我们从提供者那里收到的 wsdl 中没有提到这一点。

管理要求我们实现消息加密和签名。以前，这是使用轴和 wsdd 文件完成的。

我为 Web 服务创建了一个 jax-ws 客户端。现在，我想为其添加 ws-security。如果我理解正确，我需要编写一个 wsit-client.xml 文件。但是，我不确定是否需要在 wsdl 中引用它。如果可能的话，我不想改变它，所以如果我们得到一个新版本，我们就不需要改变它。这可能吗？

此外，我尝试使用 netbeans 生成 wsit-client.xml。我没有得到签名/加密的选项。是因为 wsdl 中没有提及任何政策吗？我们使用的是 Eclipse，所以我只使用 netbeans 进行快速测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:25:49.347

`wsit-client.xml`基本上是您的 WSDL 丰富了 <wsp:Policy> 声明，该声明准确地指定了如何/是否加密/签名/验证 SOAP 请求和响应。

您可以在此处查看 MCS（相互证书安全）的示例使用者：

[http://java.net/projects/wsit/sources/svn/show/trunk/wsit/samples/ws-security/src/mcs?rev=7090](http://java.net/projects/wsit/sources/svn/show/trunk/wsit/samples/ws-security/src/mcs?rev=7090)

* * *

要回答您的问题，您不必修改原始 WSDL。话虽如此，在具体的 WSDL 中包含策略规范总是非常可取的，因为策略是接口契约的重要组成部分，即它必须在消费者和提供者之间匹配才能使通信成功。

# php - mysql查询检查大于日期和时间

> ID：10414038
> 
> 赞同：2
> 
> 时间：2012-05-02T12:44:58.620
> 
> 标签：php, mysql

我的数据库中有两个日期和时间列。我想获取日期大于或等于当前日期和当前时间的行

我已经使用下面的查询来获得结果

```
SELECT DISTINCT     
A.appt_fromUser,A.date,A.time,A.appt_styleType,B.*,A.appt_shoutID,A.shout_status 
from appoint_db A 
INNER JOIN checkedin_db B ON A.appt_id=B.appid 
where A.appt_toUser='$userid' 
and A.date>='$date' 
and InChair='0' 
and A.time>='$time' 
```

但是，这并没有像我希望的那样工作。

例如，如果我有两行：

2012/05/30 时间：6.00
2012/05/30 时间：13.00

我用 2012/05/02 的日期和时间：12:00 查询这个，它只返回时间大于 12:00 的行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:29:33.563

如果日期与您检查的日期相同，您应该只检查时间。

```
SELECT DISTINCT     
A.appt_fromUser,A.date,A.time,A.appt_styleType,B.*,A.appt_shoutID,A.shout_status
from appoint_db A
INNER JOIN checkedin_db B ON A.appt_id=B.appid 
where A.appt_toUser='$userid'
and   InChair='0'
and (
       A.date>'$date'
       OR (
           A.date = '$date'
           AND
           A.time>='$time'
       )
    ) 
```

您还可以在选择之前连接日期和时间。我不会（可能不适用于某些语言环境）。

```
SELECT DISTINCT
A.appt_fromUser,A.date,A.time,A.appt_styleType,B.*,A.appt_shoutID,A.shout_status
from appoint_db A
INNER JOIN checkedin_db B ON A.appt_id=B.appid
where A.appt_toUser=1
and InChair='0'
AND CONCAT(A.date, ' ', A.time) >= '$date $time' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:45:51.713

mysql 中的 now() 函数返回当前时间戳。你可以用那个

# vb.net - server.htmlDecode() 使用 vb.net 从数据库返回 JSON 字符串时遇到问题

> ID：10414039
> 
> 赞同：0
> 
> 时间：2012-05-02T12:45:05.787
> 
> 标签：vb.net, json, decode, html-encode

我创建了一个函数，它基本上使我能够以与 Facebook 的 FQL 查询方法类似的方法从我的数据库中输出我需要的任何内容作为 JSON 文本结果。

我还可以使用相同的函数将输出作为字典或 List of(Dictionary) 与 VB 函数一起用于其他目的。

```
Public Shared Function getDataList(sql As String, output As String, useDb As String, labelName As String, fileName As String)
    Dim dataDetail
    '' This function will return the content of a query as either a key/value dictionary, or a key(key/value) result for formating 
    '' as JSON for JS handling or a Dictionary to use with server side codes

    If labelName <> "" Then
        dataDetail = New List(Of Generic.Dictionary(Of String, String))
    Else
        dataDetail = New Generic.Dictionary(Of String, Generic.Dictionary(Of String, String))
    End If

    Dim connection As OdbcConnection = Common.getConnection(useDb)
    Try
        connection.Open()
        Dim connect As OdbcCommand = Common.createCommand(sql, connection, useDb)

        Dim getData As New DataTable()
        getData.Load(connect.ExecuteReader(CommandBehavior.CloseConnection))
        For Each row In getData.Rows
            Dim rowDetail As New Generic.Dictionary(Of String, String)
            For Each column In getData.Columns
                Dim theData = row(column)

                If IsDBNull(theData) Then
                    theData = ""
                End If
                If LCase(output) = "json" Then
                    theData = HttpContext.Current.Server.HtmlDecode(theData)
                End If

                    rowDetail.Add(column.ToString, theData)

            Next

        Next
        connection.Close()
    Catch theError As Exception
        HttpContext.Current.Response.Write(theError)
    Finally
        connection.Dispose()
    End Try
    If output = "json" Then
        Dim serializer As New JavaScriptSerializer
        HttpContext.Current.Response.Write(serializer.Serialize(dataDetail))
    ElseIf output = "dictionary" Then
        Return dataDetail
    End If
End Function 
```

这很好用，我发现它对于快速从我的数据库中获取数据非常有用。

我唯一的问题是，当我将输出作为 JSON 文件获取时，我希望将存储在数据库中的任何内容作为编码 HTML 进行转换，以便在浏览器中很好地显示。

线

```
theData = HttpContext.Current.Server.HtmlDecode(theData) 
```

打算这样做，并且确实......有点......但今天这个角色：

```
&#39; 
```

不是解码。

有任何想法吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:25:36.647

啊……不支持那个字符！

我创建了自己的函数

```
Public Shared Function htmlDecode(str As String) As String
    Return Replace(HttpContext.Current.Server.HtmlDecode(str), "&#39;", "'")
End Function

Public Shared Function htmlEncode(str As String) As String
    Return Replace(HttpContext.Current.Server.HtmlEncode(str), "&#39;", "'")
End Function 
```

现在都在工作！

# c++ - Boost MSM 库给出错误

> ID：10414040
> 
> 赞同：1
> 
> 时间：2012-05-02T12:45:18.353
> 
> 标签：c++, boost, state-machine, boost-msm

下面的代码是 boost msm 文档中针对仿函数前端给出的示例。

```
 #include <vector>
#include <iostream>
// back-end
#include <boost/msm/back/state_machine.hpp>
//front-end
#include <boost/msm/front/state_machine_def.hpp>
// functors
#include <boost/msm/front/functor_row.hpp>
#include <boost/msm/front/euml/common.hpp>
// for And_ operator
#include <boost/msm/front/euml/operator.hpp>
// for func_state and func_state_machine
#include <boost/msm/front/euml/state_grammar.hpp>

using namespace std;
namespace msm = boost::msm;
namespace mpl = boost::mpl;
using namespace msm::front;
// for And_ operator
using namespace msm::front::euml;

namespace  // Concrete FSM implementation
{
    // events
    struct play {};
    struct end_pause {};
    struct stop {};
    struct pause {};
    struct open_close {};

    // A "complicated" event type that carries some data.
enum DiskTypeEnum
{
    DISK_CD=0,
    DISK_DVD=1
};
struct cd_detected
{
    cd_detected(std::string name, DiskTypeEnum diskType)
        : name(name),
        disc_type(diskType)
    {}

    std::string name;
    DiskTypeEnum disc_type;
};

// front-end: define the FSM structure
struct player_ : public msm::front::state_machine_def<player_>
{
    // The list of FSM states
    // entry and exit functors for Empty
    struct Empty_Entry
    {
        template <class Event,class FSM,class STATE>
        void operator()(Event const&,FSM&,STATE& )
        {
            std::cout << "entering: Empty" << std::endl;
        }
    };
    struct Empty_Exit
    {
        template <class Event,class FSM,class STATE>
        void operator()(Event const&,FSM&,STATE& )
        {
            std::cout << "leaving: Empty" << std::endl;
        }
    };
    // definition of Empty
    struct Empty_tag {};
    typedef msm::front::euml::func_state<Empty_tag,Empty_Entry,Empty_Exit> Empty;

    struct Open_Entry
    {
        template <class Event,class FSM,class STATE>
        void operator()(Event const&,FSM&,STATE& )
        {
            std::cout << "entering: Open" << std::endl;
        }
    };
    struct Open_Exit
    {
        template <class Event,class FSM,class STATE>
        void operator()(Event const&,FSM&,STATE& )
        {
            std::cout << "leaving: Open" << std::endl;
        }
    };
    struct Open_tag {};
    typedef msm::front::euml::func_state<Open_tag,Open_Entry,Open_Exit> Open;

    // states without entry/exit actions (can be declared as functor state, just without functors ;-) )
    struct Stopped_tag {};
    typedef msm::front::euml::func_state<Stopped_tag> Stopped;

    struct Playing_tag {};
    typedef msm::front::euml::func_state<Playing_tag> Playing;

    // state not defining any entry or exit (declared as simple state. Equivalent)
    struct Paused : public msm::front::state<>
    {
    };

    // the initial state of the player SM. Must be defined
    typedef Empty initial_state;

    // transition actions
    // as the functors are generic on events, fsm and source/target state,
    // you can reuse them in another machine if you wish
    struct TestFct
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const&, FSM&,SourceState& ,TargetState& )
        {
            cout << "transition with event:" << typeid(EVT).name() << endl;
        }
    };
    struct start_playback
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const& ,FSM& ,SourceState& ,TargetState& )
        {
            cout << "player::start_playback" << endl;
        }
    };
    struct open_drawer
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const& ,FSM& ,SourceState& ,TargetState& )
        {
            cout << "player::open_drawer" << endl;
        }
    };
    struct close_drawer
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const& ,FSM& ,SourceState& ,TargetState& )
        {
            cout << "player::close_drawer" << endl;
        }
    };
    struct store_cd_info
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const&,FSM& fsm ,SourceState& ,TargetState& )
        {
            cout << "player::store_cd_info" << endl;
            fsm.process_event(play());
        }
    };
    struct stop_playback
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const& ,FSM& ,SourceState& ,TargetState& )
        {
            cout << "player::stop_playback" << endl;
        }
    };
    struct pause_playback
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const& ,FSM& ,SourceState& ,TargetState& )
        {
            cout << "player::pause_playback" << endl;
        }
    };
    struct resume_playback
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const& ,FSM& ,SourceState& ,TargetState& )
        {
            cout << "player::resume_playback" << endl;
        }
    };
    struct stop_and_open
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const& ,FSM& ,SourceState& ,TargetState& )
        {
            cout << "player::stop_and_open" << endl;
        }
    };
    struct stopped_again
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        void operator()(EVT const& ,FSM& ,SourceState& ,TargetState& )
        {
            cout << "player::stopped_again" << endl;
        }
    };
    // guard conditions
    struct DummyGuard
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        bool operator()(EVT const& evt,FSM& fsm,SourceState& src,TargetState& tgt)
        {
            return true;
        }
    };
    struct good_disk_format
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        bool operator()(EVT const& evt ,FSM&,SourceState& ,TargetState& )
        {
            // to test a guard condition, let's say we understand only CDs, not DVD
            if (evt.disc_type != DISK_CD)
            {
                std::cout << "wrong disk, sorry" << std::endl;
                return false;
            }
            return true;
        }
    };
    struct always_true
    {
        template <class EVT,class FSM,class SourceState,class TargetState>
        bool operator()(EVT const& evt ,FSM&,SourceState& ,TargetState& )
        {
            return true;
        }
    };
    // we want to define one row with the classic look.
    bool auto_start(cd_detected const& evt)
    {
        return false;
    }

    typedef player_ p; // makes transition table cleaner

    // Transition table for player
    struct transition_table : mpl::vector<
        //    Start     Event         Next      Action                     Guard
        //  +---------+-------------+---------+---------------------------+----------------------+
        Row < Stopped , play        , Playing , ActionSequence_
                                                 <mpl::vector<
                                                 TestFct,start_playback> >
                                                                          , DummyGuard           >,
        Row < Stopped , open_close  , Open    , open_drawer               , none                 >,
        Row < Stopped , stop        , Stopped , none                      , none                 >,
        //  +---------+-------------+---------+---------------------------+----------------------+
        Row < Open    , open_close  , Empty   , close_drawer              , none                 >,
        //  +---------+-------------+---------+---------------------------+----------------------+
        Row < Empty   , open_close  , Open    , open_drawer               , none                 >,
        Row < Empty   , cd_detected , Stopped , store_cd_info             , And_<good_disk_format,
                                                                                 always_true>    >,
        // we here also mix with some "classical row"
      g_row < Empty   , cd_detected , Playing                             , &p::auto_start       >,
        //  +---------+-------------+---------+---------------------------+----------------------+
        Row < Playing , stop        , Stopped , stop_playback             , none                 >,
        Row < Playing , pause       , Paused  , pause_playback            , none                 >,
        Row < Playing , open_close  , Open    , stop_and_open             , none                 >,
        //  +---------+-------------+---------+---------------------------+----------------------+
        Row < Paused  , end_pause   , Playing , resume_playback           , none                 >,
        Row < Paused  , stop        , Stopped , stop_playback             , none                 >,
        Row < Paused  , open_close  , Open    , stop_and_open             , none                 >
        //  +---------+-------------+---------+---------------------------+----------------------+
    > {};
    // Replaces the default no-transition response.
    template <class FSM,class Event>
    void no_transition(Event const& e, FSM&,int state)
    {
        std::cout << "no transition from state " << state
            << " on event " << typeid(e).name() << std::endl;
    }
};
// Pick a back-end
typedef msm::back::state_machine<player_> player;

//
// Testing utilities.
//
static char const* const state_names[] = { "Stopped", "Open", "Empty", "Playing", "Paused" };
void pstate(player const& p)
{
    std::cout << " -> " << state_names[p.current_state()[0]] << std::endl;
}

void test()
{
    player p;
    // needed to start the highest-level SM. This will call on_entry and mark the start of the SM
    p.start();
    // go to Open, call on_exit on Empty, then action, then on_entry on Open
    p.process_event(open_close()); pstate(p);
    p.process_event(open_close()); pstate(p);
    // will be rejected, wrong disk type
    p.process_event(
        cd_detected("louie, louie",DISK_DVD)); pstate(p);
    p.process_event(
        cd_detected("louie, louie",DISK_CD)); pstate(p);
    // no need to call play() as the previous event does it in its action method
    //p.process_event(play());

    // at this point, Play is active
    p.process_event(pause()); pstate(p);
    // go back to Playing
    p.process_event(end_pause());  pstate(p);
    p.process_event(pause()); pstate(p);
    p.process_event(stop());  pstate(p);
    // event leading to the same state
    // no action method called as it is not present in the transition table
    p.process_event(stop());  pstate(p);
}
}

    int main()
    {
        test();
        return 0;
    } 
```

当我试图构建它时，它给我的错误不是在这个文件中，而是在 boost 库文件 proto 中。以下是我得到的错误

```
 /usr/include/boost/proto/detail/poly_function.hpp:223:1: error: missing binary operator before token "("
/usr/include/boost/proto/detail/poly_function.hpp:263:1: error: missing binary operator before token "("

In file included from /usr/include/boost/proto/make_expr.hpp:45:0,
                 from /usr/include/boost/proto/operators.hpp:22,
                 from /usr/include/boost/proto/core.hpp:26,
                 from /usr/include/boost/msm/back/fold_to_list.hpp:14,
                 from /usr/include/boost/msm/back/state_machine.hpp:55,
                 from ../src/msmtryouts.cpp:12:
/usr/include/boost/proto/detail/poly_function.hpp:223:1: error: missing binary operator before token "("
/usr/include/boost/proto/detail/poly_function.hpp:263:1: error: missing binary operator before token "("

/usr/include/boost/proto/detail/deduce_domain.hpp:41:20: error: redefinition of ‘struct boost::proto::detail::sized_type<N>’
/usr/include/boost/proto/proto_fwd.hpp:113:16: error: previous definition of ‘struct boost::proto::detail::sized_type<N>’
make: *** [src/msmtryouts.o] Error 1 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:54:50.490

我自己找到了答案。

1.  对于重定义问题 proto_fwd.hpp 包含在 deduce_domain.hpp 中，并且这两个文件都有模板结构“Sized_type”，所以我从 deduce_domain.hpp 中删除了它
2.  找到解决方法而不是在文件中使用#elif poly_function 使用#else #if #endif 问题解决了的缺少二元运算符错误

# android - 通过 CheckBox 对 ListActivity 进行排序

> ID：10414041
> 
> 赞同：0
> 
> 时间：2012-05-02T12:45:26.787
> 
> 标签：android

我有 2 个选项可以`ListActivity`通过`CheckBox`. 默认排序是在`CheckBox`未选中时，通过根据与用户的距离对列表中的附近地点进行排序，在选中时对`CheckBox`列表中的条目进行排序，列表中的条目将从AZ开始按字母顺序排序。

因此，默认情况下，当用户打开应用程序时，该复选框未选中，ListView 应根据“附近”进行排序。

当我不调用`ListViewAdapter`. 这意味着，首先，列表中的条目未排序，但在`CheckBox`检查时，它将按字母顺序对列表进行排序，当它未选中时，它将根据“附近”进行排序。

`sortNearby()`但是当我在里面调用方法时`ListViewAdapter`，字母排序方法根本不起作用。ListView 保持基于“附近”的排序。

单击 CheckBox 时，我需要做什么才能在 ListView 上启用字母排序方法更新？

以下是我如何根据单击 CheckBox 和方法本身来调用排序方法：

```
@Override
    public void onClick(View view) {
        // TODO Auto-generated method stub

        if (view == findViewById(R.id.cb_tab_sort)) {
             if (view.isSelected()){
                    view.setSelected(false);
                    sortNearby();
                    videoLocationAdapter.notifyDataSetChanged();

             } else {
                    view.setSelected(true);
                    sortAZ();
                    videoLocationAdapter.notifyDataSetChanged();
                }        
       }

    }

    public void sortAZ(){
        Arrays.sort(videoLocations, new Comparator<VideoLocation>() {

            @Override
            public int compare(VideoLocation lhs, VideoLocation rhs) {
                return lhs.name.compareTo(rhs.name);
            }
        });
    }

    public void sortNearby(){
        Arrays.sort(videoLocations, new Comparator<VideoLocation>() {

            @Override
            public int compare(VideoLocation lhs, VideoLocation rhs) {

                double lat = location.getLatitude();
                double lng = location.getLongitude();

                double lat1 = lhs.latitude;
                double lng1 = lhs.longitude;

                double lat2 = rhs.latitude;
                double lng2 = rhs.longitude;

                double lhsDistance = countDistance(lat,lng,lat1,lng1);
                double rhsDistance = countDistance(lat,lng,lat2,lng2);
                if (lhsDistance < rhsDistance) 
                    return -1;
                else if (lhsDistance > rhsDistance) 
                    return 1;
                else return 0;
            }
        });
    } 
```

这是我在 ListViewAdapter 中调用排序方法的方式

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        if(convertView == null){
            convertView = LocationsListActivity.this.getLayoutInflater().inflate(R.layout.listitems, null, true);
        }

        final VideoLocation vidLocation = videoLocations[position];

        //Image
        ImageView v = (ImageView)convertView.findViewById(R.id.image);
        String url = vidLocation.documentary_thumbnail_url;
        v.setTag(url);
        loader.DisplayImage(url, LocationsListActivity.this, v);

        //Title
        TextView titleView = (TextView)convertView.findViewById(R.id.txt_title);
        String title = vidLocation.name;
        titleView.setText(title.toUpperCase());
        Typeface fontRegular = Typeface.createFromAsset(getAssets(), "miso-regular.ttf");
        titleView.setTypeface(fontRegular);

        //Description
        TextView descView = (TextView)convertView.findViewById(R.id.txt_list_desc);
        String desc = vidLocation.text;
        descView.setText(desc);
        Typeface fontLight = Typeface.createFromAsset(getAssets(), "miso-light.ttf");
        descView.setTypeface(fontLight);

        //More
        TextView more = (TextView)convertView.findViewById(R.id.txt_more);
        more.setText(getString(R.string.de_list_more));
        more.setTypeface(fontLight);

        //Distance
        final TextView distanceView = (TextView)convertView.findViewById(R.id.txt_distance);
        distanceView.setTypeface(fontRegular);

        locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        if (locationManager == null) {
            Toast.makeText(LocationsListActivity.this,
                    "Location Manager Not Available", Toast.LENGTH_SHORT)
                    .show();
        }
        location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location == null)
            location = locationManager
                    .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        if (location != null) {

            double lat = location.getLatitude();
            double lng = location.getLongitude(); 

            double lat2 = roundDown(vidLocation.latitude);
            double lng2 = roundDown(vidLocation.longitude);

            if (countDistance(lat,lng,lat2,lng2)>= 500){
                double kilometer = countDistance(lat,lng,lat2,lng2) /1000;
                int decimalPlaces = 1;
                BigDecimal decimal = new BigDecimal(kilometer);
                decimal = decimal.setScale(decimalPlaces, BigDecimal.ROUND_HALF_UP);
                double new_km= decimal.doubleValue();
                distanceView.setText(new_km+" km");
            }
            else
            {
                int decimalPlaces = 1;
                BigDecimal decimal = new BigDecimal(countDistance(lat,lng,lat2,lng2));
                decimal = decimal.setScale(decimalPlaces, BigDecimal.ROUND_HALF_UP);
                double meter= decimal.doubleValue();
                distanceView.setText(meter +" m");
            }
        }

        locationListener = new LocationListener() {
            @Override
            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
            }

            @Override
            public void onProviderEnabled(String arg0) {
            }

            @Override
            public void onProviderDisabled(String arg0) {
            }

            @Override
            public void onLocationChanged(Location l) {
                location = l;
                locationManager.removeUpdates(this);
                if (l.getLatitude() == 0 || l.getLongitude() == 0) {
                } else {
                    double lat = l.getLatitude();
                    double lng = l.getLongitude(); 

                    double lat2 = roundDown(vidLocation.latitude);
                    double lng2 = roundDown(vidLocation.longitude);

                    if (countDistance(lat,lng,lat2,lng2)>= 500){
                        double kilometer = countDistance(lat,lng,lat2,lng2) /1000;
                        int decimalPlaces = 1;
                        BigDecimal decimal = new BigDecimal(kilometer);
                        decimal = decimal.setScale(decimalPlaces, BigDecimal.ROUND_HALF_UP);
                        double new_km= decimal.doubleValue();
                        distanceView.setText(new_km+" km");
                    }
                    else
                    {
                        int decimalPlaces = 1;
                        BigDecimal decimal = new BigDecimal(countDistance(lat,lng,lat2,lng2));
                        decimal = decimal.setScale(decimalPlaces, BigDecimal.ROUND_HALF_UP);
                        double meter= decimal.doubleValue();
                        distanceView.setText(meter +" m");
                    }
                }
            }
        };

        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
            locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, 1000, 10f, locationListener);
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 1000, 10f, locationListener);
        locationtimer = new CountDownTimer(30000, 5000) {
            @Override
            public void onTick(long millisUntilFinished) {
                if (location != null)
                    locationtimer.cancel();
            }

            @Override
            public void onFinish() {
                if (location == null) {
                }
            }
        };
        locationtimer.start();
                sortNearby();
        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:50:28.673

您是否尝试`sortNearby();`在 getView 方法中删除？

您不能在 getView 方法中调用它。

# ruby-on-rails - ruby on rails 如何知道在@params 中放入什么？

> ID：10414042
> 
> 赞同：0
> 
> 时间：2012-05-02T12:45:27.153
> 
> 标签：ruby-on-rails, rhomobile

我应该在我的 html 页面中做些什么来将 id/value 放入 POST 的控制器方法中的 @params 实例中？IE：

```
<input type='hidden' id='qgroup' value='blahDeBlah'/> 
```

如何以正确的 id 作为键将 id='qgroup' 的值放入 @params？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:54:57.537

您需要添加字段的名称才能从参数中使用它。

`<input type='hidden' name='qgroup' id='qgroup' value='blahDeBlah'/>`

# algorithm - 最小生成树是否害怕负权重？

> ID：10414043
> 
> 赞同：58
> 
> 时间：2012-05-02T12:45:29.460
> 
> 标签：algorithm, data-structures, graph, minimum-spanning-tree

[这是为什么大多数图算法不那么容易适应负数](https://stackoverflow.com/questions/10381474/graph-why-most-graph-algorithms-do-not-adapt-so-easily-to-negative-numbers)的后续问题？.

我认为最短路径 (SP) 存在负权重问题，因为它会将路径上的所有权重相加并试图找到最小的权重。

但我不认为最小生成树（MST）有负权重的问题，因为它只需要单个最小权重边缘而不关心整体总权重。

我对吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-02T12:54:21.247

是的你是对的。MST 的概念允许任意符号的权重。寻找 MST 的两种最流行的算法（Kruskal's 和 Prim's）可以很好地处理负边缘。

实际上，您可以为图形的所有边添加一个大的正常数，使所有边为正。MST（作为边的子集）将保持不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-13T08:05:19.990

是的，你是对的，因为如果你看到像 dijkstera 这样的最短路径算法，它会检查顶点 v 的当前距离是否大于当前值 + 边权重的总和，那么它将改变顶点 v 到 s 的距离值总和值，如果边缘权重为负，则会出现一些问题。

但是在 MST 问题中，有像 prims,kruskal 这样的算法，它们只采用最小权重边，使负边符合 MST 的条件。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2019-02-27T17:50:53.850

是的，你是对的 Prim 的算法与 dijkstra 的算法一样工作，但在 prim 的算法中，它不应该计算从 i 到 j 的最短路径有负边。因此，他们的另一种算法是他们的贝尔曼福特算法，用于计算从 i 到 j 的最短路径，具有负边缘。

因此 prim 和 Kruskal 的算法并不害怕负边缘。

# html - 为什么我的 div 不能放在 ie7 中的图像之上？

> ID：10414044
> 
> 赞同：1
> 
> 时间：2012-05-02T12:45:31.360
> 
> 标签：html, css, internet-explorer-7

我知道 ie7 z-index 错误，但我仍然无法让 div 位于 ie 中的图像之上。这是我拥有的当前代码：

```
<div id="wrapper">
  <div id="content">
    <div class="copy">...</div>
    <div id="toggle-view"></div>
    <img id="view" src="/..." />
  </div>
</div> 
```

这是样式：

```
#wrapper { width: 960px; margin: 0 auto 0 auto; background: #fff; }
#content { width: 960px; height: 555px; position: relative; z-index: 20; }
#toggle-view { display: block; width: 150px; height: 25px; cursor: pointer; position: absolute; top: 12px; right: 10px; z-index: 10; }
#view { width: 722px; height: 555px; position: relative; z-index: 1; } 
```

这在 Chrome/FF 等中运行良好，但不适用于 ie7。如何让#toggle-view div 位于#view img 之上。

谢谢

编辑：好的，我想通了。出于某种原因，如果元素没有设置“背景”属性，它将无法在 ie 中正确处理 z-indexes（任何版本似乎......甚至 9）。天哪，我非常讨厌IE..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:30:53.837

当您说在顶部时，您的意思是您希望 div 位于其之上或之上？

我使用您的代码创建了一个 jsfiddle [http://jsfiddle.net/trickeedickee/wPz2X/](http://jsfiddle.net/trickeedickee/wPz2X/)，它在 IE7 中运行良好，您的 #toggle-view div 位于容器的右侧，这是故意的。让我知道这是否是答案，如果不是，我会尝试为您提供更多帮助。

为了 100% 清楚，我在 IE7 中附上了 jsfiddle 的屏幕截图。我的#toggle-view 位于图像的左侧，就像图层堆栈一样。它清楚地位于图像的顶部。这不是你想要的结果吗？

![在此处输入图像描述](../Images/916ebac5289455bd09b18afc64f8b28e.png)

# asp.net - 数据表到具有唯一行的字符串

> ID：10414045
> 
> 赞同：0
> 
> 时间：2012-05-02T12:45:33.703
> 
> 标签：asp.net, vb.net

我有一个数据表，我想使用这个数据表创建一个文本文件。我希望新创建的文本文件的每一行都是唯一的。如果有重复行，则应在两行（重复行）中添加 *

我正在使用以下代码：

```
 Dim str As String
            For Each row As DataRow In dataTable.Rows
                str += row(1)  ' This is text data            
                str += "<br/>"
            Next 
```

请建议我如何使行独一无二。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:12:13.393

在我的示例中，我使用了一个包含数据的数组，但只需将数组部分替换为您的 DataTable 就可以了。基本上，您使用 DataTable 信息构建一个字符串列表，然后使用 LINQ 检查该数据是否已经存在一次或多次。

```
 Dim data As String() = {"A", "B", "C", "D", "E", "A", "E", "F", "G", "H", "A", "A", "B", "X", "Y", "Z"}
    Dim processedData = New List(Of String)
    Dim rowData = String.Empty
    Dim results = New StringBuilder()

    For Each row As String In data
        processedData.Add(row)
    Next

    For Each row As String In processedData
        rowData = row

        If (processedData.Where(Function(d) d = rowData).Count = 1) Then
            results.Append(rowData)
            results.Append("<br />")
        Else
            results.Append(rowData)
            results.Append("*")
            results.Append("<br />")
        End If

    Next 
```

结果字符串是

```
A*<br />
B*<br />
C<br />
D<br />
E*<br />
A*<br />
E*<br />
F<br />
G<br />
H<br />
A*<br />
A*<br />
B*<br />
X<br />
Y<br />
Z<br /> 
```

# php - 如何获取已存储在服务器上的图像的 URL

> ID：10414048
> 
> 赞同：2
> 
> 时间：2012-05-02T12:45:38.493
> 
> 标签：php, html, url, image-uploading

这一定很容易，但我不知道如何从服务器获取图像的 URL。

假设我有一个名为 www.example.com 的域，并且图像已存储在我的

```
htdocs>www>resources>userid>images>image.jpg 
```

因此，我想上传一张图片并通过 php 脚本将其保存到我的图片文件夹中，然后将该图片的 URL 返回给浏览器，例如，

```
www.example.com/.../.../images/image.jpg 
```

是否有任何 php 函数来获取文件的 URL？

## 编辑：

看了答案后，我想我应该更加澄清自己。误会真的很抱歉

**我想要的帮助是：**如果域名不是静态的，我的意思是您可以下载我的图片上传插件并将其附加到您的网站，但现在它应该动态获取域名和图片的 http 路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:49:35.060

因为我没有你的插件，所以我不知道你的代码流程。我在下面的猜测，希望您可以根据您的代码对其进行修改。

假设我将您的插件下载到我的网站并使用它上传图像。您可以像这样获取图像路径：

```
<?php
$upload_path = 'PATH_WHERE_IMAGE_IS_UPLOADED';
$image_name = 'NAME_OF_THE_UPLOADED_IMAGE';

$relative_path = $upload_path . DS . $image_name;

$path = str_replace( $_SERVER['DOCUMENT_ROOT'], $_SERVER['SERVER_NAME']
                                                            , $relative_path );

$path = 'http://' . $path; // this is where image is uploaded
?> 
```

**注意：**这假设上传目录位于 webroot 中。

希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:51:43.083

试试这个

```
$image='name of your image uploaded';
$imageurl='http://www.example.com/images'.$image;
echo '<input type=text name="image" value="'.$imageurl.'" disabled />; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:55:15.637

**已编辑**

例如，如果您有：

```
$domain = $_SERVER['SERVER_NAME'];
$uploadPath = "/htdocs/www/resources/userid/images/image.jpg"

// replace "/htdocs/www", with an empty string
$subdir = str_replace("/htdocs/www", "", $uploadPath);

$url = $domain.$subdir; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:20:37.633

您可以查看 PHP 函数[move_uploaded_file()](http://www.php.net/manual/en/function.move-uploaded-file.php)的手册页。如果我了解您的问题，则有解决方案。

# google-chrome - Chrome：与 Firefox 不同的边框半径

> ID：10414050
> 
> 赞同：3
> 
> 时间：2012-05-02T12:45:44.757
> 
> 标签：google-chrome, css

我有一些在 Firefox 中完美运行的 HTML/CSS；然而，在 Chrome 中，表单/边框被挤压了！我一直在玩代码几个小时无济于事。有人可以帮忙吗？谢谢！

这是小提琴：http: [//jsfiddle.net/W22DC/19/](http://jsfiddle.net/W22DC/19/)

或者，如果您愿意，代码如下...

CSS：

```
.form1 input{
font-weight:normal;
font-size:100%;
border: 2px solid purple;
-moz-border-radius:15px;
-khtml-border-radius:15px;
-webkit-border-radius:15px;
border-radius:15px 15px 15px 15px;
background-color:transparent;    
padding: 2px 6px 2px 6px;
}
.form1 input:hover, input:focus{
border: 2px solid black;
cursor:pointer;
} 
```

的HTML：

```
<br />
<div class="form1" align="center"><form name="Example" action="" method="post" style="margin-bottom: 0">
<input type="submit" name="submit" value="7" />
</form></div>
<br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:13:02.690

这是输入上的一个[已知 chrome 错误](http://designfestival.com/border-radius-and-inset-box-shadow-bug-solution/)，您不能有一个边框半径加起来超过元素的高度。如果你想要它完美的圆形，那么确保尺寸是准确的。

例如代码：

```
.form1 input{
    font-weight:normal;
    font-size:100%;
    border: 2px solid purple;
    -moz-border-radius:15px;
    -khtml-border-radius:15px;
    -webkit-border-radius:15px;
    border-radius:15px;
    background-color:transparent;        
    padding:0;
    height:30px;
    width:30px;
    line-height:28px;
    text-align:center;
}
    .form1 input:hover, input:focus{
    border: 2px solid black;
    cursor:pointer;
} 
```

对于 15 像素的边框半径，您需要一个至少为 30 像素 x 30 像素的元素。

**归功于[保罗](http://www.sitepoint.com/forums/showthread.php?850589-Chrome-Form-Border-Radius-Different-than-Firefox&p=5112662&viewfull=1#post5112662)。**

# android - 在模拟器 1.6 上运行单元测试时，Dalvikvm 因“LinearAlloc 超出容量”而崩溃

> ID：10414063
> 
> 赞同：4
> 
> 时间：2012-05-02T12:46:14.870
> 
> 标签：android, unit-testing

我有一个库项目和一些单元测试。在模拟器 v1.6 上运行单元测试时，我得到“LinearAlloc 超出容量，last=3136”崩溃。相同的测试项目在模拟器 v2.1 及更高版本上运行良好。

有没有办法解决这个问题？

请参阅堆栈跟踪：

```
05-02 11:27:01.450: E/dalvikvm(558): LinearAlloc exceeded capacity, last=3136
05-02 11:27:01.450: E/dalvikvm(558): VM aborting
05-02 11:27:01.550: I/DEBUG(28): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
05-02 11:27:01.550: I/DEBUG(28): Build fingerprint: 'generic/sdk/generic/:1.6/Donut/20842:eng/test-keys'
05-02 11:27:01.550: I/DEBUG(28): pid: 558, tid: 574  >>> com.***.android <<<
05-02 11:27:01.550: I/DEBUG(28): signal 11 (SIGSEGV), fault addr deadd00d
05-02 11:27:01.550: I/DEBUG(28):  r0 0000032c  r1 80000000  r2 0000000c  r3 00000026
05-02 11:27:01.550: I/DEBUG(28):  r4 deadd00d  r5 00400088  r6 ad083e1c  r7 003ff43c
05-02 11:27:01.550: I/DEBUG(28):  r8 00003071  r9 002ab040  10 424bfd00  fp 00000001
05-02 11:27:01.550: I/DEBUG(28):  ip ad083ef8  sp 45089c50  lr afe13f0d  pc ad03b7fa  cpsr 20000030
05-02 11:27:01.680: I/DEBUG(28):          #00  pc 0003b7fa  /system/lib/libdvm.so
05-02 11:27:01.690: I/DEBUG(28):          #01  pc 00042892  /system/lib/libdvm.so
05-02 11:27:01.690: I/DEBUG(28):          #02  pc 00060a10  /system/lib/libdvm.so
05-02 11:27:01.700: I/DEBUG(28):          #03  pc 00059f10  /system/lib/libdvm.so
05-02 11:27:01.700: I/DEBUG(28):          #04  pc 00013198  /system/lib/libdvm.so
05-02 11:27:01.700: I/DEBUG(28):          #05  pc 00017be4  /system/lib/libdvm.so
05-02 11:27:01.700: I/DEBUG(28):          #06  pc 0001762c  /system/lib/libdvm.so
05-02 11:27:01.700: I/DEBUG(28):          #07  pc 000529a8  /system/lib/libdvm.so
05-02 11:27:01.710: I/DEBUG(28):          #08  pc 00059eda  /system/lib/libdvm.so
05-02 11:27:01.710: I/DEBUG(28):          #09  pc 00013198  /system/lib/libdvm.so
05-02 11:27:01.710: I/DEBUG(28):          #10  pc 00017be4  /system/lib/libdvm.so
05-02 11:27:01.710: I/DEBUG(28):          #11  pc 0001762c  /system/lib/libdvm.so
05-02 11:27:01.720: I/DEBUG(28):          #12  pc 0005282c  /system/lib/libdvm.so
05-02 11:27:01.720: I/DEBUG(28):          #13  pc 0005284a  /system/lib/libdvm.so
05-02 11:27:01.720: I/DEBUG(28):          #14  pc 00047800  /system/lib/libdvm.so
05-02 11:27:01.720: I/DEBUG(28):          #15  pc 0000f940  /system/lib/libc.so
05-02 11:27:01.720: I/DEBUG(28):          #16  pc 0000f4b4  /system/lib/libc.so
05-02 11:27:01.730: I/DEBUG(28): stack:
05-02 11:27:01.730: I/DEBUG(28):     45089c10  000b1210  [heap]
05-02 11:27:01.730: I/DEBUG(28):     45089c14  afe12f59  /system/lib/libc.so
05-02 11:27:01.730: I/DEBUG(28):     45089c18  afe39f90  /system/lib/libc.so
05-02 11:27:01.730: I/DEBUG(28):     45089c1c  afe39fe4  /system/lib/libc.so
05-02 11:27:01.730: I/DEBUG(28):     45089c20  00000000  
05-02 11:27:01.730: I/DEBUG(28):     45089c24  afe13f0d  /system/lib/libc.so
05-02 11:27:01.730: I/DEBUG(28):     45089c28  0000000d  
05-02 11:27:01.730: I/DEBUG(28):     45089c2c  afe12f29  /system/lib/libc.so
05-02 11:27:01.730: I/DEBUG(28):     45089c30  000111b8  [heap]
05-02 11:27:01.740: I/DEBUG(28):     45089c34  ad083e1c  /system/lib/libdvm.so
05-02 11:27:01.740: I/DEBUG(28):     45089c38  00400088  [heap]
05-02 11:27:01.740: I/DEBUG(28):     45089c3c  ad083e1c  /system/lib/libdvm.so
05-02 11:27:01.740: I/DEBUG(28):     45089c40  003ff43c  [heap]
05-02 11:27:01.740: I/DEBUG(28):     45089c44  afe12f8d  /system/lib/libc.so
05-02 11:27:01.740: I/DEBUG(28):     45089c48  df002777  
05-02 11:27:01.740: I/DEBUG(28):     45089c4c  e3a070ad  
05-02 11:27:01.740: I/DEBUG(28): #00 45089c50  000111b8  [heap]
05-02 11:27:01.740: I/DEBUG(28):     45089c54  ad042897  /system/lib/libdvm.so
05-02 11:27:01.740: I/DEBUG(28): #01 45089c58  ad083e1c  /system/lib/libdvm.so
05-02 11:27:01.740: I/DEBUG(28):     45089c5c  00000001  
05-02 11:27:01.740: I/DEBUG(28):     45089c60  00000c40  
05-02 11:27:01.750: I/DEBUG(28):     45089c64  0000000a  
05-02 11:27:01.750: I/DEBUG(28):     45089c68  00400084  [heap]
05-02 11:27:01.750: I/DEBUG(28):     45089c6c  000111bc  [heap]
05-02 11:27:01.750: I/DEBUG(28):     45089c70  5000121c  
05-02 11:27:01.750: I/DEBUG(28):     45089c74  000001c0  
05-02 11:27:01.750: I/DEBUG(28):     45089c78  ad083e1c  /system/lib/libdvm.so
05-02 11:27:01.750: I/DEBUG(28):     45089c7c  43ed1790  /dev/ashmem/mspace/dalvik-heap/2 (deleted)
05-02 11:27:01.760: I/DEBUG(28):     45089c80  4144b400  /dev/ashmem/dalvik-LinearAlloc (deleted)
05-02 11:27:01.760: I/DEBUG(28):     45089c84  ad060a15  /system/lib/libdvm.so
05-02 11:27:01.810: D/dalvikvm(551): GC freed 10165 objects / 534720 bytes in 36ms
05-02 11:27:03.019: D/dalvikvm(551): GC freed 9963 objects / 523736 bytes in 54ms
05-02 11:27:07.659: D/Zygote(30): Process 558 terminated by signal (11)
05-02 11:27:07.670: I/ActivityManager(68): Process com.***.android (pid 558) has died.
05-02 11:27:07.670: W/ActivityManager(68): Crash of app com.***.android running instrumentation ComponentInfo{com.***.android.test/android.test.InstrumentationTestRunner}
05-02 11:27:07.670: D/ActivityManager(68): Uninstalling process com.***.android
05-02 11:27:07.680: D/AndroidRuntime(551): Shutting down VM
05-02 11:27:07.680: D/dalvikvm(551): DestroyJavaVM waiting for non-daemon threads to exit
05-02 11:27:07.680: D/dalvikvm(551): DestroyJavaVM shutting VM down
05-02 11:27:07.680: D/dalvikvm(551): HeapWorker thread shutting down
05-02 11:27:07.680: D/dalvikvm(551): HeapWorker thread has shut down
05-02 11:27:07.680: D/jdwp(551): JDWP shutting down net...
05-02 11:27:07.680: D/jdwp(551): Got wake-up signal, bailing out of select
05-02 11:27:07.680: I/dalvikvm(551): Debugger has detached; object registry had 1 entries
05-02 11:27:07.680: D/dalvikvm(551): VM cleaning up
05-02 11:27:07.690: D/dalvikvm(551): LinearAlloc 0x0 used 684532 of 4194304 (16%) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:05:22.247

同样的问题，我发现了这个：

“这是在异常复杂的界面层次结构上触发的 Dalvik 限制。

[http://code.google.com/p/android/issues/detail?id=22586](http://code.google.com/p/android/issues/detail?id=22586)

有关解决方法的想法，请参阅详细信息。简单的答案可能是尝试使用不太复杂的不同库。

修复程序已合并到 Android AOSP。[https://android-review.googlesource.com/#/c/30900/](https://android-review.googlesource.com/#/c/30900/) "

# mysql - 按结果分组排序 MySQL

> ID：10414065
> 
> 赞同：0
> 
> 时间：2012-05-02T12:46:46.980
> 
> 标签：mysql, sql

我有一个表格，它本质上是每个用户的活动日志，我想显示自用户上次活动以来已经过了多长时间。

询问：

```
SELECT message_log.log_phone_number, message_log.log_updated
FROM message_log
WHERE message_log.log_mode = “inbound”
GROUP BY  message_log.log_phone_number 
```

结果

```
415407XXXX  2012-03-07 13:34:14      
434242XXXX  2012-03-07 16:00:42          
434465XXXX  2012-03-07 14:49:15          
434989XXXX  2012-03-07 15:30:22          
757615XXXX  2012-03-07 15:30:54          
804651XXXX  2012-03-07 14:13:04          
920917XXXX  2012-03-07 15:11:28 
```

问题：我的结果显示最旧的时间戳，我想要最新的。有什么办法可以`ORDER`在里面`GROUP BY`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:50:11.917

```
SELECT message_log.log_phone_number, max(message_log.log_updated) 
FROM message_log 
WHERE message_log.log_mode = “inbound” 
GROUP BY message_log.log_phone_number 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:50:41.267

你只需要一个 MAX()。

```
SELECT message_log.log_phone_number, 
MAX(message_log.log_updated) as log_updated
FROM message_log
WHERE message_log.log_mode = “inbound”
GROUP BY  message_log.log_phone_number 
```

# c# - 我的asp gridview有错误

> ID：10414066
> 
> 赞同：0
> 
> 时间：2012-05-02T12:46:48.473
> 
> 标签：c#, asp.net, html, gridview

我希望将我的电子邮件读入网格视图，但我不断收到错误消息，我不知道为什么？

这是我用来插入网格视图的代码，但是当我点击运行时它失败了。

```
<asp:GridView ID="gvEmails" runat="server" AutoGenerateColumns="false" OnSelectedIndexChanged="gvEmails_SelectedIndexChanged">
    <Columns>
        <asp:BoundField HeaderText="From" DataField="From" />
        <asp:HyperLinkField HeaderText="Subject" DataNavigateUrlFields="MessageNumber" DataNavigateUrlFormatString="~/webFormShow.aspx?MessageNumber={0}"
            DataTextField="ubject" />
        <asp:BoundField HeaderText="Date" DataField="DateSent" />
    </Columns>
</asp:GridView> 
```

考虑到我从我的一个工作程序中复制了这段代码，这真的很奇怪？

下面的错误是他们给我的所有信息

> 编译器错误消息：CS1061：“ASP.displaymaillist_aspx”不包含“gvEmails_SelectedIndexChanged”的定义，并且找不到接受“ASP.displaymaillist_aspx”类型的第一个参数的扩展方法“gvEmails_SelectedIndexChanged”（您是否缺少 using 指令或装配参考？）

我究竟做错了什么？？

他们没有给我太多信息，所以我只能提供一点点:(但我当然希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:49:45.403

**OnSelectedIndexChanged="gvEmails_SelectedIndexChanged"**从您的 aspx 中删除它或在 cs 类中添加事件。当后面的代码中缺少代码时，会发生此异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:50:54.387

事件处理程序`gvEmails_SelectedIndexChanged`需要存在于文件后面的代码中 - 您是否也复制了该部分？

如果您在设计器中选择网格，然后从事件窗口中，您应该能够双击 SelectedIndexChanged 事件，它将为您生成（我不记得它是否为 ASPX 页面执行此操作，但如果您直接键入它在 ASPX 页面中，那么设计器也可以为您自动完成）。

# html - 使链接 div 中的文本可选

> ID：10414071
> 
> 赞同：3
> 
> 时间：2012-05-02T12:46:58.677
> 
> 标签：html, hyperlink

我正在创建一个网页，并有一个我想要链接的部分，虽然我有一些文本希望允许用户从中复制和粘贴（即他们需要能够突出显示它），但在此部分内。因为文本在链接的 div 内，但我无法选择它，我怎样才能使文本可选？

这是我的代码...

```
<a href="http://google.com">
    <div class="container"> 
        <h2>Heading</h2>
        <p class="selectable-text">Text that can be highlighted here</p>
        <p>Other Text</p>
    </div>
</a> 
```

我试过把它放在 CSS 中，但这只是改变了光标，它实际上并没有使文本可选......

```
.selectable-text{
    cursor:text;
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:52:48.137

a-Elements 不允许在其中包含块元素。因此，您不能以这种方式构建布局。仅将标题设为链接怎么样？这很好，您可以轻松选择其他文本：

```
<div class="container"> 
    <h2><a href="http://example.com">Heading</a></h2>
    <p>Text that can be highlighted here</p>
    <p>Other Text</p>
</div> 
```

为了使整个容器可点击，您可以将 Javascript 事件侦听器应用于所有容器。如果您已经在使用 jQuery，这可以很容易地完成：

```
$('.container').each(function(){
    $(this).on('click', function(){
        location.href = $(this).find('a').attr('href');
    });
}).addClass('link'); 
```

从这个链接到“真实”链接的区别在于它不是可拖动的，而是可选择的。无论如何，您可以单击它，它会将您定位到您想去的地方。它还将应用一个`.link`可以在样式表中使用的类，以便将指针设置为光标。

对于禁用了 javascript 的人，标题中仍然会有一个链接，因此您的页面在任何情况下都可以使用。

# facebook - 为什么点击新闻提要上的链接需要用户授权

> ID：10414072
> 
> 赞同：1
> 
> 时间：2012-05-02T12:47:00.070
> 
> 标签：facebook, post, hyperlink, authorization

我在 Facebook 上做了一个应用程序，从我的网页向我的帐户发送帖子。所以我使用 Facebook C# SDK 成功了。 [这是我的帖子的图片](http://cdn3.hazirportal.com/files/hazirportal.com/yuklenenicerik/facebook-news-feed-1.png)

但是当我点击帖子的链接时，Facebook 将我定向到我的 Facebook 应用程序的授权页面。在我点击跳过按钮或允许按钮后，我会转到我发布的网页。 [这是授权页面的图像](http://cdn3.hazirportal.com/files/hazirportal.com/yuklenenicerik/facebook-news-feed-2.png)

我意识到如果我点击他们的链接，其他一些应用程序的帖子不会让我授权。像这样。当我点击它的标题时，我会转到他们共享的网页。它也是一个帖子消息，是从不共享链接的 Facebook 应用程序发送的。

所以。如何防止点击我的帖子的用户转到我的应用程序的授权页面。此用户不属于我的 Facebook 应用程序。他们是我的朋友。

谢谢

# java - 如何从 Java 调用 Clojure 可变参数函数

> ID：10414075
> 
> 赞同：11
> 
> 时间：2012-05-02T12:47:09.573
> 
> 标签：java, clojure, interop, variadic-functions

是否可以在 Clojure 中声明一个可变参数函数，该函数可以作为 Java 的可变参数方法调用？

考虑一些正在开发的代码的摘录：

```
(ns com.mydomain.expression.base 
  (:gen-class
    :name com.mydomain.expression.Base
    :methods [^:static [exprFactory [String String ?????] Object]]
  )

(defn expr-factory
  ; worker function that is also called from Clojure
  [id func & args]
  (let [ex ("construction code here")]
    ex))

(defn -exprFactory
  ; interface method called from Java
  [idStr funcStr & argsArray]
  (apply expr-factory idStr funcStr (seq argsArray))) 
```

有什么我可以代替的，`?????`以允许 Java 调用该`exprFactory`方法并知道它是一个 varargs 方法：

```
import com.mydomain.expression.Base;
...
Object e1 = Base.exprFactory("e1", "day");
Object e2 = Base.exprFactory("e2", "length", "string");
Object e3 = Base.exprFactory("e3", "*", 4, 5);
Object sum = Base.exprFactory("sum", "+", e1, e2, e3); 
```

为了使这一点更清楚一点，我知道我使用`Object`代替`?????`并更改`exprFactory`为：

```
(defn -exprFactory
  ; interface method called from Java
  [idStr funcStr argsArray]
  (apply expr-factory idStr funcStr (seq argsArray))) 
```

..但这意味着我必须像这样编写 Java 调用：

```
import com.mydomain.expression.Base;
...
Object e1 = Base.exprFactory("e1", "day", new Object[0] ));
Object e2 = Base.exprFactory("e2", "length", new Object[] { "string" }));
Object e3 = Base.exprFactory("e3", "*", new Integer[] { 4, 5 }));
Object sum = Base.exprFactory("sum", "+", new Object[] { e1, e2, e3 })); 
```

同样，我知道我可以在 Java 中编写一个调用 non-variadic 的 varargs 包装器方法`exprFactory`，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:03:34.153

我建议在 Java 端编写您的辅助函数，例如[clojure.lang.AFn中的“applyToHelper”](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/AFn.java)

这将采用类似于以下内容的 Java 函数的形式：

```
 public Object invokeVariadic(IFn function, Object... args) {
     switch (args.length) {
       case 0:
         return function.invoke();
       case 1:
         return function.invoke(args[0]);
       /// 20-odd more cases
     }
   } 
```

这有点小技巧，取决于[clojure.lang.IFn](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/IFn.java)的内部定义，但至少你会在 Java 端获得相对不错的可变参数语法（即不需要做这些`new Object[] {...}`事情）。

# javascript - 如何通过 jQuery 在 HTML 输入中存储值

> ID：10414076
> 
> 赞同：0
> 
> 时间：2012-05-02T12:47:12.387
> 
> 标签：javascript, jquery, input

在我的 HTML 中，我有：

```
<div>
    <input type="hidden" id="field" value="-1"/>
</div> 
```

在我的 jQuery 中，我有：

```
var fieldInput = $("#field");

if(someBoolIsTrue)
    fieldInput.value = 4; 
```

在这个 JS 执行之后，我去打印 hidden 的值`field`，它告诉我它仍然是`-1`。我在这里错误地使用了 jQuery 吗？！？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T12:47:58.137

您应该将值设置为 `fieldInput.val(4);`

另一种方法是`fieldInput[0].value = 4;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:48:22.903

对于 jQuery 对象，您必须使用`val`方法：

```
var fieldInput = $("#field");
if(someBoolIsTrue)
    fieldInput.val(4); 
```

或者不使用 jQuery：

```
document.getElementById("field").value = 4; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:48:39.343

使用 id 字段设置输入中的值

```
$("#field").val("your value"); 
```

从中获取价值（例如：提醒价值）

```
alert($("#field").val()); 
```

# php - 将 MySQL 和 XML 数据合并在一起并对其进行排序

> ID：10414081
> 
> 赞同：0
> 
> 时间：2012-05-02T12:47:26.820
> 
> 标签：php, mysql, xml

我正在寻找一种将 MySQL 和 XML 数据合并在一起的方法，因此我可以按时间戳对它们进行排序。理想的情况是这样的：

```
SELECT timestamp, title
FROM news
UNION ALL
SELECT timestamp, title 
FROM xmlsource('local.xml')
ORDER BY timestamp DESC 
```

这样的事情可能吗？或者他们是否有任何其他方式来合并数据源并对它们进行排序？感谢您提供正确方向的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:00:50.640

我不知道这会有多有效，但你可以自己测试一下。这里是：

```
<?php
$sql = 'SELECT timestamp, title FROM news ORDER BY timestamp DESC';
$run = mysql_query( $sql, $link );

$result = array();
if( $run && mysql_num_rows( $run ) ) {
    while( ( $fetch = mysql_fetch_assoc( $run ) ) !== false ) {
        $time = $fetch[ 'timestamp' ];
        $title = htmlspecialchars( $fetch[ 'title' ], ENT_COMPAT, 'UTF-8' );

        $result[ $time ][] = $title;
        // this is an array, in case multiple title have same timestamp.
    }
}

$xml = simplexml_load_file( 'local.xml' );
$xpath = $xml->xpath( '//story' );

foreach( $xpath as $story ) {
    $time = $story->time;
    $title = (string) $story->headline;

    $result[ $time ][] = $title; // append this to the results array.
}

// sort by timestamp ascending
arsort( $result );
?> 
```

希望能帮助到你。

# java - 使用 Gin 进行现场水平注射

> ID：10414089
> 
> 赞同：0
> 
> 时间：2012-05-02T12:47:50.890
> 
> 标签：java, dependency-injection, guice, gwt-gin

我正在尝试进行字段级注入，因此当我的控制器被实例化时，我不必传递“模型”，例如，

```
UserController controller = new UserController(/*No need to pass models here*/); 
```

但是我的应用程序抛出 NullPointerException，这里是我的代码：

**用户控制器.java**

```
 public class UserController implements Controller {
        @Inject private UserModel model;
        public UserController() {
          model.doSomething(); // NullPointerException
        }
    } 
```

**ClientGinModule.java**

```
public class ClientGinModule extends AbstractGinModule {
    @Override
    protected void configure() {
        bind(UserModel.class).in(Singleton.class);
    }
} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:01:15.487

在 Guice 中使用

```
UserController controller = injector.getInstance(UserController.class); 
```

在杜松子酒中使用：

```
// Declare a method returning a UserController on your interface extending Ginjector
public UserController getUserController();

// When you need the controller, just call:
injector.getUserController(); 
```

得到一个完全注入的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:32:42.103

`model`当构造函数仍在运行时，您的字段将为空。`UserController`它会在对象完全创建后由 GIN 注入。在这里[GWT GIN Field Level Injection](https://stackoverflow.com/questions/9458683/gwt-gin-field-level-injection)你可以找到很好的解释。

# drupal - 将字符串传递到视图内容窗格并在视图标题中打印

> ID：10414092
> 
> 赞同：0
> 
> 时间：2012-05-02T12:48:00.417
> 
> 标签：drupal, drupal-views, drupal-panels

我有一个查看内容窗格，显示带有特定标签的最新 3 篇文章。使用的标签作为面板界面中的参数传递给上下文过滤器。我需要在视图上方（在标题中）显示作为参数传递的标签的名称。

如何在视图标题中打印标签名称或作为参数传递的字符串？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:41:07.503

我的建议：

1) 您需要启用 php 作为视图标题的输入类型。然后在此处放置代码以打印标签。

2）使用视图中的主题链接，找到负责输出的模板文件。在您自己的模板目录中覆盖它。

# java - 如何在jsp页面加载时调用servlet？

> ID：10414093
> 
> 赞同：7
> 
> 时间：2012-05-02T12:48:01.033
> 
> 标签：java, jsp, servlets

我有下面的servlet。我想在`jsp`页面加载时调用 servlet。我怎样才能做到这一点？

小服务程序： `SomeServlet.java`

```
<servlet>
  <servlet-name>Hello</servlet-name>
  <servlet-class>SomeServlet</servlet-class>
 </servlet>
 <servlet-mapping>
 <servlet-name>Hello</servlet-name>
 <url-pattern>/HelloWorld</url-pattern>
 </servlet-mapping> 
```

如何编写相应的 jsp 以在 jsp 页面加载时调用 servlet。我还需要从 servlet 获取结果并显示在同一个 jsp 中。我可以将结果发送回`jsp`吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T13:20:41.953

你应该反过来做。通过其 URL 调用 servlet 并让它呈现 JSP。这也是正常的 MVC 方法（servlet 是控制器，JSP 是视图）。

首先将 JSP 文件放在`/WEB-INF`文件夹中，这样最终用户永远不会在不调用 servlet 的情况下直接在浏览器地址栏中输入其 URL 来“意外”打开它。然后相应地更改 servlet `doGet()`，使其将请求转发给 JSP。

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // ...

    request.getRequestDispatcher("/WEB-INF/hello.jsp").forward(request, response);
} 
```

打开它

> [http://localhost:8080/contextname/HelloServlet](http://localhost:8080/contextname/HelloServlet)

请注意，您当然可以将 servlet 映射中的 URL 模式更改为类似的东西，`/hello`以便您可以使用更具代表性的 URL：

> [http://localhost:8080/contextname/hello](http://localhost:8080/contextname/hello)

### 也可以看看：

*   [我们的 Servlets 标签信息页面](https://stackoverflow.com/tags/servlets/info)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:49:58.003

```
<jsp:include page="/HelloWorld"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:50:56.413

在 JSP 页面中，您可以将请求转发到 Servlet

```
response.sendRedirect(request.getContextPath()+"/SomeServlet"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:49:36.887

调用 servlet 而不是在请求属性中获取结果并将请求转发给 jsp

或在加载时对 servlet 进行 ajax 调用并使用 javascript 呈现响应

# c++ - 如何将动态分配的多维结构数组写入文件？

> ID：10414097
> 
> 赞同：0
> 
> 时间：2012-05-02T12:48:18.940
> 
> 标签：c++, fwrite

结构

```
struct str
{
  int a;
  char b[20];
  int c;
} 
```

宣言

```
struct str ** str_array=0; 
```

分配和初始化（使用）

```
str_array= new struct str*[100];
for(int i=0;i<100;++i)
   str_array[i]=new struct str[1000];

for(int i=0;i<100;++i)
   for(int j=0;j<1000;++j;
      str_array[i][j].a=j;
       ..... 
```

现在我试着写数组的内容，比如

```
for(int i=0;i<100;++i)
   for(int j=0;j<1000;++j;
     fwrite(str_array[i][j],sizeof(str),1,fname); 
```

问题

> 不存在从**str**到**const void***的合适转换

我打算以相同的风格阅读它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:51:28.927

改变：

```
 fwrite(str_array[i][j],sizeof(str),1,fname); 
```

到：

```
 fwrite(&str_array[i][j],sizeof(str),1,fname); 
```

# android - 屏幕分辨率/物理尺寸

> ID：10414100
> 
> 赞同：0
> 
> 时间：2012-05-02T12:48:32.507
> 
> 标签：android, android-screen

我正在为 Android（API 10）实现一个应用程序。我的平板电脑（据说）和手机的设计很少。关于上一句，这听起来可能有点愚蠢：在我看来，布局应该根据设备的物理尺寸而不是分辨率来选择，否则可能会有一部高分辨率的手机呈现 5x5 的网格，相当混乱，不够小巧的方式。为了按物理大小提供划分，我必须使用*/res/layout-* * 文件夹。同意？

另外：我对[多屏](http://developer.android.com/guide/practices/screens_support.html)指南对物理尺寸的定义有点困惑。您介意解释一下 Android 的物理尺寸是**什么意思吗？它的测量单位是**什么？**与 dpi**有任何相关性吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:24:24.053

api 级别 10 的解决方法可能是这样的：

1.  使用 SDK 中的兼容库，以便您可以使用片段进行设计。

2.  假设 android 3 之前的一切都是手机。例如，为此使用 layout/* 中的布局文件（其余的将基于它，除非被覆盖）。这种假设基本上只对 2009 年的原始三星 Galaxy Tab 7" 是错误的。

3.  假设 android 3.x 上的所有东西都是平板电脑（它们是），所以如果你愿意，可以做一些平板电脑特定的布局，并将它们放在 layout-v11 下（如果有任何特定于 android 3.1 的东西，也可能还有 layout-v12）。特定于平板电脑的布局可能意味着您以不同方式排列片段和/或同时显示多个片段。

4.  一切更新（android 3.2+）你可以使用来自 api 级别 13 的新东西。例如 layout-sw600dp/ 用于某些布局等。[http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:07:33.400

**物理尺寸**通常以英寸为单位，它只是告诉您*真实*设备的屏幕尺寸（手机通常为 3-4 英寸，平板电脑通常为 8-11 英寸）。

**dpi**，与它不相关。Dpi 表示屏幕密度，即在给定区域（通常是一平方英寸）中显示多少像素。它可以被认为是衡量屏幕质量的标准。

**分辨率**由两者的乘积给出；它表示屏幕上物理像素的总数。

回到你的第一个问题，你应该尽可能**地独立于密度**；你的应用在不同密度的设备上应该“看起来一样”。/ *res/layout-* * 文件夹旨在提供此功能，系统将可绘制资源缩放到适当的大小，然后您可以在清单中声明您的应用程序支持任何密度：

```
android:anyDensity="true" 
```

在[http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)页面上，您可以了解 Android 如何选择最佳匹配资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:06:33.013

使用 Android API 10，针对平板电脑的最佳选择可能只是使用以下代码在代码中区分屏幕的实际大小： [https](https://stackoverflow.com/a/5789916/1319155) ://stackoverflow.com/a/5789916/1319155 ，然后加载不同的可绘制对象（如果大小）返回的值大于 6（或您要声明为“平板电脑”的任何大小）。

你不能真的只使用大小文件夹（即布局/大）的原因是因为文件夹不能很好地区分手机和平板电脑。kindle fire 和galaxy nexus 都可以被认为是“大型”设备。

您不能真正使用 dpi 的原因是因为这不能很好地反映它是什么类型的设备，而不能很好地反映屏幕上像素的“密集程度”。无论如何，大多数新手机都比平板电脑更密集（每英寸像素更多）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T19:38:09.120

有两种方法可以做到这一点。从 Android 1.6 (API 4) 开始，有四种布局可以描述显示器的物理尺寸：小、普通、大和超大。如[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)所述，这些对应于：

> *   超大屏幕至少为 960dp x 720dp
> *   大屏幕至少为 640dp x 480dp
> *   普通屏幕至少为 470dp x 320dp
> *   小屏幕至少为 426dp x 320dp

请注意，这些是以 DP 而非 DPI 衡量的。DPI 是每英寸点数，并指定屏幕密度。DP，也写成 DIP，是与密度无关的像素。再次来自指南：

> 与密度无关的像素 (dp)
> 
> 定义 UI 布局时应使用的虚拟像素单位，以与密度无关的方式表示布局尺寸或位置。与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。在运行时，系统会根据使用中屏幕的实际密度，根据需要透明地处理 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：px = dp * (dpi / 160)。例如，在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素。在定义应用程序的 UI 时，您应该始终使用 dp 单位，以确保您的 UI 在不同密度的屏幕上正确显示。

换句话说，160 DP = 1"。应用这个标准，我们看到：

*   xlarge 屏幕至少为 6" x 4.5"（对角线为 7.5"）
*   大屏幕至少为 4" x 3"（5" 对角线）
*   普通屏幕至少为 2.9" x 2"（对角线 3.5"）
*   小屏幕至少为 2.6" x 2"（对角线为 3.3"）

（不知道为什么选择如此奇怪，但这就是他们定义的。）

从 Android 3.2 (API 13) 开始，有更多选项，如下所述：http: [//developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

在这里您可以使用“最小屏幕宽度”、“可用宽度”或“可用高度”选项来定义自己的类别；同样，有问题的单位是 DP，即 1/160"。请注意，这些指定了设备上两个维度中较小的一个 - 例如，对于 7" 平板电脑，他们建议指定 layout-sw600dp，即“最小宽度 3.75 英寸”，这将介于 API 4 中定义的“大”和“特大”尺寸之间。他们对此主题有许多具体的评论，包括关于如何测量宽度的注释（它可能不包括像通知栏），因此值得查看文档。

# sql - 如何计算给定公式的三列中的值？

> ID：10414102
> 
> 赞同：1
> 
> 时间：2012-05-02T12:48:37.360
> 
> 标签：sql, sql-server-2000

我正在使用 SQL Server 2000。我正在尝试根据以下公式计算净推荐值或 NPS

***公式***：`(Promoters - Detractors) / Total Questions`

*   分数 9-10 被认为是*促进者*。
*   0-6 分被认为是*贬低者*。
*   分数 7-8 被认为是*中性*的。

我有以下数据：

```
Time           Q1      Q2      Q3
-----------  ------  ------  ------
2012-03-14      7       7       5
2012-03-15      3       2       5
2012-03-15      7      NA       2
2012-03-15      9      10     NULL
2012-03-15      8       4       4
2012-03-15     NA       6       4
2012-03-16      1       7       4
2012-03-16     NULL     0       5
2012-03-17      9       9       2
2012-03-19      0       0       1
2012-03-19      8       5       4
2012-03-19      1       0       3 
```

最初编写数据库的人将值存储为**NVARCHAR**`NULL`格式的空白或 NA （只有上帝知道为什么..）所以我正在使用的查询现在使用**ISNUMERIC**并且我试图不计算空白或 NA 值。`enter code here`

 ****我的查询无法正常工作，如下所示：

```
 SELECT CAST(SUM(CASE WHEN ISNUMERIC([Q1]) != 1 THEN 0
             WHEN CAST([Q1] AS int) >= 9 THEN 1
             WHEN CAST([Q1] AS int) <= 6 THEN -1
             ELSE 0 END)
    + SUM(CASE WHEN ISNUMERIC([Q2]) != 1 THEN 0
             WHEN CAST([Q2] AS int) >= 9 THEN 1
             WHEN CAST([Q2] AS int) <= 6 THEN -1
             ELSE 0 END)
    + SUM(CASE WHEN ISNUMERIC([Q3]) != 1 THEN 0
             WHEN CAST([Q3] AS int) >= 9 THEN 1
             WHEN CAST([Q3] AS int) <= 6 THEN -1
             ELSE 0 END)
   AS FLOAT)
    / (SUM(CASE WHEN ISNUMERIC([Q1]) != 1 THEN 0
               ELSE 1 END)
    + SUM(CASE WHEN ISNUMERIC([Q2]) != 1 THEN 0
               ELSE 1 END)
    + SUM(CASE WHEN ISNUMERIC([Q3]) != 1 THEN 0
               ELSE 1 END)
   ) as [NPS]
FROM [nps] 
```

有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:20:19.297

正如其他人指出的那样，将列的数据类型从 更改`NVARCHAR`为`INT`将是理想的。

这是可以帮助您获得所需结果的查询。

[**单击此处查看使用 SQL Server 2012 在 SQL Fiddle 中的演示**](http://sqlfiddle.com/#!6/90a91/1)

*脚本*：

```
SELECT  
        (
            SUM (CASE WHEN q >= 9 THEN 1\.  END) -
            SUM (CASE WHEN q <= 6 THEN 1\.  END)
        ) /
        SUM (1.) AS nps
FROM
(
        SELECT  (CASE   
                    WHEN ISNUMERIC(q1) <> 1 THEN 0\. 
                    ELSE CAST(q1 AS FLOAT) 
                END) AS q   
        FROM [nps] 
    UNION ALL 
        SELECT  (CASE 
                    WHEN ISNUMERIC(q2) <> 1 THEN 0\. 
                    ELSE CAST(q2 AS FLOAT) 
                END) AS q   
        FROM [nps] 
    UNION ALL 
        SELECT  (CASE 
                    WHEN ISNUMERIC(q3) <> 1 THEN 0\. 
                    ELSE CAST(q3 AS FLOAT) 
                END) AS q   
        FROM [nps] 
) nps; 
```

*输出*：

```
np
---------
-0.611111 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:59:08.273

修复数据库怎么样？如果值实际上为 0，是否存在错误表示 NA 或空白的情况？如果不是，则将所有空格和 NA 转换为 0，将列数据类型更改为 int 并且不允许为空。然后你的生活就变得简单多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:07:40.677

不要乱投你的数据类型。要么更改架构，要么本地处理它们。

```
SELECT
  SUM(
    CASE WHEN [Q1] IN (      '9', '10') THEN  1.0
         WHEN [Q1] IN ('7',  '8', 'NA') THEN  0.0
         WHEN [Q1] IS NULL              THEN  0.0
                                        ELSE -1.0 END
  + CASE WHEN [Q2] IN (      '9', '10') THEN  1.0
         WHEN [Q2] IN ('7',  '8', 'NA') THEN  0.0
         WHEN [Q2] IS NULL              THEN  0.0
                                        ELSE -1.0 END
  + CASE WHEN [Q3] IN (      '9', '10') THEN  1.0
         WHEN [Q3] IN ('7',  '8', 'NA') THEN  0.0
         WHEN [Q3] IS NULL              THEN  0.0
                                        ELSE -1.0 END
  )
  /
  SUM(
    CASE WHEN [Q1] <> 'NA' THEN 1.0 ELSE 0.0 END
  + CASE WHEN [Q2] <> 'NA' THEN 1.0 ELSE 0.0 END
  + CASE WHEN [Q3] <> 'NA' THEN 1.0 ELSE 0.0 END
  )                                                        AS [nps]
FROM
  [nps] 
```

除数很好很简单；如果 [Qn] 值为 NULL，则测试失败并返回 0.0 :)

您还可以进一步简化它，而无需更改架构，始终使用`NULL`而不是`'NA'`.****

# android - 使用 AsyncTask 下载 XML 文件

> ID：10414105
> 
> 赞同：1
> 
> 时间：2012-05-02T12:48:51.297
> 
> 标签：android, android-asynctask, httprequest

我一直在开发一个简单的天气应用程序 - 我正在使用 Google Weather API。我正在尝试下载 XML 文件并根据其中的信息构建 UI。

我尝试使用 AsyncTask 下载 XML 文件然后解析它 - 但有些东西不起作用！当我运行代码时，我没有任何错误/应用程序启动但未显示 xml 文件中的信息！

这是代码：

```
 package com.android.weatherApp;

public class WeatherAppActivity extends Activity {

    static String url="http://www.google.com/ig/api?weather=";
    static final String KEY_FORCAST_INFO="forcast_information";
    static final String KEY_CITY="city";
    static final String KEY_CURRENT_CONDITIONS="current_conditions";
    static final String KEY_CONDITION="condition";
    static final String KEY_TEMP="temp_c";
    static final String KEY_ICON_SRC="icon";
    static final String KEY_FORCAST_COND="forecast_conditions";
    static final String KEY_DAY_WEEK="day_of_week";
    static final String KEY_LOW_TEMP="low";
    static final String KEY_HIGH_TEMP="high";
    Document finalDoc;
    XMLParser xmlParser;
    private TextView currentWeather;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        downloadXMLFile task=new downloadXMLFile();
        task.execute("New+York");

    }

    private class downloadXMLFile extends AsyncTask<String,Void,String>
    {
        @Override
        protected String doInBackground(String... params) {

            String xml=null;

            try{
                DefaultHttpClient httpClient=new DefaultHttpClient();
                HttpPost httpPost=new HttpPost(url+params[0]);
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity=httpResponse.getEntity();
                xml=EntityUtils.toString(httpEntity);

            }
            catch(UnsupportedEncodingException e)
            {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return xml;
        }

        @Override
        protected void onPostExecute(String xmlString)
        {
            Document doc = null;
            DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();

            try {
                DocumentBuilder db = dbf.newDocumentBuilder();
                InputSource is=new InputSource();

                is.setCharacterStream(new StringReader(xmlString));
                doc=db.parse(is);

            } catch (ParserConfigurationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SAXException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            finalDoc=doc;

            NodeList nl=finalDoc.getElementsByTagName(KEY_CURRENT_CONDITIONS);
              NodeList nl2=finalDoc.getElementsByTagName(KEY_FORCAST_COND);
              currentWeather=(TextView)findViewById(R.id.currentState);
              TextView currentTemp = (TextView)findViewById(R.id.tempC);
              TextView currentLocation=(TextView)findViewById(R.id.currentLocation);
              currentLocation.setText("Iasi");

              for(int i=0;i<nl.getLength();i++)
              {
                Element e= (Element)nl.item(i);
                String cs=xmlParser.getValue(e, KEY_CONDITION).toUpperCase();
                currentWeather.setText(cs);

                String temperature=xmlParser.getValue(e, KEY_TEMP);
                currentTemp.setText(temperature);

                String logoImg=xmlParser.getValue(e, KEY_ICON_SRC).toLowerCase();

                if(logoImg.equals("/ig/images/weather/sunny.gif"))
                {
                    ImageView img=(ImageView)findViewById(R.id.wImg);
                    img.setImageResource(R.drawable.sun);
                }

              }

              for(int i=0;i<nl2.getLength();i++)
              {
                Element e=(Element)nl2.item(i);
                TextView day1=(TextView)findViewById(R.id.day1);
                day1.setText("TOMORW");
                TextView day2=(TextView)findViewById(R.id.day2);
                TextView day3=(TextView)findViewById(R.id.day3);
                ImageView img1=(ImageView)findViewById(R.id.day1Logo);
                ImageView img2=(ImageView)findViewById(R.id.day2Logo);
                ImageView img3=(ImageView)findViewById(R.id.day3Logo);
                TextView highTemp1=(TextView)findViewById(R.id.day1MaxTemp);
                TextView highTemp2=(TextView)findViewById(R.id.day2MaxTemp);
                TextView highTemp3=(TextView)findViewById(R.id.day3MaxTemp);

                String d1=xmlParser.getValue(e, KEY_DAY_WEEK).toUpperCase();
                String t=xmlParser.getValue(e, KEY_HIGH_TEMP); //get the max value of temperature - Fahrenheit
                int tempF=Integer.parseInt(t); // make the string a number
                float tC=(float) ((5./9)*(tempF-32)); // calculate the Celsius value of temperature
                tempF=(int)tC; // get only the Int value
                t=Integer.toString(tempF); // transform the temperature value back to string

                switch(i)
                {
                case 1:
                    highTemp1.setText(t);
                    break;
                case 2:
                    highTemp2.setText(t);
                    day2.setText(d1);
                    break;
                case 3:
                    highTemp3.setText(t);
                    day3.setText(d1);
                    break;
                }
              }
        }

    } 
```

如果你能告诉我我做错了什么，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:57:26.047

首先，您的 url 变量包含 "http://www.google.com/ig/api?weather=" 而不是 "http://www.google.com/ig/api?weather=New+York" 所以 xml 内容是空的。

在 doInBackground 方法中尝试这样的事情：

```
String currentUrl = url; 
if(params.length>0 && params[0]!=null)currentUrl+= params[0]; 
```

我看到您在循环中实例化了您的视图。您必须在 onCreate 方法或 onStart 方法中实例化它们。这样做，您将在创建活动后实例化这些变量并获得性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:18:47.040

在您的清单中，您添加了`<uses-permission android:name="android.permission.INTERNET"/>`吗？

您可以`Log.i("test",xmlString);`输入您的 onPostExecute 并在您的日志中查看结果吗？

# javascript - 防止回发失败：isValid="undefined"

> ID：10414111
> 
> 赞同：1
> 
> 时间：2012-05-02T12:49:10.523
> 
> 标签：javascript, jquery, asp.net, ajax, json

我有防止回发的代码但失败了。基本上我有一个asp.net 按钮。

```
<asp:Button ID="btnSave" runat="server" Text="SaveChanges" OnClick="btnSave_Click"
        CssClass="saveButton" ValidationGroup="answer" OnClientClick="return ValidateUserNameBeforeSubmitting();" /> 
```

和ajax 调用web 服务。

```
function ValidateUserName() {
        $.ajax({ type: "POST",
            url: "../UserNameWebService.asmx/ValidateUserName",
            data: "{'strUsername': '" +JSON.stringify( $("#<%=TextUserName.ClientID%>").val()) + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",

            async: false,
            success: function (data) {
                return data.d;
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            }
        });
    }

    function ValidateUserNameBeforeSubmitting() {
        var isValid = ValidateUserName();
        return isValid;
    } 
```

Web 服务将返回一个布尔值，当我进入代码时它会返回。但是，当我进入 javascript 代码时，我发现“isValid”不是布尔值。它是“未定义的”。为什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:53:23.080

Ajax 是异步的。

`var isValid = ValidateUserName();`

此行执行，但您正在调用的函数没有返回（因此`undefined`）

如果要访问从 ajax 返回的变量，它需要在成功处理程序中。

```
function ValidateUserName() {
    var returnValue;
    $.ajax({ type: "POST",
        ...
        async: false,
        success: function (data) {
            returnValue = data.d;
        },
        ...
    });
    return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:55:18.563

`isValid`是未定义的，因为`ValidateUserName()`实际上并没有返回任何东西。

将ajax调用更改为此

```
 function ValidateUserName() {

        var results = $.ajax({ type: "POST",
        url: "../UserNameWebService.asmx/ValidateUserName",
        data: "{'strUsername': '" +JSON.stringify( $("#<%=TextUserName.ClientID%>").val()) + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",

        async: false
    });

    return results;
    //or results.d; if thats what you need for the boolean
} 
```

当 ajax 被标记为`async:false`ajax 调用的结果时包含你的结果。而不是将其传递给成功函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:56:23.157

限定一个返回变量，以便所有路径都返回并确保您的 ajax 调用返回一个布尔值：

```
function ValidateUserName() {
    var result = false; //default 
    $.ajax({ type: "POST",
        url: "../UserNameWebService.asmx/ValidateUserName",
        data: "{'strUsername': '" +JSON.stringify( $("#  <%=TextUserName.ClientID%>").val()) + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: function (data) {
            result = data.d;  //make sure this is a bool
            //result = Boolean(data.d); //use this if returning a string, not recommended though
            alert(result); //are you a bool?
        },
        error: function (xhr, ajaxOptions, thrownError) {              
            alert(xhr.status);
            alert(thrownError);
        }
    });

    return result;
}

function ValidateUserNameBeforeSubmitting() {
    var isValid = ValidateUserName();
    return isValid;
} 
```

# ios - UIView 上有什么类似的功能方法（viewWillAppear）？

> ID：10414116
> 
> 赞同：33
> 
> 时间：2012-05-02T12:49:18.407
> 
> 标签：ios, objective-c, uiview, uikit, viewwillappear

当视图即将显示在屏幕上时，会在 UIViewController 上调用 viewWillAppear。是否有可能在 UIView 上获得类似的回调？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-02T13:47:37.837

[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)参考中的以下内容怎么样

> willMoveToSuperview:, didMoveToSuperview - 根据需要实现这些方法以跟踪当前视图在视图层次结构中的移动。

这至少会告诉您何时将其添加到视图层次结构中，但不能保证视图层次结构已呈现/可见。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-02T12:53:35.050

不，但是您可以将该通知从您的视图控制器转发到所需的视图。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-15T00:34:02.413

*   *请注意，我最初打算在[此处](https://stackoverflow.com/questions/23971064/viewdiddisappear-for-uiview#comment93502412_23971064)发布此答案，但由于几年前有人问过此问题，因此我将其标记为重复，现在将在此处回答。*

# 宏观解决方案

我为此制定了一个非常优雅且易于使用的宏解决方案。

* * *

# .m

将以下内容添加到您的 .m

```
-(void)viewDidLoad {
    //normal stuff
}

__METHOD_MACRO_wasRemovedFromSuperview() {
    //Code here will run whenever this view is removed from its superview
}

__METHOD_MACRO_wasAddedAsSubview() {
    //Code here will run whenever this view is added as the subview of another view
} 
```

是的！它真的很容易！

*（由于下面如何设置宏的 ifdef 切换，您可以使用其中一个或两个或两者！）*

* * *

# 。H

将以下内容添加到下面的 .h 中`@end` *（或者，如果您想保持清洁，您可以简单地添加到名为 macros.h 的文件中并#import 它）*

*注意：如果您将这个（或导入这个）添加到多个相互导入或相互@class 的文件中，您最终可能会弄乱#ifdef 逻辑并且这个宏可能会失败，我建议从单独的.h 文件中导入它对于您需要的每个类，创建此宏的目的更多是为了证明概念，而不是在生产代码中使用*

```
//Logic for __METHOD_MACRO_wasAddedAsSubview() and __METHOD_MACRO_wasRemovedFromSuperview()

#define startSuppressingWarnings() \
_Pragma("clang clang diagnostic push")\
_Pragma("clang diagnostic ignored \"-Weverything\"")

#define stopSuppressingWarnings() \
_Pragma("clang clang diagnostic pop")

#define __INTERNAL_METHOD_MACRO__didChangeSuperviewsSetup() \
-(void)didMoveToWindow {\
[super didMoveToWindow];\
if (self.window && self.superview) {\
startSuppressingWarnings()/*Hide potential undeclared selector warnings*/\
if ([self respondsToSelector:@selector(__wasAddedAsSubview)]) {\
[self performSelector:@selector(__wasAddedAsSubview)];\
}\
stopSuppressingWarnings()\
} else {\
startSuppressingWarnings()/*Hide potential undeclared selector warnings*/\
if ([self respondsToSelector:@selector(__wasRemovedFromSuperview)]) {\
[self performSelector:@selector(__wasRemovedFromSuperview)];\
}\
stopSuppressingWarnings()\
}\
}

#ifdef __INTERNAL_METHOD_MACRO__didChangeSuperviewsSetup_wasSetup
///Called when UIView was added as subview OR moved to another superview OR if another VC was presented
#define __METHOD_MACRO_wasAddedAsSubview() \
-(void)__wasAddedAsSubview/*{ //perform extra processes here }*/
#else
#define __INTERNAL_METHOD_MACRO__didChangeSuperviewsSetup_wasSetup 1
///Called when UIView was added as subview OR moved to another superview
#define __METHOD_MACRO_wasAddedAsSubview() \
__INTERNAL_METHOD_MACRO__didChangeSuperviewsSetup() \
-(void)__wasAddedAsSubview/*{ //perform extra processes here }*/
#endif

#ifdef __INTERNAL_METHOD_MACRO__didChangeSuperviewsSetup_wasSetup
///Called when UIView is removed as subview from superview or when its parent window is removed
#define __METHOD_MACRO_wasRemovedFromSuperview() \
-(void)__wasRemovedFromSuperview/*{ //perform extra processes here }*/
#else
#define __INTERNAL_METHOD_MACRO__didChangeSuperviewsSetup_wasSetup 1
///Called when UIView is removed as subview from superview
#define __METHOD_MACRO_wasRemovedFromSuperview() \
__INTERNAL_METHOD_MACRO__didChangeSuperviewsSetup() \
-(void)__wasRemovedFromSuperview/*{ //perform extra processes here }*/
#endif 
```

# iphone - LLDB 用它的地址识别一个对象

> ID：10414123
> 
> 赞同：0
> 
> 时间：2012-05-02T12:49:38.530
> 
> 标签：iphone, xcode, didreceivememorywarning, lldb

我正在开发从以前的开发人员那里恢复的 iPad 应用程序。有时我会收到以下消息：

```
Received memory warning.
applicationDidReceiveMemoryWarning:
[ResultsListViewController respondsToSelector:]: message sent to deallocated instance 0x2b1c70 
```

应用程序停在

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

我知道，在应用程序收到内存警告后，应用程序正试图从一个已经被释放的类中执行一个函数。问题是，正如我所说，我没有开发应用程序，所以我找不到问题发生的地方，即使`NSZombies`启用了。

有没有办法使用带有对象内存地址（在我的情况下为 0x2b1c70）的 LLDB（或任何其他方式）来检索问题发生的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:06:12.923

使用符号断点，本教程向您展示如何使用它们：http: [//iosdevelopertips.com/debugging/tracking-down-exception-errors.html](http://iosdevelopertips.com/debugging/tracking-down-exception-errors.html)

希望这可以帮助！

山姆

# zend-framework - 使用连接到另一个 sftp 服务器的 zend 框架提供大文件

> ID：10414128
> 
> 赞同：1
> 
> 时间：2012-05-02T12:50:07.363
> 
> 标签：zend-framework, sftp

我正在使用 phpseclib 进行安全的 ssh 和 ftp 访问。我的网站在一个网络服务器上，它连接到不同的备份服务器并显示文件和文件夹，想象一下在几个不同服务器上备份的前端。

现在我希望他们能够下载文件，但我想不出比将文件临时存储在前端网络服务器上更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:20:44.187

我查看了 phpseclib 文档，并没有看到一种以快速有效的方式将文件从其中一个备份服务器传输到前端服务器到客户端的好方法，而无需将文件从备份服务器完全复制到前端服务器之前将其传递给客户端。

使用[cURL](http://php.net/curl)，您可以在通过 cURL 从备份服务器下载文件的同时，使用其回调函数之一为客户端提供下载服务。cURL 将支持 ssh 和 sftp。这样，您不必让前端从备份中完全下载文件，然后才能将其发送到客户端。

我在这个答案中使用 FTP 协议展示了一个类似的例子：[Streaming a file fromFTP and let user to download it at the same time](https://stackoverflow.com/questions/10272611/streaming-a-file-fromftp-and-letting-user-to-download-it-at-the-same-time/10272727#10272727)

如果您对使用 SSH 和您的系统实施此解决方案有任何疑问，请随时寻求更多帮助。

# c# - 是否有任何我可以重用的 Url Spider 组件？

> ID：10414129
> 
> 赞同：1
> 
> 时间：2012-05-02T12:50:07.657
> 
> 标签：c#, .net, url, hyperlink, web-crawler

我想构建一个蜘蛛工具，我可以使用它来针对网站根 url 运行它，然后它应该通过指定解析程度来找到所有损坏和健康的链接（图像、css、.aspx、.docs），例如 2 个级别.

然后最后它应该在 Xml 或 DataTables 中生成结果的映射

是否有任何现成的第三方或免费工具可以在我的 .NET 应用程序中重复使用？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:00:06.797

我以前使用过 Chilkat ASP.Net Spider 组件。它允许您指定要抓取的级别数，并允许您设置排除项等。

它不会自动为您生成地图（或者至少我使用的版本没有），但是将结果记录到数据库或 XML 应该相当容易。组件的详细信息可以在[这里](http://www.example-code.com/csharp/spider.asp)找到，您可以从[这里免费下载组件](http://www.chilkatsoft.com/downloads_DotNet.asp)

# ruby - 将 spawn() 的 stdout/stderr 重定向到 Ruby 中的字符串

> ID：10414132
> 
> 赞同：6
> 
> 时间：2012-05-02T12:50:14.193
> 
> 标签：ruby

我想使用 spawn（用于多个并发子进程）在 Ruby 中执行一个外部进程，并将 stdout 或 stderr 收集到一个字符串中，这与使用 Python 的子进程 Popen.communicate() 可以完成的操作类似。

我尝试将 :out/:err 重定向到一个新的 StringIO 对象，但这会生成一个 ArgumentError，并且临时重新定义 $stdxxx 会混淆子进程的输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-17T10:11:53.917

如果你不喜欢 popen，这是我的方式：

```
r, w = IO.pipe
pid = Process.spawn(command, :out => w, :err => [:child, :out]) 
w.close

...

pid, status = Process.wait2
output = r.read
r.close 
```

无论如何，您不能直接重定向到 String 对象。您最多可以将它指向一个 IO 对象，然后从中读取，就像上面的代码一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T13:33:35.110

为什么需要`spawn`？除非您在 Windows 上，否则您可以使用`popen*`，例如`popen4`：

```
require "open4"

pid, p_i, p_o, p_e = Open4.popen4("ls")
p_i.close
o, e = [p_o, p_e].map { |p| begin p.read ensure p.close end }
s = Process::waitpid2(pid).last 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:11:57.870

从 Ruby 文档看来你不能，但你可以这样做：

```
spawn("ls", 0 => ["/tmp/ruby_stdout_temp", "w"])
stdoutStr=File.read("/tmp/ruby_stdout_temp") 
```

您也可以对标准错误执行相同的操作。或者，如果您不想这样做并且不介意`popen`：

```
io=IO.popen("ls")
stdout=io.read 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-21T13:26:46.067

最简单直接的方法似乎

```
require 'open3'

out, err, ps = Open3.capture3("ls")

puts "Process failed with status #{ps.exitstatus}" unless ps.success? 
```

在这里，我们将输出作为字符串。

# tcp - Clojure TCP 服务器与 Aleph

> ID：10414135
> 
> 赞同：4
> 
> 时间：2012-05-02T12:50:22.013
> 
> 标签：tcp, clojure, netty

我正在尝试使用 Aleph 编写一个简单的 TCP 服务器。一切正常，除了我不确定应该如何检测通道何时关闭。

从[文档](https://github.com/ztellman/aleph/wiki/TCP)中：

> 当客户端关闭连接时，通道的两端将立即被密封。来自频道的最终消息将为 nil

但是，我似乎从未收到过这最后的`nil`消息。如果我检查通道，我确实看到它已关闭。这是我的代码：

```
(use 'lamina.core 'aleph.tcp 'gloss.core)

(defn process-msg [ch msg]
  (if (closed? ch)
    (println "Channel has been closed") ;This never happens
    (do-some-processing msg)))

(start-tcp-server
  (fn [ch client-info]
    (receive-all ch
      (partial process-msg ch))
  {:port 10000, :frame (string :utf-8 :delimiters ["\n"])}) 
```

我应该做一些不同的事情吗？我的框架是否阻止了 nil 消息被处理？我可以有一个单独的线程来监视我的频道并检查它们是否已关闭，但这似乎是一个糟糕的设计。我更喜欢使用 Aleph，但现在看起来我需要使用原始的 Netty 处理程序。直接使用 Netty 会很好，但如果可能的话，我更喜欢使用 Aleph，因为它感觉更惯用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:23:10.280

> 要在通道关闭或耗尽时注册回调，请使用 (on-closed ch callback) 或 (on-drained ch callback)，它们都采用零参数的回调。

[https://github.com/ztellman/lamina/wiki/Channels](https://github.com/ztellman/lamina/wiki/Channels)

# java - Java：制作多个形状的轮廓

> ID：10414140
> 
> 赞同：1
> 
> 时间：2012-05-02T12:50:41.153
> 
> 标签：java, graphics, shape, outline

假设我画了两个半径为 30 像素、相距 20 像素的圆。你会得到一个交叉线。我怎样才能防止这种交叉？

我试过查看各种图形过滤，但没有找到合适的。

（本题不限2圈）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:07:20.193

您可以使用`java.awt.geom.Area`类来执行操作。它有 add()、intersect()、subtract() 方法。

创建一个区域（两个椭圆的总和）并减去另一个区域（两个椭圆的交点）。

* * *

工作代码：

```
int x = 200; int y = 200;
Ellipse2D.Double first = new Ellipse2D.Double(x,y,75,75);
Ellipse2D.Double second = new Ellipse2D.Double(x+25,y,75,75);
Area circles = new Area(first);
circles.add(new Area(second));

graphics2D.draw(circles); 
```

![两个圆圈](../Images/4ff18be3ee988b3e6f596aae34e461aa.png)

# c# - 从派生类调用的虚拟方法中的 typeof this

> ID：10414143
> 
> 赞同：2
> 
> 时间：2012-05-02T12:50:42.230
> 
> 标签：c#, .net, generics, virtual-functions

我发现自己处于这样一种情况，即我在基类上有一个方法，该方法调用了一个将自身作为参数传递的泛型方法（通过`this`）。在泛型方法中，类型始终是基类型，即使我从派生类调用该方法也是如此。

我需要泛型方法来知道它是派生类型而不是基类型。

我无法更改通用方法，因为它来自第三方应用程序（http://razorengine.codeplex.com/ -`Razor.Parse`方法）。

我发现，如果我将该方法定义为仅限于从我的基类继承的类型的通用扩展方法，那么调用它就可以工作，但是为此目的使用扩展方法似乎很混乱（尽管如果这是正确的用法，我会很高兴听到）。我想知道是否有一些技巧可以在调用之前将“this”转换为派生对象的类型（可能仍然使用泛型）。

我在下面包含了一个应该是自包含的简化程序（为了个人方便，我在 LINQPad 中运行它）。本质上，我想要一个`A`在调用实例时定义的方法，`B`将调用`Test.WhatType`并输出“B”。

我希望这是有道理的。

```
void Main()
{
    var bar = new B();
    bar.myGetType();
    bar.ExtGetType();
}

class A
{
    public virtual void myGetType()
    {
        Test.WhatType(this);
        this.ExtGetType();
    }
}

class B : A {}

static class ext
{
    public static void ExtGetType<T>(this T obj) where T : A
    {
        Test.WhatType(obj);
    }
}

class Test
{
    public static void WhatType<T>(T obj)
    {
        Console.WriteLine(typeof(T).Name);
    }
} 
```

**编辑：**将方法名称更改为，`A.myGetType()`因为我什至没有注意到我意外重载。

注意运行此代码输出：

```
A
A
B 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:59:50.437

你需要使用`obj.GetType()`. `T`在编译时绑定，而不是在运行时绑定，因此`typeof(T)`返回`T`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:12:02.493

如果我理解正确，您的问题是`A.GetType()`绑定到`WhatType<A>`它所知道的所有内容。

所以你必须让类`A`知道派生类。

您可以使用自引用泛型类型来做到这一点。就像是：

```
class A<T> where T : A<T>
{
    public virtual void GetType()
    {
        Test.WhatType<T>( (T) this );
    }
}

class B : A<B> { } 
```

然后：

```
new B().GetType(); 
```

将绑定到`WhatType<B>`，因此将输出`B`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T12:57:37.013

此方法返回静态类型 (T) 的类型。它应该被实施为

```
public static void WhatType<T>(T obj) 
{ 
    Console.WriteLine(obj.GetType().Name); 
} 
```

编辑：我刚刚意识到你想要的是以通用方法的 T 改变的方式操作 A 。您可以通过反射或添加基于 A 的子类型的 switch 语句并将其显式转换为 B（或任何类）来执行此操作。当然，这些解决方案都不好，因为 A 会依赖于它的子类和反射显然是 sux。另一种选择是覆盖每个子类中的 GetType() 方法，从而将责任转移到子类。

# c++ - 将源代码与 C++ 程序的汇编列表相关联

> ID：10414149
> 
> 赞同：5
> 
> 时间：2012-05-02T12:51:25.663
> 
> 标签：c++, c, linux, gdb, objdump

在零售构建中分析核心转储通常需要将`objdump`任何特定模块与源相关联。如果功能非常复杂，通常将程序集转储与源相关联会变得很痛苦。今天，我尝试创建`assembly listing`一个特定模块（使用 compile 选项`-S`），期望我会看到一个带有汇编或某些相关性的交错源。不幸的是，列表不够友好，无法关联，所以我想知道

*   给定一个核心转储，我可以从中确定崩溃位置
*   `objdump`通过重新编译失败的模块组装清单
*   带`-S`选项的模块。

是否可以与来源进行一一对应？

例如，我将程序集列表视为

```
.LBE7923:
        .loc 2 4863 0
        movq    %rdi, %r14
        movl    %esi, %r12d
        movl    696(%rsp), %r15d
        movq    704(%rsp), %rbp
.LBB7924:
        .loc 2 4880 0
        testq   %rdx, %rdx
        je      .L2680
.LVL2123:
        testl   %ecx, %ecx
        jle     .L2680
        movslq  %ecx,%rax
        .loc 2 4882 0
        testl   %r15d, %r15d
        .loc 2 4880 0
        leaq    (%rax,%rax,4), %rax
        leaq    -40(%rdx,%rax,8), %rdx
        movq    %rdx, 64(%rsp) 
```

但不明白如何解释标签`.LVL2123`和指令`.loc 2 4863 0`

**注意** 正如所描述的答案，阅读汇编源代码并根据符号（如函数调用、分支、返回语句）直观地确定模式是我通常所做的。我不否认它不起作用，但是当一个函数非常复杂时，阅读汇编列表页面是一种痛苦，并且通常你最终会得到很少匹配的列表，因为函数被内联或优化器只是简单地扔了代码随心所欲。我有一种感觉，看看效率如何`Valgrind`处理优化的二进制文件以及在 Windows WinDBG 中如何处理优化的二进制文件，我缺少一些东西。所以我虽然我会从编译器输出开始并使用它来关联。如果我的编译器负责修改二进制文件，那将是说明如何与源代码关联的最佳人选，但不幸的是，这几乎没有帮助，而且`.loc`确实具有误导性。不幸的是，我经常不得不通读各种平台上无法重现的转储，而我花最少的时间是通过 WinDBG 调试 Windows Mini-dumps，而在调试 Linux Coredumps 上花费了相当多的时间。我虽然这可能是我做事不正确，所以我想出了这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:56:23.283

该`.loc`指令是您正在寻找的。这些表示第 #4863、4880 行等。源代码和优化的汇编程序之间没有完美的映射（这就是为什么您多次看到 4880 的原因）。但是`.loc`，您如何知道它在文件中的位置。语法是：

```
.loc <file> <line> <column> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T14:20:38.617

> 是否可以与来源进行一一对应？

A：不，除非所有优化都被禁用。编译器最初可能会在每行中发出一组指令（或类似指令的东西），但优化器随后会重新排序、拆分、融合并通常完全改变它们。

* * *

如果我要反汇编发布代码，我会查看应该与代码有明确逻辑关系的说明。例如，

```
.LBB7924:
        .loc 2 4880 0
        testq   %rdx, %rdx
        je      .L2680 
```

如果为零，它看起来像一个分支`%rdx`，它来自第 4880 行。找到该行，识别正在测试的变量，记下它当前分配给`%rdx`.

```
.LVL2123:
        testl   %ecx, %ecx
        jle     .L2680 
```

好的，所以这个测试和分支具有相同的目标，所以接下来发生的任何事情都知道`%rdx`并且`%ecx`都是非零的。原始代码的结构可能如下：

```
if (a && b) { 
```

或者也许是：

```
if (!a || !b) { 
```

优化器重新排序了两个分支......

现在您已经有了一些结构，希望可以与原始代码匹配，您还可以找出寄存器分配。例如，如果您知道要测试的东西是某个结构的数据成员，则向后阅读以查看`%rdx`从内存中加载的位置：它是从固定偏移量加载到其他寄存器的吗？如果是这样，该寄存器可能是对象地址。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T14:56:47.040

除非您静态链接到系统库，否则即使没有调试符号，二进制文件中也会有符号名称 - 链接到的系统库函数的名称。

这些通常可以帮助缩小您在代码中的位置。例如，如果您在函数 foo() 中看到它调用 open()，然后调用 ioctl()，然后它在调用 read() 之前崩溃，您可能很容易在 foo 的源代码中找到该点。（就此而言，您甚至可能不需要转储 - 在 linux 上，您可以使用 ltrace 或 strace 获取与库和系统函数相关的崩溃发生记录）

请注意，尽管在某些二进制格式中，可能会通过二进制文件中其他地方的微小包装器间接访问库函数。通常，转储在程序流中的调用地址处仍会具有相关的符号名称信息。但是即使没有，您也可以通过它们在二进制文件中的地址范围来识别这些外部链接包装器，当您看到它们时，您可以找到它的代码并找出它链接到的外部函数。

但正如其他人所提到的，如果您有源代码和系统经常崩溃以提供帮助，那么您最快的选择通常是使用调试符号进行重建，或者插入日志输出并获得更有用的崩溃记录。

# c# - 的部分声明不得指定不同的基类

> ID：10414151
> 
> 赞同：5
> 
> 时间：2012-05-02T12:51:27.903
> 
> 标签：c#, wpf

我知道互联网上有这方面的信息，但我在将其转化为我的情况时遇到了问题。

我有一个 xaml 窗口，我收到错误：'GX3OpenStackupGUIPlugin.GX3OpenStackupGUIPlugin'的部分声明不能指定不同的基类。

我背后的代码是：

```
public partial class GX3OpenStackupGUIPlugin : GX3ClientPlugin, IGX3PluginInterface
    { 
```

我的xml是：

```
<Grid xmlns:my="clr-namespace:CustomControls;assembly=MultiComboBox"   xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended"   x:Class="GX3OpenStackupGUIPlugin.GX3OpenStackupGUIPlugin"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"> 
```

请有人建议:)

这是我找到但正在努力翻译的链接... [部分声明不得指定不同的基类](https://stackoverflow.com/questions/8800872/partial-declarations-must-not-specify-different-base-classes)

在做了更多的研究之后，我发现如果我更改我的代码以在我的 xaml 中实现顶级元素，它就会消除错误。这显然仍然是一个问题，因为我的代码隐藏类需要实现我设计的接口。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T13:36:09.713

您链接到的问题包含答案。问这个问题的人是从这个开始的（这很有效）：

```
<A x:Class="B">
public partial class B : A 
```

他们把它改成了这个（没有用）：

```
<A x:Class="C">
public partial class C : B 
```

这不起作用，因为在幕后，基于 XAML 生成了一个 .cs 文件，其中包含从 A 继承的部分类。要修复它，他们需要将其更改为：

```
<B x:Class="C">
public partial class C : B 
```

因此，在您的情况下，我相信您应该替换 Grid，即执行以下操作：

```
<namespace:GX3ClientPlugin x:Class="namespace.GX3OpenStackupGUIPlugin">
public partial class GX3OpenStackupGUIPlugin : GX3ClientPlugin 
```

（我假设 GX3ClientPlugin 最终继承自 Grid 或 UserControl 之类的东西？）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T20:06:28.510

当我尝试继承 TabItem 时出现此错误。.cs 看起来像：

```
public partial class ucTabItemSelectionCriteria : TabItem 
```

XAML 的第一行如下所示：

```
<UserControl 
```

这是从 XAML 生成代码时会出现的不匹配。当我将 XAML 的前 2 行更改为：

```
 <controls:TabItem xmlns:controls= 
"clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls" 
```

现在两者都继承自 TabItem 控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T12:57:20.523

部分类声明意味着您可以在 2 个不同的文件中为同一类指定代码：

**AOother.cs**

```
public partial class A
{} 
```

**A.cs**

```
public partial class A
{} 
```

此错误告诉您这些类定义了不同的基础。

**AOother.cs**

```
public partial class A : B
{} 
```

**A.cs**

```
public partial class A : X
{} 
```

在示例中，A 不能从不同文件中的 B 和 X 继承。我认为可以在 XAML 中指定继承链，但在您发布的代码中我看不到任何这样做的东西。

**更新**

通过对评论中问题的修改，我提出以下建议。与其查看继承以使您的控件/窗口从 GX3ClientPlugin 继承，不如查看组合。本质上，这意味着，在您的表单上放置一个 GX3ClientPlugin 的实例并调用它。如果需要为 GX3ClientPlugin 类编写一个接口，请让表单实现它，但对于每个方法，只需调用它在下面保存的实例。我认为继承是解决这个问题的错误方法，因为你的类有两个问题 - UI 和 GX3ClientPlugin 逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T12:56:04.757

那将有两个（或更多）部分`partial class`。如果您搜索，您应该找到**另一个** `class GX3OpenStackupGUIPlugin`，它可能指定类似`Control`基本类型的东西。您只查看文件的一部分。另一半可能需要从 xaml 下扩展。

问题是两个文件正在做这样的事情：

（提交第一个）

```
public partial class GX3OpenStackupGUIPlugin : GX3ClientPlugin, IGX3PluginInterface {} 
```

（提交第二个）

```
public partial class GX3OpenStackupGUIPlugin : SomethingElse {...} 
```

# javascript - 文本字段中的 Javascript 默认文本，如 tumblr

> ID：10414163
> 
> 赞同：0
> 
> 时间：2012-05-02T12:52:02.777
> 
> 标签：javascript, jquery, formatting, validation

我想在输入字段中使用灰色的默认文本。但是用户不应该能够选择这个文本，而且它也是不可删除的。

例子：

用户键入名称`Susan`。在他们停止输入后，它会显示如下：`SusanCartel`. 灰色部分自动显示为预览。然后当他们点击创建时，我们会看到`SusanCartel`。这样，人们不会`SusanCartelCartel`因为看到预览而意外输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:55:05.483

`placeholder`HTML5 具有您可以使用的新属性：

```
<label for="username">Username:</label>
<input type="text" name="username" id="username" placeholder="Type your username..." /> 
```

但是，这在 IE 或旧版浏览器中不起作用。

[这个插件](http://webcloud.se/code/jQuery-Placeholder/)将实现跨浏览器相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:57:16.740

我通常使用 jquery-watermark。查看此[插件](http://code.google.com/p/jquery-watermark/) 链接以获取更多信息。

用法 ：

```
$('#inputid').watermark('Required information', {className: 'myClassName'}); 
```

另外，如果您仔细阅读介绍，您会遇到这一点

> 原生支持 HTML5“占位符”功能（在支持它的浏览器中），或者可以禁用原生支持，以便插件控制所有水印

# unit-testing - 如何制作“损坏”文件

> ID：10414164
> 
> 赞同：12
> 
> 时间：2012-05-02T12:52:06.970
> 
> 标签：unit-testing, testing, functional-testing

假设在测试期间，您希望测试软件如何处理“损坏”文件。

我有两个问题：

**1\. 一般来说，你如何定义一个“损坏”的文件？换句话说，什么是损坏的文件？**

举个例子：

假设您需要测试一个“损坏的”.pdf 文件。

一个建议是简单地获取一个 .zip 文件，更改扩展名，然后进行测试。但是，我认为您不是在测试程序如何处理“损坏的 .pdf 文件”，而是测试它如何处理 .zip 文件。

另一个建议是打开文件并插入/删除随机字节。这个建议没问题，但是有几个问题：

*   修改或删除的部分可能（尽管不太可能）无关紧要。例如，您可以简单地删除一段巨大的字符串，这会修改数据，但不一定会损坏文件。
*   可能会以程序拒绝读取文件的方式修改文件。例如，如果 .pdf 标头被删除，那么 API（或您正在使用的任何东西）可能不会超过该点，并且根本无法测试文件。
*   与第一个项目符号类似：如果文件被大幅修改，则存在一个论点，即生成的文件不再与原始文件格式相同。因此，再次，如果您要删除 .pdf 标头，那么该文件可能不再是 .pdf 文件。因此，尝试测试它不会测试损坏的 .pdf 文件，而是测试 .pdf 文件的一些奇怪变体。

**2\. 一旦定义了一个损坏的文件，你如何去创建一个？**

* * *

到目前为止，这是我一直在想的：

“损坏的文件”是正确满足文件格式规范的文件，但其中包含固有缺陷的数据/字节。

我能想到的唯一例子是，如果您以某种方式更改了文件的编码。然后，您可以将此方法应用于任意格式的文件。

谢谢阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:00:20.983

文件格式由两件事定义。1\. 文件的扩展名——应该告诉操作系统文件是什么格式。2\. 文档的**MimeType**。许多文档的扩展名错误（.avi .jpg），但实际上 mime 类型说明了它们是关于什么的。

如何损坏文档？您不能只添加随机字节或 smthing（例如 .txt 文件不会被损坏）

实际上你需要做两件事。

首先 - 您更改文件的 mime 类型，然后您可以添加一些随机字节。如果 myme 类型与扩展名不同（不相似） - 例如 .avi 文件的“text/html”，则程序无法识别此类 mime 类型的文件。

但是，对于不同的测试场景，可能需要创建损坏文件的不同“版本”。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T12:55:43.377

> 另一个建议是打开文件并插入/删除随机字节。

这是我一般做的。虽然我了解您上面提到的问题，但如果文件无法被其本机应用程序读取，我认为该文件已损坏。

例如，xls 不会在 Excel 中打开，docx 不会在 Word 中打开，等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T12:56:59.587

简单，取消下载文件（可能是 rar 文件）。我以这种方式得到了大部分腐败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T12:59:05.053

我使用 linux head 和 tail 命令拆分文件，然后将它们与丢失或额外的字节一起返回。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T12:59:41.310

我建议使用不完整的文件进行测试——这是通过中断下载创建大多数损坏文件的方式。

# java - 从哪里可以获得有关 Java OpenStreetMap API 的更多信息？

> ID：10414167
> 
> 赞同：0
> 
> 时间：2012-05-02T12:52:19.470
> 
> 标签：java, api, mapping

我正计划开发一个应用程序，它将获取 GPS 数据并在地图上向用户显示其他一些东西。由于某些原因，我不想使用 Google 地图。我搜索并找到了 Java OpenStreetMap Editor (JOSM)。

我找不到任何使用 JOSM API 的好的编程教程。有人知道编程技巧的好网站吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:21:11.377

以下是一些有用的链接：

1.  [JOSM 网页](http://josm.openstreetmap.de/)
2.  [JOSM 维基](http://wiki.openstreetmap.org/wiki/JOSM)
3.  [JOSM 指南](http://wiki.openstreetmap.org/wiki/JOSM/Guide)
4.  [JOSM 帮助](http://josm.openstreetmap.de/wiki/Help)
5.  [JOSM 教程视频](http://showmedo.com/videotutorials/series?name=mS2P1ZqS6)

那应该让你开始。希望能帮助到你 -

# vb.net - VB.NET/ASP.NET 4.0 自定义配置节：“创建配置节处理程序时出错”

> ID：10414169
> 
> 赞同：-3
> 
> 时间：2012-05-02T12:52:26.100
> 
> 标签：vb.net, .net-4.0, web-config, app-config, asp.net-4.0

我正在创建一个自定义配置部分，它允许我管理我想从我的 VB.NET/ASP.NET 应用程序中忽略的 ELMAH 异常。这是我的代码。如果有人愿意接受诊断问题的挑战，我可以很容易地粘贴到空白代码文件中。

```
Imports System.Configuration
Namespace ElmahExceptionHandling
    Public Class IgnoredExceptionSection : Inherits ConfigurationSection
        <ConfigurationProperty("IgnoredExceptions")>
        ReadOnly Property IgnoredExceptions As IgnoredExceptions
            Get
                Return TryCast(Me("IgnoredExceptions"), IgnoredExceptions)
            End Get
        End Property
        Shared Function GetConfig() As IgnoredExceptionSection

            Return TryCast(System.Configuration.ConfigurationManager.GetSection("IgnoredExceptionSection"), IgnoredExceptionSection)

        End Function
    End Class

    <ConfigurationCollection(GetType(IgnoredException))>
    Public Class IgnoredExceptions : Inherits ConfigurationElementCollection
        Protected Overloads Overrides Function CreateNewElement() As System.Configuration.ConfigurationElement

            Return New IgnoredException

        End Function
        Protected Overrides Function GetElementKey(element As System.Configuration.ConfigurationElement) As Object

            Return TryCast(element, IgnoredException).Message

        End Function
    End Class

    Public Class IgnoredException : Inherits ConfigurationElement
        <ConfigurationProperty("Message")>
        ReadOnly Property Message As String
            Get
                Return Me("Message")
            End Get
        End Property
    End Class
End Namespace 
```

这是配置：

```
<configSections>
    <section name="IgnoredExceptionSection" type="ElmahExceptionHandling.IgnoredExceptionSection, WEB" />
</configSections>
<IgnoredExceptionSection>
    <IgnoredExceptions>
        <add Message="test exception" />
    </IgnoredExceptions>
</IgnoredExceptionSection> 
```

当我执行此代码时：

```
Dim section As ElmahExceptionHandling.IgnoredExceptionSection = ConfigurationManager.GetSection("IgnoredExceptionSection") 
```

我得到错误`An error occurred creating the configuration section handler for IgnoredExceptionSection: Could not load file or assembly 'WEB' or one of its dependencies.`。

令我惊讶的是，在我使用 Web 实用程序从 VB.NET 转换代码后，这一切在我的 C# 控制台测试应用程序中运行良好。但是，当我将 Web 应用程序中的 VB 代码粘贴到我的 VB.NET 控制台测试应用程序中时，它也无法在那里工作，因此这似乎是一个 C#/VB 问题。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:32:10.780

在您的配置文件中，类型声明的末尾有一个不需要的条目。尝试更改此行：

```
<configSections>
    <section name="IgnoredExceptionSection"  type="ElmahExceptionHandling.IgnoredExceptionSection, WEB" />
</configSections> 
```

对此

```
<configSections>
    <section name="IgnoredExceptionSection" type="ElmahExceptionHandling.IgnoredExceptionSection" />
</configSections> 
```

# perl - 为什么我尝试使用 Perl 的 Net::OAuth 使用 Vimeo 的高级 API 身份验证失败？

> ID：10414171
> 
> 赞同：1
> 
> 时间：2012-05-02T12:52:39.490
> 
> 标签：perl, oauth, vimeo

我尝试了两种不同的方法来进行 vimeo 高级 api 身份验证。请在下面找到：-

**第一种方法：**

```
#!perl
use strict;
use warnings;

use Digest::HMAC_SHA1;
use Data::Dump qw /dump/;
use URI::Escape;
use Net::OAuth;
use MIME::Base64;
use LWP::UserAgent;

# Authorize a user

my $consumer_key = "CONSUMERKEY";
my $secret       = "SECRET";
my $method       = "vimeo.videos.search" ;
my $oauth_nonce  = int( rand( 2**32 ) ) ;
my $timestamp    = time ;
my $query        = "happy" ;
my $url          = "http://vimeo.com/api/rest/v2/" ;

my $str =   "method=$method&oauth_consumer_key=$consumer_key&oauth_nonce=$oauth_nonce&oauth_signature_method=HMAC-SHA1&oauth_timestamp=$timestamp&oauth_version=1.0&query=$query";

$str = uri_escape( $str) ;
$url = uri_escape( $url) ;

my $secret_key = $secret . '&';
my $base_str   = "GET" . "&" . $url . "&" . $str ;

my $hmac = Digest::HMAC_SHA1->new( $secret_key ) ;
$hmac->add($base_str) ;

my $oauth_signature = $hmac->b64digest ;
$oauth_signature    = encode_base64($oauth_signature );
chomp $oauth_signature;
$oauth_signature    =  uri_escape( $oauth_signature );

my $v_search_url = "http://vimeo.com/api/rest/v2? method=$method&oauth_consumer_key=$key&oauth_nonce=$oauth_nonce&oauth_signature_method=HMAC-SHA1&oauth_timestamp=$timestamp&oauth_version=1.0&oauth_signature=$oauth_signature&query=$query" ;

my $browser = LWP::UserAgent->new;
my $res     = $browser->get( $v_search_url );
print $res->content;

The response content throws following error:-
<?xml version="1.0" encoding="UTF-8"?>
<rsp generated_in="0.0024" stat="fail">
    <err code="401" expl="The consumer key passed was not valid." msg="Invalid consumer key"/>
</rsp> 
```

上面使用的消费者密钥是有效的（虽然在顶部没有共享）。直接在 mozilla 浏览器上点击上述搜索 url 会引发此错误：“传递的 oauth_signature 无效。” 请让我知道代码到底在哪里出错。我遵循了以下提供的 oauth 规范：http: [//vimeo.com/api/docs/oauth](http://vimeo.com/api/docs/oauth)

**第二种方法：**

```
#!perl                                                                                                                                          

use strict;
use warnings;

use Digest::HMAC_SHA1;
use Data::Dump qw /dump/;
use URI::Escape;
use Net::OAuth;
use Net::OAuth::RequestTokenRequest;
use MIME::Base64;
use LWP::UserAgent;

# Authorize a user                                                                                                                                    
my $consumer_key = "CONSUMERKEY";
my $secret       = "SECRET";
my $method       = "vimeo.videos.search" ;
my $oauth_nonce  = int( rand( 2**32 ) ) ;
my $timestamp    = time ;
my $query        = "happy" ;
my $url          = "http://vimeo.com/oauth/request_token";

my $request = Net::OAuth::RequestTokenRequest->new(
    consumer_key     => $consumer_key,
    consumer_secret  => $secret,
    request_url      => $url,
    request_method   => 'GET',
    signature_method => 'HMAC-SHA1',
    timestamp        => $timestamp,
    nonce            => $oauth_nonce,
);

die "COULDN'T GET REQUEST SIGN! Check parameters.\n" unless $request->sign;
die "COULDN'T VERIFY! Check OAuth parameters.\n" unless $request->verify;

my $browser   = LWP::UserAgent->new;
my $post_body = $request->to_post_body;
$post_body    = "oauth_callback=oob&" . $post_body;
my $post_url  = $url . '/?' . $post_body;

my $res       = $browser->get( $post_url );

die $res->status_line unless ($res->is_success);

print $res->content; 
```

此方法也因抛出上述错误“401 Unauthorized”而失败，并且在浏览器上点击 url 时会抛出相同的“无效的 oauth 签名错误”。由于这个人在 Net::Oauth 的第一步抛出错误，我无法继续进行。任何输入都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:52:48.123

这对于评论来说太长了，所以我将它作为一个答案发布，但它确实不是一个答案（只是与你依赖随机数作为安全机制的切线相关）。但是，这些信息是相关的，所以我将其设为社区 wiki。HTH。

我注意到你有：

```
my $oauth_nonce  = int( rand( 2**32 ) ) ; 
```

你似乎在 Windows 上。您不应该使用内置的`rand`（Perl 从 C 运行时获取的），因为以下陷阱：

```
#!/usr/bin/env perl

use strict; use warnings;

my %counts;

for (1 .. 1_000_000) {
    $counts{ int( rand( 2**32 ) )}++;
}

print scalar keys %counts, "\n"; 
```

输出：

```
32768
```

有关更多信息，请参阅我的博客文章[不要将随机性留给机会（或者，如果重要，请避免使用 rand）](http://blog.nu42.com/2010/09/be-vary-of-using-built-in-rng-for.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:28:51.990

当我尝试编译您的第二个脚本时，我首先得到：

`Global symbol "$key" requires explicit package name at C:\temp\tt.pl line 24.`

修复后，我得到：

`Use of uninitialized value in string eq at C:/opt/Perl/site/lib/Net/OAuth/SignatureMethod/HMAC_SHA1.pm line 18.` `COULDN'T VERIFY! Check OAuth parameters.`

我无法进行实时测试，因为我没有设置任何东西来访问 Vimeo API，但是来自的警告`Net::OAuth::SignatureMethod::HMAC_SHA1`表明某处可能存在另一个错字。

看起来您实际上需要在创建请求后对其进行签名：

```
$request->sign; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T13:35:59.243

在您使用 my`$oauth_signature = $hmac->b64digest;` 而不是`$hmac->b64digest`use的第一种方法中`$hmac->digest`，它会起作用。

# asp.net-mvc - 如何使用 wkhtmltopdf 将受保护的 HTML (ASP.NET MVC 3) 页面转换为 PDF？

> ID：10414172
> 
> 赞同：3
> 
> 时间：2012-05-02T12:52:40.160
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership, pdf-generation, wkhtmltopdf

我想将 HTML + CSS 页面转换为 PDF 文件。我已经尝试过[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，但我遇到了一个问题，因为我要访问的页面需要在网站上进行身份验证。

我想转换为 PDF 的页面有以下 URL：http://[WEBSITE]/PDFReport/33

如果我尝试在未经身份验证的情况下访问它，我将被重定向到登录页面。

所以当我使用 wkhtmltopdf 时，它会将我的登录页面转换为 PDF ......

我在 ASP.NET MVC 应用程序上使用的身份验证方法是 SimpleMembership：

```
[Authorize]
public ActionResult PDFReport(string id)
{
} 
```

我正在使用 System.Diagnostics.Process 执行 wkhtmltopdf.exe ：

```
FileInfo tempFile = new FileInfo(Request.PhysicalApplicationPath + "\\bin\\test.pdf");

StringBuilder argument = new StringBuilder();
argument.Append(" --disable-smart-shrinking");
argument.Append(" --no-pdf-compression");
argument.Append(" " + "http://[WEBSITE]/PDFReport/33");
argument.Append(" " + tempFile.FullName);

// to call the exe to convert
using (Process p = new System.Diagnostics.Process())
{
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.CreateNoWindow = true;
    p.StartInfo.FileName = Request.PhysicalApplicationPath + "\\bin\\wkhtmltopdf.exe";
    p.StartInfo.Arguments = argument.ToString();
    p.StartInfo.RedirectStandardOutput = true;
    p.StartInfo.RedirectStandardError = true;

    p.Start();
    p.WaitForExit();
} 
```

您知道如何在不禁用此页面的安全性的情况下生成 PDF 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:49:17.647

我最近遇到了很多麻烦。简而言之，WKHTMLTOPDF 是 Webkit 的一个版本（QT，我相信他们称之为），因此当您请求受密码保护的页面时，*该*浏览器需要像往常一样登录并存储/引用 cookie。

原始调用看起来像这样：

`/path/wkhtmltopdf --cookie-jar my.jar --username myusername --password mypassword URL

在哪里：

*   `my.jar`是一个 jar 文件，它被创建并保存您的 cookie 值
*   `username`是`name`用户名表单字段的，并且`myusername`是帖子值
*   `password`是`name`密码表单字段的，并且`mypassword`是 post 值
*   `URL`是登录页面的 URL

确保包含成功登录所需的任何其他帖子字段 - 您可能想要监控您的 HTTP 标头，而不仅仅是查看表单。在您希望使用正常参数捕获的页面上再次调用 WKHTMLTOPDF，包括 --cookie-jar my.jar 以维护会话。应该这样做！

但是，我仍然遇到问题，但这是一个相当强大的登录（多个 cookie、安全、许多参数等）。我正在使用 PHP，并且使用 CURL 运气更好 - 我不确定它是如何延续到 ASP.NET 的（也许是这个？[http://support.microsoft.com/kb/303436](http://support.microsoft.com/kb/303436)）但如果它有帮助，这是我的逻辑：

*   通过 CURL 登录
*   抓取 HTML 页面并存储在本地临时文件中
*   将对图像和文件的所有相对引用替换为绝对引用（或插入`base`标签）
*   在临时文件上运行 plain 'ol WKHTMLTOPDF
*   删除临时文件

总而言之，这样做要容易得多，而且知道我依靠的是经过验证的真实代码而不是 WKHTMLTOPDF 0.10 版中的参数，这让我感觉更好。

# objective-c - UITextField.text 不断返回 null

> ID：10414174
> 
> 赞同：1
> 
> 时间：2012-05-02T12:52:50.567
> 
> 标签：objective-c, ios, ios5, uiviewcontroller

我已经为这个 UIViewController 创建了一个委托，并且我传入了一个员工姓名来设置一个 UITextField。但是，无论我做什么，如您所见，它都会导致 (null)。但是，我有一个以类似方式填充的日期标签，但它可以正常工作。我把它包括在内以供参考。我错过了一些简单的东西。但是，现在我已经看不到它了……

有任何想法吗？谢谢。

```
@interface TimesheetEntryViewController()
@property (weak, nonatomic) IBOutlet UILabel *datelabel;
@property (weak, nonatomic) IBOutlet UITextField *employeeTextField;

@end

@implementation TimesheetEntryViewController
    @synthesize tableView = _tableView;
    @synthesize datelabel = _datelabel;
    @synthesize employeeName = _employeeName;
    @synthesize employeeTextField = _employeeTextField;

-(void)setEmployeeNameString:(NSString *)lemployeeNameString
{
    self.employeeTextField.text = lemployeeNameString;
    NSLog(@"%@:%@", lemployeeNameString, self.employeeTextField.text);
} 
```

结果：2012-05-02 08:42:50.137 rbTimesheet[7855:11303] Bob Smith:(null)

```
-(void)changeDateViewController:(ChooseDateViewController *)ntvc didChooseDate:(NSDate     *)lDate
{
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    df.dateStyle = NSDateFormatterMediumStyle;
    self.datelabel.text = [NSString stringWithFormat:@"%@",
                       [df stringFromDate:lDate]];
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T09:28:05.947

我已经通过 xcode 5 中的拖放映射了文本字段，因此它没有被合成，但我也尝试通过手动合成来解决这个问题，但它不起作用。

*我通过在 viewDidLoad 方法的文本字段对象中分配空字符串解决了这个问题*

_txtDialedNumber.text=@"";

***注意：-虽然使用这个我没有合成文本字段对象，它在 Xcode 5.0 中为我工作（在 iPhone 5 IOS 6 中测试）***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T19:06:17.340

所以我遇到了同样的问题，在谷歌搜索并遇到多个这样的帖子之后，我的问题是一个开发人员正在这样做（它在以前版本的 xCode 中工作），我从一个类似的项目中剪切并粘贴

```
-(void)setTextFieldDelegates{
    self.usernameTextField = [[UITextField alloc] init];
    self.passwordTextField = [[UITextField alloc] init];

    [self.usernameTextField setDelegate: self];
    [self.passwordTextField setDelegate: self];
} 
```

因此，即使插座已连接，他也在以某种方式重新分配它并且它正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:05:03.227

也许您正在调用 setEmployeeNameString: 在视图加载之前？结果应该给你 null 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:57:37.623

在 Interface Builder 中检查文本字段和插座之间的连接是否正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T06:58:45.147

检查您是否使用 uitextField 子类化了 `textField=[[UITextField alloc]init]`.

如果您这样做了，请**尝试将其从代码中删除。**我遇到了同样的问题，我通过删除这些行让它工作了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-02T13:09:08.183

看起来好像您正在覆盖文本字段的自动设置器/获取器。使用@synthesize 的全部意义在于为您节省一些代码并避免自己设置它们的麻烦。

我的猜测是您没有正确设置代表。您是说当前视图控制器文本字段应该获取日期，然后您关闭模态视图，杀死保存在那里的值。

我会将您的参考从弱更改为强，并摆脱您的二传手。它已经为你完成了，不需要把事情弄得乱七八糟。

# php - 比较当前日期与数据库中的日期

> ID：10414191
> 
> 赞同：0
> 
> 时间：2012-05-02T12:53:54.160
> 
> 标签：php

我需要帮助我的脚本将当前日期与数据库中输入的日期进行比较，我不会做的事情是当数据库中的日期超过当前日期时收到警报消息，如果数据库中的日期接近则发出警报当前日期。当月份不同时，我的代码就会出现问题。脚本在比较当前日期和数据库日期的日期时有效，但是当月份不同时，例如 02.05.2012 和 28.04.2012，脚本表现得好像 28.04.2012 还没有到来，他没有考虑月份. 我希望这个问题很清楚。这是到目前为止的编码。有任何想法吗？

```
$vrjedi_do_osobna = $row['vrjedi_do_osobna'];

$current_date = date('d.m.Y');

$query = mysql_query("SELECT * from albums where vrjedi_do_osobna = '$current_date'
                                AND $id = 'userid'");

    $ime = $row['dosjename'];
    $prezime = $row['dosje_prezime'];
    $diff = abs(strtotime($current_date) - strtotime($vrjedi_do_osobna));

    $years = floor($diff / (365*60*60*24));
    $months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));
if($current_date < $vrjedi_do_osobna && $days < 10 && $days > 0 && $years < 1 && $months < 1)
    {
echo"<font face='gregorian' size='2'>";
   printf("&nbsp;<img src='slike_izgled/pj_sat.png' width='20' height='30'/>&nbsp;Osobna  iskaznica radnika $ime $prezime ističe za %d dana\n", $days);
echo"</font><br>";
    }
    if ($vrjedi_do_osobna <= $current_date)
                    {                                           
    echo "                            

&nbsp;<img src='slike_izgled/usklik.gif' width='25' height='25'>&nbsp;<font face='gregorian' size='2'>Osobna iskaznica radnika $ime $prezime-a je istekla!</font>&nbsp;&nbsp;&nbsp;&nbsp;<a href='viewdosje.php?album=".$row['ideo']."'>Pregled dosjea</a><br>

    "; 
// Do something

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:07:27.877

你看过 PHP date_diff 函数 [http://php.net/manual/en/function.date-diff.php](http://php.net/manual/en/function.date-diff.php)

或者，您可以从 mysql 中选择日期差异作为查询的一部分[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)

```
SELECT *,DATEDIFF(vrjedi_do_osobna,NOW()) from albums where vrjedi_do_osobna = '$current_date' AND $id = 'userid'" 
```

这将返回正数或负数天数差异

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:03:54.637

使用该[`strtotime`](http://php.net/manual/en/function.strtotime.php)功能。然后，您可以比较数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:05:29.253

您可以存储在变量中 `strtotime($current_date) - strtotime($vrjedi_do_osobna`）并通过将其与 0 进行比较来在 IF 中使用它，以查看当前日期是否已过。

# git - 在 git 上显示精美的标签列表

> ID：10414196
> 
> 赞同：3
> 
> 时间：2012-05-02T12:54:09.377
> 
> 标签：git

我有以下 git log 别名：

```
 lo = log --pretty=format:\"%h %ad | %s%d [%an]\" --graph --date=short -n 8 
```

我怎样才能显示所有 git 标签的列表，格式像上面那样，而不是像`git tag`调用那样只显示标签名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:26:12.037

我对此没有一个简洁的答案，但你可以为这样的东西创建一个 shell 别名：

```
for t in $(git tag -l)
do
    printf "%-16s" $t
    echo `git show -s --pretty=format:"%h %ad | %s%d [%an]" --date=short $t^{}`
done 
```

...在主 git 存储库上会产生如下输出：

```
v1.7.9          828ea97 2012-01-27 | Git 1.7.9 (v1.7.9) [Junio C Hamano]
v1.7.9-rc0      eac2d83 2012-01-06 | Git 1.7.9-rc0 (v1.7.9-rc0) [Junio C Hamano]
v1.7.9-rc1      6db5c6e 2012-01-12 | Git 1.7.9-rc1 (v1.7.9-rc1) [Junio C Hamano]
v1.7.9-rc2      bddcefc 2012-01-18 | Git 1.7.9-rc2 (v1.7.9-rc2) [Junio C Hamano]
v1.7.9.1        90020e3 2012-02-14 | Git 1.7.9.1 (v1.7.9.1) [Junio C Hamano]
v1.7.9.2        78f4c9f 2012-02-22 | Git 1.7.9.2 (v1.7.9.2) [Junio C Hamano]
v1.7.9.3        69f4e08 2012-03-05 | Git 1.7.9.3 (v1.7.9.3) [Junio C Hamano]
v1.7.9.4        a460348 2012-03-12 | Git 1.7.9.4 (v1.7.9.4) [Junio C Hamano]
v1.7.9.5        8ced9c9 2012-03-26 | Git 1.7.9.5 (v1.7.9.5) [Junio C Hamano]
v1.7.9.6        cb2ed32 2012-04-02 | Git 1.7.9.6 (v1.7.9.6) [Junio C Hamano]
v1.7.9.7        d0f1ea6 2012-04-26 | Git 1.7.9.7 (v1.7.9.7) [Junio C Hamano] 
```

对我来说，不明显的一点是`^{}`标签名称的后缀，这意味着取消引用任何标签对象以找到它指向的提交，如[`git rev-parse`手册页](http://schacon.github.com/git/git-rev-parse.html#_specifying_revisions)所述。

# iphone - 如何在 iPhone (iOS) 中暂停/恢复下载

> ID：10414201
> 
> 赞同：10
> 
> 时间：2012-05-02T12:54:30.337
> 
> 标签：iphone, ios, ipad, download

我必须下载大量数据（**300MB - 1GB**之间的任何地方）。

我目前正在使用`**NSURLConnection**`下载数据。但是，现在我正在研究用户在下载过程中可能会失去互联网连接的情况。目前我正在这种情况下重新启动整个下载过程，我认为这是一种非常糟糕的下载方式，并且浪费了用户带宽。

**是否有一个过程可以让我在下载时使用暂停/恢复功能来管理下载**。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T13:00:45.397

这是如何在 IOS 上执行此操作的[教程。](http://nachbaur.com/blog/resuming-large-downloads-with-nsurlconnection)

还要检查[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLDownload.html#//apple_ref/doc/uid/20001839-SW2)。这将要求您的服务器支持范围标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:01:16.520

这需要在服务器端和客户端同步。我已经告诉你使用块。如果你想暂停，definetely chunks 是唯一的解决方案。您将发送带有块 id 的服务器以停止，直到这我将在下一次得到剩余，下一次您将从该 id 询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T10:55:34.960

固定解决方案：

修复了断开的链接，这是在 iOS 中恢复文件下载文件的工作[教程。](http://nachbaur.com/2012/03/16/resuming-large-downloads-with-nsurlconnection/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-03T05:12:31.410

您可以使用“NSURLSession 暂停和恢复

# java - 如何最好地调试 logger.info(...) ， logger.error(...) 不写？

> ID：10414202
> 
> 赞同：1
> 
> 时间：2012-05-02T12:54:33.213
> 
> 标签：java, logging, log4j, apache-commons-logging

在一个大型项目中，我们有类似的东西：

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

class Test {
   static final Log logger  = LogFactory.getLog(Test.class);

   public void execute() {
      log.info("writing some info"); 
      log.error("writing some error"); 
   }
} 
```

我知道它运行时：我正在使用类`org.apache.commons.logging.impl.Log4JLogger`

因为我能够远程连接并在我的调试上放置一个断点并查看它是什么类。

我怎样才能弄清楚正在使用什么日志配置？它是从哪里捡来的？它是如何配置的？

*ps 注意应用程序。实际上非常复杂，它在 Web 逻辑应用服务器中运行。我无权访问它的所有 java 代码。*

*psII我的想法是在execute方法中注入一些代码来确定到底log4j.properties在哪里，如果它在那里等等......*

# php - 使用 file_get_contents 打开文件时权限被拒绝；webbrowser可以毫无问题地打开它

> ID：10414208
> 
> 赞同：0
> 
> 时间：2012-05-02T12:55:00.837
> 
> 标签：php, ftp, file-permissions

当使用在**ftp://ipaddress/somefile.txt**`file_get_contents()`的 FTP 服务器上获取文本文件的文件内容时，我收到以下错误：

 **> **警告**：file_get_contents() [ [function.file-get-contents](http://php.net/manual/en/function.file-get-contents.php) ]: connect() failed: Permission denied in **filename.php** on line **1**

但是当我在我的网络浏览器中访问**ftp://ipaddress/somefile.txt**时，这绝对没有问题。

为什么我的浏览器可以打开文本文件，但`file_get_contents()`不能？

PS：不知道是不是跟它有关系，但是ini指令`allow_url_fopen`是**on** .

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T13:00:37.833

我有一个类似的问题。原来这是我服务器上的 SELinux 的问题：

我从终端运行这条线来重新爱它：

```
setsebool -P httpd_can_network_connect on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:11:03.730

您可以尝试像这样使用[readfile](http://ee.php.net/manual/en/function.readfile.php)函数并查看它是否获取文件内容：

```
readfile('ftp://anonymous:email@example.com@' . $ipAddress . '/somefile.txt'); 
```**

# python - Python：为什么我应该使用 next() 而不是 obj.next()？

> ID：10414210
> 
> 赞同：26
> 
> 时间：2012-05-02T12:55:10.000
> 
> 标签：python, next, built-in

Python 2.6 引入了一个`next`函数。

为什么这是必要的？人们总是可以键入`obj.next()`而不是`next(obj)`.

是后者更多`pythonic`吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-02T13:05:31.653

[PEP 3114](http://www.python.org/dev/peps/pep-3114/)描述了这种变化。关于动机的摘录：

> 该 PEP 建议将该`next`方法重命名为`__next__`，这与 Python 中的所有其他协议一致，其中方法作为语言级协议的一部分被隐式调用，并且引入了一个名为的内置函数`next`来调用`__next__`方法，与显式调用其他协议的方式。

请务必阅读此 PEP 以了解更多有趣的细节。

至于为什么*要*使用`next`内置：一个很好的理由是该`next`方法在 Python 3 中消失了，因此为了可移植性，最好尽快开始使用`next`内置。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-02T12:56:59.480

> [`next(iterator[, default])`](http://docs.python.org/2/library/functions.html#next)
> 
> ^(通过在 python 3))方法中调用迭代器从*迭代器*中检索下一项。如果给出*默认值*，则在迭代器耗尽时返回，否则引发。`next()`^(`(__next__()`)*`StopIteration`*

 *你得到了`default`选择。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-02T12:58:30.097

除了明显的附加功能外，与生成器表达式一起使用时它看起来也更好。比较

```
(x for x in lst if x > 2).next() 
```

到

```
next(x for x in lst if x > 2) 
```

后者与 Python 的其他风格更加一致，恕我直言。*

# c# - .NET MVC 3 如何循环模型状态错误并强制 ModelState.Valid 或禁用特定错误？

> ID：10414214
> 
> 赞同：4
> 
> 时间：2012-05-02T12:55:28.243
> 
> 标签：c#, asp.net-mvc, model-view-controller, validation, action-filter

我正在使用 MVC 3 + 不显眼的验证。

对于某些领域，我也在使用远程验证；在远程验证中，我做了一些检查，它们可以返回错误或**只是警告**（我想利用 ajax 验证也只是为了发出警告，而不仅仅是阻止错误）。我通过在描述文本中使用“Info”前缀的验证错误来区分警告。

**那么，是否存在一种循环所有验证错误的方法，只保留显示的警告并根据显示的文本设置错误？**

**我正在考虑使用 ActionFilterAttribute，或者在循环并检查所有验证错误后强制 ModelState.Valid = true ......**

这是我的远程验证例程的摘录，带有一个 WarningCheck 属性：

```
 [WarningCheck]
   public JsonResult CheckMyField(string myfield) 
    {

        //....some check...if ok I do `return Json(true, JsonRequestBehavior.AllowGet);`
        //...if just a warning, I do the follow...

        string warn = String.Format(CultureInfo.InvariantCulture,
            "Info: some info....");
        ModelState.AddModelError(TicketHD, esiste);
        return Json(warn, JsonRequestBehavior.AllowGet);

    }

    [AttributeUsage(AttributeTargets.All)]
    public class WarningCheckAttribute : ActionFilterAttribute
    {
      public override void OnActionExecuting(ActionExecutingContext filterContext)
       {  
             //.... here I'd like to cycle my warnings and if possible maintaining just the text display and set errors off...is it possible?
       }
     } 
```

**编辑（如何禁用特定警告的客户端验证）**

根据服务器端的@CDSmith (@Alfalfastrange) 建议，当每个验证错误中包含特定文本时，我也成功禁用了客户端验证。特别是，我需要在错误包含“信息：”文本时禁用客户端和服务器端验证错误。这是我用于客户端行为的代码：

```
 .... 
                    $("#ticketfrm").submit();
                    var isvalid = true;
                    var errmark = $("#ticketfrm .field-validation-error span"); 
                    $(errmark).each(function () {
                        var tst = $(this).text();
                        if (!(tst.indexOf("Info") != -1))
                            isvalid = false; //if the val error is not a warn, the it must be a real error!
                        });

                    if (isvalid) {
                        var form = $('#ticketfrm').get(0); //because I'm inside a jquery dialog
                         $.removeData(form, 'validator'); 
                        jQuery('#ticketfrm').unbind('submit').submit();
                    }

                    $("#ticketfrm").submit();   
                }
            ..... 
```

我希望这可以帮助很多人......我工作了很多小时才能让它工作！我不认为它一定是更优雅的解决方案，但它可以工作！:) 对于服务器端验证，请阅读标记的解决方案。

如果你觉得这个有用，请标记它。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T12:58:25.840

我不确定我是否像您解释的那样理解这个问题，但我听到您说的是您需要一种循环遍历 ModelState 错误然后维护错误的文本值但不将它们显示为错误的方法？你是这么说的吗？

对于初学者来说，ModelState 只不过是一个 DictionaryList，您可以毫无问题地遍历它。

像这样的东西可以做到这一点：

```
public ActionResult SomeAction(SomeModel model) {
    if(ModelState.IsValid) {
        // do cool stuff with model data
    }
    var errorMessages = GetModelStateErrors(ModelState);
    foreach (var errorMessage in errors) {
        // do whatever you want with the error message string here
    }
} 
```

ModelError 包含一个 ErrorMessage 属性和 Exception 属性

```
internal static List<string> GetModelStateErrors(IEnumerable<KeyValuePair<string, ModelState>> modelStateDictionary) {
    var errors = new List<ModelError>();
    errors = modelStateDictionary.SelectMany(item => item.Value.Errors).ToList();
} 
```

不确定这是否有帮助，但如果它指向正确的方向，那么很酷:-)

**更新**

好的，这就是我想出的，它适用于我的测试应用程序。

首先让我列出我拥有的东西，以便您可以复制和复制

**这是我的模型**

```
public class EmployeeViewModel {

    public int ID { get; set; }

    [Display(Name = "First Name")]
    [Required(ErrorMessage = "Error")]
    public string FirstName { get; set; }

    [Display(Name = "Last Name")]
    [Required(ErrorMessage = "Error")]
    public string LastName { get; set; }

    [Display(Name = "Username")]
    public string Username { get; set; }

    [Display(Name = "Email Address")]
    public string EmailAddress { get; set; }
} 
```

**这是一个使用此模型的简单视图**

```
@model TestApp.Models.EmployeeViewModel

<h2>Test</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>EmployeeViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Username)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Username)
            @Html.ValidationMessageFor(model => model.Username)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EmailAddress)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EmailAddress)
            @Html.ValidationMessageFor(model => model.EmailAddress)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

**这是我使用的控制器和操作**

```
using System.Collections.Generic;
using System.Linq;
using System.Web.Mvc;
using TestApp.Models;

namespace TestApp.Controllers {

    public class HomeController : Controller {

        public ActionResult Index() {
            return RedirectToAction("Test");
        }

        public ActionResult Test() {
            var model = new EmployeeViewModel();
            return View(model);
        }

        [HttpPost]
        public ActionResult Test(EmployeeViewModel model) {
            // Force an error on this property - THIS should be the only real error that gets returned back to the view
            ModelState.AddModelError("", "Error on First Name");

            if(model.EmailAddress == null) // Add an INFO message
                ModelState.AddModelError("", "Email Address Info");
            if (model.Username == null) // Add another INFO message
                ModelState.AddModelError("", "Username Info");

            // Get the Real error off the ModelState
            var errors = GetRealErrors(ModelState);

            // clear out anything that the ModelState currently has in it's Errors collection
            foreach (var modelValue in ModelState.Values) {
                modelValue.Errors.Clear();
            }
            // Add the real errors back on to the ModelState
            foreach (var realError in errors) {
                ModelState.AddModelError("", realError.ErrorMessage);
            }
            return View(model);
        }

        private IEnumerable<ModelError> GetRealErrors(IEnumerable<KeyValuePair<string, ModelState>> modelStateDictionary) {
            var errorMessages = new List<ModelError>() ;
            foreach (var keyValuePair in modelStateDictionary) {
                if (keyValuePair.Value.Errors.Count > 0) {
                    foreach (var error in keyValuePair.Value.Errors) {
                        if (!error.ErrorMessage.Contains("Info")) {
                            errorMessages.Add(error);
                        }
                    }
                }

            }
            return errorMessages;
        }
    }
} 
```

**如果您愿意，可以将 GetRealErrors 编写为 LINQ：**

```
private IEnumerable<ModelError> GetRealErrors(IEnumerable<KeyValuePair<string, ModelState>> modelStateDictionary) {
    var errorMessages = new List<ModelError>() ;
    foreach (var keyValuePair in modelStateDictionary.Where(keyValuePair => keyValuePair.Value.Errors.Count > 0)) {
        errorMessages.AddRange(keyValuePair.Value.Errors.Where(error => !error.ErrorMessage.Contains("Info")));
    }
    return errorMessages;
} 
```

我希望这能给你你想要的东西，它的工作方式我认为我理解你想要的。让我知道

# javascript - 显示指定秒数的 CSS 组件

> ID：10414217
> 
> 赞同：0
> 
> 时间：2012-05-02T12:55:53.927
> 
> 标签：javascript, css, html

嗨，我正在编写一个名为 popup-box 的简单弹出窗口，我希望它仅显示 10 秒，在此期间它将被隐藏，所以请告诉我该怎么做

这是我的代码：

CSS代码：

```
/* Styles for game over popup */
   #popup {
font-family: 'Orbitron', serif;
font-size: 28px;
font-weight: 700;     
text-shadow: 0px 1px 2px #fff;

color: #222;

position: absolute;   
width: 100%;
height: 100%;
top: 0;
left: 0;

background: rgba(0,0,0,.5);

display: -webkit-box;
-webkit-box-pack: center;
-webkit-box-align: center;          

-webkit-transition: all .5s ease-in;}

    #popup h1 {
font-weight: 400;}

    #popup-box {
width: 400px;
height: 400px;
background: #ccc url(../images/popup_bg.jpg);

border-radius: 10px;

position: relative;

-webkit-box-shadow: 0 5px 5px #333;

display: -webkit-box;
-webkit-box-pack: center;
-webkit-box-align: center;

-webkit-transition: all .5s ease-in;
    }

    #popup-box small {
font-size: .6em;
    }
      /***** Styles to hide the popup box ******/
    #popup.hide {
background: rgba(0,0,0,0);
visibility: hidden;     
       }
   #popup.hide #popup-box{
margin-top: -800px;
    } 
```

html代码：

```
 <section id="popup"  class="hide">

     <div id="popup-bg"></div>

     <div id="popup-box">
               Cards are laid out in a grid face down,
       and players take turns flipping pairs of cards over.
       On each turn, the player will first turn one card over, 
       then a second. If the two cards match, 
       the player scores one point,
       the two cards are removed from the game, 
       and the player gets another turn. 
       If they do not match, the cards are turned back over.

         </div>

   </section> 
```

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:59:31.230

例如，使用[jQuery](http://jquery.com/)可以通过以下方式完成：

```
$("#popup").fade​In(500, function​​​​​​​() {
    $(this).delay(10000).fadeOut(500)
})​;​ 
```

**演示：http:** [//jsfiddle.net/Q8xMk/](http://jsfiddle.net/Q8xMk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:06:34.733

在 HTML 中的任意位置添加：

```
<script>
window.onload = function() {
    setTimeout(function() { document.getElementById("popup-box").style.display = "none" }, 10000);
}
</script> 
```

`setTimeout(f, t)`*基本上在t*秒`f`后调用该函数。由于它被调用 on ，它会在页面*完全*加载后的*t*秒内调用。*`window.onload`*

# ruby - Rails savon，两个 wsdl

> ID：10414218
> 
> 赞同：0
> 
> 时间：2012-05-02T12:55:54.063
> 
> 标签：ruby, ruby-on-rails-3.1

我正在 Rails 上开发，我正在使用 gem **Savon** ( [http://savonrb.com](http://savonrb.com) )。

我要做的就是将自己与我 wsdl 有两个的服务集成，一个用于身份验证，另一个用于各种功能。

有两个wsdl：

> 1.  “https://.../authentication.asmx?wsdl”
> 2.  “https://.../lists.asmx?wsdl”

我首先要做的是：

```
client = Savon::Client.new do |wsdl, http|
  http.auth.ssl.verify_mode = :none
  wsdl.document = "https://.../authentication.asmx?wsdl"
end
response = client.request :soap, :login, :body => {:username => "...", :password => "..."} 
```

登录后，我需要使用第二个 wsdl 来执行我的功能，但我不能在身份验证中声明另一个客户端丢失我所说的第一件事。

```
response = client.request :get_list_collection do
  soap.endpoint = URI(URI.escape("https://.../lists.asmx?wsdl"))
end 
```

我尝试了很多，但我没有找到解决方案。

知道如何解决这个问题吗？

# .net - 从 .NET 3.5 平台连接到 ORACLE 数据库的问题

> ID：10414237
> 
> 赞同：0
> 
> 时间：2012-05-02T12:57:30.947
> 
> 标签：.net, oracle, connectivity

我们目前在配置为 Windows 服务的 VB .Net 应用程序之一中使用 Oracle Data Connect dll。我们使用的 .Net 版本是 Framework 3.5，我们连接到 Oracle 10g。

该应用程序不断地与数据库建立连接并立即关闭该特定实例中的每个连接（数据库连接涉及一种单例设计模式）。我们更频繁地收到关于数据库连接的错误（“<strong>CONNECTION LOST CONTACT”）。在阅读了一些博客之后，我们在连接字符串中添加了一个参数为**VALIDATE CONNECTION=TRUE**。此错误已解决，但我们现在收到一条新错误消息“<strong>连接请求超时”</strong>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:04:58.930

我看到的唯一一个使用**Oracle Data Provider for .NET / ODP.NET**指定超时的连接字符串选项如下：

```
Data Source=myOracle;User Id=myUsername;Password=myPassword;Min Pool Size=10;Connection Lifetime=120;Connection Timeout=60;Incr Pool Size=5;Decr Pool Size=2; 
```

您可以在这里获得更多示例：http: [//www.connectionstrings.com/oracle#p12](http://www.connectionstrings.com/oracle#p12)

这是描述：

默认情况下，启用连接池。这个控制池化机制。连接池服务通过使用 ConnectionString 属性来唯一标识一个池来创建连接池。

打开的第一个连接创建连接池。该服务最初创建由 Min Pool Size 参数定义的连接数。

Incr Pool Size 属性定义了在需要更多连接时连接池服务要创建的新连接数。

当连接关闭时，连接池服务会判断连接的生命周期是否超过了连接生命周期属性的值。如果是，则关闭连接；否则，连接将返回连接池。

连接池服务每 3 分钟关闭一次未使用的连接。Decr 池大小属性指定每 3 分钟可以关闭的最大连接数。

此外，您可以查看运行查询的 OracleCommand 是否超时。查找有关 OracleCommand.CommandTimeout 属性的文档。

在此站点上查看有关 oracle 命令超时的讨论 [https://forums.oracle.com/forums/thread.jspa?threadID=317603](https://forums.oracle.com/forums/thread.jspa?threadID=317603)

# c# - 调试对象未能完成？

> ID：10414242
> 
> 赞同：2
> 
> 时间：2012-05-02T12:57:43.693
> 
> 标签：c#, debugging, finalizer

我的应用程序中有以下代码，可帮助我检查 ViewModel 是否正确完成：

```
#if DEBUG
    static int openViewModels = 0;

    protected AbstractViewModel()
    {
        openViewModels++;
    }

    ~AbstractViewModel()
    {
        openViewModels--;
        System.Diagnostics.Debug.WriteLine(openViewModels);
    }
#endif 
```

我的应用程序中的所有视图模型都派生自此类。我发现随着时间的推移`openViewModels`会增加，这意味着某些视图模型无法最终确定。

我无法弄清楚为什么会这样 - 我盯着我的代码，但我看不出是什么导致了一些物体留在周围。是否有任何工具或程序可以帮助我找出导致这些对象无法完成的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:01:27.250

首先，这对线程竞争开放；那应该是`Interlocked.Increment(ref openViewModels)`和`Interlocked.Decrement(ref openViewModels)`。

其次，最终确定是非确定性的。除非你强迫它，这是你不应该的。您不应该期望它们在任何特定的时间范围内进行清理，尤其是在您有大量可用内存的情况下。终结是内存压力的一个因素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T13:04:04.537

不保证最终确定对象。如果你需要可靠的终结，你应该实现`IDisposable`.

# nhibernate - nHibernate 更新不适用于现有实体

> ID：10414243
> 
> 赞同：2
> 
> 时间：2012-05-02T12:57:50.270
> 
> 标签：nhibernate, entity

我正在尝试使用 nHibernate 更新记录。我尝试了几种解决方案，但它们都不起作用（没有显示错误，bu 数据也没有更新）。
第一个代码：

```
MyRepository rep = new MyRepository(GetCurrentSession());
UserPost post = rep.GetById(id);
post.ValidTo = date;
rep.Update(post); 
```

第二个代码：

```
ISession session = GetCurrentSession();
MyRepository rep = new MyRepository(GetCurrentSession());
UserPost post = rep.GetById(id);
post.ValidTo = date;
rep.Update(post);
session.Update(post);
session.Transaction.Commit();
session = null; 
```

也许有人有建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:24:44.257

1）如果您不使用事务，则需要**刷新会话`：**

```
var post = _session.Load<Post>(id); //assumes this record exists in the db
post.SomeAttribute=somenewvalue;
_session.SaveOrUpdate(post);
_session.Flush; 
```

2) 我没有看到正在启动的交易？您需要启动一个事务来提交。

```
using(var transaction = _session.BeginTransaction()){
   _session.SaveOrUpdate(post);
   transaction.commit();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T06:58:12.390

```
using(var transaction = _session.BeginTransaction()){
   _session.SaveOrUpdate(post);
   transaction.commit();
} 
```

我有这个批量更新返回 rowcount = 0 但预期是 1 个异常。但这有效

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T13:20:13.420

是否`UserPost`正确映射？您是否使用`.hbm.xml`文件（注意 hbm）并且 xml 文件被标记为嵌入式资源？

![在此处输入图像描述](../Images/291e714fd5653b7cf284ca7bb4097657.png)

根据我的经验，如果一个实体没有被映射，NHibernate 不会抱怨也不会抛出错误。

实际上更详细地查看您的代码，您并没有调用`session.Save`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:53:55.970

如果你想更新一些持久化实体的字段，你不应该调用 session.Update() 或 session.SaveOrUpdate()，你可以使用 session.Flush() 或事务：

```
MyRepository rep = new MyRepository(GetCurrentSession());
UserPost post = rep.GetById(id);
post.ValidTo = date;
rep.Flush(); // session.Flush()

OR

using(var transaction = _session.BeginTransaction()){
   UserPost post = rep.GetById(id);
   post.ValidTo = date;
   transaction.commit();
} 
```

# asp.net-mvc - 用于 MVC 不显眼的远程验证的事件挂钩

> ID：10414244
> 
> 赞同：5
> 
> 时间：2012-05-02T12:57:51.523
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-validate, unobtrusive-validation, remote-validation

有没有办法在客户端上挂钩 MVC3 不显眼的远程验证，在数据提交到远程方法之前，以及从远程方法返回结果之后？

我试图告诉远程验证器仅在单击提交按钮时才执行验证。正常的行为是验证几次，例如在按键、模糊等期间。这不好，因为有问题的验证方法需要调用非幂等操作。我需要确保仅在用户单击提交按钮时才调用该方法。

如果我可以挂钩之前的事件，我可以在表单中设置一个字段，将提交按钮标记为是否被点击。但是，在远程方法返回验证结果后，我需要重置此标志。

还有其他建议吗？这是为了使用 ASP.NET Membership Provider 的`Membership.ValidateUser(string username, string password)`方法验证密码。`FailedPasswordAttemtCount`每次发送无效密码时，此方法都会递增，因此我不希望它在模糊、按键等期间执行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T13:03:30.113

您可以覆盖当前页面的默认验证选项：

```
$.validator.setDefaults({
    onkeyup: false,
    onfocusout: false,
    onsubmit: true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T13:23:06.283

上面的解决方案并没有为我解决这个问题。不知何故，没有设置验证器设置。因此，我实现了以下内容并且它有效：

```
$(function () {
    var settings = $.data($('form')[0], 'validator').settings;
    settings.onkeyup = false;
}); 
```

# c# - 在按钮单击上使用 SQLdatasource 从 Gridview 获取标签中的参数

> ID：10414246
> 
> 赞同：1
> 
> 时间：2012-05-02T12:57:56.543
> 
> 标签：c#, asp.net, gridview, sqldatasource

我想要完成的是，当我单击gridview 中的按钮时，该特定行的值必须显示在textlabels lblID、lblName 中......
我只是不知道该怎么做。
这是我的 sqldatasource 的代码：

```
<asp:SqlDataSource ID="srcProd" runat="server"  
ConnectionString="<%$ ConnectionStrings:ConnDB %>"   
ProviderName="<%$ ConnectionStrings:ConnDB.ProviderName %>"   
SelectCommand="SELECT p.tProdID, p.tProdImage, p.tProdBeschrijving, m.tMerkNaam, m.tMerkImage,   p.tProdVerkoop FROM tblProducten AS p INNER JOIN tblMerken AS m ON p.tMerkID = m.tMerkID ORDER BY m.tMerkNaam">  
</asp:SqlDataSource> 
```

这是我正在谈论的 gridview 的屏幕截图。 ![这是一个gridview屏幕截图](../Images/db8e4c48e4d6b20cc0bbad520d9fde48.png)

当我按下其中一个按钮时，我想要例如在 lblID 中显示的参数 ID。

感谢所有帮助、提示和技巧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:47:10.757

为按钮分配一个`CommandName`（类似于“ShowDetails”左右）和一个`CommandArgument`（记录的ID）。现在，单击按钮将触发网格`RowCommand`事件，将`CommandName`和`CommandArgument`in传递给您`e`。然后从您的数据库中获取记录并填充您的控件：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Button runat="server" Text="Foo2" CommandArgument='<%# Eval("RowID") %>'
            CommandName="ShowDetails" />
    </ItemTemplate>
</asp:TemplateField>

protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    Debug.WriteLine("Command Handler");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:39:57.343

所以基本上这可以通过两种方式完成：

1.  在按钮后面添加服务器端点击处理程序并更新 UpdatePanel 内的标签（这种情况下我们不需要回发）
2.  在按钮的“OnClientClick”事件上添加一些javascript来设置这个标签……这个方法可以在GridView的绑定方法中设置。

希望这可以帮助。

# c - 在子进程中创建线程

> ID：10414249
> 
> 赞同：0
> 
> 时间：2012-05-02T12:58:03.017
> 
> 标签：c, multithreading, pthreads

```
#include<pthread.h>
#include<stdio.h>
int value=0;
void *runner(void *param);
int main(int argc,char *argv[])
{
int pid;
pthread_t tid;
pthread_attr_t attr;
pid=fork();
if(pid==0){
pthread_attr_init(&attr);
pthread_create(&tid,&attr,runner,NULL);
pthread_join(tid,NULL);
printf("CHILD VALUE=%d",value);
}
else if(pid>0){
wait(NULL);
printf("PARENT VALUE=%d",value);
}
}

void *runner(void *param){
value=5;
pthread_exit(0);
} 
```

孩子和父母的价值是什么？孩子和它创建的线程会共享数据吗？所以输出将是 5 和 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:13:35.947

> 孩子和它创建的线程会共享数据吗？

不。如果父进程的记忆，子进程可以被认为是获取**副本。**因此，孩子所做的任何更改对父母都是不可见的。

> 所以输出将是 5 和 0？

是：子打印 5，父打印 0（不一定按此顺序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:21:38.070

会发生什么：

*   子进程是通过复制父进程的内存空间来创建的。它将看到与父级相同的数据，但它只是一个副本，因此它们不会相互干扰。子进程（或其任何线程！）所做的任何后续更改将只对其自身可见。
*   子进程产生的线程与子进程的主线程共享内存空间，并且再次看到父进程中值的副本。

因此，由于在子进程产生的线程中分配的值仅在子进程内可见，而在父进程内不可见，因此结果为 5 和 0。

# javascript - XEP-0077 使用 Strophe.js 和 openfire 使用进行带内注册

> ID：10414252
> 
> 赞同：4
> 
> 时间：2012-05-02T12:58:15.333
> 
> 标签：javascript, xmpp, openfire, strophe

我正在尝试使用 strophe 插件在 openfire 服务器上注册一个新用户，但它没有连接注册。这里的描述[https://github.com/metajack/strophejs-plugins/tree/master/register](https://github.com/metajack/strophejs-plugins/tree/master/register)并没有让我更进一步:(我必须先建立连接吗？这是我在单击按钮时尝试的登记：

```
$("#RegButton").click(function () {
var callback = function (status) {
if (status === Strophe.Status.REGISTER) {
    connection.register.fields.username = "juliet";
    connection.register.fields.password = "R0m30";
    connection.register.submit();
} else if (status === Strophe.Status.REGISTERED) {
    console.log("registered!");
    connection.authenticate();
} else if (status === Strophe.Status.CONNECTED) {
    console.log("logged in!");
} else {
    // every other status a connection.connect would receive
}
};
connection.register.connect("http://localhost:7070/http-bind/", callback);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:30:11.920

在这条线上：

```
connection.register.connect("http://localhost:7070/http-bind/", callback); 
```

`connection`应该是已使用您的服务 URL ( ) 创建的[Strophe.Connection](http://strophe.im/strophejs/doc/1.0.2/files2/strophe-js.html#Strophe.Connection.Strophe.Connection)`"http://localhost:7070/http-bind/"`对象。

第一个参数`connection.register.connect()`是您要在其上注册帐户的主机。也就是说，对于*user@example.com*的 JID，您可以将其设置为`"example.com"`，而不是`"http://localhost:7070/http-bind/"`像您的代码中那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T18:43:24.630

就我而言，我修改了插件，因为在第 215 行“if(register.length === 0)”中，总是结束我的注册意图，所以我评论了这些行并删除了一个标签“x”，而不是引入我的节和登记册是可能的。我希望这对你有帮助。

```
 /*
      if (register.length === 0) {
        console.log('En tra if de linea 220');
        //that._changeConnectStatus(Strophe.Status.REGIFAIL, null);
        //return;
    } else */
    this.enabled = true; 
```

# algorithm - 证明使用最小堆合并k个排序列表的算法

> ID：10414255
> 
> 赞同：10
> 
> 时间：2012-05-02T12:58:30.230
> 
> 标签：algorithm, min-heap

我正在阅读 CLRS 并且对练习 6.5-8 有一些问题。

> 给出一个 O(n lg k) 时间算法将 k 个排序列表合并为一个排序列表，其中 n 是所有输入列表中元素的总数。（提示：使用 min0heap 进行 k 路合并。）

正如大家所说，解决方案是，

1) 使用 k 个列表的第一个元素构建一个 k 元素最小堆，

2) extract-min() 从堆中获取最小元素并将其附加到结果列表中，

3) 从与我们刚刚从堆中提取的元素*相同的列表中选择下一个元素。*将其插入堆中并转到 2)。

我可以理解时间是 O(n lg k)，但我没有得到步骤 3) 中选择的正确性。这*似乎*很明显，但有一些正式的证据吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T13:20:19.937

正确性证明的主旨是，剩余最少的元素始终是要提取的元素。支持此声明的关键不变式是，对于每个列表，优先级队列包含该列表中剩余的最少元素。从这个不变量可以得出，由于剩余的最少元素也是*其列表中*剩余的最少元素，因此它由 extract-min 返回。

我们需要在第 3 部分中从同一个列表中选择一个元素，以保持每个列表在队列中的元素最少的不变性。否则，我们可能会遇到类似的情况

```
1 2
3 4 
```

如果我们从包含 1 和 3 的初始队列中提取 1 并将其替换为 4，则下一次提取将是 3，这是错误的。

# service - System.Security.SecurityException：找不到源，但无法搜索部分或全部事件日志。无法访问的日志：安全性

> ID：10414261
> 
> 赞同：1
> 
> 时间：2012-05-02T12:58:38.047
> 
> 标签：service, installation, securityexception

我正在尝试从这里安装一个名为“SQLScheduler”的应用程序：[http](http://www.lazycoding.com/products.aspx) ://www.lazycoding.com/products.aspx 但是当我安装该服务时，我收到了这个错误：

System.Security.SecurityException：找不到源，但无法搜索部分或全部事件日志。无法访问的日志：安全性

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:22:06.040

我知道这不是问题本身的答案，但 stackoverflow 不会让我评论其他人的答案，我希望这里有这些信息，因为它对可能像我一样找到这篇文章的人很有用，搜索这个错误。BCL 抛出安全异常而不是 UnauthorizedAccessException 的原因是非管理员安全级别不足以写入应用程序事件日志，而不是一般的安装。

抱歉，Sherif，这对您的问题没有帮助，因为即使以管理员身份安装它，也显然存在其他问题。我建议尝试 Nicole 的后续建议以联系该工具的提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:50:27.870

我知道我在这里聚会迟到了，但是我遇到了同样的错误并找到了您的消息。

我在尝试通过 InstallUtil 程序安装我的服务时收到了它。我的解决方案是使用“以管理员身份运行”运行命令提示符，这样就成功了。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:55:51.217

如果在安装过程中发生这种情况，您可能需要以管理员用户身份安装。（在这种情况下，BCL 抛出了错误的异常类型。它应该是 UnauthorizedAccessException 而不是 SecurityException。）

# android - 将微调器选择的值写入数据库

> ID：10414262
> 
> 赞同：1
> 
> 时间：2012-05-02T12:58:41.027
> 
> 标签：android, sqlite, spinner, selectedvalue

我有以下代码，它从微调器中选择值并应该写入新表（`tbl_trunk`）..我使用了以下代码但没有工作......

```
myDB.execSQL("CREATE TABLE " + SAMPLE_TABLE_NAME + " (" + _id
                + " INTEGER PRIMARY KEY AUTOINCREMENT , " + cust_name
                + " TEXT , " + cust_add + " TEXT)");
        myDB.execSQL("insert into tbl_customer(cust_name, cust_add) values ('Fool', 'FF' );");

        Cursor c = myDB.query(SAMPLE_TABLE_NAME, null, null, null, null, null, null);

    char cust_nameColumnIndex = (char) c.getColumnIndexOrThrow("cust_name");
            char cust_addColumnIndex = (char) c.getColumnIndexOrThrow("cust_add");
            adapterForSpinner = new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item);
            adapterForSpinner
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            String selection;
            spinner.setAdapter(adapterForSpinner);
            spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

                @SuppressWarnings("null")
                @Override

            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                // TODO Auto-generated method stub
                SQLiteDatabase myDB = null;

                Toast.makeText(
                        parent.getContext(),
                        "Customer is "
                                + parent.getItemAtPosition(pos).toString(),
                        Toast.LENGTH_LONG).show();
             String selected = parent.getItemAtPosition(pos).toString();
              myDB.execSQL("CREATE TABLE " + SAMPLE_TABLE_TRUNK + " (" + _id
                        + " INTEGER PRIMARY KEY AUTOINCREMENT , " + cust_name
                        + " TEXT)");

myDB.execSQL("insert into tbl_trunk(cust_name) values (pos);");
insert(selected); 
```

插入方法是：

```
public void insert(String cust_name) {
                String SAMPLE_DB_NAME = "db_sales";

                dbHelper = new DatabaseHelper(getBaseContext());     
                SQLiteDatabase db = dbHelper.getWritableDatabase();     
                ContentValues values = new ContentValues();     
                values.put("cust_name", cust_name);     
                db.insert("SAMPLE_TABLE_TRUNK", null, values);     
                db.close();     
                if (SAMPLE_DB_NAME != null)
                {
                    //  SAMPLE_DB_NAME.close(); 
                }

                } 
```

我应该如何将选定的行添加到新表？错误日志是

```
05-02 19:27:45.048: E/Database(3668): Error inserting cust_name=Ali - AA
05-02 19:27:45.048: E/Database(3668): android.database.sqlite.SQLiteException: no such table: SAMPLE_TABLE_TRUNK: , while compiling: INSERT INTO SAMPLE_TABLE_TRUNK(cust_name) VALUES(?);
05-02 19:27:45.048: E/Database(3668):   at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
05-02 19:27:45.048: E/Database(3668):   at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
05-02 19:27:45.048: E/Database(3668):   at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
05-02 19:27:45.048: E/Database(3668):   at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
05-02 19:27:45.048: E/Database(3668):   at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
05-02 19:27:45.048: E/Database(3668):   at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
05-02 19:27:45.048: E/Database(3668):   at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
05-02 19:27:45.048: E/Database(3668):   at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
05-02 19:27:45.048: E/Database(3668):   at numair.tab.layout.Customers$1.insert(Customers.java:117)
05-02 19:27:45.048: E/Database(3668):   at numair.tab.layout.Customers$1.onItemSelected(Customers.java:87)
05-02 19:27:45.048: E/Database(3668):   at android.widget.AdapterView.fireOnSelected(AdapterView.java:864) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:43:45.797

您使用自己的参数创建一个单独的数据库类，如下所示：

```
 public class DataBaseHelper  extends SQLiteOpenHelper{
private static final String DB_NAME="SampleMsgDb";
private static final String TABLE="SampleTABLE";
private static final int DB_VERSION=1;
private static final String COLUMN1="received_Time";
private static final String COLUMN2="col1";
private static final String COLUMN3="col2";
private  Context myContext;
private SQLiteDatabase myDataBase;
DataBaseHelper dbHelper;

public DataBaseHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
    myContext=context;
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    String sql = "create table " + TABLE + "( "+ COLUMN1 + " integer , " + COLUMN2 + " text not null, "
            + COLUMN3 + " text not null);";
    Log.d("EventsData", "onCreate: " + sql);
    db.execSQL(sql);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    if (oldVersion >= newVersion)
        return;

    String sql = null;
    if (oldVersion == 1) 
        sql = "alter table " + TABLE + " add note text;";
    if (oldVersion == 2)
        sql = "";

    Log.d("EventsData", "onUpgrade  : " + sql);
    if (sql != null)
        db.execSQL(sql);
}
public void insert(String number, String message) {
    dbHelper=new DataBaseHelper(myContext);
        SQLiteDatabase db = dbHelper.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(DataBaseHelper.COLUMN1, System.currentTimeMillis());
        values.put(DataBaseHelper.COLUMN2, number);
        values.put(DataBaseHelper.COLUMN3, message);
        db.insert(DataBaseHelper.TABLE, null, values);
        db.close();
        if (myDataBase != null)
            myDataBase.close();

      }

 @Override
    public synchronized void close() {
      super.close();
        if (myDataBase != null)
            myDataBase.close();

    }} 
```

在活动类中删除所有与数据库相关的查询并添加

```
DataBaseHelper dbHelper;  
  this.dbHelper=new DataBaseHelper(YOURACTIVITYCLASS.this);   
  dbHelper.insert("121", "some text111"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:20:10.597

无需一次又一次地创建表。创建1个数据库助手类，在类内部创建表并编写1个插入方法并在活动中调用该插入方法..

```
public void insert(String name) {

    dbHelper = new TransactionDetailsHelper(myContext);
    SQLiteDatabase db = dbHelper.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put("name", name);
    db.insert("SAMPLE_TABLE_TRUNK", null, values);
    db.close();
    if (myDataBase != null)
        myDataBase.close();

} 
```

# python - 检查用户权限时来自 Django runserver 的空白响应

> ID：10414264
> 
> 赞同：1
> 
> 时间：2012-05-02T12:58:56.483
> 
> 标签：python, django

我有与列出的问题类似的问题

[发送 POST 数据并访问模型时，Django 会产生空白页](https://stackoverflow.com/questions/6081573/django-produces-blank-pages-when-post-data-is-sent-and-models-are-accessed)

和

[Nginx 连接重置，uWsgi 的响应丢失](https://stackoverflow.com/questions/3970495/nginx-connection-reset-response-from-uwsgi-lost)

以下是有问题的观点之一：

```
@transaction.commit_on_success
@occ_update
@checks_status
def hold(request):
    if not request.user.has_perm('orders.hold'):
        return error_response_rollback(NO_PERMISSION_MSG % "hold orders")
    order = Order.objects.get(pk=request.POST.get('pk'))
    occ_revision = int(request.POST.get('occ_revision'))
    agent = Agent.get_agent(request.user)
    action = Action(agent=agent, type='hold_order',
                    comments=request.POST.get('comments'))
    action.save()
    order.hold(action, occ_revision)
    return ok_response_commit("Order held successfully.") 
```

error_response_rollback 回滚事务并返回一个以 JSON 作为其内容的 HttpResponse。

我正在为我的应用程序中的许多视图添加权限检查，当用户没有正确的权限时，会返回空白响应。

然而，就像上面提到的问题一样，如果你把

```
print request 
```

或者

```
request.POST 
```

语句在权限检查之前，每次都正确地将 NO_PERMISSION_MSG JSON 字符串返回给浏​​览器（error_response_rollback 返回一个带有 JSON 的 HttpResponse 对象。）

当您在“打印请求”之前检查权限并且它们**没有**正确的权限时，您会得到空白响应。

在以下情况下，您不会收到空白回复：

1.  用户具有正确的权限
2.  “打印请求”语句在任何权限检查之前
3.  您可以随时使用 Firefox。

@occ_update 和 @checks_status 装饰器只是捕获异常。这些问题在存在和不存在的情况下都会发生。

我正在使用 Chrome 进行开发*，这在 Firefox 中都不是问题*。

我发现一页建议重载 WSGIRequest 对象以在将请求传递给视图之前读取请求，但这对我来说似乎很恶心，我宁愿找出真正的解决方案。

有没有人知道 runserver 命令的任何修复/设置来帮助解决这个问题而无需破解请求？我的用户主要使用 Chrome，所以我更愿意继续使用它……我们拭目以待。目前使用 Django 1.3.1 在 Windows 中开发

我考虑过的一个选择是制作另一个 manage.py 命令来处理这个问题，但这也似乎很糟糕。

谢谢

* * *

更新：

我已经能够重新组织我的代码，以便在从 POST 读取一些数据后进行任何权限检查。这似乎消除了这个问题的任何症状。它仍然不理想，但它是插入中间件以阅读帖子的好选择。并且并非总是在所有应用程序中都是可能的。

如果您有类似的情况并且无法弄清楚，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:18:15.900

正如您帖子的第二个链接中所说，特别是[http://forum.nginx.org/read.php?2,196581](http://forum.nginx.org/read.php?2,196581)：当您使用 Nginx 和 uWSGI 工作并获得非空 POST 时，请始终阅读`request.POST`之前的返回一个 HttpResponse。原因在链接中描述。
您不必重写处理程序，只需将该`request.POST`行放在返回代码之前，或者放在一些装饰器或中间件中。
半年前在生产现场遇到这个问题，把线路放在中间件中解决。

# asp.net - 在 ASP.NET/VB.NET 中，如何在用户控件将实现的接口上声明属性/事件，例如 IsPostBack/Init？

> ID：10414268
> 
> 赞同：1
> 
> 时间：2012-05-02T12:59:14.177
> 
> 标签：asp.net, vb.net, vb.net-to-c#

我在将一些 .NET2 时代的 C# 移植到 .NET2 时代的 VB.NET 时遇到问题。具体来说，我试图定义一个 ASP.NET 用户控件将实现的接口。

（作为背景，我正在尝试重新实现几年前[Phil Haack 的 Model-View-Presenter 示例。）](https://web.archive.org/web/20170705062230/http://haacked.com/archive/2006/08/09/asp.netsupervisingcontrollermodelviewpresenterfromschematictounitteststocode.aspx/)

我正在使用的 C# 接口定义了基本控件已经实现的属性和事件（IsPostBack、Load）。

但是，VB.NET 迫使我在用户控件中显式实现这些属性/事件（Public Property IsPostBack() As Boolean Implements IView.IsPostBack ...）。我只想在界面中定义这些，而不必在实现用户控件的代码隐藏中做任何特殊的事情。

我假设我可以在 VB.NET 中做到这一点，我只是不知道怎么做。我花了各种时间谷歌搜索/搜索，但还没有找到答案。

有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:06:36.577

不幸的是，这不是您在 VB.NET 中可以做到的。VB.NET 只做显式接口实现，所以你必须做这样的事情：

```
Public Class MyPage
    Inherits Page
    Implements IView

    Public ReadOnly Property IsPostBack() As Boolean Implements IView.IsPostBack
        Get
            Return MyBase.IsPostBack
        End Get
    End Property
End Class

Public Interface IView
    Public ReadOnly Property IsPostBack() As Boolean
End Interface 
```

因此，您将不得不再次实现所有这些接口成员。

# hadoop - 使用消息队列 VS Map/Reduce 的分布式计算

> ID：10414269
> 
> 赞同：2
> 
> 时间：2012-05-02T12:59:16.210
> 
> 标签：hadoop, mapreduce, amqp, hdfs

语境：

我们正在考虑使用符合 AMQP 的解决方案来计算每天 90 GB 的恒定实时数据流。我们想要实现的是实时统计数据，或多或少，基于我们观察到的所有或某些指标的组合。考虑的策略是在队列上发送数据并让工作进程处理数据的增量，将数据作为原始数据的聚合发送回队列。

观察：

对我来说，这看起来像是 Hadoop 之类的工作，但提出了一些担忧（和防护），主要是关于速度。我没有时间对两者进行基准测试，但我们希望通过队列（在 10~100 mb/s 附近的任何地方）抽取大量数据。我仍然认为它看起来像是分布式计算系统的工作，而且我也觉得队列解决方案的扩展性比分布式计算解决方案差。

问题：

简单地说，我说的对吗？我读过一些关于 Hadoop + HDFS 的文章，我正在考虑使用另一个 FS，比如 Lustre 之类的，来规避 NodeName SPOF，并使用某种解决方案来对任何类型的节点故障有某种容忍度整个集群。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:11:28.843

当您需要容错、良好的平衡等时，编写自己的“分布式环境”解决方案真的很困难。如果您需要近乎实时的地图/减少，您应该检查[风暴](https://github.com/nathanmarz/storm)，这是 twitter 用于满足其巨大数据需求的工具。它不如 hadoop 复杂，并且在消耗队列类型输入方面更好（在我看来）。

此外，如果您决定在 hadoop 上分析您的数据，请不要太担心名称节点的 SPOF，有[一些方法](http://www.cloudera.com/blog/2012/03/high-availability-for-the-hadoop-distributed-file-system-hdfs/)可以避免它。

# macos - 包含 libgpgme 时无法构建 Firebreath

> ID：10414270
> 
> 赞同：1
> 
> 时间：2012-05-02T12:59:18.530
> 
> 标签：macos, firebreath, gpgme

```
Undefined symbols for architecture x86_64:   "_libintl_dgettext", referenced from:
      _gpg_strerror in libgpg-error.a(libgpg_error_la-strerror.o)
      _gpg_strerror_r in libgpg-error.a(libgpg_error_la-strerror.o)
      _gpg_strsource in libgpg-error.a(libgpg_error_la-strsource.o) ld: symbol(s) not found for architecture x86_64 collect2: ld returned 1 exit status 
```

如问题所述，当尝试使用 Xcode 在 MacOSX 10.6 上构建需要 libgpgme 的 firebreath 项目时，出现上述错误。我的包含/搜索路径是有效的，因为我可以从控制台运行以下命令并且它工作正常。

```
 g++ -o test test.cpp `gpgme-config --libs` 
```

gpgme-config 的输出是 -L/opt/local/lib -lgpgme -lassuan -lgpg-error。不知道还需要什么其他信息，发表评论，我会根据需要更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:12:30.223

您的问题是您正在为 32 位和 64 位构建通用二进制文件，而您包含的库不是为 64 位构建的。您只能通过在 prepmac.sh 命令行中添加 -D CMAKE_OSX_ARCHITECTURES="i386" 来构建 i386。

确保在使用新参数运行 prepmac.sh 之前删除您的构建目录，否则可能不会。

有关详细信息，请参阅 firebreath.org 上的[Prep Scripts](http://www.firebreath.org/x/X4AG)页面。

# android - 如何在两个设备（android，iphone）之间传输“数据”？

> ID：10414273
> 
> 赞同：11
> 
> 时间：2012-05-02T12:59:24.103
> 
> 标签：android, ios, cross-platform, p2p, data-transfer

如何在两台设备之间传输数据？我想在不同平台（android、iphone）之间传输数据（主要是图像文件）。是否可以使用 p2p 或者我应该使用客户端-服务器？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T04:18:57.327

你看过[高通的 AllJoyn 库](https://developer.qualcomm.com/mobile-development/mobile-technologies/peer-peer-alljoyn)吗？它只能通过蓝牙或 wifi 工作。

下面的代码是从这个[Incorporating Socket Programming into your Applications中复制的](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)

```
public class ServerActivity extends Activity {

    private TextView serverStatus;

    // default ip
    public static String SERVERIP = "10.0.2.15";

    // designate a port
    public static final int SERVERPORT = 8080;

    private Handler handler = new Handler();

    private ServerSocket serverSocket;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.server);
        serverStatus = (TextView) findViewById(R.id.server_status);

        SERVERIP = getLocalIpAddress();

        Thread fst = new Thread(new ServerThread());
        fst.start();
    }

    public class ServerThread implements Runnable {

        public void run() {
            try {
                if (SERVERIP != null) {
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Listening on IP: " + SERVERIP);
                        }
                    });
                    serverSocket = new ServerSocket(SERVERPORT);
                    while (true) {
                        // listen for incoming clients
                        Socket client = serverSocket.accept();
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Connected.");
                            }
                        });

                        try {
                            BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                            String line = null;
                            while ((line = in.readLine()) != null) {
                                Log.d("ServerActivity", line);
                                handler.post(new Runnable() {
                                    @Override
                                    public void run() {
                                        // do whatever you want to the front end
                                        // this is where you can be creative
                                    }
                                });
                            }
                            break;
                        } catch (Exception e) {
                            handler.post(new Runnable() {
                                @Override
                                public void run() {
                                    serverStatus.setText("Oops. Connection interrupted. Please reconnect your phones.");
                                }
                            });
                            e.printStackTrace();
                        }
                    }
                } else {
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Couldn't detect internet connection.");
                        }
                    });
                }
            } catch (Exception e) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Error");
                    }
                });
                e.printStackTrace();
            }
        }
    }

    // gets the ip address of your phone's network
    private String getLocalIpAddress() {
        try {
            for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
                NetworkInterface intf = en.nextElement();
                for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                    InetAddress inetAddress = enumIpAddr.nextElement();
                    if (!inetAddress.isLoopbackAddress()) { return inetAddress.getHostAddress().toString(); }
                }
            }
        } catch (SocketException ex) {
            Log.e("ServerActivity", ex.toString());
        }
        return null;
    }

    @Override
    protected void onStop() {
        super.onStop();
        try {
             // make sure you close the socket upon exiting
             serverSocket.close();
         } catch (IOException e) {
             e.printStackTrace();
         }
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T06:58:44.707

如果你对[Bump 没](http://bu.mp/)问题，那么他们提供了一个 API 供开发人员使用，而且使用起来非常简单。[看一下这个。](http://bu.mp/api)

[观看 iOS 和 Android @ youtube](http://www.youtube.com/watch?v=xIRFjK5qpq4)之间传输的现场演示。

[Github](https://github.com/bumptech/bump-api-ios)中的详细代码片段和示例。

PS：我不属于 bu.mp :)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-05T04:51:00.947

虽然在某些情况下 p2p 是可能的，但您将获得与客户端-服务器架构最广泛的兼容性，但代价是必须部署、供电、连接和维护服务器。

*   您将能够同时使用 wifi 接入点和移动（3g 等）网络
*   您在系统中有一个准备好的位置来衡量（或限制）使用和/或插入广告
*   您不必担心防火墙会阻止与设备的入站连接（在 wifi 上很常见，在移动设备上几乎总是如此）
*   设备的相对位置无关紧要
*   您不仅可以与智能手机和平板电脑互操作，还可以与传统 PC 和笔记本电脑互操作

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T10:34:42.430

我会使用WebService。这使您的服务更容易维护，因为服务实现独立于您的应用程序。

专业网络服务：

*   可在预配置的 DNS 下访问
*   对服务的修改不会影响应用程序（可能的错误修复不需要更新）

反网络服务：

*   所有流量都通过您的服务器
*   应用程序依赖于您的服务器

您应该问自己一个问题，在您的通信中传输了多少数据？使用直接连接有真正的好处吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-12T08:23:22.560

您可以使用 filehub 在 IOS 和 android 之间传输文件。

市面上有一种叫做 fielhub 的新设备，可以在 iOS 和 Android 设备之间，或者移动设备和 SD 卡/USB 硬盘之间传输照片/电影/音乐。我认为它叫做 ravpower filehub。

# java - 选择流的序列

> ID：10414275
> 
> 赞同：1
> 
> 时间：2012-05-02T12:59:31.947
> 
> 标签：java, arraylist, sequence, modulus

我有一个带有时间戳的元素的 ArrayList。

给定这个数组的一个元素，我想选择在给定元素之前和之后发生特定时间的所有元素。

问题是这个时间戳变成了 60 000 毫秒，然后又从零开始。

因此，如果我想让所有元素发生，比如时间戳为 59 999 的元素之前和之后 1000 毫秒，我不知道该怎么做。

我一直在研究模数运算，但似乎无法使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:37:01.113

我的建议是使用 a`SortedSet`而不是 a `List`（如果元素不能重复）。

根据元素的时间戳字段创建一个`Comparator`（如果这还不是它们的自然顺序），然​​后使用`NavigableSet`排序集的特征来检索参考另一个元素的 、`lower`或元素。`floor``ceiling``higher`

如果您有重复的元素，并且您明确需要使用 a `List`，我将首先使用 my对`List`with进行排序，然后我将遍历列表以查找低于/高于我的参考时间戳的第一个元素。并使用该方法，我将提取列表前面满足条件的所有元素。`Collections.sort``Comparator``List.sublist`

两者`Date`和`Calendar`具有在其之前和之后命名的方法可以帮助您确定给定时间戳是在某个参考时间之前还是之后。如果您想知道之前或之后多少毫秒，只需从另一个时间戳中减去一个时间戳的毫秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:03:14.450

尝试这个：

```
List<Integer> timestamps;
int target = 59999; // matches are from 58999 to 999 (wrapped around)
for (Integer timestamp : timestamps) {
    if (Math.abs(timestamp + 60000 - target) <= 1000 || Math.abs(timestamp - target) <= 1000) {
        // this timestamp is a match
    }
} 
```

此代码只需检查两次 - 一次用于翻转和非翻转。

我已经对其进行了测试，它也适用于“滚动” - 即当目标小于 1000 时（因此范围将在 59000 + 目标和目标之间）

# android-ndk - 对“__errno_location”的未定义引用

> ID：10414277
> 
> 赞同：9
> 
> 时间：2012-05-02T12:59:41.610
> 
> 标签：android-ndk

我正在为 ndk 编译应用程序，我收到错误“未定义对 `__errno_location' 的引用”。

错误来自一行

```
sprintf( buff, "%s TIOCMGET failed: %s\n", buff, strerror(errno) ); 
```

如果我评论这一行，链接器不会抱怨，否则它会抱怨。

我正在尝试使用 Sourcery G++ Lite 的 arm-none-linux-gnueabi-gcc 工具链为 android 构建我自己的可执行文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T13:15:15.807

据我所知，您的编译器正在引用一个`__errno_location`在链接器正在查看的任何库中都找不到的符号。

这表明：

1.  您没有正确的库；或者
2.  您确实有正确的库，但没有将它们提供给链接器；或者
3.  您没有正确的标题。

如果标头与库不匹配，则符号可能具有错误的名称，因此您可能会遇到此类链接错误。

看来您正在包含编译器的 LibC 标头，然后链接到可能并不总是有效的 android 库。

# .net - .net 客户端中的 tecdoc WebService apache 轴

> ID：10414278
> 
> 赞同：1
> 
> 时间：2012-05-02T12:59:43.910
> 
> 标签：.net, web-services, wsdl, axis2, webservice-client

我正在尝试使用在 Apache Axis 上生成的 Web 服务：

[http://webservicepilot.tecdoc.net/pegasus-2-0/wsdl/TecdocToCatWL](http://webservicepilot.tecdoc.net/pegasus-2-0/wsdl/TecdocToCatWL)

```
VehicleManufacturers3Request req = new VehicleManufacturers3Request()
    {
        provider = 289,
        lang = "fr",
        carType ="1",
        evalFavor = false,
        favouredList = 1,
        countryGroupFlag = false,
        countriesCarSelection = "fr"
    };

getVehicleManufacturers3RequestBody requestBody = new getVehicleManufacturers3RequestBody(req);
getVehicleManufacturers3Request request = new getVehicleManufacturers3Request(requestBody);

TecdocToCat cat = new TecdocToCatClient();           

getVehicleManufacturers3Response response = cat.getVehicleManufacturers3(request); 
```

使用提琴手，我看到我得到了回应：

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope 
        xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
    <getVehicleManufacturers3Response 
            xmlns="http://webservicepilot.tecdoc.net/pegasus-2-0/services/TecdocToCatWL">
        <getVehicleManufacturers3Return xmlns="">
            <data>
                <array>
                <array>
                    <manuId>609</manuId>
                    <manuName>AC</manuName>
                </array>
                <empty>false</empty>
            </data>
            <status>200</status>
            <statusText xsi:nil="true"/>
        </getVehicleManufacturers3Return>
    </getVehicleManufacturers3Response>
</soapenv:Body></soapenv:Envelope> 
```

但是`response.Body`是空的。

有人可以说可能的问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:58:56.150

问题是我使用了错误版本的网络服务。

# javascript - rails 3.1 提交带有链接的 ajax (remote: true) 表单

> ID：10414284
> 
> 赞同：3
> 
> 时间：2012-05-02T13:00:09.480
> 
> 标签：javascript, jquery, ajax, ruby-on-rails-3

在 Rails 3.1 应用程序上使用 ajax，我需要能够使用链接而不是提交按钮提交 ajax 表单（远程：true）。

我需要对链接（或表单）做什么才能使其作为 ajax 而不是普通的表单提交？我尝试将 onclick java 添加到链接中，但在每种情况下，它都只是以非 ajax 方式提交表单（页面刷新）。

ajax 表单目前可以很好地使用提交按钮，所以它必须是一些小东西......

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:17:31.057

当你创建一个表单时`:remote => true`，Ajax 事件被绑定到表单的提交按钮上。您必须使用 javascript 来触发该事件。这是我用来完成类似事情的一些代码：

```
<%= form_for [item.list, item], :remote => true, :html => { :'data-type' => 'json', :id => 'change-completed-form' } do |f| %>
    <td><%= f.label :name, item.name %></td>
    <td><%= f.check_box :completed, :onClick => "this.form.submit_button.click();" %></td>
    <%= f.submit :id => 'submit_button', :style => 'display: none;' %>
<% end %> 
```

# eclipse - PlayN GWT/HTML，一直坚持必须（重新）编译模块

> ID：10414287
> 
> 赞同：0
> 
> 时间：2012-05-02T13:00:18.270
> 
> 标签：eclipse, gwt, maven, playn

我使用 GettingStarted wiki 页面中给出的命令行从 1.2 原型创建了一个新的 PlayN 项目。然后我将这个 Maven 项目导入到 Eclipse 中，只引入了 core、java 和 html 模块。如果我右键单击 Java 项目，我可以选择我的主类，然后会弹出一个显示背景图像的窗口。请注意，我还没有进行真正的编程：我只是使用默认的项目配置。

接下来，我在 HTML 项目上通过 Eclipse 使用 GWT-compile，没有出现任何错误。*当我使用提供的 URL（不*删除“?gwt.codesvr=127.0.0.1:9997”位）将其作为 Web 应用程序运行时，应用程序运行良好，但 Eclipse 控制台会发出有关处于开发模式的警告。（具体来说，“您正在 GWT 开发模式下运行。为了获得最佳性能，您可能需要使用替代方法。”）

但是，如果我以推荐的方式运行应用程序，通过删除 gwt.codesvr 参数，我会不断收到一个对话框，提示“可能需要（重新）编译 GWT 模块 'testproject'”。

阅读后[如何在生产模式下运行 maven/eclipse/GWT/playN 应用程序？](https://stackoverflow.com/questions/10034458/how-do-i-run-a-maven-eclipse-gwt-playn-app-in-production-mode)，我尝试做`mvn test -Ptest-html` 然后将我的浏览器指向[http://localhost:8080](http://localhost:8080)，但它给出了同样的错误。

难道我做错了什么？

（编辑：我不知道下一点是否重要，但无论如何我都会分享它。当我尝试从 Eclipse 创建一个项目时，我可以看到的最新 PlayN 原型是 1.0.3，即使在告诉 Eclipse 之后也是如此更新 Maven 索引。我正在运行 Eclipse Indigo。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:43:32.380

我猜你正在运行 PlayN 1.0.3。

1.0.3有一个bug：所以需要做如下操作：

1.  运行 GWT 编译

2.  运行 Web 应用程序并收到错误消息：“GWT 模块 'testproject' 可能需要（重新）编译。”

3.  再次运行 GWT-compile，同时 Web-Application 正在运行

4.  使用 CTRL-F5 重新加载浏览器

重要的步骤是第 3 步。

注意：您可以更新到 PlayN 1.2 以消除该错误。为此，您必须更改文件 playn-showcase/pom.xml。

将行更改 `<version>1.0.3</version>` 为 `<version>1.2</version>`

# javascript - 使用 JavaScript 和 jQuery 创建便笺

> ID：10414291
> 
> 赞同：1
> 
> 时间：2012-05-02T13:00:32.943
> 
> 标签：javascript, jquery

我正在尝试使用 Javascript 和 jQuery 构建便笺。我遇到的问题是，`draggable()`不能`deleteNote()`在**新附加的元素**上调用函数。我怎样才能解决这个问题？

编辑： ID 实际上应该得到一个附加的数字，我不知道如何实现，因为我不知道如何创建一个计数器。例如`newbox1`

我在 jsfiddle 上的代码：http: [//jsfiddle.net/wowpatrick/qexRS/4/](http://jsfiddle.net/wowpatrick/qexRS/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:04:12.453

您可以`.click`在创建新元素后将处理程序添加到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:04:45.490

您不应该创建具有相同 ID 的多个元素，而是使用类。

此外，您可以立即将 附加`.draggable()`到创建的元素而不是定位`$('#newbox')`。

这是一个效果更好的叉子：http: [//jsfiddle.net/YvtLb/](http://jsfiddle.net/YvtLb/)

关键在这里：

```
var postit = $('<div class="ui-widget-content newbox" style="top:' + e.pageY + 'px; left: ' + e.pageX + 'px;"><span id="close">Delete comment</span><p>Your comment:</p><textarea></textarea></div>').draggable();
$('#canvas').append(postit); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:11:36.227

您需要实时附加事件处理程序，因为在您最初调用它们时不存在任何元素。

使用 jQuerys `live()`(Attention:deprecated [Docu](http://api.jquery.com/live/) ) 或使用新的 jQuery 版本`on()`( [Docu](http://api.jquery.com/on/) )，以便能够将事件附加到每个新创建的注释上。

也不要使用 ID，因为这会产生无效标记，因为 ID 必须始终是唯一的。改用类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:05:10.957

这是因为页面加载`#newbox`不存在。更好的方法是将新元素存储在变量中，附加它，然后应用`draggable`，试试这个：

```
// Create the new comment at the corsor postition
var $newbox = $('<div class="ui-widget-content" id="newbox" style="top:' + e.pageY + 'px; left: ' + e.pageX + 'px;"><span id="close">Delete comment</span><p>Your comment:</p><textarea></textarea></div>');
$('#canvas').append($newbox);
$newbox.draggable(); 
```

[**示例小提琴**](http://jsfiddle.net/qexRS/5/)

# apache-flex - GroupCollection2 比较函数拆分组

> ID：10414293
> 
> 赞同：1
> 
> 时间：2012-05-02T13:00:43.103
> 
> 标签：apache-flex

在下面的代码中 GroupCollection2 比较函数将一组分成 2 组。当我删除比较功能时，它工作正常，但是当将比较添加到排序列时，它会将一组分成不同的组。

```
 <?xml version="1.0" encoding="utf-8"?>
  <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" >

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <fx:XMLList id="defaultColumns">
        <ROW>
            <NAME>A</NAME>
            <COLUMN_SRT_ORDR>4</COLUMN_SRT_ORDR>
            <GROUP_DESCRIPTION>1\. Description</GROUP_DESCRIPTION>
        </ROW>
        <ROW>
            <NAME>B</NAME>
            <COLUMN_SRT_ORDR>11</COLUMN_SRT_ORDR>
            <GROUP_DESCRIPTION>1\. Description</GROUP_DESCRIPTION>
        </ROW>
        <ROW>
            <NAME>C</NAME>
            <COLUMN_SRT_ORDR>36</COLUMN_SRT_ORDR>
            <GROUP_DESCRIPTION>1\. Description</GROUP_DESCRIPTION>
        </ROW>
        <ROW>
            <NAME>D</NAME>
            <COLUMN_SRT_ORDR>41</COLUMN_SRT_ORDR>
            <GROUP_DESCRIPTION>1\. Description</GROUP_DESCRIPTION>
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>E</NAME>
            <COLUMN_SRT_ORDR>2</COLUMN_SRT_ORDR>
            <GROUP_DESCRIPTION>2.Budget</GROUP_DESCRIPTION>
        </ROW>
        <ROW>
            <NAME>F</NAME>
            <COLUMN_SRT_ORDR>6</COLUMN_SRT_ORDR>
            <GROUP_DESCRIPTION>2.Budget</GROUP_DESCRIPTION>
        </ROW>
        <ROW>
            <NAME>G</NAME>
            <COLUMN_SRT_ORDR>7</COLUMN_SRT_ORDR>
            <GROUP_DESCRIPTION>2.Budget</GROUP_DESCRIPTION>
        </ROW>
        <ROW>
            <NAME>G</NAME>
            <GROUP_DESCRIPTION>DEBUG</GROUP_DESCRIPTION>
            <COLUMN_SRT_ORDR>10003</COLUMN_SRT_ORDR>
            <OPTIONS/>
        </ROW>

        <ROW>
            <NAME>H</NAME>
            <GROUP_DESCRIPTION>DEBUG</GROUP_DESCRIPTION>
            <COLUMN_SRT_ORDR>10005</COLUMN_SRT_ORDR>
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>I</NAME>
            <COLUMN_CAPTION>Sql</COLUMN_CAPTION>
            <COLUMN_WIDTH>1</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>DEBUG</GROUP_DESCRIPTION>
            <COLUMN_SRT_ORDR>10006</COLUMN_SRT_ORDR>
            <OPTIONS/>
        </ROW>
    </fx:XMLList>
    <mx:GroupingCollection2 id="colGroup" source="{defaultColumns}">
        <mx:grouping>
            <mx:Grouping>
                <mx:GroupingField name="GROUP_DESCRIPTION"  compareFunction="myCompare"/>
            </mx:Grouping>
        </mx:grouping>
    </mx:GroupingCollection2>
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;
        import mx.events.IndexChangedEvent;
        private function myCompare(a:Object, b:Object):int{

            var result:int=-1;
            if(parseInt(a.COLUMN_SRT_ORDR)<parseInt(b.COLUMN_SRT_ORDR))
                result=-1;
            else if(parseInt(a.COLUMN_SRT_ORDR)==parseInt(b.COLUMN_SRT_ORDR))
                result=0;
            else
                result=1;
            return result;
        }   

    ]]>
</fx:Script>
<mx:TabNavigator id="groupTabs" borderStyle="solid" width="100%" initialize="{colGroup.refresh()}" >
    <mx:Repeater dataProvider="{colGroup.getRoot()}" id="t">

        <mx:VBox  label="{t.currentItem.GroupLabel}" width="100%" height="100%">

        </mx:VBox>
    </mx:Repeater>

</mx:TabNavigator>  

</s:Application> 
```

# java - 如何将 xPath 转换为 CSS 选择器

> ID：10414296
> 
> 赞同：0
> 
> 时间：2012-05-02T13:00:51.110
> 
> 标签：java, xpath, selenium, automation, css-selectors

谁能帮我将我的 xPath 转换为 CSS 选择器？我要更改的代码是这个：

```
String selector = "";
    if(hasBaseCls()){
        selector += " and contains(@class, '" + getBaseCls() + "')";
    }
    if(hasCls()){
        selector += " and contains(@class, '" + getCls() + "')";
    }
    if (hasName()) {
        selector += " and contains(@name,'" + getName() + "')";
    }
    if(hasStyle()){
        selector += " and contains(@style ,'" + getStyle() + "')";
    }

    if(hasVisibleOption()){
        selector += " and count(ancestor-or-self::*[contains(@style, 'display: none')]) = 0";
    } 
```

我正在尝试更改我的框架以使用 CSS 选择器，这是我代码中的典型构造。如果我在这个问题上看到一个有价值的答案，我想我可以管理我的大部分其他结构

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:39:27.247

您可以将其部分更改为：

```
String selector = "";
if(hasBaseCls()){
    selector += "." + getBaseCls();
}
if(hasCls()){
    selector += "." + getCls();
}
if (hasName()) {
    selector += "[name*='" + getName() + "']";
}
if(hasStyle()){
    selector += "[style*='" + getStyle() + "']";
} 
```

所以选择器将类似于`a.class1.class2[name*='somename'][style*='somestyle']`

# php - php xml PDO插入查询错误

> ID：10414301
> 
> 赞同：0
> 
> 时间：2012-05-02T13:01:19.747
> 
> 标签：php, forms, pdo

嘿，我正在尝试使用此隐藏表单传递 xml 值：

```
<form method='post' action='addholiday.php'  id='addHoliday'>
<input type='hidden' name='title' id='title' value= '.$holiday->title'>
<input type='hidden' name='link' id='link' value= '.$holiday->link'>
<input type='hidden' name='date' id='date' value= '.$holiday->pudDate'>
<input type='hidden' name='description' id='description' value= '.$holiday->description'>
    <input type='submit' name='submit' value='Add Holiday'>"; 
```

并使用 PDO 进程将值插入 mysql 数据库：

```
 $db = getConnection();

//get holiday infor from hidden form
$user = $_SESSION['user'];
$title = $_POST['title'];
$link = $_POST['link'];
$date = $_POST['date'];
$description = $_POST['description'];

//insert the values in to favorties table
 $sql = "INSERT INTO saved_holidays (subscriberID, link, pubDate, title, description,dateSaved) 
VALUES (:subscriberID, :link, :pubDate, :title, :description, now())";

$stmt = $db->prepare($sql);
$stmt ->bindParam(':subscriberID', $user);
$stmt ->bindParam(':link', $link);
$stmt ->bindParam(':pubDate',$date);
$stmt ->bindParam(':title', $title);
$stmt ->bindParam(':description', $description);

$stmt->execute(array($user, $link, $date, $title, $description )); 
```

但是，当我尝试使用表单时，我不断收到此错误消息

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY093]: 
Invalid parameter number: parameter was not defined' in     var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11023553/public_html/holiday/addholiday    .php:39 Stack trace: #0
/var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11023553/public_html/holiday/addholiday.php(39):PDOStatement->execute(Array) #1 {main} thrown in /var/www/vhosts/numyspace.co
.uk/web_users/home/~unn_w11023553/public_html/holiday/addholiday.php on line 39 
```

我对使用 PDO 比较陌生，所以任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:42:07.177

`execute`如果您打算以这种方式使用，则不需要使用`bindParam`（反之亦然）。您确实需要将数组作为 key => value 传递，并将键作为查询中使用的符号（“符号”是从 Ruby 术语中借用的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:53:26.673

您在`execute`方法中传递参数并将它们绑定到语句`bindParam`- 您只需要做一个或另一个！

# google-maps - 谷歌地图 v3 动态设置标记标题

> ID：10414307
> 
> 赞同：2
> 
> 时间：2012-05-02T13:01:37.673
> 
> 标签：google-maps

我有[这个](http://www.buscocolegio.com)学校搜索器；为了绘制找到的学校，我得到了他们的纬度和经度以及他们的名字：

```
<%  String[] latitudes=(String[])request.getAttribute("latitudes");
String[] longitudes=(String[])request.getAttribute("longitudes");
String[] names=(String[])request.getAttribute("names");
if(latitudes!=null){
    for (int i=0; i<latitudes.length; i++) { %> 

    var location = new google.maps.LatLng(<%= latitudes[i] %>,<%= longitudes[i] %>);
    var marker = new google.maps.Marker({
        position: location,
        map: map
    });
    var title = <%= names[i] %>;
    marker.setTitle(title.toString());

<% }
}%> 
```

您可以动态设置标记的纬度和经度，但是如果您尝试设置标题，它将不起作用并且地图不会显示

所以，有人知道如何解决这个问题吗？提前致谢！！

# xml - 如何使用 QDomElement 在 qt 中的 XML 标记之间写入？

> ID：10414310
> 
> 赞同：1
> 
> 时间：2012-05-02T13:01:44.527
> 
> 标签：xml, qt, tags

我正在尝试使用 QDomElement 创建一个 XML，例如；

```
<?xml version="1.0"?>
<ECU>

<DATE DATE="mer. mai 2 2012"/>
 <FILE/>
 <CONFIGURATION>
  <SESSION />
  <TYPE TYPE="Défaut"/>
 </CONFIGURATION>
 <DETAILS>
  <SELECTED-REQUESTS>
   <TEST/>
   <TIMEOUT/>
   <SENT-TRAM />
   <RECEIVED-TRAM/>
   <POS-RESPONSE/>
   <STATUS STATUS/>
  </SELECTED-REQUESTS>
  <SELECTED-REQUESTS>
   <TEST/>
   <TIMEOUT />
   <SENT-TRAM />
   <RECEIVED-TRAM />
   <POS-RESPONSE />
   <STATUS />
  </SELECTED-REQUESTS>
 </DETAILS>
</ECU> 
```

我不能做的是，我无法在标签中插入文本，我可以添加为属性；

```
<POS-RESPONSE POS-RESPONSE="77"/> 
```

如何使用 QDomElement 添加标签的值？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:13:44.713

请参阅由[`QDomNode::appendChild()`](http://doc.qt.nokia.com/4.7-snapshot/qdomnode.html#appendChild)继承的文档`QDomElement`。您可能想要创建一个类型为 的新节点`QDomNode::TextNode`，然后将其附加为 POS-RESPONSE 标记节点的子节点。

# php - php mysql中的if语句

> ID：10414316
> 
> 赞同：0
> 
> 时间：2012-05-02T13:02:21.057
> 
> 标签：php, mysql

我形成编辑数据库中的表。但是，用户可能不会选择图像，因此如果他们不选择，我不想更新该字段。我已经尝试了几种方法来做到这一点，但都没有奏效。有没有简单的方法？谢谢。

```
if ($_POST["image"]!=='') { 
      $image= "image=%s"; 
      $imageValue =    "GetSQLValueString(".$_POST['image'].", 'text'),";
};

$insertSQL = sprintf("UPDATE taxi SET name=%s, taxi_link=%s, ". $image." WHERE id=%s",
                   GetSQLValueString($_POST['name'], "text"),
                   GetSQLValueString($_POST['link'], "text"),
                   $imageValue,
                   GetSQLValueString($_POST['id'], "int")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:06:54.667

如果我正确理解你，你不能把整个事情放在 if 语句中吗？

```
if ($_POST["image"]!=='') { 
      $image= "image=%s"; 
      $imageValue =    "GetSQLValueString(".$_POST['image'].", 'text'),";
      $insertSQL = sprintf("UPDATE taxi SET name=%s, taxi_link=%s, ". $image." WHERE id=%s",
                   GetSQLValueString($_POST['name'], "text"),
                   GetSQLValueString($_POST['link'], "text"),
                   $imageValue,
                   GetSQLValueString($_POST['id'], "int"));
      //execute query
} else {
    //tell the user nothing happened
} //no semicolon required 
```

所以现在它**只会**在指定图像的情况下构建和执行查询，如果没有指定，你可以做其他事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:11:30.060

如果你使用像 CodeIgniter 这样的框架，你可以简单地：

```
$arr_values = array('name' => $_POST['name'],
                    'taxi_link' => $_POST['link']);

if ( ! $_POST["image"])
    $arr_values['image'] = $_POST['image'];

$this->db->update($arr_values, array('id' => $_POST['id'])); 
```

update() 只处理一个数组，您可以根据条件简单地向该数组添加其他值。

就个人而言，我制作了自己的函数，就像这个函数一样，它非常适合添加和使用数组值。

修复了您的查询：

```
$image = '';
if ($_POST["image"] !== '')
      $image= ", image=".GetSQLValueString($_POST['image'], 'text');

$insertSQL = sprintf("UPDATE taxi SET name=%s, taxi_link=%s {$image} WHERE id=%s",
                   GetSQLValueString($_POST['name'], "text"),
                   GetSQLValueString($_POST['link'], "text"),
                   GetSQLValueString($_POST['id'], "int")); 
```

# iis - 正确设置 Umbraco 分布式调用设置（多服务器集群设置）

> ID：10414317
> 
> 赞同：0
> 
> 时间：2012-05-02T13:02:26.597
> 
> 标签：iis, umbraco, cluster-computing

我们有一个服务器设置，我们的 Umbraco 站点有 2 个 Web 服务器：

1 是“编辑”。这是人们添加内容的地方。这可以将页面返回给编辑，但公众永远不会看到这一点。

2 是“网络服务器”。这些向公众提供内容。他们从不允许编辑。

通常，我们将它们作为两台服务器 - 一台向公众提供并允许编辑，另一台只向公众提供服务。

DistributedCall 配置选项的正确设置是什么？我通常会列出集群中的所有节点，但在这种情况下，我是否需要列出编辑器？还是只是两个“公共”？我假设它做了类似的事情：

提交本地发布调用列表中的服务器 A 调用列表中的服务器 B

这意味着我不需要在列表中列出编辑器（我不想这样做）

[Umbraco 4.7 顺便说一句]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:00:29.423

再次回答我自己的问题。叹。

最终在我们的实时网站上“只是这样做”。到底：

编辑服务器：已打开分布式调用。指向其他节点和自身。

2 个 Web 节点：已关闭分布式调用。

我打开了 2 个节点，但它们往往会自行回调，这是有问题的。

固定的。

# java - 我在 java 字符串中有 HTML，我想将它呈现为 PDF。是否有任何 API 或参考可用？

> ID：10414318
> 
> 赞同：0
> 
> 时间：2012-05-02T13:02:33.903
> 
> 标签：java, html, pdf, pdf-generation

> **可能重复：**
> [将 HTML 文件转换为 PDF](https://stackoverflow.com/questions/633780/converting-html-files-to-pdf)

我在 java 字符串中有 HTML，我想将它呈现为 PDF。有免费的 API 或参考吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:09:40.940

看看[飞碟](http://code.google.com/p/flying-saucer/)。它符合 CSS 2.1，甚至涵盖了一些 CSS3 功能，并且在底层使用了 iText。我发现将 XHTML 转换为 PDF 非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:06:00.740

根据您的 HTML 代码的复杂性，您可以尝试 iText 的 XMLWorker。

该项目 ：

[http://sourceforge.net/projects/xmlworker/](http://sourceforge.net/projects/xmlworker/)

演示（在此处粘贴您的 HTML 以检查生成的 PDF 的外观）：

[http://demo.itextsupport.com/xmlworker/](http://demo.itextsupport.com/xmlworker/)

文档：

[http://demo.itextsupport.com/xmlworker/itextdoc/index.html](http://demo.itextsupport.com/xmlworker/itextdoc/index.html)

# jquery - 在mvc3 jquery中获取下拉选择的值到文本框

> ID：10414322
> 
> 赞同：1
> 
> 时间：2012-05-02T13:02:42.547
> 
> 标签：jquery, asp.net, asp.net-mvc-3, razor

我的视图中有一个下拉列表和文本框。现在我必须使用 jquery 将下拉列表的选定值设置为文本框。我不应该回帖。我正在学习 mvc3 。所以给我最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:09:44.967

如果您不想回发，则需要使用 javascript。例如，如果您使用 jQuery，您可以订阅[`.change()`](http://api.jquery.com/change/)下拉事件并设置文本框的值：

```
$(function() {
    $('#id_of_your_drop_down').change(function() {
        var selectedValue = $(this).val();
        $('#id_of_your_text_box').val(selectedValue);
    });
}); 
```

[我还建议您阅读jQuery 文档](http://docs.jquery.com/Tutorials)中的入门教程，因为这是非常基本的功能。

# batch-file - 复制 N 天前的文件

> ID：10414326
> 
> 赞同：1
> 
> 时间：2012-05-02T13:02:50.200
> 
> 标签：batch-file, xcopy

我正在使用当前代码复制文件：

```
xcopy /s /d:[date] source target 
```

如何获得 N 天前的日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:32:22.507

也许 robocopy 是合适的。

```
c:\>set N=0

c:\>robocopy srcdir dstdir foo.* /MINAGE:%N% /MAXAGE:%N% 
```

# java - 从 JTextField 获取文本时字符串为空

> ID：10414331
> 
> 赞同：-4
> 
> 时间：2012-05-02T13:03:02.157
> 
> 标签：java, eclipse, string, jtextfield, jtextarea

好的，我编辑了原始帖子，所以没有人会再次争论标题（这是我的错，所以现在不要生气）......我有一部分代码采用 TextField 的文本（有实际上是两个 TextField，但用户一次只能使用一个）并将其搜索到存储在终端中的文件中。问题是我总是得到一个空字符串，即使文本字段之一中有文本......这是代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;

public class Search implements ActionListener{
JFrame frame;
JButton click;
JLabel comando, carico;
JTextField textv, text;
JTextArea res;
String pathFile = "C:\\Log.txt";
String str= new String();

Search(){

    frame = new JFrame("Search");
    frame.setSize(400, 200);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new GridLayout(1,2));
    frame.setResizable(false);
    JPanel panel = new JPanel();
    panel.setLayout(new GridLayout(7,1));
    click = new JButton("Cerca");
    comando = new JLabel("Comando");
    carico = new JLabel("A carico di:");
    textv = new JTextField("");
    text = new JTextField("");
    res = new JTextArea("");
    panel.add(comando);
    panel.add(textv);
    panel.add(carico);
    panel.add(text);
    panel.add(click);
    res.setLineWrap(true);
    res.setWrapStyleWord(true);
    res.setBorder(BorderFactory.createEmptyBorder(4, 4, 4, 4));

    JScrollPane scroller = new JScrollPane(res);
    scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    panel.add(scroller);
    frame.add(panel);
    click.addActionListener(this);      
    click.setSize(70, 35);      
    frame.setVisible(true);

}

public void actionPerformed (ActionEvent e){
    if(e.getSource()==click){
        res.setText(null);
        if(textv != null) {cercaStringa(pathFile, textv.getText().toString());}
        else {cercaStringa(pathFile, text.getText().toString());}
    }
}

public void cercaStringa(String pathFile, String stringa){
    try {
        BufferedReader in = new BufferedReader(new FileReader(pathFile));
        String line = new String();
        while((line = in.readLine())!=null) {   
            if(line.contains(stringa)){
                res.append(line);
                res.append("\n");
                }
        }
    }
    catch(IOException ex) { ex.printStackTrace();}
    }

public static void main (String[] args){
    new Search();
} 
```

}

我真的要把所有东西都扔到窗外，因为我知道解决方案很简单，但我做不到......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:08:33.093

唯一`str`保证总是给出`true`的`line.contains(str)`值是 empty `String`。

* * *

（您应该假设该`String.contains`方法确实按照其规范工作。对于 Java SE 如此重要的方法中以前未检测到的错误的可能性可以忽略不计，尤其是像您建议的那样壮观的错误。当然，声称它是在没有任何确凿证据的情况下破坏只会浪费每个人的时间……尤其是你的时间。）

# jquery - 为什么我的动态添加的元素没有用 jqm 和 phonegap 显示？

> ID：10414334
> 
> 赞同：1
> 
> 时间：2012-05-02T13:03:04.183
> 
> 标签：jquery, blackberry, jquery-mobile, cordova, blackberry-webworks

所以，我在 phonegap+jqm 应用程序上工作了一段时间。我一直在用我的安卓手机、一个黑莓模拟器（os7）和一个黑莓设备（os5）进行测试。我的应用程序只是使用 ajax 调用从 Web 服务中获取一些数据，并使用这些数据动态创建一些页面，其唯一目的是显示该数据。

**工作原理**：Ajax 调用成功并且检索到的数据符合预期。还正确应用了 jqm 样式（通过使用通常的触发器“创建”和“刷新”）。整个应用程序在我的 android 设备和带有 os7 的 bb 模拟器中运行良好。

**什么不起作用**：动态创建和附加的元素永远不会显示，而是旧元素（应该已经被删除）保留在那里。仅当使用 os5 使用 bb 进行测试时才会发生这种情况。

现在，一些代码。在触发 ajax 调用时，我使用了几个函数来完成所有工作。这是每个或页面的标准程序：

当从调用中接收到数据时，响应将传递给特定的处理程序，该处理程序执行从响应中获取数据的工作：

```
function processListElements(response){
    alert("processListElements Start"); // THIS IS EXECUTED
    $('#anagTableList li[data-role="button"]').remove();

    $(response).find('return').each(function(){
alert("inside responseFind"); // THIS IS NEVER SHOWN            
var myNewLI=getFormattedLI($(this).find('codice').text(),$(this).find('responsabile').text());
        $('#anagTableList').append(myNewLI).listview('refresh');

    });

    $('#tablePage').trigger('create');
    $('#anagTableList').listview('refresh');
            alert("processListElements End"); // THIS IS SHOWN!
} 
```

如您所见，新项目是使用另一个函数创建的，该函数正确格式化元素：

```
function getFormattedLI(codice,responsabile){
    var myFormattedLI = '<li data-role="button" data-icon="arrow-r" data-iconpos="right">'+
                            '<p>'+codice+' - '+responsabile+'<\/p>'+
                        '<\/li>';

    return myFormattedLI;
} 
```

最后，这是此页面的标记：

```
<div id='tablePage' data-role="page">

<div data-theme="a" data-role="header">
    <h1 >Commesse Tigre</h1>
</div><!-- /header -->

<ul id='anagTableList' data-filter="true" data-theme="a" data-role="listview" data-inset="true">
    <a href="#" id="advancedSearch" data-theme="c" style="color:#FF8C90;text-decoration:none">advanced search</a>
    <li id='tableHeader' data-role="header">CODICE - RESPONSABILE - ANNO</li>

</ul>

<div data-theme="a" data-role="footer">
    <div class="ui-grid-b">
        <div class="ui-block-a"><a href="#" id="pageLeft" data-role="button" data-icon="arrow-l" data-iconpos="notext" style="margin-top:7px;">Previous page</a></div>
        <div class="ui-block-b" style="text-align:center;margin-top:15px;">Page<p id='currentPage' style="display:inline">1</p> of <p  style="display:inline" id='totalPages'>2</p></div>
        <div class="ui-block-c"><a href="#" id="pageRight" data-role="button" data-icon="arrow-r" data-iconpos="notext" style="float: right;margin-top:7px;">Next page</a></div>
    </div><!-- /footer -->
</div> 
```

那么，为什么我更改页面时没有显示我的新列表项？难道我做错了什么？

非常感谢任何帮助，我已经为此苦苦挣扎了一段时间，但找不到任何解决方案。另外，很抱歉这个长问题:)

编辑 1：这么久以来，我都尝试将我的所有 jquery 函数更改为纯 javascript。什么都没有改变（不是我对此寄予厚望）

编辑2：仍在为此苦苦挣扎，而且每次都变得陌生。我一直在做一些测试应用程序，它们的工作方式完全相同（ul 被附加了新的 li）并且它们都可以工作，除了具有上述发布代码的应用程序，其中元素仍然没有显示。

编辑 3：我发现 response.find 函数中的所有内容都不会被执行，但代码不会阻塞，因此在函数中放置警报永远不会显示。编辑代码以更好地解释。

编辑 4：我认为可以肯定地说“查找”功能没有找到任何“返回”节点。响应来自轴 2 Web 服务，每个返回节点都标记为“ns:return”。这对我的 android 和 bb7 设备来说不是问题，但显然是我的 bb5 的问题。将 find 更改为 "ns:return" 解决不了任何问题。我好累。帮助！

编辑5（最后）：我无法解决问题，但我确实找到了。现在问题已减少为能够在 jquery 或 javascript 中找到具有命名空间的节点。SO中有很多问题可以解决这个问题，但直到现在对我来说没有任何效果，因为jQuery 1.7已经打破了所有的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:42:27.843

嗨，我有一个工作示例，我在其中创建了一个字符串中的所有 HTML 列表元素 (li)（这里假设 arrLI 是 li 元素字符串的数组）：

```
$('#mylist').append(arrLI.join(""));
$('#mylist').listview('refresh');
$('#mylist').trigger('create'); 
```

并删除每个元素的刷新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:02:15.950

我终于解决了这个问题。xml 响应中的每个返回是这样的：

```
 <ns:return xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ax21:CommessaBase">
        <ax21:codice>CODICE0</ax21:codice> 
        <ax21:responsabile>PERSON0</ax21:responsabile> 
     </ns:return> 
```

所以，上面的代码，它正在寻找返回的地方，没有找到任何东西。我尝试了几件事，最后，起作用的功能是：

```
 function processListElements(response){

    $('#anagTableList li[data-role="button"]').remove();
    $('#anagTableList').listview('refresh');

    $(response).find('*').filter('ns\\:return').each(function(){

        var myNewLI=getFormattedLI($(this).find('*').filter('ax21\\:codice').text(),$(this).find('*').filter('ax21\\:responsabile').text());
        $('#anagTableList').append(myNewLI);
        $('#anagTableList').listview('refresh');

    });

} 
```

# iphone - SQLite 查询不工作 - (Objective-c)

> ID：10414343
> 
> 赞同：-1
> 
> 时间：2012-05-02T13:04:01.917
> 
> 标签：iphone, objective-c, ios, xcode, sqlite

我正在使用 xCode 4.3.2。在这里，我试图从数据库中加载列名和值。当我使用 sqlQuery：“select * from mytable Where company like 'SONY'”时，它不起作用，但“select * from mytable”工作正常。请你帮助我好吗？

```
static int loadCallback(void *context, int count, char **values, char **columns)
{
    NSString *columnName;
    NSString *columnValue;

    for (int i=0; i < count; i++) 
    {    
        columnName = [NSString stringWithUTF8String:columns[i]];

        if (values[i])
        columnValue = [NSString stringWithUTF8String:values[i]];
        else
        columnValue = @"";

        NSLog(@"%@:%@", columnName, columnValue);
    }

    return SQLITE_OK;
}

- (void)loadDataFromDatabase
{
    NSString *file = [self getWritableDBPath];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    BOOL success = [fileManager fileExistsAtPath:file]; 

    // If its not a local copy set it to the bundle copy
    if(!success) {
        //file = [[NSBundle mainBundle] pathForResource:DATABASE_TITLE ofType:@"db"];
        [self createEditableCopyOfDatabaseIfNeeded];
    }

    sqlite3 *database = NULL;
    if (sqlite3_open([file UTF8String], &database) == SQLITE_OK) {

   //QUERY WORKING
     //sqlite3_exec(database, "select * from mytable", loadCallback, valueArray, NULL);

 //QUERY NOT WORKING
     sqlite3_exec(database, "select * from mytable Where company like 'SONY'", loadCallback, valueArray, NULL);
    }

    sqlite3_close(database);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:02:49.283

您是否正在寻找更像这样的 SELECT 语句：`SELECT * FROM mytable WHERE company LIKE '%SONY%'`？

# javascript - jQuery 中的隐藏/显示功能存在问题

> ID：10414348
> 
> 赞同：0
> 
> 时间：2012-05-02T13:04:16.743
> 
> 标签：javascript, jquery, html, javascript-events

我有一些结构如下的div：

```
<div>
    <div><a>more Info</a></div>
    <div><a>more segments</a></div>
</div>
<div>
    <div><a>more Info</a></div>
</div>
<div>
    <div><a>more Info</a></div>
    <div><a>more segments</a></div>
</div>
....... 
```

这些 div 是动态生成的。有些 div 包含 2 个超链接（如第 1 个 div），有些仅包含一个超链接（如第 2 个 div）。

1.  当我点击 时`moreInfo link`，它必须显示一个包含一些信息的 div。当我点击另一个链接时，之前显示的 div 应该被隐藏并打开与该链接关联的适当 div。
2.  当我点击 时`moresegments link`，它必须显示段数并且`all moreInfo links`应该被禁用。每个段由`moreInfo link`（段由代码组成，就像第二个 div 一样）。单击每个段中的更多信息链接后。它必须表现得像第 1 点。

    这是我的示例代码[http://jsfiddle.net/H5R53/16/](http://jsfiddle.net/H5R53/16/)

    在上面的代码中，当我点击`moreInfo link`它时会显示一个包含一些信息的 div。到目前为止它工作正常。现在我的问题是，当我再次单击同一链接时，它不会再次显示信息。而且，当我单击（不是 moresegments 链接`moresegments link`的`moreInfo links`子项）时，应该禁用所有打开的 div（单击 moreInfo 链接时打开）应该关闭。任何人请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:11:37.337

如果我正确理解您的问题，如果用户想打开另一个，您想隐藏 div #moreInfo。

如果是这样的话，

**查询**

```
if ($('#moreInfo').size()==1) {
    $('#moreInfo').remove();
} 
```

**您添加了该控件的 JQUERY**

```
$('.moreInfLink').live('click',function(){
    if ($('#moreInfo').size()==1) {
        $('#moreInfo').remove();
    }
   $(this).after("<div id='moreInfo'>sdasdad<br/>sdasdad<br/>sdasdad<br/><div id='close'>close</div></div>");
}); 
```

你的[小提琴更新了！](http://jsfiddle.net/zuul/H5R53/17/)

# c++ - 使用模板容器的构造函数 c++ 时遇到问题

> ID：10414350
> 
> 赞同：2
> 
> 时间：2012-05-02T13:04:22.103
> 
> 标签：c++, templates

我正在尝试使用自定义容器，并在该容器的构造函数中传递了一个内存池分配器。整个事情是这样开始的：

```
AllocatorFactory alloc_fac;

//Creates a CPool allocator instance with the size of the Object class
IAllocator* object_alloc = alloc_fac.GetAllocator<CPool>(1000,sizeof(Object));
//Creates a CPool allocator instance with the size of the BList<Object> class
IAllocator* list_alloc = alloc_fac.GetAllocator<CPool>(10,sizeof(BList<Object>));
//Same logic in here as well
IAllocator* node_alloc = alloc_fac.GetAllocator<CPool>(1000,sizeof(BListNode<Object>)); 
```

IAllocator 类如下所示：

```
 class IAllocator
{

public:

    virtual void* allocate( size_t bytes ) = 0;
    virtual void deallocate( void* ptr ) = 0;

    template <typename T>
    T* make_new()
    { return new ( allocate( sizeof(T) ) ) T (); }

    template <typename T, typename Arg0>
    T* make_new( Arg0& arg0 )
    { return new ( allocate( sizeof(T) ) ) T ( arg0 ); }

            .......
} 
```

容器类的构造函数如下所示：

```
template <class T>
class BList {
......
public:
/**
 *@brief Constructor
 */
BList(Allocators::IAllocator& alloc){
     _alloc = alloc;
    reset();
    }
/**
 *@brief Constructor
 *@param inOther the original list
 */
 BList(const BList<T>& inOther){
    reset();
    append(inOther);
    }
.....
} 
```

当我这样做时：

```
 BList<Object> *list = list_alloc->make_new<BList<Object>>(node_alloc); 
```

编译器对此抱怨：

> 错误 1 ​​错误 C2664: 'Containers::BList::BList(Allocators::IAllocator &)' : 无法将参数 1 从 'Allocators::IAllocator *' 转换为 'Allocators::IAllocator &' c:\licenta\licenta-transfer_ro -02may-430722\licenta\framework\framework\iallocator.h 21 框架

我想我用这个过头了....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:19:21.237

现有答案是正确的，但是关于如何自己阅读错误的快速说明：您只需将其分成几部分......

```
Error 1 error C2664: 'Containers::BList::BList(Allocators::IAllocator &)' : cannot convert parameter 1 from 'Allocators::IAllocator *' to 'Allocators::IAllocator &' 
```

阅读：

*   你正在调用`Containers::BList::BList(Allocators::IAllocator &)`，它是一个构造函数，带有一个参数，一个对`IAllocator`
*   `cannot convert parameter 1`意味着编译器在第一个（也是唯一一个）参数的类型上有问题
    *   你给了它这种类型：`... from 'Allocators::IAllocator *'`
    *   它想要这种类型（匹配构造函数声明）：`... to 'Allocators::IAllocator &'`

那么，你如何从你拥有的指针转换为构造函数想要的引用呢？

* * *

好的，我也添加了实际答案：

```
Allocators::IAllocator *node_alloc = // ...
Allocators::IAllocator &node_alloc_ref = *node_alloc;
BList<Object> *list = list_alloc->make_new<BList<Object>>(node_alloc_ref); 
```

要不就：

```
BList<Object> *list = list_alloc->make_new<BList<Object>>(*node_alloc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:08:02.500

您似乎`make_new`使用指针而不是引用进行调用。尝试：

```
BList<Object> *list = list_alloc->make_new<BList<Object>>(*node_alloc); 
```

请选择一个压痕阶梯并坚持下去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:08:43.670

您的分配器工厂正在返回一个指向分配器的指针，但您的构造函数需要对分配器的引用。您需要取消引用指针。

```
IAllocator* node_alloc = alloc_fac.GetAllocator<CPool>(1000,sizeof(BListNode<Object>));    

// Instead of:
// BList<Object> mylist(node_alloc);
// you need:
//
BList<Object> mylist(*node_alloc); 
```

# objective-c - 从 c++ std::map 初始化 Objective-C NSDictionary

> ID：10414352
> 
> 赞同：3
> 
> 时间：2012-05-02T13:04:38.293
> 
> 标签：objective-c, cocoa, map, nsdictionary

是否有一种巧妙的非暴力方法来使用 std::map 的内容初始化 NSDictionary？FWIW，在我的特殊情况下， std::map 的键和值都是 std::string 对象。谢谢。

# paypal - 是否可以创建电子邮件别名以通过 Paypal API 接收付款？

> ID：10414355
> 
> 赞同：2
> 
> 时间：2012-05-02T13:04:59.140
> 
> 标签：paypal, paypal-subscriptions

我想以编程方式在我的贝宝帐户上添加电子邮件别名，我想知道这是否可能（我找不到任何文档！）。

如果这是不可能的，是否可以改为允许整个域？（就像向 xyz@mydomain.com 发送付款一样，zyx@mydomain.com 也可以）？

谢谢你的帮助。

# android - CheckedTextView 属性 ID 和 checkMark

> ID：10414357
> 
> 赞同：0
> 
> 时间：2012-05-02T13:05:11.607
> 
> 标签：android, checkedtextview, checkmark

刚开始使用 android 开发，并认为网络研讨会可能会更好，而不是读书

```
<CheckedTextView
android:id="@android:id/text1"
android:checkMark="?android:attr/listChoiseIndicatorMultiple"
</> 
```

到目前为止，我不理解上面的代码，看到很多不同的 id 定义，其中一些是用于资源并以 @resource/name 开头，其中一些 id 定义就像 @+id/name 只是用于为组件，但这次它使用的是 android:id/text1 我不明白为什么它以这种方式使用它

此外，checkMark 的事情让我更加困惑那些 ?android:attr/listChoiseIndicatorMultiple 是什么意思？

你能否解释一下并告诉我一些资源在哪里可以找到所有这些魔法属性，这样我下次可以自己应对，希望有一天能回答其他新手问题

提前非常感谢，所有评论将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:15:45.200

好吧，阅读文档对我一直很有帮助：

[Android 开发者网站](http://developer.android.com/resources/index.html)

[XML 布局特定文档](http://developer.android.com/guide/topics/ui/declaring-layout.html#id)

`@android:id/text1`只是先前定义了 id 时使用的格式。当您在其中放一个 + 时，这意味着如果资源 ID 不存在，框架应该创建它。

在布局中定义新视图时使用@+id/thisid 是正常的，然后使用@id/thisid 从布局的另一部分引用上述视图（例如，在需要告诉一个小部件的RelativeLayout 中低于另一个）。

ID 前的问号表示您要访问在样式主题中定义的样式属性，而不是对属性进行硬编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:23:37.753

`@android:id/text1`基本上，当您创建任何 android 组件（如按钮、布局、textviews 等）时会使用它。

但是当您需要任何适用于不同平台的外部组件（例如任何颜色、图像等）时，您可以将其声明为`@resource/name`.

实际上并没有什么不同，只需记住一件事，在`@android:id/text1`,`id`中将简单地作为类名工作，将包含其他对象，如 textview、imageview 或任何其他对象。

现在，如果您声明`@resource/name`then ，而不是`id`类名将是资源。实际上，当您在 java 中使用它时，这些（`@android:id/text1`）将被转换为对象层次结构。

# java - JAVA 堆栈弹出错误，尝试创建撤消

> ID：10414367
> 
> 赞同：0
> 
> 时间：2012-05-02T13:05:40.893
> 
> 标签：java, netbeans, stack

我正在尝试`undo button`使用`stack`它来删除应用的效果，例如`blur`等，但是当我尝试存储在其中`pop out`的i出现问题时，请帮助我，在此先感谢！`image``stack`

应用效果：

```
if (e.getSource() == btnGrayscale) {
  if (buffImage != null) {
    Imagesteps.push(buffImage);
    ImageEffects ie = new GrayscaleEffect();

    buffImage = ie.GrayscaleEffect(buffImage);
    Icon icon = new ImageIcon(buffImage);
    lblImage.setIcon(icon);
    statusBar.setText("Image is now Grayscaled");
  }
} 
```

UNDO方法：

```
if (e.getSource() == undoimageitem) {
  BufferedImage temp = (BufferedImage) Imagesteps.pop();
  Icon icon = new ImageIcon(temp);
  lblImage.setIcon(icon);
  statusBar.setText("Undo");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:26:36.647

从您得到的异常来看，您似乎正在尝试从空堆栈中弹出。为避免此错误，理想情况下，您应该在弹出之前确保堆栈的大小至少大于或等于 1。

至于为什么会出现异常，原因可能很多。想到的两个是：

*   您正在代码中的某个点在推送项目和从堆栈中弹出它们之间重新初始化/清除堆栈。

*   Assuming that, like most buttons, the method is activated by one click, you are double clicking the button, thus causing the event to fire twice, which could lead into the code performing two pop operations which is causing the issue.

# java-me - 如何在j2me中根据频率对搜索字典结果进行排序

> ID：10414368
> 
> 赞同：2
> 
> 时间：2012-05-02T13:05:42.003
> 
> 标签：java-me, dictionary, midp, prediction, n-gram

这是我的字典格式：

> 词频
> 
> 走了60
> 
> 去 10
> 
> 去 30

到目前为止，系统会返回单词，例如以“g”开头的 go30、gos10、goone60 作为列表。（按字母顺序）。我想提高系统的准确性，以便搜索结果基于频率。高频词首先出现。请帮助。

这是逐行读取字典的 Text midlet 类。

```
 public class Text extends MIDlet {
     // Fields 

private static final String[] DEFAULT_KEY_CODES = {
    // 1
    ".,?!'\"1-()@/:_",
    // 2
    "ABC2",
    // 3
    "DEF3",
    // 4
    "GHI4",
    // 5
    "JKL5",
    // 6
    "MNO6",
    // 7
    "PQRS7",
    // 8
    "TUV8",
    // 9
    "WXYZ9",
};

//Initializing inner Classes
public ComposeText() {
    cmdHandler = new CommandHandler();
    lineVector = new Vector();
}

//Calling All InitMethods, setting Theme, Show MainForm
public void startApp() {
    Display.init(this);
    setTheme();
    initCmd();
    initMainGui();
    mainFrm.show();
}

public void pauseApp() {
}

public void destroyApp(boolean unconditional) {
}

//Initializing all the Commands
public void initCmd() {
    exitCmd = new Command("Exit");
    selectCmd = new Command("Ok");
    cancelCmd = new Command("Cancel");
    predCmd = new Command("Prediction");
    sendCmd = new Command("Send");

    tfPredArea = new TextField();

         //check dictionary
    try {
            readFile();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
}

//Initiating MainScreen
public void initMainGui() {
    mainFrm = new Form("Compose Text");
    mainFrm.setLayout(new BorderLayout());
    mainFrm.setLayout(new CoordinateLayout(150, 150));
    mainFrm.addCommand(exitCmd);
    mainFrm.addCommand(predCmd);
    mainFrm.addCommand(sendCmd);
    mainFrm.addCommandListener(new ActionListener() {

        public void actionPerformed(ActionEvent ae) {
            if(ae.getSource() == predCmd){
                            initPredGui();
            } else if(ae.getSource() == exitCmd){
            destroyApp(true);
            notifyDestroyed();
            }
        }
    });
    // To : 07xxxxxxxxxx
    Dimension d1 = new Dimension(130, 20);
    lbTo = new Label("To:");
    lbTo.setX(10);
    lbTo.setY(10);
    tfTo = new TextField();
    tfTo.setReplaceMenu(false);
    tfTo.setConstraint(TextField.NUMERIC);
    tfTo.setInputModeOrder(new String[]{"123"});
    tfTo.setMaxSize(13);
    tfTo.setX(40);
    tfTo.setY(10);
    tfTo.setPreferredSize(d1);

    //Message : Compose Text
    Dimension d2 = new Dimension(135, 135);
    lbSms = new Label("Message:");
    lbSms.setX(5);
    lbSms.setY(40);
    tfSms = new TextField();
    tfSms.setReplaceMenu(false);
    tfSms.setX(40);
    tfSms.setY(40);
    tfSms.setPreferredSize(d2);

    //add stuff
    mainFrm.addComponent(lbTo);
    mainFrm.addComponent(lbSms);
    mainFrm.addComponent(tfTo);
    mainFrm.addComponent(tfSms);
  }
  //Initiating FilterSelection Screen
  public void initPredGui() {
    predForm = new Form("Prediction on");           
    predForm.setLayout(new CoordinateLayout(150, 150));
    predForm.addCommand(cancelCmd);
    predForm.addCommand(selectCmd);

    //textfied in prediction form
    final Dimension d5 = new Dimension(200, 200);
    tfPredArea = new TextField();
    tfPredArea.setReplaceMenu(false);
    tfPredArea.setX(10);
    tfPredArea.setY(10);
    tfPredArea.setPreferredSize(d5);

    predForm.addComponent(tfPredArea);

    final ListModel underlyingModel = new DefaultListModel(lineVector);
  //        final ListModel underlyingModel = new           

  DefaultListModel(tree.getAllPrefixMatches(avail));

  // this is a list model that can narrow down the underlying model
    final SortListModel proxyModel = new SortListModel(underlyingModel);

    final List suggestion = new List(proxyModel);

    tfPredArea.addDataChangeListener(new DataChangedListener() {

        public void dataChanged(int type, int index) {

            int len = 0;
            int i = 0;
            String input = tfPredArea.getText();
            len = tfPredArea.getText().length();

            //ensure start search character is set for each word 
            if (!(len == 0)) {
                for (i = 0; i < len; i++) {
                    if (input.charAt(i) == ' ') {
                        k = i;
                    }     
                }
                String currentInput = input.substring(k + 1, len);
                proxyModel.filter(currentInput);

            }
        }
        });

        Dimension d3 = new Dimension(110, 120);
        suggestion.setX(80);
        suggestion.setY(80);
        suggestion.setPreferredSize(d3);

        predForm.addComponent(suggestion);

        suggestion.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                    String string = suggestion.getSelectedItem().toString();
                if (tfPredArea.getText().charAt(0) == 0) {
                    tfPredArea.setText(string);
                }
               else if (tfPredArea.getText().length() == 0) {
                    tfPredArea.setText(string);
                } else {
                    tfPredArea.setText(tfPredArea.getText() + string);
                }

            }
    });
        predForm.addCommandListener(new ActionListener() {

        public void actionPerformed(ActionEvent ae) {
            if (ae.getSource() == addCmd) {
                newDictionaryFrm.show();
            } else {
                mainFrm.show();
            }
        }
    });
         predForm.show();
   }

  //Setting Theme for All Forms
   public void setTheme() {
    try {
        Resources r = Resources.open("/theme.res");
        UIManager.getInstance().setThemeProps(r.getTheme(
                r.getThemeResourceNames()[0]));
    } catch (java.io.IOException e) {
        System.err.println("Couldn't load the theme");
    }
  }

  //Inner class CommandHandler
  public class CommandHandler implements ActionListener {

    public void actionPerformed(ActionEvent ae) {
        //cancelCommand from predictionForm
        if (ae.getSource() == cancelCmd) {
            if (edit) {
                mainFrm.show();
    //                    clearFields();
            } else if (ae.getSource() == selectCmd){
                tfPredList.addDataChangeListener(model);
                predForm.show();
            }
            else{}
        }
    }
 }

 // method that reads dictionary line by line
 public void readFile() throws IOException {
    tree = new Trie();
    InputStreamReader reader = new InputStreamReader(
            getClass().getResourceAsStream("/Maa Corpus.txt-01-ngrams-Alpha.txt"));
    String line = null;
    // Read a single line from the file. null represents the EOF.
    while ((line = readLine(reader)) != null) {
        // Append to a vector to be used as a list
        lineVector.addElement(line);
    }
  }

  public String readLine(InputStreamReader reader) throws IOException {
    // Test whether the end of file has been reached. If so, return null.
    int readChar = reader.read();
    if (readChar == -1) {
        return null;
    }
    StringBuffer string = new StringBuffer("");
    // Read until end of file or new line

    while (readChar != -1 && readChar != '\n') {
        // Append the read character to the string.
        // This is part of the newline character
        if (readChar != '\r') {
            string.append((char) readChar);
        }
        // Read the next character
        readChar = reader.read();
    }
    return string.toString();
 }
 }
} 
```

SortListModel 类具有从文本字段 datachangeLister 获取前缀的过滤器方法

```
 class SortListModel implements ListModel, DataChangedListener {
   private ListModel underlying;
   private Vector filter;
   private Vector listeners = new Vector();
   public SortListModel(ListModel underlying) {
   this.underlying = underlying;
   underlying.addDataChangedListener(this);
  }

  private int getFilterOffset(int index) {
   if(filter == null) {
       return index;
   }
   if(filter.size() > index) {
       return ((Integer)filter.elementAt(index)).intValue();
   }
   return -1;
  }

 private int getUnderlyingOffset(int index) {
   if(filter == null) {
       return index;
   }
   return filter.indexOf(new Integer(index));
  }

   public void filter(String str) {
   filter = new Vector();
   str = str.toUpperCase();
   for(int iter = 0 ; iter < underlying.getSize() ; iter++) {
       String element = (String)underlying.getItemAt(iter);
       if(element.toUpperCase().startsWith(str)) // suggest only if smthing
       {
           filter.addElement(new Integer(iter));
       }
   }
   dataChanged(DataChangedListener.CHANGED, -1);
   }

  public Object getItemAt(int index) {
   return underlying.getItemAt(getFilterOffset(index));
  }

  public int getSize() {
    if(filter == null) {
       return underlying.getSize();
   }
   return filter.size();
 }

 public int getSelectedIndex() {
   return Math.max(0, getUnderlyingOffset(underlying.getSelectedIndex()));
  }

 public void setSelectedIndex(int index) {
   underlying.setSelectedIndex(getFilterOffset(index));
 }

 public void addDataChangedListener(DataChangedListener l) {
   listeners.addElement(l);
 }

 public void removeDataChangedListener(DataChangedListener l) {
   listeners.removeElement(l);
}

  public void addSelectionListener(SelectionListener l) {
    underlying.addSelectionListener(l);
  }

  public void removeSelectionListener(SelectionListener l) {
   underlying.removeSelectionListener(l);
 }

 public void addItem(Object item) {
   underlying.addItem(item);
 }

 public void removeItem(int index) {
    underlying.removeItem(index);
  }

  public void dataChanged(int type, int index) {
   if(index > -1) {
       index = getUnderlyingOffset(index);
       if(index < 0) {
           return;
       }
    }
    for(int iter = 0 ; iter < listeners.size() ; iter++) {

       ((DataChangedListener)listeners.elementAt(iter)).dataChanged(type, index);
    }
     }
  } 
```

# android - 使用安卓手机作为服务器

> ID：10414370
> 
> 赞同：1
> 
> 时间：2012-05-02T13:05:56.127
> 
> 标签：android, multiplayer

我正在开发一个基于回合的两人安卓游戏。是否可以使用用户的手机作为服务器而不是外部服务器来协调游戏？我不需要太多的数据存储。游戏进行时，仅存储和传输 40 个字段（文本或数字）（对于传输，一次一个值）。游戏结束后，只存储用户当前的分数。我想做任何这样的事情我都需要获得手机的 ip。可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:36:19.447

您需要的不仅仅是 IP，因为 IP 只是 Internet 上的一个端点，如果您与该 IP 通话，无法保证是您的设备做出响应。该 IP 后面通常有一个本地网络，您无法仅使用公共 IP 访问其中的设备。

有问题的部分是建立直接连接（通常）在 Internet 上是不可能的，除非您可以控制 Internet 连接（路由器等）并且可以设置端口转发/防火墙规则/阻止直接连接的任何内容。如果您没有访问权限 - 例如因为您使用 3G，其中“路由器”位于您的提供商的数据中心 - 您将至少需要一台服务器来执行诸如[打孔](http://www.h-online.com/security/features/How-Skype-Co-get-round-firewalls-747197.html)之类的操作。

用于查找其他游戏（和 IP）的服务器也是一个好主意。

但是，如果两个设备都在同一个 WiFi 上并且它们可以直接看到对方，您就可以做到所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:27:26.237

我来自斯基勒，我认为我们有你所需要的。@zapl 是对的，如果您希望您的玩家使用 3G 或 WIFI 连接到您的游戏，最好的解决方案是中间服务器，它可以让玩家之间交换数据。设置、托管和扩展这样的服务器可能是非常昂贵和耗时的事情。我们提供免费的 SDK 工具，您可以使用这些工具立即设置您的回合制两人游戏。我们正在处理所有服务器端维护，因此您只需实现游戏逻辑并尽快将您的游戏推向市场。

[从www.skiller-games.com](http://www.skiller-games.com)下载 SDK并告诉我您的想法。如果您有任何问题，请在此处写信给我们或发送至 developers@skiller-games.com

# jsf - javax.ejb.NoSuchEJBException：找不到有状态 bean

> ID：10414376
> 
> 赞同：0
> 
> 时间：2012-05-02T13:06:15.360
> 
> 标签：jsf, jakarta-ee, ejb, seam

我在我的应用程序中收到以下错误：

```
2012-04-27 12:29:07,623 4540114 DEBUG [org.jboss.seam.jsf.SeamPhaseListener] (http-localhost%2F127.0.0.1-8080-3:) committing transaction after phase: INVOKE_APPLICATION 5
2012-04-27 12:29:07,623 4540114 DEBUG [org.jboss.seam.transaction.UTTransaction] (http-localhost%2F127.0.0.1-8080-3:) committing JTA transaction
2012-04-27 12:29:07,624 4540115 ERROR [org.jboss.aspects.tx.TxPolicy] (http-localhost%2F127.0.0.1-8080-3:) javax.ejb.NoSuchEJBException: Could not find stateful bean: a2d6v-rpg5ad-h1j0xu2n-1-h1j3g9no-cb
2012-04-27 12:29:07,624 4540115 WARN  [org.jboss.seam.jsf.SeamPhaseListener] (http-localhost%2F127.0.0.1-8080-3:) uncaught exception, passing to exception handler
java.lang.IllegalStateException: Could not commit transaction
    at org.jboss.seam.jsf.SeamPhaseListener.commitOrRollback(SeamPhaseListener.java:625) 
```

在调试时，我在应用程序部分成功，当涉及到页面重定向时，会发生此错误。

有人可以给我一些关于哪里可能出错的指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:16:00.177

我刚刚遇到了类似的问题，这完全与 bean 本身的超时有关。

您可以使用注释在有状态 bean 本身上设置超时

```
@CacheConfig (maxSize=100000, idleTimeoutSeconds=300, removalTimeoutSeconds=0) 
```

或者通过将 JBOSS_HOME\server\default\conf\standardjboss.xml 设置为：

```
<container-configuration>
      <container-name>Standard Stateful SessionBean</container-name>
      ...
      <container-cache-conf>
        ...
        <cache-policy-conf>              
          <remover-period>0</remover-period>
          <max-bean-life>900</max-bean-life> 
```

给出的参数是秒。
我个人更改了standardjboss.xml 以使其全球化。我将卸妆周期设为 0，以便将其设置为无穷大。如果它小于最大 bean 寿命，那么它的状态将被删除，如果 bean 没有被触及，你将得到 javax.ejb.NoSuchEJBException。同样值得检查的是，您实际上需要一个有状态的 bean。

[https://community.jboss.org/wiki/howdothetimeoutsworkwithejb3statefulbeans](https://community.jboss.org/wiki/howdothetimeoutsworkwithejb3statefulbeans)

[https://community.jboss.org/wiki/JbossTimeoutSettingForSeam](https://community.jboss.org/wiki/JbossTimeoutSettingForSeam)

[http://docs.jboss.org/seam/2.2.2.Final/reference/en-US/html_single/#d0e25223](http://docs.jboss.org/seam/2.2.2.Final/reference/en-US/html_single/#d0e25223)

# c# - 将 Datagridview 组合框单元格绑定到 DB / EF 中的 Int 列

> ID：10414380
> 
> 赞同：1
> 
> 时间：2012-05-02T13:06:31.690
> 
> 标签：c#, entity-framework, data-binding, datagridview, combobox

每次我尝试将一个组合框单元格列绑定到我的实体上的一个整数字段时，它都会在每一行上抛出 DataErrors。

我认为这是因为它仅用于`string`下拉菜单，或者至少来自 UI 设计器，因为集合属性允许输入`string`值。

如何让它绑定到整数列表？

我的实体中还有一个 int 值`Qty`。可能是 5。当显示一行以将 1、2、3、4、5 放入集合中并选择了 5 时，如何获取组合框单元格？

错误 ： ![在此处输入图像描述](../Images/b66136f771c34c164828c0dc35888c68.png)

# c# - 如何在第二台显示器上显示 SplashScreen？

> ID：10414387
> 
> 赞同：2
> 
> 时间：2012-05-02T13:06:56.777
> 
> 标签：c#, .net, wpf

如何在第二台显示器上显示 SplashScreen？现在它只显示在主监视器上，但应用程序在辅助监视器上启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:14:06.477

您可以将“Screen”类与初始屏幕的 WindowStartupLocation 属性一起使用（我假设您为此使用了 Window）。

像：

```
Window someWindow = new SomeWindow();
someWindow.WindowStartupLocation = WindowStartupLocation.Manual;
someWindow.Left = Screen.AllScreens[1].Bounds.Left;
someWindow.Top = Screen.AllScreens[1].Bounds.Top; 
```

如果需要，您当然可以自己居中。取屏幕高度和窗口高度并计算中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:18:45.620

没有属性可以控制标准 WPF 初始屏幕的显示位置。

如果您需要更改默认行为，您需要自己实现。 [这里有一个例子](http://blogs.msdn.com/b/jgoldb/archive/2007/12/10/splash-screen-to-improve-wpf-application-perceived-cold-startup-performance.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:13:05.980

查看 System.Windows.Forms.Screen 类。您可以使用`Screen.GetWorkingArea()`获取当前显示，然后基于此设置启动屏幕的位置。 `Screen.FromControl()`也`Screen.AllScreens`可能有用。

# c# - 如何让设计者序列化 WinForms 中的对象集合？

> ID：10414388
> 
> 赞同：6
> 
> 时间：2012-05-02T13:06:56.937
> 
> 标签：c#, winforms, serialization, windows-forms-designer

我有一堂课：

```
public class Filter
{
    public Filter (string name, string value)
    {
        Name = name;
        Value = value;
    }

    public string Name {get; private set;}
    public string Value {get; set;}
} 
```

还有一个集合类：

```
public class FilterCollection : Collection<Filter>
{
   // code elided
} 
```

我的组件类：

```
public class MyComponent : Component
{
    // ...

    [Editor(typeof(FilterEditor), typeof(UITypeEditor))]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    public FilterCollection Filters { get; set; }

    // ...
} 
```

问题是设计者没有*正确序列化集合。*

我确定我错过了一些东西，但我不知道是什么。

## 附加信息

我希望 Designer.cs 文件具有以下内容：

```
myComponent.Filters.Add (new Filter ("some name", "some value"));
myComponent.Filters.Add (new Filter ("other name", "other value")); 
```

这可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:35:24.787

好的，问题解决了。

我需要为我的*Filter*类使用*TypeConverter ：*

 *```
internal class FilterConverter : TypeConverter
{
    public override bool CanConvertTo (ITypeDescriptorContext context, Type destinationType)
    {
        return destinationType == typeof(InstanceDescriptor) || base.CanConvertTo (context, destinationType);
    }

    public override object ConvertTo (ITypeDescriptorContext context, CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(InstanceDescriptor) && value is Filter)
        {
            ConstructorInfo constructor = typeof (Filter).GetConstructor (new[] {typeof (string), typeof (string)});

            var filter = value as Filter;
            var descriptor = new InstanceDescriptor (constructor, new[] {filter.Name, filter.Value}, true);

            return descriptor;
        }
        return base.ConvertTo (context, culture, value, destinationType);
    }
} 
```

然后将转换器添加到*Filter*类中，如下所示：

```
[TypeConverter(typeof(FilterConverter))]
public class Filter
{
    // ...
} 
```

*这里要注意的重要一点是使用Filter*构造函数所需的参数创建实例描述符。此外，您需要将*InstanceDescriptor*构造函数的最后一个参数 ( *isComplete* )设置为**true**。*

# javascript - 插入重复 HTML 块的最佳方法是什么？

> ID：10414389
> 
> 赞同：1
> 
> 时间：2012-05-02T13:06:59.490
> 
> 标签：javascript, jquery

我有一个动态创建的列表，但每个元素都是一个相当大的 HTML 块，具有通用结构和一些变量。
用 jQuery 做这件事的最好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:11:47.073

在客户端处理大量 HTML 的一种方法是使用模板系统。如果你想让它以 jQuery 为中心[，那么 jQuery 模板](http://api.jquery.com/jquery.tmpl/)是一种选择，但我相信它已经停止使用。

我在[Underscore 模板](http://documentcloud.github.com/underscore/#template)方面取得了很大的成功，它们快速且易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:22:27.577

我将回应 CambridgeMike 和 Simon Smith 所说的“使用模板库”，除了我会插入一个不同的并且我认为更好的一个。使用[Handlebars.js](http://handlebarsjs.com/)。它与 Ember.js 选择的相同，它非常适合独立使用，并且与 Backbone.js 搭配得很好。

这是您可以长时间使用的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:10:11.483

不确定这对您来说是否过分，但也许可以查看模板库。

[https://github.com/janl/mustache.js](https://github.com/janl/mustache.js)真的很好听（个人没用过）。

我使用了[Underscore.js中的那个](http://documentcloud.github.com/underscore/#template)

后者看起来像这样..

```
var myTemplate = _.template("<div>This is my reusable block with {{ count }} variables");

$.each([1,2,3,4], function(elm, i){
  $('body').append(myTemplate ({count: elm}));
}) 
```

这是一个 jsfiddle 示例[http://jsfiddle.net/K8VHb/](http://jsfiddle.net/K8VHb/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:26:03.687

利用数组的连接方法（将元素连接成字符串）是我最喜欢的方法。将它与 JQ 一起使用，我从来没有真正理解 JS 模板库的吸引力。它还可以方便地将 HTML 格式化为易于阅读的样式，而无需在 JavaScript 中使用换行符。我没有对此进行测试，因此可能存在语法错误。

```
var standardList = [
    '<li>Always here</li><!--could add a bunch more non-variable LIs here-->',
    '<li>',
    , //this is key #2 - one comma per line at the end makes counting easy
    '</li>',
    '<li>More non-variable LIs</li><!--possibly more non-variable LIs here-->',
    '<li>',
    , //this is key #6
    '</li>'
];

//you could have lots of these or an array of them dropped in from a server
var variableListItems = {
    key_2:'first Var list value',
    key_6:'second variable list value'
};

function buildFromListTemplate(valuesObj,listTemplate){
    for(var x in valuesObj){
        listTemplate[x.split('_')[1]] = valuesObj[x];

        //x.split('_') returns array ['key',<number>] for each key in object
        //so [1] gives array key
    }
    return listArray.join(''); //smooshes array into one big string
}

$('#someExistingUL').html(
    buildFromListTemplate(variableListItems, standardList)
); 
```

注意：一个强大但简单的升级是在 buildFromListTemplate 函数中处理值的 LI 包装。这样，您放入 values 对象中的键都是可选的，并且在未提供时不会留下空白 LI。

在格式化大块 HTML 时，split/join 是您的朋友，并且通常具有强大的实用程序。另一个方便的用途是从现有的一组值构建列表或表格行：

```
var ulHtmlString = [
'<ul><li>',
    arrayOfValues.join('</li><li>'),
'</li></ul>'
].join('') 
```

您也可以在此基础上将二维数组自动转换为表格。学习一些正则表达式（可以用来代替 split 方法中的字符串），在 HTML 不统一的情况下，您可以轻松地从 HTML 转换回纯数据数组和对象。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T13:20:59.947

我会使用[jQuery 模板](http://api.jquery.com/category/plugins/templates/)。

使用 jquery 模板由两部分组成：

您的模板（通常是 HTML）：

```
<script id="myTemplate" type="text/x-jquery-tmpl">
    <div>${text} ${otherStuff}</div>
</script> 
```

和您的数据（通常是 JSON 或 javascript 对象）：

```
var data = { text: 'hello world!', otherStuff: 'foobar' }; 
```

然后你只需将数据绑定到模板

```
var resultingHTML = $('#myTemplate').tmpl(data); 
```

然后将生成的 HTML 附加到您的 DOM：

```
$('#someContainer').append(resultingHTML); 
```

jQuery 模板为您的模板中的条件/循环提供了很大的灵活性，例如 {{if}} 和 {{each}}，并且 JSON 是一种非常易于使用的数据传输语言。

# linux - Shell shift 程序 - 这是什么？

> ID：10414391
> 
> 赞同：19
> 
> 时间：2012-05-02T13:07:07.640
> 
> 标签：linux, shell, shift

在 shell 中，我们有命令 shift，但我在一些例子中看到它给出 shift 3

为什么班次后有数字？它是关于什么的？它能做什么 ？

例子：

```
echo “arg1= $1  arg2=$2 arg3=$3”
shift
echo “arg1= $1  arg2=$2 arg3=$3”
shift   
echo “arg1= $1  arg2=$2 arg3=$3”
shift  
echo “arg1= $1  arg2=$2 arg3=$3”
shift 
```

输出将是：

```
arg1= 1 arg2=2  arg3=3 
arg1= 2 arg2=3  arg3= 
arg1= 3 arg2=   arg3=
arg1=   arg2=   arg3= 
```

但是当我添加它时，它无法正确显示。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-02T13:11:02.353

看一下[手册](http://linux.die.net/man/1/bash)页，上面写着：

```
shift [n]
    The  positional parameters from n+1 ... are renamed to $1 .... 
    If n is not given, it is assumed to be 1. 
```

示例脚本：

```
#!/bin/bash
echo "Input: $@"
shift 3
echo "After shift: $@" 
```

运行：

```
$ myscript.sh one two three four five six

Input: one two three four five six
After shift: four five six 
```

这表明在移位 3 后`$1=four`，`$2=five`和`$3=six`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:13:33.860

您`man bash`用来查找`shift`内置命令：

> 班次 [n]
> 
> 从 n+1 ... 开始的位置参数被重命名为 $1 ...。由数字 $# 到 $#-n+1 表示的参数未设置。n 必须是小于或等于 $# 的非负数。如果 n 为 0，则不更改任何参数。如果 n 未给出，则假定为 1。如果 n 大于 $#，则位置参数不变。如果 n 大于 $# 或小于零，则返回状态大于零；否则为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:11:09.890

只需阅读[Bash 手册](http://www.gnu.org/software/bash/manual/bashref.html#index-shift-121)或键入以下内容即可回答此问题`man shift`：

> ```
>  shift [n] 
> ```
> 
> 将位置参数向左移动 n。n+1 ... $# 中的位置参数重命名为 $1 ... $#-n。由数字 $# 到 $#-n+1 表示的参数未设置。n 必须是小于或等于 $# 的非负数。如果 n 为零或大于 $#，则位置参数不会更改。如果未提供 n，则假定为 1。除非 n 大于 $# 或小于零，否则返回状态为零，否则为非零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T04:14:22.067

将位置参数向左移动 n。n+1 ... $# 中的位置参数重命名为 $1 ... $#-n。由数字 $# 到 $#-n+1 表示的参数未设置。n 必须是小于或等于 $# 的非负数。如果 n 为零或大于 $#，则位置参数不会更改。如果未提供 n，则假定为 1。除非 n 大于 $# 或小于零，否则返回状态为零，否则为非零。

1.  项目清单

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-11T15:20:45.697

`shift`将命令行参数视为 FIFO 队列，每次调用时都会弹出元素。

```
array = [a, b, c]
shift equivalent to
array.popleft
[b, c]
$1, $2,$3 can be interpreted as index of the array. 
```

[bash - 与重新分配值相比，移位的优势很简单 - 代码日志](https://stackoverflow.com/questions/49777598/the-advantage-of-shift-over-reassign-value-straightforward)

# java - 如何在 openlaszlo 的 LzBrowser.loadURL 中的查询字符串中提供两个值

> ID：10414393
> 
> 赞同：1
> 
> 时间：2012-05-02T13:07:12.013
> 
> 标签：java, openlaszlo

如何在 openlaszlo 中使用 LzBrowser.loadURL() 在查询字符串中传递两个值。

我的示例代码：

```
LzBrowser.loadURL("../modules/Index.jsp?base="+ canvas.base +" id=" + canvas.Id,"fraMain"); 
```

我收到数字格式异常：

java.lang.NumberFormatException：对于输入字符串：“1 base=1”]

请帮助解决这个问题。

谢谢，

拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:38:37.240

您应该在两个查询参数之间添加 & 。你应该这样写

```
LzBrowser.loadURL("../modules/Index.jsp?base="+ canvas.base +"&id=" + canvas.Id,"fraMain"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:34:35.280

我们必须提供& 代替 ＆。它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T08:50:19.473

数字格式异常意味着，在您的代码中的某个时刻，浏览器会尝试将字符串解析为数字。您使用的是哪个版本的 OpenLaszlo，以及哪个运行时？

基于 LzBrowser 的使用（从 OpenLaszlo 4.1 开始，您必须使用 lz.Browser），您似乎使用的是 OpenLaszlo 的 3.x 或 4.0 版本。

如果您想在包含 JavaScript 代码的方法中使用与符号“&”，则适用 XML 实体规则（以 & 开头的所有内容都将被视为 XML 实体）。在您的方法中添加部分将使您可以像在普通 JavaScript 或 ActionScript 代码中那样使用 &，例如

```
<canvas debug="true">

  <button text="Open URL" onclick="canvas.loadUrl()" />

  <attribute name="base" type="number" value="99" />

  <attribute name="iD" type="number" value="10" />

  <method name="loadUrl"><![CDATA[
    lz.Browser.loadURL("http://www.google.com?base=" + canvas.base + "&iD=" + canvas.iD, "_blank");
  ]]></method>

</canvas> 
```

如果没有 CDATA 部分，将引发以下编译器错误：

> loadurl.lzx:10:71：对实体“iD”的引用必须以“;”结尾 分隔符。在源代码中查找错位或未转义的 & 字符。

所描述的使用“&”而不是“&”并且没有 CDATA 部分的解决方法当然是一个有效的选项 - 尽管它降低了我眼中的 JavaScript 代码的可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T19:34:09.830

实际上有两种方法可以做到这一点，以下都是正确的：

1) 通过用 <![CDATA[ 和 ]]> 标签包围内部代码来转义特殊的 HTML 字符（在本例中为 &）：

```
<method name="loadUrl">
<![CDATA[
    lz.Browser.loadURL("http://www.google.com?base=" + canvas.base + "&iD=" + canvas.iD, "_blank");
]]>
</method> 
```

2) HTML-entity 将 & 字符编码为 &

```
<method name="loadUrl">
    lz.Browser.loadURL("http://www.google.com?base=" + canvas.base + "&amp;iD=" + canvas.iD, "_blank");
</method> 
```

您选择哪种方法取决于您自己的喜好。

# iphone - 在运行的应用程序中以编程方式更改 iPhone 的 NSLocale/Language

> ID：10414398
> 
> 赞同：2
> 
> 时间：2012-05-02T13:07:28.850
> 
> 标签：iphone, nsuserdefaults, nslocalizedstring, nslocale

我有一个问题。我创建了一个视图，用户可以在其中选择英语、荷兰语和西班牙语的应用语言。然后下一个视图中的 UILabel 的文本应该根据选择的语言。

**我使用以下代码设置当前语言：**

```
 NSLog(@"%@", NSLocalizedString(@"Loading... Please wait...", nil));

 int index = 2;
 NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
 NSArray* languages = [userDefaults objectForKey:@"AppleLanguages"];

 switch (index) 
 {
    case 0:
        languages = [NSArray arrayWithObjects:@"en",@"de",@"es", nil];
        break;

    case 1:
        languages = [NSArray arrayWithObjects:@"de",@"en",@"es", nil];
        break;

    case 2:
        languages = [NSArray arrayWithObjects:@"es", @"en", @"de", nil];
        break;

  }
   [[NSUserDefaults standardUserDefaults] setObject:languages forKey:@"AppleLanguages"];
   [[NSUserDefaults standardUserDefaults] synchronize];     

   NSLog(@"%@", NSLocalizedString(@"Loading... Please wait...", nil)); 
```

** 在 Localizable.strings 中（西班牙语）：**“正在加载……请稍候……”=“正在加载……西班牙语”；

** 在 Localizable.strings（德语）中：**“正在加载...请稍候...”=“正在加载...德语”；

**我使用以下代码在下一个视图中获取当前语言：**

```
 NSUserDefaults* defs = [NSUserDefaults standardUserDefaults];
 NSArray* languages = [defs objectForKey:@"AppleLanguages"];
 NSString* preferredLang = [languages objectAtIndex:0];
 NSLog(@"preferredLang: %@", preferredLang);

 NSLog(@"%@", NSLocalizedString(@"Loading... Please wait...", nil)); 
```

**但它会在控制台中打印“Loading... Please wait...”。它应该打印“Loading... in German”。**

**是不是哪里出错了？？我可以在应用程序运行时更改应用程序的语言吗？**

# php - MongoDB：用两个查询查询多个集合？

> ID：10414402
> 
> 赞同：3
> 
> 时间：2012-05-02T13:07:46.060
> 
> 标签：php, json, mongodb, collections, mongodb-query

我有两个收藏**帖子**和**作者**。除了帖子数据之外，帖子文档还包含指向作者**_id的****DBref 链接**ID 。我的收藏看起来像这样：

 ****帖子**

```
 "_id" : ObjectId("4fa12443d3269e98070013b4"),
  "author" : {
    "$ref" : "authors",
    "$id" : ObjectId("4fa1242bd3269e9807000023")
  },
  "post" : " mi eleifend egestas. Sed pharetra, felis eget varius ultrices, mauris ipsum porta elit, a feugiat tellus lorem eu metus. In lorem.",
  "post_title" : "Volutpat. Nulla facilisis. Suspendisse commodo tincidunt nibh. Phasellus nulla. Integer",
  "date" : 1293803276,
  "rating" : 8,
  "comments" : [{
      "name" : "Doris Turner",
      "email" : "Hedda_Herman@.com",
      "upVotes" : 81,
      "downVotes" : 93,
      "comment_date" : 1111395830,
      "comment" : "consectetuer ipsum nunc id enim. Curabitur massa. Vestibulum accumsan neque et nunc. Quisque ornare tortor at"
    }, {
      "name" : "Brenda Tyler",
      "upVotes" : 1,
      "downVotes" : 73,
      "comment_date" : 940325674,
      "comment" : "cursus purus. Nullam scelerisque neque sed sem egestas blandit. Nam Nulla aliquet. Proin velit. Sed malesuada augue ut lacus. Nulla tincidunt, neque vitae semper egestas, urna justo faucibus lectus, a sollicitudin orci sem eget massa."}],
  "tags" : ["tag1", "tag3"]
} 
```

我的作者收藏看起来像这样：

**作者**

```
{
  "_id" : ObjectId("4fa1242bd3269e9807000016"),
  "name" : "Kristina Chung ",
  "email" : "curran_ramos@google.co.id\r\n.dk",
  "age" : 60,
  "city" : "Copenhagen"
} 
```

我正在尝试创建一个“关系”查询来查找：评分大于 6 且小于 9 且帖子作者年龄大于 19 且小于 25 的帖子。

我正在尝试汇总此数据，但似乎无法获得正确的数据。

第一个查询在我的帖子集合中，如下所示：

```
$query = array('rating' => array('$gte' => 6, '$lt' => 9), 'comments.upVotes' => array('$gt' => 2, '$lt' => 20)); 
```

我选择了 author.$id 字段，它是对作者集合的引用。

然后我将所有 $id 放在一个数组中，如下所示：

```
while ($cursor->hasNext()): $document = $cursor->getNext();
    $authorID[] = $document['_id'];
endwhile; 
```

然后我尝试在**作者集合中使用此查询找到正确的数字**

```
$query2 = array('age' => array('$gte' => 19, '$lt' =>100), '_id' => array('$in' => $authorID));
$cursor = q('author')->find($query2); 
```

我尝试使用以下代码获取总数： $count = $cursor->count(); 但无论我尝试运行什么查询，我总是得到结果**0**。

我做错了什么，是否有可能创建这种查询，还是我必须在应用程序级别而不是数据库级别进行？

而且我很了解嵌入式文档，但我希望将这两个集合分开而不是嵌入它。

希望任何人都可以帮助我。

真诚
- Mestika

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T18:31:26.150

尝试在 MongoDB 中“创建一个“关系”查询”将是一个令人沮丧的练习。您的架构将一些信息（帖子的评分）存储在一个集合中，将其他信息（作者的年龄）存储在不同的集合中，但所有 MongoDB 查询都在单个集合上运行。除非您对数据进行非规范化（您说您不想这样做），否则您将需要一个两遍方法来完成这项工作。

一种可行的方法是构建一个作者 ID 数组，并使用“$in”在帖子集合的查询中使用它。这是使用 mongo shell 在 JavaScript 中的样子：

```
> var authorList = [];
> var authorCursor = db.authors.find({age:{$gt:19,$lt:25}},{"_id":1});
> while(authorCursor.hasNext()){authorList.push(authorCursor.next()["_id"])};
> db.posts.find({"author.$id":{$in:authorList},rating:{$gt:6,$lt:9}}); 
```

第一行创建一个空数组。第二行创建一个光标，它将选择`_id`目标年龄范围内所有作者的字段。第三行使用光标填充 author 的数组`_id`。第四行显示所有符合您的目标条件的帖子：`_id`我们刚刚建立的列表中的作者和您指定的范围内的评分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-19T02:06:14.003

我不知道，但有时游标方法似乎丢失了一些元素，所以我更喜欢使用 toArray()：

```
u = db.authors.find({"isActive":false}).toArray()
idlist = []
u.forEach(function(myDoc) { idlist.push(myDoc.ID ); } )
db.posts.find({"AuthorID": {$in : idlist} } )

u = db.authors.find({"isActive":false})
idlist2 = []
while (u.hasNext()) {idlist2.push(u.next()["ID"])};
idlist.forEach(function(myDoc) { 
   if ( idlist2.indexOf(myDoc) == -1 ) 
       {print (myDoc)} 
}) 
```

打印 20 个元素！**

# iphone - Objective c MailCore 消息体

> ID：10414403
> 
> 赞同：0
> 
> 时间：2012-05-02T13:07:46.983
> 
> 标签：iphone, objective-c, c, mailcore

我正在尝试使用 MailCore 获取邮件的正文，但它始终是空的。我的代码是

```
 CTCore *folder = [[CTCorefolder alloc] initWithPath:@"INBOX" inAccount:account];
for( CTCoreMessage *msg in [folder messageObjectsFromIndex : 0 toIndex:10] ){
   if([msg.subject isEqualToString:@"test")]){
         // no pb here, it find the good Mail
         NSLog(@"Message Body length : %d", msg.body.length);
         // here the length is 0 and the body is : ""
  }
} 
```

还有其他获取正文的方法，例如“msg.HtmlBody”，但它也是空的。但是在Firefox上我可以看到不是空的身体。我应该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:11:50.737

您必须调用`fetchBody`每条消息才能从服务器检索它。

# php - 文件上传 HTML5 的问题

> ID：10414404
> 
> 赞同：0
> 
> 时间：2012-05-02T13:07:50.210
> 
> 标签：php, html, file, file-upload, upload

我正在编写一个 Web 应用程序，我需要能够上传一份简历。我已经完成了我的功课并尝试了我能找到的一切，但我一直遇到同样的问题。在我的 PHP 脚本中，$_FILES 数组完全为空，并且 CV 字段被发送到 $_POST 数组。我的表格很大，所以我只会发布重要的代码。

```
<form enctype="multipart/form-data" action="exec/register_user.php" method="post">
<input type="file" name="cv" id="cv"/>
<input type='submit' value='Register' />
</form> 
```

然后，我认为发布 PHP 代码不会对您有任何帮助。但是如果我 var_dump($GLOBALS)，它表明 $_FILES 数组是空的，但 'cv' 在 $_POST 数组中显示为字符串。

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:13:07.490

这通常是由于上传的文件太大并超过了 2 个定义的上传限制之一。post_max_size 或 upload_max_filesize

如果您具有正确的权限，则可以通过在 .htaccess 文件中添加以下 2 行来覆盖这些值。

```
php_value post_max_size 20M
php_value upload_max_filesize 20M 
```

允许上传最大 20 MB 的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:15:16.540

您缺少`max_file_size`PHP 所需的隐藏字段。

```
<!-- MAX_FILE_SIZE must precede the file input field -->
<input type="hidden" name="MAX_FILE_SIZE" value="20000000" /> 
```

请参阅[此处的说明](http://php.net/manual/en/features.file-upload.post-method.php)。

# html - 是否可以放置一个 在一个里面

> ID：10414405
> 
> 赞同：0
> 
> 时间：2012-05-02T13:07:55.117
> 
> 标签：html, css

> **可能重复：** [将 div 放入锚点是否正确？](https://stackoverflow.com/questions/1827965/is-putting-a-div-inside-an-anchor-ever-correct)

我想要一个复杂元素的链接（包含图像、段落和其他内容）。我知道它有效，但是可以在`<div>`元素中包含一个`<a>`元素吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:10:46.403

是的……不。

没有完整的 HTML 或 XHTML 推荐允许它。

HTML 5 草案确实允许这样做，但您可能必须做一些事情，例如明确设置`display: block`锚点以使其在某些浏览器中工作。您可能会发现其他人根本不支持它（我希望能够链接到显示浏览器对此支持的参考资料，但不知道，如果您这样做，请发表评论。）

也就是说，虽然有很好的大点击目标可能很有用，但它并不是一种对某些浏览器（尤其是屏幕阅读器）具有的“浏览链接模式”友好的方法。您最好在内容中使用常规链接，并应用一些 JavaScript 来响应对整个元素的点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:12:39.290

在 XHTML1.0 和 HTML4.01 中：没有。`a`是一个内联元素，只能包含其他内联元素（但不能包含另一个`a`）。

在 HTML5 中：是的，您可以这样做。**但是**考虑一下为什么你会在一个链接中有数百个字符。
这对 SEO 不利（我相信稀释），对许多残疾用户不利（*“嘿，屏幕阅读器，告诉我这个链接有什么作用？”-“让我大声朗读这个链接半分钟”*），也许对许多残疾用户不利可用性。

另一种解决方案是在 div 或一些有意义的文本中说出你的标题的链接。然后在 JS 中让你的 div 表现得像你最初想做的那样。然后它将适用于使用辅助技术（屏幕阅读器等）的用户、键盘用户（他们可以通过链接进行标签）和使用 JS 的有视力的鼠标用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:12:07.787

不，除非您不关心 IE7 及以下版本。即使设置为 display:block，该链接在 IE7 中也无法正常工作。

# web-services - 调用 CMIS 服务时出错

> ID：10414412
> 
> 赞同：0
> 
> 时间：2012-05-02T13:08:12.350
> 
> 标签：web-services, soap, sharepoint-2010, soapui, cmis

我正在尝试使用 CMIS wsdl 在 SharePoint 存储库中创建文档。但得到一些错误。我正在使用soapui 调用该服务。

这是创建的 xml 的一部分：

```
Request : <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns="http://docs.oasis-open.org/ns/cmis/messaging/200908/" xmlns:ns1="http://docs.oasis-open.org/ns/cmis/core/200908/">
   <soapenv:Header/>
   <soapenv:Body>
      <ns:createDocument>
         <!--Optional:-->
         <ns:repositoryId>64bec929-945e-46f1-9c74-d0ab24803283</ns:repositoryId>
         <!--Optional:-->
         <ns:properties>
            <propertyString propertyDefinitionId="cmis:name" localName="FileLeafRef" displayName="Name" queryName="cmis:name">
               <value>test.txt</value>
            </propertyString>
            <propertyId propertyDefinitionId="cmis:objectId" localName="cmis:objectId" displayName="cmis:objectId" queryName="cmis:objectId">
               <value>123123</value>
            </propertyId>
            <propertyId propertyDefinitionId="cmis:baseTypeId" localName="cmis:baseTypeId" displayName="cmis:baseTypeId" queryName="cmis:baseTypeId">
               <value>cmis:document</value>
            </propertyId>
            <propertyId propertyDefinitionId="cmis:objectTypeId" localName="cmis:objectTypeId" displayName="cmis:objectTypeId" queryName="cmis:objectTypeId">
               <value>cmis:document</value>
            </propertyId>
            <propertyBoolean propertyDefinitionId="cmis:isImmutable" localName="cmis:isImmutable" displayName="cmis:isImmutable" queryName="cmis:isImmutable">
               <value>true</value>
            </propertyBoolean>
            <propertyBoolean propertyDefinitionId="cmis:isLatestVersion" localName="cmis:isLatestVersion" displayName="cmis:isLatestVersion" queryName="cmis:isLatestVersion">
               <value>true</value>
            </propertyBoolean>
            <propertyBoolean propertyDefinitionId="cmis:isMajorVersion" localName="cmis:isMajorVersion" displayName="cmis:isMajorVersion" queryName="cmis:isMajorVersion">
               <value>true</value>
            </propertyBoolean>
            <propertyBoolean propertyDefinitionId="cmis:isLatestMajorVersion" localName="cmis:isLatestMajorVersion" displayName="cmis:isLatestMajorVersion" queryName="cmis:isLatestMajorVersion">
               <value>true</value>
            </propertyBoolean>
            <propertyString propertyDefinitionId="cmis:versionLabel" localName="cmis:versionLabel" displayName="cmis:versionLabel" queryName="cmis:versionLabel">
               <value>1.0</value>
            </propertyString>
            <propertyId propertyDefinitionId="cmis:versionSeriesId" localName="cmis:versionSeriesId" displayName="cmis:versionSeriesId" queryName="cmis:versionSeriesId">
               <value>1</value>
            </propertyId>
            <propertyBoolean propertyDefinitionId="cmis:isVersionSeriesCheckedOut" localName="cmis:isVersionSeriesCheckedOut" displayName="cmis:isVersionSeriesCheckedOut" queryName="cmis:isVersionSeriesCheckedOut">
               <value>true</value>
            </propertyBoolean>
            <propertyInteger propertyDefinitionId="cmis:contentStreamLength" localName="File_x0020_Size" displayName="File Size" queryName="cmis:contentStreamLength">
               <value>19444</value>
            </propertyInteger>
            <propertyString propertyDefinitionId="cmis:contentStreamMimeType" localName="cmis:contentStreamMimeType" displayName="cmis:contentStreamMimeType" queryName="cmis:contentStreamMimeType">
               <value>text/plain</value>
            </propertyString>
            <propertyString propertyDefinitionId="cmis:contentStreamFileName" localName="FileLeafRef" displayName="Name" queryName="cmis:contentStreamFileName">
               <value>test.txt</value>
            </propertyString>
         </ns:properties>
         <ns:folderId/>
         <ns:contentStream>
            <!--Optional:-->
            <ns:length>19444</ns:length>
            <!--Optional:-->
            <ns:mimeType>text/plain</ns:mimeType>
            <!--Optional:-->
            <ns:filename>a1.txt</ns:filename>
            <!--Optional:-->
            <ns:stream>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=</ns:stream>
         </ns:contentStream>
         <ns:versioningState>major</ns:versioningState>
         <!--Zero or more repetitions:-->
         <ns:policies/>
         <ns:addACEs>
            <!--Zero or more repetitions:-->
            <ns1:permission>
               <!--Optional:-->
               <ns1:principal>
                  <!--Optional:-->
                  <ns1:principalId/>
               </ns1:principal>
               <!--Zero or more repetitions:-->
               <ns1:permission>cmis:all</ns1:permission>
               <ns1:direct>false</ns1:direct>
            </ns1:permission>
         </ns:addACEs>
         <ns:removeACEs/>
         <ns:extension/>
      </ns:createDocument>
   </soapenv:Body>
</soapenv:Envelope> 
```

我得到的回应是：

```
 <faultcode>s:constraint</faultcode>
             <faultstring>The operation violates a Repository- or Object-level constraint defined in the CMIS domain model.</faultstring>
             <detail>
                <cmisFault xmlns="http://docs.oasis-open.org/ns/cmis/messaging/200908/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                   <code>409</code>
                   <message>The operation violates a Repository- or Object-level constraint defined in the CMIS domain model.</message>
                   <type>constraint</type>
                </cmisFault>
             </detail>
          </s:Fault> 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:19:57.540

您正在尝试设置只读属性，例如 cmis:object:id、cmis:versionSeriesId 等。检查 CMIS 规范哪些属性是读写属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:11:18.423

您需要确保您的版本控制参数与您在 SharePoint 上启用的参数相匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-30T20:32:45.253

嗨，这是解决方案，它有效！

检查图片中的附件

```
<?xml version="1.0" encoding="UTF-8"?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">

    <S:Body>
        <ns2:createDocument xmlns="http://docs.oasis-open.org/ns/cmis/core/200908/" xmlns:ns2="http://docs.oasis-open.org/ns/cmis/messaging/200908/">
            <ns2:repositoryId>A1</ns2:repositoryId>
            <ns2:properties>
                <propertyId propertyDefinitionId="cmis:name">
                    <value>DADADAAAAAA.txt</value>
                </propertyId>
                <propertyId propertyDefinitionId="cmis:objectTypeId">
                    <value>DocumentTopLevel</value>
                </propertyId>
            </ns2:properties>
            <ns2:folderId>100</ns2:folderId>
            <ns2:contentStream>
                <ns2:length>32768</ns2:length>
                <ns2:mimeType>text/plain</ns2:mimeType>
                <ns2:filename>data442.txt</ns2:filename>
                <ns2:stream>
                    <xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:1ee9605a-a27d-41e9-9c77-d2c1ad244768@example.jaxws.sun.com"/>
                </ns2:stream>
            </ns2:contentStream>
            <ns2:versioningState>none</ns2:versioningState>
        </ns2:createDocument>
    </S:Body>
</S:Envelope> 
```

![在此处输入图像描述](../Images/92ecc7a8e6473aa454fa3590fbee3adc.png)

# java - PropertyPlaceholderConfigurer + PropertiesFactoryBean 只解析位置属性

> ID：10414419
> 
> 赞同：4
> 
> 时间：2012-05-02T13:08:55.607
> 
> 标签：java, spring, properties

我无法让 PropertyPlaceholderConfigurer 在我当前的配置中工作。鉴于我的 applicationContext.xml 中的以下代码块：

```
<bean id="myProperties" 
    class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="locations">
        <list>
            <!-- Order matters, last one to create a property wins! -->
            <value>classpath:default.properties</value>
            <value>file:${MYAPP_PROPERTIES_LOCATION:badurl}/application.properties</value>
            <value>file:${user.home}/developer.properties</value>
        </list>
    </property>
    <property name="ignoreResourceNotFound" value="true"/>

<bean id="propertyConfigurer" 
    class="org.springframework.beans.factory.config.PropertiesPlaceholderConfigurer">
    <property name="properties" ref="myProperties"/>
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE"/>
    <property name="searchSystemEnvironment" value="true"/>
</bean> 
```

然后在 default.properties 文件中，我有以下内容（这些是测试属性）：

```
property1=prop1val
property2=${property1} 
```

工作原理：propertyConfigurer 正确解析环境变量 MYAPP_PROPERTIES_LOCATION 和系统变量 user.home。但是，最终的属性对象是由工厂 bean 创建的，结果属性是 **[property1=prop1val, property2=${property1}]**。

**使用此配置，如何获取 myProperties bean 中的属性来解析它们的占位符？** 我已经做了大量的研究，包括跟踪 spring 代码 - 我可以看到如何以及为什么没有这样做。我希望有一些我只是想念的设置！这是我的第一篇文章，所以请放轻松:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:26:18.560

您已经正确配置了 spring 和属性文件。这就是为什么您能够从文件中读取数据的原因。**spring 所做的一切都是正确的**，让我再解释一下....

正如您在下面所说的是您的财产文件，

```
property1=prop1val
property2=${property1} 
```

请记住，它是一个带有键值对的漂亮文本文件，它不能接受变量。在这里，如果您打算动态复制 to 的值，`property1`则`property2`不会发生。这不是我们应该使用属性文件的方式。

属性文件应该是带有键值对的简单文本文件。因此，请保持键的原子性，以便您可以从应用程序或`applicationcontext.xml`文件中以逻辑方式构造所需的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:08:30.973

我不确定你为什么使用`PropertiesFactoryBean`. 您能否尝试以下方法（不确定您是否已经尝试过以及遇到的任何问题）

```
<bean id="propertyConfigurer"  
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">  
  <property name="locations">
        <list>
            <!-- Order matters, last one to create a property wins! -->
            <value>classpath:default.properties</value>
            <value>file:${MYAPP_PROPERTIES_LOCATION:badurl}/application.properties</value>
            <value>file:${user.home}/developer.properties</value>
        </list>
    </property>
</bean> 
```

# jquery - 如何防止用户在达到最大字符限制后在 textarea 中输入文本

> ID：10414420
> 
> 赞同：29
> 
> 时间：2012-05-02T13:09:02.693
> 
> 标签：jquery

一旦达到最大字符限制，我想阻止用户在 textarea 中输入文本。当我达到最大限制时发生了什么，然后我的文本区域滚动条移动到顶部，我以某种方式用这段代码阻止了这种情况。

```
jQuery(document).ready(function($) {
    $('textarea.max').keyup(function() {
        var $textarea = $(this);
        var max = 400;
        if ($textarea.val().length > max) {
            var top = $textarea.scrollTop();
            $textarea.val($textarea.val().substr(0, max));
            $textarea.scrollTop(top);

        }
    });
}); //end if ready(fn) 
```

但我也希望在达到最大限制后用户无法在 textarea 中输入任何内容。目前，如果用户按住键达到最大限制后，字符会在文本区域中输入，尽管在释放按钮后它会返回原始文本（即 $textarea.val($textarea.val(). substr(0, 最大值));)。但我希望一旦这种情况成为现实

```
if ($textarea.val().length > max) { 
```

用户无法输入任何内容。我希望光标从文本区域中消失。但是如果用户删除了一些文本，那么光标也可供用户再次输入。我该怎么做？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-02T13:10:33.390

该`keyup`事件在默认行为（填充文本区域）发生后触发。

最好使用`keypress`事件，过滤不可打印的字符。

**演示： http: [//jsfiddle.net/3uhNP/1/](http://jsfiddle.net/3uhNP/1/)**（最大长度为 4）

```
jQuery(document).ready(function($) {
    var max = 400;
    $('textarea.max').keypress(function(e) {
        if (e.which < 0x20) {
            // e.which < 0x20, then it's not a printable character
            // e.which === 0 - Not a character
            return;     // Do nothing
        }
        if (this.value.length == max) {
            e.preventDefault();
        } else if (this.value.length > max) {
            // Maximum exceeded
            this.value = this.value.substring(0, max);
        }
    });
}); //end if ready(fn) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-02T13:12:13.017

```
<textarea maxlength="400"> </textarea> 
```

使用上面的代码来限制插入文本区域的字符数，如果你想禁用文本区域本身（即，之后将无法编辑），你可以使用 javascript/jquery 禁用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-19T12:51:49.863

把事情简单化

```
var max = 50;
$("#textarea").keyup(function(e){
$("#count").text("Characters left: " + (max - $(this).val().length));
}); 
```

并将其添加到您的 html 中

```
<textarea id="textarea" maxlength="50"></textarea>
<div id="count"></div> 
```

[查看示例](http://jsbin.com/cic/2/edit)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-12T13:05:06.210

只需在您的 Javascript 文件中编写此代码。但需要使用 textarea 指定“maxlength”属性。这将适用于页面的所有文本区域。

```
$('textarea').bind("change keyup input",function() {

        var limitNum=$(this).attr("maxlength");

        if ($(this).val().length > limitNum) {
            $(this).val($(this).val().substring(0, limitNum));
        }

    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-01T14:49:42.153

你可以直接给`maxlength`禁用`textarea`它自己。但是，您想显示适当的消息，然后将`keyup`事件用于默认行为和`textarea` `length`计算字符并显示适当的消息。

HTML

```
<div id="count"></div>
<textarea class="max"  maxlength="250" id="tarea"></textarea>
<div id="msg"></div> 
```

jQuery

```
$(function(){
    var max = parseInt($("#tarea").attr("maxlength"));
  $("#count").text("Characters left: " + max);
    $("#tarea").keyup(function(e){
        $("#count").text("Characters left: " + (max - $(this).val().length));
    if($(this).val().length==max)
        $("#msg").text("Limit Reached....");
        else
        $("#msg").text("");
    });
}); 
```

[演示小提琴](http://jsfiddle.net/3uhNP/870/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T13:15:05.650

您可以使用[此](https://stjerneman.com/portfolio/maxlength-jquery/)插件而不是尝试编写自己的插件。我发现它工作得很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-24T07:52:24.100

你可以保持你的活动原样，只使用这个**[库](https://github.com/benhowdle89/touche)**

**例子**

```
// applying a click event to one element

Touche(document.querySelector('#myButton')).on('click', handleClick);

// or to multiple at once

Touche(document.querySelectorAll('.myButtons')).on('click', handleClicks);

// or with jQuery

$('.myButtons').on('click', handleClicks); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-03T17:18:08.440

对于那些已经在浏览器中使用 ES2015 的人，这里是使用上面一些答案的实现：

```
class InputCharacterCount {
  constructor(element, min, max) {
    this.element = element;
    this.min = min;
    this.max = max;
    this.appendCharacterCount();
  }

  appendCharacterCount(){
    let charCount = `<small class="char-counter help-block"></small>`;
    this.element.closest('.form-group').append(charCount);
  }

  count(event){
    this.element.attr('maxlength', this.max); // Add maxlenght attr to input element

    let value = this.element.val();
    this.element
      .closest('.form-group')
      .find('.char-counter')
      .html(value.length+'/'+this.max); // Add a character count on keyup/keypress

    if (value.length < this.min || value.length > this.max) { // color text on min/max changes
      this.element.addClass('text-danger');
    } else {
      this.element.removeClass('text-danger');
    }
  }
} 
```

用法：

```
let comment = $('[name="collection-state-comment"]');
let counter = new InputCharacterCount(comment, 21, 140);
$(comment).keyup(function(event){
  counter.count(event);
}); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-02-21T12:02:24.057

```
 <script type="text/javascript">
        $(document).ready(function () {
            maxlength("TextArea1");
        });
        function maxlength(id) {
            $('#' + id).on('input propertychange', function () {
                CharLimit(this, 20);
            });
        }

        function CharLimit(input, maxChar) {
            var len = $(input).val().length;
            if (len > maxChar) {
                $(input).val($(input).val().substring(0, maxChar));
            }
        }
 </script> 
```

# model-view-controller - MVC - 视图中的数据源容器

> ID：10414424
> 
> 赞同：0
> 
> 时间：2012-05-02T13:09:29.773
> 
> 标签：model-view-controller, design-decisions

在干净的 MVC 中，我会从数据库中收集数据并将其传递给要呈现的视图。

即使视图逻辑选择不渲染某些元素。这提出了以下问题：

准备一个包含所有数据库查询的容器是否干净，但仅在视图开始迭代此容器（它是可迭代的）时从视图中获取数据，而不是“在控制器中”获取数据？

**附录**

我传递给视图的容器是“*一种*”模型，我们称之为模型`ExpensiveObjectProvider`。当这个容器被传递给视图时，数据还没有从数据库中获取。

容器封装的对象可能很昂贵。我认为仍然在控制器中执行此操作的唯一原因是错误处理（如果数据库查询出错、连接问题等）。您认为从控制器中的数据库中预取前 1-2-3 个对象，然后将容器传递给视图（如果没有发生异常）并让视图消耗预取的数据，这是一个很好的权衡吗？并在迭代容器时获取新项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:13:02.853

通常数据库代码不会进入视图，它将位于模型或模型所依赖的 DAO 中。视图中的逻辑将很难测试，如果数据库访问代码也在其中，则非常混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:13:19.257

视图不应执行任何此类逻辑。控制器告诉视图要显示的数据。控制器从模型中获取这些数据。

# javascript - 如何使用 jQuery 在弹出对话框中打印表格？

> ID：10414429
> 
> 赞同：0
> 
> 时间：2012-05-02T13:09:50.890
> 
> 标签：javascript, jquery, printing

我目前有一个弹出对话框，里面有一个时间表，下面有一个按钮。按下时，它应该在该对话框中打印时间表。

到目前为止我所做的是：`<input type="submit" value="Print Timetable" class="ActionButton" onClick="window.print()"/>`但它会打印整个页面。我不确定如何只打印里面的表格。

我也注意到在打印预览中。没有颜色。它是黑白的。

我也在使用 jQuery 和 PHP。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:13:11.673

创建打印样式表

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

创建 CSS 规则以隐藏您不希望打印的内容。格式化弹出窗口，使其看起来很漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:15:50.080

[http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm](http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm)

# python - vbulletin动态爬取的问题

> ID：10414431
> 
> 赞同：1
> 
> 时间：2012-05-02T13:10:02.767
> 
> 标签：python, html, screen-scraping, web-crawler, scrapy

免责声明：为我的愚蠢找借口，但我不是网络程序员：D

我正在尝试使用 python scrapy 编写爬虫。当我查看这个[vbulletin](http://forums.heroesofnewerth.com/index.php) board 时，我遇到了一些奇怪的行为。当我在 firefox 中加载页面并使用 firefox/firebug 检查它时，我看到论坛 L1 标题具有类`forumbit_nopost new L1`（您可以在文档中搜索 cat117 以获取感兴趣的元素）。

当我使用 scrappy 或 curl 检索文档时，我将类设置为`forumbit_nopost old L1`. 我在使用 curl 时更改了用户代理以匹配 firefox 并且没有任何区别，所以我怀疑它与一些 javascript 执行有关。我尝试在 firefox 中禁用 javascript，但 firefox 仍然有具有`new`类属性变体的源。

有人可以向我解释发生了什么吗？:D

Ps，chrome也看到了`old`变体。

使用的 curl 命令：

```
curl http://forums.heroesofnewerth.com/index.php --user-agent "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:12.0) Gecko/20100101 Firefox/12.0" > scratch 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:57:17.473

我敢打赌，新意味着自您上次访问以来有新帖子。您的脚本永远不会显示此内容，除非它在会话之间保留 cookie。

# ios - Mac 和 Windows Excel

> ID：10414435
> 
> 赞同：0
> 
> 时间：2012-05-02T13:10:28.167
> 
> 标签：ios, windows, macos, ms-office, xls

我是 Mac 用户，我正在尝试为 iPhone 开发一个应用程序，它可以备份通讯录并通过电子邮件发送。它将数据作为 .csv 文件发送。

当我在 Mac Excel 和 Windows Excel 中打开这个 .csv 文件时，它似乎非常不同。例如，下面显示的代码都会有所不同......

当我这样做时：

```
[stringToWrite appendFormat:@";"]; 
```

在 Windows Excel 中......它显示正常。我的意思是在 Excel 中它是这样显示的；

```
name  (other cell) phone (other cell) mail
name2 (other cell) phone2(other cell) mail2 
```

但在 Mac Excel 中它看起来像；

```
name;phone;mail (all in one cell)
name2;phone2;mail2(all in one cell) 
```

当我做这样的代码时；

```
[stringToWrite appendFormat:@","]; 
```

在 Mac Excel 中，它显示正常。我的意思是在 Excel 中它是这样显示的；

```
name  (other cell) phone (other cell) mail
name2 (other cell) phone2(other cell) mail2 
```

但在 Windows Excel 中它看起来像；

```
name,phone,mail (all in one cell)
name2,phone2,mail2(all in one cell) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:18:31.377

Mac 版和 Windows 版 Excel 的默认分隔符设置不同。（微软的小玩笑），但解决方法是在 Excel 中选择如何导入值。

新建工作表 -> 数据 -> 导入数据，然后选择要使用的分隔符。

我认为您应该考虑您拥有什么样的用户（主要是 Windows 或 Mac）并默认使用。

# android - 如何从 CallLog.Calls android 获取 LastOutgoingCall？

> ID：10414442
> 
> 赞同：2
> 
> 时间：2012-05-02T13:10:54.547
> 
> 标签：android

我有问题，我不知道如何`LastOutgoingCall`从`android.provider.CallLog.Calls`. 有一个公共方法`getLastOutgoingCall`，但我不知道如何访问它。我可以创建对象`CallLog.Calls`，但没有像`getLastOutgoingCall`.

我知道有“查询最后拨打的号码的通话记录数据库”，但不知道如何获取和使用它。对于任何提示和答案，提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:29:10.920

```
String lastDialed = CallLog.Calls.getLastOutgoingCall(getApplicationContext()); 
```

当然，将权限添加到清单

```
<uses-permission android:name="android.permission.READ_CALL_LOG" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:14:00.160

使用内容提供者获取呼出列表并根据时间按DESC顺序排列并检索光标的第一个值。

对 Content Provider 进行一些研究。

# c# - 为什么模拟 asp.net 成员角色无法使用 Authorize 属性限制访问

> ID：10414447
> 
> 赞同：0
> 
> 时间：2012-05-02T13:11:26.807
> 
> 标签：c#, asp.net-mvc-3, mocking, forms-authentication

我已成功设置模拟以测试 asp.net 表单授权，但我看到角色成员身份和授权属性出现一些意外行为。具体来说，当如下所示调用 ChangePassword 方法时，我希望我会得到一个未经授权的访问重定向到登录屏幕，但是我可以一直通过 ChangePassword 方法并成功接收更改密码。谁能帮助指导我做错了什么？

我已经测试过，在 ChangePassword 方法中调用 IsUserInRole 方法确实可以按预期工作，并且我可以在这种情况下重定向到登录屏幕，但是在我的所有方法中测试这种情况似乎很麻烦。提前致谢。我也尝试过不将用户分配给角色（而不是使用模拟返回 false），但结果是一样的，更改密码成功。

```
 [TestMethod]
    public void TestProfile()
    {
        string testUserName = "userName", password = "password1", newPassword = "newPassword1";
        var prov = new Mock<IMembershipProvider>();
        prov.Setup(v => v.ValidateUser(testUserName, password)).Returns(true);
        var user = new Mock<MembershipUser>();
        var frmAuth = new Mock<IFormsAuthentication>();
        user.Setup(v => v.ChangePassword(password, newPassword)).Returns(true);
        prov.Setup(v => v.GetUser(testUserName, true)).Returns(user.Object);
        AccountController ctrl = new AccountController(prov.Object, frmAuth.Object);
        var ctrlCtx = new Mock<ControllerContext>();
        ctrlCtx.SetupGet(x => x.HttpContext.User.Identity.Name).Returns(testUserName);
        ctrlCtx.SetupGet(x => x.HttpContext.User.Identity.IsAuthenticated).Returns(true);
        //with this line I would expect to see a redirect to unauhorized
        ctrlCtx.Setup(x => x.HttpContext.User.IsInRole("RoleToTest")).Returns(false);
        ctrl.ControllerContext = ctrlCtx.Object;
        ctrl.Url = Moq.Mock.Of<IUrlHelper>(x => x.IsLocalUrl(It.IsAny<string>()) == true);

        ChangePasswordModel changePass = new ChangePasswordModel() { NewPassword = newPassword, OldPassword = password, ConfirmPassword = password };
        var result = ctrl.ChangePassword(changePass) as ViewResult;
        string expectedViewName = "Logon";
        Assert.AreEqual(result.ViewName, expectedViewName, true /* ignoreCase */,
            string.Format("The expected view '{0}' was not returned. Did change password succeed?", expectedViewName));

    }

    [Authorize(Roles="RoleToTest")]
    [HttpPost]
    public ActionResult ChangePassword(ChangePasswordModel model)
    {
        if (ModelState.IsValid)
        {

            // ChangePassword will throw an exception rather
            // than return false in certain failure scenarios.
            bool changePasswordSucceeded;
            try
            {
                MembershipUser currentUser = membershipProvider.GetUser(User.Identity.Name, true /* userIsOnline */);
                changePasswordSucceeded = currentUser.ChangePassword(model.OldPassword, model.NewPassword);
            }
            catch (Exception e)
            {
                Elmah.ErrorSignal.FromCurrentContext().Raise(e);
                changePasswordSucceeded = false;
            }

            if (changePasswordSucceeded)
            {
                return View("ChangePasswordSuccess");
            }
            else
            {
                ModelState.AddModelError("", "The current password is incorrect or the new password is invalid.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View("ChangePassword", model);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:16:21.263

> 具体来说，当如下所示调用 ChangePassword 方法时，我希望我会得到一个未经授权的访问重定向到登录屏幕，但是我可以一直通过 ChangePassword 方法并成功接收更改密码。

你的期望是错误的。诸如此类的属性`[Authorize]`只是在编译时烘焙到程序集中的元数据。如果没有什么可以解释它们，那么在运行时什么都不会发生。

问题是该`[Authorize]`属性由 ASP.NET MVC 请求处理管道使用。在您的单元测试中，您正在对控制器操作进行简单调用。而已。没有代码可以理解这个属性。

因此，如果用户未通过身份验证，您无需对控制器操作重定向到登录页面进行单元测试。您必须进行单元测试的是您的控制器操作用 Authorize 属性修饰。当放置在控制器操作上时，此属性将重定向到登录页面这一事实是 ASP.NET MVC 团队在框架开发期间已经进行了广泛的单元测试，因此您无需重复他们的工作。只要相信他们。

因此，典型的单元测试如下所示：

```
[TestMethod]
public void ChangePassword_Action_Should_Be_Accessible_Only_To_Users_Belonging_To_The_RoleToTest_Role()
{
    Expression<Func<AccountController, ActionResult>> changePwdEx = 
        x => x.ChangePassword(null);
    var authorize = (changePwdEx.Body as MethodCallExpression)
        .Method
        .GetCustomAttributes(typeof(AuthorizeAttribute), true)
        .OfType<AuthorizeAttribute>()
        .First();

    Assert.AreEqual("RoleToTest", authorize.Roles);
} 
```

好的，现在您已经对这个控制器操作进行了单元测试，该控制器操作只能由属于该`RoleToTest`角色的用户访问。

在您的下一个单元测试中，您假设用户属于该角色（通过模拟相应的类）并且您断言控制器操作的主体按预期执行。

# android - 在后台发送自动电子邮件

> ID：10414453
> 
> 赞同：1
> 
> 时间：2012-05-02T13:11:36.617
> 
> 标签：android

我正在尝试“在后台”发送一封自动电子邮件作为通知给用户。我使用以下链接中的此代码， [使用 JavaMail API 在 Android 中发送电子邮件，而不使用默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

虽然这段代码似乎找到了，但它对我不起作用。我没有收到任何电子邮件。我也使用了权限，

这是我的代码，

电子邮件发件人.java

```
package zaid.project.EmailSender;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.widget.Toast;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

 public class EmailSenderActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

        try {   
            GmailSender sender = new GmailSender(senderEmail@gmail.com", "password");
            sender.sendMail("Griffin Seal test",   
                    "Hellow Guys, this is zaid, sending an automatic email from our application, \n is this a new line ? good luck!",   
                    "senderEmail@gmail.com",   
                    "receiverEmail@hotmail.com");   

   } catch (Exception e) {   
                Log.e("SendMail", e.getMessage(), e);   
            } 

     }
   } 
```

GmailSender.java

```
 package zaid.project.EmailSender;

import javax.activation.DataHandler;   
import javax.activation.DataSource;   
import javax.mail.Message;   
import javax.mail.PasswordAuthentication;   
import javax.mail.Session;   
import javax.mail.Transport;   
import javax.mail.internet.InternetAddress;   
import javax.mail.internet.MimeMessage;   
import java.io.ByteArrayInputStream;   
import java.io.IOException;   
import java.io.InputStream;   
import java.io.OutputStream;   
import java.security.Security;   
import java.util.Properties;   

public class GmailSender extends javax.mail.Authenticator {   
    private String mailhost = "smtp.gmail.com";   
    private String user;   
    private String password;   
    private Session session;   

    static {   
        Security.addProvider(new JSSEProvider());   
    }  

    public GmailSender(String user2, String password2) {
        // TODO Auto-generated constructor stub
        this.user = user;   
        this.password = password;   

        Properties props = new Properties();   
        props.setProperty("mail.transport.protocol", "smtp");   
        props.setProperty("mail.host", mailhost);   
        props.put("mail.smtp.auth", "true");   
        props.put("mail.smtp.port", "465");   
        props.put("mail.smtp.socketFactory.port", "465");   
        props.put("mail.smtp.socketFactory.class",   
                "javax.net.ssl.SSLSocketFactory");   
        props.put("mail.smtp.socketFactory.fallback", "false");   
        props.setProperty("mail.smtp.quitwait", "false");   

        session = Session.getDefaultInstance(props, this);  
    }

    protected PasswordAuthentication getPasswordAuthentication() {   
        return new PasswordAuthentication(user, password);   
    }   

    public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {   
        try{
        MimeMessage message = new MimeMessage(session);   
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
        message.setSender(new InternetAddress(sender));   
        message.setSubject(subject);   
        message.setDataHandler(handler);   
        if (recipients.indexOf(',') > 0)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
        Transport.send(message);   
        }catch(Exception e){

        }
    }   

    public class ByteArrayDataSource implements DataSource {   
        private byte[] data;   
        private String type;   

        public ByteArrayDataSource(byte[] data, String type) {   
            super();   
            this.data = data;   
            this.type = type;   
        }   

        public ByteArrayDataSource(byte[] data) {   
            super();   
            this.data = data;   
        }   

        public void setType(String type) {   
            this.type = type;   
        }   

        public String getContentType() {   
            if (type == null)   
                return "application/octet-stream";   
            else  
                return type;   
        }   

        public InputStream getInputStream() throws IOException {   
            return new ByteArrayInputStream(data);   
        }   

        public String getName() {   
            return "ByteArrayDataSource";   
        }   

        public OutputStream getOutputStream() throws IOException {   
            throw new IOException("Not Supported");   
        }   
    }   
} 
```

JSSEProvider.java

```
package zaid.project.EmailSender;

/*
 *  Licensed to the Apache Software Foundation (ASF) under one or more
 *  contributor license agreements.  See the NOTICE file distributed with
 *  this work for additional information regarding copyright ownership.
 *  The ASF licenses this file to You under the Apache License, Version 2.0
 *  (the "License"); you may not use this file except in compliance with
 *  the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

/**
 * @author Alexander Y. Kleymenov
 * @version $Revision$
 */

import java.security.AccessController;
import java.security.Provider;

public final class JSSEProvider extends Provider {

    public JSSEProvider() {
        super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
        AccessController.doPrivileged(new java.security.PrivilegedAction<Void>() {
            public Void run() {
                put("SSLContext.TLS",
                        "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
                put("Alg.Alias.SSLContext.TLSv1", "TLS");
                put("KeyManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
                put("TrustManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
                return null;
            }
        });
    }
} 
```

任何人都可以帮忙吗？谢谢你。

我的原木猫，

```
05-02 16:20:07.636: DEBUG/AndroidRuntime(652): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
05-02 16:20:07.636: DEBUG/AndroidRuntime(652): CheckJNI is ON
05-02 16:20:09.476: DEBUG/AndroidRuntime(652): Calling main entry com.android.commands.pm.Pm
05-02 16:20:09.826: DEBUG/dalvikvm(228): GC_EXPLICIT freed 2K, 54% free 2545K/5511K, external 1625K/2137K, paused 194ms
05-02 16:20:09.866: WARN/ActivityManager(68): No content provider found for: 
05-02 16:20:09.986: WARN/ActivityManager(68): No content provider found for: 
05-02 16:20:10.026: DEBUG/PackageParser(68): Scanning package: /data/app/vmdl1881124255.tmp
05-02 16:20:10.686: INFO/PackageManager(68): Removing non-system package:zaid.project.EmailSender
05-02 16:20:10.686: INFO/ActivityManager(68): Force stopping package zaid.project.EmailSender uid=10040
05-02 16:20:10.786: INFO/Process(68): Sending signal. PID: 601 SIG: 9
05-02 16:20:10.856: ERROR/InputDispatcher(68): channel '406ccb98 zaid.project.EmailSender/zaid.project.EmailSender.EmailSenderActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
05-02 16:20:10.856: ERROR/InputDispatcher(68): channel '406ccb98 zaid.project.EmailSender/zaid.project.EmailSender.EmailSenderActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
05-02 16:20:10.916: INFO/WindowManager(68): WIN DEATH: Window{406ccb98 zaid.project.EmailSender/zaid.project.EmailSender.EmailSenderActivity paused=false}
05-02 16:20:11.108: WARN/InputManagerService(68): Got RemoteException sending setActive(false) notification to pid 601 uid 10040
05-02 16:20:12.036: DEBUG/PackageManager(68): Scanning package zaid.project.EmailSender
05-02 16:20:12.036: INFO/PackageManager(68): Package zaid.project.EmailSender codePath changed from /data/app/zaid.project.EmailSender-1.apk to /data/app/zaid.project.EmailSender-2.apk; Retaining data and using new
05-02 16:20:12.046: INFO/PackageManager(68): Unpacking native libraries for /data/app/zaid.project.EmailSender-2.apk
05-02 16:20:12.120: DEBUG/installd(34): DexInv: --- BEGIN '/data/app/zaid.project.EmailSender-2.apk' ---
05-02 16:20:16.995: DEBUG/dalvikvm(661): DexOpt: load 459ms, verify+opt 3535ms
05-02 16:20:17.125: DEBUG/installd(34): DexInv: --- END '/data/app/zaid.project.EmailSender-2.apk' (success) ---
05-02 16:20:17.135: INFO/ActivityManager(68): Force stopping package zaid.project.EmailSender uid=10040
05-02 16:20:17.145: WARN/PackageManager(68): Code path for pkg : zaid.project.EmailSender changing from /data/app/zaid.project.EmailSender-1.apk to /data/app/zaid.project.EmailSender-2.apk
05-02 16:20:17.145: WARN/PackageManager(68): Resource path for pkg : zaid.project.EmailSender changing from /data/app/zaid.project.EmailSender-1.apk to /data/app/zaid.project.EmailSender-2.apk
05-02 16:20:17.159: DEBUG/PackageManager(68):   Activities: zaid.project.EmailSender.EmailSenderActivity
05-02 16:20:17.275: DEBUG/dalvikvm(228): GC_EXPLICIT freed 7K, 54% free 2543K/5511K, external 1625K/2137K, paused 739ms
05-02 16:20:17.776: INFO/installd(34): move /data/dalvik-cache/data@app@zaid.project.EmailSender-2.apk@classes.dex -> /data/dalvik-cache/data@app@zaid.project.EmailSender-2.apk@classes.dex
05-02 16:20:17.785: DEBUG/PackageManager(68): New package installed in /data/app/zaid.project.EmailSender-2.apk
05-02 16:20:18.197: INFO/ActivityManager(68): Force stopping package zaid.project.EmailSender uid=10040
05-02 16:20:18.535: DEBUG/dalvikvm(136): GC_EXPLICIT freed 47K, 53% free 2846K/5959K, external 4796K/5329K, paused 327ms
05-02 16:20:18.645: DEBUG/dalvikvm(68): GC_EXPLICIT freed 838K, 49% free 4349K/8455K, external 3125K/3903K, paused 370ms
05-02 16:20:19.195: WARN/RecognitionManagerService(68): no available voice recognition services found
05-02 16:20:20.295: DEBUG/dalvikvm(68): GC_EXPLICIT freed 232K, 50% free 4287K/8455K, external 3125K/3903K, paused 326ms
05-02 16:20:20.295: DEBUG/dalvikvm(187): GC_EXPLICIT freed 109K, 52% free 2764K/5703K, external 1625K/2137K, paused 1506ms
05-02 16:20:20.435: INFO/installd(34): unlink /data/dalvik-cache/data@app@zaid.project.EmailSender-1.apk@classes.dex
05-02 16:20:20.469: DEBUG/AndroidRuntime(652): Shutting down VM
05-02 16:20:20.515: INFO/AndroidRuntime(652): NOTE: attach of thread 'Binder Thread #3' failed
05-02 16:20:20.535: DEBUG/dalvikvm(652): GC_CONCURRENT freed 101K, 72% free 295K/1024K, external 0K/0K, paused 6ms+2ms
05-02 16:20:20.575: DEBUG/dalvikvm(652): Debugger has detached; object registry had 1 entries
05-02 16:20:22.055: DEBUG/AndroidRuntime(666): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
05-02 16:20:22.055: DEBUG/AndroidRuntime(666): CheckJNI is ON
05-02 16:20:24.115: DEBUG/AndroidRuntime(666): Calling main entry com.android.commands.am.Am
05-02 16:20:24.215: INFO/ActivityManager(68): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=zaid.project.EmailSender/.EmailSenderActivity } from pid 666
05-02 16:20:24.335: DEBUG/AndroidRuntime(666): Shutting down VM
05-02 16:20:24.415: INFO/AndroidRuntime(666): NOTE: attach of thread 'Binder Thread #3' failed
05-02 16:20:24.435: DEBUG/dalvikvm(666): GC_CONCURRENT freed 101K, 69% free 318K/1024K, external 0K/0K, paused 7ms+3ms
05-02 16:20:24.435: DEBUG/jdwp(666): Got wake-up signal, bailing out of select
05-02 16:20:24.435: DEBUG/dalvikvm(666): Debugger has detached; object registry had 1 entries
05-02 16:20:24.575: INFO/ActivityManager(68): Start proc zaid.project.EmailSender for activity zaid.project.EmailSender/.EmailSenderActivity: pid=676 uid=10040 gids={3003}
05-02 16:20:28.045: INFO/ActivityManager(68): Displayed zaid.project.EmailSender/.EmailSenderActivity: +3s730ms
05-02 16:20:33.266: DEBUG/dalvikvm(324): GC_EXPLICIT freed 2K, 54% free 2539K/5511K, external 1625K/2137K, paused 132ms
05-02 16:20:34.175: DEBUG/SntpClient(68): request time failed: java.net.SocketException: Address family not supported by protocol
05-02 16:20:38.365: DEBUG/dalvikvm(136): GC_EXPLICIT freed 88K, 52% free 2907K/5959K, external 4845K/5329K, paused 202ms
05-02 16:20:43.427: DEBUG/dalvikvm(282): GC_EXPLICIT freed 8K, 55% free 2597K/5767K, external 1625K/2137K, paused 209ms 
```

# epub - 将“com.apple.ibooks.display-options.xml”文件嵌入 epub

> ID：10414457
> 
> 赞同：1
> 
> 时间：2012-05-02T13:11:49.187
> 
> 标签：epub, ibooks

我想添加`com.apple.ibooks.display-options.xml`出版商的 ibooks 文档中描述的文件。

我正在使用 sigil 创建我的书籍，但我无法在我的 epub 书籍文件中添加此文件。

有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:50:33.110

据我所知，你不能用 Sigil 添加它。即使在 Sigil 中，您也看不到文件的内容；你只能看到文件在那里。看看[这篇文章](http://authoradventures.blogspot.jp/2012/01/how-to-create-fixed-layout-ibooks-part_24.html)中的一些示例项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:35:43.610

[使用7zip](http://www.7-zip.org/)打开 epub 文件，然后添加**com.apple.ibooks.display-options.xml**。应该这样做，它确实对我有用。

# caching - 使用 cakephp 视图缓存保持登录会话

> ID：10414467
> 
> 赞同：0
> 
> 时间：2012-05-02T13:12:13.497
> 
> 标签：caching, cakephp-2.0

我在基于 cakephp 的 cms 中使用视图缓存，并为前端使用生成缓存视图。前端检查用户是否登录以显示编辑选项。它在没有启用视图缓存的情况下工作，但启用后它会丢失会话。

我已将会话代码放在无缓存标记 (index.ctp) 中，但没有可用的会话

```
<!--nocache-->
$_SESSION['Auth']['User']['username'];
<!--/nocache--> 
```

使用视图缓存时如何保持登录会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:38:02.317

anwser 是使用 cakephp 会话助手而不是原生 php $_SESSION 变量

```
<!--nocache-->
$this->session->read('Auth.user.name');
<!--/nocache--> 
```

# iphone - 我如何更改分隔线，以便它们在 UITableView 中填充单元格后消失

> ID：10414469
> 
> 赞同：0
> 
> 时间：2012-05-02T13:12:18.960
> 
> 标签：iphone, objective-c, ios, uitableview

我已经为 UITableView 的每个单元格设置了渐变背景，但是，渐变显示在有信息的每一行中。所以显示信息后，底部会显示一些带有分隔符的白色单元格。我如何更改分隔线以使它们消失，或将它们设置为白色，或在填充单元格后制作白色背景？提前致谢。

- 例如，您有 5 个单元格，但只有 3 个单元格内部有内容。因此，iPhone 将在顶部 3 个单元格上显示渐变背景和信息，而底部 2 个单元格则为白色背景，内部没有任何内容。由于我已将分隔符设置为黑色。底部的 2 个单元格也有黑色分隔符。那么如何将底部两个分隔符设置为白色，同时保持顶部 3 个单元格的黑色分隔符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:14:33.903

对于分隔符，您可以使用例如：

```
self.mytable.separatorColor=[UIColor whiteColor]; 
```

但我真的不明白你试图在背景颜色中实现什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:14:58.473

在表格视图中，您可以在界面生成器或代码中将分隔符样式更改为无

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T13:15:10.737

尝试以下两种方法之一：

```
tableView.separatorColor = [UIColor whiteColor];
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

请注意，您的单元格将需要自己绘制一些分隔符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T04:09:37.693

如果您使用的是 tableviewcontriller 然后使用这行代码

```
self.tableView.separatorColor=[UIColor whiteColor]; 
```

# php - php。有没有办法要求函数参数是一个数组？

> ID：10414470
> 
> 赞同：5
> 
> 时间：2012-05-02T13:12:25.917
> 
> 标签：php, function, parameters

有没有办法要求函数参数是特定的数据类型，例如数组？例如这样的：

```
function example(array $array){} 
```

如果是这样，这适用于所有数据类型吗？有没有好的资源可以告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:16:28.787

看看类型提示[http://php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T13:19:27.050

**编辑：是的，您可以使用数组输入提示，因此编辑了我的答案并进行了相应更改。**

你想要做的就是[type-hinting](http://php.net/language.oop5.typehinting.php)。您不能键入提示基本数据类型，例如`int`, `string`, `bool`。您可以使用`array`或对象和接口进行类型提示：

```
function example_hinted1(array $arr) {

}

function example_hinted2(User $user) {

} 
```

调用`example_hinted1(5)`会产生一个 PHP 致命错误（不是异常），但调用它传递一个数组是完全可以的。

如果您需要确保函数的某些参数来自基本类型，您可以使用函数内的代码模拟此行为：

```
function example($number) {
  if (!is_int($number) {
    throw new Exception("You must pass an integer to ".__FUNCTION__."()");
  }
  // rest of your function
} 
```

所以，这些片段会起作用：

```
example(1);

$b = 5 + 8;
example($b); 
```

虽然这些会引发异常：

```
example('foo');
example(array(5, 6));
example(new User()); 
```

# c++ - 如何获得 QDockArea 大小？

> ID：10414475
> 
> 赞同：0
> 
> 时间：2012-05-02T13:12:45.073
> 
> 标签：c++, qt, user-interface, qt3

我想`QDockArea`在用户通过拖动拆分器更改其大小时获取大小。尺寸变化`signal`时是否会发出任何信号？`QDockArea`我正在使用 Qt 3.3.6（请不要建议更改 Qt 版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:16:05.847

**你可以：**

创建一个子类`QDockArea`并重新实现该[`resizeEvent`](http://doc.trolltech.com/3.3/qwidget.html#resizeEvent)函数以发出信号或直接调用某种管理器对象。

**或者：**

将 manager 对象[用作`eventFilter`](http://doc.trolltech.com/3.3/qobject.html#installEventFilter)您`QDockArea`的 s 并检查[`QEvent::Resize`](http://doc.trolltech.com/3.3/qevent.html#type-enum)如何？

# netbeans - 如何使用 netbeans 在 spring rcp 中创建向导？

> ID：10414476
> 
> 赞同：0
> 
> 时间：2012-05-02T13:12:45.780
> 
> 标签：netbeans, spring-rcp

我通过扩展 AbstractForm 类创建了表单，现在我想创建向导，但我遇到了问题，你能帮我从一开始就使用 netbeans 在 spring-rcp 中创建向导吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:59:38.887

1.创建多个表单（参考[http://netbeans.dzone.com/news/getting-further-with-spring-rc](http://netbeans.dzone.com/news/getting-further-with-spring-rc)）

2.之后创建 AbstractWizard 的子类。在类加载时初始化表单，然后使用方法 addForm(Object); 像 addForm(form1); addForm(form2);

3.在你的视图类重写createControl方法，创建你的向导类的对象，然后调用showDialog方法。您的向导开始。

# heroku - Heroku 将新文件添加到我的 facebook appgit

> ID：10414477
> 
> 赞同：0
> 
> 时间：2012-05-02T13:12:49.217
> 
> 标签：heroku, cloud, add, fbjs

我正在尝试将一些文件添加到我的空间到 heroku 以运行我的 facebook 应用程序...

我首先创建了一个 index.ejs，一切都很好

然后我创建了 2 个新文件：test.html 和 credits.php

我尝试使用命令将它们发送到heroku：

git commit -am "newfiles" 但有一些错误

我也尝试使用 git add myappfolder/view/test.html 但没有工作

如何将这两个文件添加到我的 Facebook 空间应用程序

（我选择 node.js 作为创建 fb 应用程序的语言...然后可以上传 php 和 .html 文件）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:03:50.113

简单地写

```
git add ./ 
git commit -am "newfiles" 
git push heroku 
```

以便所有文件都可以推送到服务器

# css - 使用 CSS 以完全流畅的布局在另一个下显示一个 div

> ID：10414478
> 
> 赞同：2
> 
> 时间：2012-05-02T13:12:51.137
> 
> 标签：css

我已经更新了我的代码并制作了一个小提琴来解释我正在尝试做的事情。我之前也有过类似的问题，但并没有反映模板的流动性。

我有一个**完全流畅的布局**，我需要**在另一个下制作一个 div 显示**。

我想用 CSS 来做，我不想使用 javascript 或 jquery。

这是小提琴：http: [//jsfiddle.net/sexywebteacher/7hCNC/20/](http://jsfiddle.net/sexywebteacher/7hCNC/20/)

我可能不清楚： **我说的是小提琴中的 section1 和 section2 div**

你认为这可以做到吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:12:03.280

如果图像和文本的高度都是可变的，那么使用纯 CSS 并不是特别容易。

高度是可变的排除任何基于`position: absolute`，如您收到的对[您之前的类似问题](https://stackoverflow.com/questions/10412896/move-the-first-div-appear-under-the-second-one-in-css)的答案。

一种选择是使用此处显示的技术：http: [//tanalin.com/en/articles/css-block-order/](http://tanalin.com/en/articles/css-block-order/)

> 可以使用 display: table family 的属性使用 CSS 表格表示来更改 HTML 页面上块的垂直顺序。不论HTML代码中的块顺序，`table-header-group`该表格的页眉（ ）显示在它的顶部，页脚（`display: table-footer-group`） - 在底部，表格主体（`table-row-group`） - 在页眉和页脚之间。

这适用于所有现代浏览器，如果你小心的话，还有 IE8。它在 IE6/7 中不起作用*。*

这是您使用此技术的代码：http: [//jsfiddle.net/thirtydot/7hCNC/35/](http://jsfiddle.net/thirtydot/7hCNC/35/)

我不得不承认我从未在生产网站上使用过这种技术，所以请彻底测试。

一种适用于[所有支持 CSS3 2D 转换的浏览器](http://caniuse.com/transforms2d)的不同方法是垂直翻转整个容器，然后对“图像”和“文本”元素执行相同操作。在不支持 CSS3 转换的浏览器中，一切仍然有效，但“图像”和“文本”元素将按照原来的顺序排列。换句话说，它会很好地降解。使用 IE6-8 可能会使其工作`filter`，但这会使文本看起来很糟糕，所以忘记它。

这是您使用此技术的代码：http: [//jsfiddle.net/thirtydot/7hCNC/36/](http://jsfiddle.net/thirtydot/7hCNC/36/)

如果这些 CSS 方法都不够好，您将不得不使用 JavaScript。

不过，我个人建议你只[在 HTML 中切换顺序](http://jsfiddle.net/thirtydot/7hCNC/37/)。我怀疑谷歌是否关心[它](https://stackoverflow.com/questions/10412896/move-the-first-div-appear-under-the-second-one-in-css#comment13434314_10412896)。在这种情况下，我真的怀疑向后弯曲以使您的 HTML 保持在“最佳顺序”是否会对 SEO 产生任何有意义的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:22:30.683

添加到 CSS 中的浮动 div **“clearfix”**类

```
.clearfix:before, .clearfix:after { content: "\0020"; display: block; height: 0; overflow: hidden; }
.clearfix:after { clear: both; }
.clearfix { zoom: 1; } 
```

例如：

```
<div class="column clearfix">
...
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:17:44.347

您可以将宽度更改为精确宽度（或将其添加为最小宽度）并让它们自然地相互落下，或者简单地清除这将迫使它们相互落下

例如

```
.clear {
  clear:both;
} 
```

你的[jsfiddle](http://jsfiddle.net/7hCNC/23/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:25:49.367

这是clear的另一个例子。我喜欢在清除后的元素并不总是一致的情况下使用它。它使用伪元素来放置具有 clear 属性的空间。

```
.clear:after{
content:"."; 
line-height:0; 
height:0; 
display:block; 
clear:both; 
visibility:hidden;
} 
```

# php - 无法在服务器上上传文件

> ID：10414479
> 
> 赞同：1
> 
> 时间：2012-05-02T13:13:02.280
> 
> 标签：php, javascript, jquery

我正在尝试使用此示例[http://www.sajithmr.me/jrecorder/example2.html](http://www.sajithmr.me/jrecorder/example2.html)录制音频并将其发送到我的本地主机服务器，但我在这里遇到问题。我的代码描述如下

```
<script>

   $.jRecorder(

     { 
        host : 'http://localhost/Jrec/html/acceptfile.php?filename=hello.wav',  
        callback_started_recording:     function(){callback_started(); },
        callback_stopped_recording:     function(){callback_stopped(); },
        callback_activityLevel:          function(level){callback_activityLevel(level); },
        callback_activityTime:     function(time){callback_activityTime(time); },
        callback_finished_sending:     function(time){ callback_finished_sending() },
        swf_path : 'jRecorder.swf',

     }
   );
   </script> 
```

这是我的 acceptfile.php

```
 if(!isset($_REQUEST['filename']))
   {
     exit('No file');
   }

   $upload_path = dirname(__FILE__). '/';

   $filename = $_REQUEST['filename'];

   $fp = fopen($upload_path."/".$filename.".wav", "wb");

   fwrite($fp, file_get_contents('php://input'));

   fclose($fp);

   exit('done'); 
```

我应该如何处理 $upload_path = dirname( **FILE** )。'/;?
当我按下发送数据按钮时，文件不会上传到以下目录（“文件”）。这里有什么问题，任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:48:36.113

就像*Shikiryu*和*seth flowers*说的那样。但请记住从文件名中删除 .wav ，因为它在此处添加了扩展名 .wav ： `$fp = fopen($upload_path."/".$filename.".wav", "wb");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T04:27:33.037

另请注意文件路径变量中连接的 2 个正斜杠“/” `$fp`。

*   第一个来自`$upload_path`
*   第二个从`$fp`

这假设您将在您的目录中创建一个文件夹来存储声音文件。

`$fp = fopen($upload_path."NAME_OF_FOLDER/".$filename.".wav", "wb");`

# javascript - JQuery 删除指定 Div（Facebook 标签）内的所有内容

> ID：10414483
> 
> 赞同：0
> 
> 时间：2012-05-02T13:13:08.713
> 
> 标签：javascript, jquery

我正在使用这个：

```
$('#myLink').click(function () {
    $('#MainDIV').empty();
}); 
```

在哪里：

```
<div id="MainDIV">
    <fb:like href="somelinketc">....</fb:like>
</div> 
```

我需要里面`<div id="MainDIV">`的所有东西都消失，但我正在检查 Firefox，它仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:44:15.237

用这种方法试试。

`$(document).ready(function(){`

```
$('#myLink').click(function(){

document.getElementById('MainDIV').innerHTML="";
});
}); 
```

我认为这是一种简单的方法来覆盖元素中的现有数据，使其消失或根据您的要求更改内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:22:55.910

您的 .click() 函数中存在错误。它应该以这样的括号结尾：

```
}); 
```

而不是这样：

```
)}; 
```

应该修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:24:42.770

您应该阻止链接的点击操作[`preventDefault()`](http://api.jquery.com/event.preventDefault/)

```
$('#myLink').click(function (e) {
    e.preventDefault();
    $('#MainDIV').empty();
}); 
```

我也不确定，但你上面的帖子有错字。`)}`应该是`})`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:17:42.890

```
$("#MainDIV").html(''); 
```

这将清除 div 的所有内容。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-02T13:17:34.057

```
$('#myLink').click(function () {
    $('#MainDIV').hide(1);
)}; 
```

# plsql - SQL Developer：加载数据日期错误

> ID：10414485
> 
> 赞同：-2
> 
> 时间：2012-05-02T13:13:18.000
> 
> 标签：plsql, oracle-sqldeveloper

我正在使用 Oracle SQL Developer 3.0.03。我正在尝试将 Excel 文件上传到 Oracle 数据表。我收到日期错误。数据库中的列是时间戳，我不知道将什么放入“数据加载向导”的日期格式中。如果我使用以下格式（dd-mom-yy hh.mi.ss），SQL Developer 将显示以下错误：

```
--Insert failed for row  1 TIMESTAMP_COLUMN GDK-05047: A day of the month must be between 1 and the last day of the month.
--Row 1
INSERT INTO TABLE_1 (Column1, Column2, Column3, TIMESTAMP_COLUMN) VALUES ('Some Text','Some Text','Some more text',to_timestamp('40604.0', 'dd-mon-yy hh.mi.ss')); 
```

EXCEL 中的默认数字格式为：40604.0 如果您将单元格更改为短日期格式，您将获得：3/2/2011

我试图弄清楚我需要将什么“格式”放入“数据加载向导”的“格式”部分，该部分将接受 EXCEL 中的日期格式并将其作为 TIMESTAMP 上传到 Oracle。

![在此处输入图像描述](../Images/a962f9ec1e71e030d9eab38f2f82c682.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:12:16.143

我今天遇到了同样的事情，并以两种方式“修复”了这两种方式。第二种方法可能看起来太复杂了，但如果他们很难自动格式化日期以使其看起来像 Oracle 的标准 dd-mmm-yy，它可能会有所帮助。

1.  将 Excel 中的日期列格式化为 dd-mmm-yy 并直接导入表中。
    *   突出显示列
    *   选择现有格式所在的“更多数字格式”（在 Excel 2010 中，“主页”选项卡上的下拉框中显示“常规”
    *   在类别框中选择最后一个条目“自定义”
    *   在 Type: 框中手动输入 dd-mmm-yy

2.  将 Excel 中的日期列格式化为 mm/dd/yy，将表导入为文本，使用从临时文本表中编写手动插入语句`TO_DATE(date_field,'MM/DD/YYYY')`
    *   突出显示列
    *   选择现有格式所在的“更多数字格式”（在 Excel 2010 中，“主页”选项卡上的下拉框中显示“常规”
    *   在类别框中选择“日期”条目
    *   从列表中选择“03/14/01”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:47:49.033

是的，这就是问题所在。

"**一个月中的某一天必须介于 1 和该月的最后一天之间。** "

**1）**这些小数是如何创建的？

**2）**这是“ **04-06-2004** ”吗？还是这些秒是从 1970 年开始的？

您需要添加有关此数字格式的更多详细信息！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:12:24.493

Excel“零”日期是 1900 年 1 月 0 日（是的，零）。由于 Oracle 无法处理一个月中的“零”日，因此您需要从 Excel 值中减去 1；因此，以下内容应该让您接近您想要的：

```
SELECT CAST(TO_DATE('01-JAN-1900 00:00:00', 'DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP) +
           NUMTODSINTERVAL(41017.6361109954 - 1, 'DAY')
  FROM DUAL 
```

就“如何导入它”而言，我知道没有 Oracle 日期格式可以做到这一点。最简单的方法是将值导入 NUMBER 列，然后运行脚本进行日期转换。

分享和享受。

# jquery - 根据使用 jquery 选择另一个下拉列表来显示/隐藏下拉列表

> ID：10414487
> 
> 赞同：0
> 
> 时间：2012-05-02T13:13:26.487
> 
> 标签：jquery, jquery-ui, drop-down-menu

我需要根据父下拉列表上的选择显示特定的下拉列表并隐藏其他下拉列表。例如，我有将进行选择的父下拉列表：

```
<select id="DropDownList1">
                    <option value="Schemes1">Schemes1</option>
                    <option value="Schemes2">Schemes2</option>
                    <option value="Schemes3">Schemes3</option>
                </select> 
```

其他 3 个列表是：

```
 <p>Schemes1 List</p>
                <select id="DropDownList2">
                <option value="product1">Camera</option>
                <option value="product2">DVD</option>
                <option value="product3">AC</option>
            </select>
            <p>Schemes2 List</p>
                <select id="DropDownList3">
                <option value="product4">bat</option>
                <option value="product5">ball</option>
                <option value="product6">complete kit</option>
            </select>
            <p>Schemes3 List</p>
                <select id="DropDownList4">
                <option value="product7">laptop</option>
                <option value="product8">HD</option>
                <option value="product9">RAM</option>
            </select> 
```

因此，如果选择了方案 1，则应显示方案 1 列表，而应隐藏其他列表，反之亦然，有关如何使用 jquery 使其工作的任何想法

更新 ：

```
 $('#login').click(function (e) {
                    e.preventDefault();

                    $("#dialog-form").dialog("open");
                }); 
```

对话框表单有所有的下拉列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:17:25.197

```
$("#DropDownList1").change(function(){
    indx = $("#DropDownList1 option:selected").index();
    indx +=1;
    $("#DropDownList2,#DropDownList3,#DropDownList4").each(function(){
       $(this).hide();
    });
   $("#DropDownList"+(indx+1)).show()
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:22:48.433

```
$('#DropDownList1').change(function(){
    id = $(this).val().replace('Scheme',''); //get id
    $('#DropDownList2,#DropDownList3,#DropDownList4').hide();
    $('#DropDownList'+id).show();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:35:59.783

我会修改 HTML 来简化 javascript；

**HTML**

```
<select id="DropDownList1">
     <option value="DropDownList2">Schemes1</option>
     <option value="DropDownList3">Schemes2</option>
     <option value="DropDownList4">Schemes3</option>
</select>

<p>The other 3 list are:</p>

<p>Schemes1 List</p>
<select id="DropDownList2" class="toggledDropDown">
    <option value="product1">Camera</option>
    <option value="product2">DVD</option>
    <option value="product3">AC</option>
</select>

<p>Schemes2 List</p>
<select id="DropDownList3" class="toggledDropDown">
    <option value="product4">bat</option>
    <option value="product5">ball</option>
    <option value="product6">complete kit</option>
</select>

<p>Schemes3 List</p>
<select id="DropDownList4" class="toggledDropDown">
    <option value="product7">laptop</option>
    <option value="product8">HD</option>
    <option value="product9">RAM</option>
</select>​ 
```

**JavaScript**

```
$('#DropDownList1').change(function() {

    // Hide all drop downs sharing the CSS class "toggledDropDown".
    $('.toggledDropDown').hide();

    // Build a selector for the selected drop down
    var selector = ('#' + $(this).val());

    // Show the selected drop down
    $(selector).show();

}); 
```

[**查看演示**](http://jsfiddle.net/BRDRY/)

# html - 如何将 JayData 与 Knockout 集成

> ID：10414489
> 
> 赞同：2
> 
> 时间：2012-05-02T13:13:31.100
> 
> 标签：html, knockout.js, jaydata

我正在评估将 Knockout 与 JayData 一起使用以创建独立的 Web 应用程序。按照本教程（http://jaydata.org/tutorials/creating-a-stand-alone-web-application），我似乎可以将我的数据存储在 iPhone、Android 和 HTML5 浏览器中......

我不确定如何将 JavaScript 查询语言与 Knockout 一起使用。我已经看到他们会有一些支持，但我可能你知道我自己该怎么做。

我不确定 Knockout 是否适合混合应用程序的 UI 库，希望您能分享一些诀窍。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:38:43.583

**更新**：JayData 从 1.1.0 版开始具有 knockoutjs 集成模块。在您的 html 页面中包含“jaydatamodules/knockout.js”，并让 JayData 使用 entity.asKoObservable() 提供 Knockout observables。使用这个模块 queryable.toArray() 接受 ko.ObservableArrays 作为目标，用 kendo 可观察实体填充它。

自定义绑定正是您所追求的集成方式。您必须将与 JavaScript 对象交互的 knockoutjs 方式与 JayData 实体元数据函数及其`propertyChanged / propertyChanging`事件联系起来。

完成这项任务应该不难，因为 JayData 也支持简单的属性表示法 ( `object.property`) 和异步属性访问器模式（get_property(cb)、set_property(cb)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:31:15.620

这是一个[示例](http://jaydata.org/examples/Knockoutjs/Northwind.html)它可能集成在最近的版本中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:21:20.263

您可以通过[Custom Bindings](http://knockoutjs.com/documentation/custom-bindings.html)将 Knockout 与 jQuery 集成。这回答了您关于集成的问题。自定义绑定允许您与任何 JavaScript UI 库集成，而不仅仅是 jQuery。

关于你的第二个问题...... Knockout 真的不是一个 UI 库。它更像是一个促进 DOM 对象和 JavaScript 对象之间数据绑定的框架。它用于按照[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)设计范式设计 Web 应用程序。

# jquery - 来自 AJAX 请求的 jqPlot ASP.NET 中的 dataRender

> ID：10414491
> 
> 赞同：2
> 
> 时间：2012-05-02T13:13:34.343
> 
> 标签：jquery, asp.net, jqplot

我正在尝试从 AJAX 请求呈现 jqPlot 条形图，但我无法让它工作。

我有以下 JavaScript 代码：

```
var ajaxDataRenderer = function (url, plot) {
   var ret = null;
   $.ajax({
      // have to use synchronous here, else returns before data is fetched
      async: false,
      url: url,
      contentType: "application/json; charset=utf-8",
      dataType: 'json',
      success: function (data) {
         ret = data;
      }
   });
   return ret;
};

var jsonurl = "WebService1.asmx/HelloWorld";

plo12 = $.jqplot('chart2', jsonurl, {
   title: 'AJAX JSON Data Renderer',
   dataRenderer: ajaxDataRenderer,
   seriesDefaults: {
      renderer: $.jqplot.BarRenderer,
      rendererOptions: {
         // Put a 30 pixel margin between bars.
         barMargin: 30,
         // Highlight bars when mouse button pressed.
         // Disables default highlighting on mouse over.
         highlightMouseDown: true
      },
      pointLabels: { show: true }
   },
   axes: {
      xaxis: {
         renderer: $.jqplot.CategoryAxisRenderer
      },
      yaxis: {
         // Don't pad out the bottom of the data range.  By default,
         // axes scaled as if data extended 10% above and below the
         // actual range to prevent data points right on grid boundaries.
         // Don't want to do that here.
         padMin: 0
      }
   },
   legend: {
      show: true,
      location: 'e',
      placement: 'outside'
   }
}); 
```

我的`WebService1.asmx`样子是这样的：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService {

    [WebMethod]
    [ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
    public string HelloWorld()
    {
        return "[[2],[7],[14]]";
    }
} 
```

我已经看到[了这个](https://stackoverflow.com/questions/7013650/jqplot-does-not-show-ajax-data)解决方案，但我对此并不陌生，我无法弄清楚我的问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T12:17:35.253

您可以尝试设置 ret = [data]

jqPlot 需要一个数组格式的对象来呈现图表。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:59:35.310

我正在通过 GWT 使用这个 JQplot 库。确保您已加载 .JS 文件，如 jquery.jqplot、bar 渲染等。我认为它会起作用，或者如果您已经检查过，我可能是错的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:59:29.003

请注意，在您提供的解决方案的链接中`/`，jsonurl 字符串的前面。这也可能是它。

这也可以通过您发送的请求的 url 看到，例如，在`firebug`控制台中。

否则，您可以仔细检查该方法是否返回任何内容？只需在没有图表的情况下运行它并将它提供给控制台的任何内容输出即可。

除此之外，我认为`js`代码中没有任何问题。

# c# - 指数数组的边界之外

> ID：10414499
> 
> 赞同：0
> 
> 时间：2012-05-02T13:14:14.400
> 
> 标签：c#, visual-studio-2010

这是我收到错误“索引超出数组范围”的代码。

```
var objectData = new object[colRindas.Count, 4];
     int i = 0;
     foreach (DeArtIzm izm in colRindas)
     {
         objectData[i, 1] = izm.ArtCode;
         objectData[i, 2] = izm.ArtName;
         objectData[i, 3] = izm.Price;
         objectData[i, 4] = izm.RefPrice;
         i++;//Place where I get that error
     } 
```

似乎是什么问题野兔，因为我找不到问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T13:15:49.117

数组是 0 索引而不是 1。

```
foreach (DeArtIzm izm in colRindas)
     {
         objectData[i, 0] = izm.ArtCode;
         objectData[i, 1] = izm.ArtName;
         objectData[i, 2] = izm.Price;
         objectData[i, 3] = izm.RefPrice;
         i++;//Place where I get that error
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:16:03.823

在 C# 中，数组默认从零开始（即第一个元素的索引为 0）。

所以你需要以 开头，以`objectData[i, 0]`结尾`objectData[i, 3]`。

# iphone - 如何将引用从 AppDelgate 中的对象传递给 ViewControllers

> ID：10414502
> 
> 赞同：2
> 
> 时间：2012-05-02T13:14:23.247
> 
> 标签：iphone, ios, ipad, ios5, coremidi

我在 Xcode 中使用情节提要创建了一个应用程序。该应用程序包含一个 UITabBarController (TBC) 和一些 UIViewControllers (VC)，由 TBC 控制。

在 AppDelegate 中创建一个对象（我们称之为“myMidi”），它将监听传入的 MIDI 消息（CoreMidi）。所以我在我的 VC 中实现了这个 myMidi-Object 的接口。我使用 Interface Builder (IB) 中的“Relationship”选项将视图连接到 TBC。

在 IB 中创建的所有 VC 都是我自己的 VC 类的一个实例。正如我之前提到的，在这个类中，我实现了我在 AppDelegate 中创建的 myMidi-Object 的接口。因此，每个 VC 实例都拥有一个 myMidi-Object 的地址，现在需要在 AppDelegate 中创建的唯一引用。

所以我想知道如何访问当前显示的当前 VC 或 TBC 以将此引用传递给我的 VC 类？

或者我还能如何解决这个问题。我想我应该在 AppDelegate 的某个地方执行此操作，或者我也应该在 TBC 中保存引用并在创建 VC 时将其传递给每个新的 VC！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:22:07.070

如果我理解正确，您希望您`MyMidi`的 VC 可以使用您班级的当前（唯一？）实例吗？

如果您只有一个实例，请考虑创建`MyMidi`一个单例类并给它一个类方法`+ (MyMidi *)sharedInstance;`，它总是返回（并延迟初始化）相同的对象。这样，您可以从任何地方访问它。

请参阅[这个问题](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)，了解如何在 Cocoa/Cocoa Touch 中实现单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:24:11.250

使用 nsdefaults`setObjec:forKey:`传递对象并将其获取到您想要的位置。或者在 appdelegate 中创建一个属性并通过它访问它

```
AppDelegate* appDelegate = (TappAppDelegate*) [[UIApplication sharedApplication] delegate];
appDelegate.object = yourObject; 
```

# c++ - 在paint() 中出现 SEHException - .NET 处理正在破坏调用堆栈

> ID：10414503
> 
> 赞同：2
> 
> 时间：2012-05-02T13:14:27.143
> 
> 标签：c++, exception, stack-trace, callstack, crash-dumps

我有错误处理代码，旨在捕获未处理的异常，然后创建转储。

现在，我遇到了一些在本机代码和托管代码之间转换时效果不佳的情况。

例如，如果在一个`Paint()`事件中我调用了一些本机代码，并且该本机代码引发了异常。
消息循环调度程序将捕获本机异常，然后重新抛出 .NET `SEHException`。
托管 COM 对象的 DLLS 有时也会发生同样的情况。

这样做的问题是，由于堆栈回滚以及它捕获并`SEHException`从本机异常创建的方式，实际的本机调用堆栈被破坏了。

我可以使用 以某种方式获得本机调用堆栈`SEHException`吗？（请注意，SEHException 中的调用堆栈是 CLR 调用堆栈）。

或者我可以设置应用程序以便它以某种方式保存调用堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:19:30.647

试试 !dumpheap -type SEHException 。使用 SEHException 的地址打印 !pe***异常地址***。您将获得调用堆栈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:40:54.363

发生的情况是**.Net**`Paint()`在需要绘制窗口时调用。
显然**.Net**使这非常安全，并增加了额外的预防措施和错误处理。

现在我的`Paint()`事件称为**C++/CLI**包装器 dll，它称为本机**C++** dll。本机**C++**异常引发了**访问冲突**异常。

现在**.Net**捕获了该异常，并将其包装为托管`SEHException`对象，并且我已经丢失了实际错误点的所有调用堆栈。

***解决方案：***

**我们需要在.Net**异常处理之前捕获异常。
通常的异常处理流程可以在网上找到，但是这个站点给出了实际流程的一个很好的例子：**[异常处理程序](http://blogs.msdn.com/b/zhanli/archive/2010/06/25/c-tips-addvectoredexceptionhandler-addvectoredcontinuehandler-and-setunhandledexceptionfilter.aspx)**

.Net 似乎在调用**SetUnhandledExceptionFilter**处理程序之前捕获了异常并将它们包装起来。

因此，我添加了第一次机会异常处理程序，**`AddVectoredExceptionHandler`**并通过检查错误代码来检查致命异常。

```
//SEH exceptions have code 0xC0000xxxx
#define SEH_TYPE (DWORD)0xC0000000L 
//mask the last byte
#define SEH_MASK (DWORD)0xFF000000L 
    LONG WINAPI CheckForSEHException( struct _EXCEPTION_POINTERS *lpTopLevelExceptionFilter)
    {   
        if ((lpTopLevelExceptionFilter->ExceptionRecord->ExceptionCode & SEH_MASK) == SEH_TYPE) //mask and check the last bits if it's an SEH exception
        {
            //handle exception here (create a dump or something)
            return EXCEPTION_EXECUTE_HANDLER;
        }
        return EXCEPTION_CONTINUE_SEARCH;
    } 
```

异常代码可以在**WinBase.h**中找到，您可以按照实际错误代码的定义进行操作。（即寻找`EXCEPTION_ACCESS_VIOLATION`）

# android - Android：请求按钮而不是EditText的焦点

> ID：10414507
> 
> 赞同：0
> 
> 时间：2012-05-02T13:14:33.330
> 
> 标签：android, android-button

我的滚动布局中有一些编辑文本。在底部，我有一个按钮。

实际上，在每次打开视图时，第一个 editText 都会自动请求焦点。我希望按钮获得焦点。

我试过这个，但没有成功：

```
final ScrollView s = (ScrollView)findViewById(R.id.ScrollView01);
    s.post(new Runnable() {
       public void run() {
             Button button =(Button) findViewById(R.id.SaveProfileEditingButton);
             button.requestFocus();
       }
    }); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:18:37.550

设置`android:windowSoftInputMode="stateHidden"`为您在**AndroidManifest.xml**中的活动以隐藏键盘（由于关注 EditText 而打开）。之后您的其他视图可能会获得焦点。

* * *

**更新**

```
final ScrollView s = (ScrollView)findViewById(R.id.ScrollView01);
s.post(new Runnable() {
       public void run() {
             EditText editText =(EditText) findViewById(R.id.yourEditText);
             (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE))
                   .hideSoftInputFromWindow(editText.getWindowToken(), 0);

             Button button =(Button) findViewById(R.id.SaveProfileEditingButton);
             button.setFocusable(true);
             button.requestFocus();
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:19:37.003

您的代码正在运行，但是您如何检查或将焦点设置在 Button 上有何意义。检查它是否工作或不使用

```
boolean r = btn.requestFocus();
Log.i("Tag", String.valueOf(r)); 
```

# graphics - 低级图形编程和 ZBrush

> ID：10414512
> 
> 赞同：4
> 
> 时间：2012-05-02T13:14:57.370
> 
> 标签：graphics, 3d, modeling

经过一段时间的 3d 建模并享受 ZBrush 无可挑剔的性能和众多功能后，我认为创建类似的东西，只是一个小型雕刻工具，对我来说将是很好的 OpenGL 实践。果然我做到了，我当然无法与 ZBrush 的表现相提并论，因为一大队高薪专业人士如何胜过业余爱好者。目前我只是假设 ZBrush 是高度硬件加速的，想象一下当我发现它不是而且它既不使用 opengl 也不使用 direct3d 时我的惊讶。

这让我想在较低的水平上学习图形，但我不知道从哪里开始。图形库是如何制作的以及如何在不使用 opengl 的情况下访问帧缓冲区。在没有任何预先存在的工具的情况下仅显示一个像素会有多麻烦，以及 ZBrush 具有如此性能的魔力是什么。

我将不胜感激有关任何问题的任何信息以及对涵盖任何这些主题的书籍的推荐。我已经在阅读 Michael Abrash 的图形编程黑皮书，但它并没有真正解决这些问题，或者我还没有达到这一点。

先感谢您。

（请不要发布诸如“仅使用 opengl”或“学习数学”之类的答案，这似乎是我发布此问题的所有地方的反应，但这些回复与主题无关）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-12-27T02:55:50.647

ZBrush 在性能方面非常出色，但我认为这是因为它是由具有组装专业知识的图像处理专家制作的（这也可能是由于他们在移植到 64 位方面迟了近 20 年的大量组装代码） . 它实际上开始时没有任何类型的 3D 雕刻，只是一个 2.5D“像素”画家，您可以在画布上喷涂像素，并为“像素”提供一些深度和照明。它直到 ZB 1.5 左右才开始雕刻。即便如此，当使用 Photoshop 或 Corel Painter 仅绘制平面像素的类似大小的画笔会导致帧率出现断断续续时，它仍然给人们留下了深刻的印象，您可以将这些 2.5D“像素”喷在画布背面的速度有多快。因此，他们甚至在处理任何 3D 问题之前就已经在性能上处于领先地位，并且只是在画布上喷涂像素；这往往需要一些精英的微优化魔法。

当您使用 ZB 雕刻 2000 万个多边形模型时，需要注意的一件事是它甚至不使用 GPU 光栅化。所有的光栅化都是在 CPU 中完成的。因此，它并不能从具有大量 VRAM 支持最新 GLSL/HLSL 版本的强大显卡中受益；它所需要的只是可以将彩色像素绘制到屏幕上的东西。与 MudBox 相比，这可能是它使用如此少内存的原因之一，因为它不必使用 VBO 将内存使用量增加三倍（这往往会使系统内存使用量翻倍，同时还需要数据存储在 GPU 上）。

至于你如何开始使用这些东西，IMO 让你的脚湿透的一个好方法是编写你自己的光线追踪器。我不认为 ZBrush 使用扫描线光栅化，它的成本往往会随着你拥有的多边形越多而成比例地上升，因为它们会减少在旋转模型时渲染的像素数量。这表明他们用于光栅化的任何技术在性能方面更依赖于被渲染的像素数量，而不是被渲染的图元（顶点/三角形/线/体素）的数量。光线追踪符合这些特征。此外，恕我直言，光线追踪器实际上比扫描线光栅器更容易编写，因为您不必费心处理棘手的情况，而且消除过度绘制是免费的。

一旦你得到一个操作成本与渲染像素数量成比例而不是几何数量成正比的软件，那么你就可以向它扔一大堆多边形，就像他们在演示 2000 万时所做的那样大约 17 年前，在 Siggraph 上以柔滑的帧速率进行多边形雕刻。

但是，要让光线追踪器以交互方式更新以响应不仅以交互方式雕刻而且有时还以交互方式更改其拓扑的网格数据是非常困难的。因此，他们很可能正在使用不同于光线追踪中流行的标准 BVH 或 KD-Tree 的其他数据结构，而是非常适合动态网格的数据结构，这些网格不仅变形而且拓扑结构也发生了变化。也许他们可以非常快速地对网格进行体素化和再体素化（或“像素化”和“再像素化”），并将光线直接投射到体素化表示中。考虑到他们的技术最初是如何围绕这些具有深度的 2.5D“像素”旋转的，这将开始变得有意义。

无论如何，我建议开始光线追踪，即使它只是让你的脚湿透并且让你离 ZB 的性能还很远（它仍然是如何将 3D 几何和照明转换为有吸引力的 2D 图像的一个很好的开始） . 您可以在网络上找到仅用一百行代码编写的光线追踪器的最小示例。构建光线追踪器的大部分工作通常是性能以及处理丰富多样的着色器/材质。您不一定需要为后者而烦恼，ZBrush 也不需要那么多（他们使用这些非常便宜的 matcaps 进行建模）。然后，您可能必须创新某种非常适合网格更改的数据结构，以开始与 ZB 相提并论并对其进行微调。

我同样受到 ZB 的启发，但没有直接追随他们的脚步，而是使用 GPU 光栅化器和 OpenGL。我发现很难像 ZB 那样探索在 CPU 上做所有这些事情的原因之一是因为你失去了游戏引擎、NVidia 和 AMD 已经在实时光照模型中提出的大量工业研究和革命性技术的好处等等，所有这些都受益于 GPU 端处理。有 99% 的 3D 行业，然后 ZBrush 在它自己的小角落里做着其他人没有做的事情，你需要大量的空闲时间，也许还有很多球来放弃行业的其他部分并尝试跟进ZB的脚步。

我最接近 ZB 性能的是在 90 年代后期，在 256MB RAM 的 Athlon T-Bird 1.2ghz 上以超过 30 FPS 的速度雕刻 200 万个多边形网格，这是经过 6 周的密集编程和重新审视绘图之后在一个非常简单的演示中一遍又一遍地进行演示，那是非常难得的一次，我的公司给了我这么多研发时间来探索 ZB 正在做什么。尽管如此，即使在当时，在相同的硬件上并使用一半的内存，ZB 仍以相同的帧速率处理 5 倍的几何图形。我什至无法接近，尽管我最终对 Pixologic 的程序员产生了新的尊重和钦佩。我也不得不坚持到我的公司做研究。那里的一些人认为 ZBrush 永远不会成为任何值得注意的东西，只会成为一个可爱的艺术应用程序。

当时很多人认为 ZB 处理这么多多边形的能力是不切实际的，您可以只绘制凹凸/法线/置换贴图并将所需的任何细节添加到纹理中。但这忽略了工作流程方面的事情。当您可以直接处理大量几何图形时，您可以统一应用相同的工具和工作流程来选择顶点、多边形、边缘、刷过事物等。它成为创建如此详细和复杂的模型的最直接方法，然后您可以将细节烘焙到凹凸/法线/位移贴图中，以用于其他引擎，这些引擎会在 2000 万个多边形上呕吐。如今，我认为没有人仍然质疑 ZB 的实用性。

> [...] 但它并没有真正解决这些问题，或者我还没有达到这一点。

需要注意的是，没有人发表任何关于如何实现与 ZB 相媲美的性能的文章。否则，在雕刻、dynamesh、zspheres 等方面，会有许多应用程序可以与它的性能和功能相媲美，而且它不会那么特别。你肯定需要你的研发份额来提出任何接近它的东西，但我认为光线追踪是一个好的开始。在那之后，除了大量的微调之外，您可能还需要为算法和数据结构提出一些非常有趣的想法。

我可以相当有信心地说：

1.  它们有一些中央数据结构来加速光栅化，可以极快地更新以响应用户对网格所做的更改（包括拓扑结构）。
2.  光栅化的成本与渲染的像素数量成正比，而不是与 3D 输入的大小成正比。
3.  那里有一些微优化魔法，包括直接的汇编编码（我很确定 ZB 使用汇编编码，因为他们最初要求程序员在 2000 年代招聘时同时具备汇编和 C++ 知识；我真的很想在 Pixologic 工作，但缺乏必备的组装技能）。
4.  鉴于模型是如此动态，无论他们使用什么都对内存要求非常轻。上次我检查时，即使在带有纹理贴图的生产模型中加载时，它们每百万多边形使用不到 100MB。除 XSI 之外的其他竞争 3D 软件可以为相同的数据占用千兆字节。XSI 使用的内存甚至比 ZB 的 gigapoly 内核还要少，但不适合处理此类数据，速度慢得像爬行（他们可能以仅适合静态数据的方式优化它，例如将数据卸载到磁盘甚至使用一些昂贵的压缩形式）。

如果你真的有兴趣探索这个，我很想看看你能想出什么。也许我们可以交换笔记。我的大部分职业生涯都只是对弄清 ZB 正在做什么感兴趣，或者至少想出一些可以与它正在做的事情相媲美的自己的东西。对于我多年来处理的几乎所有其他事情，从光线追踪到粒子模拟到流体动力学和视频处理等等，我至少能够提出可以与竞争对手相媲美或超越性能的演示，但是不是ZBrush。ZBrush 仍然是我身边难以捉摸的刺，我只是无法弄清楚他们是如何做到如此高效地完成他们的工作的。

如果你真的想在开始走路之前爬行（我认为光线追踪是一个足够好的开始，但如果你想从更基础的开始），那么自然的进化可能是首先只关注图像处理：过滤图像，用画笔等绘画它们，以及对基本矢量图形的一些支持，如微型 Photoshop/Illustrator。然后逐步对一些基本的 3D 图元进行光栅化，例如使用 Wu 线光栅化和一些基本投影函数渲染模型的线框。然后在没有任何照明或纹理的情况下对填充的三角形进行光栅化，此时我认为你会更接近 ZBrush，专注于光线跟踪，而不是使用深度缓冲区的扫描线。但是，无论如何，做一点后者可能是一个有用的练习。然后处理渲染光照三角形，可能从直接照明和单个光源开始，仅根据法线相对于光源的角度计算亮度。然后使用海湾中心坐标处理纹理三角形，以确定要渲染的纹素。然后朝着间接照明和多个光源的方向努力。这应该是大量的功课，可以让您对光栅化的基础知识有一个相当全面的想法。

现在，一旦您开始进行光线追踪，我实际上会推荐一种效率最低的数据结构，通常是：八叉树，而不是 BVH 或 KD-Tree，主要是因为我相信八叉树可能更接近于 ZB 允许的情况。在这种情况下，您的瓶颈与使用复杂的漫反射材质和间接照明以及用于抗锯齿的亚像素样本渲染最漂亮的图像无关。它与使用简单的照明和简单的着色器以及每个像素一个样本处理大量几何图形有关，这些样本是动态变化的，包括拓扑变化。在这种情况下，八叉树似乎比 KD-tree 或 BVHs 更适合作为起点。

如今忽略基本原理的问题之一是，许多年轻的开发人员已经失去了从三角形到屏幕上的像素的联系。因此，如果您不想将这种栅格化和投影视为理所当然，那么您最初的目标是将 3D 数据投影到 2D 坐标空间中并对其进行栅格化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:21:31.183

如果您想要一本从低层次开始的书，带有帧缓冲区等，请尝试由 Foley、van Dam 等人撰写的《*计算机图形学：原理与实践》。*它是一种较旧的传统文本，但较新的书籍往往具有更高层次的观点。对于更现代的文本，我还可以推荐Alan Watt 的*3D Computer Graphics*。还有很多其他很好的介绍性文本——这些只是我个人熟悉的两本。

上述两本书都与 OpenGL 无关——如果我没记错的话，它们包含了自下而上理解和实现 3D 图形所需的特定数学和算法。

# ruby-on-rails - Rails 更改 form_for 中提交的路由

> ID：10414514
> 
> 赞同：18
> 
> 时间：2012-05-02T13:15:05.077
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, form-submit

我有一个模型“文章”和一个嵌套在文章中的模型“评分”。

/articles/123/评级

我想更改 rating/_form.html.erb 中 f.submit 的路由，现在是这样，按下提交后，我的应用程序路由到

/评分/111

但我想把它路由到

/文章/123

如何更改 form_for f.submit 按钮中的路由。我在这里找到了这样的东西：

```
<% form_for :thing, :url => 
 url_for(:action => "update", :id => @thing) do |f| %> 
```

但这不适用于我的 rails 3.2。谢谢你的帮助，

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-02T13:22:34.050

:url - 表单提交到的 URL。它采用您传递给 url_for 或 link_to 的相同字段。特别是，您也可以在此处直接传递命名路线。默认为当前操作。

```
<% form_for :thing, :url => {:action => "update", :id => @thing} do |f| %> 
```

您还可以使用帮助程序将 path_name 传递给它。所以你也可以做类似的事情

```
:url => update_article_path(@article) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-14T01:58:16.797

试试`form_for (:thing, url:{:controller=>'thing', :action=>'update'}, html:{method:'put'})`。

# sql - 结合包含 DateDiff 的结果

> ID：10414522
> 
> 赞同：1
> 
> 时间：2012-05-02T13:15:24.387
> 
> 标签：sql, tsql

我有一份人们出院的地方的清单，我需要按年龄对他们进行分层。我目前在下面的查询有效，但它列出了每个年龄的每个放电类型计数。 ![在此处输入图像描述](../Images/555c23ce81180235f359ff552395cd77.png)

您可以查看 0-1-2-3 岁如何根据年龄对出院类型进行单独计数。我怎样才能使它只有`dischargeType`列出的和计数（只要它们是 18 岁及以下）

```
SELECT DATEDIFF(yyyy, tblVisits.dob, tblVisits.admitdate) AS Age, tblDischarge.dischargeType, COUNT(tblDischarge.dischargeType) AS COUNTS
FROM tblVisits INNER JOIN
               tblDischarge ON tblVisitsDischargeStatus = tblDischarge.dis_statID
GROUP BY DATEDIFF(yyyy,tblVisits.dob, tblVisits.Admitdate), tblDischarge.dischargeType
HAVING (DATEDIFF(yyyy,tblVisits.DOB, tblVisits.AdmitDate) <=18) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:23:16.970

如果您只想要 18 岁以下的人，但每种放电类型只有一排...

```
SELECT
  tblDischarge.dischargeType,
  COUNT(tblDischarge.dischargeType) AS COUNTS
FROM
  tblVisits
INNER JOIN
  tblDischarge
    ON tblVisitsDischargeStatus = tblDischarge.dis_statID
WHERE
  (DATEDIFF(yyyy,tblVisits.DOB, tblVisits.AdmitDate) <=18) 
GROUP BY
  tblDischarge.dischargeType 
```

如果您想将年龄分组为阶层...

```
SELECT
  tblDischarge.dischargeType,
  CASE DATEDIFF(yyyy,tblVisits.DOB, tblVisits.AdmitDate)
     WHEN <=  3 THEN '0..3'
     WHEN <=  8 THEN '4..8'
     WHEN <= 12 THEN '9..12'
                ELSE '13..18'
  END                               AS ageBand,
  COUNT(tblDischarge.dischargeType) AS COUNTS
FROM
  tblVisits
INNER JOIN
  tblDischarge
    ON tblVisitsDischargeStatus = tblDischarge.dis_statID
WHERE
  (DATEDIFF(yyyy,tblVisits.DOB, tblVisits.AdmitDate) <=18)
GROUP BY
  tblDischarge.dischargeType,
  CASE DATEDIFF(yyyy,tblVisits.DOB, tblVisits.AdmitDate)
     WHEN <=  3 THEN '0..3'
     WHEN <=  8 THEN '4..8'
     WHEN <= 12 THEN '9..12'
                ELSE '13..18'
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:23:26.483

我不确定您的问题，但如果您只想`dischargeType`按 18 岁以下的所有人计算，代码如下：

```
SELECT dis.dischargeType, COUNT(dis.dischargeType) AS COUNTS
FROM tblDischarge dis
JOIN tblVisits    vst ON vst.DischargeStatus = dis.dis_statID
WHERE (DATEDIFF(yyyy,vst.DOB, vst.AdmitDate) <= 18)
GROUP BY dis.dischargeType; 
```

或者您可以使用子查询，例如：

```
SELECT dischargeType, COUNT(dischargeType) AS COUNTS
FROM tblDischarge
WHERE dis_statID IN (
    SELECT vst.DischargeStatus
    FROM tblVisits vst
    WHERE (DATEDIFF(yyyy, vst.DOB, vst.AdmitDate) <= 18)
)
GROUP BY dis.dischargeType; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:24:04.330

删除所选内容和 Group by 部分中的 AGE：

```
SELECT tblDischarge.dischargeType, COUNT(tblDischarge.dischargeType) AS COUNTS
FROM tblVisits INNER JOIN
               tblDischarge ON tblVisitsDischargeStatus = tblDischarge.dis_statID
GROUP BY tblDischarge.dischargeType
HAVING (DATEDIFF(yyyy,tblVisits.DOB, tblVisits.AdmitDate) <=18) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:22:51.680

`SELECT`只需从和 中删除年龄计算`GROUP BY`，然后将 更改`HAVING`为 a `WHERE`：

```
SELECT tblDischarge.dischargeType,
        COUNT(tblDischarge.dischargeType) as COUNTS
FROM tblVisits 
INNER JOIN tblDischarge
  ON tblVisitsDischargeStatus = tblDischarge.dis_statID
WHERE (DATEDIFF(yyyy,tblVisits.DOB, tblVisits.AdmitDate) <=18) 
GROUP BY tblDischarge.dischargeType 
```

# node.js - 文件传输打开和关闭的奇怪 Winston 问题

> ID：10414524
> 
> 赞同：1
> 
> 时间：2012-05-02T13:15:39.470
> 
> 标签：node.js, npm, winston

我一直对温斯顿有一个奇怪的问题，正在寻找一些指导。我试图通过简单地使用关闭文件流来旋转日志

```
myTransport.transports.file.opening = true;
myTtransport.transports.file.close(); 
```

然后使用

```
myTransport.transports.file._createStream(); 
```

我试着用

```
myTransport.transports.file.open(); 
```

但是在查看代码后，这并没有按预期工作。我的问题是我得到一个

```
events.js:45
    throw arguments[1]; // Unhandled 'error' event
                   ^
Error: EBADF, Bad file descriptor 
```

一旦文件关闭，重命名，然后再次打开，就会出错。这是显示该行为的视频[的链接。](http://www.screencast.com/t/xsXEypoUuD)在 createAndFlush（第 229 行）完成并返回 self.flush（第 255 行）之后，在 file.js（文件传输）中。下一个执行直接跳转返回`return self.emit('error', err);`（第 261 行）。

任何人都可以提供的任何帮助将不胜感激。我一直在研究这个问题，现在似乎在这里或任何其他板上找不到任何关于它的信息。我知道winston 有maxFile size 和maxFiles，但这不能满足我们的需要。谢谢。

-史蒂夫

# mysql - Return different data from mysql based on a row count returned from a subquery

> ID：10414528
> 
> 赞同：3
> 
> 时间：2012-05-02T13:15:50.910
> 
> 标签：mysql

I have a table of records which are either orphaned or come in pairs. Each item has a status associated with it. I need to select a random orphaned or paired record from the table (both records if its a pair), but NOT pairs that have a status that's 0 for either one.

I have the following table:

```
 Table: things
+------------+---------++---------+
| id         | cluster | status   |
+------------+---------++---------+
| 1          |  1      | 0        |
| 2          |  1      | 1        |
| 3          |  3      | 1        |
| 4          |  4      | 1        |
| 5          |  4      | 0        |
| 6          |  6      | 1        |
| 7          |  6      | 1        |
| 8          |  8      | 1        |
+------------+---------++---------+ 
```

My query

```
SELECT 
things.id as clusterid, 
things.id as id1, 
things2.id as id2,   
(SELECT count(id) FROM things WHERE cluster= clusterid) as num_nodes
FROM things
LEFT JOIN things AS things2 ON (
    things2.status= 1  
    AND things2.cluster= things.cluster
    AND things2.id!= things.cluster)
WHERE things.status= 1 
AND things.id= things.cluster
ORDER BY RAND() LIMIT 1 
```

This query should return any of the following combinations of records at random (listing ids):

```
3
6 and 7
8 
```

My query does this, but it also returns `id 4`, which shouldn't be here since the num_nodes will return 2, but since the status of the 2nd thing in the in the cluster is 0 (`id 5`), this pair should be disregarded.

I dont know how to use the num_nodes output to properly eliminate these pairs in pure mysql.

Bonus points if the result can be 2 separate rows from the table, instead of a joined single row. So if an orphaned record that's `status = 1`, result is 1 row. If its a paired record with both things having `status = 1`, 2 rows.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:21:15.170

This bypasses the no LIMIT in subqueries limitation. Slight tweak of eggyal's original answer.

```
 SELECT * FROM things AS t WHERE cluster IN (
    SELECT * FROM (
      SELECT things.cluster 
        FROM
                    things
          LEFT JOIN things AS things2 ON (
                things2.cluster = things.cluster
            AND things2.id     != things.cluster
          )
        WHERE
              things.status = 1
          AND (things2.id IS NULL OR things2.status = 1)
          AND things.id = things.cluster
        ORDER BY RAND()
        LIMIT 1
    ) as cheese
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:34:51.743

You need to allow the `LEFT JOIN` even when the second thing from the cluster has a 0 status, then test for records that either have both things with status 1 or no second thing:

```
SELECT 
  things.id  AS clusterid, 
  things.id  AS id1, 
  things2.id AS id2,   
  (SELECT count(id) FROM things WHERE cluster = clusterid) AS num_nodes
    -- num_nodes could instead be defined as: IF(things2.id IS NULL, 1, 2)
FROM
            things
  LEFT JOIN things AS things2 ON (
        things2.cluster = things.cluster
    AND things2.id     != things.cluster
  )
WHERE
      things.status = 1
  AND (things2.id IS NULL OR things2.status = 1)
  AND things.id = things.cluster
ORDER BY RAND()
LIMIT 1 
```

* * *

To return separate rows for each thing:

```
SELECT * FROM things AS t WHERE cluster IN (
  SELECT things.cluster 
    FROM
                things
      LEFT JOIN things AS things2 ON (
            things2.cluster = things.cluster
        AND things2.id     != things.cluster
      )
    WHERE
          things.status = 1
      AND (things2.id IS NULL OR things2.status = 1)
      AND things.id = things.cluster
    ORDER BY RAND()
    LIMIT 1
) 
```

# asp.net - ASP.NET - 以编程方式控制下拉列表回发

> ID：10414529
> 
> 赞同：6
> 
> 时间：2012-05-02T13:15:51.300
> 
> 标签：asp.net, postback

我的表单-ddl1 和 ddl2 上有两个下拉列表。它们共同确定文本框 -txt1 的可见性。为此，我进行了以下检查：

```
if (ddl1.SelectedIndex==2 && ddl2.SelectedIndex>2)
   {
     if (!txt1.Visible)
        {txt1.Visible=true;// And then I want to call postback}

   }
else
   {
     if (txt1.Visible)
        {txt1.Visible=false;// And then I want to call postback}
   } 
```

如您所见，只有在上述条件为真时，我才想将页面发布到服务器。上面的代码是在两个下拉列表的 SelectedIndexChanged 事件上触发的。我怎样才能或有可能在某个条件下实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:39:44.243

我不确定我是否理解您的问题，但只有在满足特定条件时您才想实现回发。**您可以在两个下拉菜单onchange="return onchange();"**上连接一个 javascript 函数 设置自动回发=真；

```
 function Onchange() {
        var ddl1 = document.getElementById('<%= ddl1.ClientID %>');
        var ddl2 = document.getElementById('<%= ddl2.ClientID %>');
        var txtbox = document.getElementById('<%= txtbox.ClientID %>');
        if (ddl1.selectedIndex == 2 && ddl2.selectedIndex > 2) {
            txtbox.style.display = "inline";
            __doPostBack(ddl1, '');
        }
        else {
            txtbox.style.display = "none";
            return false;
        }
    } 
```

Aspx 代码应如下所示。

```
<asp:DropDownList runat="server" AutoPostBack="true" ID="ddl1" onchange="return Onchange();"
            OnSelectedIndexChanged="ddl1_SelectedIndexChanged">
            <asp:ListItem Text="text1" />
            <asp:ListItem Text="text2" />
            <asp:ListItem Text="text3" />
            <asp:ListItem Text="text4" />
        </asp:DropDownList>
        <asp:DropDownList runat="server" AutoPostBack="true" ID="ddl2" onchange="return Onchange();"
            OnSelectedIndexChanged="ddl1_SelectedIndexChanged">
            <asp:ListItem Text="text1" />
            <asp:ListItem Text="text2" />
            <asp:ListItem Text="text3" />
            <asp:ListItem Text="text4" />
        </asp:DropDownList>
        <asp:TextBox runat="server" ID="txtbox" /> 
```

测试了它，它工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:20:25.647

如果 AutoPostBack = True，它必须是你的事件被触发，当你的条件满足时调用一个函数。ASP.NET 总是回发，您只需要处理条件，否则您必须使用 JavaScript 处理验证并手动发布页面：

```
 if (ddl1.SelectedIndex==2 && ddl2.SelectedIndex>2)
   {
        if (!txt1.Visible)
        {
           txt1.Visible=true;// And then I want to call postback
           //dowork
        }

   }
   else
   {
        if (txt1.Visible)
        {
            txt1.Visible=false;// And then I want to call postback
            //do work
        }
   } 
```

# php - 如何在不连接的情况下在 PHP 中获取服务器 MySQL 版本

> ID：10414530
> 
> 赞同：16
> 
> 时间：2012-05-02T13:15:58.843
> 
> 标签：php, mysql

我需要在 PHP 脚本中回显 MySQL 版本（这是用户在下载插件之前的服务器要求检查页面），而不需要他们连接到他们的数据库。

将此脚本上传到他们的服务器并在浏览器中打开它。我可以要求他们运行 php info，但我需要的只是 Mysql 版本，它会在脚本中格式化，其余的结果。

我该怎么办？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T13:27:34.197

如果您有权访问命令行 mysql 可执行文件，则可以尝试以下操作：

```
function getMySQLVersion() { 
  $output = shell_exec('mysql -V'); 
  preg_match('@[0-9]+\.[0-9]+\.[0-9]+@', $output, $version); 
  return $version[0]; 
} 
```

对于客户端版本：

```
print mysql_get_client_info(); 
```

如果没有 shell 访问权限以获取服务器版本，您必须先连接：

```
$link = mysql_connect("localhost", "username", "password");
if (!$link) die('Could not connect: ' . mysql_error());
print "MySQL server version: " . mysql_get_server_info();
mysql_close($link); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-02T13:37:52.177

您需要用户输入他们的数据库凭据，以便您可以连接到 MySQL 服务器并运行以下查询以获取 MySQL 服务器版本：

```
SHOW VARIABLES LIKE 'version' 
```

这是我服务器上的输出：

```
Variable_name     Value
----------------------------
version           5.1.53-log 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-16T16:55:32.380

输出的信息`phpinfo`应该是准确的。只需将以下内容添加到文件并在浏览器中访问它：

`<?php phpinfo();`& 找到下面的 mysql 版本`mysql >> Client API version`

[![在此处输入图像描述](../Images/348514c177131b8a838e0477fc225ac9.png)](https://i.stack.imgur.com/hqAHR.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-07T00:10:02.473

mysql_get_client_info() 已弃用。对于 PHP 7 及更高版本，您必须使用：

```
echo mysqli_get_client_info(); 
```

# svn - 如何在 SVN 中删除未跟踪的文件

> ID：10414533
> 
> 赞同：51
> 
> 时间：2012-05-02T13:16:05.660
> 
> 标签：svn, version-control

如何使用`svn`命令行工具从 SVN 签出中删除所有未跟踪的文件？Git 和 Hg 为此提供了`clean`和`purge`命令，但我在 SVN 中找不到相应的命令。

我不在乎我是否必须在此过程中恢复所有本地修改（在这种情况下，我基本上想将我的结帐恢复到原始状态）或者对跟踪文件的本地修改是否可以保持不变；任何一种情况都是可以接受的。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-02T13:19:47.623

可能有一种内置的方式，但如果是这样，我不知道。但是，类似以下内容应该可以完成这项工作：

```
svn st | grep '^?' | awk '{print $2}' | xargs rm -rf 
```

（所有未版本控制的文件都应出现在以 . 开头的行`?`中`svn st`。）

**编辑（[@GearoidMurphy](https://stackoverflow.com/users/300745/gearoid-murphy)）** 让这个片段在 cygwin 环境中工作具有挑战性，因为 xargs 将 Windows 路径斜杠视为转义序列并且在解析 '\r\n' 行结尾时遇到了麻烦，下面是我完美的适应解决方案有效答案：

```
svn st | grep '^?' | gawk '{printf(\"%s|\", $2)}' | xargs -d "|" -n1 C:\cygwin\bin\rm -r 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2018-09-12T22:16:29.213

从 1.9 版开始，您可以使用以下内容：

```
svn cleanup . --remove-unversioned 
```

见[https://subversion.apache.org/docs/release-notes/1.9.html#svn-cleanup-options](https://subversion.apache.org/docs/release-notes/1.9.html#svn-cleanup-options)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-02T14:57:52.153

[svn-clean](http://svn.apache.org/repos/asf/subversion/trunk/contrib/client-side/svn-clean)脚本正是这样做的，尽管它确实依赖于安装 perl。它将保持本地修改不变，但会删除被忽略的文件。使用“-p”运行以预览将被删除的文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-15T07:56:36.720

此命令应该完成工作，空格和所有（仅在 OSX 上尝试过）：

```
svn status | grep '^\?' | sed 's/? *//' | xargs -I%  rm -fr % 
```

# c++ - 在 wdk 中新建和删除

> ID：10414535
> 
> 赞同：0
> 
> 时间：2012-05-02T13:16:08.520
> 
> 标签：c++

我正在使用本机子系统构建代码，我遇到了 and 的`operator new`问题`delete`。我想使用 WDK `new`，`delete`但出现以下错误：

> : 错误 LNK2019: 函数 _main 中引用的未解析的外部符号“void __cdecl operator delete(void *)”(??3@YAXPAX@Z)
> 
> : 错误 LNK2019: 函数 _main 中引用的未解析的外部符号“void * __cdecl operator new(unsigned int)”(??2@YAPAXI@Z)

有没有办法使用WDK自己的`new`和`delete`？WDK 中是否有任何库可用于本机子系统中的这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:41:03.190

谁说 WDK 甚至有`new`and `delete`？它主要是用 C 编写的，而不是 C++。任何 C++ 部分都可能使用本机 API 处理自己的内存管理。

您应该使用本机子系统中可用的内存 API 定义自己的全局`operator new`和`operator delete`（毕竟这只是内存分配/释放 - 编译器负责运行构造函数和析构函数）。

# http - DNS 问题

> ID：10414542
> 
> 赞同：1
> 
> 时间：2012-05-02T13:16:45.410
> 
> 标签：http, proxy, dns, ping

在我的时区下午好。

我正在 J2EE 中开发一个 Web 应用程序。此 Web 应用程序在共享点门户中被调用和访问。当我通过 sharepoint 门户进入时，我可以访问我的应用程序，使用 chrome 开发工具我可以看到所有 HTTP 流量，并且我看到浏览器向以下服务器发送请求，该服务器是我的应用程序正在运行的服务器 serverprd.enterprisename.com .

但是，当我在 Windows 7 中使用命令行来 ping 机器（服务器）时，例如：ping serverprd.enterprisename.com 它会返回以下消息：“Ping 请求找不到主机 serverprd.enterprisename.com”

我正在使用代理。

谁能告诉我为什么会这样？为什么通过浏览器我可以访问服务器并且ping命令找不到我的服务器？

致以最诚挚的问候。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:29:07.030

您的代理服务器 id 是可以访问外部世界的人。所有 http 请求都发送到代理服务器，代理服务器进行 DNS 查找。在 pin 的情况下，您的主机必须进行 DNS 查找，并且现在显然允许此操作（防火墙左右）。

# c# - 确定是否从同一程序集中调用代码

> ID：10414544
> 
> 赞同：1
> 
> 时间：2012-05-02T13:17:01.430
> 
> 标签：c#, reflection, .net-assembly, internal

我想锁定我的程序集中的类，以阻止它们被同一程序集中的其他类调用。所以换句话说，在程序集中没有横向调用。

我打算在类调用中编写一些验证，以确保它们不是从同一个程序集中调用的。如何使用反射来确定这一点？

所以它是以下场景：

```
Assembly1
----------
Class 1A

Assembly2
----------
Class 2A
Class 2B 
```

所以 2A 类不能调用 2B 类。但是 1A 类可以调用 2A 类或 2B 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:18:53.733

[使用现有的访问修饰符](http://msdn.microsoft.com/en-us/library/ms173121.aspx)是不可能的。

你不能让一个类对其他程序集公开，但在内部是私有的。

如果您将您的组件拆分`Class2B`为不同的程序集并制作它[`internal`](http://msdn.microsoft.com/en-us/library/7c5ka91b.aspx)，您也可以[将其设置`InternalsVisibleToAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)为`Assembly1`.

这将实现的是`Class2A`无法访问它，但`Class1A`可以。

* * *

您也可以使用反射进行一些运行时检查 - 正如Christian.K 详细信息[的答案](https://stackoverflow.com/a/10414636/1583)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:21:55.293

为什么首先将它们放在同一个程序集中？

而是将 2B 和 2A 放在自己的程序集中，将类标记为`internal`. 提供程序集级属性`InternalsVisibleTo`以允许“Assembly1”分别访问“Assembly2B”和“Assembly2A”的内部。

使用反射，您仍然可以规避这一点。

无论如何，出于安全目的使用这种机制（或任何其他机制，手工制作的“调用者检查”，等等）都是不可取的。如果您想出于“架构”目的这样做，您可以使用上面的建议，并可能使用[NDepend](http://ndepend.com/)或自定义 FxCop/CodeAnalysis 规则等工具。您可以验证您的规则在构建期间没有被破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:21:32.577

怎么样：

```
if (Assembly.GetCallingAssembly() == Assembly.GetExecutingAssembly())
{
    // Throw some exception
} 
```

不过，这似乎是一件很奇怪的事情……

# android - 可以拨打电话的应用程序android

> ID：10414551
> 
> 赞同：-1
> 
> 时间：2012-05-02T13:17:36.990
> 
> 标签：android, wifi

我有处理电话联系人的帕斯卡编码软件。当您单击联系人时，如果您使用 IP 电话，电话会呼叫该联系人。我正在尝试做一个 android 应用程序，它可以做同样的事情，但不是通过使用 wifi 来使用 ip 电话。

那可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:25:52.330

没用过，买这个可能是你要的。你将不得不从这里进行更多的研究......

[SipSession.makeCall()](http://developer.android.com/reference/android/net/sip/SipSession.html#makeCall%28android.net.sip.SipProfile,%20java.lang.String,%20int%29)

# c# - 如何知道 Web 请求是否来自特定的另一个已知网站的链接按钮

> ID：10414559
> 
> 赞同：2
> 
> 时间：2012-05-02T13:18:01.220
> 
> 标签：c#, javascript, asp.net, iis, web

我有两个网站

1）主网站：它有一个链接帮助和培训，将用户重定向到另一个帮助网站。

2）帮助网站没有认证规则，任何人都可以直接访问该网站。

现在我要求允许从第一个网站的链接访问第二个网站，所有其他请求都应该重定向到另一个页面。

Offcourse 查询字符串/参数验证是不可接受的，因为它可以是可见且恒定的

是否有可能，任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:23:41.273

您可以使用[http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)，它只是 HTTP 引荐来源网址头的 ASP.NET 包装器。 [http://en.wikipedia.org/wiki/HTTP_referrer](http://en.wikipedia.org/wiki/HTTP_referrer)

当然，这可以被欺骗，所以不要依赖它来创建超级安全的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:20:48.693

如果您将 get 参数添加到第一个站点中的链接 url 并在第二个站点中检查它会怎样。这当然是一个非常简单的解决方案，并且可以很快被欺骗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:27:06.123

从[这里](https://stackoverflow.com/a/4258249/381819)：

您可以使用请求的[UrlReferrer](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)属性：

```
Request.UrlReferrer 
```

这将从客户端（用户代理）可能提供也可能不提供的请求中读取[Referer HTTP 标头。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.36)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:28:43.203

嗨，您可以使用此代码块来识别用户从何处来到您的网站

```
 If Not IsPostBack Then
            If Not Request.UrlReferrer.ToString() Is Nothing Then
                referrer = Request.UrlReferrer.ToString()
            End If
        End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T14:22:11.213

如果你想要一些普通用户不容易欺骗的东西......

site2 公开了一个验证“秘密”参数的 web 服务（可能只是一些只有 site1 和 site2 知道的长随机字符串）。该服务返回一个唯一的“令牌”，它只在一小段时间内有效。在将用户定向到 site2 时，site1 将此标记附加到查询字符串中。site2 验证令牌是否合法且仍然有效。使用令牌后，site2 不再将其视为有效。

# iphone - Delegate.m 中的内存泄漏

> ID：10414564
> 
> 赞同：-2
> 
> 时间：2012-05-02T13:18:29.973
> 
> 标签：iphone, xcode, memory-leaks

我一直遇到内存泄漏问题，我认为是由于我的效率低下造成的。好的，所以我做了以下事情：

*   39 个 UITextViews 和 UIViews 现在被“编译”成只有 1 个 UIView 和 1 个 UITextView。（字体现在只跟 1 个 UITextViews 而不是 39 个不同的）
*   9 个 UIView 和 9 个 MKMapView 现在被“编译”成只有 1 个 UIView 和 1 个 MKMapView。这是应用程序的最大部分，因此它肯定应该解决这个问题，但后来我注意到了这一点。

几乎从我的项目的第一天开始，这种内存泄漏就一直导致问题。我可以做些什么来解决应用程序的核心 delegate.m 中的这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:36:09.497

留下所有它只是实现一个自定义单元格，在其中创建一个文本字段，在另一个中创建 uitextview。

更多阅读本教程

[http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)

[http://www.galloway.me.uk/tutorials/custom-uitableviewcell/](http://www.galloway.me.uk/tutorials/custom-uitableviewcell/)

# python - 如何使用 Python 的 shutil 将文件复制到包含与号“&”的路径？

> ID：10414580
> 
> 赞同：1
> 
> 时间：2012-05-02T13:18:55.993
> 
> 标签：python, shutil

我是 Python 的新手，必须修改现有的 Python 脚本。该脚本将文件复制到其他路径，如下所示：

`err=shutil.copyfile(src, dst)`

除非`dst`包含以下字符，否则此方法有效`&`：

`dst = "Y:\R&D\myfile.txt"`

在这种情况下，我收到 Windows 错误弹出窗口，上面写着

```
Open file or Read file error
Y:\R 
```

我尝试使用反斜杠、双反斜杠和用额外的引号包裹字符串来转义和使用：`dst = "\"Y:\R&D\myfile.txt\""`. 在最后一种情况下没有任何作用，我从`shutil`.

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:36:11.333

我怀疑大多数平台都支持与号。您可能需要调用特定于 Windows 的程序。我建议使用 robocopy，因为它非常擅长复制文件。如果它不包含在您的 windows 版本中，您可以在 2003 的 windows 服务器管理员工具包中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:04:58.270

如果我`\`将文件路径中的所有内容更改为`/`（在字符串`src`和`dst`字符串中），它对我有用。是的，我知道你使用的是 Windows，但如果你使用`/`.

此外，您似乎正在复制到网络驱动器。你复制到同样的问题`c:\R&D\`吗？

您使用的是什么风格的 Windows？在 XP 上的本地和网络驱动器中`shutil.copyfile()`使用目录名称、src 和 dst 路径、在本地和网络驱动器中对我来说都很好`&`——只要我使用`/`.`\`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:18:04.063

尝试用“\”转义“\”，此命令必须有效（例如）：

```
 shutil.copyfile("Y:\\R&D\\myfile.txt", "C:\\TMP") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:21:23.877

最简单的解决方案，向 python 表明该字符串是原始的，而不是对其进行转义或以任何方式修改它：

```
import shutil

src = r"c:\r&d\file.txt"
dst = r"c:\r&d\file2.txt"

err=shutil.copyfile(src, dst) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-15T13:29:58.350

以下是使其在 Windows 上运行的几种方法：

*   方法1：（已经解释）

    > `import shutil; shutil.copy(src,dest)`
    > 
    > 只要 src/dest 使用`r'c:\r&d\file'`字符串格式。它也适用于正向“/”斜杠。

*   方法 2：注意在 windows 上使用双引号而不是单引号。

    > `src = r'c:\r & d\src_file'`
    > 
    > `os.system('copy "{}" "{}"'.format(src,dest)) 1 file(s) copied`

*   最后一招：

    > `with open(dest, 'wb') as f: f.write(open(src,'rb').read())`

与 不同`os.system`的是，此首选实现`subprocess.call`无法与 Windows 上的任何引用方法一起使用。我总是得到`The specified path is invalid.`没有尝试在unix上。

# ios - UITableView - 点击时获取数据

> ID：10414582
> 
> 赞同：0
> 
> 时间：2012-05-02T13:18:58.163
> 
> 标签：ios, iphone, web-services, uitableview

我的问题是，当点击单元格时，是否可以从 php 获取文本数据并在我的 ViewController 中读取它？

我猜`didSelectRowAtIndexPath`是这样做的关键，但我不知道如何写。

我能够从 php 获取数据到我`TableViewController`的如下；

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [json count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    NSDictionary *info = [json objectAtIndex:indexPath.row];
    cell.textLabel.text = [info objectForKey:@"Artist"];
    cell.detailTextLabel.text = [info objectForKey:@"Song"];

    return  cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:17:29.773

使用这种代码方法。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{ 
  //retrive your data here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:35:09.057

您编写的代码与您在开始时解释的内容有些矛盾。但是，*应该*这样做：

首先，您需要获取要显示的数据。您可以从外部网站（如您所说的 php）、plist、xml 或任何您想要的网站获取此信息。您可以在启动 tableview 时（例如使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)）或在启动 tableview 并使用自定义 init 方法将其发送之前执行此操作。其次，您需要阅读您收到的内容。通常最好是采用 NSArray 格式。这取决于您从中获取数据的数据源的实现。

如果你是 Objective-c 和 cocoa-touch 的新手，你应该从一些关于 UITableView 的快速教程开始。我自己写过一个，但目前我猜它（非常）过时了。你仍然可以看看它：http: [//paulpeelen.com/2009/08/14/developing-with-iphone-3-0-x-simple-uitableview/](http://paulpeelen.com/2009/08/14/developing-with-iphone-3-0-x-simple-uitableview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:32:49.420

你的代码我认为是错误的。通过检查检查json中是否有任何数据

```
NSLog(@"%@ and %@",[info objectForKey:@"Artist"],  [info objectForKey:@"Song"]); 
```

并告诉我是否有任何结果出来。如果不是，那么您的 php 中有一些错误，否则您的数据应该显示在那里。

# mysql - mysql 中的正则表达式 - 查找包含所有关键字的字符串（AND 运算符）

> ID：10414586
> 
> 赞同：0
> 
> 时间：2012-05-02T13:19:20.503
> 
> 标签：mysql, regex, syntax, keyword

我被困了 3 个小时，我猜这很简单，但一直在搜索互联网并没有找到答案。我有 1、2、3、4 个或更多关键字和一个用于在其中搜索关键字的字符串。我正在寻找匹配所有关键字的正则表达式。例如：

string = "这辆车是红色的，有大轮子"

关键词：**车轮**

返回：真

关键词：**轮子车**

返回：真

关键词：**车是红色的**

返回：真

关键词：**这个很大**

返回：真

关键词：**车红小**

返回：false（字符串中没有“小”字）

我使用这样的mysql查询：

```
SELECT name, desc FROM table WHERE CONCAT(name, desc) REGEXP ($keyword1)($keyword2) 
```

但它返回空字符串。什么应该是正确的正则表达式语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:25:01.030

最简单的解决方案是将正则`AND`表达式移出并放入 SQL：

```
SELECT name, desc
FROM table
WHERE CONCAT(name, desc) REGEXP ($keyword1)
  AND CONCAT(name, desc) REGEXP ($keyword2) 
```

否则，您的正则表达式将不得不`N!`在长长的`OR`语句链中包含所有可能的顺序，并且长度增长得非常非常快（使用 5 个关键字，您需要构建 120 个不同的顺序！）

# ios - UIWebview：为什么我的图像无法加载？

> ID：10414587
> 
> 赞同：0
> 
> 时间：2012-05-02T13:19:20.893
> 
> 标签：ios, uiwebview

使用 UIWebview 和基本身份验证（身份验证有效）但是我没有下载图像？谁能指出我正确的方向？

我正在连接这个：

```
connection = [[NSURLConnection alloc] initWithRequest:sourceUrl
                                             delegate:self 
                                     startImmediately:YES];

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
 NSLog(@"%s", __FUNCTION__);
[webData appendData:data];
}

 -(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"%s", __FUNCTION__);
    [_webView loadData:webData 
              MIMEType: @"text/html" 
      textEncodingName: @"UTF-8" 
          baseURL:nil]; 
```

我的网页很好，但有几张图片没有加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:18:25.300

如果您使用相对路径，则应设置基本 URL。

# php - 我应该在哪里存储自定义 php 日志？

> ID：10414593
> 
> 赞同：2
> 
> 时间：2012-05-02T13:19:42.623
> 
> 标签：php, zend-framework, zend-db, zend-log

我们在数据库（mysql）中维护了一些自定义日志。我们使用这些日志来跟踪我们的 zend 框架应用程序中最近的错误和电子邮件活动。

我们最近发现这些日志给数据库造成了一些压力，因为我们在这些日志选项卡上执行了多次读/写。这也会减慢应用程序的速度，因为我们需要执行 mysql INSERT，有时这些日志表会被其他 SELECT 查询锁定。

我们使用`Zend_Log`适配器来执行日志写入，如下所示：

```
 $columnMapping = array('url' => 'url', 'userAgent' => 'userAgent', 'info' => 'info', 'reffer' => 'reffer', 'userId' => 'userId', 'priority' => 'priority','dateInserted' => 'dateInserted', 'message' => 'message');
    $writer_db = new Zend_Log_Writer_Db($db, 'log', $columnMapping); 
```

我们还有一个自定义的 cronjob，它每晚都会从日志中清除旧条目，这也会给数据库带来一些压力。

我们对这些日志的唯一要求是它们应该可以从中心位置搜索，因为我们有多个服务器编写这些日志。

在 zend 框架应用程序中写入日志的任何替代方法？在这种情况下有什么好的`Zend_Log`适配器可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:26:42.683

您可以将文件记录器用于通过 NTP 在所有服务器之间共享的“驱动器”。它可以使用标准的 unix 搜索工具（grep、awk 等）进行搜索。

另一种解决方案是使用 Syslog 编写器并[设置一个](http://news.softpedia.com/news/Setting-Up-a-Central-Syslog-Server-44063.shtml)接收日志消息的 syslog 服务器。有许多应用程序可以分析 syslog 格式。

第三种选择是使用 MongoDB 作为日志的存储工具。[这是一篇文章](http://raphaelstolt.blogspot.de/2009/09/logging-to-mongodb-and-accessing-log.html)，解释了如何实现写入 MongoDB 的 Log Writer。MongoDB 具有“异步插入”功能，因此您的应用程序不必等到日志条目写入数据库。

# c# - WP7 异常错误-IsolatedStorageFileStream 上不允许操作

> ID：10414594
> 
> 赞同：0
> 
> 时间：2012-05-02T13:19:45.650
> 
> 标签：c#, windows-phone-7, onedrive

如何解决异常，IsolatedFileStream 上不允许操作？

调试后发现某行没有读到，直接跳到catch部分。我正在从 windows phone 7 中的照片样本中读取图像，并将它们上传到 skydrive。有人可以指导我如何尽快解决这个问题吗？谢谢。

```
public BitmapImage fileName { get; set; }

private void GetImages()
{
    MediaLibrary mediaLibrary = new MediaLibrary();
    var pictures = mediaLibrary.Pictures;

    foreach (var picture in pictures)
    {
        BitmapImage image = new BitmapImage();
        image.SetSource(picture.GetImage());              

        MediaImage mediaImage = new MediaImage();
        mediaImage.fileName = image;
        UploadFile(mediaImage, picture.Name);                
    }
}

public void UploadFile(MediaImage image, string filepath)
{
   if (skyDriveFolderID != string.Empty) 
   {
     this.client.UploadCompleted += new EventHandler<LiveOperationCompletedEventArgs>(ISFile_UploadCompleted);
     infoTextBlock.Text = "Uploading backup...";
     dateTextBlock.Text = "";

     try
     {
        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
           // error occurs HERE
           IsolatedStorageFileStream readStream = myIsolatedStorage.OpenFile(filepath, FileMode.Open, FileAccess.Read);

           readStream.Close();
           this.client.UploadAsync(skyDriveFolderID, filepath, true, readStream, null)
        }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:41:54.490

你确定那里发生错误吗？我可以看到您在阅读之前关闭了流。所以可能是你弄错了错误行。

另外，您绝对确定，具有该确切名称的文件存在于独立存储中吗？

# javascript - 如何判断 ASP 中的页面卸载是否是 PostBack

> ID：10414603
> 
> 赞同：5
> 
> 时间：2012-05-02T13:19:58.570
> 
> 标签：javascript, jquery, asp.net

这似乎是一个常见问题，但搜索没有返回任何内容。

我有以下代码在页面卸载之前执行。问题是如果卸载是回发，我不想向用户发出警告，但我不知道如何区分回发和导航到的用户例如另一页。

```
// This is executed before the page actually unloads
        $(window).bind("beforeunload", function () {

            if (prompt) {

                //prompt
                return true;
            }
            else {

                //reset our prompt variable
                prompt = true;
            }
        }) 
```

在后面的代码中运行脚本，即如果 Page.IsPostBack 然后设置提示不是一个选项。

有任何想法吗？

编辑：

这是我最终得到的解决方案：

```
 function DoNotPrompt() {
              prompt = false;
        } 
```

然后我将此添加到所有控件中，用户可以在其中执行导致回发的操作。

```
OnClientClick="DoNotPrompt() 
```

然后检查这个标志，如果用户真的离开页面，即不是回发，则只在“beforeunload”中返回一个字符串。

我还必须使用以下代码： var magicInput = document.getElementById('__EVENTTARGET');

```
 if (magicInput && magicInput.value) {
        // the page is being posted back by an ASP control 
        prompt = false;
    } 
```

原因是我有一个自定义用户控件，它是一个列表框，我无法添加上述方法。所以用它来捕捉那个事件并将标志设置为假。

不是最优雅的解决方案。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:25:29.290

您可以捕获提交并将 onbeforeunload 重置为：

```
jQuery(function($) {
    var form = $('form'), oldSubmit = form[0].onsubmit;
    form[0].onsubmit = null;

    $('form').submit(function() {       
        // reset the onbeforeunload
        window.onbeforeunload = null;

        // run what actually was on
        if(oldSubmit)           
            oldSubmit.call(this);           
    });
}); 
```

这是我页面中经过测试的代码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:23:04.247

JavaScript 在客户端运行；就客户端而言，页面不会保持从一个视图到下一个视图的状态。回发完全是一个 ASP.NET 概念。

您可以通过在服务器端运行一些代码来解决此问题，该代码根据是否`Page.IsPostBack`为真定义了一个 JavaScript 变量。

例子：

```
<%@ Page Language="C#" AutoEventWireup="true"  %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Page.IsPostBack -> client</title>

    <script type="text/javascript">
        var isPostback = <%= Page.IsPostBack %>;
        console.log("IsPostBack: " + isPostback);
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button runat="server" ID="btnTest" Text="Click me..." />
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:25:15.483

`__EVENTTARGET`这可能无法涵盖所有​​回发情况，但您可以通过询问隐藏的输入来判断页面是否由 ASP 控件回发。

当页面由 ASP 控件回发时，此输入由 ASP 设置。

```
var magicInput = document.getElementById('__EVENTTARGET');

if (magicInput && magicInput.value) {
   // the page is being posted back by an ASP control
} 
```

# android - 视频播放一次后设置内容视图

> ID：10414609
> 
> 赞同：0
> 
> 时间：2012-05-02T13:20:22.513
> 
> 标签：android, android-videoview

```
public void playvideo()
{
    setContentView(R.layout.testvideo);  

    VideoView video = (VideoView)findViewById(R.id.videoView1);    
    String videoName = "testvideo" ;
    // You build the URI to your video here 
    StringBuilder uriPathBuilder = new StringBuilder (); 
    uriPathBuilder.append ("android.resource://"); 
    uriPathBuilder.append (this.getPackageName ()); 
    uriPathBuilder.append (File.separator); 
    uriPathBuilder.append ("raw"); 
    uriPathBuilder.append (File.separator); 
    uriPathBuilder.append (videoName); 
    Uri uri = Uri.parse (uriPathBuilder.toString ()); 

    video.setVideoURI (uri); 
    video.start ();    
} 
```

这是播放测试视频的功能。单击按钮时调用此函数。视频播放完毕后，我想调用另一个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:04:46.760

您可能正在寻找[`setOnCompletionListener`](http://developer.android.com/reference/android/widget/VideoView.html#setOnCompletionListener%28android.media.MediaPlayer.OnCompletionListener%29).

```
video.setOnCompletionListener( new MediaPlayer.OnCompletionListener()
{
   public void onCompletion(MediaPlayer mp) 
        {
            // call some function
        }  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:06:36.547

如果你想调用另一个函数，那么你可以覆盖

```
video.setOnCompletionListener(new MediaPlayer.OnCompletionListener(){}); 
```

每当您的视频完成时，它都会调用上述回调函数，您可以执行任何您想要的函数。

# php - PHP MySQL PDO -> ON INSERT 如果值已经存在，则执行另一个查询

> ID：10414611
> 
> 赞同：0
> 
> 时间：2012-05-02T13:20:26.967
> 
> 标签：php, mysql, pdo

我有一个带有两个表的 mysql 数据库。第一个表称为“uniqueReferences”，第二个表称为“duplicatedReferences”。这两个表只有两个字段：一个 id 字段（自动递增）和一个名为 Reference 的字段。我想要的是如下。尝试在“uniqueReferences”表中插入引用时，如果引用已存在，请不要将其插入该表中，而是插入“duplicatedReferences”表中。

所以我尝试但没有奏效的是以下内容。
1-> 将我的“uniqueReferences”表的字段引用设置为“唯一”。
2->进行以下操作

```
try{  
         $req = $prepared_insertQry_toUniqueRefTable -> execute(array(something));

         if($req == 0){
               $prepared_insertQry_toDuplicateRefTable->execute(array(something));
         }
     }
    catch(PDOException $e){echo $e->getMessage();} 
```

不幸的是，这不起作用。我有以下错误`SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry`。希望有人可以提供帮助。干杯。马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:36:19.910

根据您收到的消息，您似乎正在捕获 PDOException，其中的消息是`... 1062 Duplicate entry`. 这意味着您的“uniqueReferences”表上的表约束不允许重复条目。可能是因为您在该表中有一个主键。这是一件好事，它将使这个问题更容易解决。

因此，如果每次尝试插入重复条目时都抛出异常，那么我们就知道要插入到“duplicatedReferences”表中。您只想验证抛出的异常是由于重复条目造成的。

试试这个：

```
try
{
    $prepared_insertQry_toUniqueRefTable->execute(array(something));
}
catch (PDOException $e)
{
    if ($e->getCode() == 1062)
        $prepared_insertQry_toDuplicateRefTable->execute(array(something));
    else
        echo $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:37:33.993

请参阅我的注释与代码内联：

```
 try{  
         $req = $prepared_insertQry_toUniqueRefTable -> execute(array(something));

         // this never executes because an Exception halts it here
         /*if($req == 0){
               $prepared_insertQry_toDuplicateRefTable->execute(array(something));
         }*/
     }
    catch(PDOException $e){
       // this catch grabs the exception and executes the code within instead
       // that code might log an error, echo the error message, or perform
       // alternative logic. In your case you want to execute alterntative logic
       // ie. your query
       $prepared_insertQry_toDuplicateRefTable->execute(array(something));

   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:38:21.790

尝试先插入数据，如果它已经存在，则将其插入表中以查找重复行。由于如果该行存在则生成异常，您可以捕获此异常，然后将该行插入到重复的表中：

```
try
{  
    $req = $prepared_insertQry_toUniqueRefTable -> execute(array(something));
}
catch (PDOException $e)
{
    // you can use the value of errorInfo[1] to check the actual generated error code
    if ($e->errorInfo[1] == 1062)
    {
        $prepared_insertQry_toDuplicateRefTable->execute(array(something));
    }
    else
    {
        // rethrow the exception as we're not handling it
        throw $e;
    }
} 
```

你可能需要稍微调整一下才能得到你想要的，但这应该是它的要点。

# mono - MonoTouch 绑定处理程序

> ID：10414613
> 
> 赞同：1
> 
> 时间：2012-05-02T13:20:32.523
> 
> 标签：mono, xamarin.ios

嗨，我正在尝试为 Monotouch 上的 IDBlue 框架做一些绑定，我不明白它应该如何翻译是这样的：

```
- (SendStatus *) getTagInfo:(RfidTag*) tag withHandler: (id&lt;IHfResponseHandler&gt;)  handler 
```

我应该如何在单声道触摸上映射 id？我查看了 mono touch 文档，但没有发现类似的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:42:18.080

我想就这么简单。

```
[Export ("getTagInfo:withHandler:")]
public SendStatus GetTagInfoWithHandler (RfidTag tag, IHfResponseHandler handler); 
```

或者您可以尝试使用弱处理程序版本。

```
[Export ("getTagInfo:withHandler:")]
public SendStatus GetTagInfoWithWeakHandler (RfidTag tag, NSObject handler); 
```

# html - Twitter 引导嵌套表单布局

> ID：10414614
> 
> 赞同：2
> 
> 时间：2012-05-02T13:20:32.687
> 
> 标签：html, twitter-bootstrap

我刚刚开始使用引导程序。我需要定位三个输入字段以形成一个“地址”字段。

![我想要达到的目标](../Images/da25e7356e1c4bb8f096b142707e1337.png)

我尝试使用以下 html：

```
<label for="street">Address</label>
<input class="span3" id="street" name="street" placeholder="Street"/><br/>

<input id="zipcode" class="span1 inline" placeholder="Zipcode"/>
<input id="city" class="span2 inline" placeholder="City"/> 
```

这几乎是正确的，但尺寸有点偏

![不正确](../Images/6583f3e95333befb4bdab525430dcf97.png)

有没有更好的方法来实现这种布局（无需制作自定义样式来实现正确的宽度）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T11:31:06.407

尝试使用以下内容：

```
<div class="container">
<div class="row">
    <div class="span6 offset1">
        <form>
            <label for="street">Address</label>
            <div class="controls controls-row">
                <input type="text" class="span3" id="street" name="street" placeholder="Street"/>
            </div>
            <div class="controls controls-row">
                <input type="text" id="zipcode" class="span1" placeholder="Zipcode"/>
                <input type="text" id="city" class="span2" placeholder="City"/>
            </div>
        </form>
    </div>
</div> 
```

​这里有一个[小提琴](http://jsfiddle.net/iurii/kUNVs/98/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:39:37.600

自定义装订线宽度和跨度宽度，我认为 span24 更适合准确的宽度，装订线宽度 10px 和 span1 30px span2 70px 等 ....告诉我您使用的是 SASS 还是 LESS

如果无礼

```
$gridColumns: 24
$gridColumnWidth: 30px
$gridGutterWidth: 10px 
```

在您的 sass 文件中，但不要忘记导入引导 sass 文件

还有一件事 - 我在这里忘记了你应该在使用 twitter 引导程序时使用控制组和其他格式；请参考引导网站

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:55:46.723

我想如果你只使用'span2'和'span1'类而不使用'inline'类，它只会在网格中显示具有正确边距的布局。看起来是导致错位的边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-17T16:25:14.013

所以我为此苦苦挣扎了一段时间，终于找到了解决方案。[这就是我想出的](https://github.com/mrogunlana/bootstrap-forms/blob/master/simple-registration-form)。这是一个带有水平（内联）字段的简单注册表单。

# java - 我可以从 Eclemma 代码覆盖工具 Java 中排除自动生成的代码吗？

> ID：10414615
> 
> 赞同：2
> 
> 时间：2012-05-02T13:20:37.337
> 
> 标签：java, code-coverage, emma, jacoco

是否可以从 eclemma 代码覆盖工具中隐藏我的一些代码（例如自动生成的代码）。[在 c# 中有一个选项可以执行此处](http://geekswithblogs.net/terje/archive/2008/11/10/hiding-generated-code-from-code-analysis-metrics-and-test-coverage.aspx)描述的选项，我们在 Java 中是否有类似的东西？

编辑：我没有使用 ant，我使用 eclipce 的 Eclema 插件，我可以做任何配置来从覆盖工具中排除我的一些代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:59:37.970

据我所知，目前无法做到这一点。

不过，从长远来看，计划中的 EclEmma[过滤选项](http://sourceforge.net/apps/trac/eclemma/wiki/FilteringOptions)可能会使这成为可能。

# java - 读取 XML 模板时 StringTemplate 无效字符 '<'

> ID：10414622
> 
> 赞同：9
> 
> 时间：2012-05-02T13:20:57.913
> 
> 标签：java, html, xml, template-engine, stringtemplate

我正在尝试创建一个简单的 XML 模板，到目前为止它只包含：

```
<?xml version="1.0"?> 
```

我读了这样的文件：

```
 STGroup group = new STGroupDir("templates");
    ST st = group.getInstanceOf("report");
    st.add("analysis", ana);
    String result = st.render();
    System.out.println(result); 
```

结果是几条错误消息：

```
report.st 1:1: invalid character '<'
report.st 1:1: invalid character '?'
report.st 1:19: invalid character '?'
report.st 1:20: invalid character '>'
report.st 1:2: no viable alternative at input 'xml' 
```

我见过其他人阅读也使用标签的 HTML 模板。那么我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:08:45.373

好的，我似乎忽略了您需要在不同的语法中指定模板。尽管这在我使用的示例中并不明显：

我的工作模板现在看起来不同了：

```
report (analysis) ::= <<
<?xml version="1.0"?>
>> 
```

此外，我还更改了分隔符：

```
STGroup group = new STGroupDir("templates",'$','$'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T05:16:39.240

我发现您也可以转义尖括号：

```
report(analysis) ::= <<
\<?xml version="1.0"?>
>> 
```

注意--`\`前面的右边，`<?xml`另外它足够聪明，不需要在右`?>`括号处再次转义。

而且我相信 Terrence Parr 关于模型/视图分离的建议是，视图永远没有机会操纵传递给模板的底层数据结构（或模型）。这是通过将模板“应用”到数据或集合来完成的，而不是在模板中循环遍历数据。也许这是微妙的，也许实际上（在设计师的情况下）有点太纯粹了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-09T02:42:07.550

或者，如果您不想使用组文件语法，可以使用 STRawGroupDir。此类类似于 STGroupDir，但专门用于加载 XML 和 HTML 等文件。

[http://www.stringtemplate.org/api/org/stringtemplate/v4/STRawGroupDir.html](http://www.stringtemplate.org/api/org/stringtemplate/v4/STRawGroupDir.html)

# php - 是否可以拆分 PHP 配置文件 php.ini？

> ID：10414630
> 
> 赞同：12
> 
> 时间：2012-05-02T13:21:23.667
> 
> 标签：php, include, configuration-files

使用 php 的人都知道 php.ini 是一个大文件，当您需要切换 ssh 时可能会让人头疼。

例如，我可以使用`include`指令更改 nginx.conf 以将启用站点的目录下的所有文件加载到主 nginx.conf 中。

所以我的问题很简单：可以用 php.ini 做同样的事情吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T13:31:30.167

如果您的 PHP 安装设置为扫描 .ini 文件，您可以将其中的几个放在一个文件夹中。如果您通过 Ubuntu 存储库安装 PHP，它应该已经以这种方式配置。

我的`phpinfo()`（注意：额外的 ini 文件是从 repos 安装 php 扩展的结果，不会包含在 PHP 中）：

![突出显示ini部分的phpinfo](../Images/509e07f15c4167ba0a34f4e4100958e5.png)

此目录的设置是编译时选项：

```
--with-config-file-scan-dir=/etc/php5/apache2/conf.d 
```

您还可以通过 Apache 设置环境变量：

```
SetEnv PHP_INI_SCAN_DIR /php/custom/scan/directory 
```

[更多信息@ServerFault](https://serverfault.com/questions/224685/php-ini-disable-scan-this-dir-for-additional-ini-files)

# multithreading - 为 Core Data 创建一个仅在一个线程上的 Grand Central Dispatch 队列

> ID：10414632
> 
> 赞同：3
> 
> 时间：2012-05-02T13:21:35.910
> 
> 标签：multithreading, core-data, grand-central-dispatch

有没有办法创建只在一个线程上运行的 GCD 队列？我想使用该队列来处理核心数据操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:28:18.733

是的; 只需使用标志创建队列`DISPATCH_QUEUE_SERIAL`（这也是默认设置）。但一定要小心将核心数据操作转移到另一个线程上。给定`NSManagedObjectContext`只能在单个线程上使用，因此您需要两个上下文，一个用于主线程，一个用于后台线程。正确执行此操作可能需要一些小心。

您可能想要调查`UIManagedDocument`（如果这是 iOS5），它为您完成了大部分工作。至少您应该阅读它的文档，以便了解它在多线程中使用父上下文和子上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:54:37.907

创建托管对象上下文时，您指定其并发类型。如果你指定了 NSPrivateQueueConcurrencyType 或 NSMainQueueConcurrencyType，那么 MOC 将已经负责在它自己的线程上运行。具体来说...

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
// Do other MOC initializations stuff...
[moc.performBlock:^{
    // All code in this block will run in the proper thread for the Managed Object Context.
}]; 
```

FWIW，NSMainQueueConcurrencyType 的工作方式相同，但它附加到主队列。您不能在使用 NSConfinementConcurrencyType 创建的 MOC 上调用 performBlock，创建和所有工作必须在同一个线程中进行。仅在这种情况下，您是否需要创建自己的队列。

# iphone - 子级视图控制器未收到 NSNotification

> ID：10414637
> 
> 赞同：1
> 
> 时间：2012-05-02T13:21:59.003
> 
> 标签：iphone, ios, nsnotificationcenter

**-- 编辑，见下面的更新解决方案 --**

我在这里有一个应用程序，可以在其中在后台线程中下载一些数据。

每次下载 5 个项目时，在我的主视图控制器中，我都会发布一条通知，指出已下载 5 个项目。

在我的其他 4 个视图控制器之一中，它们本身是导航堆栈上的根视图控制器，我深入了解了详细信息页面。（典型的5个标签栏界面）

这个详细信息页面是另一个视图控制器，我在其中对 viewDidLoad 方法做了一个 NSNotificationCenter defaultCenter addObserver。

这里的问题是，当通知发布时，我的详细信息页面的根视图控制器会收到通知，但详细信息页面本身没有收到通知。

虽然我的数据是在后台线程中下载的，但我正在调用 performSelectorOnMainThread: 与调度方法。在 dispatch 方法中，它调用 [[NSNotificationCenter defaultCenter] postNotificationNamed:object:];

所以：

```
.... downloading batches of 5 items in a background thread ....

...

... downloaded calling [self performSelectorOnMainThread:@selector(foo) WithObject:nil WaitUntilDone:NO]; ...

...

// foo method
-(void)foo
{
    // theoretically, this notification should be delivered and received in the main thread since this foo() method is told to execute on the main thread above 

    [[NSNotificationCenter defaultCenter] postNotificationName:@"notif_batchDownloaded" object:nil];
}

... 
```

我在我的根视图控制器中收到通知，但不是我的详细信息页面。

1）当下载过程开始时，我已经在查看详细信息页面所以不，我不认为详细信息页面视图控制器已被释放

2）详细信息页面视图控制器显然正在观察主线程上的通知，如上所述，通知被告知要发布在主线程上。

所以问题是，是否还有其他原因阻止子级视图控制器接收通知？

我认为我没有超出任何通知观察者的限制。我什至评论了其他通知，但没有任何区别。

每次下载 5 个项目时都会发送通知，因此在发送通知之前我无法查看详细信息页面。即使我以某种方式错过了前 5 个，我至少应该收到第 2 个 5、第 3 个 5、第 4 个 5 等等。

可能是根视图控制器先收到通知，然后未能将通知传递给其子级视图控制器？

我没主意了。

## 更新 - 找到罪魁祸首！

我终于知道它坏在哪里了。什么皮塔饼。

在我之前的 viewDidLoad 方法中，我是这样的：

```
-(void)viewDidLoad
{
    ...
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doSomething:) name:@"notif_batchDownloaded" object:@"notif_batchDownloaded"];
    ...
} 
```

这里的问题是我传入的“object”参数。我使用通知的名称作为“object”字段的参数，但这不知何故导致我的 doSomething() 方法永远不会被执行。

我删除了 object 参数，现在它可以工作了。

新的 viewDidLoad() 应该是这样的：

```
-(void)viewDidLoad
{
    ...
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doSomething:) name:@"notif_batchDownloaded" object:nil];
    ...
} 
```

我原本以为我可以像某种标记一样使用“对象”参数来帮助我的回调方法识别在我将多个通知发送到同一个回调方法的情况下发送了哪个通知。

快速阅读 Apple 文档会发现 object 参数用于识别观察者从哪个对象观察通知。即多个对象可以发送相同的通知，该对象参数字段标识它希望仅从哪个对象接收通知。

例如

视图控制器 A 和视图控制器 B 都 postNotificationName:@"notif_foo"。

视图控制器 C 将自己添加为通知“notif_foo”的观察者，但它可以通过将视图控制器 A 指定为对象参数来选择仅从视图控制器 A 接收“notif_foo”。

愚蠢的我没有意识到在我的通知回调方法中我可以去：

```
if([notification name] isEqualToString:@"notifName"])
{
   ...
}
else
{
   ...
} 
```

希望这可以帮助其他任何在这个问题上拉扯头发的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:28:49.953

您可以在 appdelegate 中设置标志，以告知选择了哪个控制器。然后发布该控制器的通知。注意这里你需要在你想要发布通知的所有类中实现你的代码，特别是如果有 ui 更改或类被释放

# google-app-engine - 每次我使用我的网络应用程序时，我都会再次创建我的数据表。如何解决这个问题？

> ID：10414639
> 
> 赞同：0
> 
> 时间：2012-05-02T13:22:08.950
> 
> 标签：google-app-engine, google-cloud-datastore

我正在学习在谷歌应用引擎上开发网络应用程序，但遇到了麻烦。我的应用程序中有一些默认用户，我编写了一个函数 createDefaultUsers 来使用我的 python 文件中的信息列表创建一个用户表。我希望每次使用我的应用程序时只创建一次这个用户表，数据就在那里。但是你知道，createDefaultUsers 函数在我的 python 文件中，所以，每次我使用我的应用程序时，我只是一次又一次地创建这个 User 表。OGM~我该如何解决这个问题？

另一个问题：如何清除我的本地数据存储？它可以帮助我调试我的应用程序，你知道，有时我只想重新开始。

- - - - - - - 更新 - - - - - - - -

例如，这里有一些默认用户：

```
defaultUsers = [
('qingWANG','wang123456','wangqing@saad.com','teacher'),
('stevenYANG','123456','yifan@gmail.com','student'),
('jingZHU','zhu123456','zhujing@example.com','student'),
('conghuiHE','he123456','conghui@where.com','student'),
('lianDUAN','duan123456','duanlian@what.com','student'),
('xinHAO','hao123456','haoxin@example.com','student')] 
```

这是我创建用户的函数：

```
def createDefaultUsers():
"""
create default user table
"""
for user in defaultUsers:
    users = Users(name = user[0], password = user[1],
                  email = user[2], role = user[3])
    users.put() 
```

在我的第一个想法中，我将 createDefaultUsers 放在这里：

```
def main():
    createDefaultUsers()
    run_wsgi_app(app)
if __name__ == "__main__":
    main() 
```

在我的本地测试中很好。但是当我部署它时，它不起作用（似乎没有创建用户）。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:13:36.037

您可以轻松地修改该函数以检查是否有任何现有用户，如果有，请不要创建它们：

```
def createDefaultUsers():
    """
    create default user table
    """
    user_count = Users.all().count(1)
    if user_count == 0:
        for user in defaultUsers:
            new_user = Users(name = user[0], password = user[1],
                  email = user[2], role = user[3])
            new_user.put() 
```

请注意，`count()`查询操作很昂贵，因为它实际上是从数据存储中检索所有实体以对它们进行计数，因此通常应避免这种情况，但通过将限制指定为 0，我们可以使其简单快捷在这种情况下。

您可以通过将命令行参数传递`--clear-datastore`给开发服务器来清空您的开发数据存储。这是所有`dev_appserver.py` [命令行参数](https://developers.google.com/appengine/docs/python/tools/devserver#Command_Line_Arguments)

# java - 黑莓启动浏览器，然后在短暂延迟后退出调用应用程序？

> ID：10414646
> 
> 赞同：0
> 
> 时间：2012-05-02T13:22:47.927
> 
> 标签：java, multithreading, blackberry, jad

有没有办法从本机应用程序启动 BlackBerry Browser，然后退出调用应用程序？

我想这样做的原因是，我启动浏览器来下载应用程序的新版本。升级工作正常，但原始应用程序仍在运行，因此手机必须重新启动才能完成安装。这个过程中的某些东西弄乱了 JAD 文件的内容……我依赖于 JAD 文件中的 ID。

此 ID（以及我在 JAD 文件中设置的所有其他属性）为 0。

我试图启动一个新线程，从新线程启动浏览器，从主线程执行 System.exit(0) 等等，但是如果不手动返回它退出，我永远无法使调用应用程序死掉它。

# java - 如何从 JList 中获取选定的文件

> ID：10414649
> 
> 赞同：1
> 
> 时间：2012-05-02T13:22:54.713
> 
> 标签：java, swing, jlist, selectedindex, listselectionlistener

我已经使用下面的代码通过 JFileChooser 在我的 JList 中添加了一个名为 test.xml 的文件；

```
for (File file : fileChooser.getSelectedFiles()) {
   vector.addElement(file);
}
System.out.println("Added..!!");
list.updateUI(); 
```

现在我必须从 Jlist 中选择一个文件，然后将其转换为另一个文档。如果我提供输入，则转换步骤有效；

```
File file = new File("test.xml"); 
```

但如果我给它，它就不起作用；

```
for (int j : list.getSelectedIndices()) {
   File file = vector.elementAt(j);
   //-------code for conversion-------//
} 
```

列表及其向量是使用以下代码创建的：

```
 vector = new Vector<File>(); 
                 final JList list = new JList(vector);    
                 scrollPane.setViewportView(list);" 
```

谁能告诉我如何从 JList 中选择该特定文件以进行转换？提前谢谢..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:29:12.650

`JList`有方法

```
public Object getSelectedValue()
public Object[] getSelectedValues() 
```

使用它们来获取文件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T13:50:23.903

我对 StanislavL 建议的代码或使用您的代码完全没有问题。您的代码中必须有其他内容您没有向我们展示。这是一个 SSCCE 表明它有效

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class Test {

    public static void main(String... args) {
        JFrame frame = new JFrame();
        final Vector<File> files = new Vector<File>();
        final JList list = new JList(files);
        list.setVisibleRowCount(5);
        final JButton selectFile = new JButton("Select file...");
        selectFile.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JFileChooser fileChooser = new JFileChooser();
                fileChooser.setMultiSelectionEnabled(true);
                fileChooser.showOpenDialog(selectFile);
                if (fileChooser.getSelectedFiles() != null) {
                    for (File file : fileChooser.getSelectedFiles()) {
                        files.add(file);
                    }
                    list.updateUI();
                }

            }
        });
        final JButton click = new JButton("Click me");
        click.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                StringBuilder sb = new StringBuilder("The following files are selected in the list:\n");
                /*for (Object o : list.getSelectedValues()) {
                    sb.append(((File) o).getAbsolutePath()).append('\n');
                }*/
                for (int i : list.getSelectedIndices()) {
                    sb.append(files.get(i).getAbsolutePath()).append('\n');
                }
                JOptionPane.showMessageDialog(click, sb.toString());
            }
        });
        JPanel panel = new JPanel(new BorderLayout());
        panel.add(selectFile, BorderLayout.WEST);
        panel.add(click, BorderLayout.EAST);
        JScrollPane scrollPane = new JScrollPane(list);
        panel.add(scrollPane);
        frame.getContentPane().add(panel);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

# javascript - h如何获取 contentEditable div 的插入符号位置？

> ID：10414654
> 
> 赞同：1
> 
> 时间：2012-05-02T13:23:14.597
> 
> 标签：javascript, jquery, contenteditable, jquery-events, rich-text-editor

我正在为我的博客网站制作文本编辑器。我想给用户一个小工具箱，他们可以在其中通过选择文本并应用一些样式来编辑他们的博客文章，例如使所选文本变为粗体或斜体或为所选文本赋予一些颜色。还有用于插入图像和视频链接的选项。

我搜索了 Stack Overflow，但找不到任何令人满意的解决方案。

如果有人可以帮助我找到插入符号位置以进行选择（或不选择），那就太好了。我尝试了 jQuery caret 插件，但它不起作用。

我的代码看起来像这样（仅在阅读 Stack Overflow 上的帖子时到达这里）：

HTML：

```
<div id="editor" contentEditable="true">
     Initial text...
</div> 
```

在一个单独的 JS 文件中：

```
(function(){
$("#editor").bind("keydown keypress mousemove", function() {
        alert("Current position: " + $(this).caret().start);
    });
}()); 
```

当页面加载并且按键或任何事件没有发生任何事情时，我在 Firebug 中收到以下错误：

它说：

> f.value 未定义

我也试过[这个链接](https://stackoverflow.com/questions/3972014/get-caret-position-in-contenteditable-div)

但如果原始 div 中有任何其他标签，此处提供的解决方案将不起作用。

**请帮忙**。此外，如果您有一些更好的可能解决方案或完全不同的方法，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:58:04.367

jQuery caret 插件（我假设你的意思是[这个](http://archive.plugins.jquery.com/project/jCaret)）仅适用于文本输入和文本区域。Contenteditable 元素的工作方式非常不同，这就是它不起作用的原因。

如果您想要插入符号位置或字符偏移方面的选择，[我的回答](https://stackoverflow.com/a/9841644/96100)可能会有所帮助，尽管通常对于您想要做的事情来说，这些数字不会很有帮助。在我看来，您似乎需要查看[`document.execCommand()`](https://developer.mozilla.org/en/Rich-Text_Editing_in_Mozilla#Executing_Commands).

# mysql - 如何返回以字段值作为列标题的结果集？

> ID：10414656
> 
> 赞同：0
> 
> 时间：2012-05-02T13:23:22.467
> 
> 标签：mysql

这是我所拥有的粗略想法：

```
+---------------+   +-----------------+    +---------------+
| customers     |   | transactions    |    | branches      |
+---------------+   +-----------------+    +---------------+
| customerid    |   | orderid         |    | branchid      |
|               |   | customerid (FK) |    |               | 
|               |   | branchid (FK)   |    |               | 
+---------------+   | datetime        |    +---------------+
                    +-----------------+ 
```

我将如何创建一个查询来获取每天/每周/等的交易计数。但是对于每个 branchid**分别**？

我试过这样的工会（只计算所有星期六）。这给出了一个结果，但不是所需的格式。

```
SELECT COUNT(orderid) as count1 FROM transactions WHERE WEEKDAY(datetime) = 5 
AND branchid = 'branch1' 
UNION 
SELECT COUNT(orderid) as count2 FROM transactions WHERE WEEKDAY(datetime) = 5 
AND branchid = 'branch2' 
```

返回：

```
+------------+
|   count1   |
+------------+
|        152 |
|         48 |
+------------+ 
```

而我希望数据格式如下：

```
+------------+------------+
|   count1   |   count2   |
+------------+------------+
|        152 |         48 |
|            |            |
+------------+------------+ 
```

有人对如何做到这一点有任何提示吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:27:48.127

奇怪的是，您希望它作为列而不是行，但我相信这应该满足您的要求：

```
SELECT
(SELECT COUNT(orderid) as count1 FROM transactions WHERE WEEKDAY(datetime) = 5 
AND branchid = 'branch1'),
(SELECT COUNT(orderid) as count1 FROM transactions WHERE WEEKDAY(datetime) = 5 
AND branchid = 'branch2') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:28:11.613

有几种方法可以做到这一点。使用`UNION`已有的，您可以围绕子查询构建数据透视查询。`name`此版本为原始 UNION 中的每个列添加一个静态，并使用它们来区分`CASE`外部查询的语句。

在您的情况下，可以使用`SELECT`列表中的子选择来完成，但是此方法更可扩展为其他类型的透视查询，并且是实现它们的更通用约定。

```
SELECT 
  SUM(CASE WHEN name = 'count1' THEN counts ELSE 0 END) AS count1,
  SUM(CASE WHEN name = 'count2' THEN counts ELSE 0 END) AS count2
FROM (
   SELECT 'count1' as name, COUNT(orderid) as counts FROM transactions WHERE WEEKDAY(datetime) = 5 
     AND branchid = 'branch1' 
   UNION 
   SELECT 'count2' as name, COUNT(orderid) as counts FROM transactions WHERE WEEKDAY(datetime) = 5 
     AND branchid = 'branch2'
) subq 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:26:39.783

在 SELECT 部分，使用 CASE 并检查它是 branch1 还是 branch2。您可以在 SELECT 中为每个列定义单独的列。而且你不需要做一个 UNION - 你可以做一个 GROUP BY branchid WHERE branchid in ('branch1','branch2')。有道理？

# azure - MS Azure Autoscaling - 无法识别反应规则的目标

> ID：10414658
> 
> 赞同：1
> 
> 时间：2012-05-02T13:23:23.987
> 
> 标签：azure, azure-worker-roles, autoscaling, azure-autoscaling-block

我正在尝试为我的 Azure 应用程序设置自动缩放解决方案。我让它对约束规则做出反应，但不能让它对反应规则做出反应。

我正在使用诊断记录来自自动缩放的所有消息（使用 P&P 自动缩放块） - 所以我可以看到自动缩放器看到了我的反应规则，但目标没有被识别。比如这样：

```
<TraceSource>Autoscaling General</TraceSource>
<Object>Rule match.
[BEGIN DATA]
{"EvaluationId":"67281173-085f-49a1-95f8-0b9c50a4de7d",
 "MatchingRules":
    [{"RuleName":"Default constraints for all roles",
      "RuleDescription":"SLA rule",
      "Targets":["JobsRole","RESTAPI","Web"]},
     {"RuleName":"scaleWebApi",
      "RuleDescription":"Scale up when cpu average over 5%",
      "Targets":[]},
     {"RuleName":"scaledownWebApi",
      "RuleDescription":"Scale down when cpu avg under 5%",
      "Targets":[]}]}
</Object> 
```

其中反应规则定义为：

```
<reactiveRules>
  <rule name="scaleWebApi"
      description="Scale up when cpu average over 5%" rank="2" enabled="true">
    <when>
       <any>
          <greater operand="RESTAPI_CPU_Avg" than="5" />
       </any>
    </when>
    <actions>
        <scale target="RESTAPI" by="1" />
    </actions>
  </rule>
  <rule name="scaledownWebApi" rank="2" enabled="true"
       description="Scale down when cpu avg under 5%">
    <when>
      <all>
        <lessOrEqual operand="RESTAPI_CPU_Avg" than="5" />
      </all>
    </when>
    <actions>
      <scale target="RESTAPI" by="-1" />
    </actions>
  </rule>
</reactiveRules> 
```

我的约束规则——它们确实有效

```
<constraintRules>
  <rule name="Default constraints for all roles"
       description="SLA rule" enabled="true" rank="0">
    <actions>
      <range target="JobsRole" min="1" max="5" />
      <range target="RESTAPI" min="1" max="5" />
      <range target="Web" min="1" max="5" />
    </actions>
  </rule>
</constraintRules> 
```

和我的服务配置文件（仅角色的一部分）

```
<services>
  <service dnsPrefix="<dns>" slot="Production" scalingMode="Scale">
    <roles>
      <role alias="JobsRole" roleName="JobsRole" wadStorageAccountName="<mystore>" />
      <role alias="RESTAPI" roleName="RESTAPI" wadStorageAccountName="<mystore>" />
    </roles>
  </service>
  <service dnsPrefix="<dns>" slot="Production" scalingMode="Scale">
    <roles>
      <role alias="Web" roleName="Web" wadStorageAccountName="<mystore>" />
    </roles>
  </service>
</services> 
```

可能是什么问题，我该如何尝试并理解它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:01:52.363

这似乎是服务信息存储的问题（假设操作数设置正确，但您没有复制问题中的那些）。

在您定义的每个角色中，您需要将 wadStorageAccountName 设置为“友好”名称，而不是实际的连接字符串。然后在同一个 XML 文件中，定义该存储帐户真正指向的位置：

```
 <services>
    <service dnsPrefix="<dns>" slot="Production" scalingMode="Scale">
      <roles>
        <role alias="JobsRole" roleName="JobsRole" wadStorageAccountName="MyStorageFriendlyName" />
        <role alias="RESTAPI" roleName="RESTAPI" wadStorageAccountName="MyStorageFriendlyName" />
      </roles>
    </service>
    <service dnsPrefix="<dns>" slot="Production" scalingMode="Scale">
      <roles>
            <role alias="Web" roleName="Web" wadStorageAccountName="MyStorageFriendlyName" />
      </roles>
    </service>
  </services>
  <storageAccounts>
    <storageAccount alias="MyStorageFriendlyName" connectionString="DefaultEndpointsProtocol=https;AccountName=<accountName>;AccountKey=<accountKey>">
    </storageAccount>
  </storageAccounts> 
```

另请注意，此帐户必须是目标应用程序（在本例中为 RESTAPI 角色）将其性能计数器（经常）上传到的帐户，否则它将找不到任何数据以将其聚合并保存为数据点。

此外，请确保您的操作数将聚合定义为在至少 10 分钟的时间窗口内发生，否则由于所有这些进程的异步性发生（在一侧上传性能计数器数据，然后聚合数据并生成数据点，然后在单独的过程中评估规则），然后在评估规则时，您可能不会获得超过 5 分钟的新数据（这就是为什么至少 10 是一个好数字的原因）。

我希望所有这些都有助于澄清 Wasabi 中发生的事情。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:49:14.523

我无法在您的配置中发现任何错误。但请确保目标名称正确。它应该是角色名称。我想建议你检查一下[http://msdn.microsoft.com/en-us/library/hh680945(v=PandP.50).aspx](http://msdn.microsoft.com/en-us/library/hh680945(v=PandP.50).aspx)看看它是否有帮助。

此致，

明旭。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T13:38:26.393

我对 WASABi 了解不多，但我想推荐一个 azure 管理和自动缩放 SaaS 服务 - Opstera 的 AzureOps，它将通过简单直观的 UI 为您完成这项工作。无需额外的基础设施或编码。请在此处查看我们[AzureOps](http://www.opstera.com)

感谢
Opstera 支持

# php - 无法在从 HTML 生成的 PDF 中获取背景颜色

> ID：10414663
> 
> 赞同：1
> 
> 时间：2012-05-02T13:23:28.523
> 
> 标签：php, pdf-generation, html2pdf

我正在使用以下代码从我拥有的 HTML 生成 PDf，但我没有获得提供的 HTML 中的背景颜色。我得到一个白色的背景。

```
$content = "
<html>
<body bgcolor='#E6E45A'>
<h1>Hello world!</h1>
</body>
</html>";
     require_once('html2pdf_v4.03/html2pdf.class.php');
    try
    {
        $html2pdf = new HTML2PDF('P', 'A4', 'fr');
        $html2pdf->writeHTML($content, isset($_GET['vuehtml']));
        $html2pdf->Output('exemple01.pdf','D');
    }
    catch(HTML2PDF_exception $e) {
        echo $e;
        exit;
    } 
```

如何在我正在使用的**html2pdf中实现这一点。**

**添加：**

但是，它确实支持 tag 和 backcolor='#AAAACC' 在它里面工作。但我需要一些更广泛接受的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:53:22.203

也许该库无法识别已弃用的`bgcolor`属性。请尝试使用 style 属性。

```
$content = '
<html>
<body style="background: #E6E45A;">
<h1>Hello world!</h1>
</body>
</html>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T14:58:36.517

参考**example08.php**你会注意到：

```
<page backcolor="#48626f" style="">
    <!-- // rest of the page HTML in here -->
</page>
```

# sql-server - 搜索可以获取紧密匹配数据的网格视图

> ID：10414666
> 
> 赞同：0
> 
> 时间：2012-05-02T13:23:47.053
> 
> 标签：sql-server, search, gridview

我有一个由 ObjectDataSource 填充的网格视图。我有可以搜索网格视图的搜索框。我的搜索查询如下，仅当搜索框中的值与网格视图中的数据完全匹配时才有效。

从 Table_1 中选择 JobNo、AccountName、City，其中 JobNo=@JobNo AND AccountName=@AccountName

假设表中的数据如下，1234, Chris Smith, Chicago 5678, John Doe, New York 8789, Tim May, San Diego

因此，要使上述搜索查询正常工作，需要在搜索框中输入 JobNo=1234 和 AccountName=John Doe。如果我只搜索 JobNo=1234 和 AccountName=John 它不会给出任何结果。

因此，即使我将部分名称放在搜索框中，我也需要让我的查询显示结果。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:34:39.217

对于您描述的特定场景，请使用

```
SELECT JobNo, AccountName, City FROM Table_1 WHERE JobNo = @JobNo AND AccountName LIKE @AccountName + '%' 
```

# android - Android中上下文菜单的项目分隔符

> ID：10414668
> 
> 赞同：4
> 
> 时间：2012-05-02T13:23:54.933
> 
> 标签：android

是否可以在 Android 的上下文菜单中的菜单项之间添加分隔符？我在文档中没有看到任何相关说明。显然，在某些情况下，当它们执行不同类型的操作时，菜单项应该分开。

注意。问题是关于上下文菜单，而不是选项菜单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T10:11:56.520

首先，我只想到了一种解决方法——上下文菜单的自定义实现，例如[图标上下文菜单](http://code.google.com/p/iconcontextmenu/)。这样的代码允许将菜单项类扩展到具有自定义视图的特定菜单分隔符类。

[...但一段时间后我发现...]

另一个（更简单）的解决方案可能是添加一个带有一行“_”（下划线）字符的菜单项（令人惊讶的是，这是*标准*Android 字体中唯一可以平滑地并排显示多个实例而没有间隙的符号），然后使用 . 对齐 Java 代码中的项目文本`SpannableString`。

**字符串资源**：

```
<string name="hr">______________________________</string> 
```

适当调整字符串长度。

**菜单布局**：

```
<group android:checkableBehavior="none" android:enabled="false">
   <item android:id="@+id/menu_gap"
      android:title="@string/hr"
      android:enabled="false" />
</group> 
```

**爪哇**：

```
private void alignCenter(MenuItem item)
{
    SpannableString s = new SpannableString(item.getTitle());
    s.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_CENTER), 0, s.length(), 0);
    item.setTitle(s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-31T17:37:35.550

我无法发表评论，也许我来晚了，但我希望这会对某人有所帮助。据我所知：如果您通过 ContextMenu.setGroupDividerEnabled 启用此功能，Android 会在组之间添加分隔符。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenu.ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, view, menuInfo);
    menu.setHeaderTitle(R.string.choose_action);
    menu.add(0, MENU_ITEM_CREATE, 0, R.string.create);
    menu.add(1, MENU_ITEM_CHECK, 0, R.string.check);
    menu.add(2, MENU_ITEM_EDIT, 0, R.string.edit);
    menu.add(2, MENU_ITEM_DELETE, 1, R.string.delete);

    // Enable group separator
    menu.setGroupDividerEnabled(true);
} 
```

[https://developer.android.com/reference/android/view/Menu#setGroupDividerEnabled(boolean)](https://developer.android.com/reference/android/view/Menu#setGroupDividerEnabled(boolean))

# php - 客户端的实时 HTML 编辑器

> ID：10414670
> 
> 赞同：0
> 
> 时间：2012-05-02T13:24:06.413
> 
> 标签：php, html

我正在为客户创建一个网站/网络应用程序，如果可以的话，它们并不是真正的技术。我将为他们创建一个非常简单的内联 HTML 编辑器，因此他们可以在他们的网站上更改自己的内容，而无需我在未来为他们做这件事。

我需要的是文本格式以及创建和正确使用基本 HTML 标记的逻辑，例如：a、img、h1-h6、p 和一些自定义 div，我用它们来获取一些特殊的标题类型等等。

不过，我想问的是：您认为我可以为这项任务获得可用结果的最快/最简单的方法是什么？

我知道我需要能够打开有问题的 html 文件进行编辑，当他们单击“保存”时，它需要将更改写入同一个文件。不仅如此，我还需要以某种方式“隐藏” HTML 中的所有高级代码（或者在这种情况下，它是 PHP 文件），例如 javascript 和 PHP 代码。

任何帮助或指向一个好方法的指针将不胜感激。我有时间限制，所以编辑器不要太复杂或太高级。只是能够提供必要的工具来添加文本/图像/链接和格式选项。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:28:41.493

看一下：

```
http://www.tinymce.com/ 
```

它提供了可定制的所见即所得。您可以打开或关闭您需要的任何功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T00:05:08.917

另一个非常强大和流行的所见即所得可定制编辑器是[ckeditor](http://ckeditor.com/)

# linq - Linq to Entities - 投影到对象中，搜索所有字段但只返回一个单一属性

> ID：10414671
> 
> 赞同：1
> 
> 时间：2012-05-02T13:24:07.090
> 
> 标签：linq, entity-framework, return-value, projection, entities

我很好奇在使用 Linq to Entities 投影到新对象时是否有一种方法，将 .Where 扩展添加到初始 Linq 查询（延迟执行和一些动态 lambda 表达式的构建）以进一步过滤基于属性的查询的投影对象，但（这里是主要问题）只从数据库返回一个属性（比如一个 ID 字段）（生成的选择语句只有一个返回值）。

所以我想更改以下内容：

```
 employees = from e in context.Employee
                    select new EmployeeObject()
                    {
                            EmployeeId = e.EmployeeId,
                            EmployeeFirstName = e.FirstName,
                             EmployeeLastName = e.LastName
                    }; 
```

这样我就可以在 .Where 中附加带有 lambda 扩展名的员工，以进一步缩小搜索范围，但只返回 EmployeeId 并让生成的 SQL 反映这一点。

我仍在学习 Linq to Entities，所以如果我没有正确描述某些内容，请原谅我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:28:16.823

你可以这样做：

```
var employeeIds = from e in context.Employee
                  select new {
                      EmployeeID = e.EmployeeId
                  }; 
```

它只会通过匿名类型返回您需要的一个属性。或者：

```
var employeeIds = context.Employee.Where(/*filters...*/).Select(e => e.EmployeeId);
// another alternative: 
var employeeIds = from e in context.Employee select e.EmployeeId; 
```

那只会给你ID。

**编辑**：
只要您不枚举查询，就不会执行查询。
所以如果你说

```
var query = context.Employee; 
```

您有一个非常简单的查询，您可以根据需要使用附加子句进行装饰：

```
query = query.Where(e => e.LastName.StartsWith("S"));
query = query.Where(e => e.FirstName == "Blah"); 
```

所有这些添加都不会执行查询，因此只要您的 ObjectContext 有效，您就可以像这样优化您的查询。

完成添加子句后，您可以添加最终投影

```
var results = query.Select(e => e.EmployeeId); 
```

只有这样你才应该在`results`某处枚举或使用它。当然，您只能在执行过滤*后*添加投影，因为根据定义，投影只会删除 EmployeeId 以外的所有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:28:52.663

不确定我是否完全理解，但你不能这样做：

```
context.Employee.Where(x => x.FirstName = "Bob").Select(x => x.Id); 
```

# javascript - 收集数字和数学

> ID：10414675
> 
> 赞同：0
> 
> 时间：2012-05-02T13:24:19.490
> 
> 标签：javascript

所以我正在创建一个页面，向用户询问两个数字并将它们作为参数发送给四个算术函数，加法、乘法、除法和模数，我希望这些函数将值返回给调用模块。

我对如何使用该功能感到困惑，这是我到目前为止所拥有的。

我有加法，但我对如何为乘法、除法和模数执行此操作感到困惑。基本上，它收集数字并显示它们的加法、乘法、除法和模数。这是我的代码...

```
<html>
<head>
<script type="text/javascript">
function add(number1, number2)
{
return number1 + number2;
}

var theFirstNumber = prompt("What is the first number?");
var theSecondNumber = prompt("What is the second number?");

var additionResult = add(theFirstNumber, theSecondNumber);

document.write(additionResult);
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:31:41.953

prompt 函数返回一个字符串，因此当您调用 add() 函数时，它只是连接值（这就是运算符`+`对字符串所做的）。作为快速修复，只需将变量转换为数字（即使用[parseFloat()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)）：

```
function add(number1, number2)
{
    return parseFloat(number1) + parseFloat(number2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:36:26.247

```
function multiply(n1, n2) {
    return n1 * n2;
}

function divide(n1, n2) {
    return n1 / n2;
}

function modulus(n1, n2) {
    return n1 % n2;
}

var theFirstNumber = parseInt(prompt("What is the first number?"));
var theSecondNumber = parseInt(prompt("What is the second number?"));

var multiplyResult = multiply(theFirstNumber, theSecondNumber);
var divideResult = divide(theFirstNumber, theSecondNumber);
var modulusResult = modulus(theFirstNumber, theSecondNumber);

document.write("Multiply Result: " + multiplyResult + "<br/>");
document.write("Divide Result: " + divideResult + "<br/>");
document.write("Modulus Result: " + modulusResult + "<br/>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:37:32.070

> 我有加法，但我对如何为乘法、除法和模数执行此操作感到困惑。

您将以与添加相同的方式处理此问题：

```
function multiply(number1, number2)
{
    return number1 * number2;
}
function divide(number1, number2)
{
    return number1 / number2;
}
function modulus(number1, number2)
{
    return number1 % number2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:40:11.787

我不确定你上面的代码是如何工作的。使用 prompt 将值视为字符串，因此您将值连接在一起 (1 + 1 = 11)。您需要按照 Gerado 的说明使用 parseFloat 或者您可以使用 Number() 函数。

作为旁注，这对于测试来说非常好，但您还应该包括一些错误捕获来解释非数值。（查看 IsNumeric() 函数）

```
 function add(number1, number2)
    {
    return number1 + number2;
    }

    var theFirstNumber = prompt("What is the first number?");
    var theSecondNumber = prompt("What is the second number?");

    var additionResult = add(Number(theFirstNumber), Number(theSecondNumber));

    document.write(additionResult);​ 
```

# mysql - 在 Perl 中爬行期间 MySQL 服务器已消失

> ID：10414682
> 
> 赞同：1
> 
> 时间：2012-05-02T13:24:55.883
> 
> 标签：mysql, perl, web-crawler, www-mechanize

我使用 WWW::Mechanize 库来获取 URL 的内容并将它们的数据保存到 mysql 表中。但是当页面的内容太大时，它会给出这个错误信息：

> DBD::mysql::st 执行失败：MySQL 服务器已在 F:\crawling\perl_tests\swc2.pl 第 481 行消失。

例如，当我尝试提取此页面的内容时，它会引发此错误：[https ://www.e-conomic.com/secure/api1/EconomicWebService.asmx?wsdl](https://www.e-conomic.com/secure/api1/EconomicWebService.asmx?wsdl)

我也添加了这段代码，但它仍然不起作用

```
$connection->{max_allowed_packet}=1000000000; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T13:29:28.210

您使用的是最新的 DBI 和 DBD::mysql 吗？它应该启用 mysql_auto_reconnect。

如果你在 forks 下使用 mysql，你可能需要设置

```
$dbh->{InactiveDestroy} = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:50:26.303

您可能想查看[DBIx::Connector](https://metacpan.org/module/DBIx%3a%3aConnector)。从文档：

> 您可以将连接存储在您的应用程序中您可以轻松访问它的某个位置，只要它保持在范围内，它就会尽最大努力维护数据库连接。甚至跨分支（尤其是 DBI 1.614 和更高版本）和新线程，甚至调用 $conn->dbh->disconnect。当您不再需要它时，让它超出范围，数据库连接将被关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:47:34.757

尝试添加

```
max_allowed_packet=32M 
```

在 MySQL 配置文件中

# javascript - 使用手机中的 T9 字典为自己的聊天应用程序

> ID：10414683
> 
> 赞同：1
> 
> 时间：2012-05-02T13:24:56.973
> 
> 标签：javascript, mobile

我正在使用 Rhomobile (Ruby) 编写一个聊天应用程序。我正在使用javascript来实现这一点。是否有可能激活电话上已经存在的 T9 字典的使用，以便 textarea (newmsg_body) 发送消息？

```
 <div id="inner">
        <span id="inputspan"><input type="text" id="newmsg_body" /></span>
        <input type="button" value="Send" id="newmsg_sendbutton" onclick="sendMessage();" />
      </div> 
```

Google Talk 也使用这个。我想要相同的功能。

谢谢 ！

# android - 游标索引越界异常

> ID：10414698
> 
> 赞同：0
> 
> 时间：2012-05-02T13:25:50.540
> 
> 标签：android

我目前正在做我的最后一年的安卓应用项目。我试图制作一个登录模块，但它总是给我该部分的错误：

> android.database.CursorIndexOutOfBoundsException：请求索引-1，大小为1

“大小为 1”是我尝试获取的用户数据；但是，我不知道从这里去哪里。谁能帮我解决这个问题？这是我的代码：

```
 Cursor c = agentDatabase.rawQuery("SELECT COUNT(username) FROM " + DATABASE_TABLE + " WHERE " + KEY_USERNAME + " = ? AND " +KEY_PASSWORD + " = ?", new String[]{user, pass});

    String result = "";

    if(c != null && c.moveToPosition(0)){
        //if (c.moveToFirst()){

            int r = c.getCount();

            if(r == 1){
                //Cursor d = agentDatabase.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE " + KEY_USERNAME + " = '" + user + "'", new String[]{ KEY_ROWID, KEY_NAME, KEY_EMAIL, KEY_USERNAME});

                Cursor d = agentDatabase.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE " + KEY_USERNAME + " = ?", new String[]{user});

                int iRow = d.getColumnIndex(KEY_ROWID);
                int iName = d.getColumnIndex(KEY_NAME);
                int iEmail = d.getColumnIndex(KEY_EMAIL);
                int iUser = d.getColumnIndex(KEY_USERNAME);

                result = result + d.getString(iRow) + " " + d.getString(iUser) + " " + d.getString(iName) + " " + d.getString(iEmail) + "\n";

            }
        //}
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:30:57.597

您应该在获取数据之前将光标移动到第一行

```
Cursor d = agentDatabase.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE " + KEY_USERNAME + " = ?", new String[]{user});
d.moveToFirst(); 
```

如果您只希望结果游标中有一行，这将起作用，否则您可以使用`d.move`.

# jquery - 道具（“禁用”，真）；AND attr('disabled', 'disabled') 在 chrome 和 firefox 中不起作用

> ID：10414703
> 
> 赞同：9
> 
> 时间：2012-05-02T13:25:56.187
> 
> 标签：jquery

我的 asp.net mvc 视图中有以下脚本：-

```
function disableform(id) {
    $('#' + id).prop("disabled", true);
} 
```

但是上述功能只会禁用使用Internet Explorer的元素，但无法在chrome或firefox上运行，我也尝试写`attr('disabled', 'disabled')`而不是`.prop("disabled", true);`，但它没有解决问题。

**我的 Jquery 版本是 1.7.1**

那么可能是什么问题呢？

BR

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T13:34:29.200

禁用**表单**是错误的！IE只是把它搞砸了！你应该禁用字段。

```
function disableform(id) {
    $('#' + id+' :input').prop("disabled",true);
}​ 
```

[演示](http://jsfiddle.net/EGgzT/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T21:00:32.370

我运行 ASP.NET 并遇到了同样的问题。

我放弃了 Jquery，转而使用纯 Javascript，效果很好。

```
 var element = document.getElementById('MyID');
    element.setAttribute('disabled', 'disabled'); 
```

编辑：要使其正常工作，您必须使用 element.removeAttribute('disabled'); 启用元素时。否则，它将保持禁用状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T20:47:03.470

我无法让它在 chrome 中删除该属性，所以我只是添加了 disabled 类，它不是真正的禁用，但它适用于 IE 和 Chrome

```
$('#search').on('click', function (event) {
    $('#search').text("Searching");
    $('#search').addClass("disabled");
    return true;
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-23T20:11:31.357

```
function SwapA(SwapActivation)  {
for (i=1;i==5;i++) {
if (i != SwapActivation) {
    // All Browsers supported .....
    $("input[name=pg1"+i+"]").prop('disabled', true);
    $("input[name=pg2"+i+"]").prop('disabled', true);
}
else {
    //   JQuery 1.10+ _&&_  Opera 12  and All other browsers...  !!!!
    if ( $("input[name=pg1"+i+"]").prop('disabled') === true)
        $("input[name=pg1"+i+"]").prop('disabled', false);
    if ( $("input[name=pg2"+i+"]").prop('disabled') === true)
        $("input[name=pg2"+i+"]").prop('disabled', false);

    //   works =  JQuery 1.10+ _&&_  Opera 12.16 + Firefox 24;
    //   do not work "Opera 17.0.1241.53", "Chrome" v.30.0.1599.101 m
    $("input[name=pg1"+i+"]").removeProp('disabled');
    $("input[name=pg2"+i+"]").removeProp('disabled');
    //   .removeProp() is affects negative

    //   works possible = JQuery 1.4.x  :
    $("input").attr('name','pg1'+i)[0].removeProp('disabled');
    $("input").attr('name','pg2'+i)[0].removeProp('disabled');
}}} 
```

有用吗？:)

# python - 根据使用 etree/python 的父级不同地对待相同的 XML 标记？

> ID：10414709
> 
> 赞同：1
> 
> 时间：2012-05-02T13:26:11.640
> 
> 标签：python, xml, elementtree

我正在使用[python 脚本](http://pastebin.com/D9DkQdEv)来解析 XML 并从中创建一个 python 文件。

在顶层，XML 看起来像；

```
<stage id="stage1">
    <initialise>
    </initialise>
    <execute>
    </execute>
</stage> 
```

这是完整 XML 的[示例](http://pastebin.com/vRRxfWiA)。很复杂的东西。

我已经编写了一个解析器来处理大多数事情，但在这种情况下，是否可以检查树是否在 the`</initialise>`之前出现`<execute>`，以便以不同方式识别。

您可以使用`elem[x]`type 方法或 XPath 来做到这一点吗？

```
<initialise>
    <variable id="maxLimit" value="0" type="Integer">
        <validate>
            <regularExpression></regularExpression>
        </validate>
        <execute>
        </execute>
    </variable>
</initialise>
<execute> # treat this differently 
```

抓取执行元素的 Python 如下所示；

```
def parse_execute(self, elem):

    if elem[0].tag == 'required': #or elem[0].tag == 'variable':
        self.loop(elem)
    else:
        self.out('')
        self.out('def {0}():'.format(elem.tag))
        self.indent()
        self.loop(elem)
        self.dedent() 
```

# iphone - xocde4.2.1 中的 iPhone 应用开发目标更改

> ID：10414712
> 
> 赞同：1
> 
> 时间：2012-05-02T13:26:23.507
> 
> 标签：iphone, objective-c, xcode4.2

我已经在应用商店成功提交了我的应用并获得了苹果的批准，但应用开发目标是 5.0 并在 Xcode 4.2.1（mac os x）中开发。所以它没有安装在应用商店的 IOS 4 设备中，现在我该如何解决这个问题并在所有（即）IOS 3 设备上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:47:58.803

您需要将部署目标设置为您想要定位的任何**最低iOS 版本。**您可以在项目的目标中进行设置，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/f207d5ba9ba9c5e64c155fcd8d3df59d.png)

但是，最好将 Base SDK 保持在最新发布的版本；目前是5.1：

![在此处输入图像描述](../Images/ed6f0c5799c1c08de1cba888f580d8ba.png)

请注意，为了让人们现在能够在新的最低版本上下载您的应用程序，您需要将**新**的二进制文件重新上传到 App Store 以供审核和接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:28:51.560

如果我没记错，您需要重新构建您的应用程序，然后再次将其重新提交给苹果。

据我所知，没有其他方法可以更改目标设备..

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:34:05.480

试试这个U肯定能解决这个错误

在您的项目 -> 构建设置 -> 架构中，尝试添加 arm6 架构

在架构中添加 armv6 和 armv7

# javascript - Javascript 在 IE 和 Chrome 中不起作用

> ID：10414717
> 
> 赞同：0
> 
> 时间：2012-05-02T13:26:45.693
> 
> 标签：javascript, jquery

请帮忙！我有一个拇指图像链接在悬停时换出。它在 Firefox 和 Safari 中运行良好，但在 IE 和 Chrome 上不显示。我是 Javascript 新手，所以如果我遗漏了明显的内容，请原谅。先感谢您。

这是脚本：

```
$(document).ready (function(){
 var fadingImage;
  $(".fade").hover(function(){
    fadingImage = $(this).find("img").eq(1);
    fadingImage.stop(true, true).fadeIn(250);
    }, function(){
    fadingImage.stop(true, true).fadeOut(250);
  });
}); 
```

HTML 代码：

```
<section class="brands_list">
    <div style="display:block; width:290; height:160;"" class="fade">
      <a href="<?php echo get_bloginfo('siteurl')."/".$urlSlug."/".$brandSlug; ?>"><img src="<?php echo $brandLogo ?>" class="brand" alt="<?php echo $brandName ?>" width="290" height="160"/>
      <img src="<?php echo $brandImage ?>" class="brand" alt="<?php echo $brandName ?>" width="290" height="160"/>
      </a>
    </div>
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:29:24.977

`"`检查你的语法 - 你在这一行有一个额外的。

```
style="display:block; width:290; height:160;"" 
```

除此之外，您的代码在 IE7-10 中的行为与在 Chrome、Firefox、Opera、Maxthon 和 Safari 中的行为相同。这假设您的 PHP 不会产生格式错误的标签或任何东西。

演示：http: [//jsbin.com/ikotul/edit#javascript,html](http://jsbin.com/ikotul/edit#javascript,html)

我在所有浏览器中看到的行为如下。

```
+------------------------+
| |
| |
| 未悬停 |
| |
| |
+------------------------+
          （鼠标移到左图）
+------------------------+ +------------------------+
| | | |
| | | |
| 悬停 | | 变得可见 |
| | | |
| | | |
+------------------------+ +------------------------+
```

# objective-c - 子类化 NSNumber

> ID：10414718
> 
> 赞同：4
> 
> 时间：2012-05-02T13:26:51.680
> 
> 标签：objective-c

我想向 NSNumber 类添加一个属性，所以我必须对其进行子类化。文档指出我必须重写所有 NSValue 原始方法。由于 NSValue 文档没有说明哪些方法是原始方法，我认为这两个可能是实例化的原始方法：

```
– initWithBytes:objCType:  
+ valueWithBytes:objCType: 
```

所以我把我的课设为：

```
@interface MultipleNumber : NSNumber {  
    NSNumber *_number;  
}  
@property (nonatomic, getter = isMultiple) BOOL multiple;  
@end

@implementation MultipleNumber  
@synthesize multiple=_multiple;  

-(id)initWithBytes:(const void *)value objCType:(const char *)type {  
    self = [super init];  
    if (self) {
        _number=[[NSNumber alloc] initWithBytes:value objCType:type];
    }
    return self;
}

+(NSValue *)valueWithBytes:(const void *)value objCType:(const char *)type {
   return [[[MultipleNumber alloc] initWithBytes:value objCType:type] autorelease];
}

-(void)getValue:(void *)value { [_number getValue:value]; }

-(const char *)objCType { return [_number objCType]; }

@end 
```

但是当我调用 [NSNumber numberWithBool:YES] 时，我仍然得到一个 _NSCFBoolean 类，并且没有调用“原始方法”。我怎样才能弄清楚哪些方法被认为是原始的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T13:30:03.210

您无需子类化`NSNumber`即可添加属性。您可以使用[关联引用](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)更轻松地添加属性。子类化`NSNumber`非常棘手，因为它是一个类集群。

* * *

编辑：@Remco 在他对@diablosnuevos 的评论中提出了一个重要的观点，我想在回答中指出：

> 是的，我终于通过反复试验做了一个子类，因为返回的 NSNumbers 是共享实例，所以存储关联引用也是共享的。– Remco Poelstra 5 月 16 日 9:09

这是一件非常重要的事情要记住。`NSNumber`缓存从 -1 到 12 的整数并将它们视为单例。在 OSX 10.7 中，`NSNumber`它被实现为一个标记指针（尚未深入研究那里关联引用的含义）。关键是，虽然关联的引用非常有用，但可能有一些底层的实现细节会让你很头疼。

这里更深层次的教训是，子类化或扩充在任何情况下都`NSNumber` *可能*不是一个好主意。`NSNumber`是一个非常低级的对象。构建另一个拥有 an 的类几乎肯定会更好`NSNumber`，就像`NSAttributedString`拥有 an`NSString`而不是扩展`NSString`。

我不知道这里要解决的问题的具体情况，但是遇到的问题是一个有趣的教训。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T16:21:37.123

我发现上面的大多数答案都是不可接受的。很多时候，子类化可能是最好的设计选择。您获得 _NSCFBoolean 的原因是因为这就是便利方法 numberWithBool: 的设计目的——它方便地为您提供具有正确私有子类的 NSNumber。您应该编写自己的便捷方法，即 + (NSNumber*)numberWithMultiple...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T13:33:43.443

**编辑：注意评论中的警告！这对许多类来说都是一个很好的解决方案；它可能对 NSNumber、NSString 以及可能的其他类似 NSArray 等没有好处，因为它们出于性能原因而在幕后使用魔法，这可能会导致意外行为，例如共享实例。**

如何为自己省去子类化的痛苦，而是用一个类别来扩展类？

看看这里： http: [//oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)

# python - 如何修复 django 中的 valueerror？

> ID：10414719
> 
> 赞同：0
> 
> 时间：2012-05-02T13:26:52.440
> 
> 标签：python, django, django-models

我无法返回给定模型的列表。我有的模型：

```
class Club(models.Model):
    establishment = models.CharField(max_length=200)
    address = models.CharField(max_length=200)
    def __unicode__(self):
        return self.establishment

class Available(models.Model):
    club = models.ForeignKey(Club)
    court = models.CharField(max_length=200)
    avail_time = models.DateTimeField('available time')
    def __unicode__(self):
        return self.court 
```

我正在尝试运行“Available.objects.filter(club="AV Club") 但我得到“ValueError: invalid literal for int() with base 10: 'AV Club'”。我的最终目标是能够返回给定俱乐部的avail_times 列表。

关于如何解决的任何想法？这可能是一个超级基本的问题，但我是 django 的新手，并且一直在努力解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:29:35.423

`club`arg 应该是一个`Club`实例或其 pk （在您的情况下为整数）。你需要这个

```
Available.objects.filter(club__establishment="AV Club") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:31:41.200

外键关系通过使用`__`（双下划线）在 django 中跨越

所以`club`只是一个ForeignKey，它是一个整数，这就是你得到它的原因，`ValueError`所以看起来你想要的是建立，DrTyrsa 显示了一个关于如何查询它的示例。

您可以根据需要跨越尽可能多的外键关系（注意性能影响）

如果俱乐部有一个对国家的 FK 并且国家有一个代码字段，想象一下：

`Available.objects.filter(club__country__code="USA")`

[https://docs.djangoproject.com/en/dev/topics/db/queries/](https://docs.djangoproject.com/en/dev/topics/db/queries/)

# c++ - 找不到声明的函数

> ID：10414721
> 
> 赞同：0
> 
> 时间：2012-05-02T13:26:57.777
> 
> 标签：c++

我正在尝试制作一个面向对象的菜单，但是在初始化 int 变量并返回 int 函数时遇到了一些问题。

代码：

```
#include <Menu.h>
#include <iostream>
using namespace std;

void Menu::showMainMenu(){
    cout<<"""Main Menu"""<<endl;
    cout<<"1\. Manage students"<<endl;
    cout<<"2\. Manage assignments"<<endl;
    cout<<"3\. Manage statistics"<<endl;
    cout<<"4\. Print database"<<endl;
    cout<<"0\. Exit"<<endl<<endl;
}

void Menu::showStudentMenu(){
    cout<<"""Student Menu"""<<endl;
    cout<<"1\. Add student"<<endl;
    cout<<"2\. Remove student"<<endl;
    cout<<"3\. Edit student"<<endl;
    cout<<"4\. Print student"<<endl;
    cout<<"5\. Print students"<<endl<<endl;

}

void Menu::showAssignmentMenu(){
    cout<<"""Assignment Menu"""<<endl;
    cout<<"1\. Add assignment"<<endl;
    cout<<"2\. Remove assignment"<<endl;
    cout<<"3\. Edit assignment"<<endl;
    cout<<"4\. Print assignment"<<endl;
    cout<<"5\. Print assignments"<<endl<<endl;
}

void Menu::showStatisticsMenu(){
    cout<<"""Assignment Menu"""<<endl;
    cout<<"1\. Add assignment"<<endl;
    cout<<"2\. Remove assignment"<<endl;
    cout<<"3\. Edit assignment"<<endl;
    cout<<"4\. Print assignment"<<endl;
    cout<<"5\. Print assignments"<<endl<<endl;
}

string Menu::stringInputHandler(){
    string input;
    cout<<"enter:";  cin>>input; cout<<endl;

    if(!input.empty()){
        return input;
    }

    cout<<"Input cannot be empty"<<endl;
    stringInputHandler();
return "Error! (f:sIH)";
}

int intInputHandler(){
    int input;
    cout<<"enter:";  cin>>input; cout<<endl;

    if(input){
        return input;
    }

    cout<<"Input cannot be empty"<<endl;
    intInputHandler();
    return 0;
}

void Menu::CommandControllMain(){
    showMainMenu();
    int ret;
    ret = intInputHandler();

    while(ret){
        switch(ret){
        case 1:CommandControllStudent();break;
        case 2:CommandControllAssignment();break;
        case 3:break;
        case 4:break;
        case 0:break;
        default:cout<<"Wrong option selected!";break;
        }
    } 
}

void Menu::CommandControllStudent(){
    showStudentMenu();
    int ret = intInputHandler();

}

void Menu::CommandControllAssignment(){
    showAssignmentMenu();
    int ret =intInputHandler();

}

void Menu::CommandControllStatistics(){
    showStatisticsMenu();
    int ret =intInputHandler();

} 
```

所以有：`intInputHandler()`和一个var `int ret`，我不能做 int ret = intInputHandler();

错误：

```
D:\c++\Begin\Lab6-8_UML\Debug/../Menu.cpp:121: undefined reference to `Menu::intInputHandler()' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:27:33.897

代替

```
int intInputHandler() 
```

和

```
int Menu::intInputHandler() 
```

您不是在实现该成员，而是一个免费功能。

# perl - Perl 中的覆盖函数示例

> ID：10414728
> 
> 赞同：4
> 
> 时间：2012-05-02T13:27:24.763
> 
> 标签：perl, overriding

您能否详细说明 Perl 中的覆盖功能。一些简单的例子会很好理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:38:25.750

[perldoc CORE](http://perldoc.perl.org/CORE.html)显示了一个简单示例，说明如何覆盖内置的[hex](http://perldoc.perl.org/functions/hex.html)函数。

```
 BEGIN {
       *CORE::GLOBAL::hex = sub { 1; };
   }

   print hex("0x50"),"\n";                     # prints 1
   print CORE::hex("0x50"),"\n";               # prints 80 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T13:40:07.717

[http://perldoc.perl.org/perlsub.html#Overriding-Built-in-Functions](http://perldoc.perl.org/perlsub.html#Overriding-Built-in-Functions)

> 许多内置函数可能会被覆盖，尽管这应该只是偶尔尝试并且有充分的理由。通常，这可能由试图模拟非 Unix 系统上缺少的内置功能的包来完成。
> 
> 覆盖只能通过在编译时从模块中导入名称来完成——普通的预先声明是不够的。但是，use subs pragma 让您实际上可以通过 import 语法预先声明 subs，然后这些名称可能会覆盖内置名称：

例子：

```
use subs 'chdir', 'chroot', 'chmod', 'chown';
chdir $somewhere;
sub chdir { ... } 
```

* * *

***注：**以上内容均摘自以上链接*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:33:45.587

您可以使用[Sub::Override](http://p3rl.org/Sub%3a%3aOverride)，但我不知道它是否可以覆盖本机功能。

# c# - 将数据表写入excel模板并将背景色添加到excel中的一行

> ID：10414732
> 
> 赞同：1
> 
> 时间：2012-05-02T13:27:37.657
> 
> 标签：c#, asp.net, excel

在我正在处理的 ASP.Net 应用程序中，需要将 excel 发送到附加到邮件的客户端，我已经在服务器中创建了 excel 以便将其作为附件发送出去，并且服务器中没有安装办公室所以我不能使用 Microsoft.office.interop.excel ，excel有图像，一些文本和列是固定的，所以我想把它作为模板并将数据表写入它，我想给一行一些背景颜色并换行列的文本。

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:53:13.973

EPPlus 很棒[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:31:17.867

使用 Open XML SDK

[http://blogs.office.com/b/microsoft-excel/archive/2008/11/25/using-the-open-xml-sdk-to-work-with-excel-files.aspx](http://blogs.office.com/b/microsoft-excel/archive/2008/11/25/using-the-open-xml-sdk-to-work-with-excel-files.aspx)

[http://lateral8.com/articles/2010/3/5/openxml-sdk-20-export-a-datatable-to-excel.aspx](http://lateral8.com/articles/2010/3/5/openxml-sdk-20-export-a-datatable-to-excel.aspx)

# javascript - 如何使用jquery添加img标签的alt属性

> ID：10414733
> 
> 赞同：11
> 
> 时间：2012-05-02T13:27:39.133
> 
> 标签：javascript, jquery, html

我已经在页面中放置了一个谷歌地图，它制作了很多没有 alt 属性的 img 标签，我如何在 jquery 的 div 中为每个 img 添加 alt，我要做什么而不是：

```
$('#map_canvas > img[alt]').attr('image'); 
```

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T13:29:22.853

为所有图像设置替代文本：

```
$('#map_canvas > img').attr('alt', 'Alternative text'); 
```

为没有`alt`属性的图像设置替代文本：

```
$('#map_canvas > img:not([alt])').attr('alt', 'Alternative text'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T13:30:22.877

尝试：

```
$("#map_canvas > img:not([alt])").attr("alt", "<YOURALTTEXT>"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T13:30:28.937

这项工作：

```
$('#map_canvas').find('img:not([alt])').attr('alt', 'Alt text'); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T13:31:16.547

你可以这样做：

```
$('#map_canvas > img[alt=""]').each(function()
{
    $(this).attr('alt', $(this).attr('src');
}); 
```

这将找到`#map_canvas`其中没有`alt`标签的所有图像，然后将`alt`标签设置为与图像相同`src`。

或者，我建议：

```
$('#map_canvas > img[alt=""]').attr('alt', 'Alt text'); 
```

因为这只会将 alt 标签添加到没有标签的图像。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-02T13:31:39.633

```
$('#map_canvas > img').attr('alt', 'alt_text'); 
```

# windows-phone-7 - 从数据模板中的控件迭代 - windows phone

> ID：10414740
> 
> 赞同：1
> 
> 时间：2012-05-02T13:28:00.117
> 
> 标签：windows-phone-7, datatemplate

我有一个 MultiselectList 控件（来自 SL 工具包），其中有一个带有复选框的数据模板。这是我拥有的 xaml 代码：

```
<toolkit:MultiselectList x:Name="BankMultiSelectList" ItemTemplate="{StaticResource CustomItemTemplate}"/> 
```

和数据模板：

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="CustomItemTemplate">
        <CheckBox x:Name="BankCheckBox" Content="{Binding Path=Name}" IsChecked="{Binding Path=IsSelected, Mode=TwoWay}"/>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

绑定正在成为银行类中的成员，如下所示：

```
public class Bank
{
    public Bank() { }

    public Bank(string name)
    {
        this.Name = name;
    }

    public string Name { get; set; }
    public bool IsSelected { get; set; }

    public List<Bank> GetBanks()
    {
        return new List<Bank>()
        {
            new Bank("Eurobank"),
            new Bank("Millennium Bank"),
            new Bank("Attica Bank"),
            new Bank("Ταχυδρομικό Ταμιευτήριο"),
            new Bank("Alpha Bank"),
            new Bank("Τραπεζα Κύπρου"),
            new Bank("Hellenic Bank"),
            new Bank("Probank"),
            new Bank("FBBank"),
            new Bank("CitiBank"),
            new Bank("Τραπεζα Πειραιώς"),
            new Bank("HSBC Bank"),
            new Bank("Εθνική Τράπεζα"),
            new Bank("Εμπορική Τράπεζα"),
            new Bank("Proton Bank"),
            new Bank("Αγροτική Τράπεζα"),
            new Bank("Γενική Τράπεζα"),
            new Bank("Tbank"),
            new Bank("Marfin Egnatia Bank"),
        };
    }
} 
```

在页面加载 ii 中，使用来自银行类的数据填充 MultiselectList（称为 BankMultiSelectList）的 ItemsSource：

```
Bank bank = new Bank();
BankMultiSelectList.ItemsSource = bank.GetBanks(); 
```

这将创建一个页面，其中包含一些复选框，它们的名称从类方法绑定。我想在应用程序栏中创建一个“全选”按钮，以便在按下时一次选择所有复选框。我如何遍历页面的所有复选框控件，以便将其 IsChecked 属性设置为 true？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:32:48.103

您*可以*遍历 UI 中的元素并设置它们的选中状态。但更好的*方法*是设置模型的状态并让绑定完成更新 UI 的工作。

1.  修改你的`Bank`类来实现`INotifyPropertyChanged`，特别是在`IsSelected`属性上。
2.  遍历这个类的所有实例并设置`IsSelected=true`

......你就完成了！

# asp.net - 如何合并这两个 web.config 文件？

> ID：10414751
> 
> 赞同：0
> 
> 时间：2012-05-02T13:28:33.120
> 
> 标签：asp.net, visual-studio-2010, iis-7, web-config

我有 2 个 web.config 文件——一个在我的根目录中，一个在我的 /knowledgebase/ 目录中——**我已将其转换为 IIS7 中的应用程序**。

尽管如此，我仍然得到： 使用注册为**超出应用程序级别****的部分是错误的。`allowDefinition='MachineToApplication'`此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。C:\Users\Owner\Documents\Visual Studio 2010\WebSites\USS\knowledgebase\web.config 35**

我的**/knowledgebase/web.config**第 35-38 行是：

```
 <authentication mode="Forms">
    <forms name=".YAFNET_Authentication" protection="All" timeout="43200"   
     cookieless="UseCookies"/>
     </authentication> 
```

我确定这与我的**根**web.config 冲突，即：

```
 <authentication mode="Windows">
        <forms loginUrl="~/knowledgebase/" timeout="2880" />
    </authentication> 
```

我在身份验证方面遇到了与 roleManager 相同的问题。由于将目录转换为 IIS7 中的应用程序不起作用，是否可以合并这些 web.configs？如果是这样，我将如何去做？谢谢！

**附录：** 这是我的 IIS7 的快照，（对我而言）清楚地表明它是一个应用程序： ![我的 IIS7](../Images/4a5cc334e67e60a655cbcd8f82dd828c.png)

# jsp - 在 DAO 和 Servlet 中将日期作为参数传递

> ID：10414752
> 
> 赞同：1
> 
> 时间：2012-05-02T13:28:33.237
> 
> 标签：jsp, servlets

这与我最近的问题有关...

在这种情况下，我有我的 DAO 和 servlet，现在我想将日期 (event_date) 作为参数传递给我的查询。我在哪里可以这样做？

我的 servlet 的一部分

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    SimpleDateFormat df=new SimpleDateFormat("yyyy-MM-DD");

    String username = request.getParameter("username");
    String name = request.getParameter("name");
    String dateto = request.getParameter("dateto");        

try
    {

        List prodlistsearch_array = this.pdtDAO.prodlistsearch(name);
        request.setAttribute("prodlistsearch_array", prodlistsearch_array);

        request.getRequestDispatcher("events_audit.jsp").forward(request, response);
    } catch (SQLException e) {
      throw new ServletException("Cannot retrieve areas", e);
    } 
```

我的 DAO 的一部分

```
public List<pdtBean> prodlistsearch(String name) throws SQLException{
    Connection connection = null;
    PreparedStatement statement = null;
    ResultSet resultSet = null;

    String querystring = "select * from mydb where name = ? and event_date between ? and ?";
    List<pdtBean> prodlistsearch_array = new ArrayList<pdtBean>();

    try {

        connection = database.getConnection();
        statement = connection.prepareStatement(querystring);
                    statement.setString(1, name);

        resultSet = statement.executeQuery();

        while (resultSet.next()) {

            pdtBean prodlistsearcharray = new pdtBean();

                prodlistsearcharray.setId(resultSet.getString("id"));
                prodlistsearcharray.setEvent_date(resultSet.getString("event_date"));
                prodlistsearcharray.setTitle(resultSet.getString("title"));

            prodlistsearch_array.add(prodlistsearcharray);
        }
    } finally {
        try { resultSet.close(); } catch (SQLException logOrIgnore) {}
        try { statement.close(); } catch (SQLException logOrIgnore) {}
        try { connection.close(); } catch (SQLException logOrIgnore) {}
    }

    return prodlistsearch_array;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:19:05.417

一个非常简单的解决方法是将另一个参数类型传递`java.util.Date`给您的 DAO 方法。但是，我建议创建一个`POJO`（简单来说带有 getter 和 setter 的 Java Bean）并使用接收到的参数设置属性。

将对象传递给`DAO`方法，如果您需要更多约束，这将很有帮助。

# google-bigquery - 使用 BigQuery 进行实时分析

> ID：10414754
> 
> 赞同：3
> 
> 时间：2012-05-02T13:28:42.713
> 
> 标签：google-bigquery

有没有办法使用 BigQuery 运行实时分析？我使用了 CSV 上传选项来启动一项工作并以离线模式加载数据，一旦加载完成就可以对其进行分析。但在有关 BigQuery 的公告中，提到了使用 BigQuery 进行实时分析。如何做到这一点？我们能否以涓流模式将来自 Google Cloud 数据库的数据（不更新）附加到 BigQuery 以进行实时分析？

作为旁注，我注意到 BigQuery CSV 数据加载比在我的本地 PC 上使用 10GB 数据文件运行的 LucidDB 和 InfiniDB 慢一个数量级。BigQuery 作业完成需要 34 分钟，而 InfiniDB 和 LucidDB 需要 5 分钟。与 InfiniDB 相比，BigQuery 的查询执行时间（对于简单聚合）慢两倍（6 秒对 3 秒，对于加载大约 30+ 百万条记录的 10GB 文件），但优于 LucidDB。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-22T19:21:16.563

2013 年更新：现在您可以将数据流式传输到 BigQuery，并进行实时查询。

（您流式传输的数据稍后可用于查询）

[https://developers.google.com/bigquery/streaming-data-into-bigquery](https://developers.google.com/bigquery/streaming-data-into-bigquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:50:43.003

1.  目前无法使用 BigQuery 一次直接流式传输一条记录的数据。唯一受支持的摄取方法是从 Google Cloud 存储导入 csv 文件，或直接通过多部分 mime POST 请求导入。摄取配额为 2 个导入/分钟，每天 1,000 个导入请求，每个导入请求 100GB 总数据（请参阅：[https](https://developers.google.com/bigquery/docs/quota-policy) ://developers.google.com/bigquery/docs/quota-policy ）。

2.  “实时分析”（对大量数据运行非常快速的即席查询的能力）和“实时数据”的持续收集（键值数据存储更适合支持）之间存在区别。BigQuery 当前的摄取机制不支持持续的单条记录更新，但它允许开发人员在海量数据集上非常快速地运行查询。

3.  虽然 Stack Overflow 不是最适合讨论基准测试的地方，但我要补充一点，如果不了解您使用的数据架构，就很难对摄取和查询速度进行基准测试。虽然 10Gb 是大量数据，但如果比较大得多的数据集（例如 10 TB 或更多）的摄取和查询速度，将会很有趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-08T16:09:33.010

最好将实时分析和数据仓库分开。一种可以针对数据收集速度进行优化，以提供警报和触发器。后者用于大规模并行搜索和聚合。

两者都没有真正的解决方案，因为它们是相互排斥的。为了快速进行大型数据聚合，您必须在索引和存储数据方面执行大量工作——您希望最大限度地减少这些操作以快速访问数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-03T08:02:30.437

在 BiqQuery 中导入大量数据的最佳方法是使用 Google 提供的 python 工具。这是上传数据的最有效方式。我正在使用这些工具

1.  [首先使用gsutil](https://cloud.google.com/storage/docs/gsutil)将原始数据上传到 Google Cloud
2.  [使用bq](https://cloud.google.com/bigquery/bq-command-line-tool)将该数据从 GC 导入 BigQuery

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-25T18:14:50.300

如果您正在寻找与关系数据仓库并行运行的基于 SQL 的实时分析层，我们最近发布了一个名为[Stride](http://www.stride.io)的实时分析 API 产品，它使用对流数据的连续 SQL 查询来支持这种类型的实时分析层你在谈论。Stride 基于我们的开源流式 SQL 数据库[PipelineDB](http://www.pipelinedb.com)，它是 PostgreSQL 的一个分支，实际上将在今年年底成为标准的 PostgreSQL 扩展。

The nice thing about continuous SQL queries on streams for your realtime analytics layer is that if you have a realtime need, then by definition you already know the queries you want to run, so continuous queries both speed up and drastically simplify your realtime data architecture, while reducing costs otherwise incurred from storing extraneous granular data.

# arrays - 如果数组来自源文件，则在 bash 中按索引访问数组无法正常工作

> ID：10414757
> 
> 赞同：20
> 
> 时间：2012-05-02T13:28:48.793
> 
> 标签：arrays, bash, indexing

在 bash 中，当我按索引访问数组时，如果数组是在另一个 bash 脚本的源中导入的变量，我会得到奇怪的行为。是什么导致了这种行为？如何修复它，以便源自另一个 bash 脚本的数组的行为方式与从正在运行的脚本中定义的数组相同？

${numbers[0]} 评估为“一二三”而不是“一”。我试图证明这种行为的完整测试如下所示：

test.sh 的来源：

```
#!/bin/bash

function test {

    echo "Length of array:"
    echo ${#numbers[@]}

    echo "Directly accessing array by index:"
    echo ${numbers[0]}
    echo ${numbers[1]}
    echo ${numbers[2]}

    echo "Accessing array by for in loop:"
    for number in ${numbers[@]}
    do
        echo $number
    done

    echo "Accessing array by for loop with counter:"
    for (( i = 0 ; i < ${#numbers[@]} ; i=$i+1 ));
    do
        echo $i
        echo ${numbers[${i}]}
    done
}

numbers=(one two three)
echo "Start test with array from within file:"
test 

source numbers.sh
numbers=${sourced_numbers[@]}
echo -e "\nStart test with array from source file:"
test 
```

number.sh 的来源：

```
#!/bin/bash
#Numbers

sourced_numbers=(one two three) 
```

test.sh 的输出：

```
Start test with array from within file:
Length of array:
3
Directly accessing array by index:
one
two
three
Accessing array by for in loop:
one
two
three
Accessing array by for loop with counter:
0
one
1
two
2
three

Start test with array from source file:
Length of array:
3
Directly accessing array by index:
one two three
two
three
Accessing array by for in loop:
one
two
three
two
three
Accessing array by for loop with counter:
0
one two three
1
two
2
three 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T14:18:15.390

这个问题与采购无关；发生这种情况是因为作业`numbers=${sourced_numbers[@]}`没有按照您的想法进行。它将数组 ( `sourced_numbers`) 转换为一个简单的字符串，并将其存储在的第一个元素中`numbers`（在接下来的两个元素中保留“二”“三”）。要将其复制为数组，请`numbers=("${sourced_numbers[@]}")`改用。

顺便说一句，`for number in ${numbers[@]}`循环遍历数组元素是错误的方法，因为它会在元素中的空白处中断（在这种情况下，数组包含“一二三”“二”“三”，但循环运行“一”、“二”、“三”、“二”、“三”）。改为使用`for number in "${numbers[@]}"`。实际上，养成双引号几乎所有变量替换（例如`echo "${numbers[${i}]}"`）的习惯是很好的，因为这不是唯一不加引号可能导致麻烦的地方。

# database - 如何从 Access 中的报表中删除图像。当我试图删除图像时，它给了我一个 OLE 服务器错误？

> ID：10414758
> 
> 赞同：0
> 
> 时间：2012-05-02T13:28:49.967
> 
> 标签：database, ms-access, ole

我是使用 MS Access 的新手。我在 Access 中有一个使用 VBA 代码的应用程序。它有一些使用徽标的报告。现在，我想更改此徽标。所以当我试图删除它时，它给了我一个错误“OLE 服务器未注册”。

任何人都可以帮忙。我相信有很多人可以帮助我解决这个问题。

在此先感谢萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-01T09:16:29.053

我有一个类似的问题。我在 MS Access 中创建了图，但无法删除它们。错误是：

“OLE 服务器未注册。要注册 OLE 服务器，请重新安装。”

过去一切正常，但在对 MS Access 2016 进行重大升级后，这些图不起作用。这些地块已经过时，移除它们是最好的选择。但是，MS Access 并没有让我删除它们。

如文中所述，解决方案是“右键单击”绘图，选择“更改为”，然后选择“图像”。之后，可以删除该情节。很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T21:23:53.087

使用 access 2013 这对我来说效果很好。我右键单击对象并找到“更改为”对话框。我将对象更改为图像，Access 允许我将其删除。

# css - 使用微格式的地址语义标记

> ID：10414762
> 
> 赞同：3
> 
> 时间：2012-05-02T13:28:54.663
> 
> 标签：css, html, seo, microformats

我一直在为我建立的网站上的地址标记阅读微格式，普遍的共识是像这样标记地址......

```
<h1 class=”org”&gt;Orpheum Theatre</h1>
Madison, WI
<div class=”address”&gt;
    <div class=”adr”&gt;
        <div class=”street-address”&gt;216 State St</div>,
        <span class=”locality”&gt;Madison</span>,
        <span class=”region”&gt;WI</span>
        <span class=”postal-code”&gt; 53703</span>
        <span class=”country”&gt;United States</span>
    </div>
</div> 
```

我想知道为什么 div/span 标签的混合和匹配？重要还是类标签唯一真正重要的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:40:37.453

您可能想看看[http://schema.org/](http://schema.org/)。他们有一种不同的方法，主要搜索引擎都支持。还有各种测试工具的链接，以确保您获得正确的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:34:05.910

在该示例中，可能只是将 street-address 设置为块级元素，而不依赖任何 CSS 样式。

微格式只关心类名，它们可以附加到任何元素上。在地址示例中，您需要确保它们位于类的容器内`adr`

我发现这个验证器非常有用 - [http://hcard.geekhood.net/#result](http://hcard.geekhood.net/#result)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:13:05.383

标记无关紧要，只有类名。大多数微格式示例都是用 div 和 spans 和 blagh 完成的。我更喜欢`ul`我的hcards。这简单。

# c++ - 将 const ref 分配给非常量对象

> ID：10414763
> 
> 赞同：0
> 
> 时间：2012-05-02T13:28:58.307
> 
> 标签：c++

在下面的代码中，我们返回一个 const 对象并将其收集到一个非 const 对象中，但它仍然可以编译而没有错误或警告。

```
class foo
{
    int i;
public:
    const foo& call() const
    {
        return *this;
    }
};

int main()
{
    foo aa, bb;
    bb = aa.call();
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T13:29:54.503

当你这样做时，你实际上是在获取一个 const 对象的副本，`bb = aa.call( )`这将调用隐式复制构造函数 on `foo`。

如果您想中断编译，请尝试：

```
foo aa;
foo& bb = aa.call( ); 
```

**笔记：**

隐式复制构造函数一般定义为：

```
foo( const foo& exist ); 
```

在默认情况下，只做一个*成员*复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:33:37.990

此代码调用隐式定义的复制分配运算符`foo& foo::operator=(const foo&)`：

```
 int main()
    {
        foo aa, bb;
        bb = aa.call();//  equivalent to bb.operator=(aa.call());
    } 
```

该分配运算符的参数是对 foo 的 const 引用，因此可以直接绑定 foo::call 返回的引用。此代码中没有调用复制构造函数。

# android - Android 4.0.3 - Web 服务更新无法正常工作

> ID：10414764
> 
> 赞同：0
> 
> 时间：2012-05-02T13:29:02.003
> 
> 标签：android, cordova, android-firmware

我使用 phonegap 创建了一个应用程序，它使用网络服务来更新 html 页面、图像等。这在我使用 2.35 的三星 Galaxy S2 上运行良好，但是一旦我将固件升级到 4.0.3，这个更新就停止了正常工作。

似乎主要是图像更新无法正常工作，是否有人知道任何此类问题，如果有，是否有任何黑客/解决方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:25:05.747

我意识到这是由于谷歌对其固件进行了更新。由于他们通常只想要市场上的本地应用程序，因此他们正在竭尽全力为 Web 应用程序提供全部功能。这些问题的一个典型例子是链接无法正常工作这样简单的事情：

[http://code.google.com/p/android/issues/detail?id=17535](http://code.google.com/p/android/issues/detail?id=17535)

虽然，我的理解是，对于主要问题，他们正在努力修复。

# jquery - 如何使用正则表达式验证用户输入

> ID：10414765
> 
> 赞同：-4
> 
> 时间：2012-05-02T13:29:05.153
> 
> 标签：jquery, regex

我需要使用正则表达式验证用户输入。它应该是一个 6 位或 7 位数字（0-9 之间）的数字，不允许有尾随和前导空格。目前我在`^\d{6,7}`这里使用的问题是即使我输入 6 或 7 位数字也会收到错误消息。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:35:58.380

正确的正则表达式是`^\d{6,7}$`或者用户可以输入超过 7 位数字。
你的编码不​​好，因为即使你的正则表达式也应该匹配 6-7 位数字。

[正则表达式链接](http://regexr.com?30r0u)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:34:03.577

使用它只允许数字

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator6" runat="server" 
                                                ControlToValidate="txtmobile" ErrorMessage="Please Enter Numbers Only" 
                                                ValidationExpression="[0-9]*" ></asp:RegularExpressionValidator> 
```

# git - git pull 保持本地更改

> ID：10414769
> 
> 赞同：176
> 
> 时间：2012-05-02T13:29:21.770
> 
> 标签：git

我如何安全地更新（拉取）一个 git 项目，保持特定文件不受影响，即使上游发生了变化？

myrepo/config/config.php

有没有办法，即使这个文件是在远程更改的，当我 git pull 时，其他所有内容都会更新，但这个文件没有改变（甚至没有合并）？

PS。我需要做我所要求的，因为我只编写基于 git 的部署脚本。我无法将配置文件更改为模板。

所以，我需要编写不会丢失本地更改的更新脚本的方法。我希望有一些简单的东西：

```
git assume-remote-unchanged file1
git assume-remote-unchanged file2 
```

然后`git pull`

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2012-05-02T14:42:20.900

有一个基于 Git stash 的简单解决方案。存储您更改的所有内容，提取所有新内容，应用您的存储。

```
git stash
git pull
git stash pop 
```

在 stash pop 上可能存在冲突。在您描述的情况下，实际上会有冲突`config.php`。但是，解决冲突很容易，因为您知道放入存储库中的内容就是您想要的。所以这样做：

```
git checkout --theirs -- config.php 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-02T13:39:56.583

如果您的 repo 中有一个文件应该由大多数 pullers 自定义，则将该文件重命名为类似的名称`config.php.template`并添加`config.php`到您的`.gitignore`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2021-07-29T16:52:07.123

我用

```
git pull -X ours 
```

这将指示 git 在合并时使用本地版本。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-02T13:40:14.133

*更新：这从字面上回答了所提出的问题，但我认为[KurzedMetal 的答案](https://stackoverflow.com/a/10414962/223092)确实是您想要的。*

假如说：

1.  你在树枝上`master`
2.  上游分支`master`在`origin`
3.  您没有未提交的更改

....你可以这样做：

```
# Do a pull as usual, but don't commit the result:
git pull --no-commit

# Overwrite config/config.php with the version that was there before the merge
# and also stage that version:
git checkout HEAD config/config.php

# Create the commit:
git commit -F .git/MERGE_MSG 
```

如果您需要经常这样做，您可以为此创建一个别名。请注意，如果您对 进行了未提交的更改`config/config.php`，这会将它们丢弃。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-06T14:49:14.563

我们也可以尝试 git pull 和 rebase

```
git pull --rebase origin dev 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-01-16T10:05:50.493

要回答这个问题：如果要排除结帐的某些文件，可以使用[sparse-checkout](https://www.git-scm.com/docs/git-read-tree#_sparse_checkout)

1.  在`.git/info/sparse-checkout`中，定义要保留的内容。在这里，我们想要所有 (*) 但（注意感叹号） config.php ：

    /* !/config.php

2.  告诉 git 你要考虑 sparse-checkout

    git config core.sparseCheckout true

3.  如果您已经在本地获取了此文件，请执行 git 在稀疏结帐时执行的操作（告诉它必须通过在其上设置“skip-worktree”标志来排除此文件）

    git update-index --skip-worktree config.php

4.  享受您的 config.php 文件属于您的存储库 - 存储库上的任何更改。

* * *

> 请注意，配置值不应该在源代码管理中：
> 
> *   这是一个潜在的安全漏洞
> *   它会导致类似这样的部署问题
> 
> 这意味着您必须排除它们（在第一次提交之前将它们放在 .gitignore 中），并在您签出应用程序的每个实例上创建适当的文件（通过复制和调整“模板”文件）

请注意，一旦文件由 git 负责，.gitignore 将不会产生任何影响。

鉴于此，一旦文件受源代码控制，您只有两个选择 () ：

*   重新设置所有历史记录以删除文件（使用`git filter-branch`）

*   创建一个删除文件的提交。这就像打一场失败的战斗，但是，有时候你必须忍受它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-13T09:54:11.770

以防它们是本地未提交的更改，并在拉取时避免合并冲突。

```
git stash save
git pull
git stash pop 
```

参考 - [https://happygitwithr.com/pull-tricky.html](https://happygitwithr.com/pull-tricky.html)

# java - 在 java 中使用 CouchDb4J API 临时视图不起作用

> ID：10414771
> 
> 赞同：2
> 
> 时间：2012-05-02T13:29:23.657
> 
> 标签：java, nosql, couchdb

```
import com.fourspaces.couchdb.Session;
import com.fourspaces.couchdb.Database;
import com.fourspaces.couchdb.Document;
import com.fourspaces.couchdb.View;
import com.fourspaces.couchdb.ViewResults;
import com.fourspaces.couchdb.CouchResponse;
import com.fourspaces.couchdb.AdHocView;

public class temporaryViews 
{
public static void main(String[] args) throws Exception 
{

    Session s = new Session("localhost",5984,"monil","monil",false,false);
    Database db = s.getDatabase("foodb");

// Running a view
       ViewResults resultAdHoc = db.adhoc("function (doc) {emit(null, doc);}");
       System.out.println(resultAdHoc.getResults().size());
  }
} 
```

我尝试使用上面的代码创建临时视图，我得到了

```
Exception in thread "main" java.lang.NullPointerException
at temporaryViews.main(temporaryViews.java:53) 
```

请提出解决方案

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:12:25.513

我遇到了同样的问题。尝试 对您有所帮助的[EKTROP api](https://github.com/helun/Ektorp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T23:49:07.767

我在这里面临同样的问题（无法创建视图）。临时解决方法是更新服务器配置。在`couch.ini`文件中修改 authentication_handlers：

```
[httpd]
port=8008
authentication_handlers = {couch_httpd_oauth, oauth_authentication_handler},
    {couch_httpd_auth, null_authentication_handler},
    {couch_httpd_auth, cookie_authentication_handler} 
```

重要的是**null_authentication_handler**，但要注意：正如[https://wiki.apache.org/couchdb/Security_Features_Overview#Authentication](https://wiki.apache.org/couchdb/Security_Features_Overview#Authentication)所述，这是出于开发目的。

希望有人会找到一个真正的解决方案（用于生产环境）。

# javascript - 如何在 div 元素中格式化文本，并使用 Javascript 突出显示语法？

> ID：10414773
> 
> 赞同：0
> 
> 时间：2012-05-02T13:29:26.213
> 
> 标签：javascript, jquery, html

我正在使用 Snippet jQuery 语法荧光笔。 [http://steamdev.com/snippet/](http://steamdev.com/snippet/)

首次显示文本时，其语法正确显示。但是当我更改文本时，脚本不起作用。

Javascript：

```
<script type="text/javascript">
  $(document).ready(function(){
    $("pre.ruby").snippet("ruby",{style:"neon"});
  })

  //This function remove all #aside child elements, recreate child #code
  //And change text inner #code
  function loadUrl(url) {
var node = dojo.byId("aside");

while (node.hasChildNodes()) {
      node.removeChild(node.lastChild);
}

var aside = document.getElementById('aside');
aside.innerHTML = "<pre id='code' class='ruby'> </pre>";

$("#code").load(url);
$("pre.ruby").snippet("ruby",{style:"neon"});

   }
 </script> 
```

HTML：

```
<div id="aside">
  <pre id="code" class="ruby">
  </pre>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:18:41.083

`load()`在您第二次应用语法突出显示之前未完成。您应该将语法调用移至`load()`的完成回调。

```
$("#code").load(url, function() {
    $("pre.ruby").snippet("ruby",{style:"neon"});
}); 
```

# c - GPU上是否有内存保护

> ID：10414781
> 
> 赞同：17
> 
> 时间：2012-05-02T13:29:39.383
> 
> 标签：c, memory-management, gpu, gpgpu

我对GPU没有太多经验，所以请原谅我的无知。如今，GPU 被用作通用编程的 GPGPU。但我想知道 GPU 是否具有内存保护和虚拟化机制。我的意思是，例如，您在 GPU 上运行两个内核，如果您没有虚拟化和内存保护，一个内核可以轻松写入另一个内核的地址。这个问题是如何解决的？是否在提高 GPU 上运行的代码的可靠性方面做了任何工作？可以通过某种沙盒机制同时运行两个内核吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:08:23.770

内存由视频内存管理器管理，这可以是驱动程序，也可以是您想要的任何东西，只要它管理内存，我相信有不同的方法来管理此内存，但我认为有些人使用共享内存架构（SMA）。虚拟地址空间可用于隔离进程。虚拟地址可以转换为存储实际位/字节的逻辑地址。通常由经理或驱动程序来决定进程可以在哪里处理。

# caching - 是什么导致 CPU 中的 L3 缓存未命中？

> ID：10414787
> 
> 赞同：9
> 
> 时间：2012-05-02T13:29:48.727
> 
> 标签：caching, memory, profiling, cpu, opencl

我对 x86 架构中不同缓存级别的缓存未命中之间的关系有疑问（比如 Xeon X5660）。

我在一些性能计数器上对 OpenCL 应用程序 (Blackscholes) 进行了一些分析。对于每个计数器，我将所有内核的所有值相加并得到以下结果：

```
 instructions #: 493167746502.000000 

 L3_MISS #: 1967809.000000 

 L1_MISS  #: 2344383795.000000 

 L2_DATA_MISS #: 901131.000000 

 L2_MISS #: 1397931.000000 

 memory loads #: 151559373227.000000 
```

问题是为什么 L3 未命中数大于 L2 未命中数？（我多次重新运行分析并且差异并不显着）。我的想法基本上是：

L2 未命中 = L3 命中 + L3 未命中

有人可以解释一下这里出了什么问题，我错过了什么吗？

更进一步，是什么导致 CPU 的最后一级缓存 (CPU) 的缓存读取？它只是 L2 的数据丢失吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T23:32:05.690

![32 纳米、六核 Westmere-EP 芯片](../Images/01153d03fca6fdcf3f734697d490d87a.png)

图片参考：[http ://www.theregister.co.uk/2010/02/03/intel_westmere_ep_preview/](http://www.theregister.co.uk/2010/02/03/intel_westmere_ep_preview/)

正如您在上面看到的，在“Westmere-EP”架构中，3 个内核的块共享一部分 L3 缓存。所以“boiler96”说的是有道理的。您要么获得单个核心的 L2 未命中数，要么您的 L3 未命中数来自 Uncore，它是所有核心未命中数的组合。

# android - Exception中突然得到ClassNotFoundException

> ID：10414789
> 
> 赞同：0
> 
> 时间：2012-05-02T13:29:55.513
> 
> 标签：android, eclipse, classpath, classnotfoundexception

我终于从 Helios 切换到 Indigo。突然我弹出了 ClassNotFoundException 。

```
05-02 16:05:22.621: W/System.err(21126): android.view.InflateException: Binary XML file line #12: Error inflating class com.google.ads.AdView
05-02 16:05:22.631: W/System.err(21126):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
05-02 16:05:22.631: W/System.err(21126):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
05-02 16:05:22.631: W/System.err(21126):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
05-02 16:05:22.631: W/System.err(21126):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
05-02 16:05:22.631: W/System.err(21126):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-02 16:05:22.631: W/System.err(21126):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-02 16:05:22.631: W/System.err(21126):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
05-02 16:05:22.631: W/System.err(21126):    at android.app.Activity.setContentView(Activity.java:1657)
05-02 16:05:22.631: W/System.err(21126):    at ui.YanivMenuActivity.onCreate(YanivMenuActivity.java:43)
05-02 16:05:22.631: W/System.err(21126):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-02 16:05:22.631: W/System.err(21126):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
05-02 16:05:22.641: W/System.err(21126):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
05-02 16:05:22.641: W/System.err(21126):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
05-02 16:05:22.641: W/System.err(21126):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
05-02 16:05:22.641: W/System.err(21126):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-02 16:05:22.641: W/System.err(21126):    at android.os.Looper.loop(Looper.java:123)
05-02 16:05:22.641: W/System.err(21126):    at android.app.ActivityThread.main(ActivityThread.java:3701)
05-02 16:05:22.641: W/System.err(21126):    at java.lang.reflect.Method.invokeNative(Native Method)
05-02 16:05:22.641: W/System.err(21126):    at java.lang.reflect.Method.invoke(Method.java:507)
05-02 16:05:22.641: W/System.err(21126):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
05-02 16:05:22.641: W/System.err(21126):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
05-02 16:05:22.651: W/System.err(21126):    at dalvik.system.NativeStart.main(Native Method)
05-02 16:05:22.651: W/System.err(21126): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader[/data/app/il.co.anykey.games.cardking.basic-1.apk]
05-02 16:05:22.651: W/System.err(21126):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-02 16:05:22.651: W/System.err(21126):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-02 16:05:22.651: W/System.err(21126):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-02 16:05:22.661: W/System.err(21126):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
05-02 16:05:22.661: W/System.err(21126):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
05-02 16:05:22.661: W/System.err(21126):    ... 21 more 
```

这是我的类路径文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="gen"/>
    <classpathentry exported="true" kind="lib" path="/MultiPlayerGameControl/src" sourcepath="/MultiPlayerGameControl/src"/>
    <classpathentry exported="true" kind="lib" path="/CardKingLib/src"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
    <classpathentry kind="lib" path="E:/Program Files/Android/GoogleAdMobAdsSdkAndroid-4.1.0/GoogleAdMobAdsSdk-4.1.0.jar"/>
    <classpathentry kind="lib" path="E:/Program Files/Android/ScoreLoop/ScoreloopCore/jar/scoreloop-core.jar"/>
    <classpathentry kind="lib" path="E:/Program Files/Android/AdWhirlSDK_Android_3.1.1/AdWhirlSDK_Android_3.1.1.jar"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
    <classpathentry kind="src" path="/MultiPlayerGameControl"/>
    <classpathentry combineaccessrules="false" kind="src" path="/CardKingLib"/>
    <classpathentry exported="true" kind="lib" path="E:/Program Files/Android/heyzap-sdk-2.0.1/heyzap-sdk-2.0.1/android-sdk/heyzap-sdk-2.0.1.jar"/>
    <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:04:21.713

如果您在使用外部 jar 时遇到问题

然后创建一个名为**libs的文件夹**

[https://stackoverflow.com/a/10046725/1289716](https://stackoverflow.com/a/10046725/1289716)

# android - 使用 osmdroid 开发 android 地图应用程序

> ID：10414790
> 
> 赞同：0
> 
> 时间：2012-05-02T13:29:57.417
> 
> 标签：android, map, osmdroid

osmdroid 支持哪些功能，我在互联网上搜索过有关它的信息，但没有太多关于它的信息，直到现在我设法使用 osmdroid 在线和离线显示地图，显示覆盖并显示用户位置地图，但是osmdroid的其他功能是什么？？？？？？真的，我从这里的人那里得到了很多帮助，所以感谢他们，提前感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:46:05.390

找出 Osmdroid 可以做什么的最简单方法是下载您拥有的版本的 javadocs 并在浏览器中打开 index.html 并探索类和方法。

它完成了谷歌地图可以做的大部分事情，除了卫星视图。正如您已经发现的那样，它可以使用离线地图和不同来源的图块，这是 Google 无法做到的。

# xaml - Windows 8 XAML 中的多列文本中的分栏符

> ID：10414793
> 
> 赞同：5
> 
> 时间：2012-05-02T13:30:12.650
> 
> 标签：xaml, windows-8, multiple-columns

[这里](https://stackoverflow.com/questions/10162125/windows-8-xaml-multi-column-text#_=_)描述了我如何在 Windows 8 Metro 风格应用程序中创建具有水平滚动的多列文本。有没有办法添加“分栏符”以获得列顶部的任何标题，而不是中间（请记住，我们不知道每个部分有多少列）：

![在此处输入图像描述](../Images/9620755016b290e0cdf29de1d992059f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T03:54:01.757

您可以创建一个 ItemsControl 并将 RichTextColumns 作为 DataTemplate。每列都在绑定到 ItemsControl 的列表中。

这是 XAML 示例：

```
<ItemsControl x:Name="itemsControl">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <!-- Content is allowed to flow across as many columns as needed -->
            <common:RichTextColumns x:Name="richTextColumns" Margin="25,20,25,20">
                <RichTextBlock x:Name="richTextBlock" Width="200" Style="{StaticResource ItemRichTextStyle}" IsTextSelectionEnabled="False">
                    <Paragraph>
                        <Run FontSize="26.667" FontWeight="Light" Text="{Binding Title}"/>
                        <LineBreak/>
                        <LineBreak/>                                
                    </Paragraph>                            
                    <Paragraph>
                        <Run FontWeight="SemiLight" Text="{Binding Content}"/>
                    </Paragraph>
                </RichTextBlock>

                <!-- Additional columns are created from this template -->
                <common:RichTextColumns.ColumnTemplate>
                    <DataTemplate>
                        <RichTextBlockOverflow Width="200" Margin="80,0,0,0">
                            <RichTextBlockOverflow.RenderTransform>
                                <TranslateTransform X="-1" Y="4"/>
                            </RichTextBlockOverflow.RenderTransform>
                        </RichTextBlockOverflow>
                    </DataTemplate>
                </common:RichTextColumns.ColumnTemplate>
            </common:RichTextColumns>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这是 C# 代码隐藏示例：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    var samples = new List<SampleColumnData>
    {
        new SampleColumnData{
            Title = "Column1",
            Content = "Just the good ol' boys, never meanin' no harm. Beats all you've ever saw, been in trouble with the law since the day they was born. Straight'nin' the curve, flat'nin' the hills. Someday the mountain might get 'em, but the law never will. Makin' their way, the only way they know how, that's just a little bit more than the law will allow. Just good ol' boys, wouldn't change if they could, fightin' the system like a true modern day Robin Hood. Knight Rider, a shadowy flight into the dangerous world of a man who does not exist. Michael Knight, a young loner on a crusade to champion the cause of the innocent, the helpless in a world of criminals who operate above the law. I never spend much time in school but I taught ladies plenty. It's true I hire my body out for pay, hey hey. I've gotten burned over Cheryl Tiegs, blown up for Raquel Welch. But when I end up in the hay it's only hay, hey hey. I might jump an open drawbridge, or Tarzan from a vine. 'Cause I'm the unknown stuntman that makes Eastwood look so fine. Barnaby The Bear's my name, never call me Jack or James, I will sing my way to fame, Barnaby the Bear's my name. Birds taught me to sing, when they took me to their king, first I had to fly, in the sky so high so high, so high so high so high, so - if you want to sing this way, think of what you'd like to say, add a tune and you will see, just how easy it can be. Treacle pudding, fish and chips, fizzy drinks and liquorice, flowers, rivers, sand and sea, snowflakes and the stars are free. La la la la la, la la la la la la la, la la la la la la la, la la la la la la la la la la la la la, so - Barnaby The Bear's my name, never call me Jack or James, I will sing my way to fame, Barnaby the Bear's my name. "
        },
        new SampleColumnData{
            Title = "Column2",
            Content = "Just the good ol' boys, never meanin' no harm. Beats all you've ever saw, been in trouble with the law since the day they was born. Straight'nin' the curve, flat'nin' the hills. Someday the mountain might get 'em, but the law never will. Makin' their way, the only way they know how, that's just a little bit more than the law will allow. Just good ol' boys, wouldn't change if they could, fightin' the system like a true modern day Robin Hood. Knight Rider, a shadowy flight into the dangerous world of a man who does not exist. Michael Knight, a young loner on a crusade to champion the cause of the innocent, the helpless in a world of criminals who operate above the law. I never spend much time in school but I taught ladies plenty. It's true I hire my body out for pay, hey hey. I've gotten burned over Cheryl Tiegs, blown up for Raquel Welch. But when I end up in the hay it's only hay, hey hey. I might jump an open drawbridge, or Tarzan from a vine. 'Cause I'm the unknown stuntman that makes Eastwood look so fine. Barnaby The Bear's my name, never call me Jack or James, I will sing my way to fame, Barnaby the Bear's my name. Birds taught me to sing, when they took me to their king, first I had to fly, in the sky so high so high, so high so high so high, so - if you want to sing this way, think of what you'd like to say, add a tune and you will see, just how easy it can be. Treacle pudding, fish and chips, fizzy drinks and liquorice, flowers, rivers, sand and sea, snowflakes and the stars are free. La la la la la, la la la la la la la, la la la la la la la, la la la la la la la la la la la la la, so - Barnaby The Bear's my name, never call me Jack or James, I will sing my way to fame, Barnaby the Bear's my name. "
        },
        new SampleColumnData{
            Title = "Column3",
            Content = "Just the good ol' boys, never meanin' no harm. Beats all you've ever saw, been in trouble with the law since the day they was born. Straight'nin' the curve, flat'nin' the hills. Someday the mountain might get 'em, but the law never will. Makin' their way, the only way they know how, that's just a little bit more than the law will allow. Just good ol' boys, wouldn't change if they could, fightin' the system like a true modern day Robin Hood. Knight Rider, a shadowy flight into the dangerous world of a man who does not exist. Michael Knight, a young loner on a crusade to champion the cause of the innocent, the helpless in a world of criminals who operate above the law. I never spend much time in school but I taught ladies plenty. It's true I hire my body out for pay, hey hey. I've gotten burned over Cheryl Tiegs, blown up for Raquel Welch. But when I end up in the hay it's only hay, hey hey. I might jump an open drawbridge, or Tarzan from a vine. 'Cause I'm the unknown stuntman that makes Eastwood look so fine. Barnaby The Bear's my name, never call me Jack or James, I will sing my way to fame, Barnaby the Bear's my name. Birds taught me to sing, when they took me to their king, first I had to fly, in the sky so high so high, so high so high so high, so - if you want to sing this way, think of what you'd like to say, add a tune and you will see, just how easy it can be. Treacle pudding, fish and chips, fizzy drinks and liquorice, flowers, rivers, sand and sea, snowflakes and the stars are free. La la la la la, la la la la la la la, la la la la la la la, la la la la la la la la la la la la la, so - Barnaby The Bear's my name, never call me Jack or James, I will sing my way to fame, Barnaby the Bear's my name. "
        },
    };

    itemsControl.ItemsSource = samples;
} 
```

这是一个屏幕截图： ![在此处输入图像描述](../Images/604b676450d7e2645dd82027c4153673.png)

希望这可以帮助！

# sql - MS SQL 2008 R2 - 如何比较或获取两个查询的差异

> ID：10414794
> 
> 赞同：0
> 
> 时间：2012-05-02T13:30:13.353
> 
> 标签：sql, sql-server-2008

首先，我要感谢你们对我的问题和其他问题的所有帮助。

我有 MS SQL 2008 R2，我得到了两列的总和，如下所示：

```
SELECT SUM(RATE+RATE_ADDITIONAL) FROM LOADS WHERE INVOICED=1 
and NOT OV_FACTORING=2 and DATE_INVOICED >= '1/1/2007' 
and DATE_INVOICED <= '5/1/2012' 
```

但是当我这样尝试时：

```
SELECT SUM(RATE+RATE_ADDITIONAL) FROM LOADS WHERE INVOICED=1 
AND OV_FACTORING=3 OR OV_FACTORING=4 OR OV_FACTORING=5 
and DATE_INVOICED >= '1/1/2007' and DATE_INVOICED <= '5/1/2012' 
```

当它应该相同时，它会得到不同的总数，因为在 OV_FACTORING 中，唯一的值是：2、3、4 和 5。

我有一个名为 LOAD_NO 的列，我想在另一个查询中获得不同或不存在的 LOAD_NO，因此类似于比较两个查询并输出不同或显示在其中一个查询中的 load_no 和不在另一个。

我在网站上尝试了一些示例，但无法让它们工作。

再次感谢您的所有帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:35:35.977

如果你想限制 OV_FACTORING 你可以这样做：

```
SELECT OV_FACTORING, SUM(RATE+RATE_ADDITIONAL) 
  FROM dbo.LOADS 
  WHERE INVOICED = 1
  AND OV_FACTORING IN (3,4,5)
  AND DATE_INVOICED >= '20070101' 
  AND DATE_INVOICED <= '20120501'
  GROUP BY OV_FACTORING; 
```

或者，如果您真的想要这些`OR`陈述。然后你可以这样做：

```
SELECT OV_FACTORING, SUM(RATE+RATE_ADDITIONAL) 
  FROM dbo.LOADS 
  WHERE INVOICED = 1
  AND (OV_FACTORING=3 OR OV_FACTORING=4 OR OV_FACTORING=5)
  AND DATE_INVOICED >= '20070101' 
  AND DATE_INVOICED <= '20120501'
  GROUP BY OV_FACTORING; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:34:23.430

为了查看表中的数字是否准确，请检查以下结果：

```
SELECT OV_FACTORING, SUM(RATE+RATE_ADDITIONAL) 
  FROM dbo.LOADS 
  WHERE INVOICED = 1
  AND DATE_INVOICED >= '20070101' 
  AND DATE_INVOICED <= '20120501'
  GROUP BY OV_FACTORING; 
```

一些与问题无关的一般性评论：

*   回车和缩进使查询的可读性提高 100 倍
*   从不使用区域格式的日期 - 2012 年 5 月 1 日是 5 月 1 日还是 1 月 5 日？（[博文](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)）
*   为您的查询指定架构前缀（[博客文章](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:36:12.533

要获得相同的结果，您需要将`OV_FACTORING`过滤器隔离在一起，如下所示：

```
SELECT SUM(RATE+RATE_ADDITIONAL) 
FROM LOADS WHERE INVOICED=1 AND 
(OV_FACTORING=3 OR OV_FACTORING=4 OR OV_FACTORING=5) AND 
DATE_INVOICED >= '1/1/2007' AND DATE_INVOICED <= '5/1/2012' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T13:36:41.953

```
SELECT SUM(RATE+RATE_ADDITIONAL) 
FROM LOADS 
WHERE INVOICED=1 
AND (OV_FACTORING=3 OR OV_FACTORING=4 OR OV_FACTORING=5) 
AND DATE_INVOICED >= '1/1/2007' 
AND DATE_INVOICED <= '5/1/2012 
```

# database - 使用 unix shell 和 perl 将数据库表复制到平面文件

> ID：10414799
> 
> 赞同：0
> 
> 时间：2012-05-02T13:30:24.487
> 
> 标签：database, perl, shell, sap-ase

我需要将数据库表备份到平面文件。通常这可以使用 ETL 工具来完成。但是，我在这里只能使用 shell 脚本和 perl。

我正在使用 Sybase Adaptive Server Enterprise/12.5.0.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:33:07.843

听起来你想要[SQL::Translator](https://metacpan.org/module/SQL%3a%3aTranslator)，它有[一个将数据库转储为结构化格式的秘诀](https://metacpan.org/module/SQL%3a%3aTranslator%3a%3aManual#CREATING-A-DATA-DUMPER-SCRIPT)

# vb.net - 如何将存储的数据放回vb.net中的确切标签？

> ID：10414800
> 
> 赞同：0
> 
> 时间：2012-05-02T13:30:25.767
> 
> 标签：vb.net

[我在这里](https://stackoverflow.com/questions/8191013/split-data-and-put-it-back-together)看到完全相同的问题，但我想知道 vb（窗口形式）中的代码。我已将变量存储在

> 暗淡姓氏，姓氏，中间名，年龄作为字符串

并将数据保存在记事本中。我怎样才能将它们放回它们的确切标签中。我的标签之一是

> lbl_surname.Text

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:06:51.463

我发现下面的代码对我有帮助，

> 将 TextLine 调暗为字符串

```
 Dim objReader As New System.IO.StreamReader(openfile)
    Dim aryTextFile() As String  'this sets up an array to store the seperate parts of the line
    ' round brackets are blank because we don’t know how many we need (separate items) there are on each line
    If System.IO.File.Exists(openfile) = True Then 'see if file exists

        While objReader.Peek() <> -1  'takes a peek to find end of file, rteturns -1 if no more lines
            TextLine = objReader.ReadLine() 'Read line
            lbl_data.Text = lbl_data.Text & vbNewLine & TextLine
            'Extracting required data fr
            aryTextFile = TextLine.Split(",") 'Inside the round brackets is symbol is used to separate each element in the line, in this case a comma.

            ' For i = 0 To UBound(aryTextFile) 'UBound means upper boundary of array, ie max number of variables
            'MsgBox(aryTextFile(i))
            ' Next i
            ' Put required bits from line in appropriate places on form

            Surname = aryTextFile(0) 'first part needed
            age = aryTextFile(3) 'second part needed
            Middlename = aryTextFile(1)
            Lastname = aryTextFile(2)
            mobile = aryTextFile(4)
            lbl_surname.Text = Surname 'Storing data into label for display
            lbl_lastname.Text = Lastname
            lbl_middlename.Text = Middlename
            lbl_age.Text = age 'Storing data into label for display
            lbl_mob.Text = mobile

        End While

    End If
End Sub 
```

希望对需要的人有所帮助！

# objective-c - 如何在iOS中显示复制大文件的进度？

> ID：10414802
> 
> 赞同：7
> 
> 时间：2012-05-02T13:30:27.820
> 
> 标签：objective-c, ios, copy, progress-bar

我正在编写一个 iOS 应用程序。在我的应用程序中，我想将一些文件从一个文件夹复制到另一个文件夹。但由于有些文件太大，复制完成需要很长时间。所以我想添加一个进度条来显示副本的百分比。但是我发现文件管理器没有回调方法来获取百分比。有没有人有好的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T13:35:58.707

在高水平：

1.  在单独的线程中运行您的复制过程 (T1)
2.  运行另一个线程（T2），它会定期（比如每 100 毫秒）读取目标文件`current_size`。
3.  计算百分比：`current_size / total_size`
4.  更新你的进度条 ui 元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-24T18:27:15.660

我用@giorashc 方法创建了一个简单的类。

如果有人需要这样的东西，请随意使用它。

.h

```
#import <UIKit/UIKit.h>

@protocol IDCopyUtilsDelegate;

@interface IDCopyUtils : NSObject

@property (nonatomic, weak) id<IDCopyUtilsDelegate> delegate;

- (void)copyFileAtPath:(NSString *)sourcePath toPath:(NSString *)targetPath;

@end

// 3\. Definition of the delegate's interface
@protocol IDCopyUtilsDelegate <NSObject>

- (void)setCopyProgress:(float)progress;
- (void)didFinishedCopyWithError:(NSError *)error;

@end 
```

他们

```
#import "IDCopyUtils.h"

@interface IDCopyUtils()

@property (nonatomic, strong) NSTimer *timer;
@property (nonatomic, strong) NSString *sourcePath;
@property (nonatomic, strong) NSString *targetPath;

@end

@implementation IDCopyUtils

- (void)copyFileAtPath:(NSString *)sourcePath toPath:(NSString *)targetPath
{
    self.sourcePath = sourcePath;
    self.targetPath = targetPath;

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;

    if ([fileManager fileExistsAtPath:self.targetPath] == YES) {
        [fileManager removeItemAtPath:self.targetPath error:&error];
    }

    self.timer = [NSTimer scheduledTimerWithTimeInterval:0.100
                                     target:self
                                   selector:@selector(checkFileSize)
                                   userInfo:nil
                                    repeats:YES];

    [self performSelector:@selector(startCopy) withObject:nil afterDelay:0.5];

}

- (void)checkFileSize
{
    dispatch_async(dispatch_get_main_queue(), ^{
        NSDictionary *attributesSource = [[NSFileManager defaultManager] attributesOfItemAtPath:self.sourcePath error:NULL]; unsigned long long fileSize = [attributesSource fileSize];

        NSDictionary *attributesTarget = [[NSFileManager defaultManager] attributesOfItemAtPath:self.targetPath error:NULL]; unsigned long long fileSizeTarget = [attributesTarget fileSize];

        double progress = (float)fileSizeTarget / (float)fileSize;

        if (self.delegate && [self.delegate respondsToSelector:@selector(setCopyProgress:)])
        {
            [self.delegate setCopyProgress:progress];
        }

        NSLog(@"Size: %f", progress);
    });
}

- (void)startCopy
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSError *error;

        if ([fileManager fileExistsAtPath:self.targetPath] == YES) {
            [fileManager removeItemAtPath:self.targetPath error:&error];
        }

        if ([fileManager fileExistsAtPath:self.targetPath] == NO) {
            [fileManager copyItemAtPath:self.sourcePath toPath:self.targetPath error:&error];

            [self.timer invalidate];
            self.timer = nil;

            if (self.delegate && [self.delegate respondsToSelector:@selector(didFinishedCopyWithError:)])
            {
                [self.delegate didFinishedCopyWithError:error];
            }
        }
    });
}

@end 
```

您可以像这样使用它（例如）：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *sourcePath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"iso"];
NSString *targetPath = [documentsDirectory stringByAppendingPathComponent:@"test.iso"];

IDCopyUtils *copyUtils = [[IDCopyUtils alloc] init];
copyUtils.delegate = self;
[copyUtils copyFileAtPath:sourcePath toPath:targetPath]; 
```

当文件使用委托方法完成复制时，您将能够更新您的进度视图并获得通知。

# jquery - 我们如何使用 JQUERY 了解 div 是否具有 unicode 字符

> ID：10414804
> 
> 赞同：1
> 
> 时间：2012-05-02T13:30:36.393
> 
> 标签：jquery, unicode, non-unicode

我想识别网页中至少包含一个 UNICODE 字符的所有对象。

通过这种方式，我想对那些具有 UNICODE 字符的元素执行特定的 CSS 类（可能它们完全是 UNICODE 或者它们可能同时包含 NON-UNICODE 和 UNICODE。例如，具有英语和阿拉伯语的 div。）

有什么办法可以通过浏览器客户端的 JQUERY 来做到这一点？

请指导我。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:16:34.753

（根据定义，Web 浏览器中的所有文本都是 Unicode。您可能的意思是检测不是 ASCII 字符的 Unicode 字符。）

您必须遍历所有元素并使用正则表达式检查它们的文本，例如：

```
$('*').each(function() {
    if (/[\u0080-\uFFFF]/.test($(this).text()))
        $(this).addClass('hasnonascii');
}); 
```

这会很慢。它也是递归的，所以例如，如果页面上有任何非 ASCII 内容，您会得到一个`class="hasnonascii"`on 。`<body>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:34:40.137

您可以将[XRegExp](http://xregexp.com/)与[unicode 插件](http://xregexp.com/plugins/)一起使用来编写正则表达式来检查某些元素文本中的 unicode 字符。

# c# - 在 C# 中将位图转换为布尔数组的快速方法？

> ID：10414805
> 
> 赞同：1
> 
> 时间：2012-05-02T13:30:38.080
> 
> 标签：c#, arrays, performance, bitmap, boolean

我正在制作一个 XNA 应用程序，我每秒从网络摄像头捕获屏幕截图 4 次，然后当像素颜色红色低于某个阈值时，我尝试将其转换为布尔数组。当我将其转换为 Texture2D 时，它不会滞后，但是当我尝试获取单个像素时它确实滞后，即使网络摄像头分辨率为 176x144。

这是获取位图的代码：

```
public Bitmap getBitmap()
    {
        if (!panelVideoPreview.IsDisposed)
        {
            Bitmap b = new Bitmap(panelVideoPreview.Width, panelVideoPreview.Height, PixelFormat.Format32bppRgb);
            using (Graphics g = Graphics.FromImage(b))
            {
                Rectangle rectanglePanelVideoPreview = panelVideoPreview.Bounds;
                Point sourcePoints = panelVideoPreview.PointToScreen(new Point(panelVideoPreview.ClientRectangle.X, panelVideoPreview.ClientRectangle.Y));
                g.CopyFromScreen(sourcePoints, Point.Empty, rectanglePanelVideoPreview.Size);
            }

            return b;
        }
        else
        {
            Bitmap b = new Bitmap(panelVideoPreview.Width, panelVideoPreview.Height);
            return b;
        }
    } 
```

这是将位图转换为布尔数组的代码：

```
public bool[,] getBoolBitmap(uint treshold)
    {
        Bitmap b = getBitmap();

        bool[,] ar = new bool[b.Width, b.Height];

        for (int y = 0; y < b.Height; y++)
        {
            for (int x = 0; x < b.Width; x++)
            {
                if (b.GetPixel(x, y).R < treshold)
                {
                    ar[x, y] = false;
                }
                else
                {
                    ar[x, y] = true;
                }
            }
        }

        return ar;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:55:09.390

Hans Passant 提供的答案是正确的，最好使用 LockBits 并一次处理所有数据。

您还可以尝试编写一个着色器来对数据进行阈值处理，从而利用 GPU 的强大功能以更快的速度并行处理输入图像流。

# iphone - iPhone 为所有视图控制器提供一个标题

> ID：10414806
> 
> 赞同：1
> 
> 时间：2012-05-02T13:30:38.420
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, title

我有一个带有标签栏控制器（带有 4 个视图控制器）的应用程序，它包含一个导航控制器。所有这些都是以编程方式创建的。我的问题：有没有办法为所有视图控制器设置一个导航栏标题？例如：当我切换标签时，标题是相同的。对我来说理想的解决方案是在应用程序委托文件中设置标题。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:41:56.203

对于你们所有人，我想你想在那里放一个日志，它是将一个图像文件设置为选项卡栏子视图，并将视图控制器的高度设置为减去选项卡栏图像

```
UIImageView *navImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:IMG_LOGO]];
//[navImage setCenter:CGPointMake(160, 21)];
[navImage setCenter:CGPointMake(160, 21)];
[self.navigationController.navigationBar addSubview: navImage];
[navImage release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:39:26.703

您可以创建一个非常基本的子类`UIViewController`并设置其标题。然后，只需让您的其他`UIViewController`子类从这个基类继承，而不是直接从`UIViewController`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:41:32.020

如果您知道将有 4 个视图控制器，只需执行`self.title = @"your title";`如果您想更改“您的标题”一次并将它们全部更改，只需创建一个静态全局或使用 plist。并将代码放在下面，`viewDidAppear`以便每次刷新。不需要做任何太复杂的事情:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T13:37:51.007

尝试这样的事情（我无权访问 Xcode atm，所以请先调试它）：

```
for (int i = 0; i < [[tabBarController viewControllers] count]; i++) {
    [tabBarController objectAtIndex:i].title = @"This is the title";
} 
```

# svn - TortoiseSVN 报冲突，但是找不到冲突

> ID：10414814
> 
> 赞同：53
> 
> 时间：2012-05-02T13:31:07.603
> 
> 标签：svn, version-control, tortoisesvn, conflict, working-directory

我的整个存储库都有一个工作副本，其中包含多个 Python 项目。当我在 Windows 文件资源管理器中选择右键单击 --> SVN 更新时，我收到一条列出特定项目文件夹的错误消息：

```
Command: Update
Updating: path\to\working\copy
Skipped obstructing working copy: path\to\working\copy\project
Completed: At revision: 176
Warning!: One or more files are in a conflicted state. 
```

当我进入该项目并右键单击 --> SVN Update 时，它​​会成功更新。也没有可用的冲突编辑器，当我右键单击 --> TortoiseSVN --> 已解决时，没有可用的文件。

什么可能导致冲突？只要这种情况不断发生，就不可能在我的工作副本中更新这个项目。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-02T14:18:17.550

```
Skipped obstructing working copy 
```

这意味着有一个工作副本文件夹：您的更新想要添加一个名为“项目”的文件夹，但您的工作副本中已经有一个版本化文件夹“项目”。也许您从另一个工作副本中移动了该文件夹？或者那个文件夹是它自己的工作副本（如果它有隐藏`.svn`文件夹，那么它就是一个独立的、单独的工作副本）。

解决方法：将文件夹移出工作副本（或将其删除）。然后再次运行更新。更新将再次获取同名文件夹。但它可能与您的不同 - 这就是为什么我建议您移动文件夹并仅在检查更新的文件夹与原始文件夹相同后将其删除。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-06T22:35:16.733

如果您的 svn 版本支持，您还可以在清理菜单中选中“删除未版本控制的文件和文件夹”选项。这肯定会让事情变得更容易，而不是一个一个地寻找那些文件夹（我总是发现它们是非版本控制的副本）。

请注意，在进行此清理之前，您不会在本地忘记提交任何有效的新文件添加..！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T13:33:36.090

尝试右键单击/TortoiseSVN/清理。

这通常对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-28T16:09:57.080

在 Windows 10 系统上使用 TortoiseSVN 1.9.5，从分支 (Project/branch/A) 合并回主干 (Project/trunk) 时出现类似的错误消息。我的主干工作目录没有本地修改，但合并抱怨我的工作副本文件夹的根目录

> “跳过阻碍工作副本”

. 问题是，我的工作副本位于不同的分区上，而“项目/主干”是一个连接点，指向另一个分区上文件的实际位置。

修复方法是对连接指向的分区文件夹执行 TortoiseSVN 合并操作，即工作副本文件实际所在的位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-29T16:44:27.010

我遇到了同样的问题，但它发生在一个非常大的分支的根部`(c:\svn\root)`。我只在其中一个目录中深入工作`(c:\svn\root\some\dir\deep\down\)`，因此 Stefan 对问题和解决方案的解释没有意义。

我的解决方法是单独更新每个目录，`c:\svn\root\` 然后再出来更新`c:\svn\root\`. 这对我有用。不确定问题到底是什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-30T14:12:37.967

我无需移动文件就解决了这个问题，因为我的`obstructed`子文件夹已正确链接到 svn：

1.  检查具有`Skipped obstructing working copy`
2.  现在您可以安全地删除受阻的文件夹（因为我们之前签入了所有内容）
3.  对根文件夹执行更新

现在整个文件夹再次干净并且根文件夹的更新工作。

# java - SVN 中特定分支（在另一个分支内）的修订 - 使用 SVNKit

> ID：10414817
> 
> 赞同：0
> 
> 时间：2012-05-02T13:31:23.530
> 
> 标签：java, svn, svnkit

我正在尝试从 svn 分支内的文件夹中获取最新版本。问题是当我这样做时

```
repository.getLatestRevision(); //with url of the folder: /svn/home/test/foldertest/scripts 
```

我没有得到文件夹的正确版本，但我从`url: "svn/home".`

我希望我说得足够清楚。

我正在使用 SVNKit 作为这个 java 应用程序的库。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:07:51.197

看起来[这就是你需要](http://old.nabble.com/getting-a-directory%27s-latest-revision-number-td17441178.html)的。

# javascript - 无法访问对象属性（很奇怪，因为它应该像往常一样工作）

> ID：10414820
> 
> 赞同：4
> 
> 时间：2012-05-02T13:31:30.707
> 
> 标签：javascript, object

我有一个非常奇怪的问题。我正在尝试访问子对象，但它不起作用。最简单的方法是只显示 FireBug 的控制台输出：

```
console.log(DesignDocument)

DesignDocument: mwrNsBrowser
    html: e.fn.e.init[1]
    name: "Game Design Document"
    rootName: "Game Design Document"
    __proto__: Object
        afterLoadCategory: function (bitData, catName)...
        bits: Object
        hide: function ()...
        html: ""
        loadCategory: function (catName, parentBit)...
        name: ""
        rootName: ""
        show: function ()...
        tmp: Object 
```

现在我正在尝试访问原型中定义的“位”对象。工作也很好。

```
console.log(DesignDocument.bits)

Object
    DocumentSet1: Array[1]
        0: mwrBrowserBit
        length: 1 
```

但这就是问题所在。我尝试获取“DocumentSet1”数组：

```
var selector = "DocumentSet1";
console.log(DesignDocument.bits[selector])

undefined 
```

它只是返回“未定义”！我目前不知道为什么这不起作用。希望有人能告诉我我太笨了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:05:32.560

数组 DocumentSet1 是 DesignDocument.bits 对象的一个​​属性，因此将其记录到控制台的正确语法是：

```
console.log(DesignDocument.bits.DocumentSet1); 
```

或者，如果您想在数组中显示特定项目：

```
console.log(DesignDocument.bits.DocumentSet1[num]); 
```

# .net - 我可以在查询中执行 GroupBy 以避免 poco 类中的属性吗？

> ID：10414821
> 
> 赞同：0
> 
> 时间：2012-05-02T13:31:35.097
> 
> 标签：.net, sql, linq, poco, dto

我在数据库中有 4 个表：

```
- News (NewsID(PK), NewsCategoryID(FK), NewsType (FK), NewsFormatID(FK), Caption, Description)
 - NewsType (NewsTypeID (PK), Caption)
 - NewsCategory(NewsCategoryID (PK), Caption)
 - NewsFormat (NewsFormatID (PK), Caption) 
```

我有 2 个 POCO 对象：

```
public class News
{
    public int NewsID { get; set; }
    public int NewsTypeID { get; set; }
    public int NewsFormatID { get; set; }
    public string Category{ get; set; }
    public string Caption { get; set; }
    public string Description { get; set; }
}

public class NewsCategory
{
    public string Caption { get; set; }
    public List<News> News{ get; set; }
} 
```

我想查询返回列表。在查询中，我想按类别对新闻进行分组。我是这样做的：

```
public static List<NewsCategory> GetNews()
    {
        using (var tc = new NewsDataContext())
        {
            var dc = tc.DataContext;
            var newsQuery= (from news in dc.News
                          join newsCategory in dc.NewsCategories on news.NewsCategoryID equals newsCategory.NewsCategoryID
                          join newsType in dc.NewsTypes on news.NewsTypeID equals newsType.NewsTypeID
                          join newsFormat in dc.NewsFormat on news.NewsFormatID equals newsFormat.NewsFormatID
                          select new News
                                     {
                                         NewsID = news.NewsID,
                                         NewsFormatID = newsFormat.NewsFormatID,
                                         Caption = news.Caption,
                                         Description = news.Description,
                                         Category = newsCategory.Caption
                                     });

            return newsQuery.GroupBy(item => item.Category).Select(item => new NewsCategory
                                                                             {
                                                                                 Caption = item.Key,
                                                                                 News= item.ToList()
                                                                             }).ToList();
        }
    } 
```

..这是有效的。我的问题是，我可以从 POCO 类 News 中删除 NewsCategory 属性，并直接在查询中（连接后）按类别进行分组吗？如何？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:59:29.087

此代码演示了如何在执行查询后加载行/列数据并对其进行整形。它不会“在数据库中分组”，但它确实允许删除 News.Category 属性。

```
var query= (
from news in dc.News
from newsCategory in news.NewsCategories
let newsFormat = news.NewsFormat
select new //anon type
{
  NewsID = news.NewsID,
  NewsFormatID = newsFormat.NewsFormatID,
  Caption = news.Caption,
  Description = news.Description,
  Category = newsCategory.Caption
});

//Load anon rows
var rows = query.ToList();

//shape the anon rows into our POCSO's.
List<NewsCategory> result = rows
  .GroupBy(item => item.Category)
  .Select(g => new NewsCategory()
  {
    Caption = g.Key,
    News = g.Select(row => new News()
    {
      NewsID = row.NewsID,
      NewsFormatID = row.NewsFormatID,
      Caption = row.Caption,
      Description = row.Description
    }
  })
  .ToList();

return result; 
```

* * *

您不想“在数据库中分组”是有原因的。group by 的数据库行为是返回键和聚合。您需要键和组元素。为了获取每个组的组元素，linqtosql 将使用每个组的键重新查询数据库。这会导致多次往返（称为 n+1 问题，其中 n 是组数，+1 是获取键的查询）。

该`Enumerable.GroupBy`方法返回组键和元素 - 这正是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:34:53.310

您可以在 News POCO 中添加 NewsCategory 属性并延迟/显式加载它。

查看[这篇](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)文章了解更多详情。

# java - JSP 通常是作为 .jsp 文件、预编译的 Java 文件还是预编译的类文件提供的？

> ID：10414823
> 
> 赞同：3
> 
> 时间：2012-05-02T13:31:40.170
> 
> 标签：java, jsp, jakarta-ee, deployment, war

在为生产环境准备 WAR 时，是否有打包 JSP 的“标准”实践？

它们是否包含在“.jsp”文件中？

还是作为预编译的 Java 文件或预编译的类文件包含在内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:58:53.073

Servelts/JSP 规范没有提到预编译 JSP 使这个特性**特定于容器实现**。您可以为特定容器预编译，例如 Tomcat 或 WebLogic，您肯定会发现 Ant 任务可以这样做。

一般来说，当你打包你的应用程序时，你就知道你的目标。如果它不止一个容器（比如您打包了一个可下载的产品），那么您唯一的选择是将原始 JSP 打包到您的 WAR 文件中。尽管如此，当您在开发和/或测试时，您当然可以将预编译作为构建过程的一部分，以 a) 验证您的 JSP 是否正确并 b) 加快启动时间。如果您在构建软件时需要额外的验证步骤，您甚至可以让 Eclipse 为您完成这项工作。

我不认为有一种行业惯例可以采取一种或另一种方式。根据我的经验，JSP 通常被打包为“原始”（未预编译）用于部署和分发，但作为构建/测试过程的一部分进行预编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:36:06.250

根据我的经验，它们只是作为 .jsp 文件在 WAR 中提供。应用服务器会自动将 .jsp 编译成一个类文件。有关 jsp 生命周期的更多信息，请参见[此处](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPIntro4.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:36:34.983

它们本身被打包为 .jsp 文件。请注意 jsp 文件大小限制 64K [jsp 文件大小限制](http://adam.goucher.ca/?p=166)

# android - 使用 Android 跟踪多个警报

> ID：10414828
> 
> 赞同：4
> 
> 时间：2012-05-02T13:32:01.287
> 
> 标签：android, alarmmanager, android-alarms

我需要设置一些每周重复的警报，以便在用户上某个课程（这是一个学术应用程序）时自动将手机置于振动状态，然后在课程结束时重置音量。

我已经创建了警报，但如果用户禁用此功能，我必须有办法停用所有警报。我也知道我必须通过向 AlarmManager.cancel() 方法传递和意图相同的参数来做到这一点，但这里的问题是：

用户可以取消课程并注册课程（但不能直接在应用程序中），这会更新并反映在数据库中，只保留当前课程。因此，如果我为一个不再存在的类设置了警报，如果我无法复制 PendingIntent，我该如何取消它？

我在这里看到的一个解决方案是创建一个数据库表来跟踪当前警报，然后我可以完全控制它们，另一种方法是在更新类列表时取消并重置所有警报，但这样做需要公平时间，第三个但不太友好的选择是简单地等待用户启动手机，并在重置警报时设置我需要的警报（如果我在这个启动行为上错了，请纠正）。我是否应该尝试第四个选项，或者如果足够好，可以选择其中一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:31:48.983

首先，您不需要设置多个警报。只需设置下一个警报，然后当该警报触发时，设置新的下一个警报。这也使得在手机重新启动时警报丢失时再次设置警报变得容易，因为您只需要考虑一个警报。

我用这个小程序来设置我的闹钟。该`Set`参数的值决定了报警是设置还是取消。

```
public static void SetMyAlarm(Context c, long AlarmTime, Boolean Set) {
    Intent intent = new Intent(c, AlarmReceiver.class); // The broadcast receiver that will handle my alarm 

    int UniqueID =8192; // id for this specific alarm, use a different id for each separate alarm

    PendingIntent sender = PendingIntent.getBroadcast(c, UniqueID, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    AlarmManager am = (AlarmManager) c.getSystemService(Context.ALARM_SERVICE);
    if (Set) {
        am.set(AlarmManager.RTC_WAKEUP, AlarmTime, sender);
    } else {
        am.cancel(sender);
    }
} 
```

# java - 从 Applet 到 EC2 实例上的 JBoss 的 JNDI 查找

> ID：10414829
> 
> 赞同：1
> 
> 时间：2012-05-02T13:32:07.577
> 
> 标签：java, jboss, applet, amazon-ec2, jndi

我在 Linux Amazon EC2 实例上运行 JBoss 4.0.4.GA。我从浏览器连接到一个 URL，该 URL 映射到下载 Applet 的 JSP。Applet 代码对会话 Bean 进行 JNDI 查找。我在浏览器的 Java 控制台上看到的错误是：

```
Connection refused to host: 10.xxx.xxx.xxx
nested exception is: 
    java.net.ConnectException: Connection timed out: connect 
```

即我的小程序正在尝试连接到实例的*私有*IP，这当然是注定要失败的。

执行 JNDI 查找的 [abridged] 代码是：

```
System.setProperty(InitialContext.PROVIDER_URL, "jnp://<public ip of EC2 instance>:1099");
InitialContext ic = new InitialContext(null);
Object o = ic.lookup("ejb/....MySessionBean"); 
```

当我在 Java 控制台中打开跟踪时，我可以看到正在向内部 IP 上的端口 1098 发出请求：

```
network: Connecting http://<public ip>:1099/ with proxy=DIRECT
network: Connecting http://<private ip>:1098/ with proxy=DIRECT 
```

有人可以告诉我如何在外部 IP 上进行 1098 通信吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:47:00.633

将 -Djava.rmi.server.hostname=public-IP 添加到 JBoss 启动解决了这个问题。

# antlr - ANTLR 语法问题

> ID：10414831
> 
> 赞同：1
> 
> 时间：2012-05-02T13:32:16.893
> 
> 标签：antlr, grammar

我的 ANTLR 语法有问题，我只是没有看到我的问题，现在已经尝试了一个多小时。我将我的问题简化为这个简单的语法：

```
 grammar TestGrammar;

        options {
          language = Java;
          k=2;
        }

        compu_method :  '/begin COMPU_METHOD'  NAME  NAME  NAME  NAME
              (
              (formula)
              |('COEFFS' realnumber realnumber realnumber realnumber realnumber realnumber)
              )*
              '/end COMPU_METHOD';

            formula : '/begin FORMULA' (.)* '/end FORMULA';

            realnumber: (INT | FLOAT);

        NAME : LETTER (LETTER|'0'..'9'|'['|']'|'.')* ; 
        fragment LETTER : 'A'..'Z' | 'a'..'z' | '_' ; 

        INT : MINUS? ('0' | '1'..'9' '0'..'9'*) ; 
        FLOAT : MINUS? ('0'..'9')+ '.' ('0'..'9')* Exponent? | MINUS? '.' ('0'..'9')+ Exponent? | MINUS? ('0'..'9')+ Exponent ; 
        MINUS : '-' ; 
        fragment Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

        WS : ( '\r\n'|'\n'|' '|'\r'|'\t'|'\u000C' ) { $channel=HIDDEN;}; 
```

我试图匹配的输入是：

```
/begin COMPU_METHOD
        foo
        foo
        foo
        foo
        COEFFS 0.000000 1.000000 0.000000 0.000000 0.000000 1.000000
/end COMPU_METHOD 
```

解释器总是给我“不匹配的输入 'COEFFS' 期望 '\u0005'”

但为什么？

如果我在我的语法中更改 (formula) 和 ('COEFFS' ...) 的顺序，那很好，我只是不明白为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:29:43.570

`N`修复错误后（ 中的标记无效`compu_method`，并且您忘记了规则后的分号`formula`），我解析输入没有问题。我得到以下解析树：

![在此处输入图像描述](../Images/b310b40868f8d69046494e5c3993234d.png)

请注意，我使用的是调试器，而不是解释器（这是错误的）。所以你的问题可能是你使用了解释器。

# javascript - Javascript世界地图

> ID：10414833
> 
> 赞同：8
> 
> 时间：2012-05-02T13:32:21.137
> 
> 标签：javascript, frameworks, map

我正在寻找 Javascript 框架来创建能够以不同颜色绘制不同国家的世界地图。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T13:36:21.177

我会使用你可以在这里找到的很棒的 jVectorMap：

[http://jvectormap.com/](http://jvectormap.com/)

简单，您可以获得更多要导入的地图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:45:49.000

更好地使用 SVG，因为它更适合图形。要了解更多信息：[http ://www.w3schools.com/svg/default.asp](http://www.w3schools.com/svg/default.asp)

您可以使用 wikimedia 提供的免费地图：http://commons.wikimedia.org/wiki/Category: [Blank_SVG_maps_of_the_world](http://commons.wikimedia.org/wiki/Category:Blank_SVG_maps_of_the_world)

更多免费地图：[http ://speckyboy.com/2010/05/03/25-free-vector-world-maps-ai-eps-and-svg-formats/](http://speckyboy.com/2010/05/03/25-free-vector-world-maps-ai-eps-and-svg-formats/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:41:58.520

您可以使用 Inkscape 编辑 SVG 文件以快速创建可链接的地图。要获得对旧浏览器的支持，您可以使用支持 IE 6-8 和 VML 的 Raphael.js 库。这是一个让您入门的示例：[http](http://www.raphaeljs.com/world) ://www.raphaeljs.com/world 。通过一些工作，甚至可以添加工具提示、缩放以及纬度和经度标记。请参阅[http://simplemaps.com/world](http://simplemaps.com/world)，了解 Raphael/JavaScript 可能实现的示例（免责声明：我构建的商业产品）。

# java - 随后在android中安排两个任务

> ID：10414839
> 
> 赞同：-1
> 
> 时间：2012-05-02T13:32:51.760
> 
> 标签：java, android

我想执行 2 个任务。第一次应该每 10 分钟重复一次 第二次应该每分钟重复一次。示例 在第一个任务中打开一个网站 在第二个任务中打开另一个网站。提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:42:49.823

对于调度部分，您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

例如：

```
public class TaskScheduler {
    public static void startScheduling(Context context) {

            Intent intent = new Intent(context, MyReceiver.class);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
            AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
            alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), 600, pendingIntent);

    }
} 
```

然后在您的接收器类中，您可以启动一个[IntentService](http://developer.android.com/reference/android/app/IntentService.html)：

```
public class MyReceiver extends BroadcastReceiver {    
    @Override
    public void onReceive(Context context, Intent intent) {
        Intent intentService = new Intent(context, MyService.class);
        context.startService(intentService);
    }
} 
```

`MyService`大致如下：

```
class MyService extends IntentService {
    public MyService() { 
        super(MyService.class.getSimpleName());
    }

    @Override
    public void onHandleIntent(Intent intent) {
        // your code goes here
    }
} 
```

最后，不要忘记`MyReceiver`在清单文件中注册：

```
<receiver 
   android:name="Your.Package.MyReceiver">
</receiver> 
```

以及您的服务：

```
<service 
   android:name="...">
</service> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:38:49.900

检查`AsyncTask`，这里有解释和示例：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# java - 在 eclipse helios 中安装休眠工具

> ID：10414841
> 
> 赞同：1
> 
> 时间：2012-05-02T13:33:10.690
> 
> 标签：java, eclipse, hibernate, jakarta-ee, eclipse-plugin

我想在安装软件期间通过[http://download.jboss.org/jbosstools/updates/stable/helios/](http://download.jboss.org/jbosstools/updates/stable/helios/)在eclipse helios中安装hibernate 我有这个错误：

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Problems downloading artifact: osgi.bundle,org.hibernate.eclipse.console,3.4.1.v20111025-0625-H210-Final.
MD5 hash is not as expected. Expected: fea0d20b63dde5eea8ac9441a7ffbd8d and found 22313e1a2eb7899f86b378b058007522.
Unable to read repository at http://download.jboss.org/jbosstools/updates/JBossTools-3.2.2.Final/plugins/org.hibernate.eclipse.mapper_3.4.1.v20111025-0625-H210-Final.jar.
Read timed out 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:41:49.720

你为什么要这么做？Helios 有一个内置的插件安装程序。

您提供的网址在顶部说得很好：

> 要安装 JBoss Tools，请启动 Eclipse（3.6.2 或更高版本）然后：
> Help > Install New Software... >
> 并添加此 URL：http:
> [//download.jboss.org/jbosstools/updates/stable/helios/](http://download.jboss.org/jbosstools/updates/stable/helios/)

这里的所有都是它的。我建议你试试这个，*不要*自己复制任何文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:18:27.007

当您使用 Eclipse Helios 时，您也可以通过“Marketplace”安装 JBoss 工具（其中包含 Hibernate 工具）。据我所知，我以这种方式在 Eclipse Helios 和 Indigo 上安装了 Hibernate 工具，并且运行良好。

# ruby-on-rails - 在另一个元素之后查找最近的元素

> ID：10414842
> 
> 赞同：1
> 
> 时间：2012-05-02T13:33:12.187
> 
> 标签：ruby-on-rails, ruby, xpath, nokogiri

我正在尝试使用 Nokogiri获取`<img>`最接近网页第一个标签的第一个图像。`<p>`我将使用结果在 Facebook 分享链接中显示文章概要。

我用来获取`<p>`文章第一个标签的代码如下：

```
doc = Nokogiri::HTML(open(@url))
@title = doc.css('title').text
@content = doc.css('p').first 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:47:59.780

## 找到第一个`<img>`在 a 中的`<p>`

如果您还没有/不需要该`<p>`元素，则：

```
first_img_in_p = doc.at_css('p img')
first_img_in_p = doc.at_xpath('//p//img') 
```

*请注意，如果它是 CSS 或 XPath 表达式，您可以使用并让 Nokogiri 从字符串中找出而不是[`at_css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_css)or 。[`at_xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_xpath)[`at`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at)*

## 找到第一个`<img>`里面的*第一个* `<p>`

如果您已经拥有父节点，则可以使用以下任一方法：

```
first_p     = doc.at('p')  # Better than finding all <p> and then reducing
first_image = first_p.at_css('img')
first_image = first_p.at_xpath('.//img') 
```

但是，有了这些答案（与前两个不同），如果第一个 p 没有图像，您将根本找不到任何图像。

## `<img>`在文档中找到第一个

如果您真的只想要第一个`<img>`（可能不在 a`<p>`或 first中`<p>`），那么只需执行以下操作：

```
first_image = doc.at('img') 
```

如果您想要第一个图像至少`<p>`在文档中某个位置出现，但不一定作为`<img>`...的包装器，那么请这样说，我可以进一步编辑答案。

## 找到第`<img>`一个`<p>`在它之前（或作为祖先）

**编辑**：根据您在下面的评论，我认为您想要：

```
img = doc.at_xpath('//img[preceding::p or ancestor::p]') 
```

`<img>`这表示“在文档中查找第一个在[它之前](http://www.w3.org/TR/xpath/#NT-AxisSpecifier)`<p>`某处发生的（但不是祖先），或者作为祖先的。”`<p>`

以下是一些测试用例，因此您可以决定这是否是您想要的：

```
require 'nokogiri'
[
  %Q{<r><p><img id="a"/></p></r>},
  %Q{<r><img id="z"/><p></p></r>},
  %Q{<r><img id="z"/><p><img id="a"/></p></r>},
  %Q{<r><img id="z"/><p></p><p><img id="a"/></p></r>},
  %Q{<r><p></p><p><img id="a"/></p></r>},
  %Q{<r><img id="z"/><p></p><p><img id="a"/></p></r>},
  %Q{<r><p></p><img id="a"/></r>},
  %Q{<r><img id="z"/><p></p><img id="a"/></r>},
  %Q{<r><p></p><b><c><img id="a"/></c></b></r>},
  %Q{<r><q><p></p></q><b><c><img id="a"/></c></b></r>},
  %Q{<r><p><img id="a"/></p><img id="z"/></r>},
  %Q{<r><p><img id="a"/></p><p><img id="z"/></p></r>},
].each do |xml|
  doc = Nokogiri.XML(xml)
  img = doc.at_xpath('//img[preceding::p or ancestor::p]')
  puts "%-50s %s" % [ xml, img||NONE ]
end

#=> <r><p><img id="a"/></p></r>                        <img id="a"/>
#=> <r><img id="z"/><p></p></r>                        NONE
#=> <r><img id="z"/><p><img id="a"/></p></r>           <img id="a"/>
#=> <r><img id="z"/><p></p><p><img id="a"/></p></r>    <img id="a"/>
#=> <r><p></p><p><img id="a"/></p></r>                 <img id="a"/>
#=> <r><img id="z"/><p></p><p><img id="a"/></p></r>    <img id="a"/>
#=> <r><p></p><img id="a"/></r>                        <img id="a"/>
#=> <r><img id="z"/><p></p><img id="a"/></r>           <img id="a"/>
#=> <r><p></p><b><c><img id="a"/></c></b></r>          <img id="a"/>
#=> <r><q><p></p></q><b><c><img id="a"/></c></b></r>   <img id="a"/>
#=> <r><p><img id="a"/></p><img id="z"/></r>           <img id="a"/>
#=> <r><p><img id="a"/></p><p><img id="z"/></p></r>    <img id="a"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:00:44.290

如果你正在寻找一个 img 的兄弟姐妹。@content.parent.css('>img')

# ruby-on-rails - OpenSSL::SSL::SSLError（主机名与服务器证书不匹配）：

> ID：10414844
> 
> 赞同：1
> 
> 时间：2012-05-02T13:33:18.067
> 
> 标签：ruby-on-rails, ssl

这个经典错误出现在任何下载的 PDF 中。

该错误是从任何浏览器（不仅仅是 IE）返回的。

使用 gem`gem "bartt-ssl_requirement", "1.2.5", :require => "ssl_requirement"`和：

```
ssl_allowed :my_action 
```

它仍然尝试 SSL 比较。

我还尝试针对`request.headers`此错误熟悉的 IE7 错误实施具体操作。

否则，*CSV 的所有链接和下载都*适用于 SSL 证书。

没有任何效果。我对接下来要做什么或检查什么一无所知。

# jquery - 将 JQuery 验证引擎插件与 JQuery Mobile 一起使用

> ID：10414846
> 
> 赞同：0
> 
> 时间：2012-05-02T13:33:29.363
> 
> 标签：jquery, jquery-mobile, jquery-validate

我正在尝试使用如下所述的 JQuery 验证引擎插件

[http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

使用 JQuery Mobile 控件。它适用于文本框，但是 QJM 下拉菜单没有显示验证气球。但是在提交表单时下拉菜单得到了验证，只有注册气球没有出现。

任何专家意见都将受到高度评价。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T05:43:52.213

只需放在 div 上。验证消息将在选择标签处突出显示。但这实际上是行不通的。我们不能再次取消验证。我要解决的问题是将第一个选项设置为选择一个......然后使用 jQuery 读取被选中的值并提醒插入正确的值。我使用 onClick 和 $('#yourselectioncontrolId").focus(); 你不必为此使用验证引擎插件。它不是完全为 jQueryMobile 设计的。你可以编辑他们的 CSS 以实现更好的 JQM。但它会是一个乏味的工作。反正我也在JQM项目上使用它。但在一定程度上，它有其自身的局限性。

```
$('#districtName').on('focus', function (e) {
    if ($('#malaysianState').val() == 'MY-00') {
        alert('Please select any state first');
        $('#malaysianState').focus();
    }

    e.preventDefault;
    return false;
}); 
```

我的 JQUERY 移动控制将是

```
<div data-role="fieldcontain">
                <label for="malaysianState" class="select">
                    <span lang="ms" id="stateName-label">Malaysian State</span>
                </label>
                <select name="malaysianState" id="malaysianState" data-native-menu="false">
                    <option value="NOT SELECTED" data-placeholder="true">Choose One...</option>
                    <option value="MY-01">Johor</option>
                    <option value="MY-02">Kedah</option>
                    <option value="MY-03">Kelantan</option>
                    <option value="MY-04">Melaka</option>
                    <option value="MY-05">Negeri Sembilan</option>
                    <option value="MY-07">Pulau Pinang</option>
                    <o
                    <option value="MY-16">WP Putrajaya</option>
                </select>
            </div>

             <div id="districtName-label" lang="ms">Select District </div>
                   <input id="districtName" class="validate[required] text-input" />
                   <input type="hidden" id="districtName-id" />
                <p></p>
<div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:52:08.233

我确实设法通过在 div 元素中包含选择菜单来显示气球，然后通过脚本显示验证提示。

```
<div id="validationPromptPropertyLevelDropDown" > 
            <select id="propertyLevelDropDown" data-bind="options: PropertyLevels,  value: PropertyLevelId ,  optionsText: 'PropertyLevelDescription', optionsValue: 'Id', optionsCaption: 'Choose one...'" name="propertyType" data-native-menu="false" ></select> 
        </div>

$('#validationPromptPropertyLevelDropDown').validationEngine('showPrompt', 'This field is required', 'fail'); 
```

# fonts - 字体大小不会减小我的程序的大小

> ID：10414848
> 
> 赞同：0
> 
> 时间：2012-05-02T13:33:30.860
> 
> 标签：fonts

我正在为收集有关他的客户及其交易的信息的人创建一个 android 应用程序。他的设备很旧，所以他问我是否可以减小程序的大小。

我尝试使用最简单的算法来做到这一点，即缩小字体大小。我尝试了这个并编译了我的程序，但它的大小没有改变，甚至没有一个字节。

这是我的输出

```
total 18228
-rw-rw-r-- 1 mark mark 18665472 May  2 15:27 ClientTransactions.jar 
```

我将程序的字体从**12pt**更改为**8pt**

新的输出是：

```
total 18228
-rw-rw-r-- 1 mark mark 18665472 May  2 15:29 ClientTransactions.jar 
```

任何人都可以帮助我进一步解决这个问题，我真的很困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:43:34.943

更改源代码的字体大小对其大小没有影响。每次编译都会产生相同的大小。

尝试重构您的代码并摆脱任何未使用的方法，...

# javascript - Javascript 中的工作流引擎

> ID：10414849
> 
> 赞同：34
> 
> 时间：2012-05-02T13:33:31.430
> 
> 标签：javascript, workflow, state-machine

有人知道 Javascript 的工作流引擎（例如 Spring WebFlow）吗？我们有一个自制的框架，可以让我们使用 JSON 来引导网站导航，但它的质量还很差。

*根据给定的答案进行编辑：引擎必须在浏览器上运行并将对服务器的请求数量减少到最低限度。*

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-03T16:02:58.750

正如 katspaugh 所建议的那样，我发布了我找到的库作为答案。到目前为止我发现的工作流库列表：

*   XState - [https://github.com/davidkpiano/xstate](https://github.com/davidkpiano/xstate)
*   用于 Backbone.js 的 Workflow.js [https://github.com/kendagriff/workflow.js](https://github.com/kendagriff/workflow.js)
*   Sprout 工作流引擎[https://github.com/bstaats/workr](https://github.com/bstaats/workr)
*   Javascript 有限状态机[https://github.com/jakesgordon/javascript-state-machine](https://github.com/jakesgordon/javascript-state-machine)
*   状态图[https://github.com/DavidDurman/statechart](https://github.com/DavidDurman/statechart)
*   machina.js [https://github.com/ifandelse/machina.js](https://github.com/ifandelse/machina.js)
*   jWorkflow [https://github.com/tinyhippos/jWorkflow](https://github.com/tinyhippos/jWorkflow)
*   庄严的[https://github.com/fschaefer/Stately.js](https://github.com/fschaefer/Stately.js)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T13:51:58.860

## [数据流](https://github.com/apla/dataflo.ws)

它是一个基于 JSON 的工作流引擎。它的特点：

*   模块化设计
*   几个有用的内置任务（MongoDB、OAuth、RabbitMQ）
*   带有路由器的 HTTP 发起程序

适用于 Node.js、浏览器（包括 IE9）和 PhoneGap。

GPLv3，GitHub 上的代码：[https ://github.com/apla/dataflo.ws](https://github.com/apla/dataflo.ws)

# android - 如何在我们的应用程序中打开短信设置活动？

> ID：10414854
> 
> 赞同：0
> 
> 时间：2012-05-02T13:33:46.873
> 
> 标签：android, android-layout, android-intent, android-widget, android-ndk

在以下代码中，我只能打开撰写短信.....

我想在不按下选项菜单的情况下打开 SMS 设置活动..

```
`String SMS_MIME_TYPE = "vnd.android-dir/mms-sms";

    Intent defineIntent = new Intent(Intent.ACTION_MAIN);                

    defineIntent.setType(SMS_MIME_TYPE);` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:01:06.927

Android SDK 中没有任何内容。

欢迎您联系数百个 SMS 客户端中的每一个的开发人员，询问他们是否有记录和支持的方式来从其应用程序外部启动其设置活动。Android开源项目中的app没有这样的手段——app的Settings Activity只能被app自己打开，第三方不能打开。

# asp.net - 单击按钮动态创建多个 RadDocks

> ID：10414856
> 
> 赞同：0
> 
> 时间：2012-05-02T13:33:56.727
> 
> 标签：asp.net, c#-4.0, telerik

我在尝试同时动态创建多个 RadDocks 时遇到了一些问题。

我想要实现的是在单击按钮时将多个 Docks 添加到 DockZone 中，但我唯一得到的是第一个 Dock 正确创建并在其余部分未显示时显示（它们在我刷新后显示网页），它们被创建但漂浮在区域之外。

一次创建一个 Dock 时，我遇到了类似的情况，它就像一个魅力。

这是代码：

```
protected void rbAddTickets_Click(object sender, EventArgs e)
        {
            var ticketList = (from t in db.Ticket
                              where t.idManager == idManager && t.Zatvoren == false || t.idManager == null && t.Zatvoren == false
                              select t).ToList();

            var memoTicketList = from t in ticketList
                                 where t.Memo == null || t.Memo == true
                                 orderby t.Firma.Naziv, t.idNadredeniTicket, t.RedniBroj, t.Opis
                                 select t;

            foreach (var ticket in memoTicketList)
            {
                RadDock dock = new RadDock();
                dock.UniqueName = ticket.idTicket.ToString();
                dock.ID = string.Format("RadDock{0}", dock.UniqueName);
                dock.Title = ticket.idNadredeniTicket + "-" + ticket.RedniBroj + " (" + ticket.Firma.Naziv + ")";
                dock.Text = ticket.Opis;
                dock.DockMode = DockMode.Docked;
                //dock.Index = Convert.ToInt32(Session["MinIndex"]) - 1;

                dock.Commands.Add(new DockCloseCommand());
                dock.Commands.Add(new DockExpandCollapseCommand());
                dock.Command += new DockCommandEventHandler(DockCommands);

                //ticket.Memo = true;
                //db.SaveChanges(); OMOGUĆI KASNIJE

                UpdatePanel1.ContentTemplateContainer.Controls.Add(dock);

                ScriptManager.RegisterStartupScript(
                dock,
                this.GetType(),
                "AddDock",
                string.Format(@"function _addDock() {{
    Sys.Application.remove_load(_addDock);
    $find('{1}').dock($find('{0}'));
    $find('{0}').doPostBack('DockPositionChanged');
}};
Sys.Application.add_load(_addDock);", dock.ClientID, rdzIncidenti.ClientID),
                true);
                CreateSaveStateTrigger(dock);

            }
        } 
```

所以，总结一切。我想正确生成 Docks；立即显示它们，无需刷新页面并在 DockZone 中创建它们。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:02:58.307

遇到的行为似乎是由于在回发后重新创建 RadDocks（浮动码头）时在页面上保存/加载 RadDock 控件的布局（缺少码头）和设置不同的**ID**或/和**UniqueName 问题引起的。**

在线演示[Dock / My Portal](http://demos.telerik.com/aspnet-ajax/dock/examples/myportal/defaultcs.aspx)是动态创建和持久化 RadDocks 状态的一个很好的示例，它实现的场景与您的类似，因此我建议您将其作为您进一步开发的参考。帮助文章[Dynamically Creating RadDock Controls](http://www.telerik.com/help/aspnet-ajax/dock-control-creation.html)也很有用，因为它列出了动态创建 RadDocks 的主要步骤。

总体而言，您提供的代码似乎是正确的，尽管我建议在 RadDockLayout 的 Controls 集合中添加新的 RadDocks，并在单击按钮时将它们插入到页面中时，通过 Dock 方法将它们停靠在特定的 RadDockZone 中。这是通过以下代码行在链接演示中的**ButtonAddDock_Click事件处理程序中实现的：**

```
 RadDockZone dz = (RadDockZone)FindControl(DropDownZone.SelectedItem.Text);
    //adding the dock to the docklayout and then docking it to the zone to avoid ViewState issues on subsequent postback
    RadDockLayout1.Controls.Add(dock);
    dock.Dock(dz); 
```

由于我主要猜测您实现的其余部分是什么，因此我建议检查提供的资源并利用它们来实现所需的功能。

# android - 在android中修改光标列值

> ID：10414860
> 
> 赞同：4
> 
> 时间：2012-05-02T13:34:11.620
> 
> 标签：android, cursor

我有一个从 SQLiteDataBase 对象返回的游标，我可以使用 getXXX() 从游标中获取列的内容，在我的情况下，我想使用`setXXX()`方法修改游标中的“更新”数据，我知道没有`setXXX()`方法，但是有具有此功能的 CursorWindow 对象，但我不能使用它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:49:56.580

您无法更改光标。

您可以做的是更新您的数据库，然后使用该`reQuery()`方法。

```
// code to update your db
cursor.requery(); 
```

**编辑**

进一步的研究表明，显然我是不正确的。你可以做你想做的事，但这需要做很多工作（不，我没有尝试过，我只是重新查询我的光标）。

我在论坛上找到了这个（使用谷歌搜索）：

> 您可以继承 SQLiteDatabase.CursorFactory 以从其 newCursor 方法返回 SQLiteCursor 的子类。该工厂被传递给 SQLiteOpenHelper 构造函数，因此，当您查询它时，它将返回您的新 SQLiteCursor 子类类型的游标。然后 SQLiteCursor 子类可以公开管理其受保护的 mWindow 字段的方法，该字段是一个 CursorWindow。这个对象有 putXxx 方法来操作数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:44:35.983

您不能更改返回的值`Cursor`。您要么需要更新数据库，从而更改返回游标指向的值，要么将使用 getXXX 获得的值复制到其他变量中。

# list - 从列表列表中删除空列表的每个实例

> ID：10414861
> 
> 赞同：5
> 
> 时间：2012-05-02T13:34:11.693
> 
> 标签：list, haskell, list-comprehension

我是 Haskell 的新手，我只是想写一个简单的列表理解来从列表列表中删除空列表的每个实例，即输入这个..

```
> remove ["abfwfw", "wfgwg", "", "dfw"] 
```

将导致此输出...

```
> ["abfwfw", "wfgwg", "dfw"] 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T13:36:34.983

[过滤器](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v:filter)是你的朋友。

```
filter (not . null) ... 
```

或者，对于那些喜欢手动过滤的人，

```
[ x | x <- xs , not (null x) ] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T13:36:26.470

`Filter`可能会帮助你。

```
> filter (not . null) ["abfwfw", "wfgwg", "", "dfw"] 
["abfwfw","wfgwg","dfw"] 
```

我们在这里所做的是使用谓词函数检查列表的每个元素的长度是否等于 null `(not . null) :: [a] -> Bool`。

关于过滤器是什么以及它们如何工作有一个很好的[解释](http://learnyouahaskell.com/higher-order-functions#maps-and-filters)。

# unicode - 这些 Unicode 组合字符是怎么回事，我们如何过滤它们？

> ID：10414864
> 
> 赞同：93
> 
> 时间：2012-05-02T13:34:24.267
> 
> 标签：unicode, sanitize, combining-marks, zalgo

กิิิิิิิิิิิิิิิิิิิิก้้็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็็กิิิิิิิิิิิิิิิิิิิิก้้ก็กิิิิิิิิิิิิิิิิิิิิก้้้้้้้้้้้้้้้้้้้้กิิิิิิิิิิิิิิิิิิิิก้้้้้้้้้้้้้้้้้้้้ก็ก็็็็็็็็็็็็็็็็็็็็ก็ก็็็็็็็็็็็็็็็็็็็็กิิิิิิิิิิิิิิิิิิิิกิิิิิิิิิิิิิิิิิิิิกิิิิิิิิิิิิิิิิิิิิก้้ก้้้้้้้้้้้้้้้้้้้้ก็้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้้</p> </p>

这些最近出现在 Facebook 评论部分。

我们如何对其进行消毒？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-02T13:42:44.883

> 这些 un​​icode 字符是怎么回事？

那是一个具有一系列[*组合字符的字符*](http://unicode.org/faq/char_combmark.html)。因为有问题的组合字符想要超过基本字符，所以它们堆叠起来（字面意思）。例如，案例

ก้้้้้้้้้้้้้้้้้้้้</p>

...这是一个 ก（泰语字符*ko kai*）（[U+0E01](http://unicode.org/cldr/utility/character.jsp?a=0E01)），后跟 20 个泰语组合字符*mai tho*（[U+0E49](http://unicode.org/cldr/utility/character.jsp?a=0E49)）。

> 我们如何对其进行消毒？

您*可以*预处理文本并限制可应用于单个字符的组合字符的数量，但这种努力可能不值得回报。您需要所有当前字符的数据表，以便知道它们是组合还是什么，并且您需要确保至少允许一些字符，因为某些语言是在一个基础上使用多个变音符号编写的. 现在，如果您想将评论限制为拉丁字符集，那将是一个更简单的范围检查，但当然，如果您想将评论限制为仅几种语言，这只是一种选择。[unicode.org](http://unicode.org/)上的更多信息、代码表等。

顺便说一句，如果您想知道某个字符是如何组成的，那么对于最近的另一个问题，我在 JSBin 上编写了一个[快速而肮脏的“Unicode Show Me”页面。](http://jsbin.com/erajer)您只需将文本复制并粘贴到文本区域中，它就会向您显示构成文本的所有代码点（~字符），以及上面描述每个字符的页面的链接。它仅适用于 U+FFFF 及以下范围内的代码点，因为它是用 JavaScript 编写的，并且要在 JavaScript 中处理 U+FFFF 以上的字符，您必须做的工作比我想为该问题做的要多（因为在 JavaScript 中，一个“性格”*总是*16 位，这意味着对于某些语言，一个字符可以分成两个单独的 JavaScript“字符”，我没有考虑到这一点），但对于大多数文本来说它很方便......

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-12T18:33:33.193

如果您有一个支持良好 Unicode 的正则表达式引擎，那么清理这种字符串是微不足道的。例如，在 Perl 中，您可以从每个（用户感知的）字符中删除除第一个组合标记之外的所有字符，如下所示：

```
#!/usr/bin/perl
use strict;
use utf8;

binmode(STDOUT, ':utf8');

my $string = "กิิ ก้้ ก็็ ก็็ กิิ ก้้ ก็็ กิิ ก้้ กิิ ก้้ ก็็ ก็็ กิิ ก้้ ก็็ กิิ ก้้";
$string =~ s/(\p{Mark})\p{Mark}+/$1/g; # Strip excess combining marks
print("$string\n"); 
```

这将打印：

# กิ ก้ ก็ ก็ กิ ก้ ก็ กิ ก้ กิ ก้ ก็ ก็ กิ ก้ ก็ กิ ก้

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-12T18:00:08.830

[TJ Crowder](https://stackoverflow.com/users/157247/t-j-crowder)最好在上面回答“我们如何对其进行消毒”

但是，我认为清理是错误的方法，[Cristy](https://stackoverflow.com/users/407650/cristy)`overflow:hidden`在包含 css 的元素上是 正确的。

至少，我就是这样解决它的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-03-17T12:38:48.923

好的，这花了我一段时间才弄清楚，我的印象是组合字符来产生 zalgo[仅限于这些](https://en.wikipedia.org/wiki/Combining_character)。所以我希望[遵循正则表达式](https://regex101.com/r/hN8zL0/2)来捕捉怪胎。

```
([\u0300–\u036F\u1AB0–\u1AFF\u1DC0–\u1DFF\u20D0–\u20FF\uFE20–\uFE2F]{2,}) 
```

它没有用......

问题是[wiki 中的列表](https://en.wikipedia.org/wiki/Combining_character)并未涵盖所有组合字符。

给我提示的是`"ก้้้้้้้้้้้้้้้้้้้้".charCodeAt(2).toString(16)`=“e49”，它不在组合范围内，属于“私人使用”。

在 C# 中，它们属于`UnicodeCategory.NonSpacingMark`下面的脚本并将它们刷新：

```
 [Test]
    public void IsZalgo()
    {
        var zalgo = new[] { UnicodeCategory.NonSpacingMark };

        File.Delete("IsModifyLike.html");
        File.AppendAllText("IsModifyLike.html", "<table>");
        for (var i = 0; i < 65535; i++)
        {
            var c = (char)i;
            if (zalgo.Contains(Char.GetUnicodeCategory(c)))
            {

                File.AppendAllText("IsModifyLike.html", string.Format("<tr><td>{0}</td><td>{1}</td><td>{2}</td><td>A&#{3};&#{3};&#{3}</td></tr>\n",  i.ToString("X"), c, Char.GetUnicodeCategory(c), i));

            }
        }
        File.AppendAllText("IsModifyLike.html", "</table>");
    } 
```

通过查看生成的表格，您应该能够看到哪些是堆叠的。wiki 上缺少的一个范围是`06D6-06DC`另一个`0730-0749`.

**更新：**

[这是更新的正则表达式](https://regex101.com/r/hN8zL0/6)，它应该找出所有的 zalgo，包括那些在“正常”范围内绕过的 zalgo。

```
([\u0300–\u036F\u1AB0–\u1AFF\u1DC0–\u1DFF\u20D0–\u20FF\uFE20–\uFE2F\u0483-\u0486\u05C7\u0610-\u061A\u0656-\u065F\u0670\u06D6-\u06ED\u0711\u0730-\u073F\u0743-\u074A\u0F18-\u0F19\u0F35\u0F37\u0F72-\u0F73\u0F7A-\u0F81\u0F84\u0e00-\u0eff\uFC5E-\uFC62]{2,}) 
```

最难的是识别它们，一旦你做到了——有很多解决方案，包括上面的一些好的解决方案。

希望这可以节省您一些时间。

# null - PMD：如何处理在instanceof之前不需要检查null

> ID：10414868
> 
> 赞同：0
> 
> 时间：2012-05-02T13:34:40.617
> 
> 标签：null, instanceof, pmd

嗨，我有以下代码。

```
if (SecurityContextHolder.getContext().getAuthentication() != null
                && SecurityContextHolder.getContext().getAuthentication()
                        .getPrincipal() instanceof User) 
```

当我使用 pmd 检查时，它给了我一个警告：无需在 instanceof 之前检查 null。

Q1.) 你如何解决这个警告？- 如果我只是做安全性`SecurityContextHolder.getContext().getAuthentication().getPrincipal()`并且 getAuthentication 为空，那么我会得到 NPE（空指针异常）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:32:30.533

我认为这是 PMD 中的一个错误，因为我面临同样的问题。也许这种模式的 XPath 表达式不够清晰。但它已经修复了。见 [http://sourceforge.net/tracker/index.php?func=detail&aid=2317099&group_id=56262&atid=479921](http://sourceforge.net/tracker/index.php?func=detail&aid=2317099&group_id=56262&atid=479921)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:44:54.977

如果不能使用固定版本的PMD，添加一个临时变量

```
... principal = null;
if (SecurityContextHolder.getContext().getAuthentication() != null)
   principal = SecurityContextHolder.getContext().getAuthentication()
                    .getPrincipal();
if (principal instanceof User) ... 
```

# c++ - Parasoft 错误：应使用管理资源的对象而不是“x”指针

> ID：10414869
> 
> 赞同：0
> 
> 时间：2012-05-02T13:34:49.107
> 
> 标签：c++, pointers, binary-search-tree, parasoft

我创建了一个二叉搜索树，我的二叉树的每个节点都设置在一个包含键的结构中，以及一个指向左右节点的指针。

在我的这个二叉搜索树的复制构造函数中，我调用了一个辅助方法来递归遍历看起来像这样的树：

```
Node* BinaryTree::copyHelper(const Node* other)
{
if(other == NULL)
{
    return NULL; // If there's no Node to copy, return NULL.
}

Node* newNode  = new Node; 

if(newNode)
{
    newNode->name  = other->name;
    newNode->left  = copyHelper(other->left); 
    newNode->right = copyHelper(other->right);
}

return newNode; 
} 
```

我在标题中提到的错误是在上面最后一个 if 语句中的左右指针上。

如果有人能告诉我如何删除它，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:07:32.037

如果您使用智能指针而不是原始指针，您可能可以绕过警告：

```
typedef std::unique_ptr<Node> NodePtr; 
NodePtr newNode(new Node); 
```

代替

```
Node* newNode = newNode; 
```

# grails - 是否可以自动下载 Grails 插件源？

> ID：10414882
> 
> 赞同：2
> 
> 时间：2012-05-02T13:35:25.313
> 
> 标签：grails, intellij-idea

是否可以像 maven 那样自动下载 grails 插件及其依赖项的源代码？

手动附加资源太疯狂了

# android - Framelayout，与其他视图下的视图交互

> ID：10414884
> 
> 赞同：2
> 
> 时间：2012-05-02T13:35:31.390
> 
> 标签：android, android-layout

我在框架布局中有 2 个画布视图，一个接一个，就像堆栈一样。

```
<Framelayout>
      <Canvas />    // Canvas underneath
      <Canvas />    // Canvas available to user for interaction.
</Framelayout> 
```

两个帆布占据整个区域，下方的帆布完全被帆布鞋面覆盖。两个画布都是透明的，因此用户可以看到两个画布（如果它们有任何内容）。

我让用户使用触摸交互在上部画布上绘图。

如何禁用上部画布的触摸侦听器，以便用户现在可以在下面的画布上绘制，但上部画布仍然可见。Upper Canvas 只是不与用户的触摸输入进行交互。相反，下部画布正在交互。

我正在使用按钮而不是画布进行测试，只有上部按钮响应点击事件。通过扩展，画布视图也是如此。

我想我需要某种类似 dispatchTouchEvent() 的方法。目前它也不起作用，或者我用错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:44:08.257

只需将触摸事件传递给底层画布。

例如：

```
canvas.setOnTouchListner(new View.OnTouchListener(){

onTouch(View view, MotionEvent event) 
    {       
        canvasUnder.onTouch(event);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:51:29.567

触摸事件沿视图树向下级联，直到触摸侦听器返回`true`。

由于一个画布始终位于另一个画布的“下方”，因此将顶层画布作为底层画布的子级是有意义的。这意味着底层必须是某种自定义 ViewGroup。

无论哪种方式，当您不希望顶级画布处理触摸事件时，只需对顶级画布执行以下操作：

```
@Override
public void onTouch(View view, MotionEvent event) {
   if(touchHandled())
      return true;
   else
      return false;
} 
```

然后在底部画布做一些事情：

```
@Override
public void onTouch(View view, MotionEvent event) {
   handleBottomLevelTouchEvent()
} 
```

# asp.net - 预先存在的脚本注入点

> ID：10414885
> 
> 赞同：0
> 
> 时间：2012-05-02T13:35:35.050
> 
> 标签：asp.net, iis-7, httpmodule

我看到了[这句话](http://msdn.microsoft.com/en-us/library/bb398986.aspx)：

> **ASP.NET 使用模块来实现**各种应用程序功能，其中包括表单身份验证、缓存、会话状态和**客户端脚本服务**。

我想确切地知道关于“客户端脚本服务”它指的是哪个模块，并且我想知道“客户端脚本服务”是否可以配置为注入我自己的脚本。如果可以，那么我不会费心[制作自己的 HttpModule](https://stackoverflow.com/a/793331/284758)。

请假设我使用的是 IIS7 集成模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:43:05.153

它指的是[ScriptModule](http://msdn.microsoft.com/en-us/library/system.web.handlers.scriptmodule.aspx)。并且要回答关于是否可以将其配置为注入您自己的脚本的第二个问题，答案是否定的，它不能。

根据您要实现的目标，还有其他方法可以注入您自己的脚本。

# git - 在 Git 中跟踪 Gitolite（常用）钩子

> ID：10414887
> 
> 赞同：4
> 
> 时间：2012-05-02T13:35:48.627
> 
> 标签：git, githooks, gitolite

[我在 Gitolite 的钩子手册](http://sitaramc.github.com/gitolite/cust.html#hooks)中发现的唯一内容是：

> 如果你想添加自己的钩子，只要不是“更新”钩子就可以了。只需将其添加到 $HOME/.gitolite/hooks/common 并运行 gitolite setup。

但是，我还想*跟踪*对这些钩子所做的更改，如果需要，可以恢复到旧版本（审计功能被[认为](http://sitaramc.github.com/gitolite/why.html)是使用 Gitolite 的一大优势）。所以，基本上，我期待`hooks`在我的 gitolite-admin 克隆中添加一个文件夹，然后将挂钩推送到服务器（就像你使用配置或添加公钥一样）。

这有意义吗？是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:39:18.030

这些钩子可以添加到您的`gitolite-admin`repo ( `gitolite-admin/hooks/common`) 中并推送回 Gitolite 服务器。
所以它们是版本化的。（至少 Gitolite V2 是这样，我将不得不检查 Gitolite V3）

* * *

事实证明，它确实有效，除了[OP Rijk](https://stackoverflow.com/users/801042/rijk)报告：

> 问题是我的 conf 中的一个错误，它停止了安装程序。
> 注释掉该行，并且触发器已正确安装
> 
> 这是我的这一行`gitolite.conf`：

```
config hooks.showrev = "git log -1 --name-status --format='%%h (%%ad) ------------------------------%%n%%n%%B' %s". 
```

> 不知道为什么，但触发了以下错误：

```
FATAL: bad value 'git log -1 --name-status --format='%%h (%%ad) ------------------------------%%n%%n%%B' %s'. 
```

> 暂时把它注释掉，`post-receive-email`以后可能会重写脚本。

* * *

OP [Rijk](https://stackoverflow.com/users/801042/rijk)的当前解决方案：

> 我目前在 Gitolite v3 上对此的解决方案是：
> 
> *   把东西放进去**`gitolite-admin/local-code/hooks/common`**
> *   然后在服务器上放置一个完整路径符号链接到**`$HOME/.gitolite/hooks/common`**.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T17:20:53.597

如果您查看 src/lib/Gitolite/Conf.pm 中的代码，您会注意到如果值中有一个 UNSAFE_PATT 字符串，它会打印出“错误值”。

UNSAFE_PATT 看起来像这样（在 src/lib/Gitolite/Rc.pm 中）： $UNSAFE_PATT = qr([`~#\$\&()|;<>]);

问题是您使用括号（以及 gitolite.conf 中的简单解析）

# php - 服务器端与客户端图表生成

> ID：10414888
> 
> 赞同：1
> 
> 时间：2012-05-02T13:35:52.400
> 
> 标签：php, charts, google-visualization

我必须选择一个工具来生成包含有关时间消耗、项目时间分布等信息的图表。我目前正在使用 PHP，我想知道客户端图表生成之间的优缺点是什么（例如[Google Chart Tools](https://developers.google.com/chart/) ) 和服务器端（如[PChart](http://pchart.sourceforge.net/)）。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:38:52.470

服务器为您提供更严格的控制 - 依赖于客户端假设 a) 用户启用了 JS，并且 b) 他们的浏览器没有任何问题。

但是，在客户端上执行此操作意味着在服务器上花费的资源更少。这对你来说可能很重要，也可能不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:38:17.170

很好的服务器端计算能力正在被使用。如果您为 CPU 使用付费或 CPU 使用受限，那么 phcarts 可能会受到伤害。

Javascript 图表与后端无关。它们是轻量级的，将渲染的负担放在用户身上，并且色彩丰富且具有交互性。

# c# - 如何将浮点数保存为 2 个字节？

> ID：10414889
> 
> 赞同：11
> 
> 时间：2012-05-02T13:35:54.493
> 
> 标签：c#, binary, floating-point, ieee-754, numerical

是的，我知道 IEEE-754 半精度标准，是的，我知道在该领域所做的工作。简单地说，我试图在 2 个字节中保存一个简单的浮点数（如`52.1`、 或）。`1.25`

我在[Java](https://stackoverflow.com/questions/6162651/half-precision-floating-point-in-java)和[C#](http://sourceforge.net/projects/csharp-half/)中尝试了一些实现，但它们通过解码不同的数字来破坏输入值。您输入`32.1`并在编码解码后得到`32.0985`.

有什么方法可以在不破坏输入值的情况下仅以 16 位存储浮点数？

非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T13:43:08.460

您可以将三位数字存储在 BCD 中，并将剩余的四位用于小数点位置：

```
52.1 = 521 * 10 ^ -1 => 0x1521
1.25 = 125 * 10 ^ -2 => 0x2125 
```

这将为您提供从 0.0000000000000001 到 999 的范围。您当然可以为小数点添加偏移量，例如范围为 0.0000000001 到 999000000。

* * *

四位用于小数点放置的简单实现，其余用于值。没有任何错误检查，也没有彻底检查。`!=`（用于比较双精度时，某些值可能存在精度问题。）

```
public static short Encode(double value) {
  int cnt = 0;
  while (value != Math.Floor(value)) {
    value *= 10.0;
    cnt++;
  }
  return (short)((cnt << 12) + (int)value);
}

public static double Decode(short value) {
  int cnt = value >> 12;
  double result = value & 0xfff;
  while (cnt > 0) {
    result /= 10.0;
    cnt--;
  }
  return result;
} 
```

例子：

```
Console.WriteLine(Encode(52.1));
Console.WriteLine(Decode(4617)); 
```

输出：

```
4617
52.1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T13:40:26.607

C# 对此没有内置功能，但您可以尝试使用定点方法。

8,8 定点示例（逗号前 8，逗号后 8）：

```
float value = 123.45;
ushort fixedIntValue = (ushort)(value * 256); 
```

这样，号码是这样存储的：XXXXXXXX,XXXXXXXX

您可以使用以下方法再次检索浮动：

```
float value = fixedIntValue / 256f; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T13:40:32.313

你确定你需要这样的微优化，而不是简单地使用`float`or`double`吗？

存储 a`short`并理解例如它除以 100 得到实际数字会更好吗？（例如，您的 52.1 和 1.25 示例可以存储为 5210 和 125）我认为这可能是您的最佳解决方案。

如果您打算使用实际的浮点数，则可以将解码后的数字四舍五入到 x 位有效数字（从您的示例中为 3），这通常可以让您返回与开始时相同的数字（请注意是的，这是故意含糊不清的——除非您存储原件，否则您不能保证获得原件）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T13:38:42.670

问题是您无法`32.1`以**任何**二进制浮点类型精确表示。

在单精度中，最接近的可表示值是 32.099998。在半精度下，它显然是 32.0985。

您可以考虑使用十进制浮点类型，但这种解决方案并不是半精度独有的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T13:39:06.063

从您的示例中，您想要存储 3 位数字和一个小数点。您可以简单地将 11 个符号的“字母”编码为 4 位代码，并将 4 x 4 位存储在 2 个字节中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T20:49:21.807

有 4,278,190,080 个 32 位浮点值，不包括 NaN 和无穷大。两个字节中的 16 位有 65,536 个值。显然，不可能将所有浮点值唯一地编码在两个字节中。

您要编码哪些？

即使对于符号和指数的单个值（例如，从 4 到 8 的所有浮点值，不包括 8），也有 8,388,608 个浮点值，因此您甚至无法将它们编码为两个字节。

您必须将自己限制为要编码的一小部分值。完成此操作后，人们可能会对如何对其进行编码提出建议。您要解决的实际问题是什么？

# php - Zend_Translate 和 Zend_Cache 独立

> ID：10414898
> 
> 赞同：0
> 
> 时间：2012-05-02T13:36:17.467
> 
> 标签：php, zend-framework, zend-translate, zend-cache

我正在尝试添加`Zend_Translate`一个 PHP 项目，使用 Zend 组件作为独立库。

我已经使用以下方法对多个项目使用缓存：

```
$cache = Zend_Cache::factory( ...
if (!($obj = $cache->load('OBJ')))
{
  $obj = ...
  $cache->save($obj);
} 
```

现在，按照 的文档`Zend_Translate`，我将相同的`$cache`对象设置为 my`Zend_Translate`以`setCache`实际创建对象：

```
Zend_Translate::setCache($cache);
$translate = new Zend_Translate(
  array(
    'adapter' => 'gettext',
    'content' => 'languages',
     null,
     array('scan' => Zend_Translate::LOCALE_FILENAME)
  )
); 
```

所以，在这里，我正在远离我通常的方法，而是将整个方法放在`Zend_Translate`缓存中。截至目前，总体结果如下：

```
// 1.php

ob_start();
session_start();

$cache = Zend_Cache::factory( ...
if (!($obj = $cache->load('OBJ')))
{
  $obj = ...
  $cache->save($obj);
}

Zend_Translate::setCache($cache);
$translate = new Zend_Translate(
  array(
    'adapter' => 'gettext',
    'content' => 'languages',
    null,
    array('scan' => Zend_Translate::LOCALE_FILENAME)
  )
);

echo $translate->_("Hello, I'm the first script");

// end 1.php 
```

和

```
// 2.php

ob_start();
session_start();

$cache = Zend_Cache::factory( ...
if (!($obj = $cache->load('OBJ')))
{
  $obj = ...
  $cache->save($obj);
}

Zend_Translate::setCache($cache);
$translate = new Zend_Translate(
  array(
    'adapter' => 'gettext',
    'content' => 'languages',
    null,
    array('scan' => Zend_Translate::LOCALE_FILENAME)
  )
);

echo $translate->_("Hello, I'm the second script");

// end 2.php 
```

这种方法不起作用，因为我看到每次加载页面时都会创建缓存文件。

我想知道：

1.  我是否正确地假设我需要`Zend_Cache::factory`在每一页中调用？
2.  在这种独立情况下，如何让我的翻译与缓存一起使用？
3.  关于的问题`Zend_Translate`：是否`addTranslation`在图片中添加了任何内容，或者我可以像我一样加载我所有的翻译吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:29:43.143

**问题 #1** 是的。您需要在每次页面加载时调用 Zend_Cache::factory。但是如果您已经使用 Zend_Cache，您可以根据需要重新使用它，而不是为 Zend_Translate 创建一个新实例。

**问题 #2**。Zend Translate + Zend Cache 作为独立组件的使用没有区别。以下是我如何在如此小的脚本中将它们用作独立组件：

```
// Init application
define('APP_PATH',      realpath(dirname(__FILE__)));
define('APP_DATA',  APP_PATH . '/lang');
define('APP_CACHE',     APP_PATH . '/tmp');

require_once 'Zend/Translate.php';
require_once 'Zend/Cache.php';

// initialize cache
$cache = Zend_Cache::factory(
      'Core'
        , 'File'
        , array(
              'caching'     => true
            , 'lifetime'    => 900
            , 'automatic_serialization' => true
            , 'automatic_cleaning_factor'   => 20
            , 'cache_id_prefix'             => 'Translate'
            )
        , array(
              'hashed_directory_level' => 0
            , 'cache_dir'   => APP_CACHE
        )
    );

// Setup translation object
Zend_Translate::setCache($cache);
$translate = new Zend_Translate('tmx', APP_DATA . '/general.tmx');

echo $translate->_("Hello, I'm the second script"); 
```

好的，您已准备好使用 Zend_Cache。Zend_Translate 实例本身将在内部覆盖所有缓存。

**问题 #3**。addTranslation() 只是添加新的翻译源，您可以将它们传递给构造函数（您的情况）。

在将缓存传递给 Zend_Translate 之前尝试为缓存设置“cache_id_prefix”，这将帮助您确定问题是否出现在代码“...”的某个地方，或者在每次页面加载时创建的新缓存是由 Zend Translate 创建的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T15:28:39.117

如果我没记错的话，Zend_Translate 中的 Zend_Cache 用法有点用词不当。我认为它的作用是通过设置翻译器的选项来减少目录扫描和区域设置，而不是翻译字符串本身的结果。

# ant - 将 .class 文件添加到 ant 类路径以进行 groovc ant 任务编译？

> ID：10414909
> 
> 赞同：2
> 
> 时间：2012-05-02T13:36:40.260
> 
> 标签：ant, fileset

我在 Eclipse 中有一个名为**MyApp的项目。**我有另一个名为**TestRepository**的项目，其中包含为 MyApp 项目编写的测试用例。

我正在尝试编译测试用例并使用类路径为的 groovyc ant 任务生成 junit 报告：

```
<path id="classpath">
   <fileset dir="lib/MyApp">
      <include name="*.jar" />
   </fileset>   
</path> 
```

MyApp 的 jar 文件被添加到类路径中。如果在测试用例中引用的 MyApp 项目的类在 lib 文件夹的 jars 中不存在，我希望 groovyc 搜索`MyApp/bin`包中的类。

我怎样才能做到这一点？

PS：MyApp 项目非常庞大，我不想让 groovyc 任务编译 MyApp 中的所有 src 文件，而只是从 bin 中获取额外的 .class 文件并将其放在其类路径中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:36:39.963

Java、Groovy 或任何其他 JVM 语言中的类路径是一个路径列表，每个路径都可以是目录或 JAR 文件。您已经添加了代码所依赖的所有 JAR 文件，但没有添加 bin 目录。

添加如下所示的路径元素以将 bin 目录添加到您的类路径中。请记住，路径需要相对于构建脚本的位置给出。

```
<path id="classpath">
   <fileset dir="lib/MyApp">
      <include name="*.jar" />
   </fileset>
   <pathelement path="bin" />
</path> 
```

上面的路径定义假定“bin”与构建脚本位于同一目录中。如果没有，请相应地调整路径。

# xml - 如何对 Wcf 服务进行编程以接受 xml 数据？

> ID：10414913
> 
> 赞同：1
> 
> 时间：2012-05-02T13:36:55.033
> 
> 标签：xml, wcf

我需要编写一个接受 3rd 方应用程序的 wcf 服务，以将 xml 文件发送到 wcf 服务。

xml 文件的示例可能是：

```
<?xml version="1.0" standalone="yes"?>
<Customers>
  <Customer>
    <ID>1</ID>
    <Name>Name 1</Name>
  </Customer>
  <Customer>
    <ID>3</ID>
    <Name>Name 3</Name>
  </Customer>
</Customers> 
```

如何设置 wcf 服务以接受此数据集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:41:34.320

这将是一种方式，它允许您对地址处的服务进行 HTTP POST 非肥皂格式、无类型的请求`http://<your-url>/<your-service-name>/ReceiveCustomers`

```
[WebInvoke(UriTemplate = "ReceiveCustomers", Method = "POST", RequestFormat=WebMessageFormat.Xml, BodyStyle=WebMessageBodyStyle.Bare] 
[XmlSerializerFormat]    
public void ReceiveCustomer(XElement customers)
{
 ....
} 
```

# html - CSS & HTML：放置多个 div/section 和图像

> ID：10414917
> 
> 赞同：0
> 
> 时间：2012-05-02T13:37:06.873
> 
> 标签：html, css

我目前设计和编码了这个布局：

![问题示例](../Images/2005c0408a89470647eca4fb155592a7.png)

1.  但是，我不确定如何将“查看更多、向我们发送电子邮件和发送消息”按钮/图标放置在页脚的底部，以便它们是内联的，而无需创建单独包含每个的替代 div。

    *   这是为了视觉美学目的，适应或响应正在查看的设备，以及如果用户/网站所有者想要在服务列表中添加更多内容或在推荐区域中放置更多内容，“查看更多，给我们发电子邮件和发送消息”按钮/图标将被按下以适应。
2.  您将如何实现“致电我们、访问我们和给我们发送电子邮件”区域而不将它们分成 4 个 div/部分（1 个容纳它们的容器、1 个调用我们的 div、1 个访问我们的 div 和 1 个给我们发送电子邮件的 div）。也许是一个伪 :before 内容图标/图像并以某种方式左右浮动？如果这是正确的，我不太有信心。

3.  我是否也正确排列了“服务、推荐和快速联系”区域......向左浮动、向左浮动和向右浮动？因为将位置设置为左、右并让“推荐”仅居中，仅在容器内居中而不是在两列之间？

我的代码看起来与此类似：http: [//jsfiddle.net/mSmLH/](http://jsfiddle.net/mSmLH/)

任何帮助将不胜感激。

* * *

我申请
`position: relative`了：我的父母（页脚）
`position: inherit;`和`bottom:0;`我的查看更多按钮
`position: absolute;`以及`bottom:0;`邮件图标和发送消息按钮，这似乎已经修复了它。我知道这可能需要更多的调整，但感谢您的时间和精力@Surreal Dreams

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:45:33.707

1.  要对齐各个专利容器底部的项目，首先要确保三个容器 div 的高度相同。您可以手动调整这三个元素的位置，并对and or规则`position: relative`进行一些调整。`top``right``left`

2.  我不会。将这三个部分放在 div 中效果很好，这是最直接的方法。您可以使用表格，但这是错误的布局方法。你以正确的方式做这件事，它正在工作。这是一件好事™。

3.  我通常会将它们全部向左浮动，但两左一右（或两右一左）是完全合法的，更重要的是，*它可以工作*。在布局方面，有很多方法可以做事。你找到了一个可行的——这是最重要的设计特征。

# postgresql - Rails App-postgresql - 学习使用复制命令 - mac OSX 上 db 的位置？

> ID：10414918
> 
> 赞同：0
> 
> 时间：2012-05-02T13:37:09.650
> 
> 标签：postgresql, copy

嗨，我正在学习如何使用 postgresql 的 COPY 命令将数据从本地驱动器上的 csv 文件导入到我的 rails 应用程序的 postgresql db 中。

第一步是如何在本地驱动器上找到 postgresql 的位置？

我不需要它来调用 COPY 命令吗？

我有 pg3admin，我可以看到它作为一个 gui，它有我所有的数据库。但是我会从哪里调用复制命令？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:42:49.837

要将文件`COPY`放入表中`FROM`，运行 PostgreSQL 服务器的操作系统用户必须可以访问该文件，或者（更常见的是）运行您的客户端的操作系统用户可以访问该文件。在后一种情况下，您`COPY tablename FROM STDIN`和您的客户端应用程序将文件提供给服务器。要在 psql 中执行此操作，请使用 \copy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:42:58.407

大多数 postgres 都存在于`/var/lib/pgsql`. postgres[手册](http://www.postgresql.org/docs/8.3/static/storage-file-layout.html)有更多关于文件通常在哪里找到的信息，以及每个文件的作用。

# c# - 等待用户在表单上输入

> ID：10414920
> 
> 赞同：-2
> 
> 时间：2012-05-02T13:37:20.733
> 
> 标签：c#, winforms, user-input

我目前正在制定一个议程，该议程应通过单独的输入表单进行控制。

在此表单上，我需要等待用户输入才能移动下一个输入字段。

下面是用于添加任务的待办事项字段的条目。之后，它还有日期、时间和提醒字段。

```
private void btn_Say_Click(object sender, EventArgs e)
{
    string text = tbx_Say.Text;

    if(text.Contains("Add") || text.Contains("add"))
    {
       if(text.Contains("Task") || text.Contains("task"))
       {
            screen.btn_Tasks.PerformClick();
            while(screen.task.tb_TaskToDo.Text == "")
            {
                tbx_Anne.Text = "What should happen?";
                Thread.Sleep(1000);
            }
        }
    }
} 
```

执行点击会启动一个新的，需要通过输入表单填写。不管有没有 Thread.Sleep(1000)，这个表单都不会完全显示，它会等待我无法给出的用户输入......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:41:33.693

这看起来很像这样做的错误方法。我会建议

1.  创建一个弹出带有禁用的确定按钮和启用的取消按钮的表单
2.  使所有控件栏第一个禁用。
3.  在文本更改时添加一个事件，在第一个文本框上启用下一个控件（进行适当的验证）。
4.  对所有控件重复步骤 3。

不要在你的 UI 代码中引入 Thread.Sleep，这会导致表单锁定并停止响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:47:24.130

我认为您可以使用链式选择语句来执行此操作，而不是从用户那里获取输入，您可以为他们提供从下拉菜单中选择的选项，并根据所选选项，您可以在此处提供进一步的表格，例如教程[http://tutorialzine.com/ 2011/11/chained-ajax-selects-jquery/](http://tutorialzine.com/2011/11/chained-ajax-selects-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:39:18.880

同时，我已经解决了我的问题，对其进行了测试，并且可以正常工作。

```
 private void btn_Say_Click(object sender, EventArgs e)
    {
        string text = tbx_Say.Text;
        tbx_Say.Text = "";
        if (status == 0)
        {
            if (text.Contains("Add") || text.Contains("add"))
            {
                if (text.Contains("Task") || text.Contains("task"))
                {
                    screen.btn_Tasks.PerformClick();
                    tbx_Anne.Text = "What should happen?";
                    status = 1;
                }
            }
        }
        else if (status == 1) // to do
        {
            if (text != "")
            {
                screen.task.tb_TaskToDo.Text = text;
                tbx_Anne.Text = "On which date?";
                status = 2;
            }
        }
        else if (status == 2) // date
        {
            DateTime date;
            if(DateTime.TryParse(text, new CultureInfo("nl-NL"), DateTimeStyles.None, out date))
            {
                screen.task.dateTimePickerTask.Value = date;
                tbx_Anne.Text = "And what time?";
                status = 3;
            }
            else
            {
                tbx_Anne.Text = "Please nter date as dd-mm-yyyy.";
            }
        }
        else if (status == 3) // time
        {
            int h;
            int m;
            if(text.Length == 5 && Int32.TryParse(text.Substring(0,2), out h) && text[2] == ':' && Int32.TryParse(text.Substring(3), out m))
            {
                screen.task.tb_TimeTask.Text = text;
                tbx_Anne.Text = "Do you want to add reminders?";
                status = 4;
            }
            else
            {
                tbx_Anne.Text = "Please insert time as hh:mm.";
            }
        }
    } 
```

# sql - 选择序号

> ID：10414926
> 
> 赞同：0
> 
> 时间：2012-05-02T13:38:03.583
> 
> 标签：sql, sql-server

嗨，我有一个表 tab1，它有 2 列。这些值如下所示

```
SL_NO     CAL_DATE
807        2012-03-18
808        2012-03-19
....
1170       2013-03-16 
```

我需要从这个表中选择 sl_no 的范围是 807 到 1170。除此之外，我需要为 week_no_of_month 和 week_no_of_year 选择 2 个派生列。

week_no_of_month 将是第 1 周的前 7 天，第 2 周的接下来的 7 天，例如一个周期中的 4 周。然后它必须从第 1 周开始初始化，直到每 7 天达到 4 周。

week_no_of_year 将从 1 开始，每 7 天持续一次，直到达到 52。

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:04:48.943

我不确定你到底需要什么。这将回答您的问题，但我怀疑这不是应该问的问题：

```
select datediff (day, 
                 convert(varchar(4), year(CAL_DATE)) + '0101', 
                 CAL_DATE) / 7 + 1 WeekOfYear,
       (day(CAL_DATE) - 1) / 7 + 1 WeekOfMonth 
```

您可以查看Sql Server 提供的[星期编号。](http://msdn.microsoft.com/en-us/library/ms174420.aspx)

**更新**：

```
declare @startOfFiscalYear as datetime
set @startOfFiscalYear = '20120318'

select datediff (day, 
                 @startOfFiscalYear, 
                 CAL_DATE) / 7 + 1 WeekOfYear,
       ((datediff (day, @startOfFiscalYear, CAL_DATE)) / 7 % 4) + 1 WeekOfMonth 
```

WeekOfYear 只是一年中的某一天除以七。WeekOfMonth 是一年中的某一天除以七，然后再除以四，只剩下模数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:14:53.300

您是否尝试过内置的 DATE_PART 周，也许您可​​以使用它？

```
SELECT DATEPART( WEEK , 'May 2, 2012') 
```

[http://www.sqlfiddle.com/#!3/e93ae/2](http://www.sqlfiddle.com/#!3/e93ae/2)

* * *

关于 ：

> 对于我在此范围内获取的第一条记录，此处的周数应从 1 开始。这不是正常的日历周数

试试这个：

```
SELECT 

z.filter_date, x.d, 

(datediff(day,z.filter_date, x.d) / 7) + 1 as week_number

from x
cross join (select convert(date,'march 7, 2012') as filter_date) as z
where x.d >= z.filter_date 
```

数据：

```
create table x(i int identity(1,1) primary key, d date);

insert into x(d) values
('February 2, 2012'),
('February 5, 2012'),
('March 7, 2012'),
('April 8, 2012'),
('May 9, 2012'),
('June 9, 2012'); 
```

输出：

```
FILTER_DATE D               WEEK_NUMBER
2012-03-07  2012-03-07      1
2012-03-07  2012-04-08      5
2012-03-07  2012-05-09      10
2012-03-07  2012-06-09      14 
```

现场测试：[http ://www.sqlfiddle.com/#!3/e4837/12](http://www.sqlfiddle.com/#!3/e4837/12)

# android - 从片段更改活动，而不在android中创建新活动

> ID：10414933
> 
> 赞同：0
> 
> 时间：2012-05-02T13:38:24.503
> 
> 标签：android, android-activity, android-intent, fragment

我正在制作一个应用程序，顶部有一个菜单栏，这是一个片段，所以我可以定义一个菜单，并将其显示在我的所有其他活动中。问题是我通过以下方式在活动之间导航：

```
 Intent intent = new Intent("android.intent.action.LOG");
  startActivity(intent); 
```

这是一个问题，因为它会创建一个新的活动时间，并且如果它已经创建，它不会仅仅恢复它。我已经研究过这样做：

```
 Intent logpage = new Intent(MenuActivity.this, LogActivity.class);
   startActivity(logpage); 
```

据我所知，如果它已经创建，它将自动恢复活动，但是当我按下按钮时我必须知道我在哪里，而且据我所知，片段不能知道。加上这不是一个真正的活动，这使它成为一个更大的问题。
那么我该如何让它自动恢复我的活动，而不仅仅是在我浏览应用程序时不断创建新的活动呢？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:04:18.930

tabview 和自定义标签呢？你考虑过这个选项吗？将更容易管理活动

# javascript - 维护页面状态

> ID：10414941
> 
> 赞同：-4
> 
> 时间：2012-05-02T13:38:44.050
> 
> 标签：javascript, asp.net-mvc-3

我正在使用 MVC3 模式。

在包含 3 个表格的页面中，当用户选择第一行并单击编辑按钮进行编辑时，他们将被重定向到另一个页面。

当它们完成编辑并单击保存时，它们将被重定向到同一页面，并且第一行不会在第一个表中保持选中状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:44:43.793

您需要找到一种方法将该信息传递回原始页面 - 我猜在查询字符串中可能是最简单的，然后您可以从您的视图中检查它或使用 ViewModel 或 ViewBag 让您知道哪一行，如果任何，已被编辑。

但是，根据我使用 MVC3 的经验，除非有令人信服的理由来更改页面，否则使用 AJAX 完成多行页面编辑非常容易且用户友好，因此用户不必一直在视图之间切换。那将避免整个问题。

# apache - 匹配某个规则后结束 Apache 重写引擎

> ID：10414949
> 
> 赞同：0
> 
> 时间：2012-05-02T13:39:12.940
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试将所有请求路径重写为我的启动文件。像这样：

```
RewriteRule .* framework/init.php 
```

除了，在这个框架中，有一些目录可以提供文件，而无需 PHP 处理请求。但是，我不想使用这些目录的实际路径，因为我希望能够让 PHP 路由器解释这些路径。因此，我想为这些目录设置别名。例如：

```
RewriteRule ^i/com/(\w+)/(.*)$ framework/components/$1/images/$2 
```

现在的问题是，这两个重写规则都是单独工作的，但是当我尝试将它们结合起来时，事情就出错了。在别名重写发生后，它似乎重新评估了我的整个 .htaccess。以下是我尝试过的一些示例：

**在某些条件下跳过 rewrite-everything 行：**

```
rewriteRule ^i - [S=1]
RewriteRule .* framework/init.php
RewriteRule ^i/com/(\w+)/(.*)$ framework/components/$1/images/$2 
```

不工作。看起来第二行被跳过了，然后第三行重写为第二行没有被跳过的条件，所以第二行执行。

* * *

**使用独占 rewrite-everything 行：**

```
RewriteRule (?!i).* framework/init.php
RewriteRule ^i/com/(\w+)/(.*)$ framework/components/$1/images/$2 
```

相同的故事。

* * *

**在异常行之后停止重写引擎：**

```
RewriteRule ^i/com/(\w+)/(.*)$ framework/components/$1/images/$2 [L]
RewriteRule .* framework/init.php 
```

不工作。

* * *

**添加重写条件：**

```
RewriteCond %{REQUEST_URI} ^(?!i)
RewriteRule .* framework/init.php
RewriteRule ^i/com/(\w+)/(.*)$ framework/components/$1/images/$2 
```

* * *

请注意，当我删除两个 RewriteRules 之一时，上述所有示例都开始工作。我一直在寻找类似的问题，但他们都有我试图应用的解决方案。他们的问题和我的问题之间的一个区别是，我想将我的“特殊”目录重写为一个目录，当正常请求时，该目录会导致重写 init.php。谁能告诉我这是否可能，如果是的话，我错过了什么或没有得到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:17:34.530

在做[了一些研究](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)之后，我发现重写引擎确实在重写后重新评估了一条路径：

> 处理重写的请求时，可能会再次遇到 .htaccess 文件或部分，因此可能会从头开始再次运行规则集。最常见的情况是，如果其中一个规则导致重定向（内部或外部）导致请求过程重新开始。

我应该使用 [END] 标志来完全停止重写引擎。

> 替代标志 [END] 不仅可用于终止当前轮次的重写处理，还可以防止任何后续的重写处理在每个目录 (htaccess) 上下文中发生。这不适用于由外部重定向产生的新请求。

然而，这个 [END] 标志是[自 Apache 2.4 以来的新](http://httpd.apache.org/docs/current/new_features_2_4.html)标志。

> mod_rewrite 为 RewriteRule 添加了 [QSD]（查询字符串丢弃）和 [END] 标志，以简化常见的重写场景。

所以结论是：除非我有 Apache 2.4，但我没有，否则无法完成。

编辑：我将留下这个答案“未选择”，因为当有人知道“旧”的做法时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:02:05.707

我今天找到了解决方案。我在`^i`-rule 匹配时设置了一个环境变量，然后检查是否稍后设置了该环境变量。如果是，我跳过`.*`-rule。像这样：

```
RewriteRule ^i/com/(\w+)/(.*)$ framework/components/$1/images/$2 [E=REWRITE:1,L]
RewriteCond %{ENV:REDIRECT_REWRITE} !1
RewriteRule .* framework/init.php 
```

可能有点丑。但它在旧版本的 Apache 中就像一个魅力。

# ruby - 枚举器的未定义方法排序

> ID：10414955
> 
> 赞同：3
> 
> 时间：2012-05-02T13:39:29.993
> 
> 标签：ruby, sorting, methods, iterator

我使用以下代码在 ruby​​ 中实现了贪婪算法：

```
class Greedy
  def initialize(unit, total, *coins)
    @total_coins1 = 0
    @total_coins2 = 0
    @unit = unit
    @total = total
    @reset_total = total
    @currency = coins.map 
    @currency.sort!
    @currency = @currency.reverse
    unless @currency.include?(1)
      @currency.push(1)
    end
  end
  def sorter
    @currency.each do |x|
      @pos = @total / x
      @pos = @pos.floor
      @total_coins1 += @pos
      @total -= x * @pos
      puts "#{@pos}: #{x} #{@unit}"
    end
    puts "#{@total_coins1} total coins"
  end
end 
```

当我尝试运行代码时：

```
x = Greedy.new("cents", 130, 50, 25, 10, 5) 
```

我收到一个错误：

```
NoMethodError: undefined method `sort!' for #<Enumerator: [50, 25, 10, 5]:map>
    from /Users/Solomon/Desktop/Ruby/greedy.rb:9:in `initialize'
    from (irb):2:in `new'
    from (irb):2
    from /Users/Solomon/.rvm/rubies/ruby-1.9.3-p125/bin/irb:16:in `<main>' 
```

作为 Ruby 的新手，我不知道这意味着什么，也不知道如何修复它，因为这`[50, 25, 10, 5].sort!`是一个完全有效的方法......我该如何修复这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T13:41:09.430

你的问题在这里：`@currency = coins.map`

如果您在`map`没有块的情况下调用，它将返回一个`Enumerator`. 你想在这里映射什么？如果您不想对 的值做任何事情`coins`，只需分配`@currency = coins.sort.reverse`并保存自己的`sort!`和`reverse`步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:05:31.160

枚举器没有排序方法。它属于 Enumerable。没有块的 Map 方法返回一个枚举器。

在您的示例中，您已经使用 * splatten 运算符，因此硬币已经是一个数组。但是如果你坚持强制转换它，你可以使用

```
@currency  = coins.to_a
@currency = @currency.sort! 
```

或者只是缩短为：

```
@currency = coins.to_a.sort 
```

to_a 方法会将其转换为数组，相当于：

```
coins = coins.map{|x| x} 
```

# python - 使用 Python 查找音节

> ID：10414957
> 
> 赞同：2
> 
> 时间：2012-05-02T13:39:36.157
> 
> 标签：python, algorithm

> **可能重复：**
> [检测单词中的音节](https://stackoverflow.com/questions/405161/detecting-syllables-in-a-word)

为了踢球（并重温我的 Python），我正在尝试创建一个算法，该算法将随机生成俳句（日本诗歌由三行组成，每行有 5、7 和 5 个音节）。

我遇到的问题是找到一个单词中的音节数（我使用的是 Ubuntu 的 en-US.dic）。

目前，我正在运行一个脚本，试图获取该[网站报告的数字，](http://www.howmanysyllables.com/)但这很慢，并且没有产生很多点击。 [这](http://www.wordcalc.com/)似乎更有希望，但我不知道如何使用 Python 将单词注入他们的文本框中。

我的问题有两个：

*   是否有一种算法方法来确定一个单词中的音节数（因此，不需要发出数千个网络请求）？
*   我可以使用 Python 将单词注入 WordCalc 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:20:42.283

对于第二部分，如果您使用 Chrome，请右键单击“计算字数”按钮并选择“检查元素”。您会看到它与一些相关部分的`POST`形式相同：`/index.php`

```
name="text"
name="optionSyllableCount"
name="optionWordCount" 
```

（后两个是输入复选框，通常需要一个值来 POST）。

```
import urllib

url = 'http://www.wordcalc.com/index.php'
post_data = urllib.urlencode(
    {'text': 'virgina'})
post_data = '%s&optionSyllableCount&optionWordCount' % post_data

cnxn = urllib.urlopen(url, post_data)
response = cnxn.read()
cnxn.close() 
```

如果你想解析一个响应，你会得到：

```
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(response)
h3_matches = [h3 for h3 in soup.findAll('h3') if h3.text == 'Statistics']
if len(h3_matches) != 1:
  raise Exception('Wrong number of <h3>Statistics</h3>')
h3_match = h3_matches[0]
table = h3_match.findNextSibling('table')

td_matches = [td for td in table.findAll('td')
              if td.text == 'Syllable Count']
if len(td_matches) != 1:
  raise Exception('Wrong number of <td>Syllable Count</td>')
td_match = td_matches[0]

td_value = td_match.findNextSibling('td')
syllable_count = int(td_value.text) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T14:40:23.050

下载[Moby 连字符单词表](http://www.gutenberg.org/ebooks/3204)。它的大多数英文单词和名称都以音节连字符。音节的数量将是连字符标记的数量 + 空格的数量 + 实际连字符的数量 + 1。

# mysql - 无法从终端运行 mysql

> ID：10414959
> 
> 赞同：0
> 
> 时间：2012-05-02T13:39:44.487
> 
> 标签：mysql, osx-snow-leopard

我已经安装了 mysql，它与 RazorSQL 配合得很好。
但由于某种原因，我需要从终端运行它，我输入：

```
mysql -u root 
```

从终端，但它说：找不到命令。
它已启动并使用 RazorSQL，为什么它不能从终端工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T13:43:28.273

您可能需要更新`/etc/paths`以包含 MySQL 二进制文件的位置。对于 OS X Lion 上的我来说，这意味着添加`/usr/local/mysql/bin`.

# ruby-on-rails - Rails 时区优先级字段多次显示同一时区

> ID：10414960
> 
> 赞同：0
> 
> 时间：2012-05-02T13:39:51.773
> 
> 标签：ruby-on-rails, timezone, simple-form

我在 SimpleForm 中使用时区字段，

我的要求是将美国时区 + 伦敦显示在顶部作为“优先”值。

我的形式是这样的：

```
<%= p.input :time_zone, :label => "Time Zone", :priority => (ActiveSupport::TimeZone.us_zones << ActiveSupport::TimeZone['London'])%> 
```

这可行，但每次重新加载表单时都会添加另一个“伦敦”副本。（我可以明白为什么它将'London'值添加到预定义数组中，但是：我已经尝试将它添加到我的控制器中：

```
@priority_time_zones = ActiveSupport::TimeZone.us_zones
@priority_time_zones << ActiveSupport::TimeZone['London'] 
```

然后将表格更改为：

```
<%= p.input :time_zone, :label => "Time Zone", :priority => @priority_time_zones %> 
```

但这并不能解决它（奇怪），不明白为什么每次重新加载时它都会不断添加另一个“伦敦”。有什么想法吗？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:15:32.217

需要使用@priority_time_zones = ActiveSupport::TimeZone.us_zones.dup 来复制数组，否则我还在更新原始列表

# c++ - 任何想法为什么这可能会关闭该程序？

> ID：10414961
> 
> 赞同：0
> 
> 时间：2012-05-02T13:39:53.330
> 
> 标签：c++, for-loop

```
 int number;
        cout<<" Please select which item to change:"<<endl;

        for(int i=0;i<=count;i++)
        {
            cout<<i<<"   "<<v[i]->getName()<<endl;
        }

        cin>>i;
        cout<<"Current number of items:  "<<v[i]->getNumber()<<endl;
        cout<<"Enter new value: "<<endl;
        cin>>number; 
```

这是在 switch 案例中，但程序当前在 for 循环之后终止。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:43:14.390

```
for(int i=0;i<=count;i++) 
```

应该真正使用：

```
 for(int i=0;i<count;i++) 
```

如果有`count`元素。当您尝试访问时，`v[ count ]`您正试图将一个移到集合的末尾——一个经典的一对一错误——并调用 UB。

# cakephp - 在 CakePHP 中以编程方式设置模型内的字段

> ID：10414971
> 
> 赞同：0
> 
> 时间：2012-05-02T13:40:16.413
> 
> 标签：cakephp, properties, model, on-the-fly

我正在尝试在模型中动态设置一个字段，因此它会在我的任何读取操作中返回。我查看了虚拟字段，但它们并不完全正确，因为它们基本上执行 SQL 查询。

在这个例子中，我试图根据一个简单的检查返回一个值，以查看用户是否激活了他们的帐户。在我的模型中，我想运行这个函数：

```
public function status() {
    if ($this->field('password')) {
        return = 'active';
    } else if ($this->Ticket->field('id')) {
        return = 'pending';
    } else {
        return = 'inactive';
    }
} 
```

目的是通过 $user['User']['status'] 在我的视图中访问它，因此我可以根据结果应用 CSS 样式等。

但是在设置 $this['User']['status'] = status() 之间，我现在正在逃避。

此外，由于我正在以不同的方式阅读我的用户列表（有时使用分页，或者一次一个用户），这不是我想在我的控制器中设置的东西。我希望该属性在读取时简单地出现在模型中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:55:35.647

如何执行您的逻辑并将其附加到[afterFind](http://book.cakephp.org/2.0/en/models/callback-methods.html#afterfind)回调的结果中？（它的名字是在你做 a 之后触发的`find()`）像这样的东西：

```
//User model
public function afterFind($results) {

    if ($this->field('password')) {
        $results[$this->alias]['status'] = 'active';

    } else if ($this->Ticket->field('id')) {
        $results[$this->alias]['status'] = 'pending';

    } else {
        $results[$this->alias]['status'] = 'inactive';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:47:20.693

在要调用状态函数的回调中尝试此操作：

```
$this->data[$this->alias]['status'] = $this->status(); 
```

# stretch - Div 仅延伸到浏览器窗口高度，而不是页面高度

> ID：10414975
> 
> 赞同：1
> 
> 时间：2012-05-02T13:40:44.940
> 
> 标签：stretch, css

很长一段时间以来，我的网页一直存在很大问题，希望能在您的帮助下找到问题的答案。我想要一个包含我的页面内容的 div（其长度因单个页面而异）来拉伸我的页面的长度，但它只会拉伸窗口的长度。这是 HTML 和 CSS：

HTML（我只包括了非常基本的结构）：

```
<html>
<body>
<div class="container">
<div id="content">
<div id="..."></div>
<div id="..."></div>
<div id="..."></div>
<div id="..."></div>
</div>
</div>
</body>
</html>` 
```

CSS：

```
html, body {
height: 100%;
font-family: Arial;
font-size: 10px;
color: #000000;
background: #FFF url(../../images/body.png) no-repeat center 40px;
margin: 0;
position: relative;}

.container {
height: 100%;
width: 960px;
margin-right: auto;
margin-left: auto;
position: relative;}

#content  {
width: 939px;
min-height: 100%;
position: absolute;
top: 210px;
left: 6px;
box-shadow: 0px 0px 8px #666;
-moz-box-shadow: 0px 0px 8px #666;
-webkit-box-shadow: 0px 0px 8px #666;
background-color: #FFF;} 
```

我试图将内容 div 设置为溢出：自动，但这包括我不想要的内容 div 的滚动条。我错过了什么吗？我以为 min-height 会起作用，但事实并非如此！有人可能看到问题出在哪里吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:45:52.393

您的内容 div 位于`position: absolute`. 当 in 时`absolute`，元素退出页面的正常流程，这意味着它们不能相对于其父级放置或拉伸，只能相对于窗口放置或拉伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:09:05.263

尝试添加`bottom: 0;`到内容 div。这个对我有用。我的一个项目中的布局非常相似。

# objective-c - cocoa：点击事件重新加载链接怎么办？

> ID：10414976
> 
> 赞同：0
> 
> 时间：2012-05-02T13:40:55.190
> 
> 标签：objective-c, macos, cocoa

![在此处输入图像描述](../Images/1c3db31295f71ef609ebe5c1f16a724a.png) button1 按下 google 网站被打开。button2 按下 youtube 网站已打开

在从 Interface Builder 存档或 nib file.webview 加载网页后准备接收器以进行服务

```
- (void)awakeFromNib {
    NSString *urlString = @"http://www.youtube.com";
    [[webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]];
} 
```

点击事件重新加载链接怎么办？

```
- (IBAction)menuButtonPressed:(id)sender {
    NSString *urlString = @"http://www.google.com";
    [[webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]];
} 
```

# asp.net - 在 ASP.NET 转发器控件中解析 JSON 数据

> ID：10414981
> 
> 赞同：2
> 
> 时间：2012-05-02T13:41:14.707
> 
> 标签：asp.net, json, parsing, repeater

我正在构建一个小型测试原型，我正在使用中继器和实体数据源从后端 SQL 数据库中提取数据。我的一列以 JSON 格式返回数据。

问题：有没有办法在转发器（或者，就此而言，任何其他 ASP.NET 数据控件）中解析 JSON 数据？我希望有一种相对简单的方法可以做到这一点，但我发现事实并非如此。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:08:09.863

您可以解析 JSON 数据，但真正的问题是*您要*在哪里解析它；*在客户端还是在服务器上？假设要解析服务器上的数据，可以使用`ItemDataBound`事件和`JavaScriptSerializer`类：*

 *```
using System.Web.Script.Serialization;

protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    var jsonData = (string)DataBinder.Eval(e.Item.DataItem, "JsonData");

    var jss = new JavaScriptSerializer();
    var dict = jss.Deserialize<Dictionary<string,dynamic>>(jsonData);                
} 
```*

# jquery - 无法访问 .CS 文件中的隐藏值

> ID：10414983
> 
> 赞同：1
> 
> 时间：2012-05-02T13:41:26.240
> 
> 标签：jquery, asp.net-mvc-3, c#-4.0, entity-framework-4.1

我被小问题困扰

我的表单包含 3 个隐藏控件，我通过 jquery 发送值。在我保持警惕的同时，它工作正常。

我正在使用 FormCollection 并尝试在 .cs 文件中检索那些隐藏的值，但我无法检索这些值。当我在 FormCollections 上保留断点时，它会显示所有隐藏的控件名称，包括键号。

看法：

```
<tr>
    <td colspan ="2">
        @Html.Hidden("hdnddlid")
        @Html.Hidden("hdnrblMale")
        @Html.Hidden("hdnrblFeMale")
    </td>
</tr>

<script type="text/javascript">
    $(document).ready(function () {
        $("input[name='Gender']").change(function () {
            if ($("input[name='Gender']:checked").val() == '1') {
                hdnrblMale = "Male";
            }
            else if ($("input[name='Gender']:checked").val() == '0') {
                hdnrblFeMale = "FeMale";
            }
        });
    });
</script> 
```

.cs 文件中的代码

```
public static void InsertPersonalDetails(PersonalDetails modelPersonal, FormCollection frmHdnValues)
{
    try
    {
        PersonalDbContext db = new PersonalDbContext();

        string Male = frmHdnValues["hdnrblMale"].ToString();
        string Female = frmHdnValues["hdnrblFeMale"].ToString();

        db.Entry(modelPersonal).State = EntityState.Added;
        //pDetails.Add(Objpd);
        db.SaveChanges();
        // return pDetails;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:45:56.700

我是否遗漏了什么或者您的 jQuery 不需要：

```
$("input[name='hdnrblMale']").val("Male"); 
```

代替

```
hdnrblMale = "Male"; 
```

还要确保这些字段在提交的表单中。

我使用的组合

*   **Visual Studio**：断点、单步执行代码、即时窗口
*   **Chrome**：JS中的断点，JS即时窗口，检查元素
*   **fiddler2**：看到它实际上是从服务器发送和发送的（注意可能会使用 localhost. 而不是 localhost 来显示在 fiddler 中的流量 - 例如 localhost.:69230 而不是 localhost:69230）

调试这种类型的东西..这样你应该可以看到链的所有部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:19:13.667

尝试 Input type hidden 并在控制器中 write `request.form["FieldName"]`。这在我的情况下有效

# python - 在（看似）无限循环中耗尽浮点精度

> ID：10414992
> 
> 赞同：4
> 
> 时间：2012-05-02T13:41:49.370
> 
> 标签：python, floating-point, floating-accuracy, floating-point-precision

我有以下 Python 脚本：

```
x = 300000000.0
while (x < x + x):
    x = x + x
    print "exec: " + str(x)
print "terminated" + str(x) 
```

如果 x 是浮点数，这个看似无限的循环会很快终止。但是，如果我将 x 更改为 300000000，它会进入无限循环（在我的测试中运行时间超过一分钟）。

我认为这是因为它耗尽了可以在内存中表示的浮点数的精度。有人可以提供更详细的解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T13:44:51.733

*   当您初始化`x`为 时`300000000`，整个程序都会使用整数数学。
*   当您初始化`x`为时`300000000.0`，将使用浮点数学。

在 Python 中，整数可以任意增长。（更准确地说，它们受到可用内存的限制。）这意味着您的程序的整数版本需要很长时间才能终止。

最大`float`的大约是`1.8e308`. 循环的浮点版本大约需要 1000 次迭代才能超过该值，此时`x`将设置为正无穷大，程序终止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T13:45:34.350

这是因为发生了浮点溢出。在这种情况下，[根据 IEEE754](http://en.wikipedia.org/wiki/IEEE_754-2008#Exception_handling)，`x`将采用值正无穷大，根据定义，该值不小于其他任何值：

```
>>> x = float("inf")
>>> x
inf
>>> x + x
inf
>>> x < x + x
False 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T13:45:40.570

`x`每一步后加倍。有限数`x`永远不等于`2 * x`。但是，一旦超过浮点类型的最大指数，加倍`x`变为`+infinity`. 和`+infinity = 2*+infinity`。因此循环在该点终止。

# mysql - mysql中的语法错误？

> ID：10414994
> 
> 赞同：1
> 
> 时间：2012-05-02T13:41:52.050
> 
> 标签：mysql, syntax

我已经习惯了 MS sql，所以使用 mySql 肯定会向我抛出一些语法错误，这势必会减慢我的速度。我有以下内容：

```
declare @expensesSum DOUBLE
select @expensesSum = sum(expenseAmount) from bondsaverdb.expenses
insert into bondsaverdb.expenses
select '6','Extracash',(income - @expensesSum)  from bondsaverdb.income where userName ='Dean' 
```

我得到的错误说：

> 声明 @expensesSum 附近的语法错误

一定是我声明变量的方式？？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:50:21.853

MySQL 不需要（甚至显然不允许）您使用`declare`变量，据我所知，它会将所有对象（包括变量）视为字符串——因此它们不能以他的方式输入。无论如何，这应该工作：

```
SET @expensesSum = (SELECT SUM(expenseAmount) FROM bondsaverdb.expenses);
INSERT INTO
   bondsaverdb.expenses
SELECT
   '6', 'Extracash', (income - @expensesSum)
FROM
   bondsaverdb.income
WHERE
   userName = 'Dean' 
```

我也不确定那`'6'`是什么......如果这是一个自动增量 ID，你应该`INSERT`完全忽略它（并指定要写入的其他列）或保留它`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:50:56.090

MySQL 与 SQL Server 非常不同；您通常不声明变量

```
SET @expensesSum = (select @expensesSum = sum(expenseAmount) from bondsaverdb.expenses);
insert into bondsaverdb.expenses
select '6','Extracash',(income - @expensesSum)  from bondsaverdb.income where userName ='Dean'; 
```

# sql-server - 将 YYYYMM 格式的日期批量插入 MS SQL 表中的日期字段

> ID：10414995
> 
> 赞同：1
> 
> 时间：2012-05-02T13:41:53.300
> 
> 标签：sql-server, tsql, sql-server-2008-r2, bulk, date-formatting

我有一个大文本文件（超过 3 亿条记录）。有一个字段包含 YYYYMM 格式的日期。目标字段是日期类型，我使用的是 MS SQL 2008 R2 服务器。由于数据量巨大，我更喜欢使用批量插入。这是我已经完成的：

```
bulk insert Tabela_5
from 'c:\users\...\table5.csv'
with
(
    rowterminator = '\n',
    fieldterminator = ',',
    tablock
)
select * from Tabela_5 
```

`201206`in 文件原来是`2020-12-06`在服务器上，而我希望它是`2012-06-01`（我不在乎这一天）。有没有办法将这种格式的日期批量插入日期类型的字段？

亲切的问候 maciej pitucha

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T13:44:16.060

[`SET DATEFORMAT ymd`](http://msdn.microsoft.com/en-us/library/ms189491.aspx)在批量插入语句之前运行

请注意，`yyyy-mm-dd`通常在 SQL Server 中并不安全：这是导致此问题的`yyyy-dd-mm`原因**。**始终使用`yyyymmdd`. 有关更多信息，请参阅[转换和验证日期字符串](https://stackoverflow.com/q/1138142/27535)的最佳方法（评论特别突出此处的误解）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T13:46:04.863

没有办法在批量插入上执行此操作。您有 2 个选项。

1.  将日期作为 varchar 字段插入，然后运行查询以将日期转换为 DateTime 字段
2.  使用 SSIS

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T15:24:21.983

您可能不关心这一天，但 SQL 会。
YYYYMM 不是有效的 SQL 日期。
日期必须有日期部分。
在您的示例中，它将其解析为 YYMMDD。
您可以按照 Jaimal 的建议插入 VarChar，然后附加 01 并转换。

我会在 .NET 中读取数据，添加 01 并使用 DateTime.ParseExact 并逐行异步插入。您可以捕获任何不成功的解析。

或者您可以在 csv "," 中将全局替换为 "01,"。值得一试。