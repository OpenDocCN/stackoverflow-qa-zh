# StackOverflow 问答 000925000-000925999

# asp.net-mvc - MS MVC 登录小部件

> ID：925000
> 
> 赞同：2
> 
> 时间：2009-05-29T08:36:33.257
> 
> 标签：asp.net-mvc, navigation, widget

**上下文**
在*LAYOUT*中，我有 2 个输入字段和提交按钮。
如果用户身份验证成功，我想将他重定向到某个地方，如果没有 - 我希望使用一些验证文本更新页面。

**问题** 原因小部件应该位于布局中，我`t know which is current page, therefore - can`不会返回失败的身份验证（更糟糕的是 - 我对页面状态一无所知（更改的字段，复选框中的选定项目等））。

我可以在登录表单提交时保存部分请求的状态，但是 - 我如何在没有 javascript 黑客攻击的情况下成功地重定向用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T15:09:38.237

我想你会想用ajax异步提交登录。由于它不会在提交时进行完整的回发，因此如果登录失败，页面状态应该保持不变。如果身份验证成功，您可以重定向到您想要发送它们的任何地方。

# sql-server-2008 - 什么数据大小适合在 SQL Server 中存储 RFID 列？

> ID：925002
> 
> 赞同：5
> 
> 时间：2009-05-29T08:36:50.403
> 
> 标签：sql-server-2008, rfid

我是整个 RFID 领域的新手。

我需要在数据库中存储一个 RFID pr 资产。目前还没有决定哪个系统将为该特定字段（或多个字段？）提供数据，所以我现在只想留出一些空间。

Oracle 拥有整个“身份”包，除其他外，它可以处理不同版本和类型的 RFID，但我还没有看到任何用于 SQL 服务器的东西。

也许我把事情复杂化了，但是我搜索了很多，但没有发现这样一个标签有多大，或者即使它适合存储在一个字段中，或者如果你需要多个。

那么，我应该有哪些列，它们的大小应该是多少？nvarchar(10) 就足够了吗？nvarchar（20）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T08:50:18.317

RFID 标签没有固定的数据大小。事实上，它们可以存储几个字节到几千字节。它们甚至可以通过在其中存储代码来入侵未受保护的系统。因此，您应该像从其他地方一样怀疑从他们那里收到的任何数据。

至于唯一的标识符，那么如果您基于它不大于 UUID 进行分配，那么您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T08:45:44.627

AFAIK 第一代 RFID 标签通常为 128 位，其中 96 位是唯一 ID，其余的是校验和。但我强烈怀疑新一代至少有 256 位，而且还会继续增长。我绝不是专家，所以你可能想等待另一个答案:)

所以我会选择足够大小的 char 或 varchar ，以后应该很容易扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-05T21:35:10.093

RFID 标签没有固定大小，但我相信目前（2011 年 1 月）2KB 是 HF 规范中的最大大小，这包括标签运行所需的标签 ID、用户数据和制造商设置的数据。在 UHF 规范中，您有一个 EPC，而不是唯一 ID，如果标签已解锁，则阅读器可以编辑该 EPC，这与 HF 中由制造商设置和锁定的唯一 ID 不同。一天结束时，您需要阅读您使用的标签内存的数据布局。制造商将提供您需要的技术文档，解释可用的内存地址，以及您需要的最大大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T08:43:55.443

不幸的是，目前 RFID 世界的标准规定了各种有用的东西，但没有规定标签的大小（这些标准往往是特定于行业的，追踪奶牛的能力可能无法很好地映射到您的计划中）。

我的建议是分配一些东西来容纳足够的测试数据（`nvarchar(10)`应该没问题），然后在您选择实际实现时适当地调整大小，此时供应商将能够为您提供该信息。

# versant-vod - 在 VQL 中查询对象 id

> ID：925012
> 
> 赞同：1
> 
> 时间：2009-05-29T08:39:54.827
> 
> 标签：versant-vod

我目前正在使用 versant 对象数据库（使用 jvi），并且有一种情况需要根据对象 id 查询数据库。

问题是我正在使用杆位框架在数据库上运行一些性能测试，并且该框架中的一项测试要求我使用对象引用或低级对象 ID 从数据库中获取对象。因此，我不允许引用员工对象中的特定字段，但必须对整个对象执行查询。所以，不允许我去“select * from Employee e where e.id = 4”，我需要它来使用整个对象。

我想要达到的目标是

```
员工employee = new Employee("泡菜先生");
session.commit();

FundVQLQuery q = 新 FundVQLQuery(会话,
                 "select * from Employee employee where employee = $1");
q.bind(员工);
q.execute();

```

但是，这会引发 EVJ_NOT_A_VALID_KEY_TYPE 错误。有谁知道这样做的正确方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-11-30T22:38:45.460

当然你想通了（帖子是几个月前的）。您要做的是先使用GetObjectId，获取对象的VOD Id，然后查询DB；

id = session.GetObjectId(employee);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-17T09:25:43.337

这就是我完成整个往返对象 → OID → 对象的方式：

首先，您使用`TransSession.getOidAsLong`.

```
TransSession session = ...;
Employee employee = new Employee("Mr. Pickles");
long oid = TransSession.getOidAsLong(employee);
session.commit(); 
```

获得对象 ID 后，只需从`Handle`.

```
TransSession session = ...;
Employee employee = (Employee)session.returnHandleFromLong(oid).handleToObject(); 
```

不需要 VQL。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-11-25T19:21:51.347

你可以试试这个

```
FundVQLQuery vql = FundVQLQuery (session, 
   "select selfoid from Employee where name = $1"); 
vql.bind ("Mr. Pickles");
HandleEnumeration e = vql.execute (); 
while ( e.hasmoreHandles() ) {
    Handle handle = e.nexthandle(); 
} 
```

它将返回所有名为“Mr. Pickles”的员工，然后遍历它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-06-05T19:53:23.667

通常键是整数而不是字符串。您正在使用他的名字创建一个员工，也许要使用的正确标识符是他的员工 ID。我需要更多关于表格的信息才能确定。

# php - 使用json传递数组？

> ID：925013
> 
> 赞同：0
> 
> 时间：2009-05-29T08:40:03.313
> 
> 标签：php, javascript, jquery, json

我有这个 php 代码

```
 $ids = array(1,2,3);
   $names = array("cat","elephant","cow"); 
   $originalSettings = array ('ids'=>$ids,'names'=>$names);
   $jsonSettings = json_encode($originalSettings);
   echo $jsonSettings; 
```

这是jQuery代码

```
$.post("ajax.php", {},
function(data){
data.ids.each(function(i) {
alert(data.names[i]);
}
//is it possible to receive the arrays and navigate them   
}, "json"); 
```

如何使用 json 传递数组并在 javascript 中接收它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T08:49:47.880

尝试：

```
function(data) {
    $.each(data.array1, function(i) {
        alert(data.array2[i]);
    });
} 
```

# wpf - 究竟什么是“WPF 服务”？

> ID：925017
> 
> 赞同：6
> 
> 时间：2009-05-29T08:41:25.633
> 
> 标签：wpf, mvvm, service

有人在[回答 stackoverflow 问题](https://stackoverflow.com/questions/921775/when-does-it-make-sense-to-abandon-mvvm)时告诉我，MVVM 模式的“两把大枪”是 1)**附加行为**和 2)**服务**。我假设他的意思是“ **WPF services** ”，我发现它以下列方式使用：

> *PresentationFoundation.dll 定义了 WPF 控件类型、动画和多媒体支持、数据绑定支持以及其他**WPF 服务**。*
> 
> *许多这些**WPF 服务**（解耦事件、丰富的数据绑定、样式、资源等）都是软件开发最佳实践，它们融合在一个单一的、声明性的 UI 堆栈中。*
> 
> *您将了解 WPF 背后的动机，学习 XAML 的语法，检查核心编程模型，并调查几个**WPF 服务**。*

我什至没有提到“WPF 服务”这样的 WPF 书籍，所以这只是一个表示“ **WPF 特性**”的词，例如解耦事件、丰富的数据绑定、样式等，还是在“WPF ”这个词后面还有其他东西服务”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-29T16:34:41.263

[Martin Fowler 在他的Dependency Injection](http://martinfowler.com/articles/injection.html)文章中描述了服务是什么。简而言之，服务是提供其他对象使用的功能的对象。[在讨论Inversion of Control](http://martinfowler.com/bliki/InversionOfControl.html)和[Service Locator](http://www.corej2eepatterns.com/Patterns2ndEd/ServiceLocator.htm)模式时，您会发现该术语被大量使用。

为了使这个主题具体化，让我们考虑一下如何在 MVVM 模式中显示消息框。调用 MessageBox.Show() 会很糟糕，Ray。这将 ViewModel 与 UI 架构紧密联系在一起，并使 ViewModel 难以测试。相反，一种解决方案是使用服务，我们将其称为 IDisplayMessage。该服务以某种方式（通过上述两种模式之一）提供给 ViewModel，并且该服务用于“显示”消息。在正常操作期间，此服务的具体版本将调用 MessageBox.Show()，但在测试期间，我们可以提供不同的具体版本（测试替身），其行为不同（通常是 noop，或者如果我们确保 ViewModel 显示消息，一个记录调用的版本，以便我们可以断言它发生了）。 （免责声明：我是作者）仅提供这样的服务，以及向您的 ViewModel 提供此服务（和其他服务）所需的基础设施。

*更新：*自从做出这个回应后，我写了一篇博文[Services: Your ViewModel Deathstar](http://wekempf.spaces.live.com/Blog/cns!D18C3EC06EA971CF!951.entry)，它很好地涵盖了这个主题。这是“系列”帖子的一部分，读者可能还对第一篇帖子[Behavior - Your Trusty ViewModel Bazooka](http://wekempf.spaces.live.com/Blog/cns!D18C3EC06EA971CF!940.entry)感兴趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T10:46:16.273

他说的不是 WPF 服务，而是应用程序服务。也就是说，将部分功能抽象为多个 VM 可以使用的独立服务。

# cocoa - 如何以编程方式展开和折叠部分 NSSplitView？

> ID：925020
> 
> 赞同：19
> 
> 时间：2009-05-29T08:43:03.527
> 
> 标签：cocoa, expand, nssplitview

我想在我现有的项目中替换`RBSplitView`为。`NSSplitView`该应用程序现在只有 leopard，我想用 Leopard 随附`RBSplitView`的*新应用程序替换。* `NSSplitView`

但是，我缺少`RBSplitView`' 方便的方法`expand`和`collapse`. `NSSplitView`如何以编程方式展开和折叠部分 NSSplitView？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2010-04-28T09:29:37.243

只需隐藏要折叠的子视图，例如

```
[aSubViewToCollapse setHidden:YES]; 
```

您可能还想实现委托方法 -(BOOL)splitView:shouldHideDividerAtIndex: 返回 YES 以在折叠时隐藏分隔线。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-07-09T11:13:00.190

我刚刚得到了程序扩展和折叠的`NSSplitView`工作。我还配置`NSSplitView`了每当双击分隔线时展开/折叠子视图，所以我希望这个功能可以很好地使用该功能（而且看起来如此）。这就是我所做的：

（在这个例子中，`splitView`是它`NSSplitView`本身，`splitViewSubViewLeft`是我希望展开/折叠的子视图，并且`lastSplitViewSubViewLeftWidth`是一个类型的实例变量`CGFloat`。）

```
// subscribe to splitView's notification of subviews resizing
// (I do this in -(void)awakeFromNib)
[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(mainSplitViewWillResizeSubviewsHandler:)
 name:NSSplitViewWillResizeSubviewsNotification
 object:splitView
 ];

// this is the handler the above snippet refers to
- (void) mainSplitViewWillResizeSubviewsHandler:(id)object
{
    lastSplitViewSubViewLeftWidth = [splitViewSubViewLeft frame].size.width;
}

// wire this to the UI control you wish to use to toggle the
// expanded/collapsed state of splitViewSubViewLeft
- (IBAction) toggleLeftSubView:(id)sender
{
    [splitView adjustSubviews];
    if ([splitView isSubviewCollapsed:splitViewSubViewLeft])
        [splitView
         setPosition:lastSplitViewSubViewLeftWidth
         ofDividerAtIndex:0
         ];
    else
        [splitView
         setPosition:[splitView minPossiblePositionOfDividerAtIndex:0]
         ofDividerAtIndex:0
         ];
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-07-11T05:18:20.420

我尝试了上面的解决方案，发现它不起作用，因为 isSubviewCollapsed 从来没有返回 YES

建议的组合产生了有效的结果

```
if ([splitViewTop isHidden]) {
    [splitViewTop setHidden:NO];
    [split
     setPosition:previousSplitViewHeight
     ofDividerAtIndex:0];
}
else {
    [splitViewTop setHidden:YES];
}
[split adjustSubviews]; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-11T16:25:20.873

在 El Capitan，这对我有用。

```
splitViewItem.collapsed = YES; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-04T11:43:25.600

在尝试了一些建议后，这是我发现的最简单的解决方案：

```
-(void)toggleCollapsibleView:(ib)sender {
   [collapsibleView setHidden:![splitView isSubviewCollapsed:collapsibleView]];
   [splitView adjustSubviews];
} 
```

该功能是用户定义的第一响应者动作。它由菜单项（或击键）触发。collapsibleView 是 splitView 中的一个子视图，两者都在 IB 中通过它们的属性连接。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-02-06T19:28:56.693

在 macOS Sierra 中，该`collapsed`属性更改为`isCollapsed`. 直接将属性设置为`true`or `false`。以下代码来自我`WindowController`的，我有两个`SplitViewItem`s。

```
@IBAction func toggleMap(_ sender: Any) {
    if let splitViewController = contentViewController as? NSSplitViewController {
        let splitViewItem = splitViewController.splitViewItems
        if splitViewItem.first!.isCollapsed {
            splitViewItem.first!.isCollapsed = false
        } else if splitViewItem.last!.isCollapsed {
            splitViewItem.last!.isCollapsed = false
        } else {
            if splitViewItem.first!.isCollapsed {
                splitViewItem.first!.isCollapsed = false
            }
            splitViewItem.last!.isCollapsed = true
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-11-17T06:10:25.477

`NSSplitView`实际上有一个**私有方法** `-(void)_setSubview:(NSView *)view isCollapsed:(BOOL)collapsed`可以做到这一点。那些想忽略所有反对使用私有方法的警告的人，看：

```
- (void)toggleSubview:(NSView *)view {
    SEL selector = @selector(_setSubview:isCollapsed:);
    NSMethodSignature *signature = [NSSplitView instanceMethodSignatureForSelector:selector];
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
    invocation.target = self;
    invocation.selector = selector;
    [invocation setArgument:&view atIndex:2];
    BOOL arg = ![self isSubviewCollapsed:view];
    [invocation setArgument:&arg atIndex:3];
    [invocation invoke];
} 
```

我将其实现为`NSSplitView`. 唯一的问题是 Xcode 会发出关于`_setSubview:isCollapsed:`未声明的警告......我不确定如何解决这个问题。

* * *

**埃尔卡皮坦更新**

我已经有大约 2 年没有为 OS X 编写任何代码了，所以我无法验证这一点，但根据下面评论中的[lemonmojo](https://stackoverflow.com/users/1025706/lemonmojo)`_setSubview:isCollapsed:` ，在 El Capitan 中将其重命名为`_setArrangedView:isCollapsed:`.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-11T11:00:03.117

迅速这工作

```
func togglePanel() {
    let splitViewItem = self.mySplitView.arrangedSubviews

    if mySplitView.isSubviewCollapsed(outline.view){
        splitViewItem[0].hidden = false
    } else {
        splitViewItem[0].hidden = true
    } 
```

从 IBAction 调用它，outline 是一个带有自己的 xib 的 OutlineViewController，我们需要视图因此是 outline.view，保持简单但希望你明白

```
@IBAction func segmentAction(sender: NSSegmentedControl) {
    splitVC?.togglePanel(sender.selectedSegment)
} 
```

和

```
func togglePanel(segmentID: Int) {
    let splitViewItem = self.mySplitView.arrangedSubviews

    switch segmentID {

    case segmentID:
        if mySplitView.isSubviewCollapsed(splitViewItem[segmentID]) {
            splitViewItem[segmentID].hidden = false
        } else {
            splitViewItem[segmentID].hidden = true
        }
    default:
        break
    }

} 
```

并实现委托

```
func splitView(splitView: NSSplitView, shouldHideDividerAtIndex dividerIndex: Int) -> Bool {
    return true
} 
```

**在 10.11 中**，您可能只使用 toggleSidebar 操作方法。 [如何切换 NSSplitView 子视图的可见性 + 隐藏窗格拆分器分隔线？](https://stackoverflow.com/questions/9837690/how-to-toggle-visibility-of-nssplitview-subview-hide-pane-splitter-divider/46491256#46491256) [https://github.com/Dis3buted/SplitViewController](https://github.com/Dis3buted/SplitViewController)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-23T14:26:35.287

我建议`NSSplitViewController`改用并`NSSplitViewItem.isCollapsed`控制它们。这只是工作。

```
let item: NSSplitViewItem = ...
item.isCollapsed = true 
```

为了使其正常工作，您必须配置主要使用视图控制器的拆分 UI 组件。否则，它可能会被破坏。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-29T10:17:30.980

你可以试试 Brandon Walkin 的[BWToolKit](http://brandonwalkin.com/bwtoolkit/)。

BWSplitView 类有一个方法

```
- (IBAction)toggleCollapse:(id)sender; 
```

# python - 如何删除 matplotlib 中的上轴和右轴？

> ID：925024
> 
> 赞同：181
> 
> 时间：2009-05-29T08:45:12.757
> 
> 标签：python, matplotlib

而不是默认的“盒装”轴样式，我只想拥有左轴和下轴，即：

```
+------+         |
|      |         |
|      |   --->  |
|      |         |
+------+         +------- 
```

这应该很容易，但我在文档中找不到必要的选项。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2014-12-08T15:58:27.850

这是官方网站[HERE](http://matplotlib.org/examples/ticks_and_spines/spines_demo.html)建议的 Matplotlib 3 解决方案：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 2*np.pi, 100)
y = np.sin(x)

ax = plt.subplot(111)
ax.plot(x, y)

# Hide the right and top spines
ax.spines['right'].set_visible(False)
ax.spines['top'].set_visible(False)

# Only show ticks on the left and bottom spines
ax.yaxis.set_ticks_position('left')
ax.xaxis.set_ticks_position('bottom')

plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/3dwiV.png)

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2011-11-04T15:20:04.390

或者，这

```
def simpleaxis(ax):
    ax.spines['top'].set_visible(False)
    ax.spines['right'].set_visible(False)
    ax.get_xaxis().tick_bottom()
    ax.get_yaxis().tick_left() 
```

似乎在不失去旋转标签支持的情况下在轴上实现了相同的效果。

[（Matplotlib 1.0.1；受此](http://www.shocksolution.com/2011/08/removing-an-axis-or-both-axes-from-a-matplotlib-plot/)启发的解决方案）。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-05-29T09:21:20.767

[编辑] matplotlib in now (2013-10) on version 1.3.0 其中包括这个

该功能实际上是刚刚添加的，您需要 Subversion 版本。[您可以在此处](http://matplotlib.org/examples/pylab_examples/spine_placement_demo.html)查看示例代码。

我只是更新说现在网上有一个更好的[例子。](https://github.com/ericliang/matplotlib/blob/master/tags/v0_99_0/examples/axes_grid/simple_axisline3.py)虽然仍然需要 Subversion 版本，但还没有发布。

[编辑] Matplotlib 0.99.0 RC1 刚刚发布，并包含此功能。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-12-27T10:10:31.323

[（除了这里的综合答案之外，这更像是一个扩展评论。）]

* * *

请注意，我们可以相互独立地隐藏这三个元素：

*   隐藏边框（又名“脊椎”）：`ax.set_frame_on(False)`或`ax.spines['top'].set_visible(False)`

*   要隐藏刻度：`ax.tick_params(top=False)`

*   要隐藏标签：`ax.tick_params(labeltop=False)`

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-07-05T07:48:07.490

图书馆 Seaborn 有这个内置的功能`.despine()`。

只需添加：

```
import seaborn as sns 
```

现在创建您的图表。并在最后添加：

```
sns.despine() 
```

如果您查看该函数的一些默认参数值，它会删除顶部和右侧脊椎并保留底部和左侧脊椎：

```
sns.despine(top=True, right=True, left=False, bottom=False) 
```

在此处查看更多文档： [https ://seaborn.pydata.org/generated/seaborn.despine.html](https://seaborn.pydata.org/generated/seaborn.despine.html)

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2019-08-22T21:59:30.303

如果您需要从所有绘图中删除它，您可以在样式设置（样式表或 rcParams）中删除刺。例如：

```
import matplotlib as mpl

mpl.rcParams['axes.spines.right'] = False
mpl.rcParams['axes.spines.top'] = False 
```

如果要删除所有刺：

```
mpl.rcParams['axes.spines.left'] = False
mpl.rcParams['axes.spines.right'] = False
mpl.rcParams['axes.spines.top'] = False
mpl.rcParams['axes.spines.bottom'] = False 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2009-05-29T10:06:22.717

如果您不需要刻度等（例如用于绘制定性插图），您也可以使用此快速解决方法：

使轴不可见（例如使用`plt.gca().axison = False`），然后使用 手动绘制它们`plt.arrow`。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-17T06:51:05.173

以非全局方式执行此操作的另一种方法是使用[`matplotlib.pyplot.rc_context`](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.rc_context.html)上下文管理器，如下所示：

```
with plt.rc_context({
    "axes.spines.right": False,
    "axes.spines.top": False,
}):
    fig, ax = plt.subplots()
    ... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-06T13:35:15.203

如果您想经常应用此功能，您还可以按照[此处](https://matplotlib.org/stable/tutorials/introductory/customizing.html#customizing-with-style-sheets)所述创建样式表并使用以下设置：

```
axes.spines.left:   True
axes.spines.bottom: True
axes.spines.top:    False
axes.spines.right:  False 
```

# iphone - iPhone：如何检测 iTunes 是否正在播放？

> ID：925029
> 
> 赞同：7
> 
> 时间：2009-05-29T08:46:08.277
> 
> 标签：iphone, audio, itunes

我注意到一些应用程序在启动时以编程方式静音 iTunes（如果它正在运行）。这是如何实现的？我有一个带有背景音乐的游戏，并且想停止 iTunes 或至少收到一条消息，指出 iTunes 正在播放，以便我可以停止游戏的背景音乐。

谢谢，马克。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-29T15:11:24.927

**You don't need to. With Audio Session you can decide how the audio should behave.**

From the [**Audio Session Programming Guide**](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html):

> With the audio session interface, you specify aspects of your application’s audio behavior and configure it to live harmoniously within the iPhone audio environment. You start by asking yourself questions such as these:
> 
> *   Do you want your audio to be silenced by the Ring/Silent switch? The answer is probably “yes” if audio is not essential to using your application successfully. (Users will appreciate being able to run your game in a meeting with no one the wiser.)
>     
>     
> *   Do you want iPod audio to continue playing when your audio starts? This could be appropriate for a virtual piano, letting users play along to songs in their libraries. You’d want iPod audio to stop, however, for a streaming radio application.

**You probably want this:**

```
UInt32 sessionCategory = kAudioSessionCategory_SoloAmbientSound;
AudioSessionSetProperty (
    kAudioSessionProperty_AudioCategory,
    sizeof (sessionCategory),
    &sessionCategory
); 
```

**For more behaviour types, check the [Audio Session Categories](http://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html), or read the entire [Audio Session Programming Guide](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html).**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:47:56.560

我遇到了相反的问题。我的应用在启动后播放一段没有声音的短视频。这导致在后台播放的 iTunes 音乐静音。

为了保持音乐播放，我在 applicationDidFinishLaunching 中添加了这个：

```
NSError* error;
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: &error];    
    if (error) NSLog(@"Unable to configure Audio"); 
```

# c# - 使用带有 Linq to Sql 的 SqlServer 唯一标识符/更新日期列 - 最佳方法

> ID：925034
> 
> 赞同：4
> 
> 时间：2009-05-29T08:46:35.670
> 
> 标签：c#, sql-server, linq-to-sql, datetime, uniqueidentifier

对或错，我使用唯一标识符作为我的 sqlserver 数据库中表的主键。我已经使用 linq to sql (c#) 生成了一个模型，但是在列 linq to sql 的情况下，在为/的默认值`identity`插入新记录时生成唯一键。`guid``uniqueidentifier``00000000-0000-0000-0000-000000000000`

我知道我可以在我的代码中设置 guid：在 linq to sql 模型或其他地方，或者在创建 sql server 表时有默认值（尽管这被代码中生成的值覆盖）。但是最好在哪里生成这个密钥，注意我的表总是会随着我的解决方案的发展而改变，因此当它发生时我将重新生成我的 Linq to Sql 模型。

相同的解决方案是否适用于保存当前`datetime`（插入的）的列，每次更新都会更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T10:00:47.330

正如您在自己的帖子中所指出的，您可以使用可扩展性方法。添加到您的帖子中，您可以查看在数据上下文中创建的用于插入和更新每个表的部分方法。一个名为“test”的表和一个“changeDate”列的示例：

```
partial void InsertTest(Test instance)
{
    instance.idCol = System.Guid.NewGuid();
    this.ExecuteDynamicInsert(instance);
}

partial void UpdateTest(Test instance)
{
    instance.changeDate = DateTime.Now;
    this.ExecuteDynamicUpdate(instance);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-10T07:36:34.720

谢谢，我已经尝试过了，它似乎工作正常。我有另一种方法，我想我将用于 guid：sqlserver 默认值为 newid()，然后在 linqtosql 中将自动生成的值属性设置为 true。这必须在每一代模型上完成，但这相当简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T08:59:40.950

你可以做两件事：

*   要么只在 C# 客户端代码中生成 GUID 并使用该值
*   在 SQL Server 中的 GUID 列上创建默认为该列的 DEFAULT 约束`newid()`- SQL Server 将确保始终添加默认值 - 除非您自己指定一个值

至于自更新日期/时间列 - 在这里您可能必须使用客户端逻辑来执行此操作，或者如果您想在 SQL Server 上执行此操作，则必须编写一个触发器。这实际上是每次更新行时更新特定列的唯一方法 - 没有“自动更新”约束或类似的东西（默认约束仅适用于 INSERT，不适用于更新）。

像这样的东西可能会起作用：

```
CREATE TRIGGER TRG_UpdateDateTimestamp
ON (your table name)
AFTER UPDATE 
AS
    IF NOT UPDATE(DateTimeStamp)
    BEGIN
       UPDATE (yourtablename) 
       SET DateTimeStamp = GETDATE()
       WHERE EXISTS (SELECT * FROM inserted AS i 
                     WHERE i.OID = (yourtable).OID)
   END 
```

马克

# javascript - 不同浏览器中的不同 Javascript 行为

> ID：925037
> 
> 赞同：0
> 
> 时间：2009-05-29T08:46:47.293
> 
> 标签：javascript, jquery, internet-explorer, firefox, events

我正在做一个电子商务网站，但处理 Javascript 让我很头疼。

例如，对于以下页面，[http://nordschleife.metaforix.net/118/118/index.php/sony.html](http://nordschleife.metaforix.net/118/118/index.php/sony.html)

它在 Google Chrome 中按预期工作，但在 IE 或 Firefox 中不起作用。例如，单击页面下方产品（例如第十个产品）的向上或向下箭头将导致页面向上。

我已经用过 event.preventDefault(); 但它不适用于 IE 和 Firefox。JS如下：

```
<script type="text/javascript"> 
jQuery(document).ready(function($){
     $('#upImg_<?php echo $_product->getId();?>').live("click", function() {
                                var textbox = document.getElementById('qty_<?php echo $_product->getId();?>');
                                textbox.value = parseInt(textbox.value)+1;
                                event.preventDefault();
                                });
     $('#downImg_<?php echo $_product->getId();?>').live("click", function() {
                                  var textbox = document.getElementById('qty_<?php echo $_product->getId();?>');
                                  if (textbox.value>1)
                                  textbox.value = parseInt(textbox.value)-1;
                                  event.preventDefault();
                                  });
                                });
</script> 
```

在此线程中回答[PHP 使用 Javascript 生成文本框操作](https://stackoverflow.com/questions/919013/php-generated-textbox-operation-with-javascript/924623#924623)

感谢观看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T08:55:09.430

问题是href中的# - 它有一个定义的行为，你需要覆盖它，最简单的方法是在你的点击处理程序中返回false。

编辑：我*知道*这是一个骗局-[标签上的 preventDefault()](https://stackoverflow.com/questions/265478/preventdefault-on-an-a-tag)

# javascript - 检测 Javascript 中的 iFrame 嵌入

> ID：925039
> 
> 赞同：56
> 
> 时间：2009-05-29T08:47:31.020
> 
> 标签：javascript, iframe, greasemonkey

我有一个具有特定页面的应用程序——我们称之为页面 A。页面 A 有时是顶级页面，但有时也作为 iframe 嵌入到页面 B 中。所有页面都来自同一服务器，并且没有跨域问题。

我有一个在页面 A 上运行的greasemonkey 脚本。greasemonkey 脚本如何检测页面A 是否在iframe 上下文中？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2009-05-29T09:04:59.643

如果页面 A 本身有框架，则查看框架长度通常会崩溃（我知道对于这个特定实例可能不是这种情况）。更可靠和有意义的测试是：

```
if (window!=window.top) { /* I'm in a frame! */ } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-29T08:51:32.823

谓词

```
(window.parent.frames.length > 0) 
```

会告诉你你想要什么。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-08-22T15:54:55.057

```
if (top === self) { not in a frame } else { in a frame } 
```

从[如何识别网页是在 iframe 中加载还是直接加载到浏览器窗口中？](https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-th)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-05T14:38:18.013

如上所述，公认的解决方案在 IE8 中不起作用。此外，检查`window.parent.frames.length`可能会导致跨域异常。

相反，我能够做到这一点`var isInIFrame = top.location != self.location`- 它在 IE8 中有效，只要您不尝试读取`top.location`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:06:43.010

使用`window.frameElement`并检查它是否不为空以及它的 nodeName 是否为“IFRAME”。

# c# - 如何更正错误“从创建它的线程以外的线程访问”？

> ID：925044
> 
> 赞同：7
> 
> 时间：2009-05-29T08:48:59.613
> 
> 标签：c#, .net, multithreading

下面的代码给了我下面的错误。我想我需要 "InvokeRequired" 。但我不明白我该如何使用？

> 跨线程操作无效：控件“listBox1”从创建它的线程以外的线程访问。

编码：

```
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        protected static DataSet dataset = null;
        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            SimulationFrameWork.MCSDirector run = new SimulationFrameWork.MCSDirector();
            DataSet ds = run.Get();

            if (ds.Tables[0].Rows.Count > 0)
            {
                for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
                {
                    if (ds.Tables[0].Rows[i]["result"].ToString() == "0")
                    {
                       dataset = run.Get(int.Parse(ds.Tables[0].Rows[i]["ID"].ToString()));
                       WorkerObject worker = 
                         new WorkerObject(
                           int.Parse(dataset.Tables[0].Rows[i]["ID"].ToString()),
                           int.Parse(dataset.Tables[0].Rows[i]["Iteration"].ToString()),
                           listBox1, timer1);
                       Thread thread1 = new Thread(new ThreadStart(worker.start));
                       thread1.Start();
                    }
                }
            }
        }
    }

    public class WorkerObject
    {
        private int id;
        private int nmax;
        private ListBox list1;
        private System.Windows.Forms.Timer timer1;

        public WorkerObject(int _id, int _nmax, ListBox _list1, 
                            System.Windows.Forms.Timer _timer1)
        {
            id = _id;
            nmax = _nmax;
            list1 = _list1;
            timer1 = _timer1;
        }
        public void start()
        {
            timer1.Stop();
            int i, idaire, j;
            double pi = 0.0, x, y;

            Random rnd = new Random();
            for (i = 0; i < 100; i++)
            {
                idaire = 0;
                for (j = 0; j < nmax; j++)
                {
                    x = rnd.Next(1, 10000) / (double)10000;
                    y = rnd.Next(1, 10000) / (double)10000;
                    if (Math.Pow(x, 2) + Math.Pow(y, 2) <= 1.0)
                        idaire += 1;
                }
                pi = 4 * (double)idaire / (double)nmax;
                nmax *= 10;

                list1.Items.Add(
                  "Iterasyon:" + 
                  nmax.ToString() + 
                  " ----->" + 
                  pi.ToString() + 
                  "\n");
                System.Threading.Thread.Sleep(100);
            }
            SimulationFrameWork.MCSDirector run = new SimulationFrameWork.MCSDirector();
            run.Update(id, pi);
            list1.Items.Add("\n\n islem bitti...");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-29T08:55:41.037

这应该让你绕过它

```
private delegate void stringDelegate(string s);
private void AddItem(string s)
{
    if (list1.InvokeRequired)
    {
        stringDelegate sd = new stringDelegate(AddItem);
        this.Invoke(sd, new object[] { s });
    }
    else
    {
        list1.Items.Add(s);
    }
} 
```

只需调用 AddItem ，如果需要，这将使用委托调用添加，否则它将直接将项目添加到框中。

OneSHOT

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-29T08:57:42.950

只需封装将文本添加到列表框到另一个方法：

```
private void timer1_Tick(object sender, EventArgs e)
{
   // ...
   AddTextToListBox("\n\n işlem bitti...");
}

private void AddTextToListBox(string text)
{
   if(list1.InvokeRequired)
   {
      list1.Invoke(new MethodInvoker(AddTextToListBox), new object[] { text }); 
      return;
   }

   list1.Items.Add(text);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T19:31:19.130

也可以使用 lambda 表示法。所以，而不是：

```
formControl.Field = newValue; //Causes error 
```

尝试：

```
Invoke(new Action(() =>
{
    formControl.Field = newValue; //No error
})); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2010-10-19T02:22:03.973

在启动线程之前添加此代码：

```
//kolay gelsin kardeş )
CheckForIllegalCrossThreadCalls = false;
thread1.Start(); 
```

# ruby-on-rails - 将 Rails 应用程序部署到多个位置

> ID：925054
> 
> 赞同：0
> 
> 时间：2009-05-29T08:52:12.477
> 
> 标签：ruby-on-rails, deployment, release-management

我正在尝试将相同的 rails 应用程序部署到具有不同应用程序名称、不同徽标、不同样式表等的两个不同位置。

我的代码基于我存储在环境/production.rb 中的 APP_NAME 和 HOST_NAME 变量工作。现在我需要实际部署它，我需要一个比在生产机器上手动编辑环境文件更好的解决方案。

我能看到的唯一方法是创建一个新的生产环境 - 例如 production_app2 - 并在其中以不同的方式定义 APP_NAME 和 HOST_NAME。有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T16:26:11.463

不不不！不要编辑环境文件。我的意思是，根据需要编辑它们，以便*为每个部署都*配置相同的内容，但不适用于应该*在部署之间配置*的内容。

为此，请使用配置。

`config`抛出一个看起来像这样的 YAML 文件：

```
development:
  :app_name: App 1
  :host_name: something.com

test:
  :app_name: App 1
  :host_name: something.com

production:
  :app_name: App 1
  :host_name: something.com 
```

称它为任何有意义的东西。比方说`settings.yml`。

现在使用如下所示的初始化程序加载它`config/initializers/settings.rb`：

```
SETTINGS = YAML.load_file("#{RAILS_ROOT}/config/settings.yml")[RAILS_ENV] 
```

现在像这样访问您的配置：

```
SETTINGS[:app_name] 
```

（如果您根本不想更改现有代码，请在里面`config/initializers/settings.rb`添加设置现有名称的行，例如`APP_NAME = SETTINGS[:app_name]`等）

请注意，这是设置配置的一种可能实现，但即使采用另一种方法，它也应该基于独立于部署的配置。这可以比使用环境文件更容易和可维护地设置为在部署和升级之间持续存在。

再次回顾一下：

*   环境文件用于在所有部署中都相同的配置
*   配置文件用于可以在部署之间更改的配置

**更新**

对于基于 Capistrano 的部署，这是我用来符号链接目录中新`current`的多个配置文件的`shared`方法（我认为它最初来自 EngineYard 的 Ezra 配方）：

```
after "deploy:update_code","deploy:symlink_configs"

namespace(:deploy) do  
  task :symlink_configs, :roles => :app, :except => {:no_symlink => true} do
    configs = %w{ database settings }
    configs.map! { |file| "ln -nfs #{shared_path}/config/#{file}.yml #{release_path}/config/#{file}.yml" }
    run <<-CMD
      cd #{release_path} && #{configs.join(' && ')}
    CMD
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T09:01:16.937

我认为这是一个非常好的方法。

我们在哪里定义不同的环境（例如，'staging'、'production'、'production_backup' - 给我们一个`staging.rb`, `production.rb`，`production_backup.rb`您可以在其中定义您的特定`APP_NAMEs`和`HOST_NAMEs`）并且可以使用 Capistrano 部署到每个环境。它工作得很好。

这是一个很好的链接：[http ://www.egtheblog.com/?p=8](http://www.egtheblog.com/?p=8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T09:02:08.090

因为您实际上是部署到两个不同的环境，所以最好创建两个不同的环境文件，每个文件都有自己的设置。确保为环境文件选择描述性名称，而不仅仅是`production2`.

您也可以将此信息存储在数据库中，但我不知道您是否愿意接受这样的依赖。我想只有在部署数量太大而无法使用几个环境文件轻松管理的情况下，使用数据库才有意义。

# python - 一个可以忽略目录的 Python walker

> ID：925056
> 
> 赞同：8
> 
> 时间：2009-05-29T08:52:46.500
> 
> 标签：python, directory-walk

我需要一个文件系统walker，我可以指示它忽略遍历我想保持不变的目录，包括该分支下的所有子目录。os.walk 和 os.path.walk 就是不这样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-29T10:06:40.267

实际上，`os.walk`可以完全按照您的意愿行事。假设我有一个目录列表（可能是一组）要在`ignore`. 那么这应该工作：

```
def my_walk(top_dir, ignore):
    for dirpath, dirnames, filenames in os.walk(top_dir):
        dirnames[:] = [ 
            dn for dn in dirnames 
            if os.path.join(dirpath, dn) not in ignore ]
        yield dirpath, dirnames, filenames 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-29T10:05:38.040

[`os.walk`](http://docs.python.org/library/os.html#module-os)可以就地修改返回值的第二个元素：

> [...] 调用者可以就地修改 dirnames 列表（可能使用 del 或 slice 赋值），并且 walk() 只会递归到名称保留在 dirnames 中的子目录；这可用于修剪搜索 [...]

```
def fwalk(root, predicate):
    for dirpath, dirnames, filenames in os.walk(root):
        dirnames[:] = [d for d in dirnames if predicate(r, d)]
        yield dirpath, dirnames, filenames 
```

现在，您只需提交子目录的谓词：

```
>>> ignore_list = [...]
>>> list(fwalk("some/root", lambda r, d: d not in ignore_list)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-01-11T23:55:17.263

这是最好和简单的解决方案。

```
def walk(ignores):
    global ignore
    path = os.getcwd()
    for root, dirs, files in os.walk(path):
        for ignore in ignores:
            if(ignore in dirs):
                dirs.remove(ignore)
        print root
        print dirs
        print files
walk(['.git', '.svn']) 
```

请记住，如果您从 dirs 中删除文件夹名称，os.walk 将不会对其进行探索。

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T08:59:52.400

所以我做了这个 home-roles walker 函数：

```
import os
from os.path import join, isdir, islink, isfile

def mywalk(top, topdown=True, onerror=None, ignore_list=('.ignore',)):
    try:
        # Note that listdir and error are globals in this module due
        # to earlier import-*.
        names = os.listdir(top)
    except Exception, err:
        if onerror is not None:
            onerror(err)
        return
    if len([1 for x in names if x in ignore_list]):
        return 
    dirs, nondirs = [], []
    for name in names:
        if isdir(join(top, name)):
            dirs.append(name)
        else:
            nondirs.append(name)

    if topdown:
        yield top, dirs, nondirs
    for name in dirs:
        path = join(top, name)
        if not islink(path): 
            for x in mywalk(path, topdown, onerror, ignore_list):
                yield x
    if not topdown:
        yield top, dirs, nondirs 
```

# c# - 在 ClientScript.RegisterClientScriptBlock 之后显示/隐藏 div CollapsePanel

> ID：925060
> 
> 赞同：0
> 
> 时间：2009-05-29T08:53:46.703
> 
> 标签：c#, asp.net, html

这个问题是[Showing/Hiding div](https://stackoverflow.com/questions/920384/showing-hiding-div)的扩展。

如前所述，我找到了一种解决方法来防止折叠面板在加载时闪烁。

我的解决方案是这样的：

在标题中：

```
 function showDivs() { 

                divMenuContent.style.visibility = 'visible';
                divMenuContent.style.display='block';

     }

</script> 
```

隐藏在 div 中的面板为：

```
<div id="divMenuContent" style="visibility:hidden; display:none;">
   <asp:Panel ID="pnlAddNewContent" runat="server" CssClass="collapsePanel" Width="500px">
   </asp:Panel>
</div> 
```

身体负荷是 onLoad="javascript:showDivs();"

问题是，它可以在空白页上完美运行。但我想当我做一个

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "", sb.ToString()); 
```

它不起作用 - 因为在面板中没有折叠/显示。上面的代码确实有效。

您是否相信 clientScipt 与我的 javascript 冲突以显示 div？我在浏览器中没有收到任何 Javascript 运行错误。

更多信息：如果不是回发，则调用 clientScript。我还尝试通过在其末尾添加以下代码来从客户端脚本调用 javascript：

```
sb.Append("\n}\nshowDivs();</script>\n"); 
```

但是这次我收到以下错误：

> divMenuConent 未定义。

任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-22T10:49:17.370

如果我没记错的话，RegisterClientScriptBlock 会将其 JS 注入头部。可能是它在您的代码上方注入它。现在这可能意味着几件事，具体取决于注入的代码在做什么。

*   它是否立即引用任何元素（请记住，这是在头部，因此您将无法弄乱 DOM，因为它已经加载了它，所有这些东西都需要在 onload 之后）
*   它是否引用了您可能只在其下方声明的 divMenuContent
*   它是否会引发错误，从而阻止其余的 inpage JS 运行。

在 Firefox 中使用 firebug 仔细检查您没有收到任何有趣的 JS 错误，并查看源代码并仔细检查您是否没有尝试引用任何内容。

此外，我建议您考虑使用其中一个 JS 框架来允许您连接多个 onload 事件，这样您就不会冒覆盖任何先前附加事件的风险。这允许您在页面加载时运行多个功能（或者甚至更好，也就是在 DOM 加载时更快）。我建议 MooTools 在这种情况下你可以做这样的事情

```
// You can add as many of these as you like and they will all run :)
window.addEvent( "domready", function() {
  // Code to run goes here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-22T10:54:17.250

你可以使用`RegisterStartupScript`这种需求。

# c# - C# 泛型类和使用 WCF 进行强制转换

> ID：925063
> 
> 赞同：1
> 
> 时间：2009-05-29T08:54:37.573
> 
> 标签：c#, wcf, generics, casting

我想编写一个泛型类，应该使用不同的泛型参数将其转换为自身。

```
class Base {}
class Inherited : Base {}

class MyGeneric<T> {}

// WCF Service interface
void Foo(MyGeneric<Base> b);

// somewhere else
MyGeneric<Inherited> inherited;
Foo(inherited) 
```

我知道这可以在 C# 4.0 中完成，但现在这无济于事。

*   我可以为每个`MyGeneric<T>`星座编写一个专门的类，然后编写一个隐式类型转换器或实现某个接口。但我想避免这种情况。
*   我可以有一个没有泛型的接口，但在这种情况下，泛型的整体意义是在方法 Foo 上获得编译时类型安全。所以这不是一个选择。
*   因为 Foo 是一个操作契约，它本身不能是通用的。

任何想法如何在 C# 3.0 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T08:56:38.427

你要：

```
void Foo<T>(MyGeneric<T> b) where T : Base {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T09:52:27.927

我写了这个铸造方法

```
public MyGeneric<TTarget> Cast<TTarget, TSource>()
  where TTarget : class
  where TSource : TTarget, T
{
  return new MyGeneric<TTarget>();
} 
```

可以这样称呼

```
MyGeneric<Inherited> inherited;
Foo(inherited.Cast<Base, Inherited>()); 
```

丑陋的事情是必须提供它已经是的类。可能有一些改进的可能。

顺便说一句，我无法将其设为扩展方法，以避免使用第二个泛型参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T13:35:01.003

> 在这种情况下，泛型的整体意义是在方法 Foo 上获得编译时类型安全

以这种方式强制转换的目的（对于不在实例祖先中的类型）是为了破坏类型安全。不要破坏类型安全以保存类型安全。

# linq - Linq To SQL：建模关联

> ID：925065
> 
> 赞同：0
> 
> 时间：2009-05-29T08:55:10.303
> 
> 标签：linq, linq-to-sql, poco, data-mapping

我有三个表项目、用户和项目成员。ProjectMembers 表是一个映射表，只有两列 ProjectId 和 UserId。

在我的对象模型中，我有两个类 Project 和 User。Project 类有一个属性`IEnumerable<User> Members`

我正在使用外部 xml 映射文件将 linq 映射到 sql 关联。我能够获取项目和用户数据，但我不知道如何映射成员关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-30T06:32:41.957

这听起来像是多对多映射（项目 <-> 用户）。

在这种情况下，您将在使用 Linq To SQL 时遇到问题。长话短说，它并不真正支持这种映射。您可以在 google 上找到几种解决方法，其中之一是更改部分类以分别提供对 Project 和 User 类上的 Members/Projects 集合的访问。

例如[http://www.iaingalloway.com/2015/06/many-to-many-relationships-in-linq-to-sql.html](http://www.iaingalloway.com/2015/06/many-to-many-relationships-in-linq-to-sql.html)

# c# - 将数据从 SQL Server 传输到 MySQL

> ID：925066
> 
> 赞同：0
> 
> 时间：2009-05-29T08:55:21.753
> 
> 标签：c#, mysql, load-data-infile

我需要将大约 200 万条记录从 SQL Server 2008 Express 中的 4 个表传输到 MySQL。

[在 C# 中，我可以使用Table-Valued 参数](http://msdn.microsoft.com/en-us/library/bb675163.aspx)在事务中非常快速地插入这些记录。（大约 50 秒）。

如何在 C# 中为 MySQL 做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T09:11:33.873

阅读[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.1/en/insert-speed.html)中的解释。您可以做的最好的事情是`LOAD DATA INFILE`在之前禁用索引并在之后重新创建（并因此批量计算它们）时使用。如果这不适合您，还有更有趣的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T09:00:57.967

您是否被锁定在使用 C# 进行迁移？如果您不是并且只想传输数据，您可以使用[MySQL 迁移工具包](http://dev.mysql.com/doc/migration-toolkit/en/index.html)为您进行传输。

# python - 范围，使用当前模块中的函数

> ID：925075
> 
> 赞同：1
> 
> 时间：2009-05-29T08:58:04.807
> 
> 标签：python, function, scope, module, structure

我知道这一定是一个微不足道的问题，但是我尝试了许多不同的方法，并且稍微搜索了一下解决方案，但是如何在当前模块中创建和引用子函数？

例如，我正在编写一个程序来解析一个文本文件，我想为其中的 300 个不同名称中的每一个分配一个类别。

其中有 300 个，我有一个列表来创建一个 dict，所以形式为 lookup[key]=value （奖金问题；有比大量 dict 更有效或更明智的方法吗？）。

我想将所有这些保留在同一个模块中，但在文件末尾使用函数（dict初始化等），所以我不必向下滚动 300 行来查看代码，即布局如下面的例子。

当我按如下方式运行它时，我收到错误“未定义 initlookups”。当我的结构是初始化时，然后是函数定义，然后是函数使用，没问题。

我确信必须有一种明显的方法来初始化函数和相关的 dict 而不保持代码内联，但是到目前为止已经尝试了很多都没有成功。我可以把它放在一个外部模块中并导入它，但为了简单起见，我不想这样做。

在模块结构方面我应该做什么？有没有比使用 dict 存储这个查找表更好的方法（它是 300 个唯一的文本键映射到大约 10 个类别？

谢谢，

布伦丹

* * *

```
import ..... (initialisation code,etc )

initLookups()          # **Should create the dict - How should this be referenced?**
print getlookup(KEY)   # **How should this be referenced?**

def initLookups():
    global lookup
    lookup={}
    lookup["A"]="AA"
    lookup["B"]="BB"
    (etc etc etc....)

def getlookup(value)
    if name in lookup.keys():
        getlookup=lookup[name]
    else:
        getlookup=""

    return getlookup 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T09:04:40.753

一个函数需要在被调用之前被定义。如果你想让需要在文件顶部执行的代码，只需定义一个`main`函数并从底部调用它：

```
import sys

def main(args):
    pass

# All your other function definitions here

if __name__ == '__main__':
    exit(main(sys.argv[1:])) 
```

这样，您引用的任何内容都`main`将被解析，因此已经为人所知。测试的原因[`__name__`](http://docs.python.org/3.0/library/__main__.html)是这样的`main`方法只会在脚本直接执行时运行，而不是在被另一个文件导入时运行。

* * *

旁注：`dict`具有 300 个键的 a 绝不是庞大的，但您可能希望将填充的代码移动`dict`到单独的模块，或者（也许更花哨）以[JSON](http://docs.python.org/3.0/library/json.html)之类的格式存储键/值对并加载它当程序启动时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T10:34:29.417

这是一个更pythonic的方法来做到这一点。顺便说一句，没有太多选择。

*必须*先定义函数，然后才能*使用*它。时期。

但是，您不必为了编译器的利益而对所有函数进行严格排序。您只需要将函数的执行放在最后。

```
import # (initialisation code,etc )

def initLookups(): # Definitions must come before actual use
    lookup={}
    lookup["A"]="AA"
    lookup["B"]="BB"
    (etc etc etc....)
    return lookup

# Any functions initLookups uses, can be define here.
# As long as they're findable in the same module.

if __name__ == "__main__": # Use comes last
    lookup= initLookups() 
    print lookup.get("Key","") 
```

请注意，您不需要该`getlookup`函数，它是 dict 的内置功能，名为[get](http://docs.python.org/library/stdtypes.html#dict.get)。

此外，“初始化代码”是可疑的。导入不应该“做”任何事情。它应该定义函数和类，但实际上并不提供任何可执行代码。从长远来看，由导入处理的可执行代码可能会成为维护的噩梦。

最值得注意的例外是默认创建的模块级 Singleton 对象。即便如此，请确保使模块工作的神秘对象在文档中明确标识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T10:32:39.373

如果您的查找字典不变，最简单的方法是将其设为模块范围变量。IE：

```
lookup = {
    'A' : 'AA',
    'B' : 'BB',
    ...
} 
```

如果您可能需要进行更改，然后重新初始化它，您可以在初始化函数中执行此操作：

```
def initLookups():
    global lookup
    lookup = {
        'A' : 'AA',
        'B' : 'BB',
        ...
    } 
```

（或者，lookup.update({'A':'AA', ...}) 就地更改字典，影响所有可以访问旧绑定的调用者。）

但是，如果您以某种标准格式获得这些查找，则只需从文件中加载它并从中创建字典可能会更简单。

您可以根据需要安排功能。关于排序的唯一规则是访问的变量必须在**调用**函数时存在- 如果函数引用了主体中尚不存在的变量，这很好，只要没有实际尝试使用该函数。IE：

```
def foo():
    print greeting, "World"  # Note that greeting is not yet defined when foo() is created

greeting = "Hello"

foo() # Prints "Hello World" 
```

但：

```
def foo():
    print greeting, "World"

foo()              # Gives an error - greeting not yet defined.
greeting = "Hello" 
```

还要注意的另一件事：您的 getlookup 功能非常低效。使用“ `if name in lookup.keys()`”实际上是从字典中获取键的**列表**，然后遍历该列表以查找项目。这失去了 dict 提供的所有性能优势。相反，“ `if name in lookup`”会避免这种情况，甚至更好的是，`.get`如果键不在字典中，则可以使用默认返回的事实：

```
def getlookup(name)
    return lookup.get(name, "") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T23:43:14.163

我认为将名称保存在平面文本文件中并在运行时加载它们将是一个不错的选择。我尝试将我的数据尽可能保持在最低级别的复杂性，从纯文本开始，一直到 RDMS（我从[The Pragmatic Programmer](http://www.pragprog.com/the-pragmatic-programmer)中提出了这个想法）。

字典在 python 中非常有效。它本质上是整个语言的基础。300 个项目完全在理智的 dict 使用范围内。

名称.txt：

```
A = AAA
B = BBB
C = CCC 
```

获取名称.py：

```
import sys

FILENAME = "names.txt"

def main(key):
    pairs = (line.split("=") for line in open(FILENAME))
    names = dict((x.strip(), y.strip()) for x,y in pairs)
    return names.get(key, "Not found")

if __name__ == "__main__":
    print main(sys.argv[-1]) 
```

如果出于某种原因你真的想把它全部放在一个模块中，你可以在模块的顶部粘贴一个字符串。我认为一大段文本比一大堆 dict 初始化代码更容易分散注意力（以后更容易编辑）：

```
import sys

LINES = """
A = AAA
B = BBB
C = CCC
D = DDD
E = EEE""".strip().splitlines()

PAIRS = (line.split("=") for line in LINES)
NAMES = dict((x.strip(), y.strip()) for x,y in PAIRS)

def main(key):
    return NAMES.get(key, "Not found")

if __name__ == "__main__":
    print main(sys.argv[-1]) 
```

# ajax - gwt 中的会话管理

> ID：925078
> 
> 赞同：10
> 
> 时间：2009-05-29T08:59:35.940
> 
> 标签：ajax, session, gwt, rpc

我正在为我的客户端应用程序使用 GWT。但是，我不确定如何处理会话管理。GWT 应用程序驻留在一个页面上，所有服务器调用都通过 AJAX 完成。如果服务器上的会话过期。假设用户没有关闭浏览器，并使用 RPC 向服务器发送一些请求，我的服务器如何通知应用程序会话已过期并且客户端部分应该再次显示登录屏幕？我的示例代码：

```
ContactDataServiceAsync contactDataService = GWT
                .create(ContactDataService.class);
        ((ServiceDefTarget) contactDataService).setServiceEntryPoint(GWT
                .getModuleBaseURL()
                + "contactDatas");

        contactDataService.getContact(2,
                new AsyncCallback<ContactData>() {
                    public void onFailure(Throwable caught) {
                                      //code to show error if problem in connection or redirect  to login page

                    }

                    public void onSuccess(ContactData result) {
                        displayContact(result);
                    }
                }); 
```

如果会话过期，它只需要显示登录屏幕，否则它想使用 Window.alert() 显示一些错误。

如何做到这一点以及服务器端和客户端所需的所有代码是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T09:04:57.693

如果用户已注销，您可以让服务器向客户端抛出 AuthenticationException。
这将在回调 onFailure 方法中捕获，然后可以将用户重定向到登录页面。

编辑：
AuthenticationException 当然不是标准异常，我只是举个例子。最好坚持标准例外。

要尝试捕获特定异常，可以使用 instanceof 运算符

```
 public void onFailure(Throwable e) {
                  if(e instanceof AuthenticationException) {
                        redirecttoLogin();
                  }
                  else {
                    showError(),
               }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-11T04:33:15.047

这并不直接适用于那些使用 RPC 的人，但对于那些不使用 RPC 的人，你应该从服务器发送一个 HTTP 401。然后您可以在 RequestBuilder 回调中检查该状态代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:19:53.757

**客户端：**所有回调都扩展了一个抽象回调，您可以在其中实现 onFailur()

```
public abstract class AbstrCallback<T> implements AsyncCallback<T> {

  @Override
  public void onFailure(Throwable caught) {
    //SessionData Expired Redirect
    if (caught.getMessage().equals("500 " + YourConfig.ERROR_MESSAGE_NOT_LOGGED_IN)) {
      Window.Location.assign(ConfigStatic.LOGIN_PAGE);
    }
    // else{}: Other Error, if you want you could log it on the client
  }
} 
```

**服务器：**您所有的 ServiceImplementations 都扩展了 AbstractServicesImpl，您可以在其中访问 SessionData。覆盖 onBeforeRequestDeserialized(String serializedRequest) 并检查那里的 SessionData。如果 SessionData 已过期，则向客户端写入一条特定的错误消息。此错误消息在您的 AbstrCallback 中得到检查并重定向到登录页面。

```
public abstract class AbstractServicesImpl extends RemoteServiceServlet {

  protected ServerSessionData sessionData;

  @Override
  protected void onBeforeRequestDeserialized(String serializedRequest) {

    sessionData = getYourSessionDataHere()

    if (this.sessionData == null){ 
      // Write error to the client, just copy paste
      this.getThreadLocalResponse().reset();
      ServletContext servletContext = this.getServletContext();
      HttpServletResponse response = this.getThreadLocalResponse();
      try {
        response.setContentType("text/plain");
        response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
        try {
          response.getOutputStream().write(
            ConfigStatic.ERROR_MESSAGE_NOT_LOGGED_IN.getBytes("UTF-8"));
          response.flushBuffer();
        } catch (IllegalStateException e) {
          // Handle the (unexpected) case where getWriter() was previously used
          response.getWriter().write(YourConfig.ERROR_MESSAGE_NOT_LOGGED_IN);
          response.flushBuffer();
        }
      } catch (IOException ex) {
        servletContext.log(
          "respondWithUnexpectedFailure failed while sending the previous failure to the client",
          ex);
      }
      //Throw Exception to stop the execution of the Servlet
      throw new NullPointerException();
    }
  }

} 
```

此外，您还可以重写 doUnexpectedFailure(Throwable t) 以避免记录抛出的 NullPointerException。

```
@Override
protected void doUnexpectedFailure(Throwable t) {
  if (this.sessionData != null) {
    super.doUnexpectedFailure(t);
  }
} 
```

# c++ - boost中的POD低维向量

> ID：925084
> 
> 赞同：2
> 
> 时间：2009-05-29T09:00:58.857
> 
> 标签：c++, boost, vector, math

我正在寻找具有所有必要算术精度（运算符 +、- 等等）的 POD 低维向量（比如说 2,3 和 4D）。POD 低维矩阵也很棒。

boost::ublas 向量不是 POD，在某处有一个指针间接（向量是可调整大小的）。

我可以在 boost 中的任何地方找到它吗？使用 boost::array 和 boost.operator lib 是一个选项，但也许我在其他地方遗漏了一些更容易的东西？

除了提升，有人知道周围有什么好的图书馆吗？

PS：POD <=> 普通旧数据

**编辑：**

否则，这里是我从另一个线程收集的一些其他链接：

*   [http://www.cgal.org/](http://www.cgal.org/)
*   [http://geometrylibrary.geodan.nl](http://geometrylibrary.geodan.nl)
*   [http://www.cmldev.net](http://www.cmldev.net)
*   [http://www.openexr.com/index.html](http://www.openexr.com/index.html)
*   [http://project-mathlibs.web.cern.ch/project-mathlibs/sw/html/SMatrix.html](http://project-mathlibs.web.cern.ch/project-mathlibs/sw/html/SMatrix.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T09:11:20.193

[blitz++](http://www.oonumerics.org/blitz/examples/Blitz++/transform.html) TinyMatrix / TinyVector 就是我想的你想要的，

你也有[libeigen](http://eigen.tuxfamily.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T09:23:10.870

在预言 SDK 中有一个不错的 3d 图形矢量库：

查看[http://www.twilight3d.com/downloads.html](http://www.twilight3d.com/downloads.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T14:44:10.707

你看过 STL 的***valarray***容器吗？

查看相关 SO 问题的答案： [https ://stackoverflow.com/questions/152745/optimising-c-2-d-arrays](https://stackoverflow.com/questions/152745/optimising-c-2-d-arrays/152761#152761)

# security - 使用 /dev/urandom 生成的秘密令牌是保护守护进程的好方法吗？

> ID：925086
> 
> 赞同：4
> 
> 时间：2009-05-29T09:01:39.137
> 
> 标签：security, unix, posix

我有一个生成子进程的守护进程。有时这些子进程需要与守护进程进行通信。我想确保只有这些子进程被授权与守护进程通信。

我想按如下方式实现：

*   在启动期间，守护进程通过读取 /dev/urandom 生成一个随机的 128 字节秘密令牌。/dev/random 不好，因为它可能会在任意时间内阻塞阅读器。
*   守护进程侦听 Unix 域套接字。
*   守护程序将秘密令牌和套接字的文件名放在环境变量中。它产生的每个子进程都可以使用文件名和秘密令牌连接到守护进程。
*   除非秘密令牌正确，否则守护程序会拒绝连接。

问题：

*   我知道 /dev/random 的熵比 /dev/urandom 高。但是 /dev/urandom 是否足够好？如果没有，我应该使用什么？
*   令牌的大小是否足够大？
*   我应该锁定存储令牌的内存吗？我认为没有必要，因为守护程序每次启动时都会生成不同的令牌，所以当攻击者设法窃取硬盘驱动器并从交换文件中提取令牌时，它应该已经没用了。
*   我应该在关机期间取消存储令牌的内存吗？
*   还有什么我应该做的吗？

而且由于各种要求，我不能使用匿名管道来允许守护进程和子进程之间的通信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T19:05:38.477

最简单的方法是在服务器中为每个子进程简单地创建一个管道/套接字对。给子进程一个端，保留另一端。该管道/套接字上的任何内容都必须来自该子进程。

另一种方法是向操作系统询问来自 Unix 套接字的凭据（pid、uid、gid）。在 Linux 上，您将使用`getsockopt(sock, SOL_SOCKET, SO_PEERCRED, &cr, &cr_len)`( `man 7 socket`)。Solaris 有`getpeerucred`. 不幸的是，这不是可移植的，但许多系统对 Unix 套接字具有类似的功能。尽管它很复杂，但[D-Bus](http://www.freedesktop.org/wiki/Software/dbus)包含[在许多不同系统上执行此操作的代码](http://cgit.freedesktop.org/dbus/dbus/tree/dbus/dbus-sysdeps-unix.c?id=dbus-1.2.14#n1120)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T09:21:52.417

好吧，如果您要将令牌放入环境变量中，那么与这些进程具有相同或更高权限（即 UID）的任何人都将能够读取然后使用令牌！这有点让问题的其余部分成为一个有争议的问题！？如果您担心同一个盒子上的进程之间的安全性（您谈到了本地 IPC），那么不要使用环境变量来存储令牌 - 很容易检查这些（EV）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T09:47:03.037

如果您要分叉（但不是 exec()ing），只需将它们保存在本地内存中就足够了。如果您也在执行（），您可能（正如您在对 Jim 的评论中所述）必须通过管道传递令牌（和域套接字路径）。

如果你在无头服务器上运行它，/dev/random 可能会有点饿，所以使用 /dev/urandom 将（可能）是一个更好的选择，除非你有合适的噪音源来喂 /dev/随机搭配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-30T22:05:27.657

是的，/dev/urandom 提供的安全性已经足够好了。许多软件将其用于随机性（用于 SSL、身份验证等）。几乎唯一一次 /dev/random 是一个好主意是在生成某种需要多年安全的令牌时，例如证书的私钥。

有人提到如果您具有相同的 UID，则可以查看进程的内存。您可以通过让内核认为它是一个 setuid 进程来避免这种情况，即如果主进程以 root 身份运行，您可以将 fork、exec 和 setuid() 分配给非特权用户。具有相同 UID 的其他进程将无法查看该进程的内存。

凭证查找方法也适用于命名的 UNIX 套接字，而不仅仅是套接字对。

# diagram - 在 ERD 中，是什么让实体“可选”与“必需”？

> ID：925088
> 
> 赞同：1
> 
> 时间：2009-05-29T09:03:11.300
> 
> 标签：diagram, erd

据我了解，白点表示“可选”，而黑点表示“必需”。

如果是这样，类别是必需的，而分类是可选的。

但这在数据库中实际上意味着什么——说类别是必需的，而分类是可选的？

[![替代文字](https://i.stack.imgur.com/LXLwp.png)](https://i.stack.imgur.com/LXLwp.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T09:11:27.447

如果关系的子关系（在上面的示例中设置为“分类”）是可选的，则该列与数据库一起定义为允许空记录。即设置为NULL。这意味着您可以指定没有记录从分类链接到类别，也可以指定许多记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T09:08:01.760

在某些情况下，这可能意味着允许`NULL`或不允许外键之间的差异。

在其他情况下，您可能需要通过约束或应用程序代码进行检查。

不幸的是，我不熟悉您发布的图表中使用的符号，所以我无法告诉您它的含义。

# visual-studio-2010 - Visual Studio 2010 Professional 有序列图吗？

> ID：925095
> 
> 赞同：4
> 
> 时间：2009-05-29T09:07:38.623
> 
> 标签：visual-studio-2010

Visual Studio 2010 Professional 是否在 Web 上宣布了图表支持？我是否需要安装 TS 版本才能获得这些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-06-22T14:12:27.357

根据 Microsoft 网站，只有 Visual Studio 2010 的终极版（完整版本不是 Beta）带有 UML 建模工具：

[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/product-comparison](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/product-comparison) （在“架构和建模”功能下）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T21:20:01.810

它们就在那里——UML 图，如果这就是你的意思（至少在我的版本中——VisualStudio Team System 2010 版本 10.0.20506.1.Beta1）。

选择文件 -> 新建 -> 建模项目。

然后在解决方案资源管理器（右侧的窗口）中，右键单击您的建模项目（无论您提供什么名称——默认为 ModelingProject1）。然后选择添加 -> 新项目 -> 序列图。（或活动、类、组件、分层、用例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T20:31:54.363

您需要 Visual Studio Ultimate 来创建建模项目。您可以在 Visual Studio Professional 中阅读建模项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T09:14:52.353

现在得出明确的答案还为时过早：产品组定义确切的包装和许可的阶段才刚刚开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-31T08:48:26.763

建模工具可以在 Visual Studio 2010 Beta 1 的 TS 版本中找到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-29T09:18:13.953

听说VS2010有。但不确定版本的特定功能。它尚未宣布。

检查一下：[Visual Studio 2010 Rosario 中的新增功能](http://www.vikasgoyal.net/net/What's%20New%20in%20Visual%20Studio%202010%20Rosario.aspx)

# javascript - 如果启用了 javascript，页面是否可以始终拒绝 iframed 或成为框架集的一部分？

> ID：925096
> 
> 赞同：0
> 
> 时间：2009-05-29T09:07:51.977
> 
> 标签：javascript, iframe, frameset

当页面被 iframe 或包含为框架集的一部分时，它可以使用 Javascript 进行检查。（我认为通常是

```
if (self != top) top.location.href = self.location.href; 
```

）。当启用 Javascript 时，页面是否可以总是像那样“跳出”？有没有办法不让它跳出来？（假设我的页面是 iframe 的那个页面）。

（在另一种情况下，我认为如果我们使用 window.open() 在新窗口中打开页面，那么页面几乎总是不能拒绝......除非他们检查引荐来源并实际上拒绝提供页面，即使它是一个新的独立窗口）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T09:25:48.463

据我所知，只有一种方法——微软对 H​​TML 的专有扩展，它允许 iframe 开始标记指定页面应该以降低的安全权限加载——这通常会阻止 JS 在其中运行。

幸运的是，其他浏览器不支持此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T09:44:25.117

也许您可以查看 window.location.href 属性。如果匹配，则让您的页面加载。否则，停下！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T18:56:25.627

无需对浏览器进行任何特殊扩展或破解，框架页面可以通过将自身重新加载到顶部框架中来选择跳出框架。

就个人而言，我认为试图阻止框架页面脱离框架是不好的网络礼仪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T10:05:25.170

卡尔顿大学正在做一些有趣的工作，在 CCS 上进行了介绍，称为 SOMA（同源相互批准），它基本上提供了一个内容包含模型（ala iframe），其中双方必须批准包含浏览器才能通过它。

不幸的是，它仍处于早期阶段，尽管他们已经开发了一个 Firefox 插件，但它需要在 Web 开发社区和本地浏览器支持中获得关注，然后才能可行。

不过看看还是很酷的：[http ://www.ccsl.carleton.ca/software/soma/](http://www.ccsl.carleton.ca/software/soma/)

# xml - 将包含输入（字符 10 或 13）的字符串放入 xml CDATA 部分有什么用？

> ID：925099
> 
> 赞同：0
> 
> 时间：2009-05-29T09:08:21.087
> 
> 标签：xml, cdata

我目前正在处理一些具有以下结构的旧代码。

```
Document doc = org.w3c.Document
Element root = doc.getDocumentElement();

if ( string contains \n or \r )
then
  root.appendChild(doc.createCDATASection(string))
else
  root.appendChild(doc.createTextNode(string))
endif 
```

当字符串包含“\n”或“\r”时，我想不出任何需要将字符串放入 CDATA 节的用法。我相信使用 createTextNode 不会导致任何修剪或删除文本中的换行符，以防字符串在您设置或检索值时类似于“mytext\n\n\n”。

有人能想到一个有效/有用的情况，您希望将这样的字符串放在 CDATA 部分中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T09:16:44.330

我知道这听起来很明显，但是如果您要嵌入一个纯 ascii 文本文件，并且您希望逐字保留文件的手动格式。那将是一个有用的案例。

我遇到的其他情况是从图像中输出元数据，我无法控制它们的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T09:18:40.443

在 XML 中，CDATA 保留空格，而普通文本则没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-11T17:43:26.163

由于 CDATA 部分允许您将任意数据放入 XML 文档中，而无需了解 XML 对象将如何处理它，因此它们经常被不了解 XML 对象如何工作的人*使用*。一般来说，当我看到有人在他们的 XML 中创建 CDATA 时，我会假设他们并不真正知道自己在做什么，除非他们已经包含了一个很好的解释。（而且通常情况下，这个好的解释表明他们不知道自己在做什么。）

*最初的开发者可能混淆了 DOM 对包含空格的文本节点的处理与它对仅*包含空格的文本节点的处理。DOM 经常规范化纯空白文本节点，这在 XML 中可能是一个问题，例如：

```
<xsl:value-of select="foo"/>
<xsl:text>    </xsl:text>
<xsl:value-of select="bar"/> 
```

如果 DOM 将第二个元素中的四个空格规范化为一个空格，那会改变该转换的功能，这无疑是一件坏事。

但是您看不到像这样的 XSLT 是有原因的：

```
<xsl:value-of select="foo"/>
<xsl:text><![CDATA[    ]]>/xsl:text>
<xsl:value-of select="bar"/> 
```

这就是 XSLT 处理器是由了解 XML 对象如何工作的人编写的，并且他们知道在他们的特定情况下，告诉 DOM 在纯空白文本节点中保留空白是很重要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T09:15:28.560

我可能会偏离这个基础，但我似乎记得将 Javascript 代码放在 CDATA 标记中是一个很好的建议。实际上，请参阅此堆栈溢出问题的选定答案，因为它在回答原因方面做得不错：[脚本标记中何时需要 CDATA 部分？](https://stackoverflow.com/questions/66837/javascript-cdata-tags#66865)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T09:19:10.880

将文本放入 CDATA 部分应确保任何解析器都忽略它，因此上面的代码可用于确保正确的格式，无论解析器被告知如何处理空白。

我认为它有效地说明了换行符在该部分中是有意义的，而不仅仅是偶然的。不知道为什么你*只会*在存在换行符的情况下放入 CDATA 部分，所以我猜这只是一种解决方法，而不是给定代码中的设计问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-29T09:20:22.157

我想说这完全取决于您的 XML 解析是否会去除空格和控制字符。我相当肯定 .NET 中的 System.Xml 没有，MSXML 或 Xerces 也没有，但有一些选项可以做到这一点。

# python - python 队列和多处理队列：它们的行为如何？

> ID：925100
> 
> 赞同：33
> 
> 时间：2009-05-29T09:08:28.933
> 
> 标签：python, queue

这个示例代码有效（我可以在文件中写一些东西）：

```
from multiprocessing import Process, Queue

queue = Queue()
def _printer(self, queue):
    queue.put("hello world!!")

def _cmdDisp(self, queue):
    f = file("Cmd.log", "w")
    print >> f, queue.get()
    f.close() 
```

而不是这个其他示例：（errormsg：'module'对象不可调用）

```
import Queue

queue = Queue()
def _printer(self, queue):
    queue.put("hello world!!")

def _cmdDisp(self, queue):
    f = file("Cmd.log", "w")
    print >> f, queue.get()
    f.close() 
```

这个其他样本不是（我不能在文件中写一些东西）：

```
import Queue

queue = Queue.Queue()
def _printer(self, queue):
    queue.put("hello world!!")

def _cmdDisp(self, queue):
    f = file("Cmd.log", "w")
    print >> f, queue.get()
    f.close() 
```

有人可以解释这些差异吗？和做的权利？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-05-29T09:53:20.827

对于您的第二个示例，您已经自己给出了解释——`Queue`是一个模块，不能调用。

对于第三个示例：我假设您`Queue.Queue`与`multiprocessing`. A`Queue.Queue`不会在进程之间共享。如果在`Queue.Queue`进程之前声明了，那么每个进程都将收到它的副本，然后该副本独立于其他所有进程。父母在开始孩子之前放置在其中`Queue.Queue`的项目将可供每个孩子使用。启动子项后由父项放入的项目`Queue.Queue`将仅对父项可用。用于同一进程内`Queue.Queue`不同**线程之间的数据交换（使用**[线程](http://docs.python.org/library/threading.html#module-threading)模块）。多处理队列用于不同 Python**进程之间的数据交换**. 虽然 API 看起来很相似（它就是这样设计的），但底层机制是根本不同的。

*   `multiprocessing`队列通过腌制（序列化）对象并通过管道发送它们来交换数据。
*   `Queue.Queue`使用在线程和锁/互斥锁之间共享的数据结构以实现正确的行为。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2021-03-26T21:09:34.110

## 队列.队列

*   被创建为在模块产生的**并发环境中工作。**`threading`

*   每个线程在它们之间共享一个对`Queue.Queue`对象的引用。这里不会发生数据的复制或序列化，并且所有线程都可以访问队列中的相同数据。

## 多处理队列

*   被创建为在模块产生的**并行环境中工作。**`multiprocessing`

*   每个进程都可以访问其中的`multiprocessing.Queue`对象的副本。队列的内容通过 pickle 序列化跨进程复制。.

# syndication-feed - SyndicationFeed 类不处理 RSS 版本 0.91

> ID：925104
> 
> 赞同：7
> 
> 时间：2009-05-29T09:11:10.473
> 
> 标签：syndication-feed

.NET 中的 SyndicationFeed 类似乎只支持 RSS 2.0 版。如何支持 RSS 版本 0.91？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-21T14:19:01.817

简而言之，您需要创建一个类来处理 RSS 0.91 标准的序列化和反序列化。这样的类应该派生自 SyndicationFeedFormatter 类。

我已经创建了这样一个类，并在此处提供了它的源代码以及如何使用它的说明： [Syndicating and Consuming RSS 1.0 (RDF) Feeds in ASP.NET 3.5](http://www.4guysfromrolla.com/articles/031809-1.aspx)。

快乐编程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-02T23:40:48.530

我建议使用支持多个 RSS 版本（包括 0.91）的**CodeHollow.FeedReader包：** [https ://github.com/codehollow/FeedReader](https://github.com/codehollow/FeedReader)

# c# - 找不到类型或命名空间名称“列表项”

> ID：925106
> 
> 赞同：2
> 
> 时间：2009-05-29T09:11:13.967
> 
> 标签：c#

我正在编写代码来上下移动列表框的元素。为此，我制作了两个按钮来向上移动元素（向上移动按钮）和向下移动（向下移动按钮）。这是我的代码：

```
if (m_lbOPFfiles.SelectedIndex != m_lbOPFfiles.Items.Count && m_lbOPFfiles.SelectedIndex != -1)
        {
            ListItem item = m_lbOPFfiles.SelectedItem;
            int index = m_lbOPFfiles.SelectedIndex;
            m_lbOPFfiles.Items.RemoveAt(index);
            lstResdetails.Items.Insert(index + 1, item);
         } 
```

现在我收到 ListItem 的命名空间错误。任何人都可以帮我纠正它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T09:16:00.823

好吧，您还没有说您正在编写什么类型的应用程序 - Windows 窗体？ASP.NET？WPF？假设它是 ASP.NET，您需要：

```
using System.Web.UI.WebControls; 
```

在代码的顶部。如果它是 WPF，您可能想要：

```
using System.Windows.Documents; 
```

编辑：如果是 Windows 窗体，则没有`ListItem`类。`ListBox.SelectedItem`回报`object`，不是`ListItem`。`ListItem`您想使用类型的哪个方面`ListBox`？（我假设您使用的是`ListBox`.）您可以将项目添加`ListBox.Items`为对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T09:38:29.747

如果您使用的是 Visual Studio，您只需将光标移动到标识符上，就会出现一个智能标记。按 Ctrl+ 打开它。或者通过单击它并选择是要添加 using 指令还是使用完全限定名称。

另一方面，如果您使用的是 Visual Studio，Intellisense 会以自己的方式告诉您标识符当前不可用 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T09:14:49.453

我怀疑您在 .cs 文件的顶部缺少适当的**using** -directive，该指令将**使用 System.Web.UI.WebControls；**. 您可能还缺少正确的程序集（尽管我对此表示怀疑），并且应该在项目中添加对 System.Web 程序集的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T16:35:25.403

在 Windows 窗体中，如果您使用 ListBox.Items.Add(Object) 添加对象，其中 Object 是您创建的对象，则 ListBox 将填充对象的名称，而不是文本。除非您添加 ListBox.Items.Add(Object.Text)，在这种情况下，您会在 ListBox 中获得文本，但会丢失对象中的其余信息。我们想要的是一种模拟 ListItem 类在 ASP 中实现的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T20:00:32.360

您正在使用 Windows 窗体，这就是您无法访问控件名称空间中的 ListItem 类的原因，请执行以下操作： - 添加“PresentationFrameWork”（.NET 参考）作为对您的解决方案的引用 - 添加 `using System.Windows.Controls;`到您的类文件

# asp.net - 无法加载文件或程序集 System.EnterpriseServices

> ID：925110
> 
> 赞同：4
> 
> 时间：2009-05-29T09:13:26.787
> 
> 标签：asp.net

我正在尝试阅读 asp.net mvc，我以前从未使用过 asp.net，但熟悉常规 c# 开发。

全新安装、全面修补的 Windows XP Home。
全新安装更新到 SP1 Visual Studio 2008 Pro。

新建项目，选择“ASP.NET MVC Web Application”，目标框架为3.5

我按 F5 得到：
“无法加载文件或程序集 System.EnterpriseServices”

瑞典语的准确措辞：

```
[FileNotFoundException: Det går inte att hitta filen. (Undantag från HRESULT: 0x80070002)]
[FileNotFoundException: Det går inte att läsa in filen eller sammansättningen System.EnterpriseServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a eller ett av dess beroenden. Det går inte att hitta filen.] 
```

在我的项目中添加对 System.EnterpriseServices 的引用不起作用。
一个快速的谷歌建议我将此文件*Microsoft.NET/Framework/v2.0.50727/System.EnterpriseServices.dll*复制到 %WINDOWS%/assembly 中，但这也不起作用。

有什么建议么？

找到了答案，我用 gacutil 将它添加到了 GAC。

C:\WINDOWS>"C:\Program\Microsoft SDKs\Windows\v6.0A\bin\gacutil.exe" /i Microsoft.NET/Framework/v2.0.50727/System.EnterpriseServices.dll

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T09:29:05.010

找到了答案，我用 gacutil 将它添加到了 GAC。

> C:\WINDOWS>"C:\Program\Microsoft SDKs\Windows\v6.0A\bin\gacutil.exe" /i Microsoft.NET/Framework/v2.0.50727/System.EnterpriseServices.dll

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-12-28T17:04:06.457

有时 Nifle 给出的解决方案是有效的，但有时它并没有解决问题。当您尝试编译您的项目时，它会在不重新编译的情况下为您提供此消息。解决方案之一是清除临时 asp.net 文件。以下是可能的路径。但这取决于您的项目框架版本。在 asp.net 临时文件夹中找到与您的项目文件夹名称匹配的文件夹。

```
C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\ASP.NETWebAdminFiles 
```

或替换您正在使用的版本

```
C:\WINDOWS\Microsoft.NET\Framework\<Framework Version>\ASP.NETWebAdminFiles 
```

# javascript - 仅在字段值更改时激活 OnBeforeUnload

> ID：925111
> 
> 赞同：22
> 
> 时间：2009-05-29T09:14:42.527
> 
> 标签：javascript, dialog, conditional, triggers, onbeforeunload

我想要实现的是警告用户未保存的更改，如果他/她试图关闭页面或导航离开它而不先保存。

我设法让`OnBeforeUnload()`对话框弹出......但如果用户没有修改任何字段值，我根本不希望它显示。为此，我使用了这个名为**is_modified**的隐藏输入字段，它以默认值**false**开头，并在编辑任何字段时翻转为**true 。**

我尝试将**更改**事件绑定到此 is_modified 字段以尝试检测值更改...然后才激活 OnBeforeUnload。

```
$( '#is_modified' ).change( function() {
    if( $( '#is_modified' ).val() == 'true' )
        window.onbeforeunload = function() { return "You have unsaved changes."; }
}); 
```

但据我所知，该`change()`事件仅在这 3 个步骤之后才起作用 - 一个字段获得焦点，一个值被更改并且该字段失去焦点。在隐藏输入字段的情况下，我不确定这个接收和失去焦点部分是如何工作的！因此，onbeforeunload 功能永远不会被激活。

谁能建议一种方法来维护 is_modified 的触发器？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2011-07-05T07:51:23.053

我有类似的要求，所以想出了以下 jQuery 脚本：

```
$(document).ready(function() {
    needToConfirm = false; 
    window.onbeforeunload = askConfirm;
});

function askConfirm() {
    if (needToConfirm) {
        // Put your custom message here 
        return "Your unsaved data will be lost."; 
    }
}

$("select,input,textarea").change(function() {
    needToConfirm = true;
}); 
```

上面的代码检查`needToConfirm`变量，如果是，`true`那么它将显示警告消息。每当`input`或元素值发生变化时，`select`变量就会设置为。 `textarea``needToConfirm``true`

* * *

**PS：** Firefox > 4 不允许为`onbeforeunload`.
参考：[https ://bugzilla.mozilla.org/show_bug.cgi?id=588292](https://bugzilla.mozilla.org/show_bug.cgi?id=588292)

* * *

**更新：**如果你是一个表演狂，你会喜欢[@KyleMit 的](https://stackoverflow.com/questions/925111/activating-onbeforeunload-only-when-field-values-have-changed/6579437#comment41810976_6579437)建议。他编写了一个 jQuery 扩展`only()`，对任何元素只执行一次。

```
$.fn.only = function (events, callback) {
    //The handler is executed at most once for all elements for all event types.
    var $this = $(this).on(events, myCallback);
    function myCallback(e) {
        $this.off(events, myCallback);
        callback.call(this, e);
    }
    return this
};    

$(":input").only('change', function() {
    needToConfirm = true;
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-18T14:40:16.180

我们只是`Window.onbeforeunload`用作我们的“更改”标志。这是我们正在做的事情，（使用lowpro）：

```
Event.addBehavior({
  "input[type=radio]:change,input[type=text]:change,input[type=checkbox]:change,select:change": function(ev) {
       window.onbeforeunload = confirmLeave;
  }
  ".button.submit-button:click": function(ev) {
       window.onbeforeunload = null;
  },
});

function confirmLeave(){
    return "Changes to this form have not been saved. If you leave, your changes will be lost."  
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-25T14:19:31.027

以下在 jQuery 中运行良好：

```
var needToConfirm = false;

$("input,textarea").on("input", function() {
  needToConfirm = true;
});

$("select").change(function() {
  needToConfirm = true;
});

window.onbeforeunload = function(){        
  if(needToConfirm) {
    return "If you exit this page, your unsaved changes will be lost.";        
  }
} 
```

如果用户正在提交表单以保存更改，您可能需要添加此内容（更改`#mainForm`为他们提交的表单的 ID）：

```
$("#mainForm").submit(function() {
  needToConfirm = false;
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-10T07:18:14.153

```
$(window).bind('beforeunload',function() {
 return "'Are you sure you want to leave the page. All data will be lost!";
});

$('#a_exit').live('click',function() {
    $(window).unbind('beforeunload');
}); 
```

以上对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-29T09:19:21.907

以不同的方式尝试你的逻辑。意思是，将检查输入字段值的逻辑放入您的`onbeforeunload`方法中。

```
window.onbeforeunload = function () { 
    if ($("#is_modified").val() == 'true') { 
        return "You have unsaved changes."; 
    } else { 
        return true; // I think true is the proper value here 
    } 
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-29T09:19:35.900

为什么不`onbeforeunload`调用一个函数来检查值是否已更改，如果是，则返回“未保存的更改”确认？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-06-06T08:05:06.653

在 IE9 中，您可以使用不会显示任何对话框的简单返回语句 (re)。快乐的编码..

# objective-c - 有没有办法从 UITableView 中删除分隔线？

> ID：925115
> 
> 赞同：226
> 
> 时间：2009-05-29T09:15:07.547
> 
> 标签：objective-c, cocoa-touch, uikit

我正在寻找一种在纯模式下完全删除 UITableView 中的分隔线的方法。这是在分组中自动完成的，但这也会以难以衡量的方式改变表格的尺寸。我已将分隔线颜色设置为 colorClear。但这并不能完全解决问题。

当我试图在单元格中绘制自定义背景视图时，我希望单元格是无缝的，中间的一条像素线给我带来了问题。有没有更优雅的解决方法，然后使用分组视图然后拉伸它？

* * *

## 回答 #1

> 赞同：454
> 
> 时间：2009-05-29T09:42:40.847

您可以对`UITableView`属性执行此操作`separatorStyle`。确保属性设置为`UITableViewCellSeparatorStyleNone`并且您已设置。

Objective-C

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

在 Swift 中（3 之前）

```
tableView.separatorStyle = .None 
```

在斯威夫特 3/4/5

```
tableView.separatorStyle = .none 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-10-18T17:21:30.393

您也可以在故事板/xib 编辑器中执行此操作。只需将分隔符设置为无。

![在此处输入图像描述](https://i.stack.imgur.com/zOlId.png)

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2010-03-02T10:04:19.270

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-07-05T10:02:31.903

尝试其他答案后，我仍然有一条深灰色的线。我必须添加以下两行，以使单元格之间的行线中的所有内容都“不可见”。

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
self.tableView.separatorColor = [UIColor clearColor]; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-06-15T06:21:17.587

在界面生成器中设置表格视图分隔符“无”

[![在此处输入图像描述](https://i.stack.imgur.com/g9PPQ.png)](https://i.stack.imgur.com/g9PPQ.png) 并且可以通过以下方法删除最后一个单元格之后显示的分隔线。最好的方法是在 viewDidLoad 中将 Empty View 分配给 tableView FooterView

self.tableView.tableFooterView = UIView()

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-10-26T01:11:17.290

在斯威夫特：

```
tableView.separatorStyle = .None 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-08-07T12:17:21.490

`UITableViewCell`iOS 9 beta 4 存在错误：即使您从情节提要中设置`separatorStyle`为，分隔线也会出现在s 之间。`UITableViewCellSeparatorStyleNone`为了解决这个问题，您必须从代码中设置它，因为到目前为止，故事板中存在一个错误。希望他们能在未来的测试版中修复它。

这是设置它的代码：

```
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone]; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-24T18:13:54.723

在 ViewDidLoad 方法中，您必须编写这一行。

```
tableViews.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

这是工作代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-02T12:54:16.473

在你的`viewDidLoad`：

```
self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero];
if ([self.tableView respondsToSelector:@selector(setSeparatorInset:)])
{
    [self.tableView setSeparatorInset:UIEdgeInsetsZero];
} 
```

# math - 求圆周上像素坐标的算法

> ID：925118
> 
> 赞同：8
> 
> 时间：2009-05-29T09:15:47.220
> 
> 标签：math, geometry, pixels

如果我知道圆心的像素坐标、圆的半径和垂直角，我如何在圆的圆周上找到一定程度的像素值。基本上，我试图在不同的时间（1点钟，2点钟等）画一个时钟的指针

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-29T09:35:17.350

设`h`小时为 0 到 12 之间的浮点数（`h=2.25`将是 02:15 等）。`(cX,cY)`是中心的坐标。`hLength`是时针和`mLength`分针的长度。

```
// Hour hand
hAngle = 2.0*Pi*h/12.0; // 0..12 mapped to 0..2*Pi
hX = cX + hLength * sin(hAngle);
hY = cY - hLength * cos(hAngle);

// Min hand
mAngle = 2.0*Pi*h; // 0..1 mapped to 0..2*Pi, etc.
mX = cX + mLength * sin(mAngle);
mY = cY - mLength * cos(mAngle); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-29T09:24:46.920

其中圆心为`(X0, Y0)`，半径为`R`，与 x 轴的夹角为 theta：

```
X1 = (R * cos theta) + X0 
```

和

```
Y1 = (R * sin theta) + Y0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-29T09:22:06.613

如果 (x1,y1) 是圆周上的一个点并且 (x,y) 是中心，那么`x1 = x + r * cos(angle)` 和`y1 = y + r * sin(angle)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T09:22:36.877

如果中心在 x0, y0 和 0,0 iz 在左下角，则 1 点钟在 x0 + r *sin(2π/3), y0+r* cos(2π/3)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-29T09:23:22.507

从中心画线到用`sin`y 坐标和`cos`x 坐标计算的坐标（两者都乘以手的长度）。

[维基百科有更多关于 sin 和 cos 如何“工作”](http://en.wikipedia.org/wiki/Trigonometric_functions#Sine)的信息。

# sql - 在数据仓库中使用视图

> ID：925122
> 
> 赞同：6
> 
> 时间：2009-05-29T09:16:54.503
> 
> 标签：sql, sql-server, database, database-design

我最近继承了一个使用视图来汇总数据的仓库，我的问题是：视图是好的做法，还是最好的方法？我打算使用多维数据集来聚合多维查询。

抱歉，如果这是一个基本问题，我对仓库和分析服务没有经验

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T11:14:20.913

分析服务和视图的根本区别在于它们将被不同的报告或分析工具使用。

如果您有基于 SQL 的报表（例如通过 Reporting Services 或 Crystal Reports），则视图可能对这些有用。视图也可以具体化（这些在 SQL Server 上称为索引视图）。在这种情况下，它们被持久化到磁盘上，并可用于减少对视图进行查询所需的 I/O。针对非物化视图的查询仍会命中基础表。

通常，视图用于安全或简单目的（即，将业务逻辑或计算封装在易于查询的东西中）。为了安全起见，他们可以通过过滤（限制可用行）或屏蔽基础表中的敏感字段来限制对敏感数据的访问。

Analysis Services 使用不同的查询和报告工具，并预先计算和存储聚合数据。服务器的接口与 SQL Server 不同，因此用于多维数据集的报告或查询工具（例如 ProClarity）与用于报告数据库的工具不同（尽管某些系统确实能够从两者中查询）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T09:38:29.670

多维数据集是一种更好的方法来汇总数据并对其进行多维分析。

视图的问题是双重的：性能不佳（所有这些连接和分组），以及无法由用户对数据进行切分和切片。

在我的项目中，我使用“哑”视图作为数据仓库和多维数据集之间的另一层（即，我的维度和度量组基于视图），因为它允许我更大程度的灵活性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T10:28:11.660

视图对于安全目的很有用，例如限制/控制/标准化对数据的访问。

它们还可用于实现自定义表分区实现和联合数据库部署。

如果数据库中视图的功能是促进度量或统计的计算，那么您肯定会从更合适的实现中受益，例如通过数据仓库解决方案提供的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T11:12:14.520

几年前我在同一条船上。就我而言，我可以访问另一个 SQL 服务器。在第二台服务器上，我创建了一个到仓库的链接服务器，然后在第二台服务器上创建了我的视图和物化视图。从某种意义上说，我有一个数据仓库和一个报告仓库。对于该项目，这种方法效果最好，因为我们需要将数据访问权限授予其他部门和一些供应商。将服务器分成两个独立的实例，一个用于仓储，一个用于报告，也减轻了与安全访问相关的一些风险。

# c# - Response.Write 过时了？

> ID：925123
> 
> 赞同：5
> 
> 时间：2009-05-29T09:17:05.720
> 
> 标签：c#, asp.net

我最近有一个工作面试的技术测试，我做了一个 Response.Write()。有人告诉我这是“过时的”，现在有更好的方法可以做到这一点。面试官不会详细说明，所以我很想知道他指的是什么。有人有想法么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T09:35:43.810

Response.Write 很棒，如果页面上的*所有内容*都是由它发送的。当我必须使用 ASPX 来提供即时生成的非 HTML 文件时，我会使用它。

如果您使用的是非空的 ASPX 页面，那么 Response.Write 根本没有任何意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-29T09:22:34.973

在 aspx - 内联服务器脚本标签中：

```
<%= SomeProperty.Name %> 
```

在代码中 - 这取决于具体情况，但通常有更好的选择，例如 HtmlTextWriter、ScriptManager（用于注册脚本）、文字控件、占位符或其他东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-29T09:21:43.340

还有很多其他的方法。我避免使用 Response.Write，因为它取决于将内容写入输出的确切顺序。例如，我宁愿使用 Literal 控件并为其 Text 属性分配一个值。

我通常也尽量避免 <%= (return a value here) %> 内联语句，因为我喜欢让 aspx 页面只包含页面结构，并将服务器端代码语句保留在代码隐藏文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-03-01T17:46:01.343

ASP.Net 页面是一个高度结构化的软件，由负责提供自己的输出的控制层次结构组成。在这个制度下，`Response.Write`似乎已经过时了，因为它让人回想起原始的 ASP 页面，所有内容都是内联呈现的。

现代页面只是更新呈现它们自己的输出的控件的属性。`Response.Write`通过中断控制输出的流程来打破层次结构。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-29T09:20:31.860

取决于您的应用程序。请记住，您的 .aspx 文件中的 <%= "some string" %> 仍然是 Response.Write() 的快捷方式

如果您使用 Response.Write() 函数呈现所有 HTML，那么是的，也许他是对的。但是，如果您将它用于内联代码，那么实际上还可以。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-29T09:23:48.107

除非该方法被标记为过时，否则我不会解雇它。它当然不是“老式的”。但在某些情况下，可能会有更好的替代方案，因为它们更易于维护。

例如，您可以考虑在 HTML 中编写一堆`<%= %>`语句，但这是与 HttpResponse.Write 同时引入的，因此如果其中一个是“老式”的，那么它们都是。

您可能还想考虑在其他情况下使用模板引擎。这一切都取决于。

如果你的面试官不想详细说明，那也说明了面试官的一些情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-29T09:28:18.503

这完全取决于您使用 Response.Write 的目的。

如果要输出一个字符串以显示到页面，那么也许您应该在页面上放置一个文字，然后设置该文字的文本，而不是执行 Response.Write。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-29T09:52:20.280

在某些情况下，您可能*需要*Response.Write。

假设您将图像存储在数据库中，并希望通过字节数组将它们流式传输到您的页面上。如果没有 Response.Write，我认为您将无法做到这一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-29T12:43:06.240

只是在黑暗中拍摄，但您是否建议使用 Response.write 进行调试？就像是 ：

```
Response.Write("Inside first loop."); 
```

如果是这样，考虑到 Visual Studio/.NET 中的新调试工具，我会说它已经过时了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-29T09:25:01.053

我不认为“老式”是面试官真正想说的正确术语。根据上下文，可能有更好的方法可以使用。如果您使用的是内联脚本标签，例如 Jason 的示例，那么该`<%=`约定可能更适合该任务。但是，如果您执行任何类型的视图逻辑，`<% if (*conditional*) { ... } %>`那么您的选择可能会受到限制。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-29T11:38:36.463

我们有一些遗留代码，其中所有 HTML 输出都是在 VB DLL 中创建的，因为它在当时是使用分布式事务控制创建 HTML 的最快方式。

然而，ASP.NET 有点否定了这一点，因为它为您将 aspx 文件和代码编译为 DLL。

Response.Write 对于特定任务仍然可以，但是绝大多数编码不再需要这样做。

# sql - 如何在 SQL 中创建我的结果集的习惯排名？

> ID：925124
> 
> 赞同：0
> 
> 时间：2009-05-29T09:17:55.967
> 
> 标签：sql, tsql

假设我有一个可以包含一个或多个值的结果集，但我总是只希望结果中有一个值，并且特定值比其他值更有价值。

我将如何在 sql 中解决这个问题，以便可以在子查询中使用它？

示例（特定于 T-SQL，这是我使用的口音）：

我有一张桌子：

```
tChore(ChoreId int primary key, ChoreDescription nvarchar(15)) 
```

它装载了所有类型的家务。我还有另一张桌子：

```
tDayChores(
    DayId int primary key,
    ChoreId int foreign key references tChore(ChoreId)
) 
```

在多对多的关系中，它充满了日子和家务。

当然还有第三个表，其中包含所有工作日的名称。

现在，假设我想得到一个，而且只有一个，一天来吸尘。我更喜欢在星期三做，但如果没有安排，那么我想在星期四做，反过来，如果没有安排，那么没关系，任何一天都可以。

将结果集限制为一行的一种方法是这样做：

```
select top(1)
    DayId
from
    tDayChores DC
    inner join tChore C
        on C.ChoreId = DC.ChoreId
where
    C.ChoreDescription = 'vacuum' 
```

但是，如果安排在周一和周三进行抽真空，那么我会因此得到周一，并且我想将周三排名最高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T09:19:44.620

这是使用子查询的解决方案：

```
select top(1)
    t.DayId
from (
        select
            DayId,
            case
                when DayId = 3 then 1 -- DayId: 3 = Wednesday
                when DayId = 4 then 2 -- DayId: 4 = Thursday
                else 3
            end DayRank
        from
            tDayChores DC
            inner join tChore C
                on C.ChoreId = DC.ChoreId
        where
            C.ChoreDescription = 'vacuum'
    ) t
order by t.DayRank 
```

日排名确保星期三和星期四排在任何其他日期之前，然后您只需选择前一天。

# svn - 如何从任何目录启用 svn 命令？

> ID：925128
> 
> 赞同：0
> 
> 时间：2009-05-29T09:18:21.847
> 
> 标签：svn, windows-server-2003

我最近在 Windows Server 2003 上安装了 SVN。如果我在 bin 目录（程序文件\subversion\bin）中，我可以在命令提示符下执行 svn 命令。但是尝试在任何其他目录中执行命令会导致

'svn' 不是内部或外部命令、可运行程序或批处理文件

我在哪里错了？

**编辑** 我检查了环境变量中的路径值，它就在那里。我为我的用户和系统添加了以防万一但没有乐趣？

**编辑** 刚刚神奇地开始工作。随机的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T09:20:13.373

您需要将保存 svn 二进制文件的文件夹添加到 PATH 环境变量中。

为此，点击 Windows+Pause，然后单击 Advanced 选项卡和 Environment Variables 按钮，然后享受可怕的编辑器。

**更新：**请注意，环境通过继承工作，它不是您编辑的全局“事物”，将其视为每个新启动的程序继承的模板。所以，如果你打开一个命令窗口，输入“svn”并得到“未找到”错误，然后在上面描述的对话框中编辑路径并重试，什么都不会发生。

这是因为命令窗口正在使用*它*在启动时获得的环境副本工作。因此，更改环境变量后，打开一个新的命令窗口，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T09:19:56.120

您的 PATH 中可能没有 ...\subversion\bin。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T09:21:21.467

您需要将该文件夹添加到路径中：

右键单击我的电脑 > 属性 > 高级 > 环境变量

并编辑 Path 属性以包含`program files\subversion\bin`

# winforms - 为 WinForms 控件覆盖 CurrentCulture

> ID：925145
> 
> 赞同：1
> 
> 时间：2009-05-29T09:21:54.820
> 
> 标签：winforms, controls, currentculture, currentuiculture

是否可以覆盖WinForms 中特定控件的`CurrentCulture`和？`CurrentUICulture`所以这个特定的控件使用不同的文化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T09:26:07.353

您可以通过实例化您选择的 CultureInfo 并将其作为参数传递给格式化函数（例如 ToString）来实现这一点。只是不要将它分配给 Thread.CurrentThread.CurrentCulture 或 Thread.CurrentThread.CurrentUICulture，因为这会改变应用程序的文化。

在您的代码中：

```
CultureInfo myCulture = CultureInfo.GetCultureInfo("en-US");
Console.WriteLine(DateTime.Now.ToString(myCulture)); 
```

如果您的代码执行外部代码，并且您想强制此代码使用您内部选择的文化，您可以通过创建一个新线程，将文化分配给该线程，然后让该线程执行代码来做到这一点。只要确保注意这种方法带来的线程问题。

线程示例：

```
string formattedDate = string.Empty;
Thread t = new Thread(delegate()
{
    // call external code without specifying culture
    formattedDate = DateTime.Now.ToString();  
    waitHandle.Set();
});
t.CurrentCulture = CultureInfo.GetCultureInfo("en-US");
t.Start();
waitHandle.WaitOne(); // wait for the thread to finish
Console.WriteLine(formattedDate); 
```

最后一点；我不知道您*为什么*要覆盖 CurrentCulture，但我建议您在这样做之前三思而后行。用户习惯于查看根据其区域设置格式化的日期和数字；更改它可能会令人困惑，特别是如果它仅发生在 UI 的一部分中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T17:25:25.863

我认为您不能为单个控件执行此操作，但对于当前线程，您可以像这样切换：

```
System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("DE"); 
```

# java - Java中的字体度量不正确/缺失？

> ID：925147
> 
> 赞同：9
> 
> 时间：2009-05-29T09:22:21.340
> 
> 标签：java, layout, fonts, font-size

使用某种字体，我使用 Java 的 FontLayout 来确定它的上升、下降和前导。[（请参阅此处](http://java.sun.com/developer/onlineTraining/Media/2DText/other.html)的 Java 的 FontLayout 教程）

在我的具体情况下，我使用的是 Arial Unicode MS，字体大小为 8。使用以下代码：

```
 Font font = new Font("Arial Unicode MS", 0, 8);
    TextLayout layout = new TextLayout("Pp", font,
                               new FontRenderContext(null, true, true));
    System.out.println( "Ascent: "+layout.getAscent());
    System.out.println( "Descent: "+layout.getDescent());
    System.out.println( "Leading: "+layout.getLeading()); 
```

Java 给了我以下值：

```
 Ascent: 8.550781
    Descent: 2.1679688
    Leading: 0.0 
```

到目前为止，一切都很好。但是，如果我将这些值的总和用作不同文本行的行距，这与 OpenOffice、Microsoft Word 等中使用的行距有很大不同：它更小。当使用默认的单行间距时，Word 和 OO 的行间距似乎约为**13.7** pt（而不是像我使用上面的 Java 字体度量计算的**10.7 pt）。**

任何想法

1.  这是为什么？
2.  我是否可以以某种方式访问​​ Word 和 OpenOffice 似乎正在访问的字体信息，这会导致这种不同的行距？

* * *

**到目前为止我尝试过的事情：**

*   使用 etc. 将所有字形添加到字形矢量`font.getNumGlyphs()`- 仍然获得相同的字体度量值
*   如此处所述使用多行- 我得到[的](http://java.sun.com/j2se/1.4.2/docs/guide/2d/spec/j2d-fonts.html#wp64005)每一行都具有与上述相同的字体度量。
*   使用`FontMetrics`' 方法，例如`getLeading()`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-03T11:55:40.933

Zarkonnen 不值得他投反对票，因为他在正确的路线上。许多 Java 字体似乎在它们不应该的情况下返回零作为它们的前导。也许是由于[这个错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4711444)：我不知道。将这个空白放回似乎取决于您。

排版行高通常定义为上升 + 下降 + 领先。上升和下降是从字符所在的基线向上和向下测量的，前导是一条线的下降和下方线的上升之间的空间。

![替代文字](https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Typography_Line_Terms.svg/410px-Typography_Line_Terms.svg.png)

但领先不是固定的。您可以在大多数文字处理和印刷软件中设置领先地位。Word 将此称为行间距。最初的问题可能是询问 Microsoft Word 如何计算其单行间距。微软[对 OpenType 字体的建议](http://www.microsoft.com/typography/otspec/recom.htm)似乎表明不同平台上的软件计算它的方式不同。（也许这就是 Java 现在返回零的原因？）

快速搜索一下似乎表明领先的经验法则是[单行间距](http://desktoppub.about.com/cs/typespacing/a/leading.htm)或固定点间距的上升+下降的 120%；说在所有行之间领先 2 分。在没有我能找到的任何硬性或快速规则的情况下，我会说它归结为你所呈现的文本的易读性，你应该选择你认为最好的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-02T07:26:22.090

Word 和 OO 是否包括行之间的空白，而 Java 不包括？

所以在 Word / OO 中，你的数字是 Ascent + Descent + Whitespace，而在 Java 中你只有 Ascent + Descent？

# c# - 在 IIS 6.0 WS 2003 上使用 Web 服务时出现错误 500

> ID：925152
> 
> 赞同：1
> 
> 时间：2009-05-29T09:23:04.537
> 
> 标签：c#, web-services

我已经使用 c# 和 Asp.net 开发了一个 Web 服务，这在我使用 vista 和 IIS7.0 的本地机器上运行良好。我使用这个 url 通过 Jquery 调用它

[http://localhost/myWebservice/vote](http://localhost/myWebservice/vote)

但是当我在预生产站点上尝试它时，我从服务器收到一个 500 错误，告诉我 /vote 不好。输入 ?op=vote 时，我仍然可以直接在浏览器中访问它，但是我有一个错误提示我的 xml 格式不正确。

我在 IIS 6.0 的配置中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T09:28:58.970

要在 IIS 6 中使用路由，您可能需要在 IIS 中使用通配符映射；[与此](https://stackoverflow.com/questions/275920#279386)相同（对于 ASP.NET MVC，但概念相同）-尽管说实话，我希望找不到文件的 4xx。

500 通常表示更严重的问题 - 例如，应用程序池标识未正确配置并且无法作为服务执行。检查服务器上的事件日志以获取消息。

* * *

作为旁白; 始终尝试在尽可能接近实际托管平台的东西上进行开发。例如，我在用于托管 IIS6 的 VM 中运行 Win2003 服务器。这样可以在您来部署时省去很多意想不到的惊喜。

# javascript - Openstreetmap：在网页中嵌入地图（如谷歌地图）

> ID：925164
> 
> 赞同：109
> 
> 时间：2009-05-29T09:27:21.050
> 
> 标签：javascript, api, maps, openstreetmap

有没有办法在您的页面中嵌入/混搭 OpenStreetMap（就像[Google Maps API](http://code.google.com/apis/maps/)的工作方式一样）？

我需要在我的页面内显示一个带有一些标记的地图，并允许拖动/缩放，也许是路由。我怀疑会有一些 Javascript API 用于此，但我似乎找不到它。

搜索为我提供[了访问原始地图数据的 API](http://wiki.openstreetmap.org/wiki/API)，但这似乎更适用于地图编辑；此外，对于 AJAX 来说，使用它将是一项繁重的任务。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2009-05-29T09:33:46.420

你需要使用一些 JavaScript 的东西来显示你的地图。OpenLayers 是这方面的第一选择。

[在http://wiki.openstreetmap.org/wiki/OpenLayers_Simple_Example](http://wiki.openstreetmap.org/wiki/OpenLayers_Simple_Example)有一个例子，还有更高级的

[http://wiki.openstreetmap.org/wiki/OpenLayers_Marker](http://wiki.openstreetmap.org/wiki/OpenLayers_Marker)

和

[http://wiki.openstreetmap.org/wiki/Openlayers_POI_layer_example](http://wiki.openstreetmap.org/wiki/Openlayers_POI_layer_example)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-04-28T07:19:56.010

现在还有[Leaflet](http://leafletjs.com/)，它是为移动设备构建的。

有传单的[快速入门指南](http://leafletjs.com/examples/quick-start.html)。除了标记等基本功能外，通过插件，它还支持使用外部服务进行[路由。](http://leafletjs.com/plugins.html#routing)

对于一个简单的地图，恕我直言，它比 OpenLayers 更容易和更快地设置，但完全可配置和调整以适应更复杂的用途。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2017-01-19T23:25:10.580

## 简单的 OSM Slippy Map 演示/示例

单击“运行代码片段”以查看带有标记的嵌入式 OpenStreetMap 滑动地图。这是用[Leaflet](http://leafletjs.com)创建的。

### 代码

```
// Where you want to render the map.
var element = document.getElementById('osm-map');

// Height has to be set. You can do this in CSS too.
element.style = 'height:300px;';

// Create Leaflet map on map element.
var map = L.map(element);

// Add OSM tile layer to the Leaflet map.
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// Target's GPS coordinates.
var target = L.latLng('47.50737', '19.04611');

// Set map's center to target with zoom 14.
map.setView(target, 14);

// Place a marker on the same location.
L.marker(target).addTo(map);
```

```
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
<link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet"/>
<div id="osm-map"></div>
```

### 眼镜

*   使用 OpenStreetMaps。
*   使地图以目标 GPS 为中心。
*   在目标 GPS 上放置一个标记。
*   仅使用 Leaflet 作为依赖项。

**笔记：**

[我在这里使用了Leaflet](http://leafletjs.com)的 CDN 版本，但您可以[下载](http://leafletjs.com/download.html)文件，以便从您自己的主机上提供和包含它们。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-11-28T23:07:48.740

如果只想在网页上嵌入 OSM 地图，最简单的方法是直接从 OSM 网站获取 iframe 代码：

1.  [在https://www.openstreetmap.org](https://www.openstreetmap.org)上导航到您想要的地图
2.  在右侧，单击“共享”图标，然后单击“HTML”
3.  将生成的 iframe 代码直接复制到您的网页中。它应该如下所示：

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" 
src="https://www.openstreetmap.org/export/embed.html?bbox=-62.04673002474011%2C16.95487694424327%2C-61.60521696321666%2C17.196751341562923&amp;layer=mapnik" 
style="border: 1px solid black"></iframe>
<br/><small><a href="https://www.openstreetmap.org/#map=12/17.0759/-61.8260">View Larger Map</a></small>
```

如果你想做更详细的事情，请参阅 OSM wiki “[部署你自己的 Slippy Map](https://wiki.openstreetmap.org/wiki/Deploying_your_own_Slippy_Map) ”。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-06-18T22:20:55.730

看看[maptraction](http://mapstraction.com/)。这可以让您更灵活地提供基于 google、osm、yahoo 等的地图，但是您的代码不必更改。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-29T09:30:29.607

您可以使用 OpenLayers（用于地图的 js API）。

他们的页面上有一个[示例](http://openlayers.org/dev/examples/sundials-spherical-mercator.html)，展示了如何嵌入 OSM 磁贴。

编辑：[OpenLayers 示例的新链接](https://openlayers.org/en/latest/examples/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-06-10T14:02:48.153

我还会看看[CloudMade 的开发者工具](http://developers.cloudmade.com/projects)。他们提供了一个样式精美的 OSM 基础地图服务、一个 OpenLayers 插件，甚至还有他们自己的轻量级、非常快速的 JavaScript 映射客户端。他们还托管自己的路由服务，您提到这是可能的要求。他们有很好的文档和示例。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-09T16:21:14.967

如果你害怕 Javascript，有一个简单的方法可以做到这一点……我还在学习。Open Street 制作了一个简单的 Wordpress 插件，您可以对其进行自定义。添加 OSM 小部件插件。

这将是一个填充物，直到我使用人口普查局的隐蔽 TIGER 行文件找出我的 Python Java 组合。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-12T21:07:46.750

使用[Leaflet](https://leafletjs.com/examples/quick-start/)，就这么简单（运行代码）：

```
var mymap = L.map('mapid').setView([51.505, -0.09], 13)

// add the OpenStreetMap tiles
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
  { subdomains: ['a', 'b', 'c'] })
  .addTo(mymap)
```

```
#mapid { height: 280px; }
```

```
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

<div id="mapid"></div>
```

# python - 将列表分成相等部分的最佳方法

> ID：925172
> 
> 赞同：2
> 
> 时间：2009-05-29T09:30:54.880
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)

我有一个超过 500 个元素的列表。

我想把它分成 5 个列表，每个列表有 100 个元素。

```
mylist = [1......................700]
if len(mylist) > 100:
       newlist1 = mylist[0:100]
       someothelist = mylist[100:]
       if len(someotherlist) > 100:
           newlist2 = someotherlist[0:100]
           someotherlist2 = mylist[100:] 
```

使用迭代实现它的最佳方法是什么？

# visual-studio - 构建 Visual Studio 测试项目的最佳实践

> ID：925173
> 
> 赞同：2
> 
> 时间：2009-05-29T09:31:41.383
> 
> 标签：visual-studio, unit-testing, automated-tests

我知道对此没有正确或错误的答案，但是看看其他人如何构建他们的测试项目会非常有帮助吗？特别是对于多装配解决方案和管理不同的测试阶段、单元、集成、系统？

最重要的是，看看哪种结构非常适合在持续集成服务器（TeamCity）上运行测试构建会很有帮助？

最初我从以下开始：

```
Test (Namespace)
--Unit (Folder)
----ClassATests 
----ClassBTests
--Integration (Folder)
----ClassA+BTests 
----DBTests 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T09:42:58.960

我将单元测试和集成测试保存在单独的程序集（x.Tests.dll、y.IntegrationTests.dll）中，以便能够在构建过程中轻松找到要运行的测试程序集。然后我可以找到 *.Tests.dll 并将它们作为日常构建的一部分运行。集成测试在特定环境中手动运行，但仍可以从简单的构建脚本运行。

除此之外，TestClass-per-Class 几乎是我遵循的规则，除了小型助手类，它们都从单个 HelperTests 夹具进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T19:56:01.120

我今天在工作中一直在想这件事。我继承了一个过去由多人维护和更新的测试项目，因此目前包含一个相当混乱的层次结构。

为了简化问题，我开始使用以下结构：

```
Tests (Namespace)
-- Infrastructure (Folder)
---- general utility classes (common to all tests)
---- any other config
-- ClassATests (Folder)
---- ClassATestBase (base class for setup of common mock objects etc.)
---- ClassATestMethods (helper methods for the ClassATests)
---- ClassATests (main test class)
-- ClassBTests (Folder)
etc. 
```

到目前为止，我发现这种方法很有用，因为它意味着在任何给定测试期间将运行的大部分代码都可以在同一个文件夹中找到。它还旨在避免出现一个巨大的 TestMethods 类的情况。

这可能不是最优雅的解决方案（对不起，没有双关语！），但它目前对我有用。任何和所有的建议都是最受欢迎的！

# .net - .NET BCL 中是否有生成器模式的示例？

> ID：925176
> 
> 赞同：4
> 
> 时间：2009-05-29T09:33:21.630
> 
> 标签：.net, design-patterns

.NET 基类库中是否有完整构建器模式的示例？我正在寻找具有实际导演和多个具体建设者的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-04T04:33:17.993

我远不是这方面的专家，但我认为*DbCommandBuilder*[及其](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommandbuilder.aspx)继承类（[OdbcCommandBuilder](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbccommandbuilder.aspx)、[OleDbCommandBuilder](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommandbuilder.aspx)、[SqlCommandBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)）可能是一个例子……如果抽象构建器基类也可以作为主管。各种具体类委托给它们的基类，然后基类调用如下方法（每个反射器）：

```
private DbCommand BuildDeleteCommand(DataTableMapping mappings, DataRow dataRow)
{
    DbCommand command = this.InitializeCommand(this.DeleteCommand);
    StringBuilder builder = new StringBuilder();
    int parameterCount = 0;
    builder.Append("DELETE FROM ");
    builder.Append(this.QuotedBaseTableName);
    parameterCount = this.BuildWhereClause(
        mappings, dataRow, builder, command, parameterCount, false);
    command.CommandText = builder.ToString();
    RemoveExtraParameters(command, parameterCount);
    this.DeleteCommand = command;
    return command;
} 
```

这满足了成为建设者的一些要求：

*   抽象构建器类
*   混凝土建造者类
*   在各种 DbCommandBuilder 方法中进行复杂的多步骤构建 ( `BuildDeleteCommand`, `BuildInsertCommand`, `BuildUpdateCommand`)
*   product ( `DbCommand`，由具体类转换为特定的命令类型)，它比 SQL 字符串更复杂，因为它具有超时、命令类型、潜在的事务等。

但是没有单独的班级担任导演；实际上，`DbCommandBuilder`基类是主管。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T09:41:37.683

多个混凝土建筑商？我不知道，除非你算上[`WebRequest.Create`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.create.aspx)这是一个非常微不足道的建筑。

[`ProcessStartInfo`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)并且[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)作为简单的“一个构建器”示例都是合理的。

# gcc - 使用 GCC 选择性地删除警告消息

> ID：925179
> 
> 赞同：75
> 
> 时间：2009-05-29T09:34:02.283
> 
> 标签：gcc, warnings

这段代码：

```
Int32 status;
printf("status: %x", status) 
```

给我以下警告：

```
jpegthread.c:157: warning: format '%x' expects type 'unsigned int', but argument 3 has type 'Int32' 
```

我知道我可以通过强制转换类型来摆脱它，但是是否可以使用 GCC 编译器标志来摆脱那种特定类型的警告，并且仍然使用[`-Wall`](http://-Wall)?

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2009-06-01T16:47:13.720

如果您需要该代码可移植，那么您应该将参数强制转换为*unsigned int*，因为在某些平台上 int 类型的大小可能与 Int32 不同。

要回答有关在 GCC 中禁用特定警告的问题，您可以使用 -Wxxxx 在 GCC 中启用特定警告*并使用**-Wno-xxxx*禁用它们。

从[GCC 警告选项](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Warning-Options.html)：

> 您可以请求许多带有选项开头的特定警告`-W`，例如`-Wimplicit`请求对隐式声明的警告。这些特定的警告选项中的每一个也都有一个否定形式，开始`-Wno-`关闭警告；例如，`-Wno-implicit`。本手册仅列出了两种形式中的一种，以非默认形式为准。

对于您的情况，有问题的警告是*`-Wformat`*

> `-Wformat`

检查对 printf 和 scanf 等的调用，以确保提供的参数具有适合指定格式字符串的类型，并且格式字符串中指定的转换是有意义的。这包括printf、scanf、strftime 和 strfmon（[X/Open](https://en.wikipedia.org/wiki/X/Open)扩展，不在 C 标准中）系列（或其他特定于目标的系列）中的标准函数和格式属性指定的其他函数（请参阅*函数属性）。*在没有指定格式属性的情况下检查哪些函数取决于所选的标准版本，并且对没有指定属性的函数的这种检查由或禁用。`-ffreestanding``-fno-builtin`

> 这些格式会根据 GNU libc 2.2 版支持的格式功能进行检查。这些包括所有 ISO C90 和 C99 特性，以及来自单一 Unix 规范和一些 BSD 和 GNU 扩展的特性。其他库实现可能不支持所有这些功能；GCC 不支持对超出特定库限制的功能发出警告。但是，如果`-pedantic`与 一起使用`-Wformat`，将给出有关所选标准版本中没有的格式功能的警告（但不适用于 strfmon 格式，因为它们不在任何 C 标准版本中）。请参阅控制 C 方言的选项。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2010-06-26T23:55:40.373

看起来 GCC 手册确实提供了一种使用#pragma 执行此操作的方法，实际上（与[Aiden Bell 所说](https://stackoverflow.com/questions/925179/selectively-remove-a-warning-message-using-gcc/925198#925198)的相反）：

*[6.62.13 诊断编译指示](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)*

例如，对于[-Wuninitialized](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wuninitialized)警告，您可以...

```
#pragma GCC diagnostic ignored "-Wuninitialized" 
```

...抑制警告，或...

```
#pragma GCC diagnostic warning "-Wuninitialized" 
```

...即使您使用[-Werror](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Werror)构建，也将其视为警告（而不是错误） 。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-29T10:02:09.043

我使用了以下 CFLAGS：

```
-Wall -Wformat=0 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-29T09:42:00.130

我想你正在寻找

```
#ifdef WIN32
#pragma warning (disable: #num of the warning)
#endif 
```

等效于 GCC...

您可以在*[3.8 Options to Request or Suppress Warnings](http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Warning-Options.html)*中搜索**-Wno-conversion -Wno-format-security**等选项。

但就#pragma 指令而言：

我从 Google的**GCC 邮件列表中***引用*：

 **> 目前，GCC 不提供您正在寻找的#pragma 工具。
> 
> 不要失去希望！有可行的替代方案。
> 
> 修复代码使其不再发出警告的第一个最佳方法。唉，你已经说过你不能这样做。:-(
> 
> 注意：在您的团队可以容忍的范围内尽可能详细地显示警告！[见下文]
> 
> 忽略不需要的警告的下一个最佳方法是将 GCC 的输出后处理到一个脚本（例如 Perl 脚本），该脚本会去除您想要忽略的特定、准确的警告。
> 
> 忽略不需要的警告的下一个方法是禁用该翻译单元的警告。-Wno-foozle-mcgoogle，只针对那个特定的翻译单元。不过，那是一把强大的大锤子。如果警告在头文件中，它可能会在您的整个项目中普遍存在——我将引导您使用后处理脚本解决方案（假设您被禁止修复代码）。

所以目前没有，没有#pragma 指令来禁用特定警告。您可以打开尽可能多的警告而不是使用*-Wall减去特定的警告。*

[http://www.network-theory.co.uk/docs/gccintro/gccintro_31.html](http://www.network-theory.co.uk/docs/gccintro/gccintro_31.html)

**或者修复代码**

# java - 如何在通过 SAX Xerces 解析 XML Doc 时引用 XSD Schema 位置？

> ID：925180
> 
> 赞同：1
> 
> 时间：2009-05-29T09:34:45.090
> 
> 标签：java, xml, xsd

如何在通过 SAX Xerces 解析 XML 时引用 XSD Schema 位置？

< ?xml version="1.0" encoding="ISO-8859-1"?> < com.firma xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

```
>  
< !--  xsi:noNamespaceSchemaLocation="F:\...\myschema_v2.5.xsd" 
```

我必须在 XML Doc 中真正引用这个元素吗？？？我希望，不是...-->

我还在Java代码中将其设置如下，这并不优雅，而模式位置是固定的（不适合生产）
SaxParser.setProperty( " [http://java.sun.com/xml/jaxp/properties/schemaSource](http://java.sun.com/xml/jaxp/properties/schemaSource) ", "F:...\myschema_v2.5.xsd" );

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T10:03:48.463

在您的 jar 中包含架构并使用 getResourceAsStream 按以下方式加载它

```
reader.setProperty("http://java.sun.com/xml/jaxp/properties/schemaSource", 
  new InputSource(getClass().getResourceAsStream(xsdLocation))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T13:42:10.100

我知道了。

必须按如下方式使用，将“/com/firma/project/.../myschema_v2.5.xsd”作为参数。不要忘记一开始路径中的**“/”**。

# c# - Windows Update API c# 代码无法获取更新历史记录

> ID：925188
> 
> 赞同：1
> 
> 时间：2009-05-29T09:37:27.800
> 
> 标签：c#, .net, windows, hotfix

我正在编写一个代码，以在公司 Intranet 中使用安全修补程序自动修补 Windows 操作系统。（我使用 Visual Studio .NET，因此使用 .NET 框架 1.1，并使用 c# 进行开发。）
作为第一步，我想列出已使用 WUApi 应用于系统的修补程序。我添加了对“tlbimped”wuapi.dll 的引用，我还使用 regsvr32 注册了原始 dll，Windows 更新服务似乎已在服务管理器中启动并运行，但代码拒绝工作：它返回零作为应用的修补程序的数量，即使在应用修补程序之后，它也会在到达“QueryHistory”函数时引发 COMException。
代码如下：

```
using System;
using System.ComponentModel;
using System.Windows.Forms;
using System.Security;
using System.Security.Permissions;
using WUApiInterop;

namespace Hotfix_Scanner {
    public class Form1 : System.Windows.Forms.Form {
        private System.Windows.Forms.Button button1;
        private System.Windows.Forms.TextBox textBox1;

        private UpdateSession session;
        private UpdateSearcher searcher;
        private int count;
        private IUpdateHistoryEntryCollection history;

        private System.ComponentModel.Container components = null;

        public Form1() {
            InitializeComponent();
            SecurityPermission sp = new SecurityPermission(SecurityPermissionFlag.UnmanagedCode);
            sp.Demand();

            PermissionSet fullTrust = new PermissionSet(PermissionState.Unrestricted);
            fullTrust.Demand();

            session = new UpdateSession();
            searcher = session.CreateUpdateSearcher();
            count = searcher.GetTotalHistoryCount();
            history = searcher.QueryHistory(0, (count - 1));
        }

        protected override void Dispose(bool disposing) {
            if(disposing) {
                if (components != null)  {
                    components.Dispose();
                }
            }
            base.Dispose( disposing );
        }

        private void InitializeComponent() {
            this.button1 = new System.Windows.Forms.Button();
            this.textBox1 = new System.Windows.Forms.TextBox();
            this.SuspendLayout();

            this.button1.Location = new System.Drawing.Point(216, 240);
            this.button1.Name = "button1";
            this.button1.TabIndex = 0;
            this.button1.Text = "Scan";
            this.button1.Click += new System.EventHandler(this.button1_Click);

            this.textBox1.Dock = System.Windows.Forms.DockStyle.Top;
            this.textBox1.Location = new System.Drawing.Point(0, 0);
            this.textBox1.Multiline = true;
            this.textBox1.Name = "textBox1";
            this.textBox1.Size = new System.Drawing.Size(292, 232);
            this.textBox1.TabIndex = 1;
            this.textBox1.Text = "";

            this.AutoScaleBaseSize = new System.Drawing.Size(5, 13);
            this.ClientSize = new System.Drawing.Size(292, 266);
            this.Controls.Add(this.textBox1);
            this.Controls.Add(this.button1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.ResumeLayout(false);
        }

        [STAThread]
        static void Main()  {
            Application.Run(new Form1());
        }

        private void button1_Click(object sender, System.EventArgs e) {
            for (int i = 0; i < count; ++i) {
                textBox1.Text += history[i].Title + "\n";
            } // for loop
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-21T20:06:40.237

请修改以下代码行 - 希望它会起作用。

```
private void button1_Click(object sender, System.EventArgs e) {
  for (int i = 0; i < count - 1; ++i) {
    textBox1.Text += history[i].Title + "\n";
  } // for loop
  return;
} 
```

# java - Java NTP 客户端

> ID：925191
> 
> 赞同：21
> 
> 时间：2009-05-29T09:38:32.523
> 
> 标签：java, ntp

我需要我的软件与 NTP 服务器通信以确定本地时钟偏移。我曾尝试使用 org.apache.commons.net.ntp 包，但在 Windows 上运行时它的实现相当差，因为使用 System.currentTimeMillis() 来确定 NTP 数据包交换前后的时间。你可能知道也可能不知道，这个值只在系统时钟滴答声时更新，在大多数现代 Win2k3 服务器上是 64Hz 或每 15.625ms。这极大地限制了时钟偏移计算的准确性。

Ntpd 使用 CPU 高频定时器在系统时钟节拍之间进行插值，并获得更高的分辨率时间。您知道使用这种技术或类似技术的 Java 实现吗？或者您知道除 Apache 之外的任何其他 NTP 实现吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-29T09:49:28.523

[support.ntp.org](http://support.ntp.org/bin/view/Support/JavaSntpClient)上有一个 NTP Java 实现

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-15T09:48:36.753

由于这个问题在 Google 上的“Java NTP 客户端”排名很高：

Android 有一个简单 NTP 客户端的漂亮、紧凑的 Apache 许可实现：[android.net.SntpClient](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/net/SntpClient.java/)。

需要对其进行修改才能在非 Android java 上运行，但这应该是微不足道的，因为代码大约是 100 行代码加上另外 100 行详细注释，除了 Android 系统时钟之外没有外部依赖项——而且是偶然的，它已经准备好接受相对计时器，`nanoTime()`因为它已经使用了这样的相对计时器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-27T17:05:21.893

我编写了一个可以使用的 Java 实现（Java 7）：[SntpClient](https://github.com/zolyfarkas/spf4j/blob/master/spf4j-core/src/main/java/org/spf4j/net/SntpClient.java)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-29T09:47:34.207

如果您使用的是 Java 5 或更高版本，您可以使用[System.nanoTime()](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29)来执行更准确的时间偏移测量吗？您必须修改现有的 NTP 代码，但您应该有它的源代码，我不认为这会很困难。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-11T01:15:33.313

我知道这是一个老问题，但我注意到所有答案都没有解释如何使用这些库。在这个答案中，我们将展示一个基本的实现及其背后的逻辑。

实现它的一种简单方法是使用[Apache Commons Net 库](https://github.com/apache/commons-net)。这个库将提供一个`NTPUDPClient`类来管理无连接的 NTP 请求并返回一个`TimeInfo`实例。此实例应计算系统时间和 NTP 服务器时间之间的偏移量。让我们尝试在这里实现它：

1.  将[Apache Commons Net 库](https://github.com/apache/commons-net)添加到您的项目中。

```
<dependency>
  <groupId>commons-net</groupId>
  <artifactId>commons-net</artifactId>
  <version>3.6</version>
</dependency> 
```

2.  创建`NTPUDPClient`该类的新实例。
3.  设置默认超时和`InetAddress`NTP 服务器。
4.  调用该`NTPUDPClient.getTime()`方法`TimeInfo`从指定服务器检索具有时间信息的实例。
5.  调用`computeDetails()`方法来计算和验证 NTP 消息包的详细信息。
6.  最后，得到`offset`并计算一个原子时间。

这里我们有一个基本的实现：

```
import java.net.InetAddress;
import java.util.Date;
import org.apache.commons.net.ntp.NTPUDPClient; 
import org.apache.commons.net.ntp.TimeInfo;

public class NTPClient {
  private static final String SERVER_NAME = "pool.ntp.org";

  private volatile TimeInfo timeInfo;
  private volatile Long offset;

  public static void main() throws Exception {

    NTPUDPClient client = new NTPUDPClient();
    // We want to timeout if a response takes longer than 10 seconds
    client.setDefaultTimeout(10_000);

    InetAddress inetAddress = InetAddress.getByName(SERVER_NAME);
    TimeInfo timeInfo = client.getTime(inetAddress);
    timeInfo.computeDetails();
    if (timeInfo.getOffset() != null) {
        this.timeInfo = timeInfo;
        this.offset = timeInfo.getOffset();
    }

    // This system NTP time
    TimeStamp systemNtpTime = TimeStamp.getCurrentTime();
    System.out.println("System time:\t" + systemNtpTime + "  " + systemNtpTime.toDateString());

    // Calculate the remote server NTP time
    long currentTime = System.currentTimeMillis();
    TimeStamp atomicNtpTime = TimeStamp.getNtpTime(currentTime + offset).getTime()

    System.out.println("Atomic time:\t" + atomicNtpTime + "  " + atomicNtpTime.toDateString());
  }

  public boolean isComputed()
  {
    return timeInfo != null && offset != null;
  }
} 
```

你会得到类似的东西：

```
System time:    dfaa2c15.2083126e  Thu, Nov 29 2018 18:12:53.127
Atomic time:    dfaa2c15.210624dd  Thu, Nov 29 2018 18:12:53.129 
```

# c# - C#递归删除文件和目录

> ID：925192
> 
> 赞同：23
> 
> 时间：2009-05-29T09:40:08.467
> 
> 标签：c#

如何在 C# 中递归删除给定目录？包含文件的目录。

带有第二个参数的[System.IO.Directory.Delete](https://docs.microsoft.com/en-us/dotnet/api/system.io.directory.delete)`true`是否可以解决问题？

* * *

编辑：

所以，我实际上确实回答了我自己的问题，尽管这里的答案更加清晰。我首先提出这个问题的原因是，恰好调用`Delete`（第二个参数设置为`true`）的代码没有做它应该做的事情。事实证明，造成这种情况的原因是目录层次结构中的某个位置有一个带有`RO`属性集的文件，而*波兰语*版本的`Windows XP`正在为此抛出一个非常奇怪的消息。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-03-09T12:55:51.673

如果子目录还包含文件，唯一对我有用的解决方案是使用递归函数：

```
 public static void RecursiveDelete(DirectoryInfo baseDir)
    {
        if (!baseDir.Exists)
            return;

        foreach (var dir in baseDir.EnumerateDirectories())
        {
            RecursiveDelete(dir);
        }
        baseDir.Delete(true);
    } 
```

看来 Directory.Delete(dir, true) 仅删除当前目录的文件，以及子目录（如果它们为空）。

希望它可以帮助某人。

顺便说一句，例如： `RecursiveDelete( new DirectoryInfo(@"C:\my_dir") );`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-29T09:42:09.663

是的，这就是那个参数的重点。你试过了吗，有什么问题吗？（我刚刚仔细检查过，对我来说效果很好。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-05-15T09:32:23.960

如果你得到 UnauthorizedAccessException 。您可以使用来自**[Jone Polvora](https://stackoverflow.com/a/22282428/3195477)****的RecursiveDelete**的修改。谢谢你的想法。我会用它。

```
 public static void RecursiveDelete(DirectoryInfo baseDir)
    {
        if (!baseDir.Exists)
            return;

        foreach (var dir in baseDir.EnumerateDirectories())
        {
            RecursiveDelete(dir);
        }
        var files = baseDir.GetFiles();
        foreach (var file in files)
        {
            file.IsReadOnly = false;
            file.Delete();
        }
        baseDir.Delete();
    } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-29T09:54:18.687

递归适用于文件和文件夹（奇怪的是，我认为它不适用于文件；我的错......）：

```
// create some nested folders...
Directory.CreateDirectory(@"c:\foo");
Directory.CreateDirectory(@"c:\foo\bar");
// ...with files...
File.WriteAllText(@"c:\foo\blap.txt", "blup");
File.WriteAllText(@"c:\foo\bar\blip.txt", "blop");
// ...and delete them
Directory.Delete(@"c:\foo", true); // fine 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-01-05T16:35:50.053

为什么不使用？

Directory.Delete(directoryPath, true);

[https://msdn.microsoft.com/en-us/library/fxeahc5f(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/fxeahc5f(v=vs.110).aspx)

# sql - 选择连接表中不满足特定条件的所有记录

> ID：925195
> 
> 赞同：1
> 
> 时间：2009-05-29T09:40:56.607
> 
> 标签：sql, mysql

假设我们这里有两个表，posts 和comments，关系是一对多的，comments 表中有一个字段调用comment_date。

现在我很难得到预期的结果如下：

所有帖子在某个日期之后都没有评论，我可以通过 SQL 语句来完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T09:47:35.610

```
SELECT *
FROM posts p
WHERE NOT EXISTS(
    SELECT 1
    FROM comments c
    WHERE c.comment_date >= 'deadline'
    AND p.post_id = c.post_id
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T09:43:42.593

```
SELECT  *
FROM    posts
WHERE   post_id NOT IN 
        (
        SELECT  comment_post
        FROM    comments
        WHERE   comment_date >= @deadline
        ) 
```

# database - 任何必要的可空外键示例？

> ID：925203
> 
> 赞同：19
> 
> 时间：2009-05-29T09:42:56.150
> 
> 标签：database, foreign-key-relationship

```
Customers
 customer_id

Orders
 order_id
 customer_id fk 
```

如果我有两个表并在 Orders 表中的 customer_id 上定义一个外键，通过允许它为空，我是说我可以有一个没有与之关联的客户的订单。因此，可空外键的概念似乎与外键的目的不一致，即强制执行此约束。

是否有一个简单的例子说明需要可空外键的情况？还是赞成允许他们的论据？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-05-29T09:47:58.980

想象一个包含团队 TODO 的表。如果 TODO 尚未分配给团队成员，则它`user_id`是`NULL`. 如果不是`NULL`，则它是表的外键`users`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-29T09:58:00.863

不，可空外键从来都不是*必需*的。

您始终可以规范化可选的一对多关系。以您的示例为例，您可能有以下表格：

```
Customers: customer_id, ...
Orders: order_id, ...
OrdersCustomers: order_id, customer_id
  UNIQUE(order_id) 
```

这两个独特的约束确保一个订单只能属于一个客户，而不能两次属于同一客户。

您是否应该始终使这种关系正常化是另一回事。在某些情况下，非规范化可能会导致更简单的实现。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-29T09:58:50.800

> 因此，可空外键的概念似乎与外键的目的不一致，即强制执行此约束。

外键的目的是明确概念，Orders 表中的随机整数实际上是指 Customers 表中的项目。实际上将其作为约束执行是偶然的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-01-06T10:14:30.950

要设置外键可为空或为空，请使用以下 sql 脚本

```
ALTER TABLE Return_COMMENTS MODIFY order_ID Number NULL; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-09T02:24:06.920

有，做一些树结构，一个与自身相关的表。考虑一下：

```
table_node(node_id, parent_node_id, name) 
```

对于根，parent_node_id 应该为空，对吧？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-11T04:53:42.267

将列设置为 null 的常见设计方案是，如果您有一对多的父子关系，但子项不必存在。

当父记录（如帐户）具有可删除的子记录（如帮助请求）时，这是一个很好的用法。

您可能有一个包含最新帮助请求 ID 的 MostRecentRequest 列。当从系统中删除请求时，MostRecentRequest 列设置为 NULL，表示不存在。

另一个示例是当您希望 NULL 表示尚未为行分配父行时。也许您收到了帮助请求，并且技术人员字段上的 NULL 表示没有为请求分配技术。当您删除该技术人员时，您希望通过将值重置为 NULL 将他所有未完成的工作返回到池中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-01-05T18:55:55.163

我们有很多这样的东西，因为我们的应用程序是从某个事件的一些基本信息开始的，随着时间的推移，随着事件的计划更加全面，会添加更多信息。但是当添加信息时，我们要确保它满足 FK 约束。FK 用于数据完整性，但在插入初始数据时并不总是知道所有数据，因此允许使用空值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-31T00:35:32.027

还有一种情况我能想到：

在一个表中，您有一个唯一标识该记录的 ID 字段。相同的记录可能（或可能没有）有一个单亲。

包含以下列的表：

*   id 为整数，自增，不可为空
*   parentid 作为整数，可为空。

使用外键约束，您可以确保如果该字段不为空，则它引用一个有效的父项。此外，如果您尝试删除父记录而不修复子记录，则无法删除父记录。

# spring - Spring AOP - 我如何转换代理 bean？

> ID：925205
> 
> 赞同：3
> 
> 时间：2009-05-29T09:43:12.827
> 
> 标签：spring, aop

我已经在 bean 上配置了 Spring-AOP。

当我访问这个 bean 时，它会返回一个 spring 代理类而不是实际的 bean。

有什么办法可以得到真正的豆子吗？

应用程序上下文.xml

```
<bean id="abc" class="abc.java" /> 
```

一些.java

```
abc a = (abc)applicationContext.getBean("abc") 
```

这抛出：

`java.lang.ClassCastException: $Proxy19`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T13:51:04.013

对于初学者，您肯定必须将其转换为代理对象。然后尝试：

```
Proxy.getTargetSource().getTarget 
```

我真的不知道这是否可行，AOP 文档在描述代理类的返回类型时非常模棱两可，它说诸如“返回

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T11:15:55.603

根据目标 bean 的类层次结构，Spring 将生成一个扩展目标 bean 类的代理（使用 CGLIB），或者生成一个仅实现目标 bean 接口的代理。

如果您的目标 bean 实现了任何接口，则将选择后一个选项。这通常是优选的。我猜你的目标类确实实现了至少一个接口。获取 bean 的代码能否将引用转换为接口类型而不是类？

但是，您可以使用 proxy-target-class 选项强制 Spring AOP 生成扩展目标 bean 类的代理。确切的语法取决于您如何配置 AOP，并且您没有在问题中指定这一点。

# asp.net - 从 HTML 生成 MHTML

> ID：925210
> 
> 赞同：1
> 
> 时间：2009-05-29T09:45:04.057
> 
> 标签：asp.net, html, vb.net, mhtml

我正在寻找一种从我的 asp.net Web 应用程序中的页面生成 mhtml 的方法。

我看过这个网站并玩过代码，但我真的不想使用 interop.cdo 和 interop.adodb。[http://www.codeproject.com/KB/aspnet/aspnethtml2mht.aspx](http://www.codeproject.com/KB/aspnet/aspnethtml2mht.aspx)

除了自己生成所有的 mhtml 之外，我有点难过.... 有人有什么聪明的想法吗？

# window - 安装 Shield 2009 Premier，卸载不会关闭进程/gui

> ID：925214
> 
> 赞同：0
> 
> 时间：2009-05-29T09:46:59.403
> 
> 标签：window, installshield, uninstallation

我的应用程序（使用 C#.net 开发）现在打开，我卸载了，InstallShield 给出消息说明应用程序已经打开以及是否真的要关闭应用程序。选择“忽略”继续卸载。某些文件和应用程序的 exe 未关闭。如何在卸载时通过 installshield 关闭它们。或者我必须设置一些属性。我知道在卸载时添加自定义操作可以终止该过程，但 installshield 不应该这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T04:07:49.320

如果您的目标是重新启动打开的应用程序而不支持“忽略”选择，您可以考虑将“REBOOT”属性设置为“Force”。这将要求该用户重新启动系统，从而达到您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-12T12:56:18.157

如果您的项目类型是 InstallScript MSI 或它支持 Installscript，我更喜欢为此编写代码，例如：

```
export prototype _Server_UnInstalling();
function _Server_UnInstalling()
STRING Application, ServiceName;
begin    
   //application name 
    Application = "Demo";
    MessageBox("In _Server_UnInstalling",INFORMATION);
    //Check whether application is running or not.
    if ProcessRunning( Application ) then
        MessageBox("Demo is running",INFORMATION);
        //Close server Application 
        ProcessEnd(Application);
    endif;                          

    //if application is having service at the background then 
    ServiceName = "Demo Server";
    //Uninstall the server windows services on uninstallation.
    ServiceRemoveDuringUninstallation(ServiceName);

end; 
```

上面的例子给出了框架，你需要实现**ProcessRunning、ProcessEnd 和 ServiceRemoveDuringUninstallation**方法的逻辑，你可以参考 Installshield help doc 他们给出的文档以及源代码

希望这可以帮助...

# iphone - 我可以连接 UISearchBar 的清除按钮吗？

> ID：925221
> 
> 赞同：37
> 
> 时间：2009-05-29T09:48:19.463
> 
> 标签：iphone, objective-c, uikit, uisearchbar

我的界面中有一个 UISearchBar，我想自定义输入一些文本后出现在搜索栏中的小清除按钮的行为（它是一个带有十字的灰色小圆圈，出现在右侧搜索字段的一侧）。

基本上，我希望它不仅清除搜索栏的文本（这是默认实现），而且还清除我的界面中的一些其他内容，但调用我自己的方法之一。

我在文档中找不到 UISearchBar 类或 UISearchBarDelegate 协议的任何内容 - 看起来您无法直接访问此行为。

我确实注意到的一件事是文档解释了委托方法：

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText; 
```

在点击清除按钮后调用。

我最初在该方法中编写了一些代码来检查搜索栏的文本属性，如果它是空的，那么它已经被清除并做我所有的其他事情。

这虽然有两个问题：

首先，由于某种原因，我无法理解，即使我告诉搜索栏在我的方法结束时 resignFirstResponder，某些地方正在将其设置回 becomeFirstResponder。真的很烦...

其次，如果用户不使用清除按钮，而只是使用键盘上的删除按钮删除栏中的文本，则此方法将被触发并且他们的搜索结果消失。不好。

任何朝着正确方向的建议或指示都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-04-08T21:12:42.393

为这个问题找到了更好的解决方案:)

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
    if ([searchText length] == 0) {
        [self performSelector:@selector(hideKeyboardWithSearchBar:) withObject:searchBar afterDelay:0];
    }
}

- (void)hideKeyboardWithSearchBar:(UISearchBar *)searchBar{   
    [searchBar resignFirstResponder];   
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2010-10-04T02:38:19.100

被接受的答案是不正确的。这是可以做到的，我只是想通了，并在另一个问题中发布了它：

[UISearchbar clearButton 强制键盘出现](https://stackoverflow.com/questions/1092246/uisearchbar-clearbutton-forces-the-keyboard-to-appear/3852509#3852509)

最好的

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-02-10T13:19:30.590

我的应用程序中有此代码。不同之处在于我不支持“实时搜索”，而是在用户触摸键盘上的搜索按钮时开始搜索：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
    if ([searchBar.text isEqualToString:@""]) {
        //Clear stuff here
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-11-25T12:15:40.230

Swift 版本在清除按钮单击时处理关闭键盘：

```
func searchBar(searchBar: UISearchBar, textDidChange searchText: String) {
    if searchText.characters.count == 0 {
        performSelector("hideKeyboardWithSearchBar:", withObject:searchBar, afterDelay:0)
    }
}

func hideKeyboardWithSearchBar(bar:UISearchBar) {
    bar.resignFirstResponder()
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-01-26T07:47:03.893

我建议使用 UITextField 的`rightView`和`rightViewMode`方法来创建您自己的使用相同图像的清除按钮。我当然假设 UISearchBar 会让您访问其中的 UITextField 。我认为会的。
请从 iPhone OS 参考库中了解这一点：

`If an overlay view overlaps the clear button, however, the clear button always takes precedence in receiving events. By default, the right overlay view does overlap the clear button.`

所以你可能还需要禁用原来的清除按钮。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-13T23:00:26.503

由于这是首先出现的，而且据我所知，这个问题并没有得到充分解决，我想我会发布我的解决方案。

1）您需要在 searchBar 中获取对 textField 的引用 2）您需要在该 textField 触发时清除它。

这很简单。这是一种方法。

a) 确保将您的类设为 a ，因为您将在 searchBar 中使用 textField 的委托方法。b) 另外，将您的 searchBar 连接到您班级中的 Outlet。我刚刚打电话给我的searchBar。c）从 viewDidLoad 中，您想获取 searchBar 内的 textField。我是这样做的。

```
UITextField *textField = [self.searchBar valueForKey:@"_searchField"];
if (textField) {
    textField.delegate = self;
    textField.tag = 1000;
} 
```

请注意，我为该 textField 分配了一个标签，以便我可以再次抓取它，并将其设置为 textField 委托。您可以创建一个属性并将这个 textField 分配给该属性以便稍后获取它，但我使用了一个标签。

从这里你只需要调用委托方法：

```
-(BOOL)textFieldShouldClear:(UITextField *)textField {
if (textField.tag == 1000) {
    // do something
    return YES;
}
return NO; 
```

}

就是这样。由于您指的是私有 valueForKey 我不能保证它不会给您带来麻烦。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-23T09:54:31.357

你可以试试这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    for (UIView *view in searchBar.subviews){
        for (UITextField *tf in view.subviews) {
            if ([tf isKindOfClass: [UITextField class]]) {
                tf.delegate = self;
                break;
            }
        }
    }
}

- (BOOL)textFieldShouldClear:(UITextField *)textField {
     // your code
    return YES;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-10T12:17:46.710

根据我的经验，最好的解决方案是在系统清除按钮上方放置一个 UIButton（背景清晰且没有文本），然后连接一个 IBAction

```
- (IBAction)searchCancelButtonPressed:(id)sender {

    [self.searchBar resignFirstResponder];
    self.searchBar.text = @"";

    // some of my stuff
    self.model.fastSearchText = nil;
    [self.model fetchData];
    [self reloadTableViewAnimated:NO];

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-03T13:44:33.870

在 Apple 更改 UISearchBar 的视图结构时，无法在此处找到不使用私有 API 或不升级证明的解决方案。这是我写的有效的：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UITextField* textfield = [self findTextFieldInside:self.searchBar];
    [textfield setDelegate:self];
}

- (UITextField*)findTextFieldInside:(id)mainView {
    for (id view in [mainView subviews]) {
        if ([view isKindOfClass:[UITextField class]]) {
            return view;
        }

        id subview = [self findTextFieldInside:view];
        if (subview != nil) {
            return subview;
        }
    }

    return nil;
} 
```

然后在你的类中实现 UITextFieldDelegate 协议并覆盖 textFieldShouldClear: 方法。

```
- (BOOL)textFieldShouldClear:(UITextField*)textField {
    // Put your code in here.
    return YES;
} 
```

**编辑：**在 iOS8 的搜索栏的文本字段上设置委托将产生崩溃。但是，看起来 searchBar:textDidChange: 方法将在 iOS8 上被清除调用。

# jquery - 检查是否点击+Jquery

> ID：925225
> 
> 赞同：0
> 
> 时间：2009-05-29T09:49:45.233
> 
> 标签：jquery

我是 JQuery 的新手在我的应用程序中，我有大约 5 个 div。在单击任何一个 div 时，我想检查之前是否单击过任何其他 div

实际上在我的代码中我有

```
Text
Textarea
Dropdown 
```

在第一次单击 Text/textarea/dropdown 时（即我需要检查之前是否单击过其他任何一个，包括它自己的），以便我可以基于此继续。

即使我使用您所说的变量= 1，也会出现一个问题，即在单击任何文本/文本区域/下拉列表时，我想检查我正在单击的那个和其他人是否曾经单击过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T09:52:18.083

只需在变量中跟踪它。该示例假定“单击”已定义某些内容（生成事件处理函数的闭包会很好）并初始化为“0”值或其他非真实值。

```
if (clicked) {
  a();
} else {
  b();
}
clicked = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T09:57:56.963

我不知道你到底想做什么。但是一种可能的解决方案是为每个 div 定义新属性，比如说“was_clicked”，当你可以执行以下操作时：

```
div.click( function(event)
{
  if ( $( "div[was_clicked=true]").length > 0)
   // some of the div was clicked
   // you can iterate over each clicked div by  $( "div[was_clicked=true]").each( ...)
  $(this).attr( "was_clicked", "true");
}); 
```

# java - 为什么 Java BigDecimal 返回 1E+1？

> ID：925232
> 
> 赞同：29
> 
> 时间：2009-05-29T09:51:03.233
> 
> 标签：java, floating-point, bigdecimal

为什么此代码有时会返回 1E+1 而对于其他输入（例如 17），输出未以科学计数法打印？

```
BigDecimal bigDecimal = BigDecimal.valueOf(doubleValue).multiply(BigDecimal.valueOf(100d)).stripTrailingZeros();
System.out.println("value: " + bigDecimal); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-05-29T09:55:05.113

使用[bigDecimal.toPlainString()](http://java.sun.com/j2se/1.5.0/docs/api/java/math/BigDecimal.html#toPlainString())：

```
 BigDecimal bigDecimal = BigDecimal.valueOf(100000.0)
                     .multiply(BigDecimal.valueOf(100d))
                     .stripTrailingZeros();
 System.out.println("plain      : " + bigDecimal.toPlainString());
 System.out.println("scientific : " + bigDecimal.toEngineeringString()); 
```

输出：

```
平原：10000000
科学：10E+6

```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-29T09:54:49.933

当`.toString()`您将结果传递到`System.out.println()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-29T10:01:05.270

行为的确切原理`BigDecimal.toString()`在[API 文档](http://java.sun.com/javase/6/docs/api/java/math/BigDecimal.html#toString())中以非常详细的（并且几乎难以理解）的方式进行了解释。

要获得一致的（和区域设置敏感的）文本表示，您应该使用[DecimalFormat](http://java.sun.com/javase/6/docs/api/java/text/DecimalFormat.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-29T10:48:32.663

这基本上是因为您没有足够的有效数字。如果你将只有 1 个有效数字的东西乘以 100，那么你会得到只有 1 个有效数字的东西。如果它显示“10”，则基本上表示它有 2 个有效数字。显示它只有 1 个有效数字的方法是显示“1 x 10^1”。

以下两位小数具有相同的值 (10)，但“刻度”不同（它们开始计算有效数字；顶部有 2 个 sig 无花果，底部有 1）：

```
System.out.println(new BigDecimal(BigInteger.TEN, 0));  // prints 10
System.out.println(new BigDecimal(BigInteger.ONE, -1)); // prints 1E+1 
```

# java - 如何在 jMeter 中查看页面错误？

> ID：925240
> 
> 赞同：12
> 
> 时间：2009-05-29T09:53:13.057
> 
> 标签：java, testing, jmeter

如何在 JMeter 中看到错误？

换句话说，如果测试失败，怎么可能看到返回错误的页面？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-29T12:40:28.867

在我们的应用程序中，我们有一个显示特定消息的自定义错误页面。在 JMeter 中，我们向TestPlan添加了一个**响应断言（** *Add > Assertions > Response Assertion*）。我们将此断言配置为对该消息进行模式检查（例如检查“发生错误”或您的错误页面显示的任何内容）。

然后我们向线程组添加了一个**查看结果树（** *Add > Listener > View Results Tree*）并将其配置为仅显示错误（检查*Log/Display only Errors*）。此结果树现在捕获所有错误页面及其请求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-29T11:19:39.933

根据您设置测试的方式，您很可能会从服务器收到 404、401 或 500 错误代码。

然后，您可以使用服务器（不是 jMeter）的访问日志来查看返回错误的页面。

# c# - ASP.Net MVC - 路由对象 id == 标题 - 如何处理重复项？

> ID：925242
> 
> 赞同：2
> 
> 时间：2009-05-29T09:53:24.587
> 
> 标签：c#, sql-server, asp.net-mvc

网页已转为使用以下 URL：

//weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx

即它们在 url 中包含页面的标题，而不是有一些编码的 id。

我知道这对搜索引擎优化很有用，也有助于用户找到他们希望输入网址的正确页面。

我想遵循这种方法，但想知道如何最好地实现它，特别是如何处理重复。

根据标题创建 url 并向任何重复项添加数字增量后缀的数据库触发器是最好的方法吗？如果是这样，这样的触发器会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:15:15.703

*他们可以使用基于日期和标题（ 2007/12/03/asp-net-mvc-framework-part-2-url-routing*）的 id，而不是基于标题的 id 。因此，如果您在一天内没有具有相同标题的文章（这不是太严格的限制），则会消除重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T14:14:25.573

您必须在您的应用程序中对这个概念进行建模。基于标题的 URL 生成可以是**自动**的，但它不能是**不可见**的。WordPress（可能还有其他 CMS）在这方面做得很好——它们会根据您输入的信息默认一个 URL，但 URL 的“关键”部分对用户是可见和可编辑的，并且具有唯一性在适当的级别（全球，每月，每天 - 无论如何）强制执行。

我相信，使 URL 生成完全不可见会导致用户混淆错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T14:20:17.370

至少在 Wordpress 中，“slug”（他们称之为）从项目的标题生成一次，并单独存储在数据库中。如果两个“蛞蝓”发生碰撞，它会将`-1`,`-2`等附加到末尾。我个人更喜欢在提交表单中添加一个（可选）字段以允许人们插入他们自己的——它允许人们指定一个比`my-long-article-is-hard-to-type`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-16T14:31:21.413

你可以做和 SO 一样的事情。也就是说，蛞蝓仅作为 GoogleJuice 存在。这两个 URL 解析为同一件事：

[ASP.Net MVC - 路由对象 id == 标题 - 如何处理重复项？](https://stackoverflow.com/questions/925242/asp-net-mvc-route-object-id-title-how-to-deal-with-duplicates)

[ASP.Net MVC - 路由对象 id == 标题 - 如何处理重复项？](https://stackoverflow.com/questions/925242/)

因此，在您给出的示例中，如果 CMS 为每个帖子提供了一个唯一的数字标识符（我想这很可能），那么您可以将其包含在 URL 中：

[http://weblogs.asp.net/scottgu/archive/2007/12/03/1234/asp-net-mvc-framework-part-2-url-routing](http://weblogs.asp.net/scottgu/archive/2007/12/03/1234/asp-net-mvc-framework-part-2-url-routing)

在此示例中，符号`1234`是帖子的标识符。

# c# - 指定向 Castle Windsor 注册组件的实例

> ID：925244
> 
> 赞同：18
> 
> 时间：2009-05-29T09:53:53.180
> 
> 标签：c#, dependency-injection, inversion-of-control, castle-windsor

我有一个关于温莎城堡的简单问题，我已经很久没有使用它了。我正在尝试使用特定实例注册服务，该实例将成为服务的单例实现。

容器无法尝试创建服务本身的实现，因为它具有容器无法解决的依赖关系。我有一个服务实例，我希望它是用于请求该服务的任何人的唯一实例。但我似乎运气不佳。

使用此代码时，我暂时抱有希望：

```
container.Register(Component.For<IMyInterface>().Instance(serviceObj)); 
```

但是 Castle 对实例所做的所有事情都是在其上执行 .GetType() 并注册类型。对服务的请求随后将导致容器尝试创建该类型，并在无法填充依赖项时失败。

那么有什么办法可以做我想做的事情吗？如果不是，我将创建某种类型的 IServiceProvider 来获取服务的实例，并且没有容器需要填写的依赖项。但这感觉更像是一种解决方法，而不是正确的解决方案。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-29T10:02:11.620

尝试对容器的 Kernel 对象使用[AddComponentInstance方法。](http://api.castleproject.org/html/Overload_Castle_MicroKernel_IKernel_AddComponentInstance.htm)我认为这就是你所需要的。

* * *

**请注意：**此技术现已弃用。改为使用`container.Register(Component.For<T>().Instance(myT));`（感谢 eouw0o83hf）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T10:03:13.053

您可以通过`Kernel`容器的属性来做到这一点：

```
container.Kernel.AddComponentInstance<IMyInterface>(serviceObj); 
```

# java - Birt Chart 引擎文档

> ID：925247
> 
> 赞同：0
> 
> 时间：2009-05-29T09:54:25.130
> 
> 标签：java, charts, swt, birt

我正在寻找有关 Birt Chart Engine 的完整、精确和准确的文档，但我找不到任何东西，我遇到的所有文档都与 Birt Designer 相关或不准确甚至不存在。我希望有一个人可以帮助我...

（我确切地说，我特别寻找有关图表交互性和脚本的文档，同时将其呈现为 SWT 内容并完全使用 Java 代码制作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-11T18:51:06.920

首先，BIRT 不能像您在 Actuate 网站上的演示中看到的那样进行交互式渲染——这是他们出售的基于网络的程序——它可能误导了你。它可以从服务器上的 .WAR 运行并提供一些 AJAX 代码或其他内容。

其次，就我在三周的搜索中找到的而言，没有好的、最新的、免费的 BIRT 文档。API 文档在将 BIRT 与您自己的应用程序集成或扩展其功能方面相当缺乏。我发现 Jason Weathersby 等人的“集成和扩展 BIRT”一书有点帮助——它可以通过 Safari Books Online 在线“出租”。

大多数情况下，您需要进行大量 Google 搜索才能找到您要查找的内容。代码示例非常有必要遵循，因为有很多挑剔的细节会伤害你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T10:15:02.920

我相信可以在[这里](http://www.birt-exchange.org/documentation/BIRT_220/ChartJavadoc/chart/api/index.html)找到 API 文档，这些文档对于各种类以及如何使用它们是准确和准确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T04:09:36.190

[Integrating And Extending Birt](https://rads.stackoverflow.com/amzn/click/com/0321443853)一书有一章很好的介绍了如何使用 BIRT Charting API 进行编程。

# c# - 使用 html 的 silverlight 组件上的工具提示

> ID：925255
> 
> 赞同：0
> 
> 时间：2009-05-29T09:57:54.513
> 
> 标签：c#, asp.net, html

有什么方法可以在 Silverlight 控件上获得工具提示，就像图像中有“Alt”文本一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T10:03:46.920

根据经验，任何通过普通浏览器渲染器包含或不在其控制范围内的内容。所以简短的回答是“不”。

作为一种技巧，您可能能够在对象顶部覆盖一个透明元素并为其分配一个标题属性。不过我不会走那条路。

如果您想要嵌入对象中的工具提示，则让对象自己生成它。

顺便说一句 - 替代文本在大多数浏览器中不会显示为工具提示。您可能应该阅读[IMG 中的 ALT 文本，](http://www.alanflavell.org.uk/alt/alt-text.html)以便了解如何正确使用它们。

# c# - 如何将文本格式化为######.##

> ID：925258
> 
> 赞同：1
> 
> 时间：2009-05-29T09:58:11.877
> 
> 标签：c#, .net

如何将文本限制为 6 个数字。2个数字？

(######.##)

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-29T10:16:26.550

```
 // without leading zeros
string formatted = String.Format("{0:######.##}", value);

// with leading zeros
string formatted = String.Format("{0:000000.00}", value); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-29T10:36:06.200

您可以使用`String.Format`方法或`ToString`方法：

```
double value = 123.456;
string formatted1 = String.Format(CultureInfo.InvariantCulture, "{0:######.##}", value);
string formatted2 = value.ToString("######.##", CultureInfo.InvariantCulture); 
```

如果您`#`在格式化字符串中使用，如果那里没有有效数字，这些将用空格填充。例如，使用will be`123.456`格式化。`"######.##"``" 123.46"`

如果您`0`在格式化字符串中使用，那些将用零填充，那里没有有效数字。例如，使用will be`123.456`格式化。`"000000.00"``"000123.46"`

您可以组合`#`并`0`获得不同的结果。例如，您可能希望小数点分隔符前有空格，但总是至少有一位：`"#####0.00"`.

句点字符用于指定小数分隔符。对于某些文化设置，这是一个句点，而对于其他文化设置，则是一个逗号。您始终在格式字符串中使用句点，但输出取决于文化设置。如果您总是希望输出中有句点，则可以使用`CultureInfo.InvariantCulture`文化。

如果您不希望数字四舍五入，则必须在格式化之前将其截断：

```
double value = 123.456;
value = Math.Truncate(value * 100.0) / 100.0; 
```

# asp.net-mvc - 如何处理与 ASP.Net MVC 中其他表的用户的关系？

> ID：925263
> 
> 赞同：1
> 
> 时间：2009-05-29T09:59:17.507
> 
> 标签：asp.net-mvc, asp.net-membership, membership

在表级别，我将 aspnet_User.UserID 设置为其他表中 UserID 的外键（如 Posts.UserID，因此每个帖子都有一个所有者）。这是要走的路吗？

当我创建 LINQ to SQL 模型时，我应该包含 aspnet_User 表吗？

当我创建一个帖子（Posts 表中的记录，一个 Post 对象）时，如何设置与登录用户（控制器中的用户对象）的关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T10:05:29.117

我没有将 aspnet_User 表包含到我的 linq-to-sql 中，因为我真的不需要它。我使用内置的方式访问会员数据。

但是对于您的表 Posts，您可能更容易将其包含在内，以便您可以通过执行 myPost.User.Name 轻松显示用户名

编辑：

```
 MembershipUser user = Membership.GetUser();
    Guid userGuid = (Guid)user.ProviderUserKey;

    Post post = new Post
            {
                 UserId =userGuid,
                 Message = message                                      
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T13:02:41.067

在您的数据库模式中，您肯定应该让`UserID`表`Post`中的 a成为字段上的,的*外键*。这样，您就可以确保您的数据是干净的。我什至会在该关系上添加*级联删除和更新。*`aspnet_user table``UserID`

 *然后，请参阅我在[您提出的上一个问题](https://stackoverflow.com/questions/924692/how-do-you-get-the-userid-of-a-user-object-in-asp-net-mvc/925761#925761)中的说明，了解如何获取用户数据。

（Thomas Stock 在上面做了简要的总结：）

# sql - 数据库设计和非数字主键的使用

> ID：925266
> 
> 赞同：16
> 
> 时间：2009-05-29T10:00:38.097
> 
> 标签：sql, database, database-design, primary-key, primary-key-design

我目前正在为客户和网站管理应用程序设计数据库表。我的问题是关于使用主键作为表的功能部分（而不是仅仅因为）为每个表分配“ID”号。

例如，到目前为止，这里有四个来​​自数据库的相关表，其中一个使用传统的主键编号，其他的使用唯一名称作为主键：

```
--
-- website
--
CREATE TABLE IF NOT EXISTS `website` (
  `name` varchar(126) NOT NULL,
  `client_id` int(11) NOT NULL,
  `date_created` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `notes` text NOT NULL,
  `website_status` varchar(26) NOT NULL,
  PRIMARY KEY  (`name`),
  KEY `client_id` (`client_id`),
  KEY `website_status` (`website_status`),
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- website_status
--
CREATE TABLE IF NOT EXISTS `website_status` (
  `name` varchar(26) NOT NULL,
  PRIMARY KEY  (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
INSERT INTO `website_status` (`name`) VALUES
('demo'),
('disabled'),
('live'),
('purchased'),
('transfered');

--
-- client
--
CREATE TABLE IF NOT EXISTS `client` (
  `id` int(11) NOT NULL auto_increment,
  `date_created` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `client_status` varchar(26) NOT NULL,
  `firstname` varchar(26) NOT NULL,
  `lastname` varchar(46) NOT NULL,
  `address` varchar(78) NOT NULL,
  `city` varchar(56) NOT NULL,
  `state` varchar(2) NOT NULL,
  `zip` int(11) NOT NULL,
  `country` varchar(3) NOT NULL,
  `phone` text NOT NULL,
  `email` varchar(78) NOT NULL,
  `notes` text NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `client_status` (`client_status`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

--
-- client_status
---
CREATE TABLE IF NOT EXISTS `client_status` (
  `name` varchar(26) NOT NULL,
  PRIMARY KEY  (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `client_status` (`name`) VALUES
('affiliate'),
('customer'),
('demo'),
('disabled'),
('reseller'); 
```

如您所见，4 个表中有 3 个使用它们的“名称”作为主键。我知道这些将永远是独一无二的。在 2 种情况下（*_status 表）我基本上使用 ENUM 的动态替换，因为状态选项将来可能会改变，对于“网站”表，我知道网站的“名称”将始终是独一无二的。

我想知道这是否是合理的逻辑，当我知道名称始终是唯一标识符或灾难的秘诀时摆脱表 ID？我不是经验丰富的 DBA，因此任何反馈、批评等都会非常有帮助。

感谢您抽时间阅读！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-29T10:07:05.557

我总是将 ID 号添加到查找/ENUM 表有两个原因：

1.  如果您使用名称引用单列表，那么使用约束可能会更好地为您服务
2.  如果您想重命名其中一个 client_status 条目会发生什么？例如，如果您想将名称从 'affiliate' 更改为 'affiliate user'，则需要更新客户端表，这不是必需的。ID 号用作参考，名称是描述。

在网站表中，如果您确信名称是唯一的，那么可以用作主键。就我个人而言，我仍然会分配一个数字 ID，因为它减少了外键表中使用的空间，而且我发现它更易于管理。

编辑：如上所述，如果重命名网站名称，您将遇到问题。通过将此作为主键，您将很难在以后更改它，如果不是不可能的话。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-29T10:06:34.543

制作自然`PRIMARY KEY`的时，请确保它们的独特性在您的控制之下。

如果您绝对确定永远不会违反唯一性，那么可以将这些值用作`PRIMARY KEY`'s.

由于`website_status`and`client_status`似乎是由您且仅由您生成和使用的，因此可以将它们用作`PRIMARY KEY`，尽管长键可能会影响性能。

`website`名称似乎在外部世界的控制之下，这就是为什么我将其设为普通字段。如果他们想重命名他们的`website`?

反例是`SSN`和`ZIP`代码：生成它们的不是你，也不能保证它们永远不会被复制。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-29T14:44:12.190

Kimberly Tripp 有一系列关于创建聚簇索引和选择主键（相关问题，但并不总是完全相同的问题）的优秀系列博客文章（*[GUIDs as PRIMARY KEYs and/or the clustering key](https://www.sqlskills.com/blogs/kimberly/guids-as-primary-keys-andor-the-clustering-key/)* and *[The Clustered Index Debate Continues](https://www.sqlskills.com/blogs/kimberly/the-clustered-index-debate-continues/)* ） ）。她的建议是聚集索引/主键应该是：

1.  **唯一**（否则无用作为键）
2.  **窄**（键用于所有非聚集索引和外键关系）
3.  **静态**（您不想更改所有相关记录）
4.  **总是增加**（所以新记录总是被添加到表的末尾，而不必插入到中间）

使用“名称”作为您的密钥，虽然它似乎满足＃1，但不满足其他三个中的任何一个。

即使对于您的“查找”表，如果您的老板决定将所有*会员*更改为*合作伙伴*，该怎么办？您必须修改数据库中使用此值的所有行。

从性能的角度来看，我可能最关心的是一个 key 是*窄*的。如果您的网站名称实际上是一个长 URL，那么这可能会导致任何非聚集索引以及使用它作为外键的所有表的大小膨胀。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-29T11:06:57.167

除了已经提出的所有其他优秀观点之外，我还要提醒大家不要在 SQL Server 中使用大字段作为集群键（如果您不使用 SQL Server，那么这可能不适用于您） .

我添加这个是因为在 SQL Server 中，默认情况下表上的主键也是集群键（如果您想知道它，您可以更改它，但大多数情况下，它没有完成）。

确定 SQL Server 表的物理顺序的聚集键也被添加到该表的每个非聚集索引中。如果你只有几百到几千行和一两个索引，那没什么大不了的。但是，如果您有具有数百万行的非常大的表，并且可能有很多索引来加速查询，这确实会导致大量磁盘空间和服务器内存被不必要地浪费。

例如，如果您的表有 1000 万行、10 个非聚集索引，并且您的聚集键是 26 个字节而不是 4 个字节（对于 INT），那么您就浪费了 10 个 mio。10 x 22 字节，总共 22 亿字节（或大约 2.2 GB） - 这不再是小菜一碟了！

再说一遍——这只适用于 SQL Server，并且只有当你有非常大的表时，它们上有很多非聚集索引。

马克

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-07-02T21:41:19.157

“如果您绝对确定永远不会违反唯一性，那么可以将这些值用作 PRIMARY KEY 的值。”

如果您绝对确定永远不会违反唯一性，那么请不要费心定义密钥。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-30T07:15:31.123

我会争辩说，即使运行速度稍慢一点，抗损坏的数据库也比不抗损坏的数据库要好。

通常，代理键（例如任意数字标识符）会破坏数据库的完整性。主键是识别数据库中行的主要方式；如果主键值没有意义，则约束没有意义。因此，任何引用代理主键的外键也是可疑的。每当您必须检索、更新或删除单个行（并保证只影响一个行）时，您必须使用主键（或另一个候选键）；当存在有意义的替代键时，必须弄清楚代理键值是什么，这对于用户和应用程序来说是一个多余且具有潜在危险的步骤。

即使这意味着使用复合键来确保唯一性，我也会提倡尽可能使用有意义的、自然的属性集作为主键。如果您无论如何都需要记录属性，为什么还要添加另一个？也就是说，当没有自然的、稳定的、简洁的、保证唯一的键（例如，对于人）时，代理键很好。

如果您的 DBMS 支持，您也可以考虑使用索引键压缩。这可能非常有效，特别是对于复合键上的索引（想想[trie](http://en.wikipedia.org/wiki/Trie)数据结构），尤其是如果最不具选择性的属性可以首先出现在索引中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-29T14:31:52.043

就个人而言，我认为使用这个想法会遇到麻烦。当您最终建立更多的父子关系时，当名称更改时，您最终会做大量的工作（因为它们迟早会发生）。当网站名称更改时，必须更新包含数千行的子表时，性能可能会受到很大影响。你必须计划如何确保这些变化发生。否则，网站名称会更改（哎呀，我们让名称过期并且其他人购买了它。）要么由于外键约束而中断，要么您需要以自动方式（级联更新）以通过系统传播更改。如果您使用级联更新，那么您可能会在处理大量更改时突然让您的系统死机。这不被认为是一件好事。将 id 用于关系然后在 name 字段上放置唯一索引以确保它们保持唯一确实更有效和高效。数据库设计需要考虑数据完整性的维护以及这将如何影响性能。

要考虑的另一件事是，网站名称往往比几个字符长。这意味着使用 id 字段进行连接和使用连接名称之间的性能差异可能非常显着。您必须在设计阶段考虑这些事情，因为当您的生产系统有数百万条记录超时并且解决方法是完全重构数据库并重写所有 SQL 时，更改为 ID 为时已晚代码。不是您可以在十五分钟内解决的问题，以使该站点再次运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-29T14:43:09.057

这似乎是一个非常糟糕的主意。如果您需要更改枚举的值怎么办？这个想法是让它成为一个关系数据库，而不是一组平面文件。此时，为什么要有client_status表呢？此外，如果您在应用程序中使用数据，通过使用 GUID 或 INT 等类型，您可以验证类型并避免错误数据（就验证类型而言）。因此，它是阻止黑客攻击的众多线路中的另一条线路。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-27T15:56:04.063

我认为我同意 cheduardo。我学习数据库设计课程已经 25 年了，但我记得有人告诉我，数据库引擎可以更有效地管理和加载使用字符键的索引。关于数据库必须在更改密钥时更新数千条记录以及所有添加的空间被较长的密钥占用然后必须跨系统传输的评论假设密钥实际上存储在记录中并且无论如何，它不必跨系统传输。如果您在表的列上创建索引，我认为该值不会存储在表的记录中（除非您设置了一些选项来这样做）。

如果您有一个表的自然键，即使它偶尔更改，创建另一个键也会产生冗余，这可能会导致数据完整性问题，并且实际上会创建更多需要跨系统存储和传输的信息。我为一个决定将本地应用程序设置存储在数据库中的团队工作。它们对每个设置都有一个标识列、一个部分名称、一个键名和一个键值。他们有一个存储过程（另一场圣战）来保存确保它不会出现两次的设置。我还没有找到使用设置 ID 的案例。但是，我最终得到了多个具有相同部分和键名的记录，导致我的应用程序失败。是的，我知道可以通过在列上定义约束来避免这种情况。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-29T10:20:15.060

在决定表中的键之前应考虑以下几点

*   当您使用引用（外键）时，数字键更合适，因为您不使用外键，所以在您的情况下可以使用非数字键。

*   非数字键比数字键使用更多空间，会降低性能。

*   数字键使 db 看起来更易于理解（您只需查看最后一行即可轻松了解行数）

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-04-24T18:03:20.980

你永远不知道你工作的公司什么时候突然爆发式增长，你必须在一夜之间雇佣 5 个开发人员。最好的选择是使用数字（整数）主键，因为它们会让整个团队更容易使用，并且在数据库增长时有助于提高性能。如果您必须打破记录并对它们进行分区，您可能需要使用主键。如果您要添加带有日期时间戳的记录（每个表都应该如此），并且代码中的某处错误地更新了该字段，那么确认记录是否以正确的顺序输入的唯一方法是检查主要键。使用 INT 主键可能还有 10 多个 TSQL 或调试原因，其中最重要的是编写一个简单的查询来选择输入到表中的最后 5 条记录。

# visual-studio - 与 Visual Studio 2008 提供的测试库相比，其他测试库有什么优势？

> ID：925267
> 
> 赞同：3
> 
> 时间：2009-05-29T10:00:39.220
> 
> 标签：visual-studio, visual-studio-2008, unit-testing, testing

或者以另一种方式，是否有任何理由安装 NUnit 或任何其他库并使用它而不是 Visual Studio 2008 附带的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T11:15:04.280

自 VS2005 以来，我们一直在使用 MS 测试工具，由于我们在使用 MS 工具时遇到的一些问题，我曾一度将 NUnit 视为替代品。以下是我的一些发现：

MS 测试工具专家

*   易于说服管理层使用 MS 提供的工具（当然这不是技术问题，但可能与许多公司相关）
*   测试库、测试运行器和代码覆盖都很好地与 VS 集成
*   Team Foundation 设置中的中央报告和其他功能
*   或多或少与 NUnit 相同的功能集（我觉得 NUnit 可能比 MS 测试工具好一点，但差异并不大）

MS 测试工具缺点

*   VS2005 - 真的很慢，VS2008 好多了，但对于大型解决方案仍然很慢
*   测试主机是 STA，这使得测试多线程代码变得更加困难
*   VS 支持有点笨拙，因为它们在同一界面中支持先测试和后测试（因此有两个“新单元测试”命令 -> 更多支持工作）

最后切换到 NUnit 对我们没有吸引力，原因有两个：

*   代码更改不多，但经过大量测试仍然需要一些工作
*   每个开发人员席位的成本和复杂性增加：如果您将 MS Test 与 NUnit 交换，您也会失去测试运行程序和代码覆盖率。两者都可以通过 R#、TestDriven.NET、NCover 等其他工具获得，但这都增加了成本和复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T10:03:38.090

您是否希望没有 Visual Studio 2008 或只有 Express 版本的开发人员运行单元测试？这与开源项目特别相关。如果是这样，我会选择其中一种开源单元测试框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T18:04:39.833

几个笔记 RE MSTest...

1) 有一整个团队致力于将功能推向市场（这实际上是他们的全职工作）。这些人最终获得了用于编写文档、将点集成到其他 Microsoft 产品、讨论一般测试社区的进步以及这些如何进入 Microsoft 测试产品以及总体上致力于这项工作的功能齐全的产品单元的资源。当您选择 MSTest 时，您将充分受益于这些人的努力和 Ms 投资的资金。

2) Web 测试和压力测试。还有一个专门的小组（独立于 MSTest 小组）从事 Web 测试和压力测试。这些是 Microsoft 对测试堆栈的巨大补充。这些提供了模拟在线用户、使用复杂的带宽操作、检查服务器性能等等的方法。Web 和压力测试的东西是真正让 MS 测试堆栈看起来很认真的一个重要原因。

3) 功能测试...... Ms 正在添加完整的 UI 自动化测试支持，这将真正完善他们的产品。它在早期版本的 MS 测试工具中是缺失的，但必须考虑到一套完全集成的 UI 测试工具将真正增加对 MS 测试技术的投资的整体存量。

4) 如上所述 - 冲击测试。从开发人员的角度来看 - 这太酷了。如前所述 - 工具选择在单元测试的代码覆盖率上通过的正确单元测试。因此，开发人员编辑和现有类等......并且该工具专门指向影响签入的测试。顺便说一句 - 这是您从我在 #1 中提到的研究中获得的一个很好的例子。

.... BTW - 完全披露 - 我直接在 VSTS 上工作 - 并且完全认为它是我家庭的一部分 - 所以是的 - 我在偏袒方面完全妥协。

至于非 MS 测试工具...

A) 你不能忽视其他公司或整个开源社区的努力。如果您一方面考虑整个开源社区和所有其他公司的努力与几个 Microsoft 产品团队相比，MS 仍然会失败。然而，MS 的努力大多是协调的（尽管并非总是如此），并且确实倾向于至少具有软集成点（尽管同样，并非总是如此）。

B) 来自其他供应商/开源社区的更快周转。女士正在改进——但——没有——其他社区和供应商在将产品推向市场方面确实超过了 MS。这与测试工具创新没有什么不同。

C) ***** 其他测试工具将在非 ms 技术堆栈方面做得很好。在某些情况下，女士工具会“正常”——而在其他情况下，则完全错过了这条船。很多时候，从 MS 工具中获得的大笔胜利并不存在于其他技术（阅读 NON-MS）技术堆栈中——...其他供应商和开源社区（显然）确实提供了更具吸引力的支持。

最后...我建议：如果您在 MS 堆栈上并且对 Visual Studio 进行了投资——尤其是在 MSDN 上——因此在购买 MS 工具方面有大量的访问和投资......真的，使用某种形式的 MS 开发和测试工具是不费吹灰之力的。我什至没有讨论 VSTS 其余部分的测试工具集成和使用 - 圣牛。

但是 - 如果您正在使用其他堆栈，则不要对 MS 堆栈/MS 提供的开发人员工具进行端到端投资......桌面或服务器安装等...然后也许 MS 工具集的次要元素可能值得一试 - 但显然从 MS 测试工具方向开始会更困难/更昂贵。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T10:04:45.263

我认为在 VS2008 之前创建的大多数测试项目现在仍然会使用其他库。

对于较新的项目，我想这取决于个人品味或公司政策。

此外，并非所有的 Visual Studio 版本都支持我认为的测试框架......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-29T10:36:38.023

我刚刚开始使用 Visual Studio 测试项目。我没有使用第三方测试产品的经验，但我发现 Visual Studio 似乎完全适合大多数点。

我认为这将归结为您的经验。

如果您已经知道如何使用 NUnit 和/或 Rhino 模拟，那么请继续使用它们。

如果您没有任何经验或不太想获得其中的经验，那么请使用 Visual Studio 提供的一个。

一个有用的指针是，如果您右键单击并从代码中的任何位置选择“创建单元测试”，Visual Studio 将自动为您创建测试方法存根和访问器。如果您在编码之前没有遵循严格的 TDD 编写测试，则特别有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-29T10:38:07.770

一些优点：

*   (Jon's) 你可以在 VS 2008 Express 中运行你的测试
*   许多尖端功能建立在免费库之上。例如。[BDD](http://github.com/BenHall/xUnit.GWT/blob/b53bc5d1fc3b4212f03ffc4134198b37652b6853/xUnit.GWT/Example/This_is_my_story.cs)
*   一般来说，OSS 测试框架具有[丰富的可扩展性。](http://blog.benhall.me.uk/2008/01/introduction-to-xunitnet-extensions.html)
*   您可以调试 OSS 框架的源代码，并根据需要进行更改。
*   [可以说，像 xUnit 这样](http://xunit.codeplex.com/Wiki/View.aspx?title=WhyDidWeBuildXunit)的一些测试框架更容易学习并强制执行更清晰的无副作用测试模式。

鉴于很棒的[testdriven.net](http://www.testdriven.net/)支持几乎所有的 OSS 测试框架，您可以获得与 VS 2008 相同（如果不是更好）的 IDE 集成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-29T10:16:00.263

NUnit 允许您以定义的顺序运行测试，而 Visual Studio 测试框架同时运行测试。

# sql - 用于检索搜索结果的 SQL 查询

> ID：925296
> 
> 赞同：0
> 
> 时间：2009-05-29T10:07:32.123
> 
> 标签：sql, select

我需要帮助设计用于返回网站搜索结果的查询。用户通过从属性列表中选择项目进行搜索。返回的每个搜索结果项必须具有用户选择的所有属性。

挑战（至少对我来说！）是弄清楚如何只返回具有所有属性的结果，而不是只返回其中任何一个。

搜索结果项（我们称它们为 WIDGET）位于 WIDGET 表中。可能的小部件属性位于 ATTRIBUTE 表中。联结表 (WIDGETATTRIBUTEJUNCTION) 存储每个 WIDGET 的 0,1..n 个实际属性。

我想不出一个查询，当提供一个小部件属性列表时，它将返回具有这些属性中的每一个的行。我怀疑我可能会使用 ALL 子查询和/或 INTERSECT 但不确定如何使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T10:18:19.357

您可以使用类似于以下内容的内容，

```
SELECT WidgetID FROM Widget INNER JOIN WidgetAttributes WA ON WA.Key = SearchAttributes.Key AND WA.WidgetID = Widget.WidgetID GROUP BY WidgetID HAVING COUNT(Widget.WidgetID) > @SearchAttributesCount 
```

关键是 GROUP BY HAVING 语句，它将其限制为仅包含与所有属性匹配的所有 Widget 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T10:31:09.640

如果只有 SQL 支持的数组...

有几种方法可以解决这个问题，我首选的方法是将字符串（包含属性 ID）发送到 SQL，然后将字符串拆分为表。

就像是：

```
create function dbo.fn_makeArray ( @value nvarchar(max) )
    returns @table table([key] nvarchar(256))
    begin
        declare @start int;
        declare @end int;

        select @start = 1, @end = charindex(',', @value);

        while (@start < len(@value) + 1)
        begin
            if (@end = 0)
                set @end = len(@value) + 1;

            insert into @table ([key]) 
            values(substring(@value, @start, @end - @start));

            set @start = @end + 1;
            set @end = charindex(',', @value, @start);
        end
        return;
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T10:36:18.990

不久前我们遇到了这样的问题：

```
select WidgetName,AttributeName 
 from Widgets
 left join WALinks    on WALinks.wid = WidgetID
 left join Attributes on WALinks.aid = AttributeID

where WidgetID in 
 (
  select wId 
  from waLinks 
  where aid in (1,3) 
  group by wId 
  having count(aId) = 2
 ) 
```

然后，您可以将属性设置为“in (1,3)”列表，并始终将计数查询的数量调整为您匹配的属性数量。

# c++ - TCP/IP 的套接字写入问题

> ID：925299
> 
> 赞同：1
> 
> 时间：2009-05-29T10:07:45.430
> 
> 标签：c++, networking, symbian

我正在使用 TCP/IP 套接字示例，即“echoclient”，但我面临着读写问题。

我正在连接到服务器套接字，但它显示空数据。我不知道是数据转换问题还是其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-12T14:46:06.533

下载[Wireshark](http://www.wireshark.org/)看看它是否有助于调试。它可以窥探所有网络流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T21:33:49.423

使用经过良好测试的库和实现总是一个好主意。如果您想编写可移植的代码，套接字编程是 c++ 需要对操作系统有很好的理解。试试 Ace Wrappers - [http://www.cs.wustl.edu/~schmidt/ACE.html](http://www.cs.wustl.edu/~schmidt/ACE.html)它为分布式网络编程提供了经过良好测试的基于模式的 C++ 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T10:11:18.637

如果您通过手机连接，请咨询您的 GPRS/EDGE/3G 服务提供商，他们是否不限制任意 IP？

另外，如果您是从 PC 上的模拟器连接，请检查您是否在互联网之前通过网络安装了代理？

# php - 使用 XMLReader 解析媒体 RSS

> ID：925300
> 
> 赞同：2
> 
> 时间：2009-05-29T10:08:50.280
> 
> 标签：php, xml

```
<rss version="2.0"
    xmlns:media="http://search.yahoo.com/mrss/">
    <channel> 
        <title>Title of RSS feed</title> 
        <link>http://www.google.com</link> 
        <description>Details about the feed</description> 
        <pubDate>Mon, 24 Nov 08 21:44:21 -0500</pubDate> 
        <language>en</language> 
        <item> 
            <title>Article 1</title> 
            <description><![CDATA[How to use StackOverflow.com]]></description>
            <link>http://youtube.com/?v=y6_-cLWwEU0</link>
            <media:player url="http://youtube.com/?v=y6_-cLWwEU0"    /> 
            <media:thumbnail url="http://img.youtube.com/vi/y6_-cLWwEU0/default.jpg"
                width="120" height="90" /> 
            <media:title>Jared on StackOverflow</media:title> 
            <media:category label="Tags">tag1,tag2</media:category> 
            <media:credit>Jared</media:credit> 
            <enclosure url="http://youtube.com/v/y6_-cLWwEU0.swf"
                length="233"
                type="application/x-shockwave-flash"/>
        </item>
    </channel>
</rss> 
```

我决定使用 XMLReader 解析我的大型 xml 文件。我无法获取每个项目中的数据，尤其是缩略图

这是我的代码

```
//////////////////////////////

$itemList = array();
$i=0;
$xmlReader = new XMLReader();
$xmlReader->open('XMLFILE');
while($xmlReader->read()) {
    if($xmlReader->nodeType == XMLReader::ELEMENT) {
            if($xmlReader->localName == 'title') {
                    $xmlReader->read(); 
            $itemList[$i]['title'] = $xmlReader->value;
        }
        if($xmlReader->localName == 'description') {
            // move to its textnode / child
            $xmlReader->read(); 
            $itemList[$i]['description'] = $xmlReader->value; 

        } 
            if($xmlReader->localName == 'media:thumbnail') {
            // move to its textnode / child
            $xmlReader->read(); 
            $itemList[$i]['media:thumbnail'] = $xmlReader->value; 
                    $i++;
        }       
    }
}
//////////////// 
```

由于我正在解析巨大的 XML 文件，是否建议使用 DOMXpath？我真的很感谢你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-02T07:29:07.497

西安,

如果内存使用是您关心的问题，我建议远离 DOM/XPath，因为它要求首先将整个文件读入内存。XMLReader 一次只读取一个块（可能是 8K，因为这似乎是标准的 PHP 块大小）。

我已经重写了您最初发布的内容，它捕获了元素中包含的以下`<item>`元素：

1.  `title`
2.  `description`
3.  `media:thumbnail`
4.  `media:title`

您必须记住的是，`XMLReader::localName`它将返回元素名称减去任何 XMLNS 声明（例如`media:thumbnail`'s `localName`is `thumbnail`）。您需要小心这一点，因为该`media:title`值可能会覆盖该`title`值。

这是我重新写的：

```
<?php
define ('XMLFILE', dirname(__FILE__) . '/Rss.xml');
echo "<pre>";

$items = array ();
$i = 0;

$xmlReader = new XMLReader();
$xmlReader->open (XMLFILE, null, LIBXML_NOBLANKS);

$isParserActive = false;
$simpleNodeTypes = array ("title", "description", "media:title");

while ($xmlReader->read ())
{
    $nodeType = $xmlReader->nodeType;

    // Only deal with Beginning/Ending Tags
    if ($nodeType != XMLReader::ELEMENT && $nodeType != XMLReader::END_ELEMENT)
    {
        continue;
    }
    else if ($xmlReader->name == "item")
    {
        if (($nodeType == XMLReader::END_ELEMENT) && $isParserActive)
        {
            $i++;
        }
        $isParserActive = ($nodeType != XMLReader::END_ELEMENT);
    }

    if (!$isParserActive || $nodeType == XMLReader::END_ELEMENT)
    {
        continue;
    }

    $name = $xmlReader->name;

    if (in_array ($name, $simpleNodeTypes))
    {
        // Skip to the text node
        $xmlReader->read ();
        $items[$i][$name] = $xmlReader->value;
    }
    else if ($name == "media:thumbnail")
    {
        $items[$i]['media:thumbnail'] = array (
            "url" => $xmlReader->getAttribute("url"),
            "width" => $xmlReader->getAttribute("width"),
            "height" => $xmlReader->getAttribute("height")
        );
    }
}

var_dump ($items);

echo "</pre>";

?> 
```

如果您对它的工作原理有任何疑问，我很乐意为您解答。

# crystal-reports - 在水晶报表中设置报表字段值

> ID：925301
> 
> 赞同：0
> 
> 时间：2009-05-29T10:11:13.817
> 
> 标签：crystal-reports, c#-2.0

我有一个报告字段，其值为“2”。如果报表字段值为 2，我需要在报表中显示为“真”。如何在公式编辑器水晶报表中执行此操作？请帮我。

编辑：这是我在正式编辑器中的代码： if( {emp.company_id}=2) Then CStr ({emp.company_id}) ="ABC pvt ltd"

由于 emp.company_id 是整数值，我尝试将其转换为字符串，但在报告中仍显示为 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T13:21:50.437

我不知道如果不是 2，您要显示什么。假设您要显示原始值，那么您需要在报告中添加一个公式，如下所示：

```
if ({emp.company_id}=2) then "true"
else cstr({emp.company_id}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T10:40:10.153

您在公式中需要的只是

```
{Tablename.Fieldname}=2 
```

# python - 在 Django admin 中上传多个图像

> ID：925305
> 
> 赞同：9
> 
> 时间：2009-05-29T10:12:53.203
> 
> 标签：python, django, image-uploading

我目前正在为客户建立一个投资组合网站，但我在一个小区域遇到了麻烦。我希望能够为每个投资组合项目内联上传多个图像（不同数量），但我看不到明显的方法。

我能看到的最用户友好的方式是带有 JavaScript 控件的文件上传表单，它允许用户根据需要添加更多字段。有没有人遇到过这样的问题？确实，是否有任何自定义库可以解决我的问题？

之前我几乎没有要求修改管理工具，所以我真的不知道从哪里开始。

感谢任何可以阐明的人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-29T10:26:07.110

[photologue](http://code.google.com/p/django-photologue/)是 django 的功能丰富的照片应用程序。例如，它可以让您以 zip 文件的形式上传画廊（从某种意义上说，这意味着一次上传多个文件），自动创建不同自定义大小的缩略图，并可以对图像应用效果。我在一个项目中使用过一次，集成并不太难。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-29T11:36:35.297

您可以使用 Javascript 轻松扩展管理界面。有一篇[很好的文章](http://www.arnebrodowski.de/blog/507-Add-and-remove-Django-Admin-Inlines-with-JavaScript.html)，关于用一点 jQuery 魔法来做你想做的事。

您只需将他的所有代码放入一个 Javascript 文件中，然后在您的 admin.py 中包含以下内容：

```
class Photo(admin.ModelAdmin):
    class Media:
        js = ('jquery.js', 'inlines.js',) 
```

查看他的源代码，您还必须使用 Javascript 动态添加链接以添加更多内联，但这很容易做到：

```
$(document).ready(function(){
    // Note the name passed in is the model's name, all lower case
    $('div.last-related').after('<div><a class="add" href="#" onclick="return add_inline_form(\'photos\')">');
}); 
```

您可能需要进行一些样式设置以使其看起来正确，但这应该可以让您朝着正确的方向开始。

此外，由于您在`inline`陆地上，请查看[内联排序片段](http://www.djangosnippets.org/snippets/1053/)。

# javascript - 如何通过 javascript 获取 lastSibling？

> ID：925307
> 
> 赞同：3
> 
> 时间：2009-05-29T10:13:12.970
> 
> 标签：javascript, dom

有一个原生的“nextSibling”属性，但如何获得“lastSibling”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T10:15:00.127

[**处理 DOM 事件的几个函数**](http://snipplr.com/view/1994/javascript-dom/)

从文章

```
function lastSibling(node){
    var tempObj=node.parentNode.lastChild; 
    while(tempObj.nodeType!=1 && tempObj.previousSibling!=null){  
    tempObj=tempObj.previousSibling;   
    }  
    return (tempObj.nodeType==1)?tempObj:false; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T10:28:09.570

也许：

```
Node.parentNode.lastChild 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T10:16:29.547

没有直接的方法可以访问最后一个兄弟；您只需要遍历所有兄弟姐妹，直到到达最后一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-27T08:15:19.833

```
node.children[node.children.length - 1] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-24T09:25:44.277

您可以为此使用 querySelector：

```
 function lastSibling(node) {
       return node === node.parentNode.querySelector(node.nodeName + ':last-of-type');
   } 
```

# java - 与 struts2 一起使用的 JasperReport 问题 - 在最终 PDF 文件中为空

> ID：925311
> 
> 赞同：1
> 
> 时间：2009-05-29T10:14:49.860
> 
> 标签：java, jasper-reports

*我用struts2*写我的 jasper 报告问题。以下是我尝试执行的代码：

struts.xml 包含：

```
<action name="myJasperTest1" class="temp.JasperAction1">
    <result name="success" type="jasper">
        <param name="location">/jasper/our_compiled_template.jasper</param>
        <param name="dataSource">myList</param>
        <param name="format">PDF</param>
    </result>
</action> 
```

我的 JasperAction1 包含：

```
import java.util.ArrayList;
import java.util.List;
import java.io.FileInputStream;
import com.opensymphony.xwork2.ActionSupport;
import com.sufalam.business.model.util.LegacyJasperInputStream;
import com.sufalam.business.finance.model.bean.Account;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.xml.JRXmlLoader;

public class JasperAction1 extends ActionSupport {

    /** List to use as our JasperReports dataSource. */
    private List<Account> myList;

    public String execute() throws Exception {

        // Create some imaginary persons.
        Account a1 = new Account();
        Account a2 = new Account();

        a1.setId(77);
        a1.setName("aaa");
        a2.setId(88);
        a2.setName("bbb");
        // Store people in our dataSource list (normally would come from database).
        myList = new ArrayList<Account>();
        myList.add(a1);
        myList.add(a2);

        // Normally we would provide a pre-compiled .jrxml file
        // or check to make sure we don't compile on every request.
        try {
            JasperDesign design = JRXmlLoader.load(
                    new LegacyJasperInputStream(new FileInputStream("F://backup//report2.jrxml")));

            JasperCompileManager.compileReportToFile(design, "F://backup//our_compiled_template1.jasper");
        } catch (Exception e) {
            e.printStackTrace();
            return ERROR;
        }

        return SUCCESS;
    }

    public List<Account> getMyList() {
        return myList;
    }
} 
```

我正在使用*Netbeans的**iReport*插件生成 .jrxml 文件。*使用iReport*向导设计我的页面后，我的 our_jasper_template.jrxml 文件包含以下代码：

 **```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="null" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <queryString language="SQL">
            <![CDATA[SELECT
         account_master."name" AS account_master_name,
         account_master."id" AS account_master_id
    FROM
         "public"."account_master" account_master]]>
    </queryString>
    <field name="account_master_name" class="java.lang.String"/>
    <field name="account_master_id" class="java.lang.Integer"/>
    <title>
        <band height="58">
            <line>
                <reportElement x="0" y="8" width="555" height="1"/>
            </line>
            <line>
                <reportElement positionType="FixRelativeToBottom" x="0" y="51" width="555" height="1"/>
            </line>
            <staticText>
                <reportElement x="65" y="13" width="424" height="35"/>
                <textElement textAlignment="Center">
                    <font size="26" isBold="true"/>
                </textElement>
                <text><![CDATA[Classic template]]>
                </text>
            </staticText>
        </band>
    </title>
    <detail>
        <band height="40">
            <staticText>
                <reportElement x="0" y="0" width="139" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <text><![CDATA[account_master_name]]>
                </text>
            </staticText>
            <textField>
                <reportElement x="139" y="0" width="416" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{account_master_name}]]>
                </textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="20" width="139" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <text><![CDATA[account_master_id]]>
                </text>
            </staticText>
            <textField>
                <reportElement x="139" y="20" width="416" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.Integer"><![CDATA[$F{account_master_id}]]>
                </textFieldExpression>
            </textField>
        </band>
    </detail>
    <pageFooter>
        <band height="26">
            <textField evaluationTime="Report" pattern="" isBlankWhenNull="false">
                <reportElement key="textField" x="516" y="6" width="36" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER}]]>
                </textFieldExpression>
            </textField>
            <textField pattern="" isBlankWhenNull="false">
                <reportElement key="textField" x="342" y="6" width="170" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA["Page " + $V{PAGE_NUMBER} + " of "]]>
                </textFieldExpression>
            </textField>
            <textField pattern="" isBlankWhenNull="false">
                <reportElement key="textField" x="1" y="6" width="209" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression class="java.util.Date"><![CDATA[new Date()]]>
                </textFieldExpression>
            </textField>
        </band>
    </pageFooter>
</jasperReport> 
```

现在我面临的问题是，当我执行这个动作类时，它会给我以下 pdf 格式的输出： ![替代文字](https://i.stack.imgur.com/XFhYf.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-06T11:30:19.920

只需从您的 .jrxml 文件中删除查询字符串部分并使用帐户类的变量名称更改您的字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T07:38:29.660

尽管我可能没有最终的解决方案，但有一个细节对我来说看起来很奇怪：您的字段似乎`account_master_name`与`account_master_id`您的 Account 类的属性名称并不相符。不应该是`id`and`name`吗？对我来说很奇怪的是它在填写报告时应该会产生错误......

我对 Struts 不太熟悉，但我不明白它会产生怎样的影响。

# performance - 评估架构效率

> ID：925328
> 
> 赞同：1
> 
> 时间：2009-05-29T10:21:18.727
> 
> 标签：performance, architecture, metrics, software-quality

您如何评价某个设计的效率？

你的变量是什么？

我能想到：

*   耦合
*   设计模式使用
*   语言习语使用。
*   可扩展性。
*   高生存能力。
*   代码重用。
*   灵活性。
*   对错误的鲁棒性。
*   可测试性。
*   设计对资源使用和内存的影响。
*   可移植性。
*   使用正确的编程范式。
*   设计对运行时效率的影响。
*   封装。

您将如何计算这些指标？

我听说过程序指标作为一种工具，但我不知道它们是什么以及如何计算它们。

我感谢任何愿意提供帮助的人。

编辑：这是我新生博客中关于该主题的[博客条目。](http://omerprogramming.wordpress.com/2009/05/31/program-metrics-and-architectural-analysis/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T10:25:41.057

我想考虑以下指标：

1.  可扩展性。

2.  高活力。

关于您的建议，我认为内存不能成为设计效率的指标，因为它更多地基于实现。

* * *

**编辑：（**在对分析公式发表评论后）
我认为您找不到计算设计效率的终极公式，因为它非常主观。但是您可以采用一些统计技术，定义在设计中对您真正重要的指标。然后为每个度量定义其权重。现在找到不同的用例，检查你的设计如何适应每个指标并给它们打分。毕竟，您可以使用 V= Sum(W_i*G_i)/Sum(W_i) 标准化和计算值，其中 W_i 是重量，G_i 是等级。通过这种方式，您可以指定设计中对您重要的任何内容并进行相应计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T11:42:57.657

有几个工具可以为您做到这一点。我用过的一个是[Checkstyle - Metrics](http://checkstyle.sourceforge.net/config_metrics.html)。

我不能说在设计时真的考虑这些指标，但是当我正在寻找一些代码来攻击时，在缓慢/懒惰的下午使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T11:46:35.247

代码重用。虽然您可能无法将其视为正值，但您可以将其未充分使用视为负值，并获得因错误代码重用而导致的累积惩罚分数。

# php - 通过内存+评估提高速度或使用常规文件

> ID：925329
> 
> 赞同：0
> 
> 时间：2009-05-29T10:22:41.173
> 
> 标签：php, eval, memcached

我正在尝试提高我们服务器的速度，但我想在修改所有内容之前先了解一下您的看法。

我的文件系统的读取率很高。现在我们正在使用常规的 PHP 文件。我想知道我是否可以将这些文件缓存在 Memcache 中，然后对代码进行 eval 是否比让这些文件被解释更快。

那么有memcache + eval还是常规的php解释更好。我认为一种解决方案可以是 tempfs，但我还没有使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T10:36:40.910

我相信[APC](http://us.php.net/apc/)是您正在寻找的解决方案，因为它为您进行字节码缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T10:41:41.023

这取决于...只需创建一个类似于您的真实环境的模型并对其进行测量。使用 evals 您可能会减少 fs-reading 但会增加交换，因此您不会获得任何优势。

要减少 FSreading，请尝试将大量包含合并到 1 个 lib 文件中。您可以编写一个脚本来合并这些组以仅在存储库导出时进行生产（因为很难支持大文件）。即*my.lib.inc*在您开发软件时包含所有包含，并且在导出时它被替换为来自所有文件的合并内容，而不是包含它们。

你可以用smth。像 APC、nginx 等来缓存脚本和静态内容。这些改进一起应该会有所帮助。

# javascript - HTML 表单上的默认提交按钮是如何确定的？

> ID：925334
> 
> 赞同：230
> 
> 时间：2009-05-29T10:24:51.543
> 
> 标签：javascript, html, cross-browser, standards

如果表单已提交但不是通过任何特定按钮提交，例如

*   按`Enter`
*   `HTMLFormElement.submit()`在 JS 中使用

浏览器应该如何确定多个提交按钮中的哪一个（如果有）用作按下的按钮？

这在两个层面上很重要：

*   调用`onclick`附加到提交按钮的事件处理程序
*   发送回网络服务器的数据

到目前为止，我的实验表明：

*   按下 时`Enter`，Firefox、Opera 和 Safari 使用表单中的第一个提交按钮
*   按下时`Enter`，IE 使用第一个提交按钮或根本不使用，具体取决于我无法弄清楚的条件
*   所有这些浏览器都不使用任何 JS 提交

标准是怎么说的？

如果有帮助，这是我的测试代码（PHP 仅与我的测试方法相关，与我的问题本身无关）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
</head>

<body>

<h1>Get</h1>
<dl>
<?php foreach ($_GET as $k => $v) echo "<dt>$k</dt><dd>$v</dd>"; ?>
</dl>

<h1>Post</h1>
<dl>
<?php foreach ($_POST as $k => $v) echo "<dt>$k</dt><dd>$v</dd>"; ?>
</dl>

<form name="theForm" method="<?php echo isset($_GET['method']) ? $_GET['method'] : 'get'; ?>" action="<?php echo $_SERVER['SCRIPT_NAME']; ?>">
    <input type="text" name="method" />
    <input type="submit" name="action" value="Button 1" onclick="alert('Button 1'); return true" />
    <input type="text" name="stuff" />
    <input type="submit" name="action" value="Button 2" onclick="alert('Button 2'); return true" />
    <input type="button" value="submit" onclick="document.theForm.submit();" />
</form>

</body></html> 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2009-05-29T10:41:13.537

如果您通过 JavaScript（即，`formElement.submit()`或任何等效方法）提交表单，则*没有*一个提交按钮被认为是成功的，并且它们的值都不包含在提交的数据中。（请注意，如果您通过使用提交表单，`submitElement.click()`那么您引用的提交被认为是活动的；这并不真正属于您的问题的范围，因为这里的提交按钮是明确的，但我想我会包括它对于阅读了第一部分并想知道如何通过 JavaScript 表单提交使提交按钮成功的人。当然，表单的 onsubmit 处理程序仍然会以这种方式触发，而他们不会通过`form.submit()`，所以这是另一锅鱼......）

如果表单是通过在非文本区域字段中按 Enter 提交的，那么实际上由用户代理来决定它想要什么。[规范](http://www.w3.org/TR/html401/interact/forms.html#submit-button)没有说明`Enter`在文本输入字段中使用键提交表单（如果您选择按钮并使用空格或其他方式激活它，那么没有问题，因为明确使用了特定的提交按钮）。它只是说激活提交按钮时必须提交表单。甚至不需要`Enter`输入例如文本输入来提交表单。

我相信 Internet Explorer 选择了源中最先出现的提交按钮；我有一种感觉，Firefox 和 Opera 选择具有最低 tabindex 的按钮，如果没有定义其他内容，则回退到第一个定义的按钮。关于提交是否具有非默认值属性 IIRC 也存在一些复杂性。

要带走的一点是，这里发生的事情没有定义的标准，这完全是浏览器的心血来潮 - 所以无论你在做什么，尽量避免依赖任何特定的行为。如果您真的必须知道，您可能会发现各种浏览器版本的行为，但是当我不久前对此进行调查时，有一些非常复杂的情况（当然会随着新的浏览器版本而改变），我会建议您尽可能避免！

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2009-05-29T10:31:09.423

HTML 4 没有明确说明。当前的 HTML5 工作草案[规定第一个提交按钮必须是默认按钮](https://www.w3.org/TR/html5/forms.html#implicit-submission)：

> 元素的`[form](https://www.w3.org/TR/html5/forms.html#the-form-element)`默认按钮是[树形顺序中的第一个](https://www.w3.org/TR/html5/infrastructure.html#tree-order)[提交按钮](https://www.w3.org/TR/html5/forms.html#concept-submit-button "概念提交按钮")， 其[表单所有者](https://www.w3.org/TR/html5/forms.html#form-owner)是该 元素。`[form](https://www.w3.org/TR/html5/forms.html#the-form-element)`
> 
> 如果用户代理支持让用户隐式提交表单（例如，在某些平台上，当文本字段聚焦时，按下“enter”键会隐式提交表单），那么对于[默认按钮](https://www.w3.org/TR/html5/forms.html#default-button)已定义 [激活的表单执行此操作行为](https://www.w3.org/TR/html5/dom.html#activation-behavior)必须导致用户代理 在该 [默认按钮上](https://www.w3.org/TR/html5/forms.html#default-button)[运行合成点击激活步骤](https://www.w3.org/TR/html5/dom.html#run-synthetic-click-activation-steps)。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2012-02-28T22:59:57.777

[Andrezj's answer](https://stackoverflow.com/questions/925334/how-is-the-default-submit-button-on-an-html-form-determined/925387#925387)几乎得到了它......但这是一个简单的跨浏览器解决方案。

采取这样的形式：

```
<form>
    <input/>
    <button type="submit" value="some non-default action"/>
    <button type="submit" value="another non-default action"/>
    <button type="submit" value="yet another non-default action"/>

    <button type="submit" value="default action"/>
</form> 
```

并重构为：

```
<form>
    <input/>

    <button style="overflow: visible !important; height: 0 !important; width: 0 !important; margin: 0 !important; border: 0 !important; padding: 0 !important; display: block !important;" type="submit" value="default action"/>

    <button type="submit" value="some non-default action"/>
    <button type="submit" value="another non-default action"/>
    <button type="submit" value="yet another non-default action"/>
    <button type="submit" value="still another non-default action"/>

    <button type="submit" value="default action"/>
</form> 
```

由于[W3C](https://en.wikipedia.org/wiki/World_Wide_Web_Consortium)规范表明多个提交按钮是有效的，但忽略了有关用户代理应如何处理它们的指导，因此浏览器制造商可以按照他们认为合适的方式实现。我发现他们要么提交表单中的第一个提交按钮，要么在当前具有焦点的表单字段之后提交下一个提交按钮。

不幸的是，只需添加一种**显示样式：无；**将不起作用，因为 W3C 规范表明任何隐藏元素都应从用户交互中排除。所以把它藏起来吧！

以上是我最终投入生产的解决方案示例。按下回车键会触发默认表单提交，这是预期的行为，即使存在其他非默认值并且在 DOM 中的默认提交按钮之前也是如此。鼠标/键盘与显式用户输入交互的奖励，同时避免 JavaScript 处理程序。

注意：在表单中切换不会显示任何视觉元素的焦点，但仍会导致选择不可见按钮。为避免此问题，只需相应地设置 tabindex 属性并在不可见的提交按钮上省略 tabindex 属性。虽然将这些样式提升为 !important 似乎不合适，但它们*应该*防止任何框架或现有按钮样式干扰此修复。此外，那些内联样式绝对是糟糕的形式，但我们在这里证明概念......而不是编写生产代码。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-06-04T19:01:29.263

现在可以使用[Flexbox](http://caniuse.com/#feat=flexbox)解决这个问题：

### HTML

```
<form>
    <h1>My Form</h1>
    <label for="text">Input:</label>
    <input type="text" name="text" id="text"/>

    <!-- Put the elements in reverse order -->
    <div class="form-actions">
        <button>Ok</button> <!-- Our default action is first -->
        <button>Cancel</button>
    </div>
</form> 
```

### CSS

```
.form-actions {
    display: flex;
    flex-direction: row-reverse; /* Reverse the elements inside */
} 
```

### 解释

使用 Flexbox，我们还可以`display: flex`使用 CSS 规则来反转容器中元素的顺序：`flex-direction: row-reverse`. 这不需要 CSS 或隐藏元素。对于不支持 Flexbox 的旧浏览器，它们仍然可以获得可行的解决方案，但元素不会被反转。

### 演示

[http://codepen.io/Godwin/pen/rLVKjm](http://codepen.io/Godwin/pen/rLVKjm)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2011-02-16T14:08:47.730

如果有人想用 jQuery 来做，我认为这篇文章会有所帮助：

[http://greatwebguy.com/programming/dom/default-html-button-submit-on-enter-with-jquery/](http://greatwebguy.com/programming/dom/default-html-button-submit-on-enter-with-jquery/)

基本解决方案是：

```
$(function() {
    $("form input").keypress(function (e) {
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
        $('input[type=submit].default').click();
        return false;
    }
    else {
        return true;
    }
    });
}); 
```

我喜欢的另一个是：

```
jQuery(document).ready(function() {
    $("form input, form select").live('keypress', function (e) {
        if ($(this).parents('form').find('button[type=submit].default, input[type=submit].default').length <= 0)
            return true;

        if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
            $(this).parents('form').find('button[type=submit].default, input[type=submit].default').click();
            return false;
        }
        else {
            return true;
        }
    });
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-03-17T13:06:21.393

我有一个带有 11 个提交按钮的表单，当用户按下 时，它总是使用第一个提交按钮`Enter`。我在其他地方读到，在一个表单上拥有多个提交按钮并不是一个好主意（不好的做法），而做到这一点的最佳方法是将您想要的按钮作为默认按钮，作为表单上唯一的提交按钮。其他按钮应该变成“TYPE=BUTTON”，并添加一个 onClick 事件，在 JavaScript 中调用您自己的提交例程。像这样的东西：

```
<SCRIPT Language="JavaScript">
function validform()
{
  // Do whatever you need to validate the form, and return true or false accordingly
}

function mjsubmit()
{
  if (validform()) { document.form1.submit(); return true;}
  return false;
}
</SCRIPT>
<INPUT TYPE=BUTTON NAME="button1" VALUE="button1" onClick="document.form1.submitvalue='button1'; return mjsubmit();">
<INPUT TYPE=BUTTON NAME="button2" VALUE="button2" onClick="document.form1.submitvalue='button2'; return mjsubmit();">
<INPUT TYPE=SUBMIT NAME="button3" VALUE="button3" onClick="document.form1.submitvalue='button3'; return validform();">
<INPUT TYPE=BUTTON NAME="button4" VALUE="button4" onClick="document.form1.submitvalue='button4'; return mjsubmit();"> 
```

这里， button3 是默认设置，尽管您以编程方式提交带有其他按钮的表单，但*mjsubmit*例程会验证它们。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-16T12:08:39.297

我在同一个问题上苦苦挣扎，因为我在表单中间有一个提交按钮，它将提交重定向到另一个页面，如下所示：

```
<button type="submit" onclick="this.form.action = '#another_page'">More</button> 
```

当用户按下该`Enter`键时，该按钮被点击而不是另一个提交按钮。

因此，我通过创建一个具有多个提交按钮和不同可见性选项的表单以及一个提醒单击了哪个按钮的 onclick 事件进行了一些原始测试：[https ://jsfiddle.net/aqfy51om/1/](https://jsfiddle.net/aqfy51om/1/)

我用于测试的浏览器和操作系统：

### 视窗

*   谷歌浏览器 43（来谷歌搜索：D）
*   火狐浏览器 38
*   [互联网浏览器 11](https://en.wikipedia.org/wiki/Internet_Explorer_11#Internet_Explorer_11)
*   [歌剧](https://en.wikipedia.org/wiki/Opera_%28web_browser%29)30.0

### 操作系统

*   谷歌浏览器 43
*   [Safari](https://en.wikipedia.org/wiki/Safari_%28web_browser%29) 7.1.6

尽管应用了可见性选项，但这些浏览器中的大多数都单击了第一个按钮，但**Internet Explorer 和 Safari 除外，**后者单击了第三个按钮，该按钮在“隐藏”容器中“可见”：

```
<div style="width: 0; height: 0; overflow: hidden;">
    <button type="submit" class="btn btn-default" onclick="alert('Hidden submit button #3 was clicked');">Hidden submit button #3</button>
</div> 
```

因此，我将自己使用的建议是：

如果您的表单有多个具有不同含义的提交按钮，则在表单开头包含一个具有默认操作的提交按钮，即：

1.  完全可见
2.  用容器包裹`style="width: 0; height: 0; overflow: hidden;"`

另一种选择可能是偏移按钮（仍然在 from 的开头）`style="position: absolute; left: -9999px; top: -9999px;"`，刚刚在 Internet Explorer 中尝试过 - 有效，但我不知道它还能搞砸什么，例如打印..

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-29T14:15:09.423

从您的评论中：

> 结果是，如果您有多个表单提交到同一个脚本，则不能依靠提交按钮来区分它们。

我将一个`<input type="hidden" value="form_name" />`放入每个表格中。

如果使用 JavaScript 提交：将提交事件添加到表单，而不是单击事件到其按钮。精明的用户不会经常触摸鼠标。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-04-24T21:22:59.870

当您在单个表单中有多个提交按钮并且用户按下`Enter`键以从文本字段提交表单时，此代码通过从按键事件调用表单上的提交事件来覆盖默认功能。这是该代码：

```
$('form input').keypress(function(e){

    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)){
        $(e.target).closest('form').submit(); return false;
    }
    else
        return true;
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-05T18:05:24.430

奇怪的是，`Enter`无论是否可见，第一个按钮总是转到第一个按钮，例如使用 jQuery `show/hide()`。添加属性`.attr('disabled', 'disabled')`阻止`Enter`完全接收提交按钮。例如，在记录对话框中调整“*插入/编辑+删除”按钮的可见性时，这是一个问题。*我发现将*Edit放在**Insert*前面不那么生硬和简单：

```
<button type="submit" name="action" value="update">Update</button>
<button type="submit" name="action" value="insert">Insert</button>
<button type="submit" name="action" value="delete">Delete</button> 
```

并使用 JavaScript 代码：

```
$("#formId button[type='submit'][name='action'][value!='insert']").hide().attr('disabled', 'disabled');
$("#formId button[type='submit'][name='action'][value='insert']").show().removeAttr('disabled'); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-12-06T11:33:58.290

```
<form onsubmit="alert('submit');return false;">
    <input name="username">
    <input name="password" type="password">
    <button onclick="if(document.activeElement === this){alert('button 1');}else{default_submit.click();}return false;">button 1</button>
    <button onclick="if(document.activeElement === this){alert('button 2');}else{default_submit.click();}return false;">button 2</button>
    <input id="default_submit" type="submit">
</form> 
```

如果您`Enter`从文本输入中按下，则按钮将不会成为焦点。然后我们忽略这个点击，而是点击默认提交，但是如果你用鼠标点击按钮，它会被聚焦，然后我们应用这个点击。

演示：[https ://codepen.io/remon-reffat/pen/mdRaXbp](https://codepen.io/remon-reffat/pen/mdRaXbp)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-04-07T08:29:08.167

我的食谱：

```
<form>
    <input type=hidden name=action value=login> <!-- The magic! -->

    <input type=text name=email>
    <input type=text name=password>

    <input type=submit name=action value=login>
    <input type=submit name=action value="forgot password">
</form> 
```

如果没有“点击”按钮，它将发送默认隐藏字段。

如果单击一个，则它具有首选项并传递其值。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-28T14:31:55.200

我使用的另一种解决方案是在表单中只有一个按钮，并伪造其他按钮。

这是一个例子：

```
<form>
  <label for="amount">Amount of items</label>
  <input id="amount" type="text" name="amount" />
  <span id="checkStock" class="buttonish">Check stock</span>
  <button type="submit" name="action" value="order">Place order</button>
</form> 
```

然后，我将 span 元素设置为看起来像一个按钮。JavaScript 侦听器会观察跨度并在单击后执行所需的操作。

它不一定适用于所有情况，但至少它很容易做到。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-11-27T22:18:19.763

从[HTML 4 规范](http://www.w3.org/TR/html401/interact/forms.html#successful-controls)：

> 如果一个表单包含多个提交按钮，只有激活的提交按钮是成功的。

这意味着如果有多个提交按钮并且没有激活（单击），则没有一个应该是成功的。

我认为这是有道理的：

想象一个带有多个提交按钮的巨大表单。顶部有一个“删除这条记录”按钮，然后是大量输入，底部有一个“更新这条记录”按钮。在表单底部的字段中点击的用户`Enter`永远不会怀疑他/她隐含地从顶部点击“删除此记录”。

因此，我认为使用用户未定义（单击）的第一个按钮或任何其他按钮不是一个好主意。尽管如此，浏览器当然会这样做。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-05-09T13:34:33.277

要确定按下回车键时按下的是哪个按钮，您可以用 标记它`type="submit"`，而其他按钮用 标记它们`type="button"`。例如：

```
<input type="button" value="Cancel" />
<input type="submit" value="Submit" /> 
```

[抱歉，在写这个答案时，我在考虑一般意义上的提交按钮。下面的答案不是关于多个`type="submit"`按钮，因为它只留下一个`type="submit"`并将另一个更改为`type="button"`。我将答案留在这里作为参考，以防有人可以改变`type`他们的形式。]

# sql - SQL 到 SOQL 的转换 (Salesforce.com SOQL)

> ID：925338
> 
> 赞同：2
> 
> 时间：2009-05-29T10:25:48.170
> 
> 标签：sql, salesforce, soql

有没有人为 Salesforce.com 对象做过 SQL 到 SOQL 的转换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-08-11T19:31:24.500

是的。

[ForceAmp](http://www.forceamp.com/)制作了一个名为[dbAmp](http://www.forceamp.com/dbamp.htm)的产品，它允许您将 Salesforce 添加为 MS SQL 中的链接服务器。

这使您可以直接对 SQL Server 数据库中的 Salesforce.com 数据执行查询，语法如下：

```
SELECT a.Id, a.Name, c.Name 
FROM Salesforce...Account a
LEFT JOIN Salesforce...Contact c ON (a.ID = c.ID)
WHERE a.Name LIKE '%, Inc.' 
```

本质上与 SOQL 相同

```
SELECT Id, Name, (SELECT Name From Contacts) FROM Account WHERE Name LIKE '%, Inc' 
```

也就是说，dbAmp 的最佳用例不是用 SQL 替换您的 SOQL，而是使用 TSQL 对您的 Salesforce.com 数据进行一些高级操作。不要将它用作避免学习 SOQL 的拐杖——SOQL 非常具有表现力和健壮性，在执行多对象查询时速度要快几个数量级，即使在我上面发布的简单示例中也是如此（3 秒对 3 分钟，并且数数...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T11:47:21.953

不。

如果您想要一个比这更有意义的答案（或“是”），那么您可能需要稍微扩展您的问题。您有具体问题吗？您是否正在寻找有关使用工具的意见？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-04-21T15:42:14.340

DBAmp 现在可以通过 OpenQuery 短语直接接受 SOQL

# firefox - Firefox 扩展：如何将用户选择的文本作为变量传递给 Javascript？

> ID：925340
> 
> 赞同：0
> 
> 时间：2009-05-29T10:26:34.050
> 
> 标签：firefox

在为 firefox 编写非常简单和基本的扩展时，如果我想处理用户选择的文本，我应该使用什么事件（我不知道这是否是正确的词）？

更准确地说：当用户选择一些文本时（例如按下 ALT 时），我想将此文本传递给函数，从网络上获取一些数据（基于选定的文本）并在弹出窗口一样的小气球中显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T10:37:25.167

请参阅此处获取当前选择： http: [//www.codetoad.com/javascript_get_selected_text.asp](http://www.codetoad.com/javascript_get_selected_text.asp)

本文档描述了如何注意到用户可能选择了某些内容：[http ://www.java2s.com/Code/JavaScript/HTML/CapturingaTextSelection.htm](http://www.java2s.com/Code/JavaScript/HTML/CapturingaTextSelection.htm)

# javascript - 在 HTML 控件中查找匹配的内部文本并使用 JavaScript 更改其格式

> ID：925342
> 
> 赞同：0
> 
> 时间：2009-05-29T10:27:02.567
> 
> 标签：javascript, html

我正在生成一个呈现链接按钮和标签列表的页面。现在我想要一个 javascript 来解析这些控件的内部文本，并在呈现带有链接按钮及其描述的网站列表时，像 Google 一样使用匹配的关键字将它们加粗。

我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T10:36:04.937

这应该让你开始：[http ://www.nsftools.com/misc/SearchAndHighlight.htm](http://www.nsftools.com/misc/SearchAndHighlight.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T10:51:18.603

要获取链接按钮和标签元素`getElementsByTagName`的集合，请使用 ，然后遍历集合并使用`innerHTML`属性访问其中的内容并匹配您的关键字。然后对于匹配的元素，将`style.fontweight`属性设置为粗体。

# regex - 不情愿的'有什么真正用处吗？在正则表达式中？

> ID：925347
> 
> 赞同：3
> 
> 时间：2009-05-29T10:29:15.013
> 
> 标签：regex

不情愿的量词可能非常有用。但是，我想不出 .`??`的不情愿版本的任何用途`?`。有人可以给我一个例子，还是只是因为其他量词也有不情愿的版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T11:37:41.037

`??`这是一个使用量词的示例正则表达式：

```
(?:\w+-??|-\w+) 
```

它匹配后跟连字符或前接连字符的每个单词。`foo-bar`然后它会匹配`foo`and而`-bar`不是`foo-`and `bar`as `(?:\w+-?|-\w+)`would。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T10:42:50.913

一个例子 - 在实践中可能没有那么有用，但可以让您了解如何使用它（请原谅 c# 语法）：

```
Match username = Regex.Match(input, @"^([\w\W]*?)(@[\w\W]+\.[\w\W])??$"); 
```

现在，这将做的是用户在输入表单中输入他的用户名或电子邮件地址，如果输入了电子邮件地址，正则表达式只会抓取`@`. 这样，不止一种类型的输入是可以的，无论是否`@domain.com`提供了，您仍然可以从中获得相同的数据。

*免责声明：这**不是**我将按原样用于上述目的的正则表达式 - 它也匹配太多非电子邮件地址。但是，嘿，这是一个演示...... ;)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T11:24:38.287

如果您想在不同的捕获组中进行某些操作，则可能是这样。我不记得曾经看过它，也想不出一个不会高度做作的例子。

# .net - 打印成pdf

> ID：925348
> 
> 赞同：4
> 
> 时间：2009-05-29T10:30:03.137
> 
> 标签：.net, delphi, pdf, printing

现有系统有很多报告。使用免费的pdf打印机，如dopdf或cutepdf，用户可以打开报告，选择pdf打印机，输入文件名并将报告保存为pdf文件。这似乎有点乏味

只需单击一个按钮，就可以将报告直接保存为 pdf 文件。不幸的是，报告工具组件没有 pdf 导出功能。. 有没有办法使用第三方组件以编程方式执行此功能。

打印应该是静默的，这样就不会要求用户输入文件名。单击报告 1 时会生成一个名为 c:\1.pdf 的文件。像这样 ActivatePdfPrinter(c:\1.pdf); 打印报告；关闭PDF打印机；

或任何其他方法。

我使用 delphi，但如果您建议使用其他编程语言的任何其他工具，那么我可以朝正确的方向搜索。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-29T13:08:08.653

免费的开源[PDFCreator](http://sourceforge.net/projects/pdfcreator/)可以用作虚拟打印机，但也可以通过 COM 使用。默认设置甚至包括 COM 示例。

您可以在这里查看 SourceForge SVN 存储库中的 COM 示例：http: [//pdfcreator.svn.sourceforge.net/viewvc/pdfcreator/trunk/COM/](http://pdfcreator.svn.sourceforge.net/viewvc/pdfcreator/trunk/COM/)

Delphi 和 ActiveX 相处得很好，所以你应该不会有太多麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T11:45:45.200

安装 Adob​​e Acrobat Professional 并选择“Adobe PDF”作为打印机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-20T13:43:33.977

Win2PDF 10 可以完成所有这些以及更多。

查看注册表功能：

[https://www.win2pdf.com/doc/registryoverview.html](https://www.win2pdf.com/doc/registryoverview.html)

功能对比图：

[https://www.win2pdf.com/features.html#Win2PDF-Product-Comparison](https://www.win2pdf.com/features.html#Win2PDF-Product-Comparison)

我在家里和工作的工作站上使用 Win2PDF Pro 至少 20 年了；并且一直认为它可靠且快速。我刚刚下载了最新版本的服务包，并将在下次重新启动时更新我的​​安装。享受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T11:41:30.297

跟进 Stijn Sanders 的回复： Digital Metaphors 的最新版 ReportBuilder 现在包括原生 PDF 导出，以及 PDF 的“静默”保存，以及报告的电子邮件发送。但是，您是正确的，因为您必须将所有报表转换为 ReportBuilder。不过，这可能值得研究，具体取决于项目中报告的复杂性和数量。我们从 Rave Reports 转换了我们的，并且从未回头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T11:15:38.163

您没有说明您是如何生成报告的，但[Gnostice](http://www.gnostice.com)有许多可能对您有所帮助的工具。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-01-10T18:13:34.893

[Win2PDF](http://www.win2pdf.com)也有一个注册表 API，[可以在没有用户交互的情况下打印到 PDF](http://www.win2pdf.com/doc/specifyinganoutputfilename.htm)。在 Delphi 中，您只需将“PDFFileName”注册表项设置为 PDF 文件，然后打印到 Win2PDF 打印机。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-29T12:41:25.103

Anna，在您提到您使用的是旧版本的 ReportBuilder 的评论中，您是否看过 [Waler](http://www.waler.com/) TExtraDevices 组件？我手头没有它，但我似乎记得那天我们用它来将输出从 ReportBuilder 获取到 PDF，并且由于它使 ReportBuilder 认为它是一个文本设备的方式，你可以在没有任何预览或最终用户的交互。

话虽如此，您正在寻找一种适用于 QuickReport 和 Excel 的通用方法。我真的认为您最终会使用某种“PDF 打印机”并将您的报告强制发送到该“指定打印机”。您也许可以设置 PDF Factory，以便它从文档标题等中获取输出文件名 - 但我确实认为无论您多么努力，您总是会有一些用户交互。:-(

请让我们知道您在做什么，因为这是我自己遇到的问题，并且从未找到非常令人满意的解决方案。我很想看看你选择做什么！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-29T11:02:45.367

Pragnaan 有一个用于 ReportBuilder 的 PDF 导出设备： [Report Builder Export Devices](http://www.rarefind.com/rbpro/index.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-29T12:00:03.440

我使用[PDFFactory](http://fineprint.com/pdf/)。是一种类似于其他软件的软件，其工作方式类似于虚拟打印机。不是很贵。特殊之处在于您可以控制（使用 Windows 注册表）一些参数来打印任何文档而无需用户干预。

我在我的 Delphi 应用程序中使用它。

1.  选择默认打印机 (PDFFactory)
2.  将 FileName,... 写入注册表项
3.  发送打印。

用户不应该写任何东西，也不应该查看任何配置窗口。

# asp.net - 有没有类似蚂蚁分析器的免费工具？

> ID：925349
> 
> 赞同：18
> 
> 时间：2009-05-29T10:30:12.593
> 
> 标签：asp.net, profiler

我想测试一个 asp.net Web 应用程序。什么是最好的免费图形工具？

虽然类似于 Ants 的东西会非常好，但如果有一个工具甚至可以包含通过网络发送的数据的信息，那就太好了。像蚂蚁+提琴手。我希望我不要要求太多:)

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-29T10:38:01.093

像[Nprof](http://nprof.sourceforge.net)这样的开源软件很好，但似乎已经过时且没有维护。

[Nprofiler](http://sourceforge.net/projects/nprofiler/)也是如此。

[EQATEC](http://www.eqatec.com/tools/profiler)有一个很有前途的产品，但我还没有花足够的时间使用它。也许下一次迭代。=)

我也渴望看到其他答案。

编辑：最好看看这个[其他的stackoverflow问题](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T10:39:00.233

我也在寻找类似的东西。 [这篇](http://www.codeproject.com/KB/dotnet/dotnetprofiler.aspx)关于[codeproject](http://www.codeproject.com)的文章讨论了创建编译器！！！

# c# - 在 C# 中缓存二进制文件

> ID：925356
> 
> 赞同：7
> 
> 时间：2009-05-29T10:31:49.470
> 
> 标签：c#, file, caching, filestream

是否可以在 .NET 中缓存二进制文件并对缓存文件执行正常文件操作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-29T10:44:57.943

这样做的方法是将整个内容从 中读取`FileStream`到一个`MemoryStream`对象中，然后使用该对象进行 I/O。两种类型都继承自`Stream`，因此用法实际上是相同的。

这是一个例子：

```
private MemoryStream cachedStream;

public void CacheFile(string fileName)
{
    cachedStream = new MemoryStream(File.ReadAllBytes(fileName));
} 
```

`CacheFile`因此，当您想要缓存给定文件时，只需调用该方法一次，然后在代码中的其他任何地方`cachedStream`用于读取。（实际文件将在其内容被缓存后立即关闭。）唯一要记住的是`cachedStream`在您完成后处理它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-29T10:42:54.017

任何现代操作系统都内置了缓存系统，因此实际上，无论何时与文件交互，您都是在与文件的内存缓存进行交互。

在应用自定义缓存之前，您需要问一个重要的问题：当底层文件更改时会发生什么，所以我的缓存副本变得无效？

如果允许更改缓存的副本，并且需要将更改保存回基础文件，您可能会使事情变得更加复杂。

如果文件很小，那么`MemoryStream`按照另一个答案中的建议使用会更简单。

如果您需要将更改保存回文件，您可以编写一个将所有内容转发到的包装器类`MemoryStream`，但另外还有一个 IsDirty 属性，每当执行写入操作时它设置为 true。然后你可以有一些管理代码在你选择时启动（在一些更大的事务结束时？），检查`(IsDirty == true)`新版本并将其保存到磁盘。这称为“延迟写入”缓存，因为修改是在内存中进行的，并且直到稍后的某个时间才会真正保存。

如果您真的想使事情复杂化，或者您有一个非常大的文件，您可以实现自己的分页，您可以在其中选择一个缓冲区大小（可能是 1 MB？）并保存少量`byte[]`固定大小的页面。这一次，每个页面都有一个脏标志。您将实现 Stream 方法，以便它们向调用者隐藏详细信息，并在必要时拉入（或丢弃）页面缓冲区。

最后，如果您想要更轻松的生活，请尝试：

[http://www.microsoft.com/Sqlserver/2005/en/us/compact.aspx](http://www.microsoft.com/Sqlserver/2005/en/us/compact.aspx)

它允许您使用与 SQL Server 相同的 SQL 引擎，但在文件上，一切都发生在您的进程内，而不是通过外部 RDBMS 服务器。这可能会为您提供一种更简单的查询和更新文件的方法，并避免需要大量手写的持久性代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-29T10:43:36.153

好吧，您当然可以将文件读入 byte[] 数组并开始处理它。如果您想使用流，您可以将 FileStream 复制到 MemoryStream 并开始使用它 - 例如：

```
public static void CopyStream( Stream input, Stream output )
{
        var buffer = new byte[32768];
        int readBytes;
        while( ( readBytes = input.Read( buffer, 0, buffer.Length ) ) > 0 )
        {
                output.Write( buffer, 0, readBytes );
        }
} 
```

如果您关心性能 - 好吧，通常不同文件访问方法的内置机制就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T10:53:58.550

我不知道你到底在做什么，但我提供了这个建议（根据你在做什么，这可能可行也可能不可行）：

与其只缓存文件的内容，为什么不把文件的内容放在一个很好的强类型项目集合中，然后缓存呢？由于不涉及解析，它可能会使搜索项目更容易、更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T11:03:47.500

[Lucene](http://incubator.apache.org/lucene.net/ "Lucene 主页")中有一个非常优雅的缓存系统，它可以将磁盘中的字节缓存到内存中并智能地更新存储等。您可能想查看该代码以了解它们是如何做到的。您可能还想阅读 Microsoft SQL Server 数据存储层 - 因为 MSSQL 团队非常愿意了解一些更重要的实现细节。

# c# - Response.redirect on Popup 转到主页

> ID：925357
> 
> 赞同：0
> 
> 时间：2009-05-29T10:31:58.360
> 
> 标签：c#, asp.net, modalpopups

当我在父窗口上选择一个链接时，我会打开一个弹出页面。如果弹出的页面加载处理程序发生异常，则错误应该转到父窗口，而不是弹出页面。如果弹出页面中没有发生异常，它将仅加载弹出页面的内容。

一条错误消息来自一个 Asp 页面。

弹出页面的catch块中的代码：

```
catch(Exception ex)
{
    Response.Redirect("");
    Response.End();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T10:45:30.533

您不能使用`Response.Redirect`来决定页面的加载位置。这是在请求发送到服务器之前决定的，所以当服务器代码开始运行时，改变页面的去向已经太晚了。

如果您想关闭弹出窗口并在父窗口中加载页面，则必须将 Javascript 代码写入执行此操作的弹出窗口。

例子：

```
catch (Exception ex) {
   Response.Write(
      "<html><head><title></title></head><body>" +
      "<script>" +
      "window.opener.location.href='/ErrorPage.aspx?message=" + Server.UrlEncode(ex.Message) + "';" +
      "window.close();" +
      "</script>" +
      "</body></html>"
   );
   Response.End();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T10:47:24.367

如果您正在处理 catch 块中的错误，您可以做什么 - 声明一个 javascript 变量并在该变量中设置错误文本。

```
var errorDescription = ""; //Will hold the error description (in .aspx page). 
```

如果发生错误，请在`catch`块中执行此操作 -

```
try
{
    //Code with error
}
catch(Exception ex)
{
    ScriptManager.RegisterStartupScript(this, this.GetType(), "ErrorVariable", string.Format("errorDescription = '{0}'; CloseWindow();", ex.Message), true);
} 
```

上面的代码将做什么 - 设置错误描述，并`CloseWindow()`在您的 aspx 页面上调用该函数。该函数将包含以下代码行 -

```
function CloseWindow() {
    window.parent.window.SetError(errorDescription);
    self.close();
} 
```

该函数将调用父窗口的函数并自行关闭。该`SetError()`函数可以以您喜欢的任何方式显示错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T10:49:22.240

我认为使用 javascript 弹出窗口并通过 AJAX 进行请求而不是使用新窗口和整页请求周期会是更好的用户体验。在 javascript 中执行此操作使您能够将所有交互保持在同一页面上，并使在“主”界面中获取错误消息变得微不足道。在许多其他方法中，您可以使用[jQuery](http://jquery.com)来提供 AJAX 接口和[对话框](http://docs.jquery.com/UI/API/1.7/Dialog)插件来管理模式对话框。

# java - 如何获取休眠查询结果作为列表或哈希图的关联数组

> ID：925363
> 
> 赞同：17
> 
> 时间：2009-05-29T10:34:34.253
> 
> 标签：java, hibernate, struts

我正在用 struts 2 和 hibernate 3 开发一个应用程序。

我有 3 张桌子

1.  检查
2.  考察团
3.  时间线

`Inspection`与 相关联并且`InspectionMission`与`InspectionMission`相关联`Timeline`。

现在我有以下问题。我在 HQL 中编写了以下查询

```
public List getQuartewiseInspectionList(){

   Session session = HibernateUtil.getSessionFactory().getCurrentSession();

   Query q = session.createQuery(
                "select count(i.inspectionId) as tot_inspections,t.year,t.quarter" +
                " From Inspection as i " +
                " inner join i.inspectionMission as im inner join im.timeline as t" +
                " GROUP by t.year,t.quarter");

   return q.list();

} 
```

我想获取结果如下

```
result[0][tot_inspections] = "6"
result[0][year] = "2009";
result[0][quarter] = "Q2";

result[1][tot_inspections] = "3"
result[1][year] = "2009";
result[1][quarter] = "Q3"; 
```

依此类推，这样我就可以在jsp struts中显示如下：

在 JSP 中，我编写了以下代码

```
<table border="1">

   <s:iterator value="result" status="status">
       <tr class="<s:if test="#status.even">even</s:if><s:else>odd</s:else>">
             <td class="nowrap"><s:property value="tot_inspections" /></td>
             <td class="nowrap"><s:property value="year" /></td>
             <td class="nowrap"><s:property value="quarter" /></td>
       </tr>         
    </s:iterator>
</table> 
```

这里有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-05-29T10:43:03.173

您必须使用“新地图”语法[（Hibernate Reference 第 14.6 段）](https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#hql-select-clause)

```
select new map(count(i.inspectionId) as tot_inspections, t.year as year, t.quarter as quarter) from ... 
```

查询的其余部分是相同的。这将返回一个映射列表，其中键是“列”的别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T12:15:36.203

另一种解决方案是定义一个仅用于显示这些结果的数据对象，并让 Hibernate 动态创建这些结果的实例。这个类只需要一个匹配的构造函数。

示例类（getter 和字段省略）

```
public class InspectionCount() {
    // fields
    public InspectionCount(int count, int year, int quarter) {
        // initialize instance
    }
    // getters
} 
```

然后查询将看起来

```
select new InspectionCount(count(i.inspectionId), t.year, t.quarter)
        from Inspection as i
        inner join i.inspectionMission as im inner join im.timeline as t
        group by t.year,t.quarter 
```

结果你会得到一个`List`s `InspectionCount`。

# programming-languages - 什么是“thunk”，在 Scheme 或一般情况下使用？

> ID：925365
> 
> 赞同：66
> 
> 时间：2009-05-29T10:35:25.593
> 
> 标签：programming-languages, functional-programming, scheme

我在与 Scheme 和类似领域相关的代码和文档中的很多地方都遇到了“thunk”这个词。我猜它是一个过程的通用名称，它有一个形式参数。那是对的吗？如果是的话，还有更多吗？如果没有，请问？

例如。在[SRFI 18](http://srfi.schemers.org/srfi-18/srfi-18.html)中，在“程序”部分。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-05-29T11:10:52.277

这真的很简单。当您在程序中进行一些计算时，例如将 3 加到 5，然后创建它的 thunk 意味着*不*直接计算它，而是创建一个具有零参数的函数，该函数将在需要实际值时计算它。

```
(let ((foo (+ 3 5))) ; the calculation is performed directly, foo is 8
  ;; some other things
  (display foo)) ; foo is evaluated to 8 and printed

(let ((foo (lambda () (+ 3 5)))) ; the calculation is delayed, foo is a
                                 ; function that will perform it when needed
  ;; some other things
  (display (foo))) ; foo is evaluated as a function, returns 8 which is printed 
```

在第二种情况下，`foo`将被称为 thunk。

惰性语言模糊了将变量绑定到值和创建函数以返回该值之间的界限，因此编写类似于上面第一种形式的东西实际上被视为在幕后处理第二种形式。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2009-05-29T11:23:46.993

“thunk”是没有正式参数的过程对象，例如来自您的 SRFI 链接：

```
(lambda () (write '(b1))) 
```

b1 变量绑定在封闭块中，这为我们提供了关于“thunk”这个词的词源的线索，它依赖于一个关于糟糕语法的笑话。

零参数函数无法根据调用它的参数来改变其行为，因为它没有参数。因此，函数的整个操作都设置好了——它只是等待执行。计算机方面不再需要“思考”，所有的“思考”都已经完成——动作完全“突突”通过。

在这个 SRFI 的上下文中，这就是一个“thunk”——一个没有参数的过程。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-05-29T10:36:19.070

[维基百科](http://en.wikipedia.org/wiki/Thunk)有以下答案：

> 在函数式编程中，“thunk”是空函数的另一个名称——一个不带参数的函数。Thunk 在严格的语言中经常被用作模拟惰性求值的一种手段。thunk 本身会延迟函数参数的计算，并且函数会强制 thunk 获取实际值。在这种情况下，thunk 通常称为暂停或（在 Scheme 中）承诺。

[在 Scheme 中](https://web.archive.org/web/20090622072128/http://www.ibm.com/developerworks/linux/library/l-lazyprog.html)添加惰性求值示例。在这里，promise 是 thunk 的另一种说法。

# javascript - 通过 HTML 为 Silverlight 添加 onLoaded 处理程序

> ID：925366
> 
> 赞同：0
> 
> 时间：2009-05-29T10:35:31.177
> 
> 标签：javascript, silverlight

我不是 Silverlight 2.0 的专业人士，但对于那些专业人士来说，是否可以通过 javascript 在 HTML 文件中为 Silverlight 主机添加事件处理程序。简而言之，是否可以将参数添加到像这样的对象标签

```
<param name="onLoaded" value="myjavascripthanderforloaded" />
<param name="onMouseEnter" value="myjavascipthandlerformouse" /> 
```

我需要通过我的 javascript 将一些 XAML 内容添加到此 Silverlight 应用程序中。我无权访问 XAML 代码，我只有编译好的 XAP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:06:42.227

有点晚了，但我希望它仍然可以帮助你。

我能够通过使用 Javascript.js 文件动态创建 Silverlight 对象来添加处理程序，请查看以下链接：http: [//msdn.microsoft.com/en-us/library/cc265155%28v=vs.95 %29](http://msdn.microsoft.com/en-us/library/cc265155%28v=vs.95%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-30T14:58:28.207

我不确定您是否可以从 silverlight 插件之外注册任何事件（如果这是您想要的，并且如果我理解你的话......）。但是你可以传递参数......在这里阅读更多......

[http://jesseliberty.com/2008/12/26/passing-parameters-into-silverlight-applications/](http://jesseliberty.com/2008/12/26/passing-parameters-into-silverlight-applications/)

[http://blogger.forgottenskies.com/?p=112](http://blogger.forgottenskies.com/?p=112)

# java - 使用 Java 生成证书、公钥和私钥

> ID：925377
> 
> 赞同：17
> 
> 时间：2009-05-29T10:36:48.023
> 
> 标签：java, ssl, openssl, keytool

我正在寻找一个 java 库或代码来即时生成证书、公钥和私钥，而无需使用第三方程序（例如 openssl）。

我认为正在做 keytool+openssl 但来自 Java 代码的东西。

考虑一个使用 ssl 和客户端身份验证保护的基于 java servlet 的 Web 应用程序。我希望 servlet 容器仅使用 Java 代码根据请求生成客户端证书（例如 pkcs12 格式）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2010-02-25T05:34:41.463

您可以使用一对或密钥在 java 中动态生成证书。（公钥、私钥）。以 BigInteger 格式获取这些密钥并检查以下代码以生成证书。

```
RSAPrivateKeySpec serPrivateSpec = new RSAPrivateKeySpec(
    new BigInteger(val of pub key), new BigInteger(val of pri key));
fact = KeyFactory.getInstance("RSA");
PrivateKey serverPrivateKey = fact.generatePrivate(serPrivateSpec);

RSAPublicKeySpec serPublicSpec = new RSAPublicKeySpec(
    new BigInteger(agentCL.getSerPubMod()), new BigInteger(agentCL.getSerPubExp()));
PublicKey serverPublicKey = fact.generatePublic(serPublicSpec);

keyStore = KeyStore.getInstance(IMXAgentCL.STORE_TYPE);
keyStore.load(null, SOMEPWD.toCharArray());

Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

X509Certificate[] serverChain = new X509Certificate[1];
X509V3CertificateGenerator serverCertGen = new X509V3CertificateGenerator();
X500Principal serverSubjectName = new X500Principal("CN=OrganizationName");
serverCertGen.setSerialNumber(new BigInteger("123456789"));
// X509Certificate caCert=null;
serverCertGen.setIssuerDN(somename);
serverCertGen.setNotBefore(new Date());
serverCertGen.setNotAfter(new Date());
serverCertGen.setSubjectDN(somename);
serverCertGen.setPublicKey(serverPublicKey);
serverCertGen.setSignatureAlgorithm("MD5WithRSA");
// certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, false,new
// AuthorityKeyIdentifierStructure(caCert));
serverCertGen.addExtension(X509Extensions.SubjectKeyIdentifier, false,
    new SubjectKeyIdentifierStructure(serverPublicKey));
serverChain[0] = serverCertGen.generateX509Certificate(serverPrivateKey, "BC"); // note: private key of CA

keyStore.setEntry("xyz",
    new KeyStore.PrivateKeyEntry(serverPrivateKey, serverChain),
    new KeyStore.PasswordProtection("".toCharArray())); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-29T11:29:34.103

**旧版警告开始**：

*   此代码仅设置**CommonName/CN/Subject**。
*   现在正确的地方是**SubjectAltName**。

从[Chrome 弃用主题 CN 匹配](https://textslashplain.com/2017/03/10/chrome-deprecates-subject-cn-matching/)：

> Chrome 58 将要求证书在 SubjectAltName 字段中指定它们应用的主机名；主题字段中的值将被忽略。”

**旧版警告结束**

```
import java.io.FileOutputStream;
import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.cert.X509Certificate;
import java.util.Date;

import sun.security.x509.CertAndKeyGen;
import sun.security.x509.X500Name;

public class UseKeyTool {

    private static final int keysize = 1024;
    private static final String commonName = "www.test.de";
    private static final String organizationalUnit = "IT";
    private static final String organization = "test";
    private static final String city = "test";
    private static final String state = "test";
    private static final String country = "DE";
    private static final long validity = 1096; // 3 years
    private static final String alias = "tomcat";
    private static final char[] keyPass = "changeit".toCharArray();

    // copied most ideas from sun.security.tools.KeyTool.java

    @SuppressWarnings("restriction")
    public static void main(String[] args) throws Exception {

        KeyStore keyStore = KeyStore.getInstance("JKS");
        keyStore.load(null, null);

        CertAndKeyGen keypair = new CertAndKeyGen("RSA", "SHA1WithRSA", null);

        X500Name x500Name = new X500Name(commonName, organizationalUnit, organization, city, state, country);

        keypair.generate(keysize);
        PrivateKey privKey = keypair.getPrivateKey();

        X509Certificate[] chain = new X509Certificate[1];

        chain[0] = keypair.getSelfCertificate(x500Name, new Date(), (long) validity * 24 * 60 * 60);

        keyStore.setKeyEntry(alias, privKey, keyPass, chain);

        keyStore.store(new FileOutputStream(".keystore"), keyPass);

    }
} 
```

# nhibernate - 流畅的nhibernate使用引用映射组件

> ID：925401
> 
> 赞同：1
> 
> 时间：2009-05-29T10:45:39.377
> 
> 标签：nhibernate, fluent-nhibernate

这可能吗...

```
MessageMap()
{
    Id(x => x.Id);    
    HasMany(x => x.Folders)
                    .Component(c =>
                               {
                                   c.Map(x => x.Name);
                                   c.References(x => x.User);
                               })
                    .Cascade.AllDeleteOrphan()
                    .Access.AsCamelCaseField(Prefix.Underscore);
}

public class Message
{
    public virtual int Id {get; protected set;}
    public virtual ICollection<Folder> Folders{get; protected set;}
}

public class Folder
{
    public virtual string Name{get;set;}
    public virtual User User{get;set;}
} 
```

通过上面的映射，我得到以下异常......

```
System.IndexOutOfRangeException: Index was outside the bounds of the array.
[IndexOutOfRangeException: Index was outside the bounds of the array.]
   NHibernate.Mapping.Column.set_Name(String value) +80
   NHibernate.Cfg.XmlHbmBinding.ClassBinder.BindColumns(XmlNode node, SimpleValue model, Boolean isNullable, Boolean autoColumn, String propertyPath) +626
   NHibernate.Cfg.XmlHbmBinding.ClassBinder.BindManyToOne(XmlNode node, ManyToOne model, String defaultColumnName, Boolean isNullable) +33
   NHibernate.Cfg.XmlHbmBinding.ClassBinder.BindComponent(XmlNode node, Component model, Type reflectedClass, String className, String path, Boolean isNullable) +987
   NHibernate.Cfg.XmlHbmBinding.CollectionBinder.BindCollectionSecondPass(XmlNode node, Collection model, IDictionary`2 persistentClasses) +1659
   NHibernate.Cfg.XmlHbmBinding.<>c__DisplayClassd.<AddCollectionSecondPass>b__c(IDictionary`2 persistentClasses) +33
   NHibernate.Cfg.Configuration.SecondPassCompile() +118
   NHibernate.Cfg.Configuration.GenerateDropSchemaScript(Dialect dialect) +44
   NHibernate.Tool.hbm2ddl.SchemaExport..ctor(Configuration cfg, IDictionary`2 connectionProperties) +53
   NHibernate.Tool.hbm2ddl.SchemaExport..ctor(Configuration cfg) +9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-25T14:12:22.957

问题在于`c.Map(x => x.Name)`和`c.References(x => x.User)`。lambdas 应该使用`c`，因为它是组件类。

```
Id(x => x.Id);    
HasMany(x => x.Folders)
                .Component(c =>
                           {
                               c.Map(c => c.Name);
                               c.References(c => c.User);
                           })
                .Cascade.AllDeleteOrphan()
                .Access.AsCamelCaseField(Prefix.Underscore); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T12:25:14.980

我认为您的组件应该映射到 Folder 对象的映射中。如所写，您似乎正在尝试向 Folders 集合添加一个没有意义的组件。我很惊讶这个编译。

# asp.net-mvc - 根据视图使用不同的 updatetargetid

> ID：925406
> 
> 赞同：4
> 
> 时间：2009-05-29T10:46:52.170
> 
> 标签：asp.net-mvc

我有一个网页，它显示 HTML 表格中的项目列表。列表上方是一个表单，它允许用户通过 AJAX（使用 Ajax.BeginForm）将新项目添加到列表中。当数据通过 AJAX 发布到控制器时，我将新项目添加到数据库后端并通过部分视图生成新表行，然后将其附加到现有表中。

但是，当添加新项目的表单包含错误时，我想将表单呈现回 Web 浏览器并显示它。

所以这里有一个问题：是否可以从控制器中指定 UpdateTargetId ？目前，我从控制器返回的任何视图都插入到同一目标中，但我想根据从控制器返回的任何视图更新不同的目标（即不同的 UpdateTargetId）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-07-13T13:46:23.680

我认为一种解决方法可能是使用 JSON 并在回调函数中检查结果。这就是它的样子：

```
function handleAjax(response) {

            var result = response.get_response().get_object();
            var isSuccess = result[0].isSuccess;
            if(isSuccess = "true")
            {
               $("#resultdiv").html(result[0].html);
            }
            else
            {
                $("#formdiv").html(result[0].html);
            } 

        } 
```

在您的操作中，您可以编写如下内容：

```
public ActionResult SaveRecord(Entity entity)
{
   if(ModelState.IsValid(){
   return Json(new{isSuccess = true, html = PartialView("RowViewName")}); 
   }
   else
  {
     return json (new{isSuccess = false, html = PartialView("FormViewName")})
  }
} 
```

我今天遇到了同样的问题，找不到这样做的“合法”方式。我认为这个简单的解决方法应该可以完成它。目前代码完全未经测试。

请阅读此[博客文章](http://zahidadeel.blogspot.com/2011/07/server-side-validation-with-aspnet-mvc.html)以获取替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T00:35:18.427

基本上，您想要的是在发出 ajax 请求时根据某些条件返回 2 个不同的结果。不幸的是，这在 AjaxForm 的实际实现中是不可能的。您只能更新表单的单个区域。

解决此问题的一种可能的解决方法是使用表单创建局部视图以更新并从控制器返回局部视图，然后在 onSuccess 事件上使用普通的旧 javascript 在表中创建新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-30T18:48:42.017

我认为另一个想法可以在服务器上重定向到另一个控制器/动作

```
RedirectToAction(new {controller="home", action="index", id=931,variable="abc"}); 
```

所以如果表单包含一个错误 RedirectToAction ...它甚至可以包含另一个 PartialView 可以放置在另一个 DIV 中...

只是一个想法...

# ruby - 我可以覆盖 test_helper.rb 中的 task :environment 来测试 rake 任务吗？

> ID：925407
> 
> 赞同：10
> 
> 时间：2009-05-29T10:47:13.493
> 
> 标签：ruby, testing, rake, bdd

我在 Rakefile 中有一系列 rake 任务，我想将其作为我的规范等的一部分进行测试。每个任务都以以下形式定义：

```
task :do_somthing => :environment do
  # Do something with the database here
end 
```

:environment 任务设置 ActiveRecord/DataMapper 数据库连接和类的位置。我没有将它用作 Rails 的一部分，但我有一系列测试，我喜欢将它们作为 BDD 的一部分运行。

此片段说明了我如何尝试测试 rake 任务。

```
def setup
  @rake = Rake::Application.new
  Rake.application = @rake
  load File.dirname(__FILE__) + '/../../tasks/do_something.rake'
end

should "import data" do
  @rake["do_something"].invoke
  assert something_in_the_database
end 
```

所以我的帮助请求 - 是否可以覆盖我的 test_helper.rb 文件中的 :environment 任务，以便我的 rake 测试与我的测试数据库交互，而不是生产？我尝试在帮助文件中重新定义任务，但这不起作用。

对解决方案的任何帮助都会很棒，因为过去一周我一直坚持这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-29T13:55:48.293

我对类似问题的“解决方案”是从我的 .rake 文件中提取所有逻辑并创建类来执行任务，只在 rake 文件中留下一行调用，我有信心不会太费力地进行测试。然后可以正常测试这些类。

我不知道这对维护一些影响深远的状态的一组复杂的相互依赖的任务有多好：可能不太好，但话又说回来，这很可能表明其他一些设计问题......

我很想知道我是否错过了更好的东西。

[编辑：这里](http://blog.innerewut.de/2009/3/2/what-to-put-into-rake-tasks)曾经有一篇博文，（a）说同样的话，（b）说得更好。看来他也是先说的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-20T00:02:05.320

我认为您正在寻找这一行： require(File.join(RAILS_ROOT, 'config', 'environment')) 这正是您在“task :environment”实现中找到的

我用它来使用 rspec 测试我的 rake 任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-11T18:13:30.130

当您运行测试时，正在加载的环境是测试。

> 所以你只与测试数据库交互。

所以我看不出有任何理由在 test_helper.rb 中覆盖你的 rake 任务

# c - 为什么 Matlab 是用 C 而不是 Fortran 编写的？

> ID：925409
> 
> 赞同：7
> 
> 时间：2009-05-29T10:47:44.677
> 
> 标签：c, matlab, programming-languages, fortran

您可能知道，Fortran 是一种用于科学计算的语言。然而，最著名的科学计算高级语言的内核是用 C 而不是 Fortran 编写的。为什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-29T13:59:12.483

**回答您最初的问题：Matlab 最初是用 Fortran 编写的。** 但是，Matlab 的创建者 Cleve Moler 和他的合作伙伴在 1983 年做的第一件事就是用 C 重写整个 Matlab 应用程序：

> Jack Little 辞去了在咨询公司的工作，在 Sears 购买了一台新的 COMPAQ 便携式计算机。机器只有 256 KB 的内存，没有硬盘；Jack 不得不交换 5-1/4 英寸的软盘来编译程序。Jack 和 Steve 花了一年半的时间用 C 语言重写 MATLAB，添加了他们设想的新功能。（[MATLAB 和 MathWorks 两个十年的发展](http://www.mathworks.com/company/newsletters/news_notes/clevescorner/jan06.pdf)）

**我认为今天更相关的问题是问：为什么他们在 1983 年改用 C 语言？**

我的猜测是 C 可能具有 Fortran 所没有的某些特性，因此切换更多是出于必要性和代码可维护性的利益。

Fortran77 中缺少的一个*杀手级*功能是动态内存分配（仅在 Fortran90 中添加了动态内存分配）。在我看来，绕过这个*单一*的限制将是一个可怕的交易破坏者。

编辑：

dmckee 的回答很好地解释了为什么使用 Fortran77 会很痛苦。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-29T13:17:38.167

根据经验推测：

> 内存管理。

Fortran（好吧，编写 matlab 时出现的 fortran）不支持动态内存管理。这使得大型工作很痛苦（例如，[参见 CERNLIB](http://cernlib.web.cern.ch/cernlib/)）。

CERNLIB 通过在一个公共块中分配一个巨大的数组，并为数组的单元实现一个类似 malloc 的（de）分配器来解决这个问题。笨拙但有效：数组偏移量是指针等价物，然后你就走了......

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-29T11:03:34.023

我的理解是，Matlab 是用各种语言编写的，包括但不限于 C、FORTRAN、Java 和 Matlab 本身。

我相信它在幕后使用了同类最佳的库，包括 LAPACK (FORTRAN)、FFTW (C) 等等。

我认为最初的版本是纯 FORTRAN，但随着它变得更加精致和商业化，他们并不羞于为每个组件使用正确的语言。我不怪他们——我讨厌在 FORTRAN 中编写解析器或 GUI！

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-29T10:57:06.610

我想用以下语句来限定这个答案 - 我对 Fortran 或 Matlab 一无所知

但是我认为你几乎在你的问题中回答了你自己的问题。

为什么不使用科学语言来编写内核。你会为手头的任务使用最合适的语言。内核最好用 C 编写，因为它更适合处理内核等低级任务（处理内存管理等）

内核不是科学应用程序，因此您不会使用科学语言。

再说一次，我可能完全偏离了标准，但我认为这是一个非常合乎逻辑的答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-29T10:54:20.313

您可以通过观看他们网站上的视频，特别是在首席科学家 Cleve Moler的[页面上查看有关 Matlab 起源的一些信息。](http://www.mathworks.com/company/aboutus/founders/clevemoler.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-02-12T01:39:42.843

Matlab 最初是用 Fortran 编写的，它更像是一堆 Fortran 例程的包装器。所以问题是为什么用c重写它？事实上，为什么 Fortran 会输给 c 和其他不适合数值计算的语言。答案是 Fortran 深受政治影响。由于各种原因，标准委员会可以决定替换 Fortran 77。因此，当 Fortran 90 最终问世时，Fortran 已经失去了很多其他语言的基础。这种情况现在已经得到纠正。Fortran 2003 或多或少在 gnu 编译器中实现，是一种很好的语言，它非常适合数字，此外还具有动态分配快速 io 和 OO ish 构造多态派生类型等。（Fortran 2008 会更好）

现代 Fortran 不是为编写 gui 接口而设计的，但它旨在从 C 和其他语言调用和被调用。因此，如果今天重复 matlab 练习，则很有可能用 Fortran 编写数字位，而用其他方式编写用户界面。

# iphone - 如何停止加载 UIWebView

> ID：925411
> 
> 赞同：6
> 
> 时间：2009-05-29T10:48:04.490
> 
> 标签：iphone

我创建了许多 UIWebviews 并将其添加到我的视图中。并给出了加载请求。我想停止使用 tag=10 加载 uiwebview。这如何实现？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-10-16T11:37:57.770

尝试这样的事情：

```
UIWebView *webView = [self.view viewWithTag:10];
if(webView)
{
    [webView stopLoading];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T04:56:06.383

您可以在中编写 webView stopLoading 方法`viewWillDisappear`

```
-(void)viewWillDisappear:(BOOL)animated
{
    if([webView isLoading])
    {
        [webView stopLoading];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T04:50:09.657

您可以停止`UIWebView`加载`UIWebViewDelegate`方法：

```
-(BOOL)webView:(UIWebView*)webView  shouldStartLoadingWithRequest:(NSURLRequest*)request navigationType:(UINavigationType)navigationType
{
    if(webView.tag==10)
    {
        return  NO;
    }
    return YES;
} 
```

它会帮助你。

# asp.net - 无法附加到 asp.net 工作进程，因为它不在进程列表中

> ID：925412
> 
> 赞同：1
> 
> 时间：2009-05-29T10:48:24.537
> 
> 标签：asp.net, visual-studio-2008, debugging

我已经使用 Visual Studio 2008 虚拟服务器成功地调试了我的 asp.net 站点，但是突然间它在连接到调试器时开始超时，并显示以下消息：

“无法在Web服务器上开始调试。Web服务器没有及时响应。这可能是因为另一个调试器已经附加到Web服务器上。”

当我尝试手动附加调试器时，我注意到进程列表中缺少 asp.net 工作进程，并且任务管理器中也没有显示。这两件事有联系吗？如果有任何想法我如何解决它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T15:43:44.617

如果你使用的是VS2008自带的开发服务器，你不会看到工作进程w3wp.exe，你会看到开发服务器进程WebDev.WebServer.EXE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T10:54:20.593

尝试在命令提示符下执行`iisreset /stop`& ；`iisreset /start`如果您使用 IIS 版本 >= 6.0，则工作进程将命名为`w3wp.exe`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-06T11:22:15.317

我也发生了同样的事情。如果您单击显示所有进程，您可以找到 w3wp.exe，或者如果您使用的是开发服务器，则使用开发服务器进程 WebDev.WebServer.EXE。

# eclipse - 使用 GWT+Eclipse 开发和部署 JSR-168 portlet

> ID：925414
> 
> 赞同：2
> 
> 时间：2009-05-29T10:48:51.523
> 
> 标签：eclipse, gwt, portlet, liferay, jsr168

我有一个要构建为 Portlet 的 GWT 应用程序。我已经使用[Liferay](http://liferay.com/web/guest/community/wiki/-/wiki/Main/How+to+build+a+GWT+Portlet+in+Liferay)完成了这项工作，但是生成的 portlet（.war 文件）无法部署到 Apache Pluto 中。

我想知道是否有人有一些关于如何构建可以部署在任何符合 JSR-168 的门户中的 JSR-168 portlet（使用 GWT 和 Eclipse）的 HOWTO 信息。我不确定这是否可能。

我已经阅读了[Pluto](http://portals.apache.org/pluto/v11/deploying.html)提供的官方文档，我真的需要更详细的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-06-09T15:30:52.653

是什么使它无法部署在标准容器中？

我已经将 GWT 应用程序编写到基于 pluto 的门户中几次，并且除了将数据传输到应用程序之外没有太多问题。简而言之，我创建了一个标准的 JSP portlet，它加载了在编译期间生成的 GWT javascript 文件，并将应用程序加载到该 portlet 的 JSP 页面中的一个 div 面板中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-21T20:53:04.133

我建议看看[Vaadin](http://vaadin.com/home)。它为 UI 使用 GWT，但在服务器端工作，并且可以轻松地嵌入为 portlet。我知道这[对 Liferay 非常有效，](http://www.liferay.com/web/guest/community/wiki/-/wiki/Main/Developing+Vaadin+Applications+as+Liferay+Portlets)因为我亲自编写了 Vaadin (GWT) 应用程序并将它们部署为 liferay 中的 portlet。此外，Vaadin[在此](http://vaadin.com/book/-/page/advanced.portal.html)声明它将支持符合 JSR-168 的门户，例如 Pluto。

# c# - 获取控件中的数据绑定对象

> ID：925419
> 
> 赞同：0
> 
> 时间：2009-05-29T10:49:48.123
> 
> 标签：c#, data-binding, enums

我想创建一个枚举组合框，弹出窗口将显示控件绑定对象的枚举值。不知何故，我无法在运行时获取绑定对象属性。数据绑定会让我找到绑定对象。但是该属性及其类型对我来说是不可见的，或者我只是还没有找到它......有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T12:01:54.513

您必须使用 DataObjectProvider。在您的资源中，输入以下内容：

```
<ObjectDataProvider MethodName="GetValues" ObjectType="{x:Type sys:Enum}" x:Key="odpEnum">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="yourEnumNameHere"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider> 
```

在您的组合中，输入：

```
<ComboBox ItemsSource="{Binding Source={StaticResource odpEnum}}"/> 
```

这应该用您的枚举填充您的组合。

# java - 在Java中使用String.format而不是字符串连接是更好的做法吗？

> ID：925423
> 
> 赞同：314
> 
> 时间：2009-05-29T10:51:21.053
> 
> 标签：java, string, concatenation, string.format

`String.format`在 Java 中使用和字符串连接之间有明显的区别吗？

我倾向于使用`String.format`但偶尔会滑倒并使用串联。我想知道一个是否比另一个更好。

我看到它的方式`String.format`让你在“格式化”字符串方面更有力量；并且串联意味着您不必担心不小心添加了额外的 %s 或遗漏了一个。

`String.format`也更短。

哪一个更具可读性取决于您的头脑是如何工作的。

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2009-05-29T10:56:34.363

我建议最好使用`String.format()`. 主要原因是`String.format()`可以更轻松地使用从资源文件加载的文本进行本地化，而如果不为每种语言生成具有不同代码的新可执行文件，则无法本地化连接。

如果您计划将您的应用程序本地化，您还应该养成为格式标记指定参数位置的习惯：

```
"Hello %1$s the time is %2$t" 
```

然后可以将其本地化并交换名称和时间标记，而无需重新编译可执行文件以说明不同的顺序。使用参数位置，您还可以重复使用相同的参数，而无需将其两次传递给函数：

```
String.format("Hello %1$s, your name is %1$s and the time is %2$t", name, time) 
```

* * *

## 回答 #2

> 赞同：206
> 
> 时间：2010-01-18T16:58:06.277

关于性能：

```
public static void main(String[] args) throws Exception {      
  long start = System.currentTimeMillis();
  for(int i = 0; i < 1000000; i++){
    String s = "Hi " + i + "; Hi to you " + i*2;
  }
  long end = System.currentTimeMillis();
  System.out.println("Concatenation = " + ((end - start)) + " millisecond") ;

  start = System.currentTimeMillis();
  for(int i = 0; i < 1000000; i++){
    String s = String.format("Hi %s; Hi to you %s",i, + i*2);
  }
  end = System.currentTimeMillis();
  System.out.println("Format = " + ((end - start)) + " millisecond");
} 
```

计时结果如下：

*   串联 = 265 毫秒
*   格式 = 4141 毫秒

因此，连接比 String.format 快得多。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-02-23T14:56:30.603

一个问题`.format`是您失去了静态类型安全性。您的格式参数可能太少，并且格式说明符的类型可能错误 - 两者都会导致`IllegalFormatException` *at runtime*，因此您最终可能会得到中断生产的日志记录代码。

相反，`+`编译器可以测试参数。

[printf](/questions/tagged/printf "显示标记为“printf”的问题")的[安全历史](https://en.wikipedia.org/wiki/Printf_format_string#Vulnerabilities)（该函数被建模）是漫长而可怕的。`format`

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2012-01-11T22:47:02.910

由于讨论了性能，我想我会添加一个包含 StringBuilder 的比较。它实际上比 concat 更快，当然还有 String.format 选项。

为了使这成为一种苹果对苹果的比较，我在循环中而不是在外部实例化一个新的 StringBuilder （这实际上比只进行一个实例化更快，这很可能是由于在末尾为循环追加重新分配空间的开销一名建设者）。

```
 String formatString = "Hi %s; Hi to you %s";

    long start = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
        String s = String.format(formatString, i, +i * 2);
    }

    long end = System.currentTimeMillis();
    log.info("Format = " + ((end - start)) + " millisecond");

    start = System.currentTimeMillis();

    for (int i = 0; i < 1000000; i++) {
        String s = "Hi " + i + "; Hi to you " + i * 2;
    }

    end = System.currentTimeMillis();

    log.info("Concatenation = " + ((end - start)) + " millisecond");

    start = System.currentTimeMillis();

    for (int i = 0; i < 1000000; i++) {
        StringBuilder bldString = new StringBuilder("Hi ");
        bldString.append(i).append("; Hi to you ").append(i * 2);
    }

    end = System.currentTimeMillis();

    log.info("String Builder = " + ((end - start)) + " millisecond"); 
```

*   2012-01-11 16:30:46,058 信息 [TestMain] - 格式 = 1416 毫秒
*   2012-01-11 16:30:46,190 信息 [TestMain] - 连接 = 134 毫秒
*   2012-01-11 16:30:46,313 信息 [TestMain] - 字符串生成器 = 117 毫秒

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2009-05-29T10:56:49.527

> 哪一个更具可读性取决于您的头脑是如何工作的。

你在那里得到了答案。

这是个人品味的问题。

我想，字符串连接稍微快一些，但这应该可以忽略不计。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2014-10-22T07:06:41.973

这是一个以毫秒为单位的多个样本大小的测试。

```
public class Time {

public static String sysFile = "/sys/class/camera/rear/rear_flash";
public static String cmdString = "echo %s > " + sysFile;

public static void main(String[] args) {

  int i = 1;
  for(int run=1; run <= 12; run++){
      for(int test =1; test <= 2 ; test++){
        System.out.println(
                String.format("\nTEST: %s, RUN: %s, Iterations: %s",run,test,i));
        test(run, i);
      }
      System.out.println("\n____________________________");
      i = i*3;
  }
}

public static void test(int run, int iterations){

      long start = System.nanoTime();
      for( int i=0;i<iterations; i++){
          String s = "echo " + i + " > "+ sysFile;
      }
      long t = System.nanoTime() - start;   
      String r = String.format("  %-13s =%10d %s", "Concatenation",t,"nanosecond");
      System.out.println(r) ;

     start = System.nanoTime();       
     for( int i=0;i<iterations; i++){
         String s =  String.format(cmdString, i);
     }
     t = System.nanoTime() - start; 
     r = String.format("  %-13s =%10d %s", "Format",t,"nanosecond");
     System.out.println(r);

      start = System.nanoTime();          
      for( int i=0;i<iterations; i++){
          StringBuilder b = new StringBuilder("echo ");
          b.append(i).append(" > ").append(sysFile);
          String s = b.toString();
      }
     t = System.nanoTime() - start; 
     r = String.format("  %-13s =%10d %s", "StringBuilder",t,"nanosecond");
     System.out.println(r);
} 
```

}

```
TEST: 1, RUN: 1, Iterations: 1
  Concatenation =     14911 nanosecond
  Format        =     45026 nanosecond
  StringBuilder =      3509 nanosecond

TEST: 1, RUN: 2, Iterations: 1
  Concatenation =      3509 nanosecond
  Format        =     38594 nanosecond
  StringBuilder =      3509 nanosecond

____________________________

TEST: 2, RUN: 1, Iterations: 3
  Concatenation =      8479 nanosecond
  Format        =     94438 nanosecond
  StringBuilder =      5263 nanosecond

TEST: 2, RUN: 2, Iterations: 3
  Concatenation =      4970 nanosecond
  Format        =     92976 nanosecond
  StringBuilder =      5848 nanosecond

____________________________

TEST: 3, RUN: 1, Iterations: 9
  Concatenation =     11403 nanosecond
  Format        =    287115 nanosecond
  StringBuilder =     14326 nanosecond

TEST: 3, RUN: 2, Iterations: 9
  Concatenation =     12280 nanosecond
  Format        =    209051 nanosecond
  StringBuilder =     11818 nanosecond

____________________________

TEST: 5, RUN: 1, Iterations: 81
  Concatenation =     54383 nanosecond
  Format        =   1503113 nanosecond
  StringBuilder =     40056 nanosecond

TEST: 5, RUN: 2, Iterations: 81
  Concatenation =     44149 nanosecond
  Format        =   1264241 nanosecond
  StringBuilder =     34208 nanosecond

____________________________

TEST: 6, RUN: 1, Iterations: 243
  Concatenation =     76018 nanosecond
  Format        =   3210891 nanosecond
  StringBuilder =     76603 nanosecond

TEST: 6, RUN: 2, Iterations: 243
  Concatenation =     91222 nanosecond
  Format        =   2716773 nanosecond
  StringBuilder =     73972 nanosecond

____________________________

TEST: 8, RUN: 1, Iterations: 2187
  Concatenation =    527450 nanosecond
  Format        =  10291108 nanosecond
  StringBuilder =    885027 nanosecond

TEST: 8, RUN: 2, Iterations: 2187
  Concatenation =    526865 nanosecond
  Format        =   6294307 nanosecond
  StringBuilder =    591773 nanosecond

____________________________

TEST: 10, RUN: 1, Iterations: 19683
  Concatenation =   4592961 nanosecond
  Format        =  60114307 nanosecond
  StringBuilder =   2129387 nanosecond

TEST: 10, RUN: 2, Iterations: 19683
  Concatenation =   1850166 nanosecond
  Format        =  35940524 nanosecond
  StringBuilder =   1885544 nanosecond

  ____________________________

TEST: 12, RUN: 1, Iterations: 177147
  Concatenation =  26847286 nanosecond
  Format        = 126332877 nanosecond
  StringBuilder =  17578914 nanosecond

TEST: 12, RUN: 2, Iterations: 177147
  Concatenation =  24405056 nanosecond
  Format        = 129707207 nanosecond
  StringBuilder =  12253840 nanosecond 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2013-12-03T21:29:33.153

这是与上面相同的测试，只是在*StringBuilder上调用了****toString()***方法。**下面的结果表明，StringBuilder 方法比使用+**运算符的字符串连接要慢一点。

 ******文件：StringTest.java***

```
class StringTest {

  public static void main(String[] args) {

    String formatString = "Hi %s; Hi to you %s";

    long start = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
        String s = String.format(formatString, i, +i * 2);
    }

    long end = System.currentTimeMillis();
    System.out.println("Format = " + ((end - start)) + " millisecond");

    start = System.currentTimeMillis();

    for (int i = 0; i < 1000000; i++) {
        String s = "Hi " + i + "; Hi to you " + i * 2;
    }

    end = System.currentTimeMillis();

    System.out.println("Concatenation = " + ((end - start)) + " millisecond");

    start = System.currentTimeMillis();

    for (int i = 0; i < 1000000; i++) {
        StringBuilder bldString = new StringBuilder("Hi ");
        bldString.append(i).append("Hi to you ").append(i * 2).toString();
    }

    end = System.currentTimeMillis();

    System.out.println("String Builder = " + ((end - start)) + " millisecond");

  }
} 
```

***Shell 命令：（编译并运行 StringTest 5 次）***

```
> javac StringTest.java
> sh -c "for i in \$(seq 1 5); do echo \"Run \${i}\"; java StringTest; done" 
```

***结果 ：***

```
Run 1
Format = 1290 millisecond
Concatenation = 115 millisecond
String Builder = 130 millisecond

Run 2
Format = 1265 millisecond
Concatenation = 114 millisecond
String Builder = 126 millisecond

Run 3
Format = 1303 millisecond
Concatenation = 114 millisecond
String Builder = 127 millisecond

Run 4
Format = 1297 millisecond
Concatenation = 114 millisecond
String Builder = 127 millisecond

Run 5
Format = 1270 millisecond
Concatenation = 114 millisecond
String Builder = 126 millisecond 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-05-29T11:01:19.410

`String.format()`不仅仅是连接字符串。例如，您可以使用`String.format()`.

但是，如果您不关心本地化，则没有功能差异。也许一个比另一个快，但在大多数情况下，它可以忽略不计..

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-01-02T13:41:12.073

一般来说，字符串连接应该优先于`String.format`. 后者有两个主要缺点：

1.  它不对要以本地方式构建的字符串进行编码。
2.  构建过程被编码在一个字符串中。

关于第 1 点，我的意思是不可能`String.format()`在单个顺序传递中理解调用在做什么。一个人被迫在格式字符串和参数之间来回切换，同时计算参数的位置。对于短连接，这不是什么大问题。然而，在这些情况下，字符串连接不那么冗长。

关于第 2 点，我的意思是构建过程的重要部分以*格式字符串*编码（使用 DSL）。使用字符串表示代码有很多缺点。它本质上不是类型安全的，并且使语法高亮、代码分析、优化等复杂化。

当然，当使用 Java 语言外部的工具或框架时，新的因素可能会发挥作用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-29T14:55:43.383

我没有做过任何具体的基准测试，但我认为连接可能会更快。String.format() 创建了一个新的 Formatter，而后者又创建了一个新的 StringBuilder（大小只有 16 个字符）。这是相当大的开销，特别是如果您正在格式化较长的字符串并且 StringBuilder 必须不断调整大小。

但是，串联的用处不大，而且更难阅读。与往常一样，值得对您的代码进行基准测试，看看哪个更好。在将资源包、语言环境等加载到内存中并且代码经过 JIT 处理后，服务器应用程序中的差异可能可以忽略不计。

也许作为最佳实践，使用适当大小的 StringBuilder（可附加）和 Locale 创建自己的 Formatter 并在您有很多格式化工作时使用它是一个好主意。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-10-04T23:58:36.507

可能会有明显的差异。

`String.format`非常复杂，并且在下面使用正则表达式，所以不要养成在任何地方都使用它的习惯，而只在需要的地方使用它。

`StringBuilder`会快一个数量级（正如这里有人已经指出的那样）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-05-30T11:09:24.397

我认为我们可以使用它，`MessageFormat.format`因为它应该在可读性和性能方面都很好。

我使用了与*Icaro*在上述答案中使用的程序相同的程序，并通过附加代码来增强它以用于`MessageFormat`解释性能数字。

```
 public static void main(String[] args) {
    long start = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
      String s = "Hi " + i + "; Hi to you " + i * 2;
    }
    long end = System.currentTimeMillis();
    System.out.println("Concatenation = " + ((end - start)) + " millisecond");

    start = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
      String s = String.format("Hi %s; Hi to you %s", i, +i * 2);
    }
    end = System.currentTimeMillis();
    System.out.println("Format = " + ((end - start)) + " millisecond");

    start = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
      String s = MessageFormat.format("Hi %s; Hi to you %s", i, +i * 2);
    }
    end = System.currentTimeMillis();
    System.out.println("MessageFormat = " + ((end - start)) + " millisecond");
  } 
```

> 串联 = 69 毫秒
> 
> 格式 = 1435 毫秒
> 
> MessageFormat = 200 毫秒

**更新：**

根据 SonarLint 报告，应正确使用 Printf 样式的格式字符串 (squid:S3457)

因为`printf-style`格式字符串是在运行时解释的，而不是由编译器验证的，所以它们可能包含导致创建错误字符串的错误。此规则在调用、、、和类的 format(...) 方法以及或类的方法时静态验证`printf-style`格式字符串与其参数的相关性。`java.util.Formatter``java.lang.String``java.io.PrintStream``MessageFormat``java.io.PrintWriter``printf(...)``java.io.PrintStream``java.io.PrintWriter`

我用花括号替换了 printf 样式，得到了一些有趣的结果，如下所示。

> 连接 = 69 毫秒
> 格式 = 1107 毫秒
> **格式：花括号 = 416 毫秒**
> MessageFormat = 215 毫秒
> MessageFormat：花括号 = 2517 毫秒

**我的结论：**
正如我在上面强调的那样，使用带花括号的 String.format 应该是获得良好可读性和性能优势的不错选择。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-10T15:56:13.530

习惯 String.Format 需要一点时间，但在大多数情况下这是值得的。在 NRA 的世界中（从不重复任何事情），将您的标记化消息（日志或用户）保存在常量库中（我更喜欢相当于静态类的内容）并在必要时使用 String.Format 调用它们非常有用，无论您是否是否本地化。尝试将此类库与连接方法一起使用时，任何需要连接的方法都难以阅读、排除故障、校对和管理。更换是一种选择，但我怀疑它的性能。经过多年的使用，我对 String.Format 的最大问题是当我将它传递给另一个函数（如 Msg）时，调用的长度很长，但使用自定义函数作为别名很容易解决.

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2011-09-28T04:44:46.217

您无法通过上面的程序比较 String Concatenation 和 String.Format 。

您也可以尝试在代码块中交换使用 String.Format 和 Concatenation 的位置，如下所示

```
public static void main(String[] args) throws Exception {      
  long start = System.currentTimeMillis();

  for( int i=0;i<1000000; i++){
    String s = String.format( "Hi %s; Hi to you %s",i, + i*2);
  }

  long end = System.currentTimeMillis();
  System.out.println("Format = " + ((end - start)) + " millisecond");
  start = System.currentTimeMillis();

  for( int i=0;i<1000000; i++){
    String s = "Hi " + i + "; Hi to you " + i*2;
  }

  end = System.currentTimeMillis();
  System.out.println("Concatenation = " + ((end - start)) + " millisecond") ;
} 
```

您会惊讶地发现 Format 在这里运行得更快。这是因为创建的初始对象可能不会被释放，并且内存分配和性能可能存在问题。

# asp.net - ASP.NET 控件事件异常处理

> ID：925424
> 
> 赞同：1
> 
> 时间：2009-05-29T10:51:58.803
> 
> 标签：asp.net, exception, controls, event-handling

假设我在 aspx 页面中有一个按钮，可以将表单数据保存到数据库。在关联的事件处理程序中，在发送更新之前，我从 Web 服务中读取了一些内容，该操作可能会导致异常。如果出现错误，我希望在页面上显示足够的消息，并保留表单中的所有数据。我怎样才能做到这一点？此外，我的所有页面都继承自一个基页，所以如果可能的话，我希望在基类中包含所有错误处理代码。如果可能的话，我不希望使用 try-catch 块包围任何 Web 服务调用，如果出现任何未处理的异常，我会自动调用某些方法，例如 Page_error，但仍将数据保留在我的表单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T14:08:21.187

如果抛出异常（您可以如果确实抛出了异常，则将对 superclas 方法的调用放在 catch 块中，或者如果 web 服务不可用，您可以手动管理它，具体取决于您的编程风格）。

至于保留呈现的数据，如果 viewstate 处于打开状态并且您没有动态地填充页面，那么您就可以了 - 如果没有，您需要在 viewState 或会话条目中显式保存状态信息，并在出现问题时将其取回。这一点实际上取决于您的页面是如何实际实现的。

# html - 单击图层/div

> ID：925427
> 
> 赞同：14
> 
> 时间：2009-05-29T10:52:33.170
> 
> 标签：html, css

如果我在一个页面上有两层，水平拆分，第二层与第一层重叠，是否可以让它“点击通过”？

我在第一层有链接，第二层重叠，这阻止了链接可点击。有没有办法让图层显示，但可以点击，同时仍然有自己的链接可点击？

编辑：

这是一个带有 html 和样式表的示例。

当与 Layer3 中的标题内联时，测试链接变得不可点击，但低于它们就可以了。有没有办法纠正这个问题？

```
<title>Test</title>
<link rel="stylesheet" href="test.css" type="text/css">
<body>
<div id="Layer0">
<div id="Layer1" class="Layer1">
<h3 align="left">Brands</h3>
</div>
<div id="Layer2" class="Layer2"><h1>TEST</h1>
<div id="rightlayer">
<a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p>
</div>
</div>
<div id="Layer3" class="Layer3"><h1>Ed Hardy Auctions</h1>
</div>
</div>
</body>
</html> 
```

和CSS

```
#Layer0 {
    width:100%;
    height:100%;
}
body {
    margin:10px 10px 0px 10px;
    padding:0px;
    color:#999999;
    font-family:"Trebuchet MS",arial,sans-serif;
    font-size:70.5%;
}
#Layer1 {
    position:absolute;
    left:10px;
    width:200px;
    margin-top:17px;
    font-size:1.0em;
    padding-left:12px;
    padding-top:8px;
}
#Layer2 {
    background:#fff;
    margin-left:199px;
    color:#000;
}

#rightlayer {
float:right;
}
.Layer3 {
position:absolute;
top:67%;
padding:20px;
width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2011-03-06T13:08:18.240

以为我会更新这个，因为我已经为此苦苦挣扎了几个小时，并认为我找到了解决方案。研究了使用 Jquery 但 CSS 属性：

```
pointer-events:none; 
```

......做了我想要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-29T11:13:29.557

如果您希望 div 保持在其当前的 x、y 和（最重要的是）z 中，这是不可能的 - 只有“顶部”层是可点击的。

* * *

附录后OP编辑：

将 CSS 布局想象成您在物理上处理纸片（如果您为所有“图层”div 赋予不同的背景颜色，这*将更*容易可视化）。渲染引擎会为它找到的每个元素在你给它（或它工作）的尺寸上剪下一点纸。它按照遇到他们的顺序执行此操作，将每一位纸张放在页面上 - 最后一项将位于顶部。

现在您已经告诉渲染引擎将您的第 3 个 div 放在与第 2 个重叠的位置。现在您希望能够“看到”所涵盖的内容。不适用于纸张，不适用于 HTML。仅仅因为它是透明的并不意味着它不占用空间。

所以你必须改变一些东西。

查看您的 CSS 和标记（老实说可以清理，但我假设您没有向我们展示其他标记来证明它的合理性）有几个简单的获胜方法：

1）。**在 Layer3 上将z-index 设置**为 -1 - z-index 是您如何更改默认的分层顺序（如遇到）。这只是将整个第 3 层移动到页面其余部分的下方，因此隐藏的内容会暴露出来，反之亦然，具体取决于内容。

2）。**将宽度**从 100% 更改为例如 80%，或者更有可能使用 pos:abs 设置 left:0px 和 right:199px; （我猜 Layer2 上的 padding-left 是预期的列宽？）。这样做的代价是您的 Layer3 不再是 100% 宽度

3）。**谷歌“CSS 列布局”**并找到一种反映您需要的模式并进行调整。每个可以完成的 CSS 布局都已经完成了一百万次。存在可以解决您的问题的标准技术。如果您还没有积累经验，CSS 很难，因此请利用其他人的经验。不要重新发明轮子。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-05T14:56:42.543

这将是一项艰巨的工作，但这是可能的。
您需要在顶层/div 上捕获点击事件，并找到光标 xy 位置。
然后在顶层下面的 layer/div 中找到所有链接，并查看它在屏幕上的位置是否落在当前鼠标位置附近。
然后，您可以触发匹配链接的点击。
我会为此使用 jQuery（如果您还没有的话），然后如果您遇到问题，请使用 jQuery 标签重新发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T11:10:01.047

没有看到一些代码很难说。

您可以尝试在底层设置 z-index，但这适用于以绝对、相对或固定（位置：绝对）定位的元素。

* * *

看到代码后编辑：

添加位置：相对；z 指数：100；到#rightLayer。

或者您可以从 .Layer3 中删除宽度：100%。

* * *

您可能想要重构代码并为#rightLayer 和.Layer3 使用两列布局。

css

```
#Layer0 {
    width:100%;
    height:100%;
}
body {
    margin:10px 10px 0px 10px;
    padding:0px;
    color:#999999;
    font-family:"Trebuchet MS",arial,sans-serif;
    font-size:70.5%;
}
#Layer1 {
    width:200px;
    margin-top:17px;
    font-size:1.0em;
    padding-left:12px;
    padding-top:8px;
}
#Layer2 {
    background:#fff;
    margin-left:199px;
    color:#000;
}

#rightlayer {
float:right;
}
.Layer3 {
} 
```

html

```
<div id="Layer0">
    <div id="Layer2" class="Layer2">
        <h1>TEST</h1>
    </div>
    <div id="Layer1" class="Layer1">
        <h3 align="left">Brands</h3>
    </div>
    <div class="content">
        <div id="rightlayer">
            <a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p><a href="test">TEST></a><p>
        </div>
        <div id="Layer3" class="Layer3">
            <h1>Ed Hardy Auctions</h1>
        </div>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-07T20:54:37.870

我从示例中假设 rightlayer 中的链接是唯一需要单击的链接，并且您在其他层中没有链接。如果是这样，您可以通过更改 div 的 z-index 顺序来解决问题。

Layer1 和 Layer3 具有绝对位置，因此如果您向 Layer2 添加位置样式（绝对或相对），您将能够将该 div 拉到前面，同时将右层 div 拉到比 Layer3 更高的层。

我在 CSS 中添加了以下内容：

```
#Layer2 {    
    position: relative;
    z-index: 1;
} 
```

从我所见，当前页面设置保持原样，但将所有元素（包括带有链接的右侧图层）拉到前面，因此您可以单击其中的所有链接。

出于调试目的，我建议为所有不同的图层添加背景颜色，以了解不同图层的 z-index 顺序。使用适当的背景颜色，很容易发现落在链接上的图层，而且还可以验证新的 z-index 顺序是否使链接可用。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-08T10:55:14.543

几年前我向 Firefox Bugzilla 提交了一个错误，说 Firefox 中存在这个错误。

一位 Mozilla 工程师告诉我，这实际上不是一个错误，而是按照 HTML/CSS 规范的正确行为。不幸的是，我无法找到大约 6 年前的原始错误可供参考。

我提交错误的原因是因为我可以在使用 IE（我认为是 6）时单击顶部 div 到下面的链接，但 Firefox 不会让我这样做。

像往常一样，事实证明 IE 的实现不正确，而 Firefox 正在按照规范的预期工作。

仅仅因为 div 是透明的并不意味着您应该能够点击它。

我不确定如何使用 JavaScript 或 CSS 解决这个问题。我会退后一步，重新考虑你想要实现的目标以及你如何实现它。

格雷格

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-08T16:54:50.827

你能不能简单地将 div 的宽度设置为自动（绝对定位的默认值 - 即只需从 .Layer3 中删除宽度：100%）。

这样， div 只会尽可能宽，而不是不必要地重叠链接。

# php - 创建数据库时使用什么字符集

> ID：925428
> 
> 赞同：1
> 
> 时间：2009-05-29T10:53:11.407
> 
> 标签：php, mysql, character-encoding

所以我正在做很多 php 教程，我总是想知道何时创建不同的数据库......

我应该使用什么字符集？根据我使用的数据库接口，它似乎默认为不同的选项。

那么我应该用于基本编程的最常见的是什么......或者有人可以指出我在MySql中的字符集的一个很好的指南

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T10:54:45.087

除非您有充分的理由不这样做，否则始终默认为 UTF-8 (Unicode)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T10:54:59.640

我总是瞄准 UTF-8 或类似的。

# perl - 如何找到csv记录中的差异

> ID：925437
> 
> 赞同：2
> 
> 时间：2009-05-29T10:54:50.560
> 
> 标签：perl, csv, shell, diff

是否有算法或类似 diff 的实用程序来查找两个 csv 文件之间的差异？例子：

```
file1
-------
key1,value1
key2,value2
key3,value3
key5,value5
key7,value7

file2
-------
key1,value1
key3,value3
key4,value4
key5,value5
key6,value6 
```

使用这种类似 diff 的实用程序，它将输出 3 种类型的记录：

1.  只存在于file1中的记录（file1减去file2的set操作）
2.  只存在于file2中的记录（file2减去file1的set操作）
3.  file1 和 file2 中都存在的记录（相交集操作）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T11:39:24.013

[diff](http://www.network-theory.co.uk/docs/diff/)可以做你想做的事..

```
diff file1.csv file2.csv --old-line-format="< %L" --new-line-format="> %L" --unchanged-line-format="= %L" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T11:25:53.633

有[算法::Diff](http://search.cpan.org/~nedkonz/Algorithm-Diff-1.15/lib/Algorithm/Diff.pm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-23T12:05:41.410

看看[http://sourceforge.net/projects/csvdiff/](http://sourceforge.net/projects/csvdiff/)

> csvdiff 是一个 Perl 脚本，用于比较/比较两个 csv 文件，并可以选择分隔符。差异将显示为：“记录 999 中的 XYZ 列”不同。在此之后，将显示该列的实际结果和预期结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T11:27:56.687

您可以使用 unix 'join' 命令来执行此操作。它在 Cygwin for Windows 中也可用。

例子：

```
$ join -t ',' -v 1 file1 file2
key2,value2
key7,value7
$ join -t ',' -v 2 file1 file2
key4,value4
key6,value6
$ join -t ',' file1 file2
key1,value1,value1
key3,value3,value3
key5,value5,value5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-12-15T07:03:41.937

开源 DiffKit 能够做到这一点：

www.diffkit.org

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-29T11:26:42.680

您可以在 Perl 中使用哈希。将每个文件读入单独的散列，例如

```
my %File1 = ();
my %File2 = ();
# Filehandles FP1 and FP2 is opened for read
while (<FP1>) {
    if (/^([^,]+),(.+)$/) {
        my ($key, $value) = ($1, $2);
        $File1{$key} = $value;
    }
}
# Repeat for FP2 
```

要打印结果，您可以遍历散列并检查键/值是否相同、不同或以各种方式丢失。例子：

```
for my $key (keys %File1) {
    if (defined($File1{$key}) && defined($File2{$key}) {
        print("$key exists in both files\n");
    } elsif (defined($File1{$key})) {
        print("$key exists only in file1\n");
    }
}
# Repeat for %File2 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-29T11:32:15.883

您可以查看我的 FOSS CSV 流编辑器[CSVfix](http://code.google.com/p/csvfix/)，它可以通过 join 命令执行您想要的操作 - 无需编程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-29T12:32:56.853

[使用SQLite](http://www.sqlite.org)的示例怎么样？

```
DROP TABLE 'file1';
DROP TABLE 'file2';

CREATE TABLE 'file1' (
    key_field VARCHAR primary key,
    value_field VARCHAR
);

CREATE TABLE 'file2' (
    key_field VARCHAR primary key,
    value field VARCHAR
);

.bail off
.separator ,
.import file1.csv file1
.import file2.csv file2

.output stdout
.header on

SELECT col1 AS 'In file1.csv, not in file2.csv' FROM (
    SELECT file1.key_field AS col1,
           file2.key_field AS col2 
    FROM file1 LEFT OUTER JOIN file2
    ON file1.key_field == file2.key_field
) 
WHERE col2 IS NULL
;

SELECT col2 AS 'In file2.csv, not in file1.csv'FROM (
    SELECT file1.key_field AS col1,
           file2.key_field AS col2
    FROM file2 LEFT OUTER JOIN file1
    ON file2.key_field == file1.key_field
) WHERE col1 IS NULL
;

SELECT file1.key_field AS 'In both file1.csv and file2.csv'
    FROM file1 INNER JOIN file2
    WHERE file1.key_field == file2.key_field
; 
```

这是输出：

```
C:\Temp> sqlite3 test.db < t.sql
In file1.csv, not in file2.csv
key2
key7
In file2.csv, not in file1.csv
key4
key6
In both file1.csv and file2.csv
key1
key3
key5 
```

# jquery - jQuery ajax 问题

> ID：925439
> 
> 赞同：-2
> 
> 时间：2009-05-29T10:55:02.933
> 
> 标签：jquery, ajax, get

我对 jQuery 的 ajax 函数没有任何经验。我正在尝试进行简单的调用，例如：

```
$.get ("ajaxsupport/login"); 
```

我有一个带有 url 模式（“ajaxsupport/login”）的 servlet。

当我输入浏览器的地址字段“ [http://localhost:9090/ajaxsupport/login](http://localhost:9090/ajaxsupport/login) ”时，我看到了一些结果。但是 $.get (..) 甚至不打电话。

问题是什么？

我使用 jquery 1.3.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T10:58:29.197

`$.get`默认情况下是*异步*方法调用，这意味着调用者仍处于控制之中。这就是为什么在执行请求时必须发生某些事情的原因。您可以通过定义回调来指定它。

```
jQuery.get( url, [data], [callback], [type] ) 
```

在您的情况下（请注意前面的“/”，但可能没有必要，具体取决于脚本位置）：

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){

    $.get("/ajaxsupport/login", 
        function(data, textStatus){ 
            // just prompt the response and the status message
            alert(data + "\n" + textStatus); 
        } 
    );

});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T11:19:44.270

尝试找出是否得到结果：

```
$(document).ready(function(){
 $.ajax
 ({
    type: "GET",
    url:"/ajaxsupport/login",
    success: function(result)
    {
        alert("I'm a success");
    }
}); 
```

});

您还可以对请求和返回的内容使用[firebug 。](http://getfirebug.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T11:19:01.120

获取像[fiddler](http://www.fiddler2.com/fiddler2/)这样的工具。观察请求是如何通过网络的。它会去你认为它要去的地方吗？你得到回应了吗？您可以在 Web 服务调用上设置断点吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-22T07:37:02.290

**两个变量异步发送到服务器 [Raw JavaScript || jQuery ]] **

```
var demo = document.querySelector('#demo');
var x = 0;
var y = 0;

//pure
demo.innerHTML = x;
demo.addEventListener('click',()=> {
    x=5;
    demo.innerHTML = x;
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            console.log(xhttp.responseText);
        }
    };
    xhttp.open("POST", 'http://localhost/target/index.php', true);
    xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xhttp.send('data='+[x,y]);
});

//framework
$('#demo2').html(y);
$('#demo2').click(()=>{
    y=5;
    $.ajax({
        type: 'post',
        url: 'http://localhost/target/index.php',
        data: {
            'y': y,
            'x' : x
        },
        success: function (response) {
            console.log(response);
        },
        error: function () {
            console.log("error");
        }
    });
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #demo,#demo2{
            height: 100px;
            width: 100px;
            background-color: #f12100;
        }
        #demo2{
            background-color: #20c997;
        }
    </style>
</head>
<body>
<div id="demo"></div>
<br>
<div id="demo2"></div>
<script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>
<script type="text/javascript" src="script.js"></script>
</body>
</html>
```

# cocoa - Cocoa Touch App Architecture - MVC 控制器？

> ID：925440
> 
> 赞同：2
> 
> 时间：2009-05-29T10:55:28.750
> 
> 标签：cocoa, cocoa-touch, model-view-controller, controller

我对 Cocoa 和 iPhone 编程很陌生。

我正在使用 Xcode *Utility Application*模板来实现一个简单的应用程序，该应用程序具有：

*   带有**文本字段**的视图以收集用户名
*   带有**连接按钮**的视图，用于使用用户名启动到远程站点的连接，以通过 HTTP 获取一些数据。数据将在屏幕上显示为文本字符串。

我认为这代表了我在 MVC 模式中的**观点。**

我创建了一个简单的类来存储用户名并完成代表我的**模型**的所有连接工作，并在 AppDelegate 中对其进行实例化。

这是一个非常简化的草图：

![简化草图](https://i.stack.imgur.com/c2e6L.png)

我不太清楚如何将数据嵌套到子视图（用户名）中，或者如何在嵌套的父视图（连接按钮）中触发操作。

我的问题是：

***实现此架构的最佳/最干净的方法是什么？***

如何实现**CONTROLLER**？

在此先感谢您的帮助，
Paull

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T11:52:26.623

**根据评论更新我的答案：**

在大多数情况下，控制器中有状态是可以的。就像您正在为其编写应用程序的任何模型对象的数组或实例一样。

我会保持模型对象没有任何网络代码，并将其放在控制器中。在这种情况下，触发该连接操作的 ViewController。

**原答案：**

> 我不太清楚如何将数据嵌套到子视图（用户名）中，或者如何在嵌套的父视图（连接按钮）中触发操作。

使用实用程序应用程序模板，您已经拥有了几个 ViewController。

要在控制器中获取对 UI 的引用，您需要`IBOutlets`在 Interface Builder 中声明并连接它们。要响应您需要`IBActions`在 ViewControllers 中声明和实现的操作，并将它们连接到 Interface Builder 中。您在检查器的“连接”窗格（左起第二个）中执行的操作。

# javascript - 确定 AJAX 调用成功的正确方法是什么？

> ID：925448
> 
> 赞同：1
> 
> 时间：2009-05-29T10:57:48.603
> 
> 标签：javascript, ajax, httpresponse

确定 AJAX 调用成功的正确方法是什么？

我在prototype.js 中看到

```
 return !status || (status >= 200 && status < 300); 
```

在 jQuery 中：

```
 // IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450
    return !xhr.status && location.protocol == "file:" ||
        ( xhr.status >= 200 && xhr.status < 300 ) || xhr.status == 304 || xhr.status == 1223; 
```

哪一个是正确的？如果我们不使用任何 Javascript 库而是用基本的 Javascript 编写 AJAX，我们应该使用哪一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T11:01:24.980

原型似乎更“正确”，因为它只将有效的 HTTP 成功代码视为成功。jQuery 更加健壮，因为它考虑了错误和其他经常成为成功代码的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T11:21:28.043

HTTP 状态分为以下几类：

2XX：成功

3XX：重定向

4XX：客户端错误

5XX：服务器错误。

所以 200-300 是一个 ajax 调用的“ok”结果。

有关状态代码的更多详细信息，请查看[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

干杯，

jrh

# multithreading - 远程锁定

> ID：925450
> 
> 赞同：0
> 
> 时间：2009-05-29T10:58:38.463
> 
> 标签：multithreading, language-agnostic, networking, protocols

我正在设计一个远程线程原始协议。目前我们只需要互斥体（即监视器）和信号量。主要思想是不需要中央权威 - 原语应该在对它们感兴趣的对等方之间进行协调。

几个星期以来，我已经在纸上和脑海中猛烈抨击了一些想法。但我认为我真的应该看看以前的文献。有没有？

它将在 XMPP 上运行——但这是一个实现细节。我只是在寻找关于实际协议流的规范或类似的东西——所以文献来自什么协议并不重要。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T16:10:42.317

分布式互斥锁是一种复杂的结构。您需要处理基于单个机器的实现不存在的各种奇怪的情况。特别是，您需要处理代理与组失去通信但仍持有共享资源锁定的情况。除了该场景之外，还有一些复杂的场景，您的组被破坏并且您抓住了资源的锁。当破碎的团体加入一个大团体时，您需要某种方法来协调锁，这绝非易事。

我强烈建议研究一些[基于消息传递的中间件](http://en.wikipedia.org/wiki/Message_queue)，例如[Erlang](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-actor-concurrency1.html)和[JBoss](http://en.wikipedia.org/wiki/JBoss_Messaging)

我还建议发布有关您需要实现的特定分布式算法/数据结构的单独问题。您可能会在中间件库中使用开箱即用的实现，可以对其进行调整以满足您的需求。

# wcf - Wcf 服务代理名称/命名空间命名策略

> ID：925453
> 
> 赞同：4
> 
> 时间：2009-05-29T10:59:23.283
> 
> 标签：wcf, web-services, coding-style, naming-conventions, proxy-classes

任何人都有适合服务代理类的命名策略？

例如，如果我在两个项目中获得三个 Web 服务，如下所示：

```
XWs
  AService.asmx
YWs
  BService.svc
  CService.svc 
```

什么将用作 和 的服务参考名称和`AService`命名`BService`空间`CService`？

一般来说，我希望代理名称/命名空间中的某些内容表明所使用的东西不是具体的类，而是代表一个代理 - 两者都不会与具体类的使用冲突[并强制使用别名或命名空间-qualified class names]，因此我们并没有隐藏发生跃点的事实（我猜 Wcf 服务代理生成器的默认后缀 Client 涵盖了这一点）。同样重要的是，它处理编写包装器/垫片服务的情况，该服务将调用 [子] 集转发到另一个引用的服务。

我使用过各种样式（添加`Ws`、`ServiceProxy`或后缀？前缀为） `Ref`，但从未对它们完全满意。`Proxy``ServiceName.`

什么对你有用？任何风格指南都提到了命名风格？

编辑：虽然 Cheeso 的回答涵盖了我的大部分问题，但我仍然有兴趣听到以下方面的答案：

1.  如上例所示的命名空间代理类的策略
2.  提及代理命名策略的样式指南

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T16:26:59.200

我最初使用 ServiceName **Proxy**和 ServiceName **SvcProxy 之**类的名称。但是，和你一样，我对这些名字并不是特别满意，因此我没有坚持下去。现在我只使用 ServiceName **Service**或 ServiceName **Svc**。

您想与班级用户交流的关键是*班级是代理*吗？您在代理类和具体类之间所做的区别似乎适用于鳄鱼。具体的反面是抽象的，不是吗？而svcutil.exe生成的代理类，其实是具体的。

通过命名约定，我认为您试图表明代理类与远程服务通信。（当我们称它为“代理”时，我们的意思是表示它位于某物的前面，在这种情况下是远程服务。）如果是这样，那么为什么不是 ServiceName **Service**或 ServiceName **Connection**，或者类似的行呢？像 System.Data.OleDb.OleDbConnection 或 System.Data.SqlClient.SqlConnection。

我自己选择的命名约定符合这一点。它表示该类表示一个服务，假定它是远程的。我不太在意强调它是代理到服务的事实。出于实际目的，它是一项服务这一事实是关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-12T02:07:50.967

我也在探索这里的选择。我刚刚阅读了 Miguel Castro 的[这篇文章](http://www.code-magazine.com/article.aspx?quickid=0809101&page=1)，他建议将服务、服务主机、数据合同和服务合同分开，我主要是想决定是否应该将所有服务合同保存在单独的合同命名空间中，还是让它们存在每个服务命名空间。将它们分离到自己的命名空间中的原因是，如果其他服务使用它们，它们将处于更中立的位置。

所以例如这个：

```
companyname.services.contracts.service1contract
companyname.services.service1 
```

或这个：

```
companyname.services.service1
companyname.services.service1contract 
```

# python - 为匿名用户提供与注册用户相同的功能

> ID：925456
> 
> 赞同：9
> 
> 时间：2009-05-29T11:00:55.337
> 
> 标签：python, django, session

我正在 Django 中开发一个在线商店（现在只是一个基本的购物车），并且我计划为用户添加将项目标记为收藏的功能（就像在 stackoverflow 中一样）。购物车的模型如下所示：

```
class Cart(models.Model):
    user = models.OneToOneField(User)

class CartItem(models.Model):
    cart = models.ForeignKey(Cart)
    product = models.ForeignKey(Product, verbose_name="produs") 
```

收藏夹模型只是一个包含两行的表：用户和产品。

问题是这只适用于注册用户，因为我需要一个用户对象。我怎样才能让未注册的用户使用这些功能，将数据保存在 cookie/会话中，以及何时以及如果他们决定注册，将数据转移给他们的用户？

我想一种选择是某种通用关系，但我认为这有点复杂。*也许在用户*之后有一个额外的行是一个会话对象（直到现在我还没有真正在 django 中使用过会话），如果用户设置为无，使用它？

所以基本上，我想问的是，如果你以前遇到过这个问题，你是如何解决的，最好的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-29T11:04:43.553

我以前没有这样做过，但是通过阅读您的描述，当有人需要做一些需要它的事情时，我会简单地创建一个用户对象。然后，您向用户发送一个链接到此用户对象的 cookie，因此如果有人回来（不清除他们的 cookie），他们将获得相同的骨架用户对象。

这意味着您可以使用当前代码进行最少的更改，并且当他们想要迁移到完整的注册用户时，您只需使用他们的详细信息填充骨架用户对象。

如果您想让您的数据库保持整洁，您可以添加一个任务，删除过去 30 天内未使用的所有骨架用户。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-29T11:18:41.713

在我看来，最简单的方法是存储用户 ID 或会话 ID：

```
class Cart(models.Model):
    user = models.ForeignKey(User, null=True)
    session = models.CharField(max_length=32, null=True) 
```

然后，当用户注册时，您可以`request.session.session_key`使用他们的新用户 ID 更新所有行。

更好的是，您可以定义一个 " `UserProxy`" 模型：

```
class Cart(models.Model):
    user = models.ForeignKey(UserProxy)

class UserProxy(models.Model):
    user = models.ForeignKey(User, unique=True, null=True)
    session = models.CharField(max_length=32, null=True) 
```

因此，您只需在用户注册时更新 UserProxy 表，而无需更改购物车的任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T11:12:19.870

只需将用户数据保存在用户表中，然后不要填充用户 ID/密码表。

如果用户注册，那么您只需要填充这些字段。

您必须定期运行一些“清理”脚本，以清除在某个任意时间段内未访问过的任何用户。我会让这个清理成为可选的。并有一个可以在服务器端（或通过 Web 管理界面）运行的脚本来清除，以防您的客户想要手动执行。

记得删除所有相关条目以及用户条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T17:57:18.117

我认为您在考虑使用会话时走在正确的轨道上。我会在用户会话中存储一个产品 ID 列表，然后当用户注册时，按照您的定义创建一个购物车，然后添加项目。查看[会话文档](http://docs.djangoproject.com/en/dev/topics/http/sessions/)。

您可以允许未登录或没有帐户的人将商品添加到“临时”购物车。当此人登录任一帐户或创建新帐户时，将这些物品添加到他们的“真实”购物车中。然后，只需在“将商品添加到购物车”和登录功能中添加几行，您就可以使用现有模型。

# iphone - 滚动视图触摸检测

> ID：925459
> 
> 赞同：1
> 
> 时间：2009-05-29T11:01:43.027
> 
> 标签：iphone

我在`touchesMoved`处理程序中遇到了一个问题，其中一个视图被添加到`UIScrollView`. 我在滚动视图中添加了许多标签。这些标签中的每一个都包含一些文本，当我在标签上滑动手指时，我必须播放该文本的特定文件。

如果我只是直接将视图添加到窗口上，我可以`touchesMoved`毫无问题地获得所有触摸事件。当我将视图`UIScrollView`添加到窗口然后将其添加到窗口时，`touchesMoved`处理程序中存在一些滞后。我没有`touchesMoved`像正常视图那样获得连续的接触点。结果，当手指从视图中滑动时，会丢失一些标签。

问题是由于滚动视图吗？相同的代码在正常条件下完美运行（没有滚动视图）。

有没有人对此有任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T11:41:56.097

UIScrollView 在 touchDown 上设置了一个计时器，以便能够知道它是否应该处理滚动或者是否应该将事件传递给子视图。

UIScrollView 上有一个用于控制此行为的属性：

```
@property(nonatomic) BOOL delaysContentTouches 
```

# php - 使用PHP在数组中进行批处理

> ID：925461
> 
> 赞同：0
> 
> 时间：2009-05-29T11:02:40.530
> 
> 标签：php, arrays

我在从 xml 解析的数组中得到了数千个数据。我关心的是我的脚本的处理时间，它是否会影响我的脚本的处理时间，因为我有十万条记录要插入到数据库中？我有一种方法可以批量处理将数据插入到数据库中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:50:29.283

语法是：

```
INSERT INTO tablename (fld1, fld2) VALUES (val1, val2), (val3, val4)... ; 
```

所以你可以写smth。像这样（虚拟示例）：

```
foreach ($data AS $key=>$value)
{
    $data[$key] = "($value[0], $value[1])";
}
$query = "INSERT INTO tablename (fld1, fld2) VALUES ".implode(',', $data); 
```

这在大型数据集上运行得非常快，如果您的数据集适合内存，则不必担心性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T11:11:33.587

它不太可能影响处理时间，但您需要确保数据库的事务日志足够大，可以为 100k 行构建回滚段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T13:33:47.057

这是针对 SQL 文件的 - 但您可以遵循它的模型（如果不只是使用它） -

它将文件拆分为您可以指定的部分，例如 3000 行，然后以小于 1 秒到 1 分钟或更长的时间间隔插入它们。

这样一个大文件被分成更小的插入等。

这将有助于绕过编辑 php 服务器配置和担心内存限制等，例如脚本执行时间等。

新用户不能插入链接，所以谷歌搜索“sql big dump”或者如果这有效转到：www [dot] ozerov [dot] de [slash] bigdump [dot] php

因此，您甚至可以在理论上修改上述脚本以接受您的数组作为数据源而不是 SQl 文件。这显然需要一些修改。

希望能帮助到你。-R

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-30T09:50:42.010

或者使用 ADOdb 包装器 ( [http://adodb.sourceforge.net/](http://adodb.sourceforge.net/) )：

```
// assuming you have your data in a form like this:
$params = array(
             array("key1","val1"),
             array("key2","val2"),
             array("key3","val3"),
             // etc...
          );
// you can do this:
$sql = "INSERT INTO `tablename` (`key`,`val`) VALUES ( ?, ? )";
$db->Execute( $sql, $params ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-12T19:52:09.510

你有没有想过array_chunk？它在另一个项目中对我有用 [http://www.php.net/manual/en/function.array-chunk.php](http://www.php.net/manual/en/function.array-chunk.php)

# objective-c - Objective-C 中的线程

> ID：925468
> 
> 赞同：10
> 
> 时间：2009-05-29T11:07:30.723
> 
> 标签：objective-c, cocoa, multithreading

Objective C 中有线程吗？如果是这样，它们是如何声明和使用的？

如果有人知道 Objective C 中的多线程，请与我分享。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-29T11:27:09.670

在新线程中分离方法的一种简单方法是使用。

`+ (void)detachNewThreadSelector:(SEL)aSelector toTarget:(id)aTarget withObject:(id)anArgument`上`NSThread`。如果您没有运行垃圾收集，则需要设置自己的自动释放池。

如果您不想阻塞主线程，另一种简单的方法是使用。

`- (void)performSelectorInBackground:(SEL)aSelector withObject:(id)arg`上`NSObject`

根据您所追求的并发类型，您还应该看看`NSOperation`它可以为您提供免费锁定，以便您可以在多个线程之间共享它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-29T11:19:05.957

如果您正在使用 Cocoa 进行开发（即用于 mac 或 iphone），您可以访问`NSThread`该类，该类可用于多线程。谷歌搜索`NSThread`会找到你的 API。

您可以使用以下方式声明它：

```
NSThread *mythread = [[NSThread alloc] initWithTarget:target selector:selector object:argument]; 
```

其中 target 和 selector 是要启动线程的对象和选择器，argument 是要发送到选择器的参数。

然后使用 [mythread start] 启动它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-26T06:30:50.007

是的，Objective C 中有线程概念。在 Objective C 中有多种实现多线程的方法。

1> **NS线程**

```
[NSThread detachNewThreadSelector:@selector(startTheBackgroundJob) toTarget:self withObject:nil]; 
```

这将在后台创建一个新线程。从你的主线程。

2>**使用 performSelector**

```
[self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:YES]; 
```

如果你从后台线程调用它，将在你的主线程上执行 UI 任务......你也可以使用

```
[self performSelectorInBackground:@selector(abc:) withObject:obj]; 
```

这将创建一个后台线程。

3>**使用NS操作**

[按照这个链接](http://macresearch.org/node/4567)

4>**使用 GCD**

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self callWebService];
        dispatch_async(dispatch_get_main_queue(), ^{
            [self updateUI];
        });
    }); 
```

将`callWebService`在后台线程中，一旦完成。它将`updateUI`在主线程中。[更多关于 GCD](http://mikeash.com/pyblog/friday-qa-2009-08-28-intro-to-grand-central-dispatch-part-i-basics-and-dispatch-queues.html)

这几乎是 iOS 中使用的所有多线程方式。希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-29T12:18:36.117

您还可以查看[NSOperation](http://developer.apple.com/documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)

要查看这方面的示例，请查看 Drew McCormack 在[MacResearch](http://macresearch.org/cocoa-scientists-part-xxi-multi-threading-your-app-nsoperation-and-nsoperationqueue)上的帖子。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-26T15:57:20.873

在深入了解 detachNewThreadSelector 之类的东西之前：请务必查看 Apple 的官方文档。有关选项（包括操作队列、调度队列等）的高级概述，请参阅[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)。而且，要查看较低级别（且不太推荐）的线程，请参阅[Threading Programming Guide](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html)。

你绝对不想在没有阅读 Apple 就这个主题发表的内容的情况下就开始旋转线程。他们在[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)之类的东西上做了很多工作，以使编写并发程序更容易、更安全。

# java - Convolution Filter - Float Precision C Vs Java

> ID：925469
> 
> 赞同：4
> 
> 时间：2009-05-29T11:07:33.220
> 
> 标签：java, c, image, floating-point, convolution

I'm porting a library of image manipulation routines into C from Java and I'm getting some very small differences when I compare the results. Is it reasonable that these differences are in the different languages' handling of float values or do I still have work to do!

The routine is Convolution with a 3 x 3 kernel, it's operated on a bitmap represented by a linear array of pixels, a width and a depth. You need not understand this code exactly to answer my question, it's just here for reference.

Java code;

```
for (int x = 0; x < width; x++){
            for (int y = 0; y < height; y++){
                int offset = (y*width)+x;
                if(x % (width-1) == 0 || y % (height-1) == 0){
                    input.setPixel(x, y, 0xFF000000); // Alpha channel only for border
                } else {
                    float r = 0;
                    float g = 0;
                    float b = 0;
                    for(int kx = -1 ; kx <= 1; kx++ ){
                        for(int ky = -1 ; ky <= 1; ky++ ){
                            int pixel = pix[offset+(width*ky)+kx];
                            int t1 = Color.red(pixel);
                            int t2 = Color.green(pixel);
                            int t3 = Color.blue(pixel);

                            float m = kernel[((ky+1)*3)+kx+1];

                            r += Color.red(pixel) * m;
                            g += Color.green(pixel) * m;
                            b += Color.blue(pixel) * m;                     
                        }
                    }
                    input.setPixel(x, y, Color.rgb(clamp((int)r), clamp((int)g), clamp((int)b)));
                }
            }
        }
        return input; 
```

Clamp restricts the bands' values to the range [0..255] and Color.red is equivalent to (pixel & 0x00FF0000) >> 16.

The C code goes like this;

```
for(x=1;x<width-1;x++){
        for(y=1; y<height-1; y++){
            offset = x + (y*width);
            rAcc=0;
            gAcc=0;
            bAcc=0;
            for(z=0;z<kernelLength;z++){
                xk = x + xOffsets[z];
                yk = y + yOffsets[z];
                kOffset = xk + (yk * width);

                rAcc += kernel[z] * ((b1[kOffset] & rMask)>>16);
                gAcc += kernel[z] * ((b1[kOffset] & gMask)>>8);
                bAcc += kernel[z] * (b1[kOffset] & bMask);
            }

            // Clamp values
            rAcc = rAcc > 255 ? 255 : rAcc < 0 ? 0 : rAcc;
            gAcc = gAcc > 255 ? 255 : gAcc < 0 ? 0 : gAcc;
            bAcc = bAcc > 255 ? 255 : bAcc < 0 ? 0 : bAcc;

            // Round the floats
                    r = (int)(rAcc + 0.5);
            g = (int)(gAcc + 0.5);
            b = (int)(bAcc + 0.5);

            output[offset] = (a|r<<16|g<<8|b) ;
        }
    } 
```

It's a little different xOffsets provides the xOffset for the kernel element for example.

The main point is that my results are out by at most one bit. The following are pixel values;

```
FF205448 expected
FF215449 returned
44 wrong
FF56977E expected
FF56977F returned
45 wrong
FF4A9A7D expected
FF4B9B7E returned
54 wrong
FF3F9478 expected
FF3F9578 returned
74 wrong
FF004A12 expected
FF004A13 returned 
```

Do you believe this is a problem with my code or rather a difference in the language?

Kind regards,

Gav

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T11:13:21.787

After a quick look:

do you realize that (int)r will floor the r value instead of rounding it normally? in the c code, you seem to use (int)(r + 0.5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T12:08:21.427

Further to Fortega's answer, try [the `roundf()` function from the C math library](http://www.codecogs.com/reference/c/math.h/round.php).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T11:13:53.020

Java's floating point behaviour is quite precise. What I expect to be happening here is that the value as being kept in registers with extended precision. IIRC, Java requires that the precision is rounded to that of the appropriate type. This is to try to make sure you always get the same result (full details in the JLS). C compilers will tend to leave any extra precision there, until the result in stored into main memory.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T21:33:03.610

I would suggest you use double instead of float. Float is almost never the best choice.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T11:11:05.600

This might be due to different default round in the two languages. I'm not saying they have (you need to read up to determine that), but it's an idea.

# c# - 在 C# 中对对象列表进行排序

> ID：925471
> 
> 赞同：38
> 
> 时间：2009-05-29T11:08:44.340
> 
> 标签：c#, sorting, class, list

```
public class CarSpecs
{
  public String CarName { get; set; }

  public String CarMaker { get; set; }

  public DateTime CreationDate { get; set; }
} 
```

这是一个列表，我正在尝试找出一种有效的方法来按汽车制造日期对该列表列表 CarList 进行排序，其中包含 6 个（或任何整数数量）汽车。我本来打算做冒泡排序，但那行得通吗？有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-05-29T11:10:44.867

该类`List<T>`使这对您来说变得微不足道，因为它包含一个[`Sort`方法](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)。（它使用快速排序算法，而不是冒泡排序，这通常更好。）更好的是，它有一个带`Comparison<T>`参数的重载，这意味着你可以传递一个 lambda 表达式并使事情变得非常简单。

尝试这个：

```
CarList.Sort((x, y) => DateTime.Compare(x.CreationDate, y.CreationDate)); 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2009-05-29T11:13:35.953

您可以使用 LINQ：

```
listOfCars.OrderBy(x => x.CreationDate); 
```

编辑：使用这种方法，可以轻松添加更多排序列：

```
listOfCars.OrderBy(x => x.CreationDate).ThenBy(x => x.Make).ThenBy(x => x.Whatever); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-05-29T11:11:21.043

最好的方法是实现[`IComparable`](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)or [`IComparable<T>`](http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx)，然后调用[`List<T>.Sort()`](http://msdn.microsoft.com/en-us/library/3da4abas.aspx). 这将为您完成所有繁重的排序工作。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-05-29T11:16:42.733

另一种选择是使用自定义比较器：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace Yournamespace
{
   class CarNameComparer : IComparer<Car>
   {
      #region IComparer<Car> Members

      public int Compare(Car car1, Car car2)
      {
         int returnValue = 1;
         if (car1 != null && car2 == null)
         {
            returnValue = 0;
         }
         else if (car1 == null && car2 != null)
         {
            returnValue = 0;
         }
         else if (car1 != null && car2 != null)
         {
            if (car1.CreationDate.Equals(car2.CreationDate))
            {
               returnValue = car1.Name.CompareTo(car2.Name);
            }
            else
            {
               returnValue = car2.CreationDate.CompareTo(car1.CreationDate);
            }
         }
         return returnValue;
      }

      #endregion
   }
} 
```

你这样称呼它：

```
yourCarlist.Sort(new CarNameComparer()); 
```

注意：我没有编译此代码，因此您可能需要删除拼写错误

编辑：修改它，以便比较器根据相关请求在创建日期进行比较。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-29T11:21:31.037

我只会使用 List.Sort 方法中的构建。它使用平均运行时间为 O(n log n) 的 QuickSort 算法。

此代码应该适合您，我将您的属性更改为自动属性，并定义了一个静态 CompareCarSpecs 方法，该方法仅使用现有的 DateTime.CompareTo 方法。

```
class Program
{
    static void Main(string[] args)
    {
        List<CarSpecs> cars = new List<CarSpecs>();
        cars.Sort(CarSpecs.CompareCarSpecs);
    }
}

public class CarSpecs
{
    public string CarName { get; set; }
    public string CarMaker { get; set; }
    public DateTime CreationDate { get; set; }

    public static int CompareCarSpecs(CarSpecs x, CarSpecs y)
    {
        return x.CreationDate.CompareTo(y.CreationDate);
    }
} 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-08T21:05:35.213

把这里提到的一些部分放在一起。这在 C# 4.x 和 VS2010 中编译和工作。我用`WinForm`. 所以将方法添加到`WinForm` `Main()`. 您至少 需要`System.Linq`和s 程序集。`System.Generic.Collection`

```
 private void SortCars()
    {
        List<CarSpecs> cars = new List<CarSpecs>();
        List<CarSpecs> carsSorted = new List<CarSpecs>();

        cars.Add(new CarSpecs
        {
            CarName = "Y50",
            CarMaker = "Ford",
            CreationDate = new DateTime(2011, 4, 1),
        });

        cars.Add(new CarSpecs
        {
            CarName = "X25",
            CarMaker = "Volvo",
            CreationDate = new DateTime(2012, 3, 1),
        });

        cars.Add(new CarSpecs
        {
            CarName = "Z75",
            CarMaker = "Datsun",
            CreationDate = new DateTime(2010, 5, 1),
        });

        //More Comprehensive if needed  
        //cars.OrderBy(x => x.CreationDate).ThenBy(x => x.CarMaker).ThenBy(x => x.CarName);

        carsSorted.AddRange(cars.OrderBy(x => x.CreationDate));

        foreach (CarSpecs caritm in carsSorted)
        {
            MessageBox.Show("Name: " +caritm.CarName 
                + "\r\nMaker: " +caritm.CarMaker
                + "\r\nCreationDate: " +caritm.CreationDate);
        }
    }
}

public class CarSpecs
{
    public string CarName { get; set; }
    public string CarMaker { get; set; }
    public DateTime CreationDate { get; set; }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-29T11:12:28.093

如果您追求一种有效的排序方式，我建议您不要使用冒泡排序，而是使用快速排序。此页面对算法提供了相当好的解释：

[http://www.devhood.com/Tutorials/tutorial_details.aspx?tutorial_id=574](http://www.devhood.com/Tutorials/tutorial_details.aspx?tutorial_id=574)

祝你好运！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-29T11:17:46.583

我会避免编写自己的排序算法，但如果你还是要这样做，请查看[http://www.sorting-algorithms.com/](http://www.sorting-algorithms.com/)以了解不同排序算法的一些比较...

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-29T11:24:53.310

如果您使用的是 2.0，以下讨论可能有用：[C# List<> Sort by x then y](https://stackoverflow.com/questions/289010/c-list-sort-by-x-then-y)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-11T08:23:59.550

要扩展 Noldorin 的答案，可以使用 int 数据类型对列表进行排序：

```
listName.Sort((x, y) =>  x.CompareTo(y)); 
```

或者，如果您在列表中有一个复杂的对象：

```
inventoryList.Sort((x, y) =>  x.stockNumber.CompareTo(y.stockNumber)); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-18T20:44:36.237

如果您使用委托（也称为匿名方法），则不必实现任何 IComparer / IComparable 接口。

```
public static void Main(string[] args)
    {

      List<CarSpecs> list = new List<CarSpecs>();

      list.Add(new CarSpecs("Focus", "Ford", new DateTime(2010,1, 2));
      list.Add(new CarSpecs("Prius", "Toyota", new DateTime(2012,3, 3));
      list.Add(new CarSpecs("Ram", "Dodge", new DateTime(2013, 10, 6));

        list.Sort(delegate (CarSpecs first, CarSpecs second)
        {
            int returnValue = 1;
            if((first != null & second != null))
            {
                if (first.CarName.Equals(second.CarName))
                {
                    if (first.CarMaker.Equals(second.CarMaker))
                    {
                    returnValue = first.CreationDate.CompareTo(second.CreationDate);
                    }
                    else
                    {
                    returnValue = first.CarMaker.CompareTo(second.CarMaker);
                    }
                }
                else
                {
                    returnValue = first.CarName.CompareTo(second.CarName);
                }
            }
            return returnValue;
        });

    } 
```

# c# - 停止asp.net图像控件自动UrlEncoding ImageUrl参数

> ID：925472
> 
> 赞同：4
> 
> 时间：2009-05-29T11:09:23.450
> 
> 标签：c#, asp.net, encoding, user-controls

默认情况下，asp.net 图像控件会尝试提供帮助并自动对设置为 ImageUrl 属性的任何内容进行编码，因此：

```
imgSomething.ImageUrl = "Generator.aspx?x=1&y=2&z=3"; 
```

变成

```
"Generator.aspx?x=1&amp;y=2&amp;z=3" 
```

问题是我想传递 Base64 编码的参数，我需要手动 Server.UrlEncode 因为每个参数都可以包含会导致问题的字符。

所以基本上我的问题是：**如何阻止 Image 控件自动 UrlEncoding 我设置为 ImageUrl 参数的内容？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-11-27T01:00:33.133

我认为你应该使用服务器控制。不是asp控制。

```
<img ID="Image2" src="" alt="" runat="server" />
Me.Image2.Src = "&&&" 
```

有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T18:46:31.777

我们遇到了同样的问题。我们的解决方法是将所有参数打包成一个 URLEncoded 和 Base64 编码参数，并在另一侧自行拆分。我们在 WebResource.axd 和 ScriptResource.axd 中注意到了类似的方法。

快速而肮脏的方式（使用简单的辅助方法进行 Base64 编码/解码）：

```
string parameters = args.Join('|');
imgSomething.ImageUrl = "Generator.aspx?d=" + Server.UrlEncode(Base64Encode(parameters)); 
```

在 Generator.aspx 中：

```
string data = Base64Decode(Server.UrlDecode(Request.QueryString["d"].ToString().Trim()));
string[] parameters = data.Split('|'); 
```

如果您想使用查询字符串样式的参数字符串（即 x=1&y=2&z=3），有一堆示例代码可以让您在字符串和 NameValueCollection 之间移动。

# c# - c#中NetServerEnum()的问题

> ID：925475
> 
> 赞同：1
> 
> 时间：2009-05-29T11:10:34.727
> 
> 标签：c#, .net, winapi, networking, dllimport

我正在开发一个需要列出所有当前 LAN 机器的应用程序。

为了列出 LAN 上的所有工作站，我在导入后使用了 NetServerEnum()。

在运行程序时，它似乎工作正常。正确检测到两台现有机器。但是，我希望在需要时刷新列表（一些刷新按钮）。所以我从交换机上拆下了另一台计算机的电线，只在局域网上渲染了一台计算机。现在，当我运行程序时，它仍然列出了断开连接的机器。

如何解决这个问题？

代码如下：

```
namespace LanIpAddresses
{
    class NetApi
    {
        [DllImport ( "Netapi32.dll", EntryPoint = "NetServerEnum" )]
        public static extern Int32 NetServerEnum (
            [MarshalAs (UnmanagedType.LPWStr)] String serverName,
            Int32 level,
            out IntPtr bufferPtr,
            UInt32 prefMaxLen,
            ref Int32 entriesRead,
            ref Int32 totalEntries,
            UInt32 serverType,
            [MarshalAs (UnmanagedType.LPWStr)] String domain,
            IntPtr handle );

        [DllImport ( "Netapi32.dll", EntryPoint = "NetApiBufferFree" )]
        public static extern UInt32 NetApiBufferFree ( IntPtr buffer );
    }

    class EnumerateLanMachines
    {
        public const UInt32 SUCCESS = 0;
        public const UInt32 FAIL = 234;
        public const UInt32 MAX_PREFERRED_LENGTH = 0xFFFFFFFF;
        //public ArrayList machines = new ArrayList ( );

        enum ServerTypes : uint
        {
            WorkStation = 0x00000001,
            Server = 0x00000002
        }

        [StructLayout ( LayoutKind.Sequential, CharSet = CharSet.Auto )]
        public struct MachineInfo
        {
            [MarshalAs ( UnmanagedType.U4 )]
            public UInt32 platformId;

            [MarshalAs ( UnmanagedType.LPWStr )]
            public String serverName;
        }

        public enum Platform
        { 
            PLATFORM_ID_DOS = 300,
            PLATFORM_ID_OS2 = 400,
            PLATFORM_ID_NT = 500,
            PLATFORM_ID_OSF = 600,
            PLATFORM_ID_VMS = 700
        }

        public void enumerateMachines ( )
        { 
            IntPtr buffer = new IntPtr();
            int totalEntries = 0;
            int entriesRead = 0;
            int result;

            result = NetApi.NetServerEnum ( null, 100, out buffer, MAX_PREFERRED_LENGTH, ref entriesRead, ref totalEntries, (uint) ServerTypes.WorkStation, null, IntPtr.Zero );

            MachineInfo machineInfo;

            if (result != FAIL)
            {
                Console.WriteLine ( "Succeeded!" );
                Console.WriteLine ( entriesRead );
                for (int i = 0; i < entriesRead; ++i)
                {
                    machineInfo = (MachineInfo) Marshal.PtrToStructure ( buffer, typeof ( MachineInfo ) );

                    //machines.Add ( machineInfo );
                    Console.WriteLine ( machineInfo.serverName );

                    buffer = (IntPtr) ( (ulong) buffer + (ulong) Marshal.SizeOf ( machineInfo ) );
                }

                NetApi.NetApiBufferFree ( buffer );
            }
        }
    }
}
namespace LanIpAddresses
{
    class Program
    {
        private static IPHostEntry ipHost;
        static ArrayList ipList;

        static void Main ( string[ ] args )
        {
            EnumerateLanMachines enumerate = new EnumerateLanMachines ( );

            enumerate.enumerateMachines ( );

            /*foreach (EnumerateLanMachines.MachineInfo o in enumerate.machines)
            {
                Console.WriteLine ( o.platformId + " " + o.serverName );
            }*/

            Console.ReadLine ( );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-17T22:36:54.720

使用 NetServerEnum 时，就是使用 Windows 浏览器服务。主浏览器维护网络中的计算机列表。如果一台计算机在网络上宣布它自己然后被关闭，那么主浏览器会将该计算机保留在其列表中。

[http://support.microsoft.com/kb/188001](http://support.microsoft.com/kb/188001)

如果您改为向 Active Directory 询问网络中的计算机，那么您还将获得已注册计算机的列表，但这并不意味着列表中的所有计算机都在线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T06:19:45.463

我无法解决这个问题。但是，我选择了另一种方式——ping 整个可能的 IP 范围并连接到机器。

但是，我欢迎任何关于这个仍然挥之不去的问题的答案:)

# python - 需要帮助 facebook fql 查询

> ID：925476
> 
> 赞同：1
> 
> 时间：2009-05-29T11:10:42.900
> 
> 标签：python, django, facebook

我想知道为什么这段代码是错误的。

```
new_query = "SELECT time,message FROM status WHERE (uid=%s % request.facebook.uid) AND  time > someval.time"
new_result = request.facebook.fql.query(new_query) 
```

Someval.time 是根据 facebook 时间格式的正确时间格式。那么为什么它给我错误的代码？

```
new_query = "SELECT time,message FROM status WHERE (uid=%s % request.facebook.uid) 
```

给我正确的价值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-01-26T14:29:43.300

使用`me()`FQL 速记获取为其颁发令牌的用户 ID

`SELECT time,message FROM status WHERE uid=me()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T11:36:42.630

你的意思：

```
new_query = "SELECT ... AND  time > %s" % someval.time 
```

或类似的？

**编辑**：

您已经发布了几段如下所示的代码：

```
"Select something WHERE x=%s % something" 
```

百分号运算符及其参数都在引号内。你需要做这样的事情：

```
new_query = "SELECT time,message FROM status WHERE (uid=%s) AND (time>%s)" % \
            (request.facebook.uid, someval.time) 
```

# url - 有什么办法可以克服 URL 长度的 2k 字符限制？

> ID：925485
> 
> 赞同：4
> 
> 时间：2009-05-29T11:12:32.880
> 
> 标签：url

我认为 URL 长度只能是 2000 个左右的字符。否则，它会阻塞某些版本的 IE。有没有办法克服这个问题？

起初我在考虑 tinyurl，但 tinyurl 实际上会立即重定向到更长的 URL，所以这可能也会失败。

## **更新：**

**我需要这么长的 URL，因为我需要能够让人们为 URL 添加书签或通过电子邮件将其发送给其他人。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T11:16:31.437

这就是 POST 的用途；）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-29T11:32:11.327

出于书签的原因，您可以将参数字符串的哈希值存储在数据库中以及参数列表中。这样，当某人为某物添加书签时，他们会得到一个带有哈希的书签，并且您的内部软件会查找适当的参数并获取它们。

你本质上是在滚动你自己的小网址。

如果其他人想要为具有相同参数的页面添加书签，则哈希值将相同。

唯一的问题是您的哈希表会变得非常大，并且其中许多“书签”可能永远不会被使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-29T11:16:58.783

[HTML POST](http://www.htmlcodetutorial.com/forms/_FORM_METHOD_POST.html)专为传输大量数据而设计。你应该看看那个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T11:33:04.180

你的网址是什么样的？也许您可以使用 gzip 或 md5 来缩短它们，或者将它们存储在数据库中并将行的 id 放在 url 中？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-29T11:21:47.777

没有现实的方法来解决这个问题 - 这不是规范或类似的限制，而是在 IE 本身以及可能是如何分配 URL 的（顺便说一下，我相信限制实际上是 2083 个字符，出于某种原因）。

由于 IE 需要一次性将 URL 发送到服务器，所以我想不出任何巧妙的技巧可以让您解决它。我考虑的一些选项是通过 POST 而不是 GET 发送查询参数（但这通常在服务器端是不可互换的，客户端会以不同的方式对待它，因为 URL 不能出现在超链接中或被添加书签或手动输入，如果用户想要刷新，他们将收到“再次发送信息”警告，这是有道理的，因为 POST 旨在更新远程服务器上的信息，*并且*它只有在查询字符串超出限制而不是一些不虔诚的 URL 时才有效）。或者，您可以将 URL 分块，在 cookie 中设置溢出部分，然后向 URL 的存根发出请求，该存根足够智能，可以将上下文从 cookie 中提取出来并将其附加到实际接收到的 URL 中。然而，这再次使服务器上的处理变得复杂，可能远远超出一个琐碎的应用程序，并且仍然意味着您不能将该 URL 放在超链接或书签或其他任何东西中，因为它的重要部分是客户端状态。

基本上，其他一切都涉及重写服务器以某种方式拼凑额外的信息，如果你能够做到这一点，那么你应该能够简单地更改 URL 方案，使所有内容都低于 2000 个字符。所以不 - 没有真正的解决方法。

（尽管如果您可以使用 tinyurl 之类的东西作为*代理*，而不是向 URL 发出浏览器重定向，那可能会起作用）。

# c++ - 有没有办法检测字母数字 Unicode 符号？

> ID：925487
> 
> 赞同：4
> 
> 时间：2009-05-29T11:12:50.900
> 
> 标签：c++, string, winapi, unicode

我有一个由字母、数字和标点符号组成的 Unicode 字符串。我可以使用 C++ 标准库或 Win32 API 检测数字和字母字符（不一定是 ASCII）吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-29T13:07:28.657

**iswdigit()**、**iswalpha()**和**iswalnum()**是您正在寻找的功能。

干杯！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-29T13:42:38.210

另一种选择是 Win32 API 调用[GetStringTypeW()](http://msdn.microsoft.com/en-us/library/dd318119(VS.85).aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-29T11:55:04.590

我推荐ICU图书馆。它拥有所有的 Unicode 数据，以及一个体面的 C++ Unicode 字符串类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T11:16:32.217

[此 Microsoft 文档页面](http://msdn.microsoft.com/en-us/library/20bw873z%28VS.71%29.aspx)描述了正则表达式中的“Unicode 字符类”，这听起来非常相关。我认为答案在 .Net 域中，而不是纯 Win32 C++，但也许你可以挖掘一些东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-03-18T14:54:22.233

```
Private Declare Function GetStringTypeW Lib "Kernel32" (ByVal InfoType As Long, Text As Byte, ByVal Length As Long, Types As Integer) As Long
...
Dim S As String, B() As Byte, C() As Integer, L as Long
L = Len(S)
ReDim C(1 To L)
B = S
If GetStringTypeW(1, B(0), L, C(1)) Then
    'Character classes are in C.
Else
    'Something went wrong. Deal with it or call Err.Raise.
End If 
```

# asp.net - ObjectDataSource 插入引发错误（使用业务对象）

> ID：925490
> 
> 赞同：2
> 
> 时间：2009-05-29T11:13:30.197
> 
> 标签：asp.net, gridview, objectdatasource

**快速概览**

*   尝试使用 ObjectDataSource 插入业务对象（在 GridView 上）
*   得到以下错误

ObjectDataSource 'ObjectDataSource1' 没有要插入的值。检查“值”字典是否包含值。

**项目设置**

*   人员 - 简单的虚拟业务对象（姓名和年龄）
*   PersonBinder - 保存对象数据源的方法（在这种情况下选择和插入）
*   InsertGrid - 简单的 Grid（继承 GridView）在 Footer 上添加一个“Add”按钮，这反过来又调用 DataSource 的 Insert
*   默认 - ASPX 页面，包含网格和数据源，（将插入参数应用于 DataSorce）

注意我添加了 TODO 评论，我认为是关键领域

**编码**

*人物活页夹* 错过了这个人（它得到 2 个属性）这里是活页夹

```
/// <summary>
/// A binding Class.
/// </summary>
public class PersonBinder
{

    public IEnumerable<Person> Select()
    {
        List<Person> people = new List<Person>();

        for (int i = 0; i < 9; i++)
        {
            Person person = new Person();
            person.Name = "Name " + i.ToString();
            person.Age = i;
            people.Add(person);
        }

        return people;
    }

    public void Insert(Person p)
    {
        //TODO: the Insert Method
        //errors before this.
    }
} 
```

*插入网格*

```
public class InsertGrid : GridView
{
    protected override void OnInit(System.EventArgs e)
    {
        base.OnInit(e);
        ShowFooter = true;
        DataBind();
    }

    /// <summary>
    /// here to handle button clicks.
    /// </summary>
    private void ModeCommand(object sender, CommandEventArgs e)
    {
        switch (e.CommandName)
        {
            case "Add":

                //ObjectDataSource objectDataSource = DataSource as ObjectDataSource;
                ObjectDataSource objectDataSource = Parent.FindControl(DataSourceID) as ObjectDataSource;

                if (objectDataSource != null)
                {
                    //TODO: Errors HERE!
                    objectDataSource.Insert();
                }
                break;

        }

    }

    /// <summary>
    /// Raises the <see cref="E:System.Web.UI.WebControls.GridView.RowDataBound"/> event.
    /// </summary>
    /// <param name="e">A <see cref="T:System.Web.UI.WebControls.GridViewRowEventArgs"/> that contains event data.</param>
    protected override void OnRowDataBound(GridViewRowEventArgs e)
    {
        base.OnDataBound(e);
        //add an insert button
        if (e.Row.RowType == DataControlRowType.Footer)
        {

            ImageButton ibtnAdd = new ImageButton();
            ibtnAdd.ID = "Add";
            ibtnAdd.CommandName = "Add";
            ibtnAdd.ToolTip = "Add new Item";
            ibtnAdd.ImageAlign = ImageAlign.AbsMiddle;
            ibtnAdd.Style.Add("cursor", "pointer");
            ibtnAdd.CausesValidation = true;
            ibtnAdd.Command += ModeCommand;
            ibtnAdd.Enabled = true;
            e.Row.Cells[0].Controls.Add(ibtnAdd);

        }
    }
} 
```

*默认 HTML*

```
<form id="form1" runat="server">
<div>

    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
        DataObjectTypeName="GridViewSample.Person" InsertMethod="Insert" 
        SelectMethod="Select" TypeName="GridViewSample.PersonBinder">
    </asp:ObjectDataSource>
</div>
<br />
<cc1:InsertGrid ID="InsertGrid1" runat="server" AutoGenerateColumns="False" 
    DataSourceID="ObjectDataSource1">
    <Columns>
        <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
        <asp:BoundField DataField="Age" HeaderText="Age" SortExpression="Age" />
    </Columns>
</cc1:InsertGrid>
</form> 
```

*默认代码隐藏*

```
public partial class _Default : System.Web.UI.Page
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        //TODO: here is the insert PARAMs. what am i missing.
        ObjectDataSource1.InsertParameters.Add("Name", "");
        ObjectDataSource1.InsertParameters.Add("Age", "0");
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        //TODO: Tried this too
        IDataSource ds = ObjectDataSource1;
        DataSourceView view = ds.GetView(InsertGrid1.DataMember);
        Dictionary<string, string> values = new Dictionary<string, string>();
        values.Add("Name", "");
        //values.Add("Age", "0");

        view.Insert(values, delegate { return false; });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T13:09:27.013

以下确实有效。

```
IDataSource ds = ObjectDataSource1;
DataSourceView view = ds.GetView(InsertGrid1.DataMember);        
Dictionary<string, string> values = new Dictionary<string, string>();        
values.Add("Name", "");        
//values.Add("Age", "0");        
view.Insert(values, delegate { return false; }); 
```

我需要做的是删除/更换

```
//TODO: Errors HERE!                   
objectDataSource.Insert(); 
```

# php - 在 Flex 中创建链接

> ID：925492
> 
> 赞同：0
> 
> 时间：2009-05-29T11:13:37.653
> 
> 标签：php, apache-flex

```
private function google(event:ResultEvent):void
            {
                Alert.show(event.result.loginsuccess.keyword[0]);
                subtitle.visible=true;
                Results.visible=true;
                Occur.visible=true;
                query.visible=true;
                subtitle.text = "Search results for " +  event.result.loginsuccess.keyword[0];
                Results.text = event.result.loginsuccess.name;
                Occur.text = event.result.loginsuccess.occur;
                query.text = "query executed in " + event.result.loginsuccess.queryTime[0] + " Seconds";
            }
<mx:Text id="Results" x="130.5" y="180" text="Text" width="461" visible="false" fontWeight="bold" fontSize="16"/> 
```

我在此文本字段中获得了网站列表，但我需要使它们可点击。我该怎么做。我的意思是网站列表是随机的，可能是三个或四个或多个。

我从后端获得的格式是 PHP，并通过 XML 在 Flex 中获得响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:39:47.807

使用 HTML 文本，您需要根据从 php.ini 返回的任何结果自己生成它。

```
[Bindable]
private var link : String = '<p>some text here <a href="http://stackoverflow.com/questions/925492/creating-links-in-flex">stackoverflow</a> blah blah blah</p><p>even more text here <a href="http://www.bbc.co.uk">bbc</a> blah blah blah</p>'; 
```

然后在文本字段中，

```
<mx:Text htmlText="{link}"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T12:25:29.800

你有没有尝试过

[http://livedocs.adobe.com/flex/3/html/help.html?content=textcontrols_04.html](http://livedocs.adobe.com/flex/3/html/help.html?content=textcontrols_04.html)

彼得

# sql-server - 使用 SelectParameters 将日期和时间转换为 MS SQL 选择查询

> ID：925496
> 
> 赞同：0
> 
> 时间：2009-05-29T11:14:15.047
> 
> 标签：sql-server, vb.net, datetime, formatting

我有这种情况，我有一个 SqlDatasource 控件并且选择查询如下：

```
SELECT col1, col2 FROM table1 WHERE colDate = @date 
```

@date 的来源是带有文本的标签：2009-05-29 12:06:00 运行查询时出现以下错误：

> 从字符串转换日期和/或时间时转换失败

我尝试使用 convert(datetime, @date)，以及标签本身的不同日期/时间格式。每次我得到错误。

但是，当我在管理工作室中运行查询时，例如：

```
 SELECT col1, col2 FROM table1 WHERE colDate = '2009-05-29 12:06:00' 
```

它就像一个魅力！

有谁知道我错过了什么？

编辑：

我发现@date 被解析为 05-29-2009 01:30:00 TT 我不知道 TT 来自哪里？而且我确定 SQL Server 无法处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T11:42:01.120

发现了问题，我有一个 Now.ToString("MM/dd/yyyy hh:mm:ss TT") 将双 T 添加到 @date... 现在完美运行！

谢谢大家！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T11:20:49.417

请试试：

```
SELECT col1, col2 FROM table1 WHERE colDate = convert(datetime, @date,120) 
```

有关日期时间数据类型的可用转换格式的完整列表，请参阅以下 SQL Server 联机丛书参考：

[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T11:18:56.130

你可以试试

```
SELECT col1, col2 FROM table1 WHERE colDate = CONVERT(DATETIME, @date, 120) 
```

并尝试：

```
<SelectParameters>
  <asp:ControlParameter ControlID="label1" Name="date" PropertyName="Text" Type="DateTime" />
</SelectParameters> 
```

# mysql - 将 2 个下拉列表添加到关联表

> ID：925497
> 
> 赞同：0
> 
> 时间：2009-05-29T11:14:18.307
> 
> 标签：mysql, drop-down-menu

我在尝试使用 2 个下拉列表添加记录时遇到问题。我有一个名为 Urls 的表，其中包含 url 的详细信息。我有一个名为 category 的表填充了一个下拉列表，我有另一个名为 publishers 的表填充了另一个下拉列表。

```
 $query = 'INSERT INTO url_associations (url_id, url_category_id, approved, url_publisher_id) VALUES ';
        foreach ($_POST['types'] as $v){
            $query .= "($uid, $v, 'Y', $k), ";
        }
        $query = substr ($query, 0, -2); // Chop off the last comma and space.

        $result = @mysql_query ($query); // Run the query.

        if (mysql_affected_rows() == count($_POST['types'])) { // Query ran OK.

            echo '<p><b>Thank you for your submission!</b></p>';
            $_POST = array(); // Reset values.

        } else { // If second query did not run OK. 
```

上面的代码允许我使用类别下拉列表添加数据，但是当我尝试将 url_publisher_id 作为“海报”添加为 $k 时，我的解析中不断出现错误。如果有人能理解我正在努力实现您的帮助，将受到欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:27:06.850

如果 $k 变量的值不是整数或浮点数，则会出现错误，因为在构建 SQL INSERT 语句时它需要引号：

```
$query .= "($uid, $v, 'Y', '$k'), "; 
```

注意：您的示例中有一些主要的安全问题。如果您将来自 $_POST 的用户输入放入您的 SQL 中而不转义它，您就可以让用户运行他们想要在您的数据库上运行的任何 SQL 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T20:36:08.813

我添加了一个额外的数组 foreach ($_POST[posters] as $k)

//所以它读取

'foreach ($_POST[types] as $v) foreach ($_POST[posters] as $k) {`

它已经完美地执行了。

谢谢你的帮助。

肖恩

# iis - MSDeploy 是否支持网站和数据库升级？

> ID：925502
> 
> 赞同：3
> 
> 时间：2009-05-29T11:15:42.063
> 
> 标签：iis, deployment, msdeploy

我刚刚阅读了 Microsoft 的新网站部署工具 MSDeploy。我正在为我们的现成产品开发一个 Web 应用程序和一个 Web 服务的安装程序。我有几个问题我找不到明显的答案。

1.  MSDeploy 是否对初始部署后的网站升级提供强有力的支持？
2.  我可以看到 MSDeploy 对数据库的初始部署有很好的支持。但它是否支持在保留当前数据的同时升级模式？

解决这些特定问题的链接会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-30T07:50:54.437

1.  MSDeploy 是否对初始部署后的网站升级提供强有力的支持？

    *   是的，MSDeploy 适用于使目标与源相同的模型...因此，如果您创建网站包的第 2 版并将其应用到第 1 版服务器上，那么您的第 1 版服务器现在将拥有第 2 版站点...当然您也可以选择不删除服务器上的现有文件...
2.  我可以看到 MSDeploy 对数据库的初始部署有很好的支持。但它是否支持在保留当前数据的同时升级模式？

    *   MSDeploy 可以获取 SQL 脚本并在服务器上运行它们，因此，如果您通过增量数据库部署工具（如 TS Data 或 Red Gate）生成脚本并将它们打包到 MSdeploy 包中，那么您应该准备就绪......开箱即用 MSDeploy 不会进行数据/模式差异比较...

MSDeploy 还与 VS 2010 集成，您可以[在 VS 2010 中 Web 部署的概述文章中了解更多信息](http://vishaljoshi.blogspot.com/2009/09/overview-post-for-web-deployment-in-vs.html)

希望这可以帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-05-04T13:47:10.887

我一直在 msdeploy 中使用 runCommand 动词来执行我的数据库升级/迁移。我使用 tarantino，它将针对您的数据库运行增量更新脚本。使用 tarantino 之类的迁移工具的好处在于，它会跟踪应用的更改，以便您可以多次运行命令，而无需针对升级环境运行两次迁移。要查看实际情况，您可以查看 Code Camp Server 开源项目。构建和部署脚本展示了如何执行此操作，我们有 20 多个 sql 迁移脚本。 [http://codecampserver.org](http://codecampserver.org)

# c# - DrawRectangle 中的边框

> ID：925509
> 
> 赞同：30
> 
> 时间：2009-05-29T11:17:13.073
> 
> 标签：c#, graphics

好吧，我正在为我自己的控件编写 OnPaint 事件，我非常有必要让它精确到像素。

我对矩形的边框有一点问题。

见图片：

*删除了无效的 ImageShack 链接*

这两个矩形使用相同的位置和大小参数绘制，但使用的笔大小不同。看看发生了什么？当边框变大时，它已经吃掉了矩形（左侧）之前的可用空间。

我想知道是否有某种属性可以在矩形内绘制边框，这样到矩形的距离总是相同的。谢谢。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2010-04-27T10:51:59.650

您可以通过指定[PenAlignment来做到这一点](http://msdn.microsoft.com/en-us/library/z62ath7a.aspx)

```
Pen pen = new Pen(Color.Black, 2);
pen.Alignment = PenAlignment.Inset; //<-- this
g.DrawRectangle(pen, rect); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-29T11:39:16.680

如果您希望矩形的外部边界在所有方向上都受到约束，则需要根据笔宽重新计算它：

```
private void DrawRectangle(Graphics g, Rectangle rect, float penWidth)
{
    using (Pen pen = new Pen(SystemColors.ControlDark, penWidth))
    {
        float shrinkAmount = pen.Width / 2;
        g.DrawRectangle(
            pen,
            rect.X + shrinkAmount,   // move half a pen-width to the right
            rect.Y + shrinkAmount,   // move half a pen-width to the down
            rect.Width - penWidth,   // shrink width with one pen-width
            rect.Height - penWidth); // shrink height with one pen-width
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T11:26:13.027

这不是问题的直接答案，但您可能需要考虑使用该[`ControlPaint.DrawBorder`](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.drawborder.aspx)方法。您可以指定边框样式、颜色和各种其他属性。我也*相信*它可以为您调整边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T11:21:42.317

我猜不是...但是您可以将绘图位置移动到右下角笔大小的一半

# c++ - C++ 空字符串构造函数

> ID：925513
> 
> 赞同：16
> 
> 时间：2009-05-29T11:18:22.493
> 
> 标签：c++, string

我是 C++ 初学者，如果问题太基本，请见谅。

我试图收集字符串 constrcturs 并尝试所有它们（记住它们）。

```
string strA();          // string(); empty string // incorrect
string strB("Hello");   // string( const char* str)
string strC("Hello",3); // string( const char* str, size_type length)
string strD(2,'c');     // string( size_type lenght, const char &c)
string strE(strB);      // string( const string& s)

cout << strA << endl;
cout << strB << endl;
cout << strC << endl;
cout << strD << endl;
cout << strE << endl; 
```

除了**strA**之外，所有这些都有效。它打印“1”。**为什么？在这种情况下 strA 的类型是什么？当我不确定时如何检查东西的类型？**

我注意到正确的方法是这样的（顺便说一句，这似乎与其他构造函数不一致，有时括号有时没有括号）：

```
string strA; 
```

ps：粗体问题，通常不相关的答案将被否决。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-29T11:30:42.907

这是一个非常受欢迎的问题。C++ 语法是模棱两可的。解决歧义的规则之一是“如果某件事看起来像声明，那就是声明”。在这种情况下，您声明了一个函数原型，而不是定义一个变量。

```
string strA(); 
```

相当于

```
string strA(void); 
```

返回字符串的无参数函数的原型。

如果您希望显式调用无参数构造函数，请尝试以下操作：

```
string strA=string(); 
```

它不是完全等价的 - 这意味着“使用无参数构造函数创建一个临时字符串，然后将其复制以初始化变量 strA”，但允许编译器对其进行优化并省略复制。

编辑： [这是 C++ FAQ Lite 中的适当项目](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.2)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-29T11:24:32.107

它认为

```
string strA(); 
```

作为函数声明。

对于默认构造函数使用：

```
string strA; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-29T11:27:49.417

在 C++ 中，就像在 C 中一样，有一条规则说任何看起来像声明的东西都将被视为声明。

```
string strA(); 
```

看起来像一个函数声明，所以它被视为一个。你需要：

```
string strA; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-29T15:09:48.253

我不认为在这种情况下，“如果它可以是一个声明，它被认为是一个声明”的规则适用。因为在下面，*这两*件事都是声明

```
string a;
string a(); 
```

一个是对象的声明，另一个是函数的声明。该规则适用于其他情况。例如，在这种情况下：

```
string a(string()); 
```

在这种情况下，`string()`可能意味着两件事。

*   未命名函数参数的声明
*   创建默认构造的表达式`string`

此处适用，并且`string()`与以下命名参数的含义相同（在声明函数时，名称与参数无关）

```
string a(string im_not_relevant()); 
```

如果函数将数组或另一个函数作为参数，则该参数会衰减为指针。在函数参数的情况下，指向函数的指针。因此，它等价于以下内容，可能看起来更熟悉

```
string a(string (*im_not_relevant)()); 
```

但在你的情况下，它是进入方式的语法。就是说下面是一个函数声明。它永远不可能是一个对象的声明（即使这可能是程序员的意图！）

```
string a(); 
```

所以首先在这个上下文中没有歧义，因此它声明了一个函数。由于`string`有一个用户定义的构造函数，您可以省略括号，效果与预期相同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-29T12:23:46.590

它打印`1`是因为指向函数的指针总是转换为数字，因为`true`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-29T14:29:25.433

tkopec 关于为什么它不起作用是正确的。要回答您的第二个问题，请按照以下方式检查类型：

```
template<typename TEST> void Error_() {
   TEST* MakeError = 1;
} 
```

通过调用`Error_(StrA);`你会得到一个编译错误，你的编译器可能会告诉你它发生在`Error_< std::basic_string<char, std::allocator<char> > (*)(void)>(std::basic_string<char, std::allocator<char> > (*)(void))` 现在，std::basic_string> 只是std::string，所以这真的意味着`Error_< std::string (*)(void)> (std::string (*)(void))`. '<>' 之间的部分在'()' 之间重复，这就是strA 的类型。在这种情况下，`std::string (*)(void)`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-29T11:29:28.340

编译器解释`string strA()`为函数的函数原型，它接受 void 参数并返回字符串类型的对象。如果要创建一个空字符串对象，请使用`string strA;`（不带括号）

# sql - 来自 DB2 的 SQL 转储

> ID：925519
> 
> 赞同：10
> 
> 时间：2009-05-29T11:19:08.780
> 
> 标签：sql, db2, dump

我试图将一个 IBM DB2 UDB 服务器中特定模式的内容转储到一个 sql 文本文件中（很像 mysql 的 mysqldump 功能）。

我遇到了 db2look，但它只转储模式的结构（只有 ddl，没有 dml）。

那么我怎样才能完成我的事情呢？

jrh

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-29T15:41:18.393

您正在寻找的是[db2move](https://www.ibm.com/support/knowledgecenter/en/SSEPGG_11.1.0/com.ibm.db2.luw.admin.cmd.doc/doc/r0002079.html)命令。对于特定模式，您应该使用“sn”开关。

因此，例如导出数据：

```
db2move [your_db_name] EXPORT -sn [your_schema_name] 
```

db2move 有许多可用的选项和开关，具体取决于您想要做什么。

如果 db2move 不是您所需要的，您可以查看[DB2 中可用的数据移动选项](https://www.ibm.com/support/knowledgecenter/en/SSEPGG_11.1.0/com.ibm.db2.luw.admin.dm.doc/doc/r0024482.html)表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-29T12:25:35.743

您可以使用[SQquirreL](http://www.squirrelsql.org/)（一个用 Java 实现的 SQL 客户端）来完成此操作。在其“对象”树中，您将选择所有所需的表并从上下文菜单中选择“脚本 > 创建数据脚本”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T12:38:56.873

如果目标是将数据传输回另一个 DB2 数据库，您可以使用`EXPORT`, 和相关的`IMPORT`or命令。`LOAD`

实际上，您可以根据元数据生成语句`SYSCAT.TABLES`

**出口**

```
 SELECT 'EXPORT TO /usr/data/SCHEMA/' || TABNAME || '.ixf OF IXF LOBS TO /usr/data/SCHEMA/lbos/ MODIFIED BY LOBSINFILE SELECT * FROM SCHEMA.' || TABNAME || ';'
     FROM SYSCAT.TABLES
    WHERE TABSCHEMA = 'SCHEMA'
 ORDER BY TABNAME 
```

**进口**

```
 SELECT 'IMPORT FROM /usr/data/SCHEMA/' || TABNAME || '.ixf OF IXF LOBS FROM /usr/data/SCHEMA/lobs/ MODIFIED BY LOBSINFILE INSERT INTO SCHEMA.' || TABNAME || ';'
     FROM SYSCAT.TABLES
    WHERE TABSCHEMA = 'SCHEMA'
 ORDER BY TABNAME 
```

如果您想要实际的插入脚本，那么您可能需要使用第三方工具（我不知道 DB2 提供了一个工具，尽管我可能是错的。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-14T05:43:08.707

具有所有 DDL 备份的 Db2 模式：

我使用了下面的命令，它对我导出所有 DDL 很有用。

```
db2look -d CusDb -x -e -z CusSchema -o OutputFile 
```

语法：**db2look -d DbName -x -e -z SchemaName -o OutputFile_name**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-10T21:04:38.223

对于导入，稍微调整以使用负载有助于避免行被拒绝。

db2 -x "SELECT 'load FROM /usr/data/SCHEMA/' || TABNAME || '.ixf OF IXF LOBS FROM /usr/data/SCHEMA/ MODIFIED BY identityoverride INSERT INTO CFEXT.' || TABNAME || ';'FROM SYSCAT.TABLES WHERE TABSCHEMA = 'CFEXT' ORDER BY TABNAME" > /tmp/db2cfeimport.sql

# deployment - MSDeploy 是否足够“友好”，或者是否可以将其包含在 MSI 文件中

> ID：925521
> 
> 赞同：5
> 
> 时间：2009-05-29T11:19:28.687
> 
> 标签：deployment, wix, windows-installer, msdeploy

在您看来，MSDeploy 软件包是否是让最终用户在其系统上安装 Web 应用程序的好选择。它与使用 MSI 文件安装 Web 应用程序的体验相比如何？

有没有人尝试在 MSI 包中包装 MSDeploy 包？它会起作用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T17:01:10.917

在我看来，MSDeploy 是一种有助于在机器之间同步网站的工具，就像 AppCenter 用来将配置良好的主机复制到多台机器的方式一样。Windows 安装程序（用于 IIS 和 SQL 配置的 MSI + WiX CustomActions）是关于将包应用于修改事务状态的机器。它遵循更传统的打包软件模型。

这是解决机器配置问题的两种不同方法。每个都围绕一组不同的要求进行了优化。MSDeploy = 复制机器状态。MSI = 在事务中应用更改。

你能把 MSDeploy 扔进 MSI 吗？大概。它会运作良好吗？也许，如果您忽略有关交易的部分。在我看来，这是关键的区别。在您要声明要分发的配置并使其完全应用或根本不应用（即不要最终处于中间/破坏状态）的环境中，基于包的安装似乎是合适的。

如果您有一台配置得恰到好处的机器，并且想让一堆机器看起来像它（并且愿意让失败的机器停止旋转并重复该过程，直到它被击败提交），那么 MSDeploy 似乎是合适的。

您的问题中没有足够的信息来建议哪个效果更好......但我认为它们不会在一起。<微笑/>

# java - 使用 Java 进行网络时间同步

> ID：925524
> 
> 赞同：0
> 
> 时间：2009-05-29T11:20:27.873
> 
> 标签：java, networking, synchronization, streaming, timing

我正在使用 Java 创建一个 p2p 音频-midi 流应用程序（不幸的是），我正在寻找一种方法来使用可靠的协议实现（如 NTP）在某些对等点（源）之间提供网络时间同步，但我找不到任何相关的库都可以使用。我也有有限的时间来自己实现这样的东西。那么，有谁知道使用 Java、NTP 或替代协议/方法/想法进行网络时间同步的任何解决方案？我真的很感激任何想法！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T11:25:09.923

[Jakarta Commons](http://commons.apache.org/net/)有一个[NTP 组件](http://commons.apache.org/net/apidocs/org/apache/commons/net/ntp/package-summary.html)和[示例](http://commons.apache.org/net/apidocs/examples/ntp/package-summary.html)。

# .net - 对 ASP.NET 2.0 Web 服务进行版本控制的最佳方式是什么？

> ID：925525
> 
> 赞同：9
> 
> 时间：2009-05-29T11:20:38.230
> 
> 标签：.net, asp.net, soap, versioning

我正在维护一个 SOAP Web 服务（ASP.NET 2.0 版），我必须进行一些更改以修改特定方法的返回值。

在不破坏现有实现的情况下，普遍接受的方法是什么。

我最初的想法是，以下都是可能的。

a) 在现有 Web 服务中提供特定于新版本的方法，例如 getPerson_v1.4
b) 提供带有新版本号的 .asmx 文件的完整副本，例如 http://www.example.com/AdminWS_V1_4.asmx。这不是我喜欢的想法，因为该服务有 50 多个方法，并且复制该代码以更改 2/3 方法似乎太多重复的代码。
c) 覆盖 Web 服务构造函数以允许传入版本号。这似乎不起作用，经过反思，我不确定在 WSDL 中如何表示

是否有一种普遍接受的方式来做到这一点，或者人们是否根据他们在该领域的经验提出建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T11:23:04.497

我们部署到版本目录，例如：

[http://www.example.com/soap/v1/](http://www.example.com/soap/v1/) [http://www.example.com/soap/v2/](http://www.example.com/soap/v2/) [http://www.example.com/soap/v3/](http://www.example.com/soap/v3/)

等等

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-29T12:47:51.800

在一般情况下，对 Web 服务进行版本控制不仅仅是对方法名称和 .asmx 文件名进行版本控制。理想情况下，Web 服务的接口（它的 WSDL）应该是一个永久契约，并且永远不应该改变。其中一个含义是不需要更改功能的客户端永远不需要更改，因此永远不需要重新测试。

您应该创建一个包含更改的操作的新合同，而不是破坏现有合同。该合同可以“继承”现有合同，即您可以“将方法添加到末尾”。但是请注意，您还应该将新合同放入一个新的 XML 名称空间——名称空间基本上标识了 WSDL，保留名称空间但更改 WSDL 将是一个谎言。

然后，您应该在新端点（.asmx 文件）上实施这个新合同。这是否在不同的目录中，甚至在不同的网站上并不重要。重要的是，想要新功能的客户可以在新 URL 处引用新 WSDL 并在其新 URL 处调用新服务，并且很高兴。

请注意，更改现有合同的一个影响是，下次执行“更新 Web 引用”时，您将*更改*客户端代理类的代码。在大多数商店中，更改代码需要重新测试和重新部署。因此，您应该将“仅添加方法”视为“仅添加一些必须测试和部署的客户端代码”，即使现有客户端代码不使用新方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T23:14:02.547

我正在开发的 Web 服务存在相同的版本控制问题。我们让我们的用户在标头中传递模式版本号。他们告诉我们他们想要返回哪个版本的 XML 模式。这样，我们总是向后兼容并且代码不会重复。

在我的工作中，我们无法告诉客户在我们对其进行版本化时他们必须将 URL 切换到 Web 服务。在大公司中，小到 URL 的更改可能需要几个月的测试。我的感觉是你不应该中断你的客户联系。我们所做的是，为最新版本添加新功能。当客户要求新功能时，如果他们需要，他们将被迫升级到最新的模式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T12:29:18.903

我刚刚想到了另一种可能的解决方案，它看起来很干净。

我可以检查包含为 SOAP 标头的版本号，如果未提供，则假定现有版本号。

然后，我可以在不更改方法签名的情况下使不同版本的代码表现不同。这是可能的，因为来自 Web 服务的返回值是 XML 对象，因此方法签名保持不变，但 XML 的内容会根据版本而变化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T11:30:55.573

除非您在每个新版本中更改大多数方法签名，否则我会使用 (a) - 版本化方法名称。这就是我们的供应商的做法，而且对我们来说效果很好。

# hibernate - Hibernate 特定的 DDL 生成

> ID：925536
> 
> 赞同：1
> 
> 时间：2009-05-29T11:23:05.513
> 
> 标签：hibernate

我正在使用休眠模式导出工具。当我使用 MySql 作为 RDBMS 提供程序时，我想知道我是否可以将特定的 mysql 参数放置在某处，例如使用排序规则 utf8_bin ...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T13:30:04.070

我不同意[gid](https://stackoverflow.com/users/31480/gid)。Hibernate 允许您定义自己的或更改将对生成的 DMS 产生影响的标准方言。一些细节可以[在文章](http://www.javaworld.com/javaworld/jw-08-2008/jw-08-hibernate-annotations.html)中找到。我们正在使用该方法为 Microsoft SQL Server、Oracle 和其他支持的数据库生成特定参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T12:11:02.513

简短的回答是否定的，没有办法做到这一点。Hibernate 仅建议您使用模式导出工具作为起点，因此没有任何明显的挂钩点，您可以在其中将 db 特定的东西添加到 create 语句中。

可能的解决方法：

1.  在类路径上创建一个`import.sql`，导出将在所有生成的语句之后运行它，您也许可以运行一些改变表格样式的东西来进行您需要的更改
2.  扩展 mysql 方言以添加您需要的选项可能会有一些困难。我还没有查看它是否有足够的挂钩点来更改排序顺序之类的东西，但恐怕它和你得到的一样好。

# csv - 将 .csv 文件转换为 xml 或 json 时保留层次结构

> ID：925537
> 
> 赞同：1
> 
> 时间：2009-05-29T11:23:46.073
> 
> 标签：csv, jaxp

我有一个关于将数据从 CSV 转换为 XML 或 JSON 的问题，其中必须保留数据的层次结构。

例如，如果我有这样的 CSV 数据：

```
type,brand,country,quantity
apple,golden_delicious,english,1
apple,golden_delicious,french,2
apple,cox,,4
apple,braeburn,,1
banana,,carribean,6
banana,,central_america,7
clememtine,,,3 
```

我想要的是保留 XML 中的层次结构，以便我得到类似的东西：

```
<fruit>
<type = "apple">
<brand = "golden_delicious">
<country = "english" quantity =  "1">
<country = "french" quantity =  "2">
</brand>
<brand = "cox">
<quantity =  "4">
</brand>
<brand = "braeburn">
<quantity =  "1">
</brand>
</type>
<type = "banana">
<country = "carribean" quantity =  "6">
<country = "central_america" quantity =  "7">
</type>
<type = "clementine">
<quantity =  "3">
</type>
<fruit /> 
```

是最好尝试使用 JAXP 还是将上面的内容简单地转换为父子表，然后将数据写入字符串数组进行处理，？像这样：

```
parent,child 
fruit,apple
apple,golden_delicious
golden_delicious,english
golden_delicious,french
english,1
french,2
apple,cox
cox,4
apple,braeburn
braeburn,1 
```

等等。

或者，还有更好的方法？

谢谢

西蒙·莱文森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:37:37.453

如果 csv 没有按顺序排序会发生什么？

无论如何，当尝试解析 csv 文件时，请使用： http: [//www.codeproject.com/KB/database/CsvReader.aspx](http://www.codeproject.com/KB/database/CsvReader.aspx)

它非常快速且易于使用

R

# visual-studio - VC++ 中热键的奇怪行为

> ID：925539
> 
> 赞同：1
> 
> 时间：2009-05-29T11:23:59.737
> 
> 标签：visual-studio, visual-c++, mfc, hotkeys

我有一个用 VC++ 编写的对话框，如下所示：

* * *

标签 1 控件 1

* * *

按钮1

* * *

如果 Control1 被禁用，使用 Label1 的热键会导致 Button1 的 Click 事件。我怎么能避免呢？由于 Control1 被禁用，Label1 的热键也不应该吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:16:56.933

如果它是 CStatic，您是否尝试在它引用的控件的同时禁用它？

# visual-studio - 如何解决 Visual Studio 中的以下链接器错误？

> ID：925540
> 
> 赞同：6
> 
> 时间：2009-05-29T11:24:06.587
> 
> 标签：visual-studio, visual-studio-2008, clr

这是我的场景。我有一个包含 30 个子项目的项目。在其中一个项目中，我使用了 CLR（公共语言运行时），因此我使用 /mdd（多线程调试 DLL）修改了它的运行时。

单独地，所有项目都成功构建。但是当我尝试编译主项目时，我收到以下链接器错误：

```
LINK : warning LNK4098: defaultlib 'MSVCRTD' conflicts with use of other libs; use /NODEFAULTLIB:library

LIBCMTD.lib(winxfltr.obj) : error LNK2005: __XcptFilter already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(invarg.obj) : error LNK2005: __invalid_parameter already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(invarg.obj) : error LNK2005: __invoke_watson already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(crt0.obj) : error LNK2005: _mainCRTStartup already defined in MSVCRTD.lib(crtexe.obj)
LIBCMTD.lib(fclose.obj) : error LNK2005: _fclose already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(printf.obj) : error LNK2005: _printf already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(mbstowcs.obj) : error LNK2005: _mbstowcs already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(dbgrptw.obj) : error LNK2005: __CrtDbgReportW already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(wcstombs.obj) : error LNK2005: _wcstombs already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(tzset.obj) : error LNK2005: __tzset already defined in MSVCRTD.lib(MSVCR80D.dll)
LIBCMTD.lib(stricmp.obj) : error LNK2005: __stricmp already defined in MSVCRTD.lib(MSVCR80D.dll) 
```

如何解决这一切？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2010-03-02T22:43:18.077

LIBCMTD 是静态多线程 C 运行时库的调试版本。MSVCR80D 是基于 DLL 的多线程 C 运行时库的调试版本。你的一些子项目需要一个，一些另一个。这是微软的烂摊子，但你必须处理它。选择一个，比如说，多线程调试 DLL，并将其专门用于项目的调试版本和所有子项目。Microsoft 许可证（有人告诉我）要求您对已发布的软件使用非调试版本。

有关详细信息，请参阅以下内容： [单击。](https://stackoverflow.com/questions/2360084/runtime-library-mis-matches-and-vc-oh-the-misery)

[![截屏](https://i.stack.imgur.com/vKygk.png)](https://i.stack.imgur.com/vKygk.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-29T11:29:14.407

似乎您的某些项目使用静态运行时库。（并且您为您的一个项目选择了动态）此组合不受支持。

让我想起：[Visual C++ 中多个项目之间的链接器错误](https://stackoverflow.com/questions/604484/linker-errors-between-multiple-projects-in-visual-c)

# vba - 在 Outlook 2007 中使用指定语言的 VBA 进行拼写检查

> ID：925547
> 
> 赞同：1
> 
> 时间：2009-05-29T11:25:30.513
> 
> 标签：vba, outlook, spell-checking

我正在尝试使用以下宏进行拼写检查并发送 Outlook 电子邮件：

```
Sub SpellIt()
Dim oMail As Outlook.MailItem
Dim oDoc As Word.Document

Set oMail = Application.ActiveInspector.CurrentItem
Set oDoc = Application.ActiveInspector.WordEditor

oMail.Save    
oDoc.Content.LanguageID = wdGerman

oDoc.CheckSpelling

oMail.Save

oMail.Send
End Sub 
```

* * *

我需要能够将语言明确设置为德语，我发现可以使用 Content.LanguageID 来完成，但这不包括主题行。如何设置主题行的语言？当然，能够为整个文档设置它会更好，但我不能将 LanguageID 应用于 .Document

有任何想法吗？

谢谢，雷托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T12:24:37.947

wordeditor 用于电子邮件的正文（在某些情况下它也将为空）。因此，您将无法以这种方式使用它。

oMail.Subject 将为您提供主题文本，我想您可以将其复制到新文档中并进行拼写检查，然后将其复制回来？或将其插入到您已知范围内的wordeditor中，然后检查并将主题设置回删除原始范围等。

# serialization - 无法将对象序列化为仅 ViewState 会话

> ID：925553
> 
> 赞同：4
> 
> 时间：2009-05-29T11:27:44.347
> 
> 标签：serialization, viewstate

我有一个标记为可序列化的类，并且将其存储在 Session 中没有问题，但是当我尝试将其保存在 ViewState 中时，我得到：

Sys.WebForms.PageRequestManagerServerErrorException：序列化值时出错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T12:07:03.927

原因是视图状态序列化是由[`LosFormatter`](http://msdn.microsoft.com/en-us/library/system.web.ui.losformatter.aspx)类完成的，而会话序列化是由[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)类完成的。两者有细微的不同，这些细微的差异之一可能会导致您的问题。

看看[这篇文章](http://weblogs.asp.net/vga/archive/2004/06/09/ViewstateSerializationOneMoreTime.aspx)和文档，`LosFormatter`看看你是否能找到一些关于什么导致你的问题的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-05T14:18:33.407

好吧，这还取决于您使用哪种会话。如果它是进程内的，则根本不会进行序列化。您的对象被存储到内存中。

# matlab - How to plot a nonlinear system of 3 equations with 3 symbolic variables in MATLAB?

> ID：925555
> 
> 赞同：1
> 
> 时间：2009-05-29T11:27:51.853
> 
> 标签：matlab, plot

I don't have a lot of experience with Matlab. I know that you can plot equations with 2 variables like this:

```
ezplot(f1)
hold on
ezplot(f2)
hold off; 
```

How would you plot three equations with **three** symbolic variables?

An example system would be:

```
x^2+y^2+z^2-1=0
2*x^2+y^2-4*z=0
3*x^2-4y+z^2=0 
```

It would be ideal if there was a way to plot any system of 3 equations.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T14:36:28.587

I believe [`ezsurf`](https://www.mathworks.com/help/matlab/ref/ezsurf.html) comes close to what you want. You would first have to solve each equation for `z`, then make a function for that equation and plot it with `ezsurf`. Here's how to do it with your first equation from above:

```
func1 = @(x, y) sqrt(1-x.^2-y.^2);
ezsurf(func1); 
```

This should display the upper half of a sphere.

To display all three equations together, you can do the following:

```
func1 = @(x, y) sqrt(1-x.^2-y.^2);
func2 = @(x, y) 0.5.*x.^2+0.25.*y.^2;
func3 = @(x, y) sqrt(4.*y-3.*x.^2);
ezsurf(func1, [-1 1 -1 1]);
hold on;
ezsurf(func2, [-1 1 -1 1]);
ezsurf(func3, [-1 1 -1 1]);
axis([-1 1 -1 1 0 1]); 
```

and the resulting plot will look like this:

[![enter image description here](https://i.stack.imgur.com/m7WB8.jpg)](https://i.stack.imgur.com/m7WB8.jpg)

By rotating the plot, you will notice that there appear to be two points where all three surfaces intersect, giving you two solutions for the system of equations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T13:25:46.653

"hold on" just says to not erase existing lines & markers on the current axis. you should just be able to do

```
ezplot(f1);
hold on;
ezplot(f2);
ezplot(f3);
hold off; 
```

I've never used ezplot so can't help you with that one.

# javascript - 正则表达式字符串后跟Javascript中的数字

> ID：925560
> 
> 赞同：1
> 
> 时间：2009-05-29T11:29:17.183
> 
> 标签：javascript, regex

我将 myArray 设为空。谁能帮我？

```
myRe = new RegExp ("[A-Z]+(\\d+)");
myArray = myRe.exec("book1");
alert(myArray.length); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T11:31:22.530

您的正则表达式区分大小写；尝试：

```
myRe = new RegExp ("[A-Za-z]+(\\d+)"); 
```

或者：

```
myRe = new RegExp ("[A-Z]+(\\d+)", "i"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T11:36:57.683

这是因为您使用 [AZ] 表示大写。

改用这个：

```
pattern = /[a-z](\d+)/i;
myArray = pattern.exec("BOOK1");
alert(myArray.length); 
```

# svn - 如何将 svn 存储库路径设置为服务器路径？

> ID：925564
> 
> 赞同：2
> 
> 时间：2009-05-29T11:29:28.697
> 
> 标签：svn

SO上有人说设置源代码控制，需要5分钟。它需要很长时间，它很繁琐，而且很痛苦！而且我不明白工作流程

反正。我在 server1 上安装了 svn。Server1 还用于存储我们所有现有的源代码和项目，这些源代码和项目现已添加到 server1 上各自的存储库中。我们有三个开发人员在机器 1、2 和 3 上工作。当我们在 Visual Studio（使用 VisualSVN）中打开服务器 1 上的工作副本项目时，repos 的文件路径当然是 file:///d:/foo提交您会收到一条错误消息，指出找不到 file:///d:/foo 因为它在服务器上而不是机器上。

你如何让它指向 file://\server/d$/foo？

我试过了

svn switch --relocate file:///d:/foo file://\server/d$/foo

不工作

我无法理解的工作流程部分就是这个。如果我检查一个类项目的工作副本并编译它。我是否将新的 dll 从我的工作副本移动到生产环境？还是我将 dll 重新检入源代码管理，然后将其从源代码管理移至生产环境？如果多个项目使用该 dll，我是将其从源代码控制中取出到所有项目都查找的某个文件夹中，还是将其复制到所有项目的 bin 文件夹中。头痛

**编辑：** 感谢您的所有意见，我会坚持这一点！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T11:38:46.823

是的，源代码管理只需要几分钟的时间来设置，但是，了解它的工作原理是关键。

为了回答这个问题，最好解释源代码控制的工作原理以及您应该期望从中得到什么。

这本书[http://svnbook.red-bean.com/](http://svnbook.red-bean.com/)（您可以直接在线阅读）对它的工作原理有很好的解释。前几章是您真正需要浏览的所有内容，以掌握基础知识。

一旦你掌握了书中的基本大纲，你的实现哪里出了问题就会变得很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T11:37:51.113

我怀疑您使用 UNC 名称以便在仍然使用 file:// 方案的同时拥有基于网络的存储库是这里的问题。回购主机上应该有一个 SVN 服务器。这将不会使用 file:// 方案联系。

关于检查编译输出，简而言之，不要。颠覆中的内容应该可以由每个客户从头开始构建。编译的二进制文件在 subversion repo 中没有位置，除非（可能）它们来自第 3 方并且对构建至关重要。

“如果多个项目使用 dll 怎么办，我是将其从源代码控制中取出到所有项目都查找的文件夹中，还是将其复制到所有项目的 bin 文件夹中”......没有答案。对不起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T11:47:08.957

SVN Book 建议*不要*对多个用户使用 file:// 协议

[选择服务器配置](http://svnbook.red-bean.com/en/1.5/svn.serverconfig.choosing.html)：

> 不要被让所有用户直接通过 file:// URL 访问存储库的简单想法所诱惑。即使每个人都可以通过网络共享随时使用存储库，这也是一个坏主意。它消除了用户和存储库之间的任何保护层：用户可能意外（或故意）损坏存储库数据库，使存储库脱机以进行检查或升级变得困难，并且可能导致文件权限问题混乱（请参阅名为“支持多种存储库访问方法”的部分）。请注意，这也是我们警告不要通过 svn+ssh:// URL 访问存储库的原因之一——从安全角度来看，它实际上与本地用户通过 file:// 访问相同，并且可能会带来所有相同的问题如果管理员不小心

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T11:52:46.590

缺口：

挂在那里。不要放弃源代码控制！相信我，你现在所走的学习曲线将在未来得到回报。

回复：您的工作流程问题，您遇到了如何构建软件的问题。这里有很多方法可以使用，但基础是这样的。当您编译您的应用程序时，请确保您的工件（.exe、.dll 等）标记为 svn:ignore（在 Tortoise 中，您只需说“添加到忽略列表”）。这将使 SVN 无法检查您的构建。您不希望从开发人员副本中签入您的构建工件，因为它占用了大量空间，并且会产生大量冲突。

您有几个选择，但我会根据您告诉我的内容为您的工作流程提出建议：

在源代码控制之外构建您的 DLL。在 SVN 中，为您的“已发布”代码设置一个目录——对我来说，它是我项目下的一个名为“releases”的目录。然后，当您的 DLL 被测试和验证时，给它一个版本号并将其签入您的“发布”部分。告诉您的开发人员，他们可以使用您的共享 DLL 的新版本，并让他们知道这些更改是什么。然后，他们可以随意拉下您的 DLL 并将其集成到他们的代码中。

一旦您对 SVN 感到满意（它会发生！），您就可以继续使用 Hudson 或 CruiseControl.NET 之类的东西，它们位于您的网络上并监控 SVN 的变化。当他们检测到更改时，他们会根据您指定的方式自动构建您的软件。这使得所有这些围绕业务的复制完全自动化。即使没有 CCNET，您也可以使用 nAnt 或 MSBuild（我个人使用 MSBuild）制作“构建文件”，它会根据您选择的方法为您完成所有这些复制工作，因此您不必做所有每次您要进行构建时都会使用此手册内容。

# macos - 您可以在 OS X 上开发 Windows Mobile 应用程序吗？

> ID：925565
> 
> 赞同：0
> 
> 时间：2009-05-29T11:29:47.543
> 
> 标签：macos, windows-mobile, cross-platform

是否可以在 Mac OS X 上为 Windows Mobile 设备开发应用程序？

这个问题主要是由于[这个答案](https://stackoverflow.com/questions/276907/starting-iphone-app-development-in-linux/794643#794643)，批评苹果只发布Mac平台的iPhone开发者工具。

我只是好奇这是否可能，希望可以避免苹果与微软的争论！[Windows ( 1](https://stackoverflow.com/questions/68196/how-can-i-be-a-iphone-application-developer-using-windows) , [2](https://stackoverflow.com/questions/113547/iphone-development-on-windows) , [3](https://stackoverflow.com/questions/22358/how-can-i-develop-for-iphone-using-a-windows-development-machine) )上的 iPhone 开发也有类似的问题，但反之则不然！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T13:33:59.100

MonoDevelop 将在 Mac OS X 上运行，根据他们的[常见问题解答](http://www.mono-project.com/FAQ:_Technical)，可以为 Compact Framework 创建应用程序，但只有在运行修补程序之后（在常见问题解答中提到）。看起来你对 Compact Framework 没有任何真正的调试支持，因为你不能在 Mac OS X 上安装它，而且 Windows Mobile 模拟器也不能在 OS X 上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T11:39:15.027

您始终可以在 VMWare、Parallels、VirtualBox 或 BootCamp 中运行虚拟化的 Windows。

# .net - 如何对 EntitySet 进行排序

> ID：925567
> 
> 赞同：1
> 
> 时间：2009-05-29T11:30:33.330
> 
> 标签：.net, linq-to-sql, data-binding, sorting, entityset

MSDN 文档指出 EntitySet 实现了 IBindingList

[（请参阅http://msdn.microsoft.com/en-us/library/bb546190.aspx](http://msdn.microsoft.com/en-us/library/bb546190.aspx)上的“绑定到实体集” ）

但是，可以清楚的看到一个EntitySet并没有实现这个接口！

那么我该如何排序呢？

对于上下文，我将此集绑定到 WPF ListView。

有关我要解决的问题的更广泛背景，请参阅[这篇文章](https://stackoverflow.com/questions/926280/wpf-binding-not-notifying-of-changes)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T14:49:05.113

EntitySet<T> doesn't implement IBindingList...it provides a method to get an IBindingList. You need to call .GetNewBindingList() to get an instance of EntitySetBindingList<T>, which derives from SortableBindingList<T>, which is a BindingList<T>. EntitySetBindingList is just a wrapper around the original EntitySet<T> it was created from, so any modifications to it are modifications to the original EntitySet.

EDIT: Sorting with BindingList:

To sort with a BindingList, you need to expose some kind of interface to allow sorting. Sorting is supported within the BindingList<T> class, but its through protected properties and methods. It should be possible to expose an expressive sort method with a wrapper:

```
public class EntitySetBindingWrapper<T>: BindingList<T>
{
    public EntitySetBindingWrapper(BindingList<T> root) : base(root)
    {
    }

    public void Sort(Expression<Func<T, P>> expr, ListSortDirection direction)
    {
        if (expr == null)
            base.RemoveSortCore();

        MemberExpression propExpr = expr as MemberExpression;
        if (propExpr == null) throw new ArgumentException("You must provide a property", "expr");

        PropertyDescriptorCollection descriptorCol = TypeDescriptor.GetProperties(typeof(T));
        IEnumerable<PropertyDescriptor> descriptors = descriptorCol.Cast<PropertyDescriptor>();
        PropertyDescriptor descriptor = descriptors.First(pd => pd.Name == propExpr.Member.Name);

        base.ApplySortCore(descriptor, direction);
    }
} 
```

You should then be able to sort like so:

```
var bindingWrapper = new EntitySetBindingWrapper(myEntitySet.GetNewBindingList());
bindingWrapper.Sort(e => e.MyProperty, ListSortDirection.Ascending);

listView.DataSource = bindingWrapper; 
```

There might be additional implementation for the EntitySetBindingWrapper class...such as fortwarding any normally public methods on BindingList<T> to the one provided to the constructor.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-10T22:38:38.120

OrderByDecending!

```
var tags = objContext.Tags;
gvTester.DataSource = tags.OrderByDescending(x => x.TagID); ;
gvTester.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T13:51:57.240

你能做 .ToList().OrderBy(x=>x.FieldToSortBy) 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T14:48:26.550

Hainesy - 从你对 Vinny 帖子的评论来看，我认为你错过了他的观点...... [我没有直接提出这个作为你问题的答案，我只是详细阐述 Vinny 的观点以消除任何可能的混淆关于那个。]

考虑这个对象：

```
public class Person
{
    public string FirstName;
    public string MiddleInitial;
    public string LastName;

    public DateTime DateOfBirth { get; set; }

    public int Age
    {
        get
        {
            return (int)DateTime.Today.Subtract(DateOfBirth).TotalDays / 365;
        }
    }
} 
```

现在，假设我有一个名为 People 的 Person 列表

```
var people = new List<Person>(); 
```

我的名单上有一大堆人。

```
var sortedByLastName = people.OrderBy(o => o.LastName);
var sortedByFirstName = people.OrderBy(o => o.FirstName);
var sortedByAge = people.OrderBy(o => o.Age);
var sortedByAgeDesc = people.OrderByDescending(o => o.Age);
var sortedByLastThenFirst = people.OrderBy(o => o.LastName).ThenBy(o => o.FirstName); 
```

这适用于复杂的对象。如果我们有一些原始类型的列表，比如字符串：

```
var strings = new List<string>(); 
```

我想根据自己对它们进行排序 - 即不是按我的对象的某些属性

```
var sorted = strings.OrderBy(s => s); 
```

这将对对象进行排序。如果您正在对实现 IComparable 的复杂对象进行排序以按其默认比较器排序，您也可以使用相同的想法。

EntitySet 可以以类似的方式排序，无论是对于基本类型还是复杂对象。

# c# - GrayScale（通过 ColorMatrix）导致 OutOfMemoryException。为什么？

> ID：925568
> 
> 赞同：2
> 
> 时间：2009-05-29T11:30:36.433
> 
> 标签：c#, grayscale

我有 2 个表单，A 和 B。在表单 A 上，我单击一个按钮，并且正在将图像加载到位于表单 B 上的 PictureBox。并且，我想通过以下方式将灰度设置为此图像：

```
 public void SetGrayScale(PictureBox pb)
    {
        ColorMatrix matrix = new ColorMatrix(new float[][]
        {
            new float[] {0.299f, 0.299f, 0.299f, 0, 0},
            new float[] {0.587f, 0.587f, 0.587f, 0, 0},
            new float[] {0.114f, 0.114f, 0.114f, 0, 0},
            new float[] {     0,      0,      0, 1, 0},
            new float[] {     0,      0,      0, 0, 0}
        });

        Image image = (Bitmap)pb.Image.Clone();

        ImageAttributes attributes = new ImageAttributes();
        attributes.SetColorMatrix(matrix);

        Graphics graphics = Graphics.FromImage(image);

        graphics.DrawImage(image,
                            new Rectangle(0, 0, image.Width, image.Height),
                            0,
                            0,
                            image.Width,
                            image.Height,
                            GraphicsUnit.Pixel,
                            attributes);

        graphics.Dispose();

        pb.Image = image;
    } 
```

当 PictureBox 在同一个窗体 (A) 上时，此代码可以正常工作。但是，当它在 Form B 上时，会引发 OutOfMemoryException。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T11:52:43.830

恐怕还有更多问题/事情需要您调查，而不是实际答案：

1.  正如对您的答案的评论 - Image 对象是否正确？

2.  如果不是，则意味着传递给此方法的 PictureBox 对象有问题，或者您无法正确访问 PictureBox 的 Image。

我的第一个想法是线程，但两种形式都应该在 UI 线程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T12:30:33.333

好的，我已经修复了 :) 解决方案是，我必须从 OpenDialog.FileName 创建一个 Bitmap 对象，然后设置 PictureBox.Image = myBitmap

一开始我没有这样做，我只是设置PictureBox.Load(OpenDialog.FileName)。那是我的错误。

好的，谢谢你的合作，ChrisF！:)

# iphone - 为什么 SQLite 不增加我的主键？

> ID：925570
> 
> 赞同：0
> 
> 时间：2009-05-29T11:30:45.683
> 
> 标签：iphone, objective-c, sqlite

这是我的桌子，

```
sqlStmt = [ [ NSString stringWithFormat:@"Create Table %@  (recordNo INTEGER PRIMARY KEY AUTOINCREMENT, noOfPlayer  INTEGER, smallBlindAmt INTEGER, bigBlindAmt INTEGER , startingChips INTEGER, roundTimer INTEGER) " , SETTINGS_TABLE  ] StringUsingEncoding:NSUTF8StringEncoding ] ; 
```

插入查询，

```
sqlStmt = [ [ NSString stringWithFormat: @"insert into %@ values (NULL,%d, %d ,%d ,%d ,%d )" , strTableName ,noOfPlayers, SmallAmt, BigAmt, StartingChips, RoundTime ] UTF8String ] ; 
```

获取最后一条记录的记录ID，

```
lastRecordNo = sqlite3_last_insert_rowid(dbObj); 
```

lastRecordNo 始终为 0，我无法插入其他值，因为它给出了错误主键必须是唯一的。

我无法解决与之相关的问题？

如何获取主键和自动增量的最后一条记录ID。？

我的插入查询有什么问题吗？

任何人都可以通过示例创建、插入和选择主要是自动增量的查询来解释我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-30T18:10:23.923

不要在插入语句中显式设置主键，让系统使用自动增量分配它。

将插入语句更改为：

```
insert into %@ (noOfPlayer, smallBlindAmt, bigBlindAmt, startingChips, roundTimer) values (%d, %d ,%d ,%d ,%d) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-20T13:39:42.363

检查您的表格以获取记录。您可以使用 sqlite3_mprintf。[在这里](http://www.sqlite.org/c3ref/mprintf.html)了解更多详情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T12:40:57.507

我真的不知道为什么它不起作用，您可能正在重新连接或其他什么。我还建议不要寻找最后一行 id，因为另一个进程可能会并行增加它。

# c# - C# 帮助：在 C# 中对对象列表进行排序

> ID：925571
> 
> 赞同：12
> 
> 时间：2009-05-29T11:30:54.483
> 
> 标签：c#, sorting, class

> **可能的重复：**
> [使用预定义的排序值列表对对象进行排序](https://stackoverflow.com/questions/652337/sort-objects-using-predefined-list-of-sorted-values)
> [C# 帮助：在 C# 中对对象列表进行排序](https://stackoverflow.com/questions/925471/c-help-sorting-a-list-of-objects-in-c)
> 
> ## 双柱
> 
> [在 C# 中对对象列表进行排序](https://stackoverflow.com/questions/925471/c-help-sorting-a-list-of-objects-in-c/925477#925477)

```
public class CarSpecs
{

    public CarSpecs()
    {
    }

    private String _CarName;
    public String CarName
    {
        get { return _CarName; }
        set { _CarName = value; }
    }

    private String _CarMaker;
    public String CarMaker
    {
       get { return _CarMaker;}
       set { _CarMaker = value; }
    }

    private DateTime _CreationDate;
    public DateTime CreationDate
    {
        get { return _CreationDate; }
        set { _CreationDate = value; }
    }
} 
```

这是一个列表，我试图找出一种有效的方法来 `List<CarSpecs> CarList`按汽车制造日期对包含 6 辆（或任何整数）汽车的列表进行排序。我本来打算做冒泡排序，但那行得通吗？有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-29T11:34:03.540

```
CarList = CarList.OrderBy( x => x.CreationDate ).ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-29T11:37:52.813

首先，使用 .Net 3.5 中引入的速记语法，您可以使此类定义更短：

```
public class CarSpecs
{
    public CarSpecs() { }

    public String CarName { get; set;
    public String CarMaker { get; set; }
    public DateTime CreationDate { get; set; }
} 
```

这将编译成与您上面的类完全相同的类。

其次，您可以使用 Lambda 表达式或 LINQ 轻松对它们进行排序：

```
var linq = (from CarSpecs c in CarList
            orderby c.CreationDate ascending
            select c) as List<CarList>;

var lambda = CarList.OrderBy(c => c.CreationDate).ToList(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-29T11:36:55.687

不要编写自己的排序算法。.NET 有[`Array.Sort()`](http://msdn.microsoft.com/en-us/library/system.array.sort.aspx)专门针对此类事情的方法。

由于您有一个自定义对象，因此您需要定义如何比较 2 个对象，以便排序算法知道如何对它们进行排序。您可以通过 2 种方式中的 1 种方式执行此操作：

1.  让你的`CarSpecs`类实现[`IComparable`](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)接口
2.  创建一个实现[`IComparer`](http://msdn.microsoft.com/en-us/library/system.collections.icomparer.aspx)并将其作为参数传递给`Array.Sort()`您的数组的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T11:34:02.807

BCL 中已经存在排序算法 - Array.Sort() 和 List.Sort()。实现一个 IComparer 类，该类使用 CreationDate 确定排序顺序，然后将所有对象放入数组或列表中并调用适当的 Sort() 方法

# ruby-on-rails - before_filter 中未定义的参数和会话哈希

> ID：925579
> 
> 赞同：3
> 
> 时间：2009-05-29T11:32:24.527
> 
> 标签：ruby-on-rails, ruby, debugging, ruby-debug

有谁知道为什么，当`ruby-debug`通过调用`debugger`称为 a 的方法使用时，未定义`before_filter`the`params`和hashes？`session`

```
class MyExampleController < ActionController::Base

  before_filter :test_hashes

  def test_hashes
    pp session    
    pp params   #both work as expected..

    debugger #calling the debug console
  end

  def index
    #whatever..
  end

end

#the rdb console
(rdb:5) pp params
NameError Exception: undefined local variable or method 'params' for #<ActionController::Filters::BeforeFilter:0x3eafda0>
(rdb:5) pp session
NameError Exception: undefined local variable or method 'session' for #<ActionController::Filters::BeforeFilter:0x3eafda0> 
```

这是正常行为还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T22:25:00.837

尝试在调用调试器之后放置一条 bs 行，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T22:22:03.900

不知道为什么它不起作用，但是您可以通过 controller.params 和 controller.session 获取变量

# .net - 在 SQL Server 上查询多个数据库

> ID：925580
> 
> 赞同：3
> 
> 时间：2009-05-29T11:32:28.817
> 
> 标签：.net, sql-server

是否可以创建一个从中选择的视图

1.  多个表
2.  在不同的数据库中
3.  在不同的服务器上
4.  使用不同的登录凭据

有人可以指出任何在线示例。

或者如果我无法创建视图，有什么方法可以使用 Linq

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T11:37:27.137

是的，您需要使用称为链接服务器的东西：

[http://www.databasejournal.com/features/mssql/article.php/3085211/Linked-Servers-on-MS-SQL-Part-1.htm](http://www.databasejournal.com/features/mssql/article.php/3085211/Linked-Servers-on-MS-SQL-Part-1.htm)

不过，您需要成为数据库管理员才能进行设置。

如果无法创建视图，则必须使用两个单独的 DataContext 执行两个单独的 LINQ to SQL 查询，然后调用 .ToList() 或。ToArray() 结果，然后将它们加入第三个 LINQ 查询。只要您可以将每个查询限制为具有相对较少数量的元素（例如，每个 LINQ 查询的 1000 个左右），这将正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-29T11:42:07.253

这种类型的实现/技术也用于*联合数据库服务器*中，以分配大型 SQL Server 数据库系统的处理负载。

有关详细信息，请参阅以下联机丛书参考：

[http://msdn.microsoft.com/en-us/library/ms190381.aspx](http://msdn.microsoft.com/en-us/library/ms190381.aspx)

根据之前关于设置链接服务器的海报说明，您随后需要创建*分区视图*，更多详细信息可以在联机丛书的子标题“分区视图”下找到：

[http://msdn.microsoft.com/en-us/library/ms187956.aspx](http://msdn.microsoft.com/en-us/library/ms187956.aspx)

# java - JPA/Hibernate 持久化似乎不起作用

> ID：925586
> 
> 赞同：6
> 
> 时间：2009-05-29T11:34:58.077
> 
> 标签：java, hibernate, jpa

我正在使用 JPA（Hibernate 实现）将对象保存到数据库中。选择工作正常，但由于某种原因，保存不起作用。我没有收到任何错误，但数据库也没有更改。这适用于新实体和现有实体。

```
 EPayment pay = new EPayment();
    pay.setAmount(payment.getAmount());
    ...
    pay.setUserByToUserId(receiver);
    CompayDAO.get().save(pay); 
```

CompayDAO.save()

```
public void save(Object ent) {
    System.out.println("Persisting: " + ent + " using " + this);
    this.em.persist(ent);
} 
```

控制台输出：

```
Opening DOA nl.compay.entities.CompayDAO@b124fa
Persisting: nl.compay.entities.EUser@1e2fe5d using nl.compay.entities.CompayDAO@b124fa
Persisting: nl.compay.entities.EUser@30b601 using nl.compay.entities.CompayDAO@b124fa
Persisting: nl.compay.entities.EPayment@ed3b53 using nl.compay.entities.CompayDAO@b124fa
Closing DOA nl.compay.entities.CompayDAO@b124fa 
```

电子支付

```
package nl.compay.entities;

// Generated 21-mei-2009 12:27:07 by Hibernate Tools 3.2.2.GA

import java.util.Date;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import static javax.persistence.GenerationType.IDENTITY;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

/**
 * Payment generated by hbm2java
 */
@Entity
@Table(name = "payment", catalog = "compay")
public class EPayment implements java.io.Serializable {

    private static final long serialVersionUID = -2578493336948256566L;

    private Integer id;
    private EUser userByToUserId;
    private EUser userByFromUserId;
    private String description;
    private float amount;
    private String method;
    private Date paydate;

    public EPayment() {
    }

    public EPayment(EUser userByToUserId, EUser userByFromUserId, float amount,
            Date paydate) {
        this.userByToUserId = userByToUserId;
        this.userByFromUserId = userByFromUserId;
        this.amount = amount;
        this.paydate = paydate;
    }

    public EPayment(EUser userByToUserId, EUser userByFromUserId,
            String description, float amount, String method, Date paydate) {
        this.userByToUserId = userByToUserId;
        this.userByFromUserId = userByFromUserId;
        this.description = description;
        this.amount = amount;
        this.method = method;
        this.paydate = paydate;
    }

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "to_user_id", nullable = false)
    public EUser getUserByToUserId() {
        return this.userByToUserId;
    }

    public void setUserByToUserId(EUser userByToUserId) {
        this.userByToUserId = userByToUserId;
    }

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "from_user_id", nullable = false)
    public EUser getUserByFromUserId() {
        return this.userByFromUserId;
    }

    public void setUserByFromUserId(EUser userByFromUserId) {
        this.userByFromUserId = userByFromUserId;
    }

    @Column(name = "description", length = 1024)
    public String getDescription() {
        return this.description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    @Column(name = "amount", nullable = false, precision = 8)
    public float getAmount() {
        return this.amount;
    }

    public void setAmount(float amount) {
        this.amount = amount;
    }

    @Column(name = "method", length = 50)
    public String getMethod() {
        return this.method;
    }

    public void setMethod(String method) {
        this.method = method;
    }

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "paydate", nullable = false, length = 0)
    public Date getPaydate() {
        return this.paydate;
    }

    public void setPaydate(Date paydate) {
        this.paydate = paydate;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T12:02:10.863

正如 Sherkaner 所提到的，保存不会直接导致 INSERT 或 UPDATE。您必须刷新会话或 - 在我看来更好 - 关闭工作单元/提交事务。你有交易吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-01-28T08:25:22.917

使用`@Transactional`你的方法......

```
@Transactional
public void save(Object ent){
.....
.....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T11:56:21.920

该程序不必立即与数据库同步，您是否尝试过`this.em.flush();`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T15:46:11.530

不要认为这是 Hibernate 实现中的错误。这是理想的行为，您希望与数据库的通信最少，因此 Hibernate（或任何好的 ORM 框架）将整合您的所有更改并一次性刷新您的更改。

# asp.net - 使用 ISAPI 注入 html 代码并响应发布事件

> ID：925587
> 
> 赞同：0
> 
> 时间：2009-05-29T11:35:19.200
> 
> 标签：asp.net, isapi

我想在每个页面上为任意 Web 应用程序注入代码。让我们想象一下，我想为一个页面添加排名输入，该页面只能使用 web.config 打开/关闭，而不更改源代码。

我知道我可以使用过滤器注入和更改 html，但我不确定我是否可以回复帖子。让我们想象一下用户投票，然后投票面板必须显示投票数并禁用投票输入。由于每个页面都会发布到自身，因此我还需要在从注入的表单中获取请求并返回表示操作成功的响应流后立即中断管道（让我们说“OK”字符串）。

**问题**：

*   我可以使用过滤器来做到这一点吗？
*   访问表单数据有多难（非服务器表单），包括 FileUploads ？
*   是否可以使用 ClientScript 类或任何其他方式使用 JS 资源？
*   只有当具有给定权限的用户登录时才可以调用过滤器，否则忽略它。

**操作总结**

*   在初始请求时，注入非服务器形式并嵌入 JS。
*   表单将使用伪 AJAX（IFrame 方法）发布/返回到其包含的页面
*   我得到帖子数据，对它们做点什么，如果一切都好，返回响应“OK”。
*   注入的 JS 接收它并更改表单内容以反映响应

泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:18:25.527

如果您使用的是 ASP.NET，则可能需要查看 HTTP 模块

[http://msdn.microsoft.com/en-us/library/ms998536.aspx](http://msdn.microsoft.com/en-us/library/ms998536.aspx)

它是 ASP.NET 做你想做的事情的方式，并且比 ISAPI 更容易编程。

# sql - 让 SQL 使用正确的索引

> ID：925589
> 
> 赞同：4
> 
> 时间：2009-05-29T11:35:50.917
> 
> 标签：sql, mysql, optimization, indexing, query-optimization

我有一个有两个索引的表，其中一个是某个查询的更快覆盖索引。但是，mySQL (5.1) 没有选择正确的索引。我已经查看了这个查询的解释并做了一些速度测试，如果你强制使用它会产生很大的不同。

有什么方法可以检查它如何选择索引以及它基于什么标准？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T11:38:37.523

这将使用您需要的索引（如果它可用）：

```
SELECT  *
FROM    table FORCE INDEX (myindex) 
```

`MySQL`收集并使用表统计信息来估计索引的基数。

它保存在`information_schema.statistics`.

在可用于过滤的两个索引中，`MySQL`选择具有更大基数的一个。

如果有两个大基数的索引，可以同时选择`INDEX MERGE`。

在一个索引可以服务的`WHERE`条件下，另一个可以服务`ORDER BY`，`MySQL`似乎更喜欢第一个

然而，在后一种情况下，最好在两个列上创建一个复合索引，它可以服务于两个子句。

# .net - Windows 控件在以不同方式访问时返回不同的值

> ID：925600
> 
> 赞同：1
> 
> 时间：2009-05-29T11:38:12.113
> 
> 标签：.net, winforms, system.componentmodel

我有一个[控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)，托管在[DesignSurface](http://msdn.microsoft.com/en-us/library/system.componentmodel.design.designsurface.aspx)上。

当它的 Location 属性被 访问`control.Location`时，当它被 访问时`propertyDescriptor.GetValue(control)`，我得到不同的值。

`propertyDescriptor`是[PropertyDescriptor](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.aspx)类型。

有人对此有解决方案吗？我已经检查过对象实例是否相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:48:00.693

好吧，这可能取决于对象。以及如何获得类型描述符。例如，它可以是一个自定义描述符，可以返回任何内容。如果是这种情况，您可以提供不使用自定义类型描述符的 GetTypedescriptor 方法信息。（抱歉没有发布实际代码，但我没有可用的 IDE，也不记得确切的语法）。

另一种方法是使用 PropertyInfo 而不是 propertyDescriptor（如果其余代码使用 System.Reflection.PropertyInfo）。

您可以像这样获取 stype 字符串的 Property Length 的 PropertyInfo

typeof(string).GetProperty("Length"); 或者如果它是编译时未知的类型，如下所示：obj.GetType().GetProperty("Length");

如果您需要遍历所有属性，请改为调用 GetProperties。

但是所有这些 PropertyInfo 都依赖于我的猜测，即您可以使用 PropertyInfo 而不是 PropertyDescriptor

# multiple-inheritance - Mixins 与 Traits

> ID：925609
> 
> 赞同：161
> 
> 时间：2009-05-29T11:39:47.677
> 
> 标签：multiple-inheritance, mixins, paradigms, traits

Mixins 和 Traits 有什么区别？

[根据 Wikipedia](http://en.wikipedia.org/wiki/Trait_(abstract_type))，Ruby 模块有点像特征。怎么会这样？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2011-01-26T09:15:22.263

1.  Mixins 可能包含状态，（传统）特征不包含。
2.  Mixins 使用“隐式冲突解决”，特征使用“显式冲突解决”
3.  Mixins 依赖于线性化，特征是扁平化的。

[关于特质的讲座](http://stephane.ducasse.free.fr/Presentations/2009-TraitsAtSC.pdf)

**广告 1.** 在 mixins 中，您可以定义实例变量。特性不允许这样做。必须通过组合类来提供状态（=使用特征的类）

**ad 2.** 可能存在名称冲突。两个 mixin ( `MA`and `MB`) 或 traits ( `TA`and `TB`) 定义了具有相同定义的方法`foo():void`。

```
Mixin MA {
    foo():void {
        print 'hello'
    }
}

Mixin MB {
    foo():void {
        print 'bye'
    }
}

Trait TA {
    foo():void {
        print 'hello'
    }
}

Trait TB {
    foo():void {
        print 'bye'
    }
} 
```

在 mixin 中，组合类`C mixins MA, MB` 中的冲突是隐式解决的。

```
Class C mixins MA, MB {
    bar():void {
        foo();
    }
} 
```

这`foo():void`将从`MA`

另一方面，在使用 Traits 时，组合类必须解决冲突。

```
Class C mixins TA, TB {
    bar():void {
        foo();
    }
} 
```

此代码将引发冲突（的两个定义`foo():void`）。

**ad 3.** 方法的语义不取决于它是定义在特征中还是在使用该特征的类中。

换句话说，无论类是由 Traits 组成还是 Traits 代码“复制 - 粘贴”到类中都没有关系。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-29T11:44:09.043

这些页面解释了 D 编程语言的区别。

[http://dlang.org/mixin.html](http://dlang.org/mixin.html)

[http://dlang.org/traits.html](http://dlang.org/traits.html)

在这种情况下，mixin 是动态生成的代码，然后在编译期间插入到代码中。对于简单的 DSL 来说非常方便。

特征是编译时的外部值（而不是从外部源生成的代码）。差异是微妙的。Mixins 添加逻辑，Traits 添加编译时类型信息等数据。

对Ruby不太了解，但希望这会有所帮助。

# wpf - 如何在新项目中使用 AttachedCommandBehavior？

> ID：925610
> 
> 赞同：0
> 
> 时间：2009-05-29T11:39:47.507
> 
> 标签：wpf, mvvm, attachedbehaviors

我已经下载[了这个 AttachedCommandProject](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)并运行了它，它**运行良好**，使我能够在 Border 元素上放置一个 MouseDown 命令，并在我的 ViewModel 中使用一个命令来处理它。

现在我想**将此 AttachedCommand 功能添加**到我的[MVVM Visual Studio 模板](http://wpf.codeplex.com/Wiki/View.aspx?title=WPF%20Model-View-ViewModel%20Toolkit)中。

我将所有必要的文件复制到了 MVVM 项目的我的 Commands 文件夹中：

```
13.12.2008  21:00             7.445 BehaviorBinding.cs
05.12.2008  17:50             7.477 CommandBehavior.cs
13.12.2008  21:01             3.908 CommandBehaviorBinding.cs
13.12.2008  21:06             5.097 CommandBehaviorCollection.cs
04.12.2008  21:48             3.564 EventHandlerGenerator.cs
05.12.2008  17:52             2.376 ExecutionStrategy.cs
05.12.2008  17:52             2.067 SimpleCommand.cs 
```

但是当我尝试使用与原始项目相同的语法时，我收到错误**XML 命名空间“clr-namespace:MvvmWithAttachedBehaviors.Commands”中不存在属性“CommandBehavior.Event”。**.

据我所知，没有**其他文件**要复制，也没有其他参考要添加。

这个错误可能试图告诉我什么？有没有人让这个 AttachedCommandBehavior 功能在其他项目中工作？

```
<Window x:Class="MvvmWithAttachedBehaviors.Views.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:c="clr-namespace:MvvmWithAttachedBehaviors.Commands"
    Title="Main Window" Height="400" Width="800">
    <DockPanel>
        <StackPanel>
            <TextBlock Text="{Binding Output}"/>
            <Border Background="Yellow" Width="350" Margin="0,0,10,0" Height="35" CornerRadius="2"
                        c:CommandBehavior.Event="MouseDown" 
                        c:CommandBehavior.Command="{Binding SomeCommand}"
                        c:CommandBehavior.CommandParameter="This is the parameter sent."
                        >
                <TextBlock Text="MouseDown on this border to execute the command"/>
            </Border>
        </StackPanel>
    </DockPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:39:37.463

包含的源文件是否`CommandBehavior`被复制到新项目中？如果是这样，我会检查它们所在的命名空间。可能是这个项目中的命名空间不同。行： { } 设置前缀“c”以表示存在于本地程序集中的`xmlns:c="clr-namespace:MvvmWithAttachedBehaviors.Commands"`命名空间。`MvvmWithAttachedBehaviors.Commands`如果此命名空间位于不同的程序集中，则必须在此声明中引用该程序集。

你试过重建所有吗？有时，设计器会给你 xml 命名空间错误，如果你全部重建，这些错误就会清除。

希望这会有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T12:48:11.423

您必须在项目中引用程序集 AttachedCommandBehavior.dll，并像这样修改 XAML 命名空间声明：

```
xmlns:c="clr-namespace:AttachedCommandBehavior;assembly=AttachedCommandBehavior" 
```

# django - 使用 DJango 进行无堆栈安装和配置

> ID：925616
> 
> 赞同：1
> 
> 时间：2009-05-29T11:42:03.990
> 
> 标签：django, stackless, python-stackless

我正在尝试运行使用无堆栈的 DJango 命令扩展。

我已经安装了 Stackless Python（用 python 2.5 编译），所以每当我在控制台输入 python2.5 时，它就会启动，指示版本是 **Python 2.5.2 Stackless 3.1b3 060516（python-2.52:72942，2009 年 5 月 26 日，23： 07:34) [GCC 4.3.3] 在 linux2 上**

但是在我的 Eclipse 中，我已经将我的 django 应用程序配置为使用 python2.6 运行。特别是在 PyDev 设置中。所以很明显，当我提到**import stackless**时，它说没有这样的包。

问题是即使我添加了“/usr/local/lib/python2.5/site-packages”目录，它也不会导入无堆栈。

这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T11:56:08.050

我认为解决方案是将 eclipse 指向您的 2.5 无堆栈安装，除非您有充分的理由使用 2.6 而不是 2.5？

...或为 2.6 重新编译并将其添加到您的 2.6 安装中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-22T07:58:02.407

1.  在eclipse菜单中选择Window->preferences
2.  pydev->interpeter-Python
3.  选择标签 forsed biltins
4.  按新建，键入“无堆栈”

# asterisk - 寻求有关 Asterisk 中 IVR 菜单的帮助

> ID：925621
> 
> 赞同：0
> 
> 时间：2009-05-29T11:43:45.813
> 
> 标签：asterisk, telephony, ivr

我正在编写一个 IVR 菜单，我需要允许我的用户在通信期间随时按 0 退出。以下是我的做法：

```
exten => 0,1,Playback(good-bye)
exten => 0,2,Playback(beep)
exten => 0,3,Hangup 
```

但是，这样做，当用户在播放某些文件或进行其他操作时按零时，他/她无法退出，就像他/她没有按零一样。我希望我足够清楚，并且您可以帮助我解决这个问题。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-10T23:21:11.193

对于 IVR，您希望使用 Background() 和/或 WaitExten() 而不是 Playback()。这是一个示例 IVR 拨号方案：

```
[ivr_main]
; answer and play announcement
exten => s,1,Set(TIMEOUT(response)=2)
exten => s,2,Set(TIMEOUT(digit)=2)
exten => s,3,BackGround(/your/audio/file/announcement)
exten => s,4,WaitExten(2)
exten => s,5,GoTo(s|3) ; careful of this loop here! should GoTo() somewhere else!
; handle key presses
exten => 0,1,Playback(good-bye)
exten => 0,2,Playback(beep)
exten => 0,3,Hangup()
exten => 1,1,NoOp(do this if user presses 1)
exten => 2,1,NoOp(do this if user presses 2)
exten => 3,1,NoOp(do this if user presses 3)
exten => 4,1,NoOp(do this if user presses 4)
exten => 5,1,NoOp(do this if user presses 5)
; handle invalid key presses
exten => i,1,Playback(pbx-invalid)
exten => i,2,GoTo(s|3)
; handle time out (user did not make a selection)
exten => t,1,GoTo(0|1)   ; go to Hangup :-) 
```

希望这可以帮助。

在 Asterisk CLI 中，为这些应用程序的手册执行“显示应用程序背景”和“显示应用程序 WaitExten”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T19:55:19.530

AFAIK，只有当您调用 Background 或 WaitExten 时，Asterisk 才能接听按键。因此，如果您正在运行一些 AGI，它必须调用这两个命令之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-05T17:41:53.803

Asterisk 并不总是等待用户输入。仅在 Background、WaitExten、Read 命令期间。如果你使用 Playback()，Asterisk 在播放音频文件时会忽略任何 DTMF。

您可以用 Read() 替换 Playback，但您必须将读取超时设置为非常低的值，否则在您使用 Read() 播放的每个音频文件之后都会出现静音。如果您使用 Read() 那么您必须检查用户输入的值以检查退出，就像这样......

代替

```
exten => x,n,Playback(yourfile)
exten => x,n,somethingelse... 
```

你需要

```
exten => x,n,Read(Exit,yourfile,1)
exten => x,n,GotoIf($["${Exit}" = "0"]?0,1)
exten => x,n,somethingelse... 
```

# c# - 向 app.config 添加值并检索它们

> ID：925638
> 
> 赞同：78
> 
> 时间：2009-05-29T11:52:54.173
> 
> 标签：c#

我需要在 app.Config 中插入键值对，如下所示：

```
<configuration>
 <appSettings>
    <add key="Setting1" value="Value1" />
    <add key="Setting2" value="Value2" />
 </appSettings>
</configuration> 
```

当我在谷歌搜索时，我得到了以下代码片段

```
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); // Add an Application Setting.

config.AppSettings.Settings.Add("ModificationDate",
               DateTime.Now.ToLongTimeString() + " ");

// Save the changes in App.config file.

config.Save(ConfigurationSaveMode.Modified); 
```

上面的代码不起作用，因为我在使用 .NET 2.0 的 System.Configuration 命名空间中找不到 ConfigurationManager。如何以编程方式将键值对添加到 app.Config 并检索它们？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-29T11:55:54.917

您是否缺少对 System.Configuration.dll 的引用？`ConfigurationManager`类就在那里。

编辑：`System.Configuration`命名空间在 mscorlib.dll、system.dll 和 system.configuration.dll 中有类。您的项目始终包含 mscorlib.dll 和 system.dll 引用，但必须将 system.configuration.dll 添加到大多数项目类型中，因为默认情况下不存在...

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-02-25T16:34:05.973

这有效：

```
public static void AddValue(string key, string value)
{
    Configuration config = ConfigurationManager.OpenExeConfiguration(Application.ExecutablePath);
    config.AppSettings.Settings.Add(key, value);
    config.Save(ConfigurationSaveMode.Minimal);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-29T11:56:26.397

尝试添加对 的引用`System.Configuration`，您可以通过引用 System 命名空间来获得一些配置命名空间，添加对 System.Configuration 的引用应该允许您访问`ConfigurationManager`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-17T06:50:54.880

我希望这有效：

```
System.Configuration.Configuration config= ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

config.AppSettings.Settings["Yourkey"].Value = "YourValue";
config.Save(ConfigurationSaveMode.Modified); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-19T15:36:44.870

从 App.config 获取数据

请记住，您必须：

1.  添加到参考资料 ->`System.Configuration`
2.  并且还添加了这个 using 语句->`using System.Configuration;`

只需这样做

```
string value1 = ConfigurationManager.AppSettings["Value1"]; 
```

或者，如果您不想`using System.Configuration;`显式添加，您可以在一行中实现这一点。

```
string value1 = System.Configuration.ConfigurationManager.AppSettings["Value1"] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-20T18:45:58.127

抱歉回答迟了，但我的代码可能对你有帮助。

我在 winform 表面放置了 3 个按钮。button1 & 2 将设置不同的值，而 button3 将检索当前值。所以在运行我的代码时首先添加参考 System.configuration

并单击第一个按钮，然后单击第三个按钮以查看已设置的值。下次再次单击第二个和第三个按钮以再次查看更改后设置的值。

所以这里是代码。

```
using System.Configuration;

 private void button1_Click(object sender, EventArgs e)
{
    Configuration config = ConfigurationManager.OpenExeConfiguration(Application.ExecutablePath);
    config.AppSettings.Settings.Remove("DBServerName");
    config.AppSettings.Settings.Add("DBServerName", "FirstAddedValue1");
    config.Save(ConfigurationSaveMode.Modified);
}

private void button2_Click(object sender, EventArgs e)
{
    Configuration config = ConfigurationManager.OpenExeConfiguration(Application.ExecutablePath);
    config.AppSettings.Settings.Remove("DBServerName");
    config.AppSettings.Settings.Add("DBServerName", "SecondAddedValue1");
    config.Save(ConfigurationSaveMode.Modified);
}

private void button3_Click(object sender, EventArgs e)
{
    Configuration config = ConfigurationManager.OpenExeConfiguration(Application.ExecutablePath);
          MessageBox.Show(config.AppSettings.Settings["DBServerName"].Value);
} 
```

# flash - Flash动态输入框@和"符号问题

> ID：925640
> 
> 赞同：0
> 
> 时间：2009-05-29T11:54:48.553
> 
> 标签：flash, email, actionscript, input

一些创意横幅有一个非常奇怪的问题。在某些计算机上，当您在电子邮件字段的输入框中键入而不是 @ 符号时，您会得到“符号。这几乎就像键盘设置了错误的语言一样。但事实并非如此，它们都是 se到英国。

我认为这可能是嵌入式字体/字符集的问题。有没有其他人遇到过类似的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:20:17.270

还要注意你是否使用 wmode='transparent' 弄乱了非英文键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T12:05:15.020

不是总是这样，当您发布问题时，您会找到答案！

如果有人遇到类似问题，请确保您在动态输入框中设置了“使用设备字体”。

# c++ - dc->DrawLine() 多次还是一次 blit 更便宜？

> ID：925650
> 
> 赞同：1
> 
> 时间：2009-05-29T11:56:50.467
> 
> 标签：c++, winapi, graphics, gdi

我有一个有网格的控件。每次使用设备上下文类中的绘制线函数绘制构成网格的水平和垂直线是否更昂贵，或者将网格绘制一次到内存设备上下文然后每次将其blit到窗户直流？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T11:59:02.227

这取决于很多事情，包括你有多少行，网格有多大，以及用户有什么显卡。

你最好的选择是只做其中一个（可能是 DrawLine，我的直觉说它会更简单和更快）然后在慢速机器上测试它。如果它有效并且速度足够快，请不要过早优化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T13:25:46.280

另一种选择：使用网格图案和区域**创建画笔**`FillRect()`。根据我的经验，大多数情况下，这是最快的方法。

然而，“RichieHindle”是对的；如果您仅通过测量速度就可以了解事实，则无需对此进行哲学思考；）..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T12:06:36.297

A 做了这样一个控件，我在需要更新单元格时为每个单元格绘制了边框。（这只是另一种想法）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-30T17:50:32.303

简短的回答：后者。Blitting 到内存 DC 一次以便它可以用作后续重新绘制操作的位图通常是更快的渲染方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T12:19:07.770

这也取决于您使用的是哪种笔。对于简单的纯色水平和垂直线，IIRC 填充矩形通常是最快的，但进行自己的基准测试应该相当简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-30T18:10:15.343

Blitting 是首选，因为它会将图像复制到内存中。复制图像，绘制时应防止闪烁。

# css - 有没有 CSS 的替代品？

> ID：925653
> 
> 赞同：92
> 
> 时间：2009-05-29T11:58:00.450
> 
> 标签：css

是否有样式表格式化语言可以替代 CSS？还是 CSS 是当前用于样式表格式化类型的单一语言？

我查看了 Wikipedia ( [http://en.wikipedia.org/wiki/Cascading_Style_Sheets](http://en.wikipedia.org/wiki/Cascading_Style_Sheets) ) 上关于 CSS 的文章以及其他一些关于 CSS 的评论，并对在不同的布局引擎中缺乏对 CSS 的完全支持感到沮丧，所以我只是好奇是否有替代方案，或者我必须学习也使用 CSS 过滤器。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2011-12-01T17:55:39.590

你们都试图从程序员的角度回答这个问题。我认为最初的海报正在寻找一种对图形更友好的替代方案 - 一种可以提供不同概念的替代方案。

即使 CSS3 被跨浏览器采用，我相信 CSS 布局东西（内联框、浮动、边距等）的方式很糟糕。我是一名程序员，但我父亲是一名平面设计师，我很确定他们使用了 20 年的布局软件在某些方面比 CSS 更简单、更先进。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2009-05-29T12:06:40.620

CSS 是唯一真正的选择。

一旦您了解了 CSS 的来龙去脉，浏览器对 CSS 的支持（在大多数情况下）就不应该成为主要问题。理解 CSS 的关键是它的目的是定义 HTML 文档的样式，它应该与内容分开。

您需要练习学习如何在不支持功能的浏览器中优雅地降级。这里的基本思想是，您应该使最低公分母（通常是 Internet Explorer）工作“足够好”，不会影响用户体验，并为用户提供更好的浏览器。另外，**不要**先为 Internet Explorer 开发。把它留到最后，然后修复它的错误。反过来做事（首先是IE）要困难得多。

您还可以选择使用 JavaScript 设置样式，但不建议这样做，因为您应该避免在 JavaScript 中应用样式，因为 JavaScript 用于逻辑，而不是样式。

一个网页有 3 个（取决于你如何看待它）组件：

*   **HTML** - 用于内容
*   **CSS** - 用于样式化您的内容
*   **JavaScript** - 用于将附加或动态逻辑应用于您的内容

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2010-12-15T01:28:45.397

**是**的，它被称为**[LESS](http://lesscss.org/)**，它确实解决了大多数 CSS 的代码可读性问题。

**[您既可以在服务器上编译它，也可以使用less.js](http://fadeyev.net/2010/06/19/lessjs-will-obsolete-css/)**在客户端即时编译它。

对于生产，我建议设置一个编译它的构建脚本（在[NodeJS中，这对](http://nodejs.org/)[Grunt](http://gruntjs.com/)和[grunt-contrib-less](https://npmjs.org/package/grunt-contrib-less)来说是小菜一碟）。

* * *

**编辑：**还有其他值得一提的选项，即使我正在使用和推荐 LESS。

[**SASS**](http://sass-lang.com/)：Ruby 的人喜欢这个。它不像 LESS 那样是 CSS 的超集，而是使用自己的语法。为了解决这个问题，他们开发了 SCSS，这*是*一个 CSS 超集，类似于 LESS。

[**Stylus**](http://learnboost.github.com/stylus/)：和 LESS 一样，它是用 javascript 编码的，但这通常在 Node.js 中使用。我不能保证它，因为我还没有尝试过，但它非常成熟，所以如果它有你想要的功能，一定要去。

[**Turbine**](http://turbinecss.github.io/)：这个是用 PHP 编码的。没有太大的吸引力。

[**Switch CSS**](http://sourceforge.net/projects/switchcss/)：也许 Python 黑客会想要研究这个。牵引力更小。

如果你觉得有更多选择，还有[CSS Cacheer](http://shauninman.com/archive/2008/05/30/check_out_css_cacheer)、[CSScaffold](https://github.com/caiomorcego/csscaffold)、[DtCSS](https://code.google.com/p/dtcss/)、[CSSPP](https://github.com/jeremyboles/csspp)，甚至是[porneL的](https://stackoverflow.com/users/27009/pornel)[东西](http://pornel.net/css)。

* * *

您可能想查看的其他内容：

[**Compass**](http://compass-style.org/)：为 Ruby 开发人员提供的完整的 CSS 创作框架。

[**WinLESS**](http://winless.org/)：Windows 的拖放式 LESS 编译器，非常酷，您真的应该检查一下。

[**LESS Elements**](http://lesselements.com/)、 [**Preboot**](http://markdotto.com/bootstrap/)、 [**LESSHat**](http://lesshat.com/)和[**even.less**](https://github.com/bisrael/even.less)：LESS 的 mixin 和常量库。

[**Bootstrap**](http://twitter.github.io/bootstrap/)：由 Twitter 开发的框架。也相关： [**HTML5 Boilerplate**](http://html5boilerplate.com/)。

[**Normalize.css ：**](http://necolas.github.io/normalize.css/) [**CSS 重置**](http://www.cssreset.com/)的替代方案。有很多重置，但是，作为一个的开发者，我不得不说：大多数都是废话。如果你不打算自己做，那就用这个吧。

* * *

**更新**：[从 1.4](https://github.com/cloudhead/less.js/blob/master/CHANGELOG.md#140-beta-1--2)开始，LESS 也有`@extend`。如果可能，请务必使用 1.4+！这完成了我认为选择 LESS 而不是 SASS 的原因。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2009-05-29T12:04:51.917

是的。

正如其他人所说，CSS 是您唯一真正的选择，但网络**上还有另一种用于“样式表格式化类型的东西”**的语言，称为可扩展样式表语言 (XSL)，特别是被称为[XSL-FO的规范子集（格式化对象）](http://www.xml.com/pub/a/2000/06/21/deviant/index.html)。

有一次，根据你问的是谁，它的目的是[与 CSS 竞争或合作](http://www.xml.com/pub/a/2000/06/21/deviant/index.html)。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-08-08T06:48:19.690

网格样式表 (GSS)：[GSS](http://gss.github.io/)

好多了

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-05-29T12:02:42.513

广泛使用的 CSS 并未在所有浏览器中获得完全支持……（未知的）替代方案应该如何实现这一目标？

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-05-29T12:03:46.677

嗯，几乎所有浏览器都很好地支持 CSS 2.1。（IE6 除外）一旦你知道了安全子集，就很容易编写优雅降级的 CSS。（这样即使不支持的浏览器也不会完全搞砸页面）

有关 CSS 浏览器兼容性提示，请参阅[http://www.quirksmode.org](http://www.quirksmode.org)。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-05-29T12:02:09.973

> 因在不同的布局引擎中缺乏对 CSS 的完全支持而感到沮丧

我认为 jQuery 有一些方法可以使 css 跨浏览器更兼容，即如果您使用 jQuery 指定一些属性，那么它将尝试确保对不支持某些功能的浏览器使用解决方法。

还有一个名为[CleverCSS](http://sandbox.pocoo.org/clevercss/)的项目，您可能想查看一下。但是，它不是它的替代品，只是定义它的方式略有不同。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-04-08T23:19:41.327

很久以前 JavaScript 样式表 (JSSS) 是 Netscape 提出的一种样式表语言技术，如果有人感兴趣，我会给你一些链接 [http://en.wikipedia.org/wiki/JavaScript_Style_Sheets](http://en.wikipedia.org/wiki/JavaScript_Style_Sheets)

这是提案 [http://www.w3.org/Submission/1996/1/WD-jsss-960822](http://www.w3.org/Submission/1996/1/WD-jsss-960822) 我认为这是一个好主意，但遗憾的是css赢了，但也许有些部分与javascript集成了？

也可能不是使用 css，您可以使用 svg 来获得一些文本效果，请查看示例
[http://msdn.microsoft.com/en-us/ie/hh410107.aspx](http://msdn.microsoft.com/en-us/ie/hh410107.aspx)
和一些动画
[http://svg-wow.org/ text-effects/text-effects.xhtml](http://svg-wow.org/text-effects/text-effects.xhtml)
一些按钮效果[https://www.svgopen.org/2008/papers/86-Achieving_3D_Effects_with_SVG/](https://www.svgopen.org/2008/papers/86-Achieving_3D_Effects_with_SVG/)
这是一个更酷的文本样式示例，您应该看看这个[http://www.hongkiat .com/blog/scalable-vector-graphics-text/](http://www.hongkiat.com/blog/scalable-vector-graphics-text/)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-05-29T12:03:03.230

不，CSS是现在要走的路。格式本身没有任何问题（我个人实际上非常喜欢它），但只有浏览器支持它——尤其是关于 IE。一旦我们拥有所有支持[CSS3](http://www.css3.info/)的主要浏览器，一切都会好起来的——尽管我对什么时候会发生不太乐观。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-05-29T12:04:40.967

目前没有 CSS 的替代品，这是一件好事。浏览器供应商、W3C、WHATWG 等很难就一个规范达成一致，你能想象如果有多个规范会发生什么吗？

无论如何，我发现一旦你学习了 CSS，你就会了解哪些特定的东西会破坏什么，并且要么学会使用它，要么学会避免它。

希望这可以帮助。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2009-05-29T12:18:51.687

> 我查看了 Wikipedia ( [http://en.wikipedia.org/wiki/Cascading_Style_Sheets](http://en.wikipedia.org/wiki/Cascading_Style_Sheets) ) 上关于 CSS 的文章以及其他一些关于 CSS 的评论，并对在不同的布局引擎中缺乏对 CSS 的完全支持感到沮丧，所以我只是好奇是否有替代方案，或者我必须学习也使用 CSS 过滤器。

CSS是*标准*。没有替代。

所有浏览器都支持基本的 CSS 功能。每个（四个？）主要浏览器行的每个新版本都增加了对该标准的支持，但是使用这些功能的网站将被早期版本的任何用户破坏。对此有两个答案：

1.  “优雅降级”（或它的孪生兄弟，“渐进式增强” - google it），其中页面利用可用的高级功能，而如果它们不可用，则仍继续工作。

2.  你的听众是谁？如果您有幸知道您网站的 99.8% 的访问者至少会使用 IE7，那么您不必担心 IE6 中的 CSS 功能被破坏。不过，这将取决于您自己的业务，因此请先检查事实。

您可以做的最糟糕的事情是针对单个特定浏览器的怪癖进行编码，因为这会导致页面不仅在其他浏览器上损坏，甚至在同一浏览器的更高版本上也损坏。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-05-29T12:01:09.350

唯一的选择是 HTML 本身具有的已弃用的格式支持，例如`<font>`标签。但你不想那样做。8-)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-05-29T12:07:44.547

没有（大部分）

如果你想创建在最大数量的客户端机器上工作的布局，那么你必须学习 CSS。

如果您可以将您的用户限制在 IE8、Chrome、Safari 和 Firefox，那么您可能会摆脱 CSS2，否则您将不得不学习与 CSS1 的所有差异，以及无数损坏的东西——尤其是在 IE5 和 6 中.

HTML 3.2 包含一些格式标记（例如`<font>`或`<center>`），但您不能对它们做太多事情。

*为什么只有大部分？*- 如果您可以假设用户拥有 Flash 或 Silverlight 并为他们构建 Web 应用程序。然后你的布局将是完美的，但它需要一个客户端插件（不是每个人都有）才能工作。如果您需要真正丰富的客户端 UI，我只会走这条路。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-05-29T12:25:21.330

我同意当前的 CSS 支持状态非常糟糕。

我认为最好的方法是根据[标准](http://www.w3.org/TR/CSS2/)编写 CSS ，然后为各种浏览器不正确遵守的所有位添加修复。但是，如果您愿意，通常值得避免使用一些 CSS（例如，z-levels 在许多浏览器中具有真正混合级别的支持）。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2011-08-05T21:12:41.283

是的 ！[sass](http://sass-lang.com/)可能是一种选择

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2021-03-04T15:23:47.197

[Elm-ui](https://package.elm-lang.org/packages/mdgriffith/elm-ui/latest/)是 Elm 的一个包[，](https://elm-lang.org/)它是一种编译为 HTML/JS/CSS 的函数式语言。

它完全重新思考了我们对布局和风格的思考方式，我认为这样的项目早就应该了。

[作者 Matthew Griffith在这里](https://www.youtube.com/watch?v=Ie-gqwSHQr0)谈到了 Elm-ui 。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2010-01-12T02:10:40.780

佐利是对的。“xslt 是另一种选择”

XSLT 将 XML 转换为渲染的网页，就像 CSS 将 HTML 转换为渲染的网页一样。请注意，您不能将 XSLT 与 HTML 或 CSS 与 XML 混合使用。

我使用 CSS + XSLT 创建渲染网页。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-05-28T19:28:55.357

Adobe Postscript 是 CSS 最有可能的替代品。问题是它需要 Acrobat 在桌面或 Web 上查看。它远远优于 CSS，并在所有设备上保持设计意图和规模，包括打印机、绘图仪、手机、平板电脑以及几乎任何带有 Postscript 解释器的东西。

Postscript 的学习曲线为零，除非您为特定设备实施它。它由数以百万计的程序员、图形艺术家、艺术家、专业打印机甚至是技能最低的家庭计算机用户编写。您需要做的就是从任何应用程序的菜单中选择打印或保存。它确实支持链接和字段输入。可以搜索吗？它和基于 PS 的文档经常出现在 Google 的搜索页面中。

尽管可以从 Web 浏览器中以 PDF 的形式查看它，但它不像 HTML 和 CSS 那样是原生浏览器语言。如果它如此简单和强大，为什么不呢？网络刚起步时，Adobe 过于短视，贪婪地开放语言。他们想向他们的 PS 引擎和他们的内容创作产品出售许可证。对 Adob​​e 来说，赠送 PS 浏览器就像赠送鹅和金蛋。

* * *

## 回答 #20

> 赞同：-6
> 
> 时间：2009-05-29T12:26:28.613

xslt 是另一种选择

它比css更强大。

学习和使用它更加困难。

# sifr - 为什么两个 sIFR 标题之间的“空间之后”不同？

> ID：925656
> 
> 赞同：0
> 
> 时间：2009-05-29T11:59:23.410
> 
> 标签：sifr

在 clientarea.hexatrope.com/nathanael/ 我正在使用 sIFR 在主要内容列中创建两个标题。出于某种原因，当标题为两行时，其底部与下一段之间的空间比标题为一行时要小。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-30T20:25:20.900

看起来像一个 Flash 问题，考虑到当行数不同时会发生不一致，此时对此没有什么可做的。

# linux - iwlist() 命令如何扫描无线网络？

> ID：925669
> 
> 赞同：6
> 
> 时间：2009-05-29T12:03:25.557
> 
> 标签：linux, kernel, wireless, ioctl

我想知道 iwlist 命令如何扫描 linux 中可用的无线网络。我阅读了它的源代码，并且有一个使用 SIOCSIWSCAN 触发扫描和 SIOCGIWSCAN 来获取扫描结果的 ioctl 调用。但是这些系统调用是如何捕获和分析信标帧的呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-29T15:12:03.630

[iwlist(8)和其他无线工具为支持](http://linux.die.net/man/8/iwlist)[Linux 无线扩展](http://www.hpl.hp.com/personal/Jean_Tourrilhes/Linux/Linux.Wireless.Extensions.html)(WEXT)的不同无线设备驱动程序提供了一个通用前端。每个驱动程序将向 WEXT 注册处理程序，以实现此接口定义的设备特定操作。对于扫描，两个处理程序是触发扫描（命令 SIOCSIWSCAN）和获取扫描结果（命令 SIOCGIWSCAN）。[设备完成扫描后，通过netlink](http://www.linuxfoundation.org/en/Net:Netlink)接口向 WEXT 发送 SIOCGIWSCAN 事件。侦听此套接字的应用程序可以发出 SIOCGIWSCAN 命令以从设备获取扫描结果。请注意，设备可以随意执行扫描。例如，它可以被动地监听信标或通过发送探测请求来主动扫描。

上面故意模糊了向设备发送命令的机制，因为有传统方式（ioctl）和新方式（netlink - cfg80211）。但举一个具体的例子，考虑传统的方式。ioctl 调用在 WEXT 模块中实现，但处理此命令的代码在设备驱动程序中实现。当用户空间应用程序生成 ioctl 时，WEXT 会查找设备驱动程序的处理程序并运行它。

# tfs - 您在构建自动化期间做了哪些很酷且有趣的事情？

> ID：925672
> 
> 赞同：32
> 
> 时间：2009-05-29T12:04:34.477
> 
> 标签：tfs, msbuild, build-automation, tfsbuild

我只是想看看其他人在构建自动化过程中在做什么，而不是通常的编译、构建、运行测试等任务，这些任务可能对其他人考虑和研究有帮助和启发，例如：

*   生成代码文档
*   使用代码指标来衡量构建质量，如果违反了既定指标，则构建失败。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-05-29T12:08:38.557

将可执行文件发送到[http://virustotal.com](http://virustotal.com)以对所有主要的反病毒引擎进行病毒扫描。

并不是说我们认为我们的前任包含病毒，但有时您会得到误报，并且您不希望它成为发现它的客户。8-)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-29T12:11:08.380

我们有一个推特账户，所以我们可以随时随地查看它的状态

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-05-29T12:56:42.967

我们有一个 Staples 简易按钮，我们已经连接了该按钮以在按下时触发构建。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-29T12:33:43.200

为可能散布在代码周围的任何 TODO/FIXME 等创建报告。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-05-29T12:21:41.820

以下是我已经做过、正在做或计划做的一些事情：

*   更新交通信号灯（使用 X10 小工具）以指示构建状态（绿色=良好，黄色=正在建设，红色=哎呀！）。
*   生成代码文档，然后使用文档更新项目 wiki。
*   其他项目 wiki 更新，例如发布当前版本号、提供下载链接等。
*   部署到（并在必要时回滚）进行手动测试的测试服务器。我通常使用 VMWare 完成此操作，因此“部署”实际上是创建一个新的 VM 实例。
*   自动将“待构建”的工单移至 QA 进行测试。
*   为失败的测试、失败的构建和编译器警告创建缺陷报告。
*   在版本控制中标记构建（也应用版本信息）。
*   在 Y 天内 X 次或更多次失败的构建后安排审查。（例如，如果一周内发生了三个失败，我们需要开会弄清楚发生了什么）
*   安排一个“比萨和啤酒”派对，确保没有错误的几周。
*   播放响亮的“ca-ching”！每当我们知道将导致新销售的功能完成时，都会通过 PA 系统发出声音。在我以前的公司，我们的销售团队*喜欢*这个无用的功能 :)。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2009-07-16T01:55:11.377

从failblog.com 中拉出一个随机图像以附加到“构建失败”电子邮件。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-05-29T14:25:11.713

**自动推进您的问题工作流程。**

我们为我们的 Bamboo CI 服务器编写了一个自定义插件，它收集与构建相关的所有 JIRA 问题（由 svn commit 评论确定）并检查它们在 JIRA 中的状态。

一旦构建成功（并将应用程序部署到正在运行的服务器），“*等待构建*”工作流阶段中的任何问题都会自动推进到“已*构建并可用于测试*”阶段，这会触发一封电子邮件发送到分配给该问题的测试人员。

这意味着我们的测试人员不会在开发人员签入代码时收到问题通知电子邮件，而是当修复程序在服务器上实时运行并且测试人员实际上可以对其进行处理时。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-05-29T12:14:17.577

直接部署网站以测试部署服务器。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-05-29T12:07:01.087

我们对我们生成的所有二进制文件应用数字签名。构建脚本会自动执行此操作。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-05-29T12:58:49.500

一些东西。

1.  将 pdb 上传到符号/源服务器 <- 对于调试 winqual 故障转储非常有用
2.  对通过 CC.NET部署到[VM中的安装程序运行测试](http://www.vmware.com/products/labmanager/)
3.  创建用于通过[CC.NET](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET)进行测试的基础 VM，并将其部署到所有 QA
4.  获取该 VM 映像的副本并使用[EggPlant](http://www.testplant.com/products/)执行自动化 UI 测试

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-05-29T14:01:33.693

替换 SVG 初始屏幕中的版本号，然后[在 Inkscape 中呈现它](https://stackoverflow.com/questions/894701/expand-a-relative-path-in-ant-script-for-inkscape)。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-06-07T15:10:26.437

我们构建 BizTalk 2006 项目 :)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-06-14T11:50:29.153

我们针对我们最新的公开版本进行二进制兼容性分析（使用反射），以确保我们不会意外引入二进制破坏性更改。每当我们被迫进行重大更改时，我们都会将特定的 api 添加到“已接受的重大更改”列表中，以便下一个构建可以跳过测试。到了发布时间时，我们会列出新版本中出现问题的 API 的完整列表。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-05-29T12:32:04.983

我参与过的各种项目都有大型的公开展示，展示了谁最后签入以及谁破坏了构建。我们使用[Build-o-matic](http://build-o-matic.sourceforge.net/)完成了这项工作，我编写了[Team Piazza来为](http://team-piazza.googlecode.com)[Team City](http://www.jetbrains.com/teamcity/)构建显示相同的信息。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-05-29T12:41:11.203

我们有一个 Web 应用程序并进行了性能测试，并将 HTML/CSS 验证放入测试脚本中。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2009-05-29T12:54:37.823

托管代码：

1.  使用一致的版本更新所有 AssemblyInfo 文件
2.  运行 StyleCop 和 FxCop 并检查代码是否美观且表现良好！

本机代码：

1.  在二进制文件中运行depends.exe并检查调试运行时是否没有依赖项已经悄悄进入 - 经常发生
2.  使用 manifest.exe 转储清单文件并检查调试依赖项 - 这些东西无处不在！
3.  使用 SWIG 为 C++ 代码生成 python 绑定

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-05-29T12:57:04.667

对于 Java 开发，我们使用：

*   JUnit 由 Cobertura 补充（Cobertura 识别代码的哪些部分缺少测试覆盖）
*   Find Bugs - 搜索代码以查找错误和漏洞的工具
*   Hudson 工具（参见 hudson.dev.java.net [我还不能发布超链接！]），它管理软件的构建和测试。它有一个像 AoP 的（上图）红绿灯的特性——蓝色成功构建并且所有单元测试都通过，黄色成功构建并且一些单元测试失败，红色构建失败。

哈德逊也

*   通过 SVN、Continuus 等插件管理软件构建
*   维护所有构建的历史记录 - 允许我们的 Junit 测试和 Find Bugs 结果显示在趋势图中
*   每当构建导致状态发生变化（例如，蓝色到黄色，红色到蓝色）时，向所有相关方发送电子邮件
*   所有信息都显示在一个简单的内部网页中

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-06-16T07:36:05.550

我们有一个[Nabaztag/tag](http://www.nabaztag.com/en/index.html)显示构建服务器上是否发生任何错误。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-08-03T14:19:43.990

我没有在这里阅读超过一半的答案，但我希望其中一些是“新的”：

*   安装和升级旧版本以检查新安装的文件差异（测试我们的部署升级配置）
*   将我们的核心应用程序和外部系统适配器部署到自定义 Jboss（包含在项目/版本中），启动它并运行 SoapUI 测试套件以验证端到端功能（也是我们部署自动化的额外测试）
*   将增量脚本应用于以前的数据库版本，然后与新安装进行结构比较，以便在升级期间创建新表、列等
*   在 Confluence 中发布我们的发布文档（我们基本上每晚都运行完整的发布脚本），作为下一个来自主干的发布的预览

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-06-14T07:51:04.050

以下是我在[持续集成](http://abdullin.com/wiki/continuous-integration.html)中通常拥有的一些东西：

*   计算代码指标和性能统计数据（在执行测试时由我们的框架捕获；
*   运行执行某些开发指南的代码质量测试（即：类命名、不变性、允许的引用）；
*   更新从代码生成的在线文档；
*   将安装包（WiX 和 ClickOnce）放入部署服务器并更新自动更新所需的清单；
*   更新开源项目的“下载”页面；
*   通知所有相关方关于构建和结果。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-06-09T20:39:19.637

How about embedding a build-time timestamp into each built image?

```
<ItemGroup>
  <StampFile   Include="BuildTimestamp.cs"/>
</ItemGroup>

<Target Name="BuildTimestamp" 
        Outputs="@(StampFile)">
  <Message Text="Building Timestamp..." />
  <Touch
     AlwaysCreate = "true"
        Files="@(StampFile)" />

    <WriteLinesToFile
        File="@(StampFile)"
        Lines='public static class Build { public static string Timestamp = "%(StampFile.CreatedTime)" %3B }'
        Overwrite="true"/>
</Target> 
```

You could extend this to include Machine name, phase of the moon, etc.

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-06-14T08:11:41.457

我们使用'checkstyle' ( [http://checkstyle.sourceforge.net/anttask.html](http://checkstyle.sourceforge.net/anttask.html) ) 来生成一个代码报告，这些代码可以新签入并且在开发人员构建之前没有（正式）审查。此外，我还编写了一些执行以下操作的自定义任务：

1.  检查数据库连接属性并尝试与数据库建立实际连接（简单的 JDBC 代码）并报告是否存在任何用户凭据问题等。
2.  将上次构建的用户名和时间戳添加到代码中
3.  向我们的企业 IM 客户端（自定义列表）发送构建状态的通知

还有更多任务，但它们特定于内部环境相关设置。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2009-11-03T10:07:24.290

我们做了很多：使用 MSBUILD

*   获取资源
*   使用时间戳和文件信息和版本信息中的最后一个变更集更新程序集信息
*   编译：）
*   使用 Galio 运行测试
*   创建具有当前时间戳的测试报告并在 IIS 上发布
*   创建所有必要二进制文件的 Zip 包
*   在 SVN 上发布 Zip 包
*   从 TFS 取消绑定 SLN 文件
*   删除所有 bin/obj 文件
*   在 SVN 上发布源代码
*   在构建成功或失败后发送电子邮件
*   使用 NANT 脚本部署应用程序

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-07-17T20:26:37.707

我真的很惊讶没有人提到更新配置文件！我们根据我们为使用构建脚本而构建的环境更新我们的配置文件 b。它可以节省至少 20 分钟来替换所有 connectionStrings 和 appSettings。我们做的其他事情是：

更新版本号
移至测试服务器
运行代码分析
电子邮件构建状态
运行一些数据库脚本

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2009-05-29T14:21:49.240

对于 Java，您还可以使用 Ivy 自动抓取任何丢失的库。例如，如果您使用 Hibernate，您可能希望也可能不希望在您的发行版中包含这些库。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2009-05-29T14:26:00.713

在构建后步骤中重置测试数据库：

*   准备一组文件（使用*TemplateFile*任务）

使用这些文件

*   删除测试数据库
*   备份中央数据库
*   将其还原到新的测试数据库实例
*   在测试数据库中运行初始化 sql 脚本（使用*Sql.Execute*任务）
*   将（使用*Xml.XslTransform*任务）xml 数据文件转换为 sql 文件（插入）
*   在测试数据库上运行它们

在此之后，我们有一个干净的测试数据库，具有正确的模式，来自中央数据库的所有固定数据，然后是一些额外的测试数据。

如果架构和固定数据也位于可比较的数据和 sql 文件中会更好，但那是 WIP。中央数据库还没有，但应该在源代码控制中。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2009-06-12T14:15:42.550

我们做了几件事：

1.  对所有 exe 进行数字签名
2.  归档 pdb
3.  使用 WIX 创建安装程序
4.  为在 CD 或 DVD 上分发的软件生成完整的 .iso 文件

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2009-05-29T13:03:52.047

我们有一个构建脚本，它自动标记构建和 SVN，并将应用程序部署到 WebSphere 应用程序服务器。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2009-05-29T14:48:39.123

运行单元测试和代码分析工具，如 NDepend、Gandarme。结果由CC.Net发布

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2009-12-03T12:40:45.297

除了这里已经多次提到的版本控制、签名和测试等，我们还：

*   为 sharepoint-dll运行**spdisposeCheck**
*   运行**sigcheck**（来自 sysinternals）以创建一个很好的版本概览和应用的证书

* * *

## 回答 #31

> 赞同：-3
> 
> 时间：2009-05-29T12:36:43.710

处理其他紧迫的最后期限或赶上电子邮件（等待这并不酷，或有趣......）好吧，这就是我真正要做的：[http ://samurai-ryan.mybrute.com/](http://samurai-ryan.mybrute.com/)

# drupal - Drupal/Ubercart ...节点样式？

> ID：925683
> 
> 赞同：3
> 
> 时间：2009-05-29T12:07:36.513
> 
> 标签：drupal, attributes, styling, ubercart

我正在尝试在 Drupal 站点上设置产品视图的样式，但是遇到了问题。**我在 ubercart 中找不到节点（产品）视图放在一起的位置！**

我正在使用 UC 5.x-1.7，我需要设置节点（产品）视图页面的样式。目前在我的 node.tpl.php 文件中，我有

```
打印$正文；
```

它会吐出所有的 SKU、属性、价格、图片等。

问题是我需要采用不同的风格 - 我必须按照设计师的设计工作。我已经开始重新做我自己的版本，使用像

```
$node->content['body']['#value']
```

等等

我在尝试使用产品的各种属性时遇到了麻烦。我不知道如何将它们放到我的页面上，或者从编码人员的角度来看如何使用它们的任何文档。

有没有更简单的方法？我会在哪里寻找现有显示的样式（即 $body 变量）？

编辑：我的主题是基于 Zen Theme

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T12:36:27.830

如果问题纯粹是样式，您可以编写自己的 CSS 来执行此操作。

您可以使用[theamer 模块](http://drupal.org/project/devel)来告诉您要使用哪些模板文件，我猜想 ubercart 附带了一些您可以覆盖的模板文件。查看信息的候选模板部分

最后，您可以使用[hook_nodeapi op=view](http://api.drupal.org/api/function/hook_nodeapi/6)来控制实际进入页面以显示在 $body 变量中的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T12:19:41.513

您需要查看位于以下路径下的模板：

```
./sites/all/modules/ubercart/uc_product/views 
```

那将是一个开始。这就是可能构建节点的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-27T07:56:30.243

如果您使用 Devel 模块，您可以看到数组和对象的确切结构，并从 $node 对象中准确获取您需要的内容。然后制作一个 node-product.tpl.php 文件，并用这些部分替换 $content 变量。这些变量值中的大多数都具有完整的标记。

如果您想更改属性的标记，您需要更改处理属性 div 的预处理函数。如果您只是从头到尾删除 id="attributes" （可能是类？我忘了）div，它们都会在自己的 class="attribute" 包装器中单独打印。只需将其添加到您的 template.php 文件中。

然后，您可以使用 CSS 将它们移动到整个页面，而不是将它们全部困在一个 div 中。

您还可以使用上述打印单独页面变量的方法在标记中移动不同的元素。

很多事情都可以用纯 CSS 来完成，但是当 CSS 在糟糕的浏览器中错误显示时，标记不会中断是很好的。

希望这会有所帮助。我不确定所有这些是否适用于 Drupal 5，因为我是用 6 完成所有这些......所以希望如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-26T08:42:55.283

这是 Jeremy French 提到的使用 hook_nodeapi 的示例：

```
/**
 * Implements hook_nodeapi().
 */
function YOUR_MODULE_nodeapi(&$node, $op, $arg3 = NULL, $arg4 = NULL) {
  switch ($op) {
    case 'view':
    // Don't show list price unless set.
    if (isset($node->content['list_price']) && $node->list_price == 0) {
      unset($node->content['list_price']);
    }
    break;
  }
} 
```

查看 modules/ubercart/uc_product/uc_product.module 中的 uc_product_view() 以查看各种内容字段。

# sharepoint - In SharePoint 2007, how can I have one list displayed on two different sites/workspaces?

> ID：925684
> 
> 赞同：1
> 
> 时间：2009-05-29T12:07:41.240
> 
> 标签：sharepoint, moss, sharepoint-2007

I have a site A. I created two events(meetings) on the site, each one with its own workspace. In one of the meetings, I added a list--a "Project Tasks" list, in particular--and I want to be able to display that list on the other event's workspace. I also want to be able to synchronize the two, so that any items added to one list get added to the other.

Any ideas on how I can do that in SharePoint 2007?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T15:16:37.740

I'm assuming that you are saying that you have a top level site with two sub-sites which you are referring to as workspaces. In one of them you have the Project Tasks list. If my assumptions are correct...

I recommend that you use just one list and then use SharePoint Designer and the [Data Form Web Part](http://masteringsharepoint.com/blogs/beagle/archive/2008/08/13/DFWP1.aspx) to display the content in another site.

# c# - 将具有 T 类型的对象转换为 T 类型

> ID：925691
> 
> 赞同：0
> 
> 时间：2009-05-29T12:11:37.410
> 
> 标签：c#, properties, dynamic-typing

我继承了一个带有 Windows 移动部件的项目。长话短说，我的问题是：

```
[DBPropertyUpdate("CustomerId")]
[DBPropertyRetrieve("CustomerId")]
public CustomerBase<T> Customer
{
    get { return _customer; }
    set { _customer = SetProperty(_customer, value); }
} 
```

抛出异常。

在监视窗口中，我有以下内容：

```
> NAME         VALUE                           TYPE

_customer   {Pss.Common.Mia.Customer}   Pss.Common.Mia.CustomerBase<System.Guid> {Pss.Common.Mia.Customer}
(Pss.Common.Mia.CustomerBase<System.Guid>)_customer Cannot convert type 'Pss.Common.Mia.CustomerBase<T>' to 'Pss.Common.Mia.CustomerBase<System.Guid>' 
```

我不熟悉这段代码，但希望有一些简单的方法来转换`'Pss.Common.Mia.CustomerBase<T>' to 'Pss.Common.Mia.CustomerBase<System.Guid>'` 第二个 Watch 条目是我的尝试，如您所见，它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:25:05.713

类型为 CustomerBase<Guid> 的变量 _customer 不可能转换为 CustomerBase<T>，因为 T 未知。您还必须将 _customer 键入为 CustomerBase<T> 才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T14:59:11.560

通过将`CustomerBase<Guid>`类型传递给构建客户对象的函数来使其工作

# tfs - 为什么 microsoft .teamfundation.client 9.0 版不支持 1.0 版方法？

> ID：925694
> 
> 赞同：1
> 
> 时间：2009-05-29T12:14:13.460
> 
> 标签：tfs

*   我遇到了`microsoft.teamfundation.client`9.0 版的问题。
*   我最初使用的是`microsoft .teamfundation.client`1.0 版。
*   为了支持其他一些方法，我使用了 `microsoft.teamfundation.client`9.0 版本。

但是这个 9.0 版本只支持 1.0 版本中的一些方法。

任何身体都可以帮忙吗？提前致谢。

# mysql - Mysql创建名称中带有特殊字符的数据库

> ID：925696
> 
> 赞同：19
> 
> 时间：2009-05-29T12:14:26.500
> 
> 标签：mysql, special-characters

我想创建一个名称中包含特殊字符的数据库。例如，(., - , _, @, #, $, %, &, *)

任何人都可以提供任何输出吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-29T12:26:06.710

我强烈建议您不要创建具有此类名称的数据库。但如果你绝对必须，这里有一些[限制](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)：

*   任何标识符都不能包含 ASCII NUL (0x00) 或值为 255 的字节。
*   数据库、表和列名不应以空格字符结尾。
*   数据库和表名不能包含“/”、“\”、“.”或文件名中不允许的字符。

要创建数据库，您可以执行以下操作：

```
mysql> create database `really@strange*database$name`; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T12:27:45.880

很简单：不要。

您*可以*使用 mysql 中的反引号来转义奇异的表名，但我不知道您是否可以在反引号内使用*任何内容*。在您的软件生命周期的其余部分中，它将给您带来极大的痛苦。

我宁愿建议创建另一个表来保存那些异国情调的名字。

```
-- Example:
CREATE TABLE _DatabaseMetadata (
    databaseName VARCHAR(255),
    exoticName VARCHAR(255)
) DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T23:12:31.140

简短的回答：

*   不。我强烈建议保留由 AZ、az、0-9 和 _ 字符组成的所有标识符。您可以将您的“异国情调”名称存储在列或评论中。

长答案：

*   您可以使用外来字符命名列、表、键、外键、视图，甚至数据库，但您将来可能会后悔。
*   如果您坚持这样做，您将需要在反引号 (`) 中引用您的标识符。
*   如果你的标识符必须在里面包含另一个`，你可以将它转义两次（例如exotic`name --> `exotic`name`）
*   为了让事情变得不那么简单，如果您在数据库名称中使用异国（甚至非常规）字符（包括一个简单的空格），这些字符（据我所知，除 az,AZ,0-9 之外的所有字符）和 _) 转义为用 @ 转义的 4 位十六进制四元组，例如，“我的数据库”变为 my@0020 数据库。此表单用作存储您的数据库/表的目录/文件的名称，例如 information_schema.INNODB_SYS_FOREIGN 中的项目，而且很可能依赖于操作系统（这意味着，理论上，您可能希望运行`SHOW VARIABLES LIKE 'version_compile_os'`以适应它）。你看 - 有了异国情调的名字，这一切都变得更加复杂，最终它并不值得。

# svn - svn 切换错误 - 不是同一个存储库

> ID：925698
> 
> 赞同：77
> 
> 时间：2009-05-29T12:14:43.130
> 
> 标签：svn

我最近移动了 SVN 服务器，现在我正在尝试将工作副本从我的计算机重新定位到新服务器。但我得到了最奇怪的错误。我做 ：

```
svn switch http://99.99.99.new/svn/company/project/trunk/web 
```

但我明白了

```
svn: 'http://99.99.99.old/svn/company/project/trunk/web'
is not the same repository as
'http://99.99.99.new/svn/company/project' 
```

此举是通过转储和导入进行的......并且回购根目录位于[http://99.99.99.new/svn/company/project](http://99.99.99.new/svn/company/project)

你们有什么想法可能是错的吗？多谢

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2009-05-29T12:17:08.087

尝试使用

```
svn switch --relocate http://99.99.99.old/svn/company/project/trunk/web http://99.99.99.new/svn/company/project/trunk/web 
```

正如 Sporino 在评论中指出的那样，从 Subversion 1.7 开始，有一个单独的`relocate`命令：

```
svn relocate http://99.99.99.old/svn/company/project/trunk/web http://99.99.99.new/svn/company/project/trunk/web 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-06-24T10:47:58.310

此外，在 TortoiseSVN 中有“重新定位”选项，您应该在此类情况下使用它（而不是“切换”选项）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-11-14T16:16:27.507

我进行 SVN 重定位的最佳方法是：

```
svn switch --relocate $(svn info | grep ^URL | cut -f 2 --delim=' ') \
                      new_url_or_repository 
```

这样，从`svn info`命令中使用正确的旧 url，您肯定不会输入错误的，这是常见的错误之一。

如果一切正确，系统将提示您新位置的身份验证详细信息（如果它们不同）。

发出命令后，请务必仔细检查是否已应用更改，查看 URL 参数，发出

```
svn info 
```

重新定位后，更新您的工作副本，以检查一切是否正常：

```
svn update 
```

我的2c..

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-29T12:19:58.360

对命令使用`relocate`命令行参数`switch`。

[svn 切换文档](http://svnbook.red-bean.com/en/1.1/re27.html)

> 有时管理员可能会更改存储库的“基本位置”——换句话说，存储库的内容不会更改，但用于到达存储库根目录的主 URL 会更改。例如，主机名可能会改变，或者 URL 模式，或者可能只是通向存储库的路径。您可以使用 svn switch 命令“重写”工作副本中所有 URL 的开头，而不是签出新的工作副本。使用 --relocate 命令进行替换。不更改文件内容，也不联系存储库。这类似于在运行 s/OldRoot/NewRoot/ 的工作副本 .svn/ 目录上运行 perl 脚本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-29T12:19:26.070

您需要使用 --relocate 选项：

```
svn switch --relocate http://99.99.99.new/svn/company/project/trunk/web 
```

有关详细信息，请参阅[svnbook](http://svnbook.red-bean.com/en/1.0/re27.html)。

# asp.net - Microsoft AntiXSS 库有用吗？如果我使用服务器控件，是否需要它？

> ID：925703
> 
> 赞同：2
> 
> 时间：2009-05-29T12:16:02.863
> 
> 标签：asp.net, xss, antixsslibrary

我已经下载并查看了 Microsoft AntiXSS 库，但我不是 100% 确定我需要将它用于服务器控件（asp:textbox 等）。当我将它与标准 html 控件（输入等）一起使用时，一切都很好。当我在服务器控件上使用 antixss 库时，输出似乎被编码了两次。

我目前仅将 antixss 库用于标准 html 控件。我是否通过使用服务器控件免受跨站点脚本的影响，这是最佳做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T13:18:23.173

不幸的是，服务器控件的 HTML 编码故事并不一致，因此您可以说使用服务器控件将自动解决问题。请参阅[ASP.NET 有什么问题？哪些服务器控件需要您手动对其输出进行编码的表的HTML 编码](http://msmvps.com/blogs/calinoiu/archive/2006/06/13/what-s-wrong-with-asp-net-html-encoding.aspx)。

# python - 是否有一个统一的 python 库来使用不同的协议传输文件

> ID：925716
> 
> 赞同：3
> 
> 时间：2009-05-29T12:22:05.893
> 
> 标签：python, file, ftp, networking, nfs

我知道有`ftplib`ftp，`shutil`对于本地文件，NFS 呢？我知道 urllib2 可以通过 HTTP/HTTPS/FTP/FTPS**获取**文件，但它不能**放置**文件。

如果有一个统一的库可以自动检测带有URI的协议（FTP/NFS/LOCAL）并透明地处理文件传输（get/put），那就更好了，它存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T19:40:07.097

您想查找并使用 pycurl/libcurl。Libcurl：[http ://curl.haxx.se/ PyCurl：](http://curl.haxx.se/) [http](http://pycurl.sourceforge.net/) : //pycurl.sourceforge.net/ - curl 支持 http://、file:// 和 ftp:// uri。我使用它取得了很大的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T13:45:36.520

看看 KDE IOSlaves。他们可以管理您描述的所有协议，以及其他一些协议（samba、ssh、...）。

您可以通过 PyKDE 实例化 IOSlaves，或者如果该依赖关系太大，您可以使用 subprocess 模块从 python 管理 ioslave。

# c# - 在扩展控制器中更改 ViewData 的类型

> ID：925719
> 
> 赞同：0
> 
> 时间：2009-05-29T12:23:41.100
> 
> 标签：c#, c, asp.net-mvc

我创建了自己的继承自 Controller 的 CustomController 基类。同样，我创建了自己的继承自 ViewDataDictionary 的 CustomViewData。CustomController 类有一个接受 CustomViewData 作为参数的 ctor。

我所有的控制器都继承自 CustomController 并传入它们继承的 CustomViewData。现在我希望能够从我的控制器中调用 this.ViewData 并取回我在控制器中传递的视图数据。目前我得到了一个 ViewDataDictionary （来自 Controller 类）。所以我丢失了我的类型信息。

如何在我的 CustomController 派生类中保留我的 ViewData 属性的类型信息，而不将其包装在为我进行装箱的 get/set 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T00:20:59.360

ViewData 属性在 ControllerBase 类中定义，您不能覆盖它，但您可以这样做：

```
public class CustomController : Controller {

    public new CustomViewData ViewData { get; set; }

} 
```

但是请注意，如果您访问这样的 CustomController 实例

```
Controller c = myCustomControllerInstance;
CustomViewData cvd = c.ViewData; 
```

您的代码将无法编译，因为您将使用 ViewData 属性的默认实现，它将返回一个 ViewDataDictionary 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-02T08:26:00.190

我尝试了几种方法来实现我的目标，但除了我知道存在的这个丑陋的解决方案之外似乎没有任何方法可以工作，但是......好吧，丑陋的。
我基本上将装箱/拆箱包装在 get/set 中。我必须在整个班级链中这样做。所以我的 CommonController 使用 CommonViewData 实例执行此操作，我的 AbcController:CommonController 从 AbcViewData:CommonViewData 到 CommonViewData 等执行此操作。直到我找到更好的解决方案，我将不得不这样做。

```
public new AbcViewData ViewData { 
    get { return base.ViewData as [bcViewData; }
    set { base.ViewData = value; }
} 
```

# javascript - JavaScript onclick 中的“this”是什么？

> ID：925734
> 
> 赞同：136
> 
> 时间：2009-05-29T12:28:10.670
> 
> 标签：javascript

```
<a onclick="javascript:func(this)" >here</a> 
```

`this`剧本中的意思是什么？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2009-05-29T12:30:37.483

在您询问的情况下，`this`表示 HTML DOM 元素。

所以这将是`<a>`被点击的元素。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-05-29T12:36:25.363

它指的是属性所属的DOM 中的[元素：](http://en.wikipedia.org/wiki/Document_Object_Model)`onclick`

```
<script type="text/javascript"
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">
</script>
<script type="text/javascript">
function func(e) {
  $(e).text('there');
}
</script>
<a onclick="func(this)">here</a> 
```

（此示例使用[jQuery](http://jquery.com/)。）

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-05-29T14:09:49.903

onclick 等事件处理程序属性的值应该只是 JavaScript，没有任何“javascript:”前缀。javascript: 伪协议用于 URL，例如：

```
<a href="javascript:func(this)">here</a> 
```

不过，您应该`onclick="func(this)"`优先使用该表单。另请注意，在我上面的示例中，使用 javascript: 伪协议“this”将引用窗口对象而不是`<a>`元素。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-08T20:45:50.427

在 JavaScript`this`中是指包含动作的元素。例如，如果您有一个名为 的函数`hide()`：

```
function hide(element){
   element.style.display = 'none';
} 
```

调用`hide`with`this`将隐藏元素。它只返回单击的元素，即使它与 DOM 中的其他元素相似。

例如，您可能`this`在下面的 HTML 中单击一个数字只会隐藏单击的项目符号点。

```
<ul>
  <li class="bullet" onclick="hide(this);">1</li>
  <li class="bullet" onclick="hide(this);">2</li>
  <li class="bullet" onclick="hide(this);">3</li>
  <li class="bullet" onclick="hide(this);">4</li>
</ul> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-19T12:08:32.623

在*addEventListener*事件中关键字*this*

 *```
function getValue(o) {
  alert(o.innerHTML);
}

function hide(current) {
  current.setAttribute("style", "display: none");
}

var bullet = document.querySelectorAll(".bullet");

for (var x in bullet) { 
  bullet[x].onclick = function() {
    hide(this);
  };
};

/* Using dynamic DOM Event */
document.querySelector("#li").addEventListener("click", function() {
  getValue(this); /* this = document.querySelector("#li") Object */
});
```

```
li {
  cursor: pointer;
}
```

```
<ul>
  <li onclick="getValue(this);">A</li>
  <li id="li" >B</li>
  <hr />
  <li class="bullet" >1</li>
  <li class="bullet" >2</li>
  <li class="bullet" >3</li>
  <li class="bullet" >4</li>
</ul>
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-25T07:24:00.347

这里 (this) 是一个包含 dom 元素的所有特征/属性的对象。你可以看到

```
console.log(this); 
```

这将显示具有层次结构的 dom 元素的所有属性属性。您可以通过此操作 dom 元素。

还可以在下面的链接中描述：-

[http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-29T12:39:39.617

调用函数时，单词“this”是对调用该函数的对象的引用。

在您的示例中，它是对锚元素的引用。在另一端，函数调用然后通过传递的参数访问元素的成员变量。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-29T12:30:48.370

`this``onclick`引用该方法所属的对象。所以里面`func` `this`是`a`元素的 DOM 节点，并且`this.innerText`是`here`.

# c# - System.Diagnostics.StackTrace 或 System.Diagnostics.StackFrame 用于调试？为什么

> ID：925737
> 
> 赞同：1
> 
> 时间：2009-05-29T12:29:03.303
> 
> 标签：c#, debugging, logging, error-handling

这段代码是：

```
System.Diagnostics.StackFrame stackFrame = new System.Diagnostics.StackFrame();
System.Reflection.MethodBase methodBase = stackFrame.GetMethod();
stackFrame.GetFileName();
stackFrame.GetFileLineNumber(); 
```

与使用 System.Diagnostics.StackTrace 相比，更适合调试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T12:36:32.400

StackTrace 在内部使用 StackFrame，默认构造函数会为您处理此问题并设置列号。

我会坚持使用 StackTrace 除非您需要有限数量的帧或减少堆栈跟踪（可能出于性能原因）

# .net - 如何在 SQL Server 中查找外键依赖项？

> ID：925738
> 
> 赞同：168
> 
> 时间：2009-05-29T12:29:16.097
> 
> 标签：.net, sql-server, foreign-keys

如何找到特定列上的所有外键依赖项？

有哪些不同的替代方案（SSMS 中的图形、SQL Server 中的查询/视图、第 3 方数据库工具、.NET 中的代码）？

* * *

## 回答 #1

> 赞同：304
> 
> 时间：2009-05-29T12:34:07.617

以下查询将帮助您入门。它列出了当前数据库中的所有外键关系。

```
SELECT
    FK_Table = FK.TABLE_NAME,
    FK_Column = CU.COLUMN_NAME,
    PK_Table = PK.TABLE_NAME,
    PK_Column = PT.COLUMN_NAME,
    Constraint_Name = C.CONSTRAINT_NAME
FROM
    INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK
    ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK
    ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU
    ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (
            SELECT
                i1.TABLE_NAME,
                i2.COLUMN_NAME
            FROM
                INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
            INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2
                ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
            WHERE
                i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
           ) PT
    ON PT.TABLE_NAME = PK.TABLE_NAME 
```

您还可以在数据库图表中的 SQL Server Management Studio 中以图形方式查看关系。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2009-05-29T12:37:16.203

尝试：`sp_help [table_name]`

您将获得有关表的所有信息，包括所有外键

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-11-20T21:46:14.837

因为您的问题是针对单个表的，所以您可以使用它：

```
EXEC sp_fkeys 'TableName' 
```

我在这里找到了它：

[https://stackoverflow.com/a/12956348/652519](https://stackoverflow.com/a/12956348/652519)

我很快就找到了我需要的信息。它列出了外键的表、列和名称。

**编辑**

这是详细说明可以使用的不同参数的文档的链接：[https ://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-fkeys-transact-sql](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-fkeys-transact-sql)

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2013-03-27T12:07:30.260

如果您计划删除或重命名表或列，仅查找外键依赖项可能还不够。

**引用未与外键连接的表**- 您还需要搜索可能未与外键连接的引用表（我见过许多设计不佳的数据库没有定义外键但确实有相关数据）。解决方案可能是在所有表中搜索列名并查找相似的列。

**其他数据库对象**——这可能有点跑题了，但是如果您要查找所有引用，那么检查依赖对象也很重要。

GUI 工具——尝试使用 SSMS“查找相关对象”选项或[ApexSQL Search](http://www.apexsql.com/sql_tools_search.aspx)（免费工具，集成到 SSMS）等工具来识别所有相关对象，包括与外键连接的表。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2009-06-22T20:46:46.347

## 我认为这个脚本更便宜：

```
SELECT f.name AS ForeignKey, OBJECT_NAME(f.parent_object_id) AS TableName,
    COL_NAME(fc.parent_object_id, fc.parent_column_id) AS ColumnName,
    OBJECT_NAME (f.referenced_object_id) AS ReferenceTableName,
    COL_NAME(fc.referenced_object_id, fc.referenced_column_id) AS ReferenceColumnName
FROM sys.foreign_keys AS f
INNER JOIN sys.foreign_key_columns AS fc
ON f.OBJECT_ID = fc.constraint_object_id 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-29T12:33:14.373

我真正喜欢使用的一个是[Red Gate Software](http://www.red-gate.com)的 SQL Dependency Tracker 。您可以放入任何数据库对象，例如表、存储过程等，然后它将自动绘制依赖于您所选项目的所有其他对象之间的关系线。

为您的架构中的依赖关系提供非常好的图形表示。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-12T10:33:30.983

非常感谢 John Sansom，他的提问非常棒！

另外：您应该在查询末尾添加“AND PT.ORDINAL_POSITION = CU.ORDINAL_POSITION”。

如果您在主键中有多个字段，则此语句将匹配相应的字段（我有这种情况，您的查询确实创建了所有组合，所以对于主键中的 2 个字段，我有 4 个对应外键的结果） .

（抱歉，我没有足够的声望点，无法评论约翰的回答）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-11T01:55:02.243

此查询将返回有关表中外键的详细信息，它支持多个列键。

```
 SELECT *
    FROM
    (
    SELECT 
    T1.constraint_name ConstraintName,
    T2.COLUMN_NAME ColumnName,
    T3.TABLE_NAME RefTableName, 
    T3.COLUMN_NAME RefColumnName,
    T1.MATCH_OPTION MatchOption, 
    T1.UPDATE_RULE UpdateRule, 
    T1.DELETE_RULE DeleteRule
    FROM 
    INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS T1
    INNER JOIN
    INFORMATION_SCHEMA.KEY_COLUMN_USAGE T2 
    ON T1.CONSTRAINT_NAME = T2.CONSTRAINT_NAME
    INNER JOIN
    INFORMATION_SCHEMA.KEY_COLUMN_USAGE T3 
    ON T1.UNIQUE_CONSTRAINT_NAME = T3.CONSTRAINT_NAME 
    AND T2.ORDINAL_POSITION = T3.ORDINAL_POSITION) A
    WHERE A.ConstraintName = 'table_name' 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-05-09T16:32:14.667

经过长时间的搜索，我找到了一个可行的解决方案。我的数据库不使用 sys.foreign_key_columns 并且 information_schema.key_column_usage 只包含主键。

我使用 SQL Server 2015

**解决方案 1（很少使用）**

如果其他解决方案不起作用，这将正常工作：

```
 WITH CTE AS
        (
            SELECT 
                TAB.schema_id,
                TAB.name,
                COL.name AS COLNAME,
                COl.is_identity
            FROM 
                sys.tables TAB INNER JOIN sys.columns COL 
                    ON TAB.object_id = COL.object_id
        )
        SELECT 
            DB_NAME() AS [Database], 
            SCHEMA_NAME(Child.schema_id) AS 'Schema',
            Child.name AS 'ChildTable',
            Child.COLNAME AS 'ChildColumn',
            Parent.name AS 'ParentTable',
            Parent.COLNAME AS 'ParentColumn'
        FROM 
            cte Child INNER JOIN CTE Parent
                ON 
                    Child.COLNAME=Parent.COLNAME AND 
                    Child.name<>Parent.name AND 
                    Child.is_identity+1=Parent.is_identity 
```

**解决方案2（常用）**

在大多数情况下，这将工作得很好：

```
 SELECT
            DB_NAME() AS [Database], 
            SCHEMA_NAME(fk.schema_id) AS 'Schema',
            fk.name 'Name',
            tp.name 'ParentTable',
            cp.name 'ParentColumn',
            cp.column_id,
            tr.name 'ChildTable',
            cr.name 'ChildColumn',
            cr.column_id
        FROM
            sys.foreign_keys fk
        INNER JOIN
            sys.tables tp ON fk.parent_object_id = tp.object_id
        INNER JOIN
            sys.tables tr ON fk.referenced_object_id = tr.object_id
        INNER JOIN
            sys.foreign_key_columns fkc ON fkc.constraint_object_id = fk.object_id
        INNER JOIN
            sys.columns cp ON fkc.parent_column_id = cp.column_id AND fkc.parent_object_id = cp.object_id
        INNER JOIN
            sys.columns cr ON fkc.referenced_column_id = cr.column_id AND fkc.referenced_object_id = cr.object_id
        WHERE 
            -- CONCAT(SCHEMA_NAME(fk.schema_id), '.', tp.name, '.', cp.name) LIKE '%my_table_name%' OR
            -- CONCAT(SCHEMA_NAME(fk.schema_id), '.', tr.name, '.', cr.name) LIKE '%my_table_name%' 
        ORDER BY
            tp.name, cp.column_id 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-13T08:51:45.613

您可以使用 INFORMATION_SCHEMA.KEY_COLUMN_USAGE 和 sys.foreign_key_columns 来获取表的外键元数据，即约束名称、参考表和参考列等。

以下是查询：

```
SELECT  CONSTRAINT_NAME, COLUMN_NAME, ParentTableName, RefTableName,RefColName FROM 
    (SELECT CONSTRAINT_NAME,COLUMN_NAME FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE TABLE_NAME = '<tableName>') constraint_details
    INNER JOIN  
    (SELECT ParentTableName, RefTableName,name ,COL_NAME(fc.referenced_object_id,fc.referenced_column_id) RefColName  FROM (SELECT object_name(parent_object_id) ParentTableName,object_name(referenced_object_id) RefTableName,name,OBJECT_ID  FROM sys.foreign_keys WHERE parent_object_id = object_id('<tableName>') ) f 
    INNER JOIN   
    sys.foreign_key_columns AS fc  ON  f.OBJECT_ID = fc.constraint_object_id ) foreign_key_detail 
    on foreign_key_detail.name = constraint_details.CONSTRAINT_NAME 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-06T20:57:14.083

只是@“John Sansom”答案的注释，

如果寻求**外键**依赖项，我认为 PT Where 子句应该是：

```
i1.CONSTRAINT_TYPE = 'FOREIGN KEY'  -- instead of 'PRIMARY KEY' 
```

及其**开启**条件：

```
ON PT.TABLE_NAME = FK.TABLE_NAME – instead of PK.TABLE_NAME 
```

由于常用外表的主键，我想这个问题以前没有被注意到。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-28T13:23:49.250

```
SELECT  obj.name AS FK_NAME,
    sch.name AS [schema_name],
    tab1.name AS [table],
    col1.name AS [column],
    tab2.name AS [referenced_table],
    col2.name AS [referenced_column]
FROM sys.foreign_key_columns fkc
INNER JOIN sys.objects obj
    ON obj.object_id = fkc.constraint_object_id
INNER JOIN sys.tables tab1
    ON tab1.object_id = fkc.parent_object_id
INNER JOIN sys.schemas sch
    ON tab1.schema_id = sch.schema_id
INNER JOIN sys.columns col1
    ON col1.column_id = parent_column_id AND col1.object_id = tab1.object_id
INNER JOIN sys.tables tab2
    ON tab2.object_id = fkc.referenced_object_id
INNER JOIN sys.columns col2
    ON col2.column_id = referenced_column_id AND col2.object_id = tab2.object_id 
```

它会给你：

FK 本身 FK 所属的 Schema

*   “参考表”或具有 FK 的表
*   “引用列”或引用表中指向 FK 的列
*   “引用表”或具有 FK 指向的键列的表
*   “引用列”或您的 FK 指向的键的列

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-02-21T23:08:48.660

使用信息模式；

```
SELECT COLUMN_NAME, REFERENCED_TABLE_NAME, REFERENCED_COLUMN_NAME
FROM KEY_COLUMN_USAGE
WHERE (table_name = *tablename*) AND NOT (REFERENCED_TABLE_NAME IS NULL) 
```

# c - 学习 C 程序设计的资源

> ID：925754
> 
> 赞同：56
> 
> 时间：2009-05-29T12:34:10.877
> 
> 标签：c

来自 OO 背景 (C#/java) 我正在寻找资源来学习如何很好地设计纯 C 程序。

虽然我熟悉 C 的语法，并且我可以编写小程序，但我不确定大型应用程序采用的方法以及采用哪些技术。大家有什么可以推荐的。

编辑：我很高兴完全放弃 OO 以使用 C 编程，我的兴趣是学习如何在没有 OO 的情况下构建程序，我想了解用 C 等过程语言设计程序的好方法。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-05-29T13:53:32.383

[这篇文章](https://stackoverflow.com/questions/236838/what-are-good-linux-unix-books-for-an-advancing-user/236967#236967)有一个 UNIX 书籍列表，其中包括大多数经典的 C/Unix 作品。对于 Windows 上的 C 编程，Petzold 的[Programming Windows](https://rads.stackoverflow.com/amzn/click/com/157231995X)可能是最好的开始。

对于 C 程序设计，一些 UNIX 编程书籍会告诉您代码片段，但我不知道有一本“C 程序架构”书籍。

如果您习惯于 java，那么 C 编程的一些技巧是：

1.  [利用](https://stackoverflow.com/questions/685601/about-c-c-stack-allocation) [堆栈](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)。[_](https://stackoverflow.com/questions/161053/c-which-is-faster-stack-allocation-or-heap-allocation) [_](http://www.math.cam.ac.uk/undergrad/catam/ccatsl/manual/node50.html) 通常，当您调用一个过程时，您会希望在调用者的堆栈帧中分配变量，并将指向它们的指针传递给您要调用的过程。这将比动态分配内存快得多，而且更不容易出错。在适当的地方执行此操作。[`malloc()`](http://en.wikipedia.org/wiki/Malloc)

2.  C 不进行[垃圾收集，](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)因此动态分配数据项更加繁琐，您必须跟踪它们以[确保它们被释放。](http://en.wikipedia.org/wiki/Memory_leak) 在堆栈上分配的变量（参见 1）在适用的地方更“惯用”。另外，您不必释放它们 - 这是局部变量的奖励。

3.  根据 (2)，考虑一种架构，其中您的函数返回状态或错误代码，并按照 (1) 使用堆栈传入和传出数据。

4.  了解什么[`setjmp()`](http://en.wikipedia.org/wiki/Setjmp)和[`longjmp()`](http://en.wikipedia.org/wiki/Setjmp)做什么。它们对于代替结构化异常处理功能的通用错误处理机制非常有用。

5.  [C 不支持异常。](http://en.wikibooks.org/wiki/C_Programming/Error_handling) 见（3）。

6.  [林特](http://en.wikipedia.org/wiki/Lint_%28software%29)是你的朋友。 [夹板](http://www.splint.org/)更友好。

7.  了解[预处理器](http://en.wikipedia.org/wiki/C_preprocessor)的作用和不应该用它做什么，即使可以。

8.  [了解字节序](http://en.wikipedia.org/wiki/Endianness)、[字对齐](https://www.cs.umd.edu/~meesh/cmsc311/clin-cmsc311/Lectures/lecture6/alignment.pdf)、[指针算法](http://www.eskimo.com/~scs/cclass/notes/sx10b.html)和其他低级架构奥秘的来龙去脉。与流行的观点相反，这些都不是火箭科学。如果您感觉很热，请尝试涉足汇编语言并获得相关的工作知识。它将有助于您理解 C 程序中正在发生的事情。

9.  C 没有模块范围的概念，因此请计划好您对包含、原型声明的使用，以及使用[`extern`](https://stackoverflow.com/questions/2753962/what-does-the-extern-keyword-mean)and[`static`](http://blog.robbychen.com/2010/09/26/the-c-static-keyword/)来创建私有范围和导入标识符。

10.  [在所有](http://www.winprog.org/tutorial/) [平台](http://tronche.com/gui/x/xlib/introduction/)上，C 语言的 GUI 编程都很乏味。

11.  (10) 的建议学习至少一种脚本语言的 C API，例如[Tcl](http://wiki.tcl.tk/11541)、[Lua](http://www.lua.org/pil/24.html)或[Python。](http://docs.python.org/extending/index.html#extending-index) 在许多情况下，C 的最佳用途是作为一个核心高性能引擎在一个基本上用其他东西编写的应用程序上。

12.  构造函数的等价物是一个初始化函数，您可以在其中传递一个指向要设置的项目的指针。通常，您可以通过调用看起来像 的函数的形式看到这一点`setup_foo(&my_foo)`。最好将分配与初始化分开，因为您可以使用此函数来初始化您在堆栈上分配的项目。类似的原则适用于析构函数。

13.  大多数人发现[匈牙利符号](http://en.wikipedia.org/wiki/Hungarian_notation)的可读性与书面匈牙利语差不多。例外情况是讲匈牙利语的母语人士，他们通常会发现匈牙利符号与[楔形文字一样清晰易读。](http://www.google.co.uk/images?hl=en&expIds=17259,27491,27586,27812,27817&xhr=t&q=cuneiform&cp=4&client=firefox-a&hs=kwg&rls=org.mozilla:en-GB:official&um=1&ie=UTF-8&source=univ&ei=c37zTP-5Lo-1hAeIwenDCQ&sa=X&oi=image_result_group&ct=title&resnum=4&sqi=2&ved=0CEMQsAQwAw&biw=1200&bih=815). 不幸的是，匈牙利符号在 Windows 软件中被广泛使用，整个 Win32 API 都使用它，预期会影响在该平台上编写的软件的易读性。

14.  C/Unix 书籍，即使是像已故的 W Richard Stevens 所写的那些非常好的书籍，也往往可以通过亚马逊市场以相当便宜的价格买到二手书。没有特别的顺序，获得[K&R、](http://en.wikipedia.org/wiki/The_C_Programming_Language_%28book%29) Stevens [APUE](http://www.kohala.com/start/apue.html)和[UNP 1](http://www.kohala.com/start/unpv12e.html) [& 2、](http://www.kohala.com/start/unpv22e/unpv22e.html) Dragon [book、](http://en.wikipedia.org/wiki/Principles_of_Compiler_Design) [Rochkind、](http://www.informit.com/authors/bio.aspx?a=AFAC0A13-A141-47D6-B508-04A03D7B4634) [Programming Pearls、](http://www.cs.bell-labs.com/cm/cs/pearls/) [Petzold](http://www.charlespetzold.com/pw5/index.html)和[Richter](https://rads.stackoverflow.com/amzn/click/com/0735607532)（如果在 Windows 上工作）以及任何其他经典 C/Unix 作品的副本。阅读，用铅笔在上面涂鸦，并通常与书籍互动。

15.  网上有很多很多很好的[C/Unix 编程](http://www.google.co.uk/search?q=c+programming)资源。

16.  阅读并理解[C 编程的十诫](http://www.lysator.liu.se/c/ten-commandments.html)以及关于诫命背后的原因和原因的一些元讨论。这在一定程度上显示了它的时代，尽管其中大部分仍然是相关的，并且晦涩的编译器[在嵌入式系统世界中仍然相当普遍](https://stackoverflow.com/questions/243387/best-language-for-safety-critical-software/243573#243573)。

17.  如果您想编写解析器，[Lex 和 Yacc是您的朋友。](http://dinosaur.compilertools.net/)

18.  正如 Navicore[在下面指出的 (+1)](https://stackoverflow.com/questions/925754/resources-for-learning-c-program-design/928786#928786)，Hanson 的[“C 接口和实现”](http://www.cs.princeton.edu/software/cii/)是针对模块化架构的接口/实现设计的失败，其中包含大量示例。我实际上听说过这本书，也听说过它的好消息，尽管我不能声称自己读过它。除了我上面描述的 C 习语之外，这个概念可以说是良好程序设计的核心。事实上，Modula-2 等其他过程语言实际上在其设计中明确了这一概念。这可能是最接近印刷中的“C 程序架构”一书的东西。

19.  阅读[C 常见问题解答](http://c-faq.com/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-30T02:09:05.207

David Hanson 的“C 接口和实现”解决了我从 OO 回到 C 的担忧。

[C 接口和实现](http://www.cs.princeton.edu/software/cii/)

严肃地说，它的方法在避免意外构建许多非 oo 系统最终形成的大纱线球方面产生了巨大的影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T12:39:21.270

以下是关于 C 中的 OO 编程的另一个问题的一些[有趣的回答](https://stackoverflow.com/questions/415452/object-orientation-in-c/415459#415459)。我发表了一篇关于我使用的一些 C 代码的帖子，这些代码基本上通过不包含虚拟方法来实现面向对象的停止。

如果我在做 C 编码，我会使用这种技术来定义“对象”。

我发现牢记[设计模式](https://rads.stackoverflow.com/amzn/click/com/0201633612)总是有帮助的，并且可以在大多数语言中实现。

这是一个很好的 PDF 讨论[面向对象的 C 编程](http://www.planetpdf.com/codecuts/pdfs/ooc.pdf)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T12:45:57.217

tanenbaum 的 minix

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-30T18:29:28.120

更大的应用？C 的优势在于当您必须处理设备驱动程序、调度程序和其他 OS 风格的东西等低级事物时。

您可以使 C 像 OO 一样运行，但这最终会让人感觉像是重新发明轮子的练习。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-02T06:06:23.003

一件小事是将你的 .c 文件“向后”排序 - 即将 main() 放在文件的底部，并始终确保本地函数（那些不在你的 .h 文件中的函数，你只是为了使用而编写的在该文件中）位于首次使用它们的位置上方。这意味着您不必为它们编写原型，如果您必须更改它们的 API，这是一件少有的事情。

然后，作为奖励，vim 中的“gD”命令将始终转到函数的定义，如果它在同一个文件中:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-30T06:06:38.063

虽然它是作为一种与语言无关的文本编写的，但[Code Complete](http://www.cc2e.com)提供了很多关于代码结构和组织以及构建实践的良好指导。

# web-services - 将 Byte 数组从 Blackberry 传递到 .NET Webservice

> ID：925756
> 
> 赞同：2
> 
> 时间：2009-05-29T12:35:27.847
> 
> 标签：web-services, blackberry, asmx, java-wireless-toolkit, jsr172

我正在尝试将一个字节数组从我的 Blackberry 应用程序发送到 .NET webservice (asmx)。

我正在使用 Sun Java Wireless Toolkit (WTK) 2.5.2 来生成要在 Blackberry 解决方案中使用的 Web 服务存根。WTK 项目设置使用 JSR 172 规范生成存根。

我使用 .NET 2005 创建了 Web 服务，方法如下：

```
[WebMethod]
public string UploadImage(byte[] Data, string Name)
{
  //do stuff
} 
```

我从这个 Web 服务的 WSDL 生成存根，但我收到：“错误：找到未知的简单类型：字节 []”。我使用过这种生成存根的方法，之前没有收到任何错误，因为所有输入变量都是简单类型，但我用它来返回自定义对象的数组。当我检查 WSDL 文件时，类型是 base64Binary。

除了字节数组之外，还有什么我可以用来传递数据的吗？还是我缺少某种设置以允许 Web 服务将其作为字节数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-31T23:42:25.647

最好的办法可能只是将参数指定为字符串。 [Base64](http://en.wikipedia.org/wiki/Base64)是二进制数据的 ASCII 表示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-17T09:19:52.407

你有用字符串而不是字节[]声明你的方法。您可以在客户端使用以下代码段：

```
byte[] chunk = ...;
String data= Base64OutputStream.encodeAsString(chunk, 0, chunk.length, false, false);
UploadImage(data, name)

and on the server side you can use:

byte[] byteArray;
byteArray = Base64.decode(data); 
```

# c# - 用于重置网络适配器的 C#

> ID：925768
> 
> 赞同：3
> 
> 时间：2009-05-29T12:38:12.537
> 
> 标签：c#, networking

我正在寻找一些指向我在 C# 中的位置的指针，以便简单地重置网络设备。我的原因是我的工作中的一个盒子在进入待机状态后停止与我们的 Exchange 服务器通信，如果我可以有一个小应用程序，只需单击一下即可重置适配器，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T12:45:42.227

“重置”是什么意思？你的意思是适配器在进入待机状态时丢失了它的地址并且在恢复时没有得到一个？

如果是这种情况，那么执行它的最简单方法是调用 ipconfig /renew。

这可以使用

```
System.Diagnostics.Process.Start("ipconfig", "/renew"); 
```

或者只是将批处理文件放在桌面上，可以用该行双击

```
IPConfig /renew 
```

在那里。

编辑 ** 只是认为您可能需要在调用 IPConfig /renew 之前调用 IPConfig /Release **

对于企业应用程序，我会研究 Windows API，因为将有可以调用的函数来执行 ipconfig /renew 所做的事情，但为简单起见，上面应该没问题。

HTH OneSHOT

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-21T11:02:04.097

尝试“netsh interface set interface DISABLED”然后“netsh interface set interface ENABLED”

# .net - 资源分配到 IIS 进程和标准 Windows 应用程序

> ID：925775
> 
> 赞同：0
> 
> 时间：2009-05-29T12:40:00.647
> 
> 标签：.net, asp.net, iis, resources

我们的局域网上有一台配置非常好的服务器机器

*   4 GB 内存
*   1 TB 硬盘
*   四核处理器

我们可以在服务器上运行两种类型的应用程序

1.  在 IIS 监督下运行的 ASP.NET Web 应用程序
2.  使用管理员帐户运行的标准 Windows 应用程序。

我的问题是资源如何在这些应用程序之间分配。我知道 Windows 应用程序可以利用大量资源（100% CPU、100% RAM 等），但我不确定 asp.net 进程对这些资源有多少访问权限。它对他们来说是有限的还是像 Windows 应用程序一样？此外，如果有任何限制，那么我们如何控制它。

我问这个问题的原因是我们的 Web 应用程序要执行一些繁重的操作。什么是最好的方法来做到这一点。我应该使用 Windows 服务、MSMQ 还是可以使用 asp.net 帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T13:53:19.483

要回答您的第一个问题，在 Windows Server 2003 或 2008 中，有一个称为[Windows 系统资源管理器](http://www.microsoft.com/windowsserver2003/technologies/management/wsrm/default.mspx)（又名 WSRM）的东西，它允许您将系统资源分配给应用程序或进程。这是随服务器操作系统企业版一起提供的。只是*如何*分配资源是一种魔法。您将不得不尝试，在各种条件下彻底测试。

对于您的第二个问题 - 处理“繁重操作”的最佳方式 - 我想简单的答案*取决于它*。有许多不同的方法，它们满足不同的要求。

MSMQ 有助于缓冲工作请求以在非高峰时间进行处理。WSRM 可以启用系统资源的分配和配给。这两者可以是互补的，或者您可以将它们视为替代品。

* * *

至于 ASP.NET 和 Windows 服务：ASP.NET 显然主要用于基于浏览器的请求，但也可能用于来自其他系统的 REST 样式请求（或类似请求）。ASP.NET 应用程序将在 w3wp.exe 工作进程下运行，该进程由 IIS 维护。您可以获得所有 IIS 进程管理功能，例如定期重启、自动重启过时进程、基于请求的激活等。

Windows 服务是一种创建在 Windows Server 上运行的自定义应用程序的方法，它可能不是基于请求的。您的场景的一个示例可能是按计划启动的 Windows 服务，假设在每天晚上 10 点启动，并运行 MSMQ 中所有排队的事务。当队列为空或凌晨 4 点时（以先到者为准），Windows 服务将关闭。Windows 服务不享有任何 IIS 进程管理优势。

归根结底，ASP.NET 和 Windows 服务为进程或应用程序托管和生命周期管理提供了不同的替代方案。

* * *

这只是一般信息。要从该社区获得更具体和具体的指导，您必须提出比“我如何进行繁重处理？”更具体的要求。

# objective-c - 从 NSString 中删除字符？

> ID：925780
> 
> 赞同：96
> 
> 时间：2009-05-29T12:41:10.097
> 
> 标签：objective-c, nsstring

```
NSString *myString = @"A B C D E F G"; 
```

我想删除空格，所以新字符串是“ABCDEFG”。

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2009-05-29T12:45:50.040

你可以使用：

```
NSString *stringWithoutSpaces = [myString 
   stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2009-05-29T16:41:35.763

如果你想一次支持多个空格，或者支持任何空格，你可以这样做：

```
NSString* noSpaces =
    [[myString componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]
                           componentsJoinedByString:@""]; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2011-03-21T10:28:18.003

取自[NSString](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

```
stringByReplacingOccurrencesOfString:withString: 
```

返回一个新字符串，其中接收器中所有出现的目标字符串都被另一个给定的字符串替换。

```
- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target withString:(NSString *)replacement 
```

参数

目标

```
The string to replace. 
```

替代品

```
The string with which to replace target. 
```

返回值

一个新字符串，其中接收器中所有出现的目标都被替换替换。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-09T12:32:52.207

以上都可以正常工作。但正确的方法是这样的：

```
yourString = [yourString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]; 
```

它将像 TRIM 方法一样工作。它将删除所有前后空间。

谢谢

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-12T09:49:07.187

如果字符串是**mutable**，那么您可以使用以下形式对其进行转换：

```
[string replaceOccurrencesOfString:@" "
                        withString:@""
                           options:0
                             range:NSMakeRange(0, string.length)]; 
```

如果您希望结果是输入字符串的可变实例，这也很有用：

```
NSMutableString * string = [concreteString mutableCopy];
[string replaceOccurrencesOfString:@" "
                        withString:@""
                           options:0
                             range:NSMakeRange(0, string.length)]; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-23T13:31:34.027

你可以试试这个

```
- (NSString *)stripRemoveSpaceFrom:(NSString *)str {
    while ([str rangeOfString:@"  "].location != NSNotFound) {
        str = [str stringByReplacingOccurrencesOfString:@" " withString:@""];
    }
    return str;
} 
```

希望这会帮助你。

# asp-classic - 在经典 ASP 中处理大文件

> ID：925784
> 
> 赞同：3
> 
> 时间：2009-05-29T12:43:12.807
> 
> 标签：asp-classic

我想知道在经典 asp 中提供生成的大文件的最佳实践是什么。

我们有一个具有“导出到 excel”功能的应用程序，可以生成 10MB 的文件。只需调用 Response.ContentType 设置为 excel 并具有数据的 HTML 表的 .asp 页面即可创建 Excel。

这给出了一个问题，即用户需要 4 分钟才能看到“另存为...”对话框。

我当前的解决方案是调用一个 .asp 页面，该页面使用 AJAX 在服务器上创建 excel，并让页面返回生成文档的 URL。然后我可以使用javascript在原始页面上显示。

在考虑安全性的同时，使用经典的 asp（使用某种流在服务器上创建文件）是否容易做到这一点？（URL应该让人们能够猜出其他文件的位置）

我将如何处理超时删除的生成文件？随着数据的实时变化，它们必须定期删除。

谢谢。

编辑：我现在意识到在服务器上创建文件可能也需要 4 分钟......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T12:59:17.893

当解决方案足够简单时，我认为您正在选择一条复杂的路线（尽管我可能缺少一些要求）

如果要生成 excel，只需调用执行以下操作的 asp 页面：

```
Response.clear
Response.AddHeader "content-disposition", "attachment; filename=myexcel.xls"
Response.ContentType = "application/excel"

'//write the content of the file
Response.write "...."

Response.end 
```

这将在浏览器中启动下载过程，而无需生成额外的调用、javascript 或任何东西

有关您将选择生成 excel 的格式的更多信息，请参阅[此问题。](https://stackoverflow.com/questions/150339/generating-an-excel-file-in-asp-net)

## 编辑

由于 Thomas 更新了问题，而真正的问题是生成文件需要 4 分钟，因此解决方案可能是：

1.  为用户提供通过电子邮件发送文件（如果这是您的服务器或主机中的可行解决方案）。

2.  异步生成文件，并让用户知道文件生成何时完成（使用 ajax 调用，就像其他用户添加答案时那样）

**在服务器上生成文件**

```
'//You should change for a random name or something that makes sense
FileName = "C:\temp\myexcel.xls" 
FileNumber = FreeFile
Open FileName For Append As #FileNumber

'//generate the content
TheRow = "...."
Print #FileNumber, TheRow

Close #FileNumber 
```

**要删除生成的临时文件**
，我使用[Empty Temp Folders](http://www.danish-shareware.dk/soft/emptemp/)一个免费软件应用程序，我每天在服务器上运行它来处理生成的临时文件。（同样，这取决于您的服务器或主机）

**关于安全性**
使用随机数或 GUId 生成文件以进行轻度保护。如果数据敏感，您需要从 ASP 页面下载文件，但我认为您将再次遇到同样的问题......（等待 4 分钟下载）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T21:50:47.737

1.  使用 FSO 读取文件。
2.  设置 Excel 文件类型的标题，根据文件读取和下载的名称（附件）
3.  设置标头后刷新响应。客户端应显示“另存为”对话框。
4.  输出 FSO 以响应。客户端将下载文件并查看进度条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T12:58:59.000

您打算如何生成 Excel？我希望您不打算调用 Excel 来执行此操作，因为它不受支持，并且通常无法正常工作。

您应该检查是否有 COM 组件可以生成可以从 Classic ASP 调用的 Excel。或者，为此目的添加一个 ASP.NET 页面。我知道有一个可以从 ASP.NET 页面调用的组件来执行此操作。更糟糕的是，Infragistics 有一个 Excel 导出器组件，可以与他们的 UltraWebGrid 控件一起导出。为了实现这一点，网格不需要可见，但网格中的样式会转换为电子表格中的样式。它们还允许您以编程方式操作电子表格。

# architecture - UML 是否仍被视为记录软件设计的可行方式？

> ID：925786
> 
> 赞同：19
> 
> 时间：2009-05-29T12:43:41.433
> 
> 标签：architecture, uml

UML 是否仍被视为记录软件设计的可行方法？

支持任何声明的参考的额外积分:)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-06-06T20:37:51.137

我正在回答将 UML 作为文档工具的问题的新版本。我也将尝试在 UML 中作为一种通信工具发挥作用，因为它们是同一个。

**背景：** 这种观点源于我作为一名架构师的日常工作，必须跨数百个系统/软件进行设计、10,000 多小时的工作，并为系统组合维护一致的文档和实践。这意味着我不得不多次处理文档质量、一致性和定义。

**摘要：**还有什么？当然，您可以讨论文档级别，UML 真的比阅读条件逻辑代码更好吗？可能不会，但总的来说，如果问题空间足够大，就没有真正的选择。

如果 UML 不是别的，它**就是**用于文档和通信。Martin Fowler 编写的“UML Distilled”几乎是 UML 书籍的事实上的标准，它承载了这种观点。如果我没看错的话，Fowler 认为 UML 的主要用途是用于通信，而文档是静态的。没有那么多低级规范和代码生成。

IBM、Borland、Microsoft 和 Eclipse 支持带有大型复杂工具的 UML。许多其他较小的或有针对性的供应商也提供 UML 工具。我不知道那里有更接受/实施的图表/建模标准。

另外考虑替代方案，哪种图表符号更常见？为什么不使用大多数人都知道的东西。如果教授任何图表或建模，大多数学院/大学都使用 UML。除了一些流或条件逻辑图样式之外，没有太多其他的，有据可查和标准化的。

标准符号比大多数人都知道的更为重要。在大型项目中，您不能总是阅读代码、与编写代码的人交谈或再次询问业务伙伴他们想要什么。这就是标准是关键的地方。不一致的用法会导致混淆，如果允许人们以非正式的方式发明或添加符号，它确实会造成混淆。此外，您不想创建文档并且总是必须解释您的意思。

除非你也有，否则永远不要发明，这是 UML 最有可能的替代方案。想想每次有新人加入团队或公司。盒子是什么意思，箭头？这个箭头可以在这个方向上连接到这个三角形，它是什么意思？您基本上必须发明一种特定于领域的语言/模型。因此，您需要培训演示、教程、示例、复习工作、安排培训课程、维护发明的文档方法等。当然，您需要更换任务合作伙伴，或者雇用一个新人，您必须从头再来。让人们专注于学习系统而不是你的文档方法，或者如果必须让它像 UML 那样可转移的知识或技能。让专家专注于编码和设计，而不是发明文档/图表标准。

**对于所有 UML 批评者** 来说，我不是生活在象牙塔或玻璃泡沫中，我必须每天使用数百种不同的文档方法，因为人们发明了它们，或者我正在寻找下一个供应商技术。UML**并不**完美，但它是最常见的，足够好，而且不可轻易替换。

有效的附加问题：

*   我应该用 UML 直观地记录什么，代码注释可以在哪里接管？
*   哪些跨度或方面更重要？
*   适用于我的系统或应用程序的一致工件集可能是什么？（如果您在拥有数百个应用程序/系统的企业中工作，这是一个关键问题）
*   我们在哪里存储文档并使其可搜索和可发现。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-29T12:46:53.377

**思考**是设计软件的唯一可行方式。
UML 有时被视为部分描述您提出的设计的可行方式。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-29T12:45:09.560

UML 只是表示设计的标准符号，它不是过程或方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-29T12:51:42.417

IMO，UML 失去了其作为软件开发唯一且始终最佳解决方案的大部分形象。虽然一开始的狂热者（有些仍然如此）认为 UML 将*解决设计问题*，理想情况下，一切都应该用 UML 绘制。现实证明它并不比任何其他类型的图表好多少。

IMO，UML 现在被广泛视为它的实际情况：oo 分析和设计所需的许多图表的标准。它确实是最流行的图表标准。与任何其他图表样式相比，有更多的工具和更多的人了解 UML。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-29T14:43:14.767

我更喜欢使用自动生成的 UML（源代码 -> UML）来可视化系统的实现。我发现静态文档通常是无用的，有时甚至会产生误导。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-29T12:47:08.930

UML 是一种视觉呈现设计的方式，而不是实际的设计方法本身。它只是您在旅行中使用的工具。据我所知，它在软件工程领域仍然很流行，因为它是一种标准，可以用来在两个人之间有效地传达想法（这就是为什么它被称为一种语言）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-29T12:51:30.810

UML 应该被用作一种交流工具。这绝对是一种有效的设计交流方式，并为开发人员提供了一种通用语言来在实施之前讨论这些设计。

记录您的设计的最佳方式是编写**干净的代码**。UML 与所有其他文档一样，倾向于熵。

[这是我能找到的最佳参考](https://stackoverflow.com/questions/925786/is-uml-still-seen-as-a-viable-way-of-documenting-a-software-design/925811#925811)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-29T13:17:50.430

UML 可以成为设计和实现过程的一部分。 [Enterprise Architect](http://www.sparxsystems.com.au/)有一些很好的初始设计工具。如果没有额外的工具在定制后重新导入以更新设计，UML 就会失败。它确实很好地显示了您当前的结构，并允许您根据其他 UML 图（用例、状态图、用户界面模型等）添加细节。

遗憾的是，UML 真的不习惯它在实践中的全部潜力。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-29T12:50:34.617

~~正如@John Topley 指出的那样，UML 只是描述面向对象设计方面的标准符号，因此您的问题不太有意义。~~

就个人而言，我发现类图是 UML 最有用的方面。我很少为大多数其他事情烦恼，因为我发现编写简短的描述性文档来解释交互和行为更容易。然而，类图提供了架构的合理概述。

要记住的一件事是，您不必太担心编写“完美”（即规范）UML。最重要的是确保人们理解你的设计。也就是说，小心滥用符号，因为这很可能会使那些期望事物具有特定含义的人感到困惑。如果有疑问，请使用文本进行注释以明确发生了什么。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-29T12:51:03.667

UML 更像是一种可视化系统设计的方法，而不是真正的设计过程。尽管能够可视化确实有助于设计过程。

话虽如此，在设计的不仅仅是基本架构时，我确实喜欢并使用 UML。

在设计时能够看到所有部件如何组合在一起非常有帮助。很多时候，在进行 UML 时，在任何编码开始之前，设计都会显示出架构缺陷。

它可以作为一个很好的参考，让人们快速了解系统的工作原理，当您稍后回到该代码并说“我是如何重新设计的？”时，它很有用。

基本上回答您编辑的问题，是的，记录系统设计很有用，因为很多人已经知道它，并且正如已经指出的那样，有很多工具支持它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-29T12:51:40.730

这个问题对我来说听起来有点前后矛盾......我不认为 UML 旨在作为设计软件的工具，而是作为记录设计（正在进行中）的工具。

在我看来，UML 可以成为此类文档的一种有价值的工具，因为它标准化了设计的许多观点……但绝不是唯一有效的观点。任何足够清晰且编写良好的设计文档都可以胜任这项工作，即使其中没​​有 UML。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-29T21:50:44.183

Paulo Merson 在 JavaOne 2006 上举办的[如何使用 UML 2.0 和更多来表示您的企业应用程序的体系结构的](http://developers.sun.com/learning/javaoneonline/j1sessn.jsp?sessn=TS-4619&yr=2006&track=coreenterprise)演讲描述了使用和不使用 UML 来记录体系结构的各种方法。[在Architecture Documentation, Views and Beyond (V&B) Approach](http://www.sei.cmu.edu/architecture/arch_doc.html)中有更多信息，描述了软件工程研究所 (SEI) 提倡的一种方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-29T22:05:32.123

UML 只是一种可视化软件设计某些方面的方法。它不能单独用于记录设计。

# plone - 使用保存点支持将 Zope 连接到 Postgres - ZPsycopgDA 的替代方案

> ID：925798
> 
> 赞同：2
> 
> 时间：2009-05-29T12:47:16.887
> 
> 标签：plone, zope, psycopg2

有没有办法在与 Postgres 的 Zope 连接中获得保存点支持？

我目前正在使用 ZPsycopgDA，它不支持保存点，并且也很难通过 buildout 安装。切换到 SQLAlchemyDA 之类的东西会让事情变得更容易吗？

背景：我的用户在 postgres 数据库中，但是当我尝试查看历史记录时，我收到有关保存点的错误。这个问题在这里解释：http: [//plone.org/products/cmfeditions/issues/46](http://plone.org/products/cmfeditions/issues/46)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-30T23:46:57.733

我建议在 Plone 论坛中提问：http: [//plone.org/support](http://plone.org/support)

我自己并没有使用太多的关系数据库，但一般来说，您可以使用collective.tin 和其他将SQLAlchemy 连接到Plone 的集成产品来获取内容，或者如果您想将所有内容存储在关系数据库中，请查看RelStorage。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T20:25:40.017

事实证明，[SQLAlchemyDA](http://pypi.python.org/pypi/Products.SQLAlchemyDA/0.4.1)似乎确实支持保存点——至少当我切换到它时，它确实解决了这个问题。

# mysql - 什么时候选择语句没有更新导致锁定？

> ID：925801
> 
> 赞同：0
> 
> 时间：2009-05-29T12:47:58.977
> 
> 标签：mysql, select, locking

我正在使用 MySQL，

我有时通过运行“显示进程列表”看到一个状态为“锁定”的选择语句

但在本地测试后，我无法再次重现“锁定”状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T12:51:09.967

这可能取决于其他情况。我不是 mySQL 专家，但在 SQL Server 中，各种锁定级别控制何时可以读取和写入数据。例如，在生产中，您的 select 语句可能想要读取正在更新的记录。它必须等到更新完成。反之亦然 - 更新可能必须等待读取完成。

乱用默认锁定级别是危险的。而且由于开发环境的流量几乎没有那么多，因此您可能看不到这种争用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T12:55:39.333

如果您再次发现该问题，请查看是否可以查看是否针对您的选择所引用的表之一进行了任何更新。

我对mysql没有任何期望，但听起来另一个用户在您尝试读取表/字段时正在锁定表/字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T12:57:37.863

我也不是 MySQL 专家，但锁定行为很大程度上取决于隔离级别/事务隔离。我建议在 MySQL 文档中搜索这些术语。

# java - struts2 动作类是否有任何 init 方法？

> ID：925815
> 
> 赞同：8
> 
> 时间：2009-05-29T12:52:46.110
> 
> 标签：java, struts2

是否有任何为 struts 2 动作类提供的 init 方法可以在该动作类的每个方法之前调用？

例如，我有一个 struts 2 的动作类，如下所示

```
import com.opensymphony.xwork2.ActionSupport;

public class EmployeeAction extends ActionSupport{

    private  DepartmentDaoService deptService = new DepartmentDaoService() ;
    private  EmployeeDaoService empService = new EmployeeDaoService();
    private Employee employee;
    private List<Employee> employees;
    private List<Department> departments;

       public void init()
       {
          //Do initialization stuff here
       }

       public String getAllEmployees(){
          employees = empService.getAllEmployees();
          return "success";
       }

       public String deleteEmployee(){
        empService.deleteEmployee(employee.getEmployeeId());
        return "success";
       }
} 
```

现在在上面的代码中，当 struts action for`getAllEmployees()`和`deleteEmplyee()`被调用时，我希望`init()`方法首先执行。我们可以通过从两个函数调用它来运行它。

但是 struts 2 中是否有任何规定会在每次调用时自动运行 init 方法，或者 struts 2 是否为动作类提供了任何此类方法？

请告诉我是否有人知道。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-29T12:55:04.530

看一下[Preparable 接口和 Prepare Interceptor](https://struts.apache.org/getting-started/preperable-interface.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-02T21:33:25.653

就在这里：

首先，你的动作类必须实现[Preparable 接口](https://struts.apache.org/getting-started/preperable-interface.html)。然后，您的操作必须实现 Preparable.prepare() 方法。Struts 2 将在每次调用您的操作方法之前执行 prepare()。

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T16:00:00.567

准备拦截器是要走的路。如果您的操作使用默认拦截器堆栈，只需将您的`init()`方法重命名为**`prepare()`**.

`prepare<*ActionMethodName*>()`如果您的操作类有多个操作方法（如 createEmployee() 或 deleteEmployee()），您可以使用名为（例如**`prepareDeleteEmployee()`**）的方法为具体方法做特定的准备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-01-11T09:24:35.613

是的

```
init() 
```

在创建拦截器之后调用，但在使用拦截处理任何请求之前，让拦截器有机会初始化任何需要的资源。

[看到这个](http://struts.apache.org/2.0.6/struts2-core/apidocs/com/opensymphony/xwork2/interceptor/Interceptor.html)

# html - 检测悬停在 IE7 中覆盖 Flash 的不可见 div

> ID：925817
> 
> 赞同：2
> 
> 时间：2009-05-29T12:54:00.260
> 
> 标签：html, css, internet-explorer-7

我有一个带有 100% 宽度/高度的 flash 电影的页面，上面覆盖着 HTML。是的，这个网站是一个最佳实践破坏者。

其中一个 HTML 覆盖是我用作“魔术检测器”的不可见 div。页面上有一个滑入/滑出的元素，我使用隐形div在这个元素周围创建了一个“热区”，这样当鼠标悬停在这个神秘神奇的隐形div上时，元素就会滑入/滑出。

问题是，当一个 div 背后有闪光并且不可见时——其中不可见意味着“无背景颜色”，而不是“显示：无”——IE7 不会检测到它上面的悬停。只要“不可见”元素具有背景颜色，IE7 就会检测到它。

这是该问题的演示：http: [//lilleaas.net/woot/hoverdemo/](http://lilleaas.net/woot/hoverdemo/)。单击灰色框。将鼠标悬停在出现的最右边的框上。再次单击最左边的框，然后尝试将鼠标悬停在右边的框上（现在“不可见”，没有背景颜色但它仍在 dom 中，如 display: block。）。

我的问题：即使 div 没有背景颜色，是否可以让 IE7 检测到悬停？

PS：我想跟踪鼠标的 X/Y 是一个可行的选择。

* * *

出于存档的目的，我也在此处粘贴有问题的 HTML。在我的问题得到回答后，我正在链接的演示页面可能会关闭一段时间。

我在这个例子中使用的 SWF 只是一个空白电影。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="swfobject.js" type="text/javascript" charset="utf-8"></script>
  <script>
    $(function(){
      $("#thing").hover(function(){
        $("#debug").html("Hovered, via #thing");
      }).click(function(){
        $('#meh').toggleClass("colored");
      });

      $("#meh").hover(function(){
        $("#debug").html("Hovered, via #meh");
      });
    });

    swfobject.embedSWF("bg.swf", "main", "500px", "300px", "9.0.0", null, {}, {wmode: 'transparent'});
  </script>

  <style type="text/css" media="screen">
    body{
      margin:0;
    }

    #main{
      position:absolute;
      width:100%;
      height:100%;
      z-index:1;
    }

    #thing, #meh{
      width:200px;
      height:200px;
      position:absolute;
      z-index:2;
    }

    #thing{
      left:0px;
      background-color:#999;
    }

    #meh{
      right:0px;
    }

    #meh.colored{
      background-color:#666;
    }

    #debug{
      position:absolute;
      z-index:2;
      bottom:1em;
      background-color:#369;
    }
  </style>
    <title>invisible hovers</title>

</head>
<body>
  <div id="main"></div>

  <div id="thing">
    <p>Click to toggle color.</p>

    <p>In IE7, when the right box is colored, hover is detected. When the right box isn't colored, hover is not detected.</p>
  </div>
  <div id="meh"></div>

  <div id="debug"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-09-10T21:25:03.943

九月 2009 年 10 月

好吧，在我意外路过之前已经有一段时间了，谷歌搜索其他东西。但是，如果您还没有找到它，这可能会有所帮助：

*   IE 通过透明层（没有背景）直接看，就好像它不存在一样。
*   但是你可以通过...在透明层中添加透明背景img，让IE“看到”透明层！
*   现在唯一要做的就是在 flash-element 中获得透明度。您可以通过添加一些闪存参数来完成此操作。这些将在其上方的 html 层方面转变 Flash 的霸主地位。
*   与此同时，所有闪存处理程序（swf 中的链接）都被关闭。因此，如果您想维护一些 swf 处理程序，您必须非常准确地定位“不可见层/区域”。

对于一个荷兰论坛，我制作了这个插图页面：http: [//developerscorner.nl/csshunter/flashlinks-uitschakelen.htm](http://developerscorner.nl/csshunter/flashlinks-uitschakelen.htm)。

*   顶部 swf 的左侧和左侧菜单面板 swf 均未覆盖。悬停/点击那里会导致 swf 中的不同链接。
*   现在顶部swf的右侧有一个透明层，右侧的manu-panel swf（与左侧的菜单面板swf相同）也被完全覆盖。
*   top-swf 的右侧部分现在转到“主页”（不可见的 html 链接，带有工具提示），而不是转到沿 top-swf 的整个宽度链接的“移动中”页面。
*   右边的菜单现在完全被那边的不可见层覆盖了，html中只实现了一个新的链接，而不是菜单项的自由选择。

在源代码中，您可以找到所有成分！

# java - 没有@Id的休眠/持久性

> ID：925818
> 
> 赞同：36
> 
> 时间：2009-05-29T12:54:06.343
> 
> 标签：java, hibernate, primary-key, hibernate-annotations

我有一个数据库视图，它产生一个没有真正主键的结果集。我想使用 Hibernate/Persistence 将此结果集映射到 Java 对象。当然，因为没有PK，所以不能用`@Id`.

部署时，Hibernate 抱怨缺少`@Id`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-29T13:04:50.283

如果存在使行唯一的列组合，请围绕列组合建模主键类。如果没有，那么您基本上就不走运了——但是您应该重新检查视图的设计，因为它可能没有意义。

有几种不同的方法：

```
@Entity
public class RegionalArticle implements Serializable {

    @Id
    public RegionalArticlePk getPk() { ... }
}

@Embeddable
public class RegionalArticlePk implements Serializable { ... } 
```

或者：

```
@Entity
public class RegionalArticle implements Serializable {

    @EmbeddedId
    public RegionalArticlePk getPk() { ... }
}

public class RegionalArticlePk implements Serializable { ... } 
```

详细信息在这里：[http ://docs.jboss.org/ejb3/app-server/HibernateAnnotations/reference/en/html_single/index.html#d0e1517](http://docs.jboss.org/ejb3/app-server/HibernateAnnotations/reference/en/html_single/index.html#d0e1517)

这是描述类似问题的帖子：[http ://www.theserverside.com/discussions/thread.tss?thread_id=22638](http://www.theserverside.com/discussions/thread.tss?thread_id=22638)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-29T13:03:30.583

对于每个实体，您必须至少指定以下一项：

*   一个[@Id](http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id)
*   多个@Id 和一个@IdClass（用于复合主键）
*   @EmbeddedId

所以也许你可以创建一个复合主键，包含多个字段？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-18T14:13:34.260

与其在 Hibernate 中搜索解决方法，不如在数据库视图中添加虚拟 id 可能更容易。假设我们有两列的 PostgreSQL 视图，并且它们都不是唯一的（并且没有主键，因为 Postgres 不允许对视图进行 PK 或任何其他约束）例如。

```
| employee_id | project_name |
|:------------|:-------------|
| 1           | Stack01      |
| 1           | Jira01       |
| 1           | Github01     |
| 2           | Stack01      |
| 2           | Jira01       |
| 3           | Jira01       |
------------------------------ 
```

由以下查询表示：

```
CREATE OR REPLACE VIEW someschema.vw_emp_proj_his AS
    SELECT DISTINCT e.employee_id,
                    pinf.project_name
    FROM someschema.project_info pinf
    JOIN someschema.project_employee pe ON pe.proj_id = pinf.proj_id
    JOIN someschema.employees e ON e.employee_id = pe.emloyee_id 
```

我们可以使用 row_number() 添加虚拟 id：

```
SELECT row_number() OVER (ORDER BY subquery.employee_id) AS row_id 
```

就像在这个例子中：

```
CREATE OR REPLACE VIEW someschema.vw_emp_proj_his AS
SELECT row_number() OVER (ORDER BY subquery.employee_id) AS row_id,
       subquery.employee_id,
       subquery.project_name
FROM
  (SELECT DISTINCT e.employee_id,
                   pinf.project_name
   FROM someschema.project_info pinf
   JOIN someschema.project_employee pe ON pe.proj_id = pinf.proj_id
   JOIN someschema.employees e ON e.employee_id = pe.emloyee_id ) subquery; 
```

表格将如下所示：

```
| row_id      | employee_id | project_name |
|:------------|:------------|:-------------|
| 1           | 1           | Stack01      |
| 2           | 1           | Jira01       |
| 3           | 1           | Github01     |
| 4           | 2           | Stack01      |
| 5           | 2           | Jira01       |
| 6           | 3           | Jira01       |
------------------------------------------- 
```

现在我们可以在 JPA/Hibernate/Spring Data 中使用 row_id 作为@Id：

```
@Id
@Column(name = "row_id")
private Integer id; 
```

就像在示例中一样：

```
@Entity
@Table(schema = "someschema", name = "vw_emp_proj_his")
public class EmployeeProjectHistory {

    @Id
    @Column(name = "row_id")
    private Integer id;

    @Column(name = "employee_id")
    private Integer employeeId;

    @Column(name = "project_name")
    private String projectName;

//Getters, setters etc.

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T20:46:34.620

这是一个有 2 个键作为“Id”键的示例：[https ://gist.github.com/3796379](https://gist.github.com/3796379)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T13:01:26.843

您可以检查是否有逻辑明智的 id 并相应地提供映射信息。Hibernate 不会检查数据库是否存在已定义的主键。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-26T14:57:50.977

修改用于创建视图的选择：

```
SELECT
   ROWNUM ID, -- or use nextval of some sequence
   -- other columns
FROM
  TABLE 
```

并将“ID”映射为主键。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-26T19:02:19.307

您可以按如下方式使用@EmbeddedId：

```
@EmbeddedId
public Id getId() {
    return id;
}

public void setId(Id id) {
    this.id = id;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-11T09:08:01.033

根据 Hibernate 用户指南，建议使用 pk，因此即使您正在使用数据库端不包含 pk 的现有项目，您也可以将 pk 列添加到相关的数据库表中并与 Java 映射实体。

休眠建议是这样的：

> 我们建议您在持久类上声明一致命名的标识符属性，并使用包装器（即非原始）类型（例如 Long 或 Integer）。

有关 pk 和 Hibernate 机制的更多详细信息，请访问[此处](https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#entity-pojo-identifier)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-04-06T22:39:26.093

虽然不完全符合您的要求，但这是我使用的一个小技巧。让查询选择“rownum”并将“rownum”定义为模型中的 ID 列。这将有效地使每一行对 Hibernate 都是唯一的。

# java - 在 Swing 应用程序中使用 MediaTracker 缓存图像

> ID：925819
> 
> 赞同：4
> 
> 时间：2009-05-29T12:54:18.760
> 
> 标签：java, swing, image, caching

我有一个基于 Swing 的金融代码，它将显示价格变动的金融符号和每个柜台/公司的向上或向下箭头。

这个代码可以有很多计数器（最多 100 个），并且需要缓存图像符号以提高性能。

我试过关注这篇[文章](http://www.javacoffeebreak.com/articles/mediatracker/index.html)，但无法理解，尤其是 MediaTracker 类将如何缓存图像。从我所看到的，我将图像放在一个数组中并仍然从数组中检索。

有谁知道它是如何工作的并且应该被使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T13:10:08.620

MediaTracker 将帮助您跟踪加载大量图像，但仅此而已。加载完所有内容后，您将需要一张像旧地图这样的东西，其中的图像根据文件名或公司名称或 ID 进行哈希处理。

```
private Map<String,Image> imageCache = new HashMap<String,Image>(); 
```

有一个使用 MediaTracker 在 1.4 JavaDocs 上加载图像的合理示例：http: [//java.sun.com/j2se/1.4.2/docs/api/java/awt/MediaTracker.html](http://java.sun.com/j2se/1.4.2/docs/api/java/awt/MediaTracker.html)。请注意，没有 getImage() 方法，您需要一个 int id 来跟踪它们。您必须自己维护 BufferedImage 引用，因此 HashMap<>。

# asp.net - 当要复制的 lob 数据的插入长度超过配置的最大值 65536

> ID：925824
> 
> 赞同：7
> 
> 时间：2009-05-29T12:55:14.513
> 
> 标签：asp.net, sql-server-2005, replication

我正在尝试将一个值插入到 SQL Server 中的数据类型图像列中。我收到以下错误：

```
Length of LOB data (70823) to be replicated exceeds configured maximum 65536\.  
The statement has been terminated. 
```

数据长度小于 2 MB。

问题是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-29T13:06:05.570

对于 SQL Server 2005 或更早版本，您可以运行：

```
sp_configure 'max text repl size', 2147483647 
```

对于 SQL Server 2008 或更高版本，您可以运行：

```
sp_configure 'max text repl size', -1 
```

前者增加了允许的最大尺寸，后者本质上说“取消限制”。一旦增加或删除最大大小，就可以复制大型 LOB。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-08-07T16:52:53.253

`RECONFIGURE`运行后 别忘了运行，`sp_configure`这样你的修改才能生效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T23:41:52.757

作为替代方案，您可以通过 SQL Server Management Studio 配置最大文本复制大小选项

参考：http: [//msdn.microsoft.com/en-us/library/ms179573.aspx](http://msdn.microsoft.com/en-us/library/ms179573.aspx)

> **配置最大文本复制大小选项**
> 1\. 在对象资源管理器中，右键单击服务器并选择属性。
> 2\. 单击高级节点。
> 3\. 在 Miscellaneous 下，将 Max Text Replication Size 选项更改为所需的值。

我已经在 SQL Server 2012 中对其进行了测试，但是从上一个链接您可以查看 2005 和 2008 的说明，它们是相同的。

# visual-studio - 在解决方案之间共享 Visual Studio 项目（程序集）的最佳做法是什么

> ID：925825
> 
> 赞同：11
> 
> 时间：2009-05-29T12:55:15.280
> 
> 标签：visual-studio, svn, projects-and-solutions

假设我有一个包含一些代码的项目“MyFramework”，这些代码用于很多解决方案。每个解决方案都有自己的源代码控制管理 (SVN)。

MyFramework 是一个内部产品，没有正式的发布时间表，解决方案也是如此。

我宁愿不必为所有 12 个项目构建和复制 DLL，即新开发人员应该能够只执行[svn-checkout](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.checkout.html)并开始工作。

在所有这些解决方案中共享 MyFramework 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T13:10:58.993

由于您提到 SVN，您可以使用[外部](http://svnbook.red-bean.com/nightly/en/svn.advanced.externals.html)将框架项目“导入”到使用它的每个解决方案的工作副本中。这将导致这样的布局：

```
C:\Projects
  MyFramework
    MyFramework.csproj
    <MyFramework files>

  SolutionA
    SolutionA.sln
    ProjectA1
      <ProjectA1 files>
    MyFramework   <-- this is a svn:externals definition to "import" MyFramework
      MyFramework.csproj
      <MyFramework files> 
```

使用此解决方案，您可以在使用它的每个解决方案中获得 MyFramework 的源代码。优点是，您可以从这些解决方案中的每一个中更改 MyFramework 的源代码（无需切换到不同的项目）。

**但是**：与此同时，这也是一个巨大的缺点，因为它很容易在修改 MyFramwork 的某些解决方案时破坏另一个解决方案。

出于这个原因，我最近放弃了这种方法，现在将我们的框架项目视为一个完全独立的解决方案/产品（具有自己的发布时间表）。然后，所有其他解决方案都包含特定版本的框架项目二进制文件。

这可确保对框架库所做的更改不会破坏任何重用库的解决方案。对于每个解决方案，我现在可以决定何时更新到更新版本的框架库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-29T13:05:33.653

这听起来像是一场灾难……您如何应对开发人员撤消/破坏他人的工作……

如果我是你，我会把 MyFrameWork 放在一个完全独立的解决方案中。当开发人员想要开发 12 个项目中的一个时，他会在一个 IDE 中打开该项目解决方案并在单独的 IDE 中打开 MyFrameWork。

如果您将 MyFramework Assemby & GAC 命名为强名称，并在您的其他项目中引用它，那么“复制 DLL”将不是问题。

您只需构建 MyFrameWork（并且 PostBuild 事件可以运行 GacUtil 将其放入程序集缓存中），然后构建您的其他项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T13:13:06.600

“最佳方式”将取决于您的环境。我在基于 TFS 的持续集成环境中工作，每晚构建将二进制文件部署到共享中。所有依赖项目都引用了共享。当这变得缓慢时，我构建了一些工具来允许开发人员拥有共享二进制文件的本地副本，而无需更改项目文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T13:23:48.233

12 种解决方案中的任何一种都需要定期更改“框架”代码吗？

如果是这样，您的框架可能是新的并且刚刚创建，所以我只是将框架项目包含在所有解决方案中。毕竟，如果工作要求您必须更改框架代码，那么这样做应该很容易。

由于从一种解决方案对框架所做的更改会影响所有其他解决方案，因此会发生中断，您将不得不处理它们。

一旦您在解决方案中工作时很少需要更改框架（这应该是您的目标），那么我将包含对框架 dll 的引用，并仅根据需要更新每个解决方案中的 dll。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-29T17:07:20.583

如果你遵循一些规则，[svn:externals会很好地处理这个问题。](http://svnbook.red-bean.com/en/1.5/svn.advanced.externals.html)

首先，如果您对 svn:externals 定义使用相对 URI（以 ^ 字符开头）并尽可能将项目放在同一个存储库中，这样会更安全。这样，即使颠覆服务器移动到新的 URL，定义也将保持有效。

其次，确保您遵循 SVN 书中的以下提示。在你的 svn:externals 定义中使用 PEG-REVs 来避免随机损坏和不稳定的标签：

> 您应该认真考虑**在所有外部定义中使用明确的修订号**。这样做意味着您可以决定何时拉取外部信息的不同快照，以及拉取哪个快照。除了避免对您可能无法控制的第三方存储库进行更改之外，使用明确的修订号还意味着当您将工作副本回溯到以前的修订时，您的外部定义也将恢复到它们的外观在之前的修订中...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-29T13:08:56.033

我同意另一张海报——这听起来很麻烦。但是，如果您不想以“正确的方式”来做，我可以想到另外两种方法。我们使用了类似于下面的数字 1 的东西。（对于本机 C++ 应用程序）

1.  执行获取和构建依赖项的脚本或批处理文件或其他运行的进程。（仅一次）仅当存储库中没有更改时才构建/执行。您将需要知道要获取的标签/分支/版本。您可以在项目文件中使用 bat 文件作为预构建步骤。

2.  将二进制文件保存在 repo 中（不是一个好主意）。即使在这种情况下，依赖项目也必须进行获取，并且必须知道要获取什么版本。

最终，我们试图为我们的项目做的是模仿我们如何使用和引用 3rd 方库。

您可以做的是为依赖项创建一个发布包，为自己设置一个路径环境变量。我会允许它的多个版本存在于机器上，然后依赖项目链接/引用特定版本。

就像是

```
$(PROJ_A_ROOT) = c:\mystuff\libraryA

$(PROJ_A_VER_X) = %PROJ_A_ROOT%\VER_X 
```

然后通过特定名称或使用版本 env var 在依赖解决方案中引用您想要的版本。

不漂亮，但它有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-03T09:10:08.483

一个可扩展的解决方案是**在解决方案目录上执行****[svn-external](http://svnbook.red-bean.com/en/1.0/ch07s03.html)** ，以便您导入的项目与您的其他项目平行。其原因如下。

**为“导入的”项目使用单独的子目录，例如`externals`，通过 svn-external 似乎是个好主意，除非您在项目之间有非平凡的依赖关系。**例如，假设项目 A 依赖于项目 B 上的项目，项目 B 依赖于项目 C。如果您有一个解决方案 S 和项目 A，您将最终得到以下目录结构：

```
# BAD SOLUTION #
S
+---S.sln
+---A
|   \---A.csproj
\---externals
    +---B     <--- A's dependency
    |   \---B.csproj
    \---externals
        \---C     <--- B's dependency
            \---C.csproj 
```

使用这种技术，**您甚至可能最终在树中拥有单个项目的多个副本**。这显然不是你想要的。

此外，如果您的项目使用[NuGet](http://www.nuget.org/)依赖项，它们通常会在`packages`顶级目录中加载。这意味着**子目录****中项目的 NuGet 引用`externals`**将被破坏。

此外，如果您在 SVN 之外使用[Git](http://en.wikipedia.org/wiki/Git_%28software%29) ，则建议的跟踪更改的方法是为每个项目拥有一个单独的 Git 存储库，然后为[`git submodule`](https://www.kernel.org/pub/software/scm/git/docs/git-submodule.html)用于其中项目的解决方案创建一个单独的 Git 存储库。如果 Git 子模块不是父模块的直接子目录，则**Git 子模块命令将创建一个直接子目录的克隆**。

将所有项目放在同一层的另一个好处是，您可以创建一个“超级解决方案”，其中包含来自所有解决方案的项目（通过 Git 或 svn-external 跟踪），这反过来又允许您**检查单一解决方案-重建您对单个项目所做的任何更改都与所有其他项目一致**。

```
# GOOD SOLUTION #
S
+---S.sln
+---A
|   \---A.csproj
+---B     <--- A's dependency
|   \---B.csproj
\---C     <--- B's dependency
    \---C.csproj 
```

# architecture - 腐烂设计和粘度

> ID：925827
> 
> 赞同：12
> 
> 时间：2009-05-29T12:55:41.283
> 
> 标签：architecture, terminology

Robert C. Martin 在他的一本书中提到粘度是腐烂设计的症状。我不完全理解软件开发中粘度的概念。你能给我一些例子吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-29T13:00:10.853

随着代码变老，它变得更加充满黑客，并且更加充满依赖关系，因此在不破坏某些东西的情况下变得更加难以更改。

所以它变得更少“流体”和更多“固体”，因此类似于粘度。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-29T13:07:44.957

他有两个用途，设计的粘性和环境的粘性。

首先，牙膏和花生酱等高粘度流体的*流动*不如水等低粘度流体顺畅。

高粘度设计使破解比保留设计更容易。hack 使代码更加僵化，进一步增加了粘性。

环境粘度是指工作流程。如果编译时间很长，或者构建系统或运行测试很痛苦，程序员会采取捷径来减轻痛苦。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-29T13:26:25.980

粘度是液体抵抗外力变化的能力。水是测量的基础并且具有非常低的粘度（即它会在给定路径的情况下从一个地方自由流动到另一个地方），而例如酸奶在冷却时具有如此高的粘度以至于它几乎是固体且漂亮很多东西都留在你放的地方（除非你穿着浅色裤子，在这种情况下它每次都能找到它的位置......）。

在软件中，这转化为您的代码抵抗更改的程度。如果您有很多依赖项，则可能很难更改主要类，从而导致不太理想的解决方法，从而增加代码的抵抗力（增加其粘性）。精心设计的代码（低粘度）可以更新和添加，而不会对依赖它的应用程序或其他类产生重大影响。

# python - 跳入 Python 交互式会话中程？

> ID：925832
> 
> 赞同：13
> 
> 时间：2009-05-29T12:58:07.597
> 
> 标签：python, eclipse, debugging, breakpoints, pydev

嘿，我想知道...我正在将 pydev 与 eclipse 一起使用，我真的很喜欢强大的调试功能，但我想知道：

**是否可以在eclipse中设置断点并在执行过程中跳转到交互式python解释器？**

我认为那会很方便；）

**编辑**：我想强调我的目标不是跳入调试器。pydev/eclipse 有一个很棒的调试器，我可以只看回溯并设置断点。

我想要的是执行一个脚本并在执行过程中跳转到一个交互式 python 解释器，这样我就可以做一些事情......

*   闲逛
*   检查事物的价值
*   操纵变量
*   在我将它添加到应用程序之前找出一些代码

我知道你可以用调试器完成这一切，但我可​​以在交互式解释器中更快地完成，因为我可以尝试一些东西，看到它不起作用，然后尝试其他东西，而无需让应用程序回到执行点又是那个代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-09-06T10:28:37.933

从 OP 的问题开始大约一年后，PyDev 内置了这个功能。我不确定这个功能是什么时候引入的，但我所知道的是我已经花了大约 2 小时谷歌搜索......配置 iPython 和任何东西（其中看起来它会完成这项工作），但只是意识到 Eclipse/PyDev 有我想要的 ootb。

一旦您在调试模式下遇到断点，控制台就在那里准备就绪并等待！我只是没有注意到这一点，因为没有提示或闪烁的光标；我错误地认为它是一个标准的、仅输出的控制台……但事实并非如此。它甚至具有代码完成功能。

很棒的东西，有关更多详细信息，请参阅[http://pydev.org/manual_adv_debug_console.html](http://pydev.org/manual_adv_debug_console.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-07T15:41:31.523

这是来自一个旧项目，我没有编写它，但它的功能类似于您想要使用 ipython 实现的功能。

```
'''Start an IPython shell (for debugging) with current environment.                    
Runs Call db() to start a shell, e.g.                                                  

def foo(bar):                                                                          
    for x in bar:                                                                      
        if baz(x):                                                                     
            import ipydb; ipydb.db() # <-- start IPython here, with current value of x (ipydb is the name of this module).
.                                                                                      
'''
import inspect,IPython

def db():
    '''Start IPython shell with callers environment.'''
    # find callers                                                                     
    __up_frame = inspect.currentframe().f_back
    eval('IPython.Shell.IPShellEmbed([])()', # Empty list arg is                       
         # ipythons argv later args to dict take precedence, so                        
         # f_globals() shadows globals().  Need globals() for IPython                  
         # module.                                                                     
         dict(globals().items() + __up_frame.f_globals.items()),
         __up_frame.f_locals) 
```

**由 Jim Robert（问题所有者）编辑**：如果您将上述代码放入`my_debug.py`为本示例而调用的文件中。然后将该文件放在您的 python 路径中，您可以在代码中的任何位置插入以下行以跳转到调试器（只要您从 shell 执行）：

```
import my_debug
my_debug.db() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-29T14:52:58.723

我长期以来一直在使用此代码`sitecustomize.py`来启动异常调试器。这也可以通过 Ctrl+C 触发。它在 shell 中工作得很好，不知道 eclipse。

```
import sys

def info(exception_type, value, tb):
   if hasattr(sys, 'ps1') or not sys.stderr.isatty() or not sys.stdin.isatty() or not sys.stdout.isatty() or type==SyntaxError:
      # we are in interactive mode or we don't have a tty-like
      # device, so we call the default hook
      sys.__excepthook__(exception_type, value, tb)
   else:
      import traceback
      import pdb

      if exception_type != KeyboardInterrupt:
          try:
              import growlnotify
              growlnotify.growlNotify("Script crashed", sticky = False)
          except ImportError:
              pass

      # we are NOT in interactive mode, print the exception...
      traceback.print_exception(exception_type, value, tb)
      print
      # ...then start the debugger in post-mortem mode.
      pdb.pm()

sys.excepthook = info 
```

这是 StackOverflow 的[来源](http://code.activestate.com/recipes/65287/)和[更多讨论](https://stackoverflow.com/questions/242485/starting-python-debugger-automatically-on-error)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-05T15:20:58.470

[您可以使用此处](http://code.activestate.com/recipes/355319/)`code.InteractiveConsole`描述的方法跳转到交互式会话；但是我不知道如何从 Eclipse 中触发它。

一个解决方案可能是拦截 Ctrl+C 以跳转到这个交互式控制台（使用[信号](http://docs.python.org/library/signal.html)模块：）`signal.signal(signal.SIGINT, my_handler)`，但它可能会改变执行上下文，您可能不希望这样。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-05-29T14:14:00.003

如果您已经在调试模式下运行，如果程序执行当前暂停（例如，因为您已经在断点处），您可以设置一个额外的断点。我现在刚刚使用最新的 Pydev 进行了尝试——它工作得很好。

如果您正常运行（即不在调试模式下），所有断点都将被忽略。对断点的任何更改都不会改变非调试运行的工作方式。

# .net - 在代码后面或仅在 aspx 中声明 Web 控件

> ID：925835
> 
> 赞同：0
> 
> 时间：2009-05-29T12:59:09.420
> 
> 标签：.net, code-behind

在 .net 1.1 中，我似乎记得我必须在后面的代码中声明我放在我的 aspx 页面上的 web 控件，以便以编程方式访问它们。自从在 VS 2008 中工作以来，我不必这样做——即使在使用 .net 2 项目时也是如此。

但是我刚刚导入了一个 1.1 项目并在 2008 年对其进行了转换，并将一个带有结果 id 的文本框添加到了 aspx 页面，但我无法从后面的代码中以编程方式访问它——我遇到了编译错误。

这是 VS 中的设置还是 aspx 页面顶部的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T13:04:01.033

只需在设计器中打开页面，给它一点时间“解决”（可能不再需要，但我们过去需要用旧的设计器代码来做这件事），然后“触摸”页面（改变一些东西，然后改变它返回），然后保存页面，仍然在设计器中。看看这是否有效。

可能需要*在*设计器中添加文本框。

您的 VS2008 项目可能是一个网站“项目”，在这种情况下，设计人员不会将控件发送到代码中。VS2003 项目的风格要求控件也包含在代码中，因此使用设计器，这是在 VS2003 中假定的。

# sql - 优化 Oracle 10 密集唯一索引上的 SELECT 查询

> ID：925836
> 
> 赞同：1
> 
> 时间：2009-05-29T12:59:15.443
> 
> 标签：sql, oracle, optimization

我在 Oracle 10 中有一个具有以下结构的表

```
Create Table Bookmarks(  
    BOOKMARKID NUMBER(10,0) NOT NULL PRIMARY KEY,
    URL VARCHAR2(4000 CHAR) NOT NULL UNIQUE
) 
```

URL 具有唯一约束集，因此具有唯一索引。该表中大约有 100 万条记录。我必须经常检查表中是否已经存在书签。我发出以下查询

```
Select bookmarkid from Bookmarks where URL='<some url>' 
```

问题是随着记录数量的增加，性能也下降了。现在，特别是当查询 URL 很长时，返回书签 id 需要更长的时间。在解释计划中，查询确实使用 URL 列上的唯一索引。有什么改善响应时间的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T13:07:47.860

您通常会为此使用哈希索引。在 mssql 中，我将创建一个类似于 CRC(url) 的持久计算列。然后，当您要检查是否存在时，查找 WHERE crc('some url') = PersistedCrcColumn AND URL='some url'

您必须在 crc 检查中包含原始检查，因为您偶尔会遇到 CRC 冲突。

编辑 - 将我上面的描述从“哈希查找”更改为“哈希索引”以避免混淆。一些数据库将哈希索引作为一级索引，我不相信 oracle 有（而且我知道 mssql 没有）。如果本质上不支持，则上述方法是您手动实现它的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T13:25:27.903

制作包含 bookmarkid 列的索引。像这样：

```
create IX on bookmarks (url, bookmarkid); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T13:18:20.083

为您计算`MD4`索引`URL`并将其分配到触发器中：

```
:new.HASH := DBMS_CRYPTO.hash(UTL_RAW.cast_to_raw(:new.url), 1) 
```

在该列上创建索引并按哈希值搜索。

不要忘记拥有触发器的用户`GRANT EXECUTE`。`DBMS_CRYPTO`

`MD4`是最快的哈希算法，这就是为什么它被广泛用于加密强度不重要的地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T20:13:34.470

检查执行计划是否在索引上使用 UNIQUE 扫描，而不是完整/快速完整/范围扫描。您可能有很多以[http://www](http://www)开头的 URL 。（也许还有更多的领先值），这并不理想。如果可以，请在 ORA_HASH(url) 上创建基于非唯一函数的索引并将其添加到查询中。它将提供更小的索引值和更好的值分布。如果无法更改查询，请尝试使用[REVERSE](http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2075657)重新创建索引。

它对索引值的大小没有帮助，但可以更好地传播它。

# python - 在python中解析

> ID：925839
> 
> 赞同：3
> 
> 时间：2009-05-29T13:00:15.847
> 
> 标签：python

我有以下字符串

adId:4028cb901dd9720a011e1160afbc01a3;siteId:8a8ee4f720e6beb70120e6d8e08b0002;userId:5082a05c-015e-4266-9874-5dc6262da3e0

我只需要 adId、siteId 和 userId 的值。方法

4028cb901dd9720a011e1160afbc01a3

8a8ee4f720e6beb70120e6d8e08b0002

5082a05c-015e-4266-9874-5dc6262da3e0

所有 3 在不同的变量或数组中，这样我就可以使用所有三个

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-29T13:02:42.863

如果您不需要任何花哨的解析，可以将它们拆分为字典：

```
In [2]: dict(kvpair.split(':') for kvpair in s.split(';'))
Out[2]:
{'adId': '4028cb901dd9720a011e1160afbc01a3',
 'siteId': '8a8ee4f720e6beb70120e6d8e08b0002',
 'userId': '5082a05c-015e-4266-9874-5dc6262da3e0'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T13:05:21.437

```
matches = re.findall("([a-z0-9A-Z_]+):([a-zA-Z0-9\-]+);", buf)

for m in matches:
    #m[1] is adid and things
    #m[2] is the long string. 
```

您还可以使用 {32} 来限制长度，例如

```
([a-zA-Z0-9]+){32}; 
```

正则表达式允许您**验证**字符串并将其拆分为组件部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T13:05:28.193

你可以这样做：

```
input='adId:4028cb901dd9720a011e1160afbc01a3;siteId:8a8ee4f720e6beb70120e6d8e08b0002;userId:5082a05c-015e-4266-9874-5dc6262da3e0'

result={}
for pair in input.split(';'):
    (key,value) = pair.split(':')
    result[key] = value

print result['adId']
print result['siteId']
print result['userId'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T13:05:08.380

有一个很棒的方法叫做[split()](http://docs.python.org/library/string.html#deprecated-string-functions)用于 python，它会很好地为你工作。我建议使用它两次，一次用于 ';' 然后再次为每个使用'：'的人。

# php - 在 dataGrid 中创建链接

> ID：925850
> 
> 赞同：0
> 
> 时间：2009-05-29T13:04:56.757
> 
> 标签：php, xml, apache-flex

```
 <mx:DataGrid visible="false" id="dgPosts" width="365" click="" dataProvider="{sendReq.lastResult.loginsuccess.name}" x="140.5" y="169">
           <mx:columns>
               <mx:DataGridColumn headerText="name" dataField="name"/>
           </mx:columns>
       </mx:DataGrid> 
```

当我单击特定数据项时，必须打开相应的网站。我试过 dgPosts.selectedItem.name 但它不起作用。

我得到的结果是 XML....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T13:15:41.480

根据[此](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_7.html)页面，在 DataGrid 上创建一个`itemClick`事件处理程序。在指定为单击处理程序的函数中，从[DataGridEvent](http://livedocs.adobe.com/flex/3/langref/mx/events/DataGridEvent.html)事件中获取您需要的数据。获得所需格式的 url 后，使用[navigateToUrl](http://blog.flexexamples.com/tag/navigatetourl/)函数转到该链接。

# php - 强制下载文件

> ID：925854
> 
> 赞同：5
> 
> 时间：2009-05-29T13:05:24.603
> 
> 标签：php

我有一个包含信息的 php 页面，以及指向文件的链接，例如 pdf 文件。文件类型可以是任何类型，因为它们可以由用户上传。

我想知道如何强制下载任何类型的文件，而不强制下载指向该站点链接的其他页面的链接。我知道可以使用标题来做到这一点，但我不想破坏我网站的其余部分。

到其他页面的所有链接都是通过 Javascript 完成的，实际链接是到 #，所以也许这样可以吗？

我应该设置

```
header('Content-Disposition: attachment;) 
```

整个页面？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-29T13:08:04.473

您需要为特定资源发送这两个标头字段：

```
Content-Type: application/octet-stream
Content-Disposition: attachment 
```

`Content-Disposition`可以另外有一个参数`filename`。

您可以使用发送文件的 PHP 脚本来执行此操作：

```
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment');
readfile($fileToSend);
exit; 
```

文件名通过 URL 传递给该脚本。或者您使用一些 Web 服务器功能，例如[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)来强制类型：

```
RewriteEngine on
RewriteRule ^download/ - [L,T=application/octet-stream] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-29T13:58:08.710

风格略有不同，准备出发:)

```
$file = 'folder/' . $name;

if (! file) {
    die('file not found'); //Or do something 
} else {
    // Set headers
    header("Cache-Control: public");
    header("Content-Description: File Transfer");
    header("Content-Disposition: attachment; filename=$file");
    header("Content-Type: application/zip");
    header("Content-Transfer-Encoding: binary");
    // Read the file from disk
    readfile($file); 
} 
```

# bash - Cygwin BASH 和 ANSI 控制序列

> ID：925859
> 
> 赞同：1
> 
> 时间：2009-05-29T13:06:43.603
> 
> 标签：bash, escaping, sequences

这里有几件事：

1.  谁能指点我 C 代码来解码 ANSI 控制台转义序列？
2.  有没有办法让 Cygwin BASH 模拟一个愚蠢的旧 TTY？

也许这应该是2个问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T13:20:12.950

这是一个有点间接的答案，但 GNU ncurses 库可以处理各种终端。找出哪些控制序列适用于 ANSI 终端的一种方法是反编译 ANSI 终端描述：

```
infocmp ansi 
```

这将为您提供一组 terminfo 属性，curses 程序使用这些属性在 ANSI 终端上实现效果。当然，你必须知道这些象形文字是什么意思。

在 Cygwin 上，我得到：

```
$ infocmp ansi
#       Reconstructed via infocmp from file: /usr/share/terminfo/61/ansi
ansi|ansi/pc-term compatible with color,
    am, mc5i, mir, msgr,
    colors#8, cols#80, it#8, lines#24, ncv#3, pairs#64,
    acsc=+\020\,\021\030.^Y0\333`\004a\261f\370g\361h\260j\331k\277l\332m\300n\305o~p\304q\304r\304s_t\303u\264v\301w\302x\263y\363z\362{\343|\330}\234~\376,
    bel=^G, blink=\E[5m, bold=\E[1m, cbt=\E[Z, clear=\E[H\E[J,
    cr=^M, cub=\E[%p1%dD, cub1=\E[D, cud=\E[%p1%dB, cud1=\E[B,
    cuf=\E[%p1%dC, cuf1=\E[C, cup=\E[%i%p1%d;%p2%dH,
    cuu=\E[%p1%dA, cuu1=\E[A, dch=\E[%p1%dP, dch1=\E[P,
    dl=\E[%p1%dM, dl1=\E[M, ech=\E[%p1%dX, ed=\E[J, el=\E[K,
    el1=\E[1K, home=\E[H, hpa=\E[%i%p1%dG, ht=\E[I, hts=\EH,
    ich=\E[%p1%d@, il=\E[%p1%dL, il1=\E[L, ind=^J,
    indn=\E[%p1%dS, invis=\E[8m, kbs=^H, kcbt=\E[Z, kcub1=\E[D,
    kcud1=\E[B, kcuf1=\E[C, kcuu1=\E[A, khome=\E[H, kich1=\E[L,
    mc4=\E[4i, mc5=\E[5i, nel=\r\E[S, op=\E[39;49m,
    rep=%p1%c\E[%p2%{1}%-%db, rev=\E[7m, rin=\E[%p1%dT,
    rmacs=\E[10m, rmpch=\E[10m, rmso=\E[m, rmul=\E[m,
    s0ds=\E(B, s1ds=\E)B, s2ds=\E*B, s3ds=\E+B,
    setab=\E[4%p1%dm, setaf=\E[3%p1%dm,
    sgr=\E[0;10%?%p1%t;7%;%?%p2%t;4%;%?%p3%t;7%;%?%p4%t;5%;%?%p6%t;1%;%?%p7%t;8%;%?%p9%t;11%;m,
    sgr0=\E[0;10m, smacs=\E[11m, smpch=\E[11m, smso=\E[7m,
    smul=\E[4m, tbc=\E[3g, u6=\E[%i%d;%dR, u7=\E[6n,
    u8=\E[?%[;0123456789]c, u9=\E[c, vpa=\E[%i%p1%dd,

$ 
```

' `\E`' 表示法是指 ESC 字符。

如果做不到这一点，您可以查看标准本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T13:19:12.673

调整 TERM 环境变量可能会使基于 terminfo/termcap 的应用程序避免使用高级转义序列。(export TERM=dumb) 不过我不确定这就是你想要的。

# vb.net - Visual Basic 中的 Project Eulers 问题 16。数字 2^1000 中的数字总和

> ID：925864
> 
> 赞同：0
> 
> 时间：2009-05-29T13:07:32.523
> 
> 标签：vb.net

欧拉计划第 16 题：2^(15) = 32768，其位数之和为 3 + 2 + 7 + 6 + 8 = 26。

数字 2^(1000) 的位数之和是多少？

几天来，我一直在尝试解决这个问题，但我只是不知道如何让 vb.net 2008 识别接近那个大数字的任何地方。我在其他帖子中看到，像 java 这样的一些软件具有整数类型 BigNumber 或 BigInteger，但我在 Visual Basic 中找不到类似的东西。我在使用 Visual Basic 时经常遇到这个问题。我似乎也无法在 Visual Basic 中找到任何标准的高级数学功能，例如阶乘和其他一些我不记得但在数学功能下找不到的功能。有什么建议么？（对不起，让我改写一下，关于如何在不切换到其他编程语言的情况下做这些事情的任何建议。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T13:11:21.627

您可以免费使用几个 BigInteger 库。

*   [http://msdn.microsoft.com/en-us/magazine/cc163696.aspx](http://msdn.microsoft.com/en-us/magazine/cc163696.aspx)
*   [http://www.codeproject.com/KB/cs/biginteger.aspx?df=100&forumid=4524&exp=0&fr=26](http://www.codeproject.com/KB/cs/biginteger.aspx?df=100&forumid=4524&exp=0&fr=26)

在这种情况下，限制不一定是语言。基本数学运算之外的 Visual Basic 很大程度上依赖于 BCL 的功能。大多数在 CLR 上运行的语言（包括 C#）都是如此。但在大多数情况下，您可以使用一些库来增强框架的功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-29T13:52:08.270

这是我编写的函数，纯粹为此目的自己实现 BigInteger 并不难（但是很难使其高效和通用，但这就是库的用途）

```
Public Shared Function Problem16(ByVal power As Integer) As String

    Dim digits As Integer = CInt(Int(power * Log10(2)))

    Dim number(digits) As Byte
    number(digits) = 1

    For i As Integer = 1 To power
        Dim carry As Byte = 0
        For j As Integer = digits To 0 Step -1
            number(j) <<= 1
            number(j) += carry
            If number(j) > 9 Then
                carry = number(j) \ CByte(10)
                number(j) -= CByte(10)
            Else
                carry = 0
            End If
        Next
    Next

    Dim result As Integer
    For i As Integer = 0 To digits
        result += number(i)
    Next
    Return result.ToString

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T13:12:05.400

我还没有尝试过，但似乎有一个用于 Visual Basic的[Big Integer构造。](http://preview.tinyurl.com/mdj4h9)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T15:36:22.890

```
public static void main(String[] args) {
    int m = 2, ci = 1, n = 1000, i;
    int[] arr = new int[n + 1];
    arr[1] = 1;
    for (i = 1; i <= n; i++) {

        int carry = 0;
        for (int j = 1; j <= ci; j++) {
            arr[j] = arr[j] * m + carry;
            carry = arr[j] / 10;
            arr[j] = arr[j] % 10;
        }
        if (carry > 0) {
            while (carry > 0) {
                ci++;
                arr[ci] = carry % 10;
                carry = carry / 10;
            }
        }
    }
    int sum = 0;
    System.out.println(ci + "\n \n ");
    for (int j = ci; j > 0; j--) {
        System.out.print(arr[j]);
        sum = sum + arr[j];
    }
    System.out.println("\n \n " + sum);
} 
```

答案：2^1000 中的位数：302

2 ^ 1000 = 10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376

数字总和：1366

# tfs - 如何通过注释文本查找和查看 TFS 变更集？

> ID：925875
> 
> 赞同：135
> 
> 时间：2009-05-29T13:10:48.710
> 
> 标签：tfs, tfvc

使用 TFS，我需要通过评论和/或开发人员找到变更集。也许我今天只是瞎了眼，但我在源代码管理资源管理器中没有看到执行此任务的简单方法？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2011-06-08T00:01:55.257

如果您安装了 TFS Power Tools，您可以在命令提示符下运行它：

```
tfpt searchcs 
```

获得一个 GUI 窗口，其中包含按提交者和评论文本进行搜索的选项。我正在使用[TFS Power Tools（2011 年 3 月版）](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)和 TFS 2010。

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2013-08-21T22:47:54.473

**EASY WAY**，无需 3rd 方应用程序/附加组件：

1.  开源控制资源管理器
2.  从 TFS 服务器的根目录“查看历史记录”
3.  滚动到底部（连续点击“结束”按钮很快）
4.  选择所有记录，复制
5.  打开 Excel 并粘贴

现在 Excel 将允许您搜索评论（Excel 是本机应用程序，不要争论..）。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-06-06T22:42:58.810

安装了电动工具后：

```
tf history $/ -r | ? { $_.comment -like '*findme*' } 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2011-11-08T10:36:00.343

现在有一个 Visual Studio 加载项：http: [//visualstudiogallery.msdn.microsoft.com/3f65dee8-5a44-4771-929b-26531c482fbf](http://visualstudiogallery.msdn.microsoft.com/3f65dee8-5a44-4771-929b-26531c482fbf)。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-05-24T05:33:10.793

或者，无需安装电动工具，如果您查找搜索词***findme*** ，以下命令将起作用。

视窗：`tf history "$/Team Project/Development" /noprompt /recursive | findstr findme`

Linux：`tf history "$/Team Project/Development" /recursive | grep findme`

**注意**。如果你觉得这很有用，请感谢[这个人。](http://team-foundation-server.blogspot.com.au/2008/12/using-command-line-to-search-for.html)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-05-29T13:18:02.660

您可以使用命令行客户端：将[tf history](http://msdn.microsoft.com/en-us/library/yxtbh4yh%28VS.80%29.aspx)的输出通过管道传输到文件，然后使用您喜欢的任何搜索程序。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-29T14:35:12.130

我不知道如何通过评论文本来做到这一点，但这将允许开发人员进行搜索：

如果您打开菜单项 File->Source Control->Find In Source Control->Changesets...（您必须在 Source Control Explorer 中才能使用）。这将打开“查找变更集”对话框。然后，您可以通过 Developer 在给定的源文件夹（或项目）上搜索变更集。

这将向您显示评论，但您无法搜索它们。（尽管您可以按评论对列表进行排序并以这种方式找到您正在寻找的评论。）

附带说明一下，如果您想通过此对话框查看变更集的详细信息，您必须单击详细信息按钮。双击变更集将关闭对话框。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-08-12T15:44:46.557

通过评论查找变更集 2013 for Visual Studio 2013 [http://developer.azurewebsites.net/2014/08/find-changeset-by-comment-2013-for-visual-studio-2013/](http://developer.azurewebsites.net/2014/08/find-changeset-by-comment-2013-for-visual-studio-2013/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-01-22T17:31:56.263

要查看团队成员的签到：

在团队资源管理器中，导航到团队项目，导航到团队成员，右键单击要查看变更集的团队成员，然后选择“显示签入历史记录”。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-09-22T10:27:34.973

我`tfpt searchcs`从 TFS Power Tools 添加为 VisualStudio 中的外部工具：

*   命令：（`C:\Program Files (x86)\Microsoft Team Foundation Server 2015 Power Tools\TFPT.EXE` 或安装 TFS 电动工具的任何位置）
*   参数：（`searchcs /collection:http://tfsserver:8080/tfs $(SolutionDir)` 解决方案路径转换为服务器路径）
*   初始目录：（`c:\path\to\your\vs\IDE`除非`tf.exe`在您的路径中（默认情况下不是这种情况），这确保您可以从搜索对话框查看变更集详细信息，因为它运行`tf.exe`）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-06-10T21:38:56.217

我能够在 TFS 门户网站代码部分执行此操作。

在浏览器中导航到 TFS，转到代码，单击变更集，然后单击高级搜索。您可以按用户和日期范围进行过滤。您不能按评论搜索，但如果您有一个大致的日期范围，那么您可以将其过滤掉，然后使用浏览器搜索 (ctrl + f)。

# c# - Postsharp - 获取调用程序集？

> ID：925885
> 
> 赞同：0
> 
> 时间：2009-05-29T13:14:10.733
> 
> 标签：c#, aop, postsharp

使用 Postsharp OnMethodBoundaryAspect 时，是否有某种方法可以获取启动对给定方法的调用的调用程序集？GetCallingAssembly 只返回被调用方法所在的程序集。

注意 - 我在 postsharp 论坛上遇到问题，否则我会在那里发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T13:31:11.947

不; 不可能。

唯一的方法是使用 System.Diagnostics.StackTrace 遍历堆栈。

# c# - C# 转换字符串以用于逻辑条件

> ID：925886
> 
> 赞同：15
> 
> 时间：2009-05-29T13:14:54.570
> 
> 标签：c#, logic

是否可以将字符串转换为运算符以用于逻辑条件。

例如

```
if(x Convert.ToOperator(">") y) {} 
```

或者

```
if(x ">" as Operator y){} 
```

我很欣赏这可能不是标准的实践问题，因此我对那些问我为什么要做这样的事情的答案不感兴趣。

提前致谢

编辑：好的，我同意，只是公平地给出一些背景。

我们有围绕反射和 XML 构建的系统。为了方便起见，我希望能够说一些类似的话。

```
<Value = "Object1.Value" Operator = ">" Condition = "0"/> 
```

编辑：感谢您的评论，我无法在此处正确解释这一点。我想我的问题得到了“你不能”的回答，这绝对没问题（和我想的一样）。感谢您的意见。

编辑：草皮，我要去试一试。

想象以下

```
<Namespace.LogicRule Value= "Object1.Value" Operator=">" Condition="0"> 
```

这将反映到一个类中，所以现在我想通过调用来测试条件

```
bool LogicRule.Test() 
```

这就是所有需要结合在一起的地方。

编辑：

好的，所以我从来没有看过 Lambdas 或 Expressions，我想我会关注@jrista 的建议。

我的系统允许解析枚举，因此表达式很有吸引力，因为表达式类型枚举。

所以我创建了以下类来测试这个想法：

```
 public class Operation
    {
        private object _Right;
        private object _Left;
        private ExpressionType _ExpressionType;
        private string _Type;

        public object Left
        {
            get { return _Left; }
            set { _Left = value; }
        }

        public object Right
        {
            get { return _Right; }
            set { _Right = value; }
        }

        public string Type
        {
            get { return _Type; }
            set { _Type = value; }
        }

        public ExpressionType ExpressionType
        {
            get { return _ExpressionType; }
            set { _ExpressionType = value; }
        }

        public bool Evaluate()
        {
            var param = Expression.Parameter(typeof(int), "left");
            var param2 = Expression.Parameter(typeof(int), "right");

            Expression<Func<int, int, bool>> expression = Expression.Lambda<Func<int, int, bool>>(
               Expression.MakeBinary(ExpressionType, param, param2), param, param2);

            Func<int, int, bool> del = expression.Compile();

            return del(Convert.ToInt32(Left), Convert.ToInt32(Right));

        }
    } 
```

显然，这仅适用于 Int32 现在和基本的 ExpressionTypes，我不确定我是否可以使其通用？我以前从未使用过表达式，但这似乎有效。

然后可以用我们的 XML 方式将这种方式声明为

```
Operation<Left="1" Right="2" ExpressionType="LessThan" Type="System.Int32"/> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-29T14:08:50.013

你可以这样做：

```
public static bool Compare<T>(string op, T x, T y) where T:IComparable
{
 switch(op)
 {
  case "==" : return x.CompareTo(y)==0;
  case "!=" : return x.CompareTo(y)!=0;
  case ">"  : return x.CompareTo(y)>0;
  case ">=" : return x.CompareTo(y)>=0;
  case "<"  : return x.CompareTo(y)<0;
  case "<=" : return x.CompareTo(y)<=0;
 }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-29T13:19:37.743

**编辑**

正如 JaredPar 指出的那样，我在下面的建议不起作用，因为您不能将运算符应用于泛型......

因此，您需要为要比较/计算的每种类型都有特定的实现......

```
public int Compute (int param1, int param2, string op) 
{
    switch(op)
    {
        case "+": return param1 + param2;
        default: throw new NotImplementedException();
    }
}

public double Compute (double param1, double param2, string op) 
{
    switch(op)
    {
        case "+": return param1 + param2;
        default: throw new NotImplementedException();
    }
} 
```

**原创**

你可以做这样的事情。

您还需要尝试/捕获所有这些以确保无论 T 是什么，都支持特定的操作。

请注意，如果我问您为什么可能需要这样做。你在写某种数学解析器吗？

```
public T Compute<T> (T param1, T param2, string op) where T : struct
{
    switch(op)
    {
        case "+":
            return param1 + param2;
        default:
             throw new NotImplementedException();
    }
}

public bool Compare<T> (T param1, T param2, string op) where T : struct
{
    switch (op)
    {
        case "==":
             return param1 == param2;
        default:
             throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-29T13:16:40.620

不，这是不可能的，你为什么要这么做？

当然，您可以创建如下函数：

```
 public static bool Compare<T>(char op, T a, T b); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-29T16:47:34.740

您应该考虑使用 .NET 3.5 的表达式树。您可以手动将表达式构建到表达式树（基本上是 AST）中，然后调用 Expression.Compile() 来创建可调用委托。您的 LogicRule.Test() 方法需要构建表达式树，将树包装在 LambdaExpression 中，LambdaExpression 将您应用规则的对象也作为参数，调用 Compile()，并调用生成的委托。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-29T16:39:54.890

我在以下帮助下做了类似的事情：

[http://flee.codeplex.com/](http://flee.codeplex.com/)

该工具基本上可以评估各种表达式。基本用法是传入一个像“3 > 4”这样的字符串，该工具将返回 false。

但是，您也可以创建评估器的实例并传入对象名称/值对，它可以更直观一点 IE：myObject^7 < yourObject.

您可以在 codeplex 站点深入了解更多功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-29T13:44:31.060

```
<Function = "PredicateMore" Param1 = "Object1.Value" Param2 = "0"/> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-29T14:52:00.037

[我认为您可以使用隐式强制转换](http://msdn.microsoft.com/en-us/library/z5z9kes2(VS.71).aspx)来实现这一点。就像是：

```
 public static implicit operator Operator(string op) 
   {
      switch(op) {  
         case "==" : 
            return new EqualOperator();
            ...
      }
   }

   Operator op = "<";
   if( op.Compare(x,y) ) { ... }
   //or whatever use syntax you want for Operator. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-01T14:15:10.797

[Vici Parser](http://viciproject.com/wiki/projects/parser/home)（开源）可能对您有所帮助。这是一个 C# 表达式解析器，您可以在其中传递一个包含表达式的字符串，然后返回计算结果。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-13T16:08:54.887

您可以为此使用 DynamicLinq：

```
void Main()
{   
    var match = OpCompare(6, ">=", 4);  
    match.Dump();
}

private bool OpCompare<T>(T leftHand, string op, T rightHand)
{
    return new List<T>() { leftHand }.AsQueryable().Where($"it {op} {rightHand}").Any();
} 
```

# apache-flex - flex itemRenderer 是如何工作的？（他们的生命周期）

> ID：925889
> 
> 赞同：0
> 
> 时间：2009-05-29T13:15:43.087
> 
> 标签：apache-flex, itemrenderer

通过作品，我的意思是：项目渲染器如何实例化，调用，销毁......他们的生命周期是什么？

我有一些显示错误，这个链接让我想到了这个问题 [http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file=cellrenderer_072_14.html](http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file=cellrenderer_072_14.html)

（文档与 flex3 相同）

但我想知道更多。有什么链接或知识可以分享吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T14:55:06.800

Peter Ent 写了一系列关于项目渲染器的博客文章，这些文章非常有用：

itemRenderers：第 1 部分：内联渲染器

[http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.html](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.html)

itemRenderers：第 2 部分：外部渲染器

[http://www.adobe.com/devnet/flex/articles/itemrenderers_pt2.html](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt2.html)

itemRenderers：第 3 部分：通信

[http://www.adobe.com/devnet/flex/articles/itemrenderers_pt3.html](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt3.html)

itemRenderers：第 4 部分：状态和转换

[http://www.adobe.com/devnet/flex/articles/itemrenderers_pt4.html](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt4.html)

itemRenderers：第 5 部分：效率

[http://www.adobe.com/devnet/flex/articles/itemrenderers_pt5.html](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt5.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-15T13:35:05.987

看看这个： [http](http://sites.google.com/site/iamfuric/Home/Flex/about-itemrenderer) ://sites.google.com/site/iamfuric/Home/Flex/about-itemrenderer 源代码可用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T13:31:20.247

我想说那个链接解释了你需要做什么：永远不要假设状态，并期望你的 itemrenderer 被重用于多个项目（所以不要在 itemrenderer 的对象级别存储一个项目的数据，只使用变量在你的函数里面）

# windows - Cygwin 调试错误。

> ID：925890
> 
> 赞同：0
> 
> 时间：2009-05-29T13:16:00.277
> 
> 标签：windows, debugging, cygwin

我有一个内置在 Windows 中的可执行文件。我想将该 .exe 传递给由 Cygwin（DOS 版本）构建的输出文件。它进展顺利，之后它显示以下与 Cygwin dll 文件（ACL 检查）相关的错误。

```
Program received signal SIGSEGV, Segmentation fault.
0x6108829e in cygwin1!aclcheck () from /usr/bin/cygwin1.dll
(gdb) 
```

为什么我会收到这个错误，我应该去哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T13:37:43.260

检查你的代码。既然你已经在使用 gdb，那就`bt full`成为你的朋友。您可能传递了错误的参数，例如指向某些系统调用的无效指针。

可能不是段错误`aclcheck`本身发生的地方。Cygwin DLL 通常不附带内置的调试符号。gdb 从指令指针向后工作，并采用之前看到的符号。在非调试版本中，只有导出函数的符号。

# c# - 如何在 C# 中从 SQL Server 架构生成类？

> ID：925891
> 
> 赞同：3
> 
> 时间：2009-05-29T13:16:07.547
> 
> 标签：c#, sql, automation

我有一个 sql 数据库，我想为每个表创建一个类。我认为存在一种工具，可以让我从 sql 数据库中提取信息并将其转换为“DataTable”或“DataRow”等类。之后，我可以在数据集中使用这些对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T13:25:51.380

除了数据表和数据集，您可以使用自己的对象来表示应用程序中的数据，为此您可以使用一些持久性框架和 OR 映射器（对象关系映射器）。例如，您可以使用“Linq to Sql”， Microsoft 实体框架”或 NHibernate。

有一些代码生成工具可让您为这些框架生成代码。

MyGeneration 和 CodeSmith 是我认识的其中两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T13:24:47.310

也许[T4（文本模板转换工具包）](http://www.hanselman.com/blog/T4TextTemplateTransformationToolkitCodeGenerationBestKeptVisualStudioSecret.aspx)是你的朋友……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T13:25:55.140

有很多工具可以做这样的事情。它被称为ORM。Josh 提到了 Subsonic，这是一个很棒的免费工具。还有一个实体框架，它是 Visual Studio 2008 SP1 的一部分。如果您想要一个更好的工具，我建议您使用的是 LLBLGen。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-24T14:16:30.867

我是[SqlSharpener](https://github.com/aeslinger0/sqlsharpener)的创建者，它是一个轻量级工具，它将解析您的 *.sql 文件（如在 SSDT 项目中）并在设计时使用 T4 模板创建 DTO 对象和存储过程包装器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T14:59:50.270

An option if you want to write your own code generator would be to use SMO objects if you are using MS Sql Server 2005/2008 and pull the information out of the Table/Stored Procedure objects.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-29T13:25:47.370

好的老Linq怎么样？[从这里](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-29T14:07:49.220

我们正朝着实体框架的方向前进，但我们正在慢慢来，因为我们没有发现 EF 为黄金时间做好准备，而且 Linq2Sql 或多或少是一个可怜的男人/爱好者 ORM 工具。目前我们使用自定义的本土框架（The Kinetic Framework）和 Fluent NHibernate 的组合。

# sql - 合并联接表中的字段

> ID：925895
> 
> 赞同：1
> 
> 时间：2009-05-29T13:16:44.910
> 
> 标签：sql, sql-server, tsql

一个类别可以有很多产品。我必须构建 StoredProcedure，它返回所有类别，并将 Products 中的一些数据合并到一个字段中：

```
SP结果：
idCategory Name ProductNames ProductQuantities
1 Cat1 Procut1,Product2 24,32
2 Cat2 ProductX,ProductY 0,61

```

ProductNames 和 ProductQuantities 是 varchar 字段，具有来自连接的 Product 表的组合（连接）字段值。这就是我在 DB 中所拥有的：

```
类别表：
id类别名称
1 类 1
2 类 2

产品表：
idProduct idCategory 名称 数量
1 1 产品1 24
2 1 产品2 32
3 2 产品X 0
4 2 产品Y 61

```

我还想要一个函数，它为输入参数 idCategory=1 返回“Product1，Product2”，如下所示：

```
选择 idCategory，
       dbo.NamesFn(idCategory) 作为产品名称，
       dbo.QuantitiesFn(idCategory) AS ProductQuantities
从类别

```

也许是一个返回表结果的函数，所以加入只会进行一次，而不是在每个 Fn 中（因为这是简化的示例，在实际应用中我必须有 4-5 个组合字段，或者将来更多）？

那个 SQL/SP & Fn 怎么写？我正在使用 MS SQL2005

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T13:26:32.003

有几种使用 SQL Server 连接行的解决方案。看到[这个](http://databases.aspfaq.com/general/how-do-i-concatenate-strings-from-a-column-into-a-single-row.html)，还有[这个](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=79050)。

此查询产生您要求的结果集：

```
select c.idCategory, c.Name,
    replace(
        (select p.Name as [data()]
         from Product p
     where p.idCategory = c.idCategory
     for xml path ('')
), ' ', ', ') as ProductNames,
    replace(
        (select p.Quantity as [data()]
         from Product p
     where p.idCategory = c.idCategory
     for xml path ('')
), ' ', ', ') as ProductQuantities 
from Category c 
```

编辑添加：此查询产生结果：

```
idCategory  Name    ProductNames          ProductQuantities
1           Cat1    Product1, Product2    24, 32
2           Cat2    ProductX, ProductY    0, 61 
```

# .net - 是否可以将 .NET System.Diagnostics.Process 对象附加到正在运行的进程？

> ID：925896
> 
> 赞同：2
> 
> 时间：2009-05-29T13:16:51.117
> 
> 标签：.net, process

假设我希望通过 System.Diagnostics.Process 类的属性检查当前正在执行的进程。是否可以使用该进程加载此类的实例（即，以某种方式将 Process 对象附加到该进程），还是必须使用 Start 方法启动它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T13:29:12.200

如果您知道 PID ：

```
Process p = Process.GetProcessById(id); 
```

如果你知道名字：

```
Process p = Process.GetProcessesByName(name).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T13:18:31.723

您不能附加到它，但可以使用 Process.GetProcesses 方法枚举机器上所有正在运行的进程。其中之一将是您正在寻找的过程。

```
var list = System.Diagnostics.Process.GetProcesses();
foreach ( var proc in list ) {
  // Determine if it's the process and use it
} 
```

# delphi - 如何在 Delphi dxDBGrid 中更改单行的颜色？

> ID：925897
> 
> 赞同：1
> 
> 时间：2009-05-29T13:16:52.943
> 
> 标签：delphi, devexpress

基本上，客户想要更改 Delphi dxDBGrid 中单行的颜色。没有像有列那样的行属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T14:22:29.580

您可以使用样式。DBTableView 中的 DevExpres Grid 有一个名为：OnGetContentStyle in Styles 部分的事件。

您可以在设计时创建两种样式并在运行时应用所需的样式。

```
procedure TFormBrBase.DBTableViewStylesGetContentStyle(
  Sender: TcxCustomGridTableView; ARecord: TcxCustomGridRecord;
  AItem: TcxCustomGridTableItem; out AStyle: TcxStyle); 
```

使用 ARecord，您可以访问实际的记录值。使用此值，您可以决定和更改 AStyle(out) 参数的值。这条线是用这种风格画的。

问候。

* * *

Neftalí
Germán Estévez

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T13:23:24.800

抱歉，只需使用 OnCustomDraw 事件。啊星期五早上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T16:11:22.240

我在网格的 OnCustomDrawCell 事件上使用，例如：

```
If ANode.Values[SomeColumnName.Index] = SomeValue then
  AFont.Color := clRed; 
```

这是假设它是您所指的 QuantumGrid v3。如果它是 v4 或更高版本，那么指向 cxStyles 的答案是正确的。

# mysql - MySQL：如何组合多个 SELECT 查询，在同一张表上使用不同的 WHERE 条件？

> ID：925901
> 
> 赞同：5
> 
> 时间：2009-05-29T13:17:50.257
> 
> 标签：mysql

我一直在尝试从这个论坛和其他许多不同的方法来解决这个问题。我似乎找不到这个问题的解决方案或任何能给我一个直接答案的文档。

我想知道你能不能帮我看看。

谢谢

**问题：**

我有一个包含以下表格的数据库

我目前能够显示单轮的分数，一次一轮......这正是我想要的。但我也想显示每个参与者在所有回合中获得的分数。假设我们有 2 轮。我希望我的结果屏幕上的输出看起来像这样：

```
 Currently viewing league 20, Round 1
 of 2:

 User Name |  Score   |  Total Score

 Tom       |   10     |    200

 James     |   50     |    300 
```

用户名 - 参赛者姓名 score = 本轮总分 = 本轮联赛所有轮分之和。

我的 Mysql 查询如下。为它的混乱道歉，我已经重写了大约 100 次，这种当前的方式是唯一完全有效的方式。

# >> League_participants_query (mysql)

```
 # FIELDS
    SELECT    
        participants.participant_id,                                          # ID - used for functions
        participants.participant_name,                                        # NAME
        participants.participant_gender,                                      # Participant info             
        classes.class_name,                                                   # Class name
        schools.school_name,                                                  # School name
        participant_scores.participant_score,                                 # Participant score
        participant_scores.participant_score_id

    # TABLES
    FROM         participant_scores, participants, classes, league_schools, schools, leagues, rounds    

    # filter leagues
    WHERE        leagues.league_id               =     51

    AND          rounds.league_id                =     51    # the current league we are viewing
    AND          rounds.round_id                 =     25    # the current round of the league we are viewing

    # filter league schools
    AND          participant_scores.round_id     =     25    # the current round of the league we are viewing

    # filter schools allowed
    AND          league_schools.league_id        =     51    # the current league we are viewing

    # Filter schools
    AND          schools.school_id               =     league_schools.school_id

    # Filter classes
    AND          classes.school_id               =     schools.school_id                                        
    AND          classes.year_group_id           =     leagues.year_group_id

    # Filter participants
    AND          participants.class_id           =     classes.class_id

    # Filter participant_scores
    AND          participant_scores.participant_id   =      participants.participant_id

    #Grouping
    GROUP BY     participants.participant_id 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T13:22:59.873

您在这里想要的是这种形式的子查询：

```
SELECT
  name,
  round,
  score,
  ( select sum( score ) from scores sc where sc.userid = users.userid ) total
FROM users INNER JOIN scores on users.userid = scores.scoreid 
```

将为您从初始查询返回的每一行计算作为列的子查询。

要尝试将其添加到您的查询中：

```
SELECT
  participants.participant_id,
  participants.participant_name,
  participants.participant_gender,
  classes.class_name,
  schools.school_name,
  participant_scores.participant_score,
  participant_scores.participant_score_id,
  ( SELECT sum(participant_score) FROM participant_scores tbl_scores2
    WHERE tbl_scores2.participant_score_id = participants.participant_id ) total
FROM participant_scores, participants, classes,
  league_schools, schools, leagues, rounds
WHERE
  leagues.league_id = 51  AND
  rounds.league_id = 51  AND
  rounds.round_id = 25 AND
  participant_scores.round_id  = 25  AND
  league_schools.league_id = 51  AND
  schools.school_id = league_schools.school_id  AND
  classes.school_id = schools.school_id  AND
  classes.year_group_id = leagues.year_group_id  AND
  participants.class_id = classes.class_id  AND
  participant_scores.participant_id = participants.participant_id 
GROUP BY
  participants.participant_id 
```

我有点担心包含多个联赛的子查询，但看起来一个参与者无论如何只能属于一个联赛。您可能需要在子查询中包含一些内容来检查这一点。

# ruby-on-rails - 是否可以在 Rails 中创建两个日期之间的月份列表

> ID：925905
> 
> 赞同：10
> 
> 时间：2009-05-29T13:18:11.350
> 
> 标签：ruby-on-rails, ruby, datetime, date

我正在尝试创建一个页面来显示每个月的链接列表，按年分组。月份必须介于两个日期之间，即今天和第一次输入的日期。

我在砖墙上，我不知道如何创建它。

任何帮助都会得到广泛应用

问候亚当

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-29T13:53:27.267

只需将您想要的内容放在范围循环中并像这样使用 Date::MONTHNAMES 数组

```
(date.year..laterdate.year).each do |y|
   mo_start = (date.year == y) ? date.month : 1
   mo_end = (laterdate.year == y) ? laterdate.month : 12

   (mo_start..mo_end).each do |m|  
       puts Date::MONTHNAMES[m]
   end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-29T13:48:45.703

以下代码将在 Date 类中添加一个months_between 实例方法

```
#!/usr/bin/ruby 

require 'date'

class Date

  def self.months_between(d1, d2)
    months = []
    start_date = Date.civil(d1.year, d1.month, 1)
    end_date = Date.civil(d2.year, d2.month, 1)

    raise ArgumentError unless d1 <= d2

    while (start_date < end_date)
      months << start_date
      start_date = start_date >>1
    end

    months << end_date

  end
end 
```

这是非常轻微的测试，但是它返回一个日期数组，每个日期是每个受影响月份的第一天。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T13:48:39.603

我不知道我是否完全理解了您的问题，但以下一些内容可能有用。我利用了 ActiveSupport 中提供的对 Date 的扩展：

```
d1 = Date.parse("20070617") # => Sun, 17 Jun 2007
d2 = Date.parse("20090529") #=> Fri, 29 May 2009
eom = d1.end_of_month #=> Sat, 30 Jun 2007
mth_ends = [eom] #=> [Sat, 30 Jun 2007]
while eom < d2
  eom = eom.advance(:days => 1).end_of_month
  mth_ends << eom
end
yrs = mth_ends.group_by{|me| me.year} 
```

最后一行使用了另一个方便的扩展：Array#group_by，它几乎完全符合它的承诺。

```
d1.year.upto(d2.year) do |yr|
  puts "#{yrs[yr].min}, #{yrs[yr].max}"
end
2007-06-30, 2007-12-31
2008-01-31, 2008-12-31
2009-01-31, 2009-05-31 
```

我不知道起点/终点是否符合要求，但您应该能够弄清楚您可能还需要什么。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-26T13:41:42.090

使用[date_helper](https://github.com/pay4bugs/date_helper) gem 将`months_between`方法添加到`Date`类中，类似于史蒂夫的回答。

```
xmas = Date.parse("2013-12-25")
hksar_establishment_day = Date.parse("2014-07-01")

Date.months_between(xmas,hksar_establishment_day)
 => [Sun, 01 Dec 2013, Wed, 01 Jan 2014, Sat, 01 Feb 2014, Sat, 01 Mar 2014, Tue, 01 Apr 2014, Thu, 01 May 2014, Sun, 01 Jun 2014, Tue, 01 Jul 2014] 
```

# c# - 将实时数据存储到 1000 个文件中

> ID：925912
> 
> 赞同：3
> 
> 时间：2009-05-29T13:19:00.630
> 
> 标签：c#, real-time

我有一个程序可以接收 1000 个主题的实时数据。它平均每秒接收 5000 条消息。每条消息由两个字符串、一个主题和一个消息值组成。我想将这些字符串与指示消息到达时间的时间戳一起保存。

我在“Core 2”硬件上使用 32 位 Windows XP 并使用 C# 进行编程。

我想将这些数据保存到 1000 个文件中——每个主题一个。我知道很多人会想告诉我将数据保存到数据库中，但我不想走那条路。

我考虑了几种方法：

1) 打开 1000 个文件，并在数据到达时写入每个文件。我对此有两个担忧。不知道能不能同时打开1000个文件，也不知道这对磁盘碎片有什么影响。

2) 写入一个文件，然后——不知何故——稍后处理它以产生 1000 个文件。

3) 将其全部保存在 RAM 中直到一天结束，然后一次写入一个文件。我认为如果我有足够的内存，这会很好用，尽管我可能需要移动到 64 位才能超过 2 GB 的限制。

你会如何处理这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-29T13:34:00.413

我无法想象你为什么不想为此使用数据库。这就是他们建造的目的。他们很擅长。

如果您不愿意走这条路，将它们存储在 RAM 中并每小时将它们转出到磁盘可能是一种选择，但请记住，如果您被电源线绊倒，您会丢失大量数据。

严重地。数据库它。

**编辑：**我应该补充一点，如果您准备好硬件，那么获得一个强大的、可复制的和完整的数据库支持的解决方案将花费您不到一天的时间。

在任何其他环境中执行此级别的事务保护将花费您数周的时间来设置和测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-29T13:43:14.997

像 n8wrl 我也会推荐一个数据库。但是如果你真的不喜欢这个功能......

让我们找到另一个解决方案；-)

在最小的步骤中，我将采用两个线程。第一个是工人，接收所有数据并将每个对象（时间戳，两个字符串）放入队列中。

另一个线程将检查此队列（可能通过事件信息或通过检查 Count 属性）。该线程将使每个对象出列，打开特定文件，将其写下来，关闭文件并继续下一个事件。

使用第一种方法，我将开始并查看性能。如果它很糟糕，请进行一些计量，找出问题所在并尝试完成它（将打开的文件放入字典（名称，streamWriter）等）。

但另一方面，数据库对于这个问题来说非常好......一个表，四列（id，时间戳，主题，消息），一个额外的主题索引，准备好了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T13:24:03.957

我想进一步探讨一下为什么您不希望使用数据库——他们在这样的事情上做得很好！但是关于你的选择......

1.  1000 个打开的文件句柄听起来不太好。忘记磁盘碎片 - O/S 资源会很糟糕。
2.  这接近于 db-ish-ness！也听起来比它的价值更多的麻烦。
3.  RAM = 易失性。你整天都在积累数据，下午 5 点停电。

我将如何处理这个？D B！因为那时我可以查询索引，分析等等。

:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T13:30:22.073

首先计算带宽！5000 条消息/秒，每个 2kb = 10mb/秒。每分钟 - 600mb。好吧，您可以将其放入 RAM 中。然后每小时冲洗一次。

编辑：纠正错误。对不起这是我的错。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-29T13:42:14.437

我会同意凯尔的观点，并选择像 PI 这样的包装产品。请注意 PI 非常昂贵。

如果您正在寻找自定义解决方案，我会选择 Stephen's 并进行一些修改。让一台服务器接收消息并将它们放入队列中。您不能使用文件将消息传递给其他进程，因为您将不断遇到锁定问题。可能使用 MSMQ（MS 消息队列）之类的东西，但我不确定它的速度。

我还建议使用数据库来存储您的数据。不过，您会希望将数据批量插入到数据库中，因为我认为您需要一些强大的硬件来允许 SQL 每秒执行 5000 个事务。您最好每隔说队列中累积的 10000 条消息进行一次批量插入。

数据大小：

平均消息 ~50 字节 -> 小日期时间 = 4 字节 + 主题（~10 个非 unicode 字符）= 10 字节 + 消息 -> 31 个字符（非 unicode）= 31 个字节。

50 * 5000 = 244kb/秒 -> 14mb/分钟 -> 858mb/小时

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-29T14:29:03.733

我同意 Oliver 的观点，但我建议进行修改：有 1000 个队列，每个主题/文件一个。一个线程接收消息，给它们加上时间戳，然后将它们放入适当的队列中。另一个只是在队列中旋转，看看它们是否有数据。如果是这样，它会读取消息，然后打开相应的文件并将消息写入其中。关闭文件后，它移动到下一个队列。这样做的一个优点是，如果无法跟上流量，您可以添加额外的文件写入线程。不过，我可能会首先尝试设置写入阈值（推迟处理队列，直到收到 N 条消息）来批量写入。这样你就不会因为只写一两条消息而陷入打开和关闭文件的困境。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-29T15:42:05.210

也许您不想要数据库安装的开销？

在这种情况下，您可以尝试[使用基于文件系统的数据库，例如 sqlite](http://www.sqlite.org/)：

> SQLite 是一个实现自包含、无服务器、零配置、事务性 SQL 数据库引擎的软件库。SQLite 是世界上部署最广泛的 SQL 数据库引擎。SQLite 的源代码在公共领域。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-29T13:24:24.813

我会制作 2 个单独的程序：一个接收传入的请求，格式化它们，然后将它们写到一个文件中，另一个从该文件中读取并写出请求。以这种方式做事可以让您最大限度地减少打开的文件句柄的数量，同时仍然实时处理传入的请求。如果您使第一个程序格式正确输出，那么将其处理为单个文件应该很简单。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-29T13:31:31.307

我会考虑购买一个实时数据历史包。类似于 PI System 或 Wonderware Data Historian。我之前曾在文件和 MS SQL 数据库中尝试过这样的事情，但结果并不好（这是客户要求，我不建议这样做）。这些产品有 API，甚至还有包，您可以在其中像 SQL 一样查询数据。

它不允许我发布超链接，所以只需用谷歌搜索这 2 种产品，您就会找到有关它们的信息。

**编辑**

如果您确实像大多数人建议的那样使用数据库，我会为每个主题推荐一个用于历史数据的表，并考虑表分区、索引以及存储数据的时间。

例如，如果您要为每个主题存储一天的价值及其一个表，那么您正在查看每秒 5 次更新 x 一分钟内 60 秒 x 一小时内 60 分钟 x 24 小时 = 每天 432000 条记录。导出数据后，我想您将不得不清除第二天的数据，这将导致锁定，因此您必须将写入数据库排队。然后，如果您要重建索引，以便您可以对其进行任何查询，这将导致架构修改锁定和 MS SQL 企业版进行在线索引重建。如果您不每天清除数据，则必须确保有足够的磁盘空间来处理它。

基本上我所说的是权衡购买可靠产品与构建自己的产品的成本。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-29T13:32:13.253

我会保留传入消息的缓冲区，并定期在单独的线程上按顺序写入 1000 个文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-29T15:36:26.037

如果您不想使用数据库（我会，但假设您不这样做），我会将记录写入单个文件，追加操作尽可能快，并使用单独的进程/服务将文件拆分为 1000 个文件。您甚至可以每 X 分钟滚动一次文件，例如，每 15 分钟您启动一个新文件，而另一个进程开始将它们拆分为 1000 个单独的文件。

所有这一切确实引出了一个问题，即为什么不使用数据库，以及为什么需要 1000 个不同的文件——你可能有一个很好的理由——但话又说回来，也许你应该重新考虑你的策略并确保它在你之前是合理的推理沿着这条路走得很远。

# .htaccess - 如何使用 htaccess 重定向除一个子目录外的所有子目录

> ID：925913
> 
> 赞同：4
> 
> 时间：2009-05-29T13:19:01.783
> 
> 标签：.htaccess, redirect, mod-alias

自从我弄乱 .htaccess 以来已经有一段时间了，我似乎无法完全正确地做到这一点。我有一个站点，例如 example.com，我希望 example.com/* 重定向到 example.com/collector.html ，但子目录 example.com/special 下的 URL*除外*，我想继续工作。

例如：

*   example.com/page.html 应该重定向到 example.com/collector.html
*   example.com/foo/bar 应该重定向到 example.com/collector.html
*   example.com/special/page.html 不应重定向

我本来以为像

```
RedirectMatch 302 ^/[^(special)]/.* /collector.html
RedirectMatch 302 ^/[^(collector.html)/]* /collector.html 
```

会做的伎俩，但它似乎并没有按照我想要的方式工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T13:57:32.063

也许这个？（需要 mod_rewrite）

```
RewriteEngine On
RewriteRule !^(special(/.*)?|collector\.html)$ collector.html [R,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-05T15:49:18.163

这对我来说在 Apache 2.2.13 上工作得很好，我重新创建了你描述的目录结构。

```
RedirectMatch 302 /(?!special)  http://www.example.com/collector.html 
```

括号中的模式表示如果 URI 包含字符串“特殊”，则不匹配。

此外，mod rewrite 并不总是可用，在这种情况下不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T13:29:30.810

试试这个：

```
RedirectMatch 302 /\/[^(special)]\/.+/ /collector.html 
RedirectMatch 302 /\/[^(collector\.html)]/ /collector.html 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T17:56:29.147

也许...？

```
RewriteEngine on
RewriteRule ^(?!special) collector.html [R,NC] 
```

# javascript - 将 Tiny MCE 实现为本地 HTML 编辑器

> ID：925917
> 
> 赞同：0
> 
> 时间：2009-05-29T13:19:37.243
> 
> 标签：javascript, django, apache, tinymce

更新：有一些愚蠢的问题，这就是其中之一。我没有意识到通过 Django 提供 JavaScript 是一个如此大的问题。当我回答完之后，我会为那些想要 RTFM 的人发布最有用的资源，除非模组先关闭它。在那之前，很抱歉浪费你的时间。

如何安装和配置 Tiny MCE、Apache2 和 Django，以便 Tiny MCE 只能作为本地应用程序使用？我想我想要做的是设置 Apache，使其仅服务于本地计算机，并与 Django 一起提供 Tiny MCE 编辑器。Apache2 和 Django 已经安装，但我不知道如何集成 Tiny MCE 来实现这个结果。

我是 web 开发和框架的新手，所以我可能会错过一个明显的解决这个问题的方法。

（我为什么要这样做？

*   我想要一个所见即所得的 HTML 编辑器，它可以让我编辑文档的格式并查看它如何影响 HTML，并编辑 HTML 并查看它如何影响格式，同时使用 CSS 样式表。

*   我希望通过 SSL 连接向 Web 提供此功能，但还不想设置它。

*   Web 应用程序将通过 Django，所以我想让事情通过该框架工作。

*   我希望看到一个 JavaScript 应用程序在运行。）

谢谢你的耐心。

更新：这是否更好地表述为：

1.  如何通过 Django 提供 javascript 应用程序？
2.  如何使该服务仅对本地计算机可用？

问题 #2 似乎已得到解答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-09T23:31:29.350

作为对 q.1 的回应——你通常不会。Django 不提供像 JS 文件、图像等静态媒体。话虽如此，有一个用于 django 的 tinymce 应用程序可以简化集成。[http://code.google.com/p/django-tinymce/](http://code.google.com/p/django-tinymce/)适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T13:34:13.423

仅将 Apache 绑定到 127.0.0.1 接口。该文档可以在[http://httpd.apache.org/docs/2.0/bind.html找到](http://httpd.apache.org/docs/2.0/bind.html)

*就这个问题而言，您所提供的服务是无关紧要的，因为您也只是试图控制*在**哪里*提供服务。*

 *# nhibernate - 如果我不关心交易等，工作单元是否更有效率？

> ID：925919
> 
> 赞同：0
> 
> 时间：2009-05-29T13:19:58.177
> 
> 标签：nhibernate, unit-of-work

如果我的网页上有 10 个数据库调用，并且它们都不需要任何事务等。它们只是从数据库中获取数据（读取），我还应该使用工作单元类吗？

是因为为每个数据库调用创建一个新会话太昂贵了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T15:43:07.830

使用 NHibernate，创建会话工厂非常昂贵（因此您可能希望在创建会话工厂后缓存它，可能在 上`HttpApplication`）但创建会话非常便宜。换句话说，如果它使您的代码更干净，那么创建多个会话不一定是坏事。我认为 NH 文档说得最好：

> ISessionFactory 是一个创建成本高、线程安全的对象，旨在由所有应用程序线程共享。ISession 是一个廉价的、非线程安全的对象，应该为单个业务流程使用一次，然后丢弃。

因此，由于额外的开销，使用 UoW 模式可能不会*更*有效，但这是一个很好的做法，开销可能不会伤害您。过早的优化等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T13:12:29.503

是的，您应该使用事务。来自 Ayende 的博客：

“NHibernate 假定对数据库的所有访问都是在事务下完成的，并且强烈反对在没有事务的情况下使用任何会话。”

有关更多详细信息，这是他的博客文章的链接：

[http://ayende.com/Blog/archive/2008/12/28/nh-prof-alerts-use-of-implicit-transactions-is-discouraged.aspx](http://ayende.com/Blog/archive/2008/12/28/nh-prof-alerts-use-of-implicit-transactions-is-discouraged.aspx)

# sharepoint - 共享点日志记录/跟踪

> ID：925921
> 
> 赞同：2
> 
> 时间：2009-05-29T13:20:42.637
> 
> 标签：sharepoint, logging, trace

我如何在sharepoint中执行登录。我想使用跟踪。

以便它记录 12 个配置单元日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-30T23:57:17.947

微软提供了一个例子：

[http://msdn.microsoft.com/en-us/library/aa979522.aspx](http://msdn.microsoft.com/en-us/library/aa979522.aspx)

此示例使用本机跟踪方法写入 ULS 日志，因此在代码中使用了一些 pInvoke。

然后，您可以在代码中控制日志记录事件的类型，例如：

```
TraceProvider.WriteTrace(0, TraceProvider.TraceSeverity.High, Guid.Empty, "MyExeName", "Product Name", "Category Name", "Sample Message"); 
```

中央管理中的事件限制设置仍将采用这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-31T04:44:13.973

我首选的方法是编写一个自定义 HttpModule 来捕获和记录所有错误。记录错误后，您可以将用户重定向到错误页面 - 这是我见过的最常用于 SharePoint 中的自定义错误处理的方法。

在您的 HttpModule 中，您可以使用 Daniel 所描述的方法将异常写入 ULS 日志。

这是一个简单的例子：

创建一个实现 IHttpModule 的类，并在 Http 管道中连接适当的事件：

```
public void Init(HttpApplication context)
{
    context.Error += new EventHandler(context_Error);
} 
```

在 context_Error 事件中，检查所有错误并记录它们...

```
void context_Error(object sender, EventArgs e)
{
    TraceProvider.RegisterTraceProvider();

    foreach (var ex in HttpContext.Current.AllErrors)
    {

        TraceProvider.WriteTrace(0,
            TraceProvider.TraceSeverity.Exception,
            Guid.NewGuid(),
            Assembly.GetExecutingAssembly().FullName,
            "<your application name>",
            "<exception category>",
            ex.ToString());
    }

    TraceProvider.UnregisterTraceProvider();

    HttpContext.Current.Server.ClearError();
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Server.Transfer("/_layouts/Error500.aspx");
} 
```

当然，您必须将这一切都包装成一个功能（范围在 Web 应用程序级别）并将其部署到 SharePoint。

请注意，此自定义错误 http 模块的 web.config 部分中的条目必须位于列表的第一位。该部分中列出 http 模块的顺序很重要，自定义错误 http 模块应始终首先执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T13:34:57.663

（SharePoint 2007？）从 Central Admin 转到 Operations->Diagnostic Logging，“跟踪日志”和“事件限制”就是您要查找的内容。

在“事件限制”中选择一个类别，并为事件和跟踪日志选择最不严重的错误。然后，选择跟踪日志的路径（我的默认为 ..12\LOGS）并提供最大日志数和使用每个日志文件的分钟数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T16:36:46.997

如果你使用的是 MOSS，你可以使用这个：

```
Microsoft.Office.Server.Diagnostics.PortalLog.LogString("Message"); 
```

请记住，根据 Microsoft 文档 - LogString 保留供内部使用，不打算直接从您的代码中使用。

有关更多详细信息，请参阅此链接 -

[https://msdn.microsoft.com/en-us/library/office/microsoft.office.server.diagnostics.portallog_members.aspx](https://msdn.microsoft.com/en-us/library/office/microsoft.office.server.diagnostics.portallog_members.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-30T15:40:18.120

我写了一些博客文章来帮助你。我建议使用 BCL 日志记录类 (System.Diagnostics) 并创建一个写入 SharePoint ULS 日志的自定义 TraceListner。

[http://sharepoint.nailhead.net/2008/04/instrumentation-logging-for-sharepoint.html](http://sharepoint.nailhead.net/2008/04/instrumentation-logging-for-sharepoint.html)

# algorithm - 确定包含另一个数组 B 的所有元素的数组 A 的索引 i..j 的算法

> ID：925922
> 
> 赞同：9
> 
> 时间：2009-05-29T13:21:15.647
> 
> 标签：algorithm

我在一个面试问题线程上遇到了这个问题。这是问题：

> 给定两个整数数组 A [1..n] 和 B[1..m]，找到A 中包含B 的**所有元素的****最小**窗口。换句话说，找到一对 < i , j > 使得 A[i ..j] 包含 B[1..m]。
> 
>  **如果 A 不包含 B 的所有元素，则 i,j 可以返回为 -1。A 中的整数不必与 B 中的整数顺序相同。如果有多个最小窗口（不同，但大小相同），则足以返回其中一个。
> 
> 示例：A[1,2,5,11,2,6,8,24,101,17,8] 和 B[5,2,11,8,17]。该算法应返回 i = 2（A 中的索引 5）和 j = 9（A 中的索引 17）。**

 **现在我可以想到两种变化。

假设 B 有重复项。

1.  这种变化没有考虑每个元素在 B 中出现的次数。它只是检查 B 中出现的所有唯一元素，并在 A 中找到满足上述问题的最小对应窗口。例如，如果 A[1,2,4,5,7] 和 B[2,2,5]，这种变化不会影响 B 中有两个 2，而只是检查 A 中 B 中的唯一整数，即2 和 5，因此返回 i=1，j=3。

2.  这种变化解释了 B 中的重复。如果 B 中有两个 2，那么它预计在 A 中也至少会看到两个 2。如果不是，则返回-1，-1。

当您回答时，请务必让我知道您回答的是哪种变体。伪代码应该可以。如果计算起来很棘手，请提及空间和时间复杂度。提及您的解决方案是否假设数组索引也从 1 或 0 开始。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T14:30:49.703

## 复杂

### 时间：O((m+n)log m)

### 空间：O(m)

以下是可证明的最佳对数因子。（我相信 log 因子是无法摆脱的，所以它是最优的。）

变体 1 只是变体 2 的一个特例，在从 B 中删除重复项之后，所有重数都是 1。所以处理后一个变体就足够了；如果您想要变体 1，只需及时删除重复项`O(m log m)`。在下文中，让`m`表示 B 中不同元素的数量。我们假设`m < n`，否则我们可以`-1`在恒定时间内返回 。

对于 A 中的每个索引`i`，我们将找到包含的最小索引`s[i]`，具有正确的多重性。关键的观察是它*是非递减*的，这就是允许我们在摊销线性时间内做到这一点的原因。`A[i..s[i]]``B[1..m]`*`s[i]`*

开始`i=j=1`。我们将`(c[1], c[2], ... c[m])`在当前窗口中保留 B 的每个元素出现次数的元组`A[i..j]`。我们还将保留一组`S`索引（ 的子集`1..m`），其计数是“正确的”（即，`k`在`c[k]=1`变体 1 或`c[k] = <the right number>`变体 2 中）。

因此，对于`i=1`，从 开始`j=1`，递增每个`c[A[j]]`（如果`A[j]`是 B 的元素），检查`c[A[j]]`现在是否“正确”，并相应地添加或`j`删除`S`。`S`有大小时停止`m`。你现在发现`s[1]`，在大多数`O(n log m)`时候。（有`O(n)` `j`'，每组操作都需要`O(log m)`时间。）

现在要计算连续`s[i]`的 s，请执行以下操作。相应地递增`i`、递减`c[A[i]]`、更新`S`，并在必要时递增`j`直到再次`S`具有大小`m`。这给了你`s[i]`每个`i`. 最后，报告最小`(i,s[i])`的。`s[i]-i`

请注意，尽管您似乎可能对每个 执行最多`O(n)`步骤（递增`j`）`i`，但第二个指针`j`仅向右移动：因此您可以递增的总次数`j`最多为`n`. （这是[摊销分析](http://en.wikipedia.org/wiki/Amortized_analysis)。）每次增加 时`j`，您可能会执行需要`O(log m)`时间的集合操作，因此总时间为`O(n log m)`。所需的空间用于保存计数元组、B 的元素集、集合 S 以及一些恒定数量的其他变量，`O(m)`总而言之。

有一个明显`O(m+n)` *的下限*，因为您需要检查所有元素。所以唯一的问题是我们能否证明这个`log`因素是必要的；我相信是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T13:45:15.880

这是我想到的解决方案（但不是很整洁）。

我将使用问题中的示例来说明它。

让 A[1,2,5,11,2,6,8,24,101,17,8] 和 B[5,2,11,8,17]

1.  排序 B.（所以 B = [2,5,8,11,17]）。这一步需要 O(log m)。

2.  分配大小为A的数组C。遍历A的元素，在排序的B中对其进行二进制搜索，如果找到，则在C中输入它的“排序B中的索引+ 1”。如果没有找到，输入-1。这一步之后，

A = [1 , 2, 5, 11, 2, 6, 8, 24, 101, 17, 8] （没有变化，引用方便）。

C = [-1, 1, 2, 4, 1, -1, 3, -1, -1, 5, 3]

时间：(n log m)，空间 O(n)。

3.  找到 C 中包含从 1 到 m 的所有数字的最小窗口。对于寻找窗口，我可以想到两个一般方向：a。一种面向位的方法，在该方法中，我设置了与每个位置对应的位，最后通过某种 ANDing 进行检查。湾。创建另一个大小为 m 的数组 D，遍历 C，当我在 C 中遇到 p 时，增加 D[p]。使用它来查找窗口。

请留下关于一般方法以及 3a 和 3b 的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-12-07T07:44:56.873

我的解决方案：

一种。创建一个包含 m 个键的哈希表，每个键对应 B 中的每个值。H 中的每个键映射到一个排序索引的动态数组，其中包含 A 中等于 B[i] 的索引。这需要 O(n) 时间。我们遍历 A 中的每个索引 j。如果键 A[i] 存在于 H（O(1) 时间）中，则将包含 A 的索引 j 的值添加到 H[A[i]] 映射到的索引列表中.

在这一点上，我们已经将 n 个元素“分箱”到 m 个箱中。但是，总存储量仅为 O(n)。

湾。该算法的第二部分涉及为 H 中的每个列表维护一个“左”索引和一个“右”索引。让我们创建两个大小为 m 的数组，称为 L 和 R，其中包含这些值。最初在我们的示例中，

我们还跟踪“最佳”最小窗口。

然后，我们在 L 和 R 上迭代以下操作，这些操作本质上是贪婪的：i。在每次迭代中，我们计算 L 和 R 中的最小值和最大值。对于 L，Lmax - Lmin 是窗口，对于 R，Rmax - Rmin 是窗口。如果这些窗口之一优于当前最佳窗口，我们将更新最佳窗口。我们使用最小堆来跟踪 L 中的最小元素，并使用最大堆来跟踪 R 中的最大元素。这些需要 O(m*log(m)) 时间来构建。ii. 从“贪婪”的角度来看，我们希望采取行动来最小化每个 L 和 R 中的窗口大小。对于 L，增加最小索引直观上是有意义的，而对于 R，减少最大索引是有意义的。

我们想要增加最小值的数组位置，直到它大于 L 中的第二个最小元素，类似地，我们想要减少 R 中最大值的数组位置，直到它小于 R 中的第二大元素.

接下来，我们做一个关键的观察：

如果 L[i] 是 L 中的最小值并且 R[i] 小于 L 中的第二个最小元素，即，如果 L[i] 被替换为，R[i] 仍然是 L 中的最小值R[i]，那么我们就完成了。我们现在在列表 i 中有“最佳”索引，它可以为最小窗口做出贡献。此外，R 中的所有其他元素都不能对最佳窗口做出贡献，因为它们的 L 值都大于 L[i]。类似地，如果 R[j] 是 R 中的最大元素并且 L[j] 大于 R 中的第二大值，我们也可以通过设置 R[j] = L[j] 来完成。数组 i 中位于 L[j] 左侧的任何其他索引都已被考虑在内，因为所有索引都位于 R[j] 的右侧，并且 L[j] 和 R[j] 之间的所有索引都将比 L 执行得更差[j]。

否则，我们简单地增加数组位置 L[i] 直到它大于 L 中的第二个最小元素并减少数组位置 R[j]（其中 R[j] 是 R 中的最大值）直到它小于第二个R 中最大的元素。如果 L 或 R 窗口之一小于最佳窗口，我们计算窗口并更新最佳窗口。我们可以进行斐波那契搜索以优化增量/减量。我们使用斐波那契增量不断增加 L[i]，直到我们大于 L 中的第二大元素。然后我们可以执行二分查找以获得大于 L 中第二大元素的最小元素 L[i]，类似于集合 R。在递增/递减之后，我们从 R 的最大堆中弹出最大元素，L 的最小堆中弹出最小元素，并将 L[i] 和 R[j] 的新值插入堆中。

步骤二。当 Lmin 不能再向右移动或 Rmax 不能再向左移动时将终止（因为 R/L 值相同）。请注意，我们可以有 L[i] = R[i] 但如果它不是 L 中的最小元素或 R 中的最大元素，则算法仍将继续。

运行时分析：创建哈希表需要 O(n) 时间和 O(n) 空间。湾。堆的创建：O(m*log(m)) 时间和 O(m) 空间。C。贪心迭代算法更难分析。它的运行时间实际上受元素分布的限制。最坏的情况是，我们覆盖了哈希表中每个数组中的所有元素。对于每个元素，我们执行 O(log(m)) 堆更新。

因此，迭代贪心算法的最坏情况运行时间为 O(n*log(m))。在最好的情况下，我们很快发现 L[i] = R[i] 对于 L 中的最小元素或 R 中的最大元素...运行时间对于贪心算法来说是 O(1)*log(m)！

平均情况似乎很难分析。这个算法到最小窗口的平均“收敛”是多少。如果我们假设斐波那契增量/二分搜索有帮助，我们可以说在平均情况下我们只查看 m*log(n/m) 个元素（每个列表都有 n/m 个元素）。在这种情况下，贪心算法的运行时间将是 m*log(n/m)*log(m)。

总运行时间 最佳情况：O(n + m*log(m) + log(m)) 时间 = O(n) 假设 m << n 平均情况：O(n + m*log(m) + m*log (n/m)*log(m)) 时间 = O(n) 假设 m << n。最坏情况：O(n + n*log(m) + m*log(m)) = O(n*log(m)) 假设 m << n。

空间：总是 O(n + m)（哈希表和堆）。

编辑：这是一个解决的例子：

A[5, 1, 1, 5, 6, 1, 1, 5] B[5, 6]

H: { 5 => {1, 4, 8} 6 => {5} }

贪心算法：

L => {1, 1} R => {3, 1}

迭代 1：Lmin = 1（因为 H{5}[1] < H{6}[1]），Lmax = 5。窗口：5 - 1 + 1= 5 递增 Lmin 指针，现在变为 2。

L => {2, 1}

Rmin = H{6}[1] = 5，Rmax = H{5}[3] = 8。窗口 = 8 - 5 + 1 = 4。迄今为止的最佳窗口 = 4（小于上面计算的 5）。我们还注意到 A (5, 8) 中的索引以获得最佳窗口。

递减 Rmax，现在变为 2，值为 4。

R => {2, 1}

湾。现在，Lmin = 4 (H{5}[2]) 并且 L 中的索引 i 是 1。Lmax = 5 (H{6}[1]) 并且 L 中的索引是 2。我们不能增加 Lmin 因为L[1] = R[1] = 2。因此我们现在只计算窗口。

窗口 = Lmax - Lmin + 1 = 2，这是迄今为止最好的窗口。

因此，A = (4, 5) 中的最佳窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:52:29.973

```
struct Pair {
    int i;
    int j;
};

Pair
find_smallest_subarray_window(int *A, size_t n, int *B, size_t m)
{
    Pair p;

    p.i = -1;
    p.j = -1;

    // key is array value, value is array index
    std::map<int, int> map;
    size_t count = 0;

    int i;
    int j;
    for(i = 0; i < n, ++i) {
        for(j = 0; j < m; ++j) {
            if(A[i] == B[j]) {
                if(map.find(A[i]) == map.end()) {
                    map.insert(std::pair<int, int>(A[i], i));
                } else {
                    int start = findSmallestVal(map);
                    int end = findLargestVal(map);
                    int oldLength = end-start;
                    int oldIndex = map[A[i]];

                    map[A[i]] = i;
                    int _start = findSmallestVal(map);
                    int _end = findLargestVal(map);
                    int newLength = _end - _start;
                    if(newLength > oldLength) {
                        // revert back
                        map[A[i]] = oldIndex;
                    }
                }
            }
        }

        if(count == m) {
            break;
        }
    }

    p.i = findSmallestVal(map);
    p.j = findLargestVal(map);

    return p;
} 
```

# nhibernate - 使用 nHibernate，如何在添加过程中获取新插入的 ID？

> ID：925923
> 
> 赞同：2
> 
> 时间：2009-05-29T13:21:18.237
> 
> 标签：nhibernate

当我在数据库中添加新行时，我注意到 Add 方法返回`void`.

是否可以获得在添加操作中返回的新创建行的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T16:53:20.133

当您在实体上调用 session.Save() 时，您的实体应该修改了 Id。

如果您的保存立即发生或者您的保存是批处理，您可能需要检查您的休眠配置。如果是批处理，那么您需要提交（或刷新，有人会纠正这个......希望）您的会话。

# flash - 单击 Flash 上的按钮位图 img 后如何转到 URL - 动作脚本

> ID：925926
> 
> 赞同：0
> 
> 时间：2009-05-29T13:21:48.143
> 
> 标签：flash, actionscript-3

再会。

我很少使用 Flash CS4，但是我必须构建一个小动画。

它作为六个不同的位图图像，每一个都具有翻转效果。

但是，我希望他们每个人在单击时在新选项卡/窗口中打开一个 URL。

如果有人知道如何从文本文件中加载这些 URL 中的每一个。

我会非常感谢。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T13:31:02.697

您正在寻找的命令是

```
navigateToURL(request:URLRequest, "_blank"):void 
```

“_blank”指定一个新窗口。

您想从文本文件中加载它们，但这在 Flash 中是不可能的，因为 Flash 不允许磁盘访问。

除非您的意思是文本文件托管在服务器上。

编辑：这是将外部数据加载到 Flash 中的全面概述：[Adobe 帮助](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cfd.html)

```
var data:Object;

// Load the external file at startup. 
// Variables will be loaded and can be referenced directly.
// The request by default can only call files on the server hosting the Flash.
private function onInitializationComplete(event:Event):void
{
    var loader:URLLoader = new URLLoader();
    var request:URLRequest = new URLRequest("externalFile.txt");
    loader.addEventListener(Event.COMPLETE, completeHandler); 
    loader.dataFormat=URLLoaderFormat.VARIABLES; // Change to .TEXT if you want to parse it yourself.
    loader.load(request);
}

private function completeHandler(event:Event):void
{
     data = event.target.data;
}    

private function onClickHandler(event:MouseEvent):void
{
    var bitmapName:String = (event.target as Sprite).name; // Get the name of the bitmap clicked.
    var URL:String = data[bitmapName]; // A variable with bitmapName should have been loaded from the text file, so I am calling it by name.
    var openMethod:String = data[bitmapName + "Method"];

    navigateToURL(URL, openMethod);
} 
```

文本文件应包含如下数据：

```
bitmap1=www.google.com&bitmap1Method=_blank&bitmap2=www.amazon.com&bitmap2Method=_self 
```

如果你想

# .net - .NET 中的混淆：它是如何完成的，它有多安全？

> ID：925929
> 
> 赞同：3
> 
> 时间：2009-05-29T13:22:10.497
> 
> 标签：.net, security, reflection, obfuscation

我在[另一个问题](https://stackoverflow.com/questions/906746/is-it-legal-to-use-reflector-to-analyze-binaries-when-the-owner-forbids-a-viewing/906785#906785)中提出了关于混淆的观点，有人回答说“混淆并没有停止太多”。

与其在评论中展开辩论，我希望社区能够认真回答我的代码在使用 X、Y 或 Z 混淆器进行混淆时的安全性，以及是否有任何混淆工具真正完成了工作。

我也对任何解释感兴趣，以获得对混淆器如何工作的一些基本了解。

据我了解，混淆不能阻止反射和检测方法等，但它会通过扭曲变量名使方法中的代码可读性降低。那是错的吗？它还有什么作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T13:26:16.370

混淆永远不可能真正安全，因为总是可以查看 MSIL。即使有一个好的混淆器，人们也可以简单地从 MSIL 复制你的大部分代码，因为你别无选择，只能编译到 MSIL，所以你真的无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T13:27:16.837

有很多方法可以做这种事情——例如，你有没有试过自己运行 Reflector？

归根结底，如果你有商业软件，人们会为它付费以获得支持的版本，无论他们是否能看到源代码——这就是有多少开源项目赚钱。混淆基本上就是它所说的 - 它使代码更难理解，但实际上并没有隐藏它。值不值得，你得根据具体情况来判断。

如果您向企业客户销售软件，我的观点是不值得费心。如果您正在向零售客户销售并且真的想隐藏代码，那么 .NET 可能不是答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-21T19:26:47.773

这是我在 ISSA 杂志上发表的一篇关于“<a href="http://www.preemptive.com/images/stories/white_papers/Risks_Unique_to_Java_and_NET_ISSA1109.pdf" rel="nofollow noreferrer">评估和管理安全性的文章Java 和 .NET 特有的风险”——这是一个 PDF 文件，但它涵盖了混淆和许多相关技术。更重要的是，它涵盖了减轻这些风险的过程，以及关于如何将上述所有内容与这些风险的重要性与您的具体情况保持一致的一些建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T13:31:46.173

[不用担心](https://stackoverflow.com/questions/751411/need-to-implement-expiration-date-for-beta-software-c/751553#751553)—— [它需要的安全。](https://stackoverflow.com/questions/651291/securing-a-net-application/651375#651375)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T13:41:09.523

如果有人足够专注于获得您的程序，他们会的，再多的混淆也不会改变这一点。我认为[Joel Coehoorn](https://stackoverflow.com/questions/651291/securing-a-net-application/651375#651375)对[保护 .NET 应用程序](https://stackoverflow.com/questions/651291/securing-a-net-application-closed)的回答很好地总结了一切：

> 您无法完全保护您的应用程序。谢天谢地，你真的不想。根据我的经验，您需要确保您的应用程序安全，以免有人意外盗版您的产品，仅此而已。

[Wikipedia 在Obfuscation](http://en.wikipedia.org/wiki/Obfuscated_code)上有一个不错的部分，特别是他们通过[手动混淆](http://en.wikipedia.org/wiki/Obfuscated_code#Step_by_step)来让您了解发生的步骤：

> *   改写一会儿。使用特殊值。*   将迭代改为递归*   混淆构造和无意义的变量名*   删除中间变量和文字*   再次混淆名称*   删除文字*   删除多余的文字

# qt - QGraphicsView - 如何禁用鼠标和键盘滚动

> ID：925934
> 
> 赞同：4
> 
> 时间：2009-05-29T13:23:31.820
> 
> 标签：qt, qgraphicsview

在我的应用程序中，我添加了 pixmap 的 QGraphicsScene，所有内容都在 QGraphicsView 中查看，滚动条关闭。程序窗口比像素图小，当我按箭头键或移动鼠标滚轮时，像素图正在移动。

如何禁用它，即使像素图大于窗口，它也不会被键盘或鼠标移动，除非我为此使用我的事件？

（我试图将交互属性设置为 false，但没有奏效）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-30T09:05:55.457

我相信最简单的解决方案是将 QGraphicsView 的 FocusPolicy 设置为 NoFocus，然后在主窗口中处理所有关键事件。

```
ui->graphicsView->setFocusPolicy( Qt::NoFocus ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-08-16T23:08:02.027

我认为简单的方法是使用`QGraphicsView::setSceneRect()`设置视图允许可视化的区域。

如果您将视图设置为`sceneRect()`视图小部件的实际大小（或稍微小一点），那么它将无法在此矩形之外滚动或平移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T14:12:54.827

我不知道是否有更简单的方法，但比较简单的方法是创建一个继承 QGraphicsView 类并覆盖鼠标和按键事件的类。

更难的方法是在小部件上安装事件过滤器。

在我看来，最难的蛮力解决方案是通过某种信号检测变化，并将其恢复为原来的样子。

# php - 创建 Wordpress 样式的提取

> ID：925951
> 
> 赞同：1
> 
> 时间：2009-05-29T13:26:36.213
> 
> 标签：php, string

我正在一个网站上拉下各种公共 RSS 提要。我想显示提要条目的无 HTML 简短描述。

一些提要带有一个很好的摘录，但很多都没有，所以我只能从完整的内容中制作自己的。

那么，将一段文本分割成前几行的最佳/最快/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T13:31:23.053

此功能会将文本块减少到给定的字数限制，因此如果在某个单词中途中断，它不会被切断：

```
 function limit_text($text, $limit) {
      if (strlen($text) > $limit) {
          $words = str_word_count($text, 2);
          $pos = array_keys($words);
          $text = substr($text, 0, $pos[$limit]) . '...';
      }
      return $text;
    } 
```

示例用法：

```
echo limit_text('Hello here is a long sentence blah blah blah blah blah hahahaha haha haaaaaa', 5); 
```

输出：

```
Hello here is a long ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T15:34:10.433

这个会给你更多的灵活性

```
function string_limiter($string, $limit = 50, $end_char = '&#8230;')
{
    if (trim($string) == '')
    {
        return $string;
    }

    preg_match('/^\s*+(?:\S++\s*+){1,'.(int) $limit.'}/', $string, $matches);

    if (strlen($string) == strlen($matches[0]))
    {
        $end_char = '';
    }

    return rtrim($matches[0]).$end_char;
} 
```

示例如何调用它

```
$str = "Cras id ipsum accumsan dolor pulvinar sollicitudin et eu augue. Pellentesque sem metus, imperdiet tempor fringilla quis, convallis quis nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Etiam eget lorem ligula. Sed congue odio enim. Etiam aliquet condimentum pellentesque. Sed urna velit, egestas et dictum non, pulvinar quis dui! Cras blandit porttitor tortor nec eleifend. Nullam porttitor scelerisque nunc, id porttitor orci lobortis nec. Curabitur vestibulum molestie purus, eget convallis dolor luctus eu! Morbi id felis eu eros mattis congue non nec nisl.";

echo string_limiter($str, 20); 
```

你会得到这样的东西：

> Cras id ipsum accumsan dolor pulvinar sollicitudin et eu augue。Pellentesque sem metus、imperdiet tempor fringilla quis、convallis quis nisl....</p>

# javascript - IE 问题：键盘与复选框的交互

> ID：925953
> 
> 赞同：0
> 
> 时间：2009-05-29T13:27:29.567
> 
> 标签：javascript, internet-explorer, dom, cross-browser

我有一个 HTML 表格，每一行都有一个用于选择或取消选择其行的复选框。每当复选框更改值时，我需要向该行添加或删除突出显示，并确保仅在选择至少一行时启用页面的提交按钮，否则禁用。

复选框事件处理程序由以下函数定义：

```
function getCheckboxCallback() {
  return function () {
    var parentRow = getParentRow(this);
    if (!parentRow) {
      return;  // No parent row found; abort
    }

    // Adjust the appearance of the row
    setSelected(parentRow, this.checked);

    // Count the number of selected table rows, and disable the submit
    // button whenever no rows are selected
    enforceInvariants();

    return true;
  };
} 
```

在同一模块的其他地方，复选框被赋予事件处理程序：

```
checkbox.onchange = getCheckboxCallback();
checkbox.onclick = getCheckboxCallback();  // alleged IE fix 
```

我在 Windows XP 中工作，在 Firefox 3 和 Opera 9 中一切正常。但是，IE 7 不能很好地处理键盘交互（鼠标交互工作正常）。

问题是，如果一个复选框具有焦点并且我按下空格键，则该复选框不会被选中——而是被选中一半（它具有与鼠标按下后立即得到的相同的阴影外观）。我必须再次按空格键才能真正选中该框。同样，它需要两次按键才能取消选中它。奇怪的是，如果我按住空格键片刻，按一下就可以按预期工作。

谁能解释这里发生了什么？我在导致这种行为的 JavaScript 代码中做错了什么吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T18:27:14.077

不幸的是，IE 处理 onchange 的方式与其他浏览器不同。IE 将其解释为“更改后模糊”。请注意，虽然这不是很有用，但根据规范，它在技术上是正确的：“当控件失去输入焦点并且在获得焦点后其值已被修改时，会发生 onchange 事件”

您可以尝试使用仅限 IE 的事件“onpropertychange”。

参考： http: [//lhorie.blogspot.com/2007/04/fixing-ie7-onchange-bug-on-checkboxes.html](http://lhorie.blogspot.com/2007/04/fixing-ie7-onchange-bug-on-checkboxes.html)

# search - 是否有必应 API？

> ID：925955
> 
> 赞同：0
> 
> 时间：2009-05-29T13:27:38.973
> 
> 标签：search, bing-api

微软刚刚推出了一个新的搜索引擎，必应，“必应不是谷歌”。

该服务有 API 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-02T12:59:02.043

阅读此 Bing API，版本 2.0 - [http://msdn.microsoft.com/en-us/library/dd251056.aspx](http://msdn.microsoft.com/en-us/library/dd251056.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T13:32:07.483

根据这个 [http://dev.live.com/blogs/livesearch/archive/2009/05/28/494.aspx](http://dev.live.com/blogs/livesearch/archive/2009/05/28/494.aspx)你使用 Live API

你会得到一个链接：它看起来像 Live API 的变化 - “丝绸之路”又名实时搜索 2.0 [http://search.live.com/developers](http://search.live.com/developers)

[MSDN LowBand API 链接](http://msdn.microsoft.com/en-us/library/dd251056.aspx)

# python - Fedora Python 升级破坏了 easy_install

> ID：925965
> 
> 赞同：0
> 
> 时间：2009-05-29T13:29:39.157
> 
> 标签：python, fedora, easy-install

Fedora Core 9 包含 Python 2.5.1。我可以使用 YUM 来获得最新最好的版本。

为了准备 2.6 正式测试，我想从 2.5.4 开始。似乎没有 Fedora 9 YUM 包，因为 2.5.4 不是 FC9 的官方部分。

我下载了 2.5.4，下载`./configure; make; make install`了两个 Python。官方 2.5.1 (in `/usr/bin`) 和新的 2.5.4。（在`/usr/local/bin`）。

我的技术堆栈都没有安装在`/usr/local/lib/python2.5`.

看来我有几个前进的选择。有人有什么偏好吗？

*   将 /usr/lib/python2.5/* 复制到 /usr/local/lib/python2.5 以复制我的环境。这应该可以工作，除非 Python 库的某些部分在安装过程中连接了 /usr/bin/python。这当然很简单，但有缺点吗？

*   通过运行重新安装所有内容`easy_install`。除了，`easy_install`（当前）硬连线到`/usr/bin/python`. 所以，我必须先修复`easy_install`，然后重新安装所有东西。

    这需要一些时间，但它为我提供了一个干净、最新、最好的环境。但有不利的一面吗？[为什么 easy_install 自己硬连线？]

*   重新链接`/usr/bin/python`为`/usr/local/bin/python`. 我仍然需要复制或重新安装库，所以我认为这对我没有任何好处。[它会`easy_install`起作用；但编辑也是如此`/usr/bin/easy_install`。]

有没有人复制他们的图书馆？就这么简单吗？

或者我应该修复`easy_install`并简单地通过安装指南并构建一个新的、干净的、最新的和最好的？

* * *

**编辑**

或者，我应该

*   跳过尝试解决 2.5.1 和 2.5.4 的问题，直接跳到 2.6？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T22:24:10.807

通常，您只会安装一个版本的 python 版本。由于 2.5.1 和 2.5.4 来自同一版本，因此复制您的库应该可以正常工作。您需要注意的是，您现在的路径中有 /usr/bin/python 和 /usr/local/bin/python，一些实用程序可能会混淆。

如果您需要同时安装两个微版本，我会将 2.5.4 完全排除在您的路径之外，或者让它完全破坏另一个（尽管这样做需要您自担风险；）如果您选择前者，您还可以使用 PYTHONPATH 环境变量将 2.5.4 指向您的站点包。

Ubuntu 采取了不同的路线，这就是您可以处理不同主要版本的方式。python 二进制文件附有版本：

```
/usr/bin/python -> python2.6
/usr/bin/python2.5
/usr/bin/python2.6 
```

每个都有自己的 /usr/lib/python2.X 目录，其中包含所有模块的版本。

最后，您可以通过[修改 site.py来进一步自定义设置](http://www.python.org/doc/2.5.4/inst/search-path.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T15:35:51.637

在提供开箱即用的 2.4 的旧版本 ubuntu 上安装 Python 2.5 时，我有类似的经历和问题。

我第一次尝试打补丁`easy_install`，但这导致了任何想要使用 os 提供的 python 版本的问题。我经常摆弄工具链来修复每次安装时可能出现的不同错误。通过 apt 安装任何 python 软件，或者从 apt 安装任何`easy_install`在安装过程中包含 python 脚本的软件，通常都很有趣。我敢肯定我在修补时可能会更加警惕`easy_install`，但我放弃了。

相反，我复制了库，一切正常。正如您所说，可能存在问题，具体取决于您安装的内容，但我没有遇到问题。仔细检查 Python 的`site.py`模块，我确实看到它完全在相对路径上运行，动态构建绝对路径；这让我有信心尝试“复制所有内容”的方法。我仔细检查了所有`.pth`文件，然后去了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T13:37:07.927

我建议您创建一个（或多个）virtualenv 来将软件包安装到其中。

# svn - 颠覆钩子更新外部认证错误

> ID：925975
> 
> 赞同：2
> 
> 时间：2009-05-29T13:31:43.647
> 
> 标签：svn, post-commit, svn-hooks, externals

我有一个正在更新工作副本的提交后挂钩。在该工作副本中，一些文件是具有身份验证的外部文件。有没有办法将登录凭据传递给仅外部的 svn 更新？

现在它进行更新，但由于外部要求登录，它无法更新外部库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T21:19:03.777

不，不是分开的。

获取 Subversion 客户端可用凭据的一种方法是以该用户身份登录，例如使用 sudo 或 su，然后手动从所有网站签出到 /tmp，以便将它们存储起来。然后在提交后运行的客户端应该可以工作。

# asp.net - 如何在 ASP.NET 非窗体类文件中映射路径

> ID：925977
> 
> 赞同：0
> 
> 时间：2009-05-29T13:31:50.540
> 
> 标签：asp.net

我一直在我的 Web 表单代码隐藏类中使用以下代码。我想在我的常规 .cs 文件中使用它：例如，在进行数据库调用时。但是，当我尝试在 Web 表单之外使用它时，在尝试使用 base.Request.ApplicationPath 进行映射时出现以下错误：“对象”不包含“请求”的定义。在 Web 应用程序项目的常规 .cs 类文件中映射到根的简单、正确的方法是什么？

```
 protected void LogError(string errMsg, string errTrace)
    {
        string mailSubject = "oops!";
        string mailBody = errMsg + errTrace;

        System.Configuration.Configuration config
            = WebConfigurationManager.OpenWebConfiguration(base.Request.ApplicationPath);
        AppSettingsSection appSettings = (AppSettingsSection)config.GetSection("appSettings");

        // Extract values from the web.config file
        string toAddress = "me@gmail.com";
        string fromAddress = appSettings.Settings["FromEmailAddr"].Value;
        string emailHost = appSettings.Settings["EmailHost"].Value;

        mailProvider.SendMail(fromAddress, toAddress, mailSubject, mailBody.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T13:34:20.067

HttpContext.Current.Request.ApplicationPath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T13:35:38.537

您可以使用[`HttpContext.Current`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx)该类从类外部引用页面的当前实例`Page`。

在您的情况下，您想使用：

```
HttpContext.Current.Request 
```

代替：

```
base.Request 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T13:40:04.317

您正在引用“base”，它在 UI 代码中引用了 Page 或 UserControl 对象。现在您将它从该代码中移出，新类不会派生自这些类中的任何一个，因此您将不得不使用它`HttpContext.Current.Request`。

# windows - 在 3D 全屏应用程序上叠加

> ID：925981
> 
> 赞同：46
> 
> 时间：2009-05-29T13:32:12.710
> 
> 标签：windows, opengl, directx, overlay, fullscreen

我想在第 3 方全屏 Windows 应用程序之上显示一些自定义图形。

你玩过 Steam 游戏吗？它有一个可执行文件 GameOverlayUI.exe，可让您从游戏中访问 Steam 窗口。（GUI 元素看起来是自定义绘制的，我不知道这是否有必要；但它们在游戏中看起来与在桌面上的完全一样。）它甚至可以“暗淡”游戏图形的背景。

我想知道如何编写这样的应用程序。

我也想知道解决方案的范围有多广。你能对所有 OpenGL 应用程序使用一种方法吗？对于所有 Direct3D 减去 DirectDraw 应用程序？对于所有全屏 Windows 应用程序？

我正在寻找更“现代”和通用的解决方案——覆盖命令提示符或 320x240 索引颜色应用程序不是问题。

编辑：一些澄清：全屏应用程序不是我的。它可以是任何东西。最有可能的是，这将是一个 3D 游戏。我想在游戏图形的顶部显示屏幕右下角的数字时钟。如果可能的话，我想避免诸如注入代码或调试进程之类的技巧。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-11-05T20:54:30.603

好吧，这是另一个例子。Xfire 是一个聊天程序，它将其界面叠加到游戏中，因此您可以在玩游戏时接收消息。他们这样做的方法是在进程内存级别编辑 d3d/opengl DLL，例如注入程序集跳转。我知道这一点是因为他们的方法导致我的 mod 崩溃，而且我实际上看到了他们注入 d3d9.dll 的奇怪汇编代码。

下面是 Xfire 是如何做到这一点的：

1.  瞄准游戏进程
2.  在其进程内存中搜索 d3d.dll/opengl.dll
3.  向进程中注入一个包含自定义接口逻辑的 DLL
4.  通过在进程内存中找到的 d3d/opengl 函数中手动编写程序集跳转将接口的函数连接到程序流

由于您需要劫持属于该游戏的图形设备，因此没有其他可以想象的方法。我敢打赌，Steam 的做法与 Xfire 相同。所以，是的，除非有人创建了一个有用的库来做你需要在低级别做的所有事情，否则没有简单的方法来做到这一点。

您还询问了有关在叠加层下调暗游戏图形的问题。这只是一个`DrawPrimitive`在屏幕上绘制填充透明矩形的简单调用。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-11-02T17:51:34.433

**[在这里](https://gist.github.com/shaunlebron/3854bf4eec5bec297907)创建了一个包含完整代码的 Gist**

这是一门非常深奥的艺术，有几种方法可以做到这一点。我更喜欢所谓的*Direct3D Wrapper*。自从我这样做以来已经有好几年了，但我曾经用一个游戏做到过。我可能遗漏了一些细节，但我只是希望说明这个想法。

所有 Direct3D9 游戏都需要在屏幕渲染并准备好绘制后调用[IDirect3DDevice9::EndScene 。](http://msdn.microsoft.com/en-us/library/ee421698%28VS.85%29.aspx)所以理论上，我们可以将自定义代码放入`EndScene`其中，在游戏中绘制我们想要的东西。我们通过为游戏创建一个看起来像 IDirect3DDevice9 的类来做到这一点，但它实际上只是一个将所有函数调用转发到真实类的包装器。所以现在，在我们的自定义类中，我们的包装函数`EndScene`如下所示：

```
HRESULT IDirect3DDevice9::EndScene()
{
   // draw overlays here

   realDevice.EndScene();
} 
```

然后我们将其编译成一个名为 d3d9.dll 的 DLL，并将其放到游戏可执行文件的目录中。真正的 d3d9.dll 应该在 /system32 文件夹中，但游戏首先在当前目录中查找，然后加载我们的。游戏加载后，它使用我们的 DLL 创建包装类的实例。现在每次`EndScene`调用时，我们的代码都会执行以在屏幕上绘制我们想要的内容。

我认为您可以尝试使用 OpenGL 的相同原理。但是为了防止篡改，我认为一些现代游戏试图阻止这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-16T18:11:33.810

我一直在思考这个问题。对于 OpenGL，我会将 WGL 的 SwapBuffers 与 Detours 挂钩，在游戏结束后绘制我的东西，然后自己交换缓冲区。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-29T13:39:45.407

我已经使用 DirectX 和 WPF 视口完成了叠加（实际上是一样的），使用叠加在 3D 可视化之上绘制了一些不错的 2D GDI+ 内容。

我通过使用“实际”可视化顶部的面板进行管理，将颜色设置为透明，除了我想要覆盖的位。工作得很好，但是将单击、拖动和其他事件通过“绘图”层传递到 3D 控件有点痛苦。

# php - 如何在 WordPress 中使用 jQuery Cycle 插件？

> ID：925985
> 
> 赞同：1
> 
> 时间：2009-05-29T13:33:22.723
> 
> 标签：php, javascript, jquery, wordpress, jquery-plugins

我已经尝试了我能想到的一切。不应该这么难。有人可以向我解释一下使用 jQuery 和 WordPress（特别是 jQuery Cycle 插件）的过程吗？

在 header.php 我有：

```
<?php
    wp_enqueue_script('jquery.cycle.all.min', '/wp-content/themes/andrewhavens/jquery.cycle.all.min.js', array('jquery'));
    wp_enqueue_script('featured-work-slideshow', '/wp-content/themes/andrewhavens/featured-work-slideshow.js');
    wp_head();
?> 
```

我已将这两个 js 文件上传到我的主题目录。

在 features-work-slideshow.js 我有：

```
jQuery(document).ready(function($) {
    $('#featured-works').cycle('fade');
}); 
```

在我的模板中，我有：

```
<div id="featured-works">
    <?php query_posts('category_name=featured-work&showposts=5'); ?>
    <?php while (have_posts()) : the_post(); ?>
        <div class="featured-work">
            <div class="featured-work-image-container" style="float:left; width:600px;">
                <?php $image = get_post_meta($post->ID, 'homepage-image', true); ?>
                <img src="<?php echo $image; ?>" width="500" height="300" style="margin-left:30px;">
            </div>
            <p style="float:left; width:300px;">
                <?php the_title(); ?><br />
                <a href="<?php the_permalink() ?>">Read More!</a>
            </p>
        </div>
    <?php endwhile;?>
</div> 
```

我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T14:02:12.477

我已经想通了。我不小心忘记指定正确的路径：

```
<?php
    wp_enqueue_script('jquery.cycle.all.min', '/wp-content/themes/andrewhavens/jquery.cycle.all.min.js', array('jquery'));
    wp_enqueue_script('featured-work-slideshow', '/wp-content/themes/andrewhavens/featured-work-slideshow.js');
    wp_head();
?> 
```

本来应该

```
<?php
   wp_enqueue_script('jquery.cycle.all.min', '/wp-content/themes/andrewhavens/js/jquery.cycle.all.min.js', array('jquery'));
   wp_enqueue_script('featured-work-slideshow', '/wp-content/themes/andrewhavens/js/featured-work-slideshow.js');
   wp_head();
?> 
```

否则，它工作得很好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-09-27T18:54:12.810

扔一个 get_bloginfo("stylesheet_directory") 让你的生活更轻松

```
 <?php wp_enqueue_script('jquery.cycle.all', get_bloginfo("stylesheet_directory") . '/js/jquery.cycle.all.js', array('jquery')); ?> 
```

# reporting - 通过 RCP-Designer 设置语言环境

> ID：925986
> 
> 赞同：0
> 
> 时间：2009-05-29T13:33:42.910
> 
> 标签：reporting, locale, birt

BIRT 的报告文件中是否有一个选项可以强制执行语言环境？无论如何，我希望我的报告有一个德国数字格式。

提前致谢！：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-15T17:10:05.853

语言环境将由引擎从您的设计中呈现报告文档来决定。这允许设计在部门和地理上可以跨企业移植。

您可以对报表中的元素应用数字格式掩码吗？如果您想始终使用某种格式的数字，这是要走的路。单击数据元素或标签并选择“格式编号”属性组。从那里您可以通过一组标准选项调整数字格式或应用特定掩码。这将确保一致的数字，无论是谁或什么从您的设计中生成报告文档。

# sql-server-2005 - 以编程方式确定数据库上的可用空间？

> ID：925988
> 
> 赞同：6
> 
> 时间：2009-05-29T13:33:43.970
> 
> 标签：sql-server-2005, shrink

好的，我试过四处寻找这个答案，但没有运气。我在工作中的 SQL Server 上有大约 50 个数据库，我几乎每天都必须检查这些数据库是否可以通过收缩来释放任何空间。我们的驱动器往往会填满很多，所以这就是为什么它几乎是每天的任务。

有没有一种快速的方法来检查哪些数据库实际上有可用空间？有谁知道可以生成每个数据库列表的系统/自定义存储过程或系统视图，以及可以在该数据库上缩小多少可用空间？

顺便说一句，使用sql server 2005。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T14:09:29.717

* * *

为每个数据库运行**sp_spacedused ：**

```
--temporary table to hold database names
CREATE TABLE #Databases (name varchar(255))

INSERT INTO #Databases
SELECT name FROM master..sysdatabases

DECLARE abc CURSOR FOR
   SELECT name FROM #Databases

DECLARE @name varchar(255)
DECLARE @sql nvarchar(1024)

OPEN abc

FETCH NEXT FROM abc INTO @name

WHILE @@FETCH_STATUS = 0 
BEGIN
   --build sql to switch to that database...
   SET @sql = 'USE '+@name
   PRINT @sql
   EXECUTE (@sql)

   --and run spaceused on it
   SET @sql = 'EXECUTE sp_spaceused @UpdateUsage=True'
   PRINT @sql
   EXECUTE (@sql)

   FETCH NEXT FROM ABC INTO @name
END

CLOSE abc
DEALLOCATE abc
DROP TABLE #Databases 
```

* * *

## 样本奇异结果

**执行 T-SQL：**

```
USE Contoso
EXECUTE sp_spaceused @UpdateUsage=True 
```

**结果：**

```
database_name: Contoso
database_size:     85.13 MB
unallocated_space: 15.41 MB

reserved:         70,368 KB (68.7 MB)
data:             42,944 KB (41.9 MB)
index_size:       24,200 KB (23.6 MB)
unused:            3,224 KB ( 3.1 MB) 
```

**收缩：**

```
DBCC SHRINKDATABASE (Contoso) 
```

**再次检查空间：**

```
EXECUTE sp_spaceused @UpdateUsage=True 
```

**结果：**

```
database_name: Contoso
database_size:     69.81 MB
unallocated_space:  0.20 MB

reserved:         70,256 KB (68.6 MB)
data:             43,024 KB (42.0 MB)
index_size:       24,200 KB (23.6 MB)
unused:            3,032 KB ( 3.0 MB) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T14:04:51.083

答案是不必担心数据库中有多少可用空间，而是运行每晚或每周的维护任务来运行压缩。很可能你没有压缩你的日志文件（这是我通常增长最快的地方）。

运行完整备份，然后使用 TRUNCATE_ONLY 运行事务日志备份，完成后，在日志文件和数据库上运行 DBCC SHRINKFILE()。

然后，您只需监控总可用磁盘空间，而不是单个数据库的增长。

[SQL Server 收缩数据库](http://msdn.microsoft.com/en-us/library/aa933076(SQL.80).aspx)。在此之前，您绝对必须执行完整备份和事务日志备份。

您可以通过运行“select * from master.dbo.sysdatabases”和运行“select * from [dbname]..sysfiles”来获取有关加载的各个文件的信息。我不是 100%，我几乎一年没有接触过 SQL Server 实例，sysfiles 可能在“主”数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T13:39:31.570

可能在 WMI 或 SQL 视图中。但我要问 - 与购买一些磁盘驱动器相比，您每天花在这个时间上的时间成本如何？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T16:12:43.673

您可以使用 sp_spaceused 并使用其结果，也可以查看 sys.allocations_units 表并计算已使用的总页数。您不应该查看“数据库”级别，而是查看文件级别，因为有些可能有多个 NDF。从 sys.database_files 开始查看数据库文件中的所有文件。大小列将包含数据库中的总页数。汇总 sys.allocation_units 中的总页数以获取已使用的页数：

```
with sum_au as (
select data_space_id
    , sum(total_pages) as total_pages
    from sys.allocation_units au 
    group by data_space_id)
select ds.name
    , df.size
    , total_pages as in_use 
    from sys.database_files df
    join sys.data_spaces ds on df.data_space_id = ds.data_space_id
    join sum_au au on au.data_space_id = ds.data_space_id 
```

# objective-c - Objective-c：NSString 到枚举

> ID：925991
> 
> 赞同：25
> 
> 时间：2009-05-29T13:34:00.053
> 
> 标签：objective-c, cocoa, enums

所以，我有这个定义：

```
typedef enum {
    red = 1,
    blue = 2,
    white = 3
} car_colors; 
```

然后，我有一个 car_colors 类型的变量： car_colors myCar;

问题是，我在 NSString 中接收到汽车的颜色。它必须是一个 NSString，我无法改变它。如何从 NSString 转换为 car_colors 类型？

```
NSString *value = [[NSString alloc] initWithString:@"1"];
myCar = [value intValue]; // <-- doesn't work 
```

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-07-26T19:48:14.207

这是一个使用`NSDictionary`和现有枚举的实现

在 .h 文件中：

```
typedef NS_ENUM(NSInteger, City) {
    Toronto         = 0,
    Vancouver       = 1
 };

@interface NSString (EnumParser)
- (City)cityEnumFromString;
@end 
```

在 .m 文件中：

```
@implementation NSString (EnumParser)

- (City)cityEnumFromString{
    NSDictionary<NSString*,NSNumber*> *cities = @{
                            @"Toronto": @(Toronto),
                            @"Vancouver": @(Vancouver),
                            };
    return cities[self].integerValue;
}

@end 
```

示例用法：

```
NSString *myCity = @"Vancouver";
City enumValue = [myCity cityEnumFromString];

NSLog(@"Expect 1, Actual %@", @(enumValue)); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-29T14:27:02.550

与其使用数组，不如使用字典；您将颜色 NSString 作为键，并返回您想要的任何 NSNumber。就像是; （为了清楚起见，长篇大论）。

```
NSDictionary *carColourDictionary = @{@"Red": @1,
                                      @"Blue": @2,
                                      @"White": @3};

// Use the dictionary to get the number
// Assume you have a method that returns the car colour as a string:
// - (NSString *)colourAsString;
int carColour = carColourDictionary[object colourAsString]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-29T13:52:02.310

您也可以将值放入数组中。

```
NSArray *carColorsArray = @[@"red", @"blue", @"white"]; 
```

然后，您可以使用 indexOfObject 来获取特定字符串的索引。

```
car_colors carColor = [carColorsArray indexOfObject:@"blue"] + 1; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-09-05T21:22:28.810

这里有很多很好的答案：[Converting between C enum and XML](https://stackoverflow.com/questions/1242914/converting-between-c-enum-and-xml)

它们基本上与 Abizern 的相同，但如果您的应用程序经常进行这种字符串到枚举的转换，它们会更干净且更易于使用。有一些解决方案可以将字符串和枚举定义保持在一起，以及使每个转换成为单个、易于阅读的代码行的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-12-08T11:26:59.243

```
// ...
typedef enum {
    One = 0,
    Two,
    Three
} GFN;
// ...
#define kGFNPrefix @"GFNEnum_"
// ...
+ (NSString *)gfnToStr:(GFN)gfn {
    return [NSString stringWithFormat:@"%@%d", kGFNPrefix, gfn];
}

+ (GFN)gfnFromStr:(NSString *)str {
    NSString *gfnStr = [str stringByReplacingOccurrencesOfString:kGFNPrefix withString:@""];
    return [gfnStr intValue];
}
// ... 
```

我的选择 =)

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2009-05-29T15:09:05.477

I found the solution:

```
if ([car_color isEqualToString:@"1"])
        return red;
if ([tipo_pdi isEqualToString:@"2"])
        return blue;
if ([tipo_pdi isEqualToString:@"3"])
        return white; 
```

But I don't like this 'if' style, what if I had a thousand colors? Isn't there a more automatic solution?

# html - HTML 属性名称中允许使用哪些字符？

> ID：925994
> 
> 赞同：78
> 
> 时间：2009-05-29T13:34:15.997
> 
> 标签：html, specifications, name-value

在 HTML 属性**名称=值**对中，“名称”部分允许使用哪些字符？..... 查看一些[常见属性](http://www.w3.org/TR/REC-html40/index/attributes.html)，似乎只使用了字母（az 和 AZ），但还允许使用哪些其他字符？...可能是数字 (0-9)、连字符 (-) 和句点 (.) ... 有这方面的规范吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-05-29T14:01:05.660

这取决于您所说的“允许”是什么意思。每个标签都有一个固定的有效属性名称列表，并且在 html 中它们不区分大小写。在一个重要的意义上，只有正确序列中的这些字符是“允许的”。

另一种看待它的方式是，浏览器会将哪些字符视为有效的属性名称。这里最好的建议来自 HTML 5 的解析器规范，可以在这里找到：[https ://html.spec.whatwg.org/multipage/syntax.html#attributes-2](https://html.spec.whatwg.org/multipage/syntax.html#attributes-2)

它表示除制表符、换行符、换页符、空格、斜线、大于号、引号、撇号和等号之外的所有字符都将被视为属性名称的一部分。就个人而言，我不会尝试推动这种极端情况。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-05-29T13:39:58.230

假设您在谈论 XHTML，则适用 XML 规则。

见[http://www.w3.org/TR/2008/REC-xml-20081126/#NT-Name](http://www.w3.org/TR/2008/REC-xml-20081126/#NT-Name)

名称和令牌

```
[4]     NameStartChar      ::=      ":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]
[4a]    NameChar       ::=      NameStartChar | "-" | "." | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]
[5]     Name       ::=      NameStartChar (NameChar)*
[6]     Names      ::=      Name (#x20 Name)*
[7]     Nmtoken    ::=      (NameChar)+
[8]     Nmtokens       ::=      Nmtoken (#x20 Nmtoken)* 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-11-30T19:38:30.360

自从提出这个问题以来，网络已经发展了很多。Web 组件（自定义元素）的作者很可能在这里尝试了解在自定义元素上定义属性时可以使用哪些有效名称。

这里有几个答案是部分正确的，所以我将尝试汇总它们并根据最近的规范更新它们。

首先，在 HTML5 中，属性名称可以以大多数字符开头，并且比以前的 HTML 版本更宽松。@S.Lott 的答案对于 HTML 2 和 XHTML 是正确的，但对于 HTML5 则不然。

对于 HTML5：（[规范](https://www.w3.org/TR/2011/WD-html5-20110525/syntax.html#attributes-0)）

> 属性名称必须包含一个或多个字符，而不是空格字符、U+0000 NULL、U+0022 引号 (")、U+0027 APOSTROPHE (')、U+003E GREATER-THAN SIGN (>)、U+ 002F SOLIDUS (/) 和 U+003D 等号 (=) 字符、控制字符和任何未由 Unicode 定义的字符。在 HTML 语法中，属性名称，甚至是外来元素的名称，都可以用任何小写和大写字母的混合，是属性名称的 ASCII 大小写不敏感匹配。

话虽如此，这里的其他评论者是正确的，当在内置元素上使用不在其有效属性列表中的属性时，您在技术上违反了规范。浏览器作者对此有很大的容忍度，所以在实践中它并没有（太多？）伤害。许多库利用它来增强常规 HTML 标记，这会引起一些混乱，因为它在技术上不是有效的 HTML。HTML5 通过使用数据属性命名约定为属性中的自定义数据提供了一种机制。

这些规则对于自定义元素是不同的。

欢迎自定义元素作者为其元素实现他们喜欢的任何类型的属性，但属性的名称比 HTML5 更具限制性。实际上，[规范](https://html.spec.whatwg.org/multipage/custom-elements.html#custom-elements-core-concepts)要求属性名称遵循[XML 名称](https://www.w3.org/TR/xml/#NT-Name)限制：

> ASCII 符号和标点符号以及相当大的一组 Unicode 符号字符被排除在名称之外，因为它们在 XML 名称用于 XML 文档之外的上下文中作为分隔符更有用；提供该组为这些上下文提供了关于哪些内容不能成为 XML 名称的硬性保证。字符#x037E，GREEK QUESTION MARK，被排除在外，因为规范化后它变成了一个分号，这可能会改变实体引用的含义。
> 
> 名称和令牌
> 
> [4] NameStartChar ::= ":" | [AZ] | "_" | [az] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]
> 
> [4a] NameChar ::= NameStartChar | "-" | “。” | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]
> 
> [5] 名称 ::= NameStartChar (NameChar)*
> 
> [6] 名称 ::= 名称（#x20 名称）*
> 
> [7] Nmtoken ::= (NameChar)+
> 
> [8] Nmtokens ::= Nmtoken (#x20 Nmtoken)*

因此，对于自定义元素名称，您可以使用大写/小写字母数字、“_”下划线、“:”冒号或规范中调用的任何 unicode 字符作为起始字符，然后使用破折号“-”、“点”。 "、alpha 等...作为正文字符。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-29T13:44:39.500

也许我遗漏了一些东西，但我相信这个问题是基于错误的假设。在 HTML 中，属性是根据固定规范严格[定义的。](http://www.w3.org/TR/html4/index/attributes.html)如果您“编造”自己的属性名称，则您不再编写有效的 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T13:38:54.490

[w3.org](http://www.w3.org/TR/html4/index/attributes.html)中列出了允许的值。如果添加自定义属性，则不再编写 HTML。

# c# - 如何在 C# 代码中使用 WMI 启动脚本（vbs）？

> ID：925999
> 
> 赞同：1
> 
> 时间：2009-05-29T13:35:23.623
> 
> 标签：c#, wmi, win32-process

我需要在 ac# 代码中使用 WMI 来启动一个 Visual Basic 脚本文件。

我不太明白这段代码有什么问题？结果将始终为 8（未知故障）。但是例如notepad.exe可以正常启动。

```
 //Get the object on which the method will be invoked
        ManagementClass processClass = new ManagementClass("Win32_Process");

        //Create an array containing all arguments for the method
        object[] methodArgs = { "C:\\MyFolder\\Test.vbs arg1 arg2", null, null, 0 };

        //Execute the method
        object result = processClass.InvokeMethod("Create", methodArgs); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T14:06:02.937

脚本不是可执行文件 - 它们由 Windows Script Host 运行，因此您需要在脚本名称之前指定 cscript.exe 或 wscript.exe 的路径：

```
object[] methodArgs = {   
                        Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.System), "cscript.exe") + @" C:\MyFolder\Test.vbs arg1 arg2",
                        null,
                        null,
                        0
                      }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T13:56:52.207

我对这类事情了解不多，但认为您可能需要调用脚本主机并将其传递给 vbs 文件才能运行。************