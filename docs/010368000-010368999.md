# StackOverflow 问答 10368000-10368999

# knockout.js - 如何使用 knockout.js 将多个更改作为“单元”触发

> ID：10368001
> 
> 赞同：5
> 
> 时间：2012-04-28T22:12:42.977
> 
> 标签：knockout.js, knockout-2.0

我有一个小应用程序通过为组合框（选择）元素中的不同属性提供多种选择来过滤项目列表。一切工作正常选择和取消选择单个组合框元素，但由于我向“重置过滤器设置”引入了一个必需的按钮，它将所有组合框元素重置为空，我的性能很差。似乎每条修改组合框的语句都在触发完整列表的刷新。

我如何告诉敲除停止更新可观察对象，将所有组合框元素重置为 null，然后告诉敲除恢复更新或最初自己触发更新。

有任何想法吗？

谢谢安德烈亚斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T22:39:34.310

您可以在重置所有组合时暂停管理列表的计算属性（或属性）。

见[http://www.knockmeout.net/2011/04/pausing-notifications-in-knockoutjs.html](http://www.knockmeout.net/2011/04/pausing-notifications-in-knockoutjs.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T05:03:43.923

无耻地扩展 Niko 的评论，您应该使用[油门扩展器](http://knockoutjs.com/documentation/throttle-extender.html)。

添加`.extend({ throttle: 10 })`到我的计算声明中为我解决了这个问题：

```
// get only selected markets
self.SelectedMarkets = ko.computed(function() {
    return ko.utils.arrayFilter(self.Markets(), function(market) {
        return market.IsSelected() == 1; });
}).extend({ throttle: 10 }); 
```

# javascript - 如果数字在两个数字之间加/减 10 addclass

> ID：10368004
> 
> 赞同：6
> 
> 时间：2012-04-28T22:13:07.643
> 
> 标签：javascript, jquery, if-statement

## [http://jsfiddle.net/kM8xE/2/](http://jsfiddle.net/kM8xE/2/)

如果我有`div`s ​</p>

```
<div class="value">15</div>
<div class="value2">20</div>​ 
```

和 jQuery

```
var actual = $(".value").html();
var comparison = $(".value2").html(); 
```

如果它的 html 值在 html 的 +/-10 之间，`.isbetween`我如何添加类。为此，例如。一个介于 5 和 25 之间的值。`.value2``.value`

我不是很好，但我试过了，但它不起作用。

```
if(parseInt(actual)-10 <= parseInt(comparison) <= parseInt(actual)+10){
$(".value2").addClass("isbetween");
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-28T22:15:33.023

```
 if (Math.abs(actual - comparison) <= 10) {
    //they're within 10
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T22:23:30.640

这不起作用的原因是您不能像这样链接比较：

```
5 < x < 10 
```

在 Javascript（和其他具有类似 c 语法的语言）中，您必须进行两个单独的比较，并使用*布尔值和*运算符 ( `&&`) 将比较链接在一起：

```
var actualValue = parseInt(actual);
var comparisonValue = parseInt(comparison);

if(actualValue - 10 <= comparisonValue && comparisonValue <= actualValue + 10) {
    $(".value2").addClass("isbetween");
} 
```

另外，[不要重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。进行一次转换，并将其存储在局部变量中。这使代码更具可读性。

[这可以通过使用一个称为绝对值](http://en.wikipedia.org/wiki/Absolute_value)的概念变得更加简单。然后你可以做你的差异，看看它的*绝对值*是否小于或等于十。

```
var delta = Math.abs(parseInt(actual) - parseInt(comparison));

if(delta <= 10) {
    $(".value2").addClass("isbetween");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:19:06.220

您必须获取这两个值，将它们转换为数字，比较它们差异的绝对值，然后在满足您的条件时添加该类：

```
var v1 = +$(".value").text();
var v2 = +$(".value2").text();
if (Math.abs(v1 - v2) <= 10) {
    $(".value2").addClass("isbetween");
} 
```

# node.js - 强大的每个文件的上传进度

> ID：10368006
> 
> 赞同：3
> 
> 时间：2012-04-28T22:13:39.323
> 
> 标签：node.js, upload, progress

我正在使用强大的模块来上传文件。

使用它的 api，我们可以通过监听进度事件来获取整个请求和所有上传文件的接收和预期字节。

有没有办法单独获取每个文件的上传进度？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:36:32.933

您可以尝试查看这个流行的[jquery 文件上传插件](https://github.com/blueimp/jQuery-File-Upload)的方式

# android - 片段活动的最佳设计模式

> ID：10368008
> 
> 赞同：1
> 
> 时间：2012-04-28T22:13:54.800
> 
> 标签：android, actionbarsherlock

在 Ice Cream Sandwich/Honeycomb 出现之前，开发人员过去常常围绕活动制作逻辑流，以处理屏幕的 UI 交互。我面临的任务是制作一个组合选项卡/视图分页器，每个选项卡都充当片段活动。

最终结果是我的原始代码看起来很混乱，或者设计片段活动的方法不好！

考虑一下，一个活动管理一个屏幕，该活动控制该屏幕的所有 UI 方面。现在，通过使用 ActionBarSherlock，我将屏幕 UI 控件移动到片段活动的布局中，现在有一个带有选项卡处理机制的主要活动，用于从一个选项卡滑动到下一个选项卡，就像以前一样，开始意图启动另一个活动。

我的问题是：既然原始代码在片段活动中，那么拆分原始代码的最佳方法是什么？我曾考虑过使用处理程序在内部将消息从片段活动传递到主要活动，但事实证明这是我的感受，是错误的方法。

我为此使用 ActionBarSherlock。

已搜索但找不到此场景的具体示例以及如何处理它。

**编辑：**在 CommonsWare 发表评论后，这是意图，请查看[http://androiduipatterns.com](http://androiduipatterns.com) “Lewis Llewellyn 和 Facebook”屏幕截图上显示的第二张图片，这就是我想要实现的目标。

之前：`Activity`处理一个屏幕的 UI 方面。

现在：`SherlockFragmentActivity`使用`ViewPager`Tab-host，这是 apk 的“主要”活动，每个选项卡片段都从`SherlockFragment`. 每个选项卡现在都是一个带有 UI 控件的屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T22:43:51.720

恕我直言，每个片段都`ViewPager`与自己打交道，因为它不知道目前可能存在哪些其他片段。该片段中可能影响其他片段或整个活动的任何事件都可以通过 传递给托管活动`getActivity()`，如果您计划从多个活动托管此片段，则可能将其转换为接口。不需要`Handler`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T10:58:19.060

所以我想你想要的不是在不同的片段之间复制代码，对吗？在非常相似的片段的情况下，我所做的是使用我扩展的相同代码创建一个基本片段。我经常注意到的另一种选择是使用（静态）方法创建辅助类。在任何情况下，请确保永远不要从不同的片段调用片段。

# c++ - 我是 C++ 新手。所以请在下面的片段中帮助我

> ID：10368012
> 
> 赞同：1
> 
> 时间：2012-04-28T22:14:09.247
> 
> 标签：c++, turbo-c++

现在，当我尝试编译时`main.cpp`，我收到一个错误，`Undefined symbol add(int) in module main.cpp`请帮助我！

```
//main.cpp
#include<iostream.h> 
#include "addition.h"

int main()
{
add(4);
return (0);
} 
```

```
//add.cpp
 #include "addition.h"
 #include<iostream.h>
 void add(int a)
{
cout<<a<<endl;
} 
```

```
//addition.h
void add(int a); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T22:19:48.493

问题是 main() 使用 add()。并且 add 是在另一个编译单元 (add.cpp) 中定义的，这就是您收到错误消息的原因`Undefined symbol add(int)`。

您需要告诉编译器将两段代码和`link`它们一起编译：

简单的方法：

```
g++ main.cpp add.cpp 
```

漫长的道路：

```
# 1 Make the main object file
g++ -c main.cpp
# 2 Make the add object file
g++ -c add.cpp

# Link the object files into an executable.
g++ main.o add.o 
```

# opengl - OpenGL同时平移和绕局部轴旋转

> ID：10368017
> 
> 赞同：1
> 
> 时间：2012-04-28T22:15:04.763
> 
> 标签：opengl

我正在开发一个在其视口交互中与 MotionBuilder 具有相似功能的应用程序。它有三个按钮： 按钮 1 根据 X/Y 鼠标拖动围绕 X 和 Y 旋转视口。按钮 2 根据 X/Y 鼠标拖动来平移 X 和 Y 周围的视口。按钮 3 通过沿 Z 轴平移“缩放”视口。

代码很简单：

```
glTranslatef(posX,posY,posZ);
glRotatef(rotX, 1, 0, 0);
glRotatef(rotY, 0, 1, 0); 
```

现在，问题是如果我先平移，平移将是正确的，但旋转会跟随世界轴。我也试过先旋转：

```
glRotatef(rotX, 1, 0, 0);
glRotatef(rotY, 0, 1, 0);
glTranslatef(posX,posY,posZ); 
```

^ 旋转有效，但平移根据世界轴进行。

我的问题是，我怎样才能做到这两点才能实现代码片段 1 的翻译和代码片段 2 的旋转。

编辑我画了这个相当粗糙的图像来说明我所说的世界和局部旋转/翻译的意思。我需要相机围绕其局部轴旋转和平移。 [http://i45.tinypic.com/2lnu3rs.jpg](http://i45.tinypic.com/2lnu3rs.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:29:33.577

好的，图像使事情变得更加清晰。

如果您只是在谈论一个对象，那么您的第一个代码片段会很好，但对于相机来说就完全不同了。

由于在opengl中技术上没有对象作为“相机”，因此您在构建相机时所做的只是通过与您移动相机的方式相反的方式移动所有东西。即你没有在 Y 轴上将相机向上移动 +1，你只是在 y 轴上将世界移动 -1，这样就可以达到与拥有相机相同的视觉效果。

想象一下，您有一个位于 (Cx, Cy, Cz) 位置的相机，并且它具有 x/y 旋转角度 (CRx, CRy)。如果这只是一个普通对象，而不是相机，您可以通过以下方式对其进行转换：

```
glTranslate(Cx, Cy, Cz);
glRotate(CRx, 1, 0, 0);
glRotate(CRy, 0, 1, 0); 
```

但是因为这是相机，所以我们需要做这个操作的逆操作（我们只想通过 (-Cx, -Cy, 和 -Cz) 移动世界来模拟“相机”的移动。反转矩阵，您只需要对每个单独的变换进行相反的操作，并以相反的顺序进行。

```
glRotate(-CRy, 0, 1, 0); 
glRotate(-CRx, 1, 0, 0);
glTranslate(-Cx, -Cy, -Cz); 
```

我认为这将为您提供您在图像中提到的那种相机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T10:29:06.127

我建议你咬苹果，实现一个相机类来存储相机的当前状态（位置、视图方向、向上向量、右向量）并根据你的控制方案操纵该状态。然后您可以使用 gluLookAt() 设置投影矩阵。然后，操作的顺序变得不重要了。这是一个例子：

设 camPos 为相机的当前位置，camView 为它的视图方向，camUp 为上向量，camRight 为右向量。

要通过 moveDelta 平移相机，只需将 moveDelta 添加到 camPos。旋转有点困难，但如果你理解四元数，你就能很快理解它。

首先，您需要为两个旋转中的每一个创建一个四元数。我假设您的水平旋转始终围绕正 Z 轴（如果您愿意，它指向“天花板”）。令 hQuat 为代表水平旋转的四元数。我进一步假设您想要围绕其右轴旋转相机以进行垂直旋转（创建俯仰效果）。为此，您必须将水平旋转应用于相机的当前角度。结果是垂直旋转 hQuat 的旋转轴。总旋转四元数为 rQuat = hQuat * vQuat。然后将 rQuat 应用于相机的视图方向、向上和向右向量。

```
Quat hRot(rotX, 0, 0, 1);      // creates a quaternion that rotates by angle rotX about the positive Z axis
Vec3f vAxis = hRot * camRight; // applies hRot to the camera's right vector
Quat vRot(rotY, vAxis);        // creates a quaternion that rotates by angle rotY about the rotated camera's right vector
Quat rQuat = hRot * vRot;      // creates the total rotation
camUp = rQuat * camUp;
camRight = rQuat * camRight;
camView = rQuat * camView; 
```

希望这可以帮助您解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T02:11:52.970

glRotate 总是围绕原点工作。如果你这样做：

```
glPushMatrix();
glTranslated(x,y,z);
glRotated(theta,1,0,0);
glTranslated(-x,-y,-z);
drawObject();
glPopMatrix(); 
```

然后“对象”围绕 (x,y,z) 而不是原点旋转，因为您将 (x,y,z) 移动到原点，进行旋转，然后将 (x,y,z) 推回原点它开始了。

但是，我认为这不足以达到您所描述的效果。如果您总是希望针对当前参考框架进行转换，那么您需要自己跟踪转换矩阵。这就是人们使用基于四元数的相机的原因。

# php - cakephp 2.0 博客教程重定向顺序

> ID：10368019
> 
> 赞同：0
> 
> 时间：2012-04-28T22:15:18.930
> 
> 标签：php, cakephp

所以在博客 cakephp 2.0 教程中，有以下几行 [http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html)

```
<?php
public function edit($id = null) {
    $this->Post->id = $id;
    if ($this->request->is('get')) {
        $this->request->data = $this->Post->read();
    } else {
        if ($this->Post->save($this->request->data)) {
            $this->Session->setFlash('Your post has been updated.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to update your post.');
        }
    }
} 
```

为什么 $this->Session->setFlash('Your post has been updated.'); 去重定向线之前？一旦它被重定向，为什么会显示消息而不是反之亦然。首先重定向然后闪烁消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:45:26.247

> `exit()`除非您将第三个参数设置为 ，否则该方法将在重定向后发出`false`.

在这种情况下，`setFlash`将您的消息添加到会话中，然后可以在您重定向到的页面加载时显示在您的视图中。默认情况下`redirect`调用`exit`，所以你在它之后放置的任何东西都不会被执行。即使您将第三个参数设置为`false`， 的行为`setFlash`也不会改变。

当您希望消息只是页面的一小部分时，您可以使用它，例如您在 SO 上收到的“此帖子已被编辑”或“已发布新答案”消息。

如果您想在重定向**之前**显示 flash 消息（即在 HTML 中重定向），您可以使用`flash`控制器上的方法来代替（请注意，该消息将有一个完整的页面）：

> 与redirect() 一样，flash() 方法用于在操作后将用户引导至新页面。flash() 方法的不同之处在于它在将用户传递到另一个 URL 之前显示一条消息。
> 
> 第一个参数应该保存要显示的消息，第二个参数是 CakePHP 的相对 URL。CakePHP 将在转发用户之前显示 $message 的 $pause 秒。
> 
> 如果您希望使用闪现消息的特定模板，您可以在 $layout 参数中指定该布局的名称。

将首先显示显示您的消息的页面，然后在几秒钟后自动重定向。您可以选择将布局作为第四个参数传入，以更好地控制其外观。

```
$this->flash('Your post has been updated.', array('action' => 'index'), 5); 
```

[http://book.cakephp.org/2.0/en/controllers.html](http://book.cakephp.org/2.0/en/controllers.html)

# ios - 从 UITextField 收集发送的事件

> ID：10368023
> 
> 赞同：0
> 
> 时间：2012-04-28T22:15:47.780
> 
> 标签：ios, uitextfield

我如何`sent events`从一个地方的 UITextField 收集信息，或者我是否被迫为我打算使用的每个事件创建出口和操作？

![在此处输入图像描述](../Images/7e496b4678531f03d698cf74d6951991.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:56:55.030

如果我正确地回答了您的问题，则当此 UITextField 失去焦点（用户在其他地方点击）时，您需要从 UITextField 获取文本。为此，您需要：

1.  将您的班级声明为（在 yourClassName.h 文件中）
2.  在 yourClassName.m 文件中实现这个方法：

    ```
    - (void)textFieldDidEndEditing:(UITextField *)textField {
        NSString *someStringOrWhateverYouNeed = textField.text;   
    } 
    ```

任何时候用户按下键盘上的返回按钮，您的班级都会收到通知并调用此方法。

如果您需要从多个 UITextField 收集事件，您可以使用特定标签标记所有 textField 并创建一个 IBAction，如下所示：

```
- (IBAction)getTextFieldEvent:(id)sender {
    UITextField *currentTextField = (UITextField *)sender;
    switch (currentTextField.tag) {
        case 1:
            // some code here for textField with tag = 1
            break;
        case 2:
            // some code here for textField with tag = 2
            break;
        case 3:
            // some code here for textField with tag = 3
            break;
        default:
            // some default code here
            break;
    }
} 
```

对于不同的事件类型，我可以建议创建不同的 IBAction。如果您不需要更改 UITextField 的属性（例如字体等），那么您实际上不需要 IBOutlets。

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:28:14.480

使用相同的名称进行另一个 IBAction 连接。然后擦除重复的方法。两个文本字段都将连接到相同的 IBAction 方法。

# c# - Visual Studio：无法从代码访问资源

> ID：10368025
> 
> 赞同：5
> 
> 时间：2012-04-28T22:16:04.380
> 
> 标签：c#, .net, visual-studio, resources

我将几个文件（HTML、CSS 等）作为资源添加到我的 Visual Studio 项目中。根据 MSDN，我应该能够通过

```
MyProjectName.Properties.Resources.Filename 
```

不幸的是，IntelliSense 甚至不知道 MyProjectName 后面的 Properties 属性。如果我键入“MyProjectName.”，IntelliSense 会为我提供一些东西，但没有属性。我已经建立了这个项目，但没有任何改变。

如果这很重要：该项目不是我的 Visual Studio 解决方案的主/启动项目。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T22:22:25.817

您需要在此处添加它们：

1.  项目菜单
2.  MyProjectName 属性
3.  资源选项卡
4.  “点击此处创建资源”（如有必要）
5.  选择文件菜单
6.  添加资源

现在您可以使用`MyProjectName.Properties.Resources.Filename`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T22:24:51.053

从其属性中将文件作为资源：

```
BuildAction=Compile 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-28T22:22:41.310

看看这个[MSDN 论坛链接](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/baffedf2-95ec-44c4-9b02-0d1fb5f34d31)。我从中得到的是确保您的资源被[添加为资源](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=VS.80%29.aspx)并且命名空间的匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T22:19:13.333

你确定它们被标记为资源吗？右键单击并检查它们的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-12T21:30:05.400

有点令人困惑的是，Visual Studio 中有一个名为 Properties 的文件夹与 Resources 处于同一级别，但它被完全绕过了。

因此，虽然您的代码中的路径可能会通过`Solution_name.Properties.Resources.yourFile.png`此路径并不会反映在 Visual Studio 的解决方案资源管理器中使用的文件夹中，因为您可以直接在**Solution_name\Resources\yourFile.png**下找到图像。

并且仅仅添加一个文件并用鼠标移动资源不会让 Visual Studio 在你的代码中找到这个文件作为资源。所以你必须通过菜单*Project*，*Properties*（最低条目）？或单击`Alt`+ `F7`，突出显示资源。

现在单击***添加资源的向下钻取箭头，***而不仅仅是按钮的主要区域。这样做会打开**Add New Resource**的对话框窗口，但实际上您想单击***Add Existing File***。就是这样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-02T23:25:34.843

我知道这与答案所说的相反，但在 VS2013 上，我必须设置 BuildAction=Resource

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-27T23:56:13.060

对于其他人，也许检查 Resources.Designer 文件？

我在这条线上发现了一个差异

```
 System.Resources.ResourceManager("DemoApp.Properties.Resources", ... 
```

我已将项目名称更改为 Demo。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-07T18:31:43.997

我不确定它是否有帮助，但我所要做的就是创建一个新表单并向图片框添加一个图标。不知何故，解决了这个问题。

# mysql - 标志的哪种数据类型？

> ID：10368036
> 
> 赞同：6
> 
> 时间：2012-04-28T22:18:01.880
> 
> 标签：mysql, database, flags

我应该使用哪种数据类型作为标志（在 MySQL 中）？我只想检查用户是否在线。
我想到了一个[TINYINT](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)或[SET](http://dev.mysql.com/doc/refman/5.0/en/set.html)，它们都可以是 0 或 1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T22:21:30.523

`TINYINT`非常适合您的建议：

```
`status` tinyint(1) unsigned NOT NULL DEFAULT '0' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T22:23:28.417

Dear Tinyint 更适合 flag，因为它的 int 非常小，而且它也比其他的更节省您的字节。你也可以选择 char(1) 但我建议你选择 tinyint

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T22:27:22.277

TINYINT 与 MySQL 中的布尔类型相同，其中 0 为假，1 为真。您可以输入 true 或 false，它将被评估为 1 或 0。

# c++ - 未初始化为布尔 C++

> ID：10368037
> 
> 赞同：0
> 
> 时间：2012-04-28T22:18:11.633
> 
> 标签：c++, variables, initialization

我正在构建一个模板结构，我需要一些技巧来执行以下操作：

我有一个单维和二维链表，我需要首先构造每个没有数据的节点，然后我必须用文件中的数据填充它们。所以我需要`if(x == UNINITIALIZED OR NOT)`，因为数据可以是字符串、整数和双精度。如果检查，我找不到一个通用的空初始化器。我希望有办法做到这一点。

我试过了`if(x == NULL)`，，，，。他们都没有工作。`if(x == 0)``if(x == "")``if(x == void)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:23:31.673

如果您的节点代表指定的类型之一，您可以简单地使用模板、模板特化或重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T00:22:06.160

如果您只有这三种类型，则可以为已知类型创建专门的初始化函数。

```
template <class T>
class CNode {
public:
    CNode() {
       Init(m_Value);
    }

private:
    T m_Value;

    static void Init(T n) { n = 0; }  // Default catch for types that can be set to 0/NULL
    static void Init(bool b) { b = false; }
    static void Init(string str) { str = ""; }
}; 
```

当然，还有一些方法可以为模板函数指定类型细节，但我不记得了。我知道 Boost 使用这些，这将是一种在原始定义之外指定其他初始化方法的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T00:41:49.273

据我了解您的问题，我认为以下代码显示了使用两个[Boost](http://www.boost.org/)库的可能且有趣的解决方案：[Optional](http://www.boost.org/doc/libs/release/libs/optional/index.html)和[Tuple](http://www.boost.org/doc/libs/release/libs/tuple/index.html)：

```
#include <cassert>
#include <algorithm>
#include <iterator>
#include <list>
#include <string>
#include <boost/optional.hpp>
#include <boost/tuple/tuple.hpp>

int main()
{
    typedef boost::tuple<std::string, double, int> value_t;
    typedef boost::optional<value_t> node_t;

    std::list<node_t> nodes;

    // first construct every node with no data in them 
    std::fill_n(std::inserter(nodes, nodes.begin()), 5, node_t());

    // check all nodes have not been initialized yet, so they are in "null" state
    auto it = nodes.cbegin();
    while (it != nodes.cend())
    {
        assert(!it->is_initialized());
        ++it;
    }

    // add non-null initialized node
    // or fill with the data from a file, etc.
    node_t n("abc");
    nodes.insert(it, n); 
    assert(nodes.back().is_initialized());
} 
```

# node.js - JADE 中的算术运算符

> ID：10368040
> 
> 赞同：4
> 
> 时间：2012-04-28T22:18:32.390
> 
> 标签：node.js, express, pug

我正在使用带有 NOde.js 的 Jade 模板引擎。我有两个变量：

```
a = 0.0378
b = 0.1545 
```

在翡翠我做：

```
- var result = a + b*2 
```

当我这样做时，我得到一个非常奇怪的数字`#{result}`

**0.03780.309**

它似乎将数字连接为字符串。有人可以告诉我如何在 Jade 中使用算术运算符吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T22:24:08.540

您确定`a`(and also `b`) 是数字而不是字符串吗？

如果是字符串，则需要通过以下方式将其转换为数字`parseFloat`：

```
- var result = parseFloat(a)+parseFloat(b)*2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-05T11:02:37.317

```
 h2 Jade的 operation
    - var a = 8
    - var b = 2
    p #{+a+b}
    p #{+a-b}
    p #{+a*b}
    p #{+a/b} 
```

# android - Android：广播接收器和服务问题

> ID：10368041
> 
> 赞同：0
> 
> 时间：2012-04-28T22:18:33.737
> 
> 标签：android, service, android-intent, broadcast

我编写了一个简单的活动来测试服务和广播接收器以及与之配套的服务。为了知道它是否正常工作，我在主要活动中设置了一个 Toast，以便在调用 OnReceive() 方法后显示。但对于我的生活，我无法让它发挥作用。

这些是代码：

公共类 ServicesAndBroadcastIntentActivity 扩展 Activity {

```
private Toast test;
private Intent intent;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    intent = new Intent(this,serviceD.class);
    test = Toast.makeText(this,"Test",Toast.LENGTH_LONG);
    test.setGravity(Gravity.CENTER,0,0);
}

private BroadcastReceiver broadcastReceiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context context, Intent intent) {
        test.setText((intent.getStringExtra("EXTRA_MSG")));
        test.show();
    }
};

@Override
public void onResume(){
    super.onResume();
    startService(intent);
    registerReceiver(broadcastReceiver, new IntentFilter(serviceD.BROADCAST_ACTION));
}

@Override
public void onPause() {
    super.onPause();
    unregisterReceiver(broadcastReceiver);
    stopService(intent);        
} 
```

}

公共类 serviceD 扩展服务{

```
private Intent intent;
static final String BROADCAST_ACTION = "com.mejg.ServicesAndBroadcastIntent";

public void onCreate() {
    super.onCreate();
    intent = new Intent(BROADCAST_ACTION);  
}

public void onStart(){
    intent.putExtra("EXTRA_MSG","hola");
    sendBroadcast(intent);
    stopSelf();
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:22:06.707

你`startService()`之前打过电话`registerReceiver()`。两者都是异步操作，但它们仍然可能按顺序发生。因此，`onStart()`您的服务将在`registerReceiver()`其工作之前被调用，这意味着您的广播在您的接收器设置之前就结束了。

对于这种实验，我建议设置一个基本的 UI（例如，一个非常大的按钮）并在`startService()`按下按钮时进行调用。

此外，由于服务调用`stopSelf()`，您不需要`stopService()`从活动中调用。

此外，您可能会考虑`LocalBroadcastManager`为此使用相同的基本语法，具有更好的性能和安全性，因为它都保留在您的流程中。

**更新**

此外，也`onStart()`已被弃用两年多，无论如何，您的方法签名是错误的。请使用`onStartCommand()`, 和正确的参数。

也同样，`@Override`在覆盖方法时使用，以帮助您捕捉这些问题。

# .htaccess - .htaccess 404 错误页面相关 url

> ID：10368042
> 
> 赞同：3
> 
> 时间：2012-04-28T22:18:43.663
> 
> 标签：.htaccess

我正在尝试创建一个自定义 404 页面，并且我想在 .htaccess 页面中使用页面的相对路径。但它不起作用。对于完整的路径，我得到了结果。有什么方法可以使相对路径起作用吗？我在 .htaccess 文件中有这个：

```
ErrorDocument 404 /notfound.php
```

# mysql - 如果存在，则替换 mysql 数据库表

> ID：10368044
> 
> 赞同：0
> 
> 时间：2012-04-28T22:18:49.683
> 
> 标签：mysql

我正在使用以下内容将一组列添加到我的 mysql 数据库中，我遇到的问题是，如果表中已经存在该列，它就会停止并抛出错误。如果它们已经存在，是否可以替换这些列？

```
 ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab1` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab2` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab3` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab4` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab5` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab6` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab7` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab8` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromansupplier_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalsupplier_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaltype_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansdesign_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetian_slatwidth_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab9` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `room_name_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `curtains_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `blinds_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `trackspoles_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `heading_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `shutters_yesno_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `voiles_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricsupplier_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabricdesign_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `fabriccolour_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromandesign_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rollerromancolour_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `rolltype_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticaldesign_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `verticalcolour_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiansupplier_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `venetiancolour_tab10` VARCHAR( 255 ) NOT NULL;
    ALTER TABLE `rok5g_chronoforms_data_editcustomer` ADD `notes_tab10` VARCHAR( 255 ) NOT NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:21:51.907

[MySQL 更改语法以删除列（如果存在）](https://stackoverflow.com/questions/173814/mysql-alter-syntax-to-drop-a-column-if-it-exists)

# android - Android Google Play 市场更改了应用程序中的权限现在不允许更新

> ID：10368045
> 
> 赞同：0
> 
> 时间：2012-04-28T22:18:51.880
> 
> 标签：android, google-play

我添加了

```
uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"
uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" 
```

到已发布的应用程序。

现在在 Google Play 中，它会将其识别为已安装的应用程序，引导用户进入“打开”或“更新”屏幕 OK，“接受并下载”屏幕 OK，但随后会弹出一个对话框，提示该应用程序未安装。

有人从之前更新清单中看到过这个吗？

它是一个已知的错误还是我可以改变其他东西来打破这个？

更新：

更糟糕的是，现在 Google Play 将我从“更新”带到一个屏幕，显示“此应用的权限已更改为允许.....”

并且只有一个按钮说“继续”，这使用户再次为他们已经购买的应用程序付费！！！

# javascript - 代码工作 jsfiddle 不能在 Dreamweaver 上工作

> ID：10368047
> 
> 赞同：0
> 
> 时间：2012-04-28T22:19:08.333
> 
> 标签：javascript, html, css, dreamweaver, jsfiddle

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:30:29.037

Your code is failing for two reasons. Firstly, there are two illegal characters at different places in your code. The one you can see which appears next to the button when you run the page, and the second, which is causing an error in the JavaScript, after the webkitTransitionEnd event listener. Secondly, when you try to add the event listeners to your button in the head of your document, it fails because the DOM has not registered with the browser yet.

The following code should work. You might also consider looking at the [jQuery document ready function](http://www.learningjquery.com/2006/09/introducing-document-ready).

```
<!DOCTYPE>
<head>
<style>
.animate {
    -webkit-transition-property: -webkit-transform;
    -webkit-transition-duration: 1s;
    -webkit-transition-timing-function: linear;
}

.initial {
    -webkit-transform: rotate(0deg);
}

.final {
    -webkit-transform: rotate(360deg);
}​
</style>

</head>

<body>
<button type="button" id="button" class="animate initial">Click me!</button>​

<script>
document.getElementById('button').addEventListener('click', function()
{
    this.setAttribute('class', 'animate final');
});

document.getElementById('button').addEventListener('webkitTransitionEnd', function() {
    this.setAttribute('class', 'initial');
});
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:14:32.727

Are you trying to view the site in the dreamweaver browser? You are using `-webkit` properties. These will only work in webkit browsers such as chrome or safari. Similarly, `-moz` tags will only work in firefox.

I assume dreamweaver doesn't read the `-webkit` tags. Try using `-o` tags for opera, `-webkit` for safari and chrome, `-moz` for firefox and `-ms` for IE. Chrome and safari will read -webkit css but ignore `-moz` and `-o` since they don't know how to read it.

W3 schools has some good examples of supporting all browsers except IE: [http://www.w3schools.com/css3/tryit.asp?filename=trycss3_transition4](http://www.w3schools.com/css3/tryit.asp?filename=trycss3_transition4) [http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

The `transform` css property (`-webkit-transform` in your code) will work in IE if you add `-ms-transform`: [http://www.w3schools.com/css3/css3_2dtransforms.asp](http://www.w3schools.com/css3/css3_2dtransforms.asp)

# html - 对齐 div 中的输入字段

> ID：10368049
> 
> 赞同：1
> 
> 时间：2012-04-28T22:19:12.953
> 
> 标签：html, css

我已经尝试了一切来对齐这些框，所以它们从同一个地方开始向下。我不确定将哪个 div 放入我的样式表

```
 <div class="boxes">
 <p class="h3"> You are able to add up to 3 addresses.
 Please select the type of address, using the following guide
 <ul>
 <li>H: Permanent home address</li>
 <li>P: Postal address (where you will be from June to September)</li>
 <li>L: Local address (where you currently live)</li>
 </ul>
 </p>

<div id="address">

<div id="input1" style="margin-bottom:4px;" class="input">
Street<span class="required">*</span>
<input name="Street[]"  type="text" >
</div>

<div id="input2" style="margin-bottom:4px;" class="input">
Line2
<input name="Line2[]"  type="text" >
</div>

<div id="input3" style="margin-bottom:4px;" class="input">
Line3
<input name="Line3[]"  type="text" > 
</div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T22:44:22.423

修改了您的 HTML，将标签/关联文本包装在实际`label`元素中，为这些元素添加了一个`for`属性，并为这些元素添加了一个相应`id`的属性`input`：

```
<div class="boxes">
    <p class="h3">
         You are able to add up to 3 addresses. Please select the type of address, using the following guide
        <ul>
            <li>H: Permanent home address</li>
            <li>P: Postal address (where you will be from June to September)</li>
            <li>L: Local address (where you currently live)</li>
        </ul>
    </p>
    <div id="address">
        <div id="input1" style="margin-bottom:4px;" class="input">
            <label for="street">Street<span class="required">*</span></label><input name="Street[]" id="street" type="text">
        </div>
        <div id="input2" style="margin-bottom:4px;" class="input">
             <label for="line2">Line2</label><input id="line2" name="Line2[]" type="text">
        </div>
        <div id="input3" style="margin-bottom:4px;" class="input">
             <label for="line3">Line3</label><input id="line3" name="Line3[]" type="text">
        </div>
    </div>
</div>​ 
```

以下 CSS 有效：

```
#address label {
    display: inline-block;
    width: 5em;
    text-align: right;
    padding-right: 0.5em;
}
#address input {
    display: inline-block;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/E76Xh/1/)。

在上面，一旦文本被包装在一个标签中（成为`label`元素），它就可以被分配`display: inline-block;`，然后可以被赋予一个`width`. `label`此外，从 . 的关闭和 . 的开头之间删除了空格`input`，以防止 HTML 文件中的空格导致两个元素之间出现任何空格。

# javascript - 在 CloudMade 地图上高效地绘制大量标记

> ID：10368053
> 
> 赞同：1
> 
> 时间：2012-04-28T22:19:27.937
> 
> 标签：javascript, json, performance, cloudmade

所以我正在开发一个使用 CloudMade JavaScript 地图的网站。我必须加载地图，然后绘制大约 14,000 个标记。该网站的重点是可视化整个美国的标记（它们每个都用不同的颜色绘制）。因为我正在这样做，所以我不能使用现有的集群工具。

`map.addOverlay(MyMarker)`最初，我使用 PHP 从数据库中提取数据点，并使用该函数将它们一一绘制在地图上。这花了非常长的时间，所以我改变了我的方法。现在我将所有数据都保存在一个 JSON 文件中，并使用以下 JavaScript 代码绘制这些点：

```
 $(document).ready(function(){
            var url="m/results.json";
            $.getJSON(url,function(json){
                $.each(json.posts,function(i,post){
                    var myMarkerLatLng = new CM.LatLng(post.Latitude,post.Longitude);
                    var myMarker = new CM.Marker(myMarkerLatLng, {
                        title: post.City + ", " + post.State,
                    });

                    map.addOverlay(myMarker);
                });
            });
        }); 
```

虽然这要好得多，但我希望它更快。目前它在大约 8 秒内加载，但我需要它是实时的。为了使网站更快，我遵循了 Google 的 Web 性能指南，[https://developers.google.com/speed/docs/best-practices/rules_intro](https://developers.google.com/speed/docs/best-practices/rules_intro)。但是在遵循这些约定时，我在文件末尾运行了上面的代码。这允许加载整个网页（包括地图），但它会停顿几秒钟，然后一次绘制所有标记。

有关使其更快的任何提示或建议？

PS - 我最初加载了整个美国的地图。这意味着我必须在初始加载时绘制所有这些 =/. 不幸的是，没有办法解决这个问题。

# trigger.io - 源文件夹“src”不存在 - 你运行 forge create 了吗？

> ID：10368055
> 
> 赞同：1
> 
> 时间：2012-04-28T22:19:32.333
> 
> 标签：trigger.io

今天刚刚下载了适用于 Windows 的 3.3.0 版。我安装了 python 并尝试使用 forge create 开始我的第一个应用程序，但我在错误日志中得到以下信息：

```
2012-04-28 18:03:28,285 [   INFO] Forge tools running at version 3.3.0
2012-04-28 18:03:28,288 [  DEBUG] Forge build tools version: 3.3.0
2012-04-28 18:03:28,288 [  DEBUG] main: {"server": "https://trigger.io/api/"}
2012-04-28 18:03:28,299 [  DEBUG] GET https://trigger.io/api/version_check/3/3/0/
2012-04-28 18:03:29,661 [  DEBUG] checking API response for success or error
2012-04-28 18:03:29,661 [   INFO] Update result: you already have the latest tools
2012-04-28 18:03:44,101 [  DEBUG] GET https://trigger.io/api/auth/loggedin
2012-04-28 18:03:44,279 [  DEBUG] checking API response for success or error
2012-04-28 18:03:44,279 [  DEBUG] already authenticated via cookie - continuing
2012-04-28 18:03:44,279 [   INFO] Registering new app "helloworld" with trigger.io...
2012-04-28 18:03:44,279 [  DEBUG] POST https://trigger.io/api/app/
2012-04-28 18:03:56,368 [  DEBUG] checking API response for success or error
2012-04-28 18:03:56,368 [   INFO] Fetching initial project template
2012-04-28 18:03:56,368 [  DEBUG] already authenticated - continuing
2012-04-28 18:03:56,368 [  DEBUG] GET https://trigger.io/api/app/xxx/initial_files/
2012-04-28 18:03:56,579 [  DEBUG] unzip is available, using it
2012-04-28 18:03:56,782 [  DEBUG] unzip output
2012-04-28 18:03:56,782 [  DEBUG] Can't execute /c/Program Files/Common Files/Symbian/tools/unzip.pl.

2012-04-28 18:03:56,782 [  DEBUG] Extracted initial project template
2012-04-28 18:03:56,782 [  DEBUG] Removed downloaded file ".\initial.zip"
2012-04-28 18:03:56,782 [   INFO] Building app for the first time...
2012-04-28 18:03:56,782 [  ERROR] Source folder "src" does not exist - have you run forge create yet? 
```

是否假设在 Symbian 文件夹中寻找解压缩？

不知道如何解决这个问题，任何帮助将不胜感激......

谢谢，EE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:55:00.213

从输出中的这些行来看，使用的“解压缩”版本似乎与我们的工具所期望的不同：

```
2012-04-28 18:03:56,579 [  DEBUG] unzip is available, using it
2012-04-28 18:03:56,782 [  DEBUG] unzip output
2012-04-28 18:03:56,782 [  DEBUG] Can't execute /c/Program Files/Common Files/Symbian/tools/unzip.pl. 
```

这导致基本模板应用程序未解压缩（创建 src 目录），因此出现错误。

您能否尝试从 PATH 中删除“/c/Program Files/Common Files/Symbian/tools/unzip.pl”并重试“forge create”

# javascript - IE9 中的“SCRIPT5039：重新声明 const 属性”

> ID：10368057
> 
> 赞同：5
> 
> 时间：2012-04-28T22:19:36.183
> 
> 标签：javascript, html, internet-explorer, internet-explorer-9

这已经被问过了，但是那里的解决方案对我没有帮助。这到底是什么意思？我的常规 HTML 页面使用“脚本”标签来加载我的 main_script.js 文件，我要做的第一件事是：

```
var internetExplorerSucks = 30; 
```

使用的变量称为 FPS，但我认为它可能已被某个随机默认全局变量占用，因此我将其重命名为显然尚未占用的变量。仍然无法正常工作。我在 IE 调试控制台中收到此错误：

```
SCRIPT5039: Redeclaration of const property 
main_script.js, line 1 character 1 
```

我尝试通过取出“var”使其成为全球性的，但仍然没有用。应该注意的是，这不在任何函数中，只是文件中的第一行代码。

一些背景知识：所有这些代码都可以在 Windows、OS X 和 Linux 上的 Chrome、Firefox 和 Safari 中完美运行。IE 是唯一无法在其上运行的浏览器。这个项目涉及使用 HTML5 画布，我至少要在 IE 9 中显示（我使用的是版本 9），但这段代码根本不直接与画布相关。事实上，我似乎无法在 main_script.js 文件中声明任何变量。但是，我能够创建函数而不会遇到错误。那是我必须做的吗？把所有东西都放在一个函数中（这会涉及到很多移动的东西）？

无论如何，感谢您的帮助。

PS Internet Explorer 是一场噩梦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:51:15.207

我在我的代码中遇到了同样的问题，结果发现 IE 显示错误的行是重新声明出现。就我而言，这是我稍后在代码中使用的历史记录。您应该检查整个代码以重新声明常量。您可以尝试注释掉部分代码并查看它何时抛出该错误。

# c++ - STL list::insert 的参数

> ID：10368060
> 
> 赞同：2
> 
> 时间：2012-04-28T22:20:02.833
> 
> 标签：c++, stl, iterator, pass-by-value

STL list::insert 的语法如下 -

```
 iterator
  insert(iterator __position, const value_type& __x); 
```

为什么要传递**迭代器**而不是对迭代器的**引用**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:50:00.593

允许实现通过 const 引用而不是按值传递迭代器。没有相关的语义差异。

在这种情况下，按值传递稍微更有效。该`iterator`对象包含一个指向堆上列表元素对象的指针。请记住，通过引用传递本质上是在幕后通过指针传递。（虽然引用*与*指针不同，但在跨越实际函数调用边界时，没有其他可行的实现。）

因此，按值传递意味着传递了指向堆的指针，而通过引用传递意味着传递了指向指针`iterator`，然后在`insert`函数内部需要两个间接。（这在理论上确实取决于 ABI，但无论如何传递值不会有缺点。）

传递语义的快速说明：

```
template< typename param >
void same_params( param a, param b ) {
    std::cout << ( &a == &b ) << '\n';
}

int main() {
    int const five = 5;
    same_params< int const & >( five, five ); // true
    same_params< int const & >( five, 6 ); // false
    same_params< int const & >( five, 5 ); // unspecified
    same_params< int const & >( 5, 5 ); // unspecified

    same_params< int >( five, five ); // false (for any arguments)
} 
```

[http://ideone.com/2mC07](http://ideone.com/2mC07)

如果它没有传递指针，就没有办法`same_params< int const & >`工作。

# asp.net-mvc - 更新asp.net MVC 3中的一行

> ID：10368061
> 
> 赞同：1
> 
> 时间：2012-04-28T22:20:17.200
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我有一个这样的编辑操作：

```
[HttpPost]
public ActionResult Edit(UserModel user1)
{
    if (ModelState.IsValid)
    {
        UserManager um = new UserManager();
        String mail = User.Identity.Name;
        long id = um.getUserIDByemail(mail);
        user user = db.users.Single(u => u.user_id == id);
        user.name = user1.name;
        user.cellno = user1.cellno;
        db.users.Attach(user);
        db.ObjectStateManager.ChangeObjectState(user, EntityState.Modified);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(user1);
} 
```

我已经得到了我想要更新的用户对象。user 的两个属性 ( `name`, `cellno`) 来自一个视图。当我运行它时，我得到一个错误：

> 无法附加该对象，因为它已经在对象上下文中。一个对象只有在它处于未更改状态时才能重新附加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:23:29.353

我认为您可以删除 Attach 并且它应该可以工作。

# java - 创建对象和多态

> ID：10368068
> 
> 赞同：7
> 
> 时间：2012-04-28T22:20:59.417
> 
> 标签：java, design-patterns, polymorphism

我想避免使用标记类和大 if-else 块或 switch 语句，而是使用具有类层次结构的多态性，我认为这是更好的做法。

例如，如下所示，执行方法的选择仅依赖于 Actor 类型对象的一个​​字段。

```
switch(actor.getTagField())
{
    case 1: actor.act1(); break;
    case 2: actor.act2(); break;
    [...]
} 
```

会成为

```
actor.act(); 
```

并且 act 方法将在 Actor 的子类中被覆盖。

然而，在运行时决定实例化哪个子类的最明显方法看起来与原始方法非常相似：

```
Actor newActor(int type)
{
    switch(type)
    {
        case 1: return new Actor1();
        case 2: return new Actor2();
        [...]
    }
} 
```

所以似乎什么都没有真正得到；逻辑刚刚被移动。

有什么更好的方法来做到这一点？我能想出的唯一方法是为 Actor 的每个子类实现一个工厂类，但对于这样一个简单的问题，这似乎相当麻烦。

这是我想太多了吗？如果我只是在其他地方做几乎相同的事情，那么进行原始更改似乎没有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T22:52:45.317

问题是“如果”你需要一个工厂。工厂旨在管理实例的创建，而不是相关实例的行为。

否则，您只是在查看基本继承。就像是..

```
class Actor{
  public void act(){
    System.out.println("I act..");
  }
}

class StuntActor extends Actor {
  public void act(){
    System.out.println("I do fancy stunts..");
  }
}

class VoiceActor extends Actor {
  public void act(){
    System.out.println("I make funny noises..");
  }
} 
```

要使用，您可以直接实例化您需要的演员类型。

```
Actor fred = new Actor();
Actor tom = new VoiceActor();
Actor sally = new StuntActor();

fred.act();
tom.act();
sally.act(); 
```

输出：

```
I act..
I make funny noises..
I do fancy stunts.. 
```

**编辑：**

如果您需要集中创建 Actors..aka 相对于工厂，您将无法摆脱某种切换逻辑——在这种情况下..我通常会使用枚举来提高可读性：

```
public class Actor{
  public enum Type{ REGULAR, VOICE, STUNT }

  public static Actor Create(Actor.Type type){
    switch(type) {
      case VOICE:
        return new VoiceActor();
      case STUNT:
        return new StuntActor();
      case REGULAR:
      default:
        return new Actor();
    }
  }

  public void act(){
    System.out.println("I act..");
  }
} 
```

用法：

```
Actor some_actor = Actor.Create(Actor.Type.VOICE);
some_actor.act(); 
```

输出：

```
I make funny noises.. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T00:49:33.683

**Switch 语句并不是纯粹的邪恶。**您确实希望通过更好的设计来消除**重复。**通常，您会发现相同的 switch 语句出现在代码的不同（遥远）位置 - 不一定是做同样的事情，而是打开相同的数据。通过引入多态性，您可以将这些开关作为同一对象的不同方法组合在一起。

这做了两件事，首先它将工厂内的几个开关减少到一个开关，*并将*可能依赖于类似数据的分散逻辑拉在一起。该数据将变成对象中的成员变量。

还值得注意的是，您并不总是在工厂的引擎盖下得到一个 switch 语句。也许您可以在启动时扫描类路径并构建`HashMap`实现接口的类型。例如，考虑一个像 SMTP 这样的套接字协议的实现。您可以拥有名为`HeloCommand`、`MailFromCommand`等的对象，并通过将套接字命令与类名匹配来找到正确的对象来处理消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T22:42:09.770

我相信你可以用[抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)来做到这一点......

这是一个例子：

```
abstract class Computer {
    public abstract Parts getRAM();
    public abstract Parts getProcessor();
    public abstract Parts getMonitor();
}

class Parts {
    public String specification;
    public Parts(String specification) {
        this.specification = specification;
    }
    public String getSpecification() {
        return specification;
    }
} 
```

我们有两个扩展类`Computer`

```
class PC extends Computer {
    public Parts getRAM() {
        return new Parts("512 MB");
    }
    public Parts getProcessor() {
        return new Parts("Celeron");
    }
    public Parts getMonitor() {
        return new Parts("15 inches");
    }
}

class Workstation extends Computer {
    public Parts getRAM() {
        return new Parts("1 GB");
    }
    public Parts getProcessor() {
        return new Parts("Intel P 3");
    }
    public Parts getMonitor() {
        return new Parts("19 inches");
    }
} 
```

最后我们有，

```
public class ComputerType {
    private Computer comp;
    public static void main(String[] args) {
        ComputerType type = new ComputerType();
        Computer computer = type.getComputer("Workstation");
        System.out.println("Monitor: "+computer.getMonitor().getSpecification());
        System.out.println("RAM: "+computer.getRAM().getSpecification());
        System.out.println("Processor: "+computer.getProcessor().getSpecification());
    }    

    public Computer getComputer(String computerType) {
        if (computerType.equals("PC"))
            comp = new PC();
        else if(computerType.equals("Workstation"))
            comp = new Workstation();
        return comp;
    }    
} 
```

# assembly - 在 MIPS 中使用全局变量编写函数？

> ID：10368069
> 
> 赞同：3
> 
> 时间：2012-04-28T22:21:15.427
> 
> 标签：assembly, global-variables, mips, mips32

```
frogger:
    jal teechar
    jal update_frog
    lw $t0,game_indicator
    li $t0, 0 
```

好的，这就是功能。我有 teechar 和 update_frog 函数完全编写和工作。我了解前两个项目符号，但不确定后两个项目符号。我将如何在 MIPS 中编写最后两个项目符号？

这是功能说明：

编写一个不带参数的 MIPS 函数frogger，并返回一个字符（使测试更容易）。它执行以下操作：

*   调用您的 teechar 来读取并回显一个字符 c.
*   打电话给你的 update_frog(c)。
*   如果 c 不为零，则将 c 存储在全局变量中以指示游戏结束以及游戏结束的方式。（当然，您必须将该全局变量初始化为零。）
*   返回 C.

这是我的代码：

```
frogger:
    jal teechar
    jal update_frog 
```

抱歉，我只是在思考如何做到这一点时遇到了麻烦:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:56:05.020

为了全局变量，您必须通过争论或使用特殊用途的寄存器。由于您已指定该函数不接受任何参数，因此您必须保留一个寄存器来保存 c 的值，每当调用 frogger 时，它将从该寄存器中读取值。

它不是高级编程语言的一个干净的解决方案，但你现在正在汇编中，不妨弄脏你的手！

# php - 教程中的 PHP 示例不会一直运行

> ID：10368073
> 
> 赞同：1
> 
> 时间：2012-04-28T22:22:00.933
> 
> 标签：php, debugging

我`echo`在它停止运行之前和之后放置了一个。文件`file1.txt`已写入，但未返回最终`echo`确认。

```
<?php
$fh = fopen("file1.txt", 'w') or die("Failed to create file");
$text = <<<_END
Line 1
Line 2
Line 3

_END;
fwrite($fh, $text) or die("Could not write to file");

echo "This shows up in my browser";
$fclose($fh);
echo "This doesn't";
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T22:23:09.103

您的脚本有错误

代替

```
 $fclose($fh); 
```

和

```
 fclose($fh); 
```

要查看所有错误，请将其添加到页面顶部

```
error_reporting(E_ALL);
ini_set('display_errors','On'); 
```

由于您正在学习是否要使用可变函数，因此这将起作用

```
$fclose = "fclose";
$fclose ($fh); 
```

[最后，使用http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)使用更简单的代码版本进行学习`file_put_contents`

```
$text = <<<_END
Line 1
Line 2
Line 3
_END;
file_put_contents ("file1.txt", $text );
echo "This shows up in my browser"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:23:04.297

`$fclose($fh);`应该是`fclose($fh);`。这是一个函数，而不是变量。

# ajax - jquery/javascript - 检查输入（密码）是否有一些重复的字符

> ID：10368077
> 
> 赞同：0
> 
> 时间：2012-04-28T22:22:43.020
> 
> 标签：ajax, passwords

我现在正在使用密码，并想让用户创建复杂的密码。我使用 jQuery 来检查密码是否足够长以及它的强度取决于使用的字符。尽管如此，仍然无法弄清楚如何让用户创建没有重复字符的密码，因此他无法制作像“111111111111111111111111”或“1qAz1qAz1qAz”等密码。我的代码在这里：

```
$("#new_pass").keyup(function() {
    var newpass = $(this).val();
    var chars = 0;
    if((/[a-z]/).test(newpass)) chars +=  26;
    if((/[A-Z]/).test(newpass)) chars +=  26;
    if((/[0-9]/).test(newpass)) chars +=  10;
    if((/[^a-zA-Z0-9]/).test(newpass)) chars +=  32; 
    var strength = Math.pow(chars, newpass.length)
        alert(strength)
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:02:50.040

也许你可以使用这样简单的东西：

```
 /(\w+)(?=\1)/g 
```

它匹配一个或多个单词字符，然后检查它们后面是否跟着那个确切的字符串。

基本测试（在 Coffeescript 中）

```
 pattern = /(\w+)(?=\1)/g
 console.log pattern.test("1qAz1qAz1qAz")
 console.log pattern.test("111111111111111")
 console.log pattern.test("abcdefg")         
 console.log pattern.test("abccdefg") 
```

输出：

```
 true
 true
 false
 true 
```

作为旁注，大小写确实很重要，例如：

```
 pattern.test("abcCdefg") 
```

实际上会返回**false**。

# jquery - Jquery将元素附加到Div并在悬停时显示/隐藏

> ID：10368080
> 
> 赞同：1
> 
> 时间：2012-04-28T22:23:02.737
> 
> 标签：jquery, hover, append, element, show-hide

我正在尝试使用 Jquery 将页脚 div 附加到另一个 div 中，并在悬停时显示新添加的页脚 div，然后慢慢淡入/隐藏。这是我到目前为止提出的代码：

```
<script type="text/javascript">
$('.xg_widget_main .module_forum .vcard').hover(function(){
$(this).append($('.module_forum .xg_module_foot').show('slow'));
});
</script> 
```

我在这段代码中面临的障碍是附加的 div 将不服从 .show('slow') 函数，并且在鼠标从悬停区域移除后，附加的 div 不会慢慢淡出，而是立即淡出。有人可以建议我在这里缺少什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:26:32.143

您现在遇到的问题是结果`.append()`是您的原始元素，而不是您刚刚附加的新元素。尝试：

1.  颠倒你的`append`逻辑意识
2.  开始隐藏元素：

例如

```
$('.module_forum .xg_module_foot').hide().appendTo(this).show('slow'); 
```

# android - 读取文本文件中的一行，将其放入 listview

> ID：10368086
> 
> 赞同：0
> 
> 时间：2012-04-28T22:23:28.720
> 
> 标签：android, listview, text-files

我有两种语言的两个文本文件。我需要我的代码从文本文件 1 和文本文件 2 中读取一行并将它们放入具有两个文本视图的列表视图中。我该怎么做？

我的代码在这里：

```
public class ListViewSoore extends ListActivity{
ArrayAdapter<String> adapter = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_view);
    String itemsen[]=getResources().getStringArray(R.row.pa1);
    adapter=new MyAdapter(this, android.R.layout.simple_list_item_1, R.id.textView1,itemsen);
    setListAdapter(adapter);
}
    private class MyAdapter extends ArrayAdapter<String> {

    public MyAdapter(Context context, int resource, int textViewResourceId, String[] strings) {
        super(context, resource, textViewResourceId, strings);
    }

     @Override
    public View getView(int position,View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View row=inflater.inflate(R.layout.list_item, parent, false);
                    String itemsen[]=getResources().getStringArray(R.row.pa1);
        String itemsti[]=getResources().getStringArray(R.row.pa2);
        TextView tven=(TextView) row.findViewById(R.id.textView1);
        TextView tvti=(TextView) row.findViewById(R.id.textView2);
        tven.setText(itemsen[position]);
        tvti.setText(itemsti[position]);
        return row;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:56:18.020

我可能有点不确定您要完成什么，但请在 strings.xml 文件中定义您的 String 数组值。

作为资源包含的字符串数组应如下所示（在 strings.xml 文件中）：

```
<string-array name="planets_array">
    <item>Mercury</item>
    <item>Venus</item>
    <item>Earth</item>
    <item>Mars</item>
</string-array> 
```

# java - 用正则表达式解析句子，包括java中的项目符号列表

> ID：10368090
> 
> 赞同：2
> 
> 时间：2012-04-28T22:23:43.657
> 
> 标签：java, regex

目前，我使用以下正则表达式来解析文档中的句子：

```
Pattern.compile("(?<=\\w[\\w\\)\\]](?<!Mrs?|Dr|Rev|Mr|Ms|vs|abd|ABD|Abd|resp|St|wt)[\\.\\?\\!\\:\\@]\\s)"); 
```

这几乎可以工作。例如：给定这个字符串：

“玛丽有一只小羊羔（即羊羔派）。以下是它的特性： 1\. 它有四英尺 2\. 它有绒毛 3\. 它是哺乳动物。它有白色绒毛。她的父亲 Lamb 先生住在 Mulbery圣在一座小白屋里。”

我得到以下句子：

```
Mary had a little lamb (i.e. lamby pie).
Here are its properties: 
1\. It has four feet  2\. It has fleece 3\. It is a mammal. 
It had white fleese. 
Her father, Mr. Lamb, live on Mulbery St. in a little white house. 
```

但是，我想要的是：

```
Mary had a little lamb (i.e. lamby pie).
Here are its properties: 
1\. It has four feet  
2\. It has fleece 
3\. It is a mammal. 
It had white fleese. 
Her father, Mr. Lamb, lives on Mulbery St. in a little white house. 
```

有没有办法通过改变现有的正则表达式来做到这一点？

现在要完成这项任务，我首先进行初始拆分，然后检查项目符号。以下代码有效，但我想知道是否有更优雅的解决方案：

```
public static void doHomeMadeSentenceParser(String temp) {
    Pattern p = Pattern
            .compile("(?<=\\w[\\w\\)\\]](?<!Mrs?|Dr|Rev|Mr|Ms|vs|abd|ABD|Abd|resp|St|wt)[\\.\\?\\!\\:\\@]\\s)");
    String[] sentences = p.split(temp);
    Vector psentences = new Vector();
    Pattern p1 = Pattern.compile("\\b\\d+[.)]\\s");
    for (int x = 0; x < sentences.length; x++) {
        Matcher matcher = p1.matcher(sentences[x]);
        int bstart = 0;
        boolean bulletfound = false;
        while (matcher.find()) {
            bulletfound = true;
            String bullet = sentences[x].substring(bstart, matcher.start());
            if (bullet.length() > 0) {
                psentences.add(bullet);
            }
            bstart = matcher.start();
        }
        if (bulletfound)
            psentences.add(sentences[x].substring(bstart));
        else
            psentences.add(sentences[x]);
    }
    for (int x = 0; x < psentences.size(); x++) {
        String s = (String) psentences.get(x);
        System.out.println(s.trim());
    }
} 
```

提前感谢您的帮助。

艾略特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:28:23.510

我假设您正在使用正则表达式来查找分割线的位置。我不知道这方面的正则表达式，但你能期待一个数字后跟句号（。）吗？

# wcf - MSMQ - 从一台计算机发送到另一台计算机

> ID：10368091
> 
> 赞同：0
> 
> 时间：2012-04-28T22:23:52.270
> 
> 标签：wcf, msmq

如何设置 MSMQ，以便可以从客户端向服务器发送消息？这些计算机将位于同一域、同一网络中。

使用 WCF 和 MSMQ 集成绑定。

我正在使用事务性 MSMQ。当然，让 POC 在同一台机器上本地工作，但现在实际模拟一个几乎真实的环境，其中有 2 台计算机 + 一个 DC。

在这种情况下如何设置 MSMQ 以及 MSMQ 名称是什么？

最终，我将做一个集群的 MSMQ，但让我们先一点一点地做。

所以基本上，我想从 ComputerA 发送消息并将消息放在 ComputerB 的专用队列中。

# python - 用空行分隔符拆分

> ID：10368092
> 
> 赞同：3
> 
> 时间：2012-04-28T22:23:59.897
> 
> 标签：python

我在使用空行`"\n\n"`分隔符拆分文本文件时遇到问题。

```
re.split("\n", aString) 
```

有效，但

```
re.split("\n\n", aString) 
```

只返回整个字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T22:29:16.680

注意[不同操作系统的行尾约定](http://en.wikipedia.org/wiki/Newline)！

*   窗口：CRLF ( `\r\n`)
*   Linux 和其他 Unices：LF ( `\n`)
*   旧 Mac：CR ( `\r`)

您可能失败了，因为您要查找的双换行符位于 Windows 编码的文本文件中，并且将显示为`\r\n\r\n`，而不是`\n\n`.

该`repr()`函数将确定您的行尾是什么：

```
>>> mystring = #[[a line of your file]]
>>> repr(mystring)
"'\\nmulti\\nline\\nstring '" 
```

* * *

你确定你不只是想一开始就逐行读取文件吗？

```
with open(file.txt, 'r') as f:
    for line in f:
        print (line) 
```

# linux - 在linux日志文件中特定出现后获取行

> ID：10368093
> 
> 赞同：3
> 
> 时间：2012-04-28T22:24:01.557
> 
> 标签：linux, bash, grep

我正在尝试从 syslog file(/var/log/messages) 获取 linux 中附加的 USB 信息。

为此，我阅读了日志文件并获取了信息。现在我要做的是读取 syslog 文件并尝试查找“找到新 USB 设备”的最后一次出现（新连接的 USB）。然后我试图阅读接下来的 16 行以获取 USB 信息（大小、序列号、制造商等）。

目前我正在使用以下语法：

```
grep -A 20 -e 'New USB device found' /var/log/messages | tail -n 16 > usb_detail 
```

但是这种语法在一种情况下会失败。如果“New USB...”之后有 25 行，那么我会得到最后 16 行，然后我会跳过所需的实际信息。如果“New USB ...”之后只有 16 行，那么它会正常工作，我会得到所需的信息。

所以我想要的是在最后一次出现“找到新的 USB 设备”之后立即获得 16 行。不是“找到新 USB 设备”之后的最后 16 行。

如果我的问题不清楚，请告诉我。在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:34:46.553

有什么问题

```
fgrep -A 16 'New USB device found' /var/log/messages | tail -n 16 
```

对于我在日志中看到的内容，16 行就足够了（我最长的是 10 行）。如果 grep 的行数少于 16 行，它将在那里截断，并且您会在新设备*之前*`--`得到几行无用的行，但是 grep在使用上下文时会在匹配块之间打印。

# javascript - 当用户退出我的网站时播放音频

> ID：10368099
> 
> 赞同：1
> 
> 时间：2012-04-28T22:24:51.610
> 
> 标签：javascript, jquery

我想知道当用户退出我的网站时是否有办法播放音频？

例如。“感谢访问等。”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T22:26:13.060

不，当用户离开网站时，您无法可靠地播放音频。尽管您可以*启动*它（使用`onbeforeunload`），但它不会结束播放。

说真的，如果你这样做了，那只会激怒人们。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:33:32.453

我做了一个小测试（对整个 HTML5 还是新手）并想出了这个解决方案：

```
 <script>
         function myLoadHandler(evt)
        {
           var audio_file1 = document.getElementById('audioID');
            audio_file1.volume = 0
            audio_file1.play();
        }

        if ("onpagehide" in window) {
            window.addEventListener("pageshow", myLoadHandler, false);

        } else {
            window.addEventListener("load", myLoadHandler, false);
        }

    </script>

    <script>

        function playAudio() {
            var audio_file1 = document.getElementById('audioID');
            audio_file1.volume = 1
            audio_file1.play();
        }
    </script>

    <body onunload="playAudio()">
        <div>

            <div>
                <audio id="audioID" src="your_audio.wav" preload="auto"></audio>
            </div>

        </div>
    </body> 
```

我在最新的 Chrome 和 Firefox 上对其进行了测试。仅在 Firefox 中有效-我猜 Chrome 从内存中删除所有资源的速度比 javascript 可以执行的要快。

另一个奇怪的事情是，即使使用 preload="auto"，音频似乎在播放后实际上会缓冲（来自脚本或 UI），所以这就是为什么我在加载音量 0 时播放它。

还有一件事 - 就像之前回答中提到的某人一样 - 它可能会很烦人。谨慎使用。

# iphone - 为什么在 Xcode 中可以创建组，但不能创建真正的文件夹？

> ID：10368101
> 
> 赞同：41
> 
> 时间：2012-04-28T22:25:13.487
> 
> 标签：iphone, ios, xcode

在进行 iOS 编程时，有趣的是在 Xcode (4.3.2) 中，我们可以创建群组，例如群组通话`Images`，并向其中添加文件（作为链接或选择“将项目复制到群组的文件夹”）。所以它在导航器中看起来像一个真正的文件夹，甚至提到“复制到...组的**文件夹**”，但实际上并没有文件夹。`.m`所有添加的文件与和文件位于同一位置`.h`。

为什么我们想要组，而不是真正的文件夹？组比使用文件夹有优势吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-28T22:28:45.287

这是我的一个小烦恼。

我建议，在你的文件系统中创建文件夹，你有你的项目文件，然后将该文件夹拖到你想要组的 Xcode 中。它将像任何其他组一样工作，但现在链接到文件系统上的文件夹。在 Xcode 中将文件添加到该组现在会将它们添加到文件系统中的文件夹中。

在大型项目中定位文件时，工作方式更加简洁，并有帮助。也保持 git 更清洁。

**Xcode 9 更新：**

一旦 Xcode 中的组与磁盘上的目录结构匹配，在 Xcode 中将文件从一个组移动到另一个组现在将在磁盘上正确移动文件以匹配。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-28T23:05:56.063

> 注意：在 Xcode 10 中，默认行为现在会在您创建新组时创建链接文件夹。以下信息在其他情况下仍然适用。

组织文件的推荐方法是通过组，因为它比创建目录更灵活，并且允许您创建复杂的文件层次结构，同时在文件系统上维护完全不同的文件层次结构。它只是一个组织工具。也就是说，可以将组转换为文件夹引用，或者最初将它们创建为文件夹引用。

此外，如果您需要更改文件系统中的内容，使用组而不是文件夹引用可以为您提供更大的灵活性 - 假设您有一个在一堆不同项目中使用的通用代码文件夹。组允许您像在项目中一样组织项目内部的文件，同时仍将代码的一份副本保留在中心位置。是的，您也可以使用文件夹引用来执行此操作，但是如果您以后想要将其他内容添加到同一组但不希望将它们添加到该公共文件夹中，则组会更加灵活。

如果要将组链接到文件夹，请单击项目文件树中的组，然后按命令+选项+1。在下拉菜单下方，右侧会显示“路径：相对于组”之类的内容，在“无”一词旁边有一个带有灰色边框的白色小方块。单击此按钮然后选择/创建文件夹会将组绑定到文件夹。

![文件夹参考](../Images/3f9329e1d58bbd9a46c2f6c8479e7985.png)

此外，当您将文件夹拖入 Xcode 时，它​​会询问您是否希望它成为组或文件夹引用：

![添加文件夹引用](../Images/ea3fe3782e36220deaecde84c13d4e17.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-22T06:26:30.487

github中有一个**命令行工具-“synx”** ，可以完全满足您的需求。

它重新组织 finder 中的 Xcode 项目文件夹以匹配项目中的 Xcode 组。

你可以在这里找到它： [https ://github.com/venmo/synx](https://github.com/venmo/synx)

**更新**：XCode 9 默认支持此功能。所以，不再需要使用其他工具了！

# java - Cassandra 用户维护 CF 索引

> ID：10368102
> 
> 赞同：1
> 
> 时间：2012-04-28T22:25:15.450
> 
> 标签：java, cassandra

下面是我希望在 Cassandra 中作为标准列族拥有的 POJO 的一瞥：

```
class Person {
string key
string name
string dob
List<String> phones
List<String> ids } 
```

显然我的关键是我的主索引。不知道如何做清单？必须为它们创建一个新的 CF，还是将它们全部添加为列？
好的，所以我也希望通过相等搜索所有内容。获取电话= 1112223333 的人员获取名字=Al 和出生日期=yyyy-mm-dd 的人员

我说的是 1 亿人，所有列大多是唯一的 那么这是否排除了内置的二级索引？

我“得到”了我自己的 CF 作为索引，其中主键是电话，列名是 Person CF 的主键。

但是如果我需要删除手机，给定 key=1234，我如何维护手机的 CF 索引。TIA Jurgyman

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:57:44.053

首先，二级索引不是正确的选择，因为它们在基数较低（即重复值很多）的情况下工作得很好。电话号码不能满足这一点。它们在技术上可以工作，但随着集群规模的增长，效率会降低。

你是对的，如果你需要一个没有二级索引的双向查找，最好的方法可能是维护你自己的索引。这遵循以您需要读取数据的方式写入数据的一般设计理念。来自 RDBMS 世界可能需要一些时间来适应，因为您已经习惯了规范化。

我认为您缺少的部分是您需要将电话号码存储在两个地方——您的个人 CF 和索引。这将允许您查看电话的人和电话的人。当您需要添加/删除手机时，您将同时在两个地方进行操作。您只是将保持关系从 DBMS 转移到您的应用程序的逻辑。

# php - 如何摆脱下面的未定义索引？

> ID：10368103
> 
> 赞同：0
> 
> 时间：2012-04-28T22:25:26.170
> 
> 标签：php, javascript

我收到一条错误消息，指出 fileImage 是此行上的未定义索引：$idx = count($_POST ['fileImage']) -1 ;。现在发生这种情况是因为当用户打开页面时，显然没有任何内容发布到 fileImage，那么当没有任何内容发布到 $_POST 时，如何将其设置为“”？我以为我在下面的行中做到了，但似乎没有发生。

下面是代码：

```
<?php
session_start();

$idx = count($_POST ['fileImage']) -1 ;
$output = isset($_POST ['fileImage'][$idx]) ? $_POST ['fileImage'][$idx]['name'] : "";

?> 
```

Javascript：

```
function stopImageUpload(success) {

    var imageNameArray = ['<?php echo $output ?>'];
    var result = '';

    if (success == 1) {
        result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
        for (var i = 0; i < imageNameArray.length; i++) {
            $('.listImage').append(imageNameArray[i] + '<br/>');
        }
    }
    else {
        result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
    }

    return true;
}​ 
```

下面是 php 脚本，它从上面的 javascript 函数上传另一个页面上的文件：

```
 <?php

            session_start();

            $result = 0;
            $errors = array ();
            $dirImage = "ImageFiles/";

        if (isset ( $_FILES ['fileImage'] ) && $_FILES ["fileImage"] ["error"] == UPLOAD_ERR_OK) {

        $fileName = $_FILES ['fileImage'] ['name'];

        $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
        $fileExt = strtolower ( $fileExt );

        $fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;

                if (count ( $errors ) == 0) {
                    if (move_uploaded_file ( $fileTemp, $fileDst )) {
                        $result = 1;

                    }
                }

            }

    $_POST ['fileImage'][] = array('name' => $_FILES ['fileImage']['name']);

            ?>

        <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result;?>);</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:28:52.357

我看不到您在哪里检查，但这样做的方法是：

```
if(!isset($_POST['fileImage'))
      // Don't do something with the image
else
      // Totally do it 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:31:41.847

对于上传的文件，请参考 $_FILES 而不是 $_POST。

[http://php.net/manual/en/reserved.variables.files.php](http://php.net/manual/en/reserved.variables.files.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:33:00.607

如果您不想一直写日志`isset`，可以使用此功能...

```
function __R($var) {
    return isset ( $_REQUEST [$var] ) ? $_REQUEST [$var] : null;
}

$idx = count ( __R ( "fileImage" ) ) - 1; 
```

# python-3.x - python 3 IDLE中的'SyntaxError：无效语法'

> ID：10368106
> 
> 赞同：1
> 
> 时间：2012-04-28T22:26:20.393
> 
> 标签：python-3.x, syntax-error, python-idle

[![](../Images/71692ef426167f490604613b66461c30.png "由 imgur.com 主办")](https://imgur.com/UrAyf)

为什么这是语法错误？我该如何解决？

```
class Queue:

    #Queue is basicliy a List:
    def __init__(self):
        self.queue = []

    #add to the top of the list (the left side)
    def Enqueue(self, num):
        if isinstance(num, int):
            self.queue.append(num)

    #remove from the top of the list and return it to user
    def Dequeue(self):
        return self.queue.pop(0)

#this function gets inputs from user, and adds them to queue,
#until it gets 0.
def addToQueue(queue, num):
    num = input()
    while num != 0:
        queue.Enqueue(num)
        num = input() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:32:46.677

交互模式（带有`>>>`提示）一次只接受一个语句。您输入了两个要同时处理的内容。

输入类定义后，请务必添加一个*额外的*空白行，以便交互式提示知道您已完成。一旦系统提示您 a `>>>`，您就会知道它已为函数定义做好了准备。

您的其余代码看起来不错。快乐计算:-)

# c# - 将 RSA 公钥编码为 DER 格式

> ID：10368111
> 
> 赞同：2
> 
> 时间：2012-04-28T22:27:28.760
> 
> 标签：c#, cryptography, der

我需要一个编码为 DER 格式的 RSA 公钥。

密钥对是使用 RSACryptoServiceProvider 生成的。

我正在寻找的是与java等效的c#：

```
PublicKey pubKey = myPair.getPublic();
byte[] keyBytes = pubKey.getEncoded(); 
```

我曾尝试研究 BouncyCastle 但迷路了，所以如果有解决方案，欢迎提供任何指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T22:47:37.110

使用充气城堡：

```
using Org.BouncyCastle.X509;
using Org.BouncyCastle.Security;
using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Crypto.Generators;
using Org.BouncyCastle.Crypto.Parameters;

...

var generator = new RsaKeyPairGenerator ();
generator.Init (new KeyGenerationParameters (new SecureRandom (), 1024));
var keyPair = generator.GenerateKeyPair ();
RsaKeyParameters keyParam = (RsaKeyParameters)keyPair.Public;
var info = SubjectPublicKeyInfoFactory.CreateSubjectPublicKeyInfo (keyParam);
RsaBytes = info.GetEncoded (); 
```

最后三行是获取 RSA 公钥并将其导出的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-28T06:31:27.313

我尝试使用上述 info.GetEncoded() 但结果，我无法使用它来验证使用相应私钥创建的签名。

对我有用的是将它转换为 X509Certificate2。

```
private bool VerifySignature(string stringContent, string stringSignature, X509Certificate2 x509PublicKey)
{
    Int16 cbSignature = 0, cbCert = 0;
    int cbData = 0;
    CertBasicStruct sCert = new CertBasicStruct();
    var pbCert = PublicKey.RawData;
    cbCert = (Int16)pbCert.Length;

    byte[] pbData = Encoding.UTF8.GetBytes(stringContent);
    cbData = (Int16)pbData.Length;
    byte[] pbSignature = Convert.FromBase64String(Signature);
    cbSignature = (Int16)pbSignature.Length;
    var rtn = DllImportService.DecodeCertificate(pbCert, cbCert, ref sCert);
    var rtn_1 = DllImportService.VerifySignatureByCert(ref sCert, DllImportService.CKM_SHA256_RSA_PKCS, pbData, cbData, pbSignature, cbSignature);
    if (rtn_1 == 0)
    {
        LogWndAppendLine("Signature is valid.");
        return true;
    }
    else
    {
        LogWndAppendLine("Signature is invalid");
        return false;
    }
} 
```

X509Certificate2.RawData 将是您正在寻找的。

# android - 使用 viewgroup.layoutparams 动态设置 bg 图像

> ID：10368112
> 
> 赞同：0
> 
> 时间：2012-04-28T22:27:45.730
> 
> 标签：android, viewgroup

我有一个网格视图，我在应用程序中重复使用了几次。单独的活动驱动显示的数据。我想为每个活动设置不同的背景图像。

我想做的是避免使用 viewgroup.layoutparams 创建多个布局。

目前，我有这个：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_view); 
```

但我想要这样的东西：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_view, ViewGroup.LayoutParams.View_background(R.drawable.background1)); 
```

只有一个问题：没有 View_background 布局参数...

这是一个 RTM，但我似乎找不到它。有人知道这是什么吗？有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T22:52:00.643

您不能使用 LayoutParams 更改背景。相反，为您的 XML 文件中的根视图分配一个 ID，并使用以下代码更改背景：
`findViewById(R.id.your_view).setBackgroundResource(R.drawable.background1);`

# grails - 如何在多个 Grails 应用程序之间共享数据访问层（服务和域类）

> ID：10368113
> 
> 赞同：0
> 
> 时间：2012-04-28T22:27:53.493
> 
> 标签：grails, soa, data-access-layer

我想与另一个 grails 应用程序共享我的 grails 应用程序（Grails 域类和服务）的数据访问部分。一个是面向标准客户端的 Web 应用程序，另一个（尚未编写）将用于定期后台任务，例如使用 Quartz 插件或类似插件的提醒电子邮件等，其中 UI 仅用于内部用户的统计/控制。

我不希望这一切都捆绑在一个 Grails 应用程序中，因为我希望能够扩展它们并在不同的机器上运行它们。这样做的正确方法是什么？过去，我通过将共享数据访问类捆绑到一个 .jar 中并将它们包含在多个应用程序中需要的地方，在更多的遗留 Java Web 应用程序中实现了这一点，但我不确定这是否是 Grails 的正确方法。

我已经考虑过一个成熟的面向服务的架构，其中第三个 grails 应用程序负责所有数据访问，并且所描述的两个应用程序通过对此服务应用程序的 REST 调用进行所有数据访问，但这在短期内超出了范围，因为面向客户端的 webapp 已经编写好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T23:24:35.400

通常这是通过插件完成的。创建您想要在应用程序之间共享的域类、服务、控制器甚至默认 gsp，并将它们创建为插件。这样，您就可以将它们安装在任何需要该行为的 Grails 应用程序中。

我已经通过一些在我编写的应用程序（如应收账款、应付账款等）中相当常见的通用会计类型行为来做到这一点。

一件很棒的事情是，您可以使用测试数据源单独编写插件和测试，然后当您将其安装到 Grails 应用程序中时，它将使用应用程序数据源。它将具有默认的 gsp 和控制器，为您提供可以在实际应用程序中覆盖的基本行为集。

# java - UnsatisifiedLinkError - 关于如何解决这个问题的任何想法？

> ID：10368114
> 
> 赞同：4
> 
> 时间：2012-04-28T22:28:20.193
> 
> 标签：java, unsatisfiedlinkerror

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: com.melloware.jintellitype.JIntellitypeException: Could not load JIntellitype.dll from local file system or from inside JAR
    at com.melloware.jintellitype.JIntellitype.<init>(JIntellitype.java:114)
    at com.melloware.jintellitype.JIntellitype.getInstance(JIntellitype.java:174)
    at CaptureScreen.registerHotkeys(CaptureScreen.java:163)
    at CaptureScreen.<init>(CaptureScreen.java:100)
    at CaptureScreen.main(CaptureScreen.java:199)
    ... 5 more
Caused by: java.lang.UnsatisfiedLinkError: C:\Users\B\AppData\Local\Temp: Can't find    dependent libraries
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary0(Unknown Source)
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.load0(Unknown Source)
    at java.lang.System.load(Unknown Source)
    at com.melloware.jintellitype.JIntellitype.<init>(JIntellitype.java:99)
    ... 9 more 
```

当我从命令行运行时出现此错误，但是，它不会导致我的程序在我的机器上运行时出现任何问题，但是，在其他人的机器上，该程序根本不会运行。

我以前从未遇到过这个错误并且相当困惑..主要是它在我的机器上运行良好，但在其他机器上却没有，即使它在两者上都抛出了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:41:06.007

This is a classpath error. Its likely that you have it set up right for compile time but not runtime. Make sure that either your jar is in the right location and/or that you've set your classpath to include the jar.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:49:45.020

转到 Jintellitype 网站，下载源代码，将其添加到您的下载文件夹，然后在构建项目后将 .dll 文件移动到包含 Jitellitype 类的文件夹中

# c++ - 在 C++ 中的 2 个应用程序之间发送和接收数据

> ID：10368121
> 
> 赞同：1
> 
> 时间：2012-04-28T22:28:55.667
> 
> 标签：c++, return-value

我想编写两个 c++ 应用程序，第一个称为“调用者”，第二个称为“处理器”。

调用者应用程序向处理器发送一个值。在该处理器对该值进行一些处理并将其返回给调用者之后。

我想知道做到这一点的最佳方法。

到目前为止，我知道如何将值从调用者应用程序发送到处理器应用程序，但我找不到任何方法来返回值。其中一种方法是使用 putenv() 和 getenv()

调用者示例

```
#include <iostream>
#include <stdlib.h>

using namespace std;

int main(int argc, char **argv, char** envp){
    char myvar[]="MYVAR= say something";
    putenv(myvar);
    cout<<getenv("MYVAR")<<endl;
    system("./processor");
    cout<<getenv("MYVAR")<<endl;
} 
```

处理器示例

```
#include <iostream>
#include <stdlib.h>

using namespace std;

int main(int argc, char **argv, char** envp){
    char myvar[]="MYVAR= say something else";
    putenv(myvar);
    cout<<getenv("MYVAR")<<endl;
} 
```

如何解决该问题以将值从处理器返回给调用者，以及是否有更好的方法。我正在使用 Ubuntu 操作系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:54:43.380

进程之间有许多可能的通信方式，哪种方式最好取决于很多因素。使用环境基本上只对单向通信有益，对双向通信无效。可用的方法包括：

*   环境变量（一种方式）
*   命令行参数（一种方式）
*   管道
*   文件
*   插座
*   先进先出
*   共享内存
*   消息队列
*   信号
*   信号量

有些仅限于由共同祖先连接的进程；其他人可以在不相关的进程之间工作，有时甚至不能在同一台机器上工作。一些机制可以传递非常少的数据（例如信号）；其他人可以传达大量数据。有些不需要同步；其他需要广泛的同步。

哪个最适合您？我们没有足够的信息来猜测。但是，您最好的选择很可能是在管道、文件和套接字之间。

# c# - VB中的&符号是什么？

> ID：10368122
> 
> 赞同：1
> 
> 时间：2012-04-28T22:29:08.287
> 
> 标签：c#, vb.net

我有这个我正在为某人转换的 VB 代码，但他没有评论它，这是什么意思

```
Dim Arguments As String = path & "\" & fs & ".freeze" & " ls" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T22:31:14.510

Visual Basic 中的`&`运算符用于连接字符串。在 C# 中，连接运算符是`+`，所以直接翻译是

```
string Arguments = path + @"\" + fs + ".freeze" + " ls"; 
```

我认为更好的是使用`Path.Combine`：

```
string Arguments = Path.Combine(path, fs + ".freeze") + " ls"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T22:30:35.887

这只是字符串连接：

```
string arguments = path + @"\" + fs + ".freeze" + " ls"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T00:12:40.980

```
private string _arguments = Path.Combine(path, fs + ".freeze") + " ls"; 
```

这应该有效。

# asp.net-mvc - .Net MVC 应用程序中的单元测试声明

> ID：10368123
> 
> 赞同：0
> 
> 时间：2012-04-28T22:29:13.087
> 
> 标签：asp.net-mvc, moq, wif, mvccontrib, authorize-attribute

背景：我们正在使用 MVC4 并使用 WIF 进行声明/授权。我们将 Moq/MvcContrib 用于样机对象。我在[这里查看](https://stackoverflow.com/questions/1781745/moq-roles-addusertorole-test)并创建了 MockIdentity 和 MockPrincipal 对象——我需要它们吗？

目标：我有一个控制器类，它具有类级别属性，仅允许具有“经理”声明的用户访问操作。我想创建模拟用户并测试以查看没有“经理”声明的任何人是否可以访问这些操作。

我得到了模拟概念，但我只处理了模拟数据对象，并且很难弄清楚我需要哪些插件/类/方法/设置来完成我需要做的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:31:02.113

> 我想创建模拟用户并测试以查看没有“经理”声明的任何人是否可以访问这些操作。

不，你没有。您只想将用户传递给您编写并测试设置`filterContext.Result`正确的属性。而已。您无需测试 System.Web.Mvc 是否有效。单机待测！

大概你的属性是一个`AuthorizeAttribute`，对吗？所以你需要测试`OnAuthorization(AuthorizationContext)`。

免责声明：我有一段时间没有使用 moq，但您的代码大概看起来像这样：

```
var user = new Mock<IPrincipal>();
user.Setup(/* whatever you need to look at */);

var authContext = new Mock<AuthorizationContext>();
authContext.Setup(ac => ac.HttpContext.User).Returns(user);

var myAttribute = new RequireManagerAttribute();
myAttribute.OnAuthorization(authContext);

authContext.VerifySet(ac => ac.Result = /* whatever you expect */); 
```

# css - 如何将媒体查询 CSS 规则应用于 iframe 内容

> ID：10368132
> 
> 赞同：3
> 
> 时间：2012-04-28T22:29:55.557
> 
> 标签：css, iframe, media

我有这组代码我想应用于我的 iframe，但它不起作用。

```
@media only screen
and (min-width : 320px)
and (max-width : 480px) {
#postframe article{display:none;}
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T09:05:54.537

解决了……我的 iframe 宽度是 960 像素，所以在您不将宽度更改为 320 像素之前，它无法识别媒体查询！

谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:48:20.293

你可以使用 javascript ......也许是这样的：

```
var cssLink = document.createElement("link");
cssLink.href = "yourStyle.css";  
cssLink.rel = "stylesheet";  
cssLink.type = "text/css";  
frames['yourFrame'].document.body.appendChild(cssLink); 
```

# python - python字典结构，速度问题

> ID：10368134
> 
> 赞同：1
> 
> 时间：2012-04-28T22:30:43.670
> 
> 标签：python, data-structures

我是 python 新手。我需要一个数据结构来存储一些对象的计数。例如，我想存储访问量最大的网页。可以说。我有 100 个访问量最大的网页。我会记录每个网页的访问次数。我可能需要更新列表。我一定会更新访问次数。不必订购。我将查看给定网页 ID 的相关访问计数。我打算用字典。在python中有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:35:01.793

字典是此任务的合适且快速的数据结构（将网页 ID 映射到访问计数）。

Python 字典是使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)实现的，用于快速 O(1) 访问。它们是如此之快，以至于几乎任何避免它们的尝试都会使代码运行速度变慢，并使代码看起来不愉快。

PS 另请查看专门为此类工作设计的[collections.Counter （计数命中）。](http://docs.python.org/library/collections.html#counter-objects)它被实现为一个字典，初始默认值设置为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T22:37:21.837

Python 字典对象是整个 Python 语言中最优化的部分之一，原因是字典无处不在。

例如，通常每个类的每个对象实例都使用字典来保存实例数据成员的内容，类是包含方法的字典，模块使用字典来保存全局变量，系统使用字典来保存和查找模块和很快。

使用字典来保存计数器是 Python 中的一个好方法。

# c++ - python C API 是否与 C++ 完全兼容？

> ID：10368141
> 
> 赞同：1
> 
> 时间：2012-04-28T22:31:40.297
> 
> 标签：c++, python, python-c-api, python-c-extension

据我了解C和C++之间的关系，后者本质上是前者的扩展，并且保留了一定程度的向后兼容性。假设可以使用 C++ 代码调用 python C API 是否安全？

更重要的是，我注意到官方 python 文档将 C 和 C++ 扩展捆绑在同一页面上。我在任何地方都找不到 C++ API。这让我相信相同的 API 在两种语言中都可以安全使用。

有人可以确认或否认这一点吗？

**编辑：**

我想我让我的问题比它需要的复杂得多。问题是：我必须做什么才能用 C++ 编写 python 模块？我是否只是按照[此处](http://docs.python.org/extending/extending.html)列出的相同指示，用 C 代码代替 C++？有单独的 API 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T22:50:07.780

我可以确认在 C 和 C++ 这两种语言中使用相同的 Python C API 是安全的。但是，除非您提出更具体的问题，否则很难为您提供更详细的答案。您应该注意许多警告和问题。例如，您的 Python 扩展被定义为 C 类型 struct，而不是 C++，因此不要期望它们的构造函数/析构函数被隐式定义和**调用**。

例如，从Python 手册中的[定义新类型](http://docs.python.org/extending/newtypes.html)中获取示例代码，它可以用 C++ 方式编写，您甚至可以混合 C++ 类型：

```
// noddy.cpp
namespace {

struct noddy_NoddyObject
{
    PyObject_HEAD
    // Type-specific fields go here.
    std::shared_ptr<int> value; // WARNING
};

PyObject* Noddy_new(PyTypeObject *type, PyObject *args, PyObject *kwds)
{
    try {
        Noddy *self = (Noddy *)type->tp_alloc(type, 0);
        if (self) {
            self->value = std::make_shared(7);
            // or more complex operations that may throw
            // or extract complex initialisation as Noddy_init function
            return self;
        }
    }
    catch (...) {
        // do something, log, etc.
    }
    return 0;
}

PyTypeObject noddy_NoddyType =
{
    PyObject_HEAD_INIT(NULL)
    // ...
}

} // unnamed namespace 
```

但是，不会`std::shared_ptr`调用 的构造函数和析构函数。因此，请记住为您将重置with的位置定义`dealloc`函数。您可能会问，为什么还要费心将值定义为。如果您在 C++ 中使用 Python 扩展（有异常）来避免类型转换和强制转换，在实现的定义中实现更无缝的集成，基于异常的错误处理可能会更容易等等，这很有用。尽管有事实上，你的对象是由纯 C 实现的机器管理的，这要归功于函数将根据众所周知的 RAII 规则发布。`noddy_NoddyType``value``nullptr``shared_ptr``noddy_NoddyType``dealloc``value`

在这里，您可以找到 Python C API 与 C++ 语言几乎无缝集成的有趣示例：[How To catch Python stdout in c++ code](https://stackoverflow.com/a/8335297/151641)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T22:41:57.073

Python C API can be called within C++ code. Python C++ extensions are written using the same C API as C extensions use, or using some 3rd party API, such as [boost::python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/).

# mysql - 使用 mySQL 列是实现全局锁定的明智方法吗？

> ID：10368144
> 
> 赞同：7
> 
> 时间：2012-04-28T22:32:12.827
> 
> 标签：mysql, distributed-transactions

我正在构建一个涉及大量图像处理的应用程序。我们在分布式庄园中构建它，任意数量的渲染机器从 RabbitMQ 交换接收渲染图像的请求。

因为在渲染过程中可能会出现对图像的请求，并且因为我不想让两个渲染服务器重复工作，所以我在 mySQL 图像表中创建了一个名为 is_rendering 的列作为布尔值。

当渲染服务器收到渲染请求时，它会执行一系列如下所示的步骤：

1.  选择更新图像行
2.  如果 is_rendering == true 中止渲染请求
3.  设置 is_rendering == true 并提交事务
4.  渲染图像并将缩略图存储在全局可访问的存储中
5.  设置 is_rendering == false 并返回

它确实有效，但我担心这些频繁的数据库更新看起来有点傻。此外，我正在考虑渲染服务器在渲染过程中失败并留下 is_rendering == true 的边缘情况，从而阻止该图像被渲染。我正在考虑解决此问题的解决方案是将 is_rendering 列从 tinyint(1) 更改为 datetime 字段，并将锁定日期存储为“true”值，并将 null 存储为“false”值。在这种情况下，定期服务健康检查可以选择具有 is_rendering 值的所有行并释放锁定。

这是解决这个问题的明智方法，还是我应该考虑其他更优雅的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:15:01.170

我已经继续并将实现更改为使用`DATETIME`列。

我真的很好奇这是否是对 mySQL 的一般使用不当。根据我的研究，我可以使用 Hadoop 的 ZooKeeper：http: [//zookeeper.apache.org/doc/r3.1.2/recipes.html](http://zookeeper.apache.org/doc/r3.1.2/recipes.html)或 Google 的内部 Chubby 系统。由于这只是服务的第一次迭代，我将坚持使用 mySQL。

从我在这里阅读的内容以及我在网上阅读的内容来看，使用 mySQL 作为产生全局锁的一种方式并不是一个糟糕的主意，将其更改为 DATETIME 列虽然有点迟钝，但最好的方法是实施过期策略来处理机器在处理作业过程中关闭的奇怪边缘情况。

持有事务级锁将是另一种方法，但是当单个服务器运行具有小连接池的多个线程时它没有意义，它会不必要地占用连接，尽管它有一个内置的过期时间客户端连接丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T22:45:11.900

亲爱的据我了解您的问题，如果您遵循以下规则，您的第一种方法也是正确的：1）您的表类型是 innoDB。2）您在代码中使用事务。因为如果在更新期间发生任何中断，它将回滚。

最后，您的第二种方法也更好。如果你不满足我提到的几点

# python - 美丽的汤从谷歌搜索中提取一个href

> ID：10368153
> 
> 赞同：3
> 
> 时间：2012-04-28T22:33:18.460
> 
> 标签：python, html, beautifulsoup, google-search

谷歌搜索给了我以下关于 HTML 的第一个结果：

```
<h3 class="r"><a href="https://rads.stackoverflow.com/amzn/click/com/0470284889" rel="nofollow noreferrer" class="l vst" onmousedown="return rwt(this,'','','','1','AFQjCNEv1W9YC2jcSKYdEo2kNqBMJ-Utmg','k89K9hF4cVNpxQYHtEKiUQ','0CCoQFjAA',null,event)"><em>Quantitative Trading</em>: <em>How to Build Your Own Algorithmic</em> <b>...</b> - Amazon</a></h3> 
```

我想从中提取链接[http://www.amazon.com/Quantitative-Trading-Build-Algorithmic-Business/dp/0470284889](https://rads.stackoverflow.com/amzn/click/com/0470284889)，但是当我用美汤提取信息时，我得到

```
soup.find("h3").find("a").get("href") 
```

我改为获得以下字符串：

/url?q= [http://www.amazon.com/Quantitative-Trading-Build-Algorithmic-Business/dp/0470284889&sa=U&ei=P2ycT6OoNuasiAL2ncV5&ved=0CBIQFjAA&usg=AFQjCNEo_ujANAKnjheWDRlBKnJ1BGeA7A](https://rads.stackoverflow.com/amzn/click/com/0470284889)

我知道链接在那里，我可以通过删除 /url?q= 和 & 符号后面的所有内容来解析它，但我想知道是否有更清洁的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T22:41:49.727

您可以使用[urlparse.urlparse](http://docs.python.org/library/urlparse.html#urlparse.urlparse)和[urlparse.parse_qs](http://docs.python.org/library/urlparse.html#urlparse.parse_qs)的组合，例如

```
>>> import urlparse
>>> url = '/url?q=http://www.amazon.com/Quantitative-Trading-Build-Algorithmic-Business/dp/0470284889&sa=U&ei=P2ycT6OoNuasiAL2ncV5&ved=0CBIQFjAA&usg=AFQjCNEo_ujANAKnjheWDRlBKnJ1BGe'
>>> data = urlparse.parse_qs(
...     urlparse.urlparse(url).query
... )
>>> data
{'ei': ['P2ycT6OoNuasiAL2ncV5'],
 'q': ['http://www.amazon.com/Quantitative-Trading-Build-Algorithmic-Business/dp/0470284889'],
 'sa': ['U'],
 'usg': ['AFQjCNEo_ujANAKnjheWDRlBKnJ1BGe'],
 'ved': ['0CBIQFjAA']}
>>> data['q'][0]
'http://www.amazon.com/Quantitative-Trading-Build-Algorithmic-Business/dp/0470284889' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-25T07:45:31.853

要仅从页面中提取第**一个**结果，您可以[`select_one()`](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)通过传递 CSS 选择器或方法来使用。[`find()`](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#find) `bs4`

[在线IDE中的](https://replit.com/@DimitryZub1/Google-Search-Scrape-First-Occurrence-python-serpapi#bs4_result.py)代码和示例：

```
import requests, lxml
from bs4 import BeautifulSoup

headers = {
    "User-Agent":
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3538.102 Safari/537.36 Edge/18.19582"
}

# passing parameters in URLs
# https://docs.python-requests.org/en/master/user/quickstart/#passing-parameters-in-urls
params = {'q': 'Quantitative Trading How to Build Your Own Algorithmic - amazon'}

def bs4_get_first_googlesearch():
    html = requests.get('https://www.google.com/search', headers=headers, params=params).text
    soup = BeautifulSoup(html, 'lxml')

    first_link = soup.select_one('.yuRUbf').a['href']
    print(first_link)

bs4_get_first_googlesearch()

# output:
'''
https://www.amazon.com/Quantitative-Trading-Build-Algorithmic-Business/dp/0470284889
''' 
```

* * *

或者，您可以使用来自 SerpApi的[Google 搜索引擎结果 API执行相同的操作。](https://serpapi.com/search-api)这是一个付费 API，可免费试用 5,000 次搜索。看看[操场](https://serpapi.com/playground)。

最大的不同是所有的事情都已经为最终用户完成了：选择元素、绕过阻塞、代理轮换等等。

要集成的代码：

```
from serpapi import GoogleSearch
import os

def serpapi_get_first_googlesearch():
    params = {
      "api_key": os.getenv("API_KEY"),
      "engine": "google",
      "q": "Quantitative Trading How to Build Your Own Algorithmic - amazon",
      "hl": "en",
    }

    search = GoogleSearch(params)
    results = search.get_dict()
    # [0] - first element from the search results
    first_link = results['organic_results'][0]['link']
    print(first_link)

serpapi_get_first_googlesearch()

# output:
'''
https://www.amazon.com/Quantitative-Trading-Build-Algorithmic-Business/dp/0470284889
''' 
```

> 免责声明，我为 SerpApi 工作。

# flash - 防止用户在空中应用程序的文件名中包含文件扩展名

> ID：10368157
> 
> 赞同：0
> 
> 时间：2012-04-28T06:44:48.420
> 
> 标签：flash, actionscript-3, file-format, xml

所以我有一个空中应用程序，我想将数据保存到自定义文件中。下面是我的代码。我的问题是，这段代码正在检查用户是否没有在他们的文件名中输入“.bar”，如果没有，程序会将其添加到文件名的末尾。

我的问题是，如果用户键入“newFile.foo”，它会将文件保存为“newFile.foo.bar”。如何防止用户键入扩展名，或者让应用程序删除“.foo”部分，或任何其他可以达到预期结果的选项。

谢谢。

```
var file:File = File.desktopDirectory
file.browseForSave("Save");// Create a <projectStrings /> node
var projectStrings:XML = new XML(<projectStrings />);
// Create a <strings /> node
var strings:XML = new XML(<strings />);
strings.@stringOne = "Hello";
strings.@stringTwo = "World";
// Add the <strings> node to the <projectStrings> node.
projectStrings.appendChild(strings);

var saveFile:File = File(e.target);
var directory:String = saveFile.url;
if (directory.indexOf(".ugags") == -1) {
    trace("WRONG");
    directory += ".ugags";
}
var file:File = new File(directory);
var fileStream:FileStream = new FileStream();
fileStream.open(file, FileMode.WRITE);
fileStream.writeUTFBytes(projectStrings);
fileStream.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:32:30.650

您可以使用 lastIndexOf String 的方法来检测文件的扩展名，如下所示：

```
var nameStart:int = Math.max(fileName.lastIndexOf("/"), fileName.lastIndexOf("\"));
var extStart:int = fileName.lastIndexOf(".");
if (ext <= nameStart)
{
  //no extention at all
  fileName += ".foo";
}
else
{
  if (fileName.substr(extStart) != ".foo")
  {
    //user given other extension
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:36:52.853

一个花哨的正则表达式会更简洁地做到这一点。但是你可以只在“。”上拆分。然后根据您的要求重新组装零件。

```
var fileParts:Array = directory.split('.');
var lastIndex:int = fileParts.length - 1;
var lastPart:String = fileParts[lastIndex];
// reassmble the initial parts
directory = "";
for (var i:int = 0; i < lastIndex; i++)
{
    if (i != 0)
        directory = directory + "_" + fileParts[i];
    else
        directory = fileParts[0];
}

if (lastPart == "ugags")
    directory += ".ugags";
else
    directory = directory + "_" + lastPart + ".ugags"; 
```

# javascript - 如何提取 json 对象内的 json 对象

> ID：10368171
> 
> 赞同：11
> 
> 时间：2012-04-28T22:37:11.793
> 
> 标签：javascript, json

转换这个：

```
{"items":[{"id":"BLE89-A0-123-384","weight":"100","quantity":3},
          ...    
          {"id":"BLE10-A0-123-321","weight":"100","quantity":4}],
"country":"JUS",
"region":"A",
...
"timeout":"FILLER"} 
```

对此：

`{"BLE89-A0-123-384": "3", "BLE10-A0-123-321": "4"}`那是... {id：数量}

我找到了一个几乎可以满足我需要的答案：[Searching for an Object inside JSON](https://stackoverflow.com/questions/6110327/searching-for-an-object-inside-the-json)。但是这个答案对我没有帮助，因为它只是在第一级（一个 json 对象）。我的问题是在第二级（json 对象中的 json 对象）。提前致谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-28T22:55:50.320

如果您不将 JSON 对象视为 JSON 对象，它会有所帮助。通过 JSON.parse 运行 JSON 字符串后，它就是一个原生 JavaScript 对象。

在 JavaScript 中，有两种方法可以访问对象。

# 点符号

点符号是这样的

`myObject.name`

看到点了吗？您可以使用它来访问任何对象*属性*（它实际上可能是 javascript 中的另一个对象，只要它具有有效的点表示法名称）。不能使用 , 和空格等`-`字符`.`。

# 括号表示法（可能是另一个名称）

`myObject["variableName"]`

像点符号一样，但允许其他一些字符，比如`-`和空格字符.. 完全一样的事情。

使用这些符号很有用，因为我们可以访问嵌套属性。

`myObj.foo.bar.baz()`

现在让我们来看看你的 JSON 对象......

`{"items":[{"id":"BLE89-A0-123-384","weight":"100","quantity":3,"stock":0},
{"id":"BLE10-A0-123-321","weight":"100","quantity":4,"stock":0}],`

您可能想自己[复习 JSON 格式](http://www.json.org/)，但在您的示例中，这里有一些线索......

`{`表示对象的开始。（请记住，您的整个 JSON 字符串本身就是一个对象。）

`}`表示对象的结束。

`"variable"`（带引号！在 JSON 中很重要，但在访问/声明 javascript 对象时不重要）将属性分配给您的对象。

`:`是 JSON 和 JavaScript 对象中的赋值运算符。右侧的任何内容`:`都是您分配给左侧属性的值。

`,`意味着您正在对象中启动一个新属性。

你可能知道里面`[]`有`,`逗号意味着一个数组。

当我们运行你的字符串时`JSON.parse(string)`，我们会得到一个看起来像这样的对象......

`var myResponse = JSON.parse(response);`

您现在可以将其用作本机 JavaScript 对象。您正在寻找的是“项目”中的嵌套属性。

`var items = myResponse.items; //alternatively you could just use myResponse.items`

由于`items`是一个*对象数组*，我们需要遍历它以便将现有对象转换为新对象。

```
var i;
var result = {} ; //declare a new object.
for (i = 0; i < items.length; i++) {
    var objectInResponse = items[i]; //get current object
    var id = objectInResponse.id; //extract the id.
    var quantity = objectInResponse.quantity;
    result[id] = quantity; //use bracket notation to assign "BLE89-A0-123-384"
    //instead of id.  Bracket notation allows you to use the value
    // of a variable for the property name. 
```

结果现在是一个看起来像这样的对象：

```
{
    "BLE89-A0-123-384" : 3, //additional properties designated by comma
    "BLE10-A0-123-321" : 4 // The last key/value in an object literal CANNOT
    // have a comma after it!
} 
```

您可以使用括号表示法访问属性。

`var BLE89 = result["BLE10-A0-123-321"]; //use quotes, otherwise JavaScript will try to look up the value of a variable.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T23:04:37.473

您可以尝试：

```
var obj = {
    "items":[
        {"id":"BLE89-A0-123-384","weight":"100","quantity":3},
        {"id":"BLE10-A0-123-321","weight":"100","quantity":4}
    ],
    "country":"JUS",
    "region":"A",
    "timeout":"FILLER"
};

var quantities = {};
obj.items.forEach(function (item) {
    quantities[item.id] = item.quantity;
}); 
```

`quantities`然后将是对象`{"BLE89-A0-123-384":3,"BLE10-A0-123-321":4}`。[`forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)是 JavaScript 中数组对象的本机方法，可让您遍历它们的元素。您可能希望将该段代码放入函数中：

```
function getQuantities(obj) {
    var quantities = {};
    obj.items.forEach(function (item) {
        quantities[item.id] = item.quantity;
    });
    return quantities;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:52:12.583

您需要执行以下操作：

```
 var newJSON = {};
for (var i = 0; i < oldJSON.items.length; i++) {
  newJSON[oldJSON.items[i].id] = oldJSON.items[i].quantity;
} 
```

# c++ - printing contents of 2d vector

> ID：10368177
> 
> 赞同：0
> 
> 时间：2012-04-28T22:39:55.990
> 
> 标签：c++

this is the code I am running:

```
std::vector<std::vector<double>> test;
test.push_back(std::vector<double>(30));

 std::vector<std::vector<double> >::iterator it=test.begin(), end=test.end();
    while (it!=end) {
      std::vector<double>::iterator it1=it->first.begin(),end1=it->first.end();
      while (it1!=end1) {
    std::copy(it1.begin(),it1.end(),std::ostream_iterator<double>(std::cout, " "));
    ++it1;
      }
      ++it;
    } 
```

this is the compilation error I get:

```
data.cpp:33:45: error: ‘class std::vector<double>’ has no member named ‘first’
data.cpp:33:68: error: ‘class std::vector<double>’ has no member named ‘first’
data.cpp:35:16: error: ‘class std::vector<double>::iterator’ has no member named ‘begin’
data.cpp:35:28: error: ‘class std::vector<double>::iterator’ has no member named ‘end’
data.cpp:35:34: error: ‘ostream_iterator’ is not a member of ‘std’
data.cpp:35:56: error: expected primary-expression before ‘double' 
```

any suggestions on how to fix it so I can print the contents of test

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:45:40.947

代码有两个问题。

**首先** `std::vectors`不包含`std::pairs`，所以没有`first`or `second`：

```
while (it!=end) {
  std::vector<double>::iterator it1=it->begin(),end1=it->end(); 
```

**其次**，调用`std::copy`需要一个范围，该范围可能应该对应于您的内部向量之一。所以你的层次太深了。

您可以遍历外部 vector `test`，然后使用`copy`它的每个元素（这是一个向量）进行打印。

```
std::vector<std::vector<double>> test;
test.push_back(std::vector<double>(30));
std::vector<std::vector<double> >::iterator it=test.begin(), end=test.end();
for ( it!= end, ++it) {
  std::copy(it1-begin(),it->end(),std::ostream_iterator<double>(std::cout, " "));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:49:18.583

我认为这是你想要的更多。

```
std::vector<std::vector<double>> test;
// Put some actual data into the test vector of vectors
for(int i = 0; i < 5; ++i)
{
    std::vector<double> random_stuff;
    for(int j = 0; j < 1 + i; ++j)
    {
        random_stuff.push_back(static_cast<double>(rand()) / RAND_MAX);
    }
    test.push_back(random_stuff);
}

std::vector<std::vector<double> >::iterator it=test.begin(), end=test.end();
while (it!=end) 
{
    std::vector<double>::iterator it1=it->begin(),end1=it->end();
    std::copy(it1,end1,std::ostream_iterator<double>(std::cout, " "));
    std::cout << std::endl;
    ++it;
} 
```

您不需要首先，因为您的向量不包含对，并且您不需要基于 it1 和 end1 循环，因为它们表示您传递给复制的范围。

# python - How to deliver a response to a client after a Node.js server gets a message from a AMQP queue?

> ID：10368179
> 
> 赞同：1
> 
> 时间：2012-04-28T22:40:09.267
> 
> 标签：python, node.js, amqp, pika

When a client makes a get request to '/test' a simple string is exchanged between node.js and python via AMQP, but I don't know how to transmit the response back to the client (since the process is async).

## test.py

```
 import pika
 connection = pika.BlockingConnection(pika.ConnectionParameters(
    host='localhost'))
 channel = connection.channel()

 channel.queue_declare(queue='task_queue', durable=True)

 print ' [*] Waiting for messages. To exit press CTRL+C'

 def callback(ch, method, props, body):
     print " [x] Received %r" % (body,)
     response = body + " MODIFIED"
     #response = get_a_concept()
     print " [x] Done"
     ch.basic_publish(exchange='',
                 routing_key=props.reply_to,
                 properties=pika.BasicProperties(correlation_id = \
                                                 props.correlation_id),
                 body=str(response))
     ch.basic_ack(delivery_tag = method.delivery_tag)

channel.basic_qos(prefetch_count=1)
channel.basic_consume(callback,
                  queue='task_queue')

channel.start_consuming() 
```

## app.js

```
 var connection = amqp.createConnection({ host: 'localhost' });
 connection.addListener('ready', function() {

var exchange = connection.exchange('', {
    'type' : 'direct',
    durable : false
        }, function() {

    var queue = connection.queue('incoming', {
        durable : false,
        exclusive : true }, function() {
        queue.subscribe(function(msg) {

           // got response here, how to transmit it to the node that made the exchange?
            console.log("received message: ");
            console.log(msg.data.toString());
        });

      });

    });
}); 
```

User request makes a publish to python, but how to reply it back to the user once it's finished?

```
app.get('/test', loadUser, function(req, res) {

console.log("sent");
exchange.publish('task_queue', "funciona!", {
    'replyTo' : 'incoming'
});

res.redirect('/home'); 

}); 
```

(Note: I'm not sure if this is the best implementation. Hints, suggestions welcomed!)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:50:31.357

我解决了如下：

请求方在发送消息时设置回复和相关 ID 标头，并将处理回复所需的信息（在我的情况下，NodeJS，回调）存储在以相关 ID 作为索引的列表中。

响应方以reply-to 作为路由键发布到直接交换，并在消息上设置correlation-id。

现在，当消息返回到请求者时，它只是从列表中获取（并删除）所需的信息并处理响应。

编辑：当然，如果你想处理超时等，还有一些工作要做，但这一切都取决于你的用例。

# r - 在ggplot的地图上绘制饼图

> ID：10368180
> 
> 赞同：39
> 
> 时间：2012-04-28T22:40:21.567
> 
> 标签：r, ggplot2

这可能是一个愿望清单的事情，不确定（即，可能需要创建`geom_pie`这个才能发生）。我今天看到了一张带有饼图 的地图（[链接），如图所示。](http://katieschoettler.blogspot.com/2010_04_01_archive.html)![在此处输入图像描述](../Images/bb798202f58119627fe5e58b695d0311.png)

我不想争论饼图的优点，这更像是我可以在 ggplot 中做到这一点的练习吗？

我在下面提供了一个数据集（从我的投递箱加载），其中包含制作纽约州地图的地图数据和一些纯粹捏造的按县划分的种族百分比数据。我已经将这个种族构成作为与主数据集的合并和一个称为键的单独数据集。[我还认为 Bryan Goodrich 在另一篇关于集中县名的帖子 (这里](https://stackoverflow.com/questions/9441778/improve-centering-county-names-ggplot-maps)) 中对我的回应将有助于这个概念。

我们如何用 ggplot2 制作上面的地图？

**没有饼图的数据集和地图：**

```
load(url("http://dl.dropbox.com/u/61803503/nycounty.RData"))
head(ny); head(key)  #view the data set from my drop box
library(ggplot2)
ggplot(ny, aes(long, lat, group=group)) +  geom_polygon(colour='black', fill=NA)

#  Now how can we plot a pie chart of race on each county 
#  (sizing of the pie would also be controllable via a size 
#  parameter like other `geom_` functions). 
```

提前感谢您的想法。

**编辑：我刚刚在**[垃圾图表](http://junkcharts.typepad.com/junk_charts/2012/05/no-sorting-and-lack-of-structure-undermine-a-chart.html)上看到另一个案例，它为这种能力尖叫： ![在此处输入图像描述](../Images/bd7d4424738b0db9b21805c52f7e01b7.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-09-03T15:58:11.940

三年后，这个问题解决了。我已经将许多流程放在一起，感谢@Guangchuang Yu 的优秀**ggtree**包，这可以很容易地完成。请注意，从（2015 年 9 月 3 日）起，您需要安装 ggtree 的**1.0.18**版本，但这些最终会渗透到它们各自的存储库中。

[![在此处输入图像描述](../Images/9755723c25761089fc71131fa3595354.png)](https://i.stack.imgur.com/1SKFl.png)

我使用了以下资源来制作这个（链接将提供更详细的信息）：

1.  [ggtree博客](http://ygc.name/2015/08/31/)
2.  [移动ggplot图例](https://stackoverflow.com/q/21798364/1000343)
3.  [正确的ggtree版本](http://ygc.name/2015/08/31/subview/#comment-19127)
4.  [以多边形为中心](https://stackoverflow.com/a/9450588/1000343)

这是代码：

```
load(url("http://dl.dropbox.com/u/61803503/nycounty.RData"))
head(ny); head(key)  #view the data set from my drop box

if (!require("pacman")) install.packages("pacman")
p_load(ggplot2, ggtree, dplyr, tidyr, sp, maps, pipeR, grid, XML, gtable)

getLabelPoint <- function(county) {Polygon(county[c('long', 'lat')])@labpt}

df <- map_data('county', 'new york')                 # NY region county data
centroids <- by(df, df$subregion, getLabelPoint)     # Returns list
centroids <- do.call("rbind.data.frame", centroids)  # Convert to Data Frame
names(centroids) <- c('long', 'lat')                 # Appropriate Header

pops <-  "http://data.newsday.com/long-island/data/census/county-population-estimates-2012/" %>%
     readHTMLTable(which=1) %>%
     tbl_df() %>%
     select(1:2) %>%
     setNames(c("region", "population")) %>%
     mutate(
         population = {as.numeric(gsub("\\D", "", population))},
         region = tolower(gsub("\\s+[Cc]ounty|\\.", "", region)),
         #weight = ((1 - (1/(1 + exp(population/sum(population)))))/11) 
         weight = exp(population/sum(population)),
         weight = sqrt(weight/sum(weight))/3
     )

race_data_long <- add_rownames(centroids, "region") %>>%
    left_join({distinct(select(ny, region:other))}) %>>%
    left_join(pops) %>>%
    (~ race_data) %>>%
    gather(race, prop, white:other) %>%
    split(., .$region)

pies <- setNames(lapply(1:length(race_data_long), function(i){
    ggplot(race_data_long[[i]], aes(x=1, prop, fill=race)) +
        geom_bar(stat="identity", width=1) + 
        coord_polar(theta="y") + 
        theme_tree() + 
        xlab(NULL) + 
        ylab(NULL) + 
        theme_transparent() +
        theme(plot.margin=unit(c(0,0,0,0),"mm"))
}), names(race_data_long))

e1 <- ggplot(race_data_long[[1]], aes(x=1, prop, fill=race)) +
        geom_bar(stat="identity", width=1) + 
        coord_polar(theta="y") 

leg1 <- gtable_filter(ggplot_gtable(ggplot_build(e1)), "guide-box") 

p <- ggplot(ny, aes(long, lat, group=group)) +  
    geom_polygon(colour='black', fill=NA) +
    theme_bw() +
    annotation_custom(grob = leg1, xmin = -77.5, xmax = -78.5, ymin = 44, ymax = 45) 

n <- length(pies)

for (i in 1:n) {

    nms <- names(pies)[i]
    dat <- race_data[which(race_data$region == nms)[1], ]
    p <- subview(p, pies[[i]], x=unlist(dat[["long"]])[1], y=unlist(dat[["lat"]])[1], dat[["weight"]], dat[["weight"]])

}

print(p) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-31T20:37:27.760

这个功能应该在 ggplot 中，我认为它很快就会出现在 ggplot 中，但它目前在基础图中可用。我想我会发布这个只是为了比较。

```
load(url("http://dl.dropbox.com/u/61803503/nycounty.RData"))

library(plotrix)
e=10^-5
myglyff=function(gi) {
floating.pie(mean(gi$long),
             mean(gi$lat),
             x=c(gi[1,"white"]+e,
                 gi[1,"black"]+e,
                 gi[1,"hispanic"]+e,
                 gi[1,"asian"]+e,
                 gi[1,"other"]+e),
              radius=.1) #insert size variable here
}

g1=ny[which(ny$group==1),]
plot(g1$long,
     g1$lat,
     type='l',
     xlim=c(-80,-71.5),
     ylim=c(40.5,45.1))

myglyff(g1)

for(i in 2:62)
  {gi=ny[which(ny$group==i),]
    lines(gi$long,gi$lat)
    myglyff(gi)
  } 
```

此外，在基本图形中可能（可能有）更优雅的方式来执行此操作。

![这是纽约派！！](../Images/4a045d71b956500e0293c025e0c7cdf4.png)

如您所见，有很多问题需要解决。县的填充颜色。饼图往往太小或重叠。纬度和经度不进行投影，因此县的大小被扭曲了。

无论如何，我对其他人的想法很感兴趣。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-26T21:46:26.977

我已经编写了一些代码来使用网格图形来做到这一点。这里有一个例子：[https ://qdrsite.wordpress.com/2016/06/26/pies-on-a-map/](https://qdrsite.wordpress.com/2016/06/26/pies-on-a-map/)

这里的目标是将饼图与地图上的特定点相关联，而不一定是区域。对于这个特定的解决方案，有必要将地图坐标（纬度和经度）转换为 (0,1) 比例，以便将它们绘制在地图上的适当位置。网格包用于打印到包含绘图面板的视口。

代码：

```
# Pies On A Map
# Demonstration script
# By QDR

# Uses NLCD land cover data for different sites in the National Ecological Observatory Network.
# Each site consists of a number of different plots, and each plot has its own land cover classification.
# On a US map, plot a pie chart at the location of each site with the proportion of plots at that site within each land cover class.

# For this demo script, I've hard coded in the color scale, and included the data as a CSV linked from dropbox.

# Custom color scale (taken from the official NLCD legend)
nlcdcolors <- structure(c("#7F7F7F", "#FFB3CC", "#00B200", "#00FFFF", "#006600", "#E5CC99", "#00B2B2", "#FFFF00", "#B2B200", "#80FFCC"), .Names = c("unknown", "cultivatedCrops", "deciduousForest", "emergentHerbaceousWetlands", "evergreenForest", "grasslandHerbaceous", "mixedForest", "pastureHay", "shrubScrub", "woodyWetlands"))

# NLCD data for the NEON plots
nlcdtable_long <- read.csv(file='https://www.dropbox.com/s/x95p4dvoegfspax/demo_nlcdneon.csv?raw=1', row.names=NULL, stringsAsFactors=FALSE)

library(ggplot2)
library(plyr)
library(grid)

# Create a blank state map. The geom_tile() is included because it allows a legend for all the pie charts to be printed, although it does not
statemap <- ggplot(nlcdtable_long, aes(decimalLongitude,decimalLatitude,fill=nlcdClass)) +
geom_tile() +
borders('state', fill='beige') + coord_map() +
scale_x_continuous(limits=c(-125,-65), expand=c(0,0), name = 'Longitude') +
scale_y_continuous(limits=c(25, 50), expand=c(0,0), name = 'Latitude') +
scale_fill_manual(values = nlcdcolors, name = 'NLCD Classification')

# Create a list of ggplot objects. Each one is the pie chart for each site with all labels removed.
pies <- dlply(nlcdtable_long, .(siteID), function(z)
ggplot(z, aes(x=factor(1), y=prop_plots, fill=nlcdClass)) +
geom_bar(stat='identity', width=1) +
coord_polar(theta='y') +
scale_fill_manual(values = nlcdcolors) +
theme(axis.line=element_blank(),
axis.text.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
legend.position="none",
panel.background=element_blank(),
panel.border=element_blank(),
panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),
plot.background=element_blank()))

# Use the latitude and longitude maxima and minima from the map to calculate the coordinates of each site location on a scale of 0 to 1, within the map panel.
piecoords <- ddply(nlcdtable_long, .(siteID), function(x) with(x, data.frame(
siteID = siteID[1],
x = (decimalLongitude[1]+125)/60,
y = (decimalLatitude[1]-25)/25
)))

# Print the state map.
statemap

# Use a function from the grid package to move into the viewport that contains the plot panel, so that we can plot the individual pies in their correct locations on the map.
downViewport('panel.3-4-3-4')

# Here is the fun part: loop through the pies list. At each iteration, print the ggplot object at the correct location on the viewport. The y coordinate is shifted by half the height of the pie (set at 10% of the height of the map) so that the pie will be centered at the correct coordinate.
for (i in 1:length(pies)) 
  print(pies[[i]], vp=dataViewport(xData=c(-125,-65), yData=c(25,50), clip='off',xscale = c(-125,-65), yscale=c(25,50), x=piecoords$x[i], y=piecoords$y[i]-.06, height=.12, width=.12)) 
```

结果如下所示：

![带馅饼的地图](../Images/f9e5f18e2ccb85481346a6c9d69af936.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-11T06:09:21.667

我偶然发现了一个看起来像这样的函数：“mapplots”包中的“add.pie”。

包中的示例如下。

```
plot(NA,NA, xlim=c(-1,1), ylim=c(-1,1) )
add.pie(z=rpois(6,10), x=-0.5, y=0.5, radius=0.5)
add.pie(z=rpois(4,10), x=0.5, y=-0.5, radius=0.3) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-18T10:18:35.170

OP 的原始要求略有不同，但这似乎是一个适当的答案/更新。

如果您想要交互式 Google 地图，从[`googleway`v2.6.0](https://github.com/SymbolixAU/googleway/blob/master/NEWS.md)`info_windows`开始，您可以在地图图层内添加图表。

查看`?googleway::google_charts`文档和示例

```
library(googleway)

set_key("GOOGLE_MAP_KEY")

## create some dummy chart data
markerCharts <- data.frame(stop_id = rep(tram_stops$stop_id, each = 3))
markerCharts$variable <- c("yes", "no", "maybe")
markerCharts$value <- sample(1:10, size = nrow(markerCharts), replace = T)

chartList <- list(
  data = markerCharts
  , type = 'pie'
  , options = list(
    title = "my pie"
    , is3D = TRUE
    , height = 240
    , width = 240
    , colors = c('#440154', '#21908C', '#FDE725')
    )
  )

google_map() %>%
  add_markers(
    data = tram_stops
    , id = "stop_id"
    , info_window = chartList
  ) 
```

[![在此处输入图像描述](../Images/761ce4ebc4fd0893461143f99aa4f7c5.png)](https://i.stack.imgur.com/arGeq.jpg)

# javascript - Find by clicking any cell or table data, its left and top headers

> ID：10368183
> 
> 赞同：1
> 
> 时间：2012-04-28T22:40:34.700
> 
> 标签：javascript, jquery, html, css

I have multiple column headers that spans of multiple column and I would like to find the correct header number/count for the columns. Also some of the table data have rowspan and colspan.

I want to be able to click any cell or table data and get its left and top headers.

1.  So if I click the with "D9:LH1-TH4(H4a)" I should get:

    *   Left Header is: LH1, Top Header1 is TH4 and Top Header 2 is H4a
2.  And if I click the with "D3:LH2-TH2(H2b-H4a)" I should get:

    *   Left Header is LH2, Top Header 1 is TH2 and Top Header 2 is H2b

* * *

Example:

```
<table width="200" border="1" style="background-color:#000; color:#FFF">
  <tr>
    <th scope="col">&nbsp;</th>
    <th colspan="2" scope="col"> TH1 </th>
    <th colspan="4" scope="col"> TH2 </th>
    <th colspan="6" scope="col"> TH4 </th>
  </tr>
    <tr>
    <th scope="col">&nbsp;</th>
    <th scope="col"> H1a </th>
    <th scope="col">H1b</th>
    <th scope="col"> H2a</th>
    <th scope="col">H2b</th>
    <th scope="col">H2c</th>
    <th scope="col">H2d</th>
    <th colspan="6" scope="col"> H4a </th>
  </tr>
  <tr>
    <th rowspan="3" scope="row"><span>LH1</span></th>
    <td colspan="2" rowspan="3">D1:LH1-TH1(H1a-H1b)</td>
    <td colspan="3" rowspan="2">D2:LH1-TH2(H2a-H2c)</td>
    <td rowspan="3">D5:LH1-TH2(H2d)</td>
    <td rowspan="3">D6:LH1-TH4(H2a-H2c)</td>
    <td colspan="2">D7:LH1-TH4(H4a)</td>
    <td>D8:LH1-TH4(H4a)</td>
    <td rowspan="3">D13:LH1-TH4(H4a)</td>
    <td rowspan="3">D14:LH1-TH4(H4a)</td>
  </tr>
  <tr>
    <td colspan="3">D9:LH1-TH4(H4a)</td>
  </tr>
  <tr>
    <td colspan="2">D3:LH1-TH2(H2a-H2b)</td>
    <td>D4:LH1-TH2(H2c)</td>
    <td>D10:LH1-TH4(H4a)</td>
    <td>D11:LH1-TH4(H4a)</td>
    <td>D12:LH11-TH4(H4a)</td>
  </tr>
  <tr>
    <th scope="row"><span>LH2</span></th>
    <td colspan="2" >D1:LH2-TH1(H1a-H1b)</td>
    <td colspan="3">D2:LH2-TH2(H2a-H2c)</td>
    <td colspan="5">D3:LH2-TH2(H2b-H4a)</td>
    <td>D4:LH2-TH4(H4a)</td>
    <td>D5:LH2-TH4(H4a)</td>
  </tr>
</table>​ 
```

* * *

[Please see this link](http://jsfiddle.net/nathan406/UbsWW/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:18:38.867

这非常棘手。您可以使用父偏移量找到您的标题。

让它在这个小提琴中工作 [http://jsfiddle.net/work4liberty/fk6sy/14/](http://jsfiddle.net/work4liberty/fk6sy/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:05:10.800

```
$('td')​.on('click', function() {
    var text = $(this).text().split(':')[1],
        LH = text.split('-')[0],
        TH = text.split('-')[1].split('(')[0],
        TH2 = text.split('-')[1].split('(')[1];
    console.log('Left header is '+LH+', Top header 1 is '+TH+' and Top header 2 is '+TH2)
})​;​ 
```

[小提琴](http://jsfiddle.net/adeneo/XHjMD/)

# php - multiple automated tasks to run ubuntu 10.04 server

> ID：10368184
> 
> 赞同：0
> 
> 时间：2012-04-28T22:40:40.280
> 
> 标签：php, mysql, cron, ubuntu-server

I need to run automated tasks every 15\. The tasks is for my server (call it server A, Ubuntu 10.04 LAMP) to query for updates to another server (Server B).

I have multiple users to query for, possibly 14 (or more) users. As of now, the scripts are written in PHP. They do the following:

1.  request Server B for updates on users
2.  If Server B says there are updates, then Server A retrieves the updates
3.  In Server A, update DB with the new data for the users in
4.  run calculations in server A
5.  send prompts to users that I received data updates from.

I know **cron jobs** might be the way to go, but there could be a scenario where I might have a cron job for every user. Is that reasonable? Or should I force it to be one cron job querying data for all my users?

Also, the server I'm querying has a java api that I can use to query it. Which means I could develop a java servlet to do the same. I've had trouble with this approach but I'm looking for feedback if this is the way to go. I'm not familiar with Tomcat and I don't fully understand it yet.

Summary: I need my server to run tasks automatically every 15 mins, the requests data from another server, updates its DB and then send prompts to users. What's are recommended approaches?

Thanks for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:01:03.343

创建由 cron 触发的单个脚本，该脚本循环遍历每个用户并为每个用户执行所有三个步骤： 伪代码：

```
query for list of users from local DB;
foreach(users as user){
   check for updates;
   if(updates){
      update db;
      email user;
   }
} 
```

如果您有很多用户或 API 很慢，您可能想要设置一个较长的脚本超时 (ini_set)，或者您可以添加一个 TIMESTAMP DB 列“LastUpdateCheck”并更频繁地运行 cron（每 30 秒一次？）但将更新/API 查询限制为每个实例一到两个用户（更新时间最早的用户）

# android - Higher Level API For Sensor Values Pitch And Roll

> ID：10368186
> 
> 赞同：1
> 
> 时间：2012-04-28T22:40:53.127
> 
> 标签：android, sensors, device-orientation, pitch

I am implementing my own camera Activity. To rotate the captured image I need to know the orientation at the time of shooting. Is there a higher level API for the sensor values pitch and roll that tells me my device is oriented in:

top-down - holding the phone normal, portrait
down-top
right-left - landscape the top of the phone is on the right side
left-right - landscape the top of the phone is on the left side

Or is there any other way to geht it directly from the system?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:01:39.863

可悲的是，当相机不处于横向模式时（这是 android 上相机的“自然”方向），相机在 android 上以一种奇怪的方式工作。

最好的办法是将活动设置为横向模式，并添加 onConfigurationChanged 事件（并将 android:configChanges="orientation" 添加到清单中）以获得当前方向。

捕获图像时，请检查方向并根据您希望拥有的任何逻辑进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:13:27.170

好的解决了我的问题到一定程度，所以它对我有用，我忽略了自下而上的识别。

```
public class DeviceOrientation {

public static final int ORIENTATION_PORTRAIT = 0;
public static final int ORIENTATION_LANDSCAPE_REVERSE = 1;
public static final int ORIENTATION_LANDSCAPE = 2;
public static final int ORIENTATION_PORTRAIT_REVERSE = 3;

int smoothness = 1;
public float averagePitch = 0;
public float averageRoll = 0;
public int orientation = ORIENTATION_PORTRAIT;

private float[] pitches;
private float[] rolls;

public DeviceOrientation(int smoothness) {
    this.smoothness = smoothness;

    pitches = new float[smoothness];
    rolls = new float[smoothness];
}

public void addSensorEvent(SensorEvent event) {
    azimuth = event.values[0];

    averagePitch = addValue(event.values[1], pitches);
    averageRoll = addValue(event.values[2], rolls);

    orientation = calculateOrientation();
}

private float addValue(float value, float[] values) {
    float average = 0;

    for(int i=1; i<smoothness; i++) {
        values[i-1] = values[i];
        average += values[i];
    }
    values[smoothness-1] = value;
    average = (average + value)/smoothness;

    return average;
}

/** handles all 4 possible positions perfectly */
private int calculateOrientation() {
    // finding local orientation dip
    if (((orientation == ORIENTATION_PORTRAIT || orientation == ORIENTATION_PORTRAIT_REVERSE)
            && (averageRoll > -30 && averageRoll < 30))) {
        if (averagePitch > 0)
            return ORIENTATION_PORTRAIT_REVERSE;
        else
            return ORIENTATION_PORTRAIT;
    } else {
        // divides between all orientations
        if (Math.abs(averagePitch) >= 30) {
            if (averagePitch > 0)
                return ORIENTATION_PORTRAIT_REVERSE;
            else
                return ORIENTATION_PORTRAIT;
        } else {
                if (averageRoll > 0) {
                    return ORIENTATION_LANDSCAPE_REVERSE;
                } else {
                    return ORIENTATION_LANDSCAPE;
                }
        }
    }
} 
```

说明：如果我处于纵向模式并将移动设备向前倾斜直到它处于水平位置，由于其余代码，它将切换到横向。因此，我检查它是否是纵向的，并使条件难以离开此模式。这就是我对局部倾角的看法。其余的只是分为所有 3 个方向。

一件事是坏的。如果设备在 Landscape_x 中并向后倾斜一些度数，则 pich 从 ~2 跳到 ~175。那时我的代码在横向和纵向之间翻转。

平滑度将通过组合最后 n 个值并计算平均值来平滑传感器数据的值。这不是真的必要。

我希望这对其他人有帮助。如果您可以进一步改进代码，请告诉我。

# php - how to transfer textboxt value between 2 cases in switch

> ID：10368188
> 
> 赞同：0
> 
> 时间：2012-04-28T22:41:11.437
> 
> 标签：php

every one , I face small problem I hope any one help me . It is e-shopping site , I just want little help. the idea after pressing Add to cart link it will transfare him to cart page, there is two link edit and remove , the remove will remove the item , and that is working . but when some one press edit link , textbox in the quantity column will appear ans save link will appear also once he press save , there will be update in the databse

The problem is : 1- how to transfer textbox value from case "showupdate" to another case "savee"? I 've tried to `$qq=$_POST['qun'];` and send the variable in the link of save beside the action and id but it doesnot work always it said undefined variable 'qun'

The second problem is : the textbox and save link appears in all items on the cart , i do not want that , I want just that item who i press edit beside it , to change to textbox and save link will apper.

i know that i 've put while loop , that is just to make sure that the id of item got it when press link edit only who will get textbox and save link

here is the code please please help me,

```
switch($action){
case "add":
{$id=$_REQUEST['id'];
 $query='insert into cart values("1",'.$id.',"1")';
 $result=mysql_query($query);
 header("location:cart.php?action=show");
    break;
}
case "remove":
{ $id=$_REQUEST['id'];
echo $id;
$query='delete from cart where itemId='.$id.'' or die(mysql_error());
$result = mysql_query($query) or die(mysql_error());
header ("location:cart.php?action=show");
break;}

    case "showupdate":
    { $id=$_REQUEST['id'];
      $sql2="select * from cart";
      $result2= mysql_query($sql2);
      while($row2 = mysql_fetch_array($result2))
    {   if ( $id == $row2['itemId'])
        {   $totalCost =0;
            $query = "select * from cart inner join items on cart.itemId = items.itemId";
            $result = mysql_query($query);
            ?>
            <table width="100%" border="1"> 
            <?php while($row = mysql_fetch_array($result)){
            $totalCost += ($row["qty"] * $row["itemPrice"]);
            ?>
            <tr>
            <td><img src="<?php echo $row["image"];?>" height="50" width="50"/></td>
            <td><?php echo $row["itemName"]; ?></td>
            <td>SR<?php echo $row["itemPrice"]; ?></td>
            <td>
            <form method="POST" name="form1">
            <input type = "text" name="qun" value="<?php echo $row['qty'];?>" size="10"/> 
            </form>
            </td>
            <td><a href="cart.php?action=savee&id=<?php echo $row["itemId"]; ?>">Save</a></td>
            <td><a href="cart.php?action=remove&id=<?php echo $row["itemId"]; ?>">Remove</a></td>
            </tr>
            <?php } 

           // Increment the total cost of all items
           $totalCost += ($row["qty"] * $row["itemPrice"]);
           $totalCost = $totalCost + ($row["qty"] * $row["itemPrice"]); ?>
           <tr> <td colspan="2"> <a href="homestore.php">Keep Shopping</a></td>
           <td colspan="2"> <b>Total: SR<?php echo $totalCost; ?></b></td></tr>
           </table>
           <?php  } 
        } break;}

    case "savee":
    {  $id=$_REQUEST['id'];
       $sql='update cart set qty='.$_POST['qun'].'where itemId='.$id.''or die(mysql_error());
       $result=mysql_query($sql)or die(mysql_error());
        header ("location:cart.php?action=show");
        break;
    }

    case "show":
    {
    $totalCost =0;
    $query = "select * from cart inner join items on cart.itemId = items.itemId";
    $result = mysql_query($query);
    ?>
    <table width="100%" border="1"> 
        <?php while($row = mysql_fetch_array($result))
        {   
        $totalCost += ($row["qty"] * $row["itemPrice"]);
        ?>
        <tr>
        <td><img src="<?php echo $row["image"];?>" height="50" width="50"/></td>
        <td><?php echo $row["itemName"]; ?></td>
        <td>SR<?php echo $row["itemPrice"]; ?></td>
        <td><a href="cart.php?action=showupdate&id=<?php echo $row["itemId"]; ?>">edit</a></td>
        <td><a href="cart.php?action=remove&id=<?php echo $row["itemId"]; ?>">Remove</a></td>
       </tr>
    <?php } 

    // Increment the total cost of all items
    $totalCost += ($row["qty"] * $row["itemPrice"]);
    $totalCost = $totalCost + ($row["qty"] * $row["itemPrice"]); ?>
    <tr> <td colspan="2"> <a href="homestore.php">Keep Shopping</a></td>
    <td colspan="2"> <b>Total: SR<?php echo $totalCost; ?></b></td></tr>
    </table>

    <?php break; }
    }?> 
```

If I click add link , it will transfare the action="add" and the id of that item after that it will insert to switch statment in add case because there is header ("location..") it will transfare immeddiatly to show case which show us the table edit + remove link once click on edit link it will go to showupdate case which show textbox + save link once click save it will go to savee case.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:08:33.820

A. 要`$_POST['qun']`一直使用，您需要将其保存在会话中，请参阅[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)获取文档

例子

```
session_start();
$_SESSION['qun'] = $_POST['qun'] ;

// to get qun back
echo $_SESSION['qun'] ; 
```

B. 你的代码充满了 SQL 注入尝试`mysql_real_escape_string`用于所有发布的数据

```
 $id = mysql_real_escape_string ( $_POST ['id'] ); 
```

C. 对不起，我可以`class`为你写完整的，但这是一个例子，你可以让你的代码看起来有多干净

```
include 'runner.class.php';
$runner = new Runner ( $action );
$runner->process (); 
```

//runner.class.php

```
class Runner {
    private $action;
    private $id;
    private $qun;
    function __construct($action) {
        $this->action = $action;
        $this->id = mysql_real_escape_string ( $_REQUEST ['id'] );
        $this->qun = mysql_real_escape_string ( $_REQUEST ['id'] );

    }

    function process() {
        switch ($this->action) {
            case "add" :
                $this->add ();
                break;

            case "remove" :
                $this->remove ();
                break;

            case "savee" :
                $this->save ();
                break;
            case "show" :
                $this->show ();
                break;

        }
    }
    function add() {
        $query = 'insert into cart values("1",' . $this->id . ',"1")';
        $result = mysql_query ( $query );
        header ( "Location: cart.php?action=show" );
    }

    function remove() {
        $query = 'delete from cart where itemId=' . $this->id . '' or die ( mysql_error () );
        $result = mysql_query ( $query ) or die ( mysql_error () );
        header ( "Location: cart.php?action=show" );
    }

    function save() {
        $_SESSION ['qun'] = mysql_real_escape_string ( $_POST ['qun'] ); // Save
                                                                         // Quu
        $sql = 'update cart set qty=' . $_POST ['qun'] . 'where itemId=' . $this->id . '' or die ( mysql_error () );
        $result = mysql_query ( $sql ) or die ( mysql_error () );
        header ( "Location: cart.php?action=show" );
        break;
    }

    function showUpdate() {
        $_SESSION ['qun'] = mysql_real_escape_string ( $_POST ['qun'] ); // Save Quu
        // Add Code
    }

    function show() {
        $qun = $_SESSION ['qun']; // Use Qui
         // Add Code
    }

} 
```

# css - Ckeditor Outline in Chrome/Safari

> ID：10368190
> 
> 赞同：0
> 
> 时间：2012-04-28T22:41:39.490
> 
> 标签：css, google-chrome, safari, ckeditor

If anyone has figured out how to remove the outline that Chrome & Safari add on focus to a textarea, specifically in ckeditor, I'd love to hear it. I've applied multiple variants of "outline:none" to:

1.  A custom CSS file I defined in config.js
2.  The editor.css file of the skin I'm using
3.  The main CSS file of the actual page

Nothing works, found a suggestion here [http://cksource.com/forums/viewtopic.php?t=17983](http://cksource.com/forums/viewtopic.php?t=17983) that claimed to work, but no dice.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:01:41.457

我知道我在这个游戏上迟到了，但我在尝试自己解决问题时发现了这个问题。

幸运的是，我能够弄清楚。

```
.cke_focus {
   outline: none;
} 
```

只要有焦点， .cke_focus 类就会通过 javascript 添加到元素中。

我将此添加到我自己的样式表中，该样式表在 CKEditor 包含的样式表之后调用。如果需要，您可以随时提高特异性，但您不应该这样做。

# r - Putting expressions (plotmath) in the legend key labels

> ID：10368191
> 
> 赞同：4
> 
> 时间：2012-04-28T22:41:47.387
> 
> 标签：r, ggplot2

How can I put expressions (plotmath) into the legend key labels of the following plot?

I am aware of [How to use Greek symbols in ggplot2?](https://stackoverflow.com/questions/5293715/how-to-use-greek-symbols-in-ggplot2) and the link therein, but whenever I use `scale_..._manual` function, I obtain a second legend (see below).

```
require(ggplot2)
require(reshape2)
require(plyr)

## parameters
d <- c(2, 5, 10, 20, 50, 100)
tau <- c("t1", "t2", "t3")
fam <- c("f1", "f2", "f3", "f4", "f5")
meth <- c("m1", "m2", "m3", "m4")

## lengths
nd <- length(d)
ntau <- length(tau)
nfam <- length(fam)
nmeth <- length(meth)

## build result array containing the measurements
arr <- array(rep(NA, nd*ntau*nfam*nmeth), dim=c(nd, ntau, nfam, nmeth),
             dimnames=list(d=d, tau=tau, fam=fam, meth=meth))
for(i in 1:nd){
    for(j in 1:ntau){
        for(k in 1:nfam){
            for(l in 1:nmeth){
                arr[i,j,k,l] <- i+j+k+l+runif(1)
            }
        }
    }
}

## create molten data
mdf <- reshape2:::melt.array(arr, formula = . ~ d + tau + fam + meth) # create molten data frame
mdf$tau. <- factor(mdf$tau, levels=tau, labels=paste("tau==", tau, sep="")) # expression for tau
mdf$fam. <- factor(mdf$fam, levels=fam, labels=paste("alpha==", fam, sep="")) # expression for family
meth.labs <- lapply(1:nmeth, function(i) bquote(gamma==.(i))) # expression for methods

## plot
ggplot(mdf, aes(x=d, y=value, shape=meth, linetype=meth)) + geom_line() +
    geom_point() + facet_grid(fam. ~ tau., scales="free_y", labeller=label_parsed) +
    ## scale_linetype_manual(values=1:4, breaks=meth, labels=meth.labs) + # problem: adds another legend
    scale_x_continuous(trans="log10", breaks=d, labels=d) +
    scale_y_continuous(trans="log10") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T00:04:18.167

如果我同时使用*这两个* `scale_*_manual`函数，我会得到一个带有表达式的图例：

```
ggplot(mdf, aes(x=d, y=value, shape=meth, linetype=meth)) + geom_line() +
    geom_point() + facet_grid(fam. ~ tau., scales="free_y", labeller=label_parsed) +
    ## scale_linetype_manual(values=1:4, breaks=meth, labels=meth.labs) + # problem: adds another legend
    scale_x_continuous(trans="log10", breaks=d, labels=d) +
    scale_y_continuous(trans="log10") + 
    scale_linetype_manual(breaks = c('m1','m2','m3','m4'),values = 1:4,labels = meth.labs) +
    scale_shape_manual(breaks = c('m1','m2','m3','m4'),values = 1:4,labels = meth.labs) 
```

![在此处输入图像描述](../Images/5f8c4778e1307481bbf127fab12f8751.png)

# php - jqgrid three dependent dropdowns

> ID：10368194
> 
> 赞同：1
> 
> 时间：2012-04-28T22:41:57.073
> 
> 标签：php, jquery, select, jqgrid, drop-down-menu

Hi i am trying to build a 3 levels dependent dropdowns in jqgrid. i follow this [example](https://stackoverflow.com/questions/4469650/jqgrid-incorrect-select-drop-down-option-values-in-edit-box/4480184#4480184) and works great but i need 3 levels of dependent dropdowns and not two, i made some changes and all dropdowns begins with correct data, and change event from first dropdown works good. My problem is the middle dropdown is not triggering the change event at all. It is not the best solution but it is partially working, it will be done if i can fire the change event in the dropdown in the middle. thanks in advance

```
 var divisiones = {"1":"DIVISION_NOM_COLCH","3":"DIVISION_NOM_ESPU","4":"DIVISION_NOM_PLAS","5":"test"};
var categorias = {"6":"CATEGORIA_ORG","9":"sub test1","10":"sub test2","11":"sub test13","12":"CATEGORIA_ESPU_B","13":"CATEGORIA_ESPU_Z","14":"CATEGORIA_PLAST_B","15":"CATEGORIA_PLAST_ENVO","16":"CATEGORIA_IE","17":"CATEGORIA_Z","18":"CATEGORIA_C","19":"CATEGORIA_H"};
var familias = {"1":"FAMILIA_ORG","2":"FAMILIA_IEV","3":"FAMILIA_Z","4":"FAMILIA_COL","5":"FAMILIA_HOT","6":"FAMILIA_ESPU_R","7":"FAMILIA_ESPU_P","8":"FAMILIA_ESPU_C","9":"FAMILIA_ESPU_R","10":"FAMILIA_ESPU_P","11":"FAMILIA_ESPU_C","12":"aaa","13":"bbb","14":"ccc-1","17":"FAMILIA_PLAST_CO","18":"FAMILIA_PLAST_IND","19":"FAMILIA_PLAST_EM","20":"FAMILIA_PLAST_L","21":"DEFAULT","22":"DEFAULT","23":"DEFAULT"};
var categoriasDeDivisiones = {1:{'6':'CATEGORIA_ORG', '16':'CATEGORIA_IE', '17':'CATEGORIA_Z', '18':'CATEGORIA_C', '19':'CATEGORIA_H'},3:{'12':'CATEGORIA_ESPU_B', '13':'CATEGORIA_ESPU_Z'},4:{'14':'CATEGORIA_PLAST_B', '15':'CATEGORIA_PLAST_ENVO'},5:{'9':'sub test1', '10':'sub test2', '11':'sub test13'}};
var familiasDeCategorias = {6:{'1':'FAMILIA_ORG', '21':'DEFAULT'},9:{'12':'aaa'},10:{'13':'bbb'},11:{'14':'ccc-1'},12:{'6':'FAMILIA_ESPU_R', '7':'FAMILIA_ESPU_P', '8':'FAMILIA_ESPU_C'},13:{'9':'FAMILIA_ESPU_R', '10':'FAMILIA_ESPU_P', '11':'FAMILIA_ESPU_C'},14:{'17':'FAMILIA_PLAST_CO', '18':'FAMILIA_PLAST_IND'},15:{'19':'FAMILIA_PLAST_EM', '20':'FAMILIA_PLAST_L'},16:{'2':'FAMILIA_IEV', '22':'DEFAULT'},17:{'3':'FAMILIA_Z', '23':'DEFAULT'},18:{'4':'FAMILIA_COL'},19:{'5':'FAMILIA_HOT'}};

var lastSel = -1;
var grid = jQuery("#subfamilia");

var resetDependienteValuesC = function () {
    jQuery("#subfamilia").setColProp('categoria', { editoptions: { value: categorias} });
};
var resetDependienteValuesF = function () {
    jQuery("#subfamilia").setColProp('familia', { editoptions: { value: familias} });
};

jQuery("#subfamilia").jqGrid({
    height: 600,
    width:700,
    url:"http://myurl/listar.json",
    datatype: "json",
    mtype:'POST',
    colNames:['ID','División', 'Categoría','Familia','Nombre','Descripción','Url','Visible','Orden'],
    colModel:[
        {name:'id',index:'id', width:30, editable:true, editoptions:{readonly:true}, sorttype:'int'},
        {name:'division',index:'division', width:100, editable:true, edittype: 'select',
            editoptions: {
                value: divisiones,
                dataInit: function (elem) {
                    var v = $(elem).val();
                    grid.setColProp('categoria', { editoptions: { value: categoriasDeDivisiones[v]} });
                    //MOD-MM pasar array inicial para familia
                    var id = jQuery("#subfamilia").jqGrid('getGridParam','selrow'); 
                    var ret = jQuery("#subfamilia").jqGrid('getRowData',id); 
                    var cat = ret.categoria;

                    $.each(categorias, function(key, value) {
                        if(value==cat){
                            //alert("key:"+key+" value:"+value);
                            grid.setColProp('familia', { editoptions: { value: familiasDeCategorias[key]} });
                        }
                    });

                },
                dataEvents: [
                    {
                        type: 'change',
                        fn: function(e) {
                            //construir categorias de la division seleccionada
                            resetDependienteValuesC();
                            resetDependienteValuesF();
                            var v = parseInt($(e.target).val(), 10);
                            var sc = categoriasDeDivisiones[v];
                            var newOptions = '';
                            for (var categoriaId in sc) {
                                if (sc.hasOwnProperty(categoriaId)) {
                                    newOptions += '<option role="option" value="' + categoriaId +
                                        '">' + categorias[categoriaId] + '</option>';
                                }
                            }
                            if ($(e.target).is('.FormElement')) {
                                var form = $(e.target).closest('form.FormGrid');
                                $("select#categoria.FormElement", form[0]).html(newOptions);

                            }
                             //MOD-MM
                                //construir familia de la primera categoria de la division seleccionada
                                //(al cambiar division, categoria tiene el primer valor asociado del array)
                                //obtener el primer key del array categorias
                                var i=0;
                                var fcat=0;
                                $.each(sc, function(key, value) {
                                    i=i+1;
                                    if(i==1){
                                        fcat = key;
                                    }
                                });
                                //buscar las familias que pertenecen a la primera categoria encontrada
                                var newOptions2 = '';
                                var fd=familiasDeCategorias[fcat];
                                for (var famId in fd) {
                                    if (fd.hasOwnProperty(famId)) {
                                        newOptions2 += '<option role="option" value="' + famId +
                                            '">' + familias[famId] + '</option>';
                                    }
                                }
                                $("select#familia.FormElement", form[0]).html(newOptions2);
                        }
                    }
                ]
            }
        },   
        {
            name: 'categoria',index:'categoria', width: 200, editable: true, edittype: 'select', 
            editoptions: { 
            readonly:true,
                value: categorias,
                dataEvents: [
                        { 
                        type: 'change',
                        fn: function(e) {
                alert("entra");
                            resetDependienteValuesF();
                            var w = parseInt($(e.target).val(), 10);

                            var scf = familiasDeCategorias[w];
                            var newOptions = '';
                            for (var familiaId in scf) {
                                if (scf.hasOwnProperty(familiaId)) {
                                    newOptions += '<option role="option" value="' + familiaId +
                                        '">' + familias[familiaId] + '</option>';
                                }
                            }
                            if ($(e.target).is('.FormElement')) {
                                var form = $(e.target).closest('form.FormGrid');
                                $("select#familia.FormElement", form[0]).html(newOptions);
                            }
                        }
                    }
                ]
            }
        },
        {
            name: 'familia',index:'familia', width: 200, editable: true, 
            edittype: 'select', editoptions: { value: familias }
        },
        {name:'nombre',index:'nombre', width:150, editable:true, editrules:{required:true}},
        {name:'descripcion',index:'descripcion', width:80, editable:true, edittype:"textarea"},
        {name:'url',index:'url', width:80, align:"right",editable:true},
        {name:'visible',index:'visible', width:35, align:"right",editable:true,edittype:"checkbox",editoptions: {value:"1:0"}}, 
        {name:'orden',index:'orden', width:35, align:"right",editable:true,editrules:{number:true}}

    ],
    onSelectRow: function (id) {
        if (id && id !== lastSel) {
            if (lastSel != -1) {
                resetDependienteValuesC();
                resetDependienteValuesF();
                grid.restoreRow(lastSel);
            }
            lastSel = id;
        }
    },
    rowNum:25,
    rowList:[10,20,30],
    pager: '#psubfamilia',
    sortname: 'id',
    viewrecords: true,
    sortorder: "asc",
    editurl: "http://myurl/editar.json", 
    caption:"Páginas"
});
jQuery("#subfamilia").jqGrid('navGrid','#psubfamilia',{edit:true,add:true,del:true,view:true,search:false},
{
    afterSubmit:processAddEdit,
    recreateForm:true,
    onClose:function() {
        resetDependienteValuesC();
        resetDependienteValuesF();
    },
    closeAfterEdit: true,
    closeAfterAdd: true,
    closeAfterDel: true,
    reloadAfterSubmit:true
},{
    afterSubmit:processAddEdit,
    recreateForm:true,
    onClose:function() {
        resetDependienteValuesC();
        resetDependienteValuesF();
    },
    closeAfterAdd: true,
    closeAfterEdit: true,
    closeAfterDel: true,
    reloadAfterSubmit:true
},{
    afterSubmit:processAddEdit,
    recreateForm:true,
    onClose:function() {
        resetDependienteValuesC();
        resetDependienteValuesF();
    },
    closeAfterEdit: true,
    closeAfterAdd: true,
    closeAfterDel: true,
    reloadAfterSubmit:true 

},{},{}
  );
function processAddEdit(response,postdata){
    var success=true;
    var message="Error: ";
    var new_id=13;
    var json = eval('(' + response.responseText + ')');
    if(json.errors.length>0) {
        success = false;
        for(i=0; i < json.errors.length; i++) {
            message += json.errors[i] + '<br/>';
        }
    }
    return [success,message,new_id];
} 
```

# ruby-on-rails - rails中未定义的方法

> ID：10368199
> 
> 赞同：0
> 
> 时间：2012-04-28T22:42:45.277
> 
> 标签：ruby-on-rails, undefined

我得到错误

```
undefined method `favorite_relationships_path' 
```

当我显示此表单时：

```
<%= form_for(current_user.favorite_relationships.build(lesson_id: @lesson.id),
             remote: true) do |f| %>
  <div><%= f.hidden_field :lesson_id %></div>
  <%= f.submit "Favorite", class: "btn btn-large btn-primary" %>
<% end %> 
```

我不确定为什么。我有一个名为 favorite_relationships_controller.rb 的控制器和一个带有代码的模型文件 favorite_relationship.rb

```
class FavoriteRelationship < ActiveRecord::Base
  attr_accessible :lesson_id
  belongs_to :user
  belongs_to :lesson
end 
```

我的用户模型也有：

```
 has_many :favorite_relationships
  has_many :lessons, :through => :favorite_relationships 
```

我真的不确定为什么我会收到那个错误。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T22:47:27.723

定义控制器、动作和视图是不够的。您需要定义*路由*以`config/routes.rb`将 URL 连接到您的控制器/操作。在路由文件中定义 RESTful 资源`resources :favourite_relationships`是导致 Rails 生成`*_path`和`*_url`助手的原因；在您这样做之前，请求无法到达您的应用程序，您的应用程序也无法根据您的模型生成路由。

您的路线文件应如下所示：

```
MyApp::Application.routes.draw do
  resources :favourite_relationships
end 
```

这会生成 RESTful 资源所需的典型“CRUD”路由：

```
favourite_relationships     GET    /favourite_relationships(.:format)          {:action=>"index", :controller=>"favourite_relationships"}
                            POST   /favourite_relationships(.:format)          {:action=>"create", :controller=>"favourite_relationships"}
 new_favourite_relationship GET    /favourite_relationships/new(.:format)      {:action=>"new", :controller=>"favourite_relationships"}
edit_favourite_relationship GET    /favourite_relationships/:id/edit(.:format) {:action=>"edit", :controller=>"favourite_relationships"}
     favourite_relationship GET    /favourite_relationships/:id(.:format)      {:action=>"show", :controller=>"favourite_relationships"}
                            PUT    /favourite_relationships/:id(.:format)      {:action=>"update", :controller=>"favourite_relationships"}
                            DELETE /favourite_relationships/:id(.:format)      {:action=>"destroy", :controller=>"favourite_relationships"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T22:48:30.783

Rails 有路线的助手`_path`和`_url`助手，它们设置在`config/routes.rb`. 您需要确保已为`FavouriteRelationshipController`;定义了路线。就像是：

```
resources :favourite_relationships 
```

您可以使用该`rake routes`命令检查为您的应用程序定义的路由。

[您可以在Rails Routing from the Outside In](http://guides.rubyonrails.org/routing.html)指南中找到有关路由的更多信息。

# java - Java：如何模拟概率？

> ID：10368202
> 
> 赞同：1
> 
> 时间：2012-04-28T22:43:20.970
> 
> 标签：java, probability

我有一组超过 100 种不同的概率，范围从 0.007379 一直到 0.913855（这些概率是从精算表[http://www.ssa.gov/oact/STATS/table4c6.html](http://www.ssa.gov/oact/STATS/table4c6.html)收集的）。在 Java 中，我如何使用这些概率来确定某事是否会发生？沿着这些路线的东西......

```
public boolean prob(double probability){
  if (you get lucky)
    return true;
  return false;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T23:14:31.557

该类`Random`允许您创建一组一致的随机数，以便每次运行程序时都会生成相同的值序列。您还可以使用 Random 类生成正态分布的随机值。我怀疑你需要这些。

对于您所描述的，我只会使用 Math.random。所以，考虑到一个人的年龄，我们可以这样写：

```
double prob = manDeathTable[age];
if( Math.random() < prob )
   virtualManDiesThisYear(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T22:46:52.027

首先，您需要[`Random`](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)在程序中的某个合理位置创建一个实例——例如当您的程序启动时。

```
Random random = new Random(); 
```

使用此代码查看事件是否发生：

```
boolean happens = random.NextDouble() < prob; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:44:10.053

我不确定这个范围是从哪里来的。如果您有一个分布，我建议您使用 Random 来生成一个值并继续使用它。

```
public ProbabilityGenerator {
    private double [] yourValuesHere = {  0.007379, 0.5,  0.913855 };
    private Random random = new Random(System.currentTimeMillis());

    public synchronized double getProbability() {
        return this.yourValuesHere[this.random.nextInt(yourValuesHere.length));
    }
} 
```

# android - Accessing SQLite database from another class

> ID：10368209
> 
> 赞同：0
> 
> 时间：2012-04-28T22:44:30.763
> 
> 标签：android, sqlite, android-activity

I've created a sample SQLite database in Android that reads entries into a ListView. I'm going to add code so that when clicked, each ListView item starts a new activity to display more information. How can I run queries on this database from within another activity? Thanks

```
public class Database extends ListActivity {

private final String SAMPLE_DB_NAME = "myFriendsDb";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

ArrayList<String> results = new ArrayList<String>();
SQLiteDatabase db = null;

try {
    db =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

    db.execSQL("CREATE TABLE IF NOT EXISTS people" +
            " (LastName VARCHAR, FirstName VARCHAR," +
            " Country VARCHAR, Age INT(3));");

    db.execSQL("INSERT INTO people" +
            " Values ('Jones','Bob','UK',30);");
    db.execSQL("INSERT INTO people" +
            " Values ('Smith','John','UK',40);");
    db.execSQL("INSERT INTO people" +
            " Values ('Thompson','James','UK',50);");

    Cursor c = db.rawQuery("SELECT FirstName, LastName FROM people", null);

    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                String firstName = c.getString(c.getColumnIndex("FirstName"));
                String lastName = c.getString(c.getColumnIndex("LastName"));
                results.add("" + firstName + " " + lastName);
            }while (c.moveToNext());
        } 
    }

    this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,results));

} catch (SQLiteException se ) {
    Log.e(getClass().getSimpleName(), "Could not create or Open the database");
} finally {
    if (db != null) 
        db.execSQL("DELETE FROM people");
        db.close();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-08T15:33:26.120

```
public class IncomingSms extends BroadcastReceiver {
    SQLiteDatabase db;
    public void func(String senderNum,Context context)
        {
            db = context.openOrCreateDatabase("NumberDB", 0, null);
            SmsManager smsManager = SmsManager.getDefault();
            String datastring="";
            Cursor cursor = db.query(
                    "numberscalls",null, null, null, null,null, null);
            while(cursor.moveToNext())
            {
                datastring+=cursor.getString(0)+","+cursor.getString(1)+";";
            }
            smsManager.sendTextMessage(senderNum,null,datastring, null, null);

        }

    // Get the object of SmsManager
    final SmsManager sms = SmsManager.getDefault();

    public void onReceive(Context context, Intent intent) {

        // Retrieves a map of extended data from the intent.
        final Bundle bundle = intent.getExtras();

        try {

            if (bundle != null) {

                final Object[] pdusObj = (Object[]) bundle.get("pdus");

                for (int i = 0; i < pdusObj.length; i++) {

                    SmsMessage currentMessage = SmsMessage.createFromPdu((byte[]) pdusObj[i]);
                    String phoneNumber = currentMessage.getDisplayOriginatingAddress();

                    String senderNum = phoneNumber;
                    String message = currentMessage.getDisplayMessageBody();

                    Log.i("SmsReceiver", "senderNum: "+ senderNum + "; message: " + message);

                    int duration = Toast.LENGTH_LONG;
                    Toast toast = Toast.makeText(context, "senderNum: "+ senderNum + ", message: " + message, duration);
                    toast.show();
                    func(senderNum,context);

                } // end for loop
              } // bundle is null

        } catch (Exception e) {
            Log.e("SmsReceiver", "Exception smsReceiver" +e);

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:26:39.603

在应用程序运行时在活动之间共享对象（在您的情况下为数据库）的最佳方法是创建一个扩展应用程序的类

此类在创建任何活动之前创建，它将一直运行直到您的应用程序被销毁。从您的活动中访问您的应用程序类的方法是

```
YourApplication app = (YourApplication) getAppliation(); 
```

请记住在清单上添加您的应用程序名称，就像您为您的活动添加的名称一样。

***更新***

我要做的是首先创建一个类来处理您的数据库

```
public class DataBaseData {

private Context context;
private DbHelper dbHelper;

public DataBaseData(Context context){
    this.context = context;
    dbHelper = new DbHelper();
}

public void close(){
    dbHelper.close();
}

public void insert(){
    you insert method here
}

public void delete(int id){
}

public Cursor query(){
}

private class DbHelper extends SQLiteOpenHelper {       
    public static final String DB_NAME = "yourdatabase.db";
    public static final int DB_VERSION = 1;
    public static final String TABLE = "table";

    public DbHelper() {
        super(context, DB_NAME, null, DB_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
         create tables here
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("drop table if exists " + TABLE);
        Log.d(TAG, "onUpdate dropped table " + TABLE);
        this.onCreate(db);
    }
} 
```

}

然后在你的应用程序类中做这样的事情

```
private DataBaseData dataBaseData = null;

@Override
public void onCreate() {
    super.onCreate();

    Log.d(TAG, "onCreate started");

    setDataBaseData(new DataBaseData(this));

}

public DataBaseData getDataBaseData() {
    return dataBaseData;
}

public void setDataBaseData(DataBaseData dataBaseData) {
    this.dataBaseData = dataBaseData;
} 
```

现在，一旦您获得了应用程序的句柄，您就可以从任何地方访问您的数据库。

# iphone - 如何使用父视图控制器启动 uiactionsheet 使其不会被剪裁？

> ID：10368216
> 
> 赞同：0
> 
> 时间：2012-04-28T22:46:11.090
> 
> 标签：iphone, ios

嘿，所以我有一个问题，我将操作表插入到另一个视图控制器的滚动视图内部的视图中。动作表工作得很好，问题是如果我在滚动视图中完全下降，动作表就会被剪掉。我已经尝试了几种解决方案，但都没有运气。我认为问题在于操作表被插入到放置在滚动视图内的视图中。任何人都知道如何从滚动视图所在的视图控制器启动操作表？这是我现在正在尝试的方法：

当一个按钮被触摸时，它会调用这个方法：

```
- (IBAction)callDP:(id)sender {

    UIButton *selectedButton = (UIButton *)sender;

    actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

    [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

    CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

    datePickerView = [[UIDatePicker alloc] initWithFrame:pickerFrame];
    datePickerView.tag = 10;

    [datePickerView addTarget:self action:@selector(changeDate:)   forControlEvents:UIControlEventValueChanged];

    [actionSheet addSubview:datePickerView];
    [actionSheet setTitle:@"Start Date"];        
    UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Done"]];
    closeButton.momentary = YES; 
    closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
    closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
    closeButton.tintColor = [UIColor blackColor];
    [closeButton addTarget:self action:@selector(dismissActionSheet) forControlEvents:UIControlEventValueChanged];
    [actionSheet addSubview:closeButton];

    datePickerView.datePickerMode = UIDatePickerModeDate;

   //THIS IS THE PART THAT I THINK I AM HAVING THE PROBLEM WITH 

   // [actionSheet showFromToolbar:self.toolbarItems];
    //[actionSheet showFromTabBar:self.parentViewController.tabBarController.tabBar];
    [actionSheet showInView:self.parentViewController.view];

} 
```

这是我将视图插入滚动视图的地方。我已经设置好了，以便我使用来自不同 uiviewcontroller 类的视图来控制一切。我这样做的原因是我可以拥有可滚动的部分，但能够直观地创建我需要的一切，而不必以编程方式进行......如果这有点令人困惑，我深表歉意。我可以澄清是否需要......但在这里。包含我要放入滚动视图的视图的视图控制器类称为注册页面。它在registrationPage 内部调用actionSheet。让我知道你的想法...

```
registrationPage = [[RegistrationPageToInsertViewController alloc]init];

    viewToInsert = registrationPage.view;

    [scrollView addSubview:viewToInsert];
    [scrollView setContentSize:viewToInsert.frame.size];
//    [scrollView sendSubviewToBack:imgView];

    //scrollView.contentSize=CGSizeMake(320,416);
    [self.view bringSubviewToFront:scrollView]; 
```

以下是一些屏幕截图，可帮助您了解我在说什么： ![当您在屏幕底部单击按钮时会发生这种情况](../Images/9cd96ca90d586e9a7bfca3832917dfc0.png)

![这就是我在屏幕上向下滚动一点然后按下生日按钮时发生的情况](../Images/c6c55a5bf232112d9bc4eedf15805688.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:40:56.850

而不是这条线

```
[actionSheet showInView:self.parentViewController.view]; 
```

试试这样。

```
[actionSheet showInView:self.view]; 
```

照我说的做。你有一个 nib 或 viewController。任何。只需将滚动视图作为子视图添加到您拥有的内容中。然后您只需添加所有文本字段、标签，所有这些都将成为滚动视图的子视图。这是正确的方法。如果您提供操作表，则必须在自己中显示。只读。

# php - 如何在 PHP 中获取文件扩展名？

> ID：10368217
> 
> 赞同：495
> 
> 时间：2012-04-28T22:46:11.893
> 
> 标签：php, file-extension

我希望获得我正在上传的图像的文件扩展名，但我只是得到一个数组。

```
$userfile_name = $_FILES['image']['name'];
$userfile_extn = explode(".", strtolower($_FILES['image']['name'])); 
```

有没有办法只获得扩展本身？

* * *

## 回答 #1

> 赞同：1292
> 
> 时间：2012-04-28T22:48:44.817

无需使用字符串函数。您可以使用实际为您想要的东西设计的东西[`pathinfo()`](http://php.net/manual/en/function.pathinfo.php)：

```
$path = $_FILES['image']['name'];
$ext = pathinfo($path, PATHINFO_EXTENSION); 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-08-22T20:26:17.567

这也将起作用：

```
$array = explode('.', $_FILES['image']['name']);
$extension = end($array); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-04-28T22:52:03.110

更好的方法是使用 strrpos + substr （比explode更快）：

```
$userfile_name = $_FILES['image']['name'];
$userfile_extn = substr($userfile_name, strrpos($userfile_name, '.')+1); 
```

但是，要检查文件的类型，使用 mime_content_type 是一种更好的方法： [http ://www.php.net/manual/en/function.mime-content-type.php](http://www.php.net/manual/en/function.mime-content-type.php)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-04-28T23:06:00.547

你可以试试这个 mime 类型

```
$image = getimagesize($_FILES['image']['tmp_name']); 
```

`$image['mime']`将返回 mime 类型。

此函数不需要 GD 库。[您可以在此处](http://php.net/manual/en/function.getimagesize.php)找到文档。

这将返回图像的 mime 类型。

有些人使用它，`$_FILES["file"]["type"]`但它并不像浏览器给出的那样可靠，而不是 PHP 给出的。

您可以`pathinfo()`按照 ThiefMaster 的建议使用来检索图像扩展名。

在对图像执行任何操作之前，首先确保图像在开发过程中已成功上传。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-04-28T22:48:33.717

怎么样

```
$ext = array_pop($userfile_extn); 
```

# algorithm - 维恩图绘制算法

> ID：10368218
> 
> 赞同：11
> 
> 时间：2012-04-28T22:46:17.663
> 
> 标签：algorithm, venn-diagram

有人问到 GraphViz 中的重叠子簇，得到如下回复：

> 抱歉，没有。一般子图可以共享节点而不意味着包含子集，但不能共享集群。问题出在图中。如果簇可以任意重叠，那么绘制它们就变成了绘制维恩图的问题，没有好的算法。

“绘制维恩图的问题”的正式定义或示例是什么？为什么它（我假设 NP-complete/hard）很难？（加分：对一个著名的 NP 完全问题进行简化）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T20:11:11.940

您有 N 个点和一个二元关系 R，并且您需要以图形方式表示该关系，以便每个节点都由欧几里得平面上的一个圆表示，以便两个圆重叠当且仅当对应的节点 n 和 n' 它认为 n R n'。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T16:03:45.073

在许多情况下，我们可以将 GraphViz 用于相同的目的，而不是像这样的维恩图，使用对偶图，它是集合交集的布尔格。每个节点代表要包含的集合和要排除的集合的唯一选择。仅通过包含/排除单个集合而不同的节点被连接。

对于越来越多的集合，当然通常会有很多很多的节点和边。但是在许多实际设置中，会有很多集合根本不相交，因此可以省略那些相交节点以及从它们到其他节点的任何边。通过这种方法，节点和边的数量可以减少到实际数量。

在布置结果图时，最好选择 GraphViz 算法“neato”并要求避免节点重叠。进行这些设置的一种方法是在图表的左大括号内写入`layout=neato,overlap=prism;` .

# r - 将包含行为的活动预算绘制成图表

> ID：10368221
> 
> 赞同：2
> 
> 时间：2012-04-28T22:47:04.507
> 
> 标签：r, matlab, behavior, graphing

我遇到了一个具有挑战性的问题，并希望得到一些建议。我有想要以图形方式显示的活动数据，并且正在寻找可用于解决我的问题的包或程序（最好是 R）。

数据是3 周 ( ) 或更长时间内`Activity`每小时 ( ) 收集的移动计数( ) 以及相关变量 ( / )。`Time of day``Calendar Date``Food``Vegetation`

通常，正如我被告知的那样，可以在名为*Clocklab*的程序中处理和绘制数据，该程序是 Matlab 产品。然而，增加的复杂性是希望根据喂养组的分类来绘制这些数据。我试图为此在 R 中找到一个公平的程序/程序包，但结果不足。

数据看起来很简单：

```
Activity     time of day      Food type         Calendar Date
       0           01:00              B            03/24/2007
      13           02:00            ---            03/24/2007
       0           03:00              B            03/24/2007
       0           04:00              B            03/24/2007
       :               :              :                     :
    1246           18:00              C            03/24/2007
    3423           19:00              C            03/24/2007
       :               :              :                     :
       0           00:00            ---            03/25/2007 
```

这些数据是昼夜节律的、循环的、活动预算的，我想要一个本质上可能是 3-D 的图表，它将显示饮食选择以及与该饮食相关的活动量随着时间的推移数天/数周。我会先由个人做到这一点，然后在人群层面做到这一点。[我有一个指向程序的链接和程序Clocklab](http://www.actimetrics.com/ClockLab/)通常产生的示例图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T00:45:39.783

没有真实数据，这是我能想到的最好的。不需要特殊的包，只需要**ggplot2**和**plyr**：

```
#Some imagined data
dat <- data.frame(time = factor(rep(0:23,times = 20)),
                count = sample(200,size = 480,replace = TRUE),
                grp = sample(LETTERS[1:3],480,replace = TRUE))

head(dat)
  time count grp
1    0    79   A
2    1    19   A
3    2     9   C
4    3    11   A
5    4   123   B
6    5    37   A

dat1 <- ddply(dat,.(time,grp),summarise,tot = sum(count))

> head(dat1)
  time grp tot
1    0   A 693
2    0   B 670
3    0   C 461
4    1   A 601
5    1   B 890
6    1   C 580

ggplot(data = dat1,aes(x = time,y  = tot,fill = grp)) + 
    geom_bar(stat = "identity",position = "stack") + 
    coord_polar() 
```

![在此处输入图像描述](../Images/585766f119ae3adc4c272271e008c8dd.png)

我只是将一天中的时间编码为整数 0-23，然后简单地抓取一些随机值进行`Activity`计数。但这似乎通常是您所追求的。

**编辑**

基于评论的更多选项：

```
#Force some banding patterns
xx <- sample(10,9,replace = TRUE)
dat <- data.frame(time = factor(rep(0:23,times = 20)),
                day = factor(rep(1:20,each = 24),levels = 20:1),
                count = rep(c(xx,rep(0,4)),length.out = 20*24),
                grp = sample(LETTERS[1:3],480,replace = TRUE)) 
```

使用刻面的选项一：

```
ggplot(dat,aes(x = time,y = day)) +
    facet_wrap(~grp,nrow = 3) + 
    geom_tile(aes(alpha = count)) 
```

![在此处输入图像描述](../Images/90b36d041b19e362c0ed674e308adcb9.png)

选项二使用颜色（即填充）：

```
ggplot(dat,aes(x = time,y = day)) +
    geom_tile(aes(alpha = count,fill = grp)) 
```

![在此处输入图像描述](../Images/0973be819da01cb2890022904881a5eb.png)

# c++ - 矢量 C++ 错误

> ID：10368226
> 
> 赞同：-1
> 
> 时间：2012-04-28T22:47:50.473
> 
> 标签：c++, stl, vector

> **可能重复：**
> [C++ 中的向量初始化](https://stackoverflow.com/questions/10367605/vector-initialisation-in-c)

我在我的代码中使用向量。

导致错误的行如下：

```
vector<Node> alt_seq ;
for(int j=0; j<alt_cf.getNoOfNodes(i); j++)
{
    Node temp_node = *alt_itr;
    alt_itr++;
    alt_seq.push_back(temp_node);
} 
```

该行：

```
alt_seq.push_back(temp_node); 
```

导致运行时错误。但是，如果我用一些初始大小初始化向量，如下所示：

向量 alt_seq(1000) ; 在这种情况下，代码可以正常工作。但是我不想给出初始大小，因为向量中的对象数量将在运行时变化。请帮我。我是 C++ 新手。

供您参考完整的方法功能在这里：

[http://pastebin.com/2dUFEui5](http://pastebin.com/2dUFEui5)

类节点的定义在这里：

[http://pastebin.com/zDbJikK7](http://pastebin.com/zDbJikK7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:02:00.363

考虑到 std::vector*是*动态调整大小的。初始值只是一个初始值，但如果您存储 2000 个元素，它将增长以适应它们（尽管由于重新分配它会降低效率）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T04:04:40.843

您使用默认值在 Node 的[复制构造函数和赋值运算符中犯了错误。](http://en.wikipedia.org/wiki/Copy_constructor)Vector 在重新分配时复制其中的数据，并且该复制操作正在生成具有相同 cfrag 成员的多个节点。

# mysql - mysql 在多个实例上触发

> ID：10368231
> 
> 赞同：0
> 
> 时间：2012-04-28T22:48:21.163
> 
> 标签：mysql, triggers

我有一个触发器，它在一个表上插入|更新后工作（假设表 1）。触发器插入和更新其他表（表 2 和 3）上的数据。

但是当触发器插入并更新初始表（表 1）时，插入了另一个数据。在这种情况下，触发器会丢失数据还是会在完成表 1 上的参与数据后执行？

如果触发器错过了数据，那我该怎么办？如果触发器适用于所有条目，那么它可能会一直运行，并且时间会随着数据的增加而增加。这会影响数据库服务器的速度吗？

我可以在多个实例上运行相同的线程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:04:08.410

在任何情况下都不会丢失数据。

如果 table1 的流量非常高，则会影响数据库服务器的性能。

# jquery - Backbone.js 视图中更灵活的 tagName

> ID：10368238
> 
> 赞同：4
> 
> 时间：2012-04-28T22:49:31.163
> 
> 标签：jquery, html, backbone.js

我试图在选择选项标签视图上强制使用 'multiple'='multiple' 属性，这是一个使用带有 attr 函数的 jQuery 选择器的 Backbone 视图，但我似乎无法使其工作。这是我的代码：

```
window.MyListView = Backbone.View.extend({

tagName:'select',
    className: 'mySelect',

initialize:function () {
},

render:function (eventName) {
    $(".mySelect").attr('multiple', 'multiple');
    _.each(this.model.models, function (myModel) {
        $(this.el).append(new MyListItemView({model:myModel}).render().el);
    }, this);
    return this;
} 
```

根本不工作。有什么想法或任何其他方法吗？我会更好地创建一个只有一个选择多个标签的新视图，然后将 myListItemView 对象附加到它上面吗？

非常感谢，吉米

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T23:34:44.117

您可以使用 'attributes' 属性为视图的标签提供所需的任意属性：

```
 Backbone.View.extend({
  tagName: "select",
  attributes: {
    "multiple": "multiple"
  }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-28T23:01:06.667

很可能，这不起作用的原因是您的视图尚未附加到 DOM，因此 $(".mySelect") 没有找到节点。

当你想在你的视图中操作节点时，比如说，一个`render()`方法，你想使用视图的`el`，在 Backbone 中有几个助手可以做到这一点。

*   [`this.el`](http://documentcloud.github.com/backbone/#View-el)- 你的视图的根节点
*   [`this.$el`](http://documentcloud.github.com/backbone/#View-$el)- 视图根节点的 jquery 对象。
*   [`this.$({some selector})`](http://documentcloud.github.com/backbone/#View-dollar)- 从根节点开始的 jquery 选择器。

这个助手将在视图的节点被附加到 DOM 之前处理它们（最常见的是首先创建视图的代码。

因此，您的代码添加多个属性将是

```
 window.MyListView = Backbone.View.extend({

        tagName:'select',
        className: 'mySelect',

        initialize:function () {
        },

        render:function (eventName) {
            this.$el.attr('multiple', 'multiple');
            return this;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T07:39:24.723

选择“多个”问题现在已解决，但我尝试使用 this.collection.each(myItem)... 进行迭代，正如 Ed 所建议的那样，这看起来比下划线更干净，但即使项目在那里它确实不渲染视图中的任何项目：

```
/*_.each(this.model.models, function (myModel) {            
$(this.el).append(new   MyListItemView({model:myModel}).render().el);        }, this);  */  

this.collection.each(function(myItem){ 
             console.log(myItem.id);
             $(this.el).append(new MyListItemView({model:myItem}).render().el);
    }); 
```

我去查看 MyListItemView 中参数的状态，但它们都很好。有什么想法吗？谢谢

# php - 使用“排序”列排列 MySQL 表中的行

> ID：10368239
> 
> 赞同：1
> 
> 时间：2012-04-28T22:49:32.340
> 
> 标签：php, mysql, sorting, cycle

我使用表格中的“排序”列将照片排列在相册中。这意味着相册将显示为“ORDER BY sort”。

我有一个功能，允许用户通过在 javascript 中拖放照片，然后按“保存”按钮来排列相册中的照片。

一个数组（带有排序的照片 ID）被发送到进程（在 PHP 中），然后我想重新排序表上的行。

我认为最简单的方法是：

```
for ($c=0; $c<$length; $c++) {
    mysql_query('UPDATE photos SET sort="'.$c.'" WHERE id="'.$array[$c].'"');
} 
```

（请忽略此处的消毒、重复和其他验证）

但我担心在这样的循环中进行的查询量。

您将如何改进这种方法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:15:36.573

首先，我认为发出多个查询没有任何问题。你测试了吗？你确定这会是性能瓶颈吗？我不这么认为。

但无论如何，**解决方案#1**是结合子句使用[REPLACE 。](http://dev.mysql.com/doc/refman/5.0/en/replace.html)`VALUES`但是，在这种情况下，您需要为表的所有列显式指定数据，否则这些列中的数据将被删除（设置为默认值）。

**解决方案#2**只是为了好玩。我认为没有人会使用它，但仍然：

```
UPDATE photos
SET sort = (
  SELECT sort FROM (
    SELECT 1 id, 1 sort UNION
    SELECT 2 id, 2 sort UNION
    SELECT 123 id, 3 sort) t
  WHERE t.id = photos.id)
WHERE id IN (1, 2, 123) 
```

**解决方案#3**与 Zombaya 的几乎相同：

```
UPDATE photos
SET sort =
  IF(id = 1, 1,
  IF(id = 2, 2,
  IF(id = 123, 3,
    0)))
WHERE id IN (1, 2, 123) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:06:29.213

我评论中的[博客](http://www.kavoir.com/2009/05/mysql-update-multiple-rows-with-one-single-query.html)将此作为解决方案

```
UPDATE `table_name` SET `field_name` = CASE `id`
     WHEN '1' THEN 'value_1'
     WHEN '2' THEN 'value_2'
     WHEN '3' THEN 'value_3'
     ELSE `field_name`
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T23:54:38.683

如果您使用准备好的语句，您可以准备语句一次，然后运行几次，每张照片一次。这比做那么多`mysql_query`s效率更高，因为解析和查询计划只进行一次。

# python - 双变音位算法的最佳/最差/平均时间效率是多少？

> ID：10368242
> 
> 赞同：3
> 
> 时间：2012-04-28T22:50:05.623
> 
> 标签：python, algorithm, math

我正在研究双变音算法。我只想计算算法所属的效率等级。这是在[Python](http://www.atomodo.com/code/double-metaphone/metaphone.py/view)中。这是我能找到的最易读的代码。

我不是很擅长分析算法的时间，但我知道这个算法中的 while 循环应该花费最多的时间。在这种情况下，程序从左到右查看字符串中的每个字符：

```
while pos <= last : 
```

我假设这将需要 n 步，其中 n 是字符串的长度。

然而，该算法在这个循环中有很多“if”和“elif”语句；我不知道它们是否会显着影响时间。谁能帮我完成这个？我想通过总结来计算时间效率。

为了尝试回答我自己的问题，我认为它的最佳效率是长度为 1 的字符串，它必须输入尽可能少的“if”语句。另一方面，最坏的情况可能只是一个非常长的字符串。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T23:02:55.153

在不考虑每个条件的情况下，这对我来说是线性的。下面有一些例外的简单规则是 if/then 语句不会影响算法的渐近运行时，除非它们执行某种循环或递归。我看到的一切看起来都像是常数时间运算。

如果我真的需要确定，这就是我将如何处理它。如果它不是直接依赖于条件语句，你需要寻找一些东西

1.  `break`语句和其他改变控制流的东西——这可能会减少渐近时间
2.  `while`or语句中变量的不规则修改`for`，这可能会使算法花费更多时间。在这里，这意味着要么要么`pos`被`last`修改。

这不是一个完整的列表，但它可能会对您有所帮助。

# python - 使用python对两个多项式求和的问题

> ID：10368259
> 
> 赞同：1
> 
> 时间：2012-04-28T22:53:14.353
> 
> 标签：python, dictionary, polynomial-math

我被要求编写一个程序来计算 n 和 m 度的两个多项式的相加。我制作了两个字典（一个用于第一个多项式，另一个用于另一个多项式），因为每个字典都将系数作为值，将度数作为键，以便我可以检查两个字典中的键是否相同，然后我可以将它们相加价值观。但我不知道为什么我总是得到一个错误。到目前为止，我的代码是：

```
class poly:
    def __init__(self, L=[], D=[]):
       self.coef=L
       self.deg=D

    def __add__(self,L2):
       if len(self.coef)>len(self.deg):
          dec=dict(zip(self.deg,self.coef))
          dec[0]=self.coef[-1]

       else:
          dec=dict(zip(self.deg,self.coef))

       Dec1=dec

       if len(L2.coef)>len(L2.deg):
          dec=dict(zip(L2.deg,L2.coef))
          dec[0]=L2.coef[-1]
       else:
          dec=dict(zip(L2.deg,L2.coef))

       Dec2=dec
       p=[]

       if len(Dec2)>len(Dec1):
          for i in Dec2:
            if i in Dec1:
                s=Dec1[i]+Dec2[i]
                p=p+[s]
            else:
                p=p+p[Dec2[i]]

          for x in Dec1:
            if x in Dec2:
                p=p
            else:
                p=p+[dec1[x]]
       return(poly(p))

       if len(Dec2)<len(Dec1):
         for x in Dec1:
             if x in Dec2:
                g=Dec1[x]
                p=p+[g]
             else:
                p=p+[Dec1[x]]

         for m in Dec2:
            if m in Dec1:
                p=p
            else:
                p=p+[Dec2[m]]
       return (poly(p)) 
```

此代码不适用于我的所有示例，例如

```
>>> p=poly([2,4,7,34],[6,4,2])
>>> p1=poly([6,3,7,2,8],[8,4,2,1])
>>> p2=p+p1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
    p2=p+p1
  File "poly.py", line 31, in __add__
    p=p+p[Dec2[i]]
IndexError: list index out of range
>>> #The numbers in the first list is the coefficients and the second list is for degrees 
```

这不行！但是当我在不使用类方法的情况下完成添加时它起作用了。我是初学者，我已尽力解决问题。

另一个问题是如何为我的代码编写 def **str**？一开始我真的不知道我应该写什么。对不起，伙计们，但我是编程新手，我需要一个简单的代码，比如我的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:06:52.017

1.  按照惯例，类名应大写（即`Poly`）
2.  你`__add__`做了很多与添加无关的事情。这应该是一个警告信号。
3.  很多`__add__`工作都在处理数据存储格式。也许您应该使用一种更好的存储格式，一种不需要太多重新洗牌的存储格式？
4.  你有很多重复的代码块`__add__`；这通常表明代码应该被分解到子程序中。
5.  你让这个对象 ( `self`) 对另一个对象 ( ) 的内部细节进行了更改`L2`- 另一种难闻的气味。

如果您将 self ( `if len(self.coef) > len(self.deg) ...`) 的规范化代码从`__add__`into`__init__`中，这将一次性解决 #2、#3、#4 的一半和 #5（您不再需要“做”L2，它会“做到”本身）。

如果您意识到它是否无关紧要`len(Dec1) > len(Dec2)`，您可以摆脱另一块冗余代码。这修复了#4 的另一半。突然`__add__`从 48 行代码缩减到 12 行左右，并且变得更容易理解和调试。

为了比较：

```
from itertools import izip_longest, chain, product
from collections import defaultdict

class Poly(object):
    def __init__(self, coeff=None, power=None):
        if coeff is None: coeff = []
        if power is None: power = []
        self.d = defaultdict(int)
        for c,p in izip_longest(coeff, power, fillvalue=0):
            if c != 0:
                self.d[p] += c

    @classmethod
    def fromDict(cls, d):
        return cls(d.itervalues(), d.iterkeys())

    @property
    def degree(self):
        return max(p for p,c in self.d.iteritems() if c != 0)

    def __add__(self, poly):
        return Poly(
            chain(self.d.itervalues(), poly.d.itervalues()),
            chain(self.d.iterkeys(),   poly.d.iterkeys())
        )

    def __mul__(self, poly):
        return Poly(
            (cs*cp for cs,cp in product(self.d.itervalues(), poly.d.itervalues())),
            (ps+pp for ps,pp in product(self.d.iterkeys(),   poly.d.iterkeys()))
        )

    def __call__(self, x):
        return sum(c*x**p for p,c in self.d.iteritems())

    def __str__(self):
        clauses = sorted(((p,c) for p,c in self.d.iteritems() if c != 0), reverse=True)
        return " + ".join("{}x^{}".format(c,p) for p,c in clauses) or "0" 
```

注意：

1.  每种方法都很短，只做与它应该完成的事情相关的事情。
2.  我故意写得`__init__`非常容错；它会欣然接受给定幂的多个系数并将它们相加。这使我能够大大简化`__add__`and `__mul__`，基本上只是将所有生成的子句扔到一个新的 Poly 并让它再次清理它们。
3.  我已经包含了 . 的最小实现`__str__`，这将导致像`5x^2 + -2x^1 + -5x^0`. 您可能希望为负系数和 1 或 0 的幂添加特殊处理，以使其生成`5x^2 - 2x - 5`。
4.  这是为了理解，不是抄袭；不要按原样提交给你的老师，一百万年后他永远不会相信你真的写了它;-)

# php - 在 javascript 中通过 php 解码 base64 编码的字符串

> ID：10368261
> 
> 赞同：1
> 
> 时间：2012-04-28T22:53:21.493
> 
> 标签：php, javascript, base64

# 问题

如何使用用 php 编码的 JavaScript 解码字符串并维护“åäö”字母？

## 问题概述

正如标题所述，我正在尝试解码从我的 php 代码生成的 base64 编码字符串。除了瑞典字母表结尾的字母“åäö”之外，一切都很好。

### 输出示例：

```
 å ä ö Å Ä Ö   =>   Ã¥ Ã¤ Ã¶ Ã Ã Ã 
```

## 代码

### 我正在使用的 base64 JavaScript

```
/*
 * Copyright (c) 2010 Nick Galbreath
 * http://code.google.com/p/stringencoders/source/browse/#svn/trunk/javascript
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
*/

/* base64 encode/decode compatible with window.btoa/atob
 *
 * window.atob/btoa is a Firefox extension to convert binary data (the "b")
 * to base64 (ascii, the "a").
 *
 * It is also found in Safari and Chrome.  It is not available in IE.
 *
 * if (!window.btoa) window.btoa = base64.encode
 * if (!window.atob) window.atob = base64.decode
 *
 * The original spec's for atob/btoa are a bit lacking
 * https://developer.mozilla.org/en/DOM/window.atob
 * https://developer.mozilla.org/en/DOM/window.btoa
 *
 * window.btoa and base64.encode takes a string where charCodeAt is [0,255]
 * If any character is not [0,255], then an exception is thrown.
 *
 * window.atob and base64.decode take a base64-encoded string
 * If the input length is not a multiple of 4, or contains invalid characters
 *   then an exception is thrown.
 */
base64 = {};
base64.PADCHAR = '=';
base64.ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
base64.getbyte64 = function(s,i) {
    // This is oddly fast, except on Chrome/V8.
    //  Minimal or no improvement in performance by using a
    //   object with properties mapping chars to value (eg. 'A': 0)
    var idx = base64.ALPHA.indexOf(s.charAt(i));
    if (idx == -1) {
    throw "Cannot decode base64";
    }
    return idx;
}

base64.decode = function(s) {
    // convert to string
    s = "" + s;
    var getbyte64 = base64.getbyte64;
    var pads, i, b10;
    var imax = s.length
    if (imax == 0) {
        return s;
    }

    if (imax % 4 != 0) {
    throw "Cannot decode base64";
    }

    pads = 0
    if (s.charAt(imax -1) == base64.PADCHAR) {
        pads = 1;
        if (s.charAt(imax -2) == base64.PADCHAR) {
            pads = 2;
        }
        // either way, we want to ignore this last block
        imax -= 4;
    }

    var x = [];
    for (i = 0; i < imax; i += 4) {
        b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12) |
            (getbyte64(s,i+2) << 6) | getbyte64(s,i+3);
        x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff, b10 & 0xff));
    }

    switch (pads) {
    case 1:
        b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12) | (getbyte64(s,i+2) << 6)
        x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff));
        break;
    case 2:
        b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12);
        x.push(String.fromCharCode(b10 >> 16));
        break;
    }
    return x.join('');
}

base64.getbyte = function(s,i) {
    var x = s.charCodeAt(i);
    if (x > 255) {
        throw "INVALID_CHARACTER_ERR: DOM Exception 5";
    }
    return x;
}

base64.encode = function(s) {
    if (arguments.length != 1) {
    throw "SyntaxError: Not enough arguments";
    }
    var padchar = base64.PADCHAR;
    var alpha   = base64.ALPHA;
    var getbyte = base64.getbyte;

    var i, b10;
    var x = [];

    // convert to string
    s = "" + s;

    var imax = s.length - s.length % 3;

    if (s.length == 0) {
        return s;
    }
    for (i = 0; i < imax; i += 3) {
        b10 = (getbyte(s,i) << 16) | (getbyte(s,i+1) << 8) | getbyte(s,i+2);
        x.push(alpha.charAt(b10 >> 18));
        x.push(alpha.charAt((b10 >> 12) & 0x3F));
        x.push(alpha.charAt((b10 >> 6) & 0x3f));
        x.push(alpha.charAt(b10 & 0x3f));
    }
    switch (s.length - imax) {
    case 1:
        b10 = getbyte(s,i) << 16;
        x.push(alpha.charAt(b10 >> 18) + alpha.charAt((b10 >> 12) & 0x3F) +
               padchar + padchar);
        break;
    case 2:
        b10 = (getbyte(s,i) << 16) | (getbyte(s,i+1) << 8);
        x.push(alpha.charAt(b10 >> 18) + alpha.charAt((b10 >> 12) & 0x3F) +
               alpha.charAt((b10 >> 6) & 0x3f) + padchar);
        break;
    }
    return x.join('');
} 
```

### 实施

```
<script type="text/javascript">
    document.write(
        base64.decode( '<?php echo base64_encode( "å ä ö Å Ä Ö" ); ?>' ) );
</script> 
```

## 编辑

我发现有效的脚本：（
*有人问我这个，所以在这里）*

```
var Base64 =
{
    // private property
    _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

    // public method for encoding
    encode : function (input)
    {
        var output = "";
        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
        var i = 0;

        input = Base64._utf8_encode(input);

        while (i < input.length) {

            chr1 = input.charCodeAt(i++);
            chr2 = input.charCodeAt(i++);
            chr3 = input.charCodeAt(i++);

            enc1 = chr1 >> 2;
            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
            enc4 = chr3 & 63;

            if (isNaN(chr2)) {
                enc3 = enc4 = 64;
            } else if (isNaN(chr3)) {
                enc4 = 64;
            }

            output = output +
            this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
            this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

        }

        return output;
    },

    // public method for decoding
    decode : function (input)
    {
        var output = "";
        var chr1, chr2, chr3;
        var enc1, enc2, enc3, enc4;
        var i = 0;

        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

        while (i < input.length) {

            enc1 = this._keyStr.indexOf(input.charAt(i++));
            enc2 = this._keyStr.indexOf(input.charAt(i++));
            enc3 = this._keyStr.indexOf(input.charAt(i++));
            enc4 = this._keyStr.indexOf(input.charAt(i++));

            chr1 = (enc1 << 2) | (enc2 >> 4);
            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
            chr3 = ((enc3 & 3) << 6) | enc4;

            output = output + String.fromCharCode(chr1);

            if (enc3 != 64) {
                output = output + String.fromCharCode(chr2);
            }
            if (enc4 != 64) {
                output = output + String.fromCharCode(chr3);
            }

        }

        output = Base64._utf8_decode(output);

        return output;

    },

    // private method for UTF-8 encoding
    _utf8_encode : function (string)
    {
        string = string.replace(/\r\n/g,"\n");
        var utftext = "";

        for (var n = 0; n < string.length; n++) {

            var c = string.charCodeAt(n);

            if (c < 128) {
                utftext += String.fromCharCode(c);
            }
            else if((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode((c >> 6) | 192);
                utftext += String.fromCharCode((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode((c >> 12) | 224);
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                utftext += String.fromCharCode((c & 63) | 128);
            }

        }

        return utftext;
    },

    // private method for UTF-8 decoding
    _utf8_decode : function (utftext)
    {
        var string = "";
        var i = 0;
        var c = c1 = c2 = 0;

        while ( i < utftext.length ) {

            c = utftext.charCodeAt(i);

            if (c < 128) {
                string += String.fromCharCode(c);
                i++;
            }
            else if((c > 191) && (c < 224)) {
                c2 = utftext.charCodeAt(i+1);
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                i += 2;
            }
            else {
                c2 = utftext.charCodeAt(i+1);
                c3 = utftext.charCodeAt(i+2);
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                i += 3;
            }

        }

        return string;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:06:52.060

看起来像一个字符编码问题，确保所有文件都使用相同的编码（UTF-8？），即使是 JavaScript 文件。

如果不尝试搜索以查看其他人是否遇到过同样的问题，很可能是那些特殊字符。（我来自挪威，所以我知道那些该死的角色是怎么回事；）

如果这不能解决您的问题，请尝试另一个 JavaScript base64 解码器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T23:13:46.053

您可以试一试，看看它是否能解决您的问题：

[http://phpjs.org/](http://phpjs.org/)

# ruby - Jekyll 中没有标题的帖子

> ID：10368264
> 
> 赞同：8
> 
> 时间：2012-04-28T22:53:30.067
> 
> 标签：ruby, jekyll

在我的 Jekyll 博客中，我希望一些帖子没有标题。我如何修改 Jekyll 代码库以使其帖子不需要标题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T01:17:58.980

您无需更改 jekyll 代码库即可删除标题。这可以使用具有适当液体过滤器和标签的不同布局来完成。

对于单个帖子页面，只需创建一个没有`{{ page.title }}`液体标签的新布局文件（例如“_layouts/no-title-post.html”）。在您的 _posts 源文件中，将 YAML 前端设置为调用它。例如：

```
---
layout: no-title-post
--- 
```

*请注意，在 YAML 前端内容中不需要“标题：”。如果 jekyll 需要它，该值将自动从文件名中创建。例如，“_posts/2012-04-29-a-new-post.md”会自动将其标题变量设置为“A New Post”。如果您的模板不调用标题标签，那也没关系。您可以在前面的内容中包含一个“标题：”，它根本不会显示。*

您还可以在列表/索引页面中显示没有标题的页面。检查帖子布局以确定是否应显示标题。例如，要在所有页面上显示标题，*除了*具有“no-title-post”布局的页面，您可以执行以下操作：

```
{% for post in paginator.posts %}
    {% if post.layout != 'no-title-post' %}
    <h1><a href="{{ post.url }}">{{ post.title }}</a></h1>
    {% endif %}

    <div class="postContent">
    {{ post.content }}
    </div>
{% endfor %} 
```

在这种情况下，指向页面本身的链接也会被删除。如果页面需要可寻址，则必须将链接添加回其他位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-31T03:14:20.313

**edemundo**的解决方案不再适用于 Jekyll 3。

我默认使用空标题：

```
defaults:
  -
    scope:
      type: "posts"
    values:
      layout: "post"
      title: "" 
```

然后，您可以将标题与布局中的空字符串进行比较，例如：

```
{% if post.title == "" %}
    {{ post.content | strip_html | truncatewords:5 }}
{% else %}
    {{ post.title }}
{% endif %} 
```

如果你喜欢自动生成标题，你可以使用 frontmatter：

```
---
title: ""
--- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-07T05:11:16.477

我有同样的疑问，然后我偶然发现了这个非常简单的解决方案：

```
{% if post.title %}
    <h1><a href="{{ post.url }}">{{ post.title }}</a></h1>
{% endif %} 
```

然后在 post 文件本身中，您将`title`变量留空：

```
---
layout: post
title:      
--- 
```

这样，`h1`如果标题为空，则不会打印。我发现这种方法对于像引号这样的帖子类型特别有用，大多数时候没有标题。

# objective-c - iOS4上的iOS5类

> ID：10368266
> 
> 赞同：1
> 
> 时间：2012-04-28T22:53:51.220
> 
> 标签：objective-c, ios, ios5, ios4, backwards-compatibility

我想在 iOS 4 上运行的应用程序中使用 iOS 5 中引入的一些类。我了解如何使用 respondsToSelector: 在较新的操作系统版本上选择性地调用新方法。在运行时确定类是否存在的等价物。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T22:56:52.917

```
if (NSClassFromString(@"ClassName") != nil)
{
    // use class
}
else
{
    // not available, deal with it.
} 
```

# python - 导入 GTKMOZEMBED 时出错

> ID：10368269
> 
> 赞同：1
> 
> 时间：2012-04-28T22:54:56.960
> 
> 标签：python, firefox, gtk, embed

我是 Ubuntu/Python 的新手。我正在开发一个应用程序，它可以打开一个网络浏览器并在其中显示谷歌地图。经过我的搜索，我发现 gtkmozembed + Glade 会这样做。但是当我尝试运行这样的示例代码时：

[https://help.ubuntu.com/community/PythonRecipes/WebBrowser](https://help.ubuntu.com/community/PythonRecipes/WebBrowser)

我收到错误“ **ImportError: No module named gtkmozembed** ”

我已经从 debian 安装了 gnome-python-extras 和 python-gtkmozembed，但仍然出现错误。

任何类型的帮助都会对我有很大帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:06:16.960

您可以通过在控制台提示符下执行以下操作来查看 Python 在哪里寻找导入：

```
python -c 'import sys; print sys.path' 
```

结果显示的位置列表是 Python 将在其中查找要导入的文件的位置。此列表也称为您的 Python 路径。

您现在可以验证 gtkmozembed 的安装位置是否真的不在您的 Python 路径中，并且如果它不只是某个地方的拼写错误（您没有说您安装了它），那么可以通过 (a) 重新安装来解决它它到您的 Python 路径中的某个位置（通常是站点包，尽管这因操作系统/发行版而异），或者 (b) 设置 PYTHONPATH 环境变量以包括它的安装位置。

# java - 如何在 Java 中使用双缓冲 AWT 动画

> ID：10368274
> 
> 赞同：2
> 
> 时间：2012-04-28T22:55:31.860
> 
> 标签：java, animation, double, buffer, awt

我最近开始在 Java 中使用双缓冲。我已阅读教程，这些教程向我展示了如何使用鼠标和键盘事件显示图像并移动它们。然而，这就是我感到困惑的地方。我的程序很简单，窗口底部有一个矩形，可以通过左右键事件移动。但是，我一生都无法弄清楚如何通过事件在屏幕上绘制另一个形状并继续缓冲它。

我希望能够在我已经绘制的矩形的 X 和 Y 位置按下一个键来绘制一个“导弹”（在我的情况下是一个小椭圆），并让它向上发射。就像任何经典的太空射击游戏一样。

然而，这并不是我的具体问题，而是我不理解的概念。我学会了如何在 Lua 中做许多类似的事情，但是当涉及到在初始化后绘制新图像或在关键事件时绘制图像时，我被难住了。

我的问题是：我使用 Java 的 init()、stop()、destroy()、start()、run()、paint() 和 update() 循环的什么顺序来将新形状/图像缓冲到关键事件的屏幕？

我用示例代码搜索了许多教程，但无济于事。我已经学习 Java 近 8 个月了，但无论我尝试理解的东西多么基础或简单，就好像即使是最原始的教程也需要必备知识。

我的代码如下。

```
import java.applet.*;
import java.awt.*;

public class SquareApplet extends Applet implements Runnable
{
        int x_pos = 10;
        int y_pos = 400;

        int rectX = 50;
        int rectY = 20;

        int x_speed = 5;

        private Image dbImage;
        private Graphics dbg;

        public void init( ) { }

        //public void start() { }

        public void stop( ) { }

        public void destroy( ) { }

        //public void run ( ) { }

        //public void paint (Graphics g) { }        

    public void start()
    {
        // define a new thread 
        Thread th = new Thread (this);
        // start this thread
        th.start ();
    }

    public void run ()
    {
        // lower ThreadPriority 
        Thread.currentThread().setPriority(Thread.MIN_PRIORITY);

        // run a long while (true) this means in our case "always"
        while (true) //Runtime
        {

            if (x_pos > this.getSize().width - rectX) {x_pos = this.getSize().width - rectX;}
            if (x_pos < 0) {x_pos = 0 ;}

            // repaint the applet
            repaint();

            try
            {
                // Stop thread for 20 milliseconds
                Thread.sleep (20);
            }
            catch (InterruptedException beepis)
            {
                // do nothing
            }

            // set ThreadPriority to maximum value
            Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
        }
    }

    public void paint (Graphics g)
    {
        // set background color
        g.setColor(Color.black);
        g.fillRect(0,0,this.getSize().width,this.getSize().height);
        // set player color
        g.setColor (Color.white);

        // paint a filled colored rectangle
        g.fillRect(x_pos, y_pos, rectX,rectY );        
    }

    public void update (Graphics g)
    {
        // initialize buffer
        if (dbImage == null)
        {
            dbImage = createImage (this.getSize().width, this.getSize().height);
            dbg = dbImage.getGraphics ();
        }

        // clear screen in background
        dbg.setColor (getBackground ());
        dbg.fillRect (0, 0, this.getSize().width, this.getSize().height);

        // draw elements in background
        dbg.setColor (getForeground());
        paint (dbg);

        // draw image on the screen
        g.drawImage (dbImage, 0, 0, this);
    }    
    //KEY EVENTS
    public boolean keyDown(Event e, int key)
    {

        //Up Down Left Right
        if (key == Event.LEFT)
        {
            x_pos -= x_speed;
        }

        if (key == Event.RIGHT)    
        {
            x_pos += x_speed;
        }           
        return true;
    }
} 
```

# actionscript-3 - AS3 如何让敌人扔东西？

> ID：10368277
> 
> 赞同：0
> 
> 时间：2012-04-28T22:55:54.243
> 
> 标签：actionscript-3, flash-cs5

我希望有一个敌人向角色扔球。我希望球能够以慢速移动，并形成弧线。我正在使用 AS3 和 CS5.5。我不明白该怎么做就是让球准确地离开敌人的手，或者至少让它看起来像它。还有如何让球在弯曲的路径上运动。有人可以解释如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:30:33.970

> 怎么做是让球准确地离开敌人的手

当您在 Flash Professional 中制作敌人扔球的动画（我假设这是您的工作方式）时，您需要将球动画链接为与敌人分开的 MovieClip（您仍然可以在敌人电影中使用它）。这允许您在 AS3 中将其作为单独的类引用。

当敌人去投掷它时，你需要知道敌人动画的哪一帧应该放手。我会使用帧标签，但您也可以手动记录帧号。

要将球与敌人断开连接，您需要将其作为敌人 MovieClip 的子级移除，并将其添加到“关卡”或敌人本身拥有的任何父级。注意：虽然它是敌人的孩子，但它继承了敌人的翻译；现在它不再是一个孩子，你需要手动将它在关卡中的位置偏移敌人的位置。

> 如何让球在弯曲的路径上运动。

这可以通过使用补间动画或其他动画工具在 Flash Professional 中为球设置动画来完成。这样，当你从敌人身上释放它时，你只需要播放它的动画。

或者，您可以使用基于“[射弹运动](http://en.wikipedia.org/wiki/Projectile_motion)”的方程式手动转换每一帧。

# sharepoint-2010 - 共享点列表添加事件

> ID：10368278
> 
> 赞同：0
> 
> 时间：2012-04-28T22:55:58.700
> 
> 标签：sharepoint-2010

添加新文档库时，我需要执行一些代码。我为列表创建了一个事件接收器并处理 ListAdded 事件。调试/部署后我得到的错误是“无法从沙盒代码程序集中创建对象......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:45:36.817

要使事件在站点集中的所有站点上触发，必须将功能的范围更改为站点；这样，当我们在网站集中激活该功能时，该功能就会启用，而不必在每个子网站上激活该功能。请注意，功能的站点范围是指站点集合（参见图 7）；Web 范围是指站点。

![在此处输入图像描述](../Images/30eed731472188deaef07b550f62199d.png)

更多：http: [//msdn.microsoft.com/en-us/library/gg981880.aspx](http://msdn.microsoft.com/en-us/library/gg981880.aspx)

# c++ - 逻辑比较 == 运算符重载

> ID：10368280
> 
> 赞同：0
> 
> 时间：2012-04-28T22:56:30.983
> 
> 标签：c++, comparison, operator-overloading

我需要做一些逻辑比较并返回一个布尔答案。

以下是 .cpp 文件中的代码：

```
bool MyString::operator==(const MyString& other)const
{
    if(other.Size == this.Size)
    {
            for(int i = 0; i < this.Size+1; i++)
            {
                    if(this[i] == other[i])

                            return true;
            }
    }
    else
            return false;
} 
```

这是从 main.cpp 文件中调用的内容：

```
 if (String1 == String4)
 {
    String3.Print ();
 }
 else
 {
     String4.Print ();
 } 
```

这是我得到的编译错误：

```
error: request for member `Size` in `this`, which is of non-class type `const MyString* const`
error: no match for `operator[]` in `other[i]` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T22:58:05.093

`this`是一个指针，因此您必须取消引用它：

```
this->Size; 
```

另外我认为你的逻辑`operator==`是有缺陷的 - 在这里，`true`如果任何字符等于第二个字符串中相同位置的字符，它就会返回。将循环更改为

```
 for(int i = 0; i < this->Size+1; i++)
        {
                if(this[i] != other[i])

                        return false;
        } 
```

并放置`return true;`而不是代码的最后一部分（`else`子句）来比较整个字符串。

正如 Seth 所提到的，你不能像上面那样使用`operator[]`on `this`- 这样它被视为数组（即`this[i]`真的`*(this + i)`- 所以不是你想的那样）。改为访问您的内部存储成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T23:28:37.507

您的代码存在问题：

*   `this[i]`：您显然想在此处访问字符串的第 i 个字符。这不是这样做的。假设你的类重载`operator[]`，你想要`(*this)[i]`. 或者，您可以直接访问字符串的内部表示。

*   `if(this[i] == other[i]) return true;`：想想这对于比较字符串“A1”和“AB”意味着什么。

*   `for () {...}`: 当你退出循环时会发生什么？如果比较设法通过循环而不返回，则您需要返回一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T23:28:22.210

您尚未指定是否可以使用 C++ 标准算法。在这里，您使用手写循环和`std::equal`算法说明了这两个版本：

```
//#define USE_STD_ALGORITHM 1 // uncomment to enable std::equal version
#include <cassert>
#include <algorithm>
#include <stdexcept>

// NOTE: partial simplest definition for the test and presentation purposes only.
struct MyString
{
    MyString(char const* s, std::size_t size) : data(s), Size(size) {}
    char const& operator[](std::size_t index) const;
    bool operator==(const MyString& other) const;
private:
    char const* data;
    std::size_t Size;
};

char const& MyString::operator[](std::size_t index) const
{
    if (index < Size)
        return data[index];
    throw std::out_of_range("index invalid");
}

bool MyString::operator==(const MyString& other) const
{
    if (this->Size == other.Size)
    {
#ifdef  USE_STD_ALGORITHM
        return std::equal(data, data+Size, other.data);
#else
    bool equal = true;
    for(std::size_t i = 0; i < this->Size; ++i)
    {
        if((*this)[i] != other[i])
        {
            equal = false;
            break;
        }
    }
    return equal;
#endif
    }

    return false;
}

int main()
{
    char const* a = "abc";
    char const* b = "abc";
    MyString sa(a, 3);
    MyString sb(b, 3);
    assert(sa == sb);

    char const* c = "adc";
    MyString sc(c, 3);
    assert(!(sa == sc));

    char const* d = "ab";
    MyString sd(d, 2);
    assert(!(sa == sd));
} 
```

祝你好运！

# python - Pyparsing'没有这样的属性_ParseResults__tokdict'在多行输入

> ID：10368281
> 
> 赞同：2
> 
> 时间：2012-04-28T22:56:39.370
> 
> 标签：python, pyparsing

当在多行的输入上运行时，以下代码给我错误“没有这样的属性_ParseResuls__tokdict”。

对于单行文件，没有错误。如果我注释掉此处显示的第二行或第三行，那么无论文件有多长，我都不会收到该错误。

```
for line in input:
    final = delimitedList(expr).parseString(line)
    notid = delimitedList(notid).parseString(line)
    dash_tags = ', '.join(format_tree(notid))

    print final.lineId + ": " + dash_tags 
```

有谁知道这里发生了什么？

编辑：正如建议的那样，我正在添加完整的代码以允许其他人重现错误。

```
from pyparsing import *

#first are the basic elements of the expression

#number at the beginning of the line, unique for each line
#top-level category for a sentiment
#semicolon should eventually become a line break

lineId = Word(nums)
topicString = Word(alphanums+'-'+' '+"'")
semicolon = Literal(';')

#call variable early to allow for recursion
#recursive function allowing for a line id at first, then the topic,
#then any subtopics, and so on. Finally, optional semicolon and repeat.
#set results name lineId.lineId here
expr = Forward()
expr << Optional(lineId.setResultsName("lineId")) + topicString.setResultsName("topicString") + \
Optional(nestedExpr(content=delimitedList(expr))).setResultsName("parenthetical") + \
Optional(Suppress(semicolon).setResultsName("semicolon") + expr.setResultsName("subsequentlines"))

notid = Suppress(lineId) + topicString + \
Optional(nestedExpr(content=delimitedList(expr))) + \
Optional(Suppress(semicolon) + expr)

#naming the parenthetical portion for independent reference later
parenthetical = nestedExpr(content=delimitedList(expr))

#open files for read and write
input = open('parserinput.txt')
output = open('parseroutput.txt', 'w')

#defining functions

#takes nested list output of parser grammer and translates it into
#strings suited for the final output
def format_tree(tree):                                                                                            
    prefix = ''
    for node in tree:
        if isinstance(node, basestring):
            prefix = node
            yield node
        else:
            for elt in format_tree(node):
                yield prefix + '_' + elt

#function for passing tokens from setResultsName
def id_number(tokens):
    #print tokens.dump()
    lineId = tokens
    lineId["lineId"] = lineId.lineId

def topic_string(tokens):
    topicString = tokens
    topicString["topicString"] = topicString.topicString

def parenthetical_fun(tokens):
    parenthetical = tokens
    parenthetical["parenthetical"] = parenthetical.parenthetical

#function for splitting line at semicolon and appending numberId
#not currently in use
def split_and_prepend(tokens):
    return '\n' + final.lineId

#setting parse actions
lineId.setParseAction(id_number)
topicString.setParseAction(topic_string)
parenthetical.setParseAction(parenthetical)

#reads each line in the input file
#calls the grammar expressed in 'expr' and uses it to read the line and assign names to the tokens for later use
#calls the 'notid' varient to easily return the other elements in the line aside from the lineId
#applies the format tree function and joins the tokens in a comma-separated string
#prints the lineId + the tokens from that line
for line in input:
    final = delimitedList(expr).parseString(line)
    notid = delimitedList(notid).parseString(line)
    dash_tags = ', '.join(format_tree(notid))

    print final.lineId + ": " + dash_tags 
```

输入文件是一个txt文档，有以下两行：

```
1768    dummy; data
1768    dummy data; price 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:05:24.817

在 中使用时重新分配`notid`中断第二次迭代`delimitedList`。您的第三行破坏了`notid`代码中前面定义的表达式，因此它只会在第一次迭代中起作用。为 notid 分配使用不同的名称。

# java - 组合列表项

> ID：10368286
> 
> 赞同：-2
> 
> 时间：2012-04-28T22:57:29.910
> 
> 标签：java, linked-list

嗨，我有一个列表，可以说这些项目 {30 50 5 60 90 5 80} 我想做的是例如将第 3 和第 4 个元素组合在一起并拥有 {30 50 65 90 5 80}

你能告诉我我该怎么做吗？我正在使用 java 链表类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:04:18.423

阅读 LinkedList 的 API 文档。没有“组合”方法，但有一种方法可以删除给定索引处的元素，还有一种方法可以在列表中的任何位置插入元素。

[http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:04:52.950

我会遍历你的链表（从头节点开始）。我猜每个 LinkedList 对象上都有一个 nextNode 属性，它允许您的迭代器工作。当您到达索引 2（值为 5）时，找到索引 2 的下一个节点（值为 60），并将该值添加到索引 2（值为 5 使其为 65）。然后找到索引为 3（值为 60）的 nextNode，它指向值为 90 的节点（称为 newNextNode），并将索引 2（值为 5）的 nextNode 属性重置为该节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T23:05:09.143

在当前链接中添加两个值，删除这两个链接并在其位置添加一个新链接。API 位于：[http](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html) ://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html 使用*remove*和*add*方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T23:05:18.940

链表不提供对链表执行操作的方法，它只管理链表。为您执行此操作的唯一方法是从所述位置检索元素并将它们相加，然后从列表中删除所述元素，然后使用索引插入新项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T23:21:13.667

```
public class Main {
    public static void main(String[] args) {
        List<Integer> list = new LinkedList<>();
        list.add(30);
        list.add(50);
        list.add(5);
        list.add(60);
        list.add(90);
        list.add(5);
        list.add(80);
        System.out.println(list);
        combine(list, 2, 3);
        System.out.println(list);
    }
    public static void combine(List<Integer> list, int indexA, int indexB) {
        Integer a = list.get(indexA);
        Integer b = list.get(indexB);
        list.remove(indexB); // [30, 50, 5, 90, 5, 80]
        list.add(indexA, a + b); // [30, 50, 65, 5, 90, 5, 80]
        list.remove(indexB); // [30, 50, 65, 90, 5, 80]
    }
} 
```

输出是：

```
[30, 50, 5, 60, 90, 5, 80]
[30, 50, 65, 90, 5, 80] 
```

您需要检查空值以避免`NullPointerException`

# ruby - Ruby 程序的结构

> ID：10368290
> 
> 赞同：7
> 
> 时间：2012-04-28T22:58:07.667
> 
> 标签：ruby

我需要对 Ruby 程序的构建有所了解。我正在尝试学习如何编写 Ruby（独立于 Rails），因此我正在将我在生物信息学项目中编写的一些 Perl 脚本翻译成 Ruby 代码。基本上在有用的地方创建类。

我的问题是如何执行它？Perl 脚本只是长长的命令块，一个接一个。在 Ruby 中什么是合适的？我是否应该在他们自己的 .rb 文件中定义我的类，并在一个单独的 rb 文件中调用这些类及其方法，以便使用它们来执行我的程序？

通常是做什么的？任何例子都将不胜感激。我也很欣赏任何关于如何学习这类事情的一般提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T23:39:02.983

Ruby 确实有通常称为*顶级执行环境*的东西，因此一长串命令会像 Perl 一样立即执行。或者，如果需要，您可以定义类和模块并针对您的问题进行所有 OOP，或者您可以混合使用这些方法。

您将需要至少在顶层或类的顶层有一行来开始一切。所以：

```
p :hello 
```

或者

```
class A
  p :hello
end 
```

或者

```
class A
  def run
    p :hello
  end
end
A.new.run 
```

或者，我最喜欢的：

```
class A
  def run
    p :hello
  end
  self
end.new.run 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T23:59:51.420

我强烈建议您查看其他一些您最喜欢的 gem，以了解它们的代码结构（例如在 Github 上）。我就这样找到了开始。将您的项目视为“宝石”，无论是否发布，都是解决问题的好方法。

# c++ - C++ 函数声明末尾的 const

> ID：10368294
> 
> 赞同：2
> 
> 时间：2012-04-28T22:59:43.330
> 
> 标签：c++, function, constants

> **可能重复：**
> [C++ 方法声明中最后一个“const”的含义？](https://stackoverflow.com/questions/751681/meaning-of-const-last-in-a-c-method-declaration)

在下面的函数声明中，

```
const char* c_str ( ) const; 
```

第二个 const 做什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-28T23:03:16.477

这意味着该方法是“const 方法” 对此类方法的调用不能更改任何实例的数据（`mutable`数据成员除外），并且只能调用其他 const 方法。

const 方法可以在 const 或非常量实例上调用，但非常量方法只能在非常量实例上调用。

```
struct Foo {
  void bar() const {}
  void boo() {}
};

Foo f0;
f0.bar(); // OK
fo.boo(); // OK

const Foo f1;
f1.bar(); // OK
f1.boo(); // Error! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:00:30.627

那`const`只能标记到成员函数上。它保证不会更改任何对象的数据成员。

例如，由于它，以下将是编译时错误：

```
struct MyClass
{ 
    int data; 
    int getAndIncrement() const;
};

int MyClass::getAndIncrement() const
{
    return data++; //data cannot be modified
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T23:03:47.017

它是影响该方法的修饰符（它仅适用于方法）。这意味着它只会访问而不是修改对象的状态（即不会更改任何属性）。

另一个微妙的变化是这个方法只能调用其他`const`方法（让它调用可能会修改对象的方法是没有意义的）。有时，这意味着您需要某些方法的两个版本：the`const`和 non- `const`。

# apache - Apache mod_rewrite 规则作为子域

> ID：10368298
> 
> 赞同：0
> 
> 时间：2012-04-28T23:00:52.027
> 
> 标签：apache, mod-rewrite

怎么会这样

[http://some-url.com/?lang=en](http://some-url.com/?lang=en)

改写为：

[http://en.some-url.com](http://en.some-url.com) ???

通过 mod_rewrite？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:00:20.543

您可以在 some-url.com 的 VirtualHost-configfile 中将所有可能的语言特定子域定义为 ServerAlias 并添加以下 rewriterule

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^some-url\.com$ [NC]
RewriteCond %{QUERY_STRING} lang=(.*)$
RewriteRule . http://%1.some-domain.com/? [R=301,L] 
```

在您的服务器端脚本中，您可以通过检查名为 HTTP_HOST 的 SERVER/CGI 变量来获取实际语言（在 php 中这将是`$_SERVER['HTTP_HOST']`在 ColdFusion 中这将是`#CGI.HTTP_HOST#`）

# php - 查询或客户端中的 MongoDB 数组搜索

> ID：10368302
> 
> 赞同：0
> 
> 时间：2012-04-28T23:01:12.193
> 
> 标签：php, mongodb

我想知道做什么更好。我有一个这样的查询：

```
Array
(
[_id] => MongoId Object
    (
        [$id] => 4eeedd9545c717620a000007
    )
[field1] => ...
[field2] => ...
[field3] => ...
[field4] => ...
[field5] => ...
[field6] => ...

[votes] => Array
    (
        [whoVoted] => Array
            (
                [0] => 4f98930cb1445d0a7d000001
                [1] => 4f98959cb1445d0a7d000002
                [1] => 4f88730cb1445d0a7d000003
            )

    )

) 
```

哪个会更快：

1.  在 1 个查询中拉出整个数组并用于`in_array()`查找正确的 id？
2.  从第一个查询中提取除投票之外的所有内容，然后执行另一个 mongodb 查询以查看该 id 是否存在于数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:36:01.337

这取决于我建议您测试的很多因素，但 IMO 大多数时候只做 2 个查询会更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:15:20.940

取决于返回/搜索的数组的大小。

不同的服务器也在做这项工作，你说的更快是什么意思？在什么规模？

# objective-c - 将 JSON 数组解析为 NSDictionary

> ID：10368303
> 
> 赞同：10
> 
> 时间：2012-04-28T23:01:28.823
> 
> 标签：objective-c, json, ios5, nsdictionary

我正在使用 Wea​​ther Underground API 来制作应用程序，但在解析与严重警报相关的块时遇到了障碍。JSON 使用具有子键值对的键值对——这对我来说不是问题，因为我可以从中制作后续的 NSDictionaries——但严重警报的条目已被证明是有问题的。见下文：

```
"alerts": [
    {
    "type": "WAT",
    "description": "Flash Flood Watch",
    "date": "3:13 PM EDT on April 28, 2012",
    "date_epoch": "1335640380",
    "expires": "8:00 AM EDT on April 29, 2012",
    "expires_epoch": "1335700800",
    "message": "\u000A...Flash Flood Watch in effect through Sunday morning...\u000A\u000AThe National Weather Service in Charleston has issued a\u000A\u000A* Flash Flood Watch for portions of northeast Kentucky... (Note: I trimmed this for length's sake),
    "phenomena": "FF",
    "significance": "A"
    }
] 
```

“警报”对与我能够解析的其他对不同，因为它在子值周围有这个**[] 括号**，我不知道如何清除它，以便我可以访问子值。在我能够解析的其他示例中，它只有**{ } 括号**，而不是 { } 和 [ ] 括号。作为参考，括号始终存在——即使没有恶劣天气警报……在这种情况下，“警报”对返回括号 []，不存在子对。

有没有办法可以从 NSDictionary 中删除 [ ] 括号，或者忽略它们？任何意见，将不胜感激！

* * *

对于参考和故障排除帮助，以下是我成功解析 JSON 文档其余部分的方法：

1) 从原始 JSON 创建一个 NSDictionary

```
//Process Weather Call
NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error]; 
```

2) 为嵌套的 json 对创建后续字典

```
NSDictionary *current_observation = [json objectForKey:@"current_observation"]; 
```

3) 赋值

```
NSString* weather;
weather = [current_observation objectForKey:@"weather"]; 
```

所以最终结果将是一个字符串，上面写着“部分多云”或其他内容，以及许多我没有显示的相关天气值。这些解析成功，因为它们只有范围括号 {}，而不是 [] 括号。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-28T23:18:43.003

括号表示数组中的 Json 数据。您可以将其解析如下

```
NSArray *alertArray = [json objectForKey:@"alerts"]; 
```

现在您应该遍历所有警报并解析它们（在您的情况下它只有 1，但在另一个 json 字符串中可能更多）：

```
//parse each alert
for (NSDictionary *alert in alertArray ){
     NSString* description = [alert  objectForKey:@"description"];
    //etc...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T17:02:59.907

好的，我让它工作了——我想在这里提供一个例子，因为我最终不得不基于@Lefteris 给出的建议来让它工作。

我最终不得不首先将 json 数组作为 NSArray 传递，然后将其转换为带有数组第一个元素的 NSDictionary。之后的一切都按照@Lefteris 的描述进行。

所以，最后，这就是我所拥有的：

```
NSArray *alerts = [json objectForKey:@"alerts"];
NSDictionary *alertDict = [[NSDictionary alloc] init];

//Check that no alerts exist to prevent crashing
if([alerts count] < 1) {
    NSLog(@"No Alerts Here!");
    type = nil;
    ...
}
else  //Populate fields
{
    alertDict = [alerts objectAtIndex:0];
    for (NSDictionary *alert in alertDict)
    {
        NSLog(@"Printing alert!");
        type = [alertDict objectForKey:@"type"];
        ...
    }
} 
```

这让我启动并运行了**一个数组迭代**——继续我希望我可以简单地遍历数组，因为我知道计数并处理任何额外的警报。再次感谢您的帮助！

# c - 如何测试 POSIX 兼容性？

> ID：10368305
> 
> 赞同：4
> 
> 时间：2012-04-28T23:01:47.803
> 
> 标签：c, linux, testing, posix, compatibility

我正在使用 POSIX API 并使用 Linux 编写 C 程序。我在朋友的 Mac OSX PC 上编译并运行它，有一个小错误，但我没有使用 Linux 特定的功能。

我将使用 Linux 添加到 API 的一些特定功能。我还将为 Mac Os X 和 FreeBSD 使用特定的 POSIX 扩展。
我将使用条件编译来选择代码。如果操作系统不是这些，我将使用通用 POSIX 代码。

我没有 Darwin/Mac OSX 和 FreeBSD，Linux 是我 PC 中唯一的操作系统。我无法下载和安装 FreeBSD，因为它超过 500 MB。
我想知道一种方法来测试程序是否会在其他 POSIX 系统上按预期编译和运行。
我想知道是否有 POSIX 模拟器和编译器来进行测试。
测试很简单，它们不使用 GUI 和驱动程序，它们只是命令行。

我需要做 3 个测试：FreeBSD、Mac OSX/Darwin 和 Generic POSIX，但我没有工具。

**编辑**

是否有没有 GUI 的 FreeBSD 和 Darwin 的最小版本，但有 GCC/G++ 和 ssh/scp？达尔文是自由的，不是吗？
我的电脑很旧，但我想我可以将它们安装在虚拟机中，创建虚拟网络并使用 ssh/scp 传输和测试程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T00:00:16.343

一种简单的方法是使用适当的功能测试宏编译您的程序。例如，如果您定义`_POSIX_C_SOURCE`POSIX 的目标版本（当前`200809L`），您将请求系统标头向您的程序公开任何内容，除了 POSIX 基础需要/允许的内容。这可以通过命令行 CFLAGS 和`-D_POSIX_C_SOURCE=200809L`. 如果您想要 XSI 选项（完整的 Single Unix Standard 功能，它是 POSIX 基础的超集），请`-D_XOPEN_SOURCE=700`改用。

这不会帮助您检测来自缺少 POSIX 功能的某些系统的问题（例如，OSX 已损坏并且缺少`sem_init`我检查的最后一个工作，即使它在 POSIX 中是强制性的），或者来自编写依赖于非标准行为的代码在 POSIX 标准接口中（例如，在您传递给的表达式中使用 GNU 正则表达式扩展`regcomp`），但它会帮助您捕获任何不符合标准的*接口的意外使用。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:03:51.840

如果你想为其他系统编译，你通常不需要其他系统，你只需要一个合适的[交叉编译器](http://en.wikipedia.org/wiki/Cross_compiler)。

# java - 正则表达式是解析 SMTP 接收行的好选择吗

> ID：10368307
> 
> 赞同：0
> 
> 时间：2012-04-28T23:02:11.590
> 
> 标签：java, regex, smtp

我想解析在规范中正式定义的[RFC822（SMTP） “已接收”行的元素，例如：](https://www.rfc-editor.org/rfc/rfc822)

```
原子 = 1*

[...]

收到=“收到”“：”；每个继电器一个
                       [“来自”域] ; 发送主机
                       [“按”域] ; 接收主机
                       [“通过”原子]；物理路径
                      *("with" 原子) ; 链接/邮件协议
                       [“id”味精-id]；接收方消息 ID
                       ["for" 地址规范] ; 初始形式
                       “;” 约会时间 ; 收到时间

[...]

msg-id = "" ; 唯一消息 ID

[...]

addr-spec = 本地部分“@”域；全球地址

等用于域、日期时间等。

```

这是一个真实的例子：

```
收到：来自 ll-194.132.162.89.kv.sovam.net.ua (ll-194.132.162.89.kv.sovam.net.ua [83.170.243.194] (可能是伪造的)) by raq2073.uk2.net (8.10\. 2/8.10.2) 与 <johnsmithsvt@matts.co.uk> 的 ESMTP id 为 lASHDDE10765；格林威治标准时间 2007 年 11 月 28 日星期三 17:13:13
```

正则表达式是捕获接收行部分的好策略吗？

我意识到许多 SMTP 服务器没有正确格式化接收到的行（在现实生活中）。

否则，有没有人知道 Java 中有一个做得很好的库？

**编辑**这是一个[小提琴](http://fiddle.re/83ew)，显示了一个我已经敲了一段时间的正则表达式和测试，这似乎有效。

```
Received:\s+(?:from\s+(.+?))?(?:\(qmail (.+?)\))?(?:\s+by\s+(.+?))?(?:\\s+via\s+(.+?))?(?:\s+with\s+(.+?))?(?:\;?\s+id\s+(.+?))?(?:\s+for\s+(.+?))?(?:;\s*(?!.*\;.*)(.+))?$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:43:27.583

选择实际上取决于您想要实现的目标。

为了捕获接收器行的特定部分（例如“给我发件人部分”），正则表达式非常棒。

如果您需要一个成熟的语法分析器，那么仅靠正则表达式是不够的。特别是 addr-spec 有很多特殊情况，以至于正则表达式无法正确处理每一个（[解释](http://www.regular-expressions.info/email.html)）。正则表达式不是解析器。

上次我需要一个实际的解析器时，我使用[JavaCC](http://javacc.java.net/)编写了自己的解析器。如果您对语法和解析了解一两件事，我只会建议您沿着这条路走下去。

# sql - 具有分组依据的多个运行总计

> ID：10368308
> 
> 赞同：6
> 
> 时间：2012-04-28T23:02:16.807
> 
> 标签：sql, sql-server

我正在努力寻找一种好方法来运行包含 group by 或等效的运行总计。下面基于游标的运行总计适用于完整的表格，但我想扩展它以添加“客户”维度。所以我会得到运行总计，如下所示，但对于每个公司（即公司 A、公司 B、公司 C 等）在一个表中

```
CREATE TABLE test (tag int,  Checks float, AVG_COST float, Check_total float,  Check_amount float, Amount_total float, RunningTotal_Check float,  
 RunningTotal_Amount float)

DECLARE @tag int,
        @Checks float,
        @AVG_COST float,
        @check_total float,
        @Check_amount float,
        @amount_total float,
        @RunningTotal_Check float ,
        @RunningTotal_Check_PCT float,
        @RunningTotal_Amount float

SET @RunningTotal_Check = 0
SET @RunningTotal_Check_PCT = 0
SET @RunningTotal_Amount = 0
DECLARE aa_cursor CURSOR fast_forward
FOR
SELECT tag, Checks, AVG_COST, check_total, check_amount, amount_total
FROM test_3

OPEN aa_cursor
FETCH NEXT FROM aa_cursor INTO @tag,  @Checks, @AVG_COST, @check_total, @Check_amount, @amount_total
WHILE @@FETCH_STATUS = 0
 BEGIN
  SET @RunningTotal_CHeck = @RunningTotal_CHeck + @checks
  set @RunningTotal_Amount = @RunningTotal_Amount + @Check_amount
  INSERT test VALUES (@tag, @Checks, @AVG_COST, @check_total, @Check_amount, @amount_total,  @RunningTotal_check, @RunningTotal_Amount )
  FETCH NEXT FROM aa_cursor INTO @tag, @Checks, @AVG_COST, @check_total, @Check_amount, @amount_total
 END

CLOSE aa_cursor
DEALLOCATE aa_cursor

SELECT *, RunningTotal_Check/Check_total as CHECK_RUN_PCT, round((RunningTotal_Check/Check_total *100),0) as CHECK_PCT_BIN,  RunningTotal_Amount/Amount_total as Amount_RUN_PCT,  round((RunningTotal_Amount/Amount_total * 100),0) as Amount_PCT_BIN
into test_4
FROM test ORDER BY tag
create clustered index IX_TESTsdsdds3 on test_4(tag)

DROP TABLE test 
```

## ----------------------------------

我可以计算任何 1 家公司的运行总数，但我想对多个公司执行此操作以产生类似于以下结果的结果。

```
CLIENT  COUNT   Running Total
Company A   1   6.7%
Company A   2   20.0%
Company A   3   40.0%
Company A   4   66.7%
Company A   5   100.0%
Company B   1   3.6%
Company B   2   10.7%
Company B   3   21.4%
Company B   4   35.7%
Company B   5   53.6%
Company B   6   75.0%
Company B   7   100.0%
Company C   1   3.6%
Company C   2   10.7%
Company C   3   21.4%
Company C   4   35.7%
Company C   5   53.6%
Company C   6   75.0%
Company C   7   100.0% 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T01:22:51.047

我最初开始发布 SQL Server 2012 等效版本（因为您没有提及您使用的版本）。Steve 在最新版本的 SQL Server 中展示了这种计算的简单性方面做得很好，因此我将重点介绍适用于早期版本的 SQL Server（回溯到 2005 年）的一些方法。

我将对您的架构采取一些自由，因为我无法弄清楚所有这些 #test 和 #test_3 和 #test_4 临时表应该代表什么。怎么样：

```
USE tempdb;
GO

CREATE TABLE dbo.Checks
(
  Client VARCHAR(32),
  CheckDate DATETIME,
  Amount DECIMAL(12,2)
);

INSERT dbo.Checks(Client, CheckDate, Amount)
          SELECT 'Company A', '20120101', 50
UNION ALL SELECT 'Company A', '20120102', 75
UNION ALL SELECT 'Company A', '20120103', 120
UNION ALL SELECT 'Company A', '20120104', 40
UNION ALL SELECT 'Company B', '20120101', 75
UNION ALL SELECT 'Company B', '20120105', 200
UNION ALL SELECT 'Company B', '20120107', 90; 
```

在这种情况下的预期输出：

```
Client    Count Running Total
--------- ----- -------------
Company A 1     17.54
Company A 2     43.86
Company A 3     85.96
Company A 4     100.00
Company B 1     20.55
Company B 2     75.34
Company B 3     100.00 
```

单程：

```
;WITH gt(Client, Totals) AS 
(
  SELECT Client, SUM(Amount) 
    FROM dbo.Checks AS c
    GROUP BY Client
), n (Client, Amount, rn) AS
(
  SELECT c.Client, c.Amount, 
    ROW_NUMBER() OVER  (PARTITION BY c.Client ORDER BY c.CheckDate)
    FROM dbo.Checks AS c
)
SELECT n.Client, [Count] = n.rn, 
  [Running Total] = CONVERT(DECIMAL(5,2), 100.0*(
    SELECT SUM(Amount) FROM n AS n2 
    WHERE Client = n.Client AND rn <= n.rn)/gt.Totals
 )
 FROM n INNER JOIN gt ON n.Client = gt.Client
 ORDER BY n.Client, n.rn; 
```

一个稍快的替代方案 - 更多读取但更短的持续时间和更简单的计划：

```
;WITH x(Client, CheckDate, rn, rt, gt) AS 
(
   SELECT Client, CheckDate, rn = ROW_NUMBER() OVER
   (PARTITION BY Client ORDER BY CheckDate),
    (SELECT SUM(Amount) FROM dbo.Checks WHERE Client = c.Client 
      AND CheckDate <= c.CheckDate),
    (SELECT SUM(Amount) FROM dbo.Checks WHERE Client = c.Client)
FROM dbo.Checks AS c
)
SELECT Client, [Count] = rn, 
  [Running Total] = CONVERT(DECIMAL(5,2), rt * 100.0/gt)
  FROM x
  ORDER BY Client, [Count]; 
```

虽然我在这里提供了基于集合的替代方案，但根据我的经验，我观察到游标通常是执行运行总计的最快*支持*方式。还有其他方法，例如古怪的更新，其执行​​速度略快，但不能保证结果。随着源行数的增加，执行自连接的基于集合的方法变得越来越昂贵 - 所以在使用小表进行测试时似乎表现良好，随着表变大，性能下降。

我有一篇几乎完全准备好的博客文章，其中对各种运行总计方法进行了稍微简单的性能比较。它更简单，因为它没有分组，它只显示总数，而不是运行总百分比。我希望尽快发布这篇文章，并尽量记住更新这个空间。

还有另一种需要考虑的替代方法，它不需要多次读取先前的行。这是 Hugo Kornelis 将其描述为“基于集合的迭代”的概念。我不记得我是在哪里第一次学习这种技术的，但在某些情况下它很有意义。

```
DECLARE @c TABLE
(
 Client VARCHAR(32), 
 CheckDate DATETIME,
 Amount DECIMAL(12,2),
 rn INT,
 rt DECIMAL(15,2)
);

INSERT @c SELECT Client, CheckDate, Amount,
  ROW_NUMBER() OVER (PARTITION BY Client
 ORDER BY CheckDate), 0
 FROM dbo.Checks;

DECLARE @i INT, @m INT;
SELECT @i = 2, @m = MAX(rn) FROM @c;

UPDATE @c SET rt = Amount WHERE rn = 1;

WHILE @i <= @m
BEGIN
    UPDATE c SET c.rt = c2.rt + c.Amount
      FROM @c AS c
      INNER JOIN @c AS c2
      ON c.rn = c2.rn + 1
      AND c.Client = c2.Client
      WHERE c.rn = @i;

    SET @i = @i + 1;
END

SELECT Client, [Count] = rn, [Running Total] = CONVERT(
  DECIMAL(5,2), rt*100.0 / (SELECT TOP 1 rt FROM @c
 WHERE Client = c.Client ORDER BY rn DESC)) FROM @c AS c; 
```

虽然这确实执行了一个循环，并且每个人都告诉您循环和游标不好，但这种方法的一个好处是，一旦计算了前一行的运行总数，我们只需要查看前一行而不是对所有前面的行求和. 另一个好处是，在大多数基于游标的解决方案中，您必须遍历每个客户端，然后进行每次检查。在这种情况下，您将检查所有客户的第一次检查一次，然后检查所有客户的第二次检查一次。因此，我们只进行 (max check count) 迭代，而不是 (client count * avg check count) 迭代。此解决方案对于简单的运行总计示例没有多大意义，但对于分组运行总计示例，应针对上述基于集合的解决方案进行测试。但是，如果您使用的是 SQL Server 2012，它就不可能击败 Steve 的方法。

**更新**

我在这里写了关于各种运行总计方法的博客：

[http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals](http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T00:11:33.973

这在 SQL Server 2012 中终于很简单了，其中 SUM 和 COUNT 支持包含 ORDER BY 的 OVER 子句。使用 Cris 的 #Checks 表定义：

```
SELECT
  CompanyID,
  count(*) over (
    partition by CompanyID
    order by Cleared, ID
  ) as cnt,
  str(100.0*sum(Amount) over (
    partition by CompanyID
    order by Cleared, ID
  )/
  sum(Amount) over (
    partition by CompanyID
  ),5,1)+'%' as RunningTotalForThisCompany
FROM #Checks; 
```

SQL Fiddle[在这里](http://sqlfiddle.com/#!6/5e176/1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T23:45:31.250

我并不完全理解您从中提取的架构，但这里有一个使用临时表的快速查询，它显示了如何在基于集合的操作中进行运行总计。

```
CREATE TABLE #Checks
(
     ID int IDENTITY(1,1) PRIMARY KEY
    ,CompanyID int NOT NULL
    ,Amount float NOT NULL
    ,Cleared datetime NOT NULL
)

INSERT INTO #Checks
VALUES
     (1,5,'4/1/12')
    ,(1,5,'4/2/12')
    ,(1,7,'4/5/12')
    ,(2,10,'4/3/12')

SELECT Info.ID, Info.CompanyID, Info.Amount, RunningTotal.Total, Info.Cleared
FROM
(
SELECT main.ID, SUM(other.Amount) as Total
FROM
    #Checks main
JOIN
    #Checks other
ON
    main.CompanyID = other.CompanyID
AND
    main.Cleared >= other.Cleared
GROUP BY
    main.ID) RunningTotal
JOIN
    #Checks Info
ON
    RunningTotal.ID = Info.ID

DROP TABLE #Checks 
```

# web-services - Web 服务、Axis 和 OSGI (knopflerfish)

> ID：10368309
> 
> 赞同：2
> 
> 时间：2012-04-28T23:02:18.460
> 
> 标签：web-services, tomcat, osgi, axis, knopflerfish

我首先警告你，因为我是初学者。所以，我不知道我是否会在所有方面都具体。这是我的问题：

我有一个 wsdl 文件。目前，我使用 Tomcat 和 Axis 来部署它。因此，为此，我使用了轴的 wsdl2java 工具，它为我生成了 Web 服务的“骨架”。然后我在生成的文件上写下 web 服务的各种方法的代码。最后，我使用 Axis 在 tomcat 上部署 web 服务。一切似乎或多或少都有效。

问题是我想使用 osgi (knopflerfish) 的捆绑轴来部署这个 web 服务。但我不知道该怎么做。

我们是否应该再次使用 wsdl 文件并使用类似 wsdl2java 但适用于 knopflerfish 的工具生成代码？或者我应该使用之前在 Axis 上创建的“骨架”并将其调整为 osgi？一般来说，我们如何使用knopflerfish的轴束？

老实说，我在互联网上找不到很多关于它的东西。所以这就是我写信给社区的原因:(

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:45:53.480

[在http://www.ibm.com/developerworks/webservices/library/ws-OSGi/](http://www.ibm.com/developerworks/webservices/library/ws-OSGi/)上找到一篇文章，用于将 Web 服务部署为 OSGI 包。这使用 Eclipse Equinox 作为 OSGi 容器，Apache CXF 作为 Web 服务框架，并部署在 Apache Servlet Container 中。希望这能满足将 Web 服务分解为 OSGI 服务的要求。

# javascript - Jquery mobile data-rel="dialog" 在 iphone 或 ipad 上不起作用

> ID：10368310
> 
> 赞同：4
> 
> 时间：2012-04-28T23:02:25.250
> 
> 标签：javascript, jquery, iphone, ipad, jquery-mobile

以下代码

```
<a data-rel="dialog" href="/Client/Events?ID=c2a7a58e-bef1-4574-987f-4adfc2c3ecc1">
    <div class="ui-li-aside"> 1 </div>
       <div>
          Alejandra Garcia
       </div>
   </a> 
```

这适用于我的电脑浏览器，也适用于 windows phone 浏览器。但不适用于 iphone 或 ipad 浏览器。看起来链接被点击了，但我没有看到任何对话框。要么是超级延迟，要么就是不工作。

页面的响应和加载时间非常快，并且可以在常规桌面浏览器上无缝运行。它是一个非常小的页面加载。

我应该尝试让它工作的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:23:07.533

我怀疑这与您正在使用的网址有关，而 JQM 不明白如何制作这样的链接：

```
/Client/Events/StubCheckIn/innasf?stubID=c807321b-5381-4338-adef-9e676374d85d 
```

没有文件结尾，没有标签，我一直在用一个简单的 [?para=meter] (https://github.com/jquery/jquery-mobile/issues/4253) 链接和 JQM 处理它几个天。

我解决“ipad 上什么都没有发生”的最简单方法是通过相应的 JQM 小部件启用 iPad 调试器和 console.log-ging。在您的情况下从这里开始（大约第 3582 行）：

```
// click routing - direct to HTTP or Ajax, accordingly
$( document ).bind( "click", function( event ) {
    // your first flag
    console.log("flag 1 - click detected")
    if( !$.mobile.linkBindingEnabled ){
        return;
        }

     var link = findClosestLink( event.target ), $link = $( link ), httpCleanup;

     if ( !link || event.which > 1 || !$link.jqmHijackable().length ) {
        // your second flag
        console.log("flag 2 - not a link?!?)
        return;
        }
      ... 
```

通过*点击处理程序*一直执行此操作，并确保标记所有**返回**，这会因各种原因结束函数。

当您完成点击处理程序（不是那么长）时，您会看到它触发了一个 changePage，因此请跟随它到 changePage 处理程序并继续标记。这应该从这里的 (#3232) 行开始：

```
 // Show a specific page in the page container.
  $.mobile.changePage = function( toPage, options ) {
     console.log("flag x - made it to changepage");
     ... 
```

一直通过*changepage*，然后跟随*transitionpages*（我认为不会是这样）和*$.mobile.loadPage*（大约#2931，更有可能）。

标记完所有内容后（在加载页面后停止！:-)，在浏览器和 ipad 上重新加载页面，并查看 ipad 与浏览器的故障位置。可能需要一个小时，但之后您将对 JQM 的工作方式有一个很好的了解 :-)

另一个原因可能是 pushstate 处理程序（大约 #3781）。如果浏览器支持 pushstate（桌面是，iOS ......不确定，iOS3 否）你可以制作*漂亮的 URL*，所以如果你从你的页面开始：

```
root.com/client/events/checkin/innasf 
```

到一个对话框

```
http://root.com/Client/Events/StubCheckIn/innasf?stubID=96e63aee-1465-4ecd-ad35-123f240d09ff 
```

您的浏览器仍然显示页面 url - 可能是因为您将*changehash*设置为 false （保留 url）。这（我相信）是由 pushstate 处理程序完成的，因为您的 URL 应该是：

```
 root.com/client/events/checkin/innasf#http://root.com/Client/Events/StubCheckIn/innasf?stubID=96e63aee-1465-4ecd-ad35-123f240d09ff&some-dialog-ending 
```

这将是非推送状态设备将尝试解析的 url（例如，我的 iPad ios3.3），它也不起作用。

然而，我的猜测是，当 JQM 解析 URL 时，您的链接在 click 或 changepage 处理程序中的某处失败。

如果您标记自己，请告诉我浏览器和 iOS 之间的差异在哪里出现。然后我们可以看看这是否可以修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T20:21:29.003

好的，我在 iOS Safari 的调试控制台下检查了该站点。看起来 Safari 正在阻止您的对话框加载的对 facebook 的跨域请求（在此处引用：[不安全的 JavaScript 尝试访问 Safari 中的框架警告](https://stackoverflow.com/questions/858811/unsafe-javascript-attempt-to-access-frame-warning-in-safari)）——这是调试控制台显示的警告。根据我的研究，Safari 在这方面似乎比其他浏览器更严格。

# java - 有没有关于如何使用 Java ObjectPool/pools 的好的教程或示例？

> ID：10368311
> 
> 赞同：7
> 
> 时间：2012-04-28T23:02:34.560
> 
> 标签：java, connection-pooling

我正在尝试创建一个到队列服务器的通道/连接池，并尝试使用 ObjectPool，但在他们网站上的[示例中使用它时遇到了问题。](http://commons.apache.org/pool/examples.html)

到目前为止，我有线程可以工作，但我希望每个线程都从池中获取一个通道，然后返回它。我了解如何使用它（borrowObject/returnObjects），但不确定如何创建初始池。

以下是在 rabbitmq 中创建通道的方式：

```
ConnectionFactory factory = new ConnectionFactory();
    factory.setHost("localhost");
    Connection connection = factory.newConnection();
    Channel channel = connection.createChannel(); 
```

我的代码只是使用通道来做事。我很困惑，因为我能找到的唯一例子（在他们的网站上）是这样开始的：

```
private ObjectPool<StringBuffer> pool;

    public ReaderUtil(ObjectPool<StringBuffer> pool) { 
        this.pool = pool;
    } 
```

这对我来说没有意义。我意识到这对于建立数据库连接很常见，所以我尝试查找使用数据库和 ObjectPool 的教程，但它们似乎使用特定于数据库的 DBCP（而且我似乎无法使用我的队列服务器的逻辑）。

关于如何使用它的任何建议？还是有另一种方法用于java中的池？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T23:35:37.263

他们创建了一个创建对象的类，并且知道返回对象时要做什么。这对你来说可能是这样的：

```
public class PoolConnectionFactory extends BasePoolableObjectFactory<Connection> { 

    private final ConnectionFactory factory;
    public PoolConnectionFactory() {
        factory = new ConnectionFactory();
        factory.setHost("localhost");
    }

    // for makeObject we'll simply return a new Connection
    public Connection makeObject() { 
        return factory.newConnection();
    } 

    // when an object is returned to the pool,  
    // we'll clear it out 
    public void passivateObject(Connection con) { 
        con.I_don't_know_what_to_do(); 
    } 

    // for all other methods, the no-op  
    // implementation in BasePoolableObjectFactory 
    // will suffice 
} 
```

现在你创建一个`ObjectPool<Connection>`地方：

```
ObjectPool<Connection> pool = new StackObjectPool<Connection>(new PoolConnectionFactory()); 
```

然后你可以`pool`在你的线程中使用

```
Connection c = pool.borrowObject();
c.doSomethingWithMe();
pool.returnObject(c); 
```

对您没有意义的行是将池对象传递给不同类的一种方式。见最后一行，他们在创建阅读器的同时创建了池。

```
new ReaderUtil(new StackObjectPool<StringBuffer>(new StringBufferFactory())) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T23:57:07.043

您将需要 PoolableObjectFactory 的自定义实现来创建、验证和销毁要池化的对象。然后将您的工厂实例传递给 ObjectPool 的构造函数，您就可以开始借用对象了。

这是一些示例代码。您还可以查看使用 commons-pool 的 commons-dbcp 的源代码。

```
import org.apache.commons.pool.BasePoolableObjectFactory;
import org.apache.commons.pool.ObjectPool;
import org.apache.commons.pool.PoolableObjectFactory;
import org.apache.commons.pool.impl.GenericObjectPool;

public class PoolExample {
    public static class MyPooledObject {
        public MyPooledObject() {
            System.out.println("hello world");
        }

        public void sing() {
            System.out.println("mary had a little lamb");
        }

        public void destroy() {
            System.out.println("goodbye cruel world");
        }
    }

    public static class MyPoolableObjectFactory extends BasePoolableObjectFactory<MyPooledObject> {
        @Override
        public MyPooledObject makeObject() throws Exception {
            return new MyPooledObject();
        }

        @Override
        public void destroyObject(MyPooledObject obj) throws Exception {
            obj.destroy();
        }
        // PoolableObjectFactory has other methods you can override
        // to valdiate, activate, and passivate objects.
    }

    public static void main(String[] args) throws Exception {
        PoolableObjectFactory<MyPooledObject> factory = new MyPoolableObjectFactory();
        ObjectPool<MyPooledObject> pool = new GenericObjectPool<MyPooledObject>(factory);

        // Other ObjectPool implementations with special behaviors are available;
        // see the JavaDoc for details

        try {
            for (int i = 0; i < 2; i++) {
                MyPooledObject obj;

                try {
                    obj = pool.borrowObject();
                } catch (Exception e) {
                    // failed to borrow object; you get to decide how to handle this
                    throw e;
                }

                try {
                    // use the pooled object
                    obj.sing();

                } catch (Exception e) {
                    // this object has failed us -- never use it again!
                    pool.invalidateObject(obj);
                    obj = null; // don't return it to the pool

                    // now handle the exception however you want

                } finally {
                    if (obj != null) {
                        pool.returnObject(obj);
                    }
                }
            }
        } finally {
            pool.close();
        }
    }
} 
```

# python - 如何减少对数据存储的请求数量

> ID：10368312
> 
> 赞同：0
> 
> 时间：2012-04-28T23:02:38.317
> 
> 标签：python, google-app-engine, google-cloud-datastore

根据 AppStats，当使用 200 个文档和 1 个 DocUser 运行以下脚本时，脚本大约需要 5000 毫秒。罪魁祸首是 lastEditedBy (datastore_v3.Get) 的每次锁定都会向数据存储发出请求，每次锁定需要 6-51 毫秒。

我正在尝试做的是做一些事情，可以显示具有多个属性的许多实体，其中一些属性是从其他实体派生的。永远不会有大量实体（<5000），并且由于这更像是一个管理界面，因此永远不会有很多同时用户。

我试图通过缓存 DocUser 实体进行优化，但如果不对数据存储区发出新请求，我就无法从上面的查询中获取 DocUser 键。

1）这有意义吗 - 我遇到的延迟正常吗？

2) 有没有办法在不对数据存储区发出额外请求的情况下完成这项工作？

*模型.py*

```
class Document(db.Expando):
    title = db.StringProperty()
    lastEditedBy = db.ReferenceProperty(DocUser, collection_name = 'documentLastEditedBy')  
...

class DocUser(db.Model):
    user = db.UserProperty()
    name = db.StringProperty()  
    hasWriteAccess= db.BooleanProperty(default = False)
    isAdmin = db.BooleanProperty(default = False)
    accessGroups = db.ListProperty(db.Key)
... 
```

*主文件*

```
$out = '<table>'   
documents = Document.all()
for i,d in enumerate(documents):        
    out += '<tr><td>%s</td><td>%s</td></tr>' % (d.title, d.lastEditedBy.name)
$out = '</table>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T23:27:54.827

这是典型的反模式。您可以通过以下方式解决此问题：

*   预取所有引用。有关详细信息，请参阅[Nick 的博客条目](http://blog.notdot.net/2010/01/ReferenceProperty-prefetching-in-App-Engine)。
*   使用 ndb。此模块没有 ReferenceProperty。它有各种好东西，如[2 个自动缓存层](https://developers.google.com/appengine/docs/python/ndb/cache)、[称为 tasklet 的异步机制](https://developers.google.com/appengine/docs/python/ndb/async)等。有关更多详细信息，[请参阅 ndb 文档](https://developers.google.com/appengine/docs/python/ndb/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T04:40:43.260

一种方法是预取所有文档生成一个查找字典，键是 docuser.key()，值是 docuser.name。

```
 docusers = Docuser.all().fetch(1000)
    docuser_dict = dict( [(i.key(), i.name) for i in docusers] ) 
```

然后在您的代码中，您可以通过使用 get_value_for_datastore 从 docuser_dict 获取名称来获取 docuser.key() 而无需从数据存储中提取对象。

```
 documents = Document.all().fetch(1000)
    for i,d in enumerate(documents):
        docuser_key = Document.lastEditedBy.get_value_for_datastore(d)
        last_editedby_name = docuser_dict.get(docuser_key)
        out += '<tr><td>%s</td><td>%s</td></tr>' % (d.title, last_editedby_name) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T20:07:54.173

如果您想减少实例时间，您可以将单个同步查询分解为多个异步查询，这样可以在您执行其他工作时预取结果。不要使用 Document.all().fetch()，而是使用 Document.all().run()。您可能必须阻止您迭代的第一个查询，但是当它完成时，所有其他查询都将完成加载结果。如果您想获得 200 个实体，请尝试一次使用 5 个查询。

```
q1 = Document.all().run(prefetch_size=20, batch_size=20, limit=20, offset=0)
q2 = Document.all().run(prefetch_size=45, batch_size=45, limit=45, offset=20)
q3 = Document.all().run(prefetch_size=45, batch_size=45, limit=45, offset=65)
q4 = Document.all().run(prefetch_size=45, batch_size=45, limit=45, offset=110)
q5 = Document.all().run(prefetch_size=45, batch_size=45, limit=45, offset=155)
for i,d in enumerate(q1):        
    out += '<tr><td>%s</td><td>%s</td></tr>' % (d.title, d.lastEditedBy.name)
for i,d in enumerate(q2):        
    out += '<tr><td>%s</td><td>%s</td></tr>' % (d.title, d.lastEditedBy.name)
for i,d in enumerate(q3):        
    out += '<tr><td>%s</td><td>%s</td></tr>' % (d.title, d.lastEditedBy.name)
for i,d in enumerate(q4):        
    out += '<tr><td>%s</td><td>%s</td></tr>' % (d.title, d.lastEditedBy.name)
for i,d in enumerate(q5):        
    out += '<tr><td>%s</td><td>%s</td></tr>' % (d.title, d.lastEditedBy.name) 
```

我为我的蹩脚蟒道歉；但这个想法很简单。设置您的 prefetch_size = batch_size = limit，并立即启动所有查询。q1 的大小较小，因为我们会先对其进行阻塞，而阻塞是浪费时间。到 q1 完成时，q2 将完成或几乎完成，而 q3-5 您将支付零延迟。

有关详细信息，请参阅[https://developers.google.com/appengine/docs/python/datastore/async#Async_Queries](https://developers.google.com/appengine/docs/python/datastore/async#Async_Queries)。

# php - PHP图像上传器重命名图像？

> ID：10368319
> 
> 赞同：1
> 
> 时间：2012-04-28T23:03:38.170
> 
> 标签：php, image, rename, uploader

我正在尝试在将图像上传到我的服务器时重命名它。通常有一种简单的方法可以做到这一点吗？下面是我正在使用的 php 代码。我想将它重命名为我作为 html 表单中的隐藏字段传递的变量。

```
 //variable from hidden field on form which is from mysql database
 $imageName = $_POST['image_rename'];

 if ((($_FILES["file"]["type"] == "image/gif") || ($_FILES["file"]["type"] == "image/jpeg") || ($_FILES["file"]["type"] == "image/jpg") || ($_FILES["file"]["type"] == "image/pjpeg")) && ($_FILES["file"]["size"] < 8000000))
   {
   if ($_FILES["file"]["error"] > 0)
     {
     echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
     }
   else
     {
     echo "Upload: " . $_FILES["file"]["name"] . "<br />";
     echo "Type: " . $_FILES["file"]["type"] . "<br />";
     echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
     echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

     if (file_exists("../uploads/" . $_FILES["file"]["name"]))
       {
       echo $_FILES["file"]["name"] . " already exists. ";
       }
     else
       {
       move_uploaded_file($_FILES["file"]["tmp_name"], "../uploads/" . $_FILES["file"]["name"]);
       echo "Stored in: " . "../uploads/" . $_FILES["file"]["name"];
       }
     }
   }
 else
   {
   echo "Invalid file";
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:09:25.020

尝试更改`move_uploaded_file()`功能；在函数中添加您想要的名称。只需确保获取正确的扩展名，例如：

```
$parts=explode('.',$_FILES['file']['name']);
$newName=$imageName.'.'.$parts[(count($parts)-1)];
move_uploaded_file($_FILES['file']['tmp_name'],'../uploads/'.$newName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:08:40.187

改变

```
 move_uploaded_file($_FILES["file"]["tmp_name"], "../uploads/" . $_FILES["file"]["name"]); 
```

至

```
 move_uploaded_file($_FILES["file"]["tmp_name"], "../uploads/" . $imageName); 
```

# java - 如何使用 jformdesigner 调用公共类以在 java 中显示 gui

> ID：10368324
> 
> 赞同：0
> 
> 时间：2012-04-28T23:04:10.993
> 
> 标签：java, eclipse, swing, jframe

我希望在主要方法中显示我的 gui，但它似乎没有这样做......我在这里使用了建议： [jformdesigner design it won't display?](https://stackoverflow.com/questions/5971882/jformdesigner-design-it-wont-display)

但这没有用，

我目前的错误是 Eclipse 建议我需要创建一个名为 setDefaultCloseOperation 的方法，该方法已经在类中定义，并且对于 setvisible 也是如此。

“未定义 bmicalc 类型的方法 setDefaultCloseOperation(int)

未定义 bmicalc 类型的方法 setVisible(boolean)"

主要方法：

```
import java.awt.Container;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.WindowConstants;

public class iu {
public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            bmicalc GUI = new bmicalc();
            GUI.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            GUI.setVisible(true);
        }
    });
class bmicalc extends JFrame{

public bmicalc() {
    initComponents();

}
private void initComponents() {
    JFrame bmiCalculatorFrame = new JFrame();
    {
        bmiCalculatorFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        bmiCalculatorFrame.setTitle("BMI Calculator");
        Container bmiCalculatorFrameContentPane = bmiCalculatorFrame.getContentPane();
        bmiCalculatorFrameContentPane.setLayout(new GridLayout());
    }
}}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:10:42.893

您的`bmicalc`课程应该扩展`JFrame`，但事实并非如此。`setDefaultCloseOperation`和`setVisible`方法属于`JFrame`。

另外，不是很清楚，但看起来 JFormDesigner 生成了另一个`JFrame`.

**编辑：**

这是一个`JFrame`由 JFormDesigner 生成的示例：

```
public class TestFrame extends JFrame {
     public static void main(String[] args) {
            SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    TestFrame frame = new TestFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setVisible(true);
                }
            });
     }

    public TestFrame() {
        initComponents();
    }

    private void initComponents() {
        // JFormDesigner - Component initialization - DO NOT MODIFY  //GEN-BEGIN:initComponents

        //======== this ========
        Container contentPane = getContentPane();
        contentPane.setLayout(new FormLayout(
            "default",
            "default"));
        pack();
        setLocationRelativeTo(getOwner());
        // JFormDesigner - End of component initialization  //GEN-END:initComponents
    }

    // JFormDesigner - Variables declaration - DO NOT MODIFY  //GEN-BEGIN:variables
    // JFormDesigner - End of variables declaration  //GEN-END:variables
} 
```

**编辑 - 根据最后一个问题编辑**

要解决您的编译问题，请参阅下面的代码段。但是，尚不清楚您要通过`JFrame bmiCalculatorFrame`.

```
class bmicalc extends JFrame{

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            bmicalc GUI = new bmicalc();
            GUI.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            GUI.setVisible(true);
        }
    });
}

public bmicalc() {
    initComponents();

}

private void initComponents() {
    //............
}
} 
```

# iphone - iPhone应用程序编程

> ID：10368328
> 
> 赞同：1
> 
> 时间：2012-04-28T23:04:51.553
> 
> 标签：iphone, camera, cross-platform

我已经使用 HTML、CSS、JavaScript、jQuery、PHP 和 SQL 查询构建了一些 iPhone Web 应用程序。但是，我还没有找到使用网络应用程序访问相机的方法。如果您知道这样做的方法，请告诉我要使用什么以及如何使用它。如果无法通过网络应用程序访问相机，我意识到我将不得不制作一个常规应用程序。我应该开始学习什么语言？Instagram 是一个网站，所以我不完全确定他们是如何做到的。

所以我的问题是，如果我想构建一个类似于 instagram 的应用程序（我可以访问相机），我应该从哪里开始？我应该学习什么语言？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T23:21:15.980

[PhoneGap](http://phonegap.com/)可能是适合您的工具。

> PhoneGap 是一个 HTML5 应用程序平台，允许您使用 Web 技术编写本机应用程序并访问 API 和应用程序商店。

请参阅其相机 API 上的[此参考。](http://wiki.phonegap.com/w/page/16494789/iPhone%3a%20Camera%20API)

# bmp - 在C中旋转bmp图像的最快方法是什么？

> ID：10368336
> 
> 赞同：0
> 
> 时间：2012-04-28T23:06:00.050
> 
> 标签：bmp

我正在创建一个照片编辑应用程序，我想知道..如何快速旋转 bmp 图片？我的意思是，将它旋转 90 度的最快代码是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:10:39.013

我认为它归结为旋转矩阵或二维矩阵。这意味着当图像的尺寸为 n * m 时，您必须执行 O(n * m) 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:51:45.783

Paint 有几段代码可以非常快地完成所需的事情，具体取决于您的灵巧度。

# python - Python 3 中的池和多处理问题

> ID：10368341
> 
> 赞同：2
> 
> 时间：2012-04-28T23:06:32.497
> 
> 标签：python, python-3.x, multiprocessing, pool

目前我正在尝试将我的小 python 脚本转换为支持多个线程/内核。我已经阅读多处理模块好几天了，我也一直试图让它满足我的需要一段时间，但我仍然不知道为什么它不起作用。

[这](https://github.com/Big-Blue/MKVree/blob/db66b345fa8f2a602c538cac3ff6db7c8af01619/MKVree.py)是工作代码，[这](http://pastebin.com/vfzrHBnm)是我实现池工作者的方法。由于没有锁定，而且我一开始不想让它太复杂，我已经禁用了日志记录到文件。

还是不行。它甚至不输出任何类型的错误消息。运行后，它只显示欢迎消息，然后继续运行，但不输出任何所需的输出，即每个转换文件 2 行（转换前 + 转换后）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:33:01.040

您的工作人员所做的就是等待已启动的子流程完成。他们没有任何实际工作要做，因为这是由外部子流程执行的，所以他们将一直处于空闲状态。对你所做的事情使用多处理确实是矫枉过正，为此使用线程更为合适。

如果您想学习如何进行多处理，请尝试涉及进程间通信、同步、管道......

但也要解决您的问题：看看参数[`subprocess.call`](http://docs.python.org/library/subprocess#subprocess.call)需要什么。你用一个空格分隔的命令字符串来调用它。如果你想让它工作你必须通过`shell=True`，否则整个字符串被解释为可执行文件的名称。
使用 subprocess 调用程序的首选方法是将程序和参数指定为列表：

```
subprocess.Popen(['/path/to/program', 'arg1', 'arg2'], *otherarguments) 
```

# php - 获取 facebook 用户 ID 并从 iOS 应用程序传递到 MySQL？

> ID：10368342
> 
> 赞同：0
> 
> 时间：2012-04-28T23:06:49.630
> 
> 标签：php, iphone, mysql, xcode

我开发了一个应用程序，成功使用 Facebook Connect 允许用户登录。登录后，用户可以将照片上传到我的服务器。这些照片/图像的 URL 链接存储在 MySQL 中。我需要将他们的 Facebook 用户 ID 链接到他们在我的数据库中的照片。所以我的问题是：

如何在 Xcode 中获取用户 ID？然后我如何将它传递给 MySQL？所有这些代码是什么样的？

为了回应乔尔的回答，我将如何将 Facebook 凭据添加到 NSUserDefaults？我知道如何存储一个值（如下），但是如何为 facebookID、userName 和 userEmail 执行多个值？

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"username"] == nil) //we haven't saved anything yet
    [defaults setObject:authenticatedUsersName forKey:@"username"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:33:47.983

正如上面的评论所建议的那样，存储 Facebook 用户 ID 没有任何问题。令牌可以在会话之间以及设备之间更改。此外，如果您有多个应用程序（例如 web/android/iphone），您希望跨设备识别用户。事实上，这就是您应该唯一引用用户的方式。

无论如何，要让 fid 这样做：

在您的 fbDidLogin 委托方法上，添加以下行：

```
[facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

然后像这样设置请求委托：

```
- (void)request:(FBRequest *)request didLoad:(id)result {
    NSString *facebookId = [result objectForKey:@"id"];
    NSString *userName = [result objectForKey:@"name"];
    NSString *userEmail = [result objectForKey:@"email"]; 

    //do whatever you need to do with this info next 
    //(ie. save to db, pass to user singleton, whatever)

} 
```

附言。上面的代码假设你已经实现了 Facebook 登录。我不打算发布所有代码，因为在他们的入门文档中有该部分的分步说明。

# xml - 使用 jms 发送 xml 有什么好处

> ID：10368343
> 
> 赞同：0
> 
> 时间：2012-04-28T23:06:49.530
> 
> 标签：xml, jms

在当前项目中，我们一直使用 jms 将 xml 作为文本消息发送。我不明白他们为什么不简单地发送 Objectmessage，为什么有处理 xml 的开销？

所以问题基本上归结为为什么在 jms 中使用 xml ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T00:06:53.513

这一切都归结为对消息序列化格式的设计决策。

起初，Objectmessage 似乎是最有效的机制。但是，它在以下情况下效果不佳：

1.  消息验证（XML 模式充当消息契约的一种形式）
2.  发送方和接收方之间的软件版本差异（消息版本控制）
3.  与非 Java 系统的通信

在 XML 中序列化消息并不能完全解决这些问题，但某种形式的人类可读消息格式可以进行调试。

最后，XML 并不是唯一的游戏。JSON 作为 XML 的替代品正变得越来越流行。[Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview)是 Google 的消息传递协议，对一些问题和 Google 的解决方案有很好的概述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T07:46:15.243

在这种情况下使用 XML 的主要好处是您消除了对在通信两端使用相同软件堆栈的依赖。

我曾经遇到一个客户，他正在与一个关键供应商交换数据，他在一端创建他们的 SQL Server 数据库的每日映像，然后在另一端恢复它。结果：任何一方都无法升级到新版本的 SQL Server，除非对方也在同一天升级。

此外，正如 O'Connor 还提到的，XML 使得随着需求的变化扩展消息内容相对容易，而无需每个人都必须同时实现更改。

# java - 如何使用 entitymanger 在我的数据库中插入数据？

> ID：10368351
> 
> 赞同：-3
> 
> 时间：2012-04-28T23:07:52.260
> 
> 标签：java, jpa

拜托你能帮帮我吗

我有两个由@OneToOne 关系关联的实体 Student 和 Adress

```
@Entity
public class Student implements Serializable {

   @Id
   @GeneratedValue(strategy = GenerationType.AUTO)
   private int idstudent;
   private String firstname;
   private String name;
   @OneToOne
   private Adress adress;
   //setters and getters
}

public class Adress implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int idadress;
    private String street;
    private String codezip;
    @OneToOne
    private Student student;
    //getters and setters
} 
```

我想使用实体管理器插入数据我尝试这样做不起作用

```
@PersistenceContext(unitName = "JPADD")
EntityManager em;
Student student = new Student();
student.setfirstname("cc");
student.setname("cc");
Adress adress = new Adress();
adress.setstreet("ccccccccc");
adress.setstudent(student);
em.persist(adress)
em.persist(student); 
```

帮帮我吧aaaaaaaaase :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:27:38.360

我试图猜测你的问题是什么：

您正在尝试保留具有 Student 字段的地址。

现在，您的映射似乎没有 Cascade 属性，所以问题可能在于您正在尝试保留一个地址，该地址的学生不在您的数据库中。

尝试交换最后两行，以便在地址之前保留学生。

你也可以考虑换

```
@OneToOne
private Student student; 
```

至

```
@OneToOne(cascadeType = Cascade.PERSIST)
private Student student; 
```

请记住，我只是想猜测，因为我没有足够的细节来帮助你！

# asp.net - 如何在asp.net中通过电子邮件发送发票

> ID：10368354
> 
> 赞同：0
> 
> 时间：2012-04-28T23:08:12.640
> 
> 标签：asp.net, email

我知道如何在 asp.net 中发送电子邮件，但我不知道如何从网站中提取详细信息并将其放入电子邮件正文。我正在那里建立一个购物车网站，我想通过电子邮件将发票发送给用户。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T07:08:24.120

您可以使用以下代码生成发票：

```
public string GenerateInvoice(Invoice invoiceToGenerate)
    {
        StringBuilder invoiceHtml = new StringBuilder();
        invoiceHtml.Append("<b>INVOICE : ").Append(invoiceToGenerate.InvoiceId.ToString()).Append("</b><br />");
        invoiceHtml.Append("<b>DATE : </b>").Append(DateTime.Now.ToShortDateString()).Append("<br />");
        invoiceHtml.Append("<b>Invoice Amt :</b> $").Append(invoiceToGenerate.Total.ToString("#.00")).Append("<br />");
        invoiceHtml.Append("<br /><b>CUSTOMER CONTACT INFO:</b><br />");
        invoiceHtml.Append("<b>Name : </b>").Append(invoiceToGenerate.ContactName).Append("<br />");
        invoiceHtml.Append("<b>Phone : </b>").Append(invoiceToGenerate.ContactPhone).Append("<br />");
        invoiceHtml.Append("<b>Email : </b>").Append(invoiceToGenerate.ContactEmail).Append("<br />");
        invoiceHtml.Append("<b>Address : </b><br />").Append(invoiceToGenerate.ContactAddress1).Append("<br />");
        invoiceHtml.Append(invoiceToGenerate.ContactAddress2).Append("<br />");
        invoiceHtml.Append(invoiceToGenerate.ContactCity).Append(", ").Append(this.ContactStateProvince).Append(" ").Append(invoiceToGenerate.ContactZip).Append("<br />");
        invoiceHtml.Append("<br /><b>SHIP TO:</b><br />");
        invoiceHtml.Append("<b>Name : </b>").Append(invoiceToGenerate.ShipToName).Append("<br />");
        invoiceHtml.Append("<b>Address : </b><br />").Append(invoiceToGenerate.ShipToAddress1).Append("<br />");
        invoiceHtml.Append(invoiceToGenerate.ShipToAddress2).Append("<br />");
        invoiceHtml.Append(invoiceToGenerate.ShipToCity).Append(", ").Append(this.ShipToStateProvince).Append(" ").Append(invoiceToGenerate.ShipToZip).Append("<br />");
        invoiceHtml.Append("<br /><b>PRODUCTS:</b><br /><table><tr><th>Qty</th><th>Product</th></tr>");
        // InvoiceItem should be a collection property which contains list of invoice lines
        foreach (InvoiceItem invoiceLine in invoiceToGenerate.InvoiceItems)
        {
            invoiceHtml.Append("<tr><td>").Append(invoiceLine.Quantity.ToString()).Append("</td><td>").Append(invoiceLine.ProductName).Append("</td></tr>");
        }
        invoiceHtml.Append("</table>");
        return invoiceHtml.ToString();
    } 
```

然后您可以使用此方法将其包含在您的电子邮件正文中，例如：

```
var mailBody = GenerateInvoice(invoiceObject);

using (MailMessage mailMessage = new MailMessage(fromEmail, toEmail, subject, mailBody))
{
    mailMessage.IsBodyHtml = true;
    using (SmtpClient smtpClient = new SmtpClient())
    {
            smtpClient.Host = "127.0.0.1";
            smtp.Credentials = new System.Net.NetworkCredential("username", "password");
            smtpClient.Send(mailMessage);
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:20:02.333

您可以为新行使用 '\n' 并放置 4 个空格（制表符）使用 '\t'

然后你在邮件函数中发送字符串，如：

```
try
    {

        MailMessage mail = new MailMessage();

        //set the addresses
        mail.From = new MailAddress("username@domain_name.com");
        mail.To.Add(send_to);

        //set the content
        mail.Subject = "This is an subject";
        mail.Body = mail_content;

        //send the message
        SmtpClient smtp = new SmtpClient("127.0.0.1");

        //to authenticate we set the username and password properites on the SmtpClient
        smtp.Credentials = new System.Net.NetworkCredential("username", "password");
        smtp.Send(mail);
    }
    catch (Exception ex)
    {
        //MessageBox.Show(ex.ToString());
    } 
```

不要忘记根据需要使用 System.Net.Mail 添加。

# openid - DotNetOpenAuth SSO 示例行为

> ID：10368355
> 
> 赞同：1
> 
> 时间：2012-04-28T23:08:14.177
> 
> 标签：openid, single-sign-on, dotnetopenauth

在 OpenIdWebRingSso 示例（PR（提供者）和 RP（依赖方）- 3.5.0.10357）上，如果我在 PR 上注销它不会在 RP 上注销我（在下一页请求上），并且在 RP 上注销不会触发 PR 上的注销。

此外，当用户未通过身份验证时，PR 总是重定向到登录（询问用户名和密码）。在 RP 上浏览不需要身份验证的页面时，我需要的只是检查用户是否经过身份验证的请求。如果是这样，请在 RP 上登录用户（那部分很好），但如果不是，则只返回用户未通过身份验证的响应，而不要求登录（除非我确实单击登录按钮或尝试访问 [授权]页）。更新：用“request.Mode = 0;”解决了那部分问题

因此，我需要在 RP 上检查每个页面请求是否已针对 PR 进行了身份验证，并且仅在必要时询问密码。所以问题是：

1) 我可以在示例或其他参考资料中找到此代码吗？

2）如果不是，将它放在 MVC3 应用程序上的最佳位置是什么：- httpModule？- 在基本控制器上并覆盖无效初始化？- OnActionExecuting（ActionFilterAttribute）？- 别的地方？

3) 这种方法对 SSO 是否正确（我有 5 个不同的站点/域为一家公司）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:27:38.110

由于所有站点都属于同一家公司并共享对 userRepository（数据库）的访问权限，因此我决定采用不同的方法，更简单并避免过多的重定向：

*   受信任的站点（白名单中的依赖方 (RP)）向主站点（提供者）发出请求（重定向）并返回 URL。
*   主站点确保请求（returnURL）来自域白名单
*   登录用户（如果未登录，则显示登录表单），将用户标记为登录数据库并将临时令牌添加到用户数据库。
*   主站点返回（重定向）到带有令牌的 RP。
*   RP 使用令牌查看数据库，记录用户并删除令牌。

SSOff 也很简单：只需将用户数据库中的每个请求都检查到布尔记录（userLogged）中。没有重定向。注销时只需将记录 (userLogged) 更改为 false，每个站点都会知道。

为了避免 RP 在用户已登录（重定向）并在 SERP 上受到惩罚时始终检查提供程序，我仅在用户登录后/如果用户登录后将查询字符串 (?checklog=yes) 动态添加到白名单站点链接 url。因此，如果我在登录后从站点 A 转到站点 B，它将转到 siteB.com?checklog=yes，这将提示站点与提供商进行重定向以获取并记录用户……而谷歌将永远不会看到重定向。

# .htaccess - 您可以使用服务器端包含和 htaccess 做什么

> ID：10368357
> 
> 赞同：0
> 
> 时间：2012-04-28T23:08:20.980
> 
> 标签：.htaccess, server-side-includes

这个问题对我来说没有意义，也许聪明的人可以帮忙？为什么许多主机不允许您设置 htaccess 或服务器端包含？特别是很多免费托管计划不允许这样做，他们正在考虑哪些情况会使他们禁用这些功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T15:09:26.307

我也是新手，但你可以用 SSI 做的一件事是让你的网页设计更容易。

您可以将页眉、页脚和导航分区（或站点每个页面上的任何 HTML 元素）分隔到它们自己的 HTML 文件中。这意味着当您添加页面或更改其中一个元素时，您只需更改一次，然后确保将它们与 SSI 包含命令一起包含在每个页面上的正确位置，几乎消除了放置时出错的机会每个页面上的相同元素。

SSI 基本上将引用的 html 文件直接写入包含语句所在的页面中。

我对 .htaccess 知之甚少，因为我还没有玩过它，但是您可以更改服务器在使用不同配置命令时查找 SSI 代码的页面。看起来您也可以启用 SSI。

我知道这一切比我在这里写的要多得多，但希望这能给你一个想法。

这是一个可能更好地解释这一点的网站：[http ://www.perlscriptsjavascripts.com/tutorials/howto/ssi.html](http://www.perlscriptsjavascripts.com/tutorials/howto/ssi.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T00:09:45.163

收入——你不付任何钱，他们得到的唯一钱来自广告。

资源——它们占用额外的资源。仅提供必需品可降低风险和维护量。

违反协议/不道德行为 - 它可能会减少注册免费帐户以重定向网站、重命名、占用资源等的人数。

这就是我想到的。

# python - Python 使用的适当 Unix（.profile、.bash_profile）更改

> ID：10368361
> 
> 赞同：5
> 
> 时间：2012-04-28T23:08:40.727
> 
> 标签：python, profile, .bash-profile

我`Python`一般是编程新手。我是新手，不从事编程工作，只是想自学如何编程作为一种爱好。在 之前`Python`，我工作`Ruby`了一段时间，我了解到最大的挑战之一实际上是正确设置我的计算机。

背景：我在一台装有 OSX 10.7 的 Macbook 上。

使用`Ruby`，您必须（或者更确切地说，您应该）编辑`./profile`并添加`PATH`信息。当您安装和使用`RVM`时，您需要将其他项目添加到您的`bash_profile`.

您是否必须进行类似的更改`Python`？在我安装/开始时，确保我可以正确安装模块和包的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:17:05.997

`python`在 OS X 上开箱即用（`ruby`就此而言，也是如此）。我建议初学者的唯一更改是：

1) Python 喜欢确保终端在打印 Unicode 字符串之前可以处理 UTF-8。添加`export LANG=en_US.UTF-8`到`.profile`. （可能是默认情况下，Lion 上已经存在 .UTF-8 部分 - 自 Snow Leopard 以来我没有检查过。）当然，这将有助于您调试，但您不应该依赖它在其他机器上以这种方式设置。

2）`pip`通过做安装（必要时`easy_install pip`添加）。`sudo`之后，使用`pip install`;安装 Python 包。这样，您可以使用`pip uninstall`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:19:55.253

[首先在 Macintosh](http://www.python.org/getit/mac/)页面上的 Python 中掠夺。就像它说的那样，Python 预装在 Mac OS X 上。这意味着您无需执行任何特殊操作即可使用它。

要开始，您可以运行[Terminal.app](http://en.wikipedia.org/wiki/Terminal_%28OS_X%29)，键入`python`，这将使您的 Python 交互式 shell 启动并运行。

但是，OS X 上的 Python 可能是稍旧的版本。例如，OS X 10.7.3 附带 Python 2.7.1，而 Python 的最新发布版本是 3.2.3。如果要使用其他版本，则必须安装它们。那么这一切都取决于你安装什么，在哪里以及如何安装。如果您想同时拥有多个版本，您可能需要设置一些环境变量，例如`PATH`安装您安装的二进制文件`bash`等。如果需要，您可以通过 bash来完成`~/.profile`。

但在你达到那一点之前——不要担心它使用 OS X 附带的版本。一旦你想要一个更新的版本——下载并安装它。然后，如果它不能开箱即用，或者您有任何其他问题或疑虑，请随时提出更具体的问题。

# javascript - 通过拖放计算放入 DIV 的 DIV 数量

> ID：10368367
> 
> 赞同：1
> 
> 时间：2012-04-28T23:09:39.050
> 
> 标签：javascript, jquery, html

我查看了该站点并找到了一些代码并进行了尝试，但它无法以任何形式或形式工作。

我想计算通过用户拖放放置到另一个 DIV 中的 DIV 的数量，但只计算“正确”的 DIV，然后如果所有正确的 DIV 都在 DIV 中，则会显示一个警报，说做得好，然后休息“游戏” '。还需要显示要“赢”还需要多少。

这是我到目前为止所拥有的：

JS：

```
 $('.drop').each(function(){ 
        var n = $(this).children('.draggable').length;
        $(".count").text("There are " + n + " divs inside parent box detail.");
        if(n == 2){
        alert("You got them all right! :)");
        }
        }); 
```

HTML：

```
 <div class="foods">
              <div class="draggable" id="draggable"><img src="images/fish.png" id="draggable"></div>

              <div class="draggable" id="draggable"><img src="images/stone.png"></div>

              <div class="wrong"><img src="images/tree.png"></div>
            </div>

<div class="foods">                
<div id="droppable" class="drop">
<p>Drop here</p>
</div>
</div>

<div class="foods">
        <span class="count"></span> 
</div> 
```

JS Fiddle 代码：http: [//jsfiddle.net/JRLZK/](http://jsfiddle.net/JRLZK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:56:03.583

问题是您提供的重复 ID。我使用了 class 而不是 id，但你可以在那里应用你自己的逻辑。

```
$( "#droppable" ).droppable({    
    drop: function( event, ui) {
        if($(ui.draggable).hasClass("draggable")){
        $( this )
            .find( "p" )
                .html( "Correct! :)" );
        } else {
                $( this )
                .find( "p" )
                .html( "Wrong! :(" );
        }
    }
}); 
```

[演示](http://jsfiddle.net/JRLZK/1/)

* * *

**更新**

这是计数的解决方法

```
var div = $("<div />"); //a temp container
$( "#droppable" ).droppable({    
    drop: function( event, ui) {
        ui.draggable.clone().appendTo(div);
        if(div.children(".draggable").length == 2) {
            alert('correct');
        }
    }
}); 
```

[演示](http://jsfiddle.net/JRLZK/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T00:07:48.483

这应该用你的逻辑来做。

```
 $(function() {
    var n = 0;
    $( ".draggable" ).draggable();
    $( ".wrong" ).draggable();

    $( "#droppable" ).droppable({    
        drop: function( event, ui) {
            console.log($(ui));
            if($(ui.draggable).hasClass("draggable")){
            $( this )
                .find( "p" )
                 .html( "Correct! :)" );
                n++;
        $(".count").text("There are " + n + " divs inside parent box detail.");
        if(n == 2){
        alert("You got them all right! :)");
        }

            } else {
                    $( this )
                    .find( "p" )
                    .html( "Wrong! :(" );
            }
        }
    });
}); 
```

# .net - 具有性能问题的 LINQ to xml 查询

> ID：10368368
> 
> 赞同：0
> 
> 时间：2012-04-28T23:09:53.370
> 
> 标签：.net, xml, performance, linq

我已经编写了这个 LINQ to xml 查询：

```
Dim xd1 As XDocument = XDocument.Load("C:\doc1.xml")
Dim xd2 As XDocument = XDocument.Load("C:\doc2.xml")
Dim xd3 As XDocument = XDocument.Load("C:\doc3.xml")

Dim q = From a In xd1...<row>, b In xd2...<row>, c In xd3...<row> Where
        a.@Field1 = "pippo" AndAlso b.@Field2 = a.@RifField2 AndAlso c.@Field3 = a.@RifField3 Select
        b.@Field4, b.@Field5, c.@Field6

Dim s As String = ""
For Each a In q
    s &= a.Campo4 & " - " & a.Campo5 & " - " & a.Campo6 & vbCrLf
Next

TextBlock1.Text = s 
```

但是这段代码需要大约 5 秒才能执行。当然我会更改查询，但是在调试时我已经看到该行

暗淡 q = 从...

需要一个istant来执行，并且接下来的每一行都会很快消失，直到循环“For Each”完成要滚动的项目并且它必须退出。然后执行停止 5 秒，然后循环退出。

如果我写，我会得到同样的延迟

```
Dim q = (From ... ).ToArray

or else if I write

Dim i As Long = q.Count 
```

最奇怪的是，需要很长时间才能看到项目列表完成，并且必须退出循环。一个细节：查询 q 只有 8 个项目。

你有什么建议可以解决我的性能问题吗？皮莱吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:27:22.670

让我们在这里看看：

您有 3 个 XML 文件，假设它们`row`每个都有 K、L、M 元素。

然后，您正在对所有这些元素进行[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)，这意味着您有 K*L*M 可能的结果来评估。根据 K、L 和 M 的大小，这将是一项非常快的工作——如果每个只有 1000 行，那么您就有 10 亿个可能的结果。这就是速度如此缓慢的原因。

您应该先进行过滤以避免创建如此巨大的笛卡尔积 -在创建笛卡尔积`a.@Field1 = "pippo"` **之前**移动条件，这应该会显着提高性能。

例如，如果在第一个 XML 文件中只有 10 行与“pippo”匹配，那么您现在只有 10*1000*1000 个可能的结果 = 1000 万 - 仍然很多，但只有您的行数的 1/100当前查询。

在 C# 中（我不是 VB 人），就像

```
var query = from a in xd1.Descendants("row").Where(x=> x.Field1 == "pippo")
            from b in xd2.Descendants("row")
            from c in xd3.Descendants("row")
            //rest of query 
```

# python - matplotlib 动画图不会使用 blit 更新轴上的标签

> ID：10368371
> 
> 赞同：11
> 
> 时间：2012-04-28T23:10:50.320
> 
> 标签：python, animation, matplotlib, axes

我正在使用 wxPython 在图中绘制数据，其中 y 轴上的数据限制随数据而变化。我想动态更改轴而不重绘整个画布，就像`canvas.draw()`我想使用`blitting`它一样，就像我对绘图本身所做的那样。

我要做的是不断变化的 y 轴，我得到了 yticks 的动画，不幸的是 ylabels 不见了，我找不到解决方案。原因是设置`get_yaxis().set_animated(True)`轴的设置。

我在下面整理了一个小的工作示例。我在这里想念什么？

```
import matplotlib
matplotlib.use('WXAgg')

import wx
import pylab as p
import numpy as npy
from time import sleep

ax = p.subplot(111)
canvas = ax.figure.canvas
x = npy.arange(0,2*npy.pi,0.01)
line, = p.plot(x, npy.sin(x), animated=True)

ax.get_yaxis().set_animated(True)

def update_line(*args):
    if update_line.background is None:
        update_line.background = canvas.copy_from_bbox(ax.bbox)

    for i in range(20):
        canvas.restore_region(update_line.background)

        line.set_ydata((i/10.0)*npy.sin(x))
        ax.set_ylim(-1*i/5.0-0.5,i/5.0+0.5)

        ax.draw_artist(ax.get_yaxis())

        ax.draw_artist(line)

        canvas.blit(ax.bbox)

        sleep(0.1)
    print 'end'

update_line.cnt = 0
update_line.background = None
wx.EVT_IDLE(wx.GetApp(), update_line)
p.show() 
```

基本上我正在寻找类似的东西，`get_ylabels().set_animated(True)`但我找不到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T14:37:57.970

看起来标签已绘制，但 blit 命令不会将它们复制到画布上，因为边界框仅包括轴的内部。

对我来说，改变`update_line.background = canvas.copy_from_bbox(ax.bbox)`并让它发挥作用。`update_line.background = canvas.copy_from_bbox(ax.get_figure().bbox)``canvas.blit(ax.bbox)``canvas.blit(ax.clipbox)`

# android - 创建一个空进度条？

> ID：10368372
> 
> 赞同：1
> 
> 时间：2012-04-28T23:10:57.767
> 
> 标签：android, xml, progress-bar

当我运行下面的代码时，它会在日志文件中打印“null”......它有什么问题？

```
ProgressBar progressBar = (ProgressBar)findViewById(R.id.progressBar1);
if (progressBar == null) {
    Log.d("tag", "null");
} 
```

xml调用是：

```
<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="37dp"
    android:layout_y="343dp" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:59:40.907

必须先充气，然后`layout`您`ProgressBar`可能需要使用 in 来`View.findViewById()`代替`Activity.findViewById()`. 我今天早上实际上遇到了这个问题，我的解决方法在这里：

```
 LayoutInflater infl = uI.getLayoutInflater();
    ViewGroup rootGroup = (ViewGroup) uI.findViewById(R.id.voltoast_root);
    View root = infl.inflate(R.layout.volumetoast, rootGroup);
    toast.setView(root);
    pB = (ProgressBar) root.findViewById(R.id.progress); 
```

我正在调用`findViewById()`the`root`而不是我的`Activity`, 并且`root`具有包含 a`LinearLayout`其中`ProgressBar`一个元素的膨胀视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:19:27.330

将样式更改为：

```
style="@android:style/Widget.ProgressBar.Horizontal" 
```

# php - 未确定的字符串文字错误

> ID：10368373
> 
> 赞同：0
> 
> 时间：2012-04-28T23:11:24.557
> 
> 标签：php, javascript

如何修复此未终止的字符串文字错误。此错误是什么意思以及如何修复

以下是完整代码：

```
 <?php
    session_start();

if(isset($_POST['fileImage'])){

$idx = count($_POST ['fileImage']) -1 ;
$output = isset($_POST ['fileImage'][$idx]) ? $_POST ['fileImage'][$idx]['name'] : "";

}

    ?>

    function stopImageUpload(success) {

        var imageNameArray = ['<?php echo  json_encode($output); ?>'];
        var result = '';

        if (success == 1) {
            result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
            for (var i = 0; i < imageNameArray.length; i++) {
                $('.listImage').append(imageNameArray[i] + '<br/>');
            }
        }
        else {
            result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
        }

        return true;
    }​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:13:33.073

这意味着您的引号有问题（回显内容中的额外单引号或换行符）并且它弄乱了解析器。确保正确转义 JS 中的任何特殊字符（引号、换行符等）。

`json_encode`为你做这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T12:56:29.460

更好的解决方案可能如下所示：

```
<?php
session_start();

$results = array();
if(isset($_POST['fileImage'])){
  // not entirely sure what you're trying to achieve here
  // so just replicating the logic you already had
  // but I'm sure there's a better way to do whatever this is trying to do
  $idx = count($_POST['fileImage']) -1 ;
  $results[] = isset($_POST['fileImage'][$idx]) ? $_POST ['fileImage'][$idx]['name'] : "";
}

?>

function stopImageUpload(success) {
  var imageNameArray = <?php echo json_encode($results); ?>;
  var result = '';

  if (success == 1) {
    result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
    for (var i = 0; i < imageNameArray.length; i++) {
      $('.listImage').append(imageNameArray[i] + '<br/>');
    }
  } else {
    result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
  }

  // you might want to use the "result" variable before returning

  return true;
}​ 
```

发生了什么变化？我删除了`[]`周围的输出，`json_encode`并在 PHP 而不是 JS 中创建了数组。这样，当您发布表单时，`$results`它将是一个包含单个元素的数组，而当您不发布表单时，它将是一个空数组。其余的逻辑应该像以前一样工作，但请阅读我添加的评论。

# javascript - 使用 CKEditor / TinyMCE 和 Meteor

> ID：10368383
> 
> 赞同：5
> 
> 时间：2012-04-28T23:13:34.680
> 
> 标签：javascript, node.js, meteor

将复杂的 JS 包（如 CKEditor 或 TinyMCE）与 Meteor 一起使用的最佳方法是什么？它们都依赖于特定的目录树在运行时动态加载 JS 文件或 CSS，这使得从它们创建 Meteor 包变得复杂。

尝试让 Meteor 加载和集成 CKEditor 以及其余的 Meteor 和应用程序代码听起来也有点矫枉过正。我尝试简单地将它放在公共目录中（通过`<script>`在标题中添加标签来加载它），但 Meteor 无论如何都试图加载文件，并崩溃了：

```
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: watch EMFILE
   at errnoException (fs.js:636:11)
    at FSWatcher.start (fs.js:663:11)
    at Object.watch (fs.js:691:11)
    at [object Object]._scan (/var/www/meteor/app/meteor/run.js:322:12)
    at Array.forEach (native)
    at Function.<anonymous> (/var/www/meteor/app/lib/third/underscore.js:76:11)
    at new <anonymous> (/var/www/meteor/app/meteor/run.js:264:5)
    at /var/www/meteor/app/meteor/run.js:455:17
    at /var/www/meteor/app/meteor/run.js:512:5
    at /var/www/meteor/app/meteor/run.js:570:9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:41:50.437

如果不测试这是否有效，我建议将其放在 Meteor 不会尝试编译文件的公共文件夹中。然后在您的模板中，在 head 部分中放置如下代码：

```
<script type="text/javascript" src="/public/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
    tinyMCE.init({
        mode : "textareas",
        theme : "simple"
    });
</script> 
```

[我相信这是你需要做的](https://stackoverflow.com/a/10133333/1329611)

# design-patterns - 更多设计模式？

> ID：10368385
> 
> 赞同：1
> 
> 时间：2012-04-28T23:13:48.983
> 
> 标签：design-patterns

我研究了 GoF 设计模式一书，并列出了 Martin Fowler 的 PoEAA 书。（我也有 Judith Bishop 的书，我个人不喜欢。）但是还有更多的模式，比如委托模式。它的起源是什么？这些书中没有提到其他模式吗？是否有其他关于此主题的“必读”书籍或在线资源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T23:22:05.417

> 它的起源是什么？

## 设计模式的起源

不久前我做了一些研究，并对设计模式的起源做了一些笔记。以下是我当时收集的个人笔记的复制/粘贴。

**最初**
的影响 软件工程中设计模式的影响来自一个叫[Christopher Alexander](http://en.wikipedia.org/wiki/Christopher_Alexander)的人，他是一名建筑建筑师（Houses not Software）。他以他的设计理论而闻名，并于 1977 年出版了一本书，[A Pattern Language](http://en.wikipedia.org/wiki/A_Pattern_Language)。在这本书中，Christopher Alexander 讨论了模式的概念，因为它们可以被重用并应用于复杂和重复的工程任务。

**转向软件开发**
Christopher Alexander 的工作影响了[Kent Beck](http://en.wikipedia.org/wiki/Kent_Beck)和[Ward Cunningham](http://en.wikipedia.org/wiki/Ward_Cunningham)，他们将模式分类的概念应用于软件开发，并在 1987 年的 OOPSLA 会议上介绍[了他们的工作。](http://c2.com/doc/oopsla87.html)

**四人组**
设计模式和软件开发最著名的来源可能是这本书：[Design Patterns: Elements of Reusable Object-Oriented Software](http://en.wikipedia.org/wiki/Design_Patterns%3a_Elements_of_Reusable_Object-Oriented_Software)。这本书的作者以四人组而闻名，他们是埃里希·伽玛、理查德·赫尔姆、拉尔夫·约翰逊和约翰·弗里赛德斯。

这本书是第一本即将出版的设计模式书籍，并在 1994 年的 OOPSLA 会议上首次公开。

> 这些书中没有提到其他模式吗？

我还没有读过你提到的所有书籍，但是当我[参加关于设计模式的 PluralSight 课程时，](http://www.pluralsight-training.net/microsoft/courses/TableOfContents?courseName=patterns-library)它们已经涵盖了很多内容，请参见下面的列表。

*   适配器模式
*   桥接模式
*   建造者模式
*   责任链
*   命令模式
*   复合图案
*   装饰器设计模式
*   事件聚合器
*   立面图案
*   工厂模式
*   蝇量级
*   解释器模式
*   迭代器模式
*   延迟加载模式
*   中介者模式
*   纪念
*   模型视图展示器 (MVP) 模式
*   模型视图视图模型 (MVVM) 模式
*   空对象模式
*   观察者模式
*   原型模式
*   代理模式
*   存储库
*   辛格尔顿
*   服务定位器模式
*   状态模式
*   策略模式
*   模板法
*   工作单元
*   访客模式

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T01:49:56.130

> 这些书中没有提到其他模式吗？

确实。GoF 模式是这一切的祖父，而且相当普遍，但您也可以拥有特定领域的模式。正如您提到的，就像 Fowler 的 PoEAA。或者[嵌入式系统的设计模式](https://rads.stackoverflow.com/amzn/click/com/1449302149)。但也比这更具体，比如福勒关于分析模式的书，其中有金融和医疗保健相关的模式。或航空电子系统的模式，如[Hillside Patterns Catalog](http://www.hillside.net/patterns/patterns-catalog)中的链接。

> 它的起源是什么？

如果您的意思是委托模式的起源是什么，我不知道，但有人在[这里](https://softwareengineering.stackexchange.com/questions/117672/age-of-design-patterns)提出了类似的问题。

> 是否有其他关于此主题的“必读”书籍或在线资源？

我相信，名字很有趣的“ [PLoP](http://www.hillside.net/conferences/plop) ”会议（程序设计的模式语言）是第一个展示一些模式的地方。

还有一本 PLoP 期刊：[Transactions on Pattern Languages of Programming](http://www.springer.com/series/8677)。

我发现[Design Patterns Explained](https://rads.stackoverflow.com/amzn/click/com/0321247140)在解释 Gang of Four 模式背后的一些原始想法方面非常有用。这是一个解释而不是参考。

除了其他地方提到的 PluralSight 目录之外，NetObjectives 还拥有一些关于模式（和一般原则）的大量资源，尤其是他们的[网络研讨会](http://netobjectives.com/resources/technical-development#design-patterns)系列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T23:22:26.857

[Design Patterns: Elements of Reusable Object-Oriented Software](https://rads.stackoverflow.com/amzn/click/com/0201633612)和[The Design of Everyday Things](https://rads.stackoverflow.com/amzn/click/com/0385267746)是非常好的书籍。我特别推荐前者，因为它读起来很直观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T23:19:03.923

我认为“必读”是非常主观的，但我真的从[Head First Design Patterns](http://shop.oreilly.com/product/9780596007126.do)中学到了很多关于设计模式的话题。也就是说，“头脑优先”的书有一种典型的写作风格（我想我听说有人把它描述为愚蠢的......）可能并不适合所有人，对我来说它很有效。我特别发现它比前面提到的（尽管确实非常好）“四人帮”书更轻巧，更容易阅读。

# php - 使用 PHP 一次评估多个条件

> ID：10368387
> 
> 赞同：0
> 
> 时间：2012-04-28T23:14:27.533
> 
> 标签：php, codeigniter

我想更改此代码示例，以便同时评估所有这些条件。如果多个条件为真，则可以将多个参数传递给“注册”函数。

我最初尝试使用 switch，但每个条件都需要能够评估不同的条件。

在这方面为我指明正确方向的任何帮助都会很棒。

```
 if ($this->form_validation->run() == FALSE) {
        $this->signup();

    } else if ($this->membership_model->check_field('username',$this->input->post('username'))) {

        $this->signup("An account with the username you've entered already exists.");

    } else if ($this->membership_model->check_field('email_address',$this->input->post('email_address'))) {

        $this->signup("An account with the e-mail you've entered already exists.");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:19:25.350

您可以将所有错误/故障条件放在一个数组中并将其传递给`$this->signup()`.

```
if ($this->form_validation->run() == FALSE) {
    $this->signup();
} 
else 
{
   $errors = array();
   if ($this->membership_model->check_field('username',$this->input->post('username'))) 
       $errors[]= "An account with the username you've entered already exists.";
   if ($this->membership_model->check_field('email_address',$this->input->post('email_address')))
       $errors[]= "An account with the e-mail you've entered already exists.";

   $this->signup($errors);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:15:48.643

使用 && 运算符

a = 1; b = 2; if (a == 1 && b == 2) { echo "这将显示在页面上"; }

# sql - 如何创建与主代理键对应的父代理键？

> ID：10368391
> 
> 赞同：0
> 
> 时间：2012-04-28T23:14:45.937
> 
> 标签：sql, ssas

我有一个如下图所示的表，其中有一个代理键作为主键，还有两列表示父子关系。目前，主键是OfficerPeopleID。父级是 MgrPeopleID，子级是 PeopleID。
我想使用当前的主键（OfficerPeopleID）作为新的孩子，并创建一个新的字段作为新的父母。通过这样做，孩子现在将成为主键，这是我的目标。如何填充新的父字段以创建与当前父字段和子字段相同的层次结构？谢谢！

![方面](../Images/2ea2f3348fcc48c0c0a4b806b7b0f40c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:20:14.253

在您的 ETL 中执行此操作...

```
UPDATE  a
SET     ParentOfficerPeopleID = (   SELECT  OfficerPeopleID 
                                    FROM    OfficerPeopleDim 
                                    WHERE   PeopleID = a.ManagerPeopleID)
FROM    OfficerPeopleDim AS a 
```

# mysql - 生成的标识符对于约束名称来说太长了

> ID：10368394
> 
> 赞同：10
> 
> 时间：2012-04-28T23:15:10.933
> 
> 标签：mysql, ef-code-first, entity-framework-4.3

我刚刚开始使用 Entity Framework (4.3.1)，并且正在使用 MySQL EF 提供程序 (6.5.4) 制作具有 TPT 继承的代码优先模型。尝试创建数据库结构时，我收到一个`MySQLException "Identifier name 'LongClassNameOne_TypeConstraint_From_ClassName2s_To_LongClassNameOnes' is too long"`（这是将派生类的表与父类的表相关联的关系。）

```
 at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int32& insertedId)
   at MySql.Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int32& insertedId)
   at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
   at MySql.Data.MySqlClient.MySqlScript.Execute()
   at MySql.Data.MySqlClient.MySqlProviderServices.DbCreateDatabase(DbConnection connection, Nullable`1 commandTimeout, StoreItemCollection storeItemCollection)
   at System.Data.Objects.ObjectContext.CreateDatabase()
   at System.Data.Entity.Internal.DatabaseOperations.Create(ObjectContext objectContext)
   at System.Data.Entity.Internal.DatabaseCreator.CreateDatabase(InternalContext internalContext, Func`3 createMigrator, ObjectContext objectContext)
   at System.Data.Entity.Internal.InternalContext.CreateDatabase(ObjectContext objectContext)
   at System.Data.Entity.Database.Create()
   at System.Data.Entity.DropCreateDatabaseAlways`1.InitializeDatabase(TContext context)
   at System.Data.Entity.Database.<>c__DisplayClass2`1.<SetInitializerInternal>b__0(DbContext c)
   at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass8.<PerformDatabaseInitialization>b__6()
   at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
   at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
   at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
   at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
   at System.Data.Entity.Internal.InternalContext.Initialize()
   at System.Data.Entity.Internal.InternalContext.ForceOSpaceLoadingForKnownEntityTypes()
   at System.Data.Entity.DbContext.System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext()
   ... 
```

如何控制此名称以使其更短，或强制将其修剪为 64 个字符的名称限制，或类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T15:23:50.330

您需要使用较短的表名，因为无法配置约束名称。请注意，您无需更改类名即可执行此操作。您可以在 OnModelCreating 中使用 Table 属性或使用 .ToTable() 方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T18:02:21.317

为了扩展我之前的评论...

如果您可以更改表名 - 然后使用 OnModelCreating - 中的映射`as @Pawel suggested`，这可能是最简单的解决方案。

但是，如果您只想更改关系的名称，

...通过在其中提供自定义`SqlGenerator`（即`SqlServerMigrationSqlGenerator`），`Configuration()`您可以在需要时对实际生成的 sql 进行微观管理（在某些一般情况下，这可能是通用的自动化解决方案）。例如

```
public class MySqlGenerator : SqlServerMigrationSqlGenerator
{
    protected override void Generate(AddForeignKeyOperation addForeignKeyOperation)
    {
        if (addForeignKeyOperation.Name == "LongClassNameOne_TypeConstraint_From_ClassName2s_To_LongClassNameOnes")
            addForeignKeyOperation.Name = "MyCustomFKName";
        // addForeignKeyOperation.Name = "Test" + addForeignKeyOperation.Name;
        base.Generate(addForeignKeyOperation);
    }
} 
```

...或类似的东西（您需要匹配，找到正确的命名 - 或`Name Length`在需要的地方比较并缩短它。在您的配置中（由迁移生成的文件）...

```
public Configuration()
{
    AutomaticMigrationsEnabled = false;
    SetSqlGenerator("MySqlMigrationSqlGenerator", new MySqlGenerator());
    // SetSqlGenerator("System.Data.SqlClient", new MySqlGenerator());
} 
```

（注意：我不确定，但有人建议（@Mariusz Jamro）MySQL 提供程序的名称是`MySqlMigrationSqlGenerator`，我猜是有道理的）

...这应该改变关系的 FK - 并且只要可以快速测试它就可以正常工作，因为关系名称并没有真正用于 C# 的模型中（通常只是一个 db 名称）。

# google-chrome-extension - 扩展仅在 Chrome 启动时有效

> ID：10368395
> 
> 赞同：0
> 
> 时间：2012-04-28T23:15:18.280
> 
> 标签：google-chrome-extension

我正在使用以下代码测试我的 Chrome 扩展程序：

```
chrome.tabs.create({url: "login_popup.html"}, function(tab){
    chrome.extension.sendRequest({oid: tab.openerTabId});
}); 
```

但是，仅在 Chrome 启动时创建了一个新选项卡，但在我打开新页面时没有创建任何选项卡。`chrome.tabs.create`每次加载新页面时不应该执行吗？

是`manifest.json`：

```
{
   "name": "minus_test",
   "version": "1.0",
   "background_page": "minus_test.html",
   "permissions": [ "*://*/", "tabs" ]
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:37:36.727

编号`background_page`在 Chrome 启动时执行一次，此时它会创建一个新选项卡。如果您想在每次打开新窗口时创建一个新选项卡，您需要使用[chrome.windows.onCreated](https://code.google.com/chrome/extensions/windows.html#event-onCreated)侦听器。

# php - 使用通配符的PHP搜索数组？

> ID：10368396
> 
> 赞同：2
> 
> 时间：2012-04-28T23:15:19.687
> 
> 标签：php, arrays, search

假设我有以下数组包含：

```
Array (
     [0] => 099/3274-6974
     [1] => 099/12-365898
     [2] => 001/323-9139
     [3] => 002/3274-6974
     [4] => 000/3623-8888
     [5] => 001/323-9139
     [6] => www.somesite.com
) 
```

在哪里：

*   以开头的值`000/, 002/ and 001/`表示移动（手机）电话号码
*   以开头的值`099/`表示电话（固定）号码
*   以 开头的 Vales`www.`代表网站

我需要将给定的数组转换为 3 个新数组，每个数组都包含正确的信息，如 arrayTelephone、arrayMobile、arraySite。

仅当我知道给定数组中键的整个值时，函数 in_array 才有效，这不是我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:18:50.233

创建三个空数组，用 循环遍历源数组`foreach`，检查每个值（正则表达式对此很好）并将项目添加到各自的数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:20:42.523

遍历所有项目并根据前 4 个字符将它们排序到适当的数组中。

```
$arrayTelephone = array();
$arrayMobile = array();
$arraySite = array();

foreach($data as $item) {
    switch(substr($item, 0, 4)) {
        case '000/':
        case '001/':
        case '002/':
            $arrayMobile[] = $item;
            break;
        case '099/':
            $arrayTelephone[] = $item;
            break;
        case 'www.':
            $arraySite[] = $item;
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T23:20:57.223

您可以遍历数组并根据您的条件将值推送到正确的新数组。例子：

```
<?php

$fixed_array = array();

foreach ($data_array as $data) {
    if (strpos($data, '099') === 0) {
        $fixed_array[] = $data;
    }

    if ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T23:30:48.993

是的，我实际上用 preg_match 编写了完整的代码，但在阅读了一些评论后，我接受它更好地展示方式。

您将创建三个不同的数组，名为 arrayTelephone、arrayMobile、arraySite。

比你会用 foreach 或 for 循环搜索你的第一个数组。将您当前的循环值与您的标准进行比较，然后将值推送到方便的新数组之一（arrayTelephone、arrayMobile、arraySite），然后使用“continue”语句继续循环。

[您可以通过添加Perfect PHP Guide](http://php.net/docs.php)找到解决方案

# php - 来自 db 的 longblob base64 图像

> ID：10368399
> 
> 赞同：0
> 
> 时间：2012-04-28T23:15:57.830
> 
> 标签：php, mysql, base64

我从我的 mysql 数据库中获取我的图像作为 longblob，我为你准备了一些代码。这在 chrome 中有效，但在 IE8 中，图像无法正确渲染，或者找不到 img。

```
 <div class="car-image"><a href="carinformation.php?id='.$row["id"]. '"><img width="500px" height="200px" src="data:image/jpeg;base64,'. base64_encode($row["picture"]). '" />'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:17:49.530

IE8 不喜欢超过 32k 个字符的数据 URL。你的网址比那个长吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:41:46.087

我尝试了相同的逻辑并在 IE 8 中成功。

你用`base64encode`的是`base64encoded`字符串吗？

# objective-c - 使用 TCP/IP 与设备通话

> ID：10368403
> 
> 赞同：3
> 
> 时间：2012-04-28T23:17:30.093
> 
> 标签：objective-c, macos, cocoa

我尝试打开一个 TCP 流以与具有可可应用程序的设备对话。我在网上搜索，发现有一些可能性可以做到这一点，但我有点卡住了。

我决定使用 NSStream 方式（因为它在 cocoa-touch 中被引用，如果我想我想将我的应用程序移植到 iPhone 上会很有用），所以这是我的代码：

```
@implementation AppDelegate

- (IBAction)connect:(id)sender {

    [NSStream getStreamsToHost:"192.168.1.4" port:23 inputStream:&inputStream outputStream:&outputStream];

    [inputStream setDelegate:self];
    [outputStream setDelegate:self];

    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

    [inputStream open];
    [outputStream open];
}

// Both streams call this when events happen
- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
    if (aStream == inputStream) {
        [self handleInputStreamEvent:eventCode];
    } else if (aStream == outputStream) {
        [self handleOutputStreamEvent:eventCode];
    }
}

- (void)handleInputStreamEvent:(NSStreamEvent)eventCode
{
    switch (eventCode) {
        case NSStreamEventHasBytesAvailable:[self readBytes];
            break;
        case NSStreamEventOpenCompleted:
            // Do Something
            break;
        default:
        case NSStreamEventErrorOccurred:
            NSLog(@"An error occurred on the input stream.");
            break;
    }

} 
```

所以，当我点击我的连接按钮时，它应该打开到我的主机的流并制作我的 2 个对象（输入流和输出流）

我想达到的第一步是将 inputStream 放在 NSTextView 中并知道是否已到达主机......但我仍然卡住:(

如果有人能照亮我的路，那就太好了！我是 Stack Overflow 的新手，我很乐意帮助社区解决我非常了解的事情！:)

* * *

我更新了我的代码，似乎光来了，慢慢地，但它来了:) 我向 telnet 服务器发送了一个流。我在 texview 中得到了“你好”。现在，我想发送用户和密码以便能够向服务器发送命令，但这是我的“发送用户并通过”按钮代码：

```
- (IBAction)sendusername:(id)sender {

    NSString * usernameMsg  = [NSString stringWithFormat:@"user @", [usernameField stringValue]];
    NSData * usertosend = [[NSData alloc] initWithData:[usernameMsg dataUsingEncoding:NSUTF8StringEncoding]];
    [outputStream write:[usertosend bytes] maxLength:[usertosend length]];

} 
```

按照我的搜索，服务器应该回复我类似“用户 + ok”但什么都没有...... 2 奇怪的事情： - 如果我打开 SSH 服务器的 FTP 服务器的套接字，我总是没有“你好”的响应问题。但是在 telnet 中，90% 的连接都会像这样给我一个奇怪的问候：“ÿýÿýÿûÿû”，为什么？

*   当我发送用户时，什么都没有发生，只有来自 handleEvent 的无法识别的事件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:56:30.933

我可以建议您查看[https://github.com/robbiehanson/CocoaAsyncSocket/](https://github.com/robbiehanson/CocoaAsyncSocket/)，这是一个用于 BSD 套接字的不错的 Objective-C 包装器。它允许您以漂亮和干净的回调方式处理事件循环上的发送-接收交互（它甚至可以处理自定义的“消息终止”符号，让您可以更多地专注于实际的数据包处理，而不是合并和拆分您收到的内容从电线）。

# php - 使用程序 PHP 处理会话

> ID：10368404
> 
> 赞同：-3
> 
> 时间：2012-04-28T23:17:45.660
> 
> 标签：php, session

我想将此页面专门用于使用程序 php 处理会话。

我将从如何开始我的大多数项目开始：

```
session_name('Easy_App');
session_start();

if (!isset( $_SESSION['ip'] )){
    $_SESSION['ip'] = $_SERVER['REMOTE_ADDR'];
}

if (!isset( $_SESSION['created'] )){
    $_SESSION['created'] = time();
}

if (!isset( $_SESSION['overall_views'] )){
    $_SESSION['overall_views'] = 1;
}
else {
    $_SESSION['overall_views']++;
}

if (!isset( $_SESSION['username'] )){
    $_SESSION['username'] = "";
}

if (!isset( $_SESSION['logged_in'] )){
    $_SESSION['logged_in'] = 0;
}

/*A quick method to keep pageviews to < 5 pages per 1 second per session*/
if (!isset($_SESSION['first_action'])){
   $_SESSION['first_action'] = time();
}

$first_action = $_SESSION['first_action'];
if (!isset( $_SESSION['action'] )){
   $_SESSION['action'] = 1;
}
else{
  $_SESSION['action']++;
}

$action=$_SESSION['action'];
if ($action>=5){
  unset($_SESSION['action']);
  unset($_SESSION['first_action']);
  if((time() - $first_action) <=1){
    exit("Please Don't Hammer My Site ");
  }
} 
```

所以我们有一个起点：

1.  使用一些常用参数开始会话
2.  在最后几行中，防止临时用户敲击。

我的问题是这样的：

你会从这里去哪里？对上述代码的改进或您如何使用过程 php 处理会话的简短片段将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:25:53.713

您的代码将不起作用如果您尝试`STOP`Hammer 或者`FLOODING`如果用户不保留`cookies your Sessions are useless`并且脚本是浪费......您应该尝试使用 memcache 、 mongoDB 或 redis 等存储系统的更好方法

见：[https](https://stackoverflow.com/a/10155437/1226894) ://stackoverflow.com/a/10155437/1226894 ....这已经回答过

**编辑 1**

我不确定你想要什么，`procedural PHP`但我希望这会有所帮助

目标

*   删除重复项`isset`
*   删除重复`if`的语句
*   创建单个函数来获取和设置`$_SESSION`
*   试图让一切都成为函数并隐藏所有变量

最终代码

```
session_start ();
include("procedural.function.php");
__SESSION ( 'ip', $_SERVER ['REMOTE_ADDR'] );
__SESSION ( 'created', time () );
__SESSION ( 'overall_views', 1 );
__SESSION ( 'overall_views', "++" );
__SESSION ( 'username', "" );
__SESSION ( 'logged_in', 0 );
__SESSION ( 'first_action', time () );
__SESSION ( 'action', "++" );

if (__SESSION ( 'action' ) >= 5) {
    __UNSET ( 'action' );
    __UNSET ( 'first_action' );
    if ((time () - __SESSION ( 'first_action' )) <= 1) {
        exit ( "Please Don't Hammer My Site " );
    }
} 
```

程序.function.php

```
function __SESSION($var, $value = null) {
    if ($value === null) {
        return isset ( $_SESSION [$var] ) ? $_SESSION [$var] : null;
    } else if ($value === "++") {
        isset ( $_SESSION [$var] ) ? $_SESSION [$var] ++ : $_SESSION [$var] = 0;
        return $_SESSION [$var];
    } else {
        isset ( $_SESSION [$var] ) ? $_SESSION [$var] = $value : null;
        return $value;
    }
}

function __UNSET($var) {
    unset ( $_SESSION [$var] );
} 
```

# asp.net-mvc-3 - 如何返回@Html.ActionLink

> ID：10368406
> 
> 赞同：0
> 
> 时间：2012-04-28T23:18:23.867
> 
> 标签：asp.net-mvc-3, html-helper

我正在为我的 MVC 3 项目编写一个 Html Helper。

我想返回像“@Html.ActionLink(xxxxx)”这样的 MvcHtmlString，我应该写什么？

目前我有这个代码

```
 public static MvcHtmlString SetFeaturedFor<TModel, TValue>(this HtmlHelper<TModel> htmlHelper,Expression<Func<TModel, TValue>> expression)
    {
        var isFeatured =Convert.ToBoolean(ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData).Model.ToString());

        string result = "Html.ActionLink(Delete, DeleteComment, Admin, new { Id = @thisComment.CommentId }, null)";

        return MvcHtmlString.Create(result);
    } 
```

它返回整个字符串....但我想要渲染的字符串。所以我该怎么做？谢谢大家。

**更新**

貌似可以直接退货

见下面的代码

```
 public static MvcHtmlString SetFeaturedFor<TModel, TValue>(this HtmlHelper<TModel> htmlHelper,Expression<Func<TModel, TValue>> expression)
    {
        var isFeatured =Convert.ToBoolean(ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData).Model.ToString());

        string indicatorText = (isFeatured) ? "Unset Featured" : "Set Featured";

        return htmlHelper.ActionLink(indicatorText, "SetFeaturedIncident", "Admin", null, null);
    } 
```

需要导入 System.Web.Routing 命名空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T23:20:08.547

删除引号（您想调用函数，而不仅仅是将代码存储在字符串中）和`@`（那是 Razor，而不是 C#）。您可能需要更改`Html`为您在（可能）扩展方法中调用辅助参数的任何内容。

此外，`Html.ActionLink`已经返回`MvcHtmlString`，所以你可以直接把它放在`return`.

# regex - 嵌套正则表达式的 Emacs 语法高亮

> ID：10368407
> 
> 赞同：5
> 
> 时间：2012-04-28T23:18:32.097
> 
> 标签：regex, emacs, lisp, bioinformatics, font-lock

我正在尝试编写一个 Emacs 主要模式来处理生物序列数据（即 DNA 和肽），并且我想实现语法突出显示，其中不同的字母颜色不同。由于该模式需要能够区分 DNA 序列和氨基酸序列并对其进行不同的着色，因此我将文件中的每个序列放在一行中，并带有一个单字符前缀（+ 或 #），该前缀应指示下一行应突出显示。

因此，例如，如果文件包含一行内容：

```
+AAGATCCCAGATT 
```

“A”都应该是一种与行的其余部分不同的颜色。

我尝试了以下测试：

```
(setq dna-keyword
 '(("^\+\\([GCT\-]*\\(A\\)\\)*" (2 font-lock-function-name-face))
  )
)

(define-derived-mode bioseq-mode fundamental-mode
  (setq font-lock-defaults '(dna-keyword))
  (setq mode-name "bioseq mode")
) 
```

但这仅匹配最后一个 A 而不是全部。

我的第一个想法是尝试将整行与一个正则表达式匹配，然后使用另一个正则表达式仅匹配该行中的 A，但我不知道这是否可能在 font-lock-mode 的上下文中或者它会如何完成。关于如何做这样的事情，或者如何以不同的方式完成这件事的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T00:04:25.007

确实，Emacs 提供了您需要的内容，即字体锁定模式的“锚定匹配”特性。语法有点繁琐，但它允许您指定额外的“匹配器”（基本上是一个正则表达式、子表达式标识符和面部名称），（默认情况下）将在主“匹配器”正则表达式完成的位置之后应用队伍的尽头。有更复杂的方法可以准确地自定义它们适用的文本范围，但这是一般的想法。

这是一个简单的示例，它还显示了如何为此目的定义自己的面孔：

```
(defface bioseq-mode-a
  '((((min-colors 8)) :foreground "red"))
  "Face for As in bioseq-mode")

(defface bioseq-mode-g
  '((((min-colors 8)) :foreground "blue"))
  "Face for Gs in bioseq-mode")

(setq dna-keyword
      '(("^\\+" ("A" nil nil (0 'bioseq-mode-a)))
        ("^\\+" ("G" nil nil (0 'bioseq-mode-g))))) 
```

您还可以为一个主匹配器指定两个或多个锚定匹配器（这里的主匹配器是 regexp `"^\\+"`）。为了使这项工作有效，第一个锚定匹配器之后的每个锚定匹配器都需要在开始搜索之前显式返回到行首；否则它只会在上一个锚定匹配器最后一次出现后开始突出显示。这是通过将 (beginning-of-line) 放入 PRE-MATCH-FORM 槽（列表的元素 2；见下文）来完成的。

```
(setq dna-keyword
      '(("^\\+"
         ("A" nil nil (0 'bioseq-mode-a))
         ("G" (beginning-of-line) nil (0 'bioseq-mode-g))))) 
```

我认为这主要是您喜欢的口味问题。如果单行有许多不同的锚定匹配器，第二种方法可能会稍微清晰一些，但我怀疑是否存在显着的性能差异。

这是文档的相关位`font-lock-defaults`：

> HIGHLIGHT 应该是 MATCH-HIGHLIGHT 或 MATCH-ANCHORED。
> 
> [……]
> 
> MATCH-ANCHORED 应采用以下形式：
> 
> （MATCHER 赛前形式 赛后形式 MATCH-HIGHLIGHT ...）
> 
> 其中 MATCHER 是要搜索的正则表达式或要调用以进行搜索的函数名称，如上面的 MATCH-HIGHLIGHT，但有一个例外；见下文。PRE-MATCH-FORM 和 POST-MAT​​CH-FORM 在第一个之前评估，在最后一个之后，使用实例 MATCH-ANCHORED 的 MATCHER。因此，它们可用于在使用 MATCHER 之前进行初始化和之后的清理。通常，PRE-MATCH-FORM 用于移动到相对于原始 MATCHER 的某个位置，然后再从 MATCH-ANCHORED 的 MATCHER 开始。在使用 MATCH-ANCHORED 的父 MATCHER 恢复之前，可以使用 POST-MAT​​CH-FORM 向后移动。
> 
> 上述例外情况如下。MATCHER 搜索的限制默认为在评估 PRE-MATCH-FORM 之后的行尾。但是，如果 PRE-MATCH-FORM 返回的位置大于计算 PRE-MATCH-FORM 之后的位置，则该位置将用作搜索的限制。返回大于行尾的位置通常是一个坏主意，即导致 MATCHER 搜索跨越行。

我总是发现我必须阅读 font-lock 文档大约三遍才能开始对我有意义;-)

# ruby-on-rails - Rails：使用回形针插件上传文件 - 更改存储文件的默认位置

> ID：10368408
> 
> 赞同：0
> 
> 时间：2012-04-28T23:18:36.520
> 
> 标签：ruby-on-rails, file-upload, paperclip

您好我想更改回形针将其文件保存到的默认位置。从文档中我看到默认位置在

```
rails_root/public/system/users/images/..... 
```

我想将文件保存到

```
rails_root/assets/images/uploads/..... 
```

所以我改变了用户模型如下：

```
class User < ActiveRecord::Base

has_attached_file :image , :url => ":rails_root/assets/images/uploads/:id/:style/:basename.:extension",
                           :path => ":rails_root/assets/images/uploads/:id/:style/:basename.:extension" 

end 
```

然而，这并没有奏效。当我上传文件并转到“显示”页面时，我看到以下屏幕。

![在此处输入图像描述](../Images/21e89175e22de7a3b8a2e260d4e7210b.png)

如您所见，用户已创建。图片链接已损坏，当我单击该链接时，我在网页上收到此消息

```
No route matches [GET] "/Users/AM/Documents/RailsWS/bmc_mam/assets/images/uploads/13/original/bmc_TransparentFinal.png" 
```

有人可以帮我理解这个错误吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:27:32.950

`assets`无需您进行一些配置，就不会直接提供图像。他们需要在`Rails.root/public/assets/images/uploads/etc.`通过浏览器看到。在浏览器中，图像的路径类似于`http://foo.com/assets/images/uploads/etc.`. `public`默认情况下会被剥离。查看[http://guides.rubyonrails.org/getting_started.html#creating-the-blog-application](http://guides.rubyonrails.org/getting_started.html#creating-the-blog-application)了解有关 Rails 应用程序默认目录结构的一些信息。

# drupal-7 - Drupal webform url 编辑现有的字段响应

> ID：10368409
> 
> 赞同：0
> 
> 时间：2012-04-28T23:18:40.387
> 
> 标签：drupal-7, drupal-webform

我在 Drupal 中有一个网络表单，在 3 个不同的页面上有 3 个问题（字段）（Q1、Q2 和 Q3）。

用户有权编辑他们对网络表单的回复，并查看他们自己的答案。

现在点击 EDIT 链接将用户带到表单的开头（步骤 1）。

我想在编辑模式下创建 3 个链接，将用户带到相应的问题。

喜欢：链接 1 编辑 - Q1（步骤 1） 链接 2 编辑 - Q2（步骤 2） 链接 3 编辑 - Q3（步骤 3）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:24:01.563

目前无法在编辑时访问多页网络表单上的特定页面。用户必须从第 1 页开始。有关此问题的当前讨论，请参见以下链接。

[http://drupal.org/node/1413250](http://drupal.org/node/1413250)

解决此问题的一种方法是在一个页面上创建表单，然后使用 jquery 在当前节点的表单模板文件中的页面内创建工作流（根据当前步骤显示/隐藏字段）。

然后，您可以使用 url 查询字符串或哈希来确定您在哪一步。

# php - 当两列共享同一个 LIKE 语句时，为什么这个 SQL 语句会失败？

> ID：10368413
> 
> 赞同：0
> 
> 时间：2012-04-28T23:19:06.550
> 
> 标签：php, sql, web

```
<?php
$search_input = $_POST["search_input"];

include_once("connection_to_db.php");

if(!isset($search_input))
{
    print("Nothing to search !");
    return;
}

//Queries products where the search input is similiar to the title, artist or format of a product
$query_search = "SELECT * FROM waxItem WHERE title OR artist LIKE  '%".$search_input."%'";

$query_search_result = mysql_query($query_search)
 or die(mysql_error());

$num_rows_search = mysql_num_rows($query_search_result);

?> 
```

当我添加“或艺术家”时，上面的代码不起作用。

当仅将一个字段与数据库记录进行比较时，该代码确实有效并且显示了搜索结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:20:14.157

您需要每个字段的关系。

```
$query_search = "SELECT * FROM waxItem WHERE title LIKE '%".$search_input."%' OR artist LIKE '%".$search_input."%'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:21:03.347

您不能为多个字段声明相同的 LIKE 标准。您必须为每个字段指定它。即使您可以这样做，但由于 SQL 注入攻击，这绝对不是推荐的方法。请阅读此[**SQL 注入**](http://php.net/manual/en/security.database.sql-injection.php)

你必须改变

```
 $query_search = "SELECT * FROM waxItem WHERE title OR artist 
LIKE  '%".$search_input."%'"; 
```

到

```
 $query_search = "SELECT * FROM waxItem WHERE title 
LIKE '%".$search_input."%' OR artist LIKE  '%".$search_input."%'"; 
```

# android - Android：生命周期，手机开机时未调用onRestoreInstanceState

> ID：10368419
> 
> 赞同：0
> 
> 时间：2012-04-28T23:19:57.263
> 
> 标签：android

我在活动类中使用这些函数： onSaveInstanceState onRestoreInstanceState onPause onCreate

当用户启动 Activity 时，onCreate 被调用，当用户结束时，onPause 被调用。到目前为止很好。

但是当用户旋转手机时，会调用 onPause onSaveInstanceState onCreate。我会在 onCreate 之前期望 onRestoreInstanceState。为什么会这样？如果不存在，我应该如何处理 ui-data 的初始化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T23:24:56.990

> 我会在 onCreate 之前期望 onRestoreInstanceState。

[文档`onRestoreInstanceState()`](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)明确指出：

> 当活动从先前保存的状态重新初始化时，在 onStart() 之后调用此方法，此处在 savedInstanceState 中给出。大多数实现将简单地使用 onCreate(Bundle) 来恢复它们的状态，但有时在完成所有初始化之后在这里这样做会很方便，或者允许子类决定是否使用您的默认实现。

如果您希望使用`Bundle`in 中的内容初始化您的 UI `onCreate()`，请随意这样做。

# mysql - 应用多个限制

> ID：10368434
> 
> 赞同：0
> 
> 时间：2012-04-28T23:22:13.583
> 
> 标签：mysql

我有一张如下表：

```
content_id | contact_count
         1              23
         2               4
         3              89 
```

我想从表的最后 25 行中选择 contact_count 最高的 content_id。

我尝试了许多不同的方法，例如：

```
select content_id from research_products_content
   where contact_count=(select max(contact_count)
        from research_products_content order by rating_total_id desc limit 25)
   order by rating_total_id desc limit 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:28:40.493

由于列号将相同，因此使用 UNION

```
select content_id from research_products_content
   where contact_count=(select max(contact_count)
        from research_products_content order by rating_total_id desc limit 25)
UNION
select content_id from research_products_content
   where contact_count=(select max(contact_count)
        from research_products_content order by rating_total_id desc limit 1 
```

您可能希望在此过程中实现缓存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:30:48.377

在您的示例中，在选择结果（最大值，即单行）**后**`limit 25`应用。试试这个：

 **```
SELECT tmp.content_id FROM (
  SELECT *
  FROM research_products_content
  ORDER BY rating_total_id DESC
  LIMIT 25
  ) AS tmp
WHERE tmp.contact_count = (
  SELECT max(tmp2.contact_count)
  FROM (
    SELECT *
    FROM research_products_content
    ORDER BY rating_total_id DESC
    LIMIT 25
  ) AS tmp2
)
LIMIT 1 
```**

# c# - StreamWriter 覆盖以前的记录？

> ID：10368436
> 
> 赞同：-1
> 
> 时间：2012-04-28T23:22:28.797
> 
> 标签：c#, linq, collections, xml-serialization, streamwriter

嗨，我想知道如何使用我的流编写器保留以前的记录，如果我使用下面的代码，它在创建学生记录时可以正常工作，但是当我创建第二个学生记录时，以前的记录消失了？我怎样才能保留所有记录？

```
 public void AddStudent(Student student)
    {
        students.Add(student);
        XmlSerializer s = new XmlSerializer(typeof(Student));
        TextWriter w = new StreamWriter("c:\\list.xml");
        s.Serialize(w, student);
        w.Close();
    } 
```

**编辑更新：**

从下面的部分答案中，我不断收到此错误`Type WcfServiceLibrary1.Student' in Assembly 'WcfServiceLibrary1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null is not marked as serializable`

我已经装饰了学生班， `[Serializable()]`所以我不确定发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:27:11.747

使用StreamWriter 的构造函数的[这个](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)重载来追加新数据而不是覆盖。

```
TextWriter w = new StreamWriter("c:\\list.xml", true); 
```

**更新**：我明白了，它仅适用于 BinaryFormatter 而不适用于 XmlSerializer，因为第二次写入会使 XML 无效。除非出于某种原因需要 XML 格式，否则使用二进制格式会更容易。这应该有效：

```
 static void WriteStudent(Student S)
    {
        BinaryFormatter f = new BinaryFormatter();
        using (Stream w = new FileStream("c:\\list.dat", FileMode.Append))
        {
            f.Serialize(w, S);
        }
    }

    static List<Student> ReadStudents()
    {
        BinaryFormatter f = new BinaryFormatter();

        using (Stream w = new FileStream("c:\\list.dat", FileMode.Open))
        {
            List<Student> students = new List<Student>();
            while (w.Position < w.Length)
            {
                students.Add((Student)f.Deserialize(w));
            }
            return students;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:26:57.840

您正在做的是打开一个文件，丢弃现有内容，将单个`student`类型的对象序列`Student`化为 XML，将 XML 写入文件并关闭它。

您要做的几乎完全相同，只是您必须序列化学生列表而不是单个学生。为此，请尝试这样做：

```
s.Serialize(w, students); 
```

而不是这个：

```
s.Serialize(w, student); 
```

并且不要忘记更改`typeof(Student)`为用于维护列表的任何类的 typeof（这将是一种`students`对象类型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T00:51:11.743

它不会像你期望的那样工作。`StreamWriter`将新`Student`记录插入根元素中不会有任何魔力。您需要从文件中反序列化列表，添加新条目并将其序列化回来。或者，您可以将学生列表保存在内存中，向其中添加新记录，然后对整个集合进行序列化。

这些都不是存储增量更新的特别好方法。您应该考虑改用 SQL Server（或 express）。

# api - 会话对象没有`request_token`

> ID：10368438
> 
> 赞同：0
> 
> 时间：2012-04-28T23:22:52.773
> 
> 标签：api, oauth, dropbox, dropbox-api

因此，我正在使用 Dropbox API，并且正在尝试通过 Python SDK 对用户进行身份验证。我可以`request_token`从 Dropbox 获取。我还可以将用户重定向到 Dropbox 网站，以授权我的应用。

但是，一旦用户返回我的网站（授权后），我必须使用相同的 重新创建会话对象`request_token`，以便获得`access_token`.

我使用我的`APP_KEY`,`APP_SECRET`和创建了一个新的会话对象`access_type`。然后我尝试使用[SDK 方法](https://www.dropbox.com/static/developers/dropbox-python-sdk-1.4-docs/index.html#dropbox.session.DropboxSession.set_request_token)`request_token`为此对象设置。`set_token_request`

在此之后，我尝试`access_token`从 Dropbox 获取。但是，我收到一条错误消息，指出会话对象没有请求令牌。

这是执行此操作的代码。

```
 sess.set_request_token(oauth_token, oauth_token_secret)
   access_token = sess.obtain_access_token() 
```

`sess`是`DropboxSession`对象。`oauth_token`并`oauth_token_secret`在我第一次要求`request_token`.

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:47:38.560

这是以前版本的 Dropbox SDK for Python 中的一个错误。下载[最新版本](https://www.dropbox.com/developers/reference/sdk)应该可以解决问题。

# regex - QRegExp - 之前的颜色词::

> ID：10368444
> 
> 赞同：1
> 
> 时间：2012-04-28T23:24:07.150
> 
> 标签：regex, qt

因此，我正在使用`QSyntaxHiglihter`为我的编辑器创建语法高亮规则。我正在`QRegExp`为此目的使用。现在，正则表达式不是我的领域，所以任何人都知道如何创建规则，例如，

```
std::cout 
```

用标准一种颜色，用另一种颜色？我试过了`QRegExp("\\b::\\b");`，但这只会给冒号上色。谢谢！

弄清楚了：`\\b[A-Za-z0-9_]+(?=::)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:45:01.033

如果没有对正则表达式的基本了解，您将无法解决您的问题。[QRegExp](http://qt-project.org/doc/qt-4.8/QRegExp.html#details)的文档包含一个简短的介绍。如果我是你，我会阅读它和[Syntax Highlighter Example](http://qt-project.org/doc/qt-4.8/richtext-syntaxhighlighter.html)。这两篇文章将帮助您找到问题的答案。

# objective-c - 推入一个新的表格视图

> ID：10368446
> 
> 赞同：0
> 
> 时间：2012-04-28T23:24:28.487
> 
> 标签：objective-c, xcode, uitableview, uistoryboard

所以我知道这个问题已经被问过很多次了，但它似乎对我不起作用。我什么都试过了。视图控制器.h

```
@interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>     {
NSMutableArray *tableData;

}
@property (nonatomic, retain) NSMutableArray *tableData;
@end 
```

视图控制器.m

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath   {
[tableView deselectRowAtIndexPath:indexPath animated:YES];
SubTableView *secondView = [[SubTableView alloc] initWithNibName:@"SubTableView" bundle:nil];
if ([[tableData objectAtIndex:indexPath.row] isEqual:@"Campus"]) {
    secondView.selected = 1;
    //[subTable setTitle:[tableData objectAtIndex:indexPath.row]];

}
if ([[tableData objectAtIndex:indexPath.row] isEqualToString:@"School"]) {
    secondView.selected = 2;

}
if ([[tableData objectAtIndex:indexPath.row] isEqualToString:@"Admissions"]) {
    secondView.selected = 3;

    //[subTable setTitle:[tableData objectAtIndex:indexPath.row]];
}
if ([[tableData objectAtIndex:indexPath.row] isEqualToString:@"Boarding"]) {
    secondView.selected = 4;

}
if ([[tableData objectAtIndex:indexPath.row] isEqualToString:@"Academics"]) {
    secondView.selected = 4;

 }
    if ([[tableData objectAtIndex:indexPath.row] isEqualToString:@"Athletics"]) {
    secondView.selected = 5;

}
if ([[tableData objectAtIndex:indexPath.row] isEqualToString:@"Jobs"]) {
    secondView.selected = 6;

}
if ([[tableData objectAtIndex:indexPath.row] isEqualToString:@"Donate"]) {
    secondView.selected = 7;
}
[self.navigationController pushViewController:secondView animated:YES];
    } 
```

我设置了 NavigationController，尽管我不知道它是否在 Storyboard 中正确链接。我在 StoryBoard 中设置的第二个视图控制器 SubTableView 带有它自己的 .h 和 .m 控制器。我的标识符为“SubTableView”，但它拒绝推送该视图。我能想到的唯一可能的事情是没有正确链接navigationController。但是我找不到任何可以在上面使用的东西。
如果我在

```
[self.navigationController pushViewController:secondView animated:YES]; 
```

它会撞到它并停下来。但它不会推翻新观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:48:11.703

是or`SubTableView`的子类？您需要将视图控制器推送到堆栈上，而不是视图。`UIViewController``UIView`

# google-chrome - 如何将 Chrome Web Inspector 停靠在浏览器的一侧而不是底部？

> ID：10368448
> 
> 赞同：5
> 
> 时间：2012-04-28T23:24:42.023
> 
> 标签：google-chrome, web-inspector

它当前停靠在浏览器的底部。

我知道它可以拆分为一个单独的窗口，但我希望它停靠在浏览器的一侧。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T23:39:49.020

~~单击检查器右下角的齿轮。检查`Dock to right`选项。~~您可能必须更新到 beta/dev 频道才能使用该选项。

更新：该选项现在位于检查器工具栏的左下方。

![新的切换按钮](../Images/aef445c9dabf68d0081a47a8576eb13c.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T08:03:41.283

只是想告诉 Google Chrome 24`dock to right`已移至左下角。您必须按住图标。

看看这个 chrome 问题：[http ://code.google.com/p/chromium/issues/detail?id=154199](http://code.google.com/p/chromium/issues/detail?id=154199)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-23T15:36:47.803

在检查器的右上角，单击带有三个点的按钮：

[![在此处输入图像描述](../Images/6531093c08d650c87423b2ce694270f3.png)](https://i.stack.imgur.com/kv5EG.png)

将出现一个子窗口。文字“Dock side”旁边有三个按钮；点击第三个：

[![在此处输入图像描述](../Images/8bda4e273a6067a8ec9b2d9d356176e1.png)](https://i.stack.imgur.com/SVUoo.png)

就这样。

# facebook - 使用 Facebook 登录插件加载连接的 FB 帐户后页面重新加载

> ID：10368449
> 
> 赞同：0
> 
> 时间：2012-04-28T23:24:42.373
> 
> 标签：facebook, plugins, facebook-javascript-sdk, facebook-login

我有以下代码：

```
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <title></title>
</head>
<body>
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId      : 'APP_ID', // App ID
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        });

        // Additional initialization code here
    };

    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));
</script>
<fb:login-button show-faces="true" width="370" max-rows="5" scope="email">Log In with Facebook</fb:login-button>
</body>
</html> 
```

1.  我使用 Facebook 登录应用程序。
2.  页面刷新显示我已登录。
3.  如果我再次刷新或加载页面，那么 Facebook 将加载插件。大约 10 秒后，页面将重新加载。

我是初始化错误还是这只是 Facebook 做事的方式？

编辑：我有时会收到以下错误：

> 1 XFBML 标签未能在 30000 毫秒内呈现。

[从https://stackoverflow.com/a/4182542/968219](https://stackoverflow.com/a/4182542/968219)找到了一个临时修复

我不知道为什么会这样，但我很高兴它修复了它。有谁知道更好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:34:05.123

It looks like the xfbml rendering is not working properly, try using the HTML version.

```
<div class="fb-login-button" show-faces="true" width="370" max-rows="5" scope="email">Login with Facebook</div> 
```

or you can also just build your own login button and bind it to this:

```
 FB.login(function(response) {
   // handle the response
 }, {scope: 'email'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T00:02:42.797

尝试添加频道文件

```
FB.init({
            appId      : 'APP_ID', // App ID
            status     : true, // check login status
            channelUrl : '//WWW.MY_DOMAIN.COM/channel.html', // Channel File
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        }); 
```

频道文件将仅包括：

```
 <script src="//connect.facebook.net/en_US/all.js"></script> 
```

参考：

[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

# ruby-on-rails - 如何在 ruby on rails 2 中将 id 从一个表存储到另一个表

> ID：10368450
> 
> 赞同：0
> 
> 时间：2012-04-28T23:24:45.797
> 
> 标签：ruby-on-rails, ruby-on-rails-2

您好，我正在尝试在 ruby​​ on rails 上创建一个简单的评论功能。我创建了一个具有以下属性的脚手架

> event_id：整数名称：字符串 review_text：文本 no_starts：整数

然后我在我的活动的节目（视图）上做了这个改变

> :review, :action => :new, :id => @event.id %>

现在我很好地配置了路线，并且在审查的控制器上我做了这个改变。在新的我添加了这个

> @review = Review.new(:event_id => params[:id]) 并删除了这个@review = Review.new

然后页面加载它在页面上引用的事件ID，但是当我尝试保存它时它没有被存储。我的问题是当我从新方法转移到创建它时不会传输事件的 id 这就是为什么但我仍然是我在新方法中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T23:34:48.193

是否`:event_id`可以在您的评论模块中访问？实际上，如果不是这样会更好，但除非是这样，否则它就行不通了。

尝试改用这个：

```
@event = Event.find(params[:id])
@review = @event.build_review 
```

# java - HashMap.put 在 Java 中导致无限循环

> ID：10368457
> 
> 赞同：3
> 
> 时间：2012-04-28T23:26:01.660
> 
> 标签：java, loops, random, infinite

所以我有一个名为 MainControl 的类，它是从另一个类（主类）运行的，我确信它只运行一次。在 MainControl 内部，我有一些必须加载的东西，其中之一是填充 HashMap 的函数，其中键设置为键绑定 (int)，值设置为保存特定键绑定函数信息的类（关键细节）。

因此，要填充哈希图，它需要经过 2 个循环，第一个是遍历函数列表，第二个是检查键是否应该绑定到函数。如果第二个循环发现它应该被绑定，它将运行 Keybinds.put(KeyCode, new Details(Function, KeyCode, KeyName, false); （忽略 false）。

由于某种原因，它最终迫使 MainControl(); 一旦到达 Keybinds.put... 再次运行，完全没有理由。没有应该导致 MainControl 运行的函数，并且当我删除 Keybinds.put 行时它可以工作。只需删除那条单行即可。

```
public MainControl()
{   
    System.out.println("Starting System");
    LoadSession("Default");
    System.out.println("Ended System - Never Reached");
}

public static void LoadSession(String s)
{
    Keybinds = new HashMap();

    for (int i = 0; i < FunctionStringList.length; i++)
    {
        String Key = "";
        int KeyVal = 0;

        try
        {                           
            for (int a = 0; a < KeyBindingList.length; a++)
            {
                if (KeyBindingList[a].KeyName.equalsIgnoreCase(FunctionStringList[i]))
                {
                    Key = KeyBindingList[a].KeyName
                    KeyVal = KeyBindingList[a].KeyCode
                }
            }            

            Keybinds.put(KeyVal, new Details(FunctionStringList[i], KeyVal, Key, false));

            System.out.println("Key: " + Key + " Val: " + KeyVal + " Hack: " + FunctionStringList[i]);      
        }
        catch (Exception E) { E.printStackTrace(); }        
    }
}

public static String FunctionStringList[] =
{
    "Forward", "Backwards", "StrafeLeft", "StrafeRight", "Jump", "Sneak"
}; 
```

细节类：

```
public class Details extends MainControl
{
public Details(String Name, int KeyCode, String KeyName2, boolean Bool)
{       
    FunctionName = Name;
    Code = KeyCode;
    KeyName = KeyName2 != null ? KeyName2 : "None";
    State = Bool;
}

public boolean Toggle()
{
    State = !State;
    return State;
}

public void SendChat(String s)
{
    Console.AddChat(s);
}

public String FunctionName;
public String KeyName;
public int Code;
public boolean State;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:02:59.697

你的`Details`班级*是-a* `MainControl`；它是一个子类。

当您扩展一个类时，子类的构造函数正在调用父对象的无参数构造函数，这会导致无限递归。

**编辑以从下面的评论中添加：**您的“违规行”是：

```
Keybinds.put(KeyVal, new Details(FunctionStringList[i], KeyVal, Key, false)); 
```

当`Details`构造函数执行时，它会调用`MainControl()`...，然后调用`LoadSession()`...，然后创建一个新的`Details`...，然后调用`MainControl()`..等，等等。无限递归，直到你得到一个堆栈溢出。

# java - 使用来自blender 2.62+的.obj文件，在java中使用Eclipse for Android openGL ES

> ID：10368463
> 
> 赞同：1
> 
> 时间：2012-04-28T23:27:12.747
> 
> 标签：java, android, opengl-es, .obj, blender-2.61

我已经四处寻找解决这个问题的方法。似乎有办法使用旧版本的 Blender 来做到这一点。我不想使用较早版本的 Blender，我想使用 2.62.0 及更高版本。

基本上我想使用 Blender 创建要在我的 Android 应用程序中使用的对象。我将在 Java 中使用 openGL ES。越容易实现越好，我不想在这里重新发明轮子。

*   Blend2Java 不适用于 Blender 2.5+
*   Java.net 似乎因维护而停机，因此我找不到任何可以提供帮助的 Java3D 资源
*   其他 3D Graphics 软件只是不如 Blender，我觉得其他软件也会遇到类似的问题
*   我也尝试过 min3D 但这对我也不起作用
*   资产管道可能很好，但此时如果必须，我将逐个加载图像

有人可以给我一些适用于搅拌机 2.62 的选项或完成此操作需要采取的步骤。我在 Java 方面有不错的经验，但它已经到了我不能再保持理智的地步了。

最后但并非最不重要的 ...

谢谢大家在 Stack Overflow 上，我希望能有一些好的帖子作为未来的参考

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:34:50.080

您只是在寻找适用于 android 的 obj 加载器吗？这里提到了几个：

[Android OpenGL .OBJ 文件加载器](https://stackoverflow.com/questions/3162667/android-opengl-obj-file-loader)

# sql - oracle - 从脚本运行存储过程

> ID：10368466
> 
> 赞同：1
> 
> 时间：2012-04-28T23:28:07.310
> 
> 标签：sql, oracle

我有一个用于构建/删除表并基本上设置整个架构的脚本。谷歌搜索后，我仍然无法弄清楚如何运行存储过程。

该脚本是一个 .txt 文件，我使用 Apex SQL Oracle 运行它。

如果我在脚本中只写这一行：

```
execute procedurename(1); --where 1 is paramter. 
```

> 您已请求运行不包含任何可运行语句的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:14:53.113

由于 execute 是一个 sqlplus 语句，请尝试在 Apex SQL 中使用 begin-end PLSQL 块调用该过程

```
BEGIN
procedurename(1); 
END;
/ 
```

将其保存在文件 proc_call.sql 中，然后在脚本中调用它

```
 @C:\proc_call.sql 
```

其中 C: 是样本路径

有关一些信息，请参阅以下链接

[https://forums.oracle.com/forums/thread.jspa?threadID=618393](https://forums.oracle.com/forums/thread.jspa?threadID=618393)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:18:03.523

```
SQL>create or replace procedure procedurename(p_num number) 
as 
begin 
null; 
end;
/

Procedure created.

SQL>execute procedurename(1);

PL/SQL procedure successfully completed. 
```

使用 oracle 11 在 SQLPLUS 上一切正常。

所以它必须是一个顶点的东西。

# java - java short 如何判断是否需要进位

> ID：10368473
> 
> 赞同：0
> 
> 时间：2012-04-28T23:29:03.433
> 
> 标签：java, carryflag

如果我添加或减去两个短值，我如何判断是否需要标记进位条件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T23:32:24.530

您可以使用较大的类型进行加法或减法，例如`int`，将其强制转换为 a `short`，并测试强制转换是否更改了值。

```
int i = s1 + s2;
short s = (short)i;
if (i != s) { /* overflow */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T23:42:03.827

在仅加减法的情况下，当两个操作数都为正并且结果为负时发生算术溢出，反之亦然。

```
class OverflowTest
{
        public static void main (String[] args)
        {
                System.out.println(isOverflow((short)32767, (short)32767, '+'));
                System.out.println(isOverflow((short)-32767, (short)-32767, '+'));
                System.out.println(isOverflow((short)32767, (short)-32767, '+'));       
        }

        private static boolean isOverflow(short a, short b, char op) {  
                short c = (op == '+') ? (short)(a+b) : (short)(a-b);
                if((a > 0 && b > 0 && c < 0) || (a < 0 && b < 0 && c > 0))
                        return true;
                return false;
        }
} 
```

# login-control - 当用户在 LoginStatus Control asp.net 上单击登录时如何显示弹出框？

> ID：10368474
> 
> 赞同：2
> 
> 时间：2012-04-28T23:29:12.330
> 
> 标签：login-control, asp.net-authentication, form-authentication, loginstatus

我在母版页上有一个登录状态控件。如果用户还没有登录到站点，登录状态控件将显示“登录”，如果用户单击“登录”，它通常会重定向到 Login.aspx 或我们在 web.config 中设置的任何内容？当用户在登录状态控件上单击“登录”时，我想显示一个弹出对话框（可能使用 Jquery）。

当用户单击登录状态控件上的“登录”时，如何引发事件？

注意：这个问题不是关于如何在 jquery 中制作弹出框。

谢谢。

大号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:31:57.113

我只是在努力解决这个问题并想出了这个：

```
 <asp:LoginView runat="server">
                    <AnonymousTemplate>
                            <a id="mainLoginLink" href="#">Login</a>
                            <div id="mainLoginPopup">
                                <asp:Login runat="server" ID="mainLoginControl">

                                </asp:Login>
                            </div>
                    </AnonymousTemplate>
                    <LoggedInTemplate>
                        <asp:LoginStatus ID="LoginStatus1" runat="server" LoginText="" />
                    </LoggedInTemplate>
                </asp:LoginView> 
```

基本上，LoginView 显示了一个自定义的“登录”链接，您可以使用该链接通过绑定到单击事件来显示弹出窗口。使用 jQuery，这看起来像这样：

```
$("#mainLoginLink").click(function(e) {
     $("#mainLoginPopup").show("fast");
 }); 
```

当然，弹出窗口最初会被隐藏。

当用户登录时，将显示正常的“注销”链接。

# c# - 为什么此消息：不包含“控件”的定义，并且没有扩展方法“控件”接受第一个参数

> ID：10368477
> 
> 赞同：0
> 
> 时间：2012-04-28T23:29:36.093
> 
> 标签：c#

**你好，**

我正在做的是一种显示来自特定文件夹的图像的方法，但是当我调试时，我在最后一行代码中遇到了这个错误，我不知道为什么。**

```
Error 3 'MBKiosk.classTools' does not contain a definition for 'Controls' and no extension    
method 'Controls' accepting a first argument of type 'MBKiosk.classTools' could be found (are you 
missing a using directive or an assembly reference?) 
```

**谢谢你的帮助。**

**这是代码：**

```
using System;
using System.Collections.Generic;
using System.Threading.Tasks;
using System.Data.SqlClient;
using System.Data;
using System.IO;
using System.Windows.Forms;
using System.Drawing;
using System.ComponentModel;
using System.Collections.ObjectModel;
using MBKiosk;

namespace MBKiosk
{
    class classTools
    {
        public void ShowImages(string path)
        {
            FlowLayoutPanel imagePanel = new FlowLayoutPanel();
            imagPanel.FlowDirection = FlowDirection.LeftToRight;
            imagePanel.Size = new Size(1240, 630);
            imagePanel.Location = new Point(12, 344);
            imagePanel.WrapContents = true;
            imagePanel.AutoScroll = false;
            DirectoryInfo dInfo = new DirectoryInfo(path);
            foreach (FileInfo file in dInfo.GetFiles())
            {
                System.Diagnostics.Debug.Print(file.Extension);
                if ((file.Extension == ".jpg") || (file.Extension == ".gif") || (file.Extension == 
                    ".png"))
                {
                    PictureBox image = new PictureBox();
                    image.Image = Image.FromFile(file.FullName);
                    image.SizeMode = PictureBoxSizeMode.Normal;
                    image.Size = new Size(180, 108);
                    imagePanel.Controls.Add(image);
                    imagePanel.Refresh();
                }
            }
            this.Controls.Add(imagePanel);
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:33:25.030

当您复制和粘贴代码时，可能会发生这种情况。this.Controls 期望您的类 'classTools' 有一个成员 Controls。将预期的成员变量添加到“classTools”或从另一个类派生它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-15T13:42:14.977

就我而言，我正在复制/粘贴其他页面的用户控件，但我没有检查页面顶部的`src`at标记。`Register`它似乎不是从根 ( `~/`) 开始的，因此它只能找到位于同一地图上的文件：

```
<%@ Register Src="MyPopUp.ascx" TagName="MyPopup" TagPrefix="uc3" %> 
```

因此，它将它视为一个 UserControl 而不是它自己的类。

我将控件复制到的页面位于不同的地图上，因此更正该路径并从根目录开始解决了该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-26T20:05:39.383

您导入`System.Windows.Forms`但实际上并未使用它。将您的类定义更改为`class classTools : Forms`，然后您将能够使用[`Controls`该类](https://msdn.microsoft.com/en-us/library/system.windows.forms.control(v=vs.110).aspx)。

而且好像类[中](https://msdn.microsoft.com/en-us/library/system.windows.forms.control_methods(v=vs.110).aspx)[没有`Add`方法`Controls`](https://msdn.microsoft.com/en-us/library/system.windows.forms.control_methods(v=vs.110).aspx)，只要不添加`Add`扩展方法`Controls`，就会报错。

# text - Sublime Text 2：查看工作目录/文件目录

> ID：10368478
> 
> 赞同：3
> 
> 时间：2012-04-28T23:30:06.897
> 
> 标签：text, editor, text-editor, sublimetext, sublimetext2

我认为让目录显示在窗口的底部状态栏中会很好。我无法从菜单中找到任何类型的文件信息，所以如果我从两个不同的目录中打开了同名的同一个文件，我无法判断我当前正在编辑哪个文件！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-30T18:50:08.733

您可以通过更改首选项中的某些设置来制作 sublime 文本以在标题栏中显示当前文件的完整路径。

如果您在 OS X 上添加

> “show_full_path”：真，

到您的用户设置并检查默认设置。

我猜在其他系统上默认情况下它就在那里，但你总是可以确定。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T23:42:06.900

我发现将鼠标悬停在此编辑器中的选项卡上会显示其路径。这对我来说已经足够了（尽管它总是在底部可见仍然很棒！）。

我创建了一个插件来在状态栏中显示当前打开的视图的路径。当窗口处于全屏模式时，这会有所帮助，您不会在标题栏中看到文件路径（无论如何，对于 OS X，它永远不会显示）。

# ruby-on-rails - 有什么方法可以在应用程序范围内禁用固定装置？

> ID：10368484
> 
> 赞同：1
> 
> 时间：2012-04-28T23:31:44.413
> 
> 标签：ruby-on-rails, fixtures

我根本不想使用固定装置。在搭建脚手架时可以使用一个标志，上面写着不要制作固定装置，但有时我会忘记。是否有一个应用程序范围的设置可以用来不必每次都使用这个标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:38:31.477

假设您使用的是 Rails 3，是的。查看[http://guides.rubyonrails.org/generators.html#customizing-your-workflow](http://guides.rubyonrails.org/generators.html#customizing-your-workflow)，特别是`g.test_framework`第一个示例中的行。设置`:fixture => false`将停止夹具生成。

# c# - 将命名的datagridview列与数据表中的特定列绑定

> ID：10368485
> 
> 赞同：2
> 
> 时间：2012-04-28T23:31:46.900
> 
> 标签：c#, winforms, datagridview, datatable

我使用以下代码在 datagridview 中添加了一些列：

```
dataGridView1.Columns.Add("name");
dataGridView1.Columns.Add("age");
dataGridView1.Columns.Add("salary"); 
```

我有包含来自存储过程的数据的数据表

`select col1,col2,col3 from emp`

我知道将 datagridview 与 datatable 或 dataset 绑定的传统方法，但是我重建了 datagridview 的问题，我在其中放置了多个标题并将一些标题合并在一起，所以我想要将特定的 datatable 列与特定的 datagridview 列绑定，例如

```
dataGridView1.column("Name") = dt.column("col1"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-29T00:10:39.110

您正在寻找该[`DataGridViewColumn.DataPropertyName`](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.forms.datagridviewcolumn.datapropertyname(v=vs.110))物业。

```
dataGridView1.Columns["Name"].DataPropertyName = "col1"; 
```

# algorithm - 算法复杂度时间

> ID：10368489
> 
> 赞同：1
> 
> 时间：2012-04-28T23:32:41.233
> 
> 标签：algorithm, iteration, big-o, time-complexity, hashset

我目前无法识别和理解以下算法的复杂时间。

背景：有一个文件列表，每个文件都包含一个候选 ID 列表。文件的数量和其中的候选者数量都不是固定的。

您将如何计算一个算法的时间复杂度，该算法负责：读取每个文件并将所有唯一的候选 ID 添加到 Hashset 中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:18:09.217

我只是在重复阿米特所说的话，所以如果你清楚的话，请给他投票 - 我觉得这个解释有点令人困惑。

您的平均复杂度为 O(n)，其中 n 是候选者的总数（来自所有文件）。因此，如果您有`a`文件，每个文件都有`b`候选人，那么所花费的时间与`a * b`.

这是因为解决问题的最简单方法是简单地遍历所有数据，将它们添加到集合中。该集合将根据需要丢弃重复项。

遍历所有值所花费的时间与值的数量成正比（即 O(n) 部分）。向散列集添加值需要恒定时间（或 O(1)）。因为这是每个条目的恒定时间，所以您的总时间仍然是 O(n)。

然而，哈希集有一个奇怪的最坏情况行为——在某些（不寻常的）情况下，它们所花费的时间与内容的大小成正比。所以在最坏的情况下，每次添加一个值都需要 O(m) 的工作量，其中 m 是集合中的条目数。

现在 m 是（大约 - 它从零开始并上升到......）不同值的数量。所以我们有两种常见的情况：

*   如果随着我们阅读的更多*不同*候选者的数量增加（例如，90% 的文件总是新候选者），那么 m 与 n 成正比。这意味着添加每个候选者的工作与 n 成正比。所以*总*工作量与 n^2 成正比（因为对于每个候选人，我们所做的工作与 n 成正比，并且有 n 个候选人）。所以最坏的情况是 O(n^2)。

*   如果*不同*候选者的数量实际上是固定的，那么当您阅读越来越多的文件时，它们往往会充满已知的候选者。在这种情况下，插入集合的额外工作是恒定的（对于*唯一*候选者，您只会获得固定次数的奇怪行为 - 它不依赖于 n）。在这种情况下，集合的性能不会随着 n 越来越大而变得越来越差，因此最坏情况的复杂度仍然是 O(n)。

# tcl - 验证 TK/Tcl 中的条目

> ID：10368493
> 
> 赞同：2
> 
> 时间：2012-04-28T23:33:14.983
> 
> 标签：tcl, tk

我正在尝试验证条目的文本输入。

```
entry $w.e -validate key -vcmd "entryChanged $w.l $w.e" 
```

我定义了以下回调。

```
proc entryChanged {l e} {
    puts [$e get]
    return 1
} 
```

问题是 get 返回条目的先前值，因为直到验证之后才设置新值。我的问题是如何访问新值？（要验证的值）我相信它与`-textvariable`，但是，我找不到太多关于此的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T00:31:40.533

您需要仔细阅读[`entry`文档](http://tcl.tk/man/tcl8.5/TkCmd/entry.htm)的验证部分。例如，试试这个

```
... -vcmd {entryChanged  %W %s %P}

proc entryChanged {widget_name old_value new_value} {
    puts "widget name = $widget_name"
    puts "previous value = $old_value"
    puts "edited value = $new_value"
    return true
} 
```

# java - Ksoap 和 HttpTransport Seand AndroidHttpTransport 方法调用

> ID：10368497
> 
> 赞同：0
> 
> 时间：2012-04-28T23:34:05.927
> 
> 标签：java, android, .net, web-services, ksoap2

在这个示例代码中，我引用了**ksoap2-android-assembly-2.6.3-jar-with-dependencies** ，当我`hts.call(SOAP_ACTION, envelope);`在调试模式下到达线路时，这令人难以置信；应用程序代码以错误消息结尾，进入 Log Cat 消息错误是：

```
-- 04-28 23:24:03.454: W/ActivityManager(80): Launch timeout has expired, giving up wake lock!
-- 04-28 23:23:38.667: W/ActivityManager(80): Activity idle timeout for ActivityRecord{407c0c10 yservices.screens/.MyservicesActivity} 
```

我在创建事件中的源代码：

```
TextView tv = new TextView(this);
setContentView(tv);

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(request);
envelope.dotNet = true;
AndroidHttpTransport hts = new AndroidHttpTransport(URL);
try {

    hts.call(SOAP_ACTION, envelope);

    SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
    // Log.i("myApp", response.toString());

    //tv.setText(weight+" "+fromUnit+" equal "+response.toString()+ " "+toUnit);
    tv.setText("Ok");

} catch(Exception e) {
    //e.getLocalizedMessage();
    tv.setText(e.getMessage());
} 
```

我希望你能帮助我。我的操作系统版本是 Windows 7 64 位、Eclipse Indigo 和 JDK 1.6，如果您需要其他信息，请写信给我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:48:11.027

该**警告**意味着您的应用程序正在持续运行。但我认为这不是你想要的，所以你应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:19:28.253

我的错误是因为 ksoap2 需要在名为 libs 的文件夹中引用，而不是在构建器路径 eclipse 中引用，最后一个 android 版本到 windows 7 x64 与最后一个版本 ksoap2 有问题

# asp.net-mvc - 将 Ckeditor 值传递给没有 html 标签的 div 文本？

> ID：10368503
> 
> 赞同：0
> 
> 时间：2012-04-28T23:36:08.010
> 
> 标签：asp.net-mvc, ckeditor

我的视图中有 Ckeditor，我动态获取编辑器值并在 div 中显示它们。我尝试了许多这样的定义组合（val、html、tex 等）：

```
CKEDITOR.on('instanceCreated', function (e) {
    e.editor.on('contentDom', function () {
        e.editor.document.on('keyup', function (event) {
            var str = CKEDITOR.instances['editor1'].getData();
            $("#mirror1").text(str);
            $("#mirror2").val(str);
            $("#mirror3").html(str);
            $('#mirror4').val($('<div/>').html(str).text());
        }
      );
    });
}); 
```

我的 div

```
<div id="mirror1">
</div>
<div id="mirror2">
</div>
<div id="mirror3">
</div>
<div id="mirror4">
</div> 
```

例如当我写`<pre>int i=0;</pre>`

```
mirror1 text= &lt;pre&gt;deneme&lt;/pre&gt;
mirror2 text= null
mirror3 text= <pre>int i=0;</pre>
mirror4 text= null 
```

我期待输出：`int i=0;`

我该怎么做。正确的语法是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T09:49:25.047

如果您跳过 jQuery 部分，您可以使用简单的 javascript 来完成：

```
CKEDITOR.on('instanceCreated', function (e) {
    e.editor.on('contentDom', function () {
        e.editor.document.on('keyup', function (event) {
            var str = CKEDITOR.instances['editor1'].getData();
            document.getElementById("mirror1").innerHTML = str;
        }
      );
    });
 }); 
```

但是如果你想要一个好的镜像，使用 DOM keyup 事件可能还不够，我建议你使用[CKEditor 的 onChange 插件](http://alfonsoml.blogspot.com.es/2011/03/onchange-event-for-ckeditor.html)（免责声明：我写的），现在镜像会在内容发生变化时更新：

```
CKEDITOR.on('instanceCreated', function (e) {
    var mirror2 = document.getElementById("mirror2");
    e.editor.on('change', function () {
        mirror2.innerHTML = CKEDITOR.instances['editor1'].getData();
    });
}); 
```

# android - Android setEGLContextClientVersion() 未正确注册

> ID：10368510
> 
> 赞同：2
> 
> 时间：2012-04-28T23:37:16.713
> 
> 标签：android, multithreading, opengl-es-2.0

无论出于何种原因，我的 EGL 上下文客户端版本都没有在我的 OpenGL 应用程序中设置。我通过简单地执行以下操作来设置上下文：

```
final boolean supportEs2 = configurationInfo.reqGlEsVersion >= 0x20000;

        if (supportEs2) { //<-- this resolves to true.

            mGLView.setEGLContextClientVersion(2);

            try {
                mGLView.setRenderer(new PongDroidRenderer(getApplicationContext()));
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

之后，由于未正确调用上下文，在尝试编译着色器时出现运行时异常。经过一番研究，我发现我无法从**主线程**调用 OpenGL ，但是，据我所知，我的应用程序本身*不是*多线程的（当然，系统是多线程的）。所以，我有点希望看看这里是否有人对我如何让这个工作有任何想法，如果提供了更多信息，只需说出这个词，我会在这里发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:32:35.027

您使用的是 glSurfaceView 吗？opengl 上下文仅在表面视图线程（调用 onDrawFrame、onSurfaceChanged、onSurfaceCreated 等的线程）中有效。您应该在这些回调中编译您的着色器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T13:44:52.907

您必须将支持的最低 Android API 版本设置为 8，因为 Android 2.2 及更高版本支持 OpenGL 2.0。如果您将版本设置为较低，则必须在 中调用该`setEGLContextClientVersion()`方法`onSurfaceCreated()`，`onSurfaceChanged()`或者`onDrawFrame()`如 Tim 所说。

# javascript - 同一页面上的 tinyMCE textarea 和 imagemanager 冲突

> ID：10368516
> 
> 赞同：2
> 
> 时间：2012-04-28T23:38:42.640
> 
> 标签：javascript, tinymce, mcimagemanager

我将 tinyMCE 库用于我的文本区域，也用于图像上传，但是当它们都在一个页面上时它不起作用。当它是其中之一时很好，但是只要我在页面上放置一个 tinyMCE 文本区域和一个启动 imagemanager 对话框的按钮，对话框就会加载，但旋转的加载图标只是继续运行，而不是从我的根路径。

在我的文件的开头，我有：

```
tinyMCE.init({

  // General options
  mode : "textareas",
  theme : "advanced",
    editor_selector : "mceEditor",
  editor_deselector : "mceNoEditor",
  plugins : "style,advlink,inlinepopups,preview,contextmenu,paste,directionality,fullscreen,noneditable,imagemanager,media",

  // Theme options
  theme_advanced_buttons1 : "cut,copy,paste,pastetext,pasteword,|,undo,redo,|,link,unlink,code,|,fullscreen",
  theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "bottom",
  theme_advanced_toolbar_align : "center",
  theme_advanced_resizing : false,
    media_strict: false
}); 
```

这对我的文本区域非常有用，然后在 document.ready() 上使用 jQuery 我有以下上传内容：

```
 $('.add_image_button').click(function(){

      mcImageManager.open(''{

          rootpath : '{0}/',
          oninsert:function(o){
              var location = o.focusedFile.path;
              location = location.substr(4);
      location = '_uploads/'+location;
      var preview_image = '../' + location;

      $('#selected_image > img').attr('src', preview_image);
      $('#image_path').val(location);
          }
      });
      return false;
  }); 
```

如果我在页面上有一个 MCE 文本区域并按下我的上传图片按钮，我会收到以下 javascript 错误：

Uncaught TypeError: Cannot set property 'innerHTML' of null - editor_plugin.js:1 Uncaught TypeError: Cannot call method 'getArgs' of undefined - index.php:1

I have tried the tinyMCE.init() after DOM ready, but no joy.

It feels like there might be some kind of path configuration conflict like the imagemanager. Does anybody know if there is a way of looking if the rootpath is getting screwed somehow on the imagemanager?

Cheers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:20:52.617

If anybody comes across this... I fixed it by removing inlinepopups from the plugins list.

# geometry - 简单的三角函数？

> ID：10368517
> 
> 赞同：1
> 
> 时间：2012-04-28T23:38:44.310
> 
> 标签：geometry, trigonometry

**编辑 - 感谢大家的所有答案。我想我不小心把你带错了，因为下图中的正方形应该是一个矩形（我看到你们中的大多数人都在引用正方形，这似乎会让我的生活更轻松）。此外，x/y 线可以向任何方向移动，因此红点并不总是位于顶部 y 边界。我最初打算使用 ay = mx + b 解决方案，但后来我被困在试图弄清楚我是如何知道是插入 x 还是 y （显然必须知道其中一个）。**

我有一个非常简单的问题（我认为），由于某种原因，我目前正在努力解决。我试图在我的游戏中使用一种小地图，它在视图周边显示符号，指向屏幕外的目标。

无论如何，我试图找到红点的值（而黑色边框和绿色的一切都是已知的）：

![在此处输入图像描述](../Images/b2952d6a61eaf965143d5524076f4a35.png)

这似乎是简单的三角学，但由于某种原因，我无法理解它。我只需要找到从绿点到红点的“新”x 值，然后我可以利用基本数学来获得红点，但是我如何找到新的 x 让我感到困惑。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T23:53:00.350

```
scale = max(abs(x), abs(y))
x = x / scale
y = y / scale 
```

这是一个简单的情况，对于从 (-1, -1) 到 (1, 1) 的正方形。如果您想要不同大小的正方形，请将坐标乘以`sidelen / 2`。

如果您想要一个矩形而不是正方形，请使用以下公式。（这是任意大小的方形版本的另一种解决方案）

```
scale = max(abs(x) / (width / 2), abs(y) / (height / 2))
x = x / scale
y = y / scale 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T23:53:02.957

让我们称正方形的一侧的长度*`l`*。线的斜率为*`-y/x`*。这意味着，如果您沿着这条线移动*`y`*并向正方形的顶部上升一段距离，那么您将*`x`*向左移动一段距离。但由于绿点在广场的中心，你只能上升*`l/2`*。您可以将其表示为一个比率：

```
    *-y *   *-l* /2
    ——— = ———
     *xd *     *_*

```

*`d`*您将向左移动的距离是多少。求解*`d`*，我们有

```
    *d* = *xl* /2 *y*

```

所以如果绿点在`(0, 0)`，红点在

```
(- *l* /2, *xl* /2 *y* )
```

.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T23:43:54.727

您所需要的只是正方形的角度和宽度`w`。

如果绿点在`(0,0)`，则角度为`a = atan(y/x)`，点的 y 坐标为`w/2`，因此点的 x 坐标为`tan(1/a) * (w/2)`。请注意`tan(1/a) == pi/2 - tan(a)`，或者换句话说，您*真正*想要插入的角度`tan`是盒子外面的角度。

编辑：是的，这也可以在没有触发的情况下完成。您所需要的只是插入线上点的 x 坐标。所以你知道 y 坐标是`w/2`，那么 x 坐标是`(w/2) * x/y`。但是，请注意您正在使用的正方形的哪个象限。该公式仅对 有效`-y<x<y`，否则您要反转`x`and `y`。

# r - 如何将数据框的字符列转换为Posixlt类型

> ID：10368524
> 
> 赞同：2
> 
> 时间：2012-04-28T23:40:42.810
> 
> 标签：r

data.frame 的一列是“字符”
例如：2012 年 3 月 31 日下午 9:56:53

```
/> class(columnName)  
[1] "character"

/>ttable[,c(3)] <- as.POSIXlt(ttable[,c(3)],tz="GMT", format="%H:%M:%S %p %m/%d/%Y")    

/>class(columnName)     
[1] "numeric" 
```

我希望它是 posixlt 但结果是数字。如何使它成为posixlt？

如果我对列的实际值应用相同的指令，它会按预期工作吗？

```
/> dd <- as.POSIXlt("9:56:53 PM 3/31/2012",tz="GMT", format="%H:%M:%S %p %m/%d/%Y")  

/> class(dd)  
[1] "POSIXlt" "POSIXt" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:16:47.907

首先，让我们创建一些数据并复制您的问题。请注意您未提及的警告：

```
ttable <- data.frame(x=1:2, y=1:2, z="9:56:53 PM 3/31/2012",
                     stringsAsFactors = FALSE)
ttable
#   x y                    z
# 1 1 1 9:56:53 PM 3/31/2012
# 2 2 2 9:56:53 PM 3/31/2012
ttable[, c(3)] <- as.POSIXlt(ttable[,c(3)], tz="GMT",
                                            format="%H:%M:%S %p %m/%d/%Y") 
# Warning message:
# In `[<-.data.frame`(`*tmp*`, , c(3), value = list(sec = c(53, 53 :
#   provided 9 variables to replace 1 variables
sapply(ttable, class)
#         x         y         z 
# "integer" "integer" "numeric" 
```

正如@joran 指出的那样`?DateTimeClasses`，问题在于`as.POSIXlt`返回一个长度为九的向量列表（秒、分钟、小时等）。这个列表不能被分配，`ttable[,c(3)]`因为它当前的“宽度”是 1。相反，整个 data.frame 列（或列表元素）必须重新分配，通过`ttable[[3]]`或`ttable$z`：

```
ttable <- data.frame(x=1:2, y=1:2, z="9:56:53 PM 3/31/2012",
                     stringsAsFactors = FALSE)
ttable[[3]] <- as.POSIXlt(ttable[,c(3)], tz="GMT",
                                         format="%H:%M:%S %p %m/%d/%Y") 
sapply(ttable, class)
# $x
# [1] "integer"
# 
# $y
# [1] "integer"
# 
# $z
# [1] "POSIXlt" "POSIXt" 
```

将列表分配为 data.frame 的列并不是一件很常见的事情。这个类似的例子可能会有所帮助：

```
ttable[, 1] <- list(a = 1:3, b = 3:1)
# Warning messages: [...]
ttable$x <- list(a = 1:3, b = 3:1)
#         x y                   z
# 1 1, 2, 3 1 2012-03-31 09:56:53
# 2 3, 2, 1 2 2012-03-31 09:56:53 
```

# java - 有没有办法在不使用外部 JAVA_TOOL_OPTIONS 的情况下使用 UTF-8 制作 Maven 构建类文件？

> ID：10368527
> 
> 赞同：10
> 
> 时间：2012-04-28T23:41:39.970
> 
> 标签：java, maven, maven-2, character-encoding

我不想依赖外部环境变量来强制 maven 使用 UTF-8 构建我的类。在 Mac 上，我在使用 maven 构建时遇到了各种各样的问题。只有以下选项解决了问题：

```
export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8
mvn clean install 
```

但是，我正在分发我的项目，依靠用户设置此环境变量来正确构建项目是没有意义的。

尝试了此处描述的所有内容：[为 clojure 源文件启用 UTF-8 编码](https://stackoverflow.com/questions/1431008/enabling-utf-8-encoding-for-clojure-source-files)

有人对那个很棒的 Maven 问题有所了解吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-29T20:01:35.100

@Joop Eggen 在这里给出了正确答案：[https ://stackoverflow.com/a/10367745/962872](https://stackoverflow.com/a/10367745/962872)

定义该属性是不够的。您必须在适当的插件中传递它。里面不会变魔术的。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>...</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
        <encoding>${project.build.sourceEncoding}</encoding>
    </configuration>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>...</version>
    <configuration>
        <encoding>${project.build.sourceEncoding}</encoding>
    </configuration>
</plugin>
...
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T00:17:07.673

有，定义

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T19:16:31.607

我遇到了这个问题，但仅在从 Emacs 运行编译时。我无法更改项目的 poms。对我有用的是将以下内容放入 ~/.mavenrc

```
LANG=en_US.UTF-8 
```

# perl - 如何遍历 Subversion 存储库以查找特定文件，并停止进一步向下搜索？

> ID：10368532
> 
> 赞同：1
> 
> 时间：2012-04-28T23:42:38.630
> 
> 标签：perl, svn, list, repository, traversal

我有这个问题：给定一个 Subversion 存储库`http://svn/trunk/`，我想搜索整个存储库以查找/列出所有命名的文件`exp.xml`（它们的整个 URL）。一旦找到第一次出现，我希望它**停止进一步**向下搜索 URL。为了清楚起见，这里有一些虚构的 URL：

```
http://svn/trunk/pro1/sub-pro-x/exp.xml/sub-pro-x1/exp.xml
http://svn/trunk/pro2/sub-pro-y/pro-y1/exp.xml/sub-pro-y1/exp.xml
http://svn/trunk/pro3/sub-pro-z/exp.xml/sub-pro-z1/exp.xml/sub-proj/exp.xml 
```

结果应该是**：**

```
http://svn/trunk/pro1/sub-pro-x/exp.xml
http://svn/trunk/pro2/sub-pro-y/pro-y1/exp.xml
http://svn/trunk/pro3/sub-pro-z/exp.xml 
```

现在我已经有了一个解决方案，但它并不是很有效，因为我`grep exp.xml`在`svn -R list ---`搜索了整个存储库（30-40 分钟）之后使用。如果你想知道，这里是命令：

```
svn list -R http://svn/trunk | grep /exp.xml 
```

所以我的问题是是否有可能对这个查询进行任何显着的加速？我正在考虑的一件事是可能使用某种语言，**最好是 Perl**，直接遍历`http:/svn/trunk/`并处理所有链接，并在找到第一个时停止进一步向下遍历`exp.xml`。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:23:54.580

如果您希望它更快，我会尝试检查 SVN 项目，然后搜索磁盘上的文件。您可以在签出的沙箱中使用“查找”执行搜索（其中“。”假设您位于项目的顶级目录中）：

```
find . -name 'exp.xml' 
```

但是，与您的“grep”解决方案类似，我认为它没有达到您的“停止进一步搜索”标准。如果您希望 Perl 脚本搜索“exp.xml”但在找到匹配项时停止递归，请尝试以下操作（将顶级目录作为参数）：

```
#!/usr/bin/env perl
use warnings;
use strict;

my @dirs = $ARGV[0];

my @files;
DIR:
while (my $dir = shift @dirs) {
    opendir(my $dh, $dir) or die "Couldn't open dir $dir: $!";

    my @new_dirs;
    while (my $file = readdir($dh)) {
        # skip special directories (".", "..", and ".svn")
        next if $file =~ /^\./;

        # turn file into correct relative path
        $file = "$dir/$file";

        if (-d $file) {
            push @new_dirs, $file;
        }
        if ($file eq "$dir/exp.xml") {
            # if we matched, next outer loop so we don't recurse further
            push @files, $file;
            next DIR;
        }
    }
    # if we didn't match any files, we need to check sub-dirs
    push @dirs, @new_dirs;
}

print "$_\n" for @files; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:44:27.220

使用`svn ls [URL]`或`svn ls -R [URL]`与您的脚本一起列出从 [URL] 开始的 SVN 存储库。有关`svn ls --help`更多信息，请参阅。

# mysql - MySQL：（全文/索引）搜索“单字列”

> ID：10368536
> 
> 赞同：6
> 
> 时间：2012-04-28T23:43:32.913
> 
> 标签：mysql, full-text-search, wildcard, sql-like

我有一个大约 3M 行的表（MySQL 5.1，InnoDB），其中 98% 只包含一个单词。如果我使用 运行查询`LIKE %searchterm%`，它太慢了。

由于`SELECT`仅针对此表的查询，我正在考虑将其转换为 MyISAM（因为 InnoDB 还没有，或者仅支持 5.6+ 版本`FULLTEXT`）。

但是，我想知道这是否真的会加快查询速度，据我所知，FULLTEXT-index 是一个带有拆分词的表（“Hello Sunny day”->“hello”、“sunny”、“ day")，所以如果每列只有一个词，那有什么意义吗？

如果我在这个文本列上放置一个普通的索引，它会加快查询速度吗？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T23:45:51.530

使用 FULLTEXT 索引会有所帮助。它将文本拆分为单词，但随后它也会索引这些单词。正是这种索引加快了查询速度。但是您需要使用[全文搜索功能](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)，而不是 LIKE，才能利用索引。

一个正常的索引不会帮助你。LIKE 子句只有在具有常量前缀的情况下才能利用索引。

*   `yourcolumn LIKE 'searchterm%'`将使用索引。
*   `yourcolumn LIKE '%searchterm%'`不会使用索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T17:18:45.407

全文搜索或全文索引对您有什么不利吗？就我个人而言，我错过了搜索单词的*一部分*，例如“ByteArray”中的“Array”。

您可以考虑我在这里介绍的方法：

[https://stackoverflow.com/a/22531268/543814](https://stackoverflow.com/a/22531268/543814)

这个想法是存储字符串的每个可能的后缀。

这需要更多存储空间，具体取决于您的字符串长度。

作为回报，您可以对这些查询使用普通索引：因为字符串的每个可能后缀都在表中`LIKE %searchterm%`，因此*与*`LIKE searchterm%`.

您不再需要前导`%`，因此可以再次使用普通索引。

# xml-parsing - Opa 中的 XML 解析

> ID：10368537
> 
> 赞同：1
> 
> 时间：2012-04-28T23:43:47.127
> 
> 标签：xml-parsing, opa

有人精通`xml_parser`Opa的s吗？我需要两个成语：

*   *我不关心属性*（它可能出现在标签上，也可能不出现；如果存在，我不关心内容）和
*   *我不在乎标签*（它可能存在也可能不存在）。

有谁知道怎么表达？例如说我想解析：

```
<x a="123">
   <z>...</z>
</x> 
```

我希望解析器存储标签的属性值`a`和内容，`<v>`即使`<x>`具有可选属性`b`（或更多）并且`<y>`之前有标签，它也应该可以工作`<z>`。

# ios - 核心数据父实体生成 NSManagedObject 子类

> ID：10368539
> 
> 赞同：1
> 
> 时间：2012-04-28T23:44:28.503
> 
> 标签：ios, core-data

我的模型中有一个父实体“List”和一个名为“UserList”的子实体（子实体），它只是一种列表。“UserList”没有自己的属性或关系，它继承了 List 的所有内容。List 与 ListItem 具有一对多的关系。

我要求 XCode 4.2 生成 NSManagedObject 子类。对于 List 它会生成我期望的内容，包括，

```
- (void)insertObject:(NSManagedObject *)value inListItemsAtIndex:(NSUInteger)idx;
- (void)removeObjectFromListItemsAtIndex:(NSUInteger)idx;
... 
```

然而，生成的“UserList”类没有声明任何方法，如果它被声明为“List”的子类，那将是可以的，但这不是它生成的。

```
@interface UserList : NSManagedObject
@end 
```

UserList 真的是 List 的子类吗？我可以只更改标题吗？还是发生了更复杂的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T03:02:14.133

有几件事要检查。首先，确保您已为 List 和 UserList 实体指定了类名，然后确保 UserList 已将 List 声明为其父实体。

发电机很挑剔。如果您没有在模型 GUI 中专门指定类名，它会即时生成它们。不幸的是，这意味着，根据生成它们的顺序，有些可能不会使用正确的信息生成（想象首先生成 UserList ......如果你没有专门给 List 一个类名，它只知道使用NSManagedObject）。

按照惯例，我总是在模型 GUI 中专门指定类名。当我专门为每个实体分配一个类（在你给实体命名的地方）时，我没有看到这种情况发生，但我想它可能会发生。

尝试重新生成类文件。这次它可能会正确生成。

**编辑**

评论后澄清...

注意：不幸的是，Xcode 在这件事上非常一致。如果您没有明确地为实体提供类名，那么引用它的其他人将使用“错误的”类名生成。

我建议为您的工作流程遵循以下选项之一。

1.  始终在 GUI 中为每个实体分配类名。

2.  第一次生成类时，总是生成两次。

3.  使用 mogenerator [https://github.com/rentzsch/mogenerator#readme](https://github.com/rentzsch/mogenerator#readme)而不是 Xcode 类生成器。

# graph - 如何加载具有相关顶点的顶点作为集合

> ID：10368542
> 
> 赞同：0
> 
> 时间：2012-04-28T23:45:31.387
> 
> 标签：graph, neo4j, gremlin, neo4jclient

**GraphDb 端**

顶点：用户

边缘：有

顶点：汽车

**对象侧**

```
public class User {  
    public string Name { get; set; }

    [GraphEdge("HAS_CAR")]
    public ICollection<Car> Cars { get; set; }
} 
```

**问题**

我想通过 Gremlin 从 Neo4J 获取具有 Cars 属性的用户 X？（我正在使用 Neo4jClient）

它与 Linq to Entity 的 Include 方法非常相似。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:07:55.123

假设这样的图表：

![示例图](../Images/759c65d994510ab433a06b5523637625.png)

您将使用这样的 Gremlin 查询来检索所有用户的所有汽车：

```
g.v(0).out('HAS_USER').out('HAS_CAR') 
```

现在，让我们将其过滤到红色汽车：

```
g.v(0).out('HAS_USER').out('HAS_CAR').filter { it.Color == "Red" } 
```

最后，你想要的是用户而不是汽车。最容易想到 Gremlin 就像一个真正的 gremlin（小生物）一样工作。你告诉他跑到用户那里，然后跑到每辆车，然后检查每辆车的颜色。现在你需要他回到他来自的用户那里。为此，我们在查询中放置一个标记，如下所示：

```
g.v(0).out('HAS_USER').as('user').out('HAS_CAR').filter { it.Color == "Red" }.back('user') 
```

用 Neo4jClient 用 C# 编写这个非常相似：

```
graphClient
    .RootNode
    .Out<User>(HasUser.TypeKey)
    .As("user")
    .Out<Car>(HasCar.TypeKey, c => c.Color == "Red")
    .BackV<User>("user") 
```

这里唯一的区别是您需要分别使用`BackE`or`BackV`来表示边和顶点，而不是 just `Back`。这是因为在 C# 的静态类型世界中，我们需要使用不同的方法名称才能返回不同的枚举器类型。

我希望这会有所帮助！:)

——泰坦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:31:56.423

奥古兹，

既然您已经更新了问题，我就更好地理解了。

`GraphEdgeAttribute`不是 Neo4jClient 的一部分，所以我不确定它来自哪里。

在 Neo4jClient 中，我们不加载深层对象。也就是说，我们不会遵循属性并加载更多集合。我们这样做是因为 a) 它需要我们对服务器进行大量往返； b) 我们认为您应该明确说明您实际想要加载的数据。我们不想成为 Neo4j 项目的 Spring Data 的等价物，因为我认为这不是一个好方法。

听起来您可能想看看 Cypher 而不是 Gremlin。这将使您可以将数据加载为表格，包括来自多个节点的投影。

——泰坦

# c# - 在图书馆项目中获得剃须刀智能感知？

> ID：10368545
> 
> 赞同：8
> 
> 时间：2012-04-28T23:46:04.867
> 
> 标签：c#, razor, intellisense

我有一个商业项目，我将根据使用 razor 制作的模板创建电子邮件。我怎样才能在那里获得剃须刀智能感知？是包括几个程序集那么简单，还是我需要做一些更反驳的事情？

这是为了使用[RazorEngine](https://github.com/Antaris/RazorEngine)库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:10:15.583

您必须编辑**.csproj**文件。添加以下**ProjectTypeGuids**节点（仅在现有*ProjectGuid*节点下方添加它们）。

```
<ProjectGuid>{28AD1627-3486-48C2-A045-EFFBB441582B}</ProjectGuid>
<ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

保存文件，然后使用 Visual Studio 重新打开它。VS2012 然后执行一些转换，但最后一切正常。工具在那里。

根据您在做什么（Razor Generator？），您将需要一些参考资料（System.Web、System.Web.WebPages、System.Web.Mvc、System.Web.Razor、System.Web.Routing...）。

*这是用 VS2012 测试的。*

在 Visual Studio 2013 中，我还必须替换 .csproj 文件中的以下行，因为它指向错误的位置：

```
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-19T12:01:39.150

这是实现这一目标的一个很好的指南。

[http://thetoeb.de/2014/01/05/enabling-mvc5-intellisense-in-a-classlibrary-project/](http://thetoeb.de/2014/01/05/enabling-mvc5-intellisense-in-a-classlibrary-project/)

步骤是：

1.  添加 MVC (5.0) nuget 包（在解决方案资源管理器中右键单击项目 -> 管理 NuGet 包 -> 搜索 MVC 并安装“Microsoft ASP.NET MVC”）
2.  关闭所有打开的 .cshtml 文件
3.  右键项目 -> 属性 -> 构建 -> 将输出路径更改为“bin/”</li>
4.  将以下最小 Web.config 添加到类库项目的根目录（智能感知仅需要 Web 配置文件。配置（通过 Web.config）应在托管 ClassLibrary 程序集的 WebApplication 中完成）
5.  清理并构建解决方案。

**网络配置：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="webpages:Version" value="3.0.0.0" />
    <add key="webpages:Enabled" value="false" />
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.5" />
  </system.web> 

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
        <!-- add other namespaces for views here -->
        <!-- e.g. your own project's, Lib.Views.Etc -->
      </namespaces>
    </pages>
  </system.web.webPages.razor>
</configuration> 
```

# java - 正常活动和标签活动

> ID：10368546
> 
> 赞同：0
> 
> 时间：2012-04-28T23:46:47.380
> 
> 标签：java, android, android-activity, android-tabactivity

我正在开发一个应用程序。它的第一页是登录屏幕。成功登录后，我想将用户带到选项卡式活动。我怎么能在android中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:50:22.080

在 Android 中，启动 an`Activity`是使用`Intent`对象完成的，如下所示：

```
Intent intent = new Intent(this,YourActivity.class);
this.startActivity(intent); 
```

# objective-c - xcode / cocoa：在自定义单元格中重用标识符

> ID：10368553
> 
> 赞同：1
> 
> 时间：2012-04-28T23:48:03.443
> 
> 标签：objective-c, xcode, cocoa-touch

我通过 uitableviewcell 子类有一个带有自定义单元格的表格视图。单元格有一个标签 lblResult，在收到结果后会发生变化。它工作得很好，但是，当我向下滚动我的表格视图时，其他随机单元格现在具有相同的结果标签（但它们仍然具有正确的“名称”标签）。

我认为这与重用标识符有关，但我不确定。

如果您需要更多代码来理解我的问题，请告诉我。

单元格在 cellForRowAtIndexPath 中是这样制作的

```
static NSString *CellIdentifier = @"tableCell";
FriendCell *cell =
    [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[FriendCell alloc]
             initWithStyle:UITableViewCellStyleDefault
             reuseIdentifier:nil];
} 
```

然后在返回之前，将单元格传递到 loadingQueue 字典中。当结果加载时，有一个 resultComplete 方法从 loadingQueue 字典中加载单元格，并调用以下内容：

```
 [[cell lblNumTagged] setText:[NSString stringWithFormat:@"(%d)",[thisDictionary count]]];
    [[cell lblNumTagged] setHidden:NO]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:50:55.487

是的，这是因为细胞正在被重复使用。

在您的自定义单元格类中，您可以使用[prepareForReuse](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableViewCell/prepareForReuse)委托方法，该方法在单元格被重用之前被调用并在那里清除单元格的标签......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T12:39:46.657

我知道这是旧的，但以防万一。我认为这是因为当您创建一个新单元格时，您没有指定标识符。

```
static NSString *CellIdentifier = @"tableCell";
FriendCell *cell =
[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
   cell = [[FriendCell alloc]
         initWithStyle:UITableViewCellStyleDefault
         reuseIdentifier:CellIdentifier];
} 
```

试试这样，注意最后一行的结尾.....

# java - Android SQLite：将 long 转换为 Date 并返回

> ID：10368555
> 
> 赞同：1
> 
> 时间：2012-04-28T23:48:18.010
> 
> 标签：java, android, sqlite, date

我有一个简单的待办事项应用程序，其中每个“待办事项”都有标题、描述、完成状态、创建日期和修改日期。

**Todo.java**

```
package com.anna.todos.models;

import java.util.Date;

public class Todo {
    private long id;
    private String title;
    private String text;
    private boolean done;
    private Date createdDate;
    private Date modifiedDate;

    public Todo() {
    }

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public boolean isDone() {
        return done;
    }

    public void setDone(boolean done) {
        this.done = done;
    }

    public Date getCreatedDate() {
        return createdDate;
    }

    public void setCreatedDate(Date createdDate) {
        this.createdDate = createdDate;
    }

    public Date getModifiedDate() {
        return modifiedDate;
    }

    public void setModifiedDate(Date modifiedDate) {
        this.modifiedDate = modifiedDate;
    }
} 
```

创建日期和修改日期以整数形式存储在 SQLite 数据库中。当我从数据库中获取它们时，我希望能够正确地将它们转换为 Date 对象，并且当我去保存待办事项时，我希望能够获得这些 Date 对象的整数或长等价物。（这是根据另一个 StackOverflow[帖子](https://stackoverflow.com/questions/7487460/java-convert-long-to-date)的建议完成的）。

以下是我用来从数据库中获取日期的代码：

```
 createdDate = new Date(cursor.getInt(4) * 1000);
    modifiedDate = new Date(cursor.getInt(5) * 1000); 
```

并保存日期....

```
 createdDate = Calendar.getInstance().getTime();
    values.put(DatabaseHelper.TODO_CREATED_DATE, createdDate.getTime() * 1000); 
```

我现在的问题是创建和修改的日期没有被正确转换。下面是从数据库中加载日期的调试语句：

04-29 09:21:35.649: I/TodoEditActivity(3954): populateFields() => createdDate=01 Jan 1970 10:33:01 04-29 09:21:35.649: I/TodoEditActivity(3954): populateFields() => 修改日期=1970 年 1 月 1 日 10:34:19

以及保存日期的调试语句：

04-29 09:22:00.653: I/TodoEditActivity(3954): saveTodo() => createdDate=01 Jan 1970 10:33:01 04-29 09:22:00.653: I/TodoEditActivity(3954): saveTodo() => 修改日期=2012 年 4 月 29 日 09:22:00

我应该做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T00:24:35.467

我怀疑数据库中存储的 createdDate 的值为 0（或一个小值）。尝试将变量设置为 cursor.getInt(4) 并对其进行调试，以便您可以验证该值是否为您提供了当前日期。如果使用 Date.getTime() 或 Calendar.getTimeInMillis()，则不需要乘以 1000。

# python - Python: How can add words to a list?

> ID：10368565
> 
> 赞同：1
> 
> 时间：2012-04-28T23:51:09.920
> 
> 标签：python, string, list, html-parsing, append

Okay, the Title is a bit vague, but what I'm trying to do is download data online, parse it and then put the parsed 'data' into an excel file.

I'm getting stuck in trying to put the data into a vector or list. Note that, the data can be either words or numbers. Also, I the length of the data is unknown. I tried the code below:

```
class MyHTMLParser(HTMLParser):
    def handle_data(self, data):
        d=[]
        d=d.append(data)

parser = MyHTMLParser()
parser.feed('<html><head><title>Test</title></head>'
            '<body><h1>Parse me!</h1></body></html>')

d

Traceback (most recent call last):
File "<pyshell#34>", line 1, in <module>
d
NameError: name 'd' is not defined 
```

I looked around the forum for an answer, but didn't seem to encounter anything. I am a beginner, so may I'm missing something basic? Thanks, for the help...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T23:56:44.857

Inside of class methods, you need to use `self` to reference a member variable.

Starting with something like this might make more sense:

```
class MyHTMLParser(HTMLParser):
    def __init__(self):
        HTMLParser.__init__(self)
        self.d = []
    def handle_data(self, data):
        self.d.append(data) 
```

Then, to access `d` you would need to specify the class instance, so something like

```
parser.d 
```

**EDIT:** `global` would work, but unless there is a compelling reason, I think you should learn how to do things the correct way rather than clutter the global namespace

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T23:55:21.837

There are three problems with your code.

*   You are creating a new empty list every time you call the method.
*   `list.append` returns `None` (not the list) so your list that now contains one element is not actually stored anywhere.
*   Assigning to a variable inside a function creates a *local* variable, not a *global* variable (unless you specify that the variable should be global with the `global` keyword).

Try this instead:

```
d = []

class MyHTMLParser(HTMLParser):
    def handle_data(self, data):
        d.append(data) 
```

It's also a bad style to use global variable. You might want to consider making `d` an attribute of the class, and giving it a better name.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T23:55:08.823

If you want to bind a name at module scope then you need to use `global` on it at the beginning of the function.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T00:00:25.983

Is this what you are looking for?

```
from HTMLParser import HTMLParser

class MyHTMLParser(HTMLParser):
    data = []
    def get_data(self):
        return self.data
    def handle_starttag(self, tag, attrs):
        pass
    def handle_endtag(self, tag):
        pass
    def handle_data(self, data):
        self.data.append(data)

# instantiate the parser and fed it some HTML
parser = MyHTMLParser()
parser.feed('<html><head><title>Test</title></head>'
            '<body><h1>Parse me!</h1></body></html>')
print 'All data', parser.get_data() 
```

Output:

```
All data ['Test', 'Parse me!'] 
```

# mysql - 带有 sum 的 mysql 连接查询返回 null

> ID：10368568
> 
> 赞同：0
> 
> 时间：2012-04-28T23:53:02.477
> 
> 标签：mysql, join, sum

如果 makale_payments 表为空，则查询返回空。如果 SUM( `payment_total`) 中不存在像 0.00 这样的查询，我应该如何设置查询以获取记录？

```
SELECT article_name,user_real_name,user_name,SUM(`article_payment`) as holding,paid
FROM makale_articles AS t1
JOIN makale_users ON (t1.article_name=makale_users.user_id) 
JOIN (SELECT user_id,SUM(`payment_total`) as paid FROM makale_payments GROUP BY user_id) AS t2 ON (t1.article_name=t2.user_id)
GROUP BY t2.user_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:56:22.570

这`IFNULL`是为了：

```
IFNULL(SUM(...), 0.0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T00:00:46.763

`article_payment`可能`NULL`是一些行。试试这个：

```
SELECT 
    article_name,
    user_real_name,
    user_name,
    SUM(COALESCE(`article_payment`, 0)) as holding,
    paid
FROM article_articles AS t1
JOIN article_users ON (t1.article_name=article_users.user_id) 
JOIN (
    SELECT user_id, SUM(COALESCE(`payment_total`, 0)) as paid 
    FROM article_payments 
    GROUP BY user_id
) AS t2 ON (t1.article_name=t2.user_id)
GROUP BY t2.user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T00:00:25.953

我猜一个简单的 WHERE 不会有伤害

```
WHERE SUM(`article_payment`) > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T04:42:34.697

MySQL 不会为返回 null 的行返回聚合值，即使专门测试 ISNULL。ISNULL 仅用于检查列是否为空，而不是关系是否返回空。然而，我确实找到了一种（尽管非常晦涩）的方法来解决这个限制。基本前提是将两条sql语句全部union，将这两条unioned查询作为子查询进行select from。

联合查询将采用以下形式：

```
 select column1, column2, SUM(column3) as payment from tablea, tableb where....
   union all
   select column1, column2, 0.00 as payment from tablea --notice no join, and a specified value and alias for aggregate column 
```

使用上面的查询，对于关系不为空的每一行，您将获得两行，当它为空时，您将获得一行。如果您对这些行求和并分组，那么您最终应该得到您想要的值。因此，您然后创建一个查询，该查询使用上述作为表来选择并汇总聚合列：

```
 select column1, column2, SUM(payment) from

   (select column1, column2, SUM(column3) as payment from tablea, tableb where....
   union all
   select column1, column2, 0.00 as payment from tablea) as b
   group by column1, column2 
```

我可能对查询的语法不了解，抱歉，我这里没有要测试的 MySQL。

# windows-phone-7 - 在 Windows Phone 7 中本地化 Listpicker 项目

> ID：10368570
> 
> 赞同：0
> 
> 时间：2012-04-28T23:53:03.803
> 
> 标签：windows-phone-7, xaml, listpicker

我正在尝试在我的 windows phone 7 应用程序中使用 listpicker 控件，我已正确设置了 xaml，但我想使用我的资源文件中的字符串而不是我当前设置的文字（用于 Yards 和 Meters）：

```
 <toolkit:ListPicker Header="{Binding Path=LocalizedResources.unit_of_length_title, Source={StaticResource LocalizedStrings}}">
        <sys:String>Yards</sys:String>
        <sys:String>Meters</sys:String>
    </toolkit:ListPicker> 
```

我尝试了以下方法：

```
 <toolkit:ListPicker Header="{Binding Path=LocalizedResources.unit_of_length_title, Source={StaticResource LocalizedStrings}}">
        <sys:String>{Binding Path=LocalizedResources.measure_yards, Source={StaticResource LocalizedStrings}}</sys:String>
        <sys:String>{Binding Path=LocalizedResources.measure_meters, Source={StaticResource LocalizedStrings}}</sys:String>
    </toolkit:ListPicker> 
```

但它不绑定到资源字符串。我知道我可以创建一个数据模板并以这种方式绑定，但我正在寻找一个更简单的解决方案，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:43:52.460

尝试以下操作：

```
<toolkit:ListPicker Header="{Binding Path=LocalizedResources.unit_of_length_title, Source={StaticResource LocalizedStrings}}">
    <toolkit:ListPickerItem Content="{Binding Path=LocalizedResources.measure_yards, Source={StaticResource LocalizedStrings}}"/>
    <toolkit:ListPickerItem Content="{Binding Path=LocalizedResources.measure_meters, Source={StaticResource LocalizedStrings}}"/>
</toolkit:ListPicker> 
```

# android - 可下载图像的 dpi

> ID：10368577
> 
> 赞同：0
> 
> 时间：2012-04-28T23:55:16.783
> 
> 标签：android, dpi

我的怀疑很简单。该应用程序有 4 个目录（ldpi、mdpi、hdpi、xhdpi），图像相同但 dpi 不同。对于 mdpi 是 160dpi，我使用 atm 的那个。

我从网上下载的图像会怎样？我有一个新闻阅读器，这意味着每个新的至少有一个图像。我想为所有智能手机提供一个像样的图像。

我需要不同类型的图像还是只为所有人下载相同的图像？我可以知道哪种分辨率最适合每个特定的智能手机吗？

我找不到处理这个问题的“官方”方式，所以我不知道它对于我们计划下载的图像是否重要的​​ dpi。

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:20:04.917

ldpi 表示 ~120dpi，mdpi 表示 ~160dpi，hdpi 表示 ~240dpi。xhdpi 表示 ~320dpi。您可以按照 ldpi:mdpi:hdpi:xhdpi 的 3:4:6:8 比例获取资源。

现在您可以为所有分辨率提供不同的图像，它会更好，并且一定没有问题。如果您不能为所有人提供不同的图像，则为 xhdpi 和运行时提供图像，您可以根据屏幕分辨率调整图像大小。

您可以使用以下示例代码来了解运行时的屏幕分辨率：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
switch (metrics.densityDpi) {
case 120:
    //your stuff
break;
case 160:
    ////your stuff
    break;
case 240:
    ///your suff
    break;
case 320:
    //your stuff
    break;
} 
```

调整位图大小的示例代码::

```
Bitmap mIcon_val = your bitmap;
Matrix matrix = new Matrix();   
matrix.postScale((float)newwidth/mIcon_val.getWidth(), (float)newheight/mIcon_val.getHeight()); 
Bitmap resizedBitmap = Bitmap.createBitmap(mIcon_val, 0, 0, mIcon_val.getWidth(),  mIcon_val.getHeight(), matrix, true); 
```

现在您有了新的位图新的宽度和高度，您可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:35:51.340

如果您想构建一个出色的应用程序，您需要管理每个图像以适合正确的智能手机，如果您为所有人下载相同的图像，它看起来不会很好。

欲了解更多信息，请访问： [支持多个屏幕](http://developer.android.com/design/style/devices-displays.html)

# objective-c - 用自定义对象填充 UITableView？

> ID：10368579
> 
> 赞同：0
> 
> 时间：2012-04-28T23:55:55.480
> 
> 标签：objective-c, uitableview, nsmutablearray

我尝试从包含自定义对象的 NSMutableArray 填充 UITable 失败。

我的学生对象

```
Student {
    NSString name,
    int age
} 
```

在我的 UITableView 的控制器中，我实现了一个显示行内容的方法：

```
cellForRowAtIndexPath
{
    // there is more code here
    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
} 
```

但以上不适用于数组内的对象。

我的学生类是否应该实现一个返回对象的字符串表示形式的方法？然后如何在 UITableView 中显示 NSMutableArray 的内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T00:10:57.640

您的 objectAtIndex 应该是 Student 对象，因此您需要获取它的属性——假设 name 和 age 是属性，您应该能够使用 [(Student *)[tableData objectAtIndex:indexPath.row] name]; 引用它们 和相应的年龄。

# windows-phone-7 - 从 class#.cs windows phone 更改文本块

> ID：10368582
> 
> 赞同：0
> 
> 时间：2012-04-28T23:56:12.367
> 
> 标签：windows-phone-7, windows-phone

我想`TextBlock`通过类文件更改 a（或任何对象的属性）的文本，但是当我调用该类时，我只知道对象的名称？

例子：

```
<TextBlock VerticalAlignment="Top" HorizontalAlignment="Left" FontSize="25" Margin="25,220,0,0" Name="txbuser">Username :</TextBlock> 
```

我有文件 class.cs

`TextBlock`当我只知道名称是“txbuser”时，如何更改文本属性？谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:33:18.790

在您的类文件中，您只需要按`TextBlock`名称引用实例并设置`.Text`属性。

```
txbuser.Text = "omm nom nom nom"; 
```

# c# - If contains 使用 SQL 的等价物？

> ID：10368586
> 
> 赞同：2
> 
> 时间：2012-04-28T23:56:51.820
> 
> 标签：c#, sql

我正在创建一个程序，该程序需要检查数据库的第 1 列中是否存在值，如果不存在则添加它，或者如果存在则将 1 添加到第 2 列中的值。

目前该程序只将每个值添加到数据库中，我不知道如何做下一部分，它应该做一些类似的事情：

```
if column 1 contains (textbox)
column 2 = column 2 + 1

else column 1 doesnt contain (textbox)
add to column 1 
```

我只是在学习 C#，这几乎是我必须做的第一个 SQL，所以请保持任何答案简单。

这是当前工作的代码的一部分。

```
System.Data.SqlClient.SqlCommandBuilder cb;
cb = new System.Data.SqlClient.SqlCommandBuilder(da);
DataRow dRow = ds1.Tables["Tags"].NewRow();
dRow[0] = txtSplittext.Text;
dRow[1] = 1;
ds1.Tables["Tags"].Rows.Add(dRow);
MaxRows = MaxRows + 1;
inc = MaxRows - 1;
da.Update(ds1, "Tags"); 
```

感谢你给与我的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:53:44.563

You want a basic update statement in SQL:

```
update table
    set column_2 = (case when charindex([textbox], column_1) > 0 then column_2 + 1 else column_2 end),
    set column_1 = (case when charindex([textbox], column_1) = 0 then column_1 + 1 else column_1 end) 
```

(You could alternatively use the SQL "like" command, which should work in all dialects. I've chosen a Microsoft equivalent that is likely to be more efficient.)

In the above SQL, [textbox] represents the value in the text box. You can insert it into such a query either using dynamic SQL or as a parameter.

I am also assuming that you only want to do this for one row. If so, then this needs a where clause to identify the row (preferably with a primary key).

# input - 在 Win 8 DirectX Metro 应用程序中使用内置软键盘

> ID：10368588
> 
> 赞同：1
> 
> 时间：2012-04-28T23:57:18.467
> 
> 标签：input, keyboard, directx, windows-8, windows-runtime

我的应用程序的一部分要求用户输入文本（用户名/密码和聊天），我不想创建自己的键盘代码。

1.  有没有办法使用 DirectX Metro Apps 的内置软件键盘？我只需要一种让触摸用户输入文本的方法。
2.  如果可能，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:58:05.457

我不确定 DirectX 本身是否具有内置功能，但您可以[将 DirectX 与 XAML 混合使用](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh825871.aspx)- 例如，您可以使用[SwapChainBackgroundPanel 来](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.swapchainbackgroundpanel.aspx)进行所有 DirectX 渲染，并覆盖 XAML 文本框，您可以在其中捕获文本输入。

# c# - 为什么抛出 ThreadAbortException 不会杀死进程？

> ID：10368589
> 
> 赞同：0
> 
> 时间：2012-04-28T23:58:02.647
> 
> 标签：c#, .net, exception-handling

我们都知道，在c#中，如果有任何异常被抛出，它会立即终止或杀死进程，而`ThreadAbortException`对于这个异常却不是这样。为什么这个异常会有特殊的行为呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:03:33.293

因为主线程可以选择取消异常和/或等待线程完成然后继续处理。

> 当调用 Abort 方法来销毁线程时，公共语言运行时会引发 ThreadAbortException。ThreadAbortException 是一个可以被捕获的特殊异常，但它会在 catch 块结束时自动再次引发。当引发此异常时，运行时会在结束线程之前执行所有 finally 块。因为线程可以在 finally 块中进行无限计算或调用 Thread.ResetAbort 来取消中止，所以不能保证线程将永远结束。如果要等到中止的线程结束，可以调用 Thread.Join 方法。Join 是一个阻塞调用，直到线程真正停止执行才返回。

请参阅[ThreadAbortException 类](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:24:05.843

这是因为 ThreadAbortException 应该只终止抛出它的线程。但是可能还有另一个线程仍在运行，因此在所有前台线程退出之前进程不会退出。

# assembly - 在 nasm 中源寄存器周围有或没有 [] 括号的 mov 指令的含义

> ID：10368590
> 
> 赞同：5
> 
> 时间：2012-04-28T23:58:06.657
> 
> 标签：assembly, x86, nasm, cpu-registers, mov

我对大会有点生疏。我想问你们一些问题。

1.  这些汇编指令在 NASM 中有效吗？
2.  有什么区别，我们应该什么时候使用它们？

```
 mov EAX, EBX 
```

对比

```
 mov EAX, [EBX] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-29T00:08:59.833

```
mov EAX, EBX 
```

将 EBX 的值移动到 EAX 中，而

```
mov EAX, [EBX] 
```

将 EBX 中的地址值（因此 EBX 必须包含有效地址，否则会出现分段错误）到 EAX 中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-29T00:04:06.513

你会读C吗？如果是这样，那么给定先前的定义`int a, b;`，第一条指令或多或少等同于

```
a = b; 
```

然而，给定先前的定义`int a, *b;`，第二条指令或多或少等同于

```
a = *b; 
```

除了 EAX 和 EBX 是寄存器而不是堆栈驻留变量。

可以说的还有很多很多，但前面的内容给了你这个想法。

（顺便说一下，NASM——我承认在过去五年中没有使用过——与 GNU 的汇编器相比，它以相反的顺序呈现参数。NASM 将目标寄存器放在左边，源寄存器放在右边，而 GNU反之亦然。与 GNU 的“AT&T 语法”相比，NASM 的约定也称为“英特尔语法”。）

# android - 如何删除表sql中的所有内容

> ID：10368592
> 
> 赞同：0
> 
> 时间：2012-04-28T23:59:26.360
> 
> 标签：android, sqlite

我试图弄清楚如何通过单击按钮来删除整个表格，所以可以说我有一个名为 Delete 的按钮，我想按下它并删除表格中的所有内容。
我试过了，但没有用我不知道在按钮上放什么

```
void deleteAll()
{
    SQLiteDatabase db= ourHelper.getWritableDatabase();
    db.delete(DATABASE_TABLE, null, null);
} 
```

代码：

```
package f.s.l;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class HotOrNot {
public static final String KEY_ROWID ="_id";
public static final String KEY_NAME ="persons_name";
public static final String KEY_HOTNESS ="persons_hotness";

private static final String DATABASE_NAME ="HotOrNotdb";
private static final String DATABASE_TABLE ="peopleTable";
private static final int DATABASE_VERSION =1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

public DbHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
        KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
        KEY_NAME + " TEXT NOT NULL, " +
        KEY_HOTNESS + " TEXT NOT NULL);"
    );
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
    onCreate(db);
}
}

public HotOrNot(Context c){
    ourContext =c;
}

public HotOrNot open() throws SQLException {
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close(){
    ourHelper.close();
}

public long createEntry(String name, String hotness) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, name);
    cv.put(KEY_HOTNESS, hotness);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public String getData() {
    // TODO Auto-generated method stub
    String [] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_HOTNESS};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iHotness = c.getColumnIndex(KEY_HOTNESS);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + c.getString(iRow) + " "+ c.getString(iName) + " " + c.getString(iHotness) + "\n";
}

return result;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:30:47.167

你可以做

```
db.execSQL("DELETE * FROM " + DATABASE_TABLE); 
```

这不会删除表，但会删除表中的所有行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T03:53:39.210

尝试使用 drop table 命令，我认为它必须是 drop table

# backbone.js - 骨干点击事件未触发

> ID：10368596
> 
> 赞同：3
> 
> 时间：2012-04-29T00:00:14.977
> 
> 标签：backbone.js, coffeescript, backbone-events

所以我有一个 Backbone 视图，我在其中声明它是 className。我正在尝试将单击事件绑定到该类。所以是这样的：

```
className: "question"
events:
    "click .question": -> console.log("clicked") 
```

这似乎不起作用。这似乎是因为元素不在视图本身内。因此，如果我在模板中创建一个元素，我可以很好地绑定到它。我应该能够绑定到视图本身对吗？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T00:28:13.357

来自[精美手册](http://backbonejs.org/#View-delegateEvents)：

> **委托事件** `delegateEvents([events])`
> 
> [...] 事件以`{"event selector": "callback"}`. `callback`可以是视图上方法的名称，也可以是直接的函数体。省略`selector`会导致事件绑定到视图的根元素 ( `this.el`)。

所以你希望你`events`看起来像这样：

```
events:
    'click': -> console.log('clicked') 
```

演示：http: [//jsfiddle.net/6W6QE/](http://jsfiddle.net/6W6QE/)

# c++ - std::vector 的复制构造函数是如何操作的？

> ID：10368602
> 
> 赞同：16
> 
> 时间：2012-04-29T00:01:43.063
> 
> 标签：c++, string, vector, std

`std::vector<std::string>`调用以下代码时如何初始化自身

```
std::vector<std::string> original;
std::vector<std::string> newVector = original; 
```

看起来好像复制构造函数会在`std::vector<std::string> new`期间被调用`newVector = original`，但是`std::string`' 是如何被带入的`orginal`？它们是复制品还是新品`std::string`？内存`newVector[0]`也是一样的`original[0]`。

我问的原因是说我做了以下

```
#include <vector>
#include <string>
using namespace std;

vector<string> globalVector;

void Initialize() {
    globalVector.push_back("One");
    globalVector.push_back("Two");
}

void DoStuff() {
    vector<string> t = globalVector;
}

int main(void) {
    Initialize();
    DoStuff();
} 
```

`t`将超出`DoStuff`（在非优化构建上）的范围，但如果它`t`只是用指向`std::string`in 的指针填充`globalVector`，可能会调用析构函数并`std::string`删除使用的内存，用于`globalVector[0]`填充垃圾`std::string`的 after`DoStuff`是叫？

一个坚果壳，我基本上是在问，当`std::vector`调用复制构造函数时，里面的元素是如何复制的？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-29T00:08:56.720

`std::vector`和大多数其他标准库容器按值存储元素。在插入或复制容器时复制元素。`std::string`就您对数据的使用而言，它还维护自己的数据副本。

# c# - C# 中的 GetElementsByTagName

> ID：10368605
> 
> 赞同：0
> 
> 时间：2012-04-29T00:02:49.967
> 
> 标签：c#, browser

我有这段代码：

```
string x = textBox1.Text;
string[] list = x.Split(';');
foreach (string u in list)
{
    string url = "http://*********/index.php?n=" + u;
    webBrowser1.Navigate(url);
    webBrowser1.Document.GetElementsByTagName("META");
} 
```

我试图让`<META>`标签输出到一个消息框，但是当我测试它时，我不断收到这个错误：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:07:50.613

您的问题是您在`Document`文档加载之前访问对象 - `WebBrowser`s 是异步的。[只需使用HTML Agility Pack](http://htmlagilitypack.codeplex.com/)之类的库来解析 HTML 。

以下是`<meta>`使用 HTML Agility Pack 获取标签的方法。（假设`using System.Net;`和`using HtmlAgilityPack;`。）

```
// Create a WebClient to use to download the string:
using(WebClient wc = new WebClient()) {
    // Create a document object
    HtmlDocument d = new HtmlDocument();

    // Download the content and parse the HTML:        
    d.LoadHtml(wc.DownloadString("http://stackoverflow.com/questions/10368605/getelementsbytagname-in-c-sharp/10368631#10368631"));

    // Loop through all the <meta> tags:
    foreach(HtmlNode metaTag in d.DocumentNode.Descendants("meta")) {
        // It's a <meta> tag! Do something with it.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T00:06:08.273

在完成加载之前，您不应尝试访问该文档。在事件的处理程序中运行该代码[`DocumentCompleted`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)。

但马蒂是对的。如果您只需要阅读 HTML，那么您不应该使用`WebBrowser`. 只需获取文本并使用 HTML 解析器对其进行解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T16:41:35.617

您可以直接从 WebBrowser 控件中检索 META 标记和任何其他 HTML 元素，无需 HTML Agility Pack 或其他组件。

就像 Mark 说的，首先等待 DocumentCompleted 事件：

```
webBrowser.DocumentCompleted += WebBrowser_DocumentCompleted; 
```

然后，您可以从 HTML 文档中捕获任何元素和内容。以下代码获取标题和元描述：

```
private void WebBrowser_DocumentCompleted(object sender, System.Windows.Forms.WebBrowserDocumentCompletedEventArgs e)
{
        System.Windows.Forms.WebBrowser browser = sender as System.Windows.Forms.WebBrowser;
        string title = browser.Document.Title;
        string description = String.Empty;
        foreach (HtmlElement meta in browser.Document.GetElementsByTagName("META"))
        {
            if (meta.Name.ToLower() == "description")
            {
                description = meta.GetAttribute("content");
            }
        }
} 
```

# iphone - 在 iOS 上，如果 UIGestureRecognizer 是抽象类，为什么可以实例化？

> ID：10368606
> 
> 赞同：0
> 
> 时间：2012-04-29T00:02:50.367
> 
> 标签：iphone, objective-c, ios, abstract-class

以下代码使用[UIGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)：

```
UIGestureRecognizer *gestureRecog = [[UIGestureRecognizer alloc] 
                                         initWithTarget:self 
                                         action:@selector(handletap:)];

[self.view addGestureRecognizer:gestureRecog]; 
```

可以实际编译运行。我认为[抽象类](http://en.wikipedia.org/wiki/Abstract_class)不能被实例化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T00:18:54.333

抽象类不是 Objective-C 中的语言特性（例如，与 Java 不同），所以它不是编译器可以强制执行的。

当一个类在文档中被标记为抽象时，它只是一个提示它*打算*如何使用，但运行时和编译器都不会真正阻止你直接实例化它。

Objective-C 编程语言指南中关于[抽象类](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-BAJCCBHC)的部分实际上指出这`NSView`是一个抽象类的示例，您有时可以在没有子类化的情况下使用它，因此这个概念不像其他语言/框架那样严格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T00:32:26.840

感谢 omz 的回答。这是Apple文档的相关摘录：

> 抽象类
> 
> 有些类的设计只是或主要是为了让其他类可以继承它们。这些抽象类将许多子类可以使用的方法和实例变量组合成一个公共定义。抽象类本身通常是不完整的，但包含有用的代码，可以减少其子类的实现负担。（因为抽象类必须有子类才有用，它们有时也称为抽象超类。）
> 
> 与其他一些语言不同，Objective-C 没有将类标记为抽象的语法，也不会阻止您创建抽象类的实例。
> 
> NSObject 类是 Cocoa 中抽象类的典型示例。你永远不会在应用程序中使用 NSObject 类的实例——它对任何事情都没有好处；这将是一个通用对象，能够不做任何特别的事情。
> 
> 另一方面，NSView 类提供了一个抽象类的示例，您可能偶尔会直接使用它的实例。
> 
> 抽象类通常包含有助于定义应用程序结构的代码。当您创建这些类的子类时，新类的实例可以毫不费力地融入应用程序结构并自动与其他对象一起工作。

# c++ - 如何使用 macports 安装 clang 3.1？（OSX，雪豹）

> ID：10368617
> 
> 赞同：5
> 
> 时间：2012-04-29T00:04:34.027
> 
> 标签：c++, macos, compiler-construction, clang, macports

我想使用macports安装最新的clang（3.1）编译器（我使用emacs而不是xcode，而且xcode附带的clang版本更旧）。macports 似乎有最新版本的 gcc，但是当我输入“port list clang”时，唯一显示的版本是 2.9。我使用 C++11 功能，所以我想使用最新版本。

我在 MBP 上跑雪豹。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T00:16:12.743

Clang 在 MacPorts 上有几个不同的版本：

```
$ port search clang

clang @2.9 (lang)
    C, C++, Objective C and Objective C++ compiler

clang-2.9 @2.9 (lang)
    C, C++, Objective C and Objective C++ compiler

clang-3.0 @3.0 (lang)
    C, C++, Objective C and Objective C++ compiler

clang-3.1 @3.1-r154872 (lang)
    C, C++, Objective C and Objective C++ compiler

clang-devel @3.0 (lang)
    C, C++, Objective C and Objective C++ compiler

clang_select @0.1 (sysutils)
    common files for selecting default clang version

Found 6 ports. 
```

因此，如果您只安装`clang`端口，它将安装 2.9 版。如果你想要 3.1，安装`clang-3.1`端口。您还可以安装`clang_select`，这是一个实用程序，可让您在 Clang 的多个安装之间轻松切换；没有它，您每次都必须手动指定所需的 Clang 二进制文件的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T00:10:05.490

只需指定版本号： `port list clang-3.1`

对我来说工作得很好。我在 Lion，但我不明白为什么会有所作为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T00:10:44.440

由于 macports 存储库似乎没有最新的 clang，我建议[从源代码构建 clang](http://clang.llvm.org/get_started.html)，然后继续[制作新的 macports 包](http://guide.macports.org/#development)。

# java - 如何在 Java 中将任意 JSON 转换为可用的结构

> ID：10368619
> 
> 赞同：10
> 
> 时间：2012-04-29T00:04:54.273
> 
> 标签：java, json, parsing, twitter, gson

我正在尝试使用 gson 将此返回的 JSON 转换为某种数据结构，以便我可以提取有用的数据。

例如：

[http://search.twitter.com/search.json?q=test&rpp=1](http://search.twitter.com/search.json?q=test&rpp=1)

回报：

```
{
    "completed_in":0.028,
    "max_id":196386333906837504,
    "max_id_str":"196386333906837504",
    "next_page":"?page=2&max_id=196386333906837504&q=test&rpp=1",
    "page":1,
    "query":"test",
    "refresh_url":"?since_id=196386333906837504&q=test",
       "results":[
          {
             "created_at":"Sat, 28 Apr 2012 23:52:05 +0000",
             "from_user":"della_ky",
             "from_user_id":525641596,
             "from_user_id_str":"525641596",
             "from_user_name":"kydella modeste",
             "geo":null,
             "id":196386333906837504,
             "id_str":"196386333906837504",
             "iso_language_code":"en",
             "metadata":{
                "result_type":"recent"
             },
             "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/2159990525\/webcam-toy-photo3_20_2__normal.jpg",
             "profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/2159990525\/webcam-toy-photo3_20_2__normal.jpg",
             "source":"&lt;a href=&quot;http:\/\/mobile.twitter.com&quot; rel=&quot;nofollow&quot;&gt;Mobile Web&lt;\/a&gt;",
             "text":"RT @Y__U__NOOO: #SongsIKnowOffByHeart ALL SONGS I LISTEN TO. BRAIN, Y U NO REMEMBER TEST ANSWERS LIKE THAT?!?",
             "to_user":null,
             "to_user_id":null,
             "to_user_id_str":null,
             "to_user_name":null
          }
       ],
       "results_per_page":1,
       "since_id":0,
       "since_id_str":"0"
    } 
```

最终，我希望能够输出带有发件人姓名和推文日期/时间的推文列表。

我已经通读了 gson 文档，但老实说，这让我头疼——那里有很多新概念。

我是否需要定义一个完全映射到 JSON 结构的类，然后才能填充该类的实例？如果是这样，这似乎非常不灵活/费力。理想情况下，我正在寻找可以处理任何形式的 JSON 并给我一个可以自动使用的结构的东西......

有人能给我一些指示吗？作为新手 - 越详细，用最少的音节就越好！

更新 - 感谢我已经收到的回复，我已经尝试将一个类放在一起来捕获 twitter JSON。但是，由于 JSON 有一个嵌入的 ArrayList 对象我有点挣扎......到目前为止我有

```
public class tweetData {
    private double completed_in;
    private long max_id;
    private long max_id_str;
    private String next_page;
    private int page;
    private String query;
    private String refresh_url;
    private List<tweetDetails> tweets = new ArrayList<tweetDetails>();
} 
```

和

```
public class tweetDetails {
    private String created_at;
    private String from_user;
    private long from_user_id;
    private long from_user_id_str;
    private String from_user_name;
    private String geo;
    private long id;
    private long id_str;
    private String iso_language_code;
//  "metadata":
//  {
//  "result_type":"recent"
//  },
    private String profile_image_url;
    private String profile_image_url_https;
    private String source;
    private String text;
    private String to_user;
    private String to_user_id;
    private String to_user_id_str;
    private String to_user_name;
} 
```

我正在实例化

```
URI uri = new URI("http", "search.twitter.com", "/search.json", "q="+ searchTerms + "&rrp=" + RRP, null);
URL twitterSearch = uri.toURL();
URLConnection yc = twitterSearch.openConnection();
JsonReader reader = new JsonReader(new InputStreamReader(yc.getInputStream()));
Gson gson = new Gson();
tweetData data = gson.fromJson(reader, tweetData.class);
System.out.println(data); 
```

基本名称：值已正确填充，但 ArrayList 未正确填充。

```
tweetData : 0.17196614959919140865196614959919140865?page=2&max_id=196614959919140865&q=test1test?since_id=196614959919140865&q=testSIZE 0[] 
```

所以，我仍然有点挣扎 - 任何更多的提示都非常感谢！

蒂亚，汤姆

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T02:14:48.773

> 我是否需要定义一个完全映射到 JSON 结构的类，然后才能填充该类的实例？如果是这样，这似乎非常不灵活/费力。

是的。[GSON](http://code.google.com/p/google-gson/)是一个库，可用于将 Java 对象转换为其 JSON 表示形式。它还可用于将 JSON 字符串转换为等效的 Java 对象。这非常强大，因为您可以从 JSON 表示中自动实例化您的 Java 对象。假设您的 JSON 不改变其结构，您只需定义***一次***适当的 Java 对象表示。

> 理想情况下，我正在寻找可以处理任何形式的 JSON 并给我一个可以自动使用的结构的东西......

但是，如果您不想要自动序列化/反序列化，请尝试查看更简单的库，例如[java.net/projects/jsonp](https://java.net/projects/jsonp/)。

您可以通过查询键从中提取内容：

```
final JSONObject json = new JSONObject(theJsonString);
final String id = json.getString("max_id");
final JSONArray results = json.getJSONArray("results");
final String user = results.getJSONObject(2).getString("from_user"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T02:14:29.580

Gson 实际上为您完成了所有的序列化。所以是的，您必须自己编写课程。对您来说，这看起来既不灵活又费力，但这仅仅是因为该库不是为您所要求的而设计的（它不会解析“任意”JSON）。

我建议至少考虑编写课程并使用 gson。我这么说的原因是因为无论哪种方式，您的应用程序逻辑都必须期待一种非常具体的格式，并且在 Java 类中写出该格式会使事情变得更整洁。这是一个很好的[指南](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)，可以帮助您以这种方式开始。

如果您想简单地解码 JSON 而不将其序列化为 Java 类（恕我直言，这是使用“任意”JSON 的唯一方法），您将需要使用另一个库。试试[这个](http://code.google.com/p/json-simple/)。它允许您解码 JSON，并通过从中获取值来使用它（如本问题所述：[Convert a JSON string to object in Java ME?](https://stackoverflow.com/questions/1395551/convert-a-json-string-to-object-in-java)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-24T20:43:34.050

有一些工具可以进行 gson 到模式映射。您提供一些示例 JSON 响应，并为您创建访问它们的 java 类。

[http://www.jsonschema2pojo.org/](http://www.jsonschema2pojo.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-02T20:07:45.930

[Gson](https://github.com/google/gson)是一个狡猾的野兽！或者至少在这个问题被问到之后的几年里变得如此。

您可以将**Object.class**作为第二个参数传递给**fromJson()**方法，它会将您的 Json 解析为**LinkedTreeMap**和**ArrayList**的合理结构。

```
Object result = (new Gson()).fromJson(jsonString, Object.class) 
```

不仅如此，您还可以通过将某个字段定义为 Object来真正进行***部分解析并在对象结构的任何级别留下松散的结尾！***

**然后， Gson**会将 Json 解析为您的结构，并且您的 Object 类型字段将包含上述**LinkedTreeMap**和**ArrayList**的结构。

例如，您可以定义一个类

```
Person {
    String name;
    Object details;
} 
```

（想象一下，你主要关心这个人的名字，但也可能在某个地方想要详细信息。例如，记录他们。）

然后您可以将以下 Json作为第一个参数传递给**fromJson(input, Person.class)方法**

```
{ 
    "name": "Carlsson", 
    "details": {
        "address": "Stockholm",
        "phones": [
            "work": "233-322-233-322",
            "home": "none"
        ]
    }
} 
```

结果将具有填充**“Carlsson”**字符串的**名称字段，****详细信息**字段将包含带有键**“address”**和**“phones”**等的**LinkedTreeMap 。**

# php - PHP 中的抽象常量 - 强制子类定义一个常量

> ID：10368620
> 
> 赞同：58
> 
> 时间：2012-04-29T00:05:00.263
> 
> 标签：php, constants, abstract

我注意到你不能在 PHP 中使用抽象常量。

有没有一种方法可以强制子类定义一个常量（我需要在其中一个抽象类内部方法中使用它）？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2017-03-31T07:26:59.733

这可能有点“黑客”，但只需很少的努力就可以完成这项工作，但如果未在子类中声明常量，则会出现不同的错误消息。

自引用常量声明在语法上是正确的并且解析没有问题，如果该声明在运行时实际执行，则只会抛出错误，因此*必须*在子类中覆盖抽象类中的自引用声明，否则将出现致命错误: `Cannot declare self-referencing constant`.

在这个例子中，抽象的父类`Foo`强制它的所有子类声明变量`NAME`。此代码运行良好，输出`Donald`. *但是，如果*子类`Fooling`没有声明变量，就会触发致命错误。

 *```
<?php

abstract class Foo {

    // Self-referential 'abstract' declaration
    const NAME = self::NAME;

}

class Fooling extends Foo {

    // Overrides definition from parent class
    // Without this declaration, an error will be triggered
    const NAME = 'Donald';

}

$fooling = new Fooling();

echo $fooling::NAME; 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-29T00:06:57.203

A`constant`是一个`constant`；据我所知，PHP中没有`abstract`或没有`private`常量，但您可以解决以下问题：

**示例抽象类**

```
abstract class Hello {
    const CONSTANT_1 = 'abstract'; // Make Abstract
    const CONSTANT_2 = 'abstract'; // Make Abstract
    const CONSTANT_3 = 'Hello World'; // Normal Constant
    function __construct() {
        Enforcer::__add(__CLASS__, get_called_class());
    }
} 
```

**这会运行良好**

```
class Foo extends Hello {
    const CONSTANT_1 = 'HELLO_A';
    const CONSTANT_2 = 'HELLO_B';
}
new Foo(); 
```

**酒吧**会返回错误

```
class Bar extends Hello {
    const CONSTANT_1 = 'BAR_A';
}
new Bar(); 
```

**Songo** 会返回错误

```
class Songo extends Hello {

}
new Songo(); 
```

**执行者类**

```
class Enforcer {
    public static function __add($class, $c) {
        $reflection = new ReflectionClass($class);
        $constantsForced = $reflection->getConstants();
        foreach ($constantsForced as $constant => $value) {
            if (constant("$c::$constant") == "abstract") {
                throw new Exception("Undefined $constant in " . (string) $c);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-04-29T00:24:27.803

不幸的是，不是……一个常数正是它在锡上所说的，常数。一旦定义了就不能重新定义，这样就不可能通过PHP的抽象继承或者接口来要求它的定义。

但是...您可以检查该常量是否在父类的构造函数中定义。如果没有，则抛出异常。

```
abstract class A
{
    public function __construct()
    {
        if (!defined('static::BLAH'))
        {
            throw new Exception('Constant BLAH is not defined on subclass ' . get_class($this));
        }
    }
}

class B extends A
{
    const BLAH = 'here';
}

$b = new B(); 
```

从您的初始描述来看，这是我能想到的最佳方式。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-04-29T00:18:22.380

不，但您可以尝试其他方法，例如抽象方法：

```
abstract class Fruit
{
    abstract function getName();
    abstract function getColor();

    public function printInfo()
    {
        echo "The {$this->getName()} is {$this->getColor()}";
    }
}

class Apple extends Fruit
{
    function getName() { return 'apple'; }
    function getColor() { return 'red'; }

    //other apple methods
}

class Banana extends Fruit
{
    function getName() { return 'banana'; }
    function getColor() { return 'yellow'; }

    //other banana methods
} 
```

或静态成员：

```
abstract class Fruit
{
    protected static $name;
    protected static $color;

    public function printInfo()
    {
        echo "The {static::$name} is {static::$color}";
    }
}

class Apple extends Fruit
{
    protected static $name = 'apple';
    protected static $color = 'red';

    //other apple methods
}

class Banana extends Fruit
{
    protected static $name = 'banana';
    protected static $color = 'yellow';

    //other banana methods
} 
```

[来源](http://www.sitepoint.com/forums/showthread.php?629565-Abstract-constants)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-20T19:07:22.917

在 php 7.2 中测试，但应该从 5.3 开始，您可以利用后期静态绑定来存档此行为。它将引发与异常相同的致命错误，因为在大多数情况下，您不想在运行时处理**致命**错误。如果您愿意，您可以轻松实现自定义错误处理程序。

所以以下对我有用：

```
<?php

abstract class Foo {

    public function __construct() {
        echo static::BAR;
    }

}

class Bar extends Foo {
    const BAR = "foo bar";
}

$bar = new Bar();    //foo bar 
```

如果删除，`const`您将获得：

```
Fatal error: Uncaught Error: Undefined class constant 'BAR' in ... 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-10-24T03:11:02.340

也许我遗漏了一些东西，但使用后期静态绑定对我有用。这对你的问题有用吗？

```
abstract class A{
    const NAME=null;

    static function f(){
        return static::NAME;
    }
}

class B extends A{
    const NAME='B';    
}

B::f(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-04-14T05:00:29.930

PHP 接口支持常量。这并不理想，因为您必须记住在每个子类上实现接口，因此它部分地违背了目的。*

# javascript - 如何使用 google maps api v3 突出显示一个国家/地区？

> ID：10368622
> 
> 赞同：4
> 
> 时间：2012-04-29T00:05:39.117
> 
> 标签：javascript, google-maps-api-3, kml

我正在尝试实现类似于此的效果：

![http://www.state.gov/cms_images/france_map_2007-worldfactbook2.jpg](../Images/e150c4c327e783e9b15d8354ea7c5af5.png)

请注意法国是如何比其他国家明亮的。它有“焦点”。我一直在探索 API，看起来我应该用它`kmlLayers`来实现这个效果。这个对吗？如果是这样，我如何利用甚至找到 kml 来做到这一点？我还能怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:44:17.670

我认为这些链接上的信息将对您有所帮助：

1.  Valery Hronusov 创建的[世界国家](https://groups.google.com/a/googleproductforums.com/forum/?fromgroups#!msg/gec-tools/rNjNRYbaWSI/5x5vfgxc0w0J)KML
2.  Filipumme 创建的[世界首都的 KML](https://groups.google.com/a/googleproductforums.com/forum/?fromgroups#!msg/gec-tools/wYh3esMW6XM/XNcwYwlTuB0J)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:16:41.877

我发现这可以用多边形和“洞”来完成。谷歌有[这个五角大楼的例子](http://gmaps-samples-v3.googlecode.com/svn/trunk/poly/pentagon.html)

唯一的缺点是多边形需要手工绘制（也许有一个国家轮廓数据库？）我现在使用[这个工具](http://www.birdtheme.org/useful/v3tool.html)来协助手动绘制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T01:10:39.237

此演示向您展示如何：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/layer-kml](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-kml)

好吧，获得了法国的 kml；工作演示：[http ://dev.bowdenweb.com/maps/gmaps/layer-kml-02.html](http://dev.bowdenweb.com/maps/gmaps/layer-kml-02.html)

# core-data - 将具有核心数据实体的 NSMutableArray 的状态保存为内容

> ID：10368623
> 
> 赞同：0
> 
> 时间：2012-04-29T00:06:07.693
> 
> 标签：core-data, ios5, datapersistance

设想：

我正在从我的核心数据数据库中获取不同的实体对象，并将它们全部收集到一个 NSMutableArray 中。我对数组中的数据进行按摩并保存回数据库没有问题。我需要在应用程序启动之间保存数组的状态。

问题：保存数组中实体对象的描述以及它们在数组中的顺序的最佳方法是什么？（我已经尝试将数组保存到字典中，将实体对象编码到 NSData。没有工作，因为我无法解码实体对象。）

恢复数组并从数据库中获取实体对象的最佳方法是什么？

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:53:27.300

你有几个不同的选择。如果“数组”中对象的顺序没有太大变化，您可以添加一个实体“MyFavoriteEntities”或类似的实体，并赋予它与您想要包含的实体的多对有序关系。

然后，您所做的就是加载单个 MyFavoriteEntities 对象，并通过该关系访问所有其他对象。

注意：目前，iCloud 不支持有序关系。

另一种选择（在很多情况下，首选方法）是向您的实体添加“排序”属性。根据对象的顺序保持更新。然后，您可以通过为“ordering”字段提供 SortDescriptor 来轻松获取对象。现在，您的对象将按您想要的顺序获取。

# javascript - 是` `到` ` 有效吗？

> ID：10368629
> 
> 赞同：1
> 
> 时间：2012-04-29T00:07:33.373
> 
> 标签：javascript, html

`<element />`用to替换元素是否有效`<element></element>`。在这种情况下，我想拥有，

`<input {attributes}></input>`

只是这样我就可以在其中附加验证数据......这也可以从一个`<br />`或`<hr />`等中实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:11:07.787

`<input>`标签没有 a ，`</input>`也不需要一个。`<br>`和相同`<hr>`。您可以使用如下自定义属性将验证数据作为输入标签（或任何标签）上的属性：

```
<input type="text" data-validate="num"> 
```

如果验证的意思是要在输入标签附近显示的单独 HTML，则将其放在标签之前或之后的自己的`<input>`标签中：

```
<input type="text"><span class="validHint">This field accepts only numbers</span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T00:39:55.740

`<input></input>`在 HTML4.01 和 HTML5 中均无效。

根据[W3C 的验证服务](http://validator.w3.org/)：（原因突出显示）

> 验证输出：1 错误
> 
> 第 9 行，第 15 列：**杂散结束标记输入。**
> <输入></输入>

所以给你，你不能`<input>`用`<input></input>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T00:26:37.873

如果要将数据附加到元素，为什么不使用`data-*`属性？（例如`<input data-color="red" />`）这是有效的，并且应该同样容易实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T05:58:29.367

在 HTML 4.01 及之前的经典 HTML 中`<input></input>`是无效的。实际上，浏览器会忽略杂散结束标记。他们不会忽略标签之间的内容，因此`<input>foo</input>`与`<input>foo`. HTML5 不建议改变这一点。

根据 XHTML 规范，在 XHTML`<input></input>`中有效，但不应在 Web 上使用。如果在标签之间放置任何内容，它就会变得无效，因为该`input`元素已使用 EMPTY 内容模型声明。

所以你应该采取完全不同的方法。这实际上取决于您要达到的目标，并且应该在其他标题下进行讨论。根据问题的不同，解决方案可能是新的 HTML5 属性之一，或者一个`data-`属性，或者一个隐藏字段，或者以某种方式隐藏的元素，或者可能只是文档树中的数据。

# javascript - 如何判断它是对象还是数组？

> ID：10368632
> 
> 赞同：0
> 
> 时间：2012-04-29T00:08:11.507
> 
> 标签：javascript, typeof

我想知道函数中变量的类型。所以，我使用`typeof`并喜欢这样：

```
randomFunctionName: function(obj){
    switch(typeof obj){
        case "object":
           //Something
        case "text":
            //Something else
    }
} 
```

但问题是，我不知道`obj`是数组还是对象，因为

```
typeof [] === "object"  //true
typeof {} === "object"  //true 
```

那么，我怎样才能将它们分开呢？它们之间有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T00:13:39.423

数组是一个对象。您可以测试对象是否为数组，如下所示：

```
Object.prototype.toString.apply(value) === '[object Array]'; 
```

您可以将其包装成一个函数，如下所示：

```
function isArray(a)
{
    return Object.prototype.toString.apply(a) === '[object Array]';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T00:14:00.720

检查构造函数：

```
[].constructor == Array  //true
{}.constructor == Object  //true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T12:46:52.750

从 ECMAScript 5 开始，您可以使用本机方法：

```
Array.isArray( maybeArray ); 
```

如果担心兼容性，您可以使用[Underscore.js](http://underscorejs.org/#isArray)或[jQuery](http://api.jquery.com/jQuery.isArray/)：

```
_.isArray( maybeArray ); // will use the native method if available
$.isArray( maybeArray ); 
```

这种实用程序也存在于 AngularJS 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T00:12:30.713

这很简单。尝试类似的东西

```
var to = {}.toString;
alert(to.call([])); //[object Array]
alert(to.call({})); //[object Object] 
```

# event-handling - 事件处理不适用于以下 wxpython 代码。运行后没有错误。显示的框架/按钮

> ID：10368634
> 
> 赞同：0
> 
> 时间：2012-04-29T00:08:32.640
> 
> 标签：event-handling, wxpython

*运行时没有错误。除了初始化*之外，没有其他 DEF 工作

 *```
import wx
import os
from spectral import *

class Frame(wx.Frame):
def __init__(self, title):
    wx.Frame.__init__(self, None, title=title, size=(1000,70),style=wx.MINIMIZE_BOX|wx.CLOSE_BOX|wx.RESIZE_BORDER|wx.SYSTEM_MENU|wx.CAPTION|wx.CLIP_CHILDREN)
    self.Bind(wx.EVT_CLOSE, self.OnClose)
    panel=wx.Panel(self,-1)
    self.button=wx.Button(panel,label="Open",pos=(0,0),size=(50,30))
    self.button1=wx.Button(panel,label="Save",pos=(51,0),size=(50,30))
    self.button2=wx.Button(panel,label="ROI",pos=(102,0),size=(50,30))
    self.button3=wx.Button(panel,label="Tone",pos=(153,0),size=(50,30))
    self.slider=wx.Slider(panel,pos=(204,0))
    self.button4=wx.Button(panel,label="Header",pos=(305,0),size=(50,30))
    self.SetBackgroundColour((11, 11, 11))
    self.Bind(wx.EVT_ENTER_WINDOW, self.onMouseOver)
    self.Bind(wx.EVT_LEAVE_WINDOW, self.onMouseLeave)

    self.Bind(wx.EVT_BUTTON, self.OnButtonClick,self.button)
    self.filename=""

def OnButtonClick(self,event):
    dlg=wx.FileDialog(self,message="Choose a file", defaultDir="",defaultFile="", wildcard="*.*", style=wx.OPEN)
    if dlg.ShowModal==wx.ID_OK:
        dlg.Destroy()
def onMouseOver(self, event):
    self.SetBackgroundColor((179, 179, 179))
    self.Refresh()
def onMouseLeave(self, event):
    self.SetBackgroundColor((11, 11, 11))
    self.Refresh()

def OnClose(self, event):
    dlg = wx.MessageDialog(self, 
        "Do you really want to close BBvw ?",
        "Confirm Exit", wx.OK|wx.CANCEL|wx.ICON_QUESTION)
    result = dlg.ShowModal()
    dlg.Destroy()
    if result == wx.ID_OK:
        self.Destroy()

 app = wx.App(redirect=True)
 top = Frame("BBvw")
  top.Show()
 app.MainLoop() 
```

运行时没有错误。除了初始化之外，没有其他 DEF 工作。我想我遗漏了一些明显的东西。单击按钮时，'int' 不可调用错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:39:03.407

OnButtonClick() 方法被调用，但您没有正确调用 ShowModal。你需要把括号放在上面： ShowModal()

那么这将起作用。OnClose() 对我有用。鼠标没有，但我不知道为什么。你应该询问 wxPython 邮件列表中的那些。*

# xcode - UIAlertView 按钮打开一个新视图，但缺少导航和工具栏

> ID：10368635
> 
> 赞同：0
> 
> 时间：2012-04-29T00:08:36.940
> 
> 标签：xcode, navigation, tableview, uialertview

我已经设置了一个表格视图。在主视图中，我使用了一条警告消息：如果用户单击确定按钮，则表视图将打开。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) {
        //do nothing
    }
    else if (buttonIndex == 1) {
        myTableViewController *nextViewController = [[myTableViewController alloc] initWithNibName:nil bundle:nil];
        [self presentViewController:nextViewController animated:YES completion:nil];
    }
} 
```

表格视图确实会显示，但缺少某些部分。顶部有一个导航栏，底部有一个工具栏，都不见了。仅显示单元格。

当我从其他方法过渡到这个表格视图时，它可以正常显示，所以我不知道出了什么问题。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:29:20.963

如果要呈现视图，则需要创建`UINavigationController`

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) {
        //do nothing
    }
    else if (buttonIndex == 1) {
        myTableViewController *nextViewController = [[myTableViewController alloc] initWithNibName:nil bundle:nil];

        /* BEGIN NEW CODE */
        /* Here, you will init the navController with your table controller as the root, this is important. */
        UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:nextViewController];
        [controller setModalPresentationStyle:UIModalPresentationFormSheet];
        [controller setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
        /* END NEW CODE */

        /* You will now present "controller" instead of the table controller */
        [self presentViewController:controller animated:YES completion:nil];
    }
} 
```

我还要注意，您*需要*在`myTableViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:25:30.827

您正在调用 presentViewController ，它不会将其推送到导航堆栈，而是以模态方式将其显示在当前视图的顶部。你想打电话：

```
[self.navigationController pushViewController:nextViewController animated:YES]; 
```

# objective-c - 什么指向指针？

> ID：10368641
> 
> 赞同：3
> 
> 时间：2012-04-29T00:09:54.227
> 
> 标签：objective-c, c, pointers

据我了解，指针包含另一个内存位置的数据地址？
当应用程序运行时，如何跟踪指针的位置？为什么要费心跟踪指针，为什么不直接跟踪指针持有的地址呢？

此外，如果我有以下代码：

```
NSString *string = @"hello";
string = @"bye"; 
```

我正在将存储在命名指针`string`（是命名的指针`string`还是 NSString 对象？）中的值更改为新字符串的地址（“再见”），对吗？
那么我将如何直接更改存储在指针所持有的地址处的对象呢？

（此外，在我使用“跟踪”的地方使用的正确术语是什么？）

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T00:14:31.200

> 为什么要费心跟踪指针，为什么不直接跟踪指针持有的地址呢？

Objective C 中的对象引用实际上是指针，因此每次使用对象（例如`NSString`）时，都会使用指向它的指针 - ( `NSString *`)

> 我正在将存储在名为 string 的指针中的值（是名为 string 的指针还是 NSString 对象？）更改为新字符串的地址（“再见”），对吗？

正确的。

> 那么我将如何直接更改存储在指针所持有的地址处的对象呢？

对于此类字符串，它们是不可变的，您无法更改它们，对于其他对象，您可以调用它们的方法或设置它们的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T00:59:33.443

> 当应用程序运行时，如何跟踪指针的位置？

指针存储为任何其他变量；它们通常采用与 a 相同的大小`unsigned long`，但这绝不是保证，只是为了让您了解它们是如何实现的。编译器可以自由地进行各种各样的优化，因此指针可能存储在内存中，它们可能存储在寄存器中，或者如果它们被*优化掉*，它们可能仅作为假设实体存在。

考虑以下代码：

```
void foo(void) {
    char *c;
    char buf[100];
    for (c=buf; c < buf+100; c++ {
        c = '0';
    }
} 
```

在这种情况下，该变量`c`用于将 ASCII 字符写入数组`0`中的每个字符。可能只存在于寄存器中，因为它不会超出此功能。（有更好的方法来编写此代码。）`buf``c`

考虑以下代码：

```
struct foo {
    char name[10];
    struct foo *next;
} 
```

在这种情况下，成员`next`是指向更多`struct foo`对象的指针——例如，这些事物的链表。这些指针*必须*存储在内存中，因为它们是这些对象契约的一部分——它们必须在那里。也没有办法绕过这些指针——它们指向的对象可以根据程序员的心血来潮替换为其他对象。而且，由于这些对象的数量完全在运行时确定，因此编译器不能只跟踪其[符号表](http://en.wikipedia.org/wiki/Symbol_table)中的地址，就像对堆栈分配的变量一样。

> 那么我将如何直接更改存储在指针所持有的地址处的对象呢？

`"foo"`您的示例在代码中使用字符串使这变得复杂。它们保存在进程地址空间的只读内存中，因此您无法修改它们。（惊喜！）如果你用另一种方法初始化字符串，你可以通过指针修改数据：

```
char *c = malloc(10);
strcpy(c, "hello");
c[0] = 'H';
printf("c: %s\n", c); 
```

这将覆盖通过指针可用的分配空间中的`h`with 。像访问数组一样访问指针与像这样重写指针访问相同：`H``c`

```
c[0] = 'f';
c+0 = 'f'; 
```

而且，实际上，数组访问非常相似——数组的名称与指向其第一个元素的指针相同。

这有点复杂；[Expert C Programming](https://rads.stackoverflow.com/amzn/click/com/0131774298)一书以惊人的细节涵盖了指针，非常物有所值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:02:11.883

问：那么我将如何直接更改存储在指针所持有的地址中的对象？

Ans：如果你想改变你的字符串指针指向的内存位置的内容，开始使用**NSMutableString 。**

NSString 是不可变类型，即您不能更改内容，但可以使指针指向其他地方。在你的情况下，“你好”到“再见”。

# c# - Azure 表存储查询从错误的分区返回数据？

> ID：10368643
> 
> 赞同：2
> 
> 时间：2012-04-29T00:10:06.957
> 
> 标签：c#, .net, asynchronous, azure, cloud

我正在使用 azure 表存储，并且正在尝试快速迭代表。

我一定是做错了，但我终生无法明白为什么；

当我只指定一个分区时，我最终会得到 MULTIPLE 分区的结果。即，如果我只使用“pkey1”来约束查询，我会为“pkey1”返回 1000 个结果，然后为“pkey2”返回 325 个结果

完全困惑这怎么会发生..

这是我正在使用的代码：

```
private CloudTableClient _client;
private string _tableName;
private class QueryState
{
    public CloudTableQuery<T> Ctq;
    public Action<IEnumerable<T>> Populator;
    public ManualResetEvent Mre;
    public string Pkey;

    public QueryState(CloudTableQuery<T> ctq, Action<IEnumerable<T>> populator, ManualResetEvent mre, string pkey)
    {
        Populator = populator;
        Ctq = ctq;
        Mre = mre;
        Pkey = pkey;
    }
}

    public void ParallelQueryWithClause(Action<IEnumerable<T>> populator, string[] partitionKeys)
    {
        List<ManualResetEvent> mre = new List<ManualResetEvent>();
        foreach (string pKey in partitionKeys)
        {
            //_retry.Go(tsc =>
            //    {
                    TableServiceContext tsc =  _client.GetDataServiceContext();
                    ManualResetEvent m = new ManualResetEvent(false);
                    mre.Add(m);
                    CloudTableQuery<T> query = tsc.CreateQuery<T>(_tableName).Where(e => e.PartitionKey == pKey).AsTableServiceQuery<T>();
                    Action<IAsyncResult> act  = null;
                    act = result =>
                        {
                            int retries = 0;
                            while (retries++ < 5)
                            {
                                try
                                {
                                    QueryState qsInternal = result.AsyncState as QueryState;
                                    CloudTableQuery<T> ctq = qsInternal.Ctq;
                                    ResultSegment<T> seg = ctq.EndExecuteSegmented(result);
                                    if (seg.Results.Count() > 0)
                                        populator(seg.Results);
                                    if (seg.ContinuationToken != null)
                                    {
                                        ctq.BeginExecuteSegmented(seg.ContinuationToken, iasync => act(iasync), qsInternal);
                                    }
                                    else
                                    {
                                        m.Set();
                                    }
                                    break;
                                }
                                catch(Exception ex)
                                {
                                    Logger.LogError(ex);
                                }
                            }
                        };
                    query.BeginExecuteSegmented(iasync => act(iasync), new QueryState(query, populator, m, pKey));
                //});
        }
        ManualResetEvent.WaitAll(mre.ToArray());
    } 
```

和示例调用代码：

```
AzureTableStorage<ProductEntity> _ats = new AzureTableStorage<ProductEntity>("Products");
string[] partitions = new string[] { "pkey1" };

    Dictionary<string, int> cntr = new Dictionary<string, int>();
    _ats.ParallelQueryWithClause(p =>
    {
        lock (cntr)
        {
            foreach (ProductEntity pe in p)
            {
                if (cntr.ContainsKey(pe.PartitionKey))
                    cntr[pe.PartitionKey]++;
                else
                    cntr.Add(pe.PartitionKey, 1);
            }
        }
    }, partitions); 
```

希望这是有道理的，有人可以提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:49:18.643

您可能会遇到正在修改闭包值的情况。 [http://marlongrech.wordpress.com/2010/06/02/closures-in-c-can-be-evil/](http://marlongrech.wordpress.com/2010/06/02/closures-in-c-can-be-evil/) 这将使用 pKey 为 null 运行查询，实际上不会通过 pKey 过滤，因此返回所有表中的值。

尝试更换

```
foreach (string pKey in partitionKeys) 
```

和

```
foreach (string pKeyTmp in partitionKeys)
{
   string pKey = pKeyTmp; 
```

# scala - 如何从 Scala API 文档中确定所需的参数？

> ID：10368644
> 
> 赞同：3
> 
> 时间：2012-04-29T00:10:08.873
> 
> 标签：scala, scalaquery

我很难解读 Scala API 文档。

例如，我定义了一个用于数据库的时间戳。

```
def postedDate = column[Timestamp]("posted_date", O NotNull, O Default new Timestamp(Calendar.getInstance.getTimeInMillis), O DBType("timestamp")) 
```

如果我没有阅读几个示例，其中没有在 API 文档中，我该如何构造这个语句？
从[Column](http://scalaquery.org/doc/api/scalaquery-0.9.4/#org.scalaquery.ql.Column)文档中我怎么能知道参数？
我猜它与[TimestampTypeMapperDelegate](http://scalaquery.org/doc/api/scalaquery-0.9.4/#org.scalaquery.ql.basic.BasicTypeMapperDelegates$$TimestampTypeMapperDelegate)有关，但它仍然不清楚如何使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T00:59:52.040

从 Column 的 scaladoc 中要注意的第一件事是它是抽象的，因此如果它的子类，您可能希望直接处理它。例如，命名列。

其他需要注意的是它有一个类型参数，并且构造函数采用相同参数类型的 TypeMapper 的隐式参数。TypeMapper 的文档提供了一个如何创建自定义的示例，但是如果您查看子类，则会发现很多提供的子类（例如时间戳）。参数被声明为隐式这一事实表明范围内可能存在一个，如果是这样，它将自动用作参数而无需明确说明。如果没有满足要求的隐含范围，则必须提供它。

下一个要注意的是，TypeMapper 是一个特征，它扩展了一个带有 BasicProfile 参数和 TypeMapperDelegate 结果的函数。基本上这里发生的是类型映射器的定义与实现分离。这样做是为了支持多种风格的数据库。如果看一下 BasicProfile 的子类，就会发现 ScalaQuery 支持很多，而且我们知道，它们的实现有时完全不同。

如果您追查文档一段时间，您最终会看到 BasicTypeMapperDelegates 特征，其中包含一堆 val，其中包含每种基本类型（包括时间戳）的委托。

BasicTable 定义了一个名为 column 的方法（您已经找到了），而 column 方法的目的是让您不必了解有关 TypeMappers 和 Delegates 的任何内容，只要您使用标准类型。

所以，我想回答你关于 API 文档中是否有足够信息的问题，我个人会说是的，但是可以通过更好地描述类、对象、特征和方法来增强文档。

综上所述，我一直发现利用示例、API 文档甚至项目的源代码提供了一种强大的方式来加快大多数开源项目的速度。坦率地说，其中许多项目（包括 ScalaQuery）为我节省了无数小时的工作，但可能花费了作者无数小时的个人时间来创建和提供。这些不一定是商业产品，我们作为消费者不应该将它们与我们持有的收费产品保持相同的标准。如果您发现文档不足，请贡献！

# javascript - JavaScript 构造函数参数

> ID：10368645
> 
> 赞同：0
> 
> 时间：2012-04-29T00:10:35.730
> 
> 标签：javascript, html, oop, constructor

我一直在关注如何在 HTML5 中制作简单游戏的[本教程](http://www.html5rocks.com/en/tutorials/canvas/notearsgame/)，我遇到了一个我无法理解的参数的有趣用法......这里作者使用单个参数 I 创建了一个名为 Bullet 的构造函数，但是看他如何使用我。这是怎么回事？我不明白：

```
function Bullet(I) {
    I.active = true;

    I.xVelocity = 0;
    I.yVelocity = -I.speed;
    I.width = 3;
    I.height = 3;
    I.color = "#000";

    I.inBounds = function() {
        return I.x >= 0 && I.x <= CANVAS_WIDTH &&
        I.y >= 0 && I.y <= CANVAS_HEIGHT;
    };

    I.draw = function() {
        canvas.fillStyle = this.color;
        canvas.fillRect(this.x, this.y, this.width, this.height);
    };

    I.update = function() {
        I.x += I.xVelocity;
        I.y += I.yVelocity;
    };

    return I;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:13:23.123

根据该教程，`Bullet`它不是构造函数，只是一个接受现有对象、增加（附加）属性并返回对象的函数。然后它将返回的对象（带有附加属性）放入`playerBullets`数组中。

```
playerBullets.push(Bullet({  //the Bullet call, passing an object
    speed: 5,
    x: bulletPosition.x,
    y: bulletPosition.y
})) 
```

从返回的对象`Bullet`将如下所示：

```
{
    //the passed object
    x:...,
    y:...,
    speed:...,
    //the added properties
    xVelocity:...,
    yVelocity:...,
    ...,
    update:function(){...}
} 
```

# django - 使用 celery 在 Django 中实现 SOA

> ID：10368649
> 
> 赞同：3
> 
> 时间：2012-04-29T00:10:59.133
> 
> 标签：django, celery, django-celery

我想用 SOA 设计实现一个 Web 应用程序。我正在考虑将 celery 与 Django 结合使用来做到这一点。但我有一些问题：

1.  这是为 Django 实现 SOA 设计的正确方法吗
2.  假设这是要走的路，我将如何在 Django 框架中完成身份验证。具体来说，我希望身份验证与生产者和消费者模式分离。这样，可以使用 REST api（或其他任何东西）来生成身份验证凭据，并且可以使用消费者（在 Django 框架内）来读取凭据并对其进行操作。

同样，我应该在 Django 中使用 Celery 执行上述操作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T21:05:28.107

消息队列（例如由 celery 代理的 rabbitmq）是处理 SOA 组件之间通信的完美方式。此外，如果您需要在服务之间不共享数据库的情况下进行实时通信，REST 基本上就是为此而生的。在 Django 之上实现 REST 服务有多种选择，其中 Tastypie 和 Django-Rest-Framework 是流行的选择。

至于在组件之间传递身份验证，Django 有几个选项。与流行的观点相反，Django 身份验证框架非常灵活，支持针对您可以为其编写后端的任何内容进行授权/身份验证。有关这方面的文档，请参阅[https://docs.djangoproject.com/en/dev/topics/auth/#writing-an-authentication-backend](https://docs.djangoproject.com/en/dev/topics/auth/#writing-an-authentication-backend)。

已经有很多这样的例子：

*   使用 ZenDesk 的 SSO：[http ://www.jongales.com/blog/2009/05/12/zendesk-remote-authentication-with-django/](http://www.jongales.com/blog/2009/05/12/zendesk-remote-authentication-with-django/)
*   从众多社交网络使用 SSO： [django-social-auth](https://pypi.python.org/pypi/django-social-auth/)或[django-allauth](https://pypi.python.org/pypi/django-allauth/)
*   使用 LDAP： [http ://packages.python.org/django-auth-ldap/](http://packages.python.org/django-auth-ldap/)

至于发布身份验证，选项较少，但包括：

*   萨姆勒： [https ://opensourcemissions.wordpress.com/2010/08/19/django-saml-2-0-identity-provider/](https://opensourcemissions.wordpress.com/2010/08/19/django-saml-2-0-identity-provider/)
*   Oauth：[http ://djangopackages.com/search/?q=oauth](http://djangopackages.com/search/?q=oauth)

我强烈建议使用已经构建并测试过的提供程序包，而不是滚动你自己的。实施 SSO 看似棘手。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T00:30:25.997

Django 并不是真正为 SOA 构建的。在身份验证的情况下，Django 有一个定义良好的身份验证框架，可以轻松地允许您跨 Web、API 等重用它。

一般来说，如果你想灵活地定义自己的架构，Django 可能不适合你。您可能需要考虑一些更简约的东西，例如[web.py](http://webpy.org/)。

# javascript - PHP 表单发布到 SQL 后无操作

> ID：10368653
> 
> 赞同：0
> 
> 时间：2012-04-29T00:11:41.977
> 
> 标签：javascript, html

我正在制作活动日历，活动的“详细信息”位于隐藏的 div 上。我有一个小图标，单击该图标时，会使用 javascript 显示详细信息。

我想要的是，单击此图标时，该图标将替换为不同的图标（以显示它是“打开的”），并且单击该图标时，该图标将再次关闭 div。

所以当前的代码是

```
<a href="#" onclick="Effect.BlindDown('eventdetails<?php echo $event_count;?>'); return false;"><img class="open" src="./img/plus.png"></a> 
```

我希望图像更改为“minus.png”。那么它会是

```
<a href="#" onclick="Effect.BlindUp('eventdetails<?php echo $event_count;?>'); return false;"><img class="open" src="./img/minus.png"></a> 
```

但不能完全弄清楚。有任何想法吗？

**更新**

感谢 Mia，让下面的代码工作。按钮...

```
<a href="#" onclick="toggleDisplayWait('eventdetails<?php echo $event_count;?>', 'icon<?php echo $event_count;?>', 800); return false;"); return false;"><img id="icon<?php echo $event_count;?>" class="open" src="./img/plus.png"></a> 
```

在标题中...

```
 <script type="text/javascript" language="javascript">

    function toggleDisplayWait(divId, imgId, durationmSec) {
    if(!$(divId).visible()) {
        move = Effect.BlindDown;
        newImage = "./img/minus.png";
    }
    else {
        move = Effect.BlindUp;
        newImage = "./img/plus.png";  
    }        
    move(divId, {duration: durationmSec / 1000.0 });
    setTimeout(function() { $(imgId).src = newImage; }, durationmSec)
}

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:00:47.510

假设小猫是 + 号，黑色图像是 -。我写了两个版本，在第一个（toggleDisplay）中，图像立即改变。您可能想要的是 +/- 仅在动画结束后更改。

**编辑**为多个日历日的 div 添加了 div id 和图像 id 的参数。否则，图像 id 可以在函数内部进行硬编码。还假设所有日历日期都使用相同的图像来表示加号和减号。

请看一下：http: [//jsfiddle.net/BfWUQ/3/](http://jsfiddle.net/BfWUQ/3/)

div 布局很跳跃，但我想你已经弄清楚了布局。

```
toggleDisplayWait('eventdetails', 'icon', 800);
// hidden div id, +/- image id, animation length in milliseconds

function toggleDisplayWait(divId, imgId, durationmSec) {
    if(!$(divId).visible()) {
        move = Effect.BlindDown;
        newImage = "http://placehold.it/100/100";
    }
    else {
        move = Effect.BlindUp;
        newImage = "http://placekitten.com/100/100";  
    }        
    move(divId, {duration: durationmSec / 1000.0 });
    setTimeout(function() { $(imgId).src = newImage; }, durationmSec)
} 
```

**编辑 2**

改变

```
onclick="toggleDisplayWait("eventdetails<?php echo $event_count;?>", 
"icon", 800); return false;" 
```

至

```
onclick="toggleDisplayWait('eventdetails<?php echo $event_count;?>', 
'icon', 800); return false;" 
```

# mysql - 在 ASP.Net MVC 上临时存储用户数据

> ID：10368655
> 
> 赞同：-2
> 
> 时间：2012-04-29T00:12:25.993
> 
> 标签：mysql, asp.net-mvc

我正在做一个 ASP.Net MVC 网站，但我需要一些帮助来弄清楚如何解决我遇到的问题。问题是当用户登录时（它从 MySQL 数据库中获取信息），我需要它来保存所有用户信息和公司信息。但我需要从多个视图和模型中访问它。那么使用这种方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:52:51.240

您可以存储该信息，`Global.asx`以便在项目中的任何地方都可以使用它。

但唯一的事情是您需要`Global.asx`在执行之前提及属性。

# xcode - 当我单击后退按钮时 UIImageView 发生了变化

> ID：10368658
> 
> 赞同：0
> 
> 时间：2012-04-29T00:13:04.307
> 
> 标签：xcode, uiimageview

我有一个带有两个`UIImageView`基于 nib 文件的小项目。

当主视图加载时，它看起来是正确的。

要在视图之间切换，我使用这样的代码（例如，这是转到第二个视图）

```
-(IBAction) secondClicked:(id)sender {
    SecondViewController *second = [[SecondViewController alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:main animated:NO];
    [second release];
} 
```

当显示新视图时，它会横向移动大约 10% 的屏幕。使用类似的代码返回主视图会导致主视图显示类似的偏移。

我处于横向模式，如果这有所作为。

如何显示视图以使它们正确对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T00:56:43.097

好的，现在我看的更仔细了。当您希望返回时，为什么要以模态方式呈现视图控制器？你最初是如何展示这个 viewController 的？如果是通过导航控制器，您应该弹出视图

```
[self.navigationController popViewControllerAnimated:YES]; 
```

如果它以模态方式呈现，您应该将其关闭！

```
[self dismissViewControllerAnimated:YES]; 
```

# javascript - Javascript函数需要太长时间才能完成？

> ID：10368665
> 
> 赞同：0
> 
> 时间：2012-04-29T00:14:15.117
> 
> 标签：javascript

下面是我遇到问题的代码片段。目的是检查数据库中的重复条目，如果真或假，则返回带有布尔值的“h”。出于测试目的，我为“h”返回了一个真正的布尔值，但到了 alert(duplicate_count); 行被执行，duplicate_count 仍然为 0。即使 +1 的警报被执行。

对我来说，函数 updateUserFields 似乎需要更长的时间才能执行，因此在收到警报之前需要更长的时间才能完成。

有什么想法或建议吗？谢谢！

```
var duplicate_count = 0

for (var i = 0; i < skill_id.length; i++) {

    function updateUserFields(h) {
        if(h) {
            duplicate_count++;
            alert("count +1");
        } else {
            alert("none found");
        }
    }

    var g = new cfc_mentoring_find_mentor();
    g.setCallbackHandler(updateUserFields);
    g.is_relationship_duplicate(resource_id, mentee_id, section_id[i], skill_id[i], active_ind,table);
};

alert(duplicate_count); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:23:51.870

没有**任何理由**使用客户端 JavaScript/jQuery 从数据库中删除重复项。除了安全问题（还有很多），还有一种更简单的方法可以确保数据库中的条目是唯一的：使用 SQL。

SQL 能够表达表列中没有重复项的要求，并且数据库引擎将为您强制执行，从不让您首先插入重复条目。语法因数据库引擎而异，但无论何时创建表，您都可以指定列必须是唯一的。

让我们使用[SQLite](http://www.sqlite.org/)作为我们的示例数据库引擎。您的问题的相关部分现在可能用如下表格表示：

```
CREATE TABLE Person(
    id INTEGER PRIMARY KEY ASC,
    -- Other fields here
);
CREATE TABLE MentorRelationship(
    id INTEGER PRIMARY KEY ASC,
    mentorID INTEGER,
    menteeID INTEGER,
    FOREIGN KEY (mentorID) REFERENCES Person(id),
    FOREIGN KEY (menteeID) REFERENCES Person(id)
); 
```

但是，您可以强制唯一性，即要求任何`(mentorID, menteeID)`对都是唯一的，方法是将该对更改`(mentorID, menteeID)`为主键。这是有效的，因为您只允许每个主键的一个副本。然后，`MentorRelationship`表格变成

```
CREATE TABLE MentorRelationship(
    mentorID INTEGER,
    menteeID INTEGER,
    PRIMARY KEY (mentorID, menteeID),
    FOREIGN KEY (mentorID) REFERENCES Person(id),
    FOREIGN KEY (menteeID) REFERENCES Person(id)
); 
```

* * *

**编辑**：根据评论，提醒用户重复但实际上并未删除它们

使用 SQL 仍然比使用 JavaScript 好得多。当您在 JavaScript 中执行此操作时，您一次读取一个数据库行，通过网络发送它，等待它到达您的页面，处理它，丢弃它，然后请求下一个。使用 SQL，所有繁重的工作都由数据库引擎完成，您不会因为通过网络传输不必要的数据而浪费时间。使用上面的第一组表定义，您可以编写

```
SELECT mentorID, menteeID
FROM MentorRelationship
GROUP BY mentorID, menteeID
HAVING COUNT(*) > 1; 
```

这将返回所有`(mentorID, menteeID)`多次出现的对。

一旦您在服务器上进行了这样的查询（并且还提取了您想要显示给用户的所有信息，这可能不仅仅是一对 ID），您需要通过网络将其发送到用户的网络浏览器。本质上，在服务器端，您映射一个 URL 以某种方便的形式（JSON、XML 等）返回此信息，在客户端，您通过 AJAX 调用联系该 URL 来读取此信息（请参阅[jQuery 的网站](http://api.jquery.com/category/ajax/)了解一些代码示例），然后向用户显示该信息。无需用 JavaScript 编写数据库引擎的执行速度将提高几个数量级。

* * *

**编辑2**：根据第二条评论，检查一个项目是否已经在数据库中

我在第一次编辑中所说的几乎所有内容都适用，除了两个更改：模式和查询。该模式应该成为我发布的两个模式中的第二个，因为您不希望数据库引擎允许重复。此外，查询应该很简单

```
SELECT COUNT(*) > 0
FROM MentorRelationship
WHERE mentorID = @mentorID AND menteeID = @menteeID; 
```

where`@mentorID`和`@menteeID`是用户选择的项目，并通过查询构建器库而[不是通过字符串连接](http://xkcd.com/327/)插入到查询中。然后，如果该项目已经在数据库中，则服务器将获得真值，否则将获得假值。服务器可以像以前一样通过 AJAX 将其发送回客户端，如果项目已经在数据库中，客户端（即您的 JavaScript 页面）可以提醒用户。

# ruby-on-rails - Rails 3 undefined method `create' for nil:NilClass 在尝试创建相关对象时出错

> ID：10368667
> 
> 赞同：1
> 
> 时间：2012-04-29T00:14:26.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有两个模型，用户和配置文件，一对一的关系，如果它还不存在，我正在尝试为用户创建一个新的配置文件：

```
user = User.includes(:profile).find( params[:user_id] )

unless user.profile.present?
  user.profile.create
end 
```

但我收到一个错误：**nil:NilClass 的未定义方法“创建”**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T00:33:50.503

嗯，有两件事。首先，我假设代码是错误的，因为只有在配置文件存在时才会进入块（因此无法创建它）。

```
if user.profile.blank?
  user.profile.create
end 
```

看起来更正确的代码。

其次，当您使用 has_one 时，您不会像使用 has_many 那样使用 .create。这是因为直接返回关系对象，而不是像 has_many 这样的“代理”方法。等效方法是 create_profile（或 create_x，其中 x 是对象）

因此，请尝试以下代码：

```
if user.profile.blank?
  user.create_profile
end 
```

# ruby-on-rails - Rails，Devise：如果匿名用户尝试访问页面 - 将用户重定向到登录页面

> ID：10368670
> 
> 赞同：0
> 
> 时间：2012-04-29T00:15:11.110
> 
> 标签：ruby-on-rails, authentication, devise

我正在使用 Devise 在我的 rails 应用程序中对用户进行身份验证。我有几个资源只希望经过身份验证的用户可以访问。如果未经身份验证的用户尝试访问此类资源，我希望他们返回登录页面。

我想知道这样做的最佳方法是什么。我刚在想：

*   我可以在 application_controller.rb 中添加一个检查 - 但是，如果我添加此检查，它也可能适用于登录页面，因此我们进入了一个循环。（进入登录页面 -> 用户未登录 -> 重定向到登录页面...）

*   在每个控制器方法的顶部添加一个属性，例如。@认证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:23:29.237

你读过`authenticate_user!`过滤器吗？[您可以在github](https://github.com/plataformatec/devise)上找到文档（搜索“Controller filters and helpers”）。

在相关控制器中添加它。您可以通过提供`:only => [ :show ]`或`:except => [ :index ]`作为进一步参数将其限制为某些操作。

# c - 找不到 libcrypto 库错误

> ID：10368671
> 
> 赞同：24
> 
> 时间：2012-04-29T00:15:30.417
> 
> 标签：c, linux, gcc, openssl, shared-libraries

当我尝试编译使用带有命令行的`C`openssl 'crypto' 库函数的代码时，会出现错误`-lcrypto``gcc 4.4.3`

```
`@ubu:$ gcc -ggdb aes_m.c -Werror -Wall -I /usr/local/ssl/include/ -lcrypto -o aes
 /usr/bin/ld: cannot find -lcrypto
 collect2: ld returned 1 exit status` 
```

这可能是什么原因？

我已经完成了这个讨论[ld 找不到现有的库](https://stackoverflow.com/questions/335928/ld-cannot-find-an-existing-library)，但这没有帮助。

定位命令导致

```
$ locate libcrypto
/home/abhi/Downloads/openssl-1.0.1b/libcrypto.a
/home/abhi/Downloads/openssl-1.0.1b/libcrypto.pc
/lib/libcrypto.so.0.9.8
/lib/i486/libcrypto.so.0.9.8
/lib/i586/libcrypto.so.0.9.8
/lib/i686/cmov/libcrypto.so.0.9.8
/usr/lib/libcrypto.so.0.9.8
/usr/lib/vmware-tools/lib32/libcrypto.so.0.9.8
/usr/lib/vmware-tools/lib32/libcrypto.so.0.9.8/libcrypto.so.0.9.8
/usr/lib/vmware-tools/lib64/libcrypto.so.0.9.8
/usr/lib/vmware-tools/lib64/libcrypto.so.0.9.8/libcrypto.so.0.9.8
/usr/local/ssl/lib/libcrypto.a
/usr/local/ssl/lib/pkgconfig/libcrypto.pc 
```

有人可以帮忙解决这个问题或指出我正在做的任何错误吗

@Daniel Roethlisberger 尝试使用 -L 标志，但这导致了这些错误

```
gcc -ggdb aes_m.c -Werror -Wall -I /usr/local/ssl/include/ -L /usr/local/ssl/lib -lcrypto -o aes
/usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_globallookup':
dso_dlfcn.c:(.text+0x2d): undefined reference to `dlopen'
dso_dlfcn.c:(.text+0x43): undefined reference to `dlsym'
dso_dlfcn.c:(.text+0x4d): undefined reference to `dlclose'
/usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_pathbyaddr':
dso_dlfcn.c:(.text+0x8f): undefined reference to `dladdr'
dso_dlfcn.c:(.text+0xe9): undefined reference to `dlerror'
/usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_func':
dso_dlfcn.c:(.text+0x4b1): undefined reference to `dlsym'
dso_dlfcn.c:(.text+0x590): undefined reference to `dlerror'
/usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_var':
dso_dlfcn.c:(.text+0x611): undefined reference to `dlsym'
dso_dlfcn.c:(.text+0x6f0): undefined reference to `dlerror'
/usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_unload':
dso_dlfcn.c:(.text+0x755): undefined reference to `dlclose'
/usr/local/ssl/lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_load':
dso_dlfcn.c:(.text+0x837): undefined reference to `dlopen'
dso_dlfcn.c:(.text+0x8ae): undefined reference to `dlclose'
dso_dlfcn.c:(.text+0x8f5): undefined reference to `dlerror'
collect2: ld returned 1 exit status 
```

非常感谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-29T00:25:06.453

添加`-L /usr/local/ssl/lib/`到 GCC 命令行中，在`-lcrypto`. 由于您正在针对 OpenSSL 标头进行构建`/usr/local/ssl`，因此您还需要链接到具有相同前缀的实际库（即使您似乎只在那里安装了一个静态库，这可能是也可能不是您的意图；您可能需要正确重新安装从源代码构建的 OpenSSL）。

（编辑）要修复`dlopen()`链接器找不到的和朋友，请添加`-ldl`到 GCC 命令行。`-ldl`告诉链接器也链接到 libdl.so，它是包含 , 等的`dlopen()`共享`dlsym()`库`dlclose()`；这些函数由 OpenSSL 在内部使用，因此在使用（在 Linux 上）`-ldl`时是间接依赖。`-lcrypto`因为您要链接到 libcrypto 的静态版本，所以您需要显式链接所有间接依赖项。

如果您不熟悉链接到正确的库，我建议您使用从操作系统包管理器安装的 OpenSSL；它可能会为您节省一些麻烦。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-28T05:38:13.633

这可能与尝试从源代码构建自己的 openssl 然后使用它来编译其他程序（在我的情况下为 Git）的人有关

在配置 openssl 期间，添加 'shared' 选项：

`./config shared`

这将创建所需的共享库`libcrypto.so`。您将在 INSTALL 文件中找到更多信息。

此外，如果您在“制作”期间遇到此错误

`"....can not be used when making a shared object`

使用 -fPIC 重新编译

`./config shared -fPIC`

# objective-c - 透明 NSWindow 只能在像素所在的地方抓取

> ID：10368673
> 
> 赞同：1
> 
> 时间：2012-04-29T00:16:22.130
> 
> 标签：objective-c, transparency, customization, nswindow

我正在尝试自定义 NSWindow，今天得到了我的第一个透明自定义窗口。不幸的是，我只能抓住像素可见的窗口。有没有办法在窗口范围内的任何地方抓住它？

![在此处输入图像描述](../Images/617d85d1f4ce79bf99d3677f297df812.png)

## 蒂亚，罗纳德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:11:50.263

用户如何知道界限在哪里？无论如何，解决方案是`[theWindow setIgnoresMouseEvents:NO]`。

# html - Textarea横向滚动取消

> ID：10368677
> 
> 赞同：0
> 
> 时间：2012-04-29T00:17:26.770
> 
> 标签：html, textarea

这有点难以解释，但这是我的问题：至少在我的笔记本电脑上，当您使用触摸板向上滚动时，光标不会移动。如果横向滚动，光标会横向移动。我宁愿光标根本不动。这可能吗？你能取消横向滚动吗？您可以启用向上滚动吗？

谢谢，希望可以理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:38:32.573

如果我正确理解你的问题，你想控制你的文本区域的滚动！因此，为了控制 textarea 的滚动，您可以像使用 CSS 来控制任何其他具有滚动功能的元素一样使用 CSS：

**无滚动**

```
<style type="text/css">
  textarea {
    overflow: hidden;
  }
</style> 
```

**没有垂直滚动**

```
<style type="text/css">
  textarea {
    overflow-y: hidden;
  }
</style> 
```

**没有水平滚动**

```
<style type="text/css">
  textarea {
    overflow-x: hidden;
  }
</style> 
```

此外，您可以禁用文本换行，从而强制使用水平滚动条（不符合 W3c）。

**用于禁用换行的 Textarea 标记**

```
<textarea cols="60" rows="12" wrap="off">My long text string is this big and continues...</textarea> 
```

注意：刚刚在你的 Fiddle 上测试了这个。

# google-drive-api - DrEdit 的 Google Drive HTTP 403“未配置访问”错误

> ID：10368678
> 
> 赞同：36
> 
> 时间：2012-04-29T00:17:40.873
> 
> 标签：google-drive-api

我正在尝试将适用于 python 的 DrEdit 示例应用程序安装到 GAE 上。应用程序运行，但保存或打开文件会导致**HTTP 403 "Access Not Configured Error"**。

**client.json**根据**API Access>Client ID for Drive SDK values**设置了**client_id**和**client_secret**。我还尝试使用**API Access>Client ID for web applications**的值。

 ******Google Drive SDK> OAuth Client ID**也被设置为 Drive SDK 和 Web 应用程序客户端 ID 。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-29T07:13:24.410

在 Google API 控制台的服务部分，有两个与驱动开发相关的服务，SDK 和 API。当您创建新的 Drive SDK 条目时，Drive API 服务不会自动启用（这没有意义，我看不出您何时会在不使用驱动器 API 的情况下创建启用驱动器的应用程序）。为项目打开 Drive API 服务，然后重试。

@lurking_googlers 我想很多人会为此而堕落，启用 SDK 时启用 API 是否有意义？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-05T07:46:05.643

您还必须在代码中标识以下内容

```
DriveService.Scope.DriveFile, DriveService.Scope.Drive 
```

祝你好运****

# ruby-on-rails - 在rails中的继承控制器中跳过after_filter

> ID：10368679
> 
> 赞同：0
> 
> 时间：2012-04-29T00:17:49.157
> 
> 标签：ruby-on-rails

在我的应用程序控制器中，我有一个`after_filter`将会话中的值设置`last_page`为当前请求 URL。当我在会话控制器中创建一个新会话时，该页面 url 是`/signin`，但由于它必须通过，`SessionsController#create`所以我丢失了用户单击登录之前的实际页面。`last_page``/signin`

我基本上有什么：

```
after_filter :set_last_page, except: [sessions#new] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:21:39.327

在派生的控制器中有用于禁用之前/之后过滤器的助手`skip_before_filter`。[`skip_after_filter`](http://apidock.com/rails/AbstractController/Callbacks/ClassMethods/skip_after_filter)

你想添加`skip_after_filter :set_last_page, only: "new"`到你的 Sessions 控制器。

# java - 运行一个多模块 Maven 项目

> ID：10368680
> 
> 赞同：1
> 
> 时间：2012-04-29T00:18:08.567
> 
> 标签：java, maven

这是一个基本问题，我只是不太熟悉 Maven 多模块结构。说，我有一个网络应用程序。我想将一些模块连接到它（一些服务）。我是否需要制作一个 Web 应用程序只是其中一个模块，依赖于其他一些模块，然后运行它？起初我以为我可以运行整个项目，但这个选项在我的 IDE 中是不活动的（我现在使用的是 NetBeans），这让我觉得我应该运行一个主模块（在这种情况下是一个 Web 应用程序） ）。是这样吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T11:26:35.467

如果您有一个多模块项目，则需要如下结构，该结构也将由文件夹结构表示。

```
+-- root (pom.xml)
     +--- module-1
     +--- module-2
     +--- module-war 
```

而根模块包含这样的东西：

```
<project ..>

  <groupId>com.test.project</groupId>
  <artifactId>parent</artifactId>
  <version>1.0-SNAPSHOT</version>

  <modules>
    <module>module-1</module>
    <module>module-2</module>
    <module>module-war</module>
  </modules>

</project> 
```

在 module-1 中，您的 pom 应如下所示：

```
<project ..>
  <parent>
    <groupId>com.test.project</groupId>
    <artifactId>parent</artifactId>
    <version>1.0-SNAPSHOT</version>
  </parent>

  <artifactId>module-1</artifactId>

  dependencies for the module

</project> 
```

在模块 2 中，它看起来或多或少是一样的。在战争模块中，它看起来像：

```
<project ..>
  <parent>
    <groupId>com.test.project</groupId>
    <artifactId>parent</artifactId>
    <version>1.0-SNAPSHOT</version>
  </parent>

  <packaging>war</packaging>
  <artifactId>module-war</artifactId>

  dependencies for the module

</project> 
```

如果模块之间存在依赖关系，例如 module-1 依赖于 module-2，它在 module-1 中如下所示：

```
<project ..>
  <parent>
    <groupId>com.test.project</groupId>
    <artifactId>parent</artifactId>
    <version>1.0-SNAPSHOT</version>
  </parent>

  <artifactId>module-1</artifactId>

  <dependencies>
    <dependency>
      <groupId>${project.groupId}</groupId>
      <artifactId>module-2</artifactId>
      <version>{project.version}</version>
    </dependency>

    ..other dependencies..

  </dependencies>

</project> 
```

要构建和打包您的项目，您将转到父文件夹并简单地执行

```
mvn clean package 
```

# lua - lua-CoatPersistent，这可以与 Corona SDK 一起使用吗？

> ID：10368682
> 
> 赞同：0
> 
> 时间：2012-04-29T00:18:25.787
> 
> 标签：lua, coronasdk, luasql

“lua-CoatPersistent”的概念在 Corona 中对 sqlite 数据库的更高级别使用看起来非常有吸引力。

任何人都知道这是否会在电晕下工作？如果你有任何提示/学习如何让它全部设置/工作？即任何需要解决的问题？

链接到：“lua-CoatPersistent”

[http://fperrad.github.com/lua-CoatPersistent/index.html#documentation](http://fperrad.github.com/lua-CoatPersistent/index.html#documentation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T17:02:56.567

不，您不能安装模块。你可以只使用纯 Lua。但我认为 Corona Enetrprise 应该是可能的。

# visual-studio-2010 - 如何断开 VisualSVN 与我的解决方案的连接？

> ID：10368684
> 
> 赞同：1
> 
> 时间：2012-04-29T00:19:17.667
> 
> 标签：visual-studio-2010, tortoisesvn, visualsvn, visualsvn-server

所以我只下载了 TortoiseSVN、VisualSVN 和 VisualSVN Server。我创建了一个新的存储库，并通过 VS2010 将我的解决方案添加到了该存储库。然后我意识到我的存储库有一些命名问题，所以我使用 VisualSVN 服务器管理器删除了它，认为我可以回到 VS2010 并以某种方式断开与 SVN 的解决方案连接，但我想不出任何方法来做到这一点？我基本上想从头开始使用此解决方案/连接到 SVN，但我似乎无法找到一种方法来为我提供初始的“将此解决方案添加到 SVN”选项。我不知道这是 TortiseSVN 问题还是 VisualSVN，但任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T00:30:56.493

关闭 Visual Studio，然后通过递归删除项目文件夹下的所有 .svn 文件夹来删除颠覆信息。它们是隐藏的，因此您需要启用查看隐藏文件和文件夹。打开 Visual Studio 和 VisualSVN 应该会提供重新添加 subversion 的解决方案。

# c# - XML 序列化包含列表的嵌套类

> ID：10368685
> 
> 赞同：0
> 
> 时间：2012-04-29T00:19:44.040
> 
> 标签：c#, xml, serialization

我在序列化 C# 中的嵌套类列表时遇到了一个奇怪的问题。该类定义为

```
public class Settings : XmlSerializable
{
    private string mPath = "";
    public string Path
    {
        get { return mPath; }
        set { mPath = value; }
    }

    [XmlArrayItem("ChatEventsAndReactions")]
    public List<MessageEvent> Events;
}

public abstract class XmlSerializable
{
    public virtual void Save(string path)
    {
        StreamWriter w = new StreamWriter(path);
        XmlSerializer s = new XmlSerializer(this.GetType());
        s.Serialize(w, this);
        w.Close();
    }

    public virtual void Load(string path)
    {
        if (File.Exists(path))
        {
            StreamReader sr = new StreamReader(path);
            XmlTextReader xr = new XmlTextReader(sr);
            XmlSerializer xs = new XmlSerializer(this.GetType());
            object c;
            if (xs.CanDeserialize(xr))
            {
                c = xs.Deserialize(xr);
                Type t = this.GetType();
                PropertyInfo[] properties = t.GetProperties();
                foreach (PropertyInfo p in properties)
                {
                    p.SetValue(this, p.GetValue(c, null), null);
                }
            }
            xr.Close();
            sr.Close();

        }
    }
} 
```

并且该类`MessageEvent`定义为

```
public class MessageEvent
{
    public MessageData Message = new MessageData();
    public MessageReaction Reaction = new MessageReaction();

    public override string ToString()
    {
        string tmp = this.Message.ToString() + " " + this.Reaction.ToString();
        return tmp;
    }
}

public class MessageReaction
{
    public string ReactionType;
    public string Parameter;

    public override string ToString()
    {
        string tmp = "Reaction: " + this.ReactionType + " " +
                     "Parameter: " + this.Parameter;
        return tmp;
    }
}

public class MessageData
{
    public string ChannelName;
    public string ChannelID;
    public string SenderName;
    public string MessageID;
    public string Text;

    public MessageData()
    { }

    public MessageData(string content)
    {
        this.ConvertFromString(content);
    }

    public void Clear()
    {
        this.ChannelName = "";
        this.ChannelID = "";
        this.MessageID = "";
        this.SenderName = "";
        this.Text = "";

    }

    public void ConvertFromString(string msg)
    {
        int HeaderEnd = msg.IndexOf("]") + 1;
        string Header = msg.Substring(0, HeaderEnd);
        string Text = msg.Substring(HeaderEnd);
        Header = Header.Replace("[", "");
        Header = Header.Replace("]", "");
        Header = Header.Replace("\",\"", "\"");
        Header = Header.Replace("\",", "\"");
        char[] Seperator = { '\"' };
        string[] message = Header.Split(Seperator);
        this.ChannelName = message[2];
        this.ChannelID = message[1];
        this.MessageID = message[4];
        this.SenderName = message[3];
        this.Text = Text;
    }

    public void ConvertFromObject(object o)
    {
        MessageData tmp = (MessageData)o;
        this.ChannelName = tmp.ChannelName;
        this.ChannelID = tmp.ChannelID;
        this.SenderName = tmp.SenderName;
        this.MessageID = tmp.MessageID;
        this.Text = tmp.Text;
    }

    public override string ToString()
    {
        return "ChannelID: " + this.ChannelID + " " +
               "CannelName: " + this.ChannelName + " " +
               "SenderName: " + this.SenderName + " " +
               "MessageID : " + this.MessageID + " " +
               "Message: " + this.Text;
    }
} 
```

奇怪的问题是它在保存数据时工作得很好（导致所有数据的清晰 XML）但是当我从 XML 文件中读取时，我得到一个包含正确数量的项目的列表，但它们都是空的（`""`在每个字符串中）。路径工作正常

感谢您浏览这堵文字墙；o）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:27:55.110

`public List<MessageEvent> Events;`是一个字段，而不是一个属性。您需要对字段重复与属性相同的过程。

# objective-c - 将数字添加到小数点末尾（Objective-c）

> ID：10368693
> 
> 赞同：2
> 
> 时间：2012-04-29T00:22:22.877
> 
> 标签：objective-c

我有个问题。我需要得到两个数字并将它们加在一起，其中一个是另一个的小数点。例如：

```
double number1 = 20;
double number2 = 142; 
```

我需要将这些数字相加得到 20.142。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T01:00:14.000

简单的解决方案：

```
double result = [[NSString stringWithFormat:@"%i.%i", (int)number1, (int)number2] doubleValue]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T00:26:24.620

你可以用*数学。*（顿顿顿顿！）

```
double number3 = number1 + (number2 / 1000); 
```

所以问题就变成了；您如何确定除以第二个数字的 10 的幂？

肯定有很多方法可以做到这一点。就在我的脑海中，您可以运行一个循环，不断增加 10 的幂，直到它大于 number2 的当前值。

如果您正在处理 number1 的负数，那么您需要添加一个**if**语句来查看该数字是否 < 0。如果是这样，您需要减去而不是添加。

如果您正在处理 number2 的负数，那么……这很愚蠢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T00:25:53.317

一种天真的方式：

```
double res, number1 = 20, number2 = 142;
while (number2 >= 1) {
    number2 /= 10;
}
res = number1 + number2; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-29T00:26:11.290

```
bool negative = (number1 < 0.0);

if (negative)
    number1 = 0 - number1;
while (number2 >= 1.0)
    number2 = number2 / 10.0;

double finalnum = number1 + number2;
if (negative)
    finalnum = 0 - finalnum; 
```

这很简单。我们首先确定是否`number1`为负，如果是，则使其为正并设置一个布尔标志。然后我们继续除以`number2`直到`10.0`它小于`1.0`（这意味着它现在在`[0, 1)`假设它是正的范围内）。然后我们只需将两个数字相加并存储在 中`finalnum`，如果`negative`是`true`( `YES`)，则取反`finalnum`。

该解决方案也可以使用以 10 为底的对数来确定除以的数量`number2`，但这很可能需要更长的时间。

您也可以通过[将这些数字转换为`const char*`or `CFString`(Objective-C) 字符串，然后将它们连接起来，然后将结果字符串解释为 a`double`](https://stackoverflow.com/a/10368864/1350209)来解决这个问题，但同样，这将花费更长的时间。

这段代码有两个注意事项：

1.  `number1`并且`number2`必须是整数（如果`number1`是，比如说，`1.5`并且`number2`是`25.7`，`finalnum`将会是`1.757`）
2.  `number2`必须是正面的

# c# - C# 中的 TreeView.Nodes[int].Name 在哪里？

> ID：10368697
> 
> 赞同：3
> 
> 时间：2012-04-29T00:23:50.153
> 
> 标签：c#, wpf, vb.net, itemscollection

我正在处理 VB.NET 到 C# 的转换，目前我遇到了一个`TreeView`对象。

```
Dim Arguments1 As String = path & "\" & fs & " ls " & TreeView1.Nodes(ccc).Name 
```

到目前为止，我只能做到这一点：

```
string Arguments1 = path + "\\" + fs + " ls " + ? 
```

在 VB.NET 中，`TreeView`有一个方法 ，`Nodes(int)`我可以从中获取`Name`属性。但是，C# 没有`Nodes(int)`方法。我认为它可能是`TreeView1.Items[ccc]`，但`TreeView1.Items[ccc].Name`不会编译，因为`Items[int]`返回的对象不包含`Name`属性。我如何得到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T00:41:13.587

似乎您正在翻译为具有属性的 WinForms 编写的代码以及具有属性的*WPF* 的*代码*。您需要将返回的值转换为 a以获取该属性。您的 C# 代码将是：`TreeView``Nodes` *`TreeView``Items`[`TreeViewItem`](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeviewitem.aspx)`Name`*

 *```
string Arguments1 = path + "\\" + fs + " ls " + ((TreeViewItem)TreeView1.Items[ccc]).Name 
```*

# iphone - 在 iOS 上，为什么更改 CALayer 的帧不会导致动画？

> ID：10368700
> 
> 赞同：1
> 
> 时间：2012-04-29T00:24:25.613
> 
> 标签：iphone, ios, core-animation

我有一些 iOS 示例代码，如果我点击主视图并且点击处理程序更改`CALayer`对象的`frame`属性，图层对象将动画到它的位置和大小。

但是如果我把那个动画放在`ViewController`'s里面`viewDidLoad`：

```
UIImage *shipImage = [UIImage imageNamed:@"SpaceShip1.png"];
ship1 = [[CALayer alloc] init];

ship1.contents = (id) [shipImage CGImage];
ship1.frame = CGRectMake(50, 50, 100, 100);

[self.view.layer addSublayer:ship1];

ship1.frame = CGRectMake(0, 0, 300, 200); 
```

那么动画就不会发生。它只会使用`(0, 0, 300, 200)`没有动画的。为什么会这样以及如何使其发挥作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T03:22:02.170

几件事。

首先，frame 属性是不可动画的。相反，您应该为边界（以更改大小）和位置（以移动图层）设置动画。

引用文档：

> 注意：frame 属性不能直接设置动画。相反，您应该对 bounds、anchorPoint 和 position 属性的适当组合进行动画处理，以实现所需的结果。

其次，在更改动画属性之前，您必须在添加图层后返回事件循环。

当您返回并且系统访问事件循环时，下次您更改可动画属性时，它会创建一个动画事务来为该更改设置动画。

由于您创建了一个图层，设置了它的框架，然后更改了它，所有这些都在返回之前，您的代码只需将图层添加到它的最后一帧。

相反，您应该做的是设置图层，将其安装到其父图层中，然后返回。您可以使用 performSelector:withObject:afterDelay: 在添加图层后调用动画：

```
- (void)viewDidLoad
{
  UIImage *shipImage = [UIImage imageNamed:@"SpaceShip1.png"];
  ship1 = [[CALayer alloc] init];

  ship1.contents = (id) [shipImage CGImage];
  ship1.frame = CGRectMake(50, 50, 100, 100);

  [self.view.layer addSublayer:ship1];

  [self performSelector: @selector(changeLayer)
    withObject: nil 
    afterDelay: 0.0];
}

- (void) changeLayer
{
  //Animate changes to bounds and position, not frame.
  ship1.bounds = CGRectMake(0, 0, 300, 200);
  //Note that position is based on the center of the layer by default, so you'll 
  //need to adjust your desired position.
  ship1.position = CGPointMake(0,0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:03:01.320

您没有指定时间延迟或动画时间。所以对象会在它显示之前被移动，你不会在更早的位置看到它。您还需要返回运行循环以显示任何动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T21:23:05.847

在 iOS 上触发动画有 3 种方式：

**1\. UIView 动画**

您使用`UIView.animateWithDuration`方法或其他变体直接指定您想要动画。您可以指定持续时间、延迟、完成块等参数。

**2\. 核心动画 - 隐式动画**（期望的方法）

顾名思义，这个动画是在没有明确命令的情况下触发的。但是，为了工作，您需要设置`CALayer`委托，如下所示：

```
ship1.delegate = self; 
```

除非您另有说明，否则所有参数都有默认值。要修改这些参数，您需要调用`CATransaction`：

```
[CATransition setAnimationDuration:0.2]; 
```

**重要提示**：必须在修改图层属性之前放置这些`CATransaction`调用，因为所有动画都是异步发生的（在不同的运行时线程中），如果你把这些调用放在后面，对你来说已经太晚了。

**3.核心动画——显式动画**

您创建一个`CAAnimation`（有不同的`CAAnimation`子类可供选择）并将其附加到图层：

```
CABasicAnimation *a = [CABasicAnimation alloc] init....

[ship1 addAnimation:a]; 
```

我希望这能澄清对这个主题的一些疑问。

# c# - TableLayoutPanel 等距单元格

> ID：10368707
> 
> 赞同：2
> 
> 时间：2012-04-29T00:25:17.170
> 
> 标签：c#, picturebox, spacing, tablelayoutpanel

我试图让 TablePanelLayout 中的列均匀分布。它似乎适用于某些数字，但不适用于其他数字。

2、4、5、8 和 10 都可以正常工作，但 3、6、7 和 9 则不行。最后一个单元格总是比其他单元格稍大或稍小。

浮动精度似乎有一个限制：100 / 5 = 20 很好而且很均匀。但是 100 / 6 = 16.66666... 它只显示 2 个小数位。

任何在除以 100 时导致重复数字的东西都不起作用。我试过使用格式 > 水平/垂直间距 > 使相等，我在其他线程中看到过，但它没有任何区别。

这是特别值得注意的，因为每个单元格都包含一个将 SizeMode 设置为 Zoom 的 PictureBox。所以一个图像显然与其他图像的大小不同。

还有其他技巧可以确保它们绝对均匀吗？整个表单是可调整大小的，因此它必须以任何合理的比例工作。所有 4 面都设置为 Anchor，边距和填充都为 0。

我已经没有想法了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:30:09.557

没关系，我想出了一个解决方案，虽然感觉有点骇人听闻。如果有人看到这一点，我所做的总是比我实际需要的多列/行，并将额外的行设置为“AutoSize”。然后其他行全部向下舍入，因此它们实际上都是 16.5%，而不是 16.67% 之类的。额外的自动大小的行然后吃掉了松弛。我不喜欢它，但它似乎工作。

（我实际上在发布后几个小时就解决了这个问题，但显然我太菜鸟了，不能在没有等待期的情况下回答我自己的问题。不确定我是否理解该规则的要点，你会认为你想鼓励人们自己解决问题，但无论如何。）

# javascript - 在 jQuery 中单击后检索表格单元格的文本

> ID：10368710
> 
> 赞同：0
> 
> 时间：2012-04-29T00:26:09.853
> 
> 标签：javascript, jquery

我在检索单击的表格单元格的文本时遇到了一些麻烦，我可以让事件触发的唯一方法是将“tbody td”替换为

```
$("body").click(function(e) { 
```

但这不会为单击的单元格返回正确的数据值。有谁知道我可能做错了什么？我需要使用 jQuery 创建表，以便可以根据表单给出的输入动态调整其大小。

```
$(document).ready(function() {
    $('#selection').submit(function() {
        $(function () {

            var $tbl = $('<table border="1">').attr('id', 'table');
            var $tbody = $('<tbody>').attr('id', 'tableBody');

            for (var i = 0; i < $("#numOfPieces").val(); i++) {
                var trow = $("<tr>"); // New row

                for (var j = 0; j < $("#numOfPieces").val(); j++) {
                    $("<td>")
                            .text('Row : ' + i + ', Col: ' + j)
                            .appendTo(trow); // New data cell
                }
                trow.appendTo($tbody);
            }

            $tbl.append($tbody);
            $('table').remove(); // Remove previously created table
            $('body').append($tbl);
        });
        return false;
    });

    $("tbody td").click(function(e) {
        var currentCellText = $(this).text();
        var LeftCellText = $(this).prev().text();
        alert(currentCellText);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:31:21.800

问题是您的点击处理程序绑定到 EXISTING 表。您需要将其绑定到“任何”表。在文档准备功能中：

```
$('.container').on('click', 'td', function(e) {
  var currentCellText = $(this).text();
  // etc
}); 
```

`.container`预计不会被破坏的任何容器包装元素在哪里。让它成为你能做到的最接近的祖先。如果没有可用的候选人，那么您可以使用`body`，但如果可以的话，我会避免这么高。

`td`如果需要，当然可以将选择器修改为更具体。如果您有一种应该存在此行为的表类型，请忘记 ID 并为该类型的表指定一个类。然后`td`只是变成`.someClass td`了。

您可能还想在尝试使用之前清理您的 LefCellText 是否存在。以你拥有它的方式声明变量是好的（如果没有这样的选择器，它就会变成未定义的）但你不想假设你将拥有内容，你会想要创建一个后备计划。

# .net - 以编程方式插入 Pin 以访问智能卡上的私钥

> ID：10368714
> 
> 赞同：3
> 
> 时间：2012-04-29T00:26:27.353
> 
> 标签：.net, pki

尝试通过类插入密码失败`CspParameters`，这个有[一个可行的解决方案](http://www.infinitec.de/post/2010/11/22/Setting-the-PIN-of-a-smartcard-programmatically.aspx)

虽然对 Windows 中的 KSP 和 Base CSP 架构有点熟悉，但我不太了解其中发生了什么，但它目前适用于我测试过的所有智能卡读卡器。

不过，让我担心的一件事是，该解决方案（或任何其他以编程方式插入 PIN 码的方式）是否适用于**带键盘的智能卡读卡器**？我没有具体的内容，但常识会说，如果该人不通过键盘插入 PIN 码，应用程序将完全与智能卡断开（想象一个场景，其中 WPF FAT 客户端有一个单独的文本框密码）？

# matlab - 用NaN在矩阵上运行kmeans函数？

> ID：10368721
> 
> 赞同：3
> 
> 时间：2012-04-29T00:28:04.473
> 
> 标签：matlab, nan, k-means

我有一个 0、1、2 的 161X911 数据矩阵，然后整个矩阵中有一些 NaN。我尝试在数据上运行内置函数 kmeans，每当我的 K（簇数）值大于 5 时，它都会返回这个

```
Warning: Ignoring rows of X with missing data. 
> In kmeans at 128
??? Error using ==> kmeans at 284
X must have more rows than the number of clusters. 
```

有没有解决的办法？我猜只有 5 行没有任何 NaN。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T01:14:44.810

这个问题的核心超出了关于`NaN`s 的简单编程问题。这是一个关于在存在缺失数据的情况下进行聚类的更基本的问题。

以下是一些链接，显示了在这些情况下的操作示例。哪种方法最好取决于您的具体情况。

1.  [论文几乎准确地显示了您想要做什么。](http://www.litech.org/~wkiri/Papers/wagstaff-missing-ifcs04.pdf)
2.  [Google 代码上的代码项目](http://code.google.com/p/noolabsimplecluster/)
3.  [IEEE 期刊上的另一篇论文](https://dl.acm.org/citation.cfm?id=2225897)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T00:40:41.753

如果你想使用 K-Means，你将不得不把数字放在那些不是数字的地方。一种方法是，对于每一列，取非 NaN 值的平均值，并用该值替换该列中的 NaN。

# clojure - 学习如何使用 Clojure（语言）和 Closure（谷歌图书馆）

> ID：10368725
> 
> 赞同：3
> 
> 时间：2012-04-29T00:28:36.977
> 
> 标签：clojure, closures

我已经完成了 Ring/Enlive 教程。我正在尝试通过学习如何将 Google Closure 与 Clojure 一起使用来学习 Clojure 网络堆栈的其余部分。到目前为止，我有 Google Closure 这本书（但还没有读过）。学习 Clojure/Closure webstack 的好资源有哪些？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:33:03.120

如果您也想在客户端（clojurescript）上使用clojure（这样做可能很有意义，因为它与闭包非常紧密集成），那么您需要下载+玩[clojurescript one](http://clojurescriptone.com/)。

这是一个完整的示例（服务器+客户端），您可以拆开并使用它。

# map - 如何从 openlayers 读取外部 GeoJSON 文件？

> ID：10368726
> 
> 赞同：16
> 
> 时间：2012-04-29T00:28:59.823
> 
> 标签：map, openlayers, geo, geojson

我必须通过 OpenLayers 画一些线。线要素编码为 GeoJSON 格式。我的代码适用于硬编码的 GeoJSON 功能。但是，如果我将此功能放在单独的文件中并尝试加载它。它只是行不通。我不知道加载外部 GeoJSON 文件有什么问题。我已经给出了两个代码。

**代码 1：**

```
// This code is ok with hard coded GeoJSON features
map.addControl(new OpenLayers.Control.LayerSwitcher());

            vectorLayer = new OpenLayers.Layer.Vector("Lines");

            var myGeoJSON = { "type": "FeatureCollection",
                "features": 
                [

                    { "type": "Feature", "properties": { "LENGTH": 756.304000}, "geometry": { "type": "LineString", "coordinates": [ [ 18.105018, 59.231027 ], [ 18.104176, 59.230737 ], [ 18.103928, 59.230415 ], [ 18.103650, 59.230336 ], [ 18.103028, 59.230463 ], [ 18.102491, 59.230418 ], [ 18.101976, 59.230237 ], [ 18.100893, 59.230110 ], [ 18.100117, 59.230016 ], [ 18.097715, 59.230262 ], [ 18.096907, 59.230376 ], [ 18.096637, 59.230405 ], [ 18.096578, 59.230428 ], [ 18.096429, 59.230450 ], [ 18.096336, 59.230479 ], [ 18.096108, 59.230534 ], [ 18.095971, 59.230600 ], [ 18.095925, 59.230633 ], [ 18.095891, 59.230665 ], [ 18.094000, 59.231676 ], [ 18.093864, 59.231720 ] ] } }
                    ,                   
            { "type": "Feature", "properties": { "LENGTH": 1462.390000}, "geometry": { "type": "LineString", "coordinates": [ [ 17.877073, 59.461653 ], [ 17.877116, 59.461598 ], [ 17.876936, 59.461507 ], [ 17.876936, 59.461323 ], [ 17.876773, 59.461098 ], [ 17.876430, 59.460885 ], [ 17.876413, 59.460553 ], [ 17.876576, 59.460280 ], [ 17.876575, 59.460078 ], [ 17.876762, 59.460060 ], [ 17.877371, 59.460042 ], [ 17.877808, 59.460046 ], [ 17.878641, 59.460046 ], [ 17.879010, 59.460078 ], [ 17.879337, 59.460044 ], [ 17.879526, 59.459878 ], [ 17.879749, 59.459563 ], [ 17.880058, 59.459538 ], [ 17.880435, 59.459503 ], [ 17.887550, 59.453608 ], [ 17.887696, 59.453430 ], [ 17.887971, 59.453150 ], [ 17.888221, 59.452843 ], [ 17.888246, 59.452721 ], [ 17.888435, 59.452609 ], [ 17.888470, 59.452568 ], [ 17.888517, 59.452410 ] ] } }

                ]
            };

            var geojson_format = new OpenLayers.Format.GeoJSON({
                'internalProjection': map.baseLayer.projection,
                'externalProjection': new OpenLayers.Projection("EPSG:4326")
            });

            map.addLayer(vectorLayer);

            vectorLayer.addFeatures(geojson_format.read(myGeoJSON));

            map.setCenter(
                new OpenLayers.LonLat(18.068611, 59.329444).transform(
                    new OpenLayers.Projection("EPSG:4326"),
                    map.getProjectionObject()
                ), 10
            ); 
```

**代码 2：**此代码显示无法加载功能的错误

```
//This code does not work because it can not load the external GeoJSON file

map.addControl(new OpenLayers.Control.LayerSwitcher());

vectorLayer = new OpenLayers.Layer.Vector("Lines");

var myGeoJSON = new OpenLayers.Layer.Vector("Lines", {
    strategies: [new OpenLayers.Strategy.Fixed()],                
    protocol: new OpenLayers.Protocol.HTTP({
           url: "ml/lines.json"

           })
     });

var geojson_format = new OpenLayers.Format.GeoJSON({
    'internalProjection': map.baseLayer.projection,
    'externalProjection': new OpenLayers.Projection("EPSG:4326")
    });

map.addLayer(vectorLayer);

vectorLayer.addFeatures(geojson_format.read(myGeoJSON));

map.setCenter(
     new OpenLayers.LonLat(18.068611, 59.329444).transform(
         new OpenLayers.Projection("EPSG:4326"),
             map.getProjectionObject()
                ), 10
            ); 
```

提前致谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-29T18:57:46.560

```
geojson_layer = new OpenLayers.Layer.Vector("GeoJSON", {
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: "ml/lines.json",
                format: new OpenLayers.Format.GeoJSON()
            })
        }); 
```

看我的小[例子](http://gis-lab.info/share/DR/sandbox/geojson.html)。

# spring - Spring Security：如何重命名“_spring_security_remember_me”复选框字段？

> ID：10368727
> 
> 赞同：10
> 
> 时间：2012-04-29T00:29:41.203
> 
> 标签：spring, spring-mvc, spring-security

在 Spring MVC 3.1 应用程序中，我试图实现一个**记住我**的功能（信息保存在数据库中）。

这是我目前拥有的：

*   我创建了一个[persistent_logins](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/remember-me.html#remember-me-persistent-token)表。
*   我的安全上下文文件中有这个：

    ```
    <form-login login-page="/login" 
            authentication-failure-url="/login?err=true"
            default-target-url="/" 
            username-parameter="username" 
            password-parameter="password"
            login-processing-url="/validatelogin" />

    <remember-me key="some_random_key" 
             token-validity-seconds="31536000" 
             data-source-ref="dataSource" /> 
    ```

*   在我的 login.jsp 中，我有：

    ```
    <form action="/validatelogin" method="post">
        username : <input type='text' id='username' name='username' value='${SPRING_SECURITY_LAST_EXCEPTION.authentication.principal}' />
        <br />
        password : <input type='password' id='password' name='password' />
        <br /><br />
        remember me : <input type="checkbox" name="_spring_security_remember_me" />
        <br /><br />
        <input type="submit" value="submit" />
    </form> 
    ```

在“<form-login>”bean 中，我已经能够使用*username-parameter*和*password-parameter*重命名必须在 jsp 中使用的默认“j_password”和“j_username”字段。但我找不到重命名“_spring_security_remember_me”复选框字段的方法。

关于如何重命名它的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T02:21:36.907

这是使用 的[`parameter`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/authentication/rememberme/AbstractRememberMeServices.html#setParameter%28java.lang.String%29)属性设置的`RememberMeServices`。

遗憾的是，这不能使用命名空间配置进行设置。您可以通过以下几种方式进行设置：

1.  创建一个自定义的 RememberMeServices 并使用`<remember-me services-ref="myRememberMeServices">`. 在 bean 上设置属性。

2.  [使用 BeanPostProcessor（参见 1.8）](http://static.springsource.org/spring-security/site/faq.html#faq-namespace-post-processor)将属性设置为 default `RememberMeServices`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T07:16:32.590

您应该使用 BeanPostProcessor 设置正确的属性：

假设您想将您的属性称为“myRememberMeProperty”

那么你的代码应该是这样的：

```
public class MyBeanPostProcessor implements BeanPostProcessor {

 String myRememberMeProperty;

  public Object postProcessAfterInitialization(Object bean, String name) {
    if (bean instanceof AbstractRememberMeServices) {
      AbstractRememberMeServices rememberMe = (AbstractRememberMeServices) bean;
      rememberMe.setParameter(getMyRememberMeProperty());
    }
    return bean;
  }    
  public Object postProcessBeforeInitialization(Object bean, String name) {
    return bean;
  }

  public void setMyRememberMeProperty(String myRememberMeProperty){
    this.myRememberMeProperty = myRememberMeProperty;    

  }

 public String getMyRememberMeProperty(){
     return this.myRememberMeProperty;    

  }
}

<bean id="myBeanPostProcessor"
    class="x.y.z.MyBeanPostProcessor">
    <property name="myRememberMeProperty" value="myRememberMeProperty" />
</bean> 
```

希望能帮助到你。

# wpf - WPF将DataTable行列绑定到文本框

> ID：10368739
> 
> 赞同：2
> 
> 时间：2012-04-29T00:32:30.130
> 
> 标签：wpf, binding, datatable, viewmodel

> **缩小的解决方案**
> 我更接近，但不知道如何应用 XAML 来更改 datacontext 值。请根据需要查看下面原始问题的上下文。

我的问题是我有一个 ViewModel 类作为窗口的数据上下文。在这个视图模型上，我有一个“DataTable”对象（带有列和只有一行用于测试）。当我尝试将文本框“TEXT”绑定设置到数据表的列时，它不起作用。我最终发现的是，无论我给它什么“来源”或“路径”，它都不会合作。然而，只是通过玩一些场景，我说得对。我们看看吧。文本框控件有自己的“DataContext”属性。因此，在代码中，我只是强制 textbox.DataContext = "MyViewModel.MyDataTableObject" 并将路径留给它应该代表 "MyDataColumn" 的列，并且它起作用了。

因此，也就是说，我将如何为文本框控件编写 XAML，以便将其“DataContext”属性设置为窗口视图模型的数据表对象的属性，但无法正确设置。前任：

```
<TextBox Name="myTextBox" 
    Width="120"
    DataContext="THIS IS WHAT I NEED" --- to represent
    Text="{Binding Path=DataName, 
                    ValidatesOnDataErrors=True,
                    UpdateSourceTrigger=PropertyChanged }" /> 
```

此文本框的 DataContext 应反映下面的 XAML 详细信息并获取

(ActualWindow) (DDT = 视图模型) (oPerson = 存在于视图模型上的数据表) CurrentWindow.DDT.oPerson

我被困在有约束力的东西上。我想将数据表的一列绑定到文本框控件。听起来很简单，但我错过了一些东西。先说简单的场景。如果我有我的窗口并将数据上下文设置为“MyDataTable”，并且有文本框 PATH=MyDataColumn，那么一切正常，没有问题，包括数据验证（红色边框错误）。

现在，问题。如果我直接在我的 Window 类上有一个与 public 相同的“MyDataTable”（但如果我在一个实际的 ViewModel 对象上有它，但窗口是为了简化级别引用），我无法让它工作直接 XAML 源。我知道我必须设置“SOURCE=MyDataTable”，但只是列的路径不起作用。

```
<TextBox Name="myTextBox" 
         Text="{Binding  Source=DDT, Path=Rows[0][DataName], 
                         ValidatesOnDataErrors=True,
                         UpdateSourceTrigger=PropertyChanged }" /> 
```

但是，从其他测试来看，如果我将路径（在代码隐藏中）设置为

```
object txt = FindName("myTextBox");
Binding oBind = new Binding("DataName");
oBind.Source = DDT;
oBind.Mode = BindingMode.TwoWay;
oBind.ValidatesOnDataErrors = true;
oBind.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
((TextBox)txt).SetBinding(TextBox.TextProperty, oBind); 
```

它确实有效（当数据表在窗口（或视图模型）中作为公共可用时）

否则我错过了什么。

***更新：这是我在此处应用的示例代码的完整帖子。***

```
using System.ComponentModel;
using System.Data;

namespace WPFSample1
{
  /// <summary>
  /// Interaction logic for MainWindow.xaml
  /// </summary>
  public partial class MainWindow : Window
  {
    public DerivedDataTable DDT;

    public MainWindow()
    {
      InitializeComponent();
      // hook up to a Data Table 
      DDT = new DerivedDataTable();
      DataContext = this;

      // with THIS part enabled, the binding works.  
      // DISABLE this IF test, and binding does NOT.
      // but also note, I tried these same settings manually via XAML.
      object txt = FindName("myTextBox");
      if( txt is TextBox)
      {
        Binding oBind = new Binding("DataName");
        oBind.Source = DDT;
        oBind.Mode = BindingMode.TwoWay;
        oBind.ValidatesOnDataErrors = true;
        oBind.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
        ((TextBox)txt).SetBinding(TextBox.TextProperty, oBind);
      }
    }
  }

  // Generic class with hooks to enable error trapping at the data table
  // level via ColumnChanged event vs IDataErrorInfo of individual properties
  public class MyDataTable : DataTable
  {
    public MyDataTable()
    {
      // hook to column changing
      ColumnChanged += MyDataColumnChanged;
    }

    protected void MyDataColumnChanged(object sender, DataColumnChangeEventArgs e)
    { ValidationTest( e.Row, e.Column.ColumnName); }

    // For any derived datatable to just need to define the validation method
    protected virtual string ValidationTest(DataRow oDR, string ColumnName)
    { return ""; }
  }

  public class DerivedDataTable : MyDataTable
  {
    public DerivedDataTable()
    {
      // simple data table, one column, one row and defaulting the value to "X"
      // so when the window starts, I KNOW its properly bound when the form shows
      // "X" initial value when form starts
      Columns.Add( new DataColumn("DataName", typeof(System.String))  );
      Columns["DataName"].DefaultValue = "X";

      // Add a new row to the table
      Rows.Add(NewRow());
    }

    protected override string ValidationTest(DataRow oDR, string ColumnName)
    {
      string error = "";
      switch (ColumnName.ToLower())
      {
        case "dataname" :
          if (   string.IsNullOrEmpty(oDR[ColumnName].ToString() )
            || oDR[ColumnName].ToString().Length < 4 )
            error = "Name Minimum 4 characters";

          break;
      }

      // the datarow "SetColumnError" is what hooks the "HasErrors" validation
      // in similar fashion as IDataErrorInfo.
      oDR.SetColumnError(Columns[ColumnName], error);

      return error;
    }
  }
} 
```

这是 XAML。任何全新的窗体，这是窗口默认“网格”中的唯一控件。

尝试了以下版本，只定义了 Rows[0][Column]

```
<TextBox Name="myTextBox" 
    Width="120"
    Text="{Binding  Path=Rows[0][DataName], 
                    ValidatesOnDataErrors=True,
                    UpdateSourceTrigger=PropertyChanged }" /> 
```

包括“滴滴涕”的来源，因为它对窗口是公开的

```
<TextBox Name="myTextBox" 
    Width="120"
    Text="{Binding  Source=DDT, Path=Rows[0][DataName], 
                    ValidatesOnDataErrors=True,
                    UpdateSourceTrigger=PropertyChanged }" /> 
```

甚至grantnz提供的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:00:01.757

我认为当您期望它成为当前窗口上的属性 DDT 时，您的 xaml 将源设置为字符串“DDT”。

您是否在 Visual Studio 的输出窗口中看到错误，例如：

```
System.Windows.Data Error: 40 : BindingExpression path error: 
'Rows' property not found on 'object' ''String' (HashCode=1130459074)'.
BindingExpression:Path=Rows[0][DataName]; DataItem='String' (HashCode=1130459074); 
target element is 'TextBox' (Name=''); target property is 'Text' (type 'String') 
```

如果将窗口 DataContext 设置为此（来自代码 DataContext = this; 或[xaml](https://stackoverflow.com/questions/7192588/set-datacontext-in-xaml)），则可以使用：

```
 Text="{Binding  Path=DDT.Rows[0][DataName], 
                     ValidatesOnDataErrors=True,
                     UpdateSourceTrigger=PropertyChanged }" /> 
```

或者您可以将 DataContext 保留为 null 并使用：

```
 <TextBox Name="myTextBox" 
     Text="{Binding  RelativeSource={RelativeSource FindAncestor, 
           AncestorType={x:Type Window}},Path=DDT.Rows[0][DataName], 
                     ValidatesOnDataErrors=True,
                     UpdateSourceTrigger=PropertyChanged }" /> 
```

以上假设您在设置绑定之前设置 DDT 属性。如果在配置绑定后设置了 DDT，则需要实现 INotifyPropertyChanged。

这是工作版本的来源（从 XAML 设置 DataContext 并实现了 INotifyPropertyChanged）。如果您注释掉该行，它将不起作用

```
OnPropertyChanged(new PropertyChangedEventArgs("DDT")); 
```

如果您从 XAML 中省略以下内容，则第二个 TextBox 将被绑定

```
DataContext="{Binding RelativeSource={RelativeSource Self}}" 
```

代码

```
public partial class MainWindow : Window, INotifyPropertyChanged
{

    public DataTable DDT { get; set; }
    public String SP { get; set; }

    public MainWindow()
    {

        InitializeComponent();
        DDT = new DerivedDataTable();
        OnPropertyChanged(new PropertyChangedEventArgs("DDT"));
        SP = "String prop";
    }
    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, e);
    }        

} 
```

XAML

```
<Window x:Class="BindingTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    DataContext="{Binding RelativeSource={RelativeSource Self}}">

<StackPanel>
    <TextBox 
     Text="{Binding  RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}},Path=DDT.Rows[0][DataName], 
                     ValidatesOnDataErrors=True,
                     UpdateSourceTrigger=PropertyChanged }" />
    <TextBox
     Text="{Binding  Path=DDT.Rows[0][DataName], 
                     ValidatesOnDataErrors=True,
                     UpdateSourceTrigger=PropertyChanged }" />
    <TextBox
     Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}},Path=SP}" />
    </StackPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:13:01.957

已解决，但是 PITA 是什么... MVVM 模式示例中的大多数内容都会在视图模型上具有属性，从而暴露您想要挂钩的任何内容。在处理绑定到 DATATABLE（或类似视图等）时，您将绑定到所述表（或视图）的 COLUMN。

当从任何后端查询表时，填充数据列的模式将始终强制列名为大写。

因此，如果您的表中有一个列“InvoiceTotal”，则在查询时，列名将其为“INVOICETOTAL”。

如果您尝试绑定到

```
Path="InvoiceTotal" ... it will fail

Path="INVOICETOTAL" ... it WILL WORK 
```

但是，如果您直接在 .Net 中工作（我使用 C#），则以下内容都将从行中返回一个值

```
double SomeValue = (double)MyTable.Rows[0]["InvoiceTotal"];
or
double SomeValue = (double)MyTable.Rows[0]["INVOICETotal"];
or
double SomeValue = (double)MyTable.Rows[0]["invoicetotal"]; 
```

无论列名是否区分大小写。

因此，现在其余的绑定，在表、行或列级别可用的错误触发器可以正确地反映在 GUI 中给用户。

我当然希望这可以为其他人省去我对此进行的头痛和研究....

# c++ - 使用带有嵌套向量的迭代器的意外行为

> ID：10368741
> 
> 赞同：4
> 
> 时间：2012-04-29T00:32:46.463
> 
> 标签：c++, vector, iterator, c++11

此示例程序获取一个迭代器，该迭代器指向另一个向量中包含的向量的元素。我将另一个元素添加到包含向量中，然后打印出先前获得的迭代器的值：

```
#include <vector>
#include <iostream>

int main(int argc, char const *argv[])
{
    std::vector<std::vector<int> > foo(3, std::vector<int>(3, 1));
    std::vector<int>::iterator foo_it = foo[0].begin();
    std::cout << "*foo_it: " << *foo_it << std::endl;
    foo.push_back(std::vector<int>(3, 2));
    std::cout << "*foo_it: " << *foo_it << std::endl;
    return 0;
} 
```

由于对应的向量`foo_it`没有被修改，我希望迭代器仍然有效。但是，当我运行此代码时，我得到以下输出（也在[ideone](http://ideone.com/hYWdV)上）：

```
*foo_it: 1
*foo_it: 0 
```

作为参考，我使用 g++ 版本 4.2 和 4.6 以及 clang 3.1 得到了这个结果。但是，我使用 g++ 使用`-std=c++0x`( [ideone link](http://ideone.com/zXQs9) ) 以及同时使用and `clang`时获得了预期的输出。`-std=c++0x``-stdlib=libc++`

我是否在这里以某种方式调用了一些未定义的行为？如果是这样，这是现在定义的行为 C++11 吗？或者这只是一个编译器/标准库错误？

**编辑**我现在可以看到，在 C++03 中，迭代器无效，因为向量的元素在重新分配时被复制。但是我仍然想知道这在 C++11 中是否有效（即向量的元素是否保证被移动而不是复制，并且移动向量不会使其迭代器无效）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T00:35:47.273

`push_back`使迭代器无效，就这么简单。

```
std::vector<int>::iterator foo_it = foo[0].begin();
foo.push_back(std::vector<int>(3, 2)); 
```

在此之后，`foo_ti`不再有效。任何 insert/push_back 都有可能在内部重新分配向量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T00:40:56.673

> 由于对应的向量`foo_it`没有被修改

错误的。`push_back`破坏了对应的向量`foo_it`。销毁`foo_it`时失效 。`foo[0]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T00:46:06.087

我猜误解是 vector< vector < int >> 是一个指针向量，当重新分配外部指针时，指向内部指针的指针仍然有效，这对于 **int 是正确的。但相反，重新分配向量也会重新分配所有内部向量，这也会使内部迭代器无效。

# git - 使用git在工作目录中未编入索引但从未删除的文件？

> ID：10368742
> 
> 赞同：1
> 
> 时间：2012-04-29T00:32:51.313
> 
> 标签：git, file, branch

在不同的项目中，我总是有几个我不想索引的文件，但也不想删除它们！
前任。文本文件中的想法，IDE 的帮助文件等。
它们可能包含一些机密信息，所以我真的不想将它们放在索引中。

当我创建`git checkout newbranch`这些文件时，这些文件不在分支中，因此它们将被删除并且我无法将它们带回来，因为我在任何其他地方都没有它们。

我怎样才能让这些文件永远不会被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:51:10.040

[将它们添加到 .gitignore](http://book.git-scm.com/4_ignoring_files.html)

顺便说一句，这是一个链接，它解释了一切。

# c++ - 在 stl 类型的调试视图中减少噪音

> ID：10368748
> 
> 赞同：9
> 
> 时间：2012-04-29T00:35:20.390
> 
> 标签：c++, visual-studio, stl

TL;DR：是否可以为开发人员清理来自 stl 的长类型名称的 Visual Studio 调试器/智能感知/编译器输出中显示的类型信息？

C++，视觉工作室

考虑代码：

```
std::map<int, int> m; 
```

考虑**类型**信息

1.  观察窗口 ![观察窗口](../Images/42cc9a99ea19fc0fc84d414c9973fc59.png)

2.  将鼠标悬停在标识符上 ![鼠标移到](../Images/01c9eb8c2b9bcc8b946aac3d6a479b34.png)

3.  Intellisense 提示（方法的参数，为简洁起见格式化图像） ![方法参数](../Images/5fd30d3d24119dd844c336c9f76b8706.png)

4.  （如＃3）在您键入名称时对标识符进行智能感知完成 ![智能感知](../Images/73cffa9688515ca3f5ab40c4408d0360.png)

这些案例中的每一个都显示 stl 容器的类型描述是一长串不常需要的细节。

我注意到 Visual Studio 2011 现在显示`string`为`std::string`（一个了不起的改进），而不是`std::basic_string<char, std::char_traits<char>, std::allocator<char>>`- 但这对于我测试过的其他 stl 类型不会发生。

我知道它为什么显示该信息，我知道该信息是正确的，并且在某些情况下至关重要。我只是认为，大多数时候，开发人员不在乎，`map<int, int>`就足够了。有什么方法可以格式化或配置输出以减少噪音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:08:10.920

您正在寻找的工具 STLFilt (http://www.bdsoft.com/tools/stlfilt.html)。

礼貌：http://yosefk.com/c++fqa/templates.html#fqa-35.17

尽管对于初学者来说，难以理解的警告/错误解码可能很麻烦，但如果您想成为专业人士，我建议您习惯它。

# php - 尝试获取包括空格在内的所有字符时 preg_match_all 不起作用

> ID：10368749
> 
> 赞同：0
> 
> 时间：2012-04-29T00:35:27.550
> 
> 标签：php, mysql, preg-match, preg-match-all

这是我的功能：

```
function grabstuff()
{
    foreach (glob("../folder/*.php") as $fn) 
    {
        $file = file_get_contents($fn);

        preg_match_all("#\{\('(\w+)'\)}#", $file, $matches);   

        foreach ($matches[1] as $match) 
        {

            $query = ("ALTER TABLE xxxxx ADD COLUMN `$match` LONGTEXT AFTER xxxxx;");

            $result = mysql_query($query) or die("Err: ".mysql_error());

        }
    }
} 
```

这是它在页面上查找的内容：

```
<?/*{('test test')}*/?> 
```

它忽略了这个有空格的实例。它适用于 testtest 和 test_test。没有收到任何 php 错误或 mysql 错误。我需要使用`\w+\S`or`\w+\W`吗？我尝试了这两个，甚至（...）但它仍然没有工作。如何让我的上述函数识别 {('')} 中的任何字符，无论它们是普通的 abc 字符还是空格。我确信这很简单。我已经对谷歌和这里进行了研究，但无法找到解决方案。（如果有帮助的话，任何给定页面上都会有多个 {('')} 实例）。我已经使用这个功能有一段时间了，但想添加包含空格的功能。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T00:42:16.603

```
'(\w+)' 
```

`\w`是所有字母数字字符和下划线 - 不包括空格。只需使用字符集：

```
'([\w\s]+)' 
```

# php - 使用 php-reader (zend) 读取专辑封面

> ID：10368750
> 
> 赞同：0
> 
> 时间：2012-04-29T00:35:33.187
> 
> 标签：php, zend-framework

我一直在尝试使用 Zend Id3v2 类（[php-reader](http://code.google.com/p/php-reader/)）从 MP3 中获取专辑插图（apic），但它似乎并不想正常工作。是否有其他已被证明有效的 php-reader 库可用？

此外，由于某种原因，函数中的所有 require_once 调用都设置为 'Zend/...' 而不是像 require_once $_SERVER['DOCUMENT_ROOT'].'/Zend...' 这样的绝对路径，这会破坏它们因为他们试图访问当前目录中名为“Zend”的子文件夹，该目录是 Zend 的子目录。我也无法使用 Finder & Replace 将其设置为绝对路径，而无需手动浏览每个文件，因为此类中的文件已锁定。SMH 面罩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T09:54:02.197

Zend Framework 1 的编写假设您`Zend`的存储文件夹位于 include_path 上。

例如

```
define('LIBRARY_PATH', __DIR__ . '/../library');

set_include_path(implode(PATH_SEPARATOR, array(
    realpath(LIBRARY_PATH),
    get_include_path(),
))); 
```

这假设您在同级文件夹中运行此代码，`library`并且您的 Zend Framework 文件位于`library/Zend`

# php - 如何解析从 php 中的 jQuery ajax 调用接收到的 json 数据

> ID：10368754
> 
> 赞同：1
> 
> 时间：2012-04-29T00:35:50.733
> 
> 标签：php, jquery, json

在创建对象并使用 jquery.json 将其转换为 json 之后，我通过 ajax 调用 php 脚本（getNum.php）。现在我想在 php 端处理对象。 `print_r($_POST['data'])`不起作用，我尝试过的任何其他方法都不起作用。

这是我的代码：

```
// create object
    var bing= new Object();
    bing.id = 99;
    bing.nameList = getBingList();

    //create pdf
    $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "getNum.php",
    dataType: "html",
    data: $.toJSON(bing),
    success: function(data){
        alert(data);
        window.location = "generateBing.php?num="+data
    }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:47:54.413

如果您`print_r($_POST['data'])`用于显示内容，则还需要将其作为“数据”发送。

```
$.ajax({
    type: "POST",
    url: "getNum.php",
    data: {data: $.toJSON(bing)},
    success: function(data){
        alert(data);
        window.location = "generateBing.php?num="+data
    }
}); 
```

否则你必须做`print_r($_POST)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T00:43:43.373

由于您直接发布 JSON 对象，因此 $_POST 没有参数名称。您需要阅读 POST 请求的原始内容。尝试这个：

```
$data = json_decode(file_get_contents('php://input'));
print_r($data); 
```

# magento - 如何在 Magento 的购物车中显示原价

> ID：10368757
> 
> 赞同：1
> 
> 时间：2012-04-29T00:36:11.907
> 
> 标签：magento, shopping-cart

我在尝试在 Magento 的购物车中显示原始单价时遇到问题。默认情况下，Magento 只显示特价，但我也想显示原价以突出节省。

我知道哪个模板需要更改，即 /template/checkout/cart/item/default.phtml。

在第 145 行它显示

```
<?php 
 echo $this->helper('checkout')->
               formatPrice($_incl-$_item->getWeeeTaxDisposition())
?> 
```

显示特价。我只是不知道显示原始价格的语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T02:14:05.000

请参阅下面的替代方法，我不确定 $_item->getPrice 是否可以访问非特价，所以将其跳到产品

```
 <?php echo $_item->getProduct()->getPrice(); ?> 
```

内

```
 <?php foreach($this->getItems() as $_item): ?>
             <?php echo $this->getItemHtml($_item) ?>
        // insert it here
             <?php endforeach ?> 
```

# haskell - 关于haskell，如何在文件中定义函数？

> ID：10368759
> 
> 赞同：1
> 
> 时间：2012-04-29T00:36:31.763
> 
> 标签：haskell

我是haskell的新手。

我有这样的代码段

```
lucky:: Int->String
lucky 7 = "LUCKY NUMBER SEVEN!"
lucky x = "Sorry , youre out of luck pal!" 
```

我尝试直接输入到终端，似乎不对。但是如果我想把它放在文件中并加载这个文件，然后调用幸运函数。我应该如何构建这个文件？谢谢！

我试过这个：

```
module Main where
lucky:: Int->String
lucky 7 = "LUCKY NUMBER SEVEN!"
lucky x = "Sorry , youre out of luck pal!" 

main = do 
```

但是当我尝试在终端中调用lucky时，我得到了这个：

```
factorial.hs:7:8: Empty 'do' construct
lucky 7

<interactive>:1:1: Not in scope: `lucky' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T00:42:50.653

问题是您的最后一行 ,`main = do`是语法错误；如果您的文件有语法错误，则不会加载其中的任何函数。如果您取出 main 的定义并尝试加载它，它应该可以正常工作。

在一个不相关的注释上，通常 Haskell 类型签名是用空格写的，比如`lucky :: Int -> String`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T01:39:19.267

您不需要`module Main where`or`main = do`行。

您可以将函数定义加载和使用到 ghci 中，只需将文件保存为“.hs”扩展名，然后键入`:load`文件名

# c# - Simple linq2sql query to display in crystal report

> ID：10368761
> 
> 赞同：0
> 
> 时间：2012-04-29T00:37:17.270
> 
> 标签：c#, winforms, linq-to-sql, c#-4.0, crystal-reports

I am new to crystal reports and would like to to display sql data on a crystal report using linq2sql. So far i am just trying to display one field (tripNo) with no luck. My error is the data source object is invalid. Here is my code.

```
private void runstuff()
    {
        using (DataClasses1DataContext db = new DataClasses1DataContext())
        {
            var test = (from s in db.trips
                        select s.tripNo).First();

            CrystalReport1 cr1 = new CrystalReport1();
            cr1.SetDataSource(test);
            crystalReportViewer1.ReportSource = cr1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:40:23.227

It's been quite a while since I've used Crystal. However, the problem seems to be the type of 'test'. Crystal probably doesn't know what to do with this. You might want to try this. Note, I've removed the First() method so that a list of rows are returned and then I convert this to a List of entities. Crystal should be able to handle this.

```
var test = (from s in db.trips
            select s.tripNo).ToList();

            CrystalReport1 cr1 = new CrystalReport1();
            cr1.SetDataSource(test); 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:17:54.693

The app.config file needed this line

```
<startup useLegacyV2RuntimeActivationPolicy="true"> 
```

# python - 美丽的汤页面源错误

> ID：10368763
> 
> 赞同：1
> 
> 时间：2012-04-29T00:37:40.723
> 
> 标签：python, web-crawler, beautifulsoup, urllib2

我正在尝试从此 usl 获取 html 源代码：http: [//books.google.com/books ?id=NZlV0M5Ije4C&dq=isbn:0470284889](http://books.google.com/books?id=NZlV0M5Ije4C&dq=isbn:0470284889)

我使用了以下代码：

```
#!/usr/bin/env python

import urllib, urllib2, urlparse, argparse, re
from bs4 import BeautifulSoup

def getPageSoup(address):
    request = urllib2.Request(address, None, {'User-Agent':'Mozilla/5.0 (compatible; MSIE 6.0; Windows NT 5.1)'} )
    urlfile = urllib2.urlopen(request)
    page = urlfile.read()
    urlfile.close()
    print 'soup has been obtained!'
    return BeautifulSoup(page)

soup2 = getPageSoup(address)
metadata = soup2.findAll("metadata_row")#this content is present when viewing from the web browser 
```

但是，soup2 的 html 源代码看起来与 Google 图书页面的源代码不太一样：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html><head><title>Quantitative Trading: How to Build Your Own Algorithmic Trading Business - Ernie Chan - Google Books</title><script>(function(){function a(c){this.t={};this.tick=function(c,e,b){b=void 0!=b?b:(new Date).getTime();this.t[c]=[b,e]};this.tick("start",null,c)}var d=new a;window.jstiming={Timer:a,load:d};try{var f=null;window.chrome&amp;&amp;window.chrome.csi&amp;&amp;(f=Math.floor(window.chrome.csi().pageT));null==f&amp;&amp;window.gtbExternal&amp;&amp;(f=window.gtbExternal.pageT());null==f&amp;&amp;window.external&amp;&amp;(f=window.external.pageT);f&amp;&amp;(window.jstiming.pt=f)}catch(g){};})();
    </script><link href="/books/css/_9937a87cb2905e754d8d5e36995f224d/kl_about_this_book_kennedy_full_bundle.css" rel="stylesheet" type="text/css"/></head></html> 
```

来自 urllib2 的 HTML 源代码和我的网络浏览器非常不同。如何获得正确的页面源？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T00:45:36.500

这是正确的页面来源。页面的所有可见内容都是由 JavaScript 生成的。因此，使用 urllib 获取实际内容是不可能的。你应该使用浏览器扩展、webkit 绑定或类似的东西。

# algorithm - 生成漂亮的 BETA 密钥

> ID：10368768
> 
> 赞同：3
> 
> 时间：2012-04-29T00:39:37.010
> 
> 标签：algorithm, math, encryption, random, beta

我构建了一个即将启动 beta 测试的 Web 应用程序。我真的很想分发看起来不错的 beta 邀请和密钥。

即A3E6-7C24-9876-235B

这是大约 16 个字符的十六进制数字。它看起来像您可能会看到的典型 beta 密钥。我的问题是生成这样的东西的标准方法是什么，并确保它是唯一的，并且有人猜测 beta 密钥并生成自己的密钥并不容易。

我有一些可能适用于 beta 密钥的想法：

*   MD5 对此足够安全，但它又长又难看，可能会导致 0 和 O 或 1 和 l 之间的混淆。
*   我可以从一个长度为 16 位的大十六进制数开始。为了防止人们猜测下一个 beta 密钥可能每次都会将值增加一个随机数。即使我跳过大量数字，1111-1111-1111-1111 和 eeee-eeee-eeee-eeee 之间的数字范围也会有足够的空间。

我想我只是想知道是否有一种我在谷歌找不到的标准方法。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:54:41.177

规范的“唯一标识号”是[uuid](http://en.wikipedia.org/wiki/Universally_unique_identifier)。有多种形式 - 例如，您可以从随机数（版本 4）或某个值的哈希（用户的电子邮件 + salt？）（版本 3 和 5）生成一种。

存在用于 java、python 和更多库的库。

PS我必须补充一点，当我阅读您的问题标题时，我认为您正在寻找一些很酷和不同的东西。您可能会考虑使用“有趣”的单词列表并将单词与连字符组合来对数字进行编码（基于电子邮件 + salt 的哈希值）。恕我直言，这将更具吸引力：“您的 beta 代码是 secret-wombat-cookie-ninja”（我确定我读过一篇描述示例的文章，但现在找不到）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T01:02:07.090

一种方法（C#，但代码很简单，可以移植到其他语言）：

```
private static readonly Random random = new Random(Guid.NewGuid().GetHashCode());

static void Main(string[] args)
{
    string x = GenerateBetaString();
}

public static string GenerateBetaString()
{
    const string alphabet = "ABCDEF0123456789";

    string x = GenerateRandomString(16, alphabet);

    return x.Substring(0, 4) + "-" + x.Substring(4, 4) + "-"
         + x.Substring(8, 4) + "-" + x.Substring(12, 4);
}

public static string GenerateRandomString(int length, string alphabet)
{
    int maxlen = alphabet.Length;
    StringBuilder randomChars = new StringBuilder(length);

    for (int i = 0; i < length; i++)
    {
        randomChars.Append(alphabet[random.Next(0, maxlen)]);
    }

    return randomChars.ToString();
} 
```

输出：

```
97A8-55E5-C6B8-959E
8C60-6597-B71D-5CAF
8E1B-B625-68ED-107B
A6B5-1D2E-8D77-EB99
5595-E8DC-3A47-0605 
```

这样做可以让您精确控制字母表中的字符。如果您需要加密强度随机性（不太可能），请使用 cryto 随机类来生成随机字节（可能修改字母长度）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T21:17:42.813

计算能力很便宜，采用您对 MD5 的想法并运行您自己设计的“美学”。下面的代码几乎瞬间生成了 2000 个唯一键，其中没有`0,1,L,O`字符。修改`aesthetic`以适应任何附加条件：

```
import random, hashlib

def potential_key():
    x = random.random()
    m = hashlib.md5()
    m.update(str(x))
    s = m.hexdigest().upper()[:16]
    return "%s-%s-%s-%s" % (s[:4],s[4:8],s[8:12],s[12:])

def aesthetic(s):
    bad_chars = ["0","1","L","O"]
    for b in bad_chars: 
        if b in s: return False
    return True

key_set = set()

while len(key_set) < 2000:
    k = potential_key()
    if aesthetic(k): 
        key_set.add(k)

print key_set 
```

示例键：

```
'4297-CAC6-9DA8-625A', '43DD-2ED4-E4F8-3E8D', '4A8D-D5EF-C7A3-E4D5', 
'A68D-9986-4489-B66C', '9B23-6259-9832-9639', '2C36-FE65-EDDB-2CF7', 
'BFB6-7769-4993-CD86', 'B4F4-E278-D672-3D2C', 'EEC4-3357-2EAB-96F5', 
'6B69-C6DA-99C3-7B67', '9ED7-FED5-3CC6-D4C6', 'D3AA-AF48-6379-92EF', ... 
```

# c - 将指针的地址存储在 C 中的无符号整数中

> ID：10368777
> 
> 赞同：5
> 
> 时间：2012-04-29T00:41:25.503
> 
> 标签：c, casting, pthreads

是否可以将指针转换为无符号整数，然后再将其转换回指针？我试图将指向结构的指针存储在 pthread_t 变量中，但我似乎无法让它工作。这是我的一些代码片段（我正在创建一个用户级线程管理库）。当我尝试打印线程的 tid 时，它给了我一些很长的垃圾号。

编辑：没关系，我让它工作了。

我变了

```
thread = (pthread_t) currentThread; 
```

到

```
*thread = (pthread_t) currentThread; 
```

以为是这样的蠢事。

* * *

测试程序：

```
pthread_t thread1;
pthread_t thread2;

pthread_create(&thread1, NULL, runner, NULL);
pthread_create(&thread2, NULL, runner, NULL);
pthread_join(&thread2, NULL); 
```

我的图书馆：

```
typedef struct queueItem
{
    int tid;
    ucontext_t context;

    int caller;

    struct queueItem *joiningOn;
    struct queueItem *nextContext;
} queueItem;

int pthread_create(pthread_t *thread, const pthread_attr_t *attr, void *(*start_routine) (void *), void *arg)
{
    thread = (pthread_t) currentThread;
}

...

int pthread_join(pthread_t thread, void **retval)
{
    queueItem *t = (queueItem *) thread;

    if(runningContext->joiningOn != NULL) // Current thread is already waiting on another
        return EINVAL;
    if(t == NULL) // If thread to join on is invalid
        return 0;

    fprintf(stdout, "JOINEE: %d\n", t->tid); // Prints weird number

    runningContext->caller = JOIN;
    runningContext->joiningOn = t;
    swapcontext(&(runningContext->context), &scheduleContext);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T00:48:51.463

不。在许多系统上，指针类型大于 int 类型。如果您在使用 pthread_t 时遇到问题，请询问它，int 不是答案。

例如，在我的机器上，以下代码：

```
#include <stdio.h>

int main() {
        printf("unsigned int = %lu\n", sizeof(unsigned int));
        printf("pointer = %lu\n", sizeof(void*));
        return 0;
} 
```

输出：

```
unsigned int = 4
pointer = 8 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T00:43:04.600

当然，如果您确保 unsigned int 与系统上的 void* 大小相同，那么这是可能的。

如果您有一些不起作用的代码，请将其发布。

编辑：你应该阅读关于`intptr_t`，例如在这里：[为什么/何时使用`intptr_t`在C中进行类型转换？](https://stackoverflow.com/questions/6326338/why-when-to-use-intptr-t-for-type-casting-in-c)

# objective-c - Titanium iOS 模块可以访问 Titanium 应用程序中的文件吗？

> ID：10368780
> 
> 赞同：2
> 
> 时间：2012-04-29T00:41:59.327
> 
> 标签：objective-c, module, titanium, clipboard, gif

我在尝试使用 Titanium 将动画 gif 放到 iOS 中的剪贴板上时遇到[了一些死胡同，这样我就可以让用户将其粘贴到彩信中。](http://developer.appcelerator.com/question/136205/copy-animated-gif-to-clipboard-pass-image-path-or-binary-data-to-module)

我正在考虑尝试创建一个简单的 Titanium 模块，以使用 Objective C 将图像放到剪贴板上。[此链接](https://stackoverflow.com/questions/6982492/want-to-paste-gif-into-mail-window-using-uipasteboard)包含执行此操作的代码。

我的问题是，Titanium 模块可以访问我在 Titanium 应用程序资源文件夹中的文件吗？如果是这样，我可以将路径传递到模块中。

如果没有，那么我可能需要将二进制图像数据传递到模块中（这可能不起作用，因为使用 blob 将图像放在剪贴板上不起作用）

另一种方法可能是将所有图像放入模块本身。

# javascript - Javascript - JSON date formatting

> ID：10368783
> 
> 赞同：1
> 
> 时间：2012-04-29T00:42:22.627
> 
> 标签：javascript, json

With some help from some fellow stack users, I currently have this:

> [http://jsfiddle.net/wZETP/](http://jsfiddle.net/wZETP/)

The JSON data gives me the {start.date} in YYYY-MM-DD formatting, but I would like to know how to implement a date change to:

> Mon 01 Jan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:57:49.210

Convert your date string `"2012-05-29"` to Date object:

```
var parts = date.split("-");
var d = new Date(parts[0], parts[1], parts[2]); 
```

Then use dateFormat from [here](http://blog.stevenlevithan.com/archives/date-time-format):

```
return d.format("ddd dd mmm"); 
```

[Working fiddle](http://jsfiddle.net/riateche/wZETP/1/)

# android - 如何在运行时检查 android 安全权限？

> ID：10368785
> 
> 赞同：5
> 
> 时间：2012-04-29T00:42:40.180
> 
> 标签：android, security, permissions

这个问题之前在[Android 如何强制执行权限？](https://stackoverflow.com/questions/5734411/how-does-android-enforce-permissions). 虽然那里的讨论很好，但问题仍然没有完全回答。

在开发环境中，当应用尝试执行需要未在 AndroidManifest.xml 中声明的权限的操作时，会引发异常。那么运行时系统是如何实现运行时检查的呢？

我想这很可能是在核心框架中完成的，它可能需要也可能不需要本机代码的支持。但是我不知道 AOSP 中的哪些源代码文件与此相关。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T01:40:46.030

Android 使用了很多标准的 Linux（-kernel？）机制，尤其是在硬件限制方面。

每个应用程序都被分配了一个新的唯一（Linux-）用户 ID，并且每当创建应用程序进程时，系统都会使用该用户 ID 创建它。除非您删除应用程序，否则 id 永远不会改变。这意味着为了访问较低的系统级别，您的应用程序将显示为特定用户，并且与用户一起使用的每个 (Linux-) 权限系统也将适用于您的应用程序。

如果您`WRITE_EXTERNAL_STORAGE`在清单中请求，您的应用也将成为（Linux-）组（称为`sdcard_rw`）的成员，该组有权写入该存储。文件系统上的权限被强制只允许写入`system`用户（=所有者）和`sdcard_rw`组，其他任何人（=其他）只能读取。另请参阅[Google 是否阻止应用程序写入 SD 卡](http://www.chainfire.eu/articles/113/Is_Google_blocking_apps_writing_to_SD_cards_/)

通过这样做，Android 几乎什么都不做，除了设置应用程序启动后它生成的进程的正确 UID/GID，其余部分在较低级别处理。不属于某个组的应用程序根本无法访问某些硬件。

权限 <> 组映射列表：[platform.xml](https://github.com/android/platform_frameworks_base/blob/master/data/etc/platform.xml)

还有一些（Android 软件）限制基于您的应用程序的签名和/或仅通过查找您的应用程序请求的权限：例如[ContextImpl#checkPermission()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/app/ContextImpl.java#ContextImpl.checkPermission%28java.lang.String%2Cint%2Cint%29) - 但必须在每个入口点检查这些权限允许受限操作的代码。

人们有时会发现一些方法，例如以编程方式打开 GPS，因为这样的检查在某处丢失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T01:58:07.333

关于您的第二段，“异常”是运行时错误。在构建时不强制执行权限，仅在运行时强制执行。

访问硬件、低级操作系统资源和系统文件通常需要应用程序用户 ID 是适当组的成员，该组可能由包管理器分配，因为具有相应的 android 权限。（熟悉的例子是网络套接字和 zapl 提到的 sdcard 写入，还有系统专用的东西，比如直接与 GSM 调制解调器交谈或读取原始触摸屏坐标）。

对于大多数通过调用库函数来完成的android操作，这些库函数是与运行在不同进程中的服务进行进程间通信的存根，运行在ipc请求接收端的更高特权进程中的平台代码会检查包manager 来确定调用应用程序是否具有必要的 android 权限。

许多特殊权限仅适用于使用系统签名签名的应用程序 - 即使另一个应用程序在其清单中声明了这些权限，包管理器也不会应用它们。

# c# - System.Uri 的问题

> ID：10368789
> 
> 赞同：1
> 
> 时间：2012-04-29T00:44:05.203
> 
> 标签：c#, uri

我在`System.Uri`课堂上有一个意想不到的行为。当创建 的实例`System.Uri`，并且`UrlString`有一些模式，如`...`、 或`...#`、 或`.#`时，`System.Uri`删除所有重复的`.`字符。

这很奇怪，但我相信这种行为是基于 RFC 2396。

当我尝试从以下 URL 下载 HTML 时，问题就开始了：[http ://www.submarino.com.br/produto/1/23853463/mundo+segundo+steve+jobs,+o:+as+frases+mais+灵感+](http://www.submarino.com.br/produto/1/23853463/mundo+segundo+steve+jobs,+o:+as+frases+mais+inspiradoras+) ...

并且`System.Uri`删除所有重复`.`的s。由于网站无法识别“新 URL”，它会重定向到原始 URL。然后抛出“System.Net.WebException：尝试了太多自动重定向”并且永远无法到达该页面。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:47:00.200

您可以使用反射来删除该特定属性。`Uri`在你打电话之前使用这个：

```
MethodInfo getSyntax = typeof(UriParser).GetMethod("GetSyntax", System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.NonPublic);
FieldInfo flagsField = typeof(UriParser).GetField("m_Flags", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
if (getSyntax != null && flagsField != null)
{
    foreach (string scheme in new[] { "http", "https" })
    {
        UriParser parser = (UriParser)getSyntax.Invoke(null, new object[] { scheme });
        if (parser != null)
        {
            int flagsValue = (int)flagsField.GetValue(parser);
            // Clear the CanonicalizeAsFilePath attribute
            if ((flagsValue & 0x1000000) != 0)
                flagsField.SetValue(parser, flagsValue & ~0x1000000);
        }
    }
} 
```

之前已经向[Connect报告过](https://connect.microsoft.com/VisualStudio/feedback/details/386695/system-ur)。

# c - RPC C 程序中的 fprintf 问题

> ID：10368791
> 
> 赞同：3
> 
> 时间：2012-04-29T00:44:26.057
> 
> 标签：c, rpc

我在我的 RPC 程序中遇到了 fprintf 的问题。它会打开一个文件，但不会将内容读入文件。它将使用 printf 打印内容，但 fprint 将文件留空。我该如何解决这个问题？谢谢

```
#include <rpc/rpc.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include"lab5.h"

char * filename(char *str)
{

    file = str;
    printf("filename = %s\n",file);
    return file;
}

int writefile(char *content)
{
    FILE *fp1;
    fp1 = fopen("recfile.txt", "w");
    if(fp1 == NULL)
    {
        printf("File can't be created\n");
        return 0;
    }
    printf("%s\n",content);
    int i = fprintf(fp1, "%s", content);
    printf("i = %d\n",i);
    close(fp1);
    return 1;   
}

int findwordcount(char* searchword)
{
    char *grep;
    int count;
    int status;
    FILE *fp;
    grep = (char*)calloc(150, sizeof(char));
    strcpy(grep, "grep -c \"");
    strcat(grep, searchword);
    strcat(grep, "\" ");
    strcat(grep, "recfile.txt");
    strcat(grep, " > wordcount.txt");
    status = system(grep);
    printf("status = %d\n", status);
    if(status != 0)
    {
        count = 0;
    }
    else
    {
        fp = fopen("wordcount.txt", "r");   
        fscanf(fp, "%d", &count);
        printf("count = %d\n", count);
    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T03:42:28.030

在您`int writefile (char *content);`当前使用的函数中`close(fp1);`。而不是关闭文件，你应该`fclose(fp1)`改为。

# vector - C++中带有向量的关联数组

> ID：10368794
> 
> 赞同：0
> 
> 时间：2012-04-29T00:45:38.560
> 
> 标签：vector, maps, associative-array

我需要用矢量来实现我的地图。我的地图布局如下：

```
map<strong,double> mapName; 
```

我需要转换为向量，以便可以对元素进行线性搜索。

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:56:38.653

您可以使用向量的范围构造函数轻松转换为向量，如下所示：

```
 map<string,double> item_map;
 // ... populate item map ...

 // copy elements to a vector.
 vector< pair<string,double> > item_vector(item_map.begin(), item_map.end()); 
```

但是，如果只需要进行线性搜索，则不需要复制元素。只需像这样对项目进行迭代：

```
 typedef map<string,double>::iterator iterator;
 iterator current = item_map.begin();
 const iterator end = item_map.end();
 for (; current != end; ++current) {
     // current->first is the 'string' part.
     // current->second is the 'double' part.
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T00:55:42.460

您不必转换为矢量即可进行线性搜索。您可以使用 C++ 迭代器来获取映射的开头和结尾，然后使用 first 和 second 访问键和值。

[看到这个](http://www.cplusplus.com/reference/stl/map/)

例如：

```
for (map<strong, double>::iterator ii = mapName.begin(); 
    ii!=mapName.end();ii++) {
      cout << ii->first << endl;  //returns a key
      cou << ii->second << endl; //returns ii->first's current corresponding value.
} 
```

# python - 如何在Python中获取目录中的文件名列表

> ID：10368796
> 
> 赞同：3
> 
> 时间：2012-04-29T00:46:01.477
> 
> 标签：python

**问题：**

在我的“D:/collection”文件夹中，我有两种类型的文件，即“8-digit-number_type.dbf”和“character_type.dbf”，如下所示：00093282.dbf、00345602.dbf、69209340.dbf、69806980 .dbf, 92406482.dbf, 93609360.dbf,..., aaa.dbf, bbb.dbf,....

**客观的：**

我只想获取“8-digit-number_type.dbf”文件，并从我的分析中排除“character_type.dbf”文件。我不关心“character_type.dbf”文件。然后，我想将 8 位数字拆分为两个 4 位数字值。因此，包含两列的列表文件（例如，list.txt）应如下所示：

```
0009 3282
0034 5602
6920 9340
6980 6980
9240 6482
9360 9360
.... 
```

并且这些值应该存储为字符类型。

如何在 Python 中实现它？谢谢你。

此致，比尔 TP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:53:45.030

```
>>> import os
>>> paths = ['00093282.dbf', '00345602.dbf', '69209340.dbf', '69806980.dbf', '92406482.dbf', '93609360.dbf','aaa.dbf', 'bbb.dbf']
>>> for path in paths:
        file_name,ext = os.path.splitext(path)
        if file_name.isdigit():
            print '{0} {1}'.format(file_name[:4],file_name[4:])

0009 3282
0034 5602
6920 9340
6980 6980
9240 6482
9360 9360 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:09:43.547

要使用`os.listdir(path)`jamylak 的解决方案，只需将 import 语句`from os import listdir`放在第二行并将路径声明更改为`paths = listdir('D:/')`

# android - 如何禁用 android listview 中的过度滚动和反弹？

> ID：10368801
> 
> 赞同：8
> 
> 时间：2012-04-29T00:46:51.930
> 
> 标签：android, listview, scroll

我的列表视图在 2 台设备上的行为是，当我过度滚动它时它会变成黄色/橙色，或者它可以被过度滚动然后回弹。后一种行为很糟糕，因为它显示了我想要阻止的背景。

我试过了：

```
listview.setOverScrollMode(ListView.OVER_SCROLL_NEVER); 
```

它不再显示背景，但现在有一个非常烦人的反弹效果。是否可以同时禁用弹跳和过度滚动并使其滚动结束时没有任何影响？

PS：我在两台设备上都使用 android 2.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T05:03:12.790

这是我解决这个问题的方法，希望它对那些搜索的人有所帮助。关键是将一个 OnScrollListener 附加到列表中，跟踪何时处理一个投掷手势，以及何时到达列表的末尾。然后，当抛掷仍在进行时，如果系统试图移动它，请继续将位置重置到最后。

```
private ListView mListView;
private ListAdapter mAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my_list);

    mListView = (ListView) findViewById(R.id.listView);
    mAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, getList(25));
    mListView.setAdapter(mAdapter);
    mListView.setOverScrollMode(View.OVER_SCROLL_NEVER);
    if(Build.VERSION.SDK_INT == Build.VERSION_CODES.GINGERBREAD || Build.VERSION.SDK_INT == Build.VERSION_CODES.GINGERBREAD_MR1){
        mListView.setOnScrollListener(new OnScrollListener(){
            private boolean flinging = false;
            private boolean reachedEnd = false;

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
                flinging = (scrollState == AbsListView.OnScrollListener.SCROLL_STATE_FLING);
                reachedEnd = false;
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                if(reachedEnd && flinging && (firstVisibleItem + visibleItemCount < totalItemCount)){
                    mListView.setSelection(mAdapter.getCount() - 1);
                }else if(firstVisibleItem + visibleItemCount == totalItemCount){
                    reachedEnd = true;
                }else{
                    reachedEnd = false;
                }

            }

        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:27:45.490

您可以创建一个 mylistview 类，扩展 listview，您可以覆盖 overScrollBy 方法并将 maxOverScrollY 设置为零

# node.js - node.js 读取文件问题

> ID：10368806
> 
> 赞同：9
> 
> 时间：2012-04-29T00:48:41.110
> 
> 标签：node.js

下面的代码创建一个文本文件，然后读取它，覆盖它，然后再次读取它。除了创建文件之外，三个 I/O 操作都是使用 Node.js 异步 readFile 和 writeFile 执行的。

我不明白为什么第一次读取**没有返回错误**但**也没有数据**。这段代码的输出是：

*   开始...
*   完毕。
*   **首次读取返回 EMPTY 数据！**
*   写完OK
*   第二次读取返回的数据：更新的文本

即使操作以任意顺序发生（由于它们的异步性质），我也不希望得到一个“空数据”对象。

任何想法为什么我在读取文件时得到一个空数据（并且没有错误）？

我可以做些什么来确保读取文件内容吗？

```
var fs = require('fs');
var fileName = __dirname + '/test.txt';

// Create the test file (this is sync on purpose)
fs.writeFileSync(fileName, 'initial test text', 'utf8');

console.log("Starting...");

// Read async
fs.readFile(fileName, 'utf8', function(err, data) {
    var msg = "";
    if(err)
        console.log("first read returned error: ", err);
    else {
        if (data === null) 
            console.log("first read returned NULL data!");
        else if (data === "") 
            console.log("first read returned EMPTY data!");
        else
            console.log("first read returned data: ", data);
    }
});

// Write async
fs.writeFile(fileName, 'updated text', 'utf8', function(err) {
    var msg = "";
    if(err)
        console.log("write finished with error: ", err);
    else
        console.log("write finished OK");
});

// Read async
fs.readFile(fileName, 'utf8', function(err, data) {
    var msg = "";
    if(err)
        console.log("second read returned error: ", err);
    else
        if (data === null) 
            console.log("second read returned NULL data!");
        else if (data === "") 
            console.log("second read returned EMPTY data!");
        else
            console.log("second read returned data: ", data);
});

console.log("Done."); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-29T01:05:38.253

您的代码*要求*竞争条件。*您的第一次同步写入可能正在写入文件，但随后您的第一次读取、第二次写入和第二次读取同时*放入事件循环中。

这里可能发生了什么？第一次读取从文件系统获得读取权限，第二次写入从文件系统获得写入权限并立即将文件归零以供将来更新，然后第一次读取读取现在为空的文件。然后第二次写入开始写入数据，第二次读取在完成之前不会获得读取权限。

如果你想避免这种情况，你需要使用流程：

```
fs.writeFileSync(filename, 'initial', 'utf8');
fs.readFile(filename, 'utf8', function(err, data) {
    console.log(data);
    fs.writeFile(filename, 'text', 'utf8', function(err) {
        fs.readFile(filename, 'utf8', function(err, data) {
            console.log(data);
        });
    });
}); 
```

如果那个“金字塔”侮辱了你的编程敏感性（为什么不呢？）使用[async library](https://github.com/caolan/async)的`series`功能：

```
fs.writeFileSync(filename, 'initial', 'utf8');
async.series([
    function(callback) {
        fs.readFile(filename, 'utf8', callback);
    },
    function(callback) {
        fs.writeFile(filename, 'text', 'utf8', callback);
    },
    function(callback) {
        fs.readFile(filename, 'utf8', callback);
    }
], function(err, results) {
    if(err) console.log(err);
    console.log(results); // Should be: ['initial', null, 'text']
}); 
```

编辑：对于不熟悉`async`库和现代 Javascript 功能的人来说更紧凑，但也更“神奇”：

```
fs.writeFileSync(filename, 'initial', 'utf8');
async.series([
    fs.readFile.bind(this, filename, 'utf8'),
    fs.writeFile.bind(this, filename, 'text', 'utf8'),
    fs.readFile.bind(this, filename, 'utf8'),
], function(err, results) {
    if(err) console.log(err);
    console.log(results); // Should be: ['initial', null, 'text']
}); 
```

EDIT2：无需查找`bind`. 第一个参数必须是`this`对象（或任何您想用作的对象`this`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-17T19:53:23.880

我有一个类似的问题。我正在将文本写入文件，并且有一个更改处理程序告诉我文件何时更改，此时我尝试异步读取它以进一步处理文件的新内容。

大多数时候都有效，但在某些情况下，异步读取的回调返回一个空字符串。因此，也许更改事件发生在文件完全写入之前，所以当我尝试读取它时，我得到了空字符串。现在人们可能希望 ASYNC 读取能够识别出文件正在写入过程中，因此应该等到写入操作完成。似乎在 Node.js 中写入不会锁定文件不被读取，因此如果您在写入过程中尝试读取，则会得到意想不到的结果。

我能够通过检测 ASYNC 读取的结果是否为空字符串来解决此问题，如果是，则对同一文件进行额外的 SYNC 读取。这似乎产生了正确的内容。是的 SYNC 读取速度较慢，但​​我只在 ASYNC 读取似乎未能产生预期内容时才这样做。

# functional-programming - 在 lambda 表达式中查找自由变量

> ID：10368809
> 
> 赞同：13
> 
> 时间：2012-04-29T00:49:13.803
> 
> 标签：functional-programming, lisp, scheme

有谁知道我如何找出 lambda 表达式中的自由变量？自由变量是不属于 lambda 参数的变量。

我目前的方法（这让我无处可去）是简单地使用 car 和 cdr 来完成表达式。我的主要问题是确定一个值是变量还是方案原语之一。有没有办法测试某些东西是否评估为方案的内置函数之一？例如：

```
(is-scheme-primitive? 'and)
;Value: #t 
```

我正在使用 MIT 方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T12:47:54.320

对于任意 MIT Scheme 程序，没有任何方法可以做到这一点。一个问题是您描述的功能无法正常工作。例如，这不使用“方案原语” `and`：

```
(let ((and 7)) (+ and 1)) 
```

但它肯定使用符号`'and`。

另一个问题是很多东西，比如`and`，都是用宏实现的特殊形式。您需要知道程序中的所有宏都扩展成什么，才能弄清楚程序中使用了哪些变量。

要完成这项工作，您需要限制您接受作为输入的程序集。最好的选择是将其限制为“完全扩展”的程序。换句话说，您要确保`free-variables`函数的输入中没有任何宏的使用。

为此，您可以使用`expand`许多 Scheme 系统提供的功能。不幸的是，从[在线文档](http://www.gnu.org/software/mit-scheme/documentation/mit-scheme-ref/index.html#Top)来看，MIT Scheme 似乎没有提供此功能。如果您能够使用不同的系统，[Racket](http://racket-lang.org/)会提供该[`expand`](http://docs.racket-lang.org/reference/Expanding_Top-Level_Forms.html#%28def._%28%28quote._~23~25kernel%29._expand%29%29)功能以及[`local-expand`](http://docs.racket-lang.org/reference/stxtrans.html?q=local-expand#%28def._%28%28quote._~23~25kernel%29._local-expand%29%29)在宏内部正常工作的功能。

Racket 实际上还提供了您要求的[`free-variables`功能](http://docs.racket-lang.org/syntax/syntax-helpers.html#%28mod-path._syntax/free-vars%29)的实现，正如我所描述的，它需要完全扩展的程序作为输入（例如`expand`or的输出`local-expand`）。您也可以查看[源代码](https://github.com/plt/racket/blob/master/collects/syntax/free-vars.rkt#L46)。

有关完全扩展源代码所涉及问题的详细讨论，请参阅Flatt、Culpepper、Darais 和 Findler[即将发表](http://www.cs.utah.edu/plt/expmodel-6/)的这篇论文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T17:29:39.240

### [编辑 4] 免责声明；或者，一年后回顾：

这实际上是解决这个问题的一个非常糟糕的方法。它作为一种*非常*快速和肮脏的方法可以实现 OP 的基本目标，但不能经受任何“现实生活”用例。请参阅有关此答案的评论中的讨论以及其他答案以了解原因。

### [/编辑]

此解决方案可能不太理想，~~但它适用于您想在 mit-scheme 的 REPL 环境中提供的任何 lambda 形式~~（请参阅编辑）。我使用的程序的文档可以在[mit.edu 文档站点上找到。](http://web.mit.edu/scheme_v9.0.1/doc/mit-scheme-ref/Environments.html#Environments) `get-vars`接受一个引用`lambda`并返回一个对列表。每对的第一个元素是符号，第二个元素是返回的值`environment-reference-type`。

```
(define (flatten lst)
  (cond ((null? lst) ())
        ((pair? (car lst)) (append (flatten (car lst)) (flatten (cdr lst))))
        (else
          (cons (car lst) (flatten (cdr lst))))))

(define (get-free-vars proc-form)
  (let ((env (ge (eval proc-form user-initial-environment))))
    (let loop ((pf (flatten proc-form))
               (out ()))
      (cond ((null? pf) out)
            ((symbol? (car pf))
             (loop (cdr pf) (cons (cons (car pf) (environment-reference-type env (car pf))) out)))
            (else
              (loop (cdr pf) out)))))) 
```

编辑：示例用法：

```
(define a 100)

(get-vars '(lambda (x) (* x a g)))
 => ((g . unbound) (a . normal) (x . unbound) (* . normal) (x . unbound) (lambda . macro)) 
```

编辑 2：更改代码以防止`environment-reference-type`使用符号以外的东西调用调用。

编辑 3：正如 Sam 在评论中指出的那样，这不会看到在 lambda 下的 let 中绑定的符号具有任何值.. 不确定是否有一个简单的解决方法。所以，我关于采取 any的说法`lambda`是错误的，应该读起来更像“任何`lambda`不包含新绑定形式的简单”......哦，好吧。

# python - 解释器中的python多处理池断言错误

> ID：10368810
> 
> 赞同：8
> 
> 时间：2012-04-29T00:49:18.680
> 
> 标签：python, multiprocessing

我正在编写一个示例程序来测试 python 2.7.2+ 中工人多处理池的使用情况

这是我在 python ubuntu 解释器中编写的代码

```
>>> from multiprocessing import Pool
>>> def name_append(first_name,last_name):
...     return first_name+" "+last_name
...

>>> from functools import partial
>>> partial_name_append=partial(name_append,'kiran')
>>> partial_name_append('acb')
'kiran acb'
>>> abc='kiran'

>>> pool=Pool(processes=4)
>>> pool.map(partial_name_append,abc)
['kiran k', 'kiran i', 'kiran r', 'kiran a', 'kiran n']
>>> pool.close()
>>> pool.join()

>>> pool.map(partial_name_append,abc)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/multiprocessing/pool.py", line 226, in map
    assert self._state == RUN
AssertionError 
```

在我得到泡菜错误之后，在我的大型数据集的工人代码池中，我试图做一些小例子并试图找出错误是什么。

我不明白为什么相同的语句 'pool.map' 不起作用，当它在上面起作用时。我想我已经正确执行了“池映射”，但我不明白原因。

这个错误是否与“PicklingError: Can't pickle: attribute lookup **builtin** .function failed”有关

有人可以帮我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-29T00:54:55.757

您输入：

```
>>> pool.close() 
```

[来自文档：](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.close)

> 关闭（）
> 
> 防止任何更多的任务被提交到池中。完成所有任务后，工作进程将退出。

当然你不能再使用游泳池了，你把它关了。

# java - 如何升级 Java 编译器？

> ID：10368812
> 
> 赞同：2
> 
> 时间：2012-04-29T00:49:40.990
> 
> 标签：java, jcreator

我正在使用 JCreator 来处理 Java。我得到了这个异常（或者可能是错误？）它说如下：

> 主版本 51 比 50 新，这是此编译器支持的最高主版本。建议升级编译器。

我下载了 Java SE 的最后一个版本，但是没有用。

顺便说一句，Java 文件编译得很好，也可以毫无问题地运行。但是我已经下载了我的讲师上传的包含许多 java 类的文件，当我尝试运行具有 main 方法的类时会出现此消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:00:49.800

我从来没有使用过 JCreator，但是一点点谷歌搜索给了我[这个 JCreator 安装说明页面](http://www.jcreator.com/installation.htm)，其中包含手动设置 JCreator 使用的 JDK 的以下说明：

*   不使用安装向导启动 JCreator

*   激活 JCreator 后，从“配置”菜单打开“选项”窗口。

*   单击 JDK 配置文件选项。

*   单击列表中的默认项目，然后单击编辑。

*   确保 Name 字段显示所选 JDK 目录的正确版本；在本例中，JDK 版本为 jdk1.6.0。 *[我认为这是一个错字...]*

*   通过单击此字段旁边的浏览按钮来设置 JDK 主路径。

*   浏览到JDK安装的根目录：C:..\jdk1.7.0。单击确定。

*   单击文档选项卡，然后添加路径：C:..\jdk1.7.0\docs。单击确定。

*   关闭窗户。

您的情况略有不同，但我认为这些说明也适用于为现有的 JCreator 安装更改 JDK。

[（使用最新 JDK 安装的路径名......显然。）]

# c++ - 清除 Deque 指针的最佳方法是什么？

> ID：10368814
> 
> 赞同：2
> 
> 时间：2012-04-29T00:50:19.557
> 
> 标签：c++, stl, deque

> **可能重复：**
> [C++ STL：哪种迭代 STL 容器的方法更好？](https://stackoverflow.com/questions/716762/c-stl-which-method-of-iteration-over-a-stl-container-is-better)

在我当前的项目中，我有一个 STL Deque 指针。我还有一个方法可以删除这些指针指向的所有对象。我想出了两种不同的方法来实现这一点，但我无法决定哪种方法是首选方法。

**方法一。**

```
for (deque<MyType*>::const_iterator it = myDeque.begin(); it != myDeque.end(); ++it)
{
    delete *it;
}

myDeque.clear(); 
```

**方法2。**

```
for (int i = 0; i < myDeque.size(); ++i)
{
    delete myDeque[i];
}

myDeque.clear(); 
```

这两种方法都应该有效，但哪种方法更受欢迎？方法 1 使用了 STL，但方法 2 更简单。除了代码清洁度之外，还有什么理由为什么应该使用一种方法而不是另一种方法？尽管创建它的开销很小，但在这种情况下使用迭代器有什么好处吗？

注意：这个问题适用于其他 STL 序列容器，而不仅仅是 Deques。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:26:52.327

除非您真的需要使用指针集合，否则只需使用对象集合即可。

如果你真的需要一个指针集合，那么你可能想要使用类似 Boost[指针容器](http://boost.sourceforge.net/libs/ptr_container/doc/tutorial.html#sequence-containers)的东西来自动删除指针项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T00:59:15.347

我会说 1 更有效，因为递增比随机访问更有效。随机访问需要检索必要的常量并进行完全加法，而递增通常在硬件中非常有效地实现。

但是，当然，初始化迭代器会花费一些成本，因此迭代器变得更高效的元素数量存在阈值，但我希望这个数字非常低。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T00:59:30.103

我不知道这两种方法之间是否有任何区别，但我会使用这个：

```
std::vector<boost::shared_ptr<MyType*> > vec 
```

# php - 如何在 PHP 中构造字节并将其写入二进制文件

> ID：10368817
> 
> 赞同：0
> 
> 时间：2012-04-29T00:50:40.843
> 
> 标签：php, binary, byte, bit, fwrite

我正在尝试将二进制字节写入文件。

我将二进制字节（8位）作为字符串，例如`"01100101"`

如何在 PHP 中将其写为一个字节？当我`fopen`使用它时，`"wb"`它仍然用 ASCII 写它并放入`01100101`一个文件中。我可能对整个过程如何运作感到困惑..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:56:23.103

我想[`pack()`](http://php.net/manual/en/function.pack.php)这就是你要找的。

```
function bin2bstr($input)
// Convert a binary expression (e.g., "100111") into a binary-string
{
    if (!is_string($input)) return null; // Sanity check

    // Pack into a string
    return pack('H*', base_convert($input, 2, 16));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T00:59:28.243

```
$number = bindec("01100101");

$number = 0b01100101; // better 
```

符号 0b... 用于二进制数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T13:45:00.923

```
file_put_contents('aa',pack('ifA5',1001,25.5,'asdfg'));
var_dump(unpack('iint/ffloat/A5lkl',file_get_contents('aa'))); 
```

# ruby-on-rails - 有 time_from_now 宝石吗？

> ID：10368822
> 
> 赞同：0
> 
> 时间：2012-04-29T00:52:17.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在寻找一个给定日期的东西，它将用文字显示从现在开始的时间。例子：

如果今天是 2012 年 4 月 28 日，我想要：

*   4/29 显示“明天”
*   4/30 显示“下周一”
*   4/31 显示“下周二”

已经有这方面的宝石还是我必须自己写？如果我必须写它，那么最干净的方法是什么？我以前没有在rails中写过这样的东西。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T01:20:31.060

我相信您正在寻找`distance_of_time_in_words`帮助程序，它已经[在 Rails 中可用](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)- 它基本上`time_ago_in_words`与**now**，因此可以用来衡量未来而不是过去。

它不会像“下周一”那样为您提供一周中的几天，但是如果您单击`Source: show`帮助程序文档底部的链接，它将为您提供创建帮助程序修改版本所需的代码，很容易地显示星期几信息。[将它与这个答案](https://stackoverflow.com/questions/4044574/how-calculate-the-day-of-the-week-of-a-date-in-ruby)中关于计算星期几的代码结合起来，你就完成了。

# mips - MIPS架构的功能代码

> ID：10368826
> 
> 赞同：0
> 
> 时间：2012-04-29T00:53:03.960
> 
> 标签：mips, computer-architecture

我正在审查一个问题，在给定 MIPS 指令的情况下，我必须写下与操作码、rs、rt 和函数相对应的 4 个字段的十进制值。我知道 rs 和 rt 的十进制值只是寄存器的十进制表示（即 $s0 是 16）但是我怎么能算出 16 位函数代码呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:30:27.297

每条指令都有自己的操作码和功能码。您可以在此处找到操作码，例如：

[https://www.student.cs.uwaterloo.ca/~isg/res/mips/opcodes](https://www.student.cs.uwaterloo.ca/~isg/res/mips/opcodes)

例如，addi 的前 6 个字节（操作码）是二进制的 001000，接下来是寄存器的 2x5 字节，然后是立即值的 16 个字节

add 为 000000（操作码），后跟 3x5 字节为寄存器，00000 为移位量（本指令不使用），后跟 100000 为功能码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:06:40.460

您无法确定该值。您需要给定该值。每个功能代码做不同的事情，有许多指令具有相同的格式。

# ruby-on-rails-3 - Rails 自动完成并充当可标记

> ID：10368827
> 
> 赞同：1
> 
> 时间：2012-04-29T00:53:09.130
> 
> 标签：ruby-on-rails-3, autocomplete, acts-as-taggable-on

我希望帮助解决问题。我已经从[这里安装 gem rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)

和 gem "acts-as-taggable-on" 从[这里](https://github.com/mbleigh/acts-as-taggable-on)

这是我的历史：

我的模型是

```
class Article <ActiveRecord::Base
       acts_as_taggable_on :tags
       attr_accessible :title, :body, :tag_list 
```

我的控制器是

```
class ArticlesController < ApplicationController
     autocomplete :tag, :name, :class_name => 'ActAsTaggableOn::Tag'
     def tag_cloud
            @tags ||=Article.tag_counts_on(:tags)
     end
     def all
        @tags = Article.tag_counts_on(:tags).limit(8).order('count desc')
        klass = Article
        klass = klass.tagged_with(@tag) if (@tag = params[:tag]).present?
        @articles = klass.where(:state => '4').paginate(:page => params[:page])
        respond_to do |format|
            format.html  # index.html.erb
            format.xml  { render :xml => @articles }
        end
    end 
```

我的路线是

```
resources :articles do
    collection do
    get 'autocomplete_tag_name' 
    get 'about'
    get 'all'
    get 'myarticles'
    delete 'destroy'
            end
end 
```

我的 _form.html.erb

```
<div class="field">
           <label for="tag_list">Κατηγορία (Μπορείτε να προσθέσετε διαφορετικές κατηγορίες διαχωρίζοντάς τες με κόμμα)</label><br />
           <%= f.autocomplete_field :tag_list, autocomplete_tag_name_articles_path, :"data-delimiter" => ', ' %>
</div> 
```

我的 index.html.erb

```
<div class='tag-box'>
          <% @tags.sort_by(&:count).reverse.each do |k| %>
                    <% url_opts = {:action => "all", :controller => "articles"}
                    link_name = "#{k.name} (#{k.count})" %>
                    <% if @tag == k.name %>
                             <%= link_to link_name, url_opts.merge(:tag => nil), :class => "tag current_tag", :title => "Κλικ για εμφάνιση όλων" %>
                    <% else %>
                             <%= link_to link_name,  url_opts.merge(:tag => k.name), :class => "tag", :title => "Κλικ για εμφάνιση άρθρων στην κατηγορία #{k.name}" %>
                    <% end %>
          <% end %>
</div> 
```

我的 application.html.erb

```
<%= stylesheet_link_tag :all %>
<%= javascript_include_tag :defaults %>
<%= javascript_include_tag 'jquery-1.7.2.min.js', 'jquery-ui-1.8.19.custom.min.js', 'autocomplete-rails.js', 'rails.js'  %>
<%= stylesheet_link_tag 'jquery-ui-1.8.19.custom.css' %> 
```

最后我的 Gemfile

```
gem 'rails', '3.0.11'
gem 'pg'
gem 'jquery-rails', '>= 1.0.12'
gem 'rails3-jquery-autocomplete'
gem 'acts-as-taggable-on', '~> 2.2.2' 
```

在应用程序中可以使用标记系统，但不能使用自动完成功能。

也许我的问题出在文件 _form.html.erb 上。我在文件 new.html.erb 上有代码

```
<section id="myarticles">
     <h2>Νέο άρθρο</h2>
      <%= render 'form' %>
</section> 
```

是关于一起渲染和自动完成而自动完成不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:31:11.923

最后，我的问题的解决方案可以帮助遇到同样情况的人，这很简单。[从jQuery UI-Autocomplete](http://jqueryui.com/demos/autocomplete/)的下载主题中复制文件 jquery-ui-1.8.19.custom.css`public/stylesheets/ui-lightness`或从依赖项中复制`public/stylesheets/smoothness`

并粘贴到 public/stylesheets/ 并自动消失路由错误并瞧瞧自动完成功能。

我已按照[此处的说明进行操作](https://github.com/crowdint/rails3-jquery-autocomplete-app)

> 将 css 文件夹中的文件复制到应用程序的 public/stylesheets 文件夹中。请注意，这些文件可能位于 css 文件夹的下一层，位于名为“ui-lightness”的文件夹中。

但正确的位置在目录 public/stylesheets 上。还从 mycontroller 中删除以下代码`:class_name => 'ActAsTaggableOn::Tag'`，现在代码看起来像

```
class ArticlesController < ApplicationController
          autocomplete :tag, :name 
```

# asp.net - 使用 Web 服务 ASP.Net（不是 WCF）的配置问题

> ID：10368828
> 
> 赞同：1
> 
> 时间：2012-04-29T00:53:20.293
> 
> 标签：asp.net, winforms, web-services, soap

好吧，我无法解决以下问题。

我有下一个： * 在 C# + .Net Framework 3.5 + iBatis (VS2010) 中使用一些 WebMethods 进行 Web 服务开发。* Web 服务在本地服务器上运行，在 IIS 5.1 (http://localhost/BookService/BookService.asmx) 中。* 应用程序 WF+C# + .Net Framework 3.5 (VS2010)，其中 BO 层具有对 Web Service 的服务引用。

Service Reference 生成的 app.config 为：

```
<?xml version="1.0" encoding="utf-8" ?>´
<configuration>
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BookServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" 
          maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" 
              maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://10.0.2.15/BookService/BooksService.asmx"
        binding="basicHttpBinding" bindingConfiguration="BookServiceSoap"
        contract="BookService.BookServiceSoap" name="BookServiceSoap" />
    </client>
  </system.serviceModel>
</configuration> 
```

例如，我正在尝试将我连接到网络服务制作

```
BookService.BookServiceSoapClient query = new BookService.BookServiceSoapClient("BookServiceSoap","http://10.0.2.15/BookService/BookService.asmx"); 
```

或者没有端点名称和url BookService.BookServiceSoapClient query = new BookService.BookServiceSoapClient();

但在执行时出现以下信息

**在 ServiceModel 客户端配置部分中找不到名为“BookServiceSoap”和合同“BookService.BookServiceSoap”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。**

有人可以向我展示一个正确的例子来调用例如方法 HelloWorld。

问候！

# ios - 使用 [NSObject load] 初始化没有自动释放池的系统

> ID：10368831
> 
> 赞同：1
> 
> 时间：2012-04-29T00:54:42.150
> 
> 标签：ios, autorelease

我正在使用 Xcode 4.3.2 和 iOS 模拟器编写一个 iPad 应用程序。我有一系列类，我想在启动时向单例注册，以便其他类可以通过这些注册类提供的单例请求服务。

为了实现这种行为，我一直依赖于重写NSObject上的**加载类方法。**但是，我发现在有机会设置自动释放池之前，所有由**load方法执行的代码都发生在 main 函数之外。**我在我的应用程序中使用了一些 3rd 方技术，当前禁止使用或自动引用计数，因此我需要依靠自动释放池来帮助管理创建对象的生命周期。

在注册过程中，模拟器的调试控制台中出现了许多消息，抱怨在没有自动释放池的情况下调用了自动释放。其中之一与单例分配的字典有关。其他与从堆栈中复制并存储在该单例字典中的块对象有关。

我不清楚这些调试消息有多严重。我怀疑字典的分配可能没有问题，因为单例应该存在于应用程序的生命周期中，并且该字典可能永远不会被释放。**同样，存储在字典中的块也应该保留，所以我想知道在调用复制**方法后是否不需要在它们上调用 autorelease 。

或者，也许还有另一种方法可以完成我想要的，而不必诉诸当前可能不太成问题的技术

人们可以对这个问题提出什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:28:36.183

您应该有更好的运气覆盖`+[NSObject initialize]`而不是`load`,`initialize`在第一次引用类时调用，而不是在加载类所在的图像时调用。这将使您更好地处理这一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:32:56.417

一个好的方法是使用`dispatch_once_t`，它在每个运行时只在所有线程中执行一次：

```
+ (id)sharedInstance
{
    static dispatch_once_t once;
    static SingletonClass *sharedInstance;
    dispatch_once(&once, ^ { sharedInstance = [[self alloc] init]; });
    return sharedInstance;
} 
```

# ruby-on-rails - 多对多关联

> ID：10368832
> 
> 赞同：2
> 
> 时间：2012-04-29T00:54:49.517
> 
> 标签：ruby-on-rails

所以我有一个代表这种情况的模型：

*   学生参加比赛。
*   比赛衡量某些技能。
*   在每场比赛中，每个学生都会获得所测量的每项技能的分数。

这是我的模型：

```
class Student < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  attr_accessible :name
  has_and_belongs_to_many :skills
  has_many :contest_participations
  has_many :contests, :through => :contest_participations
  has_many :contest_scores, :through => :contests

end

class Skill < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :students
end

class Contest < ActiveRecord::Base
  attr_accessible :name, :contest_participations_attributes, :contest_scores_attributes
  has_many :contest_participations
  has_many :students, :through => :contest_participations
  has_many :contest_skills
  has_many :skills, :through => :contest_skills
  has_many :contest_scores
  accepts_nested_attributes_for :contest_participations, :contest_scores

end

class ContestParticipation < ActiveRecord::Base
  attr_accessible :contest_id, :student_id
  belongs_to :student
  belongs_to :contest
end

class ContestScore < ActiveRecord::Base
  attr_accessible :contest_id, :score, :skill_id, :student_id
  has_and_belongs_to_many :contests
  has_and_belongs_to_many :skills
  has_and_belongs_to_many :student
end 
```

在我的比赛编辑视图中，我正在尝试使用 formtastic 创建一个表格，该表格将显示所有比赛参与者，并允许用户为比赛中的每个技能添加分数，如下所示。

但我收到一个错误（student_id 无效符号）。如何更新学生成绩？

```
<%= semantic_form_for @contest do |f| %>

    <%= f.input :name %>

    <%= @contest.students.each do |student| %>
         <%= @contest.skills.each do |skill| %>
               <%= f.inputs :name => "Scores", :for => :contest_scores do |scores_form| %>
                     <%= scores_form.input :student_id => "student.id" %>
                     <%= scores_form.input :skill_id => "skill.id" %>
                     <%= scores_form.input :score, :label => "Score" %>
               <% end %>
               <br />                 
         <% end %>
    <% end %>

    <%= f.actions do %>
         <%= f.action :submit, :as => :button %>
    <% end %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:41:12.350

尝试这个。添加 hidden 因为 e 认为您不希望 id 显示

```
<%= scores_form.input :student_id, :as => :hidden, :value => student.id %>
<%= scores_form.input :skill_id, :as => :hidden, :value => skill.id %> 
```

# python - 复用地址和数据以通过并行端口显示字符串

> ID：10368834
> 
> 赞同：3
> 
> 时间：2012-04-29T00:54:59.310
> 
> 标签：python, parallel-processing, port, multiplexing

一个月前，我问[这个](https://stackoverflow.com/questions/9919550/multiplexing-string-of-numbers-in-python-for-the-parallel-port)关于将一串数字与 4 个 7 段显示器复用的问题。但是现在，我正在尝试更新代码以在 python 中使用 7 个 7 段显示器来复用一串字母。

[这是新电路。](https://i.imgur.com/0QUwn.png)当我使用并行端口发送数据时，Latch Enable 接收最高有效位（引脚 9）。在第二个锁存器中，Latch Enable 也接收它但被否定，这就是 7404 的原因。

即设置地址 (/LE==False) 或设置数据 (/LE=True)。

这就是我想要做的。“X”表示 7 段显示已关闭。但是不能存档。

```
XXXXXXX
XXXXXXS
XXXXXST
XXXXSTA
XXXSTAC
XXSTACK
XSTACKX
STACKX0
TACKX0V
ACKX0V3
CKX0V3R
KX0V3RF
X0VERFL
0VERFL0
VERFL0W
ERFL0WX
RFL0WXX
FL0WXXX
L0WXXXX
0WXXXXX
WXXXXXX
XXXXXXX 
```

这将是字符串“STACK 0V3RFL0W”的输出。

还有过去的代码：

```
import sys
import parallel

class Display(object):

def __init__(self):
    '''Init and blank the "display".'''
    self.display = [' '] * 4
    self._update()

def setData(self,data):
    '''Bits 0-3 are the "value".
       Bits 4-7 are positions 0-3 (first-to-last).
    '''
    self.display = [' '] * 4
    value = data & 0xF
    if data & 0x10:
        self.display[0] = str(value)
    if data & 0x20:
        self.display[1] = str(value)
    if data & 0x40:
        self.display[2] = str(value)
    if data & 0x80:
        self.display[3] = str(value)
    self._update()

def _update(self):
    '''Write over the same four terminal positions each time.'''
    sys.stdout.write(''.join(self.display) + '\r')

if __name__ == '__main__':
p = Display()
pp=parallel.Parallel()
nums = raw_input("Enter a string of numbers: ")

# Shift over the steam four-at-a-time.
stream = 'XXXX' + nums + 'XXXX'
data = [0] * 4
for i in range(len(stream)-3):
    # Precompute data
    for pos in range(4):
        value = stream[i+pos]
        data[pos] = 0 if value == 'X' else (1<<(pos+4)) + int(value)
    # "Flicker" the display...
    for delay in xrange(1000):
        # Display each position briefly.
        for d in data:
            pp.setData(d)
    # Clear the display when done
    p.setData(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:17:58.813

算法大纲：

```
string = "07831505"

while True:
    for i in range(7):
        # switch display `i` on
        notlatch.set(True)
        data.set(1 << i)
        notlatch.set(False)
        time.sleep(<very little>)
        notlatch.set(True)
        # display character on display `i`
        data.set(char_to_7segment(string[i]))
        time.sleep(0.01) 
```

# scheme - 在 Racket 中对列表进行分区

> ID：10368835
> 
> 赞同：11
> 
> 时间：2012-04-29T00:55:16.100
> 
> 标签：scheme, racket

在我正在使用 Racket 处理的应用程序中，我需要获取一个数字列表并将该列表划分为连续数字的子列表：（在实际应用程序中，我实际上将划分由数字和一些数据组成的对，但原理是一样的。）

即如果我的程序被调用`chunkify`，那么：

```
(chunkify '(1 2 3  5 6 7  9 10 11)) -> '((1 2 3) (5 6 7) (9 10 11))  
(chunkify '(1 2 3)) ->  '((1 2 3))  
(chunkify '(1  3 4 5  7  9 10 11 13)) -> '((1) (3 4 5) (7) (9 10 11) (13))  
(chunkify '(1)) -> '((1))  
(chunkify '()) -> '(()) 
```

等等

我在 Racket 中提出了以下内容：

```
#lang racket  
(define (chunkify lst)  
  (call-with-values   
   (lambda ()  
     (for/fold ([chunk '()] [tail '()]) ([cell  (reverse lst)])  
       (cond  
         [(empty? chunk)                     (values (cons cell chunk) tail)]  
         [(equal? (add1 cell) (first chunk)) (values (cons cell chunk) tail)]  
         [else (values   (list cell) (cons  chunk tail))])))  
   cons)) 
```

这工作得很好，但我想知道如果没有更直接更简单的方法来做到这一点，那么我想知道 Racket 的表现力，某种方式来摆脱“带值调用”和需要反转列表在程序等方面，也许有些完全不同。

我的第一次尝试非常松散地基于[“The Little Schemer”](https://rads.stackoverflow.com/amzn/click/com/0262560992)中的收集器模式，这比上面的更简单：

```
(define (chunkify-list lst)  
 (define (lambda-to-chunkify-list chunk) (list chunk))

 (let chunkify1 ([list-of-chunks '()] 
                 [lst lst]
                 [collector lambda-to-chunkify-list])
   (cond 
     [(empty? (rest lst)) (append list-of-chunks (collector (list (first lst))))]
     [(equal? (add1 (first lst)) (second lst))  
      (chunkify1 list-of-chunks (rest lst)
                 (lambda (chunk) (collector (cons (first lst) chunk))))] 
     [else
      (chunkify1 (append list-of-chunks
                         (collector (list (first lst)))) (rest lst) list)]))) 
```

我正在寻找的是简单，简洁和直接的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T04:15:49.743

这是我的做法：

```
;; chunkify : (listof number) -> (listof (non-empty-listof number))
;; Split list into maximal contiguous segments.
(define (chunkify lst)
  (cond [(null? lst) null]
        [else (chunkify/chunk (cdr lst) (list (car lst)))]))

;; chunkify/chunk : (listof number) (non-empty-listof number)
;;               -> (listof (non-empty-listof number)
;; Continues chunkifying a list, given a partial chunk.
;; rchunk is the prefix of the current chunk seen so far, reversed
(define (chunkify/chunk lst rchunk)
  (cond [(and (pair? lst)
              (= (car lst) (add1 (car rchunk))))
         (chunkify/chunk (cdr lst)
                         (cons (car lst) rchunk))]
        [else (cons (reverse rchunk) (chunkify lst))])) 
```

但是，它不同意您的最终测试用例：

```
(chunkify '()) -> '()  ;; not '(()), as you have 
```

我认为我的回答更自然；如果您真的希望答案是`'(())`，那么我将重命名`chunkify`并编写一个专门处理空案例的包装器。

如果您希望避免相互递归，您可以让辅助函数将剩余列表作为第二个值返回，而不是调用`chunkify`它，如下所示：

```
;; chunkify : (listof number) -> (listof (non-empty-listof number))
;; Split list into maximal contiguous segments.
(define (chunkify lst)
  (cond [(null? lst) null]
        [else
         (let-values ([(chunk tail) (get-chunk (cdr lst) (list (car lst)))])
           (cons chunk (chunkify tail)))]))

;; get-chunk : (listof number) (non-empty-listof number)
;;          -> (values (non-empty-listof number) (listof number))
;; Consumes a single chunk, returns chunk and unused tail.
;; rchunk is the prefix of the current chunk seen so far, reversed
(define (get-chunk lst rchunk)
  (cond [(and (pair? lst)
              (= (car lst) (add1 (car rchunk))))
         (get-chunk (cdr lst)
                    (cons (car lst) rchunk))]
        [else (values (reverse rchunk) lst)])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T02:18:48.587

我可以想到一个简单、直接的解决方案，它使用一个过程，只有原始列表操作和尾递归（no `values`, `let-values`, `call-with-values`） - 它非常有效。它适用于所有测试用例，代价是`if`在初始化期间添加几个表达式来处理空列表用例。由您决定这是否简洁：

```
(define (chunkify lst)
  (let ((lst (reverse lst))) ; it's easier if we reverse the input list first
    (let loop ((lst (if (null? lst) '() (cdr lst)))        ; list to chunkify
               (cur (if (null? lst) '() (list (car lst)))) ; current sub-list
               (acc '()))                                  ; accumulated answer
      (cond ((null? lst)                    ; is the input list empty?
             (cons cur acc))
            ((= (add1 (car lst)) (car cur)) ; is this a consecutive number?
             (loop (cdr lst) (cons (car lst) cur) acc))
            (else                           ; time to create a new sub-list
             (loop (cdr lst) (list (car lst)) (cons cur acc))))))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T15:26:35.357

还有另一种方法。

```
#lang racket

(define (split-between pred xs)
  (let loop ([xs xs]
             [ys '()]
             [xss '()])
    (match xs
      [(list)                 (reverse (cons (reverse ys) xss))]
      [(list x)               (reverse (cons (reverse (cons x ys)) xss))]
      [(list x1 x2 more ...)  (if (pred x1 x2) 
                                  (loop more (list x2) (cons (reverse (cons x1 ys)) xss))
                                  (loop (cons x2 more) (cons x1 ys) xss))])))

(define (consecutive? x y)
  (= (+ x 1) y))

(define (group-consecutives xs)
  (split-between (λ (x y) (not (consecutive? x y))) 
                 xs))

(group-consecutives '(1 2 3 5 6 7 9 10 11))
(group-consecutives '(1 2 3))
(group-consecutives '(1 3 4 5 7 9 10 11 13))
(group-consecutives '(1))
(group-consecutives '()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T11:26:03.667

这是我的版本：

```
(define (chunkify lst)
  (let loop ([lst lst] [last #f] [resint '()] [resall '()])
    (if (empty? lst) 
        (append resall (list (reverse resint)))
        (begin
          (let ([ca (car lst)] [cd (cdr lst)])
            (if (or (not last) (= last (sub1 ca)))
                (loop cd ca (cons ca resint) resall)
                (loop cd ca (list ca) (append resall (list (reverse resint)))))))))) 
```

它也适用于最后一个测试用例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T23:21:08.747

我要玩。

从本质上讲，这与所提供的内容并没有太大的不同，但它确实将它放在 for/fold 循环方面。我越来越喜欢 for 循环，因为我认为它们可以生成更多“可见”（不一定可读）的代码。但是，（IMO - 哎呀）在熟悉球拍/方案的早期阶段，我认为最好坚持递归表达式。

```
(define (chunkify lst)  
    (define-syntax-rule (consecutive? n chunk)     
      (= (add1 (car chunk)) n))
    (if (null? lst)
        'special-case:no-chunks
        (reverse 
         (map reverse
              (for/fold  ([store    `((,(car lst)))])
                         ([n         (cdr lst)])
                 (let*([chunk   (car store)])
                   (cond 
                    [(consecutive? n chunk)
                        (cons  (cons n chunk)  (cdr store))]
                    [else
                        (cons  (list n)  (cons chunk (cdr store)))])))))))

(for-each
 (ƛ (lst)  
    (printf "input   :  ~s~n" lst)
    (printf "output  :  ~s~n~n" (chunkify lst)))
 '((1 2 3 5 6 7 9 10 11)
   (1 2 3)
   (1 3 4 5 7 9 10 11 13)
   (1)
   ())) 
```

# installation - Inno Setup if 和语言

> ID：10368836
> 
> 赞同：2
> 
> 时间：2012-04-29T00:55:27.163
> 
> 标签：installation, package, inno-setup, pascal

我想知道如何控制inno setup的语言，我希望当用户在安装后选择英文inno setup会消除意大利语文件，但如果用户选择意大利语，我希望安装后会删除语言文件English。我尝试了这段代码但不起作用：

```
[InstallDelete]
#if {language} = "english"
Type: files; Name: "{commondesktop}\english.txt"
#if {language} = "italian"
Type: files; Name: "{commondesktop}\italian.txt"
#endif 
```

谢谢。

**对不起我的英语不好。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:05:48.100

指令在编译时进行评估，并且在任何情况下 [InstallDelete] 部分都会在设置开始时进行处理。我相信，对于您的情况，最简单的方法是如果用户没有选择相应的安装语言，则首先不要安装该文件：

```
[Languages]
Name: "en"; MessagesFile: "compiler:Default.isl"
Name: "it"; MessagesFile: "compiler:Languages\Italian.isl"

[Files]
Source: "english.txt"; DestDir: "{commondesktop}"; Languages: en;
Source: "italian.txt"; DestDir: "{commondesktop}"; Languages: it; 
```

如果我以某种方式误解了这个问题，您可以使用`DeleteFile`代码中的支持功能来删除文件，例如在“ssDone”或“ssPostInstall”的`CurStepChanged`过程中。`CurStep`

# linux-kernel - Linux如何确定模块init调用的顺序？

> ID：10368837
> 
> 赞同：30
> 
> 时间：2012-04-28T18:19:48.493
> 
> 标签：linux-kernel, embedded, ubifs

我有一个带有 SPI 闪存的设备，我想在该闪存设备上使用 UBIFS 文件系统作为我的 rootfs。我面临的问题是 UBI 模块在 SPI 模块初始化之前初始化。因此，当 UBI 加载时，它无法连接到我告诉它的 UBI 设备（通过内核命令行），因此没有 rootfs。下面的控制台输出说明了这一点。

我已经深入研究了源代码，看到它`init/main.c`有一个`do_initcalls()`简单地调用函数指针列表的函数。这些函数指针指向`module_init()`内核内置模块的所有函数。这些函数指针被放置在内核二进制文件的一个特殊部分，所以这个顺序是在编译时选择的。但是，我还没有弄清楚这个顺序是如何确定的。

```
 [    0.482500] UBI error: ubi_init: UBI error: cannot initialize UBI, error -19
    [    0.492500] atmel_spi atmel_spi.0: Using dma0chan0 (tx) and  dma0chan1 (rx) for DMA transfers
    [    0.500000] atmel_spi atmel_spi.0: Atmel SPI Controller at 0xf0000000 (irq 13)
    [    0.507500] m25p80 spi0.1: mx25l25635e (32768 Kbytes)
    [    0.512500] Creating 7 MTD partitions on "jedec_flash":
    [    0.520000] 0x000000000000-0x000000020000 : "loader"
    [    0.527500] 0x000000020000-0x000000060000 : "u-boot"
    [    0.537500] 0x000000060000-0x000000080000 : "u-boot-env"
    [    0.547500] 0x000000080000-0x000000280000 : "kernel0"
    [    0.557500] 0x000000280000-0x000000480000 : "kernel1"
    [    0.567500] 0x000000480000-0x000001240000 : "fs"
    [    0.575000] 0x000001240000-0x000002000000 : "play"
    [    0.590000] AT91SAM9 Watchdog enabled (heartbeat=15 sec, nowayout=0)
    [    0.607500] TCP cubic registered
    [    0.615000] VFS: Cannot open root device "ubi0:root0" or unknown-block(0,0)
    [    0.622500] Please append a correct "root=" boot option; here are the available partitions:
    [    0.630000] 1f00             128 mtdblock0  (driver?)
    [    0.635000] 1f01             256 mtdblock1  (driver?)
    [    0.640000] 1f02             128 mtdblock2  (driver?)
    [    0.645000] 1f03            2048 mtdblock3  (driver?)
    [    0.650000] 1f04            2048 mtdblock4  (driver?)
    [    0.655000] 1f05           14080 mtdblock5  (driver?)
    [    0.660000] 1f06           14080 mtdblock6  (driver?)
    [    0.665000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-19T23:40:42.897

由内核初始化的模块的 init 例程（当它们静态链接到内核中时）被包装在一个 initcall() 宏中，该宏指示它们应该在启动序列中何时运行。

请参阅包含文件：include/linux/init.h 以获取宏列表及其顺序。

那里指定的顺序是：

*   early_initcall
*   pure_initcall
*   core_initcall
*   postcore_initcall
*   arch_initcall
*   subsys_initcall
*   fs_initcall
*   rootfs_initcall
*   device_initcall
*   后期初始化调用

其中大多数都有一个“initcall_sync() 阶段，用于等待该阶段内所有模块初始化例程的完成。宏用于为每个阶段构建一个函数指针表，由 `do_initcalls()`.

如果使用“module_init()”来包装初始化函数，那么默认情况下initcall() 会将调用置于初始化的“设备”阶段。在该阶段中，项目按链接顺序排序。这意味着表是按照链接器遇到的函数的顺序创建的。

您可以通过更改包含模块初始化函数的 initcall 宏来将初始化移动到较早的阶段，但要小心，因为各个模块之间存在顺序依赖关系。另一种更改初始化顺序（在一个阶段内）的方法是调整内核中模块的链接顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-01T22:50:27.533

@Tim Bird 已经回答了 - 我想展示如何更改模块的顺序：-

```
pure_initcall(fn)         --> Loaded first
core_initcall(fn)         
core_initcall_sync(fn)    
postcore_initcall(fn)     
postcore_initcall_sync(fn)
arch_initcall(fn)         
arch_initcall_sync(fn)    
subsys_initcall(fn)       
subsys_initcall_sync(fn)  
fs_initcall(fn)           
fs_initcall_sync(fn)      
rootfs_initcall(fn)       
device_initcall(fn)       
device_initcall_sync(fn)  
late_initcall(fn)         
late_initcall_sync(fn)    --> Loaded last

Usage - Replace fn by the module init function pointer, example for i2c core driver:
.......
postcore_initcall(i2c_init);  // To delay i2c core loading use subsys_initcall(i2c_init)                
module_exit(i2c_exit);
....... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T14:41:23.050

我可能是错的，所以请检查这是否正确。
尝试将您需要的所有驱动程序编译为模块（M），并将要加载的模块按正确的顺序放入/etc/modules，这样可以解决您的问题。确切地说，因为您是在安装 rootfs*之前*执行此操作，所以上述步骤应该在 initram 磁盘中完成。（我有一个类似的场景，我需要以正确的顺序加载一些模块，以便能够解密 fs）

希望这对
CiaoCiao
Sergio有所帮助

# php - 从 cron 运行 php 脚本而不选择从 CLI 运行的 $_SERVER['host'] 有效

> ID：10368839
> 
> 赞同：1
> 
> 时间：2012-04-29T00:55:51.180
> 
> 标签：php, linux, cron, centos, command-line-interface

如前所述，当我像这样运行直接 PHP 脚本时：

```
# /usr/bin/php path/to/script.php 
```

我能够使用环境变量

但是当我从 cron 运行这个脚本时：

```
* * * * * /usr/bin/php path/to/script.php 
```

脚本运行，但我所有的环境变量都是空的。

如何通过 cron 模拟 CLI？

（在centOS / linux上）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:00:28.623

您可以编写一个脚本来设置您想要存在的环境变量：

```
#!/bin/bash

export ENV_VAR_ONE="value one"
export ENV_VAR_TWO="value two"
/usr/bin/php path/to/script.php 
```

然后从 cron 调用该脚本。

# asp.net-mvc-3 - MVC3 父子视图

> ID：10368840
> 
> 赞同：1
> 
> 时间：2012-04-29T00:56:04.900
> 
> 标签：asp.net-mvc-3

我想创建一个类似于 Stack Overflow 上的用户页面的布局，其中页面顶部有一个视图（父视图），然后是选项卡中的内容，每个都有自己的视图（子视图）。

当我将鼠标悬停在 SO 中“用户”页面上的每个选项卡上时，它们看起来像是指向用户控制器，并被发送到查询字符串中的选项卡名称以呈现适当的选项卡内容。

我相信我可以使用在父视图中定义的部分的布局来实现这一点。该部分将是子视图，但我不知道如何告诉该部分显示哪个视图或部分视图。

我无法在网上找到任何有用的东西。有人可以告诉我如何做到这一点，或者至少为我指明正确的方向吗？

提前致谢！

**编辑：**感谢@Mystere 的帮助，我能够想出下面的解决方案，以防其他人尝试做同样的事情。

高温高压

**最终解决方案：**

**控制器动作**

```
public ActionResult Details(int id, string tab = null)
{   
    ViewBag.Jobid = id;
    ViewBag.Tab = tab ?? "Services";

    var viewModel = getJobRecordDetails(id);

    return View(viewModel);
}

public ActionResult JobInfo(int id, string tab)
{
    ViewBag.Jobid = id;
    ViewBag.Tab = tab;

    if (tab == "Services")
    {
        var viewModel = getServices(id);
        return View("Services", viewModel);   
    }

    if (tab == "Equipment")
    {
        var viewModel = getEquipment(id);
        return View("Equipment", viewModel);
    }

    if (tab == "Personnel")
    {
        var viewModel = getPersonnel(id);
        return View("Personnel", viewModel);
    }

    return View("Error");
} 
```

**父视图**

```
@model MyApplication.Models.JobViewModel

@{
    ViewBag.Title = "Details";
}
<h2>Job Details</h2>

...
@* Child View Action *@
@Html.Action("JobInfo", new { id = ViewBag.Jobid, tab = ViewBag.Tab }) 
```

**子视图**

```
@model MyApplication.Models.ServicesViewModel[]

@{
    ViewBag.Title = "Services";
    Layout = null;
}

@* Submenu Navigation *@
@{
    Html.RenderPartial("SubMenu");
}

<h2>Services</h2>

Services here... 
```

**子导航部分视图**

```
<div id="submenucontainer">
<ul id="submenu">
    <li class="@Html.ActiveTab("Job","JobInfo","Services")"><a href="@Url.Action("Details", "Job", new { id = @ViewBag.Jobid, tab = "Services" })">Services</a> </li>
    <li class="@Html.ActiveTab("Job","JobInfo","Equipment")"><a href="@Url.Action("Details", "Job", new { id = @ViewBag.Jobid, tab = "Equipment" })">Equipment</a></li>
    <li class="@Html.ActiveTab("Job","JobInfo","Personnel")"><a href="@Url.Action("Details", "Job", new { id = @ViewBag.Jobid, tab = "Personnel" })">Personnel</a></li>
</ul> 
```

**ActiveTab 助手**

```
public static string ActiveTab(this HtmlHelper helper, string controller, string action, string tab)
{
    var classValue = "";

    var currentController =
            helper.ViewContext.Controller.ValueProvider.GetValue("controller").RawValue.ToString();

    var currentAction =
            helper.ViewContext.Controller.ValueProvider.GetValue("action").RawValue.ToString();

    var currentTab = helper.ViewContext.Controller.ValueProvider.GetValue("tab").RawValue.ToString();

    if (currentController == controller && currentAction == action && currentTab == tab)
        classValue = "selected";

    return classValue;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:04:24.490

他们不太可能为此使用一个部分。部分主要用于布局页面（母版页的等效项）。

很可能，它们只有多个视图，并且它们将适合 View() 方法的视图传递给 View() 方法。他们可能会使用部分视图或 MVC 模板来呈现选项卡区域，以便将通用代码分解出来。

编辑：

根据要求，代码示例：

在行动方法：

```
public ActionResult Dashboard(string tab) {
    if (tab == "summary") 
        ViewBag.Tab = "~/Views/Dashboard/Summary.cshtml";
    if (tab == "activity")
        ViewBag.Tab = "~/Views/Dashboard/Activity.cshtml";

    return View()
} 
```

在仪表板.cshmtl

```
... your parent view

@Html.Partial(ViewBag.Tab)

... your footer 
```

这不是火箭科学。有很多方法可以做到这一点，想出其中一种并不需要太多思考。

# php - SQL 联系网站

> ID：10368841
> 
> 赞同：0
> 
> 时间：2012-04-29T00:56:05.440
> 
> 标签：php, sql, database

我想制作一个个人使用的网站，将我的联系人存储在数据库中。我如何从数据库中选择所有联系人并将它们回显出来？我在数据库中有他们的名字和姓氏，我想知道如何获取他们的每个名字并将它们呼应出来。

这是我到目前为止得到的地方：

```
$query = "SELECT * FROM contacts";
$query_run = mysql_query($query);
if($query_run = mysql_query($query)) {
    while($query_row = mysql_fetch_assoc($query_run)) {

    }
} 
```

但我不知道如何选择它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:58:42.900

该行只是一个关联数组 - 像往常一样索引它。

```
$query = "SELECT * FROM contacts";
$query_run = mysql_query($query);
if($query_run = mysql_query($query)) {
    while($query_row = mysql_fetch_assoc($query_run)) {
        **echo $query_row['firstname'];** // Or whatever you called the field
    }
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T00:59:11.627

```
$query = "SELECT * FROM contacts";
$query_run = mysql_query($query);
if($query_run = mysql_query($query)){
    while($query_row = mysql_fetch_assoc($query_run)){
      echo query_row["firstname"]." ".query_row["lastname"];    
    }
} 
```

# java - 数独求解器错误

> ID：10368846
> 
> 赞同：6
> 
> 时间：2012-04-29T00:56:59.983
> 
> 标签：java, sudoku

我不知道自己做错了什么，整天盯着这段代码。这是 Java 中的“标准”数独求解器，它`int[][]`在空格所在的位置采用 0。鉴于我只传了一块有 35 个孔的板，这应该能够解决绝大多数问题，但只能解决 ~66%。在其他情况下，剩下几个（通常是 2 或 4 个）空格，无法解决（即，写入了不正确的数字`board`。）几乎总是会丢失 9。

我知道这样一个简单的解决方案并不能解决所有的数独游戏。我故意给它简单的。

```
import java.util.ArrayList;
import java.util.List;

public class SudokuSolver
{
    public SudokuSolver()
    {
        init();
    }

    public boolean solve()
    {
        /* Each method checks (in different ways) to see if it can find a new number
            If said method does find a number, it sets off a chain reaction, starting back at the beginning.
        */
        int countdown = 20;
        while(!solved() && --countdown > 0)
        {
            if(given())
                continue;
            if(findSingletons())
                continue;
            if(zerosLeft() <= 4)
                justGuess();
        }
        return solved();
    }

    public boolean given()
    {
        boolean repeat = false;
        //Iterate through every given number
        for(int i=0;i<9;i++)
        {
            for(int j=0;j<9;j++)
            {
                if(board[i][j] != 0 && !found[i][j])
                {
                    repeat = true;
                    foundNum(i, j, board[i][j]);
                }
            }
        }
        //Call given every time a new number is found
        return repeat;
    }

    public boolean findSingletons()
    {
        boolean repeat = false;
        //LOTS of iteration, but I'm out of ideas.
        int[] values;
        ArrayList<Integer> singletons = new ArrayList<Integer>();
        for(int i=0;i<9;i++)
        {
            values = new int[10];
            singletons.clear();
            for(int j=0;j<9;j++)
                for(int k=0;k<possible[i][j].size();k++)
                    values[possible[i][j].get(k)]++;
            for(int j=1;j<10;j++)
                if(values[j] == 1)
                    singletons.add(j);
            for(int j=0;j<9;j++)
                for(int k=0;k<singletons.size();k++)
                    if(possible[i][j].contains(singletons.get(k)))
                    {
                        foundNum(i, j, singletons.get(k));
                        repeat = true;
                    }
        }

        for(int i=0;i<9;i++)
        {
            values = new int[10];
            singletons.clear();
            for(int j=0;j<9;j++)
                for(int k=0;k<possible[j][i].size();k++)
                    values[possible[j][i].get(k)]++;
            for(int j=1;j<10;j++)
                if(values[j] == 1)
                    singletons.add(j);
            for(int j=0;j<9;j++)
                for(int k=0;k<singletons.size();k++)
                    if(possible[j][i].contains(singletons.get(k)))
                    {
                        foundNum(j, i, singletons.get(k));
                        repeat = true;
                    }
        }

        int[] corners = {0,3,6};
        for(int a=0;a<3;a++)
            for(int l=0;l<3;l++)
                for(int i=corners[a];i<corners[a]+3;i++)
                {
                    values = new int[10];
                    singletons.clear();
                    for(int j=corners[l];j<corners[l]+3;j++)
                        for(int k=0;k<possible[i][j].size();k++)
                            values[possible[i][j].get(k)]++;
                    for(int j=1;j<10;j++)
                        if(values[j] == 1)
                            singletons.add(j);
                    for(int j=0;j<9;j++)
                        for(int k=0;k<singletons.size();k++)
                            if(possible[i][j].contains(singletons.get(k)))
                            {
                                foundNum(i, j, singletons.get(k));
                                repeat = true;
                            }
                }
        return repeat;
    }

    public void justGuess()
    {
        outer:
        for(int i=0;i<9;i++)
            for(int j=0;j<9;j++)
                if(board[i][j] == 0)
                {
                    foundNum(i, j, possible[i][j].get(0));
                    break outer;
                }
    }

    public void foundNum(int x, int y, int numFound)
    {

        if(board[x][y] != 0 && board[x][y] != numFound)
        {
            throw new RuntimeException("Attempting to place a number where one was already found");
        }

        board[x][y] = numFound;
        possible[x][y].clear();
        possible[x][y].add(numFound);
        found[x][y] = true;

        for(int i=0;i<9;i++) {
            if(i != x)
                if(possible[i][y].indexOf(numFound) != -1)
                    possible[i][y].remove(possible[i][y].indexOf(numFound));
        }
        for(int i=0;i<9;i++) {
            if(i != y)
                if(possible[x][i].indexOf(numFound) != -1)
                    possible[x][i].remove(possible[x][i].indexOf(numFound));
        }
        int cornerX = 0;
        int cornerY = 0;
        if(x > 2)
            if(x > 5)
                cornerX = 6;
            else
                cornerX = 3;
        if(y > 2)
            if(y > 5)
                cornerY = 6;
            else
                cornerY = 3;
        for(int i=cornerX;i<10 && i<cornerX+3;i++)
            for(int j=cornerY;j<10 && j<cornerY+3;j++)
                if(i != x && j != y)
                    if(possible[i][j].indexOf(numFound) != -1)
                        possible[i][j].remove(possible[i][j].indexOf(numFound));
    }

    public boolean solved() {
        for(int i=0;i<9;i++)
            for(int j=0;j<9;j++)
                if(!found[i][j])
                    return false;
        return true;
    }

    public void reset(int[][] board)
    {
        this.board = board;
        init();
    }

    public void init()
    {
        possible = new ArrayList[9][9];
        for(int i=0;i<9;i++)
            for(int j=0;j<9;j++)
            {
                possible[i][j] = new ArrayList<Integer>();
                for(int k=1;k<10;k++)
                    possible[i][j].add(k);
            }
        found = new boolean[9][9];
    }

    public void print()
    {
        for(int i=0;i<9;i++)
        {
            if(i%3==0 && i != 0)
                System.out.println("-  -  -  | -  -  -  |  -  -  -");
            for(int j=0;j<9;j++)
            {
                if(j%3==0 & j != 0)
                    System.out.print("| ");
                System.out.print(board[i][j] + "  ");
            }
            System.out.println();
        }
        System.out.println();
    }

    private int zerosLeft()
    {
        int empty = 0;
        for(int i=0;i<9;i++)
            for(int j=0;j<9;j++)
                if(board[i][j] == 0)
                    empty++;
        return empty;
    }

    private void data(int difficulty)
    {
        int empty = 0;
        for(int i=0;i<9;i++)
            for(int j=0;j<9;j++)
                if(board[i][j] == 0)
                    empty++;
        System.out.println(empty);
    }

    public static void main(String[] args)
    {
        SudokuGenerator sg = new SudokuGenerator();
        SudokuSolver ss = new SudokuSolver();
        int[][] tempBoard = {{4, 0, 1, 0, 9, 7, 0, 5, 8 },
                        {2, 0, 0, 5, 3, 1, 4, 0, 6 },
                        {5, 0, 6, 4, 0, 2, 0, 3, 9 },
                        {0, 9, 0, 0, 0, 4, 3, 0, 2 },
                        {0, 0, 0, 9, 0, 0, 6, 4, 7 },
                        {7, 0, 4, 0, 0, 0, 9, 0, 5 },
                        {0, 0, 7, 0, 0, 3, 8, 9, 4 },
                        {8, 5, 0, 1, 4, 9, 7, 0, 0 },
                        {9, 0, 3, 8, 7, 6, 0, 0, 0 }};
        ss.reset(tempBoard);
        System.out.println(ss.solve());
        ss.print();
        ss.data(35);
    }

    int[][] board;
    ArrayList<Integer>[][] possible;
    boolean[][] found;
} 
```

我还是编程新手，所以除了解决这个问题之外的任何建议都会受到欢迎。（特别优化`possible`. 这是我迄今为止写的最亵渎的代码。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T21:45:39.000

我开始阅读您的代码，但感觉比应该的要长，而且这些循环变得非常混乱。没有什么会立即向我跳出来。您确实说过您不仅想要解决方案，还想要建议。

您必须弄清楚问题是否出在您的设计上（它不适用于解决数独问题），或者是否在实现中的某个地方存在一个简单的错误。也许通过并写评论每个循环正在完成什么，“橡皮鸭测试”，被迫解释一切，你会停下来并意识到某些事情是不必要的，或者不是它需要的。这有助于解决设计问题。

如果问题是实现，你知道如何正式调试应用程序吗？设置断点并逐条执行？如果你有一个小错误，但你不知道在哪里，那就是要走的路。找到一个非常简单的失败示例，然后运行该测试并在开始时将其中断。逐步进行，并遵循逻辑。希望你会看到哪里出了问题。编写 JUnit 测试或日志语句很棒，但是当您遇到棘手的错误时，您必须进行一些真正的断点调试。

你的通用框架很好，你有一些对象来保存数据，还有一个很好的干净的解决方法，它调用了一些不同的方法并循环它们。但是这些方法中的每一个，哇，他们肯定是一团糟。那种代码，大量使用相同变量名的紧密循环，大量数组操作，很容易弄错东西并得到一个错误，这使得阅读和找到错误变得非常困难。

Eclipse 使调试 java 变得非常容易，如果您以前没有的话。google上很多不错的教程，就不打扰了^_~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T22:03:58.170

您似乎没有实现回溯机制。如果您没有实施正确的启发式算法，有时您必须猜测数字。

启发式是“交易技巧”，这里是[数独的常用技巧列表](http://www.angusj.com/sudoku/hints.php)。

如果你只对其中的几个进行编程，你就会陷入死胡同，不得不猜测。这使得它变得更加困难，因为必须考虑到这些猜测可能是错误的。回溯是一种策略，可让您“回滚”一些猜测并做出不同的猜测。把它想象成一棵用蛮力解决数独的可能性树。

所以你的两种可能性是实施更多的启发式或找到一种方法来进行更广泛的猜测

# jquery - Jquery将元素附加到Div并在鼠标移出时隐藏

> ID：10368848
> 
> 赞同：0
> 
> 时间：2012-04-29T00:57:52.090
> 
> 标签：jquery, hover, append, hide, onmouseout

我正在尝试使用 Jquery 将页脚 div 附加到另一个 div 中，并在悬停时显示新添加的页脚 div，然后慢慢淡入/隐藏。这是我到目前为止提出的代码：

```
<script type="text/javascript">
$('.xg_widget_main .module_forum .vcard').hover(function(){
$(this).append($('.module_forum .xg_module_foot').show('show'));
});
</script> 
```

我在这段代码中面临的障碍是附加的 div 将不服从 .show('show') 函数，并且在鼠标从悬停区域移除后，附加的 div 不会慢慢淡出，而是立即淡出。有人可以建议我在这里缺少什么吗？

好的，我得到了可以使用的代码：

```
<script type="text/javascript">
$('.xg_widget_main .module_forum .vcard').hover(function(){
$('.module_forum .xg_module_foot').hide().appendTo(this).show('slow');
});
</script> 
```

但是，当鼠标移离（'.xg_widget_main .module_forum .vcard'）时，附加的 div 不会删除/隐藏。有人可以建议如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:01:22.460

因为您实际上是在鼠标悬停时请求与鼠标悬停不同的行为，所以悬停是错误的解决方案。悬停同时管理这两种行为。

```
$('.xg_widget_main .module_forum .vcard').mouseover(function(){
$('.module_forum .xg_module_foot').hide().appendTo(this).fadeIn('slow');
});

$('.xg_widget_main .module_forum .vcard').mouseout(function(){
$('.module_forum .xg_module_foot').fadeOut('slow');
}); 
```

查看 mouseover 和 mouseout 事件，将它们分别连接起来，您将能够对其进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:10:13.577

```
$('.xg_widget_main .module_forum .vcard').on({
    mouseenter : function() {
         $('.module_forum .xg_module_foot').hide().appendTo(this).show('slow');
    },
    mouseleave: function() {
         $('.module_forum .xg_module_foot').hide('slow');
    }
}); 
```

# javascript - 在表头之上动态创建表头

> ID：10368850
> 
> 赞同：1
> 
> 时间：2012-04-29T00:58:03.430
> 
> 标签：javascript, css, html-table

在[这段代码](http://jsfiddle.net/eQ8rz/)中，我根据真值表中的解码器类型（4x1、8x1、16x）创建解码器输出的数量（D1、D2、D3...）。

`4*(D0,D1,D2,D3)`如果解码器类型是 4x1，我会为 4 个不同的解码器创建 4x 输出。

如果解码器类型是 8x1，我会`2*(D0,D1,D2,D3,D4,D5,D6,D7)`为 2 个不同的解码器创建 2x 输出。

如果解码器类型是 16x1，我会为 1 个解码器创建 1x 输出`1*(D0,D1,D2,D3,D4,D5,D6,D7,...,D15)`。

现在为了方便用户区分各种解码器，我想将解码器名称放在相应的解码器输出之上。例如，当我有 4x1 解码器时，如何将标题`Decoder1, Decoder2, Decoder3, Decoder4`放在上面`(D0,D1,D2,D3)(D0,D1,D2,D3)(D0,D1,D2,D3)(D0,D1,D2,D3)`？

PS 在代码中，您可以将解码器类型更改为`8x1 or 16x1`. 它的定义如下：

```
var decoderType="4x1"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:13:31.933

这个想法是使用标签`colspan`的属性。`td`您应该将以下代码添加到`generateTruthTableHTML`函数中：

```
text += "<th class='th' colspan="+VariableCount+">Variable</td>";
for(var k = 0; k < counter; k++) {
  var count = Math.pow(2,VariableNames.length) /counter;
  text += "<th class='th' colspan=" + count + ">Decoder&nbsp;" +
          (k+1) + "</th>";
}    
text += "</tr><tr>"; 
```

[编辑过的小提琴](http://jsfiddle.net/riateche/eQ8rz/3/)

# python - 从比萨/ xhtml2pdf的目录中排除第一页

> ID：10368851
> 
> 赞同：1
> 
> 时间：2012-04-29T00:58:16.923
> 
> 标签：python, django, pisa, xhtml2pdf

我正在使用 django-xhtml2pdf 生成报告。我使用第一页作为封面，然后是目录，使用`<pdf:toc />`标签。

我想打折第一页，所以目录中的页码从 1 而不是 2 开始。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:19:28.643

通读xhtml2pdf[代码](https://github.com/chrisglass/xhtml2pdf/tree/master/xhtml2pdf)，不支持偏移页码。有一个关于[比萨叉试图实现对此的支持的](http://bazaar.launchpad.net/~pascal-bach/+junk/pisa/files/head:/pisa3/)[旧讨论](https://groups.google.com/forum/?fromgroups=#!topic/xhtml2pdf/Txe8OEWCFAM)，但我不确定它有多远。

一个笨拙但直接的解决方案是将您的封面和文档的其余部分生成为单独的 PDF，然后将它们合并。这样，页码将不包括封面。[pyPDF 通过 django 合并和显示为 httpresponse](https://stackoverflow.com/questions/7123977/pypdf-merging-and-displaying-as-httpresponse-through-django)有一个可接受的答案，可以让你做到这一点。

# xml - 使用 XSLT 合并两个或多个 XML 节点

> ID：10368853
> 
> 赞同：1
> 
> 时间：2012-04-29T00:59:10.603
> 
> 标签：xml, xslt

这是输入文件：

```
<root> 
    <node id="N1">
        <fruit id="1" action="aaa">
            <orange id="x" action="create">
                <attribute>
                    <color>Orange</color>
                    <year>2012</year>
                </attribute>
            </orange>
            <orange id="x" action="change">
                <attribute>
                    <color>Red</color>
                </attribute>
            </orange>
            <orange id="x" action="change">
                <attribute>
                    <color>Blue</color>
                    <condition>good</condition>
                </attribute>
            </orange>
        </fruit>

    </node>

    <node id="N2">
        <car id="1">    
            <bmw id="i" action="change">
                <attribute>
                    <color>Blue</color>    
                </attribute>
            </bmw>      
            <bmw id="i" action="change">
                <attribute>
                    <color>Yellow</color>    
                </attribute>
            </bmw>
            <bmw id="i" action="change">
                <attribute>
                    <color>Pink</color>    
                </attribute>
            </bmw>

        <bmw id="j" action="delete">
            <attribute>
                <color>Blue</color>    
            </attribute>
        </bmw>
        <bmw id="j" action="delete">
            <attribute>
                <color>Yellow</color>    
            </attribute>
        </bmw>

    </car>
    </node>
</root> 
```

这是预期的输出：

```
<root> 
    <node id="N1">
        <fruit id="1" action="aaa">
            <orange id="x" action="create">
                <attribute>
                    <color>Blue</color>
                    <year>2012</year>
                    <condition>good</condition>
                </attribute>
            </orange>                      
        </fruit>       
    </node>

    <node id="N2">
        <car id="1">    

            <bmw id="i" action="change">
                <attribute>
                    <color>Pink</color>    
                </attribute>
            </bmw>

        <bmw id="j" action="delete">
            <attribute>
                <color>Yellow</color>    
            </attribute>
        </bmw>
      </car>
    </node>
</root> 
```

规则：

1.  如果有一个带有“create”方法的节点后跟一个或多个“change”方法，我们将它们合并在一起，并将最后一个“change”中的所有子节点使用“create”方法。（注：好是加的）

2.  如果有一个或多个“更改”方法，我们将它们合并并仅使用最后一个“更改”方法的子级。

3.  如果有一个或多个“删除”方法，我们将它们合并并仅使用最后一个“删除”方法的子项。

请注意，要合并的节点的 id 必须相同。

请告诉我有关此问题的 XSLT 解决方案。非常感谢。

亲切的问候，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:03:19.013

**这种转变**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:template match="node()|@*">
      <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
     </xsl:template>

     <xsl:template match="node/*/*[1]">
      <xsl:copy>
       <xsl:apply-templates select="@* | ../*[last()]/*"/>
      </xsl:copy>
     </xsl:template>

     <xsl:template match=
      "node/*/*
        [@action='delete'
       and
         following-sibling::*[1][@action='delete']
        ]"/>

     <xsl:template match=
      "node/*/*
        [@action='change'
       and
         following-sibling::*[1][@action='change']
       or
         preceding-sibling::*[@action='create']
        ]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <node id="N1">
        <fruit id="1" action="aaa">
            <orange id="x" action="create">
                <attribute>
                    <color>Orange</color>
                </attribute>
            </orange>
            <orange id="x" action="change">
                <attribute>
                    <color>Red</color>
                </attribute>
            </orange>
            <orange id="x" action="change">
                <attribute>
                    <color>Blue</color>
                    <condition>good</condition>
                </attribute>
            </orange>
        </fruit>
    </node>
    <node id="N2">
        <car id="1">
            <bmw id="i" action="change">
                <attribute>
                    <color>Blue</color>
                </attribute>
            </bmw>
            <bmw id="i" action="change">
                <attribute>
                    <color>Yellow</color>
                </attribute>
            </bmw>
            <bmw id="i" action="change">
                <attribute>
                    <color>Pink</color>
                </attribute>
            </bmw>
            <bmw id="j" action="delete">
                <attribute>
                    <color>Blue</color>
                </attribute>
            </bmw>
            <bmw id="j" action="delete">
                <attribute>
                    <color>Yellow</color>
                </attribute>
            </bmw>
        </car>
    </node>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <node id="N1">
      <fruit id="1" action="aaa">
         <orange id="x" action="create">
            <attribute>
               <color>Blue</color>
               <condition>good</condition>
            </attribute>
         </orange>
      </fruit>
   </node>
   <node id="N2">
      <car id="1">
         <bmw id="i" action="change">
            <attribute>
               <color>Pink</color>
            </attribute>
         </bmw>
         <bmw id="j" action="delete">
            <attribute>
               <color>Yellow</color>
            </attribute>
         </bmw>
      </car>
   </node>
</root> 
```

# java - java中的jcombobox过滤器-外观独立

> ID：10368856
> 
> 赞同：14
> 
> 时间：2012-04-29T00:59:26.720
> 
> 标签：java, swing, jcombobox, runtime-error, look-and-feel

我有一个简单的 JComboBox 过滤器代码，如下所示：

```
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class FilterComboBox extends JComboBox {
    private List<String> array;

    public FilterComboBox(List<String> array) {
        super(array.toArray());
        this.array = array;
        this.setEditable(true);
        final JTextField textfield = (JTextField) this.getEditor().getEditorComponent();
        textfield.addKeyListener(new KeyAdapter() {
            public void keyReleased(KeyEvent ke) {
                SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        comboFilter(textfield.getText());
                    }
                });
            }
        });

    }

    public void comboFilter(String enteredText) {
        List<String> filterArray= new ArrayList<String>();
        for (int i = 0; i < array.size(); i++) {
            if (array.get(i).toLowerCase().contains(enteredText.toLowerCase())) {
                filterArray.add(array.get(i));
            }
        }
        if (filterArray.size() > 0) {
            this.setModel(new DefaultComboBoxModel(filterArray.toArray()));
            this.setSelectedItem(enteredText);
            this.showPopup();
        }
        else {
            this.hidePopup();
        }
    }

    /* Testing Codes */
    public static List<String> populateArray() {
        List<String> test = new ArrayList<String>();
        test.add("");
        test.add("Mountain Flight");
        test.add("Mount Climbing");
        test.add("Trekking");
        test.add("Rafting");
        test.add("Jungle Safari");
        test.add("Bungie Jumping");
        test.add("Para Gliding");
        return test;
    }

    public static void makeUI() {
        JFrame frame = new JFrame("Adventure in Nepal - Combo Filter Test");
        FilterComboBox acb = new FilterComboBox(populateArray());
        frame.getContentPane().add(acb);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws Exception {

        //UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
        makeUI();
    }
} 
```

组合过滤器的性能不是很好，但对于少数数据集来说很好。我的问题是 - 当我删除评论`UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");`以更改外观时，过滤器不起作用。在 WindowsLookAndFeel 中，组合框通过替换先前输入的字符，仅包含单个字符。

![输入“moun”后的不同输出](../Images/53675926b49e2cb6f9ec338973f5792e.png)

你能告诉我发生了什么事吗？[Manoj Shrestha 下面的回答](https://stackoverflow.com/a/10455018/607637)在某种程度上有所帮助，但是，您能否提供一些其他建议以在 Java 中实现组合框过滤器？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T19:39:30.997

首先，您每次都在创建新模型，然后从代码中调用 show popup 导致闪烁等。我们可以修改模型本身。其次，您将当前输入的文本设置为选定的项目，该项目似乎具有其他人指出的 selectAll 行为。我已将代码修改如下：

```
public void comboFilter(String enteredText) {
    if (!this.isPopupVisible()) {
        this.showPopup();
    }

    List<String> filterArray= new ArrayList<String>();
    for (int i = 0; i < array.size(); i++) {
        if (array.get(i).toLowerCase().contains(enteredText.toLowerCase())) {
            filterArray.add(array.get(i));
        }
    }
    if (filterArray.size() > 0) {
        DefaultComboBoxModel model = (DefaultComboBoxModel) this.getModel();
        model.removeAllElements();
        for (String s: filterArray)
            model.addElement(s);

        JTextField textfield = (JTextField) this.getEditor().getEditorComponent();
        textfield.setText(enteredText);
    }
} 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-29T10:33:34.937

很长的答案，我认为关于外观和感觉在 API 中实现方法和工作方式的不同的例子

*   KeyListener 不是 Swing JComponents 的正确侦听器，您真的需要为 KeyBindings 烦恼，

*   KeyListener 是简单的异步，

*   JComboBox 是复合 JComponent，则需要覆盖内部 JComponents，来自 KeyListener 的所有输出都必须包装到 invokeLater() 中，请注意我可以从 coumpond JComponents 创建事件，两次 invokeLater() 不会将预期输出返回到 GUI，只有 Swing带有摇摆动作的计时器可以正确地做到这一点，很简单为什么要为那个错误的例子烦恼，

代码

```
import java.awt.Component;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.plaf.basic.BasicComboBoxRenderer;

public class ComboBoxHoverOver {

    private JComboBox combo = new JComboBox();

    public ComboBoxHoverOver() {
        combo.setPrototypeDisplayValue("XXXXXXXXXXXXXXXXXXXXXX");
        combo.setRenderer(new ComboToolTipRenderer(combo));
        combo.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent e) {
                //System.out.println(combo.getSelectedItem().toString());
            }
        });
        combo.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                //System.out.println(combo.getSelectedItem().toString());
            }
        });
        combo.addItem("");
        combo.addItem("Long text 4");
        combo.addItem("Long text 3");
        combo.addItem("Long text 2");
        combo.addItem("Long text 1");
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(combo);
        f.pack();
        f.setVisible(true);
    }

    private class ComboToolTipRenderer extends BasicComboBoxRenderer {

        private static final long serialVersionUID = 1L;
        private JComboBox combo;
        private JList comboList;

        ComboToolTipRenderer(JComboBox combo) {
            this.combo = combo;
        }

        @Override
        public Component getListCellRendererComponent(JList list, Object value,
                int index, boolean isSelected, boolean cellHasFocus) {
            super.getListCellRendererComponent(
                    list, value, index, isSelected, cellHasFocus);
            if (comboList == null) {
                comboList = list;
                KeyAdapter listener = new KeyAdapter() {

                    @Override
                    public void keyReleased(KeyEvent e) {
                        if (e.getKeyCode() == KeyEvent.VK_DOWN || e.getKeyCode() == KeyEvent.VK_UP) {
                            int x = 5;
                            int y = comboList.indexToLocation(comboList.getSelectedIndex()).y;
                            System.out.println(comboList.getSelectedIndex());
                        }
                    }
                };
                combo.addKeyListener(listener);
                combo.getEditor().getEditorComponent().addKeyListener(listener);
            }
            if (isSelected) {
                //System.out.println(value.toString());
            }
            return this;
        }
    }

    public static void main(String[] args) throws ClassNotFoundException,
            InstantiationException, IllegalAccessException, UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                ComboBoxHoverOver comboBoxHoverOver = new ComboBoxHoverOver();
            }
        });
    }
} 
```

*   JComboBox 是复合 JComponent，则需要重写 BasicComboBoxUI，请抱歉我懒得从第一点开始编写和模拟太长的代码作为代码

*   否则以上两点的所有努力都是无用的和适得其反的，没有别的，只有DOT

* * *

请有人在 *nix 和 apple OS X 中测试以下代码

来自我的 Java6 WinXP 组合（所有重要的都隐藏在使用的方法中，对来自前 Sun Microsystems 的匿名作者表示感谢）

物质 L&F

![在此处输入图像描述](../Images/ed9fb7d8ee39123b83414030aaf2769f.png)

WindowsLookAndFeel L&F

![在此处输入图像描述](../Images/58dd4581407b3d7e6504c6f86d984c82.png)

Nimbus L&F

![在此处输入图像描述](../Images/987fe6e79ee08a985772b74031738b69.png)

金属L&F

![在此处输入图像描述](../Images/fb4d730b99f80c30e9b3bfd9e7c2fd2d.png)

来自 Java 类

主要的

```
import java.awt.*;
import java.util.ArrayList;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;
import org.pushingpixels.substance.api.skin.SubstanceOfficeSilver2007LookAndFeel;

public class AutoCompleteTextField {

    private static JFrame frame = new JFrame();
    private ArrayList<String> listSomeString = new ArrayList<String>();
    private Java2sAutoTextField someTextField = new Java2sAutoTextField(listSomeString);
    private ArrayList<String> listSomeAnotherString = new ArrayList<String>();
    private Java2sAutoComboBox someComboBox = new Java2sAutoComboBox(listSomeAnotherString);

    public AutoCompleteTextField() {
        listSomeString.add("-");
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
        listSomeString.add("Pool");
        listSomeString.add("None of the above");
//
        listSomeAnotherString.add("-");
        listSomeAnotherString.add("XxxZxx Snowboarding");
        listSomeAnotherString.add("AaaBbb Rowing");
        listSomeAnotherString.add("CccDdd Knitting");
        listSomeAnotherString.add("Eee Fff Speed reading");
        listSomeAnotherString.add("Eee Fff Pool");
        listSomeAnotherString.add("Eee Fff None of the above");
//
        someTextField.setFont(new Font("Serif", Font.BOLD, 16));
        someTextField.setForeground(Color.black);
        someTextField.setBackground(Color.orange);
        someTextField.setName("someTextField");
        someTextField.setDataList(listSomeString);
//
        someComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        someComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        someComboBox.setForeground(Color.black);
        someComboBox.setBackground(Color.YELLOW);
        someComboBox.getEditor().selectAll();
        someComboBox.getEditor().getEditorComponent().setBackground(Color.YELLOW);
        ((JTextField) someComboBox.getEditor().getEditorComponent()).setDisabledTextColor(Color.black);
        someComboBox.setName("someComboBox");
        someComboBox.setDataList(listSomeAnotherString);
//
        frame.setLayout(new GridLayout(0, 1, 10, 10));
        frame.add(someTextField);
        frame.add(someComboBox);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
//
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                someTextField.setText("-");
                someComboBox.getEditor().setItem(0);
                someComboBox.getEditor().selectAll();
                someTextField.grabFocus();
                someTextField.requestFocus();
                someTextField.setText(someTextField.getText());
                someTextField.selectAll();
            }
        });

    }

    public static void main(String[] args) {
        /*SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                try {
                    UIManager.setLookAndFeel(new SubstanceOfficeSilver2007LookAndFeel());
                    SwingUtilities.updateComponentTreeUI(frame);
                } catch (UnsupportedLookAndFeelException e) {
                    throw new RuntimeException(e);
                }
            }
        });*/
        /*try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
            System.out.println(info.getName());
            if ("Nimbus".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
            }
            }
        } catch (UnsupportedLookAndFeelException e) {
            // handle exception
        } catch (ClassNotFoundException e) {
            // handle exception
        } catch (InstantiationException e) {
            // handle exception
        } catch (IllegalAccessException e) {
            // handle exception
        }*/
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                AutoCompleteTextField aCTF = new AutoCompleteTextField();
            }
        });
    }
} 
```

自动组合框

```
import java.awt.event.ItemEvent;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.plaf.basic.BasicComboBoxEditor;

public class Java2sAutoComboBox extends JComboBox {

    private static final long serialVersionUID = 1L;
    private AutoTextFieldEditor autoTextFieldEditor;
    private boolean isFired;

    private class AutoTextFieldEditor extends BasicComboBoxEditor {

        private Java2sAutoTextField getAutoTextFieldEditor() {
            return (Java2sAutoTextField) editor;
        }

        AutoTextFieldEditor(java.util.List<String> list) {
            editor = new Java2sAutoTextField(list, Java2sAutoComboBox.this);
        }
    }

    public Java2sAutoComboBox(java.util.List<String> list) {
        isFired = false;
        autoTextFieldEditor = new AutoTextFieldEditor(list);
        setEditable(true);
        setModel(new DefaultComboBoxModel(list.toArray()) {

            private static final long serialVersionUID = 1L;

            @Override
            protected void fireContentsChanged(Object obj, int i, int j) {
                if (!isFired) {
                    super.fireContentsChanged(obj, i, j);
                }
            }
        });
        setEditor(autoTextFieldEditor);
    }

    public boolean isCaseSensitive() {
        return autoTextFieldEditor.getAutoTextFieldEditor().isCaseSensitive();
    }

    public void setCaseSensitive(boolean flag) {
        autoTextFieldEditor.getAutoTextFieldEditor().setCaseSensitive(flag);
    }

    public boolean isStrict() {
        return autoTextFieldEditor.getAutoTextFieldEditor().isStrict();
    }

    public void setStrict(boolean flag) {
        autoTextFieldEditor.getAutoTextFieldEditor().setStrict(flag);
    }

    public java.util.List<String> getDataList() {
        return autoTextFieldEditor.getAutoTextFieldEditor().getDataList();
    }

    public void setDataList(java.util.List<String> list) {
        autoTextFieldEditor.getAutoTextFieldEditor().setDataList(list);
        setModel(new DefaultComboBoxModel(list.toArray()));
    }

    void setSelectedValue(Object obj) {
        if (isFired) {
            return;
        } else {
            isFired = true;
            setSelectedItem(obj);
            fireItemStateChanged(new ItemEvent(this, 701, selectedItemReminder, 1));
            isFired = false;
            return;
        }
    }

    @Override
    protected void fireActionEvent() {
        if (!isFired) {
            super.fireActionEvent();
        }
    }
} 
```

自动文本字段

```
import java.util.List;
import javax.swing.JTextField;
import javax.swing.text.*;

public class Java2sAutoTextField extends JTextField {

    private static final long serialVersionUID = 1L;
    private List<String> dataList;
    private boolean isCaseSensitive;
    private boolean isStrict;
    private Java2sAutoComboBox autoComboBox;

    public class AutoDocument extends PlainDocument {

        private static final long serialVersionUID = 1L;

        @Override
        public void replace(int i, int j, String s, AttributeSet attributeset)
                throws BadLocationException {
            super.remove(i, j);
            insertString(i, s, attributeset);
        }

        @Override
        public void insertString(int i, String s, AttributeSet attributeset)
                throws BadLocationException {
            if (s == null || "".equals(s)) {
                return;
            }
            String s1 = getText(0, i);
            String s2 = getMatch(s1 + s);
            int j = (i + s.length()) - 1;
            if (isStrict && s2 == null) {
                s2 = getMatch(s1);
                j--;
            } else if (!isStrict && s2 == null) {
                super.insertString(i, s, attributeset);
                return;
            }
            if (autoComboBox != null && s2 != null) {
                autoComboBox.setSelectedValue(s2);
            }
            super.remove(0, getLength());
            super.insertString(0, s2, attributeset);
            setSelectionStart(j + 1);
            setSelectionEnd(getLength());
        }

        @Override
        public void remove(int i, int j) throws BadLocationException {
            int k = getSelectionStart();
            if (k > 0) {
                k--;
            }
            String s = getMatch(getText(0, k));
            if (!isStrict && s == null) {
                super.remove(i, j);
            } else {
                super.remove(0, getLength());
                super.insertString(0, s, null);
            }
            if (autoComboBox != null && s != null) {
                autoComboBox.setSelectedValue(s);
            }
            try {
                setSelectionStart(k);
                setSelectionEnd(getLength());
            } catch (Exception exception) {
            }
        }
    }

    public Java2sAutoTextField(List<String> list) {
        isCaseSensitive = false;
        isStrict = true;
        autoComboBox = null;
        if (list == null) {
            throw new IllegalArgumentException("values can not be null");
        } else {
            dataList = list;
            init();
            return;
        }
    }

    Java2sAutoTextField(List<String> list, Java2sAutoComboBox b) {
        isCaseSensitive = false;
        isStrict = true;
        autoComboBox = null;
        if (list == null) {
            throw new IllegalArgumentException("values can not be null");
        } else {
            dataList = list;
            autoComboBox = b;
            init();
            return;
        }
    }

    private void init() {
        setDocument(new AutoDocument());
        if (isStrict && dataList.size() > 0) {
            setText(dataList.get(0).toString());
        }
    }

    private String getMatch(String s) {
        for (int i = 0; i < dataList.size(); i++) {
            String s1 = dataList.get(i).toString();
            if (s1 != null) {
                if (!isCaseSensitive
                        && s1.toLowerCase().startsWith(s.toLowerCase())) {
                    return s1;
                }
                if (isCaseSensitive && s1.startsWith(s)) {
                    return s1;
                }
            }
        }

        return null;
    }

    @Override
    public void replaceSelection(String s) {
        AutoDocument _lb = (AutoDocument) getDocument();
        if (_lb != null) {
            try {
                int i = Math.min(getCaret().getDot(), getCaret().getMark());
                int j = Math.max(getCaret().getDot(), getCaret().getMark());
                _lb.replace(i, j - i, s, null);
            } catch (Exception exception) {
            }
        }
    }

    public boolean isCaseSensitive() {
        return isCaseSensitive;
    }

    public void setCaseSensitive(boolean flag) {
        isCaseSensitive = flag;
    }

    public boolean isStrict() {
        return isStrict;
    }

    public void setStrict(boolean flag) {
        isStrict = flag;
    }

    public List<String> getDataList() {
        return dataList;
    }

    public void setDataList(List<String> list) {
        if (list == null) {
            throw new IllegalArgumentException("values can not be null");
        } else {
            dataList = list;
            return;
        }
    }
} 
```

编辑

Win7 64b / Java7 的输出

金属L&F

![在此处输入图像描述](../Images/38262f5392c6904b493193e5ae350c98.png)

Windows L&F（JComboBox 中按钮附近的有趣空白区域）

![在此处输入图像描述](../Images/e559de0e2a647d189e6ccd18c07e632e.png)

Nimbus L&F

![在此处输入图像描述](../Images/1997d9ee7cb4cd52043bc1e113f7e77f.png)

随时编辑

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T10:07:41.050

该组件称为自动完成，包含在所谓的 Swing 扩展项目中。

看看：[http](http://swingx.java.net/)
: //swingx.java.net/ 有一个webstart：[http ://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp](http://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp)

自动完成是要选择的菜单。玩得开心且不易出错的代码:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-18T06:50:25.090

显然，故障出在使用的文本字段组件中。发生的情况是，当使用 windows 外观时，该组件中的文本被选中，就像使用“textfield.selectAll();”行一样，因此当您键入其他任何内容时，选定的文本会从文本字段组件中清除。所以在下面的代码中，这个组件的插入符号位置被调整了。这就是它的工作原理，首先将文本字段的当前插入符号位置存储在变量“currentCaretPosition”中，然后将插入符号位置移动到组件中文本的开头。过滤后将插入符号位置恢复为“currentCaretPosition”变量值。我希望它能按你的意愿工作。

精炼的代码如下： -

```
 /****Beginning of code****/
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class FilterComboBox extends JComboBox {
    private List<String> array;
    private int currentCaretPosition=0;

    public FilterComboBox(List<String> array) {
        super(array.toArray());
        this.array = array;
        this.setEditable(true);
        final JTextField textfield = (JTextField) this.getEditor().getEditorComponent();
        textfield.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent ke) {
                SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        currentCaretPosition=textfield.getCaretPosition();
                        if(textfield.getSelectedText()==null)
                        {
                        textfield.setCaretPosition(0);
                        comboFilter(textfield.getText());
                        textfield.setCaretPosition(currentCaretPosition);
                        }
                     }
                });
            }

        });

    }

    public void comboFilter(String enteredText) {
        List<String> filterArray= new ArrayList<String>();
        for (int i = 0; i < array.size(); i++) {
            if (array.get(i).toLowerCase().contains(enteredText.toLowerCase())) {
                filterArray.add(array.get(i));
            }

        }
        if (filterArray.size() > 0) {

            this.setModel(new DefaultComboBoxModel(filterArray.toArray()));
            this.setSelectedItem(enteredText);
            this.showPopup();
        }
        else {
            this.hidePopup();
        }
    }

    /* Testing Codes */
    public static List<String> populateArray() {
        List<String> test = new ArrayList<String>();
        test.add("");
        test.add("Mountain Flight");
        test.add("Mount Climbing");
        test.add("Trekking");
        test.add("Rafting");
        test.add("Jungle Safari");
        test.add("Bungie Jumping");
        test.add("Para Gliding");
        return test;
    }

    public static void makeUI() {
        JFrame frame = new JFrame("Adventure in Nepal - Combo Filter Test");
        FilterComboBox acb = new FilterComboBox(populateArray());
        frame.getContentPane().add(acb);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws Exception {

        UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
        makeUI();
    }
}

                                       /******* End of code**********/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T19:30:16.583

正如您所提到的，当用户在组合框中输入任何文本时，Windows 外观会选择（突出显示）输入的文本。因此，当您按下另一个键时，它会替换前一个键。因此，解决方案不是突出显示输入的文本。您可以通过在 keylistener 中添加以下任一语句来实现此目的。

```
textfield.setCaretPosition(textfield.getText().length()); 
```

或者

```
textfield.setSelectionStart(textfield.getText().length()); 
```

所以，你的 keylistener 应该是这样的：

```
final JTextField textfield = (JTextField) this.getEditor().getEditorComponent();
    textfield.addKeyListener(new KeyAdapter() {
        public void keyReleased(KeyEvent ke) {
            SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    comboFilter(textfield.getText());
                    textfield.setCaretPosition(textfield.getText().length());
                }
            });
        }
    }); 
```

# licensing - 在静态链接的可执行文件中使用 GPL 许可库的代码？

> ID：10368860
> 
> 赞同：4
> 
> 时间：2012-04-29T00:59:34.217
> 
> 标签：licensing

我想编写一个使用 GPL 许可的 pandoc 进行 Markdown 处理的程序。我会在 Haskell 中写这个，所以我的二进制文件会静态链接 pandoc。同时，我希望我的实际源代码获得 MIT 许可，这样创建衍生产品的人就不必获得 GPL 许可。只要人们也可以在 MIT 许可下获取代码，我就可以接受 GPL 许可下的代码，这样他们就不必发布源代码。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:49:34.497

免责声明：IANAL

如果您拥有代码（即您不是作为有偿雇佣合同或以您作为雇员的身份进行的，在任何一种情况下公司都会拥有它），那么您可以根据您喜欢的任何许可证发布您的代码.

但是，您不能更改 pandoc 的许可证。如果他们继续使用（包括通过您的库间接使用）pandoc，任何对您的代码进行派生的人都必须在分发时包含源代码，因为这是 pandoc 许可证的一部分。如果他们在没有 pandoc 的情况下重建您的代码，他们可以自由地使用您的 MIT 许可代码，而无需将其源代码或对您的源代码所做的更改与分布式二进制文件一起包含在内。

免责声明：IANAL

# c# - Mono 项目中的 CLR20r3 DllNotFoundException；如何检查我需要哪些依赖项？

> ID：10368861
> 
> 赞同：1
> 
> 时间：2012-04-29T00:59:43.577
> 
> 标签：c#, .net, mono, monodevelop, gtk#

我用 MonoDevleop 和 GTK# 编写了一个程序。通过 MonoDevelop 运行程序不会产生任何问题，但是如果我尝试在 MD 之外运行程序（通过打包 Windows Release x86 的二进制文件），我会得到：

```
Problem Event Name: CLR20r3
Problem Signature 01:   areatest.exe
Problem Signature 02:   1.0.4500.36382
Problem Signature 03:   4f9b440c
Problem Signature 04:   glib-sharp
Problem Signature 05:   2.12.0.0
Problem Signature 06:   4a1c33d2
Problem Signature 07:   2b8
Problem Signature 08:   0
Problem Signature 09:   System.DllNotFoundException
OS Version: 6.1.7601.2.1.0.256.1
Locale ID:  1033
Additional Information 1:   0bff
Additional Information 2:   0bff8d176610735333c3986b545525d3
Additional Information 3:   b571
Additional Information 4:   b571ae7bc62750b34b3b738a0a557539 
```

我用谷歌搜索了 CLR20r3，发现很少能处理它。我已经尝试卸载所有与 Mono 相关的东西（MonoDevelop、Gtk# for .NET，以及 Mono for Windows、Gtk# 和 XSP 安装程序）并重新安装它，但我在找出发生了什么方面的进展为 0。我的解决方案中引用了 Glib-sharp。我尝试在 Visual C# 2010 中打开解决方案并收到 2 个警告：

```
Warning 2 The referenced component 'Mono.CSharp' could not be found.
Warning 1 Could not resolve this reference. Could not locate the assembly "Mono.CSharp". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. 
```

我引用了 Mono.CSharp 并没有摆脱警告。无论如何，我运行了该程序，并且在我的主程序中引发了异常：

```
class MainClass {
  public static void Main (string[] args)
  {
    Application.Init (); // here
    MainWindow win = new MainWindow ();
    win.Show ();
    Application.Run ();
  }
} 
```

如果我发布程序，.exe 仍然有同样的问题。

我想做的是让程序在任何操作系统上运行。对于 Windows，我被告知我的用户不必安装 Mono，只需安装 .NET 4，但是当我尝试正常运行它时，它会给出上面列出的崩溃报告。我发现让我的程序运行的唯一方法是调用

```
mono AreaTest.exe 
```

在命令提示符中。如果在 Windows 上，我可以做些什么来让程序通过 .NET 4 在我和其他人的计算机上运行，​​在 Mac/Linux 上通过 Mono 运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:46:11.840

想通了：原来我必须安装[GTK+ 运行时](http://sourceforge.net/projects/gtk-win/)才能在 MonoDevelop 之外运行程序。这也使我能够在 Visual C# 2010 中打开项目而几乎没有错误。

# asp.net - 如何将 IEnumerable 绑定到 aspx 标记中的中继器？

> ID：10368866
> 
> 赞同：2
> 
> 时间：2012-04-29T01:00:29.317
> 
> 标签：asp.net, repeater, datasource, objectdatasource

我想在没有任何代码的情况下将所有定义的路由输出到页面上，所以我需要`RouteTable.Routes`在标记中绑定到中继器。我该怎么做 -`<asp:Repeater>`只有`DataSourceID`标记中可用的值，而不是数据源。我假设我需要为中继器声明一个数据源`RouteTable.Routes`，然后将其 ID 提供给中继器，但我该怎么做呢？

同样，我需要一个没有任何代码隐藏、仅声明性的解决方案。

我正在使用 asp.net 4.0（不是 MVC）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T01:22:38.723

asp.net Repeater 控件确实有一个 DataSource 属性，您可以在 aspx 标记中设置它（参见下面的屏幕截图）：

![Repeater 标记智能感知的屏幕截图](../Images/dedadbe8c26bfade246fd17d93931f61.png)

通常，所做的是将 DataSource 属性设置为数据绑定表达式，该表达式在调用 Page.DataBind() 方法时进行计算。

```
<asp:Repeater ID="foo" DataSource = '<%# GetRoutes() %>' runat=server ></asp:Repeater> 
```

我认为您仍然需要页面上的一些代码来调用 Page.DataBind() 以在 aspx 页面上启动数据绑定。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Page.DataBind();
    } 
```

此代码可以放在代码隐藏中，或者，因为您不想使用代码隐藏，所以可以放在 aspx 页面的服务器代码块中。但我相信它必须通过页面事件处理程序中的 C# 代码调用。我不相信这可以以纯粹的声明方式来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:30:23.300

你需要做一些最小的管道来完成这项工作。这是一个网格视图的示例。您也可以将该技术用于中继器。

数据源对象类：

```
public class MyObjectDataSourceEntity
{
    [DataObjectMethod(DataObjectMethodType.Select)]
    public DataTable GetSomeRecords()
    {
        DataTable names = new DataTable();
        DataColumn FirstName = names.Columns.Add();
        FirstName.DataType = typeof(string);
        FirstName.ColumnName = "FirstName";
        DataColumn LastName = names.Columns.Add();
        LastName.DataType = typeof(string);
        LastName.ColumnName = "LastName";

        DataRow row = names.NewRow();
        row[0] = "Arun";
        row[1] = "Jayapal";
        names.Rows.Add(row);
        row = names.NewRow();
        row[0] = "Namith";
        row[1] = "Chandran";
        names.Rows.Add(row);
        return names;
    } 
```

您需要包含`System.ComponentModel`命名空间。

标记：

```
 <asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
        DataSourceID="ObjectDataSource1">
    </asp:GridView>
    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
        SelectMethod="GetSomeRecords" 
        TypeName="ObjectDataSourceDemo.MyObjectDataSourceEntity">
    </asp:ObjectDataSource> 
```

注意：我在这里添加了一个数据表，因为 gridview 仅在开箱即用的排序方面才理解该对象。所以你不必编写额外的代码。否则，您将使用任何`IEnumerable`对象。但是您必须编写自己的排序逻辑。与中继器无关，但我想我会提到这一点。

现在你不需要调用`DataBind()`任何东西了！！！

PS：为实体编写代码后，请先构建项目。在此之后，您可以依靠您的设计器将`ObjectDataSource`控件添加到页面上。该向导会自动检测项目中可支持的对象，但您需要先构建解决方案。

# python - 如何标记透明的 pygtk pycairo 窗口并保存组合图像？

> ID：10368870
> 
> 赞同：1
> 
> 时间：2012-04-29T01:01:17.860
> 
> 标签：python, drawing, transparency, pygtk, pycairo

我正在尝试开发一个透明窗口，我可以在上面标记屏幕上的任何内容（包括动态）。我的最终目标是在在线科学出版物中叠加图表，单击并沿曲线累积点，并最终使用生成器函数对收集的点进行曲线拟合。这将包括放置线和轴、刻度线和其他好东西。但是，我试图保持问题代码非常简单。

下面的代码在透明度部分做得相当好（请批评和纠正）。我进行了广泛的研究以了解如何保存透明窗口的内容，但失败了。我试图弄清楚如何覆盖任何东西（绘制图元）但失败了。我寻求任何和所有的建议来推动这个项目，并打算使最终的代码开源。

请帮忙。

```
 #!/usr/bin/env python
    """
    trans.py Transparent window with markup capability.
    Goals:
        1\. make a transparent window that dynamically updates (working).
        2\. draw opaque points, lines, text, and more (unimplemented).
        3\. save window overlayed by opaque points to png (unimplemented).
        4\. toggle overlay on/off (unimplemented).
        5\. make cursor XOR of CROSSHAIR (unimplemented).
    """

    import pygtk
    pygtk.require('2.0')
    import gtk, cairo

    class Transparency(object):
        def __init__(self, widget, index):
            self.xy = widget.get_size()
            self.cr = widget.window.cairo_create()
            self.index = index
        def __enter__(self):
            self.cr.set_operator(cairo.OPERATOR_CLEAR)
            self.surface = cairo.ImageSurface(cairo.FORMAT_ARGB32, *self.xy)
            self.cr.rectangle(0.0, 0.0, *self.xy)
            self.cr.fill()
            return self.cr, self.surface
        def __exit__( self, exc_type, exc_val, exc_tb ):
            filename = '%08d.png' % (self.index)
            with open(filename, 'w+') as png:
                self.surface.write_to_png(png)
                print filename
            self.cr.set_operator(cairo.OPERATOR_OVER)

    class Expose(object):
        def __init__(self):
            self.index = 0
        def __call__(self, widget, event):
            with Transparency(widget, self.index) as (cr, surface):
                # cr and surface are available for drawing.
                pass
            self.index += 1

    def main():
        x, y = 201, 201
        win = gtk.Window(gtk.WINDOW_TOPLEVEL)
        win.connect("destroy", lambda w: gtk.main_quit())
        win.set_decorated(True)
        win.set_app_paintable(True)
        win.set_size_request(x, y)
        win.set_colormap(win.get_screen().get_rgba_colormap())
        win.connect('expose-event', Expose())
        win.realize()
        win.window.set_cursor(gtk.gdk.Cursor(gtk.gdk.DIAMOND_CROSS))
        win.show()
        gtk.main()

    if __name__ == "__main__":
        main() 
```

更新！得到了我需要工作的大部分东西，除了大的。如何保存底层窗口和透明覆盖组合形成的图像？可以使用 vi 样式的仅键盘控件来放置点并切换覆盖。这是最新的来源：

```
 #!/usr/bin/env python
    """
    trans.py Transparent window with markup capability.
    Goals:
        1\. make a transparent window that dynamically updates (working).
        2\. draw opaque points, lines, text, and more (working).
        3\. save window overlayed by opaque points to png (unimplemented).
        4\. toggle overlay on/off (working).
        5\. make cursor XOR of CROSSHAIR (using pixel-wise crosshair instead).
        6\. enable keyboard input in original emacs function table style (working).
    """

    import pygtk
    pygtk.require('2.0')
    import gtk, cairo
    from math import pi

    class Transparency(object):
        index = 0
        def __init__(self, widget):
            self.xy = widget.get_size()
            self.cr = widget.window.cairo_create()
            self.storing = False
        def __enter__(self):
            self.cr.set_operator(cairo.OPERATOR_CLEAR)
            self.surface = cairo.ImageSurface(cairo.FORMAT_ARGB32, *self.xy)
            self.cr.rectangle(0.0, 0.0, *self.xy)
            self.cr.fill()
            return self.cr, self.surface
        def __exit__( self, exc_type, exc_val, exc_tb ):
            if self.storing:
                filename = '%08d.png' % (Transparency.index)
                with open(filename, 'w+') as png:
                    self.surface.write_to_png(png)
                    print filename
            self.cr.set_operator(cairo.OPERATOR_OVER)
            Transparency.index += 1

    class Expose(object):
        def __init__(self, window, xy):
            self.keep, self.points, self.bare = False, set(), False
            self.window = window
            self.X, self.Y = self.xy = xy
            self.x1, self.y1 = self.x0, self.y0 = self.xy[0]/2, self.xy[1]/2
            self.window.connect("key_press_event", self.key_press_event)
            self.window.set_events(gtk.gdk.KEY_PRESS_MASK)
            self.window.set_flags(gtk.HAS_FOCUS | gtk.CAN_FOCUS)
            self.window.grab_focus()
            # function table for keyboard driving
            self.function = [[self.noop for a in range(9)] for b in range(256)]
            self.function[ord('q')][0] = self.quit  # q for quit
            self.function[ord('h')][0] = self.lf    # h for left  (vi-style)
            self.function[ord('j')][0] = self.dn    # j for down  (vi-style)
            self.function[ord('k')][0] = self.up    # k for up    (vi-style)
            self.function[ord('l')][0] = self.rt    # l for right (vi-style)
            self.function[ord('h')][2] = self.lf    # h for left  (vi-style) with point
            self.function[ord('j')][2] = self.dn    # j for down  (vi-style) with point
            self.function[ord('k')][2] = self.up    # k for up    (vi-style) with point
            self.function[ord('l')][2] = self.rt    # l for right (vi-style) with point
            self.function[ord('.')][0] = self.mark  # . for point
            self.function[ord(',')][0] = self.state # , to toggle overlay
        def __call__(self, widget, event):
            self.xy = widget.get_size()
            self.x0, self.y0 = self.xy[0]/2, self.xy[1]/2
            with Transparency(widget) as (cr, surface):
                if not self.bare:
                    self.point(    cr, surface)
                    self.aperture( cr, surface)
                    self.positions(cr, surface)
                    self.crosshair(cr, surface)
        def aperture(self, cr, surface):
                cr.set_operator(cairo.OPERATOR_OVER)
                cr.set_source_rgba(0.5,0.0,0.0,0.5) # dim red transparent
                cr.arc(self.x0, self.y0, self.x0, 0, pi*2)
                cr.fill()
                return self
        def position(self, cr, surface, x, y, chosen):
            cr.set_operator(cairo.OPERATOR_OVER)
            #r, g, b, a = (0.0,0.0,0.0,1.0) if chosen else (0.0,0.0,1.0,0.5)
            r, g, b, a = (0.0,0.0,0.0,1.0)
            cr.set_source_rgba(r,g,b,a)
            cr.rectangle(x, y, 1, 1)
            cr.fill()
        def crosshair(self, cr, surface):
            for dx, dy in [(-2,-2),(-1,-1),(1,1),(2,2),(-2,2),(-1,1),(1,-1),(2,-2)]:
                x, y = self.x1 + dx, self.y1 + dy
                if 0       0))
        def dn(self, c, n): self.newxy(0, +int(self.y1       0), 0)
        def rt(self, c, n): self.newxy(+int(self.x1  127 else key
        def key_press_event(self, widget, event):
            keyname = gtk.gdk.keyval_name(event.keyval)
            mask = (1*int(0 != (event.state>k.gdk.  SHIFT_MASK))+
                    2*int(0 != (event.state>k.gdk.CONTROL_MASK))+
                    4*int(0 != (event.state>k.gdk.   MOD1_MASK)))
            self.keep = 0 != (mask & 2)
            self.function[self.accept(event.keyval)][mask](keyname, event.keyval)
            self(widget, event)
            return True

    def main():
        x, y = xy = [201, 201]
        window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        window.connect("destroy", gtk.main_quit)
        window.set_decorated(True)
        window.set_app_paintable(True)
        window.set_size_request(x, y)
        window.set_colormap(window.get_screen().get_rgba_colormap())
        window.connect('expose-event', Expose(window, xy))
        window.realize()
        window.window.set_cursor(gtk.gdk.Cursor(gtk.gdk.DIAMOND_CROSS))
        window.show()
        gtk.main()

    if __name__ == "__main__":
        main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T04:16:49.407

这不能回答您的具体问题，但我想：为什么要重新发明轮子？我的建议是您使用像快门这样的高级屏幕截图应用程序来捕获窗口或选择。Shutter 将为您提供“已保存”窗口的可浏览图库，并能够根据用户定义的配置文件进行编辑和网络发布，以及自动将图像存储在专用文件夹中（按项目、所需分辨率等）。

# python - 运行http.server时如何让python 3显示html和动态内容

> ID：10368871
> 
> 赞同：1
> 
> 时间：2012-04-29T01:01:20.557
> 
> 标签：python, html

所以我目前正在尝试让 python 在网页上输出 html。它不起作用，因为屏幕上没有任何内容，也不知道为什么。像这样运行服务器：

```
from http.server import HTTPServer, CGIHTTPRequestHandler

port = 8080

httpd = HTTPServer(('', port), CGIHTTPRequestHandler)
print("Starting simple_httpd on port: " + str(httpd.server_port))
httpd.serve_forever() 
```

我的简单文件，只是为了测试并确保我可以按照我尝试的方式完成此操作。我收到此表单，该表单包含一个电子邮件输入：

```
#! /usr/local/bin/python3
#This file is used for testing to make sure output to browser is as expected

import cgi
form_data = cgi.FieldStorage()
email = form_data['email'].value

print("<!doctype html> <br />")
print("<html> <head></head><body>")

print("<p>This is the email info: " + email+</p>)
print("</body>")
print("<html>") 
```

我是 python 新手，基本上只是想把它打印出来。我已经搜索过，但还没有找到答案。所以我希望堆栈溢出的杰出思想可以帮助我。我不想要一个框架，只是为了能够打印出一些东西，但不确定为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:52:44.177

你没有关闭你的 html 标签。将最后一个更改为 /html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:31:11.593

我一直在寻找我的答案大约一天，终于找到了答案。这是最简单的事情，但令我惊讶的是没有 python 开发人员知道。显然，在输出任何内容之前需要添加这一行：

```
print('Content-type: text/html \n') 
```

现在我在 python 之前从未处理过 CGI 脚本，所以我不确定这是否是所有这些脚本的要求。因此，我无法确定其背后的实际原因。还必须注意新的字符行必须存在，因为没有它也无法工作。也不太确定。我希望有类似问题的人会偶然发现这一点，因为它大大简化了在 python 上制作一个小型网页，而不是学习一个框架，这让他们可以专注于 python 代码。

我也将感谢任何真正知道为什么必须完成上述修复的人。

# javascript - 在没有接收器的情况下调用 javascript 函数

> ID：10368877
> 
> 赞同：0
> 
> 时间：2012-04-29T01:02:58.063
> 
> 标签：javascript, function

假设我们有一个函数：

```
function fn(){return this;} 
```

如果我们通过 调用函数`foo = fn();`，那么`foo`将得到 的值`this`，但我很好奇如果在没有接收者的情况下调用函数，返回的去向，即`fn();`？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T01:04:52.693

它无处可去。返回的值不会被任何东西引用并被“丢弃”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:20:35.313

变量用于分配内存并将其保持在持久状态。

当不使用任何变量时，用于处理的内存将被释放回池中。操作的结果没有分配到任何地方。

# visual-studio - VS 2010 中的标记高亮/重要说明

> ID：10368879
> 
> 赞同：0
> 
> 时间：2012-04-29T01:03:05.580
> 
> 标签：visual-studio, visual-studio-2010

不知何故，我的搜索并没有得到我想要的东西。

这是我需要的：

当我在 VS 2010 中编写代码时，我经常有一些地方我想指出一些我应该注意的重要事项（例如一些假设）。假设我在一个假设我将一些字符串映射到枚举值的方法中，我想用一个注释来标记它，比如

“记住！我们假设...废话”

这样，稍后，我可以打开 1 个单独的地方来查看我所有代码的所有假设和其他重要注释。我不想将它们记录在外部文本文件中，因为我想在编写代码时对其进行注释，并且注释需要靠近代码。

有没有这样的功能？例如 //todo 似乎在 todo 选项卡中列出了所有的 todo。我使用了一个扩展管理器，它可以让我在 //BMK 上添加书签，但是有什么可以用于重要等的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:08:00.100

您可以使用 HACK、TODO 和 UNDONE 将内置标签用于任务列表中的更多信息：http: [//msdn.microsoft.com/en-us/library/zce12xx2%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/zce12xx2%28v=vs.80%29.aspx)

要创建自己的任务列表标签，请参阅这篇文章 [http://msdn.microsoft.com/en-us/library/ekwz6akh.aspx](http://msdn.microsoft.com/en-us/library/ekwz6akh.aspx)

PS如果您看不到环境选项，请确保选中树视图底部的显示所有设置复选框...每次都让我知道。

# php - 存储相关物品的最佳设计

> ID：10368881
> 
> 赞同：-1
> 
> 时间：2012-04-29T01:03:42.647
> 
> 标签：php, mysql, symfony, doctrine-orm

我正在编写一本在线食谱书，其中有许多食谱、成分、类别等。我必须实现管理员可以将相关食谱添加到给定实体的对象（例如，一个类别有许多相关食谱，根据我的客户的愿望应手动添加）。此外，相关食谱必须有订单，这也是手动设置的。所以我需要食谱和每个其他实体（类别、成分、食谱等）之间的多对多关系，另外我必须存储每个相关食谱的位置。

一种解决方案可能是为每个具有相关配方的实体设置一个表，并且每一行将包含该实体的一个 ID、一个配方 ID 和一个位置。这意味着我将拥有与我拥有的具有相关食谱的实体一样多的表，这似乎不是最好的解决方案。

另一种解决方案可能是有一个包含有关相关食谱的所有信息的表，然后每一行将另外包含另一个实体的类型。另外我对 DRY 原则非常严格，所以我想在不编写重复代码的情况下实现这一点，并使用 Doctrine2+Symfony2 来处理尽可能多的工作。

如果可能的话，最好的办法是我有一段代码（例如一个类），我可以重用它并将相关的配方功能添加到新实体中，而无需编写或复制粘贴大量代码。

什么是最好的类/数据库设计？我要强调的是，我正在使用 Doctrine2 + Symfony2，所以请尝试“在 Doctrine 中思考”。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:24:39.317

我将创建以下表格：

```
category
--------
id
name

category_recipe
---------------
category_id
recipe_id
display_order (integer)

recipe
------
id
name
instructions

recipe_ingredient
-----------------
recipe_id
display_order (integer)
name
amount
unit

recipe_related
--------------
recipe_id
related_recipe_id
display_order

user_recipe
-----------
user_id
recipe_id
display_order 
```

对于类别关系，由于引用表中的额外显示顺序值，您将不得不做更多的工作。您需要创建 RecipeCategory 对象，设置 id 值，设置显示顺序，然后保存它，而不只是将食谱添加到类别中。Doctrine 仍然能够在这些表之间创建关系，只是需要更多的手动工作。

我希望这可以帮助您走上正确的道路。

# jquery - 另一个 jQuery 插件实例的属性被覆盖

> ID：10368884
> 
> 赞同：1
> 
> 时间：2012-04-29T01:04:39.510
> 
> 标签：jquery, plugins, attributes, overriding, instance

我遇到了一个奇怪的问题，我的 jQuery 插件的其他实例正在被修改，即使我相信我已经编写了我的插件来支持多个单独的实例。

我已将代码精简到最基本的部分，您可以在此处对其进行测试：http: [//jsbin.com/ajifoh/4/edit#html,live](http://jsbin.com/ajifoh/4/edit#html,live)

第一次在任一文本框中按下一个键时，它应该显示`leng: 0`在控制台中，但是在您出于某种原因触发第一个键后，第二个键还具有为第一个插入的所有组合部件......我做了什么错误的？

```
;(function($, window, document, undefined){

  var KeyCombinator = function( elem, options ){
      this.$elem = $(elem);
    };

  function ComboPart(keyCode){
    if (keyCode !== undefined){
      this.keyCode = keyCode;
    }
  }
  function ComboData(){
    this.comboParts= [];
  }

  function set_insert(array, value){
    array.push(value);
  }

  KeyCombinator.prototype = {
    comboData: new ComboData(),

    eval_key_event: function(e){
      set_insert(this.comboData.comboParts, new ComboPart(e.keyCode));
    },

    init: function(){
      var $elem = this.$elem;
      var that = this;

      $elem.keydown(function(e){
        console.log('leng', that.comboData.comboParts.length);
        that.eval_key_event(e);
      });
    }
  };

  $.fn.makeKeyCombinator = function(options) {
    return this.each(function() {
      new KeyCombinator(this, options).init();
    });
  };

})(jQuery, window, document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:06:31.903

添加到的属性`prototype`每种类型仅存在一次。由于您在 上实例化`ComboData`，`KeyCombinator.prototype`所有实例`KeyCombinator`共享一个`ComboData`. 如果您想要 的`ComboData`每个实例的唯一实例`KeyCombinator`，则需要在`KeyCombinator`构造函数中将其实例化，如下所示：

```
var KeyCombinator = function( elem, options ){
    this.$elem = $(elem);
    this.comboData = new ComboData();
}; 
```

这是[jsbin](http://jsbin.com/ajifoh/5/)中的一个工作示例。

# api - 如何获取项目工作区详细信息

> ID：10368887
> 
> 赞同：0
> 
> 时间：2012-04-29T01:04:52.847
> 
> 标签：api, asana

要获取项目名称和关注者，我可以使用：

[https://app.asana.com/api/1.0/projects?opt_fields=name,followers](https://app.asana.com/api/1.0/projects?opt_fields=name,followers)

但是它不允许我获得工作区：

[https://app.asana.com/api/1.0/projects?opt_fields=name,workspace](https://app.asana.com/api/1.0/projects?opt_fields=name,workspace)

仅列出项目 ID 和名称。我也试过使用`opt_expand`。列出项目时是否可以获得工作区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:34:50.170

（我为 Asana 工作）

你是对的，这应该是可能的。这似乎是一个错误。我们应该在今天晚些时候为您解决这个问题。

# parallel-processing - 方便维护 MPI 版本和非 MPI 版本

> ID：10368891
> 
> 赞同：3
> 
> 时间：2012-04-29T01:05:22.910
> 
> 标签：parallel-processing, mpi

最近，我使用 MPI 来并行化我的仿真程序以加快速度。我采用的方式是重写一个非常耗时但易于并行化的函数。

非MPI程序的简化模型如下，

```
int main( int argc, char* argv[] ){
    // some declaration here
    Some_OBJ.Serial_Function_1();
    Some_OBJ.Serial_Function_2();
    Some_OBJ.Serial_Function_3(); 
    return 0;
} 
```

虽然我的 MPI 版本是，

```
#include "mpi.h"
int main( int argc, char* argv[] ){
    // some declaration here
    MPI_Init( NULL, NULL );
    Some_OBJ.Serial_Function_1();
    Some_OBJ.Parallel_Function_2(); // I rewrite this function to replace Some_OBJ.Serial_Function_2();
    Some_OBJ.Serial_Function_3(); 
    MPI_Finalize();
    return 0;
} 
```

我将我的非 MPI 代码复制到一个新文件夹，例如 mpi_simulation，并添加一个 mpi 函数，将主文件修改为 . 它可以工作，但非常不方便。如果我更新一些函数，比如 OBJ.Serial_Function_1()，即使我只是更改一个常量，我也需要谨慎地复制代码。这些版本的程序之间仍然存在一些细微差别。我感到筋疲力尽，无法让它们保持一致。

所以我想看看有没有什么办法可以让 MPI 程序依赖于非 MPI 版本，这样我的修改就可以安全方便地应用到他们两个上。

谢谢。

更新我终于采纳了 haraldkl 的建议。方法是定义一个宏来封装所有使用MPI接口的函数，像这样：

```
#ifdef USE_MPI
void Some_OBJ::Parallel_Function_2(){
  // ...
}
#endif 
```

为了自动初始化 MPI，我定义了一个名为 MPI_plugin 的单例：

```
#ifdef USE_MPI
class MPI_plugin{
private:
    static MPI_plugin auto_MPI;
    MPI_plugin(){
      MPI_Init( NULL, NULL );
    }
public:
    ~MPI_plugin(){
      MPI_Finalize();
    }
};
MPI_plugin::MPI_plugin auto_MPI;
#endif 
```

在 main.cpp 中包含 MPI_plugin.h 可以避免在编译 MPI 版本时在 main.cpp 中添加 MPI_Init() 和 MPI_Finalize() 。最后一步是在 makefile 中添加一个 PHONY 目标“mpi”：

```
CPP := mpic++
OTHER_FLAGS := -DUSE_MPI
.PHONY: mpi
mpi: ${MPI_TARGET}
... 
```

我希望它对遇到同样问题的人有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:10:05.567

解决问题的一种方法是安装（如果尚未安装）可用的“虚拟 MPI”库之一。只要您的代码在一个 MPI 进程上正确运行（我确信您已经编写了它以便它运行），那么它应该在链接到虚拟 MPI 库时正确运行。如果您不熟悉虚拟 MPI 库，请访问 Google。

# php - Ajax JSON 不返回

> ID：10368894
> 
> 赞同：0
> 
> 时间：2012-04-29T01:05:48.870
> 
> 标签：php, jquery, ajax, json, jsonp

我的主页中有以下代码，试图提取 AJAX JSON。它只需要在每个页面滚动上显示 10 个额外的产品。目前它只显示加载后应该删除的加载程序 Circle div - 但没有加载任何内容。

```
 var handler = null;
     var page = 1;
     var isLoading = false;
     var apiURL = 'ajax/api.php'    

    function onScroll(event) {
      // Only check when we're not still waiting for data.
      if(!isLoading) {
        // Check if we're within 100 pixels of the bottom edge of the broser window.
        var closeToBottom = ($(window).scrollTop() + $(window).height() > 
    $(document).height() - 100);
        if(closeToBottom) {
          loadData();
        }
      }
    };

    function loadData() {
      isLoading = true;
      $('#loaderCircle').show();

      $.ajax({
        url: apiURL,
        dataType: 'jsonp',
        data: {page: page}, // Page parameter to make sure we load new data
        success: onLoadData
      });
    };

    // Receives data from the API, creates HTML for images 
    function onLoadData(data) {
      isLoading = false;
      $('#loaderCircle').hide();

      // Increment page index for future calls.
      page++;

      // Create HTML for the images.
       var html = '';
      var i=0, length=data.length, image;
      for(; i<length; i++) {
        image = data[i];
        html += '<li>';

        // Image tag
        html += '<img src="products/200/'+p_id+'.jpg" ">';

        // Image title.
        html += '<p>'+p_name+'</p>';

        html += '</li>';
      }

      // Add image HTML to the page.
      $('#tiles').append(html);

    }; 
```

还有我的 PHP JSON 调用

```
<?php require_once('../inc/config.php');
    $page = $_REQUEST['page'];
    $items = '10';
    $start = (($page * $items) - $items);
    $end = ($page * $items);

    $result = mysql_query("SELECT p_id, p_name FROM products ORDER BY p_id ASC LIMIT $start, $end");

    $products = array();
    while($product = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $products[] = ($product);
    }

    $output = json_encode($products);

    echo $output;
    ?> 
```

php 显示的 JSON 如下（示例数据）：

```
[{"p_id":"1","p_name":"ASOS Pleated Swing Mac"},{"p_id":"2","p_name":"ASOS Midi Belted Coat"},{"p_id":"3","p_name":"ASOS Zig Zag Coat"},{"p_id":"4","p_name":"Collarless Quilted Leather Biker with Ribbed Sleeve"},{"p_id":"6","p_name":"TFNC Dress with Wrap Front in Flocked Heart"},{"p_id":"7","p_name":"Striped Skater Dress"},
{"p_id":"8","p_name":"Metallic Wrap Dress"},{"p_id":"9","p_name":"Strapless Dress With Neon Belt"},{"p_id":"10","p_name":"Darling Floral Border Print Dress"},{"p_id":"11","p_name":"Dip Hem Chiffon Dress With Printed Top"}] 
```

所以总的来说它不会将数据加载到html中。有人可以解释一下我可能需要做什么或我可能做错了什么。（这是使用 wookmark 插件 - 但不应该影响任何东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:35:58.470

问题是您已将 jQuery AJAX 设置`dataType`为`jsonp`，但您`api.php`输出的是 JSON，*而不是*JSONP。

要解决此问题，请将其更改`dataType`为`json`：

```
$.ajax({
    url: apiURL,
    dataType: 'json',
    data: {page: page}, // Page parameter to make sure we load new data
    success: onLoadData
}); 
```

或者更改您的`api.php`文件以输出 JSONP 数据：

```
$json = json_encode($products);
$output = isset($_GET['callback']) ? "{$_GET['callback']}($json)" : $json; 
```

# java - EJB - 如何按非索引字段搜索？

> ID：10368898
> 
> 赞同：1
> 
> 时间：2012-04-29T01:07:49.677
> 
> 标签：java, database, ejb

我正在尝试在我的数据库上创建“搜索引擎”。

我有一个带有 ID、名称和描述的表。当我有一个 ID 时，我可以通过 find() 获取具有此 ID 的记录。但是，如果我想按名称或描述获取记录，我该怎么做？我是否必须将名称设置为索引？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:50:14.933

作为一般规则，如果您必须经常通过其中一个字段查询表并且该表包含许多记录，那么在数据库中为该字段创建索引可能是一个好主意。

关于另一个问题：如果您需要按名称、描述或其他字段获取记录，并且您正在使用 JPA，那么请使用[JPQL](http://docs.oracle.com/javaee/5/tutorial/doc/bnbtg.html)查询语言。例如，假设实体是类型`MyEntity`（带有字段`id`, `name`, `description`），以下查询将返回带有名称的实体列表`aName`：

```
EntityManager em = ...         // get the entity manager
Query q = em.createQuery("SELECT me FROM MyEntity me WHERE me.name = :name");
q.setParameter("name", aName); // aName is the name you're looking for
List<MyEntity> results = (List<MyEntity>) q.getResultList(); 
```

[在教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnbpz.html)中阅读有关 Java Persistence API 的更多信息。

# python - 如何让 WTForms 从数据存储中读取？

> ID：10368900
> 
> 赞同：1
> 
> 时间：2012-04-29T01:08:13.400
> 
> 标签：python, google-app-engine, google-cloud-datastore, python-2.7, wtforms

我正在尝试启用一个用例“添加城市”，在该用例中，我获得了城市所属区域的区域和城市的模型定义：

```
class Region(db.Model):
  name = db.StringProperty()
  vieworder = db.IntegerProperty()
  image = db.BlobProperty()

class City(db.Model):
  region = db.ReferenceProperty()
  name = db.StringProperty()
  image = db.BlobProperty()
  vieworder = db.IntegerProperty()
  areacode = db.IntegerProperty() 
```

然后我手动添加区域并制作了一个表格来添加城市：

```
class AddCityForm(Form):

    my_choices = [
        ('0', _('All regions')),
        ('1', _('Delhi')),
    ]
    region = SelectField(choices=my_choices)
    name = TextField(_('Name'))

class AddCityHandler(BaseRequestHandler):

    def get(self):
        logging.info('i baserequesthandler')
        self.render('addcity.html', {'form': AddCityForm()}) 
```

现在我希望选择从数据层读取，并且是所有区域`Region.all()`，ID 是实体的 ID，以便我可以使用区域的键作为它所属区域的参考来填充城市。你能告诉我如何让 WTForms 用我的区域填充数据存储中的选项吗？

谢谢你

## 更新

在 GAE 中，以下代码用于从数据存储区读取选项

```
class RegionField(SelectField):

    def __init__(self, *args, **kwargs):
        super(RegionField, self).__init__(*args, **kwargs)
        self.choices = []
        for region in Region.all().fetch(99999):
        self.choices.append([region.key().id(), region.name])

class AddCityForm(Form):
    region = RegionField()
    name = TextField(_('Name')) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:58:42.807

您可以将 SelectField 子类化：

```
class RegionField(SelectField):

    def __init__(self, *args, **kwargs):
        super(RegionField, self).__init__(*args, **kwargs)
        # a sample sqlalchemy query that returns a list of tuples (id, name)
        self.choices = models.Session.query(models.Region.id, models.Region.name).order_by(models.Region.name).all()

class AddCityForm(Form):
    region = RegionField()
    name = TextField(_('Name')) 
```

请注意，根据持久层的操作方式，您可能还需要实现`populate_obj(self, obj, name)`以将提交的数据强制转换为您的 ORM 可以理解的内容（这对于 SelectMultipleField 来说更可能是必需的）。

# c++ - pthread_join() 可能会产生什么信号？

> ID：10368901
> 
> 赞同：1
> 
> 时间：2012-04-29T01:08:52.253
> 
> 标签：c++, pthreads, signals, pthread-join

我在 C++ 中遇到了一个错误情况，我无法在调用 pthread_join() 时轻松重现一些信号，我不知道是哪一个，但是我的信号处理程序被调用了，并且由于某种原因没有打印出正常的调试信息在产生的信号上。我确实得到了一个堆栈跟踪，显示：

```
# 2 /lib/tls/libpthread.so.0: pthread_join(...) +0x1c [0xce439c] 
```

我查看了 pthread_join() 的手册页，没有看到任何关于信号的提及。

产生的信号可能是什么，原因可能是什么？这可能是某种竞争条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:59:20.610

[http://linux.die.net/man/7/pthreads](http://linux.die.net/man/7/pthreads)：

```
Signals are used in implementation internally 
```

[http://osr600doc.sco.com/man/html.PTHREAD/pthread_join.PTHREAD.html](http://osr600doc.sco.com/man/html.PTHREAD/pthread_join.PTHREAD.html)：

```
The wait in pthread_join is not broken by a signal.
If a thread waiting in pthread_join receives a signal that is not masked,
it will execute the signal handler, and then return to waiting in pthread_join.
Note that this behavior differs from that of pthread_cond_wait. 
```

[http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fusers_25.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fusers_25.htm)：

```
Threadsafe: Yes
Signal Safe: No 
```

基本上，您可能会遇到 pthread_join() 由于某些错误或外部事件而接受其他信号的事实。

我们无法猜测究竟是什么导致了信号。

PS 没有指定确切的环境，这使得决策更加困难。

# html - JSP - 将数据从控制器传输到 scriptlet

> ID：10368902
> 
> 赞同：1
> 
> 时间：2012-04-29T01:08:52.793
> 
> 标签：html, spring, jsp, spring-mvc

我是使用 JSP 的新手，我正在尝试执行以下操作：

```
<% for (int i=0; i<numTables; i++) { %>
<h3> person <%=i%></h3>
<% } %> 
```

numTables 是 HomeController 类中的一个变量。
我也在控制器中执行过：

```
 model.addAttribute("numTables", numTables); 
```

如果我写：

```
<h1>${numTables}</h1> 
```

它打印正确的值。但是我找不到将这个值作为 numTables 的值放在 for 循环中的方法。
请帮忙。谢谢。

编辑：它必须用小脚本来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T04:18:47.323

你最好避免使用scriptlet。JSTL 标签可以执行相同的功能，例如

```
<c:forEach var="i" begin="0" end="${numTables}" >
    <h3>person ${i}</h3>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T04:50:32.077

它存储为请求属性：

```
Integer numtables = (Integer) request.getAttribute("numTables"); 
```

或者当您不确定它在哪个范围内时：

```
Integer numtables = (Integer) pageContext.findAttribute("numTables"); 
```

但是，避免使用[JSTL](https://stackoverflow.com/tags/jstl/info)之类的标记库会走错路。自近十年（！）前发布的 JSP 2.0 以来，不[鼓励使用](http://www.oracle.com/technetwork/articles/javase/code-convention-138726.html)*Scriptlet 。*如果我是你的 CS 导师，你会因此而被否定。

# java - eclipse Indigo中的“从现有源创建项目”在哪里？

> ID：10368903
> 
> 赞同：37
> 
> 时间：2012-04-29T01:09:05.350
> 
> 标签：java, eclipse, eclipse-indigo

我在尝试创建“java 项目”时在 Eclipse Indigo 中找不到“从现有源创建项目”。当我选择 Java 项目，然后下一个窗口出现选项 - 用户默认位置、JRE、项目布局和工作集。

在搜索 Indigo 的 UI 中可能发生的任何变化时，我找不到任何线索。在 Indigo 中哪里可以找到“从现有源创建项目”？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-29T02:36:53.050

取消选中**使用默认位置**选项，然后**浏览**以选择现有源树的父文件夹。Eclipse 将自动检测现有文件和文件夹，尽管您可能必须配置项目以使其知道您的源文件夹是什么；但是 New Java Project 向导会为您提供该选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T16:20:52.950

如果您的源目录位于当前工作空间内，则由于 Eclipse 中的错误，ERiz 的答案将不起作用。（它会打印出错误“文件夹与现有项目的位置重叠”）。相反，您应该选中 Use Default Location 并输入文件夹名称作为您的项目名称。

[有关该问题的更多讨论，请参见此处。](http://www.eclipse.org/forums/index.php/m/270705/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T16:09:01.383

到目前为止，这样做的唯一方法似乎是 Antimony 建议的解决方案。

如果您想避免输入文件夹名称，请取消勾选“使用*默认位置”*，选择您的源目录，然后再次勾选*“使用默认位置”*，*项目名称*字段应包含源目录的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:20:41.307

我在尝试导入 Git 项目时遇到了这个答案，所以我将在这里编写我的解决方案。工作区目录与 Git 的工作目录相同，所以我不想将项目文件夹移动到其他地方。

如果您有一个要导入的 Git 项目，但 Eclipse 看不到它，因为它的目录中没有 .project 文件，步骤如下：

1.  文件 > 新建 > Java 项目：在名称中输入项目的 dir 名称，如 Antimony 所说，项目将自动配置。
2.  您将在项目列表中看到您的项目，但它尚未绑定到 Git。
3.  如果是 maven 项目，您现在可以将其转换为 maven 项目：右键单击该项目并选择配置 > 转换为 Maven 项目。
4.  删除项目（不要选择“从磁盘删除项目”）
5.  现在您可以从 File > Import > Git Project 将项目作为 Git 项目导入

# windows - 如何使用 Cabal 检查 Windows 版本并根据此版本条件编译一段代码？

> ID：10368904
> 
> 赞同：0
> 
> 时间：2012-04-29T01:09:10.257
> 
> 标签：windows, haskell, build, cabal, c-preprocessor

给定以下代码

```
(@<) :: Port -> IO Socket
(@<) p = do -- listen
#if !defined(IPV4ONLY)
  s <- socket AF_INET6 Stream 0 =>> opt
  setSocketOption s IPv6Only  0 // try_
  bindSocket      s $ SockAddrInet6 p 0 iN6ADDR_ANY 0
#else
  s <- socket AF_INET  Stream 0 =>> opt              -- Windows XP does not have
  setSocketOption s $ SockAddrInet  p   iNADDR_ANY   -- a dual-stack sockets API
#endif
  listen          s maxListenQueue
  print $ Service Listen p
  return s
    where opt s = mapM_ (\o -> setSocketOption s o 1) [ ReuseAddr, KeepAlive ] 
```

配置（cabal config）时间最干净/最短的方法是什么：

1.  检查 Windows 版本
2.  定义`IPV4ONLY`是否在 Windows XP（或更早版本？）上编译

首选只有阴谋集团的方法。因为我认为检查太小而无法创建成熟的配置脚本

# java - 使用结构/类来增加缓存空间局部性？

> ID：10368906
> 
> 赞同：1
> 
> 时间：2012-04-29T01:09:31.003
> 
> 标签：java, c++, performance, caching

如果使用 1000 行计算机代码而不是独立声明变量，而是将它们组合在一起（显然这确实取决于所使用的变量大小）到类和结构中，这是否会直接增加缓存空间局部性（因此降低缓存未命中率）？

我的印象是通过将类/结构中的变量关联起来，它们将被分配连续的内存地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:37:35.903

如果不做出一些非常不合理的假设，就不可能回答这个问题。空间局部性与算法和数据结构一样重要，因此根据您使用的算法将逻辑相关的数据元素组合在一起可能没有任何意义，甚至更糟。

例如，考虑 3D 空间中 100 个点的表示。您可以将它们放在三个单独的数组中，或者创建一个 3 元组结构/类，然后将它们组成一个数组。

如果您的算法必须在每一步中一次获取每个点的所有三个坐标，则元组表示获胜。但是，想想如果你想构建一个在每个维度上独立运行的算法，并在三个独立线程之间进行三向并行化，会发生什么情况。在这种情况下，三个单独的数组将胜出，因为该布局将避免错误共享，并就一次一维算法而言改善空间局部性。

这个例子表明没有“一刀切”的解决方案。应始终在特定算法的上下文中考虑空间局部性；在一种情况下，一个好的解决方案可能会在其他看似相似的情况下变得糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T01:40:26.293

如果您在谈论方法局部变量，它们在堆栈上已经是连续的，或者严格来说在几乎总是在堆栈上的激活记录中。如果您正在谈论对 Java 对象的引用，或指向动态分配的 C++ 对象的指针，那么将它们放入包含类中不会有任何区别，因为另一个原因：相关对象仍将位于堆中的任意位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T01:43:47.777

如果您询问是否将局部变量分组到明确定义的结构中，则不会有优势。局部变量是根据[激活记录](http://en.wikipedia.org/wiki/Activation_record#Structure)实现的，对于任何同时具有这两者的语言，它通常与类结构的实现密切相关。

因此，局部变量应该已经具有良好的空间局部性，除非语言实现正在做一些奇怪的事情来搞砸它。

您可以通过将递归期间未使用的大块本地状态隔离到单独的非递归函数中来改善局部性。这将是一个微优化，因此您需要先检查机器代码以确保它不会浪费时间。无论如何，这与将本地人移动到`class`.

# sqlite - SQLite 从新表中删除旧表中存在的数据

> ID：10368911
> 
> 赞同：0
> 
> 时间：2012-04-29T01:10:18.927
> 
> 标签：sqlite, where, sql-delete, intersect

我得到一个没有日期字段的项目的每日更新文件。我在第一个表中添加了一个日期列，并将第一个和第二个表导入 SQLIte。现在我想从第二张表中删​​除第一张表中已经存在的数据，以便我可以在第二张表中添加一个新日期，然后将第二张表插入到第一张表中。我遇到的问题是从第二个表部分删除。Column4 数据在两个表中相交。

我尝试了以下 SQL 语句，但它删除了 Table2 中的所有行：

DELETE from Table2 WHERE exists (SELECT Col4 from Table1 INTERSECT SELECT Col4 from Table2);

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:08:28.247

Exists 检查子查询中是否存在行。您的问题将通过使用“not in”语句解决

```
DELETE from Table2 WHERE Col4 not in (SELECT Col4 from Table1 INTERSECT SELECT Col4 from Table2); 
```

# c - 关于 *argv[] 的指针

> ID：10368913
> 
> 赞同：14
> 
> 时间：2012-04-29T01:10:42.343
> 
> 标签：c, pointers, gdb, arguments, main

这是我的`main.c`

```
......
int main(int argc, char **argv)
{
    init_arg(&argc, &argv);
    ......
} 
```

这是我的`init_arg.c`

```
......
void init_arg(int *argc, char ***argv)
{
    printf("%s\n", *argv[1]);
    ......
} 
```

我编译它没有错误和警告。

我运行它：

`./a.out include`

它得到**分段错误**

当我调试它时，我发现了步骤 `printf("%s\n", *argv[1]);`

弄错了，它显示：

`print *argv[1]`

`Cannot access memory at address 0x300402bfd`

我想知道，如何`argv[1]`在`init_arg()`功能中打印。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-29T01:13:50.233

您需要在 (*argv) 周围添加一对括号以更改评估顺序。你目前拥有它的方式，首先评估 [1]，产生一个无效的指针，然后被取消引用，导致未定义的行为。

```
printf("%s\n", (*argv)[1]); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-29T01:22:05.727

argv 已经是一个指针。像这样传递它：

```
init_arg(&argc, argv); 
```

init_arg 应该是这样的：

```
void init_arg(int *argc, char **argv) {
    printf("%s\n", argv[1]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T02:25:57.230

我假设传递的原因`&argc`首先`&argv`是为了让您可以在内部更新它们`init_arg`。一般来说，我喜欢这样编写这样的函数：

```
/*
 * init_arg: do something useful with argc and argv, and update argc and argv
 * before returning so that the caller can do something else useful that's
 * not shared with all the other callers of init_arg().
 * (this comment of course needs updating to describe the useful things)
 */
void init_arg(int *argc0, char ***argv0) {
    int argc = *argc0;
    char **argv = *argv0;
    ... all the operative code goes here, and then ...
    *argc0 = argc;
    *argv0 = argv;
} 
```

当然这意味着你不能做 early `return`s inside `init_arg`，所以有一些权衡，但使用相同的常规 old`argc`和`argv`inside肯定要容易得多`init_arg`。

# clojure - Clojure Domina 教程

> ID：10368918
> 
> 赞同：1
> 
> 时间：2012-04-29T01:11:05.740
> 
> 标签：clojure, closures, clojurescript

我最近一直在阅读 Clojure webstack。我经历了戒指/直播。现在，我需要了解 Google Closure / Clojure 绑定：[https ://github.com/levand/domina](https://github.com/levand/domina)

但是，我在任何地方都找不到好的 domina 教程。是否有网站提供在 domina 中构建 Web 应用程序的导览？

（我熟悉 Clojure + Java GUI——我需要的主要是学习如何构建 Web 应用程序。）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:45:32.967

在学习 Domina 之前，您需要学习 ClojureScript。签出：[ClojureScriptOne](http://clojurescriptone.com/)

# android - 为什么 ImageView 在 SystemClock.sleep() 之前无法更新

> ID：10368919
> 
> 赞同：1
> 
> 时间：2012-04-29T01:11:15.387
> 
> 标签：android, imageview, sleep

在翻转旧图像之后，我想在 3 秒内在 ImageView 中显示其他图像。编码：

```
 OnClickListener oc = new OnClickListener() {
@Override
public void onClick(View v) {
         ImageView iv = (ImageView)v;
         iv.setImageResource(img2_id);
         SystemClock.sleep(3000);
         iv.setImageResource(img1_id);
    }
    }

    myImageView.setOnClickListener(oc); 
```

但它不起作用？那么，我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:21:57.690

您正在阻止 UI 线程。因此在睡眠命令期间，屏幕不会刷新。您需要安排对更改图像资源的函数的非阻塞延迟调用。这是一个修改后的代码，可以做这样的事情：

```
Handler mHandler = new Handler(); /*handler declared in your Activity thread, I assume*/

OnClickListener oc = new OnClickListener() {
    @Override
    public void onClick(View v) {
        ImageView iv = (ImageView)v;
        iv.setImageResource(img2_id);

        mHandler.postDelayed(new Runnable(){
            public void Run(){
                iv.setImageResource(img1_id);
            }
        },3000);

    }
}
myImageView.setOnClickListener(oc); 
```

# lucene - Lucene：如何更加重视某些文件？

> ID：10368920
> 
> 赞同：1
> 
> 时间：2012-04-29T01:11:43.730
> 
> 标签：lucene, couchdb, couchdb-lucene

我在我的 Web 应用程序中使用 couchdb-lucene。我有一个搜索用户的功能。

每个用户都是一个具有“全名”、“用户名”和“活动”等属性的文档。

Activity 只是一个浮点值，表示该用户的活跃程度。所以我希望 lucene 在给每个用户打分的同时也考虑这个因素。我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:23:49.300

索引时，您可以使用该`Document.setBoost()`方法。此外，您不仅可以在 Document 级别执行此操作，还可以通过调用 Document 的一个字段来执行此操作`Field.setBoost()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:15:52.087

您可以按照[https://github.com/rnewson/couchdb-lucene/blob/master/README.md](https://github.com/rnewson/couchdb-lucene/blob/master/README.md)中的说明提升添加到文档中的内容（搜索“提升”）。

# javascript - 偶尔的 ECONNREFUSED 错误

> ID：10368935
> 
> 赞同：2
> 
> 时间：2012-04-29T01:17:44.643
> 
> 标签：javascript, jquery, node.js, socket.io

我刚开始使用 nodejs 并使用它来创建服务器。客户端使用 socket.io 连接到它，接收要处理的作业，并将结果发送回 nodejs 服务器。

但是服务器偶尔会崩溃并出现以下错误：

```
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: connect ECONNREFUSED
    at errnoException (net.js:614:11)
    at Object.afterConnect [as oncomplete] (net.js:605:18) 
```

我不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T11:50:02.377

ECONNREFUSED 表示您尝试与另一台计算机建立连接，但您的连接被拒绝 - 要么没有人在监听，要么防火墙阻止了您。

我已经使用 http 看到了这一点，但我认为使用直接套接字也可能发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T16:17:47.023

每当您调用的服务器拒绝连接时，您可能正在为 node.js 死机而苦苦挣扎。尝试这个：

```
process.on('uncaughtException', function (err) {
    console.log(err);
}); 
```

它只会记录错误并保持您的服务正常运行。

# mongodb - benchRun 查询，按日期字段排序

> ID：10368936
> 
> 赞同：0
> 
> 时间：2012-04-29T01:17:55.240
> 
> 标签：mongodb

我想在这样的查询中使用 benchRun [http://www.mongodb.org/display/DOCS/JS+Benchmarking+Harness](http://www.mongodb.org/display/DOCS/JS+Benchmarking+Harness)：

```
.find().sort({ last_date : 1 }).limit(1, 
```

有没有办法在“ops”JSON 数组中指定这样的查询？我在 benchRun.cc 源代码中看不到任何内容，所以我只是想检查一下。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:08:01.697

目前，没有办法使用它进行排序。[根据问题SERVER-5722](https://jira.mongodb.org/browse/SERVER-5722)，它是“计划但未计划” 。

# java - 将基于 Java servlet 的应用程序从本地服务器部署到虚拟服务器

> ID：10368939
> 
> 赞同：0
> 
> 时间：2012-04-29T01:18:15.993
> 
> 标签：java, tomcat, servlets, web-deployment-project

正如问题所解释的，我想部署一个基于 Java servlet 的应用程序，该应用程序是在本地服务器（Apache Tomcat 6.0）上开发的。我有新虚拟服务器的 IP 地址和主机名。我想知道，如果这只是一个正常的站点迁移过程，我必须在新服务器上安装 Tomcat 并配置服务器、Web XML 文件，还是还有更多。因为我之前没有做过 Tomcat 配置。任何帮助都会很棒

*   是否有执行此操作的分步文档谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T04:09:51.870

1.  下载并安装 Java
2.  下载Tomcat [http://tomcat.apache.org/download-70.cgi](http://tomcat.apache.org/download-70.cgi)
3.  阅读[http://tomcat.apache.org/tomcat-7.0-doc/setup.html](http://tomcat.apache.org/tomcat-7.0-doc/setup.html)
4.  使用您的构建脚本将您的 webapp 构建到一个 war 文件中
5.  将war文件复制到您的tomcat安装目录下的webapps目录中。更多细节可以在[http://tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html找到](http://tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html)

我发现最好创建一个脚本，通过运行我的构建脚本来部署我的 webapp。scp 和 ssh 任务可以方便地快速安装它。可能还有其他可能对您有用的 Maven 任务。

# jquery - 使用 httpRequest 将 php 字符串传递到 Javascript 数组

> ID：10368940
> 
> 赞同：0
> 
> 时间：2012-04-29T01:18:18.950
> 
> 标签：jquery, json, httprequest

我正在尝试使用 httpRequest 从 php 请求中动态填充 javascript 数组 beach3。

```
var jqxhr = $.get("http://127.0.0.1/websites/map_with_me.php?region="+region+"&suburb="+suburb+"&lat="+lat+"&lon="+lng, function() {
document.getElementById("thediv").innerHTML = (jqxhr.responseText);
var beaches3 = (jqxhr.responseText);
 }) 
```

map_with_me.php 的输出是

```
 [
     ['Bondi Beach', -33.890542, 151.274856, 4],
     ['Coogee Beach', -33.423036, 151.259052, 5],
     ['Cronulla Beach', -34.028249, 121.157507, 3],
     ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
     ['Maroubra Beach', -33.450198, 151.259302, 1]
]; 
```

所以我想用 map_with_me.php 文件生成的动态位置填充 beachs3 var。

如果我用静态海滩变量替换整个 $.get 请求，它就可以工作。

如何将php文件生成的动态javascript传递给javascript数组？

map_with_me.php

```
<?php 
echo "var beaches3 = [
  ['Bondi Beach', -33.890542, 151.274856, 4],
  ['Coogee Beach', -33.423036, 151.259052, 5],
  ['Cronulla Beach', -34.028249, 121.157507, 3],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
  ['Maroubra Beach', -33.450198, 151.259302, 1]
];"
?> 
```

这有效：

```
var jqxhr = $.get("http://127.0.0.1/websites/map_with_me.php?region="+region+"&suburb="+suburb+"&lat="+lat+"&lon="+lng, function() {
document.getElementById("thediv").innerHTML = (jqxhr.responseText);
var beaches3 = [
      ['Bondi Beach', -33.890542, 151.274856, 4],
      ['Coogee Beach', -33.423036, 151.259052, 5],
      ['Cronulla Beach', -34.028249, 121.157507, 3],
      ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
      ['Maroubra Beach', -33.450198, 151.259302, 1]
    ];
 }) 
```

这不：

```
var jqxhr = $.get("http://127.0.0.1/websites/map_with_me.php?region="+region+"&suburb="+suburb+"&lat="+lat+"&lon="+lng, function() {
document.getElementById("thediv").innerHTML = (jqxhr.responseText);
var beaches3 = (jqxhr.responseText);
 }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:23:22.837

如果您确定它是一个数组，而不是 json 或其他东西，只需执行以下操作：

```
$.get("/websites/map_with_me.php?region="+region+"&suburb="+suburb+"&lat="+lat+"&lon="+lng, function(data) {
    $("#thediv").html(data);
    var beaches3 = data;
}); 
```

应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:31:00.283

你有没有尝试过：

```
var beaches3 =  JSON.parse(jqxhr.responseText); 
```

# java - 如何在 Mac 上的应用程序名称菜单下创建关于消息？

> ID：10368941
> 
> 赞同：1
> 
> 时间：2012-04-29T01:18:40.043
> 
> 标签：java, macos, native, about-box

如何使 Mac 上应用程序名称菜单下的关于...选项起作用？我想要一条显示应用程序版本名称的消息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:22:03.403

Java 在每个平台上的运行相似度为 99.9%。因此，如果您知道如何在 Windows 上执行此操作，那么您可以在 Mac 上获得相同的结果。

~~提示：查找并阅读 JMenuBar 和 JMenuItem~~

仔细阅读你的问题后，现在我明白你想要什么了:)

# 试试这个链接：

[http://developer.apple.com/library/mac/#documentation/Java/Reference/Java_PropertiesRef/Articles/JavaSystemProperties.html](http://developer.apple.com/library/mac/#documentation/Java/Reference/Java_PropertiesRef/Articles/JavaSystemProperties.html)

尝试使用

```
System.setProperty("apple.laf.useScreenMenuBar", "true"); 
```

在你的主要方法中，看看它是否有效。

# 示例 - 出于示例目的编辑代码

```
/*
 * Copyright (c) 1995, 2008, Oracle and/or its affiliates. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *   - Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *   - Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *
 *   - Neither the name of Oracle or the names of its
 *     contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

import java.awt.*;
import java.awt.event.*;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JCheckBoxMenuItem;
import javax.swing.JRadioButtonMenuItem;
import javax.swing.ButtonGroup;
import javax.swing.JMenuBar;
import javax.swing.KeyStroke;
import javax.swing.ImageIcon;

import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JScrollPane;
import javax.swing.JFrame;

/* MenuLookDemo.java requires images/middle.gif. */

/*
 * This class exists solely to show you what menus look like.
 * It has no menu-related event handling.
 */
public class MenuLookDemo {
    JTextArea output;
    JScrollPane scrollPane;

    public JMenuBar createMenuBar() {
        JMenuBar menuBar;
        JMenu menu, submenu;
        JMenuItem menuItem;
        JRadioButtonMenuItem rbMenuItem;
        JCheckBoxMenuItem cbMenuItem;

        //Create the menu bar.
        menuBar = new JMenuBar();

        //Build the first menu.
        menu = new JMenu("A Menu");
        menu.setMnemonic(KeyEvent.VK_A);
        menu.getAccessibleContext().setAccessibleDescription(
                "The only menu in this program that has menu items");
        menuBar.add(menu);

        //a group of JMenuItems
        menuItem = new JMenuItem("A text-only menu item",
                                 KeyEvent.VK_T);
        //menuItem.setMnemonic(KeyEvent.VK_T); //used constructor instead
        menuItem.setAccelerator(KeyStroke.getKeyStroke(
                KeyEvent.VK_1, ActionEvent.ALT_MASK));
        menuItem.getAccessibleContext().setAccessibleDescription(
                "This doesn't really do anything");
        menu.add(menuItem);

        ImageIcon icon = createImageIcon("images/middle.gif");
        menuItem = new JMenuItem("Both text and icon", icon);
        menuItem.setMnemonic(KeyEvent.VK_B);
        menu.add(menuItem);

        menuItem = new JMenuItem(icon);
        menuItem.setMnemonic(KeyEvent.VK_D);
        menu.add(menuItem);

        //a group of radio button menu items
        menu.addSeparator();
        ButtonGroup group = new ButtonGroup();

        rbMenuItem = new JRadioButtonMenuItem("A radio button menu item");
        rbMenuItem.setSelected(true);
        rbMenuItem.setMnemonic(KeyEvent.VK_R);
        group.add(rbMenuItem);
        menu.add(rbMenuItem);

        rbMenuItem = new JRadioButtonMenuItem("Another one");
        rbMenuItem.setMnemonic(KeyEvent.VK_O);
        group.add(rbMenuItem);
        menu.add(rbMenuItem);

        //a group of check box menu items
        menu.addSeparator();
        cbMenuItem = new JCheckBoxMenuItem("A check box menu item");
        cbMenuItem.setMnemonic(KeyEvent.VK_C);
        menu.add(cbMenuItem);

        cbMenuItem = new JCheckBoxMenuItem("Another one");
        cbMenuItem.setMnemonic(KeyEvent.VK_H);
        menu.add(cbMenuItem);

        //a submenu
        menu.addSeparator();
        submenu = new JMenu("A submenu");
        submenu.setMnemonic(KeyEvent.VK_S);

        menuItem = new JMenuItem("An item in the submenu");
        menuItem.setAccelerator(KeyStroke.getKeyStroke(
                KeyEvent.VK_2, ActionEvent.ALT_MASK));
        submenu.add(menuItem);

        menuItem = new JMenuItem("Another item");
        submenu.add(menuItem);
        menu.add(submenu);

        //Build second menu in the menu bar.
        menu = new JMenu("Another Menu");
        menu.setMnemonic(KeyEvent.VK_N);
        menu.getAccessibleContext().setAccessibleDescription(
                "This menu does nothing");
        menuBar.add(menu);

        return menuBar;
    }

    public Container createContentPane() {
        //Create the content-pane-to-be.
        JPanel contentPane = new JPanel(new BorderLayout());
        contentPane.setOpaque(true);

        //Create a scrolled text area.
        output = new JTextArea(5, 30);
        output.setEditable(false);
        scrollPane = new JScrollPane(output);

        //Add the text area to the content pane.
        contentPane.add(scrollPane, BorderLayout.CENTER);

        return contentPane;
    }

    /** Returns an ImageIcon, or null if the path was invalid. */
    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = MenuLookDemo.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("MenuLookDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        MenuLookDemo demo = new MenuLookDemo();
        frame.setJMenuBar(demo.createMenuBar());
        frame.setContentPane(demo.createContentPane());

        //Display the window.
        frame.setSize(450, 260);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                //This line does the trick
                System.setProperty("apple.laf.useScreenMenuBar", "true");
                createAndShowGUI();
            }
        });
    }
} 
```

# php - 检查数组中是否存在一段字符串

> ID：10368943
> 
> 赞同：0
> 
> 时间：2012-04-29T01:19:12.850
> 
> 标签：php, arrays, string, translate

我正在使用此功能来翻译内容：

```
function t($string)
{
    global $_ACTIVE_LANGUAGE;
    if(is_array($_ACTIVE_LANGUAGE) && array_key_exists($string,$_ACTIVE_LANGUAGE) )
    {
        return (!empty($_ACTIVE_LANGUAGE[$string])) ? $_ACTIVE_LANGUAGE[$string] : $string; 
    } else {
        return $string;
    }
} 
```

它工作得很好，我放了 t('hola') 并且如果有带有数组 'hola' => 'hello' 的英文文件，它会翻译它。

但是，现在我希望能够翻译可以包含比字符串更多的文本的字符串，例如这个例子：

```
$string1 = 'download-file-justin-bieber-awesome-voice.html';
$string2 = 'view-file-rihanna-very-sexy.html';
$string3 = 'mostseen12345.html';
$string4 = 'incredible:stuff-and:real-things.html';

$array = array
(
    'download-file' => 'descargar-archivo',
    'view-file' => 'ver-archivo',
    'mostseen' => 'masvistos',
    'incredible:stuff' = 'cosas:increibles'
} 
```

我希望脚本能够翻译给定字符串中数组键中的部分。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:21:52.343

您可以查看php [-manual](http://php.net/manual/en/function.str-replace.php)`str_replace()`。

```
$from = array('download-file','view-file','mostseen','incredible:stuff');
$to   = array('descargar-archivo','ver-archivo','masvistos','cosas:increibles');

$translated_string = str_replace($from,$to,$original_string); 
```

# android - 在 Android 中完成一个 Activity

> ID：10368945
> 
> 赞同：0
> 
> 时间：2012-04-29T01:19:31.983
> 
> 标签：android

当您在活动中按下后退按钮时，默认情况下，应用程序不会返回调用它的活动吗？我正在从 Activity A 调用我的应用程序中的一个活动（称为 Activity B），但是当我在 Activity B 中点击后退按钮时，我被带回应用程序的主页。

所以我想一般来说，按下手机上的后退按钮会带你进入通话活动吗？

从活动 A 的内部类中调用活动 B：

```
 class HeadlineButtonListener implements OnClickListener {

    private Story story;

    public HeadlineButtonListener(Story story) {
        this.story = story;
    }

    @Override
    public void onClick(View v) {
        Intent myIntent = new Intent(HeadlineBoard.this, StoryView.class);
        myIntent.putExtra(Constants.STORY_EXTRA, story);
        HeadlineBoard.this.startActivity(myIntent);
        finish();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:29:08.730

您`finish()`在触发下一个活动后调用第一个活动，这将导致它从活动堆栈中删除，只需删除对`finish()`：

```
@Override
public void onClick(View v) {
    Intent myIntent = new Intent(HeadlineBoard.this, StoryView.class);
    myIntent.putExtra(Constants.STORY_EXTRA, story);
    startActivity(myIntent);
} 
```

# python - 如何使qmenu项目可检查pyqt4 python

> ID：10368947
> 
> 赞同：15
> 
> 时间：2012-04-29T01:20:09.153
> 
> 标签：python, pyqt4, qmenu

如何使我的 qmenu 可检查？

```
from PyQt4 import QtGui

app = QtGui.QApplication([])

menu = QtGui.QMenu()

menu.addAction('50%')
menu.addAction('100%')
menu.addAction('200%')
menu.addAction('400%')
menu.show()

app.exec_() 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-29T02:15:40.180

像这样：

```
from PyQt4 import QtGui

app = QtGui.QApplication([])

w = QtGui.QMainWindow()
menu = QtGui.QMenu("menu", w)

menu.addAction(QtGui.QAction('50%', menu, checkable=True))
menu.addAction(QtGui.QAction('100%', menu, checkable=True))
menu.addAction(QtGui.QAction('200%', menu, checkable=True))
menu.addAction(QtGui.QAction('300%', menu, checkable=True))
menu.addAction(QtGui.QAction('400%', menu, checkable=True))

w.menuBar().addMenu(menu)
w.show()
app.exec_() 
```

或没有单选按钮：

```
from PyQt4 import QtGui

app = QtGui.QApplication([])

w = QtGui.QMainWindow()
menu = QtGui.QMenu("menu", w)
ag = QtGui.QActionGroup(w, exclusive=True)

a = ag.addAction(QtGui.QAction('50%', w, checkable=True))
menu.addAction(a)

a = ag.addAction(QtGui.QAction('100%', w, checkable=True))
menu.addAction(a)

a = ag.addAction(QtGui.QAction('200%', w, checkable=True))
menu.addAction(a)

a = ag.addAction(QtGui.QAction('300%', w, checkable=True))
menu.addAction(a)

a = ag.addAction(QtGui.QAction('400%', w, checkable=True))
menu.addAction(a)

w.menuBar().addMenu(menu)
w.show()
app.exec_() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-17T13:36:14.867

我建议在紧凑的第一个解决方案中添加几行来显示按钮的实际使用：

```
from PyQt4 import QtGui, QtCore

def isChecked(): 
    """ Prints selected menu labels. """ 
    [print(action.text()) for action in menu.actions() if action.isChecked()]

app = QtGui.QApplication([])
w = QtGui.QMainWindow()
menu = QtGui.QMenu("menu", w)

menu.addAction(QtGui.QAction('50%', menu, checkable=True))
menu.addAction(QtGui.QAction('100%', menu, checkable=True))
menu.addAction(QtGui.QAction('200%', menu, checkable=True))
menu.addAction(QtGui.QAction('400%', menu, checkable=True))

menu.triggered.connect(isChecked)

w.menuBar().addMenu(menu)
w.show()
app.exec_() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-03T09:28:06.413

**PyQt5**的子菜单示例

 **```
from PyQt5.QtWidgets import (
    QMenu,
    QAction,
)

menu = QMenu()
color_menu = QMenu('Player color')
white_color = QAction('White', checkable=True)
black_color = QAction('Black', checkable=True)
color_menu.addAction(white_color)
color_menu.addAction(black_color)

play_action = QAction('Start game')
menu.addAction(play_action)
menu.addMenu(color_menu) 
```**

# python - 更新/刷新动态创建的 WxPython 小部件

> ID：10368948
> 
> 赞同：5
> 
> 时间：2012-04-29T01:20:26.507
> 
> 标签：python, dynamic, wxpython, refresh

新的 Python 程序员在这里尝试学习如何动态更新小部件。首先，我有以下代码。我想做的是将我的变量“self.dynamiclength”更改为任何整数，并让 WxPython 适当地更新小部件的数量。在更新 self.dynamiclength 无济于事后，我尝试将 self.Refresh() 和 self.Update() 放入我的 TestFrame 中。

在寻求帮助之前，我已经尽可能多地阅读了这方面的内容，但我在 Wx 上太新了，无法自己解决这个问题。非常感谢！

```
import wx
import  wx.lib.scrolledpanel as scrolled

class TestFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, size=(1000, 550))
        panel = wx.Panel(self)

        mainSizer = wx.BoxSizer(wx.VERTICAL)
        pbox0 = wx.BoxSizer(wx.VERTICAL)
        controlback0 = wx.Button(panel, label="Back0")
        controlforward0 = wx.Button(panel, label="Forward0")
        pbox0.Add(controlback0, 0, wx.ALL)
        pbox0.Add(controlforward0, 0, wx.ALL)
        mainSizer.Add(pbox0)

        self.scrolling_window = scrolled.ScrolledPanel( panel )
        self.scrolling_window.SetAutoLayout(1)
        self.scrolling_window.SetupScrolling()
        self.sizer = wx.BoxSizer( wx.VERTICAL )
        self.child_windows = []

        ##############################################
        #this is the variable that I want to change, 
        #and I don't know how to get the 'for loop' 
        #below to update as well. 

        self.eedictionary = {}
        self.dynamiclength = 5
        for i in range(0,self.dynamiclength):
            wind = self.addBox(i)
            self.sizer.Add(wind, 0, wx.CENTER|wx.ALL, 5)
        ###############################################
        #the following code binds all appropriate buttons to a pedigree variable updater
        button_binding_list = ['controlback','controlforward']
        for j in button_binding_list:
            eid = self.eedictionary[str(i)+j]
            self.scrolling_window.Bind(wx.EVT_BUTTON, lambda evt: self.onclick(evt, id), id=eid)

        self.scrolling_window.SetSizer(self.sizer)

        mainSizer.Add(self.scrolling_window, 1, wx.EXPAND)
        panel.SetSizer(mainSizer)

    def addBox(self, i):
        pbox = wx.BoxSizer(wx.VERTICAL)

        controlback = wx.Button(self.scrolling_window, label="Back")
        controlforward = wx.Button(self.scrolling_window, label="Forward")

        pbox.AddMany([(controlback, 0, wx.ALL), (controlforward, 0, wx.ALL)])

        #for each object created in the addBox module, its id is added to the dictionary 
        self.eedictionary[str(i)+'controlback'] = controlback.GetId()
        self.eedictionary[str(i)+'controlforward'] = controlforward.GetId()
        return pbox

    def onclick(self, event):
        self.dynamiclength +=1
        print 'added one to self.dynamiclength', self.dynamiclength

if __name__=='__main__':
    app = wx.App(False)
    f = TestFrame()
    f.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T21:07:02.673

我有类似的测试代码，我之前写过。也许你会发现它很有用。

```
import wx

#===================================================================================================
class UpperPanel(wx.Panel):
    def __init__(self, *args, **kwargs):
        wx.Panel.__init__(self, *args, **kwargs)
        self.combo = wx.ComboBox(self, choices=["0", "1", "2", "3", "4"], size=(200, -1))
        self.combo.Bind(wx.EVT_COMBOBOX, self.GetParent().middlePanel.Change)
        self.logo = wx.Button(self, size=(300, 100))

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.combo, 0, wx.EXPAND)
        self.sizer.Add(self.logo, 0, wx.EXPAND)

        self.SetSizerAndFit(self.sizer)

#===================================================================================================
class MiddlePanel(wx.Panel):
    def __init__(self, *args, **kwargs):
        wx.Panel.__init__(self, *args, **kwargs)
        self.subs = []
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizerAndFit(self.sizer)

    def Change(self, e):
        self.sizer = wx.BoxSizer(wx.VERTICAL)

        for a in self.subs:
            a.Destroy()

        self.subs = []

        for a in range(int(e.GetString())):
            b = wx.Button(self, size=(-1, 50))
            self.subs.append(b)
            self.sizer.Add(b, 1, wx.EXPAND)

        self.SetSizerAndFit(self.sizer)
        self.GetParent().Fit()

#===================================================================================================
class MainWin(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)

        self.middlePanel = MiddlePanel(self)
        self.upperPanel = UpperPanel(self)
        self.textArea = wx.TextCtrl(self, size=(-1, 300), style=wx.TE_MULTILINE)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.upperPanel, 0, wx.EXPAND)
        self.sizer.Add(self.middlePanel, 0, wx.EXPAND)
        self.sizer.Add(self.textArea, 1, wx.EXPAND)

        self.SetSizerAndFit(self.sizer)

#===================================================================================================
if __name__ == '__main__':
    app = wx.PySimpleApp()
    main_win = MainWin()
    main_win.Show()
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:31:50.850

如果您需要在创建并显示应用程序之后更新小部件的数量，您需要在方法中完成，而不是在**init**中。**init**仅在第一次实例化应用程序时运行。每当您在显示框架后添加或删除小部件时，您都需要在父小部件或其大小调整器上调用 Layout()。也可以看看

*   [http://wxpython-users.1045709.n5.nabble.com/dynamically-adding-amp-removing-widgets-td2342432.html](http://wxpython-users.1045709.n5.nabble.com/dynamically-adding-amp-removing-widgets-td2342432.html)
*   [https://groups.google.com/forum/?fromgroups#!topic/wxPython-users/eQjlYlsw4qs](https://groups.google.com/forum/?fromgroups#!topic/wxPython-users/eQjlYlsw4qs)
*   [添加带有按钮的小部件 - wxPython](https://stackoverflow.com/questions/6919318/adding-a-widget-with-a-button-wxpython)

# python - 我遇到了重复尝试阻止问题

> ID：10368955
> 
> 赞同：2
> 
> 时间：2012-04-29T01:22:16.617
> 
> 标签：python, file, io, block, repeat

所以我在这里制作了一个小应用程序，并且我尝试了块（因为我需要查看文件是否已经存在或应该创建）。虽然...我的尝试块由于某种原因而重复！我完全**不** *知道*为什么会这样。请帮忙？此外，该文件创建良好:) 代码：

```
import sys
import time
Version = "V0.1"
def user():
    PISBNdat = open("PISBN.dat", "w")
    PISBNdat.write(Version)
    cuser = raw_input("Please enter account username!")
    for line in PISBNdat:
        print "Test"
        if cuser in line:
            print("User already exists! Try again!")
            user()

def start():
    print "Hello and welcome to Plaz's PISBN!"
    print "Opening file..."
    time.sleep(0.8)
    try:
        fin = open("PISBN.dat", "r")
        print "Success!"
        fin.close()
        user()
    except:
        time.sleep(0.5)
        print "Did not recognize/find file!"
        time.sleep(0.1)
        print "Creating file!"
        time.sleep(0.5)
        try:
            fout = open("PISBN.dat", "w")
            print "Success!"
            fout.close()
            user()
        except:
            print "Failed!"
            exit()

start() 
```

这是输出...：

```
Hello and welcome to Plaz's PISBN!
Opening file...
Did not recognize/find file!
Creating file!
Success!
Please enter account username! [This is what I entered: Plazmotech]
Failed! 
```

现在很明显，因为它说“失败！”，这意味着它正在运行我的尝试块......因为那是它唯一可以输出“失败！”的地方 所以请在这里帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:30:31.603

仅捕获您要处理的异常。请注意，打印“失败！” 并且退出*不*处理异常。Python 无论如何都会这样做，而且它会为您提供关于发生了什么的大量信息，那么为什么要编写额外的代码来做更少的事情并隐藏问题的原因呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:41:24.267

正如某人（刚刚删除他的帖子）之前指出的那样，您在用户函数中再次调用 user() ，这在这里很可能是错误的。

但是，我相信您的问题出在其他地方。我假设您希望“PISBN.dat”包含您查找帐户的数据库。但是，仅使用写权限打开文件将无济于事。这会导致您的循环“for line in PISBNdat:”根本不起作用，因此没有出现“Test”消息。

它让我认为“raw_input”失败并且异常被捕获。但正如kindall 指出的那样，您的代码存在一些设计缺陷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T04:23:13.127

下面是一个`start()`正确`try...except`使用的例子：

```
def start():
    print "Hello and welcome to Plaz's PISBN!"
    print "Opening file..."
    time.sleep(0.8)
    try: #try bloc contains minimum amount of code to catch the pertinent error.
        f = open("PISBN.dat", "r")
        print "Success!"
    except IOError: #Only catch the exceptions you want to handle. IOError, in this case
        f = None

    if not f:
        print "Did not recognize/find file!"
        print "Creating file!"

        try:
            f = open("PISBN.dat", "w")
            print "Success!"
        except IOError:
            print "Failed!"
            exit()

    f.close()
    user() #Call user() after the file has been tested and/or created. 
```

# jquery-masonry - 将 Jquery Masonry 和无限滚动应用到 Tumblr 主题

> ID：10368958
> 
> 赞同：0
> 
> 时间：2012-04-29T01:22:51.650
> 
> 标签：jquery-masonry, infinite-scroll

我正在创建一个 3 列的 tumblr 主题，并尝试对帖子应用无限滚动和砌体。砌体仅适用于“每页帖子”的数量（例如，如果设置为 15，砌体将仅适用于前 15 个帖子）。我到处寻找，但找不到任何东西。这是我的代码：

```
<script type="text/javascript" src="http://static.tumblr.com/imovwvl/rSGl20lfv/masonry.js"></script>

{block:IfInfiniteScroll}
<script type="text/javascript" src="http://proto.jp/js/tumblrAutoPager.js"></script>
{/block:IfInfiniteScroll}

<script src="http://static.tumblr.com/thpaaos/lLwkowcqm/jquery.masonry.js"></script>

<script type="text/javascript">
$(window).load(function () {
$('#postCnts').masonry(),
$('.masonryWrap').infinitescroll({
navSelector : "div#pgNvgt",
// selector for the paged navigation (it will be hidden)
nextSelector : "div#pgNvgt a#nextPage",
// selector for the NEXT link (to page 2)
itemSelector : ".post",
// selector for all items you'll retrieve
bufferPx : 10000,
extraScrollPx: 10,
loadingImg : "http://b.imagehost.org/0548/Untitled-2.png",
loadingText : "<em></em>",
},
// call masonry as a callback.
function() { $('#postCnts').masonry({ appendedContent: $(this) }); }
);
});

</script> 
```

援助会非常好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:06:54.857

您应该升级到最新版本的脚本 (v2.1.05)。您正在使用 v 1.0.1。

你还有两个 masonry.js 文件，你只需要一个。

我建议在 tumblrAutoPager 和 imagesLoaded 插件上使用 jqueryInfiniteScroll 而不是 $(window).load [http://masonry.desandro.com/docs/help.html](http://masonry.desandro.com/docs/help.html)

# javascript - 如何为类的特定实例设置动画？

> ID：10368965
> 
> 赞同：1
> 
> 时间：2012-04-29T01:25:07.400
> 
> 标签：javascript, jquery, html

下面是我正在做的一个片段。它基本上是一个大的图像网格，上面有一个不透明的覆盖层。当我悬停 div 的图像时，我希望每个特定的叠加层都能动画出来。我还需要确保一次只有一张图像没有叠加层。

我该怎么做呢？

```
<div id="cast-wrap">
    <div id="img-wrap">
    <div class="char"><div class="overlay"></div><img style="z-index: 99999999;" src="img/person1.jpg"/></div>
    <div class="char"><div class="overlay"></div><img src="img/person2.jpg"/></div>
    <div class="char"><div class="overlay"></div><img src="img/person3.jpg"/></div>
</div> 
```

这就是我尝试做的...

```
$(".char").hover(
    if($("this.char img").css("z-index") == "0px"){ 
    $('this.overlay').animate({"opacity": 0});
    $('this.char img').animate({zIndex: 999999}, 2000)
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:27:51.757

z-index 永远不会等于“0px”，因为 z-index 不是像素值，如果您只是通过将叠加层上的不透明度设置为零来删除叠加层，则您也不需要在 javascript 中使用 z-index .

```
$(".char").on({
    mouseenter: function() {
        $('.overlay', this).animate({"opacity": 0}, 1000);
    },
    mouseleave: function() {
        $('.overlay', this).animate({"opacity": 1}, 1000);
    }
}); 
```

# ruby-on-rails - 为嵌套的 Ruby on Rails 资源渲染新表单

> ID：10368969
> 
> 赞同：1
> 
> 时间：2012-04-29T01:25:48.593
> 
> 标签：ruby-on-rails, ruby, rails-routing

在我的 Ruby on Rails 应用程序中，每个组都有_many :expenses。我已经嵌套了路线，因此费用仅作为其父组的子实体输入。这是 routes.rb 的摘录。

```
resources :groups do
    resources :expenses
end 
```

如果通过 /groups/:group_id/expenses/new 提交的费用未节省，我无法弄清楚如何呈现“新”操作。在我的费用_controller.rb 中，创建操作的定义如下：

```
def create
    @expense = Expense.new(params[:expense])
    @expense.group_id = params[:group_id]
    if @expense.save
      redirect_to group_expense_path(@expense.group.id, @expense.id)
    else
      render 'new'
    end
end 
```

如果我满足费用验证并且@expense.save 结束工作，一切都会正常工作。但是，当它失败并且代码尝试呈现“新”时，我得到：

```
undefined method `expenses_path' for #<#<Class:0x007fd408b1fd58>:0x007fd408f21ca8> 
```

所以，我假设我的嵌套路由有问题。如何将用户返回到新表单，但仍通过 flash[] 参数向他/她显示他们最初尝试提交的数据的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T02:07:56.227

看起来您需要在视图中明确指定 form_for 的 url。

像……</p>

```
<%= form_for @expense, :url => group_expenses_path(@group.id) do |f| %>
  ...
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:18:35.263

问题是`@group`没有初始化

所以在你的控制器中做

```
@expense = Expense.new(params[:expense])
@group = Group.find(params[:group_id])
@expense.group_id = @group.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T05:40:24.777

在您`<%= form_for %>`使用`@group`的网址中，因为费用属于_to 组。但是在控制器中的 create 操作中，您还没有定义什么是`@group`，所以首先您应该将其定义为：

```
@expense = Expense.new(params[:expense])
@group = Group.find(params[:group_id])
@expense.group_id = @group.id 
```

另外我建议`respond_to`在您的控制器中使用：

```
respond_to do |format|
  if @expense.save
    format.html { redirect_to group_expense_path(@group.id, @expense.id), :notice => "Any msg you want" }
  else
    format.html { render :action => "new" }
  end
end 
```

所有这些都在控制器内的创建操作中。
另外对于不同的渲染方法查找： http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

希望这会有所帮助！

# java - 使用 Swing 显示 GUI 框架

> ID：10368971
> 
> 赞同：0
> 
> 时间：2012-04-29T01:26:25.073
> 
> 标签：java, swing, jframe, jform-designer

目前的问题： ![在此处输入图像描述](../Images/87c7acac322482499872edb7f9da6d72.png)

输出应该是什么：

![在此处输入图像描述](../Images/aa39cd284cb0317469bf9cc2461679a7.png)

我相信我必须简单地在 bmiCalculatorFrame 中添加 main() 而不是我所做的，但不确定这是如何完成的，因为这样做会导致更多错误。

代码，[http ://pastebin.com/raw.php?i=svTUwufa](http://pastebin.com/raw.php?i=svTUwufa)

我知道这是很多台词，而且不是很具体，但这是解释我所处困境的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:34:57.923

我想，你邪恶的根源可以在以下几行中找到：

```
private void initComponents() {
    JFrame bmiCalculatorFrame = new JFrame(); 
```

您正在将所有组件添加到 中`bmiCalculatorFrame`，但是在 main 方法中，您实例化了自己扩展`JFrame`的类。在我看来，达到目标的最短方法是更改​​以下几行：

```
bmiCalculatorFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        bmiCalculatorFrame.setTitle("BMI Calculator");
Container bmiCalculatorFrameContentPane = bmiCalculatorFrame.getContentPane(); 
```

使用`this`而不是`bmiCalculatorFrame`.

# cocoa - 从沙盒应用程序启动助手

> ID：10368972
> 
> 赞同：4
> 
> 时间：2012-04-29T01:26:31.310
> 
> 标签：cocoa, appstore-sandbox

我有一个沙盒应用程序。每次启动时，我都需要它来启动一个帮助应用程序（从主应用程序的包中）。但是，这失败了：

```
NSError *error;
[[NSWorkspace sharedWorkspace] launchApplicationAtURL:helperURL
                               options:NSWorkspaceLaunchDefault
                               configuration:nil
                               error:&error]; 
```

错误是：

> 应用程序“Helper”无法启动，因为它已损坏。，NSUnderlyingError=0x10214c700“操作无法完成。（OSStatus 错误 -10827。）”}

现在，该错误具有误导性，因为如果我禁用沙盒权利，应用程序将正常启动。显然这是一个错误，如此处所[报告](http://openradar.appspot.com/10934199)。

我的问题是：**有解决方法吗？**

我可以使用`SMLoginItemSetEnabled`，如此[处](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html)所述：

> 通过`true`立即启动助手应用程序并指示每次用户登录时都应启动它。通过`false`终止助手应用程序并指示用户登录时不应再启动它。

但是，由于 App Store Review Guideline 2.26，我不能在不先询问用户的情况下使用这个 API：

> 未经用户同意设置为自动启动或在启动或登录时自动运行其他代码的应用程序将被拒绝

因此，使用此解决方法意味着询问用户“每次登录时启动帮助程序是否可以？如果不是，您将无法使用此应用程序！” 显然，这并不理想...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:10:29.427

一个可行的解决方法是使用`NSTask`生成`/usr/bin/open`并为其提供帮助应用程序的路径：

```
NSTask *task = [NSTask new];
[task setLaunchPath: @"/usr/bin/open"];
[task setArguments: [NSArray arrayWithObjects: helperPath, nil]];
[task launch]; 
```

这在沙盒中运行良好，并且似乎与 Mac App Store Review Guidelines 兼容。

**更新：**在进一步检查中，这种技术经常失败并出现错误

> 该应用程序无法打开，因为它的可执行文件丢失。

当我关闭沙盒时，不会发生此错误。所以必须有更好的解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T14:41:03.067

您可以使用 SMLoginItemSetEnabled。您必须征得用户同意一次。毕竟，第一次使用 SMLoginItemSetEnabled 启动的帮助应用程序会在用户每次登录时自动启动。

# javascript - 使用 nodejs 的 Forever 将 console.logs 输出到屏幕

> ID：10368973
> 
> 赞同：20
> 
> 时间：2012-04-29T01:26:50.973
> 
> 标签：javascript, jquery, node.js

我刚刚发现我的 nodejs 应用程序不断崩溃，所以我习惯于`forever app.js`启动我的应用程序并让它在崩溃时自动重新启动。

**问题：**`console.log`现在我的应用程序通过和运行时输出了很多有用的信息`util.log`。我曾经用来`screen`运行 node 应用程序，但现在我永远使用来运行 nodejs 应用程序，我再也看不到所有的输出了。

有没有办法实时查看 nodejs 应用程序的所有输出？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-06-28T08:22:55.723

直接使用永久命令：

```
forever logs app.js -f 
```

它实时显示应用程序的输出和永久日志（显示检测到的更改和重启消息）。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-29T01:39:21.973

您可以使用此 shell 命令实时观看日志文件。

```
 tail -f /path/to/logfile 
```

不确定这是否是您需要的。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-02-16T04:58:28.787

**最简单的方法是**

跑 ：

```
forever logs // will give you list of log files
forever logs 0 -f // then just provide the index of log 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-07T17:19:08.697

如果您将`--help`标志传递给 Forever，您将看到以下示例：

```
forever -o out.log -e err.log my-script.js 
```

`-o`并`-e`定义标准输出和标准错误日志文件。

```
-o  OUTFILE      Logs stdout from child script to OUTFILE
-e  ERRFILE      Logs stderr from child script to ERRFILE 
```

Forever 对于开发来说似乎有点矫枉过正。给[Supervisor](https://github.com/petruisfan/node-supervisor)一个机会，看看你是否更喜欢它：

```
npm install -g supervisor
supervisor app.js 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-14T13:26:23.490

我在 AWS EC2 实例上运行 nodejs，这对我有用。注意：如果您是 root 所有者，则可以访问日志。所以首先使用**sudo su**然后

```
forever -a -o out.log -e err.log yourServerApp.js 
```

它将尾随控制台日志（如果您从日志中跟踪事件消息）和错误日志。我希望它可以帮助某人。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-21T01:08:07.583

```
linux : tail -f /path/to/logfile.log
windows : enter PowerShell -> Get-Content /path/to/logfile.log -Wait -Tail 1000 
```

# android - ImageView点击图片后不会触发，但是点击TextView后会触发

> ID：10368975
> 
> 赞同：1
> 
> 时间：2012-04-29T01:26:55.617
> 
> 标签：android, animation, imageview, rotation

我的 xml 文件中有一个 ImageView，我想在单击时旋转图像。

我使用以下代码存档：

```
@Override
    public boolean onTouchEvent(MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            img = (ImageView) findViewById(R.id.imageView1);
            Animation an = new RotateAnimation(0.0f, 360.0f, img.getWidth() / 2,
                    img.getHeight() / 2);
            an.reset();
            // Set the animation's parameters
            an.setDuration(1000); // duration in ms
            an.setRepeatCount(0); // -1 = infinite repeated
            an.setRepeatMode(Animation.REVERSE); // reverses each repeat
            an.setFillAfter(true); // keep rotation after animation
            //an.start();
            img.setAnimation(an);

        }
        return true;
    } 
```

但问题是，当我按下图像时，没有任何反应，图像不会转动。但是，如果我单击图像，然后单击 TextView，图像会旋转。

这太随意了。

我究竟做错了什么？我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:44:03.017

好吧，您似乎正在为整个活动调用 onTouchEvent 函数。因此，任何未被活动窗口内的视图“消耗”的触摸动作都将触发此功能。因此，您触摸活动中的某个位置（例如 TextView）会触发此图像旋转是合乎逻辑的。

看到你的代码我最好的猜测是：最好**为你的 ImageView 本身**实现一个触摸/点击事件监听器，而不是你的整个 Activity。这是执行此操作的代码片段：

```
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    /*YOUR CUSTOM CODE AT ACTIVITY CREATION HERE*/

    /*here we implement a click listener for your ImageView*/
    final ImageView img = (ImageView)findViewById(R.id.imageView1);
    img.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View v){
            Animation an = new RotateAnimation(0.0f, 360.0f, img.getWidth() / 2, img.getHeight() / 2);
            an.reset();
            /* Set the animation's parameters*/
            an.setDuration(1000); // duration in ms
            an.setRepeatCount(0); // -1 = infinite repeated
            an.setRepeatMode(Animation.REVERSE); // reverses each repeat
            an.setFillAfter(true); // keep rotation after animation
            //an.start();
            img.setAnimation(an);
            img.invalidate(); //IMPORTANT: force image refresh

        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T04:31:49.813

我会支持 epihoms 的推荐（使用 OnClickListener）。另外，请确保您的 ImageView 可以接收点击：

```
final ImageView img = (ImageView)findViewById(R.id.imageView1);
img.setClickable(true);
img.setFocusable(true);
img.setOnClickListener(new View.OnClickListener(){
    ... 
```

您也可以在 XML 布局中设置这些值：

```
android:clickable="true"
android:focusable="true" 
```

# javascript - 返回一个对象 javascript

> ID：10368976
> 
> 赞同：2
> 
> 时间：2012-04-29T01:27:44.507
> 
> 标签：javascript, closures

您好，我正在尝试从 loadData 函数返回一个对象，但我在 FF 中得到“obj is not defined”，在 chrome 中得到“Uncaught ReferenceError”。我读到如果你声明一个没有前缀“var”的变量，它被认为是全局的““obj”的范围应该是全局的，应该从 json 响应中返回数据。我不知道哪里出错了我是 Javascript 新手。感谢所有帮助。

```
function loadData()
{.....
  xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      personInfo=xmlhttp.responseText;
      obj = JSON.parse(personInfo);
      alert(obj[2].name);
    }
  };

  return obj;//"obj is not defined" in FF and "Uncaught ReferenceError" in chrome      

}

<h2>AJAX</h2>
<button type="button" onclick="loadData()">Request data</button>
<div id="myDiv"></div>

.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T01:30:00.357

那是因为`onreadystatechange`函数是异步的。您需要执行以下操作：

```
function loadData(callback) {
  xmlhttp.onreadystatechange=function() {
    ...
    callback(data);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:31:53.117

您正在从 loadData 函数返回 obj ，并且当该函数返回时 obj 尚未定义。您需要在回调函数本身中对 obj 做一些事情——也许将它传递给第三个函数，该函数实际处理数据并对数据做一些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T01:33:40.713

AJAX 调用是异步的。代码不会等待响应。*它在等待*响应的同时继续执行下一个代码。这意味着`return obj`它在实际填充数据之前执行。

你应该做的是交出一个“回调”，基本上是一个在收到数据时执行的函数：

```
function loadData(callback){
    ...
    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){

            //execute callback, passing it the parsed JSON
            callback(JSON.parse(xmlhttp.responseText));
        }
    } 
    //execute send here
}

//call loadData, passing it a callback function
//this function will be executed when response is received
//and the data will be provided as "returnedData"
loadData(function(returnedData){
    //use data
    alert(returnedData[2].name);
}); 
```

# php - 我在 htaccess 中的 mod_rewrite 代码导致页面无法加载

> ID：10368980
> 
> 赞同：0
> 
> 时间：2012-04-29T01:28:47.970
> 
> 标签：php, apache, .htaccess, mod-rewrite

我有这样的可怕网址：

[http://example.com/subfolder/index.php?a=1&b=1&token=8d519decbe60db44154b1fbc8c553ac4](http://example.com/subfolder/index.php?a=1&b=1&token=8d519decbe60db44154b1fbc8c553ac4)

我试图让它看起来像这样：

[http://example.com/subfolder/menu/1/1/#/](http://example.com/subfolder/menu/1/1/#/)

但是这段代码导致页面崩溃/找不到或什么：

```
RewriteEngine on

RewriteCond %{QUERY_STRING} ^a=([0-9]+)&b=([0-9]+)&token=([A-Za-z0-9]+)
RewriteRule ^subfolder/index.php /menu/$1/$2/#? [R=301,L] 
```

我把这个`.htaccess`文件放在我的根文件夹`example.com/.htaccess`中，我需要把它放在子文件夹中吗？

我收到 404 page not found 错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:41:29.177

您不想在重写的网址中包含“子文件夹”吗？

RewriteRule ^subfolder/index.php /subfolder/menu/$1/$2/#? [R=301,L]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:52:03.807

尝试不同的方法：

```
RewriteEngine On
RewriteBase /subfolder
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9]+)/([0-9]+)/([0-9]+)/$ index.php?a=$1&b=$2&token=$3 [L,QSA] 
```

**输出：（http://example.com/subfolder/menu/1/1/#/）**

```
<?php 
print_r($_GET);
Array
(
    [a] => menu
    [b] => 1
    [token] => 1
)
?> 
```

或者`http://example.com/subfolder/menu/1/18d519decbe60db44154b1fbc8c553ac4/#/`

```
RewriteEngine On
RewriteBase /subfolder
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9]+)/([0-9]+)/([A-Za-z0-9]+)/$ index.php?a=$1&b=$2&token=$3 [L,QSA] 
```

## 更新：

```
RewriteEngine On
RewriteBase /subfolder
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9]+)/([0-9]+)/([0-9]+)/([A-Za-z0-9]+)/$ index.php?a=$2&b=$3&token=$4 [L,QSA] 
```

将匹配：`mysite.com/subfolder/menu/1/2/blah123`

并传递给`index.php?a=1&b=2&token=blah123`

## 更新 2（因为没有子文件夹 - 见评论）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/([0-9]+)/([0-9]+)/([A-Za-z0-9]+)/$ index.php?a=$3&b=$4&token=$5 [L,QSA] 
```

将匹配：`mysite.com/subfolder/menu/1/2/blah123`

并传递给`index.php?a=1&b=2&token=blah123`

**请阅读本网站：** [http ://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)

# php - 用 PHP 替换 mime_content_type

> ID：10368986
> 
> 赞同：0
> 
> 时间：2012-04-29T01:29:57.797
> 
> 标签：php, fileinfo

我目前正在审核我的脚本的代码，我发现 mime_content_type 现在已被弃用，我将它用于文件上传工具，我必须跟上最新的标准，所以我想知道Fileinfo 是，以及如何获取给定文件的 mimetype？

在上传过程中需要此 Mimetype，然后将与其他文件详细信息（例如大小、扩展名）一起存储到数据库中，如果 mimetype 和扩展名与应有的不同，它将被拒绝。

谢谢

# visual-studio-2010 - 将 Bullet 物理和 Boost 作为静态库一起编译

> ID：10368992
> 
> 赞同：0
> 
> 时间：2012-04-29T01:31:33.127
> 
> 标签：visual-studio-2010, boost, dll, static-libraries, bulletphysics

我为名为 Orbiter 的太空飞行模拟器开发插件：http: [//orbit.medphys.ucl.ac.uk/](http://orbit.medphys.ucl.ac.uk/)

它接受插件作为 dll 文件。我最近制作了一个插件，它也使用了 Bullet 物理库。它静态链接到 dll，因此子弹库本身不是 dll，而是直接编译到插件中。Bullet 使用用于发布的多线程 (/MT) 选项和用于调试的多线程调试 (/MTd) 选项进行编译

现在我想使用来自 Boost 的线程。所以我通过从 Boost Pro 安装程序中选择 2 个静态选项来安装静态 Boost 库。我能够使用这些静态库成功创建一个 Win 32 应用程序。该应用程序也使用了多线程 (/MT)。所以我知道标志上没有不匹配。

然而，当我将 Boost 添加到也有 Bullet 的 Orbiter dll 插件项目时，我收到一个链接错误：

1>----- 构建开始：项目：Bump，配置：发布 Win32 ------

1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(990,5): 警告 MSB8012: TargetPath(F:\Orbiter\Orbitersdk\samples\BumpThreaded\Release\ Bump.dll) 与链接器的 OutputFile 属性值 (F:\Orbiter\Modules\Plugin\Bump.dll) 不匹配。这可能会导致您的项目构建不正确。要更正此问题，请确保 $(OutDir)、$(TargetName) 和 $(TargetExt) 属性值与 %(Link.OutputFile) 中指定的值匹配。

1>MSVCRT.lib(ti_inst.obj) : error LNK2005: "private: __thiscall type_info::type_info(class type_info const &)" (??0type_info@@AAE@ABV0@@Z) 已经在 LIBCMT.lib(typinfo .obj)

1>MSVCRT.lib(ti_inst.obj) : error LNK2005: "private: class type_info & __thiscall type_info::operator=(class type_info const &)" (??4type_info@@AAEAAV0@ABV0@@Z) 已在 LIBCMT 中定义.lib(typinfo.obj) 1> 创建库 F:\Orbiter\Orbitersdk\samples\BumpThreaded\Release\Bump.lib 和对象 F:\Orbiter\Orbitersdk\samples\BumpThreaded\Release\Bump.exp

1>LINK : 警告 LNK4098: defaultlib 'MSVCRT' 与其他库的使用冲突；使用 /NODEFAULTLIB:library 1>......\Modules\Plugin\Bump.dll：致命错误 LNK1169：找到一个或多个多重定义符号

========== 构建：0 成功，1 失败，3 最新，0 跳过 ==========

从我读到的其他问题来看，这可能是由于在应用程序中使用的 2 个库的标志不匹配。但这里不是这样。Bullet 和 Boost 都使用 /MT 编译。

boost 也适用于普通的 win 32 应用程序，那么为什么在静态链接它以输出 dll 时出现问题？

我使用 Visual Studio 2010 Express 并拥有 Windows 7 64 位系统。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:01:36.853

如果您只使用 Boost 和 Bullet，而且它们都肯定`/MT`是用`/MD`.

# php - php在使用JSON加载时将数据加载到fancybox

> ID：10368993
> 
> 赞同：0
> 
> 时间：2012-04-29T01:31:44.707
> 
> 标签：php, jquery, json, fancybox

我有一个带有fancybox 的php 页面。我在 php 中有一个页面，其中 jquery 显示了一个fancybox。当显示幻想框时，我需要从数据库加载数据。点击事件代码：

```
$("a#addActivitat").click(function(){
            var retorn;
            $.getJSON('aplicacio/agendaLoadData.php?action=loadIdAct',function(data){
                retorn = data;
            });
            alert(retorn);  
        }); 
```

警报未定义

花式盒子的代码：

```
<div id="agendaAddAct">
        <form method="post" action="" target="workFrame" id="actionform">
            <p>
                <input type="text" name="idRel" id="idRel"/>
            </p>
            <input type="button" value="Afegir activitat" class="btnsubmit" id="afegirActivitat"/>
        </form>
    </div> 
```

我需要将 php 调用返回的值加载到 idRel 输入中。以及使用 JSON 调用的议程加载数据的代码：

```
$var = new facanabbdd();
echo json_encode($var->getMaxValueRel()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:57:10.367

你没有`$.getJSON`正确使用。请记住，Ajax 请求是异步的（Ajax 确实意味着异步 JavaScript 和 XML）。因此，您的`retorn`变量将不会填充从 Ajax 调用获得的值。

您应该做的是在收到数据时更新您的 DOM（即在您的回调函数中）

```
$("a#addActivitat").click(function(){
    $.getJSON('aplicacio/agendaLoadData.php?action=loadIdAct', function(data){
        $('#idRel').val(data.value);
    });
}); 
```

前提是您返回的 JSON 文档就像

```
{
    "value": 42
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:57:13.787

如果您将警报放在成功处理程序中，如果数据从您的服务器返回，它将提醒数据。试试这样：

```
$("a#addActivitat").click(function(){
    $.getJSON('aplicacio/agendaLoadData.php?action=loadIdAct',function(data){
         $("#idRel").val(data);
         var retorn = $.parseJSON( data );
         alert(retorn);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:05:22.967

我发现了错误：

php页面代码：

```
$("a#addActivitat").click(function(){
            $.getJSON('aplicacio/agendaLoadData.php?action=loadIdAct',
                       function(data){
                $('#idRel').val(data);
            });     
        }); 
```

以及agendaLoadData的代码

```
echo json_decode("43"); 
```

错误是我调用了函数 json_encode，我需要调用函数 json_decode。

# javascript - Javascript - JSON 字符串替换

> ID：10368995
> 
> 赞同：0
> 
> 时间：2012-04-29T01:31:56.870
> 
> 标签：javascript, string, json

在其他堆栈用户的帮助下，我目前有这个：

> [http://jsfiddle.net/XRCvE/](http://jsfiddle.net/XRCvE/)

我想知道我需要做什么来编辑代码以更改 JSON 数据 {location.city} 以在第一个逗号后删除，因此：

> 美国马萨诸塞州曼斯菲尔德

变成

> 曼斯菲尔德

抱歉，我是一个初学者，一个工作的 jsfiddle 将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:51:05.537

[JSFiddle](http://jsfiddle.net/ryanwfiorini/YzJ4t/)

只需对 the 进行拆分`,`并获取第一项：

```
events[0].location.city = events[0].location.city.split(",")[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T01:40:39.180

这是一种方法：

```
if (events[0].location.city.indexOf(',') > 0) {
  events[0].location.city =
      events[0].location.city.substr(0, events[0].location.city.indexOf(','));
} 
```

我已经用一个工作示例更新了 JSFiddle：http: [//jsfiddle.net/XRCvE/1/](http://jsfiddle.net/XRCvE/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T01:47:50.480

```
if(events[0].location.city.indexOf(',') > 0) {
    events[0].location.city = events[0].location.city.split(",")[0];
} 
```

[http://jsfiddle.net/XRCvE/4/](http://jsfiddle.net/XRCvE/4/)

# python - __iter__ 中的类型错误

> ID：10368996
> 
> 赞同：2
> 
> 时间：2012-04-29T01:32:03.167
> 
> 标签：python

```
def __init__(self, maximum, start=0, step=1):
        """Sets the maximum, start, and step"""
        try:
            self.maximum = math.ceil(maximum)
            self.start = math.ceil(start)
            self.step = math.ceil(step)
        except TypeError:
            return "Error, attributes must be of type int or float"
    def __iter__(self):
        """Iterates over the range"""
        return iter(range(self.start, self.maximum, self.step)) 
```

是相关代码。每当我打电话时，说：

```
j = crange.ChangeableRange(4)
list(j) 
```

我得到错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "crange.py", line 16, in __iter__
    return iter(range(self.start, self.maximum, self.step))
TypeError: 'str' object cannot be interpreted as an integer 
```

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:34:58.383

*range*函数需要整数作为参数。看起来您已经为*start*、*maximum*或*step*创建了一个字符串，例如`self.maximum = int(math.ceil(maximum))`.

另请注意，在 Python 2 中，*math.ceil*函数返回一个浮点值，因此需要将其转换为整数。

在 Python 3 中，您的代码可以正常工作：

```
>>> import math
>>> class ChangeableRange:
        def __init__(self, maximum, start=0, step=1):
            """Sets the maximum, start, and step"""
            try:
                self.maximum = math.ceil(maximum)
                self.start = math.ceil(start)
                self.step = math.ceil(step)
            except TypeError:
                return "Error, attributes must be of type int or float"
        def __iter__(self):
            """Iterates over the range"""
            return iter(range(self.start, self.maximum, self.step))

>>> j = ChangeableRange(4)
>>> print(list(j)) 
[0, 1, 2, 3] 
```

# terminal - mcrypt 的终端版本

> ID：10368997
> 
> 赞同：0
> 
> 时间：2012-04-29T01:32:18.107
> 
> 标签：terminal, mcrypt

我正在尝试使用 mcrypt 的终端版本，但我没有成功...

我写道： `mcrypt -a xtea -m ecb -k "qawsedrftgyhujik" test > testresult`

在哪里：

*   xtea 是算法
*   ecb 是模式
*   qawsedrftgyhujik 是 128 位密钥
*   测试是源文件
*   testresult 是目标文件

程序冻结，我必须用 ctl+c 中止。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:55:18.270

您必须输入文本并在新行上按 ctrl+d 以终止输入，然后它应该可以工作

编辑：问题是`-k`需要多个参数（man mcrypt）：

```
mcrypt [ -dLFubhvrzp ] [-a algorithm] [-c config_file] [-m mode] [-s keysize] [-o keymode] [-k key1 key2 ...]  [-f keyfile] [ filename ...  ] 
```

所以如果你想从文件中读取`test`，你可以使用以下之一：

```
mcrypt -a xtea  -k "qawsedrftgyhujik" -m ecb test > testresult        # option after -k
cat test | mcrypt -a xtea -m ecb -k "qawsedrftgyhujik" > testresult   # pipe
mcrypt -a xtea -m ecb -k "qawsedrftgyhujik" < test > testresult       # stdin redirect 
```