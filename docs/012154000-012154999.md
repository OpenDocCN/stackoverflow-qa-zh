# StackOverflow 问答 12154000-12154999

# static-libraries - 如何保护 .SO 文件不被复制/盗版？

> ID：12154002
> 
> 赞同：0
> 
> 时间：2012-08-28T06:41:58.673
> 
> 标签：static-libraries, copy-protection

我已经为 android 设备开发了一种算法，并希望将我的算法的 .SO 文件发布给其他开发公司。如何保护 .SO 文件不被复制/盗版？例如，在其上添加使用时间限制。有什么软件可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:59:05.123

你为什么不使用静态库呢？它将被链接到没有单独文件的最终二进制文件中

# java - 同步方法不是线程安全的

> ID：12154003
> 
> 赞同：0
> 
> 时间：2012-08-28T06:42:00.663
> 
> 标签：java, multithreading, synchronization

有人可以告诉我为什么下面的代码不是线程安全的吗？我得到的输出是 0 或 45 或 90。共享资源计数器有一个同步方法，所以我一直期望 90 作为输出。我在这里错过了什么吗？请指教。请让我知道如何使此代码线程安全。

```
class Counter{

    long count = 0;

    public synchronized void add(long value){
      this.count += value;
    }
 }
 class CounterThread extends Thread{

    protected Counter counter = null;

    public CounterThread(Counter counter){
       this.counter = counter;
    }

    public void run() {
    for(int i=0; i<10; i++){
          counter.add(i);
       }
    }
 }
 public class Example {

   public static void main(String[] args){

     Counter counter = new Counter();
     Thread  threadA = new CounterThread(counter);
     Thread  threadB = new CounterThread(counter);

     threadA.start();
     threadB.start();

     System.out.println(counter.count);
   }
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T07:02:40.380

等待线程完成。添加

```
threadA.join();
threadB.join(); 
```

在打印结果之前。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T06:59:01.610

本质上，您是在两个线程完成执行之前读取值。

您可以使用[连接](http://javahowto.blogspot.in/2007/05/when-to-join-threads.html)来等待线程完成。

也尝试使用[AtomicLong](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicLong.html)的`addAndGet`方法而不是同步的 add 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T06:49:38.307

在线程停止之前，您无需等待 println。因此，当 for 循环仍在进行中时，您可以打印出计数器的值。它不必对线程安全做任何事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T06:51:57.867

`Counter`访问是线程安全的，但`System.out.println(counter.count);`可以在其他线程完成工作之前发生。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T06:58:05.020

您的代码是线程安全的，但更好的方法是摆脱同步方法并使用[AtomicLong](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicLong.html) 并使用 getAndAdd(long) 方法

```
public final long getAndAdd(long delta)
>Atomically add the given value to current value. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T06:54:15.800

你有3个线程在那里运行。分配给变量`threadA`的一个，分配给`threadB`主线程的一个。

只要`main`方法运行，主线程就会运行。其他 2 个启动并与主线程同时运行。但是，主线程不会阻塞等待其他 2 个完成，因此它会在有机会执行时打印结果。

# mysql - MYSQL在同一张表中的连接操作

> ID：12154006
> 
> 赞同：1
> 
> 时间：2012-08-28T06:42:11.407
> 
> 标签：mysql

```
SELECT DISTINCT mp.Group_Name FROM measurement_test mt, measurement_point mp, measurement_values mv 
                        WHERE mt.Test_ID = mv.Test_ID AND mv.Point_ID = mp.Point_ID AND mt.ID_Number = 'WR20120603_05' 

SELECT DISTINCT mp.Group_Name FROM measurement_test mt, measurement_point mp, measurement_values mv 
                        WHERE mt.Test_ID = mv.Test_ID AND mv.Point_ID = mp.Point_ID AND mt.ID_Number = 'WR20120603_04' 
```

以上是我在网页中使用的两个查询。实际上我只想获得两个查询之间结果的共同 group_name 值，是否有任何其他可能的方式来实现这个特定场景，或者简单化上述两个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:45:28.473

```
SELECT mp.Group_Name 
FROM measurement_test mt
inner join measurement_values mv on mt.Test_ID = mv.Test_ID
inner join measurement_point mp on mv.Point_ID = mp.Point_ID
WHERE mt.ID_Number in ('WR20120603_04', 'WR20120603_05')
group by mp.Group_Name
having count(distinct mt.ID_Number) = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:47:09.247

您可以使用`IN`子句简化它。

```
SELECT DISTINCT mp.Group_Name 
FROM    measurement_test mt
            INNER JOIN measurement_point mp
                ON mt.Test_ID = mp.Test_ID
            INNER JOIN measurement_values mv 
                ON mv.Point_ID = mp.Point_ID
WHERE   mt.ID_Number IN ('WR20120603_05', 'WR20120603_04')
GROUP BY    mp.Group_Name 
HAVING      COUNT(mp.Group_Name) = 2 
```

# eclipse - 具有代码完成功能的 Eclipse Javascript 编辑器

> ID：12154008
> 
> 赞同：0
> 
> 时间：2012-08-28T06:42:23.940
> 
> 标签：eclipse, cordova, eclipse-plugin

我正在寻找一个允许我完成代码的插件是我的 phonegap .html 文件并突出显示 javascript 标签。我已经安装了 JSDT 插件，但似乎无法突出显示/自动完成代码。它仅突出显示 HTML，但似乎不适用于`<script>`标签内的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:06:54.017

您可以在 eclipse 中查看

帮助 -> 安装软件 使用... 选择您的 eclipse 版本（例如 juno） 在下面的选择框中滚动到条目“Web、XML、Java...”并展开它。选择 Eclipse Java Web Developer Tools Eclipse Web Developer Tools Eclipse XML Developer Editors and Tools JavaScript Development Tools Web Page Editor

然后下一步安装它们。

现在您应该拥有 HTML、JS 语法高亮和代码完成功能。

# php - 将变量从视图传递到控制器

> ID：12154010
> 
> 赞同：1
> 
> 时间：2012-08-28T06:42:32.893
> 
> 标签：php, javascript, codeigniter

我将尽力解释这一点。我正在从我的控制器返回一组结果。我希望将所选行的主键发送到另一个控制器，当用户单击“添加员工”按钮时，该控制器将管理将记录插入数据库。我的主键是`MOVIE_ID`. `MOVIE_ID` `{12341, 31351}`它目前正在返回一个像这样的两个数组。我的问题是：

1.  如何将每个电影 ID 与相应行的按钮唯一关联？

2.  我可以通过属性将变量传递给控制器`action=""`​​，我需要JS吗？

![在此处输入图像描述](../Images/017366db814b86380f81b59c19766edf.png)

```
 <fieldset id= "results">

                <?php if (isset($results ) And count($results)) : ?>
                    <table id="box-table-a" summary="Employee Sheet">
    <thead>
        <tr>
            <th scope="col">Employee</th>
            <th scope="col">Salary</th>
            <th scope="col">Bonus</th>
            <th scope="col">Supervisor</th>
            <th scope="col">Action</th>
        </tr>

            <?php foreach ($results as $result) : ?>
                            <tr>
//Primary key <?php echo $result['MOVIE_ID!'];?>
<td><span class="Employee_name"><?php echo $result['Employee']; ?> </span></td>         
<td><span class="Salary"><?php echo $result['Salary']; ?> </span> </td>
<td><span class="Bonus"><?php echo $result['Bonus']; ?> </span> </td>
<td><span class="Supervisor_name"><?php echo $result['Supervisor']; ?> </span></td>
<td><input type="submit" value="add employee" > </td>

    </tr>

    <?php endforeach; ?>
        <?php endif; ?>
    </thead>
        <tbody>
    </fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:47:39.947

一个技巧是通过提交按钮传递 id，如下所示：

```
<input name="submit[12341]" type="submit" value="add employee" /> 
```

单击时，它将发送`submit[12341]=add+employee`POST 数据（假设您已将所有内容包装在`<form>`标签内）。不会提交其他按钮，只会提交单击的按钮。

在 PHP 中，您可以像这样检索 id：

```
$id = key($_POST['submit']); 
```

# java - 使用小程序加载 .DLL 并在客户端上使用它

> ID：12154013
> 
> 赞同：3
> 
> 时间：2012-08-28T06:42:39.380
> 
> 标签：java, dll, applet, java-native-interface, jnlp

我可以`.dll`在小程序中从服务器加载到客户端，然后在客户端调用加载的 .dll 方法（使用 JNI）吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T07:33:41.133

当然。小程序需要由开发人员进行数字签名，并得到最终用户的信任（他们在出现提示时单击“确定”）。将本机放在 Jar 的根目录中，并使用`archive`属性中的引用将其添加到小程序的运行时类路径中。

使用使用属性将本机部署到小程序的传统方法的`archive`缺点是每个客户端都会获得 Windows、OS X 和 *nix 的本机。当地人的数量是他们实际需要的 3 倍。

最近（Java 插件 2，在 Sun 的 1.6.0_10 版中引入）功能是使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)启动嵌入式小程序，然后允许我们为用户划分本地下载。每个操作系统只会获得它需要的本地人。

* * *

> ..如何声明小程序类路径？

它在[`resources`部分](http://docs.oracle.com/javase/8/docs/technotes/guides/javaws/developersguide/syntax.html#resources)中指定。

来自文档的 EG。

```
<resources os="SunOS" arch="sparc">
  <nativelib href="lib/solaris/corelibs.jar"/>
</resources> 
```

任何没有`os`或`arch`属性的资源部分都将由所有 JWS 客户端下载，其余部分仅由匹配的那些客户端下载。

# ruby-on-rails - 路由器如何在 ROR 3.0 中工作？

> ID：12154016
> 
> 赞同：0
> 
> 时间：2012-08-28T06:42:46.870
> 
> 标签：ruby-on-rails

嗨，我是 Rails 新手，我开始研究一个现有项目。我想将新页面集成到网站。我在文件夹 Sites（页面名称 xxxx.html.erb）下创建了新页面，其中包含名为 sites.and 的控制器的控制器，并在控制器中创建了方法

```
def xxxx

end 
```

当我尝试访问该页面时，显示以下错误

找不到 SitesController 的操作“显示”

我认为这是 routes.rb 文件的问题，请帮助我我尝试添加此匹配“xxxx”=>“Sites#xxxx”但不工作.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:52:20.117

1.  你需要创建一个控制器，命名为 SitesController，在这个控制器中你可以添加 xxxx 动作。

2\. 然后你需要在 config/routes.rb 文件中添加路由。供您参考[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:56:24.970

抱歉，我在站点路由文件中使用了大写“ **S** ”并在链接中使用了大写“ **s** ”，我得到了答案`<%= link_to "Profile", :controller => "**Sites**", :action => "xxxxx"%>`

# android - 我如何在 Android 中将此 JSON HTTP 请求更改为异步？

> ID：12154023
> 
> 赞同：0
> 
> 时间：2012-08-28T06:43:03.687
> 
> 标签：android, mysql, eclipse, login, android-asynctask

好的，所以我正在创建一个应用程序，它需要在应用程序的开头有一个登录屏幕。我一直在使用常规的 HTTP 请求，直到我发现您必须使用异步来请求 http 访问，因为在 Main 中不能有多个请求。那么我将如何以及在哪里更改我的代码以满足这些要求我有我的 jasonparser.parser，一个用于连接到 mysql lite 的 databasehandler.java 和 userfunctions.java 来处理所有功能。我知道我必须将 http 请求部分移动到异步任务中，但我对如何处理或如何更改它有点困惑。我是否只需要更改导入 http 客户端的 JSON 解析器，或者我什至如何开始在我的代码中实现 ASYNC？

这是我上面列出的以下java文件源代码，有人可以给我一个例子或帮助我，我是应用程序开发的新手。因此，请作为开发人员对开发人员提供帮助，不要粗鲁。

jsonparser.java

```
 package library;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

数据库处理程序.java

```
package library;

import java.util.HashMap;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "a8385957_android";

    // Login table name
    private static final String TABLE_LOGIN = "login";

    // Login Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_EMAIL = "email";
    private static final String KEY_UID = "uid";
    private static final String KEY_CREATED_AT = "created_at";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
                + KEY_ID + " INTEGER PRIMARY KEY,"
                + KEY_NAME + " TEXT,"
                + KEY_EMAIL + " TEXT UNIQUE,"
                + KEY_UID + " TEXT,"
                + KEY_CREATED_AT + " TEXT" + ")";
        db.execSQL(CREATE_LOGIN_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);

        // Create tables again
        onCreate(db);
    }

    /**
     * Storing user details in database
     * */
    public void addUser(String name, String email, String uid, String created_at) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, name); // Name
        values.put(KEY_EMAIL, email); // Email
        values.put(KEY_UID, uid); // Email
        values.put(KEY_CREATED_AT, created_at); // Created At

        // Inserting Row
        db.insert(TABLE_LOGIN, null, values);
        db.close(); // Closing database connection
    }

    /**
     * Getting user data from database
     * */
    public HashMap<String, String> getUserDetails(){
        HashMap<String,String> user = new HashMap<String,String>();
        String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        // Move to first row
        cursor.moveToFirst();
        if(cursor.getCount() > 0){
            user.put("name", cursor.getString(1));
            user.put("email", cursor.getString(2));
            user.put("uid", cursor.getString(3));
            user.put("created_at", cursor.getString(4));
        }
        cursor.close();
        db.close();
        // return user
        return user;
    }

    /**
     * Getting user login status
     * return true if rows are there in table
     * */
    public int getRowCount() {
        String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        int rowCount = cursor.getCount();
        db.close();
        cursor.close();

        // return row count
        return rowCount;
    }

    /**
     * Re crate database
     * Delete all tables and create them again
     * */
    public void resetTables(){
        SQLiteDatabase db = this.getWritableDatabase();
        // Delete All Rows
        db.delete(TABLE_LOGIN, null, null);
        db.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:46:44.727

如果您的问题是关于线程的，这是线程的一个示例：

```
protected void btnLogin_onClick() {
        final Runnable r = new Runnable() {
            public void run() {
                threadLogin();
            }
        };

        performOnBackgroundThread(r);
    }

protected void threadLogin() {
// Do what you whant to do
}

public static Thread performOnBackgroundThread(final Runnable runnable) {
    final Thread t = new Thread() {
        @Override
        public void run() {
            try {
                runnable.run();
            } finally {

            }
        }
    };
    t.start();
    return t;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:47:40.717

在后台调用你想要的任何东西

```
task dat=new task();

    dat.execute(); 
```

从 main 调用异步任务

```
 class task extends AsyncTask<String, integer, Boolean>{

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub

    }

    @Override
    protected Boolean doInBackground(String... params) {

        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

    }

} 
```

# build-automation - 用于构建多个项目的多个设置 gradle 文件

> ID：12154031
> 
> 赞同：50
> 
> 时间：2012-08-28T06:43:48.307
> 
> 标签：build-automation, gradle, multi-project

我有以下项目结构

```
-->Starnderd Location
        -->Project1 
           -->settings.gradle 
           -->build.gradle
           -->Subproject11
              -->build.gradle
           -->Subproject12
              -->build.gradle
        -->Project2 
           -->settings.gradle 
           -->build.gradle
           -->Subproject21
              -->build.gradle
           -->Subproject22
              -->build.gradle
        -->build.gradle
        -->settings.gradle 
```

上述项目结构的想法是我们有多个项目，其中包含子项目，每个项目都可以依赖于其他项目。项目内的子项目也可以依赖于同一项目内的其他子项目。项目将在根目录的 settings.gradle 中指定。每个项目中的 settings.gradle 也会说明该特定项目的子项目是什么。

我在根目录中的 settings.gradle 看起来像

```
include 'Project1',
         'Project2' 
```

和 Project1 settings.gradle 看起来像

```
include 'SubProject11'
         'SubProject12' 
```

其他依赖顺序在相应的 build.gradle 文件中定义如果我 rand gradle clean build install 在根位置（标准位置）内，它似乎没有使用项目级别 settings.gradle 文件中的配置。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-16T02:57:47.973

我能够以相对干净的方式解决这个问题。改进当然是受欢迎的！

尽管 Gradle 不支持`settings.gradle`开箱即用的多个脚本，但可以创建单独的子项目，每个子项目都有自己的`settings.gradle`文件。假设您有依赖于多项目 B 的多项目 A，每个项目都有自己的子项目。您的目录结构可能如下所示：

```
A
- settings.gradle
- foo
- faz
\ B
  - settings.gradle
  - bar
  - bap 
```

开箱即用，Gradle 期望`A/settings.gradle`看起来像这样：

```
include ':foo', ':faz', 'B:bar', 'B:bap' 
```

这样做的问题是，每次 B 添加新项目时，`A/settings.gradle`即使新项目仅由 B 使用，也必须更改。为避免这种情况，您可以尝试使用`apply` `B/settings.gradle`in`A/settings.gradle`而不是添加冗余声明：

```
apply from: 'B/settings.gradle'
include ':foo', ':faz' 
```

如果你尝试这个，你会发现 Gradle 失败了，因为它生成了错误`projectDir`的`:bar`and `:bap`。它错误地假设 B 的包含是相对于从该项目根调用 Gradle 时`settingsDir`发生的。`A/`要解决此问题，您可以添加另一个脚本，例如`B/settings-parent.gradle`（确切名称不重要）：

```
apply from: 'settings.gradle'

def updateProjectPaths(Set<ProjectDescriptor> projects) {
    projects.each { ProjectDescriptor project ->
        String relativeProjectPath = project.projectDir.path.replace(settingsDir.path, "")
        project.projectDir = new File("B/$relativeProjectPath")
        // Recursively update paths for all children
        updateProjectPaths(project.children)
    }
}

updateProjectPaths(rootProject.children) 
```

这会剥离`settingsDir.path`路径并在路径前加上`B/`. `settings[-parent].gradle`通过让每一层将自身添加到路径中，这可以扩展到多层文件。现在，您将将此脚本应用于`A/settings.gradle`：

```
apply from: 'B/settings-parent.gradle'
include ':foo', ':faz' 
```

使用此方案，新的 B 项目不会不必要地中断`A/settings.gradle`，并且所有项目都可以在不明确引用 B 子项目的情况下使用。例如，如果`':foo'`想使用`'B:bap'`，它可以简单地声明：

```
compile project(':bap') 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-03-06T06:20:58.357

如果您使用的是 Gradle 3.x，请尝试 includeBuild()： [https ://docs.gradle.org/current/userguide/composite_builds.html](https://docs.gradle.org/current/userguide/composite_builds.html)

```
// settings.gradle
includeBuild './Project1'
includeBuild './Project2' 
```

如果您使用的是 Gradle 2.x，我已经为此功能编写了一个演示。希望对你有所帮助： [https ://github.com/xujiaao/gradle-composite-build-demo](https://github.com/xujiaao/gradle-composite-build-demo)

```
// settings.gradle
def includeProject(String path, Closure closure) {
    ...

    apply {
        from ...
        to new SettingsProxy(...)
    }
}

class SettingsProxy {
    ...

    public getRootProject() { ... }

    public void include(String... paths) {
        for (String path : paths) {
            if (!mProjectSpec.accept(path)) {
                continue
            }

            def descendantPath = generateDescendantPath(path)
            mSettings.include(descendantPath)

            def descendantProjectDir = new File(mProject.projectDir, path.replace(':', '/'))
            mSettings.project(descendantPath).projectDir = descendantProjectDir
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-28T12:28:36.247

Currently, Gradle only supports a single `settings.gradle` files per build. This may change in the future.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-06-15T17:09:00.850

由于这个话题现在经常跨越我的日常工作并且它的改进（[GRADLE-803](https://issues.gradle.org/browse/GRADLE-803)）仍然开放，我也想分享我的方法：

乍一看，它看起来与詹姆斯沃尔德的[答案](https://stackoverflow.com/a/29664571/3832347)相似，但有一个不同之处。您不需要在子项目中以某种方式拆分设置文件。如果您可以接受的话，有一种干净的方法可以在超级项目中完成所有工作。通常你的小子项目不应该关心周围的超级项目。它们包括它们的子依赖项，仅此而已。模块目录的命名方式也应该是无关紧要的，在 Wald 的方法中，模块本身需要在这里知道它的目录名称（'B'）：

> `project.projectDir = new File("B/$relativeProjectPath")`

相反，通常，超级项目非常了解它的子项目和目录，因为它们可能是例如 git 子模块，它们具有明确定义的修复名称，从超级项目的角度来看，这些名称可以安全地引用。

这是我的设置（使用 Gradle 2.4）：

```
Super Project
├── build.gradle
├── settings.gradle (include 'A' include 'B')
├── <Subproject A>
    ├── build.gradle
    ├── settings.gradle (include 'subA')
    ├── <Subsubproject subA>
        ├── build.gradle
├── <Subproject B>
    ├── build.gradle
    ├── settings.gradle (include 'subB')
    ├── <Subsubproject subB>
        ├── build.gradle 
```

在超级项目 settings.gradle 中，您现在可以编写以下代码：

```
include 'A'
include 'B'
apply from: 'A/settings.gradle'
apply from: 'B/settings.gradle'
project(':subA').projectDir = new File(rootDir, 'A/subA')
project(':subB').projectDir = new File(rootDir, 'B/subB') 
```

它看起来仍然相当冗长（并且仍然没有添加真正的分层行为），但是在您通常需要了解有关您包含的模块的所有内容的超级项目中付出了额外的努力。

剩下的就很简单了。

如果你想在实践中看到我的方法，请阅读这篇[博文的](https://comsysto.com/blog-post/cross-language-benchmarking-part-3)第 5 节。我明确要求模块之间的这种独立性，或者只需查看我的[跨语言基准测试](https://github.com/bensteinert/crolabefra-setup-poc)的 github 项目。但请注意，您需要一个运行的本地编译器工具链，如 gcc 或 Clang 来执行它；）

希望这可以帮助！干杯本

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-28T13:45:33.270

我也研究过这个，你可以做到，但它很丑！这对我们完全有效的原因是绝大多数时间，我们只想从最顶层构建。

如果它对您有帮助，您需要做的是让最顶层的 settings.gradle 文件直接正确引用每个项目子项目。先让这个工作。

然后，如果 Project1 和 Project2（等等）能够相互独立构建，您可以为该项目创建一个本地 settings.gradle 文件。因为，正如我上面所说，这不是我们通常做的，我们将此文件称为 settings.project1。如果我们想使用这个文件，我们将它复制到 settings.gradle。我知道丑。

但实际上它变得更糟:) 一旦你把这个 settings.gradle 文件放在适当的位置，你从 Project1 构建将不再看到你可能需要定义的东西的顶级 build.gradle 文件。要调用它，您需要将这样的内容添加到每个项目级 build.gradle 文件中：

```
if (project.hasProperty('local')) {
    apply from: '../build.gradle'
} 
```

然后您可以将构建运行为： gradle -Plocal build

丑陋，但如果你需要它，它至少可以工作。并且为了全面披露，几周前已经将其落实到位，没有一个开发人员需要和/或使用它。如果继续不使用，可能会在另外几周内将其删除。

请记住，如果您从子项目本身构建，则只会构建该子项目（以及任何依赖项目）（尽管所有 gradle 脚本都将被编译/评估）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-28T16:52:16.883

在早期答案的基础上，这就是我得出的结论。

```
interface Includer {
  def include(String... args)
}

def applyFrom(String folder) {
  apply from: folder + '/settings.gradle'
  def includer = [
    include: { args ->
          args.each {
            project(it.startsWith(':') ? it : ':' + it).projectDir =
                new File(rootDir, folder + "/" + (it.startsWith(':') ? it.substring(1) : it).replace(':', '/'))
          }
    }] as Includer

  apply from: folder + '/settings.gradle', to: includer
}

applyFrom('A')
applyFrom('B') 
```

优点是没有重复。

# objective-c - 如何在 RestKit 中发出同步请求？

> ID：12154035
> 
> 赞同：1
> 
> 时间：2012-08-28T06:44:03.813
> 
> 标签：objective-c, ios, restkit

如何使用[RestKit](https://github.com/RestKit)发出同步请求？

我之前用过这种方式（SBJSON）：

```
UIDevice *myDevice = [UIDevice currentDevice];

    NSString *deviceUDID = [myDevice uniqueIdentifier];

    double v = [[[UIDevice currentDevice] systemVersion]doubleValue]; 
    NSString *version=[NSString stringWithFormat:@"%@ %.1f",deviceType,v];
    NSString *encodedParam1 =[version stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSString *requestString = [NSString stringWithFormat:@"method=views.get&view_name=client_list",nil];

    NSData *requestData = [NSData dataWithBytes: [requestString UTF8String] length: [requestString length]];

    NSString *urlString = [NSString stringWithFormat:@"http://localhost/index.php?oper=StoreDeviceId&device_id=%@&device_version=%@",deviceUDID,encodedParam1];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:urlString]];

    [request setHTTPMethod: @"POST"];

    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    [request setHTTPBody: requestData];

    //Data returned by WebService

    NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: nil ];

    [request release];

    NSString *returnString = [[NSString alloc] initWithData:returnData encoding: NSUTF8StringEncoding];

    NSDictionary *dict1 = [returnString JSONValue]; 
```

同样的操作如何使用 restkit 框架来处理。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:57:30.607

这是一个使用 RKClient 同步发布的示例

```
//Configure RKLog
RKLogConfigureByName("RestKit/Network", RKLogLevelTrace);

//Set Client
RKClient *client = [RKClient clientWithBaseURLString:@"some_base_url"];

//Params to be send
NSDictionary *queryParameters = [NSDictionary dictionaryWithObjectsAndKeys:@"1",@"first_value",@"2",@"second_value",nil];

//Prepare the request and send it
RKRequest *request = [client post:@"path" params:queryParameters delegate:nil];
RKResponse *response = [request sendSynchronously];

//Process the response
NSString *stringResponse = [[NSString alloc] initWithData:[response body] encoding: NSUTF8StringEncoding];
NSDictionary *dict1 = [stringResponse JSONValue]; 
```

但我建议使用块来代替异步调用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:40:54.110

要使用 RestKit 发出同步请求，请在正常设置实例后使用`RKRequest`'方法。`-sendSynchronously``RKRequest`

# java - 任何使用 SocketChannel 客户端代码的 java 库？

> ID：12154038
> 
> 赞同：0
> 
> 时间：2012-08-28T06:44:08.627
> 
> 标签：java, socketchannel

我已经查看了许多开源 java 网络库（jdbc 驱动程序、apache commons net 等），但我还没有找到一个库，它可以将 SocketChannel 用于简单用例（mysql 的 jdbc 连接器的 V3 使用 socketchannel）但较新的版本使用 jn.Socket)。

我只对客户端代码库感兴趣。（连接，而不是听的库）。

仅供参考，我正在为 java 套接字（仅限客户端）实现一个抽象层，我需要一些用例来使 SocketChannel 工作有价值。到目前为止，我所看到的任何（客户端）库似乎都从 SocketChannels 转向基于 Java 1.0 Socket 的实现，可能是因为它们都对使用 SSL 感兴趣（不确定）。

所以，真正的问题是，我应该费心支持 SocketChannel & co 吗？（对于客户端库，因为平台不支持传入连接......但是。）

同样，我也对 DatagramChannel 感兴趣。（同样的问题，我应该费心支持这门课吗？）

有什么想法我应该在哪里寻找吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:56:05.083

当你认为你将拥有数千个连接时，你会使用 NIO，你想节省线程，你不介意增加相当多的复杂性，并且你认为会有好处。大多数时候，这些事情中的一个或多个是不正确的，所以你不知道。我怀疑我是否会将它用于新代码，更像是一种改造。例如，请参阅 Netty、Tomcat、Mina，... 有一个论点说 select() 是为进程设计的，现在我们有了你并不真正需要的线程。

# http - Scala 海量 URL 下载

> ID：12154040
> 
> 赞同：3
> 
> 时间：2012-08-28T06:44:19.017
> 
> 标签：http, scala, concurrency

我最近对学习 Scala 产生了兴趣（目前主要通过 Project Euler 工作），并且我决定编写一个简单的程序：一个简单的并发下载器。我很难找到一个好的方法。

我很了解 Python，而且我喜欢 gevent 库的工作方式。我想做的是[在这里](http://www.youtube.com/watch?v=UcKqyn-gUbY "事件示例")用 gevent 解决。有没有一种简单的方法可以在 Scala 中做这样的事情，还是我完全走错了路？我看过 Dispatch 库，但似乎难以理解。我应该使用演员吗？

任何帮助或指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:21:28.413

好的，我确实同意[Dispatch](http://dispatch.databinder.net/Dispatch.html)文档目前有点粗糙和小，但将来可能会改变（许多优秀的 Scala 库就是这种情况）。

但是根据您的需要应用 Dispatch 的结果是惊人的：

```
import dispatch._
(1 to 100).map{ i => 
   Http(url("http://bash.org/?" + i) OK as.String) 
}.map{ f => 
  try {Some(f.apply)} catch {case e => println(e.getMessage); None}
}.seq.flatten 
```

这将使您同时获得来自 的前 100 个报价的文件`bash.org`。

# java - Refcursor 值无效/类型长度大于最大值/违反协议

> ID：12154044
> 
> 赞同：0
> 
> 时间：2012-08-28T06:44:47.070
> 
> 标签：java, sql, oracle

尝试从 SQL Workbench 执行查询时，我随机收到以下错误

```
 Refcursor value is invalid  
   Bigger type length than Maximum  
   Protocol violation 
```

以及当我尝试从我的 java 代码运行查询时

```
 java.sql.SQLException: Refcursor value is invalid  
    java.sql.SQLException: Bigger type length than Maximum  
    java.sql.SQLException: Protocol violation 
```

在正常工作之前，上述错误开始突然发生。DB是oracle，jar文件是ojdbc14.jar

司机有问题吗？或其他。请指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:58:15.337

问题出在 jar 文件上。替换为最新版本。

# c - LINUX kill_pid 失败

> ID：12154045
> 
> 赞同：2
> 
> 时间：2012-08-28T06:44:50.210
> 
> 标签：c, linux, linux-kernel, linux-device-driver, embedded-linux

我通过一本书介绍了我在驱动程序编程中的自我。

这本书是关于使用 2.6 内核进行 Linux 驱动程序编程的。但是现在我遇到了一个问题。我从书中复制了以下代码。并试图理解它。到现在为止还挺好。

```
#include <linux/module.h>
#include <linux/version.h>
#include <linux/init.h>
#include <linux/completion.h>

static int thread_id=0;
static wait_queue_head_t wq;
static DECLARE_COMPLETION( on_exit );
static int thread_code( void *data )
{
    unsigned long timeout;
    int i;
    daemonize("MyKThread");
    allow_signal( SIGTERM );
    for( i=0; i<10; i++ ) {
        timeout=HZ; // wait 1 second
        timeout=wait_event_interruptible_timeout(
            wq, (timeout==0), timeout);
        printk("thread_code: woke up ...\n");
        if( timeout==-ERESTARTSYS ) {
            printk("got signal, break\n");
            break;
        }
    }
    thread_id = 0;
    complete_and_exit( &on_exit, 0 );
}
static int __init kthread_init(void)
{
    init_waitqueue_head(&wq);
    thread_id=kernel_thread(thread_code, NULL, CLONE_KERNEL );
    printk("thread_id %u",thread_id);
    if( thread_id==0 )
        return -EIO;
    return 0;
}
static void __exit kthread_exit(void)
{

printk("thread_code: exit ...\n");
printk("thread_id %u\n",thread_id);
    if( thread_id )
    {
        kill_pid( thread_id, SIGTERM, 1 );//kill_proc --> kill_pid
    }
    wait_for_completion( &on_exit );

}
module_init( kthread_init );
module_exit( kthread_exit );
MODULE_LICENSE("GPL"); 
```

起初我用 kill_pid 替换了 kill_proc。

但是，如果我运行程序并提示 rmmod ...我会收到以下消息：

```
thread_code: exit ...
thread_id 995
Unable to handle kernel paging request for data at address 0x000003eb
Faulting instruction address: 0xc0047998
Oops: Kernel access of bad area, sig: 11 [#1]
SBC8548
last sysfs file: 
Modules linked in: bsp_6_9(-)
NIP: c0047998 LR: c0040540 CTR: c0040578
REGS: cf987de0 TRAP: 0300   Not tainted  (2.6.36)
MSR: 00029000 <EE,ME,CE>  CR: 40000424  XER: 00000000
DEAR: 000003eb, ESR: 00000000
TASK = cf9fcdb0[997] 'rmmod' THREAD: cf986000
GPR00: 00000000 cf987e90 cf9fcdb0 000003e3 00000000 000003e3 c015b6c8 000023fc 
GPR08: 00000034 000003e3 000023fc c0040578 20000422 1004a180 00000240 00000000 
GPR16: 101042f0 1009ea94 100f0000 10043008 00000000 bf91a110 10001bcc bf91a11c 
GPR24: bf91a118 00000000 c02cca7c c02cca88 0000000f 00000001 000003e3 fffffffd 
NIP [c0047998] pid_task+0x18/0x38
LR [c0040540] kill_pid_info+0x2c/0x64
Call Trace:
[cf987e90] [c015b6c8] serial8250_console_putchar+0x0/0x4c (unreliable)
[cf987eb0] [d102a16c] kthread_exit+0x50/0x124 [bsp_6_9]
[cf987ed0] [c006026c] sys_delete_module+0x174/0x210
[cf987f40] [c000dae0] ret_from_syscall+0x0/0x3c
--- Exception: c01 at 0xff3b2bc
    LR = 0x10000f80
Instruction dump:
8127000c 90890004 3c000020 60000200 90030010 4e800020 2c030000 4082000c 
38600000 4e800020 5480103a 7d230214 <80690008> 2f830000 41beffe8 54892036 
---[ end trace d2ac023715aedf88 ]---
Segmentation fault
-bash-3.2# 

Message from syslogd@ at Thu Jan  1 01:00:10 1970 ...

MPC_Embedded_Linux kernel: last sysfs file: thread_code: woke up ... 
```

可能 send kill_pid 顺序不对，但是我没有找到解决办法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:50:10.773

`kill_pid`将 a`struct pid *`作为第一个参数，而不是 a `pid_t`（即，它采用指向进程描述符结构的指针，而不是进程 ID）。`struct pid *`您可以使用类似的功能查找`find_vpid`。

# web-services - 开发 RESTful Web 服务，我可以依赖 PUT 和 DELETE 吗？

> ID：12154046
> 
> 赞同：0
> 
> 时间：2012-08-28T06:44:50.460
> 
> 标签：web-services, apache, drupal, nginx, httprequest

在为 Drupal 开发 RESTful Web 服务时，我发现我自己的开发服务器（运行 nginx）实际上阻止了 DELETE 和 PUT HTTP 请求。
虽然对我来说解决这个问题很简单，但我想知道依赖 PUT/DELETE 请求是否真的是一个明智的决定。
我的开发可以在任何 Drupal 安装中免费使用和安装，可以在共享服务器、Apache、nginx 或任何其他堆栈上。

我可以考虑到大多数标准 Drupal 安装都接受 PUT 和 DELETE 吗？
Web 服务器和位于它们之前的防火墙的标准和通用配置是什么 - 是否允许 PUT/DELETE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:41:10.353

PUT 和 DELETE 在 Apache、Nginx 和 Lighttp 中默认启用。它们是 HTTP 标准的一部分，任何主要的 Web 服务器都将支持该标准。绝大多数 Drupal 安装都可以依赖它们。

# internet-explorer-9 - 带有边框半径的 IE9 样式

> ID：12154047
> 
> 赞同：0
> 
> 时间：2012-08-28T06:44:54.340
> 
> 标签：internet-explorer-9, css

我对 IE9 中搜索栏的样式有疑问。输入和提交按钮后面有一个白块，但是用css拿不走。

我那个块的css代码：

```
.searchfield{

position:relative;
margin: 40px 0px 0px 0px;
padding:20px;
height: 90px;
-moz-border-radius: 25px;
-webkit-border-radius: 25px;
border-radius: 25px;
-moz-box-shadow: 0px 0px 2px #000000;
-webkit-box-shadow: 0px 0px 2px #000000;
box-shadow: 0px 0px 2px #000000;

background: #ffffff; /* Old browsers */
background: -moz-linear-gradient(top,  #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(50%,#f1f1f1), color-stop(51%,#e1e1e1), color-stop(100%,#f6f6f6)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* IE10+ */
background: linear-gradient(to bottom,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0 ); /* IE6-9 */
behavior: url(PIE.htc); 
```

}

但最奇怪的是border-radius运行良好，查看图片中的阴影![.](../Images/2b7a978cc1843486384a56a7fe5345f9.png)

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:20:54.477

我设法通过使用来自背景图像的数据 uri 编码来解决这个问题。

不过，感谢您的帮助！

# c# - 如何使用 ListViewSortEventArgs 对 ListView 进行排序？

> ID：12154048
> 
> 赞同：0
> 
> 时间：2012-08-28T06:44:53.997
> 
> 标签：c#, asp.net, listview, sorting, linkbutton

我想对我的 ListView 进行排序，但它不适用于我的代码:(

aspx：

```
<asp:ListView runat="server" ID="myListView" OnItemCommand="myListView_ItemCommand" OnSelectedIndexChanging="myListView_SelectedIndexChanging" OnSorting="myListView_Sorting">

        <LayoutTemplate>
            <table id="UserTable" runat="server" border="0" width="800" cellpadding="0" cellspacing="0">
                <tr style="background-color:#E5E5FE" class="TableClass">
                    <th align="left" id="th4" runat="server"><asp:LinkButton ID="lnkNachname" CommandArgument="Nachname" CommandName="Sort" runat="server" >id_Nachname</asp:LinkButton></th>
                    <th align="left" id="th3" runat="server"><asp:LinkButton ID="lnkVorname"  CommandArgument="Vorname" CommandName="Sort" runat="server" >id_Vorname</asp:LinkButton></th>
                    <th align="left" id="th5" runat="server"><asp:Label ID="lnkTelefon" runat="server" >id_Telefon</asp:Label></th>
                    <th align="left" id="th6" runat="server"><asp:Label ID="lnkAbteilung" runat="server">id_Abteilung</asp:Label></th>
                    <th align="left" id="th2" runat="server"><asp:Label ID="lnkemail" runat="server" >id_Email</asp:Label></th> 
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>

        <ItemTemplate>

            <tr class="TableClass"> 
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server"  /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server"  /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label7" Text='<%# Eval("Abteilung") %>' runat="server"  /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>

              <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </ItemTemplate>

        <AlternatingItemTemplate>

            <tr class="TableClass"> 
                <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label7" Text='<%# Eval("Abteilung") %>' runat="server"  /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>

                <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </AlternatingItemTemplate>

        </asp:ListView> 
```

我的cs代码：

```
protected void myListView_Sorting(object sender, ListViewSortEventArgs e)
        {
            if (e.SortDirection == System.Web.UI.WebControls.SortDirection.Ascending)
            {
                System.Web.UI.WebControls.SortDirection sortdir = System.Web.UI.WebControls.SortDirection.Descending;
                myListView.Sort(e.SortExpression, sortdir);
            }
            else
            {
                System.Web.UI.WebControls.SortDirection sortdir = System.Web.UI.WebControls.SortDirection.Ascending;
                myListView.Sort(e.SortExpression, sortdir);

            }

        } 
```

我想如果我单击标题中的链接按钮，我会得到一个带有上下图像的排序列表视图，但这可以等待。首先它必须与 LinkBut​​tonClick 一起使用。

# mongodb - 如何更新 mongodb 中的整个对象？

> ID：12154049
> 
> 赞同：0
> 
> 时间：2012-08-28T06:44:55.630
> 
> 标签：mongodb

在下面的文档中，我有一个`array`名为 imAccounts。我想要`update()`那个对象`array`。我怎样才能做到这一点？

```
{
"_id" : ObjectId("503c55da1c192a530b000001"), 
"imAccounts" : [
  { 
    "accountType"     : "Windows",  
    "accountName"     : "rwqerqw",  
    "accountPassword" : "erqwerwe" 
  }, 
  {     
    "accountType"     : "Yahoo",    
    "accountName"     : "rwqerqw",  
    "accountPassword" : "erqwerwe" 
  }]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:12:25.450

[使用此文档结构，您可以使用位置运算符 ($)](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)更新数组中的对象：

```
db.myarray.update(
    { // Match criteria
        "_id" : ObjectId("503c55da1c192a530b000001"),
        'imAccounts.accountType': 'Yahoo',
    },
    { // Update first matched item using positional operator $
        '$set' : { 'imAccounts.$.password':'sekrit'}
    }
) 
```

请注意，位置运算符当前仅适用于查询中的**第一个**匹配项。

# umbraco - 替代/迁移 Umbraco 5

> ID：12154053
> 
> 赞同：0
> 
> 时间：2012-08-28T06:45:09.813
> 
> 标签：umbraco

如果我想从 umbraco 5 迁移，还有哪些 CMS 是最佳选择？我想尽可能地使用 umbraco 的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:48:13.853

我将一个 Umbraco v5 网站迁移回 Umbraco 4.7.2，总而言之，这是一个相当轻松的过程——我的许多 razor 脚本很容易移植回来。经过数周努力让 v5 的工作可以接受之后，再次使用经过验证的 CMS 确实令人耳目一新，并且性能提升非常出色。

就我个人而言，我对整个 v5 崩溃的表现方式感到相当失望，但总的来说，考虑到他们在新代码库中面临的挑战，这可能是最好的也是唯一的前进方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:32:00.167

sudhirk 为什么要离开 umbraco？

我不会被 umbraco hq 决定与 V5 做的事情所推迟，因为它只会加强我对 umbraco 的热爱，umbraco 是一款出色的（免费！！！）cms，但它真正很棒的是论坛社区。您有任何问题，将它们弹出在那里，它们将得到答复。

谢谢，威尔

# php - 从ini文件访问数组到zend框架时出错

> ID：12154054
> 
> 赞同：0
> 
> 时间：2012-08-28T06:45:09.857
> 
> 标签：php, zend-framework, ini, zend-config

在我给出的 config.ini 文件中

```
customer.login.test = "test case" 
customer.login.support[] = "abel"
customer.login.support[] = "justin"
customer.login.support[] = "leon" 
```

我试图在 zend 动作助手函数中访问它

```
$config = \Zend_Registry::get("config");
echo $config->customer->login->test; // Outputs as "test case"

print_r($config->customer->login->support); // No Result

print_r($config->customer->login->support->toArray()); // Gives Error 
```

错误：在非对象上调用成员函数 toArray()

如何纠正这个问题？

**编辑：**

```
support[] = "abel"
support[] = "justin"
support[] = "leon" 
```

在 zend 动作辅助函数中

```
print_r($config->support->toArray()); 
```

上面`print_r`的语句给了我一个正确的数组。这是怎么发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:08:10.503

我刚刚试过你的代码。它工作正常。看起来你没有设置`customer.login.support[]`。

如果您加载也有但没有的配置文件的另一部分（例如`testing`，而不是），则可能会发生这种情况`development``customer.login.test``customer.login.support[]`

# smarty - 表列的总和 - SMARTY

> ID：12154062
> 
> 赞同：2
> 
> 时间：2012-08-28T06:45:33.987
> 
> 标签：smarty

我有一个多维关联数组，我将其传递给 smarty 模板。我在我的 smarty 模板中使用下面的代码在我的浏览器中生成显示的两个表。
*聪明的代码：*

```
<!--language:smarty-->
{foreach from=$allarr key=header item=table}
            <h5>{$header}</h5>
            <table> 
                <tr>
                    <td>{t}Emp #{/t}</td>
                    <td>{t}Employee Name{/t}</td>
                    <td>{t}Amount{/t}</td>
                </tr>
                    {foreach from=$table item=sub}   
                            <tr>
                                    <td>{$sub.emp_num}</td>
                                    <td>{$sub.user_name}</td>
                                    <td>{$sub.amount}</td>
                            </tr>
                    {/foreach}
                <tr>
                    <td colspan="2">{t}Variation Total{/t}</td>
                    <td colspan="1">{t}+++{/t}</td>
                </tr>
            </table>
{/foreach} 
```

*表格：*

```
Table One
________________________________
Emp #   |Employee Name  |Amount |
________|_______________|_______|
1000001 | Test User     | 775.00|
26      | user1         | 555.00|
________|_______________|_______|
Variation Total         | +++   |
________________________|_______|

Table Two
______________________________
Emp #   |Employee Name| Amount|
________|_____________|_______|
1000001 | Test User   | 110.00|
________|_____________|_______|
Variation Total       | +++   |
______________________|_______| 
```

我想要的是用每个 Amount 列中值的实际总和替换“+++”。似乎没有任何效果。任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:26:33.940

想出了一个办法。:) 完整的代码如下。

```
{foreach from=$allarr key=header item=table}
       <h5>{$header}</h5>
       <table> 
          <tr>
               <td>{t}Emp #{/t}</td>
               <td>{t}Employee Name{/t}</td>
               <td>{t}Amount{/t}</td>
         </tr>
         {foreach from=$table item=sub}   
         <tr>
               <td>{$sub.emp_num}</td>
               <td>{$sub.user_name}</td>
               <td>{$sub.amount}</td>
         </tr>
        {assign var="sum" value="`$sum+$sub.amount`"}
        {/foreach}
        <tr>
              <td colspan="2">{t}Variation Total{/t}</td>
              <td colspan="1">{t}{$sum}{/t}</td>
              {assign var="sum" value=0}
       </tr>
    </table>
{/foreach} 
```

# javascript - 多边形谷歌地图内的白线

> ID：12154063
> 
> 赞同：0
> 
> 时间：2012-08-28T06:45:34.183
> 
> 标签：javascript, google-maps, internet-explorer, google-maps-api-3

您好，在 IE 中我遇到了多边形问题，或者我可以说形状问题。正如您在图像中看到的那样，白线出现在圆圈内。这个问题只存在于 ie 和其他浏览器中，一切都很好。

![圆圈内的白线](../Images/6ec3baed5d7610baf2a8ff9c2a12ce45.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:00:14.083

8 渲染问题。我建议你检查谷歌支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:06:39.857

这可能与以 Quirks 模式运行有关。确保在页面上设置了 doctype：

`<!DOCTYPE html>`

# android - Android 退出时清除图像内存缓存

> ID：12154065
> 
> 赞同：1
> 
> 时间：2012-08-28T06:45:41.980
> 
> 标签：android, image, gridview, memcached

我希望我的应用程序在退出时清除图像缓存。我不知道如何从我的图像加载器活动中调用我的 clearcache()。我收到一个错误“ `No enclosing instance of the type MainGridViewImageLoader is accessible in scope`”。有人可以指导我如何完成吗？以下是我的代码，我已经用评论标记了这些区域。

MainPageActivity.class

```
@Override
        public void onBackPressed() {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Do you want to exit?")
                   .setCancelable(false)
                   .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {

                           Intent intent = new Intent(Intent.ACTION_MAIN);
                           intent.addCategory(Intent.CATEGORY_HOME);
                           intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                           startActivity(intent);

                           MainGridViewImageLoader.this.clearCache(); //<<"No enclosing instance of the type MainGridViewImageLoader is accessible in scope"
                               System.exit(0);
                       }
                   })
                   .setNegativeButton("No", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                       }
                   });
            AlertDialog alert = builder.create();
            alert.show();

    } 
```

MainGridViewImageLoader.class

```
public class MainGridViewImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public MainGridViewImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

   final int stub_id = R.drawable.no_image;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(stub_id);

        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        @Override
        public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;

            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
          else
              photoToLoad.imageView.setImageResource(stub_id);

        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:34:09.823

下面的代码会清除我的图像内存缓存吗？

```
public void clearApplicationData() 
         {
             File cache = getCacheDir();
             File appDir = new File(cache.getParent());
             if (appDir.exists()) {
                 String[] children = appDir.list();
                 for (String s : children) {
                     if (!s.equals("lib")) {
                         deleteDir(new File(appDir, s));Log.i("TAG", "**************** File /data/data/APP_PACKAGE/" + s + " DELETED *******************");
                     }
                 }
             }
         }

         public static boolean deleteDir(File dir) 
         {
             if (dir != null && dir.isDirectory()) {
                 String[] children = dir.list();
                 for (int i = 0; i < children.length; i++) {
                     boolean success = deleteDir(new File(dir, children[i]));
                     if (!success) {
                         return false;
                     }
                 }
             }
             return dir.delete();
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:43:29.147

您尝试通过 访问 MainGridViewImageLoader `MainGridViewImageLoader.this`。仅当您的 MainPageActivity 是 MainGridViewImageLoader 的内部类时，它才有效，显然不是。

您应该使用对 MainGridViewImageLoader 对象的正常引用。可能有你做的地方`MainGridViewImageLoader loader = new MainGridViewImageLoader()`。使用该变量而不是`MainGridViewImageLoader.this`

# android - 安卓; 为 Activity 中的特定 View 子类定义主题

> ID：12154070
> 
> 赞同：0
> 
> 时间：2012-08-28T06:46:05.027
> 
> 标签：android, android-layout, android-theme

有没有一种方法可以定义影响给定类型活动中所有视图的样式，而无需编辑所有 xml 视图标签来定义样式。有没有办法定义类似“此活动中的所有 TextViews 的 minHeight 为 70sp”之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:27:48.623

一个主题就是你想要的。每个 android 小部件都有一个默认样式，您可以覆盖它以使其成为您想要的。例如：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="TextViewSpecial" parent="@android:style/Theme">
        <item name="android:textViewStyle">@style/SpecialTextView</item>
    </style>
</resources> 
```

覆盖样式的主题`TextView`。`SpecialTextView`是这样的风格：

```
<style name="SpecialTextView" parent="@android:style/Widget.TextView">
    <item name="android:minHeight">70sp</item> <!-- use dp instead of sp --       
</style> 
```

然后只需将`TextViewSpecial`清单中的主题设置为所需的活动。您可以使用此方法来覆盖您想要的小部件的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:16:01.513

只需为布局定义一个主题。

# asp.net - ASP.NET MVC3 生成视图模型，包括验证属性

> ID：12154071
> 
> 赞同：0
> 
> 时间：2012-08-28T06:46:12.510
> 
> 标签：asp.net, asp.net-mvc-3

我想知道是否有一种方法可以从数据库表生成视图模型，包括验证（必需、长度、数据类型）。我当然会编辑和增强它。否则这是一种浪费，因为我必须输入所有内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:55:12.707

我们正在我们的一个项目中实现“动态”验证方法，其中验证规则被编码在数据库表中，我们在 DataAnnotationsModelValidatorProvider 的自定义实现中覆盖 GetValidators() 以注入自定义和/或标准验证属性。如果我们愿意，这些可以传播到客户端。至于从现有数据库创建 viewModel，您可以使用 t4 文件来读取 db 模式并为您生成类，并在创建模型时在模型上注入验证属性。

# spring - Spring 国际化支持

> ID：12154086
> 
> 赞同：1
> 
> 时间：2012-08-28T06:47:45.990
> 
> 标签：spring, internationalization, resourcebundle

使用 Spring 框架在 Web 应用程序中解析 UI 消息和提供内部化支持的不同方法有哪些？

我们使用属性文件和 ResourceBundleMessageSource 来解析 Spring 中的消息。Spring 的实现在我们的应用程序中导致了高 CPU 使用率。ResourceBundleMessageSource 实现存在两个问题。

1.  锁定争用 - getResourceBundle() 和 getMessageFormat() 都是同步的。
2.  MissingResourceException - 解析消息涉及遍历应用程序中定义的所有资源包并调用 bundle.getString(key)。如果未找到密钥，bundle.getString(key) 方法调用将引发 MissingResourceException。搜索密钥，直到找到给定密钥的消息。由于异常构造是一个缓慢的过程，并且可能会占用 CPU（这是我在负载测试中观察到的），这看起来像是一个瓶颈。

尽管上述两个问题都有解决方法（通过扩展类和覆盖行为），但我想知道 Spring 框架中是否还有其他方法可以为 Web 应用程序提供国际化支持。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:11:39.387

您可以改用[ReloadableResourceBundleMessageSource](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/ReloadableResourceBundleMessageSource.html "ReloadableResourceBundleMessageSource")。它提供了一些内部缓存。

如果这不起作用，我建议您实现自己的 MessageSource（这很简单）。Spring 提供了[AbstractMessageSource](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/support/AbstractMessageSource.html "抽象消息源")，这可能有助于开始。

从那里，您可以实现一些缓存。很可能，您的本地化没有经常更新。

您可以在此处阅读有关在 Spring 3.1 中使用新的 Cacheable 注释

[spring 3.1 @Cacheable 示例](https://stackoverflow.com/questions/7977611/spring-3-1-cacheable-example)

我已经在允许管理员覆盖数据库中的语言环境的应用程序中成功地做到了这一点。但是，您的特定实现显然会非常不同。

# usb - RNDIS“复合设备”无法启动

> ID：12154087
> 
> 赞同：7
> 
> 时间：2012-08-28T06:47:46.287
> 
> 标签：usb, driver, rndis

我正在开发一个 RNDIS 复合设备，其中包括一个 RNDIS 设备、一个 usbnet 设备、一个调制解调器设备和一个自定义 CDC 设备。

PC 运行 Win7 32 位，我使用的是默认的 RNDIS 驱动程序。当我只用 RNDIS 设备回答 Windows 枚举时，一切正常。但是当我将所有 4 个设备作为复合设备组合到描述符中时，Windows 仍然可以正确枚举，其他 3 个设备工作正常，但 RNDIS 设备遇到“无法启动错误代码 10”问题。

我用 USB 分析仪跟踪 USB 数据流，发现Windows RNDIS 驱动程序在“设置配置”后**没有发送 RNDIS 初始化消息。**

复合设备描述符如下所示：

```
 devDesc[0]  = 0x12; //  bLength             - Descriptor length
         devDesc[1]  = 0x01; //  bDescriptorType     - Descriptor  Type
         devDesc[2]  = bcdUSB_LSB; //  bcdUSB (LSB)        - Device Compliant to USB specification ..
         devDesc[3]  = bcdUSB_MSB; //  bcdUSB (MSB)
         devDesc[4]  = 0x00; //  bDeviceClass        - class of the device
         devDesc[5]  = 0x00; //  bDeviceSubClass     - subclass of the device
         devDesc[6]  = 0x00; //  bDeviceProtocol     - protocol of the device
         devDesc[7]  = bEp0MaxPacketSize; //  bMaxPacketSize0     - Max Packet Size for EP zero
         devDesc[8]  = 0x86; //  idVendor (LSB)      - Vendor ID
         devDesc[9]  = 0x12; //  idVendor (MSB)
         devDesc[10] = 0x0E; //  idProduct (LSB)     - Product ID
         devDesc[11] = 0x81; //  idProduct (MSB)
         devDesc[12] = 0x02; //  bcdDevice (LSB)     - The device release number
         devDesc[13] = 0x00; //  bcdDevice (MSB)
         devDesc[14] = 0x01; //  iManufacturer       - Index of string descriptor describing Manufacturer
         devDesc[15] = 0x03; //  iProduct            - Index of string descriptor describing Product
         devDesc[16] = 0x04; //  iSerialNumber       - Index of string descriptor describing Serial number
         devDesc[17] = 0x01; //  bNumConfigurations  - Number of configurations

         //Configuration Descriptor
         configDesc[0]  = 0x09; // bLength               - Descriptor length
         configDesc[1]  = 0x02; // bDescriptorType       - Descriptor Type
         configDesc[2]  = 177;   // wTotalLength (LSB)   - Total Data length for the configuration,
         configDesc[3]  = 0x00; // wTotalLength (MSB)    - includes all descriptors for this configuration
         configDesc[4]  = 0x05; // bNumInterfaces        - Number of interfaces this configuration supports
         configDesc[5]  = 0x01; // bConfigurationValue   - The Value that should be used to select this configuration
         configDesc[6]  = 0x00; // iConfiguration        - Index of string descriptor describing this configuration
         configDesc[7]  = 0xC0; // bmAttributes          - bit6: Self-Powered, bit5: RemoteWakeup
         configDesc[8]  = 0xfa; // MaxPower              - Maximum power consumption for this configuration (mA)

         //Interface Descriptor 0 usbnet
         configDesc[9]  = 0x09; // bLength               - Descriptor length
         configDesc[10] = 0x04; // bDescriptorType       - Descriptor Type
         configDesc[11] = 0x00; // bInterfaceNumber      - Index (Number) of this interfaces
         configDesc[12] = 0x00; // bAlternateSetting     - The value to select alternate setting of this interface
         configDesc[13] = 0x03; // bNumEndpoints         - Number endpoints  used by this interface
         configDesc[14] = 0xff; // bInterfaceClass       - Class of this Interface
         configDesc[15] = 0xff; // bInterfaceSubClass    - Sub class of this Interface
         configDesc[16] = 0x00; // bInterfaceProtocol    - Protocol of this Interface
         configDesc[17] = 0x05; // iInterface            - Index of string descriptor describing this Interface

         // usbnet Endpoint Descriptor
         configDesc[18] = 0x07; // bLength               - Descriptor length
         configDesc[19] = 0x05; // bDescriptorType       - Descriptor Type
         configDesc[20] = 0x85; // bEndpointAddress      - Endpoint Address & Direction
         configDesc[21] = 0x03; // bmAttributes          - BULK,ISO,Interrupt
         configDesc[22] = 0x0F; // wMaxPacketSize (LSB)  - Max packet size
         configDesc[23] = 0x00; // wMaxPacketSize (MSB)
         configDesc[24] = bInterval; // bInterval                - Polling Interval (ms)

         configDesc[25] = 0x07; // bLength               - Descriptor length
         configDesc[26] = 0x05; // bDescriptorType       - Descriptor Type
         configDesc[27] = 0x81; // bEndpointAddress      - Endpoint Address & Direction
         configDesc[28] = 0x02; // bmAttributes          - BULK,ISO,Interrupt
         configDesc[29] = bBulkMaxPacketSize_LSB; // wMaxPacketSize (LSB)  - Max packet size
         configDesc[30] = bBulkMaxPacketSize_MSB; // wMaxPacketSize (MSB)
         configDesc[31] = 0x00; // bInterval             - Polling Interval (ms)

         configDesc[32] = 0x07; // bLength               - Descriptor length
         configDesc[33] = 0x05; // bDescriptorType       - Descriptor Type
         configDesc[34] = 0x02; // bEndpointAddress      - Endpoint Address & Direction
         configDesc[35] = 0x02; // bmAttributes          - BULK,ISO,Interrupt
         configDesc[36] = bBulkMaxPacketSize_LSB; // wMaxPacketSize (LSB)  - Max packet size
         configDesc[37] = bBulkMaxPacketSize_MSB; // wMaxPacketSize (MSB)
         configDesc[38] = 0x00; // bInterval             - Polling Interval (ms)

         //Interface descriptor 1 ICAT
         configDesc[39] = 0x09; // bLength               - Descriptor length
         configDesc[40] = 0x04; // bDescriptorType       - Descriptor Type
         configDesc[41] = 0x01; // bInterfaceNumber      - Index (Number) of this interfaces
         configDesc[42] = 0x00; // bAlternateSetting     - The value to select alternate setting of this interface
         configDesc[43] = 0x02; // bNumEndpoints         - Number endpoints  used by this interface
         configDesc[44] = 0xFF; // bInterfaceClass       - Class of this Interface
         configDesc[45] = 0x00; // bInterfaceSubClass    - Sub class of this Interface
         configDesc[46] = 0x00; // bInterfaceProtocol    - Protocol of this Interface
         configDesc[47] = 0x00; // iInterface            - Index of string descriptor describing this Interface

         //ICAT endpoints
         configDesc[48] = 0x07; // bLength               - Descriptor length
         configDesc[49] = 0x05; // bDescriptorType       - Descriptor Type
         configDesc[50] = 0x87; // bEndpointAddress      - Endpoint Address & Direction
         configDesc[51] = 0x02; // bmAttributes          - BULK,ISO,Interrupt
         configDesc[52] = bBulkMaxPacketSize_LSB; // wMaxPacketSize (LSB)  - Max packet size
         configDesc[53] = bBulkMaxPacketSize_MSB; // wMaxPacketSize (MSB)
         configDesc[54] = 0x00; // bInterval             - Polling Interval (ms)

         configDesc[55] = 0x07; // bLength               - Descriptor length
         configDesc[56] = 0x05; // bDescriptorType       - Descriptor Type
         configDesc[57] = 0x08; // bEndpointAddress      - Endpoint Address & Direction
         configDesc[58] = 0x02; // bmAttributes          - BULK,ISO,Interrupt
         configDesc[59] = bBulkMaxPacketSize_LSB; // wMaxPacketSize (LSB)  - Max packet size
         configDesc[60] = bBulkMaxPacketSize_MSB; // wMaxPacketSize (MSB)
         configDesc[61] = 0x00; // bInterval             - Polling Interval (ms)

         //Modem class specific descriptors
         configDesc[62]  = 0x09; // bLength              - Descriptor length
         configDesc[63] = 0x04; // bDescriptorType       - Descriptor Type
         configDesc[64] = 0x02; // bInterfaceNumber      - Index (Number) of this interfaces
         configDesc[65] = 0x00; // bAlternateSetting     - The value to select alternate setting of this interface
         configDesc[66] = 0x03; // bNumEndpoints         - Number endpoints  used by this interface
         configDesc[67] = 0x02; // bInterfaceClass       - Class of this Interface
         configDesc[68] = 0x02; // bInterfaceSubClass    - Sub class of this Interface
         configDesc[69] = 0x01; // bInterfaceProtocol    - Protocol of this Interface
         configDesc[70] = 0x00; // iInterface            - Index of string descriptor describing this Interface

         configDesc[71] = 0x05; // descriptor length Comms Class CS_INTERFACE 'Functional Descriptors' Triplet
         configDesc[72] = 0x24; // descriptor type
         configDesc[73] = 0x00; // subtype = header
         configDesc[74] = 0x10; // BCD
         configDesc[75] = 0x01; //

         configDesc[76] = 0x05; // 2\. descriptor length - Call Manangement Func Desc
         configDesc[77] = 0x24; // descriptor type
         configDesc[78] = 0x01; // subtype = Call management
         configDesc[79] = 0x00; //bmcapabilities; MS driver usbser.sys seems to ignore this bit and sends AT over the data,interface anyway
         configDesc[80] = 0x01; // Interface number of data class interface

         configDesc[81] = 0x04; // 3.descriptor length  Abstract Control Func Desc
         configDesc[82] = 0x24; // descriptor type
         configDesc[83] = 0x02; // subtype = Abstract CM
         configDesc[84] = 0x00; // bmcapabilities 

         configDesc[85] = 0x05; // Size of descriptor. Number of interfaces plus 3 bytes of header
         configDesc[86] = 0x24; // 0x24 - CS_INTERFACE
         configDesc[87] = 0x06; // 0x06 - See table 25 of document "USB Class definitions for Comms Devices"
         configDesc[88] = 0x00;
         configDesc[89] = 0x01;

         //Endpoint Descriptors MODEM
         configDesc[90] = 0x07; // bLength               - Descriptor length
         configDesc[91] = 0x05; // bDescriptorType       - Descriptor Type
         configDesc[92] = 0x86; // bEndpointAddress      - Endpoint Address & Direction
         configDesc[93] = 0x03; // bmAttributes          - BULK,ISO,Interrupt
         configDesc[94] = 0x0F; // wMaxPacketSize (LSB)  - Max packet size
         configDesc[95] = 0x00; // wMaxPacketSize (MSB)
         configDesc[96] = bInterval; // bInterval                - Polling Interval (ms)

         configDesc[97] = 0x07; // bLength               - Descriptor length
         configDesc[98] = 0x05; // bDescriptorType       - Descriptor Type
         configDesc[99] = 0x83; // bEndpointAddress      - Endpoint Address & Direction
         configDesc[100] = 0x02; // bmAttributes          - BULK,ISO,Interrupt
         configDesc[101] = bBulkMaxPacketSize_LSB; // wMaxPacketSize (LSB)  - Max packet size
         configDesc[102] = bBulkMaxPacketSize_MSB; // wMaxPacketSize (MSB)
         configDesc[103] = 0x00; // bInterval                - Polling Interval (ms)

         configDesc[104] = 0x07; // bLength              - Descriptor length
         configDesc[105] = 0x05; // bDescriptorType      - Descriptor Type
         configDesc[106] = 0x04; // bEndpointAddress     - Endpoint Address & Direction
         configDesc[107] = 0x02; // bmAttributes          - BULK,ISO,Interrupt
         configDesc[108] = bBulkMaxPacketSize_LSB; // wMaxPacketSize (LSB)  - Max packet size
         configDesc[109] = bBulkMaxPacketSize_MSB; // wMaxPacketSize (MSB)
         configDesc[110] = 0x00; // bInterval                - Polling Interval (ms)

        //rndis IAD
        configDesc[111] = 0x08; // bLength
        configDesc[112] = 0x0b; // INTERFACE ASSOCIATION DESCRIPTOR bDescriptorType
        configDesc[113] = 0x03; // bFirstInterface
        configDesc[114] = 0x02; // bInterfaceCount
        configDesc[115] = 0x02; // bFunctionClass
        configDesc[116] = 0x02; // bFunctionSubClass
        configDesc[117] = 0xFF; // bFunctionProtocol
        configDesc[118] = 0x03; // Index of string descriptor describing this function

        //rndis comm interface
        configDesc[119] = 0x09; // bLength             - Descriptor length
        configDesc[120] = 0x04; // bDescriptorType     - Descriptor Type
        configDesc[121] = 0x03; //bInterfaceNumber     - for RNDIS
        configDesc[122] = 0x00; // bAlt
        configDesc[123] = 0x01; // bNumEnd
        configDesc[124] = 0x02; //bInterfaceClass
        configDesc[125] = 0x02; // bInterfaceSubclass
        configDesc[126] = 0xFF; // bInterfaceprotocol
        configDesc[127] = 0x00; // iInterface  +++++++++++++++++++++++++++++++++++++need modified

        // Class specified descriptor

        configDesc[128] = 0x05; //
        configDesc[129] = 0x24; // bDescriptorType
        configDesc[130] = 0x00; //bDescriptorSubtype
        configDesc[131] = 0x10; // BCD
        configDesc[132] = 0x01; //

        configDesc[133] = 0x05; //
        configDesc[134] = 0x24; // bDescriptorType
        configDesc[135] = 0x01; // bDescriptorSubtype
        configDesc[136] = 0x00; // bmCapabilities
        configDesc[137] = 0x04; //bDataInterface

        configDesc[138] = 0x04; //
        configDesc[139] = 0x24; // bDescriptorType
        configDesc[140] = 0x02; // bDescriptorSubtype
        configDesc[141] = 0x00; // bmCapabilities

        configDesc[142] = 0x05; //
        configDesc[143] = 0x24; // bDescriptorType
        configDesc[144] = 0x06; // bDescriptorSubtype
        configDesc[145] = 0x03; // bControlInterface
        configDesc[146] = 0x04; // bsubordinateInterface

        //Interrupt In endpoint
        configDesc[147] = 0x07; //
        configDesc[148] = 0x05; //
        configDesc[149] = 0x8C; //bendpointAddress
        configDesc[150] = 0x03; //bmAttributes
        configDesc[151] = 0x08; // wMaxPacketSize
        configDesc[152] = 0x00; //
        configDesc[153] = 0x01; // bInterval

        //rndis data interface
        configDesc[154] = 0x09; // bLength             - Descriptor length
        configDesc[155] = 0x04; // bDescriptorType     - Descriptor Type
        configDesc[156] = 0x04; //bInterfaceNumber     --- for RNDIS
        configDesc[157] = 0x00; // bAlt
        configDesc[158] = 0x02; // NumEndpoints
        configDesc[159] = 0x0a; //bInterfaceClass
        configDesc[160] = 0x00; // bInterfaceSubclass
        configDesc[161] = 0x00; // bInterfaceprotocol
        configDesc[162] = 0x00; // iInterface  +++++++++++++++++++++++++++++++++++++need modified

        //Bulk In endpoint
        configDesc[163] = 0x07; //
        configDesc[164] = 0x05; //
        configDesc[165] = 0x8E; //bendpointAddress
        configDesc[166] = 0x02; //bmAttributes
        configDesc[167] = 0x00; // wMaxPacketSize
        configDesc[168] = 0x02; //
        configDesc[169] = 0x00; // bInterval

        //Bulk Out endpoint
        configDesc[170] = 0x07; //
        configDesc[171] = 0x05; //
        configDesc[172] = 0x0D; //bendpointAddress
        configDesc[173] = 0x02; //bmAttributes
        configDesc[174] = 0x00; // wMaxPacketSize
        configDesc[175] = 0x02; //
        configDesc[176] = 0x00; // bInterva 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T09:05:13.127

让我回答我自己的问题，我已经弄清楚了这个问题：

RNDIS IAD 接口**必须是**复合设备的第一个和第二个。虽然问题解决了，但还是让我很困惑。

希望这篇笔记能帮助其他遇到类似问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-14T23:54:48.783

对于那些遇到此线程的人，因为您在使用内置的 configfs libcomposite 设备时遇到类似的 RNDIS 问题和 windows 代码 10 错误，经过大量谷歌搜索并在互联网上浏览代码，代码在libcomposite 模块.....我发现如果我在 libcomposite 模块之后直接强制加载 usb_f_rndis 模块，而不是修补驱动程序，我可以解决这个问题，这会强制 usb_f_rndis 到第一个和第二个 iad 插槽。当您在 configfs 中添加设备时，将加载 libcomposite 设备的其余模块，Windows 会对此感到满意。

此外，要强制 Windows 加载正确的驱动程序，请确保设置了 os_desc 内容。这里有一个很好的指南：http: [//irq5.io/2016/12/22/raspberry-pi-zero-as-multiple-usb-gadgets/](http://irq5.io/2016/12/22/raspberry-pi-zero-as-multiple-usb-gadgets/)

# iphone - 如何使用 UITouches 移动 CGRect？

> ID：12154088
> 
> 赞同：1
> 
> 时间：2012-08-28T06:47:48.970
> 
> 标签：iphone, objective-c, ios

如何使用 uitouches 移动 CGRect？如果有人有想法请解释。

```
if(areaSelected)
        return;
    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath addLineToPoint:[mytouch locationInView:self]];

[self setNeedsDisplay]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:17:54.667

嗨，根据我的理解，您需要将裁剪的图像移动到一个地方到另一个地方，因此您需要在触摸的东西中对其进行编码......

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];
    cloud.center = location;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self touchesBegan:touches withEvent:event];
} 
```

这里的云是 UIImageView 你可以把它作为裁剪图像....

```
 cloud.image=croppedImage;   //[you must assign this first...] 
```

我希望它可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:08:36.917

您需要重置矩形的框架：

```
[cropRect setFrame:CGRectMake(<new x coordinate>, <new y coordinate>, width, height)] 
```

# html - 从 Plone 发送 HTML 电子邮件

> ID：12154089
> 
> 赞同：2
> 
> 时间：2012-08-28T06:47:49.203
> 
> 标签：html, email, plone

是否有从 Plone 发送简单 HTML 格式电子邮件（等）`<h1>`的示例？`<b>`

纯文本被很好地覆盖，但没有 HTML 电子邮件输出示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:00:55.167

您可以调整许多 python[`email`模块](http://docs.python.org/library/email.html)示例中的任何一个。因为 HTML 电子邮件*通常*意味着发送多部分/替代消息，所以事情变得有点复杂。

*   包的[示例页面](http://docs.python.org/library/email-examples.html)。`email`
*   [使用 Python 发送 HTML 电子邮件](https://stackoverflow.com/questions/882712/sending-html-email-in-python)
*   [发送包含嵌入图像的多部分 html 电子邮件](https://stackoverflow.com/questions/920910/python-sending-multipart-html-emails-which-contain-embedded-images)

您基本上必须构造一个`email.Message`对象并将其传递给`Mailhost.send`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T07:51:14.977

根据您的用例，您还可以使用[collective.watcherlist](http://pypi.python.org/pypi/collective.watcherlist)。这是从 Products.Poi 中提取出来的，它使用它来允许用户订阅问题的更新。这部分对您来说可能不感兴趣，但它的代码以浏览器视图作为发送电子邮件的基础。将页面模板连接到该浏览器视图当然很简单。

如果您不能直接使用它，它可以作为代码示例。

# java - 从字节数组创建 8 位图像

> ID：12154090
> 
> 赞同：2
> 
> 时间：2012-08-28T06:47:50.087
> 
> 标签：java, image-processing, rgb, grayscale, argb

字节数组是通过这种方式获得的——

```
BufferedImage image = new Robot().createScreenCapture(new Rectangle(screenDimension));
byte[] array = ((DataBufferByte)getGraycaleImage(image).getRaster().getDataBuffer()).getData();
//  Method getGraycaleImage returns a grayscaled BufferedImage, it works fine 
```

现在我如何从字节数组重建这个灰度图像？

我不太了解 ARGB、RGB 或灰度图像。我试过这个 -

```
private Image getGrayscaleImageFromArray(byte[] pixels, int width, int height)
{
    int[] pixels2=getIntArrayFromByteArray(pixels);
    MemoryImageSource mis = new MemoryImageSource(width, height, pixels2, 0, width);
    Toolkit tk = Toolkit.getDefaultToolkit();
    return tk.createImage(mis);
}

private int[] getIntArrayFromByteArray(byte[] pixelsByte)
{
    int[] pixelsInt=new int[pixelsByte.length];
    int i;
    for(i=0;i<pixelsByte.length;i++)
        pixelsInt[i]=pixelsByte[i]<<24 | pixelsByte[i]<<16
| pixelsByte[i]<<8 | pixelsByte[i];  // I think this line creates the problem
    return pixelsInt;
} 
```

当我画这个图像时，它不是黑白的，而是橙色和灰色的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T06:57:16.077

您必须指定正确的`ColorSpace`对应于灰度图像。

这是一个示例，可在[http://technojeeves.com/joomla/index.php/free/89-create-grayscale-image-on-the-fly-in-java](http://technojeeves.com/joomla/index.php/free/89-create-grayscale-image-on-the-fly-in-java)上找到：

```
public static BufferedImage getGrayscale(int width, byte[] buffer) {
    int height = buffer.length / width;
    ColorSpace cs = ColorSpace.getInstance(ColorSpace.CS_GRAY);
    int[] nBits = { 8 };
    ColorModel cm = new ComponentColorModel(cs, nBits, false, true,
            Transparency.OPAQUE, DataBuffer.TYPE_BYTE);
    SampleModel sm = cm.createCompatibleSampleModel(width, height);
    DataBufferByte db = new DataBufferByte(buffer, width * height);
    WritableRaster raster = Raster.createWritableRaster(sm, db, null);
    BufferedImage result = new BufferedImage(cm, raster, false, null);

    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T07:06:17.710

如果我向您解释如何从 ARGB/RGB 2 灰色转换，希望对您有所帮助，因为未知函数和类太多：P

ARGB 为 32 位/像素，因此每个通道为 8 位。Alpha 通道是不透明度，因此与透明度相反，因此 0 是透明的。

RGB 是 24 位/像素。要从 ARGB 转换为 RGB，您必须关闭 alpha 通道。

要从 RGB 转换为灰度，您必须使用以下公式：

```
0.2989 * R + 0.5870 * G + 0.1140 * B 
```

所以你必须弄清楚哪个字节属于哪个通道；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:57:21.677

这将起作用。只需确保以您需要的方式调整图像类型：

```
Image img = new ImageIcon(array).getImage();
BufferedImage image = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
image.createGraphics().drawImage(img, 0, 0, null); 
```

# javascript - 防止 AJAX 队列阻塞浏览器

> ID：12154091
> 
> 赞同：0
> 
> 时间：2012-08-28T06:47:50.967
> 
> 标签：javascript, jquery, ajax

注意：简化示例..

我有一个包含 1000 个表格行的页面。对于每一行，我需要通过 AJAX 调用在服务器上“做一些工作”，然后在回调中更新该表行，说完成。

最初我尝试在选择器内触发 1000 个 ajax 请求`.each`，但浏览器被锁定。

所以我改变了它来尝试使用一个内部的ajax计数器，所以一次只能触发50个。

这是代码：

```
$('#do').click(function () {
    var maxAjaxRequests = 50;
    var ajaxRequests = 0;
    var doneCounter = 0;
    var toDo = $('#mytable tr').length;

    $.each($('#mytable > tr'), function (i, v) {
        while (doneCounter < toDo) {
            if (ajaxRequests <= maxAjaxRequests) {
                ajaxRequests++;
                doAsyncStuff($(this), function () {
                    ajaxRequests--;
                    doneCounter++;
                });
            } else {
                setTimeout(function() {
                }, 1000);
            }
        }
    });
});

function doAsyncStuff(tr, completeCallback) {   
    $.ajax({
        url: '/somewhere',
        type: 'POST',
        dataType: 'json',
        data: null,
        contentType: 'application/json; charset=utf-8',
        complete: function () {
            completeCallback();
        },
        success: function (json) {
            // update ui.
        },
        error: function (xmlHttpRequest, textStatus, errorThrown) {
            // update ui.
        }
    });
} 
```

但是浏览器仍然被锁定。它永远不会进入`$.ajax`完整的回调，即使我可以看到请求成功返回（通过 Fiddler）。因此它只是休眠、循环、休眠等，因为回调永远不会返回。

我有一种感觉，整个`doAsyncStuff`函数需要异步？

关于我做错了什么（或者我怎么能做得更好）的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:56:58.993

您正在回调函数`while`内部进行循环`.each`，因此ajax请求比1000多得多，最糟糕的是1000 * 1000。

您可以用不同的时间延迟每个 ajax 请求。

```
$('#do').click(function () {
    $('#mytable > tr').each(function (i, v) {
        var $this = $(this);
        setTimeout(function () {
            doAsyncStuff($this, function () {
               console.log('complete!');
            });
        }, i * 10);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:05:20.600

浏览器由于 WHILE 被锁定...您正在创建一个无限循环。

while循环一遍又一遍地运行，等待增加doneCounter，但是javascript引擎无法执行ajax的成功调用，因为它卡在while中......

```
var callQueue = new Array();
$('#mytable > tr').each(function(key,elem){callQueue.push($(this));});

var asyncPageLoad = function(){
var tr = callQueue.splice(0,1);
$.ajax({
        url: '/somewhere',
        type: 'POST',
        dataType: 'json',
        data: null,
        contentType: 'application/json; charset=utf-8',
        complete: function () {
            completeCallback();
            asyncPageLoad();
        },
        success: function (json) {
            // update ui.
        },
        error: function (xmlHttpRequest, textStatus, errorThrown) {
            // update ui.
        }
    }
};
asyncPageLoad(); 
```

这将一一调用请求。如果您愿意，只需在内部执行一个 for() 循环即可进行 5 次调用？如果浏览器没问题，请增加数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:38:25.297

实际上，我更喜欢在当前请求完成后发送新请求。我使用这种方法转储数据库表（[在这项工作中](http://qeremy.com/mydump/)）。也许它给出了一个想法。

查看[此链接](http://qeremy.com/mydump/table_view.php?table=foo_blog_posts)，选中所有复选框并单击转储！按钮。你可以在[这里](https://github.com/qeremy/mydump/blob/master/table_view.php#L302)找到源代码（见`dumpAll`函数）。

# php - PHPUnit - 在不同的类中模拟静态方法的返回值

> ID：12154094
> 
> 赞同：1
> 
> 时间：2012-08-28T06:48:22.863
> 
> 标签：php, phpunit, static-methods

> **可能重复：**
> [PHPUnit 模拟对象和静态方法](https://stackoverflow.com/questions/2357001/phpunit-mock-objects-and-static-methods)
> [单元测试和静态方法](https://stackoverflow.com/questions/5961023/unit-testing-and-static-methods)

我正在使用 PHPUnit 3.6.10，我似乎无法在[文档](http://www.phpunit.de/manual/3.6/en/test-doubles.html#test-doubles.mock-objects)中找到一个模拟静态方法的好例子。具体来说，我有一个带有方法 a() 的 A 类——称之为 A->a()——它调用 B::b() ，我需要模拟它的返回值。

```
class A {
    function a() {
        return B::b();
    }
}

class B {
    static function b() {
        return 5;
    }
} 
```

a() 的测试函数应如下所示：

```
class A_Test {
    function test_a() {
        // what should the code look like here?
    }
} 
```

因为我们纯粹是测试 A->a() 返回 B::b()，所以我们不关心 B::b() 是如何工作的，所以我们可以模拟 B::b() 的返回值（例如，返回 'foo'）并检查当我们调用 A->a() 时是否返回了 'foo'。如何才能做到这一点？

# asp.net-mvc - 在 MVC 中捕获屏幕图像

> ID：12154096
> 
> 赞同：2
> 
> 时间：2012-08-28T06:48:26.757
> 
> 标签：asp.net-mvc, jquery-ui, screenshot

如何捕获活动屏幕`ASP.Net MVC`？

JQuery 中有什么功能可以解决这个问题吗？

我正在寻找的是在单击按钮时保存屏幕的特定部分（例如父 div 内容）并向用户显示打印对话框，该对话框会将其打印为图像。

我发现了很多帖子，但我正在寻找**MVC 和 JQuery**特定的解决方案。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:09:24.200

如果它是呈现页面中的*屏幕截图*，您可能需要查看 HTML5 画布元素并捕获其中绘制的内容：[https](https://stackoverflow.com/a/6887206/90011) ://stackoverflow.com/a/6887206/90011 。

把它放在视图中：

```
<canvas id="graph" width="200" height="150"></canvas> 
```

Javascript部分：

```
// Send the drawn image to the server
$('#sendBtn').live('click', function () {
    var image = graph[0].toDataURL("image/png");
    image = image.replace('data:image/png;base64,', '');

    $.ajax({
        type: 'POST',
        url: '/Default.aspx/UploadImage',
        data: '{ "imageData" : "' + image + '" }',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function (msg) {
            alert('Image sent!');
        }
    });
}); 
```

源代码取自这篇博客文章：[Send Canvas Content to Your Server](http://www.worldwidewhat.net/2011/06/send-canvas-content-to-server/)

# ios - 如何在 iOS 中为通用应用程序添加新的两个 XIB 文件？

> ID：12154103
> 
> 赞同：1
> 
> 时间：2012-08-28T06:48:55.727
> 
> 标签：ios, cocoa-touch, ios-universal-app

当我在项目开始时创建通用应用程序时，XCode 会自动为 iPhone 和 iPad 创建 ViewController 类和 XIB 文件，例如

```
ViewController.h
ViewController.m

ViewController_iPhone.xib
ViewController_iPad.xib 
```

我需要使用 iPhone 和 iPad XIB 文件添加另一个类。但是当我在 中创建新文件时`XCode`，我只能为一件事选择 XIB 文件。如果我选中 Targeted for iPad 复选框，我只能获取 iPad 的 XIB 文件。

我想同时添加 iPhone 和 iPad XIB 类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:58:58.773

您只需要在检查器中链接 iPad 的 ViewController，如下所示。

使用 Xcode4 将 .xib 链接到类：

打开新添加的 iPad .xib。

在占位符中选择文件的所有者。

在第三个缩略图中，在右侧面板中选择“Identity Inspector”，然后编辑“Custom Class”字段并输入您的类名，如 (SecondViewController)。

之后，您将可以使用 XIB 文件。

我想我的回答可以帮助你。

# html - 如何将带有 head 和 body 标签的 HTML 设置为 iframe

> ID：12154106
> 
> 赞同：0
> 
> 时间：2012-08-28T06:49:00.057
> 
> 标签：html, iframe

我需要将 HTML 设置为 iFrame。（iFrame src 为空。）例如，我从 web 方法调用中得到以下字符串：string s =

```
 <html>
  <head>
  <style type="text/css"> <!-- .some dynamicaly generated css> </style>
  <link id="css1" type="text/css" rel="stylesheet" href="1.css" /></head>

  <body style="padding:0; margin:0;" tabIndex="-1">
--- some HTML elements ------           
  <script type="text/javascript">
---some script ---
  </script>
  </body>
  </html> 
```

我需要将此字符串设置为 iFrame。但是当我使用 iframe.innerHTML 时，它会去除头部和身体标签。

你能帮我吗？我是否需要向字符串添加一些内容或向 iframe 添加一些属性。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:23:05.297

你为什么不使用jquery？，它会更容易。

你可以`var innerHtml = $( 'Your html' );`

然后调用用户函数`$.html( innerHtml );`

# wix - 如何在卸载时删除自定义事件日志？

> ID：12154108
> 
> 赞同：1
> 
> 时间：2012-08-28T06:49:10.430
> 
> 标签：wix, wix3.5, wix-extension

在我目前的任务中，我需要在安装期间创建自定义事件日志并在卸载期间卸载此自定义事件日志。

我可以在安装过程中创建自定义事件日志，但在卸载过程中无法删除它。我找不到任何有关如何删除自定义事件日志的文档。

有人可以让我知道这可能吗？如果可能的话，请指导我如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:35:12.103

我想您正在尝试使用 element.xml 来实现这一点[`<util:EventSource />`](http://wix.sourceforge.net/manual-wix3/util_xsd_eventsource.htm)。如果是这种情况，那么托管该事件源的组件应规范其安装/卸载行为。

如果为安装安排了组件，则将创建事件源。如果要卸载组件，它会完全删除事件源。至少，这是大多数元素在放置在组件内时的工作方式。

如果不是这种情况，请编辑您的问题以添加更多详细信息和一些代码，正如我在上面的评论中提到的那样。

# javascript - 带有浮动子菜单的浮动页脚菜单

> ID：12154111
> 
> 赞同：0
> 
> 时间：2012-08-28T06:49:32.130
> 
> 标签：javascript, html, css

我想使用 JavaScript 和 HTML & CSS 创建一个浮动页脚菜单，以及页脚菜单中元素的其他子菜单。子菜单也应该浮动在鼠标悬停上。有什么办法可以满足这些需求。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:48:19.350

听起来您对 CSS 很陌生（如果您不是，请不要冒犯！）

为了使它更容易，我建议使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)框架——如果你是 CSS 新手，它会为你节省很多时间，并让你避免许多常见的陷阱。

Bootstrap 有一个[Navbar](http://twitter.github.com/bootstrap/components.html#navbar)组件，您可以将其固定在站点底部。我附上了一些示例代码，但我强烈建议您访问 Bootstrap 网站并学习您的方法——这将非常值得您付出努力。

**HTML（确保包含引导样式表和 javascript）**

```
<div class="navbar navbar-inverse navbar-fixed-bottom">
  <div class="navbar-inner">
    <div class="container">
      <button data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar" type="button">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="./index.html" class="brand">Submenu Example</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="">
            <a href="./base-css.html">Normal Item</a>
          </li>
          <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
              Dropup Item
              <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#">Sub Item 1</a></li>
              <li><a href="#">Sub Item 2</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

# css - 如何开始实现foundation 3 css框架？

> ID：12154116
> 
> 赞同：-1
> 
> 时间：2012-08-28T06:49:38.063
> 
> 标签：css, zurb-foundation

我打算使用基础 3 css 框架，但不知道应该从哪里开始。我从设计师那里得到了 jpeg 模型，它是从 scatch 设计的。模型是否需要根据基金会的网格进行设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:51:27.743

它不一定必须通过牢记网格来设计。任何事情都可以通过网格系统实现。这基本上是创建响应式网站的方法，也有助于保持整个页面的一致性。

我还建议以下几点：

1）从foundation 3网站获取您喜欢的模板，然后从它开始。试着看看html结构是怎样的，然后。2) 尝试通过在 app.css 中添加属性来更改背景、颜色（最好不要更改 Foundation.css 文件）。3）使用诸如firebug或浏览器中内置的“检查元素”之类的工具来找出正在使用的css属性，您可以更改它。4）你需要探索它至少几个小时。

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:08:41.520

最好在此处查看 Foundation 的文档：http: [//foundation.zurb.com/docs/grid.php](http://foundation.zurb.com/docs/grid.php)

# asp.net-mvc-3 - 在没有隐藏字段的情况下更新 EF4 实体上的单个属性

> ID：12154120
> 
> 赞同：3
> 
> 时间：2012-08-28T06:49:47.533
> 
> 标签：asp.net-mvc-3, entity-framework-4

我正在使用 EF4（Db First），并且我有一个具有许多不可为空属性的实体。

在编辑表单 (Razor/MVC3) 中，我希望只允许编辑其中一个属性，而不允许编辑其他属性。

为了让它工作，我必须为`@Html.HiddenFor(...)`我的每个其他不能为空的属性添加语句，否则我会在 SaveChanges() 上收到错误。

有没有一种简单的方法可以将 ID 隐藏在视图上，即可以编辑的属性，然后只更新该属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T06:55:13.637

在这种情况下，您需要做的就是将您正在编辑的实体的 ID 包含为隐藏字段以及您实际要编辑的属性的文本字段：

```
@using (Html.BeginForm())
{
    @Html.HiddenFor(x => x.ID)
    @Html.EditorFor(x => x.PropertyYouWannaEdit)
    <button type="submit">Update</button>
} 
```

然后在相应的控制器操作中，您可以从数据库中检索需要编辑的实体，更新需要编辑的属性的值并保存更改。

```
[HttpPost]
public ActionResult Update(SomeEntity model)
{
    SomeEntity entityToEdit = db.GetEntity(model.ID);
    entityToEdit.PropertyYouWannaEdit = model.PropertyYouWannaEdit;
    db.Update(entityToEdit);
    return RedirectToAction("Success");
} 
```

但我个人会使用视图模型和[AutoMapper](http://automapper.org/)来处理这种情况。因此，我将首先设计一个代表我的视图要求的视图模型，并包括只需要编辑的属性：

```
public class MyEntityViewModel
{
    public int ID { get; set; }
    public string Property1ToBeEdited { get; set; }
    public string Property2ToBeEdited { get; set; }
    ...
} 
```

然后有相应的视图：

```
@model MyEntityViewModel
@using (Html.BeginForm())
{
    @Html.HiddenFor(x => x.ID)

    @Html.EditorFor(x => x.Property1ToBeEdited)
    @Html.EditorFor(x => x.Property2ToBeEdited)
    ...

    <button type="submit">Update</button>
} 
```

最后是 2 个控制器操作（GET 和 POST）：

```
public ActionResult Update(int id)
{
    // Fetch the domain model that we want to be edited from db
    SomeEntity domainModel = db.GetEntity(id);

    // map the domain model to a view model
    MyEntityViewModel viewModel = Mapper.Map<SomeEntity, MyEntityViewModel>(domainModel);

    // pass the view model to the view
    return View(viewModel);
}

[HttpPost]
public ActionResult Update(MyEntityViewModel model)
{
    if (!ModelState.IsValid)
    {
        // validation failed => redisplay view so that the user can fix the errors
        return View(model);
    }

    // fetch the domain entity that needs to be edited:
    SomeEntity entityToEdit = db.GetEntity(model.ID);

    // update only the properties that were part of the view model,
    // leaving the others intact
    Mapper.Map<MyEntityViewModel, SomeEntity>(model, entityToEdit);

    // persist the domain model
    db.Update(entityToEdit);

    // we are done   
    return RedirectToAction("Success");
} 
```

# iphone - 在 iphone 的媒体播放器中播放 rtsp 视频

> ID：12154122
> 
> 赞同：0
> 
> 时间：2012-08-28T06:49:57.520
> 
> 标签：iphone, media-player, rtsp

我有来自 Github 的 RtspFrames 的源代码。我已经从这个链接下载了源代码：

[https://github.com/mooncatventures-group/RtspFrames-test](https://github.com/mooncatventures-group/RtspFrames-test)

我想在 iphone 的自定义媒体播放器中播放 rtsp 视频如何在这段代码中实现？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:16:31.257

您可能想查看我们的 github 存储库中的一些其他项目，ffplayer-tests 或 rtspplay 可能更适合您想要的。

# android - 在 android 中使用 OpenCV 运行 C/C++ 代码

> ID：12154123
> 
> 赞同：0
> 
> 时间：2012-08-28T06:49:59.953
> 
> 标签：android, opencv, java-native-interface, native

我不知道我是否有道理。但是现在只想我可以`c/c++`在不需要编写`JNI wrapper`或使用`Native Activity`方式的情况下在android中运行代码吗？

我的意思是，我有一个`C++ Template Matching code`包含 main 函数的简单函数，我用它`g++`在终端中运行它。

现在我希望这个模板匹配代码在 android usng 中运行`NDK`。有什么办法吗？我用谷歌搜索了很多，但他们只是使用 JNI 包装器或使用`SWIG`JNI 包装器，但实际上无法进入其中任何一个。我需要更简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:08:00.797

如果你有一部 root 手机，你可以像在任何 linux 机器上一样编译和运行程序，从`adb shell`.

但是，这需要一些关于 Linux 的知识。

所以，开始：

*   根你的手机（强制它给你管理员权限）。这对于开发人员的手机/主板来说很容易，而对于在街下的商店购买的普通手机来说，这很容易。

*   为 android 编译您的应用程序并从 adb 运行它，就像您在 linux shell 中一样。

这是有关此事的更详细答案

[如何将 C 编译成可执行的二进制文件并从 Android Shell 在 Android 中运行？](https://stackoverflow.com/questions/9868309/how-can-i-run-c-binary-executable-file-in-android-from-android-shell)

# database - 如何自动填充 SQLAlchemy 数据库字段？(Flask-SQLAlchemy)

> ID：12154129
> 
> 赞同：35
> 
> 时间：2012-08-28T06:50:19.430
> 
> 标签：database, postgresql, sqlalchemy, flask, flask-sqlalchemy

我有一个简单的用户模型，定义如下：

```
# models.py
from datetime import datetime
from myapp import db

class User(db.Model):
  id = db.Column(db.Integer(), primary_key=True)
  email = db.Column(db.String(100), unique=True)
  password = db.Column(db.String(100))
  date_updated = db.Column(db.DateTime())

  def __init__(self, email, password, date_updated=None):
    self.email = email
    self.password = password
    self.date_updated = datetime.utcnow() 
```

当我创建一个新的用户对象时，我的`date_updated`字段被设置为当前时间。我想做的是这样*当*我保存对我的用户对象的更改时，我的`date_updated`字段会自动设置为当前时间。

我已经搜索了文档，但是对于我的生活，我似乎找不到任何对此的参考。我对 SQLAlchemy 很陌生，所以我真的没有任何经验可以借鉴。

希望得到一些反馈，谢谢。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-28T08:46:52.190

只需向列字段添加`server_default`或参数：`default`

```
created_on = db.Column(db.DateTime, server_default=db.func.now())
updated_on = db.Column(db.DateTime, server_default=db.func.now(), server_onupdate=db.func.now()) 
```

我更喜欢`{created,updated}_on`列名。;)

SQLAlchemy 文档关于[列插入/更新默认值](http://docs.sqlalchemy.org/en/rel_1_0/core/defaults.html#server-side-defaults)。

**[编辑]：**更新代码以`server_default`在代码中使用参数。

**[编辑 2]：**替换`onupdate`为`server_onupdate`参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-27T05:50:37.750

```
date_created  = db.Column(db.DateTime,  default=db.func.current_timestamp())
date_modified = db.Column(db.DateTime,  default=db.func.current_timestamp(),
                                       onupdate=db.func.current_timestamp()) 
```

# javascript - 如何使用 javascript 使特定的 div 可选（复制/粘贴）？

> ID：12154130
> 
> 赞同：2
> 
> 时间：2012-08-28T06:50:19.813
> 
> 标签：javascript, html, css

`onselectstart="return false;"`当我们已经在 html 页面中 时，有谁知道如何使用 javascript 使特定的 div 可选（复制/粘贴）

```
 <head>
           <script type="text/javascript">              

                function DisableSelection(){
                    var srcType = event ? ( event.srcElement ? event.srcElement.tagName: null ) : null;
                        if(srcType && ( srcType == "text" || srcType == "textarea" ) )
                        {
                        return true;
                        }
                    return false;

                    }

            </script>
    </head>

<body onContextMenu="return false" onselectstart="return DisableSelection();"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:10:05.910

```
[DIV].onselectstart="";
[DIV].oncontextmenu=""; 
```

**编辑**：

刚刚意识到这可能是您的页面...

```
function canSelect(e)
{
    e=e?e:event;
    if(e.stopPropagation) e.stopPropagation();
    else e.cancelBubble=true;
    return true;
} 
```

然后使用

```
[DIV].onselectstart=canSelect; 
```

或者

```
<div onselectstart="return canSelect(event);"> 
```

# c# - Linq 和日期时间验证

> ID：12154132
> 
> 赞同：0
> 
> 时间：2012-08-28T06:50:21.793
> 
> 标签：c#, sql-server, datetime

我正在尝试使用 linq 在 sqlserver 中插入一个 DateTime 值。csharp 端的 DateTime 值可能为空。sqlserver 中对应的字段是可以为空的日期时间字段。以下是我的代码：

```
using (var dataContext = GetDataContext())
{
    DateTime dateTime;
    var combinedWorkBasket = new CombinedWorkBasket()
    {

        FirstName = combinedWorkbasketData.FirstName,
        LastName = combinedWorkbasketData.LastName,
        Address1 = combinedWorkbasketData.Address1,
        RetirementDate = Convert.ToDateTime(combinedWorkbasketData.RetirementDate),

    };
    dataContext.CombinedWorkBaskets.InsertOnSubmit(combinedWorkBasket);
    dataContext.SubmitChanges();
} 
```

当 combineWorkbasketData.RetirementDate 碰巧为 null 时，它是一个字符串值，可以是有效日期或 null，然后 sqlserver 会抛出错误，指出日期应该在范围内。当 combineWorkbasketData.RetirementDate 恰好为空时，Convert.ToDateTime(combinedWorkbasketData.RetirementDate) 转换为一些无效数据值。我尝试了以下，仍然是同样的问题。

```
RetirementDate = DateTime.TryParse(combinedWorkbasketData.RetirementDate, out temp) ? Convert.ToDateTime(combinedWorkbasketData.RetirementDate) : Convert.ToDateTime(null) 
```

我只想完成以下操作：当 combineWorkbasketData.RetirementDate 是有效日期时插入 RetirementDate，否则不要插入它，而是插入其他值，例如 Firstname 等

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:58:45.607

问题是 datetime 不保存空值，但它保存最小时间，即类似这样的东西。'1/1/0001 12:00:00 AM'。而不是直接传递日期时间尝试使用

```
DateTime.MinValue== Convert.ToDateTime(combinedWorkbasketData.RetirementDate)?Null:Convert.ToDateTime(combinedWorkbasketData.RetirementDate) 
```

我还没有测试代码使用它作为参考你可能需要一些改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:56:15.927

您可能希望使用可为空的数据类型，但这仅在您的数据库允许 RetirementDate 列中的空值时才有帮助。此外，您还必须使 CombinedWorkBasket 类中的 RetirementDate 字段为空。

```
using (var dataContext = GetDataContext())
{
    DateTime? dateTime;
    var combinedWorkBasket = new CombinedWorkBasket()
    {

        FirstName = combinedWorkbasketData.FirstName,
        LastName = combinedWorkbasketData.LastName,
        Address1 = combinedWorkbasketData.Address1,
        RetirementDate = combinedWorkbasketData.RetirementDate != null ?
            Convert.ToDateTime(combinedWorkbasketData.RetirementDate) : null;

    };
    dataContext.CombinedWorkBaskets.InsertOnSubmit(combinedWorkBasket);
    dataContext.SubmitChanges();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:57:46.010

我认为 RetirementDate 必须是可空类型，实体框架才能插入 DBNull。

所以让它像

```
public class CombinedWorkBasket
{
    // other fields
    public DateTime? RetirementDate { get; set; }
} 
```

然后尝试根据逻辑将 Null 分配为数据库中的关联列作为“允许 Null”。

希望它会插入null。

# java - 是否有基于 Findbugs Report 的开源插件来标记 JIRA 中的问题？

> ID：12154133
> 
> 赞同：0
> 
> 时间：2012-08-28T06:50:26.607
> 
> 标签：java, eclipse, jira, findbugs

我正在为 JIRA/Eclipse 寻找一个工具/插件，它可以，

1.  在代码上执行 FindBugs。
2.  根据生成的报告，根据情况提供一个 UI 来标记 JIRA 中的错误或改进。请注意，文本应直接从报告复制到 JIRA 中的标记问题。

在互联网上四处寻找，但找不到。请建议是否通过任何其他工具（如 PMD 等）满足此类要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:36:09.350

其他答案建议您应该创建一个任务来处理修复 FindBugs 警告。我什至不确定你应该这样做。FindBugs 发现的问题甚至可能不是问题，即使它们是问题，也可能对正在开发的系统的质量几乎没有影响。它们真的应该由人来审查，而不是盲目地添加到错误跟踪器中作为要修复的东西。

我的建议是将 FindBugs（和任何其他静态分析工具）合并到您的构建过程以及代码审查过程中。作为构建过程的一部分，它会在每次构建后生成报告。当开发人员在模块上工作时，他们将能够查阅这些模块的 FindBugs 报告并根据需要处理它们。作为代码审查过程的一部分，开发人员（作者或审查者）可以在审查中的代码上手动启动 FindBugs，分析报告，并将特定问题作为操作项包含在内，以使用您团队的方法。

也就是说，如果您使用的是 FindBugs 2.0，[似乎有一个 JIRA 插件可以帮助您完成您想做的事情](http://findbugs.sourceforge.net/findbugs2.html#plugins)。它似乎支持有限，必须从源代码构建，但它可能值得一看。不过，正如我上面提到的，我不会推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:48:32.217

这真的有意义吗？我的意思是，为每个 FindBugs 标记创建一个 JIRA 问题将花费更多时间，因为在大多数情况下会立即修复它。更不用说这将导致的大量问题。开发人员将不得不花费更多时间来关闭 JIRA 问题而不是修复它们。

我会为此创建一个问题：“在发布前修复 FindBugs 警告”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:22:07.833

我想我会使用一个 JIRA Task 说：

“运行 FindBugs。在某处记录报告。修复最明显的问题。再次运行 FindBugs 并记录最终报告。” 这样每个人都可以看到工作已经完成，以及它是什么工作。

将 FindBugs 发现的每个问题的信息存储在 JIRA 问题中会导致大量问题，其中许多问题很快就会过时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T18:18:58.943

对于第一部分，您可以使用任何语言（我会使用 python）编写脚本来执行 FindBugs 并以您希望的任何方式操作生成的报告，然后通过使用[Jira 远程 API](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)创建问题或单个其他人建议的问题。要选择最适合的 API，请查看 Jira 版本的手册以查看完整的 API 功能。

# javascript - 不选择在令牌输入中已经选择的名称有什么想法吗？

> ID：12154136
> 
> 赞同：1
> 
> 时间：2012-08-28T06:50:33.797
> 
> 标签：javascript, ruby, ruby-on-rails-3, coffeescript, jquery-tokeninput

有什么想法不选择令牌输入中已经选择的名称吗？例如，首先我在搜索 m 时选择 mango。下次当我搜索 m Mango 时，不应该显示芒果，因为已经选择了芒果。有什么想法吗？

```
 <%= f.text_field :plan_tokens, data: {load: @customer.plans} %> 
```

我有我的 js 像这样的 jQuery ->

```
 $('#customer_plan_tokens').tokenInput '/plans.json'
    theme: 'facebook'
    prePopulate: $('#customer_plan_tokens').data('load') 
```

在哪里放置 preventDuplicates:true。我确实尝试过，但出现错误！

我从

[http://railscasts.com/episodes/258-token-fields](http://railscasts.com/episodes/258-token-fields)

[http://railscasts.com/episodes/258-token-fields-revised](http://railscasts.com/episodes/258-token-fields-revised)

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:22:24.917

当您在 JavaScript 中初始化 tokeninput 时，您可以添加`preventDuplicates: true`，这将防止选择重复项，但它们仍会显示在结果中 ( [demo](http://loopj.com/jquery-tokeninput/demo.html#prevent-duplicates) )。

所以像：

```
$(...).tokenInput("url", { preventDuplicates: true, otherOptionsHere }); 
```

如果您根本不希望显示它们，则可能可以为`onResult`回调编写一些代码来检查字段的值并删除已经存在的那些。

**编辑**：由于您使用 CoffeeScript，请尝试

```
$('#customer_plan_tokens').tokenInput '/plans.json'
   theme: 'facebook'
   prePopulate: $('#customer_plan_tokens').data('load')
   preventDuplicates: true 
```

# jquery - Backbone JS 中的动态模板加载

> ID：12154138
> 
> 赞同：1
> 
> 时间：2012-08-28T06:50:47.760
> 
> 标签：jquery, ruby-on-rails, backbone.js, underscore.js, jst

在我目前的项目中，我正在使用 ROR、Backbone、Underscore JS 和 JQuery。在其中一个视图中，我将 JST 模板设置如下

```
ABC.Views.BoardView = Backbone.View.extend({

    template : changeBoard,

    // el: '#boardHolder',

    events : {
        'click .count' : 'showPlaced',
        'click #newCard' : 'newCardForm',
        'click #showCardsOverview' : 'showCardsOverview'
    }, 
```

它继续...

另外我在页面底部有一个功能如下

```
changeBoard: function(){
        var params = window.location.search.replace( "?", "" );
        var param= params.split("=");
        var boardSize = param[1];
        //return boardSize;
        if(boardSize === 4){
            'analysis/board44'
        }else{
            'analysis/board'
        }
    } 
```

为什么我写这个函数是为了从 URL 中加载不同的 JST 模板来获取参数。但是这种方式对我不起作用。它给了我以下错误

```
ReferenceError: changeBoard is not defined
[Break On This Error]   

template : changeBoard, 
```

有谁知道如何通过获取 URL 参数来加载动态 JST 模板

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:12:28.797

检查此示例：模板：空，

```
 events: {
    },
    initialize: function () {
        if (changeTemplate) {
            this.template = "#PublicationGroupStatTemplate";
            changeTemplate = false;
        } else {
            this.template = "#PublicationGroupReportTemplate";
        } 
```

但是，您可以在函数中的 if 语句中执行相同的操作.. this.changeboard。代码将类似于：初始化：this.changeboard。希望能帮助到你。而且还不算晚！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:05:20.987

Ruby 和 Javascript 之间存在一些语法问题：

```
template: changeBoard, 
```

上面指向一个名为 changeBoard 的变量。稍后在您的视图中，您定义了一个名为 changeBoard 的函数。这与在 Javascript 中通过 functionName() 调用函数不同。我可以理解这种混淆，因为 Ruby 有可选的括号，而 Javascript 在调用函数时需要括号。

还：

```
if(boardSize === 4){
  'analysis/board44'
}else{
  'analysis/board'
} 
```

上面的函数将返回 undefined，因为没有给出 return 关键字。同样，这是 Javascript 而不是 Ruby :)

你想要的是：

```
changeBoard: function(){
  var params = window.location.search.replace( "?", "" );
  var param= params.split("=");
  var boardSize = param[1];
  //return boardSize;
  if(boardSize === 4){
    return 'analysis/board44';
  } else {
    return 'analysis/board';
  }
} 
```

最好在视图的初始化函数中设置动态模板：

```
ABC.Views.BoardView = Backbone.View.extend({

  initialise: function(){
    this.template = this.changeBoard();
  }
}); 
```

如果 boardSize 不断变化，则应在渲染之前设置模板：

```
ABC.Views.BoardView = Backbone.View.extend({

  render: function(){
    this.template = this.changeBoard();
    //render code continues here
  }
}); 
```

HTH，祝你好运:)

# perl - Coro + Coro::LWP 冻结

> ID：12154140
> 
> 赞同：0
> 
> 时间：2012-08-28T06:50:52.097
> 
> 标签：perl, asynchronous, strace

我有使用 Coro、Coro::LWP 和 LWP::UserAgent 的脚本。我提出了一系列请求并通过 Coro 的 async {} 运行它们。然后我使用他们的结果并保存到文件。脚本运行数小时或有时数分钟，然后冻结。我已经进行了 strace 查找以了解它在做什么。有一堆动作，但在保存结果后，在冻结之前有这个动作：

```
rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
nanosleep({1211417888, 0}, {1211354002, 168413065}) = ? ERESTART_RESTARTBLOCK (To be restarted)
--- SIGWINCH (Window changed) @ 0 (0) ---
restart_syscall(<... resuming interrupted call ...>) = ? ERESTART_RESTARTBLOCK (To be restarted)
--- SIGWINCH (Window changed) @ 0 (0) ---
restart_syscall(<... resuming interrupted call ...> 
```

理解冻结有什么奇怪的吗？

在 PerlMonks 上交叉[发布](http://www.perlmonks.org/?node_id=989741)。

已解决：这是一个奇怪的睡眠时间，有非常多的秒数（比如 4000 天）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:05:29.060

Coro 是一个协作式多任务库，因此协程必须明确地将控制权交给调度程序。您对`sleep`/的调用会`usleep`阻塞整个 Perl 进程并阻止其他代码运行；在这种情况下，您可以执行仅阻塞当前协程的“非阻塞”睡眠：

```
use Coro;
use AnyEvent;
...
Coro::AnyEvent::sleep 5; 
```

除非你绝对需要 LWP 的接口，顺便说一句，我强烈建议切换到[AnyEvent::HTTP](http://search.cpan.org/perldoc?AnyEvent%3a%3aHTTP)。Coro::LWP 有点 hack，它对 LWP 内部高度敏感并且容易冻结。AnyEvent::HTTP 解决了我的程序锁定的几个问题，并且还提供了对 SSL 证书验证和代理使用的更好控制，包括 socks 代理。它只是一个整体上更好、更有特色的模块。

# mobile - 如何使用 LWUIT 在单击按钮时显示图像

> ID：12154141
> 
> 赞同：1
> 
> 时间：2012-08-28T06:50:52.707
> 
> 标签：mobile, java-me, lwuit, lwuit-form, lwuit-button

我正在尝试使用 LWUIT 编写一个应用程序，我希望在单击按钮时显示图像。我有以下代码。但是如果按钮被单击两次，我会得到一个例外。请帮助我显示图像而不给出任何例外。

```
 final Form f = new Form("Static TAF");

        Button TrackMe = new Button("TrackMe");

        Image TrackMeicon = null;
        TrackMeicon = Image.createImage("/hello/follow.jpeg");
        final Label TrackMeLabel = new Label(TrackMeicon);    

        TrackMe.addActionListener(new ActionListener()
        {

        public void actionPerformed(ActionEvent ae) 
        {
                 System.out.println("Removing the previous Images");
                 f.addComponent(TrackMeLabel); 
        }
        }); 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:04:50.613

当您第一次单击按钮时，图像会添加到表单中。当您第二次单击时，该图像已存在于表单中。所以，它会抛出`"Component already exists"`异常。

你的动作监听器应该是

```
TrackMe.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent ae) {
              System.out.println("Removing the previous Images");
              f.removeComponent(TrackMeLabel); 
              f.addComponent(TrackMeLabel); 
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:02:56.050

```
TrackMe.addActionListener(new ActionListener(){
  public void actionPerformed(ActionEvent ae) {
          System.out.println("Removing the previous Images");
          final Label TrackMeLabel = new Label(TrackMeicon); 
          f.removeAll();
          f.addComponent(TrackMeLabel); 
  } 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:57:29.797

如果你只想添加一张图片，你可以使用这个：

……

```
TrackMe.addActionListener(new ActionListener(){
  public void actionPerformed(ActionEvent ae) {
          if(!f.containes(TrackMeLabel))
             f.addComponent(TrackMeLabel); 
  } 
```

如果你想要一些图像，你需要这样的东西：

……

```
 TrackMe.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent ae) {
               Image TrackMeicon = null;
               TrackMeicon = Image.createImage("/hello/follow.jpeg");
               Label TrackMeLabel = new Label(TrackMeicon);   
               f.addComponent(TrackMeLabel); 
      } 
```

# mysql - 哪个 sql 会更快，为什么？

> ID：12154142
> 
> 赞同：0
> 
> 时间：2012-08-28T06:51:06.633
> 
> 标签：mysql, sql

假设我有一个`student`表包含`id`, `class`,`school_id`有 1000 条记录。

有3所学校和12个班级。

这两个查询中的哪一个会更快（如果有差异）

查询一：

```
SELECT * FROM student WHERE school = 2 and class = 5; 
```

查询 2：

```
SELECT * FROM student WHERE class = 5 and school = 2; 
```

注意：我只是更改了 2 个条件的位置`WHERE`。

那么哪个会更快，以下是真的吗？

-> query1 中的可能记录数为 333

-> query2 中的可能记录数为 80。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T06:55:02.953

一点点都没有关系。1000 条记录是一个真正的小型数据库表，如果有任何差异，您需要从这种脑死亡的 DBMS 升级。

一个体面的 DBMS 应该已经从表中收集了统计信息（或者 DBA 会作为定期调整的一部分来完成），并且`where`子句的顺序是无关紧要的。

执行引擎将选择最快减少基数（即减少候选行组）的引擎。这意味着（假设班级和学校大致均匀分布）`class = 5`过滤器将首先发生，无论`select`语句中的顺序如何。

更深入地解释基数问题，对于这 1000 条记录的大致均匀分布，每所学校将有 333 条记录，每个班级将有 83 条记录。

DBMS 将首先过滤给您最小结果集的内容。所以它倾向于使用类过滤器。这会立即将候选行列表减少到大约 83 行。然后，只需将那些拥有除 2 之外的学校的人扔掉就很简单了。

在这两种情况下，您最终都会得到相同的*最终*行集，但初始过滤器通常更快，因为它可以使用索引来仅选择所需的行。另一方面，第二个过滤器很可能以较低效率的方式遍历这些行，因此您可以越快减少行数越好。

如果你*真的*想知道，你需要*测量*而不是猜测。这是 DBA 的主要职责之一，调整数据库以优化查询执行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T06:54:22.890

这两个查询完全相同:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T06:59:04.717

# 假想; 教授 DB 概念

**“您的数据库如何使用*基数*优化您的查询”**

因此，它们*基本上*是相同的，但我会提到一个暗示“*为什么*”的想法，这实际上会引入一个好的 RDBMS 概念。

我们**假设您的 RDBMS****严格**按照您指定的顺序使用 WHERE 子句。

在这种情况下，最佳查询将是首先指定具有**最大基数**的列的查询。这意味着`class=5`首先指定会更快，因为它会更快*地*从考虑中排除行，这意味着如果行的“类”列不包含 5（这在统计上比不包含 2 的“学校”列更有可能），那么它甚至不需要评估“学校”列。

然而，回到现实，您应该知道，几乎*所有*现代关系数据库管理系统都执行所谓的“构建查询计划”和“编译查询”。这包括评估 WHERE 子句中指定的列的基数（以及可用的索引等）。所以本质上，说它们是*相同*的可能是正确的，结果的数量也将是相同的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T06:56:52.863

受影响的行数不会也可能不会仅仅因为您对 sql 语句的“where 子句”中的条件重新排序而改变。执行时间也不会受到影响，因为 sql-server 将首先查找匹配的索引。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-28T06:57:28.313

第一个查询比第二个查询执行得更快，因为在 where 子句中它首先过滤学校，因此以后更容易获取班级详细信息

# git - 如何为“git pull”配置本地分支：

> ID：12154144
> 
> 赞同：9
> 
> 时间：2012-08-28T06:51:27.067
> 
> 标签：git

我正在尝试创建一个名为 springdevelopment 的分支并将其代码推送到 git。

```
git checkout -b springdevelopment 
git add .

git commit -m 'initial commit'
git push origin springdevelopment 
git checkout --track origin/springdevelopment 
```

当我执行 git remote show origin 时。我在本地分支机构 git pull 部分缺少“春季开发”。

你能解释一下发生了什么，我做错了什么。

提前感谢您提供的宝贵信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T06:59:58.477

```
git checkout -b springdevelopment 
git add .

git commit -m 'initial commit'
git push -u origin springdevelopment 
```

无需这样做：

```
git checkout --track origin/springdevelopment 
```

您以后可以随时更新跟踪：

```
git branch --set-upstream-to origin/springdevelopment 
```

将您的 refspec 更新为：

```
[remote "origin"]
    url = git@github.com:user/project.git
    fetch = refs/heads/*:refs/remotes/origin/* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-07T00:54:31.697

我`git pull`没有从正确的遥控器中拉出。我意识到我添加了第二个上游`github`，并且超过了我的“主”分支。

所以我修改了我的`.git/config`文件：

```
[branch "master"]
    remote = github
    merge = refs/heads/master 
```

至：

```
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:21:00.093

虽然我认为有一个选项可以让推送更新跟踪引用（`refs/remote/...`），但我现在在文档中看不到它的任何痕迹。打电话

```
git fetch 
```

在推送更新它们之后。

# c# - 像 C# 在构造函数中一样在 VB.Net 中添加事件处理程序？

> ID：12154149
> 
> 赞同：1
> 
> 时间：2012-08-28T06:51:45.957
> 
> 标签：c#, vb.net

我在 C# 中有一个代码片段，我想将其转换为 VB.Net

```
public class ModuleAViewOne : UserControl
{
    public ModuleAViewOne(ModuleAViewOneViewModel model)
    {
        InitializeComponent();

        this.Loaded += (s, e) =>
        {
            this.DataContext = model;
        }
    }
} 
```

我以这种方式将其转换为 VB.Net

```
Partial Public Class ModuleAViewOne
 Inherits UserControl

Public Sub New(ByVal model As ModuleAViewOneViewModel)
        InitializeComponent()

        Me.model = model

        AddHandler Loaded, AddressOf _Loaded
    End Sub

    Dim model As ModuleAViewOneViewModel

    Private Sub _Loaded(ByVal s As Object, ByVal e As RoutedEventArgs)
        DataContext = model
    End Sub
End Class 
```

但是可以在构造函数中写入事件，这样我就不必创建新的全局`model`变量了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:14:28.777

您可以简单地使用 lambda 表达式

```
Public Sub New(model As ModuleAViewOneViewModel)
    InitializeComponent()

    AddHandler Loaded, Sub(s, e) DataContext = model
End Sub 
```

* * *

或者，由于 VB 10.0（随 Visual Studio 2010 提供），您可以使用多行 lambda：

```
Public Sub New(model As ModuleAViewOneViewModel)
    InitializeComponent()

    AddHandler Loaded, Sub(s, e) 
                          DataContext = model
                       End Sub
End Sub 
```

# sql-server - sql：如果输入可以在表的任何字段/列中，如何选择一行？

> ID：12154150
> 
> 赞同：1
> 
> 时间：2012-08-28T06:51:46.023
> 
> 标签：sql-server, tsql, select

如果我有这个表`TableABC`并且它有一些字段/列，而不是说它有很多字段/列`col1, col2, col3.....`说 upto `10`or `20`，那么计数现在并不重要。关键是，我想知道，如果我们要求用户输入，说`@input varchar(max)`或类似的东西，我想知道的是......

我如何选择一行，如果此输入出现在该行的任何列中，我的意思是如果`col1=@input`还有 if`col2=@input`等也会选择该行..

现在正如我所说的列数无关紧要，重要的是我们不提前知道列，以便我们可以做类似的事情

```
where
col1 = @input
or
col2 = @input 
```

我们不能那样做。我已经通过说从表中获取列的名称

```
SELECT [name] FROM sys.Columns WHERE [Object_id]=Object_id(N'TableABC') 
```

这会给我们所需表中的 col 名称，现在我不知道我们可以用它们做什么，或者这在我描述的场景中是否有用？那么，解决方案是什么？

最后，如果有人可能会问，我将在哪里使用它，或者我的要求是什么，让我明确它不是为了（至少到目前为止！）实际实施，我只是想知道它是否可能，如果是这样， 如何？我希望我说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:59:46.460

您可以按照您的建议使用游标遍历列名，然后构建动态查询，稍后执行它，如下所示：

```
DECLARE @Expression varchar(max)
DECLARE @ColumnName varchar(max)
SELECT @Expression = 'WHERE '

DECLARE db_cursor CURSOR FOR SELECT [name] FROM sys.Columns WHERE [Object_id]=Object_id(N'TableABC')
OPEN db_cursor   
FETCH NEXT FROM db_cursor INTO @ColumnName   

WHILE @@FETCH_STATUS = 0   
BEGIN
    SELECT @Expression = @Expression + @ColumnName + ' = ' + @input + ' AND '

    FETCH NEXT FROM db_cursor INTO @ColumnName   
END 

CLOSE db_cursor   
DEALLOCATE db_cursor

SELECT @Expression
-- EXEC(@Expression) etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:01:58.510

您可以检查存储过程中的每一列并`Where`使用条件生成`IF..ELSE`条件：

```
if @Col1 is not null  
begin   
print 'type'
if @Cond is not null
    Set @Cond = @Cond + ' and '

    SET @Cond =@Cond + ' col1 =''' +@Col1 +''''  
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:00:29.933

如果您正在寻找在任何字段中修改了某些内容的客户，您应该考虑从表中选择 XML 文档，然后对文档进行一些操作。我附上了一个示例，您可以对其进行修改以达到您的目的。

我相信这里有很多 XML 专家可以更好地编写这个，但这是一般的想法。没有循环，没有游标。

```
 /*

    CREATE SOME DUMMY DATA
*/  

CREATE TABLE _TEST (CustomerID int, COL1 varchar(255), COL2 varchar(255),COL3 varchar(255),COL4 varchar(255))

INSERT INTO _TEST SELECT 101, NULL, NULL, NULL, NULL
INSERT INTO _TEST SELECT 102, NULL, NULL, NULL, NULL
INSERT INTO _TEST SELECT 103, NULL, 'input test', NULL, NULL
INSERT INTO _TEST SELECT 104, NULL, NULL, NULL, 'input test'
INSERT INTO _TEST SELECT 105, NULL, NULL, NULL, NULL
INSERT INTO _TEST SELECT 106, 'input test', NULL, NULL, NULL

/*
    FORM THE XML
*/

DECLARE @xmldoc XML

SET @xmldoc = (select * from _TEST FOR xml raw,root('Sample')) 

/*
    GET THE CUSTOMERS THAT CHANGED SOMETHING IN ANY OF THE FIELDS
*/ `SELECT CUSTOMERID FROM 
    (
        select
           X.value('@CustomerID[1]','int') as CUSTOMERID,
           X.query('count(@*[2])').value('.','int') as MODIFIED
        from
           @xmldoc.nodes('/Sample/row') as A(X) 
    ) RES
WHERE 
    MODIFIED = 1` 
```

我希望这会有所帮助，丹

# django - Django 文件上传进度

> ID：12154151
> 
> 赞同：5
> 
> 时间：2012-08-28T06:51:48.533
> 
> 标签：django, file-upload, progress

我已经使用 Django File Upload Progress 过程来获取进度但出现错误`pliks.upload" does not define a "UploadProgressCachedHandler" upload handler backend`。

我遵循的步骤是

1）创建一个文件夹上传并添加文件上传处理程序（UploadProgressCachedHandler.py）。

```
 from django.core.files.uploadhandler import FileUploadHandler
    from django.core.cache import cache
    class UploadProgressCachedHandler(FileUploadHandler):
        """
        Tracks progress for file uploads.
        The http post request must contain a header or query parameter, 'X-Progress-ID'
        which should contain a unique string to identify the upload to be tracked.

        Copied from:
        http://djangosnippets.org/snippets/678/

        See views.py for upload_progress function...
        """

        def __init__(self, request=None):
            super(UploadProgressCachedHandler, self).__init__(request)
            self.progress_id = None
            self.cache_key = None

        def handle_raw_input(self, input_data, META, content_length, boundary, encoding=None):
            self.content_length = content_length
            if 'X-Progress-ID' in self.request.GET :
                self.progress_id = self.request.GET['X-Progress-ID']
            elif 'X-Progress-ID' in self.request.META:
                self.progress_id = self.request.META['X-Progress-ID']
            if self.progress_id:
                self.cache_key = "%s_%s" % (self.request.META['REMOTE_ADDR'], self.progress_id )
                cache.set(self.cache_key, {
                    'length': self.content_length,
                    'uploaded' : 0
                })

        def new_file(self, field_name, file_name, content_type, content_length, charset=None):
            pass

        def receive_data_chunk(self, raw_data, start):
            if self.cache_key:
                data = cache.get(self.cache_key)
                data['uploaded'] += self.chunk_size
                cache.set(self.cache_key, data)
            return raw_data

        def file_complete(self, file_size):
            pass

        def upload_complete(self):
            if self.cache_key:
                cache.delete(self.cache_key) 
```

2）将 UploadProgressCachedHandler 添加到您的 settings.py 文件中：

```
from django.conf import global_settings
FILE_UPLOAD_HANDLERS = ('pliks.upload.UploadProgressCachedHandler', ) + \
    global_settings.FILE_UPLOAD_HANDLERS 
```

3）将代码添加到view.py

```
 from django.core.cache import cache
    from django.http import HttpResponse, HttpResponseServerError

    def upload_progress(request):
        """
        A view to report back on upload progress.
        Return JSON object with information about the progress of an upload.

        Copied from:
        http://djangosnippets.org/snippets/678/

        See upload.py for file upload handler.
        """
        #import ipdb
        #ipdb.set_trace()
        progress_id = ''
        if 'X-Progress-ID' in request.GET:
            progress_id = request.GET['X-Progress-ID']
        elif 'X-Progress-ID' in request.META:
            progress_id = request.META['X-Progress-ID']
        if progress_id:
            from django.utils import simplejson
            cache_key = "%s_%s" % (request.META['REMOTE_ADDR'], progress_id)
            data = cache.get(cache_key)
            return HttpResponse(simplejson.dumps(data))
        else:
            return HttpResponseServerError(
                'Server Error: You must provide X-Progress-ID header or query param.') 
```

4) 添加网址

```
url(r'^admin/upload_progress/$',
    'utils.views.upload_progress',
     name="admin-upload-progress"), 
```

5) 在模板中

```
 {% block extra-head %}
    <script type="text/javascript" >
    // Generate 32 char random uuid
    function gen_uuid() {
        var uuid = ""
        for (var i=0; i < 32; i++) {
            uuid += Math.floor(Math.random() * 16).toString(16);
        }
        return uuid
    }

    // Add upload progress for multipart forms.
    $(function() {
        /*
        This throws a syntax error...
        $('form[@enctype=multipart/form-data]').submit(function(){
        */
        $('#upload').submit(function(){
            // Prevent multiple submits
            if ($.data(this, 'submitted')) return false;

            var freq = 1000; // freqency of update in ms
            var uuid = gen_uuid(); // id for this upload so we can fetch progress info.
            var progress_url = '/feature/admin/upload_progress/'; // ajax view serving progress info

            // Append X-Progress-ID uuid form action
            this.action += (this.action.indexOf('?') == -1 ? '?' : '&') + 'X-Progress-ID=' + uuid;

            var $progress = $('<div id="upload-progress" class="upload-progress"></div>').
                appendTo(document.body).append('<div class="progress-container"><span class="progress-info">uploading 0%</span><div class="progress-bar"></div></div>');

            // progress bar position
            $progress.css({
                position: ($.browser.msie && $.browser.version < 7 )? 'absolute' : 'fixed',
                left: '50%', marginLeft: 0-($progress.width()/2), bottom: '20%'
            }).show();

            // Update progress bar
            function update_progress_info() {
                $progress.show();
                $.getJSON(progress_url, {'X-Progress-ID': uuid}, function(data, status){
                    if (data) {
                        var progress = parseInt(data.uploaded) / parseInt(data.length);
                        var width = $progress.find('.progress-container').width()
                        var progress_width = width * progress;
                        $progress.find('.progress-bar').width(progress_width);
                        $progress.find('.progress-info').text('uploading ' + parseInt(progress*100) + '%');
                    }
                    window.setTimeout(update_progress_info, freq);
                });
            };
            window.setTimeout(update_progress_info, freq);

            $.data(this, 'submitted', true); // mark form as submitted.
        });
    });
     </script>
    {% endblock %}

    {% block content %}
        <form id='upload' action="." enctype="multipart/form-data" method="POST">
            <table>
                {{ form.as_table }}
            </table>
            <p><input type="submit" value="Submit"></p>
        </form>
    {% endblock %} 
```

某处我错了....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:48:44.683

您需要提供处理程序的类名，如果您的文件被调用`UploadProgressCachedHandler.py`，您将在此处提供模块名称。你需要使用

```
FILE_UPLOAD_HANDLERS = ('pliks.upload.UploadProgressCachedHandler.UploadProgressCachedHandler', ) + \
    global_settings.FILE_UPLOAD_HANDLERS 
```

Python 约定是调用模块`handlers.py`而不是在它包含的类之后命名它。

# sql-server-2008 - xml路径的表现

> ID：12154152
> 
> 赞同：-2
> 
> 时间：2012-08-28T06:51:50.327
> 
> 标签：sql-server-2008, tsql

我在下面有一个查询：

```
select col1,
       col2,
       .
       .
       .
       coln
  from table1
  left join table2
  on some condition
  .
  .
  left  join tablen
  on some condition
  left join (
              select t1.col1,
              (
                select t2.col2 + ';' as [data()]
                  from SomeTable t2
                 where t2.col1 = t1.col1
                 for xml path('')
              ) value
              from SomeTable t1
              group by t1.Col1
            )MyTable
         on some condition 
```

上面的查询将返回大约 4000 行。使用 xml 路径的内联 select 语句也会产生大约 4000 条记录。

我想知道由于使用 xml 路径，此查询是否会对性能产生任何影响。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:22:45.930

除非并且直到您在左连接中的所有连接列上都有正确的索引并且在选择的列列表中具有正确的覆盖索引，否则这里不会出现任何性能问题。

# android - 片段方法：attach()、detach()、remove()、replace()、popBackStack()

> ID：12154157
> 
> 赞同：35
> 
> 时间：2012-08-28T06:52:13.730
> 
> 标签：android, android-fragments, fragment, back-stack

我对这些功能及其用途感到非常困惑。我观察到 using`replace()`将现有片段替换为新片段。我们可以使用`addToBackStack(null)`将该片段放入回栈中，以便我们可以返回到之前显示的片段。现在，当添加（或替换）片段时 - `onAttach()`->`onCreate()`等....片段的方法按顺序调用。

现在，当我们`remove()`从我们的活动中调用片段时，片段的哪些函数被调用以及以什么顺序调用？

做什么`attach()`和`detach()`做什么？是否`detach()`删除片段？而这两个`attach()`and`detach()`在使用的时候，分别调用了fragment的哪些函数，按什么顺序调用？？

另外，会发生什么`popBackStack()`？`popBackStack()`我的意思是当我们在活动的片段上使用时调用了哪些函数？

onDestroy() 什么时候调用？

谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-28T07:46:30.970

> 现在，当我们从活动中调用片段的 remove() 时，片段的哪些函数被调用以及以什么顺序调用？

查看[http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)。

顺序为：`onPause()`, `onStop()`, `onDestroyView()`, `onDestroy()`,`onDetach()`

> attach() 和 detach() 有什么作用？detach() 会删除片段吗？而当使用这两个attach()和detach()时，会调用fragment的哪些函数，按什么顺序调用？？

`attach()`并且分别将与/从`detach()`关联或分离。附加时调用生命周期方法，分离时调用生命周期方法。有关更多信息，请查看上面的链接。`Fragment``Activity``Fragment``onAttach()``onDetach()``Fragment`

> 另外，popBackStack() 上会发生什么？我的意思是当我们在活动的片段上使用 popBackStack() 时调用了哪些函数？

如果`Fragment`没有被销毁，则`popBackStack()`调用`onStart()`和`onResume()`方法。如果`Fragment`之前已经被销毁，那么生命周期方法将从 开始调用`onAttach()`。与按下后退按钮时相同`Activities`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-10T16:27:44.557

只是一个注释`popBackStack()`。它不会弹出片段，它会弹出片段事务。因此，无论最后一个片段交易是什么，都会被逆转。如果您显示的是 a`FragmentA`并且您的交易是：

```
fragmentTransaction.replace(R.id.your_layout, fragmentB);
fragmentTransaction.addToBackStack(null); 
```

它将替换`FragmentA`为`FragmentB`，并将该事务（不是片段）添加到后台堆栈。如果您然后点击后退按钮，它会弹出后退堆栈并获取事务，即“将其替换`FragmentA`为`FragmentB`”。然后它会撤销该交易。向后，指令是将当前片段替换为`FragmentA`. 如果原件`FragmentA`仍然存在，则使用该原件。如果它被破坏了，它会制造一个新的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-28T10:56:44.370

假设通过以下步骤将片段 A 和片段 B 添加到容器中：

```
1\. Added fragment A =>  .replace(R.id.container, fragmentA) => addToBackStack(null)
2\. Added fragment B =>  .replace(R.id.container, fragmentB) => addToBackStack(null)
3\. Removed fragment B => fragmentManager.popBackStack(); 
```

调用 fm.popBackStack() 时的回调：

```
FragmentB: onPause()
FragmentB: onStop()
FragmentB: onDestroy()
FragmentB: onDetach()
FragmentA: onCreateView()
FragmentA: onViewCreated()
FragmentA: onActivityCreated()
FragmentA: onStart()
FragmentA: onResume() 
```

解释：为什么在使用 popBackStack() 删除和销毁片段 B 时，片段 A 视图被再次创建并恢复？

Ans：当你添加fragment B时，你使用了replace()和addToBackStack()，所以所有的fragment都被从容器中移除了，fragment B被添加到了容器中。并且，此交易也记录在 Back 堆栈中。因此，当调用 fm.popBackStack() 时，首先将事务从返回堆栈中弹出，因此操作会自行恢复，因此片段 b 会从容器中删除并销毁。并且所有其他片段都被添加，因为我们的案例片段 A 的视图被添加到容器中。还注意到片段 A 的 onAttach 和 onCreate() 没有被调用，因为它已经被创建并附加到 MainActivity 之前。

对片段 B 的后按执行相同的操作：

```
If you press the back button, it calls fm.popBackStack() and pops the transaction. 
```

# javascript - 打印多页表格时再次创建页眉

> ID：12154166
> 
> 赞同：0
> 
> 时间：2012-08-28T06:52:51.147
> 
> 标签：javascript, c#, asp.net, printing

我已经使用 C# 在 web 表单中创建了一个表。当用户单击网络表单中的打印按钮时，我只想打印表格。

我已经在 asp.net 中实现了 Javascript，其中只打印了 div 内容。但是，这行得通，因为表中有很多行，所以有很多页。

我希望在每个新页面中再次显示表格标题。我该怎么做呢？

我的代码：
在 asp.net - 打印按钮，表格

```
<asp:Button ID="printBtn" runat="server" Text="Print" onClientClick="printdiv('tableDiv')" />
            <div id="tableDiv">
            <asp:Table ID="resultsTable" runat="server" GridLines="Both">
            </asp:Table>
            </div> 
```

在 asp.net - 用于打印的 javascript

```
 <script type="text/javascript">
        function printdiv(printpage) {
            var headstr = "Header";
            var footstr = "Footer";
            var newstr = document.all.item(printpage).innerHTML;
            var oldstr = document.body.innerHTML;
            document.body.innerHTML = headstr + newstr + footstr;
            window.print();
            document.body.innerHTML = oldstr;
            return false;
        }
        </script> 
```

后面代码中的表格方法：

```
 protected void resultTable()
    {
        //database setup codes
        ...............

        try
        {
            //database query codes
            ............

            if (reader.HasRows)
            {
                //Set a table width.
                resultsTable.Width = Unit.Percentage(60.00);
                //Create a new row for adding a table heading.
                TableRow tableHeading = new TableRow();

                //Create and add the cells that contain the Name column heading text.
                TableHeaderCell nameHeading = new TableHeaderCell();
                nameHeading.Text = "Name";
                nameHeading.HorizontalAlign = HorizontalAlign.Left;
                tableHeading.Cells.Add(nameHeading);

                TableHeaderCell ageHeading = new TableHeaderCell();
                ageHeading.Text = "Age";
                ageHeading.HorizontalAlign = HorizontalAlign.Left;
                tableHeading.Cells.Add(ageHeading);

                resultsTable.Rows.Add(tableHeading);

                while (reader.Read())
                {

                    TableRow detailsRow = new TableRow();

                    TableCell nameCell = new TableCell();
                    nameCell.Text = reader["name"].ToString();
                    detailsRow.Cells.Add(nameCell);

                    TableCell ageCell = new TableCell();
                    ageCell.Text = reader["age"].ToString();
                    detailsRow.Cells.Add(ageCell);

                    resultsTable.Rows.Add(detailsRow);

                }
            }
            reader.Close();
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex.ToString());
        }
        conn.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:13:37.850

我用方法创建了一个 CSS 样式表：

```
thead { display:table-header-group } 
```

但是，此方法仅适用于浏览器 IE 和 Firefox。

# rabbitmq - Rabbitmq 话题误区

> ID：12154171
> 
> 赞同：0
> 
> 时间：2012-08-28T06:53:07.557
> 
> 标签：rabbitmq

我的测试 rabbitmq 环境中有一个队列 D4。
我想使用主题交换将消息发布到 D4 队列。
在 Web 管理控制台中，我将带有路由键 K 的消息绑定到队列 D4。
但是我的消息没有传递到 D4 队列。
当我将主题更改为直接交流时，一切正常。
我的代码有什么问题？

```
ExchangeName = <<"custom.topic">>,   
ExchangeType = <<"topic">>,  
Key = <<"K">>,
Msg = <<"123">>,
{ok, Connection} = amqp_connection:start
    (#amqp_params_network{username = <<"guest">>, password = <<"guest">>, host = "192.168.1.1"}),
{ok, Channel} = amqp_connection:open_channel(Connection),
#'exchange.declare_ok'{} = 
    amqp_channel:call(Channel, #'exchange.declare'{exchange=ExchangeName, durable=true, type = ExchangeType}),
amqp_channel:call(Channel, #'basic.publish'{routing_key = Key}, #amqp_msg{props = #'P_basic'{delivery_mode=2}, payload = Msg}), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:54:12.953

我自己发现了错误。

amqp_channel:call(Channel, #'basic.publish'{ **exchange= ExchangeName** ,routing_key = Key}, #amqp_msg{props = #'P_basic'{delivery_mode=2}, payload = Msg})

# php - facebook登录按钮不起作用

> ID：12154172
> 
> 赞同：0
> 
> 时间：2012-08-28T06:53:10.927
> 
> 标签：php, facebook, login

我有 2 种类型的 facebook 登录按钮，可以自动从 facebook 获取数据。一种是不使用 fb:login-button，它可以正常工作。另一个正在使用 fb:login-button 不起作用。它转到 facebook 帐户但不获取任何数据。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:55:36.733

一些教程可能对您有所帮助。

[PHP SDK & Graph API 基础 Facebook Connect 教程](http://thinkdiff.net/facebook/php-sdk-graph-api-base-facebook-connect-tutorial/)

# java - 当同一应用程序的两个实例正在运行时，EHCache 挂起

> ID：12154173
> 
> 赞同：0
> 
> 时间：2012-08-28T06:53:11.463
> 
> 标签：java, caching, ehcache

最近在测试我的使用 EHCache 和磁盘持久性的应用程序时，我发现应用程序挂在 EHCache 线程中，以防运行同一应用程序的第二个实例。

我猜这可能是因为这两个应用程序都试图写入同一个磁盘存储文件。

但是，我在 EHCachce 中找不到任何配置，每次启动应用程序时，我都可以使用它为磁盘存储文件指定不同的名称。

你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:14:48.897

Solved the problem: I was using the same name for the cahce everytime I create a cache . Now I am using a timestamp along with the cache_name, this creates a different cache file with a different name for different instances of the same application. This solves the file locking issue.

# android - Android ICS SOAP 方法不起作用？

> ID：12154174
> 
> 赞同：6
> 
> 时间：2012-08-28T06:53:14.553
> 
> 标签：android, soap, xml-parsing

**我在三星银河选项卡**中测试了 SOAP 方法并且工作正常。

**我在Android 冰淇淋三明治**上测试过的相同代码无法正常工作。

下面是我的代码，

```
HttpPost httppost = new HttpPost("xxxxxx");        
            httppost.setHeader("Content-type", "text/xml; charset=utf-8");
            httppost.setHeader("SOAPAction", SoapAction);

            StringEntity se1 = new StringEntity(env,HTTP.UTF_8);
            se1.setContentType("text/xml");  
            se1.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "text/xml; charset=utf-8"));
            httppost.setEntity(se1);  

            HttpClient httpclient = new DefaultHttpClient();
            BasicHttpResponse httpResponse = (BasicHttpResponse) httpclient.execute(httppost);

            System.out.println("res------"+httpResponse.getStatusLine().toString()+" code  "+httpResponse.getStatusLine().getStatusCode());

            //Checking response 
            if(httpResponse!=null){
                inputStream = httpResponse.getEntity().getContent();

                BufferedReader r = new BufferedReader(new InputStreamReader(inputStream));
                StringBuilder total = new StringBuilder();
                String line="";
                try {
                    while ((line = r.readLine()) != null) {
                        total.append(line);
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                System.out.println("line----"+line);            
            } 
```

在这段代码中，我打印了**httpResponse.getStatusLine().toString()**打印值，例如 **HTTP/1.1 200 OK code 200**

但行值变空。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:38:22.293

尝试这个 ，

StrictMode.ThreadPolicy 策略 = new StrictMode.ThreadPolicy.Builder().permitAll().build(); StrictMode.setThreadPolicy(policy);

# python - Python 输入有效性和使用断言

> ID：12154178
> 
> 赞同：6
> 
> 时间：2012-08-28T06:53:37.127
> 
> 标签：python, validation, assert

我正在尝试对我的 python 代码执行良好的输入有效性检查，但我也希望它简洁。也就是说，我**不想**使用的解决方案是这个：

```
def some_func(int_arg, str_arg, other_arg):
    try:
        int_arg = int(int_arg)
    except TypeError, ValueError
        logging.error("int_arg must respond to int()")
        raise TypeError
    try:
        if str_arg is not None:
            str_arg = str(str_arg) 
    except TypeError
        logging.error("Okay, I'm pretty sure this isn't possible, bad example")
        raise TypeError
    if other_arg not in (VALUE1, VALUE2, VALUE3):
        logging.error("other arg must be VALUE1, VALUE2, or VALUE3")
        raise TypeError 
```

这只是太多的代码和太多的空间来检查 3 个参数。

我目前的做法是这样的：

```
def some_func(int_arg, str_arg, other_arg):
    try:
        int_arg = int(int_arg)  #int_arg must be an integer
        str_arg is None or str_arg = str(str_arg)  #str_arg is optional, but must be a string if provided
        assert other_arg in (VALUE1, VALUE2, VALUE3)
    catch TypeError, ValueError, AssertionError:
        logging.error("Bad arguments given to some_func")
        throw TypeError 
```

我失去了我的日志消息的特殊性，但在我看来，这更简洁，老实说更具可读性。

我特别想知道的一件事是断言语句的使用。我读过不鼓励使用断言作为检查输入有效性的一种方式，但我想知道这是否是一种合法的使用方式。
如果没有，是否有类似的方法来执行此检查（或一般进行此验证）仍然非常简洁？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T07:02:12.783

你可以发明一个装饰器来验证你的论点。

这就是语法的样子：

```
@validate(0, int)
@validate(1, str, logMessage='second argument must respond to str()')
@validate(2, customValidationFunction)
def some_func(int_arg, str_arg, other_arg):
    # the control gets here only after args are validated correctly
    return int_arg * str_arg 
```

* * *

这是验证装饰器工厂的简单实现。

```
def validate(narg, conv, logMessage = None):
    def decorate(func):
        def funcDecorated(*args):
            newArgs = list(args)
            try:
                newArgs[narg] = conv(newArgs[narg])
            except Exception, e:
                # wrong argument! do some logging here and re-raise
                raise Exception("Invalid argument #{}: {}".format(narg, e))
            else:
                return func(*newArgs)

        return funcDecorated
    return decorate 
```

是的，这里有一些函数嵌套，但这一切都说得通。让我解释：

*   装饰器是接受一个函数并返回另一个函数的东西
*   我们希望`validate(narg, converter)`成为一个函数，它接受一些设置并返回一个特定的装饰器 ( `decorate`)，它根据这些设置运行
*   `decorate`然后用于装饰给定函数 ( `func`)，该函数接受一些位置参数，方法是创建一个新函数，该函数接受与( )`funcDecorated`相同的参数，并根据输入函数和初始设置编写。`func``*args``func``narg``conv`

实际的验证发生在 funcDecorated 内部，它...

*   接受输入参数列表，
*   `conv`通过验证和/或转换它（无论做什么）替换第 n 个参数，
*   `func`使用更改的参数列表调用输入。

为了对多个参数执行此操作，我们`validate`使用不同的参数多次应用。（可以将其重写为仅装饰一次，但这样 IMO 看起来更清晰。）

在行动中看到它：http: [//ideone.com/vjgIS](http://ideone.com/vjgIS)

* * *

请注意，`conv`可以采取任何行动...

*   作为验证函数（返回它收到的任何内容，但如果它无效则抛出）
*   作为转换函数（返回转换后的值，如果不能转换则抛出）

请注意，此实现不处理关键字参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:59:41.137

使用断言非常适合检查参数的有效性（类型、类或值，这正是您要检查的内容）。

你说：

> 我特别想知道的一件事是断言语句的使用。

所以我认为[这个页面](http://wiki.python.org/moin/UsingAssertionsEffectively)对你有用。

特别是这部分：

> 断言*不*应用于测试由于错误的用户输入或操作系统/环境故障而可能发生的故障情况，例如找不到文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-12T15:10:01.473

更新：看看 mypy：[https ://mypy.readthedocs.io/en/stable/](https://mypy.readthedocs.io/en/stable/)

```
def some_func(int_arg: int, str_arg: str, other_arg): 
```

* * *

[@Vicent](https://stackoverflow.com/a/12155044/1587329)提供了一个[很棒的页面](http://wiki.python.org/moin/UsingAssertionsEffectively)的链接（也许它同时被编辑了）。*如果您需要检查*，建议按如下方式进行类型检查

```
from types import IntType, StringType
def some_func(int_arg, str_arg, other_arg):
    assert type(int_arg) == IntType, "id is not an integer: %r" % int_arg
    assert type(str_arg) == StringType or not str_arg
    assert other_arg in (VALUE1, VALUE2, VALUE3), "other arg must be VALUE1, VALUE2, or VALUE3" 
```

assert 的好处是它显示了失败的代码行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T08:04:02.480

您可以查看[合同](http://andreacensi.github.com/contracts/)库。它允许您声明对函数参数（甚至其返回值）的约束。

# c++ - 更改标签颜色c ++中的静态背景

> ID：12154185
> 
> 赞同：1
> 
> 时间：2012-08-28T06:54:15.800
> 
> 标签：c++, winapi, widget

我有创建标签

```
INITCOMMONCONTROLSEX icc;
        icc.dwSize = sizeof(INITCOMMONCONTROLSEX);
        icc.dwICC = (DWORD)ICC_TAB_CLASSES;
        InitCommonControlsEx(&icc);
        icc.dwICC = (DWORD)ICC_LISTVIEW_CLASSES;
        InitCommonControlsEx(&icc);
        hwndTab = CreateWindow(WC_TABCONTROL,L"",WS_CHILD|WS_VISIBLE|WS_DLGFRAME|WS_CLIPSIBLINGS
    ,10,10,780,271,hwnd,(HMENU)3,hInstance,NULL);
        TCITEM tcitem; tcitem.mask = TCIF_TEXT;
        tcitem.pszText = L"Tab1";
        TabCtrl_InsertItem(hwndTab,0,&tcitem); 
```

并将静态控件放入选项卡中

```
CreateWindow(L"STATIC",L"Static control 1",
        WS_CHILD|WS_VISIBLE,50,30,65,24,hwndTab,(HMENU)NULL,hInstance,NULL); 
```

但是静态控件 1 具有灰色背景。我怎样才能给它一个颜色。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:43:49.207

因为您已将静态控件设置为选项卡的子控件，所以它将向选项卡控件发送 WM_CTLCOLORSTATIC 消息。如果您对选项卡控件进行子类化，则可以捕获此消息并修改其颜色。但是请注意，启用视觉样式后，选项卡控件不是单一的单一颜色 - 它更像是一种渐变，因此即使返回匹配的纯色也不一定看起来那么好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-19T01:16:10.377

选项卡控件并不意味着是父母。对于每个选项卡页面，您应该创建一个新的无模式对话框[作为选项卡的同级，](https://devblogs.microsoft.com/oldnewthing/20191015-00/?p=102996)并将静态控件放置在其中。如果您遵守以下规则：

1.  在清单中引用 Common Controls v6
2.  `InitCommonControlsEx()`启动时调用
3.  `WS_CLIPCHILDREN`在你的主窗口中没有
4.  不处理`WM_ERASEBACKGROUND`
5.  调用无模式对话框`EnableThemeDialogTexture()`的处理程序`WM_INITDIALOG`
6.  创建标签页后调用`SetWindowPos(tab, HWND_TOP, 0, 0, 0, 0, SWP_NOACTIVATE | SWP_NOMOVE | SWP_NOSIZE)`（否则会在 Z 顺序的错误末尾）

...然后您的静态控件将使用正确的颜色渐变绘制，无模式对话框中的所有其他控件（复选框、滑块等）也将绘制在从 XP 到 10 的所有 Windows 版本上。

# .net - Dictionary.clear() 挂起执行

> ID：12154186
> 
> 赞同：0
> 
> 时间：2012-08-28T06:54:16.200
> 
> 标签：.net, multithreading, dictionary, web-config, filesystemwatcher

我有一个*web.config*文件，我想解析它以防它发生变化。为此，我使用*FileSystemWatcher*和*IDictionary*集合。这是我的方法的代码：

```
public void ReadCurrentConfiguration()
{
  var settings = System.Configuration.ConfigurationManager.AppSettings;
  lock (_dictMonitor)
  {
    if (_dictionary.Count != 0)
      _dictionary.Clear();

    foreach (var elem in Enum.GetValues(typeof(ConfigurationParameter)).Cast<ConfigurationParameter>())
      _dictionary.Add(elem.ToString(), settings[elem.ToString()]);
  }
} 
```

_ *dictMonitor*是*Object*，用于锁定；*ConfigurationParameter*是枚举，用于定义键名。*当引发FileSystemWatcher*更改事件时调用此方法。问题是程序执行在 _ *dictionary.Clear();上停止。*或*锁定（dictMonitor）；*没有例外。调试时，手动调用我的方法*ReadCurrentConfiguration*执行良好 - 它正常清理字典并填充新值。但在事件引发的情况下，它会停止。此外，如果将执行传递给*clear()*方法，调试器将显示以下消息而不是 _*字典*值：_*字典计数 = 无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部。*谁能建议为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:05:22.100

也许你的循环中的某些东西会导致事件再次发生，从而导致无限循环。

尝试这样的事情：

```
private bool _isExecuting = false;
public void ReadCurrentConfiguration()
{
    if (_isExecuting)
        return;

    _isExecuting = true;
    var settings = System.Configuration.ConfigurationManager.AppSettings;
    //......
    _isExecuting = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T16:50:25.153

一段时间后，我明白了问题的原因——更改为`web.config`使 IIS 重新启动应用程序，所以上面的实现很荒谬。这很可能是“挂起”线程的原因。

# python - 导入模块python的内存影响和范围/寿命

> ID：12154188
> 
> 赞同：0
> 
> 时间：2012-08-28T06:54:20.490
> 
> 标签：python

我想知道有关导入模块的一些事情。
我有一个只包含变量列表的模块，因此我可以在运行一次或每天运行的 3 或 4 个脚本中使用这些。
我想在我的另一个脚本中使用同一个模块，但我只需要加载一次，之后，我不再需要该模块，因为我会将变量复制到脚本中的列表中（用于比较目的）。
我的问题：
1.如果我在方法中导入模块，函数结束时会丢弃它吗？2\. 导入模块对内存的影响是什么？

很高兴知道该功能是一次性的。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:57:50.143

对模块的引用存储在 中`sys.modules`，所以不，它没有被释放。

`execfile`如果您不想加载模块，请考虑使用或类似的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:25:47.403

您实际上可以从 python 中卸载一个模块，如果不再引用它，它将被垃圾收集：

```
del sys.modules["mymodule"]
del mymodule 
```

# php - FPDF 错误：此文档 (testcopy.pdf) 可能使用了 FPDI 附带的免费解析器不支持的压缩技术

> ID：12154190
> 
> 赞同：30
> 
> 时间：2012-08-28T06:54:23.227
> 
> 标签：php, fpdf, fpdi

我正在运行以下代码并给我这个错误：`FPDF error: This document (testcopy.pdf) probably uses a compression technique which is not supported by the free parser shipped with FPDI.`我使用了另一个名为的 pdf`test.pdf`并且工作正常，但它给了我错误`testcopy.pdf.`

我认为这是解析器问题。任何人都知道可以与 fpdf 一起使用以避免此错误的任何其他解析器？

**我的代码：**

```
require('fpdf17/fpdf.php'); 
require('fpdf17/fpdi.php'); 
// initiate FPDI 
$pdf = new FPDI(); 
while (ob_get_level())
ob_end_clean();
header("Content-Encoding: None", true);
// set the sourcefile 
$pagecount = $pdf->setSourceFile('testcopy.pdf'); 
```

我想将 pdf 拆分为两个 pdf，并希望在文件附件字段中附加两个 pdf。如何将 pdf 保存到服务器。fpdf可以吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-04-10T11:52:28.100

是的，FPDF 库仅支持 PDF 版本 1.4 及更低版本。因此，要摆脱这个问题，请使用[GhostScript](http://www.ghostscript.com/download/gsdnld.html)。此脚本有助于动态更改 PDF 版本。

(1) 在此处下载[Ghostscript](http://www.ghostscript.com/download/gsdnld.html)。

(2) 安装Ghostscript并定义环境变量PATH。

(3) 然后，使用以下 php 代码更改 PDF 版本。

```
shell_exec( "gswin32 -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile=".$new_pdf." ".$old_pdf.""); 
```

(4) 现在我们得到 1.4 版本的 PDF 作为输出，然后继续 FPDF。

享受！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-09-13T06:11:08.903

我遇到了相同的问题，即 PDFMerger 不适用于某些 PDF。看来Adobe一直在更新pdf扩展的压缩方式。

我找到了 Chrome 的解决方案。

```
1\. Open the PDF file(which does not work with PDFMerger) with Chrome
2\. Right Click and Print
3\. Change destination as [Save as PDF]
4\. This exported PDF file is compatible with PDFMerger 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-12T11:08:24.480

The file needs to be PDF 1.4 (Acrobat 5) or lower. If you have Adobe Acrobat Pro you can change this with Document->Decrease File Size.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-02-15T10:53:50.523

浏览到目前为止的答案，我无法解决问题。这就是为什么，你可能有同样的问题，所以这个答案对你来说也是无价的。

我无法访问 acrobat，因此无法降级原始 PDF 的版本。我无法购买已升级加密的更新版本的库。

最后，我使用在线 PDF 转换器将我的 PDF 文件降级到版本 5 (1.4)

如果你找不到，这里有一个完整的链接。

```
https://docupub.com/pdfconvert/ 
```

（请记住，链接的内容可能会更改）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-14T13:06:17.650

这是我从另一个主题的回答：

“可以通过重新保存模板和更改压缩类型来克服它。在 Adob​​e Acrobat Pro 中，转到文件->另存为->优化的 PDF->弹出左侧列表-清理，对象压缩选项->更改为“压缩文档结构“-> 可以保存”

参考。[使用 fpdi 编辑受密码保护的 pdf](https://stackoverflow.com/questions/13120825/editing-password-protected-pdfs-with-fpdi)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-18T17:23:10.623

对于那些没有任何 Acrobat 专业版的用户：

尝试使用 Office 功能保存到 PDF 时，我在使用新版本的 Word 时遇到了这个问题。Office 中提供的 PDF 转换工具似乎正在使用较新的格式。这是我修复它的方法。

*   安装 NitroPDF 免费版（可与其他可下载的免费 PDF 创建器一起使用）
*   转到 Word 文档并选择“打印”。
*   在打印选项中，而不是您的打印机，选择“Nitro PDF Creator (Reader 3)”或任何当前版本。
*   将打开一个对话框，允许您选择保存 PDF 的位置。

保存的版本可以被FPDF打开。

希望能帮助到你

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-23T17:00:01.197

GPL Ghostscript 8.70 (2009-07-31) / Centos 7

```
ghostscript -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile=new_file.pdf file.pdf 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-01T08:32:52.940

我和你有一个非常相似的错误。我的解决方案是将 pdf 转换为较低的 pdf 版本。比一切都像预期的那样工作。

希望这个简单的技巧能帮到你！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-09T06:31:34.083

对于 Mac，您可以在预览中打开 PDF 文件并“导出为 PDF”。然后可以使用导出的。

# javascript - 使用javascript向移动浏览器添加书签

> ID：12154191
> 
> 赞同：3
> 
> 时间：2012-08-28T06:54:23.313
> 
> 标签：javascript, mobile, browser, add, bookmarks

存在用于使用 javascript 向浏览器添加书签的 javascript API，但它仅适用于桌面

**火狐**

window.sidebar.addPanel(location.href,document.title,"");

**IE**

window.external.AddFavorite(location.href,document.title);

[http://www.hostingfanatic.com/webdev/add-to-bookmarks-javascript/](http://www.hostingfanatic.com/webdev/add-to-bookmarks-javascript/)

上面的站点托管了它的代码，该功能在 Desktop FireFox 和 InternetExplorer 中有效，但在 Desktop chrome 或 Safari 中无效。

添加书签也不适用于 android 默认浏览器或 android FireFox 浏览器。

它也不适用于 IOS Safari、iPad 1 和 iPad 2

是否有任何 javascript API 允许通过移动浏览器中的 javascript 以编程方式添加书签功能？

如果没有，还有其他方法可以在移动浏览器中以编程方式实现吗？

Phonegap或root android手机也能以任何方式帮助实现这一目标吗？

我对所有观点持开放态度。

# objective-c - 无法通过我的应用发送电子邮件

> ID：12154195
> 
> 赞同：1
> 
> 时间：2012-08-28T06:54:43.720
> 
> 标签：objective-c, ios, xcode, email, mfmailcomposeviewcontroller

我是 iphone 开发的新手。我正在构建一个可以发送电子邮件的应用程序。我正在使用以下代码

```
- (IBAction)btnsendPressAction:(id)sender {

    if([MFMailComposeViewController canSendMail]){

        MFMailComposeViewController *mailer=[[MFMailComposeViewController alloc]init];
        mailer.mailComposeDelegate=self;
        [mailer setSubject:@"A Message for testing"];
      NSArray *toRecipients = [NSArray arrayWithObjects:@"rajshetty2125@gmail.com", @"secondMail@example.com", nil];
        [mailer setToRecipients:toRecipients];

        UIImage *image=[UIImage imageNamed:@"logo.png"];
        NSData *imageData=UIImagePNGRepresentation(image);
        [mailer addAttachmentData:imageData mimeType:@"image/png" fileName:@"logo.png"];
        NSString *emailBody=@"This is test email";
        [mailer setMessageBody:emailBody isHTML:NO];
        [self presentModalViewController:mailer animated:YES];
        mailer.modalPresentationStyle = UIModalPresentationPageSheet ;

    }
    else{

        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"failure" message:@"Alert" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

我的问题是 mailComposeController 委托没有被调用，我无法通过我的应用程序发送电子邮件。我经历了许多链接，但每个地方我都找到了相同的方法。谁可以帮我这个事 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:11:01.907

您将无法从模拟器发送电子邮件。您只能使用在邮件应用程序中配置的任何帐户在 iOS 设备上检查此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:04:52.180

在这里使用此[链接](https://stackoverflow.com/questions/12000698/how-can-attach-two-images-in-mail-composer/12001392#12001392)和您在设备中添加（配置）一个帐户，然后只有您可以发送邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:09:55.137

这个片段对我有用：

```
if ([MFMailComposeViewController canSendMail]) {
    self.mailController = [[MFMailComposeViewController alloc] init];
    [self.mailController setSubject:@"Invitation"];
    [self.mailController setMessageBody:@"Message" isHTML:NO];
    self.mailController.mailComposeDelegate = self;

    [self presentModalViewController:self.mailController animated:YES];
} 
```

但请确保您在接口中实现委托

```
@interface MyClass() <MFMailComposeViewControllerDelegate> 
```

并检查您的回调方法：

```
- (void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T07:09:17.057

嘿，我不确定，但可能有帮助，替换你的最后一行

```
mailer.modalPresentationStyle = UIModalPresentationPageSheet ; 
```

和

```
[self presentModalViewController: mailer animated:YES]; 
```

# php - 在 PHP 中重复使用一个函数

> ID：12154203
> 
> 赞同：0
> 
> 时间：2012-08-28T06:55:11.347
> 
> 标签：php, function, reusability

我有这个代码来加密每一行的 ID：

```
class publicfunction {
  public static function EncryptString($input) {
    $Key = "KEY_GOES_HERE";
    return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $Key, $input, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
  }
}

// I skipped the code for read the mysql
while($fetch = mysqli_fetch_array($r)) {
  $ProductID = $fetch[0];

  print "<a href='mstpublc.php?id=" . publicfunction::EncryptString($ProductID) . "'>Edit&nbsp;</a>";
} 
```

上有超过 1 个数据，`$fetch`但它只返回 1 行。代码有什么问题？但是，当我省略该`while`部分的 EncryptString 函数时，它会返回`$fetch`. 仅供参考，在本地主机中，它运行良好，但是当我上传代码时，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:56:09.860

通过在实时服务器上安装 mcrypt 解决了该问题。谢谢大家:)

# c# - 使用实体框架将 int 列映射到枚举属性

> ID：12154207
> 
> 赞同：5
> 
> 时间：2012-08-28T06:55:13.980
> 
> 标签：c#, entity-framework, orm, entity-framework-4.1

我有一个这样的枚举类型`Operation`：

```
[Flags]
public enum Operation
{
    None = 0,
    View = (1 << 0),
    Add = (1 << 1),
    Edit = (1 << 2),
    Delete = (1 << 3),
    ReservedA = (1 << 4),
    ReservedB = (1 << 5),
    Admin = (View | Add | Edit | Delete)
} 
```

并且表`permission`包含一`operations`列。该表映射到这样的类：

```
[Table("rolepermission")]
public class Permission : IComparable
{
    private int _id = 0;

    private Operation _operations = Operation.None;

    private List<UserRole> _roles = null;

    public Permission()
    {
        _roles = new List<UserRole>();
    }

    [Key]
    public int Id
    {
        get { return _id; }
        set { _id = value; }
    }

    [EnumDataType(typeof(Operation))]
    public Operation Operations
    {
        get { return _operations; }
        set { _operations = value; }
    }
} 
```

但它不起作用。

有什么优雅的方法可以映射它吗？

我认为创建`int`-type 属性不是最好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:21:50.583

.NET 4.0 中的唯一方法是使用 int 属性持久化到数据库和非映射枚举属性，它将在内部（或在实体加载和实体持久性期间）转换 int。或者，您可以尝试[包装方法](http://blogs.msdn.com/b/alexj/archive/2009/06/05/tip-23-how-to-fake-enums-in-ef-4.aspx)。

.NET 4.5 直接支持枚举，~~但我认为不支持标志~~（编辑：检查 Kamyar 的评论）。

# iphone - 每点击一次按钮，文本框中的数字减一

> ID：12154211
> 
> 赞同：1
> 
> 时间：2012-08-28T06:55:29.880
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我对 Objective-C 比较陌生，所以这可能真的很简单：我的应用程序中有一个显示弹药计数的文本框，所以每次用户点击开火按钮时，文本框中的数字都会下降由一（12 > 11 > 10 等）到 0。我尝试使用 for 和 if 语句，但它们不起作用（我可能使用了不正确的语法）。这是我现在正在使用的，但显然我需要

```
- (IBAction)fire {

    [ammoField setText:@"11"];

}

- (IBAction)reload {

    [ammoField setText: @"12"];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:11:59.050

最简单的方法是将文本转换为数字，递减并重置文本，即将 fire 方法中的代码替换为：

```
NSInteger ammoCount = [ammoField.text integerValue];
ammoCount--;
ammoField.text = [NSString stringWithFormat:@"%d", ammoCount]; 
```

但不要这样做，它会让婴儿史蒂夫乔布斯哭泣。

更好的方法是向`UIInteger`跟踪子弹数量的类型类添加一个新变量，即：

```
// in interface
NSInteger _ammoCount;

...

// in implementation

- (IBAction)fire {
    _ammoCount--;
    if (_ammoCount <= 0) {
        _ammoCount = 0;
        fireButton.enabled = NO;
    }
    [ammoField setText: [NSString stringWithFormat:@"%d", _ammoCount]];
}

- (IBAction)reload {
    _ammoCount = 12;
    [ammoField setText: [NSString stringWithFormat:@"%d", _ammoCount]];
    fireButton.enabled = YES;
} 
```

哦，别忘了`reload`在早期的某个时候调用以确保 _ammoCount 和 ammoField 被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:05:02.347

设置实例整数

```
int x; 
```

它的设定值

```
x = 12; 
```

改变方法

```
- (IBAction)fire {    
 [ammoField setText:[NSString stringWithFormat:@"%i",x]];
 x--;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:00:08.910

使用 int 变量设置 viewdidload 中的 count 值

fire 方法将计数减 1

和 reload 方法将值返回到 12

相应地记录或使用值

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-28T07:04:12.597

试试这个：-

```
 int i;
 -(void)ViewDidLoad 
{

  i=12;

}
 - (IBAction)fire 
{

  [ammoField setText:[NSString stringWithFormat:@"%d",i]];
  i--;
}

- (IBAction)reload {
i = 12;
[ammoField setText: [NSString stringWithFormat:@"%d", i]];
} 
```

希望它对你有用。谢谢 ：）

# mpeg-4 - 如何在 mpeg-4 视觉流块中定位内部 dct 系数？

> ID：12154212
> 
> 赞同：0
> 
> 时间：2012-08-28T06:55:40.893
> 
> 标签：mpeg-4

是否有任何“简单”的方法可以在 mpeg4 视觉流中定位特定语法单元（如 8x8 块中的内部 dct 系数）？

或者只是说，唯一的方法是分析所有细节的流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:44:24.927

根本没有简单的方法。您必须对流进行解码才能获得这些。编辑使用 ffmpeg 来获取这些。正确位置的单个 fprintf 应将其提供给您。

# c# - 在 SQL 中链接表

> ID：12154213
> 
> 赞同：0
> 
> 时间：2012-08-28T06:55:54.823
> 
> 标签：c#, sql, wpf, linq

我正在尝试围绕数据库进行研究，作为一种学习方式，我正在使用 C# 和 WPF 制作一个扑克跟踪器程序。

我在 LINQ to SQL 上看到的一些教程使用“LINQ to SQL 类”以简洁的方式显示数据库及其关系，但我不确定如何使用它以及从中生成什么代码。

假设我想在一张表中记录手牌历史，其中包含手牌 ID、玩家 1、玩家 2 等数据、公共牌和底池大小。在另一张表中，我想了解我遇到的所有玩家的信息。因此，每条记录的手牌历史记录都连接到至少 1 个登录玩家，最多 8 个连接。

您如何在我在教程中看到的表格之间建立这些简洁的视觉连接，以及在这个示例中最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:03:28.447

最好使用 Linq to Entity Framework，因为它的性能优于 Linq to SQL。

[EF http://www.codeproject.com/Articles/246861/LINQ-to-Entities-Basic-Concepts-and-Features](http://www.codeproject.com/Articles/246861/LINQ-to-Entities-Basic-Concepts-and-Features)的代码示例

# algorithm - 通过分布式客户端有效地使用速率受限的 API（Echo Nest）

> ID：12154215
> 
> 赞同：12
> 
> 时间：2012-08-28T06:56:00.797
> 
> 标签：algorithm, networking, distributed-computing, feedback, throttling

## 背景

Echo Nest 有一个[速率受限的 API](http://developer.echonest.com/docs/v4#rate-limits)。给定的应用程序（使用 API 密钥在请求中标识）每分钟最多可以进行 120 次 REST 调用。服务响应包括对最后一分钟呼叫总数的估计；重复滥用 API（超过限制）可能会导致 API 密钥被撤销。

当从单台机器（向客户端提供服务的 Web 服务器）上使用时，很容易控制访问 - 服务器完全了解请求的历史并可以正确地自我调节。

但我正在开发一个程序，其中分布式独立客户端并行发出请求。

在这种情况下，最佳解决方案是什么就不太清楚了。总的来说，这个问题似乎是无法确定的——如果超过 120 个客户（都没有以前的历史记录）同时发出初始请求，那么速率将被超过。

但由于这是一个个人项目，预计客户使用是零星的（突发的），而且我的项目从未取得巨大成功，因此预计这不会是一个大问题。一个更可能的问题是，有时少数客户端希望尽快发出许多请求（例如，客户端可能需要在第一次启动时发出数千个请求 - 这是可能的两个客户端大约在同一时间启动，因此它们必须合作共享可用带宽）。

鉴于以上所有情况，**什么是适合客户端的算法，以便他们适当地限制速率？** 请注意，有限的合作*是可能的，因为 API 返回**所有*客户端在最后一分钟的请求总数。

## 当前解决方案

我目前的解决方案（当问题被写出来时——给出了一个更好的方法作为答案）非常简单。每个客户端都有最后一次调用的时间和最后一分钟调用次数的记录，由 API 报告，在该调用上。

如果调用次数少于 60（限制的一半），则客户端不会限制。这允许少量请求的快速突发。

否则（即，当有更多先前的请求时）客户端计算它需要工作的限制速率（即`period = 60 / (120 - number of previous requests)`），然后等待直到先前调用和当前时间之间的间隔超过该时间段（以秒为单位；60 秒分钟；每分钟最多 120 个请求）。这有效地限制了速率，因此，如果它单独行动，它不会超过限制。

但是上面有问题。如果您仔细考虑一下，您会发现对于大量请求，单个客户端会振荡并且不会达到最大吞吐量（这部分是因为“初始突发”会突然“落在窗口外”，部分是因为算法没有充分利用其历史）。并且多个客户会在一定程度上合作，但我怀疑它是最优的。

## 更好的解决方案

我可以想象一个更好的解决方案，它使用客户的完整本地历史记录并使用隐马尔可夫模型对其他客户进行建模。因此，每个客户端都将使用 API 报告来模拟其他（未知）客户端并相应地调整其速率。

我还可以想象一个用于单个客户端的算法，它逐渐从小突发的无限行为过渡到许多请求的最优、有限行为，而不会引入振荡。

**这种方法存在吗？任何人都可以提供实现或参考吗？谁能想到更好的启发式方法？**

我想这是某个地方的已知问题。在什么领域？排队论？

我还猜测（参见前面的评论）没有最佳解决方案，并且可能有一些知识/传统/公认的启发式在实践中效果很好。我很想知道什么......目前我正在努力找出已知网络协议中的类似问题（我想如果是这样的话，Perlman 会有一些漂亮的解决方案）。

我也对需要中央服务器来帮助协作的解决方案感兴趣（在较小程度上，以供将来参考，如果该程序变得流行）。

## 免责声明

这个问题根本不是对 Echo Nest 的批评；他们的服务和使用条件都很棒。但是我越想如何最好地使用它，它就会变得越复杂/有趣......

此外，每个客户端都有一个本地缓存，用于避免重复调用。

## 更新

[可能是相关论文](http://www.cs.ucla.edu/classes/cs217/SIG07Award.pdf)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:08:08.157

以上工作，但非常嘈杂，代码是一团糟。我现在使用一种更简单的方法：

*   打个电话
*   从响应中，注意限制和计数
*   计算

    ```
    barrier = now() + 60 / max(1, (limit - count))**greedy 
    ```

*   在下一次通话中，等到`barrier`

这个想法很简单：你应该等待一段时间，这与那一分钟剩下的请求数量成正比。例如，如果 count 是 39，limit 是 40，那么你等待一整分钟。但是如果计数为零，那么您可以很快提出请求。该`greedy`参数是一个权衡 - 当大于 1 时，“第一次”调用会更快，但您更有可能达到限制并最终等待 60 秒。

它的性能类似于上面的方法，并且*更加*健壮。当客户端“突发”时特别好，因为上面的方法在尝试估计线性速率时会感到困惑，而这会很高兴地让客户端在需求低时“窃取”一些快速请求。

[代码在这里](https://github.com/andrewcooke/uykfg/blob/master/src/uykfg/nest/api/__init__.py)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:32:41.387

经过一些实验，似乎最重要的是尽可能好地估计当前连接速率的*上限*。

每个客户端都可以使用时间戳队列跟踪自己的（*本地）连接速率。*每个连接上的队列都会添加一个时间戳，超过一分钟的时间戳将被丢弃。然后从第一个和最后一个时间戳以及条目数（减一）中找到“长期”（超过一分钟）平均速率。“短期”（瞬时）速率可以从最近两次请求的时间中找到。上限是这两个值的最大值。

每个客户端还可以估计*外部*连接速率（来自其他客户端）。“长期”速率可以从服务器报告的最后一分钟的“使用”连接数中找到，并通过本地连接数（来自上述队列）进行校正。“短期”速率可以从自上次请求以来的“使用”数字（减一，对于本地连接）估计，按时间差缩放。同样，使用上限（这两个值的最大值）。

每个客户端计算这两个速率（本地和外部），然后将它们相加以估计与服务器的总连接速率的上限。该值与当前设置为最大值的 80% 到 90%（每分钟）的目标速率范围进行`0.8`比较`0.9 * 120`。

根据估计速率和目标速率之间的差异，每个客户端都会修改自己的连接速率。这是通过获取前一个增量（最后一个连接和前一个连接之间的时间）并将其缩放`1.1`（如果速率超过目标）或`0.9`（如果速率低于目标）来完成的。然后，客户端拒绝建立新连接，直到经过缩放的增量（如果请求新连接，则通过休眠）。

最后，以上没有强制所有客户端平等共享带宽。因此，我在本地费率估算中增加了 10%。这具有优先高估利率高的客户的利率的效果，这使他们更有可能降低利率。通过这种方式，“贪婪”的客户减少消费的压力略大，从长远来看，这似乎足以保持资源分配的平衡。

重要的见解是：

*   通过采用“长期”和“短期”的最大值估计，当其他客户端启动时，系统是保守的（并且更稳定）。

*   没有客户端知道客户端的总数（除非它是零或一），但所有客户端都运行相同的代码，因此可以相互“信任”。

*   鉴于上述情况，您无法“准确”计算要使用的汇率，但您可以根据全局汇率进行“恒定”修正（在本例中为 +/- 10% 系数）。

*   客户端连接频率的调整是针对最后两个连接之间的增量进行的（基于整分钟的平均值进行调整太慢并导致振荡）。

*   通过对贪婪的客户进行轻微惩罚，可以实现均衡消费。

在（有限的）实验中，这工作得相当好（即使在多个客户端同时启动的最坏情况下）。主要缺点是：（1）它不允许初始“突发”（如果服务器的客户端很少而客户端只有几个请求，这将提高吞吐量）；(2) 系统仍会振荡约一分钟（见下文）；(3) 处理大量客户端（在最坏的情况下，例如如果它们都同时启动）需要更大的增益（例如 20% 的修正而不是 10%），这往往会使系统不太稳定。

![阴谋](../Images/b45ed9e5e11680a39971a22ad5e30aec.png)

（测试）服务器报告的“使用”量，与时间（Unix 纪元）绘制。这是针对四个客户端（彩色）的，它们都试图消耗尽可能多的数据。

振荡来自通常的来源 - 修正滞后信号。它们通过 (1) 使用速率的上限（从瞬时值预测长期速率）和 (2) 使用目标频带来衰减。这就是为什么由了解控制理论的人提供的答案将受到赞赏......

我不清楚分别估算本地和外部利率是否重要（如果一个的短期利率很高而另一个的长期利率很高，它们可能会有所帮助），但我怀疑删除它会改善情况。

总之：对于这种方法，这一切都和我预期的差不多。它有点工作，但因为它是一种简单的基于反馈的方法，它只能在有限的参数范围内稳定。我不知道有什么替代方案是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:16:12.973

既然您使用的是 Echonest API，为什么不利用每个 API 调用返回的速率限制标头呢？

一般来说，您每分钟收到 120 个请求。有三个标头可以帮助您自我调节 API 消耗：

```
X-Ratelimit-Used
X-Ratelimit-Remaining
X-Ratelimit-Limit 
```

**（请注意“Ratelimit”中的小写“ell”——文档让您认为它应该大写，但实际上它是小写的。）

这些计数考虑了其他进程使用您的 API 密钥进行的调用。

很整洁吧？好吧，恐怕有摩擦...

每分钟 120 个请求确实是一个上限。你不能指望它。该文档指出，该值可能会根据系统负载而波动。在我进行的一些调用中，我看到它低至 40ish，并且在某些情况下看到它低于零（我真的希望这是 echonest API 中的一个错误！）

您可以采取的一种方法是在利用率（使用除以限制）达到某个阈值时减慢速度。但请记住，在下一次调用时，您的下载限制可能已被调整得足够大，以至于“已使用”大于“限制”。

直到某一点为止，这都很好。由于 Echonest 不会以可预测的方式调整限制，因此在实践中很难避免 400 秒。

以下是我发现有用的一些链接：

[http://blog.echonest.com/post/15242456852/managing-your-api-rate-limit](http://blog.echonest.com/post/15242456852/managing-your-api-rate-limit) [http://developer.echonest.com/docs/v4/#rate-limits](http://developer.echonest.com/docs/v4/#rate-limits)

# excel - 如何完全关闭 Excel 应用程序/工作簿？

> ID：12154221
> 
> 赞同：0
> 
> 时间：2012-08-28T06:56:12.423
> 
> 标签：excel, visual-c++, visual-studio-2008

我努力了：

```
while (System::Runtime::InteropServices::Marshal::ReleaseComObject(worksheet_instance) > 0) ;
workbook_instance->Close(true, "Dummy.xlsx", Missing::Value);
while (System::Runtime::InteropServices::Marshal::ReleaseComObject(workbook_instance) > 0) ;
workbook_instance->~Workbook();
exApp_instance->Quit();
exApp_instance->~Application(); 
```

但它不会终止 excel 应用程序（我仍然在任务管理器中看到它）。作为尝试，我想做类似的事情

```
workbook_instance = NULL; 
```

但它不被接受。有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:36:24.907

谢谢@amaldev
根据从第一个链接收集的一些想法，我成功了

```
try{
    while (System::Runtime::InteropServices::Marshal::ReleaseComObject(ws) > 0) ; 
} catch(...) {} 

wb->Close(false, Missing::Value, Missing::Value); 
try { 
    while (System::Runtime::InteropServices::Marshal::ReleaseComObject(wb) > 0) ; 
} catch(...) {} 

exApp->Quit(); 
try { 
    while (System::Runtime::InteropServices::Marshal::ReleaseComObject(exApp) > 0) ; 
} 
catch(...) {} 

System::GC::Collect(); 
System::GC::WaitForPendingFinalizers(); 
```

# visual-studio-2008 - 在 Addin VS2008 中获取项目的导入

> ID：12154231
> 
> 赞同：0
> 
> 时间：2012-08-28T06:56:39.743
> 
> 标签：visual-studio-2008, msbuild, visual-studio-addins, envdte

我需要在 Addin VS 2008 - .NET 3.5 中获取项目的“导入”列表。

在 VS2010 - .NET 4.0 中，我使用：

```
EnvDTE.Project project = GetProject();
var project1 = new Microsoft.Build.Evaluation.Project(project.FullName);
project1.Xml.Imports.ForEach(i => {
                    Trace.WriteLine("\t Import Project: " + i.Project); 
}); 
```

但在 VS2008 中失败（未找到 Microsoft.Build 程序集）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:12:20.037

使用 VS2008 和 .net 3.5，Microsoft.Build.BuildEngine.Engine 在 .net 4.0 中已过时

```
 var engine = new Microsoft.Build.BuildEngine.Engine();
    var proj = new Microsoft.Build.BuildEngine.Project(engine);
    proj.Load(project.FullName);
    foreach (Microsoft.Build.BuildEngine.Import import in proj.Imports)
    {
        contieneTargets = import.ProjectPath.ContainsWithStringComparison("Microsoft.VisualStudio.SharePoint.targets", StringComparison.InvariantCultureIgnoreCase);
        Trace.WriteLine("\t Import Project: " + import.ProjectPath);
        if (contieneTargets) break;
    } 
```

只有一个问题：当这段代码被执行多次时，我得到了一些项目尚未加载的错误。

> System.InvalidOperationException：项目集合中已存在等效项目（具有相同全局属性和工具版本的项目），路径为“test.csproj”。要将等效项加载到此项目集合中，请先卸载此项目。

# asp.net - 如何设置aspx网页的默认高度/宽度？

> ID：12154235
> 
> 赞同：0
> 
> 时间：2012-08-28T06:57:01.523
> 
> 标签：asp.net

我想设置网页的大小。

我做了这个但没有工作

```
<body style="height:30%;width:30%;"> 
```

任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-17T12:18:55.067

试试java脚本代码。基本上，当它加载时，它将运行 javascript 以打开另一个具有正确尺寸且没有所有不必要的工具栏的窗口并关闭原始打开器窗口。

所以在您的引导页面上，您可以执行以下操作：

`window.onload = function() { var w = window.open("about:blank", "main", "width=640,height=480", true) window.opener = "main"; window.open("", "_parent", ""); w.opener.close(); }`

这可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:02:38.557

网页的大小是浏览器窗口的大小。基本上，您要控制的是该页面内内容的大小。

一个基本的方法是在 body 之后创建一个表格元素并为该表格设置一个大小，然后将所有内容包装在该表格中。

例子：

```
<body>
  <table>
    <tr><td width="30%">
       All content goes here
    </td></tr>
  </table>
</body> 
```

请注意，当使用百分比设置尺寸时，尺寸将与浏览器窗口的大小成比例。例如，页面看起来会有所不同，具体取决于浏览器窗口是否最大化。

# java - 有时缺少年份而有时没有年份时将字符串解析为日期

> ID：12154237
> 
> 赞同：3
> 
> 时间：2012-08-28T06:57:09.427
> 
> 标签：java, string, date

我正在使用**mm/dd/yyyy**`String`格式将多个包含日期的对象解析为对象**`Date``SimpleDateFormatter`**

 **我面临的问题是，某些字符串包含完整的日期意味着它是**mm/dd/yyyy**，而某些字符串不包含年份并且采用这种格式**mm/dd**

我正在使用这种格式来解析日期**MM/dd/yyyy**但每次我得到一个只有月份和日期的字符串时，我都会得到解析异常。

我想知道，如果缺少年份字段，是否有任何方法可以使用**0000**之类的东西，或者我只需要将其处理为异常体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:01:40.287

只需创建 2 个单独`SimpleDateFormat`的实例，一个是您拥有的，另一个是仅包含日期和月份的实例。您首先分析字符串并将其传递给正确的格式化程序。

或者将其传递给第一个，如果抛出异常，则将其传递给第二个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:08:11.537

据我所知，您可以创建一个不需要“一年”的 SimpleDateFormat 实例。所以只需使用 try-catch-Block

```
 try{
    //try formatting with simpledate instance with year
 }catch (Exception thrown when no year){
    try{
       //try formatting with simple date instace without year
    } catch (Exception e)
       //something went wrong both did not accept it
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:26:18.437

```
ParseDate(String yourDate);
{
try {
Date reqDate=sdf.parse(yourDate);//sdf is instance of you date formatter
return reqDate;
} catch (ParseException e) {
return null;
e.printStackTrace();
}
} 
```

尝试使用此功能。我认为它会起作用。如果抛出异常，则 null 将返回。通过这种方式，通过检查 null 我们知道它是否被正确解析。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T07:44:13.247

一个代码值一千个字......

```
 DateFormat df;
        Calendar c = Calendar.getInstance();
        String s = new String("12/25/2012");

        String[] arr = s.split("/");

        if(arr.length>2){

c.set(Integer.parseInt(arr[0]), Integer.parseInt(arr[1]),Integer.parseInt(arr[2]));
        }
        else{

            c.set(Integer.parseInt(arr[0]), Integer.parseInt(arr[1]));
        }

        df = DateFormat.getDateInstance(DateFormat.SHORT);

        System.out.println(df.format(c.getTime())); 
```

您可以稍后使用) 方法将其转换**回 Date 对象**`df.parse(`...**

# android - Android 从 Eclipse 的构建路径中排除 XML 文件

> ID：12154241
> 
> 赞同：2
> 
> 时间：2012-08-28T06:57:19.980
> 
> 标签：android, xml, build, buildpath

看似简单，其实不然。我知道如何从构建中排除 JAVA 文件（[在此处讨论](https://stackoverflow.com/questions/10105961/android-exclude-file-from-build-in-eclipse)），但是在使用 XML 文件尝试同样的事情时会出现问题。

自己尝试一下：右键单击有问题的 XML 文件，选择“构建路径”，然后，“排除”选项被“添加到构建路径”替换。似乎 Eclipse 不跟踪 .java 文件以外的任何内容。所以这些文件不能被排除，因为它们在技术上还没有在路径中。

但是，如果您只是在测试一些想法并且有一个包含大量错误的布局文件（例如从您从网上下载的示例文件），您将无法编译您的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:07:30.163

我认为您可以创建一个新文件夹，例如“垃圾箱”并将所有给出错误的 xml 移动到该文件夹​​。确保从构建路径中删除“垃圾箱”文件夹。这样，您可以在需要时轻松换入和换出您的 xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:02:21.723

请注意，如果 XML 文件与 java 类相关联，那么您不能简单地省略 XML 文件。您必须将其从 android manifest.xml 中删除。如果该类依赖于 XML 文件，那么删除它不是一个好主意。

# c# - 如何在 aspx:DropDown 中使用 SqlDataSource 填充 aspx:TextBox？

> ID：12154244
> 
> 赞同：0
> 
> 时间：2012-08-28T06:57:25.883
> 
> 标签：c#, asp.net, textbox

我需要使用一些查询来填充文本框。我是 asp.net 的新手，而我能够使用`asp:DropDown`. 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:06:16.153

您需要使用`Page.DataBind()`将公共属性与您的页面绑定。

```
<asp:textbox id=txt text="<%# custID %>" runat=server /> 
```

请参阅[数据绑定概述](http://support.microsoft.com/kb/307860)

> ASP.NET 引入了一种新的声明性语法 <%# %>。此语法是在 .aspx 页面中使用数据绑定的基础。所有数据绑定表达式都必须包含在这些字符中。
> 
> 在显式调用 Web 服务器控件的 DataBind 方法或调用页面级 Page.DataBind 方法之前，不会向控件呈现任何数据。通常，Page.DataBind（或 DataBind）是从 Page_Load 事件中调用的。

# php - 如何使用 php 脚本动态创建子域？

> ID：12154246
> 
> 赞同：0
> 
> 时间：2012-08-28T06:57:31.710
> 
> 标签：php

是否可以使用 php 脚本在服务器上动态创建子域？我想创建它。

我的服务器在 hostmonster 上。我想动态创建子域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:04:01.800

我不确定你在追求什么，但这里有一些事情需要考虑。

您的 DNS 需要配置为通过具有指向您的 Web 服务器的[通配符 dns 记录来支持它。](http://en.wikipedia.org/wiki/Wildcard_DNS_record)例如`*.mydomain.com`.

完成后，您可以使用`$_SERVER['HTTP_HOST']`来确定正在访问的主机。或者，您可以让 PHP 在 Web 服务器配置中添加子域。

除非你真的知道自己在做什么，否则我不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:10:14.593

“使用 php 脚本”。

如果我没记错的话，听起来您想在您的网站上创建虚拟子域，以便为每个用户（例如 wordpress.com 或 tumblr）显示。

我认为`.htaccess`即使我从未尝试过也是可能的，但也许会给出一个想法。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
RewriteCond %{HTTP_HOST} ^([a-zA-Z0-9]+)\.example\.com [NC]
RewriteRule /user.php?username=%1 [L,NC,QSA] 
```

# javascript - 表单对象的 Javascript 大小

> ID：12154248
> 
> 赞同：0
> 
> 时间：2012-08-28T06:57:44.710
> 
> 标签：javascript, java, jsp, dom-events

我有一个非常关键的问题。

下面是我的jsp代码：

```
<html:select property="city"   name="city"  onchange="javascript:checkCity(this);">                             
                        <html:option value="N">NewYork</html:option>                      
                        <html:option value="F">France</html:option>
                        <html:option value="I">Italy</html:option>
                        <html:option value="P">Paris</html:option>
</html:select> 
```

`<html:select>`由于 my被放置在 for 循环中，因此可以有单个或多个 html 选择。

下面是我的 Javascript 代码：

```
var citySelected = new Array();
function checkCity(selObject)
{
     var form = document.forms[0];
     var cityObj =  form["city"];
     var len = cityObj.length;
     if(selObject==cityObj)      // if there is single <html:select> selObject is same as city Object.so this logic works fine
     {
        if(cityObj.value==cityObj.options[3].value)
        {
        alert("You have selected Paris City");
        citySelected[0] = true;
        }
        if(!cityObj.options[3].selected && cityObj[0])
        {
        var result = confirm("You have selected cities other than paris");
        if(result)
        {
            citySelected[0] = false;
        }
        else
        {
            cityObj.options[cityObj.options.selectedIndex].selected=false;
            cityObj.options[3].selected=true;
        }
        }
     }
     else{
         for(var i=0; i<len; i++) {  //if there are multiple <html:select> then take length of form object n iterate
                if (selObject == cityObj[i] )  
                {
                    if(cityObj[i].value==cityObj[i].options[3].value) // if 3rd option is selected
                    {
                        alert("You have selected Paris City");
                        citySelected[i] = true;
                    }
                    if(!sctypeObj[i].options[3].selected && citySelected[i]) //if 3rd option is deselected
                    {
                        var result = confirm("You have selected cities other than paris");
                        if(result)
                        {
                            cityObj[i] = false;
                        }
                    else
                    {
                        cityObj[i].options[cityObj[i].options.selectedIndex].selected=false;
                        cityObj[i].options[3].selected=true;
                    }
                    }
                }
         }
     }
} 
```

以下是适用于 jsp 的 Javascript `onload()`：

```
function onload()
{
         var form = document.forms[0];
         var formObj =  form["city"];
         var size=formObj.size;
         var len = formObj.length;

         for(var i=0; i<len; i++) {
         citySelected[i] = false;
         }
         if(size==0){   //if there is seingle <html:select> element
            var cityvalue=formObj.value;
            if(cityvalue=="P")
             {
                 citySelected[0] = true;
             }
         }
         else
         {
            for(var i=0; i<len; i++) {   //if there are multiple <html:select> elements
             var cityvalue=formObj[i].value;
             if(cityvalue=="P")
             {
                 citySelected[i] = true;
             }
            }
         }
} 
```

这是我发现问题的地方。如果有单个或多个`<html:select>`元素，则 Onload 逻辑工作正常。但是当我的 jsp 中根本没有`<html:select>`元素时，如果我可以选择删除所有下拉列表，那么我的 jsp 会抛出 Javascript 错误：

> “大小为空或不是对象”。

我该如何解决这个问题？在`onload()`功能中，我`<html:select>`使用大小来区分元素。

```
if(size==0)
{
   //logic for single <html:select>
}
else
{
  //logic for multiple html select
} 
```

但是当我的jsp中根本没有`<html:select>`元素时，如果我可以选择删除所有下拉菜单，那么我的jsp会抛出Javascript错误：

> “大小为空或不是对象”。

我该如何解决这个问题？任何帮助都会很棒..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:47:58.950

确定表单中元素数量的另一种方法`<select>`是使用[jQuery](http://www.jquery.com)的选择器，如下所示：

```
$('#myForm select').length // returns number of <select> elements in the form 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:03:20.957

您可以使用 Javascript 中 null/undefined 计算结果为 false 的事实，如下所示：

```
if(!size)
{
   //logic for single <html:select>
}
else
{
  //logic for multiple html select
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:19:07.977

线路`var size=formObj.size;`可能是问题的原因。当 size 属性为空或未定义时，尝试使用“或”语句来防止错误：

```
var size = formObj.size || 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:51:18.093

采用：

```
 var formObj = document.getElelementsByName('city');
 var length = formObj.length;

 if(length == 0) {
      // No select element
 }
 if(length == 1) {
      // One select element
 } else {
      // More than one select elements
 } 
```

我不确定如何`size`在这里提供帮助，这不是必需的。`undefined`在这种情况下，尺寸总是会返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T10:13:23.747

如果单个`select`元素`length`返回 4，则似乎内部存在其他同名`select`元素并且这些元素被隐藏。 但是，迭代集合类型并不是一个正确的函数，而是我们需要.`jsp`
`getElementByName('propertyName')``getElementsByName('propertyName')`

# objective-c - 如何在所选区域xcode的标签中显示时间和日期

> ID：12154251
> 
> 赞同：0
> 
> 时间：2012-08-28T06:57:56.030
> 
> 标签：objective-c, xcode, xcode4, xcode4.2

任何 1 都可以帮我解决这个问题吗我正在尝试显示所选时区的日期和时间 na 标签或文本字段我尝试了下面的代码，但它显示所有选定区域的系统当前时间:(提前致谢

```
NSDate *now = [NSDate date];
    NSCalendar *gregorian=[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    [gregorian setTimeZone:[NSTimeZone timeZoneWithName:selectedzone]];

    NSDateComponents* timeZoneComps = [gregorian components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit|NSTimeZoneCalendarUnit fromDate:now];

    NSDate *selectedDate=[gregorian dateFromComponents:timeZoneComps];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterFullStyle];
    [formatter setDateFormat:@"dd-MM-yyyy HH:mm:ss "];
    NSString *strSelectedDate= [formatter stringFromDate:selectedDate];
    zone.text = strSelectedDate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:42:32.063

[NSDate date] 返回代表当前日期和时间的日期对象，无论您身在何处。NSDate 不受地点或时区的限制。只有一个 NSDate 代表现在或任何其他时刻，而不是每个时区的不同日期对象。因此，您不应尝试在时区之间转换日期。

```
NSDate *now = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterShortStyle];
[formatter setTimeStyle:NSDateFormatterShortStyle];
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"Australia/Sydney"]];
NSLog(@"%@",[formatter stringFromDate:now]); //--> 9/9/11 11:54 PM
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/Paris"]];
NSLog(@"%@",[formatter stringFromDate:now]); 
```

# c# - 将方法名称 itSelf 的值转换为字符串

> ID：12154255
> 
> 赞同：1
> 
> 时间：2012-08-28T06:58:08.353
> 
> 标签：c#, syntax, methods

我正在尝试输出方法及其操作的日志，如果采取并导致“MyAppLog_ListView”，lisftview 的列标题是

```
Record#______MethodName__________MethodsOutput

1      ______GetCurrentTime______success(21:10)
2      ______DoSplitString_______faild(not in right Format)
3......................................etc'... 
```

这有助于我调试我的程序，因为它有超过 1500 行代码，至少对我来说有点太复杂了，问题是在字符串中存储方法名称的正确方法是什么

```
public void MyMethod()
{
      do stuff 

       if (comleted) MyAppLog_ListView_AddRecord(string for the methods name, outputSucces)
       else if (faild) MyAppLog_ListView_AddRecord(string for the methods name, outputFail)

} 
```

我如何让 MyMethod().Name 存储在字符串中？

*   重新编辑：

    至于 SidAhmeds 答案：

    ```
     public void MyMethodName()

        {
              do stuff 

             string Mnam = MethodBase.GetCurrentMethod().Name;
               if (comleted) MyAppLog_ListView_AddRecord(Mnam , outputSucces);
               else if (faild) MyAppLog_ListView_AddRecord(Mnam , outputFail);

        } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:03:25.137

或者你可以使用反射来做到这一点：

```
System.Reflection.MethodBase.GetCurrentMethod().Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:02:45.013

```
StackTrace st = new StackTrace();
var methodName = st.GetFrame(0).GetMethod().Name; 
```

# ruby-on-rails - 尝试使用 google-api-ruby-client 更新 CurrentLocation 的 Google Latitude 返回“400 Invalid Value”

> ID：12154257
> 
> 赞同：0
> 
> 时间：2012-08-28T06:58:27.537
> 
> 标签：ruby-on-rails, google-latitude

我正在尝试使用[google-api-ruby-client](http://code.google.com/p/google-api-ruby-client/)将 CurrentLocation 更新为 Google Latitude 。

我已经有一个访问令牌和刷新令牌，我从移动应用程序获得并通过 Ruby on Rails 上的服务器发送到该令牌。以下是我要执行的代码。

```
 client = Google::APIClient.new(:key => gltoken)
    client.authorization.client_id = '<my client id>'
    client.authorization.client_secret = '<my client secret>'

    client.authorization.access_token = "<the access token i ve>"
    client.authorization.refresh_token = "<refresh token i ve>"
    client.authorization.scope ='https://www.googleapis.com/auth/latitude.all.best https://www.googleapis.com/auth/latitude.current.best'

    client.host = "www.googleapis.com"
    latitudeapi = client.discovered_api('latitude', 'v1')

    result = client.execute(
      :api_method => 'latitude.currentLocation.insert',
      :parameters => {
        'kind' => 'latitude#location',
        'latitude'=>37.420352,
        'longitude'=>-122.083389,
        'accuracy'=>130,
        'altitude'=>35
    }
    )

    logger.debug("Response #{result.body}")
    result.body 
```

我得到以下结果：

```
 {"message":"{\"error\":{\"errors\":[{\"domain\":\"global\",\"reason\":\"invalid\",\"message\":\"Invalid Value\"}],\"code\":400,\"message\":\"Invalid Value\"}}"} 
```

**我无法找出我传递的值是无效的**。我尝试将与下面相同的一组值更新为[https://www.googleapis.com/latitude/v1/currentLocation?key=](https://www.googleapis.com/latitude/v1/currentLocation?key=)并且它起作用了。

**标题：**

```
Content-Type: application/json
Authorization: Bearer <My access token>
Host: googleapis.com 
```

**身体：**

```
{
  "data": {
    "kind":"latitude#location",
    "latitude":37.420352,
    "longitude":-122.083389,
    "accuracy":130,
    "altitude":35
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:10:40.870

调试gem代码后想出了答案。以下是如何进行调用。

```
result = client.execute(
            :api_method => 'latitude.currentLocation.insert',
            :body => "{\"data\": {\"kind\":\"latitude#location\",\"latitude\":#{latitude},\"longitude\":#{longitude}}}",
            :headers => {'Content-Type'=> 'application/json'}
         ) 
```

`Latitude API`的寻找`:body`而不是`:parameters`。

# objective-c - 使用 UIManagedDocument 创建的核心数据

> ID：12154260
> 
> 赞同：3
> 
> 时间：2012-08-28T06:58:31.470
> 
> 标签：objective-c, xcode, core-data, nsurl, uimanageddocument

我不确定 coreData 的结构以及对象如何保存在目录中。所以我所知道的是，您创建了一个 UIManagedDocument 实例并为其创建了一个 URL 以及它将保存文件的位置。然后你调用“SaveToURL”，当你调用它时究竟创建了什么？它是核心数据堆栈吗？那么当您将信息保存到您声明的实体中时，是否会在堆栈中为实体中的每组信息创建一个单独的文件？最后，究竟什么是 UIManagedDocument 的上下文。

这是三个主要问题

1.  调用“SaveToURL”时会创建什么，它是文档还是文件还是堆栈？
2.  当您在实体中保存信息时，是否在此文件/堆栈中创建了单独的文件？
3.  什么是 UIManagedDocument 上下文？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T08:27:00.697

我强烈建议您阅读 Core Data Programming Guide 并从[Core Data Basics Chapter](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650-TP1)开始。

`UIManagedDocument`是一种特殊的文档，一个`UIDocument`子类，它使用*Core Data Framework*存储其数据。因此，它结合了文档架构和核心数据能力的强大功能。

你可以从[Document Based App Programming Guide for iOS](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/Introduction/Introduction.html)中了解更多关于基于文档的架构，我推荐*WWDC2011 Storing Documents in iCloud using iOS5* session video。我还推荐*Stanford CS193P: iPad and iPhone App Development (Fall 2011) Lecture 13*。

1.  调用时创建的是and`saveToURL:forSaveOperation:completionHandler:`的实现细节，您不应该真正担心或依赖它。然而，在当前实现中，正在创建一个包含 sqlite 数据库文件的文件夹。`UIManagedDocument``UIDocument`

2.  不会。所有实体都将包含在一个数据库文件中，也更普遍地称为：*持久存储*。可以使用多个*持久存储*，但这些是更高级的用例，`UIManagedDocument`目前使用一个。

3.  `UIManagedDocument`的上下文是指`NSManagedObjectContext`来自底层*核心数据框架*。`UIManagedDocument`实际上并行操作其中两个以将 IO 操作分离到后台线程。当谈到上下文本身的性质时，这里引用了*核心数据编程指南*：

    > 您可以将托管对象上下文视为智能便签本。当您从持久存储中获取对象时，您会将临时副本带到便笺簿上，它们在此处形成对象图（或对象图的集合）。然后，您可以随意修改这些对象。但是，除非您实际保存这些更改，否则持久存储将保持不变。

但是，看看我在上面发布的讲座和其他材料，以大致了解所使用的技术以及它们在不同情况下对开发人员的潜在价值，确实是一个好主意。

# jquery - 如何传递 jquery 对象并在函数中被称为 $(this)？

> ID：12154261
> 
> 赞同：0
> 
> 时间：2012-08-28T06:58:36.547
> 
> 标签：jquery

我有一个功能，可以从按钮单击或从输入中的“Enter”键按下。

请看下面的代码

```
function submit(){
   var tr = obj.closest('tr');
   var some_id = tr.attr('some_id');
}

$(document).ready(function(){

    $('#somebutton').click(submit);
    $('#some_text_input').live('keydown', function(event){
        if (event.keyCode==13) {
            submit($(this));
         }
    });
}); 
```

**问题是我如何调用函数“提交”并将一个对象传递给我可以将该对象称为 $(this) 的函数**

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:00:11.773

添加 obj 作为参数：

```
function submit(obj){
    var tr = obj.closest('tr');
    var some_id = tr.attr('id'); // my guess is that you want the id attribute instead of 'some_id'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:03:20.160

在实践中，您不需要传递参数来使用 as `$(this)`。`this`上下文会根据您调用函数的位置而相应更改。如果您在 jQuery 事件中调用函数`click`，那么`this`将引用 DOM 元素和`$(this)`jQuery 对象。

```
function submit(){
   var tr = $(this).closest('tr');
   var some_id = tr.attr('id');
   alert($(this));
}

$('#somebutton').click(submit); // will alert `#somebutton` jQuery object 
```

顺便说一句，`live`不推荐使用我建议您使用[`on`](http://api.jquery.com/on/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:04:08.260

我不认为以`this`非本地方式使用是一个合适的想法。最简单但混乱的方法是正常使用 $(this) ，因为您的函数是从事件中调用的。

或者你可以简单地**定义你的参数 obj**，它会在你的函数中取值`$(this)`：

```
function submit(obj)
{
    var tr = obj.closest('tr');
    var some_id = tr.attr('id');
} 
```

还**`.attr()`必须与属性的名称一起使用**，而不是“某些 id”，而实际上是“id”或“class”。

# c# - 这个 TextReader 有什么问题？

> ID：12154263
> 
> 赞同：0
> 
> 时间：2012-08-28T06:58:47.277
> 
> 标签：c#, io, filestream

我正在使用这段代码从文件中读取，但出现错误“无法创建抽象类或接口“System.IO.TextReader”的实例”

```
using (FileStream fileStream = File.Open(fileName, FileMode.Open, FileAccess.Read))
       using(TextReader reader = new TextReader(fileStream))//error
       {
           ...       
       } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:01:17.960

`TextReader`是一个抽象类，所以你必须使用`StreamReader`- TextReader 的子类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T07:01:59.493

您不能直接实例化 TextReader 对象，它是一个抽象类。尝试改用 StreamReader 或 StringReader。

```
using (TextReader reader = new StreamReader(fileStream))
{

} 
```

请参阅[MSDN上 StreamReader 的详细信息/用法](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T07:03:04.763

像这样使用它：

```
using (TextReader reader = File.OpenText(fileName){
    string line = reader.ReadLine();

} 
```

应该为你工作。

# xcode4 - Xcode 应用程序加载器

> ID：12154273
> 
> 赞同：0
> 
> 时间：2012-08-28T06:59:41.830
> 
> 标签：xcode4, installation, application-loader

在应用程序方面，我是一个新手，但我设法编写了一个，测试它，调试它，将它安装到我的 Iphone 上。我现在正在最后一步通过应用程序加载器上传它......

我的问题是我无法安装应用程序加载器。我已经下载了它，运行 .dmg，这会在我的系统上创建一个带有文件 applicationloader.pkg 的新设备。我运行它，它运行我完成安装，我已经输入了我的管理员权限，它说安装完成。

但它在任何地方都没有该程序。我查看了应用程序，在查找器中进行了搜索，但找不到应用程序加载器的位置。

1 - 是否有无法正确安装的原因？2 - 有没有办法下载以前的版本（当前是 2.7）来尝试 3 - 有没有没有应用程序加载器的上传方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:38:39.753

如果您的机器上安装了最新的 Xcode，请转到 Xcode 菜单项/开发人员工具并打开应用程序加载器。如果您正在使用 Xcode，则无需使用应用程序加载器。将应用程序导入 iTunes 连接所需的每一步都可以通过 Xcode 完成。步骤是存档（用于发布），选择存档 - 验证它（您已经在 iTunes Connect 中准备好您的应用程序（必须处于准备上传状态）并将其提交到商店。

# ruby - 不能通过包含模块来重新定义类的实例方法？

> ID：12154274
> 
> 赞同：3
> 
> 时间：2012-08-28T06:59:45.530
> 
> 标签：ruby

我有一个疱疹的时刻。我可以发誓这行得通：

```
module StubbedGreeting
  def sayit
    puts "StubbedGreeting"
  end
end

module RegularGreeting
  def sayit
    puts "RegularGreeting"
  end
end

class Greeting
  def sayit
    raise "Gotta catch me!"
  end
end

class GreetingIncludes
  include RegularGreeting
end

begin
  Greeting.send(:include, StubbedGreeting)
  Greeting.new.sayit
rescue Exception
  puts "Exception raised"
end

GreetingIncludes.send(:include, StubbedGreeting)
GreetingIncludes.new.sayit 
```

这里发生的`Greeting.new.sayit`结果`rescue`是调用块，忽略 StubbedGreeting 尝试的覆盖。

但是，`GreetingIncludes.new.sayit`结果是“StubbedGreeting”，也不例外。

所以一个模块可以覆盖另一个模块的方法，但不能覆盖已经直接在类中定义的方法？

我知道如何解决这个问题，我只是觉得很奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:25:55.113

当包含一个模块时，它的方法按照方法解析顺序放在类的方法和它的父类之间。因此，在解析要调用哪个实际方法时，ruby 首先按以下顺序搜索该方法。如果找到匹配方法，则中止搜索并使用此方法。

*   对象的单例类
*   包含在单例类中的模块从最后包含到第一个包含
*   对象的类
*   包含在类中的模块

然后对于每个父类继续进行，直到`Class`到达该类。

如您所见，模块确实不能覆盖在类本身上定义的方法，因为模块在方法解析顺序中位于实际类的后面。如果你真的需要重写这样的方法，你可以使用`alias_method`or`alias_method_chain`来“重命名”方法。

在即将到来的 Ruby 2.0 中将有一个[前置机制](http://bugs.ruby-lang.org/issues/1102)，它将在类之前包含模块，这将实现您想要的。但它还没有发布。

# c# - 在 WinForm 中创建边界控件的最佳实践

> ID：12154277
> 
> 赞同：0
> 
> 时间：2012-08-28T06:59:57.140
> 
> 标签：c#, .net, winforms, border

我正在用 C# .NET 编写 WinForm 应用程序，当用户单击它时，我需要向应用程序的任何 UI 组件添加虚线/点线或任何其他类型的边框。我想在 Visual Studio 中获得类似 WinForm GUI 编辑器的东西。

我是 .NET 的新手，所以我不太清楚通过本机方法和属性可以实现什么，以及我需要自己实现什么。我试图在网上和这里找到一些东西，但我不确定要搜索什么，有不同的方法。例如可以人工绘制边框，我的意思是使用图形。但我想应该有更简单的方法。

你有什么建议？在这种情况下，最佳做法是什么？请提供部分代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:17:44.353

每个`Control`人都有一个`Paint`事件。您必须订阅此事件并查看给定的参数。`sender`是应该绘制的当前控件。您可以在您的方法中将其转换为`Control`. 现在您可以通过检查来检查控件是否聚焦`control.Focused`，如果它是真的，只需在 PaintEventArgs 的图形对象中做任何您喜欢的事情。这可以进一步封装在一个扩展方法中，这将使使用变得相当容易。

```
public static void DrawBorderOnFocused(this Control control)
{
    if(control == null) throw new ArgumentNullException("control");
    control.Paint += OnControlPaint;
}

public static void OnControlPaint(object sender, PaintEventArgs e)
{
    var control = (Control)sender;

    if(control.Focused)
    {
       var graphics = e.Graphics;
       var bounds = e.Graphics.ClipBounds;

       // ToDo: Draw the desired shape above the current control
       graphics.DrawLine(Pens.BurlyWood, new PointF(bounds.Left, bounds.Top), new PointF(bounds.Bottom, bounds.Right));
    }
} 
```

代码中的用法将类似于：

```
public MyClass()
{
    InitializeComponent();

    textBox1.DrawBorderOnFocused();
    textBox2.DrawBorderOnFocused();
} 
```

# javascript - 检测元素是否真的可见

> ID：12154278
> 
> 赞同：5
> 
> 时间：2012-08-28T06:59:57.753
> 
> 标签：javascript

如果一个元素可以被人类看到，那么以下所有条件都必须为真：

*   `jQuery(elem).is(':visible')`返回`true`。[在 jQuery 1.3.2+ 中，如果浏览器报告的 offsetWidth 或 offsetHeight 大于 0，则元素可见](http://docs.jquery.com/Release%3ajQuery_1.3.2#%3avisible.2F%3ahidden_Overhauled)。
*   `visibility`风格不行`hidden`。
*   `opacity`风格不行`0`。

但是，这些并不涵盖所有情况。例如，我能想到的一个简单情况是，如果一个元素落在其祖先之一的可见区域之外并且该祖先具有 style `overflow: hidden`，则该元素将无法被看到。

任何现有的示例/jQuery 插件/等。涵盖大部分（如果不是全部）可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:32:21.333

人类是否可以看到一个元素是不可能的。以下是您无法涵盖的其他一些情况：

1.  另一个浏览器选项卡已打开
2.  另一个应用程序隐藏了浏览器窗口
3.  显示器已关闭
4.  用户闭上了眼睛……等等。

【讽刺结束】

# solr - 我想创建像谷歌这样的搜索引擎，我应该使用哪个搜索引擎？

> ID：12154279
> 
> 赞同：-2
> 
> 时间：2012-08-28T06:59:57.660
> 
> 标签：solr, search-engine, elasticsearch, django-haystack

我想创建一个像谷歌这样的搜索引擎。我应该使用哪个搜索引擎？solr 或 elasticsearch 适合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:04:42.970

也许[Nutch](http://nutch.apache.org/)是一个很好的起点。尤其是因为它还包括爬网并使用 Lucene。Solr 中也使用了 Lucene，最新版本具有出色的[SolrCloud](http://wiki.apache.org/solr/SolrCloud/)功能，可以更轻松地进行扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:17:57.270

*（披露：这篇文章的作者与所链接的产品有关联）*

我还建议[OpenSearchServer](http://www.open-search-server.com)。网络爬虫已经成熟。我们使用它来索引单个实例上的数千个网站。

重点是它将网络爬虫和搜索引擎包含在一个应用程序中。通过该界面，您可以设置数据模型、自定义相关性、管理抓取过程。

# javascript - Javascript：如何用空格替换字符串中的所有字符？

> ID：12154283
> 
> 赞同：0
> 
> 时间：2012-08-28T07:00:09.413
> 
> 标签：javascript, string, replace

我有两个问题：

1.  假设如果我有一个字符串`"Have a nice day"` ，这就是我想要的输出： `" "`（15 个空格）

2.  另外你如何在javascript中动态创建一个字符串例如：在`ruby`

    `"A"*10` `"AAAAAAAAAA"`

如果后者是可能的，我可以做第一个（像这样。）`" "*(input.length)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:04:14.793

可以使用以下方法实现：

```
// returns a string with 10 "A" (one less than the array length, which is 11) 
new Array(11).join("A"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T07:07:54.993

***Q1的答案：***

```
var str = "Have a nice day";
str = str.replace(/./g, ' '); 
```

***第二季度的答案：***

```
String.prototype.repeat = function(n) {
  return new Array(n+ 1).join(this);
};

"A".repeat(10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T07:06:06.577

1) `'Have a nice day'.replace(/./g,' ');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:07:09.123

1.)

```
"Have a nice day".replace(/(.)/g, ' '); 
```

2.)

```
(new Array(11)).join('A'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T07:12:35.737

1.  `"Have a nice day".replace(/./g, ' ');`

2.  `var str = "Have a nice day"; (new Array(str.length+1)).join(' ');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T07:32:33.863

您可以通过一种简单的方式完成所有操作：

```
var myString = "Have a nice day";

var emptyString = cleaner(' ', emptyString.lenght);
var aString = cleaner('A', emptyString.lenght);

var cleaner = function(charColor,length){
    return new Array(length)).join(charColor);
} 
```

# java - 带有 Trema 的字母显示为百分号

> ID：12154286
> 
> 赞同：0
> 
> 时间：2012-08-28T07:00:37.397
> 
> 标签：java, string, byte

在我的程序中，我将作为输入得到的字节流转换为字符串。但是当字节流包含带有 ë 的单词时，该字母将转换为 %。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:27:00.247

为了编码这些字符，

将 String 对象转换为`UTF-8`，调用`getBytes`方法并指定适当的编码标识符作为参数。getBytes 方法返回 UTF-8 格式的字节数组。要从非 Unicode 字节数组创建 String 对象，请使用 encoding 参数调用 String 构造函数。参考这个，

```
try {
    byte[] utf8Bytes = original.getBytes("UTF8");
    byte[] defaultBytes = original.getBytes();

    String roundTrip = new String(utf8Bytes, "UTF8");
    System.out.println("roundTrip = " + roundTrip);
    System.out.println();
    printBytes(utf8Bytes, "utf8Bytes");
    System.out.println();
    printBytes(defaultBytes, "defaultBytes");
} 
catch (UnsupportedEncodingException e) {
    e.printStackTrace();
} 
```

# c# - 通过使用 linq to ado.net entity froamwork 将记录插入到具有一对多关系的两个表中

> ID：12154287
> 
> 赞同：2
> 
> 时间：2012-08-28T07:00:44.077
> 
> 标签：c#, linq, entity-framework-4, linq-to-entities

我有上面两个表，在部门表中`PersonID`是表的外键`PersonalInfo`。我有一个 Web 表单，其中包含 FirstName、SecondName、MobileNo 和 Department 文本框。所以我在`PersonID`插入`Department`.

你能告诉我如何通过使用 linq to entityframework 来存储部门的`PersonalInfo`ID吗？`PersonID`

这是我的代码：

```
PersonalInfo myRecipient = new PersonalInfo();
myRecipient.FirstName = id_firstName.ToString();
myRecipient.SecondName = id_lastName.Text.ToString();
myRecipient.MobileNo = id_mobileNo.Text.ToString();
Department myDepartment = new Department();
myDepartment.Department1 = id_departmentName.Text.ToString();
MyEntity myDB = new MyEntity();

myDB.AddToPersonalInfoes(myRecipient);

myDB.AddToDepartments(myDepartment);
myDB.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:16:05.367

在 EntityFramework 中，您正在使用**实体**和**引用**。因此，您不必关心 ID。您所要做的就是*设置从 Department 到 PersonalInfo 的引用*。EF 会处理您的 ID、PK 和 FK！

```
try 
{
  // create objects, set properties ...
  PersonalInfo myRecipient = new PersonalInfo();
  myRecipient.FirstName = id_firstName.ToString(); // CHECK if value is valid (correct max length, ..)
  // and so on ..

  // set reference from Entity Department to Recipient
  myDepartment.PersonalInfo = myRecipient;

  myDB.AddToPersonalInfoes(myRecipient);
  myDB.AddToDepartments(myDepartment);
  myDB.SaveChanges();
} 
catch (Exception ex)
{
  Debug.WriteLine(ex.Message);
  if (ex.InnerException!=null)
    Debug.WriteLine(ex.InnerException.Message);
} 
```

你可以看看这个[***博客***](http://blog.aggregatedintelligence.com/2010/05/entity-framework-inserting-objects-with.html)，它很好地说明了这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:06:57.387

```
myDepartment.PersonalInfo = myRecipient; 
```

顺便说一下，将表中的列名更改`Department`为`Department`，`DepartmentName`这样你就不会得到一个名为的属性`Department1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:21:32.717

在两个新实体关联为 Amiram Korach 指定后，您只需要以下代码之一：

```
 myDB.AddToPersonalInfoes(myRecipient);

    myDB.AddToDepartments(myDepartment); 
```

# twitter - 获取 Twitter 关注者的国家代码

> ID：12154289
> 
> 赞同：1
> 
> 时间：2012-08-28T07:00:49.387
> 
> 标签：twitter, country-codes

如何使用 Twitter API 获取我的 Twitter 关注者的国家代码？或者有什么办法可以得到同样的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:13:55.197

从文档[https://dev.twitter.com/docs/api/1/get/users/show](https://dev.twitter.com/docs/api/1/get/users/show)

响应应该有一个位置字段，比如

```
"location": "San Francisco, CA", 
```

那里的数据是自由文本，所以人们可以输入“伦敦”或纬度/经度，甚至是胡说八道。

大多数人都有一些地理数据。

# c# - 标签页上的 C# 工具提示

> ID：12154290
> 
> 赞同：1
> 
> 时间：2012-08-28T07:00:55.983
> 
> 标签：c#, winforms, .net-3.5, tooltip, tabpage

如何从刚刚添加的一些额外变量和使用事件扩展`Tooltip`我自己显示文本。`TabPages``TabPages``DrawItem`

我已经在方法中生成了它们。

```
ISIMtabPage newTab = new ISIMtabPage();

// setting up newTab
string contactName = getContactName(object);

chatFormTabs.TabPages.Add(newTab);

toolTip1.SetToolTip((ISIMtabPage)chatFormTabs.TabPages[chatId], contactName); 
```

但是，如果我将鼠标悬停在选项卡上，它不会做任何事情。

我`TabControl.ShowToolTips`启用了。

我应该怎么办？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:17:35.477

我会检查`toolTip1.SetToolTip`

工具提示使用示例：

```
using System.Drawing;
using System.Windows.Forms;

public class Form1 : Form
{
    private TabControl tabControl1;
    private TabPage tabPage1;
    private TabPage tabPage2;

    private void MyTabs()
    {
        this.tabControl1 = new TabControl();
        this.tabPage1 = new TabPage();
        this.tabPage2 = new TabPage();

        this.tabControl1.Controls.AddRange(new Control[] {
            this.tabPage1,
            this.tabPage2});
        this.tabControl1.Location = new Point(35, 25);
        this.tabControl1.Size = new Size(220, 220);

        // Shows ToolTipText when the mouse passes over tabs. 
        this.tabControl1.ShowToolTips = true;

        // Assigns string values to ToolTipText. 
        this.tabPage1.ToolTipText = "myTabPage1";
        this.tabPage2.ToolTipText = "myTabPage2";

        this.Size = new Size(300, 300);
        this.Controls.AddRange(new Control[] {
            this.tabControl1});
    }

    public Form1()
    {
        MyTabs();
    }

    static void Main() 
    {
        Application.Run(new Form1());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-30T23:45:23.560

实际上有点棘手，因此请确保 tabControl1 属性中的“ShowToolTips”为 True。

1.  form1 有一个 tooltip1 和一个名为 tabControl1 的 TabControl，其中包含多个用于测试的选项卡

2.  tabControl1 有一个选项卡集合

3.  编辑集合并将您想要的选项卡设置为工具提示“工具提示上的工具提示”和工具提示文本为“您的消息”

# c# - SSMS SMO 对象：获取查询结果

> ID：12154291
> 
> 赞同：4
> 
> 时间：2012-08-28T07:00:56.090
> 
> 标签：c#, sql-server, ado.net, ssms, smo

我通过[本](http://weblogs.asp.net/jgalloway/archive/2006/11/07/Handling-_2200_GO_2200_-Separators-in-SQL-Scripts-_2D00_-the-easy-way.aspx)教程了解如何使用 GO 语句执行 SQL 脚本。
现在我想知道我可以得到消息 TAB 的输出。

使用多个 GO 语句，输出将如下所示：
1 行受影响
912 行受影响
......

但是 server.ConnectionContext.ExecuteNonQuery() 只能返回一个 int，而我需要所有文本。如果查询的某些部分出现错误，它也应该将其放在输出中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:08:28.657

最简单的事情可能是只打印您返回的号码`ExecuteNonQuery`：

```
int rowsAffected = server.ConnectionContext.ExecuteNonQuery(/* ... */);
if (rowsAffected != -1)
{
     Console.WriteLine("{0} rows affected.", rowsAffected);
} 
```

这应该有效，但不会尊重`SET NOCOUNT`当前会话/范围的设置。

否则，您将像使用“普通”ADO.NET 一样进行操作。不要使用方法，而是通过访问底层对象来`ServerConnection.ExecuteNonQuery()`创建对象。在那订阅事件。`SqlCommand``SqlConnection``StatementCompleted`

```
using (SqlCommand command = server.ConnectionContext.SqlConnectionObject.CreateCommand())
{
    // Set other properties for "command", like StatementText, etc.

    command.StatementCompleted += (s, e) => {
         Console.WriteLine("{0} row(s) affected.", e.RecordCount);
    };

    command.ExecuteNonQuery();
} 
```

使用`StatementCompleted`（例如，手动打印`ExecuteNonQuery()`返回的值）的好处是它的工作方式与 SSMS 或 SQLCMD.EXE 完全一样：

*   对于没有 ROWCOUNT 的命令，它根本不会被调用（例如，GO、USE）。
*   如果`SET NOCOUNT ON`已设置，则根本不会调用它。
*   如果`SET NOCOUNT OFF`已设置，它将为批处理中的每个语句调用。

（侧边栏：看起来`StatementCompleted`正是 TDS 协议在`DONE_IN_PROC`提到事件时所谈论的内容；请参阅MSDN 上的 SET NOCOUNT 命令的[备注。）](http://msdn.microsoft.com/en-us/library/ms189837%28v=sql.90%29.aspx)

就个人而言，我在自己的 SQLCMD.EXE 的“克隆”中成功地使用了这种方法。

**更新**：应该注意的是，这种方法（当然）需要您在`GO`分隔符处手动拆分输入脚本/语句，因为您又回到使用`SqlCommand.Execute*()`它不能一次处理多个批次。为此，有多种选择：

*   `GO`手动拆分以(caveat:开头的行的输入`GO`，`GO 5`例如，执行前一批 5 次)。
*   使用[ManagedBatchParser](http://msdn.microsoft.com/en-us/library/managedbatchparser.aspx)类/库来帮助您将输入拆分为单个批次，尤其是使用上面的代码（或类似代码）实现[ICommandExecutor.ProcessBatch 。](http://msdn.microsoft.com/en-us/library/managedbatchparser.icommandexecuter.processbatch.aspx)

我选择后一个选项，这是相当多的工作，因为它没有很好的文档记录并且示例很少（谷歌一下，你会找到一些东西，或者使用反射器来查看 SMO-Assemblies 如何使用该类） .

使用 的好处（也可能是负担）`ManagedBatchParser`是，它还将为您解析 T-SQL 脚本的所有其他构造（用于`SQLCMD.EXE`）。包括：`:setvar`, `:connect`,等。当然，如果您的脚本不使用它们，则不必`:quit`实现相应的成员。`ICommandExecutor`但请注意，您可能无法执行“任意”脚本。

好吧，那是不是把你放了。从如何打印“...行受影响”的“简单问题”到以稳健和通用的方式进行操作并非易事（考虑到所需的背景工作）。YMMV，祝你好运。

**ManagedBatchParser 使用更新**

似乎没有关于如何实施的好的文档或示例`IBatchSource`，这就是我所使用的。

```
internal abstract class BatchSource : IBatchSource
{
    private string m_content;

    public void Populate()
    {
        m_content = GetContent();
    }

    public void Reset()
    {
        m_content = null;
    }

    protected abstract string GetContent();

    public ParserAction GetMoreData(ref string str)
    {
        str = null;

        if (m_content != null)
        {
            str = m_content;
            m_content = null;
        }

        return ParserAction.Continue;
    }
}

internal class FileBatchSource : BatchSource
{
    private readonly string m_fileName;

    public FileBatchSource(string fileName)
    {
        m_fileName = fileName;
    }

    protected override string GetContent()
    {
        return File.ReadAllText(m_fileName);
    }
}

internal class StatementBatchSource : BatchSource
{
    private readonly string m_statement;

    public StatementBatchSource(string statement)
    {
        m_statement = statement;
    }

    protected override string GetContent()
    {
        return m_statement;
    }
} 
```

这就是你将如何使用它：

```
var source = new StatementBatchSource("SELECT GETUTCDATE()");
source.Populate();

var parser = new Parser(); 
parser.SetBatchSource(source);
/* other parser.Set*() calls */

parser.Parse(); 
```

请注意，无论是针对直接语句 ( `StatementBatchSource`) 还是针对文件 ( `FileBatchSource`)，这两种实现都存在将完整文本一次读入内存的问题。我有一个案例爆炸了，有一个巨大的（！）脚本，其中包含大量生成的`INSERT`语句。尽管我认为这不是一个实际问题，`SQLCMD.EXE`但可以处理它。但是对于我的一生，我无法弄清楚你需要如何形成返回的块，`IBatchParser.GetContent()`以便解析器仍然可以使用它们（看起来它们需要是完整的语句，这有点像首先击败解析的目的......）。

# php - 我应该如何在这里使用函数和/或组合一些代码？

> ID：12154294
> 
> 赞同：0
> 
> 时间：2012-08-28T07:01:10.193
> 
> 标签：php, performance, function

我扩展了一些带有分页的表格和对列进行排序的可能性。到目前为止一切正常，但我最多可以在 10 页上使用相同的代码，所以我考虑使用函数，但我不确定为每个部分使用函数是否合理（性能等）或如果我应该结合几件事，所以我需要一些建议..

目前一页的代码如下所示（每个数字都可以是一个函数）：

```
$limit = 30; 
```

1.

```
$sql = 'SELECT
            COUNT(`news_id`)
        FROM
            `news`';

$stmt = $db->prepare($sql);
$stmt->execute();
$stmt->bind_result($count);
$stmt->fetch();
$stmt->free_result();
$stmt->close() 
```

2.

```
if ($count === 0)
{
    $max_pages = 1;
}
else
{
    $max_pages = (int)ceil($count/$limit);
} 
```

3.

```
if (isset($_GET['page']))
{
    if (preg_match('/^[0-9]{1,}$/', $_GET['page'])
    && ($_GET['page'] > 1
    && $_GET['page'] <= $max_pages))
    {
        $current_page = (int)$_GET['page'];
        $offset = ($current_page - 1) * $limit;
    }
    else
    {
        header('location: http://' .SERVERNAME. '/admin/news/');
        exit;
    }
}
else
{
    $current_page = 1;
    $offset = 0;
} 
```

4.

```
$valid_sort = array('id', 'date', 'title');

if (isset($_GET['sort']))
{
    if(in_array($_GET['sort'], $valid_sort))
    {
        $sort = $_GET['sort'];
    }
    else
    {
        header('location: http://' .SERVERNAME. '/admin/news/');
        exit;
    }
}
else
{
    $sort = 'id';
} 
```

5.

```
$valid_order = array('asc', 'desc');

if (isset($_GET['order']))
{
    if(in_array($_GET['order'], $valid_order))
    {
        $current_order = $_GET['order'];
    }
    else
    {
        header('location: http://' .SERVERNAME. '/admin/news/');
        exit;
    }
}
else
{
    $current_order = 'desc';
} 
```

由于 4 和 5 几乎相同，我可以在这里使用不同的参数调用相同的函数，但我仍然不确定调用最多 5 个函数是否真的有意义..

最后我需要以下变量：`$limit, $count, $max_pages, $current_page, $offset, $sort, $current_order`

**编辑**：为了清楚起见，问题不在于函数如何工作，或者是否可以在这里使用它们。问题是，一个函数应该与我想用它做什么相关联有多复杂？例如，我可以编写一个具有 120 行和 8 个参数的函数，但我只需要调用 1 个函数/页面......或者我可以保持简短（1 个函数用于 1 个目的/变量），但我需要调用更多功能/页面..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:06:12.817

长话短说。**是的。**

这很简单。如果可以将某些东西放入函数中并使其可重用，那就去做吧！它将组织您的代码，您可以更轻松地重用它。否则，您将不得不在之后重写代码以将其放入函数中。所以是的，如果有必要，这样做并使其对每个文件都可访问。

另外，如果可能，请尝试从函数开始以完全理解它们，如果可以，请从 OOP 开始！它会让你的生活变得更轻松。我希望这有帮助。

我不会重写你的代码，我认为如果你自己做这对你自己来说是个好习惯。如果这很难并且您自己无法完成，请随时询问 SO :)

*   编辑：关于你所说的表现，别担心。一个函数可能比复制粘贴慢 0.00000000001 纳秒。但是，如果您将可读性和编程考虑在内，请使用函数。如果您不关心代码的外观，并且想要花 5 天时间进行简单的调整，请不要使用函数；）

# unix - PHP-FPM：升级到 APC 后无法使用 fopen() 写入文件

> ID：12154295
> 
> 赞同：0
> 
> 时间：2012-08-28T07:01:16.390
> 
> 标签：unix, nginx, php

PHP 以用户“nginx”的身份运行，但我不确定如何编辑该用户的写入权限。

PHP 可以正常执行，但 fopen() 和写入 error_log 将不起作用。默认设置是“php”作为用户，产生相同的结果。

这之前工作正常，但升级到 APC 时似乎出现了问题。

配置命令：

```
'./configure' '--build=x86_64-unknown-linux-gnu' '--host=x86_64-unknown-linux-gnu' '--target=x86_64-redhat-linux-gnu' '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' '--libexecdir=/usr/libexec' '--localstatedir=/var' '--sharedstatedir=/var/lib' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--cache-file=../config.cache' '--with-libdir=lib64' '--with-config-file-path=/etc' '--with-config-file-scan-dir=/etc/php.d' '--disable-debug' '--with-pic' '--disable-rpath' '--without-pear' '--with-bz2' '--with-exec-dir=/usr/bin' '--with-freetype-dir=/usr' '--with-png-dir=/usr' '--with-xpm-dir=/usr' '--enable-gd-native-ttf' '--with-t1lib=/usr' '--without-gdbm' '--with-gettext' '--with-gmp' '--with-iconv' '--with-jpeg-dir=/usr' '--with-openssl' '--with-pcre-regex=/usr' '--with-zlib' '--with-layout=GNU' '--enable-exif' '--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--with-kerberos' '--enable-ucd-snmp-hack' '--enable-shmop' '--enable-calendar' '--with-libxml-dir=/usr' '--enable-xml' '--with-system-tzdata' '--with-mhash' '--enable-fpm' '--libdir=/usr/lib64/php' '--without-mysql' '--disable-pdo' '--without-gd' '--disable-dom' '--disable-dba' '--without-unixODBC' '--disable-xmlreader' '--disable-xmlwriter' '--without-sqlite' '--without-sqlite3' '--disable-phar' '--disable-fileinfo' '--disable-json' '--without-pspell' '--disable-wddx' '--without-curl' '--disable-posix' '--disable-sysvmsg' '--disable-sysvshm' '--disable-sysvsem' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:38:10.320

原来这是一个权限问题，通过将文件夹的所有者更改为运行 php 的用户（在本例中为“nginx”）来解决。

```
chown -R nginx /home/html 
```

# c++ - 在函数中传递参数 - OpenCV & Cpp

> ID：12154296
> 
> 赞同：2
> 
> 时间：2012-08-28T07:01:17.200
> 
> 标签：c++, opencv, argument-passing

我已经来回解决这个问题有一段时间了，特别是自从我开始使用 OpenCV 库以来。事实上，在 OpenCV 中，使用了几种方法：

*   第一个：funcA((const) CvMat arg)
*   第二：funcA((const) CvMat& arg)
*   第三：funcA((const) CvMat* arg)
*   4th: funcA((const) CvMat*& arg) => 我刚刚看到并且目前被困在这个

当然，对应每个方法，调用者格式和函数实现应该是不同的。

所有这些衍生品有什么意义？特别是最后一个（我还没有理解它的用法）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:50:36.000

暂时忽略`(const)`，`int`为了清楚起见使用：

按值传递在函数体中进行复制

```
void funcA(int arg) {
  // arg here is a copy
  // anything I do to arg has no effect on caller side.
  arg++; // only has effect locally
} 
```

请注意，它在语义上会创建一个副本，但允许编译器在某些条件下删除副本。查找[复制省略](http://en.wikipedia.org/wiki/Copy_elision)

通过参考。我可以修改调用者传递的参数。

```
void funcA(int& arg) {
  // arg here is a reference
  // anything I do to arg is seen on caller side.
  arg++;
} 
```

*按值*传递指针。我得到了指针的副本，但它指向调用者参数指向的同一个对象

```
void funcA(int* arg) {
  // changes to arg do not affect caller's argument
  // BUT I can change the object pointed to
  (*arg)++; // pointer unchanged, pointee changed. Caller sees it.
} 
```

传递对指针的引用。我可以更改指向本身，调用者将看到更改。

```
void funcA(int*& arg) {
  // changes to arg affect caller's argument
  // AND I can change the object pointed to.
  (*arg)++; // pointee changed
  arg++; // pointer changed. Caller sees it.
} 
```

如您所见，后两个与前两个相同，只是它们处理指针。如果您了解指针的作用，那么在概念上就没有区别。

关于`const`，它指定参数是否可以修改，或者，如果参数是引用或指针，它们指向/引用的内容是否可以修改。这里的定位`const`很重要。例如，参见[const 正确性](http://en.wikipedia.org/wiki/Const-correctness)。

# asp.net-mvc-3 - Safari，MVC3 ajax 表单提交

> ID：12154302
> 
> 赞同：0
> 
> 时间：2012-08-28T07:01:47.057
> 
> 标签：asp.net-mvc-3, jquery, safari, form-submit

我有一个可以在 FF、IE 8、IE 9、chrome 中提交的表单。

在 safari (windows) 中，它提交但我的模型是空的。此行为仅在我的开发和产品站点上，而不是本地开发。本地开发工作正常。我在这里做错了什么？

形式：

```
<form action="/NetSite/Applications/ElectronicFileTransfer" id="TransfersSearchForm" method="post">        
    <table class="siteTable">
            <tbody>
                <tr>
                    <th style="width: 20%;">FICE</th>
                    <td style="width: 80%;"><input id="Criteria_Fice" maxlength="6" name="Criteria.Fice" size="6" type="text" value="" /></td>
                </tr>
                <tr>
                    <th>Source Email</th>
                    <td><input id="Criteria_SourceEmail" maxlength="40" name="Criteria.SourceEmail" size="25" type="text" value="" /></td>
                </tr>
                <tr>
                    <th>Target Email</th>
                    <td><input id="Criteria_TargetEmail" maxlength="100" name="Criteria.TargetEmail" size="25" type="text" value="" /></td>
                </tr>
                <tr>
                    <th>Upload From Date</th>
                    <td>

            <input class="datePicker" data-val="true" data-val-date="Invalid date specified. Date should be like MM/DD/YYYY." id="Criteria_FromDate" maxlength="12" name="Criteria.FromDate" size="12" type="text" value="" />

                        <span class="field-validation-valid" data-valmsg-for="Criteria.FromDate" data-valmsg-replace="true"></span>
                    </td>
                </tr>
                <tr>
                    <th>Upload To Date</th>
                    <td>

            <input class="datePicker" data-val="true" data-val-date="Invalid date specified. Date should be like MM/DD/YYYY." id="Criteria_ToDate" maxlength="12" name="Criteria.ToDate" size="12" type="text" value="" />

                        <span class="field-validation-valid" data-valmsg-for="Criteria.ToDate" data-valmsg-replace="true"></span>
                    </td>
                </tr>
                <tr>
                    <th class="empty"></th>
                    <td>
                        <button type="submit" title="Search" id="SubmitButton" class="gradientbutton gradientsmall gradientorange">Search</button>&nbsp;
                        <button type="button" title="Clear" id="ClearButton" class="gradientbutton gradientsmall gradientorange">Reset</button>
                    </td>
                </tr>
            </tbody>
        </table>
</form> 
```

事件调用的JS提交方法：

```
searchFormSubmit: function ($form, currentForm) {
        if ($form.valid()) {
            var $button = $("#" + FileTransferHome._enum.SubmitButton);
            var $searchResults = $("#" + FileTransferHome._enum.SearchResultsDivId);

            jMessage("Processing request...", $button, true, false);
            $.ajax({
                cache: false,
                url: currentForm.action,
                type: currentForm.method,
                data: $form.serialize(),
                error: function (xhr, ajaxOptions, thrownError) {
                    jMessageHide();
                    $searchResults.html(xhr.responseText).addClass(JSGlobalVars.MessageBoxError).fadeIn('slow');
                },
                success: function (result) {
                    jMessageHide();
                    $searchResults.removeClass(JSGlobalVars.MessageBoxError).html(result).fadeIn('slow');
                    location.hash = "SEARCHRESULTS";
                }
            });
        }
    } 
```

行动：

我在那里有一个 else 块，我只是为了测试这个案例而放入的，它执行而不是主块。

```
[HttpPost]
public ActionResult Index(ElectronicFileTransferHomeViewModel model)
{
    ... actions...
} 
```

![在此处输入图像描述](../Images/0635083574cfaa3f95de4b41f6a3c98a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T22:43:40.783

这在作为内部应用程序和 Windows 登录之后。Safari 在 Windows 身份验证方面没有问题。一个似乎对我们有用的解决方法（虽然并不理想）是将 Safari 置于隐私浏览模式。

# javascript - jquery手机单页app+视频+动态变化视频

> ID：12154307
> 
> 赞同：-1
> 
> 时间：2012-08-28T07:02:09.787
> 
> 标签：javascript, jquery-mobile, html5-video

有没有人找到一种强大的方法来动态更改视频元素的来源并使其在 Iphone 上运行？我的测试在 Chrome 中运行良好，但我无法使其始终如一地运行。欢迎任何关于策略或玩家的建议，因此它适用于任何设备。

我有一个视频元素：

```
<video id="player1" width="320" height="240" preload controls>
    <source src="http://dev.swinginsam.com/_files/testvid_01.mp4" />
    <source src="http://dev.swinginsam.com/_files/testvid_01.webm" type='video/webm; codecs="vp8, vorbis"' />
    <source src="http://dev.swinginsam.com/_files/testvid_01.ogv" type='video/ogg; codecs="theora, vorbis"' />
    <object width="320" height="240" type="application/x-shockwave-flash"
    data="flowplayer-3.2.1.swf">
        <param name="movie" value="flowplayer-3.2.1.swf" />
        <param name="allowfullscreen" value="true" />
        <param name="flashvars" value='config={"clip": {"url":     "http://dev.swinginsam.com/_files/testvid_01.mp4", "autoPlay":false, "autoBuffering":true}}' />
         <p>Download video as
            <a href="http://dev.swinginsam.com/_files/testvid_01.mp4">MP4</a>,
            <a href="http://dev.swinginsam.com/_files/testvid_01.webm">WebM</a>, or <a href="http://dev.swinginsam.com/_files/testvid_01.ogv">Ogg</a>.</p>
    </object>
</video> 
```

还有一段代码用于初始化我使用 mediaelementjs 的播放器 - 它在播放器被正确初始化和蒙皮并适用于第一个视频的情况下工作：

```
$('#one').live("pageinit", function (event, data) {

 var player1 = new MediaElementPlayer('#player1',{});

 $('#button1').click(function(){
    player1.pause();
    player1.setSrc([
       {src:"http://dev.swinginsam.com/_files/testvid_01.mp4"},
       {src:"http://dev.swinginsam.com/_files/testvid_01.webm", type:'video/webm; codecs="vp8, vorbis"'},
       {src:"http://dev.swinginsam.com/_files/testvid_01.ogv", type:'video/ogg; codecs="theora, vorbis"'}
 ]);

 $('#button2').click(function(){
     player1.pause();
     player1.setSrc([
         {src:"http://dev.swinginsam.com/_files/testvid_02.mp4"},
         {src:"http://dev.swinginsam.com/_files/testvid_02.webm", type:'video/webm; codecs="vp8, vorbis"'},
         {src:"http://dev.swinginsam.com/_files/testvid_02.ogv", type:'video/ogg; codecs="theora, vorbis"'}
      ]);
      player1.load();
 });
}); 
```

当您按下按钮并开始更改源时，问题就开始了。它适用于 Chrome，但 Safari 只是继续播放第一个视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:17:06.957

您缺少 . 的右括号`});`。`$('#button1').click(function(){`javascript应该是：

```
$('#one').live("pageinit", function(event, data) {

    var player1 = new MediaElementPlayer('#player1', {});

    $('#button1').click(function() {
        player1.pause();
        player1.setSrc([
            {
            src: "http://dev.swinginsam.com/_files/testvid_01.mp4"},
        {
            src: "http://dev.swinginsam.com/_files/testvid_01.webm",
            type: 'video/webm; codecs="vp8, vorbis"'},
        {
            src: "http://dev.swinginsam.com/_files/testvid_01.ogv",
            type: 'video/ogg; codecs="theora, vorbis"'}
        ]);

    });

    $('#button2').click(function() {
        player1.pause();
        player1.setSrc([
            {
            src: "http://dev.swinginsam.com/_files/testvid_02.mp4"},
        {
            src: "http://dev.swinginsam.com/_files/testvid_02.webm",
            type: 'video/webm; codecs="vp8, vorbis"'},
        {
            src: "http://dev.swinginsam.com/_files/testvid_02.ogv",
            type: 'video/ogg; codecs="theora, vorbis"'}
        ]);
        player1.load();
    });

});​ 
```

# iphone - 淡出不适合的文本标签字符串的结尾（而不是截断）

> ID：12154313
> 
> 赞同：6
> 
> 时间：2012-08-28T07:02:29.493
> 
> 标签：iphone, ios, text, nsstring, uilabel

我不确定“淡出”是否是正确的术语，因为它似乎很多指的是动画效果，但我想要实现的可以在 iPhone Safari 应用程序的地址栏中看到。当 URL 太长而无法显示时，字符串的结尾会“淡出”而不是用“...”截断。

我认为这可以通过将 XIB 文件中的换行符设置从“Truncate Tail”更改为“Clip”，然后使用具有透明度的图像来创建效果来轻松完成。但是设置为“剪辑”似乎会剪辑在单词的末尾，而不是单词的中间，甚至是字母的中间，就像在 Safari 或 Chrome for iPhone 中看到的那样。这对我来说不太适用，它实际上给人的印象是文本是完整的，当仔细检查时，用户会注意到文本没有意义。

“淡出”不适合文本标签的字符串的最佳方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T09:10:27.050

看看 Google Toolbox for Mac [GTMFadeTruncatingLabel](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/iPhone/GTMFadeTruncatingLabel.h)，它是一个可重复使用的组件，正是这样做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-17T10:15:49.157

您还可以使用此处找到的类别的组合：（[https://stackoverflow.com/a/24508153/2654425](https://stackoverflow.com/a/24508153/2654425)）和渐变。

并做：

```
if([myLabel isTruncated]){

  CAGradientLayer *l = [CAGradientLayer layer];
            l.frame = myLabel.bounds;
            l.colors = @[(id)[UIColor whiteColor].CGColor, (id)[UIColor clearColor].CGColor];
            l.startPoint = CGPointMake(1.f, .1f);
            l.endPoint = CGPointMake(0.95f, 1.0f);
            myLabel.layer.mask = l;

} 
```

这适用于 iOS 7 和 iOS8。

# ruby-on-rails - DB Schema 和 Rails 关联

> ID：12154314
> 
> 赞同：0
> 
> 时间：2012-08-28T07:02:32.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以我有一个有点复杂的数据模型，并试图弄清楚如何对其进行建模。

我有`Client`。那`Client`属于一个`Firm`。

将`Firm`具有以下属性：

```
 - Firm Size (0.2, 0.4, 0.6, etc.)
 - Firm Type (Big, Small, Medium)
 - Priority Level (1, 2, 3, 4, 5 - from low to high) 
```

一个`User`has_many `Clients`。

该用户需要能够编辑每个公司的属性：

例如添加一个新的大小`Firm Size`（比如 0.95）。

所以我想有一个`Firm`模型。然后还分别为每个属性建立一个模型。这样用户就可以将新记录添加到公司规模等。

我有点困惑的是命名，`Firm`考虑到foreign_ids和所有的东西，这不会让每个条目看起来有点奇怪吗？我将如何操作数据？

例如，对于一家公司，记录可能如下所示：

```
:name => "Firm A", :firm_size_id => 1, :firm_type_id => 2, :priority_level_id => 1 
```

然后，当我想找到一家公司的规模时，我必须运行这样的查询：

```
Firm.find(1).firm_size.size 
```

对于 FirmSize，我将属性命名为什么：“大小”？如果我这样做，那么我会像上面这样进行 Rails 调用？：

`FirmSize.find(1).size`

这看起来有点尴尬。或者我会命名属性`name`？`FirmSize.find(1).name`- 但这并没有完全捕捉到它是什么。在这种情况下，它是公司的规模。

这同样适用于“FirmType”和“PriorityLevel”等。

然后另一个问题是，一旦我想对这些属性进行任何计算，我是否必须做一些奇怪的体操，比如：

```
product = Firm.find(1).firmsize.size * Firm.find(2).firmsize.size 
```

这似乎有点尴尬……或者这是正常的吗？

希望能帮助我澄清我处理这个问题的方式。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:28:49.880

为什么要为公司的规模、类型和优先级创建单独的模型？
您应该尝试了解为任何信息提供属性/单独模型的目的。

在查看您的问题时，我想到了 XML 子元素和属性的类似概念。虽然它是题外话，但我相信这应该让你更清楚地了解整个事情：

*   [xml 属性与 xml 元素](https://stackoverflow.com/questions/33746/xml-attribute-vs-xml-element)

回到这个问题，我会说你继续制作`Firm`模型和`size, type etc.`属性。把它付诸实施，然后再回头看看你的问题。

我这么说的主要原因是我看不到`FirmType, FirmSize & FirmPriorityLevel having more than a fixed set of values`&
您的业务逻辑不会在很大程度上以 Firmtype 或 FirmSize 为中心。

如果是后者，我会说重新考虑你的策略。
*PS我不是说你做错了什么，只要确保你以最好的方式做。*

# c++ - c ++链接器错误-未内联定义函数的“未定义引用”

> ID：12154321
> 
> 赞同：0
> 
> 时间：2012-08-28T07:03:14.547
> 
> 标签：c++, linker, g++, codeblocks

几天来，我正在尝试使用 Code::Blocks IDE（在 Linux，Ubuntu 64 位上）编译一个用 C++ 编写的项目。代码有效，但存在一些链接器错误。我注意到对于未在类中内联定义并且在其他文件中的函数（类是 i *.h 文件，这些函数的定义在 *.cpp 中），我收到错误“未定义的引用”。我尝试编写自己的 Makefile，但没有帮助。

生成文件：

```
all: project

project: main.o DList.o Person.o
    g++ main.o DList.o Person.o -o project

main.o: main.cpp
    g++ -c main.cpp

DList.o: include/DList.cpp
    g++ -c include/DList.cpp

Person.o: include/Person.cpp
    g++ -c include/Person.cpp

clean:
    rm -rf *.o 
```

尽管我在网上阅读了一些有关这些错误的信息，但我不知道该怎么办。

// 编辑我将 Object.cpp 和 Object.h 更改为 Person.cpp 和 Person.h，将 *.cpp 文件移动到主目录并更改了 *.cpp 文件中的#include 路径。

错误：

```
obj/Debug/main.o||In function `main':|
...main.cpp|19|undefined reference to `DListIterator<Person>::go(int)'|
...main.cpp|20|undefined reference to `std::basic_ostream<char, std::char_traits<char> >& operator<< <Person>(std::basic_ostream<char, std::char_traits<char> >&, DList<Person>&)'|
...main.cpp|21|undefined reference to `DList<Person>::~DList()'|
...main.cpp|21|undefined reference to `DList<Person>::~DList()'|
obj/Debug/main.o||In function `DList<Person>::insert(Person&)':|
...include/DList.h|45|undefined reference to `DList<Person>::insert(Person&, DListIterator<Person>&)'|
||=== Build finished: 5 errors, 0 warnings ===| 
```

如果我在命令行中构建开始 make 或在 Code::Blocks 中使用 Build 函数，这没有区别。

当我将所有代码从 *.cpp 文件复制到 *.h 文件时，编译器没有返回任何错误，所以我认为这只是链接器的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:50:16.297

看起来您正在尝试单独编译模板。这通常是不可能的，因为模板只会在使用时被实例化，而不会在`DList.cpp`文件中使用。尝试以下两种方法之一：

*   将函数的定义移动`DList`到头文件中（这是正常的处理方式）。
*   将 in 的一些显式实例化`DList`到`DList.cpp`文件中。（例如`template class DList<Person>;`：）

问题的完整示例：目前您有：

```
//DList.h
template<typename T>
class DList {
    void insert(T& newPerson);
    //etc
};

//DList.cpp
#include "DList.h"
//The when this is being compiled, 
//the compiler does not know about Person,
//so it cannot instantiate this function.
template<typename T>
void DList<T>::insert(T& newPerson) {
    //implementation
}
//etc

//main.cpp
#include "DList.h"
#include "Person.h"
int main() {
    //When this is being compiled, it does not know the
    //definition of the out-of-line functions in `DList`,
    //so it cannot instantiate them.
    DList<Person> people;
    people.insert(Person("Joe"));
} 
```

一种可能的解决方法是删除`DList.cpp`定义并将其放入“DList.hpp”中：

```
//DList.hpp
template<typename T>
class DList {
    void insert(T& newPerson) {
        //implementation
    }
    ~DList();
    //etc
};
//the implementations can alternatively be
//placed outside the class, but in the header:
template<typename T>
DList<T>::~DList() {
    //implementation
} 
```

另一个修复是显式实例化`DList`（在定义可用的编译单元中）：

```
//DList.cpp
#include "DList.h"
#include "Person.h"
template<typename T>
void DList<T>::insert(T& newPerson) {
    //implementation
}
//Explicit instantiation:
template class DList<Person>; 
```

# javascript - 下拉项目上的单击事件 - jquery

> ID：12154329
> 
> 赞同：7
> 
> 时间：2012-08-28T07:03:34.263
> 
> 标签：javascript, jquery

从下拉列表项中选择元素时，我想触发单击事件。每个点击事件应该根据下拉元素的值而有所不同。

```
 <select id="cmbMoreFunction" name="cmbMoreFunction" multiple="multiple">
            <option value="0">ATM Event Status</option>
            <option value="1">Statistics</option>
 </select> 
```

如果我单击“ATM 事件状态”，则只有其特定的单击事件才会被触发。

我试过这个..但不起作用

```
 $('#cmbMoreFunction select option').click(function() 
 { 
    //Depend on Value i.e. 0 or 1 respective function gets called. 
 }); 
```

基本上我只是不想在我的页面上有另一个按钮来捕获所有值然后触发事件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T07:12:09.097

在选择上使用更改处理程序，读取它的值，然后决定要做什么：

```
$('#cmbMoreFunction').change(function() 
{ 
    var selectedValue = parseInt(jQuery(this).val());

    //Depend on Value i.e. 0 or 1 respective function gets called. 
    switch(selectedValue){
        case 0:
            handlerFunctionA();
            break;
        case 1:
            handlerFunctionB();
            break;
        //etc... 
        default:
            alert("catch default");
            break;
    }
});

function handlerFunctionA(){
    alert("do some stuff");    
}

function handlerFunctionB(){
    alert("Do some other stuff");
} 
```

​</p>

[这是一个有效的小提琴示例](http://jsfiddle.net/sfGug/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T07:23:41.687

检查这个[JsFiddle](http://jsfiddle.net/jrETs/)

简单使用此代码 **JQuery：**

```
$('#cmbMoreFunction').click(function(v){
  console.log(v.target.value);
  }); 
```

希望您的问题将得到解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T07:07:24.207

选项元素不会有点击事件。Click 事件仅与 Select 元素相关联，因此您必须将其应用于选择下拉列表。在选择下拉菜单的点击事件触发的函数中，您可以检查各个选项并应用您的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T17:19:26.287

您也可以使用 JavaScript。例如。

```
$document.ready(function(){
$('#cmbMoreFunction').change(function(){

var dataValue=document.getElementById('cmbMoreFunction').value;
if(dataValue==0){call functionFirst();}
else{call functionSecond();}
});
}); 
```

# ios - iOS：在 PDF 文档的多个页面上绘制文本

> ID：12154334
> 
> 赞同：2
> 
> 时间：2012-08-28T07:04:01.377
> 
> 标签：ios, pdf, drawing

在 pdf 文档的两页或多页上绘制一长串文本的推荐方法是什么？

当您绘制的文本字符串对于单个页面来说太长时，文本会在文档末尾被剪裁。我最初的想法是计算可以在当前页面上绘制多少字符串，然后将字符串拆分为两个子字符串：（1）可以在当前页面上绘制的部分和（2）被剪裁的部分。下一步将重复此过程，直到绘制整个字符串。

问题仍然是如何计算可以在当前页面上绘制多少字符串。我是否忽略了某些东西，或者这是一个相当乏味且容易出错的过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:43:25.640

很久以前我做了这个函数，它可以帮助你，传递间距和字体，它会返回有限宽度和所需大小的分割字符串。

```
- (NSMutableArray *)getSplittedString:(NSString *)largeStr:(UIFont *)font:(NSInteger)horizontalSpace:(float)width {
    NSArray *strWords = [largeStr componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    //finding space width

    NSInteger currIndex = 0;
    NSString *tmpStr = @"";
    NSString *compareStr = @"";
    NSInteger currWidth;

    NSMutableArray *strArray = [[NSMutableArray alloc] init];
    NSMutableArray *strFrames = [[NSMutableArray alloc] init];

    while(TRUE) {
        while(TRUE) {
            compareStr = tmpStr;
            compareStr = [compareStr stringByAppendingString:[strWords objectAtIndex:currIndex]];
            currWidth = [compareStr sizeWithFont:font].width;
            if(currWidth < width) {
                currIndex = currIndex + 1;
                if(currIndex == [strWords count]) {
                    [strArray addObject:compareStr];
                    [strFrames addObject:[NSValue valueWithCGRect:[self findCenterAdjustedLocation:compareStr :width :font :horizontalSpace]]];
                    break;
                }
                tmpStr = [NSString stringWithFormat:@"%@ ",compareStr];

            } else if (currWidth == width) {
                [strArray addObject:compareStr];
                [strFrames addObject:[NSValue valueWithCGRect:[self findCenterAdjustedLocation:compareStr :width :font :horizontalSpace]]];
                tmpStr = @"";
                if(currIndex == [strWords count]) {
                    break;
                }
            } else {
                if([compareStr rangeOfString:@" "].location == NSNotFound) {
                    while(TRUE) {
                        NSInteger loc = [self findAdjustedLocation:compareStr :width :font];
                        if(loc == 0) {
                            tmpStr = [compareStr substringFromIndex:loc];
                            if(currIndex == [strWords count]) {
                                [strArray addObject:tmpStr];
                                [strFrames addObject:[NSValue valueWithCGRect:[self findCenterAdjustedLocation:tmpStr :width :font :horizontalSpace]]];
                                break;
                            }
                            tmpStr = [NSString stringWithFormat:@"%@ ",tmpStr];
                            break;
                        } else {
                            tmpStr = [compareStr substringWithRange:NSMakeRange(0, loc)];
                            [strArray addObject:tmpStr];
                            [strFrames addObject:[NSValue valueWithCGRect:[self findCenterAdjustedLocation:tmpStr :width :font :horizontalSpace]]];
                            tmpStr = [NSString stringWithFormat:@"%@ ",[compareStr substringFromIndex:loc]];
                            compareStr = tmpStr;
                            if ([tmpStr sizeWithFont:font].width < width) {
                                [strArray addObject:tmpStr];
                                [strFrames addObject:[NSValue valueWithCGRect:[self findCenterAdjustedLocation:tmpStr :width :font :horizontalSpace]]];
                                currIndex = currIndex + 1;
                                break;
                            }
                        }
                    }
                } else {
                    [strArray addObject:tmpStr];
                    [strFrames addObject:[NSValue valueWithCGRect:[self findCenterAdjustedLocation:tmpStr :width :font :horizontalSpace]]];
                    tmpStr = @"";
                }
                break;
            }
        }
        if(currIndex == [strWords count]) {
            return [[NSMutableArray alloc] initWithObjects:strArray, strFrames, nil];
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T22:05:23.880

您可以尝试通过 UIMarkupTextPrintFormatter 使用 iOS 打印子系统生成 PDF。我在这里解释这项技术：

[有没有办法从 iOs 中的 XML/HTML 模板生成 PDF 文件](https://stackoverflow.com/questions/9528658/is-there-any-way-to-generate-pdf-file-from-a-xml-html-template-in-ios/9577488#9577488)

我还没有试图看看会发生什么。分页，但理论上它会做正确的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T20:03:52.817

一旦绘制到 PDF 上，我试图计算文本的实际高度，但它非常烦人，因为您无法真正获得“真实”行高。我最终放弃了 CoreGraphics 并使用@TomSwift 技术绘制了所有内容。比 CoreGraphics 更简单，您可以设置字体、文本颜色、... 使用 CSS 样式

# java - Selenium - com.gargoylesoftware.htmlunit.ScriptException：调用 jsxSet_innerHTML 的异常

> ID：12154335
> 
> 赞同：0
> 
> 时间：2012-08-28T07:04:04.340
> 
> 标签：java, selenium, webdriver

我正在使用 Selenium、HtmlUnitDriver 和 HtmlUnit Ver。10\. 我得到以下堆栈跟踪：

> ```
>  SEVERE: Job run failed with unexpected RuntimeException: Exception invoking jsxSet_innerHTML
> ======= EXCEPTION START ========
> Exception class=[com.gargoylesoftware.htmlunit.ScriptException]
> com.gargoylesoftware.htmlunit.ScriptException: Exception invoking jsxSet_innerHTML
>     at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:594)
>     at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:537)
>     at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:538)
>     at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.callFunction(JavaScriptEngine.java:544)
>     at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.callFunction(JavaScriptEngine.java:519)
>     at com.gargoylesoftware.htmlunit.html.HtmlPage.executeJavaScriptFunctionIfPossible(HtmlPage.java:927)
>     at com.gargoylesoftware.htmlunit.javascript.background.JavaScriptFunctionJob.runJavaScript(JavaScriptFunctionJob.java:53)
>     at com.gargoylesoftware.htmlunit.javascript.background.JavaScriptExecutionJob.run(JavaScriptExecutionJob.java:101)
>     at com.gargoylesoftware.htmlunit.javascript.background.JavaScriptJobManagerImpl.runSingleJob(JavaScriptJobManagerImpl.java:328)
>     at com.gargoylesoftware.htmlunit.javascript.background.DefaultJavaScriptExecutor.run(DefaultJavaScriptExecutor.java:153) 
> ```

源代码：

```
HtmlUnitDriver driver = new HtmlUnitDriver();
driver.setJavascriptEnabled(true);
driver.get(url);

try {
    Thread.sleep(10000L);
} catch (InterruptedException e) {
    e.printStackTrace();
}
System.out.println(driver.getPageSource()); 
```

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T13:00:25.040

尝试这个...

```
DesiredCapabilities c = DesiredCapabilities.firefox();

c.setJavascriptEnabled(true);

c.setBrowserName("Mozilla/5.0 (X11; Linux x86_64; rv:24.0) Gecko/20100101 Firefox/24.0");

WebDriver driver = new HtmlUnitDriver(c);

driver.get(baseUrl); 
```

# jquery - 无法使用 jQuery 在条件下更改元素的背景颜色

> ID：12154340
> 
> 赞同：0
> 
> 时间：2012-08-28T07:04:19.273
> 
> 标签：jquery, html, css

如果某个元素有一些适当的文本，我想更改元素的背景颜色。

**我想我在包含 jQuery.Simple 警报不起作用时遇到了麻烦。**

我包括了 jQuery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

并将 id 添加到适当的元素中：

```
<td id="method">Some method</td>
<td>RAM_UNITS</td>
<td id="bupa-vic">RAM_MBP</td>
<td>RAM_SCHED</td>
<td>RAM_REBATE</td>
<td id="oop">RAM_OOP_NO_GAP</td>
<td>RAM_OOP_GAP</td>
<td id="total">RAM_TOTAL_EXPENCE</td> 
```

现在我想做下一个动作：如果方法 = 保险将 buppa 的背景颜色更改为蓝色。

这是我的 jQuery：

```
$(document).ready(function(){
    if ( $('#method').text() == 'Insurance' ) {
      $(#bupa-vic).css({'background-color': 'blue'});
    }
    if ( $('#method').text() == 'out of pocket' ) {
      $(#bupa-vic).css({'background-color': 'blue'});
      $(#oop).css({'background-color': 'blue'});
    }
    if ( $('#method').text() == 'Total account' ) {
      $(#total).css({'background-color': 'blue'});
    }
}); 
```

但它不起作用。Google 控制台中也没有与 jQuery 相关的错误。

有人可以建议问题出在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:08:43.913

您缺少一堆引号...注意代码中突出显示的语法不正确？

```
$('#bupa-vic').css({'background-color': 'blue'});
--^---------^-- 
```

与所有其他人一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T07:09:05.917

你忘记`'`了`$(#bupa-vic) => $('#bupa-vic')` [http://jsfiddle.net/GZ8ZT/3/](http://jsfiddle.net/GZ8ZT/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T07:11:12.967

尝试`console.log( $('#method').text() )`查看结果，也不要忘记添加`$(#method)`-`$('#method')`逗号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T07:11:36.643

您可以改为使用`.contains()`jQuery 的方法，它更简单，您可以使用任何注解来解释不同的单词：

```
$("td#method:contains('Insurance')");
$('td#bupa-vic').css("background-color", "blue"); 
```

​</p>

[http://jsfiddle.net/Kyle_Sevenoaks/Hpj59/1/](http://jsfiddle.net/Kyle_Sevenoaks/Hpj59/1/)

# javascript - 我使用什么语言来创建像 Webly 这样的拖放功能？

> ID：12154342
> 
> 赞同：0
> 
> 时间：2012-08-28T07:04:35.650
> 
> 标签：javascript, html

我想创建一些东西，允许某人使用拖放在线创建网站，就像 weebly.com。使用什么语言 - javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:07:11.783

您可以使用具有内置拖放功能的 Javascript 库，例如 JQuery。[请参阅http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)和[http://jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)上的文档和示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:06:55.163

简短的回答：是的。长答案：您也可以使用 Flash。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T07:07:22.330

JavaScript 显然。Flash 已成为历史。

# drupal - drupal 内容访问错误

> ID：12154346
> 
> 赞同：0
> 
> 时间：2012-08-28T07:04:51.207
> 
> 标签：drupal, drupal-modules

我有两台电脑，安装了两个不同版本的 xampp 。一个具有 5.3.x 的 php 版本，另一个具有 5.4.4 的 php 版本。我对名为“内容访问”的 drupal 模块有问题。它在旧版本的 xampp 中运行良好，但在新版本中显示错误。这是错误

```
Notice: Undefined index: type in content_access_admin_settings_submit() (line 167 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: type in content_access_admin_settings_submit() (line 181 of C:\xampp\htdocs\mmg\mmgsecure\sites\all\modules\content_access\content_access.admin.inc).
Notice: Undefined index: edit any content in user_role_grant_permissions() (line 3041 of C:\xampp\htdocs\mmg\mmgsecure\modules\user\user.module).
PDOException: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'module' cannot be null: INSERT INTO {role_permission} (rid, permission, module) VALUES (:db_insert_placeholder_0, :db_insert_placeholder_1, :db_insert_placeholder_2); Array ( [:db_insert_placeholder_0] => 3 [:db_insert_placeholder_1] => edit any content [:db_insert_placeholder_2] => ) in user_role_grant_permissions() (line 3043 of C:\xampp\htdocs\mmg\mmgsecure\modules\user\user.module). 
```

任何人都可以帮助解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T16:49:11.430

在 [https://drupal.org/comment/6573448#comment-6573448上有一个关于这个问题的有用讨论和一个对我有用的补丁](https://drupal.org/comment/6573448#comment-6573448)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:50:35.410

因此，这是最糟糕的，您实际上不应该为任何真实的事情这样做，但是在 user.module 的第 3046 行，定义了用于查询权限的函数。如果你改变

```
->fields(array(
    'module' => $modules[$name]
)) 
```

至

```
->fields(array(
    'module' => $module
)) 
```

您将 $module （在开始之前的某个地方`db_merge()`）定义为：

```
if (!empty($modules[$name])) {
  $module = $modules[$name];
}
else {
  $module = 'node'; // or features or whatever module you think is creating these permissions that aren't getting saved right
} 
```

那么我认为你的错误会消失。

这就是所谓的黑客核心，你永远不应该这样做。

# matlab - Matlab隐马尔可夫模型数据预测

> ID：12154348
> 
> 赞同：1
> 
> 时间：2012-08-28T07:04:54.697
> 
> 标签：matlab, hidden-markov-models

我是隐马尔可夫模型 (HMM) 的新手，我现在正在尝试使用它进行数据预测。考虑一个以非均匀间隔采样的正弦波，我想使用这些数据来预测未来时刻的输出。我正在尝试将统计工具箱与 matlab 一起使用。

问题似乎是在给出的示例中，我需要一个发射矩阵和一个转换矩阵来生成一个 hmm 模型。但是仅基于我拥有的数据，我如何评估这些矩阵？以及如何根据我拥有的数据训练模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:35:52.760

I second slayton's answer.

The transition matrix is simply the list of probabilities that one state will go to another.

A *hidden* Markov model assumes you can't actually see what the state of the system is (it's *hidden*). For example, suppose your neighbor has a dog. The dog may be hungry or full, this is the dog's state. You can't ask the dog if it's hungry, and you can't look inside its stomach, so the state is hidden from you (since you only glance outside, at the dog, briefly each day you can't keep track of when it runs inside to eat or and how much it ate if so).

You know, however, that after it ate and became full, it will become hungry again after some time (depending on how much it ate last, but you don't know that so it might as well be random) and when it is hungry, it will eventually run inside and eat (sometimes it will sit outside out of laziness despite being hungry).

Given this system, you cannot see when the dog is hungry and when it is not. However, you can *infer* it from whether the dog whines. If it's whining, it's probably hungry. If it's happily barking, it's probably full. But just because it's whining doesn't mean it's hungry (maybe its leg hurts) and just the bark doesn't mean full (maybe it was hungry but got excited at something). However, usually a bark comes when it's full, and a whine comes when it's hungry. It may also make no sound at all, telling you nothing about its state.

So this is the emission matrix. The "hungry" state is more likely to "emit a whine", ditto for full and barks. The emission matrix says what you will observe in each given state.

If you use a square identity matrix for your emission matrix, then each state will always emit itself, and you will end up with non-hidden Markov model.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:11:40.660

[matlab 文档](http://www.mathworks.com/help/toolbox/stats/f8368.html)很好地描述了如何使用 HMM 的统计工具箱函数。“估计转换和发射矩阵”部分可能会让您指出正确的方向。

# redis - 我怎样才能得到周期性任务调度的结果

> ID：12154349
> 
> 赞同：1
> 
> 时间：2012-08-28T07:04:57.073
> 
> 标签：redis, celery, celery-task, celerybeat

嘿伙计们，我是芹菜的新手。我正在研究定期任务调度。我的配置`celeryconfig.py` 如下：

```
from datetime import timedelta

BROKER_URL = 'redis://localhost:6379/0'
CELERY_RESULT_BACKEND = "redis"
CELERY_REDIS_HOST = "localhost"
CELERY_REDIS_PORT = 6379
CELERY_REDIS_DB = 0
CELERY_IMPORTS=("mytasks")
CELERYBEAT_SCHEDULE={'runs-every-60-seconds' :
                        {
                                'task': 'mytasks.add',
                                'schedule': timedelta(seconds=60),
                                'args':(16,16)
                        },
                    } 
```

如下`mytask.py`：

```
from celery import Celery

celery = Celery("tasks",
                broker='redis://localhost:6379/0',
                backend='redis')

@celery.task
def add(x,y):
        return x+y

@celery.task
def mul(x,y):
        return x*y 
```

当我跑步时， `celery beat -s celerybeat-schedule`我会得到

`Configuration -> . broker -> redis://localhost:6379/0 . loader -> celery.loaders.default.Loader . scheduler -> celery.beat.PersistentScheduler . db -> celerybeat-schedule . logfile -> [stderr]@INFO . maxinterval -> now (0s) [2012-08-28 12:27:17,825: INFO/MainProcess] Celerybeat: Starting... [2012-08-28 12:28:00,041: INFO/MainProcess] Scheduler: Sending due task mytasks.add [2012-08-28 12:29:00,057: INFO/MainProcess] Scheduler: Sending due task mytasks.add [2012-08-28 12:30:00,064: INFO/MainProcess] Scheduler: Sending due task mytasks.add [2012-08-28 12:31:00,097: INFO/MainProcess] Scheduler: Sending due task mytasks.add`

现在我没有得到我已经传递了参数`(16,16)`那么我怎么能得到这个函数的答案`add(x,y)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:22:34.413

我不确定我是否完全理解您的要求，但据我所知，您的问题可能是以下问题之一：

1) 你在运行 celeryd (worker daemon) 吗？如果没有，您是否在码头开始了芹菜工人？Celery beat 是一个[任务调度](http://docs.celeryproject.org/en/latest/internals/reference/celery.beat.html)器。它不是[工人](http://docs.celeryproject.org/en/latest/userguide/workers.html)。Celerybeat 只安排任务（即将它们放入队列中供工作人员最终使用）。

2）您打算如何查看结果？他们是在某个地方得救了吗？由于您已将结果后端设置为 redis，因此结果至少暂时存储在[redis 结果后端中](http://docs.celeryproject.org/en/latest/configuration.html#conf-redis-result-backend)

# c++ - 在 C++ glib 应用程序中连接到 dbus 信号的最简单方法是什么？

> ID：12154351
> 
> 赞同：1
> 
> 时间：2012-08-28T07:05:08.773
> 
> 标签：c++, boost, dbus

有什么方法可以使用 boost 连接到 dbus 信号？目前我正在为 dbus 使用 glib 绑定​​，但我正在寻找一个 boost/c++ 替代方案。

另外，我找到了 GDBus，建议使用 dbus-glib。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:41:10.730

从[DBus Bindings](http://www.freedesktop.org/wiki/Software/DBusBindings)页面，有一个[dbus-c++](http://sourceforge.net/projects/dbus-cplusplus/)的链接。

免责声明：我没有使用过这些项目，也不能保证它们。

# android - 在 android 手机上拦截传入的 flash 消息

> ID：12154354
> 
> 赞同：8
> 
> 时间：2012-08-28T07:05:17.697
> 
> 标签：android, sms, intercept, flash-message

谁能帮我拦截传入的 Flash 消息（特别是来自电信公司的消息，他们在发送消息等活动后发送我们当前的余额）。

我的应用程序处理批量发送 SMS，我不希望 Flash 消息不时弹出。那么在Android上可以吗？

编辑：每个人都说它不可能在 Android 1.6 以上，但我在 Google Play 上找到了一个[类似的应用程序](https://play.google.com/store/apps/details?id=com.melkote.quietbalance&hl=en)，但我想要那种应用程序的来源。请帮忙。

编辑：一年多过去了，我仍然没有得到解决方案。任何人都可以帮助解决这个线程..??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:06:03.410

Flash sms 除了数据编码标志外，它与通常的 sms 相同。它在 DCS 中有“0 级”指示。

有关短信编码的详细信息，请参阅：[GSM 3.38 规范](http://www.3gpp.org/ftp/Specs/html-info/0338.htm)/4 SMS 数据编码方案。

规范中关于它的一些片段

> 当移动终止消息为 0 类且 MS 具有显示短消息的能力时，MS 应立即显示该消息，并在消息成功到达 MS 时向 SC 发送确认，无论是否有可用的内存。 SIM 或 ME。消息不会自动存储在 SIM 或 ME 中。

因此，在大多数情况下，手机只会显示此消息并跳过通常的一系列操作。可能，您无法使用通常的 API 捕获此消息……您可能需要深度钩子和根设备。

[或者可能只是通过致电客户支持关闭此服务？]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:20:35.627

可能取决于您的服务提供商使用的 [通信] 渠道。我猜他们不使用 SMS，可能他们使用 WAP/PUSH 或一些预安装的提供商应用程序来通知通知，这使得这更难阻止。如果是短信，你肯定有很多方法来阻止他们的通知，但在这种情况下，我怀疑可能有一种简单/直接的方法来做到这一点。

*理想情况下，飞行模式*应该阻止电信/服务提供商消息/通知，但这也会阻止您的连接，对吧？所以，我不太确定这一点。有没有办法选择退出服务提供商通知，也许是通过 ussd 例程？我曾经听说过这个...

# sql-server - 在远程 SQL Server 引擎上创建数据库

> ID：12154359
> 
> 赞同：2
> 
> 时间：2012-08-28T07:05:31.347
> 
> 标签：sql-server, database, installation, nsis

我需要创建一个安装程序，它将在两台不同的机器上安装组件。“APP Server”上的Windows服务和Web服务以及“DB Server”上的数据库部分。SQL Server 2005/2008 将仅存在于 DB 服务器上。

我将不得不在 APP Server 上运行我的安装程序，这将创建数据库并在表中插入一些静态值，尽管那里不存在 SQL Server。DB Server和AP​​P Server在同一个网络

只有当 SQL Server 存在于安装程序运行的同一台机器上时，我可以创建的安装程序才会执行此操作。但不满足上述情况。

有可能以这种方式实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:13:40.803

您可以使用[Visual Web Developer](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express)从未安装 SQL Server 的计算机创建数据库连接。请参阅这篇[文章](http://weblogs.asp.net/nannettethacker/archive/2008/02/17/creating-a-database-connection-to-a-remote-sql-server-database-within-visual-web-developer.aspx)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:47:40.950

只需将 SQL 脚本与安装程序捆绑在一起，然后通过使用 ExecWait 调用 sqlcmd 来执行脚本。

我们可以通过以下方式使用受信任的连接运行脚本：

```
sqlcmd -S _SERVER\_INSTANCE_ -d _DBNAME_ -i _SCRIPT_FILE_ 
```

或者使用 SQL 登录：

```
sqlcmd -S _SERVER\_INSTANCE_ -d _DBNAME_ -U _USERNAME_ -P _PASSWORD_ -i _SCRIPT_FILE_ 
```

要在远程 SQL Server 引擎上执行操作，需要本机驱动程序。在 SQL Server 2005 或更高版本中，命令行客户端称为 sqlcmd。

# android - 想在通话时实现选项

> ID：12154360
> 
> 赞同：1
> 
> 时间：2012-08-28T07:05:46.337
> 
> 标签：android, android-intent, android-activity, intentfilter

```
<action android:name="android.intent.action.CALL" />
<action android:name="android.intent.action.CALL_BUTTON" />
<action android:name="android.intent.action.DIAL" /> 
```

我如何使用这些操作以及在哪里使用？

我想在调用 android 时为用户提供选项。就像我打电话一样，它应该首先询问您要从哪里拨打电话。

基本上，我想在主屏幕的 android 设备中按下电话图标时提供启动我的应用程序的选项。那么有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:18:40.813

将这些过滤器添加到您要在清单中启动的活动中（我希望您知道如何使用代码和所需的权限进行调用）

```
 <activity
    android:name=".activities.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

    <intent-filter>
        <action android:name="android.intent.action.CALL_BUTTON" />
      <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.CALL_PRIVILEGED" />
        <category android:name="android.intent.category.DEFAULT" />
         <action android:name="android.intent.action.VIEW" />
     <action android:name="android.intent.action.DIAL" />

   <category android:name="android.intent.category.BROWSABLE" />
      <data android:scheme="tel" />
    </intent-filter>

</activity> 
```

# hbase - 通过 oozie 连接到 HBase 时出现异常。

> ID：12154363
> 
> 赞同：0
> 
> 时间：2012-08-28T07:06:01.260
> 
> 标签：hbase, oozie

当我尝试通过 oozie 连接到 HBase 时，出现以下异常：

```
`Failing Oozie Launcher, Main class [com.sample.util.HBaseBulkLoad], main() threw exception, org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@6f36e7f3 closed
java.io.IOException: org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@6f36e7f3 closed
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:794)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:782)
    at org.apache.hadoop.hbase.client.HTable.finishSetup(HTable.java:249)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:213)
    at com.sample.dao.HBaseDao.bulkLoadUsingMapper(HBaseDao.java:191)
    at com.sample.util.HBaseBulkLoad.main(HBaseBulkLoad.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.oozie.action.hadoop.LauncherMapper.map(LauncherMapper.java:454)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:393)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
    at org.apache.hadoop.mapred.Child.main(Child.java:264)` 
```

我的 workflow.xml 看起来像这样，

```
`<workflow-app xmlns="uri:oozie:workflow:0.2" name="sample-wf">
<start to="java-node"/>
 <action name="java-node">
        <java>
            <job-tracker>${jobTracker}</job-tracker>
            <name-node>${nameNode}</name-node>
            <configuration>
                <property>
                    <name>mapred.job.queue.name</name>
                    <value>${queueName}</value>
                </property>
            </configuration>
            <main-class>com.sample.util.HBaseBulkLoad</main-class>
                <arg>TEST</arg>
                <arg>hdfs://centOS/user/sample/input/sample5.txt</arg>
                <arg>hdfs://centOS/user/sample/HFile</arg>
        </java>
        <ok to="end"/>
        <error to="fail"/>
    </action>
    <kill name="fail">
        <message>Java failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
    </kill>
    <end name="end"/>
</workflow-app>` 
```

我可以使用***hadoop jar***命令运行 jar 文件，但不能使用 oozie。我在java中设置了所有必需的配置。但仍然得到异常。

**HMaster**和**HRegionServer**正在运行。哪位知道的请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:09:31.307

确保运行 Oozie 作业的机器可以访问您的 Zookeeper 服务器，否则 HBaseClient 将无法发现您的 HRegionServers。

# c# - 在 C++ 中使用 Winform 作为视图

> ID：12154367
> 
> 赞同：1
> 
> 时间：2012-08-28T07:06:11.857
> 
> 标签：c#, c++, winforms, mfc, winforms-interop

我试图在我的 MFC 应用程序中使用 Winform 作为视图，但我似乎无法让它工作。它编译并运行，但是在启动视图时它崩溃，表明无法创建控件：afxwinforms.inl

```
return CreateControl(info,dwStyle,&pt,&size,pParentWnd,nID); 
```

有人可以在这里帮助我吗，非常感谢我目前有以下代码：

MyWinFormsView .h：

```
#pragma once
#include <vcclr.h>
#include <afxwinforms.h>
#include "MyViewUserControl.h"

#include "MyDoc.h"

// CMyWinFormsView view

class CMyWinFormsView : public CWinFormsView
{
    DECLARE_DYNCREATE(CMyWinFormsView)

protected:
    CMyWinFormsView();           // protected constructor used by dynamic creation
    virtual ~CMyWinFormsView();

public:
    CMyDoc* GetDocument();
    DspAnalog::MyViewUserControl^ GetControl();

public:
    virtual void OnDraw(CDC* pDC);      // overridden to draw this view
#ifdef _DEBUG
    virtual void AssertValid() const;
#ifndef _WIN32_WCE
    virtual void Dump(CDumpContext& dc) const;
#endif
#endif

protected:
    DECLARE_MESSAGE_MAP()
    virtual BOOL PreCreateWindow(CREATESTRUCT& cs);
public:
    virtual void OnInitialUpdate();
protected:
    virtual void PostNcDestroy();

public:

BEGIN_DELEGATE_MAP( CMyWinFormsView )
END_DELEGATE_MAP()

    //afx_msg void OnTextChanged(System::Object ^ o, System::EventArgs ^ e);
    //afx_msg void OnSaveChangesClick(System::Object ^ o, System::EventArgs ^ e);
};

#ifndef _DEBUG  // debug version in View.cpp
inline CMyDoc* CMyWinFormsView::GetDocument()
   { return (CMyDoc*)m_pDocument; }
#endif 
```

MyWinFormsView.cpp：

```
#include "stdafx.h"
#include "MyWinFormsView.h"
#include "MyViewUserControl.h"

// CMyWinFormsView

IMPLEMENT_DYNCREATE(CMyWinFormsView, CWinFormsView)

CMyWinFormsView::CMyWinFormsView() : CWinFormsView(DspAnalog::MyViewUserControl::typeid)
{
}

CMyWinFormsView::~CMyWinFormsView()
{
}

BEGIN_MESSAGE_MAP(CMyWinFormsView, CWinFormsView)
END_MESSAGE_MAP()

// CMyWinFormsView drawing

void CMyWinFormsView::OnDraw(CDC* pDC)
{
    CMyDoc* pDoc = GetDocument();
}

// CMyWinFormsView diagnostics

#ifdef _DEBUG
void CMyWinFormsView::AssertValid() const
{
    CWinFormsView::AssertValid();
}

#ifndef _WIN32_WCE
void CMyWinFormsView::Dump(CDumpContext& dc) const
{
    CWinFormsView::Dump(dc);
}
#endif

CMyDoc* CMyWinFormsView::GetDocument() // non-debug version is inline
{
    ASSERT(m_pDocument->IsKindOf(RUNTIME_CLASS(CMyDoc)));
    return (CMyDoc*)m_pDocument;
}

#endif //_DEBUG

DspAnalog::MyViewUserControl^ CMyWinFormsView::GetControl()
{
    System::Windows::Forms::Control^ control = CWinFormsView::GetControl();
    return safe_cast<DspAnalog::MyViewUserControl^>(control);
}

BOOL CMyWinFormsView::PreCreateWindow(CREATESTRUCT& cs)
{
    return CWinFormsView::PreCreateWindow(cs);
}

void CMyWinFormsView::OnInitialUpdate()
{
    CWinFormsView::OnInitialUpdate();

    // *** Workaround bottom dock initial sizing issue
   /*   System::Windows::Forms::ScrollableControl ^scrlCtrl = dynamic_cast<System::Windows::Forms::ScrollableControl^>(GetControl());
    if (scrlCtrl != nullptr)
    {   
        CRect rcView;
        GetClientRect(&rcView);
        System::Drawing::Size size(0,0);
        scrlCtrl->AutoScrollMinSize = size;
    }*/
    // *** End workaround

    CMyDoc* pDoc = GetDocument();
    DspAnalog::MyViewUserControl^ viewControl = GetControl();
}

void CMyWinFormsView::PostNcDestroy()
{
    CWinFormsView::PostNcDestroy();
} 
```

MyViewUserControl.h：

```
#pragma once
    #using <mfcmifc80.dll>

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    //using namespace System::Runtime::InteropServices;

namespace MyDsp {

    /// <summary>
    /// Summary for MyViewUserControl
    /// </summary>
    public ref class MyViewUserControl : public System::Windows::Forms::UserControl,
                                         public Microsoft::VisualC::MFC::IView,
                                         public Microsoft::VisualC::MFC::ICommandTarget
    {
    public:
    MyViewUserControl(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~MyViewUserControl()
        {
            if (components)
            {
                delete components;
            }
        }
    private: DevExpress::XtraEditors::SimpleButton^  simpleButton1;
    protected: 

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->simpleButton1 = (gcnew DevExpress::XtraEditors::SimpleButton());
            this->SuspendLayout();
            // 
            // simpleButton1
            // 
            this->simpleButton1->Location = System::Drawing::Point(44, 101);
            this->simpleButton1->Name = L"simpleButton1";
            this->simpleButton1->Size = System::Drawing::Size(75, 23);
            this->simpleButton1->TabIndex = 0;
            this->simpleButton1->Text = L"simpleButton1";
            // 
            // MyViewUserControl
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->Controls->Add(this->simpleButton1);
            this->Name = L"MyViewUserControl";
            this->ResumeLayout(false);

        }
#pragma endregion

    public:
        // Implementing IView and ICommandTarget interfaces
        virtual void OnInitialUpdate();
        virtual void OnUpdate();
        virtual void OnActivateView(bool bActivate);
        virtual void Initialize(Microsoft::VisualC::MFC::ICommandSource^ cmdSrc);
        System::Void Command1Handler(System::UInt32 cmdUI);
        int iActivateCount;
    };
} 
```

MyViewUserControl.cpp

```
#include "MyViewUserControl.h"

namespace MyDsp 
{

#define ID_CVIEWCMDS_COMMAND1   32771

void MyViewUserControl::OnInitialUpdate()
{
    this->iActivateCount = 0;
}

void MyViewUserControl::OnUpdate()
{
}

void MyViewUserControl::OnActivateView(bool activate)
{
    this->iActivateCount++;
}

void MyViewUserControl::Initialize(Microsoft::VisualC::MFC::ICommandSource^ cmdSrc)
{
    //Microsoft::VisualC::MFC::CommandHandler^ command;

    //command = gcnew Microsoft::VisualC::MFC::CommandHandler( this, &MyViewUserControl::Command1Handler );

    // Use the same control ID as in the resource.h of the MFC project
    //cmdSrc->AddCommandHandler( ID_CVIEWCMDS_COMMAND1, command );
}

// Handler for the MFC menu command

void MyViewUserControl::Command1Handler(System::UInt32 cmdUI)
{
    //this->toolStripStatusLabel1->Text = "Selected Command1";
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:19:18.690

你知道[microsoft mfc-winform 集成示例](http://msdn.microsoft.com/en-us/library/ms239718%28v=vs.80%29.aspx)吗？

开始的一些提示：不要在 System... 命名空间上使用 using，导致 c++/cli 有时不匹配

看例子中每个c++文件的编译器选项，有很多东西要设置（/clr等）

# php - 我正在尝试回显将通过电子邮件发送的数组值

> ID：12154369
> 
> 赞同：0
> 
> 时间：2012-08-28T07:06:15.443
> 
> 标签：php

您好，我正在处理一个项目，并且我有存储在数组中的值，我的下一步是将其放入将要邮寄的消息中。我的问题是当我尝试通过回显它来测试它时，它只会告诉我“数组”

代码：

我正在使用的循环

```
for($j =0; $j< $i; $j +=1 ){
        $firstname = $firstnamearray[$j];

    echo "
        $firstname 

";
} 
```

存储的数组

```
if ($status == "Open"){

                $firstnamearray[] = array($i => $firstname);
                $lastnamearray[] = array($i => $lastname);
                $statusarray[] = array($i => $status);
                $i +=1;
        } 
```

感谢您抽出宝贵时间让我知道您是否需要其他任何东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:09:22.253

[print_r](http://php.net/manual/en/function.print-r.php)将漂亮地打印数组中的所有值/嵌套结构。

```
print_r(firstnamearray); 
```

或者，如果您希望将打印的内容存储为字符串

```
$foo = print_r($firstnamearray, TRUE); 
```

如果您以编程方式编写电子邮件，请务必使用[htmlentities](http://php.net/manual/en/function.htmlentities.php)映射任何实体，例如 & 或 > 。

```
$foo = htmlentities(print_r($firstnamearray, TRUE)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:09:54.850

```
foreach($array as $key => $value){
  echo "#".$key." - ".$value;
} 
```

foreach 语句将在表的每个项目上循环 [http://php.net/manual/fr/control-structures.foreach.php](http://php.net/manual/fr/control-structures.foreach.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:10:14.530

似乎 $firstnamearray[$j] 也是一个数组

尝试这个

```
for($j =0; $j< $i; $j +=1 ){
    $firstname = $firstnamearray[$j];

echo "
    $firstname[0]

    ";
} 
```

也看看存储在 $fistname 中的内容

```
 for($j =0; $j< $i; $j +=1 ){
    $firstname = $firstnamearray[$j];
    var_dump($firstname);die;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:11:24.980

对于哑剧**文本/纯文本**：

`echo var_export($_SERVER, true);`

对于 mime**文本/html**：

`echo highlight_string("<?php ".var_export($_SERVER, true));`

# javascript - 如何在 asp.net 中获取动态创建的文本框 Web 控件的值

> ID：12154374
> 
> 赞同：0
> 
> 时间：2012-08-28T07:06:25.683
> 
> 标签：javascript, c#, asp.net

我的 aspx 页面包含产品列表以及动态生成的文本框和每个产品的一个订单按钮。

文本框和按钮在运行时生成，其 id 为 txt110234,txt110235...等文本框，btn110234,btn110235...等按钮。

每次用户必须在文本框中输入数量并按下与任何产品关联的订单按钮才能下订单。

一切正常，但现在我想使用 ajax 来做，所以我需要获取用户在文本框中输入的值。我想做这样的事情 -

```
 var quan = document.getElementById('<%= txt' + id + '.ClientID%>').value; 
```

但它给了我以下错误。

> **编译器错误消息：CS1012：字符文字源错误中的字符过多：**

我怎样才能获得文本框的价值？任何建议将不胜感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:13:26.487

你得到的错误是因为你不能在 "<%= .. %>" 块中涉及 javascript。这看起来也不可能，因为“<%= .. %>”表达式是在页面呈现之前在服务器中评估的，但是您的“id”是客户端变量。

您可以像这样在服务器端设置脚本：

客户端代码：

```
function foo(ctlID)
{
   var quan = document.getElementById(ctlID).value;
} 
```

服务器端代码：

```
TextBox txt = new TextBox();
txt.ID = "SomeID";
Form.Controls.Add(txt);
Button btn = new Button();
btn.ID = "someID";
btn.OnClientClick = "foo('" + txt.ClientID + "')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:12:27.943

建议：一种方法是使用 jQuery css 选择器。您可以为所有输入文本框分配一个特定的 cssclass，并通过 jQuery 选择器检索所有这些文本框。

例如，在动态生成文本框时，您可以为它们分配 CssClass =".productQuantity"

然后使用 jQuery 选择器，例如 $('.productQuantity')

如果我想遍历多个元素，我个人更喜欢这种方法。这使我免于处理 ID 等。

# php - 如何将 xml 元素标签添加到正确的位置？

> ID：12154384
> 
> 赞同：1
> 
> 时间：2012-08-28T07:07:17.513
> 
> 标签：php, xml

我有将如下项目添加到 xml 文件的代码：

```
<newWord>
  <Heb>rer</Heb>
  <Eng>twew</Eng>
</newWord> 
```

问题是当我添加元素时它不会在正确的位置，它来自下面的 xml 标记。

```
<?xml version="1.0" encoding="UTF-8"?>
<xml>
  <newWord>
    <Heb>hebword</Heb>
    <Eng>banna</Eng>
  </newWord>
</xml>
<newWord>
  <Heb>rer</Heb>
  <Eng>twew</Eng>
</newWord> 
```

如何将新元素添加到正确的位置？谢谢

我的代码：

```
<?php    

    $wordH=$_GET['varHeb'];
    $wordE=$_GET['varEng'];

    $domtree='';

        if(!$domtree)
        {   
            $domtree = new DOMDocument('1.0', 'UTF-8');
            $domtree->formatOutput = true;
            $domtree->load('Dictionary_user.xml');
        }

        $Dictionary_user = $domtree->documentElement;

    $currentitem = $domtree->createElement("newWord");
    $currentitem = $domtree->appendChild($currentitem);

    $currentitem->appendChild($domtree->createElement('Heb', $wordH));
    $currentitem->appendChild($domtree->createElement('Eng',$wordE));

    $Dictionary_user->childNodes->item(0)->parentNode->insertBefore($currentitem,$Dictionary_user->childNodes->item(0));
        header("Content-type: text/xml");

    $domtree->save("Dictionary_user.xml");
    /* get the xml printed */
    echo $domtree->saveXML();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:26:53.043

也许你想要类似的东西：

```
<?php 
if(!empty($_GET['varHeb']) && !empty($_GET['varEng'])){
    //Dont forget utf-8 if using Hebrew letters
    header('Content-type: text/xml; charset=utf-8');
    //Load It
    $xml = simplexml_load_file('./Dictionary_user.xml');

    //Add a new node & add the children
    $node = $xml->addChild('newWord');
    $node->addChild('Heb', trim($_GET['varHeb']));
    $node->addChild('Eng', trim($_GET['varEng']));

    //DOMDocument to format code output
    $dom = new DOMDocument('1.0', 'UTF-8');
    $dom->preserveWhiteSpace = false;
    $dom->formatOutput = true;
    $dom->loadXML($xml->asXML());

    echo $dom->saveXML();
}else{
    //params not set for $_GET
}

/**
 * Result
<?xml version="1.0" encoding="UTF-8"?>
<xml>
  <newWord>
    <Heb>hebword</Heb>
    <Eng>banna</Eng>
  </newWord>
  <newWord>
    <Heb>אנחנו אוהבים גלישת מחסנית</Heb>
    <Eng>We Love Stack overflow</Eng>
  </newWord>
</xml>
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:33:03.927

问题是你在做什么：

```
$currentitem = $domtree->createElement("newWord");
$currentitem = $domtree->appendChild($currentitem); 
```

将其更改为

```
$currentitem = $domtree->createElement("newWord");
$currentitem = $domtree->documentElement->appendChild($currentitem); 
```

这会将它们附加到根节点。

* * *

您的代码中还有一些其他需要改进的地方：

```
$wordH=$_GET['varHeb'];
$wordE=$_GET['varEng']; 
```

确保您清理/过滤此内容。DOM 非常擅长确保不会插入恶意内容，但是应该对来自外部世界的任何内容进行完整性检查。

* * *

```
$domtree='';

if(!$domtree)
{ 
```

这是相当没有意义的。您创建了`$domtree`一个空字符串，因此该`if`块将始终被触发。删除该部分并简单地加载 XML。

* * *

```
 $domtree = new DOMDocument('1.0', 'UTF-8');
    $domtree->formatOutput = true;
    $domtree->load('Dictionary_user.xml');
} 
```

当您`load`使用 DOM 的字符串或文件时，它将丢弃您放入构造函数的任何参数，并使用在字符串或文件的 xml prolog 中找到的参数。所以在新建 DOMDocument 时不需要提供它们。

* * *

```
 $Dictionary_user = $domtree->documentElement; 
```

`<xml>`这是您要附加到的根节点 ( )。

* * *

```
$currentitem = $domtree->createElement("newWord");
$currentitem = $domtree->appendChild($currentitem); 
```

这是发生错误的地方。您创建一个新元素，然后将其附加到`$domtree`，这是整个文档。在 XPath 查询中，`$domtree`当`/`您想要追加到 时`/xml`，例如根元素。

* * *

```
$currentitem->appendChild($domtree->createElement('Heb', $wordH));
$currentitem->appendChild($domtree->createElement('Eng',$wordE)); 
```

这按预期工作。您正在添加到`<newWord>`

* * *

```
$Dictionary_user
    ->childNodes
    ->item(0)
    ->parentNode
    ->insertBefore($currentitem, $Dictionary_user->childNodes->item(0)); 
```

您正在从根元素 ( `<xml>`) 遍历到第一个子元素，然后返回到父元素，这显然又是根元素。所以整个遍历是没有必要的。事实上，除非你想将 appended 移到`<newWord>`根元素的第一个子元素之上，否则根本不需要整个块。

# powershell - 使用 Powershell 命令将计算机添加到事件日志读取器组

> ID：12154389
> 
> 赞同：2
> 
> 时间：2012-08-28T07:07:26.967
> 
> 标签：powershell, scripting, usergroups

我需要将计算机添加到事件日志读取器组。我试过下面的脚本。

```
$hostName = "Hostname"
$computername = $env:computername
$EventLogGroup = [adsi]"WinNT://$computername/Event Log Readers,group"
$temp = "WinNT://$hostName"
$EventLogGroup.Add($temp) 
```

相同的脚本适用于将用户添加到组和添加未添加的计算机。

我认为我们需要将对象类型更改为计算机。位置将在同一个域中。

任何修改或替代脚本都会有所帮助

“无法将成员添加到本地组或从本地组中删除，因为该成员不存在”这是我在执行脚本时遇到的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:26:27.013

尝试在计算机名称后添加域名和美元符号：

```
$temp = "WinNT://DomainName/$hostName$,computer" 
```

# xpages - Extlib 中的动态内容控制在重建后翻转

> ID：12154391
> 
> 赞同：0
> 
> 时间：2012-08-28T07:07:33.173
> 
> 标签：xpages, xpages-extlib

我对 ExtLib 中的动态内容控件有疑问。每次我编译我的 xpage 时，如果我不重新加载页面，动态内容控件就会翻转。我需要一种方法来控制它，比如控件上的 onerror 事件。

这是正在发生的事情

1.  我打开我的网页，动态内容控制工作正常
2.  我对我的 xpages 和构建做了一些更改（网页仍然打开）
3.  我单击网页上的链接以重新加载动态内容控件中的内容。
4.  网页翻转并开始使用部分刷新 url 不断重新加载。

我使用各种方法来更新这个控件。有时它是通过 csjs 链接，有时它是使用 XSP.partialRefreshGet() 的每个时间间隔，所以我想我需要一种方法来知道动态内容控件在调用它之前是否可用，或者让控件以某种方式通知我那不是可用的

任何的想法？

谢谢托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:53:01.657

当您更改 XPage 时，您必须在任何浏览器中手动完全重新加载该页面。从旧页面执行任何调用都将不起作用。

# c# - 有没有办法取消 StorageFile.CopyAsync()？

> ID：12154397
> 
> 赞同：5
> 
> 时间：2012-08-28T07:08:18.150
> 
> 标签：c#, windows-runtime, async-await

在 Win8 中，我使用 somefile.CopyAsync(destFolder, newName) 来复制文件。但是当我尝试取消它时，它似乎不起作用。这两种方法是我尝试取消它的方法：

1.  只需使用 IAsyncOperation.Cancel

    ```
    var op = somefile.CopyAsync(destFoder, newName);
    op.Cancel();
    op.Complete = (x,y) =>
    {
        switch(y) {
            case AsyncStatus.Complete:
                Debug.WriteLine("Completed" + x.GetResults().Name);
                break;
            case AsyncStatus.Cancel:
                Debug.WriteLine("Canceled")
                break;
        }
    } 
    ```

2.  使用 AsTask(CancellationToken)

    ```
    var cts = new CancellationTokenSource();
    cts.CancelAfter(TimeSpan.FromSeconds(1));
    var op = somefile.CopyAsync(destFolder, newName).AsTask(cts.Token);
    await op; 
    ```

在第一种方法中，不调用 case AsyncStatus.Cancel，在第二种方法中，也没有任何反应。我可以尝试其他方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:52:57.447

你试过这个...

```
var task = file.CopyAsync(KnownFolders.DocumentsLibrary, "test").AsTask();
task.AsAsyncAction().Cancel(); 
```

它在我的简单测试中有效。

如果您想使用取消令牌，此代码也应该可以工作

```
var source = new CancellationTokenSource(TimeSpan.FromMilliseconds(500));
var token = source.Token;
token.Register(() => { Debug.WriteLine("Your cancellation code here"); });
var task = file.CopyAsync(KnownFolders.DocumentsLibrary, "test").AsTask(token); 
```

# performance - 使用应用程序预热配置 Azure 网站

> ID：12154402
> 
> 赞同：15
> 
> 时间：2012-08-28T07:08:31.420
> 
> 标签：performance, azure, initialization

我有一个开发的[Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)，我想减少初始加载时间。在常规 ASP.NET 站点上，我会配置[应用程序初始化 IIS 模块](http://www.iis.net/download/ApplicationInitialization)，但无法使用 Azure 网站直接配置 IIS。

如果这有什么不同，该网站将以保留模式运行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-10-08T22:00:00.930

实际上，Azure Web Apps 默认安装了应用程序初始化模块。您可以从 web.config 文件或通过 apphost.config XDT 直接配置它。只需在 Web 应用程序根目录的 web.config 中粘贴类似下面的内容即可。

```
<system.webServer>
  <applicationInitialization
    doAppInitAfterRestart="true"
    skipManagedModules="true">
    <add initializationPage="/default.aspx" hostName="myhost"/>
  </applicationInitialization>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T20:29:07.510

Windows Azure 网站不支持应用程序初始化。因为它是本机模块，Windows Azure 网站不允许通过 web.config 配置本机模块。

此外，Windows Azure 网站的内容物理上位于一个集中位置，并从那里加载并执行到网络服务器。虽然共享实例获得主机 VM 的一部分，而保留实例获得完整的主机 VM 来运行您的 Web 应用程序，但在这两种情况下，网站应用程序都来自同一个集中位置，因此您是否有保留实例来获得应用程序初始化并不重要在职的。

应用程序初始化对于您的应用程序是必要的，并且您的网站在保留模式下运行，您可以使用 Azure VM 或 Windows Azure Web 角色使其工作。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-04-01T10:28:37.580

目前，Azure 网站有“始终开启”设置，它的作用几乎相同。

![永远在线功能](../Images/52e917aa0ba8dcccf01a4e8e25a2c1ab.png)

# php - 在常见字符之间匹配PHP中的唯一字符串

> ID：12154406
> 
> 赞同：0
> 
> 时间：2012-08-28T07:08:43.633
> 
> 标签：php, regex

我正在尝试在 PHP 中进行一些字符串匹配。我在变量中有以下 url 字符串：

```
phones/gift.nintendo-3ds/handset.blackberry-9790.html 
```

我想`/gift.nintendo-3ds`从上面删除，但礼物总是不同的。

有任何想法吗？我希望 url 变量在每次调用不同的礼物后看起来像这样：

```
phones/handset.blackberry-9790.html 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:15:31.570

```
preg_replace('/\/gift\.[^/]*/', '', $url); 
```

匹配/礼物。然后直到下一个斜杠并将其替换为空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:15:55.267

尝试：

```
$input  = 'phones/gift.nintendo-3ds/handset.blackberry-9790.html';
$output = preg_replace('(gift\.[^/]*\/)', '', $input); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:45:48.107

您可以将其拆分，删除您不想保留的第二部分，然后再次连接它：

```
$parts = explode('/', $url, 3);
unset($parts[1]);
$result = implode('/', $parts); 
```

这并没有使用您可能想到的任何正则表达式，但可能会告诉您一些其他有用的功能。

演示：[http ://codepad.org/a1pNW8J6](http://codepad.org/a1pNW8J6)

正则表达式变体可以是：

```
echo preg_replace('~^([^/]+)(/[^/]+)~', '$1', $url); 
```

演示：[http ://codepad.org/vyR04xMn](http://codepad.org/vyR04xMn)

# entity-framework-4 - 为什么实体框架中的两个新实体会自动与 POCO 类关联

> ID：12154407
> 
> 赞同：0
> 
> 时间：2012-08-28T07:08:46.187
> 
> 标签：entity-framework-4, poco, entity-relationship

我正在学习 POCO 类的用法和实体之间的关系。

我有两张桌子。我为他们创建了数据模型和 POCO 类。但是当我尝试在调用 context.SaveChanges() 之前同时添加一个新的 Vehicle 实体和一个新的 Journey 时，这两个新实体将自动关联。这意味着，新旅程记录的 VehicleId 字段将填充新车辆记录的 ID。

但是当我切换到数据模型生成的实体类时，VehicleId 将为空。

这是我用来插入实体的代码：

```
using (var context = new TravelEntities())
{
    var newVehicle = new Vehicle();
    newVehicle.Name = "Fly by yourself";
    context.Vehicles.AddObject(newVehicle);

    var newJourney = new Journey();
    newJourney.Location = "Wuyishan";
    context.Journeys.AddObject(newJourney);

    context.SaveChanges();
} 
```

还有 POCO 类和上下文类：

```
public class Vehicle
{
    public virtual int Id { get; set; }
    public virtual String Name { get; set; }
    public virtual ICollection<Journey> Journeys { get; set; }
}
public class Journey
{
    public virtual int Id { get; set; }
    public virtual String Location { get; set; }
    public virtual int VehicleId { get; set; }
    public virtual Vehicle Vehicle { get; set; }
}

class TravelEntities : ObjectContext
{
    ObjectSet<Vehicle> _vehicles;
    ObjectSet<Journey> _journeys;

    public TravelEntities()
        : base("name=TravelEntities", "TravelEntities")
    {
        _vehicles = CreateObjectSet<Vehicle>();
        _journeys = CreateObjectSet<Journey>();
    }

    public ObjectSet<Vehicle> Vehicles { get { return _vehicles; } }
    public ObjectSet<Journey> Journeys { get { return _journeys; } }
} 
```

以下是数据库架构：

```
create table Vehicle
(
    Id int identity(1,1) primary key,
    Name nvarchar(max)
)
go

create table Journey
(
    Id int identity(1,1) primary key,
    Location nvarchar(max),
    VehicleId int,
    constraint FK_Journey_Vehicle foreign key(VehicleId) references Vehicle(Id)
)
go 
```

我想知道的是为什么这两个新实体是关联的，我该如何避免这种情况。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:04:39.417

好吧，斯劳马在评论中给出了答案，但他没有回来。我在问题中对他的评论在页面加载时被隐藏了，也许他没有看到。

问题出在 Journey 类的 VehicleId 属性中，它应该可以为 null，以便该 newJourney 的默认值为 null。所以我将 VehicleId 的类型更改为 int？. 当它是int类型时，默认值为0，等于newVehicle的Id值，我认为这就是它们相关的原因。这没有意义，但这就是 EF 的工作方式。

# vb.net - 使用空格分隔字符串

> ID：12154416
> 
> 赞同：0
> 
> 时间：2012-08-28T07:09:26.660
> 
> 标签：vb.net

我在一个变量中有一个值“90672.40 91796473.18”。我需要将“90672.40”存储在另一个变量中并保留在另一个变量中。而且我还需要从第 40 个位置检索一个数字到结束。请帮助我..

供您参考，我有一个名为`lsline`.

lsline 的值为：

```
lsline = 15-OCT-08 OTHERS                               90672.40    91796473.18 
```

我需要从第 40 个位置检索一个数字，但我不希望空格后面的数字，我只想将“90672.40”存储在另一个变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:08:43.530

`Substring`如果您不想使用，请使用获取字符串的一部分`Split`。以下返回从数字 40 开始的 8 个字符：

```
lsline.Substring(40, 8) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-28T07:12:41.320

只是拆分成一个数组

```
Dim values = Isline.Split(" ")
Dim number = CDec(value[2]) 
```

# java - 如何使用 ExtJs 将参数发送到服务器？

> ID：12154417
> 
> 赞同：0
> 
> 时间：2012-08-28T07:09:32.907
> 
> 标签：java, javascript, servlets, extjs

我将文件上传到服务器并发送参数。但我有两个问题。

1 无法发送参数。我愿意：

```
 handler: function(){
        mapinfo="mapinfo";
        formp.getForm().submit({
        url: url_servlet+'uploadfile',
        params: {file_type: mapinfo},
        success: function(formp, o) {
           alert(o.result.file);
           kad_tab.getStore().reload()
           zoom_store.load();
        }
    })
} 
```

和服务器端：

```
public class uploadfile extends HttpServlet implements Servlet
{
public void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, java.io.IOException {
    response.setCharacterEncoding("UTF-8");
    response.setContentType("text/html");
    String st = request.getParameter("file_type");
    PrintWriter writer = response.getWriter();
    boolean isMultipart = ServletFileUpload.isMultipartContent(request);
    if (!isMultipart) {
            return;
        }          
  FileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);
    List<FileItem> list=null;
    String mifpath= "1";
    String path = " ";
    String mif = " ";
    String from = "\\\\";
    String to ="/";
    String error="";
     try{
      list = upload.parseRequest(request);
      Iterator<FileItem> it = list.iterator();
      response.setContentType("text/html");
      while ( it.hasNext() ) 
      {

        FileItem item = (FileItem) it.next();
        File disk = new File("C:/uploaded_files/"+item.getName());

            path = disk.toString();
            String code = new String(path.substring(path.lastIndexOf("."), path.length()).getBytes("ISO-8859-1"),"utf-8");
            if (code.equalsIgnoreCase(".zip"))
            {
                mifpath=path;
                mif = mifpath.replaceAll(from, to);
                item.write(disk);
                //error=unzip.unpack(mif, "C:/uploaded_files");
            }
            else
            {
                error = "Выбранный файл не является архивом zip";

            }
      }
    }

     catch ( Exception e ) {
      log( "Upload Error" , e);
    }
     System.out.println("st="+st);
    writer.println("{success:true, file:'"+error+"'}");
    writer.close();
}
} 
```

但在控制台中仅获取`st=null`.

2 不能在文件上传面板中使用组合框：

```
var x = new Ext.Window({
                                title:'Загрузка файла',
                                items:[
                                    formp = new Ext.FormPanel({
                                        fileUpload: true,
                                        width: 350,
                                        autoHeight: true,
                                        bodyStyle: 'padding: 10px 10px 10px 10px;',
                                        labelWidth: 70,
                                        defaults: {
                                            anchor: '95%',
                                            allowBlank: false,
                                            msgTarget: 'side'
                                        },
                                        items:[{
                                    xtype:"combo",
                                    fieldLabel:'Тип файла ',
                                    name:"cb_file",
                                    id:"cb_file",
                                    mode:"local",
                                    typeAhead: false,
                                    loadingText: 'Загрузка...',
                                    store:new Ext.data.SimpleStore({
                                        fields: ['file_name', 'file_type'],
                                            data : [['*.MIF/MID', 'mif'],['*.GPX', 'gpx']]
                                        }),
                                    forceSelection:true,
                                    emptyText:'выбирите тип...',
                                    triggerAction:'all',
                                    valueField:'file_type',
                                    displayField:'file_name',
                                    anchor:'60%'
                                },{
                                            xtype: 'fileuploadfield',
                                            id: 'filedata',
                                            emptyText: 'Выберите файл для загрузки...',
                                            fieldLabel: 'Имя файла',
                                            buttonText: 'Обзор'
                                        }],
                                        buttons: [{
                                            text: 'Загрузить',
                                            handler: function(){
                                                mapinfo="mapinfo";
                                                    formp.getForm().submit({
                                                        url: url_servlet+'uploadfile',
                                                        params: {file_type: mapinfo},

                                                        success: function(formp, o) {

                                                            alert(o.result.file);

                                                            kad_tab.getStore().reload()
                                                            zoom_store.load();
                                                            }
                                                    })
                                            }
                                        }]
                                    })
                                ]   
                             })
                             x.show(); 
```

如果我在服务器端执行此操作，则无济于事。例如，如果我上传的不是 zip 档案，我会收到警报，提示它不是 zip 文件，但没有得到它。如果我没有在面板上添加组合框，我会收到此警报。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:07:57.207

那是因为请求是多部分的。然后，您不能使用以下方法读取参数： String st = request.getParameter("file_type");

因为它将始终为空。相反，请使用以下代码段：

```
List items = upload.parseRequest(request);
Iterator iter = items.iterator();
while (iter.hasNext()) {
    FileItem item = (FileItem) iter.next();

    if (item.isFormField()) {
        processFormField(item);
    } else {
        processUploadedFile(item);
    }
} 
```

关于你的第二个问题，我无法理解。

# tcl - 如何使用 tcl 代码配置 PC 的以太网链路

> ID：12154424
> 
> 赞同：0
> 
> 时间：2012-08-28T07:09:57.260
> 
> 标签：tcl

我正在使用 Ubuntu 10.04 和 Tcl 8.4 在我的 linux 机器上工作。我想要一个可以为这台 PC 配置以太网链接的 Tcl 脚本。任何机构都可以为此分享所需的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:07:00.620

处理以太网配置的最简单方法是使用 Tcl 的[`exec`](http://www.tcl.tk/man/tcl8.4/TclCmd/exec.htm)命令来调用[相关 Ubuntu 帮助页面](https://help.ubuntu.com/10.04/serverguide/network-configuration.html)中列出的命令，并进行一些调整以处理 Tcl 本身非常擅长字符串操作的事实。（如果您习惯 bash 脚本，请注意 Tcl`exec`完全不同。特别是，它不会替换 Tcl 进程；而是等待子进程完成并返回其标准输出。）例如，您可以创建列出网络接口的命令，如下所示：

```
proc listNetworkInterfaces {} {
    foreach line [split [exec ifconfig -a] "\n"] {
        if {[regexp {^(\w+)} $line -> ifc]} {
            lappend result $ifc
        }
    }
    return $result
}

# Demonstrating use...
puts "my network interfaces are [join [lsort [listNetworkInterfaces]] ,]" 
```

你会为这样的链接设置 IP 地址、网络掩码和网关（假设你在`tclsh yourscript.tcl`里面运行`sudo`；你*需要*管理权限来配置网络）：

```
proc setNetworkAddress {interface address mask gateway} {
    exec ifconfig $interface $address netmask $mask
    exec route add default gw $gateway $interface
} 
```

您可以在网络接口上配置相当多的东西，但简单编码的一般原则是使用`exec`调用系统工具。它不如其他更复杂的解决方案（例如编写一个将 Tcl 的脚本层直接连接到底层系统调用的 C 接口）快，但它非常容易上手。

# lisp - SICP 练习 1.37：我的迭代解决方案得到了正确的答案，但在 1.38 中出错了

> ID：12154425
> 
> 赞同：2
> 
> 时间：2012-08-28T07:10:03.320
> 
> 标签：lisp, scheme, racket, sicp

我对 SICP 1.37 的迭代解决方案是

```
(define (con-frac n d k)
  (define (iter i result)
    (if (= 1 i)
        result
        (iter (- i 1) (/ (n i) (+ (d i) result)))))
  (iter k (/ (n k) (d k))))

(con-frac (lambda (i) 1.0) (lambda (i) 1.0) 11)

(define (euler-d i)
  (if (= 2 (remainder i 3))
      (* (/ 2 3) (+ i 1))
      1))

(define (e)
  (+ 2 (con-frac (lambda (i) 1.0) euler-d 9)))

(e) 
```

它返回：

> ```
> Welcome to DrRacket, version 5.2.1 [3m].
> Language: SICP (PLaneT 1.17); memory limit: 128 MB.
> 0.6180555555555556
> 2.39221140472879 
> ```

它应该是返回：

> ```
> Welcome to DrRacket, version 5.2.1 [3m].
> Language: SICP (PLaneT 1.17); memory limit: 128 MB.
> 0.6180555555555556
> 2.718283582089552 
> ```

我不知道我的解决方案有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:47:45.770

你在`iter`.

在

```
 (define (iter i result)
    (if (= 1 i)
        result
        (iter (- i 1) (/ (n i) (+ (d i) result))))) 
```

更改`(= 1 i)`为`(= 0 i`.

```
 (define (iter i result)
    (if (= 0 i)
        result
        (iter (- i 1) (/ (n i) (+ (d i) result))))) 
```

由于所有的分子和分母都相等，因此使用的测试`phi`没有捕捉到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:21:30.763

正如@soegaard 的回答中所指出的那样，您的代码中有一个简单[的错误](https://en.wikipedia.org/wiki/Off-by-one_error)。只需替换这一行：

```
(if (= 1 i) 
```

有了这个 - 它比询问是否更惯用`(= 0 i)`：

```
(if (zero? i) 
```

... 就这样！

# xml - Xerces 中的模式组件指示符 (SCD)？

> ID：12154429
> 
> 赞同：0
> 
> 时间：2012-08-28T07:10:20.670
> 
> 标签：xml, xsd, xerces, scd

从 Xerces2 Java Parser Readme 页面，从先前版本的更改部分：

> 此版本还引入了对 XML 模式组件指示符 (SCD) 的实验性支持

我一直在浏览 Javadoc，但终其一生都找不到任何允许使用模式组件指示符的方法或类。我还查看了中提到的包装器： [How to use schema component designators in xerces for java？](https://stackoverflow.com/questions/8581594/how-to-use-schema-component-designators-in-xerces-for-java) 但如果我可以直接使用 Xerces API，我宁愿不使用第三方库。有人可以指出我正确的方向吗？

或者，如果有人可以向我指出另一个模式解析 java 库的方向，该库支持对已解析模式的 SCD 查询，那将不胜感激（我尝试过 XSOM，但发现它的 SCD 方法无法使用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:59:04.543

SCD 在 Xerces2-j 的 xml-schema-1.1-dev 分支[1] 中可用。如果您需要任何实现细节，请查看 [2]。

[1] [https://svn.apache.org/repos/asf/xerces/java/branches/xml-schema-1.1-dev/](https://svn.apache.org/repos/asf/xerces/java/branches/xml-schema-1.1-dev/)

[2] [http://ishanjayawardena.blogspot.com/2012/04/implementation-of-xml-schema-component.html](http://ishanjayawardena.blogspot.com/2012/04/implementation-of-xml-schema-component.html)

# php - 如何在 symfony2 的 SetDefaultOptions 中访问 $options 变量

> ID：12154432
> 
> 赞同：2
> 
> 时间：2012-08-28T07:10:31.603
> 
> 标签：php, symfony, doctrine-orm

我用这个很好

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
 {
    $resolver
    ->setDefaults(array(
            'category' => null,
            'query_builder' => function(EntityRepository $er) {
    $qb = $er->createQueryBuilder('u');

    if ($someCondition) {
        $qb->where('u.id = $options['id']);
    }

    return $qb; 
```

有什么办法可以做到这一点，因为我不想在 buildform 中这样做，因为我在多个位置使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:04:15.170

`setDefaultOptions`旨在初始化选项，最终将被实际传递的选项覆盖，因此您无法访问`$options`那里的变量。

如果您需要根据运行时值具有不同的默认行为，您仍然可以定义一个方法来管理它，但这必须在 buildform 期间手动调用（最终您可以定义一个抽象 buildform 并在那里调用该函数，然后扩展类将不得不调用 parent::buildForm)。

# c# - 部分视图不刷新

> ID：12154439
> 
> 赞同：7
> 
> 时间：2012-08-28T07:11:30.820
> 
> 标签：c#, jquery, asp.net-mvc, razor, partial-views

我在 cshtml 页面上有一个部分视图，如下所示：-

```
@model MvcCommons.ViewModels.CompositeViewModel

@{
ViewBag.Title = "Edit";
}

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
    <fieldset>
    <legend>Article</legend>

    @Html.HiddenFor(model => model.ArticleViewModel.Article.ArticleID)

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleViewModel.Article.CategoryID, "Category")
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.ArticleViewModel.Article.CategoryID, (SelectList)ViewBag.CategoryID) 
        @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.CategoryID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleTitle)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleTitle)
        @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleTitle)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleViewModel.Article.ArticleDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ArticleViewModel.Article.ArticleDate)
        @Html.ValidationMessageFor(model => model.ArticleViewModel.Article.ArticleDate)
    </div>

        @Html.HiddenFor(model => model.PageViewModel.Page.PageTitle, new { id = "PageTitle" })
        @Html.HiddenFor(model => model.PageViewModel.Page.PageAction, new { id = "PageAction" })
        @Html.HiddenFor(model => model.ArticleViewModel.Article.ArticleID, new { id = "ArticleID" })
    <div class="ImageGallery">
        @Html.Partial("~/Views/Shared/ImageGallery.cshtml", Model)
    </div>

</fieldset>
  }

<div>
@Html.ActionLink("Back to List", "Index") 
```

ImageGallery.cshtml 部分视图如下：-

```
@model MvcCommons.ViewModels.CompositeViewModel

@{
ViewBag.Title = "Modal image uploader";
}

<script type="text/javascript">
var pageTitle = $('#PageTitle').val();
var pageAction = $('#PageAction').val();
var id = $('#ArticleID').val();

    $(document).ready(function () {
    $('.modal_block').click(function (e) {
        $('#tn_select').empty();
        $('.modal_part').hide();
    });
    $('#modal_link').click(function (e) {
        $('.modal_part').show();
        var context = $('#tn_select').load('/Upload/UploadImage?Page=' + pageTitle + '&Action=' + pageAction + '&id=' + id, function () {
            initSelect(context);
        });
        e.preventDefault();
        return false;
    });

    $('#delete_images').click(function (e) {
        var sList = "";
        $('input[type=checkbox]').each(function () {
            var sThisVal = (this.checked ? this.value : "");
            sList += (sList == "" ? sThisVal : "," + sThisVal);
        });
        $.ajax({
            url: "/Upload/DeleteImages?IDs=" + sList + '&Page=' + pageTitle + '&Action=' + pageAction + '&id=' + id,
            data: sList,
            cache: false,
            type: "POST",
            dataType: "json"
        });

        reloadGallery();
        return false;
    });

    function reloadGallery() {
        $.ajax({
            type: "GET",
            url: '/Upload/Index/',
            data: "{}",
            cache: false,
            dataType: "html",
            success: function (data)
            { $().html(data); }

        })

    }

});

</script>

<div class="modal_block modal_part"></div>
<div class="modal_dialog modal_part" id="tn_select"></div>

<h2>List of images</h2>
<p>

    This page contains the list of all uploaded images.
</p>

@if (Model.ImageViewModel.Images.Count > 0)
{
<div class="imageContainer">

    <div class="div-table">
    <div class="div-table-row-title">
        <div class="div-table-col">Image</div>
        <div  class="div-table-col">Image Name</div>
    </div>
</div>
}
</div>
    <div class="DeleteImages">
    <a href="#" id="delete_images">Delete Selected Images.</a>
</div> 
```

```
}

else
{
<div class="imageCenter">
No images have been uploaded so far.    
</div>    
}

    <p>
<a href="#" id="modal_link">Click here to open modal dialog.</a>
</p>

<div class="clear"></div> 
```

这是控制器中删除图像的代码：-

```
 [HttpPost]
    public ActionResult DeleteImages(string IDs)
    {
        _Page = Request.QueryString["Page"];
        _Action = Request.QueryString["Action"];
        _ItemID = Convert.ToInt32(Request.QueryString["id"]);

        Generics.PageIDS currentPage = (Generics.PageIDS)Enum.Parse(typeof(Generics.PageIDS), _Page);
        _PageID = Convert.ToInt32(currentPage);

        string[] sepImageIds = IDs.Split(',');

        foreach (string strImageId in sepImageIds)
        {
            imageViewModel.DeleteFromXML(strImageId);
        }

        return RedirectToAction(_Action, _Page, new { id = _ItemID });
    } 
```

在这个局部视图中一切正常，除了当我删除图像时，删除是正确的，但是当代码传回视图时，局部视图不会刷新。

有什么我想念的吗？

感谢您的帮助和时间！

- - - - - - - - - 更新 - - - - - - - - - - - - - - - - -------------- 这是删除完成后的编辑控制器操作：-

```
 public ActionResult Edit(int id = 0)
    {
        articleViewModel.Article = unitOfWork.ArticleRepository.GetByID(id);
        pageViewModel.Page.PageTitle = "Article";
        pageViewModel.Page.PageAction = "Edit";

        if (articleViewModel.Article == null)
        {
            return HttpNotFound();
        }

        PopulateDropDownList(articleViewModel.Article.CategoryID);
        viewModel.ArticleViewModel = articleViewModel;
        int ImageCount = 0;
        imageViewModel.Images = imageViewModel.PopulateFromXML(pageViewModel.GetPageID(_PageName), id, out ImageCount).ToList();
        viewModel.ImageViewModel = imageViewModel;
        viewModel.PageViewModel = pageViewModel;

        return View(viewModel);

        //return Json(viewModel, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T03:54:18.960

我认为这是因为默认情况下所有部分视图都被缓存，我要做的是在控制器中创建一个方法来返回一个 ActionResult 像这样，输出缓存属性为0，所以它不缓存

```
[OutputCache(Duration = 0)]
public ActionResult ImageGalleryAction()
{
  // do return your cshtml name here
  return PartialView("ImageGallery");
} 
```

我会给你的 imageGalleryDiv 一个 id，改变你的 reloadGallery 方法来加载 onload 事件的部分视图，并像这样删除@Html.Partial

```
<script>
function reloadGallery(){
   $('#myImageGallery').load("ImageGalleryAction");
}
</script>

<div id="myImageGallery" class="ImageGallery" onload="reloadGallery()">
 </div> 
```

这样，您的部分视图将通过 jquery 手动注入/刷新，并且不会被缓存。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:08:51.427

我认为它可能在您的 ajax 调用中

```
function reloadGallery() {
    $.ajax({
        type: "GET",
        url: '/Upload/Index/',
        data: "{}",
        cache: false,
        dataType: "html",
        success: function (data)
        { $().html(data); }

    })

} 
```

删除数据：“{}”或将其替换为数据：{}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:15:39.587

一旦您的 DELETE ajax 调用成功，您需要调用该`reloadGallery`函数，该函数位于成功回调中：

```
$.ajax({
    url: '/Upload/DeleteImages?IDs=' + sList + '&Page=' + pageTitle + '&Action=' + pageAction + '&id=' + id,
    data: sList,
    cache: false,
    type: 'POST',
    success: function(data) {
        reloadGallery(); 
    }        
}); 
```

更不用说您的`DeleteImages`操作不会返回任何 JSON，因此您应该删除该`dataType: 'json'`开关。您似乎在`DeleteImages`操作结束时重定向。您确定要重定向到返回部分的控制器操作吗？

另外，与其在您的方法中触发另一个 AJAX 请求，`reloadGallery`为什么不简单地让您的`DeleteImages`操作返回部分并在`success`调用内部使用该方法更新 DOM 的相应部分`.html`？

# sql-server-2008 - 有什么方法可以从没有确定长度的字符串中获取字符串？

> ID：12154443
> 
> 赞同：0
> 
> 时间：2012-08-28T07:11:49.760
> 
> 标签：sql-server-2008

我在试图解决的 SQL Server 中有这个问题。我将此字符串保存在数据库中，其中包含文件的下载位置和下载日期，因此它可以有尽可能多的长度，示例在这里。

```
downloadedFile = c:/Programs and Features/Public/MyFiles/Myfile Mar 23 12:55 PM 
```

或者可以是这样的：

```
downloadedFile = C:/Programs and Feature/Public/MyFiles/FileTypes/MOV/MyFile Mar 23 1:25 PM 
```

即使更改格式，我也可以获得完整的 DATETIME 吗？上面的第一个示例来自 MM DD HH:MM 格式第二个是 MM DD H:MM 格式，如您所见，小时从两位数变为一位，这搞砸了我使用子字符串的机会。此字符串位于字符串的中间，因此，即使将一个字符添加到结果集中，将其解析为 datetime 时也可能会出现问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:22:02.603

你可以使用 [CHARINDEX()](http://msdn.microsoft.com/en-us/library/ms186323.aspx)函数

```
declare @downloadedFile varchar(500);
set @downloadedFile = 
     'c:/Programs and Features/Public/MyFiles/Myfile Mar 23 12:55 PM'

select substring(@downloadedFile,
                 CHARINDEX('Myfile ',@downloadedFile)+7,LEN(@downloadedFile)) 
```

结果：

```
Mar 23 12:55 PM 
```

.

```
set @downloadedFile = 
 'C:/Programs and Feature/Public/MyFiles/FileTypes/MOV/MyFile Mar 23 1:25 PM';

select substring(@downloadedFile,
        CHARINDEX('Myfile ',@downloadedFile)+7,LEN(@downloadedFile)) 
```

结果：

```
Mar 23 1:25 PM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:38:21.680

使用模拟函数来拆分字符串。使用“空格”作为分隔符。数组的最后 4 个索引是您的日期/时间。

也许这可以帮助你

[http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/4126a010-6885-4eb0-b79c-c798c90edb85](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/4126a010-6885-4eb0-b79c-c798c90edb85)

# django - django 模板 - 包含来自同一文件夹的另一个块

> ID：12154444
> 
> 赞同：0
> 
> 时间：2012-08-28T07:11:53.130
> 
> 标签：django, templates

我是 django 的新手，我试图弄清楚如何将同一子文件夹中的其他 html 文件包含到我的主模板文件中。

我尝试了以下方法无济于事：

```
{% include './_shared.html' %} 
```

我最终会有很多模板文件夹。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:20:26.460

您必须将子文件夹放在模板目录中

您必须在 settings.py 中定义模板路径

现在你可以`include` 像这样的模板文件`{% include '/yoursubfolder/file.html' %}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:25:44.923

尝试这个：

```
{% include request.path+"_shared.html" %} 
```

您可能必须在路径和文件名之间添加斜杠。

# sql - SQL-Server 中的更新自动化

> ID：12154455
> 
> 赞同：6
> 
> 时间：2012-08-28T07:12:37.763
> 
> 标签：sql, sql-server, stored-procedures, insert, time-and-attendance

我正在做一个名为“考勤管理系统”的项目

该公司拥有自己的生物指纹扫描仪，用于检查员工的出勤情况并存储在数据库表中。

该表由 4 个字段组成`(ID autonumber, EmployeeNo, CheckTime and CheckType)`

Timekeeping系统存储所有员工的日志和考勤，但它没有指定checktype是“I”还是“O”。如下图所示，员工每次登录，系统都会自动存入数据库，但存为“I”，当同一员工再次登录时，又会存为“I”。

![在此处输入图像描述](../Images/76fbe97193cf23449c4b013200edc9d5.png)

我的客户希望它尽可能自动化。一旦员工再次登录，他想将检查类型更改为“O”。

例如：

我是一名员工。我将在今天早上 8 点登录，然后它将存储到数据库中

今天早上 8 点，检查类型为“I”.. 因为我不知道我已经登录，所以我在早上 8:04 再次登录.. 系统再次将其存储为“I”，就像我一样我下午5点要登出，系统也记录为“我”..

我希望它能够自动更新数据库。无需用户提供任何参数。我希望它在一个存储过程中以自动化该过程。

它应该限制在同一员工内：示例：

Employee1 今天上午 8 点登录.. (checktype "I") Employee1 今天上午 11 点再次登录... (checktype "O") employee1 今天下午 12 点再次登录.. (checktype "I") employee1 今天下午 4 点再次登录（checktype “哦”）

标准应限制在员工编号内，仅限检查时间......并且还希望根据给定数据更新检查类型。

旧系统无法将登录存储为“O”，它纯粹是“I”..

这个怎么做？我需要你的投入和帮助！请？

我创建了一个存储过程，但不知道从哪里开始，而且我不知道完成该过程并使其工作..

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE AUTOMATIC_OVERRIDE
    @ID INT,
    @EMPLOYEENO NVARCHAR(20),
    @CHECKTIME DATETIME,
    @CHECKTYPE NVARCHAR(1)

AS
    SET NOCOUNT ON;
    WHILE @ID = (SELECT ID FROM CHECKTIME)

        SELECT ID,EMPLOYEENO,CHECKTIME,CHECKTYPE
          FROM CHECKTIME
         GROUP BY ID,EMPLOYEENO,CHECKTIME,CHECKTYPE
         ORDER BY CHECKTIME
GO 
```

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:32:03.357

**编辑：**

进入PRC的解决方案：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE AutomaticOverrideByID
    @ID INT,
    @EMPLOYEENO NVARCHAR(20)

AS

    UPDATE CHECKTIME
    SET CHECKTYPE = CASE WHEN (SELECT
    COUNT(ID) AS CountOfLogin
    FROM CHECKTIME
    WHERE CHECKTIME.EMPLOYEENO = @EMPLOYEENO 
    AND CHECKTIME.CheckTime < C.CheckTime) % 2 = 1 THEN 'O' ELSE CHECKTYPE END
    FROM CHECKTIME C
    WHERE C.ID = @ID

GO 
```

这是 Dhenn 询问的现有数据集的更新：

```
UPDATE CHECKTIME
SET CHECKTYPE = CASE WHEN (SELECT
COUNT(ID) AS CountOfLogin
FROM CHECKTIME
WHERE CHECKTIME.EMPLOYEENO = C.EMPLOYEENO 
AND CHECKTIME.CheckTime < C.CheckTime) % 2 = 1 THEN 'O' ELSE CHECKTYPE END
FROM CHECKTIME C 
```

附上[SQL Fiddle 。](http://www.sqlfiddle.com/#!3/ad8f0/1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T07:43:31.890

试试这个选项（[SQL Fiddle 代码](http://sqlfiddle.com/#!3/caf38/1)），应该对 MS SQL Server 2000 有效。

在这里你有完整的工作代码，在 SSMS 选项卡上复制和粘贴。使用它来创建您的过程。

```
DECLARE @Checktime TABLE([ID] int, [EmployeeNo] NVARCHAR(5), [CheckTime] datetime, [CheckType] NVARCHAR(1));

INSERT INTO @Checktime
    ([ID], [EmployeeNo], [CheckTime], [CheckType])
VALUES
(1, '111-1', '20120826 08:00:00', 'I'),
(2, '222-2', '20120826 08:05:00', 'I'),
(3, '333-3', '20120826 08:07:00', 'I'),
(4, '444-4', '20120826 08:09:00', 'I'),
(5, '555-5', '20120826 08:10:00', 'I'),
(6, '666-6', '20120826 08:12:00', 'I'),
(591, '050-71-1', '20120703 13:06:18', 'O'),
(592, '050-71-1', '20120703 13:06:16', 'O'),
(593, '050-71-1', '20120703 12:54:01', 'O'),
(594, '050-71-1', '20120703 12:53:59', 'O'),
(617, '050-71-1', '20120703 07:53:14', 'O'),
(631, '050-71-1', '20120702 17:36:12', 'O'),
(641, '050-71-1', '20120702 12:13:50', 'O'),
(642, '050-71-1', '20120702 12:13:49', 'O'),
(646, '050-71-1', '20120702 12:00:33', 'O'),
(647, '050-71-1', '20120702 12:00:31', 'O'),
(678, '050-71-1', '20120702 08:07:50', 'O'),
(679, '050-71-1', '20120828 18:07:48', 'O');

DECLARE @Employee NVARCHAR(5)='050-71-1'

INSERT INTO @Checktime ([ID], [EmployeeNo], [CheckTime], [CheckType])
SELECT TOP 1 680 'NewId', EmployeeNo, GETDATE(),
       'NewCheck' = CASE 
           WHEN DATEDIFF(dd, CheckTime, GETDATE())>0 THEN 'I'
           WHEN CheckType = 'I' THEN 'O'
           ELSE 'O'
       END
  FROM @Checktime
 WHERE EmployeeNo = @Employee
 ORDER BY CheckTime DES

SELECT * FROM @Checktime 
```

结果：

```
ID  EmployeeNo          CheckTime          CheckType
1     111-1     2012-08-26 08:00:00.000       I
2     222-2     2012-08-26 08:05:00.000       I
3     333-3     2012-08-26 08:07:00.000       I
4     444-4     2012-08-26 08:09:00.000       I
5     555-5     2012-08-26 08:10:00.000       I
6     666-6     2012-08-26 08:12:00.000       I
7     222-2     2012-08-28 09:37:41.917       O 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T05:42:49.957

我认为最好使用`CheckIN`&`CheckOut`列而不是`CheckTime`& `CheckType`。

*   如果他已经登录，请更新`checkOut`时间。

*   如果他没有登录，请保存`CheckIN`&`CheckOut`时间，在这种情况下它很可能是同一时间。

没有比这更容易的了。

# mysql - MYSQL ERROR 1045 (28000): Access denied for user 'usernamei'@'hostname' (using password: YES)

> ID：12154458
> 
> 赞同：0
> 
> 时间：2012-08-28T07:12:52.227
> 
> 标签：mysql, phpmyadmin

嗨，伙计们，我遇到了这个错误，在环顾四周后，建议是密码错误，但我不明白密码怎么可能是错误的，因为我可以使用 phpMyadmin 使用相同的详细信息进行连接。为什么命令行应该给我这个错误？

我一直在使用以下命令进行连接：

```
mysql -h db.gatungo.gskool.com -u mungai -p
 Enter password: **********
ERROR 1045 (28000): Access denied for user 'mungai'@'212.22.177.50' (using password: YES) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:13:47.030

尝试更改`hostname`为`localhost`或`127.0.0.1`。

我不相信`hostname`是一个有效的主机。

请注意，您的用户名也为`usernamei`

```
mysql -u usernamei -h localhost -p 
```

还要确保您可以从外部访问该用户：

```
GRANT USAGE ON *.* TO  'mungai'@'%' IDENTIFIED BY  'YOUR_PASSWORD'; 
```

# mysql - Mysql从多个表连接

> ID：12154460
> 
> 赞同：0
> 
> 时间：2012-08-28T07:12:57.687
> 
> 标签：mysql, join

我有 3 张桌子

```
friends
posts
members

friends
========
id, to, from (user_id's), status

there are 3 status's -1 = denied, 0 = no response/new, 1 = accepted

posts
=======
p_id, user_id (same as member_id), text

members
========
member_id, f_name, l_name 
```

如果想从“posts”中的帖子中选择文本，请将其与“members”中的用户名结合起来，并且只显示 user_id 在“friends”表中的帖子。

我想知道它是否可以完成，我在我的查询中尝试了一个 IN() 语句，但它在 IN() 内生成 csv 时产生了一个新问题。我更喜欢通过 mysql 执行此操作，但如果无法完成，我可能会使用全局变量来存储朋友数据（但它不会是最新的，或者在用户结识新朋友时必须刷新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:20:53.147

*据我了解，您*想查找所有朋友的姓名和帖子，而不是朋友表中的任何朋友......？

您自己的用户 id 在 中`$myId`，应该这样做（最新帖子优先）；

编辑：为朋友添加状态检查

```
SELECT m.f_name, m.l_name, p.`text`
FROM members m
JOIN posts p 
  ON m.member_id = p.user_id
JOIN friends f 
  ON f.`to` = m.member_id OR f.`from` = m.member_id
WHERE (f.`from` = $myId OR f.`to`= $myId)
  AND f.`status` = 1 AND m.member_id <> $myId
ORDER BY p.p_id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:22:57.407

试试这个 ：

```
 SELECT p.text,m.f_name,m.l_name FROM posts p 
    LEFT OUTER JOIN members m ON p.user_id=m.member_id
    where p.user_id in(select id from friends);

OR

   SELECT p.text,m.f_name,m.l_name FROM posts p 
   LEFT OUTER JOIN members m ON p.user_id=m.member_id
   INNER JOIN friends f on p.user_id=f.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:23:20.080

如果我理解正确，您有一个 user_id，并且您想要由该用户的“朋友”撰写的所有帖子。此查询从帖子开始，将其加入朋友（其中作者是友谊的“目的地”）（此时 WHERE 子句将过滤掉任何非朋友的帖子），然后加入成员以填写作者的名称信息。

```
SELECT 
  posts.p_id
  posts.text,
  CONCAT(members.f_name, " ", members.l_name)
FROM 
  posts
  JOIN friends ON posts.user_id = friends.to
  JOIN members ON posts.user_id = members.member_id
WHERE
  friends.from = ?
GROUP BY posts.p_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:31:44.743

我添加了一个子查询来获取你所有的朋友，因为我假设如果你有这些记录

```
Friends
==================================
ID      TO       FROM     STATUS
==================================
1       1        2         1
2       3        1         1 
```

而你的`member_id = 1`，你的朋友是 2、3。对吧？

```
SELECT  b.f_name,
        b.L_name,
        c.`text`
FROM
    (
        SELECT `to` friendID
        FROM    friends
        WHERE   `status` = 1 AND
                `from` = ?             -- change this to your ID
        UNION
        SELECT `from` friendID
        FROM    friends
        WHERE   `status` = 1 AND
                `to` = ?               -- change this to your ID
    ) a  INNER JOIN members b
            ON a.friendID = b.member_ID
        LEFT JOIN   posts c
            ON a.friendID = c.user_id 
```

# c# - 使用 C# 使用 php webservice 时没有发现信息

> ID：12154463
> 
> 赞同：1
> 
> 时间：2012-08-28T07:13:27.590
> 
> 标签：c#, php, web-services

当我尝试将 php web 服务与 C# windows 窗体应用程序一起使用时，我遇到了一些关键问题。我的问题是，通常当我想在本地 pc 中添加 web 引用并且 web 服务在 asp.net 中运行时，我可以添加网络参考并使用它，但是当我尝试添加一个在 php 中构建的网络参考时，我得到了这个错误....添加参考按钮处于非活动状态并且...显示消息....

**HTML 文档不包含 Web 服务发现信息。** 它显示了我的 php webservice 的所有方法......但是我现在能做什么......请帮助任何人......

# jquery - 使用 JQuery 在第一个选项元素之后添加一个新元素以选择框

> ID：12154464
> 
> 赞同：5
> 
> 时间：2012-08-28T07:13:28.247
> 
> 标签：jquery

我有一个包含以下选项的组合框

```
<select id="history">
    <option></option>
    <option>element1</option>
    <option>element2</option>
    <option>element3</option>
    <option>element4</option>
</select> 
```

我正在尝试在第一个选项之后添加一个新选项。我尝试过的最有效的方法是什么

```
<script type="text/javascript">
    $("#history").prepend("<option>sdsadas</option>").after('#history:first-child');
    $("<option>asdsad</option>").insertBefore('#history option:first-child');
//    $('option[value="sadsaddsad"]', this).after('option:first');
</script> 
```

但这些都不是我想要的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T07:18:02.107

你可以这样做：

```
$("#history option:first").after("<option>sdsadas</option>"); 
```

这将获取第一个`<option>`标签，然后在其后插入一个新选项。

* * *

jQuery 支持两种插入位置的方式。上面的版本是`target.after(content)`，而另一种方式是`content.insertAfter(target)`：

```
$("<option>sdsadas</option>").insertAfter("#history option:first"); 
```

注意：一种用途`.after()`，另一种用途`.insertAfter()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:23:54.697

利用

```
$("#history option:eq(0)").after("<option>New Option Added</option>"); 
```

来源：[http ://www.myphpetc.com/2009/03/jquery-select-elements-tips-and-tricks.html](http://www.myphpetc.com/2009/03/jquery-select-elements-tips-and-tricks.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:19:30.720

使用以下内容：

```
$("<option>asdsad</option>").insertBefore($('#history option:first-child')); 
```

代替：

```
$("<option>asdsad</option>").insertBefore('#history option:first-child'); 
```

# wordpress - MAMP 到 Live WP 后出错

> ID：12154465
> 
> 赞同：0
> 
> 时间：2012-08-28T07:13:30.963
> 
> 标签：wordpress, error-handling

嗨，我在使用我的 wordpress 网站从本地到服务器后得到了这些错误。

警告：call_user_func_array() 期望参数 1 是有效回调，未找到函数 'bones_register_sidebars' 或 /is/htdocs/wp1108989_5IDG6XP7VR/www/cgi-bin/website/wp-includes/plugin.php 中的无效函数名称第 403 行

警告：无法修改标头信息 - 标头已由 /is/htdocs/wp1108989_5IDG6XP7VR/www/ 中的 /is/htdocs/wp1108989_5IDG6XP7VR/www/cgi-bin/website/wp-includes/plugin.php:403 发送cgi-bin/website/wp-includes/pluggable.php 在第 881 行

主机是hosteurope。任何人任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:49:33.480

不太确定这些错误是什么，但如果一切都按预期工作，那么在你的`.htaccess`文件中添加一个 php 值

```
php_value error_reporting 0 
```

# jquery - 如何使用 jquery 掩码插件定义可接受的值范围

> ID：12154466
> 
> 赞同：0
> 
> 时间：2012-08-28T07:13:31.837
> 
> 标签：jquery, jquery-plugins, mask, masking

如何定义可接受的值范围（0-9999）？

如果掩码定义为

```
.mask('9999') 
```

可接受的值将在 1000 到 9999 之间，但我需要 0 到 9999 之间的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:21:43.170

在`?`使它成为可选之后：

```
.mask('9?999') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:21:55.290

尝试

```
.mask('9?999') 
```

来自[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

> 你可以让你的面具的一部分是可选的。“？”之后列出的任何内容 掩码内被认为是可选的用户输入。

# c# - 网格 SharedSizeScope 不起作用

> ID：12154470
> 
> 赞同：1
> 
> 时间：2012-08-28T07:13:45.423
> 
> 标签：c#, wpf, grid

我想我错过了一些重要的东西，但我就是想不通。我想让多个网格共享相同的列宽，因此我使用 sharedsizegroups，但我似乎无法让它工作。

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow"
        Width="525"
        Height="350">
    <StackPanel x:Name="sg"
                local:exGrid.IsSharedSizeScope="True"
                Orientation="Vertical">
        <Button Click="Button_Click" Content="Click Me" />
    </StackPanel>
</Window> 
```

后面的代码：

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            sg.Children.Add(new exGrid("short", "loooooooooooooooooooooooooong", "a"));
            sg.Children.Add(new exGrid("veeeeeeeeeeeeeeeeeeery loooooooooooooooooooooooooong", "short", "a"));
        }
    }
} 
```

exGrid.cs

```
namespace WpfApplication1
{
    class exGrid : Grid
    {
        public exGrid(string a, string b, string g)
        {
            this.SetValue(exGrid.IsSharedSizeScopeProperty, true);

            for (int i = 1; i <= 2; i++)
            {
                this.ColumnDefinitions.Add(new ColumnDefinition() { Width = GridLength.Auto, SharedSizeGroup = g });
            }

            this.SetValue(exGrid.ShowGridLinesProperty, true);

            TextBlock tx1 = new TextBlock();
            tx1.Text = a;

            TextBlock tx2 = new TextBlock();
            tx2.Text = b;

            tx1.SetValue(exGrid.ColumnProperty, 0);
            tx2.SetValue(exGrid.ColumnProperty, 1);

            this.Children.Add(tx1);
            this.Children.Add(tx2);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:31:39.527

请参阅 MSDN 示例：http: [//msdn.microsoft.com/fr-fr/library/system.windows.controls.grid.issharedsizescope.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.grid.issharedsizescope.aspx)

您只需要在网格的容器上设置 IsSharedSizeScopeProperty，而不是在每个网格上：

```
namespace WpfApplication1
{
    class exGrid : Grid
    {
        public exGrid(string a, string b, string g)
        {
            // this.SetValue(exGrid.IsSharedSizeScopeProperty, true);

            for (int i = 1; i <= 2; i++)
            {
                this.ColumnDefinitions.Add(new ColumnDefinition() { Width = GridLength.Auto, SharedSizeGroup = g });
            }

            this.SetValue(exGrid.ShowGridLinesProperty, true);

            TextBlock tx1 = new TextBlock();
            tx1.Text = a;

            TextBlock tx2 = new TextBlock();
            tx2.Text = b;

            tx1.SetValue(exGrid.ColumnProperty, 0);
            tx2.SetValue(exGrid.ColumnProperty, 1);

            this.Children.Add(tx1);
            this.Children.Add(tx2);
        }
    }
} 
```

# iphone - 我们可以使用 AVCaptureSession.. 启用相机控件吗？

> ID：12154473
> 
> 赞同：0
> 
> 时间：2012-08-28T07:13:48.700
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller, avcapturesession

我想使用 AVCaptureSession，因为我必须在特定框架中安装相机视图（我不确定是否可以使用 UIImagePickerController 安装相机框架）。但我也想显示相机控制（自动和前置/后置摄像头按钮），有谁知道我怎么能做到这一点..？还是我必须将它们用作自定义按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:28:19.077

如果你想使用 AVCaptureSession，你必须自己做所有的相机控制（添加一些覆盖视图到你的 AVCaptureSession 相机）。您可以使用 UIImagePickerController 并使用 cameraViewTransform 转换您的相机，例如全屏相机转换：

```
#define CAMERA_TRANSFORM 1.32

camera.showsCameraControls = YES;
camera.navigationBarHidden = YES;
camera.toolbarHidden = YES;
camera.wantsFullScreenLayout = YES;

camera.cameraViewTransform = CGAffineTransformScale(camera.cameraViewTransform, CAMERA_TRANSFORM, CAMERA_TRANSFORM); 
```

对于覆盖，你有财产：

```
@property (nonatomic, retain) UIView *cameraOverlayView; 
```

但我建议您只使用 addSubview 到您的 UIImagePickerController 视图：

```
[camera.view addSubview:self.overlay.view]; 
```

# vba - 更改连接器样式

> ID：12154475
> 
> 赞同：3
> 
> 时间：2012-08-28T07:13:57.323
> 
> 标签：vba, visio

我想突出显示 Shape 对象的连接器，但它没有为连接器本身提供任何 LineStyle 属性。这是我到目前为止得到的：

```
 For i = 0 To UBound(lngShapeIDs)
      Dim shp As Shape

      Dim connect As connect
      Set shp = ActivePage.Shapes.ItemFromID(lngShapeIDs(i))
      shp.LineStyle = "Guide"
      shp.BringToFront
      Set connect = shp.FromConnects.Item(i + 1)
    Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:50:23.187

根据您的评论，这就是我认为您正在寻找的

```
Dim shape As shape
For Each shape In ActivePage.Shapes
    If (shape.OneD <> 0) Then
        shape.CellsU("LineColor").Formula = "rgb(255,0,0)"
        shape.BringToFront
    End If
Next 
```

此示例枚举页面中的所有形状。它假定“一维”形状是需要修改的连接器。对于这些连接器，它们的线条颜色设置为红色，并且它们都被带到前面。

因此，如果这是绘图的初始状态：

![在此处输入图像描述](../Images/ca91e86a8aa7ad23a8583145c3ccc00d.png)

然后运行 ​​VBA 代码后，绘图将如下所示：

![在此处输入图像描述](../Images/6217f4c7235fae89e7d6b26c680776da.png)

# mysql - 创建视图以添加行号。对于由列索引过滤的特定数据集

> ID：12154484
> 
> 赞同：0
> 
> 时间：2012-08-28T07:14:28.897
> 
> 标签：mysql, database, view, row

我有一个像下面提到的那样的数据库表。

```
id    | lecture            | subject_id | date       | is_deleted
------|--------------------|------------|------------|-----------
 1    | Introduction       | 1          | 2012-08-10 | 0   
 2    | Structure          | 2          | 2012-08-15 | 1   
 3    | Introduction       | 2          | 2012-08-12 | 0   
 4    | Functions          | 1          | 2012-08-14 | 1   
 5    | Material           | 2          | 2012-08-18 | 0   
 6    | Requirements       | 1          | 2012-08-16 | 0   
 7    | Analysis           | 1          | 2012-08-11 | 0 
```

我需要从这个表（讲座）中创建一个视图，它将显示一个行号。（流号）对于按日期排序的每个主题，删除 is_deleted = 1 行。简单地说，做一个流程没有。对于特定主题的每个讲座，仅按日期排序，未删除讲座。因此，由上述数据生成的视图将如下所示。

```
flow_no | id   | date       | lecture            | subject_id 
--------|------|------------|--------------------|------------
 1      | 1    | 2012-08-10 | Introduction       | 1          
 2      | 7    | 2012-08-11 | Analysis           | 1          
 3      | 6    | 2012-08-16 | Requirements       | 1          
 1      | 3    | 2012-08-12 | Introduction       | 2          
 2      | 5    | 2012-08-18 | Material           | 2 
```

我试图以多种方式做到这一点，但一切都失败了。如果有人可以帮助我解决这个问题，我们将不胜感激。(mysql)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:19:30.947

```
SELECT @rownum := @rownum + 1 flow_no, id, date, lecture, subject_id
FROM subjects, (SELECT @rownum := 0) r
WHERE is_deleted = 0
ORDER BY subject_id, date, id 
```

我会把它留给你把它变成一个视图。

要重新启动每个主题的 flow_no，您有几个选择：

复制上面的查询，并将其包装为子查询，然后计算`min(flow_no)`分组`subject_id`，将其连接到上面的查询中，并从每一行中减去 min flow_no。

您可以将 subject_id 分配给一个变量，然后根据当前的 subject_id 检查该变量并每次重置 rownum 变量 - 我什至不确定这是可能的。

您可以编写一个存储过程来执行此操作 - 获取唯一 subject_id 的列表，然后为每个查询运行一堆查询并输出它们。

这些选项中没有一个对我有吸引力。如果这是我，我会放弃在查询中这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T07:03:41.577

我在另一个在线论坛成员的支持下找到了答案。以下将给出所需的确切结果。如果有任何相同的 Lecture.date 行，它会按 Lecture.id 顺序为这些行生成 flow_no。

```
SELECT id, lecture, Lecture.subject_id, date, c,
 (SELECT COUNT(subject_id) + 1 FROM Lecture AS l
  WHERE l.subject_id = Lecture.subject_id
  AND (l.date < Lecture.date OR (l.date = Lecture.date AND l.id < Lecture.id))
  AND is_deleted != 1
 ) AS flow_no
FROM Lecture
INNER JOIN
(
 SELECT subject_id, COUNT(subject_id) AS c
 FROM Lecture
 WHERE is_deleted != 1
 GROUP BY subject_id
) AS counts
ON Lecture.subject_id = counts.subject_id
WHERE is_deleted != 1
ORDER BY subject_id, date; 
```

# ruby-on-rails - Rails：查询语法错误的地方

> ID：12154486
> 
> 赞同：0
> 
> 时间：2012-08-28T07:14:52.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我严重无法解决这个语法错误：

```
PG::Error: ERROR:  syntax error at or near "07"
LINE 1: ...WHERE (post_id = 13 AND created_at > 2012-08-27 07:13:26) ... 
```

这是我的查询的样子：

```
Post.where(post_filter_params_where)

    def post_filter_params_where
      case params[:post_filter].to_i
      when 1
        "post_id = #{params[:id]}"
      when 2
        "post_id = #{params[:id]}"
      when 3
        time = 24.hours.ago.utc.to_s(:db)
        "post_id = #{params[:id]} AND created_at > #{time}"
      else
        "post_id = #{params[:id]}"
      end
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:18:03.563

利用：

```
Post.where('post_id = ? AND created_at > ?', params[:id], 24.hours.ago.utc.to_s(:db)) 
```

该错误是因为您连接了 where 条件并错过了日期的报价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:36:52.143

我需要在函数中添加查询`puts`

```
 def post_filter_params_where
      case params[:post_filter].to_i
      when 1
        puts 'post_id = ?', params[:id]
      when 2
        puts 'post_id = ?', params[:id]
      when 3
        puts 'post_id = ?', params[:id], 24.hours.ago.utc.to_s(:db)
      else
        puts 'post_id = ?', params[:id]
      end
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:41:10.427

是否有需要使用的特定原因`Post.where(some_function)`，因为提供一种方法更有意义`Post.filter(params[:post_filter], params[:id])`- 如果您需要重用过滤器方法，只需编写一个模块并将其包含在所有相关模型中。

此外，您当前的代码对 SQL 注入攻击是开放的。切勿使用 ruby​​ 字符串插值来创建 sql 字符串，请参阅[http://guides.rubyonrails.org/security.html#sql-injection](http://guides.rubyonrails.org/security.html#sql-injection)

无论如何，这是一些代码:)

```
class Post < ActiveRecord::Base
  def self.filter(filter, post_id)
    if filter.to_i == 3
      where('post_id = ? AND created_at > ?', post_id, 24.hours.ago.utc)
    else
      where('post_id = ?', post_id)
    end
  end
end 
```

然后不要`Post.where(some_function)`在控制器中使用，只需使用`Post.filter(params[:post_filter], params[:id])`. 加分点，最好用一些常数来描述什么`3`意思。

# postgresql - 如何调试 Postgres 复制命令失败

> ID：12154487
> 
> 赞同：1
> 
> 时间：2012-08-28T07:14:58.163
> 
> 标签：postgresql, sqlbulkcopy, postgresql-8.4

我使用失败的复制命令将大约 75k 记录加载到 Postgres 表中。我得到一个例外

> 错误：编码“UTF8”的字节序列无效：0xbd

现在我需要找到哪一行有这个条目。有没有办法做到这一点？我正在考虑启用一些可能有帮助的 postgres 日志记录或任​​何其他解决方案注意：我只遇到一个特定文件的问题。其他文件正在加载而没有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:34:02.050

我似乎总是在我的错误中得到一个行号，无论我是否使用`COPY`或`\copy`通过重定向或`-f`.

```
ERROR:  invalid byte sequence for encoding "UTF8": 0xa3
CONTEXT:  COPY z, line 3 
```

如果只有几个坏字符并且您只想剥离它们，则可以使用 iconv （假设您使用的是类 unix 系统）。

```
iconv -c --from=utf8 --to=utf8 /tmp/badchars.txt > /tmp/stripped.txt 
```

如果您想查看删除的内容，您始终可以针对 before + after 版本运行 diff。

# clipping - Web Clipper Portlet 不显示 IBM WPS 7.0 中的剪辑内容

> ID：12154489
> 
> 赞同：0
> 
> 时间：2012-08-28T07:15:26.003
> 
> 标签：clipping, websphere-portal

我正在尝试使用 IBM Web Clipper portlet 剪辑外部应用程序。我完全不知道外部应用程序的规格。我需要做的就是在 Web Clipper Portlet 页面中提及 URL。但是这样做之后，内容没有显示出来，反过来我收到以下错误消息：

```
WCSVC0010W: The content for "http://www.google.com" could not be retrieved! Please consult the WebSphere Portal Server log files.

NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T00:07:45.297

第一个建议是查看错误消息指示的日志。希望日志更详细地说明无法检索内容的原因。

第二个想法是检查您的服务器是否可以访问目标 URL。防火墙或类似的东西可能会阻止您的服务器访问外部 URL（如 www.google.com）。登录服务器并尝试 ping 您的目标 URL。

# android - 果冻豆的客户端证书错误

> ID：12154495
> 
> 赞同：4
> 
> 时间：2012-08-28T07:15:57.293
> 
> 标签：android, certificate, ssl

在 Android 中，我使用具有相互身份验证的 TLS 连接以及使用此代码创建的客户端证书。

```
private static X509Certificate generateX509V1Certificate(KeyPair pair, SecureRandom sr)
{
  String dn="CN="+sUuid.toString();
  final Calendar calendar = Calendar.getInstance();
  calendar.add(Calendar.HOUR, -1);
  final Date startDate = new Date(calendar.getTimeInMillis());
  calendar.add(Calendar.YEAR, 1);
  final Date expiryDate = new Date(calendar.getTimeInMillis());
  final BigInteger serialNumber =   
    BigInteger.valueOf(Math.abs(System.currentTimeMillis()));
  X509V1CertificateGenerator certGen = new X509V1CertificateGenerator();
  X500Principal dnName = new X500Principal(dn);
  certGen.setSerialNumber(serialNumber);
  certGen.setIssuerDN(dnName);
  certGen.setNotBefore(startDate);
  certGen.setNotAfter(expiryDate);
  certGen.setSubjectDN(dnName); // note: same as issuer
  certGen.setPublicKey(pair.getPublic());
  certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");
  if (VERSION.SDK_INT<VERSION_CODES.GINGERBREAD)
    return certGen.generateX509Certificate(pair.getPrivate(), "BC");
  else
    return  certGen.generate(pair.getPrivate(), sr);
} 
```

密钥对算法是“RSA”。密码算法是“RSA/ECB/PKCS1Padding”。

在 Jelly Bean 版本之前它工作正常。

使用 Jelly bean，我在调用时收到错误消息

```
socket.getSession().getPeerCertificates() 
```

该进程在日志中被杀死：

```
E/NativeCrypto(1133): error:140C10F7:SSL routines:SSL_SET_PKEY:unknown certificate type
A/libc(1133): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 1233 (AsyncTask #1) 
```

我不知道如何解决这个错误。

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:17:33.090

我刚刚遇到了这个问题，还有一个出现以下错误：致命信号 11 (SIGSEGV) at 0x3f80005c (code=1), thread 11709 (FinalizerDaemon)

当我在通过使用来自 KeyChain API 的密钥来使用客户端 SSL 身份验证的应用程序上升级到 Galaxy S3 上的 4.1.1 时，它们开始随机发生。

它在 4.0.4 上运行良好（幸运的是我设法降级）。

我不是 100% 确定，但 4.1.1 似乎有很多与 SSL 相关的错误 - 检查这个：[http](http://code.google.com/p/android/issues/detail?id=35141) ://code.google.com/p/android/issues/detail?id=35141 以及这个：[http](http://code.google.com/p/android/issues/detail?id=34577) ://code.google.com/p/android/issues/detail?id=34577 （可能与当前案例无关）也在这个论坛帖子中：[https ://groups.google.com /forum/?fromgroups=#!topic/android-developers/Lj2iHX4prds](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Lj2iHX4prds)在对从 KeyChain API 返回的 PrivateKey 对象执行 GC 时，提到了 SEGFAULT。

所以作为最后的建议 - 尽可能长时间地留在 4.0.4 或转到 4.1.2 - 似乎有一些错误修复。

此外，我可以确认我遇到的两个问题在 4.1.2 模拟器上不存在。Galaxy S3 没有 4.1.2 图像，因此我无法确认它们是针对真实设备修复的（没有另一个）。

希望能成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:24:44.343

将生成的证书转储到文件中并尝试使用 OpenSSL 1.0 解析它。这与 Android 用于解析证书的代码相同，因此它应该可以帮助您找到错误。也许他们根本不再支持 v1 证书，您可以尝试生成 v3 证书。

# ios - 沙盒中的 InAppPurchase（通过测试用户）

> ID：12154503
> 
> 赞同：1
> 
> 时间：2012-08-28T07:16:26.507
> 
> 标签：ios, in-app-purchase, sandbox

要在沙盒中测试 InAppPurchase，我需要在 Appstore 中上传应用吗？如果不是，那么代码将如何与我在 iTunesConnect 中为 inAppPurchase 制作的虚拟应用程序相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:25:09.263

正如@stack 所提到的，InAppPurchase 无法在模拟器上进行测试。你必须使用设备来测试它。此外，您无需提交 AppStore 发布申请。

请查看此[博客](http://nixsolutions.com/blog/development/iphone/in-app-purchase-tutorial/)并访问名为**“在 iTunes Connect 中创建购买产品和测试用户**”的最后一节。

请让我知道这篇文章是否对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:48:55.833

也无需上传二进制文件。只需确保 InAppPurchase 项目的状态必须是“准备提交”而不是“提交以供审核”（仅用于沙盒测试。）并且 xcode 项目将通过 Bundle ID 与该虚拟应用程序相关。

# android - 一项活动和所有其他片段

> ID：12154505
> 
> 赞同：159
> 
> 时间：2012-08-28T07:16:46.293
> 
> 标签：android, android-layout, android-activity, android-fragments, android-lifecycle

我正在考虑用 和 实现一个屏幕和`Activity`所有其他屏幕。`Fragments``managing all the fragments thru the activity`

**这是个好主意吗？**我的回答是**否定**的，但我仍然想更清楚地了解这个想法。

**这个想法的优点和缺点是什么？**

**笔记：**

请不要给我片段和活动的链接。

**编辑：**

这是片段和活动的内容：

**优点：**

1.  片段旨在作为子活动与活动一起使用。
2.  片段不是活动的替代品。
3.  片段意味着可重用性（需要知道以何种方式可以实现可重用性。）。
4.  片段是编写代码以支持平板电脑和手机的最佳方式。

**缺点：**

1.  我们需要实现接口来从片段中获取数据。
2.  对于对话，我们必须走很长的路才能展示它。

**如果我们不考虑平板电脑，为什么要使用片段？活动和片段之间的开始时间差是多少？**

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-08-31T19:00:05.173

这取决于您正在创建的应用程序。我已经使用这两种方法创建了几个应用程序，并且不能说一种方法总是比另一种更好。我创建的最新应用程序使用单一`Activity`方法和 Facebook 样式导航。从导航列表中选择项目时，我会更新一个`Fragment`容器以显示该部分。

也就是说，拥有一个单曲`Activity`也会带来很多复杂性。假设您有一个编辑表单，对于用户需要选择或创建的某些项目，需要他们转到新屏幕。对于活动，我们只是调用新屏幕，`startActivityForResult`但`Fragments`没有这样的东西，因此您最终将值存储在 上`Activity`并让主编辑片段检查`Activity`数据是否已被选择并应显示给用户。

Aravind 所说的坚持单一`Activity`类型也是正确的，但并不是真正的限制。您的活动将是 FragmentActivity，只要您不需要，`MapView`那么就没有真正的限制。如果您确实想显示地图，可以这样做，但您需要修改 Android 兼容性库以`FragmentActivity`扩展`MapActivity`或使用公开可用的[android-support-v4-googlemaps](https://github.com/petedoyle/android-support-v4-googlemaps/downloads)。

最终，我认识的大多数走一条`Activity`路线的开发人员都回到了多个活动来简化他们的代码。明智的用户界面，在平板电脑上，你有时会被困在使用单个`Activity`只是为了实现你的设计师想出的疯狂交互:)

- 编辑 -

Google 终于发布`MapFragment`了兼容性库，因此您不再需要使用 android-support-v4-googlemaps hack。在此处阅读更新：[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)

-- 编辑 2 --

我刚刚阅读了这篇关于现代（2017 年）片段状态的精彩文章，并记住了这个旧答案。想我会分享：[片段：Android所有问题的解决方案](https://academy.realm.io/posts/michael-yotive-state-of-fragments-2017/)

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-08-08T09:46:47.030

我即将完成一个项目（开发 5 个月），它有 1 个活动和 17 个片段，全屏显示。这是我的第二个基于片段的项目（之前是 4 个月）。

**优点**

*   主要活动是 700 行代码，只是很好地管理片段导航的顺序。
*   每个片段都很好地分成了自己的类，并且相对较小（大约几百行 ui 内容）。
*   管理层可以说，“嘿，我们切换那些屏幕的顺序怎么样”，我可以很容易地做到，因为这些片段不相互依赖，它们都通过 Activity 进行通信。我不必深入研究各个活动，就可以找到他们互相称呼的地方。
*   我的应用程序的图形非常繁重，永远不会作为 1 个屏幕 1 个活动工作。内存中的所有这些子活动都会使应用程序一直耗尽内存，所以我必须对`finish()`所有不可见的活动，并为导航制作相同的控制逻辑，就像我对片段所做的那样。正因为如此，还不如用碎片来做。
*   如果我们曾经做过一个平板应用程序，我们将更容易重构东西，因为一切都已经很好地分开了。

**缺点**

*   你必须学习，如何使用片段

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-10-09T15:56:37.463

首先，无论你做什么，确保你有一个使用模型、视图、演示者的模块化设计，它不高度依赖于 Activity 或 Fragment。

活动和片段真正提供了什么？

1.  生命周期事件和回栈
2.  背景和资源

因此，**仅**将它们用于此目的。他们有足够的责任，不要过度复杂化他们。我认为即使在 Activity 或 Fragment 中实例化 TextView 也是不好的做法。**像public View findViewById (int id)**这样的方法是**PUBLIC**是有原因的。

现在问题变得更简单了：我需要多个独立的生命周期事件和后台堆栈吗？如果您认为是的，请使用片段。如果您认为永远不会，请不要使用片段。

最后，您可以创建自己的 backstack 和生命周期。但是，为什么要重新创建轮子？

编辑：为什么反对这个？单目的班人！每个活动或片段都应该能够实例化一个实例化视图的演示者。演示者和视图是可以互换的模块。为什么一个活动或片段应该有一个演示者的责任？

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-09-06T06:59:30.863

### 优点

您可以从单个活动控制您的片段，因为所有片段都是相互独立的。片段有自己的生命周期 ( `onPause`, `onCreate`, `onStart`...)。通过具有生命周期，片段可以独立响应事件，通过 保存它们的状态`onSaveInstanceState`，并被带回（例如，在来电后恢复或用户单击后退按钮时）。

### 缺点

1.  在您的活动代码中创建复杂性。
2.  您必须管理片段的顺序。

无论如何，这是一个不错的主意，就好像您需要创建一个应用程序，您想在其中显示多个视图。通过这个想法，您将能够在一个视图中查看多个片段。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-04T10:49:21.943

这取决于您的应用程序的设计布局。假设如果您在设计布局中使用 ActionBar 中的选项卡，那么在应用程序的单个活动中，可以在选项卡单击时更改片段。所以现在你有一个 Activity 并假设 ActionBar 中有三个 Tabs 和由 Fragments 提供的选项卡的视图，这使得管理变得容易，而且也是可行的。因此，这完全取决于您的应用程序的设计方案以及您如何决定为它构建。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T16:22:36.003

优点：

*   可用于通过 xml 布局创建可用于多种屏幕尺寸和方向的单一界面。

缺点：

*   在您的活动中需要更复杂的代码。

我认为这是一个好主意，因为如果您计划为手机和平板电脑发布应用程序，则根据当前屏幕大小和方向使用不同的 xml 布局可以使应用程序更可用，并减少发布应用程序的多个版本的需要。如果您的应用永远不会同时被平板电脑和手机使用，那么这可能不值得麻烦。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-13T15:09:36.957

我支持将所有视图膨胀推迟到片段以提供更好的灵活性。例如，平板电脑有一个单一的着陆活动，它聚合了多个片段，并在手机上重用相同的片段以每个片段显示一个屏幕。但是，在电话实现中，每个屏幕都有一个单独的活动。这些活动不会有太多代码，因为它们会立即推迟到对应的片段以进行视图膨胀。

我认为当引入选项卡或滑出菜单时，电话实现必须更改为单个登陆活动是一个坏主意，因为选项卡或菜单导航只会产生一个全新的屏幕。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-30T19:25:57.787

我不使用单一活动方法的最重要原因是可以利用活动生命周期。活动包含应用程序特定部分的上下文行为，片段补充了该行为。能够利用活动生命周期中可覆盖的步骤有助于使用 和 等方法将一个活动的行为与另一个活动`onPause`分开`onResume`。此生命周期还允许您返回到以前的上下文。使用单一活动方法，一旦你离开一个片段，你必须创建一个机制来返回它。

# plugins - 使用 CRM 开发工具包进行调试

> ID：12154507
> 
> 赞同：0
> 
> 时间：2012-08-28T07:16:57.007
> 
> 标签：plugins, dynamics-crm, dynamics-crm-2011, crm, visual-studio-debugging

我刚开始使用 CRM SDK 附带的**开发工具**包。我使用开发工具包创建了一个简单的插件，现在我找不到调试插件的方法。在我开始使用开发工具包之前，我能够调试我创建的插件。我将调试器附加到 w3wp.exe 进程，但调试器根本不会在断点处中断。此外，我的程序集已在**数据库**上注册，并且**Isolation**设置为**None** 任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:33:23.373

还有[另一种调试方法](http://community.dynamics.com/product/crm/crmnontechnical/b/c5insightblog/archive/2011/11/29/managing-web-resources-and-plug-ins-with-the-crm-developer-toolkit.aspx)（最后的说明），将 PDB 复制到 CRM /bin 并附加到异步（或沙盒）工作进程。我不确定哪种方式更容易...有时我将不得不尝试 Piyush 的方式，但由于工具包，我不再使用 RegistrationTool：

> [一旦您按照设置说明进行](http://erikpool.blogspot.com/2011/02/crm-2011-plug-in-tips-and-tricks-part-1.html)调试，就可以很好地进行调试，尽管复制 PDB 文件仍然是一个手动步骤。另请注意，沙盒进程 (Microsoft.Crm.Sandbox.WorkerProcess) 直到插件运行后才会启动，因此您必须至少调用一次（或另一个）才能进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:07:52.867

前段时间我写了一篇文章来调试 CRM 2011 中的插件，这可能会对您有所帮助。

[调试插件 - CRM 停车场](http://crm.ipiyush.me/debug-plugin-in-dynamics-crm-2011/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T07:28:29.713

我发现了问题所在。事实证明，在将 Assembly设置为**Isolation**设置为**None**之后，您必须**重新部署**插件。然后就像 Chris Snyder 所说，您仍然必须将**PDB 文件**从调试文件夹复制到 CRM 服务器上的**bin** / **assembly文件夹。**似乎该步骤仍然是手动的。将看看我是否可以找到一种自动执行此操作的方法，或者只是创建一个简单的批处理文件来执行此操作。谢谢大家的帮助。

# ios - 应用升级后找不到资源文件？

> ID：12154509
> 
> 赞同：0
> 
> 时间：2012-08-28T07:17:03.433
> 
> 标签：ios, nsfilemanager, foundation

我的应用捆绑了两个预装的视频，用户可以通过应用内购买购买更多。

每个视频片段都是一个带有名为`_videoFilePath`(property `NSString* videoFilePath`)的 ivar 的 Objective-C 对象

视频下载完成后，文件路径已正确设置。对于预装的剧集，它在启动时使用如下代码设置一次：

```
NSString* fileName = [NSString stringWithFormat:@"Chapter_%03d", _episodeNumber];
self.videoFilePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"m4v"]; 
```

（剧集元数据在第一次运行时从捆绑的 .plist 初始化，该 .plist 的副本保存在 /Documents 并在后续运行中使用。这是因为元数据是读/写的，但捆绑的资源是只读的)

我注意到有些用户在升级我的应用程序后可以播放预装的视频。我目前正在对此进行调查，因此我从设备中删除了该应用程序，安装了 1.0 版（从 Xcode->Run），将 1.1 版存档为 AdHoc 并将其安装在顶部。正如预期的那样，预装的剧集不会播放。

所以这次我从 Xcode 构建/运行 1.1 版，在 AdHoc 安装之上，启用了一些断点。

购买（下载）的剧集会保存到缓存中，因此有效文件路径的存在不足以保证播放（可能会被系统删除）。所以我`NSFileMananger`在尝试播放之前检查文件是否存在，代码如下：

```
if (_videoFilePath) {
        // Video File Path is Set...

        if ([[NSFileManager defaultManager] fileExistsAtPath:_videoFilePath]) {
            // ...and file exists in system; 
            // Can Play:

            return YES;                
        }
        else{
            // ...but file has been deleted, possibly as a result of a 
            // restore from iTunes backup; 
            // Can Not Play:

            return NO;
        }
    } 
```

断点显示`fileExistsAtPath:`测试失败；但是控制台显示的值为`_videoFilePath`：

```
/var/mobile/Applications/CEAA80EF-A85F-4C60-929D-9BA18E8D1702/[App Name]/Chapter_001.m4v 
```

那么，什么给了？

注意：删除应用程序并重新安装 1.1 版似乎可以解决问题。 **该错误仅在您在 1.0 之上升级到 1.1 时才会出现。**

**附录**

经过一秒钟的思考（写下来*确实有*帮助），我想我已经弄清楚了。资源的文件路径是在第一次运行 1.0 版时获得的，并与其余元数据一起保存在 /Documents 文件夹中。升级时，我假设应用程序路径的“随机数字、字母和连字符”部分更改为其他内容，因此 1.0 版的“硬编码”路径变成了损坏的 URL。必须 NSLog v1.0 和 v1.1 上的完整路径来确认这一点，但我想我明白了。仍然欢迎回答和评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:22:14.367

所以，经过一番思考，我意识到，捆绑资源的完整路径似乎在每次升级应用程序时都会略有变化；具体来说，“长的、自动生成的随机数字和字母字符串”中间目录。我的错误是在第一次安装时保存（即硬编码）路径，即使在应用程序升级后也使用该值。我通过不缓存路径而是使用来解决它

```
-pathForResource:ofType: 
```

每一次。

# java-me - LWUIT HtmlComponent 内存不足异常

> ID：12154511
> 
> 赞同：1
> 
> 时间：2012-08-28T07:17:09.620
> 
> 标签：java-me, lwuit

我想在我的代码中在 LWUIT 表单屏幕上显示来自 Rss 文件的图像和描述：

```
HTMLComponent com=new HTMLComponent();
com.setBodyText(detailNews.getDescription());
form2.addComponent(com); 
```

**代替*** *detailNews.getDescription()* *，在循环中形成 Rss URL 的字符串是

```
<p><img border="1" align="left" width="150" vspace="2" hspace="2" height="159" src="/tmdbuserfiles/Prithvi2_launch1(3).jpg" alt="Prithvi II, ballistic missile, DRDO, armed forces,Chandipur, Balasore district, Odisha State" />The Strategic Forces 
Command of the armed forces successfully flight-tested the surface-to-surface Prithvi II missile from Chandipur in Balasore </P> 
```

如果我执行，我将面临应用程序意外退出，因为它内存不足异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:59:38.570

如果您不需要显示图像，请`img`从 html 字符串中删除标记。

```
String description = detailNews.getDescription();
StringBuffer newDescription = new StringBuffer();
int imgIndex = description.indexOf("<img");

newDescription.append(description.substring(0, imgIndex));
imgIndex = description.indexOf(">", imgIndex + 1);
newDescription.append(description.substring(imgIndex + 1));
description = newDescription.toString();
com.setBodyText(description); 
```

# mysql - MySQL 事件调度

> ID：12154513
> 
> 赞同：2
> 
> 时间：2012-08-28T07:17:22.333
> 
> 标签：mysql

我有一个 MySQL 事件计划在每天午夜运行 - 但是数据库服务器每天晚上都关闭并且每天早上重新启动，但不一定在同一时间。例如，服务器在上午 10 点启动，我仍然需要在当天执行该事件，尽管它被安排在上午 12 点。我在 ORACLE 中测试了这个场景，它可以工作，但在 MySQL 中却不行。你有什么建议吗？

在此先感谢阿比拉什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:56:35.700

对此行为的直接支持已作为[错误 #46813](http://bugs.mysql.com/bug.php?id=46813)中的功能请求提交。它仍在“等待分类”：

> 事件调度程序应该能够定期检查并赶上错过的事件。虽然可以使用 Windows 上的 Task Scheduler 和 Mac 和 *nix 上的 anacron 来安排需要以这种方式运行的事件，但这并不优雅且依赖于平台。

正如错误报告所建议的，您可以使用 MySQL 外部的软件来安排此类事件。或者，可以使用 MySQL 的[`init-file`](http://dev.mysql.com/doc/en/server-options.html#option%5Fmysqld%5Finit-file)选项来指定包含应在启动时执行的命令的文件；使用它可以检查[`INFORMATION_SCHEMA.EVENTS`](http://dev.mysql.com/doc/en/events-table.html)表格：将`LAST_EXECUTED`列与事件时间表进行比较，`EVENT_DEFINITION`如果错过了预定的事件，则执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:18:48.447

您可以创建一个每小时触发一次的事件。创建附加表来存储有关事件触发的信息。

在事件中执行以下步骤：

*   检查事件是否被触发 - 阅读信息。从表
*   如果未触发事件，则执行代码，将信息（日期）写入表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:34:51.400

对不起，但 MySQL 不处理这个。如果错过了活动，那就错过了。它不会尝试稍后再次运行它。

您可以做的是制作一个记录事件上次运行时间（日期）的表格，然后将其安排为每小时，但在运行之前检查它是否已在当天运行。这样，它在午夜后第一次运行时就会激活。

# php - 一次性登录插件

> ID：12154514
> 
> 赞同：0
> 
> 时间：2012-08-28T07:17:23.200
> 
> 标签：php, joomla1.5

我正在使用 Joomla 为我的公司做一个 Intranet 站点。我需要一个用于一次性登录的插件或组件（它不是单点登录概念）。

用户只需要提供机器或PC的用户名和密码，就不会要求用户再次登录Joomla站点；相反，它应该将用户带到站点。

我的目标是用户无需再次为 Joomla 站点提供用户名和密码。这可能吗？Joomla 中有这样的插件或组件吗？

# mongodb - 查询嵌入文档

> ID：12154516
> 
> 赞同：0
> 
> 时间：2012-08-28T07:17:25.917
> 
> 标签：mongodb, mongoose

我将创建一个这样的模式：

```
[
    {
        username: "fabio",
        password: "xxx",
        roles: [
            {
                rolename: "administrator",
                isVip: true
            },
            {
                rolename: "manager",
                isVip: true
            }
        ]
    },
    {
        username: "marco",
        password: "yyy",
        roles: [
            {
                rolename: "manager",
                isVip: true
            }
        ]
    },
    {
        username: "pippo",
        password: "...",
        roles: [
            {
                rolename: "monkey",
                isVip: false
            }
        ]
    }
] 
```

现在我想列出我的应用程序中可用的所有角色，从用户集合开始。

我想到了一条`SELECT DISTINCT rolename FROM ...`SQL 语句。

**我想得到类似的结果`{"administrator","manager","monkey"}`**。

1.  是否可以？
2.  **我可以执行什么查询？**我坚持：

    db.users.find({ "roles.rolename": { $exists : true }});

    但这会找到所有用户，而不是所有角色。

3.  好吗？还是创建另一个集合“角色”并保留一组 ObjectId 更好？

4.  我正在使用 Mongoose（用于 nodejs 的 mongodb），所以我的查询必须为此做好准备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:54:24.413

您可以使用[distinct()](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)命令查找唯一值：

```
> db.users.distinct('roles.rolename')
[ "administrator", "manager", "monkey" ] 
```

# css - css背景图片nto在div中显示

> ID：12154517
> 
> 赞同：0
> 
> 时间：2012-08-28T07:17:26.920
> 
> 标签：css, background-image

我试图让我的背景图像显示在标题 div 中，但它没有显示。有人可以告诉我在哪里做错了吗？

CSS代码：

```
#header{
width:900px;
/*background-color:#009999;*/
background-image:url('../images/background_img.jpg');
float:left;
text-align:center;
} 
```

html代码

```
<body>
<div class="contentwrapper">
<div id="header">
hello

<!--<div id="logo">
    <img src="images/small_gama_logo.png" />
</div>
<div id="company_name">
    <h1>Gama Corporate Services Sdn Bhd</h1>
</div>-->
</div>
<div id="navbar">
    <ul>
        <li>Home</li>
        <li>About</li>
        <li>Contact</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:20:19.360

尝试为您的 DIV 设置一个高度。它不会根据您的背景图像自动调整大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:49:14.050

将高度添加到您的 div。

如果删除它，它实际上仍会显示，因此您必须真正检查 img 的路径以及名称。确保一切正确，并且 img 存在于您想要的目录中。

```
#header{
width:900px;
/*background-color:#009999;*/
background-image:url('http://placehold.it/200x200');
float:left;
text-align:center;
height: 200px;
}​ 
```

我复制/粘贴了您的代码并仅添加了高度，更改了 img 位置，因此您的代码很好。应该是img的问题。

[http://jsfiddle.net/Kyle_Sevenoaks/qtenp/](http://jsfiddle.net/Kyle_Sevenoaks/qtenp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:20:29.127

也为#header 设置高度属性

```
#header{
 width:900px;
 height: 400px;
 /*background-color:#009999;*/
 background-image:url('../images/background_img.jpg');
 float:left;
 text-align:center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:27:03.820

嗨，现在使用**高度**

```
#header{
height:100px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T07:44:54.197

很可能背景图像的 URL 不正确（请注意，它是相对于 CSS 文件的 URL）。也`background-image`可以被更具体的 CSS 规则覆盖。

[此外，在http://jsfiddle.net](http://jsfiddle.net)上查看实时示例会非常有帮助

# c++ - 不能用c开发windows phone 7.5应用吗？

> ID：12154518
> 
> 赞同：2
> 
> 时间：2012-08-28T07:17:27.510
> 
> 标签：c++, windows-phone-7, windows-phone

我的问题是我们可以在代码中使用 c++ 来开发 Windows Phone 7.5 及更高版本的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:23:02.633

对不起，但我不认为这是可能的。看看这些链接，也许它们可以帮助你：

[http://msdn.microsoft.com/library/windowsphone/develop/ff402526(v=vs.92).aspx](http://msdn.microsoft.com/library/windowsphone/develop/ff402526(v=vs.92).aspx)

[http://www.c-sharpcorner.com/uploadfile/iersoy/the-ersoy-experiment-in-windows-phone-7-development-using-xna/](http://www.c-sharpcorner.com/uploadfile/iersoy/the-ersoy-experiment-in-windows-phone-7-development-using-xna/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:31:26.547

它在 Windows Phone 8 上是可能的，但在低于此的任何东西上都是不可能的。

# selenium - Selenium waitForCondition 没有按预期工作

> ID：12154521
> 
> 赞同：1
> 
> 时间：2012-08-28T07:17:52.247
> 
> 标签：selenium

我的代码是这样的，在触发 ajax 请求之前，表行的不透明度为 0.5，一旦 ajax 请求完成，不透明度为 1

我在 waitForCondition 方法中使用表行的不透明度来检查 ajax 请求是否已完成加载。代码不工作，每次都超时。我在 waitForCondition 之前和之后检查了 opacity 的值，返回的值是正确的，但它仍然超时。

我使用的代码是这样的

```
<tr>
  <td>echo</td>
  <td>javascript{selenium.browserbot.getCurrentWindow().document.getElementsByTagName('tbody')[0].getElementsByTagName('tr')[0].style.opacity}</td>
  <td></td>
</tr>
<tr>
  <td>waitForCondition</td>
  <td>javascript{selenium.browserbot.getCurrentWindow().document.getElementsByTagName('tbody')[0].getElementsByTagName('tr')[0].style.opacity == 1}</td>
  <td>30000</td>
</tr>
<tr>
  <td>echo</td>
  <td>javascript{selenium.browserbot.getCurrentWindow().document.getElementsByTagName('tbody')[0].getElementsByTagName('tr')[0].style.opacity}</td>
  <td></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:12:56.457

我已经为我的问题找到了解决方案。

我不需要在 waitForCondition 中使用 javascript{} 构造，因为这个方法隐含地认为我们正在给这个方法一个 javascript。

所以，正确的表达方式是：

```
<tr>
  <td>waitForCondition</td>
  <td>selenium.browserbot.getCurrentWindow().document.getElementsByTagName('tbody')[0].getElementsByTagName('tr')[0].style.opacity == 1</td>
  <td>30000</td>
</tr> 
```

# c# - 如何在 Orchard CMS 中将 IOrchardServices 注入到 Handler

> ID：12154524
> 
> 赞同：1
> 
> 时间：2012-08-28T07:18:00.773
> 
> 标签：c#, .net, asp.net-mvc-3, orchardcms

我想注入`IOrchardServices`，`Handler`因为我需要处理程序中的一些服务，所以在我的处理程序中我写了这个：

```
public class EstatePartHandler : ContentHandler
{
    private readonly IOrchardServices Services;
    public EstatePartHandler(IOrchardServices services)
    {
        Services = services;
    }
...
} 
```

但是`Orchard`在构造处理程序时抛出异常：

```
Cannot choose between multiple constructors with equal length 1 on type 'Estate.Handlers.EstatePartHandler'. Select the constructor explicitly, with the UsingConstructor() configuration method, when the component is registered. 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:29:47.727

我无法确定，因为您尚未发布所有代码，但听起来您的处理程序上有两个构造函数 - 一个采用 IOrchardServices，另一个采用不同的依赖项。将您的构造函数合并到一个方法中，采用两个依赖项：

```
public class EstatePartHandler : ContentHandler
{
    private readonly IOrchardServices Services;
    public EstatePartHandler(IOrchardServices services, IAnotherDependency another)
    {
        Services = services;
        Another = another;
    }
...
} 
```

如果不是这种情况，请发布您的处理程序的完整代码。

# android - 将Android客户端连接到python服务器时响应代码404

> ID：12154528
> 
> 赞同：1
> 
> 时间：2012-08-28T07:18:28.957
> 
> 标签：android, python, apache, http, httpurlconnection

我的应用程序使用标准 httpUrlConnection 代码连接到 apache http 服务器上的 python 代码。授予网络访问和互联网的所有权限。以前我无法运行此代码，因为我没有使用 Asych（用于网络访问的不同线程），因为我正在使用 Android 3.0 - 最新版本。现在我完成了这部分。

不，当我调用下面的代码时，响应代码是 200，这很好：

```
#!/Python27/python
print "Content-type: text/html"
print
print "<html><head>"
print ""
print "</head><body>"
print "Hello."
print "</body></html>" 
```

但是当我使用这段代码时：

```
# Echo server program
import socket

HOST = '127.0.0.1'     
PORT = 80              
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST, PORT))
s.listen(1)
conn, addr = s.accept()
print 'Connected by', addr
while 1:
    data = conn.recv(1024)
    if not data: break
    conn.sendall(data)
conn.close() 
```

它给出了 404 响应代码，说 Exception FileNotFoundException。

此外，是的，上面的代码是针对服务器的，这是来自 python 套接字库的示例代码（所以所有的评论都不是我的）。我正在编写一个类似的服务器，它可以提供数据库连接和发布/获取功能。那么，只需要确定上面的服务器代码有什么问题吗？

任何提示都非常受欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:12:22.933

上面的回显服务器代码无法连接，因为这不是一个 http 服务器，因此没有编写响应代码，也没有实现 http 服务器所需的其他信息。

它上面的代码工作，因为它是从 Apache 运行的，所以很明显，工作.. 感谢您的评论...

# usb - 有没有办法通过佳能 EDSK 检测 PC 闪光信号或快门打开的确切时间？

> ID：12154529
> 
> 赞同：0
> 
> 时间：2012-08-28T07:18:32.063
> 
> 标签：usb, edsdk, canon-sdk

我目前有一个通过灯泡模式驱动相机的设备。它的一根电缆连接到灯泡连接器，另一根连接到 PC 闪光灯连接器。PC 闪光信号仅在快门打开时触发。在触发快门和实际打开快门之间有长达 100 毫秒的可变延迟。所以如果我想曝光 50 毫秒，我触发灯泡，等待 PC 闪光信号，然后等待 50 毫秒，然后停止触发灯泡。我现在有一个使用 EDSDK 的 USB 版本的设备，唯一的问题是我找不到任何与 PC 闪存信号等效的 EDSDK 事件。是否有任何 EDSDK 事件表明快门打开的确切时刻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:55:34.263

不。最接近的是在收集后查看图像时间。即使有，由于事件通过 USB 返回主机，然后进入应用程序的延迟，它也远非精确。为了保持该级别的准确性，您必须通过其可用的硬件接口（PC 闪光信号和远程触发器）来控制相机。尝试进行快速曝光和使用 PC 端口也可能存在问题，因为这些通常是通过慢速曝光完成的。例如，一本佳能相机手册说 PC 端口只能在 1/250 秒或更慢的速度下工作。

# c++ - 两次调用 shmat

> ID：12154533
> 
> 赞同：2
> 
> 时间：2012-08-28T07:18:50.750
> 
> 标签：c++, linux, multithreading, thread-safety, shared-memory

我的程序有 2 个线程，我使用共享内存在两者之间进行通信。

每个线程都有一个“init”方法。在 init 方法中，我调用 'shmget' 和 'shmat' 来获取共享内存段并附加到局部变量。部分代码如下：

```
Thread 1 (which runs first):

void init() {
  this->segment_id = shmget(SAME_KEY,SAME_SIZE,IPC_CREAT|S_IRUSR|S_IWUSR|S_IROTH|S_IWOTH);
  this->data       = shmat(this->segment_id,0,0);
}

Thread 2 (which runs after thread 1):

void init() {
  this->segment_id = shmget(SAME_KEY,SAME_SIZE,0);
  this->data       = shmat(this->segment_id,0,0);
} 
```

该程序正在运行，但它给出了意想不到的结果。我担心的是，在第二个线程中调用“shmat”可能会使线程 1 中的“数据”无法访问或出现某种故障。事实是，在线程 1 中我可以访问整个共享段，但在线程 2 中我只能访问前 16 个字节，所以我不知道发生了什么。

**这是否意味着每个共享内存段一次可以附加到 1 个位置？可以两次调用“shmat”以使共享内存可以从不同的指针访问吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:02:53.647

**每个共享内存段可以一次附加到多个位置。可以调用 'shmat' 两次以使共享内存可以从不同的指针访问。**

我怀疑在给定的示例中，您不能确定 Thread1::init() 在 Thread2::init() 之前被调用，因此在 Thread2 中您访问的是未创建的内存 - 这就是观察到问题的原因。

对两个调用都使用 IPC_CREAT（当然没有 IPC_EXCL）。

参见[手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/shmget.2.html)

# magento - Magento - Paypal 争议自动创建贷记凭证

> ID：12154535
> 
> 赞同：2
> 
> 时间：2012-08-28T07:19:12.350
> 
> 标签：magento, paypal

首先，我使用的是 Magento 1.7。

问题是，如果有人打开 PayPal 争议，还会在 Magento 中创建贷项通知单电子邮件，并向客户发送一封电子邮件，告诉他们已经退款，而他们还没有退款。相反，PayPal 只是暂停资金，直到争议解决。

当我们解决争议时，贷项通知单仍然存在，我们无法删除或取消它。

有谁知道如何防止这种情况发生？

谢谢。

马立克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:18:49.660

我发现这是从 v1.4.0.1 升级到 v1.7.0.2 后遇到的新版 Magento 中的一个烦人的错误。我认为它是在 v1.4.2.0 左右出现的。有很多方法可能会出错，我不知道为什么他们认为添加它是个好主意。

支持此操作的代码位于 /app/code/core/Mage/Sales/Model/Order/Payment.php 中 Mage_Sales_Model_Order_Payment 类的 registerRefundNotification() 方法中。

[根据http://www.magentocommerce.com/boards/viewthread/261158/](http://www.magentocommerce.com/boards/viewthread/261158/)上的 timpea 修复，您只需要重载 registerRefundNotification() 并注释掉有问题的部分，在 v1.7.0.2 中将是下面的部分。

```
$serviceModel = Mage::getModel('sales/service_order', $order);
if ($invoice) {
    if ($invoice->getBaseTotalRefunded() > 0) {
        $adjustment = array('adjustment_positive' => $amount);
    } else {
        $adjustment = array('adjustment_negative' => $baseGrandTotal - $amount);
    }
    $creditmemo = $serviceModel->prepareInvoiceCreditmemo($invoice, $adjustment);
    if ($creditmemo) {
        $totalRefunded = $invoice->getBaseTotalRefunded() + $creditmemo->getBaseGrandTotal();
        $this->setShouldCloseParentTransaction($invoice->getBaseGrandTotal() <= $totalRefunded);
    }
} else {
    if ($order->getBaseTotalRefunded() > 0) {
        $adjustment = array('adjustment_positive' => $amount);
    } else {
        $adjustment = array('adjustment_negative' => $baseGrandTotal - $amount);
    }
    $creditmemo = $serviceModel->prepareCreditmemo($adjustment);
    if ($creditmemo) {
        $totalRefunded = $order->getBaseTotalRefunded() + $creditmemo->getBaseGrandTotal();
        $this->setShouldCloseParentTransaction($order->getBaseGrandTotal() <= $totalRefunded);
    }
}

$creditmemo->setPaymentRefundDisallowed(true)
    ->setAutomaticallyCreated(true)
    ->register()
    ->addComment(Mage::helper('sales')->__('Credit memo has been created automatically'))
    ->save();

$this->_updateTotals(array(
    'amount_refunded' => $creditmemo->getGrandTotal(),
    'base_amount_refunded_online' => $amount
));

$this->setCreatedCreditmemo($creditmemo); 
```

# asp.net - Web 应用程序中的错误 -

> ID：12154536
> 
> 赞同：0
> 
> 时间：2012-08-28T07:19:12.470
> 
> 标签：asp.net, .net, coding-style

当我尝试在我的 Web 应用程序上运行报告时，我收到此错误：

“/Revenue”应用程序中的服务器错误。

输入字符串的格式不正确。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.FormatException：输入字符串的格式不正确。

源错误：

```
Line 219:        var ans = from a in analytics.Rows.Cast<DataRow>()
Line 220:                  group a by a["LineTitle"] into g
Line 221:                  select new                  
Line 222:                  {
Line 223:                      Name = g.Key.ToString(),

[FormatException: Input string was not in a correct format.]
   System.Number.ParseDouble(String value, NumberStyles options, NumberFormatInfo numfmt) +10691639
   System.Double.Parse(String s) +23
   Main_Report.<CountryAnalytics>b__2e(IGrouping`2 g) in d:\vistaweb\Revenue\MainReport.aspx.cs:221
   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +145
   System.Linq.Enumerable.Count(IEnumerable`1 source) +4125469
   ASP.mainreport_aspx.__DataBind__control28(Object sender, EventArgs e) in d:\vistaweb\Revenue\MainReport.aspx:303
   System.Web.UI.Control.OnDataBinding(EventArgs e) +92
   System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding) +85
   System.Web.UI.Control.DataBind() +15
   System.Web.UI.Control.DataBindChildren() +187
   System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding) +94
   System.Web.UI.Control.DataBind() +15
   System.Web.UI.WebControls.DataList.CreateItem(Int32 itemIndex, ListItemType itemType, Boolean dataBind, Object dataItem) +136
   System.Web.UI.WebControls.DataList.CreateControlHierarchy(Boolean useDataSource) +484
   System.Web.UI.WebControls.BaseDataList.OnDataBinding(EventArgs e) +63
   System.Web.UI.WebControls.BaseDataList.DataBind() +54
   Main_Report.Page_LoadComplete(Object sender, EventArgs e) in d:\vistaweb\Revenue\MainReport.aspx.cs:118
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +51
   System.Web.UI.Page.OnLoadComplete(EventArgs e) +9631466
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +765 
```

文件中的代码如下所示：

```
 var ans = from a in analytics.Rows.Cast<DataRow>()
              group a by a["LineTitle"] into g
              select new                  
              {
                  Name = g.Key.ToString(),
                  SalesPersonStats = g.Key.ToString().Contains(SP.FullName),
                  Value = g.FirstOrDefault()["LinaValue"].ToString(),
                  Percentage = g.FirstOrDefault()["LinePercent"].ToString(),
                  Change = Math.Round(double.Parse(g.FirstOrDefault()["LinaValue"].ToString()) - double.Parse(g.LastOrDefault()["LinaValue"].ToString()), 2)
              }; 
```

知道为什么它说输入字符串的格式不正确 'select new' 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:30:27.687

可能，在此语句中从 double.Parse 引发异常：

```
Change = Math.Round(double.Parse(g.FirstOrDefault()["LinaValue"].ToString()) - double.Parse(g.LastOrDefault()["LinaValue"].ToString()), 2) 
```

将 .ToList() 添加到 LINQ 语句的末尾，以便在绑定报告之前评估查询（并引发异常）。在那里你有机会调试格式。

# apache - 如何使用代理运行 Apache ACE 开发服务器

> ID：12154540
> 
> 赞同：1
> 
> 时间：2012-08-28T07:19:28.423
> 
> 标签：apache, proxy, proxy-authentication, apache-ace

我正在尝试在需要代理身份验证的公司网络上运行的机器上启动 Apache Ace 开发服务器，但服务器没有启动并且它给出了连接超时错误。

按照链接[http://markmail.org/thread/tgoovlkp4gnc3lw4](http://markmail.org/thread/tgoovlkp4gnc3lw4)中的说明，我修改了 run.bat 以包含代理服务器和端口。但是请求没有到达代理服务器，并且再次出现连接超时错误。如何使用代理启动 Apache Ace Devserver？

# android - 以编程方式调整按钮大小

> ID：12154544
> 
> 赞同：2
> 
> 时间：2012-08-28T07:19:47.473
> 
> 标签：android, android-button

我通过以下方式以编程方式创建了按钮：

```
 Button button = new Button(this);
    button.setText("Previous");
    setContentView(button); 
```

我得到按钮，但全屏被占用。如何调整它的大小并根据我的需要放置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:36:06.413

在您的 OnCreate 方法中：

```
LinearLayout layout=new LinearLayout(this);

                Button button = new Button(this);
                button.setText("Previous");
                button.setLayoutParams(new LayoutParams(
                        LayoutParams.WRAP_CONTENT,
                            LayoutParams.WRAP_CONTENT));
                layout.setOrientation(LinearLayout.VERTICAL);
                layout.addView(button);
                setContentView(layout); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:24:25.163

全屏占用，因为你`setContentView`的`button`。

如果你想做的是`View`在**android**中调整大小。使用`LayoutParams`. 例如 ：

```
button.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
```

这样做将调整按钮的大小以适合文本`"Previous"`。

好的，你可以试试这个[教程。](http://mobile.tutsplus.com/tutorials/android/android-layout/)

# java - Java 版本验证

> ID：12154545
> 
> 赞同：1
> 
> 时间：2012-08-28T07:20:11.093
> 
> 标签：java

我需要验证 java 版本。我用

```
String version = System.getProperty("java.version"); 
```

例如，如何简单地解析它以了解已安装的 JRE。`1.6.0_18`版本 ？我想知道java版本的命名约定是标准的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:24:04.213

是的，有命名约定。你可以从[这里](http://java.sun.com/j2se/versioning_naming.html)找到它。更多关于版本 6 的最新信息可以从[这里](http://www.oracle.com/technetwork/java/javase/version-6-141920.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:28:18.657

是的，据我所知，这是 java 版本的命名约定，所以只需`System.getProperty("java.version")`像你已经在做的那样使用，如果安装了最低要求的 jre，则使用 stringTokenizer 检查字符串。

编辑：我一开始就写了 Stringbuilder，当然我的意思是 stringtokenizer。

使用 Stringtokenizer，您可以获得由定义的符号分隔的字符串的子字符串，并在某种程度上遍历字符串。您可能需要第二个字符串标记器，第一个用“。”分隔字符串。而不是最后一个由“_”分隔的子字符串。[在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)抽一口。

你可以这样做：（当然你也可以通过一个循环来做，检查 hasMoreTokens() 等等，但在这种情况下你不需要，因为你确切地知道字符串的样子）

```
String[] versionArray = new String[4];
String version = System.getProperty("java.version"); 
StringTokenizer st1 = new StringTokenizer(version,".");
versionArray[1] = st1.nextToken();
versionArray[2] = st1.nextToken();
StringTokenizer st2 = new StringTokenizer(st1.nextToken(),"_");
versionArray[3] = st2.nextToken();
versionArray[4] = st2.nextToken(); 
```

在 versionArray 之后将与您的示例 ["1"]["6"]["0"]["18"] 进行比较，您可以对此进行比较...

# java - 如何在不编译项目的情况下混淆代码？

> ID：12154553
> 
> 赞同：1
> 
> 时间：2012-08-28T07:20:33.243
> 
> 标签：java, android, eclipse, intellij-idea, obfuscation

有没有办法直接在编辑器中混淆代码？

此时，如果我想看到我的项目的混淆代码，我必须编译项目，做逆向工程，然后通过`jd-gui`.

可以通过一些附加组件来实现所有这些，这样我就可以编译混淆代码，即让它像混淆之前一样工作。

**笔记**

澄清一下，我不需要**在导出**时混淆代码，因为此功能已经存在。我需要在不编译或至少不必将其导出到 apk 的情况下**对实时代码进行混淆。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:29:52.127

如果您使用的是 Eclipse，您可能需要安装[JadClipse](http://sourceforge.net/projects/jadclipse/)以简化您的工作流程。它将直接以反编译的文本格式打开工作区中的任何二进制类文件。

当然，该类文件是否是混淆的二进制文件，取决于您剩余的工具链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:43:45.080

我不知道任何预编译混淆器，但是我认为您想要的可以通过以下步骤实现：

1.  创建函数名称到一些乱码文本名称的一对一映射文件。同样对变量有相同的映射。定义一些无用的循环/代码块，它们在编译时被 JVM 忽略，并且可以在方法的开始或结束时执行（无论如何这将被编译器剥离）。
2.  现在，由于您在标签中提到了 Intellij Idea，您可以在 ide 中使用宏功能并创建一个宏来替换所有变量名和函数名（或用无用的代码块开头的括号）。
3.  以任何名称保存宏，当您想要查看您的代码被混淆时，只需执行宏进行混淆。
4.  也有一个类似的宏用于不混淆，以便您可以随时恢复。同时，我没有在 intellij idea 插件中工作太多，但是您可以创建与宏功能相同的插件，非常舒适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:29:18.477

在您的 android-sdk 目录中，检查 tools/proguard/bin 目录：这包括一些 proguard 可执行文件（proguard 是用于混淆的工具）。我从未使用过它们，但我相信其中一个可执行文件可以帮助您解决问题（甚至还有一个带有 gui 界面的可执行文件！）。

# linux - jackrabbit 错误：无法创建文件夹

> ID：12154556
> 
> 赞同：0
> 
> 时间：2012-08-28T07:20:51.467
> 
> 标签：linux, filesystems, aix, jackrabbit, jcr

我在 IBM AIX 上使用 Jackrabbit 1.6 版。它类似于Linux操作系统。Jackrabbit 用于存储我的应用程序用户上传的文件。`"can't create a folder"`当 JCR 在存储库中指定的目录（在配置文件中）中存储了超过 32767 个文件/文件夹时，我收到错误消息。

最新版本的 Jackrabbit 是否已解决此问题。我知道这是操作系统的限制，但是通过调整 Jackrabbit 的文件存储机制，这个问题可以解决

或者

有没有一种方法可以在 JCR 配置中指定，一旦达到 32767 限制，它应该将文件存储在其他目录中。

或者

有没有一种方法可以按月/按周保存文件，因为我确信在一个月内我将拥有少于 32767 个文件。

任何帮助/评论表示赞赏。

谢谢，

塔里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:08:32.550

我建议不要使用 XMLPersistenceManager，因为[如果 JVM 进程被杀死，存储库可能会变得不一致](http://wiki.apache.org/jackrabbit/PersistenceManagerFAQ#XMLPersistenceManager)。另一种方法是使用[Bundle Database PM](http://wiki.apache.org/jackrabbit/PersistenceManagerFAQ#Bundle_Database_PM)。

要帮助迁移到更新版本的 Jackrabbit，请参阅[备份和迁移](http://wiki.apache.org/jackrabbit/BackupAndMigration)页面。

# jenkins - 如何配置 Jenkins 以使用 gpg 发送加密电子邮件？

> ID：12154558
> 
> 赞同：1
> 
> 时间：2012-08-28T07:20:53.447
> 
> 标签：jenkins, public-key-encryption, gnupg, jenkins-plugins

我正在寻找有关如何配置 jenkins 电子邮件插件 (ext-mail) 以加密通知的说明？google 大叔并没有帮我太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:00:10.997

此类功能不是开箱即用的，您需要自定义[ExtendedEmailPublisher](https://github.com/jenkinsci/email-ext-plugin/blob/master/src/main/java/hudson/plugins/emailext/ExtendedEmailPublisher.java)以满足您的需求。

```
 MimeMessage msg = createMail(mailType, build, listener);
        Address[] allRecipients = msg.getAllRecipients();
        if (allRecipients != null) {
            StringBuilder buf = new StringBuilder("Sending email to:");
            for (Address a : allRecipients) {
                buf.append(' ').append(a);
            }
            listener.getLogger().println(buf);
            Transport.send(msg);
            if (build.getAction(MailMessageIdAction.class) == null) {
                build.addAction(new MailMessageIdAction(msg.getMessageID()));
            }
            return true;
        } 
```

您可以获取收件人和电子邮件以进行签名/加密，最后调用 Transport.send(msg)。

# iphone - XML 解析器委托函数说明

> ID：12154562
> 
> 赞同：1
> 
> 时间：2012-08-28T07:21:14.930
> 
> 标签：iphone, objective-c, nsxmlparser

我想知道每个参数为以下委托方法持有什么值。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:28:17.807

浏览苹果文档。它简要介绍了所有这些内容。[从链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSXMLParserDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSXMLParserDelegate)中引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:30:19.247

didStartElement:namespaceURI:qualifiedName:attributes:

当解析器对象遇到给定元素的开始标记时，由解析器对象发送给它的委托。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict 
```

参数

解析器

```
A parser object. 
```

元素名称

```
A string that is the name of an element (in its start tag). 
```

命名空间URI

```
If namespace processing is turned on, contains the URI for the current namespace as a string object. 
```

限定名

```
If namespace processing is turned on, contains the qualified name for the current namespace as a string object.. 
```

属性字典

```
A dictionary that contains any attributes associated with the element. Keys are the names of attributes, and values are attribute values. 
```

有关更多信息，请点击以下链接：http: [//developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)

# sql-server - Int32 的正则表达式

> ID：12154565
> 
> 赞同：2
> 
> 时间：2012-08-28T07:21:28.313
> 
> 标签：sql-server, regex

我正在尝试为 Int32 数字编写正则表达式。我想过编写一个匹配 -2,147,483,648 和 2,147,483,647 之间的任何数字的正则表达式，但我不知道如何编写一个从负值到正值的表达式..

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:28:15.973

**要在您指定的范围内**获得负值和正值，您可以执行以下操作：

编辑：数字可以从 0 开始（更正），数字范围从 -2147483648 到 2147483647 而不是 -2147483647 到 2147483648（更正）

```
^(
-?\d{1,9}|
-?1\d{9}|
-?20\d{8}|
-?21[0-3]\d{7}|
-?214[0-6]\d{6}|
-?2147[0-3]\d{5}|
-?21474[0-7]\d{4}|
-?214748[012]\d{4}|
-?2147483[0-5]\d{3}|
-?21474836[0-3]\d{2}|
214748364[0-7]|
-214748364[0-8]
)$ 
```

逐行评论：

```
^(                  //start of line, or it will match part of the number and not the whole one
-?\d{1,9}|          //get any number with 9 digits
-?1\d{9}|           //get any number with 10 digits starting with 1
-?20\d{8}|          //get any number with 10 digits starting with 20
-?21[0-3]\d{7}|     //get any number with 10 digits starting with 21
                    //         (and the third digit in the range 0-3)
-?214[0-6]\d{6}|    //I think from now on it is understood
-?2147[0-3]\d{5}|
-?21474[0-7]\d{4}|
-?214748[012]\d{4}|
-?2147483[0-5]\d{3}|
-?21474836[0-3]\d{2}|
214748364[0-7]|     //max corner case
-214748364[0-8]     //min corner case
)$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T07:27:23.413

为什么不直接使用`Int32.Parse(value)`，您可以捕获`OverflowException`是否`value`表示小于 MinValue 或大于 MaxValue 的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T23:54:22.060

这真的是一个丑陋的正则表达式：

## 带千位分隔符（逗号）：1,234,567

**[在行动](http://regexr.com?3202g)**：

```
^
  (
   -?
    (
     1(,\d\d\d){0,3}
    |2(,\d\d\d){0,2}
    |2,(0\d\d,\d\d\d,\d\d\d
       |1[0-3]\d,\d\d\d,\d\d\d
       |14[0-6],\d\d\d,\d\d\d
       |147,[0-3]\d\d,\d\d\d
       |147,4[0-7]\d,\d\d\d
       |147,48[0-2],\d\d\d
       |147,483,[0-5]\d\d
       |147,483,6[0-3]\d
       |147,483,64[0-7])
    |[1-9]\d{0,2}(,\d\d\d){0,2}
    )
  |0
  |-2,147,483,648
)$ 
```

## 没有千位分隔符：1234567

**[在行动](http://regexr.com?320jf)**：

```
^
  (
   -?
    (
     1\d{0,9}
    |2(0\d{8}
      |1[0-3]\d{7}
      |14[0-6]\d{6}
      |147[0-3]\d{5}
      |1474[0-7]\d{4}
      |14748[0-2]\d{3}
      |147483[0-5]\d{2}
      |1474836[0-3]\d
      |14748364[0-7])
    |[1-9]\d{0,8}
    )
  |0
  |-2147483648
)$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:28:58.663

您可以使用`asp:CompareValidator`

```
<asp:TextBox ID="txtNumber" runat="server" /> 
<asp:CompareValidator ID="validator" runat="server" ControlToValidate="txtNumber" Operator="DataTypeCheck" Type="Double" ErrorMessage="Please enter only numeric values" / 
```

# mysql - Mysql和Vb6.0项目

> ID：12154566
> 
> 赞同：0
> 
> 时间：2012-08-28T07:21:28.877
> 
> 标签：mysql, vb6

```
Private Sub cmdAdd_Click()

Dim rs As ADODB.Recordset

Dim strsql As String

strsql = "insert into Issue_Tab(Startno, End no, Issuedate, Brncode) Values( ' " & txtstartno.Text & " ' , ' " & 
txtendo.Text & " ' , ' " & txtdate.Text & " ' , where Brncode = ' " & txtbrncode.Text & " '  ) "

Set rs = pcnl.Execute(strsql)

Set rs = Nothing

MsgBox " Saved"

Me.filllistview

End Sub

Sub filllistview()

strsql = "select * from Issue_Tab"

Set rs = pcnl.Execute(strsql)

ListView1.ListItems.Clear

Do While Not rs.EOF

Set Item = ListView1.ListItems.Add(, , rs!Startno)

Item.SubItems(1) = rs!Endno & ""

Item.SubItems(2) = rs!Issuedate & ""

Item.SubItems(3) = rs!Brncode & ""

rs.MoveNext

Loop

Set rs = Nothing

End Sub

Private Sub Command1_Click()

Dim strsql As String

Dim rs As ADODB.Recordset

strsql = " Delete from Issue_tab where Brncode = ' " & txtbrncode.Text & " ' "

Set rs = pcnl.Execute(strsql)

Set rs = Nothing

MsgBox "Delete"

Me.filllistview

End Sub

Private Sub Form_Load()

Me.filllistview

End Sub

Private Sub ListView1_ItemClick(ByVal Item As MSComctlLib.ListItem)

With Item

txtstartno.Text = Item

txtendno.Text = .SubItems(1)

txtdate.Text = .SubItems(2)

txtbrncode.Text = .SubItems(3)

End With

End Sub

Private Sub txtupdate_Click()

Dim strsql As String

Dim rs As ADODB.Recordset

strsql = " update Issue_Tab set startno = ' " & txtstartno.Text & " ' , Endno = ' " & txtendno.Text & " ' , Issuedate = ' " & txtdate.Text & " '  where Brncode = ' " & txtbrncode.Text & " ' "

Set rs = pcnl.Execute(strsql)

Set rs = Nothing

MsgBox " Updated"

Me.filllistview

End Sub 
```

“”“”我在我的项目中进行了此编码，并且我也确实在其中添加了模块....但是编码的问题是它既没有显示任何错误，也没有工作，也没有显示我的数据库中的更改sql.....所以请尽快帮助我，因为我必须在公司提交项目.......

提前感谢..帮助我进入这个..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:13:56.477

我有几个问题可以最好地揭示您的问题：

1.  首先，您应该检查 mysql 日志，它们是否已启用？
2.  mysql甚至在运行吗？
3.  你的mysql是怎么安装的？是香草吗？
4.  您是否为 ODBC 安装了 MySQL 插件？
5.  您的控制台/动态日志是否在 vb6 上启用？尝试一些回声以查看发生了什么。

# java - struts2：在主/调用jsp中显示结果jsp

> ID：12154567
> 
> 赞同：0
> 
> 时间：2012-08-28T07:21:29.787
> 
> 标签：java, javascript, ajax, struts2

我有一个`main jsp`（文件上传 jsp 屏幕），其中包含表单元素。用户将选择要上传的文件，并根据需要设置一些其他元素（如复选框、收音机等），然后最终提交表单。

上传后处理的结果被制定成不同 JSP 的表（比如`result.jsp`）。现在 result.jsp 独立显示在屏幕上。

我想要的是**在同一个 parent.jsp**（具有表单元素）中而不是在单独的独立页面上显示 result.jsp。

谁能帮我这个？

struts.xml：

```
<action name="commonDataImportAction_*" class="commonDataImportAction">
        <result name="VIEW">
            /jsp/CommonDataImportLog.jsp (result.jsp)
        </result>
        <result name="input">/jsp/CommonDataImport.jsp (parent.jsp)
        </result>
</action> 
```

更新：

屏幕截图，我想要的样子：

[http://img802.imageshack.us/img802/7141/screenzgk.jpg](http://img802.imageshack.us/img802/7141/screenzgk.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:30:19.137

如果您以简单的方式提交页面，则 Struts2 提交按钮的工作方式比一个简单的解决方案是仅创建一个包含您的布局的页面`result.jsp`，但您可以最初隐藏该部分（在页面提交之前）。

成功提交页面后，您可以在操作类中设置一个值（例如布尔值），并基于此显示该部分，因为您已经完成了文件上传，因此您可以在操作类中设置需要显示的值中的值`result.jsp`。

对我来说，这是一种简单而有效的方法。

或者，如果您要使用基于 Ajax 的文件上传，那么有很多方法可以做到这一点

1.  从 Action 发回 HTML 部分。
2.  您甚至可以发送 JSP 文件的名称，并可以在运行时将其包含在当前 JSP 中。
3.  从动作发送 JSON 数据并使用 Jquery 解析 JSON 以构建视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:21:12.010

我发现你必须将它重定向到同一页面（parent.jsp）。您必须删除另一个。

并在 parent.jsp 中进行一些更改。喜欢使用迭代器标签和所有对显示所有数据有用的东西。

# php - Symfony2，用于 http 调用和用户登录的服务器端 PHP 类

> ID：12154572
> 
> 赞同：0
> 
> 时间：2012-08-28T07:21:53.463
> 
> 标签：php, security, authentication, symfony

在我的服务器中，一个 Symfony2 应用程序正在运行。

此外，服务器有一个文件夹，其中放置了一些 PHP 类。这些类用于实用目的，并由 http 调用使用（特别是通过使用我网站页面中的 AJAX）。例如，一个 PHP 类用于文件上传（见下图）。

![当前使用 php 实用程序类的架构](../Images/390f163425d50646ad4e4c914e4b9824.png)

http 调用应该由我的网页之一完成（一切都会好的），但也可以从外部网站完成。后一个 http 请求应该是恶意请求。

因此，我需要在 php 类中插入这样的代码来检查用户是否已登录（即使它没有特定的角色）。**考虑到我正在使用 Symfony2，如何做到这一点？**

PS：我强调*必须在通用 PHP 类*中进行控制，而不是在 Symfony2 控制器中！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:49:31.150

我认为最好的方法是当你问谷歌时。有两种可能。您可以使用 Symfony2 或使用您的脚本。最好的方法是在 Symfony 应用程序中实现文件上传并调用它。

SF2 文档中有一个关于[Security](http://symfony.com/doc/current/cookbook/security/index.html)的完整部分。您应该仔细阅读它，然后您可以实施它。

如果没有身份验证，您将无法在 SESSION 中保护您的用户信息。但是如果你在 Symfony 上有一个登录名，你可以像这样设置一个 SESSION 变量：

```
$_SESSION['loggedOn'] = true; 
```

然后在您的文件上传脚本中询问是否设置了会话。

```
session_start;
if($_SESSION['loggedOn'] == false) {
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:02:59.673

我尝试使用常见的 PHP 解决方案，例如按照**Stony**的建议设置 Session 变量，但是 Symfony2 会话中有些东西我丢失了。即使在 Symfony2 控制器中定义了变量，`$_SESSION`对象似乎也不包含它。

因此，我尝试按照**Stony**的建议遵循“*控制器方式*” 。

 **以下是我所做的。假设必须通过 http 调用运行 PHP 类“FileUpload.php”。PHP 文件具有要使用的*FileUpload类。*就我而言，调用是通过 AJAX 完成的。因此，我应该做类似的事情：

```
<script>
  load('http://path/to/fileupload.php')
<script> 
```

where`load()`是用于 AJAX 调用的虚拟 Javascript 函数。

当然，最初的想法是在 FileUpload.php 中包含所有控件。*我不能！*所以呢？

很简单，在 Symfony2 中创建一个控制器。然后创建你的动作。例如

```
public function fileUploadAction(){
    //control if user is logged and has required role as usual with Symfony2
    $uploader = new \Path\To\\FileUpload();
    //do something with object uploader

    exit(0);//Symfony will not require an answer, but you did what you needed
} 
```

当然，网页中的脚本也要更新：

```
<script>
  load("{{path('route_to_fileUploadAction')}}")
<script> 
```

请记住将 FileUpload.php 放在安全文件夹中。**

# linux - linux - 如何在没有权限的情况下复制文件/文件夹

> ID：12154574
> 
> 赞同：2
> 
> 时间：2012-08-28T07:22:01.377
> 
> 标签：linux

我在将文件从我的 android 设备（sd 卡）复制到我的 pc（linux）时遇到问题

问题如下：因为在 sdcard 上所有文件和文件夹都具有 ---rwxr-x 权限我无法复制包含文件的文件夹，因为它保留了权限，所以我无法在该文件夹中写入，然后我必须手动设置该文件夹的权限，然后手动复制文件。

所以我的问题是有没有办法复制文件和文件夹但不保留其原始权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:42:28.397

如评论所述，您需要`sudo`执行该操作。否则，您可以使用[pmount](http://manpages.ubuntu.com/manpages/natty/man1/pmount.1.html)它将基本上挂载您的 sdcard，这样您就可以在不需要 su 权限的情况下写入它（并且也不需要它们进行挂载），从长远来看，这可能非常实用。

# objective-c - 删除情节提要 xcode 但在执行期间存在

> ID：12154575
> 
> 赞同：1
> 
> 时间：2012-08-28T07:22:04.803
> 
> 标签：objective-c, xcode

我在 XCode 中意外删除了我的故事板。但是，当我运行我的应用程序时，应用程序的执行就像旧的故事板仍然存在一样。有没有办法让旧的恢复或让新的取代它？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:28:39.773

## 如何*可能*让旧的回来

您很可能刚刚从项目中删除了引用，因此该文件仍然存在。您可以通过转到您的项目文件夹（在磁盘上）找到该文件。可以通过在 Xcode 中右键单击您的项目并选择“在 Finder 中显示”来找到它

![在取景器中显示](../Images/e871c6402c852b67c3796f2da1092245.png)

Storyboard 文件应位于您的主要语言环境文件夹中（默认为英语）

![e.lproj](../Images/384f30ec6a314e25fd161a3e4c1521c9.png)

如果文件在那里，您可以将其拖回您的项目。

![故事板文件](../Images/e8a5abb48f9a11983b035a557d170d5f.png)

如果它不存在，则必须以其他方式查找文件...您正在使用某种版本控制，对吗？您也可以将其替换为另一个故事板。

## 如何用新的替换它

您可以在目标的“摘要”选项卡中指定新的故事板。

您可以通过以下方式找到它

1.  按下您的项目
2.  按下你的目标
3.  从下拉列表中选择您的新故事板。

![更改为另一个故事板](../Images/c6f41630888dac31495d55237bd7a9ec.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T18:28:51.527

如果您在模拟器上运行（并且它具有您需要的故事板版本），您可能可以从模拟器应用程序文件夹中获取故事板。在我的情况下，路径是：
*~/Library/Application Support/iPhone Simulator/6.1/Applications/87519545-64CB-4917-B3CF-821F7BF968BD/audio conversion.app/en.lproj/MainStoryboard.storyboardc*

但最好使用例如 git 进行源代码版本控制。

希望能帮助到你。

# javascript - 切换按钮的标题

> ID：12154576
> 
> 赞同：2
> 
> 时间：2012-08-28T07:22:09.513
> 
> 标签：javascript, jquery

我有一个 HTML 按钮，它显示另一个 div 而不是另一个 div。

我只需要切换按钮的文本：

```
<input id="blueButton" type="button" value="+ Add a new Team" onclick="
 $('#blueButton').prop('value', 'Hide'); 
 $('#teams').toggle('slow');
 $('#add_block').toggle('slow');"> 
```

我需要再次将按钮文本从隐藏更改为原始标题`+ Add a new Team`

所以按钮标题是`+ Add a new Team` 如果单击按钮标题更改为`hide`如果我再次单击按钮它将再次更改为`+ Add a new Team`。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:29:08.777

```
$('#blueButton').val(function(_, value) {
    return value === 'hide' ? '+ Add a new Team' : 'hide' 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:35:16.437

```
$("#blueButton").toggle(
    function(){
        $(this).val("hide");
    }, 
    function(){
        $(this).val("+ Add a new Team");
    }
); 
```

工作[演示](http://jsfiddle.net/Jf7UU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T07:29:37.523

试试这个：

```
$('#blueButton').click(function() {
    if ($(this).val() == "+ Add a new Team") { 
        $(this).val("Hide")
    } else { 
        $(this).val("+ Add a new Team")
    }
}); 
```

编辑：未定义和我说同样的话，但更好的是，使用他的：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:26:07.597

```
$('#teams').toggle('slow', function() {
    // 动画完成。
    //在此处更改按钮文本
    $('#blueButton').prop('value', 'show');
  });

```

这可能不是您需要的确切代码，但它可以提示您可以拥有一个回调函数，该函数可用于在切换完成后执行操作，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T07:32:33.693

这是[**jsfiddle**](http://jsfiddle.net/Bongs/Fwkrg/)

jQ

```
$("#blueButton").live("click", function() {
    $(this).val() == "+ Add a new Team" ? $(this).val("hide") : $(this).val("+ Add a new Team");
});​ 
```

# python - python从url下载图片

> ID：12154579
> 
> 赞同：0
> 
> 时间：2012-08-28T07:22:35.290
> 
> 标签：python, web, download

这不容易回答，所以我想要一些指南：我想从网络服务器下载图像。我知道如何从 url 获取图像，但我不知道我能找到多少页。（例如，第 01 章有 21 张图片，第 02 章只有 12 张……）

网页上有一个组合框 ( *DropdownChoice* )，告诉您该章有多少页。有没有办法让我得到这些信息？

如果我知道这一点，我可以从第 1 页到第 x 页进行*for并下载每张图片。*

仅供参考我正在使用python

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:25:50.990

作为一种快速破解，您可以只下载连续页面，直到收到 404（或其他错误）。这通常不被认为是“不错的”，因此请谨慎使用，但它可以让您轻松下载所有图像。

或者，您可以查看使用[Scrapy](http://scrapy.org/)包来帮助您下载和解析网页和图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-20T01:09:31.833

[python中](https://github.com/adriano-pinaffo/download_images)的这个项目从用户预定义的网站下载许多图像。我相信你可以改变它以满足你的需要。

# fluent-nhibernate - 在流利的 nHibernate 中使用派生类

> ID：12154583
> 
> 赞同：3
> 
> 时间：2012-08-28T07:22:59.910
> 
> 标签：fluent-nhibernate

我有两个共享公共字段的表。我不想重新映射所有这些，而是​​希望有一个具有公共字段的基类。对于 POCO，这很简单：

```
class Base
{
   public string commonField {get;set;}
}
class Derived : Base
{
   public string specificField {get;set;}
}
class OtherDerived : Base
{
   public string specificOtherField {get;set;}
} 
```

请注意，没有“base”表之类的东西。它只包含在多个表之间共享的许多公共字段。是的，我知道这并没有很好地规范化，但这是我必须处理的。

我的问题是 - 有没有办法在流利的 nHibernate 中实现这一点，而不必复制映射这些公共属性的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:30:49.973

您可以继承 from`ClassMap`来执行此操作。我会做类似以下的事情：

```
public class BaseMap<T> : ClassMap<T> where T : Base
{
    public BaseMap()
    {
        Map(x => x.commonField, "COMMON_FIELD");
    }
}

public class DerivedMap : BaseMap<Derived>
{
    public DerivedMap()
    {
        Table("DERIVED_TABLE");
        Polymorphism.Explicit();  //You may want to use this in your case.
        Map(x => x.DerivedField, "DERIVED_FIELD");
    }
} 
```

注意`Polymorphism.Explicit();`以上。在你的情况下，我认为你会想要这个。

[http://www.nhforge.org/doc/nh/en/#mapping-declaration-class](http://www.nhforge.org/doc/nh/en/#mapping-declaration-class)

# node.js - 节点 Memcached 错误：连接没有给服务器

> ID：12154593
> 
> 赞同：1
> 
> 时间：2012-08-28T07:23:47.643
> 
> 标签：node.js, memcached

我在节点 js 服务器中为我的新应用程序使用 Node-Memcached npm。在这段时间里，只有当我连接并从 memcache 获取数据时才会收到错误消息。请帮我解决这个..

> 错误：连接在获取聊天数据时未提供服务器

我的内存缓存连接和获取语法是：

```
chatmemcached   = require('memcached'); 
memcache = new chatmemcached(dbconfig['memcachehost'][server]+":"+dbconfig['memcacheport']);
memcache.get("chat_"+userid, function (err,result) {
     if(err) {
         console.log("Error : "+err+" at get the chat data"); 
     } else {
         process the result;
     }
     memcache.end();
}); 
```

提前致谢。

塞尔瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T13:42:49.877

你配置安装的memcached。如果没有，您需要编辑 /etc/memcached.conf 以将“-l”参数设置为服务器的正确 IP 地址。对端口的“-p”参数执行相同的操作。

# wcf - WCF服务奇怪错误-无法使用浏览器访问，可以通过客户端访问，但只能在调试时访问

> ID：12154595
> 
> 赞同：0
> 
> 时间：2012-08-28T07:23:48.710
> 
> 标签：wcf

我目前正在学习 WCF，但我遇到了一个非常奇怪的问题。

我创建了 WCF 服务并托管在控制台应用程序中。我创建了一个客户端，当我开始调试客户端时，一切都按预期工作。浏览器点击服务中指定的地址。但是，当我只运行客户端而不进行调试时，我得到了一个异常。我一直没有碰过这项服务。只有客户端。该服务托管在控制台应用程序中。

我还注意到一些非常奇怪的事情。我在客户端放了一个 console.readline() 。现在在调试客户端时，当我附加调试器时，我看到一个 WCF 服务桌面通知，告诉我服务已托管并且我能够使用该服务并且它可以工作。我也可以通过浏览器访问该地址。如果我分离调试器，地址在浏览器中不起作用。如果我重新附加然后它再次工作，另一个桌面通知出现。这告诉我我的服务仅在我调试时启动并运行。当我退出调试器时，服务退出。但我没有触及服务，整个时间只是客户。

请告诉我我没疯:(

我的地址：

```
http://localhost:8732/Design_Time_Addresses/MASService/Service1/ 
```

例外：在 [MyAddress] 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

这是我的服务配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="MASService.MasOperationsService" behaviorConfiguration="SimpleServiceBehavior">
        <endpoint address="" binding="wsHttpBinding" contract="MASService.IMasOperations">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/MASService/Service1/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="SimpleServiceBehavior">
          <!-- To avoid disclosing metadata information, 
           set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

这是我的服务主机配置（控制台应用程序）：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <services>
            <service name="MASService.MasOperationsService">
                <endpoint address="http://localhost:8733/Design_Time_Addresses/MASService/Service1"
                    binding="basicHttpBinding" bindingConfiguration="" contract="MASService.IMasOperations" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

这是我的客户端配置（控制台应用程序）：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="WSHttpBinding_IMasOperations" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/MASService/Service1/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IMasOperations"
                contract="ServiceReference1.IMasOperations" name="WSHttpBinding_IMasOperations">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:59:20.353

您需要通过在解决方案资源管理器中右键单击以 SVC 结尾的文件，将其标记为 Visual Studio 中项目的起始页。然后客户端会自动启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:33:34.463

客户端将需要控制台应用程序向其公开服务的端口。我想在运行调试器时 vs 托管在您的客户端成功连接到的端口上。（会将此添加为评论，但我的 nexus 客户端似乎不支持评论）尝试 8733 并且绑定应该匹配。

# javascript - 用于切换背景图像的 Javascript 无法在 IE7 中显示

> ID：12154606
> 
> 赞同：0
> 
> 时间：2012-08-28T07:24:37.530
> 
> 标签：javascript, cross-browser, internet-explorer-7, background-image

我最近在做[这个模板。](http://checkintonight.freeiz.com/)背景图像在除 IE7 之外的所有浏览器中都能正常工作。根据一些谷歌搜索，我已经从这些图像的 url 中删除了 '' 符号。但是，我也无法完成它。 ![在此处输入图像描述](../Images/20a21ebf2a27126c42a84a582d009403.png)

这是我的[JavaScript 链接](http://checkintonight.freeiz.com/js/custom-form-elements.js)。

我花了几天的时间来寻找这个错误。谁能有任何想法弄清楚这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:37:19.630

据我所知，问题来自您没有内容的内联跨度。

我在 IE7 模式下使用 IE9，根本看不到您的复选框。但是，我添加`display:block`到其中之一，它出现了并且背景打开了点击。

所以我建议你尝试将它们实现为浮动 div 而不是跨度。或者至少确保您的跨度有内容并且不呈现为 0x0 元素。

# asp.net-mvc - 为什么我会从我的 MVC 应用程序的 Content 文件夹中加载与角色提供程序相关的异常？

> ID：12154615
> 
> 赞同：0
> 
> 时间：2012-08-28T07:25:37.327
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我刚刚向我的托管服务提供商部署了一个 MVC4 应用程序。我发现加载站点时我的 CSS 没有呈现，当我尝试直接导航到 CSS uri 时，加载我的角色提供程序时出现异常：

> 无法加载文件或程序集“Educ8.Mvc”或其依赖项之一。该系统找不到指定的文件。
> 
> type="Educ8.Mvc.Core.Security.Educ8RoleProvider, Educ8.Mvc"

然而，当我访问授权控制器上的操作时，我没有收到此类错误。什么可能导致这种情况，为什么要对 Content 文件夹应用任何授权？

似乎当我尝试访问*内容*资源时，在另一个缺少主应用程序的 bin 文件夹的文件夹中为请求启动了一个“子”应用程序，并引发了异常。

我注意到文件确实从*Scripts*文件夹中正确加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:24:56.210

您收到此类错误的原因可能有很多，我将尝试了解如何识别您的：

1.  尝试设置

    ```
    <location path="~/Content">
            <system.web>
                    <authentication mode="None" />
            </system.web>
    </location> 
    ```

2.  从控制器中的代码或 globasl.asax 中的应用程序开始将测试值放入应用程序状态

    ```
    HttpContext.Application["test"] = "test value"; 
    ```

    并从 Content 文件夹中的简单 .aspx 文件中获取它，其中包含以下内容：

    ```
    <%=HttpContext.Application["test"]%> 
    ```

3.  尝试跳过所有正在运行的模块抛出所有请求

    ```
    <modules runAllManagedModulesForAllRequests="false">
    </modules> 
    ```

4.  禁用 MVC 4 的缩小和捆绑功能

# asp.net-mvc-3 - MVC3，通过ajax调用推出html的表单验证

> ID：12154618
> 
> 赞同：0
> 
> 时间：2012-08-28T07:25:49.637
> 
> 标签：asp.net-mvc-3, validation

我对页面上的表单进行了验证。

我有一个通过 ajax 引入 html 的操作，在这种情况下，部分视图被推出。在此表单上，我的验证不起作用。

HTML推出了，我也测试了用它推送js，但仍然没有运气：

```
<!-- form, AJAX and validation -->
<script type="text/javascript" src="/NetSite/Scripts/Tools/jqueryplugins/jquery.form.js"></script>
<script type="text/javascript" src="/NetSite/Scripts/jqueryMain/jquery.unobtrusive-ajax.min.js"></script>
<script type="text/javascript" src="/NetSite/Scripts/jqueryMain/jquery.validate.1.9.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="/NetSite/Scripts/jqueryMain/jquery.validate.unobtrusive.min.js"></script>

<form action="/Transfer/ExtendExpirationDate" id="ExtendExpirationDateForm" method="post">

<input data-val="true" data-val-required="The XPhase field is required." id="Detail_XPhase" name="Detail.XPhase" type="hidden" value="870033f4-670e-4315-a23a-fc6ebb24cafe" />
<input data-val="true" data-val-number="The field Id must be a number." data-val-required="The Id field is required." id="Detail_Id" name="Detail.Id" type="hidden" value="100138062" />
<input data-val="true" data-val-number="The field Id must be a number." data-val-required="Response required!" id="DaysToExpire_Id" name="DaysToExpire.Id" type="hidden" value="100138062" />        

<table class="siteTable">
            <tbody>
                <tr>
                    <th style="width: 40%;">Posted Date</th>
                    <td style="width: 60%;">08/27/2012</td>
                </tr>
                <tr>
                    <th>Expiration Date</th>
                    <td>09/03/2012</td>
                </tr>
                <tr>
                    <th>Current Days to Expiry</th>
                    <td>7</td>
                </tr>
                <tr>
                    <th>New Days to Expiry</th>
                    <td>
                        <input data-val="true" data-val-digits="The field should contain only digits" data-val-number="The field DaysToExpire must be a number." data-val-range="Value should be greater than 0" data-val-range-min="1" data-val-required="Response required!" id="DaysToExpire_DaysToExpire" maxlength="3" name="DaysToExpire.DaysToExpire" size="4" type="text" value="14" />
                        <span class="field-validation-valid" data-valmsg-for="DaysToExpire.DaysToExpire" data-valmsg-replace="true"></span>
                    </td>
                </tr>
                <tr>
                    <th class="empty"></th>
                    <td><button type="submit" title="Update" id="ExtendExpirationUpdateButton" class="gradientbutton gradientsmall gradientorange">Update</button></td>
                </tr>
            </tbody>
        </table>
</form> 
```

引入 html 的线索提示调用：

```
<script type="text/javascript">
        $('.ExtendExpirationDate').cluetip({
            attribute: 'rel',
            showTitle: true,
            sticky: true,
            closeText: JSGlobalVars.CloseImagePath, 
            ajaxCache: false,
            arrows: true,
            dropShadow: false,
            activation: 'click', //click, hover
            height: 'auto',
            closePosition: 'title',
            width: '400px'
        });
    </script> 
```

行动：

```
public ActionResult ExtendExpirationDate(Guid transferGuid)
        {
            ActionResult result = null;

            var errorModel = new ContentShowError();
            errorModel.IsError = false;

            var xfer = MyInstance.GetFilesGuid(transferGuid);
            if(xfer == null)
            {
                errorModel.IsError = true;
                errorModel.Message = base.GetDisplayMessage(ProcessingMessagesEnum.ErrorNoDataFound);
                result = PartialView(ViewNames.ErrorControl, errorModel);
            }
            else
            {
                var model = new ExtendExpiryDateViewModel();
                model.Detail = xfer;
                model.DaysToExpire = new ExtendDaysToExpire()
                    {
                        DaysToExpire = xfer.DaysToExpire + 7,
                        Id = xfer.Id
                    };
                result = PartialView(ViewNames.ExtendExpirationDateControl, model);
            }

            return result;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:09:22.240

不显眼的验证器仅在原始 dom 加载事件上连接，而不是在 subsequest 拉入时连接。

当表单插入 DOM 时，调用

```
$.validator.unobtrusive.parse("form"); 
```

连接表单以进行验证。

问候

硅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:49:31.387

由于此表格是由线索提示提取的，因此我已将其添加到 OnShow 网络中。

```
<script type="text/javascript">
        $('.ExtendExpirationDate').cluetip({
            attribute: 'rel',
            showTitle: true,
            sticky: true,
            closeText: JSGlobalVars.CloseImagePath, 
            ajaxCache: false,
            arrows: true,
            dropShadow: false,
            activation: 'click', //click, hover
            height: 'auto',
            closePosition: 'title',
            width: '400px',
            onShow: function (ct, ci) {
                $.validator.unobtrusive.parse("ExtendExpirationDateForm"); //client side validation

            }
        });
    </script> 
```

当上述方法不起作用时，我将其添加到我的控件中。仍然没有运气。

```
<script type="text/javascript">
    $(document).ready(function() {
        $.validator.unobtrusive.parse("ExtendExpirationDateForm"); //client side validation
    });
</script> 
```

以上都是我使用firebug 1.10.2复制的。

# c - 结构大小、填充和未来

> ID：12154621
> 
> 赞同：1
> 
> 时间：2012-08-28T07:25:54.427
> 
> 标签：c, compiler-construction, padding, microprocessors, word-size

考虑以下程序

```
#include <cstdio>
#include <stdint.h>

struct Foo
    {
    int32_t a;
    int32_t b;
    int32_t c;
    };

struct Bar
    {
    int32_t a;
    int32_t b;
    int16_t c;
    };

int main()
    {
    printf("sizeof(Foo)=%u\nsizeof(Bar)=%u",sizeof(Foo),sizeof(Bar));
    return 0;
    } 
```

使用 MinGW 编译时，我在 32 位和 64 位系统上都得到 sizeof(Foo)=12 和 sizeof(Bar)=12（我猜在 16 位环境中，sizeof(Bar)=10）。未来这些结构的大小是否有可能是 16 以更好地适应 64 位环境？

我将结构存储在文件中，并且不想在将来添加解决方法。Doom 事物结构布局在 1993 年可能是一个不错的选择，但不是今天。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:34:42.503

结构的大小`Bar`与您是否在 16 位环境中几乎没有关系，它仅与结构中字段的对齐要求有关。

结构的对齐方式通常与其中所有字段的最严格的对齐方式相同。在这种情况下，影响它的是类型的 32 位对齐要求`int32_t`。

现在您可能认为不应该是这种情况，因为最终字段是一个 16 位值，并且在它之后没有任何内容需要进一步对齐，但您错了。想想一系列这些事情会发生什么：

```
0000  index 0  a      32 bits
0004           b      32 bits
0008           c      16 bits
000a           filler 16 bits
000c  index 1  a      32 bits
0010           b      32 bits
0014           c      16 bits
0018           filler 16 bits 
```

由于需要正确对齐`c`以下内容，您可以看到后面需要填充物。`a`

就未来而言，这些字段的任何对齐方式都不太可能改变，因为它们是精确的位宽类型。它们将始终是 32 位值，并且*可能*始终需要 32 位对齐。

话虽如此，但不能保证您在将来的某个时候不会找到需要在 128 位边界上对齐 32 位值的实现。部分`6.2.8 Alignment of objects`是 C11 中的控制部分，它似乎并没有忽视这种可能性，因为它没有说明对齐与对象大小有关：

> 对象类型对该类型的每个对象都有对齐要求：可以使用`_Align`关键字请求更严格的对齐。

如果您想捕捉结构大小和/或对齐方式发生变化的可能性，您可以在函数中使用`sizeof`and来输出消息并在它们不正确时退出。这不会影响该领域的代码，但如果您转向具有更严格对齐的编译器，则会有很大帮助。`alignof``main`

这*就是*你改变它的地方（见 YAGNI）。规划所有可能的未来的问题是你不知道会发生什么:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:17:35.743

未来......现在你可以使用`#pragma pack(1)`

# android - 滚动时 ListView NullPointer 异常

> ID：12154628
> 
> 赞同：0
> 
> 时间：2012-08-28T07:26:19.917
> 
> 标签：android, listview, android-listview, android-scroll

我的列表视图有问题。我有一个带有标题的列表。

列表：artistas_list 标题：artistas_list_s

在标题中我想放一个字母（A，B，C，D，....）

除非滚动列表，否则一切正常。滚动时在这一行出现空指针异常：tt.setText(o.nombre);

这很奇怪，因为在第一时间工作正常。

好的...然后粘贴getView的代码

```
 public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.artistas_list, null);
        }

        Object content = null;

        Artista o = artistas.get(position);

        try {
            URL url = new URL(o.foto);
            content = url.getContent();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        InputStream is = (InputStream) content;
        Drawable image = Drawable.createFromStream(is, "src");

        TextView tt = (TextView) v.findViewById(R.id.ArtistTopText);
        TextView nid = (TextView) v.findViewById(R.id.txtnid);
        ImageView it = (ImageView) v.findViewById(R.id.imageView1);

        tt.setText(o.nombre);
        nid.setText(o.nid);
        it.setImageDrawable(image);

        String letra= o.nombre.substring(0, 1);

        if(!letra.equals(letraA)){      
            LayoutInflater vo = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vo.inflate(R.layout.artistas_list_s, null);                 
        }
        letraA = letra;
        return v;
    } 
```

好的，谢谢阅读并尝试帮助！

日志猫：

```
 08-28 09:45:24.283: E/AndroidRuntime(512): FATAL EXCEPTION: main
    08-28 09:45:24.283: E/AndroidRuntime(512): java.lang.NullPointerException
    08-28 09:45:24.283: E/AndroidRuntime(512):  at es.okisam.comedy.artistas.ArtistasActivity$ListAdaptor.getView(ArtistasActivity.java:95)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.widget.AbsListView.obtainView(AbsListView.java:1409)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.widget.ListView.fillDown(ListView.java:670)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.widget.ListView.fillGap(ListView.java:641)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.widget.AbsListView.trackMotionScroll(AbsListView.java:3399)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.widget.AbsListView.onTouchEvent(AbsListView.java:2233)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.widget.ListView.onTouchEvent(ListView.java:3446)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.view.View.dispatchTouchEvent(View.java:3885)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.os.Handler.dispatchMessage(Handler.java:99)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.os.Looper.loop(Looper.java:130)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at java.lang.reflect.Method.invoke(Method.java:507)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    08-28 09:45:24.283: E/AndroidRuntime(512):  at dalvik.system.NativeStart.main(Native Method) 
```

艺术家名单

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textSeparator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#000"
        android:gravity="center"
        android:text="text"
        android:textColor="#FFFFFFFF"
        android:visibility="visible" />

</LinearLayout> 
```

艺术家列表

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:background="@drawable/fondo"
    android:baselineAligned="false"
    android:gravity="center_vertical|top"
    android:orientation="horizontal"
    android:padding="6dip" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_margin="5dp"
        android:adjustViewBounds="true"
        android:background="@drawable/border_images"
        android:maxHeight="50dp"
        android:maxWidth="50dp"
        android:minHeight="50dp"
        android:minWidth="50dp"
        android:scaleType="fitXY"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/ArtistTopText"
        android:layout_width="190dp"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/txtnid"a
        android:layout_toRightOf="@+id/imageView1"
        android:layout_weight="0.02"
        android:gravity="center_vertical"
        android:singleLine="true"
        android:textColor="#000" />

    <TextView
        android:id="@+id/txtnid"
        android:layout_width="1dp"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:gravity="center_vertical"
        android:singleLine="true"
        android:visibility="gone" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_weight="1"
        android:src="@drawable/estrella_destacados"
        android:visibility="gone" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="24dp"
        android:layout_weight="1"
        android:src="@drawable/flecha" />

</RelativeLayout> 
```

使用 logcat 和布局进行更新。记住...滚动时出现空指针...：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:35:18.650

你不应该这样做

```
content = url.getContent(); 
```

首先在 getview 中，因为它在 UI 线程中运行。

然后，

```
InputStream is = (InputStream) content; 
```

可能为 null，因为它在 try {} catch {} 块之外

最后，鉴于我们没有任何堆栈跟踪或日志，它可能几乎是您代码中的任何内容（布局中不存在视图，对象具有空字段......）

另外，你的设计很奇怪。如果您的元素不是以与前一个相同的字母开头，则不显示它，而仅显示其首字母？

# 编辑

仔细查看后，您的代码中会发生以下情况：

1.  你夸大了 Artistas_list
2.  你用一个以 a 开头的东西填充它
3.  你对以 b 开头的事情做同样的事情
4.  你夸大了 Artistas_list_s 因为它不是以
5.  您稍后会在 getView 中将其作为 convertView 收到
6.  您寻找其中不存在的视图（如 ArtistTopText）

请参阅此示例[http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)以了解您似乎正在尝试做的事情。

# microsoft-metro - 在同一个 Metro 项目中的 C++ 和 C# 之间进行通信

> ID：12154631
> 
> 赞同：1
> 
> 时间：2012-08-28T07:26:48.720
> 
> 标签：microsoft-metro

在我的 Metro 应用程序中，我有两个组件，一个是 C++，另一个是 C#。我可以在他们之间来回交流吗？任何有关如何执行此操作的代码示例或参考都将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:03:18.770

您需要的是一些[C++/CX 代码](http://msdn.microsoft.com/en-us/library/windows/apps/hh699871.aspx)。您可以直接编写 C++/CX 而不是标准 C++，也可以围绕标准 C++ 创建包装器。完成此操作后，您的 C# 代码就可以像调用另一个 C# 组件一样调用 C++。

具体来说，您正在做的是将 C++ 组件转换为 Windows 运行时组件。 [这是 C++ 和 Javascript 的示例](http://msdn.microsoft.com/en-us/library/windows/apps/hh441569.aspx)，但在 C# 中使用是相似的。

# gstreamer - pkg-config 不显示 gstreamer-plugins-bad

> ID：12154633
> 
> 赞同：0
> 
> 时间：2012-08-28T07:26:51.980
> 
> 标签：gstreamer, rtmp, pkg-config

我正在尝试使用 rtmpsrc 插件编写一个程序，该插件属于 gstreamer 的不良插件。我阅读了有关使用 pkg-config 工具编译 gstreamer 坏插件程序的文章，因此我尝试使用“pkg-config --list-all”将所有已知软件包列出到我系统上的 pkg-config 中，其中不包括对gstreamer-plugins-bad-0.10 这是否意味着我无法在我的机器上编译 gstreamer bad plugin 程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:09:16.410

pkg-config --list-all 将列出您链接的模块。gst-plugins-bad 仅包含插件（也像 gst-plugin-ugly）并且插件是动态加载的。使用 gst-inspect rtmpsrc 查看您的系统上是否有所需的插件。在您的代码中检查函数的返回值以处理未安装元素的情况。

# php - 如何将数组值插入数据库表中列的多行？

> ID：12154642
> 
> 赞同：0
> 
> 时间：2012-08-28T07:27:42.993
> 
> 标签：php, arrays, database

我一直在尝试编写一个程序来将数组值插入数据库表中一列的多行中。经过大量试验后，我无法获得我想要的正确输出。

我的数据库表看起来像这样

```
 id   | values  |
    1    |         |
    2    |         |
    4    |         |
    5    |         |
    6    |         | 
```

我有第二列值作为数组，我想在第二列中输入这些值。

输出应如下所示：-

```
 id   | values  |
    1    |     2   |
    2    |     3   |
    4    |     7   |
    5    |     9   |
    6    |     10  | 
```

所以，我有两个数组值......所以`$id`，`$values`我想为每个相应的值填写`$values`列的每一行`$id`

注意：`$id`已经填写在数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:35:46.130

试试这个 ：

```
foreach ( $array as $key => $value )
{
     $query = "INSERT INTO table
                  SET values = $value,
                  id = $key
                  ON DUPLICATE KEY UPDATE values = $value";
} 
```

我不知道您使用的是哪种数据库，此示例适用于 MySQL。

而且我也不知道你如何在数据库中插入信息（简单的 mysql_query、pdo、frameworks，...），所以你应该使用你需要的函数并传递那个查询字符串，如果需要，不要忘记正确清理阵列。

编辑：我还假设 id 是主键或唯一索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:36:39.873

我假设您有一个包含 id 值的数组。

你可以尝试这样的事情：

```
foreach($XArray as $key => $value){

$sql = "UPDATE TABLENEAME ".
       "SET value = $value ".
       "WHERE id = $key" ;

$retval = mysql_query( $sql, $conn );
} 
```

我没有检查代码，它只是一个示例。

关于更新的问题：

```
$count=sizeof($value);
for($counter=0;$counter<$count;$counter++){

    $sql = "UPDATE TABLENEAME ".
           "SET value = $value[$counter]".
           "WHERE id = $id[$counter]" ;

    $retval = mysql_query( $sql, $conn ) or die ("Error in query: $sql");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:31:57.263

```
foreach($yourArray as $key => $value){
   // <INSERT QUERY LINE HERE > ( you have to insert $value insite 'values' )
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:35:59.713

在循环中遍历数组值，并在循环的每次迭代中生成并执行查询。示例代码看起来像这样，根据您的变量和需要进行更改。

```
foreach ($array as $id => $values) {
    $query = "INSERT INTO table (id ,values) VALUES ($id , $values)";
    $result = mysql_query($query);
} 
```

# dotnetnuke - 在 XMod Pro 中，我是否需要一个单独的模块来显示动态网格？

> ID：12154655
> 
> 赞同：0
> 
> 时间：2012-08-28T07:28:58.963
> 
> 标签：dotnetnuke

我是 XMod Pro 的新手，我只能创建简单的表格。网站上提供了两个链接（也许还有更多），它们包含显示来自外部数据源的数据的网格/表格示例——这正是我想要做的。

[http://dnndev.com/Products/XModPro/Demo/TableView.aspx](http://dnndev.com/Products/XModPro/Demo/TableView.aspx) - 我想要一个这样的网格，

[http://www.dnndev.com/Products/XMod/XModDemos/GridLayoutSample.aspx](http://www.dnndev.com/Products/XMod/XModDemos/GridLayoutSample.aspx) - 我什至没有这样的网格。

我目前拥有的网格是非常简单且未格式化的数据表表示形式。帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T16:52:19.527

您应该下载他们的表格分类器模块套件，它可以像 Dotnetnuke 上的典型模块一样安装。从那里你可以打开它，看看它是如何构建的。

[http://dnndev.com/Products/Free-XMod-Pro-Kits/Tablesorter.aspx](http://dnndev.com/Products/Free-XMod-Pro-Kits/Tablesorter.aspx)

# jquery - JQuery Ajax 方法调用了两次

> ID：12154673
> 
> 赞同：0
> 
> 时间：2012-08-28T07:30:23.253
> 
> 标签：jquery, ajax, struts2

我在一个调用`struts2`动作的jsp中有这个函数。但它调用了两次。为什么？

`JSP`

```
 $("#inputField").change(function()
    {
        var inputField= $("#inputField").val();
        if(inputField !== '')
        {
            var url = 'myUrl';
            $.getJSON(url, function(retVal)
            {
                $.each(retVal.retList, function(index, element)
                {
                    console.log(element.name);
                });  
            });
        }
    }); 
```

`Struts2 Action`

```
public String getJSON() throws Exception
{
     System.out.println("Method Executed");
} 
```

当这个`ajax`电话返回时，我得到了这个

```
Method Executed
Method Executed 
```

我怎样才能让它只执行一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T07:42:59.787

您可能会使用 JSON 插件，它会调用所有以“get”开头的方法，以尝试将它们序列化以进行输出。尝试重命名您的方法名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:34:47.923

确保您只注册一次“更改”事件。双 ajax 调用的原因可能是您在代码中添加了两次更改侦听器。看看[这里](https://stackoverflow.com/questions/950037/same-ajax-called-twice-jquery?rq=1)。

# javascript - 奇怪的 Javascript 行为 - js 对象

> ID：12154675
> 
> 赞同：5
> 
> 时间：2012-08-28T07:30:43.990
> 
> 标签：javascript, boolean, javascript-objects

我想编写某种具有不同转换的状态机。但是当我想选择一个项目时，会发生一些奇怪的事情。

```
var transitions = {
    "on": {
        "false":"true",
        "true":"false"
    }
} 
```

最后两行非常有趣 - 相同的索引，第一个`hardcoded`和第二个存储在变量中。为什么第一个返回正确的结果（false）而另一个未定义？

```
console.log(attr);                             // on
console.log(transitions[attr]);                // Object { false="true, true="false" }
console.log(current_val);                      // "true"
console.log(typeof current_val);               // string
console.log(transitions[attr]["true"]);        // false
console.log(transitions[attr][current_val]);   // undefined 
```

*信息：我使用 FF 14.0.1*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:41:40.730

请注意`console.log(current_val);`输出`"true"`到控制台。由于`console.log`不打印引号，所以必须是`current_val`包含的情况，`'"true"'`与 . 不同`"true"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:34:15.970

这是因为在最后一个语句中未将 true 评估为字符串。

# asp.net - ItextSharp 错误：文档没有页面

> ID：12154684
> 
> 赞同：4
> 
> 时间：2012-08-28T07:31:29.807
> 
> 标签：asp.net, pdf, itextsharp

我正在使用 itextsharp 将我的 asp.net 页面转换为 pdf。在按钮上单击我正在编写以下代码：

```
 Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.pdf");
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    //GridView1.AllowPaging = false;
    GridView1.DataBind();
    GridView1.RenderControl(hw);
    StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 10f, 0f);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
    pdfDoc.Open();
    htmlparser.Parse(sr);
    pdfDoc.Close();
    Response.Write(pdfDoc);
    Response.End(); 
```

但我收到错误：“文档没有页面”请帮助我摆脱这个错误并生成 pdf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T05:16:39.950

为此需要采取两个步骤：

1) 检查 ITextSharp dll 是否为最新版本

和

2) 使用链接按钮而不是按钮，并且不要使用超链接，因为它会导致超链接按钮出错。

# matlab - Matlab中的矩阵运算

> ID：12154687
> 
> 赞同：2
> 
> 时间：2012-08-28T07:31:45.330
> 
> 标签：matlab, vector, matrix

我在 Matlab 中有一个*AxB*矩阵和两个二进制列向量*Ax1*和*Bx1*。如何选择对应于*Ax1*向量*1*的矩阵行？显然，我必须对另一个向量的列进行相同的操作。

 *提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:44:31.650

非常简单，例如：

```
 AxB = [1  2   3   4;
        5  6   7   8;
        9  10  11  12];
 Ax1 = [0 1 1];
 Bx1 = [1 0 1 0];

 A_rows = AxB(Ax1 == 1,:);
 B_cols = AxB(:,Bx1 == 1); 
```

结果：

```
A_rows:

     5     6     7     8
     9    10    11    12

B_cols:  

     1     3
     5     7
     9    11 
```*

# ruby-on-rails-3 - 如何删除设计 oAuth Twitter

> ID：12154688
> 
> 赞同：0
> 
> 时间：2012-08-28T07:31:51.633
> 
> 标签：ruby-on-rails-3, devise, twitter-oauth

我正在尝试删除 Oauth twitter（我们保留 facebook）。我已经删除了所有引用，但我仍然从设计注册控制器中收到此错误（我基本上使用教程来删除或注释掉所有 twitter 特定代码：

```
No route matches {:controller=>"users/omniauth_callbacks", :action=>"passthru", :provider=>:twitter} 
```

我怀疑在 oauth-twitter gem 中安装了一些我无法轻松删除的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:08:37.743

您在 routes.rb 中有以下路线吗？

```
devise_for :users, controllers: {omniauth_callbacks: "omniauth_callbacks"} 
```

# php - foreach 和 simplexml

> ID：12154689
> 
> 赞同：2
> 
> 时间：2012-08-28T07:31:54.067
> 
> 标签：php, xml, simplexml

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?> 
<documentElement>
    <rows>
        <row>
            <column>1</column>
            <column>David</column>
            <column>Johnson</column>
        </row>
        <row>
            <column>2</column>
            <column>Jack</column>
            <column>Nixon</column>
        </row>
    </rows>
</documentElement> 
```

我想遍历行并将它们添加到数组中。我将它传递给`simplexml`然后循环遍历这些对象，但不能这样做：

```
$xml->rows
$xml->rows->row
$xml->row
$xml->column 
```

我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:42:29.220

这实际上是更基本的示例之一：

```
$sxml = simplexml_load_string($xml);

foreach($sxml->rows->row as $name => $row)
{
    echo $name, ': ', var_dump($row);
} 
```

这将为您提供以下输出：

```
row: object(SimpleXMLElement)#3 (1) {
  ["column"]=>
  array(3) {
    [0]=>
    string(1) "1"
    [1]=>
    string(5) "David"
    [2]=>
    string(7) "Johnson"
  }
}
row: object(SimpleXMLElement)#5 (1) {
  ["column"]=>
  array(3) {
    [0]=>
    string(1) "2"
    [1]=>
    string(4) "Jack"
    [2]=>
    string(5) "Nixon"
  } 
```

您可以在这里找到在线演示：http: [//codepad.org/CYyQhvnM](http://codepad.org/CYyQhvnM)

您实际上应该看一下手册中的简单示例部分，它有一些非常有见地的示例，这些示例比我的解释更深入：

*   [基本的 SimpleXML 用法](http://php.net/manual/en/simplexml.examples-basic.php)

无论如何，我希望答案是有帮助的。相关问题是：

*   [如何在 PHP 和 XML 中使用 foreach (simplexml)](https://stackoverflow.com/questions/4637617/how-to-use-foreach-with-php-xml-simplexml)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T07:45:08.907

如果您更习惯于数组，您还可以将简单的 xml 翻转为数组：s

```
<?php
$xml = simplexml_load_file('./your.xml');
$json = json_encode($xml);
$array = json_decode($json,TRUE);
print_r($array);
/**
 *Array
(
    [rows] => Array
        (
            [row] => Array
                (
                    [0] => Array
                        (
                            [column] => Array
                                (
                                    [0] => 1
                                    [1] => David
                                    [2] => Johnson
                                )

                        )

                    [1] => Array
                        (
                            [column] => Array
                                (
                                    [0] => 2
                                    [1] => Jack
                                    [2] => Nixon
                                )

                        )

                )

        )

)
 */

foreach($array['rows']['row'] as $row){
    echo 'Id:'.$row['column'][0],
         ' Firstname:'.$row['column'][1],
         ' Lastname:'.$row['column'][2].'<br />'.PHP_EOL;
}

/*Result
Id:1 Firstname:David Lastname:Johnson<br />
Id:2 Firstname:Jack Lastname:Nixon<br />
*/
?> 
```

或者 hakra 的一个更干净的例子

```
<?php
$xml = simplexml_load_file('./test.xml');
$rows = json_decode(json_encode(iterator_to_array($xml->rows->row, 0)), 1);
print_r($rows);
/**
 *
Array
(
    [0] => Array
        (
            [column] => Array
                (
                    [0] => 1
                    [1] => David
                    [2] => Johnson
                )

        )

    [1] => Array
        (
            [column] => Array
                (
                    [0] => 2
                    [1] => Jack
                    [2] => Nixon
                )

        )

)
 */

foreach($rows as $row){
    echo 'Id:'.$row['column'][0],
         ' Firstname:'.$row['column'][1],
         ' Lastname:'.$row['column'][2].'<br />'.PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:38:08.040

尝试`$xml->rows[0]->row[0]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:47:32.180

如果您只是想遍历行：

```
<?php

$xmlstr = <<<XML
<?xml version="1.0" encoding="utf-8" ?> 
<documentElement>
    <rows>
        <row>
            <column>1</column>
            <column>David</column>
            <column>Johnson</column>
        </row>
        <row>
            <column>2</column>
            <column>Jack</column>
            <column>Nixon</column>
        </row> 
    </rows>
</documentElement>
XML;

$element = new SimpleXMLElement($xmlstr);

foreach($element->rows->row as $row) {

    foreach($row as $column) {
        echo "{$column}<br>";                
    }

    echo "<hr>";
}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T07:48:31.620

```
$sxml = simplexml_load_string($xml);
$newArray = array();
foreach($sxml->rows as $num => $row){
    foreach($row as $el){
        (array)$newArray[] = (array)$el;
    }
}

var_dump($newArray); 
```

# c - 需要帮助优化函数调用

> ID：12154693
> 
> 赞同：3
> 
> 时间：2012-08-28T07:32:10.430
> 
> 标签：c, performance, optimization, function-pointers, compiler-optimization

我正在尝试实现图像处理功能。这里是：

```
typedef void (*AgFilter)(int*, int*, int*, float*);

static void filter(AndroidBitmapInfo* info, void* pixels, AgFilter func, void* params){

    for(y = 0; y < height; y++){
        for(x = 0; x < width; x++){
            //initizalie r, g, b

            func(&r, &g, &b, params); //here is the problem
        }
    }
} 
```

我将这个函数传递为`func`：

```
static inline void brightness(int *r, int *g, int *b, float* param){
    float add = param[0];

    *r += add;
    *g += add;
    *b += add;
} 
```

问题是它的工作速度非常慢。嗯，我可以理解。**但是**，如果不是通过引用传递函数，而是直接在`filter`（`func`调用的入口）内编写函数，它的工作速度会快得多。哪里有问题？

PS注意不是`c++`

**编辑**

这个工作很快：

```
static void filter(AndroidBitmapInfo* info, void* pixels, int add){

    for(y = 0; y < height; y++){
        for(x = 0; x < width; x++){
            //initizalie r, g, b
            r += add;
            g += add;
            b += add;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:39:11.710

我认为问题在于您将函数作为指针传递。因为*亮度（）*没有被编译器内联。

*当您将亮度（）*的定义复制到*过滤器（）*函数中时，您会得到您想要的结果 - 您内联该函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T07:45:29.513

调用函数需要时间。通常，您不会注意到，但您会调用该函数一百万次（对于全高清 1920x1080 图像，大约需要两百万次）。现代相机创建 16 兆像素图像。如果每次调用耗时 1 us，则调用函数（不实际执行主体）的累计时间为 16*秒*。

你怎样才能让它更快？一些建议：

1.  不要传递四个参数，而是使用结构：

    ```
     struct data { int r,g,b; float* param; } 
    ```

    分配一次并重用它。现在您可以`func`使用单个参数进行调用。

2.  内存布局可能是个问题。`param`在记忆中的任何地方。将其复制到`struct data`：

    ```
     struct data { int r,g,b, add; } 
    ```

    原因是它`param`在内存中的任何地方，这意味着它可能在不同的缓存行中。如果您可以将所有数据放入单个 64 字节结构中，那么所有数据都将放入单个高速缓存行中，这可以极大地提高性能。

    但可能不是你的情况，因为你总是访问`param[0]`. 当您以随机方式访问数组时，这更成问题。

3.  交换移位和位掩码操作：

    ```
     r = (int) ((line[x] & >> 16 ) & 0xFF); 
    ```

    可以稍微提升一下，因为现在所有三种颜色都将被屏蔽，`0xFF`并且允许编译器将常量移动一次到 CPU 寄存器。

4.  调用函数时，需要“保存/恢复”所有 CPU 寄存器。这需要时间。当函数被内联时，编译器知道哪些 CPU 寄存器被丢弃并可以相应地优化。

    实际上，CPU 寄存器并没有被保存（至少我很久没看到了）。现代编译器只是假设在调用函数之后，它们都已被更改。

5.  请注意，这`inline`没有任何效果，因为您通过引用传递函数而不是直接调用它。

6.  使用线程。这很容易并行化：在 1/N 的数据上运行函数 N 次（每个 CPU 内核一次）。这将为您提供大约 N 倍的性能提升。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:41:46.097

到目前为止，您可以做出的最大改进是避免为每个像素调用一次函数。`brightness`在函数内移动循环很简单。

```
static inline void brightness(int *r, int *g, int *b, float* param){
    float add = param[0];

    for(y = 0; y < height; y++)
        for(x = 0; x < width; x++){
            //initialize r, g, b
            *r += add;
            *g += add;
            *b += add;
        }
} 
```

现在，我知道你不想在你可能编写的每个不同的过滤器函数中复制循环迭代代码，所以这是使用宏可以真正发挥作用的情况之一。尝试这样的事情（未经测试）。

```
#define FOR_EACH_PIXEL for(y = 0; y < height; y++) \
                       for(x = 0; x < width;  x++)

static inline void brightness(int *r, int *g, int *b, float* param){
    float add = param[0];

    FOR_EACH_PIXEL 
    {
            //initialize r, g, b
            *r += add;
            *g += add;
            *b += add;
    }

} 
```

# android - 如何构建自定义的摄像机应用程序？

> ID：12154694
> 
> 赞同：2
> 
> 时间：2012-08-28T07:32:21.163
> 
> 标签：android, camera, mediarecorder, surfaceholder

我正在尝试开发自定义摄像机录像机。当我的设备在 Activity 的 beginRecording() 中执行 start MediaRecorder 方法时，应用程序崩溃。我不知道出了什么问题，因为我遵循[Google API Guide](http://developer.android.com/guide/topics/media/camera.html)。我的设备使用 Android 2.3 或更高版本。在我的 Nexus S 4.1.1 中执行正常，但在我的 Xperia 2.3.3 中没有运行，显示此跟踪。

我的代码是：

```
private static final String TAG = "RecordVideo";
private MediaRecorder mRecorder = null;
private Camera mCamera = null;
private String OUTPUT_FILE;
private VideoView mVideoView = null;
private Button mStartBtn = null;
private SurfaceHolder mHolder;
private boolean isRecording = false;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if (checkCameraHardware(this)) {
        mStartBtn = (Button) findViewById(R.id.beginBtn);

        mVideoView = (VideoView)this.findViewById(R.id.videoView);

     // Create our Preview view and set it as the content of our activity.
        mHolder = mVideoView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }
}

/** Check if this device has a camera */
private boolean checkCameraHardware(Context context) {
    if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
        // this device has a camera
        return true;
    } else {
        // no camera on this device
        return false;
    }
}

public void doClick(View view) {
    switch(view.getId()) {
    case R.id.beginBtn:
        beginRecording();
        break;
    case R.id.stopBtn:
        stopRecording();
        break;
    case R.id.playRecordingBtn:
        playRecording();
        break;
    case R.id.stopPlayingRecordingBtn:
        stopPlayingRecording();
        break;
    }
}

// Once we have a surface, we can start the previewing
// Once we're previewing with Camera, we can setup the
// MediaRecorder
@Override
public void surfaceCreated(SurfaceHolder holder) {
    Log.v(TAG, "surface created");
    mStartBtn.setEnabled(true);
    try {
        mCamera.setPreviewDisplay(holder);
        mCamera.startPreview();
        prepareForRecording(holder);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    Log.v(TAG, "Surface changed: width x Height = " + width + "x" + height);
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    Log.v(TAG, "surface destroyed");
}

private void beginRecording() {
    mRecorder.setOnInfoListener(this);
    mRecorder.setOnErrorListener(this);
    mRecorder.start();
    isRecording = true;
}

private void stopRecording() {
    Log.v(TAG, "stop recording");
    if (mRecorder != null) {
        mRecorder.setOnInfoListener(null);
        mRecorder.setOnErrorListener(null);
        mRecorder.stop();
        mRecorder.reset();   // clear recorder configuration
        mRecorder.release(); // release the recorder object
        mRecorder = null;
        mCamera.lock();
    }
    mCamera.release();
    mCamera = null;
    isRecording = false;
}

private void playRecording() {
    MediaController mc = new MediaController(this);
    mVideoView.setMediaController(mc);
    mVideoView.setVideoPath(OUTPUT_FILE);
    mVideoView.start();
}

private void stopPlayingRecording() {
    mVideoView.stopPlayback();
}

@Override
protected void onResume() {
    Log.v(TAG, "resuming");
    mCamera = Camera.open();
    Parameters camParams = mCamera.getParameters();
    //camera.setDisplayOrientation(90);
    // We could set other parameters in camParams then:
    // camera.setParameters(camParams);

    super.onResume();
}

@Override
protected void onPause() {
    Log.v(TAG, "pausing");
    if (mRecorder != null) {
        mRecorder.release();
        mRecorder = null;
    }
    if(mCamera != null) {
        try {
            mCamera.reconnect();  // this also does a lock()
            mCamera.release();
            mCamera = null;
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    super.onPause();
}

@Override
protected void onDestroy() {
    Log.v(TAG, "destroying");
    super.onDestroy();
}

private void prepareForRecording(SurfaceHolder holder) {
    if(mRecorder != null) {
        mRecorder.reset();
    }

    try {
        mRecorder = new MediaRecorder();

        // Step 1: Unlock and set camera to MediaRecorder
        mCamera.unlock();
        mRecorder.setCamera(mCamera);  // Must be done while MediaRecorder is idle
    // mCamera.lock();

        // Step 2: Set sources
        mRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
        mRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

        String fileExtension = ".mp4";

        // Step 4: Set output file
        OUTPUT_FILE = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + "/videooutput" + fileExtension;
        File outFile = new File(OUTPUT_FILE);
        if(outFile.exists()) {
            outFile.delete();
        }
        mRecorder.setOutputFile(OUTPUT_FILE);

        // Step 5: Set the preview output
        mRecorder.setPreviewDisplay(holder.getSurface());

        //            mRecorder.setMaxDuration(30000); // limit to 30 seconds
                                        // Must implement onInfoListener

        // Step 6: Prepare configured MediaRecorder
        mRecorder.prepare();

    } catch (IllegalStateException e) {
        Log.d(TAG, "IllegalStateException preparing MediaRecorder: " + e.getMessage());
        e.printStackTrace();
    } catch(Exception e) {
        Log.e(TAG, e.toString());
        e.printStackTrace();
    }
}

@Override
public void onInfo(MediaRecorder mediaRecorder, int what, int extra) {
    if(what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED) {
        Log.i(TAG, "got a recording event");
        mCamera.stopPreview();
        Toast.makeText(this, "Recording limit has been reached. Stopping the recording", Toast.LENGTH_SHORT).show();
        isRecording = false;
    }
}

@Override
public void onError(MediaRecorder mr, int what, int extra) {
    Log.e(TAG, "got a recording error");
    mCamera.stopPreview();
    Toast.makeText(this, "Recording error has occurred. Stopping the recording", Toast.LENGTH_SHORT).show();
    isRecording = false;
} 
```

跟踪错误是：

```
 V/RecordVideo(7427): resuming
 V/RecordVideo(7427): surface created
 I/MediaRecorderJNI(7427): prepare: surface=0x2b8ac8 (identity=2136)
 V/RecordVideo(7427): Surface changed: width x Height = 600x375
 E/MediaRecorder(7427): start failed: -2147483648
 D/AndroidRuntime(7427): Shutting down VM
 W/dalvikvm(7427): threadid=1: thread exiting with uncaught exception (group=0x2aac8578)
 E/AndroidRuntime(7427): FATAL EXCEPTION: main
 E/AndroidRuntime(7427): java.lang.IllegalStateException: Could not execute method of the activity
 E/AndroidRuntime(7427):    at android.view.View$1.onClick(View.java:2168)
 E/AndroidRuntime(7427):    at android.view.View.performClick(View.java:2552)
 E/AndroidRuntime(7427):    at android.view.View$PerformClick.run(View.java:9229)
 E/AndroidRuntime(7427):    at android.os.Handler.handleCallback(Handler.java:587)
 E/AndroidRuntime(7427):    at android.os.Handler.dispatchMessage(Handler.java:92)
 E/AndroidRuntime(7427):    at android.os.Looper.loop(Looper.java:130)
 E/AndroidRuntime(7427):    at android.app.ActivityThread.main(ActivityThread.java:3701)
 E/AndroidRuntime(7427):    at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(7427):    at java.lang.reflect.Method.invoke(Method.java:507)
 E/AndroidRuntime(7427):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
 E/AndroidRuntime(7427):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
 E/AndroidRuntime(7427):    at dalvik.system.NativeStart.main(Native Method)
 E/AndroidRuntime(7427): Caused by: java.lang.reflect.InvocationTargetException
 E/AndroidRuntime(7427):    at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(7427):    at java.lang.reflect.Method.invoke(Method.java:507)
 E/AndroidRuntime(7427):    at android.view.View$1.onClick(View.java:2163)
 E/AndroidRuntime(7427):    ... 11 more
 E/AndroidRuntime(7427): Caused by: java.lang.RuntimeException: start failed.
 E/AndroidRuntime(7427):    at android.media.MediaRecorder.start(Native Method)
 E/AndroidRuntime(7427):    at com.androidbook.record.video.MainActivity.beginRecording(MainActivity.java:124)
 E/AndroidRuntime(7427):    at com.androidbook.record.video.MainActivity.doClick(MainActivity.java:80)
 E/AndroidRuntime(7427):    ... 14 more 
```

更新：

我已经修复了这个错误。主要代码是：

```
 private boolean initCamera() {
    try {
        mCamera  = Camera.open();
        Camera.Parameters camParams = mCamera.getParameters();
        List<Size> a = camParams.getSupportedPreviewSizes();

        for (int i = 0; i < a.size(); i++) {
            if (width_video < a.get(i).width) {
                width_video = a.get(i).width;
                height_video = a.get(i).height;
            }
        }

        mCamera.lock();
        //mCamera.setDisplayOrientation(90);
        // Could also set other parameters here and apply using:
        //mCamera.setParameters(camParams);

        mHolder = mVideoView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }
    catch(RuntimeException re) {
        Log.v(TAG, "Could not initialize the Camera");
        re.printStackTrace();
        return false;
    }
    return true;
}

private void initRecorder() {

    if(mRecorder != null) return;

    mOutputFileName = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM) +
               "/videooutput" + ".mp4";

    File outFile = new File(mOutputFileName);
    if(outFile.exists()) {
        outFile.delete();
    }

    try {
        mCamera.stopPreview();
        mCamera.unlock();
        mRecorder = new MediaRecorder();
        mRecorder.setCamera(mCamera);

        mRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        if (Build.VERSION_CODES.GINGERBREAD >= Build.VERSION.SDK_INT) {
            mRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
        } else {
            mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
            mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            mRecorder.setVideoSize(width_video, height_video);
            mRecorder.setVideoFrameRate(30);
        }

        mRecorder.setMaxDuration(21000); // limit to 30 seconds
        mRecorder.setPreviewDisplay(mHolder.getSurface());
        mRecorder.setOutputFile(mOutputFileName);

        mRecorder.prepare();
        Log.v(TAG, "MediaRecorder initialized");

    }
    catch(Exception e) {
        Log.v(TAG, "MediaRecorder failed to initialize");
        e.printStackTrace();

    }
}

private void beginRecording() {
    mRecorder.setOnInfoListener(this);
    mRecorder.setOnErrorListener(this);
    mRecorder.start();
    mRecordingMsg.setText("RECORDING");
    mStartBtn.setEnabled(false);
    mStopBtn.setEnabled(true);
} 
```

但现在，我还有其他问题。当我在 2.2 和 2.3.3 版本的设备中安装应用程序时，因为在此版本中不支持以下行： mRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH)); 如果我更改代码：CamcorderProfile.QUALITY_LOW，则设备以最低质量记录。

我必须更改 2.2 和 2.3 版本中的代码：

```
if (Build.VERSION_CODES.GINGERBREAD >= Build.VERSION.SDK_INT) {
    mRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
} else {
    Recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    mRecorder.setVideoSize(width_video, height_video);
    mRecorder.setVideoFrameRate(30);
} 
```

为什么我必须这样做，当在 Android API 中，setProfile() 方法在 2.2 中可用并且设备应该以更高的质量记录可以支持？

更新2：

在 initCamera 方法中，我改变了：

```
 Camera.Parameters camParams = mCamera.getParameters();
 camParams.set( "cam_mode", 1 );     
 mCamera.setParameters( camParams ); 
```

在 2.3 版本的设备中，我可以使用该行来检测视频配置的分辨率： mRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH)); 但在某些设备（如 HTC Desire）中，不支持此配置。

```
 mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
 mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
 mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
 mRecorder.setVideoSize(width_video, height_video);
 mRecorder.setVideoFrameRate(30); 
```

对于 2.2 版本，可以接受 AAC 音频编码器吗？因为我的 HTC Legent 不支持这个音频编码器？UPDATE3：Android 2.2 版本不支持 ACC 音频编码器。

# android - 为什么iOS模拟器比安卓模拟器快得多？

> ID：12154699
> 
> 赞同：6
> 
> 时间：2012-08-28T07:32:56.063
> 
> 标签：android, ios, emulation

我知道这可能会被关闭甚至被否决，但无论如何我都想试一试。为什么iOS的模拟器比Android的快？我在性能较差的 Mac 上使用 iOS 模拟器，它比运行在比 Mac 更高规格的笔记本电脑上的 Android 模拟器流畅得多。

我在某处读到，这是因为 Android 模拟 ARM，而 iOS 在 OS X 中本机运行它。那么，为什么 Android 模拟器不只是像 iOS 一样直接运行呢？我知道没有人能真正回答这个问题，但仍然。我希望有人能对这个相当令人沮丧的问题有所了解。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T07:34:58.493

因为iOS“模拟器”不是模拟器……它是模拟器。

从[这个答案](https://stackoverflow.com/questions/4544588/difference-between-iphone-simulator-and-android-emulator/4544605#4544605)：

> 模拟器和模拟器之间的区别在于模拟器模仿了实际设备上的软件和硬件环境。另一方面，模拟器只模拟软件环境；否则，他们可以访问主机系统的所有硬件资源，例如磁盘空间、内存和处理器速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:37:52.237

要获得更快的模拟器，请查看此链接和有关 Intel VT 的部分：http:
[//developer.android.com/tools/devices/emulator.html](http://developer.android.com/tools/devices/emulator.html)
您还可以使用 GPU 加速（配置图形加速部分）或此博客文章（其中还回答了您的问题并解释了 Android 环境中 x86 和 ARM“仿真”之间的区别）：
[http ://android-developers.blogspot.cz/2012/04/faster-emulator-with-better-hardware.html](http://android-developers.blogspot.cz/2012/04/faster-emulator-with-better-hardware.html)

# caching - OpenLayers 缓存

> ID：12154702
> 
> 赞同：0
> 
> 时间：2012-08-28T07:33:39.480
> 
> 标签：caching, openlayers

我有自己的数据，我想创建与 OpenLayers 一起使用的缓存图像，我希望格式为 WWJ 格式和 256x256x 大小，我不想创建图像，我只想要一个循环的程序分层并从我的服务器请求所有图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T22:09:26.557

你使用地图服务器还是地理服务器？如果你这样做了，你可以考虑这个：**[TileCache](http://tilecache.org/)**。它将自动为您的图层创建图块。

这里是**[TileCache 的教程](http://tilecache.org/docs/README.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:51:23.957

我会使用`Layer.TileCache`这里记录的对象：

[http://dev.openlayers.org/apidocs/files/OpenLayers/Layer/TileCache-js.html](http://dev.openlayers.org/apidocs/files/OpenLayers/Layer/TileCache-js.html)

这用于检索您自己的预渲染图块，您可以指定文件扩展名、大小和 url。

# delphi - 查找所选单元格是否在范围内

> ID：12154705
> 
> 赞同：0
> 
> 时间：2012-08-28T07:33:43.673
> 
> 标签：delphi

因此，我有一个 StringGrid，例如，我想找出当前选定的单元格是否在 1,1 和 2,2 之间，如果是，请将值 i 更改为 1。这可能吗？我也想知道是否可以为单个单元格执行此操作。因此，假设所选单元格为 0,0，它将执行 showmessage('error'); 这一切都将通过单击按钮激活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:43:57.817

在以下示例中`IsCellInRange`，如果使用数据类型的坐标指定的单元格[`TGridCoord`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Grids.TGridCoord)位于数据类型指定的范围内，则函数返回 True，否则返回[`TGridRect`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Grids.TGridRect)False：

```
uses
  Math;

function IsCellInRange(const Cell: TGridCoord; const Range: TGridRect): Boolean;
begin
  Result := InRange(Cell.X, Range.Left, Range.Right) and
    InRange(Cell.Y, Range.Top, Range.Bottom);
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  Cell: TGridCoord;
  Range: TGridRect;
begin
  Cell.X := StringGrid1.Col;
  Cell.Y := StringGrid1.Row;
  Range.Left := 1;
  Range.Top := 1;
  Range.Right := 2;
  Range.Bottom := 2;

  if IsCellInRange(Cell, Range) then
    StringGrid1.Cells[Cell.X, Cell.Y] := '1'
  else
    ShowMessage('Error, cell is not in range!');
end; 
```

# c++ - MFC 程序中的堆损坏

> ID：12154706
> 
> 赞同：0
> 
> 时间：2012-08-28T07:34:00.163
> 
> 标签：c++, mfc, heap-corruption

我在程序中遇到堆损坏问题。在程序中，我正在读取一个数据块并对其执行 FFT 和 IFFT。我正在为 2 个图像（主从图像）做这件事。完全相同的代码适用于主服务器，但当我尝试删除从属缓冲区时，显示从属文件的堆损坏。

fcomplex 定义为：

```
typedef struct {float real, imag;}fcomplex; 
```

附上相关部分代码片段：完整代码：[http ://sharetext.org/7xXe](http://sharetext.org/7xXe)

如果我不为从映像调用 fft 和 ifft 函数，则不会发生错误。（不过对主人来说一切都很好）

为了调试错误，我安装了应用程序验证程序，但我无法解码日志文件。它在这里：[http](http://sharetext.org/Y2ji) ://sharetext.org/Y2ji （XML文件复制粘贴）

视觉工作室给出的错误是：检测到堆损坏：在 0x062C0040 的正常块 (#194456) 之后

```
CCoarseFun::fcomplex * slave_bfr;
CCoarseFun::fcomplex * slave_col;

slave_bfr = Pcoarse.init_1Dcmplx(SIZE*s_cols); 
slave_col = Pcoarse.init_1Dcmplx(SIZE);

Pcoarse.cfft1d_(&SIZE,slave_col,&FFTdir); // This function causes a problem
Pcoarse.complex_mult_col(filter, slave_col, SIZE, slave_col)
Pcoarse.cfft1d_(&SIZE,slave_col,&FFTdir); // As does this one

// delete memory related to slave
delete [] slave_bfr;    // Heap corruption here
delete [] slave_col; 
```

令我困惑的是代码非常简单，而且它仅对主文件 100% 有效。为什么它会为奴隶崩溃？

有人可以指导我找到一个解决方案，或者一个关于如何使用应用程序验证器的教程吗？

谢谢， 肖纳克

编辑：使用 Win7 x64 - VS2010

编辑 2：init_1Dcmplx 的定义

```
CCoarseFun::fcomplex* CCoarseFun::init_1Dcmplx(int n)
{
  fcomplex *a;
  a=new fcomplex[n];
  for(int i=0;i<n;i++)
  {
    a[i].real=float(0.0);
    a[i].imag=float(0.0);
  }
  return a;
} 
```

EDIT3：cfft1D_ 的代码：[http ://sharetext.org/hzIg](http://sharetext.org/hzIg)

EDIT4：mem.delfloat() 的代码

```
void CMemAlloc::del_float(float *a)
{
  if (a!=NULL)
  {
    delete[] a;
    a=NULL;
  }
  else
  {
    return;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:30:33.807

mem_float() 函数不正确。看起来它在删除后将指针设置为 NULL，但它只在指针的副本上工作，所以调用者的副本仍然指向已删除的内存块。

你可以做

```
delete [] cf;
cf = NULL; 
```

您有几行如下所示：

```
four1(cf-1,nn,isign); 
```

我认为这是在数组开始之前访问内存。

除此之外，内部的索引`four1()`非常复杂 - 您必须使用调试器逐步完成它以检查边缘情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:22:26.537

首先，了解堆损坏错误告诉您的内容很重要。当您在 Visual Studio 中运行调试版本时，它使用具有调试堆的运行时库的调试版本。每当您分配一些内存时`new`，它的两侧都会有一些额外的保护字节。当您使用`delete`它时，调试堆会检查这些保护字节是否完好无损，如果没有，则会发出此警告。

假设`Pcoarse.init_1Dcmplx()`在堆上分配内存，那么对它的两次调用很可能会一个接一个地分配内存：

```
XXXXXX - guard bytes
slave_bfr
XYXYXY - these are the guard bytes that are probably being corrupted
slave_cols
XXXXXX 
```

您在 上执行操作`Pcoarse.cfft1d_()`，`slave_cols`但在删除时出现堆损坏错误`slave_bfr`。这表明它`cfft1d_()`在开始之前覆盖内存，`slave_cols`从而破坏`slave_bfr`.

因此，我会查看您的代码以`cfft1d_()`查找可能有负数组索引的地方，因为这可能会导致内存`slave_bfr`被踩踏。

还要检查一些[SO 答案](https://stackoverflow.com/questions/1010106/how-to-debug-heap-corruption-errors)，其中包含有关如何充分利用调试堆的有用提示，特别[是](https://stackoverflow.com/a/8858707/188414)有关如何启用更密集的内存检查的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:55:15.613

"Heap corruption Detected: after normal block (#194456) at 0x062C0040" says that you allocated a block, got the block #194456 with address 0x062C0040 and you wrote more memory bytes than you allocated. So you have a classical buffer overflow. You should consider replacing pointers with STL containers. In your case I'ld prefer using `std::vector` over a raw float array allocated with `new float[]`. The STL containers can help you detect writing beyond boundaries immediately at the wrong access, not only after deleting the memory block.

# mysql - MySQL选择表中存在月份的最后一天

> ID：12154707
> 
> 赞同：3
> 
> 时间：2012-08-28T07:34:04.533
> 
> 标签：mysql, sql, date, select

我正在尝试从日期在月底的 mysql 获取数据。
例子：

```
id date       name
===================
1  2002-02-23 aaaa
2  2002-02-23 bbbb
3  2002-03-01 cccc 
```

如您所见，由于各种原因，2 月的最后一次输入仅在 23 日。
有没有办法让我只能选择数据库中**存在**的最后一个月的日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:44:17.607

@Morgan 尝试这种方式，我认为它会给你准确的结果。

`SELECT * FROM table WHERE date in (select DISTINCT max(date) from table GROUP BY MONTH(date ))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T09:34:45.333

像这样试试

```
SELECT * FROM my_table WHERE date in (select max(date) from my_table) 
```

它将显示最大日期...用您的话来说，日期是在月底。您可以添加“GROUPBy”以获得更好的结果

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T07:41:44.920

这是一个[SQL 小提琴](http://www.sqlfiddle.com/#!2/6612a/1)

尝试这个：

```
SELECT MAX(date)
FROM yourTable
GROUP BY YEAR(date), MONTH(date) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:38:22.203

您需要通过将记录分组`self join`来使用：`derived table``year-month`

```
SELECT a.*
FROM table_name a
     INNER JOIN (
            SELECT MAX(`date`) AS `date`
            FROM table_name
            GROUP BY DATE_FORMAT(`date`, '%Y%m')
           ) b
        ON a.`date` = b.`date`; 
```

[**SQLFIDDLE 演示**](http://sqlfiddle.com/#!2/1b46c/5)

查询仅获取月份的最后日期：

```
SELECT MAX(`date`) AS `date`
FROM table_name
GROUP BY DATE_FORMAT(`date`, '%Y%m'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-09T08:50:36.957

这是我的代码在我的情况下可以正常工作

```
SELECT * FROM ProjectTimeSheet WHERE EndDate in (select DISTINCT max(EndDate) from 
ProjectTimeSheet GROUP BY MONTH(EndDate )) 
```

我的表是“ProjectTimeSheet”，其中有一个名为 EndDate 的字段。此查询完全按照您想要的方式检索。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-28T07:49:57.513

您可以使用此查询从表中选择上个月的日期：

```
select max(`Date`) from t group by DATE_FORMAT(`Date`,'%Y%m') 
```

# android - 如何在我的应用程序中将我的个人键盘设置为标准输入

> ID：12154710
> 
> 赞同：8
> 
> 时间：2012-08-28T07:34:09.750
> 
> 标签：android, android-layout, android-intent, android-widget

我创建了一个小键盘来替换标准的 Android 键盘。我应该怎么做才能将我的键盘设置为我的应用程序中的标准输入？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T08:29:15.067

首先，您需要创建一个键盘布局...您必须对其进行自定义..然后将该键盘包含在您的布局中，您需要在其中显示您的个人键盘..像这样

`<include android:id="@+id/Kinclude" android:layout_width="wrap_content" android:layout_height="wrap_content" layout="@layout/keypad" android:visibility="invisible" />`

并为您的edittext编写一个单击事件，并在您单击edittext时显示此键盘...。

谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:16:24.933

我想这可能对你有帮助。您可以隐藏系统键盘使用的类 InputMethodManager。然后在你的 EditText 上制作 onFocusListener ，如果你有焦点调用类自己的键盘。

# visual-studio-2010 - 将 VS 2008 项目转换为 VS 2010 后出现 aspnet_merge 错误

> ID：12154727
> 
> 赞同：1
> 
> 时间：2012-08-28T07:35:26.063
> 
> 标签：visual-studio-2010, visual-studio-2008, dll, .net-assembly, aspnet-merge

我收到一个错误

```
"aspnet_merge: error 1023: The assemblies cannot be merged because some assemblies have inconsistent attributes: System.Runtime.CompilerServices.ExtensionAttribute. Use -a option to force merge. Use -allowattrs to specify the attributes to skip when checking for consistency." 
```

合并程序集时。

我之前所做的，只需在我的 VS 2010 中打开 VS 2008 解决方案而不更改 .Net Framework（当 VS 2010 提示我将 .Net Framework 更改为 4.0 时选择否）并`**missing compiler required member System.Runtime. CompilerServices. ExtensionAttribute..ctor**`通过将 NewtonSoft dll 版本从 2.0 更改为 3.5 来解决此错误。

现在成功发布我的项目后，我必须合并 dll，但我遇到了上述错误。我已经检查了不同版本的 aspnet_merge (3.5/4.0)，但得到了同样的错误。

请让我知道为此需要做些什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-09T19:12:57.323

这是因为该项目没有引用`Microsoft.CSharp`. 一旦我添加了对该程序集的引用，它就编译得很好。

如果问题仍然存在，请尝试重新安装`JSON.Net`.

```
PM> Install-Package Newtonsoft.Json -Version x.x.x.x 
```

# java - JLS 是否完全涉及方法覆盖和泛型？

> ID：12154731
> 
> 赞同：7
> 
> 时间：2012-08-28T07:35:56.720
> 
> 标签：java, generics, jls

因此，我试图编写一种方法来回答我之前的一个问题：[如何确定任意 java.lang.Method 是否覆盖另一个？](https://stackoverflow.com/questions/12133817/)为此，我正在阅读 JLS，在一个案例中似乎缺少一些部分。

假设您有以下课程：

```
public class A<T> {
    public void foo(T param){};
}

public class B extends A<String> {
    public void foo(String param){};
} 
```

在这种情况下，很明显`B.foo`overrides `A.foo`，但是我不明白这种情况如何符合规范。

关于方法覆盖，[JLS §8.4.8.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.1)指出：

> 在类 C 中声明的实例方法 m1 覆盖在类 A 中声明的另一个实例方法 m2，前提是满足以下所有条件：
> 
> 1.  C 是 A 的子类。
>     
>     
> 2.  m1 的签名是 m2 签名的子签名（第 8.4.2 节）。
>     
>     
> 3.  任何一个：
>     
>     
>     *   m2 是公共的、受保护的或在与 C 相同的包中声明为具有默认访问权限，或
>     *   m1 覆盖方法 m3（m3 不同于 m1，m3 不同于 m2），这样 m3 会覆盖 m2。

显然第 1 点和第 3 点在我们的案例中得到满足。让我们在 JLS 中更深入地了解子签名的含义。[JLS §8.4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)说：

> 如果两个方法具有相同的名称和参数类型，则它们具有相同的签名。
> 
> 如果满足以下所有条件，则两个方法或构造函数声明 M 和 N 具有相同的参数类型：
> 
> 1.  它们具有相同数量的形式参数（可能为零）
>     
>     
> 2.  它们具有相同数量的类型参数（可能为零）
>     
>     
> 3.  令 A1, ..., An 为 M 的类型参数，令 B1, ..., Bn 为 N 的类型参数。将 N 的类型中出现的 Bi 重命名为 Ai 后，相应类型变量的边界为相同，并且M和N的形参类型相同。

在我们的例子中，第 1 点显然是正确的（两者都有 1 个参数）。

第 2 点有点混乱（这就是我不确定规范的确切含义的地方）：这两种方法都没有声明自己的类型参数，而是`A.foo`使用`T`which 是对类进行参数化的类型变量。

所以我的第一个问题是：在这种情况下，**在类中声明的类型变量是否计数？**

好的，现在让我们假设这`T`不算数，因此第 2 点是错误的（在这种情况下，我什至不知道如何应用第 3 点）。我们的两个方法没有*相同*的签名，但这并不妨碍`B.foo`成为`A.foo`.

在[JLS §8.4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)中更进一步，它说：

> 方法 m1 的签名是方法 m2 签名的子签名，如果：
> 
> 1.  m2 与 m1 具有相同的签名，或
>     
>     
> 2.  m1 的签名与 m2 签名的擦除（第 4.6 节）相同。

我们已经确定第 1 点是错误的。

根据[JLS §4.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)的方法的擦除签名是`a signature consisting of the same name as s and the erasures of all the formal parameter types given in s`. 所以 A.foo 的擦除是`foo(Object)`并且 B.foo 的擦除是`foo(String)`。这两个是不同的签名，因此第 2 点也是错误的，并且 B.foo 不是 A.foo 的子签名，因此 B.foo 不会覆盖 A.foo。

除了它...

**我错过了什么？是否有一些我没有看到的难题，或者在这种情况下规范真的不完整？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:49:15.847

> 类中声明的类型变量是否计数？

有问题的元素是方法，而不是包含类型声明。所以，不，他们不算数。

> 好的，现在让我们假设 T 不算数，因此第 2 点是错误的

为什么？它们都有 0 类型参数，所以这是真的。

* * *

一步步：

> *   它们具有相同数量的形式参数（可能为零）

两种方法都有 1 个形式参数。查看。

> *   它们具有相同数量的类型参数（可能为零）

两种方法都没有声明类型参数。查看。

> 令 A1, ..., An 为 M 的类型参数，令 B1, ..., Bn 为 N 的类型参数。将 N 的类型中出现的 Bi 重命名为 Ai 后，相应类型变量的边界为相同，并且M和N的形参类型相同。

由于这两种方法都没有声明类型参数，因此无需重命名，并且形式参数类型相同 -- `T[T=String] = String`。查看。

⇒`B.foo(String)`与 具有相同的签名`A<String>.foo(String)`。⇒`B.foo(String)`是`A<String>.foo(String)`

由于`B`它是一个子类`A`并且`A<String>.foo(String)`是公共的，我们可以[得出](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.1) `B.foo(String)`overrides的结论`A<String>.foo(String)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:46:31.153

你必须这样看：

该类`B`扩展了`A<String>`具有方法的类型`foo(String param)`。

`A<String>`是对泛型类型的*调用*`A<T>`。它本身就是一种类型。[JLS 4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5)暗示了这一点，它定义了参数化类型是什么。`A<String>`是参数化类型，与任何其他引用类型处于同等地位。在讨论直接超类的概念时，参数化这一事实并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:49:21.477

摘自[Oracle 的](http://docs.oracle.com/javase/tutorial/java/generics/bridgeMethods.html)泛型教程：

> 类型擦除后，方法签名不匹配。Node 方法变为 setData(Object)，MyNode 方法变为 setData(Integer)。因此，MyNode setData 方法不会覆盖 Node setData 方法。为了解决这个问题并在类型擦除后保留泛型类型的多态性，Java 编译器会生成一个桥接方法来确保子类型化按预期工作。

所以基本上，编译器的魔力可以让你的编译代码按预期工作，即使是 JLS 也是如此。我不确定在哪里指定了这种行为。

# jms - 需要从 OC4J 中的 EAR 文件中创建 JMS 目标

> ID：12154732
> 
> 赞同：1
> 
> 时间：2012-08-28T07:35:57.207
> 
> 标签：jms, ejb-3.0

需要从 OC4J 中的 EAR 文件中创建 JMS 目标，（即）是否有另一种方法来创建 JMS 目标，而不是从 OC4J 的企业管理器。

# java - 使用 TAB 将焦点更改到 JTable 中的下一个组件

> ID：12154734
> 
> 赞同：9
> 
> 时间：2012-08-28T07:35:59.790
> 
> 标签：java, swing, focus, jtable, focusmanager

JTable 的默认行为是将焦点更改为下一个单元格，我想强制它在按下 TAB 键时将焦点移动到下一个组件（例如 JTextField）。
我重写了始终返回 false `isCellEditable`的方法：`DefaultTableModel`

```
public boolean isCellEditable(int rowIndex, int columnIndex) {
    return false;
} 
```

但它仍然不会将焦点转移到下一个组件！
我应该如何`JTable`将焦点更改为下一个组件而不是下一个单元格？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T10:25:30.990

shift-/tab 键默认用于在组件之间转移焦点。JTable 明确请求在内部处理 shift-/tab（通过提供不包括这些的 focusTraversalKeys 集）。

按照一般规则（*如果有特定的 api 可用于任务，请使用它而不是滚动您自己的*），解决方案是设置遍历键以再次包含它们：

```
Set<AWTKeyStroke> forward = new HashSet<AWTKeyStroke>(
        table.getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS));
forward.add(KeyStroke.getKeyStroke("TAB"));
table.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, forward);
Set<AWTKeyStroke> backward = new HashSet<AWTKeyStroke>(
        table.getFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS));
backward.add(KeyStroke.getKeyStroke("shift TAB"));
table.setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS, backward); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T07:58:35.290

如果您真的想要这个，您需要更改表操作映射的默认行为。

```
ActionMap am = table.getActionMap();
am.put("selectPreviousColumnCell", new PreviousFocusHandler());    
am.put("selectNextColumnCell", new NextFocusHandler()); 
```

然后你需要几个动作来处理遍历

```
public class PreviousFocusHandler extends AbstractAction {
    public void actionPerformed(ActionEvent evt) {
        KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
        manager.focusPreviousComponent();
    }
}

public class NextFocusHandler extends AbstractAction {
    public void actionPerformed(ActionEvent evt) {
        KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
        manager.focusNextComponent();
    }
} 
```

另一种方法是禁用底层`Action`...

```
ActionMap am = table.getActionMap();
am.get("selectPreviousColumnCell").setEnabled(false);
am.get("selectNextColumnCell").setEnabled(false); 
```

（没有测试过这个）

这种方法的好处是可以根据需要启用/禁用行为，而无需维护对旧的引用`Actions`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T07:57:25.527

*   默认（实现`KeyBinding`）`JTable`是关于下一个单元格和从最后一个单元格到第一个单元格，

*   您可以[通过设置为空值来删除 KeyBindings](http://tips4java.wordpress.com/2008/10/10/key-bindings/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-20T16:18:02.633

要重置为标准键盘绑定（通常是 TAB 和 SHIFT+TAB），只需将参数指定`null`为：`keystrokes``Component.setFocusTraversalKeys`

```
table.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, null);
table.setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS, null); 
```

# php - php startup sqlsrv 无法初始化模块

> ID：12154738
> 
> 赞同：6
> 
> 时间：2012-08-28T07:36:08.133
> 
> 标签：php, sql, sql-server

我正在尝试将 MSSQL 连接到 PHP。我正在关注[本](http://davehiren.blogspot.com/2012/01/connect-with-microsoft-sql-server-from.html)教程。无论如何，在我按照该教程中的描述添加 dll 文件后，我收到以下警告。我该如何解决这个问题？

```
php starup sqlsrv unable to initialize module module compiled with module api=20090626 php compiled with module api=20020520 these options need to match 
```

注意：我已经阅读了这篇[文章](https://stackoverflow.com/questions/7645483/php-startup-unable-to-initialize-module)，但没有任何帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T08:01:23.310

看起来您已尝试在 php 5.2 系统上安装 php 5.3 的 sqlsrv 扩展。

运行`<?php phpinfo(); ?>`并查找 php 版本并查找以下条目：

*   PHP版本
*   线程安全

从 sqlsrv 驱动程序中选择适当的 .dll：版本号必须匹配，如果启用了线程安全，则选择 ts 版本，如果没有，则选择 nts 版本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-04T01:27:56.350

对于任何试图让它与 PHP 5.5（使用模块 API = 20121212 编译的 PHP）一起工作的人，您可以将 ext 文件夹中的 dll 替换为新的更新二进制文件[>here<](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/e1d37219-88a3-46b2-a421-73bfa33fe433/unofficial-php-55-drivers-x86)

不要忘记在 php 配置中启用新的 dll。

# android - 如何记住搜索的最后一个值？

> ID：12154741
> 
> 赞同：1
> 
> 时间：2012-08-28T07:36:37.417
> 
> 标签：android, search, android-actionbar, searchview

我使用操作栏中的 android SearchView。我有一些我搜索的 ListView。我想在输入一些搜索文本后，此文本保留在搜索栏中，我可以删除此文本以获取我的初始列表。我看到了像这样工作的应用程序。请帮助我，也请告诉我输入时动态搜索和搜索视图回调的好教程。

# asp.net-mvc - 在哪里放置“替换”代码？

> ID：12154743
> 
> 赞同：1
> 
> 时间：2012-08-28T07:36:39.230
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-4

我正在开发 MVC 应用程序，现在正在测试它。

我正在尝试`<test>`在数据库中插入地址字段。由于它包含角括号，因此会出错。为此，我在控制器中使用以下代码。

```
[HttpPost]
public ActionResult Create(Employee employee)
{
    if (ModelState.IsValid)
    {
        employee.Address.Replace("<", "&lt;").Replace(">", "&gt;");
        db.Employees.Add(employee);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    ViewBag.ReportsToId = new SelectList(db.Employees, "Id", "FirstName", employee.ReportsToId);
    return View(employee);
} 
```

但是光标没有出现在这段代码中。在哪里写替换代码？
在光标到达该代码之前，它给出了一个错误：

> 从客户端 (Address = `"<test>"`) 检测到具有潜在危险的 Request.Form 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:11:05.143

更改`employee.Address.Replace("<", "&lt;").Replace(">", "&gt;");`为`employee.Address = employee.Address.Replace("<", "&lt;").Replace(">", "&gt;");`

这样，它获取`employee.Address`字符串并替换`<`and`>`符号，然后将字符串保存回`employee.Address`.

它也可能需要在`if (ModelState.IsValid)`零件之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:46:35.277

阅读此[答案](https://stackoverflow.com/a/82170/1615280)以了解类似问题。

结论：在`[AllowHtml]`属性上使用`Address`属性或更改 web.config 以使用 requestValidationMode 2.0：

```
<configuration>
   <system.web>
     <httpRuntime requestValidationMode="2.0" />
   </system.web>
   <pages validateRequest="false">
   </pages>
</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T23:50:12.283

您的代码中有两个问题需要解决。

首先，正如您所指出的，错误：

```
A potentially dangerous Request.Form value was detected from the client (Address ="<test>"). 
```

发生此错误的原因是，为了安全起见，MVC 默认不允许将此类字符串（您就像一些 html 元素）发送到您的操作方法。那是为了防止用户提交一些危险的输入来附加您的站点。例如，您可以键入 alert('hahaha') 而不是 ，如果您不对该输入进行编码，则访问包含此地址字段的页面的每个人都会收到一个警告框。这就是为什么您在调试时无法进入“替换代码”，因为这个错误，整个方法将无法运行。

也就是说，有很多选项可以解决第一个错误，但您可以简单地将 ValidateInput 属性添加到您的操作方法中。

```
[HttpPost]
[ValidateInput(false)]
public ActionResult Create(Employee employee) 
```

通过这样做，您是在告诉 MVC 相信您会在某个时候对危险的输入进行编码。而你正在通过替换代码来做到这一点。那很好。但是，如果您只是使用 @yourTable.Address 在某些视图中呈现数据，则无需费心在操作代码中替换 < 和 >。当您通过 @yourTable.Address 语法呈现数据时，MVC Razor 引擎会为您进行编码。

# javascript - 如何检索 AMD 化 Dojo 的 XHR 响应代码（+时间戳）？

> ID：12154748
> 
> 赞同：8
> 
> 时间：2012-08-28T07:36:53.720
> 
> 标签：javascript, dojo, xmlhttprequest

使用“旧”Dojo，可以将第二个参数传递给 Xhr 请求`ioargs`的`load`函数（[参见此处的示例 6](http://dojotoolkit.org/reference-guide/1.8/dojo/xhrGet.html#dojo-xhrget)）。这`ioargs`提供了（除其他外）请求的时间戳和状态代码。

但是如何使用新的“更清洁”（并且向前兼容）Dojo 来实现这一点？[不幸的是，我在当前文档](http://dojotoolkit.org/reference-guide/1.8/dojo/request/xhr.html#id5)
中找不到任何提示。

以下应该是上述引用示例的移植到“新”Dojo。但是，`ioargs`将是未定义的：

```
require( "dojo/request/xhr", "dojo/dom", "dojo/domReady!",
  function(request, dom){
    // Look up the node we'll stick the text under.
    var targetNode = dom.byId("getLicenseStatus");

    // The parameters to pass to xhrGet, the url, how to handle it, and the callbacks.
    request.get(
      "{{dataUrl}}dojo/LICENSE",
      {
        handleAs: "text",
        preventCache: true
      }
    ).then(
      function(data, ioargs){
        // FIXME: ioargs is undefined
        targetNode.innerHTML = "XHR returned HTTP status: " + ioargs.xhr.status;
      },
      function(error){
        targetNode.innerHTML = "An unexpected error occurred: " + error.response.status + ": " + error.response.text;
      }
    );
  }
); 
```

我需要更改什么才能使请求的时间戳和状态代码在加载函数中可用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T08:26:27.277

`request`返回一个特殊的`promise`（[source](http://www.sitepen.com/blog/2012/08/21/introducing-dojorequest/)）：

> 从 dojo/request 调用返回的 Promise 有一个标准 Promise 上没有的附加属性：response。此属性是一个承诺，它将解析为更详细地描述响应的冻结对象（如果可用）：
> 
> *   url – 用于发出请求的最终 URL（附加查询字符串）
> *   options – 用于发出请求的选项对象
> *   text – 响应中数据的字符串表示形式
> *   data – 响应中处理的数据（如果指定了 handleAs）
> *   getHeader(headerName) – 从请求中获取标头的函数；如果提供者不提供标头信息，则此函数将返回 null。

因此，您应该链接`.then`到 this`promise.response`以访问所有上述属性：

```
var promise = request.get("{{dataUrl}}dojo/LICENSE");

promise.response.then(function(response) {
    console.log("status", response.status);
    console.log("url", response.url);
    console.log("data", response.data);
}); 
```

在 jsFiddle 上查看一个工作示例：http: [//jsfiddle.net/phusick/6wB2L/](http://jsfiddle.net/phusick/6wB2L/)

# java - Java - 循环的 Perlin 噪声

> ID：12154749
> 
> 赞同：0
> 
> 时间：2012-08-28T07:37:10.757
> 
> 标签：java, noise

我需要使用我编写的柏林噪声程序在 Java 中为 3D 行星（球体）生成纹理。但要注意的是左右需要相同，上下也需要相同，这样您才能将纹理放在球体上。

我不能把 perlin 噪声源放在这里，因为它太长了，但它主要基于[http://devmag.org.za/2009/04/25/perlin-noise/](http://devmag.org.za/2009/04/25/perlin-noise/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:47:57.187

柏林噪声的工作方式是它在网格值之间进行插值。

为此，单纯形噪声会更合适（否则两极处的噪声密度将不一样，因为您无法用正方形正确地铺设球体）。

您需要将球体划分为单纯形（在您的情况下为三角形），然后对于每个三角形角度（每个点仅一次），随机化一个值。

然后，您可以通过使用单纯形噪声方法进行插值来计算三角形每个点的纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:50:33.973

如果您的噪声函数缩放到 4D，那么您可以使用两个 2D 圆的坐标输入 x,y,z,w。生成的图像将在 x 和 y 轴上以最佳方式平铺。

例如（非常草率但为了清楚起见）：

```
float textureSize = 1024.0f;

    for(float i = 0.0f; i < textureSize; i += 1.0f){

      for(float j = 0.0f; j < textureSize; j += 1.0f){

        nx = cos((i / textureSize) * 2.0f * PI);
        ny = cos((j / textureSize) * 2.0f * PI);
        nz = sin((i / textureSize) * 2.0f * PI);
        nw = sin((j / textureSize) * 2.0f * PI);

        looped_noise = noise_4D( nx, ny, nz, nw, octaves, persistence, lacunarity, blah...);
        noise_buffer[((int)i * (int)textureSize) + (int)j] = looped_noise;

      }
    } 
```

如果您的函数无法轻松扩展到 4D，请尝试使用任何单纯形噪声实现。

# delphi - TDBMemo 显示奇怪的输出

> ID：12154750
> 
> 赞同：0
> 
> 时间：2012-08-28T07:37:12.477
> 
> 标签：delphi, delphi-2010, interbase

使用 Interbase 数据库，我有一个应用程序，我想在其中显示备注字段的内容。
我创建了一个数据模块，我在其上放置了, 和`TIBDatabase`所有`TIBTransaction`连接。数据出来了，目前没有问题。`TDataSource``TIBTable`

但是，当我将 a 添加`TDBMemo`到表单并想显示内容时，我得到的只是这个；

![在此处输入图像描述](../Images/81a8effc438a07b7a39b7db04a526320.png)

我只设置了`DataSource`and `DataField`，`TDBMemo`所以没有涉及更多代码。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:03:40.887

`TDBMemo`通过用an替换并将`TMemo`内容添加到它来解决它；

```
 Encoding.Unicode.GetString(myQuery.FieldByName('myField').AsBytes); 
```

# javascript - jQuery内联属性值

> ID：12154751
> 
> 赞同：1
> 
> 时间：2012-08-28T07:37:12.393
> 
> 标签：javascript, jquery

**我能得到一些建议吗？你有更好的方法来做到这一点吗？**

大多数时候，当我在 Html 表中输入一组数据时，我总是将诸如“student_id”或“country_id”之类的参考 id 之类的数据归类为父结构，例如 or，

例如

```
<tr student_id="1" subject_id="2" school_id="5" country_id="6">
 <td></td>
 <td></td>
 <td></td>
 <td></td>
  .....
  ......
</tr>
....
.....

<tr student_id="43" subject_id="35" school_id="22" country_id="411">
 <td></td>
 <td></td>
 <td></td>
 <td></td>
  .....
  ......
</tr>
....
..... 
```

当我调用 javascript 函数时，我可以在函数中获取并获取那些 id

```
var tr  = $(this).closest('tr');
var student_id =  $(this).attr('student_id');
var subject_id =  $(this).attr('subject_id');
var school_id =  $(this).attr('school_id');
....... 
```

你有更好的方法来存储这些参考吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:38:17.883

与旧浏览器向后兼容并在 jQuery 中具有特定支持的[HTML5 方法](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)`data-xxx`是使用属性。

```
<tr data-student_id="43" data-subject_id="35" data-school_id="22" data-country_id="411">

var tr  = $(this).closest('tr');
var student_id = tr.data('student_id');
var subject_id = tr.data('subject_id');
var school_id = tr.data('school_id'); 
```

在 HTML5 中这样做的原因之一是，这会将所有自定义数据属性放在`"data-"`命名空间中，这样可以保证永远不会与可能在任何 HTML 标记上定义的未来标准属性发生冲突。在 jQuery 中，它还与存储每个对象数据的 .data() 方法统一起来。

请注意，当使用 jQuery 的`.data(key)`方法时，它还会尝试将数据转换为原生 javascript 类型，因此在上述情况下，它会自动将这些值转换为数字。

# c# - 通过 WCF 服务传递枚举

> ID：12154754
> 
> 赞同：3
> 
> 时间：2012-08-28T07:37:21.387
> 
> 标签：c#, wcf

我需要在与我的 WCF 服务项目分开的项目中定义一个枚举。我正在创建一个包含枚举和其他数据的对象。当我通过 WCF 服务将对象传递给客户端时，我得到一个找不到。

枚举：

```
public enum Color
{
    Red = 1,
    Blue,
    Green,
} 
```

要通过的对象：

```
public class MyObject
{
    public Color ColorEnum { get; set; }
    public string Name{ get; set; }
} 
```

只有当我给对象一个默认值说 ColourEnum = Color.Red 时，服务才能工作。如果它没有设置它会中断。我知道这是一种解决方法，但我正在寻找一种更有意义的解决方案，而不是设置任意值。我只是想了解它为什么会坏

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T11:15:19.977

我的 WCF 项目中有一个枚举，如下所示：

```
[DataContract]
public class CarBookReq
{
    [DataMember]
    public string RefNo { get; set; }

    [DataMember]
    public RateType MyProperty { get; set; }

}

[DataContract]
public enum RateType
{
    [EnumMember]
    silver,
    [EnumMember]
    gold,
    [EnumMember]
    platinum,
    [EnumMember]
    young,
    [EnumMember]
    youngplus
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T07:39:02.113

尝试[`EnumMember`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.enummemberattribute.aspx)在枚举值上添加属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T07:59:05.787

问题是该属性的默认值`ColorEnum`不是您的枚举的有效值：当您创建 a 时`MyObject`，该属性的默认值为 0，并且 0 不对应于您的枚举的任何值。

您有多种选择来纠正此行为。

*   您可以在枚举声明中使用`Red = 0`代替`Red = 1`（甚至省略它，它会产生相同的效果）。这样，默认值将是 Red 而不是无意义的值。
*   您可以将默认值 Default = 0 添加到您的枚举中，您知道该值将具有“尚未定义颜色”的含义。
*   您可以让您的属性为 nullable `Color?`，因此 null 将成为该属性的合法值和默认值
*   您可以让构造函数为`MyObject`ColorEnum 属性分配默认颜色。

    public MyObject() { this.ColorEnum = Color.Red; }

但是无论你做什么，枚举类型的默认值总是0。如果0不对应合法的枚举成员，那肯定是个问题。

# android - 在 Android 上与 HttpHeaders 一起发送 Post 请求

> ID：12154756
> 
> 赞同：15
> 
> 时间：2012-08-28T07:37:45.707
> 
> 标签：android, post, webview, http-headers, android-webview

我需要将数据发布到服务器（带有“referer”标头字段）并在 Webview 中加载响应。

现在，有不同的方法（来自[Android WebView](http://developer.android.com/reference/android/webkit/WebView.html)）来做它的一部分，比如：

```
void loadUrl(String url, Map<String, String> additionalHttpHeaders) 
```

使用指定的附加 HTTP 标头加载给定的 URL。

```
void loadData(String data, String mimeType, String encoding) 
```

使用“数据”方案 URL 将给定数据加载到此 WebView。

```
void postUrl(String url, byte[] postData) 
```

使用“POST”方法将带有 postData 的 URL 加载到此 WebView 中。

loadUrl() 允许发送 HttpHeaders 但不允许发送 post 数据，其他方法似乎不允许发送 HttpHeaders。我错过了什么或者我正在尝试的东西是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-16T12:30:00.887

You can execute the `HttpPost` manually like this:

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/postreceiver");

// generating your data (AKA parameters)
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("ParameterName", "ParameterValue"));
// ...

// adding your headers
httppost.setHeader("HeaderName", "HeaderValue");
// ...

// adding your data
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

HttpResponse response = httpclient.execute(httppost); 
```

Get the `response` as `String`:

```
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
StringBuilder builder = new StringBuilder();
for (String line = null; (line = reader.readLine()) != null;) {
    builder.append(line).append("\n");
}
String html = builder.toString(); 
```

Now you can put the `html` into `yourWebView` by using `loadData()`:

```
yourWebView.loadData(html ,"text/html", "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-24T19:33:03.747

您可以使用继承自 WebView 的自定义类，或者如果您愿意，可以添加扩展功能。逻辑基本相同：

```
private fun WebView.postUrl(postUrl: String, postData: ByteArray, additionalHttpHeaders: MutableMap<String, String>) {

    val savedWebViewClient = getWebViewClient()

    webViewClient = object : WebViewClient() {
        override fun shouldInterceptRequest(view: WebView, url: String): WebResourceResponse? {

            if (url != postUrl) {
                view.post {
                    webViewClient = savedWebViewClient
                }
                return savedWebViewClient?.shouldInterceptRequest(view, url)
            }

            Log.d("WebView extension", "post ${postData.decodeToString()} to ${url}")
            val httpsUrl = URL(url)
            val conn: HttpsURLConnection = httpsUrl.openConnection() as HttpsURLConnection
            conn.requestMethod = "POST"
            additionalHttpHeaders.forEach { header ->
                conn.addRequestProperty(header.key, header.value)
            }

            conn.outputStream.write(postData)
            conn.outputStream.close()

            val responseCode = conn.responseCode
            Log.d("WebView extension", "responseCode = ${responseCode} ${conn.contentType}")
            view.post {
                webViewClient = savedWebViewClient
            }

            // typical conn.contentType is "text/html; charset=UTF-8"
            return WebResourceResponse(conn.contentType.substringBefore(";"), "utf-8", conn.inputStream)
        }
    }

    loadUrl(postUrl, additionalHttpHeaders)
} 
```

为简洁起见，对上面的代码进行了编辑，隐藏了大多数错误检查。要为 26 级以下的 API 工作，我使用反射来提取`savedWebViewClient`.

在现实生活中，您还希望覆盖新方法，并将**WebViewClient**`shouldInterceptRequest(view: WebView, request: WebResourceRequest)`的所有其他方法委托给. 可能**PostWithHeadersWebView**类（也覆盖）可以让您的生活更轻松。**`savedWebViewClient`**`setWibViewClient()`****

# iis-6 - 覆盖单个目录上的 IIS6 通配符映射

> ID：12154759
> 
> 赞同：2
> 
> 时间：2012-08-28T07:38:05.637
> 
> 标签：iis-6, asp.net-mvc-4, wildcard-mapping

当我在 IIS6 上发布 MVC4 应用程序时，我需要添加 isapi.dll 才能使我的应用程序正常工作，但它启用通配符映射到所有静态内容，因此我试图用这个覆盖我的应用程序中子文件夹（内容文件夹）上的通配符设置指南[在单个目录上覆盖 IIS6 通配符映射，](http://blog.stevensanderson.com/2008/07/07/overriding-iis6-wildcard-maps-on-individual-directories/)但它对我不起作用。

我收到错误消息：

```
C:\Inetpub\AdminScripts>adsutil.vbs SET /W3SVC/1/root/Content/ScriptMaps "" The path requested could not be found. ErrNumber: -2147024893 (0x80070003) Error Trying To Get the Object: W3SVC/1/root/Content 
```

有谁知道错误是什么？以及如何解决它？

我很确定我的标识符在默认网站上是 1

我在IIS上的结构如下

网站/默认网站/“文件夹”/“应用程序”/内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:43:18.163

请查看链接 >[这是](http://blog.stevensanderson.com/2008/07/07/overriding-iis6-wildcard-maps-on-individual-directories/)我认为对您有帮助的链接，它来自博客，归功于 Steven Anderson。

# routing - Ember.js 动态路由

> ID：12154762
> 
> 赞同：2
> 
> 时间：2012-08-28T07:38:17.453
> 
> 标签：routing, ember.js

我正在尝试使用 Ember.js 构建一个应用程序，包括路由、角色、登录、注销等。我现在的问题是我无法弄清楚如何处理动态路由。

我需要的是能够使用一条路线进行侧边栏导航。

当用户登录时，他/她将进入仪表板视图。假设他们点击左侧的帖子菜单，然后他们将看到帖子视图。我想以相同的方式处理这些问题，例如`/:module/`.

```
module: Ember.Route.extend({
   route: '/admin/:module/',
   doLogout: Ember.Route.transitionTo('login'),
   connectOutlets: function (router) {
      "use strict";
      router.get('applicationController').connectOutlet('sidebar', 'sidebar');
      router.get('applicationController').connectOutlet('toolbar', 'toolbar');
   }
}) 
```

这是我需要一点帮助的地方。动态路由究竟是如何工作的？到目前为止，我发现的唯一可能是@wycats 关于路由的要点，但我无法从那里弄清楚：[https ://gist.github.com/2728699](https://gist.github.com/2728699)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:51:27.387

这是我使用的动态路由的精简部分：

```
myroute : Em.Route.extend({
    route : '/myroute/:tid', //tid is same as index of Object
    deserialize: function(router, params) {
        return App.router.getPath('myController.content').objectAt(parseInt(params.tid));
                    //you can use some other parameters than tid and find the coresponding element
        },
    serialize: function(router, context) {
        return {
        tid: App.router.getPath('myController.content').indexOf(context)
        }
        },
    connectOutlets: function(router, context) {
        var currentController = router.get('currentController');
        currentController.connectOutlet({
            name : 'controllername',
            outletName : 'outletname',
            context: context
            }); 
        },
    index: Em.Route.extend({
        route : '/'
        })
    }), 
```

这是一个要点，解释 Connect Outlets 破解当前源代码以获取最新更新[https://gist.github.com/3606155](https://gist.github.com/3606155)

# regex - 正则表达式删除一行中的空格并提取特定列

> ID：12154768
> 
> 赞同：0
> 
> 时间：2012-08-28T07:38:27.040
> 
> 标签：regex, perl

Perl正则表达式删除一行中的空格并提取特定列

我的线看起来像这样：

```
324446  psharma jobA      2       0       435529  0       0       0     435531 
```

在这里，我可以使用函数拆分行，[`split`](http://perldoc.perl.org/functions/split.html)然后使用以下命令将值保存在数组中

```
@strings = split(/\s+/); 
```

我不想要一个额外的变量。使用正则表达式，我想将第 1、2、3 和 10 列中的值提取为`$1`、`$2`和.`$3``$10`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:44:30.473

欢迎来到stackexchange。

不需要额外的变量：

```
use strict;
use warnings;

my $line = '  324446   psharma jobA 2   0 435529 0 0 0 435531     ';

# Remove leading and trailing white space
$line =~ s/^ \s+ | \s+ $//x;
# Split by consecutive white space and keep certain fields:
my ($col1, $col2, $col3, $col10) = (split m/\s+/, $line)[0, 1, 2, 9];

print "1: $col1 2: $col2 3: $col3 10: $col10\n"; 
```

输出：

```
1: 324446 2: psharma 3: jobA 10: 435531 
```

这意味着您真的不需要任何额外的变量，即使使用`split`. 例如，如果您只想将这些字段传递给另一个函数，您的分割线将如下所示：

```
some_func((split m/\s+/, $line)[0, 1, 2, 9]); 
```

请注意，我假设您的列号计数从 1 开始，而不是从 0 开始（意味着您的“第 1 列”是数字“324446”等）。这也是我在示例中命名变量的方式。

# mongodb - 【MongoDB】：平衡器迁移时传入的写操作保存在哪里？

> ID：12154769
> 
> 赞同：2
> 
> 时间：2012-08-28T07:38:37.000
> 
> 标签：mongodb

请参阅[http://docs.mongodb.org/manual/core/sharding-internals/#balancing-internals](http://docs.mongodb.org/manual/core/sharding-internals/#balancing-internals)。

它有以下短语：

“当 MongoDB 开始迁移一个块时，数据库开始将数据复制到新服务器并跟踪传入的写入操作。”

我的问题是这些传入的写操作保存在哪里？如果它在内存中，那么我需要如何调用 getLastError 并确保数据已同步到磁盘。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:45:52.517

首先，如果您想保证写入，则无论如何都应该调用 getLastError （或使用驱动程序的等效项进行安全写入），无论您是否使用分片。

就迁移期间操作发生的情况而言。您可以通过查看常见问题解答中这两个问题的答案来找到有关进行中写入的数据会发生什么情况的答案：

[http://docs.mongodb.org/manual/faq/sharding/#what-happens-if-a-client-updates-a-document-in-a-chunk-during-a-migration](http://docs.mongodb.org/manual/faq/sharding/#what-happens-if-a-client-updates-a-document-in-a-chunk-during-a-migration)

[http://docs.mongodb.org/manual/faq/sharding/#what-does-writebacklisten-in-the-log-mean](http://docs.mongodb.org/manual/faq/sharding/#what-does-writebacklisten-in-the-log-mean)

这两种机制描述了发生的情况，具体取决于操作的性质。迁移的源分片确保将写入“发送”到目标分片，或者写回机制将它们发送回 mongos 进程（它们将被自动重试）。

# jquery - 使用 jQuery 创建帖子表单并提交它的最短方法是什么？

> ID：12154770
> 
> 赞同：6
> 
> 时间：2012-08-28T07:38:45.357
> 
> 标签：jquery

我有一个带有属性的按钮，`data-url`需要`data-parameter`将其发布到控制器。问题是，该控制器将返回一个重定向，所以`$.post`在这里并没有真正的帮助，我正在考虑动态创建表单并提交它。
我认为这是很常见的任务，但是我在 jQuery 上找不到任何快捷方式来做到这一点，最短/最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:05:00.093

> 来源：[https ://stackoverflow.com/a/133997/803925](https://stackoverflow.com/a/133997/803925)

修改为使用 jQuery：

```
function post_to_url(path, params, method) {
    method = method || "post"; // Set method to post by default, if not specified.

    var $form = $("<form>")
        .attr("method", method)
        .attr("action", path);

    for(var key in params) {
        if(params.hasOwnProperty(key)) {
            var $hiddenField = $("<input type='hidden' >")
                .attr("name", key)
                .val( params[key] );

            $form.append( $hiddenField );
         }
    }

    $('body').append( $form );
    $form.submit();
} 
```

# javascript - 内部脚本完全加载后如何运行脚本？

> ID：12154771
> 
> 赞同：1
> 
> 时间：2012-08-28T07:38:47.150
> 
> 标签：javascript, facebook, greasemonkey, facebook-chat

我试图在 Facebook 侧边栏聊天列表中隐藏特定的人。

我的第一次尝试是尝试替换聊天栏中的用户名，但`.replace`由于聊天栏单独加载，并且在页面本身加载很久之后，一个简单的方法不起作用。

聊天加载后有什么方法可以运行 Greasemonkey 脚本吗？

我听说过一些关于该`unsafeWindow`功能的信息，但我不确定我是否可以在这里应用它，如果可以，如何应用。

```
unsafeWindow.hidePerson = function() {
    document.body.innerHTML = document.body.innerHTML.replace(/Firstname Lastname/g, '' );
}

unsafeWindow.hidePerson(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:33:56.577

要回答有关**“内部脚本完全加载后运行脚本”的问题，请参见此[答案](https://stackoverflow.com/a/11197969/331508)**（问题场景与 AJAX 场景相同）。

* * *

***但是***，在您的情况下有几件事：

1.  您的问题“ `I'm trying to hide specific people in the Facebook sidebar chat list`”已被 Facebook 覆盖！

    请参阅[“我可以为几个朋友开启聊天功能吗？”](http://www.facebook.com/help/?faq=130254323719420#Can-I-turn-chat-on-for-just-a-few-friends?)
    按照那里的说明，您可以：

    *   仅隐藏您指定的人
    *   或者，*仅*显示您指定的人员
    *   或者，完全关闭聊天

2.  不要试图`innerHTML`那样设置；您将破坏页面（事件侦听器将被丢弃等）。

3.  `unsafeWindow`在这里不是问题，也不需要。

4.  如果您的意思是我没有涉及的内容，请参阅[此页面](https://stackoverflow.com/questions/how-to-ask)、[此页面](http://msmvps.com/blogs/jon_skeet/archive/2010/08/29/writing-the-perfect-question.aspx)和[此页面](http://catb.org/esr/faqs/smart-questions.html)。

    然后编辑您的问题（或提出新问题），并至少包含您想要影响的聊天部分的 HTML 片段，以及相同的屏幕截图。

# javascript - 遍历我的克隆站点时如何确保始终启用浏览器中的javascript

> ID：12154772
> 
> 赞同：1
> 
> 时间：2012-08-28T07:38:47.667
> 
> 标签：javascript, plone

如果浏览器中禁用了 JS，我希望**禁用加载 plone 站点。**我究竟在哪里更改代码？我选择哪个模板/皮肤？我想确保在浏览 plone 站点的任何部分时始终启用 JS。浏览时，如果 JS 被禁用，我可以重定向到另一个带有标签的页面以在浏览器中启用 JS，如果启用，则返回指向该站点的 hlink。我正在使用克隆 4.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:40:23.703

没有用户自己从浏览器设置中启用 JS 是无法启用的。`noscript`您可以使用以下标签添加有关如何启用 JavaScript 或重定向到具有说明的页面的说明：

```
<noscript>
    <meta http-equiv="Refresh" content="5;url=http://example.com/foo/bar.php?js=false" />
</noscript> 
```

该`meta`标签会在 5 秒内重定向到您的无 JS 页面，以允许浏览器通过单击后退按钮进入当前页面。如果重定向的时间太少，页面可能不会[按照这篇文章保存在历史记录中](http://webdesign.about.com/od/metataglibraries/a/aa080300a.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T15:35:38.000

你愿意也需要cookie吗？如果是这样，解决此问题的一种方法是：

1.  修改 Plone 的主模板以包含对特定 cookie 的测试。
2.  如果未找到该 cookie（使用模板逻辑进行测试），则显示“哎呀，您需要 js”内容。
3.  在该无 cookie 内容部分，包括内联 javascript 以设置 cookie 并重新加载页面。如果不想让js设置cookies，仍然可以在redirect上设置查询参数。
4.  如果找到cookie或查询参数，则返回真实内容。如果查询参数，设置http-only cookie。

如果您想避免使用 cookie 或其他会话机制，另一种方法是：

修改Plone的主模板为

1.  在可视门户或类似包装器上设置 display:none 样式；
2.  添加一个 JavaScript-needed to view this page message with display style on;
3.  放入内联 JavaScript 以在 JS 需要的消息上设置 display:none 并在可视门户包装器上设置 display:block。

问题在于页面实际上是在没有 js 的情况下加载的——只是不显示。当然，在加载其他资源时，js-needed 消息可能会闪现。确保 JS 显示摆弄是内联的（不是键控到页面就绪或任何其他事件）以最小化效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:50:33.597

您的页面必须由 加载`JavaScript`，它替换静态页面`Please enable JavaScript in your browser`。这是解决问题的唯一方法。

我没有经验，`Plone`也不知道什么模板可以做到这一点。

# asp.net - 在 Page_Load 中隐藏控件

> ID：12154773
> 
> 赞同：0
> 
> 时间：2012-08-28T07:38:55.140
> 
> 标签：asp.net, vb.net

我在表单设计中使用标签控件。但我想在页面加载时隐藏那个特定的标签控件。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
   Label10.Visible = False
End Sub 
```

我应该怎么办？我是 vb.net 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:42:29.500

尝试在 aspx 代码中而不是在加载事件中设置可见性属性，这可能会解决您的问题。

```
<asp:Label ID="lblValidation" runat="server" BackColor="Red" 
                    Text="Please fill in all of the date fields below to proceed" Visible="False"></asp:Label> 
```

希望这可以帮助！

# file-upload - 为什么我的 NGINX 的 upload_limit_rate 不起作用？

> ID：12154776
> 
> 赞同：2
> 
> 时间：2012-08-28T07:39:11.113
> 
> 标签：file-upload, nginx

我正在使用带有上传进度模块的 nginx 上传模块在我的本地机器上进行一些测试。因为我是本地人，所以上传几乎是即时的，因此很难测试和调试上传进度模块。

我已根据文档将指令：upload_limit_rate 8k 添加到我的 nginx 上传块：http: [//www.grid.net.ru/nginx/upload.en.html](http://www.grid.net.ru/nginx/upload.en.html)

毕竟，上传几兆字节的文件仍然是即时的……看来上传速率限制不起作用……

这是我的配置块：

**完整配置可以在这里找到：http:** [//pastie.org/4681229](http://pastie.org/4681229)

* * *

位置/上传{

```
# Pass altered request body to this location
    upload_pass   @unicorn;

    # Store files to this directory
    # The directory is hashed, subdirectories 0 1 2 3 4 5 6 7 8 9 should exist
    upload_store /Users/kirkquesnelle/Sites/porelo/tmp/uploads 1;

    # Allow uploaded files to be read only by user
    upload_store_access user:r;

    # Set specified fields in request body
    upload_set_form_field $upload_field_name.name "$upload_file_name";
    upload_set_form_field $upload_field_name.content_type "$upload_content_type";
    upload_set_form_field $upload_field_name.path "$upload_tmp_path";

    # Inform backend about hash and size of a file
    upload_aggregate_form_field "$upload_field_name.md5" "$upload_file_md5";
    upload_aggregate_form_field "$upload_field_name.size" "$upload_file_size";

    upload_pass_form_field "^X-Progress-ID|^authenticity_token|^submit$|^description$";

    upload_cleanup 400 404 499 500-505;

    # Specifies upload rate limit in bytes per second. Zero means rate is unlimited.
    upload_limit_rate 8k;

    track_uploads proxied 30s; 
```

}

* * *

我的配置有什么问题吗？为什么这行不通？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:33:13.440

Try to set the `upload_limit_rate` before your `upload_pass` directive. As the first line in your config block.

# objective-c - 我们如何使用从视图控制器到拆分视图控制器的转换？

> ID：12154781
> 
> 赞同：0
> 
> 时间：2012-08-28T07:39:49.937
> 
> 标签：objective-c, ipad, uisplitviewcontroller

任何可能包含此转换代码以进行拆分视图转换？

```
 [UIView transitionFromView:self.window.rootViewController.view
                        toView:viewController.view
                      duration:0.65f
                       options:UIModalTransitionStyleFlipHorizontal
                    completion:^(BOOL finished){
                        self.window.rootViewController = splitViewController;
                    }]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T11:29:58.747

您可以使用 CATransition 类及其类方法

# wpf - WPF中多线程窗口的问题

> ID：12154783
> 
> 赞同：2
> 
> 时间：2012-08-28T07:39:57.983
> 
> 标签：wpf, multithreading, window

我正在像[这样](http://www.c-sharpcorner.com/uploadfile/suchit_84/creating-wpf-windows-on-dedicated-threads/)的新线程中打开新的 WPF 窗口：

```
private void OnCreateNewWindow(object sender, RoutedEventArgs e)
{
    Thread thread = new Thread(() =>
    {
        Window1 w = new Window1();
        w.Show();
        Dispatcher.Run(); 
    });

    thread.SetApartmentState(ApartmentState.STA);
    thread.Start();
    }
} 
```

问题是它卡在 Show-method 上（不显示窗口）并且永远不会到达 Dispatcher.Run。

检查线程和调用堆栈时，我可以看到两个线程，Main 和我的新窗口线程。窗口线程的调用堆栈位于以下帧：

> PresentationCore.dll!System.Windows.Input.CommandManager.FindCommandBinding(object sender, System.Windows.RoutedEventArgs e, System.Windows.Input.ICommand command, bool execute) + 0x1c0 bytes

在尝试修改代码时，我曾经设法得到消息异常：

> 不能使用属于与其父 Freezable 不同的线程的 DependencyObject。

我感觉这与访问未被冻结的主线程拥有的资源有关。在这个应用程序中，我有很多通用样式和资源、画笔等，但我试图通过将以下内容放在窗口的构造函数中来避免在这个特定对话框中使用它们：

> InheritanceBehavior = InheritanceBehavior.SkipAllNow;

但这似乎还不够。不知何故，似乎无论如何都访问了一些不允许的资源。

带有 FindCommandBinding 的框架暗示它可能是命令绑定的问题。但是这个对话框没有命令绑定。

如果在资源字典中定义了诸如画笔之类的资源，它们是否会被隐式冻结？如果没有，我如何以简单的方式明确冻结它们？有数百个刷子。但这可能不是这里的问题。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-28T08:09:16.357

您需要使用 Dispatcher.Invoke 或 BegingInvoke 方法来执行 winodw 对象的创建和调用 show 方法。工作线程不能调用或更新控件。

```
Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, () => new Thread(() =>     { Window1 w = new Window1();         w.Show();}) 
```

# objective-c - Trouble transferring data between view controllers contained in TabBarController

> ID：12154784
> 
> 赞同：0
> 
> 时间：2012-08-28T07:39:58.253
> 
> 标签：objective-c, ios, tabbarcontroller

This is my first question and I am very new in programming field. I have a tab bar controller and I want to transfer data from FVC(1st view controller) to SVC(second View Controller). In FVC ,I am taking controllers contained in tab bar controller in an array (VCArray) and assigning the second object of that array to instance of SVC and setting properties of SVC with appropriate data of FVC but those properties appears nil in SVC.

and 1 more interesting thing is that when I check the SVC instance which was assigned as 2nd object of the VCArray with [isOFKindClass SVC] and [isOFKindClass FVC] both come true..How is it possible? An object can have two classes? and if I check [isOfKIndClass NSArray] it comes false..it means theres nothing wrong in implementation.

Sorry about my bad english..:p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:11:19.423

The answer to part1 is that you need to expose properties on SVC, so that another class can access them, and the FVC needs to import the interface file (the .h) of svc. Thus you almost always need two things to do this: a way to find the class you want to make changes to, and the interface of that class. The property will look like this:

```
SVC.h:
@property (nonatomic, strong) NSString *title;
- (void)doSomething;

FVC:
#import "SVC.h"

SVC *svc = ...; // get a reference to it
svc.title = @"Howdie!";
[svc doSomething]; // tell the class to use the title you just set, for example 
```

To answer your second question, there are two types of these "is.." methods, isKindOfClass and isMemberOfClass. The first says is the current object a type of the provided class, or ANY superclass. The second only passes if the class is in fact an exact member. For example:

```
NSMutableData *data;
[data isKindOfClass:[NSData class]] == YES
[data isKindOfClass:[NSMutableData class]] == YES

[data isMemeberOfClass:[NSData class]] == NO
[data isMemeberOfClass:[NSMutableData class]] == YES 
```

EDIT: So the data never makes it into SVC. Well try this - a property is just a shortcut to have an ivar, a getter, (and usually) a setter. You can actually provide your own setter. So you say that (using my example above), that in SVC title is always nil, even though its set by SVC. There are only three reasons this can happen:

*   FVC has a reference to another object, but in fact you called it SVC so when the value is set, its set to another class not SVC

*   SVC was a nil object when FVC set the value (ObjectiveC handles messages to nil just fine, so you will not see any errors on the console)

*   SVC has reset the value to nil unbeknownst to you in say viewWillAppear

So the way you can find this out is override the variable setter (again using my example):

```
- (void)setTitle:(NSString *)val
{
  title = val; // ARC way
  NSLog(@"SVC - just set title to %@", title);
} 
```

Add this to SVC and see what happens.

# javascript - 单击按钮后在警报中显示表单值

> ID：12154786
> 
> 赞同：4
> 
> 时间：2012-08-28T07:40:00.973
> 
> 标签：javascript, html, button, alert

我对 HTML 很陌生。我只是试图接受表单值并希望
在警报中显示此值。我尝试以下代码，但它对我没有帮助......
我知道这是一个非常简单的问题，但我是 HTML、JavaScript 的新手。我搜索但没有找到与我的要求相关的...... Javascript函数......

```
 function updateTxt(field1,field2)
  {  
    var field1 = document.getElementById(field1);  
    var field2 = document.getElementById(field2);  
    alert(field1,field2);

    } 
```

HTML 表单

```
<input name="textfield" type="text" id="textfield" value="Search by keyword" class="search_input" >
<select name="select" id="select" class="input_list" >
          <option>Search jobs by category</option>
          <option>Business Sales Leadership Development Program</option>
          <option>Business Sales Solutions</option>
          <option>CTO</option>
          <option>Call Center</option></select>
 <input name="button" type="button" class="btn" value="Go" onClick="updateTxt(select,textfield)"> 
```

请给我提示或指导我哪里错了...
在此先感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:45:24.710

更改此代码

```
<input name="button" type="button" class="btn" value="Go" onclick="updateTxt()"> 
```

还有这个

```
 function updateTxt()
  {  
    var field1 = document.getElementById('textfield').value;  
    var field2 = document.getElementById('select').options[document.getElementById('select').selectedIndex].value;  
    alert(field1+'&'+field2);

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T07:44:07.833

您需要将字符串传递给`updateTxt`函数。并且`alert`只能采用一个参数，因此您必须连接字段的值，而不是字段本身。您的代码如下所示：

JS：

```
function updateTxt(field1,field2)
  {  
    var field1 = document.getElementById(field1).value;  
    var field2 = document.getElementById(field2).value;  
    alert(field1 + '\n' + field2);

    }  ​ 
```

HTML：

```
<input name="textfield" type="text" id="textfield" value="Search by keyword" class="search_input" >
<select name="select" id="select" class="input_list" onkeyup="updateTxt('select','txt2');">
          <option>Search jobs by category</option>
          <option>Business Sales Leadership Development Program</option>
          <option>Business Sales Solutions</option>
          <option>CTO</option>
          <option>Call Center</option></select>
 <input name="button" type="button" class="btn" value="Go" onClick="updateTxt('select', 'textfield')">​ 
```

[演示](http://jsfiddle.net/wx4Zg/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T07:58:16.417

您需要将 onClick 更改为：

```
onclick="updateTxt('select','textfield'); 
```

因为当您在 JS 中使用保留字时，这并不好 - 至少可以说 ;) 对于保留字的完整列表：[http](http://www.javascripter.net/faq/reserved.htm) ://www.javascripter.net/faq/reserved.htm 您可以看到“选择”。

顺便说一句，您可能希望将名称更改为更好的名称，并避免在您的 html 中使用“onClick”和 JS。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:47:19.240

您的代码没有 ID 为“txt2”的元素。还可以尝试使用更明确的 ID，例如“myTextField”而不是“select”，这将使您的代码更容易阅读和维护。

除此之外，Amaan 的回答应该有效。

# android - android - 如何在电子邮件客户端的电子邮件正文中将文本格式化为表格

> ID：12154790
> 
> 赞同：7
> 
> 时间：2012-08-28T07:40:21.587
> 
> 标签：android, email-client

我必须在电子邮件客户端的电子邮件正文中将文本格式化为表格。但我在某个地方读到了 android 不
支持 **<table>**标签。有没有其他选择可以做到这一点？我尝试了很多，但我仍然没有找到任何好的解决方案。请任何人都可以帮助我。

```
code 
```

String body = "<table border="+"1"+"><tr><td>第1行，第1单元格< /td>"+ "<td>第1行，第2单元格"+ "</tr>" + "<tr>"+ "<td>第 2 行，单元格 1< /td>"+ "<td>第 2 行，单元格 2</td>"+ "< /tr>"+ "< /table>" ;

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("text/html");
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject.getText());
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(body).toString());                    
startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

**实际输出是这个**

![在此处输入图像描述](../Images/2def47b78c43b0bf16812d1e469d6743.png)

**但我预期的输出类似于以下内容：**

![在此处输入图像描述](../Images/2e1ac15f197bc33b3ff1382cc4c63140.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:45:59.343

试试这个：

[如何发送 HTML 电子邮件](https://stackoverflow.com/questions/2007540/how-to-send-html-email)

好的，因为上面不起作用试试这个：

[http://www.edumobile.org/android/android-programming-tutorials/how-to-send-an-email/](http://www.edumobile.org/android/android-programming-tutorials/how-to-send-an-email/)

您示例中的代码对于没有表格的任何内容都可以正常工作。我认为这可能是被迫的，但我在这里碰壁了。

见：[在android中使用<table>等发送html邮件——真的没有相对内置的Intent方式吗？](https://stackoverflow.com/questions/7787171/sending-html-email-in-android-using-table-etc-is-there-really-no-relativel)

也许这可以解决它： [Display HTML Table in webview](https://stackoverflow.com/questions/3525649/how-to-display-table-using-html-in-webview-in-android)

或者也许你可以在你的活动中强制这样的事情（调整以适应你的目的）：

```
WebView webview = new WebView(this); setContentView(webview); String yourHtml = "<html><body><table>...</table></body></html>"; webview.loadData(yourHtml , "text/html", "utf-8"); 
```

# c# - 将 Searcharoo 仅限于某些页面

> ID：12154792
> 
> 赞同：0
> 
> 时间：2012-08-28T07:40:26.653
> 
> 标签：c#, .net, search, search-engine

我正在使用 Searcharoo.NET 来抓取具有特定语言的网站“testsite.com/en”。有“testsite.com/fr”、“testsite.com/us”等。稍后我想为每个站点上的页面编制索引，以便可以进行搜索，但我希望将不同的语言分开。

问题在于，当 searcharoo 开始在 testsite.com/en 上爬行时，它还会索引来自其他语言的页面，例如 testsite.com/fr。有没有办法防止这种情况发生？我认为我可以将爬虫限制为仅向前搜索或说在某些页面上停止，但没有从 searcharoo 找到任何关于该主题的文档。

非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:27:58.417

请看下面一个人写的博客：

```
 http://draganbl.blogspot.com/2011/04/how-do-you-use-searcharoo-library-to.html 
```

似乎您不能随心所欲，但可能会为每种语言设置一个“爬虫/蜘蛛”。我的回答似乎很模糊，但也许它可以给你一个方向。

# .net - 可以使用 .ini 文件在 .net windows 应用程序中存储数据吗？

> ID：12154800
> 
> 赞同：1
> 
> 时间：2012-08-28T07:40:57.993
> 
> 标签：.net, c#-4.0

必须重新开发具有多个控件的现有 Windows 应用程序（包含 MS Word 插件）。以前的应用程序使用数百个 ini 文件来存储数据。使用多个ini文件存储数据可以吗？或者我应该创建一个数据库并在那里存储数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:58:06.727

我认为 .net 不支持开箱即用的 ini 文件，新的方法是 xml（配置文件）

这个答案几乎没有支持inifile的链接：[Reading/writing an INI file](https://stackoverflow.com/questions/217902/reading-writing-ini-file-in-c-sharp)

如果您需要在现场升级很多版本，没有理由不继续使用 ini 文件。我个人不介意格式。

# sharepoint - SBS 2011 日志文件

> ID：12154803
> 
> 赞同：0
> 
> 时间：2012-08-28T07:41:19.453
> 
> 标签：sharepoint

每天早上 SBS 2011 都会向我发送相同的错误日志，我需要了解是否有办法解决所有错误。我经常在不同的博客上读到这些错误并不重要，在这里，感谢您的帮助：

```
enter code here 
```

事件源 事件 ID 上次出现次数 总出现次数

WinRM 142 28/08/2012 07:30:01 240

WinRM 129 28/08/2012 07:30:01 98

MSExchange CmdletLogs 6 28/08/2012 07:30:01 96事件详细信息：Échec de la cmdlet。Cmdlet 获取用户，参数 {Identity=NT AUTHORITY\SYSTEM}。

磁盘 11 28/08/2012 07:00:03 1

SharePoint 基础 6398 28/08/2012 04:31:17 1

Windows 服务器更新服务 13032 28/08/2012 03:33:31 4

DCOM 10016 28/08/2012 00:52:39 9

SharePoint 基础 5586 28/08/2012 00:00:06 1

SharePoint 基础 5767 27/08/2012 12:00:57 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T02:54:12.013

不幸的是，除了事件 ID 之外，您的问题中没有关于错误的大量详细信息。

我确实看到了 6398、5586 和 5767，我记得几天前在我维护的 SBS 2011 服务器上看到了这些。

请检查有关 proc_UpdateStatisticsNVP 的消息。如果您的消息包含此内容，那么您可能会发现以下链接很有用。

[http://blog.scuzz.ca/?p=66](http://blog.scuzz.ca/?p=66)

关于 10016 错误，这在 SBS 2011 安装后很常见，以下链接可能对此有所帮助。

[http://halfloaded.com/blog/sbs-2011-distributedcom-eventid-10016-fixed/](http://halfloaded.com/blog/sbs-2011-distributedcom-eventid-10016-fixed/)

希望这些为您指明正确的方向。

# vb.net - oracle sql参数在vb.net中不起作用

> ID：12154808
> 
> 赞同：-1
> 
> 时间：2012-08-28T07:41:29.460
> 
> 标签：vb.net, oracle, parameters

我在 vb.net 中选择 satament 来填充一些控件，还有一个带有日期值的树视图，树视图的日期值是这种`DD MON YYYY`格式，参数传递到的列格式也是这种格式。我正在尝试传递参数以这种方式

```
cmd.CommandText = "SELECT 'At CFO Approval ' || count(*) ||' Cheques' || ' of Rs.' ||nvl(to_char(sum(bpv_amt),'9,999,999,999'),0) CFOApp from check_data where sta_flg = 0 and bpv_date='" & TreeView1.SelectedValue & "'" 
```

但我担心这无论如何都不起作用，问题可能是什么，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:18:13.787

虽然我完全同意@Steve 关于使用参数化查询的评论，但在这种情况下，我只是建议添加一个适当的 TO_DATE 调用来尝试让您继续前进。尝试这个：

```
cmd.CommandText = "SELECT 'At CFO Approval ' || count(*) || " &
                  "' Cheques' || ' of Rs.' || " &
                  "nvl(to_char(sum(bpv_amt),'9,999,999,999'),0) CFOApp " &
                  "from check_data where sta_flg = 0 and " &
                  "TRUNC(bpv_date)=TO_DATE('" & TreeView1.SelectedValue & "', 'DD MON YYYY')" 
```

* * *

编辑

添加了 TRUNC() 调用日期比较。

测试如下：

```
CREATE TABLE CHECK_DATA
  (BPV_AMT   NUMBER,
   STA_FLG   NUMBER,
   BPV_DATE  DATE);

INSERT INTO CHECK_DATA (BPV_AMT, STA_FLG, BPV_DATE) VALUES (100, 0, SYSDATE);
INSERT INTO CHECK_DATA (BPV_AMT, STA_FLG, BPV_DATE) VALUES (200, 0, SYSDATE-1);
INSERT INTO CHECK_DATA (BPV_AMT, STA_FLG, BPV_DATE) VALUES (300, 1, SYSDATE);
INSERT INTO CHECK_DATA (BPV_AMT, STA_FLG, BPV_DATE) VALUES (200, 0, SYSDATE); 
```

现在，执行查询：

```
SELECT 'At CFO Approval ' || count(*) ||
       ' Cheques' || ' of Rs.' ||
       nvl(to_char(sum(bpv_amt),'9,999,999,999'),0) CFOApp
  from check_data
  where sta_flg = 0 AND 
        TRUNC(bpv_date) = TO_DATE('29 Aug 2012', 'DD MON YYYY'); 
```

结果是

```
At CFO Approval 2 Cheques of Rs.           300 
```

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:13:44.810

像往常一样，不要使用字符串连接来构建 sql 文本。
始终使用参数化查询。为什么？见[小鲍比桌](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)

```
cmd.CommandText = "SELECT 'At CFO Approval ' || count(*) ||' Cheques' || " & _
                  "' of Rs.' ||nvl(to_char(sum(bpv_amt),'9,999,999,999'),0) CFOApp " & _
                  "from check_data where sta_flg = 0 and bpv_date=:bpvdate"

cmd.Parameters.AddWithValue(":bpvdate", Convert.ToDateTime(TreeView1.SelectedValue)) 
```

我假设树视图包含有效日期

如果您的格式是 DD MMM YYYY，那么您可以尝试这种转换（注意三个字母月份）

```
Dim d as DateTime = DateTime.ParseExact(TreeView1.SelectedValue.ToString(), _
                    "dd MMM yyyy", CultureInfo.CurrentCulture);
cmd.Parameters.AddWithValue(":bpvdate", d) 
```

相反，如果您有完整的月份名称，那么转换应该是

```
Dim d as DateTime = DateTime.ParseExact(TreeView1.SelectedValue.ToString(), _
                    "dd MMMM yyyy", CultureInfo.CurrentCulture); 
```

# java - 使用 itext 全局定位图像

> ID：12154809
> 
> 赞同：0
> 
> 时间：2012-08-28T07:41:35.967
> 
> 标签：java, itext

任何人都知道iText中是否有任何特殊坐标可以全局定位文档右下角的图像？

我不确定它是否存在...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:00:26.683

首先，我们需要知道您是在谈论从头开始创建的文档还是将图像添加到现有文档。

如果您从头开始创建文档，则右下角的坐标取决于您在创建 Document 对象时使用的页面大小。例如：对于 A4 页面，右下角有 x = 595 ；y = 0（测量是在“用户单位”中完成的，默认情况下与点相对应）。所以如果你想在右下角定位一个图像，你需要使用 img.setAbsolutePosition(595 - img.getScaledWidth(), 0); 然后只需使用 document.add(img); 添加图像。免责声明：如果您使用的页面大小与默认值不同，或者如果您定义了 CropBox，则需要相应地调整坐标。

如果要将图像添加到现有文档，则需要检查页面大小，并且需要检查是否有 CropBox。您需要根据这些值计算图像的偏移量。您可以再次使用 setAbsolutePosition()，但您需要将图像添加到使用 getOverContent() 或 getUnderContent() 方法获得的 PdfContentByte 对象（假设您使用的是 PdfStamper）。

# php - 如何通过 javascript/php 存储和发送 $_FILES

> ID：12154811
> 
> 赞同：1
> 
> 时间：2012-08-28T07:41:41.770
> 
> 标签：php, jquery, file, youtube, multipartform-data

我正在尝试设置一个可以同时上传到 YouTube 和 Vimeo 的表单。我更喜欢使用 Posterous.com 来做类似的事情，但自从他们被 twitter 收购后，他们的帮助团队已经从地球上消失了，因为我的电子邮件现在没有得到回复（他们已经删除了一堆服务)...

所以无论如何，这是 youtube 进程应该如何工作的：

1.  为要通过网络表单上传的视频设置标题和类别
2.  提交表单，从 youtube 取回访问令牌
3.  生成另一个表单，允许您选择要上传的文件
4.  提交表单、访问令牌和文件已发送，YouTube 上传视频

我想要做的是通过拖放上传器将其变成一个步骤：

1.  将文件拖放到页面上
2.  javascript抓取文件信息，将文件名设置为视频标题并使用默认类别
3.  javascript调用php并将文件名和类别发送到youtube，获取访问令牌并使用文件输入创建表单
4.  获取令牌后，发送 POST（通过 PHP）请求，文件上传存储在会话变量中（现在我必须再次选择文件并单击提交）

我不应该能够使用第一步中的文件信息，将其存储在会话变量中并通过 php 以编程方式提交令牌和文件信息吗？我不知道如何发送这些数据，就像它作为表单提交一样发送，而且我并不总是从 youtube 获取响应代码来修复我的代码。

这可能是我需要的答案：[通过 curl 发送 xml 和标头，](https://stackoverflow.com/questions/9250702/sending-xml-and-headers-via-curl)但我不知道如何设置`$xmlString`或`$videoData`

编辑：：

我想我需要通过 PHP 而不是 javascript 来做到这一点，因为我正在尝试修改以下代码：

```
/**
 * Create upload form by sending the incoming video meta-data to youtube and
 * retrieving a new entry. Prints form HTML to page.
 *
 * @param string $VideoTitle The title for the video entry.
 * @param string $VideoDescription The description for the video entry.
 * @param string $VideoCategory The category for the video entry.
 * @param string $nextUrl (optional) The URL to redirect back to after form upload has completed.
 * @return void
 */

function createUploadForm($videoTitle, $videoCategory, $nextUrl = null) {
$httpClient = getAuthSubHttpClient();
$youTubeService = new Zend_Gdata_YouTube($httpClient);
$newVideoEntry = new Zend_Gdata_YouTube_VideoEntry();

$newVideoEntry->setVideoTitle($videoTitle);

//make sure first character in category is capitalized
$videoCategory = strtoupper(substr($videoCategory, 0, 1))
    . substr($videoCategory, 1);
$newVideoEntry->setVideoCategory($videoCategory);

// convert videoTags from whitespace separated into comma separated

$tokenHandlerUrl = 'https://gdata.youtube.com/action/GetUploadToken';
try {
    $tokenArray = $youTubeService->getFormUploadToken($newVideoEntry, $tokenHandlerUrl);
    if (loggingEnabled()) {
        logMessage($httpClient->getLastRequest(), 'request');
        logMessage($httpClient->getLastResponse()->getBody(), 'response');
    }
} catch (Zend_Gdata_App_HttpException $httpException) {
    print 'ERROR ' . $httpException->getMessage()
        . ' HTTP details<br /><textarea cols="100" rows="20">'
        . $httpException->getRawResponseBody()
        . '</textarea><br />'
        . '<a href="session_details.php">'
        . 'click here to view details of last request</a><br />';
    return;
} catch (Zend_Gdata_App_Exception $e) {
    print 'ERROR - Could not retrieve token for syndicated upload. '
        . $e->getMessage()
        . '<br /><a href="session_details.php">'
        . 'click here to view details of last request</a><br />';
    return;
}

$tokenValue = $tokenArray['token'];
$postUrl = $tokenArray['url'];

// place to redirect user after upload
if (!$nextUrl) {
    $nextUrl = $_SESSION['homeUrl'];
} 

//instead of echoing the form below, send $_FILES from previous form submit

print <<< END
    <br />      

    <form id="uploadToYouTubeForm" action="${postUrl}?nexturl=${nextUrl}" method="post" enctype="multipart/form-data">
    <input id="uploadToYouTube" name="file" type="file" />
    <input name="token" type="hidden" value="${tokenValue}"/>
    <input value="Upload Video File" type="submit" />
    </form>

END;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:58:47.060

我想我可能有一个解决方案。以下是我要使用的表格：

```
<!--removing the action ensures form will be sent via javascript, then when that request comes back, I can add in the authenticated youtube URL needed-->
<form id="upload" action="" method="POST" enctype="multipart/form-data" class="form-horizontal"><!--upload.php-->
  <fieldset>
    <legend><h1>Video File Upload</h1></legend>
    <input type="hidden" id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="1000000000" /> <!--1GB-->
    <p id="filedrag">Drag and drop a video file from your computer here. Or use the 'File upload' button below.</p><!--dragFileHere-->
    <label class="control-label" for="fileselect">Files to upload:</label>
    <input type="file" id="fileselect" name="fileselect[]" /> <!--multiple="multiple"-->
    <button class="btn" id="submitbutton" type="submit">Upload Files</button> <!--hidden via js/css-->
    <div class="progress progress-striped active">
      <div class="bar" style="width: 0%;"></div>
    </div>
    <label class="hide" for="video-title">Title</label>
    <input type="text" id="video-title" class="span4" placeholder="Video Title"/>
    <label class="control-label" for="video-category">Category</label>
    <select id="video-category" name="videoCategory" class="span4">
      <option value="Autos">Autos &amp; Vehicles</option>
      <option value="Music">Music</option>
      .......
      <option value="Entertainment" selected>Entertainment</option>
    </select>
    <input id="token" type="text" placeholder="token"/> <!--will be hidden-->
</div>
</fieldset>
</form> 
```

通过将 action 属性留空（并使用我已经准备好的脚本来响应用户交互），我可以确保表单是通过 javascript 以编程方式提交的：

```
<script src=http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js></script>
<script src=_js/video_app.js" type="text/javascript></script>
<script>
  /*
  filedrag.js - HTML5 File Drag & Drop demonstration
  Featured on SitePoint.com
  Developed by Craig Buckler (@craigbuckler) of OptimalWorks.net (without jQuery)
  */

  // output information
  function Output(msg) {
    $('#messages').html(msg + $('#messages').html());
  }

  // file drag hover
  function FileDragHover(e) {
    e.stopPropagation();
    e.preventDefault();
    $(this).addClass("hover");
  } 

  function FileDragOut(e) {
    $(this).removeClass("hover");
  }

  // file selection
  function FileSelectHandler(e) {
    // cancel event and hover styling
    FileDragHover(e);

    // fetch FileList object
    var files = e.target.files || e.dataTransfer.files;
    // process all File objects
    for (var i = 0, f; f = files[i]; i++) {
      ParseFile(f); //prints file data to div and optionally displays content of selected file
      UploadFile(f); //uploads file to server
    }
  }

  // output file information
  function ParseFile(file) {
    videoName = file.name;
    videoType = file.type;
    videoURL = "http://localhost/"+videoName;
    videoCategory = $('#video-category').val();

    Output(
      "</strong> type: <strong>" + file.type +
      "</strong> size: <strong>" + file.size +
      "</strong> bytes</p>"
    );

    // sets a default value because a title is needed for youtube to send response  
    if( $('#video-title').val() == $('#video-title').attr('placeholder') ) {
      $('#video-title').val(videoName);
    }

    var reader = new FileReader();
    reader.onload = function(e) {

      var fileContents = e.target.result;

      Output(
        '<img src="'+e.target.result+'"/>'
      );
    }
    reader.readAsDataURL(file);

    //get upload token
    ytVideoApp.prepareSyndicatedUpload(videoName, videoCategory);
  }

  // upload video files
  function UploadFile(file) {       
    var xhr = new XMLHttpRequest();
    if (xhr.upload && file.size <= $('#MAX_FILE_SIZE').val()) { //&& file.type == "video/mp4" or video/*
      xhr.upload.addEventListener("progress", function(e) {
        var pc = Math.ceil(e.loaded / e.total * 100);
      }, false);
      // file received/failed
      xhr.onreadystatechange = function(e) {
        if (xhr.readyState == 4) {
          if(xhr.status == 200) { //success

          } else { //fail  

          }
        }
      };
      // start upload
      xhr.open("POST", 'upload.php', true); //$("#upload").attr('action')
      xhr.setRequestHeader("X_FILENAME", file.name);
      xhr.send(file);
    }
  }

  // initialize
  function Init() {
    // file select
    $('#fileselect').change(FileSelectHandler);
    // is XHR2 available?
    var xhr = new XMLHttpRequest();
    if (xhr.upload) {
      // file drop
      $('#filedrag').bind('dragover', FileDragHover);
      $('#filedrag').bind('dragleave', FileDragOut);

      //I can't get the below line to work, so I've used the ugly fallback
      //$('#filedrag').bind('drop', FileSelectHandler);
      document.getElementById('filedrag').addEventListener("drop", FileSelectHandler, false);           

      filedrag.style.display = "block";
      // remove submit button
      submitbutton.style.display = "none";
    }
  }
  // call initialization file
  if (window.File && window.FileList && window.FileReader) {
    Init();
  }
</script> 
```

_js/video_app.js：

```
/**
* Zend Framework
* @package    Zend_Gdata
....
/**
* provides namespacing for the YouTube Video Application PHP version (ytVideoApp)
**/
var ytVideoApp = {};
/**
* Sends an AJAX request to the server to retrieve a list of videos or
* the video player/metadata.  Sends the request to the specified filePath
* on the same host, passing the specified params, and filling the specified
* resultDivName with the resutls upon success.
* @param {String} filePath The path to which the request should be sent
* @param {String} params The URL encoded POST params
* @param {String} resultDivName The name of the DIV used to hold the results
*/
ytVideoApp.sendRequest = function(filePath, params, resultDivName) {
  if (window.XMLHttpRequest) {
    var xmlhr = new XMLHttpRequest();
  } else {
    var xmlhr = new ActiveXObject('MSXML2.XMLHTTP.3.0');
  }

  xmlhr.open('POST', filePath);
  xmlhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); 

  xmlhr.onreadystatechange = function() {
    var resultDiv = document.getElementById(resultDivName);
    if (xmlhr.readyState == 1) {
      resultDiv.innerHTML = '<b>Loading...</b>'; 
    } else if (xmlhr.readyState == 4 && xmlhr.status == 200) {
      if (xmlhr.responseText) {
        resultDiv.innerHTML = xmlhr.responseText;
      }
    } else if (xmlhr.readyState == 4) {
      alert('Invalid response received - Status: ' + xmlhr.status);
    }
  }
  xmlhr.send(params);
}

ytVideoApp.prepareSyndicatedUpload = function(videoTitle, videoCategory, fileContents) {    
  var filePath = '_scripts/operations.php';
  var params = 'operation=create_upload_form' +
    '&videoTitle=' + videoTitle +
    '&videoCategory=' + videoCategory;
  ytVideoApp.sendRequest(filePath, params, ytVideoApp.SYNDICATED_UPLOAD_DIV);
} 
```

_scripts/operations.php：

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_YouTube');
Zend_Loader::loadClass('Zend_Gdata_AuthSub');
Zend_Loader::loadClass('Zend_Gdata_App_Exception');
/*
 * The main controller logic.
 *
 * POST used for all authenticated requests
 * otherwise use GET for retrieve and supplementary values
 */
session_start();
setLogging('on');
generateUrlInformation();

if (!isset($_POST['operation'])) {
  // if a GET variable is set then process the token upgrade
  if (isset($_GET['token'])) {
    updateAuthSubToken($_GET['token']);
  } else {
    if (loggingEnabled()) {
      logMessage('reached operations.php without $_POST or $_GET variables set', 'error');
      header('Location: add-content.php');
    }
  }
}

$operation = $_POST['operation'];

switch ($operation) {
  ....
  case 'create_upload_form':
    createUploadForm($_POST['videoTitle'],
                     $_POST['videoCategory'],
                     $_POST['videoContents']);
  break;
  ....
  default:
    unsupportedOperation($_POST);
  break;
}

function createUploadForm($videoTitle, $videoCategory, $nextUrl = null) {
  $httpClient = getAuthSubHttpClient();
  $youTubeService = new Zend_Gdata_YouTube($httpClient);
  $newVideoEntry = new Zend_Gdata_YouTube_VideoEntry();

  $newVideoEntry->setVideoTitle($videoTitle);

  //make sure first character in category is capitalized
  $videoCategory = strtoupper(substr($videoCategory, 0, 1))
                              . substr($videoCategory, 1);
  $newVideoEntry->setVideoCategory($videoCategory);

  // convert videoTags from whitespace separated into comma separated
  $tokenHandlerUrl = 'https://gdata.youtube.com/action/GetUploadToken';
  try {
    $tokenArray = $youTubeService->getFormUploadToken($newVideoEntry, $tokenHandlerUrl);
    if (loggingEnabled()) {
      logMessage($httpClient->getLastRequest(), 'request');
      logMessage($httpClient->getLastResponse()->getBody(), 'response');
    }
  } catch (Zend_Gdata_App_HttpException $httpException) {
    print 'ERROR ' . $httpException->getMessage()
                   . ' HTTP details<br /><textarea cols="100" rows="20">'
                   . $httpException->getRawResponseBody()
                   . '</textarea><br />'
                   . '<a href="session_details.php">'
                   . 'click here to view details of last request</a><br />';
    return;
  } catch (Zend_Gdata_App_Exception $e) {
    print 'ERROR - Could not retrieve token for syndicated upload. '
                 . $e->getMessage()
                 . '<br /><a href="session_details.php">'
                 . 'click here to view details of last request</a><br />';
    return;
  }
  $tokenValue = $tokenArray['token'];
  $postUrl = $tokenArray['url'];
  // place to redirect user after upload
  if (!$nextUrl) {
    $nextUrl = $_SESSION['homeUrl'];
  }

  //instead of outputting the form below, send variables (json???) to be interpreted by xmlhr in _js/video_app.js
  //print <<< END
  //<br />      
  //<p>url: ${postUrl}?nexturl=${nextUrl}</p>
  //<form id="uploadToYouTubeForm" action="temp.php" method="post" enctype="multipart/form-data">
  //<input id="uploadToYouTube" name="file" type="file" onchange="autoUploadToYouTube();" /><br/>
  //token: <input id="token" name="token" type="text" value="${tokenValue}"/><br/>
  //<input value="Manual upload" type="submit" />
  //</form>     
  //END;
  //} 
```

因此，第一个 javascript 侦听输入 type="file" 的拖放（在 div 上）或 change() 事件。表单实际上并未提交，而是收集数据并通过 ajax 发送到 php 脚本，该脚本返回上传所需的令牌和 url。然后，原始 PHP 脚本会输出一个表单来选择文件（以及一个包含令牌的隐藏字段）。相反，我想将 url 和 token 作为变量传递，并使用 XMLHttpRequest 将这些变量放入表单的 action 属性中，并将键设置为隐藏输入字段的值。然后可以通过以下方式提交该字段`$('#uploadToYouTubeForm').submit();`

可能出现的唯一问题是将附加信息发送到 youtube 应用程序，我希望它会简单地忽略它，或者我可能需要以编程方式删除 youtube 不接受的字段（标题、类别、最大文件大小）.. ..

# r - R- 从多列中获取一列

> ID：12154814
> 
> 赞同：-1
> 
> 时间：2012-08-28T07:41:51.003
> 
> 标签：r

我有从 350 到 2500 的波长，每个都有数据：

```
x350    x351    x352    x353    x354 ...... x2500
0.18    0.17    0.17    0.17    0.16 ...... 0.3
0.16    0.15    0.15    0.15    0.15 ...... 0.47
0.14    0.14    0.13    0.13    0.13 ...... 0.35 
```

我需要制作一个没有波长名称的列，并为这个新列命名：

```
Wave
0.18
0.16
0.14
0.17
0.15
0.14
0.17
0.15
0.13
0.16
0.15
0.13
.
.
.
0.3
0.47
0.35 
```

`m`是我的文件，wavelenghts 的列是从 17 col 到 2167 col。我试过了：

```
a <- list(m[1:16,17:2167]) 
```

但我得到的列表之间的列名：

```
list(structure(list(X350 = c(0.15723315, 0.138406682, 0.174909807, 
0.143139974, 0.123193808, 0.154449448, 0.163255619, 0.126194713, 
0.14327512, 0.066265248, 0.139851395, 0.158271497, 0.158060045, 
0.145313933, 0.143890661), X351 = c(0.154324452, 0.135509959, 
0.173350322, 0.139867145, 0.121439474, 0.15276091, 0.160391152, 
0.125592826, 0.140349489, 0.065316491, 0.137927937, 0.158400317, 
0.156211611, 0.142498763, 0.141353986), X352 = c(0.151243533.... 
```

如何从 2465 列中只获得一个名称的列？

更多信息

```
str(m)

'data.frame':   16 obs. of  2167 variables:
 $ pott : int  48 49 50 51 52 53 54 55 56 57 ...
 $ b    : chr  "B1" "B1" "B1" "B1" ...
 $ F : int  1 1 1 1 1 1 1 1 1 1 ...
 $ G  : chr  "Sunstar" "Quarrion" "Nacozari" "W130114" ...
 $ R : int  3 3 3 3 3 3 3 3 3 3 ...
 $ D  : int  80 80 81 80 81 80 82 82 82 82 ...
 $ W: num  1.8 1.5 1.3 1.9 1.8 1.25 1.85 2.1 1.6 2.4 ...
 $ S : num  43.4 35.7 44.7 48.6 45.3 35.5 49.2 49.1 46.8 41.5 ...
 $ R  : num  -0.327 1.149 2.348 1.636 1.952 ...
 $ V  : num  76.4 49 118.9 108 114.5 ...
 $ J    : num  158 114 191 169 183 ...
 $ P: num  19.9 10.6 24.1 21.1 23.6 ...
 $ Ce : num  0.367 0.13 0.466 0.36 0.462 ...
 $ Ci   : num  273 246 280 263 272 ...
 $ S : num  23.5 29 30.9 29.4 24.1 ...
 $ L  : num  42.5 34.4 32.4 34 41.4 ...
 $ X350 : num  0.176 0.157 0.138 0.175 0.143 ...
 $ X351 : num  0.172 0.154 0.136 0.173 0.14 ...
 $ X352 : num  0.169 0.151 0.133 0.172 0.138 ...
 $ X353 : num  0.167 0.147 0.132 0.17 0.137 ...
 $ X354 : num  0.165 0.147 0.13 0.167 0.133 ...
 $ X355 : num  0.162 0.146 0.127 0.166 0.13 ...
 $ X356 : num  0.159 0.144 0.126 0.164 0.128 ...
 $ X357 : num  0.158 0.14 0.125 0.161 0.125 ...
 $ X358 : num  0.155 0.138 0.123 0.159 0.124 ...
 $ X359 : num  0.153 0.137 0.121 0.157 0.123 ...
 $ X360 : num  0.15 0.135 0.12 0.154 0.122 ...
....$2500 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:40:46.413

我猜您的数据在文本文件中

```
data <- read.table("your_file", header=T, quote="\"") 
```

所以，数据看起来像

```
structure(list(x350 = c(0.18, 0.16, 0.14), x351 = c(0.17, 0.15, 
0.14), x352 = c(0.17, 0.15, 0.13), x353 = c(0.17, 0.15, 0.13)), .Names = c("x350", 
"x351", "x352", "x353"), class = "data.frame", row.names = c(NA, 
-3L)) 
```

和

```
result <- data.frame(Wave = unlist(data,use.names=FALSE)) 
```

会产生

```
 Wave
1  0.18
2  0.16
3  0.14
4  0.17
5  0.15
6  0.14
7  0.17
8  0.15
9  0.13
10 0.17
11 0.15
12 0.13 
```

# php - .htaccess 将普通 url 重定向到查询字符串

> ID：12154816
> 
> 赞同：1
> 
> 时间：2012-08-28T07:42:04.060
> 
> 标签：php, .htaccess, url, url-rewriting, rewrite

我有一个形式的网址：

```
www.example.com/r/abc/1234 
```

我想重写为：

```
www.example.com/r.php?deb=abc&id=1234 
```

还有另一个网址：

```
www.example.com/r/12bcd-qsqs-343-wdwd/1234 
```

应该重写为：

```
www.example.com/r.php?abc_id=12bcd-qsqs-343-wdwd&id=1234 
```

这两个规则都应该由 .htaccess 处理。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:52:27.303

尝试类似：

```
RewriteRule (.*)/(.*)/(.*)$ path_to_php_files/$1.php?deb=$2&id=$3 [QSA,L,NC] 
```

不幸的是，使用此规则，您将始终拥有第一个 $_GET 参数，我希望您正确设置了 DirectoryIndex。我不认为这对于

```
www.example.com/r/abc/1234
www.example.com/r/12bcd-qsqs-343-wdwd/1234 
```

如果您有动态链接，您可以将 abc 和 12bcd-qsqs-343-wdwd 传递给 2 个不同的 $_GET 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:01:40.403

您要重定向的两个 URI 看起来都相似，除了第二个`-`在第一个查询参数中有连字符。

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^r/([^-]+)/(.+)/?$ r.php?deb=$1&id=$2 [L,QSA]

RewriteRule ^r/([a-z0-9-]+)/(.+)/?$ r.php?abc_id=$1&id=$2 [L,QSA,NC] 
```

# sql-server-2008 - 计划作业失败

> ID：12154817
> 
> 赞同：0
> 
> 时间：2012-08-28T07:42:09.167
> 
> 标签：sql-server-2008, sql-server-2005

我有一个计划作业，在 SQL Server 2008 中每 8 小时进行一次备份。直到前天一切正常，但突然间作业失败并出现以下错误消息。

以用户身份执行：NT AUTHORITY\SYSTEM。文件“FilePath\FileName.BAK:”112 上发生不可恢复的 I/O 错误（无法检索此错误的文本。原因：15105）。[SQLSTATE 42000]（错误 3271）备份数据库异常终止。[SQLSTATE 42000]（错误 3013）。步骤失败。

我尝试在谷歌搜索中没有得到确切的想法。考虑我是 SQL Server 2008 中的新手

任何建议都将受到高度重视。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T07:46:18.833

此错误的最常见原因是缺少执行备份的空间。

其他原因是数据库损坏或硬件问题。

建议你`DBCC CHECKDB`尽快跑。

# .htaccess - 子域，包括 htaccess 重定向

> ID：12154818
> 
> 赞同：1
> 
> 时间：2012-08-28T07:42:13.637
> 
> 标签：.htaccess, mod-rewrite, redirect

我有一个重定向到 domain.com/code 的子域 code.domain.com

我想重定向例如：code.domain.com/hello/world.html 到 domain.com/code/?path=hello/world.html

这是我到目前为止所拥有的：

```
RewriteEngine ON
RewriteRule ^code/(.+)$ http://domain.com/code/?path=$1 
```

但我不确定它有什么问题，它似乎不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:54:03.450

在根目录 htaccess 文件（不是代码目录）中使用这些规则（如果需要，您也可以将 code.domain.com 指向根目录）：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^code.domain.com$
RewriteRule ^(.+)$ /code/?path=$1 
```

# python - Py2Exe 本地服务器不执行 CGI

> ID：12154819
> 
> 赞同：1
> 
> 时间：2012-08-28T07:42:19.527
> 
> 标签：python, cgi, py2exe

我有一个依赖于 CGI 脚本的 Python 程序，当我使用 CGIHTTPServer 启动 Python BaseHTTPServer 时该程序可以工作。但我希望在不安装 Python 的情况下运行所有​​这些，所以我使用了 Py2Exe。

我设法从我的脚本创建了一个 .exe，它在执行时确实创建了一个工作的本地 Web 服务器。然而，CGI 脚本只是显示为代码而不是执行。

这是整个服务器脚本，它还启动默认浏览器：

```
#!/usr/bin/env python

import webbrowser
import BaseHTTPServer
import CGIHTTPServer

server = BaseHTTPServer.HTTPServer
handler = CGIHTTPServer.CGIHTTPRequestHandler
server_address = ("", 8008)
handler.cgi_directories = ["/cgi"]
httpd = server(server_address, handler)
webbrowser.open_new("http://localhost:8008/cgi/script.py");
httpd.serve_forever() 
```

但是，该 script.py 只是显示而不执行。我不知道为什么，我在 handler.cgi_directories 中尝试了几个不同的版本，以防万一......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T03:37:49.880

问题是 py2exe 仅将您的服务器脚本转换为 exe，所有 cgi 脚本仍然是 .py 并且它们需要安装 python 才能运行。尝试转换目录中的每个脚本`'cgi'`。
假设您在`server.py`根目录和 cgi 脚本中应该看起来像 `wwwroot\cgi-bin``setup.py`

```
#!usr/bin/env python
from distutils.core import setup
import py2exe, os

setup(name='server',
    console=['server.py'],
    options={
                "py2exe":{
                        "unbuffered": True,
                        "packages": "cgi, glob, re, json, cgitb",       # list all packages used by cgi scripts
                        "optimize": 2,
                        "bundle_files": 1
                }},
    zipfile="library.zip")
os.rename("dist\\library.zip","dist\\library.zip.bak")                  # create backup of the library file

files=[]
for f in os.listdir("wwwroot\\cgi-bin"):                                # list all cgi files with relative path name
    files.append("wwwroot\\cgi-bin\\"+f)

setup(name='cgi',
    console= files,
    options={
        "py2exe":{
                        "dist_dir": "dist\\wwwroot\\cgi-bin",
                        "excludes": "cgi, glob, re, json, cgitb",       # we are going to discard this lib, may as well reduce work
                        "bundle_files": 1
                }
            },
    zipfile="..\\..\\library.zip")                                      # make sure zipfile points to same file in both cases

os.remove("dist\\library.zip")                                          # we don't need this generated library
os.rename("dist\\library.zip.bak","dist\\library.zip")                  # we have already included everything in first pass 
```

# python - 如何指定要运行的生菜场景

> ID：12154822
> 
> 赞同：6
> 
> 时间：2012-08-28T07:42:40.827
> 
> 标签：python, testing, lettuce

如何指定运行哪个生菜场景？

在使用python lettuce测试框架时，我经常遇到这种情况，一个场景失败了，然后我想放大这个场景来修复这个场景

我们可以指定在功能文件中运行哪个生菜场景吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-28T05:50:48.040

您可以使用标签进行所需的测试。例如：

```
 Scenario: Set off time in free time slot
        Given I click first free time slot
        And I choose menu item "Off"
        And I enter time that is in free interval
        When I click button "Ok"
        Then I see offtime time slot with title that matches with saved interval

    @wip
    Scenario: Set free time on off time
        Given I click last off time slot
        And I choose menu item "Set working"
        And I enter time that is in last off interval
        When I click button "Ok"
        Then I see freetime time slot with title that matches with saved interval 
```

然后当你运行生菜时，只需使用

> ./manage.py 收获 -t wip

它只会运行标记有标签**@wip**的那些场景，在我的情况下**wip**是用于正在进行的工作

如果它没有 django 而只是生菜，那么使用

> 生菜 -t wip

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T06:24:04.873

在 JohnWang 指定的[文档](http://lettuce.it/reference/cli.html#running-only-some-scenarios-of-a-specific-feature-file)中，我们有这样的文档来实现：

```
lettuce xxx.feature -s 1,2,3 
```

# android - android开发的cpu和内存密集程度如何？

> ID：12154825
> 
> 赞同：6
> 
> 时间：2012-08-28T07:42:46.517
> 
> 标签：android, memory, hardware, cpu

我已经编程了大约两年（android 和 java 几个月），但我仍然不知道处理器（速度和内核）和 RAM 量对“编程体验”（编译）有什么影响时间、工具的响应能力、整体工作流程等）。

（如果允许）具体一点（否则忽略）：我即将购买 13 英寸 MacBook Pro 并尝试在 i5（2.5 GHz 双核）和 i7（2.9 GHz）之间做出选择双核）并发现这很难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:39:28.180

我不经常在 Android 中编程，甚至不经常使用 Eclipse，但我知道在我的旧 1GB 笔记本电脑中，Eclipse 需要很长时间才能加载并且非常缓慢，而我的新 8GB 几乎可以立即加载，几乎完美无瑕。但这两款笔记本电脑的唯一区别不仅仅是 RAM 或 CPU，旧笔记本电脑正在旋转 5400rpm 的磁盘盘片，而我的新笔记本电脑使用坚固的芯片。

不过，特别是在 Android 开发中，您将同时运行模拟器和可能的多个模拟器实例。这些模拟器非常消耗内存，而且 Eclipse 也不是轻量级的。你永远不会想要交换，交换只是为了让系统在内存不足时不会开始杀死进程，但你不希望它被日常使用的任何东西填满。如果您的系统开始交换，则表明它非常需要更多 RAM。

根据我个人的经验，更大更快的 RAM 通常比更快的 CPU 更有助于响应速度（尽管您仍然需要至少获得中档 CPU）；编译通常受 I/O 限制（尽管这可能因代码库而异），因此最好操作系统可以将您当前正在使用的所有文件保存在 RAM 中的磁盘缓存中，并且对于加载时间，您需要快速硬盘驱动器（或者甚至更好的是 SSD；因为快速硬盘驱动器噪音更大、振动更大、电池消耗量更大，有时这对于您桌子下方的台式机塔是可以接受的，但对于笔记本电脑来说却不是）。

另一个重要的考虑因素是 CPU 的省电功能和电池寿命，如果您打算在途中使用它；重量、屏幕和键盘尺寸、触摸板的“手感”（是否太滑、太粗糙等；一旦习惯了，触摸板比鼠标更快、更舒适，因为它离鼠标更近了）键盘）。不要只比较数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T08:47:29.770

我有三台开发计算机。一个带有 i7、8GB 内存和一个带有 Windows 7 的 SSD 的 Dell Latitude。另一个是带有 OS X 的 17' i7、8GB 内存、SSD Macbook Pro。最后一个是旧的惠普小型设备、Core2Duo、2GB 内存和一个慢速硬盘。

这三个都适用于 Eclipse，并且 NONE 会以我想要的速度运行模拟器。即使在 3000 美元的笔记本电脑上，模拟器也很慢 - i5 和 i7 之间的差异不会那么大。

如果我是你，我会选择其中更便宜的一款，并购买一部体面的 Android 手机来运行该软件。

# hadoop - Hadoop：/usr/lib/hadoop-0.20.2/conf/slaves：没有这样的文件或目录

> ID：12154826
> 
> 赞同：1
> 
> 时间：2012-08-28T07:42:48.443
> 
> 标签：hadoop

我完全按照hadoop官方网站上的步骤操作，但它总是显示以下错误：

```
starting namenode, logging to /home/videni/Tools/hadoop-1.0.3/libexec/../logs/hadoop-videni-namenode-videni-Latitude-E6400.out
cat: /usr/lib/hadoop-0.20.2/conf/slaves: No such file or directory
cat: /usr/lib/hadoop-0.20.2/conf/masters: No such file or directory
starting jobtracker, logging to /home/videni/Tools/hadoop-1.0.3/libexec/../logs/hadoop-videni-jobtracker-videni-Latitude-E6400.out
cat: /usr/lib/hadoop-0.20.2/conf/slaves: No such file or directory 
```

现在只想设置一个Standalone Operation，是不是要设置core-site.xml、hdfs-site.xml、mapred-site.xml这三个xml文件？
我检查了日志文件，其中一些说`Error: JAVA_HOME is not set`，但我将它设置在 hadoop-env.sh 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T18:14:46.943

配置文件取决于 $HADOOP_HOME 路径。确保在 ~/.bashrc 中正确设置了 $HADOOP_HOME。

# android - 查看示例项目后在 Eclipse 中搞砸了

> ID：12154827
> 
> 赞同：-2
> 
> 时间：2012-08-28T07:42:56.180
> 
> 标签：android, eclipse

我导入了一个示例 4.0.3 项目，从项目资源管理器列表中删除它后，一切都丢失了，现在我在包资源管理器中没有任何项目？
此外，现在在导入这些旧项目时，例如名称“On”将带有名称“OnActivity”，但仍然无法运行。
其他工作区中的每个文件都可以，我尝试清理但仍然没有效果。 ![我尝试创建的新项目的屏幕截图](../Images/5059c98e20cd821499791784f4f1f06f.png)

我是开发新手，请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:02:12.323

`Windows`在文件浏览器中从您的工作区恢复源代码。如果所有恢复尝试都失败，您可以从现有（恢复的）代码创建项目。

你想运行什么项目？如果`APIDemo`或`QAActivity`，则日志会显示您无法运行它们的原因。

而不是使用`Play button`（开始）启动，使用下拉三角形并选择要运行的项目，否则`XML`将运行（显然这不起作用）。

此外，请确保`Eclipse`知道这是`Android Project`您正在尝试运行的。

# php - 上传 facebook 事件图片会引发错误

> ID：12154830
> 
> 赞同：3
> 
> 时间：2012-08-28T07:43:13.390
> 
> 标签：php, facebook, zend-framework

我正在尝试使用图片创建事件，但是当我将图片上传到 Facebook 时，它会抛出一个错误**(#324) 图片文件丢失或无效**

这是上传图片的功能。

```
public function uploadFacebookEventPicture($fullPath, $eventId) {
    $mainImage = '@' . $fullPath;   
    $imgData = array(
        'picture' => $mainImage
    );
    try {
        $data = $this->facebook->api('/'.$eventId, 'post', $imgData);
        return $data;
    } catch (FacebookApiException $e) {
        error_log('Failed to attach picture to event. Exception: ' . $e->getMessage());
    }       
    return null;
} 
```

我在表单发布后使用的代码段

```
if ($file[$name]['error'] == 0) {
                                    $fileName = $file[$name]['name'];
                                    $fileInfo = pathinfo($fileName);
                                    $newFileName = md5($fileName . microtime()) . '.' . $fileInfo['extension'];
                                    $fullPath = $this->config->applications->uploadPath . $newFileName;
                                    $form->$name->addFilter('Rename', $fullPath);

                                    if ($form->$name->receive()) {
                                        $resize = new SimpleImage();
                                        $resize->load($fullPath);
                                        $resize->resizeToWidth($this->config->applications->resize->width);
                                        $resize->save($fullPath);
                                        // Gathering data for saving files information
                                        $fileInfo = array(
                                            'name' => $newFileName,
                                            'type' => FileTypes::IMAGE,
                                            'description' => 'Application: Uploaded from Events form in back-end',
                                        );

                                        $fileId = $dbFiles->save($fileInfo);

                                        $eventFileData = array(
                                            'event_id' => $eventId,
                                            'file_id' => $fileId,
                                            'main_image' => ($name == 'mainImage') ? 1 : 0
                                        );                                  
                                        $dbEventFiles->save($eventFileData);
                                        if ($name === 'mainImage') {
                                            $success = **$this->uploadFacebookEventPicture($fullPath, $eventData['fb_event_id']**);
                                        }
                                    }
                                } 
```

facebook 对象是使用上传文件创建的 true

```
 $facebook = new Facebook(array(
                'appId' => $config->facebook->appId,
                'secret' => $config->facebook->secret,
                'fileUpload' => true
            )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:36:12.170

根据 Facebook 错误跟踪器，此错误已得到修复： [Bug tracker post](http://developers.facebook.com/bugs/138727922935504)

```
Status changed to Fixed 
```

上面的代码适用于上传 facebook 事件图片。

# asp.net - 使用 iTextSharp 在 pdf 中打印“<”不起作用

> ID：12154832
> 
> 赞同：1
> 
> 时间：2012-08-28T07:43:25.633
> 
> 标签：asp.net, pdf, itextsharp

我的网页中有以下文本。

**脚注 这是 <1 234234> 这是结束部分应该是可见的。**

当我将网页转换为 pdf 时，上面的页面显示为

**脚注 This is This is end 部分应该是可见的。**

经过分析，我知道这是因为“<”而发生的。我猜原因是 iTextSharp 将 <1 234234> 视为标签，并且不会将此文本添加到 pdf 中。

如果文本中只有“<”而没有“>”，则跳过“<”之后的整个文本。

谁能建议如何正确显示上述文字？任何帮助将不胜感激。

我试过用“<”替换“<”，但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:46:33.067

我用过`HttpUtility.HtmlEncode()`，现在工作正常。:)

如果有人知道更多，请分享。

# asp.net - ASP.NET Web.config CustomErrors 不适用于 Web 服务

> ID：12154843
> 
> 赞同：0
> 
> 时间：2012-08-28T07:44:10.520
> 
> 标签：asp.net, web-services

我有一个带有两个 webmethod 的简单 web 服务。

**https://localhost/Sub/WS/Dash.asmx/test_error_methodnameXXXXXXXXXXX**

当我从浏览器调用上述请求时。它给了我一条错误消息，内容如下：-

> System.InvalidOperationException：**test_error_methodnameXXXXXXXXXXX Web 服务方法名称无效。** 在 System.Web.Services.Protocols.HttpServerProtocol.Initialize() 在 System.Web.Services.Protocols.ServerProtocolFactory.Create（类型类型，HttpContext 上下文，HttpRequest 请求，HttpResponse 响应，布尔和中止处理）

我试图在 web.config 文件的帮助下解决如下问题：-

```
<system.web>    
    <customErrors mode="On" defaultRedirect="~/Sub/ErrorPage/AppErrors.aspx">
       <error statusCode="500" redirect="500.aspx" />
    </customErrors>       
</system.web> 
```

在这种情况下，***重定向不会发生***在 500.aspx 页面或 AppErrors.aspx 上。如果我更改模式属性中的值，我可以看到正在发生的变化..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:35:11.390

我在 web.config 的帮助下找到了修复程序。

戳

```
<diagnostics suppressReturningExceptions="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:07:26.150

要为 javascript 调用 Web 方法，您应该将您的 Web 服务标记为脚本服务。

```
[ScriptService]
public class MyService : WebService
{

} 
```

在脚本管理器中包含对它的引用：

```
<asp:ScriptManager ID="_scriptManager" runat="server">
  <Services>
    <asp:ServiceReference Path="Dash.asmx" />
  </Services>
</asp:ScriptManager> 
```

在js中调用

```
try {
    Dash.MyService.ErrorMethodName();
}
catch(exception){
    //handle exception
}
finally {
    //round up
} 
```

# emacs - 在 Emacs 中使用标签可靠地导航到正确的函数定义

> ID：12154846
> 
> 赞同：2
> 
> 时间：2012-08-28T07:44:23.507
> 
> 标签：emacs, tags, function-declaration

所以我一直在使用[Exuberant ctags](http://ctags.sourceforge.net/)和 Emacs 来浏览我想要理解的 Linux 内核驱动程序。我刚刚花了一天时间调试一个问题，归结为我阅读了错误的函数定义，因为`foo()`在两个单独的文件中定义（不同），并且使用`M-.`导航到函数定义将我带到了两个可能选项中不相关的一个。有没有办法可靠地导航到 Emacs 中的函数定义？我已经尝试过 Vim `C-]`，这似乎让我找到了正确的函数定义，但我通常不是 Vim 用户。所以我正在寻找一个特定于 Emacs 的解决方案，而不是“从 Emacs 切换到 Vim”。

# android - 将（非交互式）动画（使用 Maya 制作）加载到 iOS 和 Android 上的 OpenGL ES 的推荐方法

> ID：12154847
> 
> 赞同：12
> 
> 时间：2012-08-28T07:44:24.373
> 
> 标签：android, ios, animation, opengl-es, 3d

到目前为止，我们已经能够成功地将静态 OBJ 文件（转换为 .h）加载到我们的 OpenGL 应用程序中。

然后，我们可以对这些对象应用变换以便为它们设置动画。

我们项目的下一步是让专业的 3D 动画师在 Maya 中制作动画，并创建一个“加载器”以使用 OpenGL 以 3D 形式显示它们。

我们在网上找到了很多处理视频游戏和加载静态模型的示例，但我们的动画绝对是由动画师预先定义的，我们只需要加载它们。

重要的是要提到我们不能将它渲染到 oa 视频中，因为我们是在一个 AR 库之上构建的，它可以让用户真正地在动画中四处走动，这部分已经解决了，我们只需要使用 OpenGL 来渲染动画。

我已经研究了有关动画师应使用从 Maya 导出的适当格式的[问题。](https://stackoverflow.com/questions/3335771/recommended-animated-model-format-to-load-in-opengl)

.dae (COLLADA) 文件格式似乎是封装模型和动画信息的好方法，并使用[Assimp](http://assimp.sourceforge.net/)加载它，但我们还没有找到为 iOS 或 Android（这是我们正在开发的平台）编译的这个加载器。

我们在网上看到推荐的另一种方法是导出一系列 OBJ 文件，并为每一帧加载相应的 OBJ。

我们看到的另一种方法是使用“引擎”，但有太多太多了，很难知道我们应该关注哪一个。

我们不介意为引擎付费，但我们如何知道哪个引擎最适合？

我们找到了[这些示例](http://intersogmobile.com/news/279-using-of-3d-engines-in-ios-development)，但没有看到明确的“赢家”。

有没有人在 iOS 或 Android 设备上得到过类似的东西？

你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:36:51.013

好吧，OpenGL(-ES) 本身只是一个绘图 API，它不做任何与动画相关的事情。动画播放由自己的动画系统管理。这种系统的输出是转换参数，您可以在以后使用 OpenGL 绘图时使用这些参数来放置和变形几何体。如今，通常的方法是骨骼动画系统，即您向模型添加一些骨骼，其中每个顶点都绑定到一组骨骼，每个顶点每个骨骼的权重。骨骼可以表示为平移和四元数的组合。平移通常是一个常数，所以通常的动画系统给你的是描述骨架姿势的四元数向量。您将其加载到统一（vec4）或 GL_RGBA32F 1D 纹理中，宽度为骨骼数量，它在顶点着色器中用于基于姿势应用每个顶点的变换。顶点-骨骼权重通常作为附加顶点属性提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:15:21.967

我已经为 Android 制作了一个 3D 框架，这就是我对动画的看法：

骨骼动画可以通过您的代码简单地完成：为每个肢体加载一个 OBJ，让 CPU 进行骨骼计算，然后将每个 OBJ 转换为 CPU 给定的坐标和角度。

关键帧动画可以通过使用具有相同顶点数的 OBJ 来完成。然后，您可以使用带有变量 t(time) 并为您提供组合网格的线性函数。您还可以使用贝塞尔曲线来制作更平滑的动画。

我想指出的另一个方面是您可以导入 MD5 文件。MD5 文件可以包含动画数据并且它们是二进制的，因此加载它们很快并且不需要解析器。

更多关于 MD5 的[信息在这里](http://www.modwiki.net/wiki/MD5_%28file_format%29)。

PS 如果您愿意，我可以向您推荐一本很棒的书，其中涵盖了在移动设备上开发时的许多 3D 问题；只是发表评论。而且..如果你不介意花钱，就买 Unity。它非常好，而且用途广泛。

# javascript - 将 smallcaps 替换为 allcaps 文本

> ID：12154848
> 
> 赞同：1
> 
> 时间：2012-08-28T07:44:28.690
> 
> 标签：javascript, jquery

我无法在文本框中将所有小写字母转换为大写字母：

```
<body>
    <input type="text" id="input_1" class="allcaps"/>
    <input type="text" id="input_2" class="allcaps"/>
</body>

$(document).ready(function () {

    //trigger ng event

    $('.alcaps').live("keyup", function () {
       var fin =   $('.alcaps').val();
       $('.alcaps').val(fin.toUpperCase());
    });                     
}); 
```

第一个输入框将其内容转换为大写，但我在第一个框中输入的文本也被复制到第二个输入...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:46:03.340

当使用类作为选择器时，您将选择具有该类的所有输入框并将值设置为与第一个相同。使用`this`关键字仅定位当前文本框：

```
$(document).ready(function() {
    $(document).on('keyup', '.alcaps', function() {
        var fin = this.value;
        this.value = fin.toUpperCase();
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/ANQbW/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:47:27.810

您可以使用`this`which 指代您当前的输入，还请注意`live`不推荐使用，您可以`on`改用：

```
$(document).on("keyup", ".alcaps", function () {
     this.value = this.value.toUpperCase()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:47:06.867

处理程序内的用户`this`：

```
$('.alcaps').live("keyup", function () {
     var fin =   $(this).val();
     $(this).val(fin.toUpperCase());
}); 
```

# c - 错误：预期的说明符限定符列表之前

> ID：12154850
> 
> 赞同：1
> 
> 时间：2012-08-28T07:44:30.810
> 
> 标签：c

我正在尝试编写代码来构建堆栈，但是我遇到了对我来说没有意义的编译错误。这是我的`stack.h`：

```
struct StackNode {

    void* previous;
    int   value;
};

struct Stack {

    StackNode* top;
};

Stack* new_stack () {

    StackNode stn = { NULL, 0 };
    Stack* st  = (Stack*) malloc(sizeof(Stack));
    st->top = NULL;
    return st;
} 
```

我的`main.c`：

```
#include <stdio.h>
#include <stdlib.h>

#include "stack.h"

int main () {

    struct Stack* st = new_stack();

    return 0;

} 
```

`gcc`抛出这些错误：

> 制作（在目录：/home/diego/temp/stack）gcc -g -O2 -std=c99 -c
> 
> main.c 在 main.c:4 中包含的文件中：编译失败。堆栈.h:10:
> 
> 错误：“StackNode”之前的预期说明符限定符列表</p>
> 
> stack.h:14: 错误：预期 '='、','、';'、'asm' 或 '<strong>attribute'</p>
> 
> 在'*'标记main.c之前：在函数'main'中：main.c：8：警告：
> 
> 函数“new_stack”main.c:8 的隐式声明：警告：
> 
> 初始化从整数生成指针，没有强制转换：***
> 
> [main.o] 错误 1

**编辑**：我发现了错误。我忘了把`struct`前面`Stack`和`StackNode`一些行。总是`struct`在这些线上解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:47:46.207

改变：

```
struct Stack {
    StackNode* top;
}; 
```

到：

```
struct Stack {
    struct StackNode* top;
}; 
```

并且在其他任何地方使用`StackNode`or`Stack`并且前面没有`struct`. 如果您不想指定`struct`，可以使用`typedef`.

# php - 尝试配置新的 symfony2 时出现问题

> ID：12154852
> 
> 赞同：-1
> 
> 时间：2012-08-28T07:44:37.317
> 
> 标签：php, symfony

我试着去`http://localhost/Symfony/web/config`，然后我点击“配置你的 symfony 应用程序”，然后我收到以下错误：

```
No data received
Unable to load the webpage because the server sent no data.
Here are some suggestions:
Reload this webpage later.
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

知道我应该调试什么以及如何调试吗？我正在 OS X Mountain Lion、apache2 和 PHP 5.4.6 上对此进行测试

在我的日志中，我看到以下内容：

```
[Tue Aug 28 00:59:29 2012] [error] [client 127.0.0.1] File does not exist: /Library/WebServer/Documents/favicon.ico
[Tue Aug 28 00:59:51 2012] [notice] child pid 27878 exit signal Segmentation fault (11)
[Tue Aug 28 00:59:52 2012] [notice] child pid 27877 exit signal Segmentation fault (11)
[Tue Aug 28 00:59:52 2012] [notice] child pid 27875 exit signal Bus error (10)
[Tue Aug 28 01:00:10 2012] [notice] child pid 27879 exit signal Bus error (10)
[Tue Aug 28 01:00:14 2012] [notice] child pid 27882 exit signal Segmentation fault (11)
[Tue Aug 28 01:00:20 2012] [error] [client 127.0.0.1] File does not exist: /Library/WebServer/Documents/favicon.ico
[Tue Aug 28 01:00:23 2012] [notice] child pid 27883 exit signal Bus error (10)
[Tue Aug 28 01:00:24 2012] [notice] child pid 27884 exit signal Segmentation fault (11)
[Tue Aug 28 01:00:26 2012] [notice] child pid 27885 exit signal Segmentation fault (11)
[Tue Aug 28 01:01:09 2012] [notice] child pid 27889 exit signal Segmentation fault (11)
[Tue Aug 28 01:01:09 2012] [error] [client 127.0.0.1] File does not exist: /Library/WebServer/Documents/favicon.ico
[Tue Aug 28 01:01:15 2012] [notice] child pid 27892 exit signal Segmentation fault (11)
[Tue Aug 28 01:01:16 2012] [notice] child pid 27893 exit signal Segmentation fault (11)
[Tue Aug 28 01:01:20 2012] [notice] child pid 27894 exit signal Segmentation fault (11) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T09:43:50.937

我猜你正在寻找`http://localhost/Symfony/web/config.php`not `http://localhost/Symfony/web/config`。

它在文档中。检查它：[http ://symfony.com/doc/current/book/installation.html#configuration-and-setup](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)

# python - 写入/读取文件：NodeJS 与 Python

> ID：12154854
> 
> 赞同：0
> 
> 时间：2012-08-28T07:44:44.760
> 
> 标签：python

我需要知道哪种机制更有效（更少的 RAM/CPU）来读取和写入文件，尤其是写入。可能是 JSON 数据结构。这个想法是在WebSockets的上下文中执行这些操作（客户端->服务器->使用实际会话的数据读/写文件->对客户端的响应）....最好的想法是将数据存储在时间变量中并销毁vars什么时候没用？

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:50:23.863

他们可能都差不多。I/O 通常比 CPU 慢很多，因此读取和写入文件的整个过程将取决于您的磁盘处理请求的速度。

它还取决于您采用的数据处理方法。如果您选择一次读取整个文件，那么它当然会比您选择逐个读取文件使用更多的内存。

因此，答案是：性能仅（非常少）取决于您选择的语言。算法和 I/O 性能的选择很容易占 CPU 或 RAM 使用的大部分。

# javascript - 在企业应用程序框架中包含 js/css 文件的最佳实践是什么？

> ID：12154859
> 
> 赞同：10
> 
> 时间：2012-08-28T07:45:00.093
> 
> 标签：javascript, html, css, asp.net-mvc, razor

我正在使用 ASP.NET MVC3 进行企业应用程序开发。当然，我有不同的主布局和多个视图。

**我的担忧**

*   在主布局中包含所有 js/css 文件可能会影响页面的性能
*   在视图中包含文件（在需要的地方）正在创建重复引用（启动 jquery/其他库）
*   引用越多，客户端和服务器之间的来回请求就越多 - 这反过来会影响输出页面的性能

**我的想法**

1.  创建所需资源的自定义列表并将其存储在 ViewBag 中。让主布局引用此对象以包含 js/css 文件
2.  或者添加指向带有某个键（标识正在呈现的页面的唯一值）的操作的链接，并动态生成包含所有必需资源的输出作为单个响应。并使用唯一键缓存输出（inmem/staticfile）以用于后续请求。一种自定义资源捆绑。

请分享您的想法，欢迎任何想法和建议！

> 编辑：2012 年 9 月 17 日

下面的答案更多地谈论 Web 应用程序开发世界中的优化技术 - 欣赏这些答案。

我想从架构的角度来讨论，重点是创建正在呈现的页面所需的动态资源集合。

例如，在特定视图中我想使用需要 jquery-ui-1.8.11.min.js 的 jQuery UI，在某些视图中我想使用需要 MicrosoftMvcAjax.js 和 jquery.unobtrusive-ajax 的 MVC3 ajax。 min.js

我不想在主布局中包含永久引用，这将导致为所有视图加载这些 js。相反，我想在运行时包含动态的 js 文件。

希望这可能会增加清晰度！

感谢您的帮助 - 维诺德

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T08:35:32.643

您需要首先考虑减小下载大小：

*   将所有 js 和 css 放入尽可能少的文件中。这是因为一个客户端在任何时候只能打开~~2 个 HTTP 通道~~（大多数浏览器现在支持更多，信息[在这里](https://stackoverflow.com/a/14768266/542251)），在此之后的所有文件下载都会排队，直到前一个完成下载。
*   [缩小](http://code.google.com/p/minify/)你的 js 和 css。

一旦你把它缩小到一个合理的大小，你就可以考虑上面的问题了。你要下载，前期的内容量最少，所以**在 master** . 这将提高性能，因为客户端可以缓存它。缓存是一件好事，这可以防止客户端在每次访问您网站上的页面时都请求 js 和 css。

您可能还想考虑应用 HTTP 到期标头。

雅虎在很多这些想法上做了一个很好的网站：http: [//developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

**也不要把你的js放在viewbag中**。**这是服务器上不必要的开销和负载。只需在您的页面中添加参考！**

 **MVC4 现在支持[捆绑](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minificationn)**

# dos - 通过 BIOS 进行 USB 硬盘驱动器/笔式驱动器仿真

> ID：12154865
> 
> 赞同：1
> 
> 时间：2012-08-28T07:45:50.587
> 
> 标签：dos, bios, usb-drive, usb-flash-drive

我正在尝试为 DOS 应用程序读/写 USB 硬盘驱动器和闪存驱动器。

我阅读了[EDD 规范。](http://www.t10.org/t13/technical/d98120r0.pdf)它提到函数 Int13(Fn = 48h) 可用于获取 特定磁盘驱动器的*接口路径*和*设备路径。*这也包括usb接口和ata接口。

现在，此函数还返回一个*设备参数表扩展 (DPTE)* 表，该表提供 I/O 地址，绕过 Int13h 的软件可以通过该地址读取/写入设备。但此表*仅*适用于 ATA afaik。

*我想使用 Int 13h*读取/写入 USB 磁盘/笔式驱动器。可能吗？

实际上，它是受保护模式下的磁盘 I/O 敏感应用程序。因此，由于模式切换，使用 Int13h 会在性能方面造成严重损失。所以，我试图避免使用 Int13h。

bios是否也将USB驱动器初始化为ATA驱动器。如果是这样，那么我可以使用 DPTE 获取命令块和控​​制块的 I/O 基地址，然后像访问 ATA 驱动器一样访问 USB 驱动器。我对吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T14:46:53.800

FreeDOS 社区已经详细讨论了这个特定问题。整个问题的最佳指南是 FreeDOS 技术说明“ [USB with DOS](http://www.freedos.org/technotes/newsitem/149.html) ”

# mysql - 优化两级深度关联计数查询

> ID：12154866
> 
> 赞同：0
> 
> 时间：2012-08-28T07:45:56.617
> 
> 标签：mysql, ruby-on-rails

我有一个访问模型如下

```
class Visit < ActiveRecord::Base
  belongs_to :engineer
  has_many :machines
end 
```

我想要做的是通过使用以下代码找到与特定工程师相关的机器数量

```
count = engineer.visits.map(&:machines).flatten.size 
```

有没有更好更快的方法来做到这一点？我不想在工程师和机器之间建立直接关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:51:38.543

您可以使用模型关键字（例如**join、includes** ）进行查询。同时从模型中选择一个记录。

供您参考[http://archives.ryandaigle.com/articles/2008/7/7/what-s-new-in-edge-rails-easy-join-table-conditions](http://archives.ryandaigle.com/articles/2008/7/7/what-s-new-in-edge-rails-easy-join-table-conditions)，[http://railscasts.com/episodes /202-active-record-queries-in-rails-3](http://railscasts.com/episodes/202-active-record-queries-in-rails-3)

# android - ViewPager onPageSelected 用于第一页

> ID：12154870
> 
> 赞同：23
> 
> 时间：2012-08-28T07:46:15.333
> 
> 标签：android, android-viewpager

因此，似乎在使用 ViewPager 时，onPageSelected 侦听器不会因为与[this](http://code.google.com/p/android/issues/detail?id=27526)相同的问题而被调用。

我有一些逻辑可以为当前选定的页面填充一些更昂贵的 UI 元素，这在页面更改时有效，但是`it doesn't work for the first page.`

如果我在侦听器之后设置当前项目，则第一页会触发回调，但视图尚未初始化，因此我无法对其进行操作：

```
// Inside PagerAdapter.instantiateItem

ViewHolder vh = new ViewHolder();
cursor.moveToPosition(position);
vh.view = adapter.newView(context, cursor, null);
// Set position as tag so we can retrieve it with findViewByTag
vh.view.setTag(position); 

((ViewPager) collection).addView(vh.view,0);       

return vh;

// Inside MyActivity.onCreate

pagerAdapter = new SingleMessagePagerAdapter(this, cursor);
pager = (ViewPager)findViewById(R.id.message_pager);
pager.setAdapter(pagerAdapter);
pager.setOnPageSelectedListener(this);
pager.setCurrentItem(selectedItem);

// Inside MyActivity.onPageSelected

// Retrieve tagged view
View view = pager.findViewWithTag(position); 
```

这里`view`最终为空，因为`PagerAdapter.instantiateItem`尚未运行。所以我想我的问题是，在活动生命周期的哪个阶段，我可以确定 ViewPager 已经初始化了视图？我试过在里面做这个`Activity.onAttachedToWindow`，`Activity.onResume`但似乎这两个都被解雇了`PagerAdapter.instantiateItem`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T12:48:10.403

我想知道为什么你不只是有你在片段本身而不是托管活动中提到的逻辑。ViewPager 在当前片段的任一侧缓冲几个片段，因此它们在后台设置，并在用户滑动到它们时准备就绪。将逻辑放入`onPageSelected`将意味着绕过此功能并且在用户滑动到页面之前不做繁重的工作。

假设由于某种原因您不能执行上述操作，为什么不使用[带有回调函数的接口](http://developer.android.com/training/basics/fragments/communicating.html)。触发片段`onCreateView`函数中的回调，让 Activity 知道它已完全实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:23:31.660

尝试使用片段！

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter() {
        super(getSupportFragmentManager());
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fr = null;
        if (i==0)
           fr = new sec0frag();
        else if (i==1)
           fr = new sec1frag();
        else if (i==2)
           fr = new sec2frag();
        return fr;
    }

    @Override
    public int getCount() {
        return 3;
    }
} 
```

并创建 3 个片段类

例如：

```
 public static class sec0frag extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
                     // here is initialize for first time to view pages.!
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-25T08:19:59.037

我的解决方案是扩展寻呼机适配器并在其中创建一个接口。然后让适配器在创建适配器后只调用一次接口。在接口回调中，您可以调用 onPageChanged 方法而不会出现 nullpointerexception。将此类添加到您的项目中并从中扩展您的适配器。在将适配器设置为 viewpager 之前，不要忘记将侦听器设置为适配器。适配器类如下：

```
public abstract class ExtendedPagerAdapter extends FragmentPagerAdapter {

private boolean instantiated;
private AdapterListener adapterListener;

public interface AdapterListener {
    void onAdapterInstantiated();
}

public ExtendedPagerAdapter(FragmentManager fragmentManager) {
    this(fragmentManager, null);
}

public ExtendedPagerAdapter(FragmentManager fragmentManager, AdapterListener adapterListener) {
    super(fragmentManager);
    this.adapterListener = adapterListener;
    instantiated = false;
}

@Override
public void finishUpdate(ViewGroup container) {
    super.finishUpdate(container);
    if (!instantiated) {
        instantiated = true;
        if (adapterListener != null) {
            adapterListener.onAdapterInstantiated();
        }
    }
}

public void setAdapterInstantiatedListener(AdapterListener adapterListener) {
    this.adapterListener = adapterListener;
}
} 
```

活动代码：

```
adapter = new ViewPagerAdapter(getChildFragmentManager());
    adapter.setAdapterInstantiatedListener(new ExtendedPagerAdapter.AdapterListener() {
        @Override
        public void onAdapterInstantiated() {
            onPageSelected(viewPager.getCurrentItem());
        }
    });

    viewPager.addOnPageChangeListener(this);
    viewPager.setAdapter(adapter); 
```

# iphone - #import sentestingkit sentestingkit.h 文件在 xcode4.3 的 phonegap 中找不到

> ID：12154871
> 
> 赞同：0
> 
> 时间：2012-08-28T07:46:18.220
> 
> 标签：iphone, ios5, cordova, phonegap-plugins

我对 iPhone 开发和 phonegap 非常陌生。我安装了 phonegap 用于使用 phonegap 开发 iPhone 应用程序。现在我安装了嵌入 Cordova Webview

```
 "docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html#Embedding Cordova WebView on iOS" 
```

这个上面的链接。但现在我得到了

```
"#import <SenTestingKit/SenTestingKit.h>" And #import "<PhoneGap/PGPlugin.h>"
![enter image description here][1]
these above error in xcode4.3. 
```

你能帮我解决以上这些错误吗？提前致谢。![在此处输入图片描述][2]我已附上错误页面供您参考。

# android - 自定义 DatePicker/CalendarView

> ID：12154875
> 
> 赞同：1
> 
> 时间：2012-08-28T07:46:30.293
> 
> 标签：android

有没有办法自定义[DatePicker](http://developer.android.com/reference/android/widget/DatePicker.html)和/或[CalendarView](http://developer.android.com/reference/android/widget/CalendarView.html)以便只显示指定的字段。例如，在一个实例中，我希望看到`DatePicker`仅显示月份字段的显示，在另一种情况下，我希望它显示除年份之外的所有字段。

我看过创建自定义控件，但这实在是太多了。我正在寻找一种简单的方法来扩展现有控件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T11:56:49.393

是的，

XML 属性..

```
<DatePicker android:calendarViewShown="false"/> 
```

使用 Java：

让`DatePicker`你创建的有 id:`d1`所以代码如下：

```
DatePicker selectDate =(DatePicker) findViewById(R.id.d1);
selectDate.setCalendarViewShown(false); 
```

如果您正在`DatePicker`动态创建：

```
DatePicker selectDate = new DatePicker(this);
selectDate.setCalendarViewShown(false); 
```

# mysql - 无法打开 MySQLWorkbench

> ID：12154879
> 
> 赞同：-1
> 
> 时间：2012-08-28T07:46:51.400
> 
> 标签：mysql, mysql-workbench

我的mysql workbench有问题，安装后无法打开！它总是显示消息“ **mysql workbench 已停止工作**”，详细信息是

> 问题签名：
> 
> 问题事件名称：APPRCASH
> 
> 应用程序名称：MySQLWorkbench.exe
> 
> 应用程序版本：5.2.42.9752
> 
> 申请时间戳：50243f32
> 
> 故障模块名称：KERNELBASE.dll
> 
> 故障模块版本：6.1.7600.16850
> 
> 故障模块时间戳：4e21132b
> 
> 异常代码：e0434352
> 
> 异常偏移量：00009673
> 
> 操作系统版本：6.1.7600.2.0.0.256.1
> 
> 区域设置 ID：1033
> 
> 附加信息 1：0a9e
> 
> 附加信息 2：0a9e372d3b4ad19135b953a78882e789
> 
> 附加信息 3：0a9e
> 
> 附加信息 4：0a9e372d3b4ad19135b953a78882e789

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:52:54.963

尝试通过安装 MSVC2010 x86 可再发行组件（即使您运行的是 x64 机器）来安装它。有关详细信息，请在此处查看[此错误报告。](http://bugs.mysql.com/bug.php?id=62065)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T11:00:54.500

最终用户解决的问题如下：

1.  卸载 MySQL 工作台。

    在执行第 2 步之前。必须启用“隐藏文件和文件夹”。或者只需使用“运行”键入路径：C:\Users\\AppData\Roaming\MySQL\

2.  将 C:\Users\\AppData\Roaming\MySQL\Workbench\ 重命名为 C:\Users\\AppData\Roaming\MySQL\Workbench_old\

3.  重新安装工作台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-05T14:23:23.867

MySQL Workbench 还需要：

*   [微软 .NET 4.0 框架](http://www.microsoft.com/download/en/details.aspx?id=17113)
*   [Microsoft Visual C++ 2013 可再发行包 (MSVC2013)](http://www.microsoft.com/en-us/download/details.aspx?id=40784)

安装上述两个软件包，一切顺利。

来源：[MySQL安装文档。](http://dev.mysql.com/doc/workbench/en/wb-installing-windows.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T17:57:32.513

Installing the MSVC2010 x86 plus downloading msvcr100.dll into system32 solved the problem both for installer and zip variant.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T11:46:55.107

我在我的 Windows 8 开发机器中遇到了完全相同的问题和错误消息。

我想在桌面上有一个 MySQLWorkbench 的快捷方式，所以我直接从开始菜单复制了快捷方式。事实证明，它没有复制快捷方式，而是复制了实际的 MySQLWorkbench.exe 文件。

我刚刚创建了一个新的快捷方式，一切都开始正常工作了。

# asp.net - 在 ext.net 中动态设置时间域的 mintime 和 maxtime

> ID：12154880
> 
> 赞同：0
> 
> 时间：2012-08-28T07:47:00.883
> 
> 标签：asp.net, ext.net, timefield

我正在使用 EXT.NET 1.2 我想从代码隐藏（来自 cs 页面）设置 minTime 和 maxTime。

我已经写了以下代码但没有使用该代码..他们有什么错误还是有其他方法（通过Javascript）？

**代码**

```
tmFrom.Increment = 30;
string strmin = obj.startTime.ToShortTimeString();
DateTime dtmin = DateTime.ParseExact(strmin, "H:mm tt", CultureInfo.InvariantCulture);
string strmax = obj.endTime.ToShortTimeString();
DateTime dtmax = DateTime.ParseExact(strmax, "H:mm tt", CultureInfo.InvariantCulture);
tmFrom.Format = "H:mm";
tmFrom.MinTime = dtmin.TimeOfDay;
tmFrom.MaxTime = dtmax.TimeOfDay; 
```

我正在从数据库值设置 minTime 和 maxTime。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:03:03.283

根据您的代码示例，它出现`obj.startTime`并且`obj.endTime`都已经是 DateTime 对象。您不必转换为字符串，然后再转换回 DateTime 对象。

以下示例演示了完整的场景。

**例子**

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        var startTime = DateTime.Now.AddMinutes(-215);
        var endTime = DateTime.Now.AddMinutes(215);
        var time = this.TimeField1;

        time.Increment = 30;
        time.Format = "H:mm";
        time.MinTime = startTime.TimeOfDay;
        time.MaxTime = endTime.TimeOfDay;
    }
</script>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Examples</title>
</head>
<body>
    <ext:ResourceManager runat="server" />

    <ext:TimeField ID="TimeField1" runat="server" FieldLabel="Time" />
</body>
</html> 
```

希望这可以帮助

# android - Android Ndk：通过 NDK 上传大文件

> ID：12154886
> 
> 赞同：0
> 
> 时间：2012-08-28T07:47:25.673
> 
> 标签：android, android-ndk

我正在尝试上传文件（20MB 大小），但在上传时，logcat 显示

> 内存不足异常

所以我想为此使用NDK。但我不知道如何进行。所以帮我解决这个问题

```
static int chunkSize = 512;
static final     byte[] chunks = new byte[chunkSize]; 
.....
......
while (true) 
  {
    synchronized (chunks) 
    {
      int amountRead = fileInputStream.read(chunks);
      System.out.println("========amount read========="+amountRead);
      if (amountRead == -1) 
      {
        break;
      }
      bufferOutputStream.write(chunks, 0, amountRead);
      bufferOutputStream.flush();
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:51:32.927

上传时，您需要使用 InputStream 而不是将整个文件加载到内存中。

# jasper-reports - JasperServer CP 4.7 - JBoss 和 MySQL 没有经过认证的支持？

> ID：12154890
> 
> 赞同：1
> 
> 时间：2012-08-28T07:47:39.857
> 
> 标签：jasper-reports, jasperserver

根据下面列出的*支持文档，它仅认证**ProsgreSQL*和*Tomcat*，而在社区版的发行说明中，它们包括对*JBoss*和*MySQL*的支持。在这种情况下，获得认证和获得支持有什么区别？

[JasperServer CP 4.7 支持文档](https://www.jaspersoft.com/sites/default/files/Jaspersoft%20Platform%20Support%20V4.7.pdf)

[JasperServer CP 4.7 发行说明](http://sourceforge.net/projects/jasperserver/files/JasperServer/JasperReports%20Server%204.7.0/)

# objective-c - NSThread.isFinished 与 NSThread.isExecuting 完全相反？

> ID：12154894
> 
> 赞同：0
> 
> 时间：2012-08-28T07:47:47.063
> 
> 标签：objective-c, cocoa

有什么细微的差别吗？

我们确定在这两种情况下（[NSThread isFinished] == YES，[NSThread isExecuting] == NO），线程都不存在了吗？

# objective-c - 滚动视图调整内容问题

> ID：12154895
> 
> 赞同：0
> 
> 时间：2012-08-28T07:47:49.063
> 
> 标签：objective-c, ios5

我有滚动视图的问题。我已经实现了两个字体调整大小按钮来增加或减少嵌入在滚动视图中的文本视图的文本字体大小。但是在减小字体大小后，我计算滚动视图内容并重新调整它以适应新的文本视图高度。但是每次我修改文本字体时，它都会向下滚动每一步。

这是代码：

```
- (IBAction)decreaseText:(id)sender {

    int MyTextSizeMin = 8;
    int MyTextSizeMax = 20;

    // disable buttons when they're out of the range.
    BOOL smallerEnabled = textFontSize > MyTextSizeMin;
    BOOL biggerEnabled = textFontSize < MyTextSizeMax;
    [self.decreaseText setEnabled:smallerEnabled];
    [self.increaseText setEnabled:biggerEnabled];

    height =0;

    CGFloat secondLabelsize = texto.font.pointSize;

    [texto setFont:[UIFont systemFontOfSize:(secondLabelsize-1)]];

    CGRect frame = texto.frame;

    frame.size.height = texto.contentSize.height;

    self.texto.frame = frame;

    height +=texto.contentSize.height;

    height += self.imagen.image.size.height;

    height += self.fecha.frame.size.height;

    height += self.titulo.frame.size.height;

    height += 200;

    self.scrollView.contentSize=CGSizeMake(300.0,height);

    [self.scrollView setNeedsDisplay];

} 
```

如何禁用这个不需要的滚动？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:12:32.300

试试吧，它可能对你有帮助。

```
[scrollView scrollRectToVisible:CGRect animated:BOOL]; 
```

# excel - 使用 OleDb 从 Excel 中选择具有多个范围的列

> ID：12154914
> 
> 赞同：0
> 
> 时间：2012-08-28T07:49:24.473
> 
> 标签：excel, c#-4.0, oledb, excel-2003, oledbcommand

![在此处输入图像描述](../Images/4041253d6bc4c87f2039bf6f44e43353.png) 我目前的要求是我需要在单个查询中从 excel 表（DUMMY.xls）中选择多个范围并将其放入 DataTable（fooData1）中：正如您从上图中看到的那样，我有从 A 到 F 的列。因此我将从 A 到 B 和从 D 到 F 的列过滤到单个数据表（fooData1）中。结果数据表的内容应如下所示：

```
NAME    ID     Date     Hobby     COLOR
DEEPAK  1               Coding    Black
ASTHA   2               Singing   Red
GAURAV  3               Dancing   Blue
BHAVESH 4     6/29/2007 Painting  Green 
```

我的代码是这样的：

并在执行查询时触发以下错误

> “在 SQL 语句结束后找到的字符。”

```
 DataTable fooData1 = new DataTable();
                       System.Data.OleDb.OleDbConnection dbConnection =
              new System.Data.OleDb.OleDbConnection
                (@"Provider=Microsoft.Jet.OLEDB.4.0;"
                 + @"Data Source=C:\Dummy.xls;"
                 + @"Extended Properties=""Excel 8.0;HDR=Yes;""");
            dbConnection.Open();
            try
            {
                string strSql = "SELECT * FROM [Sheet1$A:B] ; select * from[Sheet1$D:F]";
                OleDbCommand cmd = new OleDbCommand(strSql);
                cmd.Connection = dbConnection;
                System.Data.OleDb.OleDbDataAdapter dbAdapter1 = new System.Data.OleDb.OleDbDataAdapter(cmd);                       
                dbAdapter1.Fill(fooData1);
                          }
            finally
            {
                dbConnection.Close();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:04:49.320

可以通过 SQL 解决，使用[`UNION ALL`](http://msdn.microsoft.com/en-us/library/ms180026.aspx).

`SELECT * FROM [Sheet1$A:B] UNION ALL select * from[Sheet1$E:F]`

我制作了如下测试数据：

```
1   2   3   4   5   6
1   2   3   4   5   6
1   2   3   4   5   6 
```

和 DataTable 得到：

```
1   2   
1   2   
5   6
5   6 
```

（由于选项特定于`HDR=Yes`，因此第一行是标题）

希望能解决你的问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T13:22:04.563

嘿，至于您的问题，您可以使用 F 和列号选择各个列。例如，“SELECT * FROM [Sheet1$A:B] ; select * from[Sheet1$D:F]”; 可以重写为：

```
"SELECT F1,F2,F4,F5 FROM [Sheet1$];" 
```

# c# - 如何将 Outlook MailItem 转换为流

> ID：12154921
> 
> 赞同：0
> 
> 时间：2012-08-28T07:50:15.360
> 
> 标签：c#, stream, office-interop

我想转换`Microsoft.Office.Interop.Outlook.MailItem`成`Stream`. 我怎样才能做到这一点？下面的代码显示了我如何构建 Outlook MailItem。

```
Microsoft.Office.Interop.Outlook.Application outlookApp =
    new Microsoft.Office.Interop.Outlook.Application();

Microsoft.Office.Interop.Outlook.MailItem mailItem = 
    (Microsoft.Office.Interop.Outlook.MailItem)outlookApp.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem);

Microsoft.Office.Interop.Outlook.NameSpace mapiNameSpace = 
    outlookApp.GetNamespace("MAPI");

mailItem.Subject = .....
mailItem.To = .... 
```

就像我将数据分配给 Outlook MailItem。如何将此 MailItem 转换为流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:34:53.593

创建一个`System.Net.Mail.MailMessage`对象，从中复制属性 `Outlook.MailItem`并保存。

```
var msg = new System.Net.Mail.MailMessage();
msg.From = new System.Net.Mail.MailAddress("aaa@bb.com");
msg.To.Add("cccc@ddd.net");
msg.Subject = "test test";

var client = new System.Net.Mail.SmtpClient();
client.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.SpecifiedPickupDirectory;
client.PickupDirectoryLocation = @"c:\temp";
client.Send(msg); 
```

# android - phonegap 媒体 mp3 位置

> ID：12154926
> 
> 赞同：-1
> 
> 时间：2012-08-28T07:50:26.697
> 
> 标签：android, cordova, phonegap-plugins, cordova-2.0.0

> **可能重复：**
> [从 assets/www 目录访问文件](https://stackoverflow.com/questions/8326272/access-files-from-assets-www-directory)

我正在使用 phonegap 编写 android 应用程序，并且想在单击按钮时播放 mp3，我的 mp3 位于 www 文件夹中。不幸的是，我尝试使用“android_asset/ww/sample.mp3”作为新媒体的 src（src、Succ、Err）；并且文件没有播放。那条路正确吗？我正在使用 Cordova 2.0.0 和 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:55:35.527

采用 ：

```
window.resolveLocalFileSystemURI("file:///android_asset/www/foo.html", onResolveSuccess, onFail); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:14:49.750

我已经解决了这个问题，从cordova 2.0.0版看起来有一些不允许播放本地文件的错误（远程工作正常）。我退后一步并使用了cordova-1.9.0，它与路径“/android_asset/www/sample.mp3”一起工作正常

# c# - 找不到类型或命名空间c#

> ID：12154927
> 
> 赞同：1
> 
> 时间：2012-08-28T07:50:30.603
> 
> 标签：c#

我对 c# 很陌生，这可能是一个非常 n00b 的错误。

对于这个项目，我已经收到了可以使用的现有代码。代码的结构是它有一个以模拟作为支持命名空间的主要解决方案。

我从要修改的模拟命名空间中复制了一个类（Adt_12）并将其重命名（Pb_cs2）。我复制的方式是点击另存为.. 然后将文件名更改为我想要的新名称。然后将公共类名（和构造函数）更改为这个新文件名。我已经重建“模拟”并且重建得很好。

但是当我尝试调用 Pb_cs2 时，它会抛出上面的“找不到名为 Pb_cs2 的类型或命名空间”。

我在 main 的可执行类中使用它的方式；是公共静态 Pb_cs2 pb；（最初使用 Adt_12）。

但它仍然可以在解决方案和命名空间中找到 Adt_12。只是没有 Pb_cs2。我已经重建并构建了解决方案。

.NET 框架的常见错误与此无关。

任何想法为什么会发生这种情况以及如何解决这个问题？我真的不想修改原始文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:55:59.480

这样做是为了确保您的解决方案知道该类。Project->addclass 选择类，如果它现在没有被选中。命名它，然后添加新类。它应该出现在您的解决方案资源管理器中。现在复制粘贴代码。重命名命名空间的类应该没问题。

你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:57:14.140

看看这里。[Visual Studio 说名称在当前上下文中不存在](https://stackoverflow.com/questions/12062149/visual-studio-saying-name-doesnt-exist-in-current-context/12063602#12063602)

您需要确保：

1.  您的类名和命名空间不一样，`Pb_cs2.Pb_cs2`因为这会使编译器感到困惑

2.  您可以完全限定类的路径，即`MyNamespace.MyNestedNameSpace.MyClass`

3.  您可以使用快捷方式，即`using MyClass = MyNamespace.MyNestedNamespace.Class1`

4.  确保您的项目针对相同的框架，即 .NET 4.0 / .NET 4.0 客户端配置文件。

5.  您可能会遇到冲突，您的类与另一个类具有相同的名称，在这种情况下，请使用选项 2，或将您的类重命名为其他名称。

6.  如果你的类名没有出现在智能感知中，那么它不知道在哪里寻找它。您可以右键单击课程并单击“解决”，这将为您提供一些有关如何使您的课程合格的选项。

......这就是我现在能想到的！......祝你好运！

**编辑：**

查找 C# 风格约定...那些类名很难看！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T07:58:35.463

添加对包含您正在调用的类的命名空间的引用。所以你可能有类似的东西

```
namespace SomeNamespace
{
    public class Pb_cs2
    {
    ...
    }
} 
```

所以你需要添加`using SomeNamespace;`到试图调用你的类的文件顶部的声明中。或使用完全限定名称调用类

```
SomeNamespace.Pb_cs2 pbcs2 = new SomeNamespace.Pb_cs2(); 
```

当您引用它时，您还可以为命名空间创建一个别名

```
using NS = SomeNamespace; 
```

那么上面的显式引用可以被称为

```
NS.Pb_cs2 pbcs2 = new NS.Pb_cs2(); 
```

我希望这有帮助。

# c++ - 用于视频监控的 blobtracking 中的 cv_exports

> ID：12154932
> 
> 赞同：0
> 
> 时间：2012-08-28T07:50:46.093
> 
> 标签：c++, c, opencv, surveillance

我正在做一个视频监控项目，必须从视频中跟踪车辆，并且还必须识别它是哪辆车。我正在使用opencv。我在其中使用 blob 跟踪。有没有其他方法可以使用 opencv 检测车辆。我是opencv的新手。我正在浏览 blob 跟踪头文件，在那里我发现了一条语句，例如：

```
class CV_EXPORTS CVVsModule 
```

这是什么意思。以及做什么`CV_EXPORTS`用的。它是用许多类编写的。它的意义是什么。还告诉我如何处理我的项目。它对我来说真的很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:55:46.573

这是定义：

```
#if (defined WIN32 || defined _WIN32 || defined WINCE) && defined CVAPI_EXPORTS
#  define CV_EXPORTS __declspec(dllexport)
#else
#  define CV_EXPORTS
#endif 
```

tl; dr：函数或类需要导出到 WIN os 上的 dll 符号表。

# android - 使用新的 Android Analytics 捕获字符串

> ID：12154933
> 
> 赞同：3
> 
> 时间：2012-08-28T07:50:47.460
> 
> 标签：android, google-analytics

我是谷歌分析的新手。我已经设置了一个帐户，并且可以捕获网页浏览量等基本数据。我想在谷歌分析中看到人们在我的应用程序中搜索的字符串。这可能吗？

我不能通过 trackEvent 做到这一点，因为它只将整数作为最后一个参数。自定义变量似乎是预定义的。

任何提示或方向将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:34:32.950

我认为有两种基本方法可以跟踪搜索数据，即事件或网页浏览量。

首先，您可以将搜索词作为[Event 的“标签”](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Labels)，并使用整数来表示搜索词的次数（因此从您的末尾开始始终为 1，但 GA 可以聚合它们）。像这样：

```
String searchTerms = "foo bar";
...
tracker.trackEvent("category", "search", searchTerms, 1); 
```

第二种选择是将搜索字符串放入 pageViews 的 URL 中。像这样：

```
String searchTerms = "foo bar";
...
tracker.trackPageView("/searches/" + searchTerms); // probably URL encode searchTerms? 
```

或者，您可以在 URL 中使用 URL 查询语法（“？”）（我不确定 GA 是否会将这些从 Android URL 中丢弃，因此您可能需要测试一下是否可以通过）：

```
String searchTerms = "foo bar";
...
tracker.trackPageView("/searches?terms=" + URLEncoder.encode(searchTerms, "UTF-8")); 
```

我建议尝试两种方式（所有三种方式），并查看哪一种在 GA UI 中更有用，以获取您想要查看的信息。

# scroll - 如何防止隐藏（溢出）元素被渲染？

> ID：12154935
> 
> 赞同：0
> 
> 时间：2012-08-28T07:50:56.750
> 
> 标签：scroll, overflow, hidden, absolute

我在页面侧面有一个绝对定位的 div，只是有点粘在里面。我已经应用了溢出：隐藏到 html 和父 div，它摆脱了滚动条，但人们仍然可以使用鼠标中键来移动页面。

有没有办法防止任何溢出的内容实际呈现在页面上，或者只是禁止鼠标中键滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:29:30.953

也许你需要设置overwflow-x和overflow-y，像这样：

```
.class {
   overflow-x: hidden;
   overflow-y: hidden;
} 
```

如果它没有帮助添加一些 !importanta 这种风格。

# android - 如何在android中发出哔哔声？

> ID：12154940
> 
> 赞同：31
> 
> 时间：2012-08-28T07:51:29.347
> 
> 标签：android

我希望我的应用程序发出特定频率和持续时间的哔声。在这个应用程序的 Windows 等效项（用 c# 编写）中，我使用了一个带有函数的 c++ dll

```
beep(frequency, duration); 
```

这在android中是一样的吗？或者至少我怎样才能将我的 c++ dll 放入项目中？

我不想使用预先构建的 mp3 或系统声音，因为我想让用户选择频率和持续时间。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-12-14T03:03:42.253

我试过 amine.b 的回答。简而言之，播放响亮的哔声：

```
ToneGenerator toneG = new ToneGenerator(AudioManager.STREAM_ALARM, 100);
toneG.startTone(ToneGenerator.TONE_CDMA_ALERT_CALL_GUARD, 200); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-22T00:37:53.580

简单的方法是使用`ToneGenerator`类的实例：

```
// send the tone to the "alarm" stream (classic beeps go there) with 50% volume
ToneGenerator toneG = new ToneGenerator(AudioManager.STREAM_ALARM, 50);
if (val >= taux_max) {
    taux_text.setTextColor(warnning_col);
    toneG.startTone(ToneGenerator.TONE_CDMA_ALERT_CALL_GUARD, 200); // 200 is duration in ms
} 
```

有关参数的确切含义和生成器的可能配置，[`ToneGenerator`](http://developer.android.com/reference/android/media/ToneGenerator.html)请参阅文档。[`AudioManager`](http://developer.android.com/reference/android/media/AudioManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:06:57.653

如果您想在 android 应用程序中使用您的 C++ 代码，这是可能的。您需要查看 Android NDK，它允许您在 JNI（Java 本机接口）的帮助下使用执行 C++ 代码。

[安卓NDK](http://developer.android.com/tools/sdk/ndk/index.html)

# ruby - 如何在两个相似的数组上同时迭代each_value

> ID：12154943
> 
> 赞同：2
> 
> 时间：2012-08-28T07:51:37.403
> 
> 标签：ruby, arrays

在这种情况下，两者`locales`和`aliases`共享相同的结构，因此我以相同的方式迭代它们，仅更改其名称。

```
if yml_site['locales'].present? 
     yml_site['locales'].each_value do |yml_locale|
          site = Site.find_or_create_by_domain(
               locale: yml_locale['locale'],
               domain: yml_locale['domain'],
               title: yml_locale['title'],
               parent: yml_site['domain'],
     end
end
if  yml_site['aliases'].present?
     yml_site['aliases'].each_value do |yml_alias|
          site = Site.find_or_create_by_domain(
               locale: yml_alias['locale'],
               domain: yml_alias['domain'],
               title: yml_alias['title'],
               parent: yml_alias['domain'],
     end
end
end 
```

我想用类似的东西来简化这段代码，`[yml_site['locales'],yml_site['aliases']].each.each_value`但显然它不起作用。知道如何在同一个查询上进行迭代`yml_site['locales']`吗`yml_site['aliases']`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:55:43.937

这个怎么样：

```
(yml_site['locales'] + yml_site['aliases']).each_value do |yml_locale|
  ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:20:57.267

简单的方法是将迭代块推送到通用方法并通过方法调用访问它。

其他选择，只需执行数组添加，

```
x1 = [1,2,3]
x2 = [3,4,5]

x1 + x2, and then perform iteration as done for array. 
```

要并行执行操作，您可以使用

```
x1.zip(x2).each do |u,v|
  p u
  p v
  #perform find_or_create operation
end 
```

# android - 选择时的Android GridView背景颜色

> ID：12154945
> 
> 赞同：1
> 
> 时间：2012-08-28T07:51:42.957
> 
> 标签：android, gridview

我创建了一个显示各种 Bitmaps 的 GridView。我希望当用户选择一个单元格时，它的背景颜色会发生变化。这就是我正在做的事情。我的 ImageAdapter extends BaseAdapter 在 getView 函数中有以下代码行

```
if(videoObjects.get(position).isSelected)
{
        gridView.setBackgroundColor(Color.BLUE);
}
else
{
        gridView.setBackgroundColor(Color.TRANSPARENT);
} 
```

我的 GridView 有一个 OnItemClickListener，它在 onItemClick 中有以下代码。

```
 userVideos.get(postion).isSelected=!userVideos.get(postion).isSelected;
    videoBitmapsAdapter.notifyDataSetChanged(); 
```

这应该切换布尔变量，然后我重绘适配器。但是选择不起作用。

亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:11:22.660

使用选择器作为具有 2 种状态的背景可能会更好：

```
<selector>
 <item state_selected="true" drawable="yourbg" />
 <item state_selected="false" drawable="otherbg" />
</selector> 
```

然后在你的

```
 onItemClick(View v, ViewGroup parent, int position){
  if (this.previousSelectedView != null) this.previousSelectedView.setSelected(false);
  v.setSelected(true);
 } 
```

这样，就不需要使整个 gridview 无效。您必须保留对当前选定网格项的引用，以便在单击其他项目时取消选择它。

*（此代码未经测试）*

# jquery - Jquery验证：字段有效后未删除错误消息

> ID：12154946
> 
> 赞同：0
> 
> 时间：2012-08-28T07:51:42.787
> 
> 标签：jquery, validation

我有一个带有 2 个必填字段的简单表单，错误消息放在滑出 div 中。当您不填写任何表单时，验证工作正常并显示错误消息，但是当您填写该字段时，它会继续显示错误消息。我在这里尝试了一些解决方案，但没有任何效果，我不知道是什么原因造成的。这是我的代码：HTML

```
<form id="login_form"  method="post">
<ul>
    <li>
  <label for="user">Gebruikersnaam</label>
  <input  type="text" name="user" id="user" />
  </li>
  <li>
  <label for="paswoord">Paswoord</label>
  <input  type="password" name="password" id="paswoord" />
  </li>

 <li>
  <input class="btn black" type="submit" value="Login" />
  <span id="password" ><a href="#">Wachtwoord vergeten?</a></span>
  </li>
  </ul>
</form> 
```

jQuery

```
 var validator = $('#login_form').validate({     
     rules: {           
        user: {
            required: true},
        password: {
            required: true},                
        },
    onfocusout: true,

invalidHandler: function(form, validator) {
 var errors = validator.numberOfInvalids();
  if (errors) {
    var message = errors == 0
      ? 'You missed 1 field. It has been highlighted'
      : 'You missed ' + errors + ' fields. They have been highlighted';
    $("div.error span").html(message);
   $("div.error").hide().slideDown('slow');
            setTimeout(function(){$("div.error").slideUp(); },10000);
  } else {
    $("div.error").hide();
  }
},

submitHandler: function(form){              
        $("div.ok").removeClass("error").hide().slideDown('slow');
        setTimeout(function(){$("div.ok").slideUp(); },10000);
        }
});
jQuery.validator.messages.required = ""; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:14:47.380

我通过创建额外的变量来解决它：

```
invalidHandler: function(form, validator) {
 var errors = validator.numberOfInvalids();
 var notifyDiv = $('#notify');
 var notifyMessage = $('#notify span');

  if (errors) {
    var message = errors == 0
      ? 'U bent 1 veld vergeten.Dit is aangeduid.':
       'U bent  ' + errors + ' velden vergeten. Deze zijn aangeduid.';
     notifyMessage.html(message);
     notifyDiv.addClass('error').removeClass('ok').hide().slideDown('slow');
            setTimeout(function(){notifyDiv.slideUp(); },10000);
  } else {
    $("div.error").hide();
  }
},

submitHandler: function(form){
    var notifyDiv = $('#notify');
    var notifyMessage = $('#notify span');
    var message = 'Formulier werd verstuurd.';
    notifyMessage.html(message);
    notifyDiv.addClass('ok').removeClass('error').hide().slideDown('slow');
    setTimeout(function(){notifyDiv.slideUp(); },10000);
} 
```

}

# oracle - oracle中的条件外键实现

> ID：12154947
> 
> 赞同：1
> 
> 时间：2012-08-28T07:51:50.413
> 
> 标签：oracle, plsql, indexing, oracle11g, oracle11gr2

我有如下要求：

```
table1
------------------------
A    B     C    D   E    
------------------------
1    2     *    P    Q
1    2     A    Q    P
1    3     B    W    U
----------------------- 
```

列`A B C`在`primary key`上`table1`

```
table2
------------------------
A    B     C    
------------------------
1    2     1   
1    2     2   
1    2     A    
------------------------ 
```

列`A B C`需要实现为`A B C`表 1 上的列的表 2 上的复合外键，唯一的例外是，如果`C`父表（表 1）中的列是`*` 任何值可以出现在`column C`提供的子表（表 2）中，`column A`并且`column B` 两者都相同表。

我们正在寻找一个触发器最小的实现。由于这个奇怪的要求，目前我们无法创建外键。

请提出任何替代方法并让我开心:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:23:57.553

我怀疑这是模型的问题。这两个表似乎代表两种不同类型的事物，这就是普通 FK 约束不起作用的原因。

我认为您应该将两个表分成两个，例如：

```
table1_noC
------------------------
A    B     D   E    
------------------------
1    2     P    Q

table2_noC (with a FK to table1_noC)
------------------------
A    B     C    
------------------------
1    2     1   
1    2     2   
------------------------

table1_C
------------------------
A    B     C    D   E    
------------------------
1    2     A    Q    P
1    3     B    W    U
-----------------------

table2_C (with a FK to table1_C)
------------------------
A    B     C    
------------------------
1    2     A    
------------------------ 
```

然后，您可以使用结合了+的视图和结合了`table1_noC`+`table1_C`的另一个视图重新创建原始设计。如有必要，您甚至可以向视图添加“替代”触发器，以将视图上的 DML 转换为基础表上必要的 DML。`table2_noC``table2_C`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T04:08:18.857

无需任何新结构即可解决此问题。只需在子表 (table2) 中引入新列 (NEW_C) 并在外键约束中使用此列而不是“列 C”。步骤如下：

1>`alter table2 add (new_c varchar2(1));`

2> `update table2 set new_c= c`;

3>使用新引入的列 NEW_C 而不是`colum C`FK

```
alter table table2
  add constraint
  fk_ref_table1 FOREIGN KEY (A,B,**NEW_C**)    
  references table1 (A,B,C); 
```

4>在子表上创建一个简单的插入/更新触发器以维护新列`NEW_C`。

```
CREATE OR REPLACE maintain_new_c
 BEFORE
  INSERT OR UPDATE
  ON TABLE2 REFERENCING NEW AS NEW OLD AS OLD
 FOR EACH ROW
DECLARE
v_count pls_integer;
BEGIN
 SELECT COUNT(1) 
   INTO v_count
   FROM table1 t1    
  WHERE t1.c='*'
    AND t1.a= :NEW.a 
    AND t1.b= :NEW.b;

  IF v_count=0 THEN
    new_c := :NEW.c ;
  ELSE
    new_c := '*';
  END IF;

EXCEPTION
   WHEN OTHERS THEN
   RAISE_APPLICATION_ERROR..........
END; 
```

另一种方法是在子表上引入一个新的虚拟列（oracle 11g），使用确定性 pl/sql 函数来派生这个虚拟列，然后使用虚拟列创建外键约束。

但我更喜欢基于触发器的方法，因为父表上的任何 udate/delete 操作都会受到影响，因为每次都需要派生和检查虚拟列。

# objective-c - 在自定义 UIView 中使用 drawRect 方法的 rect 参数

> ID：12154948
> 
> 赞同：0
> 
> 时间：2012-08-28T07:51:59.837
> 
> 标签：objective-c, uiview

我怎么可能使用在 drawRect 调用中传递的 rect 参数，我确信无论何时传递 setNeedsDisplayInRect ，都会为特定区域调用 drawRect 方法。现在我重绘整个框架的文本和形状，而不是限制到需要重绘的矩形部分，我不知道如何有效地使用矩形参数。对此的任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:16:33.087

rect 是要重绘的区域。在某些情况下，UIKit 只会重绘视图的“脏”区域。您可以优化您的代码，以通过使用检测某些绘图会出现在该矩形之外`CGRectContainsPoint()`，因此不要这样做。

# php - 对同一主机上的 PHP 文件使用 XMLHTTP 请求的 Javascript 违反了同源策略？

> ID：12154950
> 
> 赞同：2
> 
> 时间：2012-08-28T07:52:07.177
> 
> 标签：php, javascript, xmlhttprequest, same-origin-policy

> **可能重复：**
> [请解释 JSONP](https://stackoverflow.com/questions/2067472/please-explain-jsonp)
> [在“www.foo.com”页面上，从“www.example.com”加载的脚本可以向“www.example.com”发送 ajax 请求吗？](https://stackoverflow.com/questions/11773903/on-page-www-foo-com-can-a-script-loaded-from-www-example-com-send-ajax-requ)

我需要从 javascript 向 php 文件发出请求。
然后 php 文件从数据库中提取数据，然后将信息发送回 javascript。

我认为最好的方法是制作一个使用 XMLHTTP 向 PHP 脚本询问信息的 javascript。Javascript 文件和 PHP 文件都在同一主机上。

问题是我在不同的域上调用 javascript。这意味着由于同源策略，我无法将 XMLHTTP.open 设置为不同的域。

即使从技术上讲 javascript 和 php 文件都在同一主机上，我是否不走运？解决这个问题的最佳方法是什么？我看到有人提到使用 JSON。

另一个问题是我不能使用 jQuery。我知道如果我可以使用 jQuery，事情会更容易——但我不能。

这是我正在尝试做的非常接近的近似值，除了我的请求必须是跨域的：
[http ://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

有任何想法吗？我对替代解决方案持开放态度。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:05:33.070

I think the focal point of your investigation should be the "domain mess":

*   For the **client** side, it is of no importance, whether the 2 domains are on the same host: Only the domain counts
*   For the **server** side, this ofcourse is different.

You might be trying to create some sort of interop between two applications on the same server - this might be achievable by some self-proxying or by simply creating an interop domain, loading the relevant parts from there.

*   self-proxying: Use rewrite rules or a proxy setup to make [http://domain2.tld/ajax.php](http://domain2.tld/ajax.php) map to the content of [http://domain1.tld/ajax-domain2.php](http://domain1.tld/ajax-domain2.php)
*   interop domain: have [http://domain3.tld/domain1/](http://domain3.tld/domain1/) map to [http://domain1.tld](http://domain1.tld) and [http://domain3.tld/domain2](http://domain3.tld/domain2) map to [http://domain2.tld](http://domain2.tld) and load everything from domain3.tld

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:09:49.167

如果 HTTP GET 足够，我建议您使用 JSONP (http://en.wikipedia.org/wiki/JSONP)。（您不需要将二进制文件发送到您的服务器）。

这是很简单的想法。首先，您创建一个回调来处理来自服务器的数据。

```
var callback = function(data) { alert('My name is ' + data.user) }; 
```

然后在 DOM 中添加脚本元素：

```
<script src='http://external-domain.com/api.php'></script> 
```

它返回用您的回调函数包装的 json 结果

```
callback({ user : Aaren }); 
```

# android - Android：媒体播放器创建

> ID：12154951
> 
> 赞同：3
> 
> 时间：2012-08-28T07:52:13.193
> 
> 标签：android, android-mediaplayer

我有这个代码：

```
package com.example.pr;

import android.media.MediaPlayer;

public class Audio{

    MediaPlayer mp;

    public void playClick(){
        mp = MediaPlayer.create(Audio.this, R.raw.click);  
        mp.start();
    }
} 
```

我在“创建”时出现错误，此消息“MediaPlayer 类型中的方法 create(Context, int) 不适用于参数 (Audio, int)”

为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T07:54:45.373

MediaPlayer.create() 需要一个*Context*作为第一个参数。传入当前的*活动*，它应该可以工作。

尝试：

```
public void playClick(Context context){
    mp = MediaPlayer.create(context, R.raw.click);  
    mp.start();
} 
```

在您的活动中：

```
audio = new Audio();
...
audio.playClick(this); 
```

但是不要忘记在声音结束后在 MediaPlayer 实例上调用 release，否则你会得到一个异常。

但是，无论如何，使用*SoundPool*播放短点击可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:56:09.053

```
public class Audio{

    MediaPlayer mp;
Context context;

     public Audio(Context ct){
     this.context = ct;
}
    public void playClick(){
        mp = MediaPlayer.create(context, R.raw.click);  
        mp.prepare();
        mp.start();
    } 
```

从您的活动：

```
Audio audio = new Audio(YourActivity.getApplicationContext());
audio.playClick(); 
```

# facebook - 地球上是否有人知道 SocialAuth - SocialAuth 抛出 java.lang.reflect.InvocationTargetException 而没有消息

> ID：12154952
> 
> 赞同：1
> 
> 时间：2012-08-28T07:52:17.653
> 
> 标签：facebook, facebook-graph-api, jsf-1.2, socialauth

我`SocialAuth`在我的应用程序中使用库对 Facebook 进行身份验证`jsf`。我收到`java.lang.reflect.InvocationTargetException`异常，没有收到任何消息`org.brickred.socialauth.SocialAuthManager`

造成这种情况的可能说法是：

```
String providerUrl = manager.getAuthenticationUrl(Common.FACEBOOK_AS_ID, Common.SOCIAL_AUTH_REDIRECT_URL); 
```

任何线索的家伙。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:57:14.703

我今天刚遇到同样的问题，试图通过 Facebook 使用 socialauth-4.0 进行身份验证。

解决方案非常简单，只需确保文件夹**依赖**项（socialauth 的 zip 存档内）中的三个 jar（openid4java.jar、json-20080701.jar、commons-logging-1.1.jar）在运行时可用.

就我而言，我必须将它们放在我的 tomcat 安装的 lib 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:15:36.087

如果调用的方法抛出异常，则抛出此异常。只需在 InvocationTargetException 中解开原因，您就会得到原始原因。

```
try{
  String providerUrl = manager.getAuthenticationUrl(Common.FACEBOOK_AS_ID, Common.SOCIAL_AUTH_REDIRECT_URL);
}catch (InvocationTargetException ex) { 
   System.out.println("oops! "+ ex.getCause()) ;
} 
```

这将告诉您实际问题，因此您可以解决该问题。

# javascript - 按下按钮时如何使元素不失去焦点？

> ID：12154954
> 
> 赞同：28
> 
> 时间：2012-08-28T07:52:31.107
> 
> 标签：javascript, jquery, html, focus, selection

我有一个文本区域，我在插入符号的位置插入内容（感谢[Tim Down 的回答](https://stackoverflow.com/questions/6690752/insert-html-at-cursor-in-a-contenteditable-div)）。它在用户按下按钮时插入内容。但似乎当按下按钮时，textarea 上的焦点就丢失了。如果插入符号的位置也相同，我如何将焦点保持在那里？我正在考虑使用`evt.preventDefault()`with `.focusout()`。如果这有帮助。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2017-04-26T07:34:50.810

没有**必要重新关注**！

确保您处理 mousedown 事件（而不是单击事件）。mousedown 事件将在另一个元素的焦点丢失之前触发。

在**mousedown**事件处理程序中，您需要防止事件默认行为。

```
e.preventDefault(); // on your mousedown event 
```

[JS-小提琴演示](http://jsfiddle.net/ariacomponents/nz8m6qys/9/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T07:54:38.993

您无法阻止焦点移动到可聚焦元素，但仍然允许鼠标单击具有其正常行为（例如`click`按钮）。如果单击支持焦点的元素（例如按钮），它将获得键盘焦点。

如果操作正确，可以以编程方式将焦点重新放在元素上。如果做得不好，它可能会破坏页面的可用性。

演示：[JSFiddle](https://jsfiddle.net/jfriend00/Ddffh/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-01T15:58:11.033

按下按钮时，您必须重新获得焦点。

HTML 代码：

```
<input id="messageBox" autofocus />
<input type="button" id="messageSend" onclick="setFocusToMessageBox()" value="Send" /> 
```

Javascript代码：

```
<script>
function setFocusToMessageBox(){
    document.getElementById("messageBox").focus();
}
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T07:59:02.083

您可以通过在按钮单击功能结束时以编程方式将焦点重新应用到文本区域来轻松完成此操作。这样，您每次都可以随着点击事件重新获得焦点。

# python-2.7 - 以下python代码有什么错误

> ID：12154958
> 
> 赞同：-6
> 
> 时间：2012-08-28T07:52:41.437
> 
> 标签：python-2.7

```
import sys

def Hello(name):
   name = name + '!!!'
   print 'Hello' ,  name

def main():
    Hello(sys.argv[1])

if __name__ == '__main__':
       main() 
```

这是错误

```
Traceback (most recent call last):
  File "D:\pythonPractice\firstPython.py", line 13, in <module>
    main()
  File "D:\pythonPractice\firstPython.py", line 9, in main
    Hello(sys.argv[1])
IndexError: list index out of range 
```

我也尝试过 sys.argv[2] 但错误仍然存​​在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:58:17.523

首先，我认为您最初发布的代码（带有`Hello(sys.argv[0])`）并不是您实际拥有的代码。它与错误不匹配，该错误指出`sys.argv[1]`，因此您*可能*拥有的是：

```
def main():
    Hello(sys.argv[1]) 
```

至于错误，那是因为您在运行时没有提供参数。你需要这样做，这样`sys.argv[1]`存在：

```
python helloprog Pax 
```

你会发现一个更强大`main`的：

```
def main():
    if len(sys.argv) < 2:
        Hello("whoever you are")
    else:
        Hello(sys.argv[1]) 
```

它将检测您何时未提供参数，并使用合适的默认值而不是引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T23:50:36.447

你用过吗

```
sys.argv[0] 
```

由于这会返回一个列表，因此您可能没有元素 >1

# android - 数据未在 WebView 中加载，但在锁定后加载 - 解锁设备

> ID：12154962
> 
> 赞同：5
> 
> 时间：2012-08-28T07:52:59.820
> 
> 标签：android, android-webview

我有一些带有 html 标记的数据，我想在 webView 中显示它。

我尝试了以下代码：

```
String html = "<html><body><font face=\"verdana\" size=\""
                + getResources().getString(R.string.WebView_Font_Size)
                + "\" color=\"rgb(64,64,64)\">"
                + Article.getDetaildescription().replaceAll("h2", "h4")
                + "</font></body></html>";
String mime = "text/html";
String encoding = "utf-8";
Log.e("htmlstring", html);
description.loadDataWithBaseURL(null, html, mime, encoding, null); 
```

问题是：每当执行上述代码时，webview 中都不会加载任何内容。但是一旦我锁定设备并解锁它，我的 webview 就会显示该数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:58:51.597

你的代码似乎没问题。检查您的 xml 文件，它可能会对您有所帮助.. 我想知道您是否动态设置了任何布局或其他内容的可见性..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:13:18.040

您可能希望在加载数据之前启用 javascript。

```
String strWeb = "<div style=\"text-align: center;\"><span class=\"Apple-style-span\" style=\"font-weight: normal; font-size: medium; \"><img src=\"http://mobileecommerce.site247365.com/admin/assetmanager/images/gns_header.jpg\" alt=\"\" align=\"middle\" border=\"1px\" height=\"90\" width=\"550\"></span></div><span class=\"Apple-style-span\" style=\"color: rgb(105, 105, 105); font-family: Verdana; font-size: 13px; font-weight: normal; \"><br><div style=\"text-align: center;\">Yes we are coming at E & I? Are you?</div></span><br><h1 style=\"font-weight: bold; \"><span style=\"font-family: Verdana; font-size: 14pt; \">News for the day...</span></h1><span style=\"color: rgb(105, 105, 105); \"><span style=\"font-family: Tahoma; font-size: 10pt; \">Template Mobile Sites for IC: <a href=\"http://icmobilesite.vidushiinfotech.net/\">http://icmobilesite.vidushiinfotech.net/</a></span><br><span class=\"Apple-style-span\" style=\"font-family: Tahoma; font-size: 13px; color: rgb(105, 105, 105); \">Promotional valid till 30 Sept 2011: MOBILE WEBSITE (Base Product Mobile CMS) for JUST $159<br></span></span><br><span style=\"font-family: Tahoma; font-size: 10pt; color: rgb(105, 105, 105); \">Mobile Template link: </span><a href=\"http://newsletter.vidushiinfotech.net/Mobilesite/\"><span class=\"Apple-style-span\" style=\"font-size: 15px; font-family: Calibri, sans-serif; color: rgb(105, 105, 105); \">http://newsletter.vidushiinfotech.net/Mobilesite/</span><br></a><span style=\"font-size: 10pt; font-family: Tahoma; \"><span style=\"font-size: 10pt; \"><br><span style=\"color: rgb(105, 105, 105); \">With the promotion on Business Edge and eFusion still running successful in e market place - $ 499</span><br><span style=\"color: rgb(105, 105, 105); \">Check out some of the latest site launch on: </span><br><br><span style=\"color: rgb(105, 105, 105); font-weight: bold; \">http://www.randallcontracting.co.uk/Pages/Default.aspx </span><br><br><span style=\"color: rgb(105, 105, 105); font-size: 10pt; \"><span style=\"font-weight: bold; \">Category</span>: Building & Construction</span><br></span><br></span><div style=\"color: rgb(105, 105, 105); text-align: left; \"><span style=\"font-size: 10pt; font-family: Tahoma; \">Description: WELCOME TO RANDALL CONTRACTING Randall Contracting is a family-run contracting SME which has been servicing London and the South East since 1956\. Working closely with our Clients and external Design Consultants, we place great emphasis on a safe, positive, practical and common sense approach to our projects. Our delivery methods have resulted in an extensive volume of repeat business from both Private and Public Sectors. Safety and Environmental concerns are a high priority on all our contracts and we continually strive to source innovative working methods and solutions. Our equipment is regularly updated and maintained to ensure minimal environmental impact.</span><br><br></div><span style=\"color: rgb(105, 105, 105); font-weight: bold; font-family: Tahoma; \"><span style=\"font-size: 10pt; \"><br></span></span><br>";
    WebView webview = new WebView(this); 
    setContentView(webview); 
    webview.getSettings().setJavaScriptEnabled(true); 
    webview.loadData(html,"text/html","utf-8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:11:23.193

从 jaimin 的回答中我得到了提示。

我的旧布局文件在其他线性布局中包含一个线性布局，因此我更改了 webview 的高度以包装内容，还更改了滚动视图的宽度以填充父级并删除了一个不必要的 LinearLayout。

有问题的旧布局

```
<include
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    layout="@layout/header_layout" />

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/title_background"
    android:padding="5dp" >

    <Button
        android:id="@+id/Article_Detail_Share"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_gravity="right|center_vertical"
        android:background="@drawable/button_share" />

    <TextView
        android:id="@+id/Article_Detail_Header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_gravity="center"
        android:layout_marginRight="5dp"
        android:layout_toLeftOf="@id/Article_Detail_Share"
        android:gravity="center"
        android:padding="2dp"
        android:text="Quarterly Issue - 10 / 2011"
        android:textColor="@color/black"
        android:textSize="@dimen/s16sp"
        android:textStyle="bold" />
</RelativeLayout>

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/Article_Detail_Image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_margin="5dp"

                android:padding="2dp"
                android:scaleType="fitCenter"
            android:adjustViewBounds="true"
                android:src="@drawable/image_box_big" />

            <TextView
                android:id="@+id/Article_Detail_Title"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="9dp"
                android:layout_marginRight="3dp"
                android:layout_marginTop="3dp"
                android:gravity="left|center_vertical"
                android:textColor="@color/text_header_red"
                android:textSize="@dimen/s20sp" />

            <TextView
                android:id="@+id/Article_Detail_Author"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="3dp"
                android:layout_marginLeft="9dp"
                android:layout_marginRight="3dp"
                android:textColor="@color/black"
                android:textSize="@dimen/s11sp"
                android:textStyle="italic" />
        </LinearLayout>

        <WebView
            android:id="@+id/Article_Detail_Web_Description"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_margin="3dp"
            android:layout_weight="1" />

        <Gallery
            android:id="@+id/Article_Detail_Image_Gallery"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:gravity="left"
            android:spacing="5dp" />
    </LinearLayout>
</ScrollView>

<include
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/bottom_layout" /> 
```

更新的布局文件

```
<include
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    layout="@layout/header_layout" />

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/title_background"
    android:padding="5dp" >

    <Button
        android:id="@+id/Article_Detail_Share"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_gravity="right|center_vertical"
        android:background="@drawable/button_share" />

    <TextView
        android:id="@+id/Article_Detail_Header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_gravity="center"
        android:layout_marginRight="5dp"
        android:layout_toLeftOf="@id/Article_Detail_Share"
        android:gravity="center"
        android:padding="2dp"
        android:text="Quarterly Issue - 10 / 2011"
        android:textColor="@color/black"
        android:textSize="@dimen/s16sp"
        android:textStyle="bold" />
</RelativeLayout>

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <!-- <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" > -->

            <ImageView
                android:id="@+id/Article_Detail_Image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_margin="5dp"

                android:padding="2dp"
                android:scaleType="fitCenter"
            android:adjustViewBounds="true"
                android:src="@drawable/image_box_big" />

            <TextView
                android:id="@+id/Article_Detail_Title"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="9dp"
                android:layout_marginRight="3dp"
                android:layout_marginTop="3dp"
                android:gravity="left|center_vertical"
                android:textColor="@color/text_header_red"
                android:textSize="@dimen/s20sp" />

            <TextView
                android:id="@+id/Article_Detail_Author"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="3dp"
                android:layout_marginLeft="9dp"
                android:layout_marginRight="3dp"
                android:textColor="@color/black"
                android:textSize="@dimen/s11sp"
                android:textStyle="italic" />
        <!-- </LinearLayout> -->

        <WebView
            android:id="@+id/Article_Detail_Web_Description"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="3dp"/>

        <Gallery
            android:id="@+id/Article_Detail_Image_Gallery"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:gravity="left"
            android:spacing="5dp" />
    </LinearLayout>
</ScrollView>

<include
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/bottom_layout" /> 
```

我知道在滚动视图中拥有 webview 和画廊不是好方法，而是它的项目要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:58:30.007

尝试

```
 wv.loadDataWithBaseURL(null,html,"text/html","utf-8","about:blank"); 
```

# html - 我可以保持 websql 数据库打开以提高性能吗？

> ID：12154964
> 
> 赞同：0
> 
> 时间：2012-08-28T07:53:11.577
> 
> 标签：html, transactions, persistence, web-sql

我有一个在 iOS 和 Android 上运行的 HTML5 移动应用程序。用户通常会将少量本地数据存储在几个表中。假设五个表平均有三个记录。

websql的性能真的很差。我在[这篇文章](http://developer.appcelerator.com/question/130048/sqlite-performance---how-to-make-it-acceptable)中读到，大部分延迟可能是在为每个事务打开和关闭数据库时。我的用户通常一次只做一个事务，因此每次操作打开和关闭数据库所需的时间通常占总时间的很大一部分。

我想知道我是否可以只打开一次数据库，省去所有事务包装器并立即执行 sql？

除了用户更新他们的数据，或者应用程序在更新后读取数据并将数据发送到服务器进行计算和统计之外，任何其他人或进程都不会使用该表。

最关键的是：如果我遵循上述策略，并且数据库从未关闭，但用户或操作系统关闭应用程序（正确地说：webview），更改的数据会保留还是丢失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:00:19.317

我也保持连接打开。对于 IndexedDB，我可以同时在 UI 和后台线程上保持打开状态而不会出现问题。我相信 WebSQL 也会一样。如果你只使用 JS 文件，你可以试试我自己的[javascript 库](http://dev.yathit.com/ydn-db/starting/setup.html)，它是 IndexedDB 和 WebSQL 的非常薄的包装器。但是该库是为 IndexedDb 风格编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:24:16.920

好的，我发现了问题。我使用persistenceJS框架来处理本地数据库。这保留了存储在 js 对象中的 websql 数据的副本，并使数据库和 js 对象保持同步。这是一个需要一段时间的过程，我将所有内容都放在同步之后的“刷新”处理程序中。

# java - 在一个实例 bean 上同时使用注解和 XML 配置

> ID：12154968
> 
> 赞同：2
> 
> 时间：2012-08-28T07:53:24.720
> 
> 标签：java, spring

我正在使用注释创建服务：

```
@Service
@Repository
public class UserServiceImpl implements UserService {
  private String defaultPassword;

  @Autowired
  private UserRepository userRepository;

  // ...

  @Override
  public void setDefaultPassword(String defaultPassword) {
     this.defaultPassword = defaultPassword;
  }

  @Override
  public String getDefaultPassword() {
     return defaultPassword;
  }
} 
```

我想`defaultPassword`使用 Spring XML 配置而不是通过注释来配置值，所以我在 XML 定义中添加了以下内容：

```
<bean id="userServiceImpl" class="com.test.service.UserServiceImpl">
   <property name="defaultPassword" value="youmustchangethis" />
</bean> 
```

然后，我编写如下测试：

```
public class UserServiceImplTest extends AbstractServiceImplTest {

  @Autowired
  private UserService userService;

  // ...
} 
```

我已经在注释和 XML 声明中匹配了 bean 名称（使用 bean id）。我的问题是`userService`变量是否`UserServiceImplTest`总是由在 XML 和注释中配置的同一个单例 bean 注入？我搜索了文档，但没有找到像这样的“混合”方法的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:17:27.147

在这种情况下，xml 文件中定义的 bean 将覆盖从注释生成的 bean。这是因为spring根据类名命名注释bean，第一个字母变为小写。除非你给它一个明确的名字。不能存在两个同名的 bean，因此 xml 定义会覆盖注释一个。

你最终会在`userServiceImpl`这里调用一个单例。

# c# - 使用 System.Net.Mail 保存和发送邮件

> ID：12154975
> 
> 赞同：3
> 
> 时间：2012-08-28T07:54:29.703
> 
> 标签：c#, .net, email, smtp

我正在尝试使用 C# 代码发送和保存发送电子邮件。但我无法完成这件事。我可以保存邮件，也可以发送。但我不能同时完成。

这就是我所拥有的：

```
public ActionResult Index()
{
    MailMessage message = new MailMessage();

    message.From = new MailAddress("test@mail.com");
    message.To.Add(new MailAddress("mymail@gmail.com"));
    message.Subject = "Test Subject";
    message.Body = "This is a test message";
    message.IsBodyHtml = true;

    // Setup SMTP settings
    SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587);
    smtp.EnableSsl = true;
    NetworkCredential basicCredential = new NetworkCredential("mymail@gmail.com", "******");

    smtp.UseDefaultCredentials = false;
    smtp.Credentials = basicCredential;
    smtp.Send(message);

    // save
    smtp.EnableSsl = false;
    smtp.PickupDirectoryLocation = @"C:\Temp";
    smtp.Send(message); 

    return View();
} 
```

所以首先我尝试发送电子邮件。这样可行。然后我试图将电子邮件保存到我的硬盘中。但它永远不会得救。当我不发送电子邮件并尝试立即将其保存到我的硬盘时，它确实有效。但我需要两者都做。

任何人都知道我怎么能做到这一点？我只需要记录发送消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:57:09.740

取件目录中的邮件消息由本地 SMTP 服务器（如果存在）（如 IIS）自动发送。( [SmtpClient.PickupDirectoryLocation](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.pickupdirectorylocation.aspx) )

如果要保存到文件系统，则需要设置`DeliveryMethod`为`SmtpDeliveryMethod.SpecifiedPickupDirectory`：

```
client.DeliveryMethod = SmtpDeliveryMethod.SpecifiedPickupDirectory; 
client.PickupDirectoryLocation = @"C:\Temp"; 
client.Send(message); 
```

请参阅[如何将 MailMessage 对象作为 *.eml 或 *.msg 文件保存到磁盘](https://stackoverflow.com/questions/1264672/how-to-save-mailmessage-object-to-disk-as-eml-or-msg-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:00:00.673

您必须将属性更改`DeliveryMethod`为`SmtpDeliveryMethod.SpecifiedPickupDirectorynot`不发送电子邮件。

只是更改`PickupDirectoryLocation`将不起作用，因为`DeliveryMethod`设置为`Network`（这是默认值）时不使用该属性。

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.deliverymethod.aspx)。

# objective-c - iOS - 大滚轮

> ID：12154979
> 
> 赞同：0
> 
> 时间：2012-08-28T07:54:45.593
> 
> 标签：objective-c, ios

我正在开发一个具有大滚轮的应用程序 - 请参见此处：[http ://aspyreapps.com/Files/Aspyre/wheels.jpg](http://aspyreapps.com/Files/Aspyre/wheels.jpg)

轮子内的内容需要动态创建，而不是静态图形。问题是我需要内容表现得像一个轮子，所以当轮子转动时，内容的角度会相应改变——而不仅仅是直线上下移动。

关于我如何完成这样的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:28:56.820

Affine transform rotate with offset of the center point. Don't know how to do that of the top of my head, but found something that might help here:

[Affine transform around a point](https://stackoverflow.com/questions/8275882/one-step-affine-transform-for-rotation-around-a-point)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:12:49.713

最简单的方法是检测自定义 UIView 的手势，您可以在其中使用 Core Graphics 动态绘制文本区域。您可以在自定义 UIView 中使用以下代码轻松旋转元素：

```
- (void)drawRect:(CGRect)rect {
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextRotateCTM(context, M_PI / 4);

...

NSString* text = @"Hello";
[text drawAtPoint:point withFont:font];
} 
```

# qt - 如何在 QTestLib 对 Qt 应用程序进行单元测试时构建项目

> ID：12154980
> 
> 赞同：39
> 
> 时间：2012-08-28T07:54:54.437
> 
> 标签：qt, unit-testing, qtestlib, qttest

我得到了我的 Qt 项目，并且正在使用 Qt Creator。我想对我所有的代码进行单元测试。
但是我对 QTestLib 框架还是很陌生，但每个人都推荐它来测试基于 Qt 的源代码。现在我有点困惑如何用应用程序构建测试项目。

1.  我可以将所有源代码和测试代码放在同一个项目中吗？如果是这样，我该如何管理它们？我没有找到任何让我在一个项目中启动应用程序或开始测试的选项。
2.  如果我把app源码和测试代码放在不同的项目中，测试项目会引用app项目，不太方便。
3.  对于需要测试的类的批次，我如何管理测试代码？

在这种情况下，你们如何管理测试代码？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-25T02:46:21.763

第一个结构源如下：

```
MyApp
MyAppUnitTest 
```

在`MyApp`项目下，使用 a`MyAppSrc.pri`来定位源文件：

```
SOURCES += \
    ../../../framework/src/myapp.cpp \
    ../../../framework/src/mycontrol.cpp

HEADERS += \
    ../../../framework/inc/myapp.h \
    ../../../framework/inc/mycontrol.h

INCLUDEPATH += ../../../framework/extlibs 
```

包括`.pri`这个`MyApp.pro`：

```
include(MyAppSrc.pri) 
```

然后像主项目一样构建测试项目，额外包含一个`MyAppUnitTest.pro`：

```
include(MyAppUnitTestSrc.pri)
include(../MyApp/MyAppSrc.pri) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-04-29T09:25:43.213

我使用这种方法： http: [//xilexio.org/ ?p=125](http://xilexio.org/?p=125)

即，将`test`配置放在构建所有内容的单个`.pro`文件中。文件层次结构：

```
myproject.pro
src/
    Example1.cpp
    Example2.cpp
    Example1.h
    Example2.h
test/
    ExampleTest.cpp
    ExampleTest.h 
```

`myproject.pro`文件：

```
QT += #needed modules

CONFIG += qt c++11

HEADERS += \
    src/Example1.h \
    src/Example2.h

SOURCES += \
    src/Example1.h \
    src/Example2.h

test{
    message(Configuring test build...)

    TEMPLATE = app
    TARGET = myapptests

    QT += testlib

    HEADERS += \
        test/ExampleTest.h

    SOURCES += \
        test/ExampleTest.cpp
}
else{
    TEMPLATE = lib
    TARGET = myapp

    CONFIG += plugin

    TARGET = $$qtLibraryTarget($$TARGET)
} 
```

在我的示例中，我正在构建一个插件库，但该方法也应该适用于应用程序。在应用程序的情况下，`SOURCES -= src/main.cpp`该子句可能需要它`else`，插件库没有它。如果不这样做，应用程序的 将与单元测试的`main()`冲突。`main()`

`ExampleTest.cpp`如下所示：

```
#include "ExampleTest.h"

void ExampleTest::exampleTest(){
    //Do the tests
}

QTEST_MAIN(ExampleTest) 
```

`ExampleTest.h`如下所示：

```
#include <QtTest/QtTest>

class ExampleTest : public QObject {
Q_OBJECT

private slots:
    void exampleTest();
}; 
```

要构建项目测试，请在与常规构建不同的目录中运行：

```
qmake path/to/myproject.pro "CONFIG += test" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-11-02T12:40:31.477

我喜欢其他答案，但我也想就我目前工作的公司如何做到这一点提供一些反馈：

1.  创建一个`subdirs`项目（这将是管理所有项目的顶级项目，包括您的库项目或您想要测试的任何项目）

    ```
    +-----MyProject (top-level subdirs) 
    ```

2.  将您的库项目添加为子项目

    ```
    +-----MyProject (top-level subdirs)
              |
              +-----Library (library project, UI project etc.) 
    ```

3.  添加另一个`subdirs`项目（用于测试）

    ```
    +-----MyProject (top-level subdirs)
              |
              +-----Library (library project, UI project etc.)
              |
              +-----Tests (subdirs for tests) 
    ```

4.  创建一个`QUnitTest`项目并将其添加到测试`subdirs`项目中

    ```
    +-----MyProject (subdirs)
              |
              +-----Library (library project, UI project etc.)
              |
              +-----Tests (subdirs for tests)
                      |
                      +----- TestA (QUnitTest project for testing feature A) 
    ```

5.  添加您认为合适的尽可能多的测试

    ```
     ...
              |
              +-----Tests (subdirs for test)
                      |
                      +----- TestA (QUnitTest project for testing feature A)
                      |
                      +----- TestB (QUnitTest project for testing feature B)
                      |
                      +----- TestC (QUnitTest project for testing feature C)
                      |
                     ...
                      |
                      +----- TestZ (QUnitTest project for testing feature Z) 
    ```

如果您需要分组测试，您也可以使用它`subdirs`来执行此操作。`subdirs`还确保在文件系统中创建**真实目录。**如果您想避免太多，`subdirs`您可以将测试分组到您自己在`Tests`项目文件夹内的文件系统中创建的文件夹中。

除此之外，我还建议添加一个`subdirs`for **template projects**。

```
+-----MyProject (subdirs)
          |
          +-----Library (library project, UI project etc.)
          |
          +-----Tests (subdirs for tests)
          |           |
          |          ...
          |
          +-----Templates (subdirs for template projects
                      |
                      +----- TemplateA (template project for feature A)
                      |
                      +----- TemplateB (template project for feature B)
                      |
                      +----- TemplateAB (template project for feature A and B together)
                      |
                     ...
                      |
                      +----- TemplateZ (template project for feature Z) 
```

这当然是基于您图书馆的功能。对于模板项目，我的意思是自定义小部件等，它们链接到您的库并以应该向用户显示的方式选择性地（或全部）公开其功能。例如，如果您有一个管理各种相机设备的库，您可以为每个相机设备创建一个模板项目，从而允许您的库的用户只需复制粘贴特定的模板项目并展开它，或者至少看看如何集成您的图书馆应该一般发生。这允许减少文档，同时提供很好的独立示例，这应该减少开发时间，否则这些时间会花费在弄清楚库的集成和使用如何工作上（你可以说它是一组 Hello World项目:)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T23:56:22.640

我使用 CMake 的 Qt Creator 而不是 qmake 来构建我的 Qt 项目。

基本上我必须文件夹：

```
src
tests 
```

每个测试本身就是一个程序测试一个类。**要测试的应用程序被编译为库。**. 您将文件夹 src 中的所有源代码编译为库。

```
// ClassTest.cpp
#include "ClassTest.h"
#include "Class2Test.h" // Class of the app

#include <QtTest/QtTest>

ClassTest::ClassTest( QObject* parent )
    : QObject(parent)
{ 
}

QTEST_MAIN( ClassTest )
#include "ClassTest.moc" 
```

您只需要将您的库链接到您的测试可执行文件。

例子：

在 src 文件夹中的 CMakeLists.txt 示例

```
add_library( MyAPP
    SHARED
    Class2Test.cpp
)
target_link_libraries( MyAPP
    ${QT_LIBRARIES}
) 
```

在测试文件夹 CMakeLists.txt 示例中，针对每个测试。

```
qt4_automoc( ${test_src} )
add_executable( ${test_name} ${test_src} )
target_link_libraries( ${test_name}
    MyAPP
    ${QT_LIBRARIES}
    ${QT_QTTEST_LIBRARY}
) 
```

它仍然在同一个项目中，但是您可以添加一个标志来让用户编译或不编译测试。它很干净，因为应用程序保持不变，它允许您测试应用程序的每个类。

# oracle - Oracle：UPDATE 语句导致 ORA-00933 错误

> ID：12154984
> 
> 赞同：1
> 
> 时间：2012-08-28T07:55:16.213
> 
> 标签：oracle

谁能看出这句话有什么问题？我已经尝试修复它一段时间但无济于事，而且我在网上找到的答案坚持我需要删除 ORDERBY 语句，这是我没有使用的东西。

```
BEGIN
   UPDATE        Tags
     SET           MaskReasonId = v_MaskReasonId,
                    AppliedTime = v_AppliedTime,
                    ExpireTime = v_ExpireTime,
                    UserId = v_UserId,
                    ClientNode = v_ClientNode,
                    CommentId = v_CommentId
     FROM          Tags
     WHERE         Tag = v_sTag OR Tag = v_Tag;
END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:21:19.070

Oracle 不支持 UPDATE FROM 语句，但支持 UPDATE SELECT。试试这个。对于此查询，Nodes.NodeID 必须是 Nodes 表中的主键。我猜 v_MaskReasonId,... 是来自 NODES(?) 的字段：

```
 update (select * from Tags
         INNER JOIN    Nodes ON Nodes.NodeId = Tags.NodeID
          WHERE         Node = v_Node AND (Tag = v_sTag OR Tag = v_Tag)
         ) t
       set t.MaskReasonId = t.v_MaskReasonId
           t.ExpireTime = t.v_ExpireTime,
           t.UserId = t.v_UserId,
           t.ClientNode = t.v_ClientNode,
           t.CommentId = t.v_CommentId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:06:46.997

你必须删除`from tags`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:12:34.300

Oracle 不支持更新语句中的“FROM”结构，试试这个：

```
BEGIN
   UPDATE        Tags
     SET           MaskReasonId = v_MaskReasonId,
                    AppliedTime = v_AppliedTime,
                    ExpireTime = v_ExpireTime,
                    UserId = v_UserId,
                    ClientNode = v_ClientNode,
                    CommentId = v_CommentId
     WHERE EXISTS (SELECT * FROM Tags WHERE Tag = v_sTag OR Tag = v_Tag);
END; 
```

# html - Favicon 不适用于 SSL

> ID：12154986
> 
> 赞同：3
> 
> 时间：2012-08-28T07:55:19.520
> 
> 标签：html, ssl, favicon

我在 SSL 主机上有一个网站。它有一个由域相关 URL 引用的网站图标：

```
<link rel="shortcut icon" type="image/x-icon" href="/contextpath/favicon.ico"/> 
```

当 SSL 关闭时，它可以工作，但当 SSL 开启时，它不起作用。如何让 favicon 使用 SSL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:02:24.397

[根据设计，在最新版本的 Firefox 中](https://blog.mozilla.org/ux/2012/06/site-identity-ui-updates/)，网站图标已从位置栏中删除。这主要是为了防止降级攻击，攻击者能够提供一个看起来像锁的网站图标，从而使用户相信他们正在使用 HTTPS，而实际上他们没有使用。

# racket - mzlib/etc 的身份是如何工作的？

> ID：12154987
> 
> 赞同：1
> 
> 时间：2012-08-28T07:55:18.933
> 
> 标签：racket

在一个[网页程序](http://www.eng.utah.edu/~cs5510/server.rkt)中，有如下代码片段：

```
 (require mzlib/etc)
(define (h-handler base args)
 (do-h identity))

(define (do-h cont)
  [begin
    (printf "~e\n" cont)
  (web-read/k "First number"
              (lambda (v1)
                (web-read/k "Second number"
                            (lambda (v2)
                              (cont (number->string (+ v1 v2)))))))]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:55:53.420

`identity`只是接受一个参数并返回该参数的函数的名称。它是这样工作的：

```
> (identity 4)
4
> (identity "hello world")
"hello world" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:07:57.547

即使它尚未实现，`identity`对代码来说也是微不足道的：

```
(define (identity x) x) 
```

# jquery - 使用 Resize Plugin 使用 jQuery 检测 DIV 的高度变化

> ID：12154989
> 
> 赞同：0
> 
> 时间：2012-08-28T07:55:28.273
> 
> 标签：jquery

我正在使用此插件来检查 DIV 的大小是否已更改：

[http://benalman.com/projects/jquery-resize-plugin/](http://benalman.com/projects/jquery-resize-plugin/)

它工作得很好，但我不想只检测 DIV 是否调整大小，我想检测 DIV 的高度是增加还是减少！

这怎么可能实现？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:02:10.173

使用变量来跟踪高度：

```
var previousHeight = jQuery("#myDiv").height();

$("#myDiv").resize(function(e){ 
    // do something when element resizes 
    if(previousHeight < jQuery(this).height()){
        alert("now I'm bigger");
    }else{
        alert("Now I'm smaller");
    }
    //update previousHeight for next use
    previousHeight = jQuery(this).height();
}); 
```

# android - 触摸 Activity 时的 Android 视觉效果

> ID：12154997
> 
> 赞同：0
> 
> 时间：2012-08-28T07:56:22.863
> 
> 标签：android, touch, android-activity, effect

我正在开发一个 Android 应用程序，我想为 UI 添加一些视觉效果。我有一个活动（我们称之为 MainActivity），上面有一些文本字段、按钮和画廊。我想要实现的是：当用户触摸此活动的某个位置时，在他触摸的点应该有一些视觉效果（例如像闪光等）。

所以我的问题的基本部分是：a）我如何确定用户触摸的位置 b）我如何将我的效果绘制到屏幕上（作为活动的“覆盖”）。

提前感谢每一个有用的答案。

（我已经检查了[这个](https://stackoverflow.com/questions/11938632/creating-a-spray-effect-on-touch-draw-in-android)答案，但它似乎不适用于我的情况。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:03:54.347

首先，您必须将 onTouchListener 添加到您的根布局中，然后您可以获得用户触摸屏幕的坐标。例子 ：

```
 float x,y;
   rl = (RelativeLayout) findViewById(R.id.root_layout);
   rl.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            float x = event.getX();
            float y = event.getY();
                return super.onTouchEvent();
        }

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:50:39.147

要进一步回答您的问题，要进行叠加，请查看 APIDemos -> Graphics -> OpenGL ES -> Translucent GLSurfaceView。这将帮助您在活动上创建叠加层。API 演示中可能还有一些其他示例可以为您提供一些帮助。Android 的 API 演示是一组很好的示例，可以解决一些已知问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:02:06.090

您应该覆盖`onTouchEvent`您的活动的方法。然后您可以获取触摸事件的坐标：

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    float touchX = event.getX();
    float touchY = event.getY();

    switch(event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        // touch down
        break;
    case MotionEvent.ACTION_MOVE:
        // movement
        break;
    case MotionEvent.ACTION_UP:
        // touch up
        break;
    default:
        // default
    }

    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T08:02:38.883

如果您正在使用 ICS，那么我建议您查看“设置”应用程序中的“开发人员选项”。如果您不使用 ICS，我相信您可以查看 APIDEMOS for touchevents。他们在触球上画线。里面的代码，可以让你开始。