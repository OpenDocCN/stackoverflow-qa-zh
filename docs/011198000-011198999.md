# StackOverflow 问答 11198000-11198999

# java - 匹配所有 URL，不包括 jpg、gif、png

> ID：11198001
> 
> 赞同：0
> 
> 时间：2012-06-25T22:00:56.440
> 
> 标签：java, php, regex, match, imageurl

我想匹配所有 URL，但从与该正则表达式匹配的蜜蜂中排除图像 URL： jpe?g|gif|png 。

\b(?:https?|ftp|file)://[-A-Z0-9+&@#/%?=~_|$!:,.;]*A-Z0-9+&@# /%=~_|$

问题是带有排除的部分不是这样工作的： (?!jpe?g|gif|png)

有没有人有解决方案？

例子：

不匹配：

```
http://example.com/example.jpg
http://example.com/example231/example.gif 
```

匹配：

```
http://example.com/example.html
http://example.com/example/?id=4331
http://example.com/example/example/ex_ample/ex-ample/?id=4331 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:09:48.413

Just start your regex with `(?!.*(?:\.jpe?g|\.gif|\.png)$)`,

so if your current regex is `\b(?:https?|ftp|file)://...`, then merge it to

`(?!.*(?:\.jpe?g|\.gif|\.png)$)\b(?:https?|ftp|file)://...`

Read also [PHP URL validation](https://stackoverflow.com/questions/10435452/php-url-validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T18:45:30.370

我正在为最近关闭的一个重复问题解决这个问题，所以我会在这里发布：

`((?!.*(png|jpg|gif)(?!.))(?:https?|file|ftp):\/\/.*.\.(?:com|ca|net|museum|org|co\.uk))`

如果合适，可以随意添加更多协议，如果合适，可以添加更多图像扩展，如果合适，可以添加更多顶级域。

[在 regex101 上测试](http://regex101.com/r/aB6jD5)

# javascript - 将用户从浏览器返回到 Android 应用

> ID：11198004
> 
> 赞同：1
> 
> 时间：2012-06-25T22:01:10.697
> 
> 标签：javascript, android

我正在构建一个 Twitter 应用程序，该应用程序打开一个网页以允许某人授权我的应用程序。一旦用户对站点进行了身份验证，就会出现问题。它让我回到我的 url，我想从那里关闭浏览器窗口以返回我的本机应用程序。我尝试了以下方法，但浏览器窗口仍然打开：

```
 <script>
      window.close();
      window.self.close();
    </script> 
```

用户目前必须返回主屏幕并再次找到我的应用程序。

是否有 javascript 可以将用户返回到我的应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:07:01.040

为此，您应该在自己的应用程序中使用 WebView，而不是使用浏览器应用程序登录，因为您无法关闭它。

创建一个登录活动，其中包含一个加载 Twitter 登录页面的 WebView。为该 WebView 实现自定义 WebViewClient，覆盖[onPageFinished](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageFinished%28android.webkit.WebView,%20java.lang.String%29)方法并检查 URL 参数是否等于您的登录重定向目标 URL。从 URL 或页面解析访问令牌（我不知道这里的确切技术细节，抱歉）。

然后，您可以将访问令牌存储在应用程序私有数据库或首选项文件中，最后完成登录活动，这将使您回到上一个活动。

附带说明：您应该在 <script> 标签中指定 type="text/javascript" 参数，否则这些标签可能会被忽略，具体取决于浏览器。

# javascript - 在不干预文本节点的情况下选择相邻兄弟

> ID：11198007
> 
> 赞同：4
> 
> 时间：2012-06-25T22:01:20.163
> 
> 标签：javascript, jquery, html, css

由于悲惨的情况，我收到了这样的 HTML：

```
<p>Perform the following commands:
   <code>&gt; cd /foo</code><code>&gt; adb shell</code><code># ps</code>
</p> 
```

我需要让代码看起来像这样：

```
Perform the following commands:
> cd /foo
> adb shell
# ps 
```

我以为我会很棘手并使用[CSS Adjacent Sibling Selector](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)：

```
code + code:before { content:'\A'; white-space:pre } 
```

...但后来我发现这甚至适用于以下内容：

```
<p>If you go to your <code>C:\</code> directory and run <code>dir</code> …&lt;/p> 
```

是否有一个仅 CSS 的解决方案来选择相邻元素**而不干预非元素节点**？

*当且仅当没有时，请随意提出 JavaScript（包括 jQuery）解决方案。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:18:13.887

这有效：

```
$('code').each(function() {
    var prev = this.previousSibling;
    var next = this.nextSibling;
    if ((prev && prev.tagName === 'CODE') ||
        (next && next.tagName === 'CODE')) {
        $(this).addClass('block');
    }
});​ 
```

然后在您的 CSS 中使用`.block`选择器向匹配的元素添加`display: block`任何其他所需的样式。

演示在[http://jsfiddle.net/alnitak/JYzGg/](http://jsfiddle.net/alnitak/JYzGg/)

如果您还没有加载 jQuery，那么将其编码为纯 Javascript 将非常容易 - 如果您应该在这些元素上已经有其他类名，那么 jQuery 恰好使添加类比纯 JS 更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:39:42.630

虽然我看到您已经接受了答案，但我想我会提供这个作为替代方案：

```
$('code').each(
    function(){
        if (this.previousSibling == this.previousElementSibling){
            $(this).addClass('block');
        }
        else {
            $(this).addClass('inline');
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pWMeF/1/)。

当然，这只会在那些实现的浏览器上运行`previousElementSibling`（但我认为大多数实现 CSS 伪元素的浏览器都实现了这个功能）。

而且，在纯原生 JavaScript 中：

```
var codes = document.getElementsByTagName('code');

for (var i=0, len=codes.length; i<len; i++){
    var cur = codes[i];
    codes[i].className = cur.previousSibling == cur.previousElementSibling ? 'block' : 'inline';
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pWMeF/2/)。

而且因为我更喜欢一种稍微整洁的方法来添加类（而不是在我添加的新类之前显式添加空格字符），所以也有这种方法：

```
function addClass(elem,newClass){
    if (!elem) {
        return false;
    }
    else {
        var curClass = elem.className;
        if (curClass.length){
            return curClass + ' ' + newClass;
        }
        else {
            return newClass;
        }
    }
}

var codes = document.getElementsByTagName('code');

for (var i=0, len=codes.length; i<len; i++){
    var cur = codes[i];
    codes[i].className = cur.previousSibling == cur.previousElementSibling ? addClass(cur,'block') : addClass(cur,'inline');
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pWMeF/3/)。

* * *

**针对 Alnitak 提出的评论进行了编辑**（当我去给自己泡一杯茶时，我意识到了第二个，第一个我根本没有考虑过）：

```
var codes = document.getElementsByTagName('code');

for (var i=0, len=codes.length; i<len; i++){
    var cur = codes[i];
    codes[i].className = cur.previousSibling == codes[i-1] || cur.nextSibling == codes[i+1]? addClass(cur,'block') : addClass(cur,'inline');
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pWMeF/6/)

参考：

*   [`nextElementSibling`](https://developer.mozilla.org/en/DOM/Element.nextElementSibling).
*   [`previousElementSibling`](https://developer.mozilla.org/en/DOM/Element.previousElementSibling).

# php - Zend_DB 将大量数据导出到 csv 的正确策略是什么？– 块 – fetchAll – fetchRow

> ID：11198008
> 
> 赞同：0
> 
> 时间：2012-06-25T22:01:19.930
> 
> 标签：php, mysql, zend-framework, export, zend-db

我必须导出大量数据。此外，我必须通过 php 稍微转换每条记录。导出大量数据的正确策略是什么？

*   我是否使用 limit(1000,x) 在多个分块查询中拆分 Zend_Db 请求？
*   我使用 fetchAll 还是 fetchRow？
*   考虑到高性能，哪个 fetchrow 或 fetchall 表现更好？

我不能使用 SQL OUTFILE，因为我必须解释来自一列的 xml/html。据我所知mysql无法做到这一点。这对我来说意味着，我可以使用 fetchrow 或 fetchall，但我无法在 mysql 服务器上进行处理。由于我正在获取大量数据，因此 fetchAll 可能会导致 php 内存不足。所以我不确定我是否可以通过使用 fetchrow 来避免这种情况，或者我是否必须使用块？fetchrow 比 fetchall 慢吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:09:16.373

```
SELECT field, field1, field2 
INTO OUTFILE '/home/user/out.csv' 
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
FROM your_table WHERE 1=1 
```

# mongodb - 开发期间的流星自定义mongodb

> ID：11198014
> 
> 赞同：24
> 
> 时间：2012-06-25T22:01:35.523
> 
> 标签：mongodb, meteor

我将如何使用（实时运行的）MongoDB 来开发另一个流星应用程序？我尝试修改 ( `.meteor/server/server.js`) 并`MONGO_URL`在运行前指定无济于事`meteor`。

这没有使用捆绑的 MongoDB，它必须是一个单独的/自定义的（基本上是另一个流星实例）。

这可以通过[deploy 方法](http://docs.meteor.com/#deploying)来完成，但是开发过程中的正常`meteor run`情况呢？

更新：这确实有效，但是客户端实现似乎有点小故障

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-16T16:43:40.857

如[非官方 Meteor FAQ](https://github.com/oortcloud/unofficial-meteor-faq#user-content-how-do-i-hook-into-an-existing-running-mongodb-instance)中所述，您可以调用 Meteor 并将`MONGO_URL`环境变量设置为所需的实例：

```
MONGO_URL=mongodb://localhost:27017 meteor 
```

如果您的 MongoDB 处理多个数据库，您可以通过将其附加到 URL 来指示使用哪一个：

```
MONGO_URL=mongodb://localhost:27017/mydb meteor 
```

您甚至可以通过运行以下命令来阻止 Meteor 在开发中启动本地 Mongo 实例：

```
MONGO_URL=none meteor 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-06T08:02:58.153

我发现你不应该忘记指定要连接的数据库。就我而言，我想要第二个 Meteor 实例从第一个实例连接到开发 MongoDB 服务器。

Meteor 使用 HTTP 端口 +2 用于开发 MongoDB 和数据库“meteor”，因此启动第二个服务器的正确方法是：

```
MONGO_URL=mongodb://localhost:3002/meteor meteor --port=3800 
```

# java - 在 java servlet 中发送邮件有效，但地址和主题未知

> ID：11198017
> 
> 赞同：0
> 
> 时间：2012-06-25T22:01:56.450
> 
> 标签：java, servlets

这是一个小邮件脚本，它从表单中获取信息，然后发送邮件。它就像一个魅力，只有一个问题是发件人地址和主题不起作用。邮件没有发件人地址，也没有主题。

有谁知道怎么回事？

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException, Exception {
    response.setContentType("text/html;charset=UTF-8");
    //PrintWriter out = response.getWriter();

    //SMTPserver en de mail naar waar de mensen hun mail versturen
    String smtpServ = "uit.telenet.be";
    String to = "ddd@gmail.com";

    String from = request.getParameter("mail");
    String subject = request.getParameter("subject") + "geschreven door: " + request.getParameter("naam");
    String emailContent = request.getParameter("beschrijving");

    response.setContentType("text/html");
    try {

      sendMessage(smtpServ, to, from, subject, emailContent);

    } catch (Exception e) {

      throw new ServletException(e.getMessage());

    }
}       

private void sendMessage(String smtpServer, String to, String from,
    String subject, String emailContent) throws Exception {
 try{
     SmtpClient client = new SmtpClient(smtpServer);
     client.from(from);
     client.to(to);
     PrintStream message = client.startMessage();
     message.println("Naar: " + to);
     message.println("Onderwerp:" + subject);
     message.println(emailContent);
     message.println();
     message.println("Het Burgerdemocratie Team");
     message.println();     
     message.println();
     client.closeServer();
  }
  catch (IOException e){    
     System.out.println("ERROR tijdens het verzenden van de mail:"+e);
  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:08:50.593

看来您使用的是 sun 类（根据名称 SmtpClient，我们没有导入行）。

您应该使用**javax.mail**类。

您尝试获得的所有功能都可用：setSubject、setFrom 等...

这是一个示例： [使用 SMTP 发送电子邮件](https://stackoverflow.com/questions/7263053/sending-email-using-smtp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:09:49.547

您忘记在**sendMessage()**方法中添加以下内容：

```
message.println("To: " + to);  
message.println("Subject: " + subject); 
```

# powershell - 为什么当我指定 -ErrorAction SilentlyContinue 时仍然显示错误？

> ID：11198023
> 
> 赞同：7
> 
> 时间：2012-06-25T22:02:25.290
> 
> 标签：powershell

```
PS C:\Users\ad_ctjares> Stop-Transcript -ErrorAction silentlycontinue
Transcription has not been started. Use the start-transcript command to start transcription.
Stop-Transcript : An error occurred stopping transcription: The console host is not currently transcribing.
At line:1 char:16
+ Stop-Transcript <<<<  -ErrorAction silentlycontinue
    + CategoryInfo          : InvalidOperation: (:) [Stop-Transcript], PSInvalidOperationException
    + FullyQualifiedErrorId : InvalidOperation,Microsoft.PowerShell.Commands.StopTranscriptCommand 
```

代码说明了一切。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T22:58:11.870

`ErrorAction`ubiquitous 参数可用于使用参数 value 使非终止错误静音，并可用于使用参数 value将`SilentlyContinue`非终止错误转换为终止错误`Stop`。但是，它不能帮助您忽略终止错误，在这种情况下，Stop-Transcript 会引发终止错误。如果您想忽略，请使用 try/catch 例如：

```
try { Stop-Transcript } catch {} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T21:10:55.173

您可以改用 Trap {Continue} Stop-Transcript 来避免任何错误。

# java - Android：具有现有布局的自定义视图的多个视图子项

> ID：11198026
> 
> 赞同：35
> 
> 时间：2012-06-25T22:02:42.127
> 
> 标签：java, android, xml, android-layout, android-custom-view

我必须在 Android 中构建一个更复杂的自定义视图。最终布局应如下所示：

```
<RelativeLayout>
  <SomeView />
  <SomeOtherView />
  <!-- maybe more layout stuff here later -->
  <LinearLayout>
    <!-- the children -->
  </LinearLayout>
</RelativeLayout> 
```

但是，在 XML 文件中我只想定义这个（不定义 SomeView、SomeOtherView 等）：

```
<MyCustomView>
  <!-- the children -->
</MyCustomView> 
```

这在 Android 中是否可行，如果可以：最干净的方法是什么？我想到的可能解决方案是“覆盖 addView() 方法”和“删除所有视图并稍后再次添加”，但我不确定该走哪条路……

非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-25T22:22:30.033

创建自定义容器视图是绝对可能的，并且受到鼓励。这就是 Android 所说的复合控件。所以：

```
public class MyCustomView extends RelativeLayout {
    private LinearLayout mContentView;

    public MyCustomView(Context context) {
        this(context, null);
    }

    public MyCustomView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public MyCustomView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        //Inflate and attach your child XML
        LayoutInflater.from(context).inflate(R.layout.custom_layout, this);
        //Get a reference to the layout where you want children to be placed
        mContentView = (LinearLayout) findViewById(R.id.content);

        //Do any more custom init you would like to access children and do setup
    }

    @Override
    public void addView(View child, int index, ViewGroup.LayoutParams params) {
        if(mContentView == null){
            super.addView(child, index, params);
        } else {
            //Forward these calls to the content view
            mContentView.addView(child, index, params);
        }
    }
} 
```

您可以根据需要覆盖任意多个版本`addView()`，但最终它们都会回调到我放置在示例中的版本。仅覆盖此方法将使框架将在其 XML 标记中找到的所有子项传递给特定的子容器。

然后像这样修改XML：

**res/layout/custom_layout.xml**

```
<merge>
  <SomeView />
  <SomeOtherView />
  <!-- maybe more layout stuff here later -->
  <LinearLayout
      android:id="@+id/content" />
</merge> 
```

使用的原因`<merge>`是为了简化层次结构。所有子视图都将附加到您的自定义类，即`RelativeLayout`. 如果您不使用`<merge>`，您最终`RelativeLayout`会附加到另一个`RelativeLayout`附加到所有子级，这可能会导致问题。

* * *

# 科特林版本：

```
 private fun expand(view: View) {
        val parentWidth = (view.parent as View).width
        val matchParentMeasureSpec = MeasureSpec.makeMeasureSpec(parentWidth, MeasureSpec.EXACTLY)
        val wrapContentMeasureSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)

        view.measure(matchParentMeasureSpec, wrapContentMeasureSpec)
        val targetHeight = view.measuredHeight
        view.isVisible = true
        val animation: Animation = getExpandAnimation(view, targetHeight)

        view.startAnimation(animation)
    }

    private fun getExpandAnimation(
        view: View,
        targetHeight: Int
    ): Animation = object : Animation() {
        override fun applyTransformation(
            interpolatedTime: Float,
            transformation: Transformation
        ) {
            view.layoutParams.height =
                if (interpolatedTime == 1f) {
                    LayoutParams.WRAP_CONTENT
                } else {
                    (targetHeight * interpolatedTime).toInt()
                }

            view.requestLayout()
        }

        override fun willChangeBounds(): Boolean {
            return true
        }
    }.apply {
        duration = getDuration(targetHeight, view)
    }

    private fun collapse(view: View) {
        val initialHeight = view.measuredHeight
        val animation: Animation = getCollapseAnimation(view, initialHeight)

        view.startAnimation(animation)
    }

    private fun getCollapseAnimation(
        view: View,
        initialHeight: Int
    ): Animation = object : Animation() {
        override fun applyTransformation(
            interpolatedTime: Float,
            transformation: Transformation
        ) {
            if (interpolatedTime == 1f) {
                view.isVisible = false
            } else {
                view.layoutParams.height =
                    initialHeight - (initialHeight * interpolatedTime).toInt()
                view.requestLayout()
            }
        }

        override fun willChangeBounds(): Boolean = true

    }.apply {
        duration = getDuration(initialHeight, view)
    }

    /**
     * Speed = 1dp/ms
     */
    private fun getDuration(initialHeight: Int, view: View) =
        (initialHeight / view.context.resources.displayMetrics.density).toLong() 
```

# php - 从 SimpleXML 节点提取 HTML

> ID：11198028
> 
> 赞同：0
> 
> 时间：2012-06-25T22:02:49.567
> 
> 标签：php, html, xml-parsing, simplexml

**情景**

我正在使用 PHP 的 SimpleXML 来解析博客提要。树中最重要的节点是内容。我想修剪节点的脂肪，即博客站点添加的样式功能。它都包含在同一个节点中，并且对 html 实体进行了编码。FirePHP 日志显示该字符串是 HTML。

例如，内容节点如下所示：

```
<content type='html'>
BLAH BLAH BLAH.&lt;div class="blogger-post-footer"&gt;&lt;img width='1'
height='1' src='https://blogger.googleusercontent.com/tracker
6552111825067891333-7815715921198109330?l=cobracabanarecords.blogspot.com'
alt='' /&gt;&lt;/div&gt;
&lt;a href="http://4.bp.blogspot.com/-RQPMMDLPMqg/T9ePf9jbXFI/
AAAAAAAAAGs/6egu-05Zim4/s1600/blogHeader.jpg" imageanchor="1"
style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;
"&gt;&lt;img border="0" height="92" src="http://4.bp.blogspot.com/
-RQPMMDLPMqg/T9ePf9jbXFI/AAAAAAAAAGs/6egu-05Zim4/s320/blogHeader.jpg" 
width="320" /&gt;&lt;/a&gt;
&lt;a href="http://website.com"&gt;Homepage!&lt;/a&gt;
</content> 
```

**我的问题**

我怎样才能去掉我想要的部分，并留下臃肿？我想保留文本、图像和链接，但不需要博客的样式语法或类“blogger-post-footer”的元素。是否有一个类或函数可以识别那些特定的 HTML 元素并允许我去除不相关的元素？

**更新**

我尝试了推荐的 html_entity_decode 函数。现在我有一个字符串中的原始 html。我阅读了 DOMDocument 类并尝试了这个：

```
$doc = new DOMDocument();
$doc->loadHTML($htmlContent); 
```

使用 firephp 记录显示 $doc 变量仅包含数字 1，我无法像处理 HTML 一样操作字符串。如果我可以让它工作，我认为下一步将是尝试一个 getElementsByTagName 函数，然后遍历节点列表来 removeChild，或者将它复制到一个数组中。我仍然可以在这方面使用一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:17:43.597

一旦我走上正确的轨道，我就能在这里找到正确的语法：

[https://stackoverflow.com/a/4177407/1193509](https://stackoverflow.com/a/4177407/1193509)

结果与

```
$htmlContent = html_entity_decode($entry->content);
$doc = new DOMDocument();
$doc->loadHTML($htmlContent);
foreach($doc->getElementsByTagName('div') as $divs){
    $divs->parentNode->removeChild($divs);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:07:44.590

从 <content> 获取字符串，在字符串上使用[html_entity_decode()](http://www.php.net/html_entity_decode)来获取原始 html。使用[strip_tags()](http://www.php.net/strip_tags)删除所有 html 或使用内容 html 创建另一个简单的 xml 对象，然后通过并删除样式/其他属性和标签。

您还可以使用 strip_tags() 删除除允许的标签白名单之外的所有 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:30:31.587

您还可以使用以下[正则表达式方法](http://php.net/manual/en/function.preg-replace.php)来清理字符串，**同时保留 img 和 a 标签**：

```
$string_of_content = html_entity_decode(""); // Read the string into this and don't forget to decode the entities

preg_replace("/<(?!img)(?!a).*?>/","",$string_of_content); 
```

尽管您必须[解码 HTML 实体](http://php.net/manual/en/function.html-entity-decode.php)才能使此方法正常工作。

# django - ModelForm 和字段生成

> ID：11198030
> 
> 赞同：1
> 
> 时间：2012-06-25T22:03:00.593
> 
> 标签：django

在 forms.py 中使用 ModelForm 会节省很多时间，因为不需要在表单中再次重写整个字段。

```
class ContactsForm(ModelForm):
    class Meta:
        model = Contact 
```

取而代之的是 forms.Form 需要手动再次定义所有字段。由于更多的控制，有些人更喜欢这种方法。

虽然很多都是直截了当的：

```
models.CharField("First Name",max_length=30, blank=True) 
```

变成

```
forms.CharField(label = _(u'First Name'), max_length=30, blank=True) 
```

并`models.TextField(blank=True)`成为`forms.TextArea(blank=True)`等...

一个字段对我来说有点神秘，它是如何翻译成表格的，例如：

```
models.ForeignKey(ContactType) 
```

如何在表单中定义下拉菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:11:18.193

您正在寻找`forms.ModelChoiceField`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:11:31.670

你的意思是这样的吗？：

```
contact_type = forms.ModelChoiceField(queryset=ContactType.objects.all()) 
```

更多关于`ModelChoiceField`Django 的[文档](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)

# java - ycsb for mongodb

> ID：11198034
> 
> 赞同：1
> 
> 时间：2012-06-25T22:03:13.550
> 
> 标签：java, mongodb, benchmarking, ycsb, nosql

我正在尝试使用 YCSB 对本地运行的 mongoDB 实例进行基准测试。插入负载时出现以下异常：

```
YCSB Client 0.1
Command line: -db com.yahoo.ycsb.db.MongoDbClient -s -P workloads/workloada -load
Loading workload...
Starting test.
Could not initialize MongoDB connection pool for Loader: java.lang.NullPointerException
java.lang.NullPointerException
    at com.yahoo.ycsb.db.MongoDbClient.init(MongoDbClient.java:78)
    at com.yahoo.ycsb.DBWrapper.init(DBWrapper.java:63)
    at com.yahoo.ycsb.ClientThread.run(Client.java:189)
java.lang.NullPointerException
[OVERALL], RunTime(ms), 5.0
[OVERALL], Throughput(ops/sec), 0.0 
```

命令如下：

```
./bin/ycsb load mongodb -s -P workloads/workloada 
```

我在 Rhel 6.1 上运行它并使用开箱即用的 ycsb 0.1.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:08:39.747

当我从 README 链接到的 ycsb 存档运行时，我也遇到了这个错误。我验证了 mongo 已经启动并且其他客户端可以连接到数据库。因此，我决定克隆 github 存储库，从源代码构建，并在一切正常时感到惊喜。

# ms-access - 访问查询复杂度：分层计算

> ID：11198038
> 
> 赞同：0
> 
> 时间：2012-06-25T22:03:38.970
> 
> 标签：ms-access, ms-access-2007

我正在尝试对存储在 Access 中的数据进行一些复杂的计算（类似于限制）。我可以通过使用分层/嵌套查询来执行计算，其中每个表达式都基于最后一个的结果。我的问题是，在大约第 9 次迭代中，我收到“查询太复杂”错误。我的理解是这是因为 Access 限制了可以同时执行的子查询的数量。是否有在 SELECT 语句中使用 AS 的替代方法，可以让我在同一个查询中执行更多迭代？我试图简化我的 SQL 以更好地展示我在做什么（忽略示例中执行的实际计算）。

```
SELECT Tbl_1.VarA, Tbl_1.VarB,
(VarA^2*([VarA]+[VarB])/2) AS EQ1,
(VarA^2*([VarA]+[EQ1])/2) AS EQ2
FROM Tbl_1 
```

我目前的工作是将最后一次迭代保存到表中，然后对该值运行第二个查询。不过，我觉得这确实是一种不好的做法。

我尝试过，但未成功：（1）基于第一个查询（2）用它们的值替换常量变量（3）嵌套方程，即 (VarA^2*([VarA]+(VarA^2 *([VarA]+[VarB])/2))/2) AS EQ2

如果我没有正确提及某些内容，我会提前道歉，因为我是相对较新的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:13:50.170

尝试将计算列添加到表中，并将这些表达式用于 EQ1 和 EQ2

[http://msdn.microsoft.com/en-us/library/ff945943.aspx](http://msdn.microsoft.com/en-us/library/ff945943.aspx)

# android - CyanogenMod 是否支持 USB 主机 API？

> ID：11198042
> 
> 赞同：0
> 
> 时间：2012-06-25T21:30:26.887
> 
> 标签：android, usb, cyanogenmod

CyanogenMod 是否支持 Android 的[USB Host API](http://developer.android.com/guide/topics/connectivity/usb/host.html)？

我指的是程序员的主机 API，而不仅仅是 USB 主机模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:37:05.237

这将取决于内核，官方 USB 主机 api 将由最新的内核版本 3 管理，一些手机确实将它们作为库存 (SGSIII)，USB api 有非官方的反向端口来适应 Ice Cream Sandwich 的运行在较旧的平台上，尤其是 ARMv6。

引用 Android 的[开发者](http://developer.android.com/guide/topics/connectivity/usb/host.html)网站：

> Android 3.1 及更高版本支持 USB 主机模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:16:43.577

很明显，这将取决于所讨论的 cyanogenmod 的特定版本。

人们通常会认为，虽然 cyanogenmod 版本将具有它所基于的 AOSP 版本的所有功能（然后是一些功能），但取决于特定设备上所需的电气功能和内核驱动程序源的可用性。

# facebook-graph-api - 页面访问令牌过期与官方文档不匹配

> ID：11198044
> 
> 赞同：3
> 
> 时间：2012-06-25T22:04:20.693
> 
> 标签：facebook-graph-api, migration, facebook-access-token

我发现 Facebook 声明的关于页面访问令牌过期时间的政策与通过我的应用程序获得的令牌的过期时间之间存在不一致。

根据[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)关于 7 月 5 日生效的新访问令牌政策：

> “当用户授予应用程序 manage_pages 权限时，应用程序能够通过查询 [User ID]/accounts Graph API 端点来获取用户管理的页面的页面访问令牌。启用迁移后，当使用短期用户访问令牌来查询此端点，获得的页面访问令牌也是短暂的。
> 
> 使用端点和前面解释的步骤将短期用户访问令牌交换为长期访问令牌。**通过使用长期用户访问令牌，查询 [User ID]/accounts 端点现在将为用户管理的页面提供不会过期的页面访问令牌。**"

在我的身份验证流程中，我检索了一个 2 个月的令牌以及`manage_pages`权限（启用了迁移）。然后，我使用此令牌通过`[User ID]/accounts`端点请求页面访问令牌。[根据https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)，我取回的页面访问令牌将在 2 个月后过期。Facebook 的政策（上图）似乎声明这些令牌永远不会过期。

有人可以帮助解释发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:45:00.337

社区似乎同意这是一个错误。查看 Facebook 错误页面：http: [//developers.facebook.com/bugs/461517520524921](http://developers.facebook.com/bugs/461517520524921)

# html - 高级 CSS 导航悬停

> ID：11198045
> 
> 赞同：0
> 
> 时间：2012-06-25T22:04:27.917
> 
> 标签：html, css

请参阅此处了解我的问题：http: [//jsfiddle.net/FvBqA/126/](http://jsfiddle.net/FvBqA/126/)

我的问题是我希望能够悬停在锚点和 li 上并在有意义的情况下实现一种悬停状态。

目前，如果您将鼠标悬停在蓝色部分上，则蓝色仅可见（这是 li ），并且如果您将鼠标悬停在锚上，则会出现 li 和锚悬停 - 请注意这是正确的，但是我只希望用户在此悬停状态悬停在锚上。

如果用户将鼠标悬停在列表项上，则不会出现任何内容。

**HTML**

```
<ul id="nav">
    <li>
        <a href="#">Home</a>
    </li>  
    <li>
        <a href="#">Services</a>
    </li>  
    <li>
        <a href="#">Contact</a>
    </li>        
</ul> 
```

**CSS**

```
#nav li {
    float: left;
    padding: 0 0 0 13px;
}
#nav li a {
    display: block;
    height: 51px;
    text-align: center;
    color: #494949;
    font-size: 13px;
    padding: 35px 15px 0;
    border: 1px solid transparent;
    text-decoration: none;                
}
    #nav li:hover {
        background: blue;    
}
#nav li:hover a {
    background: red;
    border: 1px solid #2596c0;
    color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:19:28.410

根据您在悬停时想要蓝色和红色的理解`li`（无论悬停在 上`a`），然后只需在`:hover`上指定伪类`li`并使用后代选择器来定位`a`元素：

```
#nav li:hover a {
    background: red;
    border: 1px solid #2596c0;
    color: #fff;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FvBqA/367/)。

# c# - 将指向成员的 C++ 指针转换为 C#

> ID：11198050
> 
> 赞同：2
> 
> 时间：2012-06-25T22:05:20.253
> 
> 标签：c#, c++, struct, pointer-to-member

我一直在研究如何成功地将 C++ 指向成员的指针转换为 C#，但我还没有发现任何有用的东西。假设我有这个功能。

```
typedef int STRUCT::*DEFINED;

protected static Method(STRUCT* sampleStruct, DEFINED pMember)
    {
        return (sampleStruct->*pMember);
    } 
```

我通过研究了解到 ->* 是指向成员的指针。在这种情况下，我们在一个名为 STRUCT 的结构中发送一个成员变量的指针。由于 Method 不确定哪个成员作为参数发送，它通过指向成员的指针 sampleStruct->*pMember 访问它。

我认为Reflection可以帮助将此代码转换为C#，或者可能是Delegates，但我真的不知道如何实现它，我还没有在网上找到任何类似的例子。任何帮助将不胜感激。

谢谢，YT

**更新**

这就是我在 C# 中实现它的方式。

我没有创建结构，而是创建了一个枚举和一个类来表示 C++ 结构，如下所示：

C++ 结构

```
public struct ServerStats
{
    int serverStat1;
    int serverStat2;
    int serverStat3;
    int serverStat4;
    int serverStat5;
} 
```

现在，在 C# 中：

```
public enum ServerStatsEnum
{
    serverStat1,
    serverStat2,
    serverStat3,
    serverStat4,
    serverStat5,
}

public class ServerStats
{
    public int[] serverStatsArray;      

    public ServerStats()
    {
        int numElementsInEnum = Enum.GetNames(typeof(ServerStatsEnum)).Length;
        serverStatsArray = new int[numElementsInEnum];
    }
} 
```

}

现在，我可以通过调用特定的枚举来访问数组的元素，如下所示：

```
public static void Operation(ServerStats server1, ServerStats server2, ServerStatsEnum index)
    {
        Console.WriteLine("serverStatsArray[{0}] in server1 is {1}", index, server1.serverStatsArray[(int)index]);
        Console.WriteLine("serverStatsArray[{0}] in server2 is {1}", index, server2.serverStatsArray[(int)index]);          
    } 
```

它的代码更多，但它在 C# 中本机工作，并且比其他解决方案更有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:53:17.500

您可以使用委托来模拟指向成员的访问。

```
class C
{
    public int Method1() { return 1; }
    public int Method2() { return 2; }
}

class Program
{
    static void Main(string[] args)
    {
        C myC = new C();
        Func<C, int> ptrToMember1 = (C c) => { return c.Method1(); };
        int i = Method(myC, ptrToMember1 );
    }

    static int Method(C c, Func<C, int> method)
    {
        return method(c);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:35:29.170

从实现的角度来看，反射可以做一些非常相似的事情：

```
protected static int Method(MyType obj, PropertyInfo member)
{
    return member.GetValue(obj, null);
} 
```

最大的区别在于调用方。而 C++ 可以在编译时创建成员指针，您需要等到运行时才能获取 PropertyInfo 实例，并且您需要将成员名称作为字符串传入才能获取。

jyoung 对代表提出的建议可能会奏效：

```
class Foo
{
    private int m_val;
    public Func<int> GetValGetter()
    {
        return () => { return m_val; };
    }
} 
```

但这有点令人费解且不习惯，如果您从更高的层次来看，可能有一种更清洁的方法来解决它。

# android - TabHost 中的多个活动

> ID：11198052
> 
> 赞同：0
> 
> 时间：2012-06-25T22:05:36.243
> 
> 标签：android

此代码适用于在我的 main.xml 中显示单独的 xml 项。但是有没有办法在每个选项卡中运行一个活动？最好不要扩展`TabActivity`，因为它已被弃用。还是我应该使用完全不同的方法？

谢谢

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TabHost tabs = (TabHost)findViewById(R.id.TabHost01);

    tabs.setup();

    TabHost.TabSpec spec1 = tabs.newTabSpec("tag1");

    spec1.setContent(R.id.AnalogClock01);
    spec1.setIndicator("Analog Clock");

    tabs.addTab(spec1);

    TabHost.TabSpec spec2 = tabs.newTabSpec("tag2");
    spec2.setContent(R.id.DigitalClock01);
    spec2.setIndicator("Digital Clock");

    tabs.addTab(spec2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:08:11.667

是的，你应该使用[`Fragment`](http://developer.android.com/guide/components/fragments.html)s。[`FragmentTabs.java`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/example/android/apis/app/FragmentTabs.java)API Demos[`Fragment`](http://developer.android.com/guide/components/fragments.html)中有一些示例代码演示了该方法（称为回到Android 1.6。

# android - getLine1Number() 使用双 SIM 卡手机返回什么？

> ID：11198055
> 
> 赞同：9
> 
> 时间：2012-06-25T22:05:50.567
> 
> 标签：android

双卡手机`getLine1Number()`的退货方式是怎样的？`TelephonyManager`[`LG Optimus Net Dual`](http://www.gsmarena.com/lg_optimus_net_dual-4309.php)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T02:45:47.767

你只会得到一个号码......也许吧！

首先，您返回的数字取决于设备。

但同样重要的是，您是否会得到一个号码，以及这个号码是否会成为电话号码，完全无法预测。这取决于 SIM 和运营商。

在我的一个应用程序中，我开始尝试使用电话号码作为唯一 ID，因为我可以预期用户很容易回忆起这个号码。对于亚洲、澳大利亚和欧洲的大多数运营商来说，电话号码 (line1number()) 根本不存储在 SIM 卡上！对于其他人，您可能会得到一串零。或者以一种在本地可能有意义但可能会弄乱您的应用程序逻辑的方式格式化的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:54:18.577

Android 不支持双卡设备。请参阅：[检测双 SIM 卡 Android 手机中两张 SIM 卡的状态](https://stackoverflow.com/questions/7996197/detect-the-status-of-two-sim-cards-in-a-dual-sim-android-phone)

正如其他人所说，您可能会得到设备制造商的支持。

此外，不保证 getLine1Number() 返回电话号码。它只是返回运营商存储在卡中的内容，有些运营商不会费心填写该数字。因此，对于一些 sim 卡，这只会返回 null。

如果您提供您想要实现的目标的详细信息，我们可能会提供更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:02:33.490

默认 SDK 不支持处理双 SIM 手机。该函数将只返回一个数字，很可能来自第一张活动的 SIM 卡。

但是，制造商有时会提供用于处理这些事情的 SDK，您可能想看看这个。

# c# - 为什么 Linq-to-sql 错误地删除了我的联合中的字段？

> ID：11198056
> 
> 赞同：9
> 
> 时间：2012-06-25T22:05:54.310
> 
> 标签：c#, linq-to-sql, .net-3.5

我正在尝试将多个查询聚合在一起，以便使用通用数据结构为我的用户提供最新的更新显示以提供联合支持。在我的第一个函数中，我有以下选择子句：

```
.Select(x => new PlayerUpdateInfo
{
    FirstName = x.PodOptimizedSearch.FirstName,
    LastName = x.PodOptimizedSearch.LastName,
    RecruitId = x.RecruitId,
    Date = x.Date,
    UpdateMessage = x.IsAddedAction
      ? "Player was added to this recruiting board by " + x.Person.FirstName
        + " " + x.Person.LastName
      : "Player was removed from this recruiting board by " + 
        x.Person.FirstName + " " + x.Person.LastName,

    // Defaults for union support
    Team = string.Empty,
    UpdateComments = x.Comments,
    TeamId = 0,
    State = string.Empty
}); 
```

当调用它时，它会正确生成一个返回 9 个字段的查询。第二种方法的选择是：

```
select new PlayerUpdateInfo
{
    FirstName = recruit.FirstName,
    LastName = recruit.LastName,
    RecruitId = recruit.RecruitId,
    Date = asset.CreateDate,
    UpdateMessage = "New Full Game Added",

    // Defaults for union support
    Team = null,
    UpdateComments = null,
    TeamId = 0,
    State = null
    }; 
```

当此查询自行运行时，它会正确返回 9 个值。但是，当我尝试做

```
var query = GetFirstQuery();
query = query.union(GetSecondQuery()); 
```

我得到一个查询失败的 sql 异常，因为所有查询都没有相同数量的字段。调查生成的 SQL 表明第一个查询是正确的，但 Linq 正在生成第二个（联合）查询，只有 7 个字段。经过测试，Linq 似乎正在“优化”空值，因此它只返回一个空列而不是 3，从而导致不匹配。

为什么 Linq-to-sql 错误地生成联合，我该如何解决这个问题？

* * *

**编辑：**

好的，这个问题似乎与.Net 3.5 的 Linq-to-Sql 中的联合链接有关。这显然不会发生在 4 中。使用以下代码：

```
 protected IQueryable<PlayerUpdateInfo> Test1()
    {
        return PodDataContext.Assets
                             .Select(x => new PlayerUpdateInfo
                             {
                                 Date = DateTime.Now,
                                 FirstName = x.Title,
                                 LastName = string.Empty,
                                 RecruitId = 0,
                                 State = string.Empty,
                                 Team = string.Empty,
                                 TeamId = 0,
                                 UpdateComments = string.Empty,
                                 UpdateMessage = string.Empty
                             });
    }

    protected IQueryable<PlayerUpdateInfo> Test2()
    {
        return PodDataContext.SportPositions
                             .Select(x => new PlayerUpdateInfo
                             {
                                 Date = DateTime.Now,
                                 FirstName = string.Empty,
                                 LastName = x.Abbreviation,
                                 RecruitId = 0,
                                 State = string.Empty,
                                 Team = string.Empty,
                                 TeamId = 0,
                                 UpdateComments = string.Empty,
                                 UpdateMessage = string.Empty
                             });
    } 
```

然后我通过以下方式联合链： `var q2 = Test1().Union(Test2()).Union(Test1());`

在 .Net 3.5 中，我得到以下 sql，它不匹配并且失败

```
SELECT [t4].[value] AS [RecruitId], [t4].[Title] AS [FirstName], [t4].[value2] AS [LastName], [t4].[value22] AS [Team], [t4].[value3] AS [Date]
FROM (
    SELECT [t2].[value], [t2].[Title], [t2].[value2], [t2].[value2] AS [value22], [t2].[value3]
    FROM (
        SELECT @p0 AS [value], [t0].[Title], @p1 AS [value2], @p2 AS [value3]
        FROM [dbo].[Assets] AS [t0]
        UNION
        SELECT @p3 AS [value], @p4 AS [value2], [t1].[Abbreviation], @p5 AS [value3]
        FROM [dbo].[SportPositions] AS [t1]
        ) AS [t2]
    UNION
    SELECT @p6 AS [value], [t3].[Title], @p7 AS [value2], @p8 AS [value3]
    FROM [dbo].[Assets] AS [t3]
    ) AS [t4] 
```

在 .net 4 中生成以下代码：

```
SELECT [t4].[value] AS [RecruitId], [t4].[Title] AS [FirstName], [t4].[value2] AS [LastName], [t4].[value3] AS [Team], [t4].[value4] AS [TeamId], [t4].[value5] AS [State], [t4].[value6] AS [UpdateMessage], [t4].[value7] AS [UpdateComments], [t4].[value8] AS [Date]
FROM (
    SELECT [t2].[value], [t2].[Title], [t2].[value2], [t2].[value3], [t2].[value4], [t2].[value5], [t2].[value6], [t2].[value7], [t2].[value8]
    FROM (
        SELECT @p0 AS [value], [t0].[Title], @p1 AS [value2], @p2 AS [value3], @p3 AS [value4], @p4 AS [value5], @p5 AS [value6], @p6 AS [value7], @p7 AS [value8]
        FROM [dbo].[Assets] AS [t0]
        UNION
        SELECT @p8 AS [value], @p9 AS [value2], [t1].[Abbreviation], @p10 AS [value3], @p11 AS [value4], @p12 AS [value5], @p13 AS [value6], @p14 AS [value7], @p15 AS [value8]
        FROM [dbo].[SportPositions] AS [t1]
        ) AS [t2]
    UNION
    SELECT @p16 AS [value], [t3].[Title], @p17 AS [value2], @p18 AS [value3], @p19 AS [value4], @p20 AS [value5], @p21 AS [value6], @p22 AS [value7], @p23 AS [value8]
    FROM [dbo].[Assets] AS [t3]
    ) AS [t4] 
```

那是有效的sql并且有效。由于各种原因，我们无法将生产系统升级到 .net 4，有没有人知道我可以在 .net 3.5 中解决这个问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:44:01.123

This is an updated answer - it would seem that in 3.5 the optimization cannot be switched off. I've tried numerous things in LinqPad, and as soon as there's a C# expression that's not derived from a column, the query compiler takes it out of the SQL.

So we need something that'll be derived from a column expression but which we can force always to be `null`.

Here's one solution I've been able to get to work - write a conditional expression that returns `null` when a column value is equal to itself; thus always returning `null`. It's not going to be pretty, because Linq to Sql in 3.5 appears to be *very* aggressive in optimizing a query (we have to use unique comparisons for each `null` we want, e.g. use `==` in one, then `!=` on the next and so on); and it'll get uglier when we modify it to deal with nulls if you have to do this hack on a nullable column:

I'm just picking out column names that I can see from your code - but you might want to use different ones:

```
select new PlayerUpdateInfo  
{  
  FirstName = recruit.FirstName,  
  LastName = recruit.LastName,  
  RecruitId = recruit.RecruitId,  
  Date = asset.CreateDate,  
  UpdateMessage = "New Full Game Added",  

  // Defaults for union support  
  Team = recruit.FirstName = recruit.FirstName ? null : "",  
  UpdateComments = recruit.FirstName != recruit.FirstName ? "" : null,  
  TeamId = recruit.LastName = recruit.LastName ? null : "",  
  State = recruit.LastName != recruit.LastName ? "" : null
}; 
```

In LinqPad I get a column expression in the generated SQL for each of the statements where I use a `? :`. The `""` on the other side of the expression is because SQL moans about `CASE` statements having more than one null.

Clearly - this solution, apart from being ugly as sin, is bounded by how many columns are available for you to do these fake comparisons on, and indeed how many unique comparisons are mapped by L2S.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:55:22.847

1.  Team、UpdateComments、State 为空字符串或空值。所以你应该为这两种情况给出相同的值。
2.  如果您使用默认比较器，则 UpdateMessage 不同，因此对象也不同。所以你可以连接而不是联合。

# php - 受影响的行（）如何工作？

> ID：11198059
> 
> 赞同：0
> 
> 时间：2012-06-25T22:06:02.407
> 
> 标签：php, codeigniter

```
public function create($tableName, $userInput) {

    $this->db->insert($tableName, $userInput);
    return $this->db->affected_rows();

} 
```

如您所见，`$this->db->affected_rows();`没有引用任何特定的资源/执行语句。

**受影响的行（）通常返回数据库中最新的受影响的行（）吗？换句话说，如果我有 50 个用户调用 create(...) 函数，codeigniter 如何将每个affected_rows() 与其执行的语句相关联？**

这个问题是特定于 codeigniter 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:28:32.110

`system/database/drivers/mysql/mysql_driver.php`在第 337 行的codeigniter中：

```
/**
 * Affected Rows
 *
 * @access  public
 * @return  integer
 */
function affected_rows()
{
    return @mysql_affected_rows($this->conn_id);
} 
```

[这基本上意味着 CodeIgniter 和标准 PHP 函数http://php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)没有区别

它返回受上一个查询影响的行数，所以如果你有问题并且它总是返回 1，这意味着 codeigniter 迭代你的查询，一个快速的解决方法是使用你自己的查询和 `$this- >db->查询（）；'

# android - 规划 Android 用户界面

> ID：11198060
> 
> 赞同：1
> 
> 时间：2012-06-25T22:06:17.787
> 
> 标签：android, user-interface

我刚刚开始使用 Android，我正在努力熟悉可用的视图。

我正在为平板电脑开发一个应用程序，理想情况下我会有一个“分屏”，左侧本质上是一个垂直的项目列表。从左侧窗格中选择一个项目时，右侧窗格将显示所选事物的详细信息。（我想这就像电子邮件应用程序 UI）。

我可以在 C# 或基于 Web 的系统中构建这个界面——你会从哪里开始在 Android 系统上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:31:39.400

我相信[这](http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html)正是您所需要的。

这样做的好处是，如果您切换到纵向模式，您将在单独的活动（或屏幕）上拥有每个“窗格”。

如果您需要在 3.0 之前实现它，请检查[兼容性库](http://developer.android.com/tools/extras/support-library.html)(v4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:09:50.203

A vertical list of items would be a `ListView` for which you could set an `onListItemSelected` listener. That listener would modify the contents of whatever you decide to put into the right side.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:12:35.177

我将从水平线性布局开始。

从那里，在左右两侧实现垂直线性布局、listLayouts 等。对于这些二级分层布局，将它们的宽度设为 50% 的权重，以便每一面占据屏幕的一半！

一个关于根据权重设置线性布局以及如何设置的链接！

[Android中的线性布局和权重](https://stackoverflow.com/questions/2698817/linear-layout-and-weight-in-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T22:14:23.793

您应该查看使用[Fragments](http://developer.android.com/guide/components/fragments.html)，但就熟悉可用视图而言，请查看 Android Design Site，特别是[Building Blocks](http://developer.android.com/design/building-blocks/index.html)部分。它向您展示了一系列不同的 UI 模式，您可以从包含的视图中构建这些模式。

# css - 为什么人们在 css 文件中使用 div.border 而不是 .border？

> ID：11198062
> 
> 赞同：0
> 
> 时间：2012-06-25T22:06:27.887
> 
> 标签：css

我想知道为什么某些 css 文件使用 div.border 而不是 .border 来列出 CSS 中的扇区。我已经看到它用于多个部门，`div.footer {color:#000000;}`而不仅仅是`.footer {color:#000000;}`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:18:30.907

您可能要指定元素的原因有 3 个：

1.  您正在将该类应用于多种类型的元素，并且需要添加或覆盖特定元素的规则。

2.  您希望在样式表中提供上下文信息（通常用于其他开发人员）

3.  您需要额外的特异性来覆盖另一个类的样式规则。

一般来说，我认为＃1是一个坏主意，除了一些实用程序类（如浮动或清除），我认为使用像 Saas 这样的预处理器和 mixins 可以更好地处理这种事情

我认为第二种情况的价值值得怀疑。如果遇到第三种情况（很像 sprinkling in `!important`），您可能需要重构一些东西以避免不得不这样做。无论如何请注意，如果不需要它们，将元素添加到选择器只会减慢匹配速度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:11:09.350

点前出现“div”意味着选择器仅适用于 div 类型的 DOM 元素。

因此，例如，如果您有一个名为“foo”的类，

```
.foo {
    color:#ff0000;
} 
```

它会使里面的文字变成红色。使用 div.foo 将导致指令仅适用于该类的 div。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T22:13:30.423

`<div class="border">Div with border</div>`考虑和之间的区别`<p class="border">Paragraph with border</p>`。的样式`.border { ... }`会影响这两者，而`div.border{ ... }`只会影响 div。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T22:15:54.043

如果您希望编写的 .border 类规则仅适用于 div 容器，而不是表容器或其他元素，那么您就是这样做的。有很多关于 CSS 选择器的好文章，[这](http://css.maxdesign.com.au/selectutorial/selectors_class.htm)只是一篇。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T22:24:55.967

如前所述，将 div 元素添加到 footer 类将确保样式仅应用于具有类“footer”的 div，而不应用于具有类“footer”的其他元素。

理想情况下，如果您确定您只会在一个特定的 DOM 元素上使用该类，那么您将只使用 .footer。在类前面添加 DOM 元素不是必需的，并且会对渲染性能产生负面影响（好吧，实际上它没有太大影响，但仍然效率低下）。

# java - 如何在任何调用时间以特定顺序从列表中逐一运行数学动作/函数

> ID：11198066
> 
> 赞同：-1
> 
> 时间：2012-06-25T22:06:40.040
> 
> 标签：java

我正在尝试在 java 中构建一个算法，它看起来像这样：

```
while (true) {
    Point p; //a point given in the class constuctor.
    p.x+=1*factor;
    checkColor(p); // a function that returns true or false for a pixel color.
    p.y+=1*factor;
    checkColor(p);
    p.x-=2*factor;
    checkColor(p);
    p.y-=*factor;
    ... ...
} 
```

这将使用一个 int 因子；这将增加循环中的每个周期，但我的观点是，当我调用 aa 函数时，是否有办法存储将一次执行 1 行的“操作行”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:22:11.067

做这样的事情怎么样：

```
private processSequence = 0;
public void modifyPoint(Point p, int factor) {
  // do the stuff you need to do with x and y
  switch (processSequence) {
     case 0: p.x+= factor; break;
     case 1: p.y+=factor; break;
     ... etc
  }
  processSequence++;
  processSequence = processSequence % 4; 
}

...
while (true) {
  modifyPoint(p,factor);
  checkColor(p);
} 
```

你真正想做的事情并不容易从它本身的问题中理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:24:24.887

一个 SWAG，因为我仍然不知道您要做什么，但也许像......

```
 Point p = new Point(/* something? */);
  for (int i = -1; i <= 1; i++) {
     for (int j = -1; j <= 1; j++) {
        if (i != 0 || j != 0) {
           Point p2 = new Point(p.x + i * factor, p.y + i * factor);
           checkColor(p2);
        }
     }
  } 
```

# ruby-on-rails - Ruby on Rails: Sending javascript data to ruby controller

> ID：11198073
> 
> 赞同：1
> 
> 时间：2012-06-25T22:07:17.567
> 
> 标签：ruby-on-rails, ajax

I would like to send a javascript array to be processed by a method in my controller. I think I am doing this way wrong. I am a total RoR, jquery, and ajax noobie. Here is what I have. Please give me some guidelines:

```
<div id="dataTable" class="dataTable" style="width: 680px;height: 300px; overflow: scroll"></div>
<button>Save!</button>
<script>
    var first = true;
    var totalChanges = new Array();
    $("#dataTable").handsontable({
         //...some code that generates appropriate array totalChanges
    });
    var data = //..some code
    $("#dataTable").handsontable("loadData", data);
    $(function() {
            $( "button").button();
            $( "button" ).click(function() { 
                    alert("clicked"); 
                    $.ajax({
                            type: "POST",
                            url: "save",
                            data: JSON.stringify(totalChanges),
                            success: function() { alert("Success!"); }
                    });
            });
    });

</script> 
```

I get this error:

```
POST http://10.10.136.244:6500/qtl_table/save 500 (Internal Server Error) 
```

and

```
Started POST "/qtl_table/save" for 10.64.229.59 at Mon Jun 25 16:58:46 -0500 2012
  Processing by QtlTableController#save as 
  Parameters: {"125,0,\"\",\"Ph upt 1-2\""=>{","=>{"125,1,\"\",\"DOR364\""=>{","=>{"125,2,\"\",\"G19833\""=>nil}}}}}
LOGGER WORKS
Completed 500 Internal Server Error in 81ms

ActionView::MissingTemplate (Missing template qtl_table/save with {:formats=>[:html], :handlers=>[:rjs, :rhtml, :erb, :rxml, :builder], :locale=>[:en, :en]} in view paths "/usr/home/benjamin/phavubase/qtl/app/views", "/usr/home/benjamin/phavubase/qtl/ruby/1.8/gems/declarative_authorization-0.5.5/app/views", "/usr/home/benjamin/phavubase/qtl/ruby/1.8/gems/devise_cas_authenticatable-1.1.1/app/views", "/usr/home/benjamin/phavubase/qtl/ruby/1.8/gems/devise-1.2.1/app/views", "/usr/home/benjamin/phavubase/qtl/ruby/1.8/gems/kaminari-0.12.4/app/views"):
  app/controllers/qtl_table_controller.rb:18:in `data'
  app/controllers/qtl_table_controller.rb:25:in `save'

Rendered ruby/1.8/gems/actionpack-3.0.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.8ms) 
```

EDIT: app/controllers/qtl_table_controller.rb

```
...
  def save
    logger.debug "\nLOOK! WE SAVED! #{params[data]}\n"
    render "index"
  end
... 
```

I added render :layout => false but I am still getting the missing template error. Also, someone suggested I just begin adding logic to my controller but the data parameter looks really funky. Its supposed to be an array of arrays that I turned into a string. Could you guys give me some more help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:27:35.167

同意里亚切的回答。您需要向控制器添加一些逻辑才能正确响应。

查看控制台输出，您可以在参数哈希中看到 json 数据。您可以像这样简单地访问控制器中的值：

```
params["125,0,\"\",\"Ph upt 1-2\""]
params["125,0,\"\",\"Ph upt 1-2\""][","] 
```

您可以将其映射到您的 activerecord 模型并保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:22:54.287

您应该在控制器中创建模板`app/views/qtl_table/save.html.erb`或渲染某些内容。如果在控制器操作中没有呈现任何内容，Rails 会尝试显示默认模板，而您没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:36:31.147

由于您希望它在 AJAX 中响应，您可以通过添加来告诉 Rails 不要渲染任何内容

```
render :layout => false 
```

到控制器动作

# xml - Build XML literal containing Anti-XML object

> ID：11198074
> 
> 赞同：2
> 
> 时间：2012-06-25T22:07:27.917
> 
> 标签：xml, scala, xml-literals, anti-xml

Suppose I have an Anti-XML object, e.g.:

```
import com.codecommit.antixml._
val child = <child attr="val">...</child>.convert 
```

I want to construct an XML object that contains `child` as a child:

```
<parent foo="bar"><foo/><child attr="val">...</child><foo/></parent> 
```

The obvious way would be

```
val parent : Elem = <parent foo="bar"><foo/>{ child }<foo/></parent>.convert 
```

The problem is that Scala's XML literals don't recognize Anti-XML's objects, so `child` gets converted to a string, and embedded in `parent` as a text node:

```
<parent foo="bar"><foo/>&lt;child attr="val"&gt;...&lt;/child&gt;<foo/></parent> 
```

How can I work around this issue?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:22:35.230

`XML.loadString`应该做的伎俩：

```
val child: com.codecommit.antixml.Elem = <child />.convert
val parent: scala.xml.Elem = <parent>{scala.xml.XML.loadString(child.toString)}</parent> 
```

`Zipper`对于更复杂的深度操作场景，我认为避免使用文字和使用内置支持会做得更好。

# php - 用 PHP 计算工作日 - 在 12 日是星期一的月份内不起作用

> ID：11198082
> 
> 赞同：1
> 
> 时间：2012-06-25T22:08:16.183
> 
> 标签：php, date

我有一个最奇怪的问题。我有一个脚本可以计算一个月中的当前工作日以及该月的工作日总数。例如，今天 6 月 25 日，脚本将输出“day 17/21”。

奇怪的是，对于 12 日为星期一的月份，从 12 日到月底，当前工作日显示为比实际工作日少 0.0417 天。例如，对于 3 月 11 日（星期日），它显示“7/22”。但是对于 3 月 12 日，它显示“7.95833333/22”

下面是我在互联网某处的帖子中找到的脚本代码。除了这个奇怪的场合，每隔一段时间它都能完美运行。

```
//##########################################################
//Date Calculations
//##########################################################

    $datepicker = $_POST['datepicker'];
    $dpyear = date("Y", strtotime($datepicker));
    $dpmonth = date("m", strtotime($datepicker));
    $dpday = date("d", strtotime($datepicker));

        $end = date('Y/m/d', mktime(0, 0, 0, $dpmonth, $dpday, $dpyear));       // seconds * minutes * hours * days
        $first = date('Y/m/d', mktime(0, 0, 0, $dpmonth, 1, $dpyear));
        $firstOfYear = date('Y/m/d', mktime(0, 0, 0, 1, 1, $dpyear));
        $last = date('Y/m/d', mktime(0, 0, 0, $dpmonth + 1, 0, $dpyear));
        $firstprevyear = date('Y/m/d', mktime(0, 0, 0, $dpmonth, 1, $dpyear-1));
        $lastprevyear = date('Y/m/d', mktime(0, 0, 0, $dpmonth + 1, 0, $dpyear-1));
        $prevyearmonth = date('M\'y', mktime(0, 0, 0, $dpmonth + 1, 0, $dpyear-1));

        $prevyeardate = "sojd.InvoiceDate >= '$firstprevyear' and sojd.InvoiceDate <= '$lastprevyear' ";
        $mtddaterange = "sojd.InvoiceDate >= '$first' and sojd.InvoiceDate <= '$end' ";
        $ytddaterange = "sojd.InvoiceDate >= '$firstOfYear' and sojd.InvoiceDate <= '$end' ";

        if (date("w", strtotime($datepicker)) == 1) {       // if today is Monday, combine weekend and Monday's numbers
            $startDate = date('Y/m/d', mktime(0, 0, 0, $dpmonth, $dpday - 2, $dpyear));
            $prevdaterange = "sojd.InvoiceDate >= '$startDate' and sojd.InvoiceDate <= '$end'";
            $daterange = "sojd.InvoiceDate >= '$startDate' and sojd.InvoiceDate <= '$end'";
            $params = array($startDate, $end);
        } else {
            $prevdaterange = "sojd.InvoiceDate = '$end' ";
            $daterange = "sojd.InvoiceDate = '$end'";
            $params = array($end);
        }

    $holidays=array("2012-01-02","2012-05-28","2012-07-04","2012-09-03","2012-11-22","2012-12-25");

function getWorkingDays($startDate,$endDate,$holidays){
    // do strtotime calculations just once
    $endDate = strtotime($endDate);
    $startDate = strtotime($startDate);

    //The total number of days between the two dates. We compute the no. of seconds and divide it to 60*60*24
    //We add one to inlude both dates in the interval.
    $days = ($endDate - $startDate) / 86400 + 1;

    $no_full_weeks = floor($days / 7);
    $no_remaining_days = fmod($days, 7);

    //It will return 1 if it's Monday,.. ,7 for Sunday
    $the_first_day_of_week = date("N", $startDate);
    $the_last_day_of_week = date("N", $endDate);

    //---->The two can be equal in leap years when february has 29 days, the equal sign is added here
    //In the first case the whole interval is within a week, in the second case the interval falls in two weeks.
    if ($the_first_day_of_week <= $the_last_day_of_week) {
        if ($the_first_day_of_week <= 6 && 6 <= $the_last_day_of_week) $no_remaining_days--;
        if ($the_first_day_of_week <= 7 && 7 <= $the_last_day_of_week) $no_remaining_days--;
    }
    else {
        // (edit by Tokes to fix an edge case where the start day was a Sunday
        // and the end day was NOT a Saturday)

        // the day of the week for start is later than the day of the week for end
        if ($the_first_day_of_week == 7) {
            // if the start date is a Sunday, then we definitely subtract 1 day
            $no_remaining_days--;

            if ($the_last_day_of_week == 6) {
                // if the end date is a Saturday, then we subtract another day
                $no_remaining_days--;
            }
        }
        else {
            // the start date was a Saturday (or earlier), and the end date was (Mon..Fri)
            // so we skip an entire weekend and subtract 2 days
            $no_remaining_days -= 2;
        }
    }

    //The no. of business days is: (number of weeks between the two dates) * (5 working days) + the remainder
//---->february in none leap years gave a remainder of 0 but still calculated weekends between first and last day, this is one way to fix it
   $workingDays = $no_full_weeks * 5;
    if ($no_remaining_days > 0 )
    {
      $workingDays += $no_remaining_days;
    }

    //We subtract the holidays
    foreach($holidays as $holiday){
        $time_stamp=strtotime($holiday);
        //If the holiday doesn't fall in weekend
        if ($startDate <= $time_stamp && $time_stamp <= $endDate && date("N",$time_stamp) != 6 && date("N",$time_stamp) != 7)
            $workingDays--;
    }

    return $workingDays;
}
    $currSalesDay = getWorkingDays($first,$end,$holidays);
    $totalSalesDay = round(getWorkingDays($first,$last,$holidays),0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T22:12:14.590

如果你在做事`/ 86400`，你会遇到闰秒问题。[http://en.wikipedia.org/wiki/Leap_second](http://en.wikipedia.org/wiki/Leap_second)

最好使用类似`strtotime('+1 day', $timestamp)`或 DateTime 类的东西来逐日移动或比较日期。

至少，如果您要处理全天增量，只需将结果四舍五入即可。

# python - PyPNG to draw a simple filled box

> ID：11198084
> 
> 赞同：6
> 
> 时间：2012-06-25T22:08:32.223
> 
> 标签：python, image, png, rgba

I am trying to draw a simple 256x256 pixel RGBA square using python's png module.

I'd like to use the png.Writer function and I imagine I'd have to draw it out using the write() method. I have not had any luck however! I don't have faith in my current code so I'm willing to take suggestions from scratch

I prefer not to use the PIL if possible.

Any suggestions?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T22:46:51.113

I think the format is what may be affecting you, it seems that `png` has three formats ...

```
>>> help(png)
    Boxed row flat pixel::

     list([R,G,B, R,G,B, R,G,B],
       [R,G,B, R,G,B, R,G,B])

    Flat row flat pixel::    

      [R,G,B, R,G,B, R,G,B,
       R,G,B, R,G,B, R,G,B]

    Boxed row boxed pixel::

      list([ (R,G,B), (R,G,B), (R,G,B) ],
           [ (R,G,B), (R,G,B), (R,G,B) ]) 
```

The alpha being appended to the end of each RGB sequence.

```
 write(self, outfile, rows)
 |      Write a PNG image to the output file.  `rows` should be
 |      an iterable that yields each row in boxed row flat pixel format.
 |      The rows should be the rows of the original image, so there
 |      should be ``self.height`` rows of ``self.width * self.planes`` values.
 |      If `interlace` is specified (when creating the instance), then
 |      an interlaced PNG file will be written.  Supply the rows in the
 |      normal image order; the interlacing is carried out internally. 
```

note the `each row in boxed row flat pixel format.`

heres a quick example that draws a white square.

```
>>> rows = [[255 for element in xrange(4) for number_of_pixles in xrange(256)] for number_of_rows in xrange(256)]
>>> import numpy # Using numpy is much faster
>>> rows = numpy.zeros((256, 256 * 4), dtype = 'int')
>>> rows[:] = 255
>>> png_writer = png.Writer(width = 256, height = 256, alpha = 'RGBA')
>>> png_writer.write(open('white_panel.png', 'wb'), rows) 
```

note that `Writer` can also use the other 2 formats which maybe easier to use.

```
 |  write_array(self, outfile, pixels)
     |      Write an array in flat row flat pixel format as a PNG file on
     |      the output file.  See also :meth:`write` method.
     |  
     |  write_packed(self, outfile, rows)
     |      Write PNG file to `outfile`.  The pixel data comes from `rows`
     |      which should be in boxed row packed format.  Each row should be
     |      a sequence of packed bytes. 
```

Try to use `numpy` its much faster and easier when dealing with matrix operations, images can be represented as matrices.

good luck.

If you want to print colors then you would need to calculate the RGB values for that color, for example the color red is (255, 0, 0, 255).

```
import png
import numpy
rows = numpy.zeros((256, 256, 4), dtype = 'int') # eassier format to deal with each individual pixel
rows[:, :] = [255, 0, 0, 255] # Setting the color red for each pixel
rows[10:40, 10:40] = [0, 255, 255, 255] #  filled squared starting at (10,10) to (40,40)
locs = numpy.indices(rows.shape[0:2])
rows[(locs[0] - 80)**2 + (locs[1] - 80)**2 <= 20**2] = [255, 255, 0, 255] # yellow filled circle, with center at (80, 80) and radius 20
png_writer = png.Writer(width = 256, height = 256, alpha = 'RGBA') # create writer
png_writer.write(open('colors_panel.png', 'wb'), rows.reshape(rows.shape[0], rows.shape[1]*rows.shape[2])) # we have to reshape or flatten the most inner arrays so write can properly understand the format 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-16T10:49:50.023

这是一个创建全红色 png 文件的简单示例：

```
import png

width = 255
height = 255
img = []
for y in range(height):
    row = ()
    for x in range(width):
        row = row + (255, 0, 0, 255)
    img.append(row)
with open('red.png', 'wb') as f:
    w = png.Writer(width, height, greyscale=False, alpha='RGBA')
    w.write(f, img) 
```

# jquery - 阻止背景内容并专注于模态对话框

> ID：11198086
> 
> 赞同：12
> 
> 时间：2012-06-25T22:08:51.610
> 
> 标签：jquery

我试图用我的两个 jquery 模式对话框阻止背景，直到用户关闭窗口。关于如何实现这一目标的任何想法？

“阻止背景”是指禁用页面上的其他元素（即使其他元素无法点击）。

下面是我的代码：

```
 // sign up dialog
        $( "#aboutus_dialog" ).dialog({
            autoOpen: false,
            show: "fadein",
            hide: "fadeout"
        });

        // sign up dialog
        $( "#signup_dialog" ).dialog({
            autoOpen: false,
            show: "fadein",
            hide: "fadeout"
        });     

        // about us modal
        $('#aboutus').click(function() { 
            modal: true,
            $("#aboutus_dialog").dialog("open");
            return false;
        });

        // about us modal
        $('#signup').click(function() { 
            $("#signup_dialog").dialog("open");
            return false;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T22:17:57.273

这是你要找的吗

[http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)

它确实会阻止您拥有查看源按钮的背景。你有任何覆盖吗？

尝试手动设置（不推荐，而是通过 css）：

```
$(".ui-widget-overlay").attr('style','background-color: #000; opacity:1; z-index:1000;'); 
```

当然，将 modal 选项设置为 true。

如果颜色太浓，相应地降低不透明度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-16T08:08:54.310

当我将模态值更改为“true”（在角度 js 中）时，所有背景元素都被禁用。这是我的代码：

```
 var options = {
                    autoOpen : false,
                    modal : true,
                    close : function(event, ui) {
                        console.log("Predefined close");
                    }
                 };

    dialogService.open("myDialog" + k, "dialogTemplateload.html", model, options)
    .then(
            function(result) {
                console.log("Close");
                console.log(result);
            },
            function(error) {
                console.log("Cancelled");
            }
        ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T22:38:30.547

翻翻API中的对话框选项，有不少。除了`modal`在页面上设置一个覆盖以阻止鼠标事件之外，还有`closeOnEscape`一个如果设置为`false`不允许用户按键盘上的转义键来关闭对话框，因此必须直接与对话框控件交互

演示页面 [http://jqueryui.com/demos/dialog/的选项卡中有一个重要的 API](http://jqueryui.com/demos/dialog/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-04T22:50:51.200

尝试使用 Jquery 的主题滚轮创建您自己的主题。它还有助于 Jquery 的 UI 库中的模式和其他小部件的功能

[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

# iphone - Keep error count and get top ten with associated word?

> ID：11198088
> 
> 赞同：0
> 
> 时间：2012-06-25T22:08:57.853
> 
> 标签：iphone, objective-c, ipad

I have a few hundred words in arrays in a plist, somewhat like below:

```
PLIST:
Array 1:
  - words here
  -
  -
  -

Array 2:
  -
  -
  -
  -
  -

etc... 
```

Now I need to have a number associated with every word which increments so that I can then fetch the top 10 most failed words (top ten with highest count). This what I can't get my head around, how to keep a number associated with a word and then get the top ten most incorrect words.

I'd like to figure out a better method; I have my list of words, perhaps a number is needed, but I need to keep a record of the most common errors (I have a method which is called when an error is made, I just need to know how to store the error so I can retrieve the ten most incorrect words later).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:23:00.827

将单词存储在字典中。单词将是键，对象（值）是该单词出错的次数。然后，您可以枚举所有单词并通过访问该单词的字典值来访问该单词错误的次数。

# python - 使用 python 3 在终端中打印 unicode 字符

> ID：11198098
> 
> 赞同：4
> 
> 时间：2012-06-25T22:09:43.497
> 
> 标签：python, unicode, python-3.x, terminal

我目前正在为终端编写一个 2 人国际象棋游戏，我希望能够为棋子打印实际的 unicode 字符（例如，[http ://en.wikipedia.org/wiki/Rook_(chess )#Unicode](http://en.wikipedia.org/wiki/Rook_(chess)#Unicode) )。如何在 python 3 中打印实际的 unicode 表示而不是转义字符？终端的字符集是否需要更改（我主要使用 windows 和 linux），这可以通过程序本身的系统调用来完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:11:47.820

错误...打印它们...

```
3>> print('♔♕♖')
♔♕♖ 
```

`chcp 65001`Windows在运行脚本之前可能需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T22:12:26.357

Python 3 不需要任何额外的东西，只需使用`print()`.

```
>>> print('القاموس العربي')
القاموس العربي 
```

# javascript - multiple sortable lists using jqueryui - don't want items to mix between list groups

> ID：11198099
> 
> 赞同：1
> 
> 时间：2012-06-25T22:09:44.047
> 
> 标签：javascript, jquery, jquery-ui

I have two pairs of drag/drop/sortable lists using JqueryUI.http://jqueryui.com/demos/sortable/

My problem is that I can move items from sortable1, sortable2 into sortable3 and 4\. I want them to be debated. So items can only move between ( 1 and 2 ) and (3 and 4).

Do I have to assign a different class to sortable3 and sortable4 for this to happen? Is there anyway I can somehow combine the function?

```
$(function() {
        $( "ul.droptrue" ).sortable({
            connectWith: "ul"
        });

        $( "ul.dropfalse" ).sortable({
            connectWith: "ul",
            dropOnEmpty: false
        });

        $( "#sortable1, #sortable2" ).disableSelection();
        $( "#sortable3, #sortable4").disableSelection();

});

<ul id="sortable1" class='droptrue'>
    <li class="ui-state-default">Can be dropped..</li>
    <li class="ui-state-default">..on an empty list</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2" class='dropfalse'>
    <li class="ui-state-highlight">Cannot be dropped..</li>
    <li class="ui-state-highlight">..on an empty list</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
</ul>
<ul id="sortable3" class='droptrue'>
    <li class="ui-state-default">Can be dropped..</li>
    <li class="ui-state-default">..on an empty list</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable4" class='dropfalse'>
    <li class="ui-state-highlight">Cannot be dropped..</li>
    <li class="ui-state-highlight">..on an empty list</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:21:27.053

由于您的`droptrue`和`dropfalse`参数，以及您在每个列表上都有唯一 id 的事实，您不需要更改标记，您只需要`.sortable`稍微不同地调用函数：

```
 $( "#sortable1" ).sortable({
        connectWith: "#sortable2"
    });

    $( "#sortable2" ).sortable({
        connectWith: "#sortable1",
        dropOnEmpty: false
    });

    $( "#sortable3" ).sortable({
        connectWith: "#sortable4",
    });

    $( "#sortable4" ).sortable({
        connectWith: "#sortable3",
        dropOnEmpty: false
    }); 
```

或者，您可以使用对象来设置每个可排序项目的参数，并遍历对象，使用参数应用于`.sortable`每个：

```
var lists = [{"listid":"#sortable1", "connectid":"#sortable2", "drop":true},
 {"listid":"#sortable2", "connectid":"#sortable1", "drop":false},
 {"listid":"#sortable3", "connectid":"#sortable4", "drop":true},
 {"listid":"#sortable4", "connectid":"#sortable3", "drop":false}];

$.each(lists, function(i, list) {
    $(list.listid).sortable({
        connectWith: list.connectid,
        dropOnEmpty: list.drop
    });
}); 
```

**编辑：**
根据您的评论，这就是您可以绑定另一个列表（`#sortable5`，连接到`#sortable3`和`#sortable4`）的方式。 **请注意使用多个 id，以逗号分隔**：

```
var lists = [{"listid":"#sortable1", "connectid":"#sortable2", "drop":true},
 {"listid":"#sortable2", "connectid":"#sortable1", "drop":false},
 {"listid":"#sortable3", "connectid":"#sortable4, #sortable5", "drop":true},
 {"listid":"#sortable4", "connectid":"#sortable3, #sortable5", "drop":false},
 {"listid":"#sortable5", "connectid":"#sortable3, #sortable4", "drop":false}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T17:17:00.213

感谢大家发帖然后回答这个问题。我也遇到过类似的挑战，你的回答给了我解决它所需的灵感。我也有多个可排序列表，不想在排序组之间混合。在我的情况下，组的数量取决于数据，所以我不知道我会有多少。这是我想出的解决方案。

```
$(function() {    
  if ($.cookie("sortGroupsCnt")) {
      var grpcnt = Number($.cookie("sortGroupsCnt"));        
      for (i = 0; i < grpcnt; i++) { 
          var connectClass = ".s" + i;  
          $(connectClass).sortable({
              connectWith: connectClass,
              dropOnEmpty: true
          }).disableSelection(); 
      }
  }; 
```

});

在我的 PHP 逻辑中，在每个排序组中，我使用相同的类代码创建多个 UL。所以在第 1 组中，所有 UL 都有 class="s0"。在第 2 组中，所有 UL 都有 class="s1" 等。然后我创建一个名为“sortGroupCnt”的 cookie，它是创建的排序组的数量。

再次感谢大家。

# javascript - JQuery caching selectors - am I misunderstanding?

> ID：11198104
> 
> 赞同：1
> 
> 时间：2012-06-25T22:10:00.533
> 
> 标签：javascript, jquery, optimization

I'm working on some JQuery code and I have a question about caching selectors. I have a certain function that is called when scrolling (and thus needs to be fast). I tried caching the selectors used in the function during the initialization, like so:

```
var myElement = $('#myElement');

function onScroll()
{
    myElement.whatever();
} 
```

When I profile the code in firebug, I see that the JQuery selector function gets called exactly 5 times as often as the `onScroll` function (I use 5 different selectors in the function), and is responsible for the majority of execution time.

1) So what exactly is the benefit of caching this way? I'm not being sardonic :)

2) I understand that the selector needs to be re-run in case the DOM changes, but is there any way to cache a single selected object so that the function doesn't need to run each time, while staying within JQuery?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:15:42.733

1.  当您使用该变量时，`myElement`您使用的是一个 jQuery 对象，该对象包含对创建对象时找到的元素的引用。当您使用 jQuery 对象时，选择器不会重新运行以更新元素集。

2.  是的，你完全按照你所展示的那样做。

# android - Android AppWidget Lifecycle

> ID：11198106
> 
> 赞同：2
> 
> 时间：2012-06-25T22:10:02.573
> 
> 标签：android

I am finding during a reboot that the AppWidget onUpdate method is being called twice - on very clean basic code - with a correct manifest. My code is not an issue, this problem is definitely system related (hence I'm not posting any code).

Has this been resolved post 2.3.7 (my current development platform)?

How does one eliminate this programmatically? As my onUpdate often calls a service (to eliminate ANR on slow stuff) I am forced to resolve the issue with a pseudo-semaphore approach. Not ideal.

Thanks.

# multithreading - 从演员运行线程

> ID：11198108
> 
> 赞同：0
> 
> 时间：2012-06-25T22:10:13.447
> 
> 标签：multithreading, scala, blocking, actor

关闭一个对象的最佳方法是什么，该对象本身正在从一个 Actor 内部运行一个线程。我不确定最好的策略是什么？

大多数主题似乎都围绕着对所有事情都使用线程的想法，但我正在做阻塞 IO，它不是重写第 3 方代码的选项；）

有什么特别需要注意的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:00:52.510

不清楚你的意思是什么，所以如果我有错误的一端，请道歉。你有一些`Actor`class `A`，它有一个作为其状态的一部分的对象，它是一些 3rd-party API，它导致一个单独的线程运行（并且可能向它发出回调？）

```
class A extends Actor {
  val api = { ... }
  def act() = { ... }
} 
```

您希望**关闭**您的演员的一个实例，`A`并且您关心由创建的线程`api`以及它会发生什么？

如果您的第三方 API 提供了某种机制来干净地处理`api`（例如`destroy`方法），那么只需调用它！或者向actor发送一个明确的终止信号并让它优雅地退出：

```
 case 'Kill => api.destroy(); self.exit() 
```

如果 API 没有提供这样的机制，那么你会有点卡住（我可能会补充说，这是一个糟糕的 API）。您可以关闭您的演员，但单独的线程将继续运行。当然，它可能是一个*守护*线程，因此不会阻止整个 JVM 正常关闭。否则，优雅退出程序的唯一方法是`sys.exit(0)`从某个适当的位置显式调用。

# cygwin - 在 CYGWIN 上使用 GGNFS 查找素因子

> ID：11198115
> 
> 赞同：0
> 
> 时间：2012-06-25T22:10:54.623
> 
> 标签：cygwin, prime-factoring

我需要找到 94 位的主要因素。我在互联网上找到了这个[链接](http://gilchrist.ca/jeff/factoring/nfs_beginners_guide_perl.html)，它应该是初学者做这项工作的指导。我无法通过Step2。

无论如何，我的问题是我不知道如何将 GGNFS 与 windows 或 CYGWIN 一起使用？我下载了所需的文件，但我不知道如何执行代码。

[我从HERE](http://gilchrist.ca/jeff/factoring/index.html)下载了 GGNFS 。我下载的文件的详细信息是：

类型-----处理器----版本----大小--------文件----------- - - - - - 日期

32位-------x86-----------SVN 413----4.0 MB---ggnfs-svn413-win32-p4.zip-----03/20/2011

您的帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:56:08.760

您是否尝试过使用[Dario Alpern 的分解小程序分解](http://www.alpertron.com.ar/ECM.HTM)您的 94 位数字？如果没有，试试这个，然后带着更多问题回到这里。[Jeff Gilchrist 的说明](http://gilchrist.ca/jeff/factoring/nfs_beginners_guide_perl.html)非常清楚，但 GGNFS 不是您可以插入并运行的东西。

# opengl - 3D 场景中的 glOrtho 不起作用

> ID：11198122
> 
> 赞同：-3
> 
> 时间：2012-06-25T22:11:33.220
> 
> 标签：opengl

我制作了一个 3D 场景，当我移动相机环顾我的 3D 场景时，我使用 glOrtho 和 gluOrtho2D 来让屏幕上的内容保持不变。但是当我开始环顾四周时，人物消失了。你如何让角色留在你的屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:39:06.327

投影矩阵类型定义了您的镜头。但无论你使用什么镜头，如果你转动场景或移动相机，视图都会发生变化。

> 你如何让角色留在你的屏幕上。

好吧，通过保持“相机”就位。

OpenGL 实际上没有*摄像头*。它甚至没有场景。它唯一看到的是点、线和三角形，它一个接一个地在屏幕上绘制。OpenGL 拥有的是变换矩阵。在您的情况下，您所要做的就是设置一个投影和模型视图，它将在屏幕上所需的位置绘制字符。由于 OpenGL 不维护场景，因此您可以随时更改变换矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:39:47.053

您可能忘记了“glLoadIdentity();” 某处...

在您致电 glOrtho...

```
glOrtho(0.0, windowWidth, 0.0, windowHeight, -10.0, 10.0);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity(); 
```

希望这可以帮助。

-克罗普克

# file - 数据变化时的文件碎片

> ID：11198127
> 
> 赞同：0
> 
> 时间：2012-06-25T22:11:59.887
> 
> 标签：file, io, fragmentation

如果我在文件中间添加一些字母是该操作会使文件碎片化吗？

我只想将数据存储到文件中，有时会更新它们。所以......当我做了很多改变时，它可能对性能问题不利吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:20:13.473

这取决于变化的大小。
- 如果您只添加几个字母，并且在此更改后文件的大小没有增长到超过分配的簇数的大小 - 那么它不会影响 fagmentation。
- 当添加字母后系统需要在磁盘上分配额外的集群时 - 碎片可能会增加。

# unit-testing - Jasmine 测试与 Require/Backbone 项目

> ID：11198128
> 
> 赞同：1
> 
> 时间：2012-06-25T22:12:08.630
> 
> 标签：unit-testing, backbone.js, tdd, requirejs, jasmine

我的目标是测试 TDD（测试驱动开发）。但是过了一个周末，我真的需要你的帮助:)

> 第一个问题：“在浏览器运行器或无头运行器之间进行 TDD 的最佳方式是什么”？

第二：我真的想在没有浏览器的情况下测试我的项目，然后再将其置于生产模式。虽然我没有成功:(

例如，如果我想测试我的 Projects 模型，它看起来像：

```
define([
  'underscore',
  'backbone'
], function(_, Backbone) {
  var projectsModel = Backbone.Model.extend({
    defaults: {
      score: 10
    },
    initialize: function(){
    }

  });
  return projectsModel;
}); 
```

我能怎么做 ？我已经检查了 jasmine-node / Js 测试驱动程序 / ...但没有成功：/ Jasmine-node 看起来不错但是...我需要一些帮助，因为我在网上找到的每个 tuto 都只适用于没有依赖关系的简单模型。 .

谢谢 ：）

PS：我也在[这里](https://stackoverflow.com/questions/10929435/require-js-and-js-test-driver-unexpected-token)检查了这个链接，但有同样的错误：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:22:07.097

Node 在模拟真正的浏览器时遇到了问题，包括它的所有怪癖、ajax 等。不过像[PhantomJS](http://phantomjs.org/)这样的东西工作得很好。您使用脚本打开您的测试运行页面并让它在 PhantomJS 中运行，并使用一些其他代码来提取结果。

# sql - 数据库还原 - 用于列出安全对象的 SQL 脚本

> ID：11198137
> 
> 赞同：2
> 
> 时间：2012-06-25T22:12:52.280
> 
> 标签：sql, sql-server

我将数据库从一台服务器恢复到另一台服务器。恢复数据库后，我遇到了这个孤立用户的问题，我使用以下方法解决了这个问题 -

```
exec sp_change_users_login 'Update_One', 'UserName', 'LoginName' 
```

现在，这个特定用户与给定的服务器登录链接。一切都很好，直到这里。
但是，我仍然遇到与“Securables”有关的问题

*由于该*用户缺少对许多数据库对象的权限，因此我在 Google 上搜索并找到了一种方法 - 通过 - 生成脚本 -

```
1\. Select Database
2\. Right click database to see context menu
3\. Select 'Tasks', 
4\. From the sub-menu, select 'Generate Scripts'
5\. Select 'Set Scripting Options'
6\. From 'Advanced' section - set 'Object Level Permissions' to true. 
```

因此，我们将获得所有 GRANT SELECT/GRANT EXECUTE 脚本等的列表。

但是，我正在寻找另一种方法，我不必每次都运行此向导，我可以编写自己的数据库脚本来列出给定数据库用户的数据库安全和权限。

谁能指导我应该寻找哪些（系统）数据库表？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T14:48:14.173

```
-- database roles
-- role definitions
SELECT
dp1.name as RoleName,
dp2.name AS OwnedBy,
'CREATE ROLE [' + dp1.name + '] AUTHORIZATION [' + dp2.name + ']' AS cmd
FROM 
sys.database_principals dp1
JOIN 
sys.database_principals dp2 ON dp1.owning_principal_id = dp2.principal_id
WHERE dp1.type = 'R'
AND dp1.is_fixed_role = 0
AND dp1.name <> 'public'

-- role members
SELECT p2.name dbrole, p.name dbuser, 'EXEC sp_addrolemember ''' + p2.name + ''', ''' + p.name + '''' cmd
from 
sys.database_role_members m
join 
sys.database_principals p on m.member_principal_id = p.principal_id
join
sys.database_principals p2 on m.role_principal_id = p2.principal_id
WHERE p.name <> 'dbo'
ORDER BY p2.name, p.name

-- database permissions
SELECT
--/*
  prin.name AS UserName,
  objsch.name SchemaName,
  perm.class,
  perm.state_desc + ' ' + perm.permission_name AS Permission,
  CASE 
    WHEN perm.class = 1 AND perm.minor_id <> 0 THEN 'COLUMN'
    WHEN perm.class = 1 THEN obj.type_desc
    ELSE perm.class_desc
  END AS ObjectType,
  CASE
    WHEN perm.class = 3 THEN sch.name
    WHEN cols.object_id IS NOT NULL THEN obj.name + '.' + cols.name
    WHEN perm.class = 0 THEN DB_NAME()
    ELSE ISNULL(obj.name, 'n/a')
  END AS ObjectName,
--*/
perm.state_desc + ' ' + perm.permission_name collate SQL_Latin1_General_CP1_CI_AS + 
CASE WHEN perm.class <> 0 -- don't do this part for databases
  THEN
    ' ON ' +
    CASE
        WHEN perm.class = 3 THEN 'SCHEMA::[' + sch.name + ']'
        WHEN cols.object_id IS NOT NULL THEN '[' + objsch.name + '].[' + obj.name + '](' + cols.name + ')'
        WHEN perm.class = 0 THEN DB_NAME()
        ELSE ISNULL('[' + objsch.name + '].[' + obj.name + ']', 'n/a')
    END --AS ObjectName--,
    ELSE ''
END
+ ' TO ['
+   prin.name 
+ ']' AS cmd
FROM 
sys.database_permissions perm
JOIN
sys.database_principals prin on perm.grantee_principal_id = prin.principal_id
LEFT JOIN
sys.all_objects obj ON perm.major_id = obj.object_id
LEFT JOIN
sys.all_columns cols ON perm.major_id = cols.object_id and perm.minor_id = cols.column_id
LEFT JOIN
sys.schemas objsch ON obj.schema_id = objsch.schema_id
LEFT JOIN
sys.schemas sch ON perm.major_id = sch.schema_id
WHERE prin.name <> 'public'
AND prin.name <> 'dbo'
--AND perm.major_id >= 0
--AND perm.class_desc <> 'DATABASE'
ORDER BY 
  prin.name, 
  perm.class,
  ObjectType,
CASE
    WHEN perm.class = 3 THEN '[' + sch.name + ']'
    WHEN cols.object_id IS NOT NULL THEN '[' + objsch.name + '].[' + obj.name + '](' + cols.name + ')'
    WHEN perm.class = 0 THEN DB_NAME()
    ELSE ISNULL('[' + objsch.name + '].[' + obj.name + ']', 'n/a')
END

-- sp_helpuser

-- select distinct 'DROP USER [' + name + ']' from sys.database_principals order by 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:21:35.923

要取回给定用户的表权限：

```
 SELECT * FROM (

        select 
          USER_NAME(p.grantee_principal_id) as grantee,
          o.name                          AS TABLE_NAME,
          convert(varchar(10), CASE p.type
                WHEN 'RF' THEN 'REFERENCES'
                WHEN 'SL' THEN 'SELECT'
                WHEN 'IN' THEN 'INSERT'
                WHEN 'DL' THEN 'DELETE'
                WHEN 'UP' THEN 'UPDATE'
                END)                        AS PRIVILEGE_TYPE
        from 
        sys.database_permissions p,
        sys.objects o
        where 
        o.type in ('U', 'V') AND
        p.major_id = o.object_id AND
        p.minor_id = 0

  ) table_privileges  

WHERE grantee = 'myuser' 
```

对于这些表上的列：

```
SELECT * FROM (
        SELECT User_name(p.grantor_principal_id) 
               AS 
               grantor, 
               User_name(p.grantee_principal_id) 
               AS grantee, 
               Db_name() 
               AS table_catalog, 
               Schema_name(o.schema_id) 
               AS table_schema, 
               o.name 
               AS table_name, 
               c.name 
               AS column_name, 
               CONVERT(VARCHAR(10), CASE p.TYPE WHEN 'SL' THEN 'SELECT' WHEN 'UP' THEN 
               'UPDATE' 
               WHEN 'RF' THEN 'REFERENCES' END) 
               AS privilege_type, 
               CONVERT(VARCHAR(3), CASE p.state WHEN 'G' THEN 'NO' WHEN 'W' THEN 'YES' 
               END) AS 
               is_grantable 
        FROM   sys.database_permissions p, 
               sys.objects o, 
               sys.columns c 
        WHERE  o.TYPE IN ( 'U', 'V' ) 
               AND o.object_id = c.object_id 
               AND p.class = 1 
               AND p.major_id = o.object_id 
               AND ( p.minor_id = c.column_id 
                      OR ( p.minor_id = 0 
                           AND NOT EXISTS (SELECT * 
                                           FROM   sys.database_permissions m 
                                           WHERE  m.class = 1 
                                                  AND m.major_id = p.major_id 
                                                  AND m.minor_id = c.column_id 
                                                  AND m.TYPE = p.TYPE 
                                                  AND m.state <> p.state) ) ) 
               AND p.TYPE IN ( 'RF', 'SL', 'UP' ) 
               AND p.state IN ( 'G', 'W' ) 
               AND 0 != ( Permissions(o.object_id, c.name) & -- back compat 
                          CASE p.TYPE 
                            WHEN 'RF' THEN 4 -- REFERENCES basebit 
                            WHEN 'SL' THEN 1 -- SELECT basebit 
                            WHEN 'UP' THEN 2 -- UPDATE basebit 
                          END ) 

    ) column_privileges
WHERE grantee = 'myuser' 
```

这些是我从这里得到的脚本的修改版本：[https ://dba.stackexchange.com/a/9118/5074](https://dba.stackexchange.com/a/9118/5074)

# asp.net - 如何在 Visual Basic 中向 datagridview 控件添加新记录？

> ID：11198138
> 
> 赞同：0
> 
> 时间：2012-06-25T22:12:57.897
> 
> 标签：asp.net, .net, vb.net, datagridview

我想向我的网站添加一个简单的表格/类似 Excel 的功能，它将显示一些值。所以，我添加了一个网格视图。我根本不使用数据集或数据库投标。我只有一个带有两个条目的小表格。当用户单击按钮时，我想将一些值作为新行添加到 datagridview 控件。如何在 VB.NET 中向 datagridview 控件添加新记录？

我试过这段代码：

```
GridView1.Rows.Add(New String() {Value1, Value2}) 
```

但我收到一个错误：

> “添加”不是“System.Web.UI.WebControls.GridViewRowCollection”的成员

我的 ASPX：

```
<asp:GridView ID="GridView1" runat="server" Width="731px">
    <Columns>
        <asp:BoundField HeaderText="Name" />
        <asp:BoundField HeaderText="Grade" />
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:51:16.943

好的。使用类似的数据表

```
protected void Page_Load(object sender,EventArgs e)
{
     if(!IsPostback)
     {
         DataTable myDataTable = new DataTable();

         DataColumn myDataColumn; 

         myDataColumn = new DataColumn();
         myDataColumn.DataType = Type.GetType("System.String");
         myDataColumn.ColumnName = "Value1";
         myDataTable.Columns.Add(myDataColumn);

         myDataColumn = new DataColumn();
         myDataColumn.DataType = Type.GetType("System.String");
         myDataColumn.ColumnName = "Value2";
         myDataTable.Columns.Add(myDataColumn);
         ViewState["Data"]=myDataTable;
     }
}

protected void btnAdd(object sender,EventArgs e)
{
    Datatable Dt=(Datatable)ViewState["Data"];
    DataRow Dr=Dt.NewRow();
    Dr[0]=TextBox1.Text;
    Dr[1]=TextBox2.Text;
    Dt.Rows.Add(Dr);
    ViewState["Data"]=Dt;
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:07:08.697

这很容易。您所要做的就是将您的网格绑定到任何Colleciton，例如List、Array、DataTable。创建你的记录类

```
Public Class MyRecord
    Private _name As String = ""
    Private _grade As Integer = ""

    Public Property Name() As String 
        Get   
            Return Me._name    
        End Get    
        Set(ByVal value As String)   
            Me._name = Value
        End Set   
    End Property

    Public Property Grade() As Integer
        Get   
            Return Me._grade 
        End Get    
        Set(ByVal value As Integer)   
            Me._grade = Value
        End Set   
    End Property

End Class 
```

在您的 Page_Load 中将您的网格绑定到列表

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPotback Then

        Dim list As New List(Of MyRecord)()
        list.Add(New MyRecord() With { _
                       Key .Name = "dsfsdf", _
                       Key .Grade = 45 _
        })
        list.Add(New MyRecord() With { _
                       Key .Name = "dsfsd234f", _
                       Key .Grade = 50 _
        })

        Session("MyList") = list
        GridView1.DataSource = list
        GridView1.DataBind()
    End If
End Sub 
```

然后添加一些带有文本框和按钮的表单并处理按钮 on_click 事件

```
Protected Sub btn_Click(sender As Object, e As EventArgs) Handles btn.Click
    Dim list As New List(Of MyRecord)        

    If Session("MyList") Is Not Nothing Then
        list = DirectCast(Session("MyList"), List(Of MyRecord)) 
    End If

    list.Add(New MyRecord() With { _
                       Key .Name = txt1.Text, _
                       Key .Grade = Convert.ToInt32(txt2.Text) _
    })

    GridView1.DataSource = list 
    GridView1.DataBind()

End Sub 
```

抱歉，如果有任何错误，我是 C# 开发人员

# iphone - 带有视频和叠加层的 Html 5 网页

> ID：11198142
> 
> 赞同：1
> 
> 时间：2012-06-25T22:13:11.110
> 
> 标签：iphone, html5-video

我正在尝试创建一个网页，其中包含在特定时间出现的一些其他元素（div、带有文本等）的 html 5 视频。我的理解是，在 iphone 上，您不能在页面本身中包含这些视频，而是它们会在新窗口中弹出打开（快速时间？）但是，我仍然可以在视频播放时将 html 5 元素绝对定位并显示在视频上吗，或者quicktime的移动版本不允许这样做吗？

谢谢，克雷格

# javascript - 使用表单验证隐藏和显示 Div

> ID：11198145
> 
> 赞同：1
> 
> 时间：2012-06-25T22:13:37.150
> 
> 标签：javascript, jquery, html, css

提交后，我试图隐藏“测验”并显示“感谢”。在我添加 JavaScript 表单验证代码之前，一切都正常工作，现在它只是重新加载第一个 div“欢迎”，我认为在提交时将“#thanks”添加到操作中可以解决问题，但它没有。然后尝试在我的表单验证中添加“if true”语句最终破坏了表单验证。我正在使用 jquery.validate 来按照建议验证我的表单。使用当前代码，它会跳过验证，只显示“谢谢”如果有人有任何建议，将不胜感激。

```
 <div id="quiz">
        <form class="cmxform" id="commentForm" method="get" action="" onSubmit="showHide(); return false;">
             <label for="cname">Name</label>
             <input id="cname" name="name" size="20" class="required" minlength="2" />
           </p>
           <p>
             <label for="ccompany">Company Title</label>
             <input id="ccompany" name="company" size="20"  class="required company" minlength="2" />
           </p>
           <p>
             <label for="cnumber">Phone Number</label>
             <input id="cnumber" name="number" size="20"  class="required number" />
           </p>
           <p>
             <label for="cemail">Email</label>
             <input id="cemail" name="email" size="20"  class="required email" />
         <p></p>   
    <input class="submit" type="submit" value="Submit" align="center"/>
    </form>
    </div> 

  <div id="thanks"><h2>Thank you.</h2>
You will receive an email momentarily
</div>

   <script>
$("#begin").click(function(){
    $("#quiz").show();
    $("#welcome").hide();    
});
 function showHide(){
    $("#thanks").show();
    $("#quiz").hide();    
};

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:37:41.727

我只能说你做错了......虽然你正在做的表单验证可以工作，但有很多很好的表单验证 jquery 插件可以简化你的生活并增加更丰富的用户体验。 [jquery.validate](http://docs.jquery.com/Plugins/Validation/)可能是使用最广泛的库，非常值得使用。

# objective-c - 列出“contentsOfDirectoryAtURL”时，我想要一个仅包含目录名称的数组，而不是整个路径。我该怎么做呢？

> ID：11198149
> 
> 赞同：1
> 
> 时间：2012-06-25T22:14:30.120
> 
> 标签：objective-c, ios

我`contentsOfDirectoryAtURL`用来获取特定目录的列表。有没有一种简单的方法来获取目录名称，而不是完整路径？

例如，而不是：

```
file://localhost/var/mobile/Applications/.../Documents/MySavedFiles/1872399DDF
file://localhost/var/mobile/Applications/.../Documents/MySavedFiles/3431109ABE 
```

我只想

```
1872399DDF
3431109ABE 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:36:31.997

先把 NSURLs 转换成 NSStrings，然后就可以提取目录名了。

NSString 的一些非常有用的方法是 lastPathComponent 和 stringByDeletingPathExtension

```
NSMutableArray* directoryNames = [NSMutableArray array];

NSArray* fullPaths = [[NSFileManager defaultManager] contentsOfDirectoryAtURL:...];

for (NSURL* url in fullPaths)
{
     [directoryNames addObject:[[url absoluteString] lastPathComponent]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T22:21:37.023

```
NSArray *URLs = [[NSFileManager defaultManager] contentsOfDirectoryAtURL:...];
NSArray *filenames = [URLs valueForKeyPath:@"lastPathComponent"]; 
```

# onclick - 是否可以在 pentaho 中使用 onclick 事件打开子报表？

> ID：11198151
> 
> 赞同：0
> 
> 时间：2012-06-25T22:14:44.993
> 
> 标签：onclick, pentaho, subreport

我有一个主报告，它有几个列，A、B 和 C。

当用户使用该事件单击 B 中的任何数据时，`onclick`必须打开一个子报表，显示有关所选值的一些详细数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T07:35:48.427

```
="javascript:window.open('/page.jsp?Parameter1="&URLENCODE([param1])&"&outputType=text/html&paginate=true')" 
```

在报表设计器中的单击属性中使用它可能会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:00:10.080

无法通过报表设计器创建该行为。为了创建您所描述的那种行为，您需要了解 Mondrian（为了为您的数据创建多维数据集）和仪表板编辑器（为了使用来自多维数据集的数据创建一个视图来复制您想要的行为）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:25:54.397

...但是，您可以链接到单独的报告并显示该报告。

如果您更精通技术，您也可以在同一份报告中实现这一点，但它更复杂。参数化您的子报表的可见性并链接到当前报表，并更改该子报表可见性的参数值。单击该链接将使用新参数集重新生成报表，您可以在子报表上使用公式函数来触发其可见性。

# javascript - 如何同时编写 OOP JS 和使用 jQuery

> ID：11198155
> 
> 赞同：3
> 
> 时间：2012-06-25T22:15:24.667
> 
> 标签：javascript, jquery, oop

通常（如果不总是），当 jQuery 允许您向某些 JS 事件（如 click）添加回调时，在回调函数中，它们会将“含义”更改为`this`触发事件的 DOM 元素。

这可能非常有用，但是当您在 js 中编写 OOP 代码时，它会妨碍您，[例如以下示例](http://jsfiddle.net/p4Ban/)：

```
function MyClass() {}

MyClass.prototype = {

    init: function() {
        $("#someSpan").click(this.doSomething);
    },

    doSomething: function() {
        alert("Here 1");
        this.test();
        return false;
    },

    test: function() {
        alert("Here 2");
    }
} 
```

在这个例子中，`this.test()`将不起作用，因为`this`不再是一个实例，`MyClass`而是一个 jQuery DOM 元素（跨度）。

我的问题是：有没有办法继续使用这种模式在 JS 中编写 OOP 代码并使用 jQuery？`this`并且：当 jQuery 可以轻松地将 jQuery DOM 元素作为第一个参数发送时，为什么它会在回调函数中发生变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T22:35:31.260

jQuery[`$.proxy`](http://api.jquery.com/jQuery.proxy/)可以像这样使用：

```
function MyClass() {
    this.clicked = $.proxy(this.clicked, this);
}

MyClass.prototype = {

    clicked: function(e) {
        alert("Here 1");
        this.test();
        e.currentTarget; //this replaces "this"-the keyword used in "non OOP" contexts
//see http://api.jquery.com/event.currentTarget/
    },

    init: function() {
        $("#someSpan").click(this.clicked);
    },

    test: function() {
        alert("Here 2");
    }
} 
```

当您创建一个实例时，该实例会获得自己的`.clicked`函数，该函数会影响原型中的通用函数。`this`无论您如何称呼它，它都将始终具有相同的绑定。所以你可以`this.clicked`到处走走，让它发挥作用。

# android - jQuery 和 MVC3 Razor 在 Android 浏览器上生成奇怪的 URL

> ID：11198156
> 
> 赞同：1
> 
> 时间：2012-06-25T22:15:30.127
> 
> 标签：android, jquery, asp.net-mvc-3, jquery-mobile

我正在开发一个 MVC3（使用 Razor）/jQuery Mobile 应用程序，并且在使用 Android 浏览器（或用户代理）时无法导航回我的应用程序的许多区域。

问题似乎出在使用 @Url.Action 方法创建的 URL 中。在 iPhone 和 PC 浏览器上，URL 如下所示：

```
<li class="cl"><a href="/CustomerLookup/Search?ep=Home&amp;t=8cf20faa37155b8"><span>Customer Lookup</span></a></li> 
```

但在 Android 浏览器或使用 Android 用户代理的 Chrome 中，URL 如下所示：

```
<li class="cl"><a href="/(F(Kdqb5nTlCaTP52GkHZ76P50MXAvnUCexKHt0ucPisYJ0iubQ3jwKk6-tiqxAtGVdBmiOgq4mW1-ZF3XUZJc5Y9BHnXVa2fWeIyFE5BxUwmZRhPjbm4L8AWDeymlpAcYJ9ABEPfu5i5_JmvAFinX8y9Jnwj0YeQRnpx_NCVjGqEcuFB-0g5NYcOI_WAsixNP90))/CustomerLookup/Search?ep=Home&amp;t=8cf20fb0b1db618"><span>Customer Lookup</span></a></li> 
```

当我单击此链接时，出现错误：

```
Uncaught Error: Syntax error, unrecognized expression: data-url='/(F(Kdqb5nTlCaTP52GkHZ76P50MXAvnUCexKHt0ucPisYJ0iubQ3jwKk6-tiqxAtGVdBmiOgq4mW1-ZF3XUZJc5Y9BHnXVa2fWeIyFE5BxUwmZRhPjbm4L8AWDeymlpAcYJ9ABEPfu5i5_JmvAFinX8y9Jnwj0YeQRnpx_NCVjGqEcuFB-0g5NYcOI_WAsixNP90])/CustomerLookup/Search?ep=Home&t=8cf20fb0b1db618') 
```

我现在无法导航回原始页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:58:17.457

看起来您在您的 android 上禁用了 cookie，并且会话被扔到您的 url 中。

# objective-c - 当我为标签栏控制器创建 nib 文件时，没有弹出用户界面

> ID：11198157
> 
> 赞同：-1
> 
> 时间：2012-06-25T22:15:33.950
> 
> 标签：objective-c, xib, xcode4.3

我正在创建一个标签栏控制器 xib 文件，该文件将容纳标签栏控制器。因此，我为此突出显示我的项目文件夹，然后创建一个新文件，然后从左侧的 i0S 部分中选择“空模板”。但是一旦创建它，​​我就看不到在创建 NIB 文件时应该填充的用户界面。谁能告诉我我做错了什么？在创建其他 XIB(NIB) 文件时，我没有遇到过这种情况，但我也从未使用过“空”模板。

![没有用户界面截图](../Images/806afc11d525116652d373e532097632.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:45:16.570

> 与其他视图控制器（例如 UITableViewController）不同，您不应继承 UITabViewController。因此，与其他视图控制器不同，您不需要子类化，然后使您的子类成为 nib 的所有者，并使用自定义视图指向 nib 中的视图。

请参阅此完整[答案](https://stackoverflow.com/a/9448709/454165)以获取有关如何操作的更多信息。

# python - 什么可以阻止 mousePressEvent 或事件过滤器鼠标单击事件？

> ID：11198158
> 
> 赞同：1
> 
> 时间：2012-06-25T22:15:34.060
> 
> 标签：python, qt, events, mouse, qtreewidget

我似乎无法在 QTreeWidget 中获得任何鼠标点击。我试过了...

*   ...覆盖mousePressEvent，但它根本不会运行。甚至没有记录消息。
*   ...使用事件文件管理器。它适用于除鼠标单击之外的所有内容。
*   ...使用代表。他们的编辑器事件工作正常，但只有在一个项目上，这还不够
*   ...确保将所有内容添加到布局中。我使用了 QTCreator，输出使用的是 layout.addWidget()。我还将小部件实例添加到主窗口的布局中。

我能够使用答案将小部件注册为 QTreeWidget 的事件过滤器，如下所示：

```
# In __init___
    # self.tree is the QTreeWidget
    self.tree.viewport().installEventFilter(self)

def eventFilter(self, target, event):
    """ 
    This widget is an event filter for the tree, so this function is triggered 
    automatically
    """
    # Print on right-click
    if (event.type() == QEvent.MouseButtonPress and 
        event.button() == Qt.RightButton):
        print("Right Click")

    # Don't block/accept the event
    return False 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T00:38:24.610

因为您可以看到（并点击）`QTreeWidget`实际上是`viewport()`. 您应该在其上安装事件过滤器`viewport()`。

# c# - 等效于 SharePoint Services 3 (SharePoint 2007) 的 CAML“In”运算符

> ID：11198161
> 
> 赞同：1
> 
> 时间：2012-06-25T22:15:49.013
> 
> 标签：c#, sharepoint-2007, caml

今天我发现需要编写一个使用 WHERE [Field] IN [Values] 的 CAML 查询。我想查询一个列表，其中列表项的标题包含在字符串集合中。在收到运行查询的多个错误后，我意识到 In 运算符是 SharePoint 2010 的新功能，但我仍在使用 SharePoint 2007。因此，唯一的选择是使用多个 Or 运算符。此外，Or 运算符一次只能对 2 个值进行运算，因此这需要嵌套的 Or 运算符。如何构建这样的查询？请参阅下面的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:15:49.947

在找到这个解决方案之前，我偶然发现了几种方法。我不确定它的可扩展性，但它适合我的需要，所以我想我会分享它。此递归方法应返回等价于

```
WHERE Title IN ([Title1], [Title2],...[TitleN]) 
```

用于 1-N 字符串标题的列表。

```
private string _camlTitleEq = "<Eq>" +
                                 "<FieldRef Name=\"Title\" />" +
                                 "<Value Type=\"Text\">{0}</Value>" +
                              "</Eq>";

private XElement BuildOrClause(List<string> listItemTitles, int index)
{
    //If we've reached the last item in the list, return only an Eq clause
    if (index == listItemTitles.Count - 1)
        return XElement.Parse(String.Format(_camlTitleEq, listItemTitles[index]));
    else
    {
        //If there are more items in the list, create a new nested Or, where
        //the first value is an Eq clause and the second is the result of BuildOrClause
        XElement orClause = new XElement("Or");
        orClause.Add(XElement.Parse(String.Format(_camlTitleEq, listItemTitles[index])));
        orClause.Add(BuildOrClause(listItemTitles, index + 1));
        return orClause;
    }
} 
```

你可以像这样使用它：

```
SPQuery query = new SPQuery();
string titleIn = BuildOrClause(listItemTitles, 0).ToString(SaveOptions.DisableFormatting);

query.Query = "<Where>" +
                  titleIn +
              "</Where>"; 
```

我希望这对仍在 SP 2007 中工作的人有所帮助。欢迎提供建设性反馈！如果您在 SharePoint 2010 中，请使用已经内置的[In Operator](http://msdn.microsoft.com/en-us/library/ff625761.aspx)。

# iphone - Facebook AppCenter for Native 应用程序 - 屏幕截图不会更新

> ID：11198164
> 
> 赞同：1
> 
> 时间：2012-06-25T22:15:57.897
> 
> 标签：iphone, ios, facebook, ipad

我们有一个原生 iOS 应用程序，它使用 Facebook 来验证用户身份。

所以我们正在为这个应用程序设置 AppCenter，但截图不会上传。

所以在点击保存之前：

![图片前](../Images/43572f0a7cd5d93d6e9c6cae48702d4a.png)

点击保存后：

![最佳](../Images/c0015619521b53050e37271587e881f7.png)

![图片后](../Images/08f280b36a8a1086cf2eff17c79fa34c.png)

最近有人让这个工作吗？页面似乎坏了。我们已经等了 30 分钟并再次检查，并尝试了几次都没有运气。

这真的很糟糕，因为如果我们尝试提交应用程序以供审核：

![提交时出错](../Images/e8ed72405e61e020a791f314f0485cd3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:08:31.870

好吧，等了大约3个小时后。我所有的截图都出现了。

我想耐心是一种美德。

# c - 普通-Ole-C。我如何解释这个 c-struct

> ID：11198167
> 
> 赞同：-1
> 
> 时间：2012-06-25T22:16:10.447
> 
> 标签：c, struct

> **可能重复：**
> ['unsigned temp:3' 是什么意思](https://stackoverflow.com/questions/2950029/what-does-unsigned-temp3-means)

我正在编写一个 iOS 应用程序，并且必须处理一些遗留的普通 ole C：

```
typedef struct {
    int32_t tid;
    int32_t pos;
    uint32_t bin:16, qual:8, l_qname:8;
    uint32_t flag:16, n_cigar:16;
    int32_t l_qseq;
    int32_t mtid;
    int32_t mpos;
    int32_t isize;
} bam1_core_t; 
```

我的问题涉及这一行`uint32_t bin:16, qual:8, l_qname:8;`，有人可以告诉我如何访问这些字段，这些字段在我看来是某种 32 位 int 的位向量子字段。

谢谢，
道格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:18:22.153

这些是位域。您可以像访问结构中的任何其他字段一样访问它们。冒号后面的数字定义了用于存储该字段的位数。例如，`qual:8`均值`qual`可以保存（仅）从 0 到 255 的值。

我应该补充一点，这`:0` 很特别——这意味着不应从当前项目（int、uint32_t 等）分配更多的位域——下一个位域将来自新的底层存储单元。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T22:17:38.060

这些是[位域](https://en.wikipedia.org/wiki/C_syntax#Bit_fields)，您可以这样引用它们：

`bam1_core_t.bin`或`bam1_core_t.qual`等等。

这些位域允许您更紧密地打包数据。右侧的数字`:`指定应分配多少位给与左侧标识符相关联的位置。

你会在 C 中看到这个的唯一地方是在`struct`s 或`union`s 中。

# java - Java中字符串中的字符替换

> ID：11198169
> 
> 赞同：2
> 
> 时间：2012-06-25T22:16:26.187
> 
> 标签：java, string, character, replace

目前，我有一个字符串数组，每个字符串中都有长度随机的随机字符。我想用“X”替换每个“A”，我该怎么做呢？

例子：

`String str = "ABCDEFGAZYXW";`

我希望 String 变成`"XBCDEFGXZYXW"`. 我尝试使用：

`str.replaceAll("A", "X");`

但它不会改变字符串。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:17:20.383

`str = str.replaceAll("A", "X");`

该`replaceAll`方法不会更改字符串（Java 中的字符串是不可变的），而是创建一个新`String`对象并将其作为函数调用的结果返回。通过这种方式，我们更改了对新对象的引用，其中旧对象没有更改，只是没有被引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T22:20:07.467

Java 中的字符串是不可变的，您使用 走在正确的轨道上`replaceAll()`，但是您*必须*将方法返回的新字符串保存在某处，例如在原始字符串中（如果您不介意修改它）。我的意思是：

```
String str = "ABCDEFGAZYXW";
str = str.replaceAll("A", "X"); // notice the assignment! 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T22:23:50.740

对于仅用另一个字符替换单个字符，您可以使用`replace`：

```
str = str.replace('A', 'X'); 
```

正如许多其他人已经发布的那样`String.replaceAll`，也可以使用，但是您应该知道此方法的第一个参数是*正则表达式*。如果您不知道这一点，那么它可能无法在所有情况下按您预期的那样工作：

```
// Replace '.' with 'X'.
str = str.replaceAll(".", "X"); // Oops! This gives "XXXXXXXXXXXX" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T22:18:40.070

您必须分配结果，即：

```
str = str.replaceAll("A", "X"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-25T22:19:00.280

试试 str = str.replaceAll("A", "X");

字符串在 Java 中是不可变的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-20T09:08:20.450

基本上**replaceAll**函数将采用两个参数，一个是要删除的字符串，第二个是要替换的新字符串，它的返回类型是字符串。

It will return you new string after replacement.

Here you are calling that method but not storing its new value in variable. you can replace or print it like this

```
String string = "My Old String with Old value";
System.out.println(string.replaceAll("Old", "New"));
//Or
string = string.replaceAll("Old", "New");
System.out.println(string); 
```

So in your code you should store it into your string object.

```
str = str.replaceAll("A", "X"); 
```

# c# - 空白行在 DataGrid 中不可见

> ID：11198170
> 
> 赞同：2
> 
> 时间：2012-06-25T22:16:33.530
> 
> 标签：c#, wpf, data-binding, datagrid, observablecollection

我将 an 绑定`ObservableCollection`到 DataGrid，并且我希望能够通过空白行在 observablecollection 中添加项目。但是，当列表在运行时为空时，此空白行不会显示。我已经查找了这个问题，我有`CanUserAddRows=true`，我有`IsReadOnly=false`，并且我已经将数据网格的 datacontext 设置为 observable 集合，并且我有一个空的构造函数，它仍然无法正常工作。这是我到目前为止所拥有的：

在 XAML 中：

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Source={StaticResource CostCenterListViewSource}}" Name="costCenterListDataGrid" VerticalAlignment CanUserAddRows="True" CanUserDeleteRows="True" IsReadOnly="False">
    <DataGrid.Columns>
        <DataGridTextColumn x:Name="nameColumn" Binding="{Binding Path=Name, Mode=TwoWay}" Header="Cost Center" Width="102" />
        <DataGridTextColumn x:Name="glCodeColumn" Binding="{Binding Path=GlCode, Mode=TwoWay}" Header="Gl Code" Width="80" />
        <DataGridTextColumn x:Name="costCenterPercentageColumn" Binding="{Binding Path=CostCenterPercentage, Mode=TwoWay}" Header="%" Width="30" />
    </DataGrid.Columns>
</DataGrid> 
```

在我背后的代码中，我有这个：

```
costCenterListDataGrid.DataContext = item.CostCenterList;
//when "item" was instantiated, it also created a new instance: costCenterList = new ObservableCollection<CostCenter>(); 
```

在 CostCenter 课程中，我有：

```
public CostCenter()
{
}

public string Name
    {
        get { return name; }
        set
        {
            if (String.IsNullOrEmpty(Name) || !Name.Equals(value))
            {
                name = value;
                OnPropertyChanged("Name");
            }
        }
    }

    public string GlCode
    {
        get { return glCode; }
        set 
        {
            if (String.IsNullOrEmpty(GlCode) || !GlCode.Equals(value))
            {
                glCode = value;
                OnPropertyChanged("GlCode");
            }
        }
    }

    public double CostCenterPercentage
    {
        get { return cPercentage; }
        set
        {
            if (CostCenterPercentage != value)
            {
                cPercentage = value;
                OnPropertyChanged("CostCenterPercentage");
            }
        }

    } 
```

**编辑：这就是我的 Window.Resources**

```
<Window.Resources>
    <CollectionViewSource x:Key="jobItemViewSource1" d:DesignSource="{d:DesignInstance my:JobItem, CreateList=True}" />
    <CollectionViewSource x:Key="jobItemNotesHistoryViewSource" Source="{Binding Path=NotesHistory, Source={StaticResource jobItemViewSource1}}" />
    <CollectionViewSource x:Key="CostCenterListViewSource" Source="{Binding Path=CostCenterList, Source={StaticResource jobItemViewSource1}}" />
    <CollectionViewSource x:Key="CostCenterListAfesViewSource" Source="{Binding Path=Afes, Source={StaticResource CostCenterListViewSource}}" />
</Window.Resources> 
```

# ruby-on-rails - Rails 3.2.6 弃用警告：:confirm 选项已弃用，将从 Rails 4.0 中删除。使用 ':data => { :confirm => 'Text' }0

> ID：11198171
> 
> 赞同：0
> 
> 时间：2012-06-25T22:16:46.417
> 
> 标签：ruby-on-rails, warnings, deprecated

这是在我将应用程序从 Rails 3.2.3 升级到 3.2.6 后开始出现的警告。这是我的“数据表”相关类中它指向的代码行：

```
class PdpsDatatable
  delegate :current_user, :is_reader?, :is_admin?, :is_user?, :show_num, :params, :h, :link_to, to: :@view
  # the line above is what the warning is pointing to
end 
```

这个警告有什么简单的解决方法吗？这很烦人。

谢谢。

巴拉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:55:07.517

我认为问题不在于这一行....您可能`:confirm`在应用程序的其他地方有 in ，例如`button_to`, `button_tag`, `image_submit_tag`,`link_to`或`submit_tag`.

有关此弃用的更多详细信息，请[点击此处](https://github.com/rails/rails/commit/fc092a9cba5fceec38358072e50e09250cf58840)。

[此处](http://ariejan.net/2012/06/18/search-and-replace-in-multiple-files-with-vim)警告的可能解决方案。

# css - 定位错误菜单css位置：在IE7中是相对的

> ID：11198174
> 
> 赞同：2
> 
> 时间：2012-06-25T22:16:57.687
> 
> 标签：css, xhtml, position, internet-explorer-7

我在 IE7 中遇到定位问题 在我的 css 菜单中有以下内容

在 Chrome 和 Firefox 中可以正常工作，但在 IE7 中，菜单是垂直的。我怎样才能解决这个问题？

[有这个问题的页面](http://infantile.montepage.com.br)

请查看页面的来源，行与行之间的链接：

菜单在两行之间：

457 和 614

标签开始于：

```
<div class="colorido" style="z-index: 10000; position: relative;"> 
```

div 'colorido' 的区域将**Destaques**到**Fale Conosco**

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:37:11.280

您需要为菜单的 UL 元素添加固定宽度。我进行了实验，550px 似乎是正确的。

```
.colorido UL.mega-menu {
    height: 40px;
    position: relative;
    width: 550px;
} 
```

# java - Java：创建仅包含重复项的数组

> ID：11198176
> 
> 赞同：-2
> 
> 时间：2012-06-25T22:17:30.390
> 
> 标签：java, arrays, duplicates

我在这个主题上做了很多搜索，但我找不到任何对我的问题有用的东西：我正在基于整数数组用 Java 制作一个简单的记忆游戏。我希望数组只包含重复的条目而没有唯一的条目。不幸的是，这里的大多数问题都是关于避免或删除重复条目，但是如何执行它们呢？

到目前为止，我的代码看起来像这样。

```
public Field[] getField(){
    Random r = new Random();
    int pool = 16;
    ArrayList<Integer> used = new ArrayList<Integer>();
    int rand = r.nextInt(pool);
    System.out.println("First random: " + rand);

    for(int i = 0; i < fields.length; i++){
        System.out.println("ITERATION " + i + " STARTED");
        while(used.contains(rand)){
            System.out.println(rand + " is used, recalculating...");
            rand = r.nextInt(pool);
            System.out.println("New random is " + rand);
        }

        fields[i] = new Field(rand);
        System.out.println(rand + " added in Field " + i);

        int tmp = r.nextInt(fields.length - 1);
        System.out.println("First tmp calculated: " + tmp);

        while(fields[tmp] != null && i <= fields.length / 2){
            tmp = r.nextInt(fields.length - 1);
            System.out.println("Field " + tmp + " is used, looking for another...");
        }

        fields[tmp] = new Field(rand);
        System.out.println(rand + " added in temp Field " + tmp);

        used.add(rand);
        System.out.println("ITERATION " + i + " ENDED");
        System.out.println();
    }

    return fields;
} 
```

fields[] 是 Field 类型的数组（基本上只有一个成员（int id）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:32:21.187

如果我正确理解了您的需求，那么我认为您可能会使这变得比必须的要困难得多。

*按顺序*`fields`迭代数组并在每次迭代中添加两个相同的值，然后对数组进行洗牌要容易得多。类似于以下代码：*`Fields`*

 *```
{
    ...
    for (int i = 0; i < fields.length; i += 2)
        fields[i] = fields[i + 1] = new Field(r.nextInt(pool));

    shuffleFields(fields);

    return fields;
} 
```

您可以选择洗牌算法。[Fisher-Yates 洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)很受欢迎。例如：

```
void shuffleFields (Field[] fields)
{
    Random r = new Random();
    for (int i = fields.length - 1; i >= 1; --i)
    {
        int j = r.nextInt(i + 1);
        Field t = fields[i];
        fields[i] = fields[j];
        fields[j] = temp;
    }
} 
```*

# c - 与 C 中的 shell 程序交互以将自定义缓冲区提供给它的 gets() 函数（以及更多）

> ID：11198178
> 
> 赞同：2
> 
> 时间：2012-06-25T22:17:39.847
> 
> 标签：c, ipc, pipe, popen, buffer-overflow

如果您不希望最后一段的长篇大论头-->

`gets()`我在用于填充函数的本地 1024-char* 缓冲区的程序中发现了缓冲区溢出漏洞。它在**Sparc Solaris 5.8 (sun4u) 32-bit**上。

要克服的第一个障碍`tch`是不让我手动输入 > 257 个字符（如果我想能够按 Enter 键，则为 256 个；）

为了绕过这个，我一直在执行`/bin/sh`，`stty raw`并且我现在可以用> 1095个字符有效地溢出缓冲区。（注意：我必须使用 Ctrl-J 来执行 line-feeds/enter ，尽管我还没有研究 stty raw 来检查为什么会发生这种变化。

**我的问题是**：现在不仅要溢出缓冲区，还要写新的返回地址/保留 %fp***十六进制代码***。但由于我不知道如何从终端程序中手动输入十六进制代码，我想我可以找到一种方法来使用 C 并让它与易受攻击的程序执行/交互，并最终将其发送给我的自定义缓冲区。

但是，如果我有办法手动输入/复制粘贴十六进制字节，我可以做这样简单的事情！！！

```
perl -e 'print "n" . "A"x1094 . "\xff\xbe\xf5\x58" . "\xff\xbe\xff\x68" . "\0"' 
```

（如果您想知道我为什么要打印“n”，那是因为易受攻击的程序会检查字符串的 yes/no @index 0）

因为我不知道手动粘贴此类十六进制信息的方法，所以我一直在尝试使用 C。在 C 中，我制作了特殊的缓冲区，并且一直在学习`popen()`易受攻击的程序（“w”）和 fputs 我的缓冲区，但它已经充其量工作不确定。（popen，`IPC`对我来说是全新的）

（我也尝试过`piping/dup2ing`，但没有得到任何结果，没有有效字符串输出/输入的证据）不确定出了什么问题，我对代码进行了很多试验，后来放弃了它。

描述我的“popen”程序输出的最佳方式是，仅通过在索引 [1096->1099] 处分隔缓冲区，易受攻击的程序中存在段错误，这实际上是函数的位置`%fp`，所以看起来很正常@**首先**。但是，将字符串分隔在比这更高的索引处会使编程工作正常（WTF）！！！这种行为让我觉得WTF！？这与手动粘贴的行为不同，因为更多的字符肯定会改变 seg fault -> bus error，*因为接下来我将覆盖返回地址，然后是该**堆栈帧*及以后的任何可能重要的信息！

整个字符串实际上并没有一口气发送吗？！？！？我从 那里听说过一些关于缓冲区`fflush()`问题的信息`popen() manpage`，但我不明白那个谈话！！

这是我第一次使用`popen()`，并且有更多我认为奇怪的行为->如果我停止`fputs()`数据，易受攻击的程序进入无限循环，重复打印它通常只会打印一次的最后一个输出字符串，但是在这个情况下，每当我停止 fputs'ing 时，事情就会开始无限打印出来。现在，我希望如果我不输出，程序不会像一只好鸭子一样坐下来等待更多输入。？？？显然不是。显然它必须继续小便和呻吟，我需要输入下一个字符串！这是 popen 的正常行为吗？也许是因为我的 popen 程序在实际完成之前退出并使用 pclose() 关闭（但我期待缓冲区溢出，我不知道为什么我没有像手动粘贴时那样得到它）

**注意**：我使用 "\r\n" 来指示易受攻击的程序执行 'return' ，我不确定 CTRL-J / Enter 键的等价物（哪个 enter 键在原始 tty 中不起作用）。我也不确定在管道缓冲区时是否需要原始 tty。

然后我想我试着聪明一点，把字符串放到一个文件中，然后通过命令行做一个管道。我不知道你是否可以像这样通过管道连接到一个期望
*以这种形式输入的程序，我什至无法得到一个溢出！*IE

```
printf "\r\n" > derp && perl -e 'print "n" . "A"x1025' >> derp && printf "\r\n" >> derp
cat derp | ./vuln 
```

现在，倒回 <-> 回到 tsh，我说我有 257 个字符的限制，如果我想能够按 Enter 并让程序继续运行，我需要做的比这少。所以，也许 \r\n 不在这里，因为那是 2 个字符。要么，要么你不能`cat`进入这样的程序。但是我在我的 C 程序中使用 \r\n 来告诉易受攻击的程序我已经按回车键，并且它们至少稍微更实用（不是真的），尽管仍然没有以与手动粘贴我相同的方式溢出缓冲区垃圾缓冲区。

啊！！！

此外，仅使用其中一个：'\r' 或 '\n' 绝对行不通！我错过了另一个控制字符吗？这可能是我的程序问题之一吗？？？

但基本上我的整个问题是我似乎无法理解如何创建一个程序来运行和与命令行可执行文件交互并说嘿！！！将整个缓冲区放入您的gets() 中，我知道您会非常喜欢它！就像我自己从终端运行程序一样。
而且我知道无法手动将十六进制代码粘贴/写入终端，**这就是全部原因**为什么我要尝试编写一个交互程序来在 C 中制作一个带有十六进制字节的字符串并发送到该程序的gets()！！！！如果您跳到本段，我还希望您知道我正在使用专门的 /bin/bash 和 stty raw 以便我可以手动输入超过 257 个字符（如果我可以成功创建，我不确定是否需要继续这样做一个交互程序向易受攻击的程序发送缓冲区。可能以这种方式发送缓冲区会绕过 tch' 终端 257 字符限制）

谁能帮我！？！？！？！？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:45:11.977

The `popen` call is probably the call you want. Make sure to call `pclose` after the test is finished so that the child process is properly reaped.

**Edit** Linux man page mentioned adding "b" to the mode was possible for binary mode, but POSIX says anything other than "r" or "w" is undefined. Thanks to Dan Moulding for pointing this out.

```
FILE *f = popen("./vuln", "w");
fwrite(buf, size, count, f);
pclose(f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:34:15.760

没有任何结果。

让我强调一下我怀疑的问题。我管道的字符串在开头包含 a`\n`以确认易受攻击程序的“按 Enter 继续”。

我继续溢出的缓冲区被声明`char c[1024]`；现在我用超过 1100 个字节填充它。我不明白；有时有效，有时无效。摇摆不定的因素是我是否在 gdb 中（在 gdb 中会产生更好的结果）。但有时它也不会在那里溢出。由于这个原因，我真的相信这是关于我的缓冲区如何传输的外壳/终端设置的某种问题。但我不知道如何解决这个问题:(

我真的很感谢大家的帮助。但我没有收到一致的结果。我做了很多事情，也学到了很多粗略的材料，但我认为可能是时候放弃这种努力了。或者，至少等待更长的时间，直到有人给出答案。

ps安装了Expect，:)但我无法从其中接收溢出...

无论如何，我似乎需要 Expect，因为在管道完成工作后，我需要重新获得对流的控制。除了我不能让程序溢出这一事实之外，Expect 使这变得非常简单。

我发誓这与终端外壳设置有关，但我不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T22:47:45.287

如果 shell 正在读取`gets()`，它正在读取它的标准输入。

因此，在您的漏洞利用代码中，您需要生成一个适当的超长字符串。除非你在玩，否则你`expect`只需将超长缓冲区写入从你的漏洞利用程序连接到受害者标准输入的管道。您只需要确保您的超长字符串不包含任何换行符（CR 或 LF）。如果您使用管道，则可以避免终端设置和 control-J 用于 control-M 等的变幻莫测；管道是一种透明的 8 位传输机制。

因此，您的程序应该：

1.  创建管道 ( `pipe()`)。
2.  叉子。
3.  孩子：
    *   将管道的读取端连接到标准输入 ( `dup2()`)。
    *   关闭管道的读写端。
    *   执行受害者程序。
    *   如果执行受害者失败，则报告错误并退出。
4.  家长：
    *   关闭管道的读取端。
    *   生成字符串以溢出受害者的输入缓冲区。
    *   将字符串写入管道中的受害者。
5.  坐下来看烟花！

您可以使用`popen()`和`"w"`选项来简化此操作（因为父进程将要写入子进程）。

您可能需要考虑如何处理信号。再一次，不这样做更简单，但如果你在接收器（受害者）退出时写入管道，你会得到一个 SIGPIPE 信号，它将终止父级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:54:58.303

# 另一个更新

这是最奇怪的。

我实际上已经用 shellcode 环境变量的地址有效地覆盖了返回地址。

那是昨晚，奇怪的是，程序在环境变量结束后崩溃了，从来没有给我一个shell。shellcode 是手写的，并且可以工作（在一个空程序中，将 main 的返回地址更改为 shellcode 的地址并返回，只是为了测试目的，以确保 shellcode 工作）。在这个测试程序中，Main 返回到我的 SPARC shellcode 并生成一个 shell。

...所以.... idk 为什么它在新环境中不起作用。但那是我最小的问题。因为溢出很奇怪......

正如我在之前的帖子中所说，一段时间后我似乎无法重现溢出。所以，我想为什么不呢，让我们发送一个更大、更危险的 4000 字符缓冲区，其中充满垃圾“A”，就像@JonathanLeffler 推荐的那样，以确保段错误。好吧，让我们说奇怪的结果。

如果我发送的字符少于 3960 个，则不会出现溢出（WTF？！？！），尽管*早些时候*我可能会在仅发送大约 1100 个字符时出现溢出，这要少得多，并且较小的缓冲区会覆盖确切的返回地址的位置（当它工作时。**咳嗽*）

## 现在是最奇怪的部分！！！

这个“挑剔”的缓冲区似乎只针对特定长度进行段错误。但是我在发送大的 4000 字符缓冲区后尝试使用 gdb，并注意到一些奇怪的东西。好的，是的，它发生了段错误，但是有“保留区域”，包括我之前能够溢出的返回地址，不知何故没有受到伤害，你可以从[图像](http://s16.postimage.org/4l5u9g3c3/Screen_shot_2012_06_26_at_11_29_38_PM.png)中看到（**不要点击它**）阅读下一段以了解所有内容，所以你可以正常查看。我敢肯定，如果没有正确的理解，它看起来很乱。我制作的缓冲区的一部分不会影响我过去用较小的缓冲区影响的某些内存区域！这是如何或为什么发生的。我还不知道。我不知道这种行为有多规律。但我会试着找出答案。

该图像发生在距缓冲区起始地址大约 1000 个字节的位置。您可以看到“保留的内存段”，嵌入在我的缓冲区中的许多 0x41 之间（十六进制中的“A”）。实际上，地址 0xffbef4bc 保存了 0x0001136c 的返回地址，需要被覆盖，它是调用这个的函数的返回地址，'this one' = 保存有漏洞缓冲区的函数。由于 SPARC 中堆栈窗口的性质，我们无法写入**(**易受攻击的缓冲区所属的函数****)* * 的返回地址——该返回地址实际上低于缓冲区的地址，无法访问，因此我们必须覆盖返回我们上面的函数的地址。又名我们的来电者；）

无论如何，关键是我以前也能够使用较小的缓冲区溢出该返回地址。所以WTF弥补了这些差距！？！？？！更大的缓冲区不应该能够溢出这些，尤其是。如果较小的缓冲区可以（尽管不一致）..无论如何，这是图像。

[图片] [http://s16.postimage.org/4l5u9g3c3/Screen_shot_2012_06_26_at_11_29_38_PM.png](http://s16.postimage.org/4l5u9g3c3/Screen_shot_2012_06_26_at_11_29_38_PM.png)

# python - list_filters 的 Django raw_id_field 样式小部件

> ID：11198183
> 
> 赞同：1
> 
> 时间：2012-06-25T22:18:20.533
> 
> 标签：python, django, django-admin

在 Django 管理更改列表页面上呈现 list_filter 字段时是否有 raw_id_field 样式小部件可供使用？

当我将基于外键的字段添加到 Django modeladmin list_filter 时，Django 将关联表中的每一行呈现到选择框中的右侧面板中。如果该表很大（例如，如果它指向 User 表），这往往会显着减慢加载时间，因为 Django 会渲染数千行。即使在完成渲染之后，也很难在巨大的下拉列表中找到您的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:46:46.297

没有，但在 Django 1.4 中，list_filter 系统得到了扩展，因此您可以编写自己的自定义过滤器。看

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)

例如，限制显示的用户数量是微不足道的。制作 raw_id_fields 样式的过滤器会稍微复杂一些——您只需要覆盖过滤器模板，而不是显示链接列表，而是显示一个表单并提交按钮。

# distribution - 训练一类 SVM

> ID：11198185
> 
> 赞同：1
> 
> 时间：2012-06-25T22:18:22.210
> 
> 标签：distribution, svm, libsvm

我正在尝试使用 libsvm 实现来熟悉 1-class SVM。正如我所读到的，libsvm 的 1-class 任务中没有类标签。但是在读取没有标签列的数据文件时，总是会出现读取错误。我尝试标记我的玩具数据，然后使用 svm-train 测试结果模型，但准确度总是很糟糕，大约 50%。

我的问题是，如果我有一个带标签的数据集（例如，数百个高斯分布的 2d 点和其中的几个异常值），我如何使用这些数据训练 libsvm，以及如何估计结果模型的准确性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:59:04.053

1) LIBSVM (C/C++) 的一行训练集如下所示（称为稀疏数据格式）：

> 标签 1:value1 2:value2 .....

（每行以 '\n' 字符结束）

即使是一类情况，您*也必须提供标签栏；*只是它可以是任何数字。LIBSVM 在训练过程中会忽略它。这应该可以消除您的读取错误。

2）关于您对玩具数据的准确性，您是否对“nu”和“g”参数进行了*交叉验证？*这些是一类 SVM 模型的超参数。您可能还想摆弄内核类型。那 50% 是在训练集、测试集还是验证集上？

3）由于一类SVM本质上是做高维密度估计，所以训练集的所有点都应该落在超球面上或内部，它们都应该属于一个类。你可能想参考[这里](http://www.csie.nctu.edu.tw/~wjchu/Course/libsvm-2.88/FAQ.html#f424)。您必须找到一种方法来构建一个没有异常值的训练集，并将异常值作为测试点（也可能包含一些属于圈内的点）来估计模型的准确性。如果这不可能，您必须求助于其他异常值检测方法，例如聚类。好消息是文献中有强大的聚类算法。

4）您的数据集是二维的，因此首先绘制它们并了解数据集和异常值应该不难。

# vb.net - 使用 Visual Basic 更改 IP 地址

> ID：11198189
> 
> 赞同：0
> 
> 时间：2012-06-25T22:18:51.170
> 
> 标签：vb.net

请问如何使用 Visual Basic 更改 IP 地址？我无法在任何地方找到任何有用的东西，所以我只是想知道是否可以在这里获得一些帮助？

我不知道外部 IP 地址。我知道不能更改（我的 isp 有一个静态的。）我正在更改内部 IP 地址...例如从：192.168.1.150 更改为 10.0.0.125 -</p>

谢谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:21:40.040

当您上网时，您的 IP 地址是通过您的 ISP 租给您的 - 您不能只是“更改它”。如果您的 ISP 使用动态 IP 租用，您可以关闭路由器/调制解调器大约 5 分钟，然后重新连接 - 此时您将收到一个新 IP。

通过 VB 进行复制的唯一方法是断开用户与应用程序中基于调制解调器的服务的连接。但在这种情况下，我会冒险猜测单击“断开连接”按钮对用户来说是一个更简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:54:27.907

您可以使用一些 Windows 脚本。它有点乱，但您可以在 VB.Net 中创建脚本，将其写入您的硬盘驱动器，然后执行它。完成后，您可以删除脚本。

这是更改 IP 地址（和其他一些相关字段）的脚本示例：http: [//www.wincert.net/forum/topic/40-change-ip-configuration-via-vb-script/](http://www.wincert.net/forum/topic/40-change-ip-configuration-via-vb-script/)

然后，您将通过调用在 VB.Net 中执行它

```
Process.Start("<The path of your .vbs file here>") 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T04:36:01.400

您可能不需要编写任何脚本来执行此操作。而且您不需要 2 个网络适配器作为执行此操作的唯一方法。在 Windows 中，网络适配器可以同时分配多个 IP 地址。进入网络属性 ipv4 tcp/ip 设置高级。你可以放几个IP地址和掩码。因此，如果您有一台电脑但使用 2 个不同的网络，只需输入 2 个地址，然后连接的任何网络都可以正常使用。

如果您有一个像新路由器这样的网络小工具，并且它位于 192.168.0.200 上，并且您知道登录后它将被设置为 10.1.1.x，请为计算机分配 2 个 IP，例如 192.168.0.100，然后是 10.1.1.100。

# c# - C# 串行连接：获取引脚状态

> ID：11198194
> 
> 赞同：0
> 
> 时间：2012-06-25T22:19:27.730
> 
> 标签：c#, serial-port

我正在使用编解码器并尝试轮询 RS232 串行引脚 1（CD 高/低）的状态。我认为我拥有的代码是正确的，但我在猜测自己，并希望有人可以确认或纠正我。

根据编解码器的数据表，当通话处于活动状态时，引脚 1 应为高电平。我怀疑我做错了什么，因为在通话中我得到了假（低）的回报。这是一个 Windows 窗体应用程序，我正在使用 System.IO.Ports

```
 private void button4_Click(object sender, EventArgs e)
        {
            if (!serialPort1.IsOpen)
            {
                serialPort1.Open();
            }
            bool test = serialPort1.CDHolding;
              if (test == false)
              {
              MessageBox.Show("Pin low");
              }
              else
               {
                MessageBox.Show("Pin high");
               }
    } 
```

还有一种简单的方法可以显示引脚上的实际电压吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:23:34.977

这里真的没有太多我们可以告诉你你还不知道的事情。是[SerialPort.CDHolding](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.cdholding.aspx) “获取端口的载波检测线的状态。” 我将首先（以电子方式）验证引脚的状态，然后根据该属性告诉您的内容进行检查。我猜它告诉你正确的状态。

说到串口，我总是会仔细检查你的引脚；根据硬件和连接器的不同，它们可能非常不标准，而且很容易搞砸。

您询问是否显示引脚上的电压。你的意思是程序化？不，那是不可能的。那是数字输入线；一旦它到达 UART，它就是一个数字信号，你无法知道模拟电压。

就像一个额外的花絮一样，这个属性实际上只是一个调用 Win32 [GetCommModemStatus](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363258.aspx)函数的包装器，如果设置了第 7 位（十进制 128），则返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T22:25:31.563

您可以改用 .PinChanged 事件吗？还是您只需要在按下按钮时进行轮询？

# .net - 如何在具有 DDD 模式的 .NET 企业应用程序中正确定义异常策略？

> ID：11198196
> 
> 赞同：5
> 
> 时间：2012-06-25T22:19:40.367
> 
> 标签：.net, exception, domain-driven-design, enterprise

我正在使用 DDD 模式开发类似企业的项目。我的 C# 解决方案中有以下项目：

*   领域模型 - DLL 项目

*   WebUI - ASP.NET MVC3 项目

*   DesktopUI - WPF 项目

*   DAL - 实体框架代码优先

*   持久性 - SQL Server 数据库

这个项目并不大，但我正在尝试使用企业应用程序的所有良好实践。

我现在想定义的是异常策略，但我不确定如何处理。我可能应该使用企业库异常处理和日志记录块，但我不确定如何将其融入图片中。我试图在脑海中解决的一些具体场景如下：

*   如果用户在 WPF 应用程序中创建了新实体，并且单击了“保存”按钮，应如何报告和记录错误以防不同级别发生异常（例如，实体未根据域规则正确创建，或者存在尝试将新对象持久保存到数据库时出错）

*   用户尝试从数据库中检索未知实体（例如，通过在 URL 中指定未知实体 ID 从 WebUI）

我知道我可以定义自定义异常，但我不太确定在哪里以及如何。是否应该为每一层定义它们？我知道有包装异常的做法，但又不太确定如何最好地使用该模式。

我还应该为某个层中的每个错误创建一个自定义异常（例如，UserAlreadyExistInDatabaseException 用于尝试使用相同的电子邮件保存两个用户，以及 UnknownUserDatabaseException 如果尝试从 DB 获取未知用户），还是应该使用一种异常类型来处理多个层错误（例如 DatabaseException，然后用自定义属性或 Exception.Message 属性区分错误）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T00:28:05.727

我会远离 EntLib 异常处理和日志记录块，因为它们太复杂而无法配置和处理。您当然可以探索它们以了解如何解决这些类型的问题，但通常更容易推出自己的解决方案或使用 log4net 或 NLog 之类的东西进行日志记录。

就处理异常而言，表示层（WPF 或 ASP.NET）应捕获并解释应用程序服务层引发的异常。应用程序服务封装了您的领域，包括领域模型和数据访问层（DDD 中的存储库）。应用程序服务可以返回包含错误信息的结果对象，也可以从域或 DAL 传播异常。

如果您打算捕获它们以便对给定的异常类型执行特定的操作，则应该创建自定义异常类型。诸如此类的异常`UserAlreadyExistInDatabaseException`可能会有所帮助，因为应用程序服务可以捕获它并返回某种结果对象以由表示层解释，或者可以在表示层中捕获异常，然后通知用户。

日志记录可以在应用程序服务层或表示层或两者兼而有之。例如，应用程序服务可以从 DAL 捕获异常，记录它，并将其包装在表示层可以解释的另一个异常中。

> 用户尝试从数据库中检索未知实体

这可以通过多种方式处理。一种方法是应用服务返回一个空引用，表示层返回一个适当的消息给用户。或者，DAL 可以引发类似 EntityNotFoundException 的内容，可以在表示层捕获，同时向用户返回适当的消息。引发这样的异常对于 ASP.NET MVC 之类的东西可能是有益的，因为您可以创建一个操作过滤器，该过滤器在接收到所述类型的异常时返回通用响应。

# c# - 如何将关键属性映射到 EF CodeFirst 中继承实体上的不同列类型？

> ID：11198197
> 
> 赞同：0
> 
> 时间：2012-06-25T22:19:42.090
> 
> 标签：c#, oracle, ef-code-first, entity-framework-4.3, table-per-type

我正在尝试在 EF 4.3 CodeFirst 中为现有的 Oracle 数据库（我无法控制）实现 TPC 继承模型。我有几个子类型，每个子类型都映射到自己的表。不幸的是，一些键列是数据类型`number(18,0)`而不是`integer`. EF现在好像很讨厌我。

这是我的基类：

```
public abstract class Vehicle
{
    public virtual int Id { get; set;}
    public virtual string Color { get; set; }
    //more properties
} 
```

以下是一些示例子类型：

```
public class Car : Vehicle
{        
    //more properties
}

public class Truck : Vehicle
{
    //more properties
}

public class Motorcycle : Vehicle
{
    //more properties
} 
```

这是我的 DbContet：

```
public class VehicleDataContext : DbContext
{
    public DbSet<Vehicle> Vehicles { get; set; }
    public DbSet<Car> Cars { get; set; }
    public DbSet<Truck> Trucks { get; set; }
    public DbSet<Motorcycle> Motorcycles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Vehicle>().HasKey(x => x.Id);

        modelBuilder.Entity<Car>().Map(m => m.MapInheritedProperties());
        modelBuilder.Entity<Car>().Property(x => x.Id).HasColumnType("decimal");

        modelBuilder.Entity<Truck>().Map(m => m.MapInheritedProperties());
        modelBuilder.Entity<Truck>().Property(x => x.Id).HasColumnType("int");

        modelBuilder.Entity<Motorcycle>().Map(m => m.MapInheritedProperties());
        modelBuilder.Entity<Motorcycle>().Property(x => x.Id).HasColumnType("decimal");

        base.OnModelCreating(modelBuilder);
    }
} 
```

所以，我已经知道将`MapInheritedProperties`基类型和子类型的所有属性映射到一个表。我假设我必须告诉基地，`HasKey`这样 EF 才不会抱怨我`DbSet<Vehicle>`没有映射键。我希望能够假设我可以“告诉”每个实体如何映射自己的键的列类型，就像我在上面所做的那样。但我认为这还不够。

这是一个失败的测试：

```
[TestFixture]
public class when_retrieving_all_vehicles
{
    [Test]
    public void it_should_return_a_list_of_vehicles_regardless_of_type()
    {
        var dc = new VehicleDataContext();
        var vehicles = dc.Vehicles.ToList(); //throws exception here
        Assert.Greater(vehicles.Count, 0);
    }
} 
```

抛出的异常是：

> 概念侧属性“Id”已映射到类型为“decimal”的存储属性。如果概念侧属性映射到存储模型中的多个属性，请确保存储模型中的所有属性都具有相同的类型。

如上所述，我无法控制数据库及其类型。关键类型混合在一起很愚蠢，但“就是这样”。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:30:14.960

您无法通过映射来实现它。这首先是 EF 代码的限制。您只能将继承结构中的每个属性（包括键）映射一次。因此，您可以在继承树的所有实体中使用整数或小数，但不能混合使用。

顺便提一句。如果您尝试使用`int`整个`decimal`继承树，会发生什么？加载或持久化实体是否失败？如果不是，您可以简单地`decimal`对所有实体使用一个（如果它可以使用整个范围）。

# eclipse-plugin - Corona SDK 的 Lua 编辑器（Eclipse Indigo 插件）

> ID：11198204
> 
> 赞同：8
> 
> 时间：2012-06-25T22:20:45.930
> 
> 标签：eclipse-plugin, lua, coronasdk, eclipse-indigo

任何人都可以建议一个好的编辑器来专门用于 Corona SDK 的 Lua 脚本，或者帮助我解决我在尝试安装 eclipse 插件时遇到的错误。我想最好使用 Eclipse Indigo（64 位），但我在使用 Lua 插件时遇到了问题。我已将 lua 站点添加到 Eclipses 下载站点，但是当我尝试安装时，它说“无法在此环境中安装，因为它的过滤器不适用” 有人对此插件的该错误有任何了解吗？我已经搜索并找到了有关其他插件错误的信息，但修复和背后的原因似乎不适用于我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T18:47:59.890

我为 Eclipse 下载了错误的 lua 编辑器。LuaEclipse 是问题所在，所以我使用了 [http://www.eclipse.org/koneki/ldt/](http://www.eclipse.org/koneki/ldt/) 并且一切正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T01:48:05.510

[记事本++](http://notepad-plus-plus.org/)真的很有用。轻巧，有很多选择。

用于使用**Eclipse**

[http://flashapplications.de/?p=946](http://flashapplications.de/?p=946)

有一些**Corona 特定的 IDE**可用

[电晕项目经理](http://coronaprojectmanager.com)

[苹果酒](http://www.mydevelopersgames.com/CIDER/)

[电晕完成](http://coronacomplete.com/)

**其他编辑**

[TextMate](http://www.macromates.com) (Mac - 有一个 Corona 插件)

[BBEdit](http://itunes.apple.com/au/app/bbedit/id404009241?mt=12) (Mac)

[文本牧马人](http://itunes.apple.com/au/app/textwrangler/id404010395?mt=12)(Mac)

有很多可用的Lua**编辑器**

[http://www.wowwiki.com/Lua_editors](http://www.wowwiki.com/Lua_editors)

[http://lua-users.org/wiki/LuaEditorSupport](http://lua-users.org/wiki/LuaEditorSupport)

最后是一个您可能会觉得有用的链接

[http://producerism.com/blog/how-to-develop-in-corona-sdk-on-windows/](http://producerism.com/blog/how-to-develop-in-corona-sdk-on-windows/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T15:46:56.230

Zeus[编辑](http://www.zeusedit.com/lua.html)器支持 Lua。最新版本还增加了 Lua 调试器支持。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T06:22:57.107

要添加到 Satheesh 的列表中：[ZeroBrane Studio Lua IDE](http://studio.zerobrane.com)包括对 Corona SDK 的支持，并提供语法高亮、自动完成和调试支持。

# c - 叉到新的 cygwin 终端

> ID：11198205
> 
> 赞同：2
> 
> 时间：2012-06-25T22:20:46.443
> 
> 标签：c, cygwin, fork

我有这个分叉的程序，我想知道如何让它分叉到一个单独的终端，这样父母和孩子就会有自己的窗口并停止互相争斗。我正在尝试使用 cygwin 来实现这一点，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:44:01.767

一般的答案是这是不可能的。但是，它可以通过使用两个不同的程序来破解，一个执行 fork，然后子进程执行一个*可能*打开一个新窗口的新 shell，并让该 shell 运行第二个程序。

[或者，您可以使用ncurses](http://en.wikipedia.org/wiki/Ncurses)之类的东西将终端窗口拆分为两个单独的区域，并为每个进程使用一个区域。

# ruby - 选择相邻的兄弟元素而不干预非空白文本节点

> ID：11198208
> 
> 赞同：5
> 
> 时间：2012-06-25T22:21:08.853
> 
> 标签：ruby, xml, xpath, nokogiri

给定标记，如：

```
<p>
  <code>foo</code><code>bar</code>
  <code>jim</code> and then <code>jam</code>
</p> 
```

我需要选择前三个`<code>`——但不是最后一个。逻辑是“选择所有`code`具有前置或后置同级**元素**的元素，该元素也是`code`，除非存在一个或多个文本节点，它们之间具有非空白内容。

鉴于我使用的是 Nokogiri（它使用 libxml2），我只能使用 XPath 1.0 表达式。

尽管需要一个复杂的 XPath 表达式，但在 Nokogiri 文档上执行相同操作的 Ruby 代码/迭代也是可以接受的。

*请注意，CSS[相邻兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)会忽略非元素节点，因此选择`nokodoc.css('code + code')`会错误地选择最后一个`<code>`块。*

```
Nokogiri.XML('<r><a/><b/> and <c/></r>').css('* + *').map(&:name)
#=> ["b", "c"] 
```

* * *

**编辑**：更多测试用例，为清楚起见：

```
<section><ul>
  <li>Go to <code>N</code> and
      then <code>Y</code><code>Y</code><code>Y</code>.
  </li>
  <li>If you see <code>N</code> or <code>N</code> then…&lt;/li>
</ul>
<p>Elsewhere there might be: <code>N</code></p>
<p><code>N</code> across parents.</p>
<p>Then: <code>Y</code> <code>Y</code><code>Y</code> and <code>N</code>.</p>
<p><code>N</code><br/><code>N</code> elements interrupt, too.</p>
</section> 
```

以上`Y`都应该选择。不`N`应该选择任何一个。的内容`<code>`仅用于指示应该选择哪个：您可能不会使用内容来确定是否选择一个元素。

出现的上下文元素`<code>`是不相关的。它们可能出现在 中`<li>`，它们可能出现在 中`<p>`，它们可能出现在其他东西中。

我想`<code>`一次选择所有连续的运行。在一组 . 的中间有一个空格字符并不是一个错误`Y`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:07:42.400

**使用**：

```
//code
     [preceding-sibling::node()[1][self::code]
    or
      preceding-sibling::node()[1]
         [self::text()[not(normalize-space())]]
     and
      preceding-sibling::node()[2][self::code]
    or
     following-sibling::node()[1][self::code]
    or
      following-sibling::node()[1]
         [self::text()[not(normalize-space())]]
     and
      following-sibling::node()[2][self::code]
     ] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <xsl:template match="/">
      <xsl:copy-of select=
       "//code
             [preceding-sibling::node()[1][self::code]
            or
              preceding-sibling::node()[1]
                 [self::text()[not(normalize-space())]]
             and
              preceding-sibling::node()[2][self::code]
            or
             following-sibling::node()[1][self::code]
            or
              following-sibling::node()[1]
                 [self::text()[not(normalize-space())]]
             and
              following-sibling::node()[2][self::code]
             ]"/>
     </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<section><ul>
      <li>Go to <code>N</code> and
          then <code>Y</code><code>Y</code><code>Y</code>.
      </li>
      <li>If you see <code>N</code> or <code>N</code> then…&lt;/li>
    </ul>
    <p>Elsewhere there might be: <code>N</code></p>
    <p><code>N</code> across parents.</p>
    <p>Then: <code>Y</code> <code>Y</code><code>Y</code> and <code>N</code>.</p>
    <p><code>N</code><br/><code>N</code> elements interrupt, too.</p>
</section> 
```

**评估包含的 XPath 表达式，并将选定的节点复制到输出：**

```
<code>Y</code>
<code>Y</code>
<code>Y</code>
<code>Y</code>
<code>Y</code>
<code>Y</code> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T00:24:04.840

```
//code[
  (
    following-sibling::node()[1][self::code]
    or (
      following-sibling::node()[1][self::text() and normalize-space() = ""]
      and
      following-sibling::node()[2][self::code]
    )
  )
  or (
    preceding-sibling::node()[1][self::code]
    or (
      preceding-sibling::node()[1][self::text() and normalize-space() = ""]
      and
      preceding-sibling::node()[2][self::code]
    )
  )
] 
```

我*认为*这可以满足您的需求，尽管我不会声称您实际上想要使用它。

我假设文本节点总是合并在一起，这样就不会有两个相邻的节点，我相信通常是这种情况，但如果您事先进行 DOM 操作，则可能不会。我还假设元素之间不会有任何其他元素`code`，或者如果有它们会阻止选择，例如非空白文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T23:46:43.263

我认为这就是你想要的：

```
/p/code[not(preceding-sibling::text()[not(normalize-space(.)="")])] 
```

# java - Eclipse 控制台错误消息限制

> ID：11198215
> 
> 赞同：0
> 
> 时间：2012-06-25T22:21:48.890
> 
> 标签：java, eclipse

我正在使用 Eclipse IDE，控制台截断了我的错误消息。我想找到错误的根源，但它所说的只是“还有 5 个”。我怎样才能使eclipse显示所有错误消息？

谢谢！！

例如：

java.lang.RuntimeException: java.io.IOException:
     at com.quantcast.rmr.MRStep.start(MRStep.java:1281)
     at com.quantcast.rmr.MRFlow.job(MRFlow.java:669)
     at com.implicitlabs .rmr.Job.exec(Job.java:1481)
     在 com.implicitlabs.rmr.Job.startExecution(Job.java:492)
     在 com.implicitlabs.rmr.JobStartup.callStartup(JobStartup.java:38)
     在 com。 implicitlabs.rmr.Job.main(Job.java:422)
原因：java.io.IOException:
     at com.implicitlabs.rmr.Job.executeStep(Job.java:2878)
     at com.implicitlabs.rmr.Job.go (Job.java:1297)
     在 com.quantcast.rmr.MRStep.start(MRStep.java:1279)
     **... 还有 5 个**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:36:04.617

单击错误的属性，它应该显示整个文本或至少一个可以使用剪切和粘贴的字段

# jquery - 将变量传递给 jQuery ajax 成功或错误函数

> ID：11198220
> 
> 赞同：9
> 
> 时间：2012-06-25T22:22:18.740
> 
> 标签：jquery, ajax, json

我正在使用 JQuery $.ajax 遍历一组 JSON URL 并将结果下载到一个数组中。一些 URL 返回 404 - 我正在处理并显示为 div 消息。

但是，我似乎无法传递 URL，更准确地说，它总是只传递数组中的最后一个 URL。

我认为这是因为 ajax 是异步的并且需要更长的时间才能完成，但我不确定如何确保只有当前的 JSON url（或变量）显示在 SUCCESS 或 ERROR 上

我的代码：

```
 // For every URL loop through 'baseitems' array
 for (var i = 0; i < baseitems.length; i++) {

  // This is where I'm hoping to store the current URL as a variable to pass to the end-user on Success or Error
  var caturl = baseURL + "/" + baseitems[i];

  // Get the data via JSON
  $.ajax({
    type: "GET",
    url: caturl,
    dataType: "json",
    async: true, // set so that the variables caturl get updated below
    success: function (result) {
        // Success: store the object into catalog array
        cat.unshift(result);
        $('#showdata').prepend("Loaded: " + caturl + "</br>");  // still buggy here - probably async JSON issue
    },
    error: function (xhr, textStatus, error) {
        // Error: write out error
        console.log(xhr.statusText);
        console.log(textStatus);
        console.log(error);
        $('#showdata').prepend("ERROR : '" + error + "' trying to access: " + caturl + "</br>");  // still buggy here  - probably async JSON issue
    }
}); 
```

}

**更新：工作代码**

带有@charlietfl帮助的完整工作代码+一些不错的东西，例如成功/错误代码+加载的URL计数如下。感谢 charlietfl 和和事佬！

```
 $.ajax({
                    type: "GET",
                    url: caturl,
                    dataType: "json",
                    async: true, // set so that the variables caturl get updated below
                    beforeSend: function (jqXHR, settings) {
                        /* add url property and get value from settings (or from caturl)*/
                        jqXHR.url = settings.url;
                    },
                    success: function (result, textStatus, jqXHR) {
                        // Success: store the object into catalog array
                        var url = jqXHR.url;
                        cat.unshift(result);
                        $('#showdata').prepend("<font size=\"1\">Loading: " + url + " status: " + textStatus + "</font></br>");
                        successcount += 1;

                    },
                    /* error to be deprecated in jQuery 1.8 , superseded by "fail" */
                    error: function (jqXHR, textStatus, error) {
                        var url = jqXHR.url;
                        /* replace caturl with url in your append */
                        $('#showdata').prepend("<font size=\"1\" color=\"red\">ERROR : '" + error + "' trying to access: " + url + "</font></br>");
                    },
                    complete: function (jqXHR, textStatus) {
                        $('#showdata').prepend("<font size=\"3\">Loaded <b>" + successcount + "</b> of " + baseitems.length + " total catalogs.</font></br>")
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T23:16:00.887

这是一种方法。回调选项使`beforeSend`您可以访问 jqXHR 对象和 ajax 设置对象。

您将无法`caturl`在附加错误中使用，因为它不会与请求引发错误同步。

```
 $.ajax({
    /* url, data ...& other opts*/
    beforeSend:function( jqXHR, settings){
        /* add url property and get value from settings (or from caturl)*/
         jqXHR.url= settings.url;
   },
   /* error to be deprecated in jQuery 1.8 , superseded by "fail" */
   error: function(jqXHR, , textStatus, error){
       var url=jqXHR.url;
     /* replace caturl with url in your append */ 
     $('#showdata').prepend("ERROR : '" + error + "' trying to access: " + url + "</br>");
   } 
```

**编辑：基于 3rd 方 API 评论，重要的是要认识到直接取自[$.ajax API的以下内容](http://api.jquery.com/jQuery.ajax/)**

> 当从远程服务器检索数据时（只能使用脚本或 jsonp 数据类型），永远不会触发错误回调和全局事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:01:43.023

我建议只从服务器传回 URL，在伪 PHP 中它就像：

```
function function_called_by_ajax()
{
    //processing...

    echo json_encode(array('urlString'=>$urlString));

} 
```

现在，在您的 ajax 成功中，您可以获取字符串，类似于以下伪 js：

```
success: function (result) {
    var caturl = result.urlString;
    // Success: store the object into catalog array
    cat.unshift(result);
    $('#showdata').prepend("Loaded: " + caturl + "</br>");  
} 
```

# css - 使用 LESS CSS 定义变量变量

> ID：11198221
> 
> 赞同：45
> 
> 时间：2012-06-25T22:22:29.380
> 
> 标签：css, less

假设我在网站的各个页面上使用了三种不同的配色方案。每种颜色都定义了浅色、中色和深色，配色方案由正文中的一个类定义。假设“红色”配色方案是默认设置。像这样：

**颜色定义**：

```
@red-lt:   #121;
@red-md:   #232;
@red-dk:   #343;
@green-lt: #454;
@green-md: #565;
@green-dk: #676;
@blue-lt:  #787;
@blue-md:  #898;
@blue-dk:  #909; 
```

**基本默认样式示例**

```
body { background-color: @red-dk;
  #container { background-color: @red-md;
     p { color: @red-dk; }
  }
} 
```

**不同配色方案样式示例**

```
body.green { background-color: @green-dk;
  #container { background-color: @green-md;
     p { color: @green-dk; }
  }
} 
```

我想使用变量，这样我就不必为每个方案重新编写所有颜色变化，这样我就可以编写如下内容：

```
body.[color-var] { background-color: @[color-var]-dk;
  #container { background-color: @[color-var]-md;
     p { color: @[color-var]-dk; }
  }
} 
```

......但我不能完全围绕如何实现这一点。帮助…？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-25T22:35:00.923

使用[插值](http://lesscss.org/#-string-interpolation)和[转义](http://lesscss.org/#-escaping)，选择器中的括号和[参数混合](http://lesscss.org/#-parametric-mixins)来获得所需的效果：

*   **动态变量**[插值](http://lesscss.org/#-string-interpolation)：在一个字符串中，被`"@{variable}"`替换为变量的值。它们也可以嵌套：给定`@{@{var}-foo}`and `@var: bar;`，结果是`"barfoo"`。
    结果值被引用。要删除这些引号，请添加前缀`~`。
*   **通过[Selector 插值的](http://lesscss.org/#-selector-interpolation)**动态选择**器：`body.@{var}`变成`body.bar`.**

 **例子：

```
@red-md:   #232;
@red-dk:   #343;

.setColor(@color) {
    body.@{color} { background-color: ~"@{@{color}-dk}";
        #container { background-color: ~"@{@{color}-md}";
         p { color: ~"@{@{color}-md}"; }
      }
    }
}
.setColor(~"red"); // Escape to prevent "red" turning "#FF0000"
//.setColor(~"blue"); etc.. 
```

变成：

```
body.red {
  background-color: #334433;
}
body.red #container {
  background-color: #223322;
}
body.red #container p {
  color: #223322;
} 
```

注意：最初写答案时，选择器插值不存在。如果您使用的是旧的 LESS 编译器（在 LESS 1.3.1a 之前），请参阅解决方案的先前版本。LESS 1.4.0 将放弃对旧方法的支持。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-25T23:35:23.847

[如果这些值真的遵循这样的可预测格式，那么参数 mixin](http://lesscss.org/#-parametric-mixins)似乎是一个完美的案例：

较少的：

```
@red:   #232;
@green: #565;
@blue:  #898;

.theme (@color) {
  background-color: @color - #111;
  #container {
    background-color: @color;
    p { color: @color + #111; }
  }
}

body.red {
  .theme(@red);
} 
```

编译的CSS：

```
body.red{background-color:#112211;}
body.red #container{background-color:#223322;}
body.red #container p{color:#334433;} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-22T20:17:37.457

我知道这个问题已经很老了，但是对于那些来到这篇文章的人来说，我的回答可能会有所帮助

我不太确定你想用什么，但我的建议之一是基于@ScottS 的回答。在我的现实世界中，我需要创建一个网络应用程序，它会显示几个品牌，每个品牌都有自己的文字颜色、背景等......所以我开始在 LESS 中寻找一种方法来完成这个，我可以在 SASS 上轻松完成，结果如下：

## 较少的

```
// Code from Seven Phase Max
// ............................................................
// .for
.for(@i, @n) {.-each(@i)}
.for(@n)     when (isnumber(@n)) {.for(1, @n)}
.for(@i, @n) when not (@i = @n)  {
    .for((@i + (@n - @i) / abs(@n - @i)), @n);
}

// ............................................................
// .for-each

.for(@array)   when (default()) {.for-impl_(length(@array))}
.for-impl_(@i) when (@i > 1)    {.for-impl_((@i - 1))}
.for-impl_(@i)                  {.-each(extract(@array, @i))}

// Brands
@dodge : "dodge";
@ford : "ford";
@chev : "chev";

// Colors
@dodge-color : "#fff";
@ford-color : "#000";
@chev-color : "#ff0";

// Setting variables and escaping than
@brands: ~"dodge" ~"ford" ~"chev";

// Define our variable   
.define(@var) {
  @brand-color: '@{var}-color';
}

// Starting the mixin
.color() {
    // Generating the loop to each brand
    .for(@brands); .-each(@name) {
        // After loop happens, it checks what brand is being called
        .define(@name);
         // When the brand is found, match the selector and color
        .brand-@{name} & {
            color: @@brand-color;
        }
    }
}

.carColor {
    .color();
} 
```

结果将是：

## CSS

```
.brand-dodge .carColor {
    color: "#fff";
}
.brand-ford .carColor {
    color: "#000";
}
.brand-chev .carColor {
    color: "#ff0";
} 
```

这非常棘手，我不得不使用几个元素来获得我需要的东西，首先使用了一组由 Seven Phase Max 提供的 mixin，你可以在[这里](https://github.com/seven-phases-max/less.curious/blob/master/src/for.less)找到它，然后，@ScottS 的答案是我的难题中缺少的部分...希望这可以帮助您和其他需要创建一组变量以成为另一个变量的一部分并创建更具动态性的更少文件的人。

您可以复制我的整个代码并在[http://lesstester.com/进行测试](http://lesstester.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-02T22:01:16.657

尝试这个

```
@red-lt:   #121;
@red-md:   #232;
@red-dk:   #343;
@green-lt: #454;
@green-md: #565;
@green-dk: #676;
@blue-lt:  #787;
@blue-md:  #898;
@blue-dk:  #909;

@color: 'red-lt';

div{
background: @@color;
border: 1px solid lighten(@@color,20%);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T23:00:29.720

据我所知，LESS 不支持*变量名称。*但是，您可以以更语义化的方式重组您的声明：

```
/* declare palette */
@red-lt:   #121; 
@red-md:   #232; 
@red-dk:   #343; 
@green-lt: #454; 
@green-md: #565; 
@green-dk: #676; 
@blue-lt:  #787; 
@blue-md:  #898; 
@blue-dk:  #909; 

/* declare variables based on palette colors */
@lt: @red-lt;
@md: @red-md;
@dk: @red-dk;

/* ...and only use them for main declarations */
body { background-color: @dk;        
  #container { background-color: @md;        
     p { color: @dk; }        
  }        
} 
```

通过避免显式的颜色引用，这应该可以让您在调色板之间非常轻松地切换。**

# ajax - Jquery Ajax 加载/发布

> ID：11198224
> 
> 赞同：0
> 
> 时间：2012-06-25T22:22:48.770
> 
> 标签：ajax, jquery

我试图让`.load`方法发布到页面，然后回显发布的内容以查看它是否有效，但我无法让它工作。我告诉我该变量未定义，这就是我所拥有的：

教师.php：

```
<?php
echo $POST['class']; 
```

JS：

```
$('#test').load('teacher.php', {class: 'test'}); 
```

一旦点击某些东西就会触发。

`#test`是`<div>`我希望将数据发布到的。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:29:57.237

它`$_POST`不是`$POST`. 不知道这是否是一个错字，但这也会产生一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:32:18.137

大多数时候，像这样的问题是由于AJAX的**异步性造成的。**`.post()`除非请求-响应的 AJAX 往返行程已经完成，否则您通过 AJAX（带有、`.load()`、`.ajax()`、 ）加载的所有内容`.get()`都不“存在”。

请务必在回调函数中“使用”您通过 AJAX 加载的内容（HTML 位、JSON 响应……）*，该回调函数*在 AJAX 请求*成功*时调用。

例如，假设我的页面`ajax.php`返回此字符串：`<div id='ajaxdiv'>hello!</div>`，我们想将这个（HTML）字符串加载到`#mydiv`：

```
$("#mydiv").load("ajax.php");
console.log($("#mydiv #ajaxdiv")); <- undefined 
```

它不起作用，因为无论请求是否完成，代码都会继续。反而：

```
$("#mydiv").load("ajax.php", function () { console.log($("#mydiv #ajaxdiv"));}); 
```

之所以有效，是因为 JQuery 确保仅在请求完成时才使用*回调函数。*（您也可以添加类似 your 的参数`{class: test}`，只需将它们放在 URL 和回调函数之间）。

编辑：使用 $_POST 而不是 $POST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:36:42.863

如果您只是尝试在单击具有 id 的`test`内容时将信息从 jQuery 发布到 PHP 文件，请执行以下操作：

教师.php：

```
<?php
    echo $_POST['class'];
?> 
```

JS：

```
$('#test').click(function() {
    $.post('teacher.php', {class: 'test'},
        function(output) {
            //output = what is echoed from the php file.
            alert(output);
        );
}); 
```

# jquery - 如何在一个步骤中向 jQuery 添加可链接的函数？

> ID：11198226
> 
> 赞同：0
> 
> 时间：2012-06-25T22:22:50.653
> 
> 标签：jquery, jquery-plugins, prototype

我添加了以下函数，以便可以向后迭代一些集合：

```
jQuery.reverseEach = function (object, callback, args) {
    var reversed = $(object).get().reverse();
    return $(reversed).each(callback, args);
}; 
```

如果您这样称呼它，效果会很好：

```
$.reverseEach($('#selectedSortItems option:selected'), function() {
    $(this).insertAfter($(this).next());
}); 
```

但是，我想变得光滑并使其可链接，因为我喜欢我的语法糖。我在 jQuery 的原型上添加了对原始 reverseEach 函数的引用：

```
jQuery.prototype.reverseEach = function(callback, args) {
    return jQuery.reverseEach(this, callback, args);
}; 
```

现在我可以这样称呼它：

```
$('#selectedSortItems option:selected').reverseEach(function () {
    $(this).insertAfter($(this).next());
}); 
```

但是，我认为 jQuery.fn.extend 函数只需一步即可完成相同的操作，而无需引用原型。我尝试使用 jQuery.fn.extend 函数，如下所示：

```
jQuery.fn.extend({
    reverseEach: function(object, callback, args) {
        var reversed = $(object).get().reverse();
        return $(reversed).each(callback, args);
    }
}); 
```

但是，每当我以这种方式运行链接方法时，都会出现以下错误：无法获取属性“调用”的值：对象为空或未定义。

jQuery.fn.extend 方法我做错了什么？我采取了完全错误的方法，还是我只是错过了一些简单的东西？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:28:34.960

您不需要访问您定义的原型`$.fn`：

```
(function($){
  $.fn.reverseEach = function(callback) {
     return $(this.get().reverse()).each(callback);
  };
})(jQuery); 
```

# xcode - 映射上的CoreData重命名关系

> ID：11198227
> 
> 赞同：2
> 
> 时间：2012-06-25T22:22:54.353
> 
> 标签：xcode, cocoa, core-data, osx-snow-leopard

我有两个不同版本的 coredata 模型。我改变的只是关系的名称。

但是使用简单的映射模型来重命名它似乎是不可能的！

假设我有实体 Foo 和 Bar，从 Foo 到 Bar 的一对多关系称为“mane”，从 Bar 到 Foo 的反向关系称为“padme”。我想把“padme”改成“hum”。

在**映射模型检查器**中，我有：

```
Key Path:     $source.padme
Mapping Name: FooToFoo 
```

在我的**关系映射**中：

```
Destination Relationship: hum
Value expression:
FUNCTION(
  $manager,
  "destinationInstancesForEntityMappingNamed:sourceInstances:" ,
  "FooToFoo",
  $source.padme
) 
```

有什么想法吗？

# git - Git - 多个用户使用相同的工作目录：.git 元文件中的权限问题

> ID：11198232
> 
> 赞同：17
> 
> 时间：2012-06-25T22:23:08.440
> 
> 标签：git, deployment, permissions

**问题：**当多个用户可以访问同一个工作目录时，如果`git`执行任何操作，可能会在元数据中出现权限问题。

***免责声明**：在你责备我之前——我意识到共享一个工作目录与 Git 所代表的背道而驰，而且我不是在谈论在这个共享目录中做除了只读操作之外的任何事情——我们在我们自己的本地存储库中完成所有工作.*

*我愿意接受有关另一种方法来做我们正在尝试做的事情的建议，因为我们的方法肯定不是最佳实践，但我不确定这种对话是否对其他人有用。所以现在让我提供一些关于我们为什么这样做的细节：*

我们的团队中有几位构建大师。我们部署到 Linux 服务器，并在那里进行构建，构建脚本直接从 Git 中提取。我们目前无法使用 CI（例如 Jenkins/cruisecontrol），因此我们有一个存储库，我们可以从中签出并进行 QA 构建。

作为脚本的一部分，我们执行了一些 git 操作。这包括提交的一些标记（东西被标记为 QA-current、QA-previous 等......）。所以我想我们实际上并不是完全只读的。由于构建脚本的性质，我们`sudo`以普通用户的身份运行它（我们称该用户为 DevAdmin）。我意识到这可能是一种不好的做法，并且可能是痛苦的根源，因为它迫使我们使用共享的 repo 结帐。

这一切都很好，如果我们在那个工作目录中总是被 sudo'ed。问题是，有时，我们中的一个人会`git pull`意外地做一个或类似的事情，而不会被 sudo'ed 为 DevAdmin。因此，其中的大多数文件`.git`都归 DevAdmin（执行初始克隆）所有，但每当我们这样做时，我们最终`.git/objects`都会得到包含特定用户拥有的文件的 dir。这些被创建为组不可写。例如，我还注意到`ORIG_HEAD`所有权错误。因此，当我们尝试作为 DevAdmin 做某事时，我们会遇到问题。

我们能做些什么来解决这个问题吗？现在，我们必须认识到它已经发生，然后让服务器管理员`chown .git`返回 DevAdmin。或者让用户删除有问题的元文件，或者至少`chmod`将它们删除为组可写的。这一切似乎都很糟糕。

我考虑了几个不涉及显着改变我们的构建和维护过程的选项：

如果我们删除了组写入权限`.git`并将其限制为 DevAdmin，那会阻止这种情况再次发生吗？这似乎是最直接的选择。

或者有没有办法让`.gi`t 组中的所有内容都是可写的，即使它是新创建的？这似乎是从麻烦中问出来的。

我还缺少其他明显的东西吗？我意识到最好的办法可能是改变我们的流程，以便用户可以在他们自己的仓库中工作，但在商业环境中，仓库可能会变得非常大（罐子还没有分离出来，很多二进制文件等...)，我们不能为每个人的帐户提供多 GB 的存储库。此外，我们的系统管理员在更改他们的流程以允许它之前还有很多工作要做。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-25T23:38:59.513

有[很多方法](https://serverfault.com/questions/26954/how-do-i-share-a-git-repository-with-multiple-users-on-a-machine)可以解决这个问题。就个人而言，我会在您现有的存储库中推荐以下内容：

```
# Create a group named "gitshare" that will share the repository.
sudo groupadd gitshare

# Add yourself and as many others as you want to the group.
sudo adduser "$LOGNAME" gitshare

# Everything else needs to run from the top level of your Git repository.
cd /path/to/repository

# Add group permissions for *new* modifications to repository.
git init --shared=group

# Fix permissions for existing repository objects.
chown -R :gitshare "$PWD"
chmod -R g+swX "$PWD" 
```

显然，您需要确保用户一直具有到您的存储库的目录遍历权限（例如，用户私有目录可能会导致问题），并且所有需要访问的团队成员都属于存储库的共享组。但是，在此初始设置之后，它应该“正常工作”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-21T05:02:58.453

我刚遇到这个问题，花了几个小时才找到解决方案，因为它是如此简单。我几乎尝试了我在 CodeGnome 提供的另一个链接上看到的所有内容。

我正在使用 Centos 6.x，解决方案是更改用户的 umask……这要求我们对每个帐户都这样做……我们只有 2 个在同一个目录上工作。没那么痛。

对我有用的解决方案是这个，无需更改服务器的配置： [http ://www.avajava.com/tutorials/lessons/how-do-i-set-the-default-file-and-directory-权限.html](http://www.avajava.com/tutorials/lessons/how-do-i-set-the-default-file-and-directory-permissions.html)

如果 /home/user 目录中不存在 .bashrc 文件，就像我的情况一样，您只需从骨架中复制 /ect/skel 中的文件，然后在添加后将其复制到您的主（用户）目录在文件末尾：

```
umask 002 
```

这为用户提供了组中其他人创建的新文件夹的 chmod 775。当然，一旦这个项目完成，不再是在测试环境中，我们将默认设置回 chmod 755 (umask 022)。这不仅给了 Git 覆盖的权限，而且还可以写入上传到 sFTP 上的文件，而不会出现权限被拒绝的问题。.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-19T20:04:56.763

9 年后，当我在 Google 上搜索时，我来到了这里，我想我为我的特定用例想出了一个新颖的解决方案。

* * *

**解决方案**：在远程仓库中，我们创建了一个钩子，该钩子将授予该组的写入和执行权限。钩子位于远程 repo 的目录中，在该`hooks`目录下并命名`post-receive`（没有文件扩展名；我们必须手动创建文件并具有执行权限）。我们将它创建为一个`bash`看起来像这样的脚本：

```
#!/bin/sh
chmod -R g+rwx /path/to/remote/repo 
```

所有涉及的用户都属于同一组，并且 git 挂钩以执行推送的用户身份运行。因此，该用户基本上更改了*他们*有权访问的文件，从而允许组中的其他任何人都可以访问。

* * *

**情况**：在工作中，我们有一个包含数十年程序的文件夹，这些程序会定期更新和调整。我们想要版本控制，所以我们设置了一个遥控器（尽管在同一台机器上），我们`git init`编辑了有问题的文件夹并将其指向遥控器。我们中更喜欢冒险的人希望将 repo 克隆到我们的笔记本电脑并在那里处理代码库，然后推送更改，但我们希望不那么冒险的人不必获取/拉取。repo 与原始代码库位于同一台机器上，因此我们制作了一个 git 钩子，它会自动传播更改。

服务器所有者对权限非常严格，导致我们的（共享）组不会自动获得写入权限的 umask 策略。我们也不是 sudoers，所以我们不能强迫它工作（可以这么说）。

“**陷阱**”：

*   如果您已经处于由于文件权限而无法推送的情况，请让每个用户授予权限 ( `chmod -R g+rwx /path/to/remote/repo`)。他们会因为他们无权访问的文件而收到错误，但这很好。一旦每个人都这样做了，你应该很高兴:)
*   这与 OP 无关，但在我们的情况下，我们在本地克隆中使用了 fetch+pull 钩子，然后还更新了对克隆`.git`目录内容的权限。我们最初忘记了最后一部分：|

**免责声明**：我不是这方面的专家——安全、Linux 或 git。我知道*足以*让它在我所拥有的范围内工作，但我确信有更好的方法。

* * *

希望这对其他人有所帮助，如果我有任何术语错误，请原谅！

# android - 从通知管理器使用 Intent.FLAG_ACTIVITY_CLEAR_TOP 一次后按 Home 时，Android 总是返回到第一个 Activity

> ID：11198238
> 
> 赞同：1
> 
> 时间：2012-06-25T22:23:45.147
> 
> 标签：android, android-intent, android-activity, android-notifications

我有一个非常烦人的问题，我一直在玩所有的 flags/launchMode 组合，没有任何运气。希望有人可以帮助我:-)

在我的 android 应用程序中，我必须进行活动 A 和 B。

对于流量

> A -> B -> 按 Home -> 返回应用

当用户返回时显示活动 B，这正是我所期望的。

现在，我有一个通知会打开 Activity A，无论之前的活动堆栈是什么。

为此，当从我使用的通知中调用意图时

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

所以现在的流程

```
A -> B -> press Home -> Receive a notification -> open it 
```

显示活动 A，这也是我所期望的。

问题是，从现在开始（直到我终止应用程序），如果我返回第一个流程，即使当我按下 Home 时活动 B 位于堆栈顶部，活动 A 也会始终显示...

我猜是因为我给了 Activity A flag `Intent.FLAG_ACTIVITY_CLEAR_TOP`，所以每次应用程序返回时它都会不断清除堆栈。

有什么方法可以撤消这个标志设置或其他东西，并让两个流程都按我的预期工作？

谢谢，

格言

# ruby - 用 Ruby 解析 XML

> ID：11198239
> 
> 赞同：54
> 
> 时间：2012-06-25T22:23:49.487
> 
> 标签：ruby, xml-parsing

我对使用 XML 很陌生，但我的腿上刚好有一个需求。我得到了一个通常的（对我来说）XML 格式。标签中有冒号。

```
<THING1:things type="Container">
  <PART1:Id type="Property">1234</PART1:Id>
  <PART1:Name type="Property">The Name</PART1:Name>
</THING1:things> 
```

它是一个大文件，它的内容远不止于此，但我希望这种格式对某些人来说是熟悉的。有谁知道处理这种 XML 文档的方法？

我宁愿不只是写一种蛮力的方式来解析文本，但我似乎无法在 REXML 或 Hpricot 方面取得任何进展，我怀疑这是由于这些不寻常的标签。

我的红宝石代码：

```
 require 'hpricot'
    xml = File.open( "myfile.xml" )

    doc = Hpricot::XML( xml )

   (doc/:things).each do |thg|
     [ 'Id', 'Name' ].each do |el|
       puts "#{el}: #{thg.at(el).innerHTML}"
     end
   end 
```

...刚刚从：[http ://railstips.org/blog/archives/2006/12/09/parsing-xml-with-hpricot/](http://railstips.org/blog/archives/2006/12/09/parsing-xml-with-hpricot/)

我想我可以从这里找出一些东西，但是这段代码什么也没返回。它不会出错。它只是返回。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-06-27T05:29:08.417

正如@pguardiario 所提到的，[Nokogiri](http://nokogiri.org)是事实上的 XML 和 HTML 解析库。如果你想在你的例子中打印出`Id`and`Name`值，你可以这样做：

```
require 'nokogiri'

xml_str = <<EOF
<THING1:things type="Container">
  <PART1:Id type="Property">1234</PART1:Id>
  <PART1:Name type="Property">The Name</PART1:Name>
</THING1:things>
EOF

doc = Nokogiri::XML(xml_str)

thing = doc.at_xpath('//things')
puts "ID   = " + thing.at_xpath('//Id').content
puts "Name = " + thing.at_xpath('//Name').content 
```

几点注意事项：

*   `at_xpath`是为了匹配一件事。如果你知道你有多个项目，你想使用它`xpath`。
*   根据您的文档，命名空间可能会出现问题，因此调用`doc.remove_namespaces!`会有所帮助（请参阅[此答案](https://stackoverflow.com/a/3533784/73492)以进行简短讨论）。
*   您可以使用这些`css`方法，而不是`xpath`如果您对这些方法更满意。
*   一定要玩弄这个`irb`或`pry`调查方法。

## 资源

*   [解析 HTML/XML 文档](http://nokogiri.org/tutorials/parsing_an_html_xml_document.html)
*   [Nokogiri 入门](https://www.engineyard.com/blog/getting-started-with-nokogiri)

## 更新

要处理多个项目，您需要一个根元素，并且需要`//`在`xpath`查询中删除 。

```
require 'nokogiri'

xml_str = <<EOF
<root>
  <THING1:things type="Container">
    <PART1:Id type="Property">1234</PART1:Id>
    <PART1:Name type="Property">The Name1</PART1:Name>
  </THING1:things>
  <THING2:things type="Container">
    <PART2:Id type="Property">2234</PART2:Id>
    <PART2:Name type="Property">The Name2</PART2:Name>
  </THING2:things>
</root>
EOF

doc = Nokogiri::XML(xml_str)
doc.xpath('//things').each do |thing|
  puts "ID   = " + thing.at_xpath('Id').content
  puts "Name = " + thing.at_xpath('Name').content
end 
```

这会给你：

```
Id   = 1234
Name = The Name1

ID   = 2234
Name = The Name2 
```

如果您更熟悉 CSS 选择器，则可以使用这段几乎相同的代码：

```
doc.css('things').each do |thing|
  puts "ID   = " + thing.at_css('Id').content
  puts "Name = " + thing.at_css('Name').content
end 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2016-05-17T21:48:19.273

如果在 Rails 环境中，`Hash`对象被扩展并且可以利用该方法`from_xml`：

```
xml = File.open("myfile.xml")
data = Hash.from_xml(xml) 
```

# html - Magento 模板/布局如何更改产品视图

> ID：11198245
> 
> 赞同：-1
> 
> 时间：2012-06-25T22:24:24.230
> 
> 标签：html, css, magento, layout

> **可能重复：**
> [查明magento 1.6.2中两个页面之间的差异和更改](https://stackoverflow.com/questions/11126112/pinpointing-the-difference-and-changes-made-between-two-pages-in-magento-1-6-2)

[http://dokha.co/index.php/shisha-tobacco/al-fakher-shisha-tobacco-108.html](http://dokha.co/index.php/shisha-tobacco/al-fakher-shisha-tobacco-108.html) 从上面的链接可以看出，产品页面在某种程度上是杂乱无章的。

我在下面的萤火虫中做了一些修改，并截图了。谁能建议如何使这些更改生效？

![在此处输入图像描述](../Images/38f08cee38f92e0e2751432565e37db3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:16:05.257

对您的页面进行 css 更改。请在 skin/frontend/yourfolder/css/custom.css 中创建一个 custom.css 文件，并添加您在浏览器中创建的样式。

就个人而言，我使用 Google Chrome 浏览器对页面进行更改，然后复制到自定义的 .css 文件中。最好不要替换默认的 .css，而是使用自定义版本，这样您就有了原始文件的版本。

希望能帮助到你。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:31:47.390

您正在尝试向上移动“选择风味”块？

查看源并删除 DOM 节点`<div class="clearer"></div>`。我使用谷歌 Chrome 浏览器，因为这样做很容易。我右键单击**Select a Flavor**然后选择 Inspect Element。在下部窗格中，我向上导航到更清晰的块并将其删除。

# .net - 使用 AfterTargets 的 MSBuild 任务在转换后加密 web.config

> ID：11198252
> 
> 赞同：3
> 
> 时间：2012-06-25T22:25:01.827
> 
> 标签：.net, msbuild, web-config

我是 MSBuild 的新手，我试图在我的项目中设置一个 MSBuildSettings.xml 文件，通过项目首选项中的“构建后事件命令行”选项调用，它执行 3 个特定任务。

```
$(MSBuildBinPath)\msbuild.exe "$(ProjectDir)MSBuild\MSBuildSettings.xml" 
```

MSBuildSettings 执行 3 个特定任务。我的前 2 个任务（下面的“YUI”和“LESS”）运行良好。我要添加的新任务（“加密”）是在转换发生后加密 web.config。

我正在使用一个结构如下的 xml 文件：

```
<Project DefaultTargets="YUI;LESS;Encrypt;">
    ...
    <Target Name="YUI">...</Target>

    <Target Name="LESS" DependsOnTargets="YUI">...</Target>

    <Target Name="Encrypt" AfterTargets="CopyAllFilesToSingleFolderForPackage">
        <Exec Command="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -pef &quot;connectionStrings&quot; $(MSBuildProjectDirectory)\..\obj\Release\Package\PackageTmp -prov &quot;MyProtectedDataProvider&quot;" />
    </Target>
</Project 
```

我基本上试图通过命令行使用 aspnet_regiis 加密 connectionStrings 部分。（我也定义了自己的 Provider 并在工作。）我确实觉得有点奇怪，我正在尝试修改 PackageTmp 文件夹中的 web.config，但据我所知，这是转换后的 web 之前的最终位置.config 已部署（我显然不想更新项目中的原始 web.config 文件）。我不认为命令/执行有什么问题，因为它是它的时机。我根本不知道如何使第三步仅在发生转换后执行。

我已启用构建输出的详细信息视图选项，并通过 Microsoft.Web.Publishing.targets 文件尝试提出一个目标，我可以使用该目标仅在转换后调用我的 web.config 加密步骤已经发生，但无论我尝试什么 AfterTargets，我似乎总是得到：

```
The target "whatever" does not exist in the project. 
```

我试过 PipelinePreDeployCopyAllFilesToOneFolder、TransformWebConfig、PipelineTransformPhase、CopyAllFilesToSingleFolderForPackage 等。

附加说明：我了解 web.config 仅在发布时进行转换（并且我正在使用文件系统选项进行发布）。

这也是普通的 MSBuild（没有 TFS 团队构建或类似的东西）。

对于加密 web.config 部分的转换后步骤的任何附加或替代选项也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:43:14.513

我最终只使用了具有以下结构的 *.wpp.targets 文件：

```
<Project xmlns="http://schemas.microsoft.com/developer/MsBuild/2003">
    <Target Name="AfterBuild">
        ... My YUI steps and my LESS steps ...
    </Target>
    <Target Name="Encrypt" AfterTargets="CopyAllFilesToSingleFolderForPackage">
        ... My web.config encrypt steps ...
    </Target>
</Project> 
```

老实说，我并不完全理解第一步（AfterBuild）命名背后的原因，它只是自动知道何时运行。我真的宁愿拥有自己的名字和明确的 AfterTargets 或 BeforeTargets 之类的东西，但我对这种方法没有任何运气。带有 AfterTargets 的第二个目标对我来说很有意义。

但无论如何，它有效。现在一切都在一个 wpp.targets 文件中，并且似乎工作得很好。每次对 wpp.targets 文件进行更改时都必须卸载/重新加载项目文件，这有点痛苦——这太傻了。

# c++ - 如何通过返回参数来编写c++函数？

> ID：11198258
> 
> 赞同：-8
> 
> 时间：2012-06-25T22:25:44.570
> 
> 标签：c++

在弄清楚如何编写函数和返回参数方面需要帮助。写了下面的问题并从解决方案手册中回答，虽然很困惑，但不确定如何编写函数:(

这是我尝试过的：

```
#include <iostream> 
using namespace std; 
char Answer; 

void max(); 

void main () { 
    int max(int num1, int num2) { 
        if (num1 > num2) 
            return num1; 
        else 
            return num2; 
    } 

    print(); 
    system("pause"); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:35:24.333

这个问题有几个问题。在您给出的答案中有 3 个参数（int nb1，nb2，nb3），但问题是有两个。如果这是 C++，每个标识符之前也应该有一个 int，这是 C++ 吗？此外，如果参数相等（例如 max(6, 6)），也没有指定要做什么，尽管这可能并不重要。这是我要做的：

```
int max(int nb1, int nb2)
{
 if(b1 > b2)//this could be b1 >= b2, I think that's what your solution manual has
    return b1;
 else
    return b2;
} 
```

* * *

编辑回应评论：

鉴于您到目前为止所做的事情，这就是我要改变以使事情正常进行。以下有一些你应该尽量避免的事情

1.  应该使用 int main() 和 return 0 而不是 void main()
2.  不应该使用 system("pause") 而是您可以等待用户按 Enter

但似乎你有足够的头脑来解决上述两个问题:-)
你有打印你应该使用的函数 cout << "text goes here" << endl; 在 C++ 中编程时（C 使用 printf）。我猜您对输入进行了硬编码，因此将 num1 和 num2 的值设置为要比较的两个数字。

```
#include <iostream>
using namespace std; 

int max(int nb1, int nb2)
{
        if(nb1 > nb2)
                return nb1;
        else
                return nb2; 
}

void main()
{
        int num1 = 6;//put one number to be compared here
        int num2 = 8;//put second number to be compared here
        int result = max(num1, num2)
        cout << result << endl;
        system("pause"); 
} 
```

# android - 如何阻止特定的拨出电话

> ID：11198259
> 
> 赞同：0
> 
> 时间：2012-06-25T22:25:53.763
> 
> 标签：android

我想阻止数据库中的特定电话号码

我在用户拨打的号码和内存中的号码之间进行比较。如果它们相等，我会阻止通话。

我的代码：

```
public void onReceive(Context context, Intent intent) {

    PlaceDataSQL placeDataSQL =new PlaceDataSQL(context);
    ArrayList<String> getUsersPhoneNumbers= placeDataSQL.getUsersPhoneNumbers(); 
    //TODO
    //===========
    //here I need to check the number

    Bundle b = intent.getExtras();
    String incommingNumber = b.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
    //String outGoingNumber = b.getString(TelephonyManager.);
    Boolean find=false;
    try {

        for(int i=0;i<getUsersPhoneNumbers.size();i++)
        {
            if(incommingNumber.equals(getUsersPhoneNumbers.get(i)))
            {
                find=true;
                break;
            }
        }

    } catch (Exception e) {
        incommingNumber="";
    }

// ========================================
//here the problem
//=========================================
    String phonenumber=b.getString(Intent.EXTRA_PHONE_NUMBER);
    try {

        for(int i=0;i<getUsersPhoneNumbers.size();i++)
        {
            if(phonenumber.equals(getUsersPhoneNumbers.get(i)))
            {
                find=true;
                break;
            }
        }
        if (!find)
            return;
    }catch (Exception e) {
        phonenumber="";
    }

    if (!find)
        return;

    /* examine the state of the phone that caused this receiver to fire off */
    String phone_state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    if (phone_state.equals(TelephonyManager.EXTRA_STATE_RINGING)) 
    {

        logMe("Phone Ringing: the phone is ringing, scheduling creation call answer screen activity");
        Intent i = new Intent(context, CallAnswerIntentService.class);
        i.putExtra("delay", 100L);
        i.putExtra("number", incommingNumber);
        context.startService(i);
        logMe("Phone Ringing: started, time to go back to listening");

    }

    if (phone_state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK))
    {

        Intent i = new Intent(context,InCallScreenGuardService.class);
        i.putExtra("delay", 100L);
        i.putExtra("number", phonenumber);
        logMe("Phone Offhook: starting screen guard service");
        context.startService(i);

    }

    if (phone_state.equals(TelephonyManager.EXTRA_STATE_IDLE))
    {
        Intent i = new Intent(context,InCallScreenGuardService.class);
        logMe("Phone Idle: stopping screen guard service");
        context.stopService(i);

    }

    return;
} 
```

问题：

我可以得到传入的号码，但我不能得到传出的号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:48:45.307

为此，您将需要一个`BroadcastReciever`。

```
public class OutgoingCallReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        if(null == bundle)
            return;

        String phonenumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

        Log.i("OutgoingCallReceiver",phonenumber);
        Log.i("OutgoingCallReceiver",bundle.toString());

        String info = "Detect Calls sample application\nOutgoing number: " + phonenumber;

        Toast.makeText(context, info, Toast.LENGTH_LONG).show();
    }
} 
```

# symfony - FOSUserBundle 使用自己的方法

> ID：11198260
> 
> 赞同：1
> 
> 时间：2012-06-25T22:25:53.820
> 
> 标签：symfony, twig, fosuserbundle

我是 Symfony 的新手，实际上我正在尝试在模板中使用我自己的 user.php 方法。它看起来像这样：

```
{% for image in app.user.getUserImage %}
... 
```

但我唯一得到的是：

```
An exception has been thrown during the rendering of a template ("Notice: Undefined   
index: User
... 
```

到目前为止，我认为我的 user.php（包括我的方法）已扩展到 FOSUserBundle，因此可以在模板中使用。

出于这个原因，我是否必须覆盖 FOSUserBundle 控制器？

@MDrollette：

来自用户.php：

```
 /**
 * Get userimage
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getUserimage()
{
    return $this->userimage;
}

 /**
 * @ORM\OneToMany(targetEntity="UserImage", mappedBy="User")
 * @var ArrayCollection $userimage
 */
protected $userimage; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:30:57.673

您需要使用 app.user.userimage，因为这是属性名称。这将自动调用属性 (getUserImage) 的 getter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:09:42.750

`@ORM\OneToMany(targetEntity="UserImage", mappedBy="User")`

我认为 mappedBy 是指 UserImage 实体中的字段名称，而不是 User 实体本身。

干杯

# jquery - jQuery Cookies 插件不保存 cookie

> ID：11198262
> 
> 赞同：1
> 
> 时间：2012-06-25T22:26:01.797
> 
> 标签：jquery, cookies

嗨，我尝试使用 jquery 中的 cookie 插件来做到这一点

```
$.cookie('XXX', 'the_value', 22);
alert($.cookie('XXX')); 
```

但是警报输出为空（我在本地尝试过）

为什么？

插件在那里：[https ://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:29:55.083

您需要设置过期时间：

```
$.cookie('XXX', 'the_value', { expires: 22 }); 
```

[阅读这篇文章](http://www.electrictoolbox.com/jquery-cookies/)：

```
$.cookie("example", "foo"); 
```

> 这是为当前路径级别设置的会话 cookie，将在用户退出浏览器时销毁。要使相同的 cookie 持续例如 7 天，请执行以下操作：

```
$.cookie("example", "foo", { expires: 7 }); 
```

# java - Java Tomcat LDAP 身份验证

> ID：11198263
> 
> 赞同：3
> 
> 时间：2012-06-25T22:26:03.607
> 
> 标签：java, tomcat, ldap, tomcat6, openldap

由于我使用 Tomcat6 作为 servlet 容器运行 Java，我发现使用[Tomcat JNDIRealm 功能](http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html#JNDIRealm)是合适的，这样 LDAP 用户无需任何额外的努力就可以登录到我的站点。我使用的 LDAP 服务器是[Ubuntu 上的 OpenLDAP](https://help.ubuntu.com/community/OpenLDAPServer)。

最重要的是，我的登录页面使用[基于表单的身份验证](http://www.avajava.com/tutorials/lessons/how-do-i-use-basic-authentication-with-tomcat.html)通过[https 连接](http://www.avajava.com/tutorials/lessons/how-do-i-set-up-ssl-on-tomcat.html)。

我发现了两个非常好的通过 LDAP 进行身份验证的用户示例，[here](http://www.jspwiki.org/wiki/WebContainerAuthenticationViaLDAP)和[here](http://blog.mc-thias.org/?title=tomcat_ldap_authentication&more=1&c=1&tb=1&pb=1)，它们都实现了我觉得我几乎实现的目标。为什么*几乎*达到了？

当我尝试使用错误的凭据登录时，我会适当地发送到`<form-error-page>`,`login-failed.html`就我而言。

当我的凭据良好并且我成功进行身份验证时，我开始为站点中的**所有 url 获取 403 。**除非我重新启动 Tomcat，否则我无法删除 403 错误（即使是登录页面！）。

我怀疑原因是因为我没有`roles`正确设置领域或其他配置文件。为简洁起见，我将相关配置文件摘录放在[pastebin](http://pastebin.com/)上：

*   [Tomcat中的领域`server.xml`](http://pastebin.com/35nNzSaS)
*   [相关`tomcat-users.xml`部分](http://pastebin.com/0MYGitp8)
*   [相关`web.xml`部分](http://pastebin.com/1h6W197b)
*   [基本 LDAP 结构](http://pastebin.com/rQqxqtsm)，破折号表示树形结构

请注意，基于 Tomcat 的身份验证可以完美运行，因为该角色很容易附加到`tomcat-users.xml`. 因此，我认为一旦成功通过身份验证，从 LDAP 获取经过身份验证的用户的角色是一个问题。

**TL/DR**

我在将 Tomcat 连接到 LDAP 身份验证时遇到配置问题。正确获取了用户数据，但未正确获取用户的角色。可根据要求提供 LDAP 日志消息；）

**更新：我在**[这里](http://pastebin.com/s6UckuSY)粘贴了 LDAP 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:37:45.257

那是对的。JNDIRealm 找不到您的 LDAP 角色。您需要在 Tomcat 之外测试您的角色搜索字符串，以确保它产生您认为应该产生的结果。由于您尚未提供任何 LDAP 详细信息，因此无法进一步评论。

使用 /* 在整个站点上设置安全权限是错误的。您需要排除登录页面，可能还有首页和忘记密码页面，也许更多，需要角色。

# validation - WebObjects 字段验证

> ID：11198265
> 
> 赞同：0
> 
> 时间：2012-06-25T22:26:20.457
> 
> 标签：validation, webobjects

我正在尝试找到一种在 WebObjects 应用程序中进行字段验证的好方法。如果我有一个文本字段并且我将一个数字格式化程序绑定到它，似乎默认行为是在用户输入有效数字时解析数字，或者，如果用户输入*无效*数字，它似乎只是忽略用户输入的值。我无法在保存方法或操作方法中进行验证，因为 WO 在到达操作方法时已经忽略了非数字输入。在 WebObjects 应用程序中，是否有一种标准/推荐的方式来验证用户输入，以便可以提醒用户注意无效输入，而不仅仅是忽略无效输入？

此页面：[http](http://en.wikibooks.org/wiki/WebObjects/EOF/Using_EOF/Validation) ://en.wikibooks.org/wiki/WebObjects/EOF/Using_EOF/Validation 声称 WO 和 EOF 具有“一系列令人难以置信的验证机制”，甚至暗示有一种内置方法可以*防止*用户输入不适当的数据，但我无法找到任何文档或如何做到这一点的示例（如果实际上有内置方式）。想出一个自定义的 javascript 验证器来防止不适当的数据似乎是一场噩梦——找到一种方法让 JS 识别和处理后端格式化程序/解析器处理的所有相同的边缘情况。如果 WO 真的有一种内置的方式将格式化程序边缘情况传播到 JS 验证，那就太好了。

上面的链接还说 WOComponent 中有一个 validationFailedWithException 方法，该方法被称为“当 EO 或格式化程序在分配期间验证失败时”，但是在上面的非数字示例情况下，如何使*格式化程序验证失败？*如果输入了非数字，我尝试让格式化程序在 parse 方法中引发异常，但该异常不会传递给 validationFailedWithException 方法。有谁知道我如何在格式化程序中触发一个异常来*触发*对validationFailedWithException（）的调用？这甚至是最好的/推荐的方式吗？有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:00:19.993

我很确定，每次格式化错误都会调用validationFailedWithException。您应该在那里收到一个包装 ParseException 的 NSValidationException。该方法通常在包含绑定的组件上调用。它可能会在插入符号 (^) 绑定上被跳过。

所有标准数字格式化程序都已经抛出 ParseException（请参阅 Format.parse(String)）。

WebObjects 中的验证处理可能会变得相当复杂，这实际上取决于您的需求。但它的设计没有考虑 JavaScript 或 Ajax。Wonder 中较新的方法可能会包含客户端，但我没有这方面的经验。

正常的验证顺序是：

*   如果需要，使用格式化程序将输入转换为目标类型
*   在目标对象上调用 validateAttributeName 方法，其中 AttributeName 是接收值的属性名称

当此序列中的某些事情失败时，将调用validationFailedWithException。

在保存企业对象时，对对象调用“validateFor...”。此时必须在您的操作方法中捕获异常。

所以你有两点来处理验证错误。“语法”错误必须在validationFailedWithException 中处理。在此之后，您有有效的输入。您可以在您的操作方法或 validateFor...（例如 validateForSave）中手动进一步检查那些或更大的对象结构。

# sql - 我有两个表，如何按另一个表中的列对一个表进行分组，然后按大小对分组进行排序？

> ID：11198267
> 
> 赞同：0
> 
> 时间：2012-06-25T22:26:32.310
> 
> 标签：sql, oracle

我有一个看起来像这样的表：

```
table name: uno
str_id | title
----------
 "a1"  | "hi"
 "b2"  | "bye"
 "c3"  | "etc."

table name: dos
str_id | other_col_name
-------------------------
   "b2"  |  1
   "b2"  |  5
   "a1"  |  6
   "b2"  |  7 
```

我希望我的查询查看中的值，`uno.str_id`然后找出在中具有最多值的 str_id 的排序`dos.str_id`。我想我需要在 str_id 上加入它们，然后按计数排序，但我不确定如何在 SQL 语法中执行此操作。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:28:53.040

```
SELECT u.str_id FROM uno u
INNER JOIN dos d ON d.str_id = u.str_id
GROUP BY u.str_id
ORDER BY COUNT(*) DESC; 
```

**编辑**

可能的 WHERE 部分必须放在 JOIN 部分之后（SQL 语法）。

如果您要查询两个具有“同名”字段的表，并且对这些公共字段执行任何操作，则必须使用别名（或完整的表名）。在该查询中，表 uno 别名为“u”，表 dos 别名为“d”。这意味着，如果你在 uno 和 dos 中有一个字段标题，你必须写 u.title 来查询 uno.title

带别名的版本：

```
SELECT u.str_id FROM uno u
INNER JOIN dos d ON d.str_id = u.str_id
GROUP BY u.str_id
WHERE u.title = 'bla blabla'
AND d.title IN ('asdf', 'ersg')
ORDER BY COUNT(*) DESC; 
```

没有别名的版本（完整的表名以避免 DBMS 混淆）

```
SELECT uno.str_id FROM uno 
INNER JOIN dos  ON dos.str_id = unon.str_id
GROUP BY uno.str_id
WHERE uno.title = 'bla bla bla'
AND dos.title IN ('asdf', 'ersg')
ORDER BY COUNT(*) DESC; 
```

# ruby-on-rails - 如何根据 capybara 和 rspec 中的父母找到特定标签？

> ID：11198272
> 
> 赞同：1
> 
> 时间：2012-06-25T22:27:06.453
> 
> 标签：ruby-on-rails, rspec, capybara

目前，我有两个测试，每个测试都单独测试同一页面上的表单中的 button_click，没有`id`s，但都具有相同的 text `Go`。所以发生的事情是 capybara/rspec 只测试**两个**`Go`测试的按钮的第一个实例。有没有办法根据父母找到东西？我不想仅仅为了测试目的而通过添加一个 id 来修改我的功能代码。我在想类似的东西，但这不起作用。**`test_form > input[type='submit']`**

 **当前代码：

```
let(:submit) {"Go"}

describe "with valid information" do
  before do
    fill_in "email",        with: "stuff@example.com"
    fill_in "password",     with: "stuff"
  end

  it "should create a user" do
    expect {click_button submit}.to change(User, :count).by(1)
  end
end 
```

当前宝石：

```
rails 3.2.6
rspec-rails 2.10.1
capybara 1.1.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:23:02.000

您可以指定您希望按钮在哪个选择器中，[请参阅 doc](https://github.com/jnicklas/capybara/)**

# jsf - JSF/Facelets 支持 bean 和 EJB3

> ID：11198286
> 
> 赞同：1
> 
> 时间：2012-06-25T22:28:59.823
> 
> 标签：jsf, cdi, ejb-3.1

关于将 JSF 与 EJB3.1 结合使用时的各种选项和最佳实践，我有几个问题。考虑到可用的选择和组合数量之多，我所拥有的心智模型远非清晰，因此有些问题可能没有意义。

JSF/Facelets通过与*bean*类中使用的实际注释无关的 EL 代码（javax.faces.bean .* 或 javax.enterprise.context.*)。

*是否可以通过更改 bean 类中的导入而不对 Facelets xhtml*代码进行任何更改来在**JSF**和**CDI**范围注释之间切换？

 *JSF/Facelets 是否应该只用于*xhtml*标记代码，所有范围和生命周期（加上注入）注释都是使用*CDI*完成的，这是一种既定的模式吗？

在**JBoss AS**设置中，JSF 支持 bean 的生命周期管理（使用**JSF**或**CDI**注释）在哪里进行？在 Web 容器中还是在 EJB3 容器中？

在一个典型的 Web 应用程序中，考虑到**SessionScoped** bean 可以由 CDI 提供，是否需要使用除**@Entity**类型之外的 EJB3 bean ，例如，当信息要持久保存在每个“流”中的最后一个典型步骤时数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:48:11.923

> *是否可以通过更改 bean 类中的导入而不对 Facelets xhtml 代码进行任何更改来在 JSF 和 CDI 范围注释之间切换？*

是的。

* * *

> *JSF/Facelets 是否应该只用于 xhtml 标记代码，所有范围和生命周期（加上注入）注释都是使用 CDI 完成的，这是一种既定的模式吗？*

JSF 正在向 CDI 发展。`@FlowScoped`即将推出的[JSF 2.2](http://jdevelopment.nl/jsf-22/)的新注释就是证明，因为它从 CDI API 扩展而来。唯一的缺点是 CDI 没有为非常有用的 JSF 注释提供标准`@ViewScoped`注释。您需要`@ConversationScoped`手动开始和结束对话，或者查看像[MyFaces CODI](http://myfaces.apache.org/extensions/cdi/)这样的 CDI 扩展。

* * *

> *在 JBoss AS 设置中，JSF 支持 bean 的生命周期管理（使用 JSF 或 CDI 注释）在哪里进行？在 Web 容器中还是在 EJB3 容器中？*

Web 容器（类似于 WAR）。[JSF 建立在Servlet API](https://stackoverflow.com/tags/servlets/info)之上，因此它绝对是 Web 容器。

* * *

> *在一个典型的 Web 应用程序中，考虑到 SessionScoped bean 可以由 CDI 提供，是否需要使用除 @Entity 类型之外的 EJB3 bean，例如，当信息要持久保存在每个“流”中的最后一个典型步骤时数据库？*

这`@Entity`是 JPA 的一部分，而不是 EJB 的一部分。用于映射到数据库表的`@Entity`模型类，通常仅用于跨层传输数据。您最后描述的内容听起来像是`@Stateful`EJB 的候选人。要更好地理解`@Stateless`与`@Stateful`EJB 的对比，请参阅以下详细答案：[JSF request scoped bean keep recreating new Stateful session beans on each request?](https://stackoverflow.com/questions/8887140/jsf-request-scoped-bean-keeps-recreating-new-stateful-session-beans-on-every-req/8889612#8889612)*

# python - 具有高级可视化的python下的ABM

> ID：11198288
> 
> 赞同：2
> 
> 时间：2012-06-25T22:29:17.457
> 
> 标签：python, netlogo, pycuda, agent-based-modeling, mayavi

抱歉，如果这一切看起来都不太清楚，但我目前正在学习 Netlogo 来模拟基于代理的集体行为，并希望听到一些关于替代软件选择的建议。我的主要事情是我非常想利用 PyCuda，因为据我了解，它支持并行计算。但是，这是否意味着我仍然必须在其他环境中编写数字脚本并在另一个环境中实现视觉效果？？？

如果是这样，我的问题是：

1.  我应该使用什么数字包？PyEvolve、DEAP 还是其他？PyEvolve 似乎不再被开发，而 DEAP 只是过时的（？）EAP 的包装。

2.  图形方面，我发现 mayavi2 和 vtk 很有希望。问题是，没有一个数字包似乎很容易绑定到这些。除了将数值输出保存到数据文件并将它们输入到 mayavi2 之外，没有更好的选择吗？

3.  另一种选择是通过 Netlogo 生成数据并将它们从 (2) 输入到图形包中。这样做有什么缺点吗？

非常感谢您阐明这种困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:23:03.843

除非遇到严重的性能问题，否则您几乎肯定不想使用 CUDA。一般来说，CUDA 最适合用于解决浮点线性代数问题。如果您正在寻找一个围绕并行计算构建的框架，我会寻找可以在需要时利用 GPU 的 OpenCL。

在可视化方面，我强烈建议针对特定的数据交换格式，然后让其他程序为您进行渲染。我使用 VTK 之类的东西的唯一原因是，如果出于某种原因您需要对可视化过程进行更多控制，或者您正在寻找实时解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:33:17.747

可视化的最佳选择可能是使用中间格式并在另一个程序中进行。但为了性能，我宁愿为集群配置一个 JVM 并在其上运行 NetLogo。我还没有尝试过，但我正在认真考虑在 Beowulf 风格的集群上尝试 NetLogo。

顺便说一句，如果您打算在 Python 中实现代码，那么有一个名为[Repast](http://repast.sourceforge.net/)的 ABM 平台据说[具有 Python 接口。](http://repast.sourceforge.net/repast_3/index.html)

# vbscript - 需要在撇号子字符串中查找字符并替换它，有什么想法吗？

> ID：11198289
> 
> 赞同：1
> 
> 时间：2012-06-25T22:29:24.867
> 
> 标签：vbscript

好的，让我以我对 vb 脚本非常陌生这一事实作为这个问题的开头，但我需要对另一个开发人员创建的脚本进行补充，而他不在。

问题。：我正在获取输入到流程中的数据。我已经拥有的脚本处理了一些我不会涉及的事情。我发现它不能正确处理的一件事是逗号出现在双引号中。

所以我得到了一些这样的数据。：

乔、比尔、詹姆斯、亚历克斯，“谷歌公司”，罗斯，“Kickstarter，LLC”

发生的情况是，当此脚本启动到流程应用程序时，由于双引号中的这些逗号，它会爆炸。我需要能够让这个脚本进入并用更独特的东西替换 Google 和 Kickstarter 块中的逗号。

如果您对此有答案，我将不胜感激，但我不介意一些方向，无论是做这样的事情，等等。

非常感谢任何答案。再次对 vbascript 非常陌生，今天才开始阅读它的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:42:27.683

您遗漏了有关输入数据格式和替换文本的一些细节。但是，您需要采取的方法是使用 VBScript 的正则表达式功能来识别输入数据中的模式，然后使用“替换”方法来替换它们。这是[一篇关于 VBScript 中的正则表达式的简短 MS 文章](http://msdn.microsoft.com/en-us/library/ms974570.aspx)。

这是它可能看起来的示例。这个例子绝对不是防弹的，它做了一些假设，但我认为它会让你开始：

```
Dim re, strstr, newstrstr
Dim inputstrarray(7)
Set re = new regexp 

inputstrarray(0) = "Joe"
inputstrarray(1) = "Bill"
inputstrarray(2) = "James"
inputstrarray(3) = "Alex"
inputstrarray(4) = """" & "Google, Inc" & """"
inputstrarray(5) = "Rose"
inputstrarray(6) = """" & "Kickstarter, LLC" & """"

re.pattern = ",\s"  'pattern is a comma followed by a space
For Each strstr In inputstrarray 'loop through each string in the array
    newstrstr = re.Replace(strstr, "_")  'replace the pattern with an underscore
    If StrComp(strstr,newstrstr) Then 
        Wscript.Echo "Replace " & strstr & " with " & newstrstr
    Else
        Wscript.Echo "No Change"   
    End If
Next 
```

输出如下所示：

```
No Change
No Change
No Change
No Change
Replace "Google, Inc" with "Google_Inc"
No Change
Replace "Kickstarter, LLC" with "Kickstarter_LLC"
No Change 
```

# haskell - Reader Monad 和类型变量

> ID：11198292
> 
> 赞同：2
> 
> 时间：2012-06-25T22:29:39.627
> 
> 标签：haskell

我有以下内容：

```
type KEY = (IPv4, Integer)
type TPSQ = TVar (PSQ.PSQ KEY POSIXTime)
type TMap a = TVar (Map.Map KEY [a])

data Qcfg a = Qcfg { qthresh :: Int, tdelay :: Rational, cwpsq :: TPSQ, cwmap :: TMap a
, cwchan :: TChan String }

getTMap = do
   c <- ask
   return (cwmap c) 
```

并收到有关 Reader Monad 的错误：

```
No instance for (MonadReader (Qcfg a2) m2)
      arising from a use of `ask'
    Possible fix:
      add an instance declaration for (MonadReader (Qcfg a2) m2)
    In a stmt of a 'do' expression: c <- ask
    In the expression:
      do { c <- ask;
           return (cwmap c) }
    In an equation for `getTMap':
        getTMap
          = do { c <- ask;
                 return (cwmap c) } 
```

我对 Reader Monad 的了解还不够，无法确定如何最好地解决这个问题。

[编辑] 添加类型签名适用于涉及类型变量的部分，但会为所有其余部分创建错误。例如

```
getTMap :: Reader (Qcfg a) (TMap a)
getTMap = do
   c <- ask
   return (cwmap c)

getTPsq :: Reader (Qcfg a) TPSQ
getTPsq = do
   c <- ask
   return (cwpsq c)
...
let q = getTPsq 
 qT <- atomically $ readTVar q 
```

结果是

```
 Couldn't match expected type `TVar a0'
                with actual type `ReaderT
                                    (Qcfg a1) Data.Functor.Identity.Identity TPSQ'
    Expected type: TVar a0
      Actual type: Reader (Qcfg a1) TPSQ
    In the first argument of `readTVar', namely `q'
    In the second argument of `($)', namely `readTVar q' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T23:10:38.263

你只需要提供一个类型签名：

```
getTMap :: Reader (Qcfg a) (TMap a)
getTMap = do
  c <- ask
  return (cwmap c) 
```

# java - 如何在 Spring xml 配置文件中初始化 Java Date 对象？

> ID：11198297
> 
> 赞同：10
> 
> 时间：2012-06-25T22:30:03.433
> 
> 标签：java, xml, spring, configuration

考虑这个简单的例子 -

```
public class Person
 {
    private String name;
    private Date dateOfBirth;

    // getters and setters here...
 } 
```

为了将 Person 初始化为 Spring bean，我可以编写以下代码。

```
<bean id = "Michael" class = "com.sampleDomainName.Person">
<property name = "name" value = "Michael" />
</bean> 
```

但是在上面的bean定义中，如何设置dateOfBirth呢？

例如。我想将 dateOfBirth 设置为

```
1998-05-07 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T22:36:41.653

像对待任何其他 POJO 一样对待它（这是）

```
<property name="dateOfBirth">
  <bean class="java.util.Date" />
</property> 
```

如果您需要使用显式值（例如 1975-04-10），则只需调用其他构造函数之一（尽管不推荐使用年月日的构造函数）。你也可以使用显式的`java.beans.PropertyEditor`which [Spring rolls](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)（参见第**6.4.2**节；注意你可以编写自己的编辑器并将它们注册为你自己的类型）。您需要在配置中注册*CustomEditorConfigurer*：

```
<bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">
  <property name="customEditors">
    <map>
      <entry key="java.util.Date" 
             value="org.springframework.beans.propertyeditors.CustomDateEditor"/>
    </map>
  </property> 
</bean> 
```

然后你的数据看起来像：

```
<property name="dateOfBirth" value="1975-04-10" /> 
```

我可能会补充一点，这`Date`不是存储出生日期*的合适数据类型*`Date`，因为它实际上是一个*Instant-in-time*。你可能想看看**Joda**并使用这个`LocalDate`类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T17:07:17.303

这里提到的答案之一很有用，但它需要额外的信息。需要提供 CustomDateEditor 的构造函数参数。

```
<bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">
  <property name="customEditors">
    <map>
      <entry key="java.util.Date"> <ref local = "customDateEditor" /> 
      </entry> 
    </map>
  </property> 
</bean>

<bean id = "customDateEditor" class="org.springframework.beans.propertyeditors.CustomDateEditor">
    <constructor-arg>
      <bean class="java.text.SimpleDateFormat">
          <constructor-arg value="yyyy-MM-dd" />
       </bean>
    </constructor-arg>
    <constructor-arg value="true" /> 
</bean> 
```

现在我们可以做

```
<property name="dateOfBirth" value="1998-05-07" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-14T02:39:44.990

[Spring 将 Date 注入 bean 属性 – CustomDateEditor](http://www.mkyong.com/spring/spring-how-to-pass-a-date-into-bean-property-customdateeditor/)

本文给出两个建议：

1.  工厂豆
2.  自定义日期编辑器

我建议使用“Factory Bean”，因为 Spring 4.0+ 不支持 CustomDateEditor，而且 Factory Bean 很容易使用。

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="dateFormat" class="java.text.SimpleDateFormat">
        <constructor-arg value="yyyy-MM-dd" />
    </bean>

    <bean id="customer" class="com.mkyong.common.Customer">
        <property name="date">
            <bean factory-bean="dateFormat" factory-method="parse">
                <constructor-arg value="2010-01-31" />
            </bean>
        </property>
    </bean>

</beans> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T22:37:42.723

使用[CustomDateEditor](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/beans/propertyeditors/CustomDateEditor.html)。从一开始就在春天。

# php - FQL Facebook 查询和奇怪的 LIMIT 行为

> ID：11198303
> 
> 赞同：0
> 
> 时间：2012-06-25T22:31:17.337
> 
> 标签：php, facebook-graph-api, facebook-fql

好吧，我的信息流中有很多帖子，但是当我这样做时：

SELECT type,source_id,actor_id,post_id,type,attachment,message,permalink,description,created_time FROM stream WHERE source_id = xxx ORDER BY created_time DESC 限制 15

它只返回 7 行......它不应该返回 15 行？

有人可以为我解释一下吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:07:10.910

借助`stream`FQL 查询，Facebook 首先查找与您的查询匹配的所有帖子，然后将这些结果过滤为可公开查看的内容，然后再将它们传递给 API。

在您的情况下，Facebook 发现了 15 个查询，但其中 8 个查询无法通过您的授权令牌查看，因此仅返回 7 个。

# c - 使用 getline() 输入时出现分段错误

> ID：11198305
> 
> 赞同：1
> 
> 时间：2012-06-25T22:31:25.307
> 
> 标签：c, segmentation-fault

我正在尝试编写一个简单的程序来接收用户输入，然后将其打印出来。一直这样做，直到用户键入`"done"`.

当我运行下面的代码时，我输入“01”，然后得到一个`Segmentation Fault ( core dumped )`.

我认为这与`getline()`，但我不知道。如果有人可以向我解释为什么它不起作用以及如何解决它，我将不胜感激。

```
#include <stdio.h>
#include <stdlib.h>

int main(){

char* line;
size_t size ;
size = 100;
char* done;
done = "done";
printf("0");
while ( strcmp(line, "done") != 0 ) { 
    printf("1");
    getline(&line, &size, stdin); 
    printf("2");
    printf("%s\n", line); 
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T22:33:25.080

在这里，您只有一个指向任何内容的指针（实际上是垃圾）：

```
char* line; 
```

[从getline()](http://linux.die.net/man/3/getline)的手册页：

> 如果 *lineptr 为 NULL，则 getline() 将分配一个缓冲区来存储该行，该缓冲区应由用户程序释放。（在这种情况下，*n 中的值被忽略。）
> 
> 或者，在调用 getline() 之前，*lineptr 可以包含一个指向 malloc(3) 分配的缓冲区 *n 字节大小的指针。如果缓冲区不足以容纳行，getline() 使用 realloc(3) 调整它的大小，并根据需要更新 *lineptr 和 *n。
> 
> 在任何一种情况下，在成功调用时，*lineptr 和 *n 将被更新以分别反映缓冲区地址和分配的大小。

因此，请注意，您**不能**将堆栈分配的缓冲区用于 getline。

更简单的方法是初始化`line`为 NULL 并`getline`为您处理分配：

```
char* line = NULL;
int size = 0;
getline(&line, &size, stdin);   // line and size are updated with buffer addr and size.
//...
free(line); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T22:32:00.667

您没有为以下内容分配内存：

```
char* line; 
```

`line`在指向有效对象之前是无效指针。用于`malloc`分配内存，例如，`line = malloc(size);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T22:32:58.630

```
char* line = malloc(size * sizeof(char)); 
```

当不再需要时记得释放内存：

```
free(line); 
```

# php - 使用标头函数重定向

> ID：11198313
> 
> 赞同：0
> 
> 时间：2012-06-25T22:32:30.563
> 
> 标签：php

我是 PHP 编程新手。请承受我...

使用标头函数时，使用 post 方法中的变量（动态）时，刷新选项不起作用。当对数字进行硬编码时，它的工作。我尝试了不同的选择。你可以在这里看到我的整个代码。没有成功使刷新工作动态。有人可以帮忙吗？

```
<?php
if($_POST['time']>0) {
     $t = $_POST['time'];
     $u =$_POST['url'];
     echo "You will be redirected to the " .$u . " website in " .$t. "seconds";
     //header("refresh:5; url=http://www.google.com");

     //header("refresh:($_POST['time']);url=($_POST['url'])"); 
     header('refresh: ' .$t);
     header('Location: '.$u);
     exit;       
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:39:38.673

您必须在任何输出（如 echo 语句）之前调用 header() 。将任何内容输出到浏览器后，它根本无法工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:40:58.500

Refresh 标头不仅仅是一个数字，它还应该包含 url。格式为：

```
Refresh: 5; url=http://something.local/ 
```

Location 标头应该不存在。

```
header("Refresh: $t; url=$u"); 
```

另见[http://en.wikipedia.org/wiki/HTTP_refresh](http://en.wikipedia.org/wiki/HTTP_refresh)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T22:41:03.120

`header`在任何输出已打印到屏幕后，您不能调用 php函数。如果您删除该`echo`语句，它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T22:53:05.610

```
if ($_POST['time'] && $_POST['url'])
{
    $time = (integer)$_POST['time'];
    $url = strip_tags($_POST['url']);
    echo "You will be redirected to the " . $url . " website in " . $time . "seconds";
    header('Refresh:' . $time . ';url=' . $url);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T22:35:46.810

这可以通过 JavaScript 重定向更可靠地完成：

```
echo "<p>You will be redirected in ".$t." seconds.</p>";
echo "<p>Click <a href=\"".$u."\">here</a> to go immediately.</p>";
echo "<script type=\"text/javascript\">setTimeout(function() {location.href = ".json_encode($u).";},".$t."000);</script>"; 
```

# javascript - EXT JS 将内容图像数据加载到窗口中

> ID：11198314
> 
> 赞同：1
> 
> 时间：2012-06-25T22:32:34.587
> 
> 标签：javascript, extjs

我无法使用 EXT JS 将图像数据加载到可拖动的窗口中。

流式传输图像文件的进程的链接在代码中。

我试过使用

```
var plotWin = Ext.create('Ext.Window', {
    title: 'Plot',
    width: 600,
    height: 400,
    x: 10,
    y: 200,
    loader : {
                url : "http://209.105.242.30/custom/webimg",
                autoLoad : true,
                renderer : 'data'
            },
    plain: true,
    headerPosition: 'top',
    layout: 'fit',
    items: {
        border: false
    }
}); 
```

进而

```
plotWin.show(); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:10:55.173

看起来该 url 是跨域的，这意味着它无法通过 ajax 加载。如果是图像，为什么不直接嵌入呢？

```
var plotWin = Ext.create('Ext.Window', {
    title: 'Plot',
    width: 600,
    height: 400,
    x: 10,
    y: 200,
    plain: true,
    headerPosition: 'top',
    layout: 'fit',
    items: {
        xtype: 'image',
        src: "http://209.105.242.30/custom/webimg"
    }
}); 
```

# memory - gawk 在浏览大文件时内存不足：我可以优化我的代码吗？

> ID：11198316
> 
> 赞同：3
> 
> 时间：2012-06-25T22:32:45.383
> 
> 标签：memory, gawk, corpus

我正在使用 gawk 浏览一个大型文本语料库（大约 3-4GB，电子书汇编），以便打印出至少出现 3 次的 3 个单词的每个关联，以生成语言统计数据。这是代码：

file.awk 的内容：

```
BEGIN { RS="[^[:alnum:]]+" } 

{ w1 = w2; w2 = w3; w3 = $0 } 

NR > 2 { count[tolower(w1 " " w2 " " w3)]++ } 

END { 
     for (phrase in count) {
         if (count[phrase] >= 3) { 
             print phrase, count[phrase] 
         } 
     } 
} 
```

命令：gawk -f file.awk mytxtfile > 输出

它适用于小文件（几百 MB），但我无法让它适用于大于 1GB 的文件：gawk 在不到一分钟的时间内吃掉我所有的 RAM（8GB），然后开始吃掉我的交换和整个系统最终冻结。

你知道我如何优化代码，即使最终需要更长的时间吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-20T18:51:43.493

您的解决方案在字符串方面效率不高：它为每个唯一的三元组分配一个，并且在大型语料库中，它们有很多。相反，您可以设置一个带有树索引的表并执行`count[w1][w2][w3]++`. 最后需要做更多的工作，但现在每个唯一标记只有一个字符串。

如果这还不够好，您始终可以在较小的文本组上运行代码，对输出进行排序，然后合并它们。

顺便说一句，我猜你的代码是基本的，或者你是否在前面提到句尾标记之类的东西？

妈的，我在回答一个6岁的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-01T22:26:28.843

只要您需要将信息保留到最后，您的记忆需求就是 O（***有序****3 词组合的**数量***）——大约[200K 词](https://en.oxforddictionaries.com/explore/how-many-words-are-there-in-the-english-language/)意味着 8,000,000,000,000,000 个组合......**

 **即使你的书的组合词汇量要小得多——比如说，只有 50K 词——那仍然是 50K^3 或 1.25*10^14。然后，即使您的 awk 实现每个条目仅使用 16 个字节（不可能），这仍然是 2,000,000,000,000,000 字节 - 或 2000TB。

这是最坏的情况——但你看，你在玩什么数量级。

也许，您不需要订购单词组合？在这种情况下，您可以通过首先对单词进行排序来将数组条目的数量减少 6 倍。但我怀疑，这对你也有帮助......**

# database - 运行 rake db:migrate 安装 fedena 时出错

> ID：11198317
> 
> 赞同：0
> 
> 时间：2012-06-25T22:32:46.423
> 
> 标签：database, rake, fedena

我正在安装 Fedena，并且已经为此苦苦挣扎了两个星期。当我跑

`rake db:migrate`

我收到这个错误

> 数据库配置未指定适配器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:05:04.690

您的描述显示缺少某些信息。

更新 config/database.yml 中的 MySQL 数据库详细信息（在“开发：”下）

确保“适配器：mysql”行可用，然后

运行命令“bundle exec rake db:create”。这将创建所需的数据库。

# c++ - C++中部分代码的执行时间

> ID：11198318
> 
> 赞同：-4
> 
> 时间：2012-06-25T22:32:50.703
> 
> 标签：c++, performance

您如何计算在 C++ 中执行部分代码的时间（以 MS 为单位）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:39:50.483

大多数系统都支持高性能计时机制。在 Windows 上，您可以使用高性能计时器 API：

[查询性能频率](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=vs.85%29.aspx)

[查询性能计数器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)

在 *nix 系统上，您可以使用[`clock_getres() and clock_gettime()`](http://www.tin.org/bin/man.cgi?section=3&topic=clock_gettime).

您应该能够弄清楚如何使用它们来计时您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T22:43:15.760

在可移植代码中你能做的最好的事情就是使用`clock()`.

```
clock_t start = clock();
// code to time goes here
clock_t stop = clock();

double seconds = double(stop-start)/CLOCKS_PER_SEC; 
```

C++11 添加了一个`<chrono>`以类命名的新标头`time_point`，`duration`可以使工作更简单、更清晰。然而，这些都不能保证毫秒级的准确性（甚至精度）。新类的 typedef 持续时间低至纳秒范围，但不能保证您的实际结果是否准确（但对于大多数典型的操作系统，我很确定答案通常是“不”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:44:14.990

这是我用于 c++（不是 11）的内容，但许多库可能有更复杂的解决方案。对于您需要 Qt 的代码，但没有它也可以轻松完成。根据您的操作系统，您可能还需要替换 CLOCK_MONOTONIC 。

```
#ifndef PROFILER_H
#define PROFILER_H

#include <sys/time.h>
#include <QString>

class Profiler
{
  public:
    Profiler(QString const& name);
    long measure() const;

    long measureNs() const;
    double measureMs() const;
    double measureS() const;
    void printNs() const;
    void printMs() const;
    void printS() const;
  private:
    QString mName;
    timespec mTime;
};

#endif // PROFILER_H

#include "profiler.h"
#include <QDebug>
#include <assert.h>
#include <iostream>

Profiler::Profiler(QString const& name):mName(name){
  clock_gettime(CLOCK_MONOTONIC, &mTime); // Works on Linux
}

long int Profiler::measureNs() const{
  timespec end;
  clock_gettime(CLOCK_MONOTONIC, &end); // Works on Linux 
  long int diff = (end.tv_sec-mTime.tv_sec) * 1000000000 + (end.tv_nsec - mTime.tv_nsec);
  assert(diff>0);
  return diff;
}

double Profiler::measureMs() const{
  return measureNs()/1000000.0;
}

double Profiler::measureS() const{
  return measureMs()/1000.0;
}

void Profiler::printNs() const{
  qDebug() << mName << "Time elapsed:" << measureNs() << "ns";
}

void Profiler::printMs() const{
  qDebug() << mName << "Time elapsed:" << measureMs() << "ms";
}

void Profiler::printS() const{
  qDebug() << mName << "Time elapsed:" << measureS() << "S";
} 
```

用法：

```
Profiler pro("Tag you want");
function();
pro.printMs(); 
```

# css - 如何在drupal 7中显示块中的节点

> ID：11198319
> 
> 赞同：0
> 
> 时间：2012-06-25T22:32:55.867
> 
> 标签：css, drupal, drupal-7

我正在尝试制作首页，并希望在一个块中的首页上显示一个投票节点。我怎样才能做到这一点？我已经尝试过意见，但我找不到任何方法。我怎样才能做到这一点？我的第二个问题是如何自定义网站的 CSS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:35:14.900

安装并启用[Nodeblock 模块](http://drupal.org/project/nodeblock/)

完成后，您需要编辑内容类型并启用 nodeblock。完成后，该内容类型的任何实例都将作为块页面上的块可用。

至于CSS问题，[请参阅此链接](http://drupal.org/node/394612)

# javascript - 将函数的原型设置为私有变量

> ID：11198321
> 
> 赞同：0
> 
> 时间：2012-06-25T22:32:59.550
> 
> 标签：javascript, scope, prototype

我本质上是在尝试在函数本身内设置函数的原型。目的是将许多功能隐藏在一个公共功能中，但保留功能。

[这是jsFiddle](http://jsfiddle.net/j6zd9/)中的非工作代码。预期的行为是显示“问候！” 和“带我去见你的领导。”

`Outer.prototype`可以通过将行和`Extensions`函数移出`Outer`函数到全局范围来“修复”代码。但是，这意味着该`Extensions`功能是公开的并且可以免费直接使用，这是不应该的。

实现这种“私人”行为的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:41:09.133

这不起作用，因为您正在**覆盖**原型。当你调用时`new Outer`，那么`this`会从*当前* `Outer.prototype`继承。然后，您将在函数内部进行覆盖`Object.prototype`，但它不会影响当前创建的实例，只会影响未来的实例。
您必须*扩展*现有的原型。

但是，如果您想隐藏某些功能，请使用**自调用功能**：

```
var Outer = (function() {

    function Extensions() {
    }
    Extensions.protoype.Greet = function () {
        alert(this.Greetings);
    }

    function Inner() {
        Extensions.call(this);
        this.Greetings = "Take me to your leader.";
    }
    Inner.prototype = Object.create(Extensions.prototype);
    Inner.prototype.constructor = Inner;

    function Outer() {
        Extensions.call(this);
        this.Greetings = "Greetings!";
    }
    Outer.prototype = Object.create(Extensions.prototype);
    Outer.prototype.constructor = Outer;

    Outer.prototype.getInner = function() {
        return new Inner();
    };

    return Outer;

}()); 
```

在这里，`Extensions`定义在立即执行的函数内部。因此，它无法从外部访问。只能`Outer`访问，因为您从该函数返回它。

有关在 JavaScript 中正确完成的继承的非常好的解释，请参阅[此答案](https://stackoverflow.com/questions/11072556/objects-dont-inherit-prototyped-functions/11072626#11072626)。

# php - 无法使用 header.php 文件修改标头信息

> ID：11198323
> 
> 赞同：-1
> 
> 时间：2012-06-25T22:33:10.493
> 
> 标签：php, html, header, http-headers

我有一个 header.php 文件，它包含在网站的每个页面上，它包含信息和开始标签等内容。

现在，每当我尝试从站点上的另一个页面发送标题信息时，我知道我不能这样做，因为我已经将 HTML 发送到客户端计算机。所以我在谷歌搜索后创建了一个函数并将其粘贴在 Header.php 文件的顶部：

```
 ob_start();
function redirect($url){
    flush();
    ob_flush();
    header("Location: $url");
    die;
} 
```

我可以从网站的其他任何地方调用它，但我仍然收到错误消息。我可能做错了这个功能，但这就是谷歌有时会做的事情。任何解决此问题的帮助都会很棒，谢谢。

编辑：我得到的错误是“无法修改标头信息 - 标头已由...发送”。我已经解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:37:22.900

flush() 将缓冲区写入浏览器 - 与您想要的相反。拆下冲洗管线。如果要清除缓冲区，请查看[http://us2.php.net/manual/en/function.ob-clean.php 。](http://us2.php.net/manual/en/function.ob-clean.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:37:39.480

您可以为标题功能添加@

```
@header("Location: $url"); 
```

但这不是很好的解决方案。

当您向浏览器发送数据时，您还发送了带有 200 状态的标头，然后您尝试发送 302 状态（用于重定向），因此，问题来自发送 200 状态。

[您可以在http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)阅读有关标头的更多信息

最好的问候，Zhirayr G.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:37:23.247

你应该说出你得到了什么“错误”，但是如果你在页面上的任何地方都包含这个函数，在任何东西被输出到浏览器之后，你会得到一个“无法修改标题信息”的错误。

是否将其放入函数中并不重要，它必须在任何内容输出到浏览器之前出现。

另外，为什么要`flush()`包含此功能？这也可能使重定向无法正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T22:46:57.067

我相信

```
ob_end_clean(); 
```

是您正在寻找的功能。因此，不要同时使用 flush() 和 ob_flush() 函数。

# webview - 如何更改 WinRT WebView 的缩放级别？

> ID：11198328
> 
> 赞同：4
> 
> 时间：2012-06-25T22:33:39.223
> 
> 标签：webview, zooming, windows-8, windows-runtime

如何更改 WinRT [Webview](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.webview)的缩放级别？

如果我给它焦点，我可以使用键盘放大/缩小`CTRL+ +` ，`CTRL+ -`
但这可以通过代码完成吗？

注意：将 WebView 放在 ScrollViewer 中并让其缩放，这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:18:38.307

不幸的是，我认为没有办法*直接*在托管代码中执行此操作。但是，如果您拥有内容或可以注入一些 css / 脚本，则有一种解决方法。

在您的 HTML 中，添加以下 css：

```
<style type="text/css">
body
{
zoom:100%;
}
</style> 
```

在您的 HTML 中还包括这样的脚本块：

```
function setZoomLevel(newZoom) {
    document.styleSheets[0]['rules'][0].style['zoom'] = newZoom;
} 
```

在您的 C# 代码中，添加一个辅助方法：

```
private void SetZoomLevel(int level)
{
    string slevel = string.Format("{0}%", level);
    webBrowser.InvokeScript("setZoomLevel", slevel);
} 
```

在您的 C# 代码中，您现在可以通过调用来调整缩放级别：

```
SetZoomLevel(200); 
```

这是我能找到的最好的，不幸的是，如果你不能注入样式和一些脚本，它就不起作用。

**注意：**虽然这确实以与调整缩放滑块几乎相同的方式缩放内容，但缩放滑块在桌面浏览器中不受影响。因此，如果您调用**SetZoomLevel(200);** 上面然后将滑块设置为 200%，您实际上会看到 400%。这在 WebView 中应该不是问题，因为*没有*滑块。

希望有人提出更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:09:09.957

嗯，好问题。我正在研究[ITransformProvider2 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448824(v=vs.85).aspx)，它是可访问性 API 的一部分，并为您提供桌面和 Metro 应用程序的编程缩放功能，但由于 WebView 是密封的，我担心它不会太有用。无论如何发布此信息，以防它帮助其他人取得进展。

Magnus，出于好奇，为什么 ScrollViewer 解决方案不适合您？

# google-apps-script - 有没有办法在 webform 和 Google 网站中自动收集 gmail id？

> ID：11198333
> 
> 赞同：0
> 
> 时间：2012-06-25T22:34:19.947
> 
> 标签：google-apps-script

1.  有没有办法自动收集填写 google-docs web-form 的人的 gmail id？

    （相当于谷歌应用程序在网络表单中“自动收集用户名”）。

2.  如果我有一个与普通 gmail 用户或 google 组共享的 google 应用程序站点，有没有办法运行 GAS 来自动收集 gmail id？

这就是我想要做的：

1.  我创建公共谷歌文档网络表单（在线测试）
2.  任何有链接的学生都可以参加考试，但我想自动收集他的 gmail id。
3.  我正在运行私人谷歌应用网站，与 students_list@googlegroups.com 共享。如果此列表中的特定学生访问我的网站，他将显示为使用 student1@gmail.com 登录

我想在网站上提供一个“显示结果按钮”，它会自动查找 student1@gmail.com 并从 1 的电子表格表单中查找数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:17:30.307

1）。简单回答是不。显而易见的后备方法是明确询问用户的电子邮件地址。出于安全原因，保持这种状态。

2) 答案再次是否定的。只有当您的脚本在域中并且登录的用户属于该域时，您才能获取电子邮件地址。

你可以看看[Ryan Boyd 对这个问题的回答，](https://stackoverflow.com/questions/11063749/how-do-i-get-an-access-token-using-urlfetchapp-with-gas)并使用类似的东西来明确访问用户的电子邮件 ID。

# macos - cURL GET 参数？

> ID：11198334
> 
> 赞同：-1
> 
> 时间：2012-06-25T22:34:45.657
> 
> 标签：macos, bash, curl, get

我无法从该站点下载源代码。它显示“错误 - 请填写所有表单数据”

带有 GET 参数的 url：

[http://bahn.ltur.com/index/search/?mnd=de&lang=de_DE&searchin=DE-SB-VI&trip_mode=trip_simple&from_spar=Hamburg+Dammtor&to_spar=Stuttgart+Hbf&start_datum=01.07.2012&start_time=23%3A49&end_datum=02.07.2012&end_time=23 %3A51&SEA_adults=1&SEA_kids1=0&SEA_kids2=0&SEA_adult1=&SEA_adult2=&SEA_adult3=&SEA_adult4=&SEA_adult5=&SEA_kid11=&SEA_kid12=&SEA_kid13=&SEA_kid14=&SEA_kid15=&y=5parx56](http://bahn.ltur.com/index/search/?mnd=de&lang=de_DE&searchin=DE-SB-VI&trip_mode=trip_simple&from_spar=Hamburg+Dammtor&to_spar=Stuttgart+Hbf&start_datum=01.07.2012&start_time=23%3A49&end_datum=02.07.2012&end_time=23%3A51&SEA_adults=1&SEA_kids1=0&SEA_kids2=0&SEA_adult1=&SEA_adult2=&SEA_adult3=&SEA_adult4=&SEA_adult5=&SEA_kid11=&SEA_kid12=&SEA_kid13=&SEA_kid14=&SEA_kid15=&trainclass_spar=2&x=56&y=5)

我通过 OSX bash 尝试了这个： curl -O get_ticket_list.html 也 w/ -L（你被重定向到 blah.com/details） 当我在浏览器中打开 URL 时没有错误。

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:41:23.337

如果您单击您在问题中提到的网址，那么它会将您重定向到[http://bahn.ltur.com/details](http://bahn.ltur.com/details)。

如果它要求您填写表单数据，您应该发送“POST”请求而不是“GET”请求。

POST 请求应将表单数据作为请求中的有效负载。

请参阅以下内容以发出 POST 请求：

*   [https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request](https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request)
*   [https://superuser.com/questions/361504/how-to-send-post-with-body-data-headers-andhttp-params-over-the-curl-command](https://superuser.com/questions/361504/how-to-send-post-with-body-data-headers-andhttp-params-over-the-curl-command)

# linux - 适合 Linux 的 SVG 渲染器？

> ID：11198340
> 
> 赞同：11
> 
> 时间：2012-06-25T22:35:03.380
> 
> 标签：linux, svg

我正在开发一些脚本来生成 SVG 文件，我想知道 Linux 上有哪些好的 SVG 渲染器。我知道 Firefox/Chrome 提供 SVG 支持（而且我感觉 Chrome 的渲染速度更快），但我可能还缺少其他独立的 SVG 渲染器。我知道 pySVG 的存在。

足够好我的意思是尽可能多地涵盖 SVG 1.1 规范。我更喜欢独立库的原因是我的工作流程更快，因为我不必每次都按 F5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T15:31:44.513

[Apache Batik](http://xmlgraphics.apache.org/batik/)是一个非常好的库/程序集合，支持很大一部分 SVG 规范。它包括一个独立的查看器/编辑器，以及一个可以将 SVG 转换为光栅图像格式的命令行光栅器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-15T17:11:36.130

**`qiv`**您可以尝试使用带有`-m -T`标志的命令行应用程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-16T09:46:36.520

draw.io 工具导出的 SVG 1.1 过于“现代”，无法正确渲染当前的 Batik、Cairo、qiv 甚至 FireFox：似乎它们都不支持 <foreignObject> 元素。然而，WebKit 确实可以正确呈现它，因此要将 SVG 转换为高质量的图像，我使用[http://wkhtmltopdf.org](http://wkhtmltopdf.org)中的“wkhtmlto...”工具。

`wkhtmltoimage`以屏幕分辨率生成输出，其`--zoom`开关缩放线条和文本以不同方式导致剪辑（尽管在 Chrome 中打开相同的 SVG 并正确执行缩放）。因此，我使用`wkhtmltopdf`的是生成中间 pdf，然后使用 ghostscript 将其渲染为高分辨率图像：

```
wkhtmltopdf callbacks.svg callbacks.pdf
gs -sDEVICE=pnggray -sOutputFile=callbacks.png -dBATCH -dNOPAUSE -r900 callbacks.pdf 
```

编辑：通过页面描述格式的一个缺点是生成的图像文件可能有非常大的边框。您可以尝试使用纸张尺寸和布局来最小化这种情况，或者只是自动裁剪它们，例如使用 ImageMagick：

```
convert callbacks.png -trim callbacks.png 
```

编辑：FireFox 49.0.2（2016 年 11 月）现在可以正确渲染 draw.io SVG。没有重新测试开罗或蜡染。[示例 draw.io 文件](https://drive.google.com/file/d/0By2CfaGRLqaBZmdEdzhqZGpDckE/view?usp=sharing)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T06:29:39.773

如果您安装 Qt 4.7 并选择本地安装的示例项目[svgviewer](http://doc.qt.nokia.com/4.7-snapshot/painting-svgviewer.html) ，只需单击 2 次 Qt SVG 。只需构建并运行即可获得动画视口：

![在此处输入图像描述](../Images/23951f881b518c30ae1d6c772d61f093.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T17:29:33.547

我推荐 WebkitGtk。这是用于驱动 Safari、Chrome 和许多其他浏览器的渲染器。它支持渲染 SVG 和 HTML。

只是`apt-get install libwebkitgt-3.0-0`。你可以通过运行来试一试`/usr/lib/webkitgtk-3.0-0/libexec/GtkLauncher`。

然后，您可以使用任何您喜欢的语言/绑定围绕 SVG 渲染器构建 GUI，包括 Python 的 Gtk 绑定：[http ://www.aclevername.com/articles/python-webgui/](http://www.aclevername.com/articles/python-webgui/)

这是另一篇关于使用 Webkit 和 pygtk 绑定构建桌面 UI 的好文章：http: [//arstechnica.com/information-technology/2009/07/how-to-build-a-desktop-wysiwyg-editor-with-webkit-and- html-5/](http://arstechnica.com/information-technology/2009/07/how-to-build-a-desktop-wysiwyg-editor-with-webkit-and-html-5/)

# vhdl - 如何使用 Synplify 生成比特流 (.bin) 文件

> ID：11198341
> 
> 赞同：1
> 
> 时间：2012-06-25T22:35:10.437
> 
> 标签：vhdl, fpga, xilinx

我正在使用 Synplify 版本 9.6.2

我想生成一个 .bin 文件以加载到 FPGA 上。Synplify 的输出是一个 .edn 或 .edf 网表。

任何人都知道这样做的过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:12:56.597

您必须获取 EDIF 网表并通过 Xilinx 的工具 (ISE) 将其输入，以将 EDF 转换为布局布线设计，然后转换为 .bin 格式的比特流。

# android - 为什么当我遇到断点时我的 NDK 应用程序会崩溃？- 或 - 为什么我会收到“此 Android 平台不支持线程调试！” 在姜饼上？

> ID：11198342
> 
> 赞同：2
> 
> 时间：2012-06-25T22:35:13.607
> 
> 标签：android, gdbserver, android-ndk

我正在尝试使用 NDK r6b 在 2.3.6 设备上调试多线程 Android 应用程序。我也尝试过使用 NDK r8 得到相同的结果。每当我遇到断点时，应用程序就会崩溃。我似乎遇到了“线程支持”部分的 NDK r5b 文档中描述的案例：

```
这实际上意味着：

- 如果您使用的是 Android 2.3 或之前的平台版本
  平台错误修复向后移植到它，您将能够调试本机
  自动线程。

- 如果你不是，你将只能调试主线程
  （与以前的 NDK 版本一样）。您还将看到以下消息
  启动 ndk-gdb 时（就在 gdb 提示符之前）：

     此安卓平台不支持线程调试！

  如果在非主线程上执行的函数上放置断点，则
  程序将在 GDB 中退出并显示以下消息：

        程序以信号 SIGTRAP、跟踪/断点陷阱终止。
        该程序不再存在。

```

我得到了提到的确切错误。我相信我正在处理这种情况，因为我`Thread debugging is unsupported on this Android platform!`在运行 ndk-gdb 时看到了。正如我所提到的，我在 Gingerbread 设备上，并且我`<uses-sdk android:minSdkVersion="9" android:targetSdkVersion="9"/>`在清单中有，所以我不应该进入这个案例。

以下是有关我为达到崩溃所遵循的步骤的更多详细信息：

1.  使用 Eclipse 中的 Debug 启动我的应用程序
2.  命中我在 System.loadLibrary 之后设置的断点，在该断点我的本地库被加载
3.  在我的项目目录中，运行 ndk-gdb --force --verbose --start
4.  gdb 启动成功并已附加
5.  在 gdb 中设置断点，在 Eclipse 中继续，然后在 gdb 中继续
6.  碰撞！

请参阅下面的编辑控制台转储。

对于为什么会发生这种情况的任何反馈，我将不胜感激！

```
$ ndk-gdb --force --verbose --start
Android NDK安装路径：/Users/tony/Documents/android-ndk-r8
使用默认的 adb 命令：/Users/tony/Documents/android-sdk-mac_86/platform-tools/adb
找到 ADB 版本：Android Debug Bridge 版本 1.0.29
使用亚行标志：
使用自动检测的项目路径：.
找到包名：com.mycompany.myapp
应用程序针对的 ABI：armeabi
设备 API 级别：10
设备 CPU ABI：armeabi-v7a armeabi
兼容设备 ABI：armeabi
使用 gdb 设置初始化：./libs/armeabi/gdb.setup
使用工具链前缀：/Users/tony/Documents/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-
使用应用程序输出目录：./obj/local/armeabi
找到可调试标志：true
找到设备 gdbserver：/data/data/com.appMobi.applab/lib/gdbserver
找到数据目录：'/data/data/com.mycompany.myapp'
找到第一个可启动的活动：.MainActivity
启动活动：com.mycompany.myapp/.MainActivity
## 命令：/Users/tony/Documents/android-sdk-mac_86/platform-tools/adb shell am start -n com.mycompany.myapp/.MainActivity
开始：意图 { cmp=com.mycompany.myapp/.MainActivity }
警告：活动未启动，意图已交付给当前正在运行的最顶层实例。
## 命令：/Users/tony/Documents/android-sdk-mac_86/platform-tools/adb shell sleep 2
发现运行PID：7341
成功启动 gdbserver。
设置网络重定向
## 命令：/Users/tony/Documents/android-sdk-mac_86/platform-tools/adb forward tcp:5039 localfilesystem:/data/data/com.mycompany.myapp/debug-socket
## 命令：/Users/tony/Documents/android-sdk-mac_86/platform-tools/adb shell run-as com.appMobi.applab lib/gdbserver +debug-socket --attach 7341
## 命令：/Users/tony/Documents/android-sdk-mac_86/platform-tools/adb pull /system/bin/app_process ./obj/local/armeabi/app_process
随附的; PID = 7341
监听 sockaddr 套接字调试套接字
184 KB/s（0.030 秒内 5720 字节）
从设备/模拟器中提取 app_process。
## 命令：/Users/tony/Documents/android-sdk-mac_86/platform-tools/adb pull /system/lib/libc.so ./obj/local/armeabi/libc.so
4347 KB/s（0.061s 内 273940 字节）
从设备/模拟器中提取 libc.so。
GNU gdb 6.6
版权所有 (C) 2006 Free Software Foundation, Inc.
GDB 是自由软件，受 GNU 通用公共许可证保护，您是
欢迎在某些条件下更改和/或分发它的副本。
键入“显示复制”以查看条件。
GDB 绝对没有任何保证。键入“显示保修”以获取详细信息。
此 GDB 配置为“--host=x86_64-apple-darwin --target=arm-elf-linux”。
（未找到调试符号）
映射共享库部分时出错：

...省略了共享库映射错误...

此安卓平台不支持线程调试！
此安卓平台不支持线程调试！
警告：无法找到动态链接器断点函数。
GDB 将无法调试共享库初始化程序
并跟踪显式加载的动态代码。
警告：共享库处理程序未能启用断点
来自/Developer/AppMobiAndroid/AppLab/obj/local/armeabi/libc.so的epoll_wait()中的0xafd0c5ac
此安卓平台不支持线程调试！
(gdb) 中断 dcanvas.cpp:544
0x81833c8a 处的断点 1：文件 /Developer/AppMobiAndroid/AppLab/jni/dcanvas.cpp，第 544 行。
(gdb) c
继续。

孩子以信号终止 = 5

程序以信号 SIGTRAP、跟踪/断点陷阱终止。
该程序不再存在。
(gdb)
子进程以信号 = 0x5 (SIGTRAP) 终止
GDBserver 退出

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:49:03.640

我怀疑它在达到断点时崩溃的原因是`bionic`Android 2.3.6版本附带的lib版本。很可能，该库无法支持线程或已损坏。

`bionic`lib 是为 Android 平台提供原生标准 C 代码 API 的核心运行时库。如果你能想到`glibc`，你就离题不远了。

相反，您可以做的最好的事情是修改您的本机代码并向 logcat 发送垃圾邮件以查看执行期间采用的路径并取消它。

# safari - 为什么在 Safari 6 和 Mobile Safari (iOS 6) 中的所有属性上未定义 window.location

> ID：11198349
> 
> 赞同：9
> 
> 时间：2012-06-25T22:36:02.473
> 
> 标签：safari, mobile-safari

当我输入

```
window.location 
```

我在所有属性上都不确定。

这是我的控制台：

![在此处输入图像描述](../Images/3344a63bbc328b40d6c1a98651ffdf50.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:44:02.483

此代码适用于 Safari (6.0.1) 及更早版本

```
 // Get location for REST TARGETS

    lcnURI = window.location.protocol + "//" + window.location.hostname + ":"
            + window.location.port + "/rest/"; 
```

当您查看日志时，window.location 似乎“脱离了上下文”。但是在使用的地方还好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T11:23:57.823

I can confirm this (Version 6.0 (8536.25)). Seems to be a Safari bug, as far as I can tell.

Tested on jsbin (http://jsbin.com/enugoj/1/):

```
console.log(window.location);
console.log(window.location.pathname);​ 
```

Results in Safari's console:

```
Location
  ancestorOrigins: undefined
  hash: undefined
  host: undefined
  hostname: undefined
  href: undefined
  origin: undefined
  pathname: undefined
  port: undefined
  protocol: undefined
  search: undefined
  __proto__: LocationPrototype

/enugoj/1 
```

Results in Chrome (Version 21.0.1180.89):

```
Location
  ancestorOrigins: DOMStringList
  assign: function () { [native code] }
  hash: ""
  host: "jsbin.com"
  hostname: "jsbin.com"
  href: "http://jsbin.com/enugoj/1"
  origin: "http://jsbin.com"
  pathname: "/enugoj/1"
  port: ""
  protocol: "http:"
  reload: function () { [native code] }
  replace: function () { [native code] }
  search: ""
  toString: function toString() { [native code] }
  valueOf: function valueOf() { [native code] }
  __proto__: Location
  1:14

/enugoj/1 
```

# c# - 将任何用户输入重定向到单独的底层程序

> ID：11198353
> 
> 赞同：1
> 
> 时间：2012-06-25T22:36:12.550
> 
> 标签：c#, windows-7, keyboard, mouse, user-input

这是我的处女帖，所以请放轻松！

我正在用 C# 编写一个程序，我想最大化并始终在顶部运行。该应用程序将是半透明的，因此用户仍然可以看到我最大化的应用程序背后发生的一切。

我的目标是实现这样一种场景，即用户（尽管我的应用程序具有焦点）仍然可以与所有其他正在运行的程序正常交互 - 就好像它是一块彩色玻璃，它只是将所有用户输入重定向到另一个预期的应用程序，例如什么曾经存在于覆盖层后面的给定 x,y 鼠标单击处。

基本思想是在任务栏以外的所有内容上创建一个叠加层，以将色调或色调应用于用户在屏幕上看到的所有内容。

请记住，我是一名本科生，所以知识有限 - 因此我在这里。

我还考虑了一些与图形驱动程序交谈以进行这些颜色更改的方法，但我不确定前进的方向？

我最初重定向用户输入的想法可行吗？或者我应该沿着驱动程序和窗户颜色配置文件等路线走下去吗？

因此，关于 gammaramp 的想法，我尝试了他跟随但没有按预期执行......

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections;
using System.Runtime.InteropServices;
using System.Drawing;

namespace GammaRAMP
{
public class Program
{

    [DllImport("user32.dll")]
    public static extern IntPtr GetDC(IntPtr hWnd);

    [DllImport("gdi32.dll")]
    public static extern bool SetDeviceGammaRamp(IntPtr hDC, ref RAMP lpRamp);

    [DllImport("gdi32.dll")]
    public static extern int GetDeviceGammaRamp(IntPtr hDC, ref RAMP lpRamp);

    [StructLayout(LayoutKind.Sequential, CharSet=CharSet.Ansi)]
    public struct RAMP
    {
        [ MarshalAs(UnmanagedType.ByValArray, SizeConst=256)] 
        public UInt16[] Red;
        [ MarshalAs(UnmanagedType.ByValArray, SizeConst=256)] 
        public UInt16[] Green;
        [ MarshalAs(UnmanagedType.ByValArray, SizeConst=256)] 
        public UInt16[] Blue;
    }

    public static void SetGamma(int gamma)
    {
        if (gamma <= 256 && gamma >= 1)
        {
            RAMP ramp = new RAMP();
            ramp.Red = new ushort[256];
            ramp.Green = new ushort[256];
            ramp.Blue = new ushort[256];

            for( int i=1; i<256; i++ )
            {
                int iArrayValue = i * (gamma + 128);

                if (iArrayValue > 65535) // I assume this is a max value.
                    iArrayValue = 65535;

                // So here I purposfully set red to max all the time expecting 
                // a lot of extra red but hardly any change occurs?

                //ramp.Red[i] = 65535; 

                // However if I do this:
                ramp.Red[i] = (ushort)iArrayValue;
                // I get VERY noticable changes?

                ramp.Blue[i] = ramp.Green[i] = (ushort)iArrayValue;
            }
            SetDeviceGammaRamp(GetDC(IntPtr.Zero), ref ramp);

        }
     }

    public static void Main(string[] args)
    {
        string ent = "";
        int g=0;

        // A RAMP struct to store initial values.
        RAMP r = new RAMP();
        // Store initial values.
       GetDeviceGammaRamp(GetDC(IntPtr.Zero),ref r);

        while (ent != "EXIT")
        {

            Console.WriteLine("Enter new Gamma (or 'EXIT' to quit):");
            ent = Console.ReadLine();
            try
            {
            g=int.Parse(ent);
            SetGamma(g);
            }
            catch
            {
            //Here only to catch errors where input is not a number (EXIT, for example, is a string)        
            }
        }

        // Reset any RAMP changes.
        SetDeviceGammaRamp(GetDC(IntPtr.Zero), ref r);
        Console.ReadLine();
    }
}
} 
```

期待回复，非常感谢您的宝贵时间！

好的，所以我玩弄了上面的代码，发现如果您将给定的红色/绿色/蓝色渐变成员更改为传递给的伽玛值的一个因子，`public static void SetGamma(int gamma)`并设置您不想更改的值，因为`iArrayValue = i * 128;`您可以获得所需的效果。现在剩下要做的就是将特定的 rgb 标量映射到滑块控件或彩色对话框。感谢大家的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:18:14.230

您可以尝试查看以下内容：

[http://www.pinvoke.net/default.aspx/gdi32.setdevicegammaramp](http://www.pinvoke.net/default.aspx/gdi32.setdevicegammaramp)

[http://www.pinvoke.net/default.aspx/gdi32/getdevicegammaramp.html](http://www.pinvoke.net/default.aspx/gdi32/getdevicegammaramp.html)

这些是易于访问的 gamma 修改器 - 您应该能够组合一个快速应用程序来查看它们是如何工作的。它不完全像覆盖，但它可以让您在低级别修改整个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:28:32.907

我不确定您是否要使用 WinForms 或 WPF 执行此操作。使用 WPF，您可以执行以下操作：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Background="Transparent"
    AllowsTransparency="True" WindowStyle="None" Topmost="True" WindowState="Maximized">
</Window> 
```

这将为您提供一个完全透明的窗口，所有点击等都将转到底层屏幕。然后，您可以将控件放在窗口上，它们将被看到并响应点击。然后，例如，如果您希望这些控件部分透明，则可以使用 Opacity="0.2"。

[在此处](https://stackoverflow.com/questions/112224/click-through-transparency-for-visual-c-sharp-window-forms)查找WinForms 解决方案。

编辑：要在屏幕上始终保持在顶部并且没有鼠标或键盘效果，请使用...

```
this.TopMost = true;
this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
this.WindowState = FormWindowState.Maximized;
this.Opacity = 0.5;
int initialStyle = GetWindowLong(this.Handle, -20);
SetWindowLong(this.Handle, -20, initialStyle | 0x20); 
```

# php - 在哪里调用类中的 ini_set() 函数？

> ID：11198360
> 
> 赞同：6
> 
> 时间：2012-06-25T22:36:45.820
> 
> 标签：php, ini-set

我想知道放置 ini_set() 函数的最佳位置在哪里，因为我认为当`ini_set`函数在这样的方法中时：

```
private function archiveBackup() {
    ini_set('memory_limit', '128M');
    ini_set('max_execution_time', 0);
    ...
} 
```

`ini_set`功能不行？！

我的脚本是这样工作的：jQuery ajax 查询-> ajax.php 文件（创建类的实例并调用一些方法）-> 调用类的方法。

最好的地方在哪里？在`ajax.php`文件中还是在类的开头或内部方法中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T22:39:16.450

一般来说，最好的`ini_set`调用位置是在脚本开始处（或附近）。这样一来，就好像它们最初是在`php.ini`文件中定义的一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:48:28.580

我注意到您已将 ini_set 放在 main 函数的开头，这很可能是正确的。

所以：

> ini_set 函数不起作用？！

可能是因为您的共享主机提供商有权限以某种方式阻止了您。

正如 Kolink 所说，托管服务提供商很可能正在使用`disable_functions`您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:50:35.117

可能被视为个人偏好，但我个人避免在我的应用程序配置文件之外使用任何类型的 PHP 配置指令。换句话说，如果我的项目的某个类需要特定的 PHP 运行级别配置，我会在类描述中注明该要求，但仍将配置本身应用到我的主配置文件中。

# java - 如何写入文件并在java中动态保存

> ID：11198361
> 
> 赞同：3
> 
> 时间：2012-06-25T22:36:53.470
> 
> 标签：java, java-io

我需要写入文件而不是 System.out.println 并同时保存，以便用户可以通过打开文件随时查看进度。

现在我正在使用以下代码

```
 FileWriter fstream = null;
        File file1 = new File(logFile);
        fstream = new FileWriter(file1);
        out = new BufferedWriter(fstream);
               out.write(msg);
     out.write("\n"); 
```

但它不会将内容保存到文件中，除非我说 Out.close();

仅供参考 - 1\. 这是 Java EE 应用程序代码。2\. 我不想使用 Log4jLogger

有没有更简单的方法来做到这一点？任何指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T22:39:34.680

您无需致电`close()`- 只需致电`flush()`。

> 刷新此输出流并强制写出任何缓冲的输出字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:43:15.543

你也可以这样做。

```
PrintWriter out = new PrintWriter(logFile, "UTF-8");
out.println(msg);
out.flush(); 
```

如果您要求在特定时间进行输出，请使用该`flush()`方法。此外，通过这种方式，您可以为输出文件指定编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:54:19.663

简短的回答是`OutputStream#flush()`。可悲的答案是，实际上在许多 Java EE 部署中很难保证，对于 JVM 和虚拟化云事物，f_sync() 已经失去了它曾经拥有的承诺。

# ios - iOS 自定义 UITableView 单元格

> ID：11198362
> 
> 赞同：-5
> 
> 时间：2012-06-25T22:36:53.833
> 
> 标签：ios, uitableview

我使用自定义样式的 UITableView 我在情节提要中收到红色警告（未分类编译失败）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"Cell"];

    codeLabel.text = [[courseMURArray objectAtIndex:indexPath.row] objectForKey:@"courseCode"];
    nameLabel.text = [[courseMURArray objectAtIndex:indexPath.row] objectForKey:@"courseName"];
    houreLabel.text = @"3";
    priceLabel.text = @"0.000";

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:44:55.163

Try it like that:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"YourCell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc]init]; //or some other init, don't have a Mac nearby, don't remember it by heart
    }

    self.codeLabel.text = [[courseMURArray objectAtIndex:indexPath.row] objectForKey:@"courseCode"];
    self.nameLabel.text = [[courseMURArray objectAtIndex:indexPath.row] objectForKey:@"courseName"];
    self.houreLabel.text = @"3";
    self.priceLabel.text = @"0.000";

    [cell addSubview:self.codeLabel];
    [cell addSubview:self.nameLabel];
    [cell addSubview:self.houreLabel];
    [cell addSubview:self.priceLabel];

    return cell;
} 
```

Hope it helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:26:51.157

您的问题不清楚，但我猜您的应用程序无法构建。在下面查看您的问题的可能解决方案以及帮助您找到问题的一些步骤。

[Xcode 4.2 使用原型单元编译失败](https://stackoverflow.com/q/7042279/558933)

# python - 如果服务器不支持 df -hi，Paramiko get() 会引发 IOError "No such file"

> ID：11198364
> 
> 赞同：2
> 
> 时间：2012-06-25T22:37:01.140
> 
> 标签：python, sftp, paramiko

`IOError: [Errno 2] No such file`当我尝试从远程服务器上获取文件时，我遇到了 paramiko 的问题。这是我的代码：

```
# set up a transport object t (using an rsa key), which connected successfully
>>> t.is_active()
True
>>> sftp = paramiko.SFTPClient.from_transport(t)
>>> files = sftp.listdir()  # files holds the list ['canceled', 'downloaded', 'FILE.06222012.TXT']
>>> sftp.get(files[2], '.')
IOError: [Errno 2] No such file 
```

但是，当我在命令行上连接到 sftp 时（作为我打开 python repl 的同一用户），我*可以获得*该文件。有任何想法吗？

编辑：我发现这篇文章似乎是我遇到的问题[https://bugs.launchpad.net/paramiko/+bug/492238](https://bugs.launchpad.net/paramiko/+bug/492238) 在交互式 sftp 提示符中：

```
sftp> df -hi
Server does not support statvfs@openssh.com extension 
```

这个错误来自 2009 年并且没有关闭（但我使用的是最新的 paramiko 1.7.7.1）。有人知道解决方法吗？我可以强制 paramiko 只做相当于普通 sftp get 的操作，而不尝试检查文件完整性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T14:38:17.443

I had the same issues, however, I did not run into problems because of sftp and df. Make sure to give a proper filename for *localpath*!

```
sftp.get(files[2],'file2.txt') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:10:15.727

无论如何，这可能最终会调用`stat()`，但您可以尝试使用 `STFPClient.open()`which 返回一个`SFTPFile`实例。然后调用它的`read()`方法来获取文件的内容。所以，像这样：

```
sftp = paramiko.SFTPClient.from_transport(t)
files = sftp.listdir()  # files holds the list ['canceled', 'downloaded', 'FILE.06222012.TXT']
remote_file = sftp.open(files[2])
with open(files[2], 'w') as local_file:
    local_file.write(remote_file.read())
remote_file.close() 
```

# c++ - 在archlinux上安装boost devel

> ID：11198365
> 
> 赞同：14
> 
> 时间：2012-06-25T22:37:08.223
> 
> 标签：c++, boost, archlinux

我在archlinux上配置了一个远程服务器，我需要安装boost libs的开发版本才能编译我的程序，更具体地说`<boost/asio.hpp>`。

我试过`sudo pacman -S boost-libs`了，它安装了一些东西，但没有安装开发文件，我也试过了`sudo pacman -S boost-libs-dev`，但它没有用。

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-25T22:38:43.500

```
$ pacman -Ss boost
extra/boost 1.49.0-2 [installed]
    Free peer-reviewed portable C++ source libraries - Development
extra/boost-libs 1.49.0-2 [installed]
    Free peer-reviewed portable C++ source libraries - Runtime 
```

你需要“提升”。

# javascript - Javascript每x次迭代在一个循环内运行一个函数

> ID：11198373
> 
> 赞同：3
> 
> 时间：2012-06-25T22:37:37.613
> 
> 标签：javascript

我有一个未知值的变量，它将是一个整数。为此，让我们说`var a = 3;`

我有一个连续调用的函数：

```
var a = 3;
function anim() {
        left = parseInt(galleryInner.css('left'), 10);   
        if(Math.abs(left) >= (galleryItem.length * galleryItem.width())){
            galleryInner.css('left', 0);
        }
        galleryInner.animate({left: '-=20' }, 200, anim);

        that.appendEnd();
} 
```

我只想每 3 次运行一次 this.appendEnd()，因为`a === 3`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T22:41:05.657

实例化一个计数器变量，每次调用 anim() 时递增。什么时候

```
counter % a === 0 
```

然后你运行 this.appendEnd()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T22:41:37.160

创建一个保持当前计数的第二个变量，然后将您只希望每第三次迭代的调用包装为

```
if(counter % a == 0) {
    //code you want called
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T22:41:26.527

那么首先你需要一个递增的变量来计算函数被调用的次数。例如，用这个开始你的函数：

```
var me = arguments.callee;
me.timesCalled = (me.timesCalled || 0)+1; 
```

现在，您可以检查该计数器。要查看“每 X 次”发生某事，只需检查 X 的模数是否为 0：

```
if( me.timesCalled % a == 0) { /* do something */ } 
```

你有它！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T22:52:33.977

这是一种封装计数器的方法，但对“a”使用全局变量：

```
var a = 3;

function anim(){
    // Run the usual code here
    // ...

    if (++anim.counter % a === 0) {
        // Run the special code here
        // ...
    }
}
// Initialize static properties.
anim.counter = 0; 
```

这是一种封装“a”变量的方法，将其称为“频率”：

```
function anim(){
    // Run the usual code here
    // ...

    if (++anim.counter % anim.frequency === 0) {
        // Run the special code here
        // ...
    }
}
// Initialize static properties.
anim.counter = 0;
anim.frequency = 1; 
```

然后在第一次调用 anim() 之前设置所需的频率值：

```
anim.frequency = 3; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T22:44:07.830

您应该检查您的计数器是否大于 0，否则您的函数 `appendEnd`将在第一次被触发：

```
if (counter > 0 && counter % a == 0) { ... } 
```

下面是完整的代码：

```
var appendEndExecutedTimes = 0;

function anim(){
        left = parseInt(galleryInner.css('left'), 10);   
        if(Math.abs(left) >= (galleryItem.length * galleryItem.width())){
            galleryInner.css('left', 0);
        }
        galleryInner.animate({left: '-=20' }, 200, anim);

        if (appendEndExecutedTimes > 0 && appendEndExecutedTimes % a === 0) {
           that.appendEnd();
        }
        appendEndExecutedTimes += 1;

    } 
```

# c# - Corel 绘图 API (Java/C#)

> ID：11198374
> 
> 赞同：3
> 
> 时间：2012-06-25T22:37:38.533
> 
> 标签：c#, java, api, coreldraw

我想知道是否有 Corel Draw for Java 或类似的 API。我的一个朋友需要一个小程序来编辑一些图片。它必须是 Corel Draw，但对编程语言没有限制（首选 Java 或 C#...）

不幸的是，我在互联网上没有找到任何有用的东西……也许你们中的一些人知道更多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T09:56:13.667

我发现最好的方法是使用 VBscripts。

如果您仍然感兴趣，请查看下面的代码。脚本（从 java 开始）采用 2 个参数：源文件和目标文件，并在将源文件保存到目标之前对源文件进行一些操作。

此脚本的限制是它依赖于“CorelDraw x6”。您可以将其编写得更通用并查找各种 CorelDraw OLE 对象。

这种机制的局限性在于，并非所有事情都可以用 VB 完成（我从未实现过获得 CorelDraw 页面的大小！！！）

代码：

```
<package>
    <job id="Main">
        <reference object="CorelDraw.Application" version="16.0" />
        <script language="VBScript">
            Option Explicit

            Dim app

            ' Parameters
            Dim source, dest
            if ( Wscript.Arguments.count<2) Then
                    Err.Raise 2, "MakeThumb", "Invalid paremeters count"
                    Wscript.echo "Invalid paremeters count"
                    Wscript.quit -999
                    end if

            source= Wscript.Arguments.Item(0)
            dest= Wscript.Arguments.Item(1)

            'Wscript.echo source
            'Wscript.echo dest

            ' Initialisation
            set app= nothing
            On Error resume next
            ' Retrieval of an existing instance
            Set app = GetObject(, "CorelDraw.Application.16")
            On Error GoTo 0
            ' No existing instance, creatoing a new one
            If (app is nothing) Then
                    Err.Clear
                    On Error resume next
                    Set app = CreateObject("CorelDraw.Application.16")
                    On Error GoTo 0
                    End If
            If (app Is Nothing) Then
                    Err.Raise 2, "MakeThumb", "Impossible to open Corel Draw"
                    'stop
                    Wscript.quit -998
                    end if

            app.visible=true
            Dim doc
            set doc = app.OpenDocument(source)

            ' Trying to get source document's size

            'Dim cs
            'Set cs = CreateObject( "CorelDRAW.CorelScript" )
            Dim pg
            Set pg = doc.pages.Item(1)

            doc.unit=5 'unit=pixels

            Dim h0, w0

            on error resume next
            ' if it fails, I assume the dimention are an A4

            h0=pg.SizeHeight
            w0=pg.SizeWidth
            if (err<>0) then
                w0=2480
                h0=3508
                end if
            on error goto 0

            Dim h, w, s, r
            'Wscript.echo "h orig=" + CStr(h0) + ",w orig=" + CStr(w0) + " unit=" + CStr(doc.Unit)

            h = doc.ToUnits(h0, cdrPixel)
            w = doc.ToUnits(w0, cdrPixel)

            s = h * w
            r = Sqr(500990 / s)
            'Wscript.echo "h=" + CStr(h) + ",w=" + CStr(w) + ",s=" + CStr(s) + ", r=" + CStr(r)

            Dim h2, w2
            h2 = h * r
            w2 = w * r

            'Wscript.echo "h2=" + CStr(h2) + ",w2=" + CStr(w2)

            Dim exportFilter
            Set exportFilter = doc.ExportBitmap( _ 
            dest, cdrPNG, cdrCurrentPage, cdrRGBColorImage, w2, h2, 72, 72, _ 
            cdrNormalAntiAliasing, False, False, True, False, cdrCompressionNone, Nothing, Nothing)
            exportFilter.Finish

            doc.close 
            app.quit

            Set app = Nothing 
            Set doc = Nothing
            Wscript.quit 0

        </script>
    </job>
</package> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:37:16.013

我知道您使用 VB 编写了一些宏。您可以在以下位置找到 pdf 文档中的所有信息：

C:\Program 文件 (x86)\Corel\Corel Graphics 12\Programs

PDF：**dvba_pg.pdf**

PP VBA 对象模型.pdf：**CorelDRAW VBA 对象模型.pdf**

我希望这能帮到您。

# vim - 如何创建一个键映射以在 Vim 中打开和关闭 quickfix 窗口

> ID：11198382
> 
> 赞同：10
> 
> 时间：2012-06-25T22:38:03.307
> 
> 标签：vim, vi

如果我使用`:lopen`，Vim 会打开 quickfix 窗口，如果我`:lcl`在有错误的窗口（或 quickfix 窗口本身）上使用，它会关闭它。

我想做的`.vimrc`是创建一个打开快速修复的地图，如下所示：

```
nnoremap <F2> :lopen 10<CR> 
```

但是当我`F2`再次按下它时，它会使用`:lcl`.

有没有办法知道快速修复窗口是否打开然后执行`:lcl`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2020-07-29T20:40:50.633

在足够新的 vim 版本中（如果`getwininfo`可用），请尝试：

```
function! ToggleQuickFix()
    if empty(filter(getwininfo(), 'v:val.quickfix'))
        copen
    else
        cclose
    endif
endfunction

nnoremap <silent> <F2> :call ToggleQuickFix()<cr> 
```

定制，

*   要在垂直窗格中打开窗口，`vertical copen`
*   对于位置列表（而不是快速修复），将`copen`/`cclose`替换为`lopen`/ `lclose`，并`v:val.quickfix`替换为`v:val.loclist`.)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T00:26:30.483

有一个vim插件：[https ://github.com/milkypostman/vim-togglelist](https://github.com/milkypostman/vim-togglelist)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T03:49:05.963

这是另一种方法，可能会跳过一些血淋淋的细节，但它有效：

```
function! ToggleQuickFix()
  if exists("g:qwindow")
    lclose
    unlet g:qwindow
  else
    try
      lopen 10
      let g:qwindow = 1
    catch 
      echo "No Errors found!"
    endtry
  endif
endfunction

nmap <script> <silent> <F2> :call ToggleQuickFix()<CR> 
```

如果没有错误， lopen 将不起作用，所以我尝试抓住它，以防万一它打开窗口并创建一个变量。然后，如果没有，它只会关闭它。

很酷的是，这种方法可以用于您想要切换的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-12T11:17:24.820

你可以使用[https://github.com/liuchengxu/vim-clap/](https://github.com/liuchengxu/vim-clap/)

和：

```
nnoremap <F2> :Clap loclist<CR> 
```

# signals - 向进程发送信号后有没有办法等待？

> ID：11198387
> 
> 赞同：0
> 
> 时间：2012-06-25T22:38:56.457
> 
> 标签：signals, go

当一个信号（如 os.Interrupt）被发送到一个[进程](http://golang.org/pkg/os/#Process.Signal)时，该进程是否等待直到完成该进程？或者，我们必须等待一段时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:53:22.977

我想您是在问发送信号是否会等到该过程完成？

答案是它取决于平台和您发送的信号类型以及进程对信号的作用。一些信号如 Kill 不能被捕获，会导致进程终止。除非流程处理它们，否则其他人不会做任何事情。如果流程不处理它们，还有其他人会做一些事情，但是如果流程想要做一些不同的事情，它可以处理它。在我了解更多关于您所问的内容之前，这是我能给出的最佳答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:00:20.307

您必须等待片刻（或很长时间，甚至可能永远等待，具体取决于信号的处理方式）。

# oop - 面向组件和面向对象的语言有什么区别？

> ID：11198389
> 
> 赞同：17
> 
> 时间：2012-06-25T22:39:15.357
> 
> 标签：oop, com

我在一本关于 WCF 的书中遇到了这一行：

> ...并且用于编写 COM 组件的语言（例如 C++ 和 Visual Basic）充其量是面向对象的，但不是面向组件的...

两者有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T22:59:36.550

我的观点/理解可能是错误的，我会因为写这篇文章而火上浇油。

面向“我”意味着一种识别关键数据模型的方法，这些模型对问题的上下文至关重要，以及在问题的上下文中操纵这些数据状态的相应方法。它是一种组织数据的模式。另一种模式是简单地根据细分为可管理级别的功能进行组织 - 程序。

面向组件的模式并不关心您如何组织各种数据模型，而是**您如何将它们捆绑起来**。这就是他们彼此交谈的方式。它可以是多种方式 COM/RPC、Web 服务 (REST/SOAP) 等。即松耦合或紧耦合。

作者只是想说 COM 功能是用一种不提供内置 COM 工具的语言构建的：)

我的理解是，该声明是不正确的，因为选择捆绑组件是一种比 C/C++ 等语言提供的更高级别的抽象。COM 只是提供了一种绑定组件的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T22:28:45.013

这是我的看法，

继承与接口似乎是讨论 2 时经常提到的话题。

我还认为组件设计意味着您正在处理黑匣子

组件设计似乎也涵盖了超出单个内存空间的系统。所以调用网络服务或其他远程服务。

我不会说这些是相互竞争的范式，而是不同的范式。

# c# - 请求失败，HTTP 状态为 417：预期失败 - 使用 Web 服务

> ID：11198393
> 
> 赞同：22
> 
> 时间：2012-06-25T22:39:28.940
> 
> 标签：c#, asp.net, web-services, exception

几分钟前，我在 Visual Studio 2010 中处理一个项目，突然我的电脑重新启动。
重新启动后，在本地计算机上浏览该网站时出现以下错误：

> 请求失败，HTTP 状态为 417：预期失败。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Net.WebException：请求失败，HTTP 状态 417：预期失败。

我的网站名称是：`MyWebSite`
我在 MyWebSite 正在使用它的远程服务器（vps）上有一个 Web 服务，并且该错误与它有关。

```
Line 172:        [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://tempuri.org/MyWebSiteEnable", RequestNamespace="http://tempuri.org/", ResponseNamespace="http://tempuri.org/", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
Line 173:        public bool MyWebSiteEnable() {
Line 174:            object[] results = this.Invoke("MyWebSiteEnable", new object[0]);
Line 175:            return ((bool)(results[0]));
Line 176:        } 
```

该网络服务的一切都很好。
那么这个错误是什么，我该如何解决？
该 Web 服务中只有一个简单的 bool 方法返回 true。
我在代码隐藏中使用该网络服务，如下所示：

```
private void CheckForPageExpiration()
{
    MyService service = new MyService();
    if (service.MyWebSiteEnable())
    {
    }
    else
    {
        Response.Redirect("~/blank.aspx");
    }
} 
```

我删除了该 Web 服务并再次添加它，但仍然有该错误！
那有什么问题呢？

提前致谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-25T23:51:53.940

[这](http://www.codeproject.com/Articles/94235/The-request-failed-with-HTTP-status-417-Expectatio)表明问题是代理服务器不支持来自服务器的 100-continue 响应，并显示了解决它的代码。这可以解释为什么它可以在另一个网络上运行。

由于您不太可能说服您的 ISP 改变他们的做法（尽管对请求没有害处），您应该关闭发送 100-Continue 的行为，如链接所示：

将此代码放在 Web 请求之前：

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

`<configuration>`或者，将以下行作为标记的子项添加到应用程序配置文件中：

```
<system.net>
    <settings>
        <servicePointManager expect100Continue="false" />
    </settings>
</system.net> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T06:01:11.147

在您的配置文件中添加以下代码行。

```
<system.net>
    <defaultProxy useDefaultCredentials="true" >
    </defaultProxy>
</system.net> 
```

# ruby-on-rails - 自定义按包含字母和数字的字符串的字段对对象进行排序

> ID：11198396
> 
> 赞同：0
> 
> 时间：2012-06-25T22:39:42.380
> 
> 标签：ruby-on-rails, sorting, activerecord

我有一个评估标准模型，它有一个包含字符串值的 :label 字段，例如

```
//P1
//P2
//P3
//P4
//M1
//M2
//M3
//M4
//D1
//D2
//D3
//D4
//etc. 
```

我想按此字段对查询进行排序，但首先查看数字，然后按每个数字的 P、M、D 顺序查看，结果是：

```
//P1
//M1
//D1
//P2
//M2
//D2
//P3
//M3
//D3
//P4
//M4
//D4
//etc. 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:15:57.133

尝试这个：

```
sort_order = "PMD"

%w(//P1 //P2 //P3 //P4 //M1 //M2 //M3 //M4 //D1 //D2 //D3 //D4 ).sort_by do  |str| 
  str.gsub(/^.{3}/, '') + sort_order.index(str[2]).to_s
end 
```

# php - 如何在单个页面上显示每个（只有一个）搜索结果mysql php

> ID：11198399
> 
> 赞同：0
> 
> 时间：2012-06-25T22:39:51.623
> 
> 标签：php, jquery, mysql, search, pagination

嗨，我有一个名为“BookPage”的表格，列：“PageText”

我已经在“PageText”列上设置了搜索（参见下面的代码）。现在，当用户搜索关键字时，所有结果页面都将显示在另一个页面下方。

有没有办法，如果我可以通过单击某种“下一步”按钮链接在其各个页面上显示每个页面文本，它们会移动到下一页。

**表单.php**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Search</title>
<link href="default.css" rel="stylesheet" type="text/css" media="screen" />
</head>

<body>
<?php

// include MySQL-processing classes

require_once 'mysql.php'; 

try{

// connect to MySQL

$db=new MySQL(array('host'=>'','user'=>'','password'=>'','database'=>''));

$searchterm=$db->escapeString($_GET['searchterm']);

$result=$db->query("SELECT * FROM BookPage WHERE (PageText) like \"%$searchterm%\" ");

if(!$result->countRows()){

echo '<div class="maincontainer"><h2>No results were found. Go back and try a new search.</h2></div>'."n";

}

else{

// display search results

echo '<div class="maincontainer"><h2>Your search criteria
returned '.$result->countRows().' results.</h2>'."n";

while($row=$result->fetchRow()){

echo '<div class="rowcontainer"><p><strong>Book Id:
</strong>'.$row['BookId'].'<p><p><strong>Page Id:
</strong>'.$row['PageId'].'</p><p><strong>Page Text:
</strong>'.$row['PageText'].'</p></div>'."n"; 

}

}

echo '</div>';

}

catch(Exception $e){

echo $e->getMessage();

exit();

}

?>
</body>
</html> 
```

嗨，请参阅下面的修改后的代码不起作用，您能告诉我哪里出错了。

**修改代码**

```
<?php

// include MySQL-processing classes

require_once 'mysql.php'; 

try{

// connect to MySQL

$db=new MySQL(array('host'=>'',''=>'','password'=>'','database'=>''));

    //page
 if (isset($_GET['page'])) {
    $page_no = $_GET['page'];
    $next_pg = $page_no + 1;
} else {
    $page_no = 0;
    $next_pg = 1;
}

    $searchterm=$db->escapeString($_GET['searchterm']); 
    $result=$db->query("SELECT * FROM BookPage WHERE (PageText) like \"%$searchterm%\" ORDER BY BookId ASC LIMIT 0, $page_no");

if(!$result->countRows()){

echo '<div class="maincontainer"><h2>No results were found. Go back and try a new search.</h2></div>'."n";

}

else{

// display search results

echo '<div class="maincontainer"><h2>Your search criteria returned '.$result->countRows().' results.</h2>'."n";

while($row=$result->fetchRow()){

$searchvalue = implode('<span style="color:green;font-weight:800;background-color:yellow;">'.$_GET['searchterm'].'</span>',explode($_GET['searchterm'],$row['PageText'])); 
echo '<div class="rowcontainer"><p><strong>Book Id:
</strong>'.$row['BookId'].'<p><p><strong>Page Id:
</strong>'.$row['PageId'].'</p><p><strong>Page Text:
</strong>'.$searchvalue.'</p></div>'."n";  
}

}

echo '</div>';

}

catch(Exception $e){

echo $e->getMessage();

exit();

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:46:19.437

您在 MySQL 中使用 LIMIT 子句。跟踪您在 PHP 中所在的结果行，并通过您的链接传递变量以在下一个查询中使用。

从 MySQL 文档（http://dev.mysql.com/doc/refman/5.1/en/select.html）：

> LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。
> 
> 有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为0（不是1）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T22:48:57.630

您可以尝试将查询更改为：

```
if (isset($_GET['page'])) {
    $page_no = $_GET['page'];
    $next_pg = $page_no + 1;
} else {
    $page_no = 0;
    $next_pg = 1;
}

$result=$db->query("SELECT * FROM BookPage WHERE (PageText) like \"%$searchterm%\" ORDER BY id ASC LIMIT 1, $page_no"); 
```

然后插入如下链接：

```
<a href="thispage.php?page=<?php echo $next_pg; ?>">Next page</a> 
```

这将做的是一次获得一个结果，并根据您所在的页面抵消结果。这样做时唯一重要的事情是按某些东西对结果进行排序，以便每个查询都以相同的顺序排列结果。例如，按 ID ASC 排序（根据我的示例）。

# cordova - Phonegap：无法使 localStorage 持久化

> ID：11198403
> 
> 赞同：2
> 
> 时间：2012-06-25T22:40:29.687
> 
> 标签：cordova, persistence, local-storage, persist, lawnchair

所以我初始化了一切：

```
var Store = new Lawnchair({table:'mightapp', adaptor:'gears'}, 
    function(s) {
    var obj = {msg: 'hooray!'};

    s.save({key: "msg", value: obj});
}); 
```

然后我注释掉这条消息以测试它是否持续存在......

```
var Store = new Lawnchair({table:'mightapp', adaptor:'gears'}, 
    function(s) {
    //var obj = {msg: 'hooray!'};

    //s.save({key: "msg", value: obj});
}); 
```

它没有——我做错了什么？我正在制作一个健身应用程序，我需要永久保存人们的锻炼/锻炼统计数据……我应该只做一些文件 i/o 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:36:02.953

`dom`适配器对我来说很好用。这是我用来在应用程序重新启动时保留数据的代码。

```
<script type="text/javascript">
    var store = new Lawnchair({
        adapter: "dom",
        name: "testing"
    }, function(store) {
    });

    store.exists('dhaval', function(available){
        var preStr = "";

        // check whether required data is available, if not create it
        if(available){
            preStr = "data is already available, ";
        }else{
            preStr = "data is not available, ";
            var me = {
                key: 'dhaval'
            };

            // save it
            store.save(me);
        }

        // access it later... even after app restart!
        store.get('dhaval', function(me) {
            $("#data").html(preStr + JSON.stringify(me));
        });
    });
</script> 
```

对于完整的源代码检查 git repo [android-cordova-lawnchair](https://github.com/dhavaln/cordova-examples/tree/master/android-cordova-lawnchair)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:52:08.923

尝试将您的适配器切换到“dom”，因为我认为浏览器不再支持“gears”。

# c# - WCF 异步服务或 MVC 异步控制器线程使用情况？

> ID：11198404
> 
> 赞同：1
> 
> 时间：2012-06-25T22:40:30.540
> 
> 标签：c#, asp.net-mvc, wcf, asynchronous, thread-safety

谁能解释何时使用异步控制器与异步 wcf 服务？如线程使用等？我的异步控制器看起来像这样

```
 public class EventController : AsyncController
{
    [HttpPost]
    public void RecordAsync(EventData eventData)
    {
        AsyncManager.OutstandingOperations.Increment();
        Debug.WriteLine(string.Empty);
        Debug.WriteLine("****** Writing to database -- n:{0} l:{1} ******", eventData.Name, eventData.Location);
        new Thread(() =>
        {
            AsyncManager.Parameters["eventData"] = eventData;
            AsyncManager.OutstandingOperations.Decrement();
        }).Start();
    }

    public ActionResult RecordCompleted(EventData eventData)
    {
        Debug.WriteLine("****** Complete -- n:{0} l:{1} ******", eventData.Name, eventData.Location);
        Debug.WriteLine(string.Empty);
        return new EmptyResult();
    }
} 
```

与我的 WCF 服务

```
[ServiceBehavior(Namespace = ServiceConstants.Namespace)]
public class EventCaptureService: IEventCaptureService
{
    public EventCaptureInfo EventCaptureInfo { get; set; }

    public IAsyncResult BeginAddEventInfo(EventCaptureInfo eventInfo, AsyncCallback wcfCallback, object asyncState)
    {
        this.EventCaptureInfo = eventInfo;
        var task = Task.Factory.StartNew(this.PersistEventInfo, asyncState);
        return task.ContinueWith(res => wcfCallback(task));
    }

    public void EndAddEventInfo(IAsyncResult result)
    {
        Debug.WriteLine("Task Completed");
    }

    private void PersistEventInfo(object state)
    {
        Debug.WriteLine("Foo:{0}", new object[]{ EventCaptureInfo.Foo});
    }

} 
```

请注意，WCF 服务使用任务，而控制器使用线程。我对线程及其工作原理知之甚少。我只是想知道其中哪一个会更有效并且不会轰炸我的服务器。总体目标是捕获 Web 应用程序中的一些活动并调用控制器或服务（两者都将位于不同的域中），哪种方法更好更好。哪个是真正的异步？他们使用相同的线程吗？任何帮助，提示，技巧，链接等......总是受到赞赏。我的基本问题是异步 WCF 服务还是异步 MVC 控制器？

谢谢！

# php - Yii CActiveForm 客户端验证在我的小部件中不起作用

> ID：11198405
> 
> 赞同：2
> 
> 时间：2012-06-25T22:40:34.023
> 
> 标签：php, ajax, widget, yii

我的应用程序的所有页面都需要“报告错误”模式表单。所以我以小部件的形式制作它并将它放在我的应用程序的主布局模板上。

```
<? $reportBugForm = $this->widget('application.widgets.reportBugWidget.reportBug',array(),true); ?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        ....
    </head>
    <body>
        <? echo $reportBugForm; ?> 
```

我将它放在页面顶部，因为它应该向自身发布 ajax 请求，而不管当前页面如何（我不想使用任何控制器）。这是小部件类本身的代码：

```
Yii::import('application.widgets.reportBugWidget.reportBugForm');

class reportBug extends CWidget {

    public $id = 'reportBug';
    public $name = 'reportBugForm';
    public $form;

    public function init() {

        $this->form = new reportBugForm('error');

        if(Yii::app()->request->isAjaxRequest && isset($_POST[$this->name]) && !empty($_POST[$this->name])) {
            $this->form->attributes = $_POST[$this->name];
            if($this->form->validate()) {
                echo 'Form is submited!';
            } else
                echo 'You have incorrectly filled out the form!';
            Yii::app()->end();
        }
    }

    public function run() {

        $this->render('form',array(
            'model'=>$this->form,
            'id'=>$this->id,
            'name'=>$this->name
        ));
    }

} 
```

这是我的模型的代码。我已经简化了所有可见性：

```
class reportBugForm extends CFormModel {

    public $subject = '';
    public $message = '';

    public function rules() {
        return array(
            array('message','required','on'=>'error,question,suggestion'),
            array('subject','safe','on'=>'question'),
            array('subject','required','on'=>'error,suggestion')
        );
    }

    public function attributeLabels() {
        return array(
            'subject'=>'Subject',
            'message'=>'Message'
        );
    }
} 
```

这是我的视图文件的代码：

```
<div class="modal fade hide" id="<? echo $id; ?>">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" id="reportBug_iconClose">&times;</button>
        <h3>Report a bug</h3>
    </div>
    <?
    $form = $this->beginWidget('CActiveForm', array(
        'id'=>$name,
        'enableAjaxValidation'=>true,
        'enableClientValidation'=>true,
        'clientOptions'=>array(
            'validateOnSubmit'=>true,
            'validateOnChange'=>false,
            'validateOnType'=>false
        ),
        'focus'=>array($model,'subject')
    ));
    ?>
    <div class="modal-body">
        <fieldset>
            <div class="control-group">
                <?
                echo $form->label($model,'subject',array('for'=>'reportBug_subject'));
                echo $form->textField($model,'subject',array('id'=>'reportBug_subject','placeholder'=>'A short summary of your problem','class'=>'input-xxlarge'));
                echo $form->error($model,'subject',array('class'=>'help-block error'));
                ?>
            </div>
            <div class="control-group">
                <?
                echo $form->label($model,'message',array('for'=>'reportBug_message'));
                echo $form->textArea($model,'message',array('id'=>'reportBug_message','class'=>'input-xxlarge','rows'=>5,'placeholder'=>'Please, provide details of found error'));
                echo $form->error($model,'message',array('class'=>'help-block error'));
                ?>
            </div>
        </fieldset>
    </div>
    <div class="modal-footer">
        <?
        echo CHtml::ajaxSubmitButton('Send',null,array(),array('class'=>'btn btn-primary'));
        echo CHtml::htmlButton('Close',array('id'=>'reportBug_btnClose','class'=>'btn','data-dismiss'=>'modal'));
        ?>
    </div>
    <? $this->endWidget(); ?>
</div> 
```

不执行客户端或 ajax 验证！表单由 ajax 提交，无需任何客户端验证，并`You have incorrectly filled out the form!`返回字符串。请告诉我可能是什么？

PS我不知道这可能会有所不同，但我正在为 Yii 使用 Twitter Bootstrap 扩展。

PSS 还有一件奇怪的事情。当我`CHtml::submitButton`在我的视图文件中使用时，表单只是通过 POST 提交，当我使用`CHtml::ajaxSubmitButton`它时，通过 Ajax 提交并返回我上面描述的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:38:23.757

该指令仅适用于“安全”参数：

```
$this->form->attributes = $_POST[$this->name]; 
```

您必须将“消息”添加到安全验证器：

```
array('subject,message','safe','on'=>'question'), 
```

或者您必须使用：

```
$this->form->subject  = $_POST[$this->name]['subject'];
$this->form->message  = $_POST[$this->name]['message']; 
```

请参阅此文档： [http ://www.yiiframework.com/wiki/161/understanding-safe-validation-rules](http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules)

您的验证不起作用，因为需要“消息”但不是“安全”。

# javascript - 选择值时隐藏选择（并重新加载页面）

> ID：11198406
> 
> 赞同：1
> 
> 时间：2012-06-25T22:40:47.917
> 
> 标签：javascript, jquery, drop-down-menu, show-hide

我有一些下拉框充当页面上的过滤器。当任何一个被选择时，页面会重新加载并根据选择过滤帖子。

我想要做的是在页面重新加载时隐藏特定选择，如果该值不是空白字符串（例如，如果有人选择“奥克兰”，我希望选择输入在重新加载时从页面中消失，但是另一个选择应该保持可见）。

这是HTML...

```
<ul>
<li>
    <label style="display:none;">Location:</label>
    <select onchange="this.form.submit();" name="locations" class="filter-dropdown">
        <option value="">SELECT</option>
        <option value="auckland" class="level-0">Auckland</option>
        <option value="tauranga" class="level-0">Tauranga</option>
        <option value="wellington" class="level-0">Wellington</option>
    </select>
</li>
<li>
    <label style="display:none;">Product or service:</label>
    <select onchange="this.form.submit();" name="typeofproduct" class="filter-dropdown">
        <option value="">SELECT</option>
        <option value="clothing" class="level-0">Clothing</option>
        <option value="food" class="level-0">Food</option>
        <option value="shoes" class="level-0">Shoes</option>
        <option value="travel" class="level-0">Travel</option>
    </select>
</li> 
```

这是我使用jQuery的糟糕尝试......

```
 jQuery('.filter-dropdown').bind('change', function(event) {

        var x = jQuery(".filter-dropdown option:selected").text();

        if (x == "") {
            jQuery(this).show();
        }
        else{
            jQuery(this).hide();
        }
    }); 
```

我已经尝试了各种方法，但我得到的最接近的是隐藏所有下拉列表的页面（应该只适用于已选择的下拉列表。我使用类而不是 ID 的原因是因为可能有更多下拉列表其他页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:56:48.840

隐藏用户的选择不是一个好功能，因此他们不仅看不到他们选择的内容，而且也无法更改它。无论如何，以下将完成这项工作：

```
var element = docment.formName.locations;
if (element.value != '') {
  element.style.display = 'none';
} 
```

用表单的实际名称或 ID 替换`formName`。

请注意，当页面加载时，默认情况下选择是可见的，因此只需根据其值隐藏它。另请注意，在大多数浏览器中，默认情况下该值将是第一个选项的值，除非某些其他选项设置为默认选定选项。

最后，如果选项没有 value 属性，IE 8 及更低版本将不会与上述行为一致，因此请确保它们有一个（给它们与文本相同的值是好的）。

# javascript - 图像数组到表中 - Javascript

> ID：11198409
> 
> 赞同：0
> 
> 时间：2012-06-25T22:40:58.850
> 
> 标签：javascript, html-table

我正在尝试创建一个包含 6 个图像、2 行和 3 列的大表。我在程序的头部为所有这些创建了一个数组。它应该在体内吗？表格中的图像稍后需要可点击，指向同一页面（即 google.com）。我不知道如何将图像单独放入我创建的表格中。

```
<head>
  <script>
    var img = new Array(6);
    img[0] = new (400,200)
    img[0].src"image1.jpg"
  </script
</head> 
```

...对于所有其余的图像，依此类推

```
<body>
    <table border ="0">
    <tr>
    <td>document.write(img[0]) </td>
    </tr>
    </table>
</body> 
```

...等等其余的图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:47:47.507

您似乎忽略了 DRY - 不要重复自己。您正在为要创建的每个图像重复代码。相反，试试这个：

```
<script type="text/javascript">
    (function() {
        var images = [
            "image1.jpg",
            "photo.jpg",
            "graphic.png",
            "animation.gif"
        ], columns = 3,
        l = images.length, i,
        table = document.createElement('table'),
        tbody = table.appendChild(document.createElement('tbody')),
        tr, td, img;
        for( i=0; i<l; i++) {
            if( i % columns == 0) tr = tbody.appendChild(document.createElement('tr'));
            tr.appendChild(document.createElement('td'))
              .appendChild(document.createElement('img'))
              .src = images[i];
        }
        document.body.appendChild(table);
    })();
</script> 
```

这基本上会在脚本所在的位置插入包含所有图像的表格。要添加更多图像，只需向数组添加更多 URL。要更改每行显示的数量，只需更改`columns`变量即可。此代码比您的原始代码更复杂，但另一方面，它***更具***可扩展性且更易于修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:46:58.733

这是您可以做到的一种方法：

```
<td><img id="theImage" /></td>
<script>
 document.getElementById("theImage").src = img[0].src;
</script> 
```

# linux - Drupal 7 文件权限

> ID：11198413
> 
> 赞同：0
> 
> 时间：2012-06-25T22:41:21.737
> 
> 标签：linux, drupal, drupal-7, drupal-modules

我在drupal 7中使用视图创建缩略图时遇到问题。每当我制作（或更新）我的图像样式时，包含它们的文件夹会恢复为0700。由于我在apache中使用suphp，所以我一直得到403试图加载图像。是否有我缺少的配置，以便我可以使文件夹保持 755 和文件 644？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:53:30.297

确保以下 suPHP 设置设置为 true

```
allow_directory_group_writeable
allow_directory_others_writeable 
```

添加以下内容`sites/default/settings.php`应该可以防止问题再次发生

```
umask(022); 
```

# database-design - Cassandra：列族与超级列族

> ID：11198419
> 
> 赞同：5
> 
> 时间：2012-06-25T22:41:39.083
> 
> 标签：database-design, nosql, cassandra

我有一个要求，我需要我的数据库来存储以下数据：

```
- For each build, store the results of 3 performance runs. The result includes tps and latency. 
```

阅读 cassandra 数据模型，这直接映射到以下格式的超级列族：

```
BenchmarkSuperColumnFamily= {

build_1: {
   Run1: {1000K, 0.5ms}
   Run2: {1000K, 0.5ms}
   Run3: {1000K, 0.5ms}
}

build_2: {
   Run1: {1000K, 0.5ms}
   Run2: {1000K, 0.5ms}
   Run3: {1000K, 0.5ms}
}
...

} 
```

但是，我在以下[答案](https://stackoverflow.com/questions/7440705/standard-column-family-vs-super-column-family)中读到不鼓励使用 Super Column 系列。我想知道是否有更好的方法来为我的要求创建模型。

[PS，我从下面的文章中](http://arin.me/blog/wtf-is-a-supercolumn-cassandra-data-model)借用了 JSONish 表示法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T04:12:25.323

您链接到的 StackOverflow 答案是正确的。您不应该在新应用程序中使用 SuperColumns。然而，它们的存在是为了向后兼容。

通常，复合柱可用于模拟超级柱提供的任何模型。基本上，它们允许您将列名分成多个部分。因此，如果您要指定“CompositeType(UTF8Type, UTF8Type)”的比较器，您的数据模型最终会如下所示：

```
BenchmarkColumnFamily= {

   build_1: {
       (Run1, TPS) : 1000K
       (Run1, Latency) : 0.5ms
       (Run2, TPS) : 1000K
       (Run2, Latency) : 0.5ms
       (Run3, TPS) : 1000K
       (Run3, Latency) : 0.5ms
    }

    build_2: {
       ...
    }
...

} 
```

使用上述模型，您可以使用单个查询来获取单次运行的单个数据点、单次运行的所有数据点或多次运行的所有数据点。

有关复合列的更多信息： [http ://www.datastax.com/dev/blog/introduction-to-composite-columns-part-1](http://www.datastax.com/dev/blog/introduction-to-composite-columns-part-1)

# c# - 为什么 StreamWriter 在绘画事件中效果很好？在图片框中得到大红色 x

> ID：11198422
> 
> 赞同：0
> 
> 时间：2012-06-25T22:41:51.487
> 
> 标签：c#

我有一个pictureBox1 绘画事件。在绘画事件中，我正在向文本文件写入一些信息：

```
 private void pictureBox1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
            {
                SolidBrush brush;
                Pen p=null;
               Point connectionPointStart;
               Point connectionPointEnd;
               Graphics g = e.Graphics;
               g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;

                   brush = new SolidBrush(Color.Red);
                   p = new Pen(brush);
                   for (int idx = 0; idx < wireObject1._point_X.Count; ++idx)
                   {
                       Point dPoint = new Point((int)wireObject1._point_X[idx], (int)wireObject1._point_Y[idx]);
                       dPoint.X = dPoint.X - 5; // was - 2
                       dPoint.Y = dPoint.Y - 5; // was - 2
                       Rectangle rect = new Rectangle(dPoint, new Size(10, 10));
                       g.FillEllipse(brush, rect);

                       // g.FillEllipse(brush, rect);
                   }

                   for (int i = 0; i < wireObject1._connectionstart.Count; i++)
                   {

                       int startIndex = wireObject1._connectionstart[i];
                       int endIndex = wireObject1._connectionend[i];

                       connectionPointStart = new Point((int)wireObject1._point_X[startIndex], (int)wireObject1._point_Y[startIndex]);
                       connectionPointEnd = new Point((int)wireObject1._point_X[endIndex], (int)wireObject1._point_Y[endIndex]);
                       p.Width = 4;
                       g.DrawLine(p, connectionPointStart, connectionPointEnd);
                       moveCounter++;
                       textBox1.Text = moveCounter.ToString();
                       if (moveCounter > 10)
                       {
                           w.WriteLine("Number Of Moves ===>   " + moveCounter);
                       }
                   }

            }

In the bottom i have a w.WriteLine....
In the top of Form1 i did StreamWriter w;
In the constructor i did: w = new StreamWriter(@"d:\test.txt");

In the pictureBox1 mouse up event im doing w.Close();

    private void pictureBox1_MouseUp(object sender, MouseEventArgs e)
            {

                if (mouseMove == true)
                {
                    Point NewPoint = e.Location;
                    wireObject1._point_X[(int)selectedIndex] = NewPoint.X;
                    wireObject1._point_Y[(int)selectedIndex] = NewPoint.Y;
                    mouseMove = false;
                    if (moveCounter == 0)
                    {
                    }
                    else
                    {
                        w.Close();
                    }
                    WireObjectCoordinatesCloneFrame();

                }

            } 
```

因此，我将鼠标移动到文件中，将来自变量 moveCounter 的信息写入文件，该变量是 int 类型。

问题是当我制作鼠标向上事件并关闭pictureBox1中的文件时，我看到一个带有白色背景的BIG RED X。它自己的文件在硬盘上没有问题，包含我想要的所有信息。

但是为什么大红色 x 出现在 pictureBox1 中？如果我从绘画事件中删除 w.WriteLine，那么我就看不到大红色 x。

我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:44:06.707

关闭流编写器后，您仍在尝试在绘制事件中对其进行写入。这将失败（您不能写入已关闭的流），因此绘制事件处理程序将引发异常 - 导致出现红色 X。

在绘画活动期间执行任何 IO 都非常奇怪，老实说......你真正想要实现什么？

# ios - Helper functions in Kiwi specs

> ID：11198428
> 
> 赞同：14
> 
> 时间：2012-06-25T22:42:24.740
> 
> 标签：ios, objective-c, kiwi

I have a few repetitive specs that I would like to DRY up. The common functionality doesn't lend itself to moving into a `beforeEach` block. Essentially, it's object creation and is 4 lines for each of 12 objects, I'd like to turn those 4 lines into a single function call.

Where can I put helper functions in a Kiwi spec?

In RSpec I can just put `def` between spec blocks, but that doesn't appear to be possible here. I've even tried skipping the `SPEC_END` macro and adding that content myself so I could add functions inside the @implementation from `SPEC_BEGIN` but that doesn't seem to work, either.

**Correction**... I can manage something that kind of works with hand-coding the `SPEC_END` macro. I had the end } mis-placed. But still, it fails, because the method isn't in the `@interface`.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-03T18:09:36.790

在 SPEC_BEGIN 之后将您的辅助函数创建为块：

```
SPEC_BEGIN(MySpec) 

NSDate* (^dateFromString) (NSString *) = ^NSDate* (NSString *dateString) {
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];
    [dateFormatter setDateFormat:@"MM-dd-yyyy"];
    return [dateFormatter dateFromString:dateString];
};

describe(@"something", ^{
    NSDate *checkDate = dateFromString(@"12-01-2005");

...
});

SPEC_END 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T20:59:11.560

`SPEC_BEGIN()`您还可以在范围 上方创建一个直接的 C 函数。

```
NSString *makeAString () {
    return @"A String";
} 
```

或者，如果您有将在多个 Spec 文件中使用的辅助函数，请将这些函数放在单独的文件中并导入头文件。我发现这是清理我的 Specs 的好方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-27T10:00:37.087

[supermarin](https://github.com/kiwi-bdd/Kiwi/issues/138#issuecomment-14724430)建议采用以下方法：

```
@implementation KWSpec(Additions)

+ (void)myHelperMethod:(Car*)car {
            [[car shouldNot] beNil];
        };

@end

SPEC_BEGIN(FooBarSpec)

describe(@"A newly manufactured car", ^{
    it(@"should not be nil", ^{
        [self myHelperMethod:[CarFactory makeNewCar]];
    });
});

SPEC_END 
```

另一种选择是[道格建议](https://stackoverflow.com/a/11801048/67824)：

```
SPEC_BEGIN(FooBarSpec)

void (^myHelperMethod)(Car*) = ^(Car* car){
        [[car shouldNot] beNil];
    };

describe(@"A newly manufactured car", ^{
    it(@"should not be nil", ^{
        myHelperMethod([CarFactory makeNewCar]);
    });
});

SPEC_END 
```

它的好处是它非常适合异步场景：

```
SPEC_BEGIN(FooBarSpec)

__block BOOL updated = NO;

void (^myHelperAsync)() = ^()
{
    [[expectFutureValue(theValue(updated)) shouldEventually] beYes];
};

describe(@"The updater", ^{
    it(@"should eventually update", ^{
         [[NSNotificationCenter defaultCenter] addObserverForName:"updated" 
                                                 object:nil 
                                                 queue:nil 
                                            usingBlock:^(NSNotification *notification)
         {
             updated = YES;
         }];
         [Updater startUpdating];
         myHelperAsync();
    });
});

SPEC_END 
```

最后，如果您的辅助方法位于另一个类中，[gantaa](https://github.com/kiwi-bdd/Kiwi/issues/138#issuecomment-26154947)建议使用一个巧妙的技巧：

```
@interface MyHelperClass

+(void)externalHelperMethod:(id)testCase forCar:(Car*)car
{
    void (^externalHelperMethodBlock)() = ^(){
        id self = testCase; //needed for Kiwi expectations to work
        [[car shouldNot] beNil];
    };
    externalHelperMethodBlock();
}

@end

SPEC_BEGIN(FooBarSpec)

describe(@"A newly manufactured car", ^{
    it(@"should not be nil", ^{
        [MyHelperClass externalHelperMethod:self forCar:[CarFactory makeNewCar]];
    });
});

SPEC_END 
```

# css - SASS / SCSS @extend rule selectors

> ID：11198429
> 
> 赞同：19
> 
> 时间：2012-06-25T22:42:40.670
> 
> 标签：css, sass

I'm having a little problem with the @extend rule, this is what I got (focus on the h1):

```
.content-header {
    // CSS properties
    h1 {
        // CSS properties
    }
}

.box-header {
    // CSS properties
    h1 {
        @extend .content-header h1; // My selector problem!
        // And his own CSS properties
    }
} 
```

So it will be:

```
.content-header h1, .box-header h1 {
    /* Happily sharing the same CSS properties */
} 
```

But it seems like `@extend` don't like that, is any other way to write this without giving the `h1` a class??

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T22:49:35.480

嵌套选择器无法扩展——事实上，这是解析器报告的语法错误。除了结构性注释（我想不出`@extend`有理由保证上述关系的情况），这不是目前可以用 SASS 完成的事情。

注意：如果您愿意， [Stylus会支持它。](http://learnboost.github.com/stylus/docs/extend.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-26T14:21:32.320

一个明显的解决方案应该是`@mixin your-name`为您的`.content-header h1`定义和`@include your-name`在`.box-header h1`.

但是，有一个更好的解决方案[Reference Parent Selectors: &](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#referencing_parent_selectors_)：

```
h1 {
    .content-header &,
    .box-header & {
        // CSS properties
    }
    .box-header & {
        // And his own CSS properties
    }
} 
```

这并不明显，因为逻辑相反，但最好保持。您正在更改`h1`特定选择器的定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-23T04:49:19.317

不允许嵌套@extend。试试这个解决方法

```
.foo {
  background-color: lime;    
}
.b{
  margin:0px;
}
.baz {
  @extend .foo;
  @extend .b;
} 
```

我为我的个人使用构建的一些东西在下面与大家分享，这会动态构建选择器，由于命名约定中不允许使用特殊字符，所以我使用“--”来分隔类

```
$ih-classes: ( "module--cardContainer--header",
                "a"
              );
  %module--cardContainer--header {
    color: #1e1d1c;
    background-color: #fff;
    border-bottom: 0.0714rem solid #e0dddc;
    padding: 0;
    line-height: 3.1429rem;
    font-size: 1.2857rem;
    font-family: ProximaNovaSemiBold;
}
%a{
  color:red;
}

@function str-replace($string, $search, $replace: '') {
  $index: str-index($string, $search);

  @if $index {
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
  }

  @return $string;
}
@mixin generate-framework-code() {

              @each  $icon in $ih-classes {
               $val : str-replace($icon, '--', ' .');
                  .#{$val} {
                            @extend %#{$icon};
                         }
                  }
}

@include generate-framework-code(); 
```

祝你好运！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-13T11:16:30.470

如前所述，您只能扩展一个类。通常，应跳过带有扩展的嵌套。在本文中有更多关于extend 及其选项的[内容](https://kolosek.com/css-extend/)。

# perl - 安装的 Perl 模块不可用

> ID：11198431
> 
> 赞同：0
> 
> 时间：2012-06-25T22:42:49.157
> 
> 标签：perl, cpan

在 CentOS 6.2、perl v5.10.1 上，我无法安装 XML::SAX::Expat。使用“cpan XML::SAX::Expat”

我解决的许多早期问题（当我第一次尝试安装 XML::Simple 时出现更多错误）来自缺少 cpan 配置所需的二进制文件（在我的情况下：解压缩、制作、lynx、补丁、gcc、 FTP）。由于这是唯一无法安装的模块（所有其他先决条件都已安装），我的印象是我已经安装了所有操作系统要求（通过 yum）。**我是否正确假设这一点？**

顺便说一句，没有创建 histfile。**我应该对 /root/.cpan/ 应用哪些权限？**

**接下来我应该尝试什么？强制安装可以吗？**

```
All tests successful.
Files=13, Tests=486, 12 wallclock secs ( 0.07 usr  0.01 sys +  1.84 cusr  0.07 csys =  1.99 CPU)
Result: PASS
  GRANTM/XML-Simple-2.20.tar.gz
Tests succeeded but one dependency not OK (XML::SAX::Expat)
  GRANTM/XML-Simple-2.20.tar.gz
  [dependencies] -- NA
Running make install
  make test had returned bad status, won't install without force
Failed during this command:
 TODDR/XML-Parser-2.41.tar.gz                 : make NO
 BJOERN/XML-SAX-Expat-0.40.tar.gz             : make_test NO
 GRANTM/XML-Simple-2.20.tar.gz                : make_test NO one dependency not OK (XML::SAX::Expat) 
```

cpan conf 的输出：

> load_module_verbosity [v]
> 
> 猞猁 [/usr/bin/lynx]
> 
> 制作 [/usr/bin/make]
> 
> make_arg []
> 
> make_install_arg []
> 
> make_install_make_command [/usr/bin/make]
> 
> makepl_arg [安装目录=站点]
> 
> mbuild_arg []
> 
> mbuild_install_arg []
> 
> mbuild_install_build_command [./Build]
> 
> mbuildpl_arg [--installdirs 站点]
> 
> ncftp []
> 
> ncftpget []
> 
> no_proxy []
> 
> 寻呼机 [/usr/bin/less]
> 
> 密码未定义
> 
> 补丁 [/usr/bin/补丁]
> 
> patch_dir undef
> 
> perl5lib_verbosity [v]
> 
> 首选安装程序 [MB]
> 
> prefs_dir [/root/.cpan/prefs]
> 
> 先决条件_政策 [问]
> 
> proxy_pass undef
> 
> proxy_user undef
> 
> randomize_urllist undef
> 
> scan_cache [开始]
> 
> 外壳 [/bin/bash]
> 
> show_unparsable_versions [0]
> 
> 显示上传日期 [0]
> 
> 显示零版本 [0]
> 
> 焦油 [/bin/tar]
> 
> tar_verbosity [v]
> 
> term_is_latin [1]
> 
> 术语_装饰品 [1]
> 
> 测试报告 [0]
> 
> trust_test_report_history [0]
> 
> 解压 [/usr/bin/unzip]
> 
> 网址列表
> 
> ```
> 0 [ftp://cpan.pair.com/pub/CPAN/]
> 
> 1 [ftp://ftp-mirror.internap.com/pub/CPAN/]
> 
> 2 [ftp://cpan.cs.utah.edu/CPAN/]
> 
> 3 [ftp://mirror.atlantic.net/pub/CPAN/]
> 
> 4 [http://httpupdate19.cpanel.net/CPAN/] 
> ```
> 
> 使用_sqlite [0]
> 
> 用户名 undef
> 
> wait_list undef
> 
> wget [/usr/bin/wget]
> 
> yaml_load_code [0]
> 
> yaml_module [YAML]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:28:28.383

如果你有[yum](http://yum.baseurl.org/)可用，然后运行

```
yum install expat 
```

和

```
yum install expat-devel 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-15T19:19:14.067

对于 debian 发行版安装 libxml-sax-expat-incremental-perl 然后从 CPAN 安装 XML::Simple 模块

```
sudo apt-get install libxml-sax-expat-incremental-perl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T04:35:14.477

试试这个：制作干净的 XML::Simple

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T08:32:47.047

对于 Debian 发行版，也可以直接安装 XML::Simple：

```
apt-cache search XML::Simple | grep simple
apt-get install libxml-simple-perl
perl -MFile::Find=find -MFile::Spec::Functions -Tlw -e 'find { wanted => sub { print canonpath $_ if /\.pm\z/ }, no_chdir => 1 }, @INC' 2> /dev/null | grep -i xml/simple 
```

# database - What's the proper way to represent sports results in a database

> ID：11198432
> 
> 赞同：1
> 
> 时间：2012-06-25T22:42:56.680
> 
> 标签：database, types, decimal, point, representation

e.g. *Barcelona - Madrid 4:1* or *Arsenal - Chelsea 2:0*

Which data types are good to represent 4:1 and 2:0 etc?

The options that come to mind are:

1.  Two smallints
2.  One decimal (i.e. 4.1 and 2.0)
3.  One point (i.e. 4,1 and 2,0)

Anything else? How'd you do it? It must be easy to retrieve who's won the game and what the difference in goals was, which makes me tend to the first option but maybe there is more (memory considerations...)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:50:13.823

最好将分数存储为两个单独的值。您建议的不同选项之间的内存和时间差异太小而无法关心，除非您的数据库非常庞大。两个单独的值将使编写查询更容易，而无需包含在每个查询中解析出两个值的逻辑。

此外，如果您愿意，您还可以为点差、获胜者等添加额外的列。在表中保留更多数据会导致更慢的更新/插入，但更简单和更快的读取查询（因为已经计算了获胜者和传播）。假设这是针对体育网站或类似网站的，那么在给定的一天，您的阅读量（即网站的访问者）可能比插入/更新（玩过的新游戏）要多得多。

# symfony - Doctrine 2.1 - Relation Lost After ManyToMany Cascade Merge - Symfony2

> ID：11198434
> 
> 赞同：5
> 
> 时间：2012-06-25T22:43:14.337
> 
> 标签：symfony, merge, doctrine-orm, many-to-many, cascade

After merging an entity that has related entities with relations set to cascade both persist and merge operations the relations are lost!

Here are the entities:

```
class Event implements NormalizableInterface
{
    /**
     * @ORM\ManyToMany(targetEntity="Participant", inversedBy="events", cascade={"persist", "merge"})
     * @ORM\JoinTable(name="event_participant",
     *      joinColumns={@ORM\JoinColumn(name="event_id", referencedColumnName="id", onDelete="CASCADE")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="participant_id", referencedColumnName="id", onDelete="CASCADE")}
     *      )
     */
    private $participants;
}

class Participant implements NormalizableInterface
{
    /**
     * @ORM\ManyToMany(targetEntity="Event", mappedBy="participants", cascade={"persist", "merge"})
     */
    protected $events;
} 
```

Here are my joins:

```
foreach ($events as $event)
{
    if (!$event->hasParticipant($participant)) {

        $event->addParticipant($participant);
    }
    if (!$participant->hasEvent($event)) {

        $participant->addEvent($event);
    }
} 
```

Here is my merge code:

```
echo "Before merge participant count: ".count($event->getParticipants()).PHP_EOL;

$event = $em->merge($event);

echo "After merge participant count: ".count($event->getParticipants()).PHP_EOL; 
```

...and here is the output:

```
Before merge participant count: 2
After merge participant count: 0 
```

..and the database looks like this:

```
table               | rows
-------------------------------
event               | 1
-------------------------------
participant         | 2
-------------------------------
event_participant   | 0
------------------------------- 
```

Can anyone see where I'm being dumb?

BTW there are more relationships than this. I've simplified things here to make the explanation clearer. My other relations aren't affected negatively by the merge. Also I'm doing the merge in a console Command not a in a controller. I can post more code if it'll help :)

Also I'm using Doctrine 2.1.7 and Symfony 2.0.15

Many thanks, Matthew

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-11T20:02:18.283

我遇到了同样的问题，并通过在合并后刷新实体来修复它：

```
$mergedEntity = $entityManager->merge($serializedEntity);
$entityManager->refresh($mergedEntity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-28T18:31:48.483

我发现了同样的问题，经过几分钟的思考，我尝试了一个简单的想法，只需更改代码顺序并将合并后的实体视为实体的新实例，我发现合并操作可以删除关系，所以：

```
$user = new User();
$user->setName('name');
$user->setAge('24');

$mergedUser = $em->merge($user);

// Imagine we have some groups to add
foreach ($groups as $group) {
    $mergedUser->addGroup($group);
}

$em->flush(); 
```

它对我有用。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:57:30.120

这个问题是否与您的合并无关： http: [//doctrine-orm.readthedocs.org/en/2.0.x/reference/limitations-and-known-issues.html#cascade-merge-with-bi-directional-associations](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/limitations-and-known-issues.html#cascade-merge-with-bi-directional-associations) ?

# ruby-on-rails-3 - 为什么 bundle 在目录 X 中创建了 bundle？

> ID：11198437
> 
> 赞同：1
> 
> 时间：2012-06-25T22:43:18.267
> 
> 标签：ruby-on-rails-3, bundler

我跑了

```
bundle install 
```

它没有错误地完成，除了在最后一行，它打印：

```
Your bundle is complete! It was installed into ./linecache 
```

Gemfile 中没有提到 linecache。我什至尝试了删除我的 Gemfile.lock 并`bundle install`再次调用的极端措施。结果相同。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:49:09.017

弄清楚了。我之前输入过：

```
bundle install linecache 
```

（这是另一个故事）。bundle 将`remember`linecache 并将其用作后续捆绑包的目录。最简单的（尽管是笨拙的）修复方法是从您的顶级 Rails 项目目录中删除 .bundle 配置文件：

```
rm .bundle/config 
```

...并让 bundle 在您下次运行 bundle install 时重新创建它。稍微干净一点的是编辑`your_project_directory/.bundle/config`和删除以下行：

```
BUNDLE_PATH: ... 
```

希望这可以节省其他人的一些麻烦。

# jquery - Make a div or list element select/trigger a radio input button on click with jQuery?

> ID：11198439
> 
> 赞同：2
> 
> 时间：2012-06-25T22:43:44.773
> 
> 标签：jquery

I'm not sure if this possible but probably is fairly simple.

I've made a fiddle [http://jsfiddle.net/WTSWP/1/](http://jsfiddle.net/WTSWP/1/) or the kind of situation I'm in.

I've got multiple radio inputs, each contained by a div/li, and what the containing element to select the radio button when clicked.

I'm using jQuery to so if anyone has ideas using jquery that would be great thanks.

I started this but isn't working right.

```
$(".select-area").click(function() {
    $(this).find('input').trigger('click');
}); 
```

```
<li class="select-area">

     <input type="radio" name="colour" value="black">

</li> 
```

![enter image description here](../Images/888b9f72eac2d9468c39c785b1503b91.png)

Fiddle here [http://jsfiddle.net/WTSWP/1/](http://jsfiddle.net/WTSWP/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:50:00.407

尝试：

```
$(".select-area").click(function() {
    $(this).find('input:radio').prop('checked', true);
}); 
```

**[jsFiddle 演示](http://jsfiddle.net/roXon/WTSWP/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:53:33.807

使用 attr 实现 jquery 向后兼容性。

```
 $(".select-area").click(function() {
        $(this).find('input').attr('checked',true);
    }); 
```

应该这样做：http: [//jsfiddle.net/epinapala/WTSWP/5/](http://jsfiddle.net/epinapala/WTSWP/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:52:30.477

```
$(".select-area").click(function() {
    $(this).find('input').prop('checked',!$(this).find('input').prop('checked'));
}); 
```

对于 1.6.1 之前的 jQ 版本，使用 attr 而不是 prop

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T23:07:32.517

请看这个：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>jQuery - Is it possible to add more than one image to a table cell</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $(':radio').change(function(e){
                alert($(this).attr('id'));
            });

            $(".select-area").click(function(e) {
                //$(this).find('input').trigger('click');
                $(this).children('input[type=radio]').trigger('click');
            });

        });
    </script>
    <style type="text/css">
        .select-wrapper {
            width: 200px;
            height: 200px;
            left: 50%;
            top: 50%;
            position: absolute;
            overflow: visible;
        }

        .select-area {
            width: 200px;
            height: 200px;
            background: black url('http://www.flikie.com/wp-content/uploads/2011/03/Patterns_20110304_Flower-pattern.jpg');
            background-size: auto 100%;
            left: -50%;
            top: -50%;
            position: relative;
            cursor: pointer;
        }

        input {
            margin: 95px 0 0 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<form>

    <ul class="select-wrapper">

        <li class="select-area">

            <input type="radio" id="radio1" name="colour" value="black">

        </li>

    </ul>

    <input type="radio" name="colour" id="radio2" value="">

</form>
</body>
</html> 
```

# php - jQuery Sortable - View Order by ID

> ID：11198440
> 
> 赞同：0
> 
> 时间：2012-06-25T22:43:58.827
> 
> 标签：php, jquery, mysql, jquery-ui-sortable

I know that there are currently questions on SO already pertaining to saving jQuery sortable lists to a database. How can I query my 2 tables, grab the "order" string, and then display the sortable list in the correct order. My tables are:

```
Table name: clothing_category
  id           name              order   
 -----------------------------------------
  5           Headwear          29,22,26 
```

And:

```
 Table name: clothing_type
  id           name           clothing_id (relational with to 'clothing_category')
 -----------------------------------------
  22           Hat               5
  26           Beanie            5
  29           Visor             5 
```

So, seeing as how the "order" of headwear is stored as `29,22,26', I would want the HTML to output like this:

```
<ul id="sortable">
   <li id="29">Visor</li>
   <li id="22">Hat</li>
   <li id="26">Beanie</li>
</ul> 
```

How can I display it like above? And is my method of storing the order a good way to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:50:35.660

我会在clothing_type 表中添加一个Order 或Sequence 列，其中的数字从1 到3（在本例中）。查询表时，按序列字段排序。

要更新，请使用以下伪代码：

```
$orderedID = array(29,22,26);
foreach($orderedID as $i => $id) {
    $query = 'UPDATE `clothing_type` SET `sequence`=' . $i . ' WHERE `id`=' . intval($id);
} 
```

# ruby - Guard 执行两次 shell 脚本

> ID：11198446
> 
> 赞同：5
> 
> 时间：2012-06-25T22:44:18.753
> 
> 标签：ruby, guard

我设置了一个具有以下结构的示例项目：

```
Gemfile
Guardfile 
```

这些文件的内容是：

```
# Gemfile
source :rubygems
gem "guard"
gem "guard-shell" 
```

和

```
# Guardfile
guard 'shell' do
  watch(/^test\.txt$/) {|m| `echo #{m.inspect} #{File.mtime(m[0])}` }
end 
```

然后我继续跑`guard`。每当我将某些内容回显到该文件中时，guard 都会注册两次更改。在一个外壳中：

```
$ echo blah >> test.txt 
```

在外壳运行后卫中：

```
> [test.txt] 2012-06-26 00:40:22 +0200
> [test.txt] 2012-06-26 00:40:22 +0200 
```

vim/nano 等也是同样的行为。有趣的是，当我只是 run 时`echo blah > test.txt`，guard 只会触发一次。

知道如何防止这种情况发生，或者这是否是预期的行为？

编辑：在 github 上打开了一个问题：[https ://github.com/guard/guard/issues/297#issuecomment-6586266](https://github.com/guard/guard/issues/297#issuecomment-6586266)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T02:01:59.813

似乎是`guard`和/或的错误/功能`guard-shell`。我会在 github 上报告问题。与此同时，这是一个（丑陋的）解决方法，以防止运行`mtime`与上次相同的文件：

```
# Guardfile
class GFilter
  def self.run(files, &block)
    @mtimes ||= Hash.new

    files.each { |f|
      mtime = File.mtime(f)
      next if @mtimes[f] == mtime
      @mtimes[f] = mtime

      yield f
    }
  end
end

guard 'shell' do
  watch(/^test\.txt$/) {|m| GFilter.run(m) { |f| puts "File: #{f}" } }
end 
```

# opengl - 迁移到 OpenGL 2.0，出现黑屏

> ID：11198448
> 
> 赞同：0
> 
> 时间：2012-06-25T22:45:02.590
> 
> 标签：opengl

我正在尝试通过将 OpenGL 代码引入 OpenGL 2.0 来稍微现代化我的 OpenGL 代码，但我得到的只是一个黑屏......也许有人在我的代码中发现了一个错误（代码不多）。

这是我的旧的、完全工作的代码的相关部分的片段。

```
// Send color data into GPU memory
glEnableClientState(GL_COLOR_ARRAY);
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, colorsHandle);
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, colors, GL15.GL_DYNAMIC_DRAW);
glColorPointer(4, GL_FLOAT, 0, 0);

// Send vertex data into GPU memory
glEnableClientState(GL_VERTEX_ARRAY);
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, verticesHandle);
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, GL15.GL_DYNAMIC_DRAW);
glVertexPointer(3, GL_FLOAT, 0, 0);

// Send texcoords data into GPU memory
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, texcoordsHandle);
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, GL15.GL_DYNAMIC_DRAW);
glTexCoordPointer(2, GL_FLOAT, 0, 0);

for (Batch batch : batches) batch.render();

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_COLOR_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY); 
```

...批量调用glDrawArrays（在进行一些opengl状态更改时）...

```
glDrawArrays(GL_QUADS, spriteOffset * 4, spriteCount * 4); 
```

这是新代码：

```
// Send color data into GPU memory
GL20.glEnableVertexAttribArray(0);
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, colorsHandle);
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, colors, GL15.GL_DYNAMIC_DRAW);
GL20.glVertexAttribPointer(0, 4, GL_FLOAT, false, 0, 0);

// Send vertex data into GPU memory
GL20.glEnableVertexAttribArray(1);
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, verticesHandle);
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, vertices, GL15.GL_DYNAMIC_DRAW);
GL20.glVertexAttribPointer(1, 3, GL_FLOAT, false, 0, 0);

// Send texcoords data into GPU memory
GL20.glEnableVertexAttribArray(2);
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, texcoordsHandle);
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, texcoords,GL15.GL_DYNAMIC_DRAW);
GL20.glVertexAttribPointer(2, 2, GL_FLOAT, false, 0, 0);

for (Batch batch : batches) batch.render();

GL20.glDisableVertexAttribArray(0);
GL20.glDisableVertexAttribArray(1);
GL20.glDisableVertexAttribArray(2); 
```

就像我说的第一个代码完美地工作，但第二个根本没有绘制任何东西。这些是我在渲染器中更改的唯一代码行，它们对我来说看起来是正确的。但显然某处存在问题......可能导致没有渲染的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:58:36.433

如果这些确实是您更改的唯一行，那么我猜您还没有实现任何着色器？

在 OpenGLES 2.0 中没有固定的函数管道，所以你需要编写顶点/片段着色器，编译它们，链接程序对象等。

如果您搜索，我相信您可以找到很多教程。

# android - How can I get a width/height of Dialog with FILL_PARENT layout?

> ID：11198449
> 
> 赞同：1
> 
> 时间：2012-06-25T22:45:10.237
> 
> 标签：android, android-layout

I have an activity with

```
android:theme="@android:style/Theme.Dialog" 
```

to show it as float window. Also I have a line

```
getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); 
```

And I need a width/height of this window to show content correctly.

I've tested four options and did not get an answer:

```
//1 
int width = getWindowManager().getDefaultDisplay().getWidth();

//2 
int width = getWindow().getDecorView().getWidth();

//3 
getWindow().getDecorView().getWindowVisibleDisplayFrame(rect);

//4 
int width = getWindow().getAttributes().width; 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:05:47.237

使用这个功能：

```
private int getting_screen_width(Dialog dialog) 
    { 
    DisplayMetrics dm = new DisplayMetrics();
     dialog.getWindow().getWindowManager().getDefaultDisplay().getMetrics(dm);
    String width = ""+dm.widthPixels ;
    dm = null;
       return (Integer.parseInt(width)); 
```

这将返回屏幕宽度的值

# android - How to get images from facebook album

> ID：11198455
> 
> 赞同：1
> 
> 时间：2012-06-25T22:45:19.597
> 
> 标签：android, facebook-graph-api

I have albumID,I did the following code but not able to get the result (photos). I think m missing something in facebook.request

```
try {
             //wallAlbumID is variable having album id.
        response = facebook.request("me/album."+wallAlbumID+"/photos");
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    JSONObject json = null;
    try {
        json = Util.parseJson(response);
    } catch (FacebookError e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    JSONArray photos = null;
    try {
        photos = json.getJSONArray("data");
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    for (int i =0; i < photos.length(); i++) {
        JSONObject a = null;
        try {
            a = photos.getJSONObject(i);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

looking for code in response.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:11:28.463

如果您已经知道您的专辑 ID，则无需添加`me/albums/`到您的请求中。尝试这个：

```
response = facebook.request(wallAlbumID+"/photos"); 
```

# python - Python 3.2 井字游戏重播？

> ID：11198459
> 
> 赞同：-4
> 
> 时间：2012-06-25T22:46:20.123
> 
> 标签：python

我在 python 中编写了一个井字游戏，它工作得很好，一切都很好。`Do you wish to play again?`所以我想知道，你能以某种方式对游戏进行编程，让它在计算机获胜或你获胜后说“ ”吗？

在我的游戏中，一旦电脑赢了或者你赢了，它什么也没说，我希望游戏询问玩家是否想再玩一次。谢谢（：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:52:13.097

您需要将游戏包装在一个更大的循环中，就像这样。理想情况下，您将代码分解为函数，因此很容易做到。

```
def play_game():
    print 'playing the game'

answer = 'y'
while answer.lower() == 'y':
    play_game()
    answer = raw_input("Do you wish to play again? (y/n)")

print 'the end.' 
```

此循环还有其他变体，但这应该让您对基本结构有所了解。

请注意，如果输入不是`Y`or `y`.. 您将不得不考虑这是否足够好，或者您是否想要处理其他输入`n`或`N`更长的回复/字符串。该提示目前*暗示*只有这两个`(y/n)`是有效的选项 - 所以这是你需要考虑和解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:53:12.753

在游戏中的某个时刻（通常是游戏结束时）你应该有这样的东西：

```
answer = raw_input("Would you like to play it again?") // Get the user answer

if answer == 'yes':
  restart_game()     // if answer is 'yes' play the game again
else:
  close_game()       // else close the game 
```

# iphone - Setting UIViewGroupOpacity on a View by View Basis

> ID：11198460
> 
> 赞同：1
> 
> 时间：2012-06-25T22:46:29.487
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

Is it possible to set `UIViewGroupOpacity` (see [documentation](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)) for a single or set of views in an application? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T20:50:28.540

您可以通过设置来做到这一点

```
view.layer.shouldRasterize = YES;
view.layer.rasterizationScale = [UIScreen mainScreen].scale; 
```

在设置视图的 alpha 之前。

# mobile - 移动应用的电子邮件确认最佳实践

> ID：11198463
> 
> 赞同：32
> 
> 时间：2012-06-25T22:46:34.557
> 
> 标签：mobile, email-verification

所以我正在编写一个移动应用程序，并且已经到了需要允许用户注册用户名的地步。我通过询问电子邮件地址、用户名和密码来做到这一点。

通常，通过让用户通过单击发送到其收件箱的链接来确认其电子邮件地址来在网络上设置此类事情是很正常的。

不用说，在移动应用程序上这有点笨拙，因为用户将被重定向出您的应用程序并进入他的浏览器。

因此，我查看了其他移动应用程序是如何做到的（WP7），并惊讶地发现 DropBox 和 Evernote 都允许您在不确认您的电子邮件地址的情况下进行注册。这样做的最终结果是，我能够使用完全伪造的电子邮件地址和/或不属于我的有效电子邮件地址进行注册。

我认为这是故意的。

你的意见？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T04:36:33.283

在编写社交网络风格的应用程序时，我遇到了同样的问题。我选择让用户创建一个用户名，然后提供电子邮件和密码。我不验证电子邮件地址，也从未尝试向他们发送任何电子邮件（至今）。

我建议的是验证用户电子邮件地址的替代方法。我的应用程序允许用户进行 Facebook Connect。他们所要做的就是登录 Facebook，该应用程序会与 Facebook 对话以确认他们使用的是有效的电子邮件地址。无需使用电子邮件中的 URL 进行验证。

我相信 Twitter 也有类似的服务，甚至可能还有其他一些提供 API。

我还发现很多人只是想在应用程序中摆弄，根本不想创建帐户。这绝对是一种平衡行为

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-30T11:33:32.537

我想说这取决于您的应用程序以及确保用户拥有有效电子邮件地址的重要性。在我现在正在创建的应用程序中，我们希望阻止用户注册多个虚假帐户（因为我们的系统可能会以这种方式进行游戏），因此我们不允许用户登录，直到他们的电子邮件地址得到验证。然而，在其他网站上，这可能没什么大不了的，那么为什么还要用这个额外的步骤来打扰用户呢？

至于移动设备，我不明白为什么您仍然无法发送验证电子邮件，将他们发送到您的网站以验证他们的电子邮件地址。有很多移动应用程序也有一个网站，用户可以登录来管理他们的帐户。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-12T04:16:11.437

另一种选择是为用户提供多个“状态”。在他们验证电子邮件之前，他们处于“待处理”状态。一旦他们点击它，他们就处于“活动”状态。如果您`createDate`为用户存储 ，您可以定期删除超过 1 周（或多长时间）的待处理用户。

好处是您可以轻松添加更多状态，例如暂停或删除。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-23T19:10:23.230

就个人而言，我不太乐意让用户使用任何旧电子邮件地址创建帐户。

我认为一些不错的选择是：

*   发送带有链接的确认电子邮件，该链接使用自定义 URL 架构重定向回应用程序（尽管这仅在他们使用同一设备上的链接时才有效）

*   在电子邮件中发送一个简短的 PIN 码，让他们重新输入应用程序。

*   发送带有网络链接的确认电子邮件，让您的服务器确认有效的电子邮件/令牌，并让您的应用定期或使用某种实时技术（如 SignalR 或 Firebase）检查帐户状态。

我更喜欢最后一个，虽然最难实现。用户很可能手里拿着手机，旁边有笔记本电脑，在应用程序中注册并尝试单击笔记本电脑上刚刚显示的电子邮件中的链接。我喜欢该应用程序的想法，然后只是“知道”他们已经验证。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T20:07:26.023

你有网络服务器吗？编写一个 Web 服务，在服务器端为您进行验证，然后发回结果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-12T12:07:28.290

要么你可以使用一些平台，比如上面@Brian 回复的 Facebook connect，要么你可以给用户一个合理的时间框架来验证，例如几天甚至一周。之后，该帐户将被删除。

您甚至可以让您的应用发出通知以提醒用户验证他的帐户（例如每天，或在验证的最后日期。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-12T12:24:50.893

不要在移动设备上要求电子邮件确认，并允许用户使用该服务。当用户使用 PC 时，请要求用户确认他的电子邮件。

我不会为我的建议辩护，因为这里的大多数解决方案都是有效的。没有一种正确的方法。你问了一些想法，这是一个。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-12T14:14:55.233

一个好的策略是允许人们根据他们提供的数据量尽可能多地使用您的应用程序。

例如，在新闻阅读器的情况下，您可以让某人在不注册的情况下浏览您的应用程序，然后需要一个帐户来进行离线同步，并需要一个经过验证的电子邮件才能发出警报。总是给人们一个很好的理由来采取下一步行动，首先建立参与，然后人们会原谅你以后纠缠他们。

# c# - 创建字典（哈希表）维护顺序

> ID：11198465
> 
> 赞同：0
> 
> 时间：2012-06-25T22:46:47.660
> 
> 标签：c#, performance, dictionary, hashtable

我有以下课程：

```
 private class NodeTemp
    {            
        public string Content;
        public NodeTemp Next;
        public NodeTemp Prev;
    } 
```

如您所见，我必须`NodeTemp Next`能够引用哈希表上的下一个元素，就像`NodeTemp Prev`引用哈希表上的 previos 元素一样。

所以我有一个非常大的“xml”，比如我必须解析的文本文件。我看起来像：

```
<1><a5>: Abbrev Number: 2 (DW_TAG_base_type)
    <a6>   DW_AT_name        : unsigned short   
    <b5>   DW_AT_byte_size   : 2    
    <b6>   DW_AT_encoding    : 7    (unsigned)
 <1><b7>: Abbrev Number: 2 (DW_TAG_base_type)
    <b8>   DW_AT_name        : unsigned int 
    <c5>   DW_AT_byte_size   : 4    
    <c6>   DW_AT_encoding    : 7    (unsigned)
 <1><c7>: Abbrev Number: 2 (DW_TAG_base_type)
    <c8>   DW_AT_name        : unsigned char    
    <d6>   DW_AT_byte_size   : 1    
    <d7>   DW_AT_encoding    : 8    (unsigned char)
 <1><d8>: Abbrev Number: 4 (DW_TAG_pointer_type)
    <d9>   DW_AT_type        : DW_FORM_ref4 <0x552> 
 <1><de>: Abbrev Number: 2 (DW_TAG_base_type)
    <df>   DW_AT_name        : void 
    <e4>   DW_AT_byte_size   : 0    
    <e5>   DW_AT_encoding    : 5    (signed)
 <1><e6>: Abbrev Number: 4 (DW_TAG_pointer_type)
    <e7>   DW_AT_type        : DW_FORM_ref_udata <0xde> 
 <1><ea>: Abbrev Number: 4 (DW_TAG_pointer_type)
    <eb>   DW_AT_type        : DW_FORM_ref4 <0x180> 
 <1><f0>: Abbrev Number: 4 (DW_TAG_pointer_type)
    <f1>   DW_AT_type        : DW_FORM_ref4 <0x4cb> 
 <1><f6>: Abbrev Number: 4 (DW_TAG_pointer_type)
    <f7>   DW_AT_type        : DW_FORM_ref4 <0x4efb>    
 <1><fc>: Abbrev Number: 2 (DW_TAG_base_type)
    <fd>   DW_AT_name        : char 
    <102>   DW_AT_byte_size   : 1   
    <103>   DW_AT_encoding    : 8   (unsigned char)
.....
.... 
```

我有一种方法可以搜索它并一次返回一个块。我创建 a`Dictionary<string, NodeTemp>`而不是 a`List<NodeTemp>`的原因是为了提高性能，因为我必须进行多次查询才能找到我需要的节点。

所以我现在拥有的是：

```
var mtch = Regex.Match(GetUnparsedDebugInfo(), @"(?s)<\d+><\w+>.*?(?=\n <)");

int ctr = 0; // counter                       
NodeTemp[] nodes = new NodeTemp[3]; // circular array

while (mtch.Success)
{

    /*  mtch.value should = something like:

              <1><a5>: Abbrev Number: 2 (DW_TAG_base_type)
                <a6>   DW_AT_name        : unsigned short   
                <b5>   DW_AT_byte_size   : 2    
                <b6>   DW_AT_encoding    : 7    (unsigned)

    */

    var index = ctr % 3; // current possition in circular array

    //get key
    var k = Regex.Match(mtch.Value, @"><(\w+)>").Groups[1].Value;

    var cNode = new NodeTemp() { Content = mtch.Value };                           

    dictionary.Add(k, cNode);

    nodes[index] = cNode;

    if (ctr > 0)
    {
        var lastIndex = index - 1;
        if (lastIndex < 0)
        lastIndex = 2;

        nodes[lastIndex].Next = cNode;
        cNode.Prev = nodes[lastIndex];
    }

    ctr++;

    mtch = mtch.NextMatch();
} 
```

这不起作用，因为`nodes[index]`包含对对象的引用，最后，如果我更改它，它将全部更改。我该如何解决这个while循环？我不想创建一个列表，然后将该大列表转换为字典。我认为这不会是有效的。

或者，也许我可以创建一些其他类型的数据结构，使我能够快速查询我需要的节点，并且我还能够保持顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:49:58.950

我认为您可能需要的是 OrderedDictionary。看看：http: [//msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)

看起来也有一个使用泛型的，虽然没有尝试过。 [http://www.codeproject.com/Articles/18615/OrderedDictionary-TA-generic-implementation-of-IO](http://www.codeproject.com/Articles/18615/OrderedDictionary-T-A-generic-implementation-of-IO)

# javafx - JavaFX NumberAxis 关闭自动隐藏/缩放行为

> ID：11198470
> 
> 赞同：2
> 
> 时间：2012-06-25T22:47:12.170
> 
> 标签：javafx, javafx-2

使用 JavaFX 2.1 时，NumberAxis 与 ScatterChart 等图表一起使用时，具有一个功能，即当调整可视项的大小时，图表也会调整大小。NumberAxis 会调整大小，并且随着它变小，它将隐藏不适合的标签，或者作为它变大将在显示的标签之间添加新的刻度。（即使调用了 setMinorTickVisible(false)）。

就我而言，我有特定的标签要用于某些数值。所以我写了自己的 StringConverter 并在 NumberAxis 上调用了 setTickLabelFormatter()

问题是当它调整大小时，我想确保所有标签都准确地显示在显示屏中。但是，调整大小会隐藏我想要显示的标签（如果它变得太小），或者如果它变得太大，则会添加不需要的刻度。

如何覆盖数字轴的行为而不这样做？

或者，如何正确调整图表的大小以仅显示我需要/想要的标签（如果需要，添加滚动窗格）。

感谢您的帮助 我是一名刚刚学习 JavaFX 的长期 Java 开发人员

# c# - Filtering results within a DataTable (date column between date1 and date2)

> ID：11198471
> 
> 赞同：1
> 
> 时间：2012-06-25T22:47:17.003
> 
> 标签：c#, datetime, date, datatable

I am using c#, sqlce, datatable. I select products with this query:

```
select price from products where productid=myproduct and mydate between startdate and finaldate and clientid=myclient 
```

But it's going to take much time. So I could use a datatable to store products:

```
datatable prices = new datatable(); 
prices=this.returntable("select productid,startdate,finaldate,client from products")

 for(int i=0;i<allproductsihave;i++) {
    product.newprice=this.getmyprice(prices,product.client,product.id,product.date);
 }

 private decimal getmyprice(datatable products,string myclient, string myproduct, datetime mydate)
 {
   //how do I do at here the equivalent to first sql query?
   //for select a product from a datatable where my date is between 2 dates,
   //and client=myclient and productid=myproduct
   return Convert.Todecimal(datatable.prices[something]["price"].tostring());
 } 
```

In this way I shouldn't connect to the database for each product query. Is it posible?

> maybe doing convert.todatetime to startdate and finaldate?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:10:50.483

Sounds like you dont want to make multiple requests to the database because you are worried about making several connections, which will be slower? If you dont want to connect for every product, why not just use a "where product in ('xxx', 'yyy')" instead? Then you have a single query call, and no changes on the database. You can then process the results when you get them back.

Your boss should speak to @pilotcam. He is right. Its no quicker in c# than it would be on the database. :)

In fact, doing this in c# means you are getting information back (I assume over a network if its a remote database) which you would never use, so its probably slower, how much depends on how much data is in your database which wont be in your final results!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:07:37.263

The [DataTable.Select()](http://msdn.microsoft.com/en-us/library/system.data.datatable.select.aspx) method accepts a string representing a "where" condition and returns an array of DataRow containing matching rows.

```
Datarow[] products = prices.Select(string.Format("'{0}'>='{1}' AND '{0}'<='{2}'", mydate, startdate, finaldate)); 
```

Mind the date format!! It must be sql compliant.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T23:25:35.707

As much as I disagree with this method for reasons stated in comments, here's one possibility. The idea here is to check for the most obvious exclusions first, then work your way to the date later.

```
 private decimal GetMyPrice(DataTable table, string client, string product, DateTime date)
    {
        foreach (DataRow row in table.Rows)
        {
            if (row["productid"] != product) continue;
            if (row["client"] != client) continue;
            if (Convert.ToDateTime(row["startdate"]) < date) continue;
            if (Convert.ToDateTime(row["finaldate"]) > date) continue;

            return Convert.ToDecimal(row["price"]); 
        }
        throw new KeyNotFoundException();               
    } 
```

# jquery - $(document).ready 在 JQuery Mobile 中没有触发

> ID：11198472
> 
> 赞同：2
> 
> 时间：2012-06-25T22:47:29.237
> 
> 标签：jquery, jquery-mobile, document-ready

> **可能重复：**
> [jQuery mobile $(document).ready 等价物](https://stackoverflow.com/questions/5622581/jquery-mobile-document-ready-equivalent)
> [在翻页时是否触发就绪事件](https://stackoverflow.com/questions/9839320/does-ready-event-fire-when-page-turn)

我有两个页面 - **Page1.html**和**Page2.html**。
我从**Page1.html调用****Page2.html**。 在那种情况下，不会在**Page2.html**中触发。 **`$(document).ready`**

 ****我用来导航的代码是：

```
<li><a href="Page2.html" data-prefetch="true" data-transition="flip">Page 2</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:05:27.067

看到这个 [http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

*在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到**pageinit 事件**。*****

# java - 如何诊断泄露的 http 连接 (org.apache.http.impl.conn.tsccm.ConnPoolByRoute)

> ID：11198473
> 
> 赞同：4
> 
> 时间：2012-06-25T22:47:33.277
> 
> 标签：java, amazon-web-services, connection-pooling, apache-httpclient-4.x

我有一个在亚马逊的 EC2 上运行的多线程 Java 程序。它使用 org.apache.http.impl.client.DefaultHttpClient 通过 HttpPost 和 HttpGet 从供应商处查询和获取数据项。同时，它使用 AWS 的 Java SDK 将检索到的数据项推送到 S3。

运行几天后，我得到了通常伴随 http 连接泄漏的症状：

```
org.apache.http.conn.ConnectionPoolTimeoutException: Timeout waiting for connection
at org.apache.http.impl.conn.tsccm.ConnPoolByRoute.getEntryBlocking(ConnPoolByRoute.java:417)
at org.apache.http.impl.conn.tsccm.ConnPoolByRoute$1.getPoolEntry(ConnPoolByRoute.java:300)
at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager$1.getConnection(ThreadSafeClientConnManager.java:224)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:391)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732) 
```

由于 AWS 和我对数据供应商的请求都使用 Http 连接，所以我不太确定我到底忘记了哪里`HttpEntity.consume()`，或者`S3ObjectInputStream.close()`（除非它还有其他东西......）。

所以这是我的问题：有没有办法进行监控`org.apache.http.impl.conn.tsccm.ConnPoolByRoute`，以便至少我可以**检测到**我何时开始泄漏连接/实体未正确使用/http 流未关闭？（我感觉它只在某些条件下发生，例如当某些异常被抛出时，绕过我的代码中消耗 HttpEntities、关闭流等的逻辑。）关于如何诊断最终导致我所有 http 的任何想法因 ConnectionPoolTimeoutException 而失败的连接将是最受欢迎的。我不想在尝试解决问题的根本原因之间等待 4 天以上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:56:14.410

如果您正在使用`PoolingClientConnectionManager`注释，则有一些方法`getTotalStats()`，`getStats(final HttpRoute route)`它们将为您提供一个 PoolStats 对象，其中包含您要监视的数据。

只需从您的 httpclient 获取 ConnectionManager：

```
PoolingClientConnectionManager poolManager = (PoolingClientConnectionManager) httpClient.getConnectionManager(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T02:08:45.433

如果您可以访问，`org.apache.http.impl.conn.tsccm.ConnPoolByRoute`则将其 connTTL 设置为足够低的值，以便`WaitingThreadAborter`最终终止连接。它会在那里显示一个很好的堆栈跟踪。另一种选择是使用 CGLIB 或其他一些字节码操作框架来创建代理类包装`org.apache.http.impl.conn.tsccm.ConnPoolByRoute`。根据您的环境，设置它可能并不那么容易，但它是一个非常有价值的工具来调试像您这样的问题。（是的，如果你碰巧使用 spring 或者只是简单的 Aspects，那么设置将会非常简单:)）

# javascript - 使用 javascript/jquery 遍历包含 HTML 的字符串中的所有标签

> ID：11198476
> 
> 赞同：1
> 
> 时间：2012-06-25T22:47:45.380
> 
> 标签：javascript, jquery, html

我正在使用一个富文本编辑器类型控件，它是一个写成 jQuery 插件的。它基本上是在页面上插入一个 IFrame，并使其可编辑——对于富文本控件来说是相当标准的。

现在，我要做的是改进从文本编辑器中删除所有格式的选项。目前它正在使用大量正则表达式来完成，并且快速的谷歌搜索表明这不是正确的方法。我希望允许这种取消格式化具有一定程度的灵活性，以便我可以保留某些标签（如段落标签）。

我试图使用 jQuery 内置的 DOM 解析来轻松地做到这一点，但我似乎遇到了麻烦。

假设我有一个示例 HTML 字符串：

```
<Body><p>One <strong>Two</strong> <em>Three</em></p></Body> 
```

我正在寻找取消格式，以便删除所有非段落标签。所以，我希望输出是一个如下所示的字符串：

```
<Body><p>One Two Three</p></Body> 
```

示例代码：

```
//Some very simple HTML obtained from an editable iframe
var text = '<Body><p>One <strong>Two</strong> <em>Three</em></p></Body>';
var $text = $(text);

//All tags which are not paragraphs
$(':not(p)',$text).each(function() {
    //Replace the tag + content with just content
    $(this).html($(this).text());
});

//I'll be honest, I found this snippet somewhere else on stackoverflow,
//It seems to parse the jquery object back into an HTML string.
var returnVal = "";
$text.each(function(){
    returnVal += $(this).clone().wrap('<p>').parent().html();
});
//Should be equal to '<p>One Two Three</p>'       
return returnVal; 
```

这似乎应该有效，但不幸的是它没有。在上面的示例中，“returnVal”与输入相同（减去“body”标题标签）。有什么我明显做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:01:40.173

替换这一行：

```
$(this).html($(this).text()); 
```

... 有了这个：

```
$(this).replaceWith($(this).text()); 
```

...它应该可以工作（至少在[这里](http://jsfiddle.net/rLehn/)可以工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:02:23.070

```
...snip
// Here's your bug:
$(':not(p)',$text).each(function() {
//  You can't use .html() to replace the content 
//     $(this).html($(this).text());
//   You have to replace the entire element, not just its contents:
    $(this).replaceWith($(this).text());
});
...snip 
```

# asp.net - 从 ASP.NET 中的 .ashx 处理程序服务 HTTP PUT 而无需调整文件权限

> ID：11198478
> 
> 赞同：4
> 
> 时间：2012-06-25T22:47:56.727
> 
> 标签：asp.net, ashx, http-put

我有一个 .ASHX 处理程序，我想用它来处理 HTTP PUT 以允许我将文件上传到 Web 服务器 - .ASHX 文件实际上上传了数据并将文件粘贴到其他地方，因此它实际上从未接触过这里的磁盘.

我已将 web.config 设置为允许它处理 HTTP PUT，但 IIS 不会将请求传递给我的代码，除非我将 .ASHX 文件本身的 ACL 设置为可写——这有点傻，因为我们'实际上并不会写入这些文件。

如果我设置了 ACL，它可以正常工作，但我希望能够处理文件而无需设置 ACL（我确信有一种适当的方法可以使 IIS 只需将 HTTP PUT 传递给 . ASHX 文件，而不检查文件本身的权限。

这是在 Win2008 R2 上（实际上是在 Azure 的 2008 R2 上，但应该是一样的），使用 .NET 4.0

`401 - Unauthorized: Access is denied due to invalid credentials. You do not have permission to view this directory or page using the credentials that you supplied.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:32:10.120

让 PUT（和 DELETE）与 ASP.NET 一起工作有几个障碍。既然你提到了 Win2008 R2 (IIS 7.5)，我会检查你看到的错误是否提到了 WebDAV 模块或处理程序。

WebDAV 从 IIS 7.5 开始默认启用。它将干扰 ASP.NET 处理程序和模块上的 HTTP PUT 和 DELETE 动词。如果您正在实施 RESTful 服务，您甚至可能不会使用此功能。通过您的 web.config 禁用它。

```
<system.webServer>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
    <handlers>
        <remove name="WebDAV" />
    </handlers>
</system.webServer> 
```

此论坛帖子中提到了一些其他解决方案，标题为[HTTP Error 405 With ASP.Net MVC and HTTP PUT on IIS 7.5](http://shouldersofgiants.co.uk/Blog/post/2009/11/27/HTTP-Error-405-With-ASPNet-MVC-and-HTTP-PUT-on-IIS-75.aspx)。

# .net - EF每次查询数据库

> ID：11198479
> 
> 赞同：1
> 
> 时间：2012-06-25T22:48:01.697
> 
> 标签：.net, sql-server, entity-framework

我有一个数据上下文（创建一次），我使用它多次获取相同的数据库记录，例如，我获得指定相同产品 ID 的相同产品记录。

比方说，每次我调用时`context.Products.Single(p => p.ProdID == 1)`，上下文都会返回产品实体的相同实例，但每次都查询数据库，这在 SQL Server Profiler 中可见。

我通过修改调用之间的一些属性来检查它是否返回相同的实例。下一个调用返回具有修改后属性的实例。

为什么它每次都查询数据库，有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:50:31.747

这样做是因为另一个用户可能在第一次和第二次通话之间修改了记录。

如果数据相对静态，请考虑[缓存解决方案。](https://www.google.com/search?q=EF+caching)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:21:19.700

您可以使用[**ObjectContext.GetObjectByKey**](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.getobjectbykey.aspx) ( `DbSet<T>.Find`for `DbContext`) 通过其键查询实体。此方法将检查具有指定键的对象是否已附加到上下文。如果是，它将返回该对象而不查询数据库。如果它在上下文中不存在，它将运行数据库查询。

LINQ 查询通常查询数据库，无论对象是否已附加到上下文。EF 无法预先知道是否附加了对象，因为它不知道查询的结果。您的 LINQ 按键查询是一个例外 - 理论上 - 因为 EF*可以*知道查询是否必要，因为它可以检查具有该键的对象是否已附加。但是这个异常并没有被这样处理——这就是`GetObjectByKey`存在的原因——它像所有其他 LINQ 查询一样查询数据库。

查询结果会发生什么由 ObjectSet 的[**MergeOption 决定**](http://msdn.microsoft.com/en-us/library/system.data.objects.mergeoption.aspx)。默认情况下`AppendOnly`，如果带有键的对象已附加到上下文，则丢弃查询结果。查询不会覆盖或刷新任何内容。仅当上下文中不存在具有键的对象时，查询结果中的对象才会具体化并将附加到上下文中。您可以通过选择另一个来更改此默认行为`MergeOption`。

# asp.net-mvc-3 - 在带有剔除的下拉列表中设置类型模型的选定选项

> ID：11198484
> 
> 赞同：1
> 
> 时间：2012-06-25T22:48:30.047
> 
> 标签：asp.net-mvc-3, drop-down-menu, knockout.js

我正在尝试使用淘汰赛从服务器端加载保存的选项，请参阅下面的总体思路，

我在javascript中有以下类：

```
funcion Request() {  
    this.Id = ko.observable('');  
    this.Name = ko.observable('');  
    this.Form = ko.obsevable('');  
}

function Form() {
    this.Id = ko.observable('');
    this.Name = ko.observable(''); 
} 
```

这是我的视图模型

```
function RequestViewModel() {
    var self = this;
    self.Request = new Request();
    *self.Request.Form = new Form();*
} 
```

我可以毫无问题地保存表单，但是当我尝试加载保存到数据库中的表单字段时，绑定不起作用。

如果有人遇到过同样的问题，请告诉我如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:36:54.487

aaberg 的答案是正确的，但是如果您说需要一次全部加载，我建议您使用敲除映射插件来自动执行此操作：http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

你的电话看起来像这样：

```
ViewModel = ko.mapping.fromJS(requestFromServer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:54:34.420

你的形式是一个可观察的。设置 observable 时，应将其作为方法调用，并将解析值设置为参数。像这样的东西：

```
function RequestViewModel() {
    var self = this;
    self.Request = new Request();
    self.Request.Form(new Form());
} 
```

如果您从数据库中加载了表单，它应该看起来像这样：

```
self.Request.Form(myLoadedForm); 
```

# java - WSDL 中具有重要名称的参数名称

> ID：11198486
> 
> 赞同：13
> 
> 时间：2012-06-25T22:48:36.877
> 
> 标签：java, web-services, wsdl, jax-ws

我正在使用 JAXWS RI 在 Java 中创建 WebService。WSDL 文件是在自动部署应用程序 WAR 时创建的。问题是我希望 WSDL 文件中的参数（每个操作接收）具有重要的名称，但它们显示为 arg0、arg1、arg2 ... 有没有办法定义这个参数的名称并且不使用默认名称？

我已经实现了以下内容：

***网络服务接口***

```
@WebService
@SOAPBinding(style = Style.RPC)
public interface WS2 {
    @WebMethod String confirmaXML(String lrt_id);
} 
```

***WebService 接口实现***

```
@WebService(endpointInterface = "vital.tde.ws2.WS2")
public class WS2Imp implements WS2{
    public String confirmaXML(String lrt_id) {
        String respuesta = null;
        //CODE
        return respuesta;
    } 
```

***太阳jaxws.xml***

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints
    xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime"
    version="2.0">
    <endpoint name="WS2" implementation="vital.tde.ws2.WS2Imp" url-pattern="/WS2" />
</endpoints> 
```

***web.xml***

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>WS2</display-name>
  <listener>
    <listener-class>
                com.sun.xml.ws.transport.http.servlet.WSServletContextListener
        </listener-class>
  </listener>
  <servlet>
    <servlet-name>WS2</servlet-name>
    <servlet-class>
            com.sun.xml.ws.transport.http.servlet.WSServlet
        </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>WS2</servlet-name>
    <url-pattern>/WS2</url-pattern>
  </servlet-mapping>
  <session-config>
    <session-timeout>120</session-timeout>
  </session-config>
</web-app> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-25T23:19:56.170

如果您从 Web 服务类生成 WSDL，则可以[`WebParam`](https://docs.oracle.com/javase/7/docs/api/javax/jws/WebParam.html)向方法的参数添加注释以强制在 WSDL 中命名。例如：

```
@WebService
public class FooService
{
    @WebMethod(operationName = "barMethod")
    public void bar (@WebParam(name = "bazArg") int baz)
    {
        ...
    }
} 
```

上面的代码片段将 JAX-WS 配置为使用名称“bazArg”作为 WSDL 中方法的参数名称。

# solr - 用boost值理解SolrInputDocument的addField方法

> ID：11198488
> 
> 赞同：2
> 
> 时间：2012-06-25T22:48:47.540
> 
> 标签：solr

我还是 solr 的新手（我觉得问简单的问题很傻，脸红），但是下面这两种方法有什么区别？我应该使用哪一个？如果我将文档中所有字段的 boost 值设置为 1.0f 会怎样？

1.  添加没有提升的字段

    public void addField(String name, Object value) 添加一个带有隐含空值的字段用于提升。

2.  添加具有提升值的字段

    public void addField(String name, Object value, float boost) 添加具有给定名称、值和提升的字段。如果同名字段已存在，则将其更新为新值并提升。

非常感谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:22:35.393

您应该阅读 Solr 的 wiki（或我的书，第 5 章），了解什么是“提升”或什么是“提升”。简而言之，索引时间提升提供了增加通过与指定字段匹配的查询匹配的文档分数的机会。它是一个乘数，因此默认值为 1.0。大多数应用程序应该避免索引时间提升以实现更灵活的查询时间提升。例如，使用 dismax 解析器的“qf”参数。

# javascript - 在保存输入的输入文本框中输入字符后移动到新页面

> ID：11198498
> 
> 赞同：0
> 
> 时间：2012-06-25T22:49:21.950
> 
> 标签：javascript, jquery, html

我想在我的网页中实现类似于谷歌搜索页面的东西。链接[http://www.google.com](http://www.google.com)在页面中间显示搜索字段，在输入字符时，它会移动到页面顶部，并保留输入的内容。

如果有人可以演示使用 jquery/javascript 或 html 来实现这一点，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:40:05.907

我只是为您准备了一个小脚本，以获取想法。在此过程中对其进行处理并阅读[jquery 事件](http://api.jquery.com/category/events/)。这应该让你开始，[http://jsfiddle.net/epinapala/uZ8xv/2/](http://jsfiddle.net/epinapala/uZ8xv/2/)

顺便说一句，Gogole 不会将您重定向到即时搜索。t 移动 div，这个例子是一个非常小的原型来演示相同的。

```
<div class="block">
    <input id="ip" type="text" />
    <div class="res">NULL</div>
</div>  

div {
  position:absolute;
  left:50px;
  width:90px;
  height:90px;
  margin:5px;
  top:100px;
}​ 
```

​</p>

```
var d = false;

$("#ip").keyup(function(){
    if(d ==false){
    $(".block").animate({"top": "-=50px"});
        d= true;
    }
    var v =$(this).val();
    $(".res").html("Search results for " + v );
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:43:39.457

使用`keypress`和`appendTo`

```
<div style="height:30px;" id="divMain">
    Move entire form below here on search
</div>
<br />
<div style="height:90px;" id="divOther">
<br />Some text...
<form id="frmSubmit">  
  Search: <input type="text" id="txtSearch" /><br />
  <input type="submit" value="Submit" />
</form>
</div> 
```

jQuery：

```
$("#txtSearch").keypress(function() {
    $("#frmSubmit").appendTo("#divMain");
    $('#txtSearch').focus();
});​ 
```

最后：

[jsFiddle 示例](http://jsfiddle.net/maSFE/2/)

# extjs4 - extjs4 列隐藏在跨选项卡共享的树面板中

> ID：11198499
> 
> 赞同：0
> 
> 时间：2012-06-25T22:49:22.423
> 
> 标签：extjs4, treepanel

我的应用程序（mvc）在我看来是这样设计的，有 3 个选项卡

```
Ext.define('App.view.cube.MainView', {
    extend: 'Ext.panel.Panel',
    ....
    layout: 'card',
    ...
    dockedItems: [{
        xtype: 'panel',
        items: [{
            // a drop down containing 2 choices
        }]
    }],
    items: [{
        xtype: 'tabpanel',
        itemId: 'mmtabs',
        activeTab: 1,
        items: [{
            title: 'Served',
            xtype: 'treepanel', // my own xtype extending this xtype
            id: 'Served :',
            itemId: '1'
        }, {
            title: 'UnServed',
            xtype: 'treepanel', // my own xtype extending this xtype
            id: 'UnServed :',
            itemId: '0'
        }, {
            title: 'Total',
            xtype: 'treepanel', // my own xtype extending this xtype
            id: 'Total :',
            itemId: '2'
        }]
    }]
}); 
```

基本上，带有两个选项的下拉菜单应该允许用户在网格（树形面板）中查看所需的列。第一次加载应用程序并且用户在下拉列表中更改为不同的选择时，列不会按应有的方式隐藏。但是，如果他要导航到另一个选项卡，然后做同样的事情，一切都会按预期进行。我无法弄清楚问题所在。

在上面的代码中，我正在重用

```
xtype : 'treepanel', // my own xtype extending this xtype 
```

通过具有不同的 itemId 跨三个选项卡（我希望这很好）。

在我的控制器中，我有一个功能可以切换到视图（隐藏/显示特定列）初始视图（遍历所有选项卡中的所有列并设置适当的视图）在我的视图中的组合框上调用的更改视图。

```
toggleView: function (cubemwwar, viewId) {
    if ("2" == viewId) {
        cubemwwar.columns[1].setVisible(false);
        cubemwwar.columns[2].setVisible(false);
        cubemwwar.columns[3].setVisible(false);
        cubemwwar.columns[4].setVisible(true);
        cubemwwar.columns[5].setVisible(true);
        cubemwwar.columns[6].setVisible(true);
    }
    if ("1" == viewId) {
        cubemwwar.columns[1].setVisible(true);
        cubemwwar.columns[2].setVisible(true);
        cubemwwar.columns[3].setVisible(true);
        cubemwwar.columns[4].setVisible(false);
        cubemwwar.columns[5].setVisible(false);
        cubemwwar.columns[6].setVisible(false);
    }
}, // on controller's onlaunch
initialView: function () {
    var numTabs = this.getCubeMainView().query('#mmtabs')[0].items.length;
    for (var i = 0; i < numTabs; i++) {
        var tab = this.getCubeMainView().query('#mmtabs')[0].items.items[i];
        this.toggleView(tab, 1);

    }
},
// change views based on user selection 
//   from the combobox's select event
changeView: function (combo, rec, idx) {
    // first time somehow the columns do not hide
    // hide/show appropriate columns
    // rec[0].data.id  .. .possible values 1 and 2 only.
    this.toggleView(this.getCubeMainView().query('#mmtabs')[0].getActiveTab(), rec[0].data.id);
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:25:16.050

在启动时，我遍历了所有选项卡，将它们设置为活动状态，然后将第一个选项卡设置回活动状态。那已经解决了这个问题。

```
for(var i=0;i<numTabs ; i++)
{
    var tab = tabPanel.items.items[i];
    this.toggleView(tab,1);
    tabPanel.setActiveTab(i);
}
tabPanel.setActiveTab(0);
this.startingup = false; 
```

# javascript - 滚动时的jQuery淡出 - 我做错了什么？

> ID：11198502
> 
> 赞同：1
> 
> 时间：2012-06-25T22:49:40.653
> 
> 标签：javascript, jquery, scroll, fadeout

我正在尝试在我的网站中实现[http://jsfiddle.net/NKgG9/6/ 。](http://jsfiddle.net/NKgG9/6/)

当用户开始向下滚动时，它应该淡出一个 div。相反，div 只是坐在那里，完全可见且不变。我是 Java 的新手，所以认为这是我所缺少的非常基本和基本的东西。

这就是我正在做的事情：

在 head 标签内：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script>
$(document).ready(function() {
    var targets = $(".scroll_note, .social");
    if($(window).scrollTop() > 10){
      targets.hide();
    }
    $(window).scroll(function(){
        var pos = $(window).scrollTop();
        if(pos > 10){
            targets.stop(true, true).fadeOut("fast" );
        } else {
            targets.stop(true, true).fadeIn("fast");
        }
    });
});?
</script> 
```

然后在 body 标签内：

```
<div class="scroll_note">Scroll down to see our amazing specials!</div> 
```

请帮我！谢谢，亚历克斯:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:14:50.900

您包含的另一个脚本`fadeslideshow.js`调用[`jQuery.noConflict`](http://api.jquery.com/jQuery.noConflict/)删除了 jQuery 对`$`变量的全局分配。你有几种方法可以解决这个问题：

1.  `jQuery.noConflict`删除对in的调用`fadeslideshow.js`。但是，这可能会破坏该幻灯片脚本。
2.  在上面的 JavaScript 代码中使用`jQuery`而不是。`$`
3.  将您的代码包装在一个[自调用函数](http://2007-2010.lovemikeg.com/2008/08/17/a-week-in-javascript-patterns-self-invocation/)中，该函数将全局重新映射`jQuery`为`$`：

    ```
    (function($) { /* your code here */ })(jQuery); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:57:20.247

您`?`的代码末尾有一个将引发错误并终止脚本的代码。删除它，你应该都准备好了。

**编辑：**

我看到你发布了你的网站。您`script`指向 google API 的标签格式不正确。它不是以 开头`http:`，而是以 开头`//`。解决这个问题，然后看看你在哪里

**Edit2**：怀亚特指出这不是真的。看他的回答。

# php - 多个列表框选择数据（table1）并插入到 MySQL Table2

> ID：11198506
> 
> 赞同：0
> 
> 时间：2012-06-25T22:50:14.430
> 
> 标签：php, mysql, arrays, listbox

我有两个表，包含和 TIncludes 用于存储三列数据；一个 ID，macro_num，macro include(table1) 包含所有可能列出的项目，这些项目由 macro_num 显示在表单 (select1) 的列表框中。用户可以将想要的项目添加到第二个框 select2。列表框填充数据并将数据相互移动，使用 javascript 添加/删除按钮。我似乎无法从 select2 获取数据以插入到我的数据库中。不确定我设置不正确或忽略了什么。有没有这样的工作示例？我只看到了插入一项的位置，这很好，但我有一些需要 40 项的报告。提前感谢您阅读本文。我希望有一个快速的解决方案，因为我以前没有处理过这个问题。我的第一个大型项目要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:55:17.237

PHP 表单处理程序只会知道列表中选择的选项。您需要做的不仅仅是将项目添加到选择元素以将它们添加到您的代码中。您可以将它们添加到隐藏元素，或者您可以在提交表单时通过 javascript 强制全选。

# javascript - 使用 JSON 填充 ExtJS 组合框

> ID：11198507
> 
> 赞同：0
> 
> 时间：2012-06-25T22:50:24.223
> 
> 标签：javascript, extjs, combobox, extjs3

我正在使用 ExtJS (3)，只是尝试使用正在使用 JSON 查询的数据库中的记录填充组合框/下拉列表。

这是我的 JSON 调用：

```
var projectDropDown = new Ext.data.Store({
    autoLoad: true,
    url: 'dropdown.json',
    storeId: 'projectDropDown',
    idProperty: 'ProjectID',
    fields: [ 'ProjectID', 'ProjectName' ]
}); 
```

然后是我的组合框代码：

```
{
    xtype: 'combo',
    id: 'ProjectName',
    fieldLabel: 'Project Name',
    valueField: 'ProjectID',
    displayField: 'ProjectName',
    store: projectDropDown,
    typeAhead: true,
    mode: 'local',
    triggerAction: 'all',
    emptyText:'Select a Project...',
    selectOnFocus:true
} 
```

JSON 像这样返回我的数据：

```
[
   {
      "ProjectID":"1",
      "ProjectName":"Mike's Test Project"
   },
   {
      "ProjectID":"2",
      "ProjectName":"My Second Test Project"
   },
   {
      "ProjectID":"3",
      "ProjectName":"My Third Project"
   },
   {
      "ProjectID":"6",
      "ProjectName":"More testing from me"
   }
] 
```

我想我已经很接近了，我只是看不到我缺少什么来建立联系。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:02:06.457

我要做的第一步是将存储（或存储的大小或其他内容）输出到控制台，以查看数据是否正确加载到存储中。

我的猜测是您需要将返回的 JSON 封装到某个根对象中。尝试为您的商店提供一个[JSONReader](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.JsonReader)并`root`指定如下元素：

```
var projectDropDown = new Ext.data.Store({
    autoLoad: true,
    url: 'dropdown.json',
    storeId: 'projectDropDown',
    reader: new Ext.data.JsonReader(
    {
        root: 'projects'
    }),
    idProperty: 'ProjectID',
    fields: [ 'ProjectID', 'ProjectName' ]
}); 
```

然后将返回的 JSON 更改为如下所示

```
{
    "projects" : [
       {"ProjectID":"1","ProjectName":"Mike's Test Project"},
       {"ProjectID":"2","ProjectName":"My Second Test Project"},
       ....
    ]
} 
```

# jquery - 带有加载栏的 jQuery 滑块？

> ID：11198509
> 
> 赞同：0
> 
> 时间：2012-06-25T22:50:30.423
> 
> 标签：jquery, html

是否有任何带有加载栏的 jQuery 滑块？我在几个网站上看到过它们，但我不记得是哪一个了。我能想到的最接近的东西是轨道滑块，但那是一个径向加载条，我只是在底部寻找一条平线..

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:03:51.787

尝试演示周期

Cycle 是一个支持图像演示的脚本，可以轻松显示多个图像。这个脚本支持很多效果和html元素的循环。Presentation Cycle 是 Cycle 功能的一种变体。演示周期不会生成可单击的数字列表，而是生成一个进度条，显示新幻灯片何时出现。

```
http://www.gayadesign.com/scripts/presentationCycle/ 
```

# asp.net - 下拉菜单在大型悬停时徘徊

> ID：11198510
> 
> 赞同：1
> 
> 时间：2012-06-25T22:50:31.430
> 
> 标签：asp.net, drop-down-menu, jquery-hover

我正在使用这个脚本： [http ://www.teylyn.com/wp-content/uploads/2012/03/MegaMenuScript.txt](http://www.teylyn.com/wp-content/uploads/2012/03/MegaMenuScript.txt)

在我将鼠标移开导航按钮后，下拉菜单会停留/停留。

这是我的代码：

```
<ul id="topnav" style="z-index: 1000;">
    <li class="toplevel about">
        <asp:HyperLink runat="server" ID="lnkAbout" NavigateUrl="~/Aboutus/Default.aspx" Text="About Us" CssClass="about" />
        <div class="sub">
            <asp:Menu ID="mnAboutUs" runat="server" DataSourceID="smdsAboutUs" RenderingMode="List" SkipLinkText="" Orientation="Vertical" StaticEnableDefaultPopOutImage="false" DynamicEnableDefaultPopOutImage="false" />
        </div>
    </li>
    <li class="toplevel equipment">
        <asp:HyperLink runat="server" ID="lnkEquipment" NavigateUrl="~/Equipment/Default.aspx" Text="Equipment" />
        <div class="sub">
            <asp:Menu ID="mnEquipment" runat="server" DataSourceID="smdsEquipment" RenderingMode="List" SkipLinkText="" Orientation="Vertical" StaticEnableDefaultPopOutImage="false" DynamicEnableDefaultPopOutImage="false" />
        </div>
    </li>
</ul> 
```

样式是：

```
div.sub
{
    height: 1500px;
    display: none;
    z-index: 99999;
    position: absolute;
}
li.toplevel
{
    float: left;
    display: block;
    position: relative;
    z-index: 99999;
}
li.toplevel a
{
    color: #000000;
    display: block;
    font-size: 1.6em;
    font-weight: normal;
    line-height: 36px;
    position: relative;
    z-index: 99999;
    text-align: center;
    text-decoration: none;
    border-left: 1px solid #FD3;
    border-right: 1px solid #D90;
} 
```

当我将鼠标悬停时，如何使第二个设备 div 类“sub”隐藏起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:07:42.240

在鼠标悬停事件上试试这个：

```
$(".sub").eq(1).hide(); //the number after eq() is the index of the element that contain the sub class 
```

祝你好运！

# c++ - 是否可以访问 wxHaskell 中的底层 Window 类型？

> ID：11198521
> 
> 赞同：1
> 
> 时间：2012-06-25T22:51:49.107
> 
> 标签：c++, haskell, ogre3d

我想知道是否可以将裸机 C++ Window 类型从 wxWidgets 端口获取到 Haskell。我已经查看了图书馆的文档，到目前为止还没有成功。

我打算用它做的是将它传递给 C 函数（然后与 C++ 代码接口）以使用 OGRE3D 渲染一些 3D 图形。我知道在 Haskell 中已经准备好了一个 OGRE 的小绑定，但是所有的教程都是用 C++ 编写的，我是 OGRE 的新手。当我还在学习图书馆时，我不想将教程翻译成 Haskell。

如果这是不可能的，你会推荐什么其他的行动方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:29:31.973

我知道有点晚了，但试试：

```
WIN_TYPE uiWindow = nil;
Ogre::RenderWindow *ogreWindow = Ogre::Root::getSingleton().getAutoCreatedWindow();
ogreWindow->getCustomAttribute("WINDOW", &uiWindow); 
```

您唯一需要更改的是将 WIN_TYPE 更改为 wxWidgets 使用的任何内容。

# c# - NHibernate.QueryException：无法解析属性 - 带有 ID 的列名

> ID：11198526
> 
> 赞同：4
> 
> 时间：2012-06-25T22:52:12.443
> 
> 标签：c#, nhibernate, exception

当我尝试使用 ICriteria 执行以下类时，

```
if (_userGroupId > 0 && _userId > 0 )
{
   return session.CreateCriteria(typeof(UserUserGroup))
             .Add(Restrictions.Eq("UserGroupID", _userGroupId))
               .Add(Restrictions.Eq("UserID", _userId))
               .Add(Restrictions.Eq("Deleted", false));
} 
```

上课

```
public class UserUserGroup
{
    public virtual long UserUserGroupId { get; set; }
    public virtual long UserGroupId { get; set; }
    public virtual long UserId { get; set; }
    public virtual bool Deleted { get; set; }

    public UserUserGroup() {}

    public UserUserGroup(long userGroupId, long userId)
    {
        UserGroupId = userGroupId;
        UserId = userId;
    }

} 
```

与映射，

```
public void Override(AutoMapping<UserUserGroup> mapping)
    {
        mapping.Id(map => map.UserUserGroupId, "UserUserGroupID").GeneratedBy.HiLo("hibernate_unique_key", "next_hi", "100", "tablename='UserUserGroups'");
        mapping.Map(map => map.UserId,"UserID").Nullable();
        mapping.Map(map => map.UserGroupId,"UserGroupID").Nullable();
        mapping.Map(map => map.Deleted,"Deleted").Nullable();
    } 
```

它抛出异常，

> NHibernate.QueryException：无法解析属性：UserGroupID

如何解决财产问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T00:50:32.417

不要在查询中指定列名，而是尝试使用类的属性标识符（末尾的小写字母）：

```
return session.CreateCriteria(typeof(UserUserGroup))
              .Add(Restrictions.Eq("UserGroupId", _userGroupId))
              .Add(Restrictions.Eq("UserId", _userId))
              .Add(Restrictions.Eq("Deleted", false))
              .List(); 
```

为避免将来出现此类问题，我建议您使用[QueryOver API](http://nhforge.org/blogs/nhibernate/archive/2009/12/17/queryover-in-nh-3-0.aspx)，它在编译时提供类型检查：

```
return session.QueryOver<UserUserGroup>()
              .Where(x => x.UserGroupId == _userGroupId)
              .And(x => x.UserId == _userId)
              .And(x => x.Deleted == false)
              .List(); 
```

# c# - Visual Studio 2010 C# DataReceived 似乎没有触发

> ID：11198528
> 
> 赞同：1
> 
> 时间：2012-06-25T22:52:23.413
> 
> 标签：c#, visual-studio-2010, arduino

Visual Studio 2010 C# 代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace YamanPonics
{
    public partial class Form1 : Form
    {
        string RxString;

        //Default SerialPortStatus equals TRUE when first starting up
        Boolean serialPortDisconnected = true;

        public Form1()
        {
            InitializeComponent();

            //Add available Serial COM ports to combobox
            foreach (string ports in System.IO.Ports.SerialPort.GetPortNames())
            {
                //MessageBox.Show("Serial port avialible" + " " + ports);
                comPortCmbBox.Items.Add(ports);
            }
        }

        private void DisplayText(object sender, EventArgs e)
        {
            serialMsgViewerRchTxt.AppendText(RxString);
            MessageBox.Show("Displayed Serial Text!");
        }

        private void serialPort1_DataReceived (object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {   
            RxString = serialPort1.ReadExisting();
            this.Invoke(new EventHandler(DisplayText));
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            //If SerialPort1 IsOpen
            if (serialPort1.IsOpen)
            {
                //Close SerialPort1 communication
                serialPort1.Close();
            }
        }

        private void connectDisconnectBtn_Click(object sender, EventArgs e)
        {
            //Set arduinoComPort value to COM Port value
            string arduinoComPort = comPortCmbBox.Text;

            //if SerialPortStatus boolean equals FALSE then
            if (serialPortDisconnected &&  (arduinoComPort != ""))
            {

                //Set serialPort1 BaudRate value to default value of 38400(required for atlas-scientific sensors)
                serialPort1.BaudRate = 38400;

                //Set serialPort1 Read and Write timeout values
                serialPort1.ReadTimeout = 250;
                serialPort1.WriteTimeout = 250;

                //Set serialPort1 DataBits value
                serialPort1.DataBits = 8;

                //Open serialPort1 communication
                serialPort1.Open();

                //Change connectDisconnectBtn text to Disconnect
                connectDisconnectBtn.Text = "Disconnect";

                //Set serialPortDisconnected to FALSE
                serialPortDisconnected = false;

            }
            else //if SerialPortStatus bollean equals TRUE
            {
                //Close SerialPort1 communication
                serialPort1.Close();

                //Set connectDisconnectBtn text to Connect
                connectDisconnectBtn.Text = "Connect";

                //Set serialPortDisconnected to TRUE
                serialPortDisconnected = true;
            }
        }

        private void SendBtn_Click(object sender, EventArgs e)
        {
            //if serialPort1 IsOpen then
            if (serialPort1.IsOpen)
            {
                serialPort1.Write("{ph}");
            }
        }
    }
} 
```

该代码是一个简单的串行连接/断开和发送/接收应用程序。连接、断开连接和发送工作正常。当我的 arduino 收到命令时，它会发回响应。我的 2010 C# 应用程序没有收到richtextbox 中的响应，不明白为什么。当我使用另一个串行终端程序时，我可以收到响应，所以我确实知道正在发送数据。我没有做什么才能成功收到回复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:12:44.683

您确定 serialPort1.DataReceived 事件连接正确吗？我看到您有处理程序方法，但我没有看到您订阅该事件。

你需要在某个地方有这个：

```
serialPort1.DataReceived += serialPort1_DataReceived; 
```

# .net - IgnoreRoute 的简写

> ID：11198535
> 
> 赞同：2
> 
> 时间：2012-06-25T22:53:13.997
> 
> 标签：.net, asp.net-mvc

我注意到一个 SO 答案建议[IgnoreRoute 的或分隔匹配](https://stackoverflow.com/a/4682764/284758)，如下所示：

```
routes.IgnoreRoute("*.js|css|swf"); 
```

当我尝试时，它失败了。我不得不将建议的一行代码转换为多行，如下所示：

```
routes.IgnoreRoute("Javascript/{*catchall}");
routes.IgnoreRoute("Content/{*catchall}");
routes.IgnoreRoute("Scripts/{*catchall}"); 
```

实际上有没有更简洁的方式来表达文件的豁免（例如css、javascript等）？另外，我想知道原始链接是否真的是错误的，或者我只是错过了一些东西。

是的，请假设我想要并且需要`routes.RouteExistingFiles = true`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:21:31.430

我想出了一个更简单的方法：

```
routes.RouteExistingFiles = true;
routes.IgnoreRoute("{*relpath}", new { relpath = @"(.*)?\.(css|js|htm|html)" }); 
```

也无需担心尾随的 http 查询字符串，因为 System.Web.Routing.Route 类在评估期间已经剥离了该部分。

有趣的是，Route.GetRouteData(...) 中的代码将采用提供的正则表达式约束，并添加“开始”和“结束”行要求，如下所示：

```
string str = myRegexStatementFromAbove;
string str2 = string.Concat("^(", str, ")$"); 
```

这就是为什么我写的正则表达式如果仅仅写成这样就不起作用的原因：

```
routes.IgnoreRoute("{*relpath}", new { relpath = @"\.(css|js|htm|html)" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:08:40.737

我不确定您是否可以在一行中指定所有这些。另一种方法是您可以创建自定义路由约束并完全忽略这些文件夹/**文件**。

**更新：**

根据**@Brent**的反馈，检查`pathinfo`比比较`folder`.

```
public class IgnoreConstraint : IRouteConstraint
{
    private readonly string[] _ignoreList;

    public IgnoreConstraint(params string[] ignoreList)
    {
        _ignoreList = ignoreList;
    }

    public bool Match(System.Web.HttpContextBase httpContext, Route route, string parameterName, 
    RouteValueDictionary values, RouteDirection routeDirection)
    {
        return _ignoreList.Contains(Path.GetExtension(values["pathinfo"].ToString()));
    }
} 
```

**全球.asax.cs**

```
routes.IgnoreRoute("{*pathInfo}", new { c = 
           new IgnoreConstraint(".js", ".css") });

routes.RouteExistingFiles = true; 
```

==================================================== ===============================

**以前的代码**

```
 public class IgnoreConstraint: IRouteConstraint
  {
    private readonly string[] _ignoreArray;

    public IgnoreConstraint(params string[] ignoreArray)
    {
      _ignoreArray = ignoreArray;
    }

    public bool Match(System.Web.HttpContextBase httpContext, Route route, string parameterName, 
      RouteValueDictionary values, RouteDirection routeDirection)
    {
      var folder = values["folder"].ToString().ToLower();

      return _ignoreArray.Contains(folder);
    }
  } 
```

**在 Global.asax.cs**

```
routes.IgnoreRoute("{folder}/{*pathInfo}", new { c = 
          new IgnoreConstraint("content", "script") });

routes.RouteExistingFiles = true; 
```

# javascript - 以编程方式创建的 Like Button 会泄漏大量内存

> ID：11198536
> 
> 赞同：1
> 
> 时间：2012-06-25T22:53:14.173
> 
> 标签：javascript, facebook

我正在开发一个纯 Javascript 应用程序，需要以编程方式创建 Facebook Like 按钮（RSS 新闻阅读器）。不幸的是，这是不可行的，因为重复创建 Like 按钮会在短时间内泄漏大量内存。

我创建了一个[jsFiddle](http://jsfiddle.net/oliverw/G2qkc/3/)来演示该问题（只需观察 jsFiddle 选项卡的内存消耗不断增加并且永远不会恢复）。任何有关如何防止这种情况发生的建议将不胜感激。

PS：具有讽刺意味的是，Google+ Like 按钮也有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:20:33.553

很确定问题只是您的 1000 毫秒超时不会让垃圾收集器有时间运行。

尝试对此进行分析：http: [//jsfiddle.net/G2qkc/4/](http://jsfiddle.net/G2qkc/4/)

它使每 20 次超时 10 秒。至少在我的机器上，当你给 GC 一个喘息的机会时，内存会被回收。

您的应用程序可能没问题。看来测试有问题。

# java - 从 Perl 脚本调用 Java 方法和类

> ID：11198537
> 
> 赞同：1
> 
> 时间：2012-06-25T22:53:20.013
> 
> 标签：java, perl

我有一个相当大的 Java 类，它有几个导入的包和库（与自然语言处理有关）。我想调用我的 Java 类的一些特定方法并使用 Perl 脚本返回结果。我该怎么做？我猜[Inline::Java](https://www.metacpan.org/module/Inline%3a%3aJava)不适合我的目的，因为 Java 代码非常大，需要在一个地方合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:04:46.770

为什么[Inline::Java](https://www.metacpan.org/module/Inline%3a%3aJava)不适合？您不需要提供对 Java API 的所有位的访问。您可以编写调用 Java 内容的简短方法。一个小的 Java 适配器层可以显示在您的 Perl 代码中，为您提供所需的访问权限。你试过了吗？

这个 Java 代码库有多大？我一直在从事可以轻松集成大型 Java SDK 的项目（尽管我不是那个人）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:29:07.717

我最近也遇到过类似的情况。对我有用的最佳解决方案是使用 apache thrift 服务并通过它公开所需的方法。然后这些方法依次被用 perl 编写的客户端使用。

# ruby-on-rails - Rails 重置单列

> ID：11198538
> 
> 赞同：3
> 
> 时间：2012-06-25T22:53:28.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我正在尝试实现一个 rake 任务，该任务将每月运行一次以重置单个列。我更愿意将该列重置为其默认值，但我找不到任何方法来帮助我完成此操作。reset_column_information 不起作用

重置活动记录中单列的最有效方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T23:25:31.490

基本方法#update_all 直接在数据库中进行更新，因此非常高效。但是它绕过回调，因为模型没有加载：[http ://apidock.com/rails/ActiveRecord/Base/update_all/class](http://apidock.com/rails/ActiveRecord/Base/update_all/class)

```
SomeModel.update_all("some_column = 4");  # sets all some_column attributes to 4 
```

将其重置为默认值取决于您首先如何设置默认值。如果在模型中计算默认值，那么您将不得不选择并实例化所有记录，这可能会非常慢。如果它是在数据库中定义的，也许有可能，但我认为这将是特定于数据库的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T23:31:44.007

如果您是铁杆，您也可以在迁移中删除列，然后重新创建它/它们。有时这会快很多。我不会在关键应用程序中自动执行此操作 - 但如果您正在摆弄自己的本地机器并且只想快速测试东西，这可能会很有效。

# java - 如何更改 JTextArea 中某些单词的颜色？

> ID：11198539
> 
> 赞同：1
> 
> 时间：2012-06-25T22:53:28.467
> 
> 标签：java, swing, jframe, jtextarea

我让自己成为一个小信使只是为了好玩。我想让它当你在那里看到某个单词时，例如你的用户名，它将是蓝色的。

例如，它看起来像这样：

**用户1：**你好，你好吗？
User2：我很好，谢谢，你呢 :)

（粗体 = 蓝色，非粗体 = 黑色）

这是我的客户现在的样子： ![窗户](../Images/69845c5b35f985a7cd0c65963b801a48.png)

无论如何..我希望这些信息足以让您理解我的问题/问题。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T23:00:51.690

恐怕`JTextArea`不能包含 HTML 标签来更改文本颜色。它旨在仅存储纯文本。您可能必须使用`JTextPane`. 官方信息：[http ://docs.oracle.com/javase/tutorial/uiswing/components/text.html](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

# git - 从存储库中恢复已删除的文件

> ID：11198542
> 
> 赞同：20
> 
> 时间：2012-06-25T22:53:36.863
> 
> 标签：git, svn

我正在从 SVN 过渡到 GIT，遇到了一个我找不到答案的问题。当我通过 SVN 处理一些开源项目时，我将描述一个常见的场景。

1.  结帐
2.  开始处理文件，进行更改，以测试项目的工作方式。
3.  在 p.2 之后，一些文件被大量修改，我没有机会恢复到原始状态。
4.  我从磁盘“rm filename.cpp”中删除了修改后的文件，运行命令“svn update”，瞧，所有原始文件都回来了。

所有这些都适用于 GIT，除了第 4 页。我尝试制作“git pull”，它说项目是最新的，即使本地文件夹中缺少原始文件，我也没有得到原始文件。

使用 git 时 p.4 的正确命令是什么。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T23:10:48.227

最简单的方法在输出中指示`git status`：

```
git checkout -- file 
```

其中 file 可以是已删除文件的名称。这将在不影响其他文件的情况下恢复已删除的文件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-25T22:56:23.837

尝试检查当前分支（或`HEAD`）：

```
git checkout HEAD 
```

或者，如果您想将*所有内容*恢复到上次提交的状态（*警告：*这将永久删除所有未提交的更改！），您也可以硬重置：

```
git reset --hard 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-07T16:05:50.363

这就是我要做的：

`git reset HEAD <file-path> git checkout -- <file-path>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-27T21:45:59.093

在这种情况下，Git 很糟糕，我一直在为此苦苦挣扎，以至于难以置信。这是我的做法：

1.  将远程存储库克隆到本地 HD 上与现有本地存储库不同的位置
2.  将已删除的文件/目录从新克隆的 repo 复制到现有的本地 repo
3.  将更改提交到您现有的本地仓库，如果需要也推送到远程仓库
4.  删除新克隆的本地仓库

为什么完成如此简单的任务会如此复杂和耗时，这让我无法理解......

# python - 将 Matlab 代码转换为 Python

> ID：11198545
> 
> 赞同：1
> 
> 时间：2012-06-25T22:53:50.123
> 
> 标签：python, arrays, matlab, numpy

嗨，我正在尝试将以下代码从 Trefethen 在 MATLAB 中的光谱方法转换为 Python。

```
% p6.m - variable coefficient wave equation

% Grid, variable coefficient, and initial data:
  N = 128; h = 2*pi/N; x = h*(1:N); t = 0; dt = h/4;
  c = .2 + sin(x-1).^2;
  v = exp(-100*(x-1).^2); vold = exp(-100*(x-.2*dt-1).^2);

% Time-stepping by leap frog formula:
  tmax = 8; tplot = .15; clf, drawnow, set(gcf,'renderer','zbuffer')
  plotgap = round(tplot/dt); dt = tplot/plotgap;
  nplots = round(tmax/tplot);
  data = [v; zeros(nplots,N)]; tdata = t;
  for i = 1:nplots
    for n = 1:plotgap
      t = t+dt;
      v_hat = fft(v);
      w_hat = 1i*[0:N/2-1 0 -N/2+1:-1] .* v_hat;
      w = real(ifft(w_hat)); 
      vnew = vold - 2*dt*c.*w; vold = v; v = vnew;
    end
    data(i+1,:) = v; tdata = [tdata; t];
  end
  waterfall(x,tdata,data), view(10,70), colormap(1e-6*[1 1 1]);
  axis([0 2*pi 0 tmax 0 5]), ylabel t, zlabel u, grid off 
```

除了这行代码外，大部分情况下进展顺利

```
 data = [v; zeros(nplots,N)] 
```

在阅读了如何在 Numpy 和 Matlab 之间进行转换[http://www.scipy.org/NumPy_for_Matlab_Users#head-e9a492daa18afcd86e84e07cd2824a9b1b651935](http://www.scipy.org/NumPy_for_Matlab_Users#head-e9a492daa18afcd86e84e07cd2824a9b1b651935)我尝试通过执行以下操作来转换它

```
data = np.array(v,zeros(nplots,N)) 
```

但我得到这个错误

```
 data = np.array(v,zeros(nplots,N));
 TypeError: data type not understood 
```

我认为这是因为一个 numpy arrry 具有这种结构

```
 numpy.array(object,dtype=none) 
```

我将不胜感激转换该行的任何帮助。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:09:07.737

`data = [v; zeros(nplots,N)]`这是连接两个矩阵并将它们堆叠起来，请注意`;`在 numpy 中您可以使用`numpy.concatenate((v, zeros((nplots,N))), axis = 0)`where axis 是您想要连接的轴...

```
data = np.array(v,zeros(nplots,N));
TypeError: data type not understood 
```

基本上，当您调用`np.array`第一个参数时，必须是可迭代对象、列表、元组，而**第二个**参数必须是类型，即“int”、“float32”、“float32”等等……但你将类型设置`zeros(nplots,N)` `numpy`为抱怨它不是一个类型... `numpy.zeros`是相同的第一个参数必须是一个元组，第二个是类型，抱歉我没有正确包含`()`

它应该`data = numpy.concatenate((v, numpy.zeros((nplots,N))), axis = 0)` 假设您要使用`double`标准类型的类型。

# jquery - 将 jQuery AJAX 调用转换为函数

> ID：11198546
> 
> 赞同：0
> 
> 时间：2012-06-25T22:53:56.787
> 
> 标签：jquery, ajax

我有一个 jQuery AJAX 调用，我需要多次调用，所以我想把它变成一个函数，但不知道怎么做。这是代码。有任何想法吗？我知道这似乎微不足道，但我环顾四周，不知道如何正确地做到这一点......

```
//This does the ajax call to show the actual creative
    $('#creative').change(function() {
        $.ajax({
            url: '/app/components/MailingsReport.cfc',
            //POST method is used
            type: "POST",
            //pass the data 
            data: {
                method: "getCreativeHTML",
                creativeID: $('#creative').val(),
                datasource: "shopping_cart"
                 },
            dataType: "html",
            //contentType: "application/text; charset=utf-8",
            success: function(response){
                var obj = $.trim(response);
                //alert("response");
                if (obj == '"0 records"') {
                    $('#preview').html("No creative found.");
                }
                else { 
                    $('#htmlCode').val( obj );
                    $('#preview').html( obj );
                }
            }
        })
        //if there was an error, when user clicks into field hightlight-error is removed
        $('#htmlCode').change(function(){
            $('#reloadContent').show();
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:58:19.817

```
function foo(e) {
        $.ajax({
            url: '/app/components/MailingsReport.cfc',
            //POST method is used
            type: "POST",
            //pass the data 
            data: {
                method: "getCreativeHTML",
                creativeID: $('#creative').val(),
                datasource: "shopping_cart"
                 },
            dataType: "html",
            //contentType: "application/text; charset=utf-8",
            success: function(response){
                var obj = $.trim(response);
                //alert("response");
                if (obj == '"0 records"') {
                    $('#preview').html("No creative found.");
                }
                else { 
                    $('#htmlCode').val( obj );
                    $('#preview').html( obj );
                }
            }
        });
} 
```

和电话：

```
$('#creative').change(function(e) { return foo(e); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:07:07.823

```
$.ajax({
     //parameres
    }); 
```

其实就是一个简单的函数调用，

```
$.ajax(parameters); 
```

你可以将它包装在一个函数中，就像任何类似的函数调用一样：

```
add(1,2); 
```

如果您在 AJAX 调用参数中使用了一些变量，例如：myUrl，那么请确保它在您调用该函数的范围内可用。

一个简单的例子：

```
function sendRquest(myUrl){ 
$.ajax({
    url : myUrl,
    //other parameters
    });
} 
```

# computation-theory - 正则语言和证明（计算模型）

> ID：11198547
> 
> 赞同：1
> 
> 时间：2012-06-25T22:53:57.707
> 
> 标签：computation-theory

我需要帮助解决我在计算课程模型中遇到的几个硬件问题。我阅读了文本中的相关章节（Michael Sipser's Introduction to the Theory of Computation），但我觉得这些硬件问题需要这本书没有给我的知识......第一个问题是：

(1) 证明不存在这样的语言 L 使得 L* = {a}* {b}* 提示是使用矛盾。

显然右边是正则表达式；零个或多个 a 后跟零个或多个 b。这也可能是空字符串 epsilon。

我的麻烦来自于 L*。由于语言 L 上的 *，我*完全不知道*应用于语言的 * 是什么，或者如何使用这个等式。

对此问题的任何帮助或资源将不胜感激。

=====

第二个问题比较简单，感觉差不多可以了。我可以为自己辩护，所以我想问题是正式写出来。第二个问题是这样的：

(2) 证明如果 A 和 V 是相同字母表 (sigma) 上的语言并且 A（是 B 的子集），那么 A*（是 B* 的子集）。提示是使用归纳法。

现在显然（例如）如果 sigma = {1, 0}

A = {00, 01, 10, 11}

B = {00, 01, 10, 11, 100, 101, 110, 111}

然后 A* 中的任何内容都在 B* 下关闭，因为 B = A + 其他一些东西......如果有人可以帮助我将其形式化为归纳形式，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:32:16.860

(1) 这是一个有用的递归定义`L*`：

1.  epsilon 在`L*`
2.  如果`x`在`L`,`x`在`L*`
3.  如果`x`并且`y`在 中`L*`，那么`xy`
4.  `L*`是满足 1\. - 3\. 对于给定的最小语言`L`

给定这个定义，这里有一个矛盾的证明：假设`R* = a*b*`. 然后`ab`是在`R*`。由 3.,`abab`也必须在`R*`. 但是`R* != a*b*`，一个矛盾。所以`R* = a*b*`一定是假的；换句话说，因为没有语言`R`是`R* = a*b*`.

直觉很简单：`L*`是所有字符串的语言，可以通过连接零个或多个（允许重复）字符串从`L`. 递归定义的工作原理是允许零个字符串（在 1\. 中）、从`L`（在 2\. 中）恰好取一个字符串的字符串以及通过连接可能来自`L`（在 3\. 中）的许多字符串而形成的字符串。

(2) 使用我上面给出的定义，我们对 中的连接字符串的数量进行归纳处理`A*`。对于 0 连接，空字符串在`A*`and`B*`中，所以我们很好（参见规则 1.）。对于 1 个连接，因为`A`是 的子集`B`，所以 in 的字符串`A`将在`A*`（参见规则 2），并且 stringsfrom`B`将在`B*`（相同的规则），因此所有采用一个连接的字符串`A*`也在`B*`. 现在，假设所有在 in 中进行`k`连接的字符串`A*`也在`B*`. 接受`k+1`串联的字符串`A*`呢？好吧，这些是使用规则 3 形成的。在字符串上并且`x`严格小于`y``A*``k+1`级联，即至多`k`级联。换句话说，任何`A*`采用`k+1`串联的字符串都可以重写为`xy`, where `x`and `y`are in `A*`, and `x`and`y`最多采用`k`串联。由于所有`A*`最多`k`连接的字符串也都在`B*`（根据我们的假设），我们有它`x`并且`y`在 B* 中。根据规则 3.，`xy`也必须在`B*`. 因此，`k+1`串接 in 的字符串`A*`也必须属于`B*`. 这样就完成了证明。

注意：这掩盖了一些细节并且不是很正式，但你应该明白这个想法并希望能够塑造它。如果您需要比这更精致的东西，请告诉我，我可以尝试与您合作。

# asp.net - ASPxGridView - 如果 ColumnResizeMode 设置为 Control 或 NextColumn，则列的宽度不相等

> ID：11198559
> 
> 赞同：0
> 
> 时间：2012-06-25T22:54:57.313
> 
> 标签：asp.net, devexpress

我添加了带有自定义窗口的 ASPxGridView 来隐藏/显示列，以及两个按钮来保存和加载客户端布局，我隐藏一个列并将布局保存到会话变量，之后我从会话重新加载布局并恢复隐藏列，但它的宽度是设置为零。

有什么想法吗？

# c# - 我可以使用动态重定向 HttpContext.Current.Request 吗？

> ID：11198567
> 
> 赞同：0
> 
> 时间：2012-06-25T22:55:41.590
> 
> 标签：c#, dynamic, rhino-mocks

我正在使用 RhinoMocks 进行测试。它不擅长重定向静态；我考虑过使用另一个库，例如 Moles 的继任者（编辑：我猜 Fakes 工具仅在 VS2012 中可用？那很臭）或 TypeMock，但不希望这样做。

我有一个接收 HttpRequest 对象的第三方库。我的第一次尝试是使用：

```
public void GetSamlResponseFromHttpPost(out XmlElement samlResponse, 
  out string relayState, HttpContextBase httpContext = null)
 {
  var wrapper = httpContext ?? new HttpContextWrapper(HttpContext.Current); 
  // signature of the next line cannot be changed
  ServiceProvider.ReceiveSAMLResponseByHTTPPost(
      wrapper.ApplicationInstance.Context.Request, out samlResponse, out relayState); 
```

一切看起来都很好，直到我去测试它。这里真正的问题是我需要存根`wrapper.ApplicationInstance.Context.Request`。这导致了一整套老式的“ASP.NET 不喜欢测试”的痛苦。

我听说你可以`dynamic`在 C# 中使用魔法来重定向静态方法。不过，找不到任何使用 HttpContext 之类的示例。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:11:17.770

不是一个理想的解决方案，但我的测试解决方案是使用反射并修改引擎盖下的对象：

```
httpRequest = new HttpRequest("default.aspx", "http://test.com", null);
var collection = httpRequest.Form;

// inject a value into the Form directly
var propInfo = collection.GetType().GetProperty("IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);
propInfo.SetValue(collection, false, new object[] { });
collection["theFormField"] = val;
propInfo.SetValue(collection, true, new object[] { });

var appInstance = new HttpApplication();
var w = new StringWriter();
httpResponse = new HttpResponse(w);
httpContext = new HttpContext(httpRequest, httpResponse);

// set the http context on the app instance to a new value
var contextField = appInstance.GetType().GetField("_context", BindingFlags.Instance | BindingFlags.NonPublic);
contextField.SetValue(appInstance, httpContext);

Context.Stub(ctx => ctx.ApplicationInstance).Return(appInstance); 
```

我的目标是`wrapper.ApplicationInstance.Context.Request`在被问到时返回表单字段值。它可能是迂回的，但它有效。这段代码只存在于测试代码中，所以我很满意。

# javascript - 无法让 Highchart 显示

> ID：11198568
> 
> 赞同：5
> 
> 时间：2012-06-25T22:55:45.430
> 
> 标签：javascript, ruby-on-rails, highcharts

我对 Javascript、Rails 和 JQuery 都非常陌生。

我正在阅读有关 Highcharts 的本教程 (http://www.highcharts.com/documentation/how-to-use#installation)，并试图显示一个基本图。它没有发生。

在我的 home.html.erb 文件中，我有：

> `<div id="container" style="width: 100%; height: 400px"></div>`

在`app/views/layouts/application.html.erb`我的`head`标签中有这个：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="/public/highcharts.js" type="text/javascript"></script> 
```

这是 /public/highcharts.js 中的代码：

```
var chart1; // globally available
$(document).ready(function() {
      chart1 = new Highcharts.Chart({
         chart: {
            renderTo: 'container',
            type: 'bar'
         },
         title: {
            text: 'Fruit Consumption'
         },
         xAxis: {
            categories: ['Apples', 'Bananas', 'Oranges']
         },
         yAxis: {
            title: {
               text: 'Fruit eaten'
            }
         },
         series: [{
            name: 'Jane',
            data: [1, 0, 4]
         }, {
            name: 'John',
            data: [5, 7, 3]
         }]
      });
   }); 
```

当我加载页面时没有显示任何内容，我不知道为什么。我已经完成了 3 或 4 次教程，并在 Google 上搜索了答案，但无济于事。任何帮助将不胜感激。

编辑：我将脚本标签中的路径从`/public/highcharts.js`更改为`/highcharts.js`. 这在我的控制台调试器中给了我以下错误：

```
Uncaught ReferenceError: Highcharts is not defined highcharts.js:3
(anonymous function) highcharts.js:3
f.Callbacks.n jquery.min.js:2
f.Callbacks.o.fireWith jquery.min.js:2
e.extend.ready jquery.min.js:2
c.addEventListener.B 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T23:40:12.270

正如我们在聊天中讨论的那样，有一些缺失的部分。

*   您需要 Highcharts 库的本地副本
*   您需要引用从正确位置调用库的脚本。

因此，简而言之，您需要在布局中使用它：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script> 
<script src="/javascripts/js/highcharts.js" type="text/javascript"></script> <!--where you put the high charts library -->
<script src="/highcharts.js" type="text/javascript"></script> <!-- your script --> 
```

现在继续前进（假设您正在使用 rails 3.1+），我建议将您的 javascript 移动到更*传统*的位置。在 3.1 中，rails 喜欢在其中看到它，`app/assets/javascripts` 但`public/javascripts`仍然很好，只是不完全*传统*。

通过了解用于插入脚本标签和[Asset Pipeline的](http://guides.rubyonrails.org/asset_pipeline.html)[rails 助手](http://guides.rubyonrails.org/layouts_and_rendering.html#asset-tag-helpers)，您将获得很多帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:20:11.080

问题出在源代码的第一行，即`var charts;` 删除它，您就完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-16T05:47:52.773

Chart 关键字存在问题。请改变喜欢

new Highcharts.Chart({ Chart is with small c

# c++ - c++动态内存分配限制

> ID：11198573
> 
> 赞同：4
> 
> 时间：2012-06-25T22:56:28.080
> 
> 标签：c++, memory, dynamic, limit, allocation

在 C++ 中使用 new 或 malloc 进行动态分配是否有任何类型的限制、系统或其他限制？系统是 64 位的，我想分配一个大约 8 亿个结构的数组。

编辑：我之前没有自己测试它的原因是因为我目前无法访问具有足够内存的机器，所以我觉得在我当前的机器上测试它没有意义。

在运行我自己的测试之后，我可以很好地分配 8 亿个元素，但是一旦我达到 ~8.5 亿，malloc 就会返回 NULL。该结构包含 7 个浮点数，因此总大小约为 22GB。这个看似任意的限制背后的原因是什么？这台机器有 4GB 的内存和 4GB 的虚拟内存，所以我不知道为什么我什至能够分配这么多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:24:32.777

除了尝试运行代码之外，没有其他方法可以告诉您。

“位数”仅表示您所针对的操作系统和体系结构，我还想强调一个事实，即每个支持 C++ 程序的操作系统都有自己的标准 C++ 库的实现（如果您使用的是 std 库）并且作为编码器，您只是使用属于 std 库的标头和命名空间，并且您依赖于操作系统通常随附的 C/C++ 库来实际运行您的代码。

我还建议依靠测试部分，将内存的使用保持在最低限度，有些操作系统也有一些防溢出技术或类似的东西，所以有些操作系统会把你的大量分配视为对系统稳定性的威胁，大量使用 RAM 还涉及到内存控制器的重要作用，就像 X86 架构中的正常情况一样，通常您尝试做的不是一件好事，结果很糟糕，或者最终以真正特定的机器和操作系统作为您的您尝试创建的此应用程序最喜欢的目标。

最后，**您正在尝试编写 C 代码而不是 C++ 代码！**

`malloc()`是来自 C 世界的一个函数，还涉及直接内存管理，如直接分配和取消分配，你的硬件也必须执行很多，我的意思是，**很多**间接的大约 8 亿个结构。

我建议切换到一个真正的 C++ 结构，比如 std 向量（比性能列表更好），或者只是切换到一种具有自己的垃圾收集器并且没有像 C# 或 Java 这样的直接内存管理阶段的语言。

您的问题的答案是否定的，同样从务实的角度来看，您将面临优化代码的一个大问题，而且我可能会说，使用 C++ 或 C# 或 Java 等不同的语言，您的生活会更轻松，但是请记住，垃圾收集器通常需要大量内存，在您的情况下，最好的解决方案可能是 C++，您需要付出一些额外的努力和测试阶段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T23:01:28.547

限制大约是您的可用内存加上允许交换到磁盘的空间。创纪录的 8 亿字节 = 800 Mb，因此您可以在使用小型结构的情况下保持安全，甚至可能不需要交换（应该避免）只需尝试一下，看看它在哪里崩溃 ;-)

64 位：2^64/2^30 = 大约 17* 10⁹ 千兆字节（对于字节可寻址架构，1Gb=2^30 位）所以这里不用担心

32 位：2^32 = 大约 4 GB 所以即使在这里你也可以安全

有符号值除以二，至少在 64 位系统上你还有很多空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T23:19:44.893

对于动态分配，适用与静态分配相同的限制。例如，您只受可用内存量的限制（受指针大小的限制）。32 位和 64 位系统之间的主要区别在于指针的大小，在 32 位系统上，您只能使用 32 位指针，例如可以访问 4294967296 字节 (4GB)。系统保留了其中的一部分，因此最终大约为 2,5 GB。在 64 位系统上，2^64 = 16 exabyte，实际上大约是 256 TB 到 4 PB。远远超过你需要的。如果您没有足够的内存（也没有足够的交换空间），它可能会崩溃。

# php - Google Maps API V3：未显示简单标记集群

> ID：11198574
> 
> 赞同：1
> 
> 时间：2012-06-25T22:56:32.673
> 
> 标签：php, javascript, mongodb, google-maps-api-3, markerclusterer

我正在使用 PHP、MongoDB、Javascript 和 Google Maps API V3 开发基于 Web 的应用程序。

通过使用 json_encode 转换 MongoDB 数组，我能够轻松地在谷歌地图上生成和显示标记。这是带有标记和信息窗口的示例地图。

[标记和信息窗口](https://www.dropbox.com/s/lvsrrdokqcmkt51/InfoWindow.png)

但是，当我尝试实现 Google Maps MarkerClusterer 方法时，标记消失了。我按照 Google Map 的“ [A Simple MarkerClusterer Example](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html "一个简单的 MarkerClusterer 示例") ”作为指南。

我还尝试声明一个全局集群对象，将它传递给一个空数组，

```
var markerCluster = new MarkerClustrer(map, markers); 
```

然后`markerCluster.addMarkers(markers, true);`用作没有运气的替代方法。

它看起来很简单，但不知何故，它没有显示标记。我还尝试注释掉整个 infoWindow/OnClick 事件部分，所以我认为它与此无关。任何帮助是极大的赞赏。

PHP MongoDB 查询：

```
<?php

// Connect to Mongo and set DB and Collection
try
{
    $mongo = new Mongo();
    $db = $mongo->selectDB('twitter');
    $collection = $db->selectCollection('tweets');
}
catch(MongoConnectionException $e)
{
    die("Failed to connect to Twitter Database ". $e->getMessage());
}

// The hotspots array will contain the data that will be returned
$tweets = array();

// Return a cursor of tweets from MongoDB
$cursor = $collection->find();

// Try catch for catching whether there are tweets to display
$count = 0;
try 
{
    $count = $cursor->count();
} 
catch (MongoCursorException $e) 
{
    die(json_encode(array('error'=>'error message:' .$e->getMessage())));
}

// Loops through the cursor again specifically for querying all geo locations
// Unlike table display of tweets, this cursor is not limited by pages. 
foreach($cursor as $id => $value)
{ 
    $mapLocations[] = array
    (
        'id'=>$value['_id'],
        'screen_name'=>$value['screen_name'],
        'name'=>$value['name'],
        'tweet'=>$value['tweet'],
        'hashtags'=>$value['hashtags'],
        'lat'=>$value['geo']['lat'],
        'long'=>$value['geo']['long'],
        'date'=>$value['date'],
        'img'=>$value['img'],
        'specImg'=>$value['specImg']
    );
}
// var_dump($mapLocations);
?> 
```

Javascript函数：

```
function initialize() 
{
    // Converts MongoDB information to JSON, ready for Javascript
    var tweets = <?php echo json_encode($mapLocations); ?>;

    // Sets google maps options
    var myOptions = 
    {
        // Centers on Maui...
        center: new google.maps.LatLng(20.80362, -156.321716),
        zoom: 7,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    // Sets Marker Clusterer Options
    var mcOptions =
    {
        gridSize: 50, maxZoom: 15
    };

    // Generates Google Map and applies the defined options above.
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    // Infowindow for displaying information for onClick event  
    // Content must be inside the google.maps.event function 
    // Otherwise the same content will be entered on all markers    
    var infoWindow = new google.maps.InfoWindow({});

    var markerCluster = null;   // Initializes markerCluster
    var markers = [];           //Array needed to pass to MarkerClusterer

    // Loops through each tweet and draws the marker on the map.    
    for (var i = 0; i < tweets.length; i++)
    {
        var tweet = tweets[i];

        if(tweet.lat != null || tweet.long != null) 
        {
            var myLatLng = new google.maps.LatLng(tweet.lat, tweet.long);
            //document.write(" Latitude: " + tweet.lat + " Longitude: " + tweet.long + " <br> ");
            var marker = new google.maps.Marker({ 
                position: myLatLng,
                //icon: "markers/flag.png",
                //map: map,
            });

            markers.push(marker);

            google.maps.event.addListener(marker, 'click', (function(marker, i) 
            {
                return function() 
                {
                    // Generates a table for infoWindow
                    var content = "<table class='popup'>";

                    // Check if image exits, otherwise show no image icon
                    if(tweets[i].specImg != null) 
                    {
                        content += "<tr><th width=75 ><a href=" + tweets[i].specImg + ">";
                        content += "<img height=75 width=75 src=" + tweets[i].specImg + "></a>";
                    }
                    else
                    {
                        content += "<tr><th width=75><img height=75 width=75 src=images/noimage.jpg>";
                    }
                    // Concatanate screen name and tweet
                    // Will work on trimming information
                    content += "</th><td>" + tweets[i].screen_name + " says...<br>"; 
                    content += "''" + tweets[i].tweet +  "''<br>";
                    content += "on " + tweets[i].date + "</td>";
                    content += "</table>";

                    // Zoom into marker on click
                    map.setZoom(15);
                    map.setCenter(marker.getPosition());

                    // Sets the infoWindow content to the marker
                    infoWindow.setContent(content);
                    infoWindow.open(map, marker);
                }
            })(marker, i)); 
        }
    } 
    var markerCluster = new MarkerClusterer(map, markers);
} 
```

@罗比：

JSONned $mapLocations 变成了一个多维数组，但我将 $mapLocations 简化为仅存储 2D 纬度和经度。javascript源代码如下。

```
var tweets = [{"lat":20.87179594,"long":-156.47718775},{"lat":20.87195633,"long":-156.47714356},{"lat":20.87138419,"long":-156.47719744},{"lat":21.3320704,"long":-157.8685716},{"lat":null,"long":null},{"lat":21.36509415,"long":-157.92824454},{"lat":21.3320825,"long":-157.8684742},{"lat":null,"long":null},{"lat":21.33673131,"long":-157.86824},{"lat":21.332507,"long":-157.86635342},{"lat":null,"long":null},{"lat":null,"long":null},{"lat":null,"long":null},{"lat":37.36520709,"long":-121.92386941},{"lat":37.2499758,"long":-121.86462506},{"lat":37.36278955,"long":-121.90521146},{"lat":null,"long":null},{"lat":37.36278955,"long":-121.90521146},{"lat":null,"long":null},{"lat":null,"long":null},{"lat":null,"long":null},{"lat":null,"long":null},{"lat":null,"long":null},{"lat":null,"long":null},{"lat":20.88944108,"long":-156.4761887},{"lat":37.36273157,"long":-121.90479984},{"lat":20.85102618,"long":-156.65936351},{"lat":20.88949978,"long":-156.4762491},{"lat":null,"long":null},{"lat":21.3320168,"long":-157.8685715},{"lat":null,"long":null},{"lat":null,"long":null},{"lat":null,"long":null}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:33:14.670

终于想通了：

正如我所料，这是一件非常简单的事情。显然您需要从[Google Maps Utility Library](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js)下载 markerclusterer.js 文件。我认为集群器已经内置在 API 本身中。

我通过将脚本下载到服务器并像这样引用它来修复它

```
<script type="text/javascript" src="markerclusterer.js"></script> 
```

无论如何，谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:29:26.133

我觉得可能有几个问题：

1.  每个标记都需要信息窗口，您为所有标记共享一个信息窗口并反复更改其内容。

2.  还要检查您是否落入关闭陷阱。我可以全部重复，但您基本上需要从闭包中创建一个函数。[在http://www.robertbolton.com/blog/google-maps-v3-multiple-markers-and-infowindows-in-a-loop](http://www.robertbolton.com/blog/google-maps-v3-multiple-markers-and-infowindows-in-a-loop)有一个关于如何做到这一点的解释

# ruby - 如何重现 NilClass 的未定义方法错误

> ID：11198579
> 
> 赞同：0
> 
> 时间：2012-06-25T22:57:35.140
> 
> 标签：ruby, null

我想了解如何在 Ruby 1.9 中重现以下错误：

```
NoMethodError (undefined method `[]' for nil:NilClass): 
```

这是我自己的兴趣。以下对我不起作用：

```
a = nil
a[:key] 
```

它产生以下错误：

```
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.[] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:01:26.573

您的代码在我的机器上运行（提交答案，因为我无法格式化评论）：

```
⇨ irb
1.9.3p194 :001 > a = nil
 => nil 
1.9.3p194 :002 > a[:key]
  NoMethodError: undefined method `[]' for nil:NilClass
    from (irb):2
    from /Users/bjc/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

# batch-file - LSF——为可接受的资源类型提供多种选择？

> ID：11198580
> 
> 赞同：0
> 
> 时间：2012-06-25T22:57:57.383
> 
> 标签：batch-file, lsf

我正在使用[LSF](http://en.wikipedia.org/wiki/Platform_LSF)批处理调度工具的集群上运行一些作业。典型的批处理请求如下所示：

```
bsub -q someQueue -R someResourceType /home/user/myProgram 
```

在我使用的集群中，大约有十种不同类型的资源。（换句话说，集群中有十种不同类型的节点。）我正在运行的批处理作业可以接受三种资源类型。因此，我想提出一个请求，上面写着“使用 、 或 中可用的任何资源`resourceType1`类型`resourceType2`” `resourceType3`。

我猜这样的请求看起来像这样：

```
bsub -q someQueue -R {resourceType1 or resourceType2 or resourceType3} /home/user/myProgram 
```

有没有办法在 LSF 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:14:00.387

这是适当的语法：

```
bsub -q someQueue -R "resourceType1|resourceType2|resourceType3" /home/user/myProgram 
```

确保你不要忘记引号！

# sql - 从跨服务器存储过程中返回值

> ID：11198590
> 
> 赞同：1
> 
> 时间：2012-06-25T22:58:36.490
> 
> 标签：sql, tsql, stored-procedures

我在服务器 A 上有一个存储过程。服务器 B 是一个链接服务器，连接很好，权限也很好。服务器 A 上 proc 的最后一行使用 EXEC 调用服务器 B 上的 proc。如果可能的话，我希望能够从服务器 A 上的 proc 返回一个值，该值是服务器 B 上正在调用的 proc 中的返回值。 这可能吗？代码看起来像：

```
proc foo(outputFromB INT OUTPUT)
...
EXEC [someserver].[db].[dbo].[ProcB]
@inputA
@inputB
@outputA 
```

我希望输出 A 的值从 outputFromB 中的 proc foo 返回。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:08:27.390

首先，确保与实参对应的*形*参使用or关键字声明：`ProcB``@outputA``OUT``OUTPUT`

```
CREATE PROCEDURE dbo.ProcB (
  *other parameters*,
  @outputParam *type* **OUTPUT**
)
AS
… 
```

调用过程时，还必须在*实际*参数之后添加相同的关键字，以便实际为其分配新值：

```
proc foo(@outputFromB INT OUTPUT)
...
EXEC [someserver].[db].[dbo].[ProcB]
@inputA
@inputB
**@outputFromB OUTPUT** 
```

您还可以看到`foo`的形参直接在命令调用中使用`ProcB`，如果您不需要在将返回值分配给之前以任何方式处理返回值，这应该是完全可以的`@outputFromB`。

就是这样了。只是不要忘记`OUTPUT`在打电话时提供`foo`。

# php - 匹配全文排除 html , urls

> ID：11198591
> 
> 赞同：-1
> 
> 时间：2012-06-25T22:58:40.403
> 
> 标签：php, regex, full-text-search

我想在 html 代码中匹配所有文本。但只有带有所有标点符号的文本，但没有类似 html 或 url 等。

例子：

```
<div class="description">Boys loving girls</div> 
```

比赛结果：

```
Boys loving girls 
```

* * *

例子：

```
<div class="description">
guys loving girls! 
</div><br /> 
```

比赛结果：

```
guys loving girls! 
```

我的尝试：

```
(?!.*(?:http:\/\/))^[a-z0-9():+,\-.@;\$_\!*\'%\?\säüöß%]+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:00:59.203

请阅读[如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)了解有关解析 HTML 内容的更多信息。

您不应将正则表达式用于此类任务。

* * *

如果您仍然想使用正则表达式，请尝试以下正则表达式模式：

```
$pattern = '/^(?!.*(?:https?|ftp):\/\/)(?:[^>]*>|)\s*([^<]+)(?:<.*|)\s*$/'; 
```

# iphone - 应用始终相对于屏幕的透视

> ID：11198592
> 
> 赞同：2
> 
> 时间：2012-06-25T22:58:59.670
> 
> 标签：iphone, objective-c, transform, perspective, catransform3d

我想问一个关于通过`CATransform3D`. 我知道如果你有一个 320x480 的视图，然后应用这个：

```
 CATransform3D perspective = CATransform3DIdentity;
    CGFloat zDistance = 1000;
    perspective.m34 = 1.0 / -zDistance;  
    view.layer.sublayerTransform = perspective; 
```

您创建了一个透视图，使观察者看起来像是直视屏幕中心，因此相同的转换看起来会有所不同，具体取决于正在转换的子视图在屏幕上的位置。例如，当视图位于屏幕中间时，倾斜视图如下所示：

![](../Images/f1ff62a8cac6e0a0d243de2e964b2577.png)

如果它在左下角，它看起来像这样：

![](../Images/12f79ac26d21efc41f342dc2f8f5ad27.png)

现在，我的问题是，仅当我正在转换的视图是另一个 320x480px 大视图的子视图时，才能使相对于屏幕的透视图起作用。但是，如果我要转换的视图是只有 100x100px 的视图的子视图怎么办？如果超级视图不是屏幕大小，有没有办法使透视相对于整个屏幕？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:03:03.680

根据[苹果](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html)

“anchorPoint 属性是一个 CGPoint，它指定与位置坐标对应的图层边界内的位置。锚点指定边界相对于 position 属性的定位方式，以及用作应用变换的点大约。”

默认情况下，您的视角不应该相对于屏幕的中心，甚至不应该相对于图层的中心，那是您的锚点所在的位置吗？除此之外，您似乎要问的是如何使您的观点看起来与不同的点相关。诀窍是你的视角是通过乘以你的视角矩阵来创建的。将 m34 设置为一个小数字并没有什么神奇的，你乘以你的投影矩阵。

```
YourProjection = {1,0,0             ,0,
                  0,1,0             ,0,
                  0,0,1             ,0,
                  0,0,-1.0/zdistance,1}; 
```

请记住，您可以通过将连续变换相乘来组合它们。只需将您的图层转换到您想要的任何位置，然后应用您的投影矩阵，然后将其转换回来，即刻，从不同的原点透视。

```
float x = your coordinates relative to the screen center;
float y = same thing
TranslationMatrix = {1,0,0,0,
                     0,1,0,0,
                     0,0,1,0,
                     x,y,0,1};
ReverseTranslationMatrix = {1,0,0,0,
                            0,1,0,0,
                            0,0,1,0,
                            -x,-y,0,1};
//now just multiply them all together
Final = ReverseTranslation*YourProjection*Translation; 
```

你需要自己做矩阵数学，希望你已经有一个通用的 4x4 列主矩阵类，可以为你做乘法，如果没有，我建议你做一个。另外，如果您有兴趣，可以考虑阅读。 [这](http://web.iitd.ac.in/~hegde/cad/lecture/L9_persproj.pdf)是为了解释您当前使用的矩阵是如何工作的，或者[这](http://www.songho.ca/opengl/gl_projectionmatrix.html)是为了对投影矩阵进行不同的处理。

# tcl - 为什么在运行我的 Expect 脚本时出现“找不到命令”？

> ID：11198594
> 
> 赞同：2
> 
> 时间：2012-06-25T22:59:27.860
> 
> 标签：tcl, expect

我今天一直在玩 Expect/TCL，我希望有人能告诉我为什么下面的脚本会失败：

```
: command not found  
./expect3: line 3: send: command not found 
```

* * *

```
#!/usr/bin/expect -f

send " we are going to open up a file for reading, ok? \n"
expect "ok"

set fileopen [open "/home/aaron/text.txt" "r"]

set a [read $fileopen]
send "i am expecting to see a string from the file here $fileopen"

close $fileopen 
```

send 和 close 命令都失败了，但我用 spawn 命令编写的其他脚本似乎工作正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:03:17.613

### 问题

主要问题是您没有正确分离命令。TCL 中的命令必须用换行符或分号分隔。

### 解决方案

一般来说，每行应该只有一个 Expect 或 TCL 命令，除非你有一个格式正确的复合语句。例如，这个修改后的代码段将起作用：

```
#!/usr/bin/expect -f

send "We are going to open up a file for reading, ok?\n"
expect "ok" 
```

因为 send 和 expect 命令用换行符分隔。

### 也可以看看

[http://tmml.sourceforge.net/doc/tcl/Tcl.html](http://tmml.sourceforge.net/doc/tcl/Tcl.html)

# javascript - 调整动态生成的 iframe 的大小

> ID：11198597
> 
> 赞同：0
> 
> 时间：2012-06-25T22:59:53.183
> 
> 标签：javascript, jquery, oracle-apex

我有一份由 Oracle Apex（针对 Oracle 数据库运行的 UI 工具）生成的报告。我已对其进行了自定义，以便在每条记录上都有一个超链接，单击该超链接会在当前记录下方的 iframe 中打开详细报告。这一点，我在 html 表格元素上使用了 Javascript insertRow 方法（下面是精简的 Javascript 代码。Oracle APEX 允许使用 JS/Jquery）

```
 var pTable= html_CascadeUpTill(t,'TABLE');
        var myNewRow = pTable.insertRow(pTR.rowIndex+1);
    var myNewCell = myNewRow.insertCell(0);
            myNewCell.innerHTML = '<iframe src="detail report url" height="0"></iframe>'; 
```

为了针对不同的详细记录resize不同的iFrame高度，我在文档中有如下代码).ready(function()页面的

```
 $('iframe').load(function()
            {
                setTimeout(iResize, 1000);
            }
function iResize()
        {
            // Iterate through all iframes in the page.
            for (var i = 0, j = iFrames.length; i < j; i++)
            {
var y=(iFrames[i].contentWindow || iFrames[i].contentDocument);
if (y.document)y=y.document;
var docHt = getDocHeight(y);
if (docHt)  iFrames[i].height = docHt + "px";                    
            }
        }
            ); 
```

如果没有对 iResize 函数的 setTimeout 调用，则不会发生 iframe 调整大小。但是这个 setTimeout 在调整大小的 iframe 中增加了延迟，这是我想避免的。有没有办法做到这一点？我在网上看到的所有相关帖子/文章都处理内置在页面中但不像我的情况那样即时生成的 iframe。

如果您需要更多信息，请与我们联系。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:01:29.557

您应该考虑将详细信息放在 <div> 块中，然后使用 JQuery 显示或隐藏 <div>。您可以使用 CSS 为您的块设置尺寸，或者只是让内容在块内正常流动。听起来是一种更简单的方法来实现相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:52:20.990

问题是，如果您过早执行调整大小，它将在子文档完全呈现之前获得子文档的尺寸，因此需要使用计时器。

如果您的详细报告是您控制的其他 APEX 页面，那么您可以从详细页面的“页面加载时执行”部分调用 iResize 函数：

```
parent.iResize(); 
```

这似乎对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:48:22.000

在我看来，页面首次加载时 iframe 甚至都不存在。

您可以在创建 iframe 的代码中调用 iResize，而不是在页面加载时调用 iResize 函数，然后每隔一秒调用一次。

# magento - 使用 csv 更新 Magento 股票

> ID：11198602
> 
> 赞同：0
> 
> 时间：2012-06-25T23:00:36.167
> 
> 标签：magento, csv, stock

我正在使用以下脚本

[http://www.sonassi.com/knowledge-base/magento-kb/mass-update-stock-levels-in-magento-fast/](http://www.sonassi.com/knowledge-base/magento-kb/mass-update-stock-levels-in-magento-fast/)

它与测试 CSV 文件完美配合。

我的 POS 创建了一个 CSV 文件，但它放置了一个不同的标题，因此脚本不起作用。我想自动化这个过程。有没有办法自动更改标题的名称？

该脚本要求标题是

“sku”、“数量”</p>

我的 CSV 是

“项目”、“库存”</p>

有没有办法在脚本中链接这两个不同的名称，以便我的脚本将 ITEM 视为 sku 并将 STOCK 视为 qty？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:45:40.277

PHP 通常不是进行文件操作的最佳方式，因为您拥有 SSH 访问权限。

您还可以运行以下命令（如果您安装了 perl，这是大多数设置中的默认设置...）：

```
perl -pi -e 's/ITEM/sku/g' /path/to/your/csvfile.csv
perl -pi -e 's/STOCK/qty/g' /path/to/your/csvfile.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:10:40.223

如果您想使用原始 sql 方式更新数量，那么您可以创建如下函数：

```
function _updateStocks($data){
    $connection     = _getConnection('core_write');
    $sku            = $data[0];
    $newQty         = $data[1];
    $productId      = _getIdFromSku($sku);
    $attributeId    = _getAttributeId();

    $sql            = "UPDATE " . _getTableName('cataloginventory_stock_item') . " csi,
                       " . _getTableName('cataloginventory_stock_status') . " css
                       SET
                       csi.qty = ?,
                       csi.is_in_stock = ?,
                       css.qty = ?,
                       css.stock_status = ?
                       WHERE
                       csi.product_id = ?
                       AND csi.product_id = css.product_id";
    $isInStock      = $newQty > 0 ? 1 : 0;
    $stockStatus    = $newQty > 0 ? 1 : 0;
    $connection->query($sql, array($newQty, $isInStock, $newQty, $stockStatus, $productId));
} 
```

并通过将 csv 行数据作为参数传递来调用上述函数。这只是一个提示。

为了获得带有详细信息的完整工作代码，您可以参考以下博客文章：
[在 Magento 中以更简单快捷的方式更新产品数量](http://www.blog.magepsycho.com/updating-product-qty-in-magento-in-an-easier-faster-way/)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:04:33.910

您应该使用 yourfilename.csv 的输入创建一个 php 脚本，该文件是未格式化的文件。

```
 $file = file_get_contents('yourfilename.csv');
 $file = str_replace('ITEM', 'sku', $file);
 $file = str_replace('STOCK', 'qty', $file);
 file_put_contents('yourfilename.csv', $file); 
```

以下链接供您参考。

[使用 PHP http://forums.phpfreaks.com/index.php?topic=327900.0](http://forums.phpfreaks.com/index.php?topic=327900.0)[查找和替换平面文件中的值](https://stackoverflow.com/questions/2944080/find-and-replace-values-in-a-flat-file-using-php)

希望能帮助到你。

干杯

# bash - 使用 Bash 将 Keystroke 注入不同的进程

> ID：11198603
> 
> 赞同：3
> 
> 时间：2012-06-25T23:00:42.663
> 
> 标签：bash, process, inject, keystroke

我有一个无限期运行的进程，直到按下一个键。我想使用 bash 将击键注入此进程以使其终止。基于这篇文章，[linux - 从一个终端写入命令到另一个](https://stackoverflow.com/questions/10376251/linux-write-commands-from-one-terminal-to-another)我尝试使用的终端

```
echo -e "b" > /proc/[pid]/fd/0 
```

（在这种情况下，字母“b”只是任意的）字母“b”将显示在无限期运行的进程的终端中，但它不会像我实际键入时那样触发程序终止“b”进入窗口。

我也看到了对 xdotools 的推荐，但我无法让它工作，并试图远离依赖 GUI 来实现它。

我正在运行 Ubuntu 10.04，我在 bash 方面没有太多经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T00:09:22.490

从[这里](http://www.linuxquestions.org/questions/linux-software-2/how-do-i-stuff-a-keystroke-into-another-virtual-terminals-stdin-839110/)：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/ioctl.h>

int main(void)
    {
    int hTTY = open("/dev/tty1", O_WRONLY|O_NONBLOCK);
    ioctl(hTTY, TIOCSTI, "b");

    close(hTTY);
    return 0;
    } 
```

在此示例中，终端和击键是硬编码的，但可以根据您的需要进行调整。

你可以在 Perl 中做类似的事情：

```
perl -e '$TIOCSTI = 0x5412; $tty = "/dev/pts/1"; $char = "b"; open($fh, ">", $tty); ioctl($fh, $TIOCSTI, $char)' 
```

我必须使用`sudo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:10:31.697

从脚本中杀死进程怎么样

```
killall processname 
```

# c - C - 将字符串拆分为字符串数组

> ID：11198604
> 
> 赞同：35
> 
> 时间：2012-06-25T23:00:42.390
> 
> 标签：c, c-strings

我不完全确定如何在 C 中执行此操作：

```
char* curToken = strtok(string, ";");
//curToken = "ls -l" we will say
//I need a array of strings containing "ls", "-l", and NULL for execvp() 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-25T23:03:21.070

由于您已经研究过，`strtok`只需沿着相同的路径继续并使用空格 ( `' '`) 作为分隔符拆分字符串，然后使用 as`realloc`来增加包含要传递到的元素的数组的大小`execvp`。

请参阅下面的示例，但请记住，这`strtok`将修改传递给它的字符串。如果您不希望发生这种情况，则需要使用`strcpy`或类似功能制作原始字符串的副本。

```
char    str[]= "ls -l";
char ** res  = NULL;
char *  p    = strtok (str, " ");
int n_spaces = 0, i;

/* split string and append tokens to 'res' */

while (p) {
  res = realloc (res, sizeof (char*) * ++n_spaces);

  if (res == NULL)
    exit (-1); /* memory allocation failed */

  res[n_spaces-1] = p;

  p = strtok (NULL, " ");
}

/* realloc one extra element for the last NULL */

res = realloc (res, sizeof (char*) * (n_spaces+1));
res[n_spaces] = 0;

/* print the result */

for (i = 0; i < (n_spaces+1); ++i)
  printf ("res[%d] = %s\n", i, res[i]);

/* free the memory allocated */

free (res); 
```

```
res[0] = ls
res[1] = -l
res[2] = (null) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T23:05:17.817

这是一个从 MSDN 借来[的如何使用 strtok 的示例。](http://msdn.microsoft.com/en-us/library/2c8d19sb%28v=vs.71%29.aspx)

而相关的位，你需要多次调用它。`token`char* 是您将填充到数组中的部分（您可以弄清楚该部分）。

```
char string[] = "A string\tof ,,tokens\nand some  more tokens";
char seps[]   = " ,\t\n";
char *token;

int main( void )
{
    printf( "Tokens:\n" );
    /* Establish string and get the first token: */
    token = strtok( string, seps );
    while( token != NULL )
    {
        /* While there are tokens in "string" */
        printf( " %s\n", token );
        /* Get next token: */
        token = strtok( NULL, seps );
    }
} 
```

# c++ - 如何使用 QCoreApplication::winEventFilter 处理 Windows 消息

> ID：11198607
> 
> 赞同：1
> 
> 时间：2012-06-25T23:00:55.607
> 
> 标签：c++, qt, winapi

我正在尝试使用 QT Creator、QT SDK 和 Windows API 在我的 QT 应用程序中实现 winEventFilter

在我的类文件中声明了以下内容

```
bool winEventFilter( MSG * msg, long * result )
{
    if( msg->message == WM_QUERYENDSESSION)
        DebugLog("shutdown");
    else
        DebugLog("Quit") ;    
} 
```

我通过以下方式调用上述方法

```
MSG * msg;
long * result;

winEventFilter(msg, result); 
```

当我注销或关闭计算机时，它从不打印日志**关闭**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:05:18.780

条件`msg->message == WM_QUERYENDSESSION`永远不会成立，因为您使用未初始化的指针 ( `MSG * msg`) 调用函数。

你需要传递一个有意义的`msg`.

**但是，这不是您想要实现 winEventFilter 的方式。**

`winEventFilter`是`QCoreApplication`您应该通过在`QCoreApplication`子类中重新实现它来使用的方法。然后它会自动为您调用。

有关详细信息，请参阅[http://qt-project.org/doc/qt-4.8/qcoreapplication.html#winEventFilter 。](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#winEventFilter)

# function - 将函数存储在 unix 变量中

> ID：11198622
> 
> 赞同：3
> 
> 时间：2012-06-25T23:02:56.887
> 
> 标签：function, shell, unix

我是unix的新手。我想知道是否有任何方法可以将函数分配给 unix 变量，例如：

```
temp=funcname(){echo 'I am in function'};

$temp; // prints I am in function. 
```

请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T23:09:18.717

函数在 UNIX shell 中不是一流的。但是，您可以将函数的名称存储在 shell 变量中并由此调用它。

```
funcname_foo() {
  echo "I am a function"
}
temp=funcname_foo
"$temp" 
```

也就是说——如果你想有条件地指向一个不同的函数，你可以很容易地有条件地定义它：

```
if [ "$foo" = bar ] ; then
  funcname() { echo "Function A"; }
else
  funcname() { echo "Function B"; }
fi
funcname # actually call the function 
```

可以*通过*使用`eval`;使用来自变量的文本来定义函数。但是，这很[容易出错并且与最佳实践相反](http://mywiki.wooledge.org/BashFAQ/048)，通常不应该这样做。

If you described your actual use case, a better example of the right way to achieve your desired result should be possible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:08:06.597

不。在传统的 *nix shell 中，函数不是一流的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T23:08:10.120

在 bash shell 中使用函数，例如：

```
function manhtm { man -R=ASCII $1 | rman -f HTML > ~/tmp/$1-man.html && firefox ~/tmp/$1-man.html;}

function rff { sudo rfcomm connect $1;} 
```

# sql - Postgresql 中的 JSON 输出

> ID：11198625
> 
> 赞同：10
> 
> 时间：2012-06-25T23:03:03.473
> 
> 标签：sql, json, postgresql

我希望我在这里没有遗漏一些非常明显的东西，
我想从 postgres 函数中获取 JSON 输出（我想许多其他人已经需要这个）并且我很乐意在我的服务器上安装 contrib 函数的扩展，

有没有办法从 sql 或 plpgsql 函数（或在 db-server-side python 的帮助下）获取 JSON 输出？具体来说，我想以`record[]`JSON 格式获得我的结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T23:19:56.657

[从PostgreSQL 9.2](http://www.postgresql.org/docs/9.2/static/functions-json.html)开始就内置了对 JSON 的支持，并且在最近的版本中增加了许多其他功能（例如：[PostgreSQL 0.4 中的 JSON 函数](http://www.postgresql.org/docs/9.4/static/functions-json.html)）。

特别是`row_to_json`将记录转换为 JSON 对象并将`array_to_json`数组转换为 JSON 数组。

例如，可以将这两个函数组合起来，轻松地将`SELECT`查询结果转换为 JSON：

```
SELECT array_to_json(array_agg(row_to_json(t))) FROM 
    (SELECT col1, col2, col3 FROM example_table) t 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T01:55:10.053

使用9.2 中的[record_to_json(...) ，现在可以](http://people.planetpostgresql.org/andrew/index.php?/archives/244-Under-the-wire.html)[反向移植到 9.1](http://people.planetpostgresql.org/andrew/index.php?/archives/255-JSON-for-PG-9.2-...-and-now-for-9.1!.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-18T11:10:22.997

在服务器上安装：
`sudo apt-get install postgresql-plpython-9.4`

然后在您的 Postgres 服务器上：

```
CREATE EXTENSION IF NOT EXISTS plpythonu;
CREATE LANGUAGE plpythonu;

CREATE OR REPLACE FUNCTION prettyprint_json(data text)
 RETURNS json
 AS $$
    import json
    return json.dumps(json.loads(data), indent=4)
 $$ LANGUAGE plpythonu; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T23:41:56.083

[postgresql](/questions/tagged/postgresql "显示标记为“postgresql”的问题") plpython插件当然可以让你使用**python** [json](http://docs.python.org/library/json.html)库来做到这[一点。](http://www.postgresql.org/docs/9.1/static/plpython.html)

 **你可以这样做：

```
CREATE OR REPLACE FUNCTION myschema.tojsonfunc()
AS $$    

   import json;
   jsonStr = json.dumps(myrecord)

$$ LANGUAGE plpythonu; 
```**

# iphone - 将 int 传递给新的 ViewController

> ID：11198626
> 
> 赞同：0
> 
> 时间：2012-06-25T23:03:11.230
> 
> 标签：iphone, objective-c, ios, xcode, int

我花了一个月的时间试图将我的 int 传递给一个新的视图。我的 int 称为 score 并连接到一个名为 scorelab 的标签。用户增加分数，一旦他们用完时间，游戏会将视图切换到游戏结束屏幕，我希望用户分数以标签的形式显示在游戏结束屏幕上。游戏控制器被调用`GamePlayViewController`，被放弃的控制器被调用`GameDidEndViewController`。我厌倦了试图让它发挥作用。我已经查看了所有可能的教程，但似乎对我的情况没有任何帮助。请帮助我，我将非常感激，这是我需要完成的游戏的最后一部分。先感谢您！

对不起，这里是代码：

GamePlayViewController.h

```
#import "GameDidEndViewController.h"

int score;

IBOutlet UILabel *scorelab; 
```

GamePlayViewController.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

if ([[segue identifier] isEqualToString:@"GameOver"])
{

    GameDidEndViewController *vc = [segue destinationViewController];

    [vc setscore2: score];
}
} 
```

GameDidEndViewController.h

```
#import "GamePlayViewController.h"
IBOutlet UILabel *scorelab2;
int score2;
}
@property (nonatomic , assign) int score2;
@property (nonatomic , assign) UILabel *scorelab2; 
```

GameDidEndViewController.m

```
@synthesize score2 , scorelab2;
-(void)viewWillAppear:(BOOL)animated {
scorelab2.text = [NSString stringWithFormat: @"%d", score2];
[super viewWillAppear: animated];  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T23:10:35.783

你要做的是创建一个属性`GameDidEndViewController`来保存传入的`score`值。

```
@interface GameDidEndViewController : UIViewController {

....
}
@property(nonatomic,assign) int score;
@end 
```

确保您`@synthesize score`在`@implementation`(.m) 中。

现在，当您初始化并显示`GameDidEndViewController`您设置的分数时，可能是这样的。

```
GameDidEndViewController *end = .....// init the view.
end.score = score; // assuming you're doing this from GamePlayViewController where it has an int named `score` 
```

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T02:12:37.043

`ViewControllers`这是一些在using之间传递数据的教程`Storyboard`：

1.  [Storyboards Segue 教程：在视图控制器之间传递数据](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)
2.  [如何在两个视图控制器之间传递数据的教程](http://klanguedoc.hubpages.com/hub/IOS-5-Tutorial-on-How-To-Pass-Data-Between-Two-View-Controllers)

或使用这样的东西：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:...]) {
        MyViewController *controller = (MyViewController *)segue.destinationViewController;
        controller.score = score;
    }
} 
```

希望这可以帮助。

# ruby-on-rails - 在 ruby 中重新加载对象

> ID：11198629
> 
> 赞同：0
> 
> 时间：2012-06-25T23:03:17.213
> 
> 标签：ruby-on-rails, object

我有一个带有 has_many 关联汽车的模型样本。

```
x = Sample.new
x.car 
```

它从数据库加载关联。

但是，每当我执行 x.car 时，它都不会调用数据库。我想在第一次调用后调用数据库。

我现在正在做的是重新启动解释器！

有谁能够帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:13:36.177

做就是了：

```
x.car.reload 
```

该关联将从您的数据库中重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:54:55.240

当使用解析为 的参数调用关联时，将重新加载关联对象`true`。

```
a.car(true) 
```

# django - Django内联表单集错误

> ID：11198638
> 
> 赞同：1
> 
> 时间：2012-06-25T23:04:18.330
> 
> 标签：django, django-forms, inline-formset

我正在尝试将内联表单集添加到表单中。这是重现错误的最少代码：

模型.py

```
class Festival(Model):
    desc = TextField(max_length=1000)

class FestivalAddress(Model):
    festival = ForeignKey(Festival, related_name="addresses")
    name = CharField(max_length="50") 
```

网址.py

```
urlpatterns = patterns('',
    url('^add/$', FestivalCreateView.as_view(), name='festival_add'), 
) 
```

视图.py

```
class FestivalCreateView(CreateView):
    model = Festival
    form_class = FestivalForm

    #Add FestivalAddressFormset to context here 
```

表格.py

```
class FestivalAddressForm(ModelForm):
    class Meta:
        model = FestivalAddress

class FestivalForm(ModelForm):
    class Meta:
        model = Festival

FestivalAddressFormSet = inlineformset_factory(FestivalForm, FestivalAddress, form=FestivalAddressForm, extra=2) 
```

这会引发 AttributeError：“ModelFormOptions”对象没有属性“get_parent_list”。我有点难过，因为我正在遵循[SO 上](https://stackoverflow.com/questions/4497684/django-class-based-views-with-inline-model-form-or-formset)给出的解决方案。

**编辑**：我删除了 FestivalCreateView 对表单集的使用，因为无论有没有它都会发生错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T23:55:16.620

看起来我对 inlineformset_factory 的调用不正确。根据[文档](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)，第一个参数应该是模型，而不是表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:37:42.900

本来应该： `FestivalAddressFormSet = inlineformset_factory(Festival, FestivalAddress, form=FestivalAddressForm, extra=2)`

# appfabric - AppFabric 集群

> ID：11198639
> 
> 赞同：0
> 
> 时间：2012-06-25T23:04:20.657
> 
> 标签：appfabric

我在负载平衡环境中遇到 AppFabric 问题。出于某种原因，当我启动 AppFabric 集群时，我没有看到在端口 (22233) 上侦听任何内容。下面是我们的配置文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <configSections>
        <section name="dataCache" type="Microsoft.ApplicationServer.Caching.DataCacheSection, Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </configSections>
    <dataCache size="Small">
        <hosts>
             <host replicationPort="22236" arbitrationPort="22235" clusterPort="22234"
            hostId="2035002654" size="4095" leadHost="true" account="ServiceAccount"
            cacheHostName="AppFabricCachingService" name="Server2"
            cachePort="22233" />
            <host replicationPort="22236" arbitrationPort="22235" clusterPort="22234"
            hostId="434992406" size="4095" leadHost="true" account="ServiceAccount"
            cacheHostName="AppFabricCachingService" name="Server1"
            cachePort="22233" />
        </hosts>
    </dataCache>
</configuration> 
```

如果我更改配置以使其中一个服务器成为leadHost，则该主机现在侦听端口 22233。但为了保持高可用性，我需要同时启动和运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:50:20.583

据我对 AppFabric 的了解，您必须将服务器配置为引导主机。此外，缓存集群中必须只有 1 个leadhost。

如果我错了，请告诉我。

感谢和问候 Gagan Janjua

# xcode - 雪豹的 Xcode：从哪里获得

> ID：11198641
> 
> 赞同：6
> 
> 时间：2012-06-25T23:04:39.733
> 
> 标签：xcode, macos, osx-snow-leopard

我有一台装有 Snow Leopard (10.6.7) 的 Apple 笔记本电脑，我需要一个带有最新 SDK 版本的 Xcode。然而，去苹果公司，我只能找到适用于最新 Mac OS X 的 Xcode 4.3。

是否有可能找到适用于我的 Mac OS X 版本的 Xcode 版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T23:05:41.620

访问[Apple 的 Xcode 页面](https://developer.apple.com/xcode/)。

单击“查看下载”并*登录后*，您应该可以访问以前版本的 Xcode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T07:58:30.930

如果您向 Apple 支付[iOS 开发者访问](https://developer.apple.com/programs/ios/)年费，您可以[直接从 Apple 下载适用于 Snow Leopard 的 Xcode 4.2（和 iOS SDK 5）](https://download.developer.apple.com/Developer_Tools/xcode_4.2_for_snow_leopard/xcode_4.2_for_snow_leopard.dmg)。否则，您可以下载它，或者通过[免费注册](https://developer.apple.com/programs/register/)，直接从 Apple 下载适用于 Snow Leopard 的旧版[Xcode 3.2.6（和 iOS SDK 4.3）](http://adcdownload.apple.com/Developer_Tools/xcode_3.2.6_and_ios_sdk_4.3__final/xcode_3.2.6_and_ios_sdk_4.3.dmg)。

来源：http: [//iphonesdkdev.blogspot.com/2010/04/old-versions-of-iphone-sdk.html](http://iphonesdkdev.blogspot.com/2010/04/old-versions-of-iphone-sdk.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-11T20:35:43.080

截至 2018 年 7 月，上述建议均无效，但以下链接（需要开发人员访问权限）应该可以解决 OS X 10.6.8（使用软件更新中的 v1.1 更新程序）：[https://download.developer。 apple.com/Developer_Tools/xcode_3.2.2_developer_tools_beta_20728/xcode322_2148_developerdvd.dmg](https://download.developer.apple.com/Developer_Tools/xcode_3.2.2_developer_tools_beta_20728/xcode322_2148_developerdvd.dmg)

# c# - 实体框架不适用于 Nullable 列

> ID：11198649
> 
> 赞同：1
> 
> 时间：2012-06-25T23:05:36.397
> 
> 标签：c#, database, entity-framework

我有实体框架的问题。

我有一个`Victor`包含 3 个可空列的表。向导完成后，我看不到方法内的可为空列`CreateVictor()`，此方法是由向导而不是我自动生成的。

4小时后，我找不到任何解决方案。这仅适用于可为空的列。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T23:20:22.147

这是一个“功能”而不是一个错误。这个想法是只需要非空列来创建“维克多”。因此它们是 CreateVictor() 方法中包含的唯一列。

如果要设置其他属性，可以使用 CreateVictor() 返回的对象来执行此操作。

```
var victor = Victor.CreateVictor(...);
victor.Name = "name"; 
```

# c# - ClosedXml 中的“无法将主题颜色转换为颜色”

> ID：11198653
> 
> 赞同：1
> 
> 时间：2012-06-25T23:05:56.170
> 
> 标签：c#, .net, excel, closedxml

我正在尝试使用 ClosedXml 读取 Excel 中单元格的填充背景颜色。我正在使用[此示例代码](http://closedxml.codeplex.com/wikipage?title=Finding%20and%20extracting%20the%20data&referringTitle=Documentation)，并且能够毫无问题地读取 Excel 文档的内容，但无法将单元格的*Fill* *BackgroundColor*读取为十六进制值。我能够看到在*BackgroundColor下定义的**ThemeColor*和*ThemeTint*属性，但还没有找到将它们转换为*System.Color*或十六进制值的方法。这是我的代码：

 **```
// Get all categories
while (!categoryRow.Cell(coCategoryId).IsEmpty())
{
    IXLCell categoryName = categoryRow.Cell(coCategoryName);
    categories.Add(categoryName.GetString() + " " + XLColor.FromTheme(categoryName.Style.Fill.BackgroundColor.ThemeColor, categoryName.Style.Fill.BackgroundColor.ThemeTint).Color.ToHex());
    categoryRow = categoryRow.RowBelow();
} 
```

似乎*XLColor.FromTheme*方法总是抛出异常“无法将主题颜色转换为颜色”。有谁知道从*ThemeColor*和*ThemeTint值中获取**System.Color*的另一种方法？

 **更新：

我没有提到我已经尝试过使用*BackgroundColor的**Color*属性，不幸的是它没有正确填充，如果你在调试器中查看它，你会看到这个属性抛出了与方法*XLColor 相同的异常。来自主题*。所以这绝对看起来像 ClosedXml 中的一个错误。有谁知道解决方法？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:05:56.830

如果需要，我认为您需要评估`ColorType`属性和工作簿的主题。比如像这样：

```
Private Function CellColor(ByVal cell As IXLCell, ByVal wb As XLWorkbook) As Drawing.Color

    Select Case cell.Style.Fill.BackgroundColor.ColorType
        Case XLColorType.Color
            Return cell.Style.Fill.BackgroundColor.Color

        Case XLColorType.Theme
            Select Case cell.Style.Fill.BackgroundColor.ThemeColor
                Case XLThemeColor.Accent1
                    Return wb.Theme.Accent1.Color
                Case XLThemeColor.Accent2
                    Return wb.Theme.Accent2.Color
                ...
            End Select
    End Select 
```

正如 BruceHill 指出的那样，这*忽略了 tinting/shading*。ClosedXML 似乎不支持这一点，因此必须手动计算。Office 使用的算法可以在这里找到：[http](http://social.msdn.microsoft.com/Forums/en-HK/oxmlsdk/thread/f6d26f2c-114f-4a0d-8bca-a27442aec4d0) ://social.msdn.microsoft.com/Forums/en-HK/oxmlsdk/thread/f6d26f2c-114f-4a0d-8bca-a27442aec4d0 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:54:01.513

主题颜色只是枚举值（如`Background1`，`Text1`等），以获取您需要从主题中获取的实际值。所以在工作簿中寻找一些“主题”属性，实际的主题颜色很可能是在哪里定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:33:44.340

我发现[这篇文章](http://ciintelligence.blogspot.com/2012/02/converting-excel-theme-color-and-tint.html)非常有用，并且运行良好。：

刚刚在“RgbToHls”函数中发现了一个小错误，在最小值和最大值相等的情况下没有设置 alpha 值：

```
if (max == min)
        {

            hlsColor.H = 0;

            hlsColor.S = 0;

            hlsColor.L = max;

           --> **hlsColor.L = a;**
            return hlsColor;

        } 
```******

# javascript - 解析显示未定义错误的 json

> ID：11198660
> 
> 赞同：0
> 
> 时间：2012-06-25T23:07:10.210
> 
> 标签：javascript, json

我正在解析 json 以获取数据，但它显示未定义的错误。我正在使用以下代码。

JSON数据：-

```
 [{"id":"1","name":"vikash","email":"vikash@yahoo.com","phone":"98744254114"},false] 
```

javascript:-

```
function getid(id) {
    //document.getElementById('pid').value=id;
    $.ajax({
        url: "page.php?id=" + id,
        success: function(result) {
            alert(result);
            var a = console.log(result.name);
            alert(a);

        }
    });
}​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T23:09:42.893

改变：

```
var a = result.name; 
```

至：

```
var a = result[0].name; 
```

* * *

[http://jsfiddle.net/GYr8Q/](http://jsfiddle.net/GYr8Q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:10:12.193

结果是一个数组，要获取名称使用`result[0].name`

编辑

正如 Felix King 建议的那样，json 可能不会被解析，如果你在`dataType:'json'`你的 ajax 调用中添加一个它应该被解析。

```
function getid(id) {
    //document.getElementById('pid').value=id;
    $.ajax({
        url: "page.php?id=" + id,
        dataTpe: 'json',
        success: function(result) {
            alert(result);
            var a = console.log(result[0].name);
            alert(a);

        }
    });
} 
```

# visual-studio-2010 - 与 TFS 一起使用的 Visual Studio 文件查看器

> ID：11198676
> 
> 赞同：0
> 
> 时间：2012-06-25T23:09:06.903
> 
> 标签：visual-studio-2010, visual-studio, tfs

我们正在开发一个新的 Web 项目，它只是松散的 html/css/js 文件（不是 asp 站点）。我们希望能够在 Visual Studio 中编辑文件，但不必拥有项目/解决方案文件。理想情况下，我们应该有一个文件系统查看器/文件夹查看器窗格，而不是传统的解决方案资源管理器，当我们打开一个文件并开始编辑它时，它会自动检出文件。

是否有扩展或其他东西可以轻松地为我们提供此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:16:42.740

您可以在 View Menu -> Other Window -> Source Control Explorer 下关闭 Source Control Explorer。

然后双击 html/css/js 文件，VS 将使用它的默认编辑器打开它。

# java - Java中的ProcessBuilder环境变量

> ID：11198678
> 
> 赞同：17
> 
> 时间：2012-06-25T23:09:09.110
> 
> 标签：java, unix, processbuilder

我正在尝试为 ProcessBuilder 对象添加环境变量，但是当我在 ProcessBuilder 中调用该新变量时出现错误。这就是我构建流程的方式

```
public class OTU
{
    public static void main(String[] args) throws Exception
    {
        ProcessBuilder pb = new ProcessBuilder();
        Map<String, String> env = pb.environment();
        //set environment variable u
        env.put("u", "util/");

        pb.command("echo $u");
        Process p = pb.start();
        String output = loadStream(p.getInputStream());
        String error  = loadStream(p.getErrorStream());
        int rc = p.waitFor();
        System.out.println("Process ended with rc=" + rc);
        System.out.println("\nStandard Output:\n");
        System.out.println(output);
        System.out.println("\nStandard Error:\n");
        System.out.println(error);
    }

    private static String loadStream(InputStream s) throws Exception
    {
        BufferedReader br = new BufferedReader(new InputStreamReader(s));
        StringBuilder sb = new StringBuilder();
        String line;
        while((line=br.readLine()) != null)
            sb.append(line).append("\n");
        return sb.toString();
    }
} 
```

我得到错误

```
Exception in thread "main" java.io.IOException: Cannot run program "$u": java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at ca.utoronto.siseq_1_2.OTU.main(OTU.java:22)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    ... 1 more 
```

如果我只是为此进程设置变量，我不明白为什么会出现错误。请帮助我如何设置环境变量，以便我可以在 ProcessBuilder 中使用它。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T02:17:39.990

Alfredo O 的示例为您提供了正确的想法。您需要告诉 ProcessBuilder 使用什么程序来执行您的命令。在这种情况下[，bash 带有“-c”开关](http://linux.die.net/man/1/bash)，它告诉 bash 将接下来的内容（即“echo $u”）解释为命令。

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Map;

public class OTU {
    public static void main(String[] args) throws Exception {
        ProcessBuilder pb = new ProcessBuilder("/bin/bash", "-c", "echo $u");
        Map<String, String> env = pb.environment();
        // set environment variable u
        env.put("u", "util/");

        Process p = pb.start();
        String output = loadStream(p.getInputStream());
        String error = loadStream(p.getErrorStream());
        int rc = p.waitFor();
        System.out.println("Process ended with rc=" + rc);
        System.out.println("\nStandard Output:\n");
        System.out.println(output);
        System.out.println("\nStandard Error:\n");
        System.out.println(error);
    }

    private static String loadStream(InputStream s) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(s));
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null)
            sb.append(line).append("\n");
        return sb.toString();
    }
} 
```

这会产生以下输出：

```
Process ended with rc=0

Standard Output:

util/

Standard Error: 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T23:28:45.440

这在 Windows 中对我有用：

```
@Test
public void testProcessBuilder() throws IOException {
    ProcessBuilder processBuilder = new ProcessBuilder("cmd.exe", "/C", "echo Hello %name%");
    Map<String, String> environment = processBuilder.environment();
    environment.put("name", "Alfredo Osorio");
    Process p = processBuilder.start();
    String line;
    BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
    while ((line = r.readLine()) != null) {
        System.out.println(line);
    }
    r.close();
} 
```

**输出：**

你好阿尔弗雷多·奥索里奥

正如您在 Windows 中看到的，您使用 %environmentVariable% 而不是 $environementVariable

# php - PHP - 如何实现不注销复选框？

> ID：11198684
> 
> 赞同：0
> 
> 时间：2012-06-25T23:09:51.760
> 
> 标签：php, http, session, session-cookies

我想在登录屏幕上有复选框，当用户选中该复选框并登录时，他一直保持登录状态。但是在 php.ini 中的 php 中是 session.gc_lifetime 指令，它是针对整个 session.save_path 目录的，所以如果例如 sessoion.gc_lifetime 设置为 1440 秒，用户选中该复选框，登录，关闭计算机 2 小时，然后打开计算机并访问我的站点，他将注销，导致 php 垃圾收集器知道该会话文件的最后访问时间和原因 (最后访问时间 + session.gc_maxlifetime ) <时间，gc 删除该会话文件。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:24:35.290

会话更多地被设计为临时......当浏览器关闭或经过很短的时间时。如果您想让用户永远保持登录状态，您应该使用带有 long expire 参数的[setcookie 。](http://us3.php.net/manual/en/function.setcookie.php)

```
setcookie( "TestCookie", $value, time()+3600*24*365 ); //3600*24*365 = 1 year 
```

此 cookie 将存在一年

# css - 网站在 IE 中左对齐，在 FF 中很好

> ID：11198700
> 
> 赞同：-1
> 
> 时间：2012-06-25T23:11:13.843
> 
> 标签：css

[http://www.christywhiteheadphotography.com/PIxelStixStudio/](http://www.christywhiteheadphotography.com/PIxelStixStudio/)

我的假设是它与：

> .col-full { 宽度：960px; 边距：0 自动；}

没有被 IE 使用，但我真的不确定。

任何帮助表示赞赏，

谢谢，肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:25:31.100

`overflow:hidden`如果元素上没有设置宽度/高度，则IE 不会自动应用。在您的情况下，滑块的宽度破坏了页面的布局。尝试像这样向幻灯片容器添加宽度：

```
.slides_container { width: 890px; } 
```

# ruby-on-rails-3 - Rails 和 Active Record 中的分组、总计

> ID：11198704
> 
> 赞同：1
> 
> 时间：2012-06-25T23:11:38.997
> 
> 标签：ruby-on-rails-3, activerecord, normalization

我正在尝试对 Active Record 中的一系列记录进行分组，以便我可以进行一些计算来规范化每条记录的数量属性，例如：

用户输入日期和数量。日期不是唯一的，所以每个日期我可能有 10 - 20 个数量。我只需要处理每天的总数，而不是每条记录。因为然后，在确定了最高和最低值之后，我基本上通过除以`n`通常为 10 来转换每个值。

这就是我现在正在做的事情：

```
def heat_map(project, word_count, n_div)
    return "freezing" if word_count == 0
    words = project.words
    counts = words.map(&:quantity)
    max = counts.max
    min = counts.min
    return "max" if word_count == max
    return "min" if word_count == min
    break_point = (max - min).to_f/n_div.to_f
    heat_index = (((word_count - min).to_f)/break_point).to_i  
end 
```

如果我显示所有字数的表格，这非常有用，但我试图将热图应用到显示每天运行总数的日历。这显然不包括天数，所以我最终得到的数字超出了正常范围。

在我进行规范化之前，我想不出一种方法来对字数进行分组并按天计算它们。我尝试做一个 group_by 然后添加 map 调用，但我得到一个未定义方法错误的错误。有任何想法吗？我也愿意接受更好/更清洁的字数标准化方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:07:06.197

在不了解您的模型的情况下很难回答。所以我将假设您感兴趣的日期只是表格`created_at`中的日期。`words`我假设您的`words`表中有一个字段，称为`word`存储实际单词的位置。

我还假设您在一天内可能有多个相同单词的条目（可能具有不同的数量）。

因此，这将为您提供每天单词计数的有序散列：

```
project.words.group('DATE(created_at)').group('word').sum('quantity') 
```

如果这些猜测没有意义，那么也许您可以提供有关模型结构的更多细节。

# java - 每 n 秒检索一次 Android 电池指标 [高效]

> ID：11198705
> 
> 赞同：4
> 
> 时间：2012-06-25T23:11:50.967
> 
> 标签：java, android

我找到了许多用于监控电池电量的来源，但没有一个描述如何以固定的时间间隔检查它。假设我想每 n 秒检查一次电池。最有效的方法是什么？

目前，我创建了一个 BroadcastReceiver 并使用过滤器将其注册到我的服务中。然后我使用 ScheduledExecutor 从电池中“获取”信息。如果我正确理解发生了什么，我制作的 BroadcastReceiver 会从电池接收所有广播，而不是在它们进入时以动态速率接收所有广播，而不是我想要检查的恒定速率。

看来，当我创建广播接收器时，它会收到一条带有当前信息的“初始”消息。每隔一段时间创建一个接收器对象，接收这个初始消息，然后每次我想检查它时销毁它会更有效吗？或者，有没有我没有想过的不同方式？

如果有人感兴趣，我用于监控电池的来源：

*   [http://developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)
*   [http://developer.android.com/reference/android/os/BatteryManager.html](http://developer.android.com/reference/android/os/BatteryManager.html)
*   [SDK 中的 Android 电池](https://stackoverflow.com/questions/1805895/android-battery-in-sdk)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:31:30.803

> 假设我想每 n 秒检查一次电池。最有效的方法是什么？

除非`n`以数百或数千秒为单位进行测量，否则您很可能是电池寿命的第一消费者。鉴于您的评论，我会假设您的意思是“每 n 分钟”。

第 1 步：设置`AlarmManager`时间表以调用`IntentService`每`n`分钟一次（最好不要使用`_WAKEUP`警报类型）。

第 2 步：在 中，用 a和 an`IntentService`调用。返回值将是此事件的最后一次广播。`registerReceiver()``null` `BroadcastReceiver``IntentFilter``ACTION_BATTERY_CHANGED``Intent`

步骤#3：对数据做一些事情。

# php - 为什么 IMAGETYPE_JPEG 不接受所有 JPEG？

> ID：11198706
> 
> 赞同：1
> 
> 时间：2012-06-25T23:11:56.317
> 
> 标签：php

我对为什么这段代码说 JPEG 文件和 PNG 文件无效感到困惑。我希望这段代码只接受 JPEG 和 PNG，并拒绝所有其他文件类型，但现在，它拒绝一切。

```
<?

echo '
    <form method="post" action="upload.php">
        <input type="text" placeholder="url" name="url" /> <input type="submit" value="check" name="submit" />
    </form>
';

if (isset($_POST["submit"])) {

$url = $_POST["url"];

echo '<strong>URL:</strong> ' . $url;
echo '<br /><br />';

if(!filter_var($url, FILTER_VALIDATE_URL)) { //not valid f-in url
  echo('Invalid url given'); 

} else {
    if (exif_imagetype($url) != IMAGETYPE_JPEG || exif_imagetype($url) != IMAGETYPE_PNG) {
        echo 'Invalid Image<br />';
    } else {
        echo "Works.";
    }
}

}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:15:16.887

你的陈述逻辑是倒退的。这基本上就是您正在编写的内容：

```
$image_type = exif_imagetype($url);
if ($image_type != IMAGETYPE_JPEG || $image_type != IMAGETYPE_PNG) {
    echo 'Invalid Image<br />';
} else {
    echo "Works.";
} 
```

这意味着“如果图像类型不是 JPEG 或 PNG，则它是无效的”。相反，你想要：

```
if( $image_type == IMAGETYPE_JPEG || $image_type == IMAGETYPE_PNG) {
    echo "Works.";
} else {
    echo "Invalid Image<br />";
} 
```

这是“如果图像类型是 JPEG 或 PNG，它是有效的”，或者：

```
if ($image_type != IMAGETYPE_JPEG && $image_type != IMAGETYPE_PNG) {
    echo 'Invalid Image<br />';
} else {
    echo "Works.";
} 
```

“如果图像不是 JPEG 并且不是 PNG，则它是无效的”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T23:14:25.597

这些条件应该是 ANDed：

```
if (exif_imagetype($url) != IMAGETYPE_JPEG && exif_imagetype($url) != IMAGETYPE_PNG)
    /* invalid image */ 
```

读成一句话：如果*不是*JPEG*也不是PNG* *，*则无效。

 *此外，将 EXIF 结果存储在它自己的变量中，并将其用于比较，而不是调用该方法两次：

```
$itype = exif_imagetype($url);

if ($itype != IMAGETYPE_JPEG && $itype != IMAGETYPE_PNG)
    /* invalid image */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T23:15:32.850

`!=`表示不相等。删除它并使用`==`.*

# objective-c - 两个视图控制器（带有 nib）同时作用在屏幕上

> ID：11198710
> 
> 赞同：0
> 
> 时间：2012-06-25T23:12:28.433
> 
> 标签：objective-c, xcode, delegates, viewcontroller

作为免责声明，我是一名 iOS 初学者，处于一个非常独特的位置。我是一名实习生，在工作中学习，测试应用程序的截止日期很严格，具有特定的规格。因此，不幸的是，我没有足够的时间学习有关 xCode 和 Objective C 的所有知识。

无论如何，我正在尝试创建一个类似于 iPad 滑出菜单的导航菜单。我已经查看了过去针对此类问题给出的大量示例代码。这一切都很好，但我无法理解他们在做什么。我认为这是因为被视图控制器和委托相当困惑。而且，由于我应该自己编写这一切，我不能仅仅建立在他们现有的代码之上。

我对这项工作的计划是拥有一个主视图控制器，在表格视图中包含导航菜单。这隐藏在普通 UIView 后面，直到按下按钮，此时普通 UIView 滑出屏幕足以显示菜单。选择菜单项后，正常的 UIView 将滑回其原始位置，并被相关的 UIView 替换，由其视图控制器控制。换句话说，单击与“Home”相关的菜单项将加载由 homeViewController 控制的 homeViewController.xib。这将加载到 tableView 顶部的普通 UIView 子视图中。

由于按下按钮，我可以在正常的 UIView 中加载视图。

```
homeViewController *_homeViewController = [[homeViewController alloc]initWithNibName:@"homeViewController"];
[self frontView] = _homeViewController.view; 
```

该代码中可能存在一些语法错误，因为它来自内存。我目前无法访问带有我的代码的计算机，但这是一般要点。基本上，这会将主视图笔尖放在 frontView 上（即位于表视图上方的普通 UIView），但它没有连接到 homeViewController。或者至少我认为这是问题所在，当我按下一个按钮时，在 nib 和 homeViewController.h 之间正确连接，并且仅在 .m 文件中设置为 NSLog，应用程序崩溃。

知道以这种方式显示时如何将此笔尖连接到它的 viewController 吗？或者，在 IB 中创建 nib，不使用关联的 .h 和 .m 文件，并将主视图控制器也用作 homeViewController？或者，如果我的逻辑本身就有缺陷，我应该怎么做？NavigationControllers 的东西？

编辑：我还尝试了一种新方法——将 homeViewController 的文件所有者更改为 viewController，并将 homeViewController 操作上的按钮连接到 viewController。这也导致按下按钮时崩溃。我真的认为问题在于让多个视图控制器同时在屏幕上运行，或者有来自不同笔尖的多个视图，同时由屏幕上的一个视图控制器控制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:29:42.643

我怀疑您的直接问题是，`_homeViewController`只要您离开该代码所在的任何方法，它就会被释放。要解决此问题，请`strong`在此类中创建一个属性，`_homeViewController`只要需要其视图就可以将其分配给该属性而不是局部变量。这样，作为该视图一部分的按钮（或其他任何东西）仍然具有支持它们的有效控制器对象。

从长远来看，当您需要更改屏幕时推送或呈现视图控制器是一个**更好**的策略，但正如我所说，这是直接的问题...... :)

# canvas - 使用 Google Closure 捕获画布元素的键盘事件

> ID：11198714
> 
> 赞同：1
> 
> 时间：2012-06-25T23:13:03.430
> 
> 标签：canvas, google-closure

这是我想做的一件非常简单的事情：当指针位于画布元素内并且我按下键“A”时，我想绘制一个以给定位置为中心的圆圈。唉，我似乎无法做到这一点。我知道如何添加一个监听器来捕获鼠标点击事件：

```
var canvas = goog.dom.getElement('my_canvas');
goog.events.listen(canvas, [goog.events.EventType.CLICK], 
   function(e) {console.log(e);}); 
```

简单的 es pie 和精美的作品：事件有我点击的坐标，所以我可以用它来画一个圆圈。但我想为此使用键盘（因为我还计划进行其他操作）。首先，我尝试了简单的：

```
goog.events.listen(canvas, [goog.events.EventType.KEYDOWN], 
   function(e) {console.log(e);}); 
```

没有。我试过了，使用 KEYUP、KEYPRESS 或所有这些：不是哔哔声。然后，我遇到了 goog.events.KeyHandler 并尝试了。这是我所做的：

```
var canvas = goog.dom.getElement('my_canvas');
var keyHandler = new goog.events.KeyHandler(canvas);
goog.events.listen(keyHandler, goog.events.KeyHandler.EventType.KEY, 
   function(e) {console.log(e);}); 
```

依然没有。现在，我很生气，所以我说：“让我们看看我们是否可以捕获*任何*键盘事件！” 并做了以下事情：

```
var keyHandler = new goog.events.KeyHandler(document);
goog.events.listen(keyHandler, goog.events.KeyHandler.EventType.KEY, 
   function(e) {console.log(e);}); 
```

瞧，它起作用了：现在我正在捕获*所有*键盘事件。不幸的是，当我查看 javascript 控制台中的事件时，键盘事件中没有任何坐标，甚至没有目标元素。什么？我的意思是，这不是很有用，对吧？

无论如何，我被困住了。这似乎是一件微不足道的事情，但我似乎无法做到。

我在 Mac OS X 版本 10.7.4 上使用 Chrome 版本 19.0.1084.53。

我不确定我正在使用的 Closure 版本（你是如何找到它的？），因为我使用的是与 Closure 版本捆绑在一起的 Plovr，但我相信它是最近的（2012 年 2 月）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T22:10:47.370

好的，正如 cpeisert 在评论中指出的那样，问题是画布默认情况下无法获得输入焦点。我必须添加 'tabindex="1"' 才能实现。接下来，我必须用 div 包围画布并将我的事件处理程序附加到 div。

[相关问题（虽然不使用闭包）](https://stackoverflow.com/questions/7613433/attach-keyboard-events-to-html5-canvas)

# jquery - 如何在当前选择器之后获取元素

> ID：11198715
> 
> 赞同：2
> 
> 时间：2012-06-25T23:13:04.943
> 
> 标签：jquery, jquery-selectors

我的问题可能有点不清楚，所以我举个例子

```
 <table id="products">
        <tr id="P1" class="A1"><td>1x</td><td>Product 1</td><td>&euro; 9,50</td><td><a href="#">(x)</a></td></tr>
        <tr id="P2" class="A1"><td>1x</td><td>Product 2</td><td>&euro; 10,50</td><td><a href="#">(x)</a></td></tr>
    </table> 
```

我想要完成的是以下功能

```
 $('#bestelling tr').each(function(index) {
        var naam = $(this + " td + td").text();
        var id = $(this).attr('id'); 
        alert(id + " " + naam);
    }); 
```

有谁知道我怎么能做到这一点？对不起，我对这个问题的简短解释我的英语不是那么好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:14:32.893

```
$('#bestelling tr td:eq(1)').each(function(index) {
    var naam = $(this).text();
    var id = this.id; 
    alert(id + " " + naam);

    // The tr is:
    $(this).parent()
    // Or the DOM element:
    this.parentNode 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:23:27.147

```
here you go mate. Run the code below: 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>How to get element after current selector</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('table tr').click(function (e) {
                var naam = "";
                $(this).children().each(function () {
                    naam += $(this).html() + ' ';
                });

                alert(naam);
            });

        });
    </script>

</head>
<body>
<table id="products">
    <tr id="P1" class="A1">
        <td>1x</td>
        <td>Product 1</td>
        <td>&euro; 9,50</td>
        <td><a href="#">(x)</a></td>
    </tr>
    <tr id="P2" class="A1">
        <td>1x</td>
        <td>Product 2</td>
        <td>&euro; 10,50</td>
        <td><a href="#">(x)</a></td>
    </tr>
</table>

</body>
</html> 
```

# python - 在 for 循环中写入文件

> ID：11198718
> 
> 赞同：31
> 
> 时间：2012-06-25T23:13:25.500
> 
> 标签：python

```
text_file = open("new.txt", "r")
lines = text_file.readlines()

for line in lines:
        var1, var2 = line.split(",");
        myfile = open('xyz.txt', 'w')
        myfile.writelines(var1)
        myfile.close()

text_file.close() 
```

我在 new.txt 中有 10 行文本，例如`Adam:8154`, `George:5234`等等。现在我想要一个只包含名称的文本文件。`xyz.txt`必须包含`Adam`,`George`等。上面的代码只给我留下了第 10 个名字。

如何在一个文本文件中包含所有 10 个名称？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-25T23:16:08.497

那是因为您在 for 循环中打开、写入和关闭文件 10 次

```
myfile = open('xyz.txt', 'w')
myfile.writelines(var1)
myfile.close() 
```

您应该在 for 循环之外打开和关闭文件。

```
myfile = open('xyz.txt', 'w')
for line in lines:
    var1, var2 = line.split(",");
    myfile.write("%s\n" % var1)

myfile.close()
text_file.close() 
```

您还应该注意**使用 write**而**不是 writelines**。

`writelines`将行列表写入文件。

此外，您应该查看这里使用`with`语句的人们发布的答案。这是在 Python 中进行文件读/写操作的优雅方式

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-25T23:18:10.190

主要问题是您在循环中反复打开/关闭文件。

试试这个方法：

```
with open('new.txt') as text_file, open('xyz.txt', 'w') as myfile:  
    for line in text_file:
        var1, var2 = line.split(",");
        myfile.write(var1+'\n') 
```

我们一次打开这两个文件，因为我们正在使用它们，当我们完成（或发生异常）时`with`它们会*自动关闭。*以前，您的输出文件在循环内反复打开。

我们也在逐行处理文件，而不是一次将*所有*文件读入内存（当您处理非常大的文件时，这可能是一个问题）。

请注意，`write()`它不会附加换行符 ( `'\n'`)，因此如果需要，您必须自己执行此操作（当您编写单个项目时，我将其替换为，而不是项目列表）`writelines()`。`write()`

打开文件进行`r`读取时，这`'r'`是可选的，因为它是默认模式。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-25T23:19:11.290

最好使用上下文管理器自动关闭文件

```
with open("new.txt", "r"), open('xyz.txt', 'w') as textfile, myfile:
    for line in textfile:
        var1, var2 = line.split(",");
        myfile.writelines(var1) 
```

# javascript - 使用 jquery 显示下一个 div 元素

> ID：11198720
> 
> 赞同：0
> 
> 时间：2012-06-25T23:13:30.390
> 
> 标签：javascript, jquery, html, colorbox

我正在使用 colorbox.js 在灯箱中显示一些表单。一个页面上有多个表单，每个表单都有一个链接，可以在灯箱中打开表单。现在，灯箱会打开，但不会显示表单。这是我的 jquery 脚本：

```
jQuery(document).ready(function() {

    $('.myForm').hide();

        $('.link_to_form').click( function() { $(this).next('.myForm').show() } );

        $(".link_to_form").colorbox({ 
            width: "50%", 
            inline: true,
            opacity: ".5", 
            href: ".myForm", 
            onClosed: function() {
                $(".myForm").hide();
            }

            });
    }); 
```

我的两个表单和两个链接的 HTML 是：

```
<a href="#" class="link_to_form">Form 1</a>
<div class="myForm">
<form></form>
</div>
<a href="#" class="link_to_form">Form 2</a>
<div class="myForm">
<form></form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:28:46.953

**工作演示** [http://jsfiddle.net/2anwK/3/](http://jsfiddle.net/2anwK/3/)

**脚本**

```
 <script type='text/javascript' src="http://www.benariac.fr/fabien/jsfiddle/colorbox/colorbox/jquery.colorbox.js"></script>

  <link rel="stylesheet" type="text/css" href="http://www.benariac.fr/fabien/jsfiddle/colorbox/colorbox/colorbox.css"> 
```

**代码**

```
$('.myForm').hide();

$('.link_to_form').click(function() {
    $(this).next('.myForm').show()
});

$(".link_to_form").colorbox({
    width: "50%",
    inline: true,
    opacity: ".5",
    href: ".myForm",
    onClosed: function() {
        $(".myForm").hide();
    }

}); 
```

**工作图像**

![在此处输入图像描述](../Images/9d565b20273ba9e252c91164bf15c277.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:05:28.947

这是你必须做的：

您可以查看[参考](http://www.jacklmoore.com/colorbox/example2/)以了解如何实现。

**HTML**

```
<a href="#myForm1" class="link_to_form colorbox">Form 1</a>
<div id="myForm1" class="myForm">
    <form>
        <p>text1</p>
    </form>
</div>
<a href="#myForm2" class="link_to_form colorbox">Form 2</a>
<div id="myForm2" class="myForm">
    <form>
        <p>text2</p>
    </form>
</div> 
```

**JS**

```
jQuery(".link_to_form").on('click', function() {
    var $self = $(this),
        $popup = $self.next('.myForm');
    $self.colorbox({
        width: "50%",
        inline: true,
        opacity: "0.5",
        onOpen: function() {
            $popup.show();
        },
        onClosed: function() {
            $popup.hide();
        }

    });
}); 
```

**css**

```
.myForm{
    display: none;
} 
```

[**演示**](http://jsfiddle.net/4vuDC/163/)

# gstreamer - 在 Windows 中编写 gstreamer 插件

> ID：11198722
> 
> 赞同：4
> 
> 时间：2012-06-25T23:13:37.577
> 
> 标签：gstreamer

我需要为 gstreamer 编写一个插件。将集成在插件中的代码实际上可作为 VS 2005 项目使用。这就是为什么我打算在visual studio中开发插件。我找不到任何有关在 Windows 中将 gstreamer 插件开发环境设置为 Visual Studio 项目的资源。

gstreamer windows SDK 不包含插件开发所需的文件，如[http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/chapter-building-boiler.html](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/chapter-building-boiler.html)中所述。

注意：虽然类似的以下问题不是我想要的： [Needed environment for building gstreamer plugins in Windows](https://stackoverflow.com/questions/2996565/needed-environment-for-building-gstreamer-plugins-in-windows)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T22:01:11.450

要在 Windows 上开发 GStreamer 插件，您可以使用 GStreamer SDK。

**构建样板**一章侧重于 Linux 开发，它引用了 git 存储库*gst-template*，其中包含使用 Autotools 构建系统构建插件和应用程序的模板。由于您将使用 VS，您将只使用源代码模板，您可以直接[在此处](http://cgit.freedesktop.org/gstreamer/gst-template/tree/gst-plugin/src)下载。

在依赖项方面，构建插件类似于构建 GStreamer 应用程序，在[SDK 文档](http://docs.gstreamer.com/display/GstSDK/Installing+on+Windows)中，您将找到有关如何创建新 VS 项目的详细说明（在**使用向导创建新项目**部分）。

要构建您的插件，您将需要：

1.  如文档中所述，在 VS 中创建一个新的 GStreamer 项目
2.  添加 gst-template 的模板源

# php - 让登录表单显示在每个页面上？

> ID：11198727
> 
> 赞同：1
> 
> 时间：2012-06-25T23:14:17.937
> 
> 标签：php, codeigniter, codeigniter-2, controllers

嗨，我正在尝试让我的登录表单显示在我网站的每个页面上，但是我正在努力做到这一点，因为我在其他没有使用具有该方法的控制器的页面上不断收到“未定义的用户名和密码”错误“登录。

我使用了一个主控制器 (MY_Controller)，它扩展了我的其他控制器。

**MY_Controller 文件：**

```
class MY_Controller extends CI_Controller {

    public $template;
    public $template2;

    public function __construct() {
        parent::__construct();
        $this->template = 'templates/default'; // Set default layout
        $this->template2 = 'templates/other';
    }
} 
```

**用户控制器 - 登录部分：**

```
class Users extends MY_Controller {

    public function __construct() {
        parent::__construct();
        $this->load->helper('form'); // Load the form helper to allow the use of forms.
    }

    /* Other register function is here*/

    public function login(){
        $data['page'] = 'login';

        $data['username'] = array(
            'name' => 'username',
            'placeholder' => 'Enter username'
        );
        $data['password'] = array(
            'name' => 'password',
            'type' => 'password',
            'placeholder' => 'Enter password'
        );

        $this->load->view($this->template, $data);
  } 
```

**默认模板文件的一部分：**

```
 <div id="container">

        <div id="contentArea">
            <h2 class="pageTitle"><?php echo isset($title) && strlen($title) > 1 ? $title : 'Unknown Title'; ?></h2>
            <?php $this->load->view($page); ?>
        </div>
        <div id="aside">
            <h3>Login</h3>
            <?php $this->load->view('login'); ?>
        </div>
    </div> 
```

如果有人对我如何解决这个问题有任何想法，请告诉我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:19:48.237

有很多方法可以解决这个问题。就我个人而言，我制作了一个自动加载的自定义助手，并通过那里运行我的大部分视图。

所以而不是`$this->load->view($this->template, $data);`

我跑`load_index('login', $data)`

**助手/general_helper.php**

```
function load_index($content, $data = array()) {

    $CI =& get_instance();

    $data += array('page'     => $content,
                   'username' => array('username' => 'username',
                                       'placeholder' => 'Enter username'),
                   'password' => array('name' => 'password',
                                       'type' => 'password',
                                       'placeholder' => 'Enter password'));

    $CI->load->view($CI->template, $data);

} 
```

CodeIgniter 为您提供了数千种选择。仔细考虑并选择您喜欢的那个。

# ios - iOS - 如何从文本区域获取整数？

> ID：11198732
> 
> 赞同：-1
> 
> 时间：2012-06-25T23:14:47.673
> 
> 标签：ios, textbox, textarea

> **可能重复：**
> [从 UITextField 检索整数值到 NSInteger 变量中](https://stackoverflow.com/questions/886925/retrieving-integer-value-from-the-uitextfield-into-a-nsinteger-variable)

我让用户用数字填写文本框。我想在计算中使用这个数字；我怎样才能把它放在一个变量中？到目前为止，我只有：

```
NSInteger *answer = results........ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:19:32.130

使用`intValue`或`integerValue`从[`NSString`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)类。

```
int answer = [myTextField.text intValue]; 
```

或者

```
NSInteger answer = [myTextField.text integerValue]; 
```

您还可以将`floatValue`and`doubleValue`用于浮点输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:23:03.327

```
NSInteger answer = [textField.text integerValue]; 
```

或者

```
int answer = [textField.text intValue]; 
```

# meteor - 将命名函数传递给事件映射

> ID：11198734
> 
> 赞同：1
> 
> 时间：2012-06-25T23:14:51.317
> 
> 标签：meteor

我有一个 Meteor 模板，其中包括以下内容：

```
{{#with selected_recipe}}
  {{>recipe}}
{{/with}} 
```

在我的代码（Coffeescript）中，我想从我的事件映射（Backbone-style）中按名称调用一个函数：

```
Template.recipe.events = {
  'click #btn-edit-recipe': 'editRecipe'
}

editRecipe = (event) ->
  console.log @  #should log the selected_recipe object
  #edit recipe 
```

然而，这失败了。当我单击配方模板中的按钮时，我会`Uncaught TypeError: Object editRecipe has no method 'call' (liveui.js:651)`从 Backbone 学习事件映射，也许 Meteor 是不同的。我可以让它工作：

```
Template.recipe.events = {
  'click #btn-edit-recipe': -> editRecipe.call(@, event)
} 
```

这是正确的方法吗？还是我犯了一些简单的错误？我一直喜欢以这种方式使用事件映射，因为它仅用几行代码就总结了渲染模板的行为。匿名函数可以将列表展开，使其更难阅读，当然它们也不能重用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:09:38.240

你在做什么（稍后，事件定义指向一个函数）是正确的。以值作为函数名称（字符串）的事件映射是特定于主干的模式。流星不支持它。

> 我一直喜欢以这种方式使用事件映射，因为它仅用几行代码就总结了渲染模板的行为。

但是您可以通过执行以下操作来实现类似的功能：

```
Template.recipe.doLogin = function(){};
Template.recipe.requestData = function(){};

//  OR Another way
_.extend(Template.recipe, {
    "openFile":function(){},
    "editRecipe":function(){} 
});

//  now Events
Template.recipe.events {
    'click #btn-edit-recipe': Template.recipe['editRecipe'],
    'click #btn-create-recipe': Template.recipe['createRecipe']
} 
```

就个人而言，我不喜欢事件地图。导致它的映射，开发人员必须手动维护。 **编辑：**工作代码@ [https://gist.github.com/3010818](https://gist.github.com/3010818)

# actionscript-3 - AS3 中的 PBKDF2WithHmacSHA1

> ID：11198735
> 
> 赞同：3
> 
> 时间：2012-06-25T23:14:59.857
> 
> 标签：actionscript-3, encryption

我正在使用 Flash/Flex 客户端和 Java 服务器 (Red5) 开发 CRAM 身份验证系统。我以前使用过 as3crypto 库，但据我所知它不支持 PBKDF2。NIST 建议将此算法用于密码加密，因此我想使用它。有谁知道与此算法兼容的 AS3 库，特别是 PBKDF2WithHmacSHA1？

参考：
[http ://code.google.com/p/as3crypto/](http://code.google.com/p/as3crypto/)

[http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf](http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:10:37.413

这个看起来不错：[http ://code.google.com/p/as3-pbkdf2](http://code.google.com/p/as3-pbkdf2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:55:28.067

您是否尝试将“as3 PBKDF2”放入谷歌？我花了 10 秒钟才找到这两个，因为它们是前两个答案。

第一个适合您的需要，但第二个似乎更通用，因为您可以指定哈希函数。

[http://code.google.com/p/as3-pbkdf2/](http://code.google.com/p/as3-pbkdf2/)

[http://code.google.com/p/as3-pbkdf2-lib/](http://code.google.com/p/as3-pbkdf2-lib/)

# database-design - 事实和维度表：一对一的关系

> ID：11198736
> 
> 赞同：3
> 
> 时间：2012-06-25T23:15:01.993
> 
> 标签：database-design, data-warehouse, business-intelligence

我正在尝试开发一个合适的 BI 解决方案，其中维度表和事实表具有 1:1 的关系。

举个例子：

**Fact_UserData**

*   *用户身份*
*   *位置 ID*
*   *职业编号*
*   一堆可以有意义地聚合的数字数据

**Dim_User**

*   *用户身份*
*   性别
*   种族

**Dim_Location**

*   *位置 ID*
*   区
*   城市
*   状态

**Dim_Occupation**

*   *职业编号*
*   职业名称

在此示例中，假设 Fact_UserData 和 Dim_User 将始终通过用户 ID 具有 1:1 的关系。

主要让我失望的是 1:1 关系——我应该有一个专用的用户维度还是应该将这些属性合并到事实表中？我对合并犹豫不决，因为根据[Kimball](http://www.kimballgroup.com/html/PDFs/Fables_Facts.pdf)的说法，退化维度应该保留给操作控制编号。我也想知道将职业作为一个专门的维度是否有意义——从业务的角度来看，按职业分组是至关重要的，这就是为什么我最初将其作为自己的维度。

作为对职业维度问题的概括，处理维度只有两个字段：ID 和名称的情况的最佳实践方法是什么？（把它想象成一个典型的客户维度，期望它只有字段客户 ID 和客户名称。）假设该维度有 10 多个条目并且没有任何层次结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:00:50.837

好吧，考虑到一个人可以改变职业和位置，我也希望`DateKey`在那个事实表中也有一个。如果您将职业和/或位置拉到用户维度，您最终会得到类型 2 维度，因此必须跟踪那里的时间变化。仅仅拥有维度并没有错`Key, BusinessKey`——事情会随着时间而改变，你最终会添加一些东西。

# javascript - 如何使这个 JavaScript 间隔随机？

> ID：11198738
> 
> 赞同：-1
> 
> 时间：2012-06-25T23:15:07.727
> 
> 标签：javascript

如何将此间隔从每 2 秒变为随机 X - X 秒？另外，如何将增量从每 2 个增量更改为随机 X - X？如果您发现我的代码中存在缺陷或需要改进，请同时告诉我，如果愿意，请在单独的代码中。非常感激。

```
<div id="counter"></div>
<script type="text/javascript">
  var START_DATE = new Date("January 1, 2012 12:00:00"); // put in the starting date here
  var INTERVAL    = 2; // in seconds
  var INCREMENT   = 2; // increase per tick
  var START_VALUE = 5000; // initial value when it's the start date
  var count = 0;
  window.onload = function()
  {
    var msInterval = INTERVAL * 2000;
    var now = new Date();
    count = parseInt((now - START_DATE)/msInterval) * INCREMENT + START_VALUE;
    document.getElementById('counter').innerHTML = count;
    setInterval(
      "count += INCREMENT; document.getElementById('counter').innerHTML = count;", msInterval);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:22:55.227

两个数字之间的随机数

```
var min = 1000, max = 10000;
var msInterval = Math.floor(Math.random() * (max - min + 1)) + min; 
```

在 setInterval 中使用闭包不要作为字符串传递

```
setInterval(function(){
    count += INCREMENT; 
    document.getElementById('counter').innerHTML = count;
    }, msInterval); 
```

小提琴小提琴，我编辑了一些大值以使其更快[http://jsfiddle.net/sabithpocker/8CpaF/](http://jsfiddle.net/sabithpocker/8CpaF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:19:11.187

*   要生成 2 到 5 之间的数字，请使用

> var x = Math.floor(Math.random()*3+2;

*   如果它掷出 0 则得到 2，如果掷出 3 则得到 5。

```
<script type="text/javascript">
  var START_DATE = new Date("January 1, 2012 12:00:00"); // put in the starting date here
  var INTERVAL    = 2;
  var INCREMENT   = Math.floor(Math.random()*3)+2;
  var START_VALUE = 5000; // initial value when it's the start date
  var count = 0;
  window.onload = function()
  {
    var msInterval = INTERVAL * 2000;
    var now = new Date();
    count = parseInt((now - START_DATE)/msInterval) * INCREMENT + START_VALUE;
    document.getElementById('counter').innerHTML = count;
    setInterval(
      "count += INCREMENT; document.getElementById('counter').innerHTML = count;",     msInterval);
  }
</script> 
```

# quartz-composer - 如何堆叠在迭代器中渲染的 Sprite？

> ID：11198742
> 
> 赞同：1
> 
> 时间：2012-06-25T23:16:04.653
> 
> 标签：quartz-composer

我正在将图像渲染到迭代器内的 Sprite。我希望每个渲染（迭代）无限期地保留在画布上，以便每个连续的渲染层都位于前一个之上。我怎样才能做到这一点？我的构图中没有清除或任何其他图层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:40:33.947

在 Quartz Composer 中，您几乎总是希望使用`Clear`补丁——不要假设您可以依赖帧缓冲区的先前内容。因此，要实现这一点，您需要将所有图像加载到一个结构中（可能通过使用`JavaScript`来提供一个`Image Loader`补丁并从中构建一个`Queue`），然后使用`Iterator`.

查看 Apple 的“Image TV”示例合成，可在[Quartz Composer 概念合成](https://developer.apple.com/library/mac/#samplecode/Conceptual/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009227)包中的 OS X 开发人员库中找到。此示例演示如何将一系列图像加载到结构中，然后显示它们。

# ruby-on-rails - 主题中的路由错误

> ID：11198744
> 
> 赞同：0
> 
> 时间：2012-06-25T23:16:31.657
> 
> 标签：ruby-on-rails, routes

我正在编写一个应用程序，用户可以创建主题，其他人可以在该主题上发表帖子。

我被这个错误困住了：

```
No route matches {:action=>"show", :controller=>"topics", :id=>nil} 
```

我的 route.rb ：

```
MyPedia2::Application.routes.draw do
    resources :users

    resources :sessions, only: [:new, :create, :destroy]
    resources :topics, only: [:show, :create, :destroy] 

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

    root to: 'static_pages#home'

    match '/topics/:id', to: 'topics#show' 
```

我的耙子路线显示：

```
 topics POST   /topics(.:format)         topics#create
      topic GET    /topics/:id(.:format)     topics#show
            DELETE /topics/:id(.:format)     topics#destroy
    root        /                         static_pages#home
               /topics/:id(.:format)     topics#show 
```

我的主题控制器是：

```
# encoding: utf-8

class TopicsController < ApplicationController
    before_filter :signed_in_user, only: [:create, :destroy]
  before_filter :correct_user, only: :destroy

  def show
        @topic = Topic.find_by_id(params[:id])
  end

    def create
        @topic = current_user.topics.build(params[:topic])
        if @topic.save
            flash[:success] = "Konu oluşturuldu!"
            redirect_to root_path
        else
            render 'static_pages/home'
        end
    end

  def destroy
    @topic.destroy
    redirect_to root_path
  end
  private

    def correct_user
      @topic = current_user.topics.find_by_id(params[:id])
      redirect_to root_path if @topic.nil?
    end
end 
```

有解决办法吗？编辑：我发现 _topics.html.erb 失败了我发现是什么破坏了代码：

```
<% for topic in @topics do %>  
  <li><%=link_to topic.title, topic_path(@topic) %></li>  

 <%= will_paginate @topics %>
<% end %> 
```

topic_path(@topic] 部分是错误的。我怎样才能让它使用 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:43:08.930

它不起作用，因为您的收藏是“@topics”，每个元素都是“topic”，而不是“@topic”。但你很接近。试试这个：

```
<li><%=link_to topic.title, topic_path(topic) %></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:44:01.050

经过数小时的思考，现在我可以看到我的错误了。我在主题控制器中使用了 show 方法，但我的视图/主题中没有 show.html.erb。

如果你想展示你的主题，你必须使用这些方法：

1) 在 config/routes.rb 中使用：

```
match '/topics/:id', to: 'topics#show' 
```

2) 在我使用的模型中，belongs_to :user,:foreign_key => "user_id"

3）链接为：

```
<li><%=link_to topic.title, **topic_path(topic)** %></li> 
```

4）并准备您在路线中提到的模板。

我希望这对任何人都有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:32:09.387

试试这个：

```
<li><%=link_to topic.title, topic_path(:id => @topic.id) %></li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T01:33:15.897

我认为您的路线可能应该是：

```
resources :sessions, :only => [:new, :create, :destroy]
resources :topics, :only => [:show, :create, :destroy] 
```

# javascript - nodeJS中的持久变量

> ID：11198752
> 
> 赞同：4
> 
> 时间：2012-06-25T23:17:24.403
> 
> 标签：javascript, node.js

我正在编写一个节点应用程序，它需要在`createServer()`回调的连接迭代中记住数据。有没有不涉及数据库或文件读/写的简单方法？到目前为止，我已经尝试在各个模块甚至主脚本中创建对象，同时将它们传递给各种响应处理程序，但是对于每个连接，它们都会被刷新。

我的意思是：

```
require('http').createServer(function(req,res){
        route(req,res,object);
}).listen(cp=80);

object={variable:0}

function route(req,res,object){
    res.end();
    console.log(object.variable);
    object.variable=Math.floor(Math.random()*100);
} 
```

`console.log`不出所料，在这种情况下会抛出`0`每个连接。有没有办法创建全局变量，不是跨模块可用，而是持久性不像`var`'s？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T00:01:08.533

Node 中的每个模块都有自己的作用域，所以不，`var Foo;`不会创建全局变量 Foo。使用`global`模块内部的对象。

**更新：**

```
require('http').createServer(function(req,res){
        route(req,res,object);
}).listen(cp=8080);

object={variable:0}
global.foo = 'Bar'; // I added this

function route(req,res,object){
    res.end();
    console.log(object.variable);
    console.log("foo = %s", global.foo); // I added this too
    object.variable=Math.floor(Math.random()*100);
} 
```

它也按预期记录“foo = Bar”。

# actionscript-3 - Flex/ActionScript：如何按值（而不是引用）复制 ListCollectionView 变量？

> ID：11198753
> 
> 赞同：1
> 
> 时间：2012-06-25T23:17:37.743
> 
> 标签：actionscript-3, apache-flex

如何按值（而不是引用）将 ListCollectionView 变量复制到新的 ListCollectionView 变量中？

也就是说，对新 ListCollectionView 变量的更改不应影响原始 ListCollectionView 变量（反之亦然）。

最终目标是让 2 个 ListCollectionView 变量指向同一个 ArrayList，但对一个 ListCollectionView 变量的更新不会影响另一个 ListCollectionView 变量。

更新 1

这是我发现的一种方法，尽管我不确定它是最干净还是最有效的方法。

```
LCV2=new ListCollectionView(new ArrayList());
for (var ii:int=0; ii<LCV1.length; ii++) {
    var item:Object=LCV1[ii];
    LCV2.list.addItem(item);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:05:44.857

```
listCollection1 = new ListCollectionView(event.result); //populate your first list however

listCollection2 = new ListCollectionView(); //create a new ListCollectionView that isn't related to the first
listCollection2.addAll(listCollection1.list); //add all the items from the first list to the second 
```

# user-interface - 径向菜单的实际问题是什么？

> ID：11198758
> 
> 赞同：1
> 
> 时间：2012-06-25T23:18:18.873
> 
> 标签：user-interface, menu, user-experience

几年前，我发现了径向菜单，并意识到它们可能比线性菜单更容易使用。当时，我对用户体验原则（除了菲特定律）没有足够的了解，无法给他们一个诚实的评价。我认为，如果它们在实践中确实更容易使用，它们最终应该会出现在主流产品中，即使违背线性菜单惯例的惯性。

快进到今天，我下载[了 ZGRViewer](http://zvtm.sourceforge.net/zgrviewer.html)来可视化一些图表。它使用径向上下文菜单，我意识到这些东西确实*更*容易使用，尤其是当您学习简单的鼠标手势来选择嵌套菜单时。

为什么径向菜单没有获得更多关注？是用户惯性吗？框架惯性（即在各种平台上没有足够好的实现）？总体而言，它们在实践中并没有*那么*好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:32:26.357

在 UX 中，有些事情我们可以做，有些事情我们想做但不做。了解人机如何获取信息对于设计出色的体验至关重要。径向菜单确实有意义，但这不是用户习惯的。这不是不可能实现的，但是用户需要一些时间来了解他们从哪里到现在的上下文。有一些固有的行为模式是无法被扫除的。你学会突破界限，仍然让它在视觉吸引力之外可用。

# javascript - 以结束年份和开始年份排序

> ID：11198759
> 
> 赞同：0
> 
> 时间：2012-06-25T23:18:31.613
> 
> 标签：javascript, backbone.js, comparator

我正在寻找写一个`comparator`来对列表中的项目进行排序。

对于没有结束年份的项目，它们应该位于顶部。

对于有结束年份的项目，它们应该是下一个。

对于结束年份相同的项目，开始年份最低的项目应该是下一个。

到目前为止我有的东西

`[item.get('end_year'), item.get('start_year')]`

测试场景第一个是结束年第二个是开始年（“”存在）

```
"", ""
"", 2012
"", 2011
2012, 2005
2012, 2008
2011, 2011
2010, 2005 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:17:43.920

在您的集合中添加一个comaprator 函数，该函数在“排序”函数中采用两个模型。当模型添加到其中时，这将按排序顺序维护您的集合。请注意，如果您更改单个模型的 start_year 或 end_year，则必须手动重新收集。

```
comparator: function(item1,item2) {
  var y1 = {
    start: item1.get('start_year'),
    end: item1.get('end_year')
  },
  y2 = {
    start: item2.get('start_year'),
    end: item2.get('end_year')
  };

  // If one item has no end year, sort it first
  if(y1.end === '' && y2.end !== '') return -1;
  if(y1.end !== '' && y2.end === '') return 1;

  // Sort the higher end year first
  if(y1.end > y2.end) return -1;
  if(y1.end < y2.end) return 1;

  // Sort the lower start year first
  if(y1.start < y2.start) return -1;
  if(y1.start > y2.start) return 1;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:12:40.657

带着真实和咖啡：

```
comparator: (a, b) ->
    return -1 if not a.get("end_year") and b.get("end_year")
    return 1  if a.get("end_year") and not b.get("end_year")
    return -1 if a.get("end_year") > b.get("end_year")
    return 1  if a.get("end_year") < b.get("end_year")
    return -1 if a.get("start_year") < b.get("start_year")
    return 1  if a.get("start_year") > b.get("start_year")

    0 
```

# ruby-on-rails - Rspec Rails：使用多模型形式测试控制器方法“创建”

> ID：11198763
> 
> 赞同：2
> 
> 时间：2012-06-25T23:19:11.567
> 
> 标签：ruby-on-rails, rspec, controller, update-attributes

我正在构建一个 Ruby on Rails 应用程序，其中包含各种常见的模型、视图和控制器。

我的一个控制器中的“创建”操作应该创建两个不同模型的实例。这是我的代码：

```
 def create
  @league = League.new(params[:league])
  @user = @league.users.build(params[:user])
  ... .save conditions appended ...
 end 
```

因此，当您通过 LeaguesController 通过对 /leagues 的 POST 请求调用“create”时，您将获得一个新的 League 实例和一个新的 User 实例。我还希望新的 User 实例能够继承新的 League 实例的 ID，因此它可以用作将实例链接在一起的外键。这是通过以下方式完成的：

```
 def create
  @league = League.new(params[:league])
  @user = @league.users.build(params[:user])
  @league_id = @league.id
  @user.update_attribute('league_id', @league_id)
  ... .save conditions appended ...
 end 
```

User 模型已经`belongs_to`是 League 模型，即`has_many`用户。

上面的代码工作得很好，花花公子，通过手动测试验证。但是，我一生都无法弄清楚如何使用 Rspec 自动化这些测试。我正在努力成为一个好孩子并使用测试驱动设计，但这让我很难过。

问题是我无法弄清楚如何在我的测试中访问新创建的 League 和 User 实例的属性。我正在尝试使用以下代码这样做：

```
describe LeaguesController do
  describe 'new league and user' do
    it 'should create a new user with a league_id equal to the new leagues id'
      @league_attr = { :name => "myleague", :confirmation_code => "mycode", :id => 5}
      @user_attr = { :username => "myname", :password => "mypass"}
      post :create, :user => @user_attr, :league => @league_attr
      assigns(:league_id).should eql(5)
    end
  end
end 
```

但测试返回`nil`值为`:league_id`

我对一般编程和特别是 Rspec 都是新手，所以我非常感谢有人可能提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:48:51.133

你不能`:id`用分配`new`。尝试这个：

```
 def create
   @league = League.new(params[:league])
   @league.id = params[:league][:id] if params[:league][:id]
   @user = @league.users.build(params[:user])
   @league_id = @league.id
   @user.update_attribute('league_id', @league_id)
   ... .save conditions appended ...
 end 
```

也就是说，我想知道它是如何在浏览器中工作的。

此外，您最好在测试时使用[FactoryGirl](https://github.com/thoughtbot/factory_girl)或 Fixtures 将数据分配给模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:22:59.610

你试过[撬](http://pry.github.com/)吗？

每当我发现这样的事情时，我发现能够通过 Pry（或 Ruby-Debug）插入一个刹车点非常方便，这样我就可以检查变量及其行为。

我怀疑`binding.pry`介于两者之间`@league_id = @league.id`，`@user.update_attribute('league_id', @league_id)`可能会很好地阐明这个问题。

`@league.save`另请注意，当您通过调用保留 @league_id 时，用户将自动继承它。（这就是背后的想法`@league.users.build(..)`——它将在持久性时正确设置所需的关系。

# verilog - 在 Verilog 中使用阻塞分配来推断触发器

> ID：11198766
> 
> 赞同：2
> 
> 时间：2012-06-25T23:19:35.173
> 
> 标签：verilog, system-verilog

我已阅读“Verilog 综合中的非阻塞分配，致命的编码风格！” 通过克利福德卡明斯。他说以下代码（第 12 页，简化版）是教科书中经常使用的触发器的正确​​实现，即使不是任何人都应该使用的那种。该[文件](http://www.sunburst-design.com/papers/CummingsSNUG2000SJ_NBA.pdf)获得了最佳论文奖，因此我认为该声明是正确的。

```
module ff (q, d, clk)
  output q;
  input d, clk;
  reg q;

  always @(posedge clk)
    q = d;
endmodule 
```

我想知道如果两个或多个这些触发器串联连接，为什么它会继续正常工作。说

```
module two_ffs (q, d, clk)
  input d, clk;
  output q;

  wire tmp;

  ff firstff (tmp, d, clk);
  ff secondff (q, tmp, clk);
endmodule 
```

在我看来，tmp 的值可能在被 secondff 使用之前被更新，从而导致一个触发器而不是两个触发器。有人可以告诉我标准的哪一部分说不能发生吗？非常感谢。

*[并不是说我会考虑编写这样的代码，我只是想了解阻塞/非阻塞行为，即使在糟糕的编码风格使含义不明显的情况下]*

后来补充：

我现在认为这篇论文不太可能是正确的。1364-2201 Verilog 标准的第 5 节“调度语义”解释了会发生什么。特别是，第 68 页的第 5.6.6 节“端口连接”说单向端口就像连续分配一样。反过来，连续分配只是对所有内容都敏感的始终块。所以底线是，在我下面的示例中，ff 的两个实例化等效于具有多个 always 子句的模块，每个人都会同意它被破坏了。

在 Clive Cummings 回答问题后添加：

我感谢 CC 指出，从标准第 5 节中取出的上述陈述仅涉及更新事件的时间，并不意味着某些连续赋值和始终块之间的字面等效性。尽管如此，我认为他们解释了为什么一些模拟器（例如 Icarus Verilog）会在“触发器”中产生不同的模拟结果，其中包含阻塞和非阻塞分配。[在一个更大的例子中，我得到了 2 个带有阻塞分配的明显 ffs，而正确的 5 个带有非阻塞分配。] 其他模拟器（例如具有默认选项的 Modelsim 或 Cver）似乎产生相同的结果，无论哪种形式使用赋值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T17:53:46.727

全部 -

一些更正和更新。2001 Verilog 标准的第 5.6.6 节没有说“单向端口就像连续赋值一样”，它说“端口通过隐式连续赋值语句连接进程”。我将在下面指出一个区别。

其次，“连续分配只是对所有事物都敏感的始终块”是不正确的。连续分配将值***驱动***到可由其他源驱动的网络上，具有 Verilog 标准中所述的预定义分辨率功能。始终阻止变量的***更改***值和最后的程序更改获胜（无解决方案）。

关于我对 1-always 块触发器的描述，我在论文中的描述不是 100% 准确的（但通常是准确的）。理论上，2 实例化触发器模型确实存在竞争条件，尽管这种情况很少见。这种竞争很少见，因为当您对声明为输出的变量进行始终块赋值时，Verilog 编译器会自动抛出“隐式连续赋值语句”（IEEE-1364-2001，第 5.6.6 节，第 1 段）将程序变量转换为网络***驱动***分配（您永远不会看到这种情况发生！）这种转换通常足以在端口上引入等效的非阻塞分配延迟，因此模拟工作。我过去曾尝试过编译器优化开关，它有效地删除了触发器之间的模块端口，并观察到了不需要的竞争条件，所以从技术上讲，我对一个好的 1-always，blocking-assign 触发器的描述不是 100 ％ 正确的; 因此，您仍然应该使用本文中描述的非阻塞分配。

同一模块中的 2-always 阻塞赋值示例具有明确的竞争条件。正如所写的那样，它可能会起作用，因为大多数编译器自顶向下执行代码，但如果你颠倒 always 块的顺序，你可能会看到一场比赛。

问候 - Cliff Cummings - Verilog 和 SystemVerilog 大师

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:18:33.327

阅读论文的[1.3 版](http://www.sunburst-design.com/papers/CummingsSNUG2000SJ_NBA_rev1_3.pdf)，第 9 节示例 13。它下面的文本解释说，如果模块只包含一个 always 块是可以的。我目前的理解是，这不是单独模块之间的问题。让您的示例发挥作用。但是，如果一个模块包含多个 always 块，则执行顺序未定义，将导致本文第 2 节中讨论的竞争[条件](http://www.sunburst-design.com/papers/CummingsSNUG2000SJ_NBA_rev1_3.pdf)。

下面的示例与问题中的 2 flop 示例几乎相同，只是它位于 1 个模块中，因此执行顺序未定义，这可能不起作用。

```
module ff (q, d, clk)
  output reg q;
  input d, clk;
  reg d_delay ;

  always @(posedge clk)
    d_delay = d;

  always @(posedge clk)
    q = d_delay;

endmodule 
```

# r - 如何在 R 中的多图面板中跨图或在图之间进行注释

> ID：11198767
> 
> 赞同：8
> 
> 时间：2012-06-25T23:19:40.423
> 
> 标签：r, graphics

如果我在一个面板中有多个绘图，我希望能够放置跨越多个绘图区域或绘图区域之间的文本注释。我确信一定有办法做到这一点，但我需要一些帮助来弄清楚如何做。
这是一些假数据，可在一个面板上创建四个图：

```
x1 = rnorm(100)
x2 = rnorm(100)
x3 = rnorm(100)
x4 = rnorm(100)

par(mfrow=c(2,2)) 
hist(x1, xlab="", main="Group A")
hist(x2, xlab="", main="Group B")
hist(x3, xlab="", main="")
hist(x4, xlab="", main="") 
```

这将创建下面的多图面板，除了我还添加了红色文本。*在 R 中创建图形面板后，*我通过注释 PDF 文件添加了红色文本，然后将其保存为 PDF。我想学习的是如何在 R 中以编程方式注释图形面板，而不必保存它并注释保存的文件。
通常，我会使用`text()`or添加注释`mtext()`。但这仅在您注释单个图形时才有效。有没有办法添加相对于 4 个图形的整个面板的坐标的注释？我现在正在寻找基本图形的解决方案，但如果有人知道如何在 ggplot2 或 lattice 中做类似的事情，我也会有兴趣看到它。 ![在此处输入图像描述](../Images/3f039d188eb83d0897d9f44c6d24332e.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T23:49:20.253

如果你真的想更好地控制这些类型的布局问题，你可以使用恰当命名的`layout`.

```
m <- matrix(c(1,2,3,3,4,5,6,6),ncol = 2,byrow = TRUE)
layout(m,widths = c(0.5,0.5),heights = c(0.45,0.05,0.45,0.05))

par(mar = c(2,4,4,2) + 0.1)
hist(x1, xlab="", main="Group A")
hist(x2, xlab="", main="Group B")

par(mar = c(0,0,0,0)) 
plot(1,1,type = "n",frame.plot = FALSE,axes = FALSE)
u <- par("usr")
text(1,u[4],labels = "Here",col = "red",pos = 1)

par(mar = c(2,4,2,2) + 0.1)
hist(x3, xlab="", main="")
hist(x4, xlab="", main="")

par(mar = c(0,0,0,0)) 
plot(1,1,type = "n",frame.plot = FALSE,axes = FALSE)
u <- par("usr")
text(1,u[4],labels = "Here",col = "red",pos = 1) 
```

![在此处输入图像描述](../Images/8b4e2661e9f07cf761a0780fe2067c9b.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T23:35:41.687

您想使用`mtext`with `outer=TRUE`。例如，`mtext('Results2', side=1, line=-2, outer=TRUE)`和`mtext('Results1', side=3, line=-20, outer=TRUE)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T17:21:49.753

对于这个例子，`layout`函数是最简单的，正如已经展示的那样，但对于更一般的情况，您还应该学习`grconvertX`and`grconvertY`函数（以及使用 设置裁剪`par(xpd=`。转换函数可以为您提供不同坐标系的当前用户坐标中的坐标，因此，例如，您可以通过从标准化设备坐标转换 0.5 将某些内容放在页面上。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-15T03:58:20.560

这是使用 Greg Snow 方法的示例：

```
par(mfrow=c(2, 2))
replicate(4, plot(matrix(runif(20), nrow=10)))
text(grconvertX(.5, "ndc", "user"), grconvertY(.25, "ndc", "user"), "TEST", cex=3, col="red", xpd=NA)
text(grconvertX(.5, "ndc", "user"), grconvertY(.75, "ndc", "user"), "TEST", cex=3, col="red", xpd=NA) 
```

[![重叠图](../Images/641b285f221c6850aadcf65ac8f561ab.png)](https://i.stack.imgur.com/BEhHu.png)

# c - 在结构中传递 int 指针

> ID：11198772
> 
> 赞同：0
> 
> 时间：2012-06-25T23:19:57.043
> 
> 标签：c, pointers, struct

我很难理解这种行为，所以也许有人可以对这种情况有所了解。我根本想不通为什么我不能从一个方法返回一个指向结构的指针，并期望之后仍然能够重用它。

如您所见，该`generateSmallMatrix()`方法创建了一个 int[] 数组并将其设置在 ysmf 结构中，然后我将其返回给 main。然后 Main 获取 ysmf* 并调用 printArray（再次）。在第三次尝试时，无法再检索阵列了..这让我发疯了..

我已经用我的 Eclipse 调试器检查了所有调用的位置`matrix->A`是相同的（0x7ffffffffe180 - 所以就我所知的 C 指针，任何形式的访问该 int 都应该返回正确的值 - 无论是 *(ax++) 还是 ax[i] ) .. 但也没有..

至少可以说非常令人沮丧，所以这里是代码：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct sparseMatrix
{
    int* A;
} ysmf;

void printArray(int* ax, int length) {
    int i = 0;
    for (i = 0; i < length; i++) {
        printf("%i,", ax[i]);
    }
    printf("\n");
}

ysmf* generateSmallMatrix()
{
    ysmf *matrix = malloc(sizeof(ysmf));

    int a[] = {1,2,3,9,1,4};
    printArray(a, 6);                   // returns 1,2,3,9,1,4,
    matrix->A = a;
    printArray(matrix->A, 6);           //returns 1,2,3,9,1,4,
    //printArray(matrix->A, 6);

    return matrix;
}

int main(void) {
    ysmf* matrix = generateSmallMatrix();
    printArray(matrix->A, 6);           //returns 1,6,-7856,32767,1,4,
    return EXIT_SUCCESS;
} 
```

您可以在我插入评论的地方看到问题。

我知道这可能是我不应该错过的完全基本的东西..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:22:42.647

因为`a`是一个本地数组，它的生命周期在`generateSmallMatrix()`函数结束时结束。之后访问它会导致**未定义的行为**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:33:35.640

这条线

```
ysmf *matrix = malloc(sizeof(ysmf)); 
```

只为您的 ysmf 结构分配足够的空间，在这种情况下，它只是一个 int 指针。所以你然后去把它指向'a'。

```
matrix->A = a; 
```

问题是 a 在堆栈上。所以它现在指向这个内存地址，但是当你退出函数时，内存不再为数组保留。

如果您改为为“a”分配内存并将您的结构指向那个，那么您就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T23:37:13.800

尝试这个...

```
ysmf* generateSmallMatrix()
{
    ysmf *matrix = malloc(sizeof(ysmf));

    int a[] = {1,2,3,9,1,4};
    printArray(a, 6);

    matrix->A = malloc(sizeof(int) * 6);
    memcpy(matrix->A, a, sizeof(int) * 6);
    printArray(matrix->A, 6);

    return matrix;
} 
```

现在在 generateSmallMatrix 函数之外，您应该能够打印正确的值。但是，请务必释放 malloc 的内容。

```
int main(void) {
    ysmf* matrix = generateSmallMatrix();
    printArray(matrix->A, 6);

    free(matrix->A);
    free(matrix);

    return EXIT_SUCCESS;
} 
```

希望这可以帮助。

# javascript - 是否有像 punbb/phpbb 这样的 nodejs 论坛引擎？

> ID：11198773
> 
> 赞同：4
> 
> 时间：2012-06-25T23:20:02.593
> 
> 标签：javascript, node.js, forum, phpbb, punbb

我已经用谷歌搜索/搜索了 npm，并且惊讶地发现在 nodejs 之上没有任何 punbb/phpbb 论坛引擎。

如果你知道，请分享一个链接到

# c++ - memset 的区别？

> ID：11198776
> 
> 赞同：2
> 
> 时间：2012-06-25T23:20:09.293
> 
> 标签：c++, pointers

我确实在 msdn 和 cplusplus.com 上阅读了 memset 的用法，我知道（如果我错了，请纠正我）：

```
int p =3;
// p = object value
// &p = memory address where p is stored 
```

那么有什么区别：

```
char szMain[512];
memset( szMain, 0x61, sizeof( szMain ) );
cout << szMain[4]; 
```

和：

```
char szMain[512];
memset( &szMain, 0x61, sizeof( szMain ) );
cout << szMain[4]; 
```

（0x61 = a，ASCII 表十六进制）

为什么两者都有相同的行为？如果这不是一个建设性的问题，请原谅我。我是 C++ 的新手，我似乎无法理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T23:30:47.420

正在发生的事情在标准中被描述为*数组到指针的转换*。

> ### 4.2 数组到指针的转换[conv.array]
> 
> “NT数组”或“T的未知边界数组”类型的左值或右值可以转换为“指向T的指针”类型的右值。结果是指向数组第一个元素的指针。

* * *

上面说，在您的第一次调用中，`memset` `szMain`将转换为`char`存储数组第一个元素的地址的指针（更具体地说是指向的指针）。

在第二次调用中，`&szMain`将产生一个类型的指针`char (*)[512]`，即。指向与 具有相同类型的数组的指针`szMain`，存储数组本身的地址。

*这两个表达式都将产生相同的精确值，因为它的开头与`szMain`它的第一个元素 ( ) 位于相同的地址`szMain[0]`，但请注意它们不是同一类型。*

* * *

`memset`接受 a`void*`作为第一个参数，因此可以隐式使用任何指针类型来调用函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T23:25:35.220

`szMain`是数组的标识符。在大多数情况下，数组标识符衰减为指向数组中第一个元素的指针，换句话说`&szMain[0]`。

所以在你的第一个例子中，你传递`memset`了数组第一个元素的地址。在第二个示例中，您将数组本身的地址传递给它。但是，这些是完全相同的地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T23:37:35.190

是的，在这种情况下，两者具有相同的行为，但不一定总是如此。

数组名称的大多数用法都给出了数组第一个元素的地址。对于 T 的数组，指针的类型将是`T *`。

如果您明确地取而代之的是数组的地址，您将获得相同的地址，但类型不同（“指向 T 类型的 N 个对象的数组的指针”而不是“指向 T 的指针”）。

在这种情况下，您传递的地址将转换为 a `void *`，因此类型差异会立即被丢弃 - 但如果您在另一个不会立即丢弃类型差异的上下文中使用它们，它们不一定具有相同的效果. 举个例子，如果你想让数组的第一个元素不被初始化，你可以这样做：

```
memset(szMain+1, 'a', sizeof(szMain)); 
```

由于存在类型（在这种情况下）“指向字符的指针”，因此它将根据需要从数组中的第二个字符开始。但是，如果您这样做了：

```
memset(&szMain+1, 'a', sizeof(szMain)); 
```

它将添加一个数组的大小，而不是加 1，因此您将在数组末尾之后传递地址，而不是第二个元素的地址。

顺便说一句：如果你想要'a'，我建议像上面那样直接使用它，而不是像你在问题中那样用十六进制编码值。至少，它更具可读性。它在理论上也更便携，尽管很少有人真正关心十六进制值无法正常工作的机器（主要是 IBM 大型机）。

# macos - svn 使用默认路径 /usr/bin 而不是 /opt/local/bin

> ID：11198782
> 
> 赞同：0
> 
> 时间：2012-06-25T23:20:43.927
> 
> 标签：macos, svn, unix

我的 Mac 上安装了 macports。我安装的其中一个 macports 程序肯定需要 svn。我通过macports安装了svn。这可以。我不介意安装它。但是，我更喜欢让 svn 引用 /usr/bin 中的那个。现在，我喜欢在我的 .profile 文件中同时拥有 /usr/bin 和 /opt/local/bin 。我打算保持这种状态。

我可以创建一个指向 /usr/bin 并称为 svn 的符号链接吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:39:12.380

您已经在两个位置拥有 svn：

1.  /usr/bin/svn
2.  /opt/local/bin/svn

如果您在 /opt/local/bin 中为 svn 创建具有相同名称的符号链接，它将有效地从 macport 中删除二进制文件。

否则您必须创建具有不同名称的符号链接，这不是很有用。

如何拥有一个指向您要使用的别名的别名：

> 别名 svn=/usr/bin/svn

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:31:46.210

您不能确保 /usr/bin 在您的路径中排在第一位吗？

# php - mod_rewrite PHP

> ID：11198784
> 
> 赞同：1
> 
> 时间：2012-06-25T23:21:00.113
> 
> 标签：php, .htaccess, mod-rewrite

我的网址目前看起来像这样

> [http://www.mydomain.com/index.php?videoID=6nR9nsKTx4g](http://www.mydomain.com/index.php?videoID=6nR9nsKTx4g)

但我想通过

> [http://www.mydomain.com/6nR9nsKTx4g](http://www.mydomain.com/6nR9nsKTx4g)

我这样试过

```
RewriteEngine On
RewriteRule ^([^/]*)$ index.php?videoID=$1 [L] 
```

但是没有传输videoID。那个代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:31:17.857

您缺少 QSA，这会附加查询字符串

```
RewriteEngine On
RewriteRule ^([^/]*)$ index.php?videoID=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:28:14.107

我看不出这不起作用的任何原因，查看您使用的代码，它看起来很正确。

尝试添加 phpinfo(); 死（）; 到代码顶部并检查 _GET 变量以确保已设置变量。

# ajax - Seaside：通过 AJAX 执行 JavaScript 方法

> ID：11198785
> 
> 赞同：0
> 
> 时间：2012-06-25T23:21:09.517
> 
> 标签：ajax, seaside

我有两个 Ajax 调用。我需要确保在这两个调用之间执行了一个 JS 函数。

是否可以通过 AJAX 响应触发客户端 JS 函数的执行？或者你会怎么做这种事情？

* * *

**编辑**我的代码，在执行第一个答案（`onComplete`）建议的操作之后：

```
^ (html jQuery ajax
    callback: [ :text | id := self createNewAnnotation: text ]
    value: (self html jQuery: '#annotationText') value;

    onComplete: ((JSStream on: 'displayAnnotation("', id, '")'), 
        (self html jQuery ajax
            callback: [ :text | finalText := text ]
            value: (self html jQuery: '#text') html)
    ); 
```

这应该做什么：在第一个回调中，该`#annotationText`字段的值被传递给`createNewAnnotation`，它保存注释并返回 ID。接下来，我想将该 ID 传递给客户端 JS 函数`displayAnnotation()`。

在这个例子中，这还不能工作，因为周围的代码`JSStream on:`不在一个块中，因此具有初始值`id`. 如何将服务器端方法的结果作为参数传递给客户端函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:01:02.350

在 Seaside 中，您可能会使用 jQuery 绑定来执行 ajax 调用。如果你想确保两个 ajax 调用是链接在一起的，并且在它们之间执行了一些其他的 JS 代码，那么代码将遵循以下几行：

```
renderContentOn: html
    html span
       onClick: (html jQuery ajax 
                    callback: [...1st ajax callback...];
                    onComplete: ((JSStream on: '... some JS code ...'),
                                 (html jQuery ajax callback: [...2nd ajax callback...]));
       with: 'Click this to trigger the calls'. 
```

这将呈现一个跨度，单击该跨度将执行第一个 ajax 调用。如果完成，JS 代码和第二个 ajax 调用将被执行。

**编辑**：回答附加问题：

如果您希望通过第一个回调计算传递给调用的“id”，则`displayAnnotation`只能在第一个回调执行后生成该调用。该值可以通过临时变量或实例变量（因为闭包）在 ajax 回调之间传递。以下代码使链接通过`onComplete:`显式。之后，我举了一个例子，其中进行了较少的 ajax 调用。

```
^ (html jQuery ajax
    callback: [ :text | id := self createNewAnnotation: text ]
    value: (html jQuery: #annotationText) value;
    onComplete:  
        (html jQuery ajax 
              script:[:s | s << ((JSStream on: 'displayAnnotation("', id, '")')]
              onComplete:
                  (html jQuery ajax 
                       callback: [ :text | finalText := text ]
                       value: (html jQuery: #text) html))) 
```

如果您了解 Seaside 回调的工作原理，您还可以减少 ajax 调用的数量。总之，产生回调响应的块总是最后被调用。这允许在单个调用中对多个回调块进行分组。如：

```
 ^ (html jQuery ajax
          callback: [ :text | id := self createNewAnnotation: text ]
          value: (html jQuery: #annotationText) value;
          script:[:s | s << ((JSStream on: 'displayAnnotation("', id, '")')];
          onComplete:
                  (html jQuery ajax 
                       callback: [ :text | finalText := text ]
                       value: (html jQuery: #text) html))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:41:24.183

XMLHttpRequest 对象有一个`onreadystatechange`事件。当对象达到`readyState`4 时，您可以通过将匿名函数绑定到该事件来发出第二个 AJAX 请求。如果您想要更详细的回复，请发布您尝试过的内容和一些代码，SO 社区将非常愿意为您提供更详细的答案。

# c# - 无法针对对象断言

> ID：11198786
> 
> 赞同：2
> 
> 时间：2012-06-25T23:21:10.420
> 
> 标签：c#, vb.net, oop, object

这可能是一个非常简单的面向对象编程问题。我要做的是获取 2 个空对象，使用查询从数据库中提取数据，用查询返回的数据填充空对象，然后对它们进行断言。请看下面的代码：

```
 object test1;
        object test2;

        using (SqlConnection dbconnection = new SqlConnection(expconnstr))
        {
            dbconnection.Open();

            var expcommand = new SqlCommand(expectedquery, dbconnection);
            var actcommand = new SqlCommand(actualquery, dbconnection);

            using (SqlDataReader expreader = expcommand.ExecuteReader())
            {
                if (expreader.Read())
                {                        
                    test1 = expreader.GetValue(0);
                    expreader.Close();
                }
            }

            using (SqlDataReader actreader = actcommand.ExecuteReader())
            {
                if (actreader.Read())
                {
                    test2 = actreader.GetValue(0);
                    actreader.Close();
                }
            }
        }
        Assert.AreSame(test1, test2); 
```

我按照相同的模式在 VB 中编写了一个非常相似的测试方法，并且 VB 代码执行得很好。但是，在从 VB 过渡到 C# 时，我遇到了诸如此类的问题。编译器在断言处说“使用未分配的变量”。但是，我以为我在上面的代码块中分配了一个值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:24:22.273

存在`actreader.Read()`返回 false 的可能性，因此`test2`可能永远不会被分配和编译器错误。

您可以通过将`test1`&`test2`初始设置为`null`：

```
object test1 = null;
object test2 = null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:25:27.903

您正在将值分配给`if`块内的变量。由于**局部变量未使用默认值进行初始化**，因此无法保证在您执行`Assert`语句时该变量已被赋值。

正在发生以下一项或多项情况：

*   `expreader.Read()`正在返回`false`
*   `actreader.Read()`正在返回`false`

# maven - 同一存储库的多个 Maven 镜像

> ID：11198788
> 
> 赞同：6
> 
> 时间：2012-06-25T23:21:13.240
> 
> 标签：maven, repository, mirror

作为一名顾问，我为多个客户工作。每个客户端都使用自己的内部 Maven 存储库，该存储库也设置为镜像 Central 和其他外部存储库。我需要在我的笔记本电脑上配置我的 maven 安装，以便当我为一个客户工作时，它可以利用他们的内部存储库来处理所有事情。

我原以为我可以使用配置文件来处理这个问题，但是不能根据配置文件更改镜像设置。

有人对如何处理这个 Maven 配置有建议吗？

注意：这里有一个类似的问题：[如果 nexus 服务器关闭，我如何配置 maven 以访问 maven Central？](https://stackoverflow.com/questions/6541002/how-do-i-configure-maven-to-access-maven-central-if-nexus-server-is-down)，但该问题涉及是否在来自镜像的 Central 之间切换。我需要的是 Central（和其他人）来自一个镜像或基于某些属性/设置/变量等的不同镜像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:46:10.353

创建两个 shell 别名：

```
alias build_at_home="mvn -s $HOME/.m2/home_settings.xml"
alias build_at_work="mvn -s $HOME/.m2/work_settings.xml" 
```

“-s”选项便于明确说明要使用的环境设置文件。我们在共享构建服务器上使用这种机制来确保每个项目构建都是隔离的。

显然，在 Windows 上，您可以创建一组批处理文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:28:01.590

我的项目中也有非常相似的要求。我创建了两个单独`settings.xml`的文件，将它们命名为`settings_one.xml`和`settings_two.xml`并将它们保存在`MAVEN_HOME`. 根据我需要的文件，我有一个小脚本（Windows 上的 bat 文件），它用两个设置文件之一覆盖现有的 settings.xml。

```
del C:\Users\<username>\.m2\settings.xml
copy C:\Users\<username>\.m2\settings_one.xml C:\Users\tadigotl\.m2\settings.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:10:59.400

我可以建议的最简单的解决方案是安装 git 并将 .m2/settings.xml （当然通过 .gitignore 忽略存储库本身）提交到 git 并为客户创建适当的分支。更改设置将通过以下方式完成：

```
git checkout CUSTOMER_BRANCH 
```

此外，任何更改都由 SCM 跟踪。

# jquery - 使用 jQuery 折叠评论

> ID：11198790
> 
> 赞同：0
> 
> 时间：2012-06-25T23:21:28.987
> 
> 标签：jquery, wordpress, comments

在这里，我已经询问了当用户单击“显示评论”链接并让浏览器自动向下滚动到评论的位置时如何在我的 WP 安装中显示评论..： [评论 à la “点击显示”用 jQuery](https://stackoverflow.com/questions/11162124/comments-a-la-click-to-appear-with-jquery)

要了解我在说什么，请访问此链接： http: [//multiformeingegno.it/riflessioni/topserver-server-virtuali-made-italy/](http://multiformeingegno.it/riflessioni/topserver-server-virtuali-made-italy/)

在帖子的末尾有一个使评论出现的链接，问题是浏览器不会向下滚动到评论“位置”。我尝试了发布到我之前的 StrackOverflow 问题的解决方案，但不幸的是它不起作用（您可以看到它应用于上面发布的链接）..

你能帮助我吗？提前谢谢各位！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:30:37.637

浏览器没有向下滚动到评论位置的原因是因为您试图在它完全可见之前滚动到那里。您可以尝试做的一件事是在显示评论部分的同时为文档设置动画以向下滚动窗口的高度，如下所示：

```
jQuery('#showcomments').click(function(e) {
    jQuery('#comments').slideToggle('slow');
    jQuery('html,body').animate({
        scrollTop: '+=' + jQuery(window).height() + 'px'
    }, 'slow');
}); 
```

您还想更改`#showcomments`，因为您不再将其用作锚链接。我只想让它成为一个跨度：

```
<span id="showcomments">Show comments</span> 
```

希望这可以帮助！

# php - 通过 cookie 为搜索引擎重定向语言

> ID：11198793
> 
> 赞同：0
> 
> 时间：2012-06-25T23:21:47.520
> 
> 标签：php, apache, .htaccess, redirect, localization

我不想优化我的网站以使用多语言搜索引擎......我有这种语言结构：

英语 - example.com/en/
俄语 - example.com/ru/
格鲁吉亚语 - example.com/ge/

在第一次加入我的网站时，他会自动按您所在的国家/地区为您设置语言。

（对于谷歌和其他机器人的默认语言是英语）并且在我的网站上搜索的所有机器人都只搜索英文文本。

任何人都知道如何使用语言在搜索引擎中优化网站？

EG：[谷歌搜索示例结果](http://www.google.com/search?q=site%3abestinvest.ge)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:26:15.430

可能您的语言版本应该提供指向其他语言相同内容的链接，然后谷歌有机会发现其他版本存在。我个人也认为提供一种手动选择语言的方式是一种很好的形式。您不能总是相信来自浏览器的语言首选项。

另一种解决方案可能是提供一个站点地图，链接到每种语言的每篇文章；这样，谷歌至少也可以发现更多的东西存在。

# android - 在 android 设备上看到几个来自 rtsp 的视频？

> ID：11198796
> 
> 赞同：1
> 
> 时间：2012-06-25T23:21:49.437
> 
> 标签：android, android-videoview, rtsp, rtsp-client

我只是想知道我是否可以使用 rtsp 从网络一次看到多个视频？我正在尝试做一个类似于视频监控的 android 应用程序，我需要在屏幕上的某个时间看几个视频，我尝试将它与 MediaPlayer 一起使用，然后与 VideoView 一起使用，但在这两种情况下，有时视频都会出现，有时给我一个错误，无法播放一个或多个视频...我该怎么做才能让它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:48:27.273

Cruceo 说的是对的。最好以令人难以置信的分辨率和低比特率和帧率在一个流中复用（FFmpeg 真的很棒）所有流。然后创建一个程序来显示它并在您选择视点时进行放大。另一种选择是将视频流更改为 jpg 文件。这种方式更容易分配，因为您可以使用您的网络浏览器来显示它。使用您的 Web 浏览器，您可以使用 JavaScript（ProcessingJS 非常容易并且擅长此操作）来制作具有多种功能的图像查看器。

# jquery - jQuery 事件、回调和 $(this)

> ID：11198797
> 
> 赞同：1
> 
> 时间：2012-06-25T23:22:05.507
> 
> 标签：jquery

我有一个函数用作自定义事件的回调：

```
function checkNCreateTb() {
        var tbName = $(this).attr('href').replace('content','orders')
        /*...*/
} 
```

我使用**.on()**来处理将回调该函数的事件

```
$('#group-pills a').on('shown', checkNCreateTb) 
```

我需要在用户第一次单击 DOM 另一部分中的按钮时应用相同的功能。我解决了它，将**点击事件**附加到按钮并触发**显示的事件**。但是，我认为这看起来很丑陋，有没有更好的方法来获得相同的结果？

**编码：**

```
$('button#action-button').on('click',function() {
    $('#group-pills a:first').trigger('shown')
    $(this).off('shown') //removing the handler
})

//Create the DataTable if it wasn't already created
$('#group-pills a').on('shown', checkNCreateTb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:50:50.457

我会[`$.proxy`](http://api.jquery.com/jquery.proxy)用来创建一个`this`设置为特定值的函数引用：

```
$("#action-button").on("click", $.proxy(checkNCreateTb, $("#group-pills a:first"))); 
```

或者，或者，用于[`call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)设置`this`in的值`checkNCreateTb`：

```
$('#action-button').on('click',function() {
    checkNCreateTb.call($("#group-pills a:first"));
}); 
```

附带说明一下，您不需要在`#id`选择器前面加上标签名称，因为`id`它是尽可能具体的，并且 jQuery 将`document.getElementbyId`在后台使用。

# python - 访问函数的内部函数

> ID：11198798
> 
> 赞同：4
> 
> 时间：2012-06-25T23:22:22.303
> 
> 标签：python, python-2.7

```
def myFunc( a, b ):
  def innerFunc( c ):
    print c
  innerFunc( 2 )
  print a, b 
```

如何直接访问内部函数？我想要该函数的对象/地址的格式

```
<function innerFunc at 0xa0d5fb4> 
```

我尝试使用**myFunc._ *getattr* _( 'innerFunc' )**但这没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T23:38:32.350

由于该函数在函数调用之前不存在（并且仅在调用期间存在），因此您无法访问它。

如果闭包不重要，您可以直接从放置在外部函数内部的代码常量构建内部函数：

```
inner = types.FunctionType(myFunc.__code__.co_consts[1], globals()) 
```

函数的 const 值内的位置可能会有所不同......

此解决方案不需要调用`myFunc`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T23:29:20.540

您可以做的是在调用时返回函数或将其附加到其父级...

```
>>> def myFunc( a, b ):
...     def innerFunc( c ):
...         print c
...     innerFunc( 2 )
...     myFunc.innerFunc = innerFunc
...     print a, b
...
>>>
>>> myFunc(1,2)
2
1 2
>>> myFunc.innerFunc(3)
3
>>> 
```

尽管显然您可以使用特殊属性访问源代码，但该函数对象具有... `myFunc.func_code`尽管这似乎正在访问一些严肃的东西

```
>>> help(myFunc.func_code)
 Help on code object:
 class code(object)
  |  code(argcount, nlocals, stacksize, flags, codestring, constants, names,
  |        varnames, filename, name, firstlineno, lnotab[, freevars[, cellvars]])
  |  
  |  Create a code object.  Not for the faint of heart.
  | 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T23:23:26.797

你不能。内部函数在外部函数被调用之前不存在，并且在外部函数退出时被decref'ed，在这种情况下意味着它不再存在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T23:24:09.667

您不能`innerFunc`直接从 myFunc 外部调用，因为它位于`myFunc`的命名空间内。调用 innerFunc 的一种方法是`innerFunc`从`myFunc`

像这样：

```
def myFunc( a, b ):
  def innerFunc( c ):
    print c
  print a, b
  return innerFunc #return the innerFunc from here

x=myFunc(1,2)
x(3) # calling x now calls innerFunc 
```

# c - 在 C 中写入文件时减少磁盘访问次数

> ID：11198812
> 
> 赞同：1
> 
> 时间：2012-06-25T23:24:01.570
> 
> 标签：c, performance, io, disk-access

我正在编写一个多线程应用程序，到目前为止我有这个想法。我有一个`FILE*[n]`where`n`是在运行时确定的数字。我打开所有 n 个文件进行读取，然后多个线程可以访问读取它。每个文件数据的计算是等价的，即如果假设串行执行，那么每个文件将同时保留在内存中。

每个文件可以任意大，所以不应该假设它们可以加载到内存中。

现在在这种情况下，我想减少发生的磁盘 IO 的数量。如果有人可以为这种情况建议任何共享内存模型，那就太好了（我不知道我是否正在使用一个，因为我对事物的实现方式知之甚少）。我不确定我应该如何实现这一点。换句话说，我只想知道实现这种场景的最有效模型是什么。我正在使用`C`.

编辑：更详细的场景。

实际问题是我对 n 个文件中包含的数据有 n 个布隆过滤器，一旦文件中的所有元素都插入到相应的布隆过滤器中，我就需要进行成员资格测试。由于成员资格测试是数据文件的只读过程，因此我可以从多个线程读取文件，并且可以轻松并行化此问题。现在有数据的文件数量相当大（大约 20k 并注意文件数量等于布隆过滤器的数量）所以我选择生成一个线程来测试布隆过滤器，即每个布隆过滤器都有自己的线程，并且将一个一个地读取所有其他文件，并根据布隆过滤器测试数据的成员资格。在这种情况下，我想尽量减少磁盘 IO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:39:37.903

开始时使用 mmap() 函数将文件映射到内存中，而不是打开/读取 FILE*。之后产生读取文件的线程。以这种方式，操作系统缓冲内存中的访问，仅在缓存变满时执行磁盘 io。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:44:11.257

如果您的程序是多线程的，则所有线程都共享内存，除非您采取措施创建线程本地存储。您不需要直接使用 o/s 共享内存。最小化 I/O 的方法是确保每个文件尽可能只读取一次，类似地，结果文件每个只写入一次。

你如何做到这一点取决于你正在做的处理。

f 每个线程负责完整地处理一个文件，然后线程简单地读取文件；你不能再减少 I/O 了。如果一个文件必须由多个线程读取，那么您应该尝试对该文件进行内存映射，以便所有相关线程都可以使用它。如果您使用的是 32 位程序并且文件太大而无法全部放入内存中，则不一定可以进行内存映射。然后你需要弄清楚不同线程将如何处理每个文件，并尽量减少不同线程必须重新读取文件的次数。如果您使用的是 64 位程序，您可能有足够的虚拟内存来通过内存映射 I/O 处理所有文件。您仍然希望将访问数据的次数保持在最低限度。类似的概念适用于输出文件。

# wpf - 从 WPF 画布绘制位图

> ID：11198813
> 
> 赞同：1
> 
> 时间：2012-06-25T23:24:04.747
> 
> 标签：wpf

我有一个包含图像的画布，其中显示了现有的 BMP。我在画布上绘制矩形并将它们添加到 Children 集合中。当我单击保存时，我想更新底层 BMP 文件。

以下代码有效，但绘制到 BMP 的矩形比我绘制的要小得多。我猜坐标有一些差异？也许我不应该使用 System.Drawing？

```
 using (Graphics g = Graphics.FromImage(image))
        {
          g.CompositingMode = System.Drawing.Drawing2D.CompositingMode.SourceCopy;

          foreach (var child in canvas.Children)
          {
            if (child is System.Windows.Shapes.Rectangle)
            {
              var oldRect = child as System.Windows.Shapes.Rectangle;

              // need to do something here to make the new rect bigger as the scale is clearly different
              var rect = new Rectangle((int)Canvas.GetLeft(oldRect), (int)Canvas.GetTop(oldRect), (int)oldRect.Width, (int)oldRect.Height);
              g.FillRectangle(Brushes.Black, rect);
            }
          }
          ... code to save bmp 
```

欢迎所有建议！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:01:05.043

尝试使用[`System.Windows.Media.Imaging.RenderTargetBitmap`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap)类（[这里是一个例子](http://msdn.microsoft.com/en-us/library/aa969775)）。
[Wpf 使用与设备无关](http://msdn.microsoft.com/en-us/library/ms748373.aspx)的图形，因此您必须补偿 DPI：

```
RenderTargetBitmap bmp = new RenderTargetBitmap((int)Canvas1.Width, (int)Canvas1.Height, 96, 96, PixelFormats.Default);
bmp.Render(Canvas1); 
```

从第三个链接：

> 有两个系统因素决定了屏幕上文本和图形的大小：分辨率和 DPI。分辨率描述了屏幕上出现的像素数。随着分辨率越来越高，像素越来越小，导致图形和文本看起来越来越小。当分辨率更改为 1600 x 1200 时，显示在设置为 1024 x 768 的显示器上的图形会显得更小。

# multicast - 多播是所有以太网系统固有的吗？

> ID：11198817
> 
> 赞同：0
> 
> 时间：2012-06-25T23:24:33.927
> 
> 标签：multicast

多播是每个以太网系统固有的吗？

我正在尝试做的是通过以太网向许多设备发送代码（无需向每个设备发送相同的“消息”）。我不熟悉多播系统的设计，如果这是一个蹩脚的问题，请原谅我。我确实知道为使用多播保留了 IP 范围，但这是否意味着如果我将接收设备设置为这些 IP，它们都会收到相同的“消息”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:33:30.617

IGMP维基[百科](http://en.wikipedia.org/wiki/Internet_Group_Management_Protocol)页面有很多很好的信息。你的问题有点超出stackoverflow的范围。

多播使用 IP，但我不会说它是每个以太网系统所固有的，因为所有网络基础设施都需要正确配置以允许 IGMP 订阅。

您没有**将**客户端设置为多播 IP。您的客户端订阅了多播 ip，您的路由器会看到此订阅并将其传递给该设备。维基百科页面将为您指明正确的方向，但正如我之前所说，它有点超出了堆栈溢出的范围。

# objective-c - 在 NSUserDefaults 中存储 Base 64 字符串

> ID：11198818
> 
> 赞同：0
> 
> 时间：2012-06-25T23:24:35.103
> 
> 标签：objective-c, ios, nsstring, nsuserdefaults

我正在编写一些代码，这些代码是从不再与我公司合作的程序员那里继承而来的。在此代码中，一些图像被编码为 base 64 字符串，然后存储`NSUserDefaults`在`NSDictionary`. 我遇到的问题是，如果应用程序已被终止（即通过多任务 UI），包含数据的字典似乎没有加载。

Base 64 字符串是否被视为 Objective-C 中的属性列表对象？

我意识到这***不是***将数据存储在磁盘上的理想解决方案，但这是我在不久的将来必须使用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:26:01.697

它们是否在应用程序的 plist 中显示为`string`或`data`？如果是后者，它们是编码`NSData`对象；尝试使用`objectForKey:`然后`-[NSImage initWithData:]`。

# objective-c - 如何将图形创建的静态 UITableView 传输到实现文件

> ID：11198820
> 
> 赞同：0
> 
> 时间：2012-06-25T23:24:41.323
> 
> 标签：objective-c, ios, xcode, xcode4.2

我已经通过故事板创建了一个静态 UITableView，我希望能够通过 UITableViewController .h 和 .m 文件来控制它。一切都在情节提要中设置，但是如何将数据（部分，每个部分中的行数）传输到实现文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:35:51.687

如果您想更改代码中界面元素（例如 ）的内容或属性，`UILabel`您`UIImageView`应该`IBOutlets`为它们创建并连接它们。
由于这是一个没有动态单元格的静态表，因此没有任何问题。

而且您不需要`UITableViewDataSource`静态表的方法。只需从实现文件中删除这些方法。

# javascript - jQuery 自动完成 > 选择 > 链接

> ID：11198822
> 
> 赞同：7
> 
> 时间：2012-06-25T23:24:54.067
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我已经实现了这段代码，我喜欢它的直接性，因为我计划将 ALOT 添加到源 - 但是对于我的生活，我无法弄清楚如何将选定的添加为链接。

EG > Begin Typing > Autofill works > Select > Go to that URL

**当前代码：**

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script>
  $(document).ready(function() {
    $("input#autocomplete").autocomplete({
    source: ["NYC", "LA", "Philly", "Chitown", "DC", "SF", "Peru"]
});
  });
  </script>
</head>
<body style="font-size:62.5%;">

<input id="autocomplete" />

</body>
</html> 
```

我在这里找到了一些关于此的讨论，但没有任何代码建议有效。如何添加与上述值关联的 URL；如果我能保持相同的语法并接近刚刚添加的值，我会很高兴；例如：“秘鲁”www.peru.com

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T23:28:44.923

您可以为源数组中的每个对象添加一个`url`属性，然后`window.location`在用户选择一个项目时设置为该 URL：

```
$(document).ready(function() {
    $("input#autocomplete").autocomplete({
        source: [
             { value: "NYC", url: 'http://www.nyc.com' }, 
             { value: "LA", url: 'http://www.la.com' },
             { value: "Philly", url: 'http://www.philly.com' },
             { value: "Chitown", url: 'http://www.chitown.com' },
             { value: "DC", url: 'http://www.washingtondc.com' },
             { value: "SF", url: 'http://www.sanfran.com' },
             { value: "Peru", url: 'http://www.peru.com' }
        ],
        select: function (event, ui) {
            window.location = ui.item.url;
        }
    });
}); 
```

# javascript - 如何在不弄乱 IE9 的情况下将 Ajax 链接标记为“已访问”

> ID：11198825
> 
> 赞同：0
> 
> 时间：2012-06-25T23:25:08.670
> 
> 标签：javascript, ajax, html, internet-explorer

我有一个充满链接的页面，文章中的每个 AJAX 都基于一个 ID。我正在尝试使用 history.pushstate 将文章标记为“已访问”。

我做了什么：

我为每个链接添加了一个带有文章 ID 的哈希：

```
<a href="#ID=123" onclick="ajaxLoad('123')">Title</a> 
```

在我的 JS 函数中，我有类似的东西：

```
if (window.history && window.history.pushState)
{
    window.history.pushState({articleID:"123"}, "Title",  "#ID=123");
} 
```

无论如何，我的 href 中的值都没有使用，我只是把它放在那里，这样链接就会得到“访问”的 CSS。这在大多数浏览器中运行良好，当然 IE9 除外。由于 IE9 不支持 window.history，我从没想过它会起作用。

但是，我的问题是在 IE 中单击文章会更改 URL 以在其上附加哈希值，这会污染历史记录（现在必须单击很多次才能返回）。

我知道我可以摆脱哈希并且仍然可以使用后退按钮（在 IE 之外），但我实际上更感兴趣的是确保我的链接被标记为“已访问”。无论如何都可以在不损害 IE9 行为的情况下将 ajaxy 链接标记为“已访问”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:52:51.593

尝试将此添加到您的`onclick`处理程序：

```
if (event.preventDefault) event.preventDefault(); else event.returnValue = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:46:09.240

只需`return false;`来自您的`onclick`处理程序。

# ios - 不同构建配置的不同包标识符

> ID：11198826
> 
> 赞同：42
> 
> 时间：2012-06-25T23:25:18.670
> 
> 标签：ios, xcode

我现在正在开发一个应用程序，我们正在尝试针对暂存环境和生产环境进行一些测试。自然，我创建了“Stage”和“Prod”构建配置来在两者之间切换，但我的客户希望将两者并排安装，以便他们可以轻松地在两个环境之间切换。到目前为止，我一直在通过使用不同的包标识符和包显示名称维护我的代码分支来做到这一点，因此它们可以并排安装和测试。不过，我开始怀疑是否有更简单的方法可以做到这一点。有没有一种方法可以定义自定义构建设置，根据构建配置为其赋值，然后将其附加到捆绑标识符的末尾？

就像是...

```
BUNDLE_SUFFIX
    TEST
    STAGE   
    PROD    ".PROD" 
```

...然后将我的 Bundle Identifier 设置为`com.blah.blah$(BUNDLE_SUFFIX)`. 然后所有使用 PROD 配置的构建将自动获取新的包 ID，我不必一直同步分支。这种事情甚至可能吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2015-12-17T10:59:58.383

In **Xcode 7**:

this can be done easily using the packaging configuration in build setting

[![enter image description here](../Images/d79af7f8fc065578da846ad1070354c9.png)](https://i.stack.imgur.com/bfMik.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-11-22T17:56:47.013

是的，你在正确的轨道上。这是一个很好的教程： http: [//nilsou.com/blog/2013/07/29/how-to-have-two-versions-of-the-same-app-on-your-device/](http://nilsou.com/blog/2013/07/29/how-to-have-two-versions-of-the-same-app-on-your-device/)

# c# - Windows 上的 dll 和 macintosh 上的 dylib

> ID：11198827
> 
> 赞同：0
> 
> 时间：2012-06-25T23:25:21.727
> 
> 标签：c#, objective-c, xcode, bundle, dylib

我加入了一个使用某些框架的 Objective-C 用 xcode 编写的项目。该项目旨在为 Unity3d 的 windows 和 Macintosh 版本添加 Wii-mote 功能。

我的问题是我应该如何获得一个反映 Macintosh .bundle/.dylib 功能的 windows dll？

我是否需要开始将代码从 Objective-C 翻译成 C#？或者，我是否需要从头开始查找/编码我自己的 windows .dll？或者，是否有与 windows 和 Macintosh 兼容的库类型？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:23:28.177

没有与这两个系统兼容的库类型。如果您在 Mac 上使用 Mono 来运行 C# 代码，则可能在两个系统上都使用 C# 库，但是您已经声明它是一个 Objective-C 项目，所以我猜这个选项已经过时了。

所以是的，您需要在 Windows 端以您选择的语言编写自己的 .dll。

# clojure - 如何启动一个可以访问 jar 的 clojure repl

> ID：11198828
> 
> 赞同：8
> 
> 时间：2012-06-25T23:25:24.007
> 
> 标签：clojure, leiningen

我是clojure的新手。我有一个 jar 文件，我想在 clojure repl 中使用，但我没有使用 leiningen 2 这样做。

我尝试将 jar 文件放在 src/myjar.jar 和 src/org/mydomain/myjar.jar

当我运行 lein repl 时，我收到错误消息，指出 leiningen 找不到我的工件，以及对我不理解的可重复性页面的引用。

这里是我的project.clj（实名myjar）

```
(defproject cljliveordead "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [org.allen.temporalintervalrelationships/time "0.2" :extension "jar"]]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T13:54:03.740

您可以使用 lein-localrepo 插件来使用本地 jar。将此行添加到您的 project.clj

```
:plugins [[lein-localrepo "0.4.0"]] 
```

然后使用将jar安装到本地存储库

```
lein localrepo install <path-to-jar> org.allen.temporalintervalrelationships/time 0.2 
```

您可以通过运行检查文件是否已安装，`lein localrepo list`并检查 lein 是否可以使用`lein deps`. 如果一切顺利，那么您可以开始使用`lein repl`.

Leiningen 不喜欢本地 jar，因为它的目标是[可重复构建](https://github.com/technomancy/leiningen/wiki/Repeatability)。如果这是一个使用第三方闭源 jar 的真实项目，那么最好的办法是将其安装在本地 Nexus 存储库中，并将对该存储库的引用添加到您的项目中。

但是，对于您要实现的目标，这一切似乎有点重。如果您只想在 REPL 中使用 jar，那么创建一个像这样的简单项目

```
(defproject clojure-time "0.1.0-SNAPSHOT"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [com.cemerick/pomegranate "0.0.13"]]) 
```

并使用[pomegranate](https://github.com/cemerick/pomegranate)库手动将 jar 添加到您的类路径中

```
(require '[cemerick.pomegranate :as p])
(p/add-classpath "jsr-310-ri-0.6.3.jar")
(javax.time.Instant/now) 
```

和玩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:14:02.637

骇人听闻的方法是将其放入`/proiject/path/lib/`，而“正确”的方法是：

*   将它的依赖项添加到您的项目中
*   运行 lein deps 它将打印将 jar 安装到本地 maven repo 的命令
*   运行命令 leiningen 为您提供 jar 的路径
*   再次运行 lein deps

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T14:42:50.830

我在很多应用程序中使用 clojure-csv，因此请确保引用 clojure-csv 的模块能够使用它构建，这就是我所做的：

0) 跑`lein new bene-csv`

1) 将此添加到 project.clj（输入 lein new bene-csv 后）。相关的行是`[clojure-csv/clojure-csv "1.3.2"]`，但为了很好的例子，向您展示整个 project.clj 是有意义的。

```
(defproject bene-csv "1.0.4-SNAPSHOT"
  :description "A csv parsing library"
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [clojure-csv/clojure-csv "1.3.2"]
                 [util "1.0.2-SNAPSHOT"]]

  :aot [bene-csv.core]
  :omit-source true) 
```

2) 确保我的 bene-csv/src/bene_csv/core.clj 引用了 clojure-csv。

```
(ns bene-csv.core
  ^{:author "Charles M. Norton",
    :doc "bene-csv is a small library to parse a .csv file.
        Created on March 8, 2012"}
  (:require [clojure.string :as cstr])
  (:require [util.core :as utl])
  (:use clojure-csv.core)) 
```

最后，我运行了这些命令，以便我的主项目可以引用 bene-csv 的函数和定义。

```
lein deps
lein install 
```

# computer-vision - 如何使用带有词袋直方图的 libsvm

> ID：11198830
> 
> 赞同：0
> 
> 时间：2012-06-25T23:25:30.043
> 
> 标签：computer-vision, histogram, classification, svm, libsvm

我设法将图像转换为视觉词的直方图表示。它可能很简单，如下所示（标准化）：

```
[0.1, 0.2, 0, 0.1, 0, 0.05, 0.3, 0, 0, 0, 0.2, 0.05, 0] 
```

加起来 1

现在，如果我对上面的直方图有很多不同的迭代，我想用 libsvm 对其进行分类。但我被困在这里，我知道 svmtrain 的语法：

```
model=svmtrain(label,training_matrix) 
```

训练矩阵应该只是我所有直方图的 amxn 矩阵，但是标签呢？我知道它应该是 +1 或 -1，但负面图像来自哪里？training_matrix 中的所有内容都应该是代表班级的正面图像。

将每个直方图视为一个单独的实例我错了吗？相反，如果我将每个视觉单词都视为一个实例，那么我会从代表类的单词中得到否定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T17:38:17.340

我假设，您的课程是具有视觉相似性的图像组。然后：

*   每个图像都是一个实例
    *   图像直方图只是转换/缩减的图像数据，因此每个图像直方图也是一个实例
*   直方图中的每个 bin 都是一个特征

我建议，您将直方图转换为文本文件，并使用二进制工具和[此描述](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)进行第一次评估。

但是，我想，如果颜色/强度不是对象的主要区别特征，仅直方图不会给出好的结果。

如果您有小图像，图像上只有对象而没有太多背景，更好的快速解决方案是将图像缩小到例如 32x32 并使用像素值作为特征。

# php - 设置 RESTful Web 服务

> ID：11198836
> 
> 赞同：1
> 
> 时间：2012-06-25T23:26:00.340
> 
> 标签：php, ajax, web-services, api, rest

我刚刚开始使用 REST，并开始按照这个设计模型构建我的第一个应用程序。据我所知，这个想法是构建您的服务，就像您的网站本身就是消费者的 api 一样。

这对我来说很有意义，因为我的 Web 应用程序执行了很多 AJAX 调用，但是对每个请求进行身份验证以避免使用会话似乎有点浪费。作为 REST 设计过程的一部分，这只是我必须接受的吗？

此外，进行 ajax 调用工作正常，但是说，我只需要显示用户配置文件的视图，这现在是否意味着我还需要对我的 api 进行 curl 调用以提取这些数据。此时我知道我在内部工作，所以甚至需要身份验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:34:55.320

一些备注：

虽然您可以将整个应用程序设置为具有 REST*接口*，但您应该将其设置为仍然能够在内部调用它。从 HTTP 调用它并通过 HTTP 获取结果只是输入处理和输出渲染。所以，如果你把这些问题分开，你会得到一个流程：`input-processing -> method call -> data return -> data rendering`. 第一个和最后一点的剃须，你还剩下什么？返回数据的函数调用，您可以在代码中使用。将“外部”函数调用转换为“内部”函数调用并将“内部”数据呈现为“外部”（xml、json、html，无论您想要什么）的单独功能，使您的应用程序高效，并且仍然完全支持 REST。

如果您允许外部呼叫，则需要进行身份验证，即使您不“告诉”其他用户数据可以以某种方式检索，它仍然很容易被发现。我不知道您*为什么*不想使用会话进行此身份验证（这很可能发生在前面提到的从“外部”调用到内部调用的转换中。我不会要求“不使用会话”，但是没有理由您不能允许多种身份验证方法（会话、每个请求的重新身份验证、令牌等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:33:37.117

通常我更喜欢生成一个可以使用标准 PHP 调用的接口，然后添加一个接口来添加身份验证和 RESTful 访问。因此，您可以访问例如：

```
http://example/api/fetchAllFromUsers?auth-key=XXXXX 
```

翻译为：

```
$internalInterface = new Api();
$internalInterface->fetchAllFromUsers(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T23:35:29.023

不是每次都进行身份验证，而是保存一个标识您的会话的状态块（例如，cookie），然后使用它。然后它成为 GET 的参数（使用`?name-value`语法）或可以成为 URI 本身的一部分，例如

```
 http://example.com/application/account/ACCTNO/TOKEN 
```

分别在哪里`ACCTNO`和`TOKEN`标识帐户和真实会话。

起初这可能看起来有点不稳定，但这意味着您的应用程序随着它变得越来越大，从不需要复杂的会话状态负载平衡等等——一个简单的代理方案就可以正常工作。这大大降低了架构的复杂性。

# ruby-on-rails - 独角兽在旧版本目录中重新启动

> ID：11198840
> 
> 赞同：2
> 
> 时间：2012-06-25T23:26:34.153
> 
> 标签：ruby-on-rails, rvm, capistrano, unicorn

我有一个似乎工作正常的 capistrano 部署，但是在将 USR2 信号发送到独角兽进程后，它会在旧的发布文件夹中重新启动。这有点类似于这里的问题：

[使用 USR2 重启 Unicorn 似乎不会重新加载 production.rb 设置](https://stackoverflow.com/questions/9388074/restarting-unicorn-with-usr2-doesnt-seem-to-reload-production-rb-settings)

但是，我的 working_directory 被设置为一个字符串，我没有对它做任何花哨的事情。

我的生产独角兽配置：

```
worker_processes 4
working_directory "/u/apps/dragonfly-application/current" # available in 0.94.0+
listen "/tmp/.sock", :backlog => 64
timeout 30
pid "/u/apps/dragonfly-application/shared/pids/unicorn.pid"
stderr_path "/u/apps/dragonfly-application/shared/log/unicorn.stderr.log"
stdout_path "/u/apps/dragonfly-application/shared/log/unicorn.stdout.log"

preload_app true
GC.respond_to?(:copy_on_write_friendly=) and
  GC.copy_on_write_friendly = true

before_fork do |server, worker|
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.connection.disconnect!

    old_pid = '/u/apps/dragonfly-application/shared/pids/unicorn.pid.oldbin'
      if File.exists?(old_pid) && server.pid != old_pid
        begin
          Process.kill("QUIT", File.read(old_pid).to_i)
        rescue Errno::ENOENT, Errno::ESRCH
          # someone else did our job for us
        end
      end

end

after_fork do |server, worker|
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.establish_connection
end 
```

还有我的 capistrano 部署：

```
set :application, "dragonfly-application"
set :repository, "git@github.com:Rodeoclash/Nile.git"
set :scm, :git
set :user, "user"
set :rvm_ruby_string, "1.9.3@dragonfly-application"
set :bundle_flags, "--deployment --binstubs"

server "202.2.94.221", :app, :web, :db, :primary => true

before 'deploy:setup', 'rvm:install_rvm'
before 'deploy:setup', 'rvm:install_ruby'

after "deploy:finalize_update", "db:config"
after "deploy:restart", "deploy:cleanup" # clean up old releases on each deploy
after "deploy", "deploy:migrate"
after 'deploy:update_code', 'symlink_uploads'

load 'deploy/assets'

namespace :db do

  # copy database.yml into location
  task :config, :except => { :no_release => true }, :role => :app do
    run "cp -f #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end

  desc "reload the database with seed data"
  task :seed do
    run "cd #{current_path}; bundle exec rake db:seed RAILS_ENV=#{rails_env}"
  end

end

task :symlink_uploads do
    run "ln -nfs #{shared_path}/uploads  #{release_path}/public/uploads"
end

require "bundler/capistrano"
require 'capistrano-unicorn'
require "rvm/capistrano" 
```

我不知道在哪里看。如果服务器完全停止然后重新启动，它将使用正确的文件夹，但使用 USR2 信号它不会使用符号链接中的正确路径。就像它在加载配置时解析符号链接并且在代码重新启动之前不会再次解析它。

我正在使用 RVM。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T00:29:38.673

在我的一个 Rake 任务中引用了“Rails.root”，这导致了符号链接的解析。用对共享目录的硬编码引用替换它并且它工作。

# unix - 在 Unix 上进行测试的 Prolog 脚本

> ID：11198843
> 
> 赞同：1
> 
> 时间：2012-06-25T23:27:32.953
> 
> 标签：unix, prolog, test-suite

我有一个 prolog 脚本，使用 swi-prolog 在 Windows 上运行没有任何问题，但是当我在 Linux 上运行脚本时，出现与测试套件相关的错误：

```
ERROR: /home/test_suite.pl:12:
catch/3: Undefined procedure: begin_tests/1 
```

在哪里

```
:- begin_tests(reason). 
```

表示文件 test_suite.pl 中测试集的开始。如果我运行不包括 test_suite.pl 文件的脚本，那么脚本运行没有任何问题。

## 不知道为什么 Unix 不理解测试的开始 (begin_tests/1) 和结束 (end_tests/1)？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T01:40:58.127

你的电脑上安装了测试库吗？plunit 没有与 swi-prolog 捆绑在一起。试试这里的说明 - [http://onek.posterous.com/how-to-build-plunit](http://onek.posterous.com/how-to-build-plunit)

如果已安装，您是否包含了测试库？

# c# - 多键字典，其中只需要 1 个键即可检索对象

> ID：11198845
> 
> 赞同：2
> 
> 时间：2012-06-25T23:27:36.860
> 
> 标签：c#, data-structures, collections, dictionary, hashtable

互联网上有几个地方谈论拥有多键字典，例如：

[c#中的多键字典？](https://stackoverflow.com/questions/1171812/multi-key-dictionary-in-c)

或者

[C# 中的多键字典（另一种）？](https://stackoverflow.com/questions/1171913/multi-key-dictionaries-of-another-kind-in-c)

我正在寻找一个多键字典，只要我提供一个键，我就可以检索我正在寻找的对象。换句话说，如果我在哪里拥有：

```
 // multyKeyDictionary = instance of a multikeydictionary 
 multyKeyDictionary.add(key1, key2, someObject); 
```

那么我希望能够将 someObject 检索为：

`multyKeyDictionary[key1];`或者`multyKeyDictionary[key2];`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T23:31:31.283

好吧，我不明白您为什么不使用常规字典并使用不同的键添加两次对象。

```
Dictionary<string, object> dict = new Dictionary<string, object>();
dict.Add("key1", obj);
dict.Add("key2", obj);

// dict["key1"] == dict["key2"] 
```

# c# - 属性 Lambda 表达式获得一个额外的 Convert(p=>p.Property)

> ID：11198847
> 
> 赞同：4
> 
> 时间：2012-06-25T23:27:39.983
> 
> 标签：c#, lambda

我有一个问题，在某些情况下（似乎是属性类型为 bool 的地方）用于引用属性的 lambda 表达式。我用它来获得它的名字；问题是有时表达式被修改为具有附加的 Convert() 函数。

例如

```
GetPropertyName<TSource>(Expression<Func<TSource, object>> propertyLambda) {...}

var str = GetPropertyName<MyObject>(o=>o.MyBooleanProperty); 
```

发生了什么，propertyLambda 看起来不像`Convert(o.MyBooleanProperty)`我`o.MyBooleanProperty`所期望的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:12:21.787

被`Convert`添加，因为`o.MyBooleanProperty`是 a `bool`，但结果必须是一个对象。如果你在源对象类型和结果类型中都使你的方法通用，那么就不会有`Convert`：

```
GetPropertyName<TSource, TResult>(Expression<Func<TSource, TResult>> propertyLambda) 
```

不幸的是，这意味着您必须`TResult`明确指定：

```
GetPropertyName<MyObject, bool>(o => o.MyBooleanProperty) 
```

如果您不想这样做，则必须找到某种方法来推断`MyObject`或避免需要它。

例如，如果当前对象是`MyObject`（并且您在实例方法中），您可以将代码更改为`Func<TResult>`：

```
GetPropertyName(() => this.MyBooleanProperty) 
```

或者您可以包含另一个类型`TSource`的参数来帮助您推断类型：

```
GetPropertyName(myObject, o => o.MyBooleanProperty) 
```

# regex - AWK - 当 RS 是正则表达式时使用 RT 会给我下一场比赛的 RS 而不是当前比赛

> ID：11198851
> 
> 赞同：2
> 
> 时间：2012-06-25T23:28:16.177
> 
> 标签：regex, awk, grep

我正在尝试使用 gawk 从日志中提取段落，并且在我想要包含它找到的记录分隔符之前它工作得很好。

这是命令：

```
gawk --re-interval 'BEGIN{RS="[0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}.[0-9]{1,6} \\[[A-Z]*\\]";} /983a99f8-bec6-11e1-80dd-059a821d0b73/ {print $0}' full.log 
```

如果我添加 print RT, $0，它会打印下一个匹配的 RT，而不是当前匹配。

这是一些示例文本

```
9:08:06.899627 [DEBUG] <0.30065.3>@agent:1565 Recs to loop through:  [{agent_state,"OpenAcdAgent43","Jeff",
                            undefined,wrapup,
                            {call,"983a99f8-bec6-11e1-80dd-059a821d0b73",
                                voice,
                                {"8501112234","MorganGrimes"},
                                "9201",<0.30392.3>,[],
                                {client,"8221314","DCF",[],1340629596,
                                    1340629596},
                                [creole_general],
                                <0.30398.3>,outband,inband,inbound,10},
                            1340629658,undefined,"Default",1340629658
9:08:06.899707 [INFO] <0.168.0>@cpx_monitor:649 Down message for reference #Ref<0.0.16.137225> of <0.30064.3> due to normal 
```

我想要 9:08:06.899627 [DEBUG] 能够做的是在我的比赛前添加 9:08:06.899627 [DEBUG] 但 RS 将其取消。我得到 9:08:06.899707 [INFO] 代替。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T23:41:23.390

那是因为记录分隔符出现在记录的**末尾**。`9:08:06.899627 [DEBUG]`空记录的结尾也是如此`9:08:06.899707 [INFO]`，与您的 GUID 正则表达式匹配的记录的结尾也是如此。

您需要保存上一个`RT`并输出保存的。

```
gawk --re-interval 'BEGIN{RS="[0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}.[0-9]{1,6} \\[[A-Z]*\\]";} /983a99f8-bec6-11e1-80dd-059a821d0b73/ {print savedRT, $0} {savedRT = RT}' full.log 
```

# vb6 - 完整编译时vb6用户定义类型未定义错误

> ID：11198853
> 
> 赞同：6
> 
> 时间：2012-06-25T23:28:26.907
> 
> 标签：vb6

我有一些很久没有编译的vb6代码。最后一次编译正在生产中。现在，当我进行完整编译时，出现错误“**未定义用户定义的类型”。**我确定**缺少参考**。 **但是没有代码是高亮的**。而且我似乎无法找到可能丢失的参考。

关于我可以做些什么来找到丢失的参考资料的任何线索都会非常有帮助。

谢谢！

戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:24:10.073

在它让我发疯之前我已经发生过这种情况！但后来我发现了这个：

  [http://support.microsoft.com/kb/190197](http://support.microsoft.com/kb/190197)  

在打开二进制兼容性进行编译时发生。上述解决方案建议关闭二进制兼容性并重新编译 - 然后将突出显示缺少的引用。

您可以尝试的其他步骤：

*   而不是为所有内容关闭 BC，而是寻找最近更改的内容
*   搜索 C: drive and dev 文件夹并删除所有 *.oca 文件
*   还要在 vbp 文件中查找任何 oca 引用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T23:36:25.620

您需要确保在“参考”对话框中选中了相应的项目。这在代码之外，它们列在 VBP 文件（[文本文件](http://msdn.microsoft.com/en-us/library/aa716294%28v=vs.60%29)）中。

**编辑**更正了参考存储。谢谢马克[J](https://stackoverflow.com/users/15639/markj)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T13:52:59.107

您是否仍在使用进行原始编译的同一台机器和/或使用相同的操作系统？

如果答案是否定的，那么 VB6 或类似版本有可能链接到在 Win7 或更高版本中不再可用的引用，如果您使用的是现代版本的工作室，这也可能包括编译器。

由于代码也在 VB6 中，如果您使用任何外部商业控件，并且如果不在同一台机器上，那么如果您没有通过库移植，您也会丢失这些链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T15:51:25.473

确保所有对象类型都拼写正确。像拼写这样的简单错误`Variant` `Varient`也可能导致此错误。

# javascript - js jquery幻灯片

> ID：11198855
> 
> 赞同：0
> 
> 时间：2012-06-25T23:28:34.660
> 
> 标签：javascript, jquery, slideshow

我一直在使用 jquery 幻灯片，但是当我包含 jquery newsticker（向右滚动的文本）时，幻灯片或菜单 javascript 弹出窗口（或两者）都不起作用。例如，如果我把

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

在幻灯片脚本的正上方，幻灯片可以正常工作，但其他内容不能。如果我将代码放在 head 标签内，则相反。这是非常不寻常的（而且不合逻辑），但我已经被这些东西困扰了 6 个小时。我确信这是 jquery 的唯一链接，除了与菜单一起使用的prototype.js。但是，我只是在编辑网站，所以我不知道一切是如何运作的。

有谁知道可能是什么解决方案？

我可以处理的另一种方法是使用 javascript 幻灯片（但没有 jquery）。但是我找不到我想要的示例，它可以在没有 jquery 的情况下工作。

我需要的是这个 - php 从一个文件夹中获取所有图像，并从数据库中获取数据（链接）。每个图像实际上是一个链接，所有图像都显示在一个 div 内。

```
<div id="slideshow">
  <a href="link"> <img src="src.jpg"> </a>
  <a href="link"> <img src="src.jpg"> </a>
  <a href="link"> <img src="src.jpg"> </a>
</div> 
```

div id 幻灯片是 javascript（同样，不是 jquery）用来知道要循环什么（淡入淡出动画）的内容。有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:05:07.293

其他库（如原型和 mootools）也共享相同的“$”别名，因此在同一页面中组合时它们会发生冲突。

您将需要使用 jQuery.noConflict() 来解决。

在 jQuery 加载调用后立即在脚本标记中：

```
 jQuery.noConflict(); 
```

现在为了继续在您的代码中使用“$”，请将代码包装在：

```
 jQuery(function($){/* $ argument passes use of $ alias for jQuery into function*/

      $(selector).hide() ; /* can use normal jQuery syntax inside this function*/

  }); 
```

[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

# ruby-on-rails - Heroku *.js 不是预编译错误

> ID：11198856
> 
> 赞同：11
> 
> 时间：2012-06-25T23:28:38.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline, cedar

我在 Heroku Cedar 堆栈上使用 Rails，它在编译资产时没有引发任何问题，但随后出现 500 内部服务器错误：

```
2012-06-25T23:22:59+00:00 app[web.1]: ActionView::Template::Error (bootstrap-datepicker.js isn't precompiled): 
```

知道可能是什么原因造成的吗？这是我包含的 javascript 文件（除了我在本地下载它）[https://github.com/eternicode/bootstrap-datepicker/blob/master/js/bootstrap-datepicker.js](https://github.com/eternicode/bootstrap-datepicker/blob/master/js/bootstrap-datepicker.js)

我将它包含在我的 application.html.erb 中，如下所示：

```
<%= javascript_include_tag "bootstrap-datepicker" %> 
```

是因为它不是咖啡脚本文件吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-26T00:43:20.490

我想到了。我必须将它添加到 config.assets.precompile 中的 production.rb

在 production.rb 中，我将它添加到我的 config.assets.precompile 中：

```
config.assets.precompile += %w( jquery.dataTables.min.js jquery-ui-1.8.21.custom.min.js jquery-ui-1.8.21.custom.css bootstrap-datepicker.js fullcalendar.js) 
```

# python - PyTables 写入速度不够快

> ID：11198860
> 
> 赞同：1
> 
> 时间：2012-06-25T23:28:55.663
> 
> 标签：python, optimization, numpy, cython, pytables

我目前在尝试让 PyTables 更快地将数据写入自身时遇到了麻烦。让我解释一下我目前的情况。

现在我有通过多播传入的数据，数据率很高。我有一个解析器和一个数据结构，可以将数据散列到字典中，这些字典被发送并存储在 PyTables 中。

我有一个线程接受这个字典，它的键是和 id，它的值是应用于 id 的数据实例数组。线程遍历键值对并将数据添加到与 id 对应的表中。

这是我当前的实现，到目前为止，字典数组充当了随着时间线性增加的缓冲区。这是我明显的问题。该代码显示了编写器线程为写入数据而进行的常量循环。

```
def acceptDict():
    while True:
        while not dicts.empty():
            lock.acquire()
            dictInst = dicts.get()
            print dicts.qsize()
            for instrument, dataArray in dictInst.iteritems():
                if instrument in tableExists:
                    tableD = openFi.getNode("/t" + str(instrument), "direct")
                else:
                    tableExists[instrument] = 1
                    group = openFi.createGroup("/", "t" + str(instrument), str(instrument))
                    tableD = openFi.createTable(group, "direct", Tick, "direct")
                for i in dataArray:
                    tableD.row['timestamp'] = i[0]
                    tableD.row['side'] = i[1]
                    tableD.row['level'] = i[2]
                    tableD.row['price'] = i[3]
                    tableD.row['quant'] = i[4]
                    tableD.row['orders'] = i[5]
                    tableD.row.append()
                tableD.flush()
            lock.release() 
```

# grails - 即使正在从列表中读取其他电子邮件地址，如何限制发送的电子邮件数量？

> ID：11198864
> 
> 赞同：0
> 
> 时间：2012-06-25T23:29:31.137
> 
> 标签：grails

我遇到了这个问题，我必须限制从给定列表中发送给一定数量用户的电子邮件数量？我正在使用 grails Send Mail 插件来发送电子邮件。但是现在想在一定的时间段内将要发送的电子邮件限制为特定的号码 n 重新开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:57:45.237

更多细节会有所帮助。

邮件插件没有内置任何东西，解决这个问题的方法很大程度上取决于定时器的耐用性以及我们正在谈论的电子邮件量和用户数量的要求。

如果我们只是在吐槽，我会假设这是您的基础架构的关键部分，并且值得安装[Redis](http://redis.io)。Redis 擅长跟踪此类信息（计数器、超时、键值存储等）。查看[Antirez 关于在您的堆栈中利用 Redis 的帖子，](http://antirez.com/post/take-advantage-of-redis-adding-it-to-your-stack.html/)您应该对如何使用它有所了解。

免责声明：我是[Grails Redis 插件](http://grails.org/plugin/redis)的作者，所以我有一些偏见，但我有偏见，因为我认为 Redis 是一个很好的技术。

# database - 数据库选择快速更新

> ID：11198868
> 
> 赞同：1
> 
> 时间：2012-06-25T23:30:12.720
> 
> 标签：database, performance, database-design

让我们有很多这样的课程（百万）

```
class WordInfo
{
     string Value;
     string SomeOtherFeatures;
     List<Point> Points;
} 
```

和下面的代码

```
 private Dictionary<string, WordInfo> _dict;

   public void ProcessData(IEnumerable<Tuple<string,int,int> words)
   {
        foreach(var word in words)
        {
             if(_dict.ContainsKey(word.Item1))
             {
                 _dict[word.Item1].Points.Add(new Point(word.Item2,word.Item3));
             }
             else
             {
                 _dict.Add(word.Item1, new WordInfo(....))
             }
        } 
   }

   Main()
   {
       while(true)
       {
           IEnumerable<Tuple<string,int,int> data = GetDataSomewhere();
           ProcessData(data); 
       }
   } 
```

如您所见，此代码必须 24\7 工作。主要问题是我不知道如何在数据库中表示 _dict（我存储信息的地方）。我需要每秒处理 1000-5000 个单词。关系数据库不适合我的任务，对吧？NoSQL 呢？我需要快速的 UPDATE 和 INSERT 操作。我还需要快速检查数据库中是否存在单词（SELECT）。因为我有数百万条记录，所以这也不是微不足道的。你有什么建议？可以根据文件编写我的自定义解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:48:24.743

假设您没有创建太多事务，关系数据库应该能够轻松地每秒插入/更新 1000-5000 个单词。

事务是 ACID 并且“D”表示**持久**性：当客户端收到事务已提交的通知时，可以保证事务的效果已经在永久存储中（因此即使在那一刻发生断电，交易不会被“删除”）。实际上，这意味着 DBMS 必须等待磁盘完成物理写入。

如果您将每个插入/更新包装在其自己的事务中，您还必须为每个事务执行此等待。OTOH，如果您在单个事务中包含**许多插入/更新，则您只需为整个“块”支付一次此价格。**

* * *

[此外，由于B-Tree 索引](http://use-the-index-luke.com/sql/anatomy/the-tree)的强大功能，检查数百万其他行中是否存在特定行是数据库非常擅长的任务。

* * *

至于数据库结构，您需要类似于以下内容：

![在此处输入图像描述](../Images/5ef0bc5b8ae612e0f23b63ae705e6c81.png)

你会像这样处理它（伪代码）：

```
BEGIN TRANSACTION;

foreach(var word in words)
{
     try {
         INSERT INTO WORD (WORD_VALUE, SOME_OTHER_FEATURES) VALUES (word.Item1, ...);
     }
     catch (PK violation) {
         // Ignore it.
     }

     try {
         INSERT INTO POINT (WORD_VALUE, X, Y) VALUES (word.Item1, word.Item2, word.Item3);
     }
     catch (PK violation) {
         // Ignore it.
     }
} 

COMMIT; 
```

*（注意：我假设您`SOME_OTHER_FEATURES`在最初插入后从不更新。如果您这样做，上面的逻辑会更复杂。）*

如果您的 DBMS 支持它，请考虑将这两个表都设为集群（也称为[索引组织](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)）。此外，如果您的 DBMS 支持它，请压缩 POINT 的主索引 (WORD_VALUE) 的前沿，因为与同一单词相关的所有点都包含相同的值。

* * *

顺便说一句，上面的模型使用了所谓的识别关系和自然键。使用代理键和非标识关系的替代模型是可能的，但会使您需要的处理类型复杂化。

# javascript - 使用谷歌分析跟踪对 div 的点击

> ID：11198869
> 
> 赞同：10
> 
> 时间：2012-06-25T23:30:18.623
> 
> 标签：javascript, html, google-analytics, onclick

我有多个具有唯一 ID 的 DIV。每个 DIV onclick 向下滑动并在其下方显示一些内容。

我想跟踪每个 DIV 上的点击量，以了解哪个 DIV 被点击最多。

我如何使用谷歌分析来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T23:45:25.373

听起来您正在寻找 Google Analytics（分析）“事件跟踪”。假设您已经设置了常规 GA 代码片段（以跟踪您的站点），然后您可以设置一个处理程序（例如，对于 div 的点击）使用 jQuery 执行以下操作：

```
$('.trackerClass').click(function() {

  var selId = $(this).attr('id');

  _gaq.push(['_trackEvent', 'Interactions', 'Click', selId]);

}); 
```

您想要跟踪的每个 div 都可以将“trackerClass”作为类，并有一个唯一的 ID 来帮助您识别它。

如果您想单独跟踪打开/关闭，您可以添加一个状态变量并传递它。

更多信息请点击这里：

[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#SettingUpEventTracking](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#SettingUpEventTracking)

**编辑**：对于直接的 JavaScript，肯尼斯的回答就可以了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T23:35:58.527

查看有关事件跟踪的 GA 页面：[https ://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

基本思想是：

```
var someDiv = document.getElementById('someDiv');
someDiv.addEventListener('click', function(){
    _gaq.push(['_trackEvent', 'someDiv', 'click']);
}, false); 
```

# javascript - jquery调用返回true的javascript函数返回未定义

> ID：11198870
> 
> 赞同：-3
> 
> 时间：2012-06-25T23:30:27.487
> 
> 标签：javascript, jquery

我有一个由单击按钮触发的 jquery 函数。然而，当它调用一个返回 true 的 javascript 函数时，jquery 声称该值是未定义的。

```
function mytrue()
{
  alert ("true is returned");
  return true;
}

$('#save').click(function() 
{
   var response = mytrue();
   if (response) { 
      alert ("This should work!");
   } else
   {
      alert ("This is puzzeling? "+response);
   }
} 
```

我收到“返回真实”警报和“这是令人费解？未定义”警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:40:12.323

我相信您只是忘记了函数`)`后的尾括号`$('#save')...`

这是一个指向您的代码的 jsfiddle 的链接：http: [//jsfiddle.net/ZswU8/](http://jsfiddle.net/ZswU8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T07:33:29.890

这是我遇到的问题。我知道这是一个范围问题，但我不确定如何解决它。

[http://jsfiddle.net/k5h52/12/](http://jsfiddle.net/k5h52/12/)

```
var a = {
    mytrue:function()
    {
      alert ("true is returned");
      return true;
    }
}

var b = {
    init:function(){
        $('#save').click(function() 
    {
        var f = function(){a.mytrue()};

           var response = f();
           if (response) { 
              alert ("This should work!");
           } else
           {
              alert ("This is puzzeling? "+response);
           }
        });
    }
}

b.init(); 
```

# android - 在不访问 Activity 的情况下在 Android 的主线程上执行代码？

> ID：11198872
> 
> 赞同：31
> 
> 时间：2012-06-25T23:30:47.863
> 
> 标签：android, multithreading

我有一个启动和维护后台线程的 Android 服务。

后台线程时不时需要对主线程做回调。我很困惑如何做到这一点。

我不能调用 this.runOnUiThread，因为“this”是 Service 的一个实例，而不是 Activity，而且 Service 没有 runOnUiThread 方法。

我也无法创建或执行 AsyncTask，因为 AsyncTask 的文档说必须从 UI 线程调用构造函数和执行方法。

我是否需要维护对正在使用该服务的活动的引用并调用其 runOnUiThread 方法，或者是否有另一种方法可以在 UI 线程上运行某些东西？

谢谢。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-25T23:51:09.810

如果我不直接访问 Activity（出于某种原因），我会不时使用以下代码；

```
new Handler(Looper.getMainLooper()).post(mYourUiThreadRunnable); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-27T09:42:22.483

对于科特林：

```
Handler(Looper.getMainLooper()).post { 
    /*My task*/ 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-23T13:03:30.507

如果您在 Kotlin 中编码，则可以将**协程**与*Main*调度程序一起使用：

```
private fun runOnUiThread(block: () -> Unit) {
    CoroutineScope(Dispatchers.Main).launch { block.invoke() }
} 
```

无缘无故的协程应该作为依赖项添加到您的项目中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T23:49:12.397

当然。请参阅[处理程序](http://developer.android.com/reference/android/os/Handler.html)。您可以为您的服务提供一个处理程序对象，并且当服务需要在 UI 线程上运行一些可运行任务时，只需调用 handler.post(some_runnable_task)。这个电话。可以在此[链接](http://www.vogella.com/articles/AndroidPerformance/article.html)中找到示例4.Tutorial: Handler。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T23:43:47.040

您的活动~~必须~~ *可以*绑定到服务。

[http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

具体来说，看看在该页面上创建一个 Messenger。客户端活动可以提供一个信使对象，该对象响应来自服务的消息，一旦收到，就使用处理程序在 UI 线程上运行任何必要的 UI 代码。

**不要**在服务中保留活动的引用。这可能导致各种内存问题。

# apache - 正确的 ProxyPassReverse 和重写

> ID：11198873
> 
> 赞同：1
> 
> 时间：2012-06-25T23:30:50.307
> 
> 标签：apache, mod-rewrite, mod-proxy

我正在尝试做一些类似于珊瑚缓存的事情。
例如，如果客户端/浏览器查找 google.com.foo.com，它会被 apache 传递给代理，并将 google.com 的代理/缓存版本提供给客户端/浏览器。

到目前为止，我的配置是这样的：

```
ProxyRemote * http://localhost:8080
RewriteEngine on
RewriteCond %{http_host} ^(.*)\.foo\.com [NC]
RewriteRule ^(.*)$ http://%1$1 [P] 
```

只要网站不重定向到另一个站点，这实际上就可以很好地工作，但是一旦它重定向，它就会“爆发”出代理并简单地转到重定向的站点（很明显）。

据我了解，ProxyPassReverse 应该可以防止这种情况发生，但我根本无法拼凑出我的 ProxyPassReverse 指令的外观。毕竟，在这种情况下，主机名可能是一切......
这甚至可能吗？

# iphone - 通过 CMake 构建时如何指定通用 iOS 应用程序？

> ID：11198878
> 
> 赞同：0
> 
> 时间：2012-06-25T23:31:12.677
> 
> 标签：iphone, ios, xcode, ipad, cmake

当我使用 cmake 为 iOS 构建我的应用程序时，它只输出一个 iPhone 应用程序，而不是一个通用应用程序，我的源代码就是为它编写的。查看 cmake 文档，我没有看到任何关于如何指定我要构建通用或仅 iPad 应用程序的内容。通过 CMake 构建时如何指定通用 iOS 应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-07T21:41:20.430

```
add_executable(foo ...)
set_target_properties(
    foo PROPERTIES XCODE_ATTRIBUTE_TARGETED_DEVICE_FAMILY "1,2"
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T17:15:04.433

set_property（目标 ${MYTARGET} 属性 XCODE_ATTRIBUTE_TARGETED_DEVICE_FAMILY “iPhone/iPad”）

# ruby - How do you test if a div has a certain css style in rspec/capybara?

> ID：11198882
> 
> 赞同：26
> 
> 时间：2012-06-25T23:31:29.670
> 
> 标签：ruby, rspec, capybara

How do you test if a div tag has a certain css style? I'm trying to test if it has `display:none;` or `display:block`.

I tried the following but its giving me an error:

```
it {should have_selector('signup_server_generic_errors', /display:\s*none/)} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-29T04:11:50.133

I'd recommend that instead of trying to locate the css style, you instead write your tests to find the *css class name*.

This way you can change the underlying css styling while keeping the class the same and your tests will still pass.

Searching for the underlying style is brittle. Styles change frequently. Basing your rspecs on finding specific style elements makes your tests more brittle -- they'll be more likely to fail when all you do is change a div's look and feel.

Basing your tests on finding css classes makes the tests more robust. It allows them to ensure your code is working correctly while not requiring you to change them when you change page styling.

In this case specifically, one option may be to define a css class named `.hidden` that sets `display:none;` on an element to hide it.

Like this:

css:

```
.hidden {
  display:none;
} 
```

html:

```
<div class="hidden">HIDE ME!</div> 
```

capybara:

```
it {should have_css('div.hidden') } 
```

This capybara just looks for a div that has the `hidden` class -- you can make this matcher more sophisticated if you need.

But the main point is this -- attach styles to css class names, then tie your tests to the classes, not the styles.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-02T07:03:04.143

You could use `has_css?` matcher. It can accept `:visible` options. For more details you can check docs: [http://rdoc.info/github/jnicklas/capybara/Capybara/Node/Matchers#has_css%3F-instance_method](http://rdoc.info/github/jnicklas/capybara/Capybara/Node/Matchers#has_css%3F-instance_method)

For example you can try:

```
it { should have_css('div.with-some-class', :visible => true) } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-10T10:21:00.343

My way to ensure that element have a certain class:

```
let(:action_items) { page.find('div.action_items') }

it "action items displayed as buttons" do
  action_items.all(:css, 'a').each do |ai|
    expect(ai[:class]).to match(/btn/)
  end
end 
```

or smthing like this

```
expect(ai[:style]).to match(/color: red/) 
```

I found it here: [http://rubydoc.info/github/jnicklas/capybara/Capybara/Node/Element#%5B%5D-instance_method](http://rubydoc.info/github/jnicklas/capybara/Capybara/Node/Element#%5B%5D-instance_method)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-03T09:23:33.630

You can use Capybara's [assert_matches_style](https://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FNode%2FMatchers:assert_matches_style), or the Rspec [HaveStyle](https://www.rubydoc.info/github/jnicklas/capybara/Capybara/RSpecMatchers/Matchers/MatchStyle) matcher (which is using assert_matches_style underneath):

When you use assert_matches_style directly, it's:

```
find(".element").assert_matches_style("font-size" => "46px") 
```

I'm not too familiar with Rspec syntax, but it should be something like this:

```
it { should match_style("font-size" => "46px") } 
```

# javascript - JavaScript 看不到 MVC Cookie

> ID：11198887
> 
> 赞同：0
> 
> 时间：2012-06-25T23:32:22.223
> 
> 标签：javascript, asp.net-mvc-3

这是 JavaScript 代码：

```
var tmp = escape(document.cookie.match(/TestSession=[^;]+(;|$)/)[0]);` 
```

使用 MVC，如果我有这个，它可以工作：

```
var cookie = new HttpCookie("TestSession", "SomeValue") {
                 Expires = DateTime.Now.AddYears(1)
             }; 
```

但如果我添加：

```
cookie.Domain = "Test.com"; 
```

或者

```
{ Expires = DateTime.Now.AddYears(1), Domain = "Test.com" }; 
```

JavaScript 有`tmp`as`null`或`undefined`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:37:35.123

请记住，您[无法访问其他域的 cookie](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)。因此，如果您在与*test.com*不同的域下运行该站点，您将无法访问 cookie。

`http://localhost`注意：从- as`localhost`和不同来源工作时也是如此`test.com`。

要解决此问题，您可以检查服务器上的当前主机并进行`domain`相应设置。

* * *

**更新** *（评论后）*

正如***Andrei***所指出的，您还可以将主机条目添加到映射`test.com`到`localhost`. 但是，当您需要导航到网站的生产版本时，您需要记住将其注释掉。

# python - Python 的 Numpy 相关错误

> ID：11198889
> 
> 赞同：3
> 
> 时间：2012-06-25T23:32:54.360
> 
> 标签：python, list, numpy, correlation

我试图显示两个单独列表之间的相关性。在安装 Numpy 之前，我解析了世界银行数据中的 GDP 值和互联网用户数量，并将它们存储在两个单独的列表中。这是代码片段。这仅适用于 gdp07。实际上，我有更多的清单和其他数据，例如失业。

```
import numpy as np

file = open('final_gdpnum.txt', 'r')
gdp07 = []
for line in file:
    fields = line.strip().split()
    gdp07.append(fields [0])    

file2 = open('internetnum.txt', 'r')
netnum07 = []
for line in file2:
    fields2 = line.strip().split()
    nnetnum07.append(fields2 [0])

print np.correlate(gdp07,netnum07,"full") 
```

我得到的错误是这样的：

```
Traceback (most recent call last):
  File "Project3,py", line 83, in ,module.
    print np.correlate(gdp07, netnum07, "full")
  File "/usr/lib/python2.6/site-packages/numpy/core/numeric.py", line 645, in correlate
    return multiarray.correlate2(a,v,mode))
ValueError: data type must provide an itemsize 
```

仅作记录，我在 Windows 计算机上使用 Cygwin 和 Python 2.6。我只使用 Numpy 及其依赖项及其构建的其他部分（gcc 编译器）。任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:02:00.367

当您尝试将数据作为字符串输入时，这可能是错误，因为根据 python 文档 strip() 返回一个字符串

[http://docs.python.org/library/stdtypes.html](http://docs.python.org/library/stdtypes.html)

尝试将数据解析为您想要的任何类型

正如你在这里看到的

```
In [14]:np.correlate(["3", "2","1"], [0, 1, 0.5])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/home/dog/<ipython-input-14-a0b588b9af44> in <module>()
----> 1 np.correlate(["3", "2","1"], [0, 1, 0.5])

/usr/lib64/python2.7/site-packages/numpy/core/numeric.pyc in correlate(a, v, mode, old_behavior)
    643         return multiarray.correlate(a,v,mode)
    644     else:
--> 645         return multiarray.correlate2(a,v,mode)
    646 
    647 def convolve(a,v,mode='full'):

ValueError: data type must provide an itemsize 
```

尝试解析值

```
In [15]: np.correlate([int("3"), int("2"),int("1")], [0, 1, 0.5])
Out[15]: array([ 2.5])

import numpy as np

file = open('final_gdpnum.txt', 'r')
gdp07 = []
for line in file:
    fields = line.strip().split()
    gdp07.append(int(fields [0]))    

file2 = open('internetnum.txt', 'r')
netnum07 = []
for line in file2:
    fields2 = line.strip().split()
    nnetnum07.append(int(fields2 [0]))

print np.correlate(gdp07,netnum07,"full") 
```

您的另一个错误是字符结尾问题，我希望这可行，因为我认为我无法重现它，因为我有一个默认支持 utf-8 的 linux 机器。我通过 ipython 帮助（编解码器）文档 [http://code.google.com/edu/languages/google-python-class/dict-files.html](http://code.google.com/edu/languages/google-python-class/dict-files.html)

```
import codecs

f =  codecs.open(file, "r", codecs.BOM_UTF8)
for line in f:
    fields = line.strip().split()
    gdp07.append(int(fields [0])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-18T16:16:50.050

尝试将数据转换为浮点类型。这个对我有用！

# mysql - mysql触发语法错误

> ID：11198890
> 
> 赞同：0
> 
> 时间：2012-06-25T23:33:25.533
> 
> 标签：mysql, triggers

我需要正确的 mysql 触发器语法我使用的是 5.1 版，并且在我编写 sql 语句时总是出现语法错误

```
DELIMITER $$
CREATE TRIGGER  blood_year
AFTER INSERT ON donor
FOR EACH ROW
BEGIN
INSERT INTO blood_donation (donation_year)VALUES 
(YEAR(NOW()));
 END$$ 
```

任何的想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:09:36.900

尝试在末尾添加另一个“DELIMITER”语句：

```
DELIMITER $$
CREATE TRIGGER  blood_year
AFTER INSERT ON donor
FOR EACH ROW
BEGIN
INSERT INTO blood_donation (donation_year)VALUES (YEAR(NOW()));
END$$
DELIMITER ; 
```

# hadoop - mapred.min.split.size

> ID：11198892
> 
> 赞同：1
> 
> 时间：2012-06-25T23:33:31.443
> 
> 标签：hadoop, mapreduce, hdfs

我正在尝试在 MapReduce 中试验这个参数，但我有一些问题。

这是否与 HDFS 中的大小有关（无论是否压缩）？还是解压后的？我猜是前者，但只是想确认一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:38:48.603

仅当您的输入格式支持拆分输入文件时才使用此参数。常见的压缩编解码器（如 gzip）不支持拆分文件，因此将被忽略。

如果输入格式确实支持拆分，那么这与压缩大小有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T02:24:56.277

从 Hadoop 0.21 开始，我认为 bz2 文件是可拆分的。所以你可以使用bz2。

# ios - 协调 CACurrentMediaTime() 和 deviceCurrentTime

> ID：11198893
> 
> 赞同：2
> 
> 时间：2012-06-25T23:33:31.843
> 
> 标签：ios, ios5, core-animation, avaudioplayer, nstimeinterval

我正在尝试将几个`CABasicAnimations`与`AVAudioPlayer`. 我遇到的问题是在`CABasicAnimation`使用`CACurrentMediaTime()`时调度动画时用作参考`AVAudioPlayer`点`deviceCurrentTime`。也用于动画，`CFTimeInterval`而用于声音`NSTimeInterval`（不确定它们是否像其他 CF 和 NS 类型一样“免费桥接”）。我发现参考点也不同。

有没有办法确保声音和动画使用相同的参考点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:52:08.673

我不知道“官方”答案，但它们都是双精度浮点数，从某个参考时间开始测量秒数。

从文档中，听起来 deviceCurrentTime 链接到当前音频会话：

> 音频输出设备的时间值，以秒为单位。（只读）
> 
> @property(readonly) NSTimeInterval deviceCurrentTime 讨论该属性的值在音频播放器播放或暂停时单调增加。
> 
> 如果不止一个音频播放器连接到音频输出设备，只要至少有一个播放器正在播放或暂停，设备时间就会继续增加。
> 
> 如果音频输出设备没有连接的正在播放或暂停的音频播放器，则设备时间恢复为 0。

您应该能够启动音频输出会话，调用 CACurrentMediaTime() 然后在 2 个连续语句中获取音频会话的 deviceCurrentTime，然后计算偏移常量以在它们之间进行转换。该偏移量将在几纳秒内准确。偏移量仅在音频输出会话处于活动状态时才有效。每次从音频会话中删除所有音频播放器时，您都必须重新计算它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:14:20.963

我认为官方答案刚刚改变，尽管目前处于保密协议之下。

请参阅“相机捕捉中的新增功能”，尤其是关于 CMSync* 功能的最后几张幻灯片。 [https://developer.apple.com/videos/wwdc/2012/?id=520](https://developer.apple.com/videos/wwdc/2012/?id=520)

# objective-c - 如何在 NSArray 上执行二进制搜索？

> ID：11198896
> 
> 赞同：18
> 
> 时间：2012-06-25T23:33:48.107
> 
> 标签：objective-c, ios, algorithm, nsarray, binary-search

对（已经）排序的进行二进制搜索的最简单方法是什么`NSArray`？

到目前为止，我发现的一些潜在方法包括：

1.  [（这里](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Reference/CFArrayRef/Reference/reference.html)`CFArrayBSearchValues`提到的）的使用——这对一个有用吗？`NSArray`

2.  `indexOfObject:inSortedRange:options:usingComparator:`的方法`NSArray`假定数组已排序并采用`opts`类型参数`NSBinarySearchingOptions`- 这是否意味着它执行二进制搜索？[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)只是说：

    > 返回指定范围内的对象与使用给定 NSComparator 块的数组中的元素进行比较的索引。

3.  编写我自己的二进制搜索方法（类似于[this](http://blog.mro.name/2010/01/binary-search-nsarray/)的东西）。

我应该补充一点，我正在为 iOS 4.3+ 编程

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-11T08:21:48.937

第二个选项绝对是最简单的。Ole Begemann 有一篇关于如何使用`NSArray`'`indexOfObject:inSortedRange:options:usingComparator:`方法的博客文章：

```
NSArray *sortedArray = ... // must be sorted
id searchObject = ...
NSRange searchRange = NSMakeRange(0, [sortedArray count]);
NSUInteger findIndex = [sortedArray indexOfObject:searchObject 
                                inSortedRange:searchRange
                                      options:NSBinarySearchingFirstEqual
                              usingComparator:^(id obj1, id obj2)
                              {
                                  return [obj1 compare:obj2];
                              }]; 
```

请参阅[NSArray 二分搜索](http://oleb.net/blog/2013/07/nsarray-binary-search/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T00:26:52.340

1 和 2 都可以。#2 可能更容易；除了二进制搜索之外，该方法当然没有任何意义（例如，如果范围大于某个大小）。您可以在大型数组上验证它只进行少量比较。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-09T04:48:04.757

我很惊讶没有人提到使用[`NSSet`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html)，[当它包含具有良好哈希的对象时，例如大多数 Foundation 数据类型] 执行恒定时间查找。与其将对象添加到数组中，不如将其添加到集合中（如果您需要为其他目的保留排序顺序，则将它们添加到两者中[或者在 iOS 5.0 或 Mac OS X 10.7 上有[`NSOrderedSet`](http://developer.apple.com/library/mac/documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html)]）。

要确定对象是否存在于集合中：

```
NSSet *mySet = [NSSet setWithArray:myArray]; // try to do this step only once

if ([mySet containsObject:someObject])
{
    // do something
} 
```

或者：

```
NSSet *mySet = [NSSet setWithArray:myArray]; // try and do this step only once

id obj = [mySet member:someObject];

// obj is now set to nil if the object doesn't exist or it is
// set to an object that "isEqual:" to someObject (which could be
// someObject itself). 
```

重要的是要知道，如果每次进行查找时都将数组转换为集合，那么您将失去任何性能优势，理想情况下，您将使用包含要测试的对象的预构建集合。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-26T07:07:13.633

```
//Method to pass array and number we are searching for.
- (void)binarySearch:(NSArray *)array numberToEnter:(NSNumber *)key{

    NSUInteger  minIndex = 0;
    NSUInteger  maxIndex = array.count-1;
    NSUInteger  midIndex = array.count/2;

    NSNumber *minIndexValue = array[minIndex];
    NSNumber *midIndexValue = array[midIndex];
    NSNumber *maxIndexValue = array[maxIndex];

    //Check to make sure array is within bounds
    if (key > maxIndexValue || key < minIndexValue) {
        NSLog(@"Key is not within Range");
        return;
    }

    NSLog(@"Mid indexValue is %@", midIndexValue);

    //If key is less than the middleIndexValue then sliceUpArray and recursively call method again
    if (key < midIndexValue){
        NSArray *slicedArray = [array subarrayWithRange:NSMakeRange(minIndex, array.count/2)];
        NSLog(@"Sliced array is %@", slicedArray);
        [self binarySearch:slicedArray numberToEnter:key];

     //If key is greater than the middleIndexValue then sliceUpArray and recursively call method again
    } else if (key > midIndexValue) {
        NSArray *slicedArray = [array subarrayWithRange:NSMakeRange(midIndex+1, array.count/2)];
        NSLog(@"Sliced array is %@", slicedArray);
        [self binarySearch:slicedArray numberToEnter:key];

    } else {
      //Else number was found
        NSLog(@"Number found");
    }

}

//Call Method

@interface ViewController ()
@property(nonatomic)NSArray *searchArray;
@end

- (void)viewDidLoad {
    [super viewDidLoad];
//Initialize the array with 10 values
    self.searchArray = @[@1,@2,@3,@4,@5,@6,@7,@8,@9,@10];

//Call Method and search for any number
    [self binarySearch:self.searchArray numberToEnter:@5];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-26T00:16:59.240

`CFArrayBSearchValues`[应该可以工作——](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html) <code>NSArray *与`CFArrayRef`.

# javascript - tinymce 文本区域编辑器

> ID：11198900
> 
> 赞同：1
> 
> 时间：2012-06-25T23:34:38.967
> 
> 标签：javascript, python, html, google-app-engine, tinymce

我正在使用 Tiny MCE，它是一个 javascript 文件，可让您将 textareas 变成更多的编辑器界面。我刚刚从网站[http://www.tinymce.com/index.php](http://www.tinymce.com/index.php)下载了文件，但在设置时遇到了问题。在最简单的层面上，我只需要以下代码：

```
<script type="text/javascript" src="js/tiny_mce.js">
<script type="text/javascript">
tinyMCE.init({
    // General options
    mode : "textareas",    
});
</script>

<form method="post" action="dump.php">
    <textarea name="content"></textarea>
</form> 
```

然后是我项目中的 tiny_mce.js 文件。还是我的项目中需要其他文件？顺便说一句，我正在使用 eclipse 在 python 中编写一个谷歌应用程序引擎项目。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:48:06.890

我认为您在`</script>`这里缺少一个结束标记，这不允许 javascript 正常运行。

它应该是这样的：

```
<script type="text/javascript" src="js/tiny_mce.js"></script> 
```

# email - 从 Hyperion 服务器发送电子邮件

> ID：11198903
> 
> 赞同：0
> 
> 时间：2012-06-25T23:34:56.403
> 
> 标签：email, hyperion

当记录数为 0 时，我正在尝试从 hyperion 服务器发送电子邮件。我正在 onPostProcess() 中编写脚本代码。

```
var dtm_current = new Date();
Application.ExecuteBScript("Set BrioQuery, Mail, 'Internet Mail', mailserverwithoutquotes,fromid'"); //note that mailserver name is given without quotes and 
//from id does nt have starting quote
Application.ExecuteBScript("Export Section Root.'Results', OfficeMHTML, 'job_output', Silent, email, 'Testing Email action', 'This is a test of the email action. \n\n\n', UTF-8, To, tomailid'");
Console.Writeln ( "Post Process Script complete:"+dtm_current ); 
```

我收到错误将“结果”部分作为“Microsoft Office Web 存档”通过电子邮件发送到：com

导出失败。错误：连接未能找到主机 127.0.0.1。SMTP 服务器在端口 25 上吗？(错误码=146)

我有问题：为什么它试图连接到本地主机而不是指定的电子邮件服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:15:11.347

我有这个工作。

var dtm_current = 新日期（）；Application.ExecuteBScript("设置 BrioQuery, Mail, 'Internet Mail', emailserverwithoutquotes,'fromemailid'"); var count =1* ActiveDocument.Sections['R-Results'].RowCount;

Console.Writeln(count); if(count > 0){ Application.ExecuteBScript("Export Section Root.'R-Results', csv, 'job_output', Silent, email, 'Testing Email action if', '这是对email action if的测试。 \n\n\n', UTF-8, To, 'tomailid'"); } else{ Application.ExecuteBScript("Export Section Root.'R-Results', csv, 'job_output', Silent, email, 'Testing Email action else', '这是对email action else的测试。\n\n \n', UTF-8, To, 'tomailid'"); }

# facebook - Facebook 是否托管使用 og:image 指向的共享/喜欢的图像？

> ID：11198913
> 
> 赞同：-1
> 
> 时间：2012-06-25T23:36:12.920
> 
> 标签：facebook

只是好奇 Facebook 是否托管副本，或者他们是否会链接到我的服务器，在这种情况下，共享图像 URL 可能会被点击数百次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:01:13.143

他们使用副本。检索图像后 - 将从他们的 CDN 提供

# c - C 应用程序跳过我的 scanf 调用

> ID：11198915
> 
> 赞同：0
> 
> 时间：2012-06-25T23:36:32.890
> 
> 标签：c, scanf

我正在尝试编写代码来计算一个字符串在另一个字符串中重复的次数。（如果有更简单的方法，请告诉我。）

这是我现在拥有的代码：

```
int getStringLenght (char str[]) {
    int lenghtOfTheString;
    int i;
    for (i = 0; i < 100; i++) {
        if(str[i] == '\0') {
            lenghtOfTheString = i;
            break;
        }
    }
    return lenghtOfTheString;
}
int main()
{
    printf("Type a string: ");
    char T[1024];
    scanf("%s",&T);
    char P[100];
    printf("Type a substring: ");
    scanf("%s",&P);
    printf("%s",P);
    int stringSize = getStringLenght (P);
    int occurences = 0;
    int i;
    for (i = 0; i < 10; i++) {
        int j;

        if(T[i] == P[0]) {
            for (j = 0;j<10;j++) {
                char c1 = T[i+j];
                char c2 = P[j];
                if(c1 != c2) {

                    break;
                }
                if(j == stringSize-1) {
                    occurences++;
                    //printf("string iguais em i = %d",i);
                }
            }
        }
    }
    printf("\nThe substring %s was found %d times", P, occurences);

    return 0;
} 
```

应用程序编译。例如，当我在第一个输入“banana”，`scanf`然后在第二个输入“na”时，应用程序会给出正确的答案。*但是*，如果我在第一个输入“香蕉和牛奶” `scanf`，它会自动将第二个解释`scanf`为“和”，即使我除了“香蕉和牛奶`ENTER`”什么都不输入

发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T23:41:32.817

`scanf`的 "%s" 转换只读取字符，直到遇到空格（例如，空格、换行符或制表符）。当您输入多个单词时，它会读取第一个单词。第二个调用读取第二个，依此类推。

如果你想读一整行，你通常想使用`fgets`(`scanf`也可以完成这项工作，但它有点棘手，并且使用了许多人不知道的功能，因此他们经常觉得难以理解)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:42:21.423

你不明白 scanf 是如何工作的。[http://www.cplusplus.com/reference/clibrary/cstdio/scanf/](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/) `%s`只会读取一个字符串，以空格结尾。如果要继续读取字符串或读取一行，则必须继续使用 scanf 直到其中一个字符串以新行或 EOF 结尾，或者使用另一个函数，例如`fgets`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:11:52.077

这是一个标准问题`scanf`。有 3 种方法可以解决此问题：

* * *

## 1：每次scanf后调用fflush：

```
scanf("%s", some_string); // you don't need to write &some_string because giving a array to a function automatically converts it to a pointer
fflush(stdin); 
```

`fflush()`并非在每个系统上都可用。

* * *

## 2：将 scanf 置于循环中：

```
do
    scanf("%s", somestring);
while (getchar() != '\n'); 
```

* * *

## 3：不要使用scanf！使用 fgets 和 sscanf！

```
char buffer[100]; // buffer for fgets()
fgets(buffer, 100, stdin); // read a line from stdin (standart input) into buffer
sscanf(buffer, "%s", some_string); // convert buffer in any format you want 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T23:52:18.217

您必须记住，许多功能已经实现。这就是为什么你的`getStringLength`（你的名字有错字）是不必要的。`strlen`您可以使用from 函数简单地检查字符串的长度`string.h`。更重要的是，当您导入此文件时，您还可以访问`strstr`查找字符串中给定子字符串第一次出现的函数。尝试使用它们而不是重新发明轮子；）

# facebook-graph-api - 查明以前是否喜欢过开放图形对象

> ID：11198935
> 
> 赞同：5
> 
> 时间：2012-06-25T23:40:19.290
> 
> 标签：facebook-graph-api, facebook-like, facebook-fql

有没有办法确定 Open Graph 中的对象是否被喜欢？

该文档似乎暗示我必须在我的对象上发布一个类似的操作，并期望在它之前被喜欢时出现错误 3501。

从 UI pov 这没有意义，我想将我的喜欢按钮 ui 更改为“不喜欢”状态，而不必喜欢我的对象并查看它是否失败。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:17:49.533

如果您正在专门寻找 Open Graph 上的喜欢`Object`（如在 Open Graph 的目标中`Action`），并且您正在谈论内置 ( `og.likes`) 喜欢，Shawn 的答案大多是正确的，但您需要查看不同的FQL 表。

Open Graph`Object`只是一个 URL，它解析为`og:type`在其标题中包含元数据的页面。Facebook 将这些视为`link`对象（您可以使用 进行检查`SELECT type FROM object_url where url='http://url.to/your/object'`）

[您可以在link](http://developers.facebook.com/docs/reference/fql/links/)和[link_stat](https://developers.facebook.com/docs/reference/fql/link_stat/) FQL 表中找到有趣的信息，但您要查找的是 Facebook 将用户喜欢与链接相关联的连接表：[url_likes](https://developers.facebook.com/docs/reference/fql/url_like/)表。

因此，要判断当前用户是否喜欢给定的 Open Graph `Object`，您可以使用：

```
SELECT user_id FROM url_like WHERE user_id=me() AND url='http://url.to/your/object' 
```

如果您返回一个值，则当前用户已经喜欢它。如果你得到一个空数组，则当前用户不喜欢它。

据我所知，Graph API 无法做到这一点，只有 FQL。不过，我很想被证明是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:02:16.917

根据对象，如果对象具有相似的连接，您可以使用图形 api 来确定当前用户是否喜欢该对象。

我以类似的方式使用 fql 来检查用户是否喜欢帖子。

```
/fql?q=SELECT+user_id+FROM+like+WHERE+post_id=\''.$postid.'\'+AND+user_id=me() 
```

参考帖子/喜欢[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

# tsql - 将新 ID 级联到第二个相关表

> ID：11198937
> 
> 赞同：0
> 
> 时间：2012-06-25T23:40:25.373
> 
> 标签：tsql, sql-server-2005, insert-update

我有两个表，Contacts 和 Contacts_Detail。我正在将记录导入到 Contacts 表中，并且需要运行 SP 以在 Contacts_Detail 表中为 Contacts 中的每条新记录创建一条记录。Contacts 表中有一个 ID，Contacts_Detail 表中有一个匹配的 ID_D。

我正在使用它将记录插入 Contacts_Detail 但得到“子查询返回超过 1 个值”。错误，我不知道为什么。Contacts 中有多个记录需要在 Contacts_Detail 中有匹配的记录。

```
 Insert into Contacts_Detail (ID_D)

  select id from Contacts c
  left join Contacts_Detail cd
  on c.id = cd.id_d
  where id_d is null 
```

我愿意接受更好的方式......谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:51:52.107

听起来您正在将空白子记录插入到 Contacts_Detail 表中——所以我要问的第一个问题是：为什么？

至于为什么您的特定 SQL 不起作用...

您可以检查几件事：

*   联系人表 - 你那里有任何记录`WHERE id is null`吗？（删除它们——然后将 id 字段设为主键）
*   Contacts_Detail 表——那里有记录`WHEERE id_d is null`吗？（删除它们——然后进入您的设计器并创建关系/强制参照完整性。）
*   验证 c.id 是主键，cd.id_d 是关联表的正确外键。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:47:04.423

为什么不只是一个触发器？这似乎比必须始终确定缺少哪些行要简单一些 - 这似乎更像是您会定期执行以纠正某些异常的事情，而不是您在每次插入后都必须做的事情。像这样的东西应该工作：

```
CREATE TRIGGER dbo.NewContacts
ON dbo.Contacts
FOR INSERT
AS
BEGIN
  INSERT dbo.Contacts_Detail(ID_D) SELECT ID FROM inserted;
END
GO 
```

但是我怀疑您的`Contacts_Detail`表上有一个触发器，该触发器未写入以正确处理多行插入，这就是您的子查询错误的来源。你能显示触发器`Contacts_Detail`吗？

# php - i18n extract 不会在 Symfony 中创建目录或文件

> ID：11198938
> 
> 赞同：0
> 
> 时间：2012-06-25T23:40:26.777
> 
> 标签：php, symfony1, internationalization, symfony-1.4

我正在尝试在 Symfony 1.4.18 上设置 i18n 行为。我的前端布局中有一些 i18n 友好的字符串（使用两个下划线）。我尝试运行以下命令：

```
$ ./symfony i18n:extract frontend fr --auto-save 
```

一开始，symfony 找到了 17 个字符串，但是没有构建路径 apps/frontend/i18n/fr/ 也没有构建里面的文件：messages.xml。

我重新运行了上面的命令，但是这次 Symfony 没有找到任何字符串。我想，如果 Symfony 没有找到新字符串，它可能会将其保存在某个地方，所以我在我的 Linux 上运行了另一个命令，以查找我的一个 i18n 字符串上的任何出现（通常我有这个字符串 : ）：

```
$ grep "Freelance" $(find ./) 
```

这个命令是在我的项目的根目录下启动的，但不幸的是，除了我的布局中的那个之外，它没有发现任何事件。

我不知道该怎么做才能解决我的问题。

PS：我希望我的英语不要太差，它不是我的母语，但我会尽力做到最好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:39:08.147

尝试添加

```
messageSource: '%SF_APP_DIR%/i18n' 
```

i18n 出厂配置的选项。

并寻找你的`messages.xml`in `app_dir/i18n/your_culture`。老`messages.xml`在`vendor/symfony/lib/plugins/sfdoctrineplugin/i18n`我的情况下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:27:28.797

尝试在 factory.yml 中设置 i18n 源

像这样的东西：

```
 i18n:
  class: sfI18N
  param:
    source:               XLIFF
    debug:                false
    untranslated_prefix:  "[T]"
    untranslated_suffix:  "[/T]"
    cache:
      class: sfFileCache
      param:
        automatic_cleaning_factor: 0
        cache_dir:                 %SF_I18N_CACHE_DIR%
        lifetime:                  31556926
        prefix:                    %SF_APP_DIR%/i18n 
```

[在这里](http://www.symfony-project.org/reference/1_4/en/05-Factories#chapter_05_i18n)您可以找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T19:08:16.207

1.  在您的项目根目录中执行此操作：

    ```
    sudo find . -print | grep -i 'messages.xml' 
    ```

2.  然后删除你找到的文件（可能在 symfony 供应商文件中的 sfDoctrinePlugin/i18n 中）

3.  为您的 factory.yml 和 settings.yml 使用上面的设置

4.  重启任务：

    ```
     php symfony i18n:extract frontend fr --auto-save 
    ```

    就这样。现在生成了messages.xml。创建缺少的文件夹。

5.  （还原您之前所做的 chmod 更改）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T14:00:18.400

您的默认语言是*`fr`*并且您正在尝试将翻译翻译成*`fr`*?

xml 文件应该有源字符串（法语 - 您的默认语言）和目标字符串（英语或其他）。

尝试`./symfony i18n:extract frontend en --auto-save`（或您想要的任何语言，除了法语），让我们知道您是否会得到您需要的东西。

# java - 如何使用 Java 模拟阻塞函数

> ID：11198939
> 
> 赞同：0
> 
> 时间：2012-06-25T23:40:35.670
> 
> 标签：java, multithreading

我有两个线程。一个是客户，另一个是生产者。

我想在客户中调用一个名为 READ 的函数。这应该无限期地阻塞，直到生产者把数据放在上面。

我该怎么做 ？谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T23:44:22.230

我建议您使用`LinkedBlockingQueue`. 这是模拟“生产者-消费者”问题的最简单方法。一个线程使用`put`方法将值放入队列，另一个使用`take`阻塞的数据（线程等待直到队列不为空）。使用`LinkedBlockingQueue`非常简单，因为您不必同步您的方法。一切都已经完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:36:19.750

如果要放入队列的数据需要同步，即生产者生成一个对象并将其存储在队列中；消费者必须消费生产者放置的对象，使用 SynchronousQueue 或 new TransferQueue 应该是一个更好的主意

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-25T23:46:40.130

使用`thread.wait()`然后`thread.notify()`。`thread.wait()`等到`thread.notify()`事情发生。

# magento - 产品未显示在“法语”和“英语”中，并且无法添加到“管理类别”中

> ID：11198940
> 
> 赞同：0
> 
> 时间：2012-06-25T23:40:39.447
> 
> 标签：magento, magento-1.6

当我将视图更改为英语或法语商店视图时，该类别中没有产品。为什么它们不从所有商店视图继承？我该如何解决？

在范围是“所有商店视图”时添加到类别的产品。所以它现在真的应该在法语和英语商店。

我做了很多次完整的重新索引。我也清除了缓存。

查看实际中的错误 [youtube]：h​​ttp: [//www.youtube.com/watch?v= oE4h6H6PW78&feature=youtu.be](http://www.youtube.com/watch?v=oE4h6H6PW78&feature=youtu.be)

在“英语”和“法语”商店视图中，新产品在尝试再次添加时甚至都不会出现。它们只能在“所有商店视图”范围内添加。

Magento 版本 1.6.2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:16:39.643

我设法通过禁用所有产品并重新启用添加产品后添加的商店视图来实现该功能。要为特定视图禁用和重新启用产品，请按照[以下步骤操作](https://stackoverflow.com/questions/6790279/magento-different-products-in-the-different-store-vews-under-the-same-store#8163367)

编辑：在禁用和启用您的产品之前，我建议尝试从系统菜单重新索引和刷新缓存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-03T13:23:07.637

登录到您的 magento 管理面板

1.  进入系统>>索引管理
2.  全选
3.  将操作设置为重新索引数据
4.  点击提交
5.  进入系统>>缓存管理
6.  全选
7.  将操作设置为刷新
8.  点击提交

现在所有产品都将显示在前端

# vb.net - 将 LINQ to SQL 与需要转换/转换为表的视图一起使用

> ID：11198941
> 
> 赞同：0
> 
> 时间：2012-06-25T23:40:43.133
> 
> 标签：vb.net, linq, linq-to-sql, sql-server-2008-r2, datacontext

**我的 SQL Server 数据库包含几个视图**，这些视图本质上是某些表的过滤 (WHERE) / 排序 (ORDER BY) 版本，即没有连接。

一个例子是我的**下载**表，它有一个视图，例如**DownloadsOnlineOnly** ，例如

```
SELECT * FROM Downloads WHERE Live = 1 ORDER BY FolderName ASC; 
```

我可以将这些视图**拖放**到我的 LINQ to SQL DataContext 上，并使用 LINQ 查询这些视图并检索数据……

但是我的 DataContext 中没有提取外键关系，所以我失去了以下能力：

```
Dim dl as DownloadOnlineOnly = (From r in db.DownloadOnlineOnlies Select r).First

Dim fol as Folder = dl.Folder ' Syntax error as there is no association between 

                              ' DownloadOnlineOnly and Folder in my DataContext. 
```

我理解为什么会发生这种情况，但我该如何解决这个问题：

*   无需在我的 DataContext 中手动添加关联？
*   我可以**更改**实体的类型，例如更改 DataContext 上 SP 的返回类型吗？
*   我可以在 DownloadOnlineOnly 对象和 Download 对象之间**转换或转换吗？**
*   还是别的什么方法？

抱歉，如果这是一个微不足道的问题，我对 LINQ 比较陌生。

PS 我正在使用 SQL Server 2008 R2 数据库进行开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:47:32.547

您必须手动将它们连接起来。你无能为力。只是感谢你没有使用 EF，因为 EF 对视图的支持更糟。它假定任何非空字段都是复合主键的一部分。

# exception-handling - 在 ColdFusion 9 强制下载页面上捕获错误

> ID：11198942
> 
> 赞同：1
> 
> 时间：2012-06-25T23:41:07.727
> 
> 标签：exception-handling, coldfusion, coldfusion-9

我正在为我们的办公室创建一个应用程序，该应用程序允许办公室中经过身份验证的用户为客户上传文件，创建一个链接列表以下载文件并将链接列表通过电子邮件发送给客户。

当办公室中的用户登录时，他们会在其会话范围内分配一个 UUID。该 UUID 成为存储上传文件的目录名称。

有时我需要清除旧文件并删除目录，但是当这种情况发生时，客户可能会尝试从旧链接重新下载文件。

在 ColdFusion 9 中，我将如何捕获它并将它们发送到错误页面？我也希望在下载开始后使用类似的代码来重定向用户，这样他们就不会在下载过程中坐在空白页面上。

这是我的强制下载页面，它采用文件夹名称变量和文件名变量来提供文件。

```
<cfset folder = #URL.folder#>
<cfset FileDownload = #URL.file#>

<cfset exten = ListLast(FileDownload, ".")>

<cfswitch expression="#exten#">
<cfcase value="zip"><cfset content_type = "application/zip, application/x-zip, application/x-zip-compressed, application/octet-stream, application/x-compress, application/x-compressed, multipart/x-zip"></cfcase>
<cfcase value="ai"><cfset content_type = "application/illustrator"></cfcase>
<cfcase value="eps"><cfset content_type = "application/illustrator, application/octect-stream"></cfcase>
<cfcase value="pdf"><cfset content_type = "application/pdf, application/x-pdf, application/acrobat, applications/vnd.pdf, text/pdf, text/x-pdf"></cfcase>
<cfcase value="psd"><cfset content_type = "image/photoshop, image/x-photoshop, image/psd, application/photoshop"></cfcase>
<cfcase value="jpg"><cfset content_type = "image/jpeg"></cfcase>
<cfcase value="png"><cfset content_type = "image/png"></cfcase>
<cfcase value="tif"><cfset content_type = "image/tiff"></cfcase>
<cfdefaultcase><cfset content_type = "image/jpeg"></cfdefaultcase>
</cfswitch>

<cfset fileToGetSizeOf = expandPath("./#folder#/#FileDownload#") />

<cfoutput><cfheader name="content-disposition" value="attachment;filename=#FileDownload#"><cfheader name="content-length" value="#getFileInfo(fileToGetSizeOf ).size#" />
<cfcontent type="#content_type#" file="#ExpandPath("./#folder#")#/#FileDownload#" deletefile="#delete_file#"></cfoutput> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:29:08.627

您想在这里实现三个**目标：**

1.  *安全地*提供文件。目前，您没有受到利用系统（或其他用户）文件的保护，例如像这样（我设置了传递的值而不是 URL 键）：

    ```
    <cfset folder = "../../../some/other/path/" />
    <cfset FileDownload = "some_other_file.pdf" /> 
    ```

2.  如果文件或目录不再存在，则显示 404 页面。

3.  下载开始后显示一些漂亮的页面。也许我遗漏了一些东西，但是在下载开始后重定向用户（=发送标头）非常棘手。

无论如何，所有这些都有非常简单可靠的**解决方案**。

您应该将文件列表保留在数据库中，因此每条记录可能包括：

1.  唯一身份。
2.  文件所有者 ID。
3.  目录名称。
4.  文件名。
5.  描述（可选，可以使用文件名）。
6.  内容类型（可选，您仍然可以使用带有扩展名的方法）。
7.  创建日期（可选，可用于定期清洁）。
8.  下载计数器（可选，如果您想限制下载次数）。
9.  状态（可选，可用于防止文件系统检查已删除文件）。

注意：3-4 可以作为单列（'path/filename.ext'）完成，因为路径无论如何都是临时的。

所以，当你的应用程序`creates a list of links to download the files and emails the client with the list of links.`，它也记录每个文件到数据库。现在，这些链接中的每一个都可能如下所示：

```
<a href="http://yourwebsite.tld/download.cfm?file=#ID#">#DESCRIPTION#</a> 
```

当用户单击链接脚本执行以下操作：

1.  检查数据库中是否存在 ID。如果不是——重定向到 404 页面。
2.  检查当前用户是否与所有者 ID 匹配。如果不是——重定向到 404 页面。
3.  检查文件状态、下载计数器（如果需要限制）。如果不是——重定向到 404 页面。
4.  使用存储的目录和文件名检查实际文件是否存在。如果不是——重定向到 404 页面。
5.  **如果**URL 中有`start`键：增加下载计数器，使用 cfcontent 和内容类型提供文件。
6.  **ELSE**呈现页面的 HTML，上面写着“下载将立即开始，如果您不想等待，请单击此链接”，其中链接看起来像`download.cfm?file=#ID#&start=yes`，而且您拥有`meta http-equiv="refresh"`相同的 URL。

笔记：

1.  步骤 1-4 可以用 custom 包裹在单个 try/catch 块中`errorCode`，因此您可以有一个重定向位置。
2.  此处第 5 步的技巧是用户在单击下载链接时将停留在页面上，并且不会看到空白页面。这不是目标 3*的精确*解决方案，但如果没有一些技巧，很难让事情变得更好。也许我错了，有人可以在这里提出更好的方法，这会很酷。您可以删除“单击此链接部分”以使此页面看起来“自然”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:28:43.967

如果您的网站有 404 页面，则您已经将它们引导至错误页面。或者至少你的网络服务器是。如果您没有设置站点范围的 404 页面，请将其设置为 cfm 页面以提供一些额外功能（日志记录、警报等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:46:24.040

您可以使用它`FileExists`来检查是否存在并基于此做出决定：

```
<cfif NOT FileExists(fileToGetSizeOf)>
  <!--- send a 404 --->
<cfelse>
  <!--- send the file --->
</cfif> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:34:13.357

您可以使用**FileExists(absolute_path)**函数来检查下载的文件是否存在。

# java - 使用公共资产会引发编译错误

> ID：11198953
> 
> 赞同：1
> 
> 时间：2012-06-25T23:42:39.790
> 
> 标签：java, playframework-2.0

当我尝试使用公共资产时（如此[处所述](http://www.playframework.org/documentation/2.0.1/Assets)），我收到编译错误。这是我的路线和它抛出的错误：

```
GET     /assets/*file               controllers.Assets.at("public", file) 
                                                          ^
`)' expected but `"' found 
```

任何人都可以对此有所了解吗？我是否使用过时的资产服务方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:12:12.270

将此路线用作`hotfix`：

```
GET    /assets/*file     controllers.Assets.at(path="/public", file) 
```

*注意*：正如我们所见，文档仍然需要一些修复。

*编辑*：有关详细信息，请查看文档的 github/wiki 版本，现在已调试：http: [//github.com/playframework/Play20/wiki/Assets](http://github.com/playframework/Play20/wiki/Assets)

# django - Django - 作为另一个用户工作

> ID：11198954
> 
> 赞同：0
> 
> 时间：2012-06-25T23:43:07.340
> 
> 标签：django, celery

我正在使用 celery，并希望代表提交请求的用户而不是“root”用户来推动会话。例如，一个基本任务看起来像这样（一个非常人为的例子）

```
@task
def process_checklist(**kwargs):

    log = process_checklist.get_logger()
    document = kwargs.get('document', None)
    company = kwargs.get('company', None)
    user = kwargs.get('user', None)

    object = Book.object.get_or_create(name=kwargs.get('name')) 
```

这样做需要权衡取舍，但我觉得实际使用视图来执行此操作会更有益，这与我们测试事物的方式非常相似。实际上，这用于批量上传数据，其中每一行实际上是一个创建视图。

```
client = Client()
client.login(user='foo', password='bar')
client.post(reverse('create_book_view', data=**kwargs)) 
```

但我想不出一个好方法来实际使用（如果可能的话）django.test.client 客户端类在不知道密码的情况下登录用户并为他们填写视图。我想到了这个，但我确定有更好的方法？？

这是我想出的？

```
class AxisClient(Client):
    # The admin account is created by us.  Once that is done everything should be tested through
    # the system.

    def login_user(self, username):
        """
        Sets the Factory to appear as if it has successfully logged into a site.

        Returns True if login is possible; False if the provided credentials
        are incorrect, or the user is inactive, or if the sessions framework is
        not available.
        """
        user = User.objects.get(username=username)
        user.backend = None
        if user and user.is_active \
                and 'django.contrib.sessions' in settings.INSTALLED_APPS:
            engine = import_module(settings.SESSION_ENGINE)

            # Create a fake request to store login details.
            request = HttpRequest()
            if self.session:
                request.session = self.session
            else:
                request.session = engine.SessionStore()
            login(request, user)

            # Save the session values.
            request.session.save()

            # Set the cookie to represent the session.
            session_cookie = settings.SESSION_COOKIE_NAME
            self.cookies[session_cookie] = request.session.session_key
            cookie_data = {
                'max-age': None,
                'path': '/',
                'domain': settings.SESSION_COOKIE_DOMAIN,
                'secure': settings.SESSION_COOKIE_SECURE or None,
                'expires': None,
            }
            self.cookies[session_cookie].update(cookie_data)

            return True
        else:
            return False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:26:54.933

这似乎有效！

```
class AxisClient(Client):
    # The admin account is created by us.  Once that is done everything should be tested through
    # the system.

    def login_user(self, username):
        """
        Sets the Factory to appear as if it has successfully logged into a site.

        Returns True if login is possible; False if the provided credentials
        are incorrect, or the user is inactive, or if the sessions framework is
        not available.
        """
        user = User.objects.get(username=username)
        user.backend = None
        if user and user.is_active \
                and 'django.contrib.sessions' in settings.INSTALLED_APPS:
            engine = import_module(settings.SESSION_ENGINE)

            # Create a fake request to store login details.
            request = HttpRequest()
            if self.session:
                request.session = self.session
            else:
                request.session = engine.SessionStore()
            login(request, user)

            # Save the session values.
            request.session.save()

            # Set the cookie to represent the session.
            session_cookie = settings.SESSION_COOKIE_NAME
            self.cookies[session_cookie] = request.session.session_key
            cookie_data = {
                'max-age': None,
                'path': '/',
                'domain': settings.SESSION_COOKIE_DOMAIN,
                'secure': settings.SESSION_COOKIE_SECURE or None,
                'expires': None,
            }
            self.cookies[session_cookie].update(cookie_data)

            return True
        else:
            return False 
```

# php - 从 MySQL 到 Objective-C

> ID：11198955
> 
> 赞同：-1
> 
> 时间：2012-06-25T23:43:09.767
> 
> 标签：php, mysql, objective-c, xcode

我有一个 mysql 数据库，其中包含有关用户的信息。现在我想在我的 iPhone 应用程序中使用它们。有没有办法把东西从mysql带到objective-c？使用 mysql c api 不是一个选项，因为我的 Web 服务器只允许使用 php。

希腊人，瓦尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:49:44.567

好吧，我认为你没有很好地解释你的问题。共享网络托管解决方案通常不提供从外部访问 MySQL 服务器的权限，这意味着您只能从他们的服务器访问（例如您的主机上的 PHP 脚本）。

对此的解决方案通常是简单的 Web 服务 - REST、XML-RPC、SOAP。

Web 服务是一些可以用 PHP 编写并在您的虚拟主机上运行的应用程序。此应用程序通过特定 URL 返回数据（通常以 XML 或 JSON 格式）。

示例：从您的本地 iPhone 调用

> [http://yourserver.com/webservice/?what=episode-list&tvshow=battlestar-galactica](http://yourserver.com/webservice/?what=episode-list&tvshow=battlestar-galactica)

输出将是带有剧集列表的 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:52:11.483

您的问题不是很清楚，但也许这会有所帮助：

1.  您可以**使用 PHP 提供数据库中的信息**（一些**XML**或**JSON**可能很有用），然后**在您的 iPhone App 上解析它**。

2.  或者，您可以**导出数据库并将其转换为 SQLite**，然后直接在 iPhone 上使用。

有了更多的信息，也许我们可以给你一个更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T23:52:13.993

听起来您想在 Web 服务器上的 PHP 中创建一个应用程序编程接口 (API)，您的 Objective-C 程序将使用设备互联网连接与之通信。

实际上，您希望创建特殊的 url 和请求参数，您的 Web 服务器将使用它们来提取数据库信息，将它们解析为 JSON 或 XML，并将它们作为纯文本返回。

在您的 Objective-C 应用程序中，您将制作这些 URL 并将传入的 JSON 或 XML 解析为您的应用程序的可操作数据。

# ruby-on-rails - Rails 在这种情况下可以缓存吗？

> ID：11198960
> 
> 赞同：2
> 
> 时间：2012-06-25T23:43:51.693
> 
> 标签：ruby-on-rails, activerecord

```
> player.records
Record Load (0.5ms)   SELECT * FROM `records` WHERE (`records`.player_id = 1)

> player.records.first(:conditions => {:metric_id => "IS NOT NULL"})
Record Load (0.5ms)   SELECT * FROM `records` WHERE (`records`.player_id = 1 AND (`records`.`metric_id` = 'IS NOT NULL')) LIMIT 1 
```

有没有办法让第二个查询不命中数据库，而是使用缓存？当数据已经在内存中时，再次访问数据库似乎有点过分。

我需要两个结果。我知道 Ruby 可以遍历这些值，但如果可能的话，我更愿意通过 ActiveRecord 来执行此操作。我来自 Django 背景，`filter()`在这方面做得很好。

我正在使用 Rails 2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:49:51.710

不，只是因为条件不同。

但试着解释一下上下文。为什么需要同时使用这两个查询？你不能只用第二个吗？

如果两者都需要，为什么不能使用 Ruby 代码过滤数组而不是进行另一个查询？

# google-maps - 谷歌地图 api 允许非谷歌用户在 iframe 中编辑地图

> ID：11198962
> 
> 赞同：1
> 
> 时间：2012-06-25T23:44:02.363
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, geocaching

我有一个谷歌地图，我让用户记录某些事件在他们在博客中发布时发生的位置。并非我的所有用户都有谷歌帐户，您无法从 iframe 编辑地图，所以我的问题是有什么方法可以允许任何用户直接从 iframe 编辑地图（在某个位置放置图钉）。

如果没有，有没有办法允许非谷歌用户编辑公共地图？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:35:54.030

如果您使用 Google Maps JavaScript API v3 创建从您的网站提供的地图，则您网站的用户无需拥有 Google 帐户。如果您将地图公开并提供添加动态标记的功能，那么访问您的站点/地图网页的任何人都应该可以使用该功能。

您是否以某种方式提供由 Google 托管的地图？

# google-visualization - 电子表格嵌入图表chartType错误

> ID：11198966
> 
> 赞同：1
> 
> 时间：2012-06-25T23:44:54.480
> 
> 标签：google-visualization, google-apps-script, google-sheets

我正在尝试在电子表格 Google Apps 脚本中使用嵌入式图表。

```
var chartresult = newsheet.newChart()
      .addRange(plotdata)
      .setChartType(Charts.ChartType.SCATTER)
      .setPosition(5, 4, 1, 1)
      .setOption('title', title)
      .setOption('pointSize', 3)
      .build(); 
```

但是，当我打开电子表格时，图表始终显示为折线图。如果我打开“编辑图表”窗口，“编辑图表”窗口会显示散点图，我必须单击“更新图表”才能使电子表格中的图表看起来正确。任何人都知道这是一个错误还是我的设置错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:04:27.040

我认为这是因为 Google 电子表格 UI 中内置的图表对话框设置了一些使用 EmbeddedChartBuilder 时未设置的默认值。如果您手动将 lineWidth 设置为零，则线条将消失。

```
.setOption('lineWidth', 0) 
```

# security - HDI：在灯开关应用程序中实现记录级别的安全性

> ID：11198967
> 
> 赞同：1
> 
> 时间：2012-06-25T23:44:57.217
> 
> 标签：security, visual-studio-lightswitch

寻找在灯开关应用程序中实现行/记录级安全性的一般指导。

经典示例，允许用户只编辑他们的条目，而允许管理编辑所有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T14:57:29.077

这可能会给你一些想法：http: [//blogs.msdn.com/b/mthalman/archive/2010/09/07/filtering-data-based-on-current-user-in-lightswitch-apps.aspx](http://blogs.msdn.com/b/mthalman/archive/2010/09/07/filtering-data-based-on-current-user-in-lightswitch-apps.aspx)

LS V2 将实现行级安全：[http ://social.msdn.microsoft.com/Forums/en-US/LightSwitchDev11Beta/thread/7e0a9572-842e-4d5e-a613-71e49c160c58](http://social.msdn.microsoft.com/Forums/en-US/LightSwitchDev11Beta/thread/7e0a9572-842e-4d5e-a613-71e49c160c58)

来自 LS 团队博客：http: [//blogs.msdn.com/b/lightswitch/archive/2012/04/17/filtering-data-using-entity-set-filters-michael-simons.aspx](http://blogs.msdn.com/b/lightswitch/archive/2012/04/17/filtering-data-using-entity-set-filters-michael-simons.aspx)

# java - 如何删除内置数据存储索引

> ID：11198968
> 
> 赞同：4
> 
> 时间：2012-06-25T23:45:20.413
> 
> 标签：java, google-app-engine, google-cloud-datastore

应用引擎默认为每个字段定义一个内置索引。我没有创造它们，我也不想要它们。

我的实际实体只消耗了 159MB，但索引又消耗了 680MB。我只会对这些实体进行键查询，所以我根本不需要任何索引。我怎样才能删除这些？

**编辑**：输出`vacuum_indexes`：

```
Found 0 unused indexes on the server.

Details:
No indexes were deleted.

vacuum_indexes completed successfully. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T00:55:04.727

您不能删除内置索引。它们是内置的:)

您可以做的是减少应用模型使用的索引数量。默认情况下，每个属性都在 AppEngine 中编制索引。我觉得你真的是这个意思。

要使属性不被索引，请在 de 属性声明中添加一个参数，如下所示：

```
class MyModel(db.Model):
    FirstName = db.StringProperty(Indexed=False)
    LastName = db.StringProperty(Indexed=False)
    ... 
```

这样，appengine 将停止为该特定属性使用/创建索引。下次运行 SDK 控制台时，index.yaml 文件将自动更新。

您需要做的最后一件事是执行`appcfg.py vacuum_indexes myapp/`。阅读有关[Appengine SDK 文档](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Deleting_Unused_Indexes)中最后一条命令的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T06:06:50.820

使用低级 Java API，您需要对所有不希望有内置索引的属性使用 setUnindexedProperty 方法。没有办法简单地更改一些定义文件并清理以摆脱已经存在的索引条目。删除这些内置索引条目（或创建新条目）的唯一方法是重写所有实体。但请注意，删除单个实体上的一个索引条目将计为对您的配额进行 2 次完整写入，因为这些实际上是 2 个索引条目 - 一个按升序排列，另一个按降序排列。

# html - 在 twitter bootstrap 环境中使用时，按钮光标显示为我发出的光束

> ID：11198973
> 
> 赞同：0
> 
> 时间：2012-06-25T23:46:27.987
> 
> 标签：html, css, twitter-bootstrap

我一直在使用 twitter bootstrap 为自己构建一个小型博客站点，最近我不得不在我的项目中引入一个第三方文件上传应用程序。文件上传器具有相关的 CSS 文件来设置“上传按钮”的样式，并且 JS 元素创建相应的标记。

问题是当我查看我的 HTML 时 - 当我的光标指向“上传按钮”时，它看起来像一个 I 光束而不是“手”，而且奇怪的是，我在整个“行”上看到了“手”光标的上传按钮，但不在上传按钮上（在上传按钮上方是一个 I 光束）。

我想在我的“纯推特引导按钮”上添加它，我没有这个问题，但只有当我集成这个第三方应用程序时。例如，我尝试过更改光标参数，但似乎没有任何效果。一些相关代码如下：

所以，在我的 HTML 中，我有：

```
<div id="file-uploader"></div> 
```

我的 CSS 看起来像这样：

```
.qq-uploader { position:relative; width: 100%; cursor: pointer;}

.qq-upload-button {
  font-family: Qlassik,'Qlassik Medium',fallback_Qlassik,sans-serif;

  display: inline-block;
  *display: inline;
  padding: 10px 10px 10px;
  margin-top:0px;
  margin-bottom: 0;
  *margin-left: .3em;
  font-size: 16px;
  line-height: 10px;
  *line-height: 20px;
  color: #ffffff;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  background-color: #0074cc;
  *background-color: #0055cc;
  background-image: -ms-linear-gradient(top, #0088cc, #0055cc);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0055cc));
  background-image: -webkit-linear-gradient(top, #0088cc, #0055cc);
  background-image: -o-linear-gradient(top, #0088cc, #0055cc);
  background-image: -moz-linear-gradient(top, #0088cc, #0055cc);
  background-image: linear-gradient(top, #0088cc, #0055cc);
  background-repeat: repeat-x;
  border-color: #0055cc #0055cc #003580;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#0088cc', endColorstr='#0055cc', GradientType=0);
  filter: progid:dximagetransform.microsoft.gradient(enabled=false);
    -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ffffff', endColorstr='#e6e6e6', GradientType=0);
  filter: progid:dximagetransform.microsoft.gradient(enabled=false);
  *zoom: 1;
  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
     -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);

}

.qq-upload-button-hover {background:#0055cc;cursor: default;}
.qq-upload-button-focus {outline:1px dotted black;cursor: default;}

.qq-upload-drop-area {
    position:absolute; top:0; left:0; width:100%; height:100%; min-height: 70px; z-index:2;
    background:#FF9797; text-align:center; 
}

.qq-upload-drop-area span {
    display:block; position:absolute; top: 50%; width:100%; margin-top:-8px; font-size:16px;
}

.qq-upload-drop-area-active {background:#FF7171;}

.qq-upload-list {margin:15px 35px; padding:0; list-style:disc;}
.qq-upload-list li { margin:0; padding:0; line-height:15px; font-size:15px;font-family: Qlassik,'Qlassik Medium',fallback_Qlassik,sans-serif;}
.qq-upload-file, .qq-upload-spinner, .qq-upload-size, .qq-upload-cancel, .qq-upload-failed-text {
margin-right: 7px;
}

.qq-upload-file {}
.qq-upload-spinner {display:inline-block; background: url("loading.gif"); width:15px; height:15px; vertical-align:text-bottom;}
.qq-upload-size,.qq-upload-cancel {font-size:15px;}

.qq-upload-failed-text {display:none;}
.qq-upload-fail .qq-upload-failed-text {display:inline;} 
```

相关的 javascript 在这里（https://github.com/GoodCloud/django-ajax-uploader/blob/master/ajaxuploader/static/ajaxuploader/js/fileuploader.js） - 如果有帮助的话。

我将不胜感激您可能需要解决问题的任何提示或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:25:07.190

尝试使用 !important 强制原始光标或其他选项在全局 css 文件中覆盖它。

似乎以下内容也可以通过前面定义的 JS`.qq-upload-button`注入`cursor:`。

```
.qq-upload-button-hover {background:#0055cc;cursor: default;}
.qq-upload-button-focus {outline:1px dotted black;cursor: default;} 
```

希望对你有帮助...

# c++ - 绕过自动生成的赋值运算符（VS bug？）

> ID：11198979
> 
> 赞同：4
> 
> 时间：2012-06-25T23:47:16.837
> 
> 标签：c++, visual-studio-2008, templates, compiler-errors, assignment-operator

采取以下代码：

```
class Foo
{
    Foo const& operator =(Foo const& rhs); // disallow
};

struct Bar
{
public:
    Foo foo;

    template <class T>
    T const& operator =(T const& rhs) { return rhs; }
};

struct Baz : public Bar {
    using Bar::operator =;
};

int main()
{
    Baz b1, b2;
    b1 = b2;
} 
```

这无法编译，因为将使用自动生成的 Bar::operator = 赋值运算符，它尝试使用私有的 Foo::operator =。还行吧。所以我在 Bar 中添加了一个额外的成员：

```
Bar const& operator =(Bar const& b) { return Bar::operator=<Bar>(b); } 
```

现在我们有一个不同的问题。我有两个重载，只能使用其中一个。我正在传递一个 Baz const&。我所知道的关于 C++ 的一切都表明这应该最终使用非模板版本，因为首先选择匹配的非模板。这似乎也是 gcc 正在做的事情。Visual Studio 似乎不同意：

```
error C2666: 'Bar::operator =' : 2 overloads have similar conversions
    could be 'const Bar &Bar::operator =(const Bar &)'
    or       'const T &Bar::operator =<Baz>(const T &)'
    with
    [
        T=Baz
    ]
    while trying to match the argument list '(Baz, Baz)' 
```

我很想在这里相信 gcc，既因为我对 C++ 的理解证实了这一点，也因为当它与 Visual Studio 不一致时，我通常支持 gcc，但我并不像我对这个问题那么担心：

在我的非最小示例中，老实说，我根本不需要默认生成的赋值运算符。我会对模板操作员完成这项工作感到非常满意 - 它会正确完成。但是，因为 VS 抱怨模板和自动生成的赋值运算符之间的冲突，我实际上根本无法让该模板工作。我已经尝试了以下所有方法：

1.  使赋值运算符私有且未实现（不起作用，因为“并非所有重载都是可访问的”）
2.  创建它（导致上面的错误）
3.  忽略它（使用默认生成的赋值运算符导致上述错误）
4.  为该类型创建模板的特化，从而完全匹配默认赋值运算符（根据编译器明确非法）

有人对我如何解决这个问题有任何好的想法吗？不幸的是，我的 VS 版本不支持自动生成的赋值运算符的 C++0x“删除”覆盖，所以这不是一个选项，我想不出任何其他方法来解决这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:11:30.923

在解析赋值运算符的两个版本时看到的歧义是由 Baz 定义中的“using Bar::operator =”引起的。

无论是在 Bar 中隐式定义还是显式定义，非模板版本都采用参数“const Bar&”，该参数与“Baz”不完全匹配，这是明确解析与模板的要求。

有很多方法可以解决这个问题，但真正的解决方案将取决于真正的来源。

为了修复这个例子，我会做这些事情：

o 防止自动生成，`const Bar& operator =(const Bar& b)`因为它将使用 Foo 的赋值运算符。您已经尝试添加到 Bar 的定义中的内容将起作用：

```
Bar const& operator =(Bar const& b) {
    return Bar::operator=<Bar>(b); 
} 
```

o`using Bar::operator =`在定义 Baz 需要去。将其替换为包装 Bar::operator= 的函数。如：

```
template <class T>
const T& operator =(const T& rhs) {
    return Bar::operator =(rhs); 
} 
```

（当然，非时髦的代码总是返回 *this -- 一个 Bar&，而不是参数的类型。）

# objective-c - presentViewController: 在 iOS <6 (AutoLayout) 上崩溃

> ID：11198981
> 
> 赞同：92
> 
> 时间：2012-06-25T23:47:37.383
> 
> 标签：objective-c, ios, xcode, crash, stack-trace

这是我遇到的一个奇怪的崩溃。当我按下一个转到某个 ViewController 的按钮时，就会发生崩溃。它崩溃的行是：

```
DestinationInformationViewController *info = [[DestinationInformationViewController alloc] init];
[info setModalTransitionStyle: UIModalTransitionStyleCrossDissolve];
[self presentViewController:info animated:YES completion: nil]; // CRASHES HERE
[info release]; 
```

崩溃跟踪是：

`*** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint' *** First throw call stack: (0x3758288f 0x35287259 0x37582789 0x375827ab 0x3153d54d 0x3153d6bb 0x3153d423 0x314ce001 0x3143c3c7 0x31319c59 0x3128fc17 0x3129a267 0x3129a1d5 0x3133959b 0x31338367 0x84091 0x374dc3fd 0x31271e07 0x31271dc3 0x31271da1 0x31271b11 0x31272449 0x3127092b 0x31270319 0x31256695 0x31255f3b 0x33c9822b 0x37556523 0x375564c5 0x37555313 0x374d84a5 0x374d836d 0x33c97439 0x31284cd5 0x82bb3 0x71200) terminate called throwing an exception(gdb) Could not instantiate class named NSLayoutConstraint`

注意：这会在我的 iPhone 4 iOS 5.1 上崩溃，但不会在我的 iPhone 4S iOS 6 Beta 2 上崩溃

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-06-25T23:58:46.260

我相信这是 Xcode 的新界面生成器的问题。您是否碰巧使用 Xcode 4.5 的界面构建器构建了您的 .xib？我刚才遇到了同样的问题，我认为这就是问题所在。我的应用程序在 iOS 6 上运行，但不是任何旧版本。

而且您需要**确保关闭`Use Auto Layout`您的 xibs**。

这可以通过以下方式完成：

1.  打开你的xib。
2.  转到`File Inspector`选项卡。
3.  找到`Interface Builder Document`右侧工具栏上的部分。
4.  取消选中该`Use Auto Layout`选项。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-09-28T12:23:18.430

![截屏](../Images/096384126928fe1e1d15fba635ce25dd.png)

当我下载新的 XCode 更新和 IOS6 SDK 时，我遇到了同样的问题。这是我解决它的方法：

选择发生错误的界面构建器文件（无论是 xib 还是故事板文件）。在 XCode 右侧的助手编辑器中，选择左侧的第一个选项卡，然后有一个复选框，用于选择“使用自动布局”，如上面的屏幕截图所示。取消选中复选框。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T02:27:09.087

Nagaraja 询问“如果我们不使用 xib，如何解决同样的问题？我遇到了这个问题。我用 xib 创建了一个控制器，然后我决定删除 xib 文件。崩溃并没有消失。问题是我需要实施

```
- (void) loadView 
```

在我的控制器类中。一旦我实施了这种方法，问题就解决了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T19:36:08.297

presentViewController 崩溃的另一个可能原因是笔尖中的某些内容连接到不再存在的变量 - 该变量的名称已更改或已被删除。

# php - 如果变量包含空格，则将用户重定向到 URL

> ID：11198984
> 
> 赞同：0
> 
> 时间：2012-06-25T23:48:31.563
> 
> 标签：php

如果下面的变量不包含任何字符，只有任意数量的空格，我想将用户重定向到使用`header("Location: URL"); exit();`.

我怎样才能做到这一点？

```
$comment = mysql_real_escape_string($_POST['comment']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:51:37.067

这里有2种方法：

```
if (trim($var, ' ') == '') {
    // $var consists of only spaces
}

// or

if (str_replace(' ', '', $var) == '') {
    // $var consists of only spaces
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:51:46.370

我会为 PCRE 使用 \s 标识符，这也将捕获标签等：

```
if (preg_match('/^\s+$/', $comment) { ... } 
```

[编辑] 或者，如果您还想捕获完全空的字符串：

```
if (preg_match('/^\s*$/', $comment) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T23:51:29.300

```
!trim( $_POST['comment'] ) && header( "Location: URL" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T23:52:51.617

```
if(str_replace(" ", "", $comment) == "")
{
  header("Location: URL");
  exit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T23:53:42.740

```
if(strlen(trim($comment)) == 0) header('Location: URL'); 
```

# javascript - 如何在 c# 代码隐藏中将 OnClientClick 添加到 DDL

> ID：11198989
> 
> 赞同：0
> 
> 时间：2012-06-25T23:49:43.430
> 
> 标签：javascript, onclientclick

我正在动态创建一个包含两个下拉列表的表。我想在选择任一 DDL 时触发 OnClientClick 事件以执行一些 JavaScript，但看不到将 OnClientClick 添加到 DDL 的方法。这是当前的代码。我尝试将 OnClientClick 添加到项目，但它不起作用。

```
HtmlTableCell tableCell = new HtmlTableCell();
tableCell.Attributes.Add("class", cssPageGroups);

DropDownList ddlPageGroups = new DropDownList();
ddlPageGroups.Attributes.Add("class", cssPageGroupsDDL);
ddlPageGroups.ID = "ddlPageGroups";
ddlPageGroups.AutoPostBack = true;
ddlPageGroups.SelectedIndexChanged += new EventHandler(pageGroupChange);

for (int pg = 1; pg <= maxPageGroups; pg++)
  {
    int groupFirstPageNumber = (int)(1 + (maxVisiblePageNumbers * (pg - 1)));
    int groupLastPageNumber = groupFirstPageNumber + (maxVisiblePageNumbers - 1);
    if (totalPages < groupLastPageNumber)
    {
     groupLastPageNumber = totalPages;
    }
    string group = String.Format("{0} ... {1}", groupFirstPageNumber.ToString(), groupLastPageNumber.ToString());
    ListItem groupItem = new ListItem(group, ((groupFirstPageNumber - 1) * pageSize).ToString());
    if (pageGroup == pg)
    {
      groupItem.Selected = true;
    }
    groupItem.Attributes.Add("OnClientClick", "javascript:showSearching();");
    ddlPageGroups.Items.Add(groupItem);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:51:48.800

*改变：*

```
ddlPageGroups.Attributes.Add("OnClientClick", "javascript:showSearching();"); 
```

*至：*

```
ddlPageGroups.Attributes.Add("onclick", "showSearching();"); 
```

请记住，Attributes 集合正在将***HTML***属性添加到选择列表中。`OnClientClick`是 的一个`server-side`属性`DropDownList`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:26:15.017

您必须将 onclick 事件添加到选择标签。它不适用于单个选项标签。

# android - Android- 测试设备的媒体播放器流问题

> ID：11198992
> 
> 赞同：2
> 
> 时间：2012-06-25T23:49:54.917
> 
> 标签：android, streaming, media-player, android-mediaplayer

我目前有一个媒体播放器，它被赋予了一个可流式传输的数据源。我有两个测试设备：HTC Thunderbolt 和三星 Galaxy SII Skyrocket。

HTC 设备能够完美地流式传输文件；但是，galaxy sII 根本不能，并且给了我一堆媒体播放器错误代码。

我正在正确实施与媒体播放器相关的所有内容...但是，我无法解决这个问题...为什么它可以在一部手机上运行，​​而在另一部手机上不行？它是相同的链接。

有任何想法吗？来自以下设备的日志。如有必要，也可以发布我的代码。

谢谢！

**从 HTC 设备登录：**

```
06-25 18:19:23.192: D/MainAudioService(23564): next song is: http://soundcloud.com/stopdroprave/chromeo-night-by-night/download/s-bpPu1
06-25 18:19:26.675: W/MediaPlayer(23564): info/warning (1, 902)
06-25 18:19:28.497: D/dalvikvm(23564): GC_EXTERNAL_ALLOC freed 515K, 50% free 3544K/7047K, external 477K/989K, paused 22ms
06-25 18:19:31.250: D/MainAudioService(23564): Song length in minutes is: -6:5
06-25 18:19:31.250: D/MediaPlayer(23564): start() in
06-25 18:19:31.250: D/MediaPlayer(23564): start() out
06-25 18:19:31.310: I/MediaPlayer(23564): Info (1,902)
06-25 18:19:31.310: D/MainAudioService(23564): On Info in MP: 1and 902
06-25 18:19:50.909: D/MediaPlayer(23564): stop() in
06-25 18:19:50.919: D/MediaPlayer(23564): stop() out
06-25 18:19:50.919: D/MediaPlayer(23564): reset() in
06-25 18:19:50.929: D/MediaPlayer(23564): reset() out
06-25 18:19:50.939: D/MainAudioService(23564): next song is: http://soundcloud.com/stopdroprave/subvibe-mizukis-last-chance/download/s-Jaezp
06-25 18:19:55.433: W/MediaPlayer(23564): info/warning (1, 902)
06-25 18:19:58.656: D/dalvikvm(23564): GC_EXTERNAL_ALLOC freed 503K, 57% free 3099K/7047K, external 1102K/1614K, paused 45ms
06-25 18:20:00.338: D/MainAudioService(23564): Song length in minutes is: -6:39
06-25 18:20:00.338: D/MediaPlayer(23564): start() in
06-25 18:20:00.338: D/MediaPlayer(23564): start() out
06-25 18:20:00.408: I/MediaPlayer(23564): Info (1,902) 
```

**来自 SGSII 的日志：**

```
06-25 18:27:32.797: E/MediaPlayer(24277): stop called in state 0
06-25 18:27:32.797: E/MediaPlayer(24277): error (-38, 0)
06-25 18:27:32.807: D/MainAudioService(24277): next song is: http://soundcloud.com/stopdroprave/doctor-p-watch-out-crazes-locd/download/s-qQhJP
06-25 18:27:32.807: E/MediaPlayer-JNI(24277): setDataSource: outside path in JNI is �x@
06-25 18:27:33.498: E/MediaPlayer(24277): error (1, -2147483648)
06-25 18:27:33.498: E/MediaPlayer(24277): Error (1,-2147483648)
06-25 18:27:33.498: D/MainAudioService(24277): Error in MP: 1 and -2147483648
06-25 18:27:33.498: E/MediaPlayer(24277): stop called in state 0
06-25 18:27:33.498: E/MediaPlayer(24277): error (-38, 0)
06-25 18:27:33.508: D/MainAudioService(24277): next song is: http://soundcloud.com/stopdroprave/digitalism-circle-eric-prydz/download/s-XlYFv
06-25 18:27:33.508: E/MediaPlayer-JNI(24277): setDataSource: outside path in JNI is �x@
06-25 18:27:34.149: E/MediaPlayer(24277): error (1, -2147483648)
06-25 18:27:34.149: E/MediaPlayer(24277): Error (1,-2147483648)
06-25 18:27:34.149: D/MainAudioService(24277): Error in MP: 1 and -2147483648 
```

编辑：

这是我设置数据源的地方....

```
SdrPlaylist p = mPlaylist.get(currentNum);

            String path = p.songUrl;

            artistInfo = p.songName;
            nextSong = Toast.makeText(getApplicationContext(),
                    "Buffering Next Song...", Toast.LENGTH_LONG);
            nextSong.setGravity(Gravity.TOP, 0, 110);
            nextSong.show();

            try {
                Log.d(TAG, "next song is: " + path);

                mediaPlayer.setDataSource(path);

                mediaPlayer.prepareAsync();
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:13:28.977

[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html#prepareAsync%28%29)状态的文档：

> 对于流，您应该调用prepareAsync()，它会立即返回，而不是阻塞直到缓冲足够的数据。

所以我会从尝试开始。您需要使用 OnPreparedListener 为您调用 start() 而不是假设准备在它返回后完成。

```
private MediaPlayer mp = new MediaPlayer();
mp.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer arg0) {
        mp.start();

    }
});

mp.reset(); //<--- you probably shouldn't need this here.
mp.setDataSource(soundUri);
mp.prepareAsync(); 
```

这样你就可以保证在 MediaPlayer 准备好之前不会调用 start() 。

如果您在此更改后仍然遇到问题，我的下一个猜测是它与编解码器相关。android 上的媒体播放有点挑剔，对于流媒体来说更是如此。您要播放什么类型的文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:04:57.680

因为这似乎是您设置媒体播放器的数据源的问题，所以应该这样做：

```
private MediaPlayer mp = new MediaPlayer();
mp.reset();
mp.setDataSource(soundUri);
mp.prepare();
mp.start(); 
```

或者您可以在此处查看完整答案：[https ://stackoverflow.com/a/9061259/1084764](https://stackoverflow.com/a/9061259/1084764)

# fancybox - Fancybox 在 Firefox 上正常，但在 IE8 上为零（附代码）

> ID：11198993
> 
> 赞同：0
> 
> 时间：2012-06-25T23:49:55.947
> 
> 标签：fancybox

我是fancybox 2.0 的新用户，必须能够让它工作。经过几天的尝试，我最终剥离了测试页面做裸露的骨头。它适用于 Firefox，但不适用于 IE8。

拜托，有人可以看看这段代码，看看我哪里出错了。

[http://www.bytebrothers.com/bb_tester/Video_lightbox_test.htm](http://www.bytebrothers.com/bb_tester/Video_lightbox_test.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:37:15.530

你的文件还没有`DOCTYPE`，所以 IE 切换到 quirks 模式。

Fancybox 需要标准模式才能正常运行，因此请设置有效的`DOCTYPE`. 您可以查看[http://www.alistapart.com/articles/doctype/](http://www.alistapart.com/articles/doctype/)或简单地设置`<!DOCTYPE html>`

# python - 哪些是可定制且可以为最终用户简化的优秀候选模板语言？

> ID：11198995
> 
> 赞同：0
> 
> 时间：2012-06-25T23:50:42.077
> 
> 标签：python, templates, template-engine

我想拥有一种灵活的模板语言，我可以针对特定的用例进行自定义，并且让它足够简单，以供非程序员使用。我看着猎豹；有没有人对定制有任何其他和/或任何想法？Python 会很棒，但其他语言实现也​​可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:57:17.950

Jija2 是一个模板库，我觉得很容易使用

见：http: [//jinja.pocoo.org/docs/](http://jinja.pocoo.org/docs/)

请参阅之前的 SO 问题：[Python 最快的模板系统是什么？](https://stackoverflow.com/questions/1324238/what-is-the-fastest-template-system-for-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:07:30.260

我喜欢[wheezy.template](https://bitbucket.org/akorn/wheezy.template)，因为它看起来与我的 python 代码非常相似。它的语法紧凑、富有表现力和干净。快速查看示例后，我能够立即开始。令人惊讶的是它的直观性。此外它[很快](http://mindref.blogspot.com/2012/10/python-templates-benchmark.html)。

# sql - Oracle SQL -- 从两列中选择并合并为一列

> ID：11198997
> 
> 赞同：3
> 
> 时间：2012-06-25T23:50:50.663
> 
> 标签：sql, oracle, select

我有这张桌子：

```
Vals
Val1  Val2  Score
A     B     1 
C           2
      D     3 
```

我希望输出是单个列，它是 Vals1 和 Val2 变量的“超集”。它还保留与该值关联的“分数”变量。

输出应该是：

```
Val Score
A   1
B   1
C   2
D   3 
```

从这个表中选择两次然后合并是绝对不可能的，因为生产它非常昂贵。此外，我不能使用 with 子句，因为此查询在子查询中使用一个，并且由于某种原因 Oracle 不支持两个 with 子句。

我并不真正关心如何处理重复值，无论是最简单/最快的。

如何生成适当的输出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T02:33:46.167

这是不使用 unpivot 的解决方案。

```
with columns as (
  select level as colNum from dual connect by level <= 2
),
results as (
  select case colNum
              when 1 then Val1
              when 2 then Val2
            end Val,
         score
    from vals,
         columns
)
select * from results where val is not null 
```

这是没有 WITH 子句的基本相同查询：

```
select case colNum
            when 1 then Val1
            when 2 then Val2
         end Val,
       score
  from vals,
       (select level as colNum from dual connect by level <= 2) columns
 where case colNum
            when 1 then Val1
            when 2 then Val2
         end is not null 
```

或者更简洁一点

```
select *
  from ( select case colNum
                     when 1 then Val1
                     when 2 then Val2
                  end Val,
                score
           from vals,
                (select level as colNum from dual connect by level <= 2) columns
        ) results
 where val is not null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:42:28.270

如果您使用的是 Oracle 11，unPivot 将提供帮助：

```
SELECT *
  FROM vals
UNPIVOT ( val FOR origin IN (val1, val2) ) 
```

您可以选择任何名称而不是“val”和“origin”。

请参阅[有关 pivot / unPivot 的 Oracle 文章](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T02:25:28.880

试试这个，看起来你想将列值转换为行

```
select val1, score from vals where val1 is not null
union 
select val2,score from vals where val2 is not null 
```

# scala - Scala Play 2，将请求传递给方法

> ID：11198998
> 
> 赞同：9
> 
> 时间：2012-06-25T23:50:51.640
> 
> 标签：scala, playframework, playframework-2.0

我有一个`Play 2.0`应用程序

`TestController.scala`

```
def foo(p1: String) = Action {implicit request =>
  Ok(bar(p1))
}

private def bar(p1: String) = {
//access request parameter here
} 
```

有没有办法用来`implicit`传递`request`给`bar`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T00:22:07.660

是的你可以：

```
 def foo(p1: String) = Action { implicit request =>
    Ok(bar(p1))
  }

  private def bar(p1: String)(implicit req: RequestHeader) = "content" 
```

编码：

```
Action { implicit request 
```

在 Action 对象上调用此方法：

```
def apply(block: Request[AnyContent] => Result): Action[AnyContent] = { 
```

因此，您所说的“请求”与名为“块”的参数匹配。这里的“隐式”是可选的：它使“请求”值可用作其他方法/函数调用的隐式参数。

您的“bar”函数中的隐式表示它可以从隐式值中获取“req”的值，并且不一定需要显式传递。

# ruby-on-rails - 我如何为多个 q= 查询提取结果？

> ID：11198999
> 
> 赞同：0
> 
> 时间：2012-06-25T23:51:07.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, search, controller

我的网站上有一个搜索表单，它以这种形式提交网址（那些是标签 ID）

`http://localhost:3000/tags?utf8=✓&amp;q=2%2C12%2C44`

它适用于第一个标签 ID，但不适用于其他标签 ID

```
 def self.search(query = {})
    output = self.scoped
    output = output.where(:id => query[:q])
  end 
```

标签控制器：

```
 def index
    @tags = Tag.search(params)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:42:42.520

`ActiveRecord::Base.where`当您想要一个具有多个匹配项的查询时，接受一个数组作为参数。要将查询参数转换为数组，您可以使用`split`：

```
output = output.where(:id => query[:q].split(',')) 
```