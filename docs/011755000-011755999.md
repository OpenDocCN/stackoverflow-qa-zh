# StackOverflow 问答 11755000-11755999

# c# - 从类继承变量

> ID：11755002
> 
> 赞同：-1
> 
> 时间：2012-08-01T08:01:16.150
> 
> 标签：c#

我的类有问题，我有一个转换为类的 XSD 模式，我必须使用这些类在 xml 文档中显示一些值。

首先我有这个类：

```
namespace Transaction
{
   public partial class Header
   {
       private DateTime dateDeliveryRequestField;

        public DateTime DateDeliveryRequest
        {
            get
            {
                return this.dateDeliveryRequestField;
            }
            set
            {
                this.dateDeliveryRequestField = value;
            }
        }  
   } 

} 
```

在我的代码中，我像这样继承这个类

```
using Transakcija;
.
.

Transakcija.Agr3PLInventoryTransaction Agr3PL = new Transakcija.Agr3PLInventoryTransaction();

Agr3PL.DataArea.Header.DateDeliveryRequest = new DateTime();
Agr3PL.DataArea.Header.DateDeliveryRequest = SOME VALUE FROM SQL QUERY 
```

最后我将 Agr3PL.DataArea.Header.DateDeliveryRequest 序列化为 XMl 文档，但问题是我在 xml 文档中没有看到节点 DateDeliveryRequest，它不存在吗？我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:06:29.810

尝试一步一步调试它，看看 DateDeliveryRequest 之后有什么值： Agr3PL.DataArea.Header.DateDeliveryRequest = new DateTime(); 和 Agr3PL.DataArea.Header.DateDeliveryRequest = SQL QUERY 的一些值

# gitlab - gitlab 错误 - 遥控器意外挂断

> ID：11755008
> 
> 赞同：0
> 
> 时间：2012-08-01T08:01:40.193
> 
> 标签：gitlab

我在我的 Ubuntu 上成功安装了 Gitlab（gitlab.domain.com），在客户端 PC 上我安装了 Git（Windows 7），然后运行 ​​Git Bash 使用以下命令生成 SSH 密钥：ssh-keygen -t rsa -C "username@domain .com" 在 C:\Users\AccountName.ssh 上创建私钥/公钥然后，将公钥添加到已安装的 gitlab 上的配置文件中。然后可以克隆/推送 Git Bash。

但是，我无法在其他PC上重现此问题，我尝试了一些PC，创建了新用户，新的ssh密钥......但总是遇到“远程端意外挂断”错误，有时可以克隆但推送时也会出现错误.

我只能在第一台 PC 上克隆/推送。我很困惑，不知道我错过了什么。我正在尝试让我的团队使用 Git

非常感谢任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:04:12.807

确保将其指向正确的 git 服务器。另外 - 登录您的 Jenkins 服务器（在 jenkins 用户下）并 ssh 到 git@your-git-server 并确保选择“是”以将服务器添加到您的已知主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:43:00.113

我有同样的错误，这是一个访问级别的问题：

我的用户只能来宾访问我的项目，因此无法克隆它。我将访问级别更改为开发人员，它解决了我的问题

# iphone - 应用内购买：下载额外数据或信息应包含在基本应用程序中

> ID：11755010
> 
> 赞同：0
> 
> 时间：2012-08-01T08:01:43.410
> 
> 标签：iphone, in-app-purchase

我正在开发带有应用内购买的 iPhone/iPad 应用程序。应用内购买需要额外的数据（~300KB .txt 文件）。

1.  购买完成后是否应该下载数据？我假设有必要设置我自己的服务器来检索数据（例如，它不能从某些苹果服务器下载）
2.  或者数据是否应该包含在基本应用程序中？苹果会批准吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:56:37.080

就 App Store 批准而言，任何一种方式都是允许的。使用更适合您的。

（是的，从当前的 iOS 版本开始，Apple 不会托管任何通过应用内购买下载的额外数据；您必须自己托管。）

# rest - 在 web.xml 中声明的 http-method 不会阻止其他 http-methods

> ID：11755014
> 
> 赞同：2
> 
> 时间：2012-08-01T08:02:00.800
> 
> 标签：rest, servlets, web.xml

我想限制带有路径 /rest/* 的域仅用于 GET 请求。所以我在我的 web.xml 中声明它：

```
<security-constraint>
  <web-resource-collection>
    <web-resource-name>All</web-resource-name>
    <url-pattern>/rest/*</url-pattern>
    <http-method>GET</http-method>
  </web-resource-collection>
</security-constraint>

<security-constraint>
  <web-resource-collection>
    <web-resource-name>Auth</web-resource-name>
    <url-pattern>/*</url-pattern>
  </web-resource-collection>
  <auth-constraint>
    <role-name>Admin</role-name>
  </auth-constraint>
</security-constraint> 
```

但是，当对（例如）“/rest/add”进行 POST 请求时，Web 容器会接受并提交 POST 请求。为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T18:22:50.900

安全约束未被覆盖。如果不同约束的 url 模式相同，它们是相加的。在上面的示例中，url 模式是不同的，因此第一个获胜并且允许发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:26:40.793

这是因为第一个安全约束被第二个（顺序很重要）覆盖，它没有 http-methods（如果 web-resource-collection 中没有 http-method 元素，则意味着所有 HTTP方法是允许的。）

这意味着这个代码

```
<security-constraint>
  <web-resource-collection>
    <web-resource-name>All</web-resource-name>
    <url-pattern>/rest/*</url-pattern>
    <http-method>GET</http-method>
  </web-resource-collection>
</security-constraint> 
```

没用

# java - 如何在 Java 中重新加载 JDialog？

> ID：11755020
> 
> 赞同：0
> 
> 时间：2012-08-01T08:02:29.190
> 
> 标签：java, swing, jdialog, jradiobutton

您好，我在重新加载时遇到问题`JDialog`。我有 2 个 JRadioButton：

*   没有定义的
*   在第一行定义

当我点击一个按钮时，会出现一个对话框，它的内容将取决于单选按钮。如果我选择第一个，它将显示“Hello World！”，但如果我选择第二个，则会显示“Hello Community！”。但是对话框不会改变，只是根据我首先选择的内容显示内容。

这是我的按钮操作：

```
txtResult.setText(radioOption.getSelectedItem().toString());
JDialog jd = new JDialog();
jd.setSize(600,400); 
jd.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:09:34.773

试试这个：

```
JOptionPane.showMessageDialog(frame, radioOption.getSelectedItem().toString()); 
```

上面的代码`frame`是所有者窗口

编辑 ：

在您的代码中，正如您所评论`txtResult`的`JTextField`那样，`radioOption`文本将不会**显示**在`JTextField`任何`dialogbox`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:12:12.480

有文档，我建议您（不仅仅是您）在编写任何代码之前尝试阅读， [链接到示例](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html#RadioButtonDemo)第一行您的示例，[链接到文档](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:40:09.023

尝试把 jd.dispose(); 在您的代码末尾。这将删除消息对象。

# salesforce - 单击显示按钮显示顶点类代码

> ID：11755023
> 
> 赞同：0
> 
> 时间：2012-08-01T08:02:44.163
> 
> 标签：salesforce

我有一个动态选项列表字段，其中包含我的组织中的所有顶点类名称。页面上还有一个“显示”按钮。现在，如果用户从此选择列表中选择一个值并单击“显示”按钮，则该类的顶点代码应显示在下方。请建议我如何在我的 VF 页面中实现它。

谢谢！

```
<apex:form >
<apex:selectList value="{!selectedClass}" size="5">
<apex:selectOptions value="{!ClassList}" ></apex:selectOptions>
</apex:selectList>
<apex:pageBlock >
<apex:commandButton action="{!show}" value="Show" id="Button"/>
<apex:pageBlockSection title="My Current Class"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:38:00.250

You could query the `body` field of the `ApexClass` object for what you're looking for:

```
public class SomeController  {

    private List<ApexClass> allApexClasses;
    public String selectedClass {public get; public set;}
    public String apexCodeOutput {public get; private set;}

    public SomeController() {
        // only select classes that aren't part of a managed package, since you won't be able to view the body
        allApexClasses = [select id, name, body from ApexClass where lengthwithoutcomments <> -1 order by name asc];
    }

    public List<SelectOption> getClassList() {
        List<SelectOption> opts = new List<SelectOption> opts;
        for ( ApexClass ac : allApexClasses )
            opts.add(new SelectOption(ac.Id, ac.Name));
        return opts;
    }

    public PageReference show() {
        if ( selectedClass != null ) {
            Id classId = (Id) selectedClass;
            for ( ApexClass ac : allApexClasses ) {
                if ( classId == ac.Id ) {
                    apexCodeOutput = ac.body;
                    break;
                }
            }
        }
        return null;
    }
} 
```

And then in your VF page, just rerender the output code when clicking the button. You'll want to use a `<pre>` tag around the code to preserve spacing so the code is readable.

```
<apex:form>
    <apex:selectList value="{!selectedClass}" size="5">
        <apex:selectOptions value="{!ClassList}" ></apex:selectOptions>
    </apex:selectList>
    <apex:pageBlock >
        <apex:commandButton action="{!show}" value="Show" rerender="apexoutput" id="Button"/>
        <apex:pageBlockSection title="My Current Class">
            <apex:outputPanel id="apexoutput">
                <pre>{!apexcodeoutput}</pre>
            </apex:outputPanel>
        </apex:pageBlockSection>
    </apex:pageBlock>
</apex:form> 
```

# exception - WSO2 身份服务器 - LDAP 在只读模式下工作，但设置为 false

> ID：11755036
> 
> 赞同：3
> 
> 时间：2012-08-01T08:03:31.010
> 
> 标签：exception, ldap, wso2, wso2is, claims

`<Property name="ReadOnly">false</Property>`- 这是在我的身份服务器的 usr-mgt.xml 中设置的。

当我尝试调用设置用户声明值的方法时 - storeManager.setUserClaimValue(String userName, String claimURI, String claimValue,String profileName) 它给了我这个异常：

`org.wso2.carbon.user.core.UserStoreException: User store is operating in read only mode. Cannot write into the user store.`

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T05:39:26.693

如果用户存储管理器类上的 LDAP 是 ReadWrite，请在 user-mgt.xml 中调用以下类

class="org.wso2.carbon.user.core.ldap.ReadWriteLDAPUserStoreManager"

如果用户存储管理器类上的 LDAP 是只读的，请在 user-mgt.xml 中调用以下类

class="org.wso2.carbon.user.core.ldap.ReadOnlyLDAPUserStoreManager

# symfony - 如何在 symfony2 中一键提交多个相同类型的表单

> ID：11755038
> 
> 赞同：7
> 
> 时间：2012-08-01T08:03:37.250
> 
> 标签：symfony, doctrine-orm

我有 todolist，我在其中显示三种形式的任务类型

```
$task1 = new Task();
$form1 = $this->createForm(new MyForm('f1'), $task1);

$task2 = new Task('fo');
$form2 = $this->createForm(new MyForm('f2'), $task2);

$task3 = new Task();
$form3 = $this->createForm(new MyForm('f3'), $task3); 
```

现在的问题是我只有一个提交按钮。我怎样才能在一个控制器中保留这三个任务。用户也可以动态添加更多表单。

那么解决这个问题的方法是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T20:37:17.810

创建一个包含 s 集合的[Form Model](http://www.craftitonline.com/2011/07/symfony2-famous-ozmerks-form-model-pattern/)类。然后创建包含s的[集合](http://symfony.com/doc/master/cookbook/form/form_collections.html)。这样，您将拥有一个包含任意数量任务的表单。`TaskList``Task``TaskListType``TaskType`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-24T14:54:48.157

为了完整起见，请在下面找到一个完整的示例。

您应该创建一个代表所需形式的新模型。关键是您可能不想影响 Doctrine（例如，请参阅教义：模式：更新命令）。它可能会尝试为实际上并不存在的实体创建一个表。为避免这种情况，只需将模型类放在模型文件夹 (\src\Acme\Bundle\DemoBundle\Model\TaskList.php) 下。

假设以下是您的 TaskType 表单类：

```
<?php

namespace Acme\Bundle\DemoBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class TaskType extends AbstractType
{
    /**
     * @param FormBuilderInterface $builder
     * @param array $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('id', null, array('read_only' => true))
            ->add('name');
    }

    /**
     * @param OptionsResolverInterface $resolver
     */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(
            array(
                'data_class' => 'Acme\Bundle\DemoBundle\Entity\Task'
            )
        );
    }

    /**
     * @return string
     */
    public function getName()
    {
        return 'acme_demo_task';
    }
} 
```

这应该是您的 TaskList 模型类：

```
<?php

namespace Acme\Bundle\DemoBundle\Model;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Class TaskList
 * @package Acme\Bundle\DemoBundle\Model
 *
 * @ORM\Entity()
 */
class TaskList
{
    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     * @ORM\ManyToMany(targetEntity="\Acme\Bundle\DemoBundle\Entity\Task")
     */
    private $tasks;

    public function __construct()
    {
        $this->tasks = new ArrayCollection();
    }

    /**
     * @param \Acme\Bundle\DemoBundle\Entity\Task $task
     * @return $this
     */
    public function addTask(\Acme\Bundle\DemoBundle\Entity\Task $task)
    {
        $this->tasks[] = $task;

        return $this;
    }

    /**
     * @param \Acme\Bundle\DemoBundle\Entity\Task $task
     * @return $this
     */
    public function removeTask(\Acme\Bundle\DemoBundle\Entity\Task $task)
    {
        $this->tasks->remove($task);

        return $this;
    }

    /**
     * @return ArrayCollection
     */
    public function getTasks()
    {
        return $this->tasks;
    }

    /**
     * @param \Doctrine\Common\Collections\Collection $tasks
     * @return $this
     */
    public function setTasks(\Doctrine\Common\Collections\Collection $tasks)
    {
        $this->tasks = $tasks;

        return $this;
    }

    /**
     * @param \Knp\Component\Pager\Pagination\PaginationInterface $pagination
     * @return $this
     */
    public function setFromPagination(\Knp\Component\Pager\Pagination\PaginationInterface $pagination)
    {
        foreach ($pagination as $task) {
            $this->addTask($task);
        }

        return $this;
    }
} 
```

并在 TaskListType 类下面找到：

```
<?php

namespace Acme\Bundle\DemoBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class TaskListType extends AbstractType
{
    /**
     * @param FormBuilderInterface $builder
     * @param array $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add(
                'tasks',
                'collection',
                array(
                    'type' => new \Acme\Bundle\DemoBundle\Form\TaskType(),
                )
            )
            ->add('save', 'submit');
    }

    /**
     * @param OptionsResolverInterface $resolver
     */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(
            array(
                'data_class' => 'Acme\Bundle\DemoBundle\Model\TaskList'
            )
        );
    }

    /**
     * @return string
     */
    public function getName()
    {
        return 'acme_demo_task_list';
    }
} 
```

还有你的 services.yml（可选）：

```
services:
    acme.demo.form.type.task_list:
        class: Acme\Bundle\DemoBundle\Form\TaskListType
        tags:
            - { name: form.type, alias: acme_demo_task_list } 
```

和一个示例控制器：

```
public function indexAction($page)
{
    ini_set('xdebug.max_nesting_level', 300); // this might be useful with deeply nested forms

    $search = $this->getRequest()->get(
        'search',
        array(
            'name' => '',
            'date' => '',
            'lang' => $this->container->getParameter('acme_core.default_lang')
        )
    );

    /**
     * @var \Doctrine\ORM\EntityManager $em
     */
    $em = $this->getDoctrine()->getManager();

    $paginator = $this->get('knp_paginator');
    $pagination = $paginator->paginate(
        $em->getRepository('AcmeDemoBundle:Task')->getQueryFilteringByLangNameAndDate(
            $search['lang'],
            $search['name'],
            $search['date'] != '' ? new \DateTime($search['date']) : null
        ),
        $page,
        $this->getRequest()->get('elementsPerPage', 10)
    );

    $taskList = new TaskList();
    $taskList->setFromPagination($pagination);

    $form = $this->createForm('acme_demo_task_list', $taskList); // "acme_demo_task_list" has been defined in the services.yml file
    $form->handleRequest($this->getRequest());

    if ($form->isValid()) {
        foreach ($form->getData() as $task) {
            $em->merge($task);
        }
        $em->flush();
    }

    return $this->render(
        'AcmeDemoBundle:Task:index.html.twig',
        array(
            'search' => $search,
            'pagination' => $pagination,
            'form' => $form->createView()
        )
    );
} 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-01T14:15:39.950

我们遵循了“Francesco Casula”所展示的示例，并且效果很好。

出于 orur 的目的，我们不需要分页，所以这就是我们填充集合的方式（在 中`controller`）：

```
$entities = $em->getRepository('AcmeBundle:Stock')->findAll();

$stockList = new StockList(); // This is our model, what Francesco called 'TaskList'

foreach ($entities as $entity) {
    $stockList->addStock($entity);
}

// StockListType() is what Francesco called TaskListType
$form = $this->createForm(new StockListType(), $stockList, array(
    'action' => $this->generateUrl('stock_take_update'),
    'method' => 'POST',
    'attr' => array('class' => 'form-horizontal'),
)); 
```

对于那些需要自定义表单集合输出的人，我们设法通过迭代来访问子表单`{% for form in forms.children.stocks %}`。'Stocks' 是我们的表单构建器中的字段名称（在 中`StockListType`）：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add(
            'stocks', 'collection', array(
                'type' => new StockType(),
            )
        )
        ->add('submit', 'submit')
    ;
} 
```

这就是我们最终在 twig 视图中使用的内容：

```
{{ form_start(forms) }}
    <table class="table table-stripped table-hover">
        <thead>
            <th>#</th>
            <th>Name</th>
            <th>Code</th>
            <th>Location</th>
            <th>Total</th>
            <th>Updated Toal</th>
        </thead>
        <tbody>
            {% set counter = 1 %}
            {% for form in forms.children.stocks %}
                <tr>
                    <div class="hidden">
                        {{ form_widget(form.name) }}
                        {{ form_widget(form.code) }}
                        {{ form_widget(form.location) }}
                        {{ form_widget(form.available) }}
                        {{ form_widget(form.assigned) }}
                        {{ form_widget(form.minLevel) }}
                        {{ form_widget(form.type) }}
                        {{ form_widget(form.colourCode) }}
                    </div>
                    <td>{{ counter }}</td>
                    <td>
                        {% if form.vars.data.name is defined %}
                            {{ form.vars.data.name }}
                        {% endif %}
                    </td>
                    <td>
                        {% if form.vars.data.code is defined %}
                            {{ form.vars.data.code }}
                        {% endif %}
                    </td>
                    <td>
                        {% if form.vars.data.location is defined %}
                            {{ form.vars.data.location }}
                        {% endif %}
                    </td>
                    <td>
                        {% if form.vars.data.total is defined %}
                            {{ form.vars.data.total }}
                        {% endif %}
                    </td>
                    <td>{{ form_widget(form.total) }}</td>
                </tr>
                {% set counter = counter + 1 %}
            {% endfor %}
        </tbody>
    </table>
    {{ form_widget(forms.submit) }}
{{ form_end(forms) }} 
```

# c# - 如何通过匿名访问从 ASP.NET 获取 Windows 登录用户 ID

> ID：11755041
> 
> 赞同：0
> 
> 时间：2012-08-01T08:04:05.200
> 
> 标签：c#, asp.net

我有一个设置在表单和匿名访问上的 Web 应用程序。我有一个默认页面，我想在其上获取当前登录用户的窗口，它是一个 ASP.Net 应用程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:08:59.783

我相信您正在寻找[HttpContext.User.Identity.Name](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:08:59.523

您好，您可以尝试使用此代码

```
 WindowsIdentity wi = WindowsIdentity.GetCurrent();
   var result = wi.Name;
   var anonymous = wi.IsAnonymous; //For ensure your authentification mode 
```

您可以使用此代码

```
System.Web.HttpContext.Current.User.Identity.Name 
```

但是你必须确保你已经在你的安全包的线程中添加了你的主体，也许是 httpmodule。（如果您有自定义身份验证和授权）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:13:43.980

此代码有效：

```
 var w = WindowsIdentity.GetCurrent().Name;

        this.HttpContext.Trace.Warn(w); 
```

# r - R在列中组合具有不同长度的data.frame

> ID：11755048
> 
> 赞同：2
> 
> 时间：2012-08-01T08:04:37.133
> 
> 标签：r, merge, dataframe

我有一个问题，我想道歉，如果这个问题已经讨论过，即使我检查了旧帖子。

我有一个包含 2 列的 data.frame，第二列可以包含多个标识符，但数量可能会有所不同。在另一个 data.frame 中，标识符对应于另一个标识符。

```
df.1  

color   identifier
blue    A1, B2, C3, C4 
yellow  B2, C4, C6
green   A3

df.2

A1 Mercedes
A3 BMW
B2 Porsche
C3 Toyota
C4 Hundai
C5 Volkswagen
C6 Peugeot 
```

我想要的是这样的data.frame：

```
df.3

color   identifier        identifier2
blue    A1, B2, C3, C4    Mercedes, Porsche, Toyota, Hundai 
yellow  B2, C4, C6        Porsche, Hundai, Peugeot
green   A3                BMW 
```

一个 data.frame，其中包含标识符以及第二个 data.frame 的标识符。

我试图使用 apply 和 stack 和 unstack，但我一点也不成功。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:35:27.133

这是另一个解决方案，使用`strsplit`：

```
# The data
df.1  = read.table(header=TRUE, text="
color   identifier
blue    'A1, B2, C3, C4'
yellow  'B2, C4, C6'
green   'A3'", stringsAsFactors = FALSE)

df.2 = read.table(header=FALSE, text="
A1 Mercedes
A3 BMW
B2 Porsche
C3 Toyota
C4 Hundai
C5 Volkswagen
C6 Peugeot", stringsAsFactors=FALSE)
names(df.2) = c("identifier", "car")

df.1$identifier = strsplit(df.1$identifier, split=", ")
df.1$identifier1 = lapply(1:nrow(df.1), 
         function(x) df.2[which(df.2$identifier %in% df.1$identifier[[x]]), 2])
df.1
#    color     identifier                       identifier1
# 1   blue A1, B2, C3, C4 Mercedes, Porsche, Toyota, Hundai
# 2 yellow     B2, C4, C6          Porsche, Hundai, Peugeot
# 3  green             A3                               BMW 
```

请注意，`identifier`并且`identifier1`现在*是*您的`data.frame`. 我个人觉得这在以后更容易使用。

```
str(df.1)
# 'data.frame':  3 obs. of  3 variables:
#   $ color      : chr  "blue" "yellow" "green"
# $ identifier :List of 3
#  ..$ : chr  "A1" "B2" "C3" "C4"
#  ..$ : chr  "B2" "C4" "C6"
#  ..$ : chr "A3"
# $ identifier1:List of 3
#  ..$ : chr  "Mercedes" "Porsche" "Toyota" "Hundai"
#  ..$ : chr  "Porsche" "Hundai" "Peugeot"
#  ..$ : chr "BMW" 
```

`strsplit`如果有剩余的空格，您可能需要修改，但它适用于此示例数据。此外，为了`strsplit`工作，数据需要处于模式`as.character`（因此我`stringsAsFactors`在读取数据时使用）。

# 更新：write.table()

我*更*喜欢将数据保存在列表中，以防我想做进一步的分析。但是，如果数据完整或仅用于输出目的，您可能需要执行以下操作：

```
df.3 = df.1
df.3$identifier = sapply(df.3$identifier, paste0, collapse=", ")
df.3$identifier1 = sapply(df.3$identifier1, paste0, collapse=", ") 
```

这将允许您使用`write.table`since`identifier`和`identifier1`are now of mode`character`而不是`list`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:20:26.070

可能最简单的方法是使用正则表达式 with`gsub`进行替换。

重新创建您的数据：

```
df1 <- read.table(text="
color   identifier
blue    'A1, B2, C3, C4'
yellow  'B2, C4, C6'
green   A3
", header=TRUE)

df2 <- read.table(text="
A1 Mercedes
A3 BMW
B2 Porsche
C3 Toyota
C4 Hundai
C5 Volkswagen
C6 Peugeot 
", header=FALSE) 
```

现在您必须遍历颜色查找 ( `df2`) 的每个元素并在以下位置进行替换`df1`：

```
for (i in seq_len(nrow(df2))){
  df1$identifier <- gsub(df2[i, 1], df2[i, 2], df1$identifier)
} 
```

结果：

```
df1
   color                        identifier
1   blue Mercedes, Porsche, Toyota, Hundai
2 yellow          Porsche, Hundai, Peugeot
3  green                               BMW 
```

# c# - 如何在 Windows 8 C# Metro 应用程序中进行网络调用和更新 UI

> ID：11755053
> 
> 赞同：0
> 
> 时间：2012-08-01T08:04:42.110
> 
> 标签：c#, windows-phone-7, windows-8, microsoft-metro, windows-runtime

在我的 WP7 应用程序中，我使用 HttpWebRequest 类对 web 服务进行 http 调用并加载数据。在 UI 线程中，我使用 Deployment.Current.Dispatcher.BeginInvoke 方法进行网络调用，一旦收到响应，我将使用相同的 Deployment.Current.Dispatcher.BeginInvoke 方法来更新 UI。我们如何在 Windows 8 C# Metro 应用程序中做同样的事情，或者 Windows 8 Metro 应用程序中的等效方法是什么？我们可以使用相同的 HttpWebRequest 类或我们需要用于进行网络调用的其他类吗？请澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:10:25.967

[此](http://www.jayway.com/2012/04/12/converting-to-windows-8-from-windows-phone-httpclient-vs-httpwebrequest-5-of-12/)博客文章包含此问题的所有详细信息。这是关于将 WP7 应用程序转换为 Windows 8 的系列文章。

您需要使用[HttpClient](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.http.httpclient%28v=vs.110%29.aspx)类。此外，您不再需要 Dispatcher 调用。您可以只使用`async`and`await`并且一切都在同一个调用线程上工作。

# android - 获取带有全名详细信息和电话号码的 SINGLE 光标

> ID：11755055
> 
> 赞同：5
> 
> 时间：2012-08-01T08:04:55.063
> 
> 标签：android, contactscontract

我想创建一个同时包含名字、姓氏和电话号码的光标。这些列不位于 ContactsContract 下的任何可用容器中，我能够获取此信息的唯一方法是首先获取名称的光标，然后通过为每个联系人创建单独的光标来获取电话号码。该解决方案迫使我将数据读取到本地数据结构，而不仅仅是在光标上使用适配器，并且会产生大量性能开销（大约 5 秒，约 140 个电话号码联系人）。

有没有办法创建两个游标然后加入表？或者还有其他方法吗？在过去的两天里，我一直在为这个问题苦苦挣扎，并阅读了我在谷歌上找到的所有内容，但实际上我也无法得到任何我想要的东西。这不可能真的是不可能的，不是吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:09:50.883

您可以`DISPLAY_NAME`从`NUMBER`. `ContactsContract.CommonDataKinds.Phone`尝试这个：

```
Uri uri = Phone.CONTENT_URI;
String[] projection = new String[]
                {Phone.DISPLAY_NAME, Phone.NUMBER, Phone.CONTACT_ID, Phone._ID}
Cursor contactsCursor = getContentResolver().query(uri, projection, null, null, null); 
```

# iphone - 从服务器获取数据后如何在运行时使用控件

> ID：11755059
> 
> 赞同：0
> 
> 时间：2012-08-01T08:05:24.367
> 
> 标签：iphone, xcode

我想制作调查应用程序，在其中我从服务器问题中得到问题是我想将控件作为问题放置，例如如果我有问题，比如有列表，那么我想要下拉列表，如果问题类型是或否，那么我们可以使用切换按钮像这样和其他类型是使用滑块，所以有没有办法在运行时动态放置和创建控件，然后添加到视图

那么如何在ipad应用程序中添加控件以在运行时查看，以便根据问题类型我们有控件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:11:35.683

是的，您可以添加运行时控件，就在您从服务获得响应之后，根据响应以编程方式创建控件，

或者

如果您知道响应意味着只有 4 种或 5 种响应将出现，而不是在 .Xib 文件中获取所有控件并在获得服务器响应后使用它们。

只需添加您需要的控件并隐藏所有其他控件。

这是一个简单的方法，希望你明白我的意思:)

# javascript - 通过 Java 加载 XML 并成为 HTML DOM 的一部分

> ID：11755061
> 
> 赞同：0
> 
> 时间：2012-08-01T08:05:46.337
> 
> 标签：javascript, android, xml, dom, webview

我正在开发一个基于 WebView 的 Android 应用程序。该应用程序在主要的 Android 版本（即 2.3 及更高版本）上响应速度非常快，但在 Amazon Kindle fire 上却非常慢。这种缓慢行为的原因之一是它读取大量 xml 文件 (40-50) 以在单个 html 页面中加载内容，并且每页也有数百张图像。

我能想到的一种解决方案是使用原生 Android API（在线程中）读取和解析 xml 文件，然后将解析后的 xml 合并到 html 页面中。谁能告诉我如何在 JavaScript 中使用 Java 对象？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:21:03.023

**对于您的解析缓慢问题**
有一个 JS-> Java 接口以在 Java 中解析，并在 Java 中也有这些 XML 数据获取操作。

**显示太多图像速度缓慢**
滚动时仅显示选择性图像集。将所有图像一起显示会给浏览器渲染带来沉重的负担。所以使用延迟加载（jQuery 插件） - [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)仅在用户滚动时加载。

# batch-file - 批处理：使用管道在 for 循环中执行带引号的命令以查找

> ID：11755069
> 
> 赞同：4
> 
> 时间：2012-08-01T08:06:18.257
> 
> 标签：batch-file, cmd

您能否建议如何修复以下命令，该命令会从 svn 中删除未版本控制的项目

```
rem @echo off
for /f "tokens=2*" %%i in ('"c:\Program Files\TortoiseSVN\bin\svn.exe" status --no-ignore ^| find "?"') do echo %%i 
```

下面没有路径的变体有效：

```
rem @echo off
for /f "tokens=2*" %%i in ('svn.exe status --no-ignore ^| find "?"') do echo %%i 
```

但我需要使用 svn.exe 传递整个路径。在这种情况下，它输出 C:\Program is not a valid program

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T08:23:53.023

*试试这个：*

```
 for /f "usebackq tokens=2*" %%i in (`"c:\Program Files\TortoiseSVN\bin\svn.exe" status --no-ignore ^| find "?"`) do echo %%i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T16:35:44.710

当我遇到这个问题时，我尝试按照 Windows 命令参考 [1] 中的建议使用“usebackq”：

> 指定将反引号字符串作为命令执行，将单引号字符串作为文字字符串命令执行。此外，允许将 Set 中的文件名用引号引起来。

我发现这仍然给出了关于 C:\Program 不可执行的错误。

然后我记得，Windows cmd.exe 有非常奇怪的引用规则，如果执行字符串中的第一个和最后一个字符是引号，它们将被剥离[2]。

所以我尝试了这个，它对我有用：

```
for /F usebackq %%d in (`""path to command" arg arg "quoted arg""`) do @echo %%d 
```

* * *

[1] [http://technet.microsoft.com/en-us/library/cc754900.aspx](http://technet.microsoft.com/en-us/library/cc754900.aspx)

[2] [http://technet.microsoft.com/en-us/library/cc771320.aspx](http://technet.microsoft.com/en-us/library/cc771320.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-19T00:18:23.587

离开上面 Ben 的回答（[https://stackoverflow.com/a/25084830/2630028](https://stackoverflow.com/a/25084830/2630028)），下面的例子对我有用：

```
for /f "usebackq delims=" %%j in (`^""C:\Perl64\bin\perl" -e "print(qq(foo))"^"`) do (
    echo LINE: %%j 
) 
```

看来我必须用`^`（[https://ss64.com/nt/syntax-esc.html](https://ss64.com/nt/syntax-esc.html)）转义外部引号。

# sql-server-express - "sp_spaceused" 返回不是最新的数字

> ID：11755074
> 
> 赞同：1
> 
> 时间：2012-08-01T08:06:38.927
> 
> 标签：sql-server-express

我们在删除数据的 while 循环中使用“sp_spaceused”。
*我们这样做是为了保持在 10GB SQL Express Edition 限制之下。*

每晚运行的删除例程

```
PROCEDURE [dbo].[DeletePeriod4Data]
    @LIMIT_InMB AS FLOAT
AS
BEGIN
    SET NOCOUNT ON    

    DECLARE @MinBegin AS DATETIME
    DECLARE @SizePeriod4_InMB AS FLOAT

    EXEC [dbo].[GetDatabaseStatsPeriod4MB]
        @Size_InMB = @SizePeriod4_InMB OUTPUT

    WHILE @SizePeriod4_InMB > @LIMIT_InMB
    BEGIN

        SELECT @MinBegin = MIN(MONTH.ProdData.[Begin])
        FROM MONTH.ProdData

        PRINT 'deleting from period 4, month and year of: ' 
        PRINT @MinBegin

        DELETE
        FROM Month.ProdData
        WHERE 
            Year = DATEPART(YEAR, @MinBegin)
            AND
            Month = DATEPART(MONTH, @MinBegin)

        EXEC [GetDatabaseStatsPeriod4MB]
             @Size_InMB = @SizePeriod4_InMB OUTPUT
    END

END 
```

这是返回过时数字的罪魁祸首存储过程。

```
PROCEDURE [dbo].[GetDatabaseStatsPeriod4MB]
    @Size_InMB float OUTPUT 
AS
BEGIN
    CREATE TABLE #t (name SYSNAME, rows CHAR(11), reserved VARCHAR(18),  
        data VARCHAR(18), index_size VARCHAR(18), unused VARCHAR(18)) 

    DBCC UPDATEUSAGE(0); -- <-- helps?

    EXEC sp_msforeachtable @command1=
          'INSERT INTO #t EXEC sp_spaceused ''?'', @updateUsage=''TRUE''',
          @whereand=' and schema_name(schema_id) = ''Month'' '

    SELECT @Size_InMB = 
             SUM(CONVERT(INT, SUBSTRING(data, 1, LEN(data)-3)))/1024.0 
    FROM #t 

    DROP TABLE #t

    PRINT 'PERIODE 4 Size (Month)'
    PRINT @Size_InMB 

END 
```

我们尝试的是

1.  将参数“@updateUsage=TRUE”添加到 sp_spaceused
2.  添加了对“DBCC UPDATEUSAGE(0);”的调用
3.  将参数添加到“DBCC UPDATEUSAGE(0) WITH NO_INFOMSGS, COUNT_ROWS;”
4.  在我调用“UpdateUsage”之前使用延迟<br> WAITFOR DELAY '00:00:05' ---- 5 秒延迟

* * *

重现问题的通用代码

```
CREATE TABLE #t (name SYSNAME, rows CHAR(11), reserved VARCHAR(18),  
  data VARCHAR(18), index_size VARCHAR(18), unused VARCHAR(18)) 

EXEC sp_msforeachtable @command1=
  'INSERT INTO #t EXEC sp_spaceused ''?'', @updateUsage=''TRUE'''

SELECT SUM(CONVERT(INT, SUBSTRING(data, 1, LEN(data)-3)))/1024.0 
  FROM #t 

DROP TABLE #t

-- Delete something in your DB (Northwind)

-- Run the above again 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:49:27.173

您需要留出时间让 Ghost Cleanup 处理重影记录，因为 DELETE 实际上并没有删除任何内容，它只是将记录标记为页面上的插槽中的重影，然后清理这些记录是 Ghost Cleanup 任务的工作后来起来。您可以在 Paul 的博客文章中了解这一点：

[存储引擎内部——Ghost 深度清理](http://www.sqlskills.com/blogs/paul/post/inside-the-storage-engine-ghost-cleanup-in-depth.aspx)

[幽灵清理 - Redux](http://www.sqlskills.com/BLOGS/PAUL/post/Ghost-cleanup-redux.aspx)

[关闭 Ghost 清理任务以获得性能提升](http://www.sqlskills.com/BLOGS/PAUL/post/Turning-off-the-ghost-cleanup-task-for-a-performance-gain.aspx)

您还可以使用 SQL Server 2008+ 中的扩展事件跟踪 Ghost 清理活动，正如我在博客文章中所展示的：

[追踪幽灵清理](http://sqlskills.com/blogs/jonathan/post/An-XEvent-a-Day-%2815-of-31%29-Tracking-Ghost-Cleanup.aspx)

您要么需要在删除和检查用于运行 Ghost Cleanup 的空间之间等待，要么在删除和检查已用空间之间等待，如 Paul 在他的博客文章中解释的那样，通过强制索引扫描来强制 Ghost Cleanup。

# sql - 从字符串创建表

> ID：11755075
> 
> 赞同：0
> 
> 时间：2012-08-01T08:06:40.163
> 
> 标签：sql, postgresql

我正在使用 Postgres 8.3.11。我有一张像这样的桌子：

```
user | countries (varchar(100))
  h  | us
  g  | brazil,germany 
```

我想要的是显而易见的

```
user | countries
  h  | us
  g  | brazil
  g  | germany 
```

我创建了一个函数，它获取像“巴西，德国”这样的字符串并将其输出为单列表：

```
 |germany|
   |brazil | 
```

我可以使用游标逐行执行并执行它以获得我想要的东西，但必须有更好的 SQL 方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:46:52.173

[`regexp_split_to_table()`](http://www.postgresql.org/docs/8.3/interactive/functions-string.html)（现在 8.3 中的 Postgres）应该使这很容易：

```
SELECT usr, regexp_split_to_table(countries, ',') AS country FROM tbl; 
```

结果：

```
 usr | country
-----+---------
 h   | us
 g   | brazil
 g   | germany 
```

对于短字符串，这仍然是 PostgreSQL 9.1 中的首选解决方案。

`regexp_split_to_table()`但是，较长的字符串会降低性能。在 8.4+ 中使用`unnest(string_to_array(...))`。

顺便说一句，PostgreSQL 8.3 已经过时了。考虑[升级到当前版本 9.1](http://www.postgresql.org/support/versioning/)（9.2 即将发布）。

# jquery - jquery清除输入默认值

> ID：11755080
> 
> 赞同：77
> 
> 时间：2012-08-01T08:06:57.283
> 
> 标签：jquery

如何使用 jquery 清除输入表单 onfocus 的默认值并在按下提交按钮时再次清除它？

```
<html>
        <form method="" action="">
            <input type="text" name="email" value="Email address" class="input" />
            <input type="submit" value="Sign Up" class="button" />
        </form>
</html>

<script>
$(document).ready(function() {
    //hide input text
    $(".input").click(function(){
        if ($('.input').attr('value') == ''){
            $('.input').attr('value') = 'Email address'; alert('1');}
        if  ($('.input').attr('value') == 'Email address'){
            $('.input').attr('value') = ''}
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-08-01T09:57:25.750

你可以用这个..

```
<body>
    <form method="" action="">
        <input type="text" name="email" class="input" />
        <input type="submit" value="Sign Up" class="button" />
    </form>
</body>

<script>
    $(document).ready(function() {
        $(".input").val("Email Address");
        $(".input").on("focus", function() {
            $(".input").val("");
        });
        $(".button").on("click", function(event) {
            $(".input").val("");
        });
    });
</script> 
```

谈到自己的代码，问题是jquery的attr api是由

```
$('.input').attr('value','Email Adress'); 
```

而不是你所做的：

```
$('.input').attr('value') = 'Email address'; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-01T08:12:35.350

```
$(document).ready(function() {
  //...
//clear on focus
$('.input').focus(function() {
    $('.input').val("");
});
   //clear when submitted
$('.button').click(function() {
    $('.input').val("");
}); 
```

});

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-01T08:11:02.703

```
$('.input').on('focus', function(){
    $(this).val('');
});

$('[type="submit"]').on('click', function(){
    $('.input').val('');
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-01T08:12:07.737

除非您真的担心旧版浏览器，否则您可以`placeholder`像这样使用新的 html5 属性：

```
<input type="text" name="email" placeholder="Email address" class="input" /> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-01T08:10:24.463

试试看：

```
 var defaultEmailNews = "Email address";
  $('input[name=email]').focus(function() {
    if($(this).val() == defaultEmailNews) $(this).val("");
  });

  $('input[name=email]').focusout(function() {
    if($(this).val() == "") $(this).val(defaultEmailNews);
  }); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-21T19:11:46.837

只是简写

```
$(document).ready(function() {
    $(".input").val("Email Address");
        $(".input").on("focus click", function(){
            $(this).val("");
        });
    });
</script> 
```

# php - Facebook 用户信息流中的实时更新

> ID：11755085
> 
> 赞同：1
> 
> 时间：2012-08-01T08:07:15.230
> 
> 标签：php, facebook-graph-api, facebook-php-sdk, facebook-apps

我正在使用 php 创建一个 Web 应用程序。我的应用程序中有一个 facebook 登录链接。当用户登录时，我想在他的新闻源和我网站的墙上显示他的实时更新。我正在使用 Facebook PHP SDK。

我在 facebook 上阅读了有关实时更新的信息

[https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)

使用 facebook 实时更新实现此功能的任何想法。

如果不可能，我计划在特定时间间隔使用轮询 facebook 服务器来实现它。

请让我知道你的想法。

# java - 带有 LableField 黑莓的 onClickListner 问题

> ID：11755087
> 
> 赞同：0
> 
> 时间：2012-08-01T08:07:18.583
> 
> 标签：java, blackberry

我正在开发一个应用程序，我需要在其中`call at particular phone number`使用`LableField`并制作`Number.setChangeListener(this);`和实现它的方法`fieldChanged`并尝试处理事件，但我无法做到`lablefield`

**这是代码::**

```
import net.rim.blackberry.api.invoke.Invoke;
import net.rim.blackberry.api.invoke.PhoneArguments;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.FontFamily;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.component.BitmapField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.NullField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.decor.BackgroundFactory;

public class AboutM1 extends MainScreen implements FieldChangeListener {

    VerticalFieldManager TOPVFM , DescriptionVFM,BottomVFM;
    HorizontalFieldManager TOPHFM,CallHFM,EmailHFM,VIsitUsHFM ;

    LabelField toplable,Description,Description2,Number,callus,Email,EmailID,Visitus,VisitLink;

    Bitmap logom1;
    BitmapField imgField;

    public AboutM1() {

        ((VerticalFieldManager) getMainManager())
                .setBackground(BackgroundFactory
                        .createSolidBackground(0xEDEDED));

         TOPVFM = new VerticalFieldManager(USE_ALL_WIDTH);
         TOPHFM = new HorizontalFieldManager(
                FIELD_HCENTER | FIELD_VCENTER);

         AllBITMAPDeclaration();

         toplable = new LabelField("\n Welcome to", FIELD_BOTTOM) {
            public void paint(Graphics g) {
                g.setBackgroundColor(0xECECEC);
                g.fillRect(0, 0, getWidth(), getHeight());
                g.setColor(Color.RED);

                g.clear();
                super.paint(g);
            }
        };

        FontFamily fontFamily[] = FontFamily.getFontFamilies();
        Font font = fontFamily[1].getFont(FontFamily.CBTF_FONT, 20);
        font = fontFamily[1].getFont(Font.BOLD, 25);
        toplable.setFont(font);

         imgField = new BitmapField(logom1, FIELD_BOTTOM);

        TOPHFM.add(toplable);
        TOPHFM.add(imgField);

        TOPVFM.add(TOPHFM);

        add(TOPVFM);
        LabelField Greenline = new LabelField(
                "_______________________________________") {
            protected void paint(Graphics g) {
                g.setColor(0x324F85);
                super.paint(g);
            }

        };

        add(Greenline);

         DescriptionVFM = new VerticalFieldManager(
                VERTICAL_SCROLL);
         Description = new LabelField(
                "\nasdasdasd  as da sd asd a sd reert er ter t e",
                USE_ALL_WIDTH);
         Description2 = new LabelField(
                "\n\n About Us \n For customer care \n\n");
        /*
         * add(Description); add(Description2);
         */

        DescriptionVFM.add(Description);
        DescriptionVFM.add(new NullField(NullField.FOCUSABLE));
        DescriptionVFM.add(Description2);

        /******************************Bottom Area******************************************/

         BottomVFM = new VerticalFieldManager(USE_ALL_WIDTH );
            CallHFM = new HorizontalFieldManager(
                FIELD_VCENTER);
             callus = new LabelField("Call: ", FIELD_VCENTER);
            Number = new LabelField("+91-79-30487400", FIELD_VCENTER) {

            protected void paint(Graphics g) {
                g.setColor(0x324F85);

                // g.fillRoundRect(0, 0, 50, 5, 7, 7);
                super.paint(g);
            }

            };
            font = fontFamily[2].getFont(Font.BOLD, 18);
            Number.setFont(font);

            CallHFM.add(callus);
            CallHFM.add(Number);
            Number.setChangeListener(this);

            EmailHFM = new  HorizontalFieldManager(FIELD_VCENTER);
             Email = new LabelField("Email: ", FIELD_VCENTER);
             EmailID = new LabelField("Customasdercare@m1asdshopping.com", FIELD_VCENTER) {
                protected void paint(Graphics g) {
                    g.setColor(0x324F85);
                    super.paint(g);
                    }
                };

                EmailID.setFont(font);
                EmailID.setChangeListener(this);
                EmailHFM.add(Email);
                EmailHFM.add(EmailID);

             VIsitUsHFM = new  HorizontalFieldManager(FIELD_VCENTER);
             Visitus = new LabelField("Visit us at: ", FIELD_VCENTER);
             VisitLink = new LabelField("www.asdasd.com", FIELD_VCENTER) {
                protected void paint(Graphics g) {
                    g.setColor(0x324F85);
                    super.paint(g);
                    }
                };

                VisitLink.setFont(font);
                VisitLink.setChangeListener(this);
                VIsitUsHFM.add(Visitus);
                VIsitUsHFM.add(VisitLink);

        BottomVFM.add(CallHFM);
        BottomVFM.add(EmailHFM);
        BottomVFM.add(VIsitUsHFM);

        // add(BottomVFM);
        DescriptionVFM.add(BottomVFM);

        /********************************* END BOTTOM ************************************************/
        add(DescriptionVFM);

    }

    private void AllBITMAPDeclaration() {
        // TODO Auto-generated method stub
        logom1 = Bitmap.getBitmapResource("logo36X36.png");
    }

    public void fieldChanged(Field field, int context) {
        // TODO Auto-generated method stub
        if(field == Number )
        {
            Dialog.alert("asdasd");
             /* PhoneArguments arguments = new PhoneArguments(PhoneArguments.ARG_CALL, "180065449877"); 
              Invoke.invokeApplication(Invoke.APP_TYPE_PHONE, arguments);*/
        }
        if(field == EmailID)
        {
            Dialog.alert("asdasd");
        }
        if(field == VisitLink)
        {
            Dialog.alert("asdasd");

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:21:43.013

试试这个 -

```
 LabelField  Number = new LabelField("+91-79-30345487400a5675675676", FIELD_VCENTER|Field.FOCUSABLE) {
        protected void paint(Graphics g) {
            g.setColor(0x324F85);

            // g.fillRoundRect(0, 0, 50, 5, 7, 7);
            super.paint(g);
        }
        protected boolean navigationClick(int status, int time) {
           Dialog.alert("clicked");
            return super.navigationClick(status, time);
        }

        };
        add(Number); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:17:23.697

您需要`navigationClick`在`LabelField`.

```
protected boolean navigationClick(int status, int time) {
    fieldChangeNotify(0);
    return true;
} 
```

# android - Android 应用内结算错误

> ID：11755093
> 
> 赞同：1
> 
> 时间：2012-08-01T08:07:43.283
> 
> 标签：android, in-app-purchase, in-app-billing

我已按照谷歌说明实施应用内购买服务。

作为受邀用户，我获得了访问 Google Play 开发者控制台的权限。我从中获取了私钥，并将我的谷歌帐户添加到带有测试帐户的输入字段中。之后，我创建了 APK 文件并使用有效证书对其进行了签名。然后将应用程序上传到 Google Play 但没有发布。之后，我创建了所需的应用内购买并发布了它们。然后在我的设备上安装了相同的签名 apk 文件。

在发布应用内购买后不久，我的应用程序给了我类似“未找到”的消息，但一段时间后它变得可用。现在我可以从应用程序中购买所有项目，但没有其他安装相同 APK 文件的人不能。我试图将他们的电子邮件地址添加到个人资料中的测试帐户列表中 - 不走运，即使是 Google Play 帐户的用户所有者也无法购买任何东西。他们不断收到类似“您选择的商品不可购买”之类的信息当他们尝试购买测试购买商品（文档中描述的商品）时，他们可以成功获得“android.test.purchased: PURCHASED”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:12:11.517

Google Play 需要很长时间来更新其服务器。当我第一次在应用计费中实现时，我必须至少重写所有内容 50 次。什么都没有改变，除了大约 12 小时后，一切都开始神奇地工作。很可能他们的服务器尚未更新。如果您可以正确使用测试项目，那么您的实现可能没问题，您只需要等待服务器更新即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:31:52.267

只有您在 Play 商店中上传的签名 apk 文件才能用于购买应用内产品。在play store注册in app id之前，您是否在签名的apk文件中提供了in app id。那么只有其他人可以购买该项目。

根据编辑

看到你使用了 android.test.purchase ri8 它是一个测试 id，当你让你的应用成为现实时你需要用你自己的应用内 id 替换它。然后你有一个问题如何获得应用内 id。它非常简单在草稿中保存您的应用程序（未发布）后，可以选择为您的应用程序添加应用程序内产品。单击该选项，您将在其中一个字段中看到应用程序 ID，然后填写应用程序 ID 并设置相应的金额为您的产品发布应用内产品而不是应用。将 android.test.purchase 替换为已签名 apk 中的新 id 并等待一段时间，以便服务器可以更新您的更改。

# security - nginx 中的子域 cookie 共享

> ID：11755094
> 
> 赞同：0
> 
> 时间：2012-08-01T08:07:44.557
> 
> 标签：security, cookies, nginx, subdomain, gunicorn

我有服务器，运行一些站点。例如：example.com a.example.com b.example.com 所有站点都通过 nginx 路由到 unix 域套接字。每个站点都是 gunicorn 实例。

来自子域的应用程序可以从 example.com 或其他子域读取/写入 cookie 数据吗？如果是，如何禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:46:56.497

当然，您可以为子域使用单独的 cookie。Cookie 标准允许您设置域，这将是浏览器将 cookie 发送回的唯一域。您可以将“a.example.com”设置为域，浏览器只会将来自该域的 cookie 发送回该域。

根据我对[RFC 2965](http://www.faqs.org/rfcs/rfc2965.html)的 cookie 的阅读，“a.example.com”无法为“b.example.com”设置 cookie，只能为“example.com”设置 cookie。

我认为底线是确保您正在使用 cookie 的“域”属性为子域设置 cookie，而不仅仅是“example.com”，所有子域都可以读取和写入。

# javascript - 用户登录社交插件时的 auth.statusChange 事件（评论）？

> ID：11755099
> 
> 赞同：2
> 
> 时间：2012-08-01T08:08:07.690
> 
> 标签：javascript, facebook, authentication, sdk, comments

我在我的页面上使用了一些社交插件（主要是 fb:comments），并且我熟悉 Facebook 的 JavaScript SDK。现在我想知道如果用户登录以发送评论，JS SDK是否会发送'auth.statusChange'，因为我无法让它工作......

由于每个人都喜欢代码，这里有一个例子：

```
<div id="fb-root"></div>
<script type="text/javascript">
    window.fbAsyncInit = function() {
        FB.init({
            ...
        });

        function onFBLoginStatusChange(response) {
            // function is never triggered
        }

        FB.Event.subscribe('auth.statusChange', onFBLoginStatusChange);
    }
</script>
<fb:comments href="..."></fb:comments> 
```

现在评论本身工作得很好，但是我希望当用户登录发表评论时我可以得到“auth.statusChange”事件。如果我在页面上提供自己的登录按钮，我可以捕捉到该事件，但我想避免这种情况。

那是因为 Facebook 实际上为评论呈现了一个 iframe 吗？有什么办法吗？

# ruby - 如何要求一个中文命名的 ruby 文件？

> ID：11755101
> 
> 赞同：2
> 
> 时间：2012-08-01T08:08:10.740
> 
> 标签：ruby, watir

如何 require 一个中文命名的 ruby​​ 文件，例如 require '测试'！</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:03:17.143

> 如何要求一个中文命名的ruby文件，例如`require '测试'`！</p>

只是

```
require '测试' 
```

为什么文件名的语言仍然很重要？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:36:04.633

为什么要使用汉字来命名文件？

我强烈建议不要这样做。根据我的经验，现代软件（包括操作系统）在大多数情况下都不能正确处理这些文件。

# javascript - 是否有用于 javascript 的 flex - bison 解析器？

> ID：11755104
> 
> 赞同：9
> 
> 时间：2012-08-01T08:08:29.593
> 
> 标签：javascript, bison, flex-lexer

是否有公开可用的解析器？否则，我打算使用[http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf中的语法规则编写一个](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T10:17:52.700

我想你可以试试`Jison`。

> Jison 将上下文无关文法作为输入，并输出一个能够解析该文法所描述的语言的 JavaScript 文件。然后，您可以使用生成的脚本来解析输入并根据输入接受、拒绝或执行操作。如果您熟悉 Bison 或 Yacc 或其他克隆，那么您几乎可以开始使用了。

[http://zaach.github.com/jison/docs/](http://zaach.github.com/jison/docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T07:18:56.520

或者你可以试试 Jacob，一个用于 JavaScript 的词法分析器和解析器生成器：

[http://canna71.github.io/Jacob/](http://canna71.github.io/Jacob/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-01T10:46:05.613

那里有很多解析 JS 的程序，主要是许多 linter 程序。JSLINT/JSHINT 等 Crockford 写了一些关于他在 JSLINT 中使用的解析器[http://javascript.crockford.com/tdop/tdop.html](http://javascript.crockford.com/tdop/tdop.html)

我知道它不是生成的野牛/语法，但这是一个严格的要求吗？

# php - Mysql时区并从一天开始选择行

> ID：11755110
> 
> 赞同：4
> 
> 时间：2012-08-01T08:09:01.913
> 
> 标签：php, mysql, timezone, convert-tz

我使用 MySQL DATETIME 列来存储日期和时间。日期采用 UTC。我想从一天中选择项目。我现在在做什么：

```
SELECT * FROM data WHERE DATE(CONVERT_TZ(datetime, 'UTC', 'Australia/Sydney')) = '2012-06-01' 
```

请注意，时区取决于用户

问题是表格增长速度很慢。有什么解决方案可以让它更快吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T08:22:30.530

目前，您的查询必须计算数据库每一行的转换。您可能可以通过反过来转换来使事情变得更好，以便转换只发生一次（或实际上两次，因为您必须形成一个范围）。然后一个适当的索引`datetime`应该会让事情变得非常快。

```
SELECT * FROM data
WHERE datetime BETWEEN CONVERT_TZ('2012-06-01 00:00:00', 'Australia/Sydney', 'UTC')
                   AND CONVERT_TZ('2012-06-01 23:59:59', 'Australia/Sydney', 'UTC') 
```

或者，如果您担心`23:60:00`任何查询都无法匹配闰秒，您可以这样做

```
SELECT * FROM data
WHERE datetime >= CONVERT_TZ('2012-06-01', 'Australia/Sydney', 'UTC')
  AND datetime < CONVERT_TZ('2012-06-01' + INTERVAL 1 DAY, 'Australia/Sydney', 'UTC') 
```

在后一种形式中，您不必在 PHP 端添加小时数，而是可以简单地将日期作为字符串参数传递。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-23T15:27:15.233

根据您的*实际*目标，使用`TIMESTAMP`代替`DATETIME`可能是一个很好的解决方案。

`TIMESTAMP`将日期时间存储为 UTC，在存储和获取时从/到本地时区进行转换。这样，我从您的表中读取的内容自动与您存储的内容不同（假设我们位于不同的时区）。

是的，使用@MvG 翻转查询的方法。是的，使用他的第二种形式。

并索引该列。在复合索引中，将时间戳放在最后，即使它更具选择性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:16:26.210

1.  不要做选择 *
2.  索引 - 确保索引适当的列/id 字段。
3.  做时间转换php端。
4.  或者确保您执行 1 和 2 并且它可能被包装到存储过程中，将时区作为参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-24T20:48:34.957

目前 MySQL 查询如下：

```
SELECT * FROM data
WHERE datetime >= CONVERT_TZ('2012-06-01', '+00:00', '+10:00')
  AND datetime < CONVERT_TZ('2012-06-01' + INTERVAL 1 DAY, '+10:00', '+00:00') 
```

# c# - 为什么 WCF 服务在持久化新实体之前执行查询全部？

> ID：11755111
> 
> 赞同：2
> 
> 时间：2012-08-01T08:09:02.913
> 
> 标签：c#, .net, wcf-data-services, odata

我正在开发一个更大的项目，该项目使用 WCF 数据服务和 OData 在前端和后端之间进行通信，并且在创建实体时我们遇到了性能问题。深入研究该问题后发现，当客户端尝试保存新实体时，会在服务中执行查询，返回所有实体，然后将其丢弃，然后插入数据。

我在想这个问题与我们的应用程序是如何创建的有关。它使用自定义提供程序，但奇怪的是即使是最简单的测试项目也会出现问题。

我使用了下面发布的以下代码，并在 Provider.cs 中设置了断点。当我使用 HttpRequester Firefox 插件调用它以根据 OData 发送 POST 请求（插入）时

1.  IQueryable 被调用
2.  调用 CreateResource
3.  SetValue 被多次调用
4.  调用 SaveChanges

我有一个问题，为什么调用 IQueryable 以及如何防止它？我无法弄清楚。

在我们的现实生活场景中，而不是在这个测试应用程序中，IQueryable 返回数千条记录，甚至更多，并且可能非常耗时。这会影响插入操作的性能。

**请求插入记录**

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<entry xml:base="http://localhost:50366/MyDataService.svc/" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://www.w3.org/2005/Atom">
<id>http://localhost:50366/MyDataService.svc/Employees(0)</id>
<title type="text"></title>
<updated>2012-07-31T18:03:45Z</updated>
<author>
  <name />
</author>
<link rel="edit" title="Employee" href="Employees(0)" />
<category term="Test.Dto.Employee" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" />
<content type="application/xml">
  <m:properties>
    <d:EmployeeID m:type="Edm.Int32">2</d:EmployeeID>
    <d:LastName>Test</d:LastName>
    <d:FirstName>Data</d:FirstName>
  </m:properties>
</content>
</entry> 
```

**MyDataService.svc.cs：**

```
using System;
using System.Collections.Generic;
using System.Data.Services;
using System.Data.Services.Common;
using System.Linq;
using System.ServiceModel.Web;
using System.Web;

namespace Test
{
    public class MyDataService : DataService<Provider>
    {
        // This method is called only once to initialize service-wide policies.
        public static void InitializeService(DataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("*", EntitySetRights.All);
            config.SetServiceOperationAccessRule("*", ServiceOperationRights.All);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
        }
    }
} 
```

**员工.cs**

```
using System.Data.Services.Common;

namespace Test.Dto
{

    [DataServiceKey("EmployeeID")]
    public class Employee
    {
        public virtual int EmployeeID { set; get; }
        public virtual string LastName { set; get; }
        public virtual string FirstName { set; get; }
    }

} 
```

**提供者.cs**

```
using System.Linq;
using Test.Dto;
using System.Collections.Generic;
using System.Data.Services;
namespace Test
{

    public class Provider : IUpdatable
    {
        static IList<Employee> _employees = new List<Employee>() {
            new Employee {
                EmployeeID = 1,
                FirstName = "No",
                LastName = "Name"
            }
        };

        IList<Employee> _updates = new List<Employee>();

        public IQueryable<Employee> Employees 
        { 
            get 
            {
                return Provider._employees.AsQueryable();
            } 
        }

        public void AddReferenceToCollection(object targetResource, string propertyName, object resourceToBeAdded)
        {
            throw new System.NotImplementedException();
        }

        public void ClearChanges()
        {
            _updates.Clear();
        }

        public object CreateResource(string containerName, string fullTypeName)
        {
            if (Equals(fullTypeName, typeof(Employee).FullName))
            {
                var entity = new Employee();
                _updates.Add(entity);
                return entity;
            }
            else
            {
                throw new System.NotImplementedException();
            }                              
        }

        public void DeleteResource(object targetResource)
        {
            throw new System.NotImplementedException();
        }

        public object GetResource(IQueryable query, string fullTypeName)
        {
            throw new System.NotImplementedException();
        }

        public object GetValue(object targetResource, string propertyName)
        {
            throw new System.NotImplementedException();
        }

        public void RemoveReferenceFromCollection(object targetResource, string propertyName, object resourceToBeRemoved)
        {
            throw new System.NotImplementedException();
        }

        public object ResetResource(object resource)
        {
            throw new System.NotImplementedException();
        }

        public object ResolveResource(object resource)
        {
            return resource;
        }

        public void SaveChanges()
        {
            foreach (var item in _updates)
            {
                _employees.Add(item);                
            }
        }

        public void SetReference(object targetResource, string propertyName, object propertyValue)
        {
            throw new System.NotImplementedException();
        }

        public void SetValue(object targetResource, string propertyName, object propertyValue)
        {
            targetResource.GetType().GetProperty(propertyName).SetValue(targetResource, propertyValue, null);
        }
    }

} 
```

**中断 IQueryable 时的堆栈跟踪**

```
>    WebApplication5.DLL!Test.Provider.Employees.get() Line 24    C#
    [Lightweight Function]    
    System.Data.Services.dll!System.Data.Services.Providers.ReflectionServiceProvider.GetResourceContainerInstance(System.Data.Services.Providers.ResourceSet resourceContainer) + 0x1ec bytes    
    System.Data.Services.dll!System.Data.Services.Providers.BaseServiceProvider.GetQueryRootForResourceSet(System.Data.Services.Providers.ResourceSet container) + 0xb bytes    
    System.Data.Services.dll!System.Data.Services.RequestUriProcessor.CreateFirstSegment(System.Data.Services.IDataService service, string identifier, bool checkRights, string queryPortion, bool isLastSegment, out bool crossReferencingUrl) + 0x40e bytes    
    System.Data.Services.dll!System.Data.Services.RequestUriProcessor.CreateSegments(string[] segments, System.Data.Services.IDataService service) + 0x103 bytes    
    System.Data.Services.dll!System.Data.Services.RequestUriProcessor.ProcessRequestUri(System.Uri absoluteRequestUri, System.Data.Services.IDataService service) + 0x3b bytes    
    System.Data.Services.dll!System.Data.Services.DataService<Test.Provider>.ProcessIncomingRequestUri() + 0xe2 bytes    
    System.Data.Services.dll!System.Data.Services.DataService<Test.Provider>.HandleRequest() + 0xc0 bytes    
    System.Data.Services.dll!System.Data.Services.DataService<Test.Provider>.ProcessRequestForMessage(System.IO.Stream messageBody) + 0x65 bytes    
    [Lightweight Function]    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(object instance, object[] inputs, out object[] outputs) + 0x33f bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x137 bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x5e bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x6c bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x89 bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x59 bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x3b bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x4e bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x125 bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x34 bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.MessageRpc.Process(bool isOperationContextSet) + 0xff bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(System.ServiceModel.Channels.RequestContext request, bool cleanThread, System.ServiceModel.OperationContext currentOperationContext) + 0x44b bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(System.ServiceModel.Channels.RequestContext request, System.ServiceModel.OperationContext currentOperationContext) + 0x127 bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(System.IAsyncResult result) + 0x43 bytes    
    System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(System.IAsyncResult result) + 0x44 bytes    
    System.Runtime.DurableInstancing.dll!System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(System.IAsyncResult result) + 0x32 bytes    
    System.Runtime.DurableInstancing.dll!System.Runtime.AsyncResult.Complete(bool completedSynchronously) + 0xfd bytes    
    System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.AsyncQueueReader.Set(System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.Item item) + 0x44 bytes    
    System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.EnqueueAndDispatch(System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.Item item, bool canDispatchOnThisThread) + 0x1aa bytes    
    System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.EnqueueAndDispatch(System.ServiceModel.Channels.RequestContext item, System.Action dequeuedCallback, bool canDispatchOnThisThread) + 0x5e bytes    
    System.ServiceModel.dll!System.ServiceModel.Channels.SingletonChannelAcceptor<System.ServiceModel.Channels.IReplyChannel,System.ServiceModel.Channels.ReplyChannel,System.ServiceModel.Channels.RequestContext>.Enqueue(System.ServiceModel.Channels.RequestContext item, System.Action dequeuedCallback, bool canDispatchOnThisThread) + 0x6b bytes    
    System.ServiceModel.dll!System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(System.ServiceModel.Channels.HttpRequestContext context, System.Action callback) + 0x1b4 bytes    
    System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(System.ServiceModel.Activation.HostedHttpRequestAsyncResult result) + 0xd6 bytes    
    System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest() + 0x232 bytes    
    System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest() + 0x27 bytes    
    System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(object state) + 0x49 bytes    
    System.ServiceModel.Activation.dll!System.ServiceModel.AspNetPartialTrustHelpers.PartialTrustInvoke(System.Threading.ContextCallback callback, object state) + 0x35 bytes    
    System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequestWithFlow(object state) + 0x7a bytes    
    System.Runtime.DurableInstancing.dll!System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(uint errorCode, uint numBytes, System.Threading.NativeOverlapped* nativeOverlapped) + 0x78 bytes    
    System.Runtime.DurableInstancing.dll!System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(uint error, uint bytesRead, System.Threading.NativeOverlapped* nativeOverlapped) + 0x39 bytes    
    mscorlib.dll!System.Threading._IOCompletionCallback.PerformIOCompletionCallback(uint errorCode, uint numBytes, System.Threading.NativeOverlapped* pOVERLAP) + 0x74 bytes    
    [Native to Managed Transition]    
    [Appdomain Transition]    
    [Native to Managed Transition] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:33:07.800

这里有几个问题：

1.  我们在 WCF DS 中有一个错误。当我们在 .NET Framework 中时，很难考虑修复这个问题，因为可能会发生重大更改。现在我们已经脱离了框架并且我们有一个公开的问题，我们应该解决这个问题。
2.  我们不枚举 IQueryable，这意味着 QueryProvider 永远不会真正执行查询。只要 getter 只是返回一个 IQueryable 并且不做任何工作，我们应该不会看到任何超过名义性能的影响。

综上所述，这是我们可以而且应该解决的问题，这样我们就不会让人们对此感到疑惑。如果我们有足够的带宽，我们将尝试在 5.0.2 或 5.1.0 中修复。

# php - 重定向无法正常工作

> ID：11755112
> 
> 赞同：0
> 
> 时间：2012-08-01T08:09:03.923
> 
> 标签：php, jquery

这是一个非常愚蠢的问题，但不知何故它不起作用我有一个创建文件的功能，如果它通过它我希望它将用户重定向到X页面..在这种情况下是1.php....但不知何故不工作：S 为什么？

```
 //Creates File, populates it and redirects the user.
if (createfile($dbFile)) { 
    header('Location: 1.php');
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:11:32.423

您需要[`exit()`](http://php.net/exit)在发送重定向标头后：

```
 if (createfile($dbFile)) {
     header('Location: http://yoursite.com/path/to/1.php', true, 302);
     exit();
 } 
```

否则，PHP 继续执行。如果是您`exit()`，客户端会在您调用`header()`.

您还应该注意[PHP 文档页面`header()`](http://php.net/header)上的以下警告：

> HTTP/1.1 需要绝对 URI 作为[Location 的参数：](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)包括方案、主机名和绝对路径，但一些客户端接受相对 URI。您通常可以使用`$_SERVER['HTTP_HOST']`,`$_SERVER['PHP_SELF']`并`dirname()`自己从相对的 URI 中创建一个绝对 URI：

```
<?php
/* Redirect to a different page in the current directory that was requested */
$host  = $_SERVER['HTTP_HOST'];
$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
$extra = 'mypage.php';
header("Location: http://$host$uri/$extra");
exit;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:11:42.543

您是否尝试过使用绝对位置？

```
$host  = $_SERVER['HTTP_HOST'];
$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
$extra = 'mypage.php';
header("Location: http://$host$uri/$extra");
exit; 
```

[来源](http://php.net/manual/en/function.header.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:16:20.313

尝试;

```
if (createfile($dbFile)) { 
   header("Refresh: 0; URL=1.php");
   exit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:12:44.793

我有一个类似的问题，代码在标头位置之后仍在执行。这就是为什么我总是做 exit(); 然后

# ios - 显示一个开发者/公司的所有应用程序

> ID：11755116
> 
> 赞同：2
> 
> 时间：2012-08-01T08:09:17.167
> 
> 标签：ios, iphone-developer-program

我想打开 iTunes，其中包含特定开发人员或公司的所有应用程序列表，在这种情况下是我自己的应用程序。

问题是我不知道 URL 字符串应该如何

`itms://itunes.com/apps/xxxx`

我应该用什么替换这个xxx？我在哪里可以找到这段文字。是公司名吗？如果是这样，我应该在开发者帐户的个人资料信息中查找它。

还能用什么？我听说有一些艺术家 ID 或类似的东西。如果是这样，我该如何找到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:30:27.163

好吧，如果您事先知道您正在寻找的开发人员或公司，您可以使用 Apple 的[iTunes Link Maker 网络实用程序](http://itunes.apple.com/linkmaker/)为应用商店（或任何商店）生成链接。您只需将开发人员/公司名称放在“搜索”字段中并将“媒体类型”设置为 iOS 应用程序（或您需要的任何内容）。搜索完成后，单击“艺术家”下的相应结果链接，您将看到一个包含如下链接的表格：

[http://itunes.apple.com/us/artist/vasileios-akoinoglou/id339374807?uo=4](http://itunes.apple.com/us/artist/vasileios-akoinoglou/id339374807?uo=4)

请注意，您可以安全地替换`http://`为`itms://`so 以避免重定向（如果您使用 http，则链接首先在 Safari 中打开，然后在 Appstore 中打开）。正如我从链接中看到的那样，后面的组件`artist`是开发人员/公司名称（空格由破折号代替），`id`我认为~~是注册 ID~~（编辑：不是）。我希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:35:26.500

在这种情况下，iTunes 查找 API 也会有所帮助 - 只需替换以下 URL 中任何应用程序的 adamID：

```
 http://itunes.apple.com/lookup?id=524731580 
```

在结果中，查找 artistViewUrl 以确定链接到此卖家开发的所有应用的最佳 URL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:18:16.517

您的 URL 应采用以下格式，以便 AppStore 应用在 iOS 上打开它：

[http://ax.search.itunes.apple.com/WebObjects/MZSearch.woa/wa/search?media=software&term=ideal%20development%20aps](http://ax.search.itunes.apple.com/WebObjects/MZSearch.woa/wa/search?media=software&term=ideal%20development%20aps)

这基本上对应用商店中的一个词进行搜索。这是我们找到的唯一防弹解决方案，但如果您的开发人员名称不小心与其他开发人员或产品匹配，则可能会出现问题。另请注意，有时搜索会失败，在这种情况下，需要完全关闭 AppStore 应用程序。

# c# - rhino 嘲笑 AssertWasNotCalled 的使用

> ID：11755120
> 
> 赞同：4
> 
> 时间：2012-08-01T08:09:38.830
> 
> 标签：c#, unit-testing, rhino-mocks

我做了以下存根

```
 _Service.Stub(s => s.Login(Arg<string>.Is.Anything, Arg<string>.Is.Anything, Arg<int>.Is.Anything, out ggg)).OutRef(55); 
```

最后一个`out`参数是类型的参数`int`。

我想做以下断言

```
 _Service.AssertWasNotCalled(s => s.Login(Arg<string>.Is.Anything, Arg<string>.Is.Anything,Arg<int>.Is.Anything , ??????? )); 
```

但是我如何`out`在这里记下参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T08:25:11.500

“简单”使用：

```
_Service.AssertWasNotCalled(s => s.Login(
    Arg<string>.Is.Anything,
    Arg<string>.Is.Anything,
    Arg<int>.Is.Anything ,
    out Arg<int>.Out(10).Dummy
)); 
```

传递给`Out`方法的值无关紧要（`Dummy`.call 是重要的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T08:26:46.757

模拟断言通常应用于模拟而不是存根。因此，您可以重写代码以进行以下设置

```
_Service.Expect(s => s.Login(Arg<string>.Is.Anything, Arg<string>.Is.Anything, Arg<int>.Is.Anything, out ggg)).OutRef(55).Repeat.Never(); 
```

*并在测试的Assert*部分进行mke 验证

```
_Service.VerifyAllExpectations(); 
```

# c# - wpf中的RepeatButton问题

> ID：11755121
> 
> 赞同：0
> 
> 时间：2012-08-01T08:09:41.047
> 
> 标签：c#, wpf, repeatbutton

```
<Grid x:Name="LayoutRoot">
    <TextBox x:Name="txt_remove" Height="46" Margin="234,119,225,0" TextWrapping="Wrap" VerticalAlignment="Top" GotFocus="txt_remove_GotFocus"/>
    <RepeatButton x:Name="rbtn_remove" Content="Remove" Delay="500" Interval="100"  Margin="283.667,183,282.333,222" RenderTransformOrigin="0.667,0.854" Click="rbtn_remove_Click" />                  
</Grid> 
```

c#中的代码

```
public partial class Repeate : Window
{
    Control GetTextbox;

    public Repeate()
    {
        this.InitializeComponent(); 

    }

    private void rbtn_remove_Click(object sender, RoutedEventArgs e)
    {

         TextBox GetInstance = GetTextbox as TextBox;

        if (GetTextbox != null)
        {

            string _CurrentValue = GetInstance.Text;
            var _CareIndex = GetInstance.CaretIndex;

            if (_CareIndex > 0)
            {
                string _Backspace = _CurrentValue.Remove(_CareIndex - 1, 1);
                GetInstance.Text = _Backspace;
                GetInstance.Focus();
                GetInstance.CaretIndex = _CareIndex - 1;
            }
        }
    }

    private void txt_remove_GotFocus(object sender, RoutedEventArgs e)
    {
        GetTextbox = (Control)sender;
    }

} 
```

使用上面的代码，我可以得到下面的结果。

![重复按钮](../Images/0b6c9a9b66d93f45ed9429a3df1957c9.png)

如果我单击删除按钮，文本框值会清除。但是如果我单击并按住删除按钮，它**不会重复删除文本框值**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:57:35.333

一切都足够好，可以做你想做的工作。但是在 Getinstance 上调用 focus() 方法。正在制造差异。

只需删除 .

```
GetInstance.Focus(); 
```

将工作。

# iphone - UIScrollView 问题：禁止“滚动到空白空间”

> ID：11755125
> 
> 赞同：1
> 
> 时间：2012-08-01T08:10:08.470
> 
> 标签：iphone, objective-c, ios, uiscrollview, uiscrollviewdelegate

我有 3 页的 UIScrollView。我很难解释我的问题，这就是为什么我会尝试与表格视图进行比较来解释它。

当您有表格视图时，您可以滚动查看不存在的空间。我的意思是，如果您看到 1 个单元格，您可以向下滚动并查看没有单元格的空白区域。我不知道定义，这就是为什么我将其称为**“滚动到空白空间”。**

现在是问题所在。我想实现以下内容：当用户看到一页时，他不能**“滚动到空白空间”**，当用户在最后一页时，他可以**“滚动到空白空间”**

我的代码是：

```
 self.scroll = [[[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)] autorelease];
    scroll.pagingEnabled = YES;
    scroll.showsHorizontalScrollIndicator = NO;
    scroll.showsVerticalScrollIndicator = NO;
    scroll.scrollsToTop = NO;
    scroll.delegate = self;
    scroll.contentSize = CGSizeMake(size.width * kNumberOfPages, size.height);
    scroll.backgroundColor = [UIColor greenColor]; 
```

我应该设置哪些属性来提供所需的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:14:38.303

这叫弹跳。

[`UIScrollView`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/bounces)有一个名为的属性`bounces`，您可以将其设置为 NO 以防止它弹跳：

```
 scroll.bounces = NO; 
```

> 反弹
> 
> 一个布尔值，用于控制滚动视图是否弹回内容边缘并再次返回。
> 
> ```
>  @property(nonatomic) BOOL bounces 
> ```
> 
> 讨论
> 
> 如果此属性的值为 YES，则滚动视图在遇到内容边界时会弹跳。在视觉上弹跳表示滚动已到达内容的边缘。如果值为 NO，则滚动立即在内容边界处停止而不弹跳。默认值为是。

您可以将该属性的值设置为滚动委托`– scrollViewDidScroll:`方法中所需的值。

# sql - SQL SERVER 2008 树查询

> ID：11755134
> 
> 赞同：2
> 
> 时间：2012-08-01T08:10:35.023
> 
> 标签：sql, sql-server-2008, hierarchical-data

我有一个名为 Module 的表。表结构如下：

```
ModuleID     ModuleName        ParentID

   1            System Manage       0
   2            Database Manage     1
   3            Area Manage         1
   4            Basic Setting       0 
```

我想通过 sql 语句得到下面的结果。

```
 ModuleID       ModuleName        ParentMoudle
     1               System Manage      0
     2               Database Manage    System Manage
     3               Area Manage        System Manage 
     4               Basic Setting      0 
```

我是一个sql新手。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:14:07.320

父子关系可以通过 LEFT OUTER JOIN 和查询同一张表来实现。

```
 select m.moduleid,m.modulename,COALESCE(p.modulename,0) from table as m
      left outer join table as p on m.moduleid = p.module.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:27:16.570

这应该有效：

```
;WITH Tree AS
(
    SELECT *, CAST(NULL AS VARCHAR(25)) AS ParentName
      FROM @TT
     WHERE ParentID IS NULL
    UNION ALL
    SELECT Fam.*,Tree.ModuleName AS ParentName
      FROM @TT AS Fam
     INNER JOIN Tree
        ON Fam.ParentID = Tree.moduleID
)
SELECT * FROM Tree 
```

# css - CSS如何不使用样式

> ID：11755139
> 
> 赞同：0
> 
> 时间：2012-08-01T08:10:52.077
> 
> 标签：css, gwt, iframe, resize, popup

我不做 CSS，刚才这就是为什么我很难调整这个.. 我的弹出窗口使用 Iframe 有问题。在 css 中有这样的样式：

```
iframe {
    border:none;
    height:440px;
    margin-left:4px;
    margin-right:4px;
    **min-width:760px;**
    overflow:auto;
    width:98%;
} 
```

当像这样查看页面时，它会生成一个 html：

```
<div style="left: 404px; top: 75px; visibility: visible; position: absolute; overflow: visible; clip: rect(auto auto auto auto); " class="dialogPanel"><div class="">.....</div> 
```

这就是为什么无论我如何在后面的代码中设置高度，它都不会相应地调整大小：

```
 profileFrame = new Frame(url);

        profileFrame.setHeight("350px");
        profileFrame.setWidth("450px");
        panel.add(profileFrame);

        content.add(panel); 
```

但是当我从 CSS iframe 中删除 min-width 时，它已经根据我的意愿调整了大小。

问：我的这个特定 iframe 如何不使用 iframe 样式？我不想删除最小宽度，因为应用程序中的所有 iframe 都在使用这种样式。

我尝试通过 using 删除它 `profileFrame.removeStyleName("iframe")`，我还尝试了所有其他可用的 removestyle 方法，但没有奏效。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:31:09.803

您已为此 iFrame 设置了一个类，因此请尝试

```
iframe .dialogPanel {
min-width: 0px;
} 
```

这将使只有“dialogPanel”类的 iframe 没有最小宽度，其余的将保留它们的最小宽度

# java - 使用 JMS/ActiveMQ 并发同步请求-回复 - 模式/库？

> ID：11755146
> 
> 赞同：24
> 
> 时间：2012-08-01T08:11:07.160
> 
> 标签：java, multithreading, jms, activemq

我有一个网络应用程序，当用户提交请求时，我们将 JMS 消息发送到远程服务，然后等待回复。（还有异步请求，我们为消息重放等设置了各种细节，所以我们更愿意坚持使用 JMS 而不是 HTTP）

在[我应该如何使用 JMS 实现请求响应？](http://activemq.apache.org/how-should-i-implement-request-response-with-jms.html), ActiveMQ 似乎不鼓励每个请求使用临时队列或在 JMSCorrelationID 上使用选择器的临时消费者的想法，因为启动它们会产生开销。

但是，如果我使用池消费者进行回复，我如何从回复消费者分派回原始请求线程？

我当然可以编写自己的线程安全回调注册/调度，但我讨厌编写我怀疑已经由比我更了解的人编写的代码。

该 ActiveMQ 页面推荐[Lingo](http://lingo.codehaus.org/)，它自 2006 年以来就没有更新过，还有[Camel Spring Remoting](http://camel.apache.org/spring-remoting.html)，我的团队因为它的许多陷阱错误而被地狱禁止。

*是否有更好的解决方案，以实现此模式的库的形式，或以不同模式的形式来模拟 JMS 上的同步请求-回复？*

* * *

相关的SO问题：

*   [使用 JMS 临时队列进行同步使用是一种好习惯吗？](https://stackoverflow.com/questions/10786636/is-it-a-good-practice-to-use-jms-temporary-queue-for-synchronous-use)，这表明使用 JMSCorrelationID 上的选择器启动消费者实际上是低开销的，这与 ActiveMQ 文档所说的相矛盾。谁是对的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:21:34.200

在过去的项目中，我们遇到过类似的情况，同步 WS 请求是使用一对 Async req/res JMS 消息处理的。当时我们正在使用 Jboss JMS impl，而且临时`destinations`开销很大。

我们最终编写了一个线程安全的调度程序，让 WS 等待 JMS 响应到来。我们使用 CorrelationID 将响应映射回请求。

该解决方案都是本土开发的，但我遇到了一个很好的阻塞映射 impl，它解决了将响应与请求匹配的问题。

[阻塞图](https://trac.tk.informatik.tu-darmstadt.de/svn/projects/mundo/MundoComposer/MundoComposer/src/org/mundo/util/BlockingMap.java)

如果您的解决方案是集群的，您需要注意将响应消息分派到集群中的正确节点。我不知道 ActiveMQ，但我记得 JBoss 消息传递在其可集群目标的引擎盖下存在一些故障。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T20:03:54.470

我仍然会考虑使用 Camel 并让它处理线程，也许没有弹簧远程处理，但只是原始的 ProducerTemplates。

Camel 有一些关于该主题的不错的文档，并且与 ActiveMQ 配合得很好。 [http://camel.apache.org/jms#JMS-RequestreplyoverJMS](http://camel.apache.org/jms#JMS-RequestreplyoverJMS)

对于您关于启动基于选择器的消费者和开销的问题，ActiveMQ 文档实际上说明的是它需要往返于 ActiveMQ 代理，该代理可能位于地球的另一端或在高延迟网络上。在这种情况下，开销是到 AMQ 代理的 TCP/IP 往返时间。我会认为这是一种选择。已成功使用它多次。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T01:33:51.817

一位同事提出了一个潜在的解决方案——每个 webapp 线程一个响应队列/消费者，我们可以将返回地址设置为该特定线程拥有的响应队列。由于这些线程通常是长期存在的（并且会被重新用于后续的 Web 请求），所以我们只需要在线程由池生成时承受开销。

也就是说，整个练习让我重新思考 JMS 与 HTTP ...... :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:45:09.977

我一直使用 CorrelationID 进行请求/响应，并且从未遇到任何性能问题。我无法想象为什么这会是一个性能问题，对于任何消息传递系统来说，它都应该是超快的，并且是一个非常重要的特性，并且实现得很好。

[http://www.eaipatterns.com/RequestReplyJmsExample.html](http://www.eaipatterns.com/RequestReplyJmsExample.html)有两个使用replyToQueue 或correlationID 的主流解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-11T07:22:53.087

这是一个旧的，但我已经登陆这里寻找其他东西并且实际上确实有一些见解（希望对某人有所帮助）。

我们已经实现了非常相似的用例，Hazelcast 作为我们集群节点间通信的底盘。本质是 2 个数据集：1 个用于响应的分布式地图，1 个响应等待者的“本地”列表（在集群中的每个节点上）。

*   每个请求（从 Jetty 接收它自己的线程）在本地等待者的映射中创建一个条目；该条目显然具有相关 UID 和将用作信号量的对象
*   然后请求被分派到远程（REST/JMS），原始线程开始等待信号量；UID 必须是请求的一部分
*   远程返回响应并使用相关的 UID 将其写入响应映射
*   正在听取响应地图；如果在本地等待者的映射中找到新响应的 UID，则通知其信号量，释放原始请求的线程，从响应映射中获取响应并将其返回给客户端

这是一个一般性描述，我可以通过一些优化来更新答案，以防有任何兴趣。

# c# - 编译器指令不检查相同 dll 的汇编版本

> ID：11755150
> 
> 赞同：0
> 
> 时间：2012-08-01T08:11:19.133
> 
> 标签：c#, asp.net, compiler-construction

我有一个 ASP.net 项目（一个 Exact Synergy Enterprise 自定义项目，即 ASP.net）

在这个项目中，我引用了 5.0.0.39 版本的 Exact.Data.dll。但是，另一个引用的 DLL 也引用了 Exact.Data.dll，但版本为 5.0.0.42。我知道这两个几乎相同，而且我没有其他 DLL 的源代码。

该项目无法编译，因为 Visual Studio 不接受同一个引用 DLL 的多个版本

有没有办法告诉 Visual Studio 不要将此视为错误并继续编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:52:47.473

如果它们非常相似以至于其他模块应该与 5.0.0.39 一起使用，那么您的模块同样应该与 5.0.0.42 一起使用。

因此，您可以不反对更改对 5.0.0.42 的引用。

# java - 新对象中的弹簧仪器和自动注入

> ID：11755152
> 
> 赞同：2
> 
> 时间：2012-08-01T08:11:27.113
> 
> 标签：java, spring, hashmap, code-injection

我有 spring 3.1 应用程序。我有 spring-instrument java 代理，我有可配置的类：

```
@Configurable
public class WeavingClass {

    @Resource
    @Getter
    private ApplicationContext ac;

    public WeavingClass()
    {

    }

} 
```

并进行单元测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes={WebBackendContextConfig.class})
@Slf4j
public class TestWeavingInjection extends TestCase {

    @Test
    public void isInjectedTest()
    {
        WeavingClass wc = new WeavingClass();
        assertNotNull(wc.getAc());
    }
} 
```

并且有：

```
@Configuration
@PropertySource(value={"classpath:META-INF/conf/liteicms-backend.properties"})
@ComponentScan(value={"ru.icb.liteicms.backend.service", "ru.icb.liteicms.domain", "ru.icb.liteicms.backend.domain.contentpage.wrappers"})
@EnableSpringConfigured
@EnableLoadTimeWeaving
@EnableAspectJAutoProxy
public class WebBackendContextConfig {

} 
```

我使用 -javaagent:org.springframework.instrument-3.1.1.RELEASE.jar 运行我的测试我的测试工作没有错误。

但如果我添加这个：

```
private HashMap<Class<?>, Class<?>> builderMap = new HashMap<Class<?>, Class<?>>()
{
    private static final long serialVersionUID = 1L;
    {
    put(String.class, WeavingClass.class);
    }
}; 
```

我的测试坏了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:51:15.177

注入`new`-created 对象（而不是托管 bean）只能通过编译或加载时织入实现，而不是 Spring 默认使用的运行时代理。

您将需要配置一个 AspectJ 编织器，`<context:load-time-weaver>`或使用命令行选项启动 JVM 以启用`InstrumentationSavingAgent`.

[来自 Spring 文档的详细信息](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-aj-ltw)

# python - 使用 request.GET 和 request.META 在 django python 中获取各种值时的安全检查

> ID：11755161
> 
> 赞同：1
> 
> 时间：2012-08-01T08:11:47.363
> 
> 标签：python, django, security, xss

在使用 request.GET 或使用 request.META 获取 HTTP_REFERER 获取请求参数时，我可以实施什么类型的安全检查以在 django 中实现额外的安全性。

具体来说，我正在寻找**XSS（跨站点脚本）**安全检查，因为我的一位同事指出，有些机构可以在这里进行 XSS 攻击。

**示例代码：**

```
next = request.GET.get('next','')
if next:
 do something 
```

我已经阅读了官方 django 文档，但对保护 request.GET 和 META 方法并没有太多了解。 [django 的安全文档。](https://docs.djangoproject.com/en/dev/topics/security/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:20:22.293

如果您随后将 的值`next`直接转储到模板或在不检查的情况下重定向到它，那只是一个 XSS 攻击向量。

对于重定向，Django 的内置登录表单会检查您没有重定向到不同的主机 - 请参阅[代码](https://github.com/django/django/blob/master/django/contrib/auth/views.py#L48)。

对于脚本攻击，Django 将始终自动转义任何代码，因此`<script>`将转换为`&lt;script&gt;`. 您只需要确保没有关闭自动转义或将变量标记为安全。

# wpf - 独立显示/隐藏窗口的最佳方法

> ID：11755162
> 
> 赞同：5
> 
> 时间：2012-08-01T08:11:57.253
> 
> 标签：wpf, navigation

我是一名学生，正在构建一个 C# WPF 应用程序。它有三个窗口：

1.  登录窗口

2.  创建帐户窗口

3.  和主应用程序窗口。

我上传了一个图来显示我正在尝试实现的导航类型：

![http://picturepush.com/public/8870554](../Images/42d1b78ccb6c7aba0031b252e6128c21.png)

我认为在另一个窗口的关闭/加载事件中显示/隐藏一个窗口是不正确的。

1.  有人可以告诉我实现此导航的正确方法吗？

2.  另外，将应用程序类的三个窗口私有属性设置为一个好习惯吗？

3.  最后一个窗口有一个框架控件来支持页面导航。同样，将 MainWindow 应用程序的三个页面设为私有属性会更好吗？

如果这很明显或很容易做到，我很抱歉。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:28:05.973

**像这样的代码可能会这样做（未经测试，我只是在 Visual Studio 中键入它以自动格式化代码）** XAML 用于登录对话框。RegistrationDialog 应该是类似的，除了注册按钮的按钮和处理程序。

```
<Window x:Class="WpfApplication1.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="LoginWindow">
    <StackPanel>
        <Button IsDefault="True" Content="Submit" Click="SubmitButton_Click"/>
        <Button IsCancel="True" Content="Cancel" />
        <Button Content="CreateAccount" Click="CreateAccountButton_Click"/>
    </StackPanel>
</Window>

//Handler of LoginWindow and RegistrationWindow
private void SubmitButton_Click(object sender, RoutedEventArgs e)
{
    this.DialogResult = true;
}

//Handler of LoginWindow only
private void CreateAccountButton_Click(object sender, RoutedEventArgs e)
{
    this.IsCreatingAccount = true;
    this.DialogResult = false;
}

public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        bool isCanceled;

        while (loginWin.ShowDialog() == false && !isCanceled)
        {
            if (loginWin.IsAccountCreationRequested)
            {
                if (registrationWin.ShowDialog())
                {
                    isCanceled = true;
                }
                else
                {
                    loginWin.IsAccountCreationRequested = false;
                }
            }
            else
            {
                isCanceled = true;
            }
        }

        if (loginWin.DialogResult) MainWindow.Show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:08:50.227

我目前正在开发一个与您的应用程序或多或少相似的 Silverlight 应用程序。我觉得您可以拥有 2 个 xaml 控件（一个用于登录，另一个用于您的主应用程序）。对于创建帐户，您可以使用将从登录控件调用的子窗口。并在您的主应用程序中使用 TabControl，它将保存您的其他 3 个 xaml 控件（Page1.xaml、Page2.xaml 和 Page3.xaml）。如果您有任何问题，请随时询问。

如果它解决了您的问题，请不要忘记将我的回复标记为答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:58:50.210

我不会将三个窗口作为应用程序的属性。我会实例化登录窗口的副本并将其用作我的中心控制点。

当用户登录时，隐藏登录窗口，显示一个新的主窗口并在主窗口关闭事件上添加一个钩子。

例如

```
if (logonSuccess)
{
    var mainWindow = new MainWindow();
    mainWindow.Closed += ReshowSignupWindow;
} 
```

我也会让登录窗口对创建帐户窗口执行相同的操作。因此，如果创建了帐户，我会让创建帐户窗口返回到注册窗口，该窗口将重新显示或启动主窗口。

例如：

```
// In sign-in window, handle the create window being closed
private void CreateWindowClosedHandler(object sender, EventArgs e)
{
    if (accountCreatedOK)
    {
        ShowMainWindow();
    }
    else
    {
        ReshowSignupWindow();
    }
} 
```

我可能会考虑通过调用将创建帐户窗口显示为对话框窗口[`ShowDialog()`](http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog.aspx)。

希望有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-24T11:50:52.353

我建议你遵循这个模式。您的逻辑看起来与 UI（用户界面）和逻辑紧密结合。

我喜欢的最佳模式是 WPF 或 Silverlight 是 MVVM（模型视图视图模型）。谷歌中有很多适用于 MVVM 的示例。

只需看一眼任何 MVVM 示例，您就会清楚地了解开发 WPF 或 Silverlight 应用程序。

一些链接如下， http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx) [http://www.c-sharpcorner.com/UploadFile/raj1979/simple-mvvm-pattern-in-wpf/](http://www.c-sharpcorner.com/UploadFile/raj1979/simple-mvvm-pattern-in-wpf/) [http://www.codeproject.com/Articles/126249/MVVM-Pattern-in-WPF-A-Simple-Tutorial-for-Absolute](http://www.codeproject.com/Articles/126249/MVVM-Pattern-in-WPF-A-Simple-Tutorial-for-Absolute)

# php - 循环文本字段值并提交到数据库

> ID：11755167
> 
> 赞同：0
> 
> 时间：2012-08-01T08:12:16.307
> 
> 标签：php

```
$as = mysql_query('SELECT u.id,u.username,c.score FROM user u, course c WHERE u.id = c.userid ');
echo '<form action="score.php" method="post"><table>';
while($row = mysql_fetch_array($as)
{
   $uid = $row['id'];
   $username = $row['username'];
   $score    = $row['score'];
   echo '<tr><td>'.$username.'</td>
             <td><input type="hidden" name="uid" value='.$uid.'>
                 <input type="text" name="score" value='.$score.'>
             </td>
         </tr>
}
echo '<tr><td><input type="submit" name="submit" value="update"></td></tr>';
echo '</table></form>';
if($_SERVER['REQUEST_METHOD == 'POST']
{
  $uid = $_POST['uid'];
  $score = $_POST['score'];
  $sql = mysql('UPDATE user SET c.score = '.$score.' WHERE c.userid = '.$uid.'');
} 
```

课程表

```
userid    score
 4         45%
 3          30%
 5          80% 
```

它没有更新到表。我试图回显变量，它只显示最后一行，但我为用户 3 编辑了 谁能建议我哪里出错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:18:09.020

您重复使用相同的输入，所以它只会提交最后一个

改变

```
echo '<tr><td>'.$username.'</td>
         <td><input type="hidden" name="uid" value='.$uid.'>
             <input type="text" name="score" value='.$score.'>
         </td>
     </tr> 
```

到

```
echo '<tr><td>'.$username.'</td>
         <td><input type="hidden" name="uid['.$uid.']" value='.$uid.'>
             <input type="text" name="score['.$uid.']" value='.$score.'>
         </td>
     </tr> 
```

还

```
if(sizeof($_POST)>0)
{
  if(is_array($_POST['uid']))
  {
    while(list($key,$value)=each($_POST['uid'])
    {
        $sql="UPDATE user SET score='".mysql_real_escape_string($_POST['score'][$key])."' WHERE userid=".intval($value);
        mysql_query($sql);
    }
  }
} 
```

# sql - 在 MS Access 中使用数字模式更新 SQL 中的查询

> ID：11755172
> 
> 赞同：0
> 
> 时间：2012-08-01T08:12:36.057
> 
> 标签：sql, ms-access, pattern-matching

大家好，

我需要帮助来创建对我的数据进行分组的更新查询。

我表中的数据实际上是空间数据，可以认为是一个 10 列乘 5 行的矩阵。我有 ObjectID、Row 和 Column，但我想要列 DesiredResult，它是行和列的 2x2 分组。

因此 1,1 1,2、2,1 和 2,2 的 R,C 的 DesiredResult 将为 1，而 1,3 1,4 2,3 2,4 的 DesiredResult 将为 2，依此类推（见下面的例子）....

我能够使用 Quotient & Mod 的组合创建 R 和 C 列，所以我假设我会做类似的事情，但我被卡住了。我将如何在 MS Access 中进行此查询？

```
 ObjectID   R   C   DesiredResult
 1            1 1   1
 2            1 2   1
 3            1 3   2
 4            1 4   2
 5            1 5   3
 6            1 6   3
 7            1 7   4
 8            1 8   4
 9            1 9   5
 10           1 10  5
 11           2 1   1
 12           2 2   1
 13           2 3   2
 14           2 4   2
 15           2 5   3
 16           2 6   3
 17           2 7   4
 18           2 8   4
 19           2 9   5
 20           2 10  5
 21           3 1   6
 22           3 2   6
 23           3 3   7
 24           3 4   7
 25           3 5   8
 26           3 6   8
 27           3 7   9
 28           3 8   9
 29           3 9   10
 30           3 10  10
 31           4 1   6
 32           4 2   6
 33           4 3   7
 34           4 4   7
 35           4 5   8
 36           4 6   8
 37           4 7   9
 38           4 8   9
 39           4 9   10
 40           4 10  10
 41           5 1   11
 42           5 2   11
 43           5 3   12
 44           5 4   12
 45           5 5   13
 46           5 6   13
 47           5 7   14
 48           5 8   14
 49           5 9   15
 50           5 10  15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:21:52.373

就像是 ... ？

```
SELECT a.Row, a.Col, Col\2 AS D1, Col Mod 2 AS D2, [D1]+[D2] AS Desired
FROM  table  AS a
ORDER BY a.Row, a.Col; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:43:33.550

Remou 有一个接近的近似值，但事实证明这给了我我需要的东西。我需要行索引和列索引。

```
 SELECT ObjectID, R, C, 
   Int(([C]-1)/2) AS ColIndex,
   Int(([R]-1)/2) AS RowIndex, 
   [RowIndex]*5+[ColIndex]+1 AS DesiredResult
 FROM Testing
 ORDER BY ObjectID 
```

查询中的关键是 Column & Row Index （这是分组大小）中都有数字 2，而数字 5 用于 Desired Result 并表示行单元格的数量。

谢谢 ！

# android - 如何处理 Android ListView 的项目点击按钮和特定区域？

> ID：11755173
> 
> 赞同：0
> 
> 时间：2012-08-01T08:12:40.280
> 
> 标签：android, listview, button, onclick

我试图在android中为自定义listView创建一行，所以我放了button、imagebutton和textview。但它没有用。有谁知道我该如何处理这个案子？我希望它类似于下图：

![在此处输入图像描述](../Images/71f72fc115f777d43bed18a4f9a16fb3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:51:35.133

您可以`onTouch`为您的视频图像和列表项实现监听器。因此，当您触摸任何列表项或视频图像时，它将播放有关操作。

同样对于箭头，您可以实施`onTouch`. 您还可以为箭头选项实现 quickAction 小部件。[在此处](http://www.androidpatterns.com/uap_pattern/quick-actions)查看快速操作

QuickAction 教程在[这里](http://www.chupamobile.com/tutorial/details/63)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:43:28.193

您应该为您的 ListView 设置自定义适配器并覆盖该`getView()`方法，以便您可以处理`onClick`ListView 项目中每个小部件的侦听器。

在这里查看更多信息：[链接](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# jqgrid - JQGrid - 一次加载未按正确顺序加载

> ID：11755185
> 
> 赞同：0
> 
> 时间：2012-08-01T08:13:34.617
> 
> 标签：jqgrid, treegrid

我正在使用 JQGrid 4.1.2 版。有了这个，我在使用邻接模型（一次加载）时在树网格中遇到了一些问题。我正在从服务器加载 JSON 数据。树形网格是根据 JSON 数据的行顺序形成的。举例来说：我正在为分支机构和部门形成树状网格。在我的查询中，我无法根据父子层次结构进行排序，因为我需要加入大约 6 个表。但我可以获取具有正确 id、parent、level 和 is_leaf 属性的记录。

网格正在做什么意味着 - 只是它从 JSON 创建行，无论它是什么顺序。所以树格式没有正确出现。当我单击任何部门的根节点时，它会折叠正确的子节点，但所有子节点都在不同的父节点下（根据我的 JSON 顺序）。

以下是我从服务器获取的 JSON 数据。

```
id     name               level      parent     is_leaf     expanded     loaded
—–    —————–—–            —–—–—–    —–—–—–—–    —–—–—–—–   —–—–—–—–—–   —–—–—–—–—–
B1     Shanghai Pvt Ltd     1        (null)     false       true         true
D3     Finance & Account    2         B1         true        true         true
D4     Production           2         B1         true        true         true
D5     Support              2         B1         true        true         true
D6     Operation            2         B1         false       true         true
D13    Software             2         B1         true        true         true
D82    BPO                  2         B1         false       true         true
D76    Sub D12              3         D1         true        true         true
D75    Sub D11              3         D1         true        true         true
D78    Sub D21              3         D2         false       true         true
D84    Operation1           3         D6         true        true         true
D83    BPO1                 3         D82        false       true         true
D79    Sub D211             4         D78        false       true         true
D87    BPO11                4         D83        true        true         true
D80    Sub D2111            5         D79        true        true         true
D1     Admin                2         B1         false       true         true
D2     Sales                2         B1         false       true         true
B13    Beijing Pvt Ltd      1         (null)     false       true         true
D86    Test 2               2         B13        false       true         true
D134   Test Root            2         B13        true        true         true
D91    Test Level 1         3         D85        false       true         true
D93    Test 2 Level 1       3         D86        true        true         true
D133   Test Level 3         5         D92        true        true         true
D92    Test Level 2         4         D91        false       true         true
D85    Test                 2         B13        false       true         true
B14    Branch Office 3      1         (null)     false       true         true
D132   Software             2         B14        false       true         true
D95    Level 1              3         D132       true        true         true
D94    Root                 2         B14        true        true         true
D136   Level 2              3         D132       true        true         true
B15    Branch Office 4      1         (null)     true        true         true 
```

在 jqgrid 函数中，我已经定义了所有这些。

```
 treeGrid: true,
    treeGridModel:'adjacency',
    ExpandColumn : 'deptName' 
```

我有什么遗漏/做错了吗，或者这就是树网格现在的工作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:37:07.140

使用 TreeGrid 时，json 数据需要按其显示方式进行排序。

所有子节点都需要在 json 数据中的父节点之下。这是 TreeGrid 的限制。

在我看来，树应该根据从服务器返回的数据中已经定义的关联进行渲染

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:37:37.040

我从未在 jqgrid 中实现 treeGrid，但我建议你检查这些参考资料

[http://www.ok-soft-gmbh.com/jqGrid/LocalAdjacencyTree8.htm](http://www.ok-soft-gmbh.com/jqGrid/LocalAdjacencyTree8.htm)

请参阅[http://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)上的示例> 3.4 中的新功能 > 树网格邻接模型

这个答案[jqGrid (v4.1.2) treegrid 的排序不适用于](https://stackoverflow.com/questions/7330572/sorting-of-jqgrid-v4-1-2-treegrid-not-working-with-ajacency-model) Oleg 的 Ajacency Model。

# ajax - 如果 Ajax 请求在网页中进行，则使用 Java 脚本进行跟踪或通过 Selenium Web 驱动程序拦截 XMLHttpRequest

> ID：11755186
> 
> 赞同：19
> 
> 时间：2012-08-01T08:13:41.590
> 
> 标签：ajax, javascript, xmlhttprequest, selenium-webdriver

我正在使用[Selenium WebDriver](http://seleniumhq.org/projects/webdriver/)来抓取一个无限滚动的[网站](http://www.mouthshut.com/cars-suvs/Tata-Nano-Reviews-925076578)（仅举例来说，我也会抓取其他网站！）。

**问题陈述：**

向下滚动无限滚动页面，直到使用 Selenium Web 驱动程序停止加载内容。

**我的方法：** 目前我正在这样做-

**第一步：滚动到页面底部**

```
JavascriptExecutor js = (JavascriptExecutor) driver;
js.executeScript("javascript:window.onload=toBottom();"+
                        "function toBottom(){" +
                        "window.scrollTo(0,Math.max(document.documentElement.scrollHeight," +
                        "document.body.scrollHeight,document.documentElement.clientHeight));" +
                "}"); 
```

然后我等待一段时间让 Ajax 请求像这样完成 -

**第 2 步：显式等待 Ajax 请求结束**

> 线程.sleep(1000);

然后我给出另一个 java 脚本来检查页面是否可滚动

**第三步：检查页面是否可滚动**

```
//Alternative to document.height is to be used which is document.body.clientHeight
//refer to https://developer.mozilla.org/en-US/docs/DOM/document.height

    if((Long)js.executeScript("return " +
                                "(document.body.clientHeight-(window.pageYOffset + window.innerHeight))")>0) 
```

如果上述条件为真，那么我重复第 1 步到第 3 步，直到第 3 步中的条件为假。

**问题：** 我不想`Thread.sleep(1000);`在第 2 步中给出，而是我想使用 Java Script 检查后台 Ajax 请求是否结束，然后在第 3 步中的条件为 true 时进一步向下滚动。

**PS：**我不是页面的开发者，所以我无法访问运行页面的代码，我只能在网页中注入 java 脚本（如步骤 1 和 3）。而且，我必须为无限滚动期间使用 Ajax 请求的任何网站编写通用逻辑。

我会很感激有人可以在这里抽出一些时间！

**编辑：**好的，在挣扎了 2 天之后，我发现我通过 Selenium WebDriver 抓取的页面可以包含任何这些[JavaScript 库](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)，我将不得不根据不同的库进行池化，例如，如果使用[jQuery](http://en.wikipedia.org/wiki/JQuery) api的 web 应用程序，我可能正在等待

```
(Long)((JavascriptExecutor)driver).executeScript("return jQuery.active") 
```

返回一个零。

同样，如果 Web 应用程序正在使用[Prototype](http://en.wikipedia.org/wiki/Prototype_JavaScript_Framework) JavaScript 库，我将不得不等待

```
(Long)((JavascriptExecutor)driver).executeScript("return Ajax.activeRequestCount") 
```

返回一个零。

**现在**，**问题是如何编写可以处理大多数可用 JavaScript 库的通用代码？**

**我在实施这个过程中面临的问题 -**

**1** . 如何找到 Web 应用程序中正在使用的 JavaScript 库（在 Java 中使用 Selenium WebDriver），以便我可以编写相应的等待方法？目前，我正在使用这个

[代码](http://code.google.com/p/library-detector/source/browse/branches/Daiquiri/embedded_scripts/libraries_test.js)

**2** . 这样，我将不得不为单独的 JavaScript 库编写多达 77 个方法，因此，我还需要一种更好的方法来处理这种情况。

**简而言之，我需要通过 Selenium Web Driver 的 java 实现确定浏览器是否正在使用或不使用任何 JavaScript 库进行任何调用（Ajax 或简单）**

[PS：Chorme 的JavaScript Lib 检测器](https://chrome.google.com/webstore/detail/hibffpggbdlmjaalmplmhdhfinidnoho) 和 Firefox 的[JavaScript 库检测器](https://addons.mozilla.org/en-us/firefox/addon/library-detector/)有附加组件，可以检测正在使用的 JavaScript 库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T10:42:20.583

对于在无限滚动期间使用 Ajax 响应并使用 jQuery API（或其他操作）的网页，在开始打开网页之前。

```
 //Inject the pooling status variable
    js.executeScript("window.status = 'fail';");

    //Attach the Ajax call back method
    js.executeScript( "$(document).ajaxComplete(function() {" +
    "status = 'success';});"); 
```

**第 1 步：**将保持与原始问题相同

**第 2 步**合并以下脚本（这是一个不需要`Thread.Sleep()`并使逻辑更加动态的脚本）

```
String aStatus = (String)js.executeScript("return status;");

                        if(aStatus!=null && aStatus.equalsIgnoreCase("success")){
                            js.executeScript("status = 'fail';");
                            break poolingLoop;
                        } 
```

**第3步：**现在不需要！

**结论：**没必要给生硬的 Thread.sleep(); 一次又一次地使用 Selenium WebDriver！

**只有在 Web 应用程序中使用了 jQuery api 时，这种方法才有效。**

**编辑：** 根据@jayati给出的链接，我注入了javascript-

**Javascript一：**

```
//XMLHttpRequest instrumentation/wrapping
var startTracing = function (onnew) {
    var OldXHR = window.XMLHttpRequest;

    // create a wrapper object that has the same interfaces as a regular XMLHttpRequest object
    // see http://www.xulplanet.com/references/objref/XMLHttpRequest.html for reference on XHR object
    var NewXHR = function() {
        var self = this;
        var actualXHR = new OldXHR();

        // private callbacks (for UI):
        // onopen, onsend, onsetrequestheader, onupdate, ...
        this.requestHeaders = "";
        this.requestBody = "";

        // emulate methods from regular XMLHttpRequest object
        this.open = function(a, b, c, d, e) { 
            self.openMethod = a.toUpperCase();
            self.openURL = b;
            ajaxRequestStarted = 'open';

            if (self.onopen != null && typeof(self.onopen) == "function") { 
                self.onopen(a,b,c,d,e); } 
            return actualXHR.open(a,b,c,d,e); 
        }
        this.send = function(a) {
            ajaxRequestStarted = 'send';

            if (self.onsend != null && typeof(this.onsend) == "function") { 
                self.onsend(a); } 
            self.requestBody += a;
            return actualXHR.send(a); 
        }
        this.setRequestHeader = function(a, b) {
            if (self.onsetrequestheader != null && typeof(self.onsetrequestheader) == "function") { self.onsetrequestheader(a, b); } 
            self.requestHeaders += a + ":" + b + "\r\n";
            return actualXHR.setRequestHeader(a, b); 
        }
        this.getRequestHeader = function() {
            return actualXHR.getRequestHeader(); 
        }
        this.getResponseHeader = function(a) { return actualXHR.getResponseHeader(a); }
        this.getAllResponseHeaders = function() { return actualXHR.getAllResponseHeaders(); }
        this.abort = function() { return actualXHR.abort(); }
        this.addEventListener = function(a, b, c) { return actualXHR.addEventListener(a, b, c); }
        this.dispatchEvent = function(e) { return actualXHR.dispatchEvent(e); }
        this.openRequest = function(a, b, c, d, e) { return actualXHR.openRequest(a, b, c, d, e); }
        this.overrideMimeType = function(e) { return actualXHR.overrideMimeType(e); }
        this.removeEventListener = function(a, b, c) { return actualXHR.removeEventListener(a, b, c); }

        // copy the values from actualXHR back onto self
        function copyState() {
            // copy properties back from the actual XHR to the wrapper
            try {
                self.readyState = actualXHR.readyState;
            } catch (e) {}
            try {
                self.status = actualXHR.status;
            } catch (e) {}
            try {
                self.responseText = actualXHR.responseText;
            } catch (e) {}
            try {
                self.statusText = actualXHR.statusText;
            } catch (e) {}
            try {
                self.responseXML = actualXHR.responseXML;
            } catch (e) {}
        }

        // emulate callbacks from regular XMLHttpRequest object
        actualXHR.onreadystatechange = function() {
            copyState();

            try {
                if (self.onupdate != null && typeof(self.onupdate) == "function") { self.onupdate(); } 
            } catch (e) {}

            // onreadystatechange callback            
            if (self.onreadystatechange != null && typeof(self.onreadystatechange) == "function") { return self.onreadystatechange(); } 
        }
        actualXHR.onerror = function(e) {

            ajaxRequestComplete = 'err';
            copyState();

            try {
                if (self.onupdate != null && typeof(self.onupdate) == "function") { self.onupdate(); } 
            } catch (e) {}

            if (self.onerror != null && typeof(self.onerror) == "function") { 
                return self.onerror(e); 
            } else if (self.onreadystatechange != null && typeof(self.onreadystatechange) == "function") { 
                return self.onreadystatechange(); 
            }
        }
        actualXHR.onload = function(e) {

            ajaxRequestComplete = 'loaded';
            copyState();

            try {
                if (self.onupdate != null && typeof(self.onupdate) == "function") { self.onupdate(); } 
            } catch (e) {}

            if (self.onload != null && typeof(self.onload) == "function") { 
                return self.onload(e); 
            } else if (self.onreadystatechange != null && typeof(self.onreadystatechange) == "function") { 
                return self.onreadystatechange(); 
            }
        }
        actualXHR.onprogress = function(e) {
            copyState();

            try {
                if (self.onupdate != null && typeof(self.onupdate) == "function") { self.onupdate(); } 
            } catch (e) {}

            if (self.onprogress != null && typeof(self.onprogress) == "function") { 
                return self.onprogress(e);
            } else if (self.onreadystatechange != null && typeof(self.onreadystatechange) == "function") { 
                return self.onreadystatechange(); 
            }
        }

        if (onnew && typeof(onnew) == "function") { onnew(this); }
    }

    window.XMLHttpRequest = NewXHR;

}
window.ajaxRequestComplete = 'no';//Make as a global javascript variable
window.ajaxRequestStarted = 'no';
startTracing(); 
```

或**Javascript 两个：**

```
var startTracing = function (onnew) {
    window.ajaxRequestComplete = 'no';//Make as a global javascript variable
    window.ajaxRequestStarted = 'no';

    XMLHttpRequest.prototype.uniqueID = function() {
        if (!this.uniqueIDMemo) {
            this.uniqueIDMemo = Math.floor(Math.random() * 1000);
        }
        return this.uniqueIDMemo;
    }

    XMLHttpRequest.prototype.oldOpen = XMLHttpRequest.prototype.open;

    var newOpen = function(method, url, async, user, password) {

        ajaxRequestStarted = 'open';
        /*alert(ajaxRequestStarted);*/
        this.oldOpen(method, url, async, user, password);
    }

    XMLHttpRequest.prototype.open = newOpen;

    XMLHttpRequest.prototype.oldSend = XMLHttpRequest.prototype.send;

    var newSend = function(a) {
        var xhr = this;

        var onload = function() {
            ajaxRequestComplete = 'loaded';
            /*alert(ajaxRequestComplete);*/
        };

        var onerror = function( ) {
            ajaxRequestComplete = 'Err';
            /*alert(ajaxRequestComplete);*/
        };

        xhr.addEventListener("load", onload, false);
        xhr.addEventListener("error", onerror, false);

        xhr.oldSend(a);
    }

    XMLHttpRequest.prototype.send = newSend;
}
startTracing(); 
```

并检查 java 代码中的状态变量的状态`ajaxRequestStarted, ajaxRequestComplete`，可以确定 ajax 是启动还是完成。

现在我有办法等到 Ajax 完成，我还可以找到 Ajax 是否在某些操作上被触发

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T09:16:45.210

**方法1**：

您的方法很好，只需进行一些更改即可：

第 1 步：改进此步骤，使用 . 定期调用 toBottom 函数`window.setInterval`。`(c >= totalcount)`随叫随到_`window.clearInterval`

Setp 2：不是检查页面是否可滚动，而是检查`(c >= totalcount)`. 并且此条件每 200 毫秒返回一次，直到`(c >= totalcount)`返回 true。

仅供参考：如果第 1 步不适用于所有浏览器，那么您可以参考 Tata-Nano-Reviews-925076578.js 的第 5210 行并通过`c`变量检查调用它。

**方法2**：

转到[jQuery API](http://api.jquery.com/)并键入“ajax”。您可以找到一些可用于 ajax 请求的回调处理程序。

可能在发送请求之前和正确接收请求之后设置一个变量。

在这两者之间使用你原来的定期滚动到底部的方法，除非你不能再滚动。此时清除区间变量。

现在，定期检查该区间变量是否为空。Null 表示您已到达底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T01:36:16.017

我们必须解决同样的问题，并使用一个长的 Javascript 函数进行管理。只需添加检查即可查看未定义的库。

PS 感谢您给我一个关于如何检查正在进行的原型请求的简单答案！

例如。处理 JQuery 和 XHR/原型

```
var jsExecutor = /*Get your WebDriverInstance*/ as IJavaScriptExecutor;
while(/*your required timeout here*/)
{
    var ajaxComplete = 
      jsExecutor.ExecuteScript("return ((typeof Ajax === 'undefined') ||   
      Ajax.activeRequestCount == 0) && ((typeof jQuery === 'undefined') || $.active == 0)");
    if (ajaxIsComplete)
      return
} 
```

# fogbugz - Fogbugz的token数量有多少限制？

> ID：11755189
> 
> 赞同：0
> 
> 时间：2012-08-01T08:13:49.020
> 
> 标签：fogbugz

如果每次用户使用新令牌访问 api，Fogbugz 是否会限制用户。如果他不断地尝试登录，会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:44:49.613

全面披露：我是 FogBugz 开发人员。

> “如果每次用户使用新令牌访问 api，Fogbugz 是否会限制用户。”

没有。如果您可以生成新的有效令牌，API 将接受它。

> “如果他不断地尝试登录，会发生什么？”

如果这些尝试成功，那么一切都很好。欢迎您为自己生成大量令牌。

如果这些尝试失败，那么欢迎您再试一次，但 FogBugz 足够聪明，可以知道何时进行暴力攻击。与普通的 FogBugz 登录页面相比，XML API 登录没有什么特别之处，只是它会返回一个 XML API 令牌。

# ldap - 服务器端排序控制阻止检索操作属性

> ID：11755190
> 
> 赞同：-5
> 
> 时间：2012-08-01T08:13:53.543
> 
> 标签：ldap, openldap

如果我使用 ServerSideSort 控件，条目会为我很好地排序，但我无法检索任何操作属性，即使我特别请求它们，例如“entryUUID”或“+”。如果我删除 SSS 控件，我会像以前一样获得操作属性。我得到的只是普通属性。

这是 SSS 规范的已知特性吗？还是 OpenLDAP 2.4.30 中的一个已知问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:57:51.287

这种情况以及您评论中描述的情况听起来像是服务器软件缺陷。符合 LDAP 的服务器应该：

*   根据请求返回具有属性的条目，*即使未排序*（关键性`false`）
*   返回`unavailableCriticalExtension` *并且没有条目*（关键性`true`）

至于对诸如 的操作属性`entryUUID`进行排序，我测试的几台服务器拒绝排序，但确实返回了结果（具有关键性`false`）。

也许您可以将数据导出到 LDIF 文件并使用单个数字处理您的条目`entryUUID`，然后重新导入数据。

# javascript - Prototypejs 与下划线冲突

> ID：11755193
> 
> 赞同：1
> 
> 时间：2012-08-01T08:14:11.830
> 
> 标签：javascript, prototypejs, underscore.js

编辑：

我把它放在首位是因为我终于找到了真正的问题。

Prototypejs 正在添加一个干扰下划线的 Array.reduce 函数（参见：[https](https://github.com/documentcloud/underscore/issues/7) ://github.com/documentcloud/underscore/issues/7 ）

除了“使用原型> 1.6.1）之外，这里似乎没有任何决定性的东西，但不幸的是我无法控制使用什么原型。除了更改 _.reduce 方法以不使用本机函数或代理任何方法使用reduce（见评论）我看不到任何解决这个问题的好方法。

* * *

我遇到了一个问题，Prototypejs 与我使用下划线的 javascript“应用程序”包含在同一页面上。

似乎每当我尝试使用函数 _.unique 时，它​​实际上是在调用原型函数，这是在一个闭包内，我正在使用 requirejs 加载 _。当我更改包含的库的顺序时，我的应用程序包含在原型之前，那么一切正常，不幸的是我无法将其用作解决方案，因为我无法控制它是如何包含在任何页面中的。

我想知道是否有人以前遇到过这个问题并且有一个可能的解决方案，其中 _.unique 将始终调用下划线函数而不是任何称为唯一的全局原型函数。

谢谢

编辑：

我实际上认为我可能对实际覆盖的独特方法是错误的。我刚刚在下划线函数中添加了一些控制台日志，它似乎正在被调用，但它返回为空：

```
_.uniq = _.unique = function(array, isSorted, iterator) {
      console.log("called this");
      console.log(array);
    var initial = iterator ? _.map(array, iterator) : array;
    var results = [];
    // The `isSorted` flag is irrelevant if the array only contains two elements.
    if (array.length < 3) isSorted = true;
    _.reduce(initial, function (memo, value, index) {
        console.log("it never gets here");
      if (isSorted ? _.last(memo) !== value || !memo.length : !_.include(memo, value)) {
        memo.push(value);
        results.push(array[index]);
      }
      return memo;
    }, []);
      console.log(results);
    return results;
  }; 
```

第一个控制台日志给了我“[1,2,3,1]”，而第二个给了我“[]”。这似乎只在原型包含在页面上时才会发生，所以它正在发生一些事情。

我添加了另一个曾经执行过的日志（它永远不会到达这里）。看起来下划线正在执行“本机”reduce 方法，该方法是由 Prototypejs 提供的，它不采用迭代器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:29:44.433

是的，Prototype.js 覆盖`reduce`，这确实是个坏主意。如果`reduce`是 Prototype.js 唯一搞砸的事情，那么设置`Array.prototype.reduce`为`null`就在开头`_.uniq`怎么样？似乎`_.intersection`和`_.union`两者都依赖`_.uniq`。

```
 _.uniq = _.unique = function(array, isSorted, iterator) {
     var keepIt = Array.prototype.reduce;
     Array.prototype.reduce = null;
     //....
     Array.prototype.reduce = keepIt;
 }; 
```

# java - 这是一个很好的库/框架，用于在具有 ADFS 2 集成的 Java Web 应用程序中进行单点登录

> ID：11755196
> 
> 赞同：0
> 
> 时间：2012-08-01T08:14:26.043
> 
> 标签：java, single-sign-on, adfs2.0, shibboleth, openam

我们目前正在探索**OpenAM**和**Shibboleth**。

我们的应用程序不是使用 Spring 构建的，我们也没有探索 Spring 的使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:13:45.870

就库而言，我所知道的唯一一个是[OpenSAML](https://wiki.shibboleth.net/confluence/display/OpenSAML/Home)。

我不会将 OpenAM 之类的东西称为框架。它们实际上是产品。这两者都适用于 ADFS。请注意，安装和配置这些并非易事。

另一个好产品是[Ping Identity](https://www.pingidentity.com/)。

还有一组分[步指南和操作指南](http://technet.microsoft.com/en-us/library/dd727938%28v=ws.10%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T14:44:01.267

如果您正在考虑 openam，请点击此处的链接。 [https://wikis.forgerock.org/confluence/display/openam/Integrate+OpenAM+with+Shibboleth](https://wikis.forgerock.org/confluence/display/openam/Integrate+OpenAM+with+Shibboleth)

还有一些关于如何将 openam 安装为 IDP [https://wikis.forgerock.org/confluence/pages/viewpage.action?pageId=688150的链接](https://wikis.forgerock.org/confluence/pages/viewpage.action?pageId=688150)

-内存

# internet-explorer-7 - Facebook like 按钮在 IE7 中无法正确显示

> ID：11755197
> 
> 赞同：2
> 
> 时间：2012-08-01T08:14:26.977
> 
> 标签：internet-explorer-7, cross-browser, facebook-like

我正在使用来自不同社交媒体网站的点赞按钮，例如`g+, facebook like, xing, and twitter`. `Facebook like button`在所有浏览器中都可以找到作品，除了`IE7`. 它如下图所示： ![在此处输入图像描述](../Images/ea2ab7ee7ac64cc174b9aee1eff913aa.png)

根据论坛，我得到了使用`fb:like:width="115"`. 但是，它无助于解决此浏览器问题。我也尝试使用我自己的样式，`!important`但它仍然没有覆盖，因为我的样式在页面顶部被调用并且它位于页面正文的底部。

有谁知道如何在不手动添加其他样式的情况下解决此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:31:02.703

你会发现 Facebook no loner 支持 IE7，所以 Like 按钮永远不会被固定在 IE7 中正确显示。它坏了，因为它与 IE7 不兼容（至少不是 FB 对 Like 按钮进行编码的方式）。您应该让用户使用兼容的浏览器（最好是 IE9、Chrome 或 FF）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:27:36.333

## 为 Internet Explorer 7 修复 Facebook Like 按钮（带计数）的 3 个步骤

此示例使用 XFBML，因为 HTML5 尚未得到所有浏览器的支持。

**第 1 步或第 2 步通常是人们出错的地方**。

## 第1步

首先检查您是否在 html 标签中包含了 Facebook 命名空间：

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

## 第2步

现在将此`meta`标签包含在`head`您的页面部分中：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

**这是如何运作的？**

*   `IE=edge`强制 IE 使用最新的渲染引擎（即使在 Intranet 中）*   `chrome=1`强制 Chrome Frame 使用最新的 IE 渲染引擎

## 第 3 步

最后，在您的页面上包含 Facebook XFBML 和 JavaScript SDK：

**XFBML**

```
<fb:like send="false" layout="button_count" width="450" show_faces="false"></fb:like> 
```

**JavaScript SDK**

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:35:13.620

上述问题已解决。我只是在 facebook opengraph 中添加了一个赞，它就可以工作了。

```
<html xmlns:og="http://opengraphprotocol.org/schema/"
      xmlns:fb="http://www.facebook.com/2008/fbml"> 
```

# javascript - 替代 selectivizr.js

> ID：11755199
> 
> 赞同：13
> 
> 时间：2012-08-01T08:14:34.153
> 
> 标签：javascript, selectivizr

[selectivizr.js](https://github.com/keithclark/selectivizr)项目的最后一次更新是一年前，有很多 PR 和问题。

有没有比 selectivizr.js 更好的选择？

# web-applications - 在我的 Spring-MVC 应用程序中获取“页面未正确重定向”

> ID：11755203
> 
> 赞同：0
> 
> 时间：2012-08-01T08:15:00.140
> 
> 标签：web-applications, spring-mvc, spring-security, apache-tiles

我正在尝试实现一个 Spring Security 应用程序。另外，我在我的网络应用程序中使用瓷砖。这是我的 Spring Security XML (spring-security.xml)

```
<http auto-config="true">
    <intercept-url pattern="/*" access="ROLE_USER" />
    <form-login login-page="/login" 
        authentication-failure-url="/login" />
    <logout logout-success-url="/login" />
</http>
<authentication-manager>
  <authentication-provider>
    <user-service>
        <user name="admin" password="admin" authorities="ROLE_USER" />
    </user-service>
  </authentication-provider>
</authentication-manager> 
```

这是我用于登录 JSP 页面的 tiles.xml：

```
<definition name="login" extends="baseLayout">
    <put-attribute name="title" value="Login Here" />
    <put-attribute name="body" value="loginContainer" type="definition" />
</definition>
<definition name="loginContainer" template="/layouts/loginPage.jsp">
    <put-attribute name="loginForm" value="/login.jsp" />
</definition> 
```

下面是我的 login.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>

<h3>Login Page</h3>
<form:form action="<c:url value='j_spring_security_check' />">
    <input type="text" name="j_username"/><br/>
    <input type="password" name="j_password"/><br/>
    <input type="submit" value="Login"/>
</form:form> 
```

请让我知道它是如何无休止地重定向的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:52:40.183

解决了。我错误地把

```
<intercept-url pattern="/*" access="ROLE_USER" /> 
```

现在将其更改为：

```
<intercept-url pattern="/admin" access="ROLE_USER" /> 
```

# php - Magento：自定义模块中的多个默认交易电子邮件

> ID：11755205
> 
> 赞同：0
> 
> 时间：2012-08-01T08:15:02.213
> 
> 标签：php, email, magento

嗨，我正在尝试为我的自定义模块制作交易电子邮件。我的模块需要三个默认电子邮件。一个通知预订请求被发送以进行审核，另外两个用于成功和失败。当我尝试发送预订请求的电子邮件时，它已完全成功发送，但是当我尝试成功或失败时，它向我显示以下错误：无效的交易电子邮件代码：数组

这是我的 config.xml 的源代码

```
<global><template>
        <email>
            <reservation_senderinfo_trans_email_id translate="label" module="reservation">
            <label>Store Reservation</label>
            <file>vantage/reservation/store_reservation.html</file>
            <type>html</type>
            </reservation_senderinfo_trans_email_id>
            <reservation_senderinfo_confirm_email translate="label"  module="reservation">
            <label>Store Reservation sucess</label>
            <file>vantage/reservation/success.html</file>
            <type>html</type>
            </reservation_senderinfo_confirm_email>
            <reservation_senderinfo_reject_email translate="label"  module="reservation">
            <label>Store Reservation Reject</label>
            <file>vantage/reservation/reject.html</file>
            <type>html</type>
            </reservation_senderinfo_reject_email>
        </email>
    </template><global> 
```

这是我的 system.xml 文件

```
 <?xml version="1.0"?>
<config>

  <sections>
    <reservation translate="label" module="reservation">
      <class>separator-top</class>
      <label>Reservation</label>
      <tab>vantage</tab>
      <frontend_type>text</frontend_type>
      <sort_order>300</sort_order>
      <show_in_default>1</show_in_default>
      <show_in_website>1</show_in_website>
      <show_in_store>1</show_in_store>
      <groups>
        <senderinfo translate="label">
          <label>Sender Information</label>
          <frontend_type>text</frontend_type>
          <sort_order>1</sort_order>
          <show_in_default>1</show_in_default>
          <show_in_website>1</show_in_website>
          <show_in_store>1</show_in_store>
           <fields>
                <sender_name translate="label">
                    <label>Name</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>1</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                </sender_name>
                <email_add translate="label">
                    <label>Email Address</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>2</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                </email_add>
                <trans_email_id translate="label">              
                    <label>Reservation Template</label>
                    <frontend_type>select</frontend_type>
                    <source_model>adminhtml/system_config_source_email_template</source_model>
                    <sort_order>30</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>                    
                </trans_email_id>
                <confirm_email translate="label">               
                    <label>Confirmation Template</label>
                    <frontend_type>select</frontend_type>
                    <source_model>adminhtml/system_config_source_email_template</source_model>
                    <sort_order>30</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>                    
                </confirm_email>
                <reject_email translate="label">                
                    <label>Reject Template</label>
                    <frontend_type>select</frontend_type>
                    <source_model>adminhtml/system_config_source_email_template</source_model>
                    <sort_order>30</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>                    
                </reject_email>
                        <trans_email_bcc translate="label">
                    <label>BCC</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>4</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                </trans_email_bcc>
                <trans_email_cc translate="label">
                    <label>CC</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>3</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                </trans_email_cc>

              </fields>
        </senderinfo>   
      </groups>
    </reservation>
  </sections>
</config> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:04:30.197

交易电子邮件代码无效。这意味着您尚未指定要使用的模板。您必须在 config.xml 中定义它：

```
<default>
    <reservation>
        <senderinfo>
            <trans_email_id>reservation_senderinfo_trans_email_id</trans_email_id>
            <confirm_email>reservation_senderinfo_confirm_email</confirm_email>
            <reject_email>reservation_senderinfo_reject_email</reject_email>
        <senderinfo>
    </reservation>
</default> 
```

# c++ - 用于 jsoncpp 的 C++ XCode 链接库

> ID：11755207
> 
> 赞同：3
> 
> 时间：2012-08-01T08:15:23.870
> 
> 标签：c++, xcode

由于包含但无法找到.cpp，我陷入无法找到符号之间，当我添加库时，出现以下错误：

> dyld：未加载库：buildscons/linux-gcc-4.2.1/src/lib_json/libjson_linux-gcc-4.2.1_libmt.dylib 引用自：/Users/kural/Documents/glia/build/Debug/glia
> 原因：图像未发现 Trace/BPT 陷阱注销

如何解决这个问题？我正在使用 XCode 3.2

# python - 如何从文本文件中删除 ^M 并将其替换为下一行

> ID：11755208
> 
> 赞同：7
> 
> 时间：2012-08-01T08:15:24.603
> 
> 标签：python, replace

所以假设我有一个包含以下内容的文本文件：

```
Hello what is up. ^M
^M
What are you doing? 
```

我想删除`^M`并用下面的行替换它。所以我的输出看起来像：

```
Hello what is up. What are you doing? 
```

我如何在 Python 中执行上述操作？或者，如果有任何方法可以使用 unix 命令执行此操作，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T08:28:36.580

```
''.join(somestring.split(r'\r')) 
```

或者

```
somestring.replace(r'\r','') 
```

这假设您的字符串中有回车符，而不是文字“^M”。如果是文字字符串 "^M" 则用 "^M" 替换 r'\r'

如果您希望换行符消失，请使用 r'\r\n'

这是 python 中非常基本的字符串操作，可能值得看一些基本教程[http://mihirknows.blogspot.com.au/2008/05/string-manipulation-in-python.html](http://mihirknows.blogspot.com.au/2008/05/string-manipulation-in-python.html)

正如第一个评论者所说，它总是有助于说明你到目前为止所尝试的内容，以及你对问题的不理解，而不是要求一个直接的答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T08:22:26.110

尝试：

```
>>> mystring = mystring.replace("\r", "").replace("\n", "") 
```

（其中“mystring”包含您的文本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:23:02.073

采用`replace`

```
x='Hello what is up. ^M\
^M\
What are you doing?'

print x.replace('^M','') # the second parameter  insert what you want replace it with 
```

# mysql - Phpmyadmin - Mysql 没有权限

> ID：11755214
> 
> 赞同：0
> 
> 时间：2012-08-01T08:15:49.513
> 
> 标签：mysql, phpmyadmin

我在 Windows 7 上安装了 wamp 2.1。但是当我打开 phpMyAdmin 时，我收到错误，Mysql 'No Provileges'。我卸载了 wamp 并重新安装了几次，但它没有帮助。有谁知道如何解决这个问题？

另外，当我尝试从 mysql 控制台创建数据库时，我收到以下错误： ERROR 1044 <42000>: Access denied for user ''@'localhost' to database 'a_db_name'

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-29T01:56:47.347

感谢上帝，感谢所有人的帮助。

这很简单。

1.  必须！单击 phpadmin 页面中的注销图标

2.  在登录页面中，键入：

用户名：root 密码：（空白）

惊喜。现在您可以愉快地创建数据库了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T10:15:49.297

您是否以 root 身份登录 MySQL？以 MySQL root 身份登录时，您必须明确授予“常规” MySQL 用户帐户的权限。

首先为您的 MySQL 数据库设置一个 root 帐户。

在终端类型中：

```
mysqladmin -u root password 'password' 
```

要登录 MySQL，请使用以下命令：

```
mysql -u root -p 
```

**编辑：**

要设置权限，使用 skip-grant-tables 选项手动启动服务器，打开 mysql 客户端并手动更新 mysql.user 表和/或 mysql.db 表。不过，这可能是一项乏味的任务，因此，如果您需要的是具有所有权限的帐户，我将执行以下操作。

`skip-grant-tables`使用选项启动服务器

启动 mysql 客户端（没有用户名/密码）

发出命令

```
flush privileges; 
```

这会强制加载授权表。

使用类似这样的 GRANT 命令创建一个新帐户（但将用户名和密码替换为您想要使用的任何内容。

```
GRANT ALL on *.* to 'username'@'localhost' identified by 'password'; 
```

以正常模式重新启动服务器（没有跳过授权表）并使用新创建的帐户登录。

请参阅[此](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_skip-grant-tables)MySQL 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T18:00:25.047

在步骤 1 中。**在您的数据库**中非常重要。在步骤 2 中，通过所有表选择您的数据库。在第 3 步中。备份类型=替换和导出。在步骤 4 在我的 sql 中导入数据库。请注意：在导入您的数据库中...必须在第 4 步中查看和选择所有表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T14:14:38.173

用户名应该是 root 并保持密码为空（保持密码字段为空）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-23T14:01:42.890

简单的解决方案。只需在 PhpMyAdmin 中找到“主页”右侧的图标，然后单击注销。然后使用用户名“root”和密码“”（空白）登录。这将相应地工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T23:13:55.147

看看我关于这个问题的主题，其中包含上述一些内容。

[MAMP mysql损坏的root用户](https://stackoverflow.com/questions/12929722/mamp-mysql-broken-root-user/12965003#12965003)

您需要关闭 mysql 安装并从命令行正确重新启动它，如上所示。在我的主题中，我对如何执行此操作有完整的明确说明。我的说明适用于 MAMP，但您应该能够对其进行调整以适应您的安装。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-07T05:12:46.893

右键单击 wamp 图标并转到 mysql 控制台。如果您设置了密码，请使用密码登录。默认情况下，密码为空，用户名为“root”一旦您在 mysql 提示符下执行 FLUSH PRIVILEGES；现在退出命令提示符，您就可以开始了。

# c - 将 Ada 闭包转换为 C 回调（函数 + void*）

> ID：11755215
> 
> 赞同：4
> 
> 时间：2012-08-01T08:15:49.970
> 
> 标签：c, closures, ada

大多数干净的 C API 将回调声明为回调函数和用户数据的组合。用户数据通常是无效的*。WinAPI 使用指针大小的整数 (lParam)。在进行厚绑定期间，自然希望允许使用 Ada 2005 闭包代替 C 回调。

我有一个代码。它在 GNAT 上就像一个魅力（GPL 2012，x86-windows 至少经过测试），但通常不能保证 Run_Closure_Adapter.X 变量和 Run_Closure.X 参数将具有相同的内部结构。

问题是：是否有适当的（符合标准的）方法来做到这一点？也许是一个涉及标记类型、接口或泛型的技巧。至少有一种方法可以做到这一点：在不同的任务中运行闭包执行器和闭包并使用集合点。但这太慢了。

**Closure_Test.adb**：

```
with Closure_Lib; use Closure_Lib;
with Ada.Text_IO; use Ada.Text_IO;
with Ada.Strings.Fixed; use Ada.Strings.Fixed;

procedure Closure_Test is

   procedure Closure_Tester is

      Local_String : String := "Hello, world!";

      procedure Closure is
      begin
         Put_Line (Local_String);
      end Closure;

   begin
      Run_Closure (Closure'Access);
   end Closure_Tester;

   procedure Ada_Run_Closure (X : access procedure) is
   begin
      X.all;
   end Ada_Run_Closure;

   -- Nested_Closure fills the execution stack with
   -- several activation records of Nested_Closure_Tester
   -- Having done so (local I = 0) we start a Fibonacci
   -- algorithm using Print_Closure access values of
   -- different dynamic nesting levels

   procedure Nested_Closure_Tester
     (I : Integer;
      Closure_Runner: access procedure (X : access procedure);
      Prev_Closure, Prev_Closure2: access procedure)
   is

      procedure Print_Closure is
      begin
         if Prev_Closure /= null and Prev_Closure2 /= null then
            Closure_Runner (Prev_Closure);
            Closure_Runner (Prev_Closure2);
         else
            Put (".");
         end if;
      end Print_Closure;

      procedure Nested_Closure is
      begin
         if I > 0 then
            Nested_Closure_Tester (I - 1, Closure_Runner,
                                   Print_Closure'Access, Prev_Closure);
         else
            Print_Closure;
         end if;
      end Nested_Closure;
   begin
      Closure_Runner (Nested_Closure'Access);
   end Nested_Closure_Tester;

begin
   -- Closure_Tester;
   -- I = 6 gives 13 dots
   Nested_Closure_Tester(6, Ada_Run_Closure'Access, null, null);
   New_Line;
   Nested_Closure_Tester(6, Run_Closure'Access, null, null);
end Closure_Test; 
```

**Closure_Lib.ads**：

```
with Interfaces.C;
with System;

package Closure_Lib is

   procedure Run_Closure (X : access procedure);

private

   type Simple_Callback is access procedure(Data : in System.Address);
   pragma Convention (C, Simple_Callback);

   procedure Run_Callback (X : in Simple_Callback; Data : in System.Address);

   pragma Import (C, Run_Callback, "Run_Callback");

   procedure Sample_Callback (Data : in System.Address);
   pragma Convention (C, Sample_Callback);

end Closure_Lib; 
```

**Closure_Lib.adb**：

```
with Interfaces.C;
with System;
with System.Storage_Elements; use System.Storage_Elements;
with Ada.Text_IO; use Ada.Text_IO;

package body Closure_Lib is

   procedure Sample_Callback (Data : in System.Address) is
   begin
      Ada.Text_IO.Put_Line ("Simple_Callback");
   end Sample_Callback;

   procedure Run_Closure_Adapter (Data : in System.Address);
   pragma Convention (C, Run_Closure_Adapter);

   procedure Run_Closure_Adapter (Data : in System.Address) is
      X : access procedure;
      for X'Address use Data;
      pragma Import (Ada, X);
      X_Size : constant Storage_Count := X'Size / System.Storage_Unit;
   begin
      -- Put_Line ("Variable access procedure size:" & Storage_Count'Image (X_Size));
      X.all;
   end Run_Closure_Adapter;

   procedure Run_Closure (X : access procedure) is
      X_Size : constant Storage_Count := X'Size / System.Storage_Unit;
      X_Address : constant System.Address := X'Address;
   begin
      -- Put_Line ("Anonymous access procedure size:" & Storage_Count'Image (X_Size));
      Run_Callback (Run_Closure_Adapter'Access, X_Address);
   end Run_Closure;

end Closure_Lib; 
```

**闭包执行器.c**：

```
typedef void (*Simple_Callback)(void* Data);

void Run_Callback (Simple_Callback X, void* Data) {
    (*X)(Data);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T19:41:26.070

我认为使用泛型可能会满足您正在寻找的内容（顺便说一下，我不明白使用任务如何确保数据类型匹配？）

也许像

```
generic
   type Client_Data is private;
package Closure_G is
   type Closure (<>) is private;
   function Create (Proc : access procedure (Parameter : Client_Data);
                    And_Parameter : Client_Data) return Closure;
   procedure Execute (The_Closure : Closure);
private
   type Procedure_P is access procedure (Parameter : Client_Data);
   type Closure is record
      The_Procedure : Procedure_P;
      And_Parameter : Client_Data;
   end record;
end Closure_G; 
```

当用户调用`Execute (A_Closure)`时，`Proc`提供的 to`Create`会与`And_Parameter`当时提供的 that 一起调用。

（`type Closure (<>) is private;`确保用户只能`Closure`使用提供的创建对象`Create`。）

在您传递给 C 库以在事件发生时回调的场景中，主要问题是该`Closure`对象实际上是由 C 库维护的。

除了您实际上并不需要这个 Ada 之外`Closure`，还有一个由匿名访问子程序值引起的潜在问题，即子程序可以在本地声明并且在 C 库获取时已经超出范围轮到调用它。这将是坏消息。

在 Ada 世界中，编译器以两种方式处理这个问题。首先，您不允许存储匿名访问子程序的值（因此是`type Procedure_P`上述内容）。其次，即使你像这样解决这个问题

```
function Create (Proc : access procedure (Parameter : Client_Data);
                 And_Parameter : Client_Data) return Closure is
begin
   return (The_Procedure => Procedure_P'(Proc),
           And_Parameter => And_Parameter);
end Create; 
```

在运行时检查实际的“可访问性级别”；如果你弄错了，你会得到一个`Program_Error`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T00:48:13.663

作为替代方案，您可以查看如何[`GtkAda`](http://libre.adacore.com/tools/gtkada/)处理来自`GTK+`. 如[*GtkAda User's Guide*](https://docs.adacore.com/live/wave/gtkada/html/gtkada_ug/index.html)所示，并在[*§4.2.2 中讨论。通过`Gtk.Handlers`包*](https://docs.adacore.com/live/wave/gtkada/html/gtkada_ug/signals.html#connecting-via-the-gtk-handlers-package)连接，

> 该`Gtk.Marshallers`包提供了一组函数，可直接用作回调函数`GtkAda`......`To_Marshaller`在[`Gtk.Handlers`](http://viewvc.libre.adacore.com/viewvc.cgi/Public/trunk/GtkAda/src/gtk-handlers.ads?revision=154629&view=markup). 它们接受一个参数，即您要调用的函数的名称，并返回一个可以直接在`Connect`.

[`Interaction`](http://rosettacode.org/wiki/GUI_component_interaction#Ada)是一个实例化几个这样的处理程序并使用*访问子程序*参数连接相应回调的示例。

# image - 如何将图像设置为 flash/as3 中影片剪辑的背景？

> ID：11755218
> 
> 赞同：1
> 
> 时间：2012-08-01T08:15:53.433
> 
> 标签：image, actionscript-3, flash, background

我正在开发 Adob​​e Flash/ActionScript 3 中的迷你应用程序，我必须通过单击一组按钮来更改场景中某些对象的颜色。对于相同的对象，我必须设置一些模式（使用图像）。

我可以处理颜色的变化，但我不知道如何将图像作为背景。

如何做呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:09:45.210

您可以`Graphics`用来绘制图像。

```
// Draw the background
var shape:Shape = new Shape();
shape.graphics.beginBitmapFill(myBitmapData);
shape.drawRect(0, 0, myBitmapData.width, myBitmapData.height);
shape.endFill();

// Reference for later
var background:DisplayObject = shape; 
```

您还可以使用`Bitmap`来显示图像。

```
// Display the image
var bitmap:Bitmap = new Bitmap(myBitmapData);

// Reference for later
var background:DisplayObject = bitmap; 
```

现在您可以将此背景添加到您的对象中。

```
// Add the background at the lowest depth level
myObject.addChildAt(background, 0); 
```

# c# - ASP.NET 页面生命周期：Page.ProcessRequest 如何执行事件和内部方法？

> ID：11755219
> 
> 赞同：3
> 
> 时间：2012-08-01T08:15:57.067
> 
> 标签：c#, asp.net, .net, vb.net, page-lifecycle

要了解 ASP.NET 页面生命周期，我认为了解 Page.ProcessRequest 方法更重要，因为 ProcessRequest 方法调用页面的所有事件和方法。有谁知道在代码级别如何在 Page.ProcessRequest 方法中安排事件和方法调用（**反射器代码也可以**）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:25:29.963

我相信您正在寻找从 ProcessRequest 运行的以下方法顺序

```
The processRequest() method cycles through the page's life cycle in the order listed below.

Methods                 Description
Page_Init                   Page Initialization
LoadViewState           View State Loading
LoadPostData            Postback Data Processing
Page_Load                   Page Loading
RaisePostDataChangedEvent   PostBack Change Notification
RaisePostBackEvent          PostBack Event Handling
Page_PreRender          Page Pre Rendering Phase
SaveViewState           View State Saving
Page_Render                 Page Rendering
Page_Unload Page            Unloading 
```

有关更多信息，请参阅链接[http://www.dotnettutorials.com/tutorials/performance/page-life-cycle-asp.aspx](http://www.dotnettutorials.com/tutorials/performance/page-life-cycle-asp.aspx)

# c++ - 推力可以处理半精度浮点数（float16 / IEEE 754-2008）吗？

> ID：11755221
> 
> 赞同：2
> 
> 时间：2012-08-01T08:16:14.450
> 
> 标签：c++, cuda, thrust

我正在寻找一个不需要 32 位精度的应用程序，12-16 位就足够了。

推力是否能够处理 float16（即将两个 16 位精度浮点数打包/解包成一个 32 位字）？

我应该使用定点算术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:07:26.863

CUDA 硬件不包括对`half`-precision 算术的本机支持，仅支持与`float`.

由于 C 没有内置`half`类型，因此转换内在函数使用`unsigned short`：

```
unsigned short __float2half_rn( float );
float __half2float( unsigned short ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T13:25:21.203

这里接受的答案现在已经过时了。

Cuda 7.5 现在支持 16 位浮点数。

包括和数据类型的标题`cuda_fp16.h`。`half``half2`

# python-3.x - Python中的十进制到十六进制大数

> ID：11755222
> 
> 赞同：1
> 
> 时间：2012-08-01T08:16:15.433
> 
> 标签：python-3.x

我编写了一个程序来将十进制转换为十六进制，这相当于 python 中的 hex() 函数。程序打印正确的值直到'2559'。如何为较大的数字获取正确的十六进制值。代码无法从 2600 十进制值中给出正确的十六进制表示。这是我的代码：

```
 #########################################
              #Decimal to Hexadecimal Conversion    #
          #########################################

def DectoHex(n):

    if n <= 16:
        return n

    elif n>16:          

        if n%16 == 10:
            x = 'A'
        elif n%16 == 11:
            x = 'B'
        elif n%16 == 12:
            x = 'C'
        elif n%16 == 13:
            x = 'D'
        elif n%16 == 14:
            x ='E'
        elif n%16 == 15:
            x = 'F'
        else:
            x = n%16            
        print x     
        n = n/16        
        print n

        if n == 10:
            n = 'A'
        elif n == 11:
            n = 'B'
        elif n == 12:
            n = 'C'
        elif n == 13:
            n = 'D'
        elif n == 14:
            n ='E'
        elif n == 15:
            n = 'F'

        elif n>=16:

            if n%16 == 10:
                n = str(n/16) + 'A'
            elif n%16 == 11:
                n = str(n/16) + 'B'
            elif n%16 == 12:
                n = str(n/16) + 'C'
            elif n%16 == 13:
                n = str(n/16) + 'D'
            elif n%16 == 14:
                n = str(n/16) + 'E'
            elif n%16 == 15:
                n = str(n/16) + 'F'
            else:
                n = str(n/16) + str(n%16)
            print n 
        return str(n) + str(x)

print "Would you like to continue:"
print "Enter 'Y' to continue, 'N' to quit"
Str = str (raw_input("> "))

while True:

        if Str == 'Y':
            print "Enter a decimal number:"
            dec = int (raw_input("> "))

            Hex = DectoHex(dec)

            print "The number in base 16 is:", Hex

            print "Enter 'Y' to continue, 'N' to quit"
            Str = str (raw_input("> "))

        elif Str == 'N':
            print "Good Bye!"
            break
        else:
            print "Plesae Enter 'Y' or 'N'"
            Str = str (raw_input("> ")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:05:43.080

如果您编写的代码不仅仅是为了实验，您应该使用 Python 的 hex() (docs.python.org/library/functions.html#hex)。话虽如此，我将帮助您修复自己的实现。

您正在使用案例将小数转换为以 16 为基数的字符，并且您这样做的次数是有限的，这就解释了为什么您的代码会达到极限。我建议在一个单独的函数中定义十进制到十六进制的转换，如下所示：

```
def toHex(n):
    if n % 16 == 10:
        x = 'A'
    elif n % 16 == 11:
        x = 'B'
    elif n % 16 == 12:
        x = 'C'
    elif n % 16 == 13:
        x = 'D'
    elif n % 16 == 14:
        x = 'E'
    elif n % 16 == 15:
        x = 'F'
    else:
        x = n % 16            
    return x 
```

请注意，n % 16 可能已存储在临时变量中。

做同样事情的一个更短的方法是直接从字符串中获取基于它们的索引的字符：

```
DEC_TO_HEX_SINGLE_DIGIT = "0123456789ABCDEF"
def toHex(n): # 0 < n < 16
    return DEC_TO_HEX_SINGLE_DIGIT[n] 
```

在您的 DectoHex 函数中，您添加了有限次的十六进制数字。您应该使用递归或循环来构建您的十六进制字符串。递归示例如下：

```
def DectoHex(n):
    if n < 16:
        return toHex(n)
    mod = n % 16
    n /= 16
    return DectoHex(n) + str(toHex(mod)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T20:05:35.870

为什么不对[int](http://docs.python.org/2/library/functions.html#int)函数使用 base 关键字参数？

```
def decToHex(n):
    return int(n,base=16) 
```

Alternatively, the [hex](http://docs.python.org/2/library/functions.html#hex)() function will also do what you're looking for.

# ruby-on-rails - 重新运行迁移 - Devise Gem

> ID：11755230
> 
> 赞同：1
> 
> 时间：2012-08-01T08:16:39.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个 Rails 应用程序，并添加了[Devise gem](https://github.com/plataformatec/devise/)来验证用户身份。我现在正在进一步开发，我想添加一些 Devise 随附的模块（特别是可确认、可锁定和可验证令牌）。这些模块在原始迁移文件中被注释掉了。我想知道是否可以简单地取消注释这些模块，然后运行“rake db:migrate”。您可以重新运行这样的迁移，还是会破坏某些东西？

我会对此进行测试，但考虑到我在开发中所做的工作，我现在不想破坏任何东西。这是迁移文件的原样：

```
class DeviseCreateUsers < ActiveRecord::Migration
  def change
    create_table(:users) do |t|
      ## Database authenticatable
      t.string :email,              :null => false, :default => ""
      t.string :encrypted_password, :null => false, :default => ""

      ## Recoverable
      t.string   :reset_password_token
      t.datetime :reset_password_sent_at

      ## Rememberable
      t.datetime :remember_created_at

      ## Trackable
      t.integer  :sign_in_count, :default => 0
      t.datetime :current_sign_in_at
      t.datetime :last_sign_in_at
      t.string   :current_sign_in_ip
      t.string   :last_sign_in_ip

      ## Confirmable
      # t.string   :confirmation_token
      # t.datetime :confirmed_at
      # t.datetime :confirmation_sent_at
      # t.string   :unconfirmed_email # Only if using reconfirmable

      ## Lockable
      # t.integer  :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
      # t.string   :unlock_token # Only if unlock strategy is :email or :both
      # t.datetime :locked_at

      ## Token authenticatable
      # t.string :authentication_token

      t.timestamps
    end

    add_index :users, :email,                :unique => true
    add_index :users, :reset_password_token, :unique => true
    # add_index :users, :confirmation_token,   :unique => true
    # add_index :users, :unlock_token,         :unique => true
    # add_index :users, :authentication_token, :unique => true
  end
end 
```

其次，如果我无法重新运行迁移，我意识到我将不得不创建新的迁移并将模块手动添加到“用户”模型中。例如：

```
rails generate migration AddConfirmationToUsers string:confirmation_token datetime:confirmed_at datetime:confirmation_sent_at string:unconfirmed_email 
```

但是，我需要将“add_index”添加到这个新的迁移中，就像创建的原始迁移设计一样。我是否将“add_index”放在迁移的底部（即，在“add_column”方法之后）？也许是这样的：？

```
class AddConfirmableToUsers < ActiveRecord::Migration
  def change
    add_column :users, :price, :decimal
    add_column :users, :confirmation_token, :string
    add_column :users, :confirmed_at, :datetime
    add_column :users, :confirmation_sent_at, :datetime
    add_column :users, :unconfirmed_email, :string

    add_index :users, :confirmation_token,   :unique => true
  end
end 
```

回顾一下：

1.  我可以重新运行迁移（编辑以前的迁移，然后运行“rake db:migrate”）吗？
2.  如果我无法重新运行迁移，我会将“add_index”行放在新迁移中的什么位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:41:55.523

您不能只编辑文件并运行 db:migrate。Rails 会跟踪哪些迁移已运行，哪些尚未运行。Rails 认为它​​已经运行了该迁移。

正确的做法是按照您上面的建议创建一个新的迁移。

听起来您担心会破坏数据库并丢失大量工作。我建议您在继续之前备份数据库。数据库备份和 git 可以帮助您消除因进行不确定的更改而带来的许多恐惧。

# javascript - 当我单击打开另一个弹出窗口时如何强制关闭？

> ID：11755231
> 
> 赞同：0
> 
> 时间：2012-08-01T08:16:42.220
> 
> 标签：javascript, google-maps

我创建了一个简单的地图；[http://preprod-pnr.terresnouvelles.com/fr/decouvertes/les-hebergements-nature-et-patrimoine](http://preprod-pnr.terresnouvelles.com/fr/decouvertes/les-hebergements-nature-et-patrimoine)

如果我打开 Gîte 和酒店，弹出窗口将保持打开状态。如果我打开第二个 Gîte 弹出窗口，第一个会自行关闭。

我希望所有弹出窗口都有这种行为。如果我单击一个项目，另一个弹出窗口会自行关闭。

我怎样才能做到这一点 ？

配置变量：

```
var googlemap_setting = {
 "gite": "http://preprod-pnr.terresnouvelles.com/fr/decouvertes/les-hebergements-nature-et-patrimoine/@@hebergement_kml_view?q=gite",
 "hotel": "http://preprod-pnr.terresnouvelles.com/fr/decouvertes/les-hebergements-nature-et-patrimoine/@@hebergement_kml_view?q=hotel",
 "chambre": "http://preprod-pnr.terresnouvelles.com/fr/decouvertes/les-hebergements-nature-et-patrimoine/@@hebergement_kml_view?q=chambre-hote",
 "camping": "http://preprod-pnr.terresnouvelles.com/fr/decouvertes/les-hebergements-nature-et-patrimoine/@@hebergement_kml_view?q=camping",
 "insolite": "http://preprod-pnr.terresnouvelles.com/fr/decouvertes/les-hebergements-nature-et-patrimoine/@@hebergement_kml_view?q=insolite"
} 
```

加载地图的 javascript：

```
$(document).ready(function() {

function initGoogleMaps() {
    if ($('#map_canvas').length==0) {
        return;
    }

    var myOptions = {
        center : new google.maps.LatLng(47.26804151097223,
                -0.08375246917164172),
        zoom : 9,
        mapTypeId : google.maps.MapTypeId.HYBRID
    };

    var map = new google.maps.Map(document
            .getElementById("map_canvas"), myOptions);

    var controlDiv = document.createElement('div');

    controlDiv.style.padding = '5px';

    // Set CSS for the control border.
    var controlUI = document.createElement('div');
    controlUI.style.backgroundColor = 'white';
    controlUI.style.borderStyle = 'solid';
    controlUI.style.borderWidth = '1px';
    controlUI.style.cursor = 'pointer';
    controlUI.style.textAlign = 'center';
    controlUI.title = 'Filtrer';
    controlDiv.appendChild(controlUI);

    // Set CSS for the control interior.
    var controlText = document.createElement('div');
    controlText.style.fontFamily = 'Arial,sans-serif';
    controlText.style.fontSize = '12px';
    controlText.style.paddingLeft = '4px';
    controlText.style.paddingRight = '4px';
    controlText.innerHTML = $('#mapscontrol').html();
    $('#mapscontrol').remove();
    controlUI.appendChild(controlText);

    var camping = new google.maps.KmlLayer(
            googlemap_setting["camping"]);
    var gite = new google.maps.KmlLayer(
            googlemap_setting["gite"]);
    var chambre = new google.maps.KmlLayer(
            googlemap_setting["chambre"]);
    var hotel = new google.maps.KmlLayer(
            googlemap_setting["hotel"]);
    var insolite = new google.maps.KmlLayer(
            googlemap_setting["insolite"]);

    camping.setMap(map);
    gite.setMap(map);
    chambre.setMap(map);
    hotel.setMap(map);
    insolite.setMap(map);

    google.maps.event.addDomListener(controlDiv, 'click',
            function(event) {
                var item = event.srcElement;
                if (item.checked) {
                    if (item.value == "camping") {
                        camping.setMap(map);
                    }
                    if (item.value == "gite") {
                        gite.setMap(map);
                    }
                    if (item.value == "chambre") {
                        chambre.setMap(map);
                    }
                    if (item.value == "hotel") {
                        hotel.setMap(map);
                    }
                    if (item.value == "insolite") {
                        insolite.setMap(map);
                    }
                }
                if (!item.checked) {
                    if (item.value == "camping") {
                        camping.setMap(null);
                    }
                    if (item.value == "gite") {
                        gite.setMap(null);
                    }
                    if (item.value == "chambre") {
                        chambre.setMap(null);
                    }
                    if (item.value == "hotel") {
                        hotel.setMap(null);
                    }
                    if (item.value == "insolite") {
                        insolite.setMap(null);
                    }
                }
            });

    map.controls[google.maps.ControlPosition.TOP_RIGHT]
            .push(controlDiv);
}
function initDataTable(){
    datatableconfig = {
            "iDisplayLength" : 20,
            "aaSorting": [[2, "asc"]],
            "oLanguage": {"sUrl": "@@collective.js.datatables.translation"},
            "aLengthMenu" : [ [ 20, 30, 50, -1 ],
                    [ 20, 30, 50, "Tous" ] ]
        };

    var oTable = $('#table-hebergement').dataTable(
            datatableconfig);

    /* ADD COLUMN SEARCH SUPPORT */
    $('#table-hebergement #head-type select').change(
            function(eventObject) {
                oTable.fnFilter($(this).val(), 0);
            });
    $('#table-hebergement #head-capacity select').change(
            function(eventObject) {
                oTable.fnFilter($(this).val(), 1);
            });

}
initGoogleMaps();
initDataTable();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:43:54.780

如果不查看您的代码，很难提出建议，但我会在弹出窗口的最外层元素中添加一个类，例如`.popup`，然后我会尝试`.popup`在打开一个元素之前关闭所有元素。用 jQuery 说：

```
$(".popup").hide(); 
```

# android - 将 ListView 中的每个项目插入 sqlite 数据库时出现问题

> ID：11755234
> 
> 赞同：0
> 
> 时间：2012-08-01T08:16:49.830
> 
> 标签：android, database, sqlite, listview

我在将项目插入数据库时​​遇到问题。我的 ListView 中有 6 个项目并为它创建了数据库。当我单击某个项目插入数据库时​​，插入了 6 个项目而不是某个项目。我觉得这与我的插入代码有关。

以下是将项目插入数据库表的插入代码。

```
@Override
    public void onListItemClick(ListView l, View v, int position, long id)
    {
        buddyDB.open();
        long _id;
        super.onListItemClick(l, v, position, id);

        Cursor c = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
        c.moveToPosition(position);

        /*TextView contactName = (TextView) findViewById(R.id.contactName);
        String NameValue = contactName.getText().toString(); 

        TextView contactNameTwo = (TextView) findViewById(R.id.contactName);
        String NameValueTwo  = contactName.getText().toString();

        TextView contactNameThree = (TextView) findViewById(R.id.contactName);
        String NameValueThree = contactName.getText().toString();

        TextView contactNameFour = (TextView) findViewById(R.id.contactName);
        String NameValueFour = contactName.getText().toString();

        TextView contactNameFive= (TextView) findViewById(R.id.contactName);
        String NameValueFive = contactName.getText().toString();

        TextView contactNameSix = (TextView) findViewById(R.id.contactName);
        String NameValueSix = contactName.getText().toString();*/

        Toast.makeText(getBaseContext(), 
                "Selected: " + buddiesList[position], Toast.LENGTH_SHORT).show();

        _id = buddyDB.insertContact("Kanak Priya");
        _id = buddyDB.insertContact("Joanne Liew");
         _id = buddyDB.insertContact("Michelle Lam");
        _id = buddyDB.insertContact("Melissa Haiting");
        _id = buddyDB.insertContact("Teo Kin Hua");
        _id = buddyDB.insertContact("David Yeo");

        buddyDB.close();    

        Intent i = new Intent(context, PersonalInfo.class);
        startActivity(i);
    } 
```

任何帮助将不胜感激。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:18:44.543

您插入 6 行：

```
_id = buddyDB.insertContact("Kanak Priya");
    _id = buddyDB.insertContact("Joanne Liew");
     _id = buddyDB.insertContact("Michelle Lam");
    _id = buddyDB.insertContact("Melissa Haiting");
    _id = buddyDB.insertContact("Teo Kin Hua");
    _id = buddyDB.insertContact("David Yeo"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:27:50.463

问题是每次单击任一列表项时都会插入六个项目。

在您的 onListItemClick 中，您需要在将其插入数据库之前检查您单击的联系人。

例如：

```
_id = buddyDB.insertContact(NameValue); 
```

并删除代码中的六个插入语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:41:57.690

在“onListItemClick”中试试这个，

```
 TextView contactName = (TextView) v.findViewById(R.id.contactName);
 String NameValue = contactName.getText().toString(); 
 id = buddyDB.insertContact(NameValue); 
```

其中，v = View，onListItemClick 的参数

# ruby-on-rails - 在 rake 任务中存储密码是否安全？

> ID：11755237
> 
> 赞同：3
> 
> 时间：2012-08-01T08:16:54.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, rake

我正在使用这个 gem 来访问我的应用程序中的谷歌文档。

[https://github.com/gimite/google-drive-ruby](https://github.com/gimite/google-drive-ruby)

我像这样登录我的谷歌帐户 -

```
session = GoogleDrive.login("username@gmail.com", "mypassword") 
```

然后将此 gem 存储在我的任务文件夹中，并与我的应用程序一起部署到 heroku。

这安全吗？我应该在这样的计划文本中存储密码吗？

如果没有，有什么替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:32:36.600

Heroku 允许您设置将成为 heroku dyno 上的环境变量的配置变量。就安全性而言，它并不是真的更安全——因为类似的漏洞利用可以访问静态文件内容，就像可以访问环境一样，但这似乎是管理特权凭据的首选方式。请参阅[https://devcenter.heroku.com/articles/config-vars#setting-up-config-vars-for-a-deployed-application](https://devcenter.heroku.com/articles/config-vars#setting-up-config-vars-for-a-deployed-application)

使用 heroku 的配置而不是在代码库中存储凭据的一个优点是，您可以通过 heroku 的访问控制来管理谁可以访问它们，而不必同时通过 heroku 进行管理以及管理谁可以访问代码库。

# oop - 抽象被改变了？

> ID：11755243
> 
> 赞同：1
> 
> 时间：2012-08-01T08:17:29.673
> 
> 标签：oop, design-patterns, solid-principles, abstract-factory

我的问题是，如何重新设计抽象工厂。

例如，我得到了车辆的下一个抽象：

```
interface IEngine { int Power(); }
class Gasoline : IEngine { public int Power() {return 150; }}
class Diesel : IEngine { public int Power() { return 50; }}

interface IFrame { string Name(); }
class Boxed : IFrame { public string Name() { return "Boxed frame"; }}
class Hat : IFrame { public string Name() { return "Hat frame"; }}

interface TransportFactory { 
  IEngine CreateEngine(); 
  IFrame CreateChassis(); 
}
class TrailerCar : TransportFactory { 
  public IEngine CreateEngine() { return new Diesel(); }
  public IFrame CreateChassis() { return new Boxed(); }
}
class PrivateCar : TransportFactory {
    public IEngine CreateEngine() { return new Gasoline(); }
    public IFrame CreateChassis() { return new Hat(); }
} 
```

现在，我可以实例化私人或拖车。

有人建议我改变：拖车发动机可以是涡轮增压或混合动力。仅适用于拖车！对于私家车柴油和汽油发动机仍然是常用的柴油发动机。所以，如果我做改变：

```
public enum EngineType { Hybrid, Turbo, }

interface TransportFactory
{
    IEngine CreateEngine(EngineType t);
    IFrame CreateChassis();
} 
```

我可以添加类：

```
class GasolineHybrid : IEngine
{
    public int Power()
    {
        return 70;
    }
}

class GasolineTurbo : IEngine
{
    public int Power()
    {
        return 170;
    }
}

class DieselHybrid : IEngine
{
    public int Power()
    {
        return 60;
    }
}

class DieselTurbo : IEngine
{
    public int Power()
    {
        return 98;
    }
} 
```

很好，但是（!!!）私家车与它无关！我可以使用什么样的设计？旧的抽象不正确？

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:30:29.383

怎么样：

```
class GasolineHybridTrailerCar : TransportFactory
{
    public IEngine CreateEngine()
    {
        return new GasolineHybrid();
    }
    ...
}

class GasolineTurboTrailerCar : TransportFactory
{
    public IEngine CreateEngine()
    {
        return new GasolineTurbo();
    }
    ...
}

class DieselHybridTrailerCar : TransportFactory
{
    public IEngine CreateEngine()
    {
        return new DieselHybrid();
    }
    ...
}

class DieselTurboTrailerCar : TransportFactory
{
    public IEngine CreateEngine()
    {
        return new DieselTurbo();
    }
    ...
} 
```

产生大量类背后的想法是消除客户做出错误选择的能力。既然你说混合动力和涡轮发动机对私家车没有意义，那就保留 IEngine CreateEngine(EngineType t); 将需要私人汽车厂做出更多努力来拒绝不正确的论点。

我不确定你是不是这个意思，但类名表明汽车是工厂的产品。在经典关系中它将是`factory --produce--> product`。通过概括来表达它是古怪而有趣的，但其他人几乎无法识别。模式的美妙之处在于，一旦您听到它的一个单词名称，您就会对实现可能暗示的所有内部结构充满信心。

有模式[生成器](http://en.wikipedia.org/wiki/Builder_pattern)。它会更适合您的设计吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:09:01.750

请记住，参数不必是接口的一部分，它们可以传递给实现的构造函数。所以你仍然可以保留你的旧界面：

```
interface TransportFactory
{
    IEngine CreateEngine();
    IFrame CreateChassis();
} 
```

但将 传递`EngineType`给`TrailerCar`构造函数：

```
class TrailerCar : TransportFactory { 
  private readonly EngineType engineType;

  public TrailerCar(EngineType engineType)
  {
    this.engineType = engineType;
  }

  public IEngine CreateEngine()
  {
    if (engineType == EngineType.Hybrid) return new DieselHybrid();
    else return new DieselTurbo();
  }

  public IFrame CreateChassis() { return new Boxed(); }
} 
```

# php - 警告：内爆（）

> ID：11755244
> 
> 赞同：1
> 
> 时间：2012-08-01T08:17:29.813
> 
> 标签：php, loops, implode

我收到以下警告：

> 警告：implode() [function.implode]：传递的参数无效。

是什么原因造成的，我该如何解决？

```
$title = $_POST[photo_name_id];
if($title)
{
    foreach($title as $titled)
    {
        $judul[] = $titled;
    }
}

$titleds = "('".implode("'), ('",$judul)."')"; 
```

这是我的表格：

```
<tr>
    <td> 
        <?  
        $pm1= mysql_query("SELECT photo_name FROM photo_name WHERE photo_name_id = 1");
        $dpm1 = mysql_fetch_array ($pm1);echo"$dpm1[0]"
        ?> 
        <input type='hidden' name='photo_name_id[]' value='<?echo"$dpm1[0]"?>'> :  
    </td>
</tr>
<tr>
    <td> 
        <?  
        $pm1= mysql_query("SELECT photo_name FROM photo_name WHERE photo_name_id = 2");
        $dpm1 = mysql_fetch_array ($pm1);echo"$dpm1[0]"
        ?>
        <input type='hidden' name='photo_name_id[]' value='<?echo"$dpm1[0]"?>'> :  
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:20:02.780

尝试添加：

```
$judul = array(); 
```

在初始化`$judul`为`array`.

```
$judul = array();

$title = $_POST[photo_name_id];
if($title)
{
    foreach($title as $titled)
    {
        $judul[] = $titled;

    }
}

$titleds = "('".implode("'), ('",$judul)."')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:20:21.953

如果`$title`评估为假会发生什么？然后您的 if 语句将不会执行，并且不会创建数组。`implode()`因为传入了一个未设置的变量，所以会发出警告。它想要一个数组。

您应该初始化`$judul`为一个空数组或将内爆放在您的 if 中。

另外，引用您的数组键。不这样做是不好的做法，因为最初 PHP 假定它们是常量。

```
$title = $_POST['photo_name_id'];
if($title) {
    foreach($title as $titled) {
            $judul[] = $titled;
    }

    $titleds = "('" . implode("'), ('", $judul) . "')";
} 
```

或者这个（更可取，因为`$titleds`将始终设置）：

```
$title = $_POST['photo_name_id'];
$judul = array();

if($title) {
    foreach($title as $titled) {
            $judul[] = $titled;
    }
}

$titleds = "('" . implode("'), ('", $judul) . "')"; 
```

然而，这一切都提示了问题。为什么要复制`$title`到新数组中。为什么不这样做：

```
$title = $_POST['photo_name_id'];

if(!is_array($title)) {
    $title = array();
}

$titleds = "('" . implode("'), ('", $title) . "')"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T08:20:33.543

确保`$judul`是一个数组。PHP 内爆需要参数（字符串、数组）。看到[这个](http://php.net/manual/en/function.implode.php)。

# ruby-on-rails - Rails 嵌套表单 - 无法批量分配受保护的属性：

> ID：11755245
> 
> 赞同：1
> 
> 时间：2012-08-01T08:17:42.030
> 
> 标签：ruby-on-rails, nested-forms, mass-assignment

我使用了nested_form gem，每当我尝试向我的表单提交一些东西时，我都会收到`Can't mass-assign protected attributes:items`消息，即使我已经放入`attr_accessible`了我的模型。

形式：

```
<%= nested_form_for(@goods_in) do |f| %>
...

<%= f.fields_for :items do |i| %>
<td><%= i.text_field :description, :autocomplete => :off%></td>
<td><%= i.text_field :quantity, :autocomplete => :off %></td>
<th><%= i.link_to_remove "Remove this item" %></th>
<% end %>
<%= f.submit :"Submit Delivery" %>
<% end %> 
```

模型中的商品：类 GoodsIn < ActiveRecord::Base belongs_to :supplier has_many :items

```
attr_accessible :c4lpono, 
              :courier, 
              :deliverydate,  
              :deliverynoteno,  
              :destination,  
              :notes,  
              :quantity,  
              :signedby,
              :supplier_id,
              :partcode_ids

accepts_nested_attributes_for :supplier

validates :c4lpono, 
              :deliverydate,  
              :deliverynoteno,  
              :destination,  
              :quantity,  
              :signedby,
              :presence =>true                  

end 
```

项目型号

```
class Item < ActiveRecord::Base
belongs_to :goods_in

attr_accessible :quantity,
              :partcode,
              :description,
              :goods_in_id

accepts_nested_attributes_for :goods_in

end 
```

控制器中的货物：

```
def create
@goods_in = GoodsIn.new(params[:goods_in])
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:41:21.477

你必须添加

```
attr_accessible :items_attributes 
```

这是文档[的链接](http://apidock.com/rails/ActiveRecord/NestedAttributes/ClassMethods/accepts_nested_attributes_for):)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:22:20.083

很难说出你想用你的模型实现什么，但我认为你想要以下内容：

您的 GoodsIn 需要具有 accept_nested_attributes_for :items 的关系。belongs_to 和accepts_nested_attributes_for 是关闭的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:30:07.337

I think there's an error in your Goods model.

It should read `has_many :items` instead of `has_many :item`.

# php - 使用 jQuery AJAX 对用户进行身份验证不起作用

> ID：11755248
> 
> 赞同：-2
> 
> 时间：2012-08-01T08:17:54.400
> 
> 标签：php, javascript, ajax, jquery

我正在尝试使用用 jQuery 包装的 AJAX 来调用查询 MySQL 数据库的 PHP 脚本来验证用户身份。我对这些技术中的*任何*一种都不熟悉，但我（有点）设法让它们单独工作，但我无法让 jQuery、AJAX 和 HTML 正常工作。

**[编辑：]**我听从了[Trinh Hoang Nhu 的](https://stackoverflow.com/users/533738/trinh-hoang-nhu) [建议](https://stackoverflow.com/questions/11755248/authenicating-user-using-jquery-ajax-not-working#comment-15607048)并添加了一条`return false;`声明以禁用提交按钮。修复了所有以前的错误，我无法正确获取 AJAX 返回的对象。

## HTML

这是我使用的 HTML 片段：

```
<form id="form" method='post'>
    <label>Username:</label>
    <input id="user" name="user" type="text" maxlength="30" required /> <br />
    <label>Password:</label>
    <input id="pass" name="pass" type="password" maxlength="30" required /> <br />
    <input id="url" name="url" type="text" value="<?php echo $_GET['url'] ?>" hidden />
    <input name="submit" type="submit" value="I'm done">
  </form> 
```

## jQuery/AJAX

这是我使用 AJAX 对用户进行身份验证的 jquery 代码（如果缩进因制表符而混乱，请见谅）：

```
function changeMessage(message) {
    document.getElementById("message").innerHTML = message; }

$(document).ready(function() {
    $("#form").submit(function() {
        changeMessage("Checking");
        //check the username exists or not from ajax
        $.post("/stufftothink/php/AJAX/login.php",
                    {user: $("#user").val(), pass: $("#pass").val(), url: $("#url") },
                    function(result) {
                        //if failed
                        if (result === 'false') {
                            changeMessage("Invalid username or password. Check for typos and try again");
                            $("#pass").val(""); }
                        //if authenticated
                        else {
                            changeMessage("Authenticated");
                            window.location.href = result; } 
                    } );
        //to disable the submit button
        return false;
    }   );
} ) 
```

## PHP

这是我的 PHP 脚本，它被调用：

```
<?php 
ob_start();
session_start();

$user = $_POST['user'];
$pass = md5($_POST['pass']);

mysql_connect('localhost', 'root', '');
mysql_select_db('stufftothink');

$query = "select * from users where user = '$user' and pass = '$pass'";
$result = mysql_query($query);

$i = 0;
while ($row = mysql_fetch_array($result)) {
  $i = 1; }

if ($i == 1) {
  $_SESSION['user'] = $user; 
    $invalid_urls = array('register.php', 'login.php');
    $url = $_REQUEST['url']; //not sure whether _GET or _POST
    if (in_array($url, $invalid_urls)) {
        echo '/stufftothink/profile.php'; }
    else {
    echo '/stufftothink/'.$url; }
    }

else {
  echo 'false'; }

mysql_close();
?> 
```

## 编辑

我在这个问题上得到了很多反对意见。我不小心提交了没有填写解释的问题。我回去编辑它，但是当我回来时，已经有4个downvotes了。才刚过几分钟。我做错了什么，还是前 5 分钟有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:34:56.693

首先，如果你想使用 ajax 提交表单，你必须`return false`从你的提交函数中。否则，您的浏览器将处理它并将您重定向到另一个页面。

如果要从 PHP 返回一个对象，必须使用 将其转换为 json `json_encode`，例如：

```
//PHP
$return = array("url" => "http://www.google.com");
echo json_encode($return);
//would echo something like {"url":"http://www.google.com"}

//JS
$.post(url, data, function(data){
  alert(data.url);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:25:28.583

你没有结尾`;`的函数。

应该：

```
function changeMessage(message) {
    document.getElementById("message").innerHTML = message; 
};

$(document).ready(function() {
    $("#form").submit(function() {
        changeMessage("Checking");
        //check the username exists or not from ajax
        $.post("/stufftothink/php/AJAX/login.php",
               {user: $("#user").val(), pass:$("#pass").val() },
               function(result) {
              //if failed
              if (result === 'false') {
                        changeMessage("Invalid username or password. Check for typos and try again");
                    $("#pass").val("");
              }
              //if authenticated
              else {
                                changeMessage("Authenticatred");
                window.location.href = "/stufftothink/" +  result; 
              } 
       });
   });
}); 
```

不知道这是否会解决它，但这是唯一让我感到震惊的事情。

# java - 创建一个连接器来开火

> ID：11755249
> 
> 赞同：0
> 
> 时间：2012-08-01T08:17:55.147
> 
> 标签：java, xmpp, chat, openfire

我需要在移动用户和桌面应用程序之间实现聊天应用程序，但我不会在移动设备和开火之间使用 xmpp 协议，这是另一种更安全的技术，所以我想开发一个开火连接器，它是移动设备之间的中间体并开火服务器

请告诉我是否可以这样做，如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:20:25.253

您需要创建自己的连接器才能在您的服务器和 XMPP 服务器之间进行中继。[http://code.google.com/p/xmppjca/](http://code.google.com/p/xmppjca/)

# guid - 使用 GUID 作为上传图像的文件名的任何缺点

> ID：11755250
> 
> 赞同：4
> 
> 时间：2012-08-01T08:18:03.917
> 
> 标签：guid, image-uploading

使用 GUID 作为 นด 上传图像的文件名以避免重复有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:27:28.570

您的文件名将是唯一的，真实的。但是没有任何方法可以按任何顺序对它们进行排序。

您可以在 GUID 前面使用[**Unix 时间戳**](http://en.wikipedia.org/wiki/Unix_time)来帮助按名称排序和执行其他此类操作，而无需在数据库中使用查找表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:32:43.083

如果您使用基于文件内容的哈希（例如 SHA1）的名称存储上传的文件，那么您也可以*只*存储具有相同内容的文件一次（节省空间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:24:06.990

我认为它足够独特，但考虑使用使用日期和时间以及一些序列号的自己的生成器，我认为名称会更具表现力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-31T19:14:42.320

在文件名中使用 GUID 有一个缺点。CLSID 是 GUID，一些病毒扫描程序会认为您正在尝试使用此漏洞，并将您的文件标记为潜在恶意软件。

有关详细信息，请参阅[Microsoft Windows CLSID 隐藏文件扩展名漏洞](https://tools.cisco.com/security/center/viewAlert.x?alertId=2104)。

# mod-rewrite - 简单的mod重写问题

> ID：11755254
> 
> 赞同：1
> 
> 时间：2012-08-01T08:18:05.510
> 
> 标签：mod-rewrite

我正在尝试使用 mod-rewrite 完成简单的任务

我需要这样的网址

**http://localhost/docs/path/to/a/file/somefile_without_extension?d=file.txt**

变得可下载，因此用户将下载一个名为 file.txt 的文件作为附件我使用类似的东西试图使其工作但它没有。请注意

> somefile_without_extension

例如是普通图像

```
RewriteEngine On

RewriteRule ^/ ?d={d} 

Header  set Content-disposition  "attachment; filename=%{d}e" env=d 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:27:30.040

Try this:

```
 RewriteCond %{QUERY_STRING} ^(.*)[\&|\?]*d=([\w|\d|\.|\%|]*)[\&]*(.*)$
 RewriteRule   .*  - [E=FILENAME:%2]

 Header set "Content-disposition" "attachment; filename=%{FILENAME}e" env=FILENAME
 UnsetEnv FILENAME 
```

# android - 如何创建 Json 对象

> ID：11755255
> 
> 赞同：4
> 
> 时间：2012-08-01T08:18:07.250
> 
> 标签：android, json

我有类似的数据库，它有三个列（id（整数），开始日期（文本），结束日期（文本），）。我想阅读这些列的所有条目，将它们转换为 Json 并发送到 web url。我知道如何读取值，但不知道如何从这些值中生成 Json。请任何编码帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:20:57.193

以下是创建 JSON 对象的方法：

```
JSONObject jsonObject = new JSONObject();
jsonObject.put("id", idValue);
jsonObject.put("startDate", endDateValue);
jsonObject.put("endDate", endDateValue); 
```

您还可以通过执行以下操作将 JSON 作为字符串获取：

```
jsonObject.toString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T08:29:05.360

你为什么不试试：
`

```
JSONObject object = new JSONObject();
    try {
        object.put("id", id);
        object.put("startDate", startDate);
        object.put("endDate", endDate);
    } catch (JSONException e) {
        e.printStackTrace();
    }` 
```

然后通过http post发送json对象
`

```
HttpClient hc = new DefaultHttpClient();
        String message;

        HttpPost p = new HttpPost(url);    
 try {
        message = object.toString();

        p.setEntity(new StringEntity(message, "UTF8"));
        p.setHeader("Content-type", "application/json");
            HttpResponse resp = hc.execute(p);
            if (resp != null) {
                if (resp.getStatusLine().getStatusCode() == 204)
                    result = true;
            }

            Log.d("Status line", "" + resp.getStatusLine().getStatusCode());
        } catch (Exception e) {
            e.printStackTrace();

        }` 
```

因此，例如，如果您想创建一个 JSON 对象，其中包含您从 SQLite db 获得的所有三元组，它将是：

```
String query = "SELECT *"+
             "from "+TABLE_NAME;

    Cursor c = db.rawQuery(query,new String[]{});
    Log.d("query",query);

    c.moveToFirst();
    while(c.moveToNext()){
        try {
            int id = c.getInt(c.getColumnIndex("ID"));
            String startDate = c.getString(c.getColumnIndex("START_DATE"));
            String endDate = c.getString(c.getColumnIndex("END_DATE"));

   object.put("id", id);
    object.put("startDate", startDate);
    object.put("endDate", endDate); }} 
```

其中 ID、START_DATE 和 END_DATE 是 DB 中字段的对应名称。
我现在无法测试我的代码，但我相信它可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:24:24.557

```
 JSONObject json = new JSONObject();
    json.put("id", id);
    json.put("startdate", startdate);
    json.put("enddate", enddate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:41:49.763

使用**jackson**库，您可以将 map 或 java bean 转换为 json 字符串或从 json 字符串生成 map 或 javabean。你可以写一个 util 类：

```
 public class JsonUtil {
    private static final ObjectMapper MAPPER = new ObjectMapper();

    public static String convertToJsonStr(Object model) throws IOException {
        return MAPPER.writeValueAsString(model);
    }

    @SuppressWarnings("unchecked")
    public static Map<String, Object> readFromStr(String content) throws IOException {
        return readFromStr(content, Map.class);
    }

    public static <T> T readFromStr(String content, Class<T> clazz) throws IOException {
        return MAPPER.readValue(content, clazz);
    }
} 
```

# windows - DirectSound 和 WinMM 是基于 WASAPI 的吗？

> ID：11755261
> 
> 赞同：2
> 
> 时间：2012-08-01T08:18:52.653
> 
> 标签：windows, directsound, winmm, wasapi

我在这张[幻灯片](http://www.csc.kth.se/utbildning/kth/kurser/DT2410/_notes/audio_f_software_arch.pdf)中看到 vista 中的 winmm 和 directsound 基于 wasapi。

这是否意味着 winmm 和 directsound 实际上是通过调用 WASAPI 中的函数来完成它们的工作的？

经过一些谷歌搜索后，我无法找到此信息，希望这里有人知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T16:13:49.250

With a couple of highly specialized exceptions (directks, ASIO, openal), all audio rendering in Windows goes through WASAPI.

This includes audio rendering via winmm and directsound.

# python - 抓取网站

> ID：11755273
> 
> 赞同：1
> 
> 时间：2012-08-01T08:19:56.600
> 
> 标签：python, concurrency, web-scraping

我一直在尝试从网站访问一些数据。为此，我一直在使用 Python 的 mechanize 和 beautifulsoup4 包。但是由于我必须解析的页面数量大约为 100,000 甚至更多，因此使用单个线程单独执行它是没有意义的。我尝试了 python 的 EventLet 包以具有一些并发性，但它没有产生任何改进。谁能建议我可以做的其他事情，或者应该做些什么来加快数据采集过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:28:51.053

我将引用我自己对[这个问题](https://stackoverflow.com/a/11638484/388916)的回答，因为它也非常适合这里：

* * *

对于您的特定任务，我会推荐一个[multiprocessing worker pool](http://docs.python.org/library/multiprocessing.html#module-multiprocessing.pool)。您只需定义一个池并告诉它您想要使用多少个进程（默认情况下每个处理器核心一个）以及您想要在每个工作单元上运行的功能。然后，您准备好列表中的每个*工作单元*（在您的情况下，这将是一个 URL 列表）并将其提供给工作池。

您的输出将是原始数组中每个工作项的工作函数的返回值列表。所有很酷的多处理优点都将在后台发生。当然还有其他使用工作池的方法，但这是我最喜欢的一种。

快乐的多处理！

# xml - Xslt 选择条件，如何生成 2ndLevelNavigation？

> ID：11755289
> 
> 赞同：1
> 
> 时间：2012-08-01T08:21:03.803
> 
> 标签：xml, xslt, umbraco

我在 Umbraco 有一个内容树，其中有 3 个主页面及其子页面。我还有 5 个其他页面是 Homepage 的子页面，它们设置了 2 个选项：umbIsChildOfHomePage = 1 和 umbracoNaviHide = 1 看看结构： ![在此处输入图像描述](../Images/6961b87990cd7f3c32fdec1ad487260f.png)

现在：我想为每个页面生成一个 umb2ndLevelNavigation。

我的 xslt 文件中有这个

```
<xsl:variable name="items" select="$currentPage/ancestor-or-self::* [@isDoc and @level = 2]/* [@isDoc and string(umbracoNaviHide) != '1']"/>
    <xsl:if test="count($items) &gt; 0">
        <ul>
            <xsl:for-each select="$items">
                <li>
                    <xsl:if test="position() = last()">
                        <xsl:attribute name="class">last</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="position() = 1">
                        <xsl:attribute name="class">first</xsl:attribute>
                    </xsl:if>
                    <a href="{umbraco.library:NiceUrl(@id)}">
                        <xsl:value-of select="@nodeName"/>
                    </a>
                </li>
            </xsl:for-each>
        </ul>
    </xsl:if> 
```

这仅适用于主页以外的页面。所以需要额外个性化 xslt 选择。我怎么做？这是我尝试过的。我将它附加到模板中，因为我不知道如何在其他选择中附加条件。

```
<xsl:variable name="itemsHomepage" select="$currentPage/ancestor-or-self::* [@isDoc and @level = 1]/* [@isDoc and string(umbracoNaviHide) = '1' and string(umbIsChildOfHomePage) = 1]"/>
    <xsl:if test="count($itemsHomepage) &gt; 0">
        <ul>
            <!--<xsl:attribute name="class">
               a<xsl:value-of select="$currentPage/parent::*[@isDoc]/@id [string(umbIsChildOfHomePage) = 1 ]" />
            </xsl:attribute>-->
            <xsl:for-each select="$itemsHomepage">
                <li>
                    <xsl:if test="position() = last()">
                        <xsl:attribute name="class">last</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="position() = 1">
                        <xsl:attribute name="class">first</xsl:attribute>
                    </xsl:if>
                    <xsl:choose>
                        <xsl:when test="name() = 'Link'">
                            <a href="{current()/linkUrl}" target="_blank">
                                <xsl:value-of select="@nodeName" />
                            </a>

                        </xsl:when>
                        <xsl:otherwise>
                            <a href="{umbraco.library:NiceUrl(@id)}">
                                <xsl:value-of select="@nodeName" />
                            </a>
                        </xsl:otherwise>
                    </xsl:choose>
                </li>
            </xsl:for-each>
            <!--<li>
                s:<xsl:value-of select="$currentPage/@id" />
                <xsl:value-of select="$RootNode/@nodeName"/>-<xsl:value-of select="$RootNode/@id"/>
            </li>-->
        </ul>
    </xsl:if> 
```

问题是，即使我转到没有子项的页面，即使对于没有子项的页面，也会显示主页。如何个性化选择以仅在将这两个参数（showNavi 和 isHomePageChild）设置为 true 的页面时显示？谢谢你的帮助。希望你理解这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:27:22.487

初始代码的目标是从上到下到“2”级的节点——这听起来对你想要的来说是正确的，你只需要让它渲染出来

这里有一个[很好的例子来](http://our.umbraco.org/forum/developers/xslt/10946-creating-multi-level-navigation-in-45-schema)说明你正在尝试做什么。

剥离该解决方案（$level 设置为 2）提醒我为什么我不会再心甘情愿地靠近 xslt！：

```
<xsl:for-each select="$currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']">
<xsl:if test="$currentPage/@id = current()/@id or $currentPage/../@id = current()/@id or $currentPage/../../@id = current()/@id">

...

<ul>
<!-- 1st navigation items -->
<xsl:for-each select="./child::* [@isDoc and string(umbracoNaviHide) != '1']">
<xsl:if test="$currentPage/ancestor-or-self::node/@id = current()/@id"></xsl:if>
<li> .... </li>

<!--output 2nd level nevigation items -->
<xsl:if test="count(current()/child::* [@isDoc]) &gt; 0 and $currentPage/@id = current()/@id or $currentPage/../@id = current()/@id or $currentPage/../../@id = 
current()/@id">

<ul>
<!--output 3rd level nevigation items -->
<xsl:for-each select="./child::* [@isDoc and string(umbracoNaviHide) != '1']">
<xsl:if test="$currentPage/ancestor-or-self::node/@id = current()/@id"></xsl:if>
<li> ... </li> 
```

等等...

# vim - vim：将文本推送到与另一行相同的 x 坐标的命令

> ID：11755290
> 
> 赞同：0
> 
> 时间：2012-08-01T08:21:04.303
> 
> 标签：vim

我不确定用正确的词来表达我想要什么，这就是为什么我自己可能很难找到它。我有一个类似css的文件：

```
attr_of_super_long_length: value1,
shorter_attr: value2,
medium_length_attr: value3 
```

我希望能够将光标放在 value1 中的v 上*并**复制*其 x 坐标，然后转到*value2中的**v*并在1 次击键中将其推送到相同的缩进 x 坐标（*例如，不突出显示和 > <*）。有任何想法吗？谢谢！

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:11:03.937

有一些很棒的对齐插件，比如[Align](https://github.com/vim-scripts/Align)和[tabular](https://github.com/godlygeek/tabular)。我使用了一段时间的 Align，但我已经转向表格，因为我喜欢[这个](http://vimcasts.org/episodes/aligning-text-with-tabular-vim/) 用于制作表格的[功能。](http://connermcd.com/blog/2012/05/20/pandoc-table-editing-in-vim/)在表格中，您可以通过直观地选择这些值然后`:Tab /:\zs`使用标准 vim 正则表达式执行命令来完成此操作（请参阅 参考资料`:help pattern`）。正如 Tom Whittock 提到的，这个问题已经在这里提出并解决[了](https://stackoverflow.com/questions/2129519)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:44:32.573

您基本上想要左对齐到特定列，但不是整行（就像这样`:left`做），而只是光标右侧的文本。

幸运的是，我为此编写了一个插件，并立即发布了它：[AlignFromCursor](http://www.vim.org/scripts/script.php?script_id=4155)

在您的示例中，将光标放在`v`of上，按或发出，它会导致：`value2``28<Leader>le``:LeftAlignFromCursor 28`

```
attr_of_super_long_length: value1,
shorter_attr:              value2,
medium_length_attr: value3 
```

对于`value3`，您可以简单地重复`.`***

# python - 使用 tilestache/modestmaps 将 wgs84 中的 lon/lat 重新投影到目标投影？

> ID：11755291
> 
> 赞同：2
> 
> 时间：2012-08-01T08:21:07.990
> 
> 标签：python, tilestache

tilestache 的文档有点稀疏。有没有办法将 wgs84 中的点（经度/纬度）转换为目标投影？

在哪里：

```
target_srid = 3095
target_proj4_str = '+proj=utm +zone=54 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs' 
```

我注意到 ModestMaps 中有一个转换对象：

```
ModestMaps.Geo.Transform() 
```

但我不清楚如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:45:52.740

你最好的选择是“Goodies”下的 Proj4Projection 类：

[http://tilestache.org/doc/TileStache.Goodies.Proj4Projection.html](http://tilestache.org/doc/TileStache.Goodies.Proj4Projection.html)

我目前只在 TileStache 的核心中包含 WGS84 和 Spherical Mercator，但上面提供的模块应该对您有所帮助。请注意，除了投影之外，您还需要计算一个转换，这在 Per Liedman 的出色指南中进行了解释：[http ://blog.kartena.se/local-projections-in-a-world-of-spherical-mercator /](http://blog.kartena.se/local-projections-in-a-world-of-spherical-mercator/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T06:51:39.047

Proj4Projection 有一个依赖项 (pyproj)。我不确定您具体要做什么，但是如果您试图使数据与 TileStache 的预期兼容，我只会`ST_Transform`在实际 SQL 查询中使用将 PostGIS 项目设置为 4326。这不是最干净的方法来做到这一点，但它至少会防止数据冗余。

另见：http: [//vis4.net/blog/posts/no-more-mercator-tiles/](http://vis4.net/blog/posts/no-more-mercator-tiles/)

# thrift - 如何在 Thrift IDL 中使用 java 内置异常

> ID：11755292
> 
> 赞同：0
> 
> 时间：2012-08-01T08:21:15.037
> 
> 标签：thrift, thrift-protocol

我想在 Thrift IDL 中抛出一些 java 内置异常，例如 IOException。

像这样：

服务 B{
     void removeLease() throws (1:ioexception e),
}

但是，Thrift 编译器警告说没有定义 ioexception。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:36:28.967

每个 java 异常都是可序列化的，因此可以将其包装到 thrift 异常中。

节俭代码：

```
exception SerializedException
{
    1: required binary payload
}

service MyService
{
    int method(1: required string param) throws (1: SerializedException serializedException);
} 
```

Java服务器代码：

```
class MyServiceImpl implements MyService.Iface {
    int method(String param) throws SerializedException {
        try {
            ...
        } catch (IOException ex) {
            ByteArrayOutputStream os = new ByteArrayOutputStream();
            new ObjectOutputStream(os).writeObject(ex);
            throw new SerializedException(os.toByteArray());
        }
    }
} 
```

Java客户端代码：

```
try {
    int r = myService.method("param");
} catch (SerializedException ex) {
    Exception nested = <Deserialize ex.payload via ByteArrayInputStream>
    ...
} 
```

因此，客户端与堆栈跟踪等一起获得完全异常。我们使用这种方法是几个项目，它肯定有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:45:11.177

Thrift IDL 与语言无关。您不能使用内置异常（如本例中的 IOException）您可以定义和使用自己的“ioexception”

```
exception ioexception
{
 1:string msg,
} 
```

# html - HTML5，那是什么？

> ID：11755293
> 
> 赞同：1
> 
> 时间：2012-08-01T08:21:18.330
> 
> 标签：html

我在 HTML、CSS、JavaScript、Jquery 等方面拥有丰富的经验，但我还没有涉足 HTML5。

在尝试了解 HTML5 时，我变得有点困惑。所以这是一个相对较新的标准，我不知情的大脑告诉我它没有得到很好的支持。这是真的？

我有一个模糊的想法，即有一些 3rd 方脚本可以提高 HTML5 兼容性，我说得对吗？

对于经验丰富的开发人员，有什么好的教程可以帮助您掌握 HTML5 的基础知识吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:34:17.503

好的，那里有很多问题，但是：

1.  如今，大多数现代浏览器都很好地支持 HTML5，并且按原样使用通常足够安全。
2.  提高兼容性的脚本？您的意思是 Javascript 可以检测您的浏览器的年龄，并根据答案显示您是 HTML 4.01 还是 5？好吧，也许但又一次，它已经不再需要了。
3.  是的：[w3schools](http://www.w3schools.com/html5/default.asp)有一个很酷的。

所有这些都表明 HTML 5 仍处于开发阶段，尚未完成。一些领域仍在实施中，但速度很快，这对于开始使用 HTML 5 开发页面来说不是问题。

[这个网站 - html5 医生](http://html5doctor.com/)是一个非常有用的资源，您可以浏览它来查找在哪里实现了什么以及事情的一般进展情况。

我还发现此[链接](http://www.findmebyip.com/litmus/#html5-web-applications)在确定每个浏览器可用的内容和不可用的内容时特别有用。

另一个与 HTML5 相得益彰的主题是 CSS3。把它们都检查出来，也许会带着具体问题回来；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:35:35.413

HTML 5 支持尚未完全集成到所有浏览器中。它们仍处于开发阶段。学习 HTML 5 最好的媒介是[w3schools](http://www.w3schools.com/html/html5_intro.asp)

他们在 HTML5 中引入了新元素，从而减少了我们对 html 的开销。[新元素](http://www.w3schools.com/html/html5_new_elements.asp)

[代码播放器](http://thecodeplayer.com/)

[HTML 5 的视频](http://www.web3mantra.com/2011/06/24/20-html5-video-tutorials/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:38:36.090

HTML5 流行语被大量使用，但人们大多用它来描述不同的事物。

HTML5 是由 W3.org 提出的 HTML 标准的最新（迄今为止尚未完成）迭代。

纯粹的HTML5是标记语言，但通常被称为包括CSS3、JS（以canvas元素的形式）。

在 HTML 领域，HTML5 拥有一些新的元素标签，可以帮助开发人员为他们的标记添加语义含义（例如[header](http://www.w3.org/wiki/HTML/Elements/header)、[footer](http://www.w3.org/wiki/HTML/Elements/footer)、[aside](http://www.w3.org/wiki/HTML/Elements/aside)），以及一些有用的功能元素（[progress-bar](http://www.w3.org/wiki/HTML/Elements/progress)、[video](http://www.w3.org/wiki/HTML/Elements/video)、[audio](http://www.w3.org/wiki/HTML/Elements/audio)）

在 CSS 区域中，有一些新属性可让您为元素设置动画，并更轻松地调整它们的方向。

在 JS 区，你可以阅读 Canvas 元素，它是 Flash 的一个很好的竞争对手。它允许您使用矢量和位图数据进行绘制。

至于对 HTML5 的良好参考，您可以使用[http://html5doctor.com/](http://html5doctor.com/)或[http://www.html5rocks.com/en/](http://www.html5rocks.com/en/)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T15:14:28.440

请注意，w3schools 不再是一个很好的参考。虽然只是看看可能性，我想这很好。

我推荐[Lynda的](http://www.lynda.com/HTML-tutorials/HTML5-for-Flash-Developers/97148-2.html)**教程**，但还有其他网站。只需在谷歌搜索。也可以买一本书，因为已经写过几本了。

**Fallback/polyfill**脚本和库，如[Modernizr](http://modernizr.com/)、[Javascript 库](http://www.useragentman.com/blog/2012/05/17/cross-browser-styling-of-html5-forms-even-in-older-browsers/ "Javascript 库")可以帮助您处理旧浏览器。（向后兼容）

至于**浏览器**。使用chrome，它支持大部分功能。查看[findmebyip 之](http://www.findmebyip.com/litmus/#target-selector#nav-access)类的网站，了解有关受支持内容的更多信息。

# c# - 在 InputBox 中创建标签点击

> ID：11755296
> 
> 赞同：0
> 
> 时间：2012-08-01T08:21:30.843
> 
> 标签：c#, click, label, inputbox

我有一个功能，`private void sentEmail()`在`Form1`. 我想将该函数用于 InputBox 中的标签。

我使用的 InputBox 是这样的：[http ://www.csharp-examples.net/inputbox/](http://www.csharp-examples.net/inputbox/)

我创建了一个新类并添加了 InputBox 的代码。

在 InputBox 我创建标签：

```
Label label2 = new Label();
label2.Text = mesaj;
label2.Cursor = Cursors.Hand; 
```

现在我需要这样做：当 InputBox 出现时，当我点击 时`label2`，使用来自 的函数`Form1`。这`label2`是用于接收密码的文本，功能工作，但我需要在 InputBox 中使用该功能，但我不知道该怎么做。我认为我需要创建一个新的**Handler**，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:25:30.143

`Label`有一个[Click](http://msdn.microsoft.com/en-US/library/system.windows.forms.control.click%28v=vs.80%29)事件。

```
label2.Click += delegate {
    form1.sendEmail();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:41:35.703

`InputBox`将方法更改为

```
public static DialogResult InputBox(string title, string promptText, ref string value, Action labelClickCallback) 
```

并将该回调添加到 Click 事件。

```
Label label2 = new Label();
label2.Text = mesaj;
label2.Cursor = Cursors.Hand;
label2.Click += (s, e) => labelClickCallback(); // Create a new event handler 
```

调用`InputBox`方法时，您现在可以将方法传递给当用户单击标签时将调用的方法。像这样调用`InputBox`：

```
InputBox("Title", "Text", ref result, sentEmail); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:42:31.410

我建议您`SendMail()`在其他类中使用该方法，而不是在 中`Form1`，您可能想在其他地方使用它。

```
public class MailController
{
    public void SendEmail()
    {
        //Code
    }
} 
```

在您的表单中，您只需在实例化包含它的类后调用它

```
//Your form containing the InputBox
private void Form1_Load(object sender, EventArgs e)
{
    Label label2 = new Label();
    label2.Text = mesaj;
    label2.Cursor = Cursors.Hand;

    label2.Click += OnLabelClick;
}

private void OnLabelClick(object sender, EventArgs e)
{
    MailController controller = new MailController();
    controller.SendMail();
} 
```

# eclipse - 在Eclipse中安装EGit时出错：收集要安装的项目时出错

> ID：11755297
> 
> 赞同：1
> 
> 时间：2012-08-01T08:21:32.263
> 
> 标签：eclipse, egit

Eclipse：Indigo 服务版本 1

操作系统：Windows 7

当我尝试从以下更新站点[http://download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)安装 EGit 时，我收到此错误，到目前为止我找不到任何解决方案。

```
 An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity,1.2.5.v201206130431
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.design,3.3.5.v201204241156
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.design.ui,3.2.7.v201205221153
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.flatfile,3.1.2.v201206121559
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.flatfile.ui,3.1.3.v201203221637
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.profile,3.2.7.v201203291105
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.sqm.core,1.2.5.v201205240353
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.sqm.core.ui,1.2.2.v201205240353
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.sqm.server.ui,1.1.100.v201202021103
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.ui,1.2.3.v201205240353
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.ibm.db2.iseries.ui,1.0.2.v201202100836
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.ibm.db2.luw.ui,1.0.3.v201202100836
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.ibm.db2.zseries.ui,1.0.2.v201202100836
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.ibm.informix.ui,1.0.3.v201202100836
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.msft.sqlserver.dbdefinition,1.0.1.v201201240505
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.mysql,1.0.3.v201205252211
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.oda.ws,1.2.4.v201203221631
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.oda.ws.ui,1.2.4.v201203221631
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.oracle.dbdefinition,1.0.103.v201206010214
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.postgresql,1.1.1.v201205252207
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.sqlite.dbdefinition,1.0.2.v201206010441
No repository found containing: osgi.bundle,org.eclipse.datatools.modelbase.sql.query,1.1.3.v201206060918
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.editor.core,1.0.2.v201205310904
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.parsers.sql.query,1.2.1.v201201250511
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.result,1.1.3.v201205310911
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.sql.ui,1.0.1.v201201270735
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.sqlscrapbook,1.0.2.v201205310922
No repository found containing: osgi.bundle,org.eclipse.emf,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ant,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.codegen,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ecore,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ecore.ui,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ui,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.common,2.8.0.v20120606-0717
No repository found containing: osgi.bundle,org.eclipse.emf.common.ui,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.converter,2.5.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.databinding,1.2.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.databinding.edit,1.2.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ecore,2.8.0.v20120606-0717
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.change,2.8.0.v20120606-0717
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.change.edit,2.5.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.edit,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.editor,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.xmi,2.8.0.v20120606-0717
No repository found containing: osgi.bundle,org.eclipse.emf.edit,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.edit.ui,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.exporter,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.importer,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.importer.ecore,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.importer.java,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.importer.rose,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore.editor,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore2ecore,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore2ecore.editor,2.5.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore2xml,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore2xml.ui,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ui,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.equinox.concurrent,1.0.300.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.jst.common.project.facet.core,1.4.201.v201108161900
No repository found containing: osgi.bundle,org.eclipse.jst.server.core,1.2.302.v20120503_1042
No repository found containing: osgi.bundle,org.eclipse.wst.common.project.facet.core,1.4.300.v201111030424
No repository found containing: osgi.bundle,org.eclipse.wst.common.project.facet.ui,1.4.300.v201111030424
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.connectivity.feature,1.10.0.v201201161512-7C7h90Et1axo7RlVkOfDNlAf45E
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.connectivity.oda.designer.core.feature,1.10.0.v201201161512-7B7C7LCcNBGTBfLREXcc
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.connectivity.oda.designer.feature,1.10.0.v201201161512-4127w312312232267
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.connectivity.oda.feature,1.10.0.v201201161512-7H7C7QCcNBHLCcJaFWRa
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.apache.derby.feature,1.10.0.v201201161512-77798fBmKDQ2MoTTLwdv9ILX
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.feature,1.10.0.v201201161512-7J9Q0BWxeMcYB5KWfz-eG7qiq-sX
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.hsqldb.feature,1.10.0.v201201161512-67E0AqGBM7KfNTHwKO9ILX
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.ibm.feature,1.10.0.v201201161512-7F47WFC7sRdqScnobkd4
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.ingres.feature,1.10.0.v201201161512-540AkF78Z7UCRAQDB
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.jdbc.feature,1.10.0.v201201161512-4-29oB5885QBB8HKW
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.jdt.feature,1.10.0.v201201161512-2-07w312218332612
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.msft.feature,1.10.0.v201201161512-544AkF7AL7MDMAQ8O
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.mysql.feature,1.10.0.v201201161512-5477AkF7AK7_AMENEA
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.oda.designer.feature,1.10.0.v201201161512-3368s7356485C59AB
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.oda.feature,1.10.0.v201201161512-7A7T7CDZRDKHF_HnGjOX
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.oracle.feature,1.10.0.v201201161512-548fAkF7AL7RBJANAI
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.postgresql.feature,1.10.0.v201201161512-553AkF7AK8PCRBQBP
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.sap.feature,1.10.0.v201201161512-540AkF7AJ7YEJBU7S
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.sqlite.feature,1.10.0.v201201161512-542AkF7AJ7SAKAPBF
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.enablement.sybase.feature,1.10.0.v201201161512-7E46F9NiNc1QBgyT6T6
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.modelbase.feature,1.10.0.v201201161512-7707DCcNBHJDWIYG_Ni
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.sqldevtools.data.feature,1.10.0.v201201161512-644BgJ9ECCLFTAfMO
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.sqldevtools.ddl.feature,1.10.0.v201201161512-279-78B089G8S_IRTJrXkO2_s
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.sqldevtools.ddlgen.feature,1.10.0.v201201161512-7A-78F7RZHQSIqWjN1Zr
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.sqldevtools.feature,1.10.0.v201201161512-7N8B7CFDsn4hwBXz-0AGu5i6V36H
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.sqldevtools.parsers.feature,1.10.0.v201201161512-623BgJ9EE9ZJRDZLA
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.sqldevtools.results.feature,1.10.0.v201201161512-57B78AkF7BD7QFE9VEG
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.sqldevtools.schemaobjecteditor.feature,1.10.0.v201201161512-4208375LG5BJ93413
No repository found containing: org.eclipse.update.feature,org.eclipse.datatools.sqldevtools.sqlbuilder.feature,1.10.0.v201201161512-79-78EVVFNOGnTeK-SY
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.codegen.ecore,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.codegen.ecore.ui,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.codegen,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.codegen.ui,2.7.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.common,2.8.0.v20120606-0717
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.common.ui,2.7.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.converter,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.databinding.edit,1.2.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.databinding,1.2.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.ecore.edit,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.ecore.editor,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.ecore,2.8.0.v20120606-0717
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.edit,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.edit.ui,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf,2.8.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.mapping.ecore.editor,2.7.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.mapping.ecore,2.7.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.mapping,2.7.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.emf.mapping.ui,2.7.0.v20120608-0554
No repository found containing: org.eclipse.update.feature,org.eclipse.jst.common.fproj.enablement.jdt,3.4.0.v201108231500-377DG8s73543J5H6D66
No repository found containing: org.eclipse.update.feature,org.eclipse.jst.server_core.feature,3.4.0.v20120503_1042-31FEe8s73554A4Fa2153
No repository found containing: org.eclipse.update.feature,org.eclipse.jst.server_ui.feature,3.4.0.v20120503_1042-7A77FHr9xFcC2CFLZBCJMHLg7D64
No repository found containing: org.eclipse.update.feature,org.eclipse.wst.common.fproj,3.4.0.v201202292300-377F8N8s735555393B7B 
```

# python - 无法复制列表

> ID：11755301
> 
> 赞同：0
> 
> 时间：2012-08-01T08:21:45.440
> 
> 标签：python, type-conversion, sniffing, scapy

我正在使用 Scapy 的 sniff() 函数从以太网中嗅探数据包。我将它存储在一个名为 pkt 的变量中。稍后我想通过将 pkt 的内容附加到另一个变量 buffpkt 中来制作相同的副本。最初我将这两个变量都声明为列表，但是一旦 pkt 存储了 sniff() 输出，它就会将其类​​型更改为实例。下面是代码。

```
pkt=[]
buffpkt=[]
pkt=sniff(prn=lambda x:x.sprintf("{IP : %IP.src%  %IP.dst%\n\n} "),timeout=5,store=1)
buffpkt=pkt 
```

我想通过将结果附加到 buffpkt 来列出所有嗅探到的数据包，但我不能。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:25:25.270

通过将一个列表分配给另一个列表，您只需使第一个列表指向第二个列表。要复制列表，您可以使用切片运算符，如下所示：

```
buffpkt = pkt[:] 
```

现在`buffpkt`将是一个副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:27:23.780

使用标准库`copy`在 Python 中复制数据结构：http: [//docs.python.org/library/copy.html](http://docs.python.org/library/copy.html)

# linux - 在 Makefile 规则中管道 stdout 和 stderr

> ID：11755312
> 
> 赞同：21
> 
> 时间：2012-08-01T08:22:35.113
> 
> 标签：linux, bash, shell, makefile, pipe

我想将脚本的输出通过管道传输到不同的程序。我通常会使用这两种形式做的事情：

```
 python test.py 2>&1 | pyrg
 python test.py |& pyrg 
```

我的问题是它在makefile中不起作用：

```
[Makefile]
test:
    python test.py 2>&1 | pyrg [doesn't work] 
```

我希望避免编写完成工作的脚本文件。

**编辑：**

这似乎是一个`pyrg`问题：

```
python test.py 2>&1 | tee test.out // Writes to the file both stderr and stdout
cat test.out | pyrg                // Works fine!
python test.py 2>&1 | pyrg         // pyrg behaves as if it got no input 
```

这对我来说是一个糟糕的解决方案，因为在测试失败的情况下我永远不会进入该`cat`部分（一切都在 Makefile 规则内）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-24T05:16:15.373

我偶然发现了同样的问题，并且对答案不满意。`TLBN`我有一个在测试用例上失败的二进制文件`example2.TLBN`。

这是我的 make 文件首先查看的内容。

```
make:
     ./TLBN example2.TLBN > ex2_output.txt 
```

失败并出现我期望的错误消息并停止制作过程。

这是我的修复：

```
make:
    -./TLBN example2.TLBN > ex2_output.txt 2>&1 
```

注意该`-`行的开头，它告诉 make 忽略任何到 stderr 的输出。

希望这可以帮助有类似问题的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T06:57:01.117

它没有解释为什么直截了当的方法不起作用，但它确实有效：

```
[Makefile]
test: 
    python test.py >test.out 2>&1; pyrg <test.out 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-24T14:35:38.400

奇怪的是，我遇到了同样的问题，并像这样解决了它：

```
check-errors:
    check-for-errors.sh &> errors.txt 
```

我不太确定为什么`2>&1 >errors.txt`不在这里工作，但`&>`确实

# javascript - compare two arrays if keys match with underscore.js

> ID：11755313
> 
> 赞同：7
> 
> 时间：2012-08-01T08:22:39.843
> 
> 标签：javascript, underscore.js

I have an array with permissions from Facebook and an array of the permissions that the user shouldve given:

```
window.FB.api('/me/permissions', function(perm){                     
    if(perm){
       var given_permissions =  _.keys(perm['data'][0];
       var needed_permissions = ["publish_stream", "email"];
       //now check if given permissions contains needed permissions
    }
} 
```

Now I want to compare if all the `needed_permissions` are in `given_permissions`, in an underscore savvy way (without looping two arrays myself and compare values). I saw a `_.include` method, but this compares an array with a value. I want to return true if all the permissions are available and else a false. I was looking for a nice single line call if possible.

The reason for this is, that `FB.login` returns true even if the user chooses to cancel the extended permissions. So I need to doublecheck this.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T08:38:38.160

You could use [`_.difference`](http://underscorejs.org/#difference) to see if removing the given permissions from your required permissions leaves anything behind:

```
var diff = _(needed_permissions).difference(given_permissions)
if(diff.length > 0)
    // Some permissions were not granted 
```

A nice side effect of this is that you get the missing permissions in `diff` in case you want to tell them what's wrong.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T08:28:12.493

How about this?

```
_.all(needed_permissions, function(v){
    return _.include(given_permissions, v);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T08:54:07.987

Late answer but this works for me: `_.isEqual(given_permissions, needed_permissions);`

# c# - 如何设置要在 UI 应用程序后面启动的应用程序。- C#winforms

> ID：11755315
> 
> 赞同：1
> 
> 时间：2012-08-01T08:22:47.913
> 
> 标签：c#, winforms

我正在开发一个 Windows 窗体 (.Net 2.0) 应用程序。在启动 UI 应用程序时，它会在内部启动另一个 .exe。我希望我的 UI 应用程序位于顶部，但现在另一个应用程序显示在顶部。

在启动另一个应用程序时，如何让 UI 应用程序保持在（另一个可执行文件）之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:22:15.967

您可以使用该`BringToFront()`方法。请看下面的链接

[C# 将 Windows 窗体置于最前面](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/bf3117f8-d83d-4b00-8e4f-7398b559a2dd/)

# mysql - 在前序遍历表的 ul li 标记中显示树结构不起作用

> ID：11755319
> 
> 赞同：4
> 
> 时间：2012-08-01T08:22:58.020
> 
> 标签：mysql, codeigniter

基于：[将修改后的前序树遍历模型（嵌套集）放入 <ul>](https://stackoverflow.com/questions/1310649/getting-a-modified-preorder-tree-traversal-model-nested-set-into-a-ul)

我有下表：

```
id  name                            lft rgt level
1   company                         1   22  0
75  Developer                       26  31  1
76  Tester                          24  27  1
77  Analyst                         22  23  1
78  under developer                 27  30  2
79  under tster                     25  26  2 
```

以及以下用于获取嵌套记录的查询/代码：

```
 function getstructureInformation() {
        $treeArr = array();
        $tree = array();
        $sql = "SELECT node.name, node.id, node.unit_id,
               node.description,node.lft,node.rgt,node.level, 
               (COUNT(parent.name) - 1) AS depth
               FROM tablename AS node
               CROSS JOIN tablename AS parent
               WHERE node.lft BETWEEN parent.lft AND parent.rgt
               GROUP BY node.name
               ORDER BY node.lft";

        $query = $this->db->query($sql);
        $data = $query->result();

        foreach ($data as $datap) {
            $treeArr['id'] = $datap->id;
            $treeArr['unit_id'] = $datap->unit_id;
            $treeArr['lft'] = $datap->lft;
            $treeArr['rgt'] = $datap->rgt;
            $treeArr['level'] = $datap->level;
            $treeArr['name'] = $datap->name;
            $treeArr['depth'] = $datap->depth;
            $treeArr['description'] = $datap->description;
            $tree[] = $treeArr;
        }
        return $tree;
    } 
```

这里是用于将其显示到视图页面中的 PHP 代码：

```
$result = '';
 $currDepth = -1;  // -1 to get the outer <ul>
 while (!empty($tree)) {
  $currNode = array_shift($tree);
  if ($currNode['depth'] > $currDepth) {
    echo '<ul>';
  }
  if ($currNode['depth'] < $currDepth) {       
    $result .= str_repeat('</ul>', $currDepth - $currNode['depth']);
  }
  echo '<li>' . $currNode['name'] . '</li>';
  $currDepth = $currNode['depth'];
  if (empty($tree)) {
    echo str_repeat('</ul>', $currDepth + 1);
  }
} 
```

但它无法正确显示，例如：

它显示输出为：

```
001 : Company Name

    3 : Analyst      

2 : Tester      

    33 : under tster      
        1 : Developer      
        44 : under developer 
```

所需的输出如下：

```
001 : Company Name

    3 : Analyst  
    2 : Tester  
        33 : under tster  
    1 : Developer  
        44 : under developer 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:28:14.900

这应该工作：

```
function printTree ($tree) {
    $last_level = -1;

    foreach ($tree as $v) {
        $diff = $v['level'] - $last_level;
        if ($diff == 0)  {
            echo '<li>' .$v['name']. '</li>';
        }
        elseif ($diff > 0) {
            for ($i = 0; $i < $diff; $i++)
                echo '<ul>';
            echo '<li>' .$v['name']. '</li>' ;
        }
        else {
            for ($i = 0; $i > $diff; $i--)
                echo '</ul>';
            echo '<li>' .$v['name']. '</li>' ;
        }
        $last_level = $v['level'];
    }
} 
```

但是使用此功能，您将不会打印深度。

经过测试和使用

```
$tree = array (
    array (
        'name' => 'Line',
        'level' => 0
    ),
    array (
        'name' => 'Line',
        'level' => 1
    ),
    array (
        'name' => 'Line',
        'level' => 2
    ),
    array (
        'name' => 'Line',
        'level' => 1
    )
);
printTree ($tree); 
```

# java - 如何绘制JMS队列？

> ID：11755320
> 
> 赞同：8
> 
> 时间：2012-08-01T08:22:59.610
> 
> 标签：java, jms, diagram

JMS 队列有符号吗？我知道例如数据库、文件、类应该以相同的方式绘制，但是 JMS 元素呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T08:37:35.623

有一本很棒的书叫做“企业集成模式”，它有一个很好的视觉语言和消息系统的符号，这里是他们用于队列的图表的链接[http://www.eaipatterns.com/MessageChannel.html](http://www.eaipatterns.com/MessageChannel.html)

[http://www.eaipatterns.com/downloads.html](http://www.eaipatterns.com/downloads.html)有一个用于 Visio 的模板，其中包含书中的所有形状。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T08:39:21.043

如果您正在考虑自定义（高级）架构图，您可以使用云符号（但是，在我个人看来，它更多地用于主题），或者在本教程中找到的那些：[基本 JMS 概念](http://docs.oracle.com/javaee/5/tutorial/doc/bncdx.html)

# git - 为什么git有时会在实际上无事可做时显示冲突

> ID：11755323
> 
> 赞同：3
> 
> 时间：2012-08-01T08:23:13.497
> 
> 标签：git, conflict

有时 git 在文件中遇到冲突。但是，如果我查看与我通常用来解决它们的 TortoiseMerge 的冲突，它显示没有冲突。它确实显示了更改，但没有显示任何冲突。如果发生这种情况，我只需单击“标记为已解决”

这可行，但我只是想知道为什么 git 首先将文件标记为冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:44:24.127

如果您在win中遇到文件权限问题，您可以配置：

git 配置文件.mode false

这将忽略文件模式问题。

兄弟，蒂姆

# c# - C#调用具有多个值的函数

> ID：11755325
> 
> 赞同：5
> 
> 时间：2012-08-01T08:23:29.120
> 
> 标签：c#, function, call

所以我在这里有这段代码：

```
int n;
public static void Main(string[] args)
    {
        Console.Write("Please insert a number : ");
        n = int.Parse(Console.ReadLine());
        Console.Write("Please insert wait time (0,1 or 2) : ");
        int time = int.Parse(Console.ReadLine())*1000;            
        Calculate(n,time);                      
    } 
```

对我来说，为多个 n 值（一个接一个地给出）调用 Calculate(n,time) 函数的最佳方法是什么，但在同一时间。我已经考虑过使用数组来存储多个 n 值，但有没有更好的选择。

另外我想从命令行传递多个 n 作为参数。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T08:27:38.993

您只需使用 params 属性。

```
public void Calculate(time, params int[] parameters){ ... } 
```

这将允许您调用：

```
Calculate(time, 1, 2, 3, 4, 5, 6, ....) 
```

在函数中，您可以迭代：

```
foreach(int item in parameters){} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:40:39.850

```
// 
private void Calculate(int int_value, param int[] int_array_value)
{
`   enter code here`// your code goes here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:30:15.653

数组应该可以完美运行。

```
public void Calculate(int[] numbers, int time)
{ ... } 
```

同样使用 LINQ，您可以对数组执行不同的选择：

```
Calculate(n.Distinct().ToArray(), time); 
```

# sql - C# 程序中的 SQL 查询

> ID：11755326
> 
> 赞同：0
> 
> 时间：2012-08-01T08:23:29.610
> 
> 标签：sql

有可能制作一个`where var1!=var2`吗？因为当我尝试编译器时说它是一个无效的运算符。（我也试过`NOT IS`）。

完整的错误消息：

```
Invalid use of '.', '!', or '()'. in query expression
        'emp_course.e_id!=employee.e_id' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T08:24:41.653

你有没有试过这个：

```
where var1 <> var2 
```

TSQL 允许`!=`and `<>`，而其他方言有不同的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:26:18.557

正如[MSDN](http://msdn.microsoft.com/en-us/library/ms176020%28v=sql.90%29.aspx)所说，它应该是`expression < > expression`

# php - 这个框架是什么？

> ID：11755327
> 
> 赞同：1
> 
> 时间：2012-08-01T08:23:30.470
> 
> 标签：php, frameworks

所以基本上，只是偶然发现了我没有见过的 PHP 的框架或其他功能。所有函数都是用 PHP 编写的 - oop 类型，但 html 文件非常深（在文件夹中），这是 html 文件之一的示例 -

[http://jsfiddle.net/x2tgt/](http://jsfiddle.net/x2tgt/)

代码 -

```
<h1>{$category[0].name}</h1>
<table cellpadding="0" cellspacing="0" width="100%">
    {section name=id loop=$products}
    <tr>
        {section name=id2 loop=$products[id]}
        {if $products[id][id2].id}
        <td width="100%" valign="top" width="130">
            <table cellpadding="1" cellspacing="0" width="100%">
                <tr>
                    <td valign="top" align="left" width="195">
                        <a href="{$smarty.const._URL_ROOT}/{$page.lang}/product/{$products[id][id2].id}/{if $page.eshop eq 1}1/{/if}"><img src="{$smarty.const._URL_PREFIX}/data/img/{$products[id][id2].filename}_list.jpg" alt="" /></a>
                    </td>
                    <td width="15"></td>
                    <td valign="top" align="left">
                        <a href="{$smarty.const._URL_ROOT}/{$page.lang}/product/{$products[id][id2].id}/{if $page.eshop eq 1}1/{/if}"><h1>{$products[id][id2].name}</h1></a>
                        {if $page.eshop eq 1}
                        <table cellpadding="0" cellspacing="0" class="prodListPrice">
                            <tr>
                                <td colspan="3" class="top">&nbsp;</td>
                            </tr>
                            <tr>
                                <td class="middle">
                                    ##PROD_PRICE_1##<br/>
                                    <span>{$products[id][id2].price_1} {$products[id][id2].price_from|stripslashes}</span>
                                </td>
                                <td class="middle">
                                    ##PROD_PRICE_2##<br/>
                                    <span>{$products[id][id2].price_2} {$products[id][id2].price_from|stripslashes}</span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" class="bottom">&nbsp;</td>
                            </tr>
                        </table>
                        {/if}
                        <div class="br5"></div>
                        <div>{$products[id][id2].stext|stripslashes}</div>
                    </td>
                </tr>
            </table>
        </td>
        {else}
        <td>
        </td>
        {/if}
        {/section}
    </tr>​ 
```

你知道这可能是什么类型的框架吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T08:25:07.317

这是一个[Smarty](http://www.smarty.net/)模板。我不确定哪些（如果有的话）框架使用 Smarty 作为他们的视图模板引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:38:49.720

Smarty 是一个模板引擎，而不是一个框架。可以在任何现有框架中使用 smarty。一些电子商务和 CMS 系统仍然像 X-cart 一样使用 smarty。如果你在 smarty 中发现一些对你有用的东西，比如缓存模板，你可以使用任何你喜欢的框架来配置 smarty。

# math - (Corona SDK) 如何取消 math.random？

> ID：11755329
> 
> 赞同：0
> 
> 时间：2012-08-01T08:23:37.267
> 
> 标签：math, random, sdk, coronasdk

这里我有一些代码：

```
function CountDown()
             if(time_remaining > 1)then
                 time_remaining = time_remaining - 1;
                 print ("Loading menu")  
                  local function main( event )

                    -- LAUNCH A ROCKET 
                    if math.ceil(math.random() * 200) == 10 and launch == false then
                        Particles.GetEmitter  ("Launcher1").rotation = -35
                        Particles.GetEmitter  ("Launcher2").rotation = 20
                        Particles.StartEmitter("Launcher1", true)
                        Particles.StartEmitter("Launcher2", true)

                    end

                    -- UPDATE PARTICLES
                    Particles.Update()

                end

                -- timer.performWithDelay( 33, main, 1 )
                Runtime:addEventListener( "enterFrame", main )
             else
                 time_remaining = 0
                 print ("Load Go!")
                 menuLoad = transition.to( menuLoad, { time=575, y=-500 })
             end

        end

        count_timer = timer.performWithDelay(1000, CountDown, time_total); 
```

当我切换场景时，我通过 Particles.CleanUp() 取消了所有发射器，但我无法取消 math.random，无论如何它都会尝试启动我的发射器，但是因为它们已经是 nils (Particles.CleanUp)，所以它给了我一个错误

```
Runtime error
    ...me development/Skipjack Rollout Design2/mainmenu.lua:560: attempt to index a nil value
stack traceback:
    [C]: ?
    ...me development/Skipjack Rollout Design2/mainmenu.lua:560: in function <...me development/Skipjack Rollout Design2/mainmenu.lua:556>
    ?: in function <?:226> 
```

请帮帮我！我如何取消 math.random？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:34:41.470

我不完全清楚你在这里问什么，但似乎你有几个问题。

1.  您丢失了作为帧侦听器添加的主函数的句柄
2.  每次检测到 time_remaining > 1 时都会重复添加它，这意味着它每帧运行多次
3.  您正在用计时器句柄替换对 menuLoad 的引用（尽管这可能是故意的。

我从代码中推断您希望您的粒子播放 time_total 秒，此时您将转换到 menuLoad？如果是这样，那么以下情况如何：

```
local function main(event)
    -- LAUNCH A ROCKET
    if math.ceil(math.random() * 200) == 10 and launch == false then
        Particles.GetEmitter  ("Launcher1").rotation = -35
        Particles.GetEmitter  ("Launcher2").rotation = 20
        Particles.StartEmitter("Launcher1", true)
        Particles.StartEmitter("Launcher2", true)
    end

    -- UPDATE PARTICLES
    Particles.Update()
end

Runtime:addEventListener("enterFrame", main)
timer.performWithDelay(time_total * 1000, function() 
    Runtime:removeEventListener("enterFrame", main)
    transition.to( menuLoad, { time=575, y=-500 })
end) 
```

# c# - 使用三种不同 MIME 类型和扩展的编解码器注册 OpenRasta 资源

> ID：11755334
> 
> 赞同：2
> 
> 时间：2012-08-01T08:23:53.323
> 
> 标签：c#, .net, url, mime-types, openrasta

在 OpenRasta 中，我应该如何使用三种不同的编解码器注册资源，并通过在 URL 上附加扩展名来通过常规 Web 浏览器访问这些编解码器？以下似乎不起作用：

```
MediaType json = MediaType.Json.WithQuality(1f);
MediaType xml = MediaType.Xml.WithQuality(0.9f);
MediaType html = MediaType.Html.WithQuality(0.1f);

ResourceSpace.Has
    .ResourcesOfType<ResourceBase>()
    .WithoutUri
    .TranscodedBy<MyXmlCodec>().ForMediaType(xml).ForExtension("xml")
    .And.TranscodedBy<MyHtmlCodec>().ForMediaType(html).ForExtension("html")
    .And.TranscodedBy<JsonDataContractCodec>().ForMediaType(json).ForExtension("json");

ResourceSpace.Has
    // UserListResource inherits ResourceBase
    .ResourcesOfType<UserListResource>()
    .AtUri("/users")
    .HandledBy<UserHandler>(); 
```

`UserListResource`已注册并可以`text/html`在常规网络浏览器中使用，但附加`.xml`到 URL 只会给我一个 404。我试过这个：

```
ResourceSpace.Has
    // UserListResource inherits ResourceBase
    .ResourcesOfType<UserListResource>()
    .AtUri("/users")
    .And.AtUri("/users.xml")
    .HandledBy<UserHandler>(); 
```

但这只会在和 上给我相同的`text/html`表示。`/users``/users.xml`

# search - 如何用谷歌自定义搜索做一个像 CNN 这样的搜索引擎？

> ID：11755336
> 
> 赞同：0
> 
> 时间：2012-08-01T08:23:55.713
> 
> 标签：search, search-engine, google-custom-search

我正在尝试为我的网站做一个谷歌自定义搜索引擎，但谷歌提供的代码完全是 AJAX 代码。

要了解我想要什么，请访问[http://www.cnn.com](http://www.cnn.com)并找到您想要的任何内容，然后结果将显示在另一个页面中。

我怎么能做这样的事情？

我正在尝试使用该网络中的 JS 文件，但我“堆栈溢出！”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:28:25.607

When you get a google search form, they ask you in what page you want to show result. Try to fix this.

# codenameone - 如何构建定制的异形容器？

> ID：11755337
> 
> 赞同：1
> 
> 时间：2012-08-01T08:23:56.353
> 
> 标签：codenameone

所以我正在构建一个[代号为 one的应用程序](http://WWW.CODENAMEONE.COM)

如何自定义容器的形状？

1)例如，当前对话框以矩形的形式显示。如果我想把它塑造成圆形/三角形/等怎么办？

2）现在，在代号一中，有一个主题（一个有木面板的），所以我希望将对话框建模为叶子。所以当我说 Dialog.Show() 时，会弹出一片叶子。在这片叶子上，我可以添加任何我想要的内容（文本框、文本区域等）。所以我将在屏幕上看到的是：一个木板和一个在它上面的叶子形式的对话框。

3）现在，如果您使用过whats 应用程序，您会看到所有聊天内容都放在一个喊话框内。我该怎么做？即。我想要一个带有文本的喊话框。并且喊话框的大小会动态增长以适应我的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:01:27.113

Codename One 中的所有组件都是方形的，但是它们可以部分透明，从而为您提供所需的效果（您显然需要使用填充/布局的组合以适应可绘制形状）。

只需使用图像或图像边框来创建外观并让适当的像素保持透明。请注意，相当多的主题（例如 iOS 对话框）都有圆角，这几乎是一回事。

# python - 从 Django 视图运行 Python 文件

> ID：11755339
> 
> 赞同：3
> 
> 时间：2012-08-01T08:24:00.347
> 
> 标签：python, django, views

我知道以前有人问过这个问题，但建议的方法对我不起作用。这就是我想要从我的 Django 视图中做的事情：

```
sudo python mypythonscript.py arg1 arg2 > mypythonscript.log 
```

如果我从命令行执行它，它就像一个魅力，但不能让它通过 django 视图工作。我曾尝试使用 os.system(command) 和 subprocess.call(command, shell=True) 但它们不起作用。提前致谢。

编辑：这是我的views.py：

```
from django.http import HttpResponse
import datetime
import subprocess

def li_view(request):
if request.is_ajax():
        if request.method == 'GET':
            message = "This is an XHR GET request"
        elif request.method == 'POST':
            message = "This is an XHR POST request"
            print request.POST
    else:
        message = "No XHR"
    num_instances = request.POST['num_instances']
    ami_id = "ami-ff02058b"
    command = "sudo python /home/bitnami/launch_instances.py 1 " + num_instances + " " + ami_id + " > /home/bitnami/launcinstances.log"
    subprocess.call(commad, shell=True)
    return HttpResponse("something creative will go here later") 
```

整个故事是我的网站上有一个表单，我想将该表单的内容作为参数传递给我的 launch_instances.py 脚本。当我按下表单中的提交按钮时，它会发布到 /luanch_instances/ ，它会“重定向”到这个视图。按原样执行代码不会做任何事情，它只会在新页面上向我显示“稍后创建的内容将转到此处”。如果我要怎么用

```
suprocess.check_call(command, shell=True) 
```

这就是我得到的：

```
Command 'sudo python /home/bitnami/launch_instances.py 1 ami-ff02058b > /home/bitnami/launchinstances.log' returned non-zero exit status 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:57:15.850

很可能它与权限有关。尝试检查命令执行的 stderr 和 stdout。我正在使用此代码来调试我的 shell 命令：

```
process = subprocess.Popen(shlex.split(command), stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        output,error = process.communicate(input=pipe) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T08:55:33.303

当您尝试运行 python 脚本时，您可以简单地将代码从 launch_instances.py 导入到您的视图中，将输出重定向到 /home/bitnami/launcinstances.log （关于将 stdout 重定向到 python 中的文件：[Redirect stdout to a file in Python ?](https://stackoverflow.com/questions/4675728/redirect-stdout-to-a-file-in-python) )。但是root权限仍然存在问题-一种选择是更改以下权限：从launch_instances.py调用代码所需的资源；您的日志文件；为了让您的 django 进程执行该操作，第二个选项（不推荐）是以 root 身份运行 django app。

# linux - 在 Linux 内核中杀死一个进程（据说）很忙？

> ID：11755340
> 
> 赞同：0
> 
> 时间：2012-08-01T08:24:03.147
> 
> 标签：linux, linux-kernel, kernel, signals, process

`mount`我不小心在错误的分区上触发了一个。`sda4`是包含*X>4的**扩展分区*`sdaX`，而我想挂载 Fat32 分区。*`sda7`*

 *```
sudo mount /dev/sda4 /media/win 
```

现在`mount`自 45 分钟以来一直很忙，并且使用 100% 的 CPU 时间（两个内核中的一个）。

**我怎样才能阻止或杀死那个坐骑？**

我已经尝试过（它的 pid 是 10155）：

*   `kill -TERM 10155`- 还有`KILL`, `USR1`, `USR2`, `INT`, 全部无效
*   `kill -STOP 10155`-- 我认为这至少可以给我一些空间，但它一直在 100% 运行
*   `renice 20 10155`——*这至少*让其他进程有一些喘息的空间。

里面有什么东西`/proc`可以用来杀死坐骑吗？

**更新：**我的 Linux 是 Ubuntu 12.04 LTS，64 位。`uname -a`：`Linux ... 3.2.0-27-generic #43-Ubuntu SMP Fri Jul 6 14:25:57 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:14:28.457

> **我怎样才能阻止或杀死那个坐骑？**

你不能；系统调用是不间断的。您将需要等到它超时或出错，假设它永远会发生。*

# php - 建议使用 AJAX 或 jQuery 进行自动建议（完成）

> ID：11755343
> 
> 赞同：0
> 
> 时间：2012-08-01T08:24:11.617
> 
> 标签：php, jquery, ajax, cross-browser

我有 AJAX 版本、jQuery 版本的自动建议（完成）示例。AJAX 更兼容跨浏览器，jQuery 非常简洁，但如果使用 IE 或更旧版本会出现一些问题，例如设置列表的高度。

问题是，我正在创建的网站是为那些使用旧版本的国家之一的，所以我应该非常小心。

我自己使用过[这个](http://www.w3schools.com/php/php_ajax_livesearch.asp)AJAX 模型很多次，并且昨天学习了 jQuery 自动完成，这对我来说很好，但对我提到的人来说就不行了。

对于这个特定主题，我想知道您对哪个自动建议（完成）示例相同或任何示例链接的想法。

穆什赞赏，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:30:47.293

AJAX 是一个概念（异步 Javascript XML，或类似的东西）。jQuery 是一个 Javascript 框架，它可以更轻松地执行跨浏览器的 AJAX 请求。

除非您有充分的理由不使用 jQuery¹，否则我会为此使用 jQuery。jQuery UI 也支持自动完成：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

¹ 如果您已经在使用不同的库、Prototype、Ext 等，它们通常也有类似的支持，可以使跨浏览器的 ajax 请求更容易。阅读文档 :)

# java - 找出混乱游戏的最小移动次数

> ID：11755352
> 
> 赞同：2
> 
> 时间：2012-08-01T08:24:42.653
> 
> 标签：java, linear-programming

我想创建一个小型 Jumbler 游戏。我打算使用 Java 编程语言来制作这个游戏。以下是游戏的小屏幕截图。我找不到包含此游戏的任何其他网站。

[页面末尾的游戏截图](http://www.searchenginegenie.com/web-design-blog/tag/flash-number-jumbler-game/)

在这个游戏中，我想添加两个功能。

```
1\. Manually solve the problem.
2\. Automatically solve the problem. 
```

> 手动解决问题

意味着我们玩游戏并找到解决方案以使数字按升序排列

> 直观地解决问题

表示计算机以图形方式显示解决方案所需的最少移动次数。这意味着计算机以图形方式显示运动并以最少的运动识别解决方案。

那么如何编程这种情况呢？

我在互联网上搜索并获得了一些与线性编程相关的教程。为了解决这类问题，我应该学习什么？我不知道如何解决自动解决方案。请提供一些好的教程，让我可以轻松掌握。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:37:35.710

When all you've got is a hammer, everything looks like a nail - so I'd say that this type of problem can be solved using [constraint programming](http://en.wikipedia.org/wiki/Constraint_programming). But that's just what I've got a little experience in.

Basically, you have a board layout, and there are a small number of valid moves at each 'step'. The aim is to move into a known layout (ascending order).

To do this 'automatically', you need to have the program *search* for a solution path. The steps to do this are something like this:

1.  From the *current* layout, determine the valid moves.
2.  Calculate the layout after taking each of the valid moves.
3.  Check if any of the calculated layouts is the solution; if it is, you're finished.
4.  If none of the moves resulted in the solution, work out all the newly-valid moves, and repeat from 1\.

You'll have some issues doing this. Firstly, memory constraints (making a bazillion copies of your board layout might not work). Secondly, time/computational constraints (it might take a long, long time to find a solution). There are some things you can do to at least minimize the damage from these issues.

1.  Choose a good search method. [Breadth-first](http://en.wikipedia.org/wiki/Breadth-first_search) as opposed to [Depth-first](http://en.wikipedia.org/wiki/Depth-first_search), for example. This will both decrease the time taken to find a solution and decrease the memory requirements.
2.  Some moves are "backwards". For example, moving square A to B, and then square B to A (repeating moves). Searching these 'loops' is both pointless and resource-wasting, so you'd want to ensure you don't do that.
3.  There is the possibility of symmetries in the search space. I haven't solved your particular problem, and I couldn't give you examples specific to you, but the [n-queens](http://en.wikipedia.org/wiki/Eight_queens_puzzle#Solutions_to_the_eight_queens_puzzle) has a nice section on symmetries specific to that problem - it might be worth a read if you're trying to find symmetries in your problem.

That might give you some information, or thoughts to start looking.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:46:40.407

我不知道我是否明白...

最小发生率和最小路径是一个动态规划问题

[http://en.wikipedia.org/wiki/Dynamic_programming](http://en.wikipedia.org/wiki/Dynamic_programming)

简而言之，您必须计算所有解决方案并显示更好的解决方案。动态编程并不是那么容易理解和开发，但你可以尝试...

但是，我建议您记住如何混合它并展示该解决方案...

# c# - 与 c# 一起使用时，OpenHardwareMonitor 是否可靠？

> ID：11755366
> 
> 赞同：0
> 
> 时间：2012-08-01T08:25:44.397
> 
> 标签：c#

我的意思是，我没有找到任何其他用于监控 PC 上硬件的其他程序的 c# 源代码。我想知道我从 openHardwareMonitor 获得的值是否足够可靠？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:37:58.423

您好，您也可以尝试使用此代码 plex 库并比较结果

[http://managedupnp.codeplex.com/](http://managedupnp.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:44:29.350

很少有人用 C# 做事情，他们使用 C++、C 或 VB。所以如果你想这样做，你可以试试windows APIs。顺便说一句，在 C# 中调用 windows API 很容易

# objective-c - 将 Mysql 表导入 CoreData：如何在不使用关系的情况下获得左连接？

> ID：11755367
> 
> 赞同：0
> 
> 时间：2012-08-01T08:26:03.310
> 
> 标签：objective-c, core-data

我已将 mysql 从 Web 应用程序导入到我的 iOS 应用程序中。该数据库是专门设计的，不使用外键。

我需要做一个左连接，但我不知道如何在不使用关系的情况下在 iOS 核心数据中做到这一点。

有没有办法在 NSPredicate 中使用类似 Data.id == Item.id 的语法来获取两个表数据？？？

----------已编辑----------

更具体地说，我想获取一个 Data 实体，并将 item 属性与 Entity Item 的实体代码属性匹配。不应包含任何不匹配的“对象”。

就像一个左连接......你感觉到我了吗？

我难住了。

帮助 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:42:35.207

您问“*核心数据没有简单的方法*”吗？
事实证明，在核心数据中比在 SQL 中要容易得多。

简单地使 entity 成为 entity`Item`的关系`Data`。你的谓词可能是

```
[NSPredicate predicateWithFormat:@"item = %@", itemObject]; 
```

还有什么比这更容易的呢？？

假设：关系是一对一的，关系的名称是`item`，`itemObject`是类型的托管对象`Item`。

*记录一下：您实际上甚至没有处理表，因为 Core Data 是一个对象图而不是数据库。您会在 SOF 上找到很多关于此的讨论。*

# design-patterns - 查询聚合中除根以外的实体

> ID：11755370
> 
> 赞同：4
> 
> 时间：2012-08-01T08:26:21.430
> 
> 标签：design-patterns, repository, domain-driven-design

在 DDD 的上下文中，总是说存储库只能查询聚合根。聚合根然后授予对聚合中其他实体的访问权限。但是，对聚合中的实体的查询是如何建模的？

假设 Orders 聚合的情况。订单是根并具有详细行列表，这些行引用产品（这是另一个聚合的根）并具有其他属性，例如数量

现在，假设我需要列出或订购引用特定产品的行，以生成可供各种服务使用的报告，例如计算产品订单请求的平均项目数。

搜索每个 Oder，然后列出所有行并选择我感兴趣的行，听起来不切实际。Orders 存储库中的 getLinesByProduct() 听起来更方便，但会将 Lines 暴露在 Aggregate 之外。

如何建模此查询？

也许问题是我正在查询我的命令模型，我应该有一个（非规范化的）查询模型，其中详细信息行是具有所有需要信息的实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:28:32.200

> 也许问题是我正在查询我的命令模型，我应该有一个（非规范化的）查询模型，其中详细信息行是具有所有需要信息的实体？

这是完全正确的。DDD 并不是为了解决查询问题，并且由于它的各种约束和 ORM 施加的约束而经常以摩擦的方式反驳。查询，尤其是报告应单独处理。您可以使用[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)来支持作为核心应用程序一部分的查询，或者使用完全独立的报告系统，该系统基于复制的数据进行操作。

# javascript - 使用 Javascript 移动到同一页面中的另一个框架

> ID：11755372
> 
> 赞同：0
> 
> 时间：2012-08-01T08:26:33.223
> 
> 标签：javascript, html, forms, button, frame

我真的是 javaScript 和 HTML 的初学者。我创建了一个带有两个按钮的网页，这取决于按下哪个按钮，我想打开一个不同的表单。我该怎么做 ？

当用户按下第一个按钮“S&P Database”时，浏览器应该将他转移到另一个包含选项列表的表单。但是当他按下生成报告按钮时，他应该会出现另一个不同的选择.. 但是在这里我不想打开一个新窗口，我需要在同一个窗口中使用它，但在浏览器中使用不同的页面..

```
<html>
<body>
<h1> My System </h1>

<form action="">
<input type="button" value="S & P Database ">
<input type="button" value="Generate Report  ">

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:39:53.113

您可以在页面中创建 iframe

```
<iframe name="myiframe" id="myiframe"></iframe> 
```

然后你从设置目标到那个 iframe

```
<form target="myiframe" action="...."> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:40:31.127

有很多方法！

您可以同时加载它们，并[使用 jQuery 显示您需要的一个](https://stackoverflow.com/questions/1413042/show-hide-multiple-divs-with-select-using-jquery)。或者您可以使用[AJAX](http://www.w3schools.com/ajax/default.asp)。

# php - CodeIgniter Active Record：在不运行 SQL 的情况下进行调试

> ID：11755374
> 
> 赞同：3
> 
> 时间：2012-08-01T08:26:45.127
> 
> 标签：php, mysql, codeigniter, activerecord

我是 Code Igniter 的新手，我正在使用 Active Record 来处理新项目中的所有查询。

有没有办法在不实际运行的情况下输出 SQL 语句。

我创建的函数中有很多语句，选择、删除和更新，我想在测试环境中运行它们之前确保它们是正确的，因为它们周围有很多 If 和案例要构建查询。

所以简而言之，我只希望它回应声明，而不是运行它。

提前致谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:39:11.490

查看用户指南的[Database Query Helper](http://codeigniter.com/user_guide/database/helpers.html)部分中列出的`insert_string()`和方法。`update_string()`

对于选择，您需要在运行命令后运行 $this->db->last_query() ，但 SELECT 是非破坏性的，所以谁在乎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:49:44.393

看看我的这个答案。
[如何将此 SQL 重写到 CodeIgniter 的活动记录中？](https://stackoverflow.com/questions/10502778/how-can-i-rewrite-this-sql-into-codeigniters-active-records/10546395#10546395)

在这种情况下，如果您使用 $this->db->_compile_select() 然后回显它，它将显示查询而不运行。

# javascript - HTML 输入元素不起作用

> ID：11755377
> 
> 赞同：-2
> 
> 时间：2012-08-01T08:26:54.967
> 
> 标签：javascript, html, input

我目前正在开发一个 HTML5 游戏引擎，我需要使用 Input 元素。首先，我制作了一个脚本来动态创建元素。它创建的元素不像 Input 元素那样工作，只不过是一个简单的框。所以我在不使用 Javascript 的情况下放入 Input 元素，只是

```
<input type="text" /> 
```

它也不起作用。它创建一个元素，当你将鼠标悬停在它上面时它会改变光标，但你不能写入它。有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:33:16.463

原因可能是某种绑定的键事件处理程序在传播到达文本框之前停止传播。考虑到您正在开发游戏引擎，这听起来特别有可能。

检查您的代码是否有可能阻止您的关键事件到达文本输入的事件处理程序。还要确保您的代码不会阻止输入接收*焦点*。

# c# - save sharepoint list data together with the data types to xml by using Dataset

> ID：11755388
> 
> 赞同：1
> 
> 时间：2012-08-01T08:27:44.283
> 
> 标签：c#, xml, sharepoint, powershell, dataset

I have the code below which saves a sharepoint list to xml by using dataset. Below the code you will see the output in xml format.

There are a few things which I would like some help:

1.  How can I save the data together with the data type in xml by using dataset?

Example: The result that I would like to have or something like this, so that when I read the xml file I can convert them back to the right data type

```
<NewDataSet>
  <Report_x0020_List>
    <Title **Type="Text"**>My title</Title>
    <RequesterID **Type="Number"**>1</RequesterID>
    <AdditionalRemarks **Type="Note"**>Additional Remarks </AdditionalRemarks>
    <DeliveryDate **Type="DateTime"**>2012-07-13T00:00:00+02:00</DeliveryDate>
    ...... and so on
  </Report_x0020_List>
</NewDataSet> 
```

2) Right now the root of the xml file is called `NewDataSet`. Is there a way that I can manipulate this before it is saved as xml? I would like to have control over how the elements are named.

-----Desired result--------

```
<MyReportList>
   <Report>

   </Report>
</MyReportlist> 
```

---- not like this ------

```
<NewDataSet>

</NewDataSet> 
```

3) if the saving the data type is not possible can you show me good example how to convert it the data from xml string to the right type in sharepoint?

* * *

Code I am using

```
if($lists.List.Length -gt 0)
    {
        foreach ($list in $lists.List)
        {
            $listName = $list.Attributes.Item(0).Value

            $myList=$spweb.Lists[$listName]

            if($myList -ne $null)
            {

                 if ($myList.Items.Count -gt 0)
                {
                    $spQuery = New-Object Microsoft.SharePoint.SPQuery
                    $spQuery.Query = $query
                    #$myList.GetItems($spQuery).GetDataTable(); 
                    $dt = $myList.GetItems($spQuery).GetDataTable()

                    $ds = New-Object System.Data.DataSet
                    $ds.Tables.Add($dt)

                    $ds.WriteXml("$filePath$fileName")
                }
            }
        }

    } 
```

* * *

The result I am getting

```
<NewDataSet>
  <Report_x0020_List>
    <Title>My title</Title>
    <RequesterID>1</RequesterID>
    <AdditionalRemarks>Additional Remarks </AdditionalRemarks>
    <DeliveryDate>2012-07-13T00:00:00+02:00</DeliveryDate>
    <DueDate>2012-07-14T00:00:00+02:00</DueDate>
    <Format>TXT</Format>
    <Source>;#ASTV;#BS;#</Source>
    <Frequency>Once</Frequency>
    <Hold>1</Hold>
    <MoreInformation>More qsd sgvfsdfsdf Information </MoreInformation>
    <Owner>sp_user1;#19;#sp_user2</Owner>
  </Report_x0020_List>
</NewDataSet> 
```

# xpages - How to access org.apache.axis from the OSGI bundle in a XPage to consume a Web Service?

> ID：11755391
> 
> 赞同：1
> 
> 时间：2012-08-01T08:28:06.753
> 
> 标签：xpages

I'm trying to consume a Web Service from within my XPage. I already found Stephan Wissels blog entry [Webservices in XPages - AXIS vs. CXF](http://www.wissel.net/blog/d6plinks/SHWL-8SUKV5)

It works fine, if in the java.policy file in the {domino}/jvm/lib/security directory the following lines are added

```
grant {
 permission java.lang.RuntimePermission "setContextClassLoader";
 permission java.lang.reflect.ReflectPermission "suppressAccessChecks";
}; 
```

My Problem is that my customer has some very strict admins. There is no way that they modify the java.policy file.

I searched a little and found that in 8.5.2 the org.apache.axis files has been moved to an OSGi bundle. My approach to get around the modification of the java.policy was to use this bundle. But if I try to access it, I always get an error: javax.servlet.ServletException: java.lang.NoClassDefFoundError: org.apache.axis.client.Service

Trying to add the bundle to the plugin.xml didn't helped.

```
<plugin>
<requires>
    <import plugin="org.apache.axis"/>
    <!--AUTOGEN-START-BUILDER: Automatically generated by null. Do not modify.-->
    <import plugin="org.eclipse.ui"/>
    <import plugin="org.eclipse.core.runtime"/>
    <import optional="true" plugin="com.ibm.commons"/>
    <import optional="true" plugin="com.ibm.commons.xml"/>
    <import optional="true" plugin="com.ibm.commons.vfs"/>
    <import optional="true" plugin="com.ibm.jscript"/>
    <import optional="true" plugin="com.ibm.designer.runtime.directory"/>
    <import optional="true" plugin="com.ibm.designer.runtime"/>
    <import optional="true" plugin="com.ibm.xsp.core"/>
    <import optional="true" plugin="com.ibm.xsp.extsn"/>
    <import optional="true" plugin="com.ibm.xsp.designer"/>
    <import optional="true" plugin="com.ibm.xsp.domino"/>
    <import optional="true" plugin="com.ibm.notes.java.api"/>
    <import optional="true" plugin="com.ibm.xsp.rcp"/>
    <import optional="true" plugin="com.ibm.xsp.extlib"/>
    <!--AUTOGEN-END-BUILDER: End of automatically generated section-->
  </requires>
</plugin> 
```

Any idea how to use the org.apache.axis file within a XPage?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:55:43.460

您是否尝试使用 CXF 而不是 Axis？如果其他任何事情都失败了……隐藏的一点 LotusScript 会走得更远。

或者，您可以将 Web 服务打包到插件中。它们以比 NSF 中的代码更好的权限运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:23:44.567

也许您可以说服客户的管理员通过使用精确的授权您不会损害服务器的安全性。例如：

```
grant codeBase "xspnsf://server:0/somedb.nsf/script/-"{
   permission java.lang.RuntimePermission "setContextClassLoader";
   permission java.lang.reflect.ReflectPermission "suppressAccessChecks";
} 
```

我敢打赌，他们甚至不明白这两个指令的变化。

# javascript - jquery 倒计时从 4 秒到 0 然后在 0 移动到下一个函数

> ID：11755392
> 
> 赞同：0
> 
> 时间：2012-08-01T08:28:08.527
> 
> 标签：javascript, jquery, html

我正在尝试编写一种游戏，您有 4 秒钟的时间来回答一个问题（口头），一旦完成，它就会转到下一个问题。我需要它来播放音频（不是我在这里问的），然后从 4 秒倒计时到 0，然后显示正确答案并继续前进。

如何创建一个从 4 秒到 0 秒的倒计时，然后继续下一件事？

我尝试了以下方法并失败了。

```
 var counter = 4;

    $('#seconds').html(counter);

    function decreaseSeconds(){
        counter--;
        $('#seconds').fadeOut('fast');
        $('#seconds').html(counter).delay(800);
        $('#seconds').fadeIn('fast');
    }

    while ( counter > 0){
         decreaseSeconds()
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:32:58.687

见[演示](http://jsfiddle.net/4FXHp/1/)

```
var nextFunction = function () {
  alert('Hello.');
};

sec = 4;

interval = setInterval(function () {
  sec--;
  document.getElementById('sec').innerHTML = sec;

  if (sec == 0) {
    clearInterval(interval);
    nextFunction();
  }
}, 1000); ​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:34:04.983

你应该使用 setTimeout

```
yourfirstfunction ();
setTimeout (yoursecondfunction, counter*1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:32:34.403

为什么不使用纯 JavaScript 中的 setTimeout？[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:39:09.643

**像这样的东西：http: [//jsfiddle.net/collabcoders/MD6sz/2/](http://jsfiddle.net/collabcoders/MD6sz/2/)**

```
$(document).ready(function () {
  var secs = 4;
  ticker = setInterval(function(){
    $("#timer").html(secs + " seconds left");
    if (secs == 0) {

      //call some function when the clock hits 0
      $("#timer").html("time is up");
      clearInterval(ticker);
    }
    secs --;
  }, 1000);
});​ 
```

# node.js - node.js: fixing ev_ref/ev_unref warning

> ID：11755395
> 
> 赞同：2
> 
> 时间：2012-08-01T08:28:13.143
> 
> 标签：node.js

I have a [Node.JS extension](https://github.com/quartzjer/node-sqlite-fts) that's causing warnings in Node.JS 0.8.4:

```
WARNING: ev_ref is deprecated, use uv_ref
WARNING: ev_unref is deprecated, use uv_unref 
```

I'd like to patch the extension to avoid these warnings but I can't find any information on ev_ref/uv_ref.

The warning is probably caused by lines like these:

```
 ev_ref(EV_DEFAULT_UC);
  ev_unref(EV_DEFAULT_UC); 
```

(no other variants found).

What's the equivalent uv_[un]ref() call and are there any compatibility issues I should know?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:37:23.060

有关如何使用 uv_ref() 和 uv_unref() 的示例，请参阅对 node-geos 的[提交。](https://github.com/kashif/node-geos/commit/51aff77eb88446638b51e5030f2ad5b7bdd64af1)

# xml - xPath/xQuery 中的 if 条件

> ID：11755400
> 
> 赞同：1
> 
> 时间：2012-08-01T08:28:30.983
> 
> 标签：xml, xpath, if-statement, concatenation

为了连接来自 xpath 的结果，我正在使用`concat(normalize-space(.), '&#xA;')`（感谢[Dimitre Novatchev](https://stackoverflow.com/users/36305/dimitre-novatchev)）。

现在我想知道如何避免`&#xA;`在最后一个元素之后添加......我正在考虑类似的事情：`concat(normalize-space(.), if(XXXXX) then '&#xA;' else '')`但我无法弄清楚我必须使用什么条件。

例如，如果我正在使用`xpathExpression/concat(normalize-space(.), ',')`并且请求的值是（字符串）A & B & C & D，那么我期望的输出是`A,B,C,D`而不是`A,B,C,D,`.... 所以表达式可能变为：`xpathExpression/concat(normalize-space(.), if(this is the last element D) then '' else ',')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:13:57.350

如果您在 XQuery 或 XPath 2.0 中，您可以使用 string-join 函数，例如

```
string-join(//author, ', ') 
```

会给你一个像

```
Fleming, Rowling, Pullmann 
```

如果您在 XPath 1.0 中，则没有简单的等价物 - 但从您的问题中不清楚上下文是什么。

# asp.net - 多个数据源到单个下拉列表

> ID：11755406
> 
> 赞同：0
> 
> 时间：2012-08-01T08:28:58.657
> 
> 标签：asp.net

如何将多个数据源设置为单个下拉列表？

```
 DrpPosition.ClearSelection();
        DrpPosition.DataSource = AdvertizeManager.GetList("", "", "", "");
        DrpPosition.DataTextField = "PNAME";
        DrpPosition.DataValueField = "ADID";
        DrpPosition.DataBind();
        DrpPosition.DataSource = CategoryManager.GetList("", "", "", "");
        DrpPosition.DataTextField = "NAME";
        DrpPosition.DataValueField = "CATID";
        DrpPosition.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:40:46.033

您可以使用 LINQ 轻松解决此问题：

```
 var advertizes = AdvertizeManager.GetList...
        var categories = CategoryManager.GetList....

        // create your annonymous type
        var customAdvertizes = from advertize in advertizes
                select new
                {
                    Value = advertize.ADID,
                    Text = advertize.PNAME
                };

        var finalQuery = customAdvertizes.Concat(
            from category in categories
            select new
            {
                Value = category.CATID,
                Text = category.NAME
            }
        ); 
```

然后把它绑定到你的`DropDownList`

```
 DrpPosition.DataSource = finalQuery;
    DrpPosition.DataTextField = "Text";
    DrpPosition.DataValueField = "Value";
    DrpPosition.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:30:26.243

这是不可能的，但您可以在绑定之前合并您的数据源。

或者你可以使用

```
foreach(var item in yourDataSourceComplete)//yourDataSourceComplete = List1 + List2
{ 
  .....
  DrpPosition.Items.Add(Yourkey, YourValue);
} 
```

# objective-c - SOAP WebService objective-c

> ID：11755408
> 
> 赞同：0
> 
> 时间：2012-08-01T08:29:13.750
> 
> 标签：objective-c, ios, web-services, soap

Customer implement soap webservice, and give me url of this service. There is this text on url:

> You have created a service.
> 
> To test this service, you will need to create a client and use it to call the service. You can do this using the svcutil.exe tool from the command line with the following syntax:
> 
> `svcutil.exe http://server/?wsdl`
> 
> This will generate a configuration file and a code file that contains the client class. Add the two files to your client application and use the generated client class to call the Service. For example: ...

I must implement client application on objective-c. Questions:

1) Is this service working? Or I must ask customer to do actions on his server(`svcutil.exe http://server/?wsdl`). Does he should sent me generated files?

2) What steps should I do to implement client of this service?

3) Should I work with WebService Core Framework? How to include it to my iOS project?

Thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-25T11:28:23.960

我更喜欢使用 SOAP 服务的方式是使用一个可以生成所有必需类的好工具。我个人使用这个：

[http://easywsdl.com](http://easywsdl.com)

它非常易于使用并支持许多特性，如枚举、简单类型、引用（在 WCF 数据合同中与 IsReference ）等等。与手动编写整个代码相比，自动化此类工作要容易得多。即使生成的类会有一些问题，修复几个源文件（对于许多 WS 可以有超过 100 个文件）比从头开始创建所有类要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:18:04.060

不要使用任何会为你生成文件的工具，而是按照这个教程，你会得到你需要的所有信息，[http://www.icodeblog.com/2008/11/03/iphone-programming-tutorial-intro-to -肥皂网络服务/](http://www.icodeblog.com/2008/11/03/iphone-programming-tutorial-intro-to-soap-web-services/)

而且您应该要求您的客户向您提供肥皂请求，以便您可以解析它们。如何解析？在上面的链接中给出。

好运

# android - 在 android 2.1 中拖放

> ID：11755412
> 
> 赞同：1
> 
> 时间：2012-08-01T08:29:27.120
> 
> 标签：android, drag-and-drop

我相信拖放功能直到 3.0 才可用，对吧？那么如何在较低版本中创建拖放，我目前正在开发 2.1..

我看过一个[教程](http://techdroid.kbeanie.com/2010/04/simple-drag-n-drop-on-android.html)，但是拖放有点不切实际，因为图像视图有点偏离手指。还有其他建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:44:22.333

您可以将当前布局包装在 FrameLayout 中并添加一个透明的 AbsoluteLayout，您可以将要拖动的视图重新定位到其中吗？掉线会有点挑战...

也许查看源代码以了解他们在 3 中是如何做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:01:21.087

您可以使用此库进行拖放。 [http://code.google.com/p/android-multitouch-controller/](http://code.google.com/p/android-multitouch-controller/)

# bash - Mac OS：bash：未指定 CVSROOT

> ID：11755413
> 
> 赞同：2
> 
> 时间：2012-08-01T08:29:32.237
> 
> 标签：bash, macos, cvs, vcs-checkout

Mac OS 10.7.4

我需要检查 ~70 个 cvs 项目，所以我有这样的脚本：

```
#!/bin/bash

cvs checkout proj1
cvs checkout proj2
cvs checkout proj3

....

cvs ckeckout proj75 
```

但是当我执行它时，我收到一条错误消息：

```
cvs checkout: No CVSROOT specified! Please use the '-d' option
cvs [checkout aborted]: or set the CVSROOT environment variable. 
```

`cvs checkout proj1`当我在作品中手动编写时。

```
ECHO $CVSROOT
:pserver:mylogin@server:port/repository 
```

将不胜感激任何提示来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:35:17.570

尝试`$CVSROOT`在您的 shell 脚本中显式设置“”，看看是否会有所不同。

可能是您正在启动另一个 shell（即“ `bash`”）并且当前 shell 中的环境变量，无论它是什么，都没有被复制到您的 bash 环境中。

# c# - CurrentSessionContext on NHibernate

> ID：11755414
> 
> 赞同：3
> 
> 时间：2012-08-01T08:29:33.210
> 
> 标签：c#, nhibernate

I'm refactoring our code of UnitOfWork with multiple sessions factory. Our UoW is iterating over all session factories opens them and bind to context - and here is the question.

```
 public void InitializeSessions()
 {
  foreach (ISessionFactory sessionFactory in _sessionFactories)
  {
    if ( NHibernate.Context.CurrentSessionContext.HasBind(sessionFactory))
    {
      continue;
    }

    ISession session = sessionFactory.OpenSession();
    NHibernate.Context.CurrentSessionContext.Bind(session);

    session.BeginTransaction();
  }
 } 
```

This UoW has to be universal - this mean that it can be used by WCF, Web or in unit tests. So for WCF apps we set in nh config session context to "WcfOperationSessionContext", for Web eg. "ManagedWebSessionContext". Problem which occurred is that we cannot use static method of class CurrentSessionContext, because method "Bind" need that ISessionFactoryImplementor inherit from "CurrentSessionContext". After some searching we found that in examples it calls directly this context which is set in nh config file but in other implementations from internet they are using strictly "CurrentSessionContext".

How really this should be done? If we should call directly context implementation of "ICurrentSessionContext" configured in nh config or always use "CurrentSessionContext" (this not work like I mentioned)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:55:39.030

对于 CurrentSessionContext，您想使用 WebSessionContext 而不是 ManagedWebSessionContext，根据文档：[http ://nhibernate.info/doc/nh/en/index.html#architecture-current-session](http://nhibernate.info/doc/nh/en/index.html#architecture-current-session)

# iphone - how to use EKEvent?

> ID：11755415
> 
> 赞同：1
> 
> 时间：2012-08-01T08:29:34.007
> 
> 标签：iphone, objective-c, ios, c, ios4

```
NSDictionary *d = (NSDictionary *) [arrGarden objectAtIndex:0];
    int intarrCount=0;

    NSString *strDate =[NSString stringWithFormat:@"%@", [d valueForKey:@"open_date_for_calendar"]];

    NSArray *arrDateList =[strDate componentsSeparatedByString:@","];

    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MM/dd/yyyy"];
    [dateFormatter setTimeZone:[NSTimeZone localTimeZone]];

    for(int i=0;i<[arrDateList count];i++)
    {
        intarrCount++;
        EKEventStore *eventDB = [[EKEventStore alloc] init];

        EKEvent *myEvent  = [EKEvent eventWithEventStore:eventDB];

        NSString *trimmedString = [[arrDateList objectAtIndex:i] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
      //  NSString *trimmedString = [NSString stringWithFormat:@"%@",[[arrDateList objectAtIndex:i] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];

        myEvent.title     = [d valueForKey:@"garden_name"];
        myEvent.startDate = [dateFormatter dateFromString:trimmedString];
        //myEvent.endDate   = [dateFormatter dateFromString:trimmedString];
        myEvent.endDate  = [[NSDate alloc] initWithTimeInterval:0 sinceDate:myEvent.startDate];
        myEvent.allDay = YES;

        [myEvent setCalendar:[eventDB defaultCalendarForNewEvents]];
        NSError *err;
        [eventDB saveEvent:myEvent span:EKSpanThisEvent error:&err];
        //NSString *eID = myEvent.eventIdentifier;

    if(intarrCount == [arrDateList count])
    {
        if (err == noErr) {
            UIAlertView *alert = [[UIAlertView alloc]
                                  initWithTitle:@"Event Added to your calendar"
                                  message:nil
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
            [alert show];
            [alert release];
        }
    }
    } 
```

above my line of code that i used..

when i add event to calendar the event add successfully in calendar but after 10-15 seconds the events are removed automatically... please help me where i have mistake in line of code thanks....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:07:52.387

此代码用于添加事件。

```
-(IBAction)eventAddToiCal:(id)sender
    {

        if(txtTitle.text.length == 0)
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Enter Data" message:@"Please enter data into fields" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil ];
            [alert show];
            [alert release];
        }
        else 
        {
            event = [EKEvent eventWithEventStore:eventStore];
            event.startDate = startDate; 
            event.title = txtTitle.text;
            event.location = txtLocation.text;
            event.endDate = endDate;
            event.notes = txtvNote.text;

            /// tejas (Save Event in default Calendar of iPhone)
            // Try to save the event

            [event setCalendar:[eventStore defaultCalendarForNewEvents]];
            NSError *error = nil;
            [self.eventsList addObject:event];
            [eventStore saveEvent:event span:EKSpanThisEvent error:&error];
        }
    } 
```

# python - Mayavi Python - Enthought 分发是强制性的吗？

> ID：11755416
> 
> 赞同：0
> 
> 时间：2012-08-01T08:29:36.813
> 
> 标签：python, dll, module, enthought, mayavi

我想使用 mayavi 进行 3d 数据可视化。我下载了 Mayavi 模块包，以及依赖项 VTK、wxpython、conjigobj。在使用 IDLE 编译时，我仍然有一个警告

没有名为 traits.api 的模块。我发现这个模块是用 Entought 分发的，所以我想知道我是否可以在不使用 Enthought 分发的情况下使用 mayavi。是否有一些免费的 Enthought 分发可用？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:15:35.620

通常，您可以在没有经过深思熟虑的分发的情况下使用该库。Linux 用户通常使用他们的包管理器安装这些模块。对于 Windows，有包含 enthought 工具包的[python(x,y) 。](http://code.google.com/p/pythonxy/)然而，导入范围有时会产生误导。在一些例子中，它是`traits.api`，其他人阅读`enthought.traits.api`。您可能想检查哪一个对于您的 python 安装是正确的。

# php - adding toolbar menu item in joomla 1.5 component.

> ID：11755418
> 
> 赞同：0
> 
> 时间：2012-08-01T08:29:53.100
> 
> 标签：php, joomla, components, toolbar

I have problem in adding toolbar add button in toolbar menu in joomla 1.5 component. I need to add an add custom button in the standard way so with this my button is added to my menu but it is not functional I need a function wich will help me to take the parameter from the button for example the task in my case(aaaa).

```
/*
ToolBarHelper::custom('aaaa', 'new', 'new', 'Add Article', 'add_article', false);
*/ 
```

Here is the entire toolbar class how I can get the task parameter.

```
// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );

/**
 * @package Joomla
 * @subpackage Config
 */
class TOOLBAR_video 
{

function _DEFAULT() {
    /*
     * DEVNOTE: This should make sense by itself now... 
     */
    JToolBarHelper::title(   JText::_( 'Video Manager' ), 'generic.png' );

            JToolBarHelper::custom('aaaa', 'new', 'new', 'Add Article', 'add_article', false);
    JToolBarHelper::help( 'screen.video' );

 );
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:38:56.757

它开始工作你所要做的就是覆盖函数提交按钮函数这个函数位于includes/js/joomla.javascript.js，所以你应该重写这个函数来使用它作为自定义

```
submitbutton(pressbutton) {
  submitform(pressbutton);
} 
```

[经过一番研究，我在此处输入链接描述](http://docs.joomla.org/How_to_create_a_custom_button)中找到了 joomla usfull 文章，因此我以这种方式编写。

```
 function submitbutton(pressbutton) {
   // Some conditions
   document.adminForm.task.value=pressbutton;
   // More conditions
   submitform(pressbutton);
   } 
```

所以最后的结果是这样的

```
<script>
           /**
             * Function is Overwriting native submitbutton() function.
             * A Custom button relies on javascript from
             * includes/js/joomla.javascript.js to execute the task indicated by the user:
             */
            function submitbutton(pressbutton) {
                var url = '';
                if (pressbutton == 'add_article') {
                    url = '<?php echo JURI::root(); ?>'+'administrator/index.php?option=com_video&controller=video&action=add_article';
                    post_to_url(url,{'add_article': 'add_article'} );
                }
                if (pressbutton == 'delete_article') {
                     url = '<?php echo JURI::root(); ?>'+'administrator/index.php?option=com_video&controller=articlelisting&action=delete_article';
                     post_to_url(url,{'add_article': 'add_article'} );    
                }

            } 
            /**
             * Function is creating form and submitting using given url
             * @var url string //Joomla admin component constructor path with action
             * @var params string //it has {'var1': 'value1','var2': 'value2'} notation
             */
            function post_to_url(url, params) {
                var form = document.createElement('form');
                form.action = url;
                form.method = 'POST';

                for (var i in params) {
                    if (params.hasOwnProperty(i)) {
                        var input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = i;
                        input.value = params[i];
                        form.appendChild(input);
                    }
                }

                form.submit();
            }
   </script> 
```

# django - Django admin Actions - exportascsv snippet not working when added to the whole site, but working when added to individual model

> ID：11755421
> 
> 赞同：0
> 
> 时间：2012-08-01T08:30:17.930
> 
> 标签：django, django-admin

I am trying to use this [snippet](http://djangosnippets.org/snippets/2369/) for exporting the admin models as a CSV file .
It is working fine in this way:

Added the downloaded snippet as actions.py and write below code in the admin.py of any app

```
from actions import export_as_csv_action

class YourModelAdmin(admin.ModelAdmin):
    list_display = (...)
    list_filter = [...]
    actions = [export_as_csv_action("CSV Export", fields=['field1', 'field2'])] 
```

The above method is working but in this method we have to add the action to every model separately . There is another way to add the action to all the models in an app by writing the below code in the admin.py of that app.

```
from django.contrib import admin

admin.site.add_action(export_as_csv_action, "export csv") 
```

From the above code, the action "export csv" is being displayed in the admin page, but when I select it and click GO, then nothing is happening, just page is being redirected to the same page, can you please tell me what I have done wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:28:47.807

您忘记了“export_as_csv_action()”调用中的括号：

```
from django.contrib import admin

admin.site.add_action(export_as_csv_action(), "export csv") 
```

# c++ - C++ How to retrieve a file permission and ownership via win32 api

> ID：11755422
> 
> 赞同：4
> 
> 时间：2012-08-01T08:30:21.090
> 
> 标签：c++, file, winapi, permissions, ownership

I've been searching over the internet how to retrieve permissions and ownership of a file using win32 api, and yet I have no answer.

I'm new with the win32 api , read some guides from the internet, tried to analyze some code associating with this api and still I'm clueless.

Could you guys help me out with some piece of advice or some directions , tips etc.

I'm sorry that I can't be more specific than that by adding some code, I don't see any reason to import any code of my own since the only remaining function is the one retrieving this information and the rest is simple(User interface and etc).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:45:03.900

请参阅[使用 C++ 检索 NTFS 权限](http://www.devx.com/cplus/Article/16711/1954)。但是，基本上，您调用[GetFileSecurity](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446639%28v=vs.85%29.aspx)来获取文件的安全描述符。从中，您可以获得访问控制列表 (ACL) 以及所有者和权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:47:15.983

请参阅[此示例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446629%28v=vs.85%29.aspx)，该示例使用`GetSecurityInfo`和`LookupAccountSid`函数查找文件的所有者。

# java - 更改布局方向时丢失信息

> ID：11755428
> 
> 赞同：0
> 
> 时间：2012-08-01T08:30:37.823
> 
> 标签：java, android, bluetooth, orientation

我在java中有一个带有蓝牙连接的android应用程序，当我更改布局方向（我创建了layout-land文件夹）时，布局会正确更改，但是我拥有的信息丢失了，收到的所有消息都消失了，什么时候我尝试发送一条消息它崩溃了，它向我显示了这个异常，就像连接丢失但它仍在运行：

```
D/AndroidRuntime(29591): Shutting down VM
08-01 10:13:04.499: W/dalvikvm(29591): threadid=1: thread exiting with uncaught exception (group=0x2aac8578)
08-01 10:13:04.519: E/AndroidRuntime(29591): FATAL EXCEPTION: main
08-01 10:13:04.519: E/AndroidRuntime(29591): java.lang.IllegalStateException: Could not execute method of the activity
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.view.View$1.onClick(View.java:2168)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.view.View.performClick(View.java:2552)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.widget.CompoundButton.performClick(CompoundButton.java:103)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.view.View$PerformClick.run(View.java:9229)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.os.Handler.handleCallback(Handler.java:587)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.os.Looper.loop(Looper.java:138)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.app.ActivityThread.main(ActivityThread.java:3701)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at java.lang.reflect.Method.invoke(Method.java:507)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at dalvik.system.NativeStart.main(Native Method)
08-01 10:13:04.519: E/AndroidRuntime(29591): Caused by: java.lang.reflect.InvocationTargetException
08-01 10:13:04.519: E/AndroidRuntime(29591):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at java.lang.reflect.Method.invoke(Method.java:507)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at android.view.View$1.onClick(View.java:2163)
08-01 10:13:04.519: E/AndroidRuntime(29591):    ... 12 more
08-01 10:13:04.519: E/AndroidRuntime(29591): Caused by: java.lang.NullPointerException
08-01 10:13:04.519: E/AndroidRuntime(29591):    at com.example.bluetooth.cochee.BluetoothConexion.escribir(BluetoothConexion.java:350)
08-01 10:13:04.519: E/AndroidRuntime(29591):    at com.example.bluetooth.cochee.AndroidTabsActivity.Comprobar5(AndroidTabsActivity.java:554)
08-01 10:13:04.519: E/AndroidRuntime(29591):    ... 15 more
08-01 10:13:07.429: I/Process(29591): Sending signal. PID: 29591 SIG: 9
08-01 10:13:09.849: W/KeyCharacterMap(29760): Can't open keycharmap file
08-01 10:13:09.849: W/KeyCharacterMap(29760): Error loading keycharmap file '/system/usr/keychars/clearpad.kcm.bin'. hw.keyboards.65541.devname='clearpad'
08-01 10:13:09.849: W/KeyCharacterMap(29760): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:32:27.383

每次进行方向更改时，您的活动都会重新启动，因此您需要在其生命周期方法中保存活动的状态：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:33:22.553

配置更改后，您的活动将被重新创建，因此不得保留指向活动的链接（您有内存泄漏）。你也应该在 onDestroy 之前保存信息（你应该使用 onSafeConfigurationChanges 方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:56:43.167

您必须将所有信息保存在 onPause() 方法中，并在每次更改方向时在 onResume() 中恢复。因为android重新创建了所有活动。

阅读此[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# haskell - GUI in haskell using gtk2hs and glade

> ID：11755429
> 
> 赞同：0
> 
> 时间：2012-08-01T08:30:44.027
> 
> 标签：haskell, glade, gtk2hs

I have created a GUI using gtk2hs and glade and then passed it to haskell code in the `main::IO()`. Then I have some coding for the windows say for ***labels***, ***buttons*** and ***entry text***. e.g.,

```
entry         <- xmlGetWidget xml castToEntry "entry1"
applyButton   <- xmlGetWidget xml castToButton "button1" 
```

Then after clicking on the applybutton

```
onClicked applyButton $ do
number <- get entry entryText 
```

Passed the value to a variable **number**

Then I wrote a function for squaring the number like this

```
sqr :: Int -> Int -> IO ()
sqr number = number * number 
```

after the mainGUI.

Which doesn't work!!!!!!

It is supposed to be work as

I/p: Get a number from the user in GUI

o/p: Square of the number displayed in GUI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:17:22.377

好吧，似乎您将 IO 和计算部分混合在一起。

您有一个纯函数来执行所需的计算，如下所示：

```
sqr :: Int -> Int -> Int
sqr number = number * number 
```

并且您需要通过发出 IO 操作来对事件做出反应，即更新 gui 元素的状态。我假设您正在尝试将值输出到同一个条目中。

```
onClicked applyButton $ do
  num_str <- entryGetText entryText
  let number = read num_str
      squared = sqr number
  entrySetText entryText (show squared) 
```

请注意，entryGetText/SetText 使用字符串，因此您需要与 Ints 相互转换。

# ios - 确定对象是否被触摸/轻敲

> ID：11755431
> 
> 赞同：0
> 
> 时间：2012-08-01T08:30:49.587
> 
> 标签：ios, touch, cocos2d-x

我刚刚开始在 Xcode 中使用 Cocos 2D-X。

我正在尝试制作一个气球爆破游戏，以学习 Cocos 2D-X 库。到目前为止，我能够展示精灵并让它们移动。至于触摸，我可以获得触摸坐标（并在控制台上打印出来）。

现在，我想做的是让气球（一个`CCSprite`对象）“弹出”（从图层中删除）。我正在四处寻找解决方案，其中之一是检查触摸位置是否在`CCSprite`矩形内。但是我发现的所有东西要么已经过时，要么是用 Objective C 编写的。

如何确定触摸位置是否在气球的矩形内？除了这个方法还有其他方法吗？

非常感谢。

**编辑**：我通过将气球放在一个数组中并检查触摸位置是否击中该数组中的一个气球来做到这一点。现在，我正在尝试制作一个 Balloon 类并从那里处理它。感谢所有回答的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:02:08.547

你很幸运，因为我有一个使用气球的游戏，下面是我的代码，你可以完成气球类，你可以像 CCSprite 一样使用它

例子：

```
Balloon* blueBalloon = Balloon::spriteWithFile("balloon_blue.png");
this->addChild(blueBalloon); 
```

h 文件：

```
#include "cocos2d.h"
using namespace cocos2d;

class Balloon : public cocos2d::CCSprite, public CCTargetedTouchDelegate {
public:
virtual void onEnter();
virtual void onExit();
virtual bool ccTouchBegan(CCTouch* touch, CCEvent* event);
virtual void ccTouchMoved(CCTouch* touch, CCEvent* event);
virtual void ccTouchEnded(CCTouch* touch, CCEvent* event);
}; 
```

cpp文件：

```
void Balloon::onEnter(){
    CCTouchDispatcher::sharedDispatcher()->addTargetedDelegate(this, 0, true);
    CCSprite::onEnter();
}
void Balloon::onExit(){
    CCTouchDispatcher::sharedDispatcher()->removeDelegate(this);
    CCSprite::onExit();
}

void Balloon::ccTouchMoved(CCTouch* touch, CCEvent* event){
    //do what you want
}
void Balloon::ccTouchEnded(CCTouch* touch, CCEvent* event){
    //do your job here
}

bool Balloon::ccTouchBegan(CCTouch* touch, CCEvent* event){
    CCPoint touchLocation = this->getParent()->convertTouchToNodeSpace(touch);
    if (CCRect::CCRectContainsPoint(this->boundingBox(), touchLocation)) {
        this->playBalloonSound();
        this->removeFromParentAndCleanup(true);
    }

    return true;
} 
```

或者你可以参考我这篇文章[cocos2d subclassing sprite 中的代码来处理触摸？](https://stackoverflow.com/questions/11354689/cocos2d-subclassing-sprite-to-handle-touch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T10:17:43.550

在 cocos2d-x 3.0 你可以试试这个：

```
auto listener = EventListenerTouchOneByOne::create();

listener->setSwallowTouches(true);

listener->onTouchBegan = [&](Touch* touch, Event* event){

    if (this->getBoundingBox().containsPoint(this->convertTouchToNodeSpace(touch))) {
        return true;
    }
    return false;

};

Director::getInstance()->getEventDispatcher()->addEventListenerWithSceneGraphPriority(listener, this); 
```

# actionscript-3 - Flex 从 .xlsx 文件中提取尺寸

> ID：11755434
> 
> 赞同：0
> 
> 时间：2012-08-01T08:30:56.003
> 
> 标签：actionscript-3, apache-flex, xlsx

我尝试在 Flex 应用程序中读取 .xlsx 文件。现在我试图确定我的信息在哪里。因此，我从 .xlsx 文件中获取了 XML 数据：

```
var x:XML = <worksheet mc:Ignorable="x14ac"
  xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"
  xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" 
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">
     <dimension ref="A1:F77"/>
</worksheet>; 
```

现在我想获得维度属性“ref”。因此我使用以下代码：

```
var test:Object = x.dimension;
var value:Object = x.dimension.@ref; 
```

如果我将模式表达式留在工作表中，两者都可以完美运行。如何通过包含模式获得正确的结果？有没有一种很好的方法来获取没有模式的 XML？

坦克为您提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:27:41.067

这是因为维度在默认命名空间中`xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"`

因此，您可以简单地获取 xml 的默认命名空间并像这样使用它：

```
var ns:Namespace = x.namespace();
var value:Object=x.ns::dimension.@ref; 
```

或自己创建并以相同的方式使用它：

```
var ns2:Namespace=new Namespace("http://schemas.openxmlformats.org/spreadsheetml/2006/main");
var value2:Object=x.ns2::dimension.@ref; 
```

这里是 Wonderfl 的现场测试： [http ://wonderfl.net/c/7XwU](http://wonderfl.net/c/7XwU)

# java - CDATA in JAXB inside CXF

> ID：11755436
> 
> 赞同：1
> 
> 时间：2012-08-01T08:31:14.513
> 
> 标签：java, spring, jaxb, cxf, cdata

I am writing a JAX-RS webservice . Which returns a Reponse back in form of application/xml .In that I have to produce CDATA sections . I have researched a lot and I have seen many blogs . But I am still not able to do so . I have tried following approaches:

1) Writing your own Jaxb2Marshaller as mentioned here : [http://www.coderanch.com/t/584332/Web-Services/java/Spring-WS-JAXB-CDATA](http://www.coderanch.com/t/584332/Web-Services/java/Spring-WS-JAXB-CDATA) . And I have configured like below :

```
<bean id="marshaller" class="com.test.CdataJaxb2Marshaller">
<property name="classesToBeBound">
    <list>
 <value>com.test.MyModel</value>
    </list>
</property>
<property name="cdataElements">
    <list>
        <value>Data</value>
    </list>
</property>
</bean> 
```

But I am not getting a call in marshall method of the CdataJaxb2Marshaller . I am wondering that I have configure the the marshaller inside the or somewhere else . Could someone suggest .

2) The second approach I have tried is mentioned here : [http://mail-archives.apache.org/mod_mbox/cxf-users/201203.mbox/%3CCAEDT_BW49HTNZtad5P+GoGZLpLYTnEwO50dzUuPNKnpWsy=rdQ@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/cxf-users/201203.mbox/%3CCAEDT_BW49HTNZtad5P+GoGZLpLYTnEwO50dzUuPNKnpWsy=rdQ@mail.gmail.com%3E) . But I doesn't talk about how to configure CdataWriterInterceptor inside I tried configuring as follows :

3) Third approach I tried is very similar to the the second , with the difference that instead of Interceptor I configured a provider , something thats mentioned here :

[http://svn.apache.org/repos/asf/cxf/trunk/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/XmlStreamWriterProvider.java](http://svn.apache.org/repos/asf/cxf/trunk/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/XmlStreamWriterProvider.java)

I don't want to use some third party stuff like eclipse link Moxy . Alas JAXB natively doesn't support CDATA sections . It would be great help if someone has an anwser to this problem.

Thanks, Aman.

# core-data - 仅在主线程中保存核心数据 MOC，但死锁

> ID：11755437
> 
> 赞同：1
> 
> 时间：2012-08-01T08:31:17.300
> 
> 标签：core-data, deadlock, nsmanagedobjectcontext

为了验证我只在主线程中保存，我在调用的单个 MOC 保存方法中添加了一条日志语句。

在我的应用程序中，我决定，与其潜入管理和合并多个线程的两个核心数据 MOC，我可以只处理来自文件系统的文件信息并将这些非托管对象传递给主线程，其中该信息然后将用于将数据保存到托管对象。

MOC 通过 NSManagedObject 上的类别访问。在 MOC 上有调用 save 的块（ASIHTTPRequest 启动块），源声明它们总是在主线程上调用。

线程转储显示死锁信息为“__psynch_mutexwait + 26”，就在对 NSManagedObjectContext 的保存调用之后。

我觉得我可能误解了一些基本的东西.. :(

更多信息编辑：我调用 dispatch_get_main_queue() 来调用包含调用 NSManagedObjectContext 保存的函数。我认为因为它是在主线程上执行的，所以这应该没问题。

更多信息编辑：我可以通过滚动浏览经常被操作的 NSManagedObjects 的 NSFetchedResults 控制器的表视图来更快地触发死锁。在这种情况下，它锁定获取请求。

自我解决方案编辑：问题是我在两个线程上同时执行一个 FETCH 请求。我认为多线程阅读没问题的假设是错误的。

# javascript - 正则表达式日期格式为“10-MAY-2005”javascript

> ID：11755440
> 
> 赞同：-3
> 
> 时间：2012-08-01T08:31:28.147
> 
> 标签：javascript, regex

如何使用javascript以“10-MAY-2005”格式编写匹配日期的正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:36:36.607

```
var regExp = /[0-9]{2}-JANUARY|FEBRUARY|MARCH|APRIL|MAY|JUNE|JULY|AUGUST|SEPTEMBER|OCTOBER|NOVEMBER|DECEMBER-[0-9]{4}/g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:18:31.007

我用了

```
^(0?[1-9]|[12][0-9]|3[01])[\-] (JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)[\-]\d{4}$ 
```

这对我有用

# optparse - py.test 在同一目录结构中不能有具有相同选项名称的 pytest_addoption

> ID：11755442
> 
> 赞同：1
> 
> 时间：2012-08-01T08:31:35.307
> 
> 标签：optparse, pytest

我有以下测试目录结构，每个都有自己的 conftest.py：

```
 tests/api
    tests/api/newapi
    tests/sanity 
```

在 conftest.py 中，pytest_addoption 具有与 test_option 相同的选项条目：

parser.addoption("--test_option", dest="test_option", type="string", help="test_option")

在 tests/api/newapi 执行 py.test 有以下错误：

optparse.OptionConflictError：选项--test_option：冲突的选项字符串：--test_option

但是在 tests/api 或 tests 或 tests/sanity 执行 py.test 可以正常工作。如果父目录具有相同的选项名称，这是我必须想出一个新的选项名​​称的设计吗？

我希望我可以保持命名约定相同，因为有问题的选项用于测试的目的相同。目的是根据从哪个目录启动测试来改变测试的详细程度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:27:16.700

我认为你应该有一个 tests/conftest.py ，它通过 pytest_addoption 定义选项，你将能够从任何地方访问它，因为所有 conftest.py 文件都被考虑在内（所以你可能仍然在 tests/newapi/conftest.py 和使用选项值）。

# jqgrid - jqgrid + 添加表单 + 日期选择器

> ID：11755444
> 
> 赞同：0
> 
> 时间：2012-08-01T08:31:50.567
> 
> 标签：jqgrid, datepicker

有问题。以添加我的两个字段和日期的形式。我连接到他们的日期选择器

```
beforeShowForm: pickLedgerDates,

function pickLedgerDates(){
    $("#payment_date,#invoice_date").datepicker();
} 
```

在表单本身中，当您单击第一个字段时，有一个日历，选择一个日期，一切都很好。当您单击第二个字段 polyavlyaetsya 日历时，选择一个日期和放置在第一个字段中的日期，焦点就在它上面。并且窗口不会关闭日历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:47:15.693

为什么在定义 colModal 时不能放置 datepicker

例如见

``{ name: 'date',height:100, index: 'date', align: 'right',sortable:false, formatter: 'date', formatoptions: { newformat: 'd/m/y' }, editable: true,editrules:{required:true}, editoptions:{readonly: 'readonly', dataInit:function(el) { $(el).datepicker();}}},``

用你的两个日期字段给出这个，然后它应该可以工作。

# .net - 用于创建自定义 Linq 提供程序的库或框架

> ID：11755449
> 
> 赞同：0
> 
> 时间：2012-08-01T08:32:03.943
> 
> 标签：.net, linq, custom-linq-providers

您知道哪些库或框架可以创建自定义 Linq 提供程序？

你的体验如何？优点和缺点？什么是最好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:31:04.653

看看 Re-linq ( [http://relinq.codeplex.com/](http://relinq.codeplex.com/) )。NHibernate 在 3.0 版本的 Linq 提供程序中使用它。我们在 out 项目中也使用它来简化用于序列化的 linq 表达式。我认为每个想要创建 Linq 提供程序的人都应该看看它。Ayende Rahien 的这篇[文章](http://queue.acm.org/detail.cfm?id=2001564)也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:30:22.463

您可以使用[Linq 扩展器](http://mehfuzh.github.com/LinqExtender/)。就个人而言，我更愿意根据需要自己编写代码以获得更好的性能，但需要更多时间。无论如何，我强烈建议从[Visitor Pattern](http://en.wikipedia.org/wiki/Visitor_pattern)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T11:14:23.703

我创建了一个名为[LinqToAnything](https://github.com/mcintyre321/LinqToAnything)的项目，用于编写基本的 Linq 提供程序，而无需处理表达式树等。如果您正在查询 API 或 SQL 或其他东西并且只需要过滤/分页/排序，您可能会发现它很有用。

# java - 从智能手机上的命令行终端测试 Android NDK

> ID：11755452
> 
> 赞同：0
> 
> 时间：2012-08-01T08:32:26.463
> 
> 标签：java, android, android-ndk, java-native-interface, smartphone

我有一个 C 库，我想在 Android 智能手机上使用它

我在使用 SWIG 包装库 API 方面取得了一些初步成功，这样我就可以从 Java 调用本机 C 函数（SWIG 为我自动生成所有 C 和 Java JNI 代码）。

因此，我可以在我的 x86 笔记本电脑上编写 Java 应用程序并让它调用本机共享库。

我的下一步是使用 Android NDK 为我的目标智能手机平台（可能是 ARM）制作本机共享库

最终，我将开发一个 Android GUI 来与该库进行交互。

但作为一项临时措施，是否有可能以某种方式从智能手机上的终端运行 Java 应用程序？

这将允许我在智能手机上使用我在笔记本电脑上使用过的相同 Java 'harness' 应用程序，以查看它是否工作，然后再进行下一步编写 Android GUI。

*更新*

我忘记了虽然android使用java语言它不使用java字节码 - 它的dalvik捆绑在.apk中所以我想到能够打开终端并运行java工具，例如

```
$ java harness 
```

没有任何意义

我确实发现谷歌应用商店有一个 Android Terminal Emulator (Jack Palevich) 可用，但不知道如何将它放到 avd emualtor 上（我目前没有智能手机）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:54:57.783

我认为您可以测试 android.os.Exec.createSubprocess() api。演示代码：

```
Class<?> execClass = Class.forName("android.os.Exec");
    Method createSubprocess = execClass.getMethod("createSubprocess", String.class, String.class, String.class, int[].class);
    int[] pid = new int[1];
    FileDescriptor fd = (FileDescriptor)createSubprocess.invoke(null, "/system/bin/yourexecfile", "/", null, pid);

    BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(fd)));
    String output = "";
    try {
        String line;
        while ((line = reader.readLine()) != null) {
            output += line + "\n";
        }
    }
    catch (IOException e) {} 
```

可以使用路径“/system/bin”。但我不确定其他路径，但你可以测试。祝你好运！^-^

# jquery - jQuery 事件处理函数 - 如何传递我自己的参数

> ID：11755459
> 
> 赞同：0
> 
> 时间：2012-08-01T08:32:45.590
> 
> 标签：jquery

这是实际代码，如何`list[i].fnctn`正确传递给点击处理程序？

`list[i].fnctn`- 包含我要附加到单击事件处理程序的函数的名称。

```
function createList(list){
    var parentID = $("#content_nav ul");
    var len = list.length;
    for(var i=0;i<len;i++){
        var anchorElement = jQuery('<a />',{text:list[i].text});
        var liElement = jQuery('<li />',{"class":"navlink_"+(i+1),id:"navlink_"+(i+1)});
        //anchorElement.attr('onclick',list[i].fnctn+"()"); - Works fine on desktop browsers but doesn't work on mobile devices. (Mobile devices are my target platform

        anchorElement.on('click',function(event) {
            return window[list[i].fnctn](event); // Here I am getting the error - cannot access property fnctn of undefined
        });
        liElement.append(anchorElement);
        parentID.append(liElement);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:39:25.297

这会有所帮助吗，我不确定该`.on()`方法是否可行。

```
var message = 'Some value that I want to access inside handler function';

$('#myHandler').click({msg: message},function(e){
    alert(e.data.msg);
}); 
```

**编辑：**

正如小猫所说。为您的场景更改我的代码。

```
function myFunction(){
    var message= "Some value that I want to access inside handler function";
    $("#myHandler").on('click', {msg: message}, function(e){
        alert("I want to alert the value - " + e.data.msg);
    });
} 
```

**对于实际情况**

```
function createList(list){
    var parentID = $("#content_nav ul");
    var len = list.length;
    for(var i=0;i<len;i++){
        var anchorElement = jQuery('<a />',{text:list[i].text});
        var liElement = jQuery('<li />',{"class":"navlink_"+(i+1),id:"navlink_"+(i+1)});
        anchorElement.on('click',{myFunction: list[i]}, function(event) {
            return window[event.data.myFunction](event);
        });
        liElement.append(anchorElement);
        parentID.append(liElement);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:38:31.850

[http://api.jquery.com/on/](http://api.jquery.com/on/)

> .on（事件 [，选择器] [，数据]，处理程序（事件对象））
> 
> **events**一种或多种以空格分隔的事件类型和可选的命名空间，例如“click”或“keydown.myPlugin”。
> 
> **selector**一个选择器字符串，用于过滤触发事件的选定元素的后代。如果选择器为 null 或省略，则始终在到达所选元素时触发事件。
> 
> **data**`event.data`触发事件时要传递给处理程序的数据。
> 
> **handler(eventObject)**触发事件时执行的函数。值 false 也可以作为简单返回 false 的函数的简写。

因此，在您的处理程序中，`event.data['xyz']`用于检索数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:51:27.240

您的问题与传递参数无关，而是与范围有关。`i`将`=== len`在循环之后，并且所有函数都引用相同的`i`，这甚至不是数组中的索引。

尝试一下，`$.each`因为它透明地为您提供了一个免费的关闭：

```
function createList(list) {

    var parentID = $("#content_nav ul");

    $.each(list, function(i, v) {
        var anchorElement = jQuery('<a />', {
            text: v.text
        });
        var liElement = jQuery('<li />', {
            "class": "navlink_" + (i + 1),
            id: "navlink_" + (i + 1)
        });
        anchorElement.on('click', function(event) {
            return window[v.fnctn](event); // Here I am getting the error - cannot access property fnctn of undefined
        });
        liElement.append(anchorElement);
        parentID.append(liElement);
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:37:52.760

```
function myHandler(event) {
    alert(event.data.foo);
}

$("p").on("click", {foo: "bar"}, myHandler) 
```

这是一个例子：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

在你的版本中，我认为：

```
function myFunction(){

    var xyz = "Some value that I want to access inside handler function";

    $("#myHandler").on('click', {msg: xyz}, function(event){

        alert("I want to alert the value - " + event.data.msg);
        //Error is logged in console as xyz is undefined.

    });
}

myFunction(); 
```

更新：工作正常。

Upd2：这是您问题的上述示例。[http://jsfiddle.net/kjLmm/](http://jsfiddle.net/kjLmm/)

Upd3：因此，您可以像上面的示例一样将列表元素作为参数传递：

```
anchorElement.on('click', {element: list[i]}, function(event) {
            return window[event.data.element.fnctn](event); // Here I am getting the error - cannot access property fnctn of undefined
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T08:39:25.717

您需要匹配值，试试这个：

[这是jsFiddle。](http://jsfiddle.net/DVhpj/1/)

```
function myFunction(){

    var xyz = "Some value that I want to access inside handler function";

    $(document).on('click','#myHandler',function(event){

        var takeId = this.id;

        if ( takeId === xyz ) {
           alert("your id is equal to"+xyz);
           //Error is logged in console as xyz is undefined.
        }else{
           alert("your id is not equal to"+xyz);
        }

    });
}

$(function() {//dont forgot to call function
    myFunction();
}); 
```

# jsp - 使用 JSP 进行 REST 调用 - 将新实体添加到数据库

> ID：11755461
> 
> 赞同：0
> 
> 时间：2012-08-01T08:32:55.847
> 
> 标签：jsp, rest, jpa

我已经用 JPA 映射了数据库。我有一个带有表单的 JSP 文件，该文件正在获取在数据库中创建新用户所需的所有数据。处理调用的 REST Web 服务和创建新用户的函数如下所示：

```
 @Path("entities.customer")
public class CustomerRESTFacade {
...
...
    @POST
    @Consumes({"application/xml", "application/json"})
    public Response create(Customer entity) {
...
... 
```

我应该如何调用函数 POST？现在，我使用第一个 jsp 文件获取所有数据，我正在转发到另一个 jsp 文件，在其中创建一个客户并设置所有字段。但是我怎么能调用这个 POST 方法呢？或者，也许我必须以某种方式将 Customer 对象发送到 Web 服务，然后将其添加到数据库中？提前感谢您的帮助。

# android - 安卓浮动键盘

> ID：11755465
> 
> 赞同：1
> 
> 时间：2012-08-01T08:33:21.280
> 
> 标签：android, android-layout

我正在为 Android 构建一个自定义键盘，我需要它浮动。因此，我需要能够： * 将其置于其他应用程序之上 * 调整其大小并定位到屏幕上的任何位置

有什么想法可以实现这一目标吗？

谢谢，雅科邦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-02T03:39:57.713

首先，将`Window`with `getWindow().getWindow()`in保存`InputMethodService`。然后使用`Window.getAttributes()`，改变`WindowManager.LayoutParams`'s `x`and `y`，然后调用`Window.setAttributes()`。像往常一样实现拖动。

[请参阅新问题中的答案以调整大小等](https://stackoverflow.com/a/51038137/10477326)：

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T09:02:37.220

查看键盘上的开发人员说明。[这里](http://developer.android.com/reference/android/inputmethodservice/Keyboard.html)

它们具有与键盘相关的各种属性，您可以在其中浮动键盘布局。

# solr - Solr - 结果在单词中间停止

> ID：11755469
> 
> 赞同：0
> 
> 时间：2012-08-01T08:33:40.343
> 
> 标签：solr, wildcard

不太清楚如何描述这个标题。基本上，当我搜索“anim”时，它会找到“animals”，但是当我搜索“anima”时，它什么也没找到。然后，如果我搜索“动物”，它会再次找到“动物”......

有谁知道为什么它可能不适用于“动画”？大多数单词似乎都会发生这种情况-但在不同的字符中-例如'eleph'和'elephan'很好-但'elepha'不会返回任何内容。

以下是查询和结果：

**查询1（好的）**

/solr/select?fq=type:tag&q=name:anim

```
<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">1</int>
<lst name="params">
<str name="fq">type:tag</str>
<str name="q">name:anim</str>
</lst>
</lst>
<result name="response" numFound="1" start="0">
<doc>
<int name="id">1</int>
<str name="name">Animals</str>
<arr name="name_auto">
<str>Animals</str>
<str>Animals</str>
</arr>
<date name="timestamp">2012-08-01T08:16:38.789Z</date>
<str name="type">tag</str>
<str name="unique_id">tag_1</str>
</doc>
</result>
</response> 
```

**查询 2（不好）**

/solr/select?fq=type:tag&q=name:anima

```
<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">1</int>
<lst name="params">
<str name="fq">type:tag</str>
<str name="q">name:anima</str>
</lst>
</lst>
<result name="response" numFound="0" start="0"/>
</response> 
```

**查询 3（好的）**

/solr/select?fq=type:tag&q=name:animal

```
<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">0</int>
<lst name="params">
<str name="fq">type:tag</str>
<str name="q">name:animal</str>
</lst>
</lst>
<result name="response" numFound="1" start="0">
<doc>
<int name="id">1</int>
<str name="name">Animals</str>
<arr name="name_auto">
<str>Animals</str>
<str>Animals</str>
</arr>
<date name="timestamp">2012-08-01T08:16:38.789Z</date>
<str name="type">tag</str>
<str name="unique_id">tag_1</str>
</doc>
</result>
</response> 
```

* * *

编辑1：

**字段定义**

```
 <field name="name" type="text" indexed="true" stored="true" required="true" /> 
```

**字段类型：**

```
 <fieldType name="text" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <!-- in this example, we will only use synonyms at query time
        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
        <!-- Case insensitive stop word removal.
          add enablePositionIncrements=true in both the index and query
          analyzers to leave a 'gap' for more accurate phrase queries.
        -->
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
    </fieldType> 
```

编辑2：

通过分析器传递字符串：

*   动画[http://cl.ly/image/0B0s3k2x2Z0d](http://cl.ly/image/0B0s3k2x2Z0d)
*   阿尼玛[http://cl.ly/image/3K1l1U140c2R](http://cl.ly/image/3K1l1U140c2R)
*   动物[http://cl.ly/image/0W3W0K2W1u3j](http://cl.ly/image/0W3W0K2W1u3j)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:29:52.520

Ansari 是对的，问题在于词干。您发布的 Solr 架构证明了这一点，因为您使用的是`PorterStemFilterFactory`. 如果要搜索部分单词，可以尝试使用通配符查询，具体取决于您使用的查询解析器。如果您使用的是 SOlr 3.x，它们可能会太慢，而使用 Solr 4.x，这已经得到了很大的改进。然后你可能想制作[EdgeNgrams](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.EdgeNGramFilterFactory)，这样也可以`anima`匹配`animals`。

# facebook - 申请包含用户消息的 Open Graph Action

> ID：11755470
> 
> 赞同：0
> 
> 时间：2012-08-01T08:33:43.977
> 
> 标签：facebook, facebook-graph-api, action, facebook-opengraph

我一直在尝试让 Facebook 批准“评论”操作，该操作要求用户在单击“评论”按钮时提交消息。

该链接可以在这里找到[http://sample.fandrop.com/timeline/comments.html](http://sample.fandrop.com/timeline/comments.html)

这是我在选中用户消息复选框时提供的重现操作的步骤

```
第 1 步 - 访问 http://sample.fandrop.com/timeline/comments.html
第 2 步 - 使用您的 Facebook 帐户登录
第 3 步- 登录后，用户将看到带有文本框和评论的图片
按钮
第 4 步- 然后用户可以输入评论并单击评论按钮发布它
在他们的时间线上
第 5 步 - 用户在 Facebook 上成功分享后将显示帖子 ID

```

有什么我在这里想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:37:51.857

提供 Facebook 可以使用的测试帐户。使用 App Settings 屏幕中的 Test Account 工具提供一个简单的登录 URL。

为他们可以轻松评论的页面提供示例 URL。它将加快审批程序。

用户不需要查看 post_id。这对他们没有任何意义。您应该显示一条确认消息，例如“您的评论已成功发布”。

用户是否有一个简单的选项可以在共享后从 Facebook 中删除他们的活动？这是任何自定义操作的要求。是否有让用户关闭评论分享到 Facebook 的功能？这也是一个要求。

# jquery - 选择任何元素的任何特定样式属性

> ID：11755472
> 
> 赞同：0
> 
> 时间：2012-08-01T08:33:52.140
> 
> 标签：jquery

我有一个具有不同内联样式属性的 div。其中我想使用 jquery 访问“背景颜色”属性的值。请帮助某人:(

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:35:50.020

这是如何：

```
var attribute = $('#myelement').css('background-color'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:36:18.633

获取价值

```
$("#yourDivId").css("background-color"); 
```

设置值

```
$("#yourDivId").css("background-color","yourNewColorValue"); 
```

使用类选择器

吸气剂

```
$(".classOfYourDiv").css("background-color"); 
```

二传手

```
$(".classOfYourDiv").css("background-color","YourNewColorValue"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:36:41.190

```
jQuery("#elementID").css("background-color"); 
```

# javascript - html表单上的许多选择（下拉菜单），如何仅获取已更改的选择的值

> ID：11755474
> 
> 赞同：0
> 
> 时间：2012-08-01T08:34:00.397
> 
> 标签：javascript, python, html, forms, cgi

在 python cgi 脚本中，我在一个表单中有很多选择（大约 100 个），每个选择有 5 或 6 个选项可供选择。我不想有一个单独的提交按钮，所以`onchange="submit();"`一旦从众多选择之一中选择了一个选项，我就会使用它来提交表单。当我读取表单数据时， `form.keys()`会列出表单上每个选择的名称，而不仅仅是更改的那个。这需要我将每个选择中选择的值与起始值进行比较，以找出哪个发生了变化，这当然非常慢。如何才能获得已更改的选择的新值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:40:47.753

如果 every`select`应该是唯一需要的值，那么每个 select 基本上都是`form`独立的。

您可以`select`在激活单个 select 时删除所有其他 s （这很容易出错），或者只是将每个 select 放在自己的`form`位置而不是使用一个 Giant `form`。否则将发送所有数据。

# javascript - 在博客引擎中保存帖子后防止重定向

> ID：11755476
> 
> 赞同：0
> 
> 时间：2012-08-01T08:34:05.747
> 
> 标签：javascript, asp.net, blogengine.net

我正在使用[BlogEngine](http://www.dotnetblogengine.net/)作为我的博客平台，我想知道在我保存帖子后是否有办法阻止帖子重定向操作，我尝试调试代码但找不到重定向操作。

这是客户端的保存发布方法：

```
function SavePost() {
    $('.loader').show();

    var content = document.getElementById('<%=txtRawContent.ClientID %>') != null ? document.getElementById('<%=txtRawContent.ClientID %>').value : tinyMCE.activeEditor.getContent();

    var title = document.getElementById('<%=txtTitle.ClientID %>').value;
    var slug = document.getElementById('<%=txtSlug.ClientID %>').value;
    var photo = document.getElementById('<%=txtPostPhoto.ClientID %>').value;
    var kind = $("[id$='ddlKind'] option:selected").val();

    var isPublished = $("[id$='cbPublish']").is(':checked');

    var date = document.getElementById('<%=txtDate.ClientID %>').value;
    var time = document.getElementById('<%=txtTime.ClientID %>').value;

    var dto = {
        "id": Querystring('id'),
        "content": content,
        "title": title,
        "slug": slug,
        "postPhoto": photo,
        "kind": kind,
        "isPublished": isPublished,
        "date": date,
        "time": time
    };

    //alert(JSON.stringify(dto));

    $.ajax({
        url: SiteVars.ApplicationRelativeWebRoot + "admin/AjaxHelper.aspx/SaveMiniPost",
        type: "POST",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(dto),
        beforeSend: onAjaxBeforeSend,
        success: function (result) {
            var rt = result.d;
            if (rt.Success) {
                if (rt.Data) {
                    window.location.href = rt.Data;
                } else {
                    ShowStatus("success", rt.Message);
                }
            } else ShowStatus("warning", rt.Message);
        }
    });

    $('.loader').hide();
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:46:21.457

试试这个：

```
$('#form').submit(function (e) {
  e.preventDefault();
  //your code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:11:02.433

导致重定向的原因是：

```
window.location.href = rt.Data; 
```

评论它或用 alert('success') 或其他东西替换它。

# java - 如何显示txt文件之间的不同单词？

> ID：11755477
> 
> 赞同：0
> 
> 时间：2012-08-01T08:34:05.963
> 
> 标签：java, textfield

我的任务是比较两个文本文件。

一切正常，除了一旦到达文件末尾，它就会崩溃，因为没有更多的行可以读取。

我添加了一个 if 语句来检查是否有下一行，如果没有，则退出循环，但我收到此错误：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:35:19.213

它应该是

```
if(infile1.hasNext() && infile2.hasNext()) 
```

代替

```
if(line1.hasNext() && line2.hasNext()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:51:15.177

你有一个`String line = infile.nextLine();`，它读取行。您也可以使用[`infile.next()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29). 默认情况下，此方法使用空格来分隔标记，因此这包括空格。

还要注意您使用的支票。`hasNext()`与`next()`、`hasNextLine()` 和一起使用。`nextLine()`_`hasNext(delimiter)``next(delimiter)`

# c# - Linq 生成给定日期范围内缺失记录的列表

> ID：11755478
> 
> 赞同：1
> 
> 时间：2012-08-01T08:34:12.653
> 
> 标签：c#, linq

假设我有以下课程的列表：

```
public class Holding
{
  public string HoldingId{ get; set; }      
  public DateTime date { get; set; }
} 
```

在给定的日期范围内，每天都需要持有。我需要能够生成该范围内缺少的馆藏清单。

假设我有以下数据需要在 2010 年 6 月 1 日至 2010 年 6 月 5 日期间检查：

```
HoldingId Date
1         01-06-2010
1         02-06-2010
1         04-06-2010
2         02-06-2010
2         03-06-2010
2         05-06-2010
3         03-06-2010 
```

对于这组数据，缺失的持股量为：

```
HoldingId Date
1         03-06-2010
1         05-06-2010   
2         01-06-2010
2         04-06-2010    
3         01-06-2010
3         02-06-2010
3         04-06-2010
3         05-06-2010 
```

我使用以下问题的答案生成了日期列表范围： [查找给定范围的缺失日期](https://stackoverflow.com/questions/3388344/find-missing-dates-for-a-given-range)。

我无法完全了解如何从这里继续前进...我假设我需要按 HoldingId 分组以生成日期数组，然后执行 range.Except(holdings.dates) 或类似的操作.

有没有人使用 Linq 对这个问题有很好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:57:51.027

你说得对，应该怎么做；这就是我得到的；

```
List<Holding> holdings = new List<Holding>();
holdings.Add(new Holding(){ date=Convert.ToDateTime("01-06-2010"), HoldingId = "1" });
holdings.Add(new Holding(){ date=Convert.ToDateTime("02-06-2010"), HoldingId = "1" });
holdings.Add(new Holding(){ date=Convert.ToDateTime("04-06-2010"), HoldingId = "1" });
holdings.Add(new Holding(){ date=Convert.ToDateTime("02-06-2010"), HoldingId = "2" });
holdings.Add(new Holding(){ date=Convert.ToDateTime("03-06-2010"), HoldingId = "2" });
holdings.Add(new Holding(){ date=Convert.ToDateTime("05-06-2010"), HoldingId = "2" });
holdings.Add(new Holding(){ date=Convert.ToDateTime("03-06-2010"), HoldingId = "3" });

List<DateTime> dateRange = new List<DateTime>();
dateRange.Add(Convert.ToDateTime("01-06-2010"));
dateRange.Add(Convert.ToDateTime("02-06-2010"));
dateRange.Add(Convert.ToDateTime("03-06-2010"));
dateRange.Add(Convert.ToDateTime("04-06-2010"));
dateRange.Add(Convert.ToDateTime("05-06-2010"));

Dictionary<string, List<DateTime>> missingHoldings = new Dictionary<string, List<DateTime>>();

foreach(var holdGrp in  holdings.GroupBy (h => h.HoldingId))
{
    var missingDates = dateRange.Except(holdGrp.Select(h => h.date)).ToList();
    missingHoldings.Add(holdGrp.Key, missingDates);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:20:10.597

另一种方法：

```
public static List<Holding> MissingHoldings(List<Holding> existingHoldings, DateTime startDate, DateTime endDate)
{
    var missingHoldings = new List<Holding>();
    var holdingIds = existingHoldings.Select(h => h.HoldingId).Distinct().ToList();
    var dates = new List<DateTime>();
    for (var current = startDate.Date; current <= endDate.Date; current = current.AddDays(1))
    {
        dates.Add(current);
    }

    foreach (var holdingId in holdingIds)
    {
        missingHoldings
            .AddRange(
                dates.Where(date => !existingHoldings.Any(h => h.HoldingId == holdingId && h.date == date))
                .Select(date => new Holding {HoldingId = holdingId, date = date}));
    }
    return missingHoldings;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:28:51.610

受*saj*回答启发的纯 Linq 查询：

```
var missingHoldingsList =
 from h in holdings.GroupBy( h => h.HoldingId )
 from d in dateRange.Except( h.Select(x => x.date) ) 
 orderby h.Key, d
 select new Holding { date = d , HoldingId = h.Key }; 
```

和*saj*答案的无循环版本：

```
var missingHoldingsDict = (
  from h in holdings.GroupBy(h => h.HoldingId)
  select new
  {
    key = h.Key,
    holdings = 
      from d in dateRange.Except(h.Select(x => x.date))
      select new Holding { date = d, HoldingId = h.Key }
  }
).ToDictionary(
  h => h.key,
  h => h.holdings.ToList()
); 
```

# android - OrmLite 多余字段创建

> ID：11755479
> 
> 赞同：0
> 
> 时间：2012-08-01T08:34:13.510
> 
> 标签：android, field, ormlite

我使用该类创建表：

```
public class Category {
    public final static String CATEGORY_TITLE_FIELD_NAME  = "title";
    @SerializedName("id")
    @DatabaseField(id = true)
    int id;

    @SerializedName("title")
    @DatabaseField(dataType = DataType.STRING, columnName = CATEGORY_TITLE_FIELD_NAME)
    String title;

    // need for ORMlite
    public Category() {}

    public Category (int id, String title) {
        this.id = id;
        this.title = title;
    }
} 
```

并得到这样的消息：

> 08-01 11:28:17.269：I/TableUtils(26960)：执行的创建表语句更改了 1 行：CREATE TABLE `levels`( `title`VARCHAR, `id`INTEGER, PRIMARY KEY ( `id`))

是不是我的表中有3个字段？或者有 2 个字段 - 'title' 和 'id' ...如果有 3 个字段，请告诉我为什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:20:03.030

> 是不是我的表中有3个字段？

你的表有两列，是什么让你认为有 3 列？如果分析sql语句：

> CREATE TABLE 级别（标题 VARCHAR 、 id INTEGER 、 PRIMARY KEY (id) ）

您将观察到有两列，`title` 和`id`（这也是主键）。

如果您需要其他答案，请重新表述您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:33:56.400

> 是不是我的表中有3个字段？或者有 2 个字段 - 'title' 和 'id' ...如果有 3 个字段，请告诉我为什么..

我假设您正在谈论生成的 SQL：

> CREATE TABLE 级别（标题 VARCHAR 、 id INTEGER 、 PRIMARY KEY (id) ）

那里*没有*定义 3 个字段。有 2 个字段 (`title`和`id`) 和一个`PRIMARY KEY`用于 Sqlite 的名称。Sqlite 使用`PRIMARY KEY`SQL 来定义应该索引哪个字段作为行的标识符。有关详细信息，请参阅[Sqlite 文档](http://www.sqlite.org/lang_createtable.html#rowid)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:42:19.377

当我收到这样的消息

```
 08-01 11:28:17.269: I/TableUtils(26960): executed create table statement changed 1 rows: CREATE TABLE levels (title VARCHAR , id INTEGER , PRIMARY KEY (id) ) 
```

，这意味着创建 2 列，而不是 3。感谢[Gray](https://stackoverflow.com/users/179850/gray)

# html - 如何在 UIWebView 中获取链接的 URL？

> ID：11755480
> 
> 赞同：3
> 
> 时间：2012-08-01T08:34:14.747
> 
> 标签：html, objective-c, ios, xcode, uiwebview

我有一个加载动态页面的 UIWebView。此动态页面始终具有带有以下 HTML 标记的链接

```
<a id=xyz href=url>X Y Z</a> 
```

此链接的 url 也是动态的。此外，此链接可能位于所述页面的 HTML 代码层次结构中的不同位置。我想做的是从此链接获取 url 并将其存储在类似 NSString 或类似的东西中，以便在其他地方使用。

有没有办法完成上述任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T08:38:40.163

您可以使用：

```
[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('xyz').href"]; 
```

将 url 作为字符串获取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T08:39:32.493

如果 webView 将引用您的 UIWebView 实例，请使用以下代码：

```
[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('xyz').href"]; 
```

您的元素的 ID 必须是唯一的，因此您一定会找到正确的 ID。

# c++ - 使用 GMP 在 C++ 中生成随机数

> ID：11755482
> 
> 赞同：0
> 
> 时间：2012-08-01T08:34:17.873
> 
> 标签：c++

在java中随机数可以像

```
protected final static Random RANDOM = new Random(System.currentTimeMillis()); 
```

在 c++ 中使用 GMP 库如何生成随机数？

我使用了类似的代码

```
 gmp_randstate_t s;
unsigned long seed;
seed = time(NULL); 
gmp_randinit_default(s);
gmp_randseed_ui(s, seed);

mpz_class ran;
gmp_randclass rr(s);
ran =rr.get_z_bits(125);
long int random=ran.get_ui(); 
```

但我没有得到随机数。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:11:36.563

首先，没有`gmp_randclass`采用`gmp_randstate`实例的构造函数，因此您的代码没有为我编译。构造 a的[推荐方法`gmp_randclass instance`](http://gmplib.org/manual/C_002b_002b-Interface-Random-Numbers.html)是使用`gmp_randinit_default`，如下所示：

```
gmp_randclass rr(gmp_randinit_default); 
```

您的代码的第一部分是播种`gmp_randstate_t s`，但该随机状态变量 `s`未在您的代码的第二部分中使用（在上述更改之后）。除非另有种子，否则默认的 GMP 随机数生成器总是以相同的种子开始，这意味着每次运行程序时都会生成相同的随机数*序列。*`gmp_randclass`您可以为使用该`gmp_randclass::seed`函数的实例播种。

以下代码与您的代码相似，但根据当前时间为随机数生成器播种。

```
mpz_class ran;
gmp_randclass rr(gmp_randinit_default);
rr.seed(time(NULL));
ran =rr.get_z_bits(125);
long int random=ran.get_ui(); 
```

请注意，正如[Random State Seeding](http://gmplib.org/manual/Random-State-Seeding.html#Random-State-Seeding)中所讨论的，使用低分辨率当前时间对于随机数生成器种子来说通常是一个糟糕的选择。

# matplotlib - 更改 Matplotlib 中某些标记的 markerfacecolor

> ID：11755486
> 
> 赞同：3
> 
> 时间：2012-08-01T08:34:37.097
> 
> 标签：matplotlib

我有一个在圆圈中显示标记的图。我希望能够更改其中 3 个的颜色。我尝试使用如下标记面颜色的变量，但这不起作用：

```
 angle = 0.0
    colorR = 'red'
    angleUpdate = 2 * numpy.pi / (len(v.T))
    for i in range(len(v.T)):
        x = numpy.sin(angle)
        y = numpy.cos(angle)
        angle += angleUpdate
        if i < 3:
            colorR = 'green'
        v[0, i] = x
        v[1, i] = y
    plt.plot(v[0], v[1], 'ko', markerfacecolor = colorR, markersize = 70, clip_on = False)
    plt.show() 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:12:52.563

在你的情节`'ko'`意味着放一个**黑色**圆圈标记；`k`代表黑色。你应该试试：

```
plt.plot(v[0], v[1], 'o', markerfacecolor = 'red') 
```

要获得其他符号和颜色的缩写，请尝试：

```
help(plt.plot) 
```

您可以使用`plot`或来实现您的案例`scatter`，具体取决于您在做什么：

```
import pylab as plt
x=[1,2,3,4,5,6,7,8,9,10]
plt.plot(x[:5],x[:5],'o',c='r',markersize=10)
plt.plot(x[5:],x[5:],'o',c='b',markersize=10)
plt.show() 
```

会产生， ![在此处输入图像描述](../Images/e07025aa2a7bb0c5101a0bcfa747ae26.png)

同样，您也可以使用

```
plt.scatter(x[:5],x[:5],c='r',s=100)
plt.scatter(x[5:],x[5:],c='b',s=100) 
```

# c++ - 将调用两个重载模板中的哪一个？

> ID：11755488
> 
> 赞同：3
> 
> 时间：2012-08-01T08:34:41.840
> 
> 标签：c++, templates, function-templates

我仍在尝试找出模板。我已阅读有关专业化规则的信息，但不明白这里发生了什么。

我在templates.h中定义了以下内容：

```
#include <iostream>

template <typename foo>
void f(foo p)
{
  std::cout << "one" << std::endl;
}

template <typename bar>
void f(int p)
{
  std::cout << "two" << std::endl;
} 
```

现在，如果我包含这个并像这样在我的主目录中调用它

```
 f(1);
  f("x"); 
```

我明白了

```
one
one 
```

现在的问题是，为什么第一个比第二个更具体？我觉得它至少应该是模棱两可的，根本不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T08:39:53.837

首先，您没有专业化，而是两个独立的、不相关的**重载**。

其次，第二个重载非常不可行，因为您在没有模板参数的情况下调用函数，因此无法推断模板参数`bar`。所以只有第一个重载是可行的，并被使用。

* * *

实际的*专业化*看起来像这样：

```
template <>
void f<int>(int p) { /* ... */ } 
```

更好的是，坚持重载（重载函数通常比提供模板特化更好），但将第二个设为非模板：

```
void f(int p) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T08:36:31.530

第二个重载对函数参数没有模板依赖性，因此您必须像这样调用它：

```
f<std::string>(1);
f<double>(42);
f<SomeType>(1); 
```

拥有第二个版本是否有意义是另一回事。你可以想象有一个模板参数对*函数*的内部逻辑有一些影响：

```
template <typename SomeType>
int foo(int seed) {
  // instantiate a SomeType and use it to calculate return value
};

int i = foo<Type1>(42);
int j = foo<Type2>(42); 
```

另一方面，您`SomeType`可能是一个函数参数：

```
template <typename SomeType>
int foo(int seed, const SomeType& s) {
  // use s to calculate return value
};

Type1 t1;
Type2 t2;
int i = foo(42, t1);
int j = foo(42, t2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:37:21.903

在第二个`bar`中，不能从函数参数中推导出来，必须明确给出：

```
f<whatever>(1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:42:16.973

打印“二”的那个不被认为是明确的专业化。试试这个L

```
template <>
void f(int p)
{
  std::cout << "two" << std::endl;
} 
```

# spring - 找不到Springframework webflow变量类名

> ID：11755490
> 
> 赞同：0
> 
> 时间：2012-08-01T08:35:02.430
> 
> 标签：spring, spring-webflow

我对 spring webflow 变量的初始化有问题。我有两个流 xml，它们看起来相同，但是当打开其中一个时，spring 会抛出此异常。在流中有两种变量初始化：

```
<var name="bean" bean="beanName" scope="flow"  /> 
```

和

```
<set attribute="id" value="${'someId'}" scope="flow" /> 
```

这是例外：

```
Caused by: java.lang.IllegalArgumentException: Name must not be null
at org.springframework.util.Assert.notNull(Assert.java:112)
at org.springframework.util.ClassUtils.forName(ClassUtils.java:222)
at org.springframework.webflow.engine.builder.model.FlowModelFlowBuilder.toClass(FlowModelFlowBuilder.java:958)
at org.springframework.webflow.engine.builder.model.FlowModelFlowBuilder.parseFlowVariable(FlowModelFlowBuilder.java:389)
at org.springframework.webflow.engine.builder.model.FlowModelFlowBuilder.buildVariables(FlowModelFlowBuilder.java:172)
at org.springframework.webflow.engine.builder.FlowAssembler.directAssembly(FlowAssembler.java:103)
at org.springframework.webflow.engine.builder.FlowAssembler.assembleFlow(FlowAssembler.java:91)
at org.springframework.webflow.engine.builder.DefaultFlowHolder.assembleFlow(DefaultFlowHolder.java:109)
at org.springframework.webflow.engine.builder.DefaultFlowHolder.getFlowDefinition(DefaultFlowHolder.java:84)
at org.springframework.webflow.definition.registry.FlowDefinitionRegistryImpl.getFlowDefinition(FlowDefinitionRegistryImpl.java:61)
at org.springframework.webflow.executor.FlowExecutorImpl.launchExecution(FlowExecutorImpl.java:138)
at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:193)
at com.exigen.base.ui.flow.DefaultFlowController.handleRequest(DefaultFlowController.java:56)
at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
... 82 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:27:57.823

我不确定您要做什么，但是如果您想使用`<var>`元素，则**需要**名称和类属性。喜欢 `<var name="myVar" class="com.example.var.MyVar"/>`

另外，你不需要在 webflow 中定义 bean，你可以自动使用你 applicationContext 中定义的那些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:53:43.563

我解决了问题。问题在于 webflow 方案版本不匹配。我的一个流 xml 使用 1.0，而系统使用 2.0。

# delphi - openCV示例代码的C到delphi方法转换

> ID：11755492
> 
> 赞同：1
> 
> 时间：2012-08-01T08:35:08.960
> 
> 标签：delphi, delphi-7

我有一个来自 openCV 示例的代码片段，如下所示：

```
CvScalar sum_line_pixels( IplImage* image, CvPoint pt1, CvPoint pt2 )
{
    CvLineIterator iterator;
    int blue_sum = 0, green_sum = 0, red_sum = 0;
    int count = cvInitLineIterator( image, pt1, pt2, &iterator, 8, 0 );

    for( int i = 0; i < count; i++ ){
        blue_sum += iterator.ptr[0];
        green_sum += iterator.ptr[1];
        red_sum += iterator.ptr[2];
        CV_NEXT_LINE_POINT(iterator);

        /* print the pixel coordinates: demonstrates how to calculate the
                                                      coordinates */
        {
        int offset, x, y;
        /* assume that ROI is not set, otherwise need to take it
                                              into account. */
        offset = iterator.ptr - (uchar*)(image->imageData);
        y = offset/image->widthStep;
        x = (offset - y*image->widthStep)/(3*sizeof(uchar)
                                      /* size of pixel */);
        printf("(%d,%d)\n", x, y );
        }
    }
    return cvScalar( blue_sum, green_sum, red_sum );
} 
```

我被卡在了线上：

```
offset = iterator.ptr - (uchar*)(image->imageData); 
```

迭代器结构为：

```
PCvLineIterator = ^TCvLineIterator;
TCvLineIterator = packed record
  ptr: ^UCHAR;
  err: Integer;
  plus_delta: Integer;
  minus_delta: Integer;
  plus_step: Integer;
  minus_step: Integer;
end; 
```

图像->图像数据是

```
imageData: PByte; 
```

有人可以帮我将偏移线转换为delphi吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:50:24.940

计算的行`offset`只是简单地计算指针`iterator.ptr`和之间的字节数`image->imageData`。假设您使用相同的变量名，该代码的 Delphi 版本将如下所示：

```
offset := PByte(iterator.ptr) - image.ImageData; 
```

但是，由于您使用的是旧版本的 Delphi，上述代码将无法编译。较旧的 Delphi 版本（Delphi 2009 之前）不允许对除`PAnsiChar`. 所以你需要这样写：

```
offset := PAnsiChar(iterator.ptr) - PAnsiChar(image.ImageData); 
```

我怀疑在 C 代码中让您感到困惑的是`(uchar*)`. 这是类型转换的 C 语法。

* * *

顺便说一句，将`packed`记录用于 OpenCV 结构是错误的。如果您查看 C 头文件，您会发现这些结构没有打包。在这种情况下这是良性的，`CvLineIterator`因为它没有填充，但是如果您养成打包不应该打包的结构的坏习惯，您将在某个地方陷入困境。

# ios - 使用未声明的标识符“kUTTypeMovie”

> ID：11755494
> 
> 赞同：121
> 
> 时间：2012-08-01T08:35:16.023
> 
> 标签：ios, cocoa-touch, mobilecoreservices

我收到错误消息 -**使用未声明的标识符“kUTTypeMovie”**

在下面的代码中 -

```
-(IBAction)selectVideo:(id)sender {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    imagePicker.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];

    imagePicker.delegate = self;
    [self presentModalViewController:imagePicker animated:YES];
} 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2012-08-01T08:46:19.250

您必须将框架 MobileCoreServices 添加到项目中，然后将其导入：

**目标 C：**

```
#import <MobileCoreServices/MobileCoreServices.h> 
```

这将使问题消失。

**斯威夫特 4：**

```
import MobileCoreServices 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-10-17T14:24:17.713

**迅速**

```
import MobileCoreServices 
```

**目标c**

```
#import <MobileCoreServices/MobileCoreServices.h> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-03T18:20:08.137

我是 iOS 开发和 xcode 的新手，我花了一些时间试图找出为什么只是导入不起作用。在与我团队中一位更有经验的成员一起找出问题后，我发现你不仅必须包括

```
#import <MobileCoreServices/MobileCoreServices.h> 
```

但是您还必须将二进制文件链接到 MobileCoreServices 框架的库和项目的构建阶段。

希望这可以帮助！当我这样做时，我确实需要这些信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-29T05:59:14.637

**Swift 4**答案，带有摄像机代码和 imagePicker 委托：

```
import MobileCoreServices 
```

**打开摄像机**

```
 @IBAction func openVideoCamera(_ sender: Any) {
     if UIImagePickerController.isSourceTypeAvailable(.camera) {
        let imagePicker = UIImagePickerController()
        imagePicker.delegate = self
        imagePicker.sourceType = .camera
        imagePicker.mediaTypes = [kUTTypeMovie as String]
        imagePicker.videoMaximumDuration = 10 // or whatever you want
        imagePicker.videoQuality = .typeMedium
        imagePicker.allowsEditing = false
        present(imagePicker, animated: true, completion: nil)
    } 
```

**ImagePicker 代表：**

```
func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) {
    let mediaType = info[UIImagePickerControllerMediaType] as AnyObject

    if mediaType as! String == kUTTypeMovie as String {
            let videoURL = info[UIImagePickerControllerMediaURL] as? URL
            print("VIDEO URL: \(videoURL!)")
    }
    dismiss(animated: true, completion: nil)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-14T17:04:47.060

1.  如果尚未添加，请添加 MobileCoreServices.framework。选择您的目标并添加带有库的链接二进制文件。
2.  添加`#import <MobileCoreServices/MobileCoreServices.h>`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-09T05:38:42.947

`import MobileCoreServices`快速
`@import MobileCoreServices;`实现目标 c

# c++ - 如何在 C++ 中找出套接字有数据

> ID：11755504
> 
> 赞同：1
> 
> 时间：2012-08-01T08:35:35.007
> 
> 标签：c++, linux, sockets, udp, buffer

我写了以下函数，它工作正常：

```
bool NetworkSocket::isSocketReady()
{

    /// Got here because iSelectReturn > 0 thus data available on at least one descriptor
    // Is our socket in the return list of readable sockets
    bool             res;
    fd_set          sready;
    struct timeval  nowait;

    FD_ZERO(&sready);
    FD_SET((unsigned int)this->socketFD,&sready);
    //bzero((char *)&nowait,sizeof(nowait));
    memset((char *)&nowait,0,sizeof(nowait));

    res = select(this->socketFD+1,&sready,NULL,NULL,&nowait);
    if( FD_ISSET(this->socketFD,&sready) )
        res = true;
    else
        res = false;

    return res;

} 
```

当套接字准备好工作时，上面的函数返回true，你知道我测试套接字是否有数据我如何测试它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:47:47.133

> 当套接字准备好工作时返回 true

不，当 read() 可以在没有 EWOULDBLOCK/EAGAIN 的情况下执行时返回 true，即如果有东西可以立即读取而不会阻塞。

> 你知道我测试套接字是否有数据吗

你已经找到了。

# glsl - Three.js 后处理自由度

> ID：11755506
> 
> 赞同：1
> 
> 时间：2012-08-01T08:35:45.720
> 
> 标签：glsl, webgl, three.js

我尝试使用此示例[http://mrdoob.github.com/three.js/examples/webgl_postprocessing_dof.html中的代码将 DOF 添加到我的 three.js 场景中](http://mrdoob.github.com/three.js/examples/webgl_postprocessing_dof.html)

我让它工作了，除了我在我的场景中失去了透明度。

在使用这个 DOF（来自 THREE.ShaderExtras 的散景着色器）时，有什么方法可以在场景后面看到我的 html 背景？

它是否与 RGB - RGBA 格式有关，还是我必须更改散景片段着色器中的某些内容或......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:22:56.600

问题是着色器中的最后一行：

```
gl_FragColor.a = 1.0; 
```

这将每个渲染像素的 alpha 设置为不透明。如果您删除该行，您将获得散景的 alpha，尽管我认为它不是很可用（因为，为什么开发人员会将 alpha 更改为不透明？）。

测试一下，看看效果如何。

# java - 为什么它不让我使用泛型来执行此类作业？

> ID：11755507
> 
> 赞同：1
> 
> 时间：2012-08-01T08:35:47.780
> 
> 标签：java, generics, wildcard

我有一个这样定义的类：

```
public abstract class AbstractUploadField<T> { 
```

和

```
public class GroupField<T> extends AbstractUploadField<T> { 
```

然后在Java中我试图使用泛型来确保一个类是 AbstractUploadField 的子类

```
Class<? extends AbstractUploadField<?>> clazz = GroupField.class 
```

上面没有编译，但如果我删除第二个通配符，它​​会：

```
Class<? extends AbstractUploadField> clazz = GroupField.class 
```

我不明白为什么第一个任务不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:38:04.133

`GroupField`并且`AbstractUploadField`都应该具有相同的泛型类型`T`

**在行**

```
Class<? extends AbstractUploadField<?>> clazz = GroupField.class 
```

第一个通配符可以不同于与第一个语句相矛盾的第二个通配符。

**该声明：**

```
Class<? extends AbstractUploadField> clazz = GroupField.class 
```

有效，但我认为您会收到警告。

# ruby-on-rails - 上限部署对于一个项目来说太慢，但对于其他项目来说却很快

> ID：11755509
> 
> 赞同：0
> 
> 时间：2012-08-01T08:35:52.910
> 
> 标签：ruby-on-rails, performance, deployment, capistrano

我正在使用 capistrano 将我的 rails 应用程序部署到我的 ec2 服务器中，但是部署大约需要 10 分钟，并且在 95% 的情况下会在一个步骤中卡住近 9 分钟，我不知道原因......

这是日志

```
 * executing `deploy'
  * executing `deploy:update'
 ** transaction: start
  * executing `deploy:update_code'
    executing locally: "git ls-remote . HEAD"
    command finished in 6ms
  * getting (via checkout) revision 3100b6f25e4551fadaa64c11852e3839ff1eafc1 to /var/folders/nt/pr84tk8s1pqbj97l4mjz9gsm0000gn/T/20120801082840
    executing locally: git clone -q . /var/folders/nt/pr84tk8s1pqbj97l4mjz9gsm0000gn/T/20120801082840 && cd /var/folders/nt/pr84tk8s1pqbj97l4mjz9gsm0000gn/T/20120801082840 && git checkout -q -b deploy 3100b6f25e4551fadaa64c11852e3839ff1eafc1
    command finished in 18422ms
  * Compressing /var/folders/nt/pr84tk8s1pqbj97l4mjz9gsm0000gn/T/20120801082840 to /var/folders/nt/pr84tk8s1pqbj97l4mjz9gsm0000gn/T/20120801082840.tar.gz
    executing locally: tar czf 20120801082840.tar.gz 20120801082840
    command finished in 2662ms
    servers: ["50.112.250.177"]
 ** sftp upload /var/folders/nt/pr84tk8s1pqbj97l4mjz9gsm0000gn/T/20120801082840.tar.gz -> /tmp/20120801082840.tar.gz
    [50.112.250.177] /tmp/20120801082840.tar.gz 
```

因此，正如您在最后一行看到的那样，执行此 .tar.gz 需要花费太多时间……我猜它的 gzip 压缩但为什么需要太多时间？

在另一个新项目中，部署几乎需要 1 分钟或更短的时间......这个项目只有几个控制器，不应该那么慢......

*我在Mac上并部署到ubuntu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:21:39.693

10 分钟的部署绝对是您可以优化的。我认为连接速度很低。

一项改进可能是使用不同的部署策略。如果您的存储库可以从应用服务器访问（例如 GitHub、私有存储库），您可以通过**远程缓存**进行部署。将以下设置添加到`config/deploy.rb`

```
set :deploy_via, :remote_cache 
```

capistrano 不是在本地签出 repo，而是将其压缩并通过 sftp 发送，而是直接在应用服务器上签出存储库，然后仅提取更改。

如果您使用的是私有存储库，则必须使用设置部署 ssh 密钥。

[在GitHub 的 capistrano 页面](https://help.github.com/articles/deploying-with-capistrano)上查找更多信息（不仅与 GitHub 相关）。

# google-geocoding-api - googlemaps API中IP地址的地理编码

> ID：11755510
> 
> 赞同：2
> 
> 时间：2012-08-01T08:35:58.043
> 
> 标签：google-geocoding-api

在谷歌地图网站上，可以搜索一个名为“我的位置”的地址，该地址对您的 IP 地址进行地理编码查找。

这个功能在谷歌 API 中可用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:42:41.697

Google 不提供该功能。但是，现代浏览器支持 HTML5 Geolocation，它为您提供 JavaScript 中的功能： [https ://developers.google.com/maps/articles/geolocation](https://developers.google.com/maps/articles/geolocation)

目前 Google 不直接提供该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:37:35.533

您可以使用以下代码对 IP 地址进行地理编码：

```
 function functionname(Your IP Here)
    {

            $ip = $ClientIP;

            $json = file_get_contents("http://api.easyjquery.com/ips/?ip=".$ip."&full=true");

            $json = json_decode($json,true);

            return $json;

    } 
```

# java - 线程 Java 中断

> ID：11755512
> 
> 赞同：1
> 
> 时间：2012-08-01T08:36:06.183
> 
> 标签：java, multithreading, runtime

这是我关于尝试使用中断结束/退出线程和处理 Ctrl-c 结束的第二篇文章。我不确定我是否理解它，但这是我最好的尝试。我需要更清楚的概念，请尽可能提供代码示例。

有两个类，主类**Quitit**和另一个类**thething**。主班。

通过终端加载程序时（Linux 上的情况）：

> Java -jar Quitit.jar

当你 Ctrl-c 关闭它时，我说你需要：

> Runtime.getRuntime().addShutdownHook()

您的线程，以便它们在关闭时被杀死。

1.  这是正确的处理方法吗？
2.  为什么它不允许您调用一个方法以便它可以优雅地关闭？

当不通过 Ctrl-C 关闭并且您希望通过 Thread.Interrupt() 关闭时，下面的程序是否正确使用它？

*   我是否正确地说 Thread.Join() 会暂停调用线程，直到目标线程在继续之前死掉？
*   您将如何在**实现 Runnable线程上实现/调用相同的****Runtime.getRuntime().addShutdownHook()**而不是 extends Thread ？

 **退出类：

```
public class Quitit extends Thread {

    public Quitit(String name) {
        try {
            connect("sdfsd");
        } catch (Exception ex) {

        }
    }

    void connect(String portName) throws Exception {
        Thread thh = new thething("blaghname");
        Runtime.getRuntime().addShutdownHook(thh);
        thh.start();
        System.out.println("Thread Thh (thething) Started()");

        while (true) {
            try {
                Thread.sleep(2000);

                if (thh.isAlive()) {
                    System.out.println("Thread Thh (thething) isAlive");
                    if (thh.isInterrupted()) {

                        System.out.println("Thread Thh (thething) is Inturrupted Should be Shutting Down");

                    } else {
                        System.out.println("Thread Thh (thething) is Not Inturrupted");
                        thh.interrupt();
                        System.out.println("Thread Thh (thething) Inturrput Sent");
                        System.out.println("Thread Thh (thething) Joined()");
                        thh.join();

                    }

                } else {
                    System.out.println("Thread Thh (thething) isDead");
                    System.out.println("Main Thread:: can now end After Sleep off 2 seconds");
                    Thread.sleep(2000);
                    System.out.println("MMain Thread:: Sleep Ended Calling Break");
                    break;
                }

            } catch (InterruptedException xa) {
                System.out.println("Main Thread:: ending due to InterruptException second Break called");
                break;
            }
        }

        System.out.println("Main Thread:: Outside While(true) via Break call");
    }

    public static void main(String[] args) {
        try {

            Thread oop = new Quitit("");
            Runtime.getRuntime().addShutdownHook(oop);
            oop.start();

        } catch (Exception ezx) {
            System.out.println("Main Thread:: Not Expected Exception");
        }
    }
} 
```

事物类：

```
public class thething extends Thread {

    thething(String name) {
        super(name);
    }

    @Override
    public void run() {

        while (true) {
            try {
                System.out.println("thething class:: Inside while(true) Loop, now sleeping for 2 seconds");
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                try {

                    System.out.println("thething class:: has been Inturrupted now sleeping for 2 seconds!!");
                    Thread.sleep(2000);
                    break; // Will Quit the While(true) Loop
                } catch (InterruptedException ex) {
                    System.out.println("thething class:: Second InterruptedException called !!");
                }
            }
        }

        System.out.println("thething class:: Outside while(true) and now thread is dying");
    }
} 
```

**输出：：**

```
run:
Thread Thh (thething) Started()
thething class:: Inside while(true) Loop, now sleeping for 2 seconds
Thread Thh (thething) isAlive
Thread Thh (thething) is Not Inturrupted
Thread Thh (thething) Inturrput Sent
Thread Thh (thething) Joined()
thething class:: has been Inturrupted now sleeping for 2 seconds!!
thething class:: Outside while(true) and now thread is dying
Thread Thh (thething) isDead
Main Thread:: can now end After Sleep off 2 seconds
MMain Thread:: Sleep Ended Calling Break
Main Thread:: Outside While(true) via Break call
FINISHED - BUILD SUCCESSFUL (total time: 8 seconds) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:38:17.530

我很惊讶 control-c 并没有杀死你的程序。它适用于我的测试程序，并且应该适用于大多数 Unix 变体。

> 当您 Ctrl-c 关闭它时，我说您需要（设置关闭挂钩）以便线程在关闭时被杀死是正确的。

不，这是*不*正确的。当您想显式清理某些处理时，使用关闭挂钩。它们与正在运行的线程以及它们如何终止无关。

> 为什么它不允许您调用一个方法以便它可以优雅地关闭？

因为那不是它的工作。

> 这是正确的处理方法吗？

我不确定“那个”是什么。正如其他人所提到的，JVM 在最后一个非守护线程完成时完成。那时，JVM 会杀死所有守护线程并退出。如果您希望在关闭时杀死后台线程，那么您可以执行以下操作：

```
Thething theThing = new TheThing();
// set it to be a daemon thread before it starts
theThing.setDaemon(true);
theThing.start(); 
```

如果您询问干净地终止线程的正确方法，那么您可以使用`volatile boolean`或中断线程。通常这意味着启动线程的类会保留一个句柄来执行它。自从`QuitIt`开始`TheThing`上课以来，如果它使用 a ，它将执行以下操作`volatile boolean`：

```
void connect(String portName) throws Exception {
    Thread thh = new TheThing("blaghname");
    thh.start();
    ...
    // we are ready to kill the thread now
    tth.shutdown = true;
} 
```

然后在 中`TheThing`，该`run()`方法将执行以下操作：

```
public class TheThing extends Thread {
    volatile boolean shutdown = false;
    public void run() {
       while (!shutdown) {
          ...
          // you can also test for shutdown while processing
          if (shutdown) {
             return;
          }
       }
    }
} 
```

> 当不通过 Ctrl-C 关闭并且您希望通过以下方式关闭时`Thread.interrupt()`，下面的程序是否正确使用它？

使用`Thread.interrupt()`是另一种方式，您可以向您的线程发出您希望它关闭的信号。您还可以以与上述布尔值类似的方式使用线程中断标志：

```
void connect(String portName) throws Exception {
    Thread thh = new TheThing("blaghname");
    thh.start();
    ...
    // we are ready to interrupt the thread now
    tth.interrupt();
} 
```

意识到中断线程会在`Thread`. 他们的线程仍然需要用代码适当地处理中断。然后在 中`TheThing`，该`run()`方法将执行以下操作：

```
public class TheThing extends Thread {
    public void run() {
       while (!Thread.currentThread().interrupted()) {
          ...
       }
    }
} 
```

中断也会导致`wait()`,`notify()`和其他方法抛出`InterruptedException`。处理这个问题的正确方法是：

```
try {
   Thread.sleep(1000);
} catch (InterruptedException e) {
   // catching the interrupted exception clears the interrupt flag,
   // so we need to re-enable it
   Thread.currentThread().interrupt();
   // probably you want to stop the thread if it is interrupted
   return;
} 
```

> 我是否正确地说 Thread.join() 会停止调用线程，直到目标线程在继续之前死掉？

是的。调用`join()`（不带参数）将暂停调用线程，直到它加入的线程完成。所以通常你设置你的关闭标志或者你中断线程然后加入它：

```
tth.shutdown = true;
// or tth.interrupt()
tth.join(); 
```

> 您将如何在实现 Runnable 线程上实现/调用相同的 Runtime.getRuntime().addShutdownHook() 而不是 extends Thread ？

这个问题没有任何意义。如果您询问如果您已经实现了如何关闭线程`Runnable`，那么我上面提到的相同机制将起作用。

* * *

另一个影响 control-c 讨论的因素是信号处理程序。它们允许您捕获 control-c（和其他信号），以便您可以用它们做一些智能的事情。它们非常依赖于操作系统（当然），如果你捕捉到中断信号（SIGINT 通常由 control-c 发送）并且不停止 JVM，你就会遇到问题。

但无论如何，您都可以执行以下操作：

```
...
MyHandler handler = new MyHandler();
// catch the control-c signal, "TERM" is another common kill signal
Signal.handle(new Signal("INT"), handler);
...

private static class MyHandler implements SignalHandler {
    @Override
    public void handle(Signal arg0) {
        // interrupt your threads
        // clean up stuff
        // set shutdown flags
        // ...
    }
} 
```

同样，我想说捕获中断信号（control-c）而不是关闭 JVM 是一种不好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:20:56.867

你的问题有很多问题。如果你想在按下 Ctrl-C 时优雅地关闭线程，那么注册一个关闭钩子，并在这个关闭钩子的代码中，优雅地关闭你的线程。

可以通过扩展 Thread 或将 Runnable 传递给 Thread 构造函数来构造 Thread 实例。因此，如果您希望在 Runnable 中实现关闭挂钩的代码，只需执行以下操作：

```
Runnable r = new Runnable() {
    @Override
    public void run() {
        try {
            // code of the shutdown hook: ask running threads to exit gracefully
            for (Thread t : threadsToShutDown) {
                t.interrupt();
            }
            for (Thread t : threadsToShutDown) {
                t.join(); 
            }
        }
        catch (InterruptedException e) {
            // too bad
        }
    }
};
Runtime.getRuntime().addShutdownHook(new Thread(r)); 
```

请注意，如果其中一个线程没有响应中断，上述将阻止 JVM 退出。引入超时将是一个好主意。

另请注意，您不得启动您注册为关闭挂钩的线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T09:25:51.120

> 当你 Ctrl-c 关闭它时，我说你需要：`Runtime.getRuntime().addShutdownHook()`你的线程以便它们在关闭时被杀死是正确的。

不。

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)，`addShutdownHook`只需注册一个将在 VM 关闭（-ting）关闭时运行的线程。理论上，这将用作应用程序范围的终结器；当您的流程结束时会运行的东西，以“整理”。然而，它们存在一些问题，类似于不推荐使用终结器的原因。如果进程突然终止，它们不能保证运行，因此它们不能做任何关键的事情。它们在生命周期的一个微妙部分运行，因此它们可能无法以您期望的方式访问对象或与对象交互。他们需要快速运行，否则可能会在完成之前终止进程。

但是无论如何，这与您的想法*完全不同。*当 VM 关闭时，您的线程将退出，而您无需这样做。

此外，您必须提供一个**未启动**的线程作为关闭挂钩，所以我有点惊讶您`IllegalThreadState`在关闭时没有抛出异常。

> 当不通过 Ctrl-C 关闭并且您希望通过 Thread.Interrupt() 关闭时

这也不是退出多线程程序的“通常”方式。

您（大致）有两种选择：

1.  将您的线程作为“守护进程”启动，然后将它们保留。当没有非守护线程运行时程序退出，所以当你的`main`线程终止时，即使你的“工作”线程仍然活着，你的程序也会退出。当然，当您的

2.  *向您的线程发出它们应该退出的*信号*`stop()`，例如调用设置布尔标志的方法，并让这些线程允许它们自己终止。`run()`线程在其方法返回时停止。通常，线程仅在处于某种循环中时才继续运行。简单地让你的线程在被告知退出时退出正在进行的循环将优雅地关闭它，因为它通常会在检查标志之前完成其当前的“工作块”。*

 *中断线程不会做你所期望的。它只是在内部设置另一个布尔标志。许多阻塞操作（例如文件系统/网络/数据库方法）将定期检查此标志并`InterruptedException`在设置时抛出一个。这允许阻塞方法提前退出，但如果该方法不是“行为良好”，则不能保证。

因此，在您的示例中，它之所以有效，是因为`Thread.sleep()`它确实响应了中断，然后您将其视为退出信号。但是，如果您编写自己的方法来计算百万分之一的斐波那契数，例如，除非您的实现`Thread.currentThread().interrupted()`在每次迭代之间显式检查，否则中断线程将无济于事。

此外，中断几乎可以来自任何地方，很难赋予它们特定的“意义”。它们是杀死线程的信号吗？因为客户无聊而放弃当前方法的信号？因为新数据已经到来而从顶部开始的信号？在非平凡的程序中，它并不完全清楚。

鉴于此，更好的方法是使用布尔标志来传达原因，然后*在*设置标志后中断。一个被中断的线程应该检查它的状态，看看刚刚发生了什么，然后弄清楚要做什么。例如，您可以编码`thething.run()`为

```
private boolean keepRunning = true; 

public void run() {
    while(keepRunning) {
        try {             
            System.out.println("thething class:: Inside while(true) Loop, now sleeping for 2 seconds");
            Thread.sleep(2000); 
        } catch (InterruptedException e) {
            try {
                System.out.println("thething class:: has been Inturrupted now sleeping for 2 seconds!!");                        
                Thread.sleep(2000); 
            } catch (InterruptedException ex) 
            { 
                 System.out.println("thething class:: Second InterruptedException called !!");  
            }
        } 
    }
} 
```

在 中`QuitIt`，在中断它之前设置`thh.keepRunning = false`（或者更好的是，定义一个方法，例如`thh.allWorkDone()`设置标志，然后调用*它*）。

请注意，没有办法强制停止另一个线程 -[有充分的理由](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html)- 您需要发出*信号*让线程停止，并确保线程中运行的任何内容都观察并尊重该信号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:33:25.913

最好的优势 - 使用没有显式终止的守护线程。接下来，重新设计应用程序，以便我可以使用没有显式终止的守护线程。绝对最后的手段，当没有其他方法是远程可行时，任何类型的显式关闭代码都已在此处发布。***

# facebook - 将 facebook 页面与幽灵页面合并

> ID：11755513
> 
> 赞同：0
> 
> 时间：2012-08-01T08:36:07.400
> 
> 标签：facebook

当我将开放图元数据添加到我的网站时，我的网页获得的每个赞都只保存在“幽灵页面”下的网页中。意味着如果我想为网站创建一个“facebook页面”，它与网站完全分离，我需要重新建立我的受众。

有没有办法在它们之间合并？例如，如果我在我的网站上插入一个 Like-Box，然后单击 Like-Box 中的 Facebook 链接 - 它会将我重定向到该网站，而不是让我看到 Facebook 页面。如果我更改 Facebook 页面的链接，点赞数会低很多。

我知道我可以在“资源”下合并，但我想知道它是否会将我的“Facebook 页面”转换为指向我网站的另一个链接。我不想要。

那么，我怎样才能让人们点击链接：“Facebook 上的 MySite”并访问我在 Facebook 上的网站，而不是我的网站......

我认为最终的解决方案是将点赞按钮设置为“facebook 页面”，而不是页面本身。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:33:06.383

您必须为您的网站创建一个粉丝页面并将“赞”移过来。您可以使用一个页面迁移/合并工具，但它仅适用于页面名称相似的情况。您可以在页面管理屏幕中找到它。

# joomla - Joomla 1.7 中菜单项的样式（模板）分配 - 困惑

> ID：11755514
> 
> 赞同：0
> 
> 时间：2012-08-01T08:36:07.987
> 
> 标签：joomla, joomla1.7, joomla-template

我有许多模板样式。如果我更改默认样式，我可以看到我的样式正在工作。风格实际上发生了变化。但是一个星期以来，我一直试图找出为什么我的菜单分配不起作用。我完全感到困惑。

所以我找到了两个可能的地方，我可以改变每个菜单项的样式。在模板管理器中：编辑样式 -> 菜单分配 -> 勾选菜单项。或菜单管理器：编辑菜单项 -> 更改模板样式。我已经尝试了一百次这些设置。这些设置完全没有效果。

我在哪里可以更改样式，以便为每个菜单项获得不同的样式（菜单项是指菜单项打开的页面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:27:30.530

我找到了答案。我之前没有使用过真正的 Joomla 菜单，所以我不知道它们会产生什么链接。他们产生的链接中有一个技巧。在菜单管理：编辑菜单项上，有菜单项的链接可供复制粘贴。但是，此链接例如：

```
index.php?option=com_content&view=article&id=65 
```

并且其中缺少 Itemid 变量！如果缺少，模板样式将是默认样式，而不是指定样式！所以正确的链接是，例如：

`index.php?option=com_content&view=article&id=65&Itemid=205`（注意 Itemid 上的确切情况）（Itemid，又名 ID，实际上也在同一个 Edit Menu Item 页面上，但只是分开）

或者另一个正确的链接是，在启用全局配置/站点/SEO 设置/SEF URL 之后是：

[http://site.com/index.php/menualias](http://site.com/index.php/menualias)

这也将使用分配的模板呈现。或者没有带有 URL 重写选项的**index.php/部分。**

那么，哪个会覆盖哪个：编辑菜单项/模板样式设置或模板管理器：编辑样式菜单分配？答案是，根据我的测试，如果您将 EMI 模板样式保持为**- Use Default -**，那么您可以从菜单分配中更改它。在其他情况下，最后保存的情况会覆盖。如果您将 EMI 模板样式设置为**mystyle1**并将同一页面的菜单分配设置为**mystyle2**，则后者将覆盖，而 EMI 模板样式仍设置为**mystyle1**。所以有点混乱。然后，如果您将页面的 EMI Template Style 更改为**mystyle3**，这将清除 Menus assignments 设置并因此覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:29:58.520

尝试创建单独的样式文件，如 mymenu1style.php、mymenu2style.php 等以及相应的 XML 文件，如该文档的菜单部分中的[http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6](http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6)所述，然后在菜单管理器“编辑菜单项 -> 更改模板样式”

# cocoa - cocoa：cocoa 中哪个类与 UIManagedDocument 类似？

> ID：11755518
> 
> 赞同：0
> 
> 时间：2012-08-01T08:36:17.177
> 
> 标签：cocoa

我可以通过 UIManagedDocument 获得 managedContext，我想知道是否存在像 UIManagedDocument 一样的 NSManagedDocument？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:39:37.397

是的，`NSPersistentDocument`。

苹果[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSPersistentDocument_Class/Reference/Reference.html)。

# php - 样式化来自 php 表单的电子邮件

> ID：11755521
> 
> 赞同：3
> 
> 时间：2012-08-01T08:36:33.103
> 
> 标签：php, css, forms, contact-form

我在一个网站上有一个表格，允许用户输入他们的姓名、电话、电子邮件等。当我收到此信息作为电子邮件时，它完全没有格式化，因此阅读起来有点困难。见下图：

![收到的电子邮件屏幕截图](../Images/737a2b2896cae065cfdac7061b5e604e.png)

有没有办法可以使用 CSS 来设置它的样式，即。使 From 和 email 标题加粗`{font-weight:bold;}`？

我用于表单的 php 是：

```
<?php
$name        = $_POST['name'];
$email       = $_POST['email'];
$phone       = $_POST['phone'];
$message     = $_POST['message'];
$formcontent ="From: $name \n Email: $email \n Phone: $phone \n Message: $message";
$recipient   = "studio@ll-i.co.uk";
$subject     = "Contact Form";
$mailheader  = "From: $email \r\n";

mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");

echo "<p>Thanks for getting in touch, we'll get back to you shortly..</p>";
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T08:39:44.780

您可以像这样在 HTML 中轻松地对其进行格式化 - 请注意，您可以编写将在内容中使用的内部 CSS：

```
<?php
$to = "somebody@example.com, somebodyelse@example.com";
$subject = "HTML email";

$message = "
<html>
    <head>
    <title>HTML email</title>
        <style type="text/css">
        hr {color:sienna;}
        p {margin-left:20px;}
        h3
        {
        color:red;
        text-align:left;
        font-size:8pt;
        }
        </style>
    </head>
<body>
    <h3>The fancy CSS heading!</h3>
    <p>".$email."</p>
    <hr>
    <table>
        <tr>
        <th>Firstname</th>
        <th>Lastname</th>
        </tr>
";
// You can even do stuff like this:
for($i=0;$i<count($someArrayFromYourForm);$i++)
{
    $email.="
        <tr>
        <td>".$someArrayFromYourForm['formField']."</td>
        <td>".$someArrayFromYourForm['formField2']."</td>
        </tr>
";
}
$email.="
    </table>
</body>
</html>
";

// Always set content-type when sending HTML email
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";

// More headers
$headers .= 'From: <webmaster@example.com>' . "\r\n";
$headers .= 'Cc: myboss@example.com' . "\r\n";

mail($to,$subject,$message,$headers);
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T08:40:17.763

您必须使用嵌入在 HTML 文件中的内联 CSS / CSS 对其进行样式设置。

$formcontent 变量可以包含 HTML，例如

```
"<html>
    <head>
        <title>Message</title>
    </head>
    <body>
        <p><strong>From:</strong> $name</p>
        <p><strong>Email:</strong> $email</p>
        <p><strong>Phone:</strong> $phone</p>
        <p><strong>Message:</strong> $message</p>
    </body>
</html>" 
```

像这样将 CSS 放在这个头部：

```
<head>
   <style type="text/css">
       body { background-color: #ff0000; }
   </style>
</head> 
```

显然，您必须使用这些：' 而不是这些 "，并使用句号或逗号连接任何变量，以防您需要对任何 HTML 使用语音引号。

像这样：

```
'<html>
    <head>
        <title>Message</title>
        <style type="text/css">
           body { background-color: #ff0000; }
        </style>
    </head>
    <body>
        <p><strong>From:</strong> ',$name,'</p>
        <p><strong>Email:</strong> ',$email,'</p>
        <p><strong>Phone:</strong> ',$phone,'</p>
        <p><strong>Message:</strong> ',$message,'</p>
    </body>
</html>' 
```

编辑：

您还应该像这样更改标题：

```
$mailheader = "MIME-Version: 1.0" . "\r\n";
$mailheader .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$mailheader .= "From: $email \r\n"; 
```

# php - 结合 PHP 和 Jquery 的最佳实践是什么？

> ID：11755522
> 
> 赞同：3
> 
> 时间：2012-08-01T08:36:33.843
> 
> 标签：php, jquery

我正在为一家可能拥有 1000-2000 名用户的大公司构建一个 MySQL/PHP 票务系统应用程序。这是我的第一个真正的企业应用程序，所以我真的想确保我根据最佳实践正确地做事。我不是你所说的经验丰富的开发人员。我知道如何编写代码并使其工作，但我从来没有导师或任何人来纠正我的工作，所以我不知道我做事的方式是好是坏……甚至是倒退。

我们对系统有 4 级访问权限，因此应用程序需要从用户会话中读取这些权限。我的搭档做后端数据库编程，我负责前端接口​​。在过去的 6 个月里，我一直在使用纯 Jquery 编写小工具，因此我已经成为它的忠实粉丝，并且发现我可以用它很快地做事。对于界面工作，我喜欢它。但是，会话管理只能在 PHP afaik 中完成。

这不一定是个问题，因为我可以在同一页面上包含一些 JS 和 PHP，但如果我不需要的话，我不希望这样做。例如，我的登录页面只是 JS/HTML，它向 PHP 登录 Web 服务发出 ajax 请求。任何时候我可以将处理任务委托给 PHP，我更喜欢编写一个可以在 AJAX 调用中使用的服务。

但是，如果我必须处理会话，我认为我将无法做到这一点。或者我可以吗？我很想听听您的专业人士关于您认为与此相关的最佳实践的意见。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:43:37.113

对于初学者，您应该使用一些 PHP 框架并检查它们如何处理 JS。

我推荐[Yii 框架](http://yiiframework.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:56:29.140

就我个人而言，我不会让 JavaScript 知道任何会话。权限控制是在创建页面时在 PHP 中完成的；您可以根据访问控制选择隐藏部分页面。这样界面就不必担心权限问题，它适用于页面上的当前内容。

PHP 通常使用 cookie 传播会话（我建议使用 HttpOnly 选项）；这些在 AJAX 调用中被 JavaScript 透明地使用，因此您的会话应该按预期工作。

如果您必须支持不支持（或者更确切地说，拒绝）cookie 的浏览器并且您想使用 AJAX，您需要找到其他方法，例如让 PHP 生成一段将初始化会话 id 的 JavaScript，以便当您进行 AJAX 调用时，脚本可以通过 POST、GET 或特殊的 HTTP 标头传递它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:57:14.587

如果通过*会话管理*您的意思是访问控制，那么只要您通过 AJAX 调用等获得所需的信息（真的看不到任何其他方式......），那么服务器端应该能够处理访问等美好的。如果您在服务器端使用常见的状态码（400、401、403 等），那么您可以确保 jQuery 以良好的方式处理这些状态码，并且事情应该很容易。

*   把我可以看的票给我。抱歉，您需要登录，401。
*   我现在登录了。好的，这是您可以使用的门票清单。
*   我想看 56 号票。抱歉，403 不让你看。
*   我想将此评论添加到票号 42。抱歉，您的输入中缺少某些内容，400。

请记住，在服务器端，*始终*在适当的地方检查访问权限。如果用户应该具有访问权限，则不要假设用户具有访问权限。核实 ：）

无论如何，这取决于您所说的*会话管理*是什么意思，所以我可能会离开这里......

# android - Android edittext 只输入钱格式

> ID：11755523
> 
> 赞同：2
> 
> 时间：2012-08-01T08:36:34.517
> 
> 标签：android, keyboard, format, decimal, currency

我有 1 个编辑文本。当用户点击它时，它会弹出键盘。如何将键盘与点号（十进制）一起设置？我不希望用户切换键盘输入点。

我已经尝试过`android:inputType="phone"`，`android:inputType="numberDecimal"`但点与数字键盘分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:56:54.413

我认为你不能因为看起来确切的布局以及它与 inputType 参数的对应方式高度依赖于键盘实现、版本和最可能的语言。

例如，在我的 Galaxy Nexus 上，Android 4.1，带有 Swiftkey X 键盘，德语我有点“。” 和数字键盘上的 ',' (numberDecimal)

# android - 遍历自定义布局ListView中的所有View

> ID：11755525
> 
> 赞同：0
> 
> 时间：2012-08-01T08:36:37.193
> 
> 标签：android

我的 ListView 有 10 行，每行有 a`TextView`和 a `Button`。每次我点击一个`Button`我想遍历`Button`我的行中的每一个来检查它的可绘制性。挑战在于，除了我单击的视图之外，它返回所有 null。有人知道我如何实现这一目标吗？检查下面的代码片段。

```
public View getView(int position, View view, ViewGroup parent) {
    convertView = inflater.inflate(R.layout.customlayout, null);

    TextView textview = (TextView) view.findViewById(R.id.textview);
    Button button = (Button) view.findViewById(R.id.button);

    ListView listParent = (ListView) parent;

    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            for(int ctr=0; ctr<listParent.getCount(); ctr++) {
                //traverse to all the buttons in list here
            }

        }
    });

    return view;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:41:25.827

是的，您只需将 onclick 侦听器设置为一个 id = button 的按钮。因此，即使您调用具有相同名称的所有按钮，它也仅适用于一个按钮。我建议将每个按钮识别为 button1 button2 button3...button10 您可以使用 for(){} 并设置每个按钮的 onclick 侦听器。

# java - 检查表单字段是否为空

> ID：11755528
> 
> 赞同：1
> 
> 时间：2012-08-01T08:36:43.457
> 
> 标签：java, spring-mvc

我正在尝试检查 java 中的表单字段是否为空。我搜索了很多，但我只在 javascript 中找到它。

问题是我想在我的控制器中检查它。

我怎样才能做到这一点？

问候。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:39:49.830

您可以通过 HttpServletRequest 检查参数：

```
 String p = req.getParameter("p");
    if(p==null){
        System.out.println("parameter p is empty");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:02:29.540

如果您在控制器中测试它：
`if(request.getParameter().trim().compareTo("") == 0){ // Do what you want`

如果您在页面中测试它，只需尝试以下操作：
`if(field.text.toString().trim().compareTo("") == 0){ //Do what you want`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:58:38.300

检查空字段，您必须检查 null 和空字符串。

if(str == null && str.equals(""){}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:44:51.613

使用 Java 6，您可以测试一个空的 String ：

```
if(null == myString || myString.trim().isEmpty() { .. ;} 
```

*编辑添加 trim() 以去除空白*

# ios - 点击相应的annotationview后如何在mkannotationview中实现字幕的更新

> ID：11755529
> 
> 赞同：0
> 
> 时间：2012-08-01T08:36:44.280
> 
> 标签：ios, mkannotation, mkannotationview, subtitle

就像 googlemap 的实现一样。
点击注解视图后，会出现标注气泡，然后获取网络获取一些信息。获取后，我们需要更新注解视图的字幕。
如何实现这个效果。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:23:40.807

由于 KVO 已经通过注解视图实现，您只需要自己实现这两个功能即可：

```
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle; 
```

然后当您需要更改注释视图上的标题或副标题时

```
self.title = @"New title!";
[self setSubtitle:@"New subtitle!"]; 
```

然后将显示相应注释视图上的更新。

点击[这里](https://stackoverflow.com/questions/3316552/update-title-subtitle-for-custom-annotation-on-an-mkmapview)，这就是答案，我对此表示感谢。

# objective-c - 关闭自定义模式视图控制器

> ID：11755531
> 
> 赞同：1
> 
> 时间：2012-08-01T08:36:46.897
> 
> 标签：objective-c, ios, ipad, modalviewcontroller, uistoryboardsegue

我正在开发一个 iPad 应用程序，我在其中创建了一个自定义 segue 来向我的视图控制器展示自定义动画。它现在（几乎）工作得很好，最后它看起来像一个表单模式视图控制器，正是我想要的样子。

现在我需要创建一个自定义动画来关闭与第一个动画匹配的模态视图控制器。最好的方法是什么？我的自定义segue中有我的自定义动画，我认为反向动画也应该在那里。但我也认为 segue 不是拥有它的地方。

你们是怎么做到的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:14:32.073

不幸的是，您不能使用 segue 以一种方式执行模态 ViewController 的关闭（将在 ios6 中更改）。只需执行您的自定义关闭动画并在动画完成块中的 parentViewController 上调用dismissModalViewControllerAnimated：NO。

# android - 启动 Android 模拟器不起作用？

> ID：11755532
> 
> 赞同：2
> 
> 时间：2012-08-01T08:36:48.880
> 
> 标签：android, android-emulator, avd

无法启动模拟器。如何解决错误？

**控制台错误**

[2012-08-01 13:56:14 - SDK Manager] [SDK Manager]`'C:\PROGRA~1\Android\ANDROI~1\tools\lib\\find_java.exe'`未被识别为内部或外部命令，

[2012-08-01 13:56:14 - SDK 管理器] [SDK 管理器] `operable program or batch file`。

**为 AVD Android 启动模拟器**

```
Starting emulator for AVD 'Android'
java.lang.NoClassDefFoundError: com/sun/jme/toolkit/bootstrap/Container
Caused by: java.lang.ClassNotFoundException: com.sun.jme.toolkit.bootstrap.Container
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)  
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: com.sun.jme.toolkit.bootstrap.Container.  Program will exit.
Exception in thread "main" 
```

# dependencies - 当依赖关系发生变化时，依赖反转主体 (DIP) 如何减少对依赖模块进行更改的需要？

> ID：11755533
> 
> 赞同：5
> 
> 时间：2012-08-01T08:36:58.463
> 
> 标签：dependencies, inversion-of-control

我最近在 Robert.C.Martin 的优秀著作 Agile Principals, Patterns and Practices in C# 中读到了 Dependency-Inversion Principal。然而，我觉得我不完全理解这个原则的一个方面。

Robert 解释说，当高层模块依赖于低层模块时，低层模块的变化也会导致高层模块发生变化。他通过以下示例演示了这一点：

```
public class Button
{
   private Lamp lamp;
   public void Poll(){
      if(/*some condition*/)
         Lamp.TurnOn();
   }
} 
```

关于这段代码，Robert 说“Button 类直接依赖于 Lamp 类。这种依赖意味着 Button 将受到 Lamp 更改的影响。”

在我看来，我们可能会对 Lamp 类进行两种可能的更改：

1）我们可能想改变类的内部实现但不影响公共接口。

2) 我们可能决定更改公共接口，将参数传递给 TurnOn 方法。

我不明白的是，在第一种情况下，为什么我们的更改会导致 Button 类发生更改？Lamp 的公共接口没有改变，那么为什么 Button 需要改变呢？

在第二种情况下，我可以看到这需要我们更改 Button。但在这种情况下，依赖抽象如何改变这一点？当然，如果我有正当理由将接口更改为 Lamp，那么我也会更改 Lamp 和 Button 所依赖的抽象接口。在这种情况下，无论如何我都必须更改 Button，因为它所依赖的抽象已经改变。

我意识到 DIP 还有其他好处，例如更高级别模块的可重用性、更高级别模块对接口的所有权以及在运行时选择依赖项实现的能力，但是我很难理解 DIP 如何减少对依赖项的需求当与较低级别模块的接口发生更改和/或依赖模块中的内部更改可能导致更高级别模块中的更改时，要更改的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:08:02.603

我相信 DIP 给这个例子带来的重要区别是接口的所有权。特别是哪个层拥有接口，其中 Button 是客户端，Lamp 是服务器。

在对具体类 Lamp 的依赖中，接口 (.TurnOn()) 属于 Lamp 类（服务器）。因此，可以决定仅根据服务器的需要更改 .TurnOn() 方法，因为它拥有该方法，这将需要对 Button 类（客户端）进行后续更改。

当接口抽象为 ISwitchableDevice 接口/抽象类时，所有权将转移到客户端或共享层。因此，对接口的更改不能直接由服务器需求驱动，对 Lamp 类（由服务器拥有）的任何更改都可以在不更改接口的情况下进行。如果需要更改 ISwitchableDevice 接口，那么这将由客户端或共享层的需求驱动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:05:42.253

例如，关于接口，如果对 Lamp 的构造函数（它是公共接口的一部分）进行了更改，并且您依赖于抽象基础或接口，则这些更改不会传播到按钮的实现（除非你在那里建造它，但这部分是另一个问题）。
至于“纯实现”，一个适当封装的设计，其中没有对任何类型的接口进行更改（构造函数、可以抛出的异常等）并且没有更改公共全局依赖项，那么它不应该影响调用者，因此问题不大。

基本上，关于这些问题，我们正在减少表面积，因此我们依赖较少的细节，尽管一些细节总是必要的。

抽象是无用的混乱还是无价的分离，需要根据具体情况来决定。

# java - 如何将长日期值转换为 mm/dd/yyyy 格式

> ID：11755534
> 
> 赞同：30
> 
> 时间：2012-08-01T08:37:20.413
> 
> 标签：java, android, date, data-conversion

> **可能重复：**
> [将长字符串转换为日期](https://stackoverflow.com/questions/11753341/converting-long-string-to-date)

我需要将**长**日期值转换为**mm/dd/yyyy**格式。我的长值是

```
strDate1="1346524199000" 
```

请帮我

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-01T08:53:03.617

请参阅下面的代码，它以字符串形式给出日期。

```
import java.text.SimpleDateFormat;
import java.util.Date;

public class Test{

    public static void main(String[] args) {
        long val = 1346524199000l;
        Date date=new Date(val);
        SimpleDateFormat df2 = new SimpleDateFormat("dd/MM/yy");
        String dateText = df2.format(date);
        System.out.println(dateText);
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T08:49:05.777

请参阅下面的代码以格式化日期

```
long strDate1 = 1346524199000;
Date date = new Date(strDate1);

try {
        SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
        SimpleDateFormat df2 = new SimpleDateFormat("dd/MM/yy");
        date = df2.format(format.parse("yourdate");
    } catch (java.text.ParseException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T08:49:38.617

试试这个例子

```
 String[] formats = new String[] {
   "yyyy-MM-dd",
   "yyyy-MM-dd HH:mm",
   "yyyy-MM-dd HH:mmZ",
   "yyyy-MM-dd HH:mm:ss.SSSZ",
   "yyyy-MM-dd'T'HH:mm:ss.SSSZ",
 };
 for (String format : formats) {
   SimpleDateFormat sdf = new SimpleDateFormat(format, Locale.US);
   System.err.format("%30s %s\n", format, sdf.format(new Date(0)));
   sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
   System.err.format("%30s %s\n", format, sdf.format(new Date(0)));
 } 
```

并阅读此[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T08:42:38.037

尝试这样的事情：

```
public class test 
{  

    public static void main(String a[])
    {  
        long tmp = 1346524199000;  

        Date d = new Date(tmp);  
        System.out.println(d);  
    }  
} 
```

# java - 如何使用 JAXB 生成没有 XML 根元素的 XML 文档

> ID：11755536
> 
> 赞同：0
> 
> 时间：2012-08-01T08:37:33.063
> 
> 标签：java, xml, jaxb

有时我想像这样生成 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<properties>
</properties>
<context>
</context> 
```

不要使用根元素，不要这样：

```
 <?xml version="1.0" encoding="utf-8"?>
 <root>
     <properties>
     </properties>
     <context>
     </context>
 </root> 
```

这是我的课：

```
//@XmlRootElement(name="root")
public class WithoutRootElement {

    private String properties;
    Private String context;

    @XmlElement(name="properties")
    public String getProperties() {...}

    @XmlElement(name="context")
    public String getContext() {...}
} 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:38:45.407

您想要的不是有效的 XML。因此，无论是 JAXB 还是任何其他技术都无法生成这样的“文档”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:42:53.160

根据 XML 的格式良好：

> 有一个包含所有其他元素的“根”元素。

# sql - SQL - 使用子选择分组？

> ID：11755539
> 
> 赞同：0
> 
> 时间：2012-08-01T08:37:39.537
> 
> 标签：sql

我有以下查询：

```
SELECT COUNT(DATEPART(hh, CallStart)), DATEPART(hh, CallStart) as 'Hour'
  FROM PhoneSystemLog 
 WHERE MONTH(CallStart) = @Month and YEAR(CallStart) = @Year 
 GROUP BY DATEPART(hh, CallStart) 
```

这很好，它会将每小时拨打的电话数量分组，但我想做的是然后将上午 12 点至上午 7 点之间的呼叫分组，将下午 6 点至上午 12 点之间的呼叫分组，因为拨打的电话并不多在那些时候，因此在这些时间里每小时拨打电话的次数似乎毫无意义（因为他们不在营业时间）。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:41:36.380

您可以使用 a`case`将小时转换为期间：

```
select  Period
,       count(*) as Calls
from    (
        select  case 
                when datepart(hh, CallStart) between 0 and 7 then '1-7'
                when datepart(hh, CallStart) between 18 and 23 then '18-24'
                else cast(datepart(hh, CallStart) as varchar(2))
                end as Period
        from    PhoneSystemLog
        where   MONTH(CallStart) = @Month 
                and YEAR(CallStart) = @Year 
        ) as SubQueryAlias
group by
        Period 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:41:25.407

尝试这样的事情

```
select count(DATEPART(hh, CallStart)), 
    CASE 
    when DATEPART(hh, callstart) between 0 to 7 then '12:00AM-7AM'
    when DATEPART(hh, callstart) between 18 to 23 then '06PM-12AM'
    END
as 'hour' from PhoneSystemLog  
where MONTH(callstart) = @Month and YEAR(callstart) = @Year  
group by 
    CASE 
    when DATEPART(hh, callstart) between 0 to 7 then '12:00AM-7AM'
    when DATEPART(hh, callstart) between 18 to 23 then '06PM-12AM'
    END 
```

# r - 根据数据框的所有行检查向量的每个元素

> ID：11755545
> 
> 赞同：2
> 
> 时间：2012-08-01T08:37:57.633
> 
> 标签：r, function, vectorization

我有一个向量，我想针对数据帧的每一行检查每个元素。它涉及一个 grep 函数，因为要检查的元素隐藏在其他文本中。

[在这个论坛](https://stackoverflow.com/questions/11667734/r-check-elements-of-vector-against-other-vector)的帮助下，我得到了这个代码：

```
 mat=data.frame(par=c('long A story','C story', 'blabla D'),val=1:3) 
    vec=c('Z','D','A')
    mat$label <- NA
    for (x in vec){
       is.match <- lapply(mat$par,function(y) grep(x, y))
       mat$label[which(is.match > 0)] <- x
    } 
```

问题是执行需要几分钟。有没有办法对此进行矢量化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:01:33.020

我假设您只想要每种情况下的第一个匹配项：

```
which.matches <- grep("[ZDA]", mat$par)
what.matches <- regmatches(mat$par, regexpr("[ZDA]", mat$par))

mat$label[which.matches] <- what.matches
mat

           par val label
1 long A story   1     A
2      C story   2  <NA>
3     blabla D   3     D 
```

编辑：基准测试

```
Unit: microseconds
           expr     min       lq  median       uq      max
1   answer(mat) 185.338 194.0925 199.073 209.1850  898.919
2 question(mat) 672.227 693.9610 708.601 725.6555 1457.046 
```

编辑2：

正如@mrdwab 建议的那样，这实际上可以用作单线：

```
mat$label[grep("[ZDA]", mat$par)] <- regmatches(mat$par, regexpr("[ZDA]", mat$par)) 
```

# android - 自定义 Listview 包含一个我想在按钮上设置 onclicklistener 的按钮

> ID：11755546
> 
> 赞同：0
> 
> 时间：2012-08-01T08:38:01.890
> 
> 标签：android

我制作了一个带有按钮和文本视图的自定义列表视图。我想做的是-单击按钮，我想获取列表视图的索引。

我使用 HashMap 来存储键值对。

这是我的活动代码：

```
package com.hisham.listviewexhisham;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView lv= (ListView)findViewById(R.id.listview);
        final TextView tvTesting = (TextView)findViewById(R.id.tvTesting);

        // create the grid item mapping
        String[] from = new String[] {"quantity", "item", "cost", "remove"};
        int[] to = new int[] { R.id.quantity, R.id.item, R.id.cost, R.id.remove};
        ArrayList<String> productNames = new ArrayList<String>();
        productNames.add("Trumbull 125");
        productNames.add("Trumbull 135");
        productNames.add("Trumbull 17'' Monitor");
        productNames.add("Trumbull Keyboard");
        productNames.add("Trumbull 2TB HD");

        // prepare the list of all records
        List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
        for(int i = 0; i < productNames.size(); i++){
            HashMap<String, String> map = new HashMap<String, String>();
            map.put("quantity", "" + i);
            map.put("item", productNames.get(i));
            map.put("cost", "$ 600.99");
            map.put("remove", "X");
            fillMaps.add(map);
        }

        // fill in the grid_item layout
        SimpleAdapter adapter = new SimpleAdapter(this, fillMaps, R.layout.grid, from, to);
        lv.setAdapter(adapter);

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub

                    tvTesting.setText("Id is - " +arg2);

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    } 
```

这是grid.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/quantity"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="1"
            android:width="20dip" />

        <TextView
            android:id="@+id/item"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.01"
            android:text="Trumbull"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
            android:id="@+id/cost"
            android:layout_width="75dp"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:gravity="right"
            android:text="$ 500.99" />

        <Button
            android:id="@+id/remove"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:text="X" />
    </LinearLayout>

</LinearLayout> 
```

这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvTesting"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T09:28:48.313

您可以通过比较绑定到按钮 Id ( ) 的视图的 Id 并设置其 onClickListener()来使用`SimpleAdapter.setViewBinder`然后设置`onClickListener()`您的 Button 。`ViewBinder``R.id.remove`

更新：

```
 adapter.setViewBinder(new SimpleAdapter.ViewBinder() {
             @Override
             public boolean setViewValue(View view, Object data, String textRepresentation){
                 if (view.getId() == R.id.remove) {
                     Button b=(Button) view;
                     b.setOnClickListener(/*your desired implementation*/);
                     return true; 
                }
                 return false;
     } 
```

# .htaccess - 阻止目录访问

> ID：11755547
> 
> 赞同：5
> 
> 时间：2012-08-01T08:38:03.673
> 
> 标签：.htaccess, codeigniter

我有这个当前的目录结构

```
myproject
  --> application
  --> assets
  --> data
  --> scripts
  --> styles
  --> system
  --> .htaccess
  --> favicon.ico
  --> index.php 
```

我将用户上传的图像、视频存储在**数据**目录中，它具有以下结构：

```
data
  --> 5
      --> thumbs
      --> user_images
  --> 6
      --> thumbs
      --> user_images
  --> index.html 
```

我放置了**index.html**以防止目录访问。我可以对所有数据子目录执行此操作以产生相同的效果，但是有没有办法让 .htaccess 处理它？我在 .htaccess 中尝试`Deny from all`了规则，但它也不允许我在系统中使用我的图像。我想要实现的只是防止从我的数据目录访问目录（从 URL 直接访问时）。那个怎么样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T08:46:42.753

# c++ - 编译 C 和 C++

> ID：11755549
> 
> 赞同：0
> 
> 时间：2012-08-01T08:38:05.990
> 
> 标签：c++, c, compilation

我有一个用 C 编写的程序，我需要使用用 C++ 编写的[KDIS](http://sourceforge.net/projects/kdis/)库。我在 KDevelop 中使用 automake&friends 编译我的 C 程序。我怎样才能把所有东西编译在一起？因为我想在我的 C 程序中调用一些 KDIS 函数。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T08:43:42.040

如果您需要调用未声明的 C++ 函数`extern "C"`，那么您必须自己从 C++ 程序中执行此操作。您可以在项目中创建一个单独的 C++ 文件，该文件将您需要的所有库函数包装在`extern "C"`函数中以供项目的其余部分使用。您必须告诉 autotools 您同时使用 C 和 C++。文件扩展名应该足以决定哪个是哪个。

举个例子，考虑以下为一些用 C++ 编写的`mymagic.cc`创建绑定：`libmagic`

```
#include <libmagic/magic.hh>
extern "C" {
  int doMagic() {
    magic::Wizard w("foo", 42);
    magic::Result res = w.doMagic();
    return res.getResultCode();
  }
} 
```

对于您的应用程序的其余部分，`doMagic()`将仅显示为另一个 C 函数。但内部是 C++，所以它可以使用任何你想要的 C++ 结构。当你需要从你的库中传递东西时，你应该使用指向不透明类型的指针。因此，在`mymagic.h`您的 C 代码也使用的标头中，您可以编写

```
struct magicValue;
int doMagic(void);
struct magicValue* createMagic(void);
void destroyMagic(struct magicValue*); 
```

然后`mymagic.cc`你会更明确：

```
struct magicValue {
    magic::value v;
    magicValue(magic::value val) : v(val) { }
};
magicValue* createMagic() {
    return new magicValue(magic::value("foo"));
}
void destroyMagic(magicValue*) {
    delete magicValue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:42:03.050

[此链接](http://developers.sun.com/solaris/articles/mixing.html#cpp_from_c)可以帮助您了解如何在您的应用程序中混合使用 C 和 C++ 代码。

另外，看看[这个](https://stackoverflow.com/questions/199418/using-c-library-in-c-code)Stack Overflow 问题，我相信这就是你所需要的。

# codeigniter - 显示文章的一小部分并通过codeigniter中的阅读更多链接打开它的方法是什么？

> ID：11755550
> 
> 赞同：0
> 
> 时间：2012-08-01T08:38:05.860
> 
> 标签：codeigniter

我是新手编码员。这几周我学到了很多东西。现在我正在制作我的博客网站。我想要的是，在内容 div 中显示 6 或 8 篇文章的有限部分，并制作阅读更多链接以显示文章。

你能告诉我一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:42:59.930

加载字符串助手并使用 word_limiter、character_limiter（google for docs）

或者，包含与您的主要“内容”字段 (TEXT) 不同的名为“摘要”(varchar(255)) 的段落。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:50:43.763

最初加载字符串助手并执行以下操作

```
word_limiter("data",limit); 
```

[你可以在这里查看](http://codeigniter.com/user_guide/helpers/text_helper.html)

# css - CSS3 剪辑 div

> ID：11755552
> 
> 赞同：0
> 
> 时间：2012-08-01T08:38:26.677
> 
> 标签：css, css-transforms

代码可在[http://jsfiddle.net/rSSXu/](http://jsfiddle.net/rSSXu/)

```
<div id="parent">
    <div id="child">Child</div>
</div>​

#parent {
    margin-left:auto;
    margin-right:auto;
    height:200px;
    width:50%;
    background:#eee;
    overflow:none;

}

#child {
    width:10%;
    height:10%;
    margin:auto;
    background:red;
    -webkit-transform: translate(0px, 300px); 

} 
```

我有以下设置，我希望父 div “剪辑”，以便隐藏它之外的任何内容。有点像溢出：无，但这也适用于翻译。有没有办法做到这一点？谢谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:57:35.880

我不记得使用溢出：无，尝试溢出：隐藏

# java - 发布/重定向/获取 Struts 1

> ID：11755553
> 
> 赞同：3
> 
> 时间：2012-08-01T08:38:30.263
> 
> 标签：java, redirect, post, get, struts

我有一个 Struts 1 Web 应用程序，我想实现 post/redirect/get 以便在用户按下浏览器上的后退/前进按钮时强制重定向。主要问题是我们要实现会话超时。当会话过期时，我们将重定向到“sessionExpired”页面，但如果用户点击浏览器，我们希望隐藏前一页的信息。我已经添加了删除操作缓存的代码：

```
response.setHeader("Cache-Control", "private, no-store, no-cache, must-revalidate");
response.setHeader("Pragma", "no-cache"); 
```

但这会在浏览器的缓存中抛出“未找到页面”，我们希望运行重定向到页面而不是“无缓存”页面的内容。这就是我尝试实施 PRG 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:06:52.963

[Post/Redirect/Get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)不包括在用户按下返回按钮时强制重定向。它包括在成功的 POST 请求后发送重定向。

在 Struts 1 中，用 定义转发`redirect="true"`，如果您返回这个转发，Struts 将发送重定向：

```
<forward name="success" path="/index.do" redirect="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:52:41.003

在您的视图（Jsp 页面）上设置这些行。指令标记之后的页面顶部。

```
 response.setHeader("Cache-Control", "no-cache");
response.setHeader("Cache-Control", "no-store");
response.setDateHeader("Expires", 0);
response.setHeader("Pragma", "no-cache"); 
```

并`redirect="true"`在struts中使用。

# python - 将numpy数组作为单列保存到txt文件？

> ID：11755555
> 
> 赞同：2
> 
> 时间：2012-08-01T08:38:34.360
> 
> 标签：python, arrays, numpy

我正在尝试将一个 numpy 数组写入 txt 文件：

```
a = numpy.array([1,2,3])
numpy.savetxt('a.txt',a,fmt='%.3f') 
```

当我打开 txt 文件时，它看起来像：

```
1.0002.0003.000 
```

但是当我将它粘贴到 word 中时，它看起来像：

```
1.000

2.000

3.000 
```

问题是另一个程序逐行读取 txt 文件作为输入：

```
data = fid.readlines() 
```

结果它不能正常工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:34:35.630

`numpy.savetxt`有一个`newline`默认为`\n`（unix/linux 换行符）的关键字参数。

您可以手动设置它，也可以使用它`os.linesep`来选择当前操作系统的换行符。所以

```
import os
import numpy as np

a = np.array([1,2,3])
np.savetxt('a.txt', a, fmt='%.3f', newline=os.linesep) 
```

应该在一个带有 windows 编辑器的列中，并且在 windows 下运行的程序应该能够读取它。

# system.data.sqlite - 访问 SQLite 文件时出现“不是数据库文件”错误

> ID：11755557
> 
> 赞同：0
> 
> 时间：2012-08-01T08:38:37.083
> 
> 标签：system.data.sqlite

我和这个人有同样的问题， [访问 SQLite 文件时出错](https://stackoverflow.com/questions/3938443/error-accesing-sqlite-file)

谁能告诉它背后的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:06:42.850

现在问题已解决。我使用 SQLite Administrator 中的“迁移到 SQLite3”来重新保存相同的数据库文件并解决了问题。

# git - Mercurial 等价于 git whatchanged？

> ID：11755559
> 
> 赞同：4
> 
> 时间：2012-08-01T08:38:37.573
> 
> 标签：git, mercurial, diff

我想获得 Git 命令的类似输出：

```
$ git whatchanged <old_rev>..<new_rev> --pretty=oneline --name-status 
```

我读到这`hg outgoing`可以提供帮助，但它的帮助页面中没有任何与修订相关的内容：

`$ hg diff <old_rev>..<new_rev>`给出了差异，但输出是：

```
diff -r d3ed0d3eb928 -r 63329069147f hello.rb
--- a/hello.rb  Tue Jul 31 16:52:40 2012 +0530
+++ b/hello.rb  Wed Aug 01 11:15:33 2012 +0530
@@ -1,1 +1,1 @@
-print "Hello"
+print "Hello World" 
```

虽然我需要类似的东西：

```
bb3b9a6bc00b7203ab6491dbd062641fa60efb95 Fix for #4 and other small errors
M       .gitignore
A       config.ru
D       db/database.db
M       views/setup.haml
1c4ff29e5c7fc707c6fe314c060cd1935b300dd9 Added keyboard shortcuts and reload
M       README.md
A       public/javascript/keys.js
d0755d0b54cb4129fbf7730fe0bdf21a3996e224 Basic player completed
M       README.md
D       public/javascript/jquery-ui-1.8.21.custom.min.js
... 
```

我得到的`git whatchanged 1c4ff29e5c7fc707c6fe314c060cd1935b300dd9 bb3b9a6bc00b7203ab6491dbd062641fa60efb95 --pretty=oneline --name-status`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:31:55.020

你可以`changelog`试试这种风格。当然，它看起来并不完全相同，但它确实列出了提交所触及的文件，我认为这就是您要查找的文件。例子：

```
hg log --style changelog
hg outgoing --style changelog 
```

正如 Christian 所说，您可以使用模板将确切的输出自定义为无穷大。有关详细信息，请参阅[`hg help templating`](http://www.selenic.com/mercurial/hg.1.html#template-usage)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:30:30.440

您可以使用`hg log`它并[使用模板自定义输出](http://hgbook.red-bean.com/read/customizing-the-output-of-mercurial.html)。

例子：

```
hg log -r <old_rev>:<new_rev> --template "{node} {desc}\n{files}\n\n" 
```

这看起来*类似于*您的 Git 示例。
不过，文件列表看起来不一样（没有换行符）。

我自己从未尝试过，但也可以使用**样式**自定义输出（类似于模板，但您将样式保存在文件中并通过名称引用它）。
相关文档位于我在上面发布的同一链接上，位于页面底部。
显然，也可以在文件之间放置换行符（页面上有一个示例）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:26:59.200

如果您正在寻找一种获取哪些文件已更改的方法，但您不太担心格式类似于 git，那么我非常喜欢任何通常打印差异的命令上的 diffstat 开关。

```
# hg in --stat
# hg out --stat
# hg diff -r <old_rev>:<new_rev> --stat
... and a load more 
```

这不是完全相同的信息。它不是每个变更集，也没有说明文件是否被添加/修改/删除，但另一方面它给出了更改范围的一些概念。

# c# - Visual Studio 2005 中的自动更新版本号 (C++ / C#)

> ID：11755567
> 
> 赞同：0
> 
> 时间：2012-08-01T08:38:50.063
> 
> 标签：c#, c++, visual-studio-2005, build-automation, versioning

我想自动化我的构建过程的一部分，这样我可以单击一个按钮（或运行一个程序等），它将自动更新我的解决方案中所有 C++ 和 C# 项目中的版本号。

我所有的版本号都是基于日期的，所以很容易创建。

我该如何解决这个问题？Visual Studio 是否有任何内置功能允许这样做，或者如果没有，我该如何去做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:43:00.710

我可以推荐这个工具

[版本控制的构建](http://www.codeproject.com/Articles/5851/Versioning-Controlled-Build)

我已经使用它很多年了，它可以让您控制版本控制问题的各个方面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:23:49.633

它可以但仅适用于强程序集（在这种情况下，只需将星号 [*] 添加到您想要自动递增的数字）如果您的不是这种情况，您可以尝试[ProjectBuildCounter](http://build.codeplex.com/)。

它是免费的、易于使用的、独立的可执行文件。您必须将它附加到您的项目中，并且 - 瞧 - 版本在每次构建时都会增加。

可以根据需要用于尽可能多的项目。你可能会[下载](http://build.codeplex.com/). 使用信息[可在此处获得](http://www.youtube.com/watch?v=WuD7jpQmYck)

# perl - 仅使用 $self 或 ref($self) 从基类访问子包变量

> ID：11755569
> 
> 赞同：0
> 
> 时间：2012-08-01T08:38:53.540
> 
> 标签：perl

我有以下问题，可能是我试图以一种不好的方式解决它，所以如果你告诉我如何以正确的方式去做，我将非常感激！

我有一个基类，它有一个方法，我想访问基于真实对象类（ref（$self））的包变量。

```
#!/usr/bin/env perl

my $var = SubClass->new();
$var->method();

package BaseClass;

sub new { construct... }
sub method { 
   my $self = shift;

   # in this method I wan to get values from 'our %VAR' of the children class or ref($self) class, something like that:
   return ${ref($self)::VAR}{k1}; 

   # of course I can create a method and do it in the following way but I am not sure that it's a good idea
   return $self->get_var()->{k1};
}
sub get_var { die "Imaplement in children"; }

package SubClass;

use base 'BaseClass';

our %VAR = (k1 => 'smth', k2 => 'smth', ...);
sub get_var { return \%VAR } # don't like this idea

1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:38:20.787

使用该`%{ref($self)::VAR}`解决方案有时可能是最简单的，尽管偏执的程序员会包括一些检查：

```
# Accessing %__PACKAGE__::VAR:
# I hope that I'm not in a subclass,
#    because that would change the value reported by `ref($self)`
#    and I can't be bothered to search @ISA manually...

unless (defined ref $self) {
   die "\$self is not a reference!";
}
if (ref $self ~~ [qw/SCALAR ARRAY HASH
   CODE REF GLOB LVALUE FORMAT IO VSTRING Regexp /]) {
   die "\$self is not an object!";
}
no strict 'refs'; # Hehe, I can't use strict here :S
unless (%{ref($self).'::VAR'}) {
   warn "Umm, this hash is empty."
      . "I don't know if I just created it, or it is meant to be that way.";
}
return ${ref($self).'::VAR'}{k1}; 
```

总而言之，使用访问器方法不仅可以避免重复，而且更安全、更少hackish并且更面向对象：

```
sub return_var {
   # We know that we are in the right package.
   # We know we are accessing the correct hash.
   # It is irrelevant whether I call this method
   #    from the package/class or from an object.
   # And I'm glad to take the method performance penalty
   #    in exchange for clear code.
   return \%VAR;
} 
```

在结论＃2中，有不止一种方法可以做到这一点。在 Perl 中，没有“正确”的方法。尽管您可能会理解为什么我发现第二种解决方案更优雅。

# sql-server-2008-r2 - 打开以编辑表时列名无效

> ID：11755570
> 
> 赞同：0
> 
> 时间：2012-08-01T08:39:00.120
> 
> 标签：sql-server-2008-r2, ssms

我正在运行 SQL 2008 R2。我在现有表中添加了 3 列。没有任何问题。然后我打开表格以右键单击进行编辑（“编辑前 200 行”）。当我向新添加的列写入值时，它显示列名无效。我清除了 Intellisense 的缓存，但仍然是同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:42:33.213

尝试在 ObjectExplorer 上刷新表，只需按 F5 刷新并重试。您也可以只刷新受影响的表。

# android - Android：尝试在浏览器中打开本地 HTML 文件时，在某些设备上未发现活动异常

> ID：11755573
> 
> 赞同：10
> 
> 时间：2012-08-01T08:39:19.433
> 
> 标签：android, exception, browser, android-activity

当我尝试在 android 浏览器中打开本地 HTML 文件时遇到一个奇怪的错误。发生的错误是找不到活动异常：

```
android.content.ActivityNotFoundException: Unable to find explicit activity class {com.android.browser/com.android.browser.BrowserActivity}; have you declared this activity in your AndroidManifest.xml? 
```

对我来说真正奇怪的是，并非所有设备都发生此错误。它仅出现在以下设备上：

*   三星 Galaxy Nexus I (4.1.1)
*   三星 Galaxy Nexus II (4.1.1)
*   索尼平板电脑 S (4.0.3)

我已在以下设备上成功测试了我的代码：

*   三星 Galaxy SI (4.1.1)
*   三星盖乐世 S III
*   宏达一 X
*   HTC 欲望 S
*   三星 Galaxy S Plus (2.3.3)
*   三星 Galaxy Tab 10.1N
*   Android 版本从 2.3.3 到 4.1.0 的 AVD

最后，这是我用来用 Android 浏览器打开我的 HTML 文件的代码。我已经测试了这段代码的几种排列，省略了一些行，但它们都具有相同的效果。一旦我设置了组件或类，我就会得到上述异常。

```
Uri uri = Uri.parse(filePath);
Intent browserIntent = new Intent(Intent.ACTION_VIEW);
browserIntent.setComponent(new ComponentName("com.android.browser", "com.android.browser.BrowserActivity"));
browserIntent.setDataAndType(uri, "text/html");
browserIntent.addCategory(Intent.CATEGORY_BROWSABLE);
context.startActivity(browserIntent); 
```

我也试过

```
browserIntent.setClassName("com.android.browser", "com.android.browser.BrowserActivity"); 
```

代替

```
browserIntent.setComponent(new ComponentName("com.android.browser", "com.android.browser.BrowserActivity")); 
```

但同样的效果...

有人知道为什么会这样，我错过了什么吗？我已经为此搜索了几天，但找不到任何解决我问题的方法......

提前非常感谢，干杯

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T08:43:34.753

**可能**`com.android.browser.BrowserActivity`是因为这些设备中可能没有任何活动，这**取决于设备制造商**他们如何实现本机**浏览器应用程序**（活动名称和包名称）。

所以可能的解决方案是，

使用`PackageManger`并且`Intent`您可以检查特定的意图类别，如`Intent.CATEGORY_BROWSABLE`适用于任何应用程序（如果可用）然后将该应用程序设置为 ComponentName。

或者，您没有指定组件名称，例如，

```
browserIntent.setComponent(new ComponentName("com.android.browser", "com.android.browser.BrowserActivity")); 
```

让用户选择，哪个Activity会打开这个页面，

所以只是代码，

```
Uri uri = Uri.parse(filePath);
Intent browserIntent = new Intent(Intent.ACTION_VIEW);
browserIntent.setDataAndType(uri, "text/html");
browserIntent.addCategory(Intent.CATEGORY_BROWSABLE);
context.startActivity(browserIntent); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T07:25:38.767

在某些情况下，您可能希望使用本机浏览器而不是让用户选择一个，这就是我通过不同的包名称避免 ActivityNotFoundException 的方法，希望这会有所帮助:)

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW);
PackageManager packageManager = currentActivity.getPackageManager();
Uri uri = Uri.parse(url);
browserIntent.setDataAndType(uri, "text/html");
List<ResolveInfo> list = packageManager.queryIntentActivities(browserIntent, 0);
for (ResolveInfo resolveInfo : list) {
    String activityName = resolveInfo.activityInfo.name;
    if (activityName.contains("BrowserActivity")) {
        browserIntent =
                packageManager.getLaunchIntentForPackage(resolveInfo.activityInfo.packageName);
        ComponentName comp =
                new ComponentName(resolveInfo.activityInfo.packageName, resolveInfo.activityInfo.name);
        browserIntent.setAction(Intent.ACTION_VIEW);
        browserIntent.addCategory(Intent.CATEGORY_BROWSABLE);
        browserIntent.setComponent(comp);
        browserIntent.setData(uri);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-24T18:32:04.793

为什么不让系统决定使用哪个应用程序呢？如果我（例如）安装了 Chrome 并更喜欢使用 Chrome，我会有点生气，因为你强迫我使用默认浏览器。

这应该有效：

```
final Uri uri = Uri.parse(filePath);
Intent browserIntent = new Intent(Intent.ACTION_VIEW, uri);
browserIntent.addCategory(Intent.CATEGORY_BROWSABLE);
context.startActivity(browserIntent); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T08:43:42.683

你为什么要指定一个组件？把它放在你的意图之外，你应该没问题；动作、类别和数据/类型就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-01T22:58:51.040

新设备可以配备 Chrome 而不是本机浏览器，因此您应该使用它

`browserIntent.setComponent(new ComponentName("com.android.chrome", "com.google.android.apps.chrome.IntentDispatcher"));`

# php - 如何自定义 wordpress 仪表板徽标？

> ID：11755577
> 
> 赞同：0
> 
> 时间：2012-08-01T08:39:27.647
> 
> 标签：php, wordpress

谁能帮我弄清楚如何在 wordpress 插件中修改此图像？

![在此处输入图像描述](../Images/07b54c776dcf2f2259cb5caade62f98f.png)

我不想让它成为用户设置的选项，只是与我选择的带有预定义徽标的默认设置不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:25:09.827

如果您查看 HTML，您会发现它是一个[sprite](http://css-tricks.com/css-sprites/)。
所以它可以用你自己的css精灵推翻。

要将 css 添加到 wp-admin 使用[`wp_enqueue_style`](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)中，还请查看[此](http://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts)
问题？问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T16:37:46.973

使用以下代码更改仪表板徽标：

```
add_action('admin_head', 'my_custom_logo');

function my_custom_logo() {
echo '
<style type="text/css">
#header-logo { background-image: url('.get_bloginfo('template_directory').'/images/custom-logo.gif) !important; }
</style>
';
} 
```

# c# - .NET Web 服务 - 如何返回错误？

> ID：11755585
> 
> 赞同：3
> 
> 时间：2012-08-01T08:39:52.637
> 
> 标签：c#, .net, xml, web-services, error-handling

我最近一直在使用 c# asp.net (3.5) 开发一些 Web 服务。

我的方法就是这样，返回一个 User 对象，其中包含一些基本的用户相关字段（姓名、年龄、i 等）。

```
[WebMethod, SoapHeader("AuthHeader")]
public user[] Employees(int count)
{
    user[] myUsers = new user[count];

    <logic here inc. checking if user is authorised>...

    return myUsers;
} 
```

如果使用 Web 服务 ID 的客户端授权失败，则在 Web 服务中返回错误，格式正确。

实现这一目标的最佳实践方法是什么？我想简单地推送 Response.StatusCode 或 Null 返回不是一个好习惯？

我当前的有效负载 XML 当 auth'd 看起来像..

```
<ArrayOfUser>
    <user>
        <empid>57344</empid>
        <firstname>Dave</firstname>
        <surname>Johnson</surname>
    </user>
    <user>
        <empid>17324</empid>
        <firstname>Mike</firstname>
        <surname>Doe</surname>
    </user>
</ArrayOfUser> 
```

如果发生错误，我应该返回类似...的东西吗？

```
 <soap:error>
        <errorcode>12345</errorcode>
        <errorstring>Invalid username/password</errorstring>
    </soap:error> 
```

还是有更好的最佳实践方式？

第二个问题是，我将如何构造我的方法以便返回这样的 XML 结构？目前我的“Employees”方法是“User[]”类型的，所以必须返回一个“User”类型的数组，但是如果出现错误，我想返回一个不同的类型来模拟上面的 XML 结构，甚至是一个简单的说明发生错误的字符串。

我将如何实现这一目标？

任何帮助都会很棒！干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:02:51.680

只需让您的方法引发异常 - .Net 框架会将其转换为 SOAP 错误消息。

如果您想对返回的 SOAP 错误消息进行更多控制，请抛出[`SoapException`](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapexception.aspx)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-01T09:13:31.153

**对于错误处理：**您需要一个良好的异常处理框架来支持您的应用程序。如果您使用的是企业库异常处理，请使用以下代码行。

```
enter code here

catch (Exception ex)
{
    ExceptionPolicy.HandleException(ex, "Client Service Policy");
} 
```

这又取决于您想向用户显示什么消息。您可以记录实际的错误消息并向最终用户抛出自定义消息，您可以使用异常处理框架。

您可以获得有关实现异常处理框架的更多详细信息。 [http://www.devx.com/dotnet/Article/31463/1954](http://www.devx.com/dotnet/Article/31463/1954)

**对于返回 xml ：**您可以创建如下所示的元素。最后，您可以将 xelement 转换为字符串，并且可以在调用方方法中使用该字符串（该字符串只不过是 XML）

```
enter code here

string[] directoriesList = Directory.GetDirectories(System.IO.Path.GetFullPat ("\\mynetworkpath")));
XElement foldersXML = new XElement("Folders");
foldersXML.Add(from directory in valueList select new XElement("Folders", new XAttribute("name", directory.Split('\\')[directory.Split('\\').Length - 1]))); 
```

# c# - 如何将持续监听的服务器编写为服务

> ID：11755591
> 
> 赞同：1
> 
> 时间：2012-08-01T08:40:15.883
> 
> 标签：c#, .net, windows, windows-services, client-server

我正在编写一台服务器，它将持续监听客户端连接。它不需要任何用户交互。所以，我试图把它作为一种服务。我安装成功了，但是除了显示错误1053之外没有成功运行。我发现启动/停止方法应该在30秒内返回。就我而言，这意味着我的服务器应该停止操作并在 30 秒内返回。我不能在服务器上暗示这个约束，因为客户端可以随时连接。谁能告诉我一种将此服务器安装为服务的方法？

注1：我使用的是windows平台，c#语言和VS 2010。

注2：也欢迎其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:47:52.553

在没有看到您的代码的情况下，继续您在此处所说的内容，我会说您应该实现线程。

现在，您的应用程序开始运行并一直阻塞，直到客户端连接。这不是最佳实践，或者对于 Windows 服务来说，这甚至是不可能的，因为需要 30 秒。限制。

您应该做的是启动服务并初始化所有内容（因此它将在 30 秒内返回），然后启动不同的侦听线程。当客户端连接时启动另一个线程也可能是个好主意。在这种情况下，您可以处理多个客户端，而不仅仅是一个。

当然，我不知道您使用的是什么传输层或类似的，但请查看这个基于 TCP 的示例：[http ://www.switchonthecode.com/tutorials/csharp-tutorial-simple-threaded-tcp-server](http://www.switchonthecode.com/tutorials/csharp-tutorial-simple-threaded-tcp-server)

# jquery - arguments.callee 是如何工作的？

> ID：11755594
> 
> 赞同：0
> 
> 时间：2012-08-01T08:40:21.240
> 
> 标签：jquery

我有这个有效的代码：

```
$(document).ready(function() {
    $("#run").click(function() {
        $("div:animated").toggleClass("colored");
    });

    function animateIt() {
        $("#mover").slideToggle("slow", animateIt);
    }
    animateIt();
}); 
```

我们调用函数本身，因此`arguments.callee`我们不需要函数的名称。所以这也应该有效，但它没有。谁能告诉我为什么？

```
$(document).ready(function() {
    $("#run").click(function() {
        $("div:animated").toggleClass("colored");
    });

    function() {
        $("#mover").slideToggle("slow", arguments.callee);
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T08:45:28.410

在原始脚本中，您声明了函数`animateIt`，然后立即调用它，但在修改后的脚本中，您声明了闭包而不调用它。

你应该尝试改变这个：

```
function() {
  $("#mover").slideToggle("slow",arguments.callee);
} 
```

有了这个：

```
(function() {
  $("#mover").slideToggle("slow",arguments.callee);
})(); 
```

也就是说，你们都在同一行声明和调用闭包。

请记住，据我所知，非常不鼓励使用`arguments.callee`and`arguments.caller`并且应该避免使用。

# xcode - 对 TableView 中的单元格进行排序

> ID：11755595
> 
> 赞同：0
> 
> 时间：2012-08-01T08:40:24.353
> 
> 标签：xcode, tableview, cells, short

我有一个 UITableView 的问题。我已经将一个单元格放在第一个位置，当我按下它时，一个 int 控制 tableview 中的单元格数量，增加 1 个单位，然后重新加载 tableview。但是，我如何将我添加的单元格放在第一位？

解释图：[http ://cl.ly/image/3b1A1V081Q1l](http://cl.ly/image/3b1A1V081Q1l)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:46:51.080

您应该在表数据源中执行此操作；例如，如果它是一个数组，则重新排列数组中元素的顺序，以便在请求`– tableView:cellForRowAtIndexPath:`它时返回正确的元素。

# apache - Apache httpd proxypass cookie

> ID：11755597
> 
> 赞同：0
> 
> 时间：2012-08-01T08:40:31.833
> 
> 标签：apache, cookies, proxypass

Apache 在（虚拟 IP）上运行

```
 http://1.1.1.1:2222 
```

IIS 7.5 运行在

```
 http://1.1.1.1:80 
```

Apache Config（代理到 IIS 端口 80）

```
ProxyPass /a http://1.1.1.1:80/a
ProxyPassReverse /a http://1.1.1.1:80/a 
```

当我点击 apache 的 URL

```
http://1.1.1.1:2222/a , 
```

它返回一个 setCookie（来自 IIS 端口 80）

```
Set-Cookie:ASP.NET_SessionId=4wlnzzzzljdqnyyro55; path=/; HttpOnly 
```

从 chrome 的 web-inspector 来看，cookie 都设置在端口 2222 (apache) 和端口 80 (IIS) 上。

这是否意味着 Apache 将 cookie 代理到端口 80 上的 IIS，因此 cookie 设置在端口 80 和 2222 上？

还是我错过了什么？

# linux - crontab 不记录到文件

> ID：11755598
> 
> 赞同：0
> 
> 时间：2012-08-01T08:40:31.657
> 
> 标签：linux, cron, crontab

我每分钟都使用 crontab 执行我的脚本。但是脚本不能正常工作。这个脚本应该创建文件，记录到另一个文件并写入数据库。仅写入数据库工作。当我手动启动脚本时，它工作正常。这是脚本：

```
#!/usr/bin/php
<?php
require 'include/functions.php';
require 'include/logger.php';

$lock_file_name = "test.txt";
$lock_file = fopen($lock_file_name, "w+");
fclose($lock_file);

$log_file = "test.log";
$log = new log($log_file);
$logEnabled = 1;

if ($logEnabled==1) {$log->add("DEBUG: Start test.");}

if_dbconn();
$SQL = "INSERT INTO .`test` VALUES (1666, 6, 6, '6', '6', '6', '6', 6, '6', '6', 6, 6, 6, '6')";
mysql_db_query($db,$SQL);
?> 
```

我的 cron 看起来像这样：

```
* * * * * /usr/bin/php -f /path/to/script/testCron.php > /dev/null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:42:32.523

我会删除

```
> /dev/null 
```

并将其替换为将您的 stdout/stderr 记录到文件中以查看发生了什么。

```
> /tmp/cron.log 2>&1 
```

进程在非常有限的环境下运行在 cron 下，我怀疑您的程序期望环境中不存在某些内容，或者在不允许写入日志文件的目录中运行。上面的重定向会立即告诉你发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:43:08.250

您需要在运行脚本之前指定完整路径或更改当前目录。该脚本无权在 cron 启动它的目录中创建日志文件。

# sql-server-2008 - 我有一个表，其中包含一些字段，例如名字、公司名称等

> ID：11755599
> 
> 赞同：0
> 
> 时间：2012-08-01T08:40:35.447
> 
> 标签：sql-server-2008, c#-4.0

我有一个表，其中包含一些字段，如名字、公司名等。现在我想要第一个字符从“A”开始的公司名，如果公司名称为空，那么搜索条件将应用于名字，即第一个字符从“A”开始“。我该如何解决？给我查询。我已经应用了如下查询：

变种查询 = _affiliateRepository.Table; if (!showHidden) query = query.Where(a => a.Active);

```
 if (Where(from a in query where a.Address.Company.HasValue))
            query = from a in query where a.Address.FirstName.StartsWith("a") select a;
        else
            query = from a in query where a.Address.Company.StartsWith("a") select a;
        query = from a in query where a.Address.Company.StartsWith("a") select a; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:59:24.167

如果我理解您的问题，我认为您需要 SQL 中 COALESCE 的 LINQ 等效项。对于每一行，您需要同时查看公司名称和名字，以确定与哪个进行比较。

像这样的东西可能会起作用：

.Select (c => (c.Company ?? c.FirstName)) .Where (c => c.StartsWith ("A"))

# android - 安卓放大镜

> ID：11755600
> 
> 赞同：0
> 
> 时间：2012-08-01T08:40:35.993
> 
> 标签：android, graphics

我正在开发一个我迫切需要放大镜的机器人，我的场景是我在画布上有旋转位图，我需要在上面使用放大镜。（即当位图旋转时，我们需要放大某个区域）

问候
阿尔塔夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:04:09.443

我不确定，但我认为你可以使用矩阵和 createbitmap。这个想法基本上是从屏幕/位图中捕获一个矩形区域，将其写入一个新区域，然后将位图绘制在一个矩形中以将其炸毁。
这可能会有所帮助。 [Android：来自超大视图的位图](https://stackoverflow.com/questions/9296782/android-bitmap-from-oversized-view)

# google-chrome - Chrome：浏览器关闭时websocket连接未关闭

> ID：11755605
> 
> 赞同：12
> 
> 时间：2012-08-01T08:40:57.237
> 
> 标签：google-chrome, websocket, netty

我正在使用 Netty websockets，除了这个小问题，一切似乎都运行良好：

如果我关闭 js websocket 客户端的浏览器/选项卡，则在使用 Mozilla firefox（当前使用 firefox 14）时会自动关闭 websocket 连接，但在 Chrome 20/21 中不会发生同样的事情。

任何人都见过类似的问题/谁能告诉为什么连接没有自动关闭？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T06:41:04.957

我想我应该在铬错误部分早些时候检查过这个，但我不确定它是否是一个错误。之前有人报告过，并且已经存在铬错误：

[问题 51687：WebSocket：在重新加载/标签关闭时发送关闭代码 1001](http://code.google.com/p/chromium/issues/detail?id=51687&q=websocket&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)

更新：有人提交了一个补丁来解决这个问题，可以在上面的链接中看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:48:11.293

这可能不对，但我无法对您的问题发表评论。如果您有一个正在运行的应用程序并从“设置”->“幕后”中选择了“在 Chromium 关闭时继续运行后台应用程序”，Chrome/Chromium 并不会真正关闭。

可能是将 websocket 连接视为应用程序。尝试查看您正在运行的进程并终止您找到的任何 chrome/chromium 进程。

同样，这只是我的猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T00:17:36.070

当用户关闭窗口或浏览器时，Chrome 不会关闭连接。它将触发一个错误事件。

一种可能的解决方法可能如下所示：

```
 @OnError
    public void onErr(Throwable t) {
        onClose(this.container.getWsSession(), null);

    } 
```

但这每次都会关闭连接，触发错误。在自行关闭连接之前，您可能不想检查可投掷物。

如需更多讨论，请加入此问题：

[Websocket：关闭浏览器在chrome中触发onError（），但在Firefox中触发onClose（）事件](https://stackoverflow.com/questions/23599185/websocket-closing-browser-triggers-onerror-in-chrome-but-onclose-event-in-f)

# vb.net - .NET：使用 List(Of String) 作为新键/值集合的值的快速方法？

> ID：11755607
> 
> 赞同：1
> 
> 时间：2012-08-01T08:41:07.343
> 
> 标签：vb.net, collections

我有一个`List(Of String)`对象，需要根据字符串的值创建一个新集合。新集合将是一个具有两个字符串字段的自定义类 - 调用它们`Key`和`Value`（但它不是内置的 KeyValue 类，它是一个自定义类）。

的所有值`Key`都相同，只是`Value`我想从字符串列表中获取。例子：

```
Dim slValues = New List(Of String)({"Cod", "Halibut", "Herring"})
Dim myList   = New List(Of myClass)( ... amazing initialisation line here? )

Class myClass
  Public Key As String   ' This will always be "Fish"
  Public Value As String ' This will be the fish name.
End Class 
```

（请注意，我实际上无法访问我正在使用的类，因此不能将其更改`Public Key As String = "Fish"`为默认值。`Key`必须在运行时设置。）

我当然可以做一个循环并手动完成，但我想知道是否有一种奇思妙想的方式来实现这一点作为初始化行的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:51:27.037

这个怎么样

```
Dim myList = slValues.ConvertAll(Of myClass)( _
    Function(s) New YourClass With {.Key = "Fish", .Value = s}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:12:55.347

这是使用 Linq`Select`函数替代 Jodrell 的答案：

```
Dim myList = slValues.Select(Function(fish) New CustomClass With {.Key = "Fish", .Value=fish}).ToList() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:54:18.170

```
from x in Enumerable.Range(1, slValues.count-1).ToArray 
select new KeyValuePair(of string,myClass) with {.Key=slValues(x),.Value=myList(x)} 
```

希望能帮助到你。

# iphone - 如何在iphone中传递标签值

> ID：11755608
> 
> 赞同：0
> 
> 时间：2012-08-01T08:41:08.587
> 
> 标签：iphone, objective-c, ios

我有两个控制器 A 和 B 在 B 中有一个标签和一个字符串 在 A 我写了下面的代码

```
B *ObjB =[[B alloc]initWithNibName:@"B" bundle:nil];
ObjB.Mylabel.text=[NSString stringWithString:@"Add New name"];
ObjB.MyString=[NSString stringWithString:@"new string name"];
[self.navigationController pushViewController:ObjB animated:YES];
[ObjB release]; 
```

我只得到 B 中的 ObjB.MyString 值，没有得到标签文本。任何人都可以帮忙。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:52:57.973

假设这`MyLabel`是一个`UILabel`（旁注：避免 ivars 的大写名称 - 在 Objc 中，大写名称 [按约定] 用于类），未设置该值的原因是因为`B`尚未加载控制器的视图层次结构（即你的标签`nil`在这一点上）。所以你有三个选择：

1.  强制加载视图层次结构然后设置标签：

    `[ObjB loadView]; // Note: Apple says that you never should call this directly (just to illustrate my point)!!`

2.  通过首先请求视图，让系统为您加载层次结构：

    `id view = ObjB.view; // This is a bit of a 'hack' actually`

3.  只需在`B`控制器中添加另一个属性，设置它并`viewDidLoad`设置标签的文本（我认为这是最好的选择）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:49:33.410

在两个视图控制器之间传递数据的最佳方式是在控制器 B 中声明一个变量，以保存标签文本。在viewController B的头文件中

```
 NSString *labelText;

//Declare its property and synthesize in .m 
```

在控制器 A 中，在导航到控制器 B 之前，将此变量初始化为所需的文本，即在本例中为“添加新名称”。

```
B *ObjB =[[B alloc]initWithNibName:@"B" bundle:nil];
ObjB.labelText = [NSString stringWithString:@"Add New name"];
ObjB.MyString = [NSString stringWithString:@"new string name"];
[self.navigationController pushViewController:ObjB animated:YES]; 
```

接下来在控制器 B 的 viewDidLoad 中，将标签的文本分配给包含字符串的变量。

```
ViewDidLoad of B
MyLabel.Text = labelText;
//Assuming you have mapped MyLabel to the IB. 
```

我也将 ARC 用于我的所有项目，所以我不使用 release 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:13:46.087

这解决了我的问题

```
B *ObjB =[[B alloc]initWithNibName:@"B" bundle:nil];
[self.navigationController pushViewController:ObjB animated:YES];
ObjB.Mylabel.text=[NSString stringWithString:@"Add New name"];
ObjB.MyString=[NSString stringWithString:@"new string name"];
[ObjB release]; 
```

感谢您的即时回复

# php - 调用未定义的方法 Imagick::getImageCompression()

> ID：11755613
> 
> 赞同：3
> 
> 时间：2012-08-01T08:41:21.517
> 
> 标签：php, image, image-processing, imagemagick

我在使用[`getImageCompression()`](http://www.php.net/manual/en/imagick.getimagecompression.php)来自 的方法时遇到问题[`Imagick`](http://php.net/manual/en/book.imagick.php%3a)。当我使用它时，我收到一个错误（到目前为止还没有发现任何其他方法有任何问题）：

```
$img = new imagick('/path/to/jpeg');
$img->getImageCompose(); // some value
$img->getImageCompression(); // Call to undefined method Imagick::getImageCompression()
$img->getImageCompressionQuality(); // some value 
```

我正在运行`PHP 5.3.10`（`php5-imagick 3.1.0`我知道[它处于 beta 版本](http://pecl.php.net/package/imagick)，但[`getImageCompression()`已在 2.2.2 中发布](http://www.php.net/manual/en/imagick.getimagecompression.php)）和`ImageMagick 6.6.9-7`.

我是否遗漏了某些东西或者该`getImageCompression()`方法是否有效地遗漏了（如果有，是否有替代方法来检索图像压缩）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:19:23.660

[我在2.2.2](http://svn.php.net/viewvc/pecl/imagick/tags/RELEASE_2_2_2/imagick_class.c?view=markup)和[3.1.0RC2](http://svn.php.net/viewvc/pecl/imagick/tags/imagick-3.1.0RC2/imagick_class.c?view=markup)中都找不到这个方法

Setter 存在 ( `setImageCompression()`) ; 您引用的其他吸气剂也存在。

好像说明书在说谎。

# html - 子菜单悬停在左侧？

> ID：11755619
> 
> 赞同：0
> 
> 时间：2012-08-01T08:41:43.290
> 
> 标签：html, css

我正在尝试创建一个简单的子菜单，当您将鼠标悬停在主菜单上时会出现该子菜单。

谁能看到我哪里出错了？

例如，我创建了这个[小提琴](http://jsfiddle.net/uzi002/KSeph/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:48:15.377

试试这个： http: [//jsfiddle.net/KSeph/11/](http://jsfiddle.net/KSeph/11/) 它没有布局，但它可以工作。

这个css基本上提供了一种非常简单的方法来实现下拉：

```
.subMenu {
    float: right;
}
.subMenu ul li {
    float: left;
}

.subMenu ul ul {
    display: none;
    position: absolute;
}

.subMenu ul li:hover ul {
    display: block;
}

.subMenu ul ul li {
    float: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:53:05.253

嘿，现在像这样在你的 CSS 中添加两种样式

```
 .subMenu li{
        position:relative;}

.subsubmenu {
 position:absolute;
top:22px;
left:0;
} 
```

[现场演示](http://jsfiddle.net/KSeph/15/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:50:38.790

`.subsubmenu`添加时`left: 0; top: 0;`和删除`float: right !important;` 时`.subMenu ul li`添加`position: relative;`

# c - 在链接时找出外部变量的位置

> ID：11755620
> 
> 赞同：1
> 
> 时间：2012-08-01T08:41:43.257
> 
> 标签：c, gcc, linker

我正在做一个我没有开始的相当大的项目，它对不同的架构、编译器等相同的变量进行了多次重新定义。我必须按照模板进行修改（将函数添加到一些头文件中）那些已经存在的（被声明为外部的）。我想知道当我运行 GCC 时是否有办法找出这些 extern 函数链接到哪里（所以它们是在哪里定义的）？这将是惊人的！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:02:44.453

尝试使用[cscope](http://cscope.sourceforge.net/)。它为您的代码构建“索引”并帮助查找其上的任何符号。还可以将 cscope 配置为与 vim/emacs 一起使用。

# java - 使用 log4j 在服务器上找不到日志文件

> ID：11755624
> 
> 赞同：1
> 
> 时间：2012-08-01T08:42:02.747
> 
> 标签：java, tomcat, spring-mvc, log4j

我正在尝试第一次配置 log4j，但它没有创建 myTest.log 文件。下面是我的 log4j.properties 文件，该文件的位置是 WEB-INF/classes 文件夹。

```
log4j.rootLogger=INFO, stdout, com.myTest

#tomcat logger
#log4j.logger.org.apache.catalina=DEBUG

log4j.logger.com.myTest=INFO

log4j.logger.org.apache.commons.configuration.PropertiesConfiguration=DEBUG

#appenders
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=[%5p] %d{yyyy-MM-dd HH:mm:ss} %m%n

log4j.appender.com.myTest=org.apache.log4j.FileAppender 
log4j.appender.com.myTest.File=myTest.log 
log4j.appender.com.myTest.MaxFileSize=15MB 
log4j.appender.com.myTest.MaxBackupIndex=10 
log4j.appender.com.myTest.layout=org.apache.log4j.PatternLayout 
log4j.appender.com.myTest.layout.ConversionPattern=[%5p] %d{yyyy-MM-dd HH:mm:ss} %m%n

log4j.appender.org.apache.ibatis=org.apache.log4j.FileAppender 
log4j.appender.org.apache.ibatis.File=myTest.log 
log4j.appender.org.apache.ibatis.MaxFileSize=15MB 
log4j.appender.org.apache.ibatis.MaxBackupIndex=10 
log4j.appender.org.apache.ibatis.layout=org.apache.log4j.PatternLayout 
log4j.appender.org.apache.ibatis.layout.ConversionPattern=[%5p] %d{yyyy-MM-dd HH:mm:ss}     %m%n 
```

我的控制器类就像

```
@Controller
public class LoginController
{
static final Logger logger = Logger.getLogger(LoginController.class);

@RequestMapping("/login")
public ModelAndView login(){

    logger.debug("Test logs");
    logger.error("test error");

    return new ModelAndView("login"); 

}

 } 
```

但我在我的 Apache/log 文件夹中看不到任何 myTest.log 文件。这是应该的地方吗？

我使用的 Jar 文件是 log4j-1.2.16.jar。是不是还需要什么。

我正在使用 Ubuntu，这是我第一次使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:18:02.667

将 log4j.properties 文件放在 build/classes/ 文件夹中。

将文件路径放入 ${catalina.home}/logs/myTest.log。

```
 log4j.appender.com.myTest.File=${catalina.home}/log/myTest.log 
```

可以通过在 LoginController 类中编写以下代码来检查日志路径

```
 Enumeration e = Logger.getRootLogger().getAllAppenders();
    while ( e.hasMoreElements() ){
      Appender app = (Appender)e.nextElement();
     if ( app instanceof FileAppender ){
    System.out.println("File: " + ((FileAppender)app).getFile());
  } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:02:50.107

正如您在问题中**发布的那样，文件的****位置**是`log4j.properties`文件`WEB-INF/classes`夹。

要解决此问题，请尝试将`log4j.properties`文件放在`src`应用程序的文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-05T02:25:40.133

我遇到了同样的问题。在服务器机器上，log4j无法写入日志文件，但使用standout打印日志信息，它正在工作。（是吗？）我认为是权限问题。所以我在tomcat日志位置（logs /）中写入日志文件

```
log4j.appender.com.myTest.File=${catalina.home}/logs/myTest.log 
```

希望这对你有用！！

# c# - 应用程序未运行时自动激活进程

> ID：11755625
> 
> 赞同：0
> 
> 时间：2012-08-01T08:42:03.867
> 
> 标签：c#, asp.net, sql-server, automation

我正在研究重新注册和处理服务调用的程序。我在 asp.net c# 中工作，我的数据库在 Sql Server 上。每个呼叫都有一个状态，首先是“新”，当工作开始时变为“正在处理”，当工作完成时变为“已关闭”。在应用程序未运行的半夜结束一天后，我希望对不同类型状态的调用次数进行自动汇总。即使应用程序没有运行，如何通过应用程序或服务器或任何其他方式完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:52:01.997

您所描述的是[计划](http://msdn.microsoft.com/en-us/library/ms187320.aspx)在午夜运行的[SQL Server 代理](http://msdn.microsoft.com/en-us/library/ms189237.aspx) [作业。](http://msdn.microsoft.com/en-us/library/ms182079.aspx)

# html - 我可以使用 div 作为 UL 的直接子代吗？

> ID：11755628
> 
> 赞同：51
> 
> 时间：2012-08-01T08:42:27.053
> 
> 标签：html, css

我有这个代码：

```
<ul>
   <div>
   </div>
</ul> 
```

我觉得我的浏览器渲染它没有问题。我也在某个地方读过这个，它`li`应该只用作`ul`.

它是否正确？我不能`div`用作 的直接孩子`UL`吗？是否有任何文件可以解决上述混淆？

编辑：这个链接说我可以[http://css-tricks.com/forums/discussion/11593/divs-inside-uls/p1](http://css-tricks.com/forums/discussion/11593/divs-inside-uls/p1)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-01T08:44:06.153

不，唯一可能是子元素的元素`<ul>`是`<li>`。

[HTML 4](http://www.w3.org/TR/html4/struct/lists.html#h-10.2)：

```
<!ELEMENT UL - - (LI)+                 -- unordered list --> 
```

（另请参阅[如何阅读 DTD 中的内容模型定义](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.3.3.1)）

[HTML 5](http://www.w3.org/TR/html5/the-ul-element.html#the-ul-element)：

> 内容模型：零个或多个 li 元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T08:45:23.690

对于 HTML 5：

[http://www.w3.org/TR/html-markup/ul.html](http://www.w3.org/TR/html-markup/ul.html)

> 允许的内容
> 
> 零个或多个 li 元素

对于 HTML 4：

[http://www.w3.org/TR/html401/struct/lists.html#h-10.2](http://www.w3.org/TR/html401/struct/lists.html#h-10.2)

```
<!ELEMENT UL - - (LI)+ 
```

**编辑 ：**

我忘记了另一个 HTML5 :D （这与 W3C 的规范相同）

[http://www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-ul-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-ul-element)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-24T12:28:06.963

您可以像这样使用 div 标签， `ul-> li -> div`因为您只能在 ul 标签之后使用 li 标签，您的代码将运行良好但会出现验证错误

所以你可以像这样使用

```
 <ul>
     <li>
         <div></div>
     </li>
 </ul> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-04T05:11:53.247

不，div不能嵌套在元素内，只有<li>可以作为子元素。而不是将 div 包装在 ul 元素中。你可以做这样的事情

```
<ul class="class1">
 <li class="child1">
   <ul>
     <li>item1</li>
     <li>item2</li>
     <li>item3</li>
   </ul>
 </li>
<ul> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-01T08:44:11.617

不，如果你想要有效的标记，那么 div 永远不应该在 a 中，对不起。一些现代浏览器会在您打开 div 之前“自动关闭” ul 标签，因此请注意这一点

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T08:47:28.870

HTML[无序列表元素`<ul>`](https://developer.mozilla.org/en/HTML/Element/ul)表示一个项目的无序列表，即没有数字排序的项目的集合，它们在列表中的顺序是没有意义的。通常，无序列表项用项目符号显示，项目符号可以有多种形式，如点、圆形或方形。项目符号样式未在页面的 HTML 描述中定义，而是在其关联的 CSS 中使用 list-style-type 属性定义。

**允许内容：**

```
zero or more <li> elements 
```

# wordpress - Wordpress：限制添加到帖子的标签数量

> ID：11755632
> 
> 赞同：0
> 
> 时间：2012-08-01T08:42:30.997
> 
> 标签：wordpress

在这段代码中；

```
if (!is_array($keywords)) {
$keywords = explode(',', $keywords);
}
foreach ($keywords as $thetag) {
wp_add_post_tags($post_id, $thetag);
} 
```

如何限制添加到帖子的标签数量？

这行得通吗

```
if (!is_array($keywords)) {
$count=0;
$keywords = explode(',', $keywords);
}
foreach ($keywords as $thetag) {
$count++;
wp_add_post_tags($post_id, $thetag);
if( $count > 3 ) break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:53:33.373

是的，它起作用了！！！！！！！

```
if (!is_array($keywords)) {
$count=0;
$keywords = explode(',', $keywords);
}
foreach ($keywords as $thetag) {
$count++;
wp_add_post_tags($post_id, $thetag);
if( $count > 3 ) break;
} 
```

# twitter-bootstrap - Twitter 引导按钮组调整

> ID：11755637
> 
> 赞同：1
> 
> 时间：2012-08-01T08:42:35.547
> 
> 标签：twitter-bootstrap

我有一个按钮组，有三个按钮，我希望按钮大小相同并占用屏幕宽度（因为它是一个移动应用程序），我尝试添加 span4 但它没有用。这里的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T02:30:55.487

添加 CSS 类

```
btn-group-justified 
```

到按钮组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T02:55:40.187

[http://plnkr.co/edit/oZ8Gy2rmG9qxU2UeizVM](http://plnkr.co/edit/oZ8Gy2rmG9qxU2UeizVM "例子")

请参阅工作示例。基本上 100/3 应该是容器 div 内每个按钮的宽度

```
<div class="container">

     <ul class="list-inline">
       <li><button class="btn btn-default">Button</button></li>
       <li><button class="btn btn-default">Button</button></li>
       <li><button class="btn btn-default">Button</button></li>

     </ul>

   </div> 
```

# java - Java 泛型和多态

> ID：11755641
> 
> 赞同：3
> 
> 时间：2012-08-01T08:42:46.013
> 
> 标签：java, generics, polymorphism, type-parameter

为了减少项目中的代码重复，我在泛化一些类时出错，情况如下：

```
interface ClassRoot{}

public class ClassChild1 implements ClassRoot{
    // constructor is omitted for simplicity
    public Collection<ClassChild1> createList(){

        Collection<ClassChild1> col = getCollectionFromSomewhere();
        return col;
    }
}

public class Class1{
    protected <T extends ClassRoot> Collection<T> doSth(){
        Collection<T> myCol = null;
        ClassChild1 child = new ClassChild1();

        // here I get compile time assignment error
        // also (assuming that myCol not null) myCol.add(new ClassChild1());
        // is not permitted.
        myCol = child.createList();
        return myCol;
    }
} 
```

这不是反对多态现象吗？我知道，例如，

```
List<Object> list1; 
```

永远不能（也不应该为了类型安全而分配）：

```
List<String> list2; 
```

但是在这里我的情况不同，我指定了扩展某些特定类的类型参数，期望利用 OOP 多态性概念，并正确地执行正确的分配以实现正确的类。现在我有两个问题；

*   有人可以清楚地解释为什么在 Java 中这是被禁止的，出于什么正当理由？
*   如何通过使用类型参数或通配符来实现这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:45:47.343

那作业

```
Collection<T> myCol = null;
myCol = child.createList(); 
```

将失败，因为您正在分配`Collection<ClassChild1>`给`Collection`具有未知类型的参数化`T`，这可能是也可能不是`ClassChild1`。

您已指定`T`为在调用站点推断的，因此想象以下代码：

```
Class1 c1;
Collection<ClassChild2> c = c1.doSth(); 
```

您可以看到，如果编译器允许您编译这样的`doSth`方法，则编译器会将自己绘制成一个角落，因为在该方法中您希望将一个`ClassChild1`实例添加到在本例中恰好包含`ClassChild2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:54:15.413

```
Collection<ClassChild1> col = getCollectionFromSomewhere();
return col; 
```

正在返回一个集合，但实际上您的 ClassChild1 不是一个集合。这肯定会产生编译时错误。确保方法的返回类型必须是集合类型或其后代

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:03:15.117

`createList`不提供Collection，这也是一个错误。

您不能将 的列表分配给`ClassChild1`的列表`T`。

例如，如果您重命名`RootClass`为`Animal`,`ClassChild1`为`Cat`. 如果现在的一个实例`T`不是 a `Cat`，那么您显然无法完成您想要的作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:04:17.590

很难说是什么问题，因为：

```
public ClassChild1 createList(){ 
```

一定是错的（正如其他人所指出的那样）。它实际上是否说：

```
public Collection<ClassChild1> createList(){ 
```

这编译好：

```
import java.util.*;

interface ClassRoot {}

class ClassChild1 implements ClassRoot {

    public Collection<? extends ClassRoot> createList(){

        Collection<ClassChild1> col = new ArrayList<ClassChild1>();
        return col;
    }
}

class Class1{
    protected Collection<? extends ClassRoot> doSth(){
        Collection<? extends ClassRoot> myCol = null;
        ClassChild1 child = new ClassChild1();

        myCol = child.createList();
        return myCol;
    }
} 
```

我已声明`createList`返回可分配给`ClassRoot`. 它返回的内容与此兼容。

然后我改变`doSth`了返回相同的东西，所以它也兼容。

缺点是你仍然不能调用：

```
myCol.add(child); 
```

并且有一个很好的理由——即使我们不知道收藏品存在什么限制，但这并不意味着没有限制（关灯时房间不会消失）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T09:36:08.480

在此处考虑您的代码。您的 ClassChild 实现是，

```
public class ClassChild implements ClassRoot {
    public List<ClassChild> createList() {
        return Arrays.asList(new ClassChild[] {new ClassChild(), new ClassChild()});
    }

} 
```

你的 Class1 是

```
public class Class1 {

    public static <T extends ClassRoot> Collection<T> doSth(){
        Collection<T> myCol = null;
        ClassChild child = new ClassChild();
        /*you should note here*/
        myCol =  (Collection<T>) child.createList();
        return  myCol;
    }
} 
```

你必须停下来，在我提到的“你必须在这里注意”的地方停下来。如果你作为 Collection 进行强制转换，问题就解决了。但是谈到您的问题，您已经创建了一个名为 myCol 的集合，其中包含扩展 ClassRoot 的类型 T。但是 createList 将返回包含子类型 ClassRoot 的集合的保证是什么？所以你总是要明确地投射。

# c# - 重复动态对象创建的数据绑定

> ID：11755642
> 
> 赞同：0
> 
> 时间：2012-08-01T08:42:48.947
> 
> 标签：c#, wpf, linq, data-binding, dynamic

我找不到一个准确的词来描述我的问题（很抱歉）。

我想做的是：

创建一个**Stackpanel**，它将*垂直*保存其他**StackPanels**，这些**StackPanels**将根据数据库中的行数动态创建，每个**StackPanel**将保存两个**标签**（标题和描述），并且必须从 Linq 请求中数据绑定它们的值。

![动态数据绑定](../Images/17977db729f1263322ed862428eaa990.png)

```
<StackPanel Orientation="Vertical">
    <StackPanel Orientation="Horizontal">
        <Label x:Name="Title" />
        <Label x:Name="Description" />
    </StackPanel>
</Stackpanel> 
```

我已经使用**ObservableCollection** & **IEnumerable**创建了我的 Linq 请求。实际上，我可以使用 Debug.WriteLine() 命令获取值并打印它们。

任何人都可以帮我一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:07:44.830

尝试使用[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)

```
<StackPanel>
    <ItemsControl ItemsSource="{Binding YourObservableCollection}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <Label Content="{Binding Value1}"></Label>
                    <Label Content="{Binding Value2}"></Label>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</StackPanel> 
```

# android - Android Google Play 更改应用名称

> ID：11755649
> 
> 赞同：25
> 
> 时间：2012-08-01T08:43:26.700
> 
> 标签：android, google-play

在 Google Play 中发布后是否可以更改应用程序的名称？我还没有发布它，但我会去做。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-01T08:48:57.767

是的，您可以更改名称。您不能更改包名称。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T09:02:03.970

是的你可以。登录 Android 开发者控制台：http: [//developer.android.com/distribute/index.html](http://developer.android.com/distribute/index.html)

从您要从您提交的应用程序列表中更改的应用程序。

在包详细信息选项卡的下半部分，您将在 Title 字段中看到您可以更新它，它将更改您的应用程序的名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T08:58:41.820

如果您还没有发布应用程序..那么您可以转到您的项目并更改名称，签署 apk 并再次上传。您可以随时更改应用程序信息，而无需更改应用程序的版本号。

# java - Android：如何使用 minHeight 动态使视图具有相同的高度？

> ID：11755654
> 
> 赞同：0
> 
> 时间：2012-08-01T08:43:48.307
> 
> 标签：java, android, android-view

> **可能重复：**
> [Android：如何动态使视图具有相同的高度](https://stackoverflow.com/questions/11722646/android-how-to-make-the-views-the-same-height-dynamically)

如何使用 using 动态使视图具有相同的高度`minHeight`？

我正在 Android 应用程序中制作一张表格。现在我无法使视图具有相同的高度。

*   每行有 2 个`TextView`s`tmp_name`和`tmp_content`。
*   的高度`tmp_content`取决于 的长度`course_description(i)`。
*   `tmp_content`自动设置它的高度。
*   我想获得的高度`tmp_content`和重置高度`tmp_name`相同`tmp_content`。

如果您有任何提示，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:47:38.487

你可以简单地做到这一点，

```
 int height=tmp_content.getHeight();
    tmp_name.setHeight(height); 
```

设置内容后获取 TextView 的高度，然后将值提供给下一个 TextView

# eclipse - 如何将 Maven+jetty 项目作为动态 Web 项目导入 Eclipse？

> ID：11755658
> 
> 赞同：1
> 
> 时间：2012-08-01T08:44:08.357
> 
> 标签：eclipse, maven, eclipse-wtp, maven-jetty-plugin

我有一个使用 Jetty ( [pom )](https://bitbucket.org/mryoshio/neostruts2cmisexplorer/raw/a8bee632a43d/pom.xml)[的 Maven 项目](https://bitbucket.org/mryoshio/neostruts2cmisexplorer)，它可以像这样运行：

```
$ mvn jetty:run 
```

许多开发人员希望在 Eclipse 中对其进行调试。

**问题：**将项目导入 Eclipse 以使其可以作为 webapp 进行调试的最直接方法是什么？

* * *

**我的尝试：**

1.  运行`mvn eclipse:eclipse`或`mvn eclipse:eclipse -Dwtpversion=1.5`
2.  例如，在 Eclipse 中，定义`M2_REPO`指向 Maven 目录的变量`/home/nico/.m2/repository`
3.  导入 > 现有项目 > 选择项目目录 > 确定
4.  选中“Dynamic Web Project”，然后单击“Further configuration available...”并在“web content”中输入“src/main/webapp”。之后您无法更改它。

我觉得它离工作不远，但问题是：我不知道如何告诉 Eclipse 罐子在哪里。
有没有比`src/main/webapp/WEB-INF/lib`手动从 Maven 存储库复制所有需要的 jar 更好的解决方案？

注意：[这个问题](https://stackoverflow.com/q/6950103)非常相似，但接受的答案只是该过程的一个步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:20:06.323

1.  安装[运行码头运行](http://code.google.com/p/run-jetty-run/)
2.  跑`mvn eclipse:eclipse`
3.  例如，在 Eclipse 中，定义`M2_REPO`指向 Maven 目录的变量`/home/nico/.m2/repository`
4.  导入 > 现有项目 > 选择项目目录 > 确定
5.  右键单击项目>调试为>运行码头

现在，应用程序将在您的断点处停止，在您需要时逐步执行，等等。

# objective-c - Mac OS X 图像处理入门

> ID：11755664
> 
> 赞同：2
> 
> 时间：2012-08-01T08:44:27.917
> 
> 标签：objective-c, macos, cocoa, image-processing

我最近从 PC 搬到了 MacBook Pro。我开始阅读有关 Objective-C 的教程并使用 Cocoa 进行开发。我在日常工作中做了很多图像处理算法开发工作（逐个像素操作），所以我想为 OS X 创建一个或两个测试图像处理应用程序。我正在努力弄清楚从哪里开始 -假设我想创建一个简单的应用程序（我可以重复使用），如下所示：

1.  从文件菜单中的打开文件选项加载图像
2.  在 GUI 中显示它。
3.  单击按钮以应用逐像素处理
4.  更新显示的图像
5.  从文件菜单中的保存选项保存处理后的图像

任何指针或链接将不胜感激。

谢谢

其他信息：

1.  我对 Linux 中的 OpenCV 非常熟悉——虽然还没有考虑在 Objective-C/Cocoa/Xcode 环境中使用它——甚至不确定这是否是个好主意？

2.  我想使用 GPU 加速也会很好，但我不熟悉 OpenGL/OpenCL - 所以我可能暂时不得不把它放在长指上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T08:48:28.157

当您查看 Apple 平台时，您应该查看 CoreImage 框架 - 它会为您提供大部分可在您的应用程序中使用的预烘焙 cookie。

对于更高级的目的，您可以从[openCV](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)开始。

祝你好运！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:58:33.620

正如 samfisher 所说，OpenCV 在 Mac 上工作并不难，Core Image 是一个很棒的 Cocoa 框架，用于进行 GPU 加速的图像处理。我正在将我的 GPUImage 框架从 iOS 移植到 Mac，它完全是为了让加速图像处理变得容易使用，但不幸的是，现在这不起作用。

如果您刚开始使用 Mac，我可以指出您可能会忽略的一个工具是 Quartz Composer。您必须从[Apple 的开发人员站点](http://developer.apple.com/downloads)下载单独的 Graphics Tools 包来安装 Quartz Composer，因为它不再随 Xcode 一起提供。

Quartz Composer 是一个图形开发工具，可以让你拖放模块，连接输入和输出，并快速开发一些相当有趣的东西。它非常适合的一项任务是使用 Core Image 或 OpenGL 着色器进行图像处理的快速原型设计。我什至听说有人使用 OpenCV 来使用自定义补丁。您可以轻松地将图像或相机源连接到过滤器链中，然后编辑过滤器并在处理它们时查看实时更新，而无需编译运行周期。

如果你想要一些示例 QC 项目，我有几个链接来自我几年前写的[这篇文章。](http://www.sunsetlakesoftware.com/2010/10/22/gpu-accelerated-video-processing-mac-and-ios)它们都执行相同的基于颜色的对象跟踪，其中一个使用 Core Image，另一个使用 OpenGL 着色器。您可以深入研究它并尝试看看它是如何工作的，而无需过多地编写任何代码。

# c# - switch case .NET 中的代码优化

> ID：11755674
> 
> 赞同：1
> 
> 时间：2012-08-01T08:45:09.493
> 
> 标签：c#, .net, switch-statement

我在 C#.NET 中编写了一段糟糕的代码，我想对其进行优化。

目前我所能想到的就是将公共部分分成一个单独的方法。

**代码 ：**

```
if(condition1)
{     
   switch(condition)
       case 'A' :   //Some code
        break;
       case 'B' :   //Some code
        break;
       case 'C' :   //Some code
        break;
}

else if(condition2)
{     
   switch(condition)
       case 'a' :   //Some code
        break;
       case 'B' :   //Some code
        break;
       case 'C' :   //Some code
        break;
} 
```

请注意，case 'B' 和 case 'C' 的 case 语句条件是常见的。

非常感谢任何有关改进代码的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:52:23.413

如果他们的代码块应该执行相同的代码，为什么不堆叠 case 语句

像这样

```
case 'B' :
case 'C' :
{
//Do Some Code
}
break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:51:15.917

您所能做的就是将通用代码放在一起并检查那里的附加条件。

```
switch(condition)
{
   case 'A':
     if(condition1) //do something
     else //do something
     break;

  case 'a':
   same as above

  case 'B':
    break;

  case 'C':
    break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:56:49.237

```
case "a":
case "A":
    if ( condition1) {
        ...
    }
    else if { condition2}
        ...
    }
    break; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T09:08:14.847

我认为即使您优化了那段代码，它仍然会非常脆弱且难以维护。例如，我建议尝试使用策略模式来重构它（当然，如果可能的话）。

您将受益匪浅，因为您隔离了每个例程并以 OOP 方式进行操作，从而使将来更容易更改和维护。

# c# - C#中的SQL查询

> ID：11755676
> 
> 赞同：1
> 
> 时间：2012-08-01T08:45:27.447
> 
> 标签：c#, sql, join

我的 SQL 查询可能有问题。在这个查询中，我组合了 4 个不同的表。

*   我有一个`courses`存储一般信息的表（`course_number`，`course_title`）。
*   我有一张表`employees`，其中存储了员工的一般信息（`empname`和 a `job_id`）。
*   员工有工作。员工需要参加课程。这取决于他必须参加哪些课程。此信息存储在表中`job_course`（带有`job_id`和`course_id`）。
*   如果员工完成了课程，则将其存储在表中`emp_courses`（带有`e_id`和`course_id`）

现在我想搜索某个课程 - 当用户按下搜索按钮时，他应该得到两个不同的结果。

*   第一个：在这里你可以看到**哪个员工已经上过这门课程**（这个查询到目前为止有效）
*   第二个：在这里你可以看到**哪个员工还需要参加课程**。所以我需要检查该员工从事的工作以及他是否需要参加该课程。而且我只想拥有那些尚未完成的。这就是不起作用的查询

这里是：

```
OpenDb_Open("select course_number,course_title, empname from course 
INNER JOIN (job_course INNER JOIN (employee INNER JOIN emp_course  
ON emp_course.e_id<>employee.e_id) ON job_course.job_id=employee.job_id) 
ON course.course_id=job_course.course_id 
where course_number like '" + coursenumber + "'"); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:58:58.983

员工未参加的课程。

```
SELECT * FROM courses
WHERE course_number IN (
    SELECT course_id FROM job_course
    WHERE course_id NOT IN (
        SELECT course_id FROM emp_courses
        WHERE emp_id = {someid}
    ) AND job_id = (
        SELECT job_id FROM employees
        WHERE emp_id = {user_input}
    )
) 
```

哪些员工还需要参加课程。

```
SELECT emp_name FROM employees
WHERE emp_id NOT IN (
    SELECT emp_id FROM emp_courses
    WHERE course_id = {user_input}
) 
```

以上的变体。

```
SELECT emp_name FROM employees
WHERE emp_id NOT IN (
    SELECT emp_id FROM emp_courses
    WHERE course_id = (
        SELECT course_id FROM courses
        WHERE course_number = {user_input}
    )
) 
```

# jsf - JSF 属性引用范围内的对象，其生命周期比目标范围视图短

> ID：11755679
> 
> 赞同：3
> 
> 时间：2012-08-01T08:45:34.410
> 
> 标签：jsf, scope

我有一个视图范围的托管 bean，其托管属性绑定到查询字符串参数。JSF 给了我一个熟悉的例外：

javax.faces.FacesException：

```
Property reset references object in a scope with shorter lifetime than the target scope session 
```

例如：

```
<managed-bean>
  <managed-bean-name>userBean</managed-bean-name>
  <managed-bean-class>project.UserBean</managed-bean-class>
  <managed-bean-scope>view</managed-bean-scope>
  <managed-property>
        <property-name>reset</property-name>
        <value>#{param['reset']}}</value>
  </managed-property>
</managed-bean> 
```

有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:04:39.897

这是设计使然。托管属性的范围不能比托管 bean 本身的范围更窄。托管属性仅在 bean 的构造期间设置（在您的情况下是视图的开始），但在同一视图范围内的任何后续请求中，请求参数可能不再有效，并且 bean 可能会变为无效状态。这种设计限制阻止了这种情况。

无论如何，要实现特定的功能要求，只需使用`<f:viewParam>`。

```
<f:metadata>
    <f:viewParam name="reset" value="#{userBean.reset}" />
</f:metadata> 
```

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)

# java - 使用 XPath 获取 XML 子元素

> ID：11755680
> 
> 赞同：1
> 
> 时间：2012-08-01T08:45:35.717
> 
> 标签：java, xml, xpath

我有这个 XML：

```
<root>
  <items>
    <item1>
      <tag1>1</tag1>            
      <sub>
        <sub1>10 </sub1>
        <sub2>20 </sub2>
      </sub>
    </item1>

    <item2>
      <tag1>1</tag1>            
      <sub>
        <sub1> </sub1>
        <sub2> </sub2>
      </sub>        
    </item2>
  </items>
</root> 
```

我想获取`item1`元素以及子元素的名称和值。

也就是说，我想得到：`tag1`- 1 `,`sub1 `-`10 `,`sub2 `-20`。

我怎样才能做到这一点？到目前为止，我只能得到没有孩子的元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:54:36.157

```
Document doc = ...;
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression expr = xpath.compile("/root/items/item1/*/text()");
Object o = expr.evaluate(doc, XPathConstants.NODESET);
NodeList list = (NodeList) o; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:12:47.803

```
import org.w3c.dom.*;
import javax.xml.parsers.*;
import javax.xml.xpath.*;
/**
* File: Ex1.java @author ronda
*/
public class Ex1 {
public static void main(String[] args) throws Exception {
    DocumentBuilderFactory Factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = Factory.newDocumentBuilder();
    Document doc = builder.parse("myxml.xml");

    //creating an XPathFactory:
    XPathFactory factory = XPathFactory.newInstance();
    //using this factory to create an XPath object: 
    XPath xpath = factory.newXPath();

    // XPath Query for showing all nodes value
    XPathExpression expr = xpath.compile("//" + "item1" + "/*");
    Object result = expr.evaluate(doc, XPathConstants.NODESET);
    NodeList nodes = (NodeList) result;
    System.out.println(nodes.getLength());
    for (int i = 0; i < nodes.getLength(); i++) {

        Element el = (Element) nodes.item(i);

        System.out.println("tag: " + el.getNodeName());
        // seach for the Text children
        if (el.getFirstChild().getNodeType() == Node.TEXT_NODE)
            System.out.println("inner value:" + el.getFirstChild().getNodeValue());

        NodeList children = el.getChildNodes();
        for (int k = 0; k < children.getLength(); k++) {
            Node child = children.item(k);
            if (child.getNodeType() != Node.TEXT_NODE) {
                System.out.println("child tag: " + child.getNodeName());
                if (child.getFirstChild().getNodeType() == Node.TEXT_NODE)
                    System.out.println("inner child value:" + child.getFirstChild().getNodeValue());;
            }
        }
    }
}
} 
```

我在名为 myxml.xml 的文件中加载了您问题的 xml，得到了这个输出：

```
run:
2
tag: tag1
inner value:1
tag: sub
inner value:

child tag: sub1
inner child value:10 
child tag: sub2
inner child value:20 
```

...有点罗嗦，但让我们了解它是如何工作的。PS：我在[这里找到了一个很好的指南](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)

# c# - c# 获取指定单元格（最后一行的第 3 列）已编辑

> ID：11755681
> 
> 赞同：0
> 
> 时间：2012-08-01T08:45:36.413
> 
> 标签：c#, datagridview

我之前已经发布了一个关于此的主题，但是由于我犯了一些错误，所以我决定发布一个新主题以确保我的问题足够清楚。

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    if (dataGridView1.Rows.Count > 0)
    {   
        int nRowIndex = dataGridView1.Rows.Count-1;
        if (dataGridView1.Rows[nRowIndex].Cells[2].Value != null)
        {
            textBox2.Text = dataGridView1.Rows[nRowIndex].Cells[2].Value.ToString();
        }
        else
        {
            MessageBox.Show("NULL");
        }
    }
} 
```

在我的 DataGridView 中，我有 3 列，它们是 ID、名称、价格。我想获取价格的最后一个单元格，它位于 DataGridView 的最后一行。上面的代码导致我有 NullReferenceException 并且指定的单元格中确实有数据。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:51:45.363

尝试这个：

```
textBox2.Text = dataGridView1.Rows[nRowIndex].Cells["Price"].Value.ToString(); 
```

请报告。

# iphone - 删除NSString ios 中每次出现的标签

> ID：11755683
> 
> 赞同：0
> 
> 时间：2012-08-01T08:45:41.130
> 
> 标签：iphone, ios, regex, cocoa

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:11:02.490

我找到了解决方案

```
NSString *regexStr = @"<a ([^>]+)>([^>]+)</a>";

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexStr options:NSRegularExpressionCaseInsensitive error:NULL];

prodDescritpion = [regex stringByReplacingMatchesInString:prodDescritpion options:0 range:NSMakeRange(0, [prodDescritpion length]) withTemplate:@"$2"]; 
```

它工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:30:24.447

+ 运算符是贪婪的，这意味着它会在它找到的最后一次出现时停止。一个解决方案也可以是在非贪婪版本中使用它（即它在第一次出现时停止）

```
NSString *regexStr = @"<a.+?>.+?</a>"; 
```

# internet-explorer - 是否可以使用 Watir 定位特定的 IE 浏览器版本

> ID：11755686
> 
> 赞同：0
> 
> 时间：2012-08-01T08:45:57.247
> 
> 标签：internet-explorer, integration-testing, watir, watir-webdriver

我正在使用 Watir-webdriver 并且在我的测试机器上同时拥有 IE 32 位和 IE 64 位。当我使用创建浏览器实例时

```
browser = Watir::Browser.new :ie 
```

它默认打开 64 位 IE（这本身很有趣，因为它不是默认浏览器）。我希望能够以编程方式指定我所针对的 IE 版本（32 位或 64 位）。这可能吗，如果可以，怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:56:30.143

**Background**

Selenium-webdriver, which is what Watir-webdriver is using, determines the version to use by:

"The driver supports running 32-bit and 64-bit versions of the browser. The choice of how to determine which "bit-ness" to use in launching the browser depends on which version of the IEDriverServer.exe is launched. If the 32-bit version of IEDriverServer.exe is launched, the 32-bit version of IE will be launched. Similarly, if the 64-bit version of IEDriverServer.exe is launched, the 64-bit version of IE will be launched." - [http://code.google.com/p/selenium/wiki/InternetExplorerDriver](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)

Presumably you have the 64bit version installed.

**Solution**

Selenium-webdriver is hardcoded to the file IEDriverServer.exe. The quickest solution might be to override this. Try the following:

*   Download/extract both of the IEDriverServer for 32bit and 64bit versions
*   Rename them to IEDriverServer32.exe and IEDriverServer64.exe respectively
*   Ensure that both are in your path somewhere
*   Use the following code to specify which version to use

This is a pretty quick hack. I am sure is a more elegant solution.

```
require 'rubygems'
require 'watir-webdriver'

#Specify your version - 32bit or 64bit
version = '32bit'

#Determine the binary to use
case version
    when '32bit'
        $ie_binary = 'IEDriverServer32'
    when '64bit'
        $ie_binary = 'IEDriverServer64'
    else
        raise( "Invalid version - #{version}" )
end

#Override the method that determines the binary to get
module Selenium
    module WebDriver
        module IE
            class Server
                def self.get
                    binary = Platform.find_binary($ie_binary)
                    if binary
                        new(binary)
                    else
                        raise Error::WebDriverError,
                        "Unable to find standalone executable. Please download the IEDriverServer from http://code.google.com/p/selenium/downloads/list and place the executable on your PATH."
                    end
                end
            end
        end
    end
end

browser = Watir::Browser.new :ie
#=> Browser of your desired IE version should launch 
```

**Update - Add a bit option**

So that you can more nicely determine which browser to use, you can add a 'bit option' when creating an IE window. This is nicer than above, though still hacky (ie global variable).

```
require 'rubygems'
require 'watir-webdriver'

module Selenium
    module WebDriver
        module IE
            class Bridge
                alias_method :old_initialize, :initialize
                def initialize(opts = {})
                    $ie_binary = ''
                    case opts.delete(:bit)
                        when '32'
                            $ie_binary = 'IEDriverServer32'                     
                        when '64'
                            $ie_binary = 'IEDriverServer64'
                        else
                            $ie_binary = 'IEDriverServer'
                    end

                    old_initialize(opts)
                end
            end
        end
    end
end

module Selenium
    module WebDriver
        module IE   
            class Server
                def self.get                
                    binary = Platform.find_binary($ie_binary)
                    if binary
                        new(binary)
                    else
                        raise Error::WebDriverError,
                        "Unable to find standalone executable. Please download the IEDriverServer from http://code.google.com/p/selenium/downloads/list and place the executable on your PATH."
                    end
                end
            end
        end
    end
end

#Open and close a IE 32bit browser
browser = Watir::Browser.new :ie, {:bit => '32'}
browser.close

#Open and close a IE 64bit browser
browser = Watir::Browser.new :ie, {:bit => '64'}
browser.close 
```

# jquery - n次点击，n次重复点击功能，为什么？

> ID：11755688
> 
> 赞同：0
> 
> 时间：2012-08-01T08:45:58.433
> 
> 标签：jquery, click, repeat

嗨，我正在使用此代码：

```
 jQuery(document).ready(function(){
var number = 1;
///////////////////////////////////////////////////
    /* The button to see the single portfolio items */
jQuery('.cover a').unbind("click").click(function (coverclick){

    coverclick.preventDefault();
    coverclick.stopPropagation();
    coverclick.stopImmediatePropagation();
    number ++;
    /* Get the link */
    var coverlink = jQuery(this).attr('href');
    jQuery('.loadmask').show();
    jQuery('.loadmask-msg').show();
    jQuery('.upperdiv').animate({height : 'hide', opacity : 'hide', easing:   'EaseOutBounce'},'slow', function(){                                      jQuery('.upperdiv').html('');});
    jQuery('.upperdiv').load(coverlink+' .loading_div');
    jQuery('.upperdiv').ajaxComplete(function() {
        var  slideClass = 'all_project_images' + number;
        var  dentroClass = '.' + slideClass;
        jQuery('html,body').stop().animate({
                    scrollTop: jQuery(this).offset().top},
                    'slow');
        jQuery('.post_nav_portfolio').show();
        jQuery('.slideshow ul').removeClass().addClass(slideClass);
        jQuery(dentroClass).stop(false,true).responsiveSlides({
                    auto: true,
                    nav: true,
                    speed: 500});   
        jQuery('.upperdiv').animate({height : 'show', opacity : 'show', easing: 'EaseInBounce'},'slow');
        jQuery('.loadmask').hide();
        jQuery('.loadmask-msg').hide();
        jQuery('.cover').hover(function(){
                jQuery(this).children('.mimo_portfolio_image').stop().animate({opacity : 0.5},'fast');
                    }, function(){
                jQuery(this).children('.mimo_portfolio_image').stop().animate({opacity : 1},'fast');
                    }); 
        jQuery("a[rel^='prettyPhoto']").prettyPhoto();
        jQuery('.slideshow').hover(function(){
                jQuery(this).children('.rslides_nav').show('slow');
                }, function(){
                jQuery(this).children('.rslides_nav').hide('slow');
            });
            console.log(dentroClass);

            });

    return false;

});

    }); 
```

加载和显示一个投资组合项目，它加载并工作得很好，但我有一个重复的问题，console.log(dentroClass);

我可以看到第一次单击它记录 1 次变量，第二次单击记录 2 次，3 单击记录 3 次，所有功能都重复单击次数，如果是第五次单击，则重复 5 次功能。

我一直在使用 on(); 和关闭（）；和绑定（）；解绑（）；但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:52:22.070

我猜你每次点击时都会绑定 new`ajaxComplete`和handlers 。`hover`

您应该将所有这些绑定移到 click 函数之外。（这样它们只会运行一次。）

或在每次点击开始时取消绑定所有内容。

# javascript - Javascript（jQuery）...过滤选择器内文本中的字符？

> ID：11755691
> 
> 赞同：0
> 
> 时间：2012-08-01T08:46:20.510
> 
> 标签：javascript, jquery, regex, filter, character

什么是最好的解决方案，你会怎么做。

我的网站上有这个……</p>

```
<div class="desc">
   <p>
   Some text that is set via a CMS and is completely dynamic. 
   It contains sometimes a character like this § in the middle of the text.
   It could also contain another one §, you see!
   </p>
</div> 
```

我想知道如何为字符过滤此文本并将其`§`包装在跨度内。

`<span class="symbol">§</span>`

有什么想法吗？这样做时，我不想在我的网站上降低很多性能。

提前谢谢你，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:53:45.447

`findAndReplaceDOMText`是一个很棒的库，用于执行此操作以及更多功能（如果您需要该功能）。

> findAndReplaceDOMText 在 DOM 节点中搜索正则表达式匹配项，并使用指定元素包装所有匹配项（以及由节点边界分隔的部分匹配项）。

Github：[https](https://github.com/padolsey/findAndReplaceDOMText)
://github.com/padolsey/findAndReplaceDOMText 演示： http: [//padolsey.github.com/findAndReplaceDOMText/demo.html](http://padolsey.github.com/findAndReplaceDOMText/demo.html)

它使用正则表达式匹配字符串，它会自动为分布在多个节点上的字符串工作：

```
<p id="t">
   123 456 99<span>9 foo</span>
</p>

findAndReplaceDOMText(/9+/, document.getElementById('t'), 'em'); 
```

这将导致：

```
<p id="t">
   123 456 <em>99</em><span><em>9</em> foo</span>
</p> 
```

[（来自https://github.com/padolsey/findAndReplaceDOMText/blob/master/readme.md](https://github.com/padolsey/findAndReplaceDOMText/blob/master/readme.md)的示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:55:39.220

我会找到包含该`§`符号的所有段落（无需匹配每个段落），包装该符号的每次出现

```
$(".desc p:contains('§')").each(function() {
   $(this).html($(this).text().replace(/§/g, '<span class="symbol">§</span>'));   
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:52:06.227

尝试这个：

```
$(".desc p").each(function() {
    $(this).html($(this).text().replace(/§/g, "<span class=\"symbol\">§</span>"))
}); 
```

[**示例小提琴**](http://jsfiddle.net/kjTDw/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:52:47.723

见[演示](http://jsfiddle.net/uYZ78/)

```
$('p').each(function () {
  $(this).html($(this).text().replace(/\$/g, '<span>$</span>'));
});​ 
```

# android - 如何在android中使用And引擎让一个精灵落在另一个精灵身上？

> ID：11755693
> 
> 赞同：0
> 
> 时间：2012-08-01T08:46:21.523
> 
> 标签：android, sprite, andengine

嗨，我怎样才能将一个精灵放在另一个精灵上，如下图所示![在此处输入图像描述](../Images/f6edba89e9040459d7ee0e057fba8754.png)

如您所见，图像中有两个精灵 (1)。顶部的精灵应该放在底部的精灵之上，如图 (3) 所示。我尝试了一些 And engine 示例，但还没有得到任何解决方案.如果有人知道如何处理这个问题，请找到一些解决方案或任何来源。提前致谢

根据编辑附加代码

```
public class MainActivity extends SimpleBaseGameActivity {
// ===========================================================
// Constants
// ===========================================================

private static final int CAMERA_WIDTH = 720;
private static final int CAMERA_HEIGHT = 480;
private static final int LAYER_COUNT = 4;
 Scene scene;
// ===========================================================
// Fields
// ===========================================================

private Camera mCamera;

private Font mFont;

private BitmapTextureAtlas mBitmapTextureAtlas;
private ITextureRegion mBadgeTextureRegion;
private ITextureRegion mNextTextureRegion;

private static final IEaseFunction[][] EASEFUNCTIONS = new IEaseFunction[][]{
    new IEaseFunction[] {
            EaseLinear.getInstance(),
            EaseLinear.getInstance(),
            EaseLinear.getInstance()
    },

};

private int mCurrentEaseFunctionSet = 0;

private final Sprite[] mBadges = new Sprite[1];
//private final Text[] mEaseFunctionNameTexts = new Text[3];

// ===========================================================
// Constructors
// ===========================================================

// ===========================================================
// Getter & Setter
// ===========================================================

// ===========================================================
// Methods for/from SuperClass/Interfaces
// ===========================================================

public EngineOptions onCreateEngineOptions() {
    this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), this.mCamera);
}

public void onCreateResources() {
    /* The font. */
    final ITexture fontTexture = new BitmapTextureAtlas(this.getTextureManager(), 256, 256, TextureOptions.BILINEAR);
    this.mFont = new Font(this.getFontManager(), fontTexture, Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 32, true, Color.WHITE);
    this.mFont.load();

    /* The textures. */
    this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 256, 128, TextureOptions.BILINEAR);
    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
    this.mNextTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "next.png", 0, 0);
    this.mBadgeTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "badge.png", 97, 0);

    this.mBitmapTextureAtlas.load();
}

public Scene onCreateScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());

scene = new Scene();

    /* Create the sprites that will be moving. */

    this.mBadges[0] = new Sprite(0, CAMERA_HEIGHT - 300, this.mBadgeTextureRegion, this.getVertexBufferObjectManager());

    scene.attachChild(this.mBadges[0]);

    return scene;
}

public void onGameCreated() {

    this.reanimate();
    }

// ===========================================================
// Methods
// ===========================================================

private void reanimate() {
    this.runOnUpdateThread(new Runnable() {

        public void run() {
            final IEaseFunction[] currentEaseFunctionsSet = EASEFUNCTIONS[MainActivity.this.mCurrentEaseFunctionSet];
        //  final Text[] easeFunctionNameTexts = MainActivity.this.mEaseFunctionNameTexts;
            final Sprite[] faces = MainActivity.this.mBadges;

            //  easeFunctionNameTexts[i].setText(currentEaseFunctionsSet[i].getClass().getSimpleName());
                final Sprite face = faces[0];

                face.clearEntityModifiers();

                final float y = face.getY();
                face.setPosition(0, y);
                face.registerEntityModifier(new MoveModifier(3, 0, CAMERA_WIDTH - face.getWidth(), y, y, currentEaseFunctionsSet[0]));

        }
    });
}

// ===========================================================
// Inner and Anonymous Classes
// ===========================================================
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:07:53.267

只需添加此代码！

```
this.mBadges[1] = new Sprite(0, CAMERA_HEIGHT - 300, this.mBadgeTextureRegion, this.getVertexBufferObjectManager());

scene.attachChild(this.mBadges[1]);
this.mBadges[1].setPosition(positionX, mBadges[0].getY()-mBadges[1].getHeight()); 
```

无论您的 positionX 是什么，都将其替换。

# atk4 - FileStore 与 4.2.1 的分步示例

> ID：11755700
> 
> 赞同：1
> 
> 时间：2012-08-01T08:47:02.667
> 
> 标签：atk4

我想上传一个 csv 文件，对其进行验证，然后上传到现有模型中。但是，我正在使用 ATK4.2.1 并发现已经用谷歌搜索的示例代码要么缺少一些步骤，要么与 4.2.1 版本无关。

为此，在我的第一步中，我尝试混合和匹配代码以尝试启动并运行 fileStore，但到目前为止没有任何工作结果。

是否有任何人都可以指向我的分步教程/指南。Agiletoolkit.org 网站上的参考资料没有任何关于 atk4-addons 的示例；我能找到的。它似乎比仅仅向页面添加一个对象更复杂。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:06:27.233

您可以在此处找到一些安装说明：

[http://agiletoolkit.org/doc/filestore](http://agiletoolkit.org/doc/filestore)

1.  将此 SQL 导入数据库 atk4-addons/misc/docs/dbupdates/filestore-001.sql
2.  创建一个新页面，`page_fileadmin extends filestore/Page_FileAdmin`
3.  创建目录“上传”并使其可写。
4.  在您的模型中而不是 addField 使用`$this->add('filestore/File');`

如果您需要图像，请`filestore/Image`改用。

请加入[https://groups.google.com/forum/?fromgroups#!forum/agile-toolkit-devel](https://groups.google.com/forum/?fromgroups#!forum/agile-toolkit-devel)以获取有关新文档的更新。

# jquery - 带有 Jquery 的 Play 2 的 Scala 示例应用程序

> ID：11755702
> 
> 赞同：0
> 
> 时间：2012-08-01T08:47:09.573
> 
> 标签：jquery, scala, playframework, playframework-2.0

您能推荐任何使用 JQuery 和 Play 2.0 的有效 Scala 示例吗？我只找到了一个简单的 Java 版本。我想看看如何使用 Jquery 和 Play 模板配置 UI 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:19:37.960

这里有一些非常简单的例子：
[https ://github.com/jamesward/play2bars](https://github.com/jamesward/play2bars)

它们都使用 jQuery + JSON，但有不同的持久性选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:18:54.943

您可以查看Play 框架提供的[Scala 示例。](https://github.com/playframework/Play20/tree/master/samples/scala)

尤其是在[Zentask 示例](https://github.com/playframework/Play20/blob/master/samples/scala/zentasks)中，它在后台使用了 JQuery。

# xml-rpc - Bugzilla 2.x 中的 XMLRPC

> ID：11755705
> 
> 赞同：1
> 
> 时间：2012-08-01T08:47:21.930
> 
> 标签：xml-rpc, bugzilla

我需要在 Bugzilla 中自动记录错误。我用谷歌搜索并能够在 bugzilla 中使用 XML RPC。

但是我无法在我们的软件支持团队维护的 bugzilla 本地服务器中使用 XML RPC。我正在使用 Bugzilla 版本 2.20.2。这支持 XML RPC 吗？

我能够与 Bugzilla 的另一台服务器通信，即 3.6.2 。

我们如何在 Bugzilla 安装中启用 XMLRPC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T06:13:37.330

实际上，如果我们使用[此处](http://landfill.bugzilla.org/win32installer/)提供的安装程序，并且已经安装了所需的 perl 模块，它就可以正常工作

# svn - Git克隆连接超时

> ID：11755706
> 
> 赞同：4
> 
> 时间：2012-08-01T08:47:25.647
> 
> 标签：svn

我知道这看起来像一个愚蠢的问题，但如何下载这个网址？使用 git？ [svn 结帐 http://android-playground.googlecode.com/svn/ android-playground-read-only](http://code.google.com/p/android-playground/source/checkout)？

我正在尝试下载一些滑动标签的代码并将其作为我的参考，所以我按照网上的一些说明进行操作，但我无法下载它..它说连接超时。这是我的终端上的错误

```
Cloning into 'SwipeyTabsSample'...
fatal: unable to connect to android-playground.googlecode.com:
android-playground.googlecode.com[0: 173.194.72.82]: errno=Connection timed out
android-playground.googlecode.com[1: 2404:6800:4008:c01::52]: errno=Network is unreachable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:49:32.170

我想知道为什么没有人提到`git svn`：你**可以**使用 Git 来做到这一点：[`git svn`](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)标准 Git 发行版中包含。这需要一个 SVN 存储库并将其克隆到一个 Git 存储库中：

```
git svn clone http://android-playground.googlecode.com/svn/android-playground-read-only 
```

克隆完成后，您可以使用 Git 处理存储库。

由于它是只读的，因此您永远不会去`git svn dcommit`（将更改推回回购）。检查[手册页`git svn`](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)以了解更多可用的参数和命令（例如，不克隆完整的历史记录，而仅克隆最新版本等）。

`git svn`有（AFAIK）它没有正确克隆 SVN 存储库的标签和分支的问题。为了实现这一点，请检查[svn2git](https://github.com/nirvdrum/svn2git)。

* * *

**结语：**
我认为您只是从修订控制开始，因此认为 Git 和 SVN 将是相同的。如果我从今天开始，我会选择一个我将在未来使用的 RCS。来自 SVN，我没有后悔一天切换到 Git。

# memory - 标注 redis 集

> ID：11755709
> 
> 赞同：1
> 
> 时间：2012-08-01T08:47:29.660
> 
> 标签：memory, redis, dimension

我们想将 redis 用于我们的数据存储之一。我们很难“猜测”redis 存储的大小，我们希望有人能提供正确的帮助。

该商店将专门使用[Sorted Sets](http://redis.io/commands#sorted_set)构建。每个集合都有一个键，它是 1 到 10^10 之间的整数。我们目前有大约 800 万个密钥，但我们希望“快速”达到 3000 万个。

每个集合将有可变数量的元素，但平均值为 17 个元素，最大值为 135，最小值为 0。（如果我们需要提供其他数字，请告诉我，例如 st.dev。）。

排序集中的元素将是字符串。现在我们希望它们成为可能的最短字符串（5 或 6 个字符？），但仍要避免冲突。分数将是时间戳。

我们目前有大约 500 次写入/秒，但预计会增长 10 倍，我们目前有 3000 次读取/秒，预计也会增长 10 倍。

我们还将使用“转储”策略而不是 AOF。

我们的目标是使用单个（但很大）Redis 主存储（可能还有一些从属存储）。我们应该为我们的 redis 实例分配什么 RAM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:02:38.300

如果您使用 Redis 2.6，则可以从应用于 zset 的 ziplist 内存优化中受益，因为您的大多数 zset 都有少量项目。

要计算您需要的内存，您可以简单地用与您的要求相对应的少量键填充一个实例并进行推断。对于这个用例，内存消耗将随着键的数量线性增长。

我刚刚在我的系统上尝试过，每 100000 个密钥获得 30 MB（按照您的规范），这导致 30M 密钥需要 9 GB 的内存。您需要留出一些余量，并为节省时间花费的 COW 内存留出一些空间。

如果您小心的话，一个 12 GB 的服务器可能会工作。一个 16 GB 的服务器就可以了。

# asynchronous - cudaEventSynchronize 不同情况下的行为

> ID：11755713
> 
> 赞同：0
> 
> 时间：2012-08-01T08:47:40.227
> 
> 标签：asynchronous, cuda

我对 CUDA 调用 cudaEventSynchronize 有疑问。

AFAIK，它主动轮询事件，从而消耗 CPU 周期。如果我想让它同步，以便可以像内核执行一样产生 CPU，我该怎么做？

更具体地说，在以下情况下的预期行为是什么：

*   使用 CUDA_LAUNCH_BLOCKING=1 环境变量。
*   使用 cudaDeviceScheduleBlockingSync
*   使用 cudaDeviceScheduleYield

我一直在经历奇怪的行为，需要一些帮助来阐明这一点。Nvidia 有关特定技术方面的信息非常不愿意对此提供帮助……我想实现细节必须保密。

提前致谢，

何塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:11:34.230

如果您希望 cudaEventSynchronize 使用阻塞同步，则需要使用创建事件 `cudaError_t cudaEventCreateWithFlags (cudaEvent_t event, unsigned int ﬂags)`

`cudaEventBlockingSync`并作为旗帜传递。

# search - 在 Solr 中搜索位置

> ID：11755714
> 
> 赞同：1
> 
> 时间：2012-08-01T08:47:44.040
> 
> 标签：search, solr, street-address

我有四个要搜索的数据。

**城镇、城市、邮政编码、国家**

我可以通过以下任何一种方式使这些结果可搜索的最佳方式是什么：

*   伦敦，英国
*   英格兰威尔特郡斯温顿
*   英格兰威尔特郡
*   英国
*   威尔特郡
*   斯温顿

我可以规范化数据，但如果有人简单地搜索“伦敦”，我会得到重复的结果。

如果我只存储了“London, England”，而不仅仅是“London”，那么如果有人搜索“London”，它将找不到任何结果。

它是一个catch22。当用户搜索时，一个存储地址应该如何灵活？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:04:02.373

最好遵循上一个答案的建议。您应该添加一个字段位置并配置 schema.xml

添加到该部分 `<fieldType>`

```
 <fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/> 
```

添加到该部分`<field>`

```
<field name="location" type="location" indexed="true" stored="true" required="true" />

 <dynamicField name="*_coordinate"  type="tdouble" indexed="true"  stored="false"/> 
```

现在更新您的索引 solr/dataimport?command=delta-import

可以查询 &q= *:* &fq={!geofilt pt=45.15,-93.85 sfield=store d=5}

[http://wiki.apache.org/solr/SpatialSearch](http://wiki.apache.org/solr/SpatialSearch) http://wiki.apache.org/solr/SpatialSearchDev

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:03:23.077

最好的方法是使用 solr 空间搜索功能[http://wiki.apache.org/solr/SpatialSearch/](http://wiki.apache.org/solr/SpatialSearch/)但这需要访问地图数据服务，该服务可以返回位置的纬度/经度并将其存储在索尔记录。然后对搜索进行相同的查找以获取纬度/经度，与在位置上的文本搜索相比，您将能够进行半径搜索并获得更准确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T21:28:21.143

如果您没有可用的地理空间数据，您可以尝试[Herarchical Faceting](http://wiki.apache.org/solr/HierarchicalFaceting)。它以特定方式索引数据，允许在层次结构中进行查询，例如：

```
Document: England > London > Chelsea

Index: 0/England, 1/England/London, 2 England/London/Chelsea

Query: facet.field = category, facet.prefix = 1/London, facet.mincount = 1 
```

索引中有一些冗余，但在大多数情况下应该可以忽略不计。

# android - 解锁android设备时Activity重启

> ID：11755717
> 
> 赞同：0
> 
> 时间：2012-08-01T08:47:54.733
> 
> 标签：android, android-activity

在我的 android 应用程序中，我正在使用广播接收器开始活动。如果我的设备在此活动期间锁定并且如果我将其解锁然后活动重新启动意味着它再次运行创建请帮我解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:07:23.783

您在 AndroidManifest.xml 中的活动声明是什么？我认为你应该像这样将launchMode指定为“singleTask”：

```
<activity android:name=".Youracticity" android:launchMode="singleTask" android:configChanges="orientation|keyboardHidden" android:screenOrientation="portrait">
</activity> 
```

^-^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:15:08.437

在您的清单中，您是否有这样的内容：

```
<action android:name="android.intent.action.USER_PRESENT" />

        <receiver android:name="com.activities.app" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

如果是，请妥善处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:24:08.600

**用于检测屏幕开启和屏幕关闭注册广播接收器，如：**

```
<receiver android:name="receiverScreen">
    <intent-filter> 
        <action android:name="android.intent.action.SCREEN_ON" />
        <action android:name="android.intent.action.SCREEN_OFF" />
<action android:name="android.Intent.ACTION_USER_PRESENT" />
    </intent-filter> 
</receiver> 
```

**在活动或服务中：**

```
try {
          IntentFilter if= new IntentFilter(Intent.ACTION_SCREEN_ON);

          if.addAction(Intent.ACTION_SCREEN_OFF);
if.addAction(Intent.ACTION_USER_PRESENT);

          BroadcastReceiver mReceiver = new receiverScreen();

          registerReceiver(mReceiver, if);
     } catch (Exception e) {

     } 
```

**如果屏幕开/关发生，系统会通知您的接收器代码：**

```
public class receiverScreen extends BroadcastReceiver {

 @Override
 public void onReceive(Context context, Intent intent) {

     if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)){

     }
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)){

     }
if (intent.getAction().equals(Intent.ACTION_USER_PRESENT)){

     }
 }

} 
```

# qt - Qt4.8 中的跨线程问题

> ID：11755724
> 
> 赞同：1
> 
> 时间：2012-08-01T08:48:21.253
> 
> 标签：qt, qt4

我有这个代码：

CMyWindow 类：

```
class CMyWindow: public QMainWindow
{ // Q_OBJECT .... here  
private:
    CMyServer *server;
public:
    CMyWindow(QWidget *parent): QMainWindow(parent)
    {
        // Setup GUI here
        server = new CMyServer(this);
        server->startServer();
    }
    void thisChangeLabelCaption(QString str) {
        ui.lblStatus.setText(str);
    }
} 
```

和 CMyServer 类：

```
class CMyServer: public QTcpServer
{       
protected:
    void incomingConnection(int sockDesc) {
        /* Why below line can't be done :-| */
        ((CMyWindow *) parent())->thisChangeLabelCaption("New connection");
    }
} 
```

但是incomingConnection() 例程中的行似乎没有执行。

请告诉我这个问题的解决方案。

**更新：** 正如@vtmarvin 所说，我尝试过这种方式：

```
class CMyWindow: public QMainWindow
{
private:
    CMyServer *server;
protected slots:
    void editLabel(QString str) {
        thisChangeLabelCaption(str);
    }

public:
    CMyWindow(QWidget *parent): QMainWindow(parent) {
        server = new CMyServer(this);
        server->startServer();
    }

    void thisChangeLabelCaption(QString str) {
        ui.lblStatus.setText(str);
    }
}

class CMyServer: public QTcpServer
{
Q_SIGNAL:
    void setText(QString str);

protected:
    void incomingConnection(int sockDesc) {
        /* Why below line can't be done :-| */
        emit setText("New connection");
    }

public:
    CMyServer(QObject *parent): QTcpServer(parent)
    {
        connect(this, SIGNAL(setText(QString)), parent, SLOT(editLabel(QString)), Qt::QueuedConnection);
    }
} 
```

但没有更好的结果:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:20:31.593

除了主线程（拥有 QMainWindow 的线程）[之外，您不能从其他线程更改 UI 。](http://doc.qt.nokia.com/4.7-snapshot/threads-qobject.html)我想您的 CMyServer::incomingConnection 是由 QTcpServer 线程调用的。您必须使用 Qt::QueuedConnection 类型执行信号槽。

# android - 如何嗅探从 Android 模拟器到远程服务器的 HTTPS 流量？

> ID：11755730
> 
> 赞同：14
> 
> 时间：2012-08-01T08:48:50.140
> 
> 标签：android, fiddler, sniffer

我想监控`HTTPS`从我的应用程序到远程服务器的流量。我正在尝试遵循[此说明](http://aurir.wordpress.com/2010/03/22/tutorial-getting-android-emulator-working-with-fiddler-http-proxy-tool/)，它适用于`HTTP`（没有`s`），但不适用于`HTTPS`.

怎么了？我应该在我的应用程序中编写一些自定义代码来使用`https-proxy`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-26T13:48:25.200

最简单的方法是使用[CharlesProxy](http://www.charlesproxy.com/)为您代理您的设备或模拟器流量。您需要做的唯一额外步骤是在您的设备/模拟器上安装 CharlesProxy SSL 证书，这非常简单：

从 Charles Proxy 下载证书（在他们的帮助菜单中）并将其放置在您的设备上，然后通过设备上的安全设置进行安装。

然后，您将设备或模拟器网络连接配置为使用手动代理并将其设置为 Charles 代理地址和端口。启用 SSL 代理，您的 SSL 连接将通过 Charles 端到端安全地路由，并且 Charles 将能够清楚地向您显示请求和响应的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:06:51.297

你的意思是你根本看不到流量还是你把它加密了？这是 Web 应用程序还是本机应用程序？您使用的是哪个 Android 版本？手机还是模拟器？

通常，如果您正确设置代理，您将获得流量，但已加密，因此您无法读取它。为了在 Fiddler 中查看实际内容，您需要您的设备信任 Fiddler 的根证书（用于即时创建假证书）。看到这个：

[http://www.fiddler2.com/fiddler/help/httpsdecryption.asp](http://www.fiddler2.com/fiddler/help/httpsdecryption.asp)

不幸的是，我还没有找到一种方法将根证书添加到 android 设备，而不是根它并替换证书存储（像[这样](http://nblock.org/2011/09/03/how-to-update-the-android-certificate-store/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:03:18.183

我正在使用[WireShark](http://www.wireshark.org/)进行嗅探，它允许您监视和过滤原始数据。但是因为您使用 https 并且所有交易都加密了，所以我想它对您没有帮助。可能您可以从 https 切换到 http 进行调试，然后当一切正常时，将协议更改回 https

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-02-21T23:50:08.290

https 意味着 http 安全，所以它显然不能那么容易被嗅探。如果它与普通 http 一样不安全，那又有什么意义呢？

您必须了解更多有关安全网络通信的知识。或者，长话短说，至少您必须学习如何使用专门设计的 http 代理，例如 charles [http://www.charlesproxy.com/documentation/welcome/](http://www.charlesproxy.com/documentation/welcome/)，这样您就可以监控自己的 https 流量清晰的形式。

# ios - 批准证书后刷新 iOS 配置文件

> ID：11755733
> 
> 赞同：5
> 
> 时间：2012-08-01T08:49:09.130
> 
> 标签：ios, xcode, provisioning-profile

我以团队成员身份注册成为 iOS 开发人员（ios 大学计划）。我要求他们批准的证书。

因此，我在我的配置文件中单击了刷新按钮，但它给出了一个错误，提示所选团队没有符合此功能的计划成员资格。

如您所见，我的 iPhone 设备旁边有一个绿灯。我的团队管理员无法找到发生此问题的原因。

你知道为什么会这样吗？

我有 Xcode 4.4、iPhone 5.1.1。

![在此处输入图像描述](../Images/682f848bd5f0d372c4c51792c640e85f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:11:09.677

[从https://developer.apple.com/devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/index.action)下载开发者资料和证书-> 但目前 (10-29-12) 开发者门户不可用 -> 正在进行维护。

# reflection - 通过scala 2.10中的反射调用构造函数

> ID：11755735
> 
> 赞同：2
> 
> 时间：2012-08-01T08:49:16.913
> 
> 标签：reflection, constructor, scala-2.10

在 scala 2.10 (M4+) 中调用类的构造函数的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:18:22.830

回答我自己的问题：调用构造函数与调用方法不同。这是在 scala 2.10 中执行此操作的正确方法

```
import reflect.runtime.universe._
import reflect.runtime.currentMirror
val typ = typeOf[Range]
val constructor = typ.members.find(_.kind == "constructor").get.asMethodSymbol
currentMirror reflectClass typ.typeSymbol.asClassSymbol reflectConstructor constructor apply (1,10,1) 
```

正如预期的那样，结果是：

```
res7: Any = Range(1, 2, 3, 4, 5, 6, 7, 8, 9) 
```

# ajax - AjaxStatus 不使用对话框

> ID：11755739
> 
> 赞同：1
> 
> 时间：2012-08-01T08:49:42.750
> 
> 标签：ajax, jsf-2, primefaces

我有一个用于搜索的 ajaxstatus 和对话框

```
<h:body>
    <p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>  

    <p:dialog id="loading" modal="true" widgetVar="statusDialog" header="" draggable="false" closable="false">  
        <p:graphicImage value="/images/ajax-loader.gif" />  
    </p:dialog> 
```

对话部分

```
<p:dialog id="showDial" header="Search" widgetVar="srch" resizable="false" >
                    <h:panelGrid id="searchGrid" columns="2" cellpadding="10" >
                        <h:outputLabel id="srchIdLbl" value="Employee ID:" />
                        <p:inputText id="srchIdTxt" value="#{employee.employeeId}" />

                        <p:commandButton id="search1" value="Search" type="submit" action ="#{employee.search()}" 
                                         update="patientTbl"/>
                        <p:commandButton id="reset1" value="Reset" type="reset" /> 
                    </h:panelGrid>
                </p:dialog> 
```

上面的代码工作正常，它显示加载对话框。但是一旦搜索完成，对话框将保留在屏幕中。我在 commandButton id="search1" 中添加了以下代码以关闭对话框

```
onComplete="showDialog.hide()" 
```

**问题：* *如果我添加上面的行，则不会显示 AjaxStatus。我想知道为什么它不显示。

我还尝试将以下代码添加到 commandButton id="search1"

```
onclick="statusDialog.show()" onselect="statusDialog.show()" onmousedown="statusDialog.show()" onComplete="showDialog.hide() statusDialog.hide()" 
```

**问题**在上面的代码中，对话框的背景被禁用，直到 ManagedBeans 代码完成并且对话框也关闭，但是当我单击搜索按钮时，即使单击重置按钮，它也会加载先前输入的搜索参数，数据不会消失。

我如何克服先前输入的数据不去的上述问题，或者如何以更好的方式执行 Ajaxstatus 以避免上述问题。

# xaml - 文本块中的水印

> ID：11755740
> 
> 赞同：0
> 
> 时间：2012-08-01T08:49:43.403
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml

我正在尝试使水印出现在 TexBox 内，我使用 Canvas 标签完成了此操作：

```
 <Canvas Height="60" Width="500" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,5">
            <TextBox Width="500" Height="30" Canvas.Left="0" Canvas.Top="0" FontSize="18"></TextBox>
            <TextBlock x:Name="whereAreyouWatermark" Canvas.Left="15" Canvas.Top="7" Height="30" FontSize="16" 
                       Foreground="#777777" Width="500">
                <Run x:Uid="text2"></Run> <Italic FontSize="13"><Run x:Uid="text3"></Run></Italic>
            </TextBlock>
        </Canvas> 
```

但是，现在当光标移过文本块时，它不是“I”图标，而是一个普通指针。在 CSS 中，我会像“指针：文本”一样更改光标。

如何在 XAML 中执行此操作？

此外，当按下我希望焦点转到背景文本框时，我认为最好的方法是拦截文本块的 gotfocus 事件并将焦点代码传递给文本框。我认为在 iOS 中你可以使用一个简单地通过事件的层。

非常感谢你，正如我们在伦敦一直说的那样；-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:22:07.100

我建议查看[WinRT XAML 工具包的 WatermarkTextBox](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/16885#310525)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:43:14.290

将默认文本设置为某些内容，一旦获得焦点事件，请使用用户键入的任何内容清除文本。当它是 LostFocus 时，再次放置水印。您的 IBeam 光标不会成为此解决方案的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:38:37.403

更简单的解决方案是为 TextBox 设置一些默认文本（将用作水印）。在 GotFocus 事件中，清除后面代码中的文本。在 LostFocus 事件中，检查用户是否输入了一些文本或 TextBox 是否为空。如果它有一些用户文本，那就顺其自然吧。如果为空，则放回水印文字！

# sql-server - 将数据库从 SQL Server 2008 迁移到 SQL Server 2005

> ID：11755746
> 
> 赞同：0
> 
> 时间：2012-08-01T08:50:18.567
> 
> 标签：sql-server

我想将我的 SQL Server 2008 数据库移动到另一台机器上的 SQL Server 2005 Express。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:07:46.690

没有“内置”方法可以将数据库从较新的 SQL Server 版本移动到较旧的版本。

我知道的唯一方法是使用 SQL Server 2008 的[“生成脚本”向导](http://www.kodyaz.com/articles/sql-server-script-data-with-generate-script-wizard.aspx)为整个数据库（表**和**数据）编写脚本，并在 SQL Server 2005 上执行这些脚本以将数据插入其中。

*（将数据库从较旧的 SQL Server 版本移动到较新的版本会更容易 - 只需备份和恢复，SQL Server 会自动将其转换为新版本）*

# c# - 当 DataGridView.SelectionMode 为 FullRowSelect 时，剪贴板复制失败

> ID：11755747
> 
> 赞同：3
> 
> 时间：2012-08-01T08:50:18.943
> 
> 标签：c#, winforms, datagridview

在 Windows 窗体中，如果我创建一个包含几行和几列的简单 DataGridView 控件，然后将 SelectionMode 属性设置为 FullRowSelect，剪贴板的复制功能会出现奇怪的行为：

When a row is selected and user hits ctrl-c, the full row is copied to the clipboard with \t characters between cells, as expected.

当用户双击并编辑单个单元格，并且在该单元格内用户选择文本的一部分并按 ctrl-c 时，仍然会复制整行，而不是所选文本的一部分！

作为一种解决方法，我尝试在 keydown 事件上进行剪贴板复制，但是当编辑控件处于编辑模式时不会触发该事件。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T08:57:30.993

作为解决方法：

编辑时禁用剪贴板副本

```
 private void dataGridView1_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
        this.dataGridView1.ClipboardCopyMode = DataGridViewClipboardCopyMode.Disable;
    }

    private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        this.dataGridView1.ClipboardCopyMode = DataGridViewClipboardCopyMode.EnableWithoutHeaderText;
    } 
```

# mysql - mysql数据库海量记录

> ID：11755752
> 
> 赞同：0
> 
> 时间：2012-08-01T08:50:43.367
> 
> 标签：mysql, records

我有一个包含 100M 记录的数据库表。我有一个需要 20 分钟才能运行的查询 - 我怎样才能让它简单快速？

```
SELECT newnum,
       Sum(Ceil(seconds / 60)) AS ttime
FROM   astb
GROUP BY newnum
ORDER  BY ttime DESC 
LIMIT 100; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:27:17.193

It's not great database design, but can you add a column to hold `ceil(seconds/60)`, so you don't have to recompute it all the time?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:00:41.497

`ORDER BY`并`LIMIT`最好使用索引。因此，如果可能的话，您可以在 column 上有索引`newnum`。

另一点是您正在计算一个巨大表中的每条记录。我强烈建议先在临时表中选择记录，而不是对这些记录进行计算。

编辑更新脚本：您可以像这样使用临时表：

```
CREATE TEMPORARY TABLE temp AS 
(SELECT newnum, SUM(seconds) AS ttime 
FROM astb GROUP BY newnum)

SELECT newnum, CEIL(ttime / 60) AS ttime
FROM temp
ORDER  BY ttime DESC 
LIMIT 100;

DROP TABLE temp; 
```

# ruby-on-rails - axslx - 如何检查数组元素是否存在，如果存在则更改其输出？

> ID：11755755
> 
> 赞同：0
> 
> 时间：2012-08-01T08:51:11.203
> 
> 标签：ruby-on-rails, axlsx

我有一个 Xpath 查询，它接受使用 Axslx 输出的数组元素，我需要为某些条件整理我的输出，其中之一是“包含的软件”

我的 xpath 抓取以下 URL [http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1](http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1)

我的代码示例如下：

```
clues = Array.new
clues << 'Optical drive'
clues << 'Pointing device'
clues << 'Software included'

selector = "//td[text()='%s']/following-sibling::td"

data = clues.map do |clue| 
         xpath = selector % clue
         [clue, doc.at(xpath).text.strip]
       end

Axlsx::Package.new do |p|
  p.workbook.add_worksheet do |sheet|
    data.each { |datum| sheet.add_row datum }
  end
  p.serialize 'output.xlsx'
end 
```

**我当前的输出格式**

![在此处输入图像描述](../Images/e326268ddaff4ed6ebf5a2f42d361564.png)

**我想要的输出格式**

![在此处输入图像描述](../Images/2e6ecf3aa676fcb87fc3fcb1dbcc46a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:30:31.170

如果您可以始终使用“；”来依赖数据 对于分隔符，试试这个：

```
data = []
clues.each do |clue|
  xpath = selector % clue
  details = doc.at(xpath).text.strip.split(';')
  data << [clue, details.pop]
  details.each { |detail| data << ['', detail] }
end 
```

在 Axlsx::Package.new 块之前生成数据

回答你的评论/问题：你用这样的东西来做；）

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'
require 'axlsx'

class Scraper

   def initialize(url, selector)
     @url = url
     @selector = selector
   end

   def hooks
     @hooks ||= {}
   end

   def add_hook(clue, p_roc)
     hooks[clue] = p_roc
   end

   def export(file_name)
     Scraper.clues.each do |clue|
       if detail = parse_clue(clue)
         output << [clue, detail.pop]
         detail.each { |datum| output << ['', datum] }
       end
     end
     serialize(file_name)
   end

   private

   def self.clues
     @clues ||= ['Operating system', 'Processors', 'Chipset', 'Memory type', 'Hard drive', 'Graphics',
                 'Ports', 'Webcam', 'Pointing device', 'Keyboard', 'Network interface', 'Chipset', 'Wireless',
                 'Power supply type', 'Energy efficiency', 'Weight', 'Minimum dimensions (W x D x H)',
                 'Warranty', 'Software included', 'Product color']
   end

   def doc
     @doc ||= begin 
                Nokogiri::HTML(open(@url))
              rescue
                raise ArgumentError, 'Invalid URL - Nothing to parse'
              end
   end

   def output
     @output ||= []
   end

   def selector_for_clue(clue)
     @selector % clue
   end

   def parse_clue(clue)
     if element = doc.at(selector_for_clue(clue))
       call_hook(clue, element) || element.inner_html.split('<br>').each(&:strip)
     end
   end

   def call_hook(clue, element)
     if hooks[clue].is_a? Proc
        value = hooks[clue].call(element)
        value.is_a?(Array) ? value : [value]
     end
   end

   def package
     @package ||= Axlsx::Package.new
   end

   def serialize(file_name)
     package.workbook.add_worksheet do |sheet|
       output.each { |datum| sheet.add_row datum }
     end
     package.serialize(file_name)
   end
end

scraper = Scraper.new("http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1", "//td[text()='%s']/following-sibling::td")

# define a custom action to take against any elements found.
os_parse = Proc.new do |element|
  element.inner_html.split('<br>').each(&:strip!).each(&:upcase!)
end

scraper.add_hook('Operating system', os_parse)

scraper.export('foo.xlsx') 
```

最终的答案是……一颗宝石。

[http://rubydoc.info/gems/ninja2k/0.0.2/frames](http://rubydoc.info/gems/ninja2k/0.0.2/frames)

# css - 如何将css3应用于IE8中的伪元素

> ID：11755759
> 
> 赞同：4
> 
> 时间：2012-08-01T08:51:20.433
> 
> 标签：css, internet-explorer-8, internet-explorer-7, pseudo-element

我目前正在开发一个使用这两个库的项目：[ie7-js](https://code.google.com/p/ie7-js/)和[CSS3 PIE](http://css3pie.com/documentation/pie-js/)

不幸的是，我无法将 CSS3（渐变或边框半径）应用于伪元素，例如IE7`:before`和`:after`IE8。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:44:20.167

IE7 不支持`:before`和`:after`生成内容，因此内容本身是使用 VML DOM 和 HTML DOM 的组合来模拟的，然后使用 DHTML 过滤器和在幕后使用 ie7.js 和 css3pie 的过渡对这些元素应用 CSS3 模拟。IE8 确实支持`:before`和`:after`生成内容，但具有讽刺意味的是，这打破了 CSS3 仿真层，因为[生成的内容没有自己的 DOM，](https://github.com/lojjic/PIE/issues/189)也没有[影子 DOM](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)。`:before`使用条件注释为 IE8 创建和内容的副本`:after`，定位它们以匹配它们在 IE7 中的位置，然后对它们应用 css3pie 效果。

# wpf - 如何使用 DatagridTextColumn.ElementStyle 将 DatagridTextColumn 设为只读？

> ID：11755760
> 
> 赞同：0
> 
> 时间：2012-08-01T08:51:24.163
> 
> 标签：wpf, wpfdatagrid, datagridtextcolumn

我可以使用 elementStyle 将 DatagridTextColumn IsReadOnly 绑定到 ViewModel 内的属性（此处为 IsReadOnlyProperty）吗？像这样的东西：

```
 <DataGridTextColumn.ElementStyle>
      <Style TargetType="{x:Type TextBlock}">
          <Setter Property="IsEnabled" Value="{Binding IsReadOnlyProperty}"/>
      </Style>
  </DataGridTextColumn.ElementStyle>
  <DataGridTextColumn.EditingElementStyle>
        <Style TargetType="{x:Type TextBlock}">
               <Setter Property="IsEnabled" Value="{Binding IsReadOnlyProperty}" />
        </Style>
  </DataGridTextColumn.EditingElementStyle> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-05T13:29:43.690

尝试这个：

```
<DataGridTextColumn IsReadOnly="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.IsReadOnlyProperty}" /> 
```

创建 DataGrid 时，通过分配 ItemsSource 设置其 DataContext。这将 DataGrid 内的所有控件限制为仅使用其父 DataContext 中的对象，因此如果您想绑定到此 DataContext 外部的属性，您必须明确声明您要更改您的范围。

# php - 在 PHP 中是否有可能爆炸 3 维？

> ID：11755771
> 
> 赞同：0
> 
> 时间：2012-08-01T08:51:51.043
> 
> 标签：php, arrays, explode

例如：

```
$sting = 'house : 3 bedroom, car : porsche 911 wife : model'; 
```

爆炸：对于行和列，从而形成一个数组

```
array(

    "house" => "3 bedroom"

    "car" => "porsche 911"

    "wife" => "model"

) 
```

不必爆炸 foreach 爆炸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:01:11.183

```
$result = array_reduce(
    explode(',', $sting /*[sic!] ;)*/),
    function ($array, $item) {
        list ($key, $value) = explode(':', $item, 2);
        $array[trim($key)] = trim($value);
        return $array;
    },
    array()
); 
```

[`array_reduce()`](http://php.net/array-reduce)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:57:05.913

如果您不想使用 a `foreach`，则可以使用回调 on `array_map`or `array_walk`，但这仍在迭代数组。为什么不直接使用 foreach？

您必须使用两次explode 来实现这一点。首先将整体分开，然后将整体分为键和值：

```
$string = 'house : 10 bedroom, car : porsche 911, wife : model';
$elements = explode(',', $string);
array_walk($elements, 'trim');

$goodLife = array();

foreach($elements as $element) {
    list($key, $value) = explode(':', $element, 2);
    $goodLife[trim($key)] = trim($value);
}

print_r($goodLife); 
```

**使用的功能：**

*   [爆炸（）](http://php.net/explode)
*   [array_walk()](http://php.net/array-walk)
*   [修剪（）](http://php.net/trim)
*   [列表（）](http://php.net/list)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:05:53.137

想不出比这更聪明的东西了：

```
$s = 'house : 3 bedroom, car : porsche 911 wife : model';
$a = preg_split("/[:,]/", $s);
$b = array();
array_unshift($a, false);
while (false !== $key = next($a)) {
  $b[$key] = next($a);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:58:39.140

没有foreach，我认为他们不会提供这样的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T08:58:55.740

我想这是不可能的，不使用 foreach 循环 - 因为 PHP 中不存在可以将字符串拆分为数组键和值的命令。

# php - Foreach 循环项目组必须加起来最多 3

> ID：11755775
> 
> 赞同：0
> 
> 时间：2012-08-01T08:52:02.990
> 
> 标签：php, loops, foreach

我正在编写一个 PHP foreach 循环。我正在使用以下代码来确保只有 3 个项目被分组到 .slide div 容器中。

```
<?php 
$count = 0;
foreach ($listing as $item):?>
<div class='slide>

  <div class='item'>Item</div>

<?php if ($count++ % 3 == 1 ): ?>
</div>
<div class="slide">
<?php endif; ?>

<?php endforeach ?> 
```

我需要每组总是有 3 个项目。从数组的开头添加项目以填充剩余项目的最佳方法是什么？

**编辑**：

我需要的标记示例是：

```
<div class='slide'>
  <div class='item'>Item 1</div>
  <div class='item'>Item 2</div>
  <div class='item'>Item 3</div>
</div>
<div class='slide'>
  <div class='item'>Item 4</div>
  <div class='item'>Item 1</div>
  <div class='item'>Item 2</div>
</div> 
```

因此，如果每个 .slide 没有 3 个项目，则数组会重新开始填充它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T01:12:08.407

最近需要使用 Bootstrap 执行此操作，每 3 列环绕一行，并且找不到一个好的工作答案，所以这是我想出的解决方案。希望能帮助到你。

```
<?php
$count = 0;
foreach ($listing as $item) {
  if ($count % 3 == 0) {
    echo "<div class='slide'>";
  }
  $count++;
?>
<div class='item'>Item</div>
<?php
  if ($count % 3 == 0) {
    echo "</div>";
  }
}
?> 
```

这些链接将有助于解释运算符，以便您了解发生了什么：

[PHP 算术运算符](http://php.net/manual/en/language.operators.arithmetic.php)（% = 模数）

[递增/递减运算符](http://php.net/manual/en/language.operators.increment.php)（++ = 后递增）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:13:48.787

`$listing`一种简单的解决方案是在循环之前将 1 或 2 个项目（如果需要）附加到变量中。

```
if (count($listing)%3!=0) {
    //Append 1 or 2 items from start of array if needed
    $listing = array_merge($listing, array_slice($listing, 0, 3-count($listing)%3));
} 
```

该`array_slice`调用返回一个数组，其中包含来自`0`to `3 - (size of array) mod 3`（1 或 2）的项目。然后该`array_merge`函数将这 1 个或 2 个项目添加到原始`$listing`数组中。完整的代码（以及其他一些小的改进/修复）如下：

```
<?php 
    $count = 0;
    $listing = array(1, 2, 3, 4, 5, 6, 7);
    if (count($listing)%3!=0) {
        //Append 1 or 2 items from start of array if needed
        $listing = array_merge($listing, array_slice($listing, 0, 3-count($listing)%3));
    }
    ?><div class='slide'> <?php
    foreach ($listing as $item):
        if (($count>0) and ($count%3==0)):
            ?></div><div class="slide"><?php
        endif; 
        ?><div class='item'>Item <?=$item?></div><?php
        $count++;
    endforeach;
    ?></div><?php
?> 
```

根据您的数据，您可能需要针对原件`$listing`有 0 或 1 个项目的情况添加特殊检查。此外，最好不要修改原始数组，而是使用副本将项目附加到并在 foreach 循环中使用。

# c# - 无法从数据库中删除数据

> ID：11755776
> 
> 赞同：-1
> 
> 时间：2012-08-01T08:52:03.227
> 
> 标签：c#, linq

我遇到了一个问题，当用户单击删除按钮时，什么也没有发生，当我插入断点进行检查时，The `selectLocStation`is null。为什么会这样？任何人都可以解决我对此的疑问吗？

这是您查看我的删除代码的代码。感谢提供的任何帮助。

```
private void btnDel_Click(object sender, EventArgs e)
{
    using (satsEntities Setupctx = new satsEntities())
    {
        int selectLocStation = Convert.ToInt32(cbLocStation.SelectedValue);

        var DeleteRTiming = 
            (from delLocStation in Setupctx.requiredtimings
             where delLocStation.RequiredLocationStationID == selectLocStation
             select delLocStation).SingleOrDefault();

        if (DeleteRTiming != null)
        {
            Setupctx.DeleteObject(DeleteRTiming);
            Setupctx.SaveChanges();
            cbLocStation.SelectedIndex = -1;
            this.Edit_TS_Load(null, EventArgs.Empty);
            MessageBox.Show("Selected Required Timing And " + 
                                "The Location Station Has Been Deleted.");
        }
    }
} 
```

这是用于绑定的代码。

```
private void Edit_TS_Load(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            var DeleteRT = (from DelRT in Setupctx.requiredtimings
                            join locationstationname ls in Setupctx.locationstationnames on DelRT.RequiredLocationStationID equals ls.locationstationID
                                select ls.locStatname).Distinct().ToList();

            foreach (var locstationData in DeleteRT)
            {
                cbLocStation.Items.Add(locstationData);
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:53:40.233

怎么可能`selectLocStation`是 null ？它是 int 类型，您是否遇到任何异常，或者您的意思是您的对象 DeleteRTiming 为 null ？可能它`DeleteRTiming`是空的

您在数据库中查找的记录`selectLocStation`不存在的简单答案。

您需要放置一个断点并查看“selectLocStation”保存的内容，然后手动检查数据库中是否存在记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:01:54.407

绑定控件时，必须将其设置为！IsPostback 并坚持使用 ViewState

```
If(! IsPostBack)
{
  BindYourControl(); //For just first load.
} 
```

坚持

```
EnableViewState = true; 
```

为了不删除您选择的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:35:11.200

查看您用来绑定组合框的方法

```
cbLocStation.Items.Add(locstationData); 
```

这将使用变量“locstationData”的值创建具有“ValueField”和“TextFiled”的组合框因此，当您尝试从中获取所选值时`cbLocStation.SelectedValue`，它将始终包含名称，因此您无法将其解析为整数。

“添加”还有另一个重载，它将接受值（Id）和文本（要显示的文本）

```
 cbLocStation.Items.Add(new ListItem(locstationData.locStatname, locstationData.locStatID)); 
```

尝试像这样更改绑定部分

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:04:56.640

如果这是一个 silverlight 应用程序，那么您可能想要使用 cbLocStation.SelectedItem 或者它是一个 ASP.Net 站点并且您在每个 pageLoad 上重新绑定数据

无论哪种方式，您都应该有一个例外，因为您正在尝试转换空值。

# jquery - jquery 旋转循环直到 load() 函数完成

> ID：11755781
> 
> 赞同：1
> 
> 时间：2012-08-01T08:52:25.337
> 
> 标签：jquery, loading

在我网站的 index.php 页面上，我有一个过滤器选项列表，用户可以单击该列表来缩小结果范围。单击其中一个

*   标签，jquery 将使用另一个名为 index_backend.php 的文件中生成的内容填充 div 的内容。

    我的代码如下

    ```
    $("#scores").click(function() {
        var url = 'index_backend.php';
        var data = 'type=scores';

        $('#center').load(url, data);
    }); 
    ```

    但是，根据 url 中 $_GET['type'] 变量的值，加载 index_backend.php 文件可能需要很长时间。有什么方法可以找出文件何时完全加载？我试着把

    ```
    $(document).ready(function () {
        $(".loading").fadeOut('slow');
    }); 
    ```

    在 index_backend.php 文件中，但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:00:26.957

```
$('#center').load(url, data, function() {
  $('.loading').fadeOut('slow');
}); 
```

[文档](http://api.jquery.com/load/)

您甚至可以通过添加错误处理程序来更疯狂地检测页面是否加载成功：

```
$("#center").load(url, data, 
    function (responseText, textStatus, req) {
        if (textStatus == "error") {
          alert("Oh bother!!!!");
        } else {
          $('.loading').fadeOut('slow');
        }
}); 
```

**更新**

[你可以在这里](http://ajaxload.info/)得到很好的加载图标。

要使用，请创建一个图像元素：

```
<a class="loading" href="loading.gif" style="display:none"> 
```

这将是你的 JS：

```
$("#scores").click(function() {
    $('.loading').fadeIn('fast');
    var url = 'index_backend.php';
    var data = 'type=scores';
    $('#center').load(url, data, function() {
      $('.loading').fadeOut('slow');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:56:10.043

如 api [http://api.jquery.com/load/](http://api.jquery.com/load/)中所述，使用完整的回调。

```
$('#center').load(url, data, function() {
    // load complete
}); 
```

# php - 从 mysql 中检索有关日期选择的数据

> ID：11755789
> 
> 赞同：0
> 
> 时间：2012-08-01T08:52:58.020
> 
> 标签：php, javascript, html, css

```
$query  = "select * from researchsub_form where  flag='1' and date between '$date' and '$date1' "; 
```

我有两个输入，date 和 date1，我必须在 flag='1' 的日期 'date' 和 'date1' 之间显示数据库中的数据，为此我使用 SQL 查询，但我想在何时显示数据我只输入一个日期输入，即“日期”或“日期 1”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:59:08.437

您可以在动态中创建您的条件。

```
$query = "select * from researchsub_form where flag='1'";

if(isset($date) && isset($date1)) 
    $condition += " and date between '$date' and '$date1'";
else if(isset($date)) 
    $condition += " and date > '$date'";
else if(isset($date1)) 
    $condition += " and date < '$date1'";

$query += $condition; 
```

或者，当其中一个为空时，您可以将较小的日期 (1753) 分配给 date1，将最大的日期 (9999) 分配给 date1，但这并不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:37:47.927

select * from researchsub_form where flag='1' and (date between '$date' and '$date1' or date='$date' or date='$date1')

# php - 使用 css 对网站样式进行精细控制

> ID：11755790
> 
> 赞同：0
> 
> 时间：2012-08-01T08:52:58.420
> 
> 标签：php, mysql, css, styles

我一直在努力寻找一个好的方法来做到这一点，但到目前为止还空无一物，需要一些指导。

基本上，我现在拥有的是一个样式选择器，它为网站提供了 10 种预定义样式供用户选择。它们中的大多数都是怪诞的，并且仅仅是概念的证明。

这是由 PHP 和 mysql 控制的。当用户登录并选择非默认样式时，它会针对他们在数据库中的用户记录添加。然后站点刷新并加载所选样式。

它工作得非常好，但现在我想尝试进行一些细粒度的控制。例如，我希望用户能够选择自己的标题背景颜色、标题文本颜色、子标题颜色和一些字体大小。

这是一件相当微不足道的事情，如果我找不到实现它的方法，那就这样吧。

我最初的想法是有一个表格，其中包含每个可定制的大小部分的列，例如字体大小、颜色等。在表格中，将是每个用户的记录。然后他们使用一些界面来挑选他们想要的东西，然后将其添加到表格中。

我的问题是如何处理我从数据库中检索到的值。我本来希望将它们直接插入到 CSS 文件中，但我认为如果没有一些服务器配置更改，这是不可能的，我无法开始工作。

那么，如果有任何方法的话，是否有人对最好的方法有任何建议。

问候编辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:28:42.417

对我来说最明显的选择是构建一个 PHP 脚本来动态生成样式表。只有当表中存在包含所有用户特定样式的特定用户的记录时，才会调用此方法。

因此，例如，`<head></head>`您可以在您之间放置：

```
<?php if($user_has_style): ?><link rel="stylesheet" href="user_style.php" /><? endif; ?> 
```

这将调用`user_style.php`脚本并生成所需的样式表。您必须将正确的标题添加到 PHP 样式表的输出中，它们是：

```
<?php header("Content-type: text/css"); ?> 
```

如果您选择此方法，该网站可能会有一些用处：http: [//mou.me.uk/2008/08/03/generating-dynamic-stylesheets-on-the-fly-using-php/](http://mou.me.uk/2008/08/03/generating-dynamic-stylesheets-on-the-fly-using-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:32:44.500

你有几种方法可以做到这一点。

您可以直接在 HTML 标签的属性中指定 CSS 属性`style`，但这很快就会变得乏味，因为您可能必须在内容中间的分散区域插入代码，从而使维护更加困难。

您还可以将所有样式定义放在`<style></style>`标签之间的`<head>`部分内，这部分消除了将内容与表示混合的缺点。

最后，还可以使用数据库信息使用 PHP 生成 CSS 文件。***将您***的样式表重命名为**.php**，然后将其放在文件的顶部：

```
<?php header('content-type: text/css'); ?> 
```

这告诉 PHP 它将生成的内容需要作为 CSS 文件发送，以便用户的浏览器知道它是一个样式表。剩下要做的就是在包含您的 HTML 内容的 PHP 脚本中正确引用您的“可变”样式表：

```
<link href="../layout/css/something.php" 
    rel="stylesheet" type="text/css" media="all" /> 
```

这将允许您在“CSS”文件中使用这种东西：

```
body
{
  background-color:
  <?php echo $userstyle['color']; // Retrieved from database somewhere above ?>;
} 
```

但是，如果您关心性能，后一种解决方案可能需要使用*Cache-control*标头进行一些改进，以避免每当用户点击您网站中的链接时重新加载 CSS 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:58:04.053

您可以通过两种方式将 CSS 放入 html 文件中。您可以将代码放在`<style>`标签下的标题中，也可以将 css 放在特定项目上，例如`<body style="background-image:url('file.png')">`. 两种方式都不需要与 .html 文件分离的 css 文件:)

# ssh - putty 远程日志拖尾挂起

> ID：11755796
> 
> 赞同：1
> 
> 时间：2012-08-01T08:53:35.100
> 
> 标签：ssh, putty, tail

我已经阅读[tail -f using PuTTY hangs](https://stackoverflow.com/questions/3545611/tail-f-using-putty-hangs)

但是请让我再问一次。

1.  我连接到`A`使用腻子。
2.  然后我连接到`B`使用 ssh。
3.  我执行`tail -f ...`

一些线路尾随终端站后。

1.  连接是活跃的。
2.  输入键不重新启动拖尾
3.  我必须 CTRL-C 并重新执行 tail 命令。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:37:09.163

有可能（例如，如果您正在跟踪日志文件）文件正在被*轮换*：某些东西会重命名文件，然后将传入的数据添加到具有原始名称的新文件中。

如果这是正在发生的事情，请使用`tail -F ...`而不是`tail -f ...`.

# mysql - 使用 OR 锁定 MySQL 行

> ID：11755798
> 
> 赞同：0
> 
> 时间：2012-08-01T08:53:40.233
> 
> 标签：mysql, locking

我有以下查询：

```
SELECT * WHERE accountId = 1 AND (phone = "1234" OR fax = "5678") FOR UPDATE 
```

WHERE 子句中的所有 3 列都有键。accountId 为索引，电话和传真与 accountId 组合成唯一索引：

```
UNIQUE KEY `phone` (`phone`,`accountId`),
UNIQUE KEY `phone` (`fax`,`accountId`),
KEY `aid` (`aid`), 
```

哪些钥匙会被锁定？我需要的是用 phone = "1234" || 锁定行 传真 = "5678" for accountId = 1。是否正确优化或所有行将被锁定。

mysql版本是5.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:56:11.307

试一试

```
EXPLAIN SELECT * WHERE accountId = 1 AND (phone = "1234" OR fax = "5678") FOR UPDATE 
```

为了获取有关 MySQL 如何执行此语句的信息。

# sqlite - 当我调用在 korma 中插入多行时出现异常

> ID：11755802
> 
> 赞同：2
> 
> 时间：2012-08-01T08:53:43.537
> 
> 标签：sqlite, clojure, korma

当我调用在 korma 中插入多行时，我得到了异常......

```
Failure to execute query with SQL:
 ...snip...
SQLException:
 Message: near ",": syntax error
 SQLState: null
 Error Code: 0 
```

到底是怎么回事？

额外细节：我使用 sqlite 作为我的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:53:43.537

Korma 并不试图涵盖每个数据库中的每一个小问题。在这种情况下 sqlite3 不支持 korma 生成的语法。

请参阅此问题以了解问题的根源：[是否可以在 SQLite 数据库中一次插入多行？](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database).

请参阅有关 Korma 讨论组的讨论，了解 Korma 对此问题的立场：[https ://groups.google.com/forum/?fromgroups#!msg/sqlkorma/t7lwpD5np9w/Vf-T52fQrSwJ](https://groups.google.com/forum/?fromgroups#!msg/sqlkorma/t7lwpD5np9w/Vf-T52fQrSwJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T09:15:48.623

值得注意的是，从 SQLite 3.7.11 版本开始，语句可以在子句`INSERT`中包含多行。[Brian Campbell 在这个答案](https://stackoverflow.com/a/1609688/2314532)`VALUES`中首先指出了这一点，该答案链接到[3.7.11 的 SQLite 发布日志](http://www.sqlite.org/releaselog/3_7_11.html)。所以到现在为止，无论你使用什么操作系统，SQLite 版本都可能高于 3.7.11，这意味着如果你现在尝试这样做，你很可能会成功。

# c# - 识别windows phone7 Textbox中更改的字符和位置

> ID：11755811
> 
> 赞同：0
> 
> 时间：2012-08-01T08:54:11.687
> 
> 标签：c#, windows-phone-7

在 windows phone7 中，我只需要在文本框中跟踪更改的字符和更改的位置（索引）。我正在努力在`TextChanged Event`.

我找到了 this [POST](https://stackoverflow.com/questions/2574942/determine-when-and-which-character-is-added-or-deleted-in-a-text-box)，这是一个类似的问题，但它仅适用于 WPF 应用程序，因为`e.Changes`属性在 WP7 中不可用。

如果有人能给出一个想法，将不胜感激。提前致谢....！！！！

# jquery - 根据班级获取 td 总数？

> ID：11755812
> 
> 赞同：0
> 
> 时间：2012-08-01T08:54:13.147
> 
> 标签：jquery, jquery-selectors

我有一个动态生成的表，看起来像这样：

```
<table id="mytable">
    <thead>
        <tr>
            <td>col1</td>
            <td>col2</td>
            <td>col3</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>col1</td>
            <td class="col2">1</td>
            <td class="col3">2</td>
        </tr>
        <tr>
            <td>col1</td>
            <td class="col2">7</td>
            <td class="col3">4</td>
        </tr>
        <tr>
            <td>col1</td>
            <td class="col2">col2</td>
            <td class="col3">col3</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td>Totals</td>
            <td id="col2total"></td>
            <td id="col3total"></td>
        </tr>
    </tfoot>
</table> 
```

如何获得`td`s 中具有类的值`col2`的总和并将总和添加到`td`id `col2total`？由于此表是动态生成的，我不知道`tr`在`tbody`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:55:45.663

试试这个：

```
var total = 0;
$(".col2").each(function() {
    total += parseFloat('0' + $(this).text(), 10);
})
$("#col2total").text(total); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:57:13.570

```
var total = 0;
$("td.col2").each(function() {
    total += parseFloat($(this).text()) || 0;
});

$("#col2total").text(total); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:58:54.303

```
$(document).ready(function(){ 
    var sum = 0; 
    $('.col2').each(function() { 
        sum += Number($(this).val()); 
    });

    $("#col2total").text(sum); 
}); 
```

# java - 禁用错误网页未找到“

> ID：11755813
> 
> 赞同：2
> 
> 时间：2012-08-01T08:54:13.373
> 
> 标签：java, android

我想为 android 创建一个网络应用程序。当我单击一个按钮时，应用程序会打开一个网页。

如果我有互联网连接，该应用程序运行正常。

如果我禁用互联网连接，我会收到一条消息：“找不到网页”，并显示网页链接。

我的问题是：

**1：**如何保护网页链接和

**2：**如何禁用**网页未找到的错误消息**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:35:31.603

我认为一个例子可以帮助你。

*   您可以使用它`WebViewClient`来获取错误事件。
*   在这种情况下`load`，错误`HTML`页面

代码示例是：

```
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class TestWebView extends Activity {
    private WebView webView;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.full_screen_image_layout);

        webView = (WebView) findViewById(R.id.fullScreenImageWebView);
        webView.getSettings().setBuiltInZoomControls(true);
        webView.getSettings().setLoadWithOverviewMode(true);
        webView.getSettings().setUseWideViewPort(true);
        webView.getSettings().setSupportZoom(true);

        webView.setWebViewClient(new WebViewClient() {

            /*
             * (non-Javadoc)
             * 
             * @see
             * android.webkit.WebViewClient#onReceivedError(android.webkit.WebView
             * , int, java.lang.String, java.lang.String)
             */
            @Override
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                // TODO Auto-generated method stub
                super.onReceivedError(view, errorCode, description, failingUrl);
                loadError();
            }
        });

        webView.loadUrl("http://www.google.com");
    }

    private void loadError() {
        String html = "<html><body><table width=\"100%\" height=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">"
                + "<tr>"
                + "<td><div align=\"center\"><font color=\"red\" size=\"20pt\">Your device don't have active internet connection</font></div></td>"
                + "</tr>" + "</table><html><body>";
        System.out.println("html " + html);

        String base64 = android.util.Base64.encodeToString(html.getBytes(),
                android.util.Base64.DEFAULT);
        webView.loadData(base64, "text/html; charset=utf-8", "base64");
        System.out.println("loaded html");
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:00:00.280

**首先你必须使用下面的代码片段检查互联网连接**

```
public boolean isNetworkAvailable() {
ConnectivityManager cm = (ConnectivityManager) 
getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo networkInfo = cm.getActiveNetworkInfo();
// if no network is available networkInfo will be null
// otherwise check if we are connected
if (networkInfo != null && networkInfo.isConnected()) {
    return true;
}
return false;
} 
```

然后检查布尔变量的值，如果它返回 true，那么您的连接可用，如果它返回 false，则向用户显示一些错误消息。

**我希望你能明白我的逻辑**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:59:00.870

我不知道 webview 是否允许这样做，但您可以[先检查互联网连接](http://androidresearch.wordpress.com/2012/01/06/android-detecting-internet-connection/)。如果连接可用，则显示 WebView，如果没有则显示错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-16T05:00:10.177

```
public void onReceivedError(WebView webView, int errorCode, String description, String failingUrl) {
try {
webView.stopLoading();
} catch (Exception e) {
}
try {
webView.clearView();
} catch (Exception e) {
}
if (webView.canGoBack()) {
webView.goBack();
}
webView.loadUrl("file:///android_asset/path_to_file");
super.onReceivedError(webView, errorCode, description, failingUrl);
}a

private WebViewClient client = new WebViewClient() {
  // ... override whatever, including the onReceivedError method above
}
WebView webView = new WebView(context);
webView.setWebViewClient(client); 
```

你可以用上面的代码检查

# css - 以可读的方式呈现长链接列表 HTML

> ID：11755821
> 
> 赞同：0
> 
> 时间：2012-08-01T08:54:40.093
> 
> 标签：css, html

我在一页中有 25 个链接。我将它们分成两行。我这样介绍它们：

```
link1 - link2  - link3 - ...
link12 - .... link25 
```

如果它们彼此之间有优先级，我会将它们呈现在标签云中。但是几乎所有的链接都具有相同的优先级。

以更易于阅读的格式呈现链接的更好方法是什么？
我试过这个：
`<span>link1<span> <code>link2</code> <span>link3<span> <code>link4</code>`等..

**编辑**：他们不能再分组了。这是最小化版本。
链接表示国家名称、人名、书名等。
我不打算对它们进行分组。
例如：
《澳大利亚》《奋斗》《迈克尔·杰克逊》《愤怒的葡萄麦当娜》

设计是让用户选择具有选择性感知的标题。因此，为了触发用户的感知，我计划将它们放在一个段落中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:57:48.183

习惯了这样的`white-space`属性

**HTML**

```
<div class="parent">
<a href="#">Link text</a><a href="#">Link text</a><a href="#">Link text</a><a href="#">Link text</a>
<a href="#">Link text</a><a href="#">Link text</a><a href="#">Link text</a><a href="#">Link text</a>
<a href="#">Link text</a><a href="#">Link text</a><a href="#">Link text</a><a href="#">Link text</a>
</div> 
```

**CSS**

```
.parent {
white-space:nowrap;
}

    .parent a{
    display:inline-block;
    vertical-align:top;
    white-space:normal;
    } 
```

[现场演示](http://tinkerbin.com/3Le0lUPE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:41:56.423

Rohit 是在正确的轨道上，但我觉得如果你仍然希望它们在两行上，这可能会更容易阅读：

html:

```
<div class="parent">
    <p>
        <a href="#">Link1</a>, <a href="#">Link2</a>, <a href="#">Link3</a>, <a href="#">Link4</a>, 
        <a href="#">Link5</a>, <a href="#">Link6</a>, <a href="#">Link7</a>, <a href="#">Link8</a>, 
        <a href="#">Link9</a>, <a href="#">Link10</a>, <a href="#">Link11</a>, <a href="#">Link12</a>, 
        <a href="#">Link13</a>, <br><a href="#">Link14</a>, <a href="#">Link15</a>, <a href="#">Link16</a>, 
        <a href="#">Link17</a>, <a href="#">Link18</a>, <a href="#">Link19</a>, <a href="#">Link20</a>, 
        <a href="#">Link21</a>, <a href="#">Link22</a>, <a href="#">Link23</a>, <a href="#">Link24</a>, 
        <a href="#">Link25</a>
    </p>
</div> 
```

CSS：

```
.parent {
    white-space:nowrap;
}

.parent a{
    display:inline-block;
    vertical-align:top;
    white-space:normal;
} 
```

[演示](http://tinkerbin.com/SA5tC7pS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:01:40.190

经过一些试用后，我发现最好的方法是使用按钮链接。锚文本变成了按钮标题和链接到 URL 的按钮。主要优点是可以轻松更改按钮颜色（twitter bootstrap），我不需要对行尾感到好奇。

# java - Selenium 选择器获取单选按钮文本

> ID：11755823
> 
> 赞同：0
> 
> 时间：2012-08-01T08:54:43.023
> 
> 标签：java, radio-button, selenium-webdriver

我有一个类似于下面的标记。

```
<div id="food-group">
    <input type="radio" name="food" value="Milk"> Cow-Milk<br>
    <input type="radio" name="food" value="Butter" checked> Butter<br>
    <input type="radio" name="food" value="Cheese"> Cheddar-Cheese
<div> 
```

而且我需要在每次输入（牛奶、切达奶酪）之后使用 Java 中的 Selenium WebDriver 获取标签。我可以像这样获取组件（并对其进行迭代）：

```
driver.findElements(By.xpath([//div[@id='food-group']/input[@type='radio')). 
```

但我找不到获取文本的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:48:48.543

输入元素有两种类型的“文本”属性。在您的示例中：

```
 <input type="radio" name="food" value="Milk"> Cow-Milk<br> 
```

要获得“牛奶”，您可以：

```
getAttribute("value"); 
```

要获得“牛奶”，您可以：

```
getText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T16:16:48.023

```
You can use 

    List<WebElements> myElements = driver.findElements(By.xpath([//div[@id='food-group']/input));

for(WebElement e : myElements) {
        String textValue = e.getAttribute("value");
        if(textValue.equals("Milk"){
          return el.getText();
        }
        else if(textValue.equals("Butter") {
          return el.getText();
        }
        else if(textValue.equals("Cheese") {
          return el.getText();
        }
    } 
```

# objective-c - 为 twitter 设置显示 null 的初始文本

> ID：11755824
> 
> 赞同：0
> 
> 时间：2012-08-01T08:54:56.830
> 
> 标签：objective-c, xcode, ios5

我正在我的应用程序中实现 Twitter 集成。但setinitialtext 显示空对话框。

我的代码是：

```
TWTweetComposeViewController *tweetSheet = 
        [[TWTweetComposeViewController alloc] init];
        if ([TWTweetComposeViewController canSendTweet])
        {

NSString *tw=[[NSString stringWithFormat:@"AT %@ %@ \n on %@\n %@ %@ %@ vs %@",lbl_vanueName.text,lbl_address.text,[arr_eventDate objectAtIndex:0],[arr_eventName objectAtIndex:0],[arr_EventType objectAtIndex:0],[arr_Contestant1 objectAtIndex:0],[arr_Contestant2 objectAtIndex:0]] retain];
            NSLog(@" tw is:%@",tw); // work fine & got all values

           [tweetSheet setInitialText:tw];
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:02:02.587

方法的返回值是多少`setInitialText`。如果您检查文档`TWTweetComposeViewController`，会有一条评论：

**返回值**

是，如果成功。如果文本不适合当前可用的字符空间或视图已呈现给用户，则为 NO。

*也许文字不合适？*

# scala - 如果 Singleton 如此糟糕，为什么 Scala 对它们有语言支持？

> ID：11755826
> 
> 赞同：13
> 
> 时间：2012-08-01T08:54:58.407
> 
> 标签：scala, object, static, singleton, anti-patterns

> **可能重复：**
> [为什么单例对象更面向对象？](https://stackoverflow.com/questions/4112088/why-are-singleton-objects-more-object-orientated)

为什么 Scala 对 Singleton 反模式有语言支持？如果 Scala 继承了`static`Java 的关键字，那么该关键字的*合法*用例会`object`留下哪些？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T09:07:01.653

至少有一个预先的区别，因为`object`Scala 中的 an 实际上是一个对象（即一个实例），而不是在 Java 中它只是在类本身上调用的方法。

这意味着它避免了关于单例的主要抱怨之一——因为它*是*一个实例，它可以被传递并连接到方法中，因此可以在测试期间换出其他实现等。如果有的话，它是语法糖推荐的单例替代方案 - 拥有一个带有`getInstance()`返回默认单个实例的方法的类。

也就是说，我认为 Singleton 反模式更多的是关于*设计*而不是语言特性。如果你构建你的代码库，以便在大多数类中隐式连接一些单一依赖项，那么无论语言特性如何，你都会遇到更改它的问题。

`objects`在 Scala 中有一些合法的用例（例如，`case objects`用于[向 Actors 发送消息](https://stackoverflow.com/questions/3019474/scala-actor-message-definition)，或者让其中的几个扩展 a`sealed trait`作为[enums 的替代方案](https://stackoverflow.com/questions/1898932/case-classes-vs-enumerations-in-scala)）。语言特性*可能*会被滥用，但在我看来，它不像 Java 那样容易被滥用，而且`static`更有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T09:12:13.577

没有状态的单身人士并没有那么糟糕。我将对象（在 scala 中）视为放入函数（行为）的模块。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T09:14:26.600

如果你使用一个对象来保持状态，那么单例就是一场灾难，因为可能没有办法清除它，这是单例成为反模式的主要例子之一。没有可变状态和纯函数的对象在这方面不太容易引起痛苦，这里有一个例子：

```
object StringSerializer extends Serializer[String] {
  // Implementation goes here.
} 
```

在这种情况下，不需要新建 Serializer 的实例，这使得代码更简单，性能可能更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T09:12:13.853

例如类型类。静态类和单例的区别在于，单例是对象，可以作为参数传递。例如，此代码无法使用静态类构建：

```
trait TypeClass[A] {
  def method(x: A): A
}

implicit object IntTypeClass extends TypeClass[Int] {
  def method(x: Int) = x*x
}

def foo[A](x: A)(implicit tc: TypeClass[A]) = tc.method(x)

scala> foo(2)
res0: Int = 4 
```

# jquery - 在 symfony2 中提交表单的链接无效表单

> ID：11755830
> 
> 赞同：0
> 
> 时间：2012-08-01T08:55:19.717
> 
> 标签：jquery, forms, symfony

我有一个表格，我想通过链接提交它。就像是 ：

```
<form action="{{ path('update', { 'id': entity.id }) }}" id="update" method="post" {{ form_enctype(edit_form) }}>
    {{ form_widget(edit_form) }}
</form>

... some HTML

<a href="javascript:$('#update').submit();">Valid</a> 
```

但是当我使用此链接提交表单时，该表单未在 Javascript 中验证（检查空字段等...）并且不显示错误工具提示

如果我在表单标签中创建一个按钮，它可以工作，但我希望这个按钮在表单标签之外。

我怎样才能做到这一点 ？

编辑：我的表单在模式对话框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:08:08.993

不是一个理想的答案，但我想这应该工作......

在您的表单中有一个提交按钮，使用 css 隐藏它

然后你当前的 js 链接在哪里，使它使用 jquery 来模拟点击正确的表单提交按钮

再次，不理想，但我想它应该做的工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:22:57.933

我已经用另一种方式做到了。

为了拥有 HTML5 字段控件，我放置了一个隐藏的提交按钮，我做到了；

```
$('#my_submit_button').click(); 
```

它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:26:58.677

这将按您的预期工作，

```
<script language="javascript">    
    $.fn.submitForm = function() {
        $('#update').submit();
    };    
</script> 
```

电话应该是，

```
<a href="javascript:$(this).submitForm();">Valid</a> 
```

但是在 中使用 javascript 执行是不受欢迎的`href`，请查看[之前](https://stackoverflow.com/questions/245868/what-is-the-difference-between-the-different-methods-of-putting-javascript-code)关于此主题的讨论，

然后我想知道的是，既然您使用的是 Jquery，为什么要在 html 中触发提交`href`？，只需在 javascript 文件中说 script.js

```
//assuming there is only one <a></a> tag
$(document).on('click', 'a', function(){
   $('#update').submit();
}); 
```

# php - PHP OOP 方法的困难

> ID：11755832
> 
> 赞同：5
> 
> 时间：2012-08-01T08:55:24.943
> 
> 标签：php, oop

**请参阅下面的编辑**

~~我正在尝试深入研究 PHP 中的 OOP 开发，但我真的开始感到头痛或溃疡。我只是无法理解它，部分对我来说似乎太不合逻辑了，我不知道从哪里开始，这真的让我很沮丧，因为我相信努力学习它是值得的，它为我提供了更好的概述关于我的代码。~~

昨天我花了一整天的时间在互联网上搜索实例和解释性文章，但现在我的感觉只会让我更加困惑。我需要一些实用的技巧，而不是像这样的例子

```
 class person {
     var $name;
     function set_name($new_name) {
          $this->name = $new_name;
     }
     function get_name() {
          return $this->name;
     }
}
$stefan = new person();
$jimmy = new person;

$stefan->set_name("Stefan");
$jimmy->set_name("Jimmy");

echo "Stefan's full name: " . $stefan->get_name();
echo "Jimmy's full name: " . $jimmy->get_name(); 
```

像这样的例子让我质疑为什么我不应该（因为它都在同一页面中定义）只是做

```
$name = "Stefan"; 
echo "Stefan's full name: ".$name;
```

如果你问我，更短（更少的代码）更明显？

诺到我的项目。

我想做的是一个简单的投资组合网站。因此我只需要 4 个页面，一个*主页*，一个*信息*页面，一个关于*我的工作*的页面和一个*联系*表。我使用三个表`clients`，我想在我`content`的*工作*页面上使用它们。`media`

 *我正在考虑我的结构并想出了（在我的脑海中，不知道如何实现它）类似的东西

```
class Database{}
class Content extends Database{}
     function showMenu(){}
     function showContent{}
class Clients extends Database{}
     function showClientList{}
     function showClientDetails{}
class Media extends Database{}
```

我已经创建了一个使用公共方法建立数据库连接的数据库类`query($qry)`。我从`Content`课堂开始，现在看起来像这样：

```
 class Content extends Database {
    public function topMenu($page){
        $db = new Database();
        $db->connect();
        $db->query("SELECT m_link, m_title, m_accesskey FROM menu WHERE m_type = 'top'"); 
        $res = $db->getResult();
        foreach($res AS $show){
            if($page == $show['m_link']){
                echo("<li id="active">$show['m_title']."</li>\n");
            }else{
                echo("<li>$show['m_title']."</li>\n");
            }
        }
    }
}
```

顺便说一句，这有什么意义吗？

在我的 index.php 上，我有以下几行来显示菜单（工作正常）`$content = new Content(); $content->topMenu($_aGET[0]);`

我失去它的地方是顶部显示*客户端列表*或*客户端详细信息*的方式，这取决于变量`$_aGET[0]`（包含 url）

假设我想显示客户详细信息，因此我需要来自所有三个表的记录，所以通常我会使用几个连接，就像这样

```
$query = "
    SELECT cl.c_id, cl.c_client, cl.c_client_desc, ncc.clco_cl_id, ncc.clco_co_id, co.c_content, ncm.clme_me_id, ncm.clme_cl_id, GROUP_CONCAT(me.m_link) AS images_link
    FROM clienten AS cl
    LEFT JOIN norm_cl_co_rel AS ncc ON cl.c_id = ncc.clco_cl_id
    LEFT JOIN content AS co ON ncc.clco_co_id = co.c_id
    LEFT JOIN norm_cl_me_rel AS ncm ON cl.c_id = ncm.clme_cl_id
    LEFT JOIN media AS me ON me.m_id = ncm.clme_me_id
    WHERE cl.c_client = '".mysql_real_escape_string($_aGET[1])."'
    AND cl.c_language_id = '"._LANGUAGE."' 
    AND cl.c_active = '1'
";
```

但就我了解 OOP 的想法而言，我应该为类中定义的每个表都有一个方法（对吗？）但是我将如何加入这些？

~~还是我的“故事”看起来像：“伙计，放弃它并坚持使用程序编码”？~~

**编辑：**

好的，在 Fluffeh 的帖子之后，我使用了他的示例并对其进行了一些修改以进行测试。问题是我确实得到了一些输出，但不是想要的。我的输出如下

```
编号：公司名称
C
描述：C
媒体：
：
：
：
：
：
```

虽然我应该得到（值在数据库中）：

```
编号：公司名称
公司名
描述： CompanyName 是一家公司
媒体：
: 图片 1
: 图片 2
: 图 3
: 图片 4
: 图片 5

```

我的代码如下所示：

```
class media{
    public $type;
    public $title;
    public $image;
    public $desc;
}

class client{
    public $name;
    public $desc;
}

class clientDetails{

    private $clientID;
    public $clientName;
    public $clientDesc;
    public $clientMedia = array();
    public $clientMediaFiles = 0;

    public function __construct($myID){
        $this->clientID = $myID;
    }

    public function getMyDetails(){

        $db = new Database();
        $db->connect();
        $db->query("
            SELECT c_client, c_client_desc 
            FROM clienten 
            WHERE c_client = '".mysql_real_escape_string($this->clientID)."'
        ");
        foreach($db->getResult() as $client){
            $this->name = $client['c_client'];
            $this->desc = $client['c_client_desc'];
        }

        $db = new Database();
        $db->connect();
        $db->query("
            SELECT ncm.clme_me_id, ncm.clme_cl_id, cl.c_id, me.m_id, me.m_type, me.m_title, me.m_desc, me.m_link
            FROM norm_cl_me_rel AS ncm
            LEFT JOIN clienten AS cl ON cl.c_id = ncm.clme_cl_id
            LEFT JOIN media AS me ON me.m_id = ncm.clme_me_id
            WHERE me.m_id IN(1,2,3,4,5)
        ");
        foreach($db->getResult() as $media){
            $this->clientMedia[$i]= new media();
            $this->clientMedia[$i]->type = $media['m_type'];
            $this->clientMedia[$i]->title = $media['m_title'];
            $this->clientMedia[$i]->image = $media['m_image'];
            $this->clientMedia[$i]->desc = $media['m_desc'];
            $this->clientMediaFiles++;
        }
    }

    public function displayMyResults(){
        echo "ID: $this->clientID";
        echo "&lt;div>&lt;h3>".$this->name."&lt;/h3>";
        echo "Desc: ".$this->desc."&lt;br>";
        echo "Media:&lt;br>";
        for($i=0;$i<$this->clientMediaFiles;$i++){
            echo $this->clientMedia[$i]->title." : ".$this->clientMedia[$i]->desc."&lt;br>";
        }
        echo "&lt;/div>";
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T09:08:13.150

继续使用 OOP。一旦你得到它，你就再也不想回到讨厌的、麻烦的、讨厌的、可怕的、狂热的程序代码了。

举个例子：*假设我想显示客户详细信息，因此我需要来自所有三个表的记录，所以通常我会使用几个连接，就像这样......*

这是一个很好的示例，可用于向您展示 OOP 的有用性。

*为ClientDetails*创建一个类

 **   在其中创建一个接受 clientID 作为参数的构造函数。
*   在这个构造函数中，让它运行代码并用查询返回的数据填充它的内部变量。
*   创建一个函数，将返回的数据输出为良好的格式。
*   现在从您的主代码创建它并让它显示它的详细信息

突然你在一个类中有几行代码，却可以用 2 行代码完美地展示你的数据。

我将很快添加一些示例代码，看看我是否可以翻阅我的一些课程以进行演示。

编辑：该死，不要翻找旧课程，这太详细了，但我写了一些代码作为示例：

```
<?php

class clientContact
{
    public $name;
    public $phone;
}

class clientDetails
{
    private $clientID;      //only this class can access this variable.
    public $clientName;     // Anything can change these.
    public $clientPhone;
    public $additionalContacts= array();
    public $associates=0;

    public function __construct($myID)
    // This is a magic function that is called every time we make a new object of this class.
    {
        $this->$clientID=$myID;
    }

    public function getMyDetails()
    // This function will query the database to get it's information properly
    // and populate itself with everything it needs. You could do this as part
    // of the __construct() call, but I didn't want to do TOO much code.
    {
        $sql="select clientName, clientPhone from clients where clientID=".$this->clientID.";";
        // skipping over full SQl bits...
        foreach($stmt as $clientContact)
        {
            $this->clientName=$clientContact->clientName;
            $this->clientPhone=$clientContact->clientPhone;
        }

        $sql="select clientName, clientPhone from associates where assocID=".$this->clientID.";";
        // skipping over full SQl bits...
        foreach($stmt as $clientContact)
        {
            $this->additionalContacts[$i]= new clientContact();
            $this->additionalContacts[$i]->name=$clientContact->name;
            $this->additionalContacts[$i]->phone=$clientContact->phone;
            $this->associates++;
        }

    }

    public function displayMyResults()
    // This function will simply display everything it has in a nicely format
    {
        echo "<div><h3>".$this->clientName."</h3>";
        echo "My contact phone number is :".$this->phone."<br>";
        echo "My associates are:<br>";
        for($i=0;$i<$this-associates;$i++)
        {
            echo $this->additionalContacts[$i]->name." : ".$this->additionalContacts[$i]->phone."<br>";
        }
        echo "</div>";

    }
}

?> 
```

天哪，那是漫长而可怕的，对吧？

并不真地。这就是为什么。

当然，课程中有一些代码，但是现在，您可以在主页上执行以下操作：

```
<?php 

    $someArray=array(36, 25, 76); 
    // This could be from a query, or a form, or anything else

    for($i=0;$i<count($someArray);$i++)
    {
        $currentContact= new clientDetails($someArray[$i]);
        // This is how we create the object.

        $currentContact->getMyDetails();
        // This now tells the object to get it's own data

        $currentContact->displayMyResults();
        // This now displays the data in the object to the page.
        echo "<hr>";
        unset($currentContact);
    }
?> 
```

使用那一小段代码，您刚刚显示了所有联系人，按照您想要的格式进行了格式化，并且您只是按照您想要的方式完美地显示了所有联系人。

现在想象一下，您将这些对象用于所有内容，而不是像这样的一个小例子。在论坛发帖？一个对象。业务 KPI 的复杂计算？一个对象可以获取它拥有的所有数据，然后计算预测，在图表中显示结果并将其通过电子邮件发送给需要它的用户。

当您来自从上到下执行的 HTML 和 PHP 脚本背景时，OOP 可能会有一个陡峭的学习曲线，但是当您开始掌握它的窍门时，您会希望自己从一开始就学会了它。

编辑：

您的查询中似乎没有该列`m_image`：

```
 $db = new Database();
    $db->connect();
    $db->query("
        SELECT cl.c_id, ncm.clme_me_id, ncm.clme_cl_id, me.m_type, me.m_title, me.m_desc, me.m_link, m_image
        FROM clienten AS cl
        LEFT JOIN norm_cl_me_rel AS ncm ON cl.c_id = ncm.clme_cl_id
        LEFT JOIN media AS me ON me.m_id = ncm.clme_me_id
        WHERE me.m_id IN(1,2,3,4,5)
    ");
    foreach($db->getResult() as $media){
        $this->clientMedia[$i]= new media();
        $this->clientMedia[$i]->type = $media['m_type'];
        $this->clientMedia[$i]->title = $media['m_title'];
        $this->clientMedia[$i]->image = $media['m_image'];
        $this->clientMedia[$i]->desc = $media['m_desc'];
        $this->clientMediaFiles++;
    } 
```

编辑 2：我不是 100% 确定，但可能是返回的字段名称。尝试用这个替换查询：

```
SELECT cl.c_id as c_id, ncm.clme_me_id as clme_me_id, ncm.clme_cl_id as clme_cl_id, me.m_type as m_type, me.m_title as m_title, me.m_desc as m_desc, me. as m_link
FROM clienten AS cl
LEFT JOIN norm_cl_me_rel AS ncm ON cl.c_id = ncm.clme_cl_id
LEFT JOIN media AS me ON me.m_id = ncm.clme_me_id
WHERE me.m_id IN(1,2,3,4,5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T09:36:58.573

当我在 Java 上学习 OOP 时，他们告诉我将每个 Object 类型视为一种**新的变量类型**。意思是，如果你有一个类`Person`（PS 好的命名约定是类名中的第一个字母大写），那么持有对象的`Person`对象可以被认为*是 type`Person`*。

我可以给你的最好的例子是当我制作**[IRC Bot](http://en.wikipedia.org/wiki/Internet_Relay_Chat_bot)**的时候。Bot 需要跟踪`User`s、`Channel`s 和`Server`s。IRC 协议*完全*基于字符串。

虽然我可以使用字符串，但这会大大增加我的应用程序的复杂性以及代码的可读性。相反，我选择将这些数据转换为`Channel`,`User`和`Server`对象，这些对象具有与 IRC 服务器交互的方法。

例如：

```
/**
 * Add $user to $channel.
 * @param Channel $channel
 * @param User    $user
 *
 * @throws Exception
 */
protected function addUser(Channel $channel, User $user) {
    if (!isset($this->chanList[$channel->name])) {          #Channel is not on channel list
        throw new Exception("You are not on that channel");
    }
    if (!isset($this->userList[$user->nick])) {             #User is not on global user list (New user)
        $this->userList[$user->nick] = $user;               #Add user to list
    }
    $this->chanList[$channel->name]->addUser($user);        #Add the user to the channel user list
} 
```

每当用户加入频道时都会调用它。这允许`Bot`对象跟踪用户以及他们在哪些频道上。代码进行一些验证，然后将`User`对象添加到`Channel`对象中。

现在想象一下，如果你必须只使用字符串，你必须从 IRC 协议中解析每一行，提取所需的数据，并操作一些非常大的数组。最终，你会遇到一大堆混乱，而不是让事情变得井井有条。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T09:21:41.580

所以 OOP 是一个很好的方法，例如 MVC 和 Front Controller 模式。但是如果你只想要4页的简单站点，你真的可以使用程序代码，没问题。如果你知道 drupal，那 90% 都是程序代码。

但...

```
$db = new Database();
        $db->connect(); 
```

创建 db 对象并在每种方法中连接并不是一个好主意。更好的是在脚本中只共享一个 db con 对象。你可以使用单例模式并做这样的事情。

```
class Database extends PDO {

  private static db = null;

  private function __construct() {
        parent::__construct(/* here get some conf data*/);    
  }

  public static getDb() {
    if(!self::db) self::db = new self();
    return self::db;
  }

  /* here you can add your custom methods like loadMenu etc. */
} 
```

更好的是解耦逻辑视图层，请参阅提取 php 函数，它将数组的所有元素添加到实际符号表中（键是该变量的名称，值是值）。使用提取功能，您可以制作漂亮的视图层，将逻辑与视图分离。就像是：

```
define('TEMPLATE_DIR', __DIR__ . '/templates');

function render($template, $variables) {
  extract($variables);
  require TEMPLATE_DIR . "/$template.tpl.php"; 
}

$variables = array('menu_links' => Database::getDb()->getMenu());

render('menu', $variables); 
```

在你的 menu.tpl.php 中：

```
<ul>
  <?php foreach($menu_links as $link) : ?>
  <li><a href="<?= $link['href'] ?>"><?= $link['title'] ?></a></li>
  <?php endforeach; ?> 
</ul> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-01T09:45:39.447

PHP OOP 通常归结为一个好的 MVC（模型视图控制器）conecpt 和实现。

如前所述，您通常不需要使用 PHP 进行 OOP，因为它会将核弹射入锡罐而不是棒球……因为网站本身往往是 MVCd，而且冗余代码不会真正伤害那里的任何人（只要因为您在数据库/会话/表单中没有混乱的安全性）

关于 PHP MVC 的一个很好理解的例子是[http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)

第一部分非常容易理解，而第二部分（链接在#1 的末尾）有点令人困惑，因为作者重命名了一些类并且没有完全解释它们。

但是查看 zip 文件中提供的代码已经给了你一个好主意。**

# mysql - 每天计算推文，按同一张表中的其他 3 列加权

> ID：11755833
> 
> 赞同：1
> 
> 时间：2012-08-01T08:55:30.640
> 
> 标签：mysql

（这是一篇很长的帖子，但我认为这个问题很容易解决，而且我已经准备好[SQLFiddle](http://sqlfiddle.com/#!2/58aa2/3)）请考虑下表：

```
----------------------------------------------------------------------
tweet_id sp100_id nyse_date   user_id class_id retweets quality follow
----------------------------------------------------------------------
1        1        2011-03-12  1       1        0        2.50    5.00
2        1        2011-03-13  1       2        2        2.50    5.00
3        1        2011-03-13  1       2        1        2.50    5.00
4        1        2011-03-13  2       2        0        0.75    1.00
5        1        2011-03-13  2       3        3        0.75    1.00
6        2        2011-03-12  2       2        3        0.75    1.00
7        2        2011-03-12  2       2        0        0.75    1.00
8        2        2011-03-12  1       3        5        2.50    5.00
9        2        2011-03-13  2       2        0        0.75    1.00
---------------------------------------------------------------------- 
```

该表的所需输出是每个`sp100_id`加权`_date`的正（类 = 2）和负（类 = 3）推文数量的列表`retweets`，`quality`并且`follow`：

```
--------------------------------------------------------------------------------
sp100_id  nyse_date  pos-rt pos-quality pos-follow neg-rt neg-quality neg-follow
--------------------------------------------------------------------------------
1         2011-03-11 0      0           0          0      0           0
1         2011-03-12 0      0           0          0      0           0
1         2011-03-13 3 (1)  5.75 (2)    11.00 (3)  3 (4)  0.75        1.00
2         2011-03-11 0      0           0          0      0           0
2         2011-03-12 3      1.50        10.00      5.00   2.50        2.50
2         2011-03-13 0      0.75        1.00       0      0           0
--------------------------------------------------------------------------------

On 2011-03-13, 3 positive tweets for sp100_id 1:

(1) 1 tweet retweeted 2 times, 1 tweets retweeted 1 time and 
    1 tweet retweeted 0 times = 1 x 2 + 1 x 1 + 1 x 0 = 3
(2) 2 tweets with quality 2.50 and 1 tweet with quality 0.75 =
    2 x 2.50 + 1 x 0.75 = 5.75
(3) 2 tweets with follow 5 and 1 tweet with follow 1 =
    2 x 5.00 + 1 x 1.00 = 11.00

On 2011-03-13, 1 negative tweets for sp100_id 1:

(4) 1 tweet retweeted 3 times = 1 x 3 = 3

etc... 
```

我有一个关于[SQLFiddle](http://sqlfiddle.com/#!2/58aa2/3)的演示以及必要的其他表（我需要将它链接到一个日期范围表，因为我还想包含全零的记录集）。我的查询也有一个输出，但我不明白为什么它与所需的输出不同：

```
--------------------------------------------------------------------------------
sp100_id  nyse_date  pos-rt pos-quality pos-follow neg-rt neg-quality neg-follow
--------------------------------------------------------------------------------
1         2011-03-11 0      0           0          0      0           0
1         2011-03-12 3      2           2          5      3           5
1         2011-03-13 3      8           12         3      1           1
2         2011-03-11 0      0           0          0      0           0
2         2011-03-12 3      2           2          5      3           5
2         2011-03-13 3      8           12         3      1           1
-------------------------------------------------------------------------------- 
```

我看不出问题出在哪里。你？您的帮助将不胜感激:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:51:36.613

它没有返回预期值的原因是因为您还需要`sp100.sp100_id = tweets.sp100_id`在`LEFT JOIN`条件中包含日期。

通过仅加入日期，它将加入表中的任何日期值，而不管`sp100_id`. 这就是为什么您的结果总和被丢弃的原因，因为对于 each `sp100_id`，它包括 s 中所有其他`sp100_id`s的值`SUM()`。

我还稍微清理了您的查询（仅就美学而言）：

```
SELECT     a.sp100_id,
           b._date AS nyse_date,
           SUM(IF(c.class=2, c.retweets, 0)) AS 'pos-rt',
           SUM(IF(c.class=2, c.quality,  0)) AS 'pos-quality',
           SUM(IF(c.class=2, c.follow,   0)) AS 'pos-follow',
           SUM(IF(c.class=3, c.retweets, 0)) AS 'neg-retweet',
           SUM(IF(c.class=3, c.quality,  0)) AS 'neg-quality',
           SUM(IF(c.class=3, c.follow,   0)) AS 'neg-follow'
FROM       sp100 a
CROSS JOIN daterange b
LEFT JOIN  tweets c ON a.sp100_id = c.sp100_id 
                   AND b._date = c .nyse_date
GROUP BY   a.sp100_id, 
           nyse_date 
```

* * *

[*SQLFiddle 演示*](http://sqlfiddle.com/#!2/87ce8/10/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:06:11.200

我能看到的唯一问题是您对`dec`数据类型的使用。我将其切换为浮动，一切似乎都很好。

我是否遗漏了一些不正确的值？

当您手动进行数学运算时，您错过了 3 月 13 日（最后一行）的一些值。

# java - 如何在 GWT 中更改图像

> ID：11755835
> 
> 赞同：0
> 
> 时间：2012-08-01T08:55:34.580
> 
> 标签：java, gwt

我对 GWT 的 Image 类有一些问题。

我创建图像，类似的东西：

`Image img = new Image(path);`

然后，我添加到这个变量单击处理程序。我想在点击后更改图像。现在我正在这样做，我有第二张图片：

`Image img2 = new Image(path2);`

单击第一个图像（img）后，我将其从面板中删除，然后添加第二个图像（img2）。

GWT 是否提供任何功能以更好的方式对其进行更改？我的面板中有一些其他小部件，因此删除所有内容然后添加一个不同的元素对我来说非常有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:57:36.300

为什么不使用`setUrl`GWT Image 小部件的方法？

请参阅[javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/Image.html#setUrl%28java.lang.String%29)。

例子：`img.setUrl('my/new/image.png');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:13:58.290

您可以将这两个图像添加到页面，通过调用隐藏 img2 `img2.setVisible(false)` ，然后在点击处理程序中，隐藏 img 并取消隐藏 img2。

# eclipse - Eclipse 4.2 在 Ubuntu 10.04 上崩溃

> ID：11755839
> 
> 赞同：0
> 
> 时间：2012-08-01T08:55:41.557
> 
> 标签：eclipse, ubuntu-10.04

我正在尝试在带有 oneiric 内核的 Ubuntu 10.04 LTS 64 位 PC 上运行 Eclipse 4.2。

我有 32 位和 64 位版本，但都不起作用。

我已经安装了jdk6。

当我运行 32 位时，会弹出此错误消息：

```
JVM terminated. Exit code=13
/usr/bin/java
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar /home/goister/android/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
-os linux
-ws gtk
-arch x86
-showsplash /home/goister/android/eclipse//plugins/org.eclipse.platform_4.2.0.v201206081400/splash.bmp
-launcher /home/goister/android/eclipse/eclipse
-name Eclipse
--launcher.library /home/goister/android/eclipse//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.200.v20120522-1813/eclipse_1502.so
-startup /home/goister/android/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.overrideVmargs
-exitdata 408015
-vm /usr/bin/java
-vmargs
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar /home/goister/android/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 
```

在我的终端中，我得到以下输出

```
/usr/lib/gio/modules/libgvfsdbus.so: wrong ELF class: ELFCLASS64
Failed to load module: /usr/lib/gio/modules/libgvfsdbus.so
/usr/lib/gio/modules/libgiogconf.so: wrong ELF class: ELFCLASS64
Failed to load module: /usr/lib/gio/modules/libgiogconf.so
/usr/lib/gio/modules/libgioremote-volume-monitor.so: wrong ELF class: ELFCLASS64
Failed to load module: /usr/lib/gio/modules/libgioremote-volume-monitor.so 
```

当我运行 64 位时，会弹出此错误消息：

```
JVM terminated. Exit code=13
/usr/bin/java
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar /home/goister/android/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
-os linux
-ws gtk
-arch x86
-showsplash /home/goister/android/eclipse//plugins/org.eclipse.platform_4.2.0.v201206081400/splash.bmp
-launcher /home/goister/android/eclipse/eclipse
-name Eclipse
--launcher.library /home/goister/android/eclipse//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.200.v20120522-1813/eclipse_1502.so
-startup /home/goister/android/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.overrideVmargs
-exitdata 418015
-vm /usr/bin/java
-vmargs
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar /home/goister/android/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 
```

在我的终端中，我得到以下输出

```
gogo: CommandNotFoundException: Command not found: gosh
org.apache.felix.gogo.runtime.CommandNotFoundException: Command not found: gosh
    at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:466)
    at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:395)
    at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)
    at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)
    at org.apache.felix.gogo.shell.Activator.run(Activator.java:75)
    at java.lang.Thread.run(Thread.java:619)
/usr/lib/gio/modules/libgvfsdbus.so: wrong ELF class: ELFCLASS64
Failed to load module: /usr/lib/gio/modules/libgvfsdbus.so
/usr/lib/gio/modules/libgiogconf.so: wrong ELF class: ELFCLASS64
Failed to load module: /usr/lib/gio/modules/libgiogconf.so
/usr/lib/gio/modules/libgioremote-volume-monitor.so: wrong ELF class: ELFCLASS64
Failed to load module: /usr/lib/gio/modules/libgioremote-volume-monitor.so 
```

有谁知道出了什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:58:45.333

你的 JVM 和 Eclipse 的架构是一样的吗？

# javascript - Jquery向下滑动不起作用

> ID：11755841
> 
> 赞同：1
> 
> 时间：2012-08-01T08:55:42.233
> 
> 标签：javascript, jquery, html, css, jquery-slider

我对 jquery 库非常陌生，所以我正在尝试一些 jquery 函数。这是我写的代码

```
<html>
<head>
<title>slide</title>

    <style>
        .outer  {

            width: 700px;
            height: 1000px;
            border: 2px dashed green;
            margin: 20px;
        }

        .box    {
            widht: 100px;
            height: 80px;
            border: 2px solid green;
            margin: 20px;
        }
    </style>

</head>
<body>
    <input type='button' id='btn' value='click' />
    <div class='outer'></div>
    <script type='text/javascript' src='jquery.js'></script>
    <script>
        $('#btn').click(function()  {
            $('.outer').prepend("<div class='box'></div>");
            $('.box').slideDown(3000);
        });
    </script>
</body> 
```

如您所见，如果我单击按钮，则会在父 div 前面添加一个新 div。但是 jquery slideDown 函数似乎没有任何效果，但是当我使用 slideUp 时，它按预期工作。因此，每当我单击按钮时，都会创建新的 div，但不会发生下滑动画。我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T09:04:34.770

`box`不能向下滑动，因为`box`已经在显示了。

设置`display:none`你的`.box`css规则，你应该得到你想要的效果。

见演示：http: [//jsfiddle.net/UDj5y/](http://jsfiddle.net/UDj5y/)

* * *

如果您不想更改 CSS，可以使用以下 jQuery 代码：

```
$box = $("<div class='box'></div>");
$('.outer').prepend($box);
$box.hide().slideDown(3000); 
```

见演示：http: [//jsfiddle.net/UDj5y/1/](http://jsfiddle.net/UDj5y/1/)

```
$('#btn').click(function()  {
    $box = $("<div class='box'></div>");
    $('.outer').prepend($box);
    $box.hide().slideDown(3000);
});
```

```
.outer  {

    width: 700px;
    height: 1000px;
    border: 2px dashed green;
    margin: 20px;
}

.box    {
    width: 100px;
    height: 80px;
    border: 2px solid green;
    margin: 20px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<input type='button' id='btn' value='click' />
<div class='outer'></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:01:56.503

当您添加 div 时，它会自动显示，因此`slideDown`无事可做。

您有 2 个选项：

```
.box    {
            widht: 100px;
            height: 80px;
            border: 2px solid green;
            margin: 20px;
            display: none;
        } 
```

或在 jquery 中：

```
$('.box').hide().slideDown(3000); 
```

看到这个小提琴：http: [//jsfiddle.net/GPhcc/](http://jsfiddle.net/GPhcc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:59:10.840

这是您的解决方案：

[http://jsfiddle.net/Rv2ap/](http://jsfiddle.net/Rv2ap/)

它不工作的原因是你的盒子在附加时是可见的。这意味着动画无法运行。

您需要做的就是添加`display: none;`到您的 css 规则中`.box`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T09:00:02.963

你应该隐藏它：

```
.box {
  display: none;
} 
```

如果你不这样做，那么框会立即出现。

# php - 在浏览器中运行命令行不起作用

> ID：11755844
> 
> 赞同：0
> 
> 时间：2012-08-01T08:55:51.853
> 
> 标签：php, cmd, exec, wamp

我正在运行 WAMP。

当我做：

```
1\. run cmd
2\. cd c:\wamp\bin\php\php5.3.5\
3\. press enter
4\. php c:\wamp\www\cmdtest\index.php
5\. press enter 
```

我得到了预期的输出。

但是当我在浏览器中执行此操作时，我使用代码访问了 localhost/cmdtest/exec.php：

```
<?php
    exec('php c:\wamp\www\cmdtest\sample.php', $output);
    var_dump($output);
?> 
```

输出为空。

我已经在 services.msc 中设置了 wampapache 的用户并重新启动 wamp，没有任何修复...

知道为什么或有人知道修复吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:57:09.970

您是否尝试过转义反斜杠？

```
<?php
    chdir('c:\\wamp\\bin\\php\\php5.3.5\\');
    exec('php c:\\wamp\\www\\cmdtest\\sample.php', $output);
    var_dump($output);
?> 
```

另见：[http ://www.tuxradar.com/practicalphp/2/6/2](http://www.tuxradar.com/practicalphp/2/6/2)

# iphone - 通过缩放图像的一部分来创建动画

> ID：11755857
> 
> 赞同：0
> 
> 时间：2012-08-01T08:56:44.943
> 
> 标签：iphone, cocos2d-iphone

我想启动一个部分缩放图像的动画。

例如，我有一个带有花的 ccsprite，当我触摸那朵花时，我想在只有它的 routs 收缩时创建一个动画。

这可以通过逐帧创建动画来完成（这需要更多时间来由设计师制作），但我正在考虑为图像的某个部分设置比例并对其进行动画处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:20:55.737

你可以使用 cocos2d 效果来移动精灵的一部分
尝试使用 Grid3D 我认为这就是你想要
[的查看文档](http://www.cocos2d-iphone.org/archives/40)

# mongodb-.net-driver - 为 NEventStore 设置 mongodb 持久性时需要为每种事件类型注册 BsonClassMap？

> ID：11755859
> 
> 赞同：3
> 
> 时间：2012-08-01T08:56:49.093
> 
> 标签：mongodb-.net-driver, cqrs, neventstore

[在为Oliver 的 EventStore](https://github.com/joliver/EventStore)设置 mongodb 持久性时，是否`BsonClassMap`需要为每种事件类型注册？如果我不这样做，我会得到异常`Unknown discriminator value 'InventoryItemCreated'`。我向 MongoDB 注册了所有事件类型，就像[我在这里描述](https://stackoverflow.com/a/11743295/322283)的那样，然后配置我的事件存储：

```
var types = Assembly.GetAssembly(typeof(SimpleCQRS.Event))
                    .GetTypes()
                    .Where(type => type.IsSubclassOf(typeof(SimpleCQRS.Event)));
foreach (var t in types)
    BsonClassMap.LookupClassMap(t);

var store = Wireup.Init()
            .UsingMongoPersistence("mongo", new DocumentObjectSerializer())
            .UsingSynchronousDispatchScheduler()
            .DispatchTo(new DelegateMessageDispatcher(DispatchCommit))
            .Build(); 
```

这真的有必要吗？

我在修改 Greg Young 的“最简单的事情”以支持具有 MongoDB 持久性的 Oliver 的事件存储时遇到了这个问题，[代码在 github 上](https://github.com/serraict/m-r/commits/eventstore)。

### 一些相关的观察 (tldr)

如果我*不*注册事件类型，我可以从一个空的事件存储开始（因为事件不需要反序列化）。我可以添加一个库存项目，我的事件存储有一个提交：

```
/* 0 */
{
  "CommitId" : new BinData(3, "4iXrzvzNYEyKmGweCKkOVQ=="),
  "CommitStamp" : ISODate("2012-08-01T08:08:35.795Z"),
  "Dispatched" : true,
  "Events" : [{
      "StreamRevision" : 1,
      "Payload" : {
        "Headers" : { },
        "Body" : {
          "_t" : "InventoryItemCreated",
          "Version" : 0,
          "_id" : new BinData(3, "36qvklv+xU2+mDhVUlzmBg=="),
          "Name" : "abc"
        }
      }
    }],
  "Headers" : { },
  "_id" : {
    "StreamId" : new BinData(3, "36qvklv+xU2+mDhVUlzmBg=="),
    "CommitSequence" : 1
  }
} 
```

当我重新启动应用程序并重播此单个事件时，它无法反序列`PayLoad.Body`化，因为`Unknown discriminator value 'InventoryItemCreated'`.

我找到了两种成功重播`InventoryItemCreated`事件的替代方法：

*   *当我在重播之前*创建另一个库存项目时，我可以重播所有事件；显然 MongoDB 然后知道鉴别器。
*   手动将鉴别器更改为完整的类型名称：

```
/* 0 */
{
  // ..
  "Events" : [{
      "StreamRevision" : 1,
      "Payload" : {
        "Headers" : { },
        "Body" : {
          "_t" : "SimpleCQRS.InventoryItemCreated, SimpleCQRS",
        // .. 
```

让我感到有点尴尬的是，系统显然*可以*在不注册所有事件类型的情况下工作，但是选择了一个默认的鉴别器确定策略来防止这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T16:35:25.300

我也遇到过同样的情况。目前，我以与您描述的类似方式执行 BSON 注册。让系统在启动时执行此注册并不困扰我。

此外，我将事件和命令类保存在与实际域逻辑不同的项目中，因为我可以在服务器和客户端项目中“共享”类结构。

# javascript - 创建一个打开浏览器用户首选项的链接？

> ID：11755861
> 
> 赞同：1
> 
> 时间：2012-08-01T08:57:03.567
> 
> 标签：javascript, jquery, ruby-on-rails

无法在任何地方获得有关此的信息-我说这不可能吗？

我正在测试 cookie，并希望在通知段落中放置一个链接，将用户直接引导至该特定浏览器的 cookie 设置？

我正在使用 Javascript/jquery 和 RoR ...

您可能知道的任何想法或链接都会非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:06:40.097

不可能。如果是这样，那将是一个安全问题。

默认情况下，`chrome://chrome/settings/`将无法访问。它抛出异常`Not allowed to load local resource: chrome://chrome/settings/`。同样适用`about:`于 Firefox 中的 URL。

您可能会破解某些浏览器来执行此操作，但没有标准的跨浏览器方式来执行此操作。

亲自尝试：**[JSFiddle](http://jsfiddle.net/eXAy6/)**

* * *

如果获得许可，肯定**可以**通过 chrome 扩展程序访问`chrome://`URL 。`tabs`

# google-maps - 标记管理器和圆形对象

> ID：11755863
> 
> 赞同：0
> 
> 时间：2012-08-01T08:57:06.460
> 
> 标签：google-maps, google-maps-api-3

我必须准备大约 30k 圆形对象的地图，这对 G Maps 来说是一个很大的挑战。

在寻找解决方案时，我偶然发现了标记管理器，它可以将显示的对象减少到一定的缩放级别。

是否可以使用标记管理器来圈出对象而不是标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:08:02.130

[标记管理器](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markermanager/)和（可能更好）[标记聚类](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/)器都是开源的。您可以修改其中一个来管理圆圈而不是标记（或使用圆圈标记）。

[如果您还没有看到，文档中的太多标记](https://developers.google.com/maps/articles/toomanymarkers#markermanager)文章讨论了这些问题。

# iphone - 使用 iPhone 的音量增大按钮拍摄照片

> ID：11755869
> 
> 赞同：1
> 
> 时间：2012-08-01T08:57:16.733
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，如何在显示屏幕操作/设置的同时使用 iPhone 的**音量增大 (+)按钮捕获图片？**

我希望它以与默认相机应用程序中类似的方式工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:13:04.937

您想知道硬件音量按钮的上按、下按通知吗？

或者，请解释一下你什么时候按音量键拍照？

如果是这样，请参考[OpenSource](https://github.com/blladnar/RBVolumeButtons)示例。**查看代码，可以找到音量上压/下压事件的方法。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:49:06.807

当您使用 UIImagePickerController 对象时，音量按钮操作是内置的。因此，如果您在应用程序中使用此对象，您将获得与内置相机应用程序非常相似的功能，特别是 - 如果您将音量调高，它将捕获您的图像。

使用它，粗略的过程如下：

1.  创建一个 UIImagePickerController 对象

2.  将其 sourceType 属性设置为 UIImagePickerControllerSourceTypeCamera 并设置其委托

3.  实现您的委托方法来处理您拍摄的照片并关闭相机

4.  然后展示相机。默认设置是在屏幕上显示相机控件，您可以使用这些控件或使用音量按钮。

# android - 从 android 创建 Drupal 节点

> ID：11755871
> 
> 赞同：1
> 
> 时间：2012-08-01T08:57:19.747
> 
> 标签：android, drupal

在这里，我正在使用将转换`drupal site`为 android的 android 应用程序`native application.`在这里我从 android 创建时遇到了问题`drupal node`。简而言之，我对此一无所知。但是我在下面尝试过，请让我知道我错在哪里，并且还有其他解决方案。

在这段时间里，我还面临另一个问题。在我的 postIdea 类中，还有两个`AsyncTask`（类别和创始人）从 json 加载数据并在按下提交按钮之前添加到微调器。它的工作完美。但是，当按下提交按钮时，还会调用上一个（类别和创始人）AsyncTask。按下提交按钮后，我不会再次调用类别和创始人方法。

在我的情况下，节点的 drupal 接受格式：

```
{
 "type":"idea",
 "title":"idea one",
 "field_story_idea":[
 {
"value":"test"          // test is title value
}
],
"field_founder_profile_refrence":[
 {
   "nid":"111"             // 111 is founder value
 }
],
"field_idea_budget":[
{
 "value":"2"             // 2 is budget value
 }
 ],
"field_idea_details":[
{
 "value":"AAAAAAAA"     //  AAAAAAAA is idea details value
}
],
"taxonomy":{
  "6":{
"tid":"6"         // 6 is the category value
 }
}
} 
```

在这里，我得到了所有值并转换为`JSON format`（根据上面的显示）。当我将特定数据传递给服务器时，它给了我状态代码 200，但也给出了如下错误：

```
 Response from post  idea => <br /><b>Fatal error</b>:  Cannot unset string offsets in <b>/var/aegir/hostmaster-HEAD/profiles/default/modules/cck/includes/content.node_form.inc</b> on line <b>60</b><br /> 
```

当我将所有数据组合成一个 jsonobject 并传递给服务器时，它会给出错误 401 状态代码，也会给出如下错误：

```
 Invalid use of SingleClientConnManager: connection still allocated.
 W/SingleClientConnManager( 1212): Make sure to release the connection before allocating another one. 
```

post_idea.class

```
public class Post_Idea extends AsyncTask<Void, Void, Void> {

    String strResponse1;
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();

        pgb.setVisibility(View.VISIBLE);
    }

    @Override
    public Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        String url = "URL HERE...";

        //String strResponse;
        try {

            strResponse1 = util.makeWebForPostIdea(url,title,spinnercategoryIndexId, spinnerFounderIndexId,
                    story_bhnd_idea,idea_dtls, spinnerBudgetId);

            System.out.println("=========> Response from post  idea => "
                    + strResponse1);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        pgb.setVisibility(View.GONE);

    }
} 
```

实用程序类

```
 public static String makeWebForPostIdea(String url, String title,int spinnercategoryIndexId, int spinnerFounderIndexId, String story_bhnd_idea, String idea_dtls,int spinnerBudgetId) throws JSONException
   {

         HttpPost post = new HttpPost(url);

             List<NameValuePair> params = new ArrayList<NameValuePair>();

            // For the Founder and all other fields covert the json to the stringer

            JSONStringer jsonstringerFounder = new JSONStringer().array().object().key("nid").value(""+spinnerFounderIndexId).endObject().endArray();
            JSONStringer jsonstringerstoryBhndIdea = new JSONStringer().array().object().key("value").value(""+story_bhnd_idea).endObject().endArray();
            JSONStringer jsonstringerIdeaDetails = new JSONStringer().array().object().key("value").value(""+idea_dtls).endObject().endArray();
            JSONStringer jsonstringerBudjet = new JSONStringer().array().object().key("value").value(""+spinnerBudgetId).endObject().endArray();
                JSONStringer jsonstringercategory1 = new JSONStringer().object().key(""+spinnercategoryIndexId).object().key("tid").value(""+spinnercategoryIndexId).endObject().endObject();

            JSONStringer combineallnode123 = new JSONStringer().object().key("type").value("idea").key("title").value(title).key("field_story_idea").
                    value(jsonstringerstoryBhndIdea).key("field_founder_profile_refrence").value(jsonstringerFounder).
                    key("field_idea_budget").value(jsonstringerBudjet).key("field_idea_details").
                    value(jsonstringerIdeaDetails).key("taxonomy").value(jsonstringercategory1).endObject();

           params.add(new BasicNameValuePair("cheerfoolz",combineallnode123.toString()));
          /* params.add(new BasicNameValuePair("type","idea"));
             params.add(new BasicNameValuePair("title",title));
             params.add(new BasicNameValuePair("field_story_idea", jsonstringerstoryBhndIdea.toString()));
             params.add(new BasicNameValuePair("field_founder_profile_refrence",jsonstringerFounder.toString()));
             params.add(new BasicNameValuePair("field_idea_budget", jsonstringerBudjet.toString()));
             params.add(new BasicNameValuePair("field_idea_details",jsonstringerIdeaDetails.toString()));
             params.add(new BasicNameValuePair("taxonomy",jsonstringercategory1.toString())); 
            */             

        UrlEncodedFormEntity formEntity = null;
            try {
                            formEntity = new UrlEncodedFormEntity(params);
            } catch (UnsupportedEncodingException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
            }

         post.setEntity(formEntity);

            try {

                    HttpResponse response = client.execute(post);

                    int statusCode = response.getStatusLine().getStatusCode();
                    System.out.println("=========> statusCode from the postidea util.java=====> "+statusCode);        
                    if (statusCode == HttpStatus.SC_OK)
                    {
                            HttpEntity entity = response.getEntity();
                            //String html = EntityUtils.toString(entity);
                            InputStream is = entity.getContent();

                            return iStream_to_String(is);
                    }
                    else
                    {
                            return "Hello This is status ==> :"+String.valueOf(statusCode);
                    }
            } catch (UnsupportedEncodingException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            }

            }

            return null;

    } 
```

**编辑：**

在这里，当我将`perticular`值传递给服务器时，然后给我`status code 200`，但在`drupal site`.

# java - 将数据库列名映射到 Java 对象变量

> ID：11755872
> 
> 赞同：0
> 
> 时间：2012-08-01T08:57:25.597
> 
> 标签：java, xml, database, mapping

我正在寻找将数据库的列名映射到 Java 对象的变量的框架或解决方案。假设我有一个 xml 文件，其中包含元素“docid”及其值。数据库将包含一个表，其中有一列称为“ducumentID”。我想比较这两个值，所以xml文件中“docid”标签内的一个值和“docid”列的数据条目。因为在这个例子中它只是我必须比较的一件事，所以手动进行比较很容易。但后来我想用动态的值计数来做到这一点。是否有一些映射框架或解决方案，我只能说：这个 xml 值是该数据库列的适当值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:04:20.170

[Hibernate](http://www.hibernate.org/)是实现[JPA](http://en.wikipedia.org/wiki/Java_Persistence_API)的流行[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。

java的其他ORM：

*   [OpenJPA](http://openjpa.apache.org/)
*   [EJB](http://en.wikipedia.org/wiki/Enterprise_JavaBeans)中的实体 Bean
*   [MyBatis](http://blog.mybatis.org/)
*   [EclipseLink](http://www.eclipse.org/eclipselink/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T09:08:00.613

您正在寻找 ORM 框架。

这是 ORM 框架的列表：ORM 的[Wiki 链接](http://en.wikipedia.org/wiki/List_of_object-relational_mapping_software)

因为[**Hibernate**](http://www.hibernate.org/)是开源和广泛使用的框架。

# zend-framework - 在 Zend 中引导时我需要添加更多视图助手

> ID：11755883
> 
> 赞同：0
> 
> 时间：2012-08-01T08:57:59.357
> 
> 标签：zend-framework

我有一个已经定义的 application.ini：

```
resources.view.helperPath.Core_View_Helper          = "Core/views/helpers" 
```

现在我想在引导时添加更多视图助手，例如：

```
$view->addHelperPath('My/View/Helper','My_View_Helper_'); 
```

我尝试了很多解决方案，例如：

1.  添加一个名为的方法：`_initView()`then `getResource('view')->addHelperPath()`
2.  使用`Zend_Layout::getMvcInstance()->getView()->addHelperPath()`，但这也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:46:03.980

在调用 addHelperPath 的第二个参数中省略尾随下划线。

```
$view->addHelperPath('My/View/Helper','My_View_Helper'); 
```

# php - 查询结果是否为空？

> ID：11755885
> 
> 赞同：-1
> 
> 时间：2012-08-01T08:58:05.007
> 
> 标签：php, mysql

这是一个数据导入脚本，我想检查具有父 ID 的类别名称是否已经存在；如果是，则不需要将其添加到数据库中。然而，我的支票并没有阻止重复的条目。

```
$i = 1;
$check = FALSE;
echo'<br>';
do{
   //Turn import order into Colewood order. 
   $tieroffset = $i - 1;

   $tier = $csvdata[$r][$fields["Tier" . $i]];

   $query = ("SELECT name FROM base_categories WHERE name = '".$tier."' AND id = '".$tieroffset."'");
   $result = mysql_query($query);
   $result_array = mysql_fetch_array($result);

   if (empty($result_array)) {

       if($tier != null){ 
       $queryInsert = "INSERT INTO base_categories (parent_id,name) 
                        VALUES ('" . $tieroffset . "', '" . mysql_real_escape_string($csvdata[$r][$fields["Tier" . $i]]) . "')";
       }

        mysql_query($queryInsert);

        print_r($queryInsert);
   }                

   $i++;
}while ($i <= 6 || $check != FALSE);
echo'    >>>END PRODUCT<br>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:01:39.263

使用 mysql_num_rows 函数检查查询返回的行数。

```
if (empty($result_array)) { 
```

到

```
if (mysql_num_rows($result) == 0 ) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:11:53.580

`mysql_fetch_array`*`FALSE`*如果没有更多行，则返回并始终使用[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)或 PDO 来避免*SQL Injection*。

```
$result = mysql_query($query);
if($result)
 {
  if(($result_array = mysql_fetch_array($result)) //while
   {
    //code
   }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:27:22.460

首先是一个小的回报问题：

如果您的 {parent_id, name} 组合不能包含重复项，为什么它们不是唯一约束？？？

如果您添加它，您肯定不会在这两列中获得重复的键。如果它们只是列，您也可以将它们作为主键。

接下来，如果您已经这样做了，只需一个查询就足够了

```
$query = "INSERT INTO base_categories (parent_id, name) VALUES('" . 
         $tieroffset . "', '" . 
         mysql_real_escape_string($csvdata[$r][$fields["Tier" . $i]]) . "') 
         ON DUPLICATE KEY UPDATE name = name; 
```

ON DUPLICATE KEY UPDATE updates your old record when an UNIQUE constraint OR PRIMARY KEY constraint fails. This way you only have to run one query in stead of two.

# java - 使用 Jsch 检查 SFTP 权限

> ID：11755888
> 
> 赞同：5
> 
> 时间：2012-08-01T08:58:13.930
> 
> 标签：java, ssh, sftp, jsch

我目前正在使用 Jsch 实现一个 SFTP 客户端。

对于这个客户端，我需要检查登录用户在 SFTP 服务器上的权限，以检查用户是否能够执行某些操作。不幸的是，我似乎找不到任何文档或示例来说明如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:11:24.080

此代码将执行您想要的操作：

```
ChannelSftp channel = (ChannelSftp)session.openChannel("sftp");
SftpATTRS attrs = channel.lstat(fileOnServer)
boolean userHasPermissionsToWriteFile = attrs != null && ((attrs.getPermissions() & 00200) != 0) && attrs.getUId() != 0; 
```

在哪里

```
attrs.getUId() != 0 
```

检查用户不是root

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-19T06:50:54.633

准备好的方法中的相同方法（格式化和重构）：

```
 private boolean accessAllowed(String path) 
    throws SftpException, JSchException {

    boolean result = false;

    ChannelSftp channel = (ChannelSftp) session.openChannel("sftp");
    SftpATTRS attrs = channel.lstat(path);

    result =
      attrs != null &&
      ((attrs.getPermissions() & 00200) != 0) &&
       attrs.getUId() != 0;

    return result;
  } 
```

# forms - 首选选项的 Symfony2 选择小部件排序

> ID：11755890
> 
> 赞同：1
> 
> 时间：2012-08-01T08:58:28.470
> 
> 标签：forms, symfony, drop-down-menu, formbuilder, dropdownchoice

我有一个带有国家选择的注册表单。大多数用户来自英国，其次是爱尔兰。目前，世界其他地区加起来只占很小的比例。因此，我想将英国和爱尔兰放在首位，作为首选：

```
->add('country', 'choice', array(
    'choices' => Locale::getDisplayCountries(\Locale::getDefault()),
    'preferred_choices' => array('GB', 'IE')
)) 
```

这工作正常，但“爱尔兰”出现在“英国”上方的单独的首选选项中。

有没有办法设置这些顺序，以便英国出现在列表的顶部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:14:06.003

你检查过[这篇文章](http://symfony.com/doc/current/reference/forms/types/entity.html#using-a-custom-query-for-the-entities)吗？

你可以通过类比来引导你的表格：

```
$builder->add('users', 'entity', array(
    'class' => 'AcmeHelloBundle:User',
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('u')
            ->orderBy('u.username', 'ASC');
    },
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:01:48.193

创建的问题：

[https://github.com/symfony/symfony/issues/5136](https://github.com/symfony/symfony/issues/5136)

希望会在 sf 2.2 中看到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:08:58.730

在解决此问题之前，您可以使用一点 JavaScript 至少强制设置默认值。使用 JQuery 的示例：

```
<script type="text/javascript">
/* Set the default country to US */
$(document).ready(function() {
  $("select option").filter(function() {
      //may want to use $.trim in here
      return $(this).text() == "United States"; 
  }).prop('selected', true);
});
</script> 
```

# c# - 如何知道自托管服务的状态？

> ID：11755891
> 
> 赞同：0
> 
> 时间：2012-08-01T08:58:36.910
> 
> 标签：c#, wcf

我创建了一个自托管服务并使用 httpcfg ssl 命令将我的服务绑定到一个端口。我的问题是有什么方法可以知道服务的状态 - 它是否正在运行？事件虽然我的程序运行没有任何错误，但它未能为客户端提供服务，后来我发现我没有配置（使用 httpcfg）我的端口。因此，我的程序正在运行但仍无法提供服务可能会令人不安。那么，有什么方法可以（以编程方式）知道我的服务已经准备好服务了吗？

提前致谢

马杜马赫什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:56:12.760

是的，这是可能的，但它需要编码。如何实现这一点，您可以[在此处阅读](http://weblogs.asp.net/cibrax/archive/2010/05/17/enabling-service-availability-in-wcf-services.aspx)

# vb.net - 如何处理空引用异常

> ID：11755895
> 
> 赞同：2
> 
> 时间：2012-08-01T08:58:40.493
> 
> 标签：vb.net, nullreferenceexception

我想问我如何包含我得到的错误“对象引用未设置为对象的实例。”，nullreferenceException。我试图将从gridview获得的值分配给一个变量。我在第一行得到错误。当值为 null 时，我该如何处理。我尝试使用 isnot Nothing 但它仍然给我错误，并且 isdbnull 不会工作，因为我没有处理数据表。

当gridview仍然为空时，我只会收到此错误，我该如何处理。

```
If Not IsNothing(ProductsRawMaterialGrid.GridViewElement.CurrentRow.Cells("PercentageInMix").Value) Then
    PIM = ProductsRawMaterialGrid.GridViewElement.CurrentRow.Cells("PercentageInMix").Value
Else
    PIM = FormatNumber("0.00", 2)
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:04:53.153

问题是你不知道`null`你的代码行中有什么。考虑到问题行，您有以下表达式：

```
ProductsRawMaterialGrid.GridViewElement.CurrentRow.Cells("PercentageInMix").Value 
```

`null`在该表达式中有六种东西可以计算：

*   `ProductsRawMaterialGrid`可能`null`
*   `ProductsRawMaterialGrid.GridViewElement`可能`null`
*   `ProductsRawMaterialGrid.GridViewElement.CurrentRow`可能`null`
*   `ProductsRawMaterialGrid.GridViewElement.CurrentRow.Cells`可能`null`
*   `ProductsRawMaterialGrid.GridViewElement.CurrentRow.Cells("PercentageInMix")`可能`null`
*   `ProductsRawMaterialGrid.GridViewElement.CurrentRow.Cells("PercentageInMix").Value`可能`null`

您只检查其中一个（最后一个）。不幸的是，如果其他任何一个是`null`，您将看到一个`NullReferenceException`.

有根据的猜测是，要么`CurrentRow`是`null`您调用代码时，要么是您的单元名称错误并且`.Cells("PercentageInMix")`是`null`. 拆分此代码或在调试器中检查它应该可以帮助您解决问题。

# javascript - 使用 Javascript 的 Metro 水平滚动容器

> ID：11755899
> 
> 赞同：0
> 
> 时间：2012-08-01T08:58:53.910
> 
> 标签：javascript, html, css, microsoft-metro, winjs

有没有一种标准方法可以使用 WinJS/javascript 在 Metro 应用程序中实现水平滚动效果？

假设我有多个 div**动态添加**了可变宽度/高度，并且我希望屏幕在溢出时内容更宽时水平滚动，我将如何实现这一目标？

我不希望在滚动包装器上使用具有固定宽度的溢出-x:scroll

```
<section class="header">
    Header which is always shown in top left corner
</section>
<section class="magic-winjs-scroll-container-class">
   <div style="width:300px;height:200px">Some random div which should stack horizontally</div>
   <div style="width:300px;height:200px">Some random div which should stack horizontally</div>
   <div style="width:300px;height:200px">Some random div which should stack horizontally</div>
   <div style="width:300px;height:200px">Some random div which should stack horizontally</div>
   <div style="width:300px;height:200px">Some random div which should stack horizontally</div>
   <div style="width:300px;height:200px">Some random div which should stack horizontally</div>
</section> 
```

**解决方案：**

***CSS***

```
.magic-winjs-scroll-container-class {
     display: -ms-flexbox;
     -ms-flex-direction: row;
     -ms-flex-align: center;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:20:06.353

您需要使用“Flexbox”。这将为您提供所需的一切：http: [//msdn.microsoft.com/en-us/library/ie/hh673531 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh673531(v=vs.85).aspx)

此外，还有一个动手实验室，可以为不同的选项生成交互式 CSS：http: [//ie.microsoft.com/testdrive/Graphics/hands-on-css3/hands-on_flex.htm](http://ie.microsoft.com/testdrive/Graphics/hands-on-css3/hands-on_flex.htm)

具体来说，您会希望它按行布局。您仍然需要溢出：自动，以使其允许您自动显示滚动条。

在那之后，一切都归结为调整 flexbox 以使其按您想要的方式布局。

请注意，如果这是针对大量数据的，您可能需要考虑使用 ListView，它以完全不同的方式实现这一点，但允许数据和 UI 虚拟化。

这

# jquery - 跳转到 X 方向的 ID 标签

> ID：11755908
> 
> 赞同：0
> 
> 时间：2012-08-01T08:59:24.427
> 
> 标签：jquery, scroll

我目前在这里使用它来跳转到页面上的 id 标记，尽管如果可能的话我还需要能够跳转到 X 方向，这会很棒吗？

所以基本上我只想要一个按钮，该按钮将滚动到放置在页面 x 方向上的 div ，与垂直方向相同:)

```
//anchors
  function filterPath(string) {
    return string
      .replace(/^\//,'')
      .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
      .replace(/\/$/,'');
  }

  $('a[href*=#]').each(function() {
    if ( filterPath(location.pathname) == filterPath(this.pathname)
    && location.hostname == this.hostname
    && this.hash.replace(/#/,'') ) {
      var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
      var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
       if ($target) {
         var targetOffset = $target.offset().top + 90;
         $(this).click(function() {
           $('html, body').animate({scrollTop: targetOffset}, 600);
           return false;
         });         
      }
    }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:38:51.617

这是一种似乎有效的方法：

```
$('a').click(
    function(e){
        // prevents the default 'jump'
        e.preventDefault();
        // caches the href of the clicked link
        var href = this.href,
            // takes the href, splits off the '#' character (and anything before it)
            // and uses that to find the id of the target element.
            target = $('#' + href.substring(href.indexOf('#') + 1)),
            // finds, and caches the offsets
            offsets = target.offset(),
            // finds the offset of the top of the element (relative to the page)
            top = offsets.top,
            left = offsets.left;
        // animates the movement to the top, and the left, position of the target
        $('body').stop().animate({
            scrollTop : top,
            scrollLeft : left
        }, 1000);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XHEZy/6/)。

修改了上述内容，以使用`split()`代替`substring()`：

```
$('a').click(
    function(e){
        e.preventDefault();
        var href = this.href,
            // as above, but more concise
            target = $('#' + href.split('#')[1]),
            offsets = target.offset(),
            top = offsets.top,
            left = offsets.left;
        $('body').stop().animate({
            scrollTop : top,
            scrollLeft : left
        }, 1000);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XHEZy/5/)。

而且，如果你想拥有两个不同的滚动事件，这个版本会有所帮助：

```
$('a').click(
    function(e) {
        e.preventDefault();
        var target = $('#' + this.href.split('#')[1]),
            offsets = target.offset(),
            top = offsets.top,
            left = offsets.left;
        $('body').stop().animate({
            scrollTop: top
        }, 1000, function() {
            $(this).animate({
                scrollLeft: left
            }, 1000);
        });
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XHEZy/4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:10:42.503

我希望我理解你的问题:) [http://jsfiddle.net/QWLEW/](http://jsfiddle.net/QWLEW/)

```
​&lt;div style="width: 1500px; overflow: visible;">
    <a href="#foo">Goto div</a>
    <div id="foo" style="width: 100px; position:absolute; left: 1000px;">Here Iam</div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

当你点击链接时，页面会跳转到 id 为 foo 的 div。

并带有动画。（编辑你的代码）它现在也要去它的水平位置。我删除了 +90 像素，因为我不知道你想用它来实现什么。

[http://jsfiddle.net/g47bn/](http://jsfiddle.net/g47bn/)

```
//anchors
  function filterPath(string) {
    return string
      .replace(/^\//,'')
      .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
      .replace(/\/$/,'');
  }

  $('a[href*=#]').each(function() {
    if ( filterPath(location.pathname) == filterPath(this.pathname)
    && location.hostname == this.hostname
    && this.hash.replace(/#/,'') ) {
      var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
      var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
       if ($target) {
         $(this).click(function() {
             //Use offset top and left to go to the divs position
             $('html, body').animate({scrollTop: $target.offset().top, scrollLeft: $target.offset().left}, 600);
           return false;
         });         
      }
    }
  });​ 
```

如果您只想向上或向左滚动，请在此处删除另一个 ptoperty 表单。

$('html, body').animate({ **scrollTop: $target.offset().top, scrollLeft: $target.offset().left** }, 600);

# android - Android如何调整EditText中的文本大小

> ID：11755916
> 
> 赞同：2
> 
> 时间：2012-08-01T08:59:54.663
> 
> 标签：android, android-edittext

我有一个`EditText`. `EditText`例如，如果文本的长度大于 10，我想调整文本的大小。

这该怎么做？

谢谢你。欣赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:04:47.923

这应该可以解决问题：

```
final EditText et = (EditText) findViewById(R.id.editTextId);
et.setOnKeyListener(new OnKeyListener() {
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if(et.getText().length()>10) {
            et.setTextSize(newValue);
        } else {
            et.setTextSize(oldValue);
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:08:25.843

您可能更喜欢使用 TextWatcher 而不是 OnKeyListener （显然针对硬件键）：

```
 final float size1 = 30, size2 = 15;

    final EditText edit = new EditText(this);
    edit.setTextSize(size1);

    edit.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if(s.length() > 10) {
                edit.setTextSize(size2);
            }
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:06:23.153

请试试：

```
if(myEditText.getText().toString().lenght() > 10)
{
        myEditText.setTextSize(6);
} 
else 
{
        myEditText.setTextSize(10);
} 
```

# android - 位置返回始终为空 - android

> ID：11755921
> 
> 赞同：2
> 
> 时间：2012-08-01T09:00:05.130
> 
> 标签：android, geolocation, gps, android-mapview, android-location

**此代码中的位置始终返回 null。请检查我的代码并告诉我出了什么问题。当我在调试模式下运行项目时，provider="network" 但位置始终为空。我使用 DDMS 发送纬度和经度值，但没有改变。我不明白是什么问题**

**这部分在onCreate方法中**

```
lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);

        provider = lm.getBestProvider(criteria, true);
        location = lm.getLastKnownLocation(provider);

            updateLocation(location); 
```

**onResume 方法中的这一部分**

```
@Override   
    protected void onResume() {  
        super.onResume();
        lm.requestLocationUpdates(provider, 5000, 10, this);
    } 
```

**我使用 LocationListener（MapActivity 实现 LocationListener），这是 onLocationChanged 部分**

```
public void onLocationChanged(Location location) {
        updateLocation(location);   
    } 
```

**最后这是我的 updateLocation()**

```
private void updateLocation(Location location){
        if (location != null) {
            Double lat = location.getLatitude()*1E6;
            Double lng = location.getLongitude()*1E6;
            point = new GeoPoint(lat.intValue(), lng.intValue());

            mapView = (MapView) findViewById(R.id.mapView);
            mc = mapView.getController();
            mapView.setBuiltInZoomControls(true);

            //List<Overlay> overlays = mapView.getOverlays();
            myLocOverlay = new MyLocationOverlay(this, mapView);
            //overlays.add(myLocOverlay);
            mapView.getOverlays().add(myLocOverlay);
            myLocOverlay.enableMyLocation();

            myLocOverlay.runOnFirstFix(new Runnable() {
                public void run() {
                    mc.animateTo(myLocOverlay.getMyLocation());
                    }
            }); 

            mc.setZoom(15);
            mapView.invalidate();

            }

    } 
```

**我授予了基本权限，我使用谷歌地图库**

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />

<uses-library
            android:name="com.google.android.maps"
            android:required="true" >
        </uses-library> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:23:25.183

我认为你应该使用 LocationManager.GPS_PROVIDER 来请求。你可以测试我的代码：

```
mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,1l,1f, new LocationListener() {        
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
         // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

    }

    @Override
    public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
        updateLocation(location);               
    }
    }); 
```

祝你好运！^-^

# git - git update-index --no-assume-unchanged 不起作用

> ID：11755922
> 
> 赞同：6
> 
> 时间：2012-08-01T09:00:23.103
> 
> 标签：git

我`assume-unchanged`在几个文件上设置了该位，现在我想取消设置它们，但这不起作用。

```
> git update-index --no-assume-unchanged Gemfile
> git ls-files -v | grep Gemfile
S Gemfile
S Gemfile.lock
> git status
# On branch foo
nothing to commit (working directory clean)
> 
```

当然，我的 Gemfile 中有更改。有些我不想承诺，有些我愿意。如果其他人更改了 Gemfile，我将无法合并。这似乎真的把东西弄得有点太多了。

所以我有两个问题：

1：如何取消设置位？2：有没有更好的方法来忽略一个特定的本地更改，同时允许对该文件的其他更改正常工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-30T09:01:51.157

也许有点晚了，但我遇到了和你一样的问题，我通过使用`--really-refresh`标志解决了它

像这样：

```
git update-index  --really-refresh --no-assume-unchanged Gemfile 
```

希望这对你有用

帖子编辑：

如果您有多个文件，显然可以分两步完成

```
 git update-index  --really-refresh
 git update-index --no-assume-unchanged Gemfile 
```

# javascript - javascript中的颜色-如何构建CSS

> ID：11755924
> 
> 赞同：-1
> 
> 时间：2012-08-01T09:00:24.423
> 
> 标签：javascript

我需要建立颜色选项，然后根据选项来获取颜色。例如，如果颜色为 1 号以获得某种颜色，如果订单为 2 号则获得不同的颜色。

我还想不仅添加颜色，还想添加 CSS 的更多选项 构建此列表的最佳方法是什么？我需要用 CSS 做，然后根据大小读取数据吗？我需要用 class 构建 CSS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:23:33.887

和其他人一样，我不确定你在追求什么。但这里有一个可能是一个开始的[jsfiddle :)](http://jsfiddle.net/q8NX7/)

这是一个[更新的版本](http://jsfiddle.net/UUPdv/)。

# php - 用户登录后如何处理额外的登录尝试？

> ID：11755926
> 
> 赞同：4
> 
> 时间：2012-08-01T09:00:37.080
> 
> 标签：php, login, login-script

我有一个有效的登录脚本，但是，我想知道当用户已经登录时我应该如何处理额外的登录尝试。如果登录页面发现用户已经登录，它会重定向到主页。

但是，如果用户在登录页面打开了多个浏览器选项卡，使用一个登录，然后尝试使用其他浏览器选项卡再次登录，无论是使用相同的登录名还是另一个登录名，我应该如何处理这两种类型的请求？

更复杂的是，我有一个验证页面，在使用令牌验证用户后，该页面还将登录用户。如果用户已经登录，我应该如何处理？

例如，用户 A 和用户 B 都注册了并且都通过电子邮件收到了令牌。它们都在同一台 PC、同一浏览器、同一会话上。用户 A 验证令牌，然后成功登录。用户 B，然后验证令牌然后登录...？等待用户A已经登录！我应该如何处理用户 A？

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:10:22.763

> 如果用户在登录页面打开了多个浏览器选项卡，使用一个登录，然后尝试使用其他浏览器选项卡再次登录，我应该如何处理这个请求？

那么肯定会设置登录会话，并且如果它再次是有效登录，则无需进行身份验证？

通常有 3 种方法来处理额外的登录：

1.  忽略它，允许人们同时登录不同的位置

2.  当第二个会话登录时踢出第一个会话。这通常不是最好的解决方案，但它解决了人们关闭浏览器（即未正确注销）然后尝试在新会话中再次登录并被告诉他们不能。

3.  给用户一个错误，说他们在其他地方登录。如果这样做，请确保活动登录有时间限制，这样如果有人确实忘记在某个地方注销，或者他们的浏览器意外关闭，那么他们仍然能够重新登录 - 他们只需要等待一段时间时间。

就个人而言，除非有异常情况，否则我会选择第二种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:05:52.677

就个人而言，当有人进行双重登录时，首先登录的人会以任何可能的方式退出。

为什么？

基本上是因为如果有人忘记注销并离开他的电脑。返回另一台计算机并尝试登录但无法登录他真的真的很生气。

当用户登录时，在该计算机上或在另一台计算机上以相同帐户登录的所有其他用户都将被注销。允许用户始终登录到他或她的帐户。

你也可以忽略这一点。如果这不会导致您的应用程序出现问题，您可以让某人同时在多个地方使用一个帐户登录。但我们无法为您确定。

至于尝试在同一个浏览器上登录的两个不同用户，我从不让这种情况发生，这在我的应用程序中也是不可能的，因为我为此使用了 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:08:17.973

**使用 cookie：**

在登录页面：

```
<script type="text/javascript">
if(document.cookie.split(";")[0].split("=")[0] != "")//the login page checks for cookies every time it loads.if the password and id are saved,it'll redirects to homepage without showing login page
        {
        window.location.href = "welcome.html";
        }

if(condition)//condition when username and password are valid
            {
                var uname=document.getElementById("zname").value;
                var pswd=document.getElementById("zpswd").value;
                if(document.getElementById("chkbx").checked) //Remember me checkbox (stores username and password until "logout" is clicked in homepage)
                {
                    document.cookie=uname+"="+pswd;
                    alert("You will be automtically logged in when you visit this page again" +uname);
                }

                window.location.href="welcome.html";
            }
</script> 
```

在主页中：

```
<script type="text/javascript">
function del_cookie(name)
            {
        document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
    }
    function signOut()
            {
        del_cookie(document.cookie.split(";")[0].split("=")[0]);
        window.location.href ="login_page.html"
    }
</script> 
```

**因此，登录页面每次加载时都会检查 cookie。如果密码和ID被保存，它将重定向到主页而不显示登录页面**

# extjs4.1 - 在 Extjs4.1 中遇到问题

> ID：11755928
> 
> 赞同：0
> 
> 时间：2012-08-01T09:00:47.610
> 
> 标签：extjs4.1

我已经创建了一个chartSeriesStoreModel ..但是在ext js 4.1中仍然抛出以下错误

未启用 Ext.Loader，因此无法动态解析依赖关系。缺少必需的类：chartSeriesStoreModel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:18:02.823

首先，您还记得通过在应用程序声明之前将其放入 app.js 文件中来启用加载器吗？

```
Ext.onReady(function() {
    Ext.Loader.setConfig({ enabled:true});
}); 
```

那么，您的模型是否包含在您的应用程序或控制器的模型中？

# device-driver - 无法连接到选定的目标：连接失败：连接超时

> ID：11755934
> 
> 赞同：4
> 
> 时间：2012-08-01T09:01:27.173
> 
> 标签：device-driver, blackberry-playbook, blackberry-10

黑莓10问题：

我正在使用黑莓本机 SDK-beta1。

当我在真实设备上使用 Wi-Fi 或 USB 端口运行我的应用程序时，会显示错误“**无法连接到选定的目标：连接失败：连接超时**”。我成功构建了我的应用程序，我已经设置了构建模式设备发布。开发者模式在设备中打开。两个目标（Wi-Fi 和 USB）均已正确创建；Wi-Fi 开启；USB 线已成功连接（我也收到设备管理器的通知）。但我仍然收到此错误。

有时**在这种情况下不做任何改变会让我**在设备中成功下载和安装应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:24:34.600

尝试使用 cmd ping 设备并检查是否收到任何回复。如果是这样，请尝试清理您的项目或重新启动设备并再次运行。它是一个测试版，所以它有时可能会挂起。

# svn - Zend-Studio SVN 分支

> ID：11755939
> 
> 赞同：1
> 
> 时间：2012-08-01T09:01:54.023
> 
> 标签：svn, zend-studio

我对 Zend-Studio 和 SVN 都很陌生。

我已经检查了我的项目的主干。如何将更改作为主干的分支提交？

预先感谢，菲舍尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T14:23:01.357

右键单击您的项目，然后转到`Team->Branch...`

它将打开**“创建分支”**窗口并最终自动选择**新**内容

然后选择一个位置（使用 Repo 浏览器，或直接输入 svn URL），
如下所示：`svn://mysvn.com/myproject/branches/branch_name`
可选添加评论，
然后单击**“确定”**

现在你有了一个新的分支！

要使用它，

*   您可以在单击**“确定”**之前选中位置输入下方的**“开始在分支中工作”**复选框，
***   或使用项目中的“团队->切换”，*   或者通过创建一个连接到新分支的新项目！**

# php - Symfony2 - 注意：未定义的偏移量：0 由于自定义查询

> ID：11755942
> 
> 赞同：5
> 
> 时间：2012-08-01T09:02:00.997
> 
> 标签：php, doctrine-orm, entity-relationship

我有这个错误：

> “注意：未定义的偏移量：C:\wamp\www\Videotheque\vendor\doctrine\lib\Doctrine\ORM\QueryBuilder.php 第 240 行中的 0”

我正在在线创建视频集。有 2 个实体：电影和流派。在我的 GenRerepository 方法中，我尝试将函数 findAll() 重新定义为与类型相关的电影数量。

这是功能：

```
public function myFindAll()
{
    $genres = $this->_em->createQueryBuilder('g')
                        // leftJoin because I need all the genre
                        ->leftJoin('g.films', 'f')
                        ->addSelect('COUNT(f)')
                        ->groupBy('g')
                        ->getQuery()
                        ->getArrayResult();
    // $genres contains all the genres and the associated movies
    return ($genres);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T08:32:23.610

Repository 类提供了创建已为实体配置的 QueryBuilder 的方法，因此我们可以直接放入：

```
$this->createQueryBuilder('g') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T19:53:42.673

我自己发现了这个问题并想发布我的解决方案。由于您是从 EntityManager 而不是 EntityRepository 创建 queryBuilder ，因此您需要一个 from 语句。当没有 from 语句或 from 语句出现故障时会出现错误（from 需要在任何 join 之前出现以使其满意）。EntityRepository 在使用它时会为您处理这个问题。

```
public function myFindAll()
{
    $genres = $this->_em->createQueryBuilder('g')
                        //from statement here
                        ->from('GenreEntityClass', 'g')
                        // leftJoin because I need all the genre
                        ->leftJoin('g.films', 'f')
                        ->addSelect('COUNT(f)')
                        ->groupBy('g')
                        ->getQuery()
                        ->getArrayResult();
    // $genres contains all the genres and the associated movies
    return ($genres);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:22:54.280

尝试这个：

```
public function myFindAll()
{
    $qb = $this->_em->createQueryBuilder('g');
    $qb->leftJoin('g.films', 'f')
       ->select($qb->expr()->count('f')) // Use an expression
       ->groupBy('g.id')                 // Specify the field
    ;

    $genres = $qb->getQuery()->getArrayResult();

    // $genres contains all the genres and the associated movies
    return ($genres);
} 
```

# jquery - 如何只为背景提供类名？

> ID：11755948
> 
> 赞同：1
> 
> 时间：2012-08-01T09:02:41.057
> 
> 标签：jquery, html, css, background

我的背景图片有`width:118px`，点击背景图片我想执行一些jquery，我不能使用`<a>`标签。如何`cursor:pointer`只制作`background`以及如何只为背景提供类名？是否可以？如何？

```
<div id="post1_img"></div>

    #post1_img
 {
    width:280px;
height:33px;
background:url(../images/assets/pullTab-readMore-off-.png) no-repeat top center;
clear:both;
  } 
```

**编辑**

![在此处输入图像描述](../Images/68a11e45c86229d8ea214fca20d5e46a.png)

单击阅读更多我想执行一些操作，是否可以不创建任何额外的 div

```
width of div:280px;

width of image:118px; 
```

[http://jsfiddle.net/prash/A8FWa/](http://jsfiddle.net/prash/A8FWa/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:04:23.157

嘿，现在习惯 `after`了你的 CSS 中的属性

```
<div id="post1_img"></div> 
```

**CSS**

```
 #post1_img
 {
    width:280px;
height:33px;
background:url(http://www.gravatar.com/avatar/9932debdde3decc7726b508f43d57438?s=32&d=identicon&r=PG) no-repeat top center;
clear:both;
    border:1px solid black;
    position:relative;
  }

 #post1_img:after{
content:'';
position:absolute;
top:0;
left:50%;
margin-left:-16px;
width:32px;
height:33px;
cursor:pointer;    
} 
```

[现场演示](http://jsfiddle.net/A8FWa/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:09:32.360

您不能将类名放在仅背景图像的 html 元素中，但有一些变通方法。我建议您将图像放在 div 中并使用 cursor:pointer; 和位置：绝对；并设置 z-index: -1; 并在其上分层另一个 div。

现在我看到了您的更新和屏幕截图，您所要做的就是在页面部分上浮动一个绝对 div，例如：

```
#bgmask{
    width:70px;
    height:70px;
    position: absolute;
    right:10%;
    top: 0;
    z-index:999;
    cursor:pointer;
} 
```

**这是一个 JSFIDDLE：http: [//jsfiddle.net/collabcoders/xLx68/1/](http://jsfiddle.net/collabcoders/xLx68/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:10:05.463

您放入`cursor: pointer`您的 CSS 类`post1_img`，然后放入`cursor: <something else>`其中所有内容的样式/CSS。

例如，如果您的 DIV 仅包含一个表单（所以一切都是`input`different 的元素`type`）：

```
#post1_img {
    cursor:pointer;
    width:280px;
    height:33px;
    background:url(../images/assets/pullTab-readMore-off-.png) no-repeat top center;
    clear:both;
}

#post1_img input {
     cursor: auto; /*just an example*/
} 
```

至于为背景提供类名，这是不可能的，因为背景本身不是 HTML 元素。

编辑：修复了`cursor`第二个 CSS 块中的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T09:17:10.573

您可以将背景图像作为与图像具有相同尺寸的 div 的背景。然后将此 div 居中放置在另一个 div 中。

```
<div id="outer">
  <div id="post1_img">
   </div>
</div>

//css
#post1_img{
   width:70px;
   cursor:pointer;
   background:url(pullTab-readMore-off-.png) no-repeat top center;
   /*you need more css here to adjust this div to be center of the outer div*/
}
#outer{
   width:280px;
}

//jquery
$('#post1_img').click(function(){
    //do something
}); 
```

# iphone - 如何使用 corebluetooth 检测最近的 BLE 4.0 ios 设备？

> ID：11755949
> 
> 赞同：1
> 
> 时间：2012-08-01T09:02:43.243
> 
> 标签：iphone, ios, ipad

[我通过引用此链接http://olesitune.mine.nu/blelogg/?page_id=180](http://olesitune.mine.nu/blelogg/?page_id=180)致力于使用 corebluetooth 检测最近的 BLE 4.0 ios 设备 它没有检测到任何 ios 设备。任何人都可以提供一些有关此的信息。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:30:31.930

您使用的是 iOS 6 吗？只有 iOS 6 支持将 iOS 设备设置为服务器/外围设备。请记住，仅使用标准蓝牙设置，您无法从 iOS 发现任何 BLE 设备，您必须为通信双方编写一个应用程序。

如果您没有配置为外围设备的 iOS6 设备，该指南将不会帮助您发现任何 iOS 设备，只能帮助您发现标准 BLE 设备，如心率监视器、温度传感器等。

我看到您也在其他地方发布了这个问题，但请在期待任何有用的答案之前提交您的一些项目代码、结果、调试数据

# jdbc - 使用带有默认连接字符串的 JDBC 连接到 Azure SQL 的证书异常（管理控制台说要使用的那个）

> ID：11755951
> 
> 赞同：2
> 
> 时间：2012-08-01T09:02:46.513
> 
> 标签：jdbc, azure

我想从 jdbc 连接到 Azure SQL Server。

我从 azure 管理控制台复制连接字符串。它是这样的：

> jdbc:sqlserver://XXXX.database.windows.net:1433;database=YYYY;user=ZZZZZ@XXXX;password=PPPPPPPPPPP;encrypt=true;hostNameInCertificate=*.database.windows.net

当我尝试使用此值连接时，出现以下错误：

> **com.microsoft.sqlserver.jdbc.SQLServerException：驱动程序无法使用安全套接字层 (SSL) 加密建立与 SQL Server 的安全连接。错误：“java.security.cert.CertificateException：在安全套接字层 (SSL) 初始化期间无法验证证书中的服务器名称。服务器名称为 *.database.windows.net，证书中的名称为 data.am2- 1.database.windows.net。**

然后，如果我将 *.database.windows.net 更改为 data.am2-1.database.windows.net，正如它在异常中所说的那样，它工作正常。

那么设置这个名字有问题吗？我觉得如果它是默认的通配符，那么它可能会改变？当它发生时，我认为我将无法再连接。其他人遇到过这个问题吗？我正在使用我能找到的用于 SQL Server 的最新 jdbc 驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:35:08.940

原来将 sql server jdbc 版本升级到 4.0 版可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T14:22:27.047

我在 JDBC 驱动程序版本 4.1 上遇到了同样的问题，降级到 4.0 解决了问题

# mongodb - 为什么 serverstatus 对 mongod 写操作有不好的影响？

> ID：11755953
> 
> 赞同：7
> 
> 时间：2012-08-01T09:03:08.103
> 
> 标签：mongodb

我有 1 个 mongos、3 个 mongod 和 3 个配置服务器。当我写一些文件时，有时一个mongod的插入速度很慢，mongod日志文件中有“serverstatus was very slow”。为什么？

版本是 2.0.4

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T09:16:08.900

该消息实际上反映了您的服务器速度很慢的事实，而不是 serverStatus 导致了问题。如果 serverStatus 命令（例如由 MMS 代理定期运行）速度很慢，它将记录该警告 - 这是一种症状而不是原因。

它作为一个命令是非常轻量级的，所以如果它返回的速度足够慢以警告你，那么主机可能在那个时候很忙。

查找负载的常用位置（高插入/更新、表扫描、索引不佳的查询、磁盘问题、RAM/CPU 争用、页面错误等）。

# c# - 将零字节写入网络流是检测关闭连接的可靠方法吗？

> ID：11755954
> 
> 赞同：8
> 
> 时间：2012-08-01T09:03:11.457
> 
> 标签：c#, stream, network-programming

我正在开发一个应用程序，其中客户端连接 TCP 连接，然后触发大量工作，这些工作可能需要很长时间才能完成。如果用户断开 TCP 连接，必须取消这项工作。

目前，我正在做的是启动一个计时器，通过执行以下操作定期检查网络流连接：

```
// stream is a Stream instance
var abort = false;
using (new Timer(x => {
   try
   {
      stream.Write(new byte[0], 0, 0);
   }
   catch (Exception)
   {
      abort = true;
   }
}, null, 1000, 1000))
{
   // Do expensive work here and check abort periodically
} 
```

我本来想阅读`CanWrite`,`CanRead`或者`Connected`但他们报告了流的最后状态。写入零字节是测​​试连接性的可靠方法，还是这本身会导致问题？我无法在流上写入或读取任何真实数据，因为这会弄乱客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:14:56.207

假设我在几十年前就知道它可以工作，但没有内在的理由为什么应该这样做。您和 TCP 堆栈之间的任何 API 层都有权禁止对下一层的调用，即使它一直进入堆栈，它也只会在以下情况下返回错误：

1.  它在检查零长度之前检查网络错误，这取决于实现，并且
2.  已经存在网络错误，由先前的操作或传入的 RST 引起。

如果您期望它神奇地探测网络一直到另一端，那肯定不会。

# jquery - 在Jquery中获取foreach.click函数中的元素

> ID：11755960
> 
> 赞同：2
> 
> 时间：2012-08-01T09:03:50.670
> 
> 标签：jquery

我有这个代码。

```
 jQuery(document).ready(function () { 
        if (navigator.appName == "Microsoft Internet Explorer") {
            $("label img").each(function (i) {
              $(this).click(imageClikced);  
            });
        }
    });

   function imageClikced(img) {
        alert(img.type);
    } 
```

在警报框中，我得到 img.type 作为点击。我应该如何将图像作为参数传递给 imageClikced 函数。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:06:25.800

jQuery 事件处理程序的第一个参数是[jQuery 事件对象](http://api.jquery.com/category/events/event-object/)，它有一个属性`type`，告诉您触发的事件的类型。

您可以参考[`.currentTarget`](http://api.jquery.com/event.currentTarget/)事件对象的图像：

```
function imageClikced(e) {
    alert(e.currentTarget);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:08:01.553

事件处理程序 ( `this`) 的上下文对象是它自己的元素，所以这样做

```
function imageClikced() {
   alert(this);
} 
```

# sql-server-2005 - 在 SQL Server 2005 中使用 dateadd 需要一个日期而不是 datetime

> ID：11755961
> 
> 赞同：1
> 
> 时间：2012-08-01T09:03:53.353
> 
> 标签：sql-server-2005, dateadd

我有一个查询，可以获取程序中某个字段的日期。此日期必须修改 10 年。

我提出的查询是

```
SELECT DATEADD(yy, +10, '"+thisfield.value+"') 
```

where`'"+thisfield.value+"'`来自程序并填写 like `01-08-2012`。

查询的结果是`2022-07-31 00:00:00.000`。我遇到的问题是我只需要`2022-08-01`格式，`01-08-2022`这样我就可以用这个结果自动填充另一个字段。

在 SQL Server 2005 中，日期函数不仅仅适用于 datetime 函数，我只是不需要它。

我希望这很清楚（我第一次发布东西）。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:08:38.353

您可以截断结果，或将其转换为 DATE

```
CAST(DATEADD(yy, +10, '"+thisfield.value+"') AS DATE)" 

CONVERT(VARCHAR, DATEADD(yy, +10, '"+thisfield.value+"'), 101)" 
```

CONVERT 使用样式 101 的格式为 mm/dd/yyyy，恰好是您想要的格式。请记住，您可以根据需要在应用程序中格式化结果以用于显示目的，这比从 SQL Server 返回字符串要好。

另请注意，您应该查看参数化查询和/或存储过程。

# c# - 如何在 Silverlight C# 中制作 SuckEffect

> ID：11755964
> 
> 赞同：3
> 
> 时间：2012-08-01T09:04:06.810
> 
> 标签：c#, silverlight, animation, expression-blend, expression-blend-4

我如何为某些对象设置动画，例如`ListboxItem`当我单击启动 SuckEffect 以隐藏到屏幕的左角时，例如删除 iphone 中的项目。

我试图做简单的动画来制作飞行动画。但它不是那样工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:54:59.530

倾斜、缩放、平移和投影的组合给出了类似的东西（虽然没有漂亮的曲线）。它移动速度很快，因此有助于：

![在此处输入图像描述](../Images/4b415f05134e9a1199da0a76dbad25cf.png)

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="ItSucks.MainPage"
    Width="640" Height="480">
    <UserControl.Resources>
        <Storyboard x:Name="SuckLeft">
            <DoubleAnimation Duration="0:0:0.5" To="0.05" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.5" To="0.05" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.5" To="248" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.5" To="-318" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.5" To="45" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.5" To="54" Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationX)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.5" To="-35" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.SkewX)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
        </Storyboard>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <Rectangle x:Name="rectangle" Fill="#FF1717C8" Margin="212,120,216,124" Stroke="Black" StrokeThickness="8" RenderTransformOrigin="0.5,0.5">
            <Rectangle.Projection>
                <PlaneProjection/>
            </Rectangle.Projection>
            <Rectangle.RenderTransform>
                <CompositeTransform/>
            </Rectangle.RenderTransform>
        </Rectangle>
    </Grid>
</UserControl> 
```

这只是来自 Expression Blend 创作（做这类事情的最佳场所，因为它是如此互动）。

# java - 如何在 JSP 页面的不同部分调用 Java 方法

> ID：11755967
> 
> 赞同：0
> 
> 时间：2012-08-01T09:04:08.773
> 
> 标签：java, jsp

假设我有一个输入按钮。

```
<input type="button" value="click here /> 
```

然后是其他 HTML 和 Java 代码。

```
.
.
.
.
. 
```

然后是一个 div 标签。

```
<div>

</div> 
```

在这个 div 里面我想执行这些代码，但只有当我点击那个按钮时。

```
<% `int i = 0;
while(i<3) {
%> <div> I love you </div>
<% i++;} %>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:08:02.187

Java 代码在服务器上执行。点击等事件发生在用户的浏览器上。所以点击不能直接调用java代码。

你需要：

*   要么用纯 JavaScript 编写 div 的填充代码，
*   或在单击按钮时进行 ajax 调用，以从服务器检索 div 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:13:38.697

您需要使用 ajax 和 servlet 来实现这一点。servlet 将发送代码作为响应。ajax 的成功部分会将返回的字符串添加到 div 中。您需要为 div 分配一个 ID。ajax 语法将是

```
$.ajax({
    url:"../servletname",
    type:"POST",
    data:{},
    success:function(response){
        $("#divid").html(response);

    }
}); 
```

您需要使用 onClick 函数在 jsp 中调用 servlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:10:31.563

可能`Onclick` 事件您可以设置隐藏参数的值并在 div 中检查 script-let 中的参数值，`if else`但 java 代码将再次在服务器上执行，因此它将是对相同的新请求，`Action`否则将用于从服务器`Ajax`填充数据。`div`

# c - 奇怪的 C 函数 - 这个函数在做什么？

> ID：11755971
> 
> 赞同：0
> 
> 时间：2012-08-01T09:04:23.803
> 
> 标签：c, function

我遇到了这个功能，没有任何评论。我想知道这个功能是做什么的？有什么帮助吗？

```
int flr(int n, char a[])
{
    #define A(i) a[((i) + k) % n]
    int l[n], ls = n, z[n], min = 0;

    for (int i = 0; i < n; i++)
    {
        l[i] = i;
        z[i] = 1;
    }

    for (int k = 0; ls >= 2; k++)
    {
        min = l[0];
        for (int i=0; i<ls; i++) min = A(l[i])<A(min) ? l[i] : min;
        for (int i=0; i<ls; i++) z[A(l[i])!=A(min) ? l[i] : (l[i]+k+1)%n] = 0;
        for (int ls_=ls, i=ls=0; i<ls_; i++) if (z[l[i]]) l[ls++] = l[i];
    }

    return ls == 1 ? l[0] : min;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T10:57:27.190

多么有趣的问题！

其他海报是正确的，它返回最小值的索引，但实际上比这更有趣。

如果您将数组视为循环的（即，当您越过结尾时，返回开头），该函数将返回**最小词典子序列的起始索引**。

如果只有一个元素是最小的，则返回该元素。如果多个元素是最小的，我们会比较每个最小元素的下一个元素。

例如，输入`10`和`{0, 1, 2, 1, 1, 1, 0, 0, 1, 0}`：

*   在索引 0、6、7 和 9 处有四个 0 的最小元素
*   这两个后面跟着一个 1（0 和 7 元素），两个后面跟着一个 0（6 和 9 元素）。请记住，数组是圆形的。
*   0 小于 1，所以我们只考虑 6 和 9 处的 0。
*   其中，从 6 开始的 3 个元素的序列是“001”，从 9 开始的序列也是“001”，所以它们仍然同样最小
*   查看 4 个元素的序列，我们从元素 6 开始有“0010”，从元素 9 开始有“0012”。因此，从 6 开始的序列更小，并返回 6。（我已经检查过是这种情况）。

重构和注释代码如下：

```
int findStartOfMinimumSubsequence(int length, char circular_array[])
{
    #define AccessWithOffset(index) circular_array[(index + offset) % length]
    int indicesStillConsidered[length], count_left = length, indicator[length], minIndex = 0;

    for (int index = 0; index < length; index++)
    {
        indicesStillConsidered[index] = index;
        indicator[index] = 1;
    }

    // Keep increasing the offset between pairs of minima, until we have eliminated all of
    // them or only have one left.
    for (int offset = 0; count_left >= 2; offset++)
    {
        // Find the index of the minimal value for the next term in the sequence,
        // starting at each of the starting indicesStillConsidered
        minIndex = indicesStillConsidered[0];
        for (int i=0; i<count_left; i++) 
            minIndex = AccessWithOffset(indicesStillConsidered[i])<AccessWithOffset(minIndex) ? 
                indicesStillConsidered[i] : 
                minIndex;

        // Ensure that indicator is 0 for indices that have a non-minimal next in sequence
        // For minimal indicesStillConsidered[i], we make indicator 0 1+offset away from the index.
        // This prevents a subsequence of the current sequence being considered, which is just an efficiency saving.
        for (int i=0; i<count_left; i++){
            offsetIndexToSet = AccessWithOffset(indicesStillConsidered[i])!=AccessWithOffset(minIndex) ? 
                indicesStillConsidered[i] : 
                (indicesStillConsidered[i]+offset+1)%length;
            indicator[offsetIndexToSet] = 0;
        }

        // Copy the indices where indicator is true down to the start of the l array.
        // Indicator being true means the index is a minimum and hasn't yet been eliminated.
        for (int count_before=count_left, i=count_left=0; i<count_before; i++) 
            if (indicator[indicesStillConsidered[i]]) 
                indicesStillConsidered[count_left++] = indicesStillConsidered[i];
    }

    return count_left == 1 ? indicesStillConsidered[0] : minIndex;
} 
```

**样品用途**

很难说，真的。人为的例子：从一个循环的字母列表中，这将返回比任何其他相同长度的子序列更早出现在字典中的最短子序列的索引（假设所有字母都是小写的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:52:40.170

`a`它返回 range from element的子字符串中最小元素的位置`0..n-1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:27:48.833

测试代码

```
#include <stdio.h>

int flr(int n, char a[])
{
    #define A(i) a[((i) + k) % n]
    int l[n], ls = n, z[n], min = 0;

    for (int i = 0; i < n; i++)
    {
        l[i] = i;
        z[i] = 1;
    }

    for (int k = 0; ls >= 2; k++)
    {
        min = l[0];
        for (int i=0; i<ls; i++) min = A(l[i])<A(min) ? l[i] : min;
        for (int i=0; i<ls; i++) z[A(l[i])!=A(min) ? l[i] : (l[i]+k+1)%n] = 0;
        for (int ls_=ls, i=ls=0; i<ls_; i++) if (z[l[i]]) l[ls++] = l[i];
    }

    return ls == 1 ? l[0] : min;
}

int main() {
    printf("   test 1: %d\n", flr(4, "abcd"));
    printf("   test 3: %d\n", flr(6, "10e-10"));
    printf("   test 3: %d\n", flr(3, "zxyghab");
    printf("   test 4: %d\n", flr(5, "bcaaa"));
    printf("   test 5: %d\n", flr(7, "abcd"));
    return 0;
} 
```

此代码给出以下输出：

```
[root@s1 sf]# ./a.out 
   test 1: 0
   test 2: 3
   test 3: 1
   test 4: 2
   test 5: 4

1\. 0 is the position of `a` in the first case
2\. 3 is the position of `-` in second case.
3\. 1 is the position of `x` in third case. 
4\. 2 is the position of the second `a`.
5\. 4 is the position of the `\0` 
```

因此该函数返回所指向的字符指针的最小元素的位置，`a`并将考虑`n`元素。（这就是为什么它`x`在第三种情况下返回的位置）。

但是当多个最小元素可用时，它似乎无法以可预测的方式工作，因为它不返回第一个出现，也不返回最后一个。

它应该对超出范围的情况进行错误检查。这可能会导致将来出现问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T11:45:59.713

所以我正在对此进行测试。

```
int flr(int n, char a[])
{
#define A(i) a[((i) + k) % n]
int l[n], ls = n, z[n], min = 0;

for (int i = 0; i < n; i++)
{
    l[i] = i;
    z[i] = 1;
}

for (int k = 0; ls >= 2; k++)
{
    min = l[0];
    for (int i=0; i<ls; i++) min = A(l[i])<A(min) ? l[i] : min;
    for (int i=0; i<ls; i++) z[A(l[i])!=A(min) ? l[i] : (l[i]+k+1)%n] = 0;
    for (int ls_=ls, i=ls=0; i<ls_; i++) if (z[l[i]]) l[ls++] = l[i];
}

return ls == 1 ? l[0] : min;
}

int main()
{
int in = 10;
char array[] = {0, 1, 1, 1, 1, 1, 0, 1, 1, 0}; 

int res = flr(in, array);
printf("expecting res to be 6;\tres = %d\n", res);

system("pause");
return 0;
} 
```

输出为 res=9;

# drupal-7 - 从媒体模块中获取选定的文件

> ID：11755979
> 
> 赞同：0
> 
> 时间：2012-08-01T09:04:48.750
> 
> 标签：drupal-7, media

我正在尝试从 Drupal 7 的媒体模块中获取用户从媒体选择器中选择的文件。

我的表单包含选择器，可以成功上传和选择文件，但无法获取已选择文件的名称。

我的选择器表格：

```
$form['file'] = array(
    '#type' => 'media',
    '#title' => t('Screenshot'),
    '#description' => t('Upload an image of the feature (Optional)'),
),
); 
```

我需要获取所选文件的详细信息（例如名称、目录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:28:59.893

尝试使用 hook_submit 检查文件名。

假设表单中的文件字段名为“file”：

```
function your_form_submit($form, &$form_state) {
  $file=$form_state['values']['file'];
  // do something...
  file_save($file); 
```

您也可以使用 form_vaidate，我不知道您想对文件名做什么...

# c++ - 一个简单的 c++ 排序程序上的 LNK 2019 和 LNK1120 错误

> ID：11755984
> 
> 赞同：0
> 
> 时间：2012-08-01T09:05:12.767
> 
> 标签：c++, sorting, linker

我应该先说我是一名本科 CS 学生，对编译器的工作原理几乎一无所知。对我来说，这些错误看起来完全是胡言乱语，在网上搜索了大约半个小时后，恐怕我已经辞职寻求帮助了=（

这是我收到的错误：

> Prog4Main.obj：错误 LNK2019：函数 _main 中引用的无法解析的外部符号“void __cdecl shellSort(struct SortData * const,int)”(?shellSort@@YAXQAUSortData@@H@Z)
> 
> *\Debug\prog4 again.exe : 致命错误 LNK1120: 1 unresolved externals

这是我得到的唯一两个错误。

所以，关于我的程序试图完成的事情：

这是我的 c++ 课上的家庭作业。我们必须实现在课堂上展示给我们的 5 种排序算法。我已经很好地实现了冒泡排序和插入排序，但是 shell 排序给了我这些错误。它们在同一个 .cpp 文件中，当我注释掉 shellSort() 函数调用时，我没有编译错误。

由于我的夏季学期 c++ 课程即将结束，我们没有足够的时间深入介绍排序算法，因此讲师几乎为我们提供了该程序的所有代码。我们只需要更改变量名称并调整排序函数的形式以满足我们的需要。因此，我*知道*我所有的代码都是正确的，因为我没有编写它。

这是在 VS2010 中（不是 express，我认为它是终极版），我的应用程序是一个 win32 控制台应用程序，我已经检查并确保 user32.lib 已链接（正如在其他链接错误帖子之一中提到的那样）。我真的不知道如何解决这个问题......

继承人的问题代码：

```
//---------------------- Begin Shell Sort -----------------------
    totalTime = 0.0; // Initialize the time variable
    sortError = false; // Initialize the error flag
    // For each of 5 runs on this algorithm
    for(int i=0; i<5; i++)
    {
        // Read the data.  You must do this before each sort
        if(!ReadData(DataArray, NUMRECS))
        {
            cout << "Failed to read data file.\n Program Terminated\n";
            return 0;
        }
        // Start the microsecond timer
        mst->Start();

        shellSort(DataArray, NUMRECS);// Call the sort function here PROBLEM SPOT

        // Stop the microsecond timer
        mst->Stop();
        // Check for error in sorting
        if(!CheckData(DataArray, NUMRECS))
            sortError = true;
        else
            totalTime += mst->getTime(); // Add to the total time for this sort
    }
    // Calculate the average time
    averageTime = totalTime / 5.0;

    // Output the results after checking to be sure the sort worked
    if(sortError)
        cout << "Error in Shell Sort\n\n";
    else
        cout << "Shell sort took " << averageTime << " seconds to complete\n\n";
    //------------------------ End Shell Sort ----------------------------- 
```

非常感谢你们提供的任何帮助。

编辑：继承人的原型和函数定义...

```
    #define NUMRECS 10000

`void shellSort(SortData DataArray[NUMRECS], int count);

int main{...}

//---------------------SHELL SORT------------------------
void ShellSort(SortData DataArray[], int count)
{
    int i, delta;

    delta = count;

    do
    {
        delta = 1 + delta / 3;
        for(i=0; i<delta; i++)
            DeltaInsertionSort(DataArray, i, delta, count);
    }
    while(delta > 1);
}

void DeltaInsertionSort(SortData DataArray[], int I, int Delta, int count)
{
    int            j, k;
    int            key;
    int            NotDone;
    SortData       temp;

    j = I + Delta;

    while(j < count)
    {
        key = DataArray[j].key;        /* Get next key to sort */
        temp = DataArray[j];    /* Remove and hold */

        /* Do insertion sort on this key in the block of delta records */
        /* Move each struct where DataArray[j].key > key to the right  */
        /*   by delta spaces and insert the key there.                 */
        insertion(DataArray, key);

        k = j;
        NotDone = TRUE;

        do
        {
            if(DataArray[k - Delta].key <= key)
                NotDone = FALSE;    /* Terminate the loop */
            else
            {
                DataArray[k] = DataArray[k - Delta];
                k -= Delta;
                if(k==I) NotDone = FALSE;
            }
        }
        while(NotDone);

        /* Insert the moved key */
        DataArray[k] = temp;

        /* Get next key to insert--one full delta increment to the right */
        j += Delta;
    }
}` 

            回答 #1

赞同：5

时间：2012-08-01T09:18:16.920

C++ 区分大小写：`shellSort`与`ShellSort`. 您已经声明并调用了一个函数，但实现了一个完全不相关的函数！

这是链接器错误而不是编译器错误的原因是，前向声明告诉编译器“在`shellSort`某处将有此函数的定义”，但没有指定在哪里。由于它不在此 .cpp 文件中，因此编译器相信它必须在另一个 .cpp 文件中，稍后将与此 .cpp 文件链接在一起。当你到达链接阶段时，仍然没有 function `shellSort`。

```

# sql - SQL 查询到 LinQ 的翻译

> ID：11755985
> 
> 赞同：0
> 
> 时间：2012-08-01T09:05:24.467
> 
> 标签：sql, linq, linq-to-sql

由于来自客户的奇怪请求，我设法弄清楚如何使用 SQL 查询来实现它，但我无法将它翻译成 LinQ。

```
 SELECT (SELECT count(*) FROM table1 where attribute1 like 'value1'),
        (SELECT count(*) FROM table2 where attribute2 like 'value2') 
```

查询到 LinQ 的翻译是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:28:17.973

你可以只为`Count()`函数提供一个谓词

```
var result = new { 
            Count1 = table1.Count(r => r.attribute1.Contains("value1")), 
            Count2 = table2.Count(r => r.attribute2.Contains("value2")) 
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:10:29.237

```
var count1 = (from i in table1 where SqlMethods.Like(i.attribute1, "value1") select i).Count();
var count2 = (from i in table2 where SqlMethods.Like(i.attribute2, "value2") select i).Count(); 
```

# javascript - 我找不到javascript代码在哪里

> ID：11755996
> 
> 赞同：2
> 
> 时间：2012-08-01T09:06:03.903
> 
> 标签：javascript, html

我有点问题！在我的网站上，页脚标签显示后，此代码就在那里。我尝试将此链接加载到我的浏览器中，但无法加载！

```
<script 
    type="text/javascript" 
    src="http://example.com/adserver/static/p/10048/inimage_s.js">
</script> 
```

我尝试在我的文件中查找，但我找不到！问题是无法加载此文件，因为此服务器上不存在此文件，而且我的其他文件加载速度很慢！我尝试在 Firefox 中加载网站，但未显示此代码！

如何找到此代码（此 js 文件）或禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:17:36.777

我有完全一样的问题。应该有某种扩展/广告软件/任何导致这种情况的原因。我在这里报告过：[http ://code.google.com/p/chromium/issues/detail?id=139634](http://code.google.com/p/chromium/issues/detail?id=139634)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:12:21.010

您的 chrome 扩展中是否有一些名为 Fast save 1.1 或 Domain Error Assistant 1.0 的扩展？当我禁用这些扩展时，错误不再发生。

编辑：

我从未安装过这些扩展程序——Chrome 网上商店中也没有关于它的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:12:55.187

查看链接它与广告有关。这意味着您正在文件中的其他地方加载与此有关的脚本。

如果您不自己添加此脚本，它不应该阻止您网站的加载，只会阻止文件的加载，这不会给您带来任何问题。

尝试在您的代码中查找广告（您可能知道您是否在任何地方这样做过）。

没有广告？然后查看您包含的所有其他可能导致此问题的脚本，并针对执行此操作的脚本，看看您是否真的需要此脚本。

也找不到？也许它是您的浏览器，包括脚本。或者，您的机器上的任何地方都可能存在某种病毒。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T13:22:03.263

将此链接放在您的浏览器中：

```
http://overlay.mediads.info:8080/adserver/static/p/10048/inimage_s.js 
```

并下载 JS 文件（保存文件）。如果您想禁用它，只需从您的页面中删除链接。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-01T09:09:36.760

好吧，您只需从文件中删除这行代码即可禁用加载。

我可以毫无问题地加载这个 js 文件，代码如下：

```
/** Bind for this object Function **/
if( typeof Function.prototype.bind != 'function' ){
   Function.prototype.bind = function (bind) {
       var self = this;
       return function () {
           var args = Array.prototype.slice.call(arguments);
           return self.apply(bind || null, args);
       };
   };
}
/******************************** ver. 0.1F8.731 Cortica Default Object ********************************************************/
var CorticaDO = {
    version                 : 073,
    height                  : 210,
    width                   : 190,
    bannerType              : 15,
    publisherId             : 10048,
    dataUrl                 : "http://srv.overlay-ad.com:8080/adserver/Server",
    dotClickUrl             : "http://srv.overlay-ad.com:8080/adserver/inimageclick",
    requestId               : '',
    fontfamily              : "arial,helvetica,sans-serif",
    textsize                : 10,
    opacity                 : 9,// from 1 to 10
    floaters                : [],
    scanedImages            : [],
    fzindex                 : 999998, // 999998
    rescanParamExt          : "",
    rescan                  : 0,
    REC                     : 0,
    debugMode               : true,
    doRescan                : false,
    onReload                : false,
    /** Object Common Functions *********************************************************/
    /** Detect Parameters **/
    getParameterByName : function(identifier,name) {
        var scripts = document.getElementsByTagName('script') ,i , curScript;
        for (i = 0; i < scripts.length; ++i)
        {
            curScript = scripts[i];
            if (curScript.src.match(identifier))
            {
                name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
                var regexS = "[\\?&]" + name + "=([^&#]*)";
                var regex = new RegExp(regexS);
                var results = regex.exec((curScript.src.match(/\?.*/) || [undefined])[0]);
                if(results == null)
                    {return "";}
                else{return decodeURIComponent(results[1].replace(/\+/g, " "));}
            }
        }
        return ;
    },
    /** Decode URL ***/
    urlDecode : function(psEncodeString){
        var lsRegExp = /\+/g;                                           /* Create a regular expression to search all +s in the string */
        return unescape(String(psEncodeString).replace(lsRegExp, " ")); /* Return the decoded string */
    },
    /** Count Object Properties **///////
    countProperties : function(obj){
        var count = 0;
        for(var prop in obj){if(obj.hasOwnProperty(prop)){++count;}}
        return count;
    },
    /** Debug Mode ***/
    consoleOut : function(msg){if(this.debugMode && typeof console != 'undefined' && typeof console.log === 'function'){console.log(msg);}},
    /******************************** Images Detection ************************************************************************************/
    /** Check Image ***/
    checkImageParam : function(obj){
        if(obj.height > this.height && obj.width > this.width)
            {return true;}      
        else{return false;}
    },
    /** Get Visible Images ***/
    getAllVisibleImages : function(){
        var images = document.getElementsByTagName('img'),
            i,
            tmpFloater = null,
            newImages = [];
        /* Preset Floaters */
        for(i=0; i < CorticaDO.floaters.length; i++)
            {CorticaDO.floaters[i].visible = false;}
        /* Over Images */
        if(typeof images != 'undefined')
        {
            for( var s in images)
            {
                if(CorticaDO.checkImageParam(images[s]) && CorticaDO.isVisible( images[s]))
                {
                    var found = false;
                    /* Detect Object exist */
                    if( CorticaDO.floaters.length > 0) 
                    {
                        for(i = 0; i < CorticaDO.floaters.length; i++){

                            if( CorticaDO.floaters[i].isObj(images[s]))
                            {
                                CorticaDO.floaters[i].visible = true; /* Object detected and must be visible */
                                found = true;
                                break;
                            }
                        }
                    }
                    /* New Object Add */
                    if( !found)
                    {
                        tmpFloater = new corticaFDOC();
                        tmpFloater.src = images[s].src;
                        tmpFloater.obj = images[s];
                        tmpFloater.visible = true;
                        tmpFloater.index = CorticaDO.floaters.length;
                        CorticaDO.floaters.push( tmpFloater );
                        /* New Images Array for Request to AdServer */
                        this.scanedImages.push({src:images[s].src,obj:images[s],index:tmpFloater.index});
                        newImages.push( tmpFloater ); 
                    }
                }
            }
            if(newImages.length > 0)
            {
                this.getImageList(newImages);
                this.sendScanedData();
            }
            /* Show/Hide Floaters */
            if( CorticaDO.floaters.length > 0) 
            {
                for(i=0;i< CorticaDO.floaters.length;i++)
                    {CorticaDO.floaters[i].setVisibility();}
            }
        }
    },
    /** Check Image Visibility ***/
    isVisible : function(element){
        if( element.offsetWidth === 0 || element.offsetHeight === 0)
            {return false;}
        // Resolution for IE 9/8 quirk/compatible mode
        var rects = element.getClientRects(),height,r,in_viewport;
        if('innerWidth' in window)
            {height = document.documentElement.clientHeight}
        else{height = document.body.clientHeight;}
        for( var i = 0, l = rects.length; i < l; i++)
        {
            r = rects[i];
            in_viewport = parseInt( r.top) > 0 ? parseInt( r.top) <= height : ( parseInt( r.bottom) > 0 && parseInt( r.bottom) <= height );
            if( in_viewport && CorticaDO.isElementOnTop( r, element))
                {return true;}
        }
        return false;
    },
    /** Is view Point on Element **/
    isElementOnTop : function( r, element){
        var x = parseInt(( r.left + r.right)/2),
            y = parseInt(( r.bottom + r.top)/2);
        var el = document.elementFromPoint( x, y);
        if( typeof el == 'undefined' || el == null)
            {return false}
        return (el === element);
    },
    /** Preset Image and Data Image Functions **/ /** tu - tag url,ts - tag size, ta - tag alt, tt - tag title **/
    getImageList : function(list){
        var lsRegExp    = /\+/g,
            tu = "",ts = "&sizes=",ta = "&alts=",tt = "&titles=";
        for(var img=0;img<list.length;img++)
        {
            var tiUrl   = escape(list[img].src);
            tiUrl       = tiUrl.replace(lsRegExp, encodeURIComponent('+'));
            tu += tiUrl + "|";
            ts += list[img].obj.width + "x" + list[img].obj.height + "|";
            var alt = list[img].obj.getAttribute('alt');
            var title = list[img].obj.getAttribute('title');
            if(typeof alt == 'string')
                {ta += escape(alt.replace (/\|/g, " ")) + "|";}
            else{ta += "|";}
            if(typeof title == 'string')
                {tt += escape(title.replace (/\|/g, " ")) + "|";}
            else{tt += "|";}
        }
        this.rescanParamExt = tu+ts+ta+tt+"&rescan="+this.rescan+"&requesId="+this.requestId;
    },
    /******************************************************************************************************************************/
    /** Start Main Flow **/
    corticaScan : function(){
        if(CorticaDO.onRescan || CorticaDO.onReload){return;}
        CorticaDO.onRescan = true;
        CorticaDO.getAllVisibleImages();
        CorticaDO.onRescan = false; 
    },
    /** Common Start Flows Function **/
    applyCortica : function(data,reqID){
        CorticaDO.onReload = true;
        this.requestId = reqID;
        var dataCount = this.countProperties(data),found,i;
        if(dataCount > 0)
        {
            for(var img = 0;img < dataCount;img++)
            {
                var src = unescape(data[img].imageUrl);
                for( var p in this.scanedImages)
                {
                    found = false;
                    for(i=0;i < CorticaDO.floaters.length;i++)
                    {   
                        if( CorticaDO.floaters[i].src == src && CorticaDO.floaters[i].floater == null && this.scanedImages[p].index == CorticaDO.floaters[i].index)
                        {
                            CorticaDO.floaters[i].parseData(data[img]);
                            CorticaDO.floaters[i].createOFloater();
                            CorticaDO.floaters[i].viewFloater();
                            found = true;
                            break;
                        }
                    }
                    if(found){break;}
                }
            }
        }
        CorticaDO.onReload = false;
    },
    /** Send Images to AdServer **/
    sendScanedData : function(){
        try{
            this.consoleOut('\nReload');// Debug Only
            this.requestId  = '';
            if(typeof this.REC.removeScriptTag == 'function')
            {
                this.REC.removeScriptTag();                             // Delete from Header corticaData
                this.REC    = 0;
            }
            //
            CorticaDO.REC   = new CorticaJSONscriptRequest(CorticaDO.dataUrl,'btype='+CorticaDO.bannerType+'&rid='+CorticaDO.publisherId+'&ref='+escape(document.location.href)+'&imgs='+CorticaDO.rescanParamExt);
            CorticaDO.REC.buildScriptTag();
            CorticaDO.REC.addScriptTag();
            CorticaDO.onReload       = false;
            CorticaDO.refUrl         = "";
            CorticaDO.rescanParamExt = '';
            CorticaDO.rescan++;
        }
        catch(err)
        {
            this.REC        = 0;
            this.consoleOut(err); // Debug Only
        }
    },
    /** Event Close Floater ***/
    closeFloater : function(p){
        if(document.getElementById('corticaOF'+ p))
        {
            document.getElementById('corticaOF'+ p).style.display = 'none';
            CorticaDO.floaters[p].disable = true;
        }
        else{this.consoleOut('Can\'t find floater for close action with ID: corticaOF'+p);}
    },
};
/** Floater Default Object Clone *********************************************************************************************************************/
function corticaFDOC(){
    this.obj        = null;
    this.src        = '';
    this.visible    = true;
    this.index      = null;
    this.data       = {styleID:1,behaviour:2,advertiserId:10,campaignId:0,siteId:1,html:null,banW:null,banH:null,nonloc:1,isFullWidth:0,content:3};
    this.floater    = null;
    this.onOFView   = false;
    this.disable    = false;
};
corticaFDOC.prototype = {
    /** Create Overlay Floater ***/
    createOFloater : function (){
        var self            = this;
        var f               = document.createElement('DIV');
        if(this.data.isFullWidth == 0)
            {f.style.width  = this.data.banW + "px";}
        else{f.style.width  = this.obj.width + "px";}
        f.style.height      = this.data.banH + "px";
        f.invoker           = this.obj;
        f.style.position    = 'absolute';
        f.style.display     = 'none';
        f.style.cursor      = 'pointer';
        f.style.overflow    = 'hidden';
        f.style.fontFamily  = CorticaDO.fontfamily;
        f.style.padding     = f.style.margin = 0;
        f.innerHTML         = this.data.html;
        f.setAttribute('id','corticaOF'+this.index);
        document.body.appendChild(f);
        /** Set Close Button **/
        if(document.getElementById('corticaFcl'))
        {
            var fclb = document.getElementById('corticaFcl');
            fclb.id = "corticaFcl"+this.index;
            fclb.onclick = function()
                {CorticaDO.closeFloater(self.index);};//this.closeFloater(self.index).bind(this);
        }
        this.floater = f;
    },
    /** Parse Data from AdServer ***/
    parseData : function (data){
        if(typeof data['behaviorId'] != 'undefined')    {this.data.behaviour  = data['behaviorId'];}
        if(typeof data['loc'] != 'undefined')           {this.data.nonloc   = data['loc'];}             // Non Locationable
        if(typeof data['siteId'] != 'undefined')        {this.data.siteId   = data['siteId'];}
        if(typeof data['isFullWidth'] != 'undefined')   {this.data.isFullWidth= data['isFullWidth'];}   // isFullWidth
        if(typeof data['content'] != 'undefined')       {this.data.content  = data['content'];}         // content
        // Set data to object
        if(typeof data['ads'][0].html != 'undefined'){
            this.data.html              = CorticaDO.urlDecode(data['ads'][0].html);
            if(typeof data['ads'][0].bannerWidth != 'undefined')                        // banW
                {this.data.banW         = data['ads'][0].bannerWidth;}
            if(typeof data['ads'][0].bannerHeight != 'undefined')                       // banH
                {this.data.banH         = data['ads'][0].bannerHeight;}
            if(typeof data['ads'][0].styleId != 'undefined' && data['ads'][0].styleId)
                {this.data.styleID      = data['ads'][0].styleId;}
            if(data['ads'][0].advertiserId)
                {this.data.advertiserId = data['ads'][0].advertiserId;}
            if(data['ads'][0].campaignId)
                {this.data.campaignId   = data['ads'][0].campaignId;}
        }
    },
    /** Show Floater ***/
    viewFloater: function (){
        try{
            if(typeof this.data != 'undefined')
            {
                var allOffset   = this.getOffsetElement(this.obj);
                var strH    = this.floater.style.height;
                var strW    = this.floater.style.width;
                if(this.floater.style.display != "block" && !this.disable){
                    if(this.data.nonloc == 3)
                        {this.floater.style.top = (allOffset.top + this.obj.height) + 'px';}
                    else{this.floater.style.top = (allOffset.top + this.obj.height - parseInt(strH.replace(/px/i, ""),10)) + 'px';}
                    var left = 0;
                    if(this.data.isFullWidth == 0)
                        {left                   = parseInt((this.obj.width - parseInt(strW.replace(/px/i, ""),10))/2);}
                    this.floater.style.left     = allOffset.left + left + 'px';
                    this.floater.style.zIndex   = CorticaDO.fzindex;
                    this.floater.style.display  = 'block';
                    if(!this.onOFView)
                    {
                        this.onOFView = true;
                        this.doclick(0);
                    }
                }
            }       
        }
        catch(err){CorticaDO.consoleOut(err);}
    },
    /** Position Correction ***/
    correctPos : function (){
        if(this.floater != null)
        {
            var allOffset   = this.getOffsetElement(this.obj);
            var strH    = this.floater.style.height;
            var strW    = this.floater.style.width;
            if(this.data.nonloc == 3)
                {this.floater.style.top = (allOffset.top + this.obj.height) + 'px';}
            else{this.floater.style.top = (allOffset.top + this.obj.height - parseInt(strH.replace(/px/i, ""),10)) + 'px';}
            var left = 0;
            if(this.data.isFullWidth == 0)
                {left                   = parseInt((this.obj.width - parseInt(strW.replace(/px/i, ""),10))/2);}
            this.floater.style.left = allOffset.left + left + 'px';             
        }
    },
    /** Close Floater ***/
    closeFloater : function(){
        if(document.getElementById('corticaOF'+ this.index))
        {
            document.getElementById('corticaOF'+ this.index).style.display = 'none';
            this.disable = true;
        }
        else{CorticaDO.consoleOut('Can\'t find floater for close action with ID: corticaOF'+this.index);}
    },
    /** Get Visibility Status ***/
    isVisible : function(){return this.visible;},
    /** Hide Floater **/
    hide : function(){this.toggle(false);},
    /** Show Floater **/
    display : function(){this.toggle(true);},
    /** Show/Hide Floaters [action: true/false] ***/
    toggle : function(action){
        var status = action ? "block" : "none";
        if(!this.disable)
        {
            if(document.getElementById('corticaOF'+this.index))
                {document.getElementById('corticaOF'+this.index).style.display = status;}
            if(action)
                {this.correctPos();}
        }
    },
    setVisibility : function(){
        if(this.floater != null)
            {this.visible ? this.display() : this.hide();}
    },
    /** Check if obj Same **/
    isObj : function (obj){return this.src == obj.src && this.obj === obj;},
    /** Report ver 0.9 **/
    doclick : function(dotIndex){
        var  requester  = new Image();
        requester.src   = CorticaDO.dotClickUrl + '?picUrl=' + escape(this.src) + '&pageUrl =' + escape(document.location.href) + 
        '&reqid='   + CorticaDO.requestId + '&pid=' + CorticaDO.publisherId + '&btype=' + CorticaDO.bannerType +
        '&campid='  + this.data.campaignId +
        '&advid='   + this.data.advertiserId +
        "&styleId=" + this.data.styleID + 
        "&behaviorId=" + this.data.behaviour +
        '&siteId='  + this.data.siteId;
    },
    /******* ______ ************************************************************************************/
    /** Get Element Position flow 2***/
    getOffsetSum: function(elem) {
        var top=0, left=0;
        while(elem) {
            top     = top + parseInt(elem.offsetTop);
            left    = left + parseInt(elem.offsetLeft);
            elem    = elem.offsetParent;
        }
        return {top: top, left: left};
    },
    /** Get Element Position flow 1***/
    getOffsetRect: function(elem) {
        var box         = elem.getBoundingClientRect();                                 // (1)
        var body        = document.body;                                                // (2)
        var docElem     = document.documentElement;
        var scrollTop   = window.pageYOffset || docElem.scrollTop || body.scrollTop;    // (3)
        var scrollLeft  = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;
        var clientTop   = docElem.clientTop || body.clientTop || 0;                     // (4)
        var clientLeft  = docElem.clientLeft || body.clientLeft || 0;
        var top         = box.top +  scrollTop - clientTop;                             // (5)
        var left        = box.left + scrollLeft - clientLeft;
        return {top: Math.round(top), left: Math.round(left)};
    },
    /** Get Element Position Main ***/
    getOffsetElement: function(el){
        if (el.getBoundingClientRect)
            {return this.getOffsetRect(el);}
        else{return this.getOffsetSum(el);}
    },
    /** Get Element Style ***/
    getElStyle : function(el,styleProp){
        var value, defaultView = el.ownerDocument.defaultView;  
        if (defaultView && defaultView.getComputedStyle){// W3C standard way:
            styleProp = styleProp.replace(/([A-Z])/g, "-$1").toLowerCase();
            return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);
        }
        else{ 
            if (el.currentStyle) { // IE
                styleProp = styleProp.replace(/\-(\w)/g,function(str,letter){return letter.toUpperCase();});
                value = el.currentStyle[styleProp];
                if (/^\d+(em|pt|%|ex)?$/i.test(value)){// convert other units to pixels on IE
                    return (
                        function(value){
                            var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;
                            el.runtimeStyle.left = el.currentStyle.left;
                            el.style.left = value || 0;
                            value = el.style.pixelLeft + "px";
                            el.style.left = oldLeft;
                            el.runtimeStyle.left = oldRsLeft;
                            return value;
                        }
                    )(value);
                }
                return value;
            }
        }
        return null;
    }
};
/***** OLD ****************************************************************************************/
function CorticaJSONscriptRequest(fullUrl,data){
    this.data       = data;
    this.fullUrl    = fullUrl;
    this.noCacheIE  = '&noCacheIE=' + (new Date()).getTime();
    this.headLoc    = document.getElementsByTagName("head").item(0);
    this.scriptId   = 'JscriptId' + CorticaJSONscriptRequest.scriptCounter++;
};
CorticaJSONscriptRequest.scriptCounter = 1;
CorticaJSONscriptRequest.prototype.buildScriptTag   = function(){
    this.scriptObj = document.createElement("script");
    this.scriptObj.setAttribute("type", "text/javascript");
    this.scriptObj.setAttribute("charset", "utf-8");
    this.scriptObj.setAttribute("src", this.fullUrl + '?' + this.data + this.noCacheIE);
    this.scriptObj.setAttribute("id", this.scriptId);
};
CorticaJSONscriptRequest.prototype.removeScriptTag  = function(){this.headLoc.removeChild(this.scriptObj);};
CorticaJSONscriptRequest.prototype.addScriptTag     = function(){this.headLoc.appendChild(this.scriptObj);};
/****************************************************************************************************/
/** Load / Calculate request string & Create script tag **/
function corticaInit(){
    if(arguments.callee.done){return;}  /* Preventing DC */
    // Make css
    corticaMakeCSS('.corticaBS{background-color:transparent;}.corticaAbs{position:absolute;}.corticaIS{image-rendering:optimizeQuality; -ms-interpolation-mode: bicubic;}.corticaRB{width:100%;text-align:center;position:absolute;border:0;background-color:black;opacity:'+CorticaDO.opacity / 10 +';alpha(opacity='+CorticaDO.opacity+'0);}');
    // Get Publisher ID identifier:(script name with extention),name(parameter name)
    var pubID = CorticaDO.getParameterByName('searchBox.js','pid');
    if(typeof pubID != 'undefined' && pubID != '')
        {CorticaDO.publisherId = pubID;}
    // Start Auto Scanning for Visible Images
    setInterval("CorticaDO.corticaScan()", 200);
    // Set DC Flags
    arguments.callee.done = true;
    alreadyrunflag        = 1;
};
/** Common Functions *************************************************************************************/
function corticaMakeCSS(css){
    var head = document.getElementsByTagName('head')[0],style = document.createElement('style'),rules = document.createTextNode(css);
    style.type = 'text/css';
    if(style.styleSheet)
        {style.styleSheet.cssText = rules.nodeValue;}
    else{style.appendChild(rules);}
    head.appendChild(style);
};
/** Start Script *****************************************************************************************/
corticaInit(); 
```

# ruby - 使用Ruby拆分为数组时如何保留单个数据的数据类型？

> ID：11755997
> 
> 赞同：1
> 
> 时间：2012-08-01T09:06:05.590
> 
> 标签：ruby, ruby-on-rails-3

对于我的代码，我从客户端接收到以逗号分隔的数据流，每个字段具有不同的数据类型。收到后，我将它们拆分并写入一个数组。代码如下：

```
 require 'socket'

s = TCPSocket.open('localhost',2000)
time = Time.now.to_i
s.puts(cf,PUB,#{time},001.41011,N,103.76822)
s.close 
```

在 eventmachine 服务器上，我的代码如下：

```
require 'rubygems'
require 'eventmachine'
require './Load2MySQL.rb'

 module EchoServer

   def post_init
     puts "-- someone connected to the echo server!"
   end

   def receive_data data
       loc = Array.new(6)
       loc = data.split(',').to_a     

     wr2db(loc[0], loc[1], loc[2], loc[3], loc[4], loc[5])

   end

   def unbind
     puts "-- someone disconnected from the echo server!"
     close_connection
#     EventMachine::stop_event_loop
   end
 end

 EventMachine::run {
   EventMachine::start_server "0.0.0.0", 2000, EchoServer
 } 
```

我发现这样做，数组中的所有元素都将转换为字符串。我怎样才能保留他们的数据类型？

问候， New2RoR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:05:21.220

您需要在通过 TCP 套接字发送之前编组对象。发送数据时使用`Marshal.dump(data)`和接收数据时使用`Marshal.load(data)`。查看[ruby​​ 文档](http://www.ruby-doc.org/core-1.9.3/Marshal.html)以获取更多信息。此外，根据您的应用程序，您可能对使用[Ruby DRB](http://segment7.net/projects/ruby/drb/introduction.html)感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:23:49.643

原因是使用了[split](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-split)方法，它确实返回了一个字符串数组。唯一的方法是将每个元素的类型与值一起发送，或者，如果您已经知道，请在拆分后强制类型，如下所示：

```
float_val = loc(5).to_f 
```

第三种方法是使用[Ruby 的 CSV](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-new)来生成和解析字符串。它允许您使用字段转换器来读取值并将它们转换为浮点数或整数（如果适用）。

另外，我认为您不需要`loc = Array.new(6)`在 Ruby 中执行此操作。此外，如果您使用的是已建立的 mysql 适配器之一，如果这是您的问题，您不必担心存储前的类型转换，它会为您完成。